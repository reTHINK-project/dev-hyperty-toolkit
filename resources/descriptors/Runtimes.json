{
  "Runtime": {
    "sourcePackage": {
      "sourceCode": "Ly8gdmVyc2lvbjogMC4xMC4xCi8vIGRhdGU6IFRodSBOb3YgMTYgMjAxNyAxNToyNzowOSBHTVQrMDAwMCAoV0VUKQovLyBsaWNlbmNlOiAKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgoKIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoIlJ1bnRpbWUiLFtdLHQpOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlJ1bnRpbWU9dCgpOmUuUnVudGltZT10KCl9KHRoaXMsZnVuY3Rpb24oKXsvKioqKioqLwpyZXR1cm4gZnVuY3Rpb24oZSl7LyoqKioqKi8KLyoqKioqKi8KLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KLyoqKioqKi8KZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhyKXsvKioqKioqLwovKioqKioqLwovLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8KaWYodFtyXSkvKioqKioqLwpyZXR1cm4gdFtyXS5leHBvcnRzOy8qKioqKiovCi8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovCnZhciBuPXRbcl09ey8qKioqKiovCmk6ciwvKioqKioqLwpsOiExLC8qKioqKiovCmV4cG9ydHM6e319Oy8qKioqKiovCi8qKioqKiovCi8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovCnJldHVybiBlW3JdLmNhbGwobi5leHBvcnRzLG4sbi5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLG4ubD0hMCxuLmV4cG9ydHN9Ly8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLwovLyBUaGUgbW9kdWxlIGNhY2hlCi8qKioqKiovCnZhciB0PXt9Oy8qKioqKiovCi8qKioqKiovCi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLwovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKQovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovCnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLm09ZSxfX3dlYnBhY2tfcmVxdWlyZV9fLmM9dCxfX3dlYnBhY2tfcmVxdWlyZV9fLmQ9ZnVuY3Rpb24oZSx0LHIpey8qKioqKiovCl9fd2VicGFja19yZXF1aXJlX18ubyhlLHQpfHwvKioqKioqLwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHsvKioqKioqLwpjb25maWd1cmFibGU6ITEsLyoqKioqKi8KZW51bWVyYWJsZTohMCwvKioqKioqLwpnZXQ6cn0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24oZSl7LyoqKioqKi8KdmFyIHQ9ZSYmZS5fX2VzTW9kdWxlPy8qKioqKiovCmZ1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06LyoqKioqKi8KZnVuY3Rpb24oKXtyZXR1cm4gZX07LyoqKioqKi8KLyoqKioqKi8KcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZCh0LCJhIix0KSx0fSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0yMDcpfShbLyogMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxpPXIoMzApLG89cigxOCksYT1yKDE5KSxzPXIoMjcpLHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLGYsbCxkLHA9ZSZ1LkYseT1lJnUuRyxoPWUmdS5TLHY9ZSZ1LlAsZz1lJnUuQixiPXk/bjpoP25bdF18fChuW3RdPXt9KTooblt0XXx8e30pLnByb3RvdHlwZSxtPXk/aTppW3RdfHwoaVt0XT17fSksXz1tLnByb3RvdHlwZXx8KG0ucHJvdG90eXBlPXt9KTt5JiYocj10KTtmb3IoYyBpbiByKQovLyBjb250YWlucyBpbiBuYXRpdmUKZj0hcCYmYiYmdm9pZCAwIT09YltjXSwKLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWQKbD0oZj9iOnIpW2NdLAovLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dApkPWcmJmY/cyhsLG4pOnYmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP3MoRnVuY3Rpb24uY2FsbCxsKTpsLAovLyBleHRlbmQgZ2xvYmFsCmImJmEoYixjLGwsZSZ1LlUpLAovLyBleHBvcnQKbVtjXSE9bCYmbyhtLGMsZCksdiYmX1tjXSE9bCYmKF9bY109bCl9O24uY29yZT1pLAovLyB0eXBlIGJpdG1hcAp1LkY9MSwvLyBmb3JjZWQKdS5HPTIsLy8gZ2xvYmFsCnUuUz00LC8vIHN0YXRpYwp1LlA9OCwvLyBwcm90bwp1LkI9MTYsLy8gYmluZAp1Llc9MzIsLy8gd3JhcAp1LlU9NjQsLy8gc2FmZQp1LlI9MTI4LC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAKZS5leHBvcnRzPXV9LC8qIDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt0Ll9fZXNNb2R1bGU9ITAsdC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSwvKiAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoMTk3KSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaS5kZWZhdWx0KShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0JiZkZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJmRlZmluZVByb3BlcnRpZXMoZSxyKSxlfX0oKX0sLyogMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0sLyogNCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAp2YXIgcj1lLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9cil9LC8qIDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LC8qIDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0sLyogNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3OCkoIndrcyIpLGk9cig0Nyksbz1yKDQpLlN5bWJvbCxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvOyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWEmJm9bZV18fChhP286aSkoIlN5bWJvbC4iK2UpKX0pLnN0b3JlPW59LC8qIDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5CmUuZXhwb3J0cz0hcig1KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMyksaT1yKDE0NSksbz1yKDMxKSxhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt0LmY9cig4KT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdD1vKHQsITApLG4ociksaSl0cnl7cmV0dXJuIGEoZSx0LHIpfWNhdGNoKGUpe31pZigiZ2V0ImluIHJ8fCJzZXQiaW4gcil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sLyogMTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIG49cigzMyksaT1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9pKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LC8qIDExICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpOy8qCiogbG9nbGV2ZWwgLSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwKKgoqIENvcHlyaWdodCAoYykgMjAxMyBUaW0gUGVycnkKKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiovCiFmdW5jdGlvbihvLGEpeyJ1c2Ugc3RyaWN0IjtuPWEsdm9pZCAwIT09KGk9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bi5jYWxsKHQscix0LGUpOm4pJiYoZS5leHBvcnRzPWkpfSgwLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiOwovLyBDcm9zcy1icm93c2VyIGJpbmQgZXF1aXZhbGVudCB0aGF0IHdvcmtzIGF0IGxlYXN0IGJhY2sgdG8gSUU2CmZ1bmN0aW9uIGJpbmRNZXRob2QoZSx0KXt2YXIgcj1lW3RdO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByLmJpbmQpcmV0dXJuIHIuYmluZChlKTt0cnl7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwocixlKX1jYXRjaCh0KXsKLy8gTWlzc2luZyBiaW5kIHNoaW0gb3IgSUU4ICsgTW9kZXJuaXpyLCBmYWxsYmFjayB0byB3cmFwcGluZwpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KHIsW2UsYXJndW1lbnRzXSl9fX0KLy8gQnVpbGQgdGhlIGJlc3QgbG9nZ2luZyBtZXRob2QgcG9zc2libGUgZm9yIHRoaXMgZW52Ci8vIFdoZXJldmVyIHBvc3NpYmxlIHdlIHdhbnQgdG8gYmluZCwgbm90IHdyYXAsIHRvIHByZXNlcnZlIHN0YWNrIHRyYWNlcwpmdW5jdGlvbiByZWFsTWV0aG9kKHIpe3JldHVybiJkZWJ1ZyI9PT1yJiYocj0ibG9nIiksdHlwZW9mIGNvbnNvbGUhPT10JiYodm9pZCAwIT09Y29uc29sZVtyXT9iaW5kTWV0aG9kKGNvbnNvbGUscik6dm9pZCAwIT09Y29uc29sZS5sb2c/YmluZE1ldGhvZChjb25zb2xlLCJsb2ciKTplKX0KLy8gVGhlc2UgcHJpdmF0ZSBmdW5jdGlvbnMgYWx3YXlzIG5lZWQgYHRoaXNgIHRvIGJlIHNldCBwcm9wZXJseQpmdW5jdGlvbiByZXBsYWNlTG9nZ2luZ01ldGhvZHModCxuKXsvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwpmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTt0aGlzW29dPWk8dD9lOnRoaXMubWV0aG9kRmFjdG9yeShvLHQsbil9Ci8vIERlZmluZSBsb2cubG9nIGFzIGFuIGFsaWFzIGZvciBsb2cuZGVidWcKdGhpcy5sb2c9dGhpcy5kZWJ1Z30KLy8gSW4gb2xkIElFIHZlcnNpb25zLCB0aGUgY29uc29sZSBpc24ndCBwcmVzZW50IHVudGlsIHlvdSBmaXJzdCBvcGVuIGl0LgovLyBXZSBidWlsZCByZWFsTWV0aG9kKCkgcmVwbGFjZW1lbnRzIGhlcmUgdGhhdCByZWdlbmVyYXRlIGxvZ2dpbmcgbWV0aG9kcwpmdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKGUscixuKXtyZXR1cm4gZnVuY3Rpb24oKXt0eXBlb2YgY29uc29sZSE9PXQmJihyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLHIsbiksdGhpc1tlXS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfX0KLy8gQnkgZGVmYXVsdCwgd2UgdXNlIGNsb3NlbHkgYm91bmQgcmVhbCBtZXRob2RzIHdoZXJldmVyIHBvc3NpYmxlLCBhbmQKLy8gb3RoZXJ3aXNlIHdlIHdhaXQgZm9yIGEgY29uc29sZSB0byBhcHBlYXIsIGFuZCB0aGVuIHRyeSBhZ2Fpbi4KZnVuY3Rpb24gZGVmYXVsdE1ldGhvZEZhY3RvcnkoZSx0LHIpey8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCnJldHVybiByZWFsTWV0aG9kKGUpfHxlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBMb2dnZXIoZSxuLGkpe2Z1bmN0aW9uIHBlcnNpc3RMZXZlbElmUG9zc2libGUoZSl7dmFyIG49KHJbZV18fCJzaWxlbnQiKS50b1VwcGVyQ2FzZSgpO2lmKHR5cGVvZiB3aW5kb3chPT10KXsKLy8gVXNlIGxvY2FsU3RvcmFnZSBpZiBhdmFpbGFibGUKdHJ5e3JldHVybiB2b2lkKHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc109bil9Y2F0Y2goZSl7fQovLyBVc2Ugc2Vzc2lvbiBjb29raWUgYXMgZmFsbGJhY2sKdHJ5e3dpbmRvdy5kb2N1bWVudC5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KHMpKyI9IituKyI7In1jYXRjaChlKXt9fX1mdW5jdGlvbiBnZXRQZXJzaXN0ZWRMZXZlbCgpe3ZhciBlO2lmKHR5cGVvZiB3aW5kb3chPT10KXt0cnl7ZT13aW5kb3cubG9jYWxTdG9yYWdlW3NdfWNhdGNoKGUpe30KLy8gRmFsbGJhY2sgdG8gY29va2llcyBpZiBsb2NhbCBzdG9yYWdlIGdpdmVzIHVzIG5vdGhpbmcKaWYodHlwZW9mIGU9PT10KXRyeXt2YXIgcj13aW5kb3cuZG9jdW1lbnQuY29va2llLG49ci5pbmRleE9mKGVuY29kZVVSSUNvbXBvbmVudChzKSsiPSIpOy0xIT09biYmKGU9L14oW147XSspLy5leGVjKHIuc2xpY2UobikpWzFdKX1jYXRjaChlKXt9Ci8vIElmIHRoZSBzdG9yZWQgbGV2ZWwgaXMgbm90IHZhbGlkLCB0cmVhdCBpdCBhcyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuCnJldHVybiB2b2lkIDA9PT1hLmxldmVsc1tlXSYmKGU9dm9pZCAwKSxlfX12YXIgbyxhPXRoaXMscz0ibG9nbGV2ZWwiO2UmJihzKz0iOiIrZSksLyoKICAgICAgICoKICAgICAgICogUHVibGljIGxvZ2dlciBBUEkgLSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BpbXRlcnJ5L2xvZ2xldmVsIGZvciBkZXRhaWxzCiAgICAgICAqCiAgICAgICAqLwphLm5hbWU9ZSxhLmxldmVscz17VFJBQ0U6MCxERUJVRzoxLElORk86MixXQVJOOjMsRVJST1I6NCxTSUxFTlQ6NX0sYS5tZXRob2RGYWN0b3J5PWl8fGRlZmF1bHRNZXRob2RGYWN0b3J5LGEuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gb30sYS5zZXRMZXZlbD1mdW5jdGlvbihyLG4pe2lmKCJzdHJpbmciPT10eXBlb2YgciYmdm9pZCAwIT09YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSYmKHI9YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSksISgibnVtYmVyIj09dHlwZW9mIHImJnI+PTAmJnI8PWEubGV2ZWxzLlNJTEVOVCkpdGhyb3cibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogIityO2lmKG89ciwhMSE9PW4mJi8vIGRlZmF1bHRzIHRvIHRydWUKcGVyc2lzdExldmVsSWZQb3NzaWJsZShyKSxyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbChhLHIsZSksdHlwZW9mIGNvbnNvbGU9PT10JiZyPGEubGV2ZWxzLlNJTEVOVClyZXR1cm4iTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmcifSxhLnNldERlZmF1bHRMZXZlbD1mdW5jdGlvbihlKXtnZXRQZXJzaXN0ZWRMZXZlbCgpfHxhLnNldExldmVsKGUsITEpfSxhLmVuYWJsZUFsbD1mdW5jdGlvbihlKXthLnNldExldmVsKGEubGV2ZWxzLlRSQUNFLGUpfSxhLmRpc2FibGVBbGw9ZnVuY3Rpb24oZSl7YS5zZXRMZXZlbChhLmxldmVscy5TSUxFTlQsZSl9OwovLyBJbml0aWFsaXplIHdpdGggdGhlIHJpZ2h0IGxldmVsCnZhciB1PWdldFBlcnNpc3RlZExldmVsKCk7bnVsbD09dSYmKHU9bnVsbD09bj8iV0FSTiI6biksYS5zZXRMZXZlbCh1LCExKX0KLy8gU2xpZ2h0bHkgZHViaW91cyB0cmlja3MgdG8gY3V0IGRvd24gbWluaW1pemVkIGZpbGUgc2l6ZQp2YXIgZT1mdW5jdGlvbigpe30sdD0idW5kZWZpbmVkIixyPVsidHJhY2UiLCJkZWJ1ZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiXSxuPW5ldyBMb2dnZXIsaT17fTtuLmdldExvZ2dlcj1mdW5jdGlvbihlKXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCIiPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBzdXBwbHkgYSBuYW1lIHdoZW4gY3JlYXRpbmcgYSBsb2dnZXIuIik7dmFyIHQ9aVtlXTtyZXR1cm4gdHx8KHQ9aVtlXT1uZXcgTG9nZ2VyKGUsbi5nZXRMZXZlbCgpLG4ubWV0aG9kRmFjdG9yeSkpLHR9OwovLyBHcmFiIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgdmFyaWFibGUgaW4gY2FzZSBvZiBvdmVyd3JpdGUKdmFyIG89dHlwZW9mIHdpbmRvdyE9PXQ/d2luZG93LmxvZzp2b2lkIDA7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09dCYmd2luZG93LmxvZz09PW4mJih3aW5kb3cubG9nPW8pLG59LG4uZ2V0TG9nZ2Vycz1mdW5jdGlvbigpe3JldHVybiBpfSxufSl9LC8qIDEyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0MTEpLF9fZXNNb2R1bGU6ITB9fSwvKiAxMyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByPWUuZXhwb3J0cz17dmVyc2lvbjoiMi41LjEifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1yKX0sLyogMTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpCnZhciBuPXIoMzIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0sLyogMTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0vKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KLyoqCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwKICogQG1vZHVsZSB1dGlscwogKi8KLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCi8qKgogKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkKICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MKICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTAogKi8KZnVuY3Rpb24gZGl2aWRlVVJMKGUpe2Z1bmN0aW9uIHJlY3Vyc2UoZSl7dmFyIHQ9LyhbYS16QS1aLV0qKSg6XC9cLyg/OlwuKT98OikoWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpO3JldHVybiBlLnJlcGxhY2UodCwiJDEsJDMsJDQiKS5zcGxpdCgiLCIpfXZhciB0PXJlY3Vyc2UoZSk7Ci8vIElmIHRoZSB1cmwgaGFzIG5vIHNjaGVtZQppZih0WzBdPT09ZSYmIXRbMF0uaW5jbHVkZXMoIkAiKSl7cmV0dXJue3R5cGU6IiIsZG9tYWluOmUsaWRlbnRpdHk6IiJ9fQovLyBjaGVjayBpZiB0aGUgdXJsIGhhcyB0aGUgc2NoZW1lIGFuZCBpbmNsdWRlcyBhbiBACmlmKHRbMF09PT1lJiZ0WzBdLmluY2x1ZGVzKCJAIikpe3Q9cmVjdXJzZSgodFswXT09PWU/InNtdHAiOnRbMF0pKyI6Ly8iK3RbMF0pfQovLyBpZiB0aGUgZG9tYWluIGluY2x1ZGVzIGFuIEAsIGRpdmlkZSBpdCB0byBkb21haW4gYW5kIGlkZW50aXR5IHJlc3BlY3RpdmVseQpyZXR1cm4gdFsxXS5pbmNsdWRlcygiQCIpJiYodFsyXT10WzBdKyI6Ly8iK3RbMV0sdFsxXT10WzFdLnN1YnN0cih0WzFdLmluZGV4T2YoIkAiKSsxKSkse3R5cGU6dFswXSxkb21haW46dFsxXSxpZGVudGl0eTp0WzJdfX0vKioKICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5CiAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IE9iamVjdCB0byBiZSBjaGVja2VkCiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7CiAqLwpmdW5jdGlvbiBlbXB0eU9iamVjdChlKXtyZXR1cm4hKCgwLGEuZGVmYXVsdCkoZSkubGVuZ3RoPjApfS8qKgogKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YQogKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkCiAqIEByZXR1cm4ge09iamVjdH0KICovCmZ1bmN0aW9uIGRlZXBDbG9uZShlKXsKLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgppZihlKXJldHVybiBKU09OLnBhcnNlKCgwLGkuZGVmYXVsdCkoZSkpfWZ1bmN0aW9uIHJlbW92ZVBhdGhGcm9tVVJMKGUpe3ZhciB0PWUuc3BsaXQoIi8iKTtyZXR1cm4gdFswXSsiLy8iK3RbMl0rIi8iK3RbM119LyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbAogKiBAcGFyYW0gIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKi8KZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX0vKioKICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqIEByZXR1cm4ge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqLwpmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKGUpe3ZhciB0PWRpdmlkZVVSTChlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufS8qKgogKiBDaGVjayBpZiB0aGUgdXNlciBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIFVSTCBmb3JtYXQsIGlmIG5vdCwgY29udmVydCB0byBVUkwgZm9ybWF0CiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXIKICogQHJldHVybiB7c3RyaW5nfSAgIHVzZXJVUkwgICAgdGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9Vc2VyVVJMKGUpewovLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0CmlmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PWRpdmlkZVVSTChlKTsKLy9jaGVjayBpZiB0aGUgdXJsIGlzIHdlbGwgZm9ybWF0ZWQKaWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIGdldFVzZXJVUkxGcm9tRW1haWwoZSl9ZnVuY3Rpb24gaXNEYXRhT2JqZWN0VVJMKGUpe3ZhciB0PVsiZG9tYWluLWlkcCIsInJ1bnRpbWUiLCJkb21haW4iLCJoeXBlcnR5Il0scj1lLnNwbGl0KCI6Ly8iKSxuPXJbMF07cmV0dXJuLTE9PT10LmluZGV4T2Yobil9ZnVuY3Rpb24gaXNMZWdhY3koZSl7cmV0dXJuIGUuc3BsaXQoIkAiKS5sZW5ndGg+MX1mdW5jdGlvbiBpc1VSTChlKXtyZXR1cm4gZS5zcGxpdCgiLyIpLmxlbmd0aD49M31mdW5jdGlvbiBpc1VzZXJVUkwoZSl7cmV0dXJuInVzZXIiPT09ZGl2aWRlVVJMKGUpLnR5cGV9ZnVuY3Rpb24gaXNIeXBlcnR5VVJMKGUpe3JldHVybiJoeXBlcnR5Ij09PWRpdmlkZVVSTChlKS50eXBlfS8qKgogKiBnZXQgaW5mb3JtYXRpb24gcmVsYXRpdmUgZWFjaCBjb21wb25lbnQgY29uZmlndXJlZCBvbiBydW50aW1lIGNvbmZpZ3VyYXRpb247CiAqIEBwYXJhbSAge29iamVjdH0gY29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCBhbGwgY29uZmlndXJhdGlvbgogKiBAcGFyYW0gIHtzdHJpbmd9IGNvbXBvbmVudCAgICAgc3RyaW5nIHdpdGggdGhlIGNvbXBvbmVudCB0byBnZXQgdGhlIGNvbmZpZ3VyYXRpb24sIGxpa2UsIHJ1bnRpbWVVUkxTLCBjYXRhbG9ndWVVUkxzLCBtc2dOb2RlVVJMLCBkb21haW5SZWdpc3RyeVVSTDsKICogQHBhcmFtICB7c3RyaW5nfSByZXNvdXJjZSAgICAgIHR5cGUgb2YgcmVzb3VyY2UgdG8gZ2V0LCBsaWtlLCBjYXRhbG9ndWUsIHJ1bnRpbWVVQSwgcHJvdG9jb2xzdHViLCBpZHBQcm94eQogKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgICAgICAgICAgcmV0dXJuIGFuIG9iamVjdCB3aXRoIGFsbCBjb25maWd1cmF0aW9uczsKICovCmZ1bmN0aW9uIGdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMoZSx0LHIpe3JldHVybiBlW3RdW3JdfS8qKgogKiBCdWlsZCBhIGZ1bGwgdXJsIHdpdGggdGhlIHJ1bnRpbWUgY29uZmlndXJhdGlvbjsKICogQHBhcmFtICB7b2JqZWN0fSBjb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGFsbCBjb25maWd1cmF0aW9uCiAqIEBwYXJhbSAge3N0cmluZ30gY29tcG9uZW50ICAgICBzdHJpbmcgd2l0aCB0aGUgY29tcG9uZW50IHRvIGdldCB0aGUgY29uZmlndXJhdGlvbiwgbGlrZSwgcnVudGltZVVSTFMsIGNhdGFsb2d1ZVVSTHMsIG1zZ05vZGVVUkwsIGRvbWFpblJlZ2lzdHJ5VVJMOwogKiBAcGFyYW0gIHtzdHJpbmd9IHJlc291cmNlICAgICAgdHlwZSBvZiByZXNvdXJjZSB0byBnZXQsIGxpa2UsIGNhdGFsb2d1ZSwgcnVudGltZVVBLCBwcm90b2NvbHN0dWIsIGlkcFByb3h5CiAqIEBwYXJhbSAge3N0cmluZ30gdHlwZSAgICAgICAgICByZXNvdXJjZSB0byBnZXQsIGxpa2UgYSBoeXBlcnR5IG5hbWUgb3IgcHJvdG9jb2xzdHViIG5hbWU7CiAqIEBwYXJhbSAge2Jvb2xlYW59IHVzZUZhbGxiYWNrICBpZiB0cnVlIHRoZSBmdW5jdGlvbiB3aWxsIGNoZWNrIGlmIGhhdmUgYSBmYWxsYmFjayB1cmw7CiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgICBwYXJ0aWFsIHVybCB0byBjb250YWN0IHRoZSByZXNvdXJjZTsKICovCmZ1bmN0aW9uIGJ1aWxkVVJMKGUsdCxyLG4pe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF0sYT1lW3RdLHM9dm9pZCAwO2lmKCFhLmhhc093blByb3BlcnR5KHIpKXRocm93IEVycm9yKCJUaGUgY29uZmlndXJhdGlvbiAiKygwLGkuZGVmYXVsdCkoYSwiIiwyKSsiIGRvbid0IGhhdmUgdGhlICIrcisiIHJlc291cmNlIHlvdSBhcmUgbG9va2luZyBmb3IiKTt2YXIgdT1hW3JdOwovLyBjb25zb2xlLmxvZyh1cmwpOwpyZXR1cm4gbj8ocz11LnByZWZpeCtlLmRvbWFpbit1LnN1ZmZpeCtuLHUuaGFzT3duUHJvcGVydHkoImZhbGxiYWNrIikmJm8mJihzPXUuZmFsbGJhY2suaW5kZXhPZigiJWRvbWFpbiUiKT91LmZhbGxiYWNrLnJlcGxhY2UoLyglZG9tYWluJSkvZyxlLmRvbWFpbikrbjp1LmZhbGxiYWNrK24pKTpzPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4LHN9LyoqCiAqIEdlbmVyYXRlIGEgR2xvYmFsIFVuaXF1ZSBJRAogKgogKiBAcmV0dXJucyBTdHJpbmc7CiAqLwpmdW5jdGlvbiBnZW5lcmF0ZUdVSUQoKXtmdW5jdGlvbiBzNCgpe3JldHVybiBNYXRoLmZsb29yKDY1NTM2KigxK01hdGgucmFuZG9tKCkpKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfXJldHVybiBzNCgpK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrczQoKStzNCgpfWZ1bmN0aW9uIGdldFVzZXJJZGVudGl0eURvbWFpbihlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdCgiLiIpLG49ci5sZW5ndGg7cmV0dXJuIDE9PW4/cltuLTFdOnJbbi0yXSsiLiIrcltuLTFdfS8qKgogKiBDaGVjayBpZiBVUkwgaXMgZnJvbSBhIGJhY2tlbmQgc2VydmljZQogKiBAcGFyYW0gIHtzdHJpbmd9IHVybCAgICAgVVJMIHRvIGJlIHByb2Nlc3NlZAogKiBAcmV0dXJuIHtib29sZWFufQogKi8KZnVuY3Rpb24gaXNCYWNrZW5kU2VydmljZVVSTChlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdCgiLiIpLG49WyJkb21haW4iLCJnbG9iYWwiLCJkb21haW4taWRwIl0saT1bInJlZ2lzdHJ5IiwibXNnLW5vZGUiXSxvPXZvaWQgMDtyZXR1cm4gci5sZW5ndGg+MSYmKG89ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1pLmluZGV4T2YoZSl9KVswXSksISghb3x8LTE9PT1pLmluZGV4T2YobykpfHwhIXQudHlwZSYmLTEhPT1uLmluZGV4T2YodC50eXBlKX1mdW5jdGlvbiBkaXZpZGVFbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm57dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX19ZnVuY3Rpb24gYXNzaWduKGUsdCxyKXtlfHwoZT17fSksInN0cmluZyI9PXR5cGVvZiB0JiYodD1wYXJzZUF0dHJpYnV0ZXModCkpO2Zvcih2YXIgbj10Lmxlbmd0aC0xLGk9MDtpPG47KytpKXt2YXIgbz10W2ldO28gaW4gZXx8KGVbb109e30pLGU9ZVtvXX1lW3Rbbl1dPXJ9ZnVuY3Rpb24gc3BsaXRPYmplY3RVUkwoZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpLHI9dFswXSsiLy8iK3RbMl0rIi8iK3RbM10sbj10WzVdLGk9e3VybDpyLHJlc291cmNlOm59O3JldHVybiBpfWZ1bmN0aW9uIGNoZWNrQXR0cmlidXRlKGUpe3ZhciB0PS8oKChbYS16QS1aXSspOlwvXC8oWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KVwvW2EtekEtWjAtOVwuXStAW2EtekEtWjAtOV0rKFwtKT9bYS16QS1aMC05XSsoXC4pP1thLXpBLVowLTldezIsMTB9P1wuW2EtekEtWl17MiwxMH0pKC4rKD89LmlkZW50aXR5KSk/L2dtLHI9W10sbj1bXTtpZihudWxsPT1lLm1hdGNoKHQpKW49ZS5zcGxpdCgiLiIpO2Vsc2V7Zm9yKHZhciBpPXZvaWQgMDtudWxsIT09KGk9dC5leGVjKGUpKTspCi8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGF2b2lkIGluZmluaXRlIGxvb3BzIHdpdGggemVyby13aWR0aCBtYXRjaGVzCmkuaW5kZXg9PT10Lmxhc3RJbmRleCYmdC5sYXN0SW5kZXgrKywKLy8gVGhlIHJlc3VsdCBjYW4gYmUgYWNjZXNzZWQgdGhyb3VnaCB0aGUgYG1gLXZhcmlhYmxlLgppLmZvckVhY2goZnVuY3Rpb24oZSx0KXswPT09dCYmci5wdXNoKGUpfSk7dmFyIG89dm9pZCAwO3IuZm9yRWFjaChmdW5jdGlvbih0KXtvPWUucmVwbGFjZSh0LCIqLSoiKSxuPW8uc3BsaXQoIi4iKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIiotKiI9PT1lP3Q6ZX0pfSl9cmV0dXJuIG59ZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKGUpe3ZhciB0PS8oWzAtOWEtekEtWl1bLVx3XSopOlwvXC8vZztpZihlLmluY2x1ZGVzKCI6Ly8iKSl7dmFyIHI9ZS5zcGxpdCh0KVswXSxuPXIuc3BsaXQoIi4iKSxpPWUucmVwbGFjZShyLCIiKTtpZihlLmluY2x1ZGVzKCJpZGVudGl0eSIpKXt2YXIgbz1pLnNwbGl0KCJpZGVudGl0eS4iKTtpPW9bMF0uc2xpY2UoIi4iLC0xKSxvPW9bMV0uc3BsaXQoIi4iKSxuLnB1c2goaSwiaWRlbnRpdHkiKSxuPW4uY29uY2F0KG8pfWVsc2Ugbi5wdXNoKGkpO3JldHVybiBuLmZpbHRlcihCb29sZWFuKX1yZXR1cm4gZS5zcGxpdCgiLiIpfWZ1bmN0aW9uIGlzRW1wdHkoZSl7Zm9yKHZhciB0IGluIGUpaWYoZS5oYXNPd25Qcm9wZXJ0eSh0KSlyZXR1cm4hMTtyZXR1cm4oMCxpLmRlZmF1bHQpKGUpPT09KDAsaS5kZWZhdWx0KSh7fSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDUpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoNTkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKTt0LmRpdmlkZVVSTD1kaXZpZGVVUkwsdC5lbXB0eU9iamVjdD1lbXB0eU9iamVjdCx0LmRlZXBDbG9uZT1kZWVwQ2xvbmUsdC5yZW1vdmVQYXRoRnJvbVVSTD1yZW1vdmVQYXRoRnJvbVVSTCx0LmdldFVzZXJVUkxGcm9tRW1haWw9Z2V0VXNlclVSTEZyb21FbWFpbCx0LmdldFVzZXJFbWFpbEZyb21VUkw9Z2V0VXNlckVtYWlsRnJvbVVSTCx0LmNvbnZlcnRUb1VzZXJVUkw9Y29udmVydFRvVXNlclVSTCx0LmlzRGF0YU9iamVjdFVSTD1pc0RhdGFPYmplY3RVUkwsdC5pc0xlZ2FjeT1pc0xlZ2FjeSx0LmlzVVJMPWlzVVJMLHQuaXNVc2VyVVJMPWlzVXNlclVSTCx0LmlzSHlwZXJ0eVVSTD1pc0h5cGVydHlVUkwsdC5nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzPWdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMsdC5idWlsZFVSTD1idWlsZFVSTCx0LmdlbmVyYXRlR1VJRD1nZW5lcmF0ZUdVSUQsdC5nZXRVc2VySWRlbnRpdHlEb21haW49Z2V0VXNlcklkZW50aXR5RG9tYWluLHQuaXNCYWNrZW5kU2VydmljZVVSTD1pc0JhY2tlbmRTZXJ2aWNlVVJMLHQuZGl2aWRlRW1haWw9ZGl2aWRlRW1haWwsdC5hc3NpZ249YXNzaWduLHQuc3BsaXRPYmplY3RVUkw9c3BsaXRPYmplY3RVUkwsdC5jaGVja0F0dHJpYnV0ZT1jaGVja0F0dHJpYnV0ZSx0LnBhcnNlQXR0cmlidXRlcz1wYXJzZUF0dHJpYnV0ZXMsdC5pc0VtcHR5PWlzRW1wdHl9LC8qIDE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSwvKiAxNyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiByLmNhbGwoZSx0KX19LC8qIDE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpLGk9cig0Nik7ZS5leHBvcnRzPXIoOCk/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmYoZSx0LGkoMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSwvKiAxOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxpPXIoMTgpLG89cigxNyksYT1yKDQ3KSgic3JjIikscz1GdW5jdGlvbi50b1N0cmluZyx1PSgiIitzKS5zcGxpdCgidG9TdHJpbmciKTtyKDMwKS5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKGUpe3JldHVybiBzLmNhbGwoZSl9LChlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIscyl7dmFyIGM9ImZ1bmN0aW9uIj09dHlwZW9mIHI7YyYmKG8ociwibmFtZSIpfHxpKHIsIm5hbWUiLHQpKSxlW3RdIT09ciYmKGMmJihvKHIsYSl8fGkocixhLGVbdF0/IiIrZVt0XTp1LmpvaW4oU3RyaW5nKHQpKSkpLGU9PT1uP2VbdF09cjpzP2VbdF0/ZVt0XT1yOmkoZSx0LHIpOihkZWxldGUgZVt0XSxpKGUsdCxyKSkpfSkoRnVuY3Rpb24ucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdGhpcyYmdGhpc1thXXx8cy5jYWxsKHRoaXMpfSl9LC8qIDIwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLGk9cig1KSxvPXIoMzIpLGE9LyIvZyxzPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPVN0cmluZyhvKGUpKSxzPSI8Iit0O3JldHVybiIiIT09ciYmKHMrPSIgIityKyc9IicrU3RyaW5nKG4pLnJlcGxhY2UoYSwiJnF1b3Q7IikrJyInKSxzKyI+IitpKyI8LyIrdCsiPiJ9O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPXt9O3JbZV09dChzKSxuKG4uUCtuLkYqaShmdW5jdGlvbigpe3ZhciB0PSIiW2VdKCciJyk7cmV0dXJuIHQhPT10LnRvTG93ZXJDYXNlKCl8fHQuc3BsaXQoJyInKS5sZW5ndGg+M30pLCJTdHJpbmciLHIpfX0sLyogMjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKdmFyIHI9ZS5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPXIpfSwvKiAyMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMzQpKCJ3a3MiKSxpPXIoOTQpLG89cigyMSkuU3ltYm9sLGE9ImZ1bmN0aW9uIj09dHlwZW9mIG87KGUuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09YSYmb1tlXXx8KGE/bzppKSgiU3ltYm9sLiIrZSkpfSkuc3RvcmU9bn0sLyogMjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3MKdmFyIG49cig3MCksaT1yKDMyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oaShlKSl9fSwvKiAyNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3MSksaT1yKDQ2KSxvPXIoMjMpLGE9cigzMSkscz1yKDE3KSx1PXIoMTQ1KSxjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7dC5mPXIoOCk/YzpmdW5jdGlvbihlLHQpe2lmKGU9byhlKSx0PWEodCwhMCksdSl0cnl7cmV0dXJuIGMoZSx0KX1jYXRjaChlKXt9aWYocyhlLHQpKXJldHVybiBpKCFuLmYuY2FsbChlLHQpLGVbdF0pfX0sLyogMjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDE3KSxpPXIoMTQpLG89cigxMDIpKCJJRV9QUk9UTyIpLGE9T2JqZWN0LnByb3RvdHlwZTtlLmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlKXtyZXR1cm4gZT1pKGUpLG4oZSxvKT9lW29dOiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yJiZlIGluc3RhbmNlb2YgZS5jb25zdHJ1Y3Rvcj9lLmNvbnN0cnVjdG9yLnByb3RvdHlwZTplIGluc3RhbmNlb2YgT2JqZWN0P2E6bnVsbH19LC8qIDI2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIxKSxpPXIoMTMpLG89cig2NSksYT1yKDU3KSxzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgdSxjLGYsbD1lJnMuRixkPWUmcy5HLHA9ZSZzLlMseT1lJnMuUCxoPWUmcy5CLHY9ZSZzLlcsZz1kP2k6aVt0XXx8KGlbdF09e30pLGI9Zy5wcm90b3R5cGUsbT1kP246cD9uW3RdOihuW3RdfHx7fSkucHJvdG90eXBlO2QmJihyPXQpO2Zvcih1IGluIHIpCi8vIGNvbnRhaW5zIGluIG5hdGl2ZQooYz0hbCYmbSYmdm9pZCAwIT09bVt1XSkmJnUgaW4gZ3x8KAovLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZApmPWM/bVt1XTpyW3VdLAovLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMKZ1t1XT1kJiYiZnVuY3Rpb24iIT10eXBlb2YgbVt1XT9yW3VdOmgmJmM/byhmLG4pOnYmJm1bdV09PWY/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxyLG4pe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHQpO2Nhc2UgMjpyZXR1cm4gbmV3IGUodCxyKX1yZXR1cm4gbmV3IGUodCxyLG4pfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHQucHJvdG90eXBlPWUucHJvdG90eXBlLHR9KGYpOnkmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP28oRnVuY3Rpb24uY2FsbCxmKTpmLAovLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKeSYmKChnLnZpcnR1YWx8fChnLnZpcnR1YWw9e30pKVt1XT1mLAovLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQplJnMuUiYmYiYmIWJbdV0mJmEoYix1LGYpKSl9OwovLyB0eXBlIGJpdG1hcApzLkY9MSwvLyBmb3JjZWQKcy5HPTIsLy8gZ2xvYmFsCnMuUz00LC8vIHN0YXRpYwpzLlA9OCwvLyBwcm90bwpzLkI9MTYsLy8gYmluZApzLlc9MzIsLy8gd3JhcApzLlU9NjQsLy8gc2FmZQpzLlI9MTI4LC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAKZS5leHBvcnRzPXN9LC8qIDI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBuPXIoMTYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixpKXtyZXR1cm4gZS5jYWxsKHQscixuLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sLyogMjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj17fS50b1N0cmluZztlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuY2FsbChlKS5zbGljZSg4LC0xKX19LC8qIDI5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJm4oZnVuY3Rpb24oKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY2FsbAp0P2UuY2FsbChudWxsLGZ1bmN0aW9uKCl7fSwxKTplLmNhbGwobnVsbCl9KX19LC8qIDMwICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPXt2ZXJzaW9uOiIyLjUuMSJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPXIpfSwvKiAzMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKQp2YXIgbj1yKDYpOwovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQovLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZwplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKSlyZXR1cm4gZTt2YXIgcixpO2lmKHQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7aWYoImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS52YWx1ZU9mKSYmIW4oaT1yLmNhbGwoZSkpKXJldHVybiBpO2lmKCF0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4oaT1yLmNhbGwoZSkpKXJldHVybiBpO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9fSwvKiAzMiAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQplLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSwvKiAzMyAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjEuNCBUb0ludGVnZXIKdmFyIHI9TWF0aC5jZWlsLG49TWF0aC5mbG9vcjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9uOnIpKGUpfX0sLyogMzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMKdmFyIG49cigwKSxpPXIoMzApLG89cig1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oaS5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLGE9e307YVtlXT10KHIpLG4obi5TK24uRipvKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLGEpfX0sLyogMzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAwIC0+IEFycmF5I2ZvckVhY2gKLy8gMSAtPiBBcnJheSNtYXAKLy8gMiAtPiBBcnJheSNmaWx0ZXIKLy8gMyAtPiBBcnJheSNzb21lCi8vIDQgLT4gQXJyYXkjZXZlcnkKLy8gNSAtPiBBcnJheSNmaW5kCi8vIDYgLT4gQXJyYXkjZmluZEluZGV4CnZhciBuPXIoMjcpLGk9cig3MCksbz1yKDE0KSxhPXIoMTApLHM9cigxMTkpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPTE9PWUsdT0yPT1lLGM9Mz09ZSxmPTQ9PWUsbD02PT1lLGQ9NT09ZXx8bCxwPXR8fHM7cmV0dXJuIGZ1bmN0aW9uKHQscyx5KXtmb3IodmFyIGgsdixnPW8odCksYj1pKGcpLG09bihzLHksMyksXz1hKGIubGVuZ3RoKSxSPTAsdz1yP3AodCxfKTp1P3AodCwwKTp2b2lkIDA7Xz5SO1IrKylpZigoZHx8UiBpbiBiKSYmKGg9YltSXSx2PW0oaCxSLGcpLGUpKWlmKHIpd1tSXT12O2Vsc2UgaWYodilzd2l0Y2goZSl7Y2FzZSAzOnJldHVybiEwOy8vIHNvbWUKY2FzZSA1OnJldHVybiBoOy8vIGZpbmQKY2FzZSA2OnJldHVybiBSOy8vIGZpbmRJbmRleApjYXNlIDI6dy5wdXNoKGgpfWVsc2UgaWYoZilyZXR1cm4hMTtyZXR1cm4gbD8tMTpjfHxmP2Y6d319fSwvKiAzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2lmKHIoOCkpe3ZhciBuPXIoNDgpLGk9cig0KSxvPXIoNSksYT1yKDApLHM9cig4OCksdT1yKDEyNSksYz1yKDI3KSxmPXIoNTQpLGw9cig0NiksZD1yKDE4KSxwPXIoNTYpLHk9cigzMyksaD1yKDEwKSx2PXIoMTcxKSxnPXIoNTApLGI9cigzMSksbT1yKDE3KSxfPXIoNzIpLFI9cig2KSx3PXIoMTQpLFM9cigxMTYpLE89cig1MSksUD1yKDI1KSxrPXIoNTIpLmYsTT1yKDExOCksTD1yKDQ3KSx4PXIoNyksRT1yKDM1KSxEPXIoNzkpLFU9cig4NiksQT1yKDEyMSksaj1yKDYzKSxJPXIoODMpLEM9cig1MyksVD1yKDEyMCksTj1yKDE2MSksRj1yKDkpLHE9cigyNCksSD1GLmYsQj1xLmYsRz1pLlJhbmdlRXJyb3IsSz1pLlR5cGVFcnJvcixWPWkuVWludDhBcnJheSxXPUFycmF5LnByb3RvdHlwZSxZPXUuQXJyYXlCdWZmZXIsSj11LkRhdGFWaWV3LHo9RSgwKSwkPUUoMiksWD1FKDMpLFo9RSg0KSxRPUUoNSksZWU9RSg2KSx0ZT1EKCEwKSxyZT1EKCExKSxuZT1BLnZhbHVlcyxpZT1BLmtleXMsb2U9QS5lbnRyaWVzLGFlPVcubGFzdEluZGV4T2Ysc2U9Vy5yZWR1Y2UsdWU9Vy5yZWR1Y2VSaWdodCxjZT1XLmpvaW4sZmU9Vy5zb3J0LGxlPVcuc2xpY2UsZGU9Vy50b1N0cmluZyxwZT1XLnRvTG9jYWxlU3RyaW5nLHllPXgoIml0ZXJhdG9yIiksaGU9eCgidG9TdHJpbmdUYWciKSx2ZT1MKCJ0eXBlZF9jb25zdHJ1Y3RvciIpLGdlPUwoImRlZl9jb25zdHJ1Y3RvciIpLGJlPXMuQ09OU1RSLG1lPXMuVFlQRUQsX2U9cy5WSUVXLFJlPUUoMSxmdW5jdGlvbihlLHQpe3JldHVybiBrZShVKGUsZVtnZV0pLHQpfSksd2U9byhmdW5jdGlvbigpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKcmV0dXJuIDE9PT1uZXcgVihuZXcgVWludDE2QXJyYXkoWzFdKS5idWZmZXIpWzBdfSksU2U9ISFWJiYhIVYucHJvdG90eXBlLnNldCYmbyhmdW5jdGlvbigpe25ldyBWKDEpLnNldCh7fSl9KSxPZT1mdW5jdGlvbihlLHQpe3ZhciByPXkoZSk7aWYocjwwfHxyJXQpdGhyb3cgRygiV3Jvbmcgb2Zmc2V0ISIpO3JldHVybiByfSxQZT1mdW5jdGlvbihlKXtpZihSKGUpJiZtZSBpbiBlKXJldHVybiBlO3Rocm93IEsoZSsiIGlzIG5vdCBhIHR5cGVkIGFycmF5ISIpfSxrZT1mdW5jdGlvbihlLHQpe2lmKCEoUihlKSYmdmUgaW4gZSkpdGhyb3cgSygiSXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IhIik7cmV0dXJuIG5ldyBlKHQpfSxNZT1mdW5jdGlvbihlLHQpe3JldHVybiBMZShVKGUsZVtnZV0pLHQpfSxMZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wLG49dC5sZW5ndGgsaT1rZShlLG4pO24+cjspaVtyXT10W3IrK107cmV0dXJuIGl9LHhlPWZ1bmN0aW9uKGUsdCxyKXtIKGUsdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rbcl19fSl9LEVlPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpLG8sYSxzPXcoZSksdT1hcmd1bWVudHMubGVuZ3RoLGY9dT4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbD12b2lkIDAhPT1mLGQ9TShzKTtpZih2b2lkIDAhPWQmJiFTKGQpKXtmb3IoYT1kLmNhbGwocyksbj1bXSx0PTA7IShvPWEubmV4dCgpKS5kb25lO3QrKyluLnB1c2goby52YWx1ZSk7cz1ufWZvcihsJiZ1PjImJihmPWMoZixhcmd1bWVudHNbMl0sMikpLHQ9MCxyPWgocy5sZW5ndGgpLGk9a2UodGhpcyxyKTtyPnQ7dCsrKWlbdF09bD9mKHNbdF0sdCk6c1t0XTtyZXR1cm4gaX0sRGU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWFyZ3VtZW50cy5sZW5ndGgscj1rZSh0aGlzLHQpO3Q+ZTspcltlXT1hcmd1bWVudHNbZSsrXTtyZXR1cm4gcn0sVWU9ISFWJiZvKGZ1bmN0aW9uKCl7cGUuY2FsbChuZXcgVigxKSl9KSxBZT1mdW5jdGlvbigpe3JldHVybiBwZS5hcHBseShVZT9sZS5jYWxsKFBlKHRoaXMpKTpQZSh0aGlzKSxhcmd1bWVudHMpfSxqZT17Y29weVdpdGhpbjpmdW5jdGlvbihlLHQpe3JldHVybiBOLmNhbGwoUGUodGhpcyksZSx0LGFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwKX0sZXZlcnk6ZnVuY3Rpb24oZSl7cmV0dXJuIFooUGUodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGZpbGw6ZnVuY3Rpb24oZSl7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwpyZXR1cm4gVC5hcHBseShQZSh0aGlzKSxhcmd1bWVudHMpfSxmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIE1lKHRoaXMsJChQZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKSl9LGZpbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFEoUGUodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGZpbmRJbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gZWUoUGUodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGZvckVhY2g6ZnVuY3Rpb24oZSl7eihQZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5kZXhPZjpmdW5jdGlvbihlKXtyZXR1cm4gcmUoUGUodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGluY2x1ZGVzOmZ1bmN0aW9uKGUpe3JldHVybiB0ZShQZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sam9pbjpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBjZS5hcHBseShQZSh0aGlzKSxhcmd1bWVudHMpfSxsYXN0SW5kZXhPZjpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBhZS5hcHBseShQZSh0aGlzKSxhcmd1bWVudHMpfSxtYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIFJlKFBlKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxyZWR1Y2U6ZnVuY3Rpb24oZSl7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwpyZXR1cm4gc2UuYXBwbHkoUGUodGhpcyksYXJndW1lbnRzKX0scmVkdWNlUmlnaHQ6ZnVuY3Rpb24oZSl7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwpyZXR1cm4gdWUuYXBwbHkoUGUodGhpcyksYXJndW1lbnRzKX0scmV2ZXJzZTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PXRoaXMscj1QZSh0KS5sZW5ndGgsbj1NYXRoLmZsb29yKHIvMiksaT0wO2k8bjspZT10W2ldLHRbaSsrXT10Wy0tcl0sdFtyXT1lO3JldHVybiB0fSxzb21lOmZ1bmN0aW9uKGUpe3JldHVybiBYKFBlKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxzb3J0OmZ1bmN0aW9uKGUpe3JldHVybiBmZS5jYWxsKFBlKHRoaXMpLGUpfSxzdWJhcnJheTpmdW5jdGlvbihlLHQpe3ZhciByPVBlKHRoaXMpLG49ci5sZW5ndGgsaT1nKGUsbik7cmV0dXJuIG5ldyhVKHIscltnZV0pKShyLmJ1ZmZlcixyLmJ5dGVPZmZzZXQraSpyLkJZVEVTX1BFUl9FTEVNRU5ULGgoKHZvaWQgMD09PXQ/bjpnKHQsbikpLWkpKX19LEllPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE1lKHRoaXMsbGUuY2FsbChQZSh0aGlzKSxlLHQpKX0sQ2U9ZnVuY3Rpb24oZSl7UGUodGhpcyk7dmFyIHQ9T2UoYXJndW1lbnRzWzFdLDEpLHI9dGhpcy5sZW5ndGgsbj13KGUpLGk9aChuLmxlbmd0aCksbz0wO2lmKGkrdD5yKXRocm93IEcoIldyb25nIGxlbmd0aCEiKTtmb3IoO288aTspdGhpc1t0K29dPW5bbysrXX0sVGU9e2VudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gb2UuY2FsbChQZSh0aGlzKSl9LGtleXM6ZnVuY3Rpb24oKXtyZXR1cm4gaWUuY2FsbChQZSh0aGlzKSl9LHZhbHVlczpmdW5jdGlvbigpe3JldHVybiBuZS5jYWxsKFBlKHRoaXMpKX19LE5lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFIoZSkmJmVbbWVdJiYic3ltYm9sIiE9dHlwZW9mIHQmJnQgaW4gZSYmU3RyaW5nKCt0KT09U3RyaW5nKHQpfSxGZT1mdW5jdGlvbihlLHQpe3JldHVybiBOZShlLHQ9Yih0LCEwKSk/bCgyLGVbdF0pOkIoZSx0KX0scWU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiEoTmUoZSx0PWIodCwhMCkpJiZSKHIpJiZtKHIsInZhbHVlIikpfHxtKHIsImdldCIpfHxtKHIsInNldCIpfHxyLmNvbmZpZ3VyYWJsZXx8bShyLCJ3cml0YWJsZSIpJiYhci53cml0YWJsZXx8bShyLCJlbnVtZXJhYmxlIikmJiFyLmVudW1lcmFibGU/SChlLHQscik6KGVbdF09ci52YWx1ZSxlKX07YmV8fChxLmY9RmUsRi5mPXFlKSxhKGEuUythLkYqIWJlLCJPYmplY3QiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6RmUsZGVmaW5lUHJvcGVydHk6cWV9KSxvKGZ1bmN0aW9uKCl7ZGUuY2FsbCh7fSl9KSYmKGRlPXBlPWZ1bmN0aW9uKCl7cmV0dXJuIGNlLmNhbGwodGhpcyl9KTt2YXIgSGU9cCh7fSxqZSk7cChIZSxUZSksZChIZSx5ZSxUZS52YWx1ZXMpLHAoSGUse3NsaWNlOkllLHNldDpDZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe30sdG9TdHJpbmc6ZGUsdG9Mb2NhbGVTdHJpbmc6QWV9KSx4ZShIZSwiYnVmZmVyIiwiYiIpLHhlKEhlLCJieXRlT2Zmc2V0IiwibyIpLHhlKEhlLCJieXRlTGVuZ3RoIiwibCIpLHhlKEhlLCJsZW5ndGgiLCJlIiksSChIZSxoZSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbbWVdfX0pLAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LXN0YXRlbWVudHMKZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLHUpe3U9ISF1O3ZhciBjPWUrKHU/IkNsYW1wZWQiOiIiKSsiQXJyYXkiLGw9ImdldCIrZSxwPSJzZXQiK2UseT1pW2NdLGc9eXx8e30sYj15JiZQKHkpLG09IXl8fCFzLkFCVix3PXt9LFM9eSYmeS5wcm90b3R5cGUsTT1mdW5jdGlvbihlLHIpe3ZhciBuPWUuX2Q7cmV0dXJuIG4udltsXShyKnQrbi5vLHdlKX0sTD1mdW5jdGlvbihlLHIsbil7dmFyIGk9ZS5fZDt1JiYobj0obj1NYXRoLnJvdW5kKG4pKTwwPzA6bj4yNTU/MjU1OjI1NSZuKSxpLnZbcF0ocip0K2kubyxuLHdlKX0seD1mdW5jdGlvbihlLHQpe0goZSx0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHQpfSxzZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIEwodGhpcyx0LGUpfSxlbnVtZXJhYmxlOiEwfSl9O20/KHk9cihmdW5jdGlvbihlLHIsbixpKXtmKGUseSxjLCJfZCIpO3ZhciBvLGEscyx1LGw9MCxwPTA7aWYoUihyKSl7aWYoIShyIGluc3RhbmNlb2YgWXx8IkFycmF5QnVmZmVyIj09KHU9XyhyKSl8fCJTaGFyZWRBcnJheUJ1ZmZlciI9PXUpKXJldHVybiBtZSBpbiByP0xlKHkscik6RWUuY2FsbCh5LHIpO289cixwPU9lKG4sdCk7dmFyIGc9ci5ieXRlTGVuZ3RoO2lmKHZvaWQgMD09PWkpe2lmKGcldCl0aHJvdyBHKCJXcm9uZyBsZW5ndGghIik7aWYoKGE9Zy1wKTwwKXRocm93IEcoIldyb25nIGxlbmd0aCEiKX1lbHNlIGlmKChhPWgoaSkqdCkrcD5nKXRocm93IEcoIldyb25nIGxlbmd0aCEiKTtzPWEvdH1lbHNlIHM9dihyKSxhPXMqdCxvPW5ldyBZKGEpO2ZvcihkKGUsIl9kIix7YjpvLG86cCxsOmEsZTpzLHY6bmV3IEoobyl9KTtsPHM7KXgoZSxsKyspfSksUz15LnByb3RvdHlwZT1PKEhlKSxkKFMsImNvbnN0cnVjdG9yIix5KSk6byhmdW5jdGlvbigpe3koMSl9KSYmbyhmdW5jdGlvbigpe25ldyB5KC0xKX0pJiZJKGZ1bmN0aW9uKGUpe25ldyB5LC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3Cm5ldyB5KG51bGwpLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3Cm5ldyB5KDEuNSksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKbmV3IHkoZSl9LCEwKXx8KHk9cihmdW5jdGlvbihlLHIsbixpKXtmKGUseSxjKTt2YXIgbzsKLy8gYHdzYCBtb2R1bGUgYnVnLCB0ZW1wb3JhcmlseSByZW1vdmUgdmFsaWRhdGlvbiBsZW5ndGggZm9yIFVpbnQ4QXJyYXkKLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnNvY2tldHMvd3MvcHVsbC82NDUKLy8gYHdzYCBtb2R1bGUgYnVnLCB0ZW1wb3JhcmlseSByZW1vdmUgdmFsaWRhdGlvbiBsZW5ndGggZm9yIFVpbnQ4QXJyYXkKLy8gaHR0cHM6Ly9naXRodWIuY29tL3dlYnNvY2tldHMvd3MvcHVsbC82NDUKcmV0dXJuIFIocik/ciBpbnN0YW5jZW9mIFl8fCJBcnJheUJ1ZmZlciI9PShvPV8ocikpfHwiU2hhcmVkQXJyYXlCdWZmZXIiPT1vP3ZvaWQgMCE9PWk/bmV3IGcocixPZShuLHQpLGkpOnZvaWQgMCE9PW4/bmV3IGcocixPZShuLHQpKTpuZXcgZyhyKTptZSBpbiByP0xlKHkscik6RWUuY2FsbCh5LHIpOm5ldyBnKHYocikpfSkseihiIT09RnVuY3Rpb24ucHJvdG90eXBlP2soZykuY29uY2F0KGsoYikpOmsoZyksZnVuY3Rpb24oZSl7ZSBpbiB5fHxkKHksZSxnW2VdKX0pLHkucHJvdG90eXBlPVMsbnx8KFMuY29uc3RydWN0b3I9eSkpO3ZhciBFPVNbeWVdLEQ9ISFFJiYoInZhbHVlcyI9PUUubmFtZXx8dm9pZCAwPT1FLm5hbWUpLFU9VGUudmFsdWVzO2QoeSx2ZSwhMCksZChTLG1lLGMpLGQoUyxfZSwhMCksZChTLGdlLHkpLCh1P25ldyB5KDEpW2hlXT09YzpoZSBpbiBTKXx8SChTLGhlLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY319KSx3W2NdPXksYShhLkcrYS5XK2EuRiooeSE9ZyksdyksYShhLlMsYyx7QllURVNfUEVSX0VMRU1FTlQ6dH0pLGEoYS5TK2EuRipvKGZ1bmN0aW9uKCl7Zy5vZi5jYWxsKHksMSl9KSxjLHtmcm9tOkVlLG9mOkRlfSksIkJZVEVTX1BFUl9FTEVNRU5UImluIFN8fGQoUywiQllURVNfUEVSX0VMRU1FTlQiLHQpLGEoYS5QLGMsamUpLEMoYyksYShhLlArYS5GKlNlLGMse3NldDpDZX0pLGEoYS5QK2EuRiohRCxjLFRlKSxufHxTLnRvU3RyaW5nPT1kZXx8KFMudG9TdHJpbmc9ZGUpLGEoYS5QK2EuRipvKGZ1bmN0aW9uKCl7bmV3IHkoMSkuc2xpY2UoKX0pLGMse3NsaWNlOkllfSksYShhLlArYS5GKihvKGZ1bmN0aW9uKCl7cmV0dXJuWzEsMl0udG9Mb2NhbGVTdHJpbmcoKSE9bmV3IHkoWzEsMl0pLnRvTG9jYWxlU3RyaW5nKCl9KXx8IW8oZnVuY3Rpb24oKXtTLnRvTG9jYWxlU3RyaW5nLmNhbGwoWzEsMl0pfSkpLGMse3RvTG9jYWxlU3RyaW5nOkFlfSksaltjXT1EP0U6VSxufHxEfHxkKFMseWUsVSl9fWVsc2UgZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sLyogMzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTY2KSxpPXIoMCksbz1yKDc4KSgibWV0YWRhdGEiKSxhPW8uc3RvcmV8fChvLnN0b3JlPW5ldyhyKDE2OSkpKSxzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1hLmdldChlKTtpZighaSl7aWYoIXIpcmV0dXJuO2Euc2V0KGUsaT1uZXcgbil9dmFyIG89aS5nZXQodCk7aWYoIW8pe2lmKCFyKXJldHVybjtpLnNldCh0LG89bmV3IG4pfXJldHVybiBvfSx1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1zKHQsciwhMSk7cmV0dXJuIHZvaWQgMCE9PW4mJm4uaGFzKGUpfSxjPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1zKHQsciwhMSk7cmV0dXJuIHZvaWQgMD09PW4/dm9pZCAwOm4uZ2V0KGUpfSxmPWZ1bmN0aW9uKGUsdCxyLG4pe3MocixuLCEwKS5zZXQoZSx0KX0sbD1mdW5jdGlvbihlLHQpe3ZhciByPXMoZSx0LCExKSxuPVtdO3JldHVybiByJiZyLmZvckVhY2goZnVuY3Rpb24oZSx0KXtuLnB1c2godCl9KSxufSxkPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lfHwic3ltYm9sIj09dHlwZW9mIGU/ZTpTdHJpbmcoZSl9LHA9ZnVuY3Rpb24oZSl7aShpLlMsIlJlZmxlY3QiLGUpfTtlLmV4cG9ydHM9e3N0b3JlOmEsbWFwOnMsaGFzOnUsZ2V0OmMsc2V0OmYsa2V5czpsLGtleTpkLGV4cDpwfX0sLyogMzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzkpLGk9cigxODEpLG89cigxMzApLGE9T2JqZWN0LmRlZmluZVByb3BlcnR5O3QuZj1yKDQzKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdD1vKHQsITApLG4ociksaSl0cnl7cmV0dXJuIGEoZSx0LHIpfWNhdGNoKGUpe31pZigiZ2V0ImluIHJ8fCJzZXQiaW4gcil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sLyogMzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGV9fSwvKiA0MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0NykoIm1ldGEiKSxpPXIoNiksbz1yKDE3KSxhPXIoOSkuZixzPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxmPWZ1bmN0aW9uKGUpe2EoZSxuLHt2YWx1ZTp7aToiTyIrICsrcywvLyBvYmplY3QgSUQKdzp7fX19KX0sbD1mdW5jdGlvbihlLHQpewovLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CmlmKCFpKGUpKXJldHVybiJzeW1ib2wiPT10eXBlb2YgZT9lOigic3RyaW5nIj09dHlwZW9mIGU/IlMiOiJQIikrZTtpZighbyhlLG4pKXsKLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKaWYoIXUoZSkpcmV0dXJuIkYiOwovLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQppZighdClyZXR1cm4iRSI7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0uaX0sZD1mdW5jdGlvbihlLHQpe2lmKCFvKGUsbikpewovLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAppZighdShlKSlyZXR1cm4hMDsKLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKaWYoIXQpcmV0dXJuITE7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0ud30scD1mdW5jdGlvbihlKXtyZXR1cm4gYyYmeS5ORUVEJiZ1KGUpJiYhbyhlLG4pJiZmKGUpLGV9LHk9ZS5leHBvcnRzPXtLRVk6bixORUVEOiExLGZhc3RLZXk6bCxnZXRXZWFrOmQsb25GcmVlemU6cH19LC8qIDQxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjIuMS4zLjMxIEFycmF5LnByb3RvdHlwZVtAQHVuc2NvcGFibGVzXQp2YXIgbj1yKDcpKCJ1bnNjb3BhYmxlcyIpLGk9QXJyYXkucHJvdG90eXBlO3ZvaWQgMD09aVtuXSYmcigxOCkoaSxuLHt9KSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aVtuXVtlXT0hMH19LC8qIDQyICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LC8qIDQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eQplLmV4cG9ydHM9IXIoNjYpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sLyogNDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3MKdmFyIG49cigxODQpLGk9cigxMjgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihpKGUpKX19LC8qIDQ1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NjApLF9fZXNNb2R1bGU6ITB9fSwvKiA0NiAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LC8qIDQ3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrcituKS50b1N0cmluZygzNikpfX0sLyogNDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ITF9LC8qIDQ5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pCnZhciBuPXIoMTQ3KSxpPXIoMTAzKTtlLmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsaSl9fSwvKiA1MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzMyksaT1NYXRoLm1heCxvPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4oZSksZTwwP2koZSt0LDApOm8oZSx0KX19LC8qIDUxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCnZhciBuPXIoMyksaT1yKDE0OCksbz1yKDEwMyksYT1yKDEwMikoIklFX1BST1RPIikscz1mdW5jdGlvbigpe30sdT1mdW5jdGlvbigpewovLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Zwp2YXIgZSx0PXIoMTAwKSgiaWZyYW1lIiksbj1vLmxlbmd0aDtmb3IodC5zdHlsZS5kaXNwbGF5PSJub25lIixyKDEwNCkuYXBwZW5kQ2hpbGQodCksdC5zcmM9ImphdmFzY3JpcHQ6IiwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmwKLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOwplPXQuY29udGVudFdpbmRvdy5kb2N1bWVudCxlLm9wZW4oKSxlLndyaXRlKCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFwvc2NyaXB0PiIpLGUuY2xvc2UoKSx1PWUuRjtuLS07KWRlbGV0ZSB1LnByb3RvdHlwZVtvW25dXTtyZXR1cm4gdSgpfTtlLmV4cG9ydHM9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oZSx0KXt2YXIgcjsKLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwKcmV0dXJuIG51bGwhPT1lPyhzLnByb3RvdHlwZT1uKGUpLHI9bmV3IHMscy5wcm90b3R5cGU9bnVsbCxyW2FdPWUpOnI9dSgpLHZvaWQgMD09PXQ/cjppKHIsdCl9fSwvKiA1MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKdmFyIG49cigxNDcpLGk9cigxMDMpLmNvbmNhdCgibGVuZ3RoIiwicHJvdG90eXBlIik7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLGkpfX0sLyogNTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQpLGk9cig5KSxvPXIoOCksYT1yKDcpKCJzcGVjaWVzIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07byYmdCYmIXRbYV0mJmkuZih0LGEse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LC8qIDU0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKCEoZSBpbnN0YW5jZW9mIHQpfHx2b2lkIDAhPT1uJiZuIGluIGUpdGhyb3cgVHlwZUVycm9yKHIrIjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIGV9fSwvKiA1NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyNyksaT1yKDE1OSksbz1yKDExNiksYT1yKDMpLHM9cigxMCksdT1yKDExOCksYz17fSxmPXt9LHQ9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGwsZCl7dmFyIHAseSxoLHYsZz1kP2Z1bmN0aW9uKCl7cmV0dXJuIGV9OnUoZSksYj1uKHIsbCx0PzI6MSksbT0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBnKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpOwovLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3IKaWYobyhnKSl7Zm9yKHA9cyhlLmxlbmd0aCk7cD5tO20rKylpZigodj10P2IoYSh5PWVbbV0pWzBdLHlbMV0pOmIoZVttXSkpPT09Y3x8dj09PWYpcmV0dXJuIHZ9ZWxzZSBmb3IoaD1nLmNhbGwoZSk7ISh5PWgubmV4dCgpKS5kb25lOylpZigodj1pKGgsYix5LnZhbHVlLHQpKT09PWN8fHY9PT1mKXJldHVybiB2fTt0LkJSRUFLPWMsdC5SRVRVUk49Zn0sLyogNTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTkpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpIGluIHQpbihlLGksdFtpXSxyKTtyZXR1cm4gZX19LC8qIDU3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxpPXIoNzMpO2UuZXhwb3J0cz1yKDQzKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LC8qIDU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9e30uaGFzT3duUHJvcGVydHk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY2FsbChlLHQpfX0sLyogNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQzNiksX19lc01vZHVsZTohMH19LC8qIDYwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0MzkpLF9fZXNNb2R1bGU6ITB9fSwvKiA2MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig5KS5mLGk9cigxNyksbz1yKDcpKCJ0b1N0cmluZ1RhZyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIWkoZT1yP2U6ZS5wcm90b3R5cGUsbykmJm4oZSxvLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0sLyogNjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDMyKSxvPXIoNSksYT1yKDEwNikscz0iWyIrYSsiXSIsdT0i4oCLwoUiLGM9UmVnRXhwKCJeIitzK3MrIioiKSxmPVJlZ0V4cChzK3MrIiokIiksbD1mdW5jdGlvbihlLHQscil7dmFyIGk9e30scz1vKGZ1bmN0aW9uKCl7cmV0dXJuISFhW2VdKCl8fHVbZV0oKSE9dX0pLGM9aVtlXT1zP3QoZCk6YVtlXTtyJiYoaVtyXT1jKSxuKG4uUCtuLkYqcywiU3RyaW5nIixpKX0sZD1sLnRyaW09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1TdHJpbmcoaShlKSksMSZ0JiYoZT1lLnJlcGxhY2UoYywiIikpLDImdCYmKGU9ZS5yZXBsYWNlKGYsIiIpKSxlfTtlLmV4cG9ydHM9bH0sLyogNjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9e319LC8qIDY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpfHxlLl90IT09dCl0aHJvdyBUeXBlRXJyb3IoIkluY29tcGF0aWJsZSByZWNlaXZlciwgIit0KyIgcmVxdWlyZWQhIik7cmV0dXJuIGV9fSwvKiA2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZwp2YXIgbj1yKDkzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4saSl7cmV0dXJuIGUuY2FsbCh0LHIsbixpKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LC8qIDY2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaChlKXtyZXR1cm4hMH19fSwvKiA2NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xNCAvIDE1LjIuMy4xNCBPYmplY3Qua2V5cyhPKQp2YXIgbj1yKDE4MyksaT1yKDEzNSk7ZS5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLGkpfX0sLyogNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt0Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig5OCksaT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIXR8fCJvYmplY3QiIT09KHZvaWQgMD09PXQ/InVuZGVmaW5lZCI6KDAsaS5kZWZhdWx0KSh0KSkmJiJmdW5jdGlvbiIhPXR5cGVvZiB0P2U6dH19LC8qIDY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoNDUyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDE5OSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cig5OCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpO3QuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIrKHZvaWQgMD09PXQ/InVuZGVmaW5lZCI6KDAsdS5kZWZhdWx0KSh0KSkpO2UucHJvdG90eXBlPSgwLGEuZGVmYXVsdCkodCYmdC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLHQmJihpLmRlZmF1bHQ/KDAsaS5kZWZhdWx0KShlLHQpOmUuX19wcm90b19fPXQpfX0sLyogNzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIGFuZCBub24tZW51bWVyYWJsZSBvbGQgVjggc3RyaW5ncwp2YXIgbj1yKDI4KTsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwplLmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LC8qIDcxICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dC5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSwvKiA3MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBuPXIoMjgpLGk9cig3KSgidG9TdHJpbmdUYWciKSxvPSJBcmd1bWVudHMiPT1uKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksYT1mdW5jdGlvbihlLHQpe3RyeXtyZXR1cm4gZVt0XX1jYXRjaChlKXt9fTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQscixzO3JldHVybiB2b2lkIDA9PT1lPyJVbmRlZmluZWQiOm51bGw9PT1lPyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKHI9YSh0PU9iamVjdChlKSxpKSk/cjpvP24odCk6Ik9iamVjdCI9PShzPW4odCkpJiYiZnVuY3Rpb24iPT10eXBlb2YgdC5jYWxsZWU/IkFyZ3VtZW50cyI6c319LC8qIDczICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0sLyogNzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9e319LC8qIDc1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9e30udG9TdHJpbmc7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiByLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSwvKiA3NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudCkKdmFyIG49cigxMjgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0KG4oZSkpfX0sLyogNzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LC8qIDc4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLGk9blsiX19jb3JlLWpzX3NoYXJlZF9fIl18fChuWyJfX2NvcmUtanNfc2hhcmVkX18iXT17fSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSwvKiA3OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2YKLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXMKdmFyIG49cigyMyksaT1yKDEwKSxvPXIoNTApO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLGEpe3ZhciBzLHU9bih0KSxjPWkodS5sZW5ndGgpLGY9byhhLGMpOwovLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYoZSYmciE9cil7Zm9yKDtjPmY7KQovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCmlmKChzPXVbZisrXSkhPXMpcmV0dXJuITB9ZWxzZSBmb3IoO2M+ZjtmKyspaWYoKGV8fGYgaW4gdSkmJnVbZl09PT1yKXJldHVybiBlfHxmfHwwO3JldHVybiFlJiYtMX19fSwvKiA4MCAqLwovKioqLwpmdW5jdGlvbihlLHQpe3QuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSwvKiA4MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpCnZhciBuPXIoMjgpO2UuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0sLyogODIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjIuOCBJc1JlZ0V4cChhcmd1bWVudCkKdmFyIG49cig2KSxpPXIoMjgpLG89cig3KSgibWF0Y2giKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG4oZSkmJih2b2lkIDAhPT0odD1lW29dKT8hIXQ6IlJlZ0V4cCI9PWkoZSkpfX0sLyogODMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNykoIml0ZXJhdG9yIiksaT0hMTt0cnl7dmFyIG89WzddW25dKCk7by5yZXR1cm49ZnVuY3Rpb24oKXtpPSEwfSwKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXRocm93LWxpdGVyYWwKQXJyYXkuZnJvbShvLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKGUpe31lLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighdCYmIWkpcmV0dXJuITE7dmFyIHI9ITE7dHJ5e3ZhciBvPVs3XSxhPW9bbl0oKTthLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpyPSEwfX0sb1tuXT1mdW5jdGlvbigpe3JldHVybiBhfSxlKG8pfWNhdGNoKGUpe31yZXR1cm4gcn19LC8qIDg0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIxLjIuNS4zIGdldCBSZWdFeHAucHJvdG90eXBlLmZsYWdzCnZhciBuPXIoMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGU9bih0aGlzKSx0PSIiO3JldHVybiBlLmdsb2JhbCYmKHQrPSJnIiksZS5pZ25vcmVDYXNlJiYodCs9ImkiKSxlLm11bHRpbGluZSYmKHQrPSJtIiksZS51bmljb2RlJiYodCs9InUiKSxlLnN0aWNreSYmKHQrPSJ5IiksdH19LC8qIDg1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxOCksaT1yKDE5KSxvPXIoNSksYT1yKDMyKSxzPXIoNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgdT1zKGUpLGM9cihhLHUsIiJbZV0pLGY9Y1swXSxsPWNbMV07byhmdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0W3VdPWZ1bmN0aW9uKCl7cmV0dXJuIDd9LDchPSIiW2VdKHQpfSkmJihpKFN0cmluZy5wcm90b3R5cGUsZSxmKSxuKFJlZ0V4cC5wcm90b3R5cGUsdSwyPT10P2Z1bmN0aW9uKGUsdCl7cmV0dXJuIGwuY2FsbChlLHRoaXMsdCl9OmZ1bmN0aW9uKGUpe3JldHVybiBsLmNhbGwoZSx0aGlzKX0pKX19LC8qIDg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCnZhciBuPXIoMyksaT1yKDE2KSxvPXIoNykoInNwZWNpZXMiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixhPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PWF8fHZvaWQgMD09KHI9bihhKVtvXSk/dDppKHIpfX0sLyogODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQpLGk9cigwKSxvPXIoMTkpLGE9cig1Nikscz1yKDQwKSx1PXIoNTUpLGM9cig1NCksZj1yKDYpLGw9cig1KSxkPXIoODMpLHA9cig2MSkseT1yKDEwNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGgsdixnKXt2YXIgYj1uW2VdLG09YixfPXY/InNldCI6ImFkZCIsUj1tJiZtLnByb3RvdHlwZSx3PXt9LFM9ZnVuY3Rpb24oZSl7dmFyIHQ9UltlXTtvKFIsZSwiZGVsZXRlIj09ZT9mdW5jdGlvbihlKXtyZXR1cm4hKGcmJiFmKGUpKSYmdC5jYWxsKHRoaXMsMD09PWU/MDplKX06ImhhcyI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIShnJiYhZihlKSkmJnQuY2FsbCh0aGlzLDA9PT1lPzA6ZSl9OiJnZXQiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiBnJiYhZihlKT92b2lkIDA6dC5jYWxsKHRoaXMsMD09PWU/MDplKX06ImFkZCI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2FsbCh0aGlzLDA9PT1lPzA6ZSksdGhpc306ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5jYWxsKHRoaXMsMD09PWU/MDplLHIpLHRoaXN9KX07aWYoImZ1bmN0aW9uIj09dHlwZW9mIG0mJihnfHxSLmZvckVhY2gmJiFsKGZ1bmN0aW9uKCl7KG5ldyBtKS5lbnRyaWVzKCkubmV4dCgpfSkpKXt2YXIgTz1uZXcgbSxQPU9bX10oZz97fTotMCwxKSE9TyxrPWwoZnVuY3Rpb24oKXtPLmhhcygxKX0pLE09ZChmdW5jdGlvbihlKXtuZXcgbShlKX0pLEw9IWcmJmwoZnVuY3Rpb24oKXtmb3IoCi8vIFY4IH4gQ2hyb21pdW0gNDItIGZhaWxzIG9ubHkgd2l0aCA1KyBlbGVtZW50cwp2YXIgZT1uZXcgbSx0PTU7dC0tOyllW19dKHQsdCk7cmV0dXJuIWUuaGFzKC0wKX0pO018fChtPXQoZnVuY3Rpb24odCxyKXtjKHQsbSxlKTt2YXIgbj15KG5ldyBiLHQsbSk7cmV0dXJuIHZvaWQgMCE9ciYmdShyLHYsbltfXSxuKSxufSksbS5wcm90b3R5cGU9UixSLmNvbnN0cnVjdG9yPW0pLChrfHxMKSYmKFMoImRlbGV0ZSIpLFMoImhhcyIpLHYmJlMoImdldCIpKSwoTHx8UCkmJlMoXyksCi8vIHdlYWsgY29sbGVjdGlvbnMgc2hvdWxkIG5vdCBjb250YWlucyAuY2xlYXIgbWV0aG9kCmcmJlIuY2xlYXImJmRlbGV0ZSBSLmNsZWFyfWVsc2UKLy8gY3JlYXRlIGNvbGxlY3Rpb24gY29uc3RydWN0b3IKbT1oLmdldENvbnN0cnVjdG9yKHQsZSx2LF8pLGEobS5wcm90b3R5cGUscikscy5ORUVEPSEwO3JldHVybiBwKG0sZSksd1tlXT1tLGkoaS5HK2kuVytpLkYqKG0hPWIpLHcpLGd8fGguc2V0U3Ryb25nKG0sZSx2KSxtfX0sLyogODggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbixpPXIoNCksbz1yKDE4KSxhPXIoNDcpLHM9YSgidHlwZWRfYXJyYXkiKSx1PWEoInZpZXciKSxjPSEoIWkuQXJyYXlCdWZmZXJ8fCFpLkRhdGFWaWV3KSxmPWMsbD0wLGQ9IkludDhBcnJheSxVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5LEludDE2QXJyYXksVWludDE2QXJyYXksSW50MzJBcnJheSxVaW50MzJBcnJheSxGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5Ii5zcGxpdCgiLCIpO2w8OTspKG49aVtkW2wrK11dKT8obyhuLnByb3RvdHlwZSxzLCEwKSxvKG4ucHJvdG90eXBlLHUsITApKTpmPSExO2UuZXhwb3J0cz17QUJWOmMsQ09OU1RSOmYsVFlQRUQ6cyxWSUVXOnV9fSwvKiA4OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBGb3JjZWQgcmVwbGFjZW1lbnQgcHJvdG90eXBlIGFjY2Vzc29ycyBtZXRob2RzCmUuZXhwb3J0cz1yKDQ4KXx8IXIoNSkoZnVuY3Rpb24oKXt2YXIgZT1NYXRoLnJhbmRvbSgpOwovLyBJbiBGRiB0aHJvd3Mgb25seSBkZWZpbmUgbWV0aG9kcwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYsIG5vLXVzZWxlc3MtY2FsbApfX2RlZmluZVNldHRlcl9fLmNhbGwobnVsbCxlLGZ1bmN0aW9uKCl7fSksZGVsZXRlIHIoNClbZV19KX0sLyogOTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLwp2YXIgbj1yKDApO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtuKG4uUyxlLHtvZjpmdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9QXJyYXkoZSk7ZS0tOyl0W2VdPWFyZ3VtZW50c1tlXTtyZXR1cm4gbmV3IHRoaXModCl9fSl9fSwvKiA5MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vCnZhciBuPXIoMCksaT1yKDE2KSxvPXIoMjcpLGE9cig1NSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe24obi5TLGUse2Zyb206ZnVuY3Rpb24oZSl7dmFyIHQscixuLHMsdT1hcmd1bWVudHNbMV07cmV0dXJuIGkodGhpcyksdD12b2lkIDAhPT11LHQmJmkodSksdm9pZCAwPT1lP25ldyB0aGlzOihyPVtdLHQ/KG49MCxzPW8odSxhcmd1bWVudHNbMl0sMiksYShlLCExLGZ1bmN0aW9uKGUpe3IucHVzaChzKGUsbisrKSl9KSk6YShlLCExLHIucHVzaCxyKSxuZXcgdGhpcyhyKSl9fSl9fSwvKiA5MiAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz0hMH0sLyogOTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LC8qIDk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrcituKS50b1N0cmluZygzNikpfX0sLyogOTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzgpLmYsaT1yKDU4KSxvPXIoMjIpKCJ0b1N0cmluZ1RhZyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZSYmIWkoZT1yP2U6ZS5wcm90b3R5cGUsbykmJm4oZSxvLHtjb25maWd1cmFibGU6ITAsdmFsdWU6dH0pfX0sLyogOTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQyOSksX19lc01vZHVsZTohMH19LC8qIDk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzCnZhciBuPXIoMjYpLGk9cigxMyksbz1yKDY2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oaS5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLGE9e307YVtlXT10KHIpLG4obi5TK24uRipvKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLGEpfX0sLyogOTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig0NDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoNDQzKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz0iZnVuY3Rpb24iPT10eXBlb2YgYS5kZWZhdWx0JiYic3ltYm9sIj09dHlwZW9mIGkuZGVmYXVsdD9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5kZWZhdWx0JiZlLmNvbnN0cnVjdG9yPT09YS5kZWZhdWx0JiZlIT09YS5kZWZhdWx0LnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgZX07dC5kZWZhdWx0PSJmdW5jdGlvbiI9PXR5cGVvZiBhLmRlZmF1bHQmJiJzeW1ib2wiPT09cyhpLmRlZmF1bHQpP2Z1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOnMoZSl9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiYiZnVuY3Rpb24iPT10eXBlb2YgYS5kZWZhdWx0JiZlLmNvbnN0cnVjdG9yPT09YS5kZWZhdWx0JiZlIT09YS5kZWZhdWx0LnByb3RvdHlwZT8ic3ltYm9sIjp2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOnMoZSl9fSwvKiA5OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxMSksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9cigxNSksZD1mLmdldExvZ2dlcigiYWRkcmVzcy1hbGxvY2F0aW9uIikscD12b2lkIDAseT1mdW5jdGlvbigpey8qIHByaXZhdGUKICBfdXJsOiBVUkwKICBfYnVzOiBNaW5pQnVzCiAgKi8KLyoqCiAgICogQ3JlYXRlIGFuIEFkZHJlc3MgQWxsb2NhdGlvbgogICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICAgdXJsIC0gdXJsIGZyb20gd2hvIGlzIHNlbmRpbmcgdGhlIG1lc3NhZ2UKICAgKiBAcGFyYW0gIHtNaW5pQnVzfSAgICAgIGJ1cyAtIE1pbmlCdXMgdXNlZCBmb3IgYWRkcmVzcyBhbGxvY2F0aW9uCiAgICovCmZ1bmN0aW9uIEFkZHJlc3NBbGxvY2F0aW9uKGUsdCxyKXtpZigoMCxhLmRlZmF1bHQpKHRoaXMsQWRkcmVzc0FsbG9jYXRpb24pLHApcmV0dXJuIHA7dGhpcy5fdXJsPWUrIi9hZGRyZXNzLWFsbG9jYXRpb24iLHRoaXMuX2J1cz10LHRoaXMuX3JlZ2lzdHJ5PXIscD10aGlzfXJldHVybigwLHUuZGVmYXVsdCkoQWRkcmVzc0FsbG9jYXRpb24sW3trZXk6ImNyZWF0ZSIsLyoqCiAgICAgKgogICAgICogQXNrIGZvciBjcmVhdGlvbiBvZiBhIG51bWJlciBvZiBIeXBlcnR5IGFkZHJlc3NlcywgdG8gdGhlIGRvbWFpbiBtZXNzYWdlIG5vZGUuCiAgICAgKgogICAgICogQHBhcmFtIHtEb21haW59IGRvbWFpbiAtIGRvbWFpbiBvZiB0aGUgbWVzc2FnZSBub2RlCiAgICAgKiBAcGFyYW0ge051bWJlcn0gbnVtYmVyIC0gbnVtYmVyIG9mIGFkZHJlc3MgdG8gYmUgYWxsb2NhdGVkCiAgICAgKiBAcGFyYW0ge0Rlc2NyaXB0b3J9IGluZm8gLSBkZXNjcmlwdG9yIHRvIHNlYXJjaCBmb3IgdGhlIGh5cGVydHkgKFRPRE86Ly8gdGhpcyBzaG91bGQgYmUgY29uZmlybWVkKQogICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL2RhdGFtb2RlbC9jb3JlL2h5cGVydHktY2F0YWxvZ3VlL3JlYWRtZS5tZCNjYXRhbG9ndWUtZGF0YS1tb2RlbAogICAgICogQHBhcmFtIHtzY2hlbWV9IHNjaGVtZSAtIHNjaGVtZSBvZiBhZGRyZXNzIHRvIGJlIGNyZWF0ZWQgb3IgcmV1c2VkLCBsaWtlOiBoeXBlcnR5LCBjb21tLCBjb250ZXh0LCBldGM7CiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58VVJMLkh5cGVydHlVUkx9IHJldXNlVVJMIC0gcmV1c2VVUkwgaXMgdXNlZCB0byByZXVzZSB0aGUgaHlwZXJ0eVVSTCBwcmV2aW91c2x5IHJlZ2lzdHJlZDsKICAgICAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdCwgRXJyb3I+fSB0aGlzIGlzIFByb21pc2UgYW5kIHJldHVybnMgYW4gb2JqZWN0IHdpdGggdGhlIGFkZHJlc3MgaW5mb3JtYXRpb24KICAgICAqCiAgICAgKiBAbWVtYmVyT2YgQWRkcmVzc0FsbG9jYXRpb24KICAgICAqLwp2YWx1ZTpmdW5jdGlvbihlLHQscixuLGkpewovLyAvLyBjb25zb2xlLmxvZygndHlwZW9mKHJldXNlVVJMKScsIHR5cGVvZihyZXVzZVVSTCksIHJldXNlVVJMKTsKLy8gLy8gY29uc29sZS5sb2coJ3R5cGVvZihyZXVzZVVSTCknLCB0eXBlb2YocmV1c2VVUkwpLCByZXVzZVVSTCk7CnJldHVybiBpPyJib29sZWFuIj09dHlwZW9mIGk/aT90aGlzLl9yZXVzZUFsbG9jYXRlZEFkZHJlc3MoZSx0LHIsbixpKTp0aGlzLl9hbGxvY2F0ZU5ld0FkZHJlc3MoZSxuLHQpOiJzdHJpbmciPT10eXBlb2YgaSYmKDAsbC5pc1VSTCkoaSk/dGhpcy5fcmV1c2VBbGxvY2F0ZWRBZGRyZXNzKGUsdCxyLG4saSk6dm9pZCAwOihkLmluZm8oIltBZGRyZXNzQWxsb2NhdGlvbl0gLSBuZXcgYWRkcmVzcyB3aWxsIGJlIGFsbG9jYXRlZCIpLHRoaXMuX2FsbG9jYXRlTmV3QWRkcmVzcyhlLG4sdCkpfX0se2tleToiX3JldXNlQWxsb2NhdGVkQWRkcmVzcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgYT10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGkscyl7YS5fcmVnaXN0cnkuY2hlY2tSZWdpc3RlcmVkVVJMcyhyLG8pLnRoZW4oZnVuY3Rpb24ocil7aWYocil7ZC5pbmZvKCJbQWRkcmVzc0FsbG9jYXRpb24gLSAiK24rIl0gLSBSZXVzZSBVUkwiKTtpKHtuZXdBZGRyZXNzOiExLGFkZHJlc3M6cn0pfWVsc2Uic3RyaW5nIj09dHlwZW9mIG8/KGQuaW5mbygiW0FkZHJlc3NBbGxvY2F0aW9uIC0gcmV1c2VVUkxdIC0gT2JqZWN0ICIrbysiIG5vdCBmb3VuZCIpLHMoIlVSTCBOb3QgRm91bmQiKSk6ImJvb2xlYW4iPT10eXBlb2Ygbz9hLl9hbGxvY2F0ZU5ld0FkZHJlc3MoZSxuLHQpLnRoZW4oaSkuY2F0Y2gocyk6cygiVVJMIE5vdCBGb3VuZCIpfSl9KX19LHtrZXk6Il9hbGxvY2F0ZU5ld0FkZHJlc3MiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7dmFyIGE9e3R5cGU6ImNyZWF0ZSIsZnJvbTpuLl91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrZSsiL2FkZHJlc3MtYWxsb2NhdGlvbiIsYm9keTp7dmFsdWU6e251bWJlcjpyfX19OyJoeXBlcnR5IiE9PXQmJihhLmJvZHkuc2NoZW1lPXQpLGQuaW5mbygiW0FkZHJlc3NBbGxvY2F0aW9uIC0gIit0KyJdIC0gUmVxdWVzdCBuZXcgVVJMIiksbi5fYnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24oZSl7aWYoMjAwPT09ZS5ib2R5LmNvZGUpe3ZhciB0PXtuZXdBZGRyZXNzOiEwLGFkZHJlc3M6ZS5ib2R5LnZhbHVlLmFsbG9jYXRlZH07aSh0KX1lbHNlIG8oZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89e3R5cGU6ImRlbGV0ZSIsZnJvbTpyLl91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrZSsiL2FkZHJlc3MtYWxsb2NhdGlvbiIsYm9keTp7Y2hpbGRyZW5SZXNvdXJjZXM6dH19O3IuX2J1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKGUpezIwMD09PWUuYm9keS5jb2RlP24oZS5ib2R5LmNvZGUpOmkoZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InVybCIsLyoqCiAgICAgKiBnZXQgdGhlIFVSTCB2YWx1ZQogICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgdXJsIHZhbHVlOwogICAgICovCmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fV0sW3trZXk6Imluc3RhbmNlIixnZXQ6ZnVuY3Rpb24oKXtpZighcCl0aHJvdyBuZXcgRXJyb3IoIlRoZSBhZGRyZXNzIGFsbG9jYXRpb24gd2FzIG5vdCBpbnN0YW50aWF0ZWQiKTtyZXR1cm4gcH19XSksQWRkcmVzc0FsbG9jYXRpb259KCk7dC5kZWZhdWx0PXksZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpLGk9cig0KS5kb2N1bWVudCxvPW4oaSkmJm4oaS5jcmVhdGVFbGVtZW50KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG8/aS5jcmVhdGVFbGVtZW50KGUpOnt9fX0sLyogMTAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLGk9cigzMCksbz1yKDQ4KSxhPXIoMTQ2KSxzPXIoOSkuZjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5TeW1ib2x8fChpLlN5bWJvbD1vP3t9Om4uU3ltYm9sfHx7fSk7Il8iPT1lLmNoYXJBdCgwKXx8ZSBpbiB0fHxzKHQsZSx7dmFsdWU6YS5mKGUpfSl9fSwvKiAxMDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNzgpKCJrZXlzIiksaT1yKDQ3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkoZSkpfX0sLyogMTAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXMKZS5leHBvcnRzPSJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YiLnNwbGl0KCIsIil9LC8qIDEwNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KS5kb2N1bWVudDtlLmV4cG9ydHM9biYmbi5kb2N1bWVudEVsZW1lbnR9LC8qIDEwNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLgovKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwp2YXIgbj1yKDYpLGk9cigzKSxvPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07ZS5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9Py8vIGVzbGludC1kaXNhYmxlLWxpbmUKZnVuY3Rpb24oZSx0LG4pe3RyeXtuPXIoMjcpKEZ1bmN0aW9uLmNhbGwscigyNCkuZihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbihlLFtdKSx0PSEoZSBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChlKXt0PSEwfXJldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBvKGUsciksdD9lLl9fcHJvdG9fXz1yOm4oZSxyKSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6b319LC8qIDEwNiAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz0iXHRcblx2XGZcciDCoOGagOGgjuKAgOKAgeKAguKAg+KAhOKAheKAhuKAh+KAiOKAieKAiuKAr+KBn+OAgFx1MjAyOFx1MjAyOVx1ZmVmZiJ9LC8qIDEwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KSxpPXIoMTA1KS5zZXQ7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbyxhPXQuY29uc3RydWN0b3I7cmV0dXJuIGEhPT1yJiYiZnVuY3Rpb24iPT10eXBlb2YgYSYmKG89YS5wcm90b3R5cGUpIT09ci5wcm90b3R5cGUmJm4obykmJmkmJmkoZSxvKSxlfX0sLyogMTA4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigzMyksaT1yKDMyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9U3RyaW5nKGkodGhpcykpLHI9IiIsbz1uKGUpO2lmKG88MHx8bz09MS8wKXRocm93IFJhbmdlRXJyb3IoIkNvdW50IGNhbid0IGJlIG5lZ2F0aXZlIik7Zm9yKDtvPjA7KG8+Pj49MSkmJih0Kz10KSkxJm8mJihyKz10KTtyZXR1cm4gcn19LC8qIDEwOSAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyAyMC4yLjIuMjggTWF0aC5zaWduKHgpCmUuZXhwb3J0cz1NYXRoLnNpZ258fGZ1bmN0aW9uKGUpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCnJldHVybiAwPT0oZT0rZSl8fGUhPWU/ZTplPDA/LTE6MX19LC8qIDExMCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyAyMC4yLjIuMTQgTWF0aC5leHBtMSh4KQp2YXIgcj1NYXRoLmV4cG0xO2UuZXhwb3J0cz0hcnx8cigxMCk+MjIwMjUuNDY1Nzk0ODA2NzE4fHxyKDEwKTwyMjAyNS40NjU3OTQ4MDY3MTh8fC0yZS0xNyE9cigtMmUtMTcpP2Z1bmN0aW9uKGUpe3JldHVybiAwPT0oZT0rZSk/ZTplPi0xZS02JiZlPDFlLTY/ZStlKmUvMjpNYXRoLmV4cChlKS0xfTpyfSwvKiAxMTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzMpLGk9cigzMik7Ci8vIHRydWUgIC0+IFN0cmluZyNhdAovLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXQKZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBvLGEscz1TdHJpbmcoaSh0KSksdT1uKHIpLGM9cy5sZW5ndGg7cmV0dXJuIHU8MHx8dT49Yz9lPyIiOnZvaWQgMDoobz1zLmNoYXJDb2RlQXQodSksbzw1NTI5Nnx8bz41NjMxOXx8dSsxPT09Y3x8KGE9cy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxhPjU3MzQzP2U/cy5jaGFyQXQodSk6bzplP3Muc2xpY2UodSx1KzIpOmEtNTYzMjArKG8tNTUyOTY8PDEwKSs2NTUzNil9fX0sLyogMTEyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0OCksaT1yKDApLG89cigxOSksYT1yKDE4KSxzPXIoMTcpLHU9cig2MyksYz1yKDExMyksZj1yKDYxKSxsPXIoMjUpLGQ9cig3KSgiaXRlcmF0b3IiKSxwPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLHk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGgsdixnLGIpe2Mocix0LGgpO3ZhciBtLF8sUix3PWZ1bmN0aW9uKGUpe2lmKCFwJiZlIGluIGspcmV0dXJuIGtbZV07c3dpdGNoKGUpe2Nhc2Uia2V5cyI6Y2FzZSJ2YWx1ZXMiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19LFM9dCsiIEl0ZXJhdG9yIixPPSJ2YWx1ZXMiPT12LFA9ITEsaz1lLnByb3RvdHlwZSxNPWtbZF18fGtbIkBAaXRlcmF0b3IiXXx8diYma1t2XSxMPU18fHcodikseD12P08/dygiZW50cmllcyIpOkw6dm9pZCAwLEU9IkFycmF5Ij09dD9rLmVudHJpZXN8fE06TTtpZigKLy8gRml4IG5hdGl2ZQpFJiYoUj1sKEUuY2FsbChuZXcgZSkpKSE9PU9iamVjdC5wcm90b3R5cGUmJlIubmV4dCYmKAovLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzCmYoUixTLCEwKSwKLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzCm58fHMoUixkKXx8YShSLGQseSkpLAovLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGCk8mJk0mJiJ2YWx1ZXMiIT09TS5uYW1lJiYoUD0hMCxMPWZ1bmN0aW9uKCl7cmV0dXJuIE0uY2FsbCh0aGlzKX0pLAovLyBEZWZpbmUgaXRlcmF0b3IKbiYmIWJ8fCFwJiYhUCYma1tkXXx8YShrLGQsTCksCi8vIFBsdWcgZm9yIGxpYnJhcnkKdVt0XT1MLHVbU109eSx2KWlmKG09e3ZhbHVlczpPP0w6dygidmFsdWVzIiksa2V5czpnP0w6dygia2V5cyIpLGVudHJpZXM6eH0sYilmb3IoXyBpbiBtKV8gaW4ga3x8byhrLF8sbVtfXSk7ZWxzZSBpKGkuUCtpLkYqKHB8fFApLHQsbSk7cmV0dXJuIG19fSwvKiAxMTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDUxKSxpPXIoNDYpLG89cig2MSksYT17fTsKLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKCkKcigxOCkoYSxyKDcpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4oYSx7bmV4dDppKDEscil9KSxvKGUsdCsiIEl0ZXJhdG9yIil9fSwvKiAxMTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBoZWxwZXIgZm9yIFN0cmluZyN7c3RhcnRzV2l0aCwgZW5kc1dpdGgsIGluY2x1ZGVzfQp2YXIgbj1yKDgyKSxpPXIoMzIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobih0KSl0aHJvdyBUeXBlRXJyb3IoIlN0cmluZyMiK3IrIiBkb2Vzbid0IGFjY2VwdCByZWdleCEiKTtyZXR1cm4gU3RyaW5nKGkoZSkpfX0sLyogMTE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpKCJtYXRjaCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD0vLi87dHJ5eyIvLi8iW2VdKHQpfWNhdGNoKHIpe3RyeXtyZXR1cm4gdFtuXT0hMSwhIi8uLyJbZV0odCl9Y2F0Y2goZSl7fX1yZXR1cm4hMH19LC8qIDExNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3IKdmFyIG49cig2MyksaT1yKDcpKCJpdGVyYXRvciIpLG89QXJyYXkucHJvdG90eXBlO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxvW2ldPT09ZSl9fSwvKiAxMTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDkpLGk9cig0Nik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt0IGluIGU/bi5mKGUsdCxpKDAscikpOmVbdF09cn19LC8qIDExOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3MiksaT1yKDcpKCJpdGVyYXRvciIpLG89cig2Myk7ZS5leHBvcnRzPXIoMzApLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9ZSlyZXR1cm4gZVtpXXx8ZVsiQEBpdGVyYXRvciJdfHxvW24oZSldfX0sLyogMTE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gOS40LjIuMyBBcnJheVNwZWNpZXNDcmVhdGUob3JpZ2luYWxBcnJheSwgbGVuZ3RoKQp2YXIgbj1yKDMwMCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyhuKGUpKSh0KX19LC8qIDEyMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMi4xLjMuNiBBcnJheS5wcm90b3R5cGUuZmlsbCh2YWx1ZSwgc3RhcnQgPSAwLCBlbmQgPSB0aGlzLmxlbmd0aCkKdmFyIG49cigxNCksaT1yKDUwKSxvPXIoMTApO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9bih0aGlzKSxyPW8odC5sZW5ndGgpLGE9YXJndW1lbnRzLmxlbmd0aCxzPWkoYT4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsciksdT1hPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxjPXZvaWQgMD09PXU/cjppKHUscik7Yz5zOyl0W3MrK109ZTtyZXR1cm4gdH19LC8qIDEyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNDEpLGk9cigxNjIpLG89cig2MyksYT1yKDIzKTsKLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKQovLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKQovLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpCi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQplLmV4cG9ydHM9cigxMTIpKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PWEoZSksLy8gdGFyZ2V0CnRoaXMuX2k9MCwvLyBuZXh0IGluZGV4CnRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLGkoMSkpOiJrZXlzIj09dD9pKDAscik6InZhbHVlcyI9PXQ/aSgwLGVbcl0pOmkoMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSwKLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQpvLkFyZ3VtZW50cz1vLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LC8qIDEyMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG4saSxvLGE9cigyNykscz1yKDE1MiksdT1yKDEwNCksYz1yKDEwMCksZj1yKDQpLGw9Zi5wcm9jZXNzLGQ9Zi5zZXRJbW1lZGlhdGUscD1mLmNsZWFySW1tZWRpYXRlLHk9Zi5NZXNzYWdlQ2hhbm5lbCxoPWYuRGlzcGF0Y2gsdj0wLGc9e30sYj1mdW5jdGlvbigpe3ZhciBlPSt0aGlzOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCmlmKGcuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PWdbZV07ZGVsZXRlIGdbZV0sdCgpfX0sbT1mdW5jdGlvbihlKXtiLmNhbGwoZS5kYXRhKX07Ci8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToKZCYmcHx8KGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIGdbKyt2XT1mdW5jdGlvbigpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMKcygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKHYpLHZ9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIGdbZV19LAovLyBOb2RlLmpzIDAuOC0KInByb2Nlc3MiPT1yKDI4KShsKT9uPWZ1bmN0aW9uKGUpe2wubmV4dFRpY2soYShiLGUsMSkpfTpoJiZoLm5vdz9uPWZ1bmN0aW9uKGUpe2gubm93KGEoYixlLDEpKX06eT8oaT1uZXcgeSxvPWkucG9ydDIsaS5wb3J0MS5vbm1lc3NhZ2U9bSxuPWEoby5wb3N0TWVzc2FnZSxvLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtLCExKSk6bj0ib25yZWFkeXN0YXRlY2hhbmdlImluIGMoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYygic2NyaXB0IikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChhKGIsZSwxKSwwKX0pLGUuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LC8qIDEyMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxpPXIoMTIyKS5zZXQsbz1uLk11dGF0aW9uT2JzZXJ2ZXJ8fG4uV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPW4ucHJvY2VzcyxzPW4uUHJvbWlzZSx1PSJwcm9jZXNzIj09cigyOCkoYSk7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxyLGM9ZnVuY3Rpb24oKXt2YXIgbixpO2Zvcih1JiYobj1hLmRvbWFpbikmJm4uZXhpdCgpO2U7KXtpPWUuZm4sZT1lLm5leHQ7dHJ5e2koKX1jYXRjaChuKXt0aHJvdyBlP3IoKTp0PXZvaWQgMCxufX10PXZvaWQgMCxuJiZuLmVudGVyKCl9OwovLyBOb2RlLmpzCmlmKHUpcj1mdW5jdGlvbigpe2EubmV4dFRpY2soYyl9O2Vsc2UgaWYobyl7dmFyIGY9ITAsbD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IG8oYykub2JzZXJ2ZShsLHtjaGFyYWN0ZXJEYXRhOiEwfSksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKcj1mdW5jdGlvbigpe2wuZGF0YT1mPSFmfX1lbHNlIGlmKHMmJnMucmVzb2x2ZSl7dmFyIGQ9cy5yZXNvbHZlKCk7cj1mdW5jdGlvbigpe2QudGhlbihjKX19ZWxzZSByPWZ1bmN0aW9uKCl7Ci8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkKaS5jYWxsKG4sYyl9O3JldHVybiBmdW5jdGlvbihuKXt2YXIgaT17Zm46bixuZXh0OnZvaWQgMH07dCYmKHQubmV4dD1pKSxlfHwoZT1pLHIoKSksdD1pfX19LC8qIDEyNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1uKHQpLHRoaXMucmVqZWN0PW4ocil9Ci8vIDI1LjQuMS41IE5ld1Byb21pc2VDYXBhYmlsaXR5KEMpCnZhciBuPXIoMTYpO2UuZXhwb3J0cy5mPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoZSl9fSwvKiAxMjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gSUVFRTc1NCBjb252ZXJzaW9ucyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2llZWU3NTQKZnVuY3Rpb24gcGFja0lFRUU3NTQoZSx0LHIpe3ZhciBuLGksbyxhPUFycmF5KHIpLHM9OCpyLXQtMSx1PSgxPDxzKS0xLGM9dT4+MSxmPTIzPT09dD9NKDIsLTI0KS1NKDIsLTc3KTowLGw9MCxkPWU8MHx8MD09PWUmJjEvZTwwPzE6MDtmb3IoZT1rKGUpLAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCmUhPWV8fGU9PT1PPygKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQppPWUhPWU/MTowLG49dSk6KG49TCh4KGUpL0UpLGUqKG89TSgyLC1uKSk8MSYmKG4tLSxvKj0yKSxlKz1uK2M+PTE/Zi9vOmYqTSgyLDEtYyksZSpvPj0yJiYobisrLG8vPTIpLG4rYz49dT8oaT0wLG49dSk6bitjPj0xPyhpPShlKm8tMSkqTSgyLHQpLG4rPWMpOihpPWUqTSgyLGMtMSkqTSgyLHQpLG49MCkpO3Q+PTg7YVtsKytdPTI1NSZpLGkvPTI1Nix0LT04KTtmb3Iobj1uPDx0fGkscys9dDtzPjA7YVtsKytdPTI1NSZuLG4vPTI1NixzLT04KTtyZXR1cm4gYVstLWxdfD0xMjgqZCxhfWZ1bmN0aW9uIHVucGFja0lFRUU3NTQoZSx0LHIpe3ZhciBuLGk9OCpyLXQtMSxvPSgxPDxpKS0xLGE9bz4+MSxzPWktNyx1PXItMSxjPWVbdS0tXSxmPTEyNyZjO2ZvcihjPj49NztzPjA7Zj0yNTYqZitlW3VdLHUtLSxzLT04KTtmb3Iobj1mJigxPDwtcyktMSxmPj49LXMscys9dDtzPjA7bj0yNTYqbitlW3VdLHUtLSxzLT04KTtpZigwPT09ZilmPTEtYTtlbHNle2lmKGY9PT1vKXJldHVybiBuP05hTjpjPy1POk87bis9TSgyLHQpLGYtPWF9cmV0dXJuKGM/LTE6MSkqbipNKDIsZi10KX1mdW5jdGlvbiB1bnBhY2tJMzIoZSl7cmV0dXJuIGVbM108PDI0fGVbMl08PDE2fGVbMV08PDh8ZVswXX1mdW5jdGlvbiBwYWNrSTgoZSl7cmV0dXJuWzI1NSZlXX1mdW5jdGlvbiBwYWNrSTE2KGUpe3JldHVyblsyNTUmZSxlPj44JjI1NV19ZnVuY3Rpb24gcGFja0kzMihlKXtyZXR1cm5bMjU1JmUsZT4+OCYyNTUsZT4+MTYmMjU1LGU+PjI0JjI1NV19ZnVuY3Rpb24gcGFja0Y2NChlKXtyZXR1cm4gcGFja0lFRUU3NTQoZSw1Miw4KX1mdW5jdGlvbiBwYWNrRjMyKGUpe3JldHVybiBwYWNrSUVFRTc1NChlLDIzLDQpfWZ1bmN0aW9uIGFkZEdldHRlcihlLHQscil7aChlW2JdLHQse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW3JdfX0pfWZ1bmN0aW9uIGdldChlLHQscixuKXt2YXIgaT0rcixvPXAoaSk7aWYobyt0PmVbVV0pdGhyb3cgUyhtKTt2YXIgYT1lW0RdLl9iLHM9bytlW0FdLHU9YS5zbGljZShzLHMrdCk7cmV0dXJuIG4/dTp1LnJldmVyc2UoKX1mdW5jdGlvbiBzZXQoZSx0LHIsbixpLG8pe3ZhciBhPStyLHM9cChhKTtpZihzK3Q+ZVtVXSl0aHJvdyBTKG0pO2Zvcih2YXIgdT1lW0RdLl9iLGM9cytlW0FdLGY9bigraSksbD0wO2w8dDtsKyspdVtjK2xdPWZbbz9sOnQtbC0xXX12YXIgbj1yKDQpLGk9cig4KSxvPXIoNDgpLGE9cig4OCkscz1yKDE4KSx1PXIoNTYpLGM9cig1KSxmPXIoNTQpLGw9cigzMyksZD1yKDEwKSxwPXIoMTcxKSx5PXIoNTIpLmYsaD1yKDkpLmYsdj1yKDEyMCksZz1yKDYxKSxiPSJwcm90b3R5cGUiLG09Ildyb25nIGluZGV4ISIsXz1uLkFycmF5QnVmZmVyLFI9bi5EYXRhVmlldyx3PW4uTWF0aCxTPW4uUmFuZ2VFcnJvcixPPW4uSW5maW5pdHksUD1fLGs9dy5hYnMsTT13LnBvdyxMPXcuZmxvb3IseD13LmxvZyxFPXcuTE4yLEQ9aT8iX2IiOiJidWZmZXIiLFU9aT8iX2wiOiJieXRlTGVuZ3RoIixBPWk/Il9vIjoiYnl0ZU9mZnNldCI7aWYoYS5BQlYpe2lmKCFjKGZ1bmN0aW9uKCl7XygxKX0pfHwhYyhmdW5jdGlvbigpe25ldyBfKC0xKX0pfHxjKGZ1bmN0aW9uKCl7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKcmV0dXJuIG5ldyBfLG5ldyBfKDEuNSksbmV3IF8oTmFOKSwiQXJyYXlCdWZmZXIiIT1fLm5hbWV9KSl7Xz1mdW5jdGlvbihlKXtyZXR1cm4gZih0aGlzLF8pLG5ldyBQKHAoZSkpfTtmb3IodmFyIGosST1fW2JdPVBbYl0sQz15KFApLFQ9MDtDLmxlbmd0aD5UOykoaj1DW1QrK10paW4gX3x8cyhfLGosUFtqXSk7b3x8KEkuY29uc3RydWN0b3I9Xyl9Ci8vIGlPUyBTYWZhcmkgNy54IGJ1Zwp2YXIgTj1uZXcgUihuZXcgXygyKSksRj1SW2JdLnNldEludDg7Ti5zZXRJbnQ4KDAsMjE0NzQ4MzY0OCksTi5zZXRJbnQ4KDEsMjE0NzQ4MzY0OSksIU4uZ2V0SW50OCgwKSYmTi5nZXRJbnQ4KDEpfHx1KFJbYl0se3NldEludDg6ZnVuY3Rpb24oZSx0KXtGLmNhbGwodGhpcyxlLHQ8PDI0Pj4yNCl9LHNldFVpbnQ4OmZ1bmN0aW9uKGUsdCl7Ri5jYWxsKHRoaXMsZSx0PDwyND4+MjQpfX0sITApfWVsc2UgXz1mdW5jdGlvbihlKXtmKHRoaXMsXywiQXJyYXlCdWZmZXIiKTt2YXIgdD1wKGUpO3RoaXMuX2I9di5jYWxsKEFycmF5KHQpLDApLHRoaXNbVV09dH0sUj1mdW5jdGlvbihlLHQscil7Zih0aGlzLFIsIkRhdGFWaWV3IiksZihlLF8sIkRhdGFWaWV3Iik7dmFyIG49ZVtVXSxpPWwodCk7aWYoaTwwfHxpPm4pdGhyb3cgUygiV3Jvbmcgb2Zmc2V0ISIpO2lmKHI9dm9pZCAwPT09cj9uLWk6ZChyKSxpK3I+bil0aHJvdyBTKCJXcm9uZyBsZW5ndGghIik7dGhpc1tEXT1lLHRoaXNbQV09aSx0aGlzW1VdPXJ9LGkmJihhZGRHZXR0ZXIoXywiYnl0ZUxlbmd0aCIsIl9sIiksYWRkR2V0dGVyKFIsImJ1ZmZlciIsIl9iIiksYWRkR2V0dGVyKFIsImJ5dGVMZW5ndGgiLCJfbCIpLGFkZEdldHRlcihSLCJieXRlT2Zmc2V0IiwiX28iKSksdShSW2JdLHtnZXRJbnQ4OmZ1bmN0aW9uKGUpe3JldHVybiBnZXQodGhpcywxLGUpWzBdPDwyND4+MjR9LGdldFVpbnQ4OmZ1bmN0aW9uKGUpe3JldHVybiBnZXQodGhpcywxLGUpWzBdfSxnZXRJbnQxNjpmdW5jdGlvbihlKXt2YXIgdD1nZXQodGhpcywyLGUsYXJndW1lbnRzWzFdKTtyZXR1cm4odFsxXTw8OHx0WzBdKTw8MTY+PjE2fSxnZXRVaW50MTY6ZnVuY3Rpb24oZSl7dmFyIHQ9Z2V0KHRoaXMsMixlLGFyZ3VtZW50c1sxXSk7cmV0dXJuIHRbMV08PDh8dFswXX0sZ2V0SW50MzI6ZnVuY3Rpb24oZSl7cmV0dXJuIHVucGFja0kzMihnZXQodGhpcyw0LGUsYXJndW1lbnRzWzFdKSl9LGdldFVpbnQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLDQsZSxhcmd1bWVudHNbMV0pKT4+PjB9LGdldEZsb2F0MzI6ZnVuY3Rpb24oZSl7cmV0dXJuIHVucGFja0lFRUU3NTQoZ2V0KHRoaXMsNCxlLGFyZ3VtZW50c1sxXSksMjMsNCl9LGdldEZsb2F0NjQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHVucGFja0lFRUU3NTQoZ2V0KHRoaXMsOCxlLGFyZ3VtZW50c1sxXSksNTIsOCl9LHNldEludDg6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcywxLGUscGFja0k4LHQpfSxzZXRVaW50ODpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDEsZSxwYWNrSTgsdCl9LHNldEludDE2OmZ1bmN0aW9uKGUsdCl7c2V0KHRoaXMsMixlLHBhY2tJMTYsdCxhcmd1bWVudHNbMl0pfSxzZXRVaW50MTY6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcywyLGUscGFja0kxNix0LGFyZ3VtZW50c1syXSl9LHNldEludDMyOmZ1bmN0aW9uKGUsdCl7c2V0KHRoaXMsNCxlLHBhY2tJMzIsdCxhcmd1bWVudHNbMl0pfSxzZXRVaW50MzI6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcyw0LGUscGFja0kzMix0LGFyZ3VtZW50c1syXSl9LHNldEZsb2F0MzI6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcyw0LGUscGFja0YzMix0LGFyZ3VtZW50c1syXSl9LHNldEZsb2F0NjQ6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcyw4LGUscGFja0Y2NCx0LGFyZ3VtZW50c1syXSl9fSk7ZyhfLCJBcnJheUJ1ZmZlciIpLGcoUiwiRGF0YVZpZXciKSxzKFJbYl0sYS5WSUVXLCEwKSx0LkFycmF5QnVmZmVyPV8sdC5EYXRhVmlldz1SfSwvKiAxMjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQxMikoITApOwovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCnIoMTgwKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksLy8gdGFyZ2V0CnRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0sLyogMTI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIDcuMS40IFRvSW50ZWdlcgp2YXIgcj1NYXRoLmNlaWwsbj1NYXRoLmZsb29yO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP246cikoZSl9fSwvKiAxMjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gNy4yLjEgUmVxdWlyZU9iamVjdENvZXJjaWJsZShhcmd1bWVudCkKZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09ZSl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiK2UpO3JldHVybiBlfX0sLyogMTI5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQyKSxpPXIoMjEpLmRvY3VtZW50LG89bihpKSYmbihpLmNyZWF0ZUVsZW1lbnQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbz9pLmNyZWF0ZUVsZW1lbnQoZSk6e319fSwvKiAxMzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKdmFyIG49cig0Mik7Ci8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlCi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nCmUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLGk7aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTtpZigiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7aWYoIXQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LC8qIDEzMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQp2YXIgbj1yKDM5KSxpPXIoNDE0KSxvPXIoMTM1KSxhPXIoMTMzKSgiSUVfUFJPVE8iKSxzPWZ1bmN0aW9uKCl7fSx1PWZ1bmN0aW9uKCl7Ci8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnCnZhciBlLHQ9cigxMjkpKCJpZnJhbWUiKSxuPW8ubGVuZ3RoO2Zvcih0LnN0eWxlLmRpc3BsYXk9Im5vbmUiLHIoMTg1KS5hcHBlbmRDaGlsZCh0KSx0LnNyYz0iamF2YXNjcmlwdDoiLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybAovLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0OwovLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7CmU9dC5jb250ZW50V2luZG93LmRvY3VtZW50LGUub3BlbigpLGUud3JpdGUoIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XC9zY3JpcHQ+IiksZS5jbG9zZSgpLHU9ZS5GO24tLTspZGVsZXRlIHUucHJvdG90eXBlW29bbl1dO3JldHVybiB1KCl9O2UuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciByOwovLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbApyZXR1cm4gbnVsbCE9PWU/KHMucHJvdG90eXBlPW4oZSkscj1uZXcgcyxzLnByb3RvdHlwZT1udWxsLHJbYV09ZSk6cj11KCksdm9pZCAwPT09dD9yOmkocix0KX19LC8qIDEzMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMS4xNSBUb0xlbmd0aAp2YXIgbj1yKDEyNyksaT1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9pKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LC8qIDEzMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMzQpKCJrZXlzIiksaT1yKDk0KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWkoZSkpfX0sLyogMTM0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIxKSxpPW5bIl9fY29yZS1qc19zaGFyZWRfXyJdfHwoblsiX19jb3JlLWpzX3NoYXJlZF9fIl09e30pO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXXx8KGlbZV09e30pfX0sLyogMTM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXMKZS5leHBvcnRzPSJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YiLnNwbGl0KCIsIil9LC8qIDEzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIFByb21pc2VDYXBhYmlsaXR5KGUpe3ZhciB0LHI7dGhpcy5wcm9taXNlPW5ldyBlKGZ1bmN0aW9uKGUsbil7aWYodm9pZCAwIT09dHx8dm9pZCAwIT09cil0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7dD1lLHI9bn0pLHRoaXMucmVzb2x2ZT1uKHQpLHRoaXMucmVqZWN0PW4ocil9Ci8vIDI1LjQuMS41IE5ld1Byb21pc2VDYXBhYmlsaXR5KEMpCnZhciBuPXIoOTMpO2UuZXhwb3J0cy5mPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoZSl9fSwvKiAxMzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt0LmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sLyogMTM4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3QucnVudGltZVV0aWxzPXtydW50aW1lRGVzY3JpcHRvcjp7fSxydW50aW1lQ2FwYWJpbGl0aWVzOntjb25zdHJhaW50czp7fX19fSwvKiAxMzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3QuZj1yKDIyKX0sLyogMTQwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIxKSxpPXIoMTMpLG89cig5MiksYT1yKDEzOSkscz1yKDM4KS5mO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1pLlN5bWJvbHx8KGkuU3ltYm9sPW8/e306bi5TeW1ib2x8fHt9KTsiXyI9PWUuY2hhckF0KDApfHxlIGluIHR8fHModCxlLHt2YWx1ZTphLmYoZSl9KX19LC8qIDE0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3NyksaT1yKDczKSxvPXIoNDQpLGE9cigxMzApLHM9cig1OCksdT1yKDE4MSksYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3QuZj1yKDQzKT9jOmZ1bmN0aW9uKGUsdCl7aWYoZT1vKGUpLHQ9YSh0LCEwKSx1KXRyeXtyZXR1cm4gYyhlLHQpfWNhdGNoKGUpe31pZihzKGUsdCkpcmV0dXJuIGkoIW4uZi5jYWxsKGUsdCksZVt0XSl9fSwvKiAxNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gT3BlcmF0b3JzKCl7KDAsaS5kZWZhdWx0KSh0aGlzLE9wZXJhdG9ycyl9cmV0dXJuKDAsYS5kZWZhdWx0KShPcGVyYXRvcnMsW3trZXk6ImFuZCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF0mJmVbMV19fSx7a2V5OiJiZXR3ZWVuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1wYXJzZUludChlWzBdWzBdKSxyPXBhcnNlSW50KGVbMF1bMV0pLG49ZVsxXTtyZXR1cm4gcjx0JiYobj1uPHQ/bis9MjQwMDpuLHIrPTI0MDApLG4+dCYmbjxyfX0se2tleToiZXF1YWxzIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4iKiI9PT1TdHJpbmcoZVswXSl8fFN0cmluZyhlWzBdKT09PVN0cmluZyhlWzFdKX19LHtrZXk6ImdyZWF0ZXJUaGFuIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT5lWzBdfX0se2tleToiaW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzBdLmluZGV4T2YoZVsxXSk+LTF9fSx7a2V5OiJsZXNzVGhhbiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV08ZVswXX19LHtrZXk6Im5vdCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIWVbMF19fSx7a2V5OiJvciIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF18fGVbMV19fV0pLE9wZXJhdG9yc30oKTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAxNDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMTQyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1mdW5jdGlvbigpey8qKgogICogQ3JlYXRlcyBhIG5ldyBDb25kaXRpb24uCiAgKiBAY2xhc3MKICAqIEBwYXJhbSAge3N0cmluZ30gIGF0dHJpYnV0ZQogICogQHBhcmFtICB7c3RyaW5nfSAgb3BlcmF0b3IKICAqIEBwYXJhbSAgeyp9ICAgICAgIHBhcmFtcwogICovCmZ1bmN0aW9uIENvbmRpdGlvbihlLHQscil7KDAsaS5kZWZhdWx0KSh0aGlzLENvbmRpdGlvbiksdGhpcy5hdHRyaWJ1dGU9ZSx0aGlzLm9wZXJhdG9yPXQsdGhpcy5wYXJhbXM9cix0aGlzLm9wZXJhdG9ycz1uZXcgdS5kZWZhdWx0fS8qKgogICogVmVyaWZpZXMgaWYgdGhlIGNvbmRpdGlvbiBpcyBhcHBsaWNhYmxlIHRvIHRoZSBtZXNzYWdlLiBGaXJzdCwgdGhlIHN5c3RlbSB2YWx1ZSB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBhdHRyaWJ1dGUgaXMgcmV0cmlldmVkOyB0aGVuLCB0aGF0IHZhbHVlIGlzIGNvbXBhcmVkIHdpdGggdGhlIHBhcmFtZXRlciBzcGVjaWZpZWQgaW4gdGhlIGNvbmRpdGlvbiBieSBleGVjdXRpbmcgdGhlIG9wZXJhdG9yIGltcGxlbWVudGF0aW9uLiBJZiB0aGUgb3BlcmF0b3IgaXMgJ2luJyBhbmQgdGhlIG5hbWUgb2YgYSBncm91cCBpcyBnaXZlbiwgdGhlbiB0aGUgYXJyYXkgaG9sZGluZyB0aGUgbWVtYmVycyBvZiB0aGUgZ3JvdXAgaXMgcmV0cmlldmVkIGJlZm9yZSB0aGUgY29tcGFyaXNvbi4KICAqIEBwYXJhbSAge09iamVjdH0gICAgY29udGV4dCAgIGVudmlyb25tZW50IHdoZXJlIHRoZSBQb2xpY3kgRW5naW5lIGlzIGJlaW5nIHVzZWQKICAqIEBwYXJhbSAge09iamVjdH0gICAgbWVzc2FnZQogICovCnJldHVybigwLGEuZGVmYXVsdCkoQ29uZGl0aW9uLFt7a2V5OiJpc0FwcGxpY2FibGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZVt0aGlzLmF0dHJpYnV0ZV09e21lc3NhZ2U6dH07dmFyIHI9ZVt0aGlzLmF0dHJpYnV0ZV0sbj12b2lkIDA7cmV0dXJuImluIiE9PXRoaXMub3BlcmF0b3J8fEFycmF5LmlzQXJyYXkodGhpcy5wYXJhbXMpP3RoaXMub3BlcmF0b3JzW3RoaXMub3BlcmF0b3JdKFt0aGlzLnBhcmFtcyxyXSk6KG49ZS5nZXRHcm91cCh0aGlzLnBhcmFtcyx0LnRvKSx0aGlzLm9wZXJhdG9yc1t0aGlzLm9wZXJhdG9yXShbbixyXSkpfX1dKSxDb25kaXRpb259KCk7LyoqCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICAgICAqCiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICoKICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgICAgKgogICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgICAgKiovCnQuZGVmYXVsdD1jLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDE0NCAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByOwovLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZQpyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCk7dHJ5ewovLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUCkKcj1yfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpfHwoMCxldmFsKSgidGhpcyIpfWNhdGNoKGUpewovLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZQoib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmKHI9d2luZG93KX0KLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLgovLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQncwovLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59CmUuZXhwb3J0cz1yfSwvKiAxNDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz0hcig4KSYmIXIoNSkoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIoMTAwKSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDE0NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dC5mPXIoNyl9LC8qIDE0NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNyksaT1yKDIzKSxvPXIoNzkpKCExKSxhPXIoMTAyKSgiSUVfUFJPVE8iKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPWkoZSksdT0wLGM9W107Zm9yKHIgaW4gcylyIT1hJiZuKHMscikmJmMucHVzaChyKTsKLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5cwpmb3IoO3QubGVuZ3RoPnU7KW4ocyxyPXRbdSsrXSkmJih+byhjLHIpfHxjLnB1c2gocikpO3JldHVybiBjfX0sLyogMTQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpLGk9cigzKSxvPXIoNDkpO2UuZXhwb3J0cz1yKDgpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUsdCl7aShlKTtmb3IodmFyIHIsYT1vKHQpLHM9YS5sZW5ndGgsdT0wO3M+dTspbi5mKGUscj1hW3UrK10sdFtyXSk7cmV0dXJuIGV9fSwvKiAxNDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93CnZhciBuPXIoMjMpLGk9cig1MikuZixvPXt9LnRvU3RyaW5nLGE9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gaShlKX1jYXRjaChlKXtyZXR1cm4gYS5zbGljZSgpfX07ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIGEmJiJbb2JqZWN0IFdpbmRvd10iPT1vLmNhbGwoZSk/cyhlKTppKG4oZSkpfX0sLyogMTUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDE5LjEuMi4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UsIC4uLikKdmFyIG49cig0OSksaT1yKDgwKSxvPXIoNzEpLGE9cigxNCkscz1yKDcwKSx1PU9iamVjdC5hc3NpZ247Ci8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKQplLmV4cG9ydHM9IXV8fHIoNSkoZnVuY3Rpb24oKXt2YXIgZT17fSx0PXt9LHI9U3ltYm9sKCksbj0iYWJjZGVmZ2hpamtsbW5vcHFyc3QiO3JldHVybiBlW3JdPTcsbi5zcGxpdCgiIikuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPWV9KSw3IT11KHt9LGUpW3JdfHxPYmplY3Qua2V5cyh1KHt9LHQpKS5qb2luKCIiKSE9bn0pP2Z1bmN0aW9uKGUsdCl7Zm9yKC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKdmFyIHI9YShlKSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0xLGY9aS5mLGw9by5mO3U+YzspZm9yKHZhciBkLHA9cyhhcmd1bWVudHNbYysrXSkseT1mP24ocCkuY29uY2F0KGYocCkpOm4ocCksaD15Lmxlbmd0aCx2PTA7aD52OylsLmNhbGwocCxkPXlbdisrXSkmJihyW2RdPXBbZF0pO3JldHVybiByfTp1fSwvKiAxNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDE2KSxpPXIoNiksbz1yKDE1MiksYT1bXS5zbGljZSxzPXt9LHU9ZnVuY3Rpb24oZSx0LHIpe2lmKCEodCBpbiBzKSl7Zm9yKHZhciBuPVtdLGk9MDtpPHQ7aSsrKW5baV09ImFbIitpKyJdIjsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jCnNbdF09RnVuY3Rpb24oIkYsYSIsInJldHVybiBuZXcgRigiK24uam9pbigiLCIpKyIpIil9cmV0dXJuIHNbdF0oZSxyKX07ZS5leHBvcnRzPUZ1bmN0aW9uLmJpbmR8fGZ1bmN0aW9uKGUpe3ZhciB0PW4odGhpcykscj1hLmNhbGwoYXJndW1lbnRzLDEpLHM9ZnVuY3Rpb24oKXt2YXIgbj1yLmNvbmNhdChhLmNhbGwoYXJndW1lbnRzKSk7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBzP3UodCxuLmxlbmd0aCxuKTpvKHQsbixlKX07cmV0dXJuIGkodC5wcm90b3R5cGUpJiYocy5wcm90b3R5cGU9dC5wcm90b3R5cGUpLHN9fSwvKiAxNTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81CmUuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSwvKiAxNTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCkucGFyc2VJbnQsaT1yKDYyKS50cmltLG89cigxMDYpLGE9L15bLStdPzBbeFhdLztlLmV4cG9ydHM9OCE9PW4obysiMDgiKXx8MjIhPT1uKG8rIjB4MTYiKT9mdW5jdGlvbihlLHQpe3ZhciByPWkoU3RyaW5nKGUpLDMpO3JldHVybiBuKHIsdD4+PjB8fChhLnRlc3Qocik/MTY6MTApKX06bn0sLyogMTU0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLnBhcnNlRmxvYXQsaT1yKDYyKS50cmltO2UuZXhwb3J0cz0xL24ocigxMDYpKyItMCIpIT0tMS8wP2Z1bmN0aW9uKGUpe3ZhciB0PWkoU3RyaW5nKGUpLDMpLHI9bih0KTtyZXR1cm4gMD09PXImJiItIj09dC5jaGFyQXQoMCk/LTA6cn06bn0sLyogMTU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI4KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZigibnVtYmVyIiE9dHlwZW9mIGUmJiJOdW1iZXIiIT1uKGUpKXRocm93IFR5cGVFcnJvcih0KTtyZXR1cm4rZX19LC8qIDE1NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi4zIE51bWJlci5pc0ludGVnZXIobnVtYmVyKQp2YXIgbj1yKDYpLGk9TWF0aC5mbG9vcjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIW4oZSkmJmlzRmluaXRlKGUpJiZpKGUpPT09ZX19LC8qIDE1NyAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyAyMC4yLjIuMjAgTWF0aC5sb2cxcCh4KQplLmV4cG9ydHM9TWF0aC5sb2cxcHx8ZnVuY3Rpb24oZSl7cmV0dXJuKGU9K2UpPi0xZS04JiZlPDFlLTg/ZS1lKmUvMjpNYXRoLmxvZygxK2UpfX0sLyogMTU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjE2IE1hdGguZnJvdW5kKHgpCnZhciBuPXIoMTA5KSxpPU1hdGgucG93LG89aSgyLC01MiksYT1pKDIsLTIzKSxzPWkoMiwxMjcpKigyLWEpLHU9aSgyLC0xMjYpLGM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrMS9vLTEvb307ZS5leHBvcnRzPU1hdGguZnJvdW5kfHxmdW5jdGlvbihlKXt2YXIgdCxyLGk9TWF0aC5hYnMoZSksZj1uKGUpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCnJldHVybiBpPHU/ZipjKGkvdS9hKSp1KmE6KHQ9KDErYS9vKSppLHI9dC0odC1pKSxyPnN8fHIhPXI/ZiooMS8wKTpmKnIpfX0sLyogMTU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcgp2YXIgbj1yKDMpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixpKXt0cnl7cmV0dXJuIGk/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2godCl7dmFyIG89ZS5yZXR1cm47dGhyb3cgdm9pZCAwIT09byYmbihvLmNhbGwoZSkpLHR9fX0sLyogMTYwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE2KSxpPXIoMTQpLG89cig3MCksYT1yKDEwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIscyx1KXtuKHQpO3ZhciBjPWkoZSksZj1vKGMpLGw9YShjLmxlbmd0aCksZD11P2wtMTowLHA9dT8tMToxO2lmKHI8Milmb3IoOzspe2lmKGQgaW4gZil7cz1mW2RdLGQrPXA7YnJlYWt9aWYoZCs9cCx1P2Q8MDpsPD1kKXRocm93IFR5cGVFcnJvcigiUmVkdWNlIG9mIGVtcHR5IGFycmF5IHdpdGggbm8gaW5pdGlhbCB2YWx1ZSIpfWZvcig7dT9kPj0wOmw+ZDtkKz1wKWQgaW4gZiYmKHM9dChzLGZbZF0sZCxjKSk7cmV0dXJuIHN9fSwvKiAxNjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjIuMS4zLjMgQXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCwgZW5kID0gdGhpcy5sZW5ndGgpCnZhciBuPXIoMTQpLGk9cig1MCksbz1yKDEwKTtlLmV4cG9ydHM9W10uY29weVdpdGhpbnx8ZnVuY3Rpb24oZSx0KXt2YXIgcj1uKHRoaXMpLGE9byhyLmxlbmd0aCkscz1pKGUsYSksdT1pKHQsYSksYz1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxmPU1hdGgubWluKCh2b2lkIDA9PT1jP2E6aShjLGEpKS11LGEtcyksbD0xO2Zvcih1PHMmJnM8dStmJiYobD0tMSx1Kz1mLTEscys9Zi0xKTtmLS0gPjA7KXUgaW4gcj9yW3NdPXJbdV06ZGVsZXRlIHJbc10scys9bCx1Kz1sO3JldHVybiByfX0sLyogMTYyICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0sLyogMTYzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjEuMi41LjMgZ2V0IFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3MoKQpyKDgpJiYiZyIhPS8uL2cuZmxhZ3MmJnIoOSkuZihSZWdFeHAucHJvdG90eXBlLCJmbGFncyIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6cig4NCl9KX0sLyogMTY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSwvKiAxNjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMyksaT1yKDYpLG89cigxMjQpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKG4oZSksaSh0KSYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIHI9by5mKGUpO3JldHVybigwLHIucmVzb2x2ZSkodCksci5wcm9taXNlfX0sLyogMTY2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxNjcpLGk9cig2NCk7Ci8vIDIzLjEgTWFwIE9iamVjdHMKZS5leHBvcnRzPXIoODcpKCJNYXAiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sewovLyAyMy4xLjMuNiBNYXAucHJvdG90eXBlLmdldChrZXkpCmdldDpmdW5jdGlvbihlKXt2YXIgdD1uLmdldEVudHJ5KGkodGhpcywiTWFwIiksZSk7cmV0dXJuIHQmJnQudn0sCi8vIDIzLjEuMy45IE1hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpCnNldDpmdW5jdGlvbihlLHQpe3JldHVybiBuLmRlZihpKHRoaXMsIk1hcCIpLDA9PT1lPzA6ZSx0KX19LG4sITApfSwvKiAxNjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDkpLmYsaT1yKDUxKSxvPXIoNTYpLGE9cigyNykscz1yKDU0KSx1PXIoNTUpLGM9cigxMTIpLGY9cigxNjIpLGw9cig1MyksZD1yKDgpLHA9cig0MCkuZmFzdEtleSx5PXIoNjQpLGg9ZD8iX3MiOiJzaXplIix2PWZ1bmN0aW9uKGUsdCl7Ci8vIGZhc3QgY2FzZQp2YXIgcixuPXAodCk7aWYoIkYiIT09bilyZXR1cm4gZS5faVtuXTsKLy8gZnJvemVuIG9iamVjdCBjYXNlCmZvcihyPWUuX2Y7cjtyPXIubilpZihyLms9PXQpcmV0dXJuIHJ9O2UuZXhwb3J0cz17Z2V0Q29uc3RydWN0b3I6ZnVuY3Rpb24oZSx0LHIsYyl7dmFyIGY9ZShmdW5jdGlvbihlLG4pe3MoZSxmLHQsIl9pIiksZS5fdD10LC8vIGNvbGxlY3Rpb24gdHlwZQplLl9pPWkobnVsbCksLy8gaW5kZXgKZS5fZj12b2lkIDAsLy8gZmlyc3QgZW50cnkKZS5fbD12b2lkIDAsLy8gbGFzdCBlbnRyeQplW2hdPTAsLy8gc2l6ZQp2b2lkIDAhPW4mJnUobixyLGVbY10sZSl9KTtyZXR1cm4gbyhmLnByb3RvdHlwZSx7Ci8vIDIzLjEuMy4xIE1hcC5wcm90b3R5cGUuY2xlYXIoKQovLyAyMy4yLjMuMiBTZXQucHJvdG90eXBlLmNsZWFyKCkKY2xlYXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9eSh0aGlzLHQpLHI9ZS5faSxuPWUuX2Y7bjtuPW4ubiluLnI9ITAsbi5wJiYobi5wPW4ucC5uPXZvaWQgMCksZGVsZXRlIHJbbi5pXTtlLl9mPWUuX2w9dm9pZCAwLGVbaF09MH0sCi8vIDIzLjEuMy4zIE1hcC5wcm90b3R5cGUuZGVsZXRlKGtleSkKLy8gMjMuMi4zLjQgU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpCmRlbGV0ZTpmdW5jdGlvbihlKXt2YXIgcj15KHRoaXMsdCksbj12KHIsZSk7aWYobil7dmFyIGk9bi5uLG89bi5wO2RlbGV0ZSByLl9pW24uaV0sbi5yPSEwLG8mJihvLm49aSksaSYmKGkucD1vKSxyLl9mPT1uJiYoci5fZj1pKSxyLl9sPT1uJiYoci5fbD1vKSxyW2hdLS19cmV0dXJuISFufSwKLy8gMjMuMi4zLjYgU2V0LnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcgPSB1bmRlZmluZWQpCi8vIDIzLjEuMy41IE1hcC5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuLCB0aGlzQXJnID0gdW5kZWZpbmVkKQpmb3JFYWNoOmZ1bmN0aW9uKGUpe3kodGhpcyx0KTtmb3IodmFyIHIsbj1hKGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7cj1yP3Iubjp0aGlzLl9mOykKLy8gcmV2ZXJ0IHRvIHRoZSBsYXN0IGV4aXN0aW5nIGVudHJ5CmZvcihuKHIudixyLmssdGhpcyk7ciYmci5yOylyPXIucH0sCi8vIDIzLjEuMy43IE1hcC5wcm90b3R5cGUuaGFzKGtleSkKLy8gMjMuMi4zLjcgU2V0LnByb3RvdHlwZS5oYXModmFsdWUpCmhhczpmdW5jdGlvbihlKXtyZXR1cm4hIXYoeSh0aGlzLHQpLGUpfX0pLGQmJm4oZi5wcm90b3R5cGUsInNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geSh0aGlzLHQpW2hdfX0pLGZ9LGRlZjpmdW5jdGlvbihlLHQscil7dmFyIG4saSxvPXYoZSx0KTsKLy8gY2hhbmdlIGV4aXN0aW5nIGVudHJ5Ci8vIGFkZCB0byBpbmRleApyZXR1cm4gbz9vLnY9cjooZS5fbD1vPXtpOmk9cCh0LCEwKSwvLyA8LSBpbmRleAprOnQsLy8gPC0ga2V5CnY6ciwvLyA8LSB2YWx1ZQpwOm49ZS5fbCwvLyA8LSBwcmV2aW91cyBlbnRyeQpuOnZvaWQgMCwvLyA8LSBuZXh0IGVudHJ5CnI6ITF9LGUuX2Z8fChlLl9mPW8pLG4mJihuLm49byksZVtoXSsrLCJGIiE9PWkmJihlLl9pW2ldPW8pKSxlfSxnZXRFbnRyeTp2LHNldFN0cm9uZzpmdW5jdGlvbihlLHQscil7Ci8vIGFkZCAua2V5cywgLnZhbHVlcywgLmVudHJpZXMsIFtAQGl0ZXJhdG9yXQovLyAyMy4xLjMuNCwgMjMuMS4zLjgsIDIzLjEuMy4xMSwgMjMuMS4zLjEyLCAyMy4yLjMuNSwgMjMuMi4zLjgsIDIzLjIuMy4xMCwgMjMuMi4zLjExCmMoZSx0LGZ1bmN0aW9uKGUscil7dGhpcy5fdD15KGUsdCksLy8gdGFyZ2V0CnRoaXMuX2s9ciwvLyBraW5kCnRoaXMuX2w9dm9pZCAwfSxmdW5jdGlvbigpewovLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnkKZm9yKHZhciBlPXRoaXMsdD1lLl9rLHI9ZS5fbDtyJiZyLnI7KXI9ci5wOwovLyBnZXQgbmV4dCBlbnRyeQovLyBnZXQgbmV4dCBlbnRyeQovLyByZXR1cm4gc3RlcCBieSBraW5kCi8vIG9yIGZpbmlzaCB0aGUgaXRlcmF0aW9uCnJldHVybiBlLl90JiYoZS5fbD1yPXI/ci5uOmUuX3QuX2YpPyJrZXlzIj09dD9mKDAsci5rKToidmFsdWVzIj09dD9mKDAsci52KTpmKDAsW3IuayxyLnZdKTooZS5fdD12b2lkIDAsZigxKSl9LHI/ImVudHJpZXMiOiJ2YWx1ZXMiLCFyLCEwKSwKLy8gYWRkIFtAQHNwZWNpZXNdLCAyMy4xLjIuMiwgMjMuMi4yLjIKbCh0KX19fSwvKiAxNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDE2NyksaT1yKDY0KTsKLy8gMjMuMiBTZXQgT2JqZWN0cwplLmV4cG9ydHM9cig4NykoIlNldCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7Ci8vIDIzLjIuMy4xIFNldC5wcm90b3R5cGUuYWRkKHZhbHVlKQphZGQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG4uZGVmKGkodGhpcywiU2V0IiksZT0wPT09ZT8wOmUsZSl9fSxuKX0sLyogMTY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4saT1yKDM1KSgwKSxvPXIoMTkpLGE9cig0MCkscz1yKDE1MCksdT1yKDE3MCksYz1yKDYpLGY9cig1KSxsPXIoNjQpLGQ9YS5nZXRXZWFrLHA9T2JqZWN0LmlzRXh0ZW5zaWJsZSx5PXUudWZzdG9yZSxoPXt9LHY9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSxnPXsKLy8gMjMuMy4zLjMgV2Vha01hcC5wcm90b3R5cGUuZ2V0KGtleSkKZ2V0OmZ1bmN0aW9uKGUpe2lmKGMoZSkpe3ZhciB0PWQoZSk7cmV0dXJuITA9PT10P3kobCh0aGlzLCJXZWFrTWFwIikpLmdldChlKTp0P3RbdGhpcy5faV06dm9pZCAwfX0sCi8vIDIzLjMuMy41IFdlYWtNYXAucHJvdG90eXBlLnNldChrZXksIHZhbHVlKQpzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdS5kZWYobCh0aGlzLCJXZWFrTWFwIiksZSx0KX19LGI9ZS5leHBvcnRzPXIoODcpKCJXZWFrTWFwIix2LGcsdSwhMCwhMCk7Ci8vIElFMTEgV2Vha01hcCBmcm96ZW4ga2V5cyBmaXgKZihmdW5jdGlvbigpe3JldHVybiA3IT0obmV3IGIpLnNldCgoT2JqZWN0LmZyZWV6ZXx8T2JqZWN0KShoKSw3KS5nZXQoaCl9KSYmKG49dS5nZXRDb25zdHJ1Y3Rvcih2LCJXZWFrTWFwIikscyhuLnByb3RvdHlwZSxnKSxhLk5FRUQ9ITAsaShbImRlbGV0ZSIsImhhcyIsImdldCIsInNldCJdLGZ1bmN0aW9uKGUpe3ZhciB0PWIucHJvdG90eXBlLHI9dFtlXTtvKHQsZSxmdW5jdGlvbih0LGkpewovLyBzdG9yZSBmcm96ZW4gb2JqZWN0cyBvbiBpbnRlcm5hbCB3ZWFrbWFwIHNoaW0KaWYoYyh0KSYmIXAodCkpe3RoaXMuX2Z8fCh0aGlzLl9mPW5ldyBuKTt2YXIgbz10aGlzLl9mW2VdKHQsaSk7cmV0dXJuInNldCI9PWU/dGhpczpvfXJldHVybiByLmNhbGwodGhpcyx0LGkpfSl9KSl9LC8qIDE3MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNTYpLGk9cig0MCkuZ2V0V2VhayxvPXIoMyksYT1yKDYpLHM9cig1NCksdT1yKDU1KSxjPXIoMzUpLGY9cigxNyksbD1yKDY0KSxkPWMoNSkscD1jKDYpLHk9MCxoPWZ1bmN0aW9uKGUpe3JldHVybiBlLl9sfHwoZS5fbD1uZXcgdil9LHY9ZnVuY3Rpb24oKXt0aGlzLmE9W119LGc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZChlLmEsZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF09PT10fSl9O3YucHJvdG90eXBlPXtnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Zyh0aGlzLGUpO2lmKHQpcmV0dXJuIHRbMV19LGhhczpmdW5jdGlvbihlKXtyZXR1cm4hIWcodGhpcyxlKX0sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9Zyh0aGlzLGUpO3I/clsxXT10OnRoaXMuYS5wdXNoKFtlLHRdKX0sZGVsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXAodGhpcy5hLGZ1bmN0aW9uKHQpe3JldHVybiB0WzBdPT09ZX0pO3JldHVybn50JiZ0aGlzLmEuc3BsaWNlKHQsMSksISF+dH19LGUuZXhwb3J0cz17Z2V0Q29uc3RydWN0b3I6ZnVuY3Rpb24oZSx0LHIsbyl7dmFyIGM9ZShmdW5jdGlvbihlLG4pe3MoZSxjLHQsIl9pIiksZS5fdD10LC8vIGNvbGxlY3Rpb24gdHlwZQplLl9pPXkrKywvLyBjb2xsZWN0aW9uIGlkCmUuX2w9dm9pZCAwLC8vIGxlYWsgc3RvcmUgZm9yIHVuY2F1Z2h0IGZyb3plbiBvYmplY3RzCnZvaWQgMCE9biYmdShuLHIsZVtvXSxlKX0pO3JldHVybiBuKGMucHJvdG90eXBlLHsKLy8gMjMuMy4zLjIgV2Vha01hcC5wcm90b3R5cGUuZGVsZXRlKGtleSkKLy8gMjMuNC4zLjMgV2Vha1NldC5wcm90b3R5cGUuZGVsZXRlKHZhbHVlKQpkZWxldGU6ZnVuY3Rpb24oZSl7aWYoIWEoZSkpcmV0dXJuITE7dmFyIHI9aShlKTtyZXR1cm4hMD09PXI/aChsKHRoaXMsdCkpLmRlbGV0ZShlKTpyJiZmKHIsdGhpcy5faSkmJmRlbGV0ZSByW3RoaXMuX2ldfSwKLy8gMjMuMy4zLjQgV2Vha01hcC5wcm90b3R5cGUuaGFzKGtleSkKLy8gMjMuNC4zLjQgV2Vha1NldC5wcm90b3R5cGUuaGFzKHZhbHVlKQpoYXM6ZnVuY3Rpb24oZSl7aWYoIWEoZSkpcmV0dXJuITE7dmFyIHI9aShlKTtyZXR1cm4hMD09PXI/aChsKHRoaXMsdCkpLmhhcyhlKTpyJiZmKHIsdGhpcy5faSl9fSksY30sZGVmOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1pKG8odCksITApO3JldHVybiEwPT09bj9oKGUpLnNldCh0LHIpOm5bZS5faV09cixlfSx1ZnN0b3JlOmh9fSwvKiAxNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10b2luZGV4CnZhciBuPXIoMzMpLGk9cigxMCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUpcmV0dXJuIDA7dmFyIHQ9bihlKSxyPWkodCk7aWYodCE9PXIpdGhyb3cgUmFuZ2VFcnJvcigiV3JvbmcgbGVuZ3RoISIpO3JldHVybiByfX0sLyogMTcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gYWxsIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBub24tZW51bWVyYWJsZSBhbmQgc3ltYm9scwp2YXIgbj1yKDUyKSxpPXIoODApLG89cigzKSxhPXIoNCkuUmVmbGVjdDtlLmV4cG9ydHM9YSYmYS5vd25LZXlzfHxmdW5jdGlvbihlKXt2YXIgdD1uLmYobyhlKSkscj1pLmY7cmV0dXJuIHI/dC5jb25jYXQocihlKSk6dH19LC8qIDE3MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGZsYXR0ZW5JbnRvQXJyYXkoZSx0LHIsdSxjLGYsbCxkKXtmb3IodmFyIHAseSxoPWMsdj0wLGc9ISFsJiZhKGwsZCwzKTt2PHU7KXtpZih2IGluIHIpe2lmKHA9Zz9nKHJbdl0sdix0KTpyW3ZdLHk9ITEsaShwKSYmKHk9cFtzXSx5PXZvaWQgMCE9PXk/ISF5Om4ocCkpLHkmJmY+MCloPWZsYXR0ZW5JbnRvQXJyYXkoZSx0LHAsbyhwLmxlbmd0aCksaCxmLTEpLTE7ZWxzZXtpZihoPj05MDA3MTk5MjU0NzQwOTkxKXRocm93IFR5cGVFcnJvcigpO2VbaF09cH1oKyt9disrfXJldHVybiBofQovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLWZsYXRNYXAvI3NlYy1GbGF0dGVuSW50b0FycmF5CnZhciBuPXIoODEpLGk9cig2KSxvPXIoMTApLGE9cigyNykscz1yKDcpKCJpc0NvbmNhdFNwcmVhZGFibGUiKTtlLmV4cG9ydHM9ZmxhdHRlbkludG9BcnJheX0sLyogMTc0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmQKdmFyIG49cigxMCksaT1yKDEwOCksbz1yKDMyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIHM9U3RyaW5nKG8oZSkpLHU9cy5sZW5ndGgsYz12b2lkIDA9PT1yPyIgIjpTdHJpbmcociksZj1uKHQpO2lmKGY8PXV8fCIiPT1jKXJldHVybiBzO3ZhciBsPWYtdSxkPWkuY2FsbChjLE1hdGguY2VpbChsL2MubGVuZ3RoKSk7cmV0dXJuIGQubGVuZ3RoPmwmJihkPWQuc2xpY2UoMCxsKSksYT9kK3M6cytkfX0sLyogMTc1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQ5KSxpPXIoMjMpLG89cig3MSkuZjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgcixhPWkodCkscz1uKGEpLHU9cy5sZW5ndGgsYz0wLGY9W107dT5jOylvLmNhbGwoYSxyPXNbYysrXSkmJmYucHVzaChlP1tyLGFbcl1dOmFbcl0pO3JldHVybiBmfX19LC8qIDE3NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EYXZpZEJydWFudC9NYXAtU2V0LnByb3RvdHlwZS50b0pTT04KdmFyIG49cig3MiksaT1yKDE3Nyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe2lmKG4odGhpcykhPWUpdGhyb3cgVHlwZUVycm9yKGUrIiN0b0pTT04gaXNuJ3QgZ2VuZXJpYyIpO3JldHVybiBpKHRoaXMpfX19LC8qIDE3NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig1NSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W107cmV0dXJuIG4oZSwhMSxyLnB1c2gscix0KSxyfX0sLyogMTc4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KZS5leHBvcnRzPU1hdGguc2NhbGV8fGZ1bmN0aW9uKGUsdCxyLG4saSl7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RofHxlIT1lfHx0IT10fHxyIT1yfHxuIT1ufHxpIT1pP05hTjplPT09MS8wfHxlPT09LTEvMD9lOihlLXQpKihpLW4pLyhyLXQpK259fSwvKiAxNzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt9LC8qIDE4MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoOTIpLGk9cigyNiksbz1yKDE4MiksYT1yKDU3KSxzPXIoNTgpLHU9cig3NCksYz1yKDQxMyksZj1yKDk1KSxsPXIoMTg2KSxkPXIoMjIpKCJpdGVyYXRvciIpLHA9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkseT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsaCx2LGcsYil7YyhyLHQsaCk7dmFyIG0sXyxSLHc9ZnVuY3Rpb24oZSl7aWYoIXAmJmUgaW4gaylyZXR1cm4ga1tlXTtzd2l0Y2goZSl7Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0sUz10KyIgSXRlcmF0b3IiLE89InZhbHVlcyI9PXYsUD0hMSxrPWUucHJvdG90eXBlLE09a1tkXXx8a1siQEBpdGVyYXRvciJdfHx2JiZrW3ZdLEw9TXx8dyh2KSx4PXY/Tz93KCJlbnRyaWVzIik6TDp2b2lkIDAsRT0iQXJyYXkiPT10P2suZW50cmllc3x8TTpNO2lmKAovLyBGaXggbmF0aXZlCkUmJihSPWwoRS5jYWxsKG5ldyBlKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmUi5uZXh0JiYoCi8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKZihSLFMsITApLAovLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKbnx8cyhSLGQpfHxhKFIsZCx5KSksCi8vIGZpeCBBcnJheSN7dmFsdWVzLCBAQGl0ZXJhdG9yfS5uYW1lIGluIFY4IC8gRkYKTyYmTSYmInZhbHVlcyIhPT1NLm5hbWUmJihQPSEwLEw9ZnVuY3Rpb24oKXtyZXR1cm4gTS5jYWxsKHRoaXMpfSksCi8vIERlZmluZSBpdGVyYXRvcgpuJiYhYnx8IXAmJiFQJiZrW2RdfHxhKGssZCxMKSwKLy8gUGx1ZyBmb3IgbGlicmFyeQp1W3RdPUwsdVtTXT15LHYpaWYobT17dmFsdWVzOk8/TDp3KCJ2YWx1ZXMiKSxrZXlzOmc/TDp3KCJrZXlzIiksZW50cmllczp4fSxiKWZvcihfIGluIG0pXyBpbiBrfHxvKGssXyxtW19dKTtlbHNlIGkoaS5QK2kuRioocHx8UCksdCxtKTtyZXR1cm4gbX19LC8qIDE4MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPSFyKDQzKSYmIXIoNjYpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyKDEyOSkoImRpdiIpLCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwvKiAxODIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1yKDU3KX0sLyogMTgzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU4KSxpPXIoNDQpLG89cig0MTUpKCExKSxhPXIoMTMzKSgiSUVfUFJPVE8iKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPWkoZSksdT0wLGM9W107Zm9yKHIgaW4gcylyIT1hJiZuKHMscikmJmMucHVzaChyKTsKLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5cwpmb3IoO3QubGVuZ3RoPnU7KW4ocyxyPXRbdSsrXSkmJih+byhjLHIpfHxjLnB1c2gocikpO3JldHVybiBjfX0sLyogMTg0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3MKdmFyIG49cig3NSk7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKZS5leHBvcnRzPU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4iU3RyaW5nIj09bihlKT9lLnNwbGl0KCIiKTpPYmplY3QoZSl9fSwvKiAxODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjEpLmRvY3VtZW50O2UuZXhwb3J0cz1uJiZuLmRvY3VtZW50RWxlbWVudH0sLyogMTg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykKdmFyIG49cig1OCksaT1yKDc2KSxvPXIoMTMzKSgiSUVfUFJPVE8iKSxhPU9iamVjdC5wcm90b3R5cGU7ZS5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24oZSl7cmV0dXJuIGU9aShlKSxuKGUsbyk/ZVtvXToiZnVuY3Rpb24iPT10eXBlb2YgZS5jb25zdHJ1Y3RvciYmZSBpbnN0YW5jZW9mIGUuY29uc3RydWN0b3I/ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6ZSBpbnN0YW5jZW9mIE9iamVjdD9hOm51bGx9fSwvKiAxODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDE3KTtmb3IodmFyIG49cigyMSksaT1yKDU3KSxvPXIoNzQpLGE9cigyMikoInRvU3RyaW5nVGFnIikscz0iQ1NTUnVsZUxpc3QsQ1NTU3R5bGVEZWNsYXJhdGlvbixDU1NWYWx1ZUxpc3QsQ2xpZW50UmVjdExpc3QsRE9NUmVjdExpc3QsRE9NU3RyaW5nTGlzdCxET01Ub2tlbkxpc3QsRGF0YVRyYW5zZmVySXRlbUxpc3QsRmlsZUxpc3QsSFRNTEFsbENvbGxlY3Rpb24sSFRNTENvbGxlY3Rpb24sSFRNTEZvcm1FbGVtZW50LEhUTUxTZWxlY3RFbGVtZW50LE1lZGlhTGlzdCxNaW1lVHlwZUFycmF5LE5hbWVkTm9kZU1hcCxOb2RlTGlzdCxQYWludFJlcXVlc3RMaXN0LFBsdWdpbixQbHVnaW5BcnJheSxTVkdMZW5ndGhMaXN0LFNWR051bWJlckxpc3QsU1ZHUGF0aFNlZ0xpc3QsU1ZHUG9pbnRMaXN0LFNWR1N0cmluZ0xpc3QsU1ZHVHJhbnNmb3JtTGlzdCxTb3VyY2VCdWZmZXJMaXN0LFN0eWxlU2hlZXRMaXN0LFRleHRUcmFja0N1ZUxpc3QsVGV4dFRyYWNrTGlzdCxUb3VjaExpc3QiLnNwbGl0KCIsIiksdT0wO3U8cy5sZW5ndGg7dSsrKXt2YXIgYz1zW3VdLGY9bltjXSxsPWYmJmYucHJvdG90eXBlO2wmJiFsW2FdJiZpKGwsYSxjKSxvW2NdPW8uQXJyYXl9fSwvKiAxODggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKQp2YXIgbj1yKDc1KSxpPXIoMjIpKCJ0b1N0cmluZ1RhZyIpLG89IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxhPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKGUpe319O2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLHM7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj1hKHQ9T2JqZWN0KGUpLGkpKT9yOm8/bih0KToiT2JqZWN0Ij09KHM9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjpzfX0sLyogMTg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcgp2YXIgbj1yKDM5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsaSl7dHJ5e3JldHVybiBpP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKHQpe3ZhciBvPWUucmV0dXJuO3Rocm93IHZvaWQgMCE9PW8mJm4oby5jYWxsKGUpKSx0fX19LC8qIDE5MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3IKdmFyIG49cig3NCksaT1yKDIyKSgiaXRlcmF0b3IiKSxvPUFycmF5LnByb3RvdHlwZTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8b1tpXT09PWUpfX0sLyogMTkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE4OCksaT1yKDIyKSgiaXRlcmF0b3IiKSxvPXIoNzQpO2UuZXhwb3J0cz1yKDEzKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbihlKXtpZih2b2lkIDAhPWUpcmV0dXJuIGVbaV18fGVbIkBAaXRlcmF0b3IiXXx8b1tuKGUpXX19LC8qIDE5MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMy4yMCBTcGVjaWVzQ29uc3RydWN0b3IoTywgZGVmYXVsdENvbnN0cnVjdG9yKQp2YXIgbj1yKDM5KSxpPXIoOTMpLG89cigyMikoInNwZWNpZXMiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcixhPW4oZSkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PWF8fHZvaWQgMD09KHI9bihhKVtvXSk/dDppKHIpfX0sLyogMTkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG8sYT1yKDY1KSxzPXIoNDIzKSx1PXIoMTg1KSxjPXIoMTI5KSxmPXIoMjEpLGw9Zi5wcm9jZXNzLGQ9Zi5zZXRJbW1lZGlhdGUscD1mLmNsZWFySW1tZWRpYXRlLHk9Zi5NZXNzYWdlQ2hhbm5lbCxoPWYuRGlzcGF0Y2gsdj0wLGc9e30sYj1mdW5jdGlvbigpe3ZhciBlPSt0aGlzOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCmlmKGcuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PWdbZV07ZGVsZXRlIGdbZV0sdCgpfX0sbT1mdW5jdGlvbihlKXtiLmNhbGwoZS5kYXRhKX07Ci8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToKZCYmcHx8KGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTthcmd1bWVudHMubGVuZ3RoPnI7KXQucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIGdbKyt2XT1mdW5jdGlvbigpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMKcygiZnVuY3Rpb24iPT10eXBlb2YgZT9lOkZ1bmN0aW9uKGUpLHQpfSxuKHYpLHZ9LHA9ZnVuY3Rpb24oZSl7ZGVsZXRlIGdbZV19LAovLyBOb2RlLmpzIDAuOC0KInByb2Nlc3MiPT1yKDc1KShsKT9uPWZ1bmN0aW9uKGUpe2wubmV4dFRpY2soYShiLGUsMSkpfTpoJiZoLm5vdz9uPWZ1bmN0aW9uKGUpe2gubm93KGEoYixlLDEpKX06eT8oaT1uZXcgeSxvPWkucG9ydDIsaS5wb3J0MS5vbm1lc3NhZ2U9bSxuPWEoby5wb3N0TWVzc2FnZSxvLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8obj1mdW5jdGlvbihlKXtmLnBvc3RNZXNzYWdlKGUrIiIsIioiKX0sZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixtLCExKSk6bj0ib25yZWFkeXN0YXRlY2hhbmdlImluIGMoInNjcmlwdCIpP2Z1bmN0aW9uKGUpe3UuYXBwZW5kQ2hpbGQoYygic2NyaXB0IikpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKGUpfX06ZnVuY3Rpb24oZSl7c2V0VGltZW91dChhKGIsZSwxKSwwKX0pLGUuZXhwb3J0cz17c2V0OmQsY2xlYXI6cH19LC8qIDE5NCAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJue2U6ITEsdjplKCl9fWNhdGNoKGUpe3JldHVybntlOiEwLHY6ZX19fX0sLyogMTk1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM5KSxpPXIoNDIpLG89cigxMzYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKG4oZSksaSh0KSYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIHI9by5mKGUpO3JldHVybigwLHIucmVzb2x2ZSkodCksci5wcm9taXNlfX0sLyogMTk2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIyKSgiaXRlcmF0b3IiKSxpPSExO3RyeXt2YXIgbz1bN11bbl0oKTtvLnJldHVybj1mdW5jdGlvbigpe2k9ITB9LAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbApBcnJheS5mcm9tKG8sZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goZSl7fWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhaSlyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIG89WzddLGE9b1tuXSgpO2EubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOnI9ITB9fSxvW25dPWZ1bmN0aW9uKCl7cmV0dXJuIGF9LGUobyl9Y2F0Y2goZSl7fXJldHVybiByfX0sLyogMTk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0MzIpLF9fZXNNb2R1bGU6ITB9fSwvKiAxOTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCnZhciBuPXIoMTgzKSxpPXIoMTM1KS5jb25jYXQoImxlbmd0aCIsInByb3RvdHlwZSIpO3QuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxpKX19LC8qIDE5OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDU2KSxfX2VzTW9kdWxlOiEwfX0sLyogMjAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDExKSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1mLmdldExvZ2dlcigiQnVzIiksZD1mdW5jdGlvbigpey8qIHByaXZhdGUKICBfbXNnSWQ6IG51bWJlcjsKICBfc3Vic2NyaXB0aW9uczogPHVybDogTXNnTGlzdGVuZXJbXT4KICAgX3Jlc3BvbnNlVGltZU91dDogbnVtYmVyCiAgX3Jlc3BvbnNlQ2FsbGJhY2tzOiA8dXJsK2lkOiAobXNnKSA9PiB2b2lkPgogICAqLwpmdW5jdGlvbiBCdXMoKXsoMCxhLmRlZmF1bHQpKHRoaXMsQnVzKTt2YXIgZT10aGlzO2UuX21zZ0lkPTAsZS5fc3Vic2NyaXB0aW9ucz17fSxlLl9yZXNwb25zZVRpbWVPdXQ9MTVlMywvL2RlZmF1bHQgdG8gM3MKZS5fcmVzcG9uc2VDYWxsYmFja3M9e30sZS5fcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyKCl9LyoqCiAgKiBSZWdpc3RlciBsaXN0ZW5lciB0byByZWNlaXZlIG1lc3NhZ2Ugd2hlbiAibXNnLnRvID09PSB1cmwiLgogICogU3BlY2lhbCB1cmwgIioiIGZvciBkZWZhdWx0IGxpc3RlbmVyIGlzIGFjY2VwdGVkIHRvIGludGVyY2VwdCBhbGwgbWVzc2FnZXMuCiAgKiBAcGFyYW0ge1VSTH0gdXJsIEFkZHJlc3MgdG8gaW50ZXJjZXB0LCB0aGEgaXMgaW4gdGhlIG1lc3NhZ2UgInRvIgogICogQHBhcmFtIHtMaXN0ZW5lcn0gbGlzdGVuZXIgbGlzdGVuZXIKICAqIEByZXR1cm4ge01zZ0xpc3RlbmVyfSBpbnN0YW5jZSBvZiBNc2dMaXN0ZW5lcgogICovCnJldHVybigwLHUuZGVmYXVsdCkoQnVzLFt7a2V5OiJhZGRMaXN0ZW5lciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49bmV3IHAoci5fc3Vic2NyaXB0aW9ucyxlLHQpLGk9ci5fc3Vic2NyaXB0aW9uc1tlXTtyZXR1cm4gaXx8KGk9W10sci5fc3Vic2NyaXB0aW9uc1tlXT1pKSxpLnB1c2gobiksbn19LHtrZXk6ImFkZFJlc3BvbnNlTGlzdGVuZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tlK3RdPXJ9fSx7a2V5OiJyZW1vdmVSZXNwb25zZUxpc3RlbmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe2RlbGV0ZSB0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tlK3RdfX0se2tleToicmVtb3ZlQWxsTGlzdGVuZXJzT2YiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW2VdfX0se2tleToiYmluZCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT10aGlzO3JldHVybnt0aGlzTGlzdGVuZXI6aS5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKGUpe3IucG9zdE1lc3NhZ2UoZSl9KSx0YXJnZXRMaXN0ZW5lcjpyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7aS5wb3N0TWVzc2FnZShlKX0pLHVuYmluZDpmdW5jdGlvbigpe24udGhpc0xpc3RlbmVyLnJlbW92ZSgpLG4udGFyZ2V0TGlzdGVuZXIucmVtb3ZlKCl9fX19LHtrZXk6Il9wdWJsaXNoT25EZWZhdWx0Iix2YWx1ZTpmdW5jdGlvbihlKXsKLy9pcyB0aGVyZSBhbnkgIioiIChkZWZhdWx0KSBsaXN0ZW5lcnM/CnZhciB0PXRoaXMuX3N1YnNjcmlwdGlvbnNbIioiXTt0JiZ0aGlzLl9wdWJsaXNoT24odCxlKX19LHtrZXk6Il9wdWJsaXNoT24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuX2NhbGxiYWNrKHQpfSl9fSx7a2V5OiJfcmVzcG9uc2VDYWxsYmFjayIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzOwovL2F1dG9tYXRpYyBtYW5hZ2VtZW50IG9mIHJlc3BvbnNlIGhhbmRsZXJzCmlmKHQpe3ZhciBuPWUuZnJvbStlLmlkO3IuX3Jlc3BvbnNlQ2FsbGJhY2tzW25dPXQsc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciB0PXIuX3Jlc3BvbnNlQ2FsbGJhY2tzW25dO2lmKGRlbGV0ZSByLl9yZXNwb25zZUNhbGxiYWNrc1tuXSx0KXt0KHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixib2R5Ontjb2RlOjQwOCxkZXNjOiJSZXNwb25zZSB0aW1lb3V0ISIsdmFsdWU6ZX19KX19LHIuX3Jlc3BvbnNlVGltZU91dCl9fX0se2tleToiX29uUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoInJlc3BvbnNlIj09PWUudHlwZSl7dmFyIHI9ZS50bytlLmlkLG49dC5fcmVzcG9uc2VDYWxsYmFja3Nbcl07aWYoZS5ib2R5LmNvZGU+PTIwMCYmCi8vaWYgaXQncyBhIHByb3Zpc2lvbmFsIHJlc3BvbnNlLCBkb24ndCBkZWxldGUgcmVzcG9uc2UgbGlzdGVuZXIKZGVsZXRlIHQuX3Jlc3BvbnNlQ2FsbGJhY2tzW3JdLG4pcmV0dXJuIG4oZSksITB9cmV0dXJuITF9fSx7a2V5OiJfb25NZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0Ll9vblJlc3BvbnNlKGUpKXt2YXIgcj10Ll9zdWJzY3JpcHRpb25zW2UudG9dO3I/dC5fcHVibGlzaE9uKHIsZSk6dC5fcHVibGlzaE9uRGVmYXVsdChlKX19fSx7a2V5OiJfZ2VuSWQiLHZhbHVlOmZ1bmN0aW9uKGUpewovL1RPRE86IGhvdyBkbyB3ZSBtYW5hZ2UgbWVzc2FnZSBJRCdzPyBTaG91bGQgaXQgYmUgYSBnbG9iYWwgcnVudGltZSBjb3VudGVyLCBvciBwZXIgVVJMIGFkZHJlc3M/Ci8vR2xvYmFsIGNvdW50ZXIgd2lsbCBub3Qgd29yaywgYmVjYXVzZSB0aGVyZSB3aWxsIGJlIG11bHRpcGxlIE1pbmlCdXMgaW5zdGFuY2VzIQovL1BlciBVUkwsIGNhbiBiZSBhIGxvdCBvZiBkYXRhIHRvIG1haW50YWluIQovL01heWJlIGEgY291bnRlciBwZXIgTWluaUJ1cyBpbnN0YW5jZS4gVGhpcyBpcyB0aGUgYXNzdW1lZCBzb2x1dGlvbiBmb3Igbm93LgplLmlkJiYwIT09ZS5pZHx8KHRoaXMuX21zZ0lkKyssZS5pZD10aGlzLl9tc2dJZCl9fSx7a2V5OiJwb3N0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt9fSx7a2V5OiJwb3N0TWVzc2FnZVdpdGhSZXRyaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxvPTAsYT1mdW5jdGlvbigpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQsaSl7bi5wb3N0TWVzc2FnZShlLGZ1bmN0aW9uKG4pezQwOD09PW4uYm9keS5jb2RlfHw1MDA9PT1uLmJvZHkuY29kZT9pKCk6KGwuaW5mbygiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBtc2cgZGVsaXZlcmVkOiAiLGUpLHIobiksdCgpKX0pfSl9OyFmdW5jdGlvbiB0cnlBZ2Fpbigpe2EoKS50aGVuKGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe2lmKGwud2FybigiW0J1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzXSBNZXNzYWdlIEJvdW5jZWQgKHJldHJ5ICIrbysiKTogJyIsZSksIShvKys8dCkpe3ZhciByPSJbRXJyb3JdIE1lc3NhZ2UgQm91bmNlZCAoZGVsaXZlcnkgYXR0ZW1wdHMgIit0KyIpOiAnIjt0aHJvdyBuZXcgRXJyb3IocitlKX10cnlBZ2FpbigpfSl9KCl9fSx7a2V5OiJfb25Qb3N0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7fX0se2tleToiX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lciIsdmFsdWU6ZnVuY3Rpb24oKXt9fV0pLEJ1c30oKSxwPWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF9zdWJzY3JpcHRpb25zOiA8c3RyaW5nOiBNc2dMaXN0ZW5lcltdPjsKICBfdXJsOiBzdHJpbmc7CiAgX2NhbGxiYWNrOiAobXNnKSA9PiB2b2lkOwogICovCmZ1bmN0aW9uIE1zZ0xpc3RlbmVyKGUsdCxyKXsoMCxhLmRlZmF1bHQpKHRoaXMsTXNnTGlzdGVuZXIpO3ZhciBuPXRoaXM7bi5fc3Vic2NyaXB0aW9ucz1lLG4uX3VybD10LG4uX2NhbGxiYWNrPXJ9cmV0dXJuKDAsdS5kZWZhdWx0KShNc2dMaXN0ZW5lcixbe2tleToicmVtb3ZlIiwvKioKICAgICAqIFJlbW92ZSB0aGlzIGxpc3RlbmVyIGZyb20gdGhlIEJ1cwogICAgICovCnZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuX3N1YnNjcmlwdGlvbnNbZS5fdXJsXTtpZih0KXt2YXIgcj10LmluZGV4T2YoZSk7dC5zcGxpY2UociwxKSwKLy9pZiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzLCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBlbnRpcmVseS4KMD09PXQubGVuZ3RoJiZkZWxldGUgZS5fc3Vic2NyaXB0aW9uc1tlLl91cmxdfX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19XSksTXNnTGlzdGVuZXJ9KCk7dC5kZWZhdWx0PWQsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gdmVyc2lvbjogMC43LjIKLy8gZGF0ZTogVGh1IE5vdiAxNiAyMDE3IDEyOjM1OjAxIEdNVCswMDAwIChXRVQpCi8vIGxpY2VuY2U6IAovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KIWZ1bmN0aW9uKHQscil7ZS5leHBvcnRzPXIoKX0oMCxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKHIpe2lmKHRbcl0pcmV0dXJuIHRbcl0uZXhwb3J0czt2YXIgbj10W3JdPXtpOnIsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtyXS5jYWxsKG4uZXhwb3J0cyxuLG4uZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxuLmw9ITAsbi5leHBvcnRzfXZhciB0PXt9O3JldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLm09ZSxfX3dlYnBhY2tfcmVxdWlyZV9fLmM9dCxfX3dlYnBhY2tfcmVxdWlyZV9fLmQ9ZnVuY3Rpb24oZSx0LHIpe19fd2VicGFja19yZXF1aXJlX18ubyhlLHQpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6cn0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZCh0LCJhIix0KSx0fSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0xODIpfSh7MDpmdW5jdGlvbihlLHQpe3ZhciByPWUuZXhwb3J0cz17dmVyc2lvbjoiMi41LjEifTsibnVtYmVyIj09dHlwZW9mIF9fZSYmKF9fZT1yKX0sMTpmdW5jdGlvbihlLHQpe3ZhciByPWUuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1yKX0sMTA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNiksaT1yKDE1KTtlLmV4cG9ydHM9cigzKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LDExNzpmdW5jdGlvbihlLHQpeyFmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBPYnNlcnZlcihlLHQscixuLGksbyl7ZnVuY3Rpb24gZGVsaXZlcihlLG4pe2lmKGRlbGl2ZXIuZGVsYXk9biwhZGVsaXZlci5wYXVzZSYmcy5jaGFuZ2VzZXQubGVuZ3RoPjApe2lmKCFlKXt2YXIgaT1zLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wfSk7aS5sZW5ndGg+MCYmdChpKX1zLmNoYW5nZXNldD1bXX19dmFyIGEscz10aGlzO3JldHVybiBkZWxpdmVyLnBhdXNlPWksZGVsaXZlci5kZWxheT1vLHMuZ2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIl9fb2JzZXJ2ZXJfXyI9PT10P3M6InVub2JzZXJ2ZSI9PT10P2Z1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC51bm9ic2VydmUoZSksZX06ImRlbGl2ZXIiPT09dD9kZWxpdmVyOmVbdF19LHMudGFyZ2V0PWUscy5jaGFuZ2VzZXQ9W10scy50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19ffHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJzX18iLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMSx2YWx1ZTpbXX0pKSxzLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaCh0KSxzLnRhcmdldC5fX29ic2VydmVyc19fLnB1c2godGhpcyksYT1uZXcgUHJveHkoZSxzKSxkZWxpdmVyKCExLG8pLGF9T2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBQcm94eXx8KE9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KG51bGwsImRlbGl2ZXIiKX0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQscil7dmFyIG49ZVt0XSxpPXZvaWQgMD09PW4/ImFkZCI6InVwZGF0ZSI7aWYoZVt0XT1yLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYoIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoaSk+PTApKXt2YXIgbz17b2JqZWN0OmUsbmFtZTp0LHR5cGU6aX0sYT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLHM9dGhpcy5kZWxpdmVyKCk7InVwZGF0ZSI9PT1pJiYoby5vbGRWYWx1ZT1uKSx0aGlzLmNoYW5nZXNldC5wdXNoKG8pLGEmJnMoITEsIm51bWJlciI9PXR5cGVvZiBzLmRlbGF5P3MuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lW3RdO2lmKGRlbGV0ZSBlW3RdLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigiZGVsZXRlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZToiZGVsZXRlIixvbGRWYWx1ZTpyfSxpPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsbz10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLGkmJm8oITEsIm51bWJlciI9PXR5cGVvZiBvLmRlbGF5P28uZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oZSx0LHIpe2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsciksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJyZWNvbmZpZ3VyZSIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZTp0LHR5cGU6InJlY29uZmlndXJlIn0saT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG89dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxpJiZvKCExLCJudW1iZXIiPT10eXBlb2Ygby5kZWxheT9vLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldFByb3RvdHlwZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigic2V0UHJvdG90eXBlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOiJfX3Byb3RvX18iLHR5cGU6InNldFByb3RvdHlwZSIsb2xkVmFsdWU6cn0saT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG89dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxpJiZvKCExLCJudW1iZXIiPT10eXBlb2Ygby5kZWxheT9vLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zPWZ1bmN0aW9uKGUpe2lmKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhlKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApe3ZhciB0PXtvYmplY3Q6ZSx0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyJ9LHI9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxuPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2godCksciYmbighMSwibnVtYmVyIj09dHlwZW9mIG4uZGVsYXk/bi5kZWxheToxMCl9cmV0dXJuITB9LE9iamVjdC5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4saSxvKXtyZXR1cm4gbmV3IE9ic2VydmVyKGUsdCxyLG4saSxvKX0sT2JqZWN0LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe2lmKGUuX19vYnNlcnZlckNhbGxiYWNrc19fKXtpZighdClyZXR1cm4gZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyQ2FsbGJhY2tzX18ubGVuZ3RoKSx2b2lkIGUuX19vYnNlcnZlcnNfXy5zcGxpY2UoMCxlLl9fb2JzZXJ2ZXJzX18ubGVuZ3RoKTtlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7dD09PXImJihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UobiwxKSxkZWxldGUgZS5fX29ic2VydmVyc19fW25dLmNhbGxiYWNrLGUuX19vYnNlcnZlcnNfXy5zcGxpY2UobiwxKSl9KX19LEFycmF5Lm9ic2VydmU9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2lmKCEoZSBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KGUpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCBhcmd1bWVudCB0byBBcnJheS5vYnNlcnZlciBpcyBub3QgYW4gQXJyYXkiKTtyPXJ8fFsiYWRkIiwidXBkYXRlIiwiZGVsZXRlIiwic3BsaWNlIl07dmFyIGE9bmV3IFByb3h5KGUse2dldDpmdW5jdGlvbih0LG4pe3JldHVybiJ1bm9ic2VydmUiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gZT9PYmplY3QudW5vYnNlcnZlKHQsZSk6dC51bm9ic2VydmUoKX06InNwbGljZSI9PT1uP2Z1bmN0aW9uKG4saSl7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIGkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgdHdvIGFyZ3VtZW50cyB0byBBcnJheSBzcGxpY2UgYXJlIG5vdCBudW1iZXIsIG51bWJlciIpO3ZhciBvPXRoaXMuc2xpY2UobixuK2kpLGE9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50cy5sZW5ndGgtMjowLHU9e29iamVjdDplLHR5cGU6InNwbGljZSIsaW5kZXg6bixyZW1vdmVkOm8sYWRkZWRDb3VudDphfTtpZih0LnNwbGljZS5hcHBseSh0LGFyZ3VtZW50cyksci5pbmRleE9mKCJzcGxpY2UiKT49MCl7dmFyIG49MD09PXMuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5sZW5ndGgsYz1zLl9fb2JzZXJ2ZXJfXy5kZWxpdmVyKCk7cy5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2godSksbiYmYyghMSwibnVtYmVyIj09dHlwZW9mIGMuZGVsYXk/Yy5kZWxheToxMCl9fToicHVzaCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGUpfToicG9wIj09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgtMSwxKX06InVuc2hpZnQiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwwLGUpfToic2hpZnQiPT09bj9mdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGljZSgwLDEpfTp0W25dfX0pLHM9T2JqZWN0Lm9ic2VydmUoYSxmdW5jdGlvbihlKXt2YXIgbj1lLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4ibGVuZ3RoIiE9PWUubmFtZSYmImFkZCIhPT1lLm5hbWUmJighcnx8ci5pbmRleE9mKGUudHlwZSk+PTApfSk7bi5sZW5ndGg+MCYmdChuKX0scixuLGksbyk7cmV0dXJuIHN9LEFycmF5LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnVub2JzZXJ2ZSh0KX0pLE9iamVjdC5kZWVwT2JzZXJ2ZT1mdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gcmVvYnNlcnZlKGUscil7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihpKXtpZigoIm9iamVjdCI9PT1uKGVbaV0pfHwiYXJyYXkiPT09bihlW2ldKSkmJiFlW2ldLmhhc093blByb3BlcnR5KCJfX29ic2VydmVyc19fIikpe3ZhciBvPXIuc2xpY2UoMCk7by5wdXNoKGkpLGVbaV09T2JqZWN0LmRlZXBPYnNlcnZlKGVbaV0sdCxvKX19KX1yPXJ8fFtdO3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkubWF0Y2goL1xzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gcmVvYnNlcnZlKGUsciksT2JqZWN0Lm9ic2VydmUoZSxmdW5jdGlvbihlKXtmdW5jdGlvbiByZWN1cnNlKGUsdCxyLGksbyl7aWYoaSBpbnN0YW5jZW9mIE9iamVjdClPYmplY3Qua2V5cyhpKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKCFyfHxyW2FdIT09aVthXSl7dmFyIHM9ciYmdm9pZCAwIT09clthXT9yW2FdOnZvaWQgMCx1PXZvaWQgMD09PXM/ImFkZCI6InVwZGF0ZSIsYz1vKyIuIithO24ucHVzaCh7bmFtZTplLG9iamVjdDp0LHR5cGU6dSxvbGRWYWx1ZTpzLG5ld1ZhbHVlOmlbYV0sa2V5cGF0aDpjfSkscmVjdXJzZShlLHQscyxpW2FdLGMpfX0pO2Vsc2UgaWYociBpbnN0YW5jZW9mIE9iamVjdCl7dmFyIGE9T2JqZWN0LmtleXMocik7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBzPW51bGw9PT1pPyJ1cGRhdGUiOiJkZWxldGUiLHU9bysiLiIrYTtuLnB1c2goe25hbWU6ZSxvYmplY3Q6dCx0eXBlOnMsb2xkVmFsdWU6clthXSxuZXdWYWx1ZTppLGtleXBhdGg6dX0pLHJlY3Vyc2UoZSx0LHJbYV0sdm9pZCAwLHUpfSl9fXZhciBuPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD0oci5sZW5ndGg+MD9yLmpvaW4oIi4iKSsiLiI6IiIpK2UubmFtZTsidXBkYXRlIiE9PWUudHlwZSYmImFkZCIhPT1lLnR5cGV8fHJlb2JzZXJ2ZShlLm9iamVjdCxyKSxuLnB1c2goe25hbWU6ZS5uYW1lLG9iamVjdDplLm9iamVjdCx0eXBlOmUudHlwZSxvbGRWYWx1ZTplLm9sZFZhbHVlLG5ld1ZhbHVlOmUub2JqZWN0W2UubmFtZV0sa2V5cGF0aDp0fSkscmVjdXJzZShlLm5hbWUsZS5vYmplY3QsZS5vbGRWYWx1ZSxlLm9iamVjdFtlLm5hbWVdLHQpfSksdChuKX0pfX0oKX0sMTI6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LDE0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4saSl7cmV0dXJuIGUuY2FsbCh0LHIsbixpKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LDE1OmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0sMTc6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LDE4MjpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LldhdGNoaW5nWW91PXZvaWQgMDt2YXIgbj1yKDE4MyksaT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuV2F0Y2hpbmdZb3U9aS5kZWZhdWx0fSwxODM6ZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKTtyKDExNyk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBXYXRjaGluZ1lvdSgpeygwLGkuZGVmYXVsdCkodGhpcyxXYXRjaGluZ1lvdSksdGhpcy5fd2F0Y2hpbmc9e30sdGhpcy5fb2JzZXJ2ZXJzPVtdfXJldHVybigwLGEuZGVmYXVsdCkoV2F0Y2hpbmdZb3UsW3trZXk6IndhdGNoIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdO3JldHVybiB0aGlzLl93YXRjaGluZ1tlXT1uP09iamVjdC5kZWVwT2JzZXJ2ZSh0LGZ1bmN0aW9uKHQpe3QuZXZlcnkoZnVuY3Rpb24odCl7ci5fZmlyZUV2ZW50KGUsdCl9KX0pOk9iamVjdC5vYnNlcnZlKHQsZnVuY3Rpb24odCl7dC5ldmVyeShmdW5jdGlvbih0KXtyLl9maXJlRXZlbnQoZSx0KX0pfSksdGhpcy5fd2F0Y2hpbmdbZV19fSx7a2V5OiJvYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX29ic2VydmVycy5wdXNoKHtrZXk6ZSxjYWxsYmFjazp0fSl9fSx7a2V5OiJfZmlyZUV2ZW50Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX29ic2VydmVycy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5PT09ZX0pLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5jYWxsYmFjayh0KX0pfX1dKSxXYXRjaGluZ1lvdX0oKTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwxOTpmdW5jdGlvbihlLHQscil7dmFyIG49cig4KSxpPXIoMSkuZG9jdW1lbnQsbz1uKGkpJiZuKGkuY3JlYXRlRWxlbWVudCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvP2kuY3JlYXRlRWxlbWVudChlKTp7fX19LDIwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDgpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLGk7aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTtpZigiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7aWYoIXQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LDM6ZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz0hcigxMikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwzNDpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPSFyKDMpJiYhcigxMikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIoMTkpKCJkaXYiKSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sNDpmdW5jdGlvbihlLHQscil7dmFyIG49cigxKSxpPXIoMCksbz1yKDE0KSxhPXIoMTApLHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1LGMsZixsPWUmcy5GLGQ9ZSZzLkcscD1lJnMuUyx5PWUmcy5QLGg9ZSZzLkIsdj1lJnMuVyxnPWQ/aTppW3RdfHwoaVt0XT17fSksYj1nLnByb3RvdHlwZSxtPWQ/bjpwP25bdF06KG5bdF18fHt9KS5wcm90b3R5cGU7ZCYmKHI9dCk7Zm9yKHUgaW4gcikoYz0hbCYmbSYmdm9pZCAwIT09bVt1XSkmJnUgaW4gZ3x8KGY9Yz9tW3VdOnJbdV0sZ1t1XT1kJiYiZnVuY3Rpb24iIT10eXBlb2YgbVt1XT9yW3VdOmgmJmM/byhmLG4pOnYmJm1bdV09PWY/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxyLG4pe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHQpO2Nhc2UgMjpyZXR1cm4gbmV3IGUodCxyKX1yZXR1cm4gbmV3IGUodCxyLG4pfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHQucHJvdG90eXBlPWUucHJvdG90eXBlLHR9KGYpOnkmJiJmdW5jdGlvbiI9PXR5cGVvZiBmP28oRnVuY3Rpb24uY2FsbCxmKTpmLHkmJigoZy52aXJ0dWFsfHwoZy52aXJ0dWFsPXt9KSlbdV09ZixlJnMuUiYmYiYmIWJbdV0mJmEoYix1LGYpKSl9O3MuRj0xLHMuRz0yLHMuUz00LHMuUD04LHMuQj0xNixzLlc9MzIscy5VPTY0LHMuUj0xMjgsZS5leHBvcnRzPXN9LDQzOmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NCksX19lc01vZHVsZTohMH19LDQ0OmZ1bmN0aW9uKGUsdCxyKXtyKDQ1KTt2YXIgbj1yKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LDQ1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpO24obi5TK24uRiohcigzKSwiT2JqZWN0Iix7ZGVmaW5lUHJvcGVydHk6cig2KS5mfSl9LDU6ZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt0Ll9fZXNNb2R1bGU9ITAsdC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSw2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpLGk9cigzNCksbz1yKDIwKSxhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt0LmY9cigzKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdD1vKHQsITApLG4ociksaSl0cnl7cmV0dXJuIGEoZSx0LHIpfWNhdGNoKGUpe31pZigiZ2V0ImluIHJ8fCJzZXQiaW4gcil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sNzpmdW5jdGlvbihlLHQscil7dmFyIG49cig4KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0sODpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGU/bnVsbCE9PWU6ImZ1bmN0aW9uIj09dHlwZW9mIGV9fSw5OmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoNDMpLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxpLmRlZmF1bHQpKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbihlLHQscil7cmV0dXJuIHQmJmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsdCksciYmZGVmaW5lUHJvcGVydGllcyhlLHIpLGV9fSgpfX0pfSl9LC8qIDIwMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBBbGxvd092ZXJyaWRlcygpeygwLGkuZGVmYXVsdCkodGhpcyxBbGxvd092ZXJyaWRlcyl9cmV0dXJuKDAsYS5kZWZhdWx0KShBbGxvd092ZXJyaWRlcyxbe2tleToiY29tYmluZSIsLyoqCiAgICAqIEdpdmVuIGFuIGFycmF5IG9mIGluZGl2aWR1YWwgYXV0aG9yaXphdGlvbiBkZWNpc2lvbnMsIHByaW9yaXRpemVzIGEgcG9zaXRpdmUgb25lLgogICAgKiBAcGFyYW0gICAge2Jvb2xlYW5bXX0gICBkZWNpc2lvbnMKICAgICogQHJldHVybnMgIHtib29sZWFufQogICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1lLmluZGV4T2YoITApfHwtMT09PWUuaW5kZXhPZighMSkmJiJOb3QgQXBwbGljYWJsZSJ9fV0pLEFsbG93T3ZlcnJpZGVzfSgpO3QuZGVmYXVsdD1zLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBCbG9ja092ZXJyaWRlcygpeygwLGkuZGVmYXVsdCkodGhpcyxCbG9ja092ZXJyaWRlcyl9cmV0dXJuKDAsYS5kZWZhdWx0KShCbG9ja092ZXJyaWRlcyxbe2tleToiY29tYmluZSIsLyoqCiAgICAqIEdpdmVuIGFuIGFycmF5IG9mIGluZGl2aWR1YWwgYXV0aG9yaXNhdGlvbiBkZWNpc2lvbnMsIHByaW9yaXRpc2VzIGEgbmVnYXRpdmUgb25lLgogICAgKiBAcGFyYW0gICAge2Jvb2xlYW5bXX0gICBkZWNpc2lvbnMKICAgICogQHJldHVybnMgIHtib29sZWFufQogICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1lLmluZGV4T2YoITEpJiYoLTEhPT1lLmluZGV4T2YoITApfHwiTm90IEFwcGxpY2FibGUiKX19XSksQmxvY2tPdmVycmlkZXN9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1mdW5jdGlvbigpe2Z1bmN0aW9uIEZpcnN0QXBwbGljYWJsZSgpeygwLGkuZGVmYXVsdCkodGhpcyxGaXJzdEFwcGxpY2FibGUpfXJldHVybigwLGEuZGVmYXVsdCkoRmlyc3RBcHBsaWNhYmxlLFt7a2V5OiJjb21iaW5lIiwvKioKICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBhdXRob3Jpc2F0aW9uIGRlY2lzaW9ucywgcmV0dXJucyB0aGUgZmlyc3Qgb25lIGRpZmZlcmVudCBmcm9tICdOb3QgQXBwbGljYWJsZScsIGVpdGhlciBwb3NpdGl2ZSBvciBuZWdhdGl2ZS4KICAgICogQHBhcmFtICAgIHtib29sZWFuW119ICAgICBkZWNpc2lvbnMKICAgICogQHJldHVybnMgIHtib29sZWFufQogICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpaWYoIk5vdCBBcHBsaWNhYmxlIiE9PWVbdF0pcmV0dXJuIGVbdF07cmV0dXJuIk5vdCBBcHBsaWNhYmxlIn19XSksRmlyc3RBcHBsaWNhYmxlfSgpO3QuZGVmYXVsdD1zLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDk1KSxfX2VzTW9kdWxlOiEwfX0sLyogMjA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDExKSx1PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0ocyksYz11LmdldExvZ2dlcigiU3luU3Vic2NyaXB0aW9uIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIFN1YnNjcmlwdGlvbihlLHQscixuLG8peygwLGkuZGVmYXVsdCkodGhpcyxTdWJzY3JpcHRpb24pO3ZhciBhPXRoaXMscz1yKyIvY2hpbGRyZW4vIix1PXIrIi9jaGFuZ2VzIjsKLy9wcm9jZXNzIGRlbGV0ZSBtZXNzYWdlCmEuX2RlbGV0ZUxpc3RlbmVyPWUuYWRkTGlzdGVuZXIodSxmdW5jdGlvbihuKXtpZigiZGVsZXRlIj09PW4udHlwZSl7Yy5sb2coIlN1YnNjcmlwdGlvbi1ERUxFVEU6ICIsbik7Ci8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byBhbGwgc3Vic2NyaWJlcnMKdmFyIGk9e3R5cGU6ImRlbGV0ZSIsZnJvbTpuLmZyb20sdG86dCxib2R5OntpZGVudGl0eTpuLmJvZHkuaWRlbnRpdHkscmVzb3VyY2U6cn19OwovL3NlbmQgZGVsZXRlIHRvIGh5cGVydHkKZS5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpe2MubG9nKCJTdWJzY3JpcHRpb24tREVMRVRFLVJFUExZOiAiLGUpLDIwMD09PWUuYm9keS5jb2RlJiZhLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19KSwKLy9hZGQgY2hhbmdlIHB1Ymxpc2ggYWRkcmVzcyBvciBmb3J3YXJkCmEuX2NoYW5nZUxpc3RlbmVyPW8/ZS5hZGRQdWJsaXNoKHUpOmUuYWRkRm9yd2FyZCh1LHQpLGEuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGMubG9nKCJbU3Vic2NyaXB0aW9uXSAtIGNoaWxkSUQiLG4pLG4uZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj1zK3I7Yy5sb2coIltTdWJzY3JpcHRpb25dIC0gY2hpbGRJRCIscyxuLHIpOwovL2FkZCBjaGlsZHJlbiBwdWJsaXNoIGFkZHJlc3MKdmFyIGk9ZS5hZGRQdWJsaXNoKG4pOwovL2FkZCBzZWxmIGZvcndhcmQgaWYgYW4gb2JzZXJ2ZXIKaWYoYS5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChpKSwhbyl7dmFyIHU9ZS5hZGRGb3J3YXJkKG4sdCk7YS5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaCh1KX19KX1yZXR1cm4oMCxhLmRlZmF1bHQpKFN1YnNjcmlwdGlvbixbe2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9kZWxldGVMaXN0ZW5lci5yZW1vdmUoKSxlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKSxlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KX19XSksU3Vic2NyaXB0aW9ufSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigyMDgpLGUuZXhwb3J0cz1yKDQxMCl9LC8qIDIwOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOy8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwooZnVuY3Rpb24oZSl7ZnVuY3Rpb24gZGVmaW5lKGUscixuKXtlW3JdfHxPYmplY3RbdF0oZSxyLHt3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITAsdmFsdWU6bn0pfWlmKHIoMjA5KSxyKDQwNikscig0MDcpLGUuX2JhYmVsUG9seWZpbGwpdGhyb3cgbmV3IEVycm9yKCJvbmx5IG9uZSBpbnN0YW5jZSBvZiBiYWJlbC1wb2x5ZmlsbCBpcyBhbGxvd2VkIik7ZS5fYmFiZWxQb2x5ZmlsbD0hMDt2YXIgdD0iZGVmaW5lUHJvcGVydHkiO2RlZmluZShTdHJpbmcucHJvdG90eXBlLCJwYWRMZWZ0IiwiIi5wYWRTdGFydCksZGVmaW5lKFN0cmluZy5wcm90b3R5cGUsInBhZFJpZ2h0IiwiIi5wYWRFbmQpLCJwb3AscmV2ZXJzZSxzaGlmdCxrZXlzLHZhbHVlcyxlbnRyaWVzLGluZGV4T2YsZXZlcnksc29tZSxmb3JFYWNoLG1hcCxmaWx0ZXIsZmluZCxmaW5kSW5kZXgsaW5jbHVkZXMsam9pbixzbGljZSxjb25jYXQscHVzaCxzcGxpY2UsdW5zaGlmdCxzb3J0LGxhc3RJbmRleE9mLHJlZHVjZSxyZWR1Y2VSaWdodCxjb3B5V2l0aGluLGZpbGwiLnNwbGl0KCIsIikuZm9yRWFjaChmdW5jdGlvbihlKXtbXVtlXSYmZGVmaW5lKEFycmF5LGUsRnVuY3Rpb24uY2FsbC5iaW5kKFtdW2VdKSl9KX0pLmNhbGwodCxyKDE0NCkpfSwvKiAyMDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMjEwKSxyKDIxMikscigyMTMpLHIoMjE0KSxyKDIxNSkscigyMTYpLHIoMjE3KSxyKDIxOCkscigyMTkpLHIoMjIwKSxyKDIyMSkscigyMjIpLHIoMjIzKSxyKDIyNCkscigyMjUpLHIoMjI2KSxyKDIyOCkscigyMjkpLHIoMjMwKSxyKDIzMSkscigyMzIpLHIoMjMzKSxyKDIzNCkscigyMzUpLHIoMjM2KSxyKDIzNykscigyMzgpLHIoMjM5KSxyKDI0MCkscigyNDEpLHIoMjQyKSxyKDI0MykscigyNDQpLHIoMjQ1KSxyKDI0NikscigyNDcpLHIoMjQ4KSxyKDI0OSkscigyNTApLHIoMjUxKSxyKDI1MikscigyNTMpLHIoMjU0KSxyKDI1NSkscigyNTYpLHIoMjU3KSxyKDI1OCkscigyNTkpLHIoMjYwKSxyKDI2MSkscigyNjIpLHIoMjYzKSxyKDI2NCkscigyNjUpLHIoMjY2KSxyKDI2NykscigyNjgpLHIoMjY5KSxyKDI3MCkscigyNzEpLHIoMjcyKSxyKDI3MykscigyNzQpLHIoMjc1KSxyKDI3NikscigyNzcpLHIoMjc4KSxyKDI3OSkscigyODApLHIoMjgxKSxyKDI4MikscigyODMpLHIoMjg0KSxyKDI4NSkscigyODYpLHIoMjg3KSxyKDI4OCkscigyOTApLHIoMjkxKSxyKDI5MykscigyOTQpLHIoMjk1KSxyKDI5NikscigyOTcpLHIoMjk4KSxyKDI5OSkscigzMDEpLHIoMzAyKSxyKDMwMykscigzMDQpLHIoMzA1KSxyKDMwNikscigzMDcpLHIoMzA4KSxyKDMwOSkscigzMTApLHIoMzExKSxyKDMxMikscigzMTMpLHIoMTIxKSxyKDMxNCkscigzMTUpLHIoMTYzKSxyKDMxNikscigzMTcpLHIoMzE4KSxyKDMxOSkscigzMjApLHIoMTY2KSxyKDE2OCkscigxNjkpLHIoMzIxKSxyKDMyMikscigzMjMpLHIoMzI0KSxyKDMyNSkscigzMjYpLHIoMzI3KSxyKDMyOCkscigzMjkpLHIoMzMwKSxyKDMzMSkscigzMzIpLHIoMzMzKSxyKDMzNCkscigzMzUpLHIoMzM2KSxyKDMzNykscigzMzgpLHIoMzM5KSxyKDM0MCkscigzNDEpLHIoMzQyKSxyKDM0MykscigzNDQpLHIoMzQ1KSxyKDM0NikscigzNDcpLHIoMzQ4KSxyKDM0OSkscigzNTApLHIoMzUxKSxyKDM1MikscigzNTMpLHIoMzU0KSxyKDM1NSkscigzNTYpLHIoMzU3KSxyKDM1OCkscigzNTkpLHIoMzYwKSxyKDM2MSkscigzNjIpLHIoMzYzKSxyKDM2NCkscigzNjUpLHIoMzY2KSxyKDM2NykscigzNjgpLHIoMzY5KSxyKDM3MCkscigzNzEpLHIoMzcyKSxyKDM3MykscigzNzQpLHIoMzc1KSxyKDM3NikscigzNzcpLHIoMzc4KSxyKDM3OSkscigzODApLHIoMzgxKSxyKDM4MikscigzODMpLHIoMzg0KSxyKDM4NSkscigzODYpLHIoMzg3KSxyKDM4OCkscigzODkpLHIoMzkwKSxyKDM5MSkscigzOTIpLHIoMzkzKSxyKDM5NCkscigzOTUpLHIoMzk2KSxyKDM5NykscigzOTgpLHIoMzk5KSxyKDQwMCkscig0MDEpLHIoNDAyKSxyKDQwMykscig0MDQpLHIoNDA1KSxlLmV4cG9ydHM9cigzMCl9LC8qIDIxMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltCnZhciBuPXIoNCksaT1yKDE3KSxvPXIoOCksYT1yKDApLHM9cigxOSksdT1yKDQwKS5LRVksYz1yKDUpLGY9cig3OCksbD1yKDYxKSxkPXIoNDcpLHA9cig3KSx5PXIoMTQ2KSxoPXIoMTAxKSx2PXIoMjExKSxnPXIoODEpLGI9cigzKSxtPXIoMjMpLF89cigzMSksUj1yKDQ2KSx3PXIoNTEpLFM9cigxNDkpLE89cigyNCksUD1yKDkpLGs9cig0OSksTT1PLmYsTD1QLmYseD1TLmYsRT1uLlN5bWJvbCxEPW4uSlNPTixVPUQmJkQuc3RyaW5naWZ5LEE9cCgiX2hpZGRlbiIpLGo9cCgidG9QcmltaXRpdmUiKSxJPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLEM9Zigic3ltYm9sLXJlZ2lzdHJ5IiksVD1mKCJzeW1ib2xzIiksTj1mKCJvcC1zeW1ib2xzIiksRj1PYmplY3QucHJvdG90eXBlLHE9ImZ1bmN0aW9uIj09dHlwZW9mIEUsSD1uLlFPYmplY3QsQj0hSHx8IUgucHJvdG90eXBlfHwhSC5wcm90b3R5cGUuZmluZENoaWxkLEc9byYmYyhmdW5jdGlvbigpe3JldHVybiA3IT13KEwoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49TShGLHQpO24mJmRlbGV0ZSBGW3RdLEwoZSx0LHIpLG4mJmUhPT1GJiZMKEYsdCxuKX06TCxLPWZ1bmN0aW9uKGUpe3ZhciB0PVRbZV09dyhFLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSx0fSxWPXEmJiJzeW1ib2wiPT10eXBlb2YgRS5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRX0sVz1mdW5jdGlvbihlLHQscil7cmV0dXJuIGU9PT1GJiZXKE4sdCxyKSxiKGUpLHQ9Xyh0LCEwKSxiKHIpLGkoVCx0KT8oci5lbnVtZXJhYmxlPyhpKGUsQSkmJmVbQV1bdF0mJihlW0FdW3RdPSExKSxyPXcocix7ZW51bWVyYWJsZTpSKDAsITEpfSkpOihpKGUsQSl8fEwoZSxBLFIoMSx7fSkpLGVbQV1bdF09ITApLEcoZSx0LHIpKTpMKGUsdCxyKX0sWT1mdW5jdGlvbihlLHQpe2IoZSk7Zm9yKHZhciByLG49dih0PW0odCkpLGk9MCxvPW4ubGVuZ3RoO28+aTspVyhlLHI9bltpKytdLHRbcl0pO3JldHVybiBlfSxKPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/dyhlKTpZKHcoZSksdCl9LHo9ZnVuY3Rpb24oZSl7dmFyIHQ9SS5jYWxsKHRoaXMsZT1fKGUsITApKTtyZXR1cm4hKHRoaXM9PT1GJiZpKFQsZSkmJiFpKE4sZSkpJiYoISh0fHwhaSh0aGlzLGUpfHwhaShULGUpfHxpKHRoaXMsQSkmJnRoaXNbQV1bZV0pfHx0KX0sJD1mdW5jdGlvbihlLHQpe2lmKGU9bShlKSx0PV8odCwhMCksZSE9PUZ8fCFpKFQsdCl8fGkoTix0KSl7dmFyIHI9TShlLHQpO3JldHVybiFyfHwhaShULHQpfHxpKGUsQSkmJmVbQV1bdF18fChyLmVudW1lcmFibGU9ITApLHJ9fSxYPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXgobShlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShULHQ9cltvKytdKXx8dD09QXx8dD09dXx8bi5wdXNoKHQpO3JldHVybiBufSxaPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPWU9PT1GLG49eChyP046bShlKSksbz1bXSxhPTA7bi5sZW5ndGg+YTspIWkoVCx0PW5bYSsrXSl8fHImJiFpKEYsdCl8fG8ucHVzaChUW3RdKTtyZXR1cm4gb307Ci8vIDE5LjQuMS4xIFN5bWJvbChbZGVzY3JpcHRpb25dKQpxfHwoRT1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBFKXRocm93IFR5cGVFcnJvcigiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yISIpO3ZhciBlPWQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApLHQ9ZnVuY3Rpb24ocil7dGhpcz09PUYmJnQuY2FsbChOLHIpLGkodGhpcyxBKSYmaSh0aGlzW0FdLGUpJiYodGhpc1tBXVtlXT0hMSksRyh0aGlzLGUsUigxLHIpKX07cmV0dXJuIG8mJkImJkcoRixlLHtjb25maWd1cmFibGU6ITAsc2V0OnR9KSxLKGUpfSxzKEUucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLE8uZj0kLFAuZj1XLHIoNTIpLmY9Uy5mPVgscig3MSkuZj16LHIoODApLmY9WixvJiYhcig0OCkmJnMoRiwicHJvcGVydHlJc0VudW1lcmFibGUiLHosITApLHkuZj1mdW5jdGlvbihlKXtyZXR1cm4gSyhwKGUpKX0pLGEoYS5HK2EuVythLkYqIXEse1N5bWJvbDpFfSk7Zm9yKHZhciBRPSJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxlZT0wO1EubGVuZ3RoPmVlOylwKFFbZWUrK10pO2Zvcih2YXIgdGU9ayhwLnN0b3JlKSxyZT0wO3RlLmxlbmd0aD5yZTspaCh0ZVtyZSsrXSk7YShhLlMrYS5GKiFxLCJTeW1ib2wiLHsKLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpCmZvcjpmdW5jdGlvbihlKXtyZXR1cm4gaShDLGUrPSIiKT9DW2VdOkNbZV09RShlKX0sCi8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQprZXlGb3I6ZnVuY3Rpb24oZSl7aWYoIVYoZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBzeW1ib2whIik7Zm9yKHZhciB0IGluIEMpaWYoQ1t0XT09PWUpcmV0dXJuIHR9LHVzZVNldHRlcjpmdW5jdGlvbigpe0I9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe0I9ITF9fSksYShhLlMrYS5GKiFxLCJPYmplY3QiLHsKLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQpjcmVhdGU6SiwKLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCmRlZmluZVByb3BlcnR5OlcsCi8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCmRlZmluZVByb3BlcnRpZXM6WSwKLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQpnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6JCwKLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKZ2V0T3duUHJvcGVydHlOYW1lczpYLAovLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCmdldE93blByb3BlcnR5U3ltYm9sczpafSksCi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQpEJiZhKGEuUythLkYqKCFxfHxjKGZ1bmN0aW9uKCl7dmFyIGU9RSgpOwovLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQovLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwKLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKcmV0dXJuIltudWxsXSIhPVUoW2VdKXx8Int9IiE9VSh7YTplfSl8fCJ7fSIhPVUoT2JqZWN0KGUpKX0pKSwiSlNPTiIse3N0cmluZ2lmeTpmdW5jdGlvbihlKXtpZih2b2lkIDAhPT1lJiYhVihlKSl7Zm9yKC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQKdmFyIHQscixuPVtlXSxpPTE7YXJndW1lbnRzLmxlbmd0aD5pOyluLnB1c2goYXJndW1lbnRzW2krK10pO3JldHVybiB0PW5bMV0sImZ1bmN0aW9uIj09dHlwZW9mIHQmJihyPXQpLCFyJiZnKHQpfHwodD1mdW5jdGlvbihlLHQpe2lmKHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLCFWKHQpKXJldHVybiB0fSksblsxXT10LFUuYXBwbHkoRCxuKX19fSksCi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludCkKRS5wcm90b3R5cGVbal18fHIoMTgpKEUucHJvdG90eXBlLGosRS5wcm90b3R5cGUudmFsdWVPZiksCi8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10KbChFLCJTeW1ib2wiKSwKLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXQpsKE1hdGgsIk1hdGgiLCEwKSwKLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ10KbChuLkpTT04sIkpTT04iLCEwKX0sLyogMjExICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHMKdmFyIG49cig0OSksaT1yKDgwKSxvPXIoNzEpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uKGUpLHI9aS5mO2lmKHIpZm9yKHZhciBhLHM9cihlKSx1PW8uZixjPTA7cy5sZW5ndGg+YzspdS5jYWxsKGUsYT1zW2MrK10pJiZ0LnB1c2goYSk7cmV0dXJuIHR9fSwvKiAyMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCk7Ci8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQpuKG4uUywiT2JqZWN0Iix7Y3JlYXRlOnIoNTEpfSl9LC8qIDIxMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKTsKLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKbihuLlMrbi5GKiFyKDgpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0eTpyKDkpLmZ9KX0sLyogMjE0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApOwovLyAxOS4xLjIuMyAvIDE1LjIuMy43IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCm4obi5TK24uRiohcig4KSwiT2JqZWN0Iix7ZGVmaW5lUHJvcGVydGllczpyKDE0OCl9KX0sLyogMjE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQp2YXIgbj1yKDIzKSxpPXIoMjQpLmY7cigzNCkoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShuKGUpLHQpfX0pfSwvKiAyMTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykKdmFyIG49cigxNCksaT1yKDI1KTtyKDM0KSgiZ2V0UHJvdG90eXBlT2YiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBpKG4oZSkpfX0pfSwvKiAyMTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTykKdmFyIG49cigxNCksaT1yKDQ5KTtyKDM0KSgia2V5cyIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGkobihlKSl9fSl9LC8qIDIxOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCnIoMzQpKCJnZXRPd25Qcm9wZXJ0eU5hbWVzIixmdW5jdGlvbigpe3JldHVybiByKDE0OSkuZn0pfSwvKiAyMTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuNSBPYmplY3QuZnJlZXplKE8pCnZhciBuPXIoNiksaT1yKDQwKS5vbkZyZWV6ZTtyKDM0KSgiZnJlZXplIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUmJm4odCk/ZShpKHQpKTp0fX0pfSwvKiAyMjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTcgT2JqZWN0LnNlYWwoTykKdmFyIG49cig2KSxpPXIoNDApLm9uRnJlZXplO3IoMzQpKCJzZWFsIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUmJm4odCk/ZShpKHQpKTp0fX0pfSwvKiAyMjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTUgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKE8pCnZhciBuPXIoNiksaT1yKDQwKS5vbkZyZWV6ZTtyKDM0KSgicHJldmVudEV4dGVuc2lvbnMiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKGkodCkpOnR9fSl9LC8qIDIyMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xMiBPYmplY3QuaXNGcm96ZW4oTykKdmFyIG49cig2KTtyKDM0KSgiaXNGcm96ZW4iLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4hbih0KXx8ISFlJiZlKHQpfX0pfSwvKiAyMjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTMgT2JqZWN0LmlzU2VhbGVkKE8pCnZhciBuPXIoNik7cigzNCkoImlzU2VhbGVkIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIW4odCl8fCEhZSYmZSh0KX19KX0sLyogMjI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjExIE9iamVjdC5pc0V4dGVuc2libGUoTykKdmFyIG49cig2KTtyKDM0KSgiaXNFeHRlbnNpYmxlIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuISFuKHQpJiYoIWV8fGUodCkpfX0pfSwvKiAyMjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKQp2YXIgbj1yKDApO24obi5TK24uRiwiT2JqZWN0Iix7YXNzaWduOnIoMTUwKX0pfSwvKiAyMjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjMuMTAgT2JqZWN0LmlzKHZhbHVlMSwgdmFsdWUyKQp2YXIgbj1yKDApO24obi5TLCJPYmplY3QiLHtpczpyKDIyNyl9KX0sLyogMjI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIDcuMi45IFNhbWVWYWx1ZSh4LCB5KQplLmV4cG9ydHM9T2JqZWN0LmlzfHxmdW5jdGlvbihlLHQpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCnJldHVybiBlPT09dD8wIT09ZXx8MS9lPT0xL3Q6ZSE9ZSYmdCE9dH19LC8qIDIyOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xOSBPYmplY3Quc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pCnZhciBuPXIoMCk7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOnIoMTA1KS5zZXR9KX0sLyogMjI5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKQp2YXIgbj1yKDcyKSxpPXt9O2lbcig3KSgidG9TdHJpbmdUYWciKV09InoiLGkrIiIhPSJbb2JqZWN0IHpdIiYmcigxOSkoT2JqZWN0LnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgIituKHRoaXMpKyJdIn0sITApfSwvKiAyMzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4yLjMuMiAvIDE1LjMuNC41IEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kKHRoaXNBcmcsIGFyZ3MuLi4pCnZhciBuPXIoMCk7bihuLlAsIkZ1bmN0aW9uIix7YmluZDpyKDE1MSl9KX0sLyogMjMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpLmYsaT1GdW5jdGlvbi5wcm90b3R5cGUsbz0vXlxzKmZ1bmN0aW9uIChbXiAoXSopLzsKLy8gMTkuMi40LjIgbmFtZQoibmFtZSJpbiBpfHxyKDgpJiZuKGksIm5hbWUiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dHJ5e3JldHVybigiIit0aGlzKS5tYXRjaChvKVsxXX1jYXRjaChlKXtyZXR1cm4iIn19fSl9LC8qIDIzMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNiksaT1yKDI1KSxvPXIoNykoImhhc0luc3RhbmNlIiksYT1GdW5jdGlvbi5wcm90b3R5cGU7Ci8vIDE5LjIuMy42IEZ1bmN0aW9uLnByb3RvdHlwZVtAQGhhc0luc3RhbmNlXShWKQpvIGluIGF8fHIoOSkuZihhLG8se3ZhbHVlOmZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0aGlzfHwhbihlKSlyZXR1cm4hMTtpZighbih0aGlzLnByb3RvdHlwZSkpcmV0dXJuIGUgaW5zdGFuY2VvZiB0aGlzOwovLyBmb3IgZW52aXJvbm1lbnQgdy9vIG5hdGl2ZSBgQEBoYXNJbnN0YW5jZWAgbG9naWMgZW5vdWdoIGBpbnN0YW5jZW9mYCwgYnV0IGFkZCB0aGlzOgpmb3IoO2U9aShlKTspaWYodGhpcy5wcm90b3R5cGU9PT1lKXJldHVybiEwO3JldHVybiExfX0pfSwvKiAyMzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDE1Myk7Ci8vIDE4LjIuNSBwYXJzZUludChzdHJpbmcsIHJhZGl4KQpuKG4uRytuLkYqKHBhcnNlSW50IT1pKSx7cGFyc2VJbnQ6aX0pfSwvKiAyMzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDE1NCk7Ci8vIDE4LjIuNCBwYXJzZUZsb2F0KHN0cmluZykKbihuLkcrbi5GKihwYXJzZUZsb2F0IT1pKSx7cGFyc2VGbG9hdDppfSl9LC8qIDIzNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNCksaT1yKDE3KSxvPXIoMjgpLGE9cigxMDcpLHM9cigzMSksdT1yKDUpLGM9cig1MikuZixmPXIoMjQpLmYsbD1yKDkpLmYsZD1yKDYyKS50cmltLHA9bi5OdW1iZXIseT1wLGg9cC5wcm90b3R5cGUsdj0iTnVtYmVyIj09byhyKDUxKShoKSksZz0idHJpbSJpbiBTdHJpbmcucHJvdG90eXBlLGI9ZnVuY3Rpb24oZSl7dmFyIHQ9cyhlLCExKTtpZigic3RyaW5nIj09dHlwZW9mIHQmJnQubGVuZ3RoPjIpe3Q9Zz90LnRyaW0oKTpkKHQsMyk7dmFyIHIsbixpLG89dC5jaGFyQ29kZUF0KDApO2lmKDQzPT09b3x8NDU9PT1vKXtpZig4OD09PShyPXQuY2hhckNvZGVBdCgyKSl8fDEyMD09PXIpcmV0dXJuIE5hTn1lbHNlIGlmKDQ4PT09byl7c3dpdGNoKHQuY2hhckNvZGVBdCgxKSl7Y2FzZSA2NjpjYXNlIDk4Om49MixpPTQ5O2JyZWFrOy8vIGZhc3QgZXF1YWwgL14wYlswMV0rJC9pCmNhc2UgNzk6Y2FzZSAxMTE6bj04LGk9NTU7YnJlYWs7Ly8gZmFzdCBlcXVhbCAvXjBvWzAtN10rJC9pCmRlZmF1bHQ6cmV0dXJuK3R9Zm9yKHZhciBhLHU9dC5zbGljZSgyKSxjPTAsZj11Lmxlbmd0aDtjPGY7YysrKQovLyBwYXJzZUludCBwYXJzZXMgYSBzdHJpbmcgdG8gYSBmaXJzdCB1bmF2YWlsYWJsZSBzeW1ib2wKLy8gYnV0IFRvTnVtYmVyIHNob3VsZCByZXR1cm4gTmFOIGlmIGEgc3RyaW5nIGNvbnRhaW5zIHVuYXZhaWxhYmxlIHN5bWJvbHMKaWYoKGE9dS5jaGFyQ29kZUF0KGMpKTw0OHx8YT5pKXJldHVybiBOYU47cmV0dXJuIHBhcnNlSW50KHUsbil9fXJldHVybit0fTtpZighcCgiIDBvMSIpfHwhcCgiMGIxIil8fHAoIisweDEiKSl7cD1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPDE/MDplLHI9dGhpcztyZXR1cm4gciBpbnN0YW5jZW9mIHAmJih2P3UoZnVuY3Rpb24oKXtoLnZhbHVlT2YuY2FsbChyKX0pOiJOdW1iZXIiIT1vKHIpKT9hKG5ldyB5KGIodCkpLHIscCk6Yih0KX07Zm9yKHZhciBtLF89cig4KT9jKHkpOiJNQVhfVkFMVUUsTUlOX1ZBTFVFLE5hTixORUdBVElWRV9JTkZJTklUWSxQT1NJVElWRV9JTkZJTklUWSxFUFNJTE9OLGlzRmluaXRlLGlzSW50ZWdlcixpc05hTixpc1NhZmVJbnRlZ2VyLE1BWF9TQUZFX0lOVEVHRVIsTUlOX1NBRkVfSU5URUdFUixwYXJzZUZsb2F0LHBhcnNlSW50LGlzSW50ZWdlciIuc3BsaXQoIiwiKSxSPTA7Xy5sZW5ndGg+UjtSKyspaSh5LG09X1tSXSkmJiFpKHAsbSkmJmwocCxtLGYoeSxtKSk7cC5wcm90b3R5cGU9aCxoLmNvbnN0cnVjdG9yPXAscigxOSkobiwiTnVtYmVyIixwKX19LC8qIDIzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDMzKSxvPXIoMTU1KSxhPXIoMTA4KSxzPTEuLnRvRml4ZWQsdT1NYXRoLmZsb29yLGM9WzAsMCwwLDAsMCwwXSxmPSJOdW1iZXIudG9GaXhlZDogaW5jb3JyZWN0IGludm9jYXRpb24hIixsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPS0xLG49dDsrK3I8Njspbis9ZSpjW3JdLGNbcl09biUxZTcsbj11KG4vMWU3KX0sZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9NixyPTA7LS10Pj0wOylyKz1jW3RdLGNbdF09dShyL2UpLHI9ciVlKjFlN30scD1mdW5jdGlvbigpe2Zvcih2YXIgZT02LHQ9IiI7LS1lPj0wOylpZigiIiE9PXR8fDA9PT1lfHwwIT09Y1tlXSl7dmFyIHI9U3RyaW5nKGNbZV0pO3Q9IiI9PT10P3I6dCthLmNhbGwoIjAiLDctci5sZW5ndGgpK3J9cmV0dXJuIHR9LHk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiAwPT09dD9yOnQlMj09MT95KGUsdC0xLHIqZSk6eShlKmUsdC8yLHIpfSxoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZTtyPj00MDk2Oyl0Kz0xMixyLz00MDk2O2Zvcig7cj49MjspdCs9MSxyLz0yO3JldHVybiB0fTtuKG4uUCtuLkYqKCEhcyYmKCIwLjAwMCIhPT04ZS01LnRvRml4ZWQoMyl8fCIxIiE9PS45LnRvRml4ZWQoMCl8fCIxLjI1IiE9PTEuMjU1LnRvRml4ZWQoMil8fCIxMDAwMDAwMDAwMDAwMDAwMTI4IiE9PSgweGRlMGI2YjNhNzY0MDA4MCkudG9GaXhlZCgwKSl8fCFyKDUpKGZ1bmN0aW9uKCl7Ci8vIFY4IH4gQW5kcm9pZCA0LjMtCnMuY2FsbCh7fSl9KSksIk51bWJlciIse3RvRml4ZWQ6ZnVuY3Rpb24oZSl7dmFyIHQscixuLHMsdT1vKHRoaXMsZiksYz1pKGUpLHY9IiIsZz0iMCI7aWYoYzwwfHxjPjIwKXRocm93IFJhbmdlRXJyb3IoZik7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYodSE9dSlyZXR1cm4iTmFOIjtpZih1PD0tMWUyMXx8dT49MWUyMSlyZXR1cm4gU3RyaW5nKHUpO2lmKHU8MCYmKHY9Ii0iLHU9LXUpLHU+MWUtMjEpaWYodD1oKHUqeSgyLDY5LDEpKS02OSxyPXQ8MD91KnkoMiwtdCwxKTp1L3koMix0LDEpLHIqPTQ1MDM1OTk2MjczNzA0OTYsKHQ9NTItdCk+MCl7Zm9yKGwoMCxyKSxuPWM7bj49NzspbCgxZTcsMCksbi09Nztmb3IobCh5KDEwLG4sMSksMCksbj10LTE7bj49MjM7KWQoMTw8MjMpLG4tPTIzO2QoMTw8biksbCgxLDEpLGQoMiksZz1wKCl9ZWxzZSBsKDAsciksbCgxPDwtdCwwKSxnPXAoKSthLmNhbGwoIjAiLGMpO3JldHVybiBjPjA/KHM9Zy5sZW5ndGgsZz12KyhzPD1jPyIwLiIrYS5jYWxsKCIwIixjLXMpK2c6Zy5zbGljZSgwLHMtYykrIi4iK2cuc2xpY2Uocy1jKSkpOmc9ditnLGd9fSl9LC8qIDIzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDUpLG89cigxNTUpLGE9MS4udG9QcmVjaXNpb247bihuLlArbi5GKihpKGZ1bmN0aW9uKCl7Ci8vIElFNy0KcmV0dXJuIjEiIT09YS5jYWxsKDEsdm9pZCAwKX0pfHwhaShmdW5jdGlvbigpewovLyBWOCB+IEFuZHJvaWQgNC4zLQphLmNhbGwoe30pfSkpLCJOdW1iZXIiLHt0b1ByZWNpc2lvbjpmdW5jdGlvbihlKXt2YXIgdD1vKHRoaXMsIk51bWJlciN0b1ByZWNpc2lvbjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIHZvaWQgMD09PWU/YS5jYWxsKHQpOmEuY2FsbCh0LGUpfX0pfSwvKiAyMzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMSBOdW1iZXIuRVBTSUxPTgp2YXIgbj1yKDApO24obi5TLCJOdW1iZXIiLHtFUFNJTE9OOk1hdGgucG93KDIsLTUyKX0pfSwvKiAyMzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMiBOdW1iZXIuaXNGaW5pdGUobnVtYmVyKQp2YXIgbj1yKDApLGk9cig0KS5pc0Zpbml0ZTtuKG4uUywiTnVtYmVyIix7aXNGaW5pdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlJiZpKGUpfX0pfSwvKiAyNDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcikKdmFyIG49cigwKTtuKG4uUywiTnVtYmVyIix7aXNJbnRlZ2VyOnIoMTU2KX0pfSwvKiAyNDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuNCBOdW1iZXIuaXNOYU4obnVtYmVyKQp2YXIgbj1yKDApO24obi5TLCJOdW1iZXIiLHtpc05hTjpmdW5jdGlvbihlKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gZSE9ZX19KX0sLyogMjQyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjUgTnVtYmVyLmlzU2FmZUludGVnZXIobnVtYmVyKQp2YXIgbj1yKDApLGk9cigxNTYpLG89TWF0aC5hYnM7bihuLlMsIk51bWJlciIse2lzU2FmZUludGVnZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSkmJm8oZSk8PTkwMDcxOTkyNTQ3NDA5OTF9fSl9LC8qIDI0MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi42IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSCnZhciBuPXIoMCk7bihuLlMsIk51bWJlciIse01BWF9TQUZFX0lOVEVHRVI6OTAwNzE5OTI1NDc0MDk5MX0pfSwvKiAyNDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMTAgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIKdmFyIG49cigwKTtuKG4uUywiTnVtYmVyIix7TUlOX1NBRkVfSU5URUdFUjotOTAwNzE5OTI1NDc0MDk5MX0pfSwvKiAyNDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDE1NCk7Ci8vIDIwLjEuMi4xMiBOdW1iZXIucGFyc2VGbG9hdChzdHJpbmcpCm4obi5TK24uRiooTnVtYmVyLnBhcnNlRmxvYXQhPWkpLCJOdW1iZXIiLHtwYXJzZUZsb2F0Oml9KX0sLyogMjQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLGk9cigxNTMpOwovLyAyMC4xLjIuMTMgTnVtYmVyLnBhcnNlSW50KHN0cmluZywgcmFkaXgpCm4obi5TK24uRiooTnVtYmVyLnBhcnNlSW50IT1pKSwiTnVtYmVyIix7cGFyc2VJbnQ6aX0pfSwvKiAyNDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMyBNYXRoLmFjb3NoKHgpCnZhciBuPXIoMCksaT1yKDE1Nyksbz1NYXRoLnNxcnQsYT1NYXRoLmFjb3NoO24obi5TK24uRiohKGEmJjcxMD09TWF0aC5mbG9vcihhKE51bWJlci5NQVhfVkFMVUUpKSYmYSgxLzApPT0xLzApLCJNYXRoIix7YWNvc2g6ZnVuY3Rpb24oZSl7cmV0dXJuKGU9K2UpPDE/TmFOOmU+OTQ5MDYyNjUuNjI0MjUxNTY/TWF0aC5sb2coZSkrTWF0aC5MTjI6aShlLTErbyhlLTEpKm8oZSsxKSl9fSl9LC8qIDI0OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gYXNpbmgoZSl7cmV0dXJuIGlzRmluaXRlKGU9K2UpJiYwIT1lP2U8MD8tYXNpbmgoLWUpOk1hdGgubG9nKGUrTWF0aC5zcXJ0KGUqZSsxKSk6ZX0KLy8gMjAuMi4yLjUgTWF0aC5hc2luaCh4KQp2YXIgbj1yKDApLGk9TWF0aC5hc2luaDsKLy8gVG9yIEJyb3dzZXIgYnVnOiBNYXRoLmFzaW5oKDApIC0+IC0wCm4obi5TK24uRiohKGkmJjEvaSgwKT4wKSwiTWF0aCIse2FzaW5oOmFzaW5ofSl9LC8qIDI0OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi43IE1hdGguYXRhbmgoeCkKdmFyIG49cigwKSxpPU1hdGguYXRhbmg7Ci8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hdGFuaCgtMCkgLT4gMApuKG4uUytuLkYqIShpJiYxL2koLTApPDApLCJNYXRoIix7YXRhbmg6ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PShlPStlKT9lOk1hdGgubG9nKCgxK2UpLygxLWUpKS8yfX0pfSwvKiAyNTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuOSBNYXRoLmNicnQoeCkKdmFyIG49cigwKSxpPXIoMTA5KTtuKG4uUywiTWF0aCIse2NicnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZT0rZSkqTWF0aC5wb3coTWF0aC5hYnMoZSksMS8zKX19KX0sLyogMjUxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjExIE1hdGguY2x6MzIoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2NsejMyOmZ1bmN0aW9uKGUpe3JldHVybihlPj4+PTApPzMxLU1hdGguZmxvb3IoTWF0aC5sb2coZSsuNSkqTWF0aC5MT0cyRSk6MzJ9fSl9LC8qIDI1MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xMiBNYXRoLmNvc2goeCkKdmFyIG49cigwKSxpPU1hdGguZXhwO24obi5TLCJNYXRoIix7Y29zaDpmdW5jdGlvbihlKXtyZXR1cm4oaShlPStlKStpKC1lKSkvMn19KX0sLyogMjUzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjE0IE1hdGguZXhwbTEoeCkKdmFyIG49cigwKSxpPXIoMTEwKTtuKG4uUytuLkYqKGkhPU1hdGguZXhwbTEpLCJNYXRoIix7ZXhwbTE6aX0pfSwvKiAyNTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTYgTWF0aC5mcm91bmQoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2Zyb3VuZDpyKDE1OCl9KX0sLyogMjU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjE3IE1hdGguaHlwb3QoW3ZhbHVlMVssIHZhbHVlMlssIOKApiBdXV0pCnZhciBuPXIoMCksaT1NYXRoLmFicztuKG4uUywiTWF0aCIse2h5cG90OmZ1bmN0aW9uKGUsdCl7Zm9yKC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKdmFyIHIsbixvPTAsYT0wLHM9YXJndW1lbnRzLmxlbmd0aCx1PTA7YTxzOylyPWkoYXJndW1lbnRzW2ErK10pLHU8cj8obj11L3Isbz1vKm4qbisxLHU9cik6cj4wPyhuPXIvdSxvKz1uKm4pOm8rPXI7cmV0dXJuIHU9PT0xLzA/MS8wOnUqTWF0aC5zcXJ0KG8pfX0pfSwvKiAyNTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTggTWF0aC5pbXVsKHgsIHkpCnZhciBuPXIoMCksaT1NYXRoLmltdWw7Ci8vIHNvbWUgV2ViS2l0IHZlcnNpb25zIGZhaWxzIHdpdGggYmlnIG51bWJlcnMsIHNvbWUgaGFzIHdyb25nIGFyaXR5Cm4obi5TK24uRipyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuLTUhPWkoNDI5NDk2NzI5NSw1KXx8MiE9aS5sZW5ndGh9KSwiTWF0aCIse2ltdWw6ZnVuY3Rpb24oZSx0KXt2YXIgcj0rZSxuPSt0LGk9NjU1MzUmcixvPTY1NTM1Jm47cmV0dXJuIDB8aSpvKygoNjU1MzUmcj4+PjE2KSpvK2kqKDY1NTM1Jm4+Pj4xNik8PDE2Pj4+MCl9fSl9LC8qIDI1NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4yMSBNYXRoLmxvZzEwKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtsb2cxMDpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5sb2coZSkqTWF0aC5MT0cxMEV9fSl9LC8qIDI1OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4yMCBNYXRoLmxvZzFwKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtsb2cxcDpyKDE1Nyl9KX0sLyogMjU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjIyIE1hdGgubG9nMih4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7bG9nMjpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5sb2coZSkvTWF0aC5MTjJ9fSl9LC8qIDI2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4yOCBNYXRoLnNpZ24oeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse3NpZ246cigxMDkpfSl9LC8qIDI2MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4zMCBNYXRoLnNpbmgoeCkKdmFyIG49cigwKSxpPXIoMTEwKSxvPU1hdGguZXhwOwovLyBWOCBuZWFyIENocm9taXVtIDM4IGhhcyBhIHByb2JsZW0gd2l0aCB2ZXJ5IHNtYWxsIG51bWJlcnMKbihuLlMrbi5GKnIoNSkoZnVuY3Rpb24oKXtyZXR1cm4tMmUtMTchPSFNYXRoLnNpbmgoLTJlLTE3KX0pLCJNYXRoIix7c2luaDpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5hYnMoZT0rZSk8MT8oaShlKS1pKC1lKSkvMjoobyhlLTEpLW8oLWUtMSkpKihNYXRoLkUvMil9fSl9LC8qIDI2MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4zMyBNYXRoLnRhbmgoeCkKdmFyIG49cigwKSxpPXIoMTEwKSxvPU1hdGguZXhwO24obi5TLCJNYXRoIix7dGFuaDpmdW5jdGlvbihlKXt2YXIgdD1pKGU9K2UpLHI9aSgtZSk7cmV0dXJuIHQ9PTEvMD8xOnI9PTEvMD8tMToodC1yKS8obyhlKStvKC1lKSl9fSl9LC8qIDI2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4zNCBNYXRoLnRydW5jKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHt0cnVuYzpmdW5jdGlvbihlKXtyZXR1cm4oZT4wP01hdGguZmxvb3I6TWF0aC5jZWlsKShlKX19KX0sLyogMjY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLGk9cig1MCksbz1TdHJpbmcuZnJvbUNoYXJDb2RlLGE9U3RyaW5nLmZyb21Db2RlUG9pbnQ7Ci8vIGxlbmd0aCBzaG91bGQgYmUgMSwgb2xkIEZGIHByb2JsZW0KbihuLlMrbi5GKighIWEmJjEhPWEubGVuZ3RoKSwiU3RyaW5nIix7Ci8vIDIxLjEuMi4yIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpCmZyb21Db2RlUG9pbnQ6ZnVuY3Rpb24oZSl7Zm9yKC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKdmFyIHQscj1bXSxuPWFyZ3VtZW50cy5sZW5ndGgsYT0wO24+YTspe2lmKHQ9K2FyZ3VtZW50c1thKytdLGkodCwxMTE0MTExKSE9PXQpdGhyb3cgUmFuZ2VFcnJvcih0KyIgaXMgbm90IGEgdmFsaWQgY29kZSBwb2ludCIpO3IucHVzaCh0PDY1NTM2P28odCk6byg1NTI5NisoKHQtPTY1NTM2KT4+MTApLHQlMTAyNCs1NjMyMCkpfXJldHVybiByLmpvaW4oIiIpfX0pfSwvKiAyNjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDIzKSxvPXIoMTApO24obi5TLCJTdHJpbmciLHsKLy8gMjEuMS4yLjQgU3RyaW5nLnJhdyhjYWxsU2l0ZSwgLi4uc3Vic3RpdHV0aW9ucykKcmF3OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1pKGUucmF3KSxyPW8odC5sZW5ndGgpLG49YXJndW1lbnRzLmxlbmd0aCxhPVtdLHM9MDtyPnM7KWEucHVzaChTdHJpbmcodFtzKytdKSksczxuJiZhLnB1c2goU3RyaW5nKGFyZ3VtZW50c1tzXSkpO3JldHVybiBhLmpvaW4oIiIpfX0pfSwvKiAyNjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMS4zLjI1IFN0cmluZy5wcm90b3R5cGUudHJpbSgpCnIoNjIpKCJ0cmltIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLDMpfX0pfSwvKiAyNjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDExMSkoITApOwovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCnIoMTEyKShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksLy8gdGFyZ2V0CnRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0sLyogMjY4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTExKSghMSk7bihuLlAsIlN0cmluZyIsewovLyAyMS4xLjMuMyBTdHJpbmcucHJvdG90eXBlLmNvZGVQb2ludEF0KHBvcykKY29kZVBvaW50QXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlKX19KX0sLyogMjY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIxLjEuMy42IFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGgoc2VhcmNoU3RyaW5nIFssIGVuZFBvc2l0aW9uXSkKdmFyIG49cigwKSxpPXIoMTApLG89cigxMTQpLGE9IiIuZW5kc1dpdGg7bihuLlArbi5GKnIoMTE1KSgiZW5kc1dpdGgiKSwiU3RyaW5nIix7ZW5kc1dpdGg6ZnVuY3Rpb24oZSl7dmFyIHQ9byh0aGlzLGUsImVuZHNXaXRoIikscj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxuPWkodC5sZW5ndGgpLHM9dm9pZCAwPT09cj9uOk1hdGgubWluKGkociksbiksdT1TdHJpbmcoZSk7cmV0dXJuIGE/YS5jYWxsKHQsdSxzKTp0LnNsaWNlKHMtdS5sZW5ndGgscyk9PT11fX0pfSwvKiAyNzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMS4zLjcgU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyhzZWFyY2hTdHJpbmcsIHBvc2l0aW9uID0gMCkKdmFyIG49cigwKSxpPXIoMTE0KTtuKG4uUCtuLkYqcigxMTUpKCJpbmNsdWRlcyIpLCJTdHJpbmciLHtpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4hIX5pKHRoaXMsZSwiaW5jbHVkZXMiKS5pbmRleE9mKGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pfSwvKiAyNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCk7bihuLlAsIlN0cmluZyIsewovLyAyMS4xLjMuMTMgU3RyaW5nLnByb3RvdHlwZS5yZXBlYXQoY291bnQpCnJlcGVhdDpyKDEwOCl9KX0sLyogMjcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIxLjEuMy4xOCBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGgoc2VhcmNoU3RyaW5nIFssIHBvc2l0aW9uIF0pCnZhciBuPXIoMCksaT1yKDEwKSxvPXIoMTE0KSxhPSIiLnN0YXJ0c1dpdGg7bihuLlArbi5GKnIoMTE1KSgic3RhcnRzV2l0aCIpLCJTdHJpbmciLHtzdGFydHNXaXRoOmZ1bmN0aW9uKGUpe3ZhciB0PW8odGhpcyxlLCJzdGFydHNXaXRoIikscj1pKE1hdGgubWluKGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLHQubGVuZ3RoKSksbj1TdHJpbmcoZSk7cmV0dXJuIGE/YS5jYWxsKHQsbixyKTp0LnNsaWNlKHIscituLmxlbmd0aCk9PT1ufX0pfSwvKiAyNzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMiBTdHJpbmcucHJvdG90eXBlLmFuY2hvcihuYW1lKQpyKDIwKSgiYW5jaG9yIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodGhpcywiYSIsIm5hbWUiLHQpfX0pfSwvKiAyNzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMyBTdHJpbmcucHJvdG90eXBlLmJpZygpCnIoMjApKCJiaWciLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsImJpZyIsIiIsIiIpfX0pfSwvKiAyNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNCBTdHJpbmcucHJvdG90eXBlLmJsaW5rKCkKcigyMCkoImJsaW5rIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJibGluayIsIiIsIiIpfX0pfSwvKiAyNzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNSBTdHJpbmcucHJvdG90eXBlLmJvbGQoKQpyKDIwKSgiYm9sZCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiYiIsIiIsIiIpfX0pfSwvKiAyNzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNiBTdHJpbmcucHJvdG90eXBlLmZpeGVkKCkKcigyMCkoImZpeGVkIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJ0dCIsIiIsIiIpfX0pfSwvKiAyNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNyBTdHJpbmcucHJvdG90eXBlLmZvbnRjb2xvcihjb2xvcikKcigyMCkoImZvbnRjb2xvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsImZvbnQiLCJjb2xvciIsdCl9fSl9LC8qIDI3OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy44IFN0cmluZy5wcm90b3R5cGUuZm9udHNpemUoc2l6ZSkKcigyMCkoImZvbnRzaXplIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodGhpcywiZm9udCIsInNpemUiLHQpfX0pfSwvKiAyODAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuOSBTdHJpbmcucHJvdG90eXBlLml0YWxpY3MoKQpyKDIwKSgiaXRhbGljcyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiaSIsIiIsIiIpfX0pfSwvKiAyODEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMTAgU3RyaW5nLnByb3RvdHlwZS5saW5rKHVybCkKcigyMCkoImxpbmsiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLCJhIiwiaHJlZiIsdCl9fSl9LC8qIDI4MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4xMSBTdHJpbmcucHJvdG90eXBlLnNtYWxsKCkKcigyMCkoInNtYWxsIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJzbWFsbCIsIiIsIiIpfX0pfSwvKiAyODMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMTIgU3RyaW5nLnByb3RvdHlwZS5zdHJpa2UoKQpyKDIwKSgic3RyaWtlIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJzdHJpa2UiLCIiLCIiKX19KX0sLyogMjg0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjEzIFN0cmluZy5wcm90b3R5cGUuc3ViKCkKcigyMCkoInN1YiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywic3ViIiwiIiwiIil9fSl9LC8qIDI4NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4xNCBTdHJpbmcucHJvdG90eXBlLnN1cCgpCnIoMjApKCJzdXAiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsInN1cCIsIiIsIiIpfX0pfSwvKiAyODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4zLjMuMSAvIDE1LjkuNC40IERhdGUubm93KCkKdmFyIG49cigwKTtuKG4uUywiRGF0ZSIse25vdzpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0pfSwvKiAyODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxNCksbz1yKDMxKTtuKG4uUCtuLkYqcig1KShmdW5jdGlvbigpe3JldHVybiBudWxsIT09bmV3IERhdGUoTmFOKS50b0pTT04oKXx8MSE9PURhdGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHt0b0lTT1N0cmluZzpmdW5jdGlvbigpe3JldHVybiAxfX0pfSksIkRhdGUiLHsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCnRvSlNPTjpmdW5jdGlvbihlKXt2YXIgdD1pKHRoaXMpLHI9byh0KTtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIHJ8fGlzRmluaXRlKHIpP3QudG9JU09TdHJpbmcoKTpudWxsfX0pfSwvKiAyODggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4zLjQuMzYgLyAxNS45LjUuNDMgRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcoKQp2YXIgbj1yKDApLGk9cigyODkpOwovLyBQaGFudG9tSlMgLyBvbGQgV2ViS2l0IGhhcyBhIGJyb2tlbiBpbXBsZW1lbnRhdGlvbnMKbihuLlArbi5GKihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyE9PWkpLCJEYXRlIix7dG9JU09TdHJpbmc6aX0pfSwvKiAyODkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjAuMy40LjM2IC8gMTUuOS41LjQzIERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nKCkKdmFyIG49cig1KSxpPURhdGUucHJvdG90eXBlLmdldFRpbWUsbz1EYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyxhPWZ1bmN0aW9uKGUpe3JldHVybiBlPjk/ZToiMCIrZX07Ci8vIFBoYW50b21KUyAvIG9sZCBXZWJLaXQgaGFzIGEgYnJva2VuIGltcGxlbWVudGF0aW9ucwplLmV4cG9ydHM9bihmdW5jdGlvbigpe3JldHVybiIwMzg1LTA3LTI1VDA3OjA2OjM5Ljk5OVoiIT1vLmNhbGwobmV3IERhdGUoLTVlMTMtMSkpfSl8fCFuKGZ1bmN0aW9uKCl7by5jYWxsKG5ldyBEYXRlKE5hTikpfSk/ZnVuY3Rpb24oKXtpZighaXNGaW5pdGUoaS5jYWxsKHRoaXMpKSl0aHJvdyBSYW5nZUVycm9yKCJJbnZhbGlkIHRpbWUgdmFsdWUiKTt2YXIgZT10aGlzLHQ9ZS5nZXRVVENGdWxsWWVhcigpLHI9ZS5nZXRVVENNaWxsaXNlY29uZHMoKSxuPXQ8MD8iLSI6dD45OTk5PyIrIjoiIjtyZXR1cm4gbisoIjAwMDAwIitNYXRoLmFicyh0KSkuc2xpY2Uobj8tNjotNCkrIi0iK2EoZS5nZXRVVENNb250aCgpKzEpKyItIithKGUuZ2V0VVRDRGF0ZSgpKSsiVCIrYShlLmdldFVUQ0hvdXJzKCkpKyI6IithKGUuZ2V0VVRDTWludXRlcygpKSsiOiIrYShlLmdldFVUQ1NlY29uZHMoKSkrIi4iKyhyPjk5P3I6IjAiK2EocikpKyJaIn06b30sLyogMjkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1EYXRlLnByb3RvdHlwZSxpPW4udG9TdHJpbmcsbz1uLmdldFRpbWU7bmV3IERhdGUoTmFOKSsiIiE9IkludmFsaWQgRGF0ZSImJnIoMTkpKG4sInRvU3RyaW5nIixmdW5jdGlvbigpe3ZhciBlPW8uY2FsbCh0aGlzKTsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gZT09PWU/aS5jYWxsKHRoaXMpOiJJbnZhbGlkIERhdGUifSl9LC8qIDI5MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3KSgidG9QcmltaXRpdmUiKSxpPURhdGUucHJvdG90eXBlO24gaW4gaXx8cigxOCkoaSxuLHIoMjkyKSl9LC8qIDI5MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMyksaT1yKDMxKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoInN0cmluZyIhPT1lJiYibnVtYmVyIiE9PWUmJiJkZWZhdWx0IiE9PWUpdGhyb3cgVHlwZUVycm9yKCJJbmNvcnJlY3QgaGludCIpO3JldHVybiBpKG4odGhpcyksIm51bWJlciIhPWUpfX0sLyogMjkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjIuMS4yLjIgLyAxNS40LjMuMiBBcnJheS5pc0FycmF5KGFyZykKdmFyIG49cigwKTtuKG4uUywiQXJyYXkiLHtpc0FycmF5OnIoODEpfSl9LC8qIDI5NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMjcpLGk9cigwKSxvPXIoMTQpLGE9cigxNTkpLHM9cigxMTYpLHU9cigxMCksYz1yKDExNyksZj1yKDExOCk7aShpLlMraS5GKiFyKDgzKShmdW5jdGlvbihlKXtBcnJheS5mcm9tKGUpfSksIkFycmF5Iix7Ci8vIDIyLjEuMi4xIEFycmF5LmZyb20oYXJyYXlMaWtlLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKZnJvbTpmdW5jdGlvbihlKXt2YXIgdCxyLGksbCxkPW8oZSkscD0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LHk9YXJndW1lbnRzLmxlbmd0aCxoPXk+MT9hcmd1bWVudHNbMV06dm9pZCAwLHY9dm9pZCAwIT09aCxnPTAsYj1mKGQpOwovLyBpZiBvYmplY3QgaXNuJ3QgaXRlcmFibGUgb3IgaXQncyBhcnJheSB3aXRoIGRlZmF1bHQgaXRlcmF0b3IgLSB1c2Ugc2ltcGxlIGNhc2UKaWYodiYmKGg9bihoLHk+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSx2b2lkIDA9PWJ8fHA9PUFycmF5JiZzKGIpKWZvcih0PXUoZC5sZW5ndGgpLHI9bmV3IHAodCk7dD5nO2crKyljKHIsZyx2P2goZFtnXSxnKTpkW2ddKTtlbHNlIGZvcihsPWIuY2FsbChkKSxyPW5ldyBwOyEoaT1sLm5leHQoKSkuZG9uZTtnKyspYyhyLGcsdj9hKGwsaCxbaS52YWx1ZSxnXSwhMCk6aS52YWx1ZSk7cmV0dXJuIHIubGVuZ3RoPWcscn19KX0sLyogMjk1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTE3KTsKLy8gV2ViS2l0IEFycmF5Lm9mIGlzbid0IGdlbmVyaWMKbihuLlMrbi5GKnIoNSkoZnVuY3Rpb24oKXtmdW5jdGlvbiBGKCl7fXJldHVybiEoQXJyYXkub2YuY2FsbChGKWluc3RhbmNlb2YgRil9KSwiQXJyYXkiLHsKLy8gMjIuMS4yLjMgQXJyYXkub2YoIC4uLml0ZW1zKQpvZjpmdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aCxyPW5ldygiZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOkFycmF5KSh0KTt0PmU7KWkocixlLGFyZ3VtZW50c1tlKytdKTtyZXR1cm4gci5sZW5ndGg9dCxyfX0pfSwvKiAyOTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5qb2luKHNlcGFyYXRvcikKdmFyIG49cigwKSxpPXIoMjMpLG89W10uam9pbjsKLy8gZmFsbGJhY2sgZm9yIG5vdCBhcnJheS1saWtlIHN0cmluZ3MKbihuLlArbi5GKihyKDcwKSE9T2JqZWN0fHwhcigyOSkobykpLCJBcnJheSIse2pvaW46ZnVuY3Rpb24oZSl7cmV0dXJuIG8uY2FsbChpKHRoaXMpLHZvaWQgMD09PWU/IiwiOmUpfX0pfSwvKiAyOTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxMDQpLG89cigyOCksYT1yKDUwKSxzPXIoMTApLHU9W10uc2xpY2U7Ci8vIGZhbGxiYWNrIGZvciBub3QgYXJyYXktbGlrZSBFUzMgc3RyaW5ncyBhbmQgRE9NIG9iamVjdHMKbihuLlArbi5GKnIoNSkoZnVuY3Rpb24oKXtpJiZ1LmNhbGwoaSl9KSwiQXJyYXkiLHtzbGljZTpmdW5jdGlvbihlLHQpe3ZhciByPXModGhpcy5sZW5ndGgpLG49byh0aGlzKTtpZih0PXZvaWQgMD09PXQ/cjp0LCJBcnJheSI9PW4pcmV0dXJuIHUuY2FsbCh0aGlzLGUsdCk7Zm9yKHZhciBpPWEoZSxyKSxjPWEodCxyKSxmPXMoYy1pKSxsPUFycmF5KGYpLGQ9MDtkPGY7ZCsrKWxbZF09IlN0cmluZyI9PW4/dGhpcy5jaGFyQXQoaStkKTp0aGlzW2krZF07cmV0dXJuIGx9fSl9LC8qIDI5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDE2KSxvPXIoMTQpLGE9cig1KSxzPVtdLnNvcnQsdT1bMSwyLDNdO24obi5QK24uRiooYShmdW5jdGlvbigpewovLyBJRTgtCnUuc29ydCh2b2lkIDApfSl8fCFhKGZ1bmN0aW9uKCl7Ci8vIFY4IGJ1Zwp1LnNvcnQobnVsbCl9KXx8IXIoMjkpKHMpKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjI1IEFycmF5LnByb3RvdHlwZS5zb3J0KGNvbXBhcmVmbikKc29ydDpmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9zLmNhbGwobyh0aGlzKSk6cy5jYWxsKG8odGhpcyksaShlKSl9fSl9LC8qIDI5OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDM1KSgwKSxvPXIoMjkpKFtdLmZvckVhY2gsITApO24obi5QK24uRiohbywiQXJyYXkiLHsKLy8gMjIuMS4zLjEwIC8gMTUuNC40LjE4IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCmZvckVhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMwMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KSxpPXIoODEpLG89cig3KSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdDsKLy8gY3Jvc3MtcmVhbG0gZmFsbGJhY2sKcmV0dXJuIGkoZSkmJih0PWUuY29uc3RydWN0b3IsImZ1bmN0aW9uIiE9dHlwZW9mIHR8fHQhPT1BcnJheSYmIWkodC5wcm90b3R5cGUpfHwodD12b2lkIDApLG4odCkmJm51bGw9PT0odD10W29dKSYmKHQ9dm9pZCAwKSksdm9pZCAwPT09dD9BcnJheTp0fX0sLyogMzAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMzUpKDEpO24obi5QK24uRiohcigyOSkoW10ubWFwLCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjE1IC8gMTUuNC40LjE5IEFycmF5LnByb3RvdHlwZS5tYXAoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKbWFwOmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigzNSkoMik7bihuLlArbi5GKiFyKDI5KShbXS5maWx0ZXIsITApLCJBcnJheSIsewovLyAyMi4xLjMuNyAvIDE1LjQuNC4yMCBBcnJheS5wcm90b3R5cGUuZmlsdGVyKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCmZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUsYXJndW1lbnRzWzFdKX19KX0sLyogMzAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMzUpKDMpO24obi5QK24uRiohcigyOSkoW10uc29tZSwhMCksIkFycmF5Iix7Ci8vIDIyLjEuMy4yMyAvIDE1LjQuNC4xNyBBcnJheS5wcm90b3R5cGUuc29tZShjYWxsYmFja2ZuIFssIHRoaXNBcmddKQpzb21lOmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigzNSkoNCk7bihuLlArbi5GKiFyKDI5KShbXS5ldmVyeSwhMCksIkFycmF5Iix7Ci8vIDIyLjEuMy41IC8gMTUuNC40LjE2IEFycmF5LnByb3RvdHlwZS5ldmVyeShjYWxsYmFja2ZuIFssIHRoaXNBcmddKQpldmVyeTpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUsYXJndW1lbnRzWzFdKX19KX0sLyogMzA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTYwKTtuKG4uUCtuLkYqIXIoMjkpKFtdLnJlZHVjZSwhMCksIkFycmF5Iix7Ci8vIDIyLjEuMy4xOCAvIDE1LjQuNC4yMSBBcnJheS5wcm90b3R5cGUucmVkdWNlKGNhbGxiYWNrZm4gWywgaW5pdGlhbFZhbHVlXSkKcmVkdWNlOmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoLGFyZ3VtZW50c1sxXSwhMSl9fSl9LC8qIDMwNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDE2MCk7bihuLlArbi5GKiFyKDI5KShbXS5yZWR1Y2VSaWdodCwhMCksIkFycmF5Iix7Ci8vIDIyLjEuMy4xOSAvIDE1LjQuNC4yMiBBcnJheS5wcm90b3R5cGUucmVkdWNlUmlnaHQoY2FsbGJhY2tmbiBbLCBpbml0aWFsVmFsdWVdKQpyZWR1Y2VSaWdodDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aCxhcmd1bWVudHNbMV0sITApfX0pfSwvKiAzMDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cig3OSkoITEpLG89W10uaW5kZXhPZixhPSEhbyYmMS9bMV0uaW5kZXhPZigxLC0wKTwwO24obi5QK24uRiooYXx8IXIoMjkpKG8pKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjExIC8gMTUuNC40LjE0IEFycmF5LnByb3RvdHlwZS5pbmRleE9mKHNlYXJjaEVsZW1lbnQgWywgZnJvbUluZGV4XSkKaW5kZXhPZjpmdW5jdGlvbihlKXtyZXR1cm4gYT9vLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8MDppKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigyMyksbz1yKDMzKSxhPXIoMTApLHM9W10ubGFzdEluZGV4T2YsdT0hIXMmJjEvWzFdLmxhc3RJbmRleE9mKDEsLTApPDA7bihuLlArbi5GKih1fHwhcigyOSkocykpLCJBcnJheSIsewovLyAyMi4xLjMuMTQgLyAxNS40LjQuMTUgQXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQgWywgZnJvbUluZGV4XSkKbGFzdEluZGV4T2Y6ZnVuY3Rpb24oZSl7Ci8vIGNvbnZlcnQgLTAgdG8gKzAKaWYodSlyZXR1cm4gcy5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA7dmFyIHQ9aSh0aGlzKSxyPWEodC5sZW5ndGgpLG49ci0xO2Zvcihhcmd1bWVudHMubGVuZ3RoPjEmJihuPU1hdGgubWluKG4sbyhhcmd1bWVudHNbMV0pKSksbjwwJiYobj1yK24pO24+PTA7bi0tKWlmKG4gaW4gdCYmdFtuXT09PWUpcmV0dXJuIG58fDA7cmV0dXJuLTF9fSl9LC8qIDMwOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIyLjEuMy4zIEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluKHRhcmdldCwgc3RhcnQsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgbj1yKDApO24obi5QLCJBcnJheSIse2NvcHlXaXRoaW46cigxNjEpfSkscig0MSkoImNvcHlXaXRoaW4iKX0sLyogMzEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjIuMS4zLjYgQXJyYXkucHJvdG90eXBlLmZpbGwodmFsdWUsIHN0YXJ0ID0gMCwgZW5kID0gdGhpcy5sZW5ndGgpCnZhciBuPXIoMCk7bihuLlAsIkFycmF5Iix7ZmlsbDpyKDEyMCl9KSxyKDQxKSgiZmlsbCIpfSwvKiAzMTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjIuMS4zLjggQXJyYXkucHJvdG90eXBlLmZpbmQocHJlZGljYXRlLCB0aGlzQXJnID0gdW5kZWZpbmVkKQp2YXIgbj1yKDApLGk9cigzNSkoNSksbz0hMDsKLy8gU2hvdWxkbid0IHNraXAgaG9sZXMKImZpbmQiaW5bXSYmQXJyYXkoMSkuZmluZChmdW5jdGlvbigpe289ITF9KSxuKG4uUCtuLkYqbywiQXJyYXkiLHtmaW5kOmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSkscig0MSkoImZpbmQiKX0sLyogMzEyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy45IEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXgocHJlZGljYXRlLCB0aGlzQXJnID0gdW5kZWZpbmVkKQp2YXIgbj1yKDApLGk9cigzNSkoNiksbz0iZmluZEluZGV4IixhPSEwOwovLyBTaG91bGRuJ3Qgc2tpcCBob2xlcwpvIGluW10mJkFycmF5KDEpW29dKGZ1bmN0aW9uKCl7YT0hMX0pLG4obi5QK24uRiphLCJBcnJheSIse2ZpbmRJbmRleDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLHIoNDEpKG8pfSwvKiAzMTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNTMpKCJBcnJheSIpfSwvKiAzMTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCksaT1yKDEwNyksbz1yKDkpLmYsYT1yKDUyKS5mLHM9cig4MiksdT1yKDg0KSxjPW4uUmVnRXhwLGY9YyxsPWMucHJvdG90eXBlLGQ9L2EvZyxwPS9hL2cseT1uZXcgYyhkKSE9PWQ7aWYocig4KSYmKCF5fHxyKDUpKGZ1bmN0aW9uKCl7Ci8vIFJlZ0V4cCBjb25zdHJ1Y3RvciBjYW4gYWx0ZXIgZmxhZ3MgYW5kIElzUmVnRXhwIHdvcmtzIGNvcnJlY3Qgd2l0aCBAQG1hdGNoCnJldHVybiBwW3IoNykoIm1hdGNoIildPSExLGMoZCkhPWR8fGMocCk9PXB8fCIvYS9pIiE9YyhkLCJpIil9KSkpe2M9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzIGluc3RhbmNlb2YgYyxuPXMoZSksbz12b2lkIDA9PT10O3JldHVybiFyJiZuJiZlLmNvbnN0cnVjdG9yPT09YyYmbz9lOmkoeT9uZXcgZihuJiYhbz9lLnNvdXJjZTplLHQpOmYoKG49ZSBpbnN0YW5jZW9mIGMpP2Uuc291cmNlOmUsbiYmbz91LmNhbGwoZSk6dCkscj90aGlzOmwsYyl9O2Zvcih2YXIgaD1hKGYpLHY9MDtoLmxlbmd0aD52OykhZnVuY3Rpb24oZSl7ZSBpbiBjfHxvKGMsZSx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBmW2VdfSxzZXQ6ZnVuY3Rpb24odCl7ZltlXT10fX0pfShoW3YrK10pO2wuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZT1sLHIoMTkpKG4sIlJlZ0V4cCIsYyl9cig1MykoIlJlZ0V4cCIpfSwvKiAzMTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyKDE2Myk7dmFyIG49cigzKSxpPXIoODQpLG89cig4KSxhPS8uLy50b1N0cmluZyxzPWZ1bmN0aW9uKGUpe3IoMTkpKFJlZ0V4cC5wcm90b3R5cGUsInRvU3RyaW5nIixlLCEwKX07Ci8vIDIxLjIuNS4xNCBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nKCkKcig1KShmdW5jdGlvbigpe3JldHVybiIvYS9iIiE9YS5jYWxsKHtzb3VyY2U6ImEiLGZsYWdzOiJiIn0pfSk/cyhmdW5jdGlvbigpe3ZhciBlPW4odGhpcyk7cmV0dXJuIi8iLmNvbmNhdChlLnNvdXJjZSwiLyIsImZsYWdzImluIGU/ZS5mbGFnczohbyYmZSBpbnN0YW5jZW9mIFJlZ0V4cD9pLmNhbGwoZSk6dm9pZCAwKX0pOiJ0b1N0cmluZyIhPWEubmFtZSYmcyhmdW5jdGlvbigpe3JldHVybiBhLmNhbGwodGhpcyl9KX0sLyogMzE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gQEBtYXRjaCBsb2dpYwpyKDg1KSgibWF0Y2giLDEsZnVuY3Rpb24oZSx0LHIpewovLyAyMS4xLjMuMTEgU3RyaW5nLnByb3RvdHlwZS5tYXRjaChyZWdleHApCnJldHVybltmdW5jdGlvbihyKXsidXNlIHN0cmljdCI7dmFyIG49ZSh0aGlzKSxpPXZvaWQgMD09cj92b2lkIDA6clt0XTtyZXR1cm4gdm9pZCAwIT09aT9pLmNhbGwocixuKTpuZXcgUmVnRXhwKHIpW3RdKFN0cmluZyhuKSl9LHJdfSl9LC8qIDMxNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIEBAcmVwbGFjZSBsb2dpYwpyKDg1KSgicmVwbGFjZSIsMixmdW5jdGlvbihlLHQscil7Ci8vIDIxLjEuMy4xNCBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2Uoc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSkKcmV0dXJuW2Z1bmN0aW9uKG4saSl7InVzZSBzdHJpY3QiO3ZhciBvPWUodGhpcyksYT12b2lkIDA9PW4/dm9pZCAwOm5bdF07cmV0dXJuIHZvaWQgMCE9PWE/YS5jYWxsKG4sbyxpKTpyLmNhbGwoU3RyaW5nKG8pLG4saSl9LHJdfSl9LC8qIDMxOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIEBAc2VhcmNoIGxvZ2ljCnIoODUpKCJzZWFyY2giLDEsZnVuY3Rpb24oZSx0LHIpewovLyAyMS4xLjMuMTUgU3RyaW5nLnByb3RvdHlwZS5zZWFyY2gocmVnZXhwKQpyZXR1cm5bZnVuY3Rpb24ocil7InVzZSBzdHJpY3QiO3ZhciBuPWUodGhpcyksaT12b2lkIDA9PXI/dm9pZCAwOnJbdF07cmV0dXJuIHZvaWQgMCE9PWk/aS5jYWxsKHIsbik6bmV3IFJlZ0V4cChyKVt0XShTdHJpbmcobikpfSxyXX0pfSwvKiAzMTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBAQHNwbGl0IGxvZ2ljCnIoODUpKCJzcGxpdCIsMixmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciBpPXIoODIpLG89bixhPVtdLnB1c2gscz0ibGVuZ3RoIjtpZigiYyI9PSJhYmJjIi5zcGxpdCgvKGIpKi8pWzFdfHw0IT0idGVzdCIuc3BsaXQoLyg/OikvLC0xKVtzXXx8MiE9ImFiIi5zcGxpdCgvKD86YWIpKi8pW3NdfHw0IT0iLiIuc3BsaXQoLyguPykoLj8pLylbc118fCIuIi5zcGxpdCgvKCkoKS8pW3NdPjF8fCIiLnNwbGl0KC8uPy8pW3NdKXt2YXIgdT12b2lkIDA9PT0vKCk/Py8uZXhlYygiIilbMV07Ly8gbm9ucGFydGljaXBhdGluZyBjYXB0dXJpbmcgZ3JvdXAKLy8gYmFzZWQgb24gZXM1LXNoaW0gaW1wbGVtZW50YXRpb24sIG5lZWQgdG8gcmV3b3JrIGl0Cm49ZnVuY3Rpb24oZSx0KXt2YXIgcj1TdHJpbmcodGhpcyk7aWYodm9pZCAwPT09ZSYmMD09PXQpcmV0dXJuW107Ci8vIElmIGBzZXBhcmF0b3JgIGlzIG5vdCBhIHJlZ2V4LCB1c2UgbmF0aXZlIHNwbGl0CmlmKCFpKGUpKXJldHVybiBvLmNhbGwocixlLHQpO3ZhciBuLGMsZixsLGQscD1bXSx5PShlLmlnbm9yZUNhc2U/ImkiOiIiKSsoZS5tdWx0aWxpbmU/Im0iOiIiKSsoZS51bmljb2RlPyJ1IjoiIikrKGUuc3RpY2t5PyJ5IjoiIiksaD0wLHY9dm9pZCAwPT09dD80Mjk0OTY3Mjk1OnQ+Pj4wLGc9bmV3IFJlZ0V4cChlLnNvdXJjZSx5KyJnIik7Zm9yKAovLyBEb2Vzbid0IG5lZWQgZmxhZ3MgZ3ksIGJ1dCB0aGV5IGRvbid0IGh1cnQKdXx8KG49bmV3IFJlZ0V4cCgiXiIrZy5zb3VyY2UrIiQoPyFcXHMpIix5KSk7KGM9Zy5leGVjKHIpKSYmISgoCi8vIGBzZXBhcmF0b3JDb3B5Lmxhc3RJbmRleGAgaXMgbm90IHJlbGlhYmxlIGNyb3NzLWJyb3dzZXIKZj1jLmluZGV4K2NbMF1bc10pPmgmJihwLnB1c2goci5zbGljZShoLGMuaW5kZXgpKSwKLy8gRml4IGJyb3dzZXJzIHdob3NlIGBleGVjYCBtZXRob2RzIGRvbid0IGNvbnNpc3RlbnRseSByZXR1cm4gYHVuZGVmaW5lZGAgZm9yIE5QQ0cKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWxvb3AtZnVuYwohdSYmY1tzXT4xJiZjWzBdLnJlcGxhY2UobixmdW5jdGlvbigpe2ZvcihkPTE7ZDxhcmd1bWVudHNbc10tMjtkKyspdm9pZCAwPT09YXJndW1lbnRzW2RdJiYoY1tkXT12b2lkIDApfSksY1tzXT4xJiZjLmluZGV4PHJbc10mJmEuYXBwbHkocCxjLnNsaWNlKDEpKSxsPWNbMF1bc10saD1mLHBbc10+PXYpKTspZy5sYXN0SW5kZXg9PT1jLmluZGV4JiZnLmxhc3RJbmRleCsrO3JldHVybiBoPT09cltzXT8hbCYmZy50ZXN0KCIiKXx8cC5wdXNoKCIiKTpwLnB1c2goci5zbGljZShoKSkscFtzXT52P3Auc2xpY2UoMCx2KTpwfX1lbHNlIjAiLnNwbGl0KHZvaWQgMCwwKVtzXSYmKG49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09ZSYmMD09PXQ/W106by5jYWxsKHRoaXMsZSx0KX0pOwovLyAyMS4xLjMuMTcgU3RyaW5nLnByb3RvdHlwZS5zcGxpdChzZXBhcmF0b3IsIGxpbWl0KQpyZXR1cm5bZnVuY3Rpb24ocixpKXt2YXIgbz1lKHRoaXMpLGE9dm9pZCAwPT1yP3ZvaWQgMDpyW3RdO3JldHVybiB2b2lkIDAhPT1hP2EuY2FsbChyLG8saSk6bi5jYWxsKFN0cmluZyhvKSxyLGkpfSxuXX0pfSwvKiAzMjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixpLG8sYSxzPXIoNDgpLHU9cig0KSxjPXIoMjcpLGY9cig3MiksbD1yKDApLGQ9cig2KSxwPXIoMTYpLHk9cig1NCksaD1yKDU1KSx2PXIoODYpLGc9cigxMjIpLnNldCxiPXIoMTIzKSgpLG09cigxMjQpLF89cigxNjQpLFI9cigxNjUpLHc9dS5UeXBlRXJyb3IsUz11LnByb2Nlc3MsTz11LlByb21pc2UsUD0icHJvY2VzcyI9PWYoUyksaz1mdW5jdGlvbigpe30sTT1pPW0uZixMPSEhZnVuY3Rpb24oKXt0cnl7Ci8vIGNvcnJlY3Qgc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydAp2YXIgZT1PLnJlc29sdmUoMSksdD0oZS5jb25zdHJ1Y3Rvcj17fSlbcig3KSgic3BlY2llcyIpXT1mdW5jdGlvbihlKXtlKGssayl9OwovLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0CnJldHVybihQfHwiZnVuY3Rpb24iPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmZS50aGVuKGspaW5zdGFuY2VvZiB0fWNhdGNoKGUpe319KCkseD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hKCFkKGUpfHwiZnVuY3Rpb24iIT10eXBlb2YodD1lLnRoZW4pKSYmdH0sRT1mdW5jdGlvbihlLHQpe2lmKCFlLl9uKXtlLl9uPSEwO3ZhciByPWUuX2M7YihmdW5jdGlvbigpe2Zvcih2YXIgbj1lLl92LGk9MT09ZS5fcyxvPTA7ci5sZW5ndGg+bzspIWZ1bmN0aW9uKHQpe3ZhciByLG8sYT1pP3Qub2s6dC5mYWlsLHM9dC5yZXNvbHZlLHU9dC5yZWplY3QsYz10LmRvbWFpbjt0cnl7YT8oaXx8KDI9PWUuX2gmJkEoZSksZS5faD0xKSwhMD09PWE/cj1uOihjJiZjLmVudGVyKCkscj1hKG4pLGMmJmMuZXhpdCgpKSxyPT09dC5wcm9taXNlP3UodygiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKToobz14KHIpKT9vLmNhbGwocixzLHUpOnMocikpOnUobil9Y2F0Y2goZSl7dShlKX19KHJbbysrXSk7Ly8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2gKZS5fYz1bXSxlLl9uPSExLHQmJiFlLl9oJiZEKGUpfSl9fSxEPWZ1bmN0aW9uKGUpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIHQscixuLGk9ZS5fdixvPVUoZSk7aWYobyYmKHQ9XyhmdW5jdGlvbigpe1A/Uy5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLGksZSk6KHI9dS5vbnVuaGFuZGxlZHJlamVjdGlvbik/cih7cHJvbWlzZTplLHJlYXNvbjppfSk6KG49dS5jb25zb2xlKSYmbi5lcnJvciYmbi5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixpKX0pLAovLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZAplLl9oPVB8fFUoZSk/MjoxKSxlLl9hPXZvaWQgMCxvJiZ0LmUpdGhyb3cgdC52fSl9LFU9ZnVuY3Rpb24oZSl7aWYoMT09ZS5faClyZXR1cm4hMTtmb3IodmFyIHQscj1lLl9hfHxlLl9jLG49MDtyLmxlbmd0aD5uOylpZih0PXJbbisrXSx0LmZhaWx8fCFVKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEE9ZnVuY3Rpb24oZSl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdDtQP1MuZW1pdCgicmVqZWN0aW9uSGFuZGxlZCIsZSk6KHQ9dS5vbnJlamVjdGlvbmhhbmRsZWQpJiZ0KHtwcm9taXNlOmUscmVhc29uOmUuX3Z9KX0pfSxqPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fZHx8KHQuX2Q9ITAsdD10Ll93fHx0LC8vIHVud3JhcAp0Ll92PWUsdC5fcz0yLHQuX2F8fCh0Ll9hPXQuX2Muc2xpY2UoKSksRSh0LCEwKSl9LEk9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLl9kKXtyLl9kPSEwLHI9ci5fd3x8cjsvLyB1bndyYXAKdHJ5e2lmKHI9PT1lKXRocm93IHcoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9eChlKSk/YihmdW5jdGlvbigpe3ZhciBuPXtfdzpyLF9kOiExfTsvLyB3cmFwCnRyeXt0LmNhbGwoZSxjKEksbiwxKSxjKGosbiwxKSl9Y2F0Y2goZSl7ai5jYWxsKG4sZSl9fSk6KHIuX3Y9ZSxyLl9zPTEsRShyLCExKSl9Y2F0Y2goZSl7ai5jYWxsKHtfdzpyLF9kOiExfSxlKX19fTsKLy8gY29uc3RydWN0b3IgcG9seWZpbGwKTHx8KAovLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQpPPWZ1bmN0aW9uKGUpe3kodGhpcyxPLCJQcm9taXNlIiwiX2giKSxwKGUpLG4uY2FsbCh0aGlzKTt0cnl7ZShjKEksdGhpcywxKSxjKGosdGhpcywxKSl9Y2F0Y2goZSl7ai5jYWxsKHRoaXMsZSl9fSwKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCm49ZnVuY3Rpb24oZSl7dGhpcy5fYz1bXSwvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMKdGhpcy5fYT12b2lkIDAsLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnMKdGhpcy5fcz0wLC8vIDwtIHN0YXRlCnRoaXMuX2Q9ITEsLy8gPC0gZG9uZQp0aGlzLl92PXZvaWQgMCwvLyA8LSB2YWx1ZQp0aGlzLl9oPTAsLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWQKdGhpcy5fbj0hMX0sbi5wcm90b3R5cGU9cig1NikoTy5wcm90b3R5cGUsewovLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKQp0aGVuOmZ1bmN0aW9uKGUsdCl7dmFyIHI9TSh2KHRoaXMsTykpO3JldHVybiByLm9rPSJmdW5jdGlvbiIhPXR5cGVvZiBlfHxlLHIuZmFpbD0iZnVuY3Rpb24iPT10eXBlb2YgdCYmdCxyLmRvbWFpbj1QP1MuZG9tYWluOnZvaWQgMCx0aGlzLl9jLnB1c2gociksdGhpcy5fYSYmdGhpcy5fYS5wdXNoKHIpLHRoaXMuX3MmJkUodGhpcywhMSksci5wcm9taXNlfSwKLy8gMjUuNC41LjEgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2gob25SZWplY3RlZCkKY2F0Y2g6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsZSl9fSksbz1mdW5jdGlvbigpe3ZhciBlPW5ldyBuO3RoaXMucHJvbWlzZT1lLHRoaXMucmVzb2x2ZT1jKEksZSwxKSx0aGlzLnJlamVjdD1jKGosZSwxKX0sbS5mPU09ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1PfHxlPT09YT9uZXcgbyhlKTppKGUpfSksbChsLkcrbC5XK2wuRiohTCx7UHJvbWlzZTpPfSkscig2MSkoTywiUHJvbWlzZSIpLHIoNTMpKCJQcm9taXNlIiksYT1yKDMwKS5Qcm9taXNlLAovLyBzdGF0aWNzCmwobC5TK2wuRiohTCwiUHJvbWlzZSIsewovLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKQpyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9TSh0aGlzKTtyZXR1cm4oMCx0LnJlamVjdCkoZSksdC5wcm9taXNlfX0pLGwobC5TK2wuRiooc3x8IUwpLCJQcm9taXNlIix7Ci8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KQpyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiBSKHMmJnRoaXM9PT1hP086dGhpcyxlKX19KSxsKGwuUytsLkYqIShMJiZyKDgzKShmdW5jdGlvbihlKXtPLmFsbChlKS5jYXRjaChrKX0pKSwiUHJvbWlzZSIsewovLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkKYWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1NKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qsbz1fKGZ1bmN0aW9uKCl7dmFyIHI9W10sbz0wLGE9MTtoKGUsITEsZnVuY3Rpb24oZSl7dmFyIHM9bysrLHU9ITE7ci5wdXNoKHZvaWQgMCksYSsrLHQucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3V8fCh1PSEwLHJbc109ZSwtLWF8fG4ocikpfSxpKX0pLC0tYXx8bihyKX0pO3JldHVybiBvLmUmJmkoby52KSxyLnByb21pc2V9LAovLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpCnJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPU0odCksbj1yLnJlamVjdCxpPV8oZnVuY3Rpb24oKXtoKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gaS5lJiZuKGkudiksci5wcm9taXNlfX0pfSwvKiAzMjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDE3MCksaT1yKDY0KTsKLy8gMjMuNCBXZWFrU2V0IE9iamVjdHMKcig4NykoIldlYWtTZXQiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sewovLyAyMy40LjMuMSBXZWFrU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpCmFkZDpmdW5jdGlvbihlKXtyZXR1cm4gbi5kZWYoaSh0aGlzLCJXZWFrU2V0IiksZSwhMCl9fSxuLCExLCEwKX0sLyogMzIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoODgpLG89cigxMjUpLGE9cigzKSxzPXIoNTApLHU9cigxMCksYz1yKDYpLGY9cig0KS5BcnJheUJ1ZmZlcixsPXIoODYpLGQ9by5BcnJheUJ1ZmZlcixwPW8uRGF0YVZpZXcseT1pLkFCViYmZi5pc1ZpZXcsaD1kLnByb3RvdHlwZS5zbGljZSx2PWkuVklFVztuKG4uRytuLlcrbi5GKihmIT09ZCkse0FycmF5QnVmZmVyOmR9KSxuKG4uUytuLkYqIWkuQ09OU1RSLCJBcnJheUJ1ZmZlciIsewovLyAyNC4xLjMuMSBBcnJheUJ1ZmZlci5pc1ZpZXcoYXJnKQppc1ZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIHkmJnkoZSl8fGMoZSkmJnYgaW4gZX19KSxuKG4uUCtuLlUrbi5GKnIoNSkoZnVuY3Rpb24oKXtyZXR1cm4hbmV3IGQoMikuc2xpY2UoMSx2b2lkIDApLmJ5dGVMZW5ndGh9KSwiQXJyYXlCdWZmZXIiLHsKLy8gMjQuMS40LjMgQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlKHN0YXJ0LCBlbmQpCnNsaWNlOmZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09aCYmdm9pZCAwPT09dClyZXR1cm4gaC5jYWxsKGEodGhpcyksZSk7Zm9yKC8vIEZGIGZpeAp2YXIgcj1hKHRoaXMpLmJ5dGVMZW5ndGgsbj1zKGUsciksaT1zKHZvaWQgMD09PXQ/cjp0LHIpLG89bmV3KGwodGhpcyxkKSkodShpLW4pKSxjPW5ldyBwKHRoaXMpLGY9bmV3IHAobykseT0wO248aTspZi5zZXRVaW50OCh5KyssYy5nZXRVaW50OChuKyspKTtyZXR1cm4gb319KSxyKDUzKSgiQXJyYXlCdWZmZXIiKX0sLyogMzIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApO24obi5HK24uVytuLkYqIXIoODgpLkFCVix7RGF0YVZpZXc6cigxMjUpLkRhdGFWaWV3fSl9LC8qIDMyNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNikoIkludDgiLDEsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzI1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiVWludDgiLDEsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzI2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiVWludDgiLDEsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19LCEwKX0sLyogMzI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiSW50MTYiLDIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzI4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiVWludDE2IiwyLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMyOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNikoIkludDMyIiw0LGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNikoIlVpbnQzMiIsNCxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzYpKCJGbG9hdDMyIiw0LGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNikoIkZsb2F0NjQiLDgsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzMzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS4xIFJlZmxlY3QuYXBwbHkodGFyZ2V0LCB0aGlzQXJndW1lbnQsIGFyZ3VtZW50c0xpc3QpCnZhciBuPXIoMCksaT1yKDE2KSxvPXIoMyksYT0ocig0KS5SZWZsZWN0fHx7fSkuYXBwbHkscz1GdW5jdGlvbi5hcHBseTsKLy8gTVMgRWRnZSBhcmd1bWVudHNMaXN0IGFyZ3VtZW50IGlzIG9wdGlvbmFsCm4obi5TK24uRiohcig1KShmdW5jdGlvbigpe2EoZnVuY3Rpb24oKXt9KX0pLCJSZWZsZWN0Iix7YXBwbHk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWkoZSksdT1vKHIpO3JldHVybiBhP2Eobix0LHUpOnMuY2FsbChuLHQsdSl9fSl9LC8qIDMzNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMiBSZWZsZWN0LmNvbnN0cnVjdCh0YXJnZXQsIGFyZ3VtZW50c0xpc3QgWywgbmV3VGFyZ2V0XSkKdmFyIG49cigwKSxpPXIoNTEpLG89cigxNiksYT1yKDMpLHM9cig2KSx1PXIoNSksYz1yKDE1MSksZj0ocig0KS5SZWZsZWN0fHx7fSkuY29uc3RydWN0LGw9dShmdW5jdGlvbigpe2Z1bmN0aW9uIEYoKXt9cmV0dXJuIShmKGZ1bmN0aW9uKCl7fSxbXSxGKWluc3RhbmNlb2YgRil9KSxkPSF1KGZ1bmN0aW9uKCl7ZihmdW5jdGlvbigpe30pfSk7bihuLlMrbi5GKihsfHxkKSwiUmVmbGVjdCIse2NvbnN0cnVjdDpmdW5jdGlvbihlLHQpe28oZSksYSh0KTt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPDM/ZTpvKGFyZ3VtZW50c1syXSk7aWYoZCYmIWwpcmV0dXJuIGYoZSx0LHIpO2lmKGU9PXIpewovLyB3L28gYWx0ZXJlZCBuZXdUYXJnZXQsIG9wdGltaXphdGlvbiBmb3IgMC00IGFyZ3VtZW50cwpzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IGU7Y2FzZSAxOnJldHVybiBuZXcgZSh0WzBdKTtjYXNlIDI6cmV0dXJuIG5ldyBlKHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuZXcgZSh0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuZXcgZSh0WzBdLHRbMV0sdFsyXSx0WzNdKX0KLy8gdy9vIGFsdGVyZWQgbmV3VGFyZ2V0LCBsb3Qgb2YgYXJndW1lbnRzIGNhc2UKdmFyIG49W251bGxdO3JldHVybiBuLnB1c2guYXBwbHkobix0KSxuZXcoYy5hcHBseShlLG4pKX0KLy8gd2l0aCBhbHRlcmVkIG5ld1RhcmdldCwgbm90IHN1cHBvcnQgYnVpbHQtaW4gY29uc3RydWN0b3JzCnZhciB1PXIucHJvdG90eXBlLHA9aShzKHUpP3U6T2JqZWN0LnByb3RvdHlwZSkseT1GdW5jdGlvbi5hcHBseS5jYWxsKGUscCx0KTtyZXR1cm4gcyh5KT95OnB9fSl9LC8qIDMzNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMyBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXMpCnZhciBuPXIoOSksaT1yKDApLG89cigzKSxhPXIoMzEpOwovLyBNUyBFZGdlIGhhcyBicm9rZW4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSAtIHRocm93aW5nIGluc3RlYWQgb2YgcmV0dXJuaW5nIGZhbHNlCmkoaS5TK2kuRipyKDUpKGZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgpSZWZsZWN0LmRlZmluZVByb3BlcnR5KG4uZih7fSwxLHt2YWx1ZToxfSksMSx7dmFsdWU6Mn0pfSksIlJlZmxlY3QiLHtkZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7byhlKSx0PWEodCwhMCksbyhyKTt0cnl7cmV0dXJuIG4uZihlLHQsciksITB9Y2F0Y2goZSl7cmV0dXJuITF9fX0pfSwvKiAzMzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjQgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5KQp2YXIgbj1yKDApLGk9cigyNCkuZixvPXIoMyk7bihuLlMsIlJlZmxlY3QiLHtkZWxldGVQcm9wZXJ0eTpmdW5jdGlvbihlLHQpe3ZhciByPWkobyhlKSx0KTtyZXR1cm4hKHImJiFyLmNvbmZpZ3VyYWJsZSkmJmRlbGV0ZSBlW3RdfX0pfSwvKiAzMzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjYuMS41IFJlZmxlY3QuZW51bWVyYXRlKHRhcmdldCkKdmFyIG49cigwKSxpPXIoMyksbz1mdW5jdGlvbihlKXt0aGlzLl90PWkoZSksLy8gdGFyZ2V0CnRoaXMuX2k9MDsvLyBuZXh0IGluZGV4CnZhciB0LHI9dGhpcy5faz1bXTtmb3IodCBpbiBlKXIucHVzaCh0KX07cigxMTMpKG8sIk9iamVjdCIsZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMscj10Ll9rO2Rve2lmKHQuX2k+PXIubGVuZ3RoKXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19d2hpbGUoISgoZT1yW3QuX2krK10paW4gdC5fdCkpO3JldHVybnt2YWx1ZTplLGRvbmU6ITF9fSksbihuLlMsIlJlZmxlY3QiLHtlbnVtZXJhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvKGUpfX0pfSwvKiAzMzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGdldChlLHQpe3ZhciByLGEsYz1hcmd1bWVudHMubGVuZ3RoPDM/ZTphcmd1bWVudHNbMl07cmV0dXJuIHUoZSk9PT1jP2VbdF06KHI9bi5mKGUsdCkpP28ociwidmFsdWUiKT9yLnZhbHVlOnZvaWQgMCE9PXIuZ2V0P3IuZ2V0LmNhbGwoYyk6dm9pZCAwOnMoYT1pKGUpKT9nZXQoYSx0LGMpOnZvaWQgMH0KLy8gMjYuMS42IFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcGVydHlLZXkgWywgcmVjZWl2ZXJdKQp2YXIgbj1yKDI0KSxpPXIoMjUpLG89cigxNyksYT1yKDApLHM9cig2KSx1PXIoMyk7YShhLlMsIlJlZmxlY3QiLHtnZXQ6Z2V0fSl9LC8qIDMzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuNyBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5S2V5KQp2YXIgbj1yKDI0KSxpPXIoMCksbz1yKDMpO2koaS5TLCJSZWZsZWN0Iix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZihvKGUpLHQpfX0pfSwvKiAzNDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjggUmVmbGVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpCnZhciBuPXIoMCksaT1yKDI1KSxvPXIoMyk7bihuLlMsIlJlZmxlY3QiLHtnZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gaShvKGUpKX19KX0sLyogMzQxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS45IFJlZmxlY3QuaGFzKHRhcmdldCwgcHJvcGVydHlLZXkpCnZhciBuPXIoMCk7bihuLlMsIlJlZmxlY3QiLHtoYXM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCBpbiBlfX0pfSwvKiAzNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjEwIFJlZmxlY3QuaXNFeHRlbnNpYmxlKHRhcmdldCkKdmFyIG49cigwKSxpPXIoMyksbz1PYmplY3QuaXNFeHRlbnNpYmxlO24obi5TLCJSZWZsZWN0Iix7aXNFeHRlbnNpYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBpKGUpLCFvfHxvKGUpfX0pfSwvKiAzNDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjExIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpCnZhciBuPXIoMCk7bihuLlMsIlJlZmxlY3QiLHtvd25LZXlzOnIoMTcyKX0pfSwvKiAzNDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjEyIFJlZmxlY3QucHJldmVudEV4dGVuc2lvbnModGFyZ2V0KQp2YXIgbj1yKDApLGk9cigzKSxvPU9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucztuKG4uUywiUmVmbGVjdCIse3ByZXZlbnRFeHRlbnNpb25zOmZ1bmN0aW9uKGUpe2koZSk7dHJ5e3JldHVybiBvJiZvKGUpLCEwfWNhdGNoKGUpe3JldHVybiExfX19KX0sLyogMzQ1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBzZXQoZSx0LHIpe3ZhciBzLGwsZD1hcmd1bWVudHMubGVuZ3RoPDQ/ZTphcmd1bWVudHNbM10scD1pLmYoYyhlKSx0KTtpZighcCl7aWYoZihsPW8oZSkpKXJldHVybiBzZXQobCx0LHIsZCk7cD11KDApfXJldHVybiBhKHAsInZhbHVlIik/ISghMT09PXAud3JpdGFibGV8fCFmKGQpKSYmKHM9aS5mKGQsdCl8fHUoMCkscy52YWx1ZT1yLG4uZihkLHQscyksITApOnZvaWQgMCE9PXAuc2V0JiYocC5zZXQuY2FsbChkLHIpLCEwKX0KLy8gMjYuMS4xMyBSZWZsZWN0LnNldCh0YXJnZXQsIHByb3BlcnR5S2V5LCBWIFssIHJlY2VpdmVyXSkKdmFyIG49cig5KSxpPXIoMjQpLG89cigyNSksYT1yKDE3KSxzPXIoMCksdT1yKDQ2KSxjPXIoMyksZj1yKDYpO3Mocy5TLCJSZWZsZWN0Iix7c2V0OnNldH0pfSwvKiAzNDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjE0IFJlZmxlY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90bykKdmFyIG49cigwKSxpPXIoMTA1KTtpJiZuKG4uUywiUmVmbGVjdCIse3NldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUsdCl7aS5jaGVjayhlLHQpO3RyeXtyZXR1cm4gaS5zZXQoZSx0KSwhMH1jYXRjaChlKXtyZXR1cm4hMX19fSl9LC8qIDM0NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9BcnJheS5wcm90b3R5cGUuaW5jbHVkZXMKdmFyIG49cigwKSxpPXIoNzkpKCEwKTtuKG4uUCwiQXJyYXkiLHtpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLHIoNDEpKCJpbmNsdWRlcyIpfSwvKiAzNDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1mbGF0TWFwLyNzZWMtQXJyYXkucHJvdG90eXBlLmZsYXRNYXAKdmFyIG49cigwKSxpPXIoMTczKSxvPXIoMTQpLGE9cigxMCkscz1yKDE2KSx1PXIoMTE5KTtuKG4uUCwiQXJyYXkiLHtmbGF0TWFwOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1vKHRoaXMpO3JldHVybiBzKGUpLHQ9YShuLmxlbmd0aCkscj11KG4sMCksaShyLG4sbix0LDAsMSxlLGFyZ3VtZW50c1sxXSkscn19KSxyKDQxKSgiZmxhdE1hcCIpfSwvKiAzNDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1mbGF0TWFwLyNzZWMtQXJyYXkucHJvdG90eXBlLmZsYXR0ZW4KdmFyIG49cigwKSxpPXIoMTczKSxvPXIoMTQpLGE9cigxMCkscz1yKDMzKSx1PXIoMTE5KTtuKG4uUCwiQXJyYXkiLHtmbGF0dGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzWzBdLHQ9byh0aGlzKSxyPWEodC5sZW5ndGgpLG49dSh0LDApO3JldHVybiBpKG4sdCx0LHIsMCx2b2lkIDA9PT1lPzE6cyhlKSksbn19KSxyKDQxKSgiZmxhdHRlbiIpfSwvKiAzNTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL21hdGhpYXNieW5lbnMvU3RyaW5nLnByb3RvdHlwZS5hdAp2YXIgbj1yKDApLGk9cigxMTEpKCEwKTtuKG4uUCwiU3RyaW5nIix7YXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlKX19KX0sLyogMzUxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXN0cmluZy1wYWQtc3RhcnQtZW5kCnZhciBuPXIoMCksaT1yKDE3NCk7bihuLlAsIlN0cmluZyIse3BhZFN0YXJ0OmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwhMCl9fSl9LC8qIDM1MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZAp2YXIgbj1yKDApLGk9cigxNzQpO24obi5QLCJTdHJpbmciLHtwYWRFbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCExKX19KX0sLyogMzUzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWJtYXJrYmFnZS9lY21hc2NyaXB0LXN0cmluZy1sZWZ0LXJpZ2h0LXRyaW0Kcig2MikoInRyaW1MZWZ0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLDEpfX0sInRyaW1TdGFydCIpfSwvKiAzNTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlYm1hcmtiYWdlL2VjbWFzY3JpcHQtc3RyaW5nLWxlZnQtcmlnaHQtdHJpbQpyKDYyKSgidHJpbVJpZ2h0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLDIpfX0sInRyaW1FbmQiKX0sLyogMzU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vU3RyaW5nLnByb3RvdHlwZS5tYXRjaEFsbC8KdmFyIG49cigwKSxpPXIoMzIpLG89cigxMCksYT1yKDgyKSxzPXIoODQpLHU9UmVnRXhwLnByb3RvdHlwZSxjPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcj1lLHRoaXMuX3M9dH07cigxMTMpKGMsIlJlZ0V4cCBTdHJpbmciLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fci5leGVjKHRoaXMuX3MpO3JldHVybnt2YWx1ZTplLGRvbmU6bnVsbD09PWV9fSksbihuLlAsIlN0cmluZyIse21hdGNoQWxsOmZ1bmN0aW9uKGUpe2lmKGkodGhpcyksIWEoZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSByZWdleHAhIik7dmFyIHQ9U3RyaW5nKHRoaXMpLHI9ImZsYWdzImluIHU/U3RyaW5nKGUuZmxhZ3MpOnMuY2FsbChlKSxuPW5ldyBSZWdFeHAoZS5zb3VyY2UsfnIuaW5kZXhPZigiZyIpP3I6ImciK3IpO3JldHVybiBuLmxhc3RJbmRleD1vKGUubGFzdEluZGV4KSxuZXcgYyhuLHQpfX0pfSwvKiAzNTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMTAxKSgiYXN5bmNJdGVyYXRvciIpfSwvKiAzNTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMTAxKSgib2JzZXJ2YWJsZSIpfSwvKiAzNTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9ycwp2YXIgbj1yKDApLGk9cigxNzIpLG89cigyMyksYT1yKDI0KSxzPXIoMTE3KTtuKG4uUywiT2JqZWN0Iix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yczpmdW5jdGlvbihlKXtmb3IodmFyIHQscixuPW8oZSksdT1hLmYsYz1pKG4pLGY9e30sbD0wO2MubGVuZ3RoPmw7KXZvaWQgMCE9PShyPXUobix0PWNbbCsrXSkpJiZzKGYsdCxyKTtyZXR1cm4gZn19KX0sLyogMzU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzCnZhciBuPXIoMCksaT1yKDE3NSkoITEpO24obi5TLCJPYmplY3QiLHt2YWx1ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9fSl9LC8qIDM2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC12YWx1ZXMtZW50cmllcwp2YXIgbj1yKDApLGk9cigxNzUpKCEwKTtuKG4uUywiT2JqZWN0Iix7ZW50cmllczpmdW5jdGlvbihlKXtyZXR1cm4gaShlKX19KX0sLyogMzYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTQpLG89cigxNiksYT1yKDkpOwovLyBCLjIuMi4yIE9iamVjdC5wcm90b3R5cGUuX19kZWZpbmVHZXR0ZXJfXyhQLCBnZXR0ZXIpCnIoOCkmJm4obi5QK3IoODkpLCJPYmplY3QiLHtfX2RlZmluZUdldHRlcl9fOmZ1bmN0aW9uKGUsdCl7YS5mKGkodGhpcyksZSx7Z2V0Om8odCksZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19KX0sLyogMzYyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTQpLG89cigxNiksYT1yKDkpOwovLyBCLjIuMi4zIE9iamVjdC5wcm90b3R5cGUuX19kZWZpbmVTZXR0ZXJfXyhQLCBzZXR0ZXIpCnIoOCkmJm4obi5QK3IoODkpLCJPYmplY3QiLHtfX2RlZmluZVNldHRlcl9fOmZ1bmN0aW9uKGUsdCl7YS5mKGkodGhpcyksZSx7c2V0Om8odCksZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19KX0sLyogMzYzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTQpLG89cigzMSksYT1yKDI1KSxzPXIoMjQpLmY7Ci8vIEIuMi4yLjQgT2JqZWN0LnByb3RvdHlwZS5fX2xvb2t1cEdldHRlcl9fKFApCnIoOCkmJm4obi5QK3IoODkpLCJPYmplY3QiLHtfX2xvb2t1cEdldHRlcl9fOmZ1bmN0aW9uKGUpe3ZhciB0LHI9aSh0aGlzKSxuPW8oZSwhMCk7ZG97aWYodD1zKHIsbikpcmV0dXJuIHQuZ2V0fXdoaWxlKHI9YShyKSl9fSl9LC8qIDM2NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDE0KSxvPXIoMzEpLGE9cigyNSkscz1yKDI0KS5mOwovLyBCLjIuMi41IE9iamVjdC5wcm90b3R5cGUuX19sb29rdXBTZXR0ZXJfXyhQKQpyKDgpJiZuKG4uUCtyKDg5KSwiT2JqZWN0Iix7X19sb29rdXBTZXR0ZXJfXzpmdW5jdGlvbihlKXt2YXIgdCxyPWkodGhpcyksbj1vKGUsITApO2Rve2lmKHQ9cyhyLG4pKXJldHVybiB0LnNldH13aGlsZShyPWEocikpfX0pfSwvKiAzNjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OCnZhciBuPXIoMCk7bihuLlArbi5SLCJNYXAiLHt0b0pTT046cigxNzYpKCJNYXAiKX0pfSwvKiAzNjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OCnZhciBuPXIoMCk7bihuLlArbi5SLCJTZXQiLHt0b0pTT046cigxNzYpKCJTZXQiKX0pfSwvKiAzNjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1tYXAub2YKcig5MCkoIk1hcCIpfSwvKiAzNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1zZXQub2YKcig5MCkoIlNldCIpfSwvKiAzNjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrbWFwLm9mCnIoOTApKCJXZWFrTWFwIil9LC8qIDM3MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXdlYWtzZXQub2YKcig5MCkoIldlYWtTZXQiKX0sLyogMzcxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtbWFwLmZyb20Kcig5MSkoIk1hcCIpfSwvKiAzNzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1zZXQuZnJvbQpyKDkxKSgiU2V0Iil9LC8qIDM3MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXdlYWttYXAuZnJvbQpyKDkxKSgiV2Vha01hcCIpfSwvKiAzNzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrc2V0LmZyb20Kcig5MSkoIldlYWtTZXQiKX0sLyogMzc1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtZ2xvYmFsCnZhciBuPXIoMCk7bihuLkcse2dsb2JhbDpyKDQpfSl9LC8qIDM3NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbAp2YXIgbj1yKDApO24obi5TLCJTeXN0ZW0iLHtnbG9iYWw6cig0KX0pfSwvKiAzNzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL3Byb3Bvc2FsLWlzLWVycm9yCnZhciBuPXIoMCksaT1yKDI4KTtuKG4uUywiRXJyb3IiLHtpc0Vycm9yOmZ1bmN0aW9uKGUpe3JldHVybiJFcnJvciI9PT1pKGUpfX0pfSwvKiAzNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtjbGFtcDpmdW5jdGlvbihlLHQscil7cmV0dXJuIE1hdGgubWluKHIsTWF0aC5tYXgodCxlKSl9fSl9LC8qIDM3OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKTtuKG4uUywiTWF0aCIse0RFR19QRVJfUkFEOk1hdGguUEkvMTgwfSl9LC8qIDM4MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKSxpPTE4MC9NYXRoLlBJO24obi5TLCJNYXRoIix7ZGVncmVlczpmdW5jdGlvbihlKXtyZXR1cm4gZSppfX0pfSwvKiAzODEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCksaT1yKDE3OCksbz1yKDE1OCk7bihuLlMsIk1hdGgiLHtmc2NhbGU6ZnVuY3Rpb24oZSx0LHIsbixhKXtyZXR1cm4gbyhpKGUsdCxyLG4sYSkpfX0pfSwvKiAzODIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwMwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7aWFkZGg6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9ZT4+PjAsbz10Pj4+MCxhPXI+Pj4wO3JldHVybiBvKyhuPj4+MCkrKChpJmF8KGl8YSkmfihpK2E+Pj4wKSk+Pj4zMSl8MH19KX0sLyogMzgzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDMKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2lzdWJoOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPWU+Pj4wLG89dD4+PjAsYT1yPj4+MDtyZXR1cm4gby0obj4+PjApLSgofmkmYXx+KGleYSkmaS1hPj4+MCk+Pj4zMSl8MH19KX0sLyogMzg0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDMKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2ltdWxoOmZ1bmN0aW9uKGUsdCl7dmFyIHI9K2Usbj0rdCxpPTY1NTM1JnIsbz02NTUzNSZuLGE9cj4+MTYscz1uPj4xNix1PShhKm8+Pj4wKSsoaSpvPj4+MTYpO3JldHVybiBhKnMrKHU+PjE2KSsoKGkqcz4+PjApKyg2NTUzNSZ1KT4+MTYpfX0pfSwvKiAzODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtSQURfUEVSX0RFRzoxODAvTWF0aC5QSX0pfSwvKiAzODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCksaT1NYXRoLlBJLzE4MDtuKG4uUywiTWF0aCIse3JhZGlhbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUqaX19KX0sLyogMzg3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7c2NhbGU6cigxNzgpfSl9LC8qIDM4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHt1bXVsaDpmdW5jdGlvbihlLHQpe3ZhciByPStlLG49K3QsaT02NTUzNSZyLG89NjU1MzUmbixhPXI+Pj4xNixzPW4+Pj4xNix1PShhKm8+Pj4wKSsoaSpvPj4+MTYpO3JldHVybiBhKnMrKHU+Pj4xNikrKChpKnM+Pj4wKSsoNjU1MzUmdSk+Pj4xNil9fSl9LC8qIDM4OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHA6Ly9qZmJhc3RpZW4uZ2l0aHViLmlvL3BhcGVycy9NYXRoLnNpZ25iaXQuaHRtbAp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7c2lnbmJpdDpmdW5jdGlvbihlKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4oZT0rZSkhPWU/ZTowPT1lPzEvZT09MS8wOmU+MH19KX0sLyogMzkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtZmluYWxseQp2YXIgbj1yKDApLGk9cigzMCksbz1yKDQpLGE9cig4Nikscz1yKDE2NSk7bihuLlArbi5SLCJQcm9taXNlIix7ZmluYWxseTpmdW5jdGlvbihlKXt2YXIgdD1hKHRoaXMsaS5Qcm9taXNlfHxvLlByb21pc2UpLHI9ImZ1bmN0aW9uIj09dHlwZW9mIGU7cmV0dXJuIHRoaXMudGhlbihyP2Z1bmN0aW9uKHIpe3JldHVybiBzKHQsZSgpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KX06ZSxyP2Z1bmN0aW9uKHIpe3JldHVybiBzKHQsZSgpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgcn0pfTplKX19KX0sLyogMzkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtdHJ5CnZhciBuPXIoMCksaT1yKDEyNCksbz1yKDE2NCk7bihuLlMsIlByb21pc2UiLHt0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9aS5mKHRoaXMpLHI9byhlKTtyZXR1cm4oci5lP3QucmVqZWN0OnQucmVzb2x2ZSkoci52KSx0LnByb21pc2V9fSl9LC8qIDM5MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzNyksaT1yKDMpLG89bi5rZXksYT1uLnNldDtuLmV4cCh7ZGVmaW5lTWV0YWRhdGE6ZnVuY3Rpb24oZSx0LHIsbil7YShlLHQsaShyKSxvKG4pKX19KX0sLyogMzkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM3KSxpPXIoMyksbz1uLmtleSxhPW4ubWFwLHM9bi5zdG9yZTtuLmV4cCh7ZGVsZXRlTWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOm8oYXJndW1lbnRzWzJdKSxuPWEoaSh0KSxyLCExKTtpZih2b2lkIDA9PT1ufHwhbi5kZWxldGUoZSkpcmV0dXJuITE7aWYobi5zaXplKXJldHVybiEwO3ZhciB1PXMuZ2V0KHQpO3JldHVybiB1LmRlbGV0ZShyKSwhIXUuc2l6ZXx8cy5kZWxldGUodCl9fSl9LC8qIDM5NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzNyksaT1yKDMpLG89cigyNSksYT1uLmhhcyxzPW4uZ2V0LHU9bi5rZXksYz1mdW5jdGlvbihlLHQscil7aWYoYShlLHQscikpcmV0dXJuIHMoZSx0LHIpO3ZhciBuPW8odCk7cmV0dXJuIG51bGwhPT1uP2MoZSxuLHIpOnZvaWQgMH07bi5leHAoe2dldE1ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGMoZSxpKHQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6dShhcmd1bWVudHNbMl0pKX19KX0sLyogMzk1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE2OCksaT1yKDE3Nyksbz1yKDM3KSxhPXIoMykscz1yKDI1KSx1PW8ua2V5cyxjPW8ua2V5LGY9ZnVuY3Rpb24oZSx0KXt2YXIgcj11KGUsdCksbz1zKGUpO2lmKG51bGw9PT1vKXJldHVybiByO3ZhciBhPWYobyx0KTtyZXR1cm4gYS5sZW5ndGg/ci5sZW5ndGg/aShuZXcgbihyLmNvbmNhdChhKSkpOmE6cn07by5leHAoe2dldE1ldGFkYXRhS2V5czpmdW5jdGlvbihlKXtyZXR1cm4gZihhKGUpLGFyZ3VtZW50cy5sZW5ndGg8Mj92b2lkIDA6Yyhhcmd1bWVudHNbMV0pKX19KX0sLyogMzk2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM3KSxpPXIoMyksbz1uLmdldCxhPW4ua2V5O24uZXhwKHtnZXRPd25NZXRhZGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBvKGUsaSh0KSxhcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOmEoYXJndW1lbnRzWzJdKSl9fSl9LC8qIDM5NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzNyksaT1yKDMpLG89bi5rZXlzLGE9bi5rZXk7bi5leHAoe2dldE93bk1ldGFkYXRhS2V5czpmdW5jdGlvbihlKXtyZXR1cm4gbyhpKGUpLGFyZ3VtZW50cy5sZW5ndGg8Mj92b2lkIDA6YShhcmd1bWVudHNbMV0pKX19KX0sLyogMzk4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM3KSxpPXIoMyksbz1yKDI1KSxhPW4uaGFzLHM9bi5rZXksdT1mdW5jdGlvbihlLHQscil7aWYoYShlLHQscikpcmV0dXJuITA7dmFyIG49byh0KTtyZXR1cm4gbnVsbCE9PW4mJnUoZSxuLHIpfTtuLmV4cCh7aGFzTWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdShlLGkodCksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDpzKGFyZ3VtZW50c1syXSkpfX0pfSwvKiAzOTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzcpLGk9cigzKSxvPW4uaGFzLGE9bi5rZXk7bi5leHAoe2hhc093bk1ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8oZSxpKHQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6YShhcmd1bWVudHNbMl0pKX19KX0sLyogNDAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM3KSxpPXIoMyksbz1yKDE2KSxhPW4ua2V5LHM9bi5zZXQ7bi5leHAoe21ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsbil7cyhlLHQsKHZvaWQgMCE9PW4/aTpvKShyKSxhKG4pKX19fSl9LC8qIDQwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yd2FsZHJvbi90YzM5LW5vdGVzL2Jsb2IvbWFzdGVyL2VzNi8yMDE0LTA5L3NlcHQtMjUubWQjNTEwLWdsb2JhbGFzYXAtZm9yLWVucXVldWluZy1hLW1pY3JvdGFzawp2YXIgbj1yKDApLGk9cigxMjMpKCksbz1yKDQpLnByb2Nlc3MsYT0icHJvY2VzcyI9PXIoMjgpKG8pO24obi5HLHthc2FwOmZ1bmN0aW9uKGUpe3ZhciB0PWEmJm8uZG9tYWluO2kodD90LmJpbmQoZSk6ZSl9fSl9LC8qIDQwMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlCnZhciBuPXIoMCksaT1yKDQpLG89cigzMCksYT1yKDEyMykoKSxzPXIoNykoIm9ic2VydmFibGUiKSx1PXIoMTYpLGM9cigzKSxmPXIoNTQpLGw9cig1NiksZD1yKDE4KSxwPXIoNTUpLHk9cC5SRVRVUk4saD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6dShlKX0sdj1mdW5jdGlvbihlKXt2YXIgdD1lLl9jO3QmJihlLl9jPXZvaWQgMCx0KCkpfSxnPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lLl9vfSxiPWZ1bmN0aW9uKGUpe2coZSl8fChlLl9vPXZvaWQgMCx2KGUpKX0sbT1mdW5jdGlvbihlLHQpe2MoZSksdGhpcy5fYz12b2lkIDAsdGhpcy5fbz1lLGU9bmV3IF8odGhpcyk7dHJ5e3ZhciByPXQoZSksbj1yO251bGwhPXImJigiZnVuY3Rpb24iPT10eXBlb2Ygci51bnN1YnNjcmliZT9yPWZ1bmN0aW9uKCl7bi51bnN1YnNjcmliZSgpfTp1KHIpLHRoaXMuX2M9cil9Y2F0Y2godCl7cmV0dXJuIHZvaWQgZS5lcnJvcih0KX1nKHRoaXMpJiZ2KHRoaXMpfTttLnByb3RvdHlwZT1sKHt9LHt1bnN1YnNjcmliZTpmdW5jdGlvbigpe2IodGhpcyl9fSk7dmFyIF89ZnVuY3Rpb24oZSl7dGhpcy5fcz1lfTtfLnByb3RvdHlwZT1sKHt9LHtuZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3M7aWYoIWcodCkpe3ZhciByPXQuX287dHJ5e3ZhciBuPWgoci5uZXh0KTtpZihuKXJldHVybiBuLmNhbGwocixlKX1jYXRjaChlKXt0cnl7Yih0KX1maW5hbGx5e3Rocm93IGV9fX19LGVycm9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3M7aWYoZyh0KSl0aHJvdyBlO3ZhciByPXQuX287dC5fbz12b2lkIDA7dHJ5e3ZhciBuPWgoci5lcnJvcik7aWYoIW4pdGhyb3cgZTtlPW4uY2FsbChyLGUpfWNhdGNoKGUpe3RyeXt2KHQpfWZpbmFsbHl7dGhyb3cgZX19cmV0dXJuIHYodCksZX0sY29tcGxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcztpZighZyh0KSl7dmFyIHI9dC5fbzt0Ll9vPXZvaWQgMDt0cnl7dmFyIG49aChyLmNvbXBsZXRlKTtlPW4/bi5jYWxsKHIsZSk6dm9pZCAwfWNhdGNoKGUpe3RyeXt2KHQpfWZpbmFsbHl7dGhyb3cgZX19cmV0dXJuIHYodCksZX19fSk7dmFyIFI9ZnVuY3Rpb24oZSl7Zih0aGlzLFIsIk9ic2VydmFibGUiLCJfZiIpLl9mPXUoZSl9O2woUi5wcm90b3R5cGUse3N1YnNjcmliZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG0oZSx0aGlzLl9mKX0sZm9yRWFjaDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcoby5Qcm9taXNlfHxpLlByb21pc2UpKGZ1bmN0aW9uKHIsbil7dShlKTt2YXIgaT10LnN1YnNjcmliZSh7bmV4dDpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGUodCl9Y2F0Y2goZSl7bihlKSxpLnVuc3Vic2NyaWJlKCl9fSxlcnJvcjpuLGNvbXBsZXRlOnJ9KX0pfX0pLGwoUix7ZnJvbTpmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOlIscj1oKGMoZSlbc10pO2lmKHIpe3ZhciBuPWMoci5jYWxsKGUpKTtyZXR1cm4gbi5jb25zdHJ1Y3Rvcj09PXQ/bjpuZXcgdChmdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzY3JpYmUoZSl9KX1yZXR1cm4gbmV3IHQoZnVuY3Rpb24odCl7dmFyIHI9ITE7cmV0dXJuIGEoZnVuY3Rpb24oKXtpZighcil7dHJ5e2lmKHAoZSwhMSxmdW5jdGlvbihlKXtpZih0Lm5leHQoZSkscilyZXR1cm4geX0pPT09eSlyZXR1cm59Y2F0Y2goZSl7aWYocil0aHJvdyBlO3JldHVybiB2b2lkIHQuZXJyb3IoZSl9dC5jb21wbGV0ZSgpfX0pLGZ1bmN0aW9uKCl7cj0hMH19KX0sb2Y6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWFyZ3VtZW50cy5sZW5ndGgscj1BcnJheSh0KTtlPHQ7KXJbZV09YXJndW1lbnRzW2UrK107cmV0dXJuIG5ldygiZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOlIpKGZ1bmN0aW9uKGUpe3ZhciB0PSExO3JldHVybiBhKGZ1bmN0aW9uKCl7aWYoIXQpe2Zvcih2YXIgbj0wO248ci5sZW5ndGg7KytuKWlmKGUubmV4dChyW25dKSx0KXJldHVybjtlLmNvbXBsZXRlKCl9fSksZnVuY3Rpb24oKXt0PSEwfX0pfX0pLGQoUi5wcm90b3R5cGUscyxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksbihuLkcse09ic2VydmFibGU6Un0pLHIoNTMpKCJPYnNlcnZhYmxlIil9LC8qIDQwMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGllOS0gc2V0VGltZW91dCAmIHNldEludGVydmFsIGFkZGl0aW9uYWwgcGFyYW1ldGVycyBmaXgKdmFyIG49cig0KSxpPXIoMCksbz1uLm5hdmlnYXRvcixhPVtdLnNsaWNlLHM9ISFvJiYvTVNJRSAuXC4vLnRlc3Qoby51c2VyQWdlbnQpLHU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yLGk9ISFuJiZhLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBlKG4/ZnVuY3Rpb24oKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jCigiZnVuY3Rpb24iPT10eXBlb2YgdD90OkZ1bmN0aW9uKHQpKS5hcHBseSh0aGlzLGkpfTp0LHIpfX07aShpLkcraS5CK2kuRipzLHtzZXRUaW1lb3V0OnUobi5zZXRUaW1lb3V0KSxzZXRJbnRlcnZhbDp1KG4uc2V0SW50ZXJ2YWwpfSl9LC8qIDQwNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxpPXIoMTIyKTtuKG4uRytuLkIse3NldEltbWVkaWF0ZTppLnNldCxjbGVhckltbWVkaWF0ZTppLmNsZWFyfSl9LC8qIDQwNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPXIoMTIxKSxpPXIoNDkpLG89cigxOSksYT1yKDQpLHM9cigxOCksdT1yKDYzKSxjPXIoNyksZj1jKCJpdGVyYXRvciIpLGw9YygidG9TdHJpbmdUYWciKSxkPXUuQXJyYXkscD17Q1NTUnVsZUxpc3Q6ITAsLy8gVE9ETzogTm90IHNwZWMgY29tcGxpYW50LCBzaG91bGQgYmUgZmFsc2UuCkNTU1N0eWxlRGVjbGFyYXRpb246ITEsQ1NTVmFsdWVMaXN0OiExLENsaWVudFJlY3RMaXN0OiExLERPTVJlY3RMaXN0OiExLERPTVN0cmluZ0xpc3Q6ITEsRE9NVG9rZW5MaXN0OiEwLERhdGFUcmFuc2Zlckl0ZW1MaXN0OiExLEZpbGVMaXN0OiExLEhUTUxBbGxDb2xsZWN0aW9uOiExLEhUTUxDb2xsZWN0aW9uOiExLEhUTUxGb3JtRWxlbWVudDohMSxIVE1MU2VsZWN0RWxlbWVudDohMSxNZWRpYUxpc3Q6ITAsLy8gVE9ETzogTm90IHNwZWMgY29tcGxpYW50LCBzaG91bGQgYmUgZmFsc2UuCk1pbWVUeXBlQXJyYXk6ITEsTmFtZWROb2RlTWFwOiExLE5vZGVMaXN0OiEwLFBhaW50UmVxdWVzdExpc3Q6ITEsUGx1Z2luOiExLFBsdWdpbkFycmF5OiExLFNWR0xlbmd0aExpc3Q6ITEsU1ZHTnVtYmVyTGlzdDohMSxTVkdQYXRoU2VnTGlzdDohMSxTVkdQb2ludExpc3Q6ITEsU1ZHU3RyaW5nTGlzdDohMSxTVkdUcmFuc2Zvcm1MaXN0OiExLFNvdXJjZUJ1ZmZlckxpc3Q6ITEsU3R5bGVTaGVldExpc3Q6ITAsLy8gVE9ETzogTm90IHNwZWMgY29tcGxpYW50LCBzaG91bGQgYmUgZmFsc2UuClRleHRUcmFja0N1ZUxpc3Q6ITEsVGV4dFRyYWNrTGlzdDohMSxUb3VjaExpc3Q6ITF9LHk9aShwKSxoPTA7aDx5Lmxlbmd0aDtoKyspe3ZhciB2LGc9eVtoXSxiPXBbZ10sbT1hW2ddLF89bSYmbS5wcm90b3R5cGU7aWYoXyYmKF9bZl18fHMoXyxmLGQpLF9bbF18fHMoXyxsLGcpLHVbZ109ZCxiKSlmb3IodiBpbiBuKV9bdl18fG8oXyx2LG5bdl0sITApfX0sLyogNDA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KKGZ1bmN0aW9uKHQpey8qKgogKiBDb3B5cmlnaHQgKGMpIDIwMTQsIEZhY2Vib29rLCBJbmMuCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqCiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZQogKiBodHRwczovL3Jhdy5naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL21hc3Rlci9MSUNFTlNFIGZpbGUuIEFuCiAqIGFkZGl0aW9uYWwgZ3JhbnQgb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbgogKiB0aGUgc2FtZSBkaXJlY3RvcnkuCiAqLwohZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHdyYXAoZSx0LHIsbil7Ci8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLgp2YXIgaT10JiZ0LnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvcj90OkdlbmVyYXRvcixvPU9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLGE9bmV3IENvbnRleHQobnx8W10pOwovLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsCi8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy4KcmV0dXJuIG8uX2ludm9rZT1tYWtlSW52b2tlTWV0aG9kKGUscixhKSxvfQovLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb24KLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkCi8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZQovLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlCi8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWQKLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZwovLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZQovLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGUKLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaAovLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuCmZ1bmN0aW9uIHRyeUNhdGNoKGUsdCxyKXt0cnl7cmV0dXJue3R5cGU6Im5vcm1hbCIsYXJnOmUuY2FsbCh0LHIpfX1jYXRjaChlKXtyZXR1cm57dHlwZToidGhyb3ciLGFyZzplfX19Ci8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZAovLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3IKLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXIKLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy4KZnVuY3Rpb24gR2VuZXJhdG9yKCl7fWZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCl7fWZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCl7fQovLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZQovLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLgpmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMoZSl7WyJuZXh0IiwidGhyb3ciLCJyZXR1cm4iXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ludm9rZSh0LGUpfX0pfWZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZSl7ZnVuY3Rpb24gaW52b2tlKHQscixuLG8pe3ZhciBhPXRyeUNhdGNoKGVbdF0sZSxyKTtpZigidGhyb3ciIT09YS50eXBlKXt2YXIgcz1hLmFyZyx1PXMudmFsdWU7cmV0dXJuIHUmJiJvYmplY3QiPT10eXBlb2YgdSYmaS5jYWxsKHUsIl9fYXdhaXQiKT9Qcm9taXNlLnJlc29sdmUodS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKGUpe2ludm9rZSgibmV4dCIsZSxuLG8pfSxmdW5jdGlvbihlKXtpbnZva2UoInRocm93IixlLG4sbyl9KTpQcm9taXNlLnJlc29sdmUodSkudGhlbihmdW5jdGlvbihlKXsKLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXMKLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlCi8vIGN1cnJlbnQgaXRlcmF0aW9uLiBJZiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZCwgaG93ZXZlciwgdGhlCi8vIHJlc3VsdCBmb3IgdGhpcyBpdGVyYXRpb24gd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBzYW1lCi8vIHJlYXNvbi4gTm90ZSB0aGF0IHJlamVjdGlvbnMgb2YgeWllbGRlZCBQcm9taXNlcyBhcmUgbm90Ci8vIHRocm93biBiYWNrIGludG8gdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgYXMgaXMgdGhlIGNhc2UKLy8gd2hlbiBhbiBhd2FpdGVkIFByb21pc2UgaXMgcmVqZWN0ZWQuIFRoaXMgZGlmZmVyZW5jZSBpbgovLyBiZWhhdmlvciBiZXR3ZWVuIHlpZWxkIGFuZCBhd2FpdCBpcyBpbXBvcnRhbnQsIGJlY2F1c2UgaXQKLy8gYWxsb3dzIHRoZSBjb25zdW1lciB0byBkZWNpZGUgd2hhdCB0byBkbyB3aXRoIHRoZSB5aWVsZGVkCi8vIHJlamVjdGlvbiAoc3dhbGxvdyBpdCBhbmQgY29udGludWUsIG1hbnVhbGx5IC50aHJvdyBpdCBiYWNrCi8vIGludG8gdGhlIGdlbmVyYXRvciwgYWJhbmRvbiBpdGVyYXRpb24sIHdoYXRldmVyKS4gV2l0aAovLyBhd2FpdCwgYnkgY29udHJhc3QsIHRoZXJlIGlzIG5vIG9wcG9ydHVuaXR5IHRvIGV4YW1pbmUgdGhlCi8vIHJlamVjdGlvbiByZWFzb24gb3V0c2lkZSB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBzbyB0aGUKLy8gb25seSBvcHRpb24gaXMgdG8gdGhyb3cgaXQgZnJvbSB0aGUgYXdhaXQgZXhwcmVzc2lvbiwgYW5kCi8vIGxldCB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhbmRsZSB0aGUgZXhjZXB0aW9uLgpzLnZhbHVlPWUsbihzKX0sbyl9byhhLmFyZyl9ZnVuY3Rpb24gZW5xdWV1ZShlLHQpe2Z1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsbil7aW52b2tlKGUsdCxyLG4pfSl9Ci8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWwKLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsCi8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWYKLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG8KLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsCi8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvCi8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHkKLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHMKLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHkKLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGUKLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHkKLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLgovLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlcgovLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuCnJldHVybiByPXI/ci50aGVuKGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKTpjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpfSJvYmplY3QiPT10eXBlb2YgdC5wcm9jZXNzJiZ0LnByb2Nlc3MuZG9tYWluJiYoaW52b2tlPXQucHJvY2Vzcy5kb21haW4uYmluZChpbnZva2UpKTt2YXIgcjsKLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCwKLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuCnRoaXMuX2ludm9rZT1lbnF1ZXVlfWZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoZSx0LHIpe3ZhciBuPWw7cmV0dXJuIGZ1bmN0aW9uKGksbyl7aWYobj09PXApdGhyb3cgbmV3IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7aWYobj09PXkpe2lmKCJ0aHJvdyI9PT1pKXRocm93IG87Ci8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6Ci8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWUKcmV0dXJuIGRvbmVSZXN1bHQoKX1mb3Ioci5tZXRob2Q9aSxyLmFyZz1vOzspe3ZhciBhPXIuZGVsZWdhdGU7aWYoYSl7dmFyIHM9bWF5YmVJbnZva2VEZWxlZ2F0ZShhLHIpO2lmKHMpe2lmKHM9PT1oKWNvbnRpbnVlO3JldHVybiBzfX1pZigibmV4dCI9PT1yLm1ldGhvZCkKLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzCi8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uCnIuc2VudD1yLl9zZW50PXIuYXJnO2Vsc2UgaWYoInRocm93Ij09PXIubWV0aG9kKXtpZihuPT09bCl0aHJvdyBuPXksci5hcmc7ci5kaXNwYXRjaEV4Y2VwdGlvbihyLmFyZyl9ZWxzZSJyZXR1cm4iPT09ci5tZXRob2QmJnIuYWJydXB0KCJyZXR1cm4iLHIuYXJnKTtuPXA7dmFyIHU9dHJ5Q2F0Y2goZSx0LHIpO2lmKCJub3JtYWwiPT09dS50eXBlKXtpZigKLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PQovLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uCm49ci5kb25lP3k6ZCx1LmFyZz09PWgpY29udGludWU7cmV0dXJue3ZhbHVlOnUuYXJnLGRvbmU6ci5kb25lfX0idGhyb3ciPT09dS50eXBlJiYobj15LAovLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlCi8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuCnIubWV0aG9kPSJ0aHJvdyIsci5hcmc9dS5hcmcpfX19Ci8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZQovLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlCi8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLAovLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC4KZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShlLHQpe3ZhciBuPWUuaXRlcmF0b3JbdC5tZXRob2RdO2lmKG49PT1yKXtpZigKLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93Ci8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuCnQuZGVsZWdhdGU9bnVsbCwidGhyb3ciPT09dC5tZXRob2Qpe2lmKGUuaXRlcmF0b3IucmV0dXJuJiYoCi8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGEKLy8gY2hhbmNlIHRvIGNsZWFuIHVwLgp0Lm1ldGhvZD0icmV0dXJuIix0LmFyZz1yLG1heWJlSW52b2tlRGVsZWdhdGUoZSx0KSwidGhyb3ciPT09dC5tZXRob2QpKQovLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbQovLyAicmV0dXJuIiB0byAidGhyb3ciLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LgpyZXR1cm4gaDt0Lm1ldGhvZD0idGhyb3ciLHQuYXJnPW5ldyBUeXBlRXJyb3IoIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2QiKX1yZXR1cm4gaH12YXIgaT10cnlDYXRjaChuLGUuaXRlcmF0b3IsdC5hcmcpO2lmKCJ0aHJvdyI9PT1pLnR5cGUpcmV0dXJuIHQubWV0aG9kPSJ0aHJvdyIsdC5hcmc9aS5hcmcsdC5kZWxlZ2F0ZT1udWxsLGg7dmFyIG89aS5hcmc7Ci8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5Ci8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuCi8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS4KLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzICJ0aHJvdyIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZQovLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmCi8vIGNvbnRleHQubWV0aG9kIHdhcyAibmV4dCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlbgovLyAiY29uc3VtZWQiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzCi8vICJyZXR1cm4iLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZQovLyBvdXRlciBnZW5lcmF0b3IuCi8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoCi8vIHRoZSBvdXRlciBnZW5lcmF0b3IuCnJldHVybiBvP28uZG9uZT8odFtlLnJlc3VsdE5hbWVdPW8udmFsdWUsdC5uZXh0PWUubmV4dExvYywicmV0dXJuIiE9PXQubWV0aG9kJiYodC5tZXRob2Q9Im5leHQiLHQuYXJnPXIpLHQuZGVsZWdhdGU9bnVsbCxoKTpvOih0Lm1ldGhvZD0idGhyb3ciLHQuYXJnPW5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0IiksdC5kZWxlZ2F0ZT1udWxsLGgpfWZ1bmN0aW9uIHB1c2hUcnlFbnRyeShlKXt2YXIgdD17dHJ5TG9jOmVbMF19OzEgaW4gZSYmKHQuY2F0Y2hMb2M9ZVsxXSksMiBpbiBlJiYodC5maW5hbGx5TG9jPWVbMl0sdC5hZnRlckxvYz1lWzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaCh0KX1mdW5jdGlvbiByZXNldFRyeUVudHJ5KGUpe3ZhciB0PWUuY29tcGxldGlvbnx8e307dC50eXBlPSJub3JtYWwiLGRlbGV0ZSB0LmFyZyxlLmNvbXBsZXRpb249dH1mdW5jdGlvbiBDb250ZXh0KGUpewovLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2gKLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbQovLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuCnRoaXMudHJ5RW50cmllcz1be3RyeUxvYzoicm9vdCJ9XSxlLmZvckVhY2gocHVzaFRyeUVudHJ5LHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIHZhbHVlcyhlKXtpZihlKXt2YXIgdD1lW2FdO2lmKHQpcmV0dXJuIHQuY2FsbChlKTtpZigiZnVuY3Rpb24iPT10eXBlb2YgZS5uZXh0KXJldHVybiBlO2lmKCFpc05hTihlLmxlbmd0aCkpe3ZhciBuPS0xLG89ZnVuY3Rpb24gbmV4dCgpe2Zvcig7KytuPGUubGVuZ3RoOylpZihpLmNhbGwoZSxuKSlyZXR1cm4gbmV4dC52YWx1ZT1lW25dLG5leHQuZG9uZT0hMSxuZXh0O3JldHVybiBuZXh0LnZhbHVlPXIsbmV4dC5kb25lPSEwLG5leHR9O3JldHVybiBvLm5leHQ9b319Ci8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy4KcmV0dXJue25leHQ6ZG9uZVJlc3VsdH19ZnVuY3Rpb24gZG9uZVJlc3VsdCgpe3JldHVybnt2YWx1ZTpyLGRvbmU6ITB9fXZhciByLG49T2JqZWN0LnByb3RvdHlwZSxpPW4uaGFzT3duUHJvcGVydHksbz0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxhPW8uaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixzPW8uYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsdT1vLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyIsYz0ib2JqZWN0Ij09dHlwZW9mIGUsZj10LnJlZ2VuZXJhdG9yUnVudGltZTtpZihmKQovLyBEb24ndCBib3RoZXIgZXZhbHVhdGluZyB0aGUgcmVzdCBvZiB0aGlzIGZpbGUgaWYgdGhlIHJ1bnRpbWUgd2FzCi8vIGFscmVhZHkgZGVmaW5lZCBnbG9iYWxseS4KLy8gSWYgcmVnZW5lcmF0b3JSdW50aW1lIGlzIGRlZmluZWQgZ2xvYmFsbHkgYW5kIHdlJ3JlIGluIGEgbW9kdWxlLAovLyBtYWtlIHRoZSBleHBvcnRzIG9iamVjdCBpZGVudGljYWwgdG8gcmVnZW5lcmF0b3JSdW50aW1lLgpyZXR1cm4gdm9pZChjJiYoZS5leHBvcnRzPWYpKTsKLy8gRGVmaW5lIHRoZSBydW50aW1lIGdsb2JhbGx5IChhcyBleHBlY3RlZCBieSBnZW5lcmF0ZWQgY29kZSkgYXMgZWl0aGVyCi8vIG1vZHVsZS5leHBvcnRzIChpZiB3ZSdyZSBpbiBhIG1vZHVsZSkgb3IgYSBuZXcsIGVtcHR5IG9iamVjdC4KZj10LnJlZ2VuZXJhdG9yUnVudGltZT1jP2UuZXhwb3J0czp7fSxmLndyYXA9d3JhcDt2YXIgbD0ic3VzcGVuZGVkU3RhcnQiLGQ9InN1c3BlbmRlZFlpZWxkIixwPSJleGVjdXRpbmciLHk9ImNvbXBsZXRlZCIsaD17fSx2PXt9O3ZbYV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dmFyIGc9T2JqZWN0LmdldFByb3RvdHlwZU9mLGI9ZyYmZyhnKHZhbHVlcyhbXSkpKTtiJiZiIT09biYmaS5jYWxsKGIsYSkmJigKLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWQKLy8gb2YgdGhlIHBvbHlmaWxsLgp2PWIpO3ZhciBtPUdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZT1HZW5lcmF0b3IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodik7R2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlPW0uY29uc3RydWN0b3I9R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3I9R2VuZXJhdG9yRnVuY3Rpb24sR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGVbdV09R2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWU9IkdlbmVyYXRvckZ1bmN0aW9uIixmLmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUuY29uc3RydWN0b3I7Ci8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW4KLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LgpyZXR1cm4hIXQmJih0PT09R2VuZXJhdG9yRnVuY3Rpb258fCJHZW5lcmF0b3JGdW5jdGlvbiI9PT0odC5kaXNwbGF5TmFtZXx8dC5uYW1lKSl9LGYubWFyaz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTooZS5fX3Byb3RvX189R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsdSBpbiBlfHwoZVt1XT0iR2VuZXJhdG9yRnVuY3Rpb24iKSksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShtKSxlfSwKLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvCi8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0Ci8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgIl9fYXdhaXQiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzCi8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuCmYuYXdyYXA9ZnVuY3Rpb24oZSl7cmV0dXJue19fYXdhaXQ6ZX19LGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSksQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbc109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZi5Bc3luY0l0ZXJhdG9yPUFzeW5jSXRlcmF0b3IsCi8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2YKLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mCi8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLgpmLmFzeW5jPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPW5ldyBBc3luY0l0ZXJhdG9yKHdyYXAoZSx0LHIsbikpO3JldHVybiBmLmlzR2VuZXJhdG9yRnVuY3Rpb24odCk/aTppLm5leHQoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRvbmU/ZS52YWx1ZTppLm5leHQoKX0pfSwKLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGUKLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLgpkZWZpbmVJdGVyYXRvck1ldGhvZHMobSksbVt1XT0iR2VuZXJhdG9yIiwKLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGUKLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGUKLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3IKLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uCi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLgptW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LG0udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0sZi5rZXlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiBlKXQucHVzaChyKTsKLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXAKLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi4KcmV0dXJuIHQucmV2ZXJzZSgpLGZ1bmN0aW9uIG5leHQoKXtmb3IoO3QubGVuZ3RoOyl7dmFyIHI9dC5wb3AoKTtpZihyIGluIGUpcmV0dXJuIG5leHQudmFsdWU9cixuZXh0LmRvbmU9ITEsbmV4dH0KLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlCi8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzCi8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLgpyZXR1cm4gbmV4dC5kb25lPSEwLG5leHR9fSxmLnZhbHVlcz12YWx1ZXMsQ29udGV4dC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkNvbnRleHQscmVzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsCi8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzCi8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uCnRoaXMuc2VudD10aGlzLl9zZW50PXIsdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5hcmc9cix0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KSwhZSlmb3IodmFyIHQgaW4gdGhpcykKLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczoKInQiPT09dC5jaGFyQXQoMCkmJmkuY2FsbCh0aGlzLHQpJiYhaXNOYU4oK3Quc2xpY2UoMSkpJiYodGhpc1t0XT1yKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgZT10aGlzLnRyeUVudHJpZXNbMF0sdD1lLmNvbXBsZXRpb247aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbihlKXtmdW5jdGlvbiBoYW5kbGUobixpKXsKLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jaywKLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS4KcmV0dXJuIGEudHlwZT0idGhyb3ciLGEuYXJnPWUsdC5uZXh0PW4saSYmKHQubWV0aG9kPSJuZXh0Iix0LmFyZz1yKSwhIWl9aWYodGhpcy5kb25lKXRocm93IGU7Zm9yKHZhciB0PXRoaXMsbj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7bj49MDstLW4pe3ZhciBvPXRoaXMudHJ5RW50cmllc1tuXSxhPW8uY29tcGxldGlvbjtpZigicm9vdCI9PT1vLnRyeUxvYykKLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGUKLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvCi8vIHRocm93IHRoZSBleGNlcHRpb24uCnJldHVybiBoYW5kbGUoImVuZCIpO2lmKG8udHJ5TG9jPD10aGlzLnByZXYpe3ZhciBzPWkuY2FsbChvLCJjYXRjaExvYyIpLHU9aS5jYWxsKG8sImZpbmFsbHlMb2MiKTtpZihzJiZ1KXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gaGFuZGxlKG8uY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIGhhbmRsZShvLmZpbmFsbHlMb2MpfWVsc2UgaWYocyl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGhhbmRsZShvLmNhdGNoTG9jLCEwKX1lbHNle2lmKCF1KXRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBoYW5kbGUoby5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIG49dGhpcy50cnlFbnRyaWVzW3JdO2lmKG4udHJ5TG9jPD10aGlzLnByZXYmJmkuY2FsbChuLCJmaW5hbGx5TG9jIikmJnRoaXMucHJldjxuLmZpbmFsbHlMb2Mpe3ZhciBvPW47YnJlYWt9fW8mJigiYnJlYWsiPT09ZXx8ImNvbnRpbnVlIj09PWUpJiZvLnRyeUxvYzw9dCYmdDw9by5maW5hbGx5TG9jJiYoCi8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGEKLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLgpvPW51bGwpO3ZhciBhPW8/by5jb21wbGV0aW9uOnt9O3JldHVybiBhLnR5cGU9ZSxhLmFyZz10LG8/KHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLm5leHQ9by5maW5hbGx5TG9jLGgpOnRoaXMuY29tcGxldGUoYSl9LGNvbXBsZXRlOmZ1bmN0aW9uKGUsdCl7aWYoInRocm93Ij09PWUudHlwZSl0aHJvdyBlLmFyZztyZXR1cm4iYnJlYWsiPT09ZS50eXBlfHwiY29udGludWUiPT09ZS50eXBlP3RoaXMubmV4dD1lLmFyZzoicmV0dXJuIj09PWUudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPWUuYXJnLHRoaXMubWV0aG9kPSJyZXR1cm4iLHRoaXMubmV4dD0iZW5kIik6Im5vcm1hbCI9PT1lLnR5cGUmJnQmJih0aGlzLm5leHQ9dCksaH0sZmluaXNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLmZpbmFsbHlMb2M9PT1lKXJldHVybiB0aGlzLmNvbXBsZXRlKHIuY29tcGxldGlvbixyLmFmdGVyTG9jKSxyZXNldFRyeUVudHJ5KHIpLGh9fSxjYXRjaDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgcj10aGlzLnRyeUVudHJpZXNbdF07aWYoci50cnlMb2M9PT1lKXt2YXIgbj1yLmNvbXBsZXRpb247aWYoInRocm93Ij09PW4udHlwZSl7dmFyIGk9bi5hcmc7cmVzZXRUcnlFbnRyeShyKX1yZXR1cm4gaX19Ci8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvbgovLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suCnRocm93IG5ldyBFcnJvcigiaWxsZWdhbCBjYXRjaCBhdHRlbXB0Iil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24oZSx0LG4pewovLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndAovLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuCnJldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjp2YWx1ZXMoZSkscmVzdWx0TmFtZTp0LG5leHRMb2M6bn0sIm5leHQiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1yKSxofX19KAovLyBBbW9uZyB0aGUgdmFyaW91cyB0cmlja3MgZm9yIG9idGFpbmluZyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsCi8vIG9iamVjdCwgdGhpcyBzZWVtcyB0byBiZSB0aGUgbW9zdCByZWxpYWJsZSB0ZWNobmlxdWUgdGhhdCBkb2VzIG5vdAovLyB1c2UgaW5kaXJlY3QgZXZhbCAod2hpY2ggdmlvbGF0ZXMgQ29udGVudCBTZWN1cml0eSBQb2xpY3kpLgoib2JqZWN0Ij09dHlwZW9mIHQ/dDoib2JqZWN0Ij09dHlwZW9mIHdpbmRvdz93aW5kb3c6Im9iamVjdCI9PXR5cGVvZiBzZWxmP3NlbGY6dGhpcyl9KS5jYWxsKHQscigxNDQpKX0sLyogNDA3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQwOCksZS5leHBvcnRzPXIoMzApLlJlZ0V4cC5lc2NhcGV9LC8qIDQwOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZW5qYW1pbmdyL1JleEV4cC5lc2NhcGUKdmFyIG49cigwKSxpPXIoNDA5KSgvW1xcXiQqKz8uKCl8W1xde31dL2csIlxcJCYiKTtuKG4uUywiUmVnRXhwIix7ZXNjYXBlOmZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfX0pfSwvKiA0MDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj10PT09T2JqZWN0KHQpP2Z1bmN0aW9uKGUpe3JldHVybiB0W2VdfTp0O3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gU3RyaW5nKHQpLnJlcGxhY2UoZSxyKX19fSwvKiA0MTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxMiksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cig5NiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNDM0KSxkPXIoMTEpLHA9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShkKSx5PXIoNDM1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoeSksdj1yKDQ2NSksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLGI9cig0NjkpLG09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChiKSxfPXIoNDgwKSxSPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksdz1yKDE1KSxTPXIoOTkpLE89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChTKSxQPXIoNDgyKSxrPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoUCksTT1yKDQ4MyksTD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KE0pLHg9cig0ODQpLEU9cigxMzgpLEQ9cig0ODUpLFU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChEKSxBPXIoNDg3KSxqPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoQSksST1yKDQ4OCksQz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEkpLFQ9cig0OTMpLE49X2ludGVyb3BSZXF1aXJlRGVmYXVsdChUKSxGPXIoNDk0KSxxPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoRiksSD1yKDUwNSksQj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEgpLEc9cig1MDcpLEs9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChHKSxWPXAuZ2V0TG9nZ2VyKCJSdW50aW1lVUEiKSxXPWZ1bmN0aW9uKCl7LyoqCiAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIFJ1bnRpbWUgVXNlciBBZ2VudAogICAqIEBwYXJhbSB7ZGVzY3JpcHRvcn0gcnVudGltZURlc2NyaXB0b3IgLSBwYXNzIGFsbCB0aGUgaHlwZXJ0eSBydW50aW1lIGRlc2NyaXB0b3IKICAgKiBAcGFyYW0ge3J1bnRpbWVGYWN0b3J5fSBydW50aW1lRmFjdG9yeSAtIFNwZWNpZmljIGltcGxlbWVudGF0aW9uIGZvciB0aGUgZW52aXJvbm1lbnQgd2hlcmUgdGhlIGNvcmUgcnVudGltZSB3aWxsIHJ1bjsKICAgKiBAcGFyYW0ge2RvbWFpbn0gZG9tYWluVVJMIC0gc3BlY2lmeSB0aGUgZG9tYWluIGJhc2UgZm9yIHRoZSBydW50aW1lOwogICAqLwpmdW5jdGlvbiBSdW50aW1lVUEoZSx0LHIpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxSdW50aW1lVUEpLCFlKXRocm93IG5ldyBFcnJvcigiVGhlIHJ1bnRpbWUgZGVzY3JpcHRvciBpcyBhIG5lZWRlZCBwYXJhbWV0ZXIiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIlRoZSBzYW5kYm94IGZhY3RvcnkgaXMgYSBuZWVkZWQgcGFyYW1ldGVyIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJZb3UgbmVlZCB0aGUgZG9tYWluIG9mIHJ1bnRpbWUiKTtpZigKLy8gQ29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCBpbmZvcm1hdGlvbiByZWxhdGVkIHdpdGggc2VydmVycwp0aGlzLnJ1bnRpbWVDb25maWd1cmF0aW9uPSgwLGEuZGVmYXVsdCkoe2RvbWFpbjpyfSx4LnJ1bnRpbWVDb25maWd1cmF0aW9uKSx0aGlzLnJ1bnRpbWVGYWN0b3J5PXQsdGhpcy5ydW50aW1lQ2F0YWxvZ3VlPXQuY3JlYXRlUnVudGltZUNhdGFsb2d1ZSgpLHRoaXMubG9nPVYsdGhpcy5sb2dMZXZlbHM9bC5sb2csZS5wMnBIYW5kbGVyU3R1YiYmInN0cmluZyI9PXR5cGVvZiBlLnAycEhhbmRsZXJTdHViJiZlLnAycEhhbmRsZXJTdHViLmluY2x1ZGVzKCI6Ly8iKT90aGlzLnAycD0hMDp0aGlzLnAycD0hMSxFLnJ1bnRpbWVVdGlscy5ydW50aW1lRGVzY3JpcHRvcj1lLHRoaXMucnVudGltZVV0aWxzPUUucnVudGltZVV0aWxzLCJmdW5jdGlvbiIhPXR5cGVvZiB0LmNyZWF0ZVJ1bnRpbWVDYXRhbG9ndWUpdGhyb3cgbmV3IEVycm9yKCJDaGVjayB5b3VyIFJ1bnRpbWUgRmFjdG9yeSBiZWNhdXNlIGl0IG5lZWRzIHRoZSBSdW50aW1lIENhdGFsb2d1ZSBpbXBsZW1lbnRhdGlvbiIpO2lmKHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyPXQuY3JlYXRlUnVudGltZUNhdGFsb2d1ZSgpLCJmdW5jdGlvbiIhPXR5cGVvZiB0LnBlcnNpc3RlbmNlTWFuYWdlcil0aHJvdyBuZXcgRXJyb3IoIkNoZWNrIHlvdXIgUnVudGltZSBGYWN0b3J5IGJlY2F1c2UgaXQgbmVlZHMgdGhlIFBlcnNpc3RlbmNlIE1hbmFnZXIgaW1wbGVtZW50YXRpb24iKTtpZih0aGlzLnBlcnNpc3RlbmNlTWFuYWdlcj10LnBlcnNpc3RlbmNlTWFuYWdlcigpLCJmdW5jdGlvbiIhPXR5cGVvZiB0LnN0b3JhZ2VNYW5hZ2VyKXRocm93IG5ldyBFcnJvcigiQ2hlY2sgeW91ciBSdW50aW1lIEZhY3RvcnkgYmVjYXVzZSBpdCBuZWVkcyB0aGUgU3RvcmFnZSBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIik7dGhpcy5zdG9yYWdlTWFuYWdlcj10LnN0b3JhZ2VNYW5hZ2VyKCksImZ1bmN0aW9uIj09dHlwZW9mIHQucnVudGltZUNhcGFiaWxpdGllcz90aGlzLnJ1bnRpbWVDYXBhYmlsaXRpZXM9dC5ydW50aW1lQ2FwYWJpbGl0aWVzKHRoaXMuc3RvcmFnZU1hbmFnZXIpOlYuaW5mbygiQ2hlY2sgeW91ciBSdW50aW1lRmFjdG9yeSBiZWNhdXNlIGl0IG5lZWRzIHRoZSBSdW50aW1lIENhcGFiaWxpdGllcyBpbXBsZW1lbnRhdGlvbiIpfS8qKgogICAqIEludGlhbGl6ZSB0aGUgaW5zdGFsbGF0aW9uIG9mIHJ1bnRpbWUKICAgKgogICAqIEBhY2Nlc3MgcHVibGljCiAgICogQHJldHVybiB7UHJvbWlzZTxCb29sZWFuLCBFcnJvcj59IHRoaXMgaXMgUHJvbWlzZSBhbmQgaWYgdGhlIGluc3RhbGxhdGlvbiBwcm9jZXNzIGhhcHBlbmVkIHdpdGhvdXQgYW55IHByb2JsZW1zIHJldHVybnMgdHJ1ZSBvdGhlcndpc2UgdGhlIGVycm9yLgogICAqCiAgICogQG1lbWJlck9mIFJ1bnRpbWVVQQogICAqLwpyZXR1cm4oMCxmLmRlZmF1bHQpKFJ1bnRpbWVVQSxbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7ZS5kb21haW49ZS5ydW50aW1lQ29uZmlndXJhdGlvbi5kb21haW47dHJ5e3ZhciBuPWUucnVudGltZUNhcGFiaWxpdGllcy5nZXRSdW50aW1lQ2FwYWJpbGl0aWVzKCksbz1lLnN0b3JhZ2VNYW5hZ2VyLmdldCgicnVudGltZTpVUkwiKSxzPWUuc3RvcmFnZU1hbmFnZXIuZ2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiksdT1lLnN0b3JhZ2VNYW5hZ2VyLmdldCgiaHlwZXJ0eVJlc291cmNlcyIpLGM9ZS5zdG9yYWdlTWFuYWdlci5nZXQoInAycEhhbmRsZXI6VVJMIik7aS5kZWZhdWx0LmFsbChbbyxuLHMsdSxjXSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZS5ydW50aW1lVVJMPXRbMF0/dFswXS5ydW50aW1lVVJMOnRbMF0sZS5ydW50aW1lVVJMfHwoZS5ydW50aW1lVVJMPSJydW50aW1lOi8vIitlLmRvbWFpbisiLyIrKDAsdy5nZW5lcmF0ZUdVSUQpKCksZS5zdG9yYWdlTWFuYWdlci5zZXQoInJ1bnRpbWU6VVJMIiwxLHtydW50aW1lVVJMOmUucnVudGltZVVSTH0pKSxlLmNhcGFiaWxpdGllcz10WzFdLCgwLGEuZGVmYXVsdCkoRS5ydW50aW1lVXRpbHMucnVudGltZUNhcGFiaWxpdGllcy5jb25zdHJhaW50cyx0WzFdKSxlLl9kYXRhT2JqZWN0c1N0b3JhZ2U9bmV3IEMuZGVmYXVsdChlLnN0b3JhZ2VNYW5hZ2VyLHRbMl18fHt9KSxlLl9oeXBlcnR5UmVzb3VyY2VzPXRbM118fHt9LGUucDJwSGFuZGxlclVSTD10WzRdP3RbNF0ucDJwSGFuZGxlclVSTDp0WzRdLGUucDJwSGFuZGxlclVSTHx8KGUucDJwSGFuZGxlclVSTD1lLnJ1bnRpbWVVUkwrIi9wMnBoYW5kbGVyLyIrKDAsdy5nZW5lcmF0ZUdVSUQpKCksVi5pbmZvKCJbUnVudGltZVVBIC0gaW5pdF0gUDJQSGFuZGxlclVSTDogIixlLnAycEhhbmRsZXJVUkwpLGUuc3RvcmFnZU1hbmFnZXIuc2V0KCJwMnBIYW5kbGVyOlVSTCIsMSx7cDJwSGFuZGxlclVSTDplLnAycEhhbmRsZXJVUkx9KSksZS5fbG9hZENvbXBvbmVudHMoKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuX2h5cGVydHlSZXNvdXJjZXNTdG9yYWdlPW5ldyBOLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLnN0b3JhZ2VNYW5hZ2VyLGUuX2h5cGVydHlSZXNvdXJjZXMpLGUucDJwPyhWLmluZm8oIltSdW50aW1lVUEgLSBpbml0XSBsb2FkIHAycEhhbmRsZXI6ICIsdCksZS5fbG9hZFAyUEhhbmRsZXIoKSk6KFYuaW5mbygiW1J1bnRpbWVVQSAtIGluaXRdIFAyUCBub3Qgc3VwcG9ydGVkIiksIlAyUCBOb3QgU3VwcG9ydGVkIil9KS50aGVuKGZ1bmN0aW9uKGUpe1YuaW5mbygiW3J1bnRpbWUgdWEgLSBpbml0XSAtIHN0YXR1czogIixlKSx0KCEwKX0sZnVuY3Rpb24oZSl7Vi5lcnJvcigiRVJST1I6ICIsZSksdCghMCl9KX1jYXRjaChlKXtyKGUpfX0pfX0se2tleToiX2xvYWRQMlBIYW5kbGVyIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24odCl7dmFyIHI9RS5ydW50aW1lVXRpbHMucnVudGltZURlc2NyaXB0b3Isbj1yLnAycEhhbmRsZXJTdHViLGk9e2lzSGFuZGxlclN0dWI6ITAscnVudGltZVVSTDplLnJ1bnRpbWVVUkx9O1YubG9nKCJbUnVudGltZVVBIGxvYWRQMlBIYW5kbGVyXSBQMlBTdHViSGFuZGxlcjogIixuKSxlLmxvYWRlci5sb2FkU3R1YihuLGkpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49ZS5ydW50aW1lVVJMKyIvdWEiLGk9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpuLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK2UuZG9tYWluKyIvc20iLGJvZHk6e3N1YnNjcmliZTpbci51cmxdLHNvdXJjZTplLnJ1bnRpbWVVUkx9fTtlLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIobixmdW5jdGlvbihlKXtWLmxvZygiW3J1bnRpbWUgdWEgLSBsaXN0ZW5lcl0gLSByZWNlaXZlIG1zZzogIixlKX0pLGUubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpe1YubG9nKCJbcnVudGltZSB1YSAtIHBvc3RNZXNzYWdlXSAtIHJlcGx5OiAiLGUpfSksVi5pbmZvKCJbcnVudGltZSB1YSAtIHAycCBpbnN0YWxsYXRpb25dIC0gc3VjY2VzczogIixyKSx0KCEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1YuaW5mbygiW3J1bnRpbWUgdWEgLSBwMnAgaW5zdGFsbGF0aW9uXSAtIGZhaWw6ICIsZSksdCghMSl9KX0pfX0se2tleToiX2xvYWRDb21wb25lbnRzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24odCxyKXt0cnl7Ci8vIFByZXBhcmUgdGhlIG9uIGluc3RhbmNlIHRvIGhhbmRsZSB3aXRoIHRoZSBmYWxsYmFja3MgYW5kIHJ1bnRpbWVDYXRhbG9ndWU7CmUuZGVzY3JpcHRvckluc3RhbmNlPW5ldyBMLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUucnVudGltZUNhdGFsb2d1ZSxlLnJ1bnRpbWVDb25maWd1cmF0aW9uKSwKLy8gUHJlcGFyZSB0aGUgbG9hZGVyIHRvIGxvYWQgdGhlIGh5cGVydGllcywgcHJvdG9zdHVicyBhbmQgaWRwcHJveHk7CmUubG9hZGVyPW5ldyBrLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUucnVudGltZUNvbmZpZ3VyYXRpb24sZS5kZXNjcmlwdG9ySW5zdGFuY2UpLAovLyBJbnN0YW50aWF0ZSB0aGUgaWRlbnRpdHkgTW9kdWxlCmUuaWRlbnRpdHlNb2R1bGU9bmV3IGcuZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5ydW50aW1lQ2FwYWJpbGl0aWVzLGUuc3RvcmFnZU1hbmFnZXIsZS5fZGF0YU9iamVjdHNTdG9yYWdlKTsKLy8gVXNlIHRoZSBzYW5kYm94IGZhY3RvcnkgdG8gY3JlYXRlIGFuIEFwcFNhbmRib3g7Ci8vIEluIHRoZSBmdXR1cmUgY2FuIGJlIGRlY2lkZWQgYnkgcG9saWN5RW5naW5lIGlmIHdlIG5lZWQKLy8gY3JlYXRlIGEgQXBwU2FuZGJveCBvciBub3Q7CnZhciBuPWUucnVudGltZUZhY3RvcnkuY3JlYXRlQXBwU2FuZGJveCgpOwovLyBJbnN0YW50aWF0ZSB0aGUgUmVnaXN0cnkgTW9kdWxlCmUucmVnaXN0cnk9bmV3IGguZGVmYXVsdChlLnJ1bnRpbWVVUkwsbixlLmlkZW50aXR5TW9kdWxlLGUucnVudGltZUNhdGFsb2d1ZSxlLnJ1bnRpbWVDYXBhYmlsaXRpZXMsZS5zdG9yYWdlTWFuYWdlcixlLnAycEhhbmRsZXJVUkwpLAovLyBTZXQgdGhlIGxvYWRlciB0byBsb2FkIEh5cGVydGllcywgU3R1YnMgYW5kIElkcFByb3hpZXMKZS5yZWdpc3RyeS5sb2FkZXI9ZS5sb2FkZXIsCi8vIEluc3RhbnRpYXRlIHRoZSBNZXNzYWdlIEJ1cwplLm1lc3NhZ2VCdXM9bmV3IFIuZGVmYXVsdChlLnJlZ2lzdHJ5KSwKLy8gUHJlcGFyZSB0aGUgYWRkcmVzcyBhbGxvY2F0aW9uIGluc3RhbmNlOwplLmFkZHJlc3NBbGxvY2F0aW9uPW5ldyBPLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLnJlZ2lzdHJ5KSwKLy8gSW5zdGFudGlhdGUgdGhlIFBvbGljeSBFbmdpbmUKZS5wb2xpY3lFbmdpbmU9bmV3IG0uZGVmYXVsdChuZXcgSy5kZWZhdWx0KGUucnVudGltZVVSTCxlLmlkZW50aXR5TW9kdWxlLGUucmVnaXN0cnksZS5zdG9yYWdlTWFuYWdlcixlLnJ1bnRpbWVDYXBhYmlsaXRpZXMpKSxlLm1lc3NhZ2VCdXMucGlwZWxpbmUuaGFuZGxlcnM9WwovLyBQb2xpY3kgbWVzc2FnZSBhdXRob3Jpc2UKZnVuY3Rpb24odCl7ZS5wb2xpY3lFbmdpbmUuYXV0aG9yaXNlKHQubXNnKS50aGVuKGZ1bmN0aW9uKGUpe3QubXNnPWUsdC5uZXh0KCl9KS5jYXRjaChmdW5jdGlvbihlKXtWLmVycm9yKGUpLHQuZmFpbChlKX0pfV0sCi8vIEluc3RhbnRpYXRlIHRoZSBHcmFwaCBDb25uZWN0b3IKZS5ncmFwaENvbm5lY3Rvcj1uZXcgVS5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5zdG9yYWdlTWFuYWdlciksCi8vIEluc3RhbnRpYXRlIERpc2NvdmVyeQplLmNvcmVEaXNjb3Zlcnk9bmV3IGouZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5tZXNzYWdlQnVzLGUuZ3JhcGhDb25uZWN0b3IsZS5ydW50aW1lRmFjdG9yeSxlLnJlZ2lzdHJ5KSwKLy8gQWRkIHRvIEFwcCBTYW5kYm94IHRoZSBsaXN0ZW5lcjsKbi5hZGRMaXN0ZW5lcigiKiIsZnVuY3Rpb24odCl7ZS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHQpfSksCi8vIFJlZ2lzdGVyIG1lc3NhZ2VCdXMgb24gUmVnaXN0cnkKZS5yZWdpc3RyeS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gUG9saWN5IEVuZ2luZQplLnBvbGljeUVuZ2luZS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gUmVnaXN0ZXIgbWVzc2FnZUJ1cyBvbiBJRE0KZS5pZGVudGl0eU1vZHVsZS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gUmVnaXN0ZXIgcmVnaXN0cnkgb24gSWRlbnRpdHlNb2R1bGUKZS5pZGVudGl0eU1vZHVsZS5yZWdpc3RyeT1lLnJlZ2lzdHJ5LAovLyBSZWdpc3RlciBjb3JlRGlzY292ZXJ5IG9uIElkZW50aXR5TW9kdWxlCmUuaWRlbnRpdHlNb2R1bGUuY29yZURpc2NvdmVyeT1lLmNvcmVEaXNjb3ZlcnksCi8vIFVzZSBzYW5kYm94IGZhY3RvcnkgdG8gdXNlIHNwZWNpZmljIG1ldGhvZHMKLy8gYW5kIHNldCB0aGUgbWVzc2FnZSBidXMgdG8gdGhlIGZhY3RvcnkKZS5ydW50aW1lRmFjdG9yeS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gSW5zdGFuY2lhdGUgdGhlIFN5bmNoZXJNYW5hZ2VyOwplLnN5bmNoZXJNYW5hZ2VyPW5ldyBxLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLnJlZ2lzdHJ5LGUucnVudGltZUNhdGFsb2d1ZSxlLnN0b3JhZ2VNYW5hZ2VyLG51bGwsZS5fZGF0YU9iamVjdHNTdG9yYWdlLGUuaWRlbnRpdHlNb2R1bGUpLAovLyBTZXQgaW50byBsb2FkZXIgdGhlIG5lZWRlZCBjb21wb25lbnRzOwplLmxvYWRlci5ydW50aW1lVVJMPWUucnVudGltZVVSTCxlLmxvYWRlci5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cyxlLmxvYWRlci5yZWdpc3RyeT1lLnJlZ2lzdHJ5LGUubG9hZGVyLnJ1bnRpbWVDYXRhbG9ndWU9ZS5ydW50aW1lQ2F0YWxvZ3VlLGUubG9hZGVyLnJ1bnRpbWVGYWN0b3J5PWUucnVudGltZUZhY3RvcnksCi8vSW5zdGFudGlhdGUgRGlzY292ZXJ5IExpYiBmb3Igbm90aWZpY2F0aW9uIHRlc3RpbmcKLy8gdGhpcy5kaXNjb3ZlcnkgPSBuZXcgRGlzY292ZXJ5KCJoeXBlcnR5Oi8vbG9jYWxob3N0L3Rlc3QiLCB0aGlzLnJ1bnRpbWVVUkwsIHRoaXMubWVzc2FnZUJ1cyk7Ci8vIHRoaXMubG9hZFN0dWIoImxvY2FsaG9zdCIpOwovLyBzZXRUaW1lb3V0KCgpID0+IHsKLy8gICB0aGlzLmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc0RPKCJ1c2VyOi8vZ29vZ2xlLmNvbS9vcGVuaWR0ZXN0MjBAZ21haWwuY29tIikKLy8gICAudGhlbihoeXBlcnRpZXMgPT4gewovLyAgICAgaHlwZXJ0aWVzLmZvckVhY2goaHlwZXJ0eSA9PnsKLy8gICAgICAgaHlwZXJ0eS5vbkxpdmUoKCkgPT4gbG9nLmxvZyhgTm90aWZpY2F0aW9uIGZyb20gJHtoeXBlcnR5LmRhdGEuaHlwZXJ0eUlEfSBjaGFuZ2VkIHRvIGxpdmVgKSk7Ci8vICAgICAgIGh5cGVydHkub25EaXNjb25uZWN0ZWQoKCkgPT4gbG9nLmxvZyhgTm90aWZpY2F0aW9uIGZyb20gJHtoeXBlcnR5LmRhdGEuaHlwZXJ0eUlEfSBjaGFuZ2VkIHRvIGRpc2Nvbm5lY3RlZGApKTsKLy8gICAgIH0pOwovLyAgIH0pOwovLyB9LCAyMDAwKTsKLy8gSW5zdGFuY2lhdGUgdGhlIFN1YnNjcmlwdGlvbk1hbmFnZXI7CmUuc3Vic2NyaXB0aW9uTWFuYWdlcj1uZXcgQi5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5zdG9yYWdlTWFuYWdlcik7Ci8vIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5pbml0KCkudGhlbigoKT0+ewovLyAgIHJlc29sdmUodHJ1ZSk7Ci8vIH0pOwp2YXIgbz1bXTtvLnB1c2goZS5zdWJzY3JpcHRpb25NYW5hZ2VyLmluaXQoKSksby5wdXNoKGUuaWRlbnRpdHlNb2R1bGUubG9hZElkZW50aXRpZXMoKSksby5wdXNoKGUuaWRlbnRpdHlNb2R1bGUubG9hZFNlc3Npb25LZXlzKCkpLGkuZGVmYXVsdC5hbGwobykudGhlbihmdW5jdGlvbihlKXszPT09ZS5sZW5ndGg/dCghMCk6cigiW1J1bnRpbWVVQS5fbG9hZENvbXBvbmVudHNdIEVycm9yIF0gIixlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSl9Y2F0Y2goZSl7cihlKX19KX19LHtrZXk6ImxvYWRIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO2lmKCFlKXRocm93IG5ldyBFcnJvcigiSHlwZXJ0eSBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkIik7cmV0dXJuIHRoaXMubG9hZGVyLmxvYWRIeXBlcnR5KGUsdCxyKX19LHtrZXk6ImxvYWRTdHViIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIlByb3RvU3R1YiBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkIik7cmV0dXJuIHRoaXMubG9hZGVyLmxvYWRTdHViKGUpfX0se2tleToibG9hZElkcFByb3h5Iix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIlRoZSBJRFAgUHJveHkgVVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlciwgY291bGQgYmUgYSBET01BSU4gb3IgYSBVUkwiKTtyZXR1cm4gdGhpcy5sb2FkZXIubG9hZElkcFByb3h5KGUpfX0se2tleToiY2xvc2UiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gVi5pbmZvKCJVbnJlZ2lzdGVyIGFsbCBoeXBlcnRpZXMiKSxuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7ZS5yZWdpc3RyeS51bnJlZ2lzdGVyQWxsSHlwZXJ0aWVzKCkudGhlbihmdW5jdGlvbihlKXtWLmluZm8oIkFsbCB0aGUgaHlwZXJ0aWVzIGFyZSB1bnJlZ2lzdGVkIHdpdGggU3VjY2VzczoiLGUpLHQoITApfSkuY2F0Y2goZnVuY3Rpb24oZSl7Vi5lcnJvcigiRmFpbGVkIHRvIHVucmVnaXN0ZXIgdGhlIGh5cGVydGllcyIsZSkscighMSl9KX0pfX1dKSxSdW50aW1lVUF9KCk7dC5kZWZhdWx0PVcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDExICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDE3OSkscigxMjYpLHIoMTg3KSxyKDQyMCkscig0MjcpLHIoNDI4KSxlLmV4cG9ydHM9cigxMykuUHJvbWlzZX0sLyogNDEyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEyNyksaT1yKDEyOCk7Ci8vIHRydWUgIC0+IFN0cmluZyNhdAovLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXQKZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBvLGEscz1TdHJpbmcoaSh0KSksdT1uKHIpLGM9cy5sZW5ndGg7cmV0dXJuIHU8MHx8dT49Yz9lPyIiOnZvaWQgMDoobz1zLmNoYXJDb2RlQXQodSksbzw1NTI5Nnx8bz41NjMxOXx8dSsxPT09Y3x8KGE9cy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxhPjU3MzQzP2U/cy5jaGFyQXQodSk6bzplP3Muc2xpY2UodSx1KzIpOmEtNTYzMjArKG8tNTUyOTY8PDEwKSs2NTUzNil9fX0sLyogNDEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxMzEpLGk9cig3Myksbz1yKDk1KSxhPXt9OwovLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKQpyKDU3KShhLHIoMjIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4oYSx7bmV4dDppKDEscil9KSxvKGUsdCsiIEl0ZXJhdG9yIil9fSwvKiA0MTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzgpLGk9cigzOSksbz1yKDY3KTtlLmV4cG9ydHM9cig0Myk/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0KXtpKGUpO2Zvcih2YXIgcixhPW8odCkscz1hLmxlbmd0aCx1PTA7cz51OyluLmYoZSxyPWFbdSsrXSx0W3JdKTtyZXR1cm4gZX19LC8qIDQxNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2YKLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXMKdmFyIG49cig0NCksaT1yKDEzMiksbz1yKDQxNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsYSl7dmFyIHMsdT1uKHQpLGM9aSh1Lmxlbmd0aCksZj1vKGEsYyk7Ci8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQppZihlJiZyIT1yKXtmb3IoO2M+ZjspCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYoKHM9dVtmKytdKSE9cylyZXR1cm4hMH1lbHNlIGZvcig7Yz5mO2YrKylpZigoZXx8ZiBpbiB1KSYmdVtmXT09PXIpcmV0dXJuIGV8fGZ8fDA7cmV0dXJuIWUmJi0xfX19LC8qIDQxNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMjcpLGk9TWF0aC5tYXgsbz1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1uKGUpLGU8MD9pKGUrdCwwKTpvKGUsdCl9fSwvKiA0MTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQxOCksaT1yKDQxOSksbz1yKDc0KSxhPXIoNDQpOwovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCmUuZXhwb3J0cz1yKDE4MCkoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9YShlKSwvLyB0YXJnZXQKdGhpcy5faT0wLC8vIG5leHQgaW5kZXgKdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsaSgxKSk6ImtleXMiPT10P2koMCxyKToidmFsdWVzIj09dD9pKDAsZVtyXSk6aSgwLFtyLGVbcl1dKX0sInZhbHVlcyIpLAovLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpCm8uQXJndW1lbnRzPW8uQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0sLyogNDE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sLyogNDE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0sLyogNDIwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4saSxvLGEscz1yKDkyKSx1PXIoMjEpLGM9cig2NSksZj1yKDE4OCksbD1yKDI2KSxkPXIoNDIpLHA9cig5MykseT1yKDQyMSksaD1yKDQyMiksdj1yKDE5MiksZz1yKDE5Mykuc2V0LGI9cig0MjQpKCksbT1yKDEzNiksXz1yKDE5NCksUj1yKDE5NSksdz11LlR5cGVFcnJvcixTPXUucHJvY2VzcyxPPXUuUHJvbWlzZSxQPSJwcm9jZXNzIj09ZihTKSxrPWZ1bmN0aW9uKCl7fSxNPWk9bS5mLEw9ISFmdW5jdGlvbigpe3RyeXsKLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0CnZhciBlPU8ucmVzb2x2ZSgxKSx0PShlLmNvbnN0cnVjdG9yPXt9KVtyKDIyKSgic3BlY2llcyIpXT1mdW5jdGlvbihlKXtlKGssayl9OwovLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0CnJldHVybihQfHwiZnVuY3Rpb24iPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmZS50aGVuKGspaW5zdGFuY2VvZiB0fWNhdGNoKGUpe319KCkseD1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hKCFkKGUpfHwiZnVuY3Rpb24iIT10eXBlb2YodD1lLnRoZW4pKSYmdH0sRT1mdW5jdGlvbihlLHQpe2lmKCFlLl9uKXtlLl9uPSEwO3ZhciByPWUuX2M7YihmdW5jdGlvbigpe2Zvcih2YXIgbj1lLl92LGk9MT09ZS5fcyxvPTA7ci5sZW5ndGg+bzspIWZ1bmN0aW9uKHQpe3ZhciByLG8sYT1pP3Qub2s6dC5mYWlsLHM9dC5yZXNvbHZlLHU9dC5yZWplY3QsYz10LmRvbWFpbjt0cnl7YT8oaXx8KDI9PWUuX2gmJkEoZSksZS5faD0xKSwhMD09PWE/cj1uOihjJiZjLmVudGVyKCkscj1hKG4pLGMmJmMuZXhpdCgpKSxyPT09dC5wcm9taXNlP3UodygiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKToobz14KHIpKT9vLmNhbGwocixzLHUpOnMocikpOnUobil9Y2F0Y2goZSl7dShlKX19KHJbbysrXSk7Ly8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2gKZS5fYz1bXSxlLl9uPSExLHQmJiFlLl9oJiZEKGUpfSl9fSxEPWZ1bmN0aW9uKGUpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIHQscixuLGk9ZS5fdixvPVUoZSk7aWYobyYmKHQ9XyhmdW5jdGlvbigpe1A/Uy5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLGksZSk6KHI9dS5vbnVuaGFuZGxlZHJlamVjdGlvbik/cih7cHJvbWlzZTplLHJlYXNvbjppfSk6KG49dS5jb25zb2xlKSYmbi5lcnJvciYmbi5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixpKX0pLAovLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZAplLl9oPVB8fFUoZSk/MjoxKSxlLl9hPXZvaWQgMCxvJiZ0LmUpdGhyb3cgdC52fSl9LFU9ZnVuY3Rpb24oZSl7aWYoMT09ZS5faClyZXR1cm4hMTtmb3IodmFyIHQscj1lLl9hfHxlLl9jLG49MDtyLmxlbmd0aD5uOylpZih0PXJbbisrXSx0LmZhaWx8fCFVKHQucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LEE9ZnVuY3Rpb24oZSl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdDtQP1MuZW1pdCgicmVqZWN0aW9uSGFuZGxlZCIsZSk6KHQ9dS5vbnJlamVjdGlvbmhhbmRsZWQpJiZ0KHtwcm9taXNlOmUscmVhc29uOmUuX3Z9KX0pfSxqPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fZHx8KHQuX2Q9ITAsdD10Ll93fHx0LC8vIHVud3JhcAp0Ll92PWUsdC5fcz0yLHQuX2F8fCh0Ll9hPXQuX2Muc2xpY2UoKSksRSh0LCEwKSl9LEk9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLl9kKXtyLl9kPSEwLHI9ci5fd3x8cjsvLyB1bndyYXAKdHJ5e2lmKHI9PT1lKXRocm93IHcoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9eChlKSk/YihmdW5jdGlvbigpe3ZhciBuPXtfdzpyLF9kOiExfTsvLyB3cmFwCnRyeXt0LmNhbGwoZSxjKEksbiwxKSxjKGosbiwxKSl9Y2F0Y2goZSl7ai5jYWxsKG4sZSl9fSk6KHIuX3Y9ZSxyLl9zPTEsRShyLCExKSl9Y2F0Y2goZSl7ai5jYWxsKHtfdzpyLF9kOiExfSxlKX19fTsKLy8gY29uc3RydWN0b3IgcG9seWZpbGwKTHx8KAovLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQpPPWZ1bmN0aW9uKGUpe3kodGhpcyxPLCJQcm9taXNlIiwiX2giKSxwKGUpLG4uY2FsbCh0aGlzKTt0cnl7ZShjKEksdGhpcywxKSxjKGosdGhpcywxKSl9Y2F0Y2goZSl7ai5jYWxsKHRoaXMsZSl9fSwKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCm49ZnVuY3Rpb24oZSl7dGhpcy5fYz1bXSwvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMKdGhpcy5fYT12b2lkIDAsLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnMKdGhpcy5fcz0wLC8vIDwtIHN0YXRlCnRoaXMuX2Q9ITEsLy8gPC0gZG9uZQp0aGlzLl92PXZvaWQgMCwvLyA8LSB2YWx1ZQp0aGlzLl9oPTAsLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWQKdGhpcy5fbj0hMX0sbi5wcm90b3R5cGU9cig0MjUpKE8ucHJvdG90eXBlLHsKLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkKdGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPU0odih0aGlzLE8pKTtyZXR1cm4gci5vaz0iZnVuY3Rpb24iIT10eXBlb2YgZXx8ZSxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsci5kb21haW49UD9TLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKHIpLHRoaXMuX2EmJnRoaXMuX2EucHVzaChyKSx0aGlzLl9zJiZFKHRoaXMsITEpLHIucHJvbWlzZX0sCi8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpCmNhdGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pLG89ZnVuY3Rpb24oKXt2YXIgZT1uZXcgbjt0aGlzLnByb21pc2U9ZSx0aGlzLnJlc29sdmU9YyhJLGUsMSksdGhpcy5yZWplY3Q9YyhqLGUsMSl9LG0uZj1NPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09T3x8ZT09PWE/bmV3IG8oZSk6aShlKX0pLGwobC5HK2wuVytsLkYqIUwse1Byb21pc2U6T30pLHIoOTUpKE8sIlByb21pc2UiKSxyKDQyNikoIlByb21pc2UiKSxhPXIoMTMpLlByb21pc2UsCi8vIHN0YXRpY3MKbChsLlMrbC5GKiFMLCJQcm9taXNlIix7Ci8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCnJlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpO3JldHVybigwLHQucmVqZWN0KShlKSx0LnByb21pc2V9fSksbChsLlMrbC5GKihzfHwhTCksIlByb21pc2UiLHsKLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCnJlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIFIocyYmdGhpcz09PWE/Tzp0aGlzLGUpfX0pLGwobC5TK2wuRiohKEwmJnIoMTk2KShmdW5jdGlvbihlKXtPLmFsbChlKS5jYXRjaChrKX0pKSwiUHJvbWlzZSIsewovLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkKYWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1NKHQpLG49ci5yZXNvbHZlLGk9ci5yZWplY3Qsbz1fKGZ1bmN0aW9uKCl7dmFyIHI9W10sbz0wLGE9MTtoKGUsITEsZnVuY3Rpb24oZSl7dmFyIHM9bysrLHU9ITE7ci5wdXNoKHZvaWQgMCksYSsrLHQucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3V8fCh1PSEwLHJbc109ZSwtLWF8fG4ocikpfSxpKX0pLC0tYXx8bihyKX0pO3JldHVybiBvLmUmJmkoby52KSxyLnByb21pc2V9LAovLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpCnJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPU0odCksbj1yLnJlamVjdCxpPV8oZnVuY3Rpb24oKXtoKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gaS5lJiZuKGkudiksci5wcm9taXNlfX0pfSwvKiA0MjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbil7aWYoIShlIGluc3RhbmNlb2YgdCl8fHZvaWQgMCE9PW4mJm4gaW4gZSl0aHJvdyBUeXBlRXJyb3IocisiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEiKTtyZXR1cm4gZX19LC8qIDQyMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2NSksaT1yKDE4OSksbz1yKDE5MCksYT1yKDM5KSxzPXIoMTMyKSx1PXIoMTkxKSxjPXt9LGY9e30sdD1lLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbCxkKXt2YXIgcCx5LGgsdixnPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZX06dShlKSxiPW4ocixsLHQ/MjoxKSxtPTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGcpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7Ci8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvcgppZihvKGcpKXtmb3IocD1zKGUubGVuZ3RoKTtwPm07bSsrKWlmKCh2PXQ/YihhKHk9ZVttXSlbMF0seVsxXSk6YihlW21dKSk9PT1jfHx2PT09ZilyZXR1cm4gdn1lbHNlIGZvcihoPWcuY2FsbChlKTshKHk9aC5uZXh0KCkpLmRvbmU7KWlmKCh2PWkoaCxiLHkudmFsdWUsdCkpPT09Y3x8dj09PWYpcmV0dXJuIHZ9O3QuQlJFQUs9Yyx0LlJFVFVSTj1mfSwvKiA0MjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81CmUuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSwvKiA0MjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjEpLGk9cigxOTMpLnNldCxvPW4uTXV0YXRpb25PYnNlcnZlcnx8bi5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9bi5wcm9jZXNzLHM9bi5Qcm9taXNlLHU9InByb2Nlc3MiPT1yKDc1KShhKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYz1mdW5jdGlvbigpe3ZhciBuLGk7Zm9yKHUmJihuPWEuZG9tYWluKSYmbi5leGl0KCk7ZTspe2k9ZS5mbixlPWUubmV4dDt0cnl7aSgpfWNhdGNoKG4pe3Rocm93IGU/cigpOnQ9dm9pZCAwLG59fXQ9dm9pZCAwLG4mJm4uZW50ZXIoKX07Ci8vIE5vZGUuanMKaWYodSlyPWZ1bmN0aW9uKCl7YS5uZXh0VGljayhjKX07ZWxzZSBpZihvKXt2YXIgZj0hMCxsPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgbyhjKS5vYnNlcnZlKGwse2NoYXJhY3RlckRhdGE6ITB9KSwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwpyPWZ1bmN0aW9uKCl7bC5kYXRhPWY9IWZ9fWVsc2UgaWYocyYmcy5yZXNvbHZlKXt2YXIgZD1zLnJlc29sdmUoKTtyPWZ1bmN0aW9uKCl7ZC50aGVuKGMpfX1lbHNlIHI9ZnVuY3Rpb24oKXsKLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKQppLmNhbGwobixjKX07cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBpPXtmbjpuLG5leHQ6dm9pZCAwfTt0JiYodC5uZXh0PWkpLGV8fChlPWkscigpKSx0PWl9fX0sLyogNDI1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaSBpbiB0KXImJmVbaV0/ZVtpXT10W2ldOm4oZSxpLHRbaV0pO3JldHVybiBlfX0sLyogNDI2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigyMSksaT1yKDEzKSxvPXIoMzgpLGE9cig0Mykscz1yKDIyKSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgaVtlXT9pW2VdOm5bZV07YSYmdCYmIXRbc10mJm8uZih0LHMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LC8qIDQyNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLWZpbmFsbHkKdmFyIG49cigyNiksaT1yKDEzKSxvPXIoMjEpLGE9cigxOTIpLHM9cigxOTUpO24obi5QK24uUiwiUHJvbWlzZSIse2ZpbmFsbHk6ZnVuY3Rpb24oZSl7dmFyIHQ9YSh0aGlzLGkuUHJvbWlzZXx8by5Qcm9taXNlKSxyPSJmdW5jdGlvbiI9PXR5cGVvZiBlO3JldHVybiB0aGlzLnRoZW4ocj9mdW5jdGlvbihyKXtyZXR1cm4gcyh0LGUoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiByfSl9OmUscj9mdW5jdGlvbihyKXtyZXR1cm4gcyh0LGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IHJ9KX06ZSl9fSl9LC8qIDQyOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLXRyeQp2YXIgbj1yKDI2KSxpPXIoMTM2KSxvPXIoMTk0KTtuKG4uUywiUHJvbWlzZSIse3RyeTpmdW5jdGlvbihlKXt2YXIgdD1pLmYodGhpcykscj1vKGUpO3JldHVybihyLmU/dC5yZWplY3Q6dC5yZXNvbHZlKShyLnYpLHQucHJvbWlzZX19KX0sLyogNDI5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQzMCksZS5leHBvcnRzPXIoMTMpLk9iamVjdC5hc3NpZ259LC8qIDQzMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpCnZhciBuPXIoMjYpO24obi5TK24uRiwiT2JqZWN0Iix7YXNzaWduOnIoNDMxKX0pfSwvKiA0MzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKQp2YXIgbj1yKDY3KSxpPXIoMTM3KSxvPXIoNzcpLGE9cig3Nikscz1yKDE4NCksdT1PYmplY3QuYXNzaWduOwovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKZS5leHBvcnRzPSF1fHxyKDY2KShmdW5jdGlvbigpe3ZhciBlPXt9LHQ9e30scj1TeW1ib2woKSxuPSJhYmNkZWZnaGlqa2xtbm9wcXJzdCI7cmV0dXJuIGVbcl09NyxuLnNwbGl0KCIiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RbZV09ZX0pLDchPXUoe30sZSlbcl18fE9iamVjdC5rZXlzKHUoe30sdCkpLmpvaW4oIiIpIT1ufSk/ZnVuY3Rpb24oZSx0KXtmb3IoLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwp2YXIgcj1hKGUpLHU9YXJndW1lbnRzLmxlbmd0aCxjPTEsZj1pLmYsbD1vLmY7dT5jOylmb3IodmFyIGQscD1zKGFyZ3VtZW50c1tjKytdKSx5PWY/bihwKS5jb25jYXQoZihwKSk6bihwKSxoPXkubGVuZ3RoLHY9MDtoPnY7KWwuY2FsbChwLGQ9eVt2KytdKSYmKHJbZF09cFtkXSk7cmV0dXJuIHJ9OnV9LC8qIDQzMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MzMpO3ZhciBuPXIoMTMpLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LC8qIDQzMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyNik7Ci8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCm4obi5TK24uRiohcig0MyksIk9iamVjdCIse2RlZmluZVByb3BlcnR5OnIoMzgpLmZ9KX0sLyogNDM0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQubG9nPXZvaWQgMDt2YXIgbj1yKDExKSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obiksbz1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJhZGRyZXNzLWFsbG9jYXRpb24iKSxhPWkuZGVmYXVsdC5nZXRMb2dnZXIoIkJ1cyIpLHM9aS5kZWZhdWx0LmdldExvZ2dlcigiTWVzc2FnZUJ1cyIpLHU9aS5kZWZhdWx0LmdldExvZ2dlcigiQ29yZURpc2NvdmVyeSIpLGM9aS5kZWZhdWx0LmdldExvZ2dlcigiR3JhcGhDb25uZWN0b3IiKSxmPWkuZGVmYXVsdC5nZXRMb2dnZXIoIkh5cGVydHlSZXNvdXJjZXNTdG9yYWdlIiksbD1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJJZGVudGl0eU1vZHVsZSIpLGQ9aS5kZWZhdWx0LmdldExvZ2dlcigiUEVQIikscD1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJQMlBDb25uZWN0aW9uUmVzb2x2ZSIpLHk9aS5kZWZhdWx0LmdldExvZ2dlcigiUmVnaXN0cnkiKSxoPWkuZGVmYXVsdC5nZXRMb2dnZXIoIlJ1bnRpbWVVQSIpLHY9aS5kZWZhdWx0LmdldExvZ2dlcigiTG9hZGVyIiksZz1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJEZXNjcmlwdG9ycyIpLGI9aS5kZWZhdWx0LmdldExvZ2dlcigiRGF0YU9iamVjdHNTdG9yYWdlIiksbT1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJTdWJzY3JpcHRpb24iKSxfPWkuZGVmYXVsdC5nZXRMb2dnZXIoIlN1YnNjcmlwdGlvbk1hbmFnZXIiKSxSPWkuZGVmYXVsdC5nZXRMb2dnZXIoIk9ic2VydmVyT2JqZWN0Iiksdz1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJSZXBvcnRlck9iamVjdCIpLFM9aS5kZWZhdWx0LmdldExvZ2dlcigiU3luU3Vic2NyaXB0aW9uIiksTz1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJTeW5jaGVyTWFuYWdlciIpO3QubG9nPWkuZGVmYXVsdCwvKioKICA1IGFjdHVhbCBsb2dnaW5nIG1ldGhvZHMsIG9yZGVyZWQgYW5kIGF2YWlsYWJsZSBhczoKCiAgICAgIDAgLSBsb2cudHJhY2UobXNnKQogICAgICAxIC0gbG9nLmRlYnVnKG1zZykKICAgICAgMiAtIGxvZy5pbmZvKG1zZykKICAgICAgMyAtIGxvZy53YXJuKG1zZykKICAgICAgNCAtIGxvZy5lcnJvcihtc2cpCgogIGxvZy5sb2cobXNnKSBpcyBhbHNvIGF2YWlsYWJsZSwgYXMgYW4gYWxpYXMgZm9yIGxvZy5kZWJ1Zyhtc2cpLCB0byBpbXByb3ZlIGNvbXBhdGliaWxpdHkgd2l0aCBjb25zb2xlLCBhbmQgbWFrZSBtaWdyYXRpb24gZWFzaWVyLgoKICBFeGFjdCBvdXRwdXQgZm9ybWF0dGluZyBvZiB0aGVzZSB3aWxsIGRlcGVuZCBvbiB0aGUgY29uc29sZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgY29udGV4dCBvZiB5b3VyIGFwcGxpY2F0aW9uLiBGb3IgZXhhbXBsZSwgbWFueSBlbnZpcm9ubWVudHMgd2lsbCBpbmNsdWRlIGEgZnVsbCBzdGFjayB0cmFjZSB3aXRoIGFsbCB0cmFjZSgpIGNhbGxzLCBhbmQgaWNvbnMgb3Igc2ltaWxhciB0byBoaWdobGlnaHQgb3RoZXIgY2FsbHMuCgogIFRoZXNlIG1ldGhvZHMgc2hvdWxkIG5ldmVyIGZhaWwgaW4gYW55IGVudmlyb25tZW50LCBldmVuIGlmIG5vIGNvbnNvbGUgb2JqZWN0IGlzIGN1cnJlbnRseSBhdmFpbGFibGUsIGFuZCBzaG91bGQgYWx3YXlzIGZhbGwgYmFjayB0byBhbiBhdmFpbGFibGUgbG9nIG1ldGhvZCBldmVuIGlmIHRoZSBzcGVjaWZpYyBtZXRob2QgY2FsbGVkIChlLmcuIHdhcm4pIGlzbid0IGF2YWlsYWJsZS4KCiAgQmUgYXdhcmUgdGhhdCBhbGwgdGhpcyBtZWFucyB0aGF0IHRoZXNlIG1ldGhvZCB3b24ndCBuZWNlc3NhcmlseSBhbHdheXMgcHJvZHVjZSBleGFjdGx5IHRoZSBvdXRwdXQgeW91IGV4cGVjdCBpbiBldmVyeSBlbnZpcm9ubWVudDsgbG9nbGV2ZWwgb25seSBndWFyYW50ZWVzIHRoYXQgdGhlc2UgbWV0aG9kcyB3aWxsIG5ldmVyIGV4cGxvZGUgb24geW91LCBhbmQgdGhhdCBpdCB3aWxsIGNhbGwgdGhlIG1vc3QgcmVsZXZhbnQgbWV0aG9kIGl0IGNhbiBmaW5kLCB3aXRoIHlvdXIgYXJndW1lbnQuIEZpcmVmb3ggaXMgYSBub3RhYmxlIGV4YW1wbGUgaGVyZTogZHVlIHRvIGEgY3VycmVudCBGaXJlZm94IGJ1ZyBsb2cudHJhY2UobXNnKSBjYWxscyBpbiBGaXJlZm94IHdpbGwgcHJpbnQgb25seSB0aGUgc3RhY2t0cmFjZSwgYW5kIHdvbid0IGluY2x1ZGUgYW55IHBhc3NlZCBtZXNzYWdlIGFyZ3VtZW50cy4KCiovCi8vIGFkZHJlc3MtYWxsb2NhdGlvbgpvLnNldExldmVsKDUpLAovLyBCdXMKYS5zZXRMZXZlbCgwKSwKLy8gTWVzc2FnZUJ1cwpzLnNldExldmVsKDApLAovLyBDb3JlRGlzY292ZXJ5CnUuc2V0TGV2ZWwoNSksCi8vIEdyYXBoQ29ubmVjdG9yCmMuc2V0TGV2ZWwoNSksCi8vIEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlCmYuc2V0TGV2ZWwoMCksCi8vIElkZW50aXR5TW9kdWxlCmwuc2V0TGV2ZWwoMCksCi8vIFBFUApkLnNldExldmVsKDUpLAovLyBQMlBDb25uZWN0aW9uUmVzb2x2ZQpwLnNldExldmVsKDApLAovLyBSZWdpc3RyeQp5LnNldExldmVsKDApLAovLyBSdW50aW1lVUEKaC5zZXRMZXZlbCgwKSwKLy8gTG9hZGVyCnYuc2V0TGV2ZWwoMCksCi8vIERlc2NyaXB0b3JzCmcuc2V0TGV2ZWwoMCksCi8vIERhdGFPYmplY3RzU3RvcmFnZQpiLnNldExldmVsKDUpLAovLyBTdWJzY3JpcHRpb24KbS5zZXRMZXZlbCg1KSwKLy8gU3Vic2NyaXB0aW9uTWFuYWdlcgpfLnNldExldmVsKDUpLAovLyBPYnNlcnZlck9iamVjdApSLnNldExldmVsKDMpLAovLyBSZXBvcnRlck9iamVjdAp3LnNldExldmVsKDMpLAovLyBTeW5TdWJzY3JpcHRpb24KUy5zZXRMZXZlbCgzKSwKLy8gU3luY2hlck1hbmFnZXIKTy5zZXRMZXZlbCgzKX0sLyogNDM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNTkpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDExKSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDEzOCkseT1yKDQzOCksaD1yKDk5KSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1yKDQ2MSksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLG09cig0NjMpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPXIoMTUpO3IoNDY0KTt2YXIgdz1yKDIwMSksUz1kLmdldExvZ2dlcigiUmVnaXN0cnkiKSxPPXtDUkVBVEVEOiJjcmVhdGVkIixMSVZFOiJsaXZlIixERVBMT1lJTkc6ImRlcGxveWluZyIsREVQTE9ZRUQ6ImRlcGxveWVkIixQUk9HUkVTUzoiaW4tcHJvZ3Jlc3MiLERJU0NPTk5FQ1RFRDoiZGlzY29ubmVjdGVkIixGQUlMRUQ6ImRlcGxveW1lbnQtZmFpbGVkIixERUFEOiJkZWFkIn0sUD1mdW5jdGlvbigpey8qKgogICogVG8gaW5pdGlhbGlzZSB0aGUgUnVudGltZSBSZWdpc3RyeSB3aXRoIHRoZSBSdW50aW1lVVJMIHRoYXQgd2lsbCBiZSB0aGUgYmFzaXMgdG8gZGVyaXZlIHRoZSBpbnRlcm5hbCBydW50aW1lIGFkZHJlc3NlcyB3aGVuIGFsbG9jYXRpbmcgYWRkcmVzc2VzIHRvIGludGVybmFsIHJ1bnRpbWUgY29tcG9uZW50LiBJbiBhZGRpdGlvbiwgdGhlIFJlZ2lzdHJ5IGRvbWFpbiBiYWNrLWVuZCB0byBiZSB1c2VkIHRvIHJlbW90ZWx5IHJlZ2lzdGVyIFJ1bnRpbWUgY29tcG9uZW50cywgaXMgYWxzbyBwYXNzZWQgYXMgaW5wdXQgcGFyYW1ldGVyLgogICogQHBhcmFtICB7TWVzc2FnZUJ1c30gICAgICAgICAgbXNnYnVzICAgICAgICAgICAgICAgIG1zZ2J1cwogICogQHBhcmFtICB7SHlwZXJ0eVJ1bnRpbWVVUkx9ICAgcnVudGltZVVSTCAgICAgICAgICAgIHJ1bnRpbWVVUkwKICAqIEBwYXJhbSAge0FwcFNhbmRib3h9ICAgICAgICAgIGFwcFNhbmRib3ggICAgICAgICAgICBhcHBTYW5kYm94CiAgKiBAcGFyYW0gIHtydW50aW1lQ2F0YWxvZ3VlfSAgICBydW50aW1lQ2F0YWxvZ3VlICAgICAgcnVudGltZUNhdGFsb2d1ZQogICogQHBhcmFtICB7RG9tYWluVVJMfSAgICAgICAgICAgcmVtb3RlUmVnaXN0cnkgICAgICAgIHJlbW90ZVJlZ2lzdHJ5CiAgKiBAcGFyYW0gIHtzdG9yYWdlTWFuYWdlcn0gICAgICBzdG9yYWdlTWFuYWdlcgogICovCmZ1bmN0aW9uIFJlZ2lzdHJ5KGUsdCxyLG4saSxvLGEscyl7Ci8vIGhvdyBzb21lIGZ1bmN0aW9ucyByZWNlaXZlIHRoZSBwYXJhbWV0ZXJzIGZvciBleGFtcGxlOgovLyBuZXcgUmVnaXN0cnkoJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnLCBhcHBTYW5kYm94LCBpZE1vZHVsZSwgcmVtb3RlUmVnaXN0cnkpOwovLyByZWdpc3RyeS5yZWdpc3RlclN0dWIoc2FuZGJveCwgJ3NwMScpOwovLyByZWdpc3RyeS5yZWdpc3Rlckh5cGVydHkoc2FuZEJveCwgJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKLy8gcmVnaXN0cnkucmVzb2x2ZSgnaHlwZXJ0eS1ydW50aW1lOi8vc3AxLzEyMycpOwppZigoMCx1LmRlZmF1bHQpKHRoaXMsUmVnaXN0cnkpLCFlKXRocm93IG5ldyBFcnJvcigicnVudGltZVVSTCBpcyBtaXNzaW5nLiIpO2lmKCFvKXRocm93IG5ldyBFcnJvcigic3RvcmFnZU1hbmFnZXIgaXMgbWlzc2luZy4iKTsvKmlmICghcmVtb3RlUmVnaXN0cnkpIHRocm93IG5ldyBFcnJvcigncmVtb3RlUmVnaXN0cnkgaXMgbWlzc2luZycpOyovCnZhciBjPXRoaXM7Yy5yZWdpc3RyeVVSTD1lKyIvcmVnaXN0cnkvIixjLmFwcFNhbmRib3g9dCxjLnJ1bnRpbWVVUkw9ZSxjLnAycEhhbmRsZXJVUkw9YSxjLnJ1bnRpbWVDYXRhbG9ndWU9bixjLnJlbW90ZVJlZ2lzdHJ5PXMsYy5pZE1vZHVsZT1yLGMuc3RvcmFnZU1hbmFnZXI9byxjLnJ1bnRpbWVDYXBhYmlsaXRpZXM9aSxjLmlkZW50aWZpZXI9KDAsUi5nZW5lcmF0ZUdVSUQpKCksYy5yZWdpc3RyYXRpb25SZXRyaWVzPTUsLy8gbnVtYmVyIG9mIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIEh5cGVydGllcyBhbmQgRGF0YU9iamVjdHMgd2hlbiBlcnJvcnMgb2NjdXJzCi8vIHRoZSBleHBpcmVzIGluIDM2MDAsIHJlcHJlc2VudHMgMSBob3VyCi8vdGhlIGV4cGlyZXMgaXMgaW4gc2Vjb25kcywgdW5pdCBvZiBtZWFzdXJlIHJlY2VpdmVkIGJ5IHRoZSBkb21haW4gcmVnaXN0cnkKYy5leHBpcmVzVGltZT0zNjAwLGMuaHlwZXJ0aWVzTGlzdFRvUmVtb3ZlPXt9LGMuaHlwZXJ0aWVzTGlzdD1bXSxjLnJlbW90ZUh5cGVydHlMaXN0PVtdLGMucmVtb3RlRGF0YU9iamVjdExpc3Q9W10sYy5pZHBMZWdhY3lQcm94eUxpc3Q9e30sYy53YXRjaGluZ1lvdT1uZXcgdy5XYXRjaGluZ1lvdSxjLnAycEhhbmRsZXJTdHViPXt9LGMucDJwUmVxdWVzdGVyU3R1Yj1jLndhdGNoaW5nWW91LndhdGNoKCJwMnBSZXF1ZXN0ZXJTdHViIix7fSwhMCksYy5wMnBDb25uZWN0aW9uTGlzdD1jLndhdGNoaW5nWW91LndhdGNoKCJwMnBDb25uZWN0aW9uTGlzdCIse30sITApLGMucDJwSGFuZGxlckFzc29jaWF0aW9uPXt9LGMucHJvdG9zdHVic0xpc3Q9Yy53YXRjaGluZ1lvdS53YXRjaCgicHJvdG9zdHVic0xpc3QiLHt9LCEwKSxjLmlkcFByb3h5TGlzdD1jLndhdGNoaW5nWW91LndhdGNoKCJpZHBQcm94eUxpc3QiLHt9LCEwKSxjLmRhdGFPYmplY3RMaXN0PXt9LGMuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0PXt9LGMuc2FuZGJveGVzTGlzdD17c2FuZGJveDp7fSxhcHBTYW5kYm94Ont9fSxjLnBlcExpc3Q9e30sYy5yZWdpc3RyaWVzPXt9LGMuX2RvbWFpbj0oMCxSLmRpdmlkZVVSTCkoYy5yZWdpc3RyeVVSTCkuZG9tYWluLGMuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W2VdPXQ7dmFyIGY9bmV3IF8uZGVmYXVsdChjKTtjLl9wMnBDb25uZWN0aW9uUmVzb2x2ZT1mfXJldHVybigwLGYuZGVmYXVsdCkoUmVnaXN0cnksW3trZXk6Il9nZXRJZGVudGl0eUFzc29jaWF0ZWQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztmb3IodmFyIG4gaW4gci5oeXBlcnRpZXNMaXN0KXt2YXIgaT1yLmh5cGVydGllc0xpc3Rbbl07aWYoaS5faHlwZXJ0eVVSTD09PXQpc3dpdGNoKGUpe2Nhc2UidXNlcm5hbWUiOnJldHVybiBpLl91c2VyLnVzZXJuYW1lO2Nhc2UiY24iOnJldHVybiBpLl91c2VyLmNuO2Nhc2UibG9jYWxlIjpyZXR1cm4gaS5fdXNlci5sb2NhbGU7Y2FzZSJhdmF0YXIiOnJldHVybiBpLl91c2VyLmF2YXRhcjtjYXNlInVzZXJVUkwiOnJldHVybiBpLl91c2VyLnVzZXJVUkw7Y2FzZSIuIjpyZXR1cm4gaS5fdXNlcjtkZWZhdWx0OnJldHVybiIifX1yZXR1cm4iIn19LHtrZXk6ImdldEFwcFNhbmRib3giLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwU2FuZGJveH19LHtrZXk6ImdldEh5cGVydHlPd25lciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXZvaWQgMDtmb3IodmFyIG4gaW4gdC5oeXBlcnRpZXNMaXN0KXt2YXIgaT10Lmh5cGVydGllc0xpc3Rbbl07aS5oeXBlcnR5VVJMPT09ZSYmKHI9aS51c2VyLnVzZXJVUkwpfXJldHVybiByfX0se2tleToiZ2V0SHlwZXJ0eU5hbWUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0iaHlwZXJ0eSI9PT0oMCxSLmRpdmlkZVVSTCkoZSkudHlwZSxuPXZvaWQgMCxpPXI/ZTp0LmdldFJlcG9ydGVyVVJMU3luY2hvbm91cyhlKTtmb3IodmFyIG8gaW4gdC5oeXBlcnRpZXNMaXN0KXt2YXIgYT10Lmh5cGVydGllc0xpc3Rbb107aWYoYS5oeXBlcnR5VVJMPT09aSl7bj1hLm9iamVjdE5hbWU7YnJlYWt9fXJldHVybiBufX0se2tleToiZ2V0UmVwb3J0ZXJVUkwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT10LmRhdGFPYmplY3RMaXN0W2VdO2k/cihpLnJlcG9ydGVyKTpuKCJObyByZXBvcnRlciB3YXMgZm91bmQiKX0pfX0se2tleToiZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5kYXRhT2JqZWN0TGlzdFtlXTtyZXR1cm4gcj9yLnJlcG9ydGVyOnZvaWQgMH19LHtrZXk6ImdldERhdGFPYmplY3RTdWJzY3JpYmVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0W2VdfX0se2tleToicmVnaXN0ZXJTdWJzY3JpYmVkRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3ZvaWQgMD09PXIuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0W2VdJiYoci5zdWJzY3JpYmVkRGF0YU9iamVjdExpc3RbZV09dCl9fSx7a2V5OiJnZXRQcmVBdXRoU3Vic2NyaWJlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LmRhdGFPYmplY3RMaXN0W2VdLG49W107cmV0dXJuIHImJihuPXIuYXV0aG9yaXNlKSxufX0se2tleToidW5yZWdpc3RlckFsbEh5cGVydGllcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9W107cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtmb3IodmFyIGkgaW4gZS5oeXBlcnRpZXNMaXN0KXt2YXIgbz1lLmh5cGVydGllc0xpc3RbaV0scz1lLnVucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2Uoby5oeXBlcnR5VVJMKTt0LnB1c2gocyl9YS5kZWZhdWx0LmFsbCh0KS50aGVuKGZ1bmN0aW9uKCl7cigic3VjY2Vzc2Z1bGx5IHVucmVnaXN0ZXJlZCBhbGwgaHlwZXJ0aWVzIil9LGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleToidW5yZWdpc3Rlckh5cGVydHlJbnN0YW5jZSIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vVE9ETyB3b3JraW5nIGJ1dCB0aGUgdXNlcgp2YXIgdD10aGlzLHI9e3R5cGU6ImV4ZWN1dGUiLGZyb206dC5yZWdpc3RyeVVSTCx0bzplLGJvZHk6e21ldGhvZDoiY2xvc2UifX07Ci8vIFNlbmQgbWVzc2FnZSB0byBoeXBlcnR5IHRvIGNsb3NlCnQuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbihyKXtTLmxvZygiW1JlZ2lzdHJ5LnVucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2VdIENsb3NlIFJlcGx5IixyKTt2YXIgbj17dHlwZToidXBkYXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrdC5fZG9tYWluLGJvZHk6e3Jlc291cmNlOiIvaHlwZXJ0eS8iK2UsdmFsdWU6ImRpc2Nvbm5lY3RlZCIsYXR0cmlidXRlOiJzdGF0dXMifX07dC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKGUpe1MubG9nKCJbUmVnaXN0cnldIHVucmVnaXN0ZXIgaHlwZXJ0eSBSZXBseSIsZSl9KX0pfX0se2tleToidW5yZWdpc3RlckRhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToidXBkYXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrdC5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmUsdmFsdWU6e3N0YXR1czoiZGlzY29ubmVjdGVkIn19fTt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24oZSl7Uy5sb2coIltSZWdpc3RyeV0gdW5yZWdpc3RlciBkYXRhT2JqZWN0IFJlcGx5IixlKX0pfX0se2tleToiZGVsZXRlRGF0YU9iamVjdEluc3RhbmNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6ImRlbGV0ZSIsZnJvbTp0LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QuX2RvbWFpbixib2R5Ont2YWx1ZTp7bmFtZTplfX19O3QuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbihlKXtTLmxvZygiW1JlZ2lzdHJ5XSB1bnJlZ2lzdGVyIGRhdGFPYmplY3QgUmVwbHkiLGUpfSl9fSx7a2V5OiJ1cGRhdGVIeXBlcnR5SW5zdGFuY2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXt0eXBlOiJVUERBVEUiLGZyb206ci5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9kb21haW4sYm9keTp7cmVzb3VyY2U6ZSx2YWx1ZTp0fX07ci5fbWVzc2FnZUJ1cy5wb3N0LnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24oZSl7fSl9fSx7a2V5OiJyZWdpc3RlclN1YnNjcmliZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXIuZGF0YU9iamVjdExpc3RbZV07biYmKG4uc3Vic2NyaWJlcnN8fChuLnN1YnNjcmliZXJzPVtdKSxuLnN1YnNjcmliZXJzLnB1c2godCksci5kYXRhT2JqZWN0TGlzdFtlXT1uKX19LHtrZXk6ImdldERhdGFPYmplY3RTdWJzY3JpYmVycyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuZGF0YU9iamVjdExpc3RbZV07aWYocilyZXR1cm4gci5zdWJzY3JpYmVyczt0aHJvdyJObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCJ9fSx7a2V5OiJyZWdpc3RlckRhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxSLmRlZXBDbG9uZSkoZSk7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgYT1bXSxzPXIudXJsLnNwbGl0KCI6Iik7YS5wdXNoKHNbMF0pLHQuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZWdpc3RyeTpEYXRhT2JqZWN0VVJMcyIpLnRoZW4oZnVuY3Rpb24ocyl7c3x8KHM9e30pLAovL3VwZGF0ZSB0aGUgbGlzdCB3aXRoIHRoZSBuZXcgZWxlbWVudHMKc1tlLm5hbWUrZS5zY2hlbWErZS5yZXNvdXJjZXMrZS5yZXBvcnRlcl09ZS51cmw7dmFyIHU9dm9pZCAwLGM9dm9pZCAwOzAhPT0oMCxpLmRlZmF1bHQpKHQucDJwSGFuZGxlclN0dWIpLmxlbmd0aCYmKHU9dC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdLnVybCxjPXAucnVudGltZVV0aWxzLnJ1bnRpbWVEZXNjcmlwdG9yLnAycFJlcXVlc3RlclN0dWIpLHIuc3RhcnRpbmdUaW1lPXIuY3JlYXRlZCxkZWxldGUgci5hdXRob3Jpc2UsZGVsZXRlIHIuY3JlYXRlZCxkZWxldGUgci5tdXR1YWwsZGVsZXRlIHIucmVzdW1lLHIuZXhwaXJlc3x8KHIuZXhwaXJlcz10LmV4cGlyZXNUaW1lKSxyLmRhdGFTY2hlbWVzPWEsdSYmKHIucDJwSGFuZGxlcj11LHIucDJwUmVxdWVzdGVyPWMpLHQuaXNJbnRlcndvcmtpbmdQcm90b1N0dWIoci5yZXBvcnRlcikmJihyLmludGVyd29ya2luZz0hMCksci5zdGF0dXM9ImxpdmUiO3ZhciBmPXZvaWQgMDtlLnJlc3VtZT8oUy5sb2coIltSZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3RdIHJlZ2lzdGVyaW5nIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBkYXRhIG9iamVjdCBVUkwiLHIpLGY9e3R5cGU6InVwZGF0ZSIsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrdC5yZWdpc3RyeURvbWFpbixmcm9tOnQucmVnaXN0cnlVUkwsYm9keTp7cmVzb3VyY2U6ci51cmwsdmFsdWU6e3N0YXR1czoibGl2ZSJ9fX0pOihTLmxvZygiW1JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdF0gcmVnaXN0ZXJpbmcgbmV3IGRhdGEgb2JqZWN0IFVSTCIsciksZj17dHlwZToiY3JlYXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrdC5yZWdpc3RyeURvbWFpbixib2R5Ont2YWx1ZTpyLHBvbGljeToicG9saWN5In19KSx0LmRhdGFPYmplY3RMaXN0W3IudXJsXT1lLAovLyBzdGVwIHRvIG9idGFpbiB0aGUgbGlzdCBvZiBhbGwgVVJMIHJlZ2lzdGVyZWQgdG8gdXBkYXRlZCB3aXRoIHRoZSBuZXcgb25lLgp0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiLDAscykudGhlbihmdW5jdGlvbigpe3RyeXt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXMoZix0Ll9yZWdpc3RyYXRpb25SZXRyaWVzLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0XSA9PT0+IHJlZ2lzdGVyRGF0YU9iamVjdCBSZXBseTogJywgcmVwbHkpOwoyMDA9PT1lLmJvZHkuY29kZT9uKHIpOm8oImVycm9yIG9uIHJlZ2lzdGVyIERhdGFPYmplY3QiKX0pfWNhdGNoKGUpe1MuZXJyb3IoZSksbyhlKX0KLy90aW1lciB0byBrZWVwIHRoZSByZWdpc3RyYXRpb24gYWxpdmUKLy8gdGhlIHRpbWUgaXMgZGVmaW5lZCBieSBhIGxpdHRsZSBsZXNzIHRoYW4gaGFsZiBvZiB0aGUgZXhwaXJlcyB0aW1lIGRlZmluZWQKc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZT17dHlwZToidXBkYXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrdC5yZWdpc3RyeURvbWFpbixib2R5OntyZXNvdXJjZTpyLnVybCx2YWx1ZTp7c3RhdHVzOiJsaXZlIn0sbWV0aG9kOiJyZWZyZXNoIn19O3QuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSxmdW5jdGlvbihlKXt9KX0sci5leHBpcmVzLzEuMS8yKjFlMyl9KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBFcnJvcjogIixlKSxvKGUpfSl9KX0pfX0se2tleToiX2dldFJlc291cmNlc0FuZFNjaGVtZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocil7dmFyIG49dm9pZCAwOwovLyBjaGVjayBpZiB0aGUgaHlwZXJ0eSByZXNvdXJjZXMgaXMgYSB2ZWN0b3Igb3IgYSBzdHJpbmcKLy8gVE9ETyBkZWxldGUgbGF0ZXIgd2hlbiBjYXRhbG9ndWUgaXMgZml4ZWQKInN0cmluZyI9PXR5cGVvZiBlLmh5cGVydHlUeXBlPyhuPVtdLG4ucHVzaChlLmh5cGVydHlUeXBlKSk6bj1lLmh5cGVydHlUeXBlO3ZhciBpPWUub2JqZWN0TmFtZSxvPWUuZGF0YU9iamVjdHMscz1bXTsKLy90aGlzIHdpbGwgY3JlYXRlIGEgYXJyYXkgd2l0aCBhIFByb21pc2UgaW4gZWFjaCBwb3NpdGlvbgpmb3IodmFyIHUgaW4gbylzLnB1c2godC5ydW50aW1lQ2F0YWxvZ3VlLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKG9bdV0pKTsKLy8gYXMgc29vbiBhcyB0aGUgcHJldmlvdXMgYXJyYXkgaXMgY29tcGxldGVkLCB0aGlzIHdpbGwgd2FpdCBmb3IgdGhlIHJlc29sdmUgb2YgYWxsIHByb21pc2VzIGluIHRoZSBhcnJheQphLmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciBvIGluIGUpe3ZhciBhPWVbb107dC5wdXNoKGEuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMuc2NoZW1lLmNvbnN0YW50KX0KLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBIeXBlcnR5IFNjaGVtYXMnLCBmaWx0ZXJlZERhdGFTY2hlbWFzKTsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBIeXBlcnR5IHJlc291cmNlcycsIHJlc291cmNlcyk7CnIoe3Jlc291cmNlczpuLGRhdGFTY2hlbWE6dCxuYW1lOml9KX0pfSl9fSx7a2V5OiJjaGVja1JlZ2lzdGVyZWRVUkxzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obil7dmFyIG89ZS5yZXBvcnRlcj8icmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiOiJyZWdpc3RyeTpIeXBlcnR5VVJMcyI7InN0cmluZyI9PXR5cGVvZiB0JiYobz10JiYiaHlwZXJ0eSIhPT0oMCxSLmRpdmlkZVVSTCkodCkudHlwZT8icmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiOiJyZWdpc3RyeTpIeXBlcnR5VVJMcyIpLHIuc3RvcmFnZU1hbmFnZXIuZ2V0KG8pLnRoZW4oZnVuY3Rpb24oYSl7aWYoYXx8KGE9e30pLCJzdHJpbmciPT10eXBlb2YgdCl7Uy5pbmZvKCJbUmVnaXN0cnkgLSBjaGVja1JlZ2lzdGVyZWRVUkxzXSAtIGxvb2sgZm9yICIrdCsiIG9uICIsYSk7dmFyIHM9KDAsaS5kZWZhdWx0KShhKS5tYXAoZnVuY3Rpb24oZSl7dmFyIHI9YVtlXS5pbmRleE9mKHQpO3JldHVybiBhW2VdW3JdfSk7cmV0dXJuIFMuaW5mbygiW1JlZ2lzdHJ5IC0gY2hlY2tSZWdpc3RlcmVkVVJMc10gLSBmb3VuZCAiK3MubGVuZ3RoKyIgcmVzdWx0cyBvbiAiLHMpLG4oMT09PXMubGVuZ3RoP3M6dm9pZCAwKX1pZigicmVnaXN0cnk6SHlwZXJ0eVVSTHMiIT09byl7dmFyIHU9ZS5uYW1lK2Uuc2NoZW1hK2UucmVzb3VyY2VzK2UucmVwb3J0ZXI7cmV0dXJuIG4oYVt1XT9hW3VdOnZvaWQgMCl9ci5fZ2V0UmVzb3VyY2VzQW5kU2NoZW1lcyhlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuKGFbZS5yZXNvdXJjZXMrZS5kYXRhU2NoZW1hK2UubmFtZV0/YVtlLnJlc291cmNlcytlLmRhdGFTY2hlbWErZS5uYW1lXTp2b2lkIDApfSl9KX0pfX0se2tleToicmVnaXN0ZXJIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8pe3ZhciBzPXRoaXMsdT12b2lkIDA7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oYSxjKXsKLy9hc3N1bWluZyBkZXNjcmlwdG9yIGNvbWUgaW4gdGhpcyBmb3JtYXQsIHRoZSBzZXJ2aWNlLXByb3ZpZGVyLWRvbWFpbiB1cmwgaXMgcmV0cmlldmVkIGJ5IGEgc3BsaXQgaW5zdHJ1Y3Rpb24KLy9oeXBlcnR5LWNhdGFsb2d1ZTovLzxzZXJ2aWNlLXByb3ZpZGVyLWRvbWFpbj4vPGNhdGFsb2d1ZS1vYmplY3QtaWRlbnRpZmllcj4KdmFyIGY9KDAsUi5kaXZpZGVVUkwpKHQpLmRvbWFpbjtmLmluY2x1ZGVzKCJjYXRhbG9ndWUiKSYmKGY9Zi5yZXBsYWNlKCJjYXRhbG9ndWUuIiwiIikpLHMuaWRNb2R1bGUuZ2V0SWRlbnRpdHlBc3NlcnRpb24obykudGhlbihmdW5jdGlvbihvKXt2YXIgbD1vLnVzZXJQcm9maWxlLGQ9bC51c2VyVVJMO3ZvaWQgMD09PXMuX21lc3NhZ2VCdXM/YygiW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gTWVzc2FnZUJ1cyBpcyB1bmRlZmluZWQiKToKLy9jYWxsIGNoZWNrIGlmIHRoZSBwcm90b3N0dWIgZXhpc3Q6IHRvIGJlIHJlbW92ZWQKLyogIF90aGlzLnJlc29sdmUoZG9tYWluVXJsKS50aGVuKGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAvLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBzdHViIHRvIGRvbWFpbiByZWdpc3RyeS0gJywgYSk7Ki8Kcy5zdG9yYWdlTWFuYWdlci5nZXQoInJlZ2lzdHJ5Okh5cGVydHlVUkxzIikudGhlbihmdW5jdGlvbihvKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gc3RvcmFnZU1hbmFnZXJdIC0gJywgdXJsc0xpc3QpOwpzLl9nZXRSZXNvdXJjZXNBbmRTY2hlbWVzKHIpLnRoZW4oZnVuY3Rpb24oeSl7dT15LG98fChvPXt9KSxvW3UucmVzb3VyY2VzK3UuZGF0YVNjaGVtYSt1Lm5hbWVdPW4uYWRkcmVzcyxzLnN0b3JhZ2VNYW5hZ2VyLnNldCgicmVnaXN0cnk6SHlwZXJ0eVVSTHMiLDAsbykudGhlbihmdW5jdGlvbigpe3MucmVnaXN0cnlEb21haW49ZiwKLy9jaGVjayB3aGV0aGVyIHRoZSByZWNlaXZlZCBzYW5ib3ggZSBBcHBsaWNhdGlvblNhbmRib3ggb3IgYSBub3JtYWwgc2FuZGJveAoiYXBwIj09PWUudHlwZT9zLnNhbmRib3hlc0xpc3QuYXBwU2FuZGJveFtuLmFkZHJlc3NbMF1dPWU6Im5vcm1hbCI9PT1lLnR5cGU/cy5zYW5kYm94ZXNMaXN0LnNhbmRib3hbbi5hZGRyZXNzWzBdXT1lOmMoIldyb25nIFNhbmRib3hUeXBlIik7dmFyIG89dm9pZCAwLHk9dm9pZCAwOzAhPT0oMCxpLmRlZmF1bHQpKHMucDJwSGFuZGxlclN0dWIpLmxlbmd0aCYmKG89cy5wMnBIYW5kbGVyU3R1YltzLnJ1bnRpbWVVUkxdLnVybCx5PXAucnVudGltZVV0aWxzLnJ1bnRpbWVEZXNjcmlwdG9yLnAycFJlcXVlc3RlclN0dWIpO3ZhciBoPXMucnVudGltZVVSTCx2PW5ldyBiLmRlZmF1bHQocy5pZGVudGlmaWVyLHMucmVnaXN0cnlVUkwsdCxyLG4uYWRkcmVzc1swXSxsLCJndWlkIixzLnJ1bnRpbWVVUkwsImN0eCIsbyx5LHUuZGF0YVNjaGVtYSx1LnJlc291cmNlcyk7cy5oeXBlcnRpZXNMaXN0LnB1c2godik7Ci8vbWVzc2FnZSB0byByZWdpc3RlciB0aGUgbmV3IGh5cGVydHksIHdpdGhpbiB0aGUgZG9tYWluIHJlZ2lzdHJ5CnZhciBnPXZvaWQgMCxtPXZvaWQgMCxfPXMuZXhwaXJlc1RpbWU7Ci8vIHNldCBhIGRpZmZlcmVudCBleHBpcmVzIHZhbHVlIGlmIGNvbmZpZ3VyZWQgaW4gdGhlIEh5cGVydHkgZGVzY3JpcHRvcgpyLmNvbmZpZ3VyYXRpb24mJnIuY29uZmlndXJhdGlvbi5leHBpcmVzJiYoXz1yLmNvbmZpZ3VyYXRpb24uZXhwaXJlcyksbi5uZXdBZGRyZXNzPygKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gcmVnaXN0ZXJpbmcgbmV3IEh5cGVydHkgVVJMJywgYWRkcmVzc1VSTC5hZGRyZXNzWzBdKTsKZz17dXNlcjpkLGRlc2NyaXB0b3I6dCx1cmw6bi5hZGRyZXNzWzBdLGV4cGlyZXM6XyxyZXNvdXJjZXM6dS5yZXNvdXJjZXMsZGF0YVNjaGVtZXM6dS5kYXRhU2NoZW1hLHJ1bnRpbWU6aCxzdGF0dXM6ImxpdmUifSwKLy8gc2V0IGEgZGlmZmVyZW50IGV4cGlyZXMgaWYgZGVmaW5lZCBpbiB0aGUgaHlwZXJ0eSBjb25maWd1cmF0aW9uCm8mJihnLnAycEhhbmRsZXI9byxnLnAycFJlcXVlc3Rlcj15KSwKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gcmVnaXN0ZXJpbmcgbmV3IEh5cGVydHkgYXQgZG9tYWluIHJlZ2lzdHJ5ICcsIG1lc3NhZ2VWYWx1ZSk7Cm09e3R5cGU6ImNyZWF0ZSIsZnJvbTpzLnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3MucmVnaXN0cnlEb21haW4sYm9keTp7dmFsdWU6Zyxwb2xpY3k6InBvbGljeSJ9fSk6KAovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSByZWdpc3RlcmluZyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgSHlwZXJ0eSBVUkwnLCBhZGRyZXNzVVJMLmFkZHJlc3NbMF0pOwptPXt0eXBlOiJ1cGRhdGUiLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3MucmVnaXN0cnlEb21haW4sZnJvbTpzLnJlZ2lzdHJ5VVJMLGJvZHk6e3Jlc291cmNlOm4uYWRkcmVzc1swXSx2YWx1ZTp7c3RhdHVzOiJsaXZlIix1c2VyOmR9fX0sbyYmKG0uYm9keS52YWx1ZS5wMnBIYW5kbGVyPW8sbS5ib2R5LnZhbHVlLnAycFJlcXVlc3Rlcj15KSk7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIEh5cGVydHkgcmVnaXN0cmF0aW9uIGF0IGRvbWFpbiByZWdpc3RyeSAgLSAnLCBtZXNzYWdlKTsKdHJ5e3MuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllcyhtLHMucmVnaXN0cmF0aW9uUmV0cmllcyxmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gSHlwZXJ0eSByZWdpc3RyYXRpb24gcmVzcG9uc2U6ICcsIHJlcGx5KTsKaWYoMjAwPT09ZS5ib2R5LmNvZGUpe3ZhciByPXt1cmw6bi5hZGRyZXNzWzBdfTtvJiYoci5wMnBIYW5kbGVyPW8sci5wMnBSZXF1ZXN0ZXI9eSksYShyKX1lbHNle2lmKDQwNCE9PWUuYm9keS5jb2RlKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIHJlZ2lzdGVyIGFuIEh5cGVydHk6ICIsZSk7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIFRoZSB1cGRhdGUgd2FzIG5vdCBwb3NzaWJsZS4gUmVnaXN0ZXJpbmcgbmV3IEh5cGVydHkgYXQgZG9tYWluIHJlZ2lzdHJ5Jyk7Cmc9e3VzZXI6ZCxkZXNjcmlwdG9yOnQsdXJsOm4uYWRkcmVzc1swXSxleHBpcmVzOl8scmVzb3VyY2VzOnUucmVzb3VyY2VzLGRhdGFTY2hlbWVzOnUuZGF0YVNjaGVtYSxydW50aW1lOmgsc3RhdHVzOiJsaXZlIn0sbyYmKGcucDJwSGFuZGxlcj1vLGcucDJwUmVxdWVzdGVyPXkpLG09e3R5cGU6ImNyZWF0ZSIsZnJvbTpzLnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3MucmVnaXN0cnlEb21haW4sYm9keTp7dmFsdWU6Zyxwb2xpY3k6InBvbGljeSJ9fTt0cnl7cy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzKG0scy5yZWdpc3RyYXRpb25SZXRyaWVzLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBIeXBlcnR5IHJlZ2lzdHJhdGlvbiB1cGRhdGUgcmVzcG9uc2U6ICcsIHJlcGx5KTsKaWYoMjAwIT09ZS5ib2R5LmNvZGUpdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gcmVnaXN0ZXIgYW4gSHlwZXJ0eTogIitlKTt2YXIgdD17dXJsOm4uYWRkcmVzc1swXX07byYmKHQucDJwSGFuZGxlcj1vLHQucDJwUmVxdWVzdGVyPXkpLGEodCl9KX1jYXRjaChlKXtTLmVycm9yKGUpLGMoZSl9fX0pfWNhdGNoKGUpe1MuZXJyb3IoZSksYyhlKX0KLy90aW1lciB0byBrZWVwIHRoZSByZWdpc3RyYXRpb24gYWxpdmUKLy8gdGhlIHRpbWUgaXMgZGVmaW5lZCBieSBhIGxpdHRsZSBsZXNzIHRoYW4gaGFsZiBvZiB0aGUgZXhwaXJlcyB0aW1lIGRlZmluZWQKc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZT17dHlwZToidXBkYXRlIixmcm9tOnMucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrcy5yZWdpc3RyeURvbWFpbixib2R5OntyZXNvdXJjZTpuLmFkZHJlc3NbMF0sdmFsdWU6e3N0YXR1czoibGl2ZSJ9LG1ldGhvZDoicmVmcmVzaCJ9fTtzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUsZnVuY3Rpb24oZSl7fSl9LF8vMS4xLzIqMWUzKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBFcnJvcjogJywgcmVhc29uKTsKYyhlKX0pfSl9KX0sZnVuY3Rpb24oZSl7YygiW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gIixlKX0pfSl9fSx7a2V5OiJ1bnJlZ2lzdGVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPSExLG89MDtmb3Iobz0wO288dC5oeXBlcnRpZXNMaXN0Lmxlbmd0aDtvKyspe3ZhciBhPXQuaHlwZXJ0aWVzTGlzdFtvXTtpZih2b2lkIDAhPT1hJiZhLmh5cGVydHlVUkw9PT1lKXtpPSEwO2JyZWFrfX0hMT09PWk/bigiSHlwZXJ0eSBub3QgZm91bmQiKTooZGVsZXRlIHQuaHlwZXJ0aWVzTGlzdFtvXSxyKCJIeXBlcnR5IHN1Y2Nlc3NmdWxseSBkZWxldGVkIikpfSl9fSx7a2V5OiJkaXNjb3ZlclByb3Rvc3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQYXJhbWV0ZXIgdXJsIG5lZWRlZCIpO3ZhciB0PXRoaXMscj0oMCxSLmRpdmlkZVVSTCkoZSksbj1yLmRvbWFpbjtpZih0LnByb3Rvc3R1YnNMaXN0Lmhhc093blByb3BlcnR5KG4pJiZ0LnByb3Rvc3R1YnNMaXN0W25dLnN0YXR1cz09PU8uTElWRSlyZXR1cm4gdC5wcm90b3N0dWJzTGlzdFtuXTt0aHJvdyB0LnByb3Rvc3R1YnNMaXN0W25dPXtzdGF0dXM6Ty5ERVBMT1lJTkd9LG5ldyBFcnJvcigiW1JlZ2lzdHJ5IC0gZGlzY292ZXJQcm90b1N0dWIgXSBNZXNzYWdlIE5vZGUgUHJvdG9zdHViIE5vdCBGb3VuZC4gQ3JlYXRpbmcgb25lIil9fSx7a2V5OiJkaXNjb3ZlclAyUFN0dWIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZSl7aWYodC5wMnBSZXF1ZXN0ZXJTdHViLmhhc093blByb3BlcnR5KGUpJiZ0LnAycFJlcXVlc3RlclN0dWJbZV0uc3RhdHVzPT09Ty5MSVZFKXJldHVybiB0LnAycFJlcXVlc3RlclN0dWJbZV07dGhyb3cgdC5wMnBSZXF1ZXN0ZXJTdHViW2VdPXtzdGF0dXM6Ty5DUkVBVEVEfSxuZXcgRXJyb3IoIltSZWdpc3RyeSAtIGRpc2NvdmVyUDJQU3R1YiBdIFAyUCBSZXF1ZXN0ZXIgU3R1YiBOb3QgRm91bmQuIENyZWF0aW5nIG9uZSIpfWlmKHQucDJwSGFuZGxlclN0dWIuaGFzT3duUHJvcGVydHkodC5ydW50aW1lVVJMKSlyZXR1cm4gdC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdO3Rocm93IHQucDJwSGFuZGxlclN0dWJbdC5ydW50aW1lVVJMXT17c3RhdHVzOk8uQ1JFQVRFRH0sbmV3IEVycm9yKCJbUmVnaXN0cnkgLSBkaXNjb3ZlclAyUFN0dWIgXSBQMlAgSGFuZGxlciBTdHViIE5vdCBGb3VuZC4iKX19LHtrZXk6InJlZ2lzdGVyU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzLHM9aTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihpLGEpe3ZhciB1PXZvaWQgMDsKLy9jaGVjayBpZiBtZXNzYWdlQnVzIGlzIHJlZ2lzdGVyZWQgaW4gcmVnaXN0cnkgb3Igbm90CnZvaWQgMD09PW8uX21lc3NhZ2VCdXMmJmEoIk1lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIHJlZ2lzdGVyU3R1YiIpLFMuaW5mbygiW1JlZ2lzdHJ5IC0gcmVnaXN0ZXJTdHViXSAtIHN0dWJJRCAiLHQpOy8qIGlmICghc3R1YklELmluZGV4T2YoJ21zZy1ub2RlLicpKSB7CiAgICAgICAgICBzdHViSUQgPSBzdHViSUQuc3Vic3RyaW5nKHN0dWJJRC5pbmRleE9mKCcuJykgKyAxKTsKICAgICAgICB9Ki8KdmFyIGM9dm9pZCAwO2lmKHIpaWYoci5oYXNPd25Qcm9wZXJ0eSgiaXNIYW5kbGVyU3R1YiIpJiZyLmlzSGFuZGxlclN0dWIpdT1vLnAycEhhbmRsZXJVUkwsby5wMnBIYW5kbGVyU3R1Ylt0XT17dXJsOnUsc3RhdHVzOk8uQ1JFQVRFRH0sby5wMnBIYW5kbGVyQXNzb2NpYXRpb25bby5ydW50aW1lVVJMXT1bXSxvLnNhbmRib3hlc0xpc3Quc2FuZGJveFt1XT1lLFMuaW5mbygiW1JlZ2lzdHJ5IC0gcmVnaXN0ZXJTdHViIC0gUDJQSGFuZGxlclN0dWJdIC0gIix0LCIgLSAiLHUpLGkoby5wMnBIYW5kbGVyU3R1Ylt0XSk7ZWxzZXtjPXIucDJwUmVxdWVzdGVyU3R1Yix1PSJydW50aW1lOi8vIisoMCxSLmRpdmlkZVVSTCkoci5yZW1vdGVSdW50aW1lVVJMKS5kb21haW4rIi9wMnByZXF1ZXN0ZXIvIisoMCxSLmdlbmVyYXRlR1VJRCkoKSxTLmluZm8oIltSZWdpc3RyeSAtIHJlZ2lzdGVyU3R1YiAtIFAyUFJlcXVlc3RlclN0dWJdIC0gIixjLCIgLSAiLHUpLAovLyB0byBiZSBjbGFyaWZpZWQgd2hhdCBpcyB0aGlzIHAycEhhbmRsZXJBc3NvY2lhdGlvbgpvLnAycEhhbmRsZXJBc3NvY2lhdGlvbltvLnJ1bnRpbWVVUkxdLnB1c2godSksby5wMnBSZXF1ZXN0ZXJTdHViW3RdPXt1cmw6dSxzdGF0dXM6Ty5DUkVBVEVEfSxvLnNhbmRib3hlc0xpc3Quc2FuZGJveFt1XT1lOwovL1NldHVwIFAyUCBSZXF1ZXN0ZXIgcGF0aCBpbnRvIE1OCnZhciBmPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206by5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitvLl9kb21haW4rIi9zbSIsYm9keTp7c3Vic2NyaWJlOlt1XSxzb3VyY2U6by5yZWdpc3RyeVVSTH19O28uX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZixmdW5jdGlvbihlKXt9KSxpKG8ucDJwUmVxdWVzdGVyU3R1Ylt0XSl9ZWxzZSB1PSJydW50aW1lOi8vIit0KyIvcHJvdG9zdHViLyIrKDAsUi5nZW5lcmF0ZUdVSUQpKCksUy5pbmZvKCJbUmVnaXN0cnkgLSByZWdpc3RlclN0dWIgLSBOb3JtYWwgU3R1Yl0gLSAiLHQpLAovLyBUT0RPOiBPcHRpbWl6ZSB0aGlzCm8ucHJvdG9zdHVic0xpc3RbdF09e3VybDp1LHN0YXR1czpPLkRFUExPWUlOR30sbiYmKG8ucHJvdG9zdHVic0xpc3RbdF0uZGVzY3JpcHRvclVSTD1uKSxzJiZzLmludGVyd29ya2luZyYmKG8ucHJvdG9zdHVic0xpc3RbdF0uaW50ZXJ3b3JraW5nPXMuaW50ZXJ3b3JraW5nKSxvLnNhbmRib3hlc0xpc3Quc2FuZGJveFt1XT1lLGkoby5wcm90b3N0dWJzTGlzdFt0XSk7Ci8vIHJlc29sdmUocnVudGltZVByb3RvU3R1YlVSTCk7Cm8uX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIodSsiL3N0YXR1cyIsZnVuY3Rpb24oZSl7by5fb25Qcm90b3N0dWJTdGF0dXNFdmVudChlKX0pfSl9fSx7a2V5OiJfb25Qcm90b3N0dWJTdGF0dXNFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbTtpZighZS50by5pbmNsdWRlcygiL3N0YXR1cyIpKXJldHVybiB2b2lkIFMuZXJyb3IoIltSZWdpc3RyeSBvblByb3Rvc3R1YlN0YXR1c0V2ZW50XSBOb3QgU3RhdHVzIEV2ZW50OiAiLGUpOwovLyBwcm9jZXNzIHN0YXR1cyBldmVudHMgZnJvbSBtZXNzYWdlIG5vZGUgcHJvdG9zdHVicwppZihyLmluY2x1ZGVzKCIvcHJvdG9zdHViLyIpKQovLyBUT0RPOiB1bmNvbW1lbnQgYmVsb3cgd2hlbiBwcm90b3N0dWJzIGFyZSB1cGRhdGVkIHdpdGggbmV3IHN0YXR1cyB2YWx1ZSAibGl2ZSIKKDAsaS5kZWZhdWx0KSh0LnByb3Rvc3R1YnNMaXN0KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvdG9zdHVic0xpc3RbZV0udXJsPT09cn0pLm1hcChmdW5jdGlvbihyKXt0LnByb3Rvc3R1YnNMaXN0W3JdLnN0YXR1cz1lLmJvZHkudmFsdWV9KTtlbHNlCi8vIHByb2Nlc3Mgc3RhdHVzIGV2ZW50cyBmcm9tIHAycCBjb25uZWN0aW9ucwppZihlLmJvZHkucmVzb3VyY2Upe3ZhciBuPWUuYm9keS5yZXNvdXJjZTtpZih0LnAycENvbm5lY3Rpb25MaXN0W25dKXQucDJwQ29ubmVjdGlvbkxpc3Rbbl0uc3RhdHVzPWUuYm9keS52YWx1ZSx0LnAycENvbm5lY3Rpb25MaXN0W25dLnVybD1yO2Vsc2V7dmFyIG89e3N0YXR1czplLmJvZHkudmFsdWUsdXJsOnJ9O3QucDJwQ29ubmVjdGlvbkxpc3Rbbl09b30KLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IC0gb25Qcm90b3N0dWJTdGF0dXNFdmVudF0gLSBQMlBDb25uZWN0aW9uIHN0YXR1czogJywgX3RoaXMucDJwQ29ubmVjdGlvbkxpc3RbcmVtb3RlUnVudGltZVVSTF0pOwovLyBVcGRhdGUgUDJQIFJlcXVlc3RlciBwcm90b3N0dWIgaWYgaXQgaXMgY29taW5nIGZyb20gdGhlcmUKci5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKT90LnAycFJlcXVlc3RlclN0dWJbbl0uc3RhdHVzPWUuYm9keS52YWx1ZToKLy8gaWYgZnJvbSBQMlBIYW5kbGVyIHdpdGggc3RhdHVzIGRpc2NvbmVuY3RlZCwgbGV0cyByZW1vdmUgZnJvbSBwMnBDb25uZWN0aW9uTGlzdAoiZGlzY29ubmVjdGVkIj09PWUuYm9keS52YWx1ZSYmZGVsZXRlIHQucDJwQ29ubmVjdGlvbkxpc3Rbbl19ZWxzZXtpZihyLmluY2x1ZGVzKCIvcDJwcmVxdWVzdGVyLyIpKQovLyBJdCBpcyBhbiBldmVudCBmcm9tIFAyUCBSZXF1ZXN0ZXIgd2l0aG91dCBtYW5kYXRvcnkgInJlc291cmNlIiBmaWVsZApyZXR1cm4gdm9pZCBTLmVycm9yKCJbUmVnaXN0cnkgb25Qcm90b3N0dWJTdGF0dXNFdmVudF0gcmVzb3VyY2UgbWlzc2luZzogIixlKTsKLy8gSXQgaXMgYW4gZXZlbnQgZnJvbSBQMlAgSGFuZGxlcgp0LnAycEhhbmRsZXJTdHViW3QucnVudGltZVVSTF0uc3RhdHVzPWUuYm9keS52YWx1ZX19fSx7a2V5OiJ1bnJlZ2lzdGVyU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QucHJvdG9zdHVic0xpc3QuaGFzT3duUHJvcGVydHkoZSk/KGRlbGV0ZSB0LnByb3Rvc3R1YnNMaXN0W2VdLHIoIlByb3Rvc3R1YlVSTCByZW1vdmVkIikpOm4oIkVycm9yIG9uIHVucmVnaXN0ZXJTdHViOiBIeXBlcnR5IG5vdCBmb3VuZCIpfSl9fSx7a2V5OiJyZWdpc3RlcklkcFByb3h5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgbz12b2lkIDA7Ci8vY2hlY2sgaWYgbWVzc2FnZUJ1cyBpcyByZWdpc3RlcmVkIGluIHJlZ2lzdHJ5IG9yIG5vdAp2b2lkIDA9PT1yLl9tZXNzYWdlQnVzJiZpKCJNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiByZWdpc3RlclN0dWIiKSxvPSJkb21haW4taWRwOi8vIit0KyIvc3R1Yi8iKygwLFIuZ2VuZXJhdGVHVUlEKSgpLAovLyBUT0RPOiBPcHRpbWl6ZSB0aGlzCnIuaWRwUHJveHlMaXN0W3RdPXt1cmw6byxzdGF0dXM6Ty5ERVBMT1lJTkd9LHIuc2FuZGJveGVzTGlzdC5zYW5kYm94W29dPWUsCi8vIHNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbihtc2cpIHsKLy8gICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwovLyB9KTsKbihvKSxyLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKG8rIi9zdGF0dXMiLGZ1bmN0aW9uKGUpe3IuX29uSWRwUHJveHlTdGF0dXNFdmVudChlKX0pfSl9fSx7a2V5OiJfb25JZHBQcm94eVN0YXR1c0V2ZW50Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tO2lmKCFlLnRvLmluY2x1ZGVzKCIvc3RhdHVzIikpcmV0dXJuIHZvaWQgUy5lcnJvcigiW1JlZ2lzdHJ5IG9uSWRwUHJveHlTdGF0dXNFdmVudF0gTm90IFN0YXR1cyBFdmVudDogIixlKTsoMCxpLmRlZmF1bHQpKHQuaWRwUHJveHlMaXN0KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQuaWRwUHJveHlMaXN0W2VdLnVybD09PXJ9KS5tYXAoZnVuY3Rpb24ocil7dC5pZHBQcm94eUxpc3Rbcl0uc3RhdHVzPWUuYm9keS52YWx1ZX0pfX0se2tleToiZGlzY292ZXJJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQYXJhbWV0ZXIgdXJsIG5lZWRlZCIpO3ZhciB0PXRoaXMscj0oMCxSLmRpdmlkZVVSTCkoZSksbj1yLmRvbWFpbjtpZih0LmlkcFByb3h5TGlzdC5oYXNPd25Qcm9wZXJ0eShuKSYmdC5pZHBQcm94eUxpc3Rbbl0uc3RhdHVzPT09Ty5MSVZFKXJldHVybiB0LmlkcFByb3h5TGlzdFtuXTt0aHJvdyB0LmlkcFByb3h5TGlzdFtuXT17c3RhdHVzOk8uUFJPR1JFU1N9LG5ldyBFcnJvcigiW1JlZ2lzdHJ5IC0gZGlzY292ZXJJZHBQcm94eSBdIElkcCBQcm94eSBOb3QgRm91bmQuIENyZWF0aW5nIG9uZSIpfX0se2tleToicmVnaXN0ZXJQRVAiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuKXsKLy9UT0RPIGNoZWNrIHdoYXQgcGFyYW1ldGVyIGluIHRoZSBwb3N0TWVzc2FnZSB0aGUgcGVwIGlzLgpyLnBlcExpc3RbdF09ZSxuKCJQRVAgcmVnaXN0ZXJlZCB3aXRoIHN1Y2Nlc3MiKX0pfX0se2tleToidW5yZWdpc3RlclBFUCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZvaWQgMD09PXQucGVwTGlzdFtlXT9uKCJQZXAgTm90IGZvdW5kLiIpOnIoIlBFUCBzdWNjZXNzZnVsbHkgcmVtb3ZlZC4iKX0pfX0se2tleToiZ2V0U2FuZGJveCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIlBhcmFtZXRlciB1cmwgbmVlZGVkIik7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSBnZXRTYW5kYm94XSBnZXRTYW5kYm94IGZvcjogJywgdXJsLCAnIGFuZCBjYXBhYmlsaXRpZXM6ICcsIGNvbnN0cmFpbnRzKTsKdmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBhPXZvaWQgMDsKLy9pZiBubyBhcHBTYW5kYm94IHdhcyBmb3VuZCwgdHJ5IHRvIHNlYXJjaCBpbiB0aGUgbm9ybWFsIHNhbmRib3hlcyBsaXN0CmlmKCEoCi8vZmlyc3QgdHJ5IHRvIGZpbmQgdGhlIHVybCBpbiB0aGUgYXBwU2FuZGJveCBsaXN0CmE9ci5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbZV0pJiYhKGE9ci5zYW5kYm94ZXNMaXN0LnNhbmRib3hbZV0pKXt2YXIgcz12b2lkIDA7cz1lLmluY2x1ZGVzKCI6Ly8iKT8oMCxSLmRpdmlkZVVSTCkoZSkuZG9tYWluOmU7Ci8vIHNlYXJjaCBpbiB0aGUgc2FuZGJveGVzIGxpc3QgZm9yIGEgZW50cnkgY29udGFpbmluZyB0aGUgZG9tYWluIGdpdmVuCmZvcih2YXIgdSBpbiByLnNhbmRib3hlc0xpc3Quc2FuZGJveCkKLy90b2RvOiB1bmNvbW1lbnQgc2FuZGJveCBjb25zdHJhaW50cyBtYXRjaCBjb25kaXRpb24gd2l0aCBydW50aW1lIHNoYXJpbmcKaWYodS5pbmNsdWRlcyhzKSYmci5zYW5kYm94ZXNMaXN0LnNhbmRib3hbdV0ubWF0Y2hlcyh0KSl7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgZT1yLnNhbmRib3hlc0xpc3Quc2FuZGJveFt1XTtyZXR1cm4oMCxpLmRlZmF1bHQpKHQpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4iYnJvd3NlciI9PT10JiZlLnR5cGU9PT15LlNhbmRib3hUeXBlLk5PUk1BTHx8IndpbmRvd1NhbmJveCI9PT10JiZlLnR5cGU9PT15LlNhbmRib3hUeXBlLldJTkRPV30pLmxlbmd0aD4wJiYoYT1lKSwiYnJlYWsifSgpO2lmKCJicmVhayI9PT1jKWJyZWFrfX1hP24oYSk6bygibm8gc2FuZGJveCBmb3VuZCBmb3I6ICIrZSl9KX19LHtrZXk6InJlc29sdmVOb3JtYWxTdHViIix2YWx1ZTpmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygncmVzb2x2ZU5vcm1hbFN0dWIgJyArIHVybCk7CnZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXsKLy9zcGxpdCB0aGUgdXJsIHRvIGZpbmQgdGhlIGRvbWFpblVSTC4gZGVhbHMgd2l0aCB0aGUgdXJsIGZvciBleGFtcGxlIGFzOgovLyJoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvcHJvdG9zdHViLzEyMyIsCnZhciBpPSgwLFIuZGl2aWRlVVJMKShlKSxvPWkuZG9tYWluLGE9aS50eXBlO2UuaW5jbHVkZXModC5ydW50aW1lVVJMKSYmKFMuZXJyb3IoIltSZWdpc3RyeSAtIHJlc29sdmVdIFVSTCB0byBiZSByZXNvbHZlZCBzaG91bGQgaGF2ZSBsaXN0ZW5lcnMgIixlKSxuKCJbUmVnaXN0cnkgLSByZXNvbHZlXSBVUkwgdG8gYmUgcmVzb2x2ZWQgc2hvdWxkIGhhdmUgbGlzdGVuZXJzICIsZSkpLAovLyByZXNvbHZlIHRoZSBkb21haW4gcHJvdG9zdHViIGluIGNhc2Ugb2YgYSBtZXNzYWdlIHRvIGdsb2JhbCByZWdpc3RyeQplLmluY2x1ZGVzKCJnbG9iYWw6Ly9yZWdpc3RyeSIpP289dC5fZG9tYWluOm8uaW5kZXhPZigibXNnLW5vZGUuIikmJm8uaW5kZXhPZigicmVnaXN0cnkuIil8fChvPW8uc3Vic3RyaW5nKG8uaW5kZXhPZigiLiIpKzEpKSx0LmlzTGVnYWN5KGUpLnRoZW4oZnVuY3Rpb24oaSl7Ci8vIGlmIGxlZ2FjeSBpdCBzaG91bGQgcmVzb2x2ZSBmb3IgPHByb3RvY29sPi48ZG9tYWluPgppJiYiZG9tYWluLWlkcCIhPT1hJiYobz1hKyIuIisoMCxSLmdldFVzZXJJZGVudGl0eURvbWFpbikoZSkpLFMuaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVdIGRvbWFpblVybDoiLG8pO3ZhciBzPXZvaWQgMDtzPSJkb21haW4taWRwIj09PWE/ISF0LmlkcFByb3h5TGlzdC5oYXNPd25Qcm9wZXJ0eShvKSYmdC5pZHBQcm94eUxpc3Rbb106ISF0LnByb3Rvc3R1YnNMaXN0Lmhhc093blByb3BlcnR5KG8pJiZ0LnByb3Rvc3R1YnNMaXN0W29dLFMuaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVdIHJlZ2lzdHJlZDoiLHMpLAovLyBUT0RPIHNpbmNlIHRoZSBwcm90b3N0dWJzIGhhdmUgb3RoZXIgc3RhdGVzIHRoaXMgc2hvdWxkIGJlIHJldmlzZWQsIGJlY2F1c2UgdGhlIHN0YXR1cyBjb3VsZCBjaGFuZ2UgZnJvbSBERVBMT1lFRCB0byBMSVZFCi8vIFRPRE8gYW5kIHRoaXMgdmFsaWRhdGlvbiB3aWxsIHRyaWdnZXIgYSBuZXcgbG9hZCBvZiBJRFBQcm94eSBvciBQcm90b3N0dWI7CnMmJnMuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpJiYocy5zdGF0dXM9PT1PLkRFUExPWUVEfHxzLnN0YXR1cz09PU8uQ1JFQVRFRHx8cy5zdGF0dXM9PT1PLkxJVkV8fHMuc3RhdHVzPT09Ty5ESVNDT05ORUNURUQpPyhTLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlXSBSZXNvbHZlZDogIixzLnVybCxzLnN0YXR1cykscihzLnVybCkpOgovL3RvZG86IHVzZSBzd2l0Y2gtY2FzZSB0byBzdXBwb3J0IG90aGVyIHR5cGVzIG9mIHN0dWJzCiJkb21haW4taWRwIj09PWE/KAovLyBUaGUgSWRQIFByb3h5IGRvZXMgbm90IGV4aXN0LCBsZXQncyBwcmVwYXJlIGl0cyBkZXBsb3ltZW50IGJ5IHdhdGNoaW5nIGl0cyBzdGF0dXMKdC53YXRjaGluZ1lvdS5vYnNlcnZlKCJpZHBQcm94eUxpc3QiLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlTm9ybWFsU3R1Yl0gaWRwUHJveHlMaXN0IGNoYW5nZWQgJyArIF90aGlzLmlkcFByb3h5TGlzdCk7CnZhciBuPWUua2V5cGF0aDtuLmluY2x1ZGVzKCJzdGF0dXMiKSYmKG49bi5yZXBsYWNlKCIuc3RhdHVzIiwiIikpLG49PT1vJiYic3RhdHVzIj09PWUubmFtZSYmZS5uZXdWYWx1ZT09PU8uQ1JFQVRFRCYmCi8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVOb3JtYWxTdHViXSBpZHBQcm94eUxpc3QgaXMgbGl2ZSAnICsgX3RoaXMuaWRwUHJveHlMaXN0W2RvbWFpblVybF0pOwpyKHQuaWRwUHJveHlMaXN0W29dLnVybCl9KSxzfHwoCi8vIHRoaXMgcHJvY2VzcyB3aWxsIGxvYWQgdGhlIGlkcCBwcm94eSwgYmVjYXVzZSBpcyBub3QgeWV0IHJlZ2lzdGVyZWQ7ClMuaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVOb3JtYWxTdHViXSBkZXBsb3kgbmV3IElEUFByb3h5OiAiLG8pLHQubG9hZGVyLmxvYWRJZHBQcm94eShvKS50aGVuKGZ1bmN0aW9uKCl7Uy5pbmZvKCJbUmVnaXN0cnkucmVzb2x2ZU5vcm1hbFN0dWJdIElkUCBQcm94eSBkZXBsb3llZDogIix0LmlkcFByb3h5TGlzdFtvXSl9KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJbUmVnaXN0cnkucmVzb2x2ZV0gRXJyb3IgcmVzb2x2aW5nIExvYWQgSURQUHJveHk6ICIsZSksdC5pZHBQcm94eUxpc3Rbb10uc3RhdHVzPSJkZXBsb3ltZW50LWZhaWxlZCIsbihlKX0pKSk6KAovLyBUaGUgcHJvdG9TdHViIGRvZXMgbm90IGV4aXN0LCBsZXQncyBwcmVwYXJlIGl0cyBkZXBsb3ltZW50IGJ5IHdhdGNoaW5nIGl0cyBzdGF0dXMKdC53YXRjaGluZ1lvdS5vYnNlcnZlKCJwcm90b3N0dWJzTGlzdCIsZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVOb3JtYWxTdHViXSBwcm90b3N0dWJzTGlzdCBjaGFuZ2VkICcgKyBfdGhpcy5wcm90b3N0dWJzTGlzdCk7CnZhciBuPWUua2V5cGF0aDtuLmluY2x1ZGVzKCJzdGF0dXMiKSYmKG49bi5yZXBsYWNlKCIuc3RhdHVzIiwiIikpLG49PT1vJiYic3RhdHVzIj09PWUubmFtZSYmZS5uZXdWYWx1ZT09PU8uQ1JFQVRFRCYmCi8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVdIHByb3Rvc3R1YiBpcyBsaXZlICcgKyBfdGhpcy5wcm90b3N0dWJzTGlzdFtkb21haW5VcmxdKTsKcih0LnByb3Rvc3R1YnNMaXN0W29dLnVybCl9KSxzfHwoCi8vIGxldHMgZGVwbG95IHRoZSBwcm90b3N0dWIKUy5pbmZvKCJbUmVnaXN0cnkucmVzb2x2ZV0gdHJpZ2dlciBuZXcgUHJvdG9jb2xTdHViOiAiLG8pLHQubG9hZGVyLmxvYWRTdHViKG8pLnRoZW4oZnVuY3Rpb24oKXt9KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJbUmVnaXN0cnkucmVzb2x2ZU5vcm1hbFN0dWJdIEVycm9yIHJlc29sdmluZyBMb2FkIFByb3RvY29sU3R1YjogIixlKSxuKGUpfSkpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1MuZXJyb3IoIltSZWdpc3RyeS5yZXNvbHZlXSBFcnJvciByZXNvbHZpbmcgaXNsZWdhY3k6ICIsZSksbihlKX0pfSl9fSx7a2V5OiJyZXNvbHZlIix2YWx1ZTpmdW5jdGlvbihlKXtTLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gICIsZSk7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPWUudG8/ZS50bzplLG89ISghZS5ib2R5fHwhZS5ib2R5LnAycCkmJmUuYm9keS5wMnA7Ci8vIGxvZy5sb2coJ1AyUDogJywgcDJwLCB1cmwpOwovLyBsb2cubG9nKCdQMlAgLSBwMnBIYW5kbGVyU3R1YjogJywgIV90aGlzLnAycEhhbmRsZXJTdHViW190aGlzLnJ1bnRpbWVVUkxdLCBfdGhpcy5wMnBIYW5kbGVyU3R1YiwgX3RoaXMucnVudGltZVVSTCk7Ci8vIGxvZy5sb2coJ1AyUCAtIGlzQmFja2VuZFNlcnZpY2VVUkw6ICcsIGlzQmFja2VuZFNlcnZpY2VVUkwodXJsKSwgaXNCYWNrZW5kU2VydmljZVVSTCwgdXJsKTsKLy8gbG9nLmxvZygnUDJQIC0gaW5jbHVkZXMgcnVudGltZVVSTDogJywgdXJsLmluY2x1ZGVzKF90aGlzLnJ1bnRpbWVVUkwpKTsKLy8gbG9nLmxvZygnUDJQIC0gaW5jbHVkZXMgcDJwaGFuZGxlcjogJywgdXJsLmluY2x1ZGVzKCcvcDJwaGFuZGxlci8nKSk7Ci8vIGxvZy5sb2coJ1AyUCAtIGluY2x1ZGVzIHAycHJlcXVlc3RlcjogJywgdXJsLmluY2x1ZGVzKCcvcDJwcmVxdWVzdGVyLycpKTsKLy8gU2tpcCBwMnAgcHJvY2VkdXJlIHdoZW4gbm90IHN1cHBvcnRlZCBieSB0aGUgUnVudGltZSBvciBmb3IgYmFja2VuZCBzZXJ2aWNlcwohdC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdfHwoMCxSLmlzQmFja2VuZFNlcnZpY2VVUkwpKGkpfHxpLmluY2x1ZGVzKHQucnVudGltZVVSTCl8fGkuaW5jbHVkZXMoIi9wMnBoYW5kbGVyLyIpfHxpLmluY2x1ZGVzKCIvcDJwcmVxdWVzdGVyLyIpPyhTLmluZm8oIltSZWdpc3RyeSAtIHJlc29sdmVdIC0gUmVzb2x2ZSBub3JtYWwgc3R1YjogIix0LnAycEhhbmRsZXJTdHViLHQucnVudGltZVVSTCwoMCxSLmlzQmFja2VuZFNlcnZpY2VVUkwpKGkpLG8saSksdC5yZXNvbHZlTm9ybWFsU3R1YihpKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KSk6KFMuaW5mbygiW1JlZ2lzdHJ5IC0gcmVzb2x2ZV0gLSBjaGVja1AyUDogIixvLGksdC5fcDJwQ29ubmVjdGlvblJlc29sdmUpLHQuX3AycENvbm5lY3Rpb25SZXNvbHZlLmNoZWNrUDJQKGUpLnRoZW4oZnVuY3Rpb24obil7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVdIGZvdW5kIHJlZ2lzdGVyZWQgUDJQOiAnLCByZWdpc3RlcmVkUDJQKTsKdmFyIGE9dC5wMnBDb25uZWN0aW9uTGlzdFtuLnJ1bnRpbWVdO3N3aXRjaChhfHwoYT1uLHQucDJwQ29ubmVjdGlvbkxpc3Rbbi5ydW50aW1lXT1hKSxhLnN0YXR1cyl7Y2FzZSBPLkxJVkU6ZS5ib2R5LnBlZXI9bi5ydW50aW1lLHIoYS51cmwsZSk7YnJlYWs7Y2FzZSBPLkNSRUFURUQ6Ly8gcDJwIGNvbm5lY3Rpb24gc2V0dXAgaXMgb25nb2luZywgdXNlIE1OIFN0dWIKY2FzZSBPLlBST0dSRVNTOnQucmVzb2x2ZU5vcm1hbFN0dWIoaSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSk7YnJlYWs7Y2FzZSBPLkRJU0NPTk5FQ1RFRDoKLy8gcDJwIGNvbm5lY3Rpb24gc3R1YiB3YXMgZGlzY29ubmVjdGVkLCBsZXQncyBhc2sgdG8gY29ubmVjdCBhZ2FpbgpTLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gcDJwQ29ubmVjdGlvbiBpcyBkaXNjb25uZWN0ZWQgbGV0cyB0cnkgdG8gcmVjb25uZWN0IiksdC5fcDJwQ29ubmVjdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyKGEpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIFJlc29sdmVdIC0gd2FzIHJlY29ubmVjdGVkIHdpdGggcDJwUmVxdWVzdGVyU3R1YnQ6ICcsIHJldHVyblVSTCk7CnIoZSl9LGZ1bmN0aW9uKGUpe1MuaW5mbygiW1JlZ2lzdHJ5IC0gUmVzb2x2ZV0gLSBSZWFzb246ICIsZSksdC5yZXNvbHZlTm9ybWFsU3R1YihpKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KX0pO2JyZWFrO2RlZmF1bHQ6Uy5pbmZvKCJbUmVnaXN0cnkgLSByZXNvbHZlXSAtIFAyUDogIixvKSxvP3QuX3NldHVwUDJQUmVxdWVzdGVyKG4pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIG5vIHAycCBjb25uZWN0aW9uIGV4aXN0cyBidXQgdGhlIG1lc3NhZ2Ugc2VuZGVyIGlzIGFza2luZyBvbmUuIExldHMgdHJ5IHRvIHNldHVwIG9uZQpyKGUpfSxmdW5jdGlvbihlKXtTLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gUmVhc29uOiAiLGUpLHQucmVzb2x2ZU5vcm1hbFN0dWIoaSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9KToKLy8gbm8gcDJwIGNvbm5lY3Rpb24gZXhpc3RzIGFuZCB0aGUgbWVzc2FnZSBzZW5kZXIgZG9lcyBub3QgYXNrIG9uZS4gTGV0cyB1c2UgdGhlIE1OIFN0dWIKdC5yZXNvbHZlTm9ybWFsU3R1YihpKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KX19LGZ1bmN0aW9uKGUpe1MuaW5mbygiW1JlZ2lzdHJ5IC0gUmVzb2x2ZV0gLSBSZWFzb246ICIsZSksdC5yZXNvbHZlTm9ybWFsU3R1YihpKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KX0pKX0pfX0se2tleToiX3NldHVwUDJQUmVxdWVzdGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBTLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIGxvYWRTdHViIHdpdGggcDJwUmVxdWVzdGVyOiAiLGUpLG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT1lLnJ1bnRpbWUsbz17cmVtb3RlUnVudGltZVVSTDppLHAycEhhbmRsZXI6ZS5wMnBIYW5kbGVyLHAycFJlcXVlc3RlclN0dWI6ITB9OwovLyBsZXRzIHByZXBhcmUgdGhlIHAycFJlcXVlc3RlclNUdWIgZGVwbG95bWVudCBieSBzZXR0aW5nIGFuIG9ic2VydmVyIHRvIGl0cyBzdGF0dXMgY2hhbmdlcwp0LndhdGNoaW5nWW91Lm9ic2VydmUoInAycFJlcXVlc3RlclN0dWIiLGZ1bmN0aW9uKGUpe1MubG9nKCJbUmVnaXN0cnkuX3NldHVwUDJQQ29ubmVjdGlvbl0gcDJwUmVxdWVzdGVyU3R1YnMgY2hhbmdlZCAiK3QucDJwUmVxdWVzdGVyU3R1YiksZS5rZXlwYXRoLnNwbGl0KCIuIilbMF09PT1pJiYic3RhdHVzIj09PWUubmFtZSYmZS5uZXdWYWx1ZT09PU8uTElWRSYmKFMubG9nKCJbUmVnaXN0cnkuX3NldHVwUDJQQ29ubmVjdGlvbl0gcDJwUmVxdWVzdGVyIGlzIGxpdmUgIit0LnAycFJlcXVlc3RlclN0dWJbaV0pLHIodC5wMnBSZXF1ZXN0ZXJTdHViW2ldLnVybCkpfSksCi8vICBzdHViIGxvYWQKdC5sb2FkZXIubG9hZFN0dWIoZS5wMnBSZXF1ZXN0ZXIsbykudGhlbihmdW5jdGlvbigpe1MubG9nKCJbUmVnaXN0cnkuX3NldHVwUDJQQ29ubmVjdGlvbl0gcDJwUmVxdWVzdGVyIGRlcGxveWVkOiAiLHQucDJwUmVxdWVzdGVyU3R1YltpXSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6ImlzTGVnYWN5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYoZT09PXQuX2RvbWFpbilyZXR1cm4gcighMSk7Uy5sb2coIltSZWdpc3RyeV0gW1JlZ2lzdHJ5LlJlZ2lzdHJ5LmlzTGVnYWN5XSAiLGUpOwovLyBUT0RPOiB0byBiZSBkZWZpbmVkIGluIHRoZSBydW50aW1lIGNvbmZpZ3VyYXRpb24KdmFyIGk9WyJoeXBlcnR5LXJ1bnRpbWUiLCJkb21haW4iLCJnbG9iYWwiLCJoeXBlcnR5Il0sbz0oMCxSLmRpdmlkZVVSTCkoZSk7aWYoLTEhPT1pLmluZGV4T2Yoby50eXBlKXx8by5kb21haW49PT10Ll9kb21haW4pcmV0dXJuIHIoITEpOwovLyBwcm9jZXNzIFVzZXIgVVJMcwppZihlLnNwbGl0KCJAIikubGVuZ3RoPjEpe3ZhciBhPW8uZG9tYWluOwovLyBsb2cubG9nKCdbUmVnaXN0cnldIFtSZWdpc3RyeS5SZWdpc3RyeS5pc0xlZ2FjeV0gZG9tYWluOiAnLCBkb21haW4pOwppZih0LmlkcExlZ2FjeVByb3h5TGlzdC5oYXNPd25Qcm9wZXJ0eShhKSl7dmFyIHM9dC5pZHBMZWdhY3lQcm94eUxpc3RbYV07cmV0dXJuIHIocy5pbnRlcndvcmtpbmc/cy5pbnRlcndvcmtpbmc6ITEpfXQuX2xvYWRlci5kZXNjcmlwdG9ycy5nZXRJZHBQcm94eURlc2NyaXB0b3IoYSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBbUmVnaXN0cnkuUmVnaXN0cnkuaXNMZWdhY3ldIExlZ2FjeSBzdHViIGRlc2NyaXB0b3I6ICcsIHJlc3VsdCk7CmUuaW50ZXJ3b3JraW5nPyh0LmlkcExlZ2FjeVByb3h5TGlzdFthXT1lLHIoZS5pbnRlcndvcmtpbmcpKTpyKCExKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1Mud2FybigicHJvYmxlbSBsb2FkaW5nIGlkcCBwcm94eSBkZXNjcmlwdG9yIGZvciBkb21haW46IixhLCIgYmVjYXVzZSAiLGUpLG4oZSl9KX1lbHNlCi8vIHByb2Nlc3MgcHJvdG9zdHViIFVSTHMKcih0LmlzSW50ZXJ3b3JraW5nUHJvdG9TdHViKGUpKX0pfX0se2tleToiaXNMb2NhbCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9WyJoeXBlcnR5LXJ1bnRpbWUiLCJydW50aW1lIl0scj1bImh5cGVydHkiXSxuPWUuc3BsaXQoIjovLyIpWzBdOwovLyBQcm9jZXNzIFJ1bnRpbWUgQ29yZSBVUkxzLgovLyBNZXNzYWdlcyBvcmlnaW5hdGVkIGZyb20gcHJvdG9zdHVicyBzaG91bGQgYWxzbyBub3QgaW5jbHVkZSB0aGUgcnVudGltZVVSTCBpbiBpdHMgVVJMLgppZigtMSE9PXQuaW5kZXhPZihuKSlyZXR1cm4gZS5pbmNsdWRlcyh0aGlzLnJ1bnRpbWVVUkwpOwovLyBQcm9jZXNzIEh5cGVydHkgVVJMcwovLyBUb2RvOiBoeXBlcnRpZXNMaXN0IHNob3VsZCBiZSBhbiBvYmplY3Qgbm90IGFuIGFycmF5CmlmKC0xIT09ci5pbmRleE9mKG4pKXtmb3IodmFyIGkgaW4gdGhpcy5oeXBlcnRpZXNMaXN0KXtpZih0aGlzLmh5cGVydGllc0xpc3RbaV0uaHlwZXJ0eVVSTD09PWUpcmV0dXJuITB9cmV0dXJuITF9Ci8vIFByb2Nlc3MgRGF0YSBPYmplY3QgVVJMcwplLmluY2x1ZGVzKCIvc3Vic2NyaXB0aW9uIikmJihlPWUuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCIvc3Vic2NyaXB0aW9uIikpKTt2YXIgbz10aGlzLmRhdGFPYmplY3RMaXN0W2VdO3JldHVybiEhbyYmKCFvLmludGVyd29ya2luZ3x8IW8uaW50ZXJ3b3JraW5nKX19LHtrZXk6ImlzSW50ZXJ3b3JraW5nUHJvdG9TdHViIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiEhZS5pbmNsdWRlcygiL3Byb3Rvc3R1Yi8iKSYmKDAsaS5kZWZhdWx0KSh0LnByb3Rvc3R1YnNMaXN0KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIHQucHJvdG9zdHVic0xpc3Rbcl0udXJsPT09ZX0pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4hIXQucHJvdG9zdHVic0xpc3RbZV0uaGFzT3duUHJvcGVydHkoImludGVyd29ya2luZyIpJiZ0LnByb3Rvc3R1YnNMaXN0W2VdLmludGVyd29ya2luZ30pWzBdfX0se2tleToibG9hZGVyIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbG9hZGVyPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2FkZXJ9fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUJ1c30sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fbWVzc2FnZUJ1cz1lLHQuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIodC5yZWdpc3RyeVVSTCxmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IGxpc3RlbmVyXSAnLCBtc2cpOwooMCxSLmlzSHlwZXJ0eVVSTCkoZS5mcm9tKSxlLmJvZHkuaGFzT3duUHJvcGVydHkoImNyaXRlcmlhIik7ZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXNvdXJjZSIpJiYiLiIhPT1lLmJvZHkucmVzb3VyY2UmJigoMCxSLmlzVVJMKShlLmJvZHkucmVzb3VyY2UpLCgwLFIuaXNVc2VyVVJMKShlLmJvZHkucmVzb3VyY2UpLCgwLFIuaXNIeXBlcnR5VVJMKShlLmJvZHkucmVzb3VyY2UpKTtlLnR5cGU7aWYoZS5ib2R5Lmhhc093blByb3BlcnR5KCJ2YWx1ZSIpJiYoZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KCJuYW1lIiksZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KCJ1c2VyIikpLCJyZXNwb25zZSI9PT1lLnR5cGUpcmV0dXJuIHZvaWQgUy5lcnJvcigiW1JlZ2lzdGVyIGxpc3RlbmVyXSBza2lwcGluZyAiLGUpOwovLyBtc2cgc2VudCBieSBpZGVudGl0eSBtYW5hZ2VyIGxpYnJhcnkKdmFyIHI9dC5fZ2V0SWRlbnRpdHlBc3NvY2lhdGVkKGUuYm9keS5yZXNvdXJjZSxlLmJvZHkuY3JpdGVyaWEpLG49e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7cmVzb3VyY2U6cn19O24uYm9keS5jb2RlPXI/MjAwOjQwNCx0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG4pfSk7Ci8vIEluc3RhbGwgQWRkcmVzc0FsbG9jYXRpb24KdmFyIHI9di5kZWZhdWx0Lmluc3RhbmNlO3QuYWRkcmVzc0FsbG9jYXRpb249cn19XSksUmVnaXN0cnl9KCk7dC5kZWZhdWx0PVAsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDM2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQzNyksZS5leHBvcnRzPXIoMTMpLk9iamVjdC5rZXlzfSwvKiA0MzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTykKdmFyIG49cig3NiksaT1yKDY3KTtyKDk3KSgia2V5cyIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGkobihlKSl9fSl9LC8qIDQzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNhbmRib3hUeXBlPXZvaWQgMDt2YXIgbj1yKDU5KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDYwKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig2OCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig2OSksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9cig0NTgpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChnKSxtPXIoNDU5KSxfPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj0odC5TYW5kYm94VHlwZT17QVBQOiJhcHAiLE5PUk1BTDoibm9ybWFsIixXSU5ET1c6IndpbmRvdyJ9LGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIFNhbmRib3goZSl7KDAsZi5kZWZhdWx0KSh0aGlzLFNhbmRib3gpO3ZhciB0PSgwLHkuZGVmYXVsdCkodGhpcywoU2FuZGJveC5fX3Byb3RvX198fCgwLHUuZGVmYXVsdCkoU2FuZGJveCkpLmNhbGwodGhpcykpLHI9dDtyZXR1cm4gZSYmKHIuY2FwYWJpbGl0aWVzPWUpLHR9LyoqCiAgICogRGVwbG95IGFuIGluc3RhbmNlIG9mIHRoZSBjb21wb25lbnQgaW50byB0aGUgc2FuZGJveC4KICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbXBvbmVudFNvdXJjZUNvZGUgQ29tcG9uZW50IHNvdXJjZSBjb2RlIChIeXBlcnR5LCBQcm90b1N0dWIsIGV0YykKICAgKiBAcGFyYW0gIHtVUkx9IGNvbXBvbmVudFVSTCBIeXBlcnR5LCBQcm90b1N0dWIsIG9yIGFueSBvdGhlciBjb21wb25lbnQgYWRkcmVzcy4KICAgKiBAcGFyYW0gIHtDb25maWd9IGNvbmZpZ3VyYXRpb24gQ29uZmlnIHBhcmFtZXRlcnMgb2YgdGhlIGNvbXBvbmVudAogICAqIEByZXR1cm4ge1Byb21pc2U8c3RyaW5nPn0gcmV0dXJuIGRlcGxveWVkIGlmIHN1Y2Nlc3NmdWwsIG9yIGFueSBvdGhlciBzdHJpbmcgd2l0aCBhbiBlcnJvcgogICAqLwpyZXR1cm4oMCx2LmRlZmF1bHQpKFNhbmRib3gsZSksKDAsZC5kZWZhdWx0KShTYW5kYm94LFt7a2V5OiJkZXBsb3lDb21wb25lbnQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzOwovLyBsZXQgbWVzc2FnZUZhY3RvcnkgPSBfdGhpcy5tZXNzYWdlRmFjdG9yeTsKcmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXsKLy9GTE9XLU9VVDogZGVwbG95IG1lc3NhZ2UgZm9yIHRoZSBpbnRlcm5hbCBTYW5kYm94UmVnaXN0cnkgLT4gX29uRGVwbG95CnZhciBhPXt0eXBlOiJjcmVhdGUiLGZyb206Yi5kZWZhdWx0LkV4dGVybmFsRGVwbG95QWRkcmVzcyx0bzpiLmRlZmF1bHQuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGJvZHk6e3VybDp0LHNvdXJjZUNvZGU6ZSxjb25maWc6cn19OwovL3NlbmQgbWVzc2FnZSBpbnRvIHRoZSBzYW5kYm94IGludGVybmFscyBhbmQgd2FpdCBmb3IgcmVwbHkKbi5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGUpezIwMD09PWUuYm9keS5jb2RlPwovL2lzIHRoaXMgcmVzcG9uc2UgY29tcGxhaW50IHdpdGggdGhlIHNwZWM/CmkoImRlcGxveWVkIik6byhlLmJvZHkuZGVzYyl9KX0pfX0se2tleToicmVtb3ZlQ29tcG9uZW50Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Ci8vRkxPVy1PVVQ6IHVuLWRlcGxveSBtZXNzYWdlIGZvciB0aGUgaW50ZXJuYWwgU2FuZGJveFJlZ2lzdHJ5IC0+IF9vblJlbW92ZQp2YXIgaT17dHlwZToiZGVsZXRlIixmcm9tOmIuZGVmYXVsdC5FeHRlcm5hbERlcGxveUFkZHJlc3MsdG86Yi5kZWZhdWx0LkludGVybmFsRGVwbG95QWRkcmVzcyxib2R5Ont1cmw6ZX19OwovL3NlbmQgbWVzc2FnZSBpbnRvIHRoZSBzYW5kYm94IGludGVybmFscyBhbmQgd2FpdCBmb3IgcmVwbHkKdC5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpezIwMD09PWUuYm9keS5jb2RlPwovL2lzIHRoaXMgcmVzcG9uc2UgY29tcGxhaW50IHdpdGggdGhlIHNwZWM/CnIoInVuZGVwbG95ZWQiKTpuKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJtYXRjaGVzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsaS5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuISh0LmNhcGFiaWxpdGllc1tyXSYmdC5jYXBhYmlsaXRpZXNbcl09PT1lW3JdKX0pO3JldHVybiAwPT09ci5sZW5ndGh8fCFlW3JdfX1dKSxTYW5kYm94fShfLmRlZmF1bHQpKTt0LmRlZmF1bHQ9Un0sLyogNDM5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ0MCksZS5leHBvcnRzPXIoMTMpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0sLyogNDQwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBuPXIoNzYpLGk9cigxODYpO3IoOTcpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGkobihlKSl9fSl9LC8qIDQ0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDQyKSxfX2VzTW9kdWxlOiEwfX0sLyogNDQyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDEyNikscigxODcpLGUuZXhwb3J0cz1yKDEzOSkuZigiaXRlcmF0b3IiKX0sLyogNDQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NDQpLF9fZXNNb2R1bGU6ITB9fSwvKiA0NDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDQ1KSxyKDE3OSkscig0NTApLHIoNDUxKSxlLmV4cG9ydHM9cigxMykuU3ltYm9sfSwvKiA0NDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbQp2YXIgbj1yKDIxKSxpPXIoNTgpLG89cig0MyksYT1yKDI2KSxzPXIoMTgyKSx1PXIoNDQ2KS5LRVksYz1yKDY2KSxmPXIoMTM0KSxsPXIoOTUpLGQ9cig5NCkscD1yKDIyKSx5PXIoMTM5KSxoPXIoMTQwKSx2PXIoNDQ3KSxnPXIoNDQ4KSxiPXIoMzkpLG09cig0NCksXz1yKDEzMCksUj1yKDczKSx3PXIoMTMxKSxTPXIoNDQ5KSxPPXIoMTQxKSxQPXIoMzgpLGs9cig2NyksTT1PLmYsTD1QLmYseD1TLmYsRT1uLlN5bWJvbCxEPW4uSlNPTixVPUQmJkQuc3RyaW5naWZ5LEE9cCgiX2hpZGRlbiIpLGo9cCgidG9QcmltaXRpdmUiKSxJPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLEM9Zigic3ltYm9sLXJlZ2lzdHJ5IiksVD1mKCJzeW1ib2xzIiksTj1mKCJvcC1zeW1ib2xzIiksRj1PYmplY3QucHJvdG90eXBlLHE9ImZ1bmN0aW9uIj09dHlwZW9mIEUsSD1uLlFPYmplY3QsQj0hSHx8IUgucHJvdG90eXBlfHwhSC5wcm90b3R5cGUuZmluZENoaWxkLEc9byYmYyhmdW5jdGlvbigpe3JldHVybiA3IT13KEwoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49TShGLHQpO24mJmRlbGV0ZSBGW3RdLEwoZSx0LHIpLG4mJmUhPT1GJiZMKEYsdCxuKX06TCxLPWZ1bmN0aW9uKGUpe3ZhciB0PVRbZV09dyhFLnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSx0fSxWPXEmJiJzeW1ib2wiPT10eXBlb2YgRS5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRX0sVz1mdW5jdGlvbihlLHQscil7cmV0dXJuIGU9PT1GJiZXKE4sdCxyKSxiKGUpLHQ9Xyh0LCEwKSxiKHIpLGkoVCx0KT8oci5lbnVtZXJhYmxlPyhpKGUsQSkmJmVbQV1bdF0mJihlW0FdW3RdPSExKSxyPXcocix7ZW51bWVyYWJsZTpSKDAsITEpfSkpOihpKGUsQSl8fEwoZSxBLFIoMSx7fSkpLGVbQV1bdF09ITApLEcoZSx0LHIpKTpMKGUsdCxyKX0sWT1mdW5jdGlvbihlLHQpe2IoZSk7Zm9yKHZhciByLG49dih0PW0odCkpLGk9MCxvPW4ubGVuZ3RoO28+aTspVyhlLHI9bltpKytdLHRbcl0pO3JldHVybiBlfSxKPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/dyhlKTpZKHcoZSksdCl9LHo9ZnVuY3Rpb24oZSl7dmFyIHQ9SS5jYWxsKHRoaXMsZT1fKGUsITApKTtyZXR1cm4hKHRoaXM9PT1GJiZpKFQsZSkmJiFpKE4sZSkpJiYoISh0fHwhaSh0aGlzLGUpfHwhaShULGUpfHxpKHRoaXMsQSkmJnRoaXNbQV1bZV0pfHx0KX0sJD1mdW5jdGlvbihlLHQpe2lmKGU9bShlKSx0PV8odCwhMCksZSE9PUZ8fCFpKFQsdCl8fGkoTix0KSl7dmFyIHI9TShlLHQpO3JldHVybiFyfHwhaShULHQpfHxpKGUsQSkmJmVbQV1bdF18fChyLmVudW1lcmFibGU9ITApLHJ9fSxYPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXgobShlKSksbj1bXSxvPTA7ci5sZW5ndGg+bzspaShULHQ9cltvKytdKXx8dD09QXx8dD09dXx8bi5wdXNoKHQpO3JldHVybiBufSxaPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPWU9PT1GLG49eChyP046bShlKSksbz1bXSxhPTA7bi5sZW5ndGg+YTspIWkoVCx0PW5bYSsrXSl8fHImJiFpKEYsdCl8fG8ucHVzaChUW3RdKTtyZXR1cm4gb307Ci8vIDE5LjQuMS4xIFN5bWJvbChbZGVzY3JpcHRpb25dKQpxfHwoRT1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBFKXRocm93IFR5cGVFcnJvcigiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yISIpO3ZhciBlPWQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApLHQ9ZnVuY3Rpb24ocil7dGhpcz09PUYmJnQuY2FsbChOLHIpLGkodGhpcyxBKSYmaSh0aGlzW0FdLGUpJiYodGhpc1tBXVtlXT0hMSksRyh0aGlzLGUsUigxLHIpKX07cmV0dXJuIG8mJkImJkcoRixlLHtjb25maWd1cmFibGU6ITAsc2V0OnR9KSxLKGUpfSxzKEUucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLE8uZj0kLFAuZj1XLHIoMTk4KS5mPVMuZj1YLHIoNzcpLmY9eixyKDEzNykuZj1aLG8mJiFyKDkyKSYmcyhGLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIseiwhMCkseS5mPWZ1bmN0aW9uKGUpe3JldHVybiBLKHAoZSkpfSksYShhLkcrYS5XK2EuRiohcSx7U3ltYm9sOkV9KTtmb3IodmFyIFE9Imhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGVlPTA7US5sZW5ndGg+ZWU7KXAoUVtlZSsrXSk7Zm9yKHZhciB0ZT1rKHAuc3RvcmUpLHJlPTA7dGUubGVuZ3RoPnJlOyloKHRlW3JlKytdKTthKGEuUythLkYqIXEsIlN5bWJvbCIsewovLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSkKZm9yOmZ1bmN0aW9uKGUpe3JldHVybiBpKEMsZSs9IiIpP0NbZV06Q1tlXT1FKGUpfSwKLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pCmtleUZvcjpmdW5jdGlvbihlKXtpZighVihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIHN5bWJvbCEiKTtmb3IodmFyIHQgaW4gQylpZihDW3RdPT09ZSlyZXR1cm4gdH0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7Qj0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7Qj0hMX19KSxhKGEuUythLkYqIXEsIk9iamVjdCIsewovLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCmNyZWF0ZTpKLAovLyAxOS4xLjIuNCBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKZGVmaW5lUHJvcGVydHk6VywKLy8gMTkuMS4yLjMgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykKZGVmaW5lUHJvcGVydGllczpZLAovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCmdldE93blByb3BlcnR5RGVzY3JpcHRvcjokLAovLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQpnZXRPd25Qcm9wZXJ0eU5hbWVzOlgsCi8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTykKZ2V0T3duUHJvcGVydHlTeW1ib2xzOlp9KSwKLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pCkQmJmEoYS5TK2EuRiooIXF8fGMoZnVuY3Rpb24oKXt2YXIgZT1FKCk7Ci8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9Ci8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbAovLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9scwpyZXR1cm4iW251bGxdIiE9VShbZV0pfHwie30iIT1VKHthOmV9KXx8Int9IiE9VShPYmplY3QoZSkpfSkpLCJKU09OIix7c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFWKGUpKXtmb3IoLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZAp2YXIgdCxyLG49W2VdLGk9MTthcmd1bWVudHMubGVuZ3RoPmk7KW4ucHVzaChhcmd1bWVudHNbaSsrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJmcodCl8fCh0PWZ1bmN0aW9uKGUsdCl7aWYociYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksIVYodCkpcmV0dXJuIHR9KSxuWzFdPXQsVS5hcHBseShELG4pfX19KSwKLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KQpFLnByb3RvdHlwZVtqXXx8cig1NykoRS5wcm90b3R5cGUsaixFLnByb3RvdHlwZS52YWx1ZU9mKSwKLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQpsKEUsIlN5bWJvbCIpLAovLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddCmwoTWF0aCwiTWF0aCIsITApLAovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQpsKG4uSlNPTiwiSlNPTiIsITApfSwvKiA0NDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOTQpKCJtZXRhIiksaT1yKDQyKSxvPXIoNTgpLGE9cigzOCkuZixzPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFyKDY2KShmdW5jdGlvbigpe3JldHVybiB1KE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpfSksZj1mdW5jdGlvbihlKXthKGUsbix7dmFsdWU6e2k6Ik8iKyArK3MsLy8gb2JqZWN0IElECnc6e319fSl9LGw9ZnVuY3Rpb24oZSx0KXsKLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeAppZighaShlKSlyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGU/ZTooInN0cmluZyI9PXR5cGVvZiBlPyJTIjoiUCIpK2U7aWYoIW8oZSxuKSl7Ci8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CmlmKCF1KGUpKXJldHVybiJGIjsKLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKaWYoIXQpcmV0dXJuIkUiOwovLyBhZGQgbWlzc2luZyBtZXRhZGF0YQpmKGUpfXJldHVybiBlW25dLml9LGQ9ZnVuY3Rpb24oZSx0KXtpZighbyhlLG4pKXsKLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKaWYoIXUoZSkpcmV0dXJuITA7Ci8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCmlmKCF0KXJldHVybiExOwovLyBhZGQgbWlzc2luZyBtZXRhZGF0YQpmKGUpfXJldHVybiBlW25dLnd9LHA9ZnVuY3Rpb24oZSl7cmV0dXJuIGMmJnkuTkVFRCYmdShlKSYmIW8oZSxuKSYmZihlKSxlfSx5PWUuZXhwb3J0cz17S0VZOm4sTkVFRDohMSxmYXN0S2V5OmwsZ2V0V2VhazpkLG9uRnJlZXplOnB9fSwvKiA0NDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwp2YXIgbj1yKDY3KSxpPXIoMTM3KSxvPXIoNzcpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uKGUpLHI9aS5mO2lmKHIpZm9yKHZhciBhLHM9cihlKSx1PW8uZixjPTA7cy5sZW5ndGg+YzspdS5jYWxsKGUsYT1zW2MrK10pJiZ0LnB1c2goYSk7cmV0dXJuIHR9fSwvKiA0NDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQp2YXIgbj1yKDc1KTtlLmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LC8qIDQ0OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3cKdmFyIG49cig0NCksaT1yKDE5OCkuZixvPXt9LnRvU3RyaW5nLGE9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gaShlKX1jYXRjaChlKXtyZXR1cm4gYS5zbGljZSgpfX07ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIGEmJiJbb2JqZWN0IFdpbmRvd10iPT1vLmNhbGwoZSk/cyhlKTppKG4oZSkpfX0sLyogNDUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDE0MCkoImFzeW5jSXRlcmF0b3IiKX0sLyogNDUxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDE0MCkoIm9ic2VydmFibGUiKX0sLyogNDUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NTMpLF9fZXNNb2R1bGU6ITB9fSwvKiA0NTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDU0KSxlLmV4cG9ydHM9cigxMykuT2JqZWN0LnNldFByb3RvdHlwZU9mfSwvKiA0NTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKQp2YXIgbj1yKDI2KTtuKG4uUywiT2JqZWN0Iix7c2V0UHJvdG90eXBlT2Y6cig0NTUpLnNldH0pfSwvKiA0NTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy4KLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KdmFyIG49cig0MiksaT1yKDM5KSxvPWZ1bmN0aW9uKGUsdCl7aWYoaShlKSwhbih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07ZS5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9Py8vIGVzbGludC1kaXNhYmxlLWxpbmUKZnVuY3Rpb24oZSx0LG4pe3RyeXtuPXIoNjUpKEZ1bmN0aW9uLmNhbGwscigxNDEpLmYoT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG4oZSxbXSksdD0hKGUgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goZSl7dD0hMH1yZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbyhlLHIpLHQ/ZS5fX3Byb3RvX189cjpuKGUsciksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOm99fSwvKiA0NTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDU3KTt2YXIgbj1yKDEzKS5PYmplY3Q7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY3JlYXRlKGUsdCl9fSwvKiA0NTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjYpOwovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKbihuLlMsIk9iamVjdCIse2NyZWF0ZTpyKDEzMSl9KX0sLyogNDU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1mdW5jdGlvbigpey8qIHByaXZhdGUKICBfY29tcG9uZW50czogPHVybDogaW5zdGFuY2U+CiAgKi8KZnVuY3Rpb24gU2FuZGJveFJlZ2lzdHJ5KGUpeygwLGkuZGVmYXVsdCkodGhpcyxTYW5kYm94UmVnaXN0cnkpO3ZhciB0PXRoaXM7dC5fYnVzPWUsdC5fY29tcG9uZW50cz17fSxlLmFkZExpc3RlbmVyKFNhbmRib3hSZWdpc3RyeS5JbnRlcm5hbERlcGxveUFkZHJlc3MsZnVuY3Rpb24oZSl7Ci8vY29uc29sZS5sb2coJ1NhbmRib3hSZWdpc3RyeS1SQ1Y6ICcsIG1zZyk7Ci8vIGxldCByZXNwb25zZU1zZyA9IHsKLy8gICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBTYW5kYm94UmVnaXN0cnkuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLCB0bzogU2FuZGJveFJlZ2lzdHJ5LkV4dGVybmFsRGVwbG95QWRkcmVzcwovLyB9Owpzd2l0Y2goZS50eXBlKXtjYXNlImNyZWF0ZSI6dC5fb25EZXBsb3koZSk7YnJlYWs7Y2FzZSJkZWxldGUiOnQuX29uUmVtb3ZlKGUpfX0pfXJldHVybigwLGEuZGVmYXVsdCkoU2FuZGJveFJlZ2lzdHJ5LFt7a2V5OiJfcmVzcG9uc2VNc2ciLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTpTYW5kYm94UmVnaXN0cnkuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLHRvOlNhbmRib3hSZWdpc3RyeS5FeHRlcm5hbERlcGxveUFkZHJlc3N9LGk9e307Ci8vIHJldHVybiBtZXNzYWdlRmFjdG9yeS5jcmVhdGVSZXNwb25zZShtc2csIGNvZGUsIHZhbHVlKTsKcmV0dXJuIHQmJihpLmNvZGU9dCksciYmKGkuZGVzYz1yKSxuLmJvZHk9aSxufX0se2tleToiX29uRGVwbG95Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LmNvbmZpZyxuPWUuYm9keS51cmwsaT1lLmJvZHkuc291cmNlQ29kZSxvPXZvaWQgMCxhPXZvaWQgMDtpZih0Ll9jb21wb25lbnRzLmhhc093blByb3BlcnR5KG4pKW89NTAwLGE9Ikluc3RhbmNlICIrbisiIGFscmVhZHkgZXhpc3QhIjtlbHNlIHRyeXt0Ll9jb21wb25lbnRzW25dPXQuX2NyZWF0ZShuLGksciksbz0yMDB9Y2F0Y2goZSl7bz01MDAsYT1lfXZhciBzPXQuX3Jlc3BvbnNlTXNnKGUsbyxhKTt0Ll9idXMucG9zdE1lc3NhZ2Uocyl9fSx7a2V5OiJfb25SZW1vdmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkudXJsLG49dm9pZCAwLGk9dm9pZCAwO3QuX2NvbXBvbmVudHMuaGFzT3duUHJvcGVydHkocik/KAovL3JlbW92ZSBjb21wb25lbnQgZnJvbSB0aGUgcG9vbCBhbmQgYWxsIGxpc3RlbmVycwpkZWxldGUgdC5fY29tcG9uZW50c1tyXSx0Ll9idXMucmVtb3ZlQWxsTGlzdGVuZXJzT2Yociksbj0yMDApOihuPTUwMCxpPSJJbnN0YW5jZSAiK3IrIiBkb2Vzbid0IGV4aXN0ISIpO3ZhciBvPXQuX3Jlc3BvbnNlTXNnKGUsbixpKTt0Ll9idXMucG9zdE1lc3NhZ2Uobyl9fSx7a2V5OiJfY3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7fX0se2tleToiY29tcG9uZW50cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHN9fV0pLFNhbmRib3hSZWdpc3RyeX0oKTtzLkV4dGVybmFsRGVwbG95QWRkcmVzcz0iaHlwZXJ0eS1ydW50aW1lOi8vc2FuZGJveC9leHRlcm5hbCIscy5JbnRlcm5hbERlcGxveUFkZHJlc3M9Imh5cGVydHktcnVudGltZTovL3NhbmRib3gvaW50ZXJuYWwiLHQuZGVmYXVsdD1zLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ1OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDYwKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig2OCksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig2OSksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cigyMDApLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIE1pbmlCdXMoKXtyZXR1cm4oMCxhLmRlZmF1bHQpKHRoaXMsTWluaUJ1cyksKDAsZi5kZWZhdWx0KSh0aGlzLChNaW5pQnVzLl9fcHJvdG9fX3x8KDAsaS5kZWZhdWx0KShNaW5pQnVzKSkuY2FsbCh0aGlzKSl9LyoqCiAgICogUG9zdCBhIG1lc3NhZ2UgZm9yIHJvdXRpbmcuIE1lc3NhZ2UgaXMgcm91dGVkIGRpcmVjdGx5IHRvIHRoZSBleHRlcm5hbCByb3V0aW5nIF9vblBvc3RNZXNzYWdlLgogICAqIEBwYXJhbSAge01lc3NhZ2V9IGluTXNnICAgICAgICAgICAgSlNPTiB3aXRoIG1hbmRhdG9yeSBNZXNzYWdlIHN0cnVjdHVyZSB7aWQsIHR5cGUsIGZyb20sIHRvfQogICAqIEBwYXJhbSAge0NhbGxiYWNrfSByZXNwb25zZUNhbGxiYWNrIE9wdGlvbmFsIGNhbGxiYWNrIGlmIGEgcmVzcG9uc2UgaXMgZXhwZWN0ZWQgZnJvbSB0aGUgcmVxdWVzdC4gQSByZXNwb25zZSB3aWxsIGJlIGFsd2F5cyBzZW50LCBldmVuIGlmIGl0IGlzIGEgIlRpbWVvdXQiLgogICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgICAgICAgICAgICB0aGUgTWVzc2FnZSBpZAogICAqLwpyZXR1cm4oMCxkLmRlZmF1bHQpKE1pbmlCdXMsZSksKDAsdS5kZWZhdWx0KShNaW5pQnVzLFt7a2V5OiJwb3N0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzOwovL2Fsd2F5cyBzZW5kIHRvIGV4dGVybmFsICh0byBjb3JlIE1lc3NhZ2VCdXMpCnJldHVybiByLl9nZW5JZChlKSxyLl9yZXNwb25zZUNhbGxiYWNrKGUsdCksci5fb25Qb3N0TWVzc2FnZShlKSxlLmlkfX0se2tleToiX29uTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fb25SZXNwb25zZShlKSl7dmFyIHI9dC5fc3Vic2NyaXB0aW9uc1tlLnRvXTtyPyh0Ll9wdWJsaXNoT24ocixlKSxlLnRvLnN0YXJ0c1dpdGgoImh5cGVydHkiKXx8dC5fcHVibGlzaE9uRGVmYXVsdChlKSk6dC5fcHVibGlzaE9uRGVmYXVsdChlKX19fV0pLE1pbmlCdXN9KHkuZGVmYXVsdCk7LyoqCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICAgICAgICAgICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgKiovCnQuZGVmYXVsdD1oLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMyksaT1uLkpTT058fChuLkpTT049e3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeX0pO2UuZXhwb3J0cz1mdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBpLnN0cmluZ2lmeS5hcHBseShpLGFyZ3VtZW50cyl9fSwvKiA0NjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig2MCksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNjgpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNjkpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNDYyKSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiBIeXBlcnR5SW5zdGFuY2UoZSx0LHIsbixvLHMsdSxjLGwsZCxwLHksaCx2LGcpeygwLGEuZGVmYXVsdCkodGhpcyxIeXBlcnR5SW5zdGFuY2UpO3ZhciBiPSgwLGYuZGVmYXVsdCkodGhpcywoSHlwZXJ0eUluc3RhbmNlLl9fcHJvdG9fX3x8KDAsaS5kZWZhdWx0KShIeXBlcnR5SW5zdGFuY2UpKS5jYWxsKHRoaXMsZSx0LHIscCx2LGcpKSxtPWI7cmV0dXJuIG0uX2Rlc2NyaXB0b3I9bixtLl9oeXBlcnR5VVJMPW8sbS5fdXNlcj1zLG0uX2d1aWQ9dSxtLl9ydW50aW1lPWMsbS5fY29udGV4dD1sLG0uX3AycEhhbmRsZXI9ZCxtLl9kYXRhU2NoZW1lcz15LG0uX3Jlc291cmNlcz1oLGJ9cmV0dXJuKDAsZC5kZWZhdWx0KShIeXBlcnR5SW5zdGFuY2UsZSksKDAsdS5kZWZhdWx0KShIeXBlcnR5SW5zdGFuY2UsW3trZXk6InVzZXIiLHNldDpmdW5jdGlvbihlKXt0aGlzLnVzZXI9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJ9fSx7a2V5OiJoeXBlcnR5VVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eVVSTH19LHtrZXk6ImRlc2NyaXB0b3IiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdG9yfX0se2tleToib2JqZWN0TmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3IuX29iamVjdE5hbWV9fSx7a2V5OiJwMnBIYW5kbGVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcDJwSGFuZGxlcn19LHtrZXk6ImRhdGFTY2hlbWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVNjaGVtZXN9fSx7a2V5OiJyZXNvdXJjZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXNvdXJjZXN9fSx7a2V5OiJydW50aW1lVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZX19XSksSHlwZXJ0eUluc3RhbmNlfSh5LmRlZmF1bHQpOy8qKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwp0LmRlZmF1bHQ9aCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUmVnaXN0cnlEYXRhTW9kZWwoZSx0LHIsbixvLGEscyx1LGMpeygwLGkuZGVmYXVsdCkodGhpcyxSZWdpc3RyeURhdGFNb2RlbCk7dmFyIGY9dGhpcztmLl9pZD1lLGYuX3VybD10LGYuX2Rlc2NyaXB0b3JVUkw9cixmLl9zdGFydGluZ1RpbWU9byxmLl9sYXN0TW9kaWZpZWQ9YSxmLl9zdGF0dXM9cyxmLl9zdHVicz11LGYuX3N0dWJzQ29uZmlndXJhdGlvbj1jLGYuX3AycFJlcXVlc3Rlcj1ufXJldHVybigwLGEuZGVmYXVsdCkoUmVnaXN0cnlEYXRhTW9kZWwsW3trZXk6ImlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJkZXNjcmlwdG9yIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvclVSTH19LHtrZXk6InAycFJlcXVlc3RlciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3AycFJlcXVlc3Rlcn19LHtrZXk6Imxhc3RNb2RpZmllZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhc3RNb2RpZmllZH19XSksUmVnaXN0cnlEYXRhTW9kZWx9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDYzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDExKSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1mLmdldExvZ2dlcigiUDJQQ29ubmVjdGlvblJlc29sdmUiKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUDJQQ29ubmVjdGlvblJlc29sdmUoZSl7KDAsYS5kZWZhdWx0KSh0aGlzLFAyUENvbm5lY3Rpb25SZXNvbHZlKTt2YXIgdD10aGlzO3QuX3JlZ2lzdHJ5PWUsdC5fcmVtb3RlUDJQRW50aXRpZXM9e319LyoqCiAgKiBWZXJpZmllcyBpZiByZW1vdGUgRW50aXR5IGNhbiBiZSByZWFjaGVkIHdpdGggYSBQMlAgQ29ubmVjdGlvbi4KICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICAgICBpbmZvICAgICAgICAgICBvYmplY3QgVVJMCiAgKiBAcmV0dXJuIHtIeXBlcnR5RGF0YU9iamVjdEluc3RhbmNlfSAgYWRkcmVzc1VSTCAgICAgcmV0dXJuIHRoZSBEYXRhIE9iamVjdCBpbnN0YW5jZSByZWdpc3RlcmVkIFVSTCwgcmV0dXJuIHVuZGVmaW5lZCBvdGhlcndpc2UKICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKFAyUENvbm5lY3Rpb25SZXNvbHZlLFt7a2V5OiJjaGVja1AyUCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUuaGFzT3duUHJvcGVydHkoInRvIikpCi8vIHRocm93IEVycm9yKCdUaGUgcDJwIHZlcmlmaWNhdGlvbiB3YXMgZmFpbGVkJyk7CnJldHVybiBpLmRlZmF1bHQucmVqZWN0KCJUaGUgcDJwIHZlcmlmaWNhdGlvbiB3YXMgZmFpbGVkIik7dmFyIHQ9ZS50by5zcGxpdCgiOi8vIilbMF0scj1lLnRvLnNwbGl0KCI6Ly8iKVsxXS5zcGxpdCgiLyIpWzJdLG49dm9pZCAwO249cj9lLnRvLnN1YnN0cmluZygwLGUudG8uaW5kZXhPZigiLyIrcikpOmUudG87dmFyIG89e307c3dpdGNoKGUuYm9keS5wMnAmJihvLnAycD1lLmJvZHkucDJwKSxlLmJvZHkucDJwSGFuZGxlciYmZS5ib2R5LnAycFJlcXVlc3RlciYmKG8ucDJwSGFuZGxlcj1lLmJvZHkucDJwSGFuZGxlcixvLnAycFJlcXVlc3Rlcj1lLmJvZHkucDJwUmVxdWVzdGVyLG8ucnVudGltZT1lLmJvZHkucDJwSGFuZGxlci5zcGxpdCgiL3AycGhhbmRsZXIvIilbMF0pLHQpe2Nhc2UicnVudGltZSI6cmV0dXJuIHRoaXMuY2hlY2tQMlBSdW50aW1lKG4sbyk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5jaGVja1AyUEVudGl0eShuLG8pfX19LHtrZXk6ImNoZWNrUDJQRW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgbz1yLl9yZW1vdGVQMlBFbnRpdGllc1tlXTtpZihvKW4obyk7ZWxzZSBpZih0LnJ1bnRpbWUpbih0KTtlbHNlIGlmKHQucDJwKXsKLy8gb3RoZXJ3aXNlIGxvb2sgb24gRG9tYWluIFJlZ2lzdHJ5CmwubG9nKCJbUmVnaXN0cnkgLSBjaGVja1AyUEVudGl0eV0gLSBzZWFyY2ggaW4gRG9tYWluIFJlZ2lzdHJ5OiAiLGUpO3ZhciBhPXt0eXBlOiJyZWFkIixmcm9tOnIuX3JlZ2lzdHJ5LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX3JlZ2lzdHJ5Ll9kb21haW4sYm9keTp7cmVzb3VyY2U6ZX19O3IuX3JlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24oZSl7aWYobC5sb2coIltSZWdpc3RyeSAtIGNoZWNrUDJQRW50aXR5XSBEb21haW4gUmVnaXN0cnkgcmVwbHkiLGUpLCJ2YWx1ZSJpbiBlLmJvZHkpewovL3RvZG86IHN0b3JlIHJldHJpZXZlZCBlbnRpdHkKdmFyIHQ9ZS5ib2R5LnZhbHVlO3QuaGFzT3duUHJvcGVydHkoInAycEhhbmRsZXIiKT9uKHQpOmkoIltSZWdpc3RyeSBjaGVja1AyUEVudGl0eV0gSHlwZXJ0eSBmb3VuZCBkb2VzIG5vdCBzdXBwb3J0IFAyUCIsZS5ib2R5LnZhbHVlKX1lbHNlIGkoIltSZWdpc3RyeSBjaGVja1AyUEVudGl0eV0gSHlwZXJ0eSB3aXRoIFAyUEhhbmRsZXIgbm90IGZvdW5kIixlLmJvZHkuY29kZSl9KX1lbHNlIGkoIltSZWdpc3RyeSBjaGVja1AyUEVudGl0eV0gTm8gUDJQIENvbm5lY3Rpb24gYXZhaWxhYmxlIGZvciAiLGUpfSl9fSx7a2V5OiJjaGVja1AyUFJ1bnRpbWUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXt9OwovLyBsb29rIG9uIGxvY2FsbHkgc3RvcmVkIHAycCBjb25uZWN0aW9ucwpyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihpLG8pe3IuX3JlZ2lzdHJ5LnAycENvbm5lY3Rpb25MaXN0W2VdP2koe3J1bnRpbWU6ZX0pOnQucnVudGltZT8obj10LGkobikpOm8oIltSZWdpc3RyeS5QMlBDb25uZWN0aW9uUmVzb2x2ZS5jaGVja1AyUFJ1bnRpbWVdIE5vIFAyUCBDb25uZWN0aW9uIGZvdW5kIHRvICIsZSl9KX19LHtrZXk6ImNoZWNrUDJQSHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89dm9pZCAwOwovLyBsb29rIG9uIGxvY2FsbHkgc3RvcmVkIGh5cGVydGllcwpmb3IodmFyIGEgaW4gci5fcmVnaXN0cnkucmVtb3RlSHlwZXJ0eUxpc3QpCi8vIHRvZG86IGNoYW5nZSB0byAiaHlwZXJ0eS51cmwiIHRvIGJlIGFsaWduZWQgd2l0aCBoeXBlcnR5IGluc3RhbmNlIGRhdGEgbW9kZWwgc3BlYwppZihvPXIuX3JlZ2lzdHJ5LnJlbW90ZUh5cGVydHlMaXN0W2FdLGwubG9nKCJbUmVnaXN0cnkgLSBjaGVja1AyUEh5cGVydHldIC0gZm9yIGVhY2ggSHlwZXJ0eTogIixvKSxvLmh5cGVydHlJRD09PWUpcmV0dXJuIHZvaWQoby5oYXNPd25Qcm9wZXJ0eSgicDJwSGFuZGxlciIpP24obyk6aSgiW1JlZ2lzdHJ5IGNoZWNrUDJQSHlwZXJ0eV0gSHlwZXJ0eSBmb3VuZCBkb2VzIG5vdCBzdXBwb3J0IFAyUCIsbykpO2lmKCFvJiZ0LnJ1bnRpbWUpbih0KTtlbHNlIGlmKCFvJiZ0LnAycCl7Ci8vIG90aGVyd2lzZSBsb29rIG9uIERvbWFpbiBSZWdpc3RyeQpsLmxvZygiW1JlZ2lzdHJ5IC0gY2hlY2tQMlBIeXBlcnR5XSAtIHNlYXJjaCBpbiBEb21haW4gUmVnaXN0cnk6ICIsbyk7dmFyIHM9e3R5cGU6InJlYWQiLGZyb206ci5fcmVnaXN0cnkucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrci5fcmVnaXN0cnkuX2RvbWFpbixib2R5OntyZXNvdXJjZTplfX07ci5fcmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihlKXtpZihsLmxvZygiW1JlZ2lzdHJ5IC0gY2hlY2tQMlBIeXBlcnR5XSBEb21haW4gUmVnaXN0cnkgcmVwbHkiLGUpLCJ2YWx1ZSJpbiBlLmJvZHkpewovL3RvZG86IHN0b3JlIHJldHJpZXZlZCBoeXBlcnR5CnZhciB0PWUuYm9keS52YWx1ZTtyLl9yZWdpc3RyeS5yZW1vdGVIeXBlcnR5TGlzdC5wdXNoKHQpLHQuaGFzT3duUHJvcGVydHkoInAycEhhbmRsZXIiKT9uKHQpOmkoIltSZWdpc3RyeSBjaGVja1AyUEh5cGVydHldIEh5cGVydHkgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLGUuYm9keS52YWx1ZSl9ZWxzZSBpKCJbUmVnaXN0cnkgY2hlY2tQMlBIeXBlcnR5XSBIeXBlcnR5IHdpdGggUDJQSGFuZGxlciBub3QgZm91bmQiLGUuYm9keS5jb2RlKX0pfWVsc2UgaSgiW1JlZ2lzdHJ5IGNoZWNrUDJQSHlwZXJ0eV0gTm8gUDJQIENvbm5lY3Rpb24gYXZhaWxhYmxlIGZvciAiLGUpfSl9fSx7a2V5OiJjaGVja1AyUERhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihuLGkpewovLyBsb29rIG9uIGxvY2FsbHkgc3RvcmVkIFJlbW90ZSBEYXRhIE9iamVjdHMKdmFyIG89ci5fcmVnaXN0cnkucmVtb3RlRGF0YU9iamVjdExpc3QuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiByLl9yZWdpc3RyeS5yZW1vdGVEYXRhT2JqZWN0TGlzdFt0XS51cmw9PT1lfSk7aWYoMCE9PW8ubGVuZ3RoJiZvWzBdLnAycFJlcXVlc3RlciluKG9bMF0pO2Vsc2UgaWYoMCE9PW8ubGVuZ3RoKWkoIltSZWdpc3RyeSBjaGVja1AyUERhdGFPYmplY3RdIERhdGEgT2JqZWN0IGZvdW5kIGRvZXMgbm90IHN1cHBvcnQgUDJQIixvWzBdKTtlbHNlIGlmKDA9PT1vLmxlbmd0aCYmdC5ydW50aW1lKW4odCk7ZWxzZSBpZihvLmxlbmd0aCYmdC5wMnApewovLyBvdGhlcndpc2UgbG9vayBvbiBEb21haW4gUmVnaXN0cnkKLy8gbG9vayBvbiBEb21haW4gUmVnaXN0cnkKdmFyIGE9e3R5cGU6InJlYWQiLGZyb206ci5fcmVnaXN0cnkucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrci5fcmVnaXN0cnkuX2RvbWFpbixib2R5OntyZXNvdXJjZTplfX07ci5fcmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXtpZihsLmxvZygiZGlzY292ZXIgZGF0YSBvYmplY3QgcGVyIHVybCByZXBseSIsZSksInZhbHVlImluIGUuYm9keSl7Ci8vdG9kbzogc3RvcmUgcmV0cmlldmVkIGh5cGVydHkKdmFyIHQ9ZS5ib2R5LnZhbHVlO3IuX3JlZ2lzdHJ5LnJlbW90ZURhdGFPYmplY3RMaXN0LnB1c2godCksdC5wMnBSZXF1ZXN0ZXI/bih0KTppKCJbUmVnaXN0cnkgY2hlY2tQMlBEYXRhT2JqZWN0XSBEYXRhIE9iamVjdCBmb3VuZCBkb2VzIG5vdCBzdXBwb3J0IFAyUCIsZS5ib2R5LnZhbHVlKX1lbHNlIGkoIltSZWdpc3RyeSBjaGVja1AyUERhdGFPYmplY3RdIG5vdCBmb3VuZCIsZS5ib2R5LmNvZGUpfSl9ZWxzZSBpKCJbUmVnaXN0cnkgY2hlY2tQMlBEYXRhT2JqZWN0XSBubyBQMlAgQ29ubmVjdGlvbiBmb3VuZCIpfSl9fSx7a2V5OiJhZGRSZW1vdGVQMlBFbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fcmVtb3RlUDJQRW50aXRpZXNbZV09dH19LHtrZXk6InJlbW92ZVJlbW90ZVAyUEVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX3JlbW90ZVAyUEVudGl0aWVzW2VdfX0se2tleToicmVjb25uZWN0UDJQUmVxdWVzdGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBsLmxvZygiW1AyUENvbmVuY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3Rlcl0gbGV0cyB0cnkgdG8gcmVjb25uZWN0IFAyUCBSZXF1ZXN0ZXIgU3R1YjogIixlKSxuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9ZS5ydW50aW1lLG89e3R5cGU6ImV4ZWN1dGUiLGZyb206dC5fcmVnaXN0cnkucmVnaXN0cnlVUkwsdG86ZS51cmwsYm9keTp7bWV0aG9kOiJjb25uZWN0IixwYXJhbXM6W2UucDJwSGFuZGxlcl19fTsKLy8gbGV0cyBwcmVwYXJlIHRoZSBwMnBSZXF1ZXN0ZXJTVHViIHJlY29ubmVjdCBieSBzZXR0aW5nIGFuIG9ic2VydmVyIHRvIGl0cyBzdGF0dXMgY2hhbmdlcwp0Ll9yZWdpc3RyeS53YXRjaGluZ1lvdS5vYnNlcnZlKCJwMnBSZXF1ZXN0ZXJTdHViIixmdW5jdGlvbihlKXtpZihsLmxvZygiW1AyUENvbmVuY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3Rlcl0gcDJwUmVxdWVzdGVyU3R1YnMgY2hhbmdlZCAiK3QuX3JlZ2lzdHJ5LnAycFJlcXVlc3RlclN0dWIpLGUua2V5cGF0aC5zcGxpdCgiLiIpWzBdPT09aSYmInN0YXR1cyI9PT1lLm5hbWUpc3dpdGNoKGUubmV3VmFsdWUpe2Nhc2UibGl2ZSI6bC5sb2coIltQMlBDb25lbmN0aW9uUmVzb2x2ZS5yZWNvbm5lY3RQMlBSZXF1ZXN0ZXJdIHAycFJlcXVlc3RlciBpcyBsaXZlICIrdC5fcmVnaXN0cnkucDJwUmVxdWVzdGVyU3R1YltpXSkscih0Ll9yZWdpc3RyeS5wMnBSZXF1ZXN0ZXJTdHViW2ldLnVybCk7YnJlYWs7Y2FzZSJmYWlsZWQiOmwubG9nKCJbUDJQQ29uZW5jdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyXSBwMnBSZXF1ZXN0ZXIgcmVjb25uZWN0IGZhaWxlZCAiK3QuX3JlZ2lzdHJ5LnAycFJlcXVlc3RlclN0dWJbaV0pLG4oIlAyUCBSZXF1ZXN0ZXIgcmVjb25uZWN0IGZhaWxlZCIpfX0pLAovLyAgc3R1YiBsb2FkCnQuX3JlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24oZSl7bC5sb2coIltQMlBDb25lbmN0aW9uUmVzb2x2ZS5yZWNvbm5lY3RQMlBSZXF1ZXN0ZXJdIHJlY29ubmVjdCByZXF1ZXN0IHJlcGx5IixlKX0pfSl9fV0pLFAyUENvbm5lY3Rpb25SZXNvbHZlfSgpO3QuZGVmYXVsdD1kLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ2NCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyAgICAgcHJveHktb2JzZXJ2ZSB2MC4wLjE4Ci8vICAgICBDb3B5cmlnaHQgKGMpIDIwMTUsIDIwMTYgU2ltb24gWS4gQmxhY2t3ZWxsLCBBbnlXaGljaFdheQovLyAgICAgTUlUIExpY2Vuc2UgLSBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwCiFmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBPYnNlcnZlcihlLHQscixuLGksbyl7ZnVuY3Rpb24gZGVsaXZlcihlLG4pe2lmKGRlbGl2ZXIuZGVsYXk9biwhZGVsaXZlci5wYXVzZSYmcy5jaGFuZ2VzZXQubGVuZ3RoPjApe2lmKCFlKXt2YXIgaT1zLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wfSk7aS5sZW5ndGg+MCYmdChpKX1zLmNoYW5nZXNldD1bXX19dmFyIGEscz10aGlzOwovLyBfX29ic2VydmVyQ2FsbGJhY2tzX18gaXMgdXNlZCBhcyBhbiBpbmRleCB0byBnZXQgYXQgdGhlIHByb3h5IHdoaWNoIGlzIHRoZSBvYnNlcnZlciwgc28gd2UgY2FuIHVub2JzZXJ2ZQpyZXR1cm4gZGVsaXZlci5wYXVzZT1pLGRlbGl2ZXIuZGVsYXk9byxzLmdldD1mdW5jdGlvbihlLHQpe3JldHVybiJfX29ic2VydmVyX18iPT09dD9zOiJ1bm9ic2VydmUiPT09dD9mdW5jdGlvbigpe3JldHVybiBPYmplY3QudW5vYnNlcnZlKGUpLGV9OiJkZWxpdmVyIj09PXQ/ZGVsaXZlcjplW3RdfSxzLnRhcmdldD1lLHMuY2hhbmdlc2V0PVtdLHMudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfX3x8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX29ic2VydmVyQ2FsbGJhY2tzX18iLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMSx2YWx1ZTpbXX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX29ic2VydmVyc19fIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITEsdmFsdWU6W119KSkscy50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19fLnB1c2godCkscy50YXJnZXQuX19vYnNlcnZlcnNfXy5wdXNoKHRoaXMpLGE9bmV3IFByb3h5KGUscyksZGVsaXZlcighMSxvKSxhfQovLyBDcmVhdGVzIGFuZCByZXR1cm5zIGEgUHJveHkgd3JhcHBpbmcgYSB0YXJnZXQgc28gdGhhdCBhbGwgY2hhbmdlcyBjYW4gYmUgdHJhcHBlZCBhbmQgZm9yd2FyZGVkIHRvCi8vIGEgY2FsbGJhY2suIFRoZSBjYWxsYmFjayB0YWtlcyBhbiBhcnJheSBvZiBjaGFuZ2VzIGp1c3QgbGlrZSB0aGUgdHJhZGl0aW9uYWwgb3JpZ2luYWwgQ2hyb21lIE9iamVjdC5vYnNlcnZlCi8vIHtvYmplY3Q6PG9iamVjdCBjaGFuZ2VkPixuYW1lOjxmaWVsZCBjaGFuZ2VkPix0eXBlOmFkZHx1cGRhdGV8ZGVsZXRlfHJlY29uZmlndXJlfHByZXZlbnRFeHRlbnNpb25zfHNldFByb3RvdHlwZSxvbGRWYWx1ZTo8b2xkIHZhbHVlIGlmIHVwZGF0ZSB8IGRlbGV0ZT59Ci8vIFRoZSBhY2NlcHRsaXN0IGNhbiBiZSBhZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUuCi8vIHYgMC4wLjEwIHRvIHN1cHBvcnQgcGF1c2luZyBhbmQgcmVzdGFydGluZyBvYnNlcnZhdGlvbiB0d28gYWRkaXRpb25hbCBjb25zdHJ1Y3RvciBhcmd1bWVudHMgYXJlIGF2YWlsYWJsZSB0byBPYmplY3Qub2JzZXJ2ZToKLy8gcGF1c2FibGUgLSBjcmVhdGUgdGhlIE9ic2VydmVyIHNvIGl0IGNhbiBiZSBwYXVzZWQKLy8gcGF1c2UgLSBjcmVhdGUgb2JzZXJ2ZXIgaW4gcGF1c2VkIHN0YXRlCi8vIGlmIHBhdXNhYmxlIGlzIHRydWUgdGhlbiBhbiBhZGRpdGlvbmFsIG1ldGhvZCBkZWxpdmVyKGlnbm9yZVByZXZpb3VzKSBpcyBhdmFpbGFibGUgdG8gc3RhcnQgZGVsaXZlcnkKLy8gdG8gcGF1c2UgZGVsaXZlcnkgc2V0IGEgcHJvcGVydHkgY2FsbGVkIHBhdXNlIG9uIHRoZSBmdW5jdGlvbiBkZWxpdmVyIHRvIHRydWUKLy8gcGF1c2FibGUgaXMgb3B0aW9uYWwgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2Ygc2hhZG93aW5nIGEgcHJvcGVydHkgb3IgbWV0aG9kIG9uIGFueSBleGlzdGluZyBjb2RlIGNhbGxlZCBkZWxpdmVyCk9iamVjdC5vYnNlcnZlfHwiZnVuY3Rpb24iIT10eXBlb2YgUHJveHl8fChPYnNlcnZlci5wcm90b3R5cGUuZGVsaXZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChudWxsLCJkZWxpdmVyIil9LE9ic2VydmVyLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0LHIpey8vICwgcmVjZWl2ZXIKdmFyIG49ZVt0XSxpPXZvaWQgMD09PW4/ImFkZCI6InVwZGF0ZSI7aWYoZVt0XT1yLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYoIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoaSk+PTApKXt2YXIgbz17b2JqZWN0OmUsbmFtZTp0LHR5cGU6aX0sYT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLHM9dGhpcy5kZWxpdmVyKCk7InVwZGF0ZSI9PT1pJiYoby5vbGRWYWx1ZT1uKSx0aGlzLmNoYW5nZXNldC5wdXNoKG8pLGEmJnMoITEsIm51bWJlciI9PXR5cGVvZiBzLmRlbGF5P3MuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lW3RdO2lmKAovL2lmKHR5cGVvZihvbGR2YWx1ZSkhPT0idW5kZWZpbmVkIikgewpkZWxldGUgZVt0XSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoImRlbGV0ZSIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZTp0LHR5cGU6ImRlbGV0ZSIsb2xkVmFsdWU6cn0saT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG89dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxpJiZvKCExLCJudW1iZXIiPT10eXBlb2Ygby5kZWxheT9vLmRlbGF5OjEwKX0KLy99CnJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oZSx0LHIpe2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsciksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJyZWNvbmZpZ3VyZSIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZTp0LHR5cGU6InJlY29uZmlndXJlIn0saT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG89dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxpJiZvKCExLCJudW1iZXIiPT10eXBlb2Ygby5kZWxheT9vLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldFByb3RvdHlwZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigic2V0UHJvdG90eXBlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOiJfX3Byb3RvX18iLHR5cGU6InNldFByb3RvdHlwZSIsb2xkVmFsdWU6cn0saT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG89dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxpJiZvKCExLCJudW1iZXIiPT10eXBlb2Ygby5kZWxheT9vLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zPWZ1bmN0aW9uKGUpe2lmKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhlKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApe3ZhciB0PXtvYmplY3Q6ZSx0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyJ9LHI9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxuPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2godCksciYmbighMSwibnVtYmVyIj09dHlwZW9mIG4uZGVsYXk/bi5kZWxheToxMCl9cmV0dXJuITB9LE9iamVjdC5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4saSxvKXtyZXR1cm4gbmV3IE9ic2VydmVyKGUsdCxyLG4saSxvKX0sT2JqZWN0LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe2lmKGUuX19vYnNlcnZlckNhbGxiYWNrc19fKXtpZighdClyZXR1cm4gZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyQ2FsbGJhY2tzX18ubGVuZ3RoKSx2b2lkIGUuX19vYnNlcnZlcnNfXy5zcGxpY2UoMCxlLl9fb2JzZXJ2ZXJzX18ubGVuZ3RoKTtlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7dD09PXImJihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UobiwxKSxkZWxldGUgZS5fX29ic2VydmVyc19fW25dLmNhbGxiYWNrLGUuX19vYnNlcnZlcnNfXy5zcGxpY2UobiwxKSl9KX19LEFycmF5Lm9ic2VydmU9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2lmKCEoZSBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KGUpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCBhcmd1bWVudCB0byBBcnJheS5vYnNlcnZlciBpcyBub3QgYW4gQXJyYXkiKTtyPXJ8fFsiYWRkIiwidXBkYXRlIiwiZGVsZXRlIiwic3BsaWNlIl07dmFyIGE9bmV3IFByb3h5KGUse2dldDpmdW5jdGlvbih0LG4pe3JldHVybiJ1bm9ic2VydmUiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gZT9PYmplY3QudW5vYnNlcnZlKHQsZSk6dC51bm9ic2VydmUoKX06InNwbGljZSI9PT1uP2Z1bmN0aW9uKG4saSl7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIGkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgdHdvIGFyZ3VtZW50cyB0byBBcnJheSBzcGxpY2UgYXJlIG5vdCBudW1iZXIsIG51bWJlciIpO3ZhciBvPXRoaXMuc2xpY2UobixuK2kpLGE9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50cy5sZW5ndGgtMjowLHU9e29iamVjdDplLHR5cGU6InNwbGljZSIsaW5kZXg6bixyZW1vdmVkOm8sYWRkZWRDb3VudDphfTtpZih0LnNwbGljZS5hcHBseSh0LGFyZ3VtZW50cyksci5pbmRleE9mKCJzcGxpY2UiKT49MCl7dmFyIG49MD09PXMuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5sZW5ndGgsYz1zLl9fb2JzZXJ2ZXJfXy5kZWxpdmVyKCk7cy5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2godSksbiYmYyghMSwibnVtYmVyIj09dHlwZW9mIGMuZGVsYXk/Yy5kZWxheToxMCl9fToicHVzaCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGUpfToicG9wIj09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgtMSwxKX06InVuc2hpZnQiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwwLGUpfToic2hpZnQiPT09bj9mdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGljZSgwLDEpfTp0W25dfX0pLHM9T2JqZWN0Lm9ic2VydmUoYSxmdW5jdGlvbihlKXt2YXIgbj1lLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4ibGVuZ3RoIiE9PWUubmFtZSYmImFkZCIhPT1lLm5hbWUmJighcnx8ci5pbmRleE9mKGUudHlwZSk+PTApfSk7bi5sZW5ndGg+MCYmdChuKX0scixuLGksbyk7cmV0dXJuIHN9LEFycmF5LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnVub2JzZXJ2ZSh0KX0pLE9iamVjdC5kZWVwT2JzZXJ2ZT1mdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gcmVvYnNlcnZlKGUscil7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihpKXtpZigoIm9iamVjdCI9PT1uKGVbaV0pfHwiYXJyYXkiPT09bihlW2ldKSkmJiFlW2ldLmhhc093blByb3BlcnR5KCJfX29ic2VydmVyc19fIikpe3ZhciBvPXIuc2xpY2UoMCk7by5wdXNoKGkpLGVbaV09T2JqZWN0LmRlZXBPYnNlcnZlKGVbaV0sdCxvKX19KX1yPXJ8fFtdO3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkubWF0Y2goL1xzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gcmVvYnNlcnZlKGUsciksT2JqZWN0Lm9ic2VydmUoZSxmdW5jdGlvbihlKXtmdW5jdGlvbiByZWN1cnNlKGUsdCxyLGksbyl7aWYoaSBpbnN0YW5jZW9mIE9iamVjdCl7T2JqZWN0LmtleXMoaSkuZm9yRWFjaChmdW5jdGlvbihhKXtpZighcnx8clthXSE9PWlbYV0pe3ZhciBzPXImJnZvaWQgMCE9PXJbYV0/clthXTp2b2lkIDAsdT12b2lkIDA9PT1zPyJhZGQiOiJ1cGRhdGUiLGM9bysiLiIrYTtuLnB1c2goe25hbWU6ZSxvYmplY3Q6dCx0eXBlOnUsb2xkVmFsdWU6cyxuZXdWYWx1ZTppW2FdLGtleXBhdGg6Y30pLHJlY3Vyc2UoZSx0LHMsaVthXSxjKX19KX1lbHNlIGlmKHIgaW5zdGFuY2VvZiBPYmplY3Qpe3ZhciBhPU9iamVjdC5rZXlzKHIpO2EuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgcz1udWxsPT09aT8idXBkYXRlIjoiZGVsZXRlIix1PW8rIi4iK2E7bi5wdXNoKHtuYW1lOmUsb2JqZWN0OnQsdHlwZTpzLG9sZFZhbHVlOnJbYV0sbmV3VmFsdWU6aSxrZXlwYXRoOnV9KSxyZWN1cnNlKGUsdCxyW2FdLHZvaWQgMCx1KX0pfX12YXIgbj1bXTtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9KHIubGVuZ3RoPjA/ci5qb2luKCIuIikrIi4iOiIiKStlLm5hbWU7InVwZGF0ZSIhPT1lLnR5cGUmJiJhZGQiIT09ZS50eXBlfHxyZW9ic2VydmUoZS5vYmplY3Qsciksbi5wdXNoKHtuYW1lOmUubmFtZSxvYmplY3Q6ZS5vYmplY3QsdHlwZTplLnR5cGUsb2xkVmFsdWU6ZS5vbGRWYWx1ZSxuZXdWYWx1ZTplLm9iamVjdFtlLm5hbWVdLGtleXBhdGg6dH0pLHJlY3Vyc2UoZS5uYW1lLGUub2JqZWN0LGUub2xkVmFsdWUsZS5vYmplY3RbZS5uYW1lXSx0KX0pLHQobil9KX19KCl9LC8qIDQ2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDk2KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDEyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cigxMSkseT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHApLGg9cigxNSksdj1yKDQ2NiksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLGI9cig0NjcpLG09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChiKSxfPXIoNDY4KSxSPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksdz1yKDIwMSksUz15LmdldExvZ2dlcigiSWRlbnRpdHlNb2R1bGUiKSxPPWZ1bmN0aW9uKCl7LyoqCiAgKiBUaGlzIGlzIHRoZSBjb25zdHJ1Y3RvciB0byBpbml0aWFsaXNlIHRoZSBJZGVudGl0eSBNb2R1bGUgaXQgZG9lcyBub3QgcmVxdWlyZSBhbnkgaW5wdXQuCiAgKi8KZnVuY3Rpb24gSWRlbnRpdHlNb2R1bGUoZSx0LHIsbil7KDAsZi5kZWZhdWx0KSh0aGlzLElkZW50aXR5TW9kdWxlKTt2YXIgaT10aGlzO2lmKCFlKXRocm93IG5ldyBFcnJvcigicnVudGltZVVSTCBpcyBtaXNzaW5nLiIpO2lmKCFyKXRocm93IG5ldyBFcnJvcigic3RvcmFnZU1hbmFnZXIgaXMgbWlzc2luZyIpO2kuX3J1bnRpbWVVUkw9ZSxpLnN0b3JhZ2VNYW5hZ2VyPXIsaS5kYXRhT2JqZWN0c1N0b3JhZ2U9bixpLl9pZG1VUkw9aS5fcnVudGltZVVSTCsiL2lkbSIsaS5fZ3VpVVJMPWkuX3J1bnRpbWVVUkwrIi9pZGVudGl0eS1ndWkiLGkucnVudGltZUNhcGFiaWxpdGllcz10LGkuX2RvbWFpbj0oMCxoLmRpdmlkZVVSTCkoaS5fcnVudGltZVVSTCkuZG9tYWluLGkud2F0Y2hpbmdZb3U9bmV3IHcuV2F0Y2hpbmdZb3UsCi8vdG8gc3RvcmUgaXRlbXMgd2l0aCB0aGlzIGZvcm1hdDoge2lkZW50aXR5OiBpZGVudGl0eVVSTCwgdG9rZW46IHRva2VuSUR9CmkuaWRlbnRpdGllcz1bXSxpLmlkZW50aXRpZXNMaXN0PWkud2F0Y2hpbmdZb3Uud2F0Y2goImlkZW50aXRpZXNMaXN0Iix7fSwhMCksaS5lbWFpbHNMaXN0PVtdO3ZhciBvPW5ldyBnLmRlZmF1bHQoImd1aWQiLCJIVU1BTiIpO2kuaWRlbnRpdHk9byxpLmNyeXB0bz1uZXcgbS5kZWZhdWx0LGkuY3VycmVudElkZW50aXR5LGkuZGVmYXVsdElkZW50aXR5LAovL3N0b3JlcyB0aGUgYXNzb2NpYXRpb24gb2YgdGhlIGRhdGFPYmplY3QgYW5kIHRoZSBIeXBlcnR5IHJlZ2lzdGVyZWQgd2l0aGluCmkuZGF0YU9iamVjdHNJZGVudGl0eT17fSwKLy8gaGFzaFRhYmxlIHRvIHN0b3JlIGFsbCB0aGUgY3J5cHRvIGluZm9ybWF0aW9uIGJldHdlZW4gdHdvIGh5cGVydGllcwppLmNoYXRLZXlzPXt9LAovLyBoYXNoVGFibGUgdG8gc3RvcmUgdGhlIHN5bW1ldHJpYyBrZXlzIHRvIGJlIHVzZWQgaW4gdGhlIGNoYXQgZ3JvdXAKaS5kYXRhT2JqZWN0U2Vzc2lvbktleXM9e30sCi8vZmFpbHNhZmUgdG8gZW5hYmxlL2Rpc2FibGUgYWxsIHRoZSBjcmlwdG9ncmFwaGljIGZ1bmN0aW9ucwppLmlzVG9Vc2VFbmNyeXB0aW9uPSEwLAovLyB2YXJpYWJsZSB0byBrbm93IGlmIHRoZSBHVUkgaXMgZGVwbG95ZWQgdG8gY2hvb3NlIHRoZSBpZGVudGl0eS4gaWYgdGhlIHJlYWwgR1VJIGlzIG5vdCBkZXBsb3llZCwgYSBmYWtlIGd1aSBpcyBkZXBsb3llZCBpbnN0ZWFkLgppLmd1aURlcGxveWVkPSExfQovLyoqKioqKioqKioqKioqKioqKiogR0VUIEFORCBTRVQgTUVUSE9EUyAqKioqKioqKioqKioqKioqKioqCi8qKgogICogcmV0dXJuIHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMKICAqLwpyZXR1cm4oMCxkLmRlZmF1bHQpKElkZW50aXR5TW9kdWxlLFt7a2V5OiJnZXRJZGVudGl0eSIsCi8vKioqKioqKioqKioqKioqKioqKiBJREVOVElUWSBSRUxFQVRFRCBNRVRIT0RTICoqKioqKioqKioqKioqKioqKioKLyoqCiAgICAqIGdldHMgYWxsIHRoZSBpbmZvcm1hdGlvbiBmcm9tIGEgZ2l2ZW4gdXNlclVSTAogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICB1c2VyVVJMICAgICB1c2VyIHVybAogICAgKiBAcmV0dXJuIHtKU09OfSAgICBpZGVudGl0eSAgICBpZGVudGl0eSBidW5kbGUgZnJvbSB0aGUgdXNlclVSTAogICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztmb3IodmFyIHIgaW4gdC5pZGVudGl0aWVzKXt2YXIgbj10LmlkZW50aXRpZXNbcl07aWYobi5pZGVudGl0eT09PWUpcmV0dXJuIG59dGhyb3ciaWRlbnRpdHkgbm90IGZvdW5kIn19LHtrZXk6InNldEN1cnJlbnRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5jdXJyZW50SWRlbnRpdHk9ZX19LHtrZXk6ImdldElkZW50aXRpZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWRlbnRpdGllc319LHtrZXk6ImdldElkZW50aXRpZXNUb0Nob29zZSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm57aWRlbnRpdGllczp0aGlzLmVtYWlsc0xpc3QsaWRwczpbe2RvbWFpbjoiZ29vZ2xlLmNvbSIsdHlwZToiaWRUb2tlbiJ9LHtkb21haW46Im1pY3Jvc29mdC5jb20iLHR5cGU6ImlkVG9rZW4ifSx7ZG9tYWluOiJzbGFjay5jb20iLHR5cGU6IkxlZ2FjeSJ9XX19fSx7a2V5OiJnZXRDdXJyZW50SWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudElkZW50aXR5fX0se2tleToibG9hZElkZW50aXRpZXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbih0KXtlLnN0b3JhZ2VNYW5hZ2VyLmdldCgiaWRNb2R1bGU6aWRlbnRpdGllcyIpLnRoZW4oZnVuY3Rpb24ocil7ciYmKGUuaWRlbnRpdGllcz1yLHIuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1lLl9zZWNvbmRzX3NpbmNlX2Vwb2NoKCksbj0wO3QuaW5mbyYmdC5pbmZvLmV4cGlyZXM/bj10LmluZm8uZXhwaXJlczp0LmluZm8mJnQuaW5mby50b2tlbklESlNPTiYmdC5pbmZvLnRva2VuSURKU09OLmV4cCYmKG49dC5pbmZvLnRva2VuSURKU09OLmV4cCksdC5oYXNPd25Qcm9wZXJ0eSgiaW50ZXJ3b3JraW5nIil8fHQuaW50ZXJ3b3JraW5nfHwoZS5kZWZhdWx0SWRlbnRpdHk9dC5tZXNzYWdlSW5mbyxwYXJzZUludChuKT5yJiYoZS5kZWZhdWx0SWRlbnRpdHkuZXhwaXJlcz1wYXJzZUludChuKSxlLmN1cnJlbnRJZGVudGl0eT1lLmRlZmF1bHRJZGVudGl0eSkpfSkpLHQoKX0pfSl9fSx7a2V5OiJsb2FkU2Vzc2lvbktleXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbih0KXtlLnN0b3JhZ2VNYW5hZ2VyLmdldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIikudGhlbihmdW5jdGlvbihyKXtlLmRhdGFPYmplY3RTZXNzaW9uS2V5cz1yfHx7fSx0KCl9KX0pfX0se2tleToiZ2V0SWRlbnRpdHlBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXsKLy9DSEVDSyB3aGV0aGVyIGlzIGJyb3dzZXIgZW52aXJvbm1lbnQgb3Igbm9kZWpzCi8vaWYgaXQgaXMgYnJvd3NlciwgdGhlbiBjcmVhdGUgYSBmYWtlIGlkZW50aXR5CnQucnVudGltZUNhcGFiaWxpdGllcy5pc0F2YWlsYWJsZSgiYnJvd3NlciIpLnRoZW4oZnVuY3Rpb24oaSl7aWYoUy5sb2coInJ1bnRpbWUgYnJvd3NlciBpZGVudGl0eSBhY3F1aXNpdGlvbiAiLGkpLGkpCi8vdG9kbzogb25seSBpZHAgc2hvdWxkIGJlIG1hbmRhdG9yeSB3aGVuIGlkZW50aXR5QnVuZGxlIGV4aXN0cwppZihlJiZlLmhhc093blByb3BlcnR5KCJpZHAiKSl7dmFyIG89ZS5pZHAsYT1lLmhhc093blByb3BlcnR5KCJvcmlnaW4iKT9lLm9yaWdpbjoib3JpZ2luIixzPWUuaGFzT3duUHJvcGVydHkoImlkSGludCIpP2UuaWRIaW50OiIiO3Quc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5KGEsbyxzKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBTLmxvZygiW0lkZW50aXR5TW9kdWxlXSBJZGVudGl0eSBzZWxlY3RlZCBieSBoeXBlcnR5LiIpLHIoZSl9LGZ1bmN0aW9uKGUpewovLyBpZiBpdCBnb3QgYW4gZXJyb3IgdGhlbiBqdXN0IHNlbGVjdCBpZGVudGl0eSBmcm9tIEdVSQovLyBsb2cuZXJyb3IoJ1tJZGVudGl0eU1vZHVsZV0gQ291bGQgbm90IHNlbGVjdCBpZGVudGl0eSBmcm9tIGh5cGVydHkuJyk7CnQuc2VsZWN0SWRlbnRpdHlGcm9tR1VJKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gUy5sb2coIltJZGVudGl0eU1vZHVsZV0gSWRlbnRpdHkgc2VsZWN0ZWQgYnkgaHlwZXJ0eS4iKSxyKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pfSl9ZWxzZXtpZih0LmRlZmF1bHRJZGVudGl0eSYmdC5kZWZhdWx0SWRlbnRpdHkuZXhwaXJlcz50Ll9zZWNvbmRzX3NpbmNlX2Vwb2NoKCkpcmV0dXJuIHIodC5kZWZhdWx0SWRlbnRpdHkpO3Quc2VsZWN0SWRlbnRpdHlGcm9tR1VJKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gUy5sb2coIltJZGVudGl0eU1vZHVsZV0gSWRlbnRpdHkgc2VsZWN0ZWQgZnJvbSBHVUkuIiksZS5oYXNPd25Qcm9wZXJ0eSgibWVzc2FnZUluZm8iKT8odC5kZWZhdWx0SWRlbnRpdHk9ZS5tZXNzYWdlSW5mbyxyKGUubWVzc2FnZUluZm8pKToodC5kZWZhdWx0SWRlbnRpdHk9ZSxyKGUpKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX19KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gUy5lcnJvcigiRXJyb3Igb24gaWRlbnRpdHkgYWNxdWlzaXRpb24gIixlKSxuKGUpfSksdC5ydW50aW1lQ2FwYWJpbGl0aWVzLmlzQXZhaWxhYmxlKCJub2RlIikudGhlbihmdW5jdGlvbihlKXtpZihTLmxvZygibm9kZSBpZGVudGl0eSBhY3F1aXNpdGlvbiAiLGUpLGUpe2lmKHZvaWQgMCE9PXQuY3VycmVudElkZW50aXR5KQovL1RPRE8gdmVyaWZ5IHdoZXRoZXIgdGhlIHRva2VuIGlzIHN0aWxsIHZhbGlkIG9yIG5vdC4KLy8gc2hvdWxkIGJlIG5lZWRlZCB0byBtYWtlIGZ1cnRoZXIgcmVxdWVzdHMsIHRvIG9idGFpbiBhIHZhbGlkIHRva2VuCnJldHVybiByKHQuY3VycmVudElkZW50aXR5KTtTLmxvZygiZ2V0SWRlbnRpdHlBc3NlcnRpb24gZm9yIG5vZGVqcyIpOwovL2xldCByYW5kb21OdW1iZXIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMTAwMDApICsgMSk7CnZhciBuPXthdmF0YXI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tV2FDcmpWTU1WLVEvQUFBQUFBQUFBQUkvQUFBQUFBQUFBQXMvOE9sVnFDcFNCOWMvcGhvdG8uanBnIixjbjoidGVzdCBub2RlanMiLHVzZXJuYW1lOiJub2RlanMtY29uZmVyZW5jZUBub2RlanMuY29tIix1c2VyVVJMOiJ1c2VyOi8vbm9kZWpzLmNvbS9ub2RlanMtY29uZmVyZW5jZUBub2RlanMuY29tIn0saT17YXNzZXJ0aW9uOiJhc3NlcnRpb24iLGlkcDoibm9kZWpzIixpZGVudGl0eToidXNlcjovL25vZGVqcy5jb20vbm9kZWpzLWNvbmZlcmVuY2VAbm9kZWpzLmNvbSIsbWVzc2FnZUluZm86e2Fzc2VydGlvbjoiYXNzZXJ0aW9uIixpZHA6Im5vZGVqcyIsdXNlclByb2ZpbGU6bn0sdXNlclByb2ZpbGU6bn07dC5jdXJyZW50SWRlbnRpdHk9aSx0LmlkZW50aXRpZXMucHVzaChpKSx0LnN0b3JhZ2VNYW5hZ2VyLnNldCgiaWRNb2R1bGU6aWRlbnRpdGllcyIsMCx0LmlkZW50aXRpZXMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcihpKX0pfX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1MuZXJyb3IoIkVycm9yIG9uIGlkZW50aXR5IGFjcXVpc2l0aW9uICIsZSksbihlKX0pfSl9fSx7a2V5OiJnZXRVc2Vyc0lEcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPVtdLG49ZT9oLmdldFVzZXJFbWFpbEZyb21VUkw6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9O2Zvcih2YXIgaSBpbiB0LmlkZW50aXRpZXMpe3ZhciBvPXQuaWRlbnRpdGllc1tpXTtyLnB1c2gobihvLmlkZW50aXR5KSl9cmV0dXJuIHJ9fSx7a2V5OiJkZWxldGVJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy9sZXQgdXNlclVSTCA9IGNvbnZlcnRUb1VzZXJVUkwodXNlcklEKTsKZm9yKHZhciByIGluIHQuaWRlbnRpdGllcyl0LmlkZW50aXRpZXNbcl0uaWRlbnRpdHk9PT1lJiZ0LmlkZW50aXRpZXMuc3BsaWNlKHIsMSl9fSx7a2V5OiJ1bnJlZ2lzdGVySWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Zm9yKHZhciByIGluIHQuZW1haWxzTGlzdCl0LmVtYWlsc0xpc3Rbcl09PT1lJiZ0LmVtYWlsc0xpc3Quc3BsaWNlKHIsMSl9fSx7a2V5OiJyZXF1ZXN0SWRlbnRpdHlUb0dVSSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7Ci8vY29uZGl0aW9uIHRvIGNoZWNrIGlmIHRoZSByZWFsIEdVSSBpcyBkZXBsb3llZC4gSWYgbm90LCBkZXBsb3lzIGEgZmFrZSBndWkKaWYoITE9PT1yLmd1aURlcGxveWVkKXt2YXIgbz1yLl9ndWlVUkwsYT1uZXcgUi5kZWZhdWx0KG8sci5fbWVzc2FnZUJ1cyk7ci5ndWlGYWtlPWEsci5ndWlEZXBsb3llZD0hMH12YXIgcz17dHlwZToiY3JlYXRlIix0bzpyLl9ndWlVUkwsZnJvbTpyLl9pZG1VUkwsYm9keTp7dmFsdWU6e2lkZW50aXRpZXM6ZSxpZHBzOnR9fX0sdT1yLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMpOwovL2FkZCBsaXN0ZW5lciB3aXRob3V0IHRpbW91dAp0cnl7ci5fbWVzc2FnZUJ1cy5hZGRSZXNwb25zZUxpc3RlbmVyKHIuX2lkbVVSTCx1LGZ1bmN0aW9uKGUpewovLyB0b2RvOiB0byByZXR1cm4gdGhlIHVzZXIgVVJMIGFuZCBub3QgdGhlIGVtYWlsIG9yIGlkZW50aWZpZXIKaWYoci5fbWVzc2FnZUJ1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKHIuX2lkbVVSTCx1KSwyMDA9PT1lLmJvZHkuY29kZSl7dmFyIHQ9ZS5ib2R5O1MubG9nKCJzZWxlY3RlZElkZW50aXR5OiAiLHQudmFsdWUpLG4odCl9ZWxzZSBpKCJlcnJvciBvbiByZXF1ZXN0aW5nIGFuIGlkZW50aXR5IHRvIHRoZSBHVUkiKX0pfWNhdGNoKGUpe2koIkluIG1ldGhvZCBjYWxsSWRlbnRpdHlNb2R1bGVGdW5jIGVycm9yOiAiK2UpfX0pfX0se2tleToiY2FsbEdlbmVyYXRlTWV0aG9kcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89dm9pZCAwLGE9dm9pZCAwOwovL2dlbmVyYXRlcyB0aGUgUlNBIGtleSBwYWlyCnIuY3J5cHRvLmdlbmVyYXRlUlNBS2V5UGFpcigpLnRoZW4oZnVuY3Rpb24obil7cmV0dXJuIG89YnRvYShuLnB1YmxpYyksYT1uLHIuZ2VuZXJhdGVBc3NlcnRpb24obyx0LCIiLGEsZSl9KS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiBTLmxvZyhbIiJdKSxyLm15SGludD1uLHIuZ2VuZXJhdGVBc3NlcnRpb24obyx0LG4sYSxlKX0pLnRoZW4oZnVuY3Rpb24oZSl7ZT9uKGUpOmkoIkVycm9yIG9uIG9idGFpbmluZyBJZGVudGl0eSIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcihlKSxpKGUpfSl9KX19LHtrZXk6InNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24oaSxvKXsKLy9nZW5lcmF0ZXMgdGhlIFJTQSBrZXkgcGFpcgpuLmNyeXB0by5nZW5lcmF0ZVJTQUtleVBhaXIoKS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBzPWJ0b2EoYS5wdWJsaWMpO24uc2VuZEdlbmVyYXRlTWVzc2FnZShzLGUscix0KS50aGVuKGZ1bmN0aW9uKHIpe3IuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbiIpPwovLyBpZGVudGl0eSB3YXMgbG9nZ2VkIGluLCBqdXN0IHNhdmUgaXQKbi5zdG9yZUlkZW50aXR5KHIsYSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gaShlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9KTpyLmhhc093blByb3BlcnR5KCJsb2dpblVybCIpPwovLyBpZGVudGl0eSB3YXMgbm90IGxvZ2dlZCBpbgpuLmxvZ2luU2VsZWN0ZWRJZGVudGl0eShzLGUsdCxhLHIubG9naW5VcmwpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9LGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSk6KAovLyB5b3Ugc2hvdWxkIG5ldmVyIGdldCBoZXJlLCBpZiB5b3UgZG8gdGhlbiB0aGUgSWRQIFByb3h5IGlzIG5vdCB3ZWxsIGltcGxlbWVudGVkCi8vIGxvZy5lcnJvcignR2VuZXJhdGVBc3NlcnRpb24gcmV0dXJuZWQgaW52YWxpZCByZXNwb25zZS4nKTsKUy5sb2coIlByb2NlZWRpbmcgYnkgbG9nZ2luZyBpbi4iKSxuLmdlbmVyYXRlU2VsZWN0ZWRJZGVudGl0eShzLGUsdCxhKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX0pKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIHNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eSBmcm9tIG1ldGhvZCBzZW5kR2VuZXJhdGVNZXNzYWdlIGVycm9yOiAgIitlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5IGZyb20gbWV0aG9kIGdlbmVyYXRlUlNBS2V5UGFpciBlcnJvcjogICIrZSl9KX0pfX0se2tleToic2VsZWN0SWRlbnRpdHlGcm9tR1VJIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9dC5nZXRJZGVudGl0aWVzVG9DaG9vc2UoKTt0LnJlcXVlc3RJZGVudGl0eVRvR1VJKGkuaWRlbnRpdGllcyxpLmlkcHMpLnRoZW4oZnVuY3Rpb24oaSl7aWYoImlkZW50aXR5Ij09PWkudHlwZSl7Ci8vICBsZXQgY2hvc2VuSUQgPSBnZXRVc2VyVVJMRnJvbUVtYWlsKHZhbHVlLnZhbHVlKTsKLy8gaGFjayB3aGlsZSB0aGUgdXNlciB1cmwgaXMgbm90IHJldHVybmVkIGZyb20gcmVxdWVzdElkZW50aXR5VG9HVUk7CnZhciBvPSJ1c2VyOi8vIit0LmN1cnJlbnRJZGVudGl0eS5pZHArIi8iK2kudmFsdWU7dC5kZWZhdWx0SWRlbnRpdHk9dC5jdXJyZW50SWRlbnRpdHk7Ci8vIHJldHVybnMgdGhlIGlkZW50aXR5IGluZm8gZnJvbSB0aGUgY2hvc2VuIGlkCmZvcih2YXIgYSBpbiB0LmlkZW50aXRpZXMpaWYodC5pZGVudGl0aWVzW2FdLmlkZW50aXR5PT09bylyZXR1cm4gcih0LmlkZW50aXRpZXNbYV0ubWVzc2FnZUluZm8pO3JldHVybiBuKCJubyBpZGVudGl0eSB3YXMgZm91bmQgLiIpfWlmKCJpZHAiIT09aS50eXBlKXJldHVybiBuKCJlcnJvciBvbiBHVUkgcmVjZWl2ZWQgbWVzc2FnZS4iKTt0LmNhbGxHZW5lcmF0ZU1ldGhvZHMoaS52YWx1ZSxlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bigiT24gc2VsZWN0SWRlbnRpdHlGcm9tR1VJIGZyb20gbWV0aG9kIHJlcXVlc3RJZGVudGl0eVRvR1VJIGVycm9yOiAgIitlKX0pfSl9fSx7a2V5OiJzdG9yZUlkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixpKXtpZighZS5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9uIikpcmV0dXJuIGkoIlN0b3JlSWRlbnRpdHk6IGlucHV0IGlzIG5vdCBhbiBpZGVudGl0eSBhc3NlcnRpb24uIik7dmFyIG89ZS5hc3NlcnRpb24uc3BsaXQoIi4iKSxzPXZvaWQgMDsKLy92ZXJpZnkgaWYgdGhlIHRva2VuIGNvbnRhaW5zIHRoZSAzIGNvbXBvbmVudHMsIG9yIGp1c3QgdGhlIGFzc2VydGlvbgp0cnl7cz1vWzFdP0pTT04ucGFyc2UoYXRvYihvWzFdKSk6SlNPTi5wYXJzZShhdG9iKGUuYXNzZXJ0aW9uKSl9Y2F0Y2goZSl7cmV0dXJuIGkoIkluIHN0b3JlSWRlbnRpdHksIGVycm9yIHBhcnNpbmcgYXNzZXJ0aW9uOiAiK2UpfXZhciB1PXZvaWQgMDsKLy9UT0RPIHJlbW92ZSB0aGUgdmVyaWZpY2F0aW9uIGFuZCByZW1vdmUgdGhlIHRva2VuSURKU09OIGZyb20gdGhlIGdvb2dsZSBpZHBQcm94eTsKdT1zLnRva2VuSURKU09OP3MudG9rZW5JREpTT046cyx1LmlkcD1lLmlkcDt2YXIgYz11LmVtYWlsfHx1LnN1YixmPSJ1c2VyOi8vIit1LmlkcC5kb21haW4rIi8iK2M7ZS5pZGVudGl0eT1mLHIuaWRlbnRpdHkuYWRkSWRlbnRpdHkoZSk7Ci8vIGNoZWNrIGlmIGV4aXN0cyBhbnkgaW5mb1Rva2VuIGluIHRoZSByZXN1bHQgcmVjZWl2ZWQKdmFyIGw9ZS5pbmZvVG9rZW4/ZS5pbmZvVG9rZW46e30sZD11Lm5hbWV8fGMuc3Vic3RyaW5nKDAsYy5pbmRleE9mKCJAIikpLHA9e3VzZXJuYW1lOmMsY246ZCxhdmF0YXI6bC5waWN0dXJlLGxvY2FsZTpsLmxvY2FsZSx1c2VyVVJMOmZ9LHk9dm9pZCAwO2wuaGFzT3duUHJvcGVydHkoImV4cCIpP3k9bC5leHA6ZS5oYXNPd25Qcm9wZXJ0eSgiaW5mbyIpJiZlLmluZm8uaGFzT3duUHJvcGVydHkoImV4cGlyZXMiKSYmKHk9ZS5pbmZvLmV4cGlyZXMpOwovL2NyZWF0aW9uIG9mIGEgbmV3IEpTT04gd2l0aCB0aGUgaWRlbnRpdHkgdG8gc2VuZCB2aWEgbWVzc2FnZXMKdmFyIGg9e3VzZXJQcm9maWxlOnAsaWRwOmUuaWRwLmRvbWFpbixhc3NlcnRpb246ZS5hc3NlcnRpb24sZXhwaXJlczp5fTtlLm1lc3NhZ2VJbmZvPWgsZS5rZXlQYWlyPXQsci5jdXJyZW50SWRlbnRpdHk9aDsKLy92ZXJpZnkgaWYgdGhlIGlkIGFscmVhZHkgZXhpc3RzLiBJZiBhbHJlYWR5IGV4aXN0cyB0aGVuIGRvIG5vdCBhZGQgdG8gdGhlIGlkZW50aXRpZXMgbGlzdDsKLy90byBiZSByZXZpZXdlZCBzaW5jZSB0aGUgaWRlbnRpdHkgY29udGFpbnMgZGF0YSBsaWtlIHRoZSBhc3NzcnRpb24gYW5kIGxleSBwYWlycyB0aGF0IG1heSBiZSBkaWZmZXJlbnQgaWYgZ2VuZXJhdGVkIHR3aWNlCnZhciB2PSExLGc9dm9pZCAwO2Zvcih2YXIgYiBpbiByLmlkZW50aXRpZXMpci5pZGVudGl0aWVzW2JdLmlkZW50aXR5PT09ZS5pZGVudGl0eSYmKHY9ITAsZz1yLmlkZW50aXRpZXNbYl0pO2lmKHYpewovLyBUT0RPOiBtYXliZSBvdmVyd3JpdGUgdGhlIGlkZW50aXR5Cmc9KDAsYS5kZWZhdWx0KShnLGUpLG4oZy5tZXNzYWdlSW5mbyk7dmFyIG09ITE7Ci8vY2hlY2sgaWYgdGhlIGlkZW50aXR5IGV4aXN0cyBpbiBlbWFpbExpc3QsIGlmIG5vdCBhZGQgaXQKLy9UaGlzIGlzIHVzZWZ1bCBpZiBhbiBpZGVudGl0eSB3YXMgcHJldmlvdXNseSByZWdpc3RlcmVkIGJ1dCB3YXMgbGF0ZXIgdW5yZWdpc3RlcmVkCmZvcih2YXIgXyBpbiByLmVtYWlsc0xpc3QpaWYoci5lbWFpbHNMaXN0W19dPT09Yyl7bT0hMDticmVha31tfHxyLmVtYWlsc0xpc3QucHVzaChjKX1lbHNlIHIuZW1haWxzTGlzdC5wdXNoKGMpLHIuaWRlbnRpdGllcy5wdXNoKGUpO3Iuc3RvcmFnZU1hbmFnZXIuc2V0KCJpZE1vZHVsZTppZGVudGl0aWVzIiwwLHIuaWRlbnRpdGllcykudGhlbihmdW5jdGlvbigpe3IuaWRlbnRpdGllc0xpc3RbdS5pZHAuZG9tYWluXSYmKHIuaWRlbnRpdGllc0xpc3RbdS5pZHAuZG9tYWluXS5zdGF0dXM9ImNyZWF0ZWQiKSxuKGgpfSl9KX19LHtrZXk6ImxvZ2luU2VsZWN0ZWRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKGEscyl7by5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCJvcGVuUG9wdXAiLHt1cmxyZWNlaXZlZDppfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZX0sZnVuY3Rpb24oZSl7cmV0dXJuIFMuZXJyb3IoIkVycm9yIHdoaWxlIGxvZ2dpbmcgaW4gZm9yIHRoZSBzZWxlY3RlZCBpZGVudGl0eS4iKSxzKGUpfSkudGhlbihmdW5jdGlvbihpKXtvLnNlbmRHZW5lcmF0ZU1lc3NhZ2UoZSx0LGkscikudGhlbihmdW5jdGlvbihlKXtpZighZS5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9uIikpcmV0dXJuIFMuZXJyb3IoIkVycm9yIHdoaWxlIGxvZ2dpbmcgaW4gZm9yIHRoZSBzZWxlY3RlZCBpZGVudGl0eS4iKSxzKCJDb3VsZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBhc3NlcnRpb24gZm9yIHNlbGVjdGVkIGlkZW50aXR5LiIpO28uc3RvcmVJZGVudGl0eShlLG4pLnRoZW4oZnVuY3Rpb24oZSl7YSgiTG9naW4gd2FzIHN1Y2Nlc3NmdWxsIil9KS5jYXRjaChmdW5jdGlvbihlKXtzKCJMb2dpbiBoYXMgZmFpbGVkOiIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3MoIk9uIGxvZ2luU2VsZWN0ZWRJZGVudGl0eSBmcm9tIG1ldGhvZCBzZW5kR2VuZXJhdGVNZXNzYWdlIGVycm9yOiAgIitlKX0pfSl9KX19LHtrZXk6ImdlbmVyYXRlU2VsZWN0ZWRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihvLGEpe2kuZ2VuZXJhdGVBc3NlcnRpb24oZSx0LCIiLG4scikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZX0pLnRoZW4oZnVuY3Rpb24obyl7cmV0dXJuIGkuZ2VuZXJhdGVBc3NlcnRpb24oZSx0LG8sbixyKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGU/byhlKTphKCJFcnJvciBvbiBvYnRhaW5pbmcgSWRlbnRpdHkiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBTLmVycm9yKGUpLGEoZSl9KX0pfX0se2tleToiY2FsbElkZW50aXR5TW9kdWxlRnVuYyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89e3R5cGU6ImV4ZWN1dGUiLHRvOnIuX2d1aVVSTCxmcm9tOnIuX2lkbVVSTCxib2R5OntyZXNvdXJjZToiaWRlbnRpdHkiLG1ldGhvZDplLHBhcmFtczp0fX0sYT1yLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pOwovL2FkZCBsaXN0ZW5lciB3aXRob3V0IHRpbW91dAp0cnl7ci5fbWVzc2FnZUJ1cy5hZGRSZXNwb25zZUxpc3RlbmVyKHIuX2lkbVVSTCxhLGZ1bmN0aW9uKGUpe3IuX21lc3NhZ2VCdXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLl9pZG1VUkwsYSk7dmFyIHQ9ZS5ib2R5LnZhbHVlO24odCl9KX1jYXRjaChlKXtpKCJJbiBtZXRob2QgY2FsbElkZW50aXR5TW9kdWxlRnVuYyBlcnJvcjogIitlKX19KX19LHtrZXk6ImVuY3J5cHRNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXtTLmluZm8oImVuY3J5cHRNZXNzYWdlOm1lc3NhZ2UiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIFMubG9nKCJlbmNyeXB0IG1lc3NhZ2UgIiksbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPSJoYW5kc2hha2UiPT09ZS50eXBlOwovL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQppZighdC5pc1RvVXNlRW5jcnlwdGlvbiYmIW8pcmV0dXJuIFMuaW5mbygiZW5jcnlwdGlvbiBkaXNhYmxlZCIpLHIoZSk7dmFyIGE9dC5fcGFyc2VNZXNzYWdlVVJMKGUudG8pLHM9KDAsaC5pc0RhdGFPYmplY3RVUkwpKGEpLHU9KDAsaC5pc0xlZ2FjeSkoZS50byksYz0iaHlwZXJ0eSI9PT0oMCxoLmRpdmlkZVVSTCkoZS5mcm9tKS50eXBlLGY9Imh5cGVydHkiPT09KDAsaC5kaXZpZGVVUkwpKGUudG8pLnR5cGU7aWYoInVwZGF0ZSI9PT1lLnR5cGUpcmV0dXJuIHIoZSk7aWYodSlyKGUpO2Vsc2UgaWYoYyYmZil7dmFyIGw9dC5fcmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUuZnJvbSk7aWYobCl7Ci8vIGNoZWNrIGlmIGV4aXN0cyBhbnkga2V5cyBiZXR3ZWVuIHR3byB1c2Vycwp2YXIgZD10LmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXTtpZihkfHwoZD10Ll9uZXdDaGF0Q3J5cHRvKGUsbCksUy5sb2coImNyZWF0ZUNoYXRLZXkgZW5jcnlwdCIsZS5mcm9tK2UudG8pLHQuY2hhdEtleXNbZS5mcm9tKyI8LT4iK2UudG9dPWQsZS5ib2R5LmhhbmRzaGFrZVBoYXNlPSJzdGFydEhhbmRTaGFrZSIpLGQuYXV0aGVudGljYXRlZCYmIW8pe3ZhciBwPXQuY3J5cHRvLmdlbmVyYXRlSVYoKTt0LmNyeXB0by5lbmNyeXB0QUVTKGQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksZS5ib2R5LnZhbHVlLHApLnRoZW4oZnVuY3Rpb24obil7dmFyIG89dC5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLGUuYm9keS52YWx1ZStwLGQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pO3QuY3J5cHRvLmhhc2hITUFDKGQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksbykudGhlbihmdW5jdGlvbihvKXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIGhhc2ggJywgaGFzaCk7CnZhciBhPXtpdjp0LmNyeXB0by5lbmNvZGUocCksdmFsdWU6dC5jcnlwdG8uZW5jb2RlKG4pLGhhc2g6dC5jcnlwdG8uZW5jb2RlKG8pfTtlLmJvZHkudmFsdWU9KDAsaS5kZWZhdWx0KShhKSxyKGUpfSl9KX1lbHNlIG8/cihlKTp0Ll9kb0hhbmRTaGFrZVBoYXNlKGUsZCkudGhlbihmdW5jdGlvbihyKXt0LmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXT1yLmNoYXRLZXlzLHQuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uoci5tZXNzYWdlKSxuKCJlbmNyeXB0IGhhbmRzaGFrZSBwcm90b2NvbCBwaGFzZSAiKX0pfWVsc2UgbigiSW4gZW5jcnlwdE1lc3NhZ2U6IEh5cGVydHkgb3duZXIgVVJMIHdhcyBub3QgZm91bmQiKX1lbHNlIGMmJnMmJihTLmxvZygiZGF0YU9iamVjdCB2YWx1ZSB0byBlbmNyeXB0OiAiLGUuYm9keS52YWx1ZSksUy5sb2coIklkZW50aXR5TW9kdWxlIC0gZW5jcnlwdCBmcm9tIGh5cGVydHkgdG8gZGF0YW9iamVjdCAiLGUpLHQuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKG8pe3ZhciBzPW8/b1thXTpudWxsO3QuZGF0YU9iamVjdHNTdG9yYWdlLmdldERhdGFPYmplY3QoYSkudGhlbihmdW5jdGlvbihvKXsKLy9pZiBubyBrZXkgZXhpc3RzLCBjcmVhdGUgYSBuZXcgb25lIGlmIGlzIHRoZSByZXBvcnRlciBvZiBkYXRhT2JqZWN0CmlmKCFzJiZvLnJlcG9ydGVyJiZvLnJlcG9ydGVyPT09ZS5mcm9tKXt2YXIgdT10LmNyeXB0by5nZW5lcmF0ZVJhbmRvbSgpO3QuZGF0YU9iamVjdFNlc3Npb25LZXlzW2FdPXtzZXNzaW9uS2V5OnUsaXNUb0VuY3J5cHQ6ITB9LHQuc3RvcmFnZU1hbmFnZXIuc2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiLDAsdC5kYXRhT2JqZWN0U2Vzc2lvbktleXMpLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk9uIGVuY3J5cHRNZXNzYWdlIGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLnNldCBlcnJvcjogIitlKX0pLHM9dC5kYXRhT2JqZWN0U2Vzc2lvbktleXNbYV19Ci8vY2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHNlc3Npb24ga2V5IGZvciB0aGUgY2hhdCByb29tCmlmKHMpCi8vIGFuZCBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uLCBlbmNyeXB0IHRoZSBtZXNzYWdlcwppZihzLmlzVG9FbmNyeXB0KXt2YXIgYz10LmNyeXB0by5nZW5lcmF0ZUlWKCk7dC5jcnlwdG8uZW5jcnlwdEFFUyhzLnNlc3Npb25LZXksdC5jcnlwdG8uZW5jb2RlKCgwLGkuZGVmYXVsdCkoZS5ib2R5LnZhbHVlKSksYykudGhlbihmdW5jdGlvbihuKXt2YXIgbz10Ll9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsZS5ib2R5LnZhbHVlK2Mscy5zZXNzaW9uS2V5KTt0LmNyeXB0by5oYXNoSE1BQyhzLnNlc3Npb25LZXksbykudGhlbihmdW5jdGlvbihvKXsKLy8gbG9nLmxvZygnaGFzaCAnLCBoYXNoKTsKdmFyIGE9e3ZhbHVlOnQuY3J5cHRvLmVuY29kZShuKSxpdjp0LmNyeXB0by5lbmNvZGUoYyksaGFzaDp0LmNyeXB0by5lbmNvZGUobyl9O2UuYm9keS52YWx1ZT0oMCxpLmRlZmF1bHQpKGEpLHIoZSl9KX0pfWVsc2UgcihlKTtlbHNlIG4oIkRhdGEgb2JqZWN0IGtleSBjb3VsZCBub3QgYmUgZGVmaW5lZDogRmFpbGVkIHRvIGRlY3J5cHQgbWVzc2FnZSAiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk9uIGVuY3J5cHRNZXNzYWdlIGZyb20gbWV0aG9kIGRhdGFPYmplY3RzU3RvcmFnZS5nZXREYXRhT2JqZWN0IGVycm9yOiAiK2UpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKCJPbiBlbmNyeXB0TWVzc2FnZSBmcm9tIG1ldGhvZCBzdG9yYWdlTWFuYWdlci5nZXQgZXJyb3I6ICIrZSl9KSl9KX19LHtrZXk6ImVuY3J5cHREYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixvKXtTLmluZm8oImRhdGFPYmplY3QgdmFsdWUgdG8gZW5jcnlwdDogIixlKTt2YXIgYT1yLl9wYXJzZU1lc3NhZ2VVUkwodCk7ci5zdG9yYWdlTWFuYWdlci5nZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIpLnRoZW4oZnVuY3Rpb24odCl7dmFyIHM9dD90W2FdOm51bGw7Ci8vY2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHNlc3Npb24ga2V5IGZvciB0aGUgY2hhdCByb29tCmlmKCFzKXJldHVybiBvKCJObyBkYXRhT2JqZWN0S2V5IGZvciB0aGlzIGRhdGFPYmplY3RVUkw6IixhKTsKLy8gYW5kIGlmIGlzIHRvIGFwcGx5IGVuY3J5cHRpb24sIGVuY3J5cHQgdGhlIG1lc3NhZ2VzCmlmKCFzLmlzVG9FbmNyeXB0KXJldHVybiBTLmluZm8oIlRoZSBkYXRhT2JqZWN0IGlzIG5vdCBlbmNyeXB0ZWQiKSxuKGUpO3ZhciB1PXIuY3J5cHRvLmdlbmVyYXRlSVYoKTtyLmNyeXB0by5lbmNyeXB0QUVTKHMuc2Vzc2lvbktleSxyLmNyeXB0by5lbmNvZGUoKDAsaS5kZWZhdWx0KShlKSksdSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD17dmFsdWU6ci5jcnlwdG8uZW5jb2RlKGUpLGl2OnIuY3J5cHRvLmVuY29kZSh1KX07cmV0dXJuIFMubG9nKCJlbmNyeXB0ZWQgZGF0YU9iamVjdCIsdCksbih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIGVuY3J5cHREYXRhT2JqZWN0IGZyb20gbWV0aG9kIGVuY3J5cHRBRVMgZXJyb3I6ICIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIGVuY3J5cHREYXRhT2JqZWN0IGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLmdldCBlcnJvcjogIitlKX0pfSl9fSx7a2V5OiJkZWNyeXB0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gUy5pbmZvKCJkZWNyeXB0TWVzc2FnZTptZXNzYWdlIixlKSxuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9ImhhbmRzaGFrZSI9PT1lLnR5cGU7Ci8vaWYgaXMgbm90IHRvIGFwcGx5IGVuY3J5cHRpb24sIHRoZW4gcmV0dXJucyByZXNvbHZlCmlmKCF0LmlzVG9Vc2VFbmNyeXB0aW9uJiYhaSkKLy8gbG9nLmxvZygnZGVjcnlwdGlvbiBkaXNhYmxlZCcpOwpyZXR1cm4gcihlKTt2YXIgbz10Ll9wYXJzZU1lc3NhZ2VVUkwoZS50byksYT0oMCxoLmlzRGF0YU9iamVjdFVSTCkobykscz0iaHlwZXJ0eSI9PT0oMCxoLmRpdmlkZVVSTCkoZS5mcm9tKS50eXBlLHU9Imh5cGVydHkiPT09KDAsaC5kaXZpZGVVUkwpKGUudG8pLnR5cGU7aWYoInVwZGF0ZSI9PT1lLnR5cGUpcmV0dXJuIHIoZSk7Ci8vaXMgaXMgaHlwZXJ0eSB0byBoeXBlcnR5IGNvbW11bmljYXRpb24KaWYocyYmdSl7Ci8vIGxvZy5sb2coJ2RlY3J5cHQgaHlwZXJ0eSB0byBoeXBlcnR5Jyk7CnZhciBjPXQuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlLnRvKTtpZihjKXt2YXIgZj10LmNoYXRLZXlzW2UudG8rIjwtPiIrZS5mcm9tXTtpZihmfHwoZj10Ll9uZXdDaGF0Q3J5cHRvKGUsYywiZGVjcnlwdCIpLHQuY2hhdEtleXNbZS50bysiPC0+IitlLmZyb21dPWYpLGYuYXV0aGVudGljYXRlZCYmIWkpe3ZhciBsPUpTT04ucGFyc2UoZS5ib2R5LnZhbHVlKSxkPXQuY3J5cHRvLmRlY29kZShsLml2KSxwPXQuY3J5cHRvLmRlY29kZShsLnZhbHVlKSx5PXQuY3J5cHRvLmRlY29kZShsLmhhc2gpO3QuY3J5cHRvLmRlY3J5cHRBRVMoZi5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXkscCxkKS50aGVuKGZ1bmN0aW9uKG4pewovLyBsb2cubG9nKCdkZWNyeXB0ZWQgdmFsdWUgJywgZGVjcnlwdGVkRGF0YSk7CmUuYm9keS52YWx1ZT1uO3ZhciBpPXQuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxuK2QpO3QuY3J5cHRvLnZlcmlmeUhNQUMoZi5rZXlzLmh5cGVydHlUb0hhc2hLZXksaSx5KS50aGVuKGZ1bmN0aW9uKHQpewovLyBsb2cubG9nKCdyZXN1bHQgb2YgaGFzaCB2ZXJpZmljYXRpb24hICcsIHJlc3VsdCk7CmUuYm9keS5hc3NlcnRlZElkZW50aXR5PSEwLHIoZSl9KX0pfWVsc2UgaT90Ll9kb0hhbmRTaGFrZVBoYXNlKGUsZikudGhlbihmdW5jdGlvbihyKXsKLy9pZiBpdCB3YXMgc3RhcnRlZCBieSBkb011dHVhbEF1dGhlbnRpY2F0aW9uIHRoZW4gZW5kcyB0aGUgcHJvdG9jb2wKImhhbmRTaGFrZUVuZCI9PT1yP24oImRlY3J5cHQgaGFuZHNoYWtlIHByb3RvY29sIHBoYXNlICIpOih0LmNoYXRLZXlzW2UudG8rIjwtPiIrZS5mcm9tXT1yLmNoYXRLZXlzLHQuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uoci5tZXNzYWdlKSxuKCJkZWNyeXB0IGhhbmRzaGFrZSBwcm90b2NvbCBwaGFzZSAiKSl9KTpuKCJ3cm9uZyBtZXNzYWdlIGRvIGRlY3J5cHQiKX1lbHNlIG4oImVycm9yIG9uIGRlY3J5cHQgbWVzc2FnZSIpfWVsc2UgcyYmYT8KLy8gbG9nLmxvZygnZGF0YU9iamVjdCB2YWx1ZSB0byBkZWNyeXB0OiAnLCBtZXNzYWdlLmJvZHkpOwp0LnN0b3JhZ2VNYW5hZ2VyLmdldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIikudGhlbihmdW5jdGlvbihuKXt2YXIgaT1uP25bb106bnVsbDtpZihpKQovL2NoZWNrIGlmIGlzIHRvIGFwcGx5IGVuY3J5cHRpb24KaWYoaS5pc1RvRW5jcnlwdCl7dmFyIGE9dm9pZCAwO3RyeXthPUpTT04ucGFyc2UoZS5ib2R5LnZhbHVlKX1jYXRjaCh0KXsKLy8gSWYgdGhlIG1lc3NhZ2UgaXMgbm90IGF1dGhlbnRpY2F0ZWQgb3IgaGFkIG11dHVhbCBhdXRoIGFjdGl2ZSBzaG91bGQgY29udGludWUKYT1lLmJvZHkudmFsdWV9aWYoIWEuaGFzT3duUHJvcGVydHkoIml2IikmJiFhLmhhc093blByb3BlcnR5KCJ2YWx1ZSIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgiaGFzaCIpKXJldHVybiBlLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eT0hMCxyKGUpO3ZhciBzPXQuY3J5cHRvLmRlY29kZShhLml2KSx1PXQuY3J5cHRvLmRlY29kZShhLnZhbHVlKSxjPXQuY3J5cHRvLmRlY29kZShhLmhhc2gpO3QuY3J5cHRvLmRlY3J5cHRBRVMoaS5zZXNzaW9uS2V5LHUscykudGhlbihmdW5jdGlvbihuKXt2YXIgbz1KU09OLnBhcnNlKGF0b2IobikpOwovLyBsb2cubG9nKCdkZWNyeXB0ZWQgVmFsdWUsJywgcGFyc2VkVmFsdWUpOwplLmJvZHkudmFsdWU9bzt2YXIgYT10Ll9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsbytzKTt0LmNyeXB0by52ZXJpZnlITUFDKGkuc2Vzc2lvbktleSxhLGMpLnRoZW4oZnVuY3Rpb24odCl7Ci8vIGxvZy5sb2coJ3Jlc3VsdCBvZiBoYXNoIHZlcmlmaWNhdGlvbiEgJywgcmVzdWx0KTsKZS5ib2R5LmFzc2VydGVkSWRlbnRpdHk9ITAscihlKX0pfSl9ZWxzZSBlLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eT0hMCxyKGUpO2Vsc2UgZS5ib2R5LmFzc2VydGVkSWRlbnRpdHk9ITAscihlKX0pOm4oIndyb25nIG1lc3NhZ2UgdG8gZGVjcnlwdCIpfSl9fSx7a2V5OiJkZWNyeXB0RGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7Ci8vaWYgaXMgbm90IHRvIGFwcGx5IGVuY3J5cHRpb24sIHRoZW4gcmV0dXJucyByZXNvbHZlCmlmKCFyLmlzVG9Vc2VFbmNyeXB0aW9uKQovLyBsb2cubG9nKCdkZWNyeXB0aW9uIGRpc2FibGVkJyk7CnJldHVybiBuKGUpO3ZhciBvPXIuX3BhcnNlTWVzc2FnZVVSTCh0KTsKLy8gbG9nLmxvZygnZGF0YU9iamVjdCB2YWx1ZSB0byBkZWNyeXB0OiAnLCBkYXRhT2JqZWN0KTsKci5zdG9yYWdlTWFuYWdlci5nZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGE9dD90W29dOm51bGw7aWYoIWEpcmV0dXJuIGkoIk5vIGRhdGFPYmplY3RLZXkgZm9yIHRoaXMgZGF0YU9iamVjdFVSTDoiLG8pOwovL2NoZWNrIGlmIGlzIHRvIGFwcGx5IGVuY3J5cHRpb24KaWYoIWEuaXNUb0VuY3J5cHQpCi8vIGxvZy5sb2coJ1RoZSBkYXRhT2JqZWN0IGlzIG5vdCBlbmNyeXB0ZWQnKTsKcmV0dXJuIG4oZSk7dmFyIHM9ci5jcnlwdG8uZGVjb2RlKGUuaXYpLHU9ci5jcnlwdG8uZGVjb2RlKGUudmFsdWUpO3IuY3J5cHRvLmRlY3J5cHRBRVMoYS5zZXNzaW9uS2V5LHUscykudGhlbihmdW5jdGlvbihlKXt2YXIgdD1KU09OLnBhcnNlKGF0b2IoZSkpLGk9e3ZhbHVlOnQsaXY6ci5jcnlwdG8uZW5jb2RlKHMpfTsKLy8gbG9nLmxvZygnZGVjcnlwdGVkIGRhdGFPYmplY3QsJywgbmV3VmFsdWUpOwpyZXR1cm4gbihpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIk9uIGRlY3J5cHREYXRhT2JqZWN0IGZyb20gbWV0aG9kIGVuY3J5cHRBRVMgZXJyb3I6ICIrZSl9KX0pfSl9fSx7a2V5OiJkb011dHVhbEF1dGhlbnRpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe1MuaW5mbygiZG9NdXR1YWxBdXRoZW50aWNhdGlvbjpzZW5kZXIgIixlKSxTLmluZm8oImRvTXV0dWFsQXV0aGVudGljYXRpb246cmVjZWl2ZXIgIix0KTt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89dm9pZCAwLGE9ci5yZWdpc3RyeS5nZXRSZXBvcnRlclVSTFN5bmNob25vdXMoZSk7YSYmKG89ZSxlPWEpO3ZhciBzPXt0bzp0LGZyb206ZSxjYWxsYmFjazp2b2lkIDAsYm9keTp7aGFuZHNoYWtlUGhhc2U6InN0YXJ0SGFuZFNoYWtlIixpZ25vcmU6Imlnbm9yZU1lc3NhZ2UifX07aWYoIWV8fCF0KXJldHVybiBpKCJzZW5kZXIgb3IgcmVjZWl2ZXIgbWlzc2luZyBvbiBkb011dHVhbEF1dGhlbnRpY2F0aW9uIik7dmFyIHU9ci5jaGF0S2V5c1tlKyI8LT4iK3RdLGM9ci5fcmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUpO2lmKGMpe2lmKCF1KXsKLy8gY2FsbGJhY2sgdG8gcmVzb2x2ZSB3aGVuIGZpbmlzaCB0aGUgbXV0dWFsIGF1dGhlbnRpY2F0aW9uCnZhciBmPWZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjYWxsYmFjayB2YWx1ZTonLCB2YWx1ZSk7Cm4oZSl9O3MuY2FsbGJhY2s9ZixzLmRhdGFPYmplY3RVUkw9byx1PXIuX25ld0NoYXRDcnlwdG8ocyxjKSxyLmNoYXRLZXlzW2UrIjwtPiIrdF09dX1pZih1LmF1dGhlbnRpY2F0ZWQpe3ZhciBsPXt0bzplLGZyb206dH07dS5kYXRhT2JqZWN0VVJMPW8sci5fc2VuZFJlcG9ydGVyU2Vzc2lvbktleShsLHUpLnRoZW4oZnVuY3Rpb24oZSl7ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShlLm1lc3NhZ2UpLG4oImV4Y2hhbmdlIG9mIGNoYXQgc2Vzc2lvbktleSBpbml0aWF0ZWQiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIk9uIGRvTXV0dWFsQXV0aGVudGljYXRpb24gZnJvbSBtZXRob2QgX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZXJyb3I6ICIrZSl9KX1lbHNlIHIuX2RvSGFuZFNoYWtlUGhhc2Uocyx1KX1lbHNlIGkoIk11dHVhbCBhdXRoZW50aWNhdGlvbiBlcnJvcjogSHlwZXJ0eSBvd25lciBjb3VsZCBub3QgYmUgcmVzb2x2ZWQiKX0pfX0se2tleToiZ2V0VG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLGkpewovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGZyb20tPicsIGZyb21VUkwsICcgIHRvLT4nLCB0b1VybCk7CnQ/KFMubG9nKCJ0b1VybCIsdCksci5yZWdpc3RyeS5pc0xlZ2FjeSh0KS50aGVuKGZ1bmN0aW9uKG8pewovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGlzTEVHQUNZOiAnLCByZXN1bHQpOwppZihvKXsKLy8gVE9ETzogY2hlY2sgaWYgaW4gdGhlIGZ1dHVyZSBvdGhlciBsZWdhY3kgaHlwZXJ0aWVzIGhhdmUgZXhwaXJhdGlvbiB0aW1lcwovLyBpZiBzbyB0aGUgY2hlY2sgc2hvdWxkIGJlIG1hZGUgaGVyZSAob3IgaW4gdGhlIGdldEFjY2Vzc1Rva2VuIGZ1bmN0aW9uKQp2YXIgYT1yLmdldEFjY2Vzc1Rva2VuKHQpO2lmKGEpcmV0dXJuIG4oYSk7dmFyIHM9KDAsaC5nZXRVc2VySWRlbnRpdHlEb21haW4pKHQpOwovLyBjaGVjayBpZiBwcm9jZXNzIHRvIGdldCB0b2tlbiBoYXMgYWxyZWFkeSBzdGFydGVkCnIuaWRlbnRpdGllc0xpc3Rbc10mJiJpbi1wcm9ncmVzcyI9PT1yLmlkZW50aXRpZXNMaXN0W3NdLnN0YXR1cz8KLy8gVGhlIHByb2Nlc3MgdG8gZ2V0IHRoZSB0b2tlbiBoYXMgYWxyZWFkeSBzdGFydGVkLCBsZXQncyB3YWl0IGJ5IHdhdGNoaW5nIGl0cyBzdGF0dXMKci53YXRjaGluZ1lvdS5vYnNlcnZlKCJpZGVudGl0aWVzTGlzdCIsZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tJZGVudGl0eS5JZGVudGl0eU1vZHVsZS5nZXRUb2tlbl0gIGlkZW50aXRpZXNMaXN0IGNoYW5nZWQgJyArIF90aGlzLmlkZW50aXRpZXNMaXN0KTsKdmFyIGk9ZS5rZXlwYXRoO2lmKGkuaW5jbHVkZXMoInN0YXR1cyIpJiYoaT1pLnJlcGxhY2UoIi5zdGF0dXMiLCIiKSksaT09PXMmJiJzdGF0dXMiPT09ZS5uYW1lJiYiY3JlYXRlZCI9PT1lLm5ld1ZhbHVlKQovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIHRva2VuIGlzIGNyZWF0ZWQgJyArIF90aGlzLmlkZW50aXRpZXNMaXN0W2RvbWFpbl0pOwpyZXR1cm4gbihyLmdldEFjY2Vzc1Rva2VuKHQpKX0pOigKLy9Ub2tlbiBkb2VzIG5vdCBleGlzdCBhbmQgdGhlIHByb2Nlc3MgdG8gZ2V0IGhhcyBub3Qgc3RhcnRlZCB5ZXQKci5pZGVudGl0aWVzTGlzdFtzXT17c3RhdHVzOiJpbi1wcm9ncmVzcyJ9LAovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGZvci0+ICcsIGRvbWFpbik7CnIuY2FsbEdlbmVyYXRlTWV0aG9kcyhzKS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIENhbGxHZW5lcmF0ZW1ldGhvZHMnLCB2YWx1ZSk7CnZhciBvPXIuZ2V0QWNjZXNzVG9rZW4odCk7cmV0dXJuIG8/bihvKTppKCJObyBBY2Nlc3MgdG9rZW4gZm91bmQiKX0sZnVuY3Rpb24oZSl7cmV0dXJuIFMuZXJyb3IoIltJZGVudGl0eS5JZGVudGl0eU1vZHVsZS5nZXRUb2tlbl0gZXJyb3IgQ2FsbEdlbmVyYXRlbWV0aG9kcyIpLGkoZSl9KSl9ZWxzZSByLl9nZXRWYWxpZFRva2VuKGUpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIk9uIGdldFRva2VuIGZyb20gbWV0aG9kIF9nZXRWYWxpZFRva2VuIGVycm9yOiAiK2UpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKCJPbiBnZXRUb2tlbiBmcm9tIG1ldGhvZCBpc0xlZ2FjeSBlcnJvcjogIitlKX0pKTpyLl9nZXRWYWxpZFRva2VuKGUpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0pfSl9fSx7a2V5OiJnZXRJZFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtTLmluZm8oImdldElkVG9rZW46aHlwZXJ0eVVSTCAiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXtpZigiaHlwZXJ0eSIhPT1lLnNwbGl0KCI6Ly8iKVswXSl0Ll9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3QoZSkudGhlbihmdW5jdGlvbihlKXt2YXIgaT10LnJlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlKTtpZighaSlyZXR1cm4gbigibm8gaWRlbnRpdHkgd2FzIGZvdW5kICIpO2Zvcih2YXIgbyBpbiB0LmlkZW50aXRpZXMpe3ZhciBhPXQuaWRlbnRpdGllc1tvXTtpZihhLmlkZW50aXR5PT09aSlyZXR1cm4gcihhLm1lc3NhZ2VJbmZvKX19KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJubyBpZGVudGl0eSB3YXMgZm91bmQ6ICIsZSksbihlKX0pO2Vsc2V7dmFyIGk9dC5yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoZSk7aWYoIWkpcmV0dXJuIG4oIm5vIGlkZW50aXR5IHdhcyBmb3VuZC4iKTtmb3IodmFyIG8gaW4gdC5pZGVudGl0aWVzKXt2YXIgYT10LmlkZW50aXRpZXNbb107aWYoYS5pZGVudGl0eT09PWkpCi8vIFRPRE8gY2hlY2sgdGhpcyBnZXRJZFRva2VuIHdoZW4gd2UgcnVuIG9uIG5vZGVqcyBlbnZpcm9ubWVudDsKLy8gVE9ETyBjaGVjayB0aGlzIGdldElkVG9rZW4gd2hlbiB3ZSBydW4gb24gbm9kZWpzIGVudmlyb25tZW50OwovL2hhY2sgd2hpbGUgaWRtIGlzIG5vdCByZWVzdHVjdHVyZWQKcmV0dXJuIGEuaGFzT3duUHJvcGVydHkoIm1lc3NhZ2VJbmZvIik/YS5tZXNzYWdlSW5mby5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9uIik/cihhLm1lc3NhZ2VJbmZvKTooYS5tZXNzYWdlSW5mby5hc3NlcnRpb249YS5hc3NlcnRpb24scihhLm1lc3NhZ2VJbmZvKSk6cihhKX19fSl9fSx7a2V5OiJnZXRBY2Nlc3NUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLGguZGl2aWRlVVJMKShlKS5kb21haW47ZS5pbmNsdWRlcygicHJvdG9zdHViIikmJihyPXIucmVwbGFjZShyLnNwbGl0KCIuIilbMF0rIi4iLCIiKSk7dmFyIG49dm9pZCAwLGk9dm9pZCAwLG89dC5fc2Vjb25kc19zaW5jZV9lcG9jaCgpO2Zvcih2YXIgYSBpbiB0LmlkZW50aXRpZXMpe3ZhciBzPXQuaWRlbnRpdGllc1thXTtpZihzLmhhc093blByb3BlcnR5KCJpbnRlcndvcmtpbmciKSYmcy5pbnRlcndvcmtpbmcuZG9tYWluPT09cikKLy8gY2hlY2sgaWYgdGhlcmUgaXMgZXhwaXJhdGlvbiB0aW1lCi8vIGNoZWNrIGlmIHRoZXJlIGlzIGV4cGlyYXRpb24gdGltZQovLyBlbHNlIHRoaXMgYWNjZXNzIHRva2VuIGhhcyBubyBleHBpcmF0aW9uIHRpbWUKcmV0dXJuIHMuaGFzT3duUHJvcGVydHkoImluZm8iKSYmcy5pbmZvLmhhc093blByb3BlcnR5KCJleHBpcmVzIikmJihpPXMuaW5mby5leHBpcmVzLG8+PWkpP251bGw6KHMuaGFzT3duUHJvcGVydHkoIm1lc3NhZ2VJbmZvIikmJnMubWVzc2FnZUluZm8uaGFzT3duUHJvcGVydHkoInVzZXJQcm9maWxlIikmJnMubWVzc2FnZUluZm8udXNlclByb2ZpbGUmJihuPXt1c2VyUHJvZmlsZTpzLm1lc3NhZ2VJbmZvLnVzZXJQcm9maWxlLGFjY2Vzc190b2tlbjpzLmludGVyd29ya2luZy5hY2Nlc3NfdG9rZW59LHMuaGFzT3duUHJvcGVydHkoImluZm9Ub2tlbiIpJiZzLmluZm9Ub2tlbi5oYXNPd25Qcm9wZXJ0eSgiaWQiKSYmKG4udXNlclByb2ZpbGUuaWQ9cy5pbmZvVG9rZW4uaWQpKSxuKX1yZXR1cm4gbnVsbH19LHtrZXk6InNlbmRSZWZyZXNoTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPXQuX3Jlc29sdmVEb21haW4oZS5pZHApLG89dm9pZCAwLGE9dC5nZXRJZGVudGl0eShlLnVzZXJQcm9maWxlLnVzZXJVUkwpO1MuaW5mbygic2VuZFJlZnJlc2hNZXNzYWdlOm9sZElkZW50aXR5IixlKSxvPXt0eXBlOiJleGVjdXRlIix0bzppLGZyb206dC5faWRtVVJMLGJvZHk6e3Jlc291cmNlOiJpZGVudGl0eSIsbWV0aG9kOiJyZWZyZXNoQXNzZXJ0aW9uIixwYXJhbXM6e2lkZW50aXR5OmF9fX07dHJ5e3QuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHkudmFsdWU7cih0KX0pfWNhdGNoKGUpe24oIkluIHNlbmRSZWZyZXNoTWVzc2FnZSBvbiBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19LHtrZXk6InNlbmRHZW5lcmF0ZU1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obyxhKXt2YXIgcz1pLl9yZXNvbHZlRG9tYWluKG4pLHU9dm9pZCAwO3U9e3R5cGU6ImV4ZWN1dGUiLHRvOnMsZnJvbTppLl9pZG1VUkwsYm9keTp7cmVzb3VyY2U6ImlkZW50aXR5IixtZXRob2Q6ImdlbmVyYXRlQXNzZXJ0aW9uIixwYXJhbXM6e2NvbnRlbnRzOmUsb3JpZ2luOnQsdXNlcm5hbWVIaW50OnJ9fX07dHJ5e2kuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodSxmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHkudmFsdWU7byh0KX0pfWNhdGNoKGUpe2EoIkluIHNlbmRSZWZyZXNoTWVzc2FnZSBvbiBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19LHtrZXk6ImdlbmVyYXRlQXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGkpe3ZhciBvPXRoaXM7Ci8vIGxvZy5sb2coJ2dlbmVyYXRlQXNzZXJ0aW9uJyk7CnJldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKGEscyl7by5zZW5kR2VuZXJhdGVNZXNzYWdlKGUsdCxyLGkpLnRoZW4oZnVuY3Rpb24oZSl7ZS5sb2dpblVybD9vLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoIm9wZW5Qb3B1cCIse3VybHJlY2VpdmVkOmUubG9naW5Vcmx9KS50aGVuKGZ1bmN0aW9uKGUpe2EoZSl9LGZ1bmN0aW9uKGUpe3MoZSl9KTplP28uc3RvcmVJZGVudGl0eShlLG4pLnRoZW4oZnVuY3Rpb24oZSl7YShlKX0sZnVuY3Rpb24oZSl7cyhlKX0pOnMoImVycm9yIG9uIG9idGFpbmluZyBpZGVudGl0eSBpbmZvcm1hdGlvbiIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cygiT24gZ2VuZXJhdGVBc3NlcnRpb24gZnJvbSBtZXRob2Qgc2VuZEdlbmVyYXRlTWVzc2FnZSBlcnJvcjogIitlKX0pfSl9fSx7a2V5OiJ2YWxpZGF0ZUFzc2VydGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1uLl9yZXNvbHZlRG9tYWluKHIpLG89e3R5cGU6ImV4ZWN1dGUiLHRvOmksZnJvbTpuLl9pZG1VUkwsYm9keTp7cmVzb3VyY2U6ImlkZW50aXR5IixtZXRob2Q6InZhbGlkYXRlQXNzZXJ0aW9uIixwYXJhbXM6e2Fzc2VydGlvbjplLG9yaWdpbjp0fX19O3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7dHJ5e24uX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihyKXsyMDA9PT1yLmJvZHkuY29kZT9lKHIuYm9keS52YWx1ZSk6dCgiZXJyb3IiLHIuYm9keS5jb2RlKX0pfWNhdGNoKGUpe3QoIk9uIHZhbGlkYXRlQXNzZXJ0aW9uIGZyb20gbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfX0se2tleToiYWRkR1VJTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihlLl9pZG1VUkwsZnVuY3Rpb24odCl7dmFyIHI9dC5ib2R5Lm1ldGhvZCxuPXZvaWQgMDtpZigiZGVwbG95R1VJIj09PXIpbj1lLmRlcGxveUdVSSgpO2Vsc2UgaWYoImdldElkZW50aXRpZXNUb0Nob29zZSI9PT1yKW49ZS5nZXRJZGVudGl0aWVzVG9DaG9vc2UoKTtlbHNlIGlmKCJ1bnJlZ2lzdGVySWRlbnRpdHkiPT09cil7dmFyIGk9dC5ib2R5LnBhcmFtcy5lbWFpbDtuPWUudW5yZWdpc3RlcklkZW50aXR5KGkpfWVsc2V7aWYoImdlbmVyYXRlUlNBS2V5UGFpciI9PT1yKQovLyBiZWNhdXNlIGdlbmVyYXRlUlNBS2V5UGFpciBpcyBhIHByb21pc2UKLy8gd2UgaGF2ZSB0byBzZW5kIHRoZSBtZXNzYWdlIG9ubHkgYWZ0ZXIgZ2V0dGluZyB0aGUga2V5IHBhaXIKcmV0dXJuIHZvaWQgZS5jcnlwdG8uZ2VuZXJhdGVSU0FLZXlQYWlyKCkudGhlbihmdW5jdGlvbihyKXt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0saT17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGkpfWNhdGNoKGUpe1MuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIGdlbmVyYXRlUlNBS2V5UGFpciBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSk7aWYoInNlbmRHZW5lcmF0ZU1lc3NhZ2UiPT09cil7dmFyIG89dC5ib2R5LnBhcmFtcy5jb250ZW50cyxhPXQuYm9keS5wYXJhbXMub3JpZ2luLHM9dC5ib2R5LnBhcmFtcy51c2VybmFtZUhpbnQsdT10LmJvZHkucGFyYW1zLmlkcERvbWFpbjtyZXR1cm4gdm9pZCBlLnNlbmRHZW5lcmF0ZU1lc3NhZ2UobyxhLHMsdSkudGhlbihmdW5jdGlvbihyKXt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0saT17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGkpfWNhdGNoKGUpe1MuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIHNlbmRHZW5lcmF0ZU1lc3NhZ2UgbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfWlmKCJzdG9yZUlkZW50aXR5Ij09PXIpe3ZhciBjPXQuYm9keS5wYXJhbXMucmVzdWx0LGY9dC5ib2R5LnBhcmFtcy5rZXlQYWlyO3JldHVybiB2b2lkIGUuc3RvcmVJZGVudGl0eShjLGYpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOnIsY29kZToyMDB9LGk9e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpufTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpKX1jYXRjaChlKXtTLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzdG9yZUlkZW50aXR5IG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19LyplbHNlIGlmIChmdW5jTmFtZSA9PT0gJ3NlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eScpIHsKICAgICAgICAgIGxldCBvcmlnaW4gPSBtc2cuYm9keS5wYXJhbXMub3JpZ2luOwogICAgICAgICAgbGV0IGlkcCA9IG1zZy5ib2R5LnBhcmFtcy5pZHA7CiAgICAgICAgICBsZXQgaWRIaW50ID0gbXNnLmJvZHkucGFyYW1zLmlkSGludDsKICAgICAgICAgIF90aGlzLnNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eShvcmlnaW4sIGlkcCwgaWRIaW50KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0qLwovLyBpZiB0aGUgZnVuY3Rpb24gcmVxdWVzdGVkIGlzIG5vdCBhIHByb21pc2UKdmFyIGw9e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOm4sY29kZToyMDB9LGQ9e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpsfTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShkKX1jYXRjaChlKXtTLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzdG9yZUlkZW50aXR5IG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19LHtrZXk6ImRlcGxveUdVSSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmd1aURlcGxveWVkPSEwfX0se2tleToiX2dldFZhbGlkVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe1MuaW5mbygiX2dldFZhbGlkVG9rZW46aHlwZXJ0eVVSTCIsZSk7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuZ2V0SWRUb2tlbihlKS50aGVuKGZ1bmN0aW9uKGUpe1MubG9nKCJbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VmFsaWRUb2tlbl0gVG9rZW4iLGUpO3ZhciBpPXQuX3NlY29uZHNfc2luY2VfZXBvY2goKSxvPXQuZ2V0SWRlbnRpdHkoZS51c2VyUHJvZmlsZS51c2VyVVJMKSxhPXZvaWQgMDtvLmhhc093blByb3BlcnR5KCJpbmZvIik/by5pbmZvLmhhc093blByb3BlcnR5KCJleHBpcmVzIik/YT1vLmluZm8uZXhwaXJlczpvLmluZm8uaGFzT3duUHJvcGVydHkoInRva2VuSURKU09OIik/YT1vLmluZm8udG9rZW5JREpTT04uZXhwOigKLy8gdGhyb3cgJ1RoZSBJRCBUb2tlbiBkb2VzIG5vdCBoYXZlIGFuIGV4cGlyYXRpb24gdGltZSc7ClMuaW5mbygiVGhlIElEIFRva2VuIGRvZXMgbm90IGhhdmUgYW4gZXhwaXJhdGlvbiB0aW1lIikscihlKSk6by5oYXNPd25Qcm9wZXJ0eSgiaW5mb1Rva2VuIikmJm8uaW5mb1Rva2VuLmhhc093blByb3BlcnR5KCJleHAiKT9hPW8uaW5mb1Rva2VuLmV4cDooCi8vIHRocm93ICdUaGUgSUQgVG9rZW4gZG9lcyBub3QgaGF2ZSBhbiBleHBpcmF0aW9uIHRpbWUnOwpTLmluZm8oIlRoZSBJRCBUb2tlbiBkb2VzIG5vdCBoYXZlIGFuIGV4cGlyYXRpb24gdGltZSIpLHIoZSkpLAovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VmFsaWRUb2tlbl0gVG9rZW4gZXhwaXJlcyBpbjogJywgZXhwaXJhdGlvbl9kYXRlLCAgJyB8IHRpbWUgbm93OiAnLCB0aW1lX25vdyk7Cmk+PWE/Imdvb2dsZS5jb20iPT09ZS5pZHA/dC5zZW5kUmVmcmVzaE1lc3NhZ2UoZSkudGhlbihmdW5jdGlvbihlKXt0LmRlbGV0ZUlkZW50aXR5KG8uaWRlbnRpdHkpLHQuc3RvcmVJZGVudGl0eShlLG8ua2V5UGFpcikudGhlbihmdW5jdGlvbihlKXtyKGUpfSxmdW5jdGlvbihlKXtTLmVycm9yKCJbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGVycm9yIG9uIGdldFRva2VuIixlKSxuKGUpfSl9KTooCi8vIG1pY3Jvc29mdC5jb20KdC5kZWxldGVJZGVudGl0eShvLmlkZW50aXR5KSwKLy8gZ2VuZXJhdGUgbmV3IGlkVG9rZW4KdC5jYWxsR2VuZXJhdGVNZXRob2RzKGUuaWRwKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzdG9yZUlkZW50aXR5IG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX0pKTpyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcigiW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSBlcnJvciBvbiBnZXRUb2tlbiIsZSksbihlKX0pfSl9fSx7a2V5OiJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXtTLmluZm8oIl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3Q6ZGF0YU9iamVjdFVSTCIsZSk7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPSgwLGguZGl2aWRlVVJMKShlKSxvPWkuZG9tYWluLGE9dC5fcGFyc2VNZXNzYWdlVVJMKGUpLHM9dC5yZWdpc3RyeS5nZXRSZXBvcnRlclVSTFN5bmNob25vdXMoYSk7aWYoUy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OnJlcG9ydGVyVVJMIixzKSxzKXIocyk7ZWxzZXsKLy8gY2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhbiBhc3NvY2lhdGlvbiBmcm9tIGFuIGh5cGVydHlVUkwgdG8gdGhlIGRhdGFPYmplY3QKdmFyIHU9dC5kYXRhT2JqZWN0c0lkZW50aXR5W2FdO2lmKFMuaW5mbygiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdDpzdG9yZWRSZXBvcnRlclVSTCIsdSksdSlyKHUpO2Vsc2V7Ci8vIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBoeXBlcnR5IHRoYXQgc3Vic2NyaWJlZCB0aGUgZGF0YU9iamVjdFVSTAp2YXIgYz10LnJlZ2lzdHJ5LmdldERhdGFPYmplY3RTdWJzY3JpYmVySHlwZXJ0eShlKTtTLmluZm8oIl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3Q6c3Vic2NyaWJlckh5cGVydHkiLGMpLGM/cihjKToKLy8gc2VhcmNoIGluIGRvbWFpbiByZWdpc3RyeSBmb3IgdGhlIGh5cGVydHkgYXNzb2NpYXRlZCB0byB0aGUgZGF0YU9iamVjdAovLyBzZWFyY2ggaW4gY2FzZSBpcyBhIHN1YnNjcmliZXIgd2hvIHdhbnRzIHRvIGtub3cgdGhlIHJlcG9ydGVyCnQuX2NvcmVEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMKGEsbykudGhlbihmdW5jdGlvbihlKXtTLmluZm8oIl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3Q6ZGF0YU9iamVjdCIsZSksdC5kYXRhT2JqZWN0c0lkZW50aXR5W2FdPWUucmVwb3J0ZXIsUy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OmRhdGFPYmplY3QucmVwb3J0ZXIiLGUucmVwb3J0ZXIpLHIoZS5yZXBvcnRlcil9LGZ1bmN0aW9uKGUpe24oZSl9KX19fSl9fSx7a2V5OiJfc2VuZFJlcG9ydGVyU2Vzc2lvbktleSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGE9ci5kYXRhT2JqZWN0U2Vzc2lvbktleXNbdC5kYXRhT2JqZWN0VVJMXSxzPXZvaWQgMCx1PXZvaWQgMCxjPXZvaWQgMCxmPXZvaWQgMCxsPXt9OwovL2lmIHRoZXJlIGlzIG5vdCB5ZXQgYSBzZXNzaW9uIEtleSwgZ2VuZXJhdGVzIGEgbmV3IG9uZQphP2M9YS5zZXNzaW9uS2V5OihjPXIuY3J5cHRvLmdlbmVyYXRlUmFuZG9tKCksci5kYXRhT2JqZWN0U2Vzc2lvbktleXNbdC5kYXRhT2JqZWN0VVJMXT17c2Vzc2lvbktleTpjLGlzVG9FbmNyeXB0OiEwfSxyLnN0b3JhZ2VNYW5hZ2VyLnNldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIiwwLHIuZGF0YU9iamVjdFNlc3Npb25LZXlzKS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfc2VuZFJlcG9ydGVyU2Vzc2lvbktleSBmcm9tIG1ldGhvZCBzdG9yYWdlTWFuYWdlci5zZXQgZXJyb3I6ICIrZSl9KSk7dHJ5e3U9KDAsaS5kZWZhdWx0KSh7dmFsdWU6ci5jcnlwdG8uZW5jb2RlKGMpLGRhdGFPYmplY3RVUkw6dC5kYXRhT2JqZWN0VVJMfSl9Y2F0Y2goZSl7cmV0dXJuIG8oIk9uIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLnNldCBlcnJvcjogIitlKX1mPXIuY3J5cHRvLmdlbmVyYXRlSVYoKSxsLml2PXIuY3J5cHRvLmVuY29kZShmKSxyLmNyeXB0by5lbmNyeXB0QUVTKHQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksdSxmKS50aGVuKGZ1bmN0aW9uKG4pe3M9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToicmVwb3J0ZXJTZXNzaW9uS2V5Iix2YWx1ZTpyLmNyeXB0by5lbmNvZGUobil9fTt2YXIgaT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKHMsdStmLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pO3JldHVybiByLmNyeXB0by5oYXNoSE1BQyh0LmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5LGkpfSkudGhlbihmdW5jdGlvbihlKXt2YXIgbz1idG9hKCgwLGkuZGVmYXVsdCkoe3ZhbHVlOnMuYm9keS52YWx1ZSxoYXNoOnIuY3J5cHRvLmVuY29kZShlKSxpdjpsLml2fSkpO3MuYm9keS52YWx1ZT1vLG4oe21lc3NhZ2U6cyxjaGF0S2V5czp0fSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfc2VuZFJlcG9ydGVyU2Vzc2lvbktleSBmcm9tIGNoYWluZWQgcHJvbWlzZXMgZW5jcnlwdEFFUyBlcnJvcjogIitlKX0pfSl9fSx7a2V5OiJfcmVzb2x2ZURvbWFpbiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ImRvbWFpbi1pZHA6Ly8iK2U6ImRvbWFpbi1pZHA6Ly9nb29nbGUuY29tIn19LHtrZXk6Il9kb0hhbmRTaGFrZVBoYXNlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgYT1lLmJvZHkuaGFuZHNoYWtlUGhhc2Uscz12b2lkIDAsdT12b2lkIDAsYz17fSxmPXZvaWQgMDtzd2l0Y2goUy5pbmZvKCJoYW5kc2hha2UgcGhhc2U6ICIsYSksYSl7Y2FzZSJzdGFydEhhbmRTaGFrZSI6dC5rZXlzLmZyb21SYW5kb209ci5jcnlwdG8uZ2VuZXJhdGVSYW5kb20oKTt2YXIgbD17dHlwZToiaGFuZHNoYWtlIix0bzplLnRvLGZyb206ZS5mcm9tLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzZW5kZXJIZWxsbyIsdmFsdWU6ci5jcnlwdG8uZW5jb2RlKHQua2V5cy5mcm9tUmFuZG9tKX19O3QuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGwsdm9pZCAwLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLAovLyBjaGVjayBpZiB3YXMgdGhlIGVuY3J5cHQgZnVuY3Rpb24gb3IgdGhlIG11dHVhbCBhdXRoZW50aWNhdGlvbiB0aGF0IHJlcXVlc3QgdGhlCi8vIHN0YXJ0IG9mIHRoZSBoYW5kU2hha2VQaGFzZS4KdC5pbml0aWFsTWVzc2FnZT9uKHttZXNzYWdlOmwsY2hhdEtleXM6dH0pOihyLmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXT10LHIuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobCkpO2JyZWFrO2Nhc2Uic2VuZGVySGVsbG8iOlMubG9nKCJzZW5kZXJIZWxsbyIpLHQuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUpLHQua2V5cy5mcm9tUmFuZG9tPXIuY3J5cHRvLmRlY29kZShlLmJvZHkudmFsdWUpLHQua2V5cy50b1JhbmRvbT1yLmNyeXB0by5nZW5lcmF0ZVJhbmRvbSgpO3ZhciBkPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVySGVsbG8iLHZhbHVlOnIuY3J5cHRvLmVuY29kZSh0LmtleXMudG9SYW5kb20pfX07dC5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVySGVsbG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChkLHZvaWQgMCx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSxuKHttZXNzYWdlOmQsY2hhdEtleXM6dH0pO2JyZWFrO2Nhc2UicmVjZWl2ZXJIZWxsbyI6Uy5sb2coInJlY2VpdmVySGVsbG8iKSx0LmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUpLHIudmFsaWRhdGVBc3NlcnRpb24oZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix2b2lkIDAsZS5ib2R5LmlkZW50aXR5LmlkcCkudGhlbihmdW5jdGlvbihuKXsKLy9UT0RPIHJlbW92ZSBsYXRlciB0aGlzIHZlcmlmaWNhdGlvbiBhcyBzb29uIGFzIGFsbCB0aGUgSWRQIHByb3h5IGFyZSB1cGRhdGVkIGluIHRoZSBleGFtcGxlCnZhciBpPSJzdHJpbmciPT10eXBlb2Ygbi5jb250ZW50cz9uLmNvbnRlbnRzOm4uY29udGVudHMubm9uY2Usbz1yLmNyeXB0by5kZWNvZGUoaSksYT1yLmNyeXB0by5nZW5lcmF0ZVBNUygpLHM9ZS5ib2R5LnZhbHVlO3QuaHlwZXJ0eVRvLmFzc2VydGlvbj1lLmJvZHkuaWRlbnRpdHkuYXNzZXJ0aW9uLHQuaHlwZXJ0eVRvLnB1YmxpY0tleT1vLHQuaHlwZXJ0eVRvLnVzZXJJRD1uLmNvbnRlbnRzLmVtYWlsLHQua2V5cy50b1JhbmRvbT1yLmNyeXB0by5kZWNvZGUocyksdC5rZXlzLnByZW1hc3RlcktleT1hO3ZhciB1PXIuY3J5cHRvLmNvbmNhdFBNU3dpdGhSYW5kb21zKGEsdC5rZXlzLnRvUmFuZG9tLHQua2V5cy5mcm9tUmFuZG9tKTtyZXR1cm4gci5jcnlwdG8uZ2VuZXJhdGVNYXN0ZXJTZWNyZXQodSwibWVzc2FnZUhpc3RvcmljIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5rZXlzLm1hc3RlcktleT1lLHIuY3J5cHRvLmdlbmVyYXRlS2V5cyhlLCJrZXkgZXhwYW5zaW9uIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihuKXt0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleT1uZXcgVWludDhBcnJheShuWzBdKSx0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KG5bMV0pLHQua2V5cy5oeXBlcnR5VG9IYXNoS2V5PW5ldyBVaW50OEFycmF5KG5bMl0pLHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoblszXSkscz1yLmNyeXB0by5nZW5lcmF0ZUlWKCksYy5pdj1yLmNyeXB0by5lbmNvZGUocyk7dmFyIGk9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToic2VuZGVyQ2VydGlmaWNhdGUifX07Ci8vIGhhc2ggdGhlIHZhbHVlIGFuZCB0aGUgaXYKcmV0dXJuIGY9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChpLCJvayIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSxyLmNyeXB0by5oYXNoSE1BQyh0LmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5LGYpfSkudGhlbihmdW5jdGlvbihlKXsKLy9lbmNyeXB0IHRoZSBkYXRhCnJldHVybiBjLmhhc2g9ci5jcnlwdG8uZW5jb2RlKGUpLHIuY3J5cHRvLmVuY3J5cHRBRVModC5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleSwib2siLHMpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gYy5zeW1ldHJpY0VuY3J5cHRpb249ci5jcnlwdG8uZW5jb2RlKGUpLHIuY3J5cHRvLmVuY3J5cHRSU0EodC5oeXBlcnR5VG8ucHVibGljS2V5LHQua2V5cy5wcmVtYXN0ZXJLZXkpfSkudGhlbihmdW5jdGlvbihuKXtjLmFzc3ltZXRyaWNFbmNyeXB0aW9uPXIuY3J5cHRvLmVuY29kZShuKTt2YXIgbz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzZW5kZXJDZXJ0aWZpY2F0ZSJ9fSxhPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2gobyx0LmtleXMucHJlbWFzdGVyS2V5LHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pO3JldHVybiByLmNyeXB0by5zaWduUlNBKHQuaHlwZXJ0eUZyb20ucHJpdmF0ZUtleSwoMCxpLmRlZmF1bHQpKHQuaGFuZHNoYWtlSGlzdG9yeSkrKDAsaS5kZWZhdWx0KShhKSl9KS50aGVuKGZ1bmN0aW9uKG8pe2Muc2lnbmF0dXJlPXIuY3J5cHRvLmVuY29kZShvKTt2YXIgYT17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzZW5kZXJDZXJ0aWZpY2F0ZSIsdmFsdWU6YnRvYSgoMCxpLmRlZmF1bHQpKGMpKX19O3QuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJDZXJ0aWZpY2F0ZT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGEsIm9rIitzLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLG4oe21lc3NhZ2U6YSxjaGF0S2V5czp0fSl9LGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSk7YnJlYWs7Y2FzZSJzZW5kZXJDZXJ0aWZpY2F0ZSI6Uy5sb2coInNlbmRlckNlcnRpZmljYXRlIik7dmFyIHA9SlNPTi5wYXJzZShhdG9iKGUuYm9keS52YWx1ZSkpO3IudmFsaWRhdGVBc3NlcnRpb24oZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix2b2lkIDAsZS5ib2R5LmlkZW50aXR5LmlkcCkudGhlbihmdW5jdGlvbihuKXt2YXIgaT1yLmNyeXB0by5kZWNvZGUocC5hc3N5bWV0cmljRW5jcnlwdGlvbiksbz0ic3RyaW5nIj09dHlwZW9mIG4uY29udGVudHM/bi5jb250ZW50czpuLmNvbnRlbnRzLm5vbmNlLGE9ci5jcnlwdG8uZGVjb2RlKG8pO3JldHVybiB0Lmh5cGVydHlUby5hc3NlcnRpb249ZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix0Lmh5cGVydHlUby5wdWJsaWNLZXk9YSx0Lmh5cGVydHlUby51c2VySUQ9bi5jb250ZW50cy5lbWFpbCxyLmNyeXB0by5kZWNyeXB0UlNBKHQuaHlwZXJ0eUZyb20ucHJpdmF0ZUtleSxpKX0sZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coZXJyb3IpOwpvKCJFcnJvciBkdXJpbmcgYXV0aGVudGljYXRpb24gb2YgaWRlbnRpdHkiKX0pLnRoZW4oZnVuY3Rpb24obil7dC5rZXlzLnByZW1hc3RlcktleT1uZXcgVWludDhBcnJheShuKTt2YXIgbz1yLmNyeXB0by5kZWNvZGUocC5zaWduYXR1cmUpLGE9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLHQua2V5cy5wcmVtYXN0ZXJLZXkpO3JldHVybiByLmNyeXB0by52ZXJpZnlSU0EodC5oeXBlcnR5VG8ucHVibGljS2V5LCgwLGkuZGVmYXVsdCkodC5oYW5kc2hha2VIaXN0b3J5KSsoMCxpLmRlZmF1bHQpKGEpLG8pfSkudGhlbihmdW5jdGlvbihlKXtTLmxvZygic2lnbmF0dXJlIHZhbGlkYXRpb24gcmVzdWx0ICIsZSk7dmFyIG49ci5jcnlwdG8uY29uY2F0UE1Td2l0aFJhbmRvbXModC5rZXlzLnByZW1hc3RlcktleSx0LmtleXMudG9SYW5kb20sdC5rZXlzLmZyb21SYW5kb20pO3JldHVybiByLmNyeXB0by5nZW5lcmF0ZU1hc3RlclNlY3JldChuLCJtZXNzYWdlSGlzdG9yaWMiK3Qua2V5cy50b1JhbmRvbSt0LmtleXMuZnJvbVJhbmRvbSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmtleXMubWFzdGVyS2V5PWUsci5jcnlwdG8uZ2VuZXJhdGVLZXlzKGUsImtleSBleHBhbnNpb24iK3Qua2V5cy50b1JhbmRvbSt0LmtleXMuZnJvbVJhbmRvbSl9KS50aGVuKGZ1bmN0aW9uKGUpe3Qua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoZVswXSksdC5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoZVsxXSksdC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleT1uZXcgVWludDhBcnJheShlWzJdKSx0LmtleXMuaHlwZXJ0eVRvSGFzaEtleT1uZXcgVWludDhBcnJheShlWzNdKSxzPXIuY3J5cHRvLmRlY29kZShwLml2KTt2YXIgbj1yLmNyeXB0by5kZWNvZGUocC5zeW1ldHJpY0VuY3J5cHRpb24pO3JldHVybiByLmNyeXB0by5kZWNyeXB0QUVTKHQua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5LG4scyl9KS50aGVuKGZ1bmN0aW9uKG4pewovLyBsb2cubG9nKCdkZWNyeXB0ZWREYXRhJywgZGVjcnlwdGVkRGF0YSk7CnQuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJDZXJ0aWZpY2F0ZT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsbitzKTt2YXIgaT1yLmNyeXB0by5kZWNvZGUocC5oYXNoKTtyZXR1cm4gZj1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsbitzKSxyLmNyeXB0by52ZXJpZnlITUFDKHQua2V5cy5oeXBlcnR5VG9IYXNoS2V5LGYsaSl9KS50aGVuKGZ1bmN0aW9uKG4pewovLyBsb2cubG9nKCdyZXN1bHQgb2YgaGFzaCB2ZXJpZmljYXRpb24gJywgdmVyaWZpZWRIYXNoKTsKdmFyIGk9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToicmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UifX07cmV0dXJuIHM9ci5jcnlwdG8uZ2VuZXJhdGVJVigpLGMuaXY9ci5jcnlwdG8uZW5jb2RlKHMpLGY9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChpLCJvayEiK3MsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyksci5jcnlwdG8uaGFzaEhNQUModC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleSxpKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGMuaGFzaD1yLmNyeXB0by5lbmNvZGUoZSksci5jcnlwdG8uZW5jcnlwdEFFUyh0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LCJvayEiLHMpfSkudGhlbihmdW5jdGlvbihvKXtjLnZhbHVlPXIuY3J5cHRvLmVuY29kZShvKTt2YXIgYT17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJyZWNlaXZlckZpbmlzaGVkTWVzc2FnZSIsdmFsdWU6YnRvYSgoMCxpLmRlZmF1bHQpKGMpKX19O3QuaGFuZHNoYWtlSGlzdG9yeS5yZWNlaXZlckZpbmlzaGVkTWVzc2FnZT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGEsIm9rISIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSx0LmF1dGhlbnRpY2F0ZWQ9ITAsbih7bWVzc2FnZTphLGNoYXRLZXlzOnR9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIF9kb0hhbmRTaGFrZVBoYXNlIGZyb20gc2VuZGVyQ2VydGlmaWNhdGUgZXJyb3I6ICIrZSl9KTticmVhaztjYXNlInJlY2VpdmVyRmluaXNoZWRNZXNzYWdlIjoKLy8gbG9nLmxvZygncmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UnKTsKdC5hdXRoZW50aWNhdGVkPSEwLGM9SlNPTi5wYXJzZShhdG9iKGUuYm9keS52YWx1ZSkpLHM9ci5jcnlwdG8uZGVjb2RlKGMuaXYpO3ZhciB5PXIuY3J5cHRvLmRlY29kZShjLnZhbHVlKTt1PXIuY3J5cHRvLmRlY29kZShjLmhhc2gpLHIuY3J5cHRvLmRlY3J5cHRBRVModC5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXkseSxzKS50aGVuKGZ1bmN0aW9uKGkpewovLyBsb2cubG9nKCdkZWNyeXB0ZWREYXRhJywgZGVjcnlwdGVkRGF0YSk7CnQuaGFuZHNoYWtlSGlzdG9yeS5yZWNlaXZlckZpbmlzaGVkTWVzc2FnZT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsaStzKTt2YXIgYT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUseStzKTtyLmNyeXB0by52ZXJpZnlITUFDKHQua2V5cy5oeXBlcnR5VG9IYXNoS2V5LGEsdSkudGhlbihmdW5jdGlvbihpKXsKLy8gbG9nLmxvZygnaGFzaCByZXN1bHQnLCByZXN1bHQpOwovLyBjaGVjayBpZiB0aGVyZSB3YXMgYW4gaW5pdGlhbCBtZXNzYWdlIHRoYXQgd2FzIGJsb2NrZWQgYW5kIHNlbmQgaXQKaWYodC5pbml0aWFsTWVzc2FnZSl7dmFyIGE9e3R5cGU6ImNyZWF0ZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5Ont2YWx1ZTp0LmluaXRpYWxNZXNzYWdlLmJvZHkudmFsdWV9fTtuKHttZXNzYWdlOmEsY2hhdEtleXM6dH0pfWVsc2Ugci5fc2VuZFJlcG9ydGVyU2Vzc2lvbktleShlLHQpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIF9kb0hhbmRTaGFrZVBoYXNlIGZyb20gcmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UgZXJyb3I6ICIrZSl9KX0pfSk7YnJlYWs7Y2FzZSJyZXBvcnRlclNlc3Npb25LZXkiOnZhciBoPUpTT04ucGFyc2UoYXRvYihlLmJvZHkudmFsdWUpKTt1PXIuY3J5cHRvLmRlY29kZShoLmhhc2gpLHM9ci5jcnlwdG8uZGVjb2RlKGguaXYpO3ZhciB2PXIuY3J5cHRvLmRlY29kZShoLnZhbHVlKSxnPXZvaWQgMCxiPXZvaWQgMCxtPXZvaWQgMCxfPXZvaWQgMDtTLmxvZygiW0lkZW50aXR5TW9kdWxlIHJlcG9ydGVyU2Vzc2lvbktleV0gLSBkZWNyeXB0QUVTOiAiLHQua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5LHYscyksci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSx2LHMpLnRoZW4oZnVuY3Rpb24obil7Zz1KU09OLnBhcnNlKG4pLGI9ci5jcnlwdG8uZGVjb2RlKGcudmFsdWUpLG09Zy5kYXRhT2JqZWN0VVJMO3ZhciBpPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxuK3MpO3JldHVybiByLmNyeXB0by52ZXJpZnlITUFDKHQua2V5cy5oeXBlcnR5VG9IYXNoS2V5LGksdSl9KS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdoYXNoIHN1Y2Nlc3NmdWxseSB2YWxpZGF0ZWQgJywgaGFzaFJlc3VsdCk7CnJldHVybiByLmRhdGFPYmplY3RTZXNzaW9uS2V5c1ttXT17c2Vzc2lvbktleTpiLGlzVG9FbmNyeXB0OiEwfSxyLnN0b3JhZ2VNYW5hZ2VyLnNldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIiwwLHIuZGF0YU9iamVjdFNlc3Npb25LZXlzKSxzPXIuY3J5cHRvLmdlbmVyYXRlSVYoKSxjLml2PXIuY3J5cHRvLmVuY29kZShzKSxyLmNyeXB0by5lbmNyeXB0QUVTKHQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksIm9rISEiLHMpfSkudGhlbihmdW5jdGlvbihuKXtfPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVyQWNrbm93bGVkZ2UifX0sYy52YWx1ZT1yLmNyeXB0by5lbmNvZGUobik7dmFyIGk9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChfLCJvayEhIitzLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pO3JldHVybiByLmNyeXB0by5oYXNoSE1BQyh0LmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5LGkpfSkudGhlbihmdW5jdGlvbihlKXt2YXIgbz1idG9hKCgwLGkuZGVmYXVsdCkoe3ZhbHVlOmMudmFsdWUsaGFzaDpyLmNyeXB0by5lbmNvZGUoZSksaXY6Yy5pdn0pKTtfLmJvZHkudmFsdWU9byxuKHttZXNzYWdlOl8sY2hhdEtleXM6dH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX2RvSGFuZFNoYWtlUGhhc2UgZnJvbSByZWNlaXZlckZpbmlzaGVkTWVzc2FnZSBlcnJvcjogIitlKX0pO2JyZWFrO2Nhc2UicmVjZWl2ZXJBY2tub3dsZWRnZSI6Uy5sb2coInJlY2VpdmVyQWNrbm93bGVkZ2UiKTt2YXIgUj1KU09OLnBhcnNlKGF0b2IoZS5ib2R5LnZhbHVlKSksdz1yLmNyeXB0by5kZWNvZGUoUi5oYXNoKTtzPXIuY3J5cHRvLmRlY29kZShSLml2KTt2YXIgTz1yLmNyeXB0by5kZWNvZGUoUi52YWx1ZSk7ci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxPLHMpLnRoZW4oZnVuY3Rpb24obil7dmFyIGk9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7cmV0dXJuIHIuY3J5cHRvLnZlcmlmeUhNQUModC5rZXlzLmh5cGVydHlUb0hhc2hLZXksaSx3KX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2hhc2hSZXN1bHQgJywgaGFzaFJlc3VsdCk7CnZhciByPXQuY2FsbGJhY2s7ciYmcigiaGFuZFNoYWtlRW5kIiksbigiaGFuZFNoYWtlRW5kIil9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfZG9IYW5kU2hha2VQaGFzZSBmcm9tIHJlY2VpdmVyQWNrbm93bGVkZ2UgZXJyb3I6ICIrZSl9KTticmVhaztkZWZhdWx0Om8oZSl9fSl9fSx7a2V5OiJfZmlsdGVyTWVzc2FnZVRvSGFzaCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybnt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx0bzplLnRvLGJvZHk6e2lkZW50aXR5OnJ8fGUuYm9keS5pZGVudGl0eSx2YWx1ZTp0fHxlLmJvZHkudmFsdWUsaGFuZHNoYWtlUGhhc2U6ZS5ib2R5LmhhbmRzaGFrZVBoYXNlfX19fSx7a2V5OiJfbmV3Q2hhdENyeXB0byIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT1yP2UudG86ZS5mcm9tLG89cj9lLmZyb206ZS50byxhPW4uZ2V0SWRlbnRpdHkodCk7cmV0dXJue2h5cGVydHlGcm9tOntoeXBlcnR5OmksdXNlcklEOmEubWVzc2FnZUluZm8udXNlclByb2ZpbGUudXNlcm5hbWUscHJpdmF0ZUtleTphLmtleVBhaXIucHJpdmF0ZSxwdWJsaWNLZXk6YS5rZXlQYWlyLnB1YmxpYyxhc3NlcnRpb246YS5hc3NlcnRpb24sbWVzc2FnZUluZm86YS5tZXNzYWdlSW5mb30saHlwZXJ0eVRvOntoeXBlcnR5Om8sdXNlcklEOnZvaWQgMCxwdWJsaWNLZXk6dm9pZCAwLGFzc2VydGlvbjp2b2lkIDB9LGtleXM6e2h5cGVydHlUb1Nlc3Npb25LZXk6dm9pZCAwLGh5cGVydHlGcm9tU2Vzc2lvbktleTp2b2lkIDAsaHlwZXJ0eVRvSGFzaEtleTp2b2lkIDAsaHlwZXJ0eUZyb21IYXNoS2V5OnZvaWQgMCx0b1JhbmRvbTp2b2lkIDAsZnJvbVJhbmRvbTp2b2lkIDAscHJlbWFzdGVyS2V5OnZvaWQgMCxtYXN0ZXJLZXk6dm9pZCAwfSxoYW5kc2hha2VIaXN0b3J5OntzZW5kZXJIZWxsbzp2b2lkIDAscmVjZWl2ZXJIZWxsbzp2b2lkIDAsc2VuZGVyQ2VydGlmaWNhdGU6dm9pZCAwLHJlY2VpdmVyRmluaXNoZWRNZXNzYWdlOnZvaWQgMH0saW5pdGlhbE1lc3NhZ2U6ZS5ib2R5Lmlnbm9yZT92b2lkIDA6ZSxjYWxsYmFjazplLmNhbGxiYWNrLGF1dGhlbnRpY2F0ZWQ6ITEsZGF0YU9iamVjdFVSTDplLmRhdGFPYmplY3RVUkx9fX0se2tleToiX3NlY29uZHNfc2luY2VfZXBvY2giLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpfX0se2tleToiX3BhcnNlTWVzc2FnZVVSTCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpO3JldHVybiB0Lmxlbmd0aDw9Nj90WzBdKyIvLyIrdFsyXSsiLyIrdFszXTp0WzBdKyIvLyIrdFsyXSsiLyIrdFszXSsiLyIrdFs0XX19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9tZXNzYWdlQnVzPWUsdC5hZGRHVUlMaXN0ZW5lcnMoKX19LHtrZXk6ImNvcmVEaXNjb3ZlcnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlRGlzY292ZXJ5fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29yZURpc2NvdmVyeT1lfX0se2tleToicmVnaXN0cnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWdpc3RyeX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3JlZ2lzdHJ5PWV9fV0pLElkZW50aXR5TW9kdWxlfSgpO3QuZGVmYXVsdD1PLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ2NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBJZGVudGl0eShlLHQpeygwLGkuZGVmYXVsdCkodGhpcyxJZGVudGl0eSk7dmFyIHI9dGhpcztyLmd1aWQ9ZSxyLnR5cGU9dCxyLmlkZW50aWZpZXJzTGlzdD17fX1yZXR1cm4oMCxhLmRlZmF1bHQpKElkZW50aXR5LFt7a2V5OiJhZGRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXtpZEFzc2VydGlvbjoiIixzZXJ2aWNlQWRkcmVzczoiIixhdXRoZW50aWNhdGlvbkRhdGE6IiIsYXV0aG9yaXNhdGlvbkRhdGE6IiIsdXNlclByb2ZpbGU6IiJ9O3QuaWRlbnRpZmllcnNMaXN0W2VdPXJ9fSx7a2V5OiJhZGRJZEFzc2VydGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxvPW5ldyB1KHQscixuKTtpLmlkQXNzZXJ0aW9uTGlzdC5wdXNoKG8pfX1dKSxJZGVudGl0eX0oKSx1PWZ1bmN0aW9uIElkQXNzZXJ0aW9uKGUsdCxyKXsoMCxpLmRlZmF1bHQpKHRoaXMsSWRBc3NlcnRpb24pO3ZhciBuPXRoaXM7bi5hc3NlcnRpb249ZSxuLmlkcD10LG4uc2NvcGU9cn07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSWRWYWxpZGF0aW9uKGUsdCl7KDAsaS5kZWZhdWx0KSh0aGlzLElkVmFsaWRhdGlvbik7dmFyIHI9dGhpcztyLmlkZW50aXR5PWUsci5jb250ZW50cz10fSgwLGEuZGVmYXVsdCkoSWRWYWxpZGF0aW9uLFt7a2V5OiJ2YWxpZGF0ZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7fX1dKX0oKTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxMiksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQ3J5cHRvKCl7KDAsYS5kZWZhdWx0KSh0aGlzLENyeXB0byl9LyoqCiAgKiBlbmNvZGUgYSBieXRlQXJyYXkgdmFsdWUgaW4gYmFzZSA2NCBlbmNvZGUKICAqIEBwYXJhbSAgIHtieXRlQXJyYXl9ICAgIHZhbHVlICAgIGJ5dGVBcnJheSB2YWx1ZQogICogQHJldHVybiAge3N0cmluZ30gICBlbmNvZGVkIHZhbHVlCiAgKi8KcmV0dXJuKDAsdS5kZWZhdWx0KShDcnlwdG8sW3trZXk6ImVuY29kZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGJ0b2EoZSl9fSx7a2V5OiJkZWNvZGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgVWludDhBcnJheShKU09OLnBhcnNlKCJbIithdG9iKGUpKyJdIikpfX0se2tleToiZW5jcnlwdFJTQSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7ci5faW1wb3J0UlNBZW5jcnlwdEtleShuZXcgVWludDhBcnJheShlKSkudGhlbihmdW5jdGlvbihlKXtjcnlwdG8uc3VidGxlLmVuY3J5cHQoe25hbWU6IlJTQS1PQUVQIn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnQpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhbiBBcnJheUJ1ZmZlciBjb250YWluaW5nIHRoZSBlbmNyeXB0ZWQgZGF0YQovLyBjb25zb2xlLmxvZygnY3J5cHRvLWVuY3J5cHRSU0EnLCBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpKTsKbihuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gY29uc29sZS5sb2coJ2NyeXB0by1lbmNyeXB0UlNBJywgZXJyKTsKaShlKX0pfSl9KX19LHtrZXk6ImRlY3J5cHRSU0EiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihuLGkpe3IuX2ltcG9ydFJTQWRlY3J5cHRLZXkoZSkudGhlbihmdW5jdGlvbihlKXtjcnlwdG8uc3VidGxlLmRlY3J5cHQoe25hbWU6IlJTQS1PQUVQIn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnQpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZSk7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZGVjcnlwdFJTQScsIGRlY3J5cHRlZERhdGEpOwpuKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZGVjcnlwdFJTQScsIGVycik7CmkoZSl9KX0pfSl9fSx7a2V5OiJzaWduUlNBIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXtyLl9pbXBvcnRSU0FzaWduS2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7Y3J5cHRvLnN1YnRsZS5zaWduKHtuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQpyLl91dGY4RW5jb2RlKHQpKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgc2lnbmF0dXJlCi8vIGNvbnNvbGUubG9nKCdjcnlwdG8tc2lnblJTQScsIG5ldyBVaW50OEFycmF5KHNpZ25hdHVyZSkpOwpuKG5ldyBVaW50OEFycmF5KGUpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBjb25zb2xlLmxvZygnY3J5cHRvLXNpZ25SU0EnLCBlcnIpOwppKGUpfSl9KX0pfX0se2tleToidmVyaWZ5UlNBIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihpLG8pe24uX2ltcG9ydFJTQXZlcmlmeUtleShlKS50aGVuKGZ1bmN0aW9uKGUpe2NyeXB0by5zdWJ0bGUudmVyaWZ5KHtuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQpyLC8vQXJyYXlCdWZmZXIgb2YgdGhlIHNpZ25hdHVyZQpuLl91dGY4RW5jb2RlKHQpKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBib29sZWFuIG9uIHdoZXRoZXIgdGhlIHNpZ25hdHVyZSBpcyB0cnVlIG9yIG5vdAovLyBjb25zb2xlLmxvZygnY3J5cHRvLXZlcmlmeVJTQScsIGlzdmFsaWQpOwppKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tdmVyaWZ5UlNBJywgZXJyKTsKbyhlKX0pfSl9KX19LHtrZXk6ImVuY3J5cHRBRVMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7bi5faW1wb3J0QUVTa2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7Y3J5cHRvLnN1YnRsZS5lbmNyeXB0KHtuYW1lOiJBRVMtQ0JDIiwKLy9Eb24ndCByZS11c2UgaW5pdGlhbGl6YXRpb24gdmVjdG9ycyEKLy9BbHdheXMgZ2VuZXJhdGUgYSBuZXcgaXYgZXZlcnkgdGltZSB5b3VyIGVuY3J5cHQhCml2OnJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQpuLl91dGY4RW5jb2RlKHQpKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgZW5jcnlwdGVkIGRhdGEKLy8gY29uc29sZS5sb2coJ2NyeXB0by1lbmNyeXB0QUVTJywgbmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSk7CmkobmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZW5jcnlwdEFFUycsIGVycik7Cm8oZSl9KX0pfSl9fSx7a2V5OiJkZWNyeXB0QUVTIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihpLG8pe24uX2ltcG9ydEFFU2tleShlKS50aGVuKGZ1bmN0aW9uKGUpe2NyeXB0by5zdWJ0bGUuZGVjcnlwdCh7bmFtZToiQUVTLUNCQyIsaXY6cn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnQpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bi5fdXRmOERlY29kZShuZXcgVWludDhBcnJheShlKSk7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZGVjcnlwdEFFUycsIGRlY29kZWREYXRhKTsKaSh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBjb25zb2xlLmxvZygnY3J5cHRvLWRlY3J5cHRBRVMnLCBlcnIpOwpvKGUpfSl9KX0pfX0se2tleToiaGFzaEhNQUMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihuLGkpe3IuX2ltcG9ydEhNQUNrZXkoZSkudGhlbihmdW5jdGlvbihlKXtjcnlwdG8uc3VidGxlLnNpZ24oe25hbWU6IkhNQUMifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKci5fdXRmOEVuY29kZSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy8gY29uc29sZS5sb2coJ2NyeXB0by1oYXNoSE1BQycsIHNpZ25hdHVyZSk7Ci8vcmV0dXJucyBhbiBBcnJheUJ1ZmZlciBjb250YWluaW5nIHRoZSBzaWduYXR1cmUKbihuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gY29uc29sZS5sb2coJ2NyeXB0by1oYXNoSE1BQycsIGVycik7CmkoZSl9KX0pfSl9fSx7a2V5OiJ2ZXJpZnlITUFDIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihpLG8pe24uX2ltcG9ydEhNQUNrZXkoZSkudGhlbihmdW5jdGlvbihlKXtjcnlwdG8uc3VidGxlLnZlcmlmeSh7bmFtZToiSE1BQyJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQpyLC8vQXJyYXlCdWZmZXIgb2YgdGhlIHNpZ25hdHVyZQpuLl91dGY4RW5jb2RlKHQpKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBib29sZWFuIG9uIHdoZXRoZXIgdGhlIHNpZ25hdHVyZSBpcyB0cnVlIG9yIG5vdAovLyBjb25zb2xlLmxvZygnY3J5cHRvLXZlcmlmeUhNQUMnLCBpc3ZhbGlkKTsKZT9pKGUpOm8oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKGUpfSl9KX0pfX0se2tleToiZ2VuZXJhdGVSU0FLZXlQYWlyIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7Y3J5cHRvLnN1YnRsZS5nZW5lcmF0ZUtleSh7bmFtZToiUlNBLVBTUyIsbW9kdWx1c0xlbmd0aDoyMDQ4LC8vY2FuIGJlIDEwMjQsIDIwNDgsIG9yIDQwOTYKcHVibGljRXhwb25lbnQ6bmV3IFVpbnQ4QXJyYXkoWzEsMCwxXSksaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsic2lnbiIsInZlcmlmeSJdKS50aGVuKGZ1bmN0aW9uKG4pewovL3JldHVybnMgYSBrZXlwYWlyIG9iamVjdAovLyBjb25zb2xlLmxvZyhrZXkpOwpjcnlwdG8uc3VidGxlLmV4cG9ydEtleSgic3BraSIsLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKbi5wdWJsaWNLZXkpLnRoZW4oZnVuY3Rpb24odCl7Ci8vcmV0dXJucyB0aGUgZXhwb3J0ZWQga2V5IGRhdGEKLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKcmV0dXJuIGUucHVibGljPW5ldyBVaW50OEFycmF5KHQpLGNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCJwa2NzOCIsbi5wcml2YXRlS2V5KX0pLnRoZW4oZnVuY3Rpb24ocil7ZS5wcml2YXRlPW5ldyBVaW50OEFycmF5KHIpLAovLyBjb25zb2xlLmxvZygnY3J5cHRvLWdlbmVyYXRlUlNBS2V5UGFpcicsIGtleVBhaXIpOwp0KGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSl9fSx7a2V5OiJnZW5lcmF0ZUlWIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPW5ldyBVaW50OEFycmF5KDE2KTtyZXR1cm4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhlKSxlfX0se2tleToiZ2VuZXJhdGVSYW5kb20iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBVaW50OEFycmF5KDMyKTtjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHQpOwovLyBhZGQgaW4gdGhlIGZpcnN0IDQgYnl0ZXMgb2YgdGhlIGFycmF5IHRoZSBieXRlcyBleHRyYWN0ZWQgcHJldmlvdXNseTsKZm9yKHZhciByPURhdGUubm93KCksbj1lLl91dGY4RW5jb2RlKHIpLGk9bi5zbGljZShuLmxlbmd0aC00LG4ubGVuZ3RoKSxvPTA7bzw0O28rKyl0W29dPWlbb107cmV0dXJuIHR9fSx7a2V5OiJnZW5lcmF0ZVBNUyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgVWludDhBcnJheSg0OCk7cmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZSksZX19LHtrZXk6ImdlbmVyYXRlTWFzdGVyU2VjcmV0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgbz1uZXcgVWludDhBcnJheSg0OCksYT10O3IuX2RpZ2VzdChlKS50aGVuKGZ1bmN0aW9uKGUpe3IuaGFzaEhNQUMoZSxhKS50aGVuKGZ1bmN0aW9uKHQpewovL2NvcHkgdGhlIGZpcnN0IDMyIGJ5dGVzIGludG8gdGhlIGtleQpmb3IodmFyIG49MDtuPDMyO24rKylvW25dPXRbbl07cmV0dXJuIHIuaGFzaEhNQUMoZSxhK3QpfSkudGhlbihmdW5jdGlvbihlKXsKLy9jb3B5IHRoZSBmaXJzdCAxNiBieXRlcyB0byB0aGUga2V5IHJlbWFpbmluZyAxNiBieXRlcwpmb3IodmFyIHQ9MDt0PDE2O3QrKylvW3QrMzJdPWVbdF07Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVNYXN0ZXJTZWNyZXQnLCBrZXkpOwpuKG8pfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVNYXN0ZXJTZWNyZXQnLCBlcnIpOwppKGUpfSl9KX0pfX0se2tleToiZ2VuZXJhdGVLZXlzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgbz1bXSxhPXQ7Ci8vIGl0ZXJhdGUgNCB0aW1lcyB0byBvYnRhaW4gYSAxMDI0IGtleSBzaXplCnIuaGFzaEhNQUMoZSxhKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBvLnB1c2godCksci5oYXNoSE1BQyhlLGErdCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBvLnB1c2godCksci5oYXNoSE1BQyhlLGErdCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBvLnB1c2godCksci5oYXNoSE1BQyhlLGErdCl9KS50aGVuKGZ1bmN0aW9uKGUpe28ucHVzaChlKSwKLy8gY29uc29sZS5sb2coJ2NyeXB0by1nZW5lcmF0ZUtleXMnLCBrZXkpOwpuKG8pfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVLZXlzJywgZXJyKTsKaShlKX0pfSl9fSx7a2V5OiJfaW1wb3J0UlNBc2lnbktleSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtjcnlwdG8uc3VidGxlLmltcG9ydEtleSgicGtjczgiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCmUsey8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwpuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsic2lnbiJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKLy8gY29uc29sZS5sb2coJ2NyeXB0by1faW1wb3J0UlNBc2lnbktleScsIHByaXZhdGVLZXkpOwp0KGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSl9fSx7a2V5OiJfaW1wb3J0UlNBdmVyaWZ5S2V5Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJzcGtpIiwvL2NhbiBiZSAnandrJyAocHVibGljIG9yIHByaXZhdGUpLCAnc3BraScgKHB1YmxpYyBvbmx5KSwgb3IgJ3BrY3M4JyAocHJpdmF0ZSBvbmx5KQplLHsvL3RoZXNlIGFyZSB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUiLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbInZlcmlmeSJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKLy8gY29uc29sZS5sb2coJ2NyeXB0by1faW1wb3J0UlNBdmVyaWZ5S2V5JywgcHVibGljS2V5KTsKdChlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pfX0se2tleToiX2ltcG9ydFJTQWVuY3J5cHRLZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7Y3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoInNwa2kiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCmUsey8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwpuYW1lOiJSU0EtT0FFUCIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsiZW5jcnlwdCJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKLy8gY29uc29sZS5sb2coJ2NyeXB0by1faW1wb3J0UlNBZW5jcnlwdEtleScsIHB1YmxpY0tleSk7CnQoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtyKGUpfSl9KX19LHtrZXk6Il9pbXBvcnRSU0FkZWNyeXB0S2V5Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJwa2NzOCIsLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKZSx7Ly90aGVzZSBhcmUgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IlJTQS1PQUVQIixoYXNoOntuYW1lOiJTSEEtMjU2In19LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJkZWNyeXB0Il0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhIHB1YmxpY0tleSAob3IgcHJpdmF0ZUtleSBpZiB5b3UgYXJlIGltcG9ydGluZyBhIHByaXZhdGUga2V5KQovLyBjb25zb2xlLmxvZygnY3J5cHRvLV9pbXBvcnRSU0FkZWNyeXB0S2V5JywgcHJpdmF0ZUtleSk7CnQoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtyKGUpfSl9KX19LHtrZXk6ImNvbmNhdFBNU3dpdGhSYW5kb21zIix2YWx1ZTpmdW5jdGlvbihlLHQscil7Ci8vIGFkZCBQcmVtYXN0ZXJLZXkKZm9yKHZhciBuPW5ldyBVaW50OEFycmF5KGUubGVuZ3RoK3QubGVuZ3RoK3IubGVuZ3RoKSxpPTA7aTxlLmxlbmd0aDtpKyspbltpXT1lW2ldOwovL2FkZCB0byByYW5kb20KZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKyspbltvK2UubGVuZ3RoXT1lW29dOwovL2FkZCBmcm9tIHJhbmRvbQpmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKyluW2ErZS5sZW5ndGgrdC5sZW5ndGhdPWVbYV07cmV0dXJuIG59fSx7a2V5OiJfZ2VuZXJhdGUyNTZiaXRLZXkiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoMzIpO3JldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGUpLGV9fSx7a2V5OiJfaW1wb3J0SE1BQ2tleSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2RpZ2VzdChlKS50aGVuKGZ1bmN0aW9uKGUpe2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLC8vY2FuIGJlICdqd2snIG9yICdyYXcnCmUsey8vdGhpcyBpcyB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiSE1BQyIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9LC8vY2FuIGJlICdTSEEtMScsICdTSEEtMjU2JywgJ1NIQS0zODQnLCBvciAnU0hBLTUxMicKbGVuZ3RoOjI1Nn0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbInNpZ24iLCJ2ZXJpZnkiXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIHRoZSBzeW1tZXRyaWMga2V5Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tX2ltcG9ydEhNQUNrZXknLCBrZXkpOwpyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pfSl9KX19LHtrZXk6Il9kaWdlc3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7Y3J5cHRvLnN1YnRsZS5kaWdlc3Qoe25hbWU6IlNIQS0yNTYifSxlKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgdGhlIGhhc2ggYXMgYW4gQXJyYXlCdWZmZXIKLy8gY29uc29sZS5sb2coJ2NyeXB0by1kaWdlc3QnLCBuZXcgVWludDhBcnJheShoYXNoKSk7CnQobmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSl9fSx7a2V5OiJfaW1wb3J0QUVTa2V5Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLC8vY2FuIGJlICdqd2snIG9yICdyYXcnCmUsey8vdGhpcyBpcyB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiQUVTLUNCQyJ9LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJlbmNyeXB0IiwiZGVjcnlwdCJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgdGhlIHN5bW1ldHJpYyBrZXkKLy8gY29uc29sZS5sb2coJ2NyeXB0by1pbXBvcnRBRVNrZXknLCBrZXkpOwp0KGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSl9fSx7a2V5OiJfdXRmOEVuY29kZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBUZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUoZSl9fSx7a2V5OiJfdXRmOERlY29kZSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBUZXh0RGVjb2RlcigidXRmLTgiKS5kZWNvZGUoZSl9fV0pLENyeXB0b30oKTt0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obiksbz1mdW5jdGlvbiBHdWlGYWtlKGUsdCl7KDAsaS5kZWZhdWx0KSh0aGlzLEd1aUZha2UpO3ZhciByPXRoaXM7ci5fdXJsPWUsci5fd2FpdFRpbWU9MWU0LHIuX21lc3NhZ2VCdXM9dCxyLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHIuX3VybCxmdW5jdGlvbihlKXtpZihlLmhhc093blByb3BlcnR5KCJ0eXBlIikmJiJjcmVhdGUiPT09ZS50eXBlJiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInZhbHVlIikmJmUuYm9keS52YWx1ZS5oYXNPd25Qcm9wZXJ0eSgiaWRlbnRpdGllcyIpJiZlLmJvZHkudmFsdWUuaGFzT3duUHJvcGVydHkoImlkcHMiKSl7dmFyIHQ9ZS5ib2R5LnZhbHVlLmlkZW50aXRpZXMsbj1lLmJvZHkudmFsdWUuaWRwcyxpPXZvaWQgMDtpPXZvaWQgMCE9PXRbMF0/e3R5cGU6ImlkZW50aXR5Iix2YWx1ZTp0WzBdLGNvZGU6MjAwfTp7dHlwZToiaWRwIix2YWx1ZTpuWzBdLmRvbWFpbixjb2RlOjIwMH07dmFyIG89e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTppfTsKLy8gdG8gdGVzdCBvbiB0aGUgaWRlbnRpdHkgc2lkZSB0aGUgbGlzdGVuZXIgd2l0aG91dCB0aGUgdGltZW91dAovLyBjYW4gcmVwcmVzZW50IHRoZSB0aW1lIHRoZSB1c2VyIHRha2VzIHRvIGNob29zZSBhbmQgaWRlbnRpdHkKIndhaXQiPT09ZS5ib2R5LnZhbHVlP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfSxyLl93YWl0VGltZSk6ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvKX19KX07dC5kZWZhdWx0PW8sZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDExKSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1yKDQ3MCksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig0NzEpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoNDcyKSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1yKDE1KSxiPWYuZ2V0TG9nZ2VyKCJQRVAiKSxtPWZ1bmN0aW9uKCl7LyoqCiAgKiBDcmVhdGVzIGEgUG9saWN5IEVuZm9yY2VtZW50IFBvaW50IChQRVApIGluc3RhbmNlCiAgKiBAcGFyYW0gICAge09iamVjdH0gICAgY29udGV4dAogICovCmZ1bmN0aW9uIFBFUChlKXsoMCxhLmRlZmF1bHQpKHRoaXMsUEVQKTt2YXIgdD10aGlzO3QucGRwPW5ldyB5LmRlZmF1bHQoZSksdC5hY3Rpb25zU2VydmljZT1uZXcgZC5kZWZhdWx0KGUpLHQuY29udGV4dD1lLGUucGVwPXQsCi8vVE9ETyBzaG91bGQgYmUgYWRkZWQgYSB0cmlnZ2VyIHRvIHZlcmlmeSB3aGVuIHRoZSBsb2FkQ29uZmlndXJhdGlvbnMgaXMgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZAplLmxvYWRDb25maWd1cmF0aW9ucygpfS8qKgogICogcmV0dXJuIHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMKICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKFBFUCxbe2tleToiYWRkR1VJTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5jb250ZXh0Lm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoZS5jb250ZXh0LnBlcFVSTCxmdW5jdGlvbih0KXt2YXIgcj10LmJvZHkubWV0aG9kLG49dm9pZCAwO2lmKCJhZGRUb0dyb3VwIj09PXIpe3ZhciBpPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lLG89dC5ib2R5LnBhcmFtcy51c2VyRW1haWw7bj1lLmNvbnRleHQuYWRkVG9Hcm91cChpLG8pfWVsc2UgaWYoImNyZWF0ZUdyb3VwIj09PXIpe3ZhciBhPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lO249ZS5jb250ZXh0LmNyZWF0ZUdyb3VwKGEpfWVsc2UgaWYoImFkZFBvbGljeSI9PT1yKXt2YXIgcz10LmJvZHkucGFyYW1zLnNvdXJjZSx1PXQuYm9keS5wYXJhbXMua2V5LGM9dC5ib2R5LnBhcmFtcy5wb2xpY3ksZj10LmJvZHkucGFyYW1zLmNvbWJpbmluZ0FsZ29yaXRobTtuPWUuYWRkUG9saWN5KHMsdSxjLGYpfWVsc2UgaWYoImRlbGV0ZUdyb3VwIj09PXIpe3ZhciBsPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lO249ZS5jb250ZXh0LmRlbGV0ZUdyb3VwKGwpfWVsc2UgaWYoInJlbW92ZVBvbGljeSI9PT1yKXt2YXIgZD10LmJvZHkucGFyYW1zLnNvdXJjZSxwPXQuYm9keS5wYXJhbXMua2V5O249ZS5yZW1vdmVQb2xpY3koZCxwKX1lbHNlIGlmKCJzYXZlUG9saWNpZXMiPT09cil7dmFyIHk9dC5ib2R5LnBhcmFtcy5zb3VyY2U7bj1lLmNvbnRleHQuc2F2ZVBvbGljaWVzKHkpfWVsc2UgaWYoInVzZXJQb2xpY2llcyI9PT1yKW49ZS5jb250ZXh0LnVzZXJQb2xpY2llcztlbHNlIGlmKCJhY3RpdmVVc2VyUG9saWN5Ij09PXIpe3ZhciBoPXQuYm9keS5wYXJhbXMudXNlclBvbGljeTtoJiYoZS5jb250ZXh0LmFjdGl2ZVVzZXJQb2xpY3k9aCksbj1lLmNvbnRleHQuYWN0aXZlVXNlclBvbGljeX1lbHNlIGlmKCJ1c2VyUG9saWN5Ij09PXIpe3ZhciB2PXQuYm9keS5wYXJhbXMua2V5O249ZS5jb250ZXh0LnVzZXJQb2xpY2llc1t2XX1lbHNlInNhdmVBY3RpdmVQb2xpY3kiPT09cj9uPWUuY29udGV4dC5zYXZlQWN0aXZlUG9saWN5KCk6ImdldE15RW1haWxzIj09PXI/bj1lLmNvbnRleHQuZ2V0TXlFbWFpbHMoKToiZ2V0TXlIeXBlcnRpZXMiPT09cj9uPWUuY29udGV4dC5nZXRNeUh5cGVydGllcygpOiJncm91cHMiPT09cj9uPWUuY29udGV4dC5ncm91cHM6ImdldEdyb3Vwc05hbWVzIj09PXImJihuPWUuY29udGV4dC5nZXRHcm91cHNOYW1lcygpKTtpZigicmVtb3ZlRnJvbUdyb3VwIj09PXIpe3ZhciBnPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lLGI9dC5ib2R5LnBhcmFtcy51c2VyRW1haWw7bj1lLmNvbnRleHQucmVtb3ZlRnJvbUdyb3VwKGcsYil9dmFyIG09e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOm4sY29kZToyMDB9LF89e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTptfTtlLmNvbnRleHQubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShfKX0pfX0se2tleToiYWRkUG9saWN5Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoInNvdXJjZSBpcyBub3QgZGVmaW5lZCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigia2V5IGlzIG5vdCBkZWZpbmVkIik7c3dpdGNoKHZvaWQgMD09PXI/cj1uZXcgdi5kZWZhdWx0KHQsW10sW10sbik6ciBpbnN0YW5jZW9mIHYuZGVmYXVsdHx8KHI9bmV3IHYuZGVmYXVsdChyLmtleSxyLnJ1bGVzLHIuYWN0aW9ucyxyLmNvbWJpbmluZ0FsZ29yaXRobSkpLGUpe2Nhc2UiU0VSVklDRV9QUk9WSURFUiI6dGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcyhlLHIsdCk7YnJlYWs7Y2FzZSJVU0VSIjp0aGlzLmNvbnRleHQudXNlclBvbGljaWVzW3RdPXIsdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcyhlKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJVbmtub3duIHBvbGljeSBzb3VyY2U6ICIrZSl9fX0se2tleToiYXV0aG9yaXNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOwovLyBsb2cubG9nKCdbUG9saWN5LlBFUCBBdXRob3Jpc2VdICcsIG1lc3NhZ2UpOwovLyBsb2cubG9nKG1lc3NhZ2UpOwppZighZSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UgaXMgbm90IGRlZmluZWQiKTtpZighZS5mcm9tKXRocm93IG5ldyBFcnJvcigibWVzc2FnZS5mcm9tIGlzIG5vdCBkZWZpbmVkIik7aWYoIWUudG8pdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlLnRvIGlzIG5vdCBkZWZpbmVkIik7aWYoIWUudHlwZSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UudHlwZSBpcyBub3QgZGVmaW5lZCIpO3JldHVybiBlLmJvZHk9ZS5ib2R5fHx7fSxuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5ib2R5PWUuYm9keXx8e307dmFyIGk9dCxvPXZvaWQgMDtpZihpLl9pc1RvVmVyaWZ5KGUpKXt2YXIgYT1pLl9pc0luY29taW5nTWVzc2FnZShlKTtpLmNvbnRleHQucHJlcGFyZUZvckV2YWx1YXRpb24oZSxhKS50aGVuKGZ1bmN0aW9uKGUpe289aS5wZHAuZXZhbHVhdGVQb2xpY2llcyhlLGEpLCJOb3QgQXBwbGljYWJsZSI9PT1vJiYobz1pLmNvbnRleHQuZGVmYXVsdEJlaGF2aW91cixlLmJvZHkuYXV0aD0hMSksaS5hY3Rpb25zU2VydmljZS5lbmZvcmNlUG9saWNpZXMoZSxhKS50aGVuKGZ1bmN0aW9uKHQpe2Zvcih2YXIgcyBpbiB0KWU9dFtzXSxpLmNvbnRleHQucHJlcGFyZVRvRm9yd2FyZChlLGEsbykudGhlbihmdW5jdGlvbihlKXtpZihvKS8qICBpZiAoaXNJbmNvbWluZyAmJiBtZXNzYWdlLmJvZHkuaWRlbnRpdHkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1lc3NhZ2UuYm9keS5pZGVudGl0eS5hc3NlcnRpb247CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXNzYWdlLmJvZHkuaWRlbnRpdHkuZXhwaXJlczsKICAgICAgICAgICAgICAgICAgICAgIH0gKi8KZS5ib2R5LmF1dGg9dm9pZCAwPT09ZS5ib2R5LmF1dGh8fGUuYm9keS5hdXRoLHIoZSk7ZWxzZXt2YXIgdD17Ym9keTp7Y29kZTo0MDMsZGVzY3JpcHRpb246IkJsb2NrZWQgYnkgcG9saWN5In0sZnJvbTplLnRvLHRvOmUuZnJvbSx0eXBlOiJyZXNwb25zZSJ9O24odCl9fSxmdW5jdGlvbihlKXtuKGUpfSl9LGZ1bmN0aW9uKGUpe24oZSl9KX0sZnVuY3Rpb24oZSl7bihlKX0pfWVsc2UgaWYobz1pLmNvbnRleHQuZGVmYXVsdEJlaGF2aW91cillLmJvZHkuYXV0aD0hMSxyKGUpO2Vsc2V7dmFyIHM9e2JvZHk6e2NvZGU6NDAzLGRlc2NyaXB0aW9uOiJCbG9ja2VkIGJ5IHBvbGljeSJ9LGZyb206ZS50byx0bzplLmZyb20sdHlwZToicmVzcG9uc2UifTtuKHMpfX0pfX0se2tleToiYXV0aG9yaXNlU3luYyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwO2lmKGUuYm9keT1lLmJvZHl8fHt9LHRoaXMuX2lzVG9WZXJpZnkoZSkpe3ZhciByPXRoaXMuX2lzSW5jb21pbmdNZXNzYWdlKGUpO3JldHVybiBlPXRoaXMuY29udGV4dC5wcmVwYXJlRm9yRXZhbHVhdGlvbihlLHIpLHQ9dGhpcy5wZHAuZXZhbHVhdGVQb2xpY2llcyhlLHIpLCJOb3QgQXBwbGljYWJsZSI9PT10JiYodD10aGlzLmNvbnRleHQuZGVmYXVsdEJlaGF2aW91cixlLmJvZHkuYXV0aD0hMSksdGhpcy5hY3Rpb25zU2VydmljZS5lbmZvcmNlUG9saWNpZXMoZSxyKSxlPXRoaXMuY29udGV4dC5wcmVwYXJlVG9Gb3J3YXJkKGUscix0KSwhIXQmJihlLmJvZHkuYXV0aD12b2lkIDA9PT1lLmJvZHkuYXV0aHx8ZS5ib2R5LmF1dGgsITApfXJldHVybiEhKHQ9dGhpcy5jb250ZXh0LmRlZmF1bHRCZWhhdmlvdXIpJiYoZS5ib2R5LmF1dGg9ITEsITApfX0se2tleToiX2lzSW5jb21pbmdNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD12b2lkIDA7Ci8vVE9ETzogdGhpcyBzdWJzY3JpYmVyIHZhbGlkYXRpb24gc2hvdWxkIG5vdCBleGlzdCwgYmVjYXVzZSBpcyBvdXRkYXRlZAovL1RPRE86IHRoZSBzeW5jaGVyIGFuZCBzeW5jaGVyIG1hbmFnZXIgbm90IGZvbGxvd2luZyB0aGUgY29ycmVjdCBzcGVjOwovL1RPRE86IHRoaXMgc3Vic2NyaWJlciB2YWxpZGF0aW9uIHNob3VsZCBub3QgZXhpc3QsIGJlY2F1c2UgaXMgb3V0ZGF0ZWQKLy9UT0RPOiB0aGUgc3luY2hlciBhbmQgc3luY2hlciBtYW5hZ2VyIG5vdCBmb2xsb3dpbmcgdGhlIGNvcnJlY3Qgc3BlYzsKcmV0dXJuImZvcndhcmQiPT09ZS50eXBlPyhiLmluZm8oIltQRVAgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLnR5cGU6ICIsZS50eXBlKSx0PWUuYm9keS5mcm9tKTplLmJvZHkuaGFzT3duUHJvcGVydHkoInNvdXJjZSIpJiZlLmJvZHkuc291cmNlPyhiLmluZm8oIltQRVAgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLmJvZHkuc291cmNlOiAiLGUuYm9keS5zb3VyY2UpLHQ9ZS5ib2R5LnNvdXJjZSk6ZS5ib2R5Lmhhc093blByb3BlcnR5KCJzdWJzY3JpYmVyIikmJmUuYm9keS5zdWJzY3JpYmVyPyhiLmluZm8oIltQRVAgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLmJvZHkuc3Vic2NyaWJlcjogIixlLmJvZHkuc3Vic2NyaWJlciksdD1lLmJvZHkuc3Vic2NyaWJlcik6ZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXBvcnRlciIpJiZlLmJvZHkucmVwb3J0ZXI/KGIuaW5mbygiW1BFUCAtIGlzSW5jb21pbmdNZXNzYWdlXSAtIG1lc3NhZ2UuYm9keS5yZXBvcnRlcjogIixlLmJvZHkucmVwb3J0ZXIpLHQ9ZS5ib2R5LnJlcG9ydGVyKTooYi5pbmZvKCJbUEVQIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gbWVzc2FnZS5mcm9tICIsZS5mcm9tKSx0PWUuZnJvbSksYi5pbmZvKCJbUEVQIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gY2hlY2sgaWYgaXNMb2NhbDogIix0KSwhdGhpcy5jb250ZXh0LmlzTG9jYWwodCl9fSx7a2V5OiJfaXNUb1ZlcmlmeSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9WyJkb21haW4iLCJkb21haW4taWRwIiwiZ2xvYmFsIiwiaHlwZXJ0eS1ydW50aW1lIiwicnVudGltZSJdLHI9ZS5mcm9tLnNwbGl0KCI6Ly8iKSxuPXJbMF0saT1lLnRvLnNwbGl0KCI6Ly8iKSxvPWlbMF0sYT1lLmZyb20scz1lLnRvOwovLyBTaWduYWxsaW5nIG1lc3NhZ2VzIGJldHdlZW4gUDJQIFN0dWJzIGRvbid0IGhhdmUgdG8gYmUgdmVyaWZpZWQuIEZGUwovLyBoYWNrIHRvIGRpc2FibGUgSWRlbnRpdHkgdmVyaWZpY2F0aW9uIGZvciBtZXNzYWdlcyBjb21pbmcgZnJvbSBsZWdhY3kgZG9tYWlucyB3aGlsZSBzb2x1dGlvbiBpcyBub3QgaW1wbGVtZW50ZWQKcmV0dXJuIGUuYm9keSYmZS5ib2R5LnNvdXJjZSYmKGE9ZS5ib2R5LnNvdXJjZSksZS5ib2R5JiZlLmJvZHkuc3Vic2NyaWJlciYmKGE9ZS5ib2R5LnN1YnNjcmliZXIpLC0xPT09YS5pbmRleE9mKCIvcDJwaGFuZGxlci8iKSYmLTE9PT1hLmluZGV4T2YoIi9wMnByZXF1ZXN0ZXIvIikmJi0xPT09cy5pbmRleE9mKCIvcDJwaGFuZGxlci8iKSYmLTE9PT1zLmluZGV4T2YoIi9wMnByZXF1ZXN0ZXIvIikmJighdGhpcy5jb250ZXh0LmlzSW50ZXJ3b3JraW5nUHJvdG9TdHViKGEpJiYoIShlLmZyb209PT1ufHxlLnRvPT09b3x8InJlYWQiPT09ZS50eXBlfHwicmVzcG9uc2UiPT09ZS50eXBlfHwoMCxnLmlzSHlwZXJ0eVVSTCkoZS5mcm9tKSYmImRlbGV0ZSI9PT1lLnR5cGUpJiYoLTE9PT10LmluZGV4T2Yobil8fC0xPT09dC5pbmRleE9mKG8pKSkpfX0se2tleToicmVtb3ZlUG9saWN5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBFcnJvcigic291cmNlIGlzIG5vdCBkZWZpbmVkIik7aWYoIioiIT09ZSYmIXQpdGhyb3cgbmV3IEVycm9yKCJrZXkgaXMgbm90IGRlZmluZWQiKTtzd2l0Y2goZSl7Y2FzZSIqIjp0aGlzLmNvbnRleHQuc2VydmljZVByb3ZpZGVyUG9saWN5PXt9LHRoaXMuY29udGV4dC51c2VyUG9saWNpZXM9e30sdGhpcy5jb250ZXh0LmFjdGl2ZVVzZXJQb2xpY3k9dm9pZCAwLHRoaXMuY29udGV4dC5zYXZlUG9saWNpZXMoIlVTRVIiKSx0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKCJTRVJWSUNFX1BST1ZJREVSIiksdGhpcy5jb250ZXh0LnNhdmVBY3RpdmVQb2xpY3koKTticmVhaztjYXNlIlNFUlZJQ0VfUFJPVklERVIiOmRlbGV0ZSB0aGlzLmNvbnRleHQuc2VydmljZVByb3ZpZGVyUG9saWN5W3RdLHRoaXMuY29udGV4dC5zYXZlUG9saWNpZXMoKTticmVhaztjYXNlIlVTRVIiOmRlbGV0ZSB0aGlzLmNvbnRleHQudXNlclBvbGljaWVzW3RdLHQ9PT10aGlzLmNvbnRleHQuYWN0aXZlVXNlclBvbGljeSYmKHRoaXMuY29udGV4dC5hY3RpdmVVc2VyUG9saWN5PXZvaWQgMCx0aGlzLmNvbnRleHQuc2F2ZUFjdGl2ZVBvbGljeSgpKSx0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKCJVU0VSIik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcigiVW5rbm93biBwb2xpY3kgc291cmNlOiAiK2UpfX19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRleHQubWVzc2FnZUJ1c30sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5jb250ZXh0Lm1lc3NhZ2VCdXM9ZSx0LmFkZEdVSUxpc3RlbmVycygpfX1dKSxQRVB9KCk7dC5kZWZhdWx0PW0sZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDcwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIEFjdGlvbnNTZXJ2aWNlKGUpeygwLGEuZGVmYXVsdCkodGhpcyxBY3Rpb25zU2VydmljZSksdGhpcy5jb250ZXh0PWV9cmV0dXJuKDAsdS5kZWZhdWx0KShBY3Rpb25zU2VydmljZSxbe2tleToiZW5mb3JjZVBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgbz1yLmNvbnRleHQuZ2V0UG9saWNpZXMoZSx0KTt2b2lkIDAhPT1vP3ZvaWQgMCE9PW8uc2VydmljZVByb3ZpZGVyUG9saWN5P28uc2VydmljZVByb3ZpZGVyUG9saWN5LmVuZm9yY2VBY3Rpb25zKHIuY29udGV4dCxlKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9LGZ1bmN0aW9uKGUpe2koZSl9KTp2b2lkIDAhPT1vLnVzZXJQb2xpY3k/by51c2VyUG9saWN5LmVuZm9yY2VBY3Rpb25zKHIuY29udGV4dCxlKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9LGZ1bmN0aW9uKGUpe2koZSl9KTpuKFtlXSk6bihbZV0pfSl9fSx7a2V5OiJmb3J3YXJkVG9JRCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKCFyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5KXRocm93IG5ldyBFcnJvcigiZm9yd2FyZCBtZXNzYWdlIHRvIGdpdmVuIElEIGlzIHVuc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQiKTtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihuLGkpe2lmKHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuaHlwZXJ0aWVzTGlzdFswXS5oeXBlcnR5VVJMPT09ZS50byl7InJ1bnRpbWUiIT09ZS50by5zcGxpdCgiOi8vIilbMF0/ci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeS5kaXNjb3Zlckh5cGVydHlQZXJVc2VyKHQpLnRoZW4oZnVuY3Rpb24odCl7ZS50bz10Lmh5cGVydHlVUkwsZS5ib2R5LnZpYT12b2lkIDAsbihlKSxyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUpfSxmdW5jdGlvbihlKXtpKGUpfSk6bihlKX1lbHNlIG4oZSl9KX19LHtrZXk6ImZvcndhcmRUb0h5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeSl0aHJvdyBuZXcgRXJyb3IoImZvcndhcmQgbWVzc2FnZSB0byBnaXZlbiBJRCBpcyB1bnN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Iik7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obil7aWYoci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeS5oeXBlcnRpZXNMaXN0WzBdLmh5cGVydHlVUkw9PT1lLnRvKXsicnVudGltZSIhPT1lLnRvLnNwbGl0KCI6Ly8iKVswXT8oZS50bz10LGUuYm9keS52aWE9dm9pZCAwLG4oZSksci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShlKSk6bihlKX1lbHNlIG4oZSl9KX19LHtrZXk6InNlbmRBdXRvbWF0aWNNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obil7dmFyIGk9e2Zyb206ZS50byx0bzplLmZyb20sYm9keTp7dmFsdWU6dH0sdHlwZTplLnR5cGV9O24oZSksci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpKX0pfX1dKSxBY3Rpb25zU2VydmljZX0oKTt0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMTQyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIFBEUChlKXsoMCxpLmRlZmF1bHQpKHRoaXMsUERQKSx0aGlzLmNvbnRleHQ9ZSx0aGlzLm9wZXJhdG9ycz1uZXcgdS5kZWZhdWx0fXJldHVybigwLGEuZGVmYXVsdCkoUERQLFt7a2V5OiJldmFsdWF0ZVBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY29udGV4dC5nZXRQb2xpY2llcyhlLHQpLG49Ik5vdCBBcHBsaWNhYmxlIjtpZih2b2lkIDAhPT1yJiYoKG49dGhpcy5ldmFsdWF0ZVBvbGljeShlLHIuc2VydmljZVByb3ZpZGVyUG9saWN5LHQpKXx8Ik5vdCBBcHBsaWNhYmxlIj09PW4pKXt2YXIgaT10aGlzLmV2YWx1YXRlUG9saWN5KGUsci51c2VyUG9saWN5LHQpOyJOb3QgQXBwbGljYWJsZSIhPT1pJiYobj1pKX1yZXR1cm4gbn19LHtrZXk6ImV2YWx1YXRlUG9saWN5Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49Ik5vdCBBcHBsaWNhYmxlIjtyZXR1cm4gdCYmKG49dC5ldmFsdWF0ZVJ1bGVzKHRoaXMuY29udGV4dCxlLHIpKSxufX1dKSxQRFB9KCk7dC5kZWZhdWx0PWMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDIwMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigyMDMpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMjA0KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDQ3Myksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBQb2xpY3koZSx0LHIsbil7aWYoKDAsYS5kZWZhdWx0KSh0aGlzLFBvbGljeSksIWUpdGhyb3cgbmV3IEVycm9yKCJrZXkgaXMgbm90IGRlZmluZWQiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoImFjdGlvbnMgYXJlIG5vdCBkZWZpbmVkIik7dGhpcy5hY3Rpb25zPXIsdGhpcy5rZXk9ZSx0aGlzLl9zZXRSdWxlcyh0KSx0aGlzLl9zZXRDb21iaW5pbmdBbGdvcml0aG0obil9cmV0dXJuKDAsdS5kZWZhdWx0KShQb2xpY3ksW3trZXk6ImFkZEFjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLmFjdGlvbnMucHVzaCh7bWV0aG9kOmUscGFyYW06dH0pfX0se2tleToiY3JlYXRlUnVsZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpKXt2b2lkIDA9PT1pJiYoaT10aGlzLmdldExhc3RQcmlvcml0eSgpKzEpO3ZhciBvPW5ldyB2LmRlZmF1bHQoZSx0LHIsbixpKTt0aGlzLnJ1bGVzLnB1c2gobyl9fSx7a2V5OiJkZWxldGVSdWxlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJ1bGVzLmluZGV4T2YoZSk7dGhpcy5ydWxlcy5zcGxpY2UodCwxKX19LHtrZXk6ImVuZm9yY2VBY3Rpb25zIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgYT1bXTtpZigwIT09ci5hY3Rpb25zLmxlbmd0aCl7Zm9yKHZhciBzIGluIHIuYWN0aW9ucyl7dmFyIHU9ZS5wZXAuYWN0aW9uc1NlcnZpY2Vbci5hY3Rpb25zW3NdLm1ldGhvZF0odCxyLmFjdGlvbnNbc10ucGFyYW0pO2EucHVzaCh1KX1pLmRlZmF1bHQuYWxsKGEpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0sZnVuY3Rpb24oZSl7byhlKX0pfWVsc2UgbihbdF0pfSl9fSx7a2V5OiJldmFsdWF0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49W107Zm9yKHZhciBpIGluIHRoaXMucnVsZXMpbi5wdXNoKHRoaXMucnVsZXNbaV0uZXZhbHVhdGUoZSx0LHIpKTtyZXR1cm4gdGhpcy5jb21iaW5pbmdBbGdvcml0aG0uY29tYmluZShuKX19LHtrZXk6ImdldExhc3RQcmlvcml0eSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1bXTtpZigwIT09dGhpcy5ydWxlcy5sZW5ndGgpe2Zvcih2YXIgdCBpbiB0aGlzLnJ1bGVzKWUucHVzaCh0aGlzLnJ1bGVzW3RdLnByaW9yaXR5KTtyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCxlKX1yZXR1cm4tMX19LHtrZXk6ImdldFJ1bGVCeVByaW9yaXR5Iix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5ydWxlcylpZihTdHJpbmcodGhpcy5ydWxlc1t0XS5wcmlvcml0eSk9PT1TdHJpbmcoZSkpcmV0dXJuIHRoaXMucnVsZXNbdF07dGhyb3cgRXJyb3IoIlJ1bGUgd2l0aCBwcmlvcml0eSAiK2UrIiBkb2VzIG5vdCBleGlzdCEiKX19LHtrZXk6Il9zZXRDb21iaW5pbmdBbGdvcml0aG0iLHZhbHVlOmZ1bmN0aW9uKGUpe3N3aXRjaChlfHwoZT0iYmxvY2tPdmVycmlkZXMiKSxlKXtjYXNlImJsb2NrT3ZlcnJpZGVzIjp0aGlzLmNvbWJpbmluZ0FsZ29yaXRobT1uZXcgZC5kZWZhdWx0O2JyZWFrO2Nhc2UiYWxsb3dPdmVycmlkZXMiOnRoaXMuY29tYmluaW5nQWxnb3JpdGhtPW5ldyBmLmRlZmF1bHQ7YnJlYWs7Y2FzZSJmaXJzdEFwcGxpY2FibGUiOnRoaXMuY29tYmluaW5nQWxnb3JpdGhtPW5ldyB5LmRlZmF1bHQ7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcigiVW5rbm93biBhbGdvcml0aG06ICIrZSl9fX0se2tleToiX3NldFJ1bGVzIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnJ1bGVzPVtdO2Zvcih2YXIgdCBpbiBlKXt2YXIgcj1lW3RdO3ZvaWQgMD09PXIucHJpb3JpdHkmJihyLnByaW9yaXR5PXRoaXMuZ2V0TGFzdFByaW9yaXR5KCkrMSksciBpbnN0YW5jZW9mIHYuZGVmYXVsdHx8KHI9bmV3IHYuZGVmYXVsdChyLmRlY2lzaW9uLHIuY29uZGl0aW9uLHIuc2NvcGUsci50YXJnZXQsci5wcmlvcml0eSkpLHRoaXMucnVsZXMucHVzaChyKX19fSx7a2V5OiJzb3J0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVsZXMuc29ydChmdW5jdGlvbihlLHQpe3ZhciByPWUucHJpb3JpdHksbj10LnByaW9yaXR5O3JldHVybiByPG4/LTE6cj5uPzE6MH0pfX1dKSxQb2xpY3l9KCk7dC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDQ3NCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxNDMpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMTUpLGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSdWxlKGUsdCxyLG4sbyl7KDAsaS5kZWZhdWx0KSh0aGlzLFJ1bGUpLHRoaXMuZGVjaXNpb249ZSx0aGlzLnNldENvbmRpdGlvbih0KSx0aGlzLnByaW9yaXR5PW8sdGhpcy5zY29wZT1yLHRoaXMudGFyZ2V0PW59cmV0dXJuKDAsYS5kZWZhdWx0KShSdWxlLFt7a2V5OiJzZXRDb25kaXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBmLmRlZmF1bHR8fGUgaW5zdGFuY2VvZiB1LmRlZmF1bHR8fGUgaW5zdGFuY2VvZiB1LmRlZmF1bHQpdGhpcy5jb25kaXRpb249ZTtlbHNle3N3aXRjaChlLmF0dHJpYnV0ZSl7Y2FzZSJzdWJzY3JpcHRpb24iOnRoaXMuY29uZGl0aW9uPW5ldyB1LmRlZmF1bHQoZS5hdHRyaWJ1dGUsZS5vcGVyYXRvcixlLnBhcmFtcyk7YnJlYWs7Y2FzZSB2b2lkIDA6dGhpcy5jb25kaXRpb249bmV3IHUuZGVmYXVsdChlKTticmVhaztkZWZhdWx0OnRoaXMuY29uZGl0aW9uPW5ldyBmLmRlZmF1bHQoZS5hdHRyaWJ1dGUsZS5vcGVyYXRvcixlLnBhcmFtcyl9fX19LHtrZXk6ImV2YWx1YXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49cj90LnRvOnQuZnJvbSxpPXZvaWQgMDtzd2l0Y2godGhpcy5zY29wZSl7Y2FzZSJnbG9iYWwiOmJyZWFrO2Nhc2UiaHlwZXJ0eSI6aWYoKDAsbC5pc0RhdGFPYmplY3RVUkwpKG4pKXt2YXIgbz1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRSZXBvcnRlclVSTFN5bmNob25vdXMoKDAsbC5yZW1vdmVQYXRoRnJvbVVSTCkobikpO3ZvaWQgMCE9PW8mJihpPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlOYW1lKG8pKX1lbHNlImh5cGVydHkiPT09bi5zcGxpdCgiOi8vIilbMF0mJihpPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlOYW1lKCgwLGwucmVtb3ZlUGF0aEZyb21VUkwpKG4pKSk7aWYoaT09PXRoaXMudGFyZ2V0KWJyZWFrO3JldHVybiJOb3QgQXBwbGljYWJsZSI7Y2FzZSJpZGVudGl0eSI6dmFyIGE9dm9pZCAwO2lmKCgwLGwuaXNEYXRhT2JqZWN0VVJMKShuKSl7dmFyIHM9ZS5ydW50aW1lUmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKCgwLGwucmVtb3ZlUGF0aEZyb21VUkwpKG4pKTthPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihzKX1lbHNlImh5cGVydHkiPT09bi5zcGxpdCgiOi8vIilbMF0mJihhPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlPd25lcigoMCxsLnJlbW92ZVBhdGhGcm9tVVJMKShuKSkpO2lmKHZvaWQgMCE9PWEmJihhPSgwLGwuZ2V0VXNlckVtYWlsRnJvbVVSTCkoYSkpLGE9PT10aGlzLnRhcmdldClicmVhaztyZXR1cm4iTm90IEFwcGxpY2FibGUifXJldHVybiB0aGlzLmNvbmRpdGlvbi5pc0FwcGxpY2FibGUoZSx0LHRoaXMuc2NvcGUsdGhpcy50YXJnZXQpP3RoaXMuZGVjaXNpb246Ik5vdCBBcHBsaWNhYmxlIn19XSksUnVsZX0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMTQzKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDE0MiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig0NzUpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQWR2YW5jZWRDb25kaXRpb24oZSl7KDAsaS5kZWZhdWx0KSh0aGlzLEFkdmFuY2VkQ29uZGl0aW9uKSx0aGlzLm9wZXJhdG9ycz1uZXcgZi5kZWZhdWx0LHZvaWQgMCE9PWUub3BlcmF0b3JzJiYoZT1lLmNvbmRpdGlvbiksZT10aGlzLmJ1aWxkQ29uZGl0aW9uKGUpLHRoaXMuY29uZGl0aW9uPWV9cmV0dXJuKDAsYS5kZWZhdWx0KShBZHZhbmNlZENvbmRpdGlvbixbe2tleToiYnVpbGRDb25kaXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGVbMV0pP2VbMV09dGhpcy5idWlsZENvbmRpdGlvbihlWzFdKToic3Vic2NyaXB0aW9uIj09PWVbMV0uYXR0cmlidXRlP2VbMV09bmV3IGQuZGVmYXVsdChlWzFdLmF0dHJpYnV0ZSxlWzFdLm9wZXJhdG9yLGVbMV0ucGFyYW1zKTplWzFdPW5ldyB1LmRlZmF1bHQoZVsxXS5hdHRyaWJ1dGUsZVsxXS5vcGVyYXRvcixlWzFdLnBhcmFtcyksdm9pZCAwIT09ZVsyXSYmKEFycmF5LmlzQXJyYXkoZVsyXSk/ZVsyXT10aGlzLmJ1aWxkQ29uZGl0aW9uKGVbMl0pOiJzdWJzY3JpcHRpb24iPT09ZVsyXS5hdHRyaWJ1dGU/ZVsyXT1uZXcgZC5kZWZhdWx0KGVbMl0uYXR0cmlidXRlLGVbMl0ub3BlcmF0b3IsZVsyXS5wYXJhbXMpOmVbMl09bmV3IHUuZGVmYXVsdChlWzJdLmF0dHJpYnV0ZSxlWzJdLm9wZXJhdG9yLGVbMl0ucGFyYW1zKSksZX19LHtrZXk6ImlzQXBwbGljYWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSl7Zm9yKGl8fChpPXRoaXMuY29uZGl0aW9uWzBdLG89dGhpcy5jb25kaXRpb25bMV0sYT10aGlzLmNvbmRpdGlvblsyXSk7IShvIGluc3RhbmNlb2YgdS5kZWZhdWx0KSYhKG8gaW5zdGFuY2VvZiBkLmRlZmF1bHQpJiJib29sZWFuIiE9dHlwZW9mIG87KW89dGhpcy5pc0FwcGxpY2FibGUoZSx0LHIsbixvWzBdLG9bMV0sb1syXSk7aWYodm9pZCAwIT09YSlmb3IoOyEoYSBpbnN0YW5jZW9mIHUuZGVmYXVsdCkmIShhIGluc3RhbmNlb2YgZC5kZWZhdWx0KSYiYm9vbGVhbiIhPXR5cGVvZiBhOylhPXRoaXMuaXNBcHBsaWNhYmxlKGUsdCxyLG4sYVswXSxhWzFdLGFbMl0pO3ZhciBzPSJib29sZWFuIj09dHlwZW9mIG8/bzpvLmlzQXBwbGljYWJsZShlLHQscixuKSxjPXZvaWQgMDtyZXR1cm4gdm9pZCAwIT09YSYmKGM9ImJvb2xlYW4iPT10eXBlb2YgYT9hOmEuaXNBcHBsaWNhYmxlKGUsdCxyLG4pKSx0aGlzLm9wZXJhdG9yc1tpXShbcyxjXSl9fV0pLEFkdmFuY2VkQ29uZGl0aW9ufSgpO3QuZGVmYXVsdD1wLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ3NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDYwKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cig2OCksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig0NzYpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNjkpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoMTQzKSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1mdW5jdGlvbihlKXsvKioKICAqIENyZWF0ZXMgYSBuZXcgU3Vic2NyaXB0aW9uQ29uZGl0aW9uLgogICogQGNsYXNzCiAgKiBAcGFyYW0gIHtzdHJpbmd9ICBhdHRyaWJ1dGUKICAqIEBwYXJhbSAge3N0cmluZ30gIG9wZXJhdG9yCiAgKiBAcGFyYW0gIHsqfSAgICAgICBwYXJhbXMKICAqLwpmdW5jdGlvbiBTdWJzY3JpcHRpb25Db25kaXRpb24oZSx0LHIpe3JldHVybigwLGEuZGVmYXVsdCkodGhpcyxTdWJzY3JpcHRpb25Db25kaXRpb24pLCgwLGYuZGVmYXVsdCkodGhpcywoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLl9fcHJvdG9fX3x8KDAsaS5kZWZhdWx0KShTdWJzY3JpcHRpb25Db25kaXRpb24pKS5jYWxsKHRoaXMsZSx0LHIpKX0vKioKICAqIFZlcmlmaWVzIGlmIHRoZSBzdWJzY3JpcHRpb24gY29uZGl0aW9uIGlzIGFwcGxpY2FibGUgdG8gdGhlIG1lc3NhZ2UuIEZpcnN0LCB2ZXJpZmllcyBpZiB0aGUgbWVzc2FnZSBpcyBvZiB0aGUgc3Vic2NyaXB0aW9uIHR5cGU7IHNlY29uZCwgdmVyaWZpZXMgaWYgdGhlIG1lc3NhZ2UgaXMgZnJvbSBhIHJlbW90ZSBydW50aW1lIHRvIGd1YXJhbnRlZSB0aGF0IHRoZSBzdWJzY3JpcHRpb24gaXMgYmVpbmcgdmFsaWRhdGVkIGluIHRoZSBkZXN0aW5hdGlvbiBydW50aW1lOyB0aGlyZCwgdmVyaWZpZXMgaWYgdGhlIHN1YnNjcmlwdGlvbiBwcmVmZXJlbmNlIGlzIG1ldC4KICAqIEBwYXJhbSAge09iamVjdH0gICAgY29udGV4dCAgIGVudmlyb25tZW50IHdoZXJlIHRoZSBQb2xpY3kgRW5naW5lIGlzIGJlaW5nIHVzZWQKICAqIEBwYXJhbSAge09iamVjdH0gICAgbWVzc2FnZQogICovCnJldHVybigwLHkuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLGUpLCgwLHUuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLFt7a2V5OiJpc0FwcGxpY2FibGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISEoInN1YnNjcmliZSI9PT10LnR5cGUmZS5pc0Zyb21SZW1vdGVTTSh0LmZyb20pKSYmKDAsZC5kZWZhdWx0KShTdWJzY3JpcHRpb25Db25kaXRpb24ucHJvdG90eXBlLl9fcHJvdG9fX3x8KDAsaS5kZWZhdWx0KShTdWJzY3JpcHRpb25Db25kaXRpb24ucHJvdG90eXBlKSwiaXNBcHBsaWNhYmxlIix0aGlzKS5jYWxsKHRoaXMsZSx0KX19XSksU3Vic2NyaXB0aW9uQ29uZGl0aW9ufSh2LmRlZmF1bHQpOy8qKgogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICoqLwp0LmRlZmF1bHQ9ZyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig2MCksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cig0NzcpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKTt0LmRlZmF1bHQ9ZnVuY3Rpb24gZ2V0KGUsdCxyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbj0oMCxhLmRlZmF1bHQpKGUsdCk7aWYodm9pZCAwPT09bil7dmFyIG89KDAsaS5kZWZhdWx0KShlKTtyZXR1cm4gbnVsbD09PW8/dm9pZCAwOmdldChvLHQscil9aWYoInZhbHVlImluIG4pcmV0dXJuIG4udmFsdWU7dmFyIHM9bi5nZXQ7aWYodm9pZCAwIT09cylyZXR1cm4gcy5jYWxsKHIpfX0sLyogNDc3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NzgpLF9fZXNNb2R1bGU6ITB9fSwvKiA0NzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDc5KTt2YXIgbj1yKDEzKS5PYmplY3Q7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCl9fSwvKiA0NzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciBuPXIoNDQpLGk9cigxNDEpLmY7cig5NykoImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShuKGUpLHQpfX0pfSwvKiA0ODAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0NSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cig2MCksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNjgpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNjkpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoMTEpLHY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShoKSxnPXIoMjAwKSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksbT1yKDQ4MSksXz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9di5nZXRMb2dnZXIoIk1lc3NhZ2VCdXMiKSx3PWZ1bmN0aW9uKGUpey8qIHByaXZhdGUKICBfcmVnaXN0cnk6IFJlZ2lzdHJ5CiAgX2ZvcndhcmRzOiB7IDxmcm9tLXVybD46IHsgZmw6IE1zZ0xpc3RlbmVyLCBzYW5kYm94VG9VcmxzOiBNYXAoU2FuZGJveCwgW3RvLXVybF0pLCB1cmxUb1NhbmRib3g6IHsgdG8tdXJsOiBTYW5kYm94IH0gfSB9CiAgIF9waXBlbGluZTogUGlwZWxpbmUKICAqLwovL1RPRE86IGZ1dHVyZSBvcHRpbWl6YXRpb24KLy8xLiBtZXNzYWdlIGJhdGNoIHByb2Nlc3Npbmcgd2l0aCBzZXRJbnRlcnZhbAovLzIuIHJlc29sdmUgZGVmYXVsdCBnYXRld2F5L3Byb3Rvc3R1YiB3aXRoIHJlZ2lzdGVyLnJlc29sdmUKZnVuY3Rpb24gTWVzc2FnZUJ1cyhlKXsoMCx1LmRlZmF1bHQpKHRoaXMsTWVzc2FnZUJ1cyk7dmFyIHQ9KDAsZC5kZWZhdWx0KSh0aGlzLChNZXNzYWdlQnVzLl9fcHJvdG9fX3x8KDAsYS5kZWZhdWx0KShNZXNzYWdlQnVzKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3JlZ2lzdHJ5PWUsdC5fZm9yd2FyZHM9e30sdC5fcGlwZWxpbmU9bmV3IF8uZGVmYXVsdChmdW5jdGlvbihlKXtSLmVycm9yKCJQSVBFTElORS1FUlJPUjogIiwoMCxpLmRlZmF1bHQpKGUpKX0pLHR9cmV0dXJuKDAseS5kZWZhdWx0KShNZXNzYWdlQnVzLGUpLCgwLGYuZGVmYXVsdCkoTWVzc2FnZUJ1cyxbe2tleToicG9zdE1lc3NhZ2UiLC8qKgogICAgICogUG9zdCBhIG1lc3NhZ2UgZm9yIHJvdXRpbmcuIEl0IHdpbGwgZmlyc3Qgc2VhcmNoIGZvciBhIGxpc3RlbmVyLCBpZiB0aGVyZSBpcyBubyBvbmUsIGl0IHNlbmRzIHRvIGEgZXh0ZXJuYWwgcm91dGluZyB1c2luZyB0aGUgX29uUG9zdE1lc3NhZ2UuCiAgICAgKiBFeHRlcm5hbCByb3V0aW5nIHVzZSB0aGUgcmVnaXN0cnkucmVzb2x2ZSguLikgbWV0aG9kIHRvIGRlY2lkZSB0aGUgZGVzdGluYXRpb24gc2FuZGJveC4KICAgICAqIEBwYXJhbSAge01lc3NhZ2V9IGluTXNnICAgICAgICAgICAgSlNPTiB3aXRoIG1hbmRhdG9yeSBNZXNzYWdlIHN0cnVjdHVyZSB7aWQsIHR5cGUsIGZyb20sIHRvfQogICAgICogQHBhcmFtICB7Q2FsbGJhY2t9IHJlc3BvbnNlQ2FsbGJhY2sgT3B0aW9uYWwgY2FsbGJhY2sgaWYgYSByZXNwb25zZSBpcyBleHBlY3RlZCBmcm9tIHRoZSByZXF1ZXN0LiBBIHJlc3BvbnNlIHdpbGwgYmUgYWx3YXlzIHNlbnQsIGV2ZW4gaWYgaXQgaXMgYSAiVGltZW91dCIuCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgdGhlIE1lc3NhZ2UgaWQKICAgICAqLwp2YWx1ZTpmdW5jdGlvbihlLHQpe1IuaW5mbygib25QT1NUTWVzc2FnZTogIixlKTt2YXIgcj10aGlzO3JldHVybiByLl9nZW5JZChlKSxyLl9waXBlbGluZS5wcm9jZXNzKGUsZnVuY3Rpb24obil7aWYoci5fcmVzcG9uc2VDYWxsYmFjayhlLHQpLCFyLl9vblJlc3BvbnNlKG4pKXt2YXIgaT1yLl9zdWJzY3JpcHRpb25zW24udG9dO2k/Ci8vZG8gbm90IHB1Ymxpc2ggb24gZGVmYXVsdCBhZGRyZXNzLCBiZWNhdXNlIG9mIGxvb3BiYWNrIGN5Y2xlCnIuX3B1Ymxpc2hPbihpLG4pOgovL2lmIHRoZXJlIGlzIG5vIGxpc3RlbmVyLCBzZW5kIHRvIGV4dGVybmFsIGludGVyZmFjZQpyLl9vblBvc3RNZXNzYWdlKG4pfX0pLGUuaWR9fSx7a2V5OiJhZGRQdWJsaXNoIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcyxuPXIuX2ZvcndhcmRzW2VdO2lmKCFuKXtuPXtjb3VudGVyOjAsZmw6ci5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKHQpe1IuaW5mbygiTUItUFVCTElTSDogKCAiK2UrIiApIiksci5fb25Qb3N0TWVzc2FnZSh0KX0pLHJlbW92ZTpmdW5jdGlvbigpezA9PT0tLXQuY291bnRlciYmKHQuZmwucmVtb3ZlKCksZGVsZXRlIHIuX2ZvcndhcmRzW2VdKX19LHIuX2ZvcndhcmRzW2VdPW59cmV0dXJuIG4uY291bnRlcisrLG59fSx7a2V5OiJhZGRGb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIHIuYWRkTGlzdGVuZXIoZSxmdW5jdGlvbihuKXtSLmluZm8oIk1CLUZPUldBUkQ6ICggIitlKyIgdG8gIit0KyIgKSIpLHIuZm9yd2FyZCh0LG4pfSl9fSx7a2V5OiJmb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1yLl9zdWJzY3JpcHRpb25zW2VdO24mJnIuX3B1Ymxpc2hPbihuLHQpfX0se2tleToiX29uUG9zdE1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Ci8vcmVzb2x2ZSBleHRlcm5hbCBwcm90b3N0dWIuLi4KdC5fcmVnaXN0cnkucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKHIsbil7bj90LmZvcndhcmQocixuKTp0LmZvcndhcmQocixlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1IuZXJyb3IoIlJFU09MVkUtRVJST1I6ICIsZSl9KX19LHtrZXk6InBpcGVsaW5lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGlwZWxpbmV9fV0pLE1lc3NhZ2VCdXN9KGIuZGVmYXVsdCk7dC5kZWZhdWx0PXcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDgxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1mdW5jdGlvbigpey8qIHB1YmxpYwogICAgaGFuZGxlcnM6ICgoUGlwZUNvbnRleHQpID0+IHZvaWQpW10KICAgIG9uRmFpbDogKGVycm9yKSA9PiB2b2lkCiAgKi8KZnVuY3Rpb24gUGlwZWxpbmUoZSl7KDAsaS5kZWZhdWx0KSh0aGlzLFBpcGVsaW5lKTt2YXIgdD10aGlzO3QuaGFuZGxlcnM9W10sdC5vbkZhaWw9ZX0vKioKICAgKiBJbnNlcnQgYSBtZXNzYWdlIGluIHRoZSBwaXBlbGluZSBxdWV1ZS4gQWxsIG1lc3NhZ2VzIGFyZSB3cmFwcGVkIHdpdGggYSBQaXBlQ29udGV4dC4KICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBtc2cgICAgICAgTWVzc2FnZSBmb3IgdGhlIHF1ZXVlCiAgICogQHBhcmFtICB7Q2FsbGJhY2t9IG9uRGVsaXZlciBXaGVuIG1lc3NhZ2UgaXMgZmluaXNoZWQgcHJvY2Vzc2luZyBmcm9tIGFsbCBoYW5kbGVycywgaXQgd2lsbCBiZSBkZWxpdmVyZWQgaW4gdGhpcyBjYWxsYmFjay4KICAgKi8KcmV0dXJuKDAsYS5kZWZhdWx0KShQaXBlbGluZSxbe2tleToicHJvY2VzcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuaGFuZGxlcnMubGVuZ3RoPjApe3ZhciBuPW5ldyBjKHIuaGFuZGxlcnMpO24ubmV4dChuZXcgdShyLG4sZSx0KSl9ZWxzZSB0KGUpfX1dKSxQaXBlbGluZX0oKSx1PWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogICAgX2luU3RvcDogYm9vbGVhbgogICAgIF9waXBlbGluZTogUGlwZWxpbmUKICAgIF9pdGVyOiBJdGVyYXRvcgogICAgX21zZzogTWVzc2FnZQogICovCmZ1bmN0aW9uIFBpcGVDb250ZXh0KGUsdCxyLG4peygwLGkuZGVmYXVsdCkodGhpcyxQaXBlQ29udGV4dCk7dmFyIG89dGhpcztvLl9pblN0b3A9ITEsby5fcGlwZWxpbmU9ZSxvLl9pdGVyPXQsby5fbXNnPXIsby5fb25EZWxpdmVyPW59cmV0dXJuKDAsYS5kZWZhdWx0KShQaXBlQ29udGV4dCxbe2tleToibmV4dCIsLyoqCiAgICAgKiBQcm9jZWVkIHRvIHRoZSBuZXh0IGludGVyY2VwdG9yIGhhbmRsZXIsIHVubGVzcyB0aGVyZSB3YXMgYW4gZXJyb3IuIElmIGl0J3MgdGhlIGxhc3Qgb25lLCBwcm9jZWVkIHRvIG9uRGVsaXZlciBoYW5kbGVyLgogICAgICovCnZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9pblN0b3B8fChlLl9pdGVyLmhhc05leHQ/ZS5faXRlci5uZXh0KGUpOmUuX29uRGVsaXZlcihlLl9tc2cpKX19LHtrZXk6ImRlbGl2ZXIiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9pblN0b3B8fChlLl9pblN0b3A9ITAsZS5fb25EZWxpdmVyKGUuX21zZykpfX0se2tleToiZmFpbCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9pblN0b3B8fCh0Ll9pblN0b3A9ITAsdC5fcGlwZWxpbmUub25GYWlsJiZ0Ll9waXBlbGluZS5vbkZhaWwoZSkpfX0se2tleToicGlwZWxpbmUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waXBlbGluZX19LHtrZXk6Im1zZyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21zZ30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX21zZz1lfX1dKSxQaXBlQ29udGV4dH0oKSxjPWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogICAgX2luZGV4OiBudW1iZXIKICAgIF9hcnJheTogW10KICAqLwpmdW5jdGlvbiBJdGVyYXRvcihlKXsoMCxpLmRlZmF1bHQpKHRoaXMsSXRlcmF0b3IpLHRoaXMuX2luZGV4PS0xLHRoaXMuX2FycmF5PWV9cmV0dXJuKDAsYS5kZWZhdWx0KShJdGVyYXRvcixbe2tleToiaGFzTmV4dCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luZGV4PHRoaXMuX2FycmF5Lmxlbmd0aC0xfX0se2tleToibmV4dCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luZGV4KyssdGhpcy5fYXJyYXlbdGhpcy5faW5kZXhdfX1dKSxJdGVyYXRvcn0oKTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig5NiksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMTEpLGQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShsKSxwPXIoMTUpLHk9cig5OSksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHkpLHY9ZC5nZXRMb2dnZXIoImxvYWRlciIpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBMb2FkZXIoZSx0LHIpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxMb2FkZXIpLCF0KXRocm93IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBkZXNjcmlwdG9yIG5lZWQgdG8ga25vdyB0aGUgcnVudGltZSBjb25maWd1cmF0aW9uIik7aWYoIXIpdGhyb3cgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGRlc2NyaXB0b3IgbmVlZCB0byBrbm93IHRoZSBydW50aW1lIERlc2NyaXB0b3IgaW5zdGFuY2UiKTt0aGlzLmxvZz12LHRoaXMucnVudGltZUNvbmZpZ3VyYXRpb249dCx0aGlzLmRlc2NyaXB0b3JzPXJ9LyoqCiAgICogU2V0IHJ1bnRpbWUgdXJsCiAgICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSBydW50aW1lVVJMCiAgICovCnJldHVybigwLGYuZGVmYXVsdCkoTG9hZGVyLFt7a2V5OiJsb2FkSHlwZXJ0eSIsLyoqCiAgICAgKiBEZXBsb3kgSHlwZXJ0eSBmcm9tIENhdGFsb2d1ZSBVUkwKICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvdHJlZS9tYXN0ZXIvZGF0YW1vZGVsL2NvcmUvYWRkcmVzcwogICAgICoKICAgICAqIEBwYXJhbSB7VVJMLkh5cGVydHlDYXRhbG9ndWVVUkx9IGh5cGVydHlDYXRhbG9ndWVVUkwgLSBUaGUgQ2F0YWxvZ3VlIFVSTCB1c2VkIHRvIGlkZW50aWZ5IGRlc2NyaXB0b3JzIGluIHRoZSBDYXRhbG9ndWUuCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58VVJMLkh5cGVydHlVUkx9IFtyZXVzZVVSTD1mYWxzZV0gcmV1c2VVUkwgLSByZXVzZVVSTCBpcyB1c2VkIHRvIHJldXNlIHRoZSBoeXBlcnR5VVJMIHByZXZpb3VzbHkgcmVnaXN0cmVkLCBieSBkZWZhdWx0IHRoZSByZXVzZSBpcyBkaXNhYmxlZDsKICAgICAqIEBwYXJhbSB7VVJMfSBhcHBVUkwgLSB0aGUgYXBwIHVybCBvcmlnaW4gYWRkcmVzczsKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBJZHBDb25zdHJhaW50IC0gY29uc3RyYWludHMgdG8gYmUgdXNlZCB3aGVuIHNlbGVjdGluZyB0aGUgaWRlbnRpdHkgdG8gYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBIeXBlcnR5IGluY2x1ZGluZyBvcmlnaW4sIGlkcCwgYW5kIGlkSGludC4KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEJvb2xlYW4sIEVycm9yPn0gdGhpcyBpcyBQcm9taXNlIGFuZCByZXR1cm5zIHRydWUgaWYgYWxsIGNvbXBvbmVudHMgYXJlIGxvYWRlZCB3aXRoIHN1Y2Nlc3Mgb3IgYW4gZXJyb3IgaWYgc29tZW9uZSBmYWlscy4KICAgICAqCiAgICAgKiBAbWVtYmVyT2YgTG9hZGVyCiAgICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxyPXRoaXMsbj1hcmd1bWVudHNbMl07YXJndW1lbnRzWzNdO2lmKCF0aGlzLl9yZWFkeVRvVXNlKCkpcmV0dXJuITE7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIEh5cGVydHkgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG8sYSl7dmFyIHM9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGY9dm9pZCAwLGw9ITEsZD1mdW5jdGlvbihlKXt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gU29tZXRoaW5nIGZhaWxlZCBvbiB0aGUgZGVwbG95IGh5cGVydHk6ICIsZSksYShlKX0seT1mdW5jdGlvbihlKXtsPSEwLGEoZSl9OwovLyBHZXQgSHlwZXJ0eSBkZXNjcmlwdG9yCi8vIFRPRE86IHRoZSByZXF1ZXN0IE1vZHVsZSBzaG91bGQgYmUgY2hhbmdlZCwKLy8gYmVjYXVzZSBhdCB0aGlzIG1vbWVudCBpdCBpcyBpbmNvbXBhdGlibGUgd2l0aCBub2RlanM7Ci8vIFByb2JhYmx5IHdlIG5lZWQgdG8gcGFzcyBhIGZhY3RvcnkgbGlrZSB3ZSBkbyBmb3Igc2FuZGJveGVzOwpyZXR1cm4gdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIC0tLS0tLS0tLS0tLS0tLS0tLSBIeXBlcnR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBHZXQgaHlwZXJ0eSBkZXNjcmlwdG9yIGZvciA6IixlKSxyLmRlc2NyaXB0b3JzLmdldEh5cGVydHlEZXNjcmlwdG9yKGUpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDIgYW5kIDMiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDE6IHJldHVybiBoeXBlcnR5IGRlc2NyaXB0b3IiKSwKLy8gaHlwZXJ0eSBjb250YWlucyB0aGUgZnVsbCBwYXRoIG9mIHRoZSBjYXRhbG9ndWUgVVJMLCBlLmcuCi8vIGNhdGFsb2d1ZS5yZXRoaW5rLmV1Ly53ZWxsLWtub3duLy4uLi4uLi4uLi4KYz1lO3ZhciB0PWUuc291cmNlUGFja2FnZVVSTDtyZXR1cm4iL3NvdXJjZVBhY2thZ2UiPT09dD9lLnNvdXJjZVBhY2thZ2U6ci5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHQpfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDI6IHJldHVybiBoeXBlcnR5IHNvdXJjZSBjb2RlIiksCi8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDQgYW5kIDUiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKZj1lO3JldHVybiEwfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDM6IHJldHVybiBwb2xpY3kgZW5naW5lIHJlc3VsdCIrZSk7Ci8vIHRoaXMgd2lsbCByZXR1cm4gdGhlIHNhbmRib3ggb3Igb25lIHByb21pc2UgdG8gZ2V0U2FuZGJveDsKcmV0dXJuIHIucmVnaXN0cnkuZ2V0QXBwU2FuZGJveCgpfSx5KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiFsJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDQ6IHJldHVybiB0aGUgc2FuZGJveCIsZSksZSl9LGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDQuMTogVHJ5IHRvIHJlZ2lzdGVyIGEgbmV3IHNhbmRib3giKTsKLy8gY2hlY2sgaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZWQgZm9yIHRoaXMgaHlwZXJ0eSBkZXNjcmlwdG9yIHVybDsKLy8gTWFrZSBTdGVwcyB4eHggLS0tIHh4eAovLyBJbnN0YW50aWF0ZSB0aGUgU2FuZGJveAp2YXIgdD17fTtyZXR1cm4gYyYmYy5oYXNPd25Qcm9wZXJ0eSgiY2FwYWJpbGl0aWVzIikmJih0PWMuc3R1YkNhcGFiaWxpdGllcyksci5fcnVudGltZUZhY3RvcnkuY3JlYXRlU2FuZGJveCh0KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZExpc3RlbmVyKCIqIixmdW5jdGlvbihlKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSl9KSxlfSl9LHkpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNTogcmV0dXJuIHNhbmRib3ggYW5kIHJlZ2lzdGVyIiksdT1lO3JldHVybiByLl9hZGRyZXNzQWxsb2NhdGlvbi5jcmVhdGUoci5fcmVnaXN0cnkuX2RvbWFpbiwxLGMsImh5cGVydHkiLHQpfSx5KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiFsJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDY6IHJldHVybiB0aGUgYWRkcmVzc2VzIGZvciB0aGUgaHlwZXJ0eSIsdCksci5yZWdpc3RyeS5yZWdpc3Rlckh5cGVydHkodSxlLGMsdCxuKSl9LHkpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNzogcmVnaXN0cmF0aW9uIHJlc3VsdCIsZSksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTYgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCnM9ZS51cmw7Ci8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CnZhciB0PXt9O2lmKCEoMCxwLmVtcHR5T2JqZWN0KShjLmNvbmZpZ3VyYXRpb24pKXRyeXt0PSgwLGkuZGVmYXVsdCkoe30sSlNPTi5wYXJzZShjLmNvbmZpZ3VyYXRpb24pKX1jYXRjaChlKXt0PWMuY29uZmlndXJhdGlvbn10LnJ1bnRpbWVVUkw9ci5fcnVudGltZVVSTCxlLnAycEhhbmRsZXImJih0LnAycEhhbmRsZXI9ZS5wMnBIYW5kbGVyLHQucDJwUmVxdWVzdGVyPWUucDJwUmVxdWVzdGVyKTsKLy8gV2Ugd2lsbCBkZXBsb3kgdGhlIGNvbXBvbmVudCAtIHN0ZXAgMTcgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCnRyeXtyZXR1cm4gdS5kZXBsb3lDb21wb25lbnQoZi5zb3VyY2VDb2RlLHMsdCl9Y2F0Y2goZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIEVycm9yIG9uIGRlcGxveSBjb21wb25lbnQ6IixlKSxhKGUpfX0seSkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA4OiBEZXBsb3kgY29tcG9uZW50IHN0YXR1cyBmb3IgaHlwZXJ0eTogIixlKSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAxOSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KLy8gQWRkIHRoZSBtZXNzYWdlIGJ1cyBsaXN0ZW5lciB0byB0aGUgYXBwU2FuZGJveCBvciBoeXBlcnRTYW5kYm94OwpyLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIocyxmdW5jdGlvbihlKXt1LnBvc3RNZXNzYWdlKGUpfSk7Ci8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMjAgb2YgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCnZhciB0PXtydW50aW1lSHlwZXJ0eVVSTDpzLHN0YXR1czplfTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gSHlwZXJ0eTogIix0KSxvKHQpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIxIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93Lgp2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKX0seSkuY2F0Y2goZCl9KX19LHtrZXk6ImxvYWRTdHViIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoIXRoaXMuX3JlYWR5VG9Vc2UoKSlyZXR1cm4hMTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl1Qcm90b1N0dWIgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7Ci8vIHRvIGFuYWx5c2UgaWYgZG9tYWluIGZvciBwMnBIYW5kbGVycyBzaG91bGQgYmUgc29tZXRoaW5nIGVsc2UgYW5kIG5vdCB0aGUgZGVmYXVsdCBkb21haW4gaXRzZWxmCnZhciBhPSgwLHAuZGl2aWRlVVJMKShlKS5kb21haW47YXx8KGE9ZSk7dmFyIHM9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGY9dm9pZCAwLGw9ITEsZD12b2lkIDAseT1mdW5jdGlvbihlKXt2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl1Tb21ldGhpbmcgZmFpbGVkIG9uIHRoZSBkZXBsb3kgb2YgcHJvdG9jb2xzdHViOiAiLGUpLG8oZSl9LGg9ZnVuY3Rpb24oZSl7bD0hMCxvKGUpfSxnPXZvaWQgMCxiPXt9O3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSBzdGFydGluZyBsb2FkaW5nIGZvciAiLGUsIiB3aXRoIHAycGNvbmZpZyAiLHQpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXURpc2NvdmVyIG9yIENyZWF0ZSBhIG5ldyBQcm90b1N0dWIgZm9yIGRvbWFpbjogIixhKTsKLy8gc3RlcCAyIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp0cnl7aWYodClpZih0Lmhhc093blByb3BlcnR5KCJpc0hhbmRsZXJTdHViIikmJnQuaXNIYW5kbGVyU3R1YikKLy8gc3RlcCA2IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAohMCxkPXIucnVudGltZVVSTCxnPXIucmVnaXN0cnkuZGlzY292ZXJQMlBTdHViKCk7ZWxzZXshMDt2YXIgbT10LnJlbW90ZVJ1bnRpbWVVUkw7ZD1tLAovLyBzdGVwIDQgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIHN0ZXAgNSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKZz1yLnJlZ2lzdHJ5LmRpc2NvdmVyUDJQU3R1YihtKX1lbHNlCi8vIHN0ZXAgMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKZD1hLGc9ci5yZWdpc3RyeS5kaXNjb3ZlclByb3Rvc3R1YihhKTsKLy8gSXMgcmVnaXN0ZWQ/CnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTEuIFByb3RvIFN0dWIgRGlzY292ZXJlZCBmb3IgIixlLCI6ICIsZyksCi8vIHN0ZXAgMjMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCm4oZyksdi5pbmZvKCIgW1J1bnRpbWUuTG9hZGVyXS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIil9Y2F0Y2goZyl7Ci8vIGlzIG5vdCByZWdpc3RlZD8Kdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdMS4gUHJvdG8gU3R1YiBub3QgZm91bmQgIitnKSwKLy8gc3RlcCA4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApyLmRlc2NyaXB0b3JzLmdldFN0dWJEZXNjcmlwdG9yKGUpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0yLiByZXR1cm4gdGhlIFByb3RvU3R1YiBkZXNjcmlwdG9yIiksCi8vIHN0ZXAgOSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdT1lO3ZhciB0PWUuc291cmNlUGFja2FnZVVSTDtyZXR1cm4iL3NvdXJjZVBhY2thZ2UiPT09dD9lLnNvdXJjZVBhY2thZ2U6ci5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHQpfSxoKS5jYXRjaCh5KS50aGVuKGZ1bmN0aW9uKGUpewovLyBBY2NvcmRpbmcgdG8gZGVidWcsIGl0IHNlZW1zIFJ1bnRpbWVDYXRhbG9ndWUgZG9lcyBub3Qgc3VwcG9ydCB5ZXQgY29uc3RyYWludHMuIEl0IGFwcGVhcnMgZW1wdHkhISEhCi8vIHN0ZXAgMTEgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnJldHVybiFsJiYodSYmdS5jb25zdHJhaW50cyYmKGI9dS5jb25zdHJhaW50cyksdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdMy4gcmV0dXJuIHRoZSBQcm90b1N0dWIgU291cmNlIENvZGUiKSxmPWUsci5yZWdpc3RyeS5nZXRTYW5kYm94KGEsYikpfSkudGhlbihmdW5jdGlvbihlKXsKLy8gc3RlcCAxNSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKcmV0dXJuIWwmJih2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl00LiBpZiB0aGUgc2FuZGJveCBpcyByZWdpc3RlcmVkIHRoZW4gcmV0dXJuIHRoZSBzYW5kYm94ICIsZSkscz1lLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIHN0ZXAgMTMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnJldHVybiFsJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdNS4gU2FuZGJveCB3YXMgbm90IGZvdW5kLCBjcmVhdGluZyBhIG5ldyBvbmUgIixlKSxyLl9ydW50aW1lRmFjdG9yeS5jcmVhdGVTYW5kYm94KGIpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkTGlzdGVuZXIoIioiLGZ1bmN0aW9uKGUpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShlKX0pLGV9KSl9KS50aGVuKGZ1bmN0aW9uKG4pewovLyBzdGVwIDE2IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTYuIHJldHVybiB0aGUgc2FuZGJveCBpbnN0YW5jZSBhbmQgcmVnaXN0ZXIiLG4sInRvIGRvbWFpbiAiLGEpLHM9bixyLnJlZ2lzdHJ5LnJlZ2lzdGVyU3R1YihzLGQsdCxlLHUpKX0saCkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExOwovLyBzdGVwIDIzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0gNy4gcmV0dXJuIHRoZSBydW50aW1lIHByb3Rvc3R1YiB1cmw6ICIsZSksYz1lLnVybDsKLy8gRXh0ZW5kIG9yaWdpbmFsIGh5cGVydHkgY29uZmlndXJhdGlvbjsKdmFyIG49e307aWYoISgwLHAuZW1wdHlPYmplY3QpKHUuY29uZmlndXJhdGlvbikpdHJ5e249KDAsaS5kZWZhdWx0KSh7fSxKU09OLnBhcnNlKHUuY29uZmlndXJhdGlvbikpfWNhdGNoKGUpe249dS5jb25maWd1cmF0aW9ufWlmKHQpdHJ5e249KDAsaS5kZWZhdWx0KShuLEpTT04ucGFyc2UodCkpfWNhdGNoKGUpe249KDAsaS5kZWZhdWx0KShuLHQpfQovLyByZXF1aXJlZCBmb3IgcHJvdG9zdHViIHNlc3Npb24Kbi5ydW50aW1lVVJMPXIuX3J1bnRpbWVVUkw7Ci8vIHN0ZXAgMjQgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnRyeXsKLy8gc3RlcCAyNiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gc3RlcCAyNyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gQWRkIHRoZSBtZXNzYWdlIGJ1cyBsaXN0ZW5lcgpyZXR1cm4gdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIDg6IGFkZGluZyBzYW5kYm94IGxpc3RlbmVyIHRvIHByb3Rvc3R1YlVSTCA6ICIsYyksci5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGMsZnVuY3Rpb24oZSl7cy5wb3N0TWVzc2FnZShlKX0pLHMuZGVwbG95Q29tcG9uZW50KGYuc291cmNlQ29kZSxjLG4pfWNhdGNoKGUpe3YuZXJyb3IoIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0gRXJyb3Igb24gZGVwbG95IGNvbXBvbmVudDoiLGUpLG8oZSl9fSxoKS50aGVuKGZ1bmN0aW9uKCl7aWYobClyZXR1cm4hMTsKLy8gc3RlcCAyOCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdmFyIGU9dm9pZCAwO3Q/KHYubG9nKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIHAycENvbmZpZzogIix0KSx0Lmhhc093blByb3BlcnR5KCJpc0hhbmRsZXJTdHViIikmJihlPXIucmVnaXN0cnkucDJwSGFuZGxlclN0dWJbci5fcnVudGltZVVSTF0pLHQuaGFzT3duUHJvcGVydHkoInAycFJlcXVlc3RlclN0dWIiKSYmKGU9ci5yZWdpc3RyeS5wMnBSZXF1ZXN0ZXJTdHViW3QucmVtb3RlUnVudGltZVVSTF0pKTplPXIucmVnaXN0cnkucHJvdG9zdHVic0xpc3RbYV0sdi5sb2coIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0gU3R1YjogIixlKSxuKGUpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIil9LGgpLmNhdGNoKHkpfX0pfX0se2tleToibG9hZElkcFByb3h5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0aGlzLl9yZWFkeVRvVXNlKCkpcmV0dXJuITE7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIElkcFByb3h5IGRlc2NyaXB0b3IgdXJsIHBhcmFtZXRlciBpcyBuZWVkZWQiKTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPSgwLHAuZGl2aWRlVVJMKShlKS5kb21haW47b3x8KG89ZSk7dmFyIGE9dm9pZCAwLHM9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGY9ITEsbD1mdW5jdGlvbihlKXt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gU29tZXRoaW5nIGZhaWxlZCBvbiB0aGUgZGVwbG95IG9mIElkcFByb3h5OiAiLGUpLG4oZSl9LGQ9ZnVuY3Rpb24oZSl7Zj0hMCxuKGUpfTsKLy8gRGlzY292ZXIgSURQUHJveHkKdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIC0tLS0tLS0tLS0tLS0tLS0tLS0gSURQIFByb3h5IERlcGxveSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBEaXNjb3ZlciBvciBDcmVhdGUgYSBuZXcgSWRwUHJveHkgZm9yIGRvbWFpbi9VUkw6ICIsbyk7dHJ5e3ZhciB5PXQucmVnaXN0cnkuZGlzY292ZXJJZHBQcm94eShvKTsKLy8gSXMgcmVnaXN0ZWQ/CnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAxLiBJRFBQcm94eSBEaXNjb3ZlcmVkOiAiLHkpOwovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnZhciBoPXQucmVnaXN0cnkuaWRwUHJveHlMaXN0W29dO3YubG9nKCJEZXBsb3llZDogIixoKSxyKGgpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAtLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpfWNhdGNoKHkpewovLyBpcyBub3QgcmVnaXN0ZWQ/CnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAxLiBJZHBQcm94eSBub3QgZm91bmQ6Iix5KSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAovLyB3ZSBuZWVkIHRvIGdldCBQcm90b1N0dWIgZGVzY3JpcHRvciBzdGVwIDQgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnQuZGVzY3JpcHRvcnMuZ2V0SWRwUHJveHlEZXNjcmlwdG9yKGUpLnRoZW4oZnVuY3Rpb24oZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDIuIFJldHVybiB0aGUgSURQUHJveHkgZGVzY3JpcHRvciIpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDUgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnM9ZTt2YXIgcj1lLnNvdXJjZVBhY2thZ2VVUkw7cmV0dXJuIi9zb3VyY2VQYWNrYWdlIj09PXI/ZS5zb3VyY2VQYWNrYWdlOnQucnVudGltZUNhdGFsb2d1ZS5nZXRTb3VyY2VQYWNrYWdlRnJvbVVSTChyKX0sZCkudGhlbihmdW5jdGlvbihlKXtpZihmKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAzLiByZXR1cm4gdGhlIElEUFByb3h5IHNvdXJjZSBwYWNrYWdlIiksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgNyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKYz1lO3JldHVybiEwfSxkKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiFmJiZ0LnJlZ2lzdHJ5LmdldFNhbmRib3gobyl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiFmJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDQuIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVyZWQgdGhlbiByZXR1cm4gdGhlIHNhbmRib3giLGUpLGE9ZSxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2lmKGYpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDUuIFNhbmRib3ggd2FzIG5vdCBmb3VuZCwgY3JlYXRpbmcgYSBuZXcgb25lIixlKTt2YXIgcj17fTtyZXR1cm4gcyYmcy5oYXNPd25Qcm9wZXJ0eSgiY2FwYWJpbGl0aWVzIikmJihzPXMuc3R1YkNhcGFiaWxpdGllcyksdC5fcnVudGltZUZhY3RvcnkuY3JlYXRlU2FuZGJveChyKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZExpc3RlbmVyKCIqIixmdW5jdGlvbihlKXt0Lm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSl9KSxlfSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiFmJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDYuIHJldHVybiB0aGUgc2FuZGJveCBpbnN0YW5jZSBhbmQgcmVnaXN0ZXIiLGUsInRvIGRvbWFpbiAiLG8pLGE9ZSx0LnJlZ2lzdHJ5LnJlZ2lzdGVySWRwUHJveHkoZSxvKSl9LGQpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZilyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNy4gUmV0dXJuIHRoZSBydW50aW1lIElkcCBQcm94eSBVUkw6ICIsZSksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp1PWU7Ci8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CnZhciByPXt9O2lmKCEoMCxwLmVtcHR5T2JqZWN0KShzLmNvbmZpZ3VyYXRpb24pKXRyeXtyPSgwLGkuZGVmYXVsdCkoe30sSlNPTi5wYXJzZShzLmNvbmZpZ3VyYXRpb24pKX1jYXRjaChlKXtyPXMuY29uZmlndXJhdGlvbn1yLnJ1bnRpbWVVUkw9dC5fcnVudGltZVVSTDsKLy8gRGVwbG95IENvbXBvbmVudCBzdGVwIHh4eAp0cnl7Ci8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAovLyBBZGQgdGhlIG1lc3NhZ2UgYnVzIGxpc3RlbmVyCnJldHVybiB0Lm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIodSxmdW5jdGlvbihlKXthLnBvc3RNZXNzYWdlKGUpfSksYS5kZXBsb3lDb21wb25lbnQoYy5zb3VyY2VDb2RlLGUscil9Y2F0Y2goZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIEVycm9yIG9uIGRlcGxveSBjb21wb25lbnQ6IixlKSxuKGUpfX0sZCkudGhlbihmdW5jdGlvbigpe2lmKGYpcmV0dXJuITE7Ci8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgeHh4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAovLyBMb2FkIFN0dWIgZnVuY3Rpb24gcmVzb2x2ZWQgd2l0aCBzdWNjZXNzOwovLyBsZXQgaWRwUHJveHkgPSB7Ci8vICAgcnVudGltZUlkcFByb3h5VVJMOiBfcnVudGltZUlkcFByb3h5VVJMLAovLyAgIHN0YXR1czogZGVwbG95Q29tcG9uZW50U3RhdHVzCi8vIH07Ci8vdGhpcy5yZWdpc3RyeS5pZHBQcm94eUxpc3RbZG9tYWluXS5zdGF0dXMgPSAnZGVwbG95ZWQnOwp2YXIgZT10LnJlZ2lzdHJ5LmlkcFByb3h5TGlzdFtvXTt2LmxvZygiW1J1bnRpbWUuTG9hZGVyLmxvYWRJZHBQcm94eV0gODogbG9hZGVkOiAiLGUpLHIoZSksdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZElkcFByb3h5XSAtLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpfSxkKS5jYXRjaChsKX19KX19LHtrZXk6Il9yZWFkeVRvVXNlIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9ydW50aW1lVVJMKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgbG9hZGVyIG5lZWQgdGhlIHJ1bnRpbWUgdXJsIGFkZHJlc3MiKTtpZighdGhpcy5fbWVzc2FnZXNCdXMpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBsb2FkZXIgbmVlZCB0aGUgbWVzc2FnZUJ1cyBjb21wb25lbnQiKTtpZighdGhpcy5fcmVnaXN0cnkpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBsb2FkZXIgbmVlZCB0aGUgcmVnaXN0cnkgY29tcG9uZW50Iik7aWYoIXRoaXMuX3J1bnRpbWVGYWN0b3J5KXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgbG9hZGVyIG5lZWQgdGhlIHJ1bnRpbWUgZmFjdG9yeSBjb21wb25lbnQiKTtyZXR1cm4hMH19LHtrZXk6InJ1bnRpbWVVUkwiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9ydW50aW1lVVJMPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lVVJMfX0se2tleToicmVnaXN0cnkiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9yZWdpc3RyeT1lOwovLyBJbnN0YWxsIEFkZHJlc3NBbGxvY2F0aW9uCnZhciB0PWguZGVmYXVsdC5pbnN0YW5jZTt0aGlzLl9hZGRyZXNzQWxsb2NhdGlvbj10LHYubG9nKCJbTG9hZGVyIC0gQWRkcmVzc0FsbG9jYXRpb25dIC0gIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlZ2lzdHJ5fX0se2tleToibWVzc2FnZUJ1cyIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX21lc3NhZ2VzQnVzPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlc0J1c319LHtrZXk6InJ1bnRpbWVGYWN0b3J5IixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcnVudGltZUZhY3Rvcnk9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J1bnRpbWVGYWN0b3J5fX1dKSxMb2FkZXJ9KCk7dC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDgzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDE1KSxmPXIoMTM4KSxsPXIoMTEpLGQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShsKSxwPWQuZ2V0TG9nZ2VyKCJEZXNjcmlwdG9ycyIpLHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBEZXNjcmlwdG9ycyhlLHQscil7aWYoKDAsYS5kZWZhdWx0KSh0aGlzLERlc2NyaXB0b3JzKSwhZSl0aHJvdyBFcnJvcigiVGhlIGRlc2NyaXB0b3IgbmVlZCB0byBrbm93IHRoZSBydW50aW1lIHVybCB0byBiZSB1c2VkIik7aWYoIXQpdGhyb3cgRXJyb3IoIlRoZSBkZXNjcmlwdG9yIG5lZWRzIHRoZSBjYXRhbG9ndWUgaW5zdGFuY2UiKTtpZighcil0aHJvdyBFcnJvcigiVGhlIGRlc2NyaXB0b3IgbmVlZHMgdGhlIHJ1bnRpbWUgY29uZmlndXJhdGlvbiIpO3RoaXMubG9nPXAsdGhpcy5ydW50aW1lQ29uZmlndXJhdGlvbj1yLHRoaXMucnVudGltZVVSTD1lLHRoaXMuY2F0YWxvZ3VlPXQsdGhpcy5jb25zdHJhaW50cz1mLnJ1bnRpbWVVdGlscy5ydW50aW1lQ2FwYWJpbGl0aWVzfXJldHVybigwLHUuZGVmYXVsdCkoRGVzY3JpcHRvcnMsW3trZXk6ImdldEh5cGVydHlEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jYXRhbG9ndWUuZ2V0SHlwZXJ0eURlc2NyaXB0b3IoZSwhMCx0aGlzLmNvbnN0cmFpbnRzKX19LHtrZXk6ImdldFN0dWJEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9dm9pZCAwLG89dm9pZCAwLGE9dm9pZCAwLHM9KDAsYy5kaXZpZGVVUkwpKHQucnVudGltZVVSTCksdT1zLmRvbWFpbjtpZihlLmluY2x1ZGVzKCI6Ly8iKSl7dmFyIGY9KDAsYy5kaXZpZGVVUkwpKGUpO2k9Zi5kb21haW47dmFyIGw9Zi5pZGVudGl0eTtvPWw/bC5zdWJzdHJpbmcobC5sYXN0SW5kZXhPZigiLyIpKzEpOiJkZWZhdWx0In1lbHNlIG89ImRlZmF1bHQiLGk9ZTtpZihhPSgwLGMuYnVpbGRVUkwpKHQucnVudGltZUNvbmZpZ3VyYXRpb24sImNhdGFsb2d1ZVVSTHMiLCJwcm90b2NvbHN0dWIiLG8pLGkhPT10LnJ1bnRpbWVDb25maWd1cmF0aW9uLmRvbWFpbilpZihlLmluZGV4T2YoImh0dHBzIikmJmUuaW5kZXhPZigiaHlwZXJ0eS1jYXRhbG9ndWUiKSl7Ci8vIFRPRE86IGNoZWNrIGhvdyB0byBsb2FkIGZvcm0gZGlmZmVyZW50IGNvbmZpZ3VyYXRpb24gZG9tYWluCnZhciBkPSgwLGMuZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcykodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsInByb3RvY29sc3R1YiIpO2E9ZC5wcmVmaXgraStkLnN1ZmZpeCtvfWVsc2UgYT1lO3JldHVybiBwLmxvZygiTG9hZCBQcm90b2NvbFN0dWIgZm9yIGRvbWFpbiwgIitpKyIgOiAiLGEpLHQuY2F0YWxvZ3VlLmdldFN0dWJEZXNjcmlwdG9yKGEsITAsdC5jb25zdHJhaW50cykudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ0Vycm9yOiAnLCBlcnJvcik7Cm89aSxpPXU7dmFyIHI9KDAsYy5nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzKSh0LnJ1bnRpbWVDb25maWd1cmF0aW9uLCJjYXRhbG9ndWVVUkxzIiwicHJvdG9jb2xzdHViIik7Ci8vIGxvZy5sb2coJ0ZhbGxiYWNrIC0+IExvYWQgUHJvdG9jb2xzdHViIGZvciBkb21haW4sICcgKyBkb21haW4gKyAnIDogJywgcHJvdG9zdHViKTsKcmV0dXJuIGE9ci5wcmVmaXgraStyLnN1ZmZpeCtvLHQuY2F0YWxvZ3VlLmdldFN0dWJEZXNjcmlwdG9yKGEsITAsdC5jb25zdHJhaW50cyl9KS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6ImdldElkcFByb3h5RGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPXZvaWQgMCxvPXZvaWQgMCxhPSgwLGMuZGl2aWRlVVJMKSh0LnJ1bnRpbWVVUkwpLHM9YS5kb21haW47aWYoZS5pbmNsdWRlcygiOi8vIikpe3ZhciB1PSgwLGMuZGl2aWRlVVJMKShlKTtpPXUuZG9tYWluO3ZhciBmPXUuaWRlbnRpdHk7bz1mP2Yuc3Vic3RyaW5nKGYubGFzdEluZGV4T2YoIi8iKSsxKToiZGVmYXVsdCJ9ZWxzZSBvPSJkZWZhdWx0IixpPWU7dmFyIGw9KDAsYy5nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzKSh0LnJ1bnRpbWVDb25maWd1cmF0aW9uLCJjYXRhbG9ndWVVUkxzIiwiaWRwUHJveHkiKTsKLy8gbG9nLmxvZygnTG9hZCBJZHAgUHJveHkgZm9yIGRvbWFpbiwgJyArIGRvbWFpbiArICcgOiAnLCBpZHBQcm94eVVSTCk7CnJldHVybiBlPWwucHJlZml4K2krbC5zdWZmaXgrbyx0LmNhdGFsb2d1ZS5nZXRJZHBQcm94eURlc2NyaXB0b3IoZSwhMCx0LmNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbigpewovLyBsb2cubG9nKCdMb2FkIElkcCBQcm94eSBmb3IgZG9tYWluLCAnICsgZG9tYWluICsgJyA6ICcsIGlkcFByb3h5VVJMKTsKcmV0dXJuIG89aSxpPXMsZT0oMCxjLmJ1aWxkVVJMKSh0LnJ1bnRpbWVDb25maWd1cmF0aW9uLCJjYXRhbG9ndWVVUkxzIiwiaWRwUHJveHkiLG8pLHQuY2F0YWxvZ3VlLmdldElkcFByb3h5RGVzY3JpcHRvcihlLCEwLHQuY29uc3RyYWludHMpfSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pfSl9fV0pLERlc2NyaXB0b3JzfSgpO3QuZGVmYXVsdD15LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt0LnJ1bnRpbWVDb25maWd1cmF0aW9uPXtydW50aW1lVVJMUzp7cmVnaXN0cnk6e3ByZWZpeDoiaHlwZXJ0eS1ydW50aW1lOi8vIixzdWZmaXg6InJlZ2lzdHJ5In0saWRlbnRpdHlNb2R1bGU6e3ByZWZpeDoiaHlwZXJ0eS1ydW50aW1lOi8vIixzdWZmaXg6Ii9pZG0ifSxydW50aW1lVUE6e3ByZWZpeDoiaHlwZXJ0eS1ydW50aW1lOi8vIixzdWZmaXg6Ii91YSJ9LGNhdGFsb2d1ZTp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoiL2NhdGFsb2d1ZSJ9LGdyYXBoQ29ubmVjdG9yOntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiIvZ3JhcGgifSxzeW5jTWFuYWdlcjp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoiL3NtIn19LGNhdGFsb2d1ZVVSTHM6e3Byb3RvY29sc3R1Yjp7cHJlZml4OiJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4iLHN1ZmZpeDoiLy53ZWxsLWtub3duL3Byb3RvY29sc3R1Yi8iLGZhbGxiYWNrOiJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4lZG9tYWluJS8ud2VsbC1rbm93bi9wcm90b2NvbHN0dWIvIn0saWRwUHJveHk6e3ByZWZpeDoiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuIixzdWZmaXg6Ii8ud2VsbC1rbm93bi9pZHAtcHJveHkvIixmYWxsYmFjazoiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuJWRvbWFpbiUvLndlbGwta25vd24vaWRwLXByb3h5LyJ9fSxtc2dOb2RlVVJMOntwcmVmaXg6ImRvbWFpbjovL21zZy1ub2RlLiIsc3VmZml4OiIiLGh5cGVydHlBZGRyZXNzQWxsb2NhdGlvbjoiL2h5cGVydHktYWRkcmVzcy1hbGxvY2F0aW9uIixvYmplY3RBZGRyZXNzQWxsb2NhdGlvbjoiL29iamVjdC1hZGRyZXNzLWFsbG9jYXRpb24iLHN1YnNjcmlwdGlvbk1hbmFnZW1lbnQ6Ii9zbSJ9LGRvbWFpblJlZ2lzdHJ5VVJMOntwcmVmaXg6ImRvbWFpbjovL3JlZ2lzdHJ5LiIsc3VmZml4OiIifSxnbG9iYWxSZWdpc3RyeVVSTDoiZ2xvYmFsOi8vcmVnaXN0cnkuIn19LC8qIDQ4NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ4NiksaT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1pLmRlZmF1bHQsLy8gbGV0IEdyYXBoQ29ubmVjdG9yOwovLyBpZiAocHJvY2Vzcy5lbnYuTU9ERSAhPT0gJ2xpZ2h0JykgewovLyAgIEdyYXBoQ29ubmVjdG9yID0gcmVxdWlyZSgnLi9HcmFwaENvbm5lY3RvckJhc2UnKTsKLy8gICBpZiAoR3JhcGhDb25uZWN0b3IgJiYgR3JhcGhDb25uZWN0b3IuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSkgR3JhcGhDb25uZWN0b3IgPSBHcmFwaENvbm5lY3Rvci5kZWZhdWx0OwovLyB9IGVsc2UgewovLyAgIEdyYXBoQ29ubmVjdG9yID0gcmVxdWlyZSgnLi9HcmFwaENvbm5lY3RvckxpZ2h0Jyk7Ci8vICAgaWYgKEdyYXBoQ29ubmVjdG9yICYmICBHcmFwaENvbm5lY3Rvci5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpKSBHcmFwaENvbm5lY3RvciA9IEdyYXBoQ29ubmVjdG9yLmRlZmF1bHQ7Ci8vIH0KLyoqCiAqIFRoZSBHcmFwaENvbm5lY3RvckJhc2UgaGF2ZSBzb21lIHByb2JsZW1zIHdpdGggdGhlIHNpemU7CiAqIEBkZXByZWNhdGVkIER1ZSB0byBzb21lIHByb2JsZW1zIGluY3JlYXNlIGEgbG90IHRoZSBmaWxlIHNpemUKICovCi8vIGltcG9ydCBHcmFwaENvbm5lY3RvciBmcm9tICcuL0dyYXBoQ29ubmVjdG9yQmFzZSc7Ci8qKgogKgogKiBAZXhwZXJpbWVudGFsIHVzZWQgaW5zdGVhZCBvZiBHcmFwaENvbm5lY3RvckJhc2U7CiAqLwplLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obiksbz1mdW5jdGlvbiBHcmFwaENvbm5lY3RvcihlLHQscil7KDAsaS5kZWZhdWx0KSh0aGlzLEdyYXBoQ29ubmVjdG9yKX07dC5kZWZhdWx0PW8sZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDg3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDExKSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1yKDE1KSxkPWYuZ2V0TG9nZ2VyKCJDb3JlRGlzY292ZXJ5IikscD1mdW5jdGlvbigpey8qKgogICogVG8gaW5pdGlhbGlzZSB0aGUgRGlzY292ZXJ5LCB3aGljaCB3aWxsIHByb3ZpZGUgdGhlIHN1cHBvcnQgZm9yIGh5cGVydGllcyB0bwogICogcXVlcnkgdXNlcnMgcmVnaXN0ZXJlZCBpbiBvdXRzaWRlIHRoZSBpbnRlcm5hbCBjb3JlLgogICogQHBhcmFtICB7TWVzc2FnZUJ1c30gICAgICAgICAgbXNnYnVzICAgICAgICAgICAgICAgIG1zZ2J1cwogICogQHBhcmFtICB7UnVudGltZVVSTH0gICAgICAgICAgcnVudGltZVVSTCAgICAgICAgICAgIHJ1bnRpbWVVUkwKICAqIEBwYXJhbSAge2dyYXBoQ29ubmVjdG9yfSAgICBncmFwaENvbm5lY3RvcgogICovCmZ1bmN0aW9uIENvcmVEaXNjb3ZlcnkoZSx0LHIsbixpKXtpZigoMCxhLmRlZmF1bHQpKHRoaXMsQ29yZURpc2NvdmVyeSksIW4pdGhyb3cgRXJyb3IoIlRoZSBjYXRhbG9ndWUgbmVlZHMgdGhlIHJ1bnRpbWVGYWN0b3J5Iik7dmFyIG89dGhpczt0aGlzLl9tZXNzYWdlQnVzPXQsby5ncmFwaENvbm5lY3Rvcj1yLG8uaHR0cFJlcXVlc3Q9bi5jcmVhdGVIdHRwUmVxdWVzdCgpLG8uZG9tYWluPSgwLGwuZGl2aWRlVVJMKShlKS5kb21haW4sby5kaXNjb3ZlcnlVUkw9ZSsiL2Rpc2NvdmVyeS8iLG8ucmVnaXN0cnk9aSxvLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoby5kaXNjb3ZlcnlVUkwsZnVuY3Rpb24oZSl7by5kaXNjb3ZlcnlNYW5hZ2VyKGUpLnRoZW4oZnVuY3Rpb24odCl7Ci8vRkxPVy1PVVQ6IG1lc3NhZ2UgcmVzcG9uc2UKby5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOnR9fSl9KS5jYXRjaChmdW5jdGlvbih0KXt2YXIgcj12b2lkIDAsbj12b2lkIDA7IkdyYXBoQ29ubmVjdG9yIj09PXQ/KHI9IlRoaXMgc2VhcmNoIGlzIG5vdCBhdmFpbGFibGUgYXQgdGhlIG1vbWVudC4gVHJ5IGxhdGVyLiIsbj01MDApOihyPSJOb3QgRm91bmQiLG49NDA0KSwKLy9GTE9XLU9VVDogZXJyb3IgbWVzc2FnZSByZXNwb25zZQpvLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTpuLGRlc2NyaXB0aW9uOnJ9fSl9KX0pfS8qKgogICAqIFJldHVybnMgdGhlIE1lc3NhZ2VCdXMuCiAgICovCnJldHVybigwLHUuZGVmYXVsdCkoQ29yZURpc2NvdmVyeSxbe2tleToiZGlzY292ZXJ5TWFuYWdlciIsLyogZnVuY3Rpb24gdG8gZGVjaWRlIHdoYXQgZGlzY292ZXJ5IG1ldGhvZCB0byBjYWxsIGFuZCBsYXRlciByZXR1cm4gdGhlIHJlc3BvbnNlIG1zZyAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgoMCxsLmRpdmlkZVVSTCkoZS5mcm9tKS5kb21haW4sZS5ib2R5LnJlc291cmNlLnNwbGl0KCIvIikuZmlsdGVyKEJvb2xlYW4pKSxuPVtdLG89W107c3dpdGNoKGQubG9nKCJbQ29yZURpc2NvdmVyeS5kaXNjb3ZlcnlNYW5hZ2VyXSByZWNlaXZlZDogIixlKSxlLmJvZHkuY3JpdGVyaWEmJihlLmJvZHkuY3JpdGVyaWEucmVzb3VyY2VzJiYobj1lLmJvZHkuY3JpdGVyaWEucmVzb3VyY2VzKSxlLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXMmJihvPWUuYm9keS5jcml0ZXJpYS5kYXRhU2NoZW1lcykpLHJbMV0pe2Nhc2UidXNlciI6cmV0dXJuImh5cGVydHkiPT1yWzBdP3QuZGlzY292ZXJIeXBlcnRpZXMoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1c2VyLyIpWzFdLG8sbixlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTp0LmRpc2NvdmVyRGF0YU9iamVjdHMoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1c2VyLyIpWzFdLG8sbixlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTtjYXNlInVybCI6cmV0dXJuImh5cGVydHkiPT1yWzBdP3QuZGlzY292ZXJIeXBlcnR5UGVyVVJMKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXJsLyIpWzFdLGUuYm9keS5jcml0ZXJpYS5kb21haW4pOnQuZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXJsLyIpWzFdLGUuYm9keS5jcml0ZXJpYS5kb21haW4pO2Nhc2UibmFtZSI6cmV0dXJuIHQuZGlzY292ZXJEYXRhT2JqZWN0c1Blck5hbWUoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJuYW1lLyIpWzFdLG8sbixlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTtjYXNlInJlcG9ydGVyIjpyZXR1cm4gdC5kaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXIoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJyZXBvcnRlci8iKVsxXSxvLG4sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik7Y2FzZSJndWlkIjpyZXR1cm4gdm9pZCAwIT09dC5ncmFwaENvbm5lY3RvciYmbnVsbCE9PXQuZ3JhcGhDb25uZWN0b3I/Imh5cGVydHkiPT1yWzBdP3QuZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlci1ndWlkOi8vIilbMV0sbyxuKTp0LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJHVUlEKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlci1ndWlkOi8vIilbMV0sbyxuKTppLmRlZmF1bHQucmVqZWN0KCJHcmFwaENvbm5lY3RvciIpO2Nhc2UidXNlcnByb2ZpbGUiOnJldHVybiB2b2lkIDAhPT10LmdyYXBoQ29ubmVjdG9yJiZudWxsIT09dC5ncmFwaENvbm5lY3Rvcj8iaHlwZXJ0eSI9PXJbMF0/dC5kaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YShlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXJwcm9maWxlLyIpWzFdLG8sbik6dC5kaXNjb3ZlckRhdGFPYmplY3RzUGVyVXNlclByb2ZpbGVEYXRhKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlcnByb2ZpbGUvIilbMV0sbyxuKTppLmRlZmF1bHQucmVqZWN0KCJHcmFwaENvbm5lY3RvciIpfX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihvLGEpewovL3RyYW5zbGF0ZSB1c2VyIGlkZW50aWZpZXIgKGUuZy4gZW1haWwsIG5hbWUuLi4pIGludG8gdGhlIGFzc29jaWF0ZWQgR1VJRHMKbi5kaXNjb3ZlckdVSURQZXJVc2VySWRlbnRpZmllcihlKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBzPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7bi5kaXNjb3Zlckh5cGVydGllc1BlckdVSUQoZSx0LHIpLnRoZW4oZnVuY3Rpb24oZSl7aShlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koW10pfSl9KX0pO2kuZGVmYXVsdC5hbGwocykudGhlbihmdW5jdGlvbihlKXt2YXIgdD1bXS5jb25jYXQuYXBwbHkoW10sZSk7aWYoMD09PXQubGVuZ3RoKXJldHVybiBhKCJObyBoeXBlcnRpZXMgd2VyZSBmb3VuZCIpO28odCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBhKGUpfSl9KX19LHtrZXk6ImRpc2NvdmVyRGF0YU9iamVjdHNQZXJVc2VyUHJvZmlsZURhdGEiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG8sYSl7Ci8vdHJhbnNsYXRlIHVzZXIgaWRlbnRpZmllciAoZS5nLiBlbWFpbCwgbmFtZS4uLikgaW50byB0aGUgYXNzb2NpYXRlZCBHVUlEcwpuLmRpc2NvdmVyR1VJRFBlclVzZXJJZGVudGlmaWVyKGUpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHM9ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXtuLmRpc2NvdmVyRGF0YU9iamVjdHNQZXJHVUlEKGUsdCxyKS50aGVuKGZ1bmN0aW9uKGUpe2koZSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKFtdKX0pfSl9KTtpLmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W10uY29uY2F0LmFwcGx5KFtdLGUpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gYSgiTm8gZGF0YU9iamVjdHMgd2VyZSBmb3VuZCIpO28odCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBhKGUpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzUGVyR1VJRCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obyxhKXsKLy90cmFuc2xhdGUgR1VJRCBpbnRvIHRoZSB1c2VyIElEcyB0byBxdWVyeSB0aGUgZG9tYWluIHJlZ2lzdHJ5Cm4uZGlzY292ZXJVc2VySWRzUGVyR1VJRChlKS50aGVuKGZ1bmN0aW9uKGUpewovL3RyYW5zbGF0ZSB1c2VyIElEcyBpbnRvIHRoZSBhc3NvY2lhdGVkIGh5cGVydGllcyByZWdpc3RlcmVkIGluIHNvbWUgZG9tYWluCnZhciBzPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7bi5kaXNjb3Zlckh5cGVydGllcyhlLnVJRCx0LHIsZS5kb21haW4pLnRoZW4oZnVuY3Rpb24oZSl7aShlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koW10pfSl9KX0pO2kuZGVmYXVsdC5hbGwocykudGhlbihmdW5jdGlvbihlKXt2YXIgdD1bXS5jb25jYXQuYXBwbHkoW10sZSk7aWYoMD09PXQubGVuZ3RoKXJldHVybiBhKCJObyBoeXBlcnRpZXMgd2VyZSBmb3VuZCIpOwovLyBsb2cubG9nKCdIeXBlcnRpZXMgOiAnLCBoeXBlcnRpZXMpOwpvKHQpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gYShlKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obyxhKXsKLy90cmFuc2xhdGUgR1VJRCBpbnRvIHRoZSB1c2VyIElEcyB0byBxdWVyeSB0aGUgZG9tYWluIHJlZ2lzdHJ5Cm4uZGlzY292ZXJVc2VySWRzUGVyR1VJRChlKS50aGVuKGZ1bmN0aW9uKGUpewovL3RyYW5zbGF0ZSB1c2VyIElEcyBpbnRvIHRoZSBhc3NvY2lhdGVkIGRhdGFPYmplY3RzIHJlZ2lzdGVyZWQgaW4gc29tZSBkb21haW4KdmFyIHM9ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXtuLmRpc2NvdmVyRGF0YU9iamVjdHMoZS51SUQsdCxyLGUuZG9tYWluKS50aGVuKGZ1bmN0aW9uKGUpe2koZSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKFtdKX0pfSl9KTtpLmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W10uY29uY2F0LmFwcGx5KFtdLGUpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gYSgiTm8gZGF0YU9iamVjdHMgd2VyZSBmb3VuZCIpOwovLyBsb2cubG9nKCdEYXRhT2JqZWN0cyA6ICcsIGRhdGFPYmplY3RzKTsKbyh0KX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSl9KX0pfX0se2tleToiZGlzY292ZXJIeXBlcnRpZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMsYT12b2lkIDA7YT1ufHxvLmRvbWFpbjt2YXIgcz17dHlwZToicmVhZCIsZnJvbTpvLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIithLGJvZHk6e319O3JldHVybiBlLmluZGV4T2YoInVzZXI6Ly8iKT4tMT9zLmJvZHkucmVzb3VyY2U9ZTpzLmJvZHkucmVzb3VyY2U9Ii9oeXBlcnR5L2lkcC1pZGVudGlmaWVyLyIrZSx0Lmxlbmd0aD4wJiYocy5ib2R5LmNyaXRlcmlhfHwocy5ib2R5LmNyaXRlcmlhPXt9KSxzLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXM9dCksci5sZW5ndGg+MCYmKHMuYm9keS5jcml0ZXJpYXx8KHMuYm9keS5jcml0ZXJpYT17fSkscy5ib2R5LmNyaXRlcmlhLnJlc291cmNlcz1yKSxuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7Ci8vIGxvZy5sb2coIltDb3JlRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzXSBzZW5kaW5nIG1zZyAiLCBtc2cpOwpvLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXsKLy8gbG9nLmxvZygiW0NvcmVEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNdIHJjdmVkIHJlcGx5ICIsIHJlcGx5KTsKaWYoMjAwIT09ci5ib2R5LmNvZGUmJjUwMCE9PXIuYm9keS5jb2RlKXJldHVybiB0KCJObyBIeXBlcnR5IHdhcyBmb3VuZCIpO3ZhciBuPXIuYm9keS52YWx1ZSxpPVtdO2Zvcih2YXIgbyBpbiBuKWkucHVzaChuW29dKTtpZighKGkubGVuZ3RoPjApKXJldHVybiB0KCJObyBIeXBlcnR5IHdhcyBmb3VuZCIpOwovLyBsb2cubG9nKCJbQ29yZURpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gSHlwZXJ0aWVzIEZvdW5kOiAiLCBmaW5hbEh5cGVydGllcyk7CmUoaSl9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0cyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxhPXZvaWQgMCxzPVtdO3JldHVybiBhPW58fG8uZG9tYWluLG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obix1KXsKLy90cmFuc2xhdGUgdXNlciBpZGVudGlmaWVyIChlLmcuIGVtYWlsLCBuYW1lLi4uKSBpbnRvIHRoZSBhc3NvY2lhdGVkIGh5cGVydGllcwpvLmRpc2NvdmVySHlwZXJ0aWVzKGUsW10sW10sYSkudGhlbihmdW5jdGlvbihlKXt2YXIgYz1bXTtmb3IodmFyIGYgaW4gZSljLnB1c2goZVtmXSk7Ly90cmFuc2xhdGUgaHlwZXJ0aWVzIFVSTHMgaW50byB0aGUgYXNzb2NpYXRlZCBkYXRhT2JqZWN0cyByZWdpc3RlcmVkIGluIHNvbWUgZG9tYWluCnZhciBsPWMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7by5kaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXIoZS5oeXBlcnR5SUQsdCxyLGEpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oW10pfSl9KX0pO2kuZGVmYXVsdC5hbGwobCkudGhlbihmdW5jdGlvbihlKXtbXS5jb25jYXQuYXBwbHkoW10sZSkuZm9yRWFjaChmdW5jdGlvbihlKXtzLnB1c2goZSl9KTt2YXIgdD1bXTtmb3IodmFyIHIgaW4gcyl0LnB1c2goc1tyXSk7aWYoMD09PXQubGVuZ3RoKXJldHVybiB1KCJObyBkYXRhT2JqZWN0cyB3ZXJlIGZvdW5kIik7Ci8vIGxvZy5sb2coJ0RhdGFPYmplY3RzIEZvdW5kOiAnLCBmaW5hbERhdGFPYmplY3RzKTsKbih0KX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSl9KX0pfX0se2tleToiZGlzY292ZXJIeXBlcnR5UGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10fHxyLmRvbWFpbjt2YXIgbz17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituLGJvZHk6e3Jlc291cmNlOmV9fTtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKHIpe2lmKDIwMCE9PXIuYm9keS5jb2RlJiY1MDAhPT1yLmJvZHkuY29kZSlyZXR1cm4gdCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKTt2YXIgbj1yLmJvZHkudmFsdWU7aWYoIW4pcmV0dXJuIHQoIk5vIEh5cGVydHkgd2FzIGZvdW5kIik7Ci8vIGxvZy5sb2coJ0h5cGVydHkgZm91bmQ6ICcsIGh5cGVydHkpOwplKG4pfSl9KX19LHtrZXk6ImRpc2NvdmVyRGF0YU9iamVjdFBlclVSTCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dHx8ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbixib2R5OntyZXNvdXJjZTplfX07cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihyKXt2YXIgbj1yLmJvZHkudmFsdWU7aWYoIW4pcmV0dXJuIHQoIkRhdGFPYmplY3Qgbm90IGZvdW5kIik7Ci8vIGxvZy5sb2coJ0RhdGFPYmplY3QgZm91bmQ6ICcsIGRhdGFPYmplY3QpOwplKG4pfSl9KX19LHtrZXk6ImRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzLGE9dm9pZCAwO2E9bnx8by5kb21haW47dmFyIHM9e3R5cGU6InJlYWQiLGZyb206by5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrYSxib2R5OntyZXNvdXJjZTplfX07cmV0dXJuIHQubGVuZ3RoPjAmJihzLmJvZHkuY3JpdGVyaWF8fChzLmJvZHkuY3JpdGVyaWE9e30pLHMuYm9keS5jcml0ZXJpYS5kYXRhU2NoZW1lcz10KSxyLmxlbmd0aD4wJiYocy5ib2R5LmNyaXRlcmlhfHwocy5ib2R5LmNyaXRlcmlhPXt9KSxzLmJvZHkuY3JpdGVyaWEucmVzb3VyY2VzPXIpLG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtvLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihyKXt2YXIgbj1yLmJvZHkudmFsdWUsaT1bXTtmb3IodmFyIG8gaW4gbilpLnB1c2gobltvXSk7aWYoIShpLmxlbmd0aD4wKSlyZXR1cm4gdCgiTm8gRGF0YU9iamVjdCB3YXMgZm91bmQiKTsKLy8gbG9nLmxvZygiRGF0YU9iamVjdHMgRm91bmQ6ICIsIGZpbmFsRGF0YU9iamVjdHMpOwplKGkpfSl9KX19LHtrZXk6ImRpc2NvdmVyRGF0YU9iamVjdHNQZXJSZXBvcnRlciIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxhPXZvaWQgMDthPW58fG8uZG9tYWluO3ZhciBzPXt0eXBlOiJyZWFkIixmcm9tOm8uZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK2EsYm9keTp7cmVzb3VyY2U6Ii9jb21tIixjcml0ZXJpYTp7cmVwb3J0ZXI6ZX19fTtyZXR1cm4gdC5sZW5ndGg+MCYmKHMuYm9keS5jcml0ZXJpYS5kYXRhU2NoZW1lcz10KSxyLmxlbmd0aD4wJiYocy5ib2R5LmNyaXRlcmlhLnJlc291cmNlcz1yKSxuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7by5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlLGk9W107Zm9yKHZhciBvIGluIG4paS5wdXNoKG5bb10pO2lmKCEoaS5sZW5ndGg+MCkpcmV0dXJuIHQoIk5vIERhdGFPYmplY3Qgd2FzIGZvdW5kIik7Ci8vIGxvZy5sb2coIkRhdGFPYmplY3RzIEZvdW5kOiAiLCBmaW5hbERhdGFPYmplY3RzKTsKZShpKX0pfSl9fSx7a2V5OiJkaXNjb3ZlclVzZXJJZHNQZXJHVUlEIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Ci8vIGxvZy5sb2coIkdPIGdyYXBoQ29ubmVjdG9yOiIsIGd1aWQpOwp0LmdyYXBoQ29ubmVjdG9yLnF1ZXJ5R2xvYmFsUmVnaXN0cnkoZSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnSW5mb3JtYXRpb24gcmV0dXJuZWQgZnJvbSBHbG9iYWwgUmVnaXN0cnk6ICcsIGdyYXBoQ29ubmVjdG9yQ29udGFjdERhdGEpOwppZigic3RyaW5nIj09dHlwZW9mIGV8fCFlKXJldHVybiBuKCJVbnN1Y2Nlc3NmdWwgZGlzY292ZXIgdXNlcklEcyBieSBHVUlEIik7dmFyIHQ9ZS51c2VySURzO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gbigiVXNlcklEcyBub3QgYXZhaWxhYmxlIik7cih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBuKGUpfSl9KX19LHtrZXk6ImRpc2NvdmVyR1VJRFBlclVzZXJJZGVudGlmaWVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5odHRwUmVxdWVzdC5nZXQoImh0dHBzOi8vcmV0aGluay50bGFic2Nsb3VkLmNvbS9kaXNjb3ZlcnkvcmVzdC9kaXNjb3Zlci9sb29rdXA/c2VhcmNocXVlcnk9IitlKS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdkaXNjb3ZlciBHVUlEIGJ5IHVzZXIgaWRlbnRpZmllcicsIGpzb24pOwp2YXIgdD1KU09OLnBhcnNlKGUpLGk9dC5yZXN1bHRzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT1lLnJldGhpbmtJRH0pO2lmKDA9PT1pLmxlbmd0aClyZXR1cm4gbigiVW5zdWNjZXNzZnVsIGRpc2NvdmVyIEdVSUQgYnkgdXNlciBpZGVudGlmaWVyIik7dmFyIG89aS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmV0aGlua0lEfSk7cmV0dXJuIHIobyl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygiSFRUUCBSZXF1ZXN0IGVycm9yOiAiLCBlcnIpOwpyZXR1cm4gbihlKX0pfSl9fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUJ1c30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX21lc3NhZ2VCdXM9ZX19XSksQ29yZURpc2NvdmVyeX0oKTt0LmRlZmF1bHQ9cCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0ODkpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoNTkpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMTIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoOTgpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoOTYpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cigyKSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1yKDExKSxiPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oZyksbT1yKDE1KSxfPWIuZ2V0TG9nZ2VyKCJEYXRhT2JqZWN0c1N0b3JhZ2UiKSxSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGF0YU9iamVjdHNTdG9yYWdlKGUsdCl7aWYoKDAseS5kZWZhdWx0KSh0aGlzLERhdGFPYmplY3RzU3RvcmFnZSksIWUpdGhyb3cgbmV3IEVycm9yKCJbU3RvcmUgRGF0YSBPYmplY3RzXSAtIE5lZWRzIHRoZSBzdG9yYWdlTWFuYWdlciBjb21wb25lbnQiKTt0aGlzLl9zdG9yYWdlTWFuYWdlcj1lLHRoaXMuX3N0b3JlRGF0YU9iamVjdD10LHRoaXMuX2NhY2hlPXt9fS8qKgogICAqIEBkZXNjcmlwdGlvbiBzaG91bGQgc2V0IHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBkYXRhT2JqZWN0VVJMIHRvIGJlIHJlc3VtZWQgaWYgbmVjZXNzYXJ5OwogICAqCiAgICogQHBhcmFtIHtEYXRhT2JqZWN0VVJMfSB1cmwgLSBkYXRhT2JqZWN0VVJMIHRvIGJlIHNhdmVkOwogICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNSZXBvcnRlciAtIHRoZSBvYmplY3QgdG8gYmUgc2F2ZWQgaXMgYSByZXBvcnRlcgogICAqIEBwYXJhbSB7U2NoZW1hVVJMfSBzY2hlbWEgLSB0aGUgc2NoZW1hIHVybAogICAqIEBwYXJhbSB7U3RyaW5nfSBzdGF0dXMgLSB0aGUgc3RhdHVzIG9mIGN1cnJlbnQgZGF0YU9iamVjdAogICAqIEBwYXJhbSB7SHlwZXJ0eVVSTH0gcmVwb3J0ZXIgLSB0aGUgUmVwb3J0ZXIgaHlwZXJ0eVVSTAogICAqIEBwYXJhbSB7QXJyYXk8SHlwZXJ0eVVSTD59IHN1YnNjcmlwdGlvbiAtIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucwogICAqIEBwYXJhbSB7QXJyYXk8RGF0YU9iamVjdENoaWxkPn0gY2hpbGRyZW4gLSBsaXN0IG9mIGNoaWxkcyBvZiBkYXRhT2JqZWN0VVJMCiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmc+fSBjaGlsZHJlbnMgLSBsaXN0IG9mIGNoaWxkcmVucywgbGlrZSwgJ2NoYXRtZXNzYWdlJzsKICAgKiBAcGFyYW0ge0FycmF5PFVzZXJVUkx9IHN1YnNjcmliZXJVc2VyIC0gbGlzdCBvZiBzdWJzY3JpYmVkIHVzZXJzOwogICAqLwpyZXR1cm4oMCx2LmRlZmF1bHQpKERhdGFPYmplY3RzU3RvcmFnZSxbe2tleToic2V0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdG9yZURhdGFPYmplY3Qscj10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZS5pc1JlcG9ydGVyKTsvLyBUT0RPOmRvIHdlIG5lZWQgdGhpcz8KLy8gVE9ETzpkbyB3ZSBuZWVkIHRoaXM/Ci8qaWYgKHNjaGVtYSkgc3RvcmVEYXRhT2JqZWN0W3R5cGVdW21ldGFkYXRhLnVybF0uc2NoZW1hID0gc2NoZW1hOwogICAgICBpZiAoc3RhdHVzKSBzdG9yZURhdGFPYmplY3RbdHlwZV1bbWV0YWRhdGEudXJsXS5zdGF0dXMgPSBzdGF0dXM7CiAgICAgIGlmIChjaGlsZHJlblJlc291cmNlcykgc3RvcmVEYXRhT2JqZWN0W3R5cGVdW21ldGFkYXRhLnVybF0uY2hpbGRyZW5SZXNvdXJjZXMgPSBjaGlsZHJlblJlc291cmNlczsqLwovLyBUT0RPOiBkbyB3ZSBuZWVkIHRoaXM/Ci8vc3RvcmVEYXRhT2JqZWN0W3R5cGVdW21ldGFkYXRhLnVybF0ub3duZXIgPSBvd25lcjsKcmV0dXJuIHQuaGFzT3duUHJvcGVydHkocil8fCh0W3JdPXt9KSx0W3JdLmhhc093blByb3BlcnR5KGUudXJsKXx8KHRbcl1bZS51cmxdPXt9LHRbcl1bZS51cmxdLnN1YnNjcmlwdGlvbnM9W10sdFtyXVtlLnVybF0uc3Vic2NyaWJlclVzZXJzPVtdLHRbcl1bZS51cmxdLmNoaWxkcmVuT2JqZWN0cz17fSx0W3JdW2UudXJsXS5kYXRhPXt9KSwoMCxkLmRlZmF1bHQpKHRbcl1bZS51cmxdLGUpLGRlbGV0ZSB0W3JdW2UudXJsXS5zdWJzY3JpYmVyVXNlcixkZWxldGUgdFtyXVtlLnVybF0uc3Vic2NyaWJlckh5cGVydHksZS5zdWJzY3JpYmVySHlwZXJ0eSYmIWUuaXNSZXBvcnRlciYmdGhpcy5fdXBkYXRlVG9BcnJheSh0W3JdLGUudXJsLCJzdWJzY3JpcHRpb25zIixlLnN1YnNjcmliZXJIeXBlcnR5KSxlLnN1YnNjcmliZXJVc2VyJiZ0W3JdW2UudXJsXS5zdWJzY3JpYmVyVXNlcnMuaW5kZXhPZihlLnN1YnNjcmliZXJVc2VyKSYmdGhpcy5fdXBkYXRlVG9BcnJheSh0W3JdLGUudXJsLCJzdWJzY3JpYmVyVXNlcnMiLGUuc3Vic2NyaWJlclVzZXIpLHRoaXMuX3N0b3JlRGF0YU9iamVjdD10LHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSx0KSx0W3JdW2UudXJsXX19LHtrZXk6InNhdmVEYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLl9zdG9yZURhdGFPYmplY3Qsbz10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZSk7aWYoIWl8fCFpW29dfHwhaVtvXVt0XSlyZXR1cm4gdm9pZCBfLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSBzYXZlIGRhdGFdIC0gbm90IHNhdmVkIik7aWYoXy5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gc2F2ZURhdGFdIC0gIixlLG8sdCxyLG4pLGlbb11bdF0uaGFzT3duUHJvcGVydHkoImRhdGEiKXx8KGlbb11bdF0uZGF0YT17fSkscil7dmFyIGE9dm9pZCAwO2E9Im9iamVjdCI9PT0odm9pZCAwPT09bj8idW5kZWZpbmVkIjooMCxmLmRlZmF1bHQpKG4pKT8oMCxtLmRlZXBDbG9uZSkobik6biwoMCxtLmFzc2lnbikoaVtvXVt0XS5kYXRhLHIsYSl9ZWxzZSBpW29dW3RdLmRhdGE9KDAsbS5kZWVwQ2xvbmUpKG4pfHx7fTtyZXR1cm4gdGhpcy5fc3RvcmVEYXRhT2JqZWN0PWksdGhpcy5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLGkpLGlbb11bdF19fSx7a2V5OiJzYXZlQ2hpbGRyZW5zIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLl9zdG9yZURhdGFPYmplY3Qsbz10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZSk7cmV0dXJuIGkmJmlbb10mJmlbb11bdF0/KGlbb11bdF0uaGFzT3duUHJvcGVydHkoImNoaWxkcmVucyIpfHwoaVtvXVt0XS5jaGlsZHJlbk9iamVjdHM9e30pLHI/KDAsbS5hc3NpZ24pKGlbb11bdF0uY2hpbGRyZW5PYmplY3RzLHIsKDAsbS5kZWVwQ2xvbmUpKG4pKTppW29dW3RdLmNoaWxkcmVuT2JqZWN0cz0oMCxtLmRlZXBDbG9uZSkobil8fHt9LHRoaXMuX3N0b3JlRGF0YU9iamVjdD1pLHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxpKSxpW29dW3RdKTp2b2lkIF8ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIHNhdmUgY2hpbGRyZW5zXSAtIG5vdCBzYXZlZCIpfX0se2tleToidXBkYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLl9zdG9yZURhdGFPYmplY3Qsbz10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZSk7aWYoIWl8fCFpW29dfHwhaVtvXVt0XSlyZXR1cm4gdm9pZCBfLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSB1cGRhdGVdIC0gbm90IHNhdmVkIik7aWYoXy5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gdXBkYXRlXSAtICIsZSxvLHQscixuKSxpW29dJiZpW29dW3RdJiZ0JiZyJiZuKXtpZigic3Vic2NyaXB0aW9ucyI9PT1yfHwic3Vic2NyaWJlclVzZXJzIj09PXIpe3ZhciBhPSEwOyJzdWJzY3JpcHRpb25zIj09PXImJihhPSF0aGlzLl9pc093bmVyKGlbb11bdF0sbikpLGEmJnRoaXMuX3VwZGF0ZVRvQXJyYXkoaVtvXSx0LHIsbil9ZWxzZSBpW29dW3RdW3JdPW47cmV0dXJuIHRoaXMuX3N0b3JlRGF0YU9iamVjdD1pLHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxpKSxpW29dW3RdfX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcy5fc3RvcmVEYXRhT2JqZWN0LG89dGhpcy5fZ2V0VHlwZU9mT2JqZWN0KGUpO3JldHVybiBpJiZpW29dJiZpW29dW3RdP2lbb10mJmlbb11bdF0mJnQmJnImJm4/KCJzdWJzY3JpcHRpb25zIj09PXJ8fCJzdWJzY3JpYmVyVXNlcnMiPT09cj90aGlzLl9yZW1vdmVGcm9tQXJyYXkoaVtvXSx0LHIsbik6ZGVsZXRlIGlbb11bdF1bcl0sdGhpcy5fc3RvcmVEYXRhT2JqZWN0PWksdGhpcy5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLGkpLGlbb11bdF0pOnZvaWQgMDp2b2lkIF8ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIGRlbGV0ZV0gLSBub3Qgc2F2ZWQiKX19LHtrZXk6ImRlbGV0ZVJlc291cmNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYoZSlyZXR1cm4gdC5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBpPSgwLGQuZGVmYXVsdCkobix0Ll9zdG9yZURhdGFPYmplY3R8fHt9KTtyZXR1cm4gaS5oYXNPd25Qcm9wZXJ0eSgib2JzZXJ2ZXJzIikmJmkub2JzZXJ2ZXJzLmhhc093blByb3BlcnR5KGUpPyhkZWxldGUgaS5vYnNlcnZlcnNbZV0sdC5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLGkpLHQuX3N0b3JlRGF0YU9iamVjdD1pLHIoaS5vYnNlcnZlcnNbZV0pKTppLmhhc093blByb3BlcnR5KCJyZXBvcnRlcnMiKSYmaS5yZXBvcnRlcnMuaGFzT3duUHJvcGVydHkoZSk/KGRlbGV0ZSBpLnJlcG9ydGVyc1tlXSx0Ll9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsaSksdC5fc3RvcmVEYXRhT2JqZWN0PWkscihpLnJlcG9ydGVyc1tlXSkpOnZvaWQgcigiVGhlICIrZSsiIGRvc2VuXHQgZXhpc3RzLCBub3RoaW5nIHdhcyBkZWxldGVkIil9KTtuKG5ldyBFcnJvcigiW1N0b3JlRGF0YU9iamVjdHNdIC0gQ2FuJ3QgZGVsZXRlIHRoaXMgIitlKSl9KX19LHtrZXk6ImdldEFsbCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZU1hbmFnZXIuZ2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIil9fSx7a2V5OiJnZXREYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fc3RvcmFnZU1hbmFnZXIuZ2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIikudGhlbihmdW5jdGlvbih0KXt2YXIgaT10Lmhhc093blByb3BlcnR5KCJvYnNlcnZlcnMiKT90Lm9ic2VydmVyczp7fSxvPXQuaGFzT3duUHJvcGVydHkoInJlcG9ydGVycyIpP3QucmVwb3J0ZXJzOnt9LHM9KDAsYS5kZWZhdWx0KShvKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZX0pLHU9KDAsYS5kZWZhdWx0KShpKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZX0pLGM9dm9pZCAwO3JldHVybiB1JiYoYz10Lm9ic2VydmVyc1t1XSkscyYmKGM9dC5yZXBvcnRlcnNbc10pLF8uaW5mbygiW1N0b3JlRGF0YU9iamVjdHMgLSBnZXREYXRhT2JqZWN0XSAtIGZvciBvYnNlcnZlcjogIix1KSxfLmluZm8oIltTdG9yZURhdGFPYmplY3RzIC0gZ2V0RGF0YU9iamVjdF0gLSBmb3IgcmVwb3J0ZXJzOiAiLHMpLF8uaW5mbygiW1N0b3JlRGF0YU9iamVjdHMgLSBnZXREYXRhT2JqZWN0XSAtIHJlc29sdmU6ICIsYyksYz9yKGMpOm4oIk5vIGRhdGFPYmplY3Qgd2FzIGZvdW5kIil9KX0pfX0se2tleToiZ2V0UmVzb3VyY2VzQnlDcml0ZXJpYSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4pe3ZhciBpPXIuX2dldFR5cGVPZk9iamVjdCh0KTtyLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIF8ubG9nKCJbRGF0YU9iamVjdHNTdG9yYWdlLmdldFJlc291cmNlc0J5Q3JpdGVyaWFdIGRvbid0IGhhdmUgc3RvcmVkIGRhdGEgb2JqZWN0cyIpLG4obnVsbCk7aWYoZS5ib2R5JiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlc3VtZSIpJiYhZS5ib2R5LnJlc3VtZSlyZXR1cm4gbihudWxsKTsKLy8gY2hlY2sgaWYgdGhlIG1lc3NhZ2UgaGF2ZSBvdGhlciBjcml0ZXJpYQovLyBpZiBub3Qgc2VhcmNoIGZvciBvbiB0aGUgJ2Zyb20nIG9mIHRoZSBtZXNzYWdlLgp2YXIgbz1bXSxhPXIuX2hhc1N1YnNjcmlwdGlvbih0W2ldLGUuZnJvbSkscz1yLl9zZWFyY2hPd25lcih0W2ldLGUuZnJvbSk7aWYoXy5sb2coIltTdG9yZWREYXRhT2JqZWN0cyAtIGdldFJlc291cmNlc0J5Q3JpdGVyaWFdOiIsdCxlLGEscyksIShlLmhhc093blByb3BlcnR5KCJmcm9tIikmJmF8fHMpKXJldHVybiBuKG51bGwpO3ZhciB1PXZvaWQgMDt1PXM/ci5fZ2V0UmVzb3VyY2VzQnlPd25lcih0W2ldLGUuZnJvbSk6ci5fZ2V0UmVzb3VyY2VzQnlTdWJzY3JpcHRpb24odFtpXSxlLmZyb20pO3ZhciBjPVtdO2UuYm9keSYmZS5ib2R5LmlkZW50aXR5JiYoYz1yLl9nZXRSZXNvdXJjZXNCeUlkZW50aXR5KHRbaV0sZS5ib2R5LmlkZW50aXR5KSk7Ci8vVE9ETzogcmVtb3ZlIHNjaGVtYSBzaW5jZSBtZXRhZGF0YSBhbHJlYWR5IGluY2x1ZGVzIHRoZSBzY2hlbWE/CnZhciBmPVtdO2UuYm9keSYmZS5ib2R5LnNjaGVtYSYmKGY9ci5fZ2V0UmVzb3VyY2VzQnlTY2hlbWEodFtpXSxlLmJvZHkuc2NoZW1hKSk7dmFyIGw9W107aWYoZS5ib2R5JiZlLmJvZHkudmFsdWUpe3ZhciBkPWUuYm9keS52YWx1ZTtkZWxldGUgZC5kYXRhLGw9ci5fZ2V0UmVzb3VyY2VzQnlNZXRhZGF0YSh0W2ldLGQpfXZhciBwPVtdO2UuYm9keSYmZS5ib2R5LnZhbHVlJiZlLmJvZHkudmFsdWUuZGF0YSYmKHA9ci5fZ2V0UmVzb3VyY2VzQnlEYXRhKHRbaV0sZS5ib2R5LnZhbHVlLmRhdGEpKSwKLy8geW91IGNhbiBwYXNzIGFzIGFycmF5cyBhcyB5b3Ugd2FudC4uIGl0IHdpbGwgYmUgbWVyZ2VkIGluIG9uIHBsYWNlCi8vIHJlbW92ZWQgZHVwbGljYXRlczsKbz1yLl9pbnRlcnNlY3Rpb24odSxjLGYscCxsKTt2YXIgeT17fTtvLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dFtpXVtlXTtyZXR1cm4geVtlXT1yLHl9KSxfLmxvZygiW1N0b3JlIERhdGEgT2JqZWN0c10gLSAiLHkpLG4oeSl9KX0pfX0se2tleToiX2dldFJlc291cmNlc0J5SWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/KDAsYS5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGVbcl0uc3Vic2NyaWJlclVzZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9KS5sZW5ndGh9KTpbXX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeU93bmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPygwLGEuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnJlcG9ydGVyPT09dH0pOltdfX0se2tleToiX2dldFJlc291cmNlc0J5U3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPygwLGEuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnN1YnNjcmlwdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0pLmxlbmd0aH0pOltdfX0se2tleToiX2dldFJlc291cmNlc0J5U2NoZW1hIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybigwLGEuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3ZhciBuPWVbcl07cmV0dXJuKDAsYS5kZWZhdWx0KShuKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuInNjaGVtYSI9PT1lJiZuW2VdPT09dH0pLmxlbmd0aH0pfX0se2tleToiX2dldFJlc291cmNlc0J5TWV0YWRhdGEiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/KDAsYS5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIG49ZVtyXTtyZXR1cm4oMCxhLmRlZmF1bHQpKG4pLmZpbHRlcihmdW5jdGlvbihlKXsKLy8gc2VhcmNoIG9uIHN0b3JlRGF0YU9iamVjdHMgZm9yIHNwZWNpZmljIGtleSBwcm92aWRlZCBmcm9tIGRhdGE7CnJldHVybigwLGEuZGVmYXVsdCkodCkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlPT09ciYmbltlXT09PXRbcl19KS5sZW5ndGh9KS5sZW5ndGh9KTpbXX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeURhdGEiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/KDAsYS5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIG49ZVtyXS5oYXNPd25Qcm9wZXJ0eSgiZGF0YSIpP2Vbcl0uZGF0YTp7fTtyZXR1cm4oMCxhLmRlZmF1bHQpKG4pLmZpbHRlcihmdW5jdGlvbihlKXsKLy8gc2VhcmNoIG9uIHN0b3JlRGF0YU9iamVjdHMgZm9yIHNwZWNpZmljIGtleSBwcm92aWRlZCBmcm9tIGRhdGE7CnJldHVybigwLGEuZGVmYXVsdCkodCkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlPT09ciYmbltlXT09PXRbcl19KS5sZW5ndGh9KS5sZW5ndGh9KTpbXX19LHtrZXk6Il9oYXNTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFlJiYoMCxhLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZVtyXS5zdWJzY3JpcHRpb25zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9KS5sZW5ndGh9KS5sZW5ndGg+MH19LHtrZXk6Il9zZWFyY2hPd25lciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJigwLGEuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnJlcG9ydGVyPT09dH0pLmxlbmd0aD4wfX0se2tleToiX2lzT3duZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFlJiZlLnJlcG9ydGVyPT09dH19LHtrZXk6Il9pbnRlcnNlY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9KDAsaS5kZWZhdWx0KShhcmd1bWVudHMpLHQ9ZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb25jYXQodCl9KS5maWx0ZXIoZnVuY3Rpb24oZSx0LHIpe3JldHVybiByLmluZGV4T2YoZSk9PT10fSk7cmV0dXJuIF8ubG9nKCJEYXRhT2JqZWN0c1N0b3JhZ2UuX2ludGVyc2VjdGlvbl0gUmVzdWx0IGFuIHVuaXF1ZSBhcnJheSBvZiBzdHJpbmdzOiAiLHQpLHR9fSx7a2V5OiJfdXBkYXRlVG9BcnJheSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7Xy5sb2coIltEYXRhT2JqZWN0c1N0b3JhZ2VdIC0gX3VwZGF0ZVRvQXJyYXk6ICIsZSx0LHIsbiksLTE9PT1lW3RdW3JdLmluZGV4T2YobikmJmVbdF1bcl0ucHVzaChuKX19LHtrZXk6Il9yZW1vdmVGcm9tQXJyYXkiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPWVbdF1bcl0uaW5kZXhPZihuKTstMT09PWkmJmVbdF1bcl0uc3BsaWNlKGksMSl9fSx7a2V5OiJfaGFzVmFsdWUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eSh0KSYmZVt0XT09PXJ9fSx7a2V5OiJfZ2V0VHlwZU9mT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8icmVwb3J0ZXJzIjoib2JzZXJ2ZXJzIn19XSksRGF0YU9iamVjdHNTdG9yYWdlfSgpO3QuZGVmYXVsdD1SLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDkwKSxfX2VzTW9kdWxlOiEwfX0sLyogNDkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDEyNikscig0OTEpLGUuZXhwb3J0cz1yKDEzKS5BcnJheS5mcm9tfSwvKiA0OTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDY1KSxpPXIoMjYpLG89cig3NiksYT1yKDE4OSkscz1yKDE5MCksdT1yKDEzMiksYz1yKDQ5MiksZj1yKDE5MSk7aShpLlMraS5GKiFyKDE5NikoZnVuY3Rpb24oZSl7QXJyYXkuZnJvbShlKX0pLCJBcnJheSIsewovLyAyMi4xLjIuMSBBcnJheS5mcm9tKGFycmF5TGlrZSwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQpCmZyb206ZnVuY3Rpb24oZSl7dmFyIHQscixpLGwsZD1vKGUpLHA9ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSx5PWFyZ3VtZW50cy5sZW5ndGgsaD15PjE/YXJndW1lbnRzWzFdOnZvaWQgMCx2PXZvaWQgMCE9PWgsZz0wLGI9ZihkKTsKLy8gaWYgb2JqZWN0IGlzbid0IGl0ZXJhYmxlIG9yIGl0J3MgYXJyYXkgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yIC0gdXNlIHNpbXBsZSBjYXNlCmlmKHYmJihoPW4oaCx5PjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksdm9pZCAwPT1ifHxwPT1BcnJheSYmcyhiKSlmb3IodD11KGQubGVuZ3RoKSxyPW5ldyBwKHQpO3Q+ZztnKyspYyhyLGcsdj9oKGRbZ10sZyk6ZFtnXSk7ZWxzZSBmb3IobD1iLmNhbGwoZCkscj1uZXcgcDshKGk9bC5uZXh0KCkpLmRvbmU7ZysrKWMocixnLHY/YShsLGgsW2kudmFsdWUsZ10sITApOmkudmFsdWUpO3JldHVybiByLmxlbmd0aD1nLHJ9fSl9LC8qIDQ5MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMzgpLGk9cig3Myk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt0IGluIGU/bi5mKGUsdCxpKDAscikpOmVbdF09cn19LC8qIDQ5MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxMSksdT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHMpLGM9cigxNSksZj11LmdldExvZ2dlcigiSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UiKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UoZSx0LHIsbil7aWYoKDAsaS5kZWZhdWx0KSh0aGlzLEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlKSwhcil0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSBjb25zdHJ1Y3Rvcl0gbWFuZGF0b3J5IHN0b3JhZ2VNYW5hZ2VyIHBhcmFtZXRlciBtaXNzaW5nIik7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UgY29uc3RydWN0b3JdIG1hbmRhdG9yeSBydW50aW1lVVJMIHBhcmFtZXRlciBtaXNzaW5nIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UgY29uc3RydWN0b3JdIG1hbmRhdG9yeSBidXMgcGFyYW1ldGVyIG1pc3NpbmciKTt2YXIgbz10aGlzO28uX2J1cz10LG8uX3VybD1lKyIvc3RvcmFnZSIsby5fc3RvcmFnZU1hbmFnZXI9cixvLl9oeXBlcnR5UmVzb3VyY2VzPW4sdC5hZGRMaXN0ZW5lcihvLl91cmwsZnVuY3Rpb24oZSl7c3dpdGNoKGYuaW5mbygiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlXSBNZXNzYWdlIFJDVjogIixlKSxlLnR5cGUpe2Nhc2UiY3JlYXRlIjpvLl9vbkNyZWF0ZShlKTticmVhaztjYXNlInJlYWQiOm8uX29uUmVhZChlKTticmVhaztjYXNlImRlbGV0ZSI6by5fb25EZWxldGUoZSl9fSl9LyoqCiAgICogQGRlc2NyaXB0aW9uIHNob3VsZCBzYXZlIGFuIEh5cGVydHlSZXNvdXJjZSBjb250YWluZWQgaW4gdGhlIGJvZHkgb2YgYSBjcmVhdGUgbWVzc2FnZSByZXF1ZXN0OwogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBtZXNzYWdlIGNvbnRhaW5pbmcgdGhlIGh5cGVydHkgcmVzb3VyY2UgdG8gYmUgc3RvcmVkCiAgICovCnJldHVybigwLGEuZGVmYXVsdCkoSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UsW3trZXk6Il9vbkNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5fHwhZS5ib2R5LnZhbHVlKXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlLl9vbkNyZWF0ZV0gbWFuZGF0b3J5IG1lc3NhZ2UgYm9keSB2YWx1ZSBtaXNzaW5nOiAiLGUpO3ZhciByPWUuYm9keS52YWx1ZSxuPXIuY29udGVudFVSTCxpPSIiO2lmKG4pe3ZhciBvPW5bMF0sYT1vLnN1YnN0cihvLmxhc3RJbmRleE9mKCIvIikrMSk7aT10Ll91cmwrIi8iK2F9ZWxzZSBuPVtdLGk9dC5fdXJsKyIvIisoMCxjLmdlbmVyYXRlR1VJRCkoKTt0Ll9oeXBlcnR5UmVzb3VyY2VzLmhhc093blByb3BlcnR5KGkpfHwobi5wdXNoKGkpLHIuY29udGVudFVSTD1uKSx0Ll9oeXBlcnR5UmVzb3VyY2VzW2ldPXIsdC5fc3RvcmFnZU1hbmFnZXIuc2V0KCJoeXBlcnR5UmVzb3VyY2VzIiwxLHQuX2h5cGVydHlSZXNvdXJjZXMpLnRoZW4oZnVuY3Rpb24oKXt2YXIgcj17ZnJvbTplLnRvLHRvOmUuZnJvbSxpZDplLmlkLHR5cGU6InJlc3BvbnNlIixib2R5Ont2YWx1ZTppLGNvZGU6MjAwfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFlLmJvZHl8fCFlLmJvZHkucmVzb3VyY2UpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UuX29uUmVhZF0gbWFuZGF0b3J5IG1lc3NhZ2UgYm9keSByZXNvdXJjZSBtaXNzaW5nOiAiLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSxuPXtmcm9tOmUudG8sdG86ZS5mcm9tLGlkOmUuaWQsdHlwZToicmVzcG9uc2UiLGJvZHk6e319LGk9dC5faHlwZXJ0eVJlc291cmNlc1tyXTtpPyJmaWxlIj09PWkucmVzb3VyY2VUeXBlP3QuX29uUmVhZEZpbGUobixpKToobi5ib2R5LmNvZGU9MjAwLG4uYm9keS5wMnA9ITAsbi5ib2R5LnZhbHVlPWksdC5fYnVzLnBvc3RNZXNzYWdlKG4pKToobi5ib2R5LmNvZGU9NDA0LG4uYm9keS5kZXNjPSJDb250ZW50IE5vdCBGb3VuZCBmb3IgIityLHQuX2J1cy5wb3N0TWVzc2FnZShuKSl9fSx7a2V5OiJfb25SZWFkRmlsZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49bmV3IEZpbGVSZWFkZXI7aWYobi5vbmxvYWQ9ZnVuY3Rpb24obil7Zi5pbmZvKCJbRmlsZUh5cGVydHlSZXNvdXJjZS5pbml0XSBmaWxlIGxvYWRlZCAiLG4pLGUuYm9keS5jb2RlPTIwMCxlLmJvZHkucDJwPSEwLGUuYm9keS52YWx1ZT0oMCxjLmRlZXBDbG9uZSkodCksZS5ib2R5LnZhbHVlLmNvbnRlbnQ9bi50YXJnZXQucmVzdWx0LHIuX2J1cy5wb3N0TWVzc2FnZShlKX0sdC5taW1ldHlwZS5pbmNsdWRlcygidGV4dC8iKSluLnJlYWRBc1RleHQodC5jb250ZW50KTtlbHNle3ZhciBpPXQuY29udGVudCxvPXZvaWQgMDtvPUFycmF5LmlzQXJyYXkoaSk/bmV3IEJsb2IoaSx7dHlwZTp0Lm1pbWV0eXBlfSk6bmV3IEJsb2IoW2ldLHt0eXBlOnQubWltZXR5cGV9KSxuLnJlYWRBc0FycmF5QnVmZmVyKG8pfX19LHtrZXk6Il9vbkRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5KXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlLl9vbkRlbGV0ZV0gbWFuZGF0b3J5IG1lc3NhZ2UgYm9keSBtaXNzaW5nOiAiLGUpO2lmKGUuYm9keS5yZXNvdXJjZSlkZWxldGUgdC5faHlwZXJ0eVJlc291cmNlc1tlLmJvZHkucmVzb3VyY2VdO2Vsc2V7aWYoIWUuYm9keS5yZXNvdXJjZXMpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UuX29uRGVsZXRlXSBtYW5kYXRvcnkgcmVzb3VyY2UgbWlzc2luZzogIixlKTtlLmJvZHkucmVzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oZSl7ZGVsZXRlIHQuX2h5cGVydHlSZXNvdXJjZXNbZV19KX10Ll9zdG9yYWdlTWFuYWdlci5zZXQoImh5cGVydHlSZXNvdXJjZXMiLDEsdC5faHlwZXJ0eVJlc291cmNlcykudGhlbihmdW5jdGlvbigpe3ZhciByPXtmcm9tOmUudG8sdG86ZS5mcm9tLGlkOmUuaWQsdHlwZToicmVzcG9uc2UiLGJvZHk6e2NvZGU6MjAwfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfSl9fV0pLEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlfSgpO3QuZGVmYXVsdD1sLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ5NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDIwNSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cig1OSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMTEpLHk9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShwKSxoPXIoMTUpLHY9cig0OTgpLGc9cig5OSksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLG09cig1MDMpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPXIoNTA0KSx3PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoUiksUz15LmdldExvZ2dlcigiU3luY2hlck1hbmFnZXIiKSxPPWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICBfcmVnaXN0cnk6IFJlZ2lzdHJ5CiAgX2FsbG9jYXRvcjogQWRkcmVzc0FsbG9jYXRpb24KICAgX3JlcG9ydGVyczogeyBPYmplY3RVUkw6IFJlcG9ydGVyT2JqZWN0IH0KICBfb2JzZXJ2ZXJzOiB7IE9iamVjdFVSTDogT2JzZXJ2ZXJPYmplY3QgfQogICovCmZ1bmN0aW9uIFN5bmNoZXJNYW5hZ2VyKGUsdCxyLG4saSxvLGEscyl7aWYoKDAsZi5kZWZhdWx0KSh0aGlzLFN5bmNoZXJNYW5hZ2VyKSwhZSl0aHJvdyBuZXcgRXJyb3IoIltTeW5jaGVyIE1hbmFnZXJdIC0gbmVlZHMgdGhlIHJ1bnRpbWVVUkwgcGFyYW1ldGVyIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWRzIHRoZSBNZXNzYWdlQnVzIGluc3RhbmNlIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWRzIHRoZSBSZWdpc3RyeSBpbnN0YW5jZSIpO2lmKCFuKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXIgTWFuYWdlcl0gLSBuZWVkcyB0aGUgUnVudGltZUNhdGFsb2d1ZSBpbnN0YW5jZSIpO2lmKCFpKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXIgTWFuYWdlcl0gLSBuZWVkIHRoZSBzdG9yYWdlTWFuYWdlciBpbnN0YW5jZSIpO3ZhciB1PXRoaXM7dS5fYnVzPXQsdS5fcmVnaXN0cnk9cix1Ll9jYXRhbG9nPW4sdS5fc3RvcmFnZU1hbmFnZXI9aSx1Ll9pZGVudGl0eU1vZHVsZT1zLAovL1RPRE86IHRoZXNlIHNob3VsZCBiZSBzYXZlZCBpbiBwZXJzaXN0ZW5jZSBlbmdpbmU/CnUucnVudGltZVVSTD1lLHUuX3VybD1lKyIvc20iLHUuX29iamVjdFVSTD1lKyIvb2JqZWN0LWFsbG9jYXRpb24iLHUuX3JlcG9ydGVycz17fSx1Ll9vYnNlcnZlcnM9e30sdS5fZGF0YU9iamVjdHNTdG9yYWdlPWEsCi8vVE9ETzogdGhpcyBzaG91bGQgbm90IGJlIGhhcmRjb2RlZCEKdS5fZG9tYWluPSgwLGguZGl2aWRlVVJMKShlKS5kb21haW4sdS5fYWxsb2NhdG9yPW98fGIuZGVmYXVsdC5pbnN0YW5jZSxTLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gQWRkcmVzc0FsbG9jYXRpb25dIC0gIix1Ll9hbGxvY2F0b3IpLHQuYWRkTGlzdGVuZXIodS5fdXJsLGZ1bmN0aW9uKGUpe3N3aXRjaChTLmluZm8oIltTeW5jaGVyTWFuYWdlcl0gUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJjcmVhdGUiOnUuX29uQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjp1Ll9vbkRlbGV0ZShlKTticmVhaztjYXNlInN1YnNjcmliZSI6dS5fb25Mb2NhbFN1YnNjcmliZShlKTticmVhaztjYXNlInVuc3Vic2NyaWJlIjp1Ll9vbkxvY2FsVW5TdWJzY3JpYmUoZSl9fSl9cmV0dXJuKDAsZC5kZWZhdWx0KShTeW5jaGVyTWFuYWdlcixbe2tleToiX29uQ3JlYXRlIiwKLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gU3luY2hlciAtPiBjcmVhdGUKdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbSxuPWUudG87Ci8vIGNoZWNrIGlmIG1lc3NhZ2UgaXMgdG8gc2F2ZSBuZXcgY2hpbGRyZW5PYmplY3RzIGluIHRoZSBsb2NhbCBzdG9yYWdlCi8vIFRPRE86IGNoZWNrIGlmIG1lc3NhZ2UgaXMgdG8gc3RvcmUgbmV3IGNoaWxkIGluIHRoZSBsb2NhbCBzdG9yYWdlIGFuZCBjYWxsIHN0b3JlQ2hpbGQuIEhvdyB0byBkaXN0aW5ndWlzaCBmcm9tIG90aGVycz8KZS5ib2R5LmF0dHJpYnV0ZT90aGlzLl9zdG9yZUNoaWxkcmVucyhlKTohZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXN1bWUiKXx8ZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXN1bWUiKSYmIWUuYm9keS5yZXN1bWU/Ci8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gaW52aXRhdGlvbiBtZXNzYWdlCmUuYm9keS5hdXRob3Jpc2U/KHRoaXMuX2F1dGhvcmlzZShlKSxTLmluZm8oIltTeW5jaGVyTWFuYWdlci5vbkNyZWF0ZSAtIGludml0ZSBvYnNlcnZlcnNdIixlKSk6KAovLyB0aGlzIGlzIHRvIGNyZWF0ZSBhIG5ldyBkYXRhIG9iamVjdApTLmluZm8oIltTeW5jaGVyTWFuYWdlci5vbkNyZWF0ZSAtIENyZWF0ZSBOZXcgT2JqZWN0XSIsZSksdGhpcy5fbmV3Q3JlYXRlKGUpKToKLy8gSWYgZnJvbSB0aGUgaHlwZXJ0eSBzaWRlLCBjYWxsIHRoZSByZXN1bWVSZXBvcnRlciB3ZSB3aWxsIGhhdmUgcmVzdW1lID0gdHJ1ZScKLy8gc28gd2Ugd2lsbCBjcmVhdGUgYW4gcmVzdW1lZCBvYmplY3QgYW5kIHdpbGwgdHJ5IHRvIHJlc3VtZSB0aGUgb2JqZWN0IHByZXZpb3VzbHkgc2F2ZWQ7CnRoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5nZXRSZXNvdXJjZXNCeUNyaXRlcmlhKGUsITApLnRoZW4oZnVuY3Rpb24obyl7aWYoUy5pbmZvKCJbU3luY2hlck1hbmFnZXIgLSBDcmVhdGUgUmVzdW1lZF0gLSBSZXNvdXJjZXNCeUNyaXRlcmlhIHwgTWVzc2FnZTogIixlLCIgcmVzdWx0OiAiLG8pLG8mJigwLHUuZGVmYXVsdCkobykubGVuZ3RoPjApe3ZhciBzPVtdOygwLHUuZGVmYXVsdCkobykuZm9yRWFjaChmdW5jdGlvbihyKXtzLnB1c2godC5fcmVzdW1lQ3JlYXRlKGUsb1tyXSkpfSksYS5kZWZhdWx0LmFsbChzKS50aGVuKGZ1bmN0aW9uKG8pe1MubG9nKCJbU3luY2hlck1hbmFnZXIgLSBDcmVhdGUgUmVzdW1lZF0iLG8pOwovLyBUT0RPOiBzaG91ZCBzZW5kIHRoZSBpbmZvcm1hdGlvbiBpZiBzb21lIG9iamVjdCB3YXMgZmFpbDsKdmFyIGE9KDAsaS5kZWZhdWx0KShvKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuITEhPT1lfSk7Uy5pbmZvKCJbU3luY2hlck1hbmFnZXIub25DcmVhdGVdIHJldHVybmluZyByZXN1bWVkIG9iamVjdHMgOiAiLGEpLAovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlIHRvIFN5bmNoZXIgLT4gY3JlYXRlIHJlc3VtZQp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206bix0bzpyLGJvZHk6e2NvZGU6MjAwLHZhbHVlOmF9fSl9KX1lbHNlewovL2ZvcndhcmQgdG8gaHlwZXJ0eToKdmFyIGM9e307Yy5pZD1lLmlkLGMuZnJvbT1lLnRvLGMudG89ZS5mcm9tLGMudHlwZT0icmVzcG9uc2UiLGMuYm9keT17Y29kZTo0MDQsZGVzYzoiTm8gZGF0YSBvYmplY3RzIHJlcG9ydGVycyB0byBiZSByZXN1bWVkIn0sdC5fYnVzLnBvc3RNZXNzYWdlKGMpfX0pfX0se2tleToiX3N0b3JlQ2hpbGRyZW5zIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49ZS5ib2R5LmF0dHJpYnV0ZTsiY2hpbGRyZW5PYmplY3RzIj09PW4/dC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVDaGlsZHJlbnMoITEscix2b2lkIDAsZS5ib2R5LnZhbHVlKTp0Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZUNoaWxkcmVucyghMCxyLG4sZS5ib2R5LnZhbHVlKX19LHtrZXk6Il9uZXdDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLG49ZS5mcm9tLGk9KDAsaC5kaXZpZGVVUkwpKGUuZnJvbSkuZG9tYWluOwovLyBpZiByZXBvcnRlciBpcyBpbiBhIEludGVyd29ya2luZyBQcm90b3N0dWIgdGhlIHJ1bnRpbWUgZG9tYWluIGJhY2tlbmQgc2VydmljZXMgd2lsbCBiZSB1c2VkCnIuX3JlZ2lzdHJ5LmlzSW50ZXJ3b3JraW5nUHJvdG9TdHViKGUuZnJvbSkmJihpPSgwLGguZGl2aWRlVVJMKShyLnJ1bnRpbWVVUkwpLmRvbWFpbiksCi8vIFByb2Nlc3MgaW52aXRhdGlvbiBtZXNzYWdlIHRvIG9ic2VydmVycwovKmlmIChtc2cuYm9keS5hdXRob3Jpc2UpIHsKICAgICAgICBfdGhpcy5fYXV0aG9yaXNlKG1zZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9Ki8KLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoc2NoZW1lLCBjaGlsZHJlbikKci5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihlLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uKG8pe3ZhciBhPW8uc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMscz1hLnNjaGVtZT9hLnNjaGVtZS5jb25zdGFudDoicmVzb3VyY2UiLHU9YS5jaGlsZHJlbj9hLmNoaWxkcmVuLmNvbnN0YW50OltdOwovLyBEbyBzY2hlbWEgdmFsaWRhdGlvbgovLyBUT0RPOiBjaGVjayBpZiBpcyBuZWVkIHRvIGhhbmRsZSB3aXRoIHRoZSByZXN1bHQgb2YgdmFsaWRhdGlvbgooMCx2LnNjaGVtYVZhbGlkYXRpb24pKHMsbyxlLmJvZHkudmFsdWUpO3ZhciBjPXtuYW1lOmUuYm9keS52YWx1ZS5uYW1lLHNjaGVtYTplLmJvZHkudmFsdWUuc2NoZW1hLHJlcG9ydGVyOmUuYm9keS52YWx1ZS5yZXBvcnRlcixyZXNvdXJjZXM6ZS5ib2R5LnZhbHVlLnJlc291cmNlc30sZj1lLmJvZHkudmFsdWUucmVzb3VyY2U7Ci8vcmVxdWVzdCBhZGRyZXNzIGFsbG9jYXRpb24gb2YgYSBuZXcgb2JqZWN0IGZyb20gdGhlIG1zZy1ub2RlCnIuX2FsbG9jYXRvci5jcmVhdGUoaSwxLGMscyxmKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBvPSgwLGguZGVlcENsb25lKShlLmJvZHkudmFsdWUpO28udXJsPWkuYWRkcmVzc1swXSxvLmF1dGhvcmlzZT1lLmJvZHkuYXV0aG9yaXNlLG8uY2hpbGRyZW5zPXUsCi8vb2JqZWN0UmVnaXN0cmF0aW9uLmV4cGlyZXMgPSAzMDsvL1RPRE86IGdldCBpdCBmcm9tIGRhdGEgb2JqZWN0IGNvbmZpZ3VyYXRpb24gZGVzY3JpcHRpb24gd2hlbiBwcmVzZW50CmRlbGV0ZSBvLmRhdGEsUy5sb2coIltTeW5jaGVyTWFuYWdlci5fbmV3Q3JlYXRlXSBBTExPQ0FUT1IgQ1JFQVRFOiIsaSk7dmFyIGE9by51cmwrIi9zdWJzY3JpcHRpb24iO1MubG9nKCJbU3luY2hlck1hbmFnZXIuX25ld0NyZWF0ZV0gU3Vic2NyaXB0aW9uIFVSTCIsYSksCi8vVG8gcmVnaXN0ZXIgdGhlIGRhdGFPYmplY3QgaW4gdGhlIHJ1bnRpbWVSZWdpc3RyeQpTLmluZm8oIltTeW5jaGVyTWFuYWdlci5fbmV3Q3JlYXRlXSBSZWdpc3RlciBPYmplY3Q6ICIsbyksCi8vX3RoaXMuX3JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdChtc2cuYm9keS52YWx1ZS5uYW1lLCBtc2cuYm9keS52YWx1ZS5zY2hlbWEsIG9ialVSTCwgbXNnLmJvZHkudmFsdWUucmVwb3J0ZXIsIG1zZy5ib2R5LnZhbHVlLnJlc291cmNlcywgYWxsb2NhdGVkLCBtc2cuYm9keS5hdXRob3Jpc2UpLnRoZW4oKHJlc29sdmUpID0+IHsKci5fcmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0KG8pLnRoZW4oZnVuY3Rpb24oaSl7Uy5sb2coIltTeW5jaGVyTWFuYWdlci5fbmV3Q3JlYXRlXSBEYXRhT2JqZWN0IHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkIixpKTsKLy9hbGwgT0sgLT4gY3JlYXRlIHJlcG9ydGVyIGFuZCByZWdpc3RlciBsaXN0ZW5lcnMKdmFyIHM9dm9pZCAwO3M9dC5fcmVwb3J0ZXJzW28udXJsXT90Ll9yZXBvcnRlcnNbby51cmxdOm5ldyBfLmRlZmF1bHQocixuLG8udXJsKSxTLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gbmV3IENyZWF0ZV0gLSAiLGUpOwovLyBTdG9yZSBmb3IgZWFjaCByZXBvcnRlciBoeXBlcnR5IHRoZSBkYXRhT2JqZWN0CnZhciBjPXZvaWQgMCxmPSExO2UuYm9keS5oYXNPd25Qcm9wZXJ0eSgiaWRlbnRpdHkiKSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlJiZlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTD8oYz1lLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCxjLmluY2x1ZGVzKCJ1c2VyOi8vIil8fChmPSEwKSk6Zj0hMDsKLy8gc2hvdWxkIHdlIHVzZSB0aGUgbXNnLmJvZHkudmFsdWUgaW5zdGVhZD8KdmFyIGw9KDAsaC5kZWVwQ2xvbmUpKG8pO2wuc3Vic2NyaWJlclVzZXI9YyxsLmlzUmVwb3J0ZXI9ITAsCi8vIFN0b3JlIHRoZSBkYXRhT2JqZWN0IGluZm9ybWF0aW9uCmZ8fChyLl9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2V0KGwpLGUuYm9keS5oYXNPd25Qcm9wZXJ0eSgic3RvcmUiKSYmZS5ib2R5LnN0b3JlJiYocy5pc1RvU2F2ZURhdGE9ITAsci5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCxvLnVybCwiaXNUb1NhdmVEYXRhIiwhMCksZS5ib2R5LnZhbHVlLmRhdGEmJnIuX2RhdGFPYmplY3RzU3RvcmFnZS5zYXZlRGF0YSghMCxvLnVybCxudWxsLGUuYm9keS52YWx1ZS5kYXRhKSkpLAovLyBhZGRpbmcgbGlzdGVuZXJzIHRvIGZvcndhcmQgdG8gcmVwb3J0ZXIKcy5mb3J3YXJkU3Vic2NyaWJlKFtvLnVybCxhXSkudGhlbihmdW5jdGlvbigpe3MuYWRkQ2hpbGRyZW5zKHUpLnRoZW4oZnVuY3Rpb24oKXtyLl9yZXBvcnRlcnNbby51cmxdPXM7dmFyIHQ9e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzpuLGJvZHk6e2NvZGU6MjAwLHJlc291cmNlOm8udXJsLGNoaWxkcmVuUmVzb3VyY2VzOnV9fTsKLy9GTE9XLU9VVDogbWVzc2FnZSByZXNwb25zZSB0byBTeW5jaGVyIC0+IGNyZWF0ZQpyLl9idXMucG9zdE1lc3NhZ2UodCl9KX0pfSxmdW5jdGlvbihlKXtTLmVycm9yKGUpfSl9KX0pLmNhdGNoKGZ1bmN0aW9uKHQpewovL0ZMT1ctT1VUOiBlcnJvciBtZXNzYWdlIHJlc3BvbnNlIHRvIFN5bmNoZXIgLT4gY3JlYXRlCnZhciBpPXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86bixib2R5Ontjb2RlOjUwMCxkZXNjOnR9fTtyLl9idXMucG9zdE1lc3NhZ2UoaSl9KX19LHtrZXk6Il9yZXN1bWVDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oaSl7dmFyIG89ZS5mcm9tLGE9dC5zY2hlbWEscz10LnVybCx1PXQuZGF0YTtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyXSAtIHJlc3VtZSBjcmVhdGUiLGUsdCksCi8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKHNjaGVtZSwgY2hpbGRyZW4pCm4uX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IoYSkudGhlbihmdW5jdGlvbihhKXt2YXIgYz1hLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzLGY9Yy5zY2hlbWU/Yy5zY2hlbWUuY29uc3RhbnQ6InJlc291cmNlIixsPWMuY2hpbGRyZW4/Yy5jaGlsZHJlbi5jb25zdGFudDpbXTtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyXSAtIGdldERhdGFTY2hlbWFEZXNjcmlwdG9yOiAiLGEsbCksCi8vIERvIHNjaGVtYSB2YWxpZGF0aW9uCi8vIFRPRE86IGNoZWNrIGlmIGlzIG5lZWQgdG8gaGFuZGxlIHdpdGggdGhlIHJlc3VsdCBvZiB2YWxpZGF0aW9uCigwLHYuc2NoZW1hVmFsaWRhdGlvbikoZixhLHUpO3ZhciBkPSgwLGguZGVlcENsb25lKShlLmJvZHkudmFsdWUpO2QudXJsPXQudXJsLGQuZXhwaXJlcz10LmV4cGlyZXMsZGVsZXRlIGQuZGF0YTsKLy9hbGwgT0sgLT4gY3JlYXRlIHJlcG9ydGVyIGFuZCByZWdpc3RlciBsaXN0ZW5lcnMKdmFyIHA9dm9pZCAwO3A9ci5fcmVwb3J0ZXJzW3NdP3IuX3JlcG9ydGVyc1tzXTpuZXcgXy5kZWZhdWx0KG4sbyxzKSxwLmlzVG9TYXZlRGF0YT10LmlzVG9TYXZlRGF0YSxwLmZvcndhcmRTdWJzY3JpYmUoW3QudXJsXSkudGhlbihmdW5jdGlvbigpe3AuYWRkQ2hpbGRyZW5zKGwpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcC5yZXN1bWVTdWJzY3JpcHRpb25zKHQuc3Vic2NyaXB0aW9ucyksbi5fcmVwb3J0ZXJzW3NdPXAsUy5pbmZvKCJbU3luY2hlck1hbmFnZXIgLSByZXN1bWUgY3JlYXRlXSAtIHJlc29sdmVkIHJlc3VtZWQ6ICIsdCksbi5fZGVjcnlwdENoaWxkcmVucyh0LGwpfSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIHByZXZpb3VzIHByb21pc2UnKTsKaShlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1MuZXJyb3IoIltTeW5jaGVyTWFuYWdlciAtIHJlc3VtZSBjcmVhdGVdIC0gZmFpbCBvbiBhZGRDaGlsZHJlbnM6ICIsZSksaSghMSl9KX0pLFMuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLl9yZXN1bWVDcmVhdGVdIFJlZ2lzdGVyIE9iamVjdDogIixkKSxuLl9yZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3QoZCkudGhlbihmdW5jdGlvbihlKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9yZXN1bWVDcmVhdGVdIERhdGFPYmplY3QgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWxseSB1cGRhdGVkIixlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcigiW1N5bmNoZXJNYW5hZ2VyIC0gcmVzdW1lIGNyZWF0ZV0gLSBmYWlsIG9uIGdldERhdGFTY2hlbWFEZXNjcmlwdG9yOiAiLGUpLGkoITEpfSl9KX19LHtrZXk6Il9kZWNyeXB0Q2hpbGRyZW5zIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obil7aWYodCl7MD09PSgwLHUuZGVmYXVsdCkoZS5jaGlsZHJlbk9iamVjdHMpLmxlbmd0aCYmbihlKSx0LmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGk9ZS5jaGlsZHJlbk9iamVjdHNbdF07Uy5sb2coIltTeW5jaGVyTWFuYWdlci5fZGVjcnlwdENoaWxkcmVuc10gZGF0YU9iamVjdENoaWxkcyB0byBkZWNyeXB0ICIsaSk7dmFyIG89W107KDAsdS5kZWZhdWx0KShpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWlbdF0sYT10LnNwbGl0KCIjIilbMF07aWYoInN0cmluZyI9PXR5cGVvZiBuLnZhbHVlKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSBjcmVhdGVkQnkgIixhLCIgb2JqZWN0OiAiLG4udmFsdWUpO3ZhciBzPXIuX2lkZW50aXR5TW9kdWxlLmRlY3J5cHREYXRhT2JqZWN0KEpTT04ucGFyc2Uobi52YWx1ZSksZS51cmwpO28ucHVzaChzKX19KSxhLmRlZmF1bHQuYWxsKG8pLnRoZW4oZnVuY3Rpb24ocil7Uy5sb2coIltTeW5jaGVyTWFuYWdlci5fZGVjcnlwdENoaWxkcmVuc10gcmV0dXJuaW5nIGRlY3J5cHRlZCAiLHIpLHIuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj1yLnZhbHVlLnVybDtlLmNoaWxkcmVuT2JqZWN0c1t0XVtuXS52YWx1ZT1yLnZhbHVlfSksUy5sb2coIltTeW5jaGVyTWFuYWdlci5fZGVjcnlwdENoaWxkcmVuc10gc3RvcmVkT2JqZWN0ICIsZSksbihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1Mud2FybigiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSBmYWlsZWQgOiAiLGUpfSl9KX1lbHNlIG4oZSl9KX19LHtrZXk6Il9hdXRob3Jpc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keS5yZXNvdXJjZSl0aHJvdyBuZXcgRXJyb3IoIltTeW5jaGVyTWFuYWdlci5fYXV0aG9yaXNlXSBpbnZpdGF0aW9uIHJlcXVlc3Qgd2l0aG91dCBkYXRhIG9iamVjdCB1cmw6IixlKTt2YXIgcj1lLmJvZHkucmVzb3VyY2UrIi9zdWJzY3JpcHRpb24iLG49ISFlLmJvZHkucDJwJiZlLmJvZHkucDJwO1MubG9nKCJbU3luY2hlck1hbmFnZXIgLSAgYXV0aG9yaXNlXSAtICIsZSksZS5ib2R5LmF1dGhvcmlzZSYmZS5ib2R5LmF1dGhvcmlzZS5mb3JFYWNoKGZ1bmN0aW9uKGkpewovL0ZMT1ctT1VUOiBzZW5kIGludml0ZXMgdG8gbGlzdCBvZiByZW1vdGUgU3luY2hlciAtPiBfb25SZW1vdGVDcmVhdGUgLT4gb25Ob3RpZmljYXRpb24KdC5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJjcmVhdGUiLGZyb206cix0bzppLGJvZHk6e3AycDpuLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxzb3VyY2U6ZS5mcm9tLHZhbHVlOmUuYm9keS52YWx1ZSxzY2hlbWE6ZS5ib2R5LnNjaGVtYX19LGZ1bmN0aW9uKHIpewovLyBsZXRzIGZvcndhcmQgdGhlIGludml0YXRpb24gcmVzcG9uc2UKdmFyIG49e2Zyb206ZS50byx0bzplLmZyb20saWQ6ZS5pZCx0eXBlOnIudHlwZSxib2R5OnIuYm9keX07dC5fYnVzLnBvc3RNZXNzYWdlKG4pfSl9KX19LHtrZXk6Il9vbkRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXQuX3JlcG9ydGVyc1tyXTtuJiYoCi8vVE9ETzogaXMgdGhlcmUgYW55IHBvbGljeSB2ZXJpZmljYXRpb24gYmVmb3JlIGRlbGV0ZT8Kbi5kZWxldGUoKSx0aGlzLl9kYXRhT2JqZWN0c1N0b3JhZ2UuZGVsZXRlUmVzb3VyY2UocikudGhlbihmdW5jdGlvbihuKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gb25EZWxldGVdIC0gZGVsZXRlUmVzb3VyY2U6ICIsbiksdC5fcmVnaXN0cnkudW5yZWdpc3RlckRhdGFPYmplY3QociksCi8vVE9ETzogdW5yZWdpc3RlciBvYmplY3Q/CnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMH19KX0pKX19LHtrZXk6Il9vbkxvY2FsU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5nZXRSZXNvdXJjZXNCeUNyaXRlcmlhKGUsITEpLnRoZW4oZnVuY3Rpb24ocil7aWYoUy5pbmZvKCJbU3luY2hlck1hbmFnZXIgLSBTdWJzY3JpYmVdIC0gUmVzb3VyY2VzQnlDcml0ZXJpYSB8IE1lc3NhZ2U6ICIsZSwiIHJlc3VsdDogIixyKSxyJiYoMCx1LmRlZmF1bHQpKHIpLmxlbmd0aD4wKXt2YXIgbj1bXTsKLy8gVE9ETzogc2hvdWxkIHJldXNlIHRoZSBzdG9yYWdlZCBpbmZvcm1hdGlvbgooMCx1LmRlZmF1bHQpKHIpLmZvckVhY2goZnVuY3Rpb24oaSl7Uy5sb2coIltTeW5jaGVyTWFuYWdlciAtIHJlc3VtZSBTdWJzY3JpYmVdIC0gcmV1c2UgY3VycmVudCBvYmplY3QgdXJsOiAiLHJbaV0pLG4ucHVzaCh0Ll9yZXN1bWVTdWJzY3JpcHRpb24oZSxyW2ldKSl9KSxhLmRlZmF1bHQuYWxsKG4pLnRoZW4oZnVuY3Rpb24ocil7Uy5sb2coIltTeW5jaGVyTWFuYWdlciAtIE9ic2VydmVycyBSZXN1bWVkXSIscik7Ci8vIFRPRE86IHNob3VkIHNlbmQgdGhlIGluZm9ybWF0aW9uIGlmIHNvbWUgb2JqZWN0IHdhcyBmYWlsOwp2YXIgbj0oMCxpLmRlZmF1bHQpKHIpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hMSE9PWV9KTsKLy9GTE9XLU9VVDogbWVzc2FnZSByZXNwb25zZSB0byBTeW5jaGVyIC0+IGNyZWF0ZQp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsdmFsdWU6bn19KX0pfWVsc2UgaWYoZS5ib2R5LnNjaGVtYSYmZS5ib2R5LnJlc291cmNlKVMubG9nKCJbU3luY2hlck1hbmFnZXIub25Mb2NhbFN1YnNjcmliZSAtIG5ldyBTdWJzY3JpYmVdIC0gIixlLmJvZHkuc2NoZW1hLGUuYm9keS5yZXNvdXJjZSksdC5fbmV3U3Vic2NyaXB0aW9uKGUpO2Vsc2V7Ci8vZm9yd2FyZCB0byBoeXBlcnR5Ogp2YXIgbz17fTtvLmlkPWUuaWQsby5mcm9tPWUudG8sby50bz1lLmZyb20sby50eXBlPSJyZXNwb25zZSIsby5ib2R5PXtjb2RlOjQwNCxkZXNjOiJObyBkYXRhIG9iamVjdHMgb2JzZXJ2ZXJzIHRvIGJlIHJlc3VtZWQifSx0Ll9idXMucG9zdE1lc3NhZ2Uobyl9fSl9fSx7a2V5OiJfbmV3U3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcyxuPWUuYm9keS5yZXNvdXJjZSxpPWUuZnJvbSxvPSgwLGguZGl2aWRlVVJMKShuKS5kb21haW4sYT1uKyIvc3Vic2NyaXB0aW9uIixzPW4rIi9jaGlsZHJlbi8iOwovL2dldCBzY2hlbWEgZnJvbSBjYXRhbG9ndWUgYW5kIHBhcnNlIC0+IChjaGlsZHJlbikKci5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihlLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uKHUpe3ZhciBjPXUuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMsZj1jLmNoaWxkcmVuP2MuY2hpbGRyZW4uY29uc3RhbnQ6W10sbD1bXTtsLnB1c2gobisiL2NoYW5nZXMiKSxmLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGwucHVzaChzK2UpfSk7Ci8vY2hpbGRyZW4gYWRkcmVzc2VzCi8vRkxPVy1PVVQ6IHN1YnNjcmliZSBtZXNzYWdlIHRvIHRoZSBtc2ctbm9kZSwgcmVnaXN0ZXJpbmcgbGlzdGVuZXJzIG9uIHRoZSBicm9rZXIKdmFyIGQ9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrbysiL3NtIixib2R5OntpZGVudGl0eTplLmJvZHkuaWRlbnRpdHkscmVzb3VyY2VzOmwsc291cmNlOml9fTsKLy9zdWJzY3JpYmUgaW4gbXNnLW5vZGUKci5fYnVzLnBvc3RNZXNzYWdlKGQsZnVuY3Rpb24obyl7aWYoUy5sb2coIm5vZGUtc3Vic2NyaWJlLXJlc3BvbnNlKG9ic2VydmVyKTogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7Ci8vRkxPVy1PVVQ6IHJlcGx5IHdpdGggcHJvdmlzaW9uYWwgcmVzcG9uc2UKci5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86aSxib2R5Ontjb2RlOjEwMCxjaGlsZHJlblJlc291cmNlczpmLHNjaGVtYTplLmJvZHkuc2NoZW1hLHJlc291cmNlOmUuYm9keS5yZXNvdXJjZX19KTsKLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gcmVtb3RlIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQp2YXIgcz17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX3VybCx0bzphLGJvZHk6e2lkZW50aXR5OmQuYm9keS5pZGVudGl0eSxzdWJzY3JpYmVyOml9fTsKLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQplLmJvZHkuaGFzT3duUHJvcGVydHkoIm11dHVhbCIpJiYocy5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsKSxTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdTdWJzY3JpcHRpb25dIixzLGUpLAovL3N1YnNjcmliZSB0byByZXBvcnRlciBTTQpyLl9idXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihvKXtpZihTLmxvZygicmVwb3J0ZXItc3Vic2NyaWJlLXJlc3BvbnNlLW5ldzogIixvKSwyMDA9PT1vLmJvZHkuY29kZSl7Uy5sb2coIltTeW5jaGVyTWFuYWdlci5fbmV3U3Vic2NyaXB0aW9uXSAtIG9ic2VydmVyczogIixyLl9vYnNlcnZlcnMsbixyLl9vYnNlcnZlcnNbbl0pO3ZhciBhPXIuX29ic2VydmVyc1tuXTthfHwoYT1uZXcgdy5kZWZhdWx0KHIsbixmKSxTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdTdWJzY3JpcHRpb25dIC0gb2JzZXJ2ZXJzOiBjcmVhdGUgbmV3IE9ic2VydmVyT2JqZWN0OiAiLGEpLHIuX29ic2VydmVyc1tuXT1hLAovLyByZWdpc3RlciBuZXcgaHlwZXJ0eSBzdWJzY3JpcHRpb24KYS5hZGRTdWJzY3JpcHRpb24oaSksCi8vIGFkZCBjaGlsZHJlbnMgYW5kIGxpc3RlbmVycyB0byBzYXZlIGRhdGEgaWYgbmVjZXNzYXJ5CmEuYWRkQ2hpbGRyZW5zKGYpKTt2YXIgcz0hMSx1PXZvaWQgMDtlLmJvZHkuaGFzT3duUHJvcGVydHkoImlkZW50aXR5IikmJmUuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkw/KHU9ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsdS5pbmNsdWRlcygidXNlcjovLyIpfHwocz0hMCkpOnM9ITA7dmFyIGM9KDAsaC5kZWVwQ2xvbmUpKG8uYm9keS52YWx1ZSk7Ci8vIGxldCBjaGlsZHJlbk9iamVjdHMgPSBtZXRhZGF0YS5jaGlsZHJlbk9iamVjdHMgfHwge307CmRlbGV0ZSBjLmRhdGEsZGVsZXRlIGMuY2hpbGRyZW5PYmplY3RzLGMuY2hpbGRyZW5zPWYsYy5zdWJzY3JpYmVyVXNlcj11LGMuaXNSZXBvcnRlcj0hMSxjLnN1YnNjcmliZXJIeXBlcnR5PWksc3x8KAovL190aGlzLl9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2V0KG9ialVSTCwgZmFsc2UsIG1zZy5ib2R5LnNjaGVtYSwgJ29uJywgcmVwbHkuYm9keS5vd25lciwgaHlwZXJ0eVVSTCwgY2hpbGRyZW5zLCB1c2VyVVJMKTsKci5fZGF0YU9iamVjdHNTdG9yYWdlLnNldChjKSwoYy5oYXNPd25Qcm9wZXJ0eSgic3RvcmUiKSYmYy5zdG9yZXx8Yy5oYXNPd25Qcm9wZXJ0eSgiaXNUb1NhdmVEYXRhIikmJmMuaXNUb1NhdmVEYXRhKSYmKGEuaXNUb1NhdmVEYXRhPSEwLHIuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITEsbiwiaXNUb1NhdmVEYXRhIiwhMCksci5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVEYXRhKCExLG4sbnVsbCxvLmJvZHkudmFsdWUuZGF0YSkpKSwKLy9mb3J3YXJkIHRvIGh5cGVydHk6Cm8uaWQ9ZS5pZCxvLmZyb209ci5fdXJsLG8udG89aSxvLmJvZHkuc2NoZW1hPWUuYm9keS5zY2hlbWEsby5ib2R5LnJlc291cmNlPWUuYm9keS5yZXNvdXJjZSwKLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQplLmJvZHkuaGFzT3duUHJvcGVydHkoIm11dHVhbCIpJiYoby5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsKSxTLmxvZygiW3N1YnNjcmliZV0gLSBuZXcgc3Vic2NyaXB0aW9uOiAiLGUsbyxhKSx0Ll9idXMucG9zdE1lc3NhZ2Uobyl9fSl9ZWxzZQovL2xpc3RlbmVyIHJlamVjdGVkCnIuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmksYm9keTpvLmJvZHl9KX0pfSl9fSx7a2V5OiJfcmVzdW1lU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obil7dmFyIGk9dC51cmwsbz10LnNjaGVtYSxhPWUuZnJvbSxzPWkrIi9jaGlsZHJlbi8iO1MubG9nKCJbU3luY2hlck1hbmFnZXIgLSBSZXVzZVN1YnNjcmlwdGlvbl0gLSBvYmpVUkw6ICIsaSwiIC0gc2NoZW1hOiIsbyksCi8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKGNoaWxkcmVuKQovLyBUT0RPOiByZW1vdmUgdGhpcyBzaW5jZSBjaGlsZHJlbiByZXNvdXJjZXMgc2hvdWxkIGJlIGF2YWlsYWJsZSBpbiB0aGUgRGF0YU9iamVjdHNTdG9yYWdlCnIuX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IobykudGhlbihmdW5jdGlvbihuKXt2YXIgdT1uLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzLGM9dS5jaGlsZHJlbj91LmNoaWxkcmVuLmNvbnN0YW50OltdLGY9W107Zi5wdXNoKGkrIi9jaGFuZ2VzIiksYy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBmLnB1c2gocytlKX0pLAovL0ZMT1ctT1VUOiByZXBseSB3aXRoIHByb3Zpc2lvbmFsIHJlc3BvbnNlCnIuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmEsYm9keTp7Y29kZToxMDAsY2hpbGRyZW5SZXNvdXJjZXM6YyxzY2hlbWE6byxyZXNvdXJjZTppfX0pOwovL0ZMT1ctT1VUOiBzdWJzY3JpYmUgbWVzc2FnZSB0byByZW1vdGUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlU3Vic2NyaWJlCi8qbGV0IG9ialN1YnNjcmliZU1zZyA9IHsKICAgICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IHRoaXMuX3VybCwgdG86IG9ialVSTFN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgYm9keTogeyBzdWJzY3JpYmVyOiBoeXBlcnR5VVJMLCBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHkgfQogICAgICAgICAgfTsKICAgICAgICAgICAvL3N1YnNjcmliZSB0byByZXBvcnRlciBTTQogICAgICAgICAgdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG9ialN1YnNjcmliZU1zZywgKHJlcGx5KSA9PiB7Ki8KdmFyIGw9ci5fb2JzZXJ2ZXJzW2ldOwovLyBPYmplY3QuYXNzaWduKHN0b3JlZE9iamVjdC5kYXRhLCByZXBseS5ib2R5LnZhbHVlLmRhdGEpOwovLyBPYmplY3QuYXNzaWduKHN0b3JlZE9iamVjdC5jaGlsZHJlbnMsIHJlcGx5LmJvZHkudmFsdWUuY2hpbGRyZW5zKTsKLy9sb2cubG9nKCdbc3Vic2NyaWJlXSAtIHJlc3VtZSBzdWJzY3JpcHRpb246ICcsIG1zZywgcmVwbHksIHN0b3JlZE9iamVjdCwgb2JzZXJ2ZXIpOwovL3JlZ2lzdGVyIG5ldyBoeXBlcnR5IHN1YnNjcmlwdGlvbgpyZXR1cm4gbHx8KGw9bmV3IHcuZGVmYXVsdChyLGksYyksbC5pc1RvU2F2ZURhdGE9dC5pc1RvU2F2ZURhdGEsci5fb2JzZXJ2ZXJzW2ldPWwpLGwuYWRkU3Vic2NyaXB0aW9uKGEpLGwuYWRkQ2hpbGRyZW5zKGMpLHIuX2RlY3J5cHRDaGlsZHJlbnModCxjKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ3Jlc3VsdCBvZiBwcmV2aW91cyBwcm9taXNlJyk7Cm4oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJbU3luY2hlck1hbmFnZXIgLSByZXN1bWUgc3Vic2NyaXB0aW9uXSAtIGZhaWwgb24gZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3I6ICIsZSksbighMSl9KX0pfX0se2tleToiX29uTG9jYWxVblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPShlLmZyb20sZS5ib2R5LnJlc291cmNlKSxuPXQuX29ic2VydmVyc1tyXTtuJiYoCi8vVE9ETzogaXMgdGhlcmUgYW55IHBvbGljeSB2ZXJpZmljYXRpb24gYmVmb3JlIGRlbGV0ZT8Kbi5yZW1vdmVTdWJzY3JpcHRpb24oZSksCi8vVE9ETzogZGVzdHJveSBvYmplY3QgaW4gdGhlIHJlZ2lzdHJ5Pwp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fSksdGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLmRlbGV0ZVJlc291cmNlKHIpLAovL1RPRE86IHJlbW92ZSBPYmplY3QgaWYgbm8gbW9yZSBzdWJzY3JpcHRpb24/CmRlbGV0ZSB0Ll9vYnNlcnZlcnNbcl0pfX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxTeW5jaGVyTWFuYWdlcn0oKTt0LmRlZmF1bHQ9TyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0OTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDk2KSxlLmV4cG9ydHM9cigxMykuT2JqZWN0LnZhbHVlc30sLyogNDk2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzCnZhciBuPXIoMjYpLGk9cig0OTcpKCExKTtuKG4uUywiT2JqZWN0Iix7dmFsdWVzOmZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfX0pfSwvKiA0OTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNjcpLGk9cig0NCksbz1yKDc3KS5mO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciByLGE9aSh0KSxzPW4oYSksdT1zLmxlbmd0aCxjPTAsZj1bXTt1PmM7KW8uY2FsbChhLHI9c1tjKytdKSYmZi5wdXNoKGU/W3IsYVtyXV06YVtyXSk7cmV0dXJuIGZ9fX0sLyogNDk4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gc2NoZW1hVmFsaWRhdGlvbihlLHQscil7dHJ5e3ZhciBuPXIsaT10LnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZTsKLy8gYWRkIHN1cHBvcnQgZm9yIHNjaGVtYSByZWZlcmVuY2luZyBpdHNlbGYKby5kZWZhdWx0LmFkZFNjaGVtYShpLmlkLGkpOwovLyB2YWxpZGF0ZQp2YXIgYT1vLmRlZmF1bHQudmFsaWRhdGVNdWx0aXBsZShuLGkpOwovLyBkZWxldGUgZXJyb3Igc3RhY2tzIHRvIGltcHJvdmUgbG9nZ2luZwphLmVycm9ycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLnN0YWNrfSksIWEudmFsaWR8fGEubWlzc2luZy5sZW5ndGh9Y2F0Y2goZSl7fX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0NSk7X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKTt0LnNjaGVtYVZhbGlkYXRpb249c2NoZW1hVmFsaWRhdGlvbjt2YXIgaT1yKDQ5OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpfSwvKiA0OTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBub3RSZWFsbHlQZXJjZW50RW5jb2RlKGUpe3JldHVybiBlbmNvZGVVUkkoZSkucmVwbGFjZSgvJTI1WzAtOV1bMC05XS9nLGZ1bmN0aW9uKGUpe3JldHVybiIlIitlLnN1YnN0cmluZygzKX0pfWZ1bmN0aW9uIHVyaVRlbXBsYXRlU3Vic3RpdHV0aW9uKGUpe3ZhciB0PSIiO2hbZS5jaGFyQXQoMCldJiYodD1lLmNoYXJBdCgwKSxlPWUuc3Vic3RyaW5nKDEpKTt2YXIgcj0iIixuPSIiLGk9ITAsbz0hMSxhPSExOyIrIj09PXQ/aT0hMToiLiI9PT10PyhuPSIuIixyPSIuIik6Ii8iPT09dD8obj0iLyIscj0iLyIpOiIjIj09PXQ/KG49IiMiLGk9ITEpOiI7Ij09PXQ/KG49IjsiLHI9IjsiLG89ITAsYT0hMCk6Ij8iPT09dD8obj0iPyIscj0iJiIsbz0hMCk6IiYiPT09dCYmKG49IiYiLHI9IiYiLG89ITApO2Zvcih2YXIgcz1bXSx1PWUuc3BsaXQoIiwiKSxjPVtdLGY9e30sbD0wO2w8dS5sZW5ndGg7bCsrKXt2YXIgcD11W2xdLGc9bnVsbDtpZigtMSE9PXAuaW5kZXhPZigiOiIpKXt2YXIgYj1wLnNwbGl0KCI6Iik7cD1iWzBdLGc9cGFyc2VJbnQoYlsxXSwxMCl9Zm9yKHZhciBtPXt9O3ZbcC5jaGFyQXQocC5sZW5ndGgtMSldOyltW3AuY2hhckF0KHAubGVuZ3RoLTEpXT0hMCxwPXAuc3Vic3RyaW5nKDAscC5sZW5ndGgtMSk7dmFyIF89e3RydW5jYXRlOmcsbmFtZTpwLHN1ZmZpY2VzOm19O2MucHVzaChfKSxmW3BdPV8scy5wdXNoKHApfXZhciBSPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0iIixzPTAsdT0wO3U8Yy5sZW5ndGg7dSsrKXt2YXIgZj1jW3VdLGw9ZShmLm5hbWUpO2lmKG51bGw9PT1sfHx2b2lkIDA9PT1sfHxBcnJheS5pc0FycmF5KGwpJiYwPT09bC5sZW5ndGh8fCJvYmplY3QiPT09KHZvaWQgMD09PWw/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShsKSkmJjA9PT0oMCx5LmRlZmF1bHQpKGwpLmxlbmd0aClzKys7ZWxzZSBpZih0Kz11PT09cz9uOnJ8fCIsIixBcnJheS5pc0FycmF5KGwpKXtvJiYodCs9Zi5uYW1lKyI9Iik7Zm9yKHZhciBwPTA7cDxsLmxlbmd0aDtwKyspcD4wJiYodCs9Zi5zdWZmaWNlc1siKiJdP3J8fCIsIjoiLCIsZi5zdWZmaWNlc1siKiJdJiZvJiYodCs9Zi5uYW1lKyI9IikpLHQrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KGxbcF0pLnJlcGxhY2UoLyEvZywiJTIxIik6bm90UmVhbGx5UGVyY2VudEVuY29kZShsW3BdKX1lbHNlIGlmKCJvYmplY3QiPT09KHZvaWQgMD09PWw/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShsKSkpe28mJiFmLnN1ZmZpY2VzWyIqIl0mJih0Kz1mLm5hbWUrIj0iKTt2YXIgaD0hMDtmb3IodmFyIHYgaW4gbClofHwodCs9Zi5zdWZmaWNlc1siKiJdP3J8fCIsIjoiLCIpLGg9ITEsdCs9aT9lbmNvZGVVUklDb21wb25lbnQodikucmVwbGFjZSgvIS9nLCIlMjEiKTpub3RSZWFsbHlQZXJjZW50RW5jb2RlKHYpLHQrPWYuc3VmZmljZXNbIioiXT8iPSI6IiwiLHQrPWk/ZW5jb2RlVVJJQ29tcG9uZW50KGxbdl0pLnJlcGxhY2UoLyEvZywiJTIxIik6bm90UmVhbGx5UGVyY2VudEVuY29kZShsW3ZdKX1lbHNlIG8mJih0Kz1mLm5hbWUsYSYmIiI9PT1sfHwodCs9Ij0iKSksbnVsbCE9Zi50cnVuY2F0ZSYmKGw9bC5zdWJzdHJpbmcoMCxmLnRydW5jYXRlKSksdCs9aT9lbmNvZGVVUklDb21wb25lbnQobCkucmVwbGFjZSgvIS9nLCIlMjEiKTpub3RSZWFsbHlQZXJjZW50RW5jb2RlKGwpfXJldHVybiB0fTtyZXR1cm4gUi52YXJOYW1lcz1zLHtwcmVmaXg6bixzdWJzdGl0dXRpb246Un19ZnVuY3Rpb24gVXJpVGVtcGxhdGUoZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgVXJpVGVtcGxhdGUpKXJldHVybiBuZXcgVXJpVGVtcGxhdGUoZSk7Zm9yKHZhciB0PWUuc3BsaXQoInsiKSxyPVt0LnNoaWZ0KCldLG49W10saT1bXSxvPVtdO3QubGVuZ3RoPjA7KXt2YXIgYT10LnNoaWZ0KCkscz1hLnNwbGl0KCJ9IilbMF0sdT1hLnN1YnN0cmluZyhzLmxlbmd0aCsxKSxjPXVyaVRlbXBsYXRlU3Vic3RpdHV0aW9uKHMpO2kucHVzaChjLnN1YnN0aXR1dGlvbiksbi5wdXNoKGMucHJlZml4KSxyLnB1c2godSksbz1vLmNvbmNhdChjLnN1YnN0aXR1dGlvbi52YXJOYW1lcyl9dGhpcy5maWxsPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1yWzBdLG49MDtuPGkubGVuZ3RoO24rKyl7dCs9KDAsaVtuXSkoZSksdCs9cltuKzFdfXJldHVybiB0fSx0aGlzLnZhck5hbWVzPW8sdGhpcy50ZW1wbGF0ZT1lfWZ1bmN0aW9uIHJlY3Vyc2l2ZUNvbXBhcmUoZSx0KXtpZihlPT09dClyZXR1cm4hMDtpZihlJiZ0JiYib2JqZWN0Ij09PSh2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkoZSkpJiYib2JqZWN0Ij09PSh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkodCkpKXtpZihBcnJheS5pc0FycmF5KGUpIT09QXJyYXkuaXNBcnJheSh0KSlyZXR1cm4hMTtpZihBcnJheS5pc0FycmF5KGUpKXtpZihlLmxlbmd0aCE9PXQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWlmKCFyZWN1cnNpdmVDb21wYXJlKGVbcl0sdFtyXSkpcmV0dXJuITF9ZWxzZXt2YXIgbjtmb3IobiBpbiBlKWlmKHZvaWQgMD09PXRbbl0mJnZvaWQgMCE9PWVbbl0pcmV0dXJuITE7Zm9yKG4gaW4gdClpZih2b2lkIDA9PT1lW25dJiZ2b2lkIDAhPT10W25dKXJldHVybiExO2ZvcihuIGluIGUpaWYoIXJlY3Vyc2l2ZUNvbXBhcmUoZVtuXSx0W25dKSlyZXR1cm4hMX1yZXR1cm4hMH1yZXR1cm4hMX0KLy8gcGFyc2VVUkkoKSBhbmQgcmVzb2x2ZVVybCgpIGFyZSBmcm9tIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tLzEwODg4NTAKLy8gICAtICByZWxlYXNlZCBhcyBwdWJsaWMgZG9tYWluIGJ5IGF1dGhvciAoIllhZmZsZSIpIC0gc2VlIGNvbW1lbnRzIG9uIGdpc3QKZnVuY3Rpb24gcGFyc2VVUkkoZSl7dmFyIHQ9U3RyaW5nKGUpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKS5tYXRjaCgvXihbXjpcLz8jXSs6KT8oXC9cLyg/OlteOkBdKig/OjpbXjpAXSopP0ApPygoW146XC8/I10qKSg/OjooXGQqKSk/KSk/KFtePyNdKikoXD9bXiNdKik/KCNbXHNcU10qKT8vKTsKLy8gYXV0aG9yaXR5ID0gJy8vJyArIHVzZXIgKyAnOicgKyBwYXNzICdAJyArIGhvc3RuYW1lICsgJzonIHBvcnQKcmV0dXJuIHQ/e2hyZWY6dFswXXx8IiIscHJvdG9jb2w6dFsxXXx8IiIsYXV0aG9yaXR5OnRbMl18fCIiLGhvc3Q6dFszXXx8IiIsaG9zdG5hbWU6dFs0XXx8IiIscG9ydDp0WzVdfHwiIixwYXRobmFtZTp0WzZdfHwiIixzZWFyY2g6dFs3XXx8IiIsaGFzaDp0WzhdfHwiIn06bnVsbH1mdW5jdGlvbiByZXNvbHZlVXJsKGUsdCl7Ci8vIFJGQyAzOTg2CnJldHVybiB0PXBhcnNlVVJJKHR8fCIiKSxlPXBhcnNlVVJJKGV8fCIiKSx0JiZlPyh0LnByb3RvY29sfHxlLnByb3RvY29sKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHk/dC5hdXRob3JpdHk6ZS5hdXRob3JpdHkpK2Z1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiBlLnJlcGxhY2UoL14oXC5cLj8oXC98JCkpKy8sIiIpLnJlcGxhY2UoL1wvKFwuKFwvfCQpKSsvZywiLyIpLnJlcGxhY2UoL1wvXC5cLiQvLCIvLi4vIikucmVwbGFjZSgvXC8/W15cL10qL2csZnVuY3Rpb24oZSl7Ii8uLiI9PT1lP3QucG9wKCk6dC5wdXNoKGUpfSksdC5qb2luKCIiKS5yZXBsYWNlKC9eXC8vLCIvIj09PWUuY2hhckF0KDApPyIvIjoiIil9KHQucHJvdG9jb2x8fHQuYXV0aG9yaXR5fHwiLyI9PT10LnBhdGhuYW1lLmNoYXJBdCgwKT90LnBhdGhuYW1lOnQucGF0aG5hbWU/KGUuYXV0aG9yaXR5JiYhZS5wYXRobmFtZT8iLyI6IiIpK2UucGF0aG5hbWUuc2xpY2UoMCxlLnBhdGhuYW1lLmxhc3RJbmRleE9mKCIvIikrMSkrdC5wYXRobmFtZTplLnBhdGhuYW1lKSsodC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fHQucGF0aG5hbWU/dC5zZWFyY2g6dC5zZWFyY2h8fGUuc2VhcmNoKSt0Lmhhc2g6bnVsbH1mdW5jdGlvbiBnZXREb2N1bWVudFVyaShlKXtyZXR1cm4gZS5zcGxpdCgiIyIpWzBdfWZ1bmN0aW9uIG5vcm1TY2hlbWEoZSx0KXtpZihlJiYib2JqZWN0Ij09PSh2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkoZSkpKWlmKHZvaWQgMD09PXQ/dD1lLmlkOiJzdHJpbmciPT10eXBlb2YgZS5pZCYmKHQ9cmVzb2x2ZVVybCh0LGUuaWQpLGUuaWQ9dCksQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKylub3JtU2NoZW1hKGVbcl0sdCk7ZWxzZXsic3RyaW5nIj09dHlwZW9mIGUuJHJlZiYmKGUuJHJlZj1yZXNvbHZlVXJsKHQsZS4kcmVmKSk7Zm9yKHZhciBuIGluIGUpImVudW0iIT09biYmbm9ybVNjaGVtYShlW25dLHQpfX1mdW5jdGlvbiBkZWZhdWx0RXJyb3JSZXBvcnRlcihlKXtlPWV8fCJlbiI7dmFyIHQ9T1tlXTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHI9dFtlLmNvZGVdfHxTW2UuY29kZV07aWYoInN0cmluZyIhPXR5cGVvZiByKXJldHVybiJVbmtub3duIGVycm9yIGNvZGUgIitlLmNvZGUrIjogIisoMCxpLmRlZmF1bHQpKGUubWVzc2FnZVBhcmFtcyk7dmFyIG49ZS5wYXJhbXM7Ci8vIEFkYXB0ZWQgZnJvbSBDcm9ja2ZvcmQncyBzdXBwbGFudCgpCnJldHVybiByLnJlcGxhY2UoL1x7KFtee31dKilcfS9nLGZ1bmN0aW9uKGUsdCl7dmFyIHI9blt0XTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHJ8fCJudW1iZXIiPT10eXBlb2Ygcj9yOmV9KX19ZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKGUsdCxyLG4saSl7aWYoRXJyb3IuY2FsbCh0aGlzKSx2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcigiTm8gZXJyb3IgY29kZSBzdXBwbGllZDogIituKTt0aGlzLm1lc3NhZ2U9IiIsdGhpcy5wYXJhbXM9dCx0aGlzLmNvZGU9ZSx0aGlzLmRhdGFQYXRoPXJ8fCIiLHRoaXMuc2NoZW1hUGF0aD1ufHwiIix0aGlzLnN1YkVycm9ycz1pfHxudWxsO3ZhciBvPW5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpO2lmKHRoaXMuc3RhY2s9by5zdGFja3x8by5zdGFja3RyYWNlLCF0aGlzLnN0YWNrKXRyeXt0aHJvdyBvfWNhdGNoKG8pe3RoaXMuc3RhY2s9by5zdGFja3x8by5zdGFja3RyYWNlfX1mdW5jdGlvbiBpc1RydXN0ZWRVcmwoZSx0KXtpZih0LnN1YnN0cmluZygwLGUubGVuZ3RoKT09PWUpe3ZhciByPXQuc3Vic3RyaW5nKGUubGVuZ3RoKTtpZih0Lmxlbmd0aD4wJiYiLyI9PT10LmNoYXJBdChlLmxlbmd0aC0xKXx8IiMiPT09ci5jaGFyQXQoMCl8fCI/Ij09PXIuY2hhckF0KDApKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGNyZWF0ZUFwaShlKXt2YXIgdCxyLG49bmV3IGcsaT17c2V0RXJyb3JSZXBvcnRlcjpmdW5jdGlvbihlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/dGhpcy5sYW5ndWFnZShlKToocj1lLCEwKX0sYWRkRm9ybWF0OmZ1bmN0aW9uKCl7bi5hZGRGb3JtYXQuYXBwbHkobixhcmd1bWVudHMpfSxsYW5ndWFnZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8oT1tlXXx8KGU9ZS5zcGxpdCgiLSIpWzBdKSwhIU9bZV0mJih0PWUsZSkpOnR9LGFkZExhbmd1YWdlOmZ1bmN0aW9uKGUsdCl7dmFyIHI7Zm9yKHIgaW4gXyl0W3JdJiYhdFtfW3JdXSYmKHRbX1tyXV09dFtyXSk7dmFyIG49ZS5zcGxpdCgiLSIpWzBdO2lmKE9bbl0pe09bZV09KDAsZi5kZWZhdWx0KShPW25dKTtmb3IociBpbiB0KXZvaWQgMD09PU9bbl1bcl0mJihPW25dW3JdPXRbcl0pLE9bZV1bcl09dFtyXX1lbHNlCi8vIHVzZSBmb3IgYmFzZSBsYW5ndWFnZSBpZiBub3QgeWV0IGRlZmluZWQKT1tlXT10LE9bbl09dDtyZXR1cm4gdGhpc30sZnJlc2hBcGk6ZnVuY3Rpb24oZSl7dmFyIHQ9Y3JlYXRlQXBpKCk7cmV0dXJuIGUmJnQubGFuZ3VhZ2UoZSksdH0sdmFsaWRhdGU6ZnVuY3Rpb24oZSxpLG8sYSl7dmFyIHM9ZGVmYXVsdEVycm9yUmVwb3J0ZXIodCksdT1yP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcihlLHQsbil8fHMoZSx0LG4pfTpzLGM9bmV3IGcobiwhMSx1LG8sYSk7InN0cmluZyI9PXR5cGVvZiBpJiYoaT17JHJlZjppfSksYy5hZGRTY2hlbWEoIiIsaSk7dmFyIGY9Yy52YWxpZGF0ZUFsbChlLGksbnVsbCxudWxsLCIiKTtyZXR1cm4hZiYmYSYmKGY9Yy5iYW5Vbmtub3duUHJvcGVydGllcyhlLGkpKSx0aGlzLmVycm9yPWYsdGhpcy5taXNzaW5nPWMubWlzc2luZyx0aGlzLnZhbGlkPW51bGw9PT1mLHRoaXMudmFsaWR9LHZhbGlkYXRlUmVzdWx0OmZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIHRoaXMudmFsaWRhdGUuYXBwbHkoZSxhcmd1bWVudHMpLGV9LHZhbGlkYXRlTXVsdGlwbGU6ZnVuY3Rpb24oZSxpLG8sYSl7dmFyIHM9ZGVmYXVsdEVycm9yUmVwb3J0ZXIodCksdT1yP2Z1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcihlLHQsbil8fHMoZSx0LG4pfTpzLGM9bmV3IGcobiwhMCx1LG8sYSk7InN0cmluZyI9PXR5cGVvZiBpJiYoaT17JHJlZjppfSksYy5hZGRTY2hlbWEoIiIsaSksYy52YWxpZGF0ZUFsbChlLGksbnVsbCxudWxsLCIiKSxhJiZjLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsaSk7dmFyIGY9e307cmV0dXJuIGYuZXJyb3JzPWMuZXJyb3JzLGYubWlzc2luZz1jLm1pc3NpbmcsZi52YWxpZD0wPT09Zi5lcnJvcnMubGVuZ3RoLGZ9LGFkZFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBuLmFkZFNjaGVtYS5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYTpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYS5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYU1hcDpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYU1hcC5hcHBseShuLGFyZ3VtZW50cyl9LGdldFNjaGVtYVVyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRTY2hlbWFVcmlzLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0TWlzc2luZ1VyaXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5nZXRNaXNzaW5nVXJpcy5hcHBseShuLGFyZ3VtZW50cyl9LGRyb3BTY2hlbWFzOmZ1bmN0aW9uKCl7bi5kcm9wU2NoZW1hcy5hcHBseShuLGFyZ3VtZW50cyl9LGRlZmluZUtleXdvcmQ6ZnVuY3Rpb24oKXtuLmRlZmluZUtleXdvcmQuYXBwbHkobixhcmd1bWVudHMpfSxkZWZpbmVFcnJvcjpmdW5jdGlvbihlLHQscil7aWYoInN0cmluZyIhPXR5cGVvZiBlfHwhL15bQS1aXSsoX1tBLVpdKykqJC8udGVzdChlKSl0aHJvdyBuZXcgRXJyb3IoIkNvZGUgbmFtZSBtdXN0IGJlIGEgc3RyaW5nIGluIFVQUEVSX0NBU0VfV0lUSF9VTkRFUlNDT1JFUyIpO2lmKCJudW1iZXIiIT10eXBlb2YgdHx8dCUxIT0wfHx0PDFlNCl0aHJvdyBuZXcgRXJyb3IoIkNvZGUgbnVtYmVyIG11c3QgYmUgYW4gaW50ZWdlciA+IDEwMDAwIik7aWYodm9pZCAwIT09X1tlXSl0aHJvdyBuZXcgRXJyb3IoIkVycm9yIGFscmVhZHkgZGVmaW5lZDogIitlKyIgYXMgIitfW2VdKTtpZih2b2lkIDAhPT1SW3RdKXRocm93IG5ldyBFcnJvcigiRXJyb3IgY29kZSBhbHJlYWR5IHVzZWQ6ICIrUlt0XSsiIGFzICIrdCk7X1tlXT10LFJbdF09ZSxTW2VdPVNbdF09cjtmb3IodmFyIG4gaW4gTyl7dmFyIGk9T1tuXTtpW2VdJiYoaVt0XT1pW3RdfHxpW2VdKX19LHJlc2V0OmZ1bmN0aW9uKCl7bi5yZXNldCgpLHRoaXMuZXJyb3I9bnVsbCx0aGlzLm1pc3Npbmc9W10sdGhpcy52YWxpZD0hMH0sbWlzc2luZzpbXSxlcnJvcjpudWxsLHZhbGlkOiEwLG5vcm1TY2hlbWE6bm9ybVNjaGVtYSxyZXNvbHZlVXJsOnJlc29sdmVVcmwsZ2V0RG9jdW1lbnRVcmk6Z2V0RG9jdW1lbnRVcmksZXJyb3JDb2RlczpffTtyZXR1cm4gaS5sYW5ndWFnZShlfHwiZW4iKSxpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDE5NyksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cig1MDApLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTk5KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDk4KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDU5KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCk7LyoKIEF1dGhvcjogR2VyYWludCBMdWZmIGFuZCBvdGhlcnMKIFllYXI6IDIwMTMKCiBUaGlzIGNvZGUgaXMgcmVsZWFzZWQgaW50byB0aGUgInB1YmxpYyBkb21haW4iIGJ5IGl0cyBhdXRob3IocykuICBBbnlib2R5IG1heSB1c2UsIGFsdGVyIGFuZCBkaXN0cmlidXRlIHRoZSBjb2RlIHdpdGhvdXQgcmVzdHJpY3Rpb24uICBUaGUgYXV0aG9yIG1ha2VzIG5vIGd1YXJhbnRlZXMsIGFuZCB0YWtlcyBubyBsaWFiaWxpdHkgb2YgYW55IGtpbmQgZm9yIHVzZSBvZiB0aGlzIGNvZGUuCgogSWYgeW91IGZpbmQgYSBidWcgb3IgbWFrZSBhbiBpbXByb3ZlbWVudCwgaXQgd291bGQgYmUgY291cnRlb3VzIHRvIGxldCB0aGUgYXV0aG9yIGtub3csIGJ1dCBpdCBpcyBub3QgY29tcHVsc29yeS4KICovCi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9rZXlzP3JlZGlyZWN0bG9jYWxlPWVuLVVTJnJlZGlyZWN0c2x1Zz1KYXZhU2NyaXB0JTJGUmVmZXJlbmNlJTJGR2xvYmFsX09iamVjdHMlMkZPYmplY3QlMkZrZXlzCnkuZGVmYXVsdHx8KE9iamVjdC5rZXlzPWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx0PSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIikscj1bInRvU3RyaW5nIiwidG9Mb2NhbGVTdHJpbmciLCJ2YWx1ZU9mIiwiaGFzT3duUHJvcGVydHkiLCJpc1Byb3RvdHlwZU9mIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJjb25zdHJ1Y3RvciJdLG49ci5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKGkpe2lmKCJvYmplY3QiIT09KHZvaWQgMD09PWk/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShpKSkmJiJmdW5jdGlvbiIhPXR5cGVvZiBpfHxudWxsPT09aSl0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCIpO3ZhciBvPVtdO2Zvcih2YXIgYSBpbiBpKWUuY2FsbChpLGEpJiZvLnB1c2goYSk7aWYodClmb3IodmFyIHM9MDtzPG47cysrKWUuY2FsbChpLHJbc10pJiZvLnB1c2gocltzXSk7cmV0dXJuIG99fSgpKSwKLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2NyZWF0ZQpmLmRlZmF1bHR8fChPYmplY3QuY3JlYXRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRigpe31yZXR1cm4gZnVuY3Rpb24oZSl7aWYoMSE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJPYmplY3QuY3JlYXRlIGltcGxlbWVudGF0aW9uIG9ubHkgYWNjZXB0cyBvbmUgcGFyYW1ldGVyLiIpO3JldHVybiBGLnByb3RvdHlwZT1lLG5ldyBGfX0oKSksCi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2lzQXJyYXk/cmVkaXJlY3Rsb2NhbGU9ZW4tVVMmcmVkaXJlY3RzbHVnPUphdmFTY3JpcHQlMkZSZWZlcmVuY2UlMkZHbG9iYWxfT2JqZWN0cyUyRkFycmF5JTJGaXNBcnJheQpBcnJheS5pc0FycmF5fHwoQXJyYXkuaXNBcnJheT1mdW5jdGlvbihlKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSksCi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2luZGV4T2Y/cmVkaXJlY3Rsb2NhbGU9ZW4tVVMmcmVkaXJlY3RzbHVnPUphdmFTY3JpcHQlMkZSZWZlcmVuY2UlMkZHbG9iYWxfT2JqZWN0cyUyRkFycmF5JTJGaW5kZXhPZgpBcnJheS5wcm90b3R5cGUuaW5kZXhPZnx8KEFycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKGUpe2lmKG51bGw9PT10aGlzKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIHQ9T2JqZWN0KHRoaXMpLHI9dC5sZW5ndGg+Pj4wO2lmKDA9PT1yKXJldHVybi0xO3ZhciBuPTA7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiYobj1OdW1iZXIoYXJndW1lbnRzWzFdKSxuIT09bj8KLy8gc2hvcnRjdXQgZm9yIHZlcmlmeWluZyBpZiBpdCdzIE5hTgpuPTA6MCE9PW4mJm4hPT0xLzAmJm4hPT0tMS8wJiYobj0obj4wfHwtMSkqTWF0aC5mbG9vcihNYXRoLmFicyhuKSkpKSxuPj1yKXJldHVybi0xO2Zvcih2YXIgaT1uPj0wP246TWF0aC5tYXgoci1NYXRoLmFicyhuKSwwKTtpPHI7aSsrKWlmKGkgaW4gdCYmdFtpXT09PWUpcmV0dXJuIGk7cmV0dXJuLTF9KSwKLy8gR3J1bmdleSBPYmplY3QuaXNGcm96ZW4gaGFjawp1LmRlZmF1bHR8fChPYmplY3QuaXNGcm96ZW49ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PSJ0djRfdGVzdF9mcm96ZW5fa2V5IjtlLmhhc093blByb3BlcnR5KHQpOyl0Kz1NYXRoLnJhbmRvbSgpO3RyeXtyZXR1cm4gZVt0XT0hMCxkZWxldGUgZVt0XSwhMX1jYXRjaChlKXtyZXR1cm4hMH19KTsKLy8gQmFzZWQgb246IGh0dHBzOi8vZ2l0aHViLmNvbS9nZXJhaW50bHVmZi91cmktdGVtcGxhdGVzLCBidXQgd2l0aCBhbGwgdGhlIGRlLXN1YnN0aXR1dGlvbiBzdHVmZiByZW1vdmVkCnZhciBoPXsiKyI6ITAsIiMiOiEwLCIuIjohMCwiLyI6ITAsIjsiOiEwLCI/IjohMCwiJiI6ITB9LHY9eyIqIjohMH07VXJpVGVtcGxhdGUucHJvdG90eXBlPXt0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRlbXBsYXRlfSxmaWxsRnJvbU9iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5maWxsKGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfSl9fTt2YXIgZz1mdW5jdGlvbihlLHQscixuLGkpe2lmKHRoaXMubWlzc2luZz1bXSx0aGlzLm1pc3NpbmdNYXA9e30sdGhpcy5mb3JtYXRWYWxpZGF0b3JzPWU/KDAsZi5kZWZhdWx0KShlLmZvcm1hdFZhbGlkYXRvcnMpOnt9LHRoaXMuc2NoZW1hcz1lPygwLGYuZGVmYXVsdCkoZS5zY2hlbWFzKTp7fSx0aGlzLmNvbGxlY3RNdWx0aXBsZT10LHRoaXMuZXJyb3JzPVtdLHRoaXMuaGFuZGxlRXJyb3I9dD90aGlzLmNvbGxlY3RFcnJvcjp0aGlzLnJldHVybkVycm9yLG4mJih0aGlzLmNoZWNrUmVjdXJzaXZlPSEwLHRoaXMuc2Nhbm5lZD1bXSx0aGlzLnNjYW5uZWRGcm96ZW49W10sdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcz1bXSx0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzPVtdLHRoaXMudmFsaWRhdGVkU2NoZW1hc0tleT0idHY0X3ZhbGlkYXRpb25faWQiLHRoaXMudmFsaWRhdGlvbkVycm9yc0tleT0idHY0X3ZhbGlkYXRpb25fZXJyb3JzX2lkIiksaSYmKHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcz0hMCx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9KSx0aGlzLmVycm9yUmVwb3J0ZXI9cnx8ZGVmYXVsdEVycm9yUmVwb3J0ZXIoImVuIiksInN0cmluZyI9PXR5cGVvZiB0aGlzLmVycm9yUmVwb3J0ZXIpdGhyb3cgbmV3IEVycm9yKCJkZWJ1ZyIpO2lmKHRoaXMuZGVmaW5lZEtleXdvcmRzPXt9LGUpZm9yKHZhciBvIGluIGUuZGVmaW5lZEtleXdvcmRzKXRoaXMuZGVmaW5lZEtleXdvcmRzW29dPWUuZGVmaW5lZEtleXdvcmRzW29dLnNsaWNlKDApfTtnLnByb3RvdHlwZS5kZWZpbmVLZXl3b3JkPWZ1bmN0aW9uKGUsdCl7dGhpcy5kZWZpbmVkS2V5d29yZHNbZV09dGhpcy5kZWZpbmVkS2V5d29yZHNbZV18fFtdLHRoaXMuZGVmaW5lZEtleXdvcmRzW2VdLnB1c2godCl9LGcucHJvdG90eXBlLmNyZWF0ZUVycm9yPWZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe3ZhciBzPW5ldyBWYWxpZGF0aW9uRXJyb3IoZSx0LHIsbixpKTtyZXR1cm4gcy5tZXNzYWdlPXRoaXMuZXJyb3JSZXBvcnRlcihzLG8sYSksc30sZy5wcm90b3R5cGUucmV0dXJuRXJyb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGcucHJvdG90eXBlLmNvbGxlY3RFcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmdGhpcy5lcnJvcnMucHVzaChlKSxudWxsfSxnLnByb3RvdHlwZS5wcmVmaXhFcnJvcnM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1lO248dGhpcy5lcnJvcnMubGVuZ3RoO24rKyl0aGlzLmVycm9yc1tuXT10aGlzLmVycm9yc1tuXS5wcmVmaXhXaXRoKHQscik7cmV0dXJuIHRoaXN9LGcucHJvdG90eXBlLmJhblVua25vd25Qcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpe3ZhciBuPXRoaXMuY3JlYXRlRXJyb3IoXy5VTktOT1dOX1BST1BFUlRZLHtwYXRoOnJ9LHIsIiIsbnVsbCxlLHQpLGk9dGhpcy5oYW5kbGVFcnJvcihuKTtpZihpKXJldHVybiBpfXJldHVybiBudWxsfSxnLnByb3RvdHlwZS5hZGRGb3JtYXQ9ZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0Ij09PSh2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkoZSkpKXtmb3IodmFyIHIgaW4gZSl0aGlzLmFkZEZvcm1hdChyLGVbcl0pO3JldHVybiB0aGlzfXRoaXMuZm9ybWF0VmFsaWRhdG9yc1tlXT10fSxnLnByb3RvdHlwZS5yZXNvbHZlUmVmcz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PWUuJHJlZil7aWYodD10fHx7fSx0W2UuJHJlZl0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5DSVJDVUxBUl9SRUZFUkVOQ0Use3VybHM6KDAseS5kZWZhdWx0KSh0KS5qb2luKCIsICIpfSwiIiwiIixudWxsLHZvaWQgMCxlKTt0W2UuJHJlZl09ITAsZT10aGlzLmdldFNjaGVtYShlLiRyZWYsdCl9cmV0dXJuIGV9LGcucHJvdG90eXBlLmdldFNjaGVtYT1mdW5jdGlvbihlLHQpe3ZhciByO2lmKHZvaWQgMCE9PXRoaXMuc2NoZW1hc1tlXSlyZXR1cm4gcj10aGlzLnNjaGVtYXNbZV0sdGhpcy5yZXNvbHZlUmVmcyhyLHQpO3ZhciBuPWUsaT0iIjtpZigtMSE9PWUuaW5kZXhPZigiIyIpJiYoaT1lLnN1YnN0cmluZyhlLmluZGV4T2YoIiMiKSsxKSxuPWUuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCIjIikpKSwib2JqZWN0Ij09PSgwLGQuZGVmYXVsdCkodGhpcy5zY2hlbWFzW25dKSl7cj10aGlzLnNjaGVtYXNbbl07dmFyIG89ZGVjb2RlVVJJQ29tcG9uZW50KGkpO2lmKCIiPT09bylyZXR1cm4gdGhpcy5yZXNvbHZlUmVmcyhyLHQpO2lmKCIvIiE9PW8uY2hhckF0KDApKXJldHVybjtmb3IodmFyIGE9by5zcGxpdCgiLyIpLnNsaWNlKDEpLHM9MDtzPGEubGVuZ3RoO3MrKyl7dmFyIHU9YVtzXS5yZXBsYWNlKC9+MS9nLCIvIikucmVwbGFjZSgvfjAvZywifiIpO2lmKHZvaWQgMD09PXJbdV0pe3I9dm9pZCAwO2JyZWFrfXI9clt1XX1pZih2b2lkIDAhPT1yKXJldHVybiB0aGlzLnJlc29sdmVSZWZzKHIsdCl9dm9pZCAwPT09dGhpcy5taXNzaW5nW25dJiYodGhpcy5taXNzaW5nLnB1c2gobiksdGhpcy5taXNzaW5nW25dPW4sdGhpcy5taXNzaW5nTWFwW25dPW4pfSxnLnByb3RvdHlwZS5zZWFyY2hTY2hlbWFzPWZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl0aGlzLnNlYXJjaFNjaGVtYXMoZVtyXSx0KTtlbHNlIGlmKGUmJiJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShlKSkpeyJzdHJpbmciPT10eXBlb2YgZS5pZCYmaXNUcnVzdGVkVXJsKHQsZS5pZCkmJnZvaWQgMD09PXRoaXMuc2NoZW1hc1tlLmlkXSYmKHRoaXMuc2NoZW1hc1tlLmlkXT1lKTtmb3IodmFyIG4gaW4gZSlpZigiZW51bSIhPT1uKWlmKCJvYmplY3QiPT09KDAsZC5kZWZhdWx0KShlW25dKSl0aGlzLnNlYXJjaFNjaGVtYXMoZVtuXSx0KTtlbHNlIGlmKCIkcmVmIj09PW4pe3ZhciBpPWdldERvY3VtZW50VXJpKGVbbl0pO2kmJnZvaWQgMD09PXRoaXMuc2NoZW1hc1tpXSYmdm9pZCAwPT09dGhpcy5taXNzaW5nTWFwW2ldJiYodGhpcy5taXNzaW5nTWFwW2ldPWkpfX19LGcucHJvdG90eXBlLmFkZFNjaGVtYT1mdW5jdGlvbihlLHQpewovL292ZXJsb2FkCmlmKCJzdHJpbmciIT10eXBlb2YgZXx8dm9pZCAwPT09dCl7aWYoIm9iamVjdCIhPT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKGUpKXx8InN0cmluZyIhPXR5cGVvZiBlLmlkKXJldHVybjt0PWUsZT10LmlkfWU9PT1nZXREb2N1bWVudFVyaShlKSsiIyImJigKLy8gUmVtb3ZlIGVtcHR5IGZyYWdtZW50CmU9Z2V0RG9jdW1lbnRVcmkoZSkpLHRoaXMuc2NoZW1hc1tlXT10LGRlbGV0ZSB0aGlzLm1pc3NpbmdNYXBbZV0sbm9ybVNjaGVtYSh0LGUpLHRoaXMuc2VhcmNoU2NoZW1hcyh0LGUpfSxnLnByb3RvdHlwZS5nZXRTY2hlbWFNYXA9ZnVuY3Rpb24oKXt2YXIgZT17fTtmb3IodmFyIHQgaW4gdGhpcy5zY2hlbWFzKWVbdF09dGhpcy5zY2hlbWFzW3RdO3JldHVybiBlfSxnLnByb3RvdHlwZS5nZXRTY2hlbWFVcmlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzLnNjaGVtYXMpZSYmIWUudGVzdChyKXx8dC5wdXNoKHIpO3JldHVybiB0fSxnLnByb3RvdHlwZS5nZXRNaXNzaW5nVXJpcz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gdGhpcy5taXNzaW5nTWFwKWUmJiFlLnRlc3Qocil8fHQucHVzaChyKTtyZXR1cm4gdH0sZy5wcm90b3R5cGUuZHJvcFNjaGVtYXM9ZnVuY3Rpb24oKXt0aGlzLnNjaGVtYXM9e30sdGhpcy5yZXNldCgpfSxnLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMubWlzc2luZz1bXSx0aGlzLm1pc3NpbmdNYXA9e30sdGhpcy5lcnJvcnM9W119LGcucHJvdG90eXBlLnZhbGlkYXRlQWxsPWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG87aWYoISh0PXRoaXMucmVzb2x2ZVJlZnModCkpKXJldHVybiBudWxsO2lmKHQgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3IpcmV0dXJuIHRoaXMuZXJyb3JzLnB1c2godCksdDt2YXIgcyxjPXRoaXMuZXJyb3JzLmxlbmd0aCxmPW51bGwsbD1udWxsO2lmKHRoaXMuY2hlY2tSZWN1cnNpdmUmJmUmJiJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShlKSkpe2lmKG89IXRoaXMuc2Nhbm5lZC5sZW5ndGgsZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldKXt2YXIgcD1lW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0uaW5kZXhPZih0KTtpZigtMSE9PXApcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdChlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bcF0pLG51bGx9aWYoKDAsdS5kZWZhdWx0KShlKSYmLTEhPT0ocz10aGlzLnNjYW5uZWRGcm96ZW4uaW5kZXhPZihlKSkpe3ZhciB5PXRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXNbc10uaW5kZXhPZih0KTtpZigtMSE9PXkpcmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLmNvbmNhdCh0aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW3NdW3ldKSxudWxsfWlmKHRoaXMuc2Nhbm5lZC5wdXNoKGUpLCgwLHUuZGVmYXVsdCkoZSkpLTE9PT1zJiYocz10aGlzLnNjYW5uZWRGcm96ZW4ubGVuZ3RoLHRoaXMuc2Nhbm5lZEZyb3plbi5wdXNoKGUpLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXMucHVzaChbXSkpLGY9dGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1tzXS5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1tzXVtmXT10LHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbc11bZl09W107ZWxzZXtpZighZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldKXRyeXsoMCxhLmRlZmF1bHQpKGUsdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KSwoMCxhLmRlZmF1bHQpKGUsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5LHt2YWx1ZTpbXSxjb25maWd1cmFibGU6ITB9KX1jYXRjaCh0KXsKLy9JRSA3Lzggd29ya2Fyb3VuZAplW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV09W10sZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldPVtdfWw9ZVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV1bbF09dCxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV1bbF09W119fXZhciBoPXRoaXMuZXJyb3JzLmxlbmd0aCx2PXRoaXMudmFsaWRhdGVCYXNpYyhlLHQsaSl8fHRoaXMudmFsaWRhdGVOdW1lcmljKGUsdCxpKXx8dGhpcy52YWxpZGF0ZVN0cmluZyhlLHQsaSl8fHRoaXMudmFsaWRhdGVBcnJheShlLHQsaSl8fHRoaXMudmFsaWRhdGVPYmplY3QoZSx0LGkpfHx0aGlzLnZhbGlkYXRlQ29tYmluYXRpb25zKGUsdCxpKXx8dGhpcy52YWxpZGF0ZUh5cGVybWVkaWEoZSx0LGkpfHx0aGlzLnZhbGlkYXRlRm9ybWF0KGUsdCxpKXx8dGhpcy52YWxpZGF0ZURlZmluZWRLZXl3b3JkcyhlLHQsaSl8fG51bGw7aWYobyl7Zm9yKDt0aGlzLnNjYW5uZWQubGVuZ3RoOyl7ZGVsZXRlIHRoaXMuc2Nhbm5lZC5wb3AoKVt0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXldfXRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdfWlmKHZ8fGghPT10aGlzLmVycm9ycy5sZW5ndGgpZm9yKDtyJiZyLmxlbmd0aHx8biYmbi5sZW5ndGg7KXt2YXIgZz1yJiZyLmxlbmd0aD8iIityLnBvcCgpOm51bGwsYj1uJiZuLmxlbmd0aD8iIituLnBvcCgpOm51bGw7diYmKHY9di5wcmVmaXhXaXRoKGcsYikpLHRoaXMucHJlZml4RXJyb3JzKGgsZyxiKX1yZXR1cm4gbnVsbCE9PWY/dGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1tzXVtmXT10aGlzLmVycm9ycy5zbGljZShjKTpudWxsIT09bCYmKGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtsXT10aGlzLmVycm9ycy5zbGljZShjKSksdGhpcy5oYW5kbGVFcnJvcih2KX0sZy5wcm90b3R5cGUudmFsaWRhdGVGb3JtYXQ9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIHQuZm9ybWF0fHwhdGhpcy5mb3JtYXRWYWxpZGF0b3JzW3QuZm9ybWF0XSlyZXR1cm4gbnVsbDt2YXIgcj10aGlzLmZvcm1hdFZhbGlkYXRvcnNbdC5mb3JtYXRdLmNhbGwobnVsbCxlLHQpO3JldHVybiJzdHJpbmciPT10eXBlb2Ygcnx8Im51bWJlciI9PXR5cGVvZiByP3RoaXMuY3JlYXRlRXJyb3IoXy5GT1JNQVRfQ1VTVE9NLHttZXNzYWdlOnJ9LCIiLCIvZm9ybWF0IixudWxsLGUsdCk6ciYmIm9iamVjdCI9PT0odm9pZCAwPT09cj8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKHIpKT90aGlzLmNyZWF0ZUVycm9yKF8uRk9STUFUX0NVU1RPTSx7bWVzc2FnZTpyLm1lc3NhZ2V8fCI/In0sci5kYXRhUGF0aHx8IiIsci5zY2hlbWFQYXRofHwiL2Zvcm1hdCIsbnVsbCxlLHQpOm51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG4gaW4gdGhpcy5kZWZpbmVkS2V5d29yZHMpaWYodm9pZCAwIT09dFtuXSlmb3IodmFyIGk9dGhpcy5kZWZpbmVkS2V5d29yZHNbbl0sbz0wO288aS5sZW5ndGg7bysrKXt2YXIgYT1pW29dLHM9YShlLHRbbl0sdCxyKTtpZigic3RyaW5nIj09dHlwZW9mIHN8fCJudW1iZXIiPT10eXBlb2YgcylyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLktFWVdPUkRfQ1VTVE9NLHtrZXk6bixtZXNzYWdlOnN9LCIiLCIiLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsbik7aWYocyYmIm9iamVjdCI9PT0odm9pZCAwPT09cz8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKHMpKSl7dmFyIHU9cy5jb2RlO2lmKCJzdHJpbmciPT10eXBlb2YgdSl7aWYoIV9bdV0pdGhyb3cgbmV3IEVycm9yKCJVbmRlZmluZWQgZXJyb3IgY29kZSAodXNlIGRlZmluZUVycm9yKTogIit1KTt1PV9bdV19ZWxzZSJudW1iZXIiIT10eXBlb2YgdSYmKHU9Xy5LRVlXT1JEX0NVU1RPTSk7dmFyIGM9Im9iamVjdCI9PT0oMCxkLmRlZmF1bHQpKHMubWVzc2FnZSk/cy5tZXNzYWdlOntrZXk6bixtZXNzYWdlOnMubWVzc2FnZXx8Ij8ifSxmPXMuc2NoZW1hUGF0aHx8Ii8iK24ucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIik7cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IodSxjLHMuZGF0YVBhdGh8fG51bGwsZixudWxsLGUsdCl9fXJldHVybiBudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZUJhc2ljPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbjtyZXR1cm4obj10aGlzLnZhbGlkYXRlVHlwZShlLHQscikpP24ucHJlZml4V2l0aChudWxsLCJ0eXBlIik6KG49dGhpcy52YWxpZGF0ZUVudW0oZSx0LHIpKT9uLnByZWZpeFdpdGgobnVsbCwidHlwZSIpOm51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlVHlwZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQudHlwZSlyZXR1cm4gbnVsbDt2YXIgcj12b2lkIDA9PT1lPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkoZSk7bnVsbD09PWU/cj0ibnVsbCI6QXJyYXkuaXNBcnJheShlKSYmKHI9ImFycmF5Iik7dmFyIG49dC50eXBlO0FycmF5LmlzQXJyYXkobil8fChuPVtuXSk7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPW5baV07aWYobz09PXJ8fCJpbnRlZ2VyIj09PW8mJiJudW1iZXIiPT09ciYmZSUxPT0wKXJldHVybiBudWxsfXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uSU5WQUxJRF9UWVBFLHt0eXBlOnIsZXhwZWN0ZWQ6bi5qb2luKCIvIil9LCIiLCIiLG51bGwsZSx0KX0sZy5wcm90b3R5cGUudmFsaWRhdGVFbnVtPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dC5lbnVtKXJldHVybiBudWxsO2Zvcih2YXIgcj0wO3I8dC5lbnVtLmxlbmd0aDtyKyspe2lmKHJlY3Vyc2l2ZUNvbXBhcmUoZSx0LmVudW1bcl0pKXJldHVybiBudWxsfXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uRU5VTV9NSVNNQVRDSCx7dmFsdWU6InVuZGVmaW5lZCIhPXR5cGVvZiBKU09OPygwLGkuZGVmYXVsdCkoZSk6ZX0sIiIsIiIsbnVsbCxlLHQpfSxnLnByb3RvdHlwZS52YWxpZGF0ZU51bWVyaWM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlTXVsdGlwbGVPZihlLHQscil8fHRoaXMudmFsaWRhdGVNaW5NYXgoZSx0LHIpfHx0aGlzLnZhbGlkYXRlTmFOKGUsdCxyKXx8bnVsbH07dmFyIGI9TWF0aC5wb3coMiwtNTEpLG09MS1iO2cucHJvdG90eXBlLnZhbGlkYXRlTXVsdGlwbGVPZj1mdW5jdGlvbihlLHQpe3ZhciByPXQubXVsdGlwbGVPZnx8dC5kaXZpc2libGVCeTtpZih2b2lkIDA9PT1yKXJldHVybiBudWxsO2lmKCJudW1iZXIiPT10eXBlb2YgZSl7dmFyIG49ZS9yJTE7aWYobj49YiYmbjxtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uTlVNQkVSX01VTFRJUExFX09GLHt2YWx1ZTplLG11bHRpcGxlT2Y6cn0sIiIsIiIsbnVsbCxlLHQpfXJldHVybiBudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZU1pbk1heD1mdW5jdGlvbihlLHQpe2lmKCJudW1iZXIiIT10eXBlb2YgZSlyZXR1cm4gbnVsbDtpZih2b2lkIDAhPT10Lm1pbmltdW0pe2lmKGU8dC5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uTlVNQkVSX01JTklNVU0se3ZhbHVlOmUsbWluaW11bTp0Lm1pbmltdW19LCIiLCIvbWluaW11bSIsbnVsbCxlLHQpO2lmKHQuZXhjbHVzaXZlTWluaW11bSYmZT09PXQubWluaW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLk5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRSx7dmFsdWU6ZSxtaW5pbXVtOnQubWluaW11bX0sIiIsIi9leGNsdXNpdmVNaW5pbXVtIixudWxsLGUsdCl9aWYodm9pZCAwIT09dC5tYXhpbXVtKXtpZihlPnQubWF4aW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLk5VTUJFUl9NQVhJTVVNLHt2YWx1ZTplLG1heGltdW06dC5tYXhpbXVtfSwiIiwiL21heGltdW0iLG51bGwsZSx0KTtpZih0LmV4Y2x1c2l2ZU1heGltdW0mJmU9PT10Lm1heGltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5OVU1CRVJfTUFYSU1VTV9FWENMVVNJVkUse3ZhbHVlOmUsbWF4aW11bTp0Lm1heGltdW19LCIiLCIvZXhjbHVzaXZlTWF4aW11bSIsbnVsbCxlLHQpfXJldHVybiBudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZU5hTj1mdW5jdGlvbihlLHQpe3JldHVybiJudW1iZXIiIT10eXBlb2YgZT9udWxsOiEwPT09aXNOYU4oZSl8fGU9PT0xLzB8fGU9PT0tMS8wP3RoaXMuY3JlYXRlRXJyb3IoXy5OVU1CRVJfTk9UX0FfTlVNQkVSLHt2YWx1ZTplfSwiIiwiL3R5cGUiLG51bGwsZSx0KTpudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVTdHJpbmdMZW5ndGgoZSx0LHIpfHx0aGlzLnZhbGlkYXRlU3RyaW5nUGF0dGVybihlLHQscil8fG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nTGVuZ3RoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlP251bGw6dm9pZCAwIT09dC5taW5MZW5ndGgmJmUubGVuZ3RoPHQubWluTGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoXy5TVFJJTkdfTEVOR1RIX1NIT1JULHtsZW5ndGg6ZS5sZW5ndGgsbWluaW11bTp0Lm1pbkxlbmd0aH0sIiIsIi9taW5MZW5ndGgiLG51bGwsZSx0KTp2b2lkIDAhPT10Lm1heExlbmd0aCYmZS5sZW5ndGg+dC5tYXhMZW5ndGg/dGhpcy5jcmVhdGVFcnJvcihfLlNUUklOR19MRU5HVEhfTE9ORyx7bGVuZ3RoOmUubGVuZ3RoLG1heGltdW06dC5tYXhMZW5ndGh9LCIiLCIvbWF4TGVuZ3RoIixudWxsLGUsdCk6bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmdQYXR0ZXJuPWZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyIhPXR5cGVvZiBlfHwic3RyaW5nIiE9dHlwZW9mIHQucGF0dGVybiYmISh0LnBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApKXJldHVybiBudWxsO3ZhciByO2lmKHQucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cClyPXQucGF0dGVybjtlbHNle3ZhciBuLGk9IiIsbz10LnBhdHRlcm4ubWF0Y2goL15cLyguKylcLyhbaW1nXSopJC8pO28/KG49b1sxXSxpPW9bMl0pOm49dC5wYXR0ZXJuLHI9bmV3IFJlZ0V4cChuLGkpfXJldHVybiByLnRlc3QoZSk/bnVsbDp0aGlzLmNyZWF0ZUVycm9yKF8uU1RSSU5HX1BBVFRFUk4se3BhdHRlcm46dC5wYXR0ZXJufSwiIiwiL3BhdHRlcm4iLG51bGwsZSx0KX0sZy5wcm90b3R5cGUudmFsaWRhdGVBcnJheT1mdW5jdGlvbihlLHQscil7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/dGhpcy52YWxpZGF0ZUFycmF5TGVuZ3RoKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFycmF5VW5pcXVlSXRlbXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlQXJyYXlJdGVtcyhlLHQscil8fG51bGw6bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVBcnJheUxlbmd0aD1mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiB2b2lkIDAhPT10Lm1pbkl0ZW1zJiZlLmxlbmd0aDx0Lm1pbkl0ZW1zJiYocj10aGlzLmNyZWF0ZUVycm9yKF8uQVJSQVlfTEVOR1RIX1NIT1JULHtsZW5ndGg6ZS5sZW5ndGgsbWluaW11bTp0Lm1pbkl0ZW1zfSwiIiwiL21pbkl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjp2b2lkIDAhPT10Lm1heEl0ZW1zJiZlLmxlbmd0aD50Lm1heEl0ZW1zJiYocj10aGlzLmNyZWF0ZUVycm9yKF8uQVJSQVlfTEVOR1RIX0xPTkcse2xlbmd0aDplLmxlbmd0aCxtYXhpbXVtOnQubWF4SXRlbXN9LCIiLCIvbWF4SXRlbXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOm51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcz1mdW5jdGlvbihlLHQpe2lmKHQudW5pcXVlSXRlbXMpZm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspZm9yKHZhciBuPXIrMTtuPGUubGVuZ3RoO24rKylpZihyZWN1cnNpdmVDb21wYXJlKGVbcl0sZVtuXSkpe3ZhciBpPXRoaXMuY3JlYXRlRXJyb3IoXy5BUlJBWV9VTklRVUUse21hdGNoMTpyLG1hdGNoMjpufSwiIiwiL3VuaXF1ZUl0ZW1zIixudWxsLGUsdCk7aWYodGhpcy5oYW5kbGVFcnJvcihpKSlyZXR1cm4gaX1yZXR1cm4gbnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVBcnJheUl0ZW1zPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lml0ZW1zKXJldHVybiBudWxsO3ZhciBuLGk7aWYoQXJyYXkuaXNBcnJheSh0Lml0ZW1zKSl7Zm9yKGk9MDtpPGUubGVuZ3RoO2krKylpZihpPHQuaXRlbXMubGVuZ3RoKXtpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0Lml0ZW1zW2ldLFtpXSxbIml0ZW1zIixpXSxyKyIvIitpKSlyZXR1cm4gbn1lbHNlIGlmKHZvaWQgMCE9PXQuYWRkaXRpb25hbEl0ZW1zKWlmKCJib29sZWFuIj09dHlwZW9mIHQuYWRkaXRpb25hbEl0ZW1zKXtpZighdC5hZGRpdGlvbmFsSXRlbXMmJihuPXRoaXMuY3JlYXRlRXJyb3IoXy5BUlJBWV9BRERJVElPTkFMX0lURU1TLHt9LCIvIitpLCIvYWRkaXRpb25hbEl0ZW1zIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0LmFkZGl0aW9uYWxJdGVtcyxbaV0sWyJhZGRpdGlvbmFsSXRlbXMiXSxyKyIvIitpKSlyZXR1cm4gbn1lbHNlIGZvcihpPTA7aTxlLmxlbmd0aDtpKyspaWYobj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5pdGVtcyxbaV0sWyJpdGVtcyJdLHIrIi8iK2kpKXJldHVybiBuO3JldHVybiBudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIm9iamVjdCIhPT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKGUpKXx8bnVsbD09PWV8fEFycmF5LmlzQXJyYXkoZSk/bnVsbDp0aGlzLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXMoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3REZXBlbmRlbmNpZXMoZSx0LHIpfHxudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdE1pbk1heFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcixuPSgwLHkuZGVmYXVsdCkoZSk7cmV0dXJuIHZvaWQgMCE9PXQubWluUHJvcGVydGllcyYmbi5sZW5ndGg8dC5taW5Qcm9wZXJ0aWVzJiYocj10aGlzLmNyZWF0ZUVycm9yKF8uT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTSx7cHJvcGVydHlDb3VudDpuLmxlbmd0aCxtaW5pbXVtOnQubWluUHJvcGVydGllc30sIiIsIi9taW5Qcm9wZXJ0aWVzIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjp2b2lkIDAhPT10Lm1heFByb3BlcnRpZXMmJm4ubGVuZ3RoPnQubWF4UHJvcGVydGllcyYmKHI9dGhpcy5jcmVhdGVFcnJvcihfLk9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU0se3Byb3BlcnR5Q291bnQ6bi5sZW5ndGgsbWF4aW11bTp0Lm1heFByb3BlcnRpZXN9LCIiLCIvbWF4UHJvcGVydGllcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RSZXF1aXJlZFByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10LnJlcXVpcmVkKWZvcih2YXIgcj0wO3I8dC5yZXF1aXJlZC5sZW5ndGg7cisrKXt2YXIgbj10LnJlcXVpcmVkW3JdO2lmKHZvaWQgMD09PWVbbl0pe3ZhciBpPXRoaXMuY3JlYXRlRXJyb3IoXy5PQkpFQ1RfUkVRVUlSRUQse2tleTpufSwiIiwiL3JlcXVpcmVkLyIrcixudWxsLGUsdCk7aWYodGhpcy5oYW5kbGVFcnJvcihpKSlyZXR1cm4gaX19cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0UHJvcGVydGllcz1mdW5jdGlvbihlLHQscil7dmFyIG47Zm9yKHZhciBpIGluIGUpe3ZhciBvPXIrIi8iK2kucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksYT0hMTtpZih2b2lkIDAhPT10LnByb3BlcnRpZXMmJnZvaWQgMCE9PXQucHJvcGVydGllc1tpXSYmKGE9ITAsbj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5wcm9wZXJ0aWVzW2ldLFtpXSxbInByb3BlcnRpZXMiLGldLG8pKSlyZXR1cm4gbjtpZih2b2lkIDAhPT10LnBhdHRlcm5Qcm9wZXJ0aWVzKWZvcih2YXIgcyBpbiB0LnBhdHRlcm5Qcm9wZXJ0aWVzKXt2YXIgdT1uZXcgUmVnRXhwKHMpO2lmKHUudGVzdChpKSYmKGE9ITAsbj10aGlzLnZhbGlkYXRlQWxsKGVbaV0sdC5wYXR0ZXJuUHJvcGVydGllc1tzXSxbaV0sWyJwYXR0ZXJuUHJvcGVydGllcyIsc10sbykpKXJldHVybiBufWlmKGEpdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy5rbm93blByb3BlcnR5UGF0aHNbb109ITAsZGVsZXRlIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNbb10pO2Vsc2UgaWYodm9pZCAwIT09dC5hZGRpdGlvbmFsUHJvcGVydGllcyl7aWYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy5rbm93blByb3BlcnR5UGF0aHNbb109ITAsZGVsZXRlIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNbb10pLCJib29sZWFuIj09dHlwZW9mIHQuYWRkaXRpb25hbFByb3BlcnRpZXMpe2lmKCF0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzJiYobj10aGlzLmNyZWF0ZUVycm9yKF8uT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUyx7a2V5Oml9LCIiLCIvYWRkaXRpb25hbFByb3BlcnRpZXMiLG51bGwsZSx0KS5wcmVmaXhXaXRoKGksbnVsbCksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0LmFkZGl0aW9uYWxQcm9wZXJ0aWVzLFtpXSxbImFkZGl0aW9uYWxQcm9wZXJ0aWVzIl0sbykpcmV0dXJuIG59ZWxzZSB0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJiF0aGlzLmtub3duUHJvcGVydHlQYXRoc1tvXSYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHNbb109ITApfXJldHVybiBudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcz1mdW5jdGlvbihlLHQscil7dmFyIG47aWYodm9pZCAwIT09dC5kZXBlbmRlbmNpZXMpZm9yKHZhciBpIGluIHQuZGVwZW5kZW5jaWVzKWlmKHZvaWQgMCE9PWVbaV0pe3ZhciBvPXQuZGVwZW5kZW5jaWVzW2ldO2lmKCJzdHJpbmciPT10eXBlb2Ygbyl7aWYodm9pZCAwPT09ZVtvXSYmKG49dGhpcy5jcmVhdGVFcnJvcihfLk9CSkVDVF9ERVBFTkRFTkNZX0tFWSx7a2V5OmksbWlzc2luZzpvfSwiIiwiIixudWxsLGUsdCkucHJlZml4V2l0aChudWxsLGkpLnByZWZpeFdpdGgobnVsbCwiZGVwZW5kZW5jaWVzIiksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgYT0wO2E8by5sZW5ndGg7YSsrKXt2YXIgcz1vW2FdO2lmKHZvaWQgMD09PWVbc10mJihuPXRoaXMuY3JlYXRlRXJyb3IoXy5PQkpFQ1RfREVQRU5ERU5DWV9LRVkse2tleTppLG1pc3Npbmc6c30sIiIsIi8iK2EsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxpKS5wcmVmaXhXaXRoKG51bGwsImRlcGVuZGVuY2llcyIpLHRoaXMuaGFuZGxlRXJyb3IobikpKXJldHVybiBufWVsc2UgaWYobj10aGlzLnZhbGlkYXRlQWxsKGUsbyxbXSxbImRlcGVuZGVuY2llcyIsaV0scikpcmV0dXJuIG59cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlQ29tYmluYXRpb25zPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy52YWxpZGF0ZUFsbE9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZUFueU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9uZU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU5vdChlLHQscil8fG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlQWxsT2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQuYWxsT2YpcmV0dXJuIG51bGw7Zm9yKHZhciBuLGk9MDtpPHQuYWxsT2YubGVuZ3RoO2krKyl7dmFyIG89dC5hbGxPZltpXTtpZihuPXRoaXMudmFsaWRhdGVBbGwoZSxvLFtdLFsiYWxsT2YiLGldLHIpKXJldHVybiBufXJldHVybiBudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZUFueU9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10LmFueU9mKXJldHVybiBudWxsO3ZhciBuLGksbz1bXSxhPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyk7Zm9yKHZhciBzPSEwLHU9MDt1PHQuYW55T2YubGVuZ3RoO3UrKyl7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSk7dmFyIGM9dC5hbnlPZlt1XSxmPXRoaXMuZXJyb3JzLmxlbmd0aCxsPXRoaXMudmFsaWRhdGVBbGwoZSxjLFtdLFsiYW55T2YiLHVdLHIpO2lmKG51bGw9PT1sJiZmPT09dGhpcy5lcnJvcnMubGVuZ3RoKXtpZih0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLGEpLHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyl7Zm9yKHZhciBkIGluIHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKWlbZF09ITAsZGVsZXRlIG5bZF07Zm9yKHZhciBwIGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpaVtwXXx8KG5bcF09ITApOwovLyBXZSBuZWVkIHRvIGNvbnRpbnVlIGxvb3Bpbmcgc28gd2UgY2F0Y2ggYWxsIHRoZSBwcm9wZXJ0eSBkZWZpbml0aW9ucywgYnV0IHdlIGRvbid0IHdhbnQgdG8gcmV0dXJuIGFuIGVycm9yCnM9ITE7Y29udGludWV9cmV0dXJuIG51bGx9bCYmby5wdXNoKGwucHJlZml4V2l0aChudWxsLCIiK3UpLnByZWZpeFdpdGgobnVsbCwiYW55T2YiKSl9cmV0dXJuIHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9bix0aGlzLmtub3duUHJvcGVydHlQYXRocz1pKSxzPyhvPW8uY29uY2F0KHRoaXMuZXJyb3JzLnNsaWNlKGEpKSx0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLGEpLHRoaXMuY3JlYXRlRXJyb3IoXy5BTllfT0ZfTUlTU0lORyx7fSwiIiwiL2FueU9mIixvLGUsdCkpOnZvaWQgMH0sZy5wcm90b3R5cGUudmFsaWRhdGVPbmVPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5vbmVPZilyZXR1cm4gbnVsbDt2YXIgbixpLG89bnVsbCxhPVtdLHM9dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxpPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKTtmb3IodmFyIHU9MDt1PHQub25lT2YubGVuZ3RoO3UrKyl7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSk7dmFyIGM9dC5vbmVPZlt1XSxmPXRoaXMuZXJyb3JzLmxlbmd0aCxsPXRoaXMudmFsaWRhdGVBbGwoZSxjLFtdLFsib25lT2YiLHVdLHIpO2lmKG51bGw9PT1sJiZmPT09dGhpcy5lcnJvcnMubGVuZ3RoKXtpZihudWxsIT09bylyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLmNyZWF0ZUVycm9yKF8uT05FX09GX01VTFRJUExFLHtpbmRleDE6byxpbmRleDI6dX0sIiIsIi9vbmVPZiIsbnVsbCxlLHQpO2lmKG89dSx0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMpe2Zvcih2YXIgZCBpbiB0aGlzLmtub3duUHJvcGVydHlQYXRocylpW2RdPSEwLGRlbGV0ZSBuW2RdO2Zvcih2YXIgcCBpbiB0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzKWlbcF18fChuW3BdPSEwKX19ZWxzZSBsJiZhLnB1c2gobCl9cmV0dXJuIHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9bix0aGlzLmtub3duUHJvcGVydHlQYXRocz1pKSxudWxsPT09bz8oYT1hLmNvbmNhdCh0aGlzLmVycm9ycy5zbGljZShzKSksdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSx0aGlzLmNyZWF0ZUVycm9yKF8uT05FX09GX01JU1NJTkcse30sIiIsIi9vbmVPZiIsYSxlLHQpKToodGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuc2xpY2UoMCxzKSxudWxsKX0sZy5wcm90b3R5cGUudmFsaWRhdGVOb3Q9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQubm90KXJldHVybiBudWxsO3ZhciBuLGksbz10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLGk9dGhpcy5rbm93blByb3BlcnR5UGF0aHMsdGhpcy51bmtub3duUHJvcGVydHlQYXRocz17fSx0aGlzLmtub3duUHJvcGVydHlQYXRocz17fSk7dmFyIGE9dGhpcy52YWxpZGF0ZUFsbChlLHQubm90LG51bGwsbnVsbCxyKSxzPXRoaXMuZXJyb3JzLnNsaWNlKG8pO3JldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLG8pLHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9bix0aGlzLmtub3duUHJvcGVydHlQYXRocz1pKSxudWxsPT09YSYmMD09PXMubGVuZ3RoP3RoaXMuY3JlYXRlRXJyb3IoXy5OT1RfUEFTU0VELHt9LCIiLCIvbm90IixudWxsLGUsdCk6bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVIeXBlcm1lZGlhPWZ1bmN0aW9uKGUsdCxyKXtpZighdC5saW5rcylyZXR1cm4gbnVsbDtmb3IodmFyIG4saT0wO2k8dC5saW5rcy5sZW5ndGg7aSsrKXt2YXIgbz10LmxpbmtzW2ldO2lmKCJkZXNjcmliZWRieSI9PT1vLnJlbCl7Zm9yKHZhciBhPW5ldyBVcmlUZW1wbGF0ZShvLmhyZWYpLHM9ITAsdT0wO3U8YS52YXJOYW1lcy5sZW5ndGg7dSsrKWlmKCEoYS52YXJOYW1lc1t1XWluIGUpKXtzPSExO2JyZWFrfWlmKHMpe3ZhciBjPWEuZmlsbEZyb21PYmplY3QoZSksZj17JHJlZjpjfTtpZihuPXRoaXMudmFsaWRhdGVBbGwoZSxmLFtdLFsibGlua3MiLGldLHIpKXJldHVybiBufX19fTt2YXIgXz17SU5WQUxJRF9UWVBFOjAsRU5VTV9NSVNNQVRDSDoxLEFOWV9PRl9NSVNTSU5HOjEwLE9ORV9PRl9NSVNTSU5HOjExLE9ORV9PRl9NVUxUSVBMRToxMixOT1RfUEFTU0VEOjEzLAovLyBOdW1lcmljIGVycm9ycwpOVU1CRVJfTVVMVElQTEVfT0Y6MTAwLE5VTUJFUl9NSU5JTVVNOjEwMSxOVU1CRVJfTUlOSU1VTV9FWENMVVNJVkU6MTAyLE5VTUJFUl9NQVhJTVVNOjEwMyxOVU1CRVJfTUFYSU1VTV9FWENMVVNJVkU6MTA0LE5VTUJFUl9OT1RfQV9OVU1CRVI6MTA1LAovLyBTdHJpbmcgZXJyb3JzClNUUklOR19MRU5HVEhfU0hPUlQ6MjAwLFNUUklOR19MRU5HVEhfTE9ORzoyMDEsU1RSSU5HX1BBVFRFUk46MjAyLAovLyBPYmplY3QgZXJyb3JzCk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU06MzAwLE9CSkVDVF9QUk9QRVJUSUVTX01BWElNVU06MzAxLE9CSkVDVF9SRVFVSVJFRDozMDIsT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUzozMDMsT0JKRUNUX0RFUEVOREVOQ1lfS0VZOjMwNCwKLy8gQXJyYXkgZXJyb3JzCkFSUkFZX0xFTkdUSF9TSE9SVDo0MDAsQVJSQVlfTEVOR1RIX0xPTkc6NDAxLEFSUkFZX1VOSVFVRTo0MDIsQVJSQVlfQURESVRJT05BTF9JVEVNUzo0MDMsCi8vIEN1c3RvbS91c2VyLWRlZmluZWQgZXJyb3JzCkZPUk1BVF9DVVNUT006NTAwLEtFWVdPUkRfQ1VTVE9NOjUwMSwKLy8gU2NoZW1hIHN0cnVjdHVyZQpDSVJDVUxBUl9SRUZFUkVOQ0U6NjAwLAovLyBOb24tc3RhbmRhcmQgdmFsaWRhdGlvbiBvcHRpb25zClVOS05PV05fUFJPUEVSVFk6MWUzfSxSPXt9O2Zvcih2YXIgdyBpbiBfKVJbX1t3XV09dzt2YXIgUz17SU5WQUxJRF9UWVBFOiJJbnZhbGlkIHR5cGU6IHt0eXBlfSAoZXhwZWN0ZWQge2V4cGVjdGVkfSkiLEVOVU1fTUlTTUFUQ0g6Ik5vIGVudW0gbWF0Y2ggZm9yOiB7dmFsdWV9IixBTllfT0ZfTUlTU0lORzonRGF0YSBkb2VzIG5vdCBtYXRjaCBhbnkgc2NoZW1hcyBmcm9tICJhbnlPZiInLE9ORV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gIm9uZU9mIicsT05FX09GX01VTFRJUExFOidEYXRhIGlzIHZhbGlkIGFnYWluc3QgbW9yZSB0aGFuIG9uZSBzY2hlbWEgZnJvbSAib25lT2YiOiBpbmRpY2VzIHtpbmRleDF9IGFuZCB7aW5kZXgyfScsTk9UX1BBU1NFRDonRGF0YSBtYXRjaGVzIHNjaGVtYSBmcm9tICJub3QiJywKLy8gTnVtZXJpYyBlcnJvcnMKTlVNQkVSX01VTFRJUExFX09GOiJWYWx1ZSB7dmFsdWV9IGlzIG5vdCBhIG11bHRpcGxlIG9mIHttdWx0aXBsZU9mfSIsTlVNQkVSX01JTklNVU06IlZhbHVlIHt2YWx1ZX0gaXMgbGVzcyB0aGFuIG1pbmltdW0ge21pbmltdW19IixOVU1CRVJfTUlOSU1VTV9FWENMVVNJVkU6IlZhbHVlIHt2YWx1ZX0gaXMgZXF1YWwgdG8gZXhjbHVzaXZlIG1pbmltdW0ge21pbmltdW19IixOVU1CRVJfTUFYSU1VTToiVmFsdWUge3ZhbHVlfSBpcyBncmVhdGVyIHRoYW4gbWF4aW11bSB7bWF4aW11bX0iLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWF4aW11bSB7bWF4aW11bX0iLE5VTUJFUl9OT1RfQV9OVU1CRVI6IlZhbHVlIHt2YWx1ZX0gaXMgbm90IGEgdmFsaWQgbnVtYmVyIiwKLy8gU3RyaW5nIGVycm9ycwpTVFJJTkdfTEVOR1RIX1NIT1JUOiJTdHJpbmcgaXMgdG9vIHNob3J0ICh7bGVuZ3RofSBjaGFycyksIG1pbmltdW0ge21pbmltdW19IixTVFJJTkdfTEVOR1RIX0xPTkc6IlN0cmluZyBpcyB0b28gbG9uZyAoe2xlbmd0aH0gY2hhcnMpLCBtYXhpbXVtIHttYXhpbXVtfSIsU1RSSU5HX1BBVFRFUk46IlN0cmluZyBkb2VzIG5vdCBtYXRjaCBwYXR0ZXJuOiB7cGF0dGVybn0iLAovLyBPYmplY3QgZXJyb3JzCk9CSkVDVF9QUk9QRVJUSUVTX01JTklNVU06IlRvbyBmZXcgcHJvcGVydGllcyBkZWZpbmVkICh7cHJvcGVydHlDb3VudH0pLCBtaW5pbXVtIHttaW5pbXVtfSIsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTToiVG9vIG1hbnkgcHJvcGVydGllcyBkZWZpbmVkICh7cHJvcGVydHlDb3VudH0pLCBtYXhpbXVtIHttYXhpbXVtfSIsT0JKRUNUX1JFUVVJUkVEOiJNaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5OiB7a2V5fSIsT0JKRUNUX0FERElUSU9OQUxfUFJPUEVSVElFUzoiQWRkaXRpb25hbCBwcm9wZXJ0aWVzIG5vdCBhbGxvd2VkIixPQkpFQ1RfREVQRU5ERU5DWV9LRVk6IkRlcGVuZGVuY3kgZmFpbGVkIC0ga2V5IG11c3QgZXhpc3Q6IHttaXNzaW5nfSAoZHVlIHRvIGtleToge2tleX0pIiwKLy8gQXJyYXkgZXJyb3JzCkFSUkFZX0xFTkdUSF9TSE9SVDoiQXJyYXkgaXMgdG9vIHNob3J0ICh7bGVuZ3RofSksIG1pbmltdW0ge21pbmltdW19IixBUlJBWV9MRU5HVEhfTE9ORzoiQXJyYXkgaXMgdG9vIGxvbmcgKHtsZW5ndGh9KSwgbWF4aW11bSB7bWF4aW11bX0iLEFSUkFZX1VOSVFVRToiQXJyYXkgaXRlbXMgYXJlIG5vdCB1bmlxdWUgKGluZGljZXMge21hdGNoMX0gYW5kIHttYXRjaDJ9KSIsQVJSQVlfQURESVRJT05BTF9JVEVNUzoiQWRkaXRpb25hbCBpdGVtcyBub3QgYWxsb3dlZCIsCi8vIEZvcm1hdCBlcnJvcnMKRk9STUFUX0NVU1RPTToiRm9ybWF0IHZhbGlkYXRpb24gZmFpbGVkICh7bWVzc2FnZX0pIixLRVlXT1JEX0NVU1RPTToiS2V5d29yZCBmYWlsZWQ6IHtrZXl9ICh7bWVzc2FnZX0pIiwKLy8gU2NoZW1hIHN0cnVjdHVyZQpDSVJDVUxBUl9SRUZFUkVOQ0U6IkNpcmN1bGFyICRyZWZzOiB7dXJsc30iLAovLyBOb24tc3RhbmRhcmQgdmFsaWRhdGlvbiBvcHRpb25zClVOS05PV05fUFJPUEVSVFk6IlVua25vd24gcHJvcGVydHkgKG5vdCBpbiBzY2hlbWEpIn07VmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZT0oMCxmLmRlZmF1bHQpKEVycm9yLnByb3RvdHlwZSksVmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1WYWxpZGF0aW9uRXJyb3IsVmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZS5uYW1lPSJWYWxpZGF0aW9uRXJyb3IiLFZhbGlkYXRpb25FcnJvci5wcm90b3R5cGUucHJlZml4V2l0aD1mdW5jdGlvbihlLHQpe2lmKG51bGwhPT1lJiYoZT1lLnJlcGxhY2UoL34vZywifjAiKS5yZXBsYWNlKC9cLy9nLCJ+MSIpLHRoaXMuZGF0YVBhdGg9Ii8iK2UrdGhpcy5kYXRhUGF0aCksbnVsbCE9PXQmJih0PXQucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksdGhpcy5zY2hlbWFQYXRoPSIvIit0K3RoaXMuc2NoZW1hUGF0aCksbnVsbCE9PXRoaXMuc3ViRXJyb3JzKWZvcih2YXIgcj0wO3I8dGhpcy5zdWJFcnJvcnMubGVuZ3RoO3IrKyl0aGlzLnN1YkVycm9yc1tyXS5wcmVmaXhXaXRoKGUsdCk7cmV0dXJuIHRoaXN9O3ZhciBPPXt9LFA9Y3JlYXRlQXBpKCk7UC5hZGRMYW5ndWFnZSgiZW4tZ2IiLFMpLAovL2xlZ2FjeSBwcm9wZXJ0eQpQLnR2ND1QLAovL3JldHVybiB0djQ7CnQuZGVmYXVsdD1QLAovL30KZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig1MDEpLF9fZXNNb2R1bGU6ITB9fSwvKiA1MDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNTAyKSxlLmV4cG9ydHM9cigxMykuT2JqZWN0LmlzRnJvemVufSwvKiA1MDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTIgT2JqZWN0LmlzRnJvemVuKE8pCnZhciBuPXIoNDIpO3IoOTcpKCJpc0Zyb3plbiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiFuKHQpfHwhIWUmJmUodCl9fSl9LC8qIDUwMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDU5KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cigxMSkseT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHApLGg9cigxNSksdj1yKDIwNiksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLGI9eS5nZXRMb2dnZXIoIlJlcG9ydGVyT2JqZWN0IiksbT1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlcG9ydGVyT2JqZWN0KGUsdCxyKXsoMCxmLmRlZmF1bHQpKHRoaXMsUmVwb3J0ZXJPYmplY3QpO3ZhciBuPXRoaXM7bi5fcGFyZW50PWUsbi5fb3duZXI9dCxuLl91cmw9cixuLl9idXM9ZS5fYnVzLG4uX2RvbWFpbj0oMCxoLmRpdmlkZVVSTCkocikuZG9tYWluLG4uX29ialN1YnNjcmlwdG9yVVJMPW4uX3VybCsiL3N1YnNjcmlwdGlvbiIsbi5fc3Vic2NyaXB0aW9ucz17fSxuLl9jaGlsZHJlbnM9W10sbi5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sbi5fZm9yd2FyZHM9e30sbi5faXNUb1NhdmVEYXRhPSExLG4uX2FsbG9jYXRlTGlzdGVuZXJzKCl9cmV0dXJuKDAsZC5kZWZhdWx0KShSZXBvcnRlck9iamVjdCxbe2tleToiX2FsbG9jYXRlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzOwovL2FkZCBzdWJzY3JpcHRpb24gbGlzdGVuZXIuLi4KdC5fc3Vic2NyaXB0aW9uTGlzdGVuZXI9dC5fYnVzLmFkZExpc3RlbmVyKHQuX29ialN1YnNjcmlwdG9yVVJMLGZ1bmN0aW9uKGUpe3N3aXRjaChiLmluZm8oIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCByZWNlaXZlZCBdIixlKSxlLnR5cGUpe2Nhc2Uic3Vic2NyaWJlIjp0Ll9vblJlbW90ZVN1YnNjcmliZShlKTticmVhaztjYXNlInVuc3Vic2NyaWJlIjp0Ll9vblJlbW90ZVVuU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UicmVzcG9uc2UiOnQuX29uUmVtb3RlUmVzcG9uc2UoZSl9fSk7dmFyIHI9dC5fdXJsKyIvY2hhbmdlcyI7dC5fY2hhbmdlTGlzdGVuZXI9dC5fYnVzLmFkZExpc3RlbmVyKHIsZnVuY3Rpb24obil7Yi5pbmZvKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgXSBTeW5jaGVyTWFuYWdlci0iK3IrIi1SQ1Y6ICIsbiksCi8vVE9ETzogd2hhdCB0b2RvIGhlcmU/IFNhdmUgY2hhbmdlcz8KZS5faXNUb1NhdmVEYXRhJiZuLmJvZHkuYXR0cmlidXRlJiYoYi5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCBdIFN5bmNoZXJNYW5hZ2VyIC0gc2F2ZSBkYXRhOiAiLG4pLHQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCx0Ll91cmwsInZlcnNpb24iLG4uYm9keS52ZXJzaW9uKSx0Ll9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITAsdC5fdXJsLCJsYXN0TW9kaWZpZWQiLG4uYm9keS5sYXN0TW9kaWZpZWQpLHQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVEYXRhKCEwLHQuX3VybCxuLmJvZHkuYXR0cmlidXRlLG4uYm9keS52YWx1ZSkpfSl9fSx7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX3N1YnNjcmlwdGlvbkxpc3RlbmVyLnJlbW92ZSgpLGUuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpLGUuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5yZW1vdmUoKX0pLCgwLHUuZGVmYXVsdCkoZS5fZm9yd2FyZHMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5mb3J3YXJkVW5TdWJzY3JpYmUodCl9KSwKLy9yZW1vdmUgYWxsIHN1YnNjcmlwdGlvbnMKKDAsdS5kZWZhdWx0KShlLl9zdWJzY3JpcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX3N1YnNjcmlwdGlvbnNbdF0uX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0se2tleToicmVzdW1lU3Vic2NyaXB0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlJiYoMCx1LmRlZmF1bHQpKGUpLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49ZVtyXTtiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0XSAtIHJlc3VtZSBzdWJzY3JpcHRpb25zIix0LG4sdC5fY2hpbGRyZW5zKSx0Ll9zdWJzY3JpcHRpb25zW25dfHwodC5fc3Vic2NyaXB0aW9uc1tuXT1uZXcgZy5kZWZhdWx0KHQuX2J1cyx0Ll9vd25lcix0Ll91cmwsdC5fY2hpbGRyZW5zLCEwKSl9KX19LHtrZXk6ImZvcndhcmRTdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToic3Vic2NyaWJlIixmcm9tOnQuX3BhcmVudC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK3QuX2RvbWFpbisiL3NtIixib2R5OntyZXNvdXJjZXM6ZSxzb3VyY2U6dC5fb3duZXJ9fTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLGkpe3QuX2J1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKHIpe2lmKGIubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgXWZvcndhcmQtc3Vic2NyaWJlLXJlc3BvbnNlKHJlcG9ydGVyKTogIixyKSwyMDA9PT1yLmJvZHkuY29kZSl7dmFyIG89dC5fYnVzLmFkZEZvcndhcmQodC5fdXJsLHQuX293bmVyKTt0Ll9mb3J3YXJkc1tlWzBdXT1vLG4oKX1lbHNlIGkoIkVycm9yIG9uIG1zZy1ub2RlIHN1YnNjcmlwdGlvbjogIityLmJvZHkuZGVzYyl9KX0pfX0se2tleToiZm9yd2FyZFVuU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2ZvcndhcmRzW2VdLnJlbW92ZSgpLGRlbGV0ZSB0Ll9mb3J3YXJkc1tlXTsKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIHRoZSBtc2ctbm9kZSBTdWJzY3JpcHRpb25NYW5hZ2VyIGNvbXBvbmVudAp2YXIgcj17dHlwZToidW5zdWJzY3JpYmUiLGZyb206dC5fcGFyZW50Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrdC5fZG9tYWluKyIvc20iLGJvZHk6e3Jlc291cmNlczpbZV0sc291cmNlOnQuX293bmVyfX07dC5fYnVzLnBvc3RNZXNzYWdlKHIpfX0se2tleToiYWRkQ2hpbGRyZW5zIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gdm9pZCBuKCk7dmFyIGE9ci5fdXJsKyIvY2hpbGRyZW4vIjtiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IC0gYWRkQ2hpbGRyZW5zXSAtIGNoaWxkcmVuczogIixlLGEpLGUuZm9yRWFjaChmdW5jdGlvbihlKXtyLl9jaGlsZHJlbnMucHVzaChlKX0pOy8qCiAgICAgICAgX3RoaXMuX2NoaWxkcmVucy5mb3JFYWNoKChjaGlsZCkgPT4gewogICAgICAgICAgbGV0IGNoaWxkSWQgPSBjaGlsZEJhc2VVUkwgKyBjaGlsZDsKICAgICAgICAgICBsZXQgc2VsZkZvcndhcmQgPSBfdGhpcy5fYnVzLmFkZEZvcndhcmQoY2hpbGRJZCwgb3duZXIpOwogICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goc2VsZkZvcndhcmQpOwogICAgICAgIH0pOyovCnZhciBzPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gcy5wdXNoKGErZSl9KTsKLy9fdGhpcy5fc3RvcmFnZVN1YnNjcmlwdGlvbnNbX3RoaXMuX29ialN1YnNjcmlwdG9yVVJMXSA9IHt1cmw6IF90aGlzLl91cmwsIG93bmVyOiBfdGhpcy5fb3duZXIsIGNoaWxkcmVuczogX3RoaXMuX2NoaWxkcmVuc307Ci8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byB0aGUgbXNnLW5vZGUgU3Vic2NyaXB0aW9uTWFuYWdlciBjb21wb25lbnQKdmFyIHU9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl9wYXJlbnQuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIityLl9kb21haW4rIi9zbSIsYm9keTp7cmVzb3VyY2VzOnMsc291cmNlOnIuX293bmVyfX07ci5fYnVzLnBvc3RNZXNzYWdlKHUsZnVuY3Rpb24oZSl7Yi5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCBdbm9kZS1zdWJzY3JpYmUtcmVzcG9uc2UocmVwb3J0ZXIpOiIsZSksMjAwPT09ZS5ib2R5LmNvZGU/KAovL2FkZCBjaGlsZHJlbiBsaXN0ZW5lcnMgb24gbG9jYWwgLi4uCnMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1yLl9idXMuYWRkTGlzdGVuZXIoZSxmdW5jdGlvbihlKXtpZigKLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGlsZHJlbnM/CmIubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgcmVjZWl2ZWRdIixlKSwiY3JlYXRlIj09PWUudHlwZSYmZS50by5pbmNsdWRlcygiY2hpbGRyZW4iKSYmdC5faXNUb1NhdmVEYXRhKXsKLy8gaWYgdGhlIHZhbHVlIGlzIG5vdCBlbmNyeXB0ZWQgbGV0cyBlbmNyeXB0IGl0Ci8vIHRvZG86IHNob3VsZCBiZSBzdWJqZWN0IHRvIHNvbWUgcG9saWN5CnZhciBuPSgwLGguc3BsaXRPYmplY3RVUkwpKGUudG8pLG89bi51cmw7Ci8vcmVtb3ZlIGZhbHNlIHdoZW4gbXV0dWFsQXV0aGVudGljYXRpb24gaXMgZW5hYmxlZAoic3RyaW5nIiE9dHlwZW9mIGUuYm9keS52YWx1ZT8oYi5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdF0gZW5jcnlwdGluZyByZWNlaXZlZCBkYXRhICIsZS5ib2R5LnZhbHVlKSxyLl9wYXJlbnQuX2lkZW50aXR5TW9kdWxlLmVuY3J5cHREYXRhT2JqZWN0KGUuYm9keS52YWx1ZSxvKS50aGVuKGZ1bmN0aW9uKHQpe2IubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3RdIGVuY3J5cHRlZCBkYXRhICIsdCksci5fc3RvcmVDaGlsZE9iamVjdChlLCgwLGkuZGVmYXVsdCkodCkpfSkuY2F0Y2goZnVuY3Rpb24odCl7Yi53YXJuKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIGZhaWxlZCA6ICIsdCwiIFN0b3JpbmcgdW5lbmNyeXB0ZWQiKSxyLl9zdG9yZUNoaWxkT2JqZWN0KGUsZS5ib2R5LnZhbHVlKX0pKTpyLl9zdG9yZUNoaWxkT2JqZWN0KGUsZS5ib2R5LnZhbHVlKX19KTtyLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKG4pO3ZhciBvPXIuX2J1cy5hZGRGb3J3YXJkKGUsci5fb3duZXIpO3IuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobyl9KSxuKCkpOm8oIkVycm9yIG9uIG1zZy1ub2RlIHN1YnNjcmlwdGlvbjogIitlLmJvZHkuZGVzYyl9KX0pfX0se2tleToiX3N0b3JlQ2hpbGRPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPSgwLGguc3BsaXRPYmplY3RVUkwpKGUudG8pLGk9bi51cmwsbz1uLnJlc291cmNlLGE9e2lkZW50aXR5OmUuYm9keS5pZGVudGl0eSx2YWx1ZTp0fSxzPWUuYm9keS5yZXNvdXJjZSx1PW87cyYmKHUrPSIuIitzKSwKLy8gdGhpcyBpZGVudGl0eSBkYXRhIGlzIG5vdCBuZWVkZWQgdG8gYmUgc3RvcmVkCmRlbGV0ZSBhLmlkZW50aXR5LmFzc2VydGlvbixkZWxldGUgYS5pZGVudGl0eS5leHBpcmVzLHIuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVDaGlsZHJlbnMoITAsaSx1LGEpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD0oMCxoLmRpdmlkZVVSTCkoZS5fb3duZXIpLmRvbWFpbjsKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IGRpcmVjdGx5IHRvIGFsbCBzdWJzY3JpYmVycyBvZiB0aGUgcmVwb3J0ZXIKZS5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJkZWxldGUiLGZyb206ZS5fb2JqU3Vic2NyaXB0b3JVUkwsdG86ZS5fdXJsKyIvY2hhbmdlcyJ9KSwKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIHRoZSBtc2ctbm9kZSBPYmplY3RBbGxvY2F0aW9uTWFuYWdlciBjb21wb25lbnQKZS5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJkZWxldGUiLGZyb206ZS5fcGFyZW50Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrdCsiL29iamVjdC1hZGRyZXNzLWFsbG9jYXRpb24iLGJvZHk6e3Jlc291cmNlOmUuX3VybCxjaGlsZHJlblJlc291cmNlczplLl9jaGlsZHJlbnN9fSksZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9wYXJlbnQuX3JlcG9ydGVyc1tlLl91cmxdfX0se2tleToiX29uUmVtb3RlUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86dC5fdXJsLGJvZHk6e2NvZGU6ZS5ib2R5LmNvZGUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LHNvdXJjZTplLmZyb219fSl9fSx7a2V5OiJfb25SZW1vdGVTdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuc3Vic2NyaWJlcjsKLy92YWxpZGF0ZSBpZiBzdWJzY3JpcHRpb24gYWxyZWFkeSBleGlzdHM/CnQuX3N1YnNjcmlwdGlvbnNbcl0mJgovLyBsZXQgZXJyb3JNc2cgPSB7Ci8vICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKLy8gICBib2R5OiB7IGNvZGU6IDUwMCwgZGVzYzogJ1N1YnNjcmlwdGlvbiBmb3IgKCcgKyBfdGhpcy5fdXJsICsgJyA6ICcgKyAgaHlwZXJ0eVVSTCArICcpIGFscmVhZHkgZXhpc3RzIScgfQovLyB9OwovLwovLyBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGVycm9yTXNnKTsKLy8gcmV0dXJuOwovLyBuZXcgdmVyc2lvbiBiZWNhdXNlIG9mIHJldXNhZ2UKdC5fc3Vic2NyaXB0aW9uc1tyXS5fcmVsZWFzZUxpc3RlbmVycygpOwovL2FzayB0byBzdWJzY3JpYmUgdG8gU3luY2hlcj8gKGRlcGVuZHMgb24gdGhlIG9wZXJhdGlvbiBtb2RlKQovL1RPRE86IGdldCBtb2RlIGZyb20gb2JqZWN0IQp2YXIgbj17dHlwZToiZm9yd2FyZCIsZnJvbTp0Ll91cmwsdG86dC5fb3duZXIsYm9keTp7dHlwZTplLnR5cGUsZnJvbTpyLHRvOnQuX3VybCxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9fTsKLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQplLmJvZHkuaGFzT3duUHJvcGVydHkoIm11dHVhbCIpJiYobi5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsKSx0Ll9idXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihuKXtiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF1mb3J3YXJkLXJlcGx5OiAiLG4pLDIwMD09PW4uYm9keS5jb2RlJiYodC5fc3Vic2NyaXB0aW9uc1tyXXx8KGIubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3RdIC0gX29uUmVtb3RlU3Vic2NyaWJlOiIsdC5fY2hpbGRyZW5zKSx0Ll9zdWJzY3JpcHRpb25zW3JdPW5ldyBnLmRlZmF1bHQodC5fYnVzLHQuX293bmVyLHQuX3VybCx0Ll9jaGlsZHJlbnMsITApKSk7Ci8vVE9ETzogYXR1YWxpemFyIG11dHVhbCBubyBzdG9yYWdlIGUgdGIgbmEgc2Vzc2lvbktleXMKLy8gU3RvcmUgZm9yIGVhY2ggcmVwb3J0ZXIgaHlwZXJ0eSB0aGUgZGF0YU9iamVjdAp2YXIgaT12b2lkIDA7ZS5ib2R5LmlkZW50aXR5JiZlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCYmKGk9ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwic3Vic2NyaWJlclVzZXJzIixpKSksZS5ib2R5Lmhhc093blByb3BlcnR5KCJtdXR1YWwiKSYmCi8vICAgICAgICAgIF90aGlzLl9wYXJlbnQuX2lkZW50aXR5TW9kdWxlLnVwZGF0ZUlzVG9FbmNyeXB0Rm9yRGF0YU9iamVjdFNlc3Npb25LZXkoX3RoaXMuX3VybCwgbXNnLmJvZHkubXV0dWFsKS50aGVuKCgpPT57CnQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCx0Ll91cmwsIm11dHVhbCIsZS5ib2R5Lm11dHVhbCksdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwic3Vic2NyaXB0aW9ucyIsciksbi5ib2R5Lm93bmVyPXQuX293bmVyLAovL0ZMT1ctT1VUOiBzdWJzY3JpcHRpb24gcmVzcG9uc2Ugc2VudCAoZm9yd2FyZCBmcm9tIGludGVybmFsIEh5cGVydHkpCnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Om4uYm9keX0pfSl9fSx7a2V5OiJfb25SZW1vdGVVblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5zb3VyY2Usbj10Ll9zdWJzY3JpcHRpb25zW3JdO2lmKG4pe24uX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgaT17dHlwZToiZm9yd2FyZCIsZnJvbTp0Ll91cmwsdG86dC5fb3duZXIsYm9keTp7dHlwZTplLnR5cGUsZnJvbTpyLHRvOnQuX3VybCxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9fTt0Ll9idXMucG9zdE1lc3NhZ2UoaSl9fX0se2tleToiaXNUb1NhdmVEYXRhIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faXNUb1NhdmVEYXRhPWV9fV0pLFJlcG9ydGVyT2JqZWN0fSgpO3QuZGVmYXVsdD1tLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigxMSksZD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGwpLHA9cigxNSkseT1yKDIwNiksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHkpLHY9ZC5nZXRMb2dnZXIoIk9ic2VydmVyT2JqZWN0IiksZz1mdW5jdGlvbigpe2Z1bmN0aW9uIE9ic2VydmVyT2JqZWN0KGUsdCxyKXt2YXIgbj10aGlzOygwLHUuZGVmYXVsdCkodGhpcyxPYnNlcnZlck9iamVjdCk7dmFyIGk9dGhpcztpLl9wYXJlbnQ9ZSxpLl91cmw9dCxpLl9jaGlsZHJlbnM9cixpLl9idXM9ZS5fYnVzLGkuX3N1YnNjcmlwdGlvbnM9e30saS5fc3RvcmFnZVN1YnNjcmlwdGlvbnM9e30saS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sdGhpcy5faXNUb1NhdmVEYXRhPSExO3ZhciBvPWkuX3VybCsiL2NoYW5nZXMiO2kuX2NoYW5nZUxpc3RlbmVyPWkuX2J1cy5hZGRMaXN0ZW5lcihvLGZ1bmN0aW9uKGUpe3YubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QgXSBTeW5jaGVyTWFuYWdlci0iK28rIi1SQ1Y6ICIsZSksCi8vVE9ETzogd2hhdCB0b2RvIGhlcmU/IFNhdmUgY2hhbmdlcz8Kbi5faXNUb1NhdmVEYXRhJiZlLmJvZHkuYXR0cmlidXRlJiYodi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCBdIFN5bmNoZXJNYW5hZ2VyIC0gc2F2ZSBkYXRhOiAiLGUpLGkuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMSxpLl91cmwsInZlcnNpb24iLGUuYm9keS52ZXJzaW9uKSxpLl9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITEsaS5fdXJsLCJsYXN0TW9kaWZpZWQiLGUuYm9keS5sYXN0TW9kaWZpZWQpLGkuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVEYXRhKCExLGkuX3VybCxlLmJvZHkuYXR0cmlidXRlLGUuYm9keS52YWx1ZSkpfSl9cmV0dXJuKDAsZi5kZWZhdWx0KShPYnNlcnZlck9iamVjdCxbe2tleToiX25ld1N1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3N1YnNjcmlwdGlvbnNbZV07di5sb2coIltPYnNlcnZlciBPYmplY3QgLSBuZXcgc3Vic2NyaXB0aW9uXSAtICIsdC5fc3Vic2NyaXB0aW9ucyxlLHQuX3N1YnNjcmlwdGlvbnMuaGFzT3duUHJvcGVydHkoZSkpLHJ8fCh0Ll9zdWJzY3JpcHRpb25zW2VdPW5ldyBoLmRlZmF1bHQodC5fYnVzLGUsdC5fdXJsLHQuX2NoaWxkcmVucywhMSkpfX0se2tleToiYWRkU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9uZXdTdWJzY3JpcHRpb24oZSl9fSx7a2V5OiJhZGRDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4pe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbigpO3ZhciBvPXIuX3VybCsiL2NoaWxkcmVuLyI7di5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCAtIGFkZENoaWxkcmVuc10gLSBjaGlsZHJlbnM6ICIsZSxvKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ci5fYnVzLmFkZExpc3RlbmVyKG8rZSxmdW5jdGlvbihlKXtpZigKLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGlsZHJlbnM/CnYubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QgcmVjZWl2ZWRdIixlKSwiY3JlYXRlIj09PWUudHlwZSYmZS50by5pbmNsdWRlcygiY2hpbGRyZW4iKSYmdC5faXNUb1NhdmVEYXRhKXt2YXIgbz0oMCxwLnNwbGl0T2JqZWN0VVJMKShlLnRvKSxhPW8udXJsOwovL3JlbW92ZSBmYWxzZSB3aGVuIG11dHVhbEF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQKInN0cmluZyIhPXR5cGVvZiBlLmJvZHkudmFsdWU/KHYubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3RdIGVuY3J5cHRpbmcgcmVjZWl2ZWQgZGF0YSAiLGUuYm9keS52YWx1ZSksci5fcGFyZW50Ll9pZGVudGl0eU1vZHVsZS5lbmNyeXB0RGF0YU9iamVjdChlLmJvZHkudmFsdWUsYSkudGhlbihmdW5jdGlvbih0KXt2LmxvZygiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0XSBlbmNyeXB0ZWQgZGF0YSAiLHQpLHIuX3N0b3JlQ2hpbGRPYmplY3QoZSwoMCxpLmRlZmF1bHQpKHQpKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3Yud2FybigiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0Ll9lbmNyeXB0Q2hpbGRdIGZhaWxlZCwgc3RvcmluZyB1bmVuY3J5cHRlZCAiLHQpLHIuX3N0b3JlQ2hpbGRPYmplY3QoZSxlLmJvZHkudmFsdWUpfSkpOnIuX3N0b3JlQ2hpbGRPYmplY3QoZSxlLmJvZHkudmFsdWUpfXYubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QgY2hpbGRyZW4gTGlzdGVuZXJzXSIsci5fY2hpbGRyZW5MaXN0ZW5lcnMsbiksLTE9PT1yLl9jaGlsZHJlbkxpc3RlbmVycy5pbmRleE9mKG4pJiZyLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKG4pfSl9KX0pfX0se2tleToiX3N0b3JlQ2hpbGRPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPSgwLHAuc3BsaXRPYmplY3RVUkwpKGUudG8pLGk9bi51cmwsbz1uLnJlc291cmNlLGE9e2lkZW50aXR5OmUuYm9keS5pZGVudGl0eSx2YWx1ZTp0fTsKLy8gdGhpcyBpZGVudGl0eSBkYXRhIGlzIG5vdCBuZWVkZWQgdG8gYmUgc3RvcmVkCmRlbGV0ZSBhLmlkZW50aXR5LmFzc2VydGlvbixkZWxldGUgYS5pZGVudGl0eS5leHBpcmVzO3ZhciBzPWUuYm9keS5yZXNvdXJjZSx1PW87cyYmKHUrPSIuIitzKSx2LmxvZygiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0Ll9zdG9yZUNoaWxkT2JqZWN0XSA6ICIsaSx1LGEpLHIuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVDaGlsZHJlbnMoITEsaSx1LGEpfX0se2tleToicmVtb3ZlU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tLG49KDAscC5kaXZpZGVVUkwpKHIpLmRvbWFpbixpPXQuX3VybCsiL3N1YnNjcmlwdGlvbiIsbz10Ll9zdWJzY3JpcHRpb25zW3JdO28mJigKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIHJlbW90ZSBSZXBvcnRlck9iamVjdCAtPiBfb25SZW1vdGVVblN1YnNjcmliZQp0Ll9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOnQuX3BhcmVudC5fdXJsLHRvOmksYm9keTp7c291cmNlOnIsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5fX0pLAovL1RPRE86IHNob3VsZCBJIHdhaXQgZm9yIHJlc3BvbnNlIGJlZm9yZSB1bnN1YnNjcmliZSBvbiBtc2ctbm9kZQovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gbXNnLW5vZGUgU3Vic2NyaXB0aW9uTWFuYWdlciBjb21wb25lbnQKdC5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTp0Ll9wYXJlbnQuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIituKyIvc20iLGJvZHk6e3Jlc291cmNlOnQuX3VybCxjaGlsZHJlblJlc291cmNlczp0Ll9jaGlsZHJlbnN9fSksby5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSB0Ll9zdWJzY3JpcHRpb25zW3JdKX19LHtrZXk6ImlzVG9TYXZlRGF0YSIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2lzVG9TYXZlRGF0YT1lfX1dKSxPYnNlcnZlck9iamVjdH0oKTt0LmRlZmF1bHQ9ZyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA1MDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigyMDUpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDExKSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDE1KSx5PXIoNTA2KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoeSksdj1kLmdldExvZ2dlcigiU3Vic2NyaXB0aW9uTWFuYWdlciIpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBTdWJzY3JpcHRpb25NYW5hZ2VyKGUsdCxyKXtpZigoMCx1LmRlZmF1bHQpKHRoaXMsU3Vic2NyaXB0aW9uTWFuYWdlciksIWUpdGhyb3cgbmV3IEVycm9yKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gLSBuZWVkcyB0aGUgcnVudGltZVVSTCBwYXJhbWV0ZXIiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIltTdWJzY3JpcHRpb25NYW5hZ2VyXSAtIG5lZWRzIHRoZSBNZXNzYWdlQnVzIGluc3RhbmNlIik7dmFyIG49dGhpcztuLl9idXM9dCxuLl9zdG9yYWdlPXIsbi5fc3Vic2NyaXB0aW9ucz17fSxuLl9zdWJzY3JpcHRpb25zU3RvcmFnZT17fSwKLy9UT0RPOiB0aGVzZSBzaG91bGQgYmUgc2F2ZWQgaW4gcGVyc2lzdGVuY2UgZW5naW5lPwpuLnJ1bnRpbWVVUkw9ZSxuLl91cmw9ZSsiL3N1YnNjcmlwdGlvbnMiLAovL1RPRE86IHRoaXMgc2hvdWxkIG5vdCBiZSBoYXJkY29kZWQhCm4uX2RvbWFpbj0oMCxwLmRpdmlkZVVSTCkoZSkuZG9tYWluLHQuYWRkTGlzdGVuZXIobi5fdXJsLGZ1bmN0aW9uKGUpe3N3aXRjaCh2LmluZm8oIltTdWJzY3JpcHRpb25NYW5hZ2VyXSBSQ1Y6ICIsZSksZS50eXBlKXtjYXNlInN1YnNjcmliZSI6bi5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6bi5fb25VblN1YnNjcmliZShlKTticmVhaztjYXNlInJlYWQiOm4uX29uUmVhZChlKX19KX1yZXR1cm4oMCxmLmRlZmF1bHQpKFN1YnNjcmlwdGlvbk1hbmFnZXIsW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbih0KXtlLl9zdG9yYWdlLmdldCgic3Vic2NyaXB0aW9ucyIpLnRoZW4oZnVuY3Rpb24ocil7di5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyLmluaXRdIHJlc3VtZSBzdWJzY3JpcHRpb25zOiAiLHIpLHImJihlLl9zdWJzY3JpcHRpb25zU3RvcmFnZT1yLCgwLGkuZGVmYXVsdCkocikuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jcmVhdGVTdWJzY3JpcHRpb24odC5kb21haW4sdC5yZXNvdXJjZXMsdC5zdWJzY3JpYmVyLHQuaWRlbnRpdHkpfSkpLHQoKX0pfSl9fSx7a2V5OiJfb25TdWJzY3JpYmUiLAovL21lc3NhZ2UgcmVjZWl2ZWQgdG8gc2V0IGEgcm91dGluZyBwYXRoCnZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2VzLG49ZS5mcm9tLGk9KDAscC5kaXZpZGVVUkwpKHJbMF0pLmRvbWFpbixvPWUuYm9keS5pZGVudGl0eTt0Ll9jcmVhdGVTdWJzY3JpcHRpb24oaSxyLG4sbykudGhlbihmdW5jdGlvbihhKXsKLy9mb3J3YXJkIHRvIGh5cGVydHk6CmEuaWQ9ZS5pZCxhLmZyb209dC5fdXJsLGEudG89bixhLmJvZHk9ZS5ib2R5LGEuYm9keS5jb2RlPTIwMCx2LmxvZygiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIC0gY3JhZXRlU3Vic2NyaXB0aW9uOiAiLGUsYSxuKSx0Ll9idXMucG9zdE1lc3NhZ2UoYSksdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbbl0/ci5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW25dLnJlc291cmNlcy5pbmNsdWRlcyhlKXx8dC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbbl0ucmVzb3VyY2VzLnB1c2goZSl9KTp0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtuXT17ZG9tYWluOmkscmVzb3VyY2VzOnIsc3Vic2NyaWJlcjpuLGlkZW50aXR5Om99LHQuX3N0b3JhZ2Uuc2V0KCJzdWJzY3JpcHRpb25zIiwxLHQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlKX0pfX0se2tleToiX2NyZWF0ZVN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihvKXsKLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gdGhlIG1zZy1ub2RlLCByZWdpc3RlcmluZyBsaXN0ZW5lcnMgb24gdGhlIGJyb2tlcgp2YXIgYT17dHlwZToic3Vic2NyaWJlIixmcm9tOmkuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitlKyIvc20iLGJvZHk6e2lkZW50aXR5Om4scmVzb3VyY2VzOnQsc291cmNlOnJ9fTsKLy9zdWJzY3JpYmUgaW4gbXNnLW5vZGUKaS5fYnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24oZSl7di5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyXSBub2RlLXN1YnNjcmliZS1yZXNwb25zZTogIixlKTsKLy9pZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsvL1RPRE86IHVuY29tbWVudCB3aGVuICBNTiByZXBsaWVzIHdpdGggY29ycmVjdCByZXNwb25zZSBib2R5IGNvZGUKLy9UT0RPOiBzdXBwb3J0IG11bHRpcGxlIHJvdXRlcyBmb3IgbXVsdGlwbGUgcmVzb3VyY2VzCnZhciBuPWkuX3N1YnNjcmlwdGlvbnNbcl07di5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyXSAtICIsaS5fc3Vic2NyaXB0aW9ucyx0LGkuX3N1YnNjcmlwdGlvbnMuaGFzT3duUHJvcGVydHkocikpLG58fChpLl9zdWJzY3JpcHRpb25zW3JdPXt9KSx0LmZvckVhY2goZnVuY3Rpb24oZSl7aS5fc3Vic2NyaXB0aW9uc1tyXVtlXT1uZXcgaC5kZWZhdWx0KGkuX2J1cyxyLGUpfSksbyhlKX0pfSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbSxuPWUuYm9keS5yZXNvdXJjZTtpZih0Ll9zdWJzY3JpcHRpb25zW3JdJiZ0Ll9zdWJzY3JpcHRpb25zW3JdW25dKXt2YXIgaT0oMCxwLmRpdmlkZVVSTCkobikuZG9tYWluLG89dC5fc3Vic2NyaXB0aW9uc1tyXVtuXTtpZigKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIG1zZy1ub2RlIFN1YnNjcmlwdGlvbk1hbmFnZXIgY29tcG9uZW50CnQuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToidW5zdWJzY3JpYmUiLGZyb206dC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK2krIi9zbSIsYm9keTp7cmVzb3VyY2VzOltuXSxzb3VyY2U6cn19KSxvLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl1bbl0sdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbcl0pe3ZhciBhPXQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW3JdLnJlc291cmNlcy5pbmRleE9mKG4pOy0xIT1hJiZ0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtyXS5yZXNvdXJjZXMuc3BsaWNlKGEsMSksdC5fc3RvcmFnZS5zZXQoInN1YnNjcmlwdGlvbnMiLDEsdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2UpfX10Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dm9pZCAwO3YubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gLSByZXF1ZXN0IHRvIHJlYWQgU3Vic2NyaXB0aW9uczogIixlKSx0Ll9zdG9yYWdlLmdldCgic3Vic2NyaXB0aW9ucyIpLnRoZW4oZnVuY3Rpb24oaSl7aWYoaSYmaVtyXSl7dmFyIG89aVtyXS5yZXNvdXJjZXM7bj17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTpvfX19ZWxzZSBuPXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LGRlc2NyaXB0aW9uOiJOb3QgRm91bmQifX07dC5fYnVzLnBvc3RNZXNzYWdlKG4pfSl9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fV0pLFN1YnNjcmlwdGlvbk1hbmFnZXJ9KCk7dC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDExKSx1PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0ocyksYz11LmdldExvZ2dlcigiU3Vic2NyaXB0aW9uIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIFN1YnNjcmlwdGlvbihlLHQscil7KDAsaS5kZWZhdWx0KSh0aGlzLFN1YnNjcmlwdGlvbik7dmFyIG49dGhpcztuLl9zdWJzY3JpYmVyPXQsbi5yZXNvdXJjZT1yLGMubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlci5TdWJzY3JpcHRpb25dIG5ldzogIix0LHIpLAovL2FkZCBmb3J3YXJkCm4uX2xpc3RlbmVyPWUuYWRkRm9yd2FyZChyLHQpfXJldHVybigwLGEuZGVmYXVsdCkoU3Vic2NyaXB0aW9uLFt7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9saXN0ZW5lci5yZW1vdmUoKX19XSksU3Vic2NyaXB0aW9ufSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDYwKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig2OCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig2OSksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9cigxMSksYj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGcpLG09cigyMDIpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPXIoMjAzKSx3PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoUiksUz1yKDE1KSxPPXIoMjA0KSxQPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoTyksaz1yKDUwOCksTT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGspLEw9Yi5nZXRMb2dnZXIoIlBFUCIpLHg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gUnVudGltZUNvcmVDdHgoZSx0LHIsbixpKXsoMCxmLmRlZmF1bHQpKHRoaXMsUnVudGltZUNvcmVDdHgpO3ZhciBvPSgwLHkuZGVmYXVsdCkodGhpcywoUnVudGltZUNvcmVDdHguX19wcm90b19ffHwoMCx1LmRlZmF1bHQpKFJ1bnRpbWVDb3JlQ3R4KSkuY2FsbCh0aGlzKSk7cmV0dXJuIG8uX3J1bnRpbWVVUkw9ZSxvLl9wZXBVUkw9by5fcnVudGltZVVSTCsiL3BlcCIsby5fZ3VpVVJMPW8uX3J1bnRpbWVVUkwrIi9wb2xpY3ktZ3VpIixvLmlkTW9kdWxlPXQsby5ydW50aW1lUmVnaXN0cnk9cixvLmFjdGl2ZVVzZXJQb2xpY3k9dm9pZCAwLG8uc2VydmljZVByb3ZpZGVyUG9saWN5PXt9LG8udXNlclBvbGljaWVzPXt9LG8uc3RvcmFnZU1hbmFnZXI9bixvLnJ1bnRpbWVDYXBhYmlsaXRpZXM9aSxvfXJldHVybigwLHYuZGVmYXVsdCkoUnVudGltZUNvcmVDdHgsZSksKDAsZC5kZWZhdWx0KShSdW50aW1lQ29yZUN0eCxbe2tleToibG9hZENvbmZpZ3VyYXRpb25zIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtlLnN0b3JhZ2VNYW5hZ2VyLmdldCgicmV0aGluazphY3RpdmVQb2xpY3kiKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLmFjdGl2ZVVzZXJQb2xpY3k9dCxlLnN0b3JhZ2VNYW5hZ2VyLmdldCgicmV0aGluazpncm91cHMiKX0pLnRoZW4oZnVuY3Rpb24odCl7dmFyIHI9dDtyZXR1cm4gZS5ncm91cHM9dm9pZCAwPT09cj97fTpyLGUuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXRoaW5rOnNwUG9saWNpZXMiKX0pLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49cjtlLnNlcnZpY2VQcm92aWRlclBvbGljeT12b2lkIDA9PT1uP3t9Om4sZS5fbG9hZFVzZXJQb2xpY2llcygpLnRoZW4oZnVuY3Rpb24oKXt0KCl9KX0pfSl9fSx7a2V5OiJwcmVwYXJlRm9yRXZhbHVhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89cjt0P28uX2lzVG9DeXBoZXJNb2R1bGUoZSk/by5pZE1vZHVsZS5kZWNyeXB0TWVzc2FnZShlKS50aGVuKGZ1bmN0aW9uKGUpey8qaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3VwZGF0ZScpIHsKICAgICAgICAgICAgICAgIF90aGlzLl9pc1ZhbGlkVXBkYXRlKG1lc3NhZ2UpLnRoZW4obWVzc2FnZSA9PiB7Ki8KbihlKX0sZnVuY3Rpb24oZSl7aShlKX0pOm4oZSk6Ci8vIGxvZy5sb2coJ1tQb2xpY3kuUnVudGltZUNvcmVDdHggcHJlcGFyZUZvckV2YWx1YXRpb25dJywgbWVzc2FnZSk7Cm8uX2lzVG9TZXRJRChlKT9vLl9nZXRJZGVudGl0eShlKS50aGVuKGZ1bmN0aW9uKHQpe2UuYm9keS5pZGVudGl0eT10LG4oZSl9LGZ1bmN0aW9uKGUpe2koZSl9KTpuKGUpfSl9fSx7a2V5OiJnZXRQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtyZXR1cm4gdm9pZCAwIT09dGhpcy5hY3RpdmVVc2VyUG9saWN5JiYoci51c2VyUG9saWN5PXRoaXMudXNlclBvbGljaWVzW3RoaXMuYWN0aXZlVXNlclBvbGljeV0pLHIuc2VydmljZVByb3ZpZGVyUG9saWN5PXRoaXMuZ2V0U2VydmljZVByb3ZpZGVyUG9saWN5KGUsdCkscn19LHtrZXk6Il9pc1ZhbGlkVXBkYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5mcm9tLnNwbGl0KCI6Ly8iKS5sZW5ndGg+MT90LmlkTW9kdWxlLl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3QoZS5mcm9tKS50aGVuKGZ1bmN0aW9uKHQpe3Q9PT1lLmJvZHkuc291cmNlP3IoZSk6bigiVGhlIHNvdXJjZSBvZiB0aGUgbWVzc2FnZSBpcyBub3QgdmFsaWQuIil9LGZ1bmN0aW9uKGUpe24oZSl9KTpyKGUpfSl9fSx7a2V5OiJwcmVwYXJlVG9Gb3J3YXJkIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixvKXsKLy8gbG9nLmxvZygnW1BvbGljeS5SdW50aW1lQ29yZUN0eC5wcmVwYXJlVG9Gb3J3YXJkXScsIG1lc3NhZ2UpOwovLyBjb21tZW50IHRoaXMgdG8gZW5hYmxlIG11dHVhbCBhdXRoZW50aWNhdGlvbgovL3JldHVybiByZXNvbHZlKG1lc3NhZ2UpOwovLyBUT0RPIHJlbW92ZSB0aGlzIHZhbGlkYXRpb24uIFdoZW4gdGhlIE5vZGVqcyBhdXRoIHdhcyBjb21wbGV0ZWQgdGhpcyBzaG91bGQgd29yayBsaWtlIGJyb3dzZXI7Cm4ucnVudGltZUNhcGFiaWxpdGllcy5pc0F2YWlsYWJsZSgibm9kZSIpLnRoZW4oZnVuY3Rpb24obil7Ci8vIGxvZy5sb2coJ1tSdW50aW1lQ29yZUN0eCAtIGlzQXZhaWxhYmxlIC0gbm9kZV0gLSAnLCByZXN1bHQpOwppZihufHxlLmJvZHkmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIikmJiFlLmJvZHkubXV0dWFsKXJldHVybiByKGUpO2lmKHQpeyJzdWJzY3JpYmUiPT09ZS50eXBlJmkuaXNGcm9tUmVtb3RlU00oZS5mcm9tKT8KLy8gVE9ETzogc2hvdWxkIHZlcmlmeSB3aHkgdGhlIG11dHVhbEF1dGhlbnRpY2F0aW9uIGlzIG5vdCB3b3JraW5nCi8vIFRPRE86IHRoaXMgc2hvdWxkIHVuY29tbWVudGVkCmkuZG9NdXR1YWxBdXRoZW50aWNhdGlvbihlKS50aGVuKGZ1bmN0aW9uKCl7cihlKX0sZnVuY3Rpb24oZSl7byhlKX0pOnIoZSl9ZWxzZQovLyBUT0RPOiBzaG91bGQgdmVyaWZ5IHdoeSB0aGUgbXV0dWFsQXV0aGVudGljYXRpb24gaXMgbm90IHdvcmtpbmcKLy8gVE9ETzogdGhpcyBzaG91bGQgdW5jb21tZW50ZWQKaS5faXNUb0N5cGhlck1vZHVsZShlKT9pLmlkTW9kdWxlLmVuY3J5cHRNZXNzYWdlKGUpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0sZnVuY3Rpb24oZSl7byhlKX0pOnIoZSl9KX0pfX0se2tleToiZG9NdXR1YWxBdXRoZW50aWNhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPWUudG8uc3BsaXQoIi8iKTtpZigtMSE9PWkuaW5kZXhPZigic3Vic2NyaXB0aW9uIikmdC5pc0Zyb21SZW1vdGVTTShlLmZyb20pKXtpLnBvcCgpO3ZhciBvPWlbMF0rIi8vIitpWzJdKyIvIitpWzNdO3QuaWRNb2R1bGUuZG9NdXR1YWxBdXRoZW50aWNhdGlvbihvLGUuYm9keS5zdWJzY3JpYmVyKS50aGVuKGZ1bmN0aW9uKCl7dC5ydW50aW1lUmVnaXN0cnkucmVnaXN0ZXJTdWJzY3JpYmVyKG8sZS5ib2R5LnN1YnNjcmliZXIpLHIoKX0sZnVuY3Rpb24oZSl7bihlKX0pfX0pfX0se2tleToiZ2V0TXlFbWFpbHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5pZE1vZHVsZS5nZXRJZGVudGl0aWVzKCksdD1bXTtmb3IodmFyIHIgaW4gZSl0LnB1c2goKDAsUy5nZXRVc2VyRW1haWxGcm9tVVJMKShlW3JdLmlkZW50aXR5KSk7cmV0dXJuIHR9fSx7a2V5OiJnZXRNeUh5cGVydGllcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJ1bnRpbWVSZWdpc3RyeS5oeXBlcnRpZXNMaXN0LHQ9W107Zm9yKHZhciByIGluIGUpe3ZhciBuPWVbcl0ub2JqZWN0TmFtZTstMT09PXQuaW5kZXhPZihuKSYmdC5wdXNoKG4pfXJldHVybiB0fX0se2tleToiZ2V0U2VydmljZVByb3ZpZGVyUG9saWN5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXZvaWQgMDtpZih0KXt2YXIgbj10aGlzLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZShlLnRvKTtyPXRoaXMuc2VydmljZVByb3ZpZGVyUG9saWN5W25dfWVsc2V7dmFyIGk9dGhpcy5ydW50aW1lUmVnaXN0cnkuZ2V0SHlwZXJ0eU5hbWUoZS5mcm9tKTtyPXRoaXMuc2VydmljZVByb3ZpZGVyUG9saWN5W2ldfXJldHVybiByfX0se2tleToiaXNGcm9tUmVtb3RlU00iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiJydW50aW1lIj09PWUuc3BsaXQoIjovLyIpWzBdJiZlIT09dGhpcy5ydW50aW1lUmVnaXN0cnkucnVudGltZVVSTCsiL3NtIn19LHtrZXk6ImlzTG9jYWwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJ1bnRpbWVSZWdpc3RyeS5pc0xvY2FsKGUpfX0se2tleToiaXNJbnRlcndvcmtpbmdQcm90b1N0dWIiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJ1bnRpbWVSZWdpc3RyeS5pc0ludGVyd29ya2luZ1Byb3RvU3R1YihlKX19LHtrZXk6Il9pc1RvU2V0SUQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVsiZG9tYWluLWlkcCIsInJ1bnRpbWUiLCJkb21haW4iXSxyPWUuZnJvbS5zcGxpdCgiOi8vIiksbj1yWzBdLGk9KHRoaXMucnVudGltZVJlZ2lzdHJ5LmlzTG9jYWwoZS50byksLTE9PT10LmluZGV4T2YobikpLG89ZS5mcm9tOwovLyBTaWduYWxsaW5nIE1lc3NhZ2VzIGJldHdlZW4gUDJQIFN0dWJzIGRvbid0IGhhdmUgSWRlbnRpdGllcy4gRkZTCi8vIFNpZ25hbGxpbmcgTWVzc2FnZXMgYmV0d2VlbiBQMlAgU3R1YnMgZG9uJ3QgaGF2ZSBJZGVudGl0aWVzLiBGRlMKcmV0dXJuIGUuYm9keSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJzb3VyY2UiKSYmKG89ZS5ib2R5LnNvdXJjZSksIW8uaW5jbHVkZXMoIi9wMnByZXF1ZXN0ZXIvIikmJiFvLmluY2x1ZGVzKCIvcDJwaGFuZGxlci8iKSYmaX19LHtrZXk6ImdldFVSTCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpO3JldHVybiB0WzBdKyIvLyIrdFsyXSsiLyIrdFszXX19LHtrZXk6Il9nZXRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mcm9tO3JldHVybiB2b2lkIDAhPT1lLmJvZHkuc291cmNlJiYodD1lLmJvZHkuc291cmNlKSwiZm9yd2FyZCI9PT1lLnR5cGUmJih0PWUuYm9keS5mcm9tKSx0aGlzLmlkTW9kdWxlLmdldFRva2VuKHQsZS50byl9fSx7a2V5OiJfaXNUb0N5cGhlck1vZHVsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7TC5sb2coIltQb2xpY3kuUnVudGltZUNvcmVDdHguaXN0b0NoeXBlck1vZHVsZV0iLGUpO3ZhciB0PSJjcmVhdGUiPT09ZS50eXBlLHI9Imh5cGVydHkiPT09KDAsUy5kaXZpZGVVUkwpKGUuZnJvbSkudHlwZSxuPSJoeXBlcnR5Ij09PSgwLFMuZGl2aWRlVVJMKShlLnRvKS50eXBlLGk9KDAsUy5pc0RhdGFPYmplY3RVUkwpKGUudG8pLG89IWUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIil8fGUuYm9keS5tdXR1YWw7cmV0dXJuIHQmJnImJm58fHQmJnImJmkmJm98fCJoYW5kc2hha2UiPT09ZS50eXBlfHwidXBkYXRlIj09PWUudHlwZSYmb319LHtrZXk6Il9sb2FkVXNlclBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5zdG9yYWdlTWFuYWdlci5nZXQoInJldGhpbms6dXNlclBvbGljaWVzIikudGhlbihmdW5jdGlvbih0KXt2YXIgbj10O2lmKHZvaWQgMCE9PW4pZm9yKHZhciBpIGluIG4pZS5wZXAuYWRkUG9saWN5KCJVU0VSIixpLG5baV0pO3IoKX0pfSl9fSx7a2V5OiJfZ2V0TGFzdENvbXBvbmVudE9mVVJMIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIvIik7cmV0dXJuIHRbdC5sZW5ndGgtMV19fSx7a2V5OiJfZ2V0UG9saWNpZXNKU09OIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl7dmFyIHI9ZVt0XS5jb21iaW5pbmdBbGdvcml0aG07ciBpbnN0YW5jZW9mIHcuZGVmYXVsdD9lW3RdLmNvbWJpbmluZ0FsZ29yaXRobT0iYmxvY2tPdmVycmlkZXMiOnIgaW5zdGFuY2VvZiBfLmRlZmF1bHQ/ZVt0XS5jb21iaW5pbmdBbGdvcml0aG09ImFsbG93T3ZlcnJpZGVzIjpyIGluc3RhbmNlb2YgUC5kZWZhdWx0P2VbdF0uY29tYmluaW5nQWxnb3JpdGhtPSJmaXJzdEFwcGxpY2FibGUiOmVbdF0uY29tYmluaW5nQWxnb3JpdGhtPXZvaWQgMH1yZXR1cm4gZX19LHtrZXk6InNhdmVBY3RpdmVQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazphY3RpdmVQb2xpY3kiLDAsZS5hY3RpdmVVc2VyUG9saWN5KS50aGVuKGZ1bmN0aW9uKCl7cigpfSl9KX19LHtrZXk6InNhdmVHcm91cHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazpncm91cHMiLDAsZS5ncm91cHMpLnRoZW4oZnVuY3Rpb24oKXtyKCl9KX0pfX0se2tleToic2F2ZVBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwO3N3aXRjaChlKXtjYXNlIlVTRVIiOm49KDAsaS5kZWZhdWx0KSh0aGlzLnVzZXJQb2xpY2llcyksbj10aGlzLl9nZXRQb2xpY2llc0pTT04oSlNPTi5wYXJzZShuKSksdGhpcy5zdG9yYWdlTWFuYWdlci5zZXQoInJldGhpbms6dXNlclBvbGljaWVzIiwwLG4pO2JyZWFrO2Nhc2UiU0VSVklDRV9QUk9WSURFUiI6dm9pZCAwIT09dCZ2b2lkIDAhPT1yJiYodGhpcy5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbcl09dCksbj0oMCxpLmRlZmF1bHQpKHRoaXMuc2VydmljZVByb3ZpZGVyUG9saWN5KSxuPXRoaXMuX2dldFBvbGljaWVzSlNPTihKU09OLnBhcnNlKG4pKSx0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazpzcFBvbGljaWVzIiwwLG4pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gcG9saWN5IHNvdXJjZTogIitlKX19fSx7a2V5OiJnZXRHcm91cHNOYW1lcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3Vwcyx0PVtdO2lmKHZvaWQgMCE9PWUpZm9yKHZhciByIGluIGUpdC5wdXNoKHIpO3JldHVybiB0fX0se2tleToiZ2V0R3JvdXAiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9W107aWYoInByZWF1dGhvcmlzZWQiPT09ZSl7dmFyIG49dC5zcGxpdCgiLyIpO24ucG9wKCksbj1uWzBdKyIvLyIrblsyXSxyPXRoaXMucnVudGltZVJlZ2lzdHJ5LmdldFByZUF1dGhTdWJzY3JpYmVycyhuKX1lbHNlIHZvaWQgMCE9PXRoaXMuZ3JvdXBzW2VdJiYocj10aGlzLmdyb3Vwc1tlXSk7cmV0dXJuIHJ9fSx7a2V5OiJjcmVhdGVHcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cHNbZV09W10sdGhpcy5zYXZlR3JvdXBzKCl9fSx7a2V5OiJkZWxldGVHcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuZ3JvdXBzW2VdLHRoaXMuc2F2ZUdyb3VwcygpfX0se2tleToiYWRkVG9Hcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyb3VwcztpZih2b2lkIDA9PT1yW2VdKXRocm93IEVycm9yKCdHcm91cCAiJytlKyciIGRvZXMgbm90IGV4aXN0IScpOy0xPT09cltlXS5pbmRleE9mKHQpJiYocltlXS5wdXNoKHQpLHRoaXMuc2F2ZUdyb3VwcygpKX19LHtrZXk6InJlbW92ZUZyb21Hcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyb3Vwc1tlXTtyLnNwbGljZShyLmluZGV4T2YodCksMSksdGhpcy5zYXZlR3JvdXBzKCl9fSx7a2V5OiJwZXBVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wZXBVUkx9fSx7a2V5OiJndWlVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ndWlVUkx9fSx7a2V5OiJydW50aW1lVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZVVSTH19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUJ1cz1lfX0se2tleToic3Vic2NyaXB0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3Vic2NyaXB0aW9uPWUubWVzc2FnZS5ib2R5LnN1YnNjcmliZXJ9fV0pLFJ1bnRpbWVDb3JlQ3R4fShNLmRlZmF1bHQpO3QuZGVmYXVsdD14LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxNSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlVGhpbmtDdHgoKXsoMCxpLmRlZmF1bHQpKHRoaXMsUmVUaGlua0N0eCksdGhpcy5kZWZhdWx0QmVoYXZpb3VyPSEwLHRoaXMuZ3JvdXBzPXt9fXJldHVybigwLGEuZGVmYXVsdCkoUmVUaGlua0N0eCxbe2tleToic2NoZW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZW1lfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlLmZyb207KDAscy5pc0RhdGFPYmplY3RVUkwpKHQpP3RoaXMuX3NjaGVtZT0oMCxzLmRpdmlkZVVSTCkodCkudHlwZTp0aGlzLl9zY2hlbWU9dm9pZCAwfX0se2tleToiZGF0ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGV9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRGF0ZSxyPVN0cmluZyh0LmdldERhdGUoKSk7MT09PXIubGVuZ3RoJiYocj0iMCIrcik7dmFyIG49U3RyaW5nKHQuZ2V0TW9udGgoKSsxKTsxPT09bi5sZW5ndGgmJihuPSIwIituKSx0aGlzLl9kYXRlPXIrIi8iK24rIi8iK3QuZ2V0RnVsbFllYXIoKX19LHtrZXk6ImRvbWFpbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbWFpbn0sc2V0OmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUubWVzc2FnZS5ib2R5LmlkZW50aXR5JiYodGhpcy5fZG9tYWluPSgwLHMuZGl2aWRlRW1haWwpKGUubWVzc2FnZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJuYW1lKS5kb21haW4pfX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1lLm1lc3NhZ2U7dm9pZCAwIT09dC5ib2R5LnZhbHVlJiYodGhpcy5fdHlwZT10LmJvZHkudmFsdWUucmVzb3VyY2VUeXBlKX19LHtrZXk6InNvdXJjZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX0sc2V0OmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUubWVzc2FnZS5ib2R5LmlkZW50aXR5JiYodGhpcy5fc291cmNlPWUubWVzc2FnZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJuYW1lKX19LHtrZXk6InRpbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZT1uZXcgRGF0ZTt2YXIgdD1TdHJpbmcoZS5nZXRNaW51dGVzKCkpOzE9PT10Lmxlbmd0aCYmKHQ9IjAiK3QpLHRoaXMuX3RpbWU9cGFyc2VJbnQoU3RyaW5nKGUuZ2V0SG91cnMoKSkrdCl9fSx7a2V5OiJ3ZWVrZGF5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2Vla2RheX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3dlZWtkYXk9U3RyaW5nKChuZXcgRGF0ZSkuZ2V0RGF5KCkpfX1dKSxSZVRoaW5rQ3R4fSgpO3QuZGVmYXVsdD11LGUuZXhwb3J0cz10LmRlZmF1bHR9XSl9KTs=",
      "sourceCodeClassname": "Runtime",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": "3bc366f2d0ba3d681e7a3899917c5d3de",
    "type": "Runtimes",
    "version": "35.00",
    "description": "Description of Runtime",
    "objectName": "Runtime",
    "configuration": {},
    "runtimeType": "browser",
    "hypertyCapabilities": {
      "mic": true,
      "camera": true,
      "sensor": false,
      "webrtc": true,
      "ortc": true
    },
    "protocolCapabilities": {
      "http": true,
      "https": true,
      "ws": true,
      "wss": true,
      "coap": false,
      "datachannel": false
    },
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "p2pHandlerStub": "hyperty-catalogue://catalogue.localhost/.well-known/protocolstub/P2PHandlerProtoStub",
    "p2pRequesterStub": "hyperty-catalogue://catalogue.localhost/.well-known/protocolstub/P2PRequesterProtoStub",
    "constraints": {
      "browser": true,
      "mic": true,
      "camera": true,
      "sensor": false,
      "webrtc": true,
      "ortc": true,
      "http": true,
      "https": true,
      "ws": true,
      "wss": true,
      "coap": false,
      "datachannel": false
    }
  }
}