{
  "Runtime": {
    "sourcePackage": {
      "sourceCode": "Ly8gdmVyc2lvbjogMC4xMi4wCi8vIGRhdGU6IEZyaSBKdWwgMjcgMjAxOCAxNDo0MDoxNSBHTVQrMDEwMCAoV2VzdGVybiBFdXJvcGVhbiBTdW1tZXIgVGltZSkKLy8gbGljZW5jZTogCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKCiFmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKCJSdW50aW1lIixbXSx0KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5SdW50aW1lPXQoKTplLlJ1bnRpbWU9dCgpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7LyoqKioqKi8KcmV0dXJuIGZ1bmN0aW9uKGUpey8qKioqKiovCi8qKioqKiovCi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovCmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18ocil7LyoqKioqKi8KLyoqKioqKi8KLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovCmlmKHRbcl0pLyoqKioqKi8KcmV0dXJuIHRbcl0uZXhwb3J0czsvKioqKioqLwovLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLwp2YXIgbj10W3JdPXsvKioqKioqLwppOnIsLyoqKioqKi8KbDohMSwvKioqKioqLwpleHBvcnRzOnt9fTsvKioqKioqLwovKioqKioqLwovLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLwpyZXR1cm4gZVtyXS5jYWxsKG4uZXhwb3J0cyxuLG4uZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxuLmw9ITAsbi5leHBvcnRzfS8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8KLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLwp2YXIgdD17fTsvKioqKioqLwovKioqKioqLwovLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwovKioqKioqLwpyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPWUsX193ZWJwYWNrX3JlcXVpcmVfXy5jPXQsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGUsdCxyKXsvKioqKioqLwpfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZSx0KXx8LyoqKioqKi8KT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7LyoqKioqKi8KY29uZmlndXJhYmxlOiExLC8qKioqKiovCmVudW1lcmFibGU6ITAsLyoqKioqKi8KZ2V0OnJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKGUpey8qKioqKiovCnZhciB0PWUmJmUuX19lc01vZHVsZT8vKioqKioqLwpmdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9Oi8qKioqKiovCmZ1bmN0aW9uKCl7cmV0dXJuIGV9Oy8qKioqKiovCi8qKioqKiovCnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQodCwiYSIsdCksdH0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9IiIsX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnM9MjEyKX0oWy8qIDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCksbz1yKDI3KSxpPXIoMTgpLHM9cigxOSksYT1yKDI4KSx1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyxmLGwsZCxwPWUmdS5GLHk9ZSZ1LkcsaD1lJnUuUyx2PWUmdS5QLGc9ZSZ1LkIsYj15P246aD9uW3RdfHwoblt0XT17fSk6KG5bdF18fHt9KS5wcm90b3R5cGUsXz15P286b1t0XXx8KG9bdF09e30pLG09Xy5wcm90b3R5cGV8fChfLnByb3RvdHlwZT17fSk7eSYmKHI9dCk7Zm9yKGMgaW4gcikKLy8gY29udGFpbnMgaW4gbmF0aXZlCmY9IXAmJmImJnZvaWQgMCE9PWJbY10sCi8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkCmw9KGY/YjpyKVtjXSwKLy8gYmluZCB0aW1lcnMgdG8gZ2xvYmFsIGZvciBjYWxsIGZyb20gZXhwb3J0IGNvbnRleHQKZD1nJiZmP2EobCxuKTp2JiYiZnVuY3Rpb24iPT10eXBlb2YgbD9hKEZ1bmN0aW9uLmNhbGwsbCk6bCwKLy8gZXh0ZW5kIGdsb2JhbApiJiZzKGIsYyxsLGUmdS5VKSwKLy8gZXhwb3J0Cl9bY10hPWwmJmkoXyxjLGQpLHYmJm1bY10hPWwmJihtW2NdPWwpfTtuLmNvcmU9bywKLy8gdHlwZSBiaXRtYXAKdS5GPTEsLy8gZm9yY2VkCnUuRz0yLC8vIGdsb2JhbAp1LlM9NCwvLyBzdGF0aWMKdS5QPTgsLy8gcHJvdG8KdS5CPTE2LC8vIGJpbmQKdS5XPTMyLC8vIHdyYXAKdS5VPTY0LC8vIHNhZmUKdS5SPTEyOCwvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgCmUuZXhwb3J0cz11fSwvKiAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwLHQuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0sLyogMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQ0MCksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLG8uZGVmYXVsdCkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdCYmZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZkZWZpbmVQcm9wZXJ0aWVzKGUsciksZX19KCl9LC8qIDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LC8qIDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKdmFyIHI9ZS5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPXIpfSwvKiA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaChlKXtyZXR1cm4hMH19fSwvKiA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LC8qIDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG87LyoKKiBsb2dsZXZlbCAtIGh0dHBzOi8vZ2l0aHViLmNvbS9waW10ZXJyeS9sb2dsZXZlbAoqCiogQ29weXJpZ2h0IChjKSAyMDEzIFRpbSBQZXJyeQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KKi8KIWZ1bmN0aW9uKGkscyl7InVzZSBzdHJpY3QiO249cyx2b2lkIDAhPT0obz0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uLmNhbGwodCxyLHQsZSk6bikmJihlLmV4cG9ydHM9byl9KDAsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8vIENyb3NzLWJyb3dzZXIgYmluZCBlcXVpdmFsZW50IHRoYXQgd29ya3MgYXQgbGVhc3QgYmFjayB0byBJRTYKZnVuY3Rpb24gYmluZE1ldGhvZChlLHQpe3ZhciByPWVbdF07aWYoImZ1bmN0aW9uIj09dHlwZW9mIHIuYmluZClyZXR1cm4gci5iaW5kKGUpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChyLGUpfWNhdGNoKHQpewovLyBNaXNzaW5nIGJpbmQgc2hpbSBvciBJRTggKyBNb2Rlcm5penIsIGZhbGxiYWNrIHRvIHdyYXBwaW5nCnJldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkocixbZSxhcmd1bWVudHNdKX19fQovLyBCdWlsZCB0aGUgYmVzdCBsb2dnaW5nIG1ldGhvZCBwb3NzaWJsZSBmb3IgdGhpcyBlbnYKLy8gV2hlcmV2ZXIgcG9zc2libGUgd2Ugd2FudCB0byBiaW5kLCBub3Qgd3JhcCwgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2VzCmZ1bmN0aW9uIHJlYWxNZXRob2Qocil7cmV0dXJuImRlYnVnIj09PXImJihyPSJsb2ciKSx0eXBlb2YgY29uc29sZSE9PXQmJih2b2lkIDAhPT1jb25zb2xlW3JdP2JpbmRNZXRob2QoY29uc29sZSxyKTp2b2lkIDAhPT1jb25zb2xlLmxvZz9iaW5kTWV0aG9kKGNvbnNvbGUsImxvZyIpOmUpfQovLyBUaGVzZSBwcml2YXRlIGZ1bmN0aW9ucyBhbHdheXMgbmVlZCBgdGhpc2AgdG8gYmUgc2V0IHByb3Blcmx5CmZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyh0LG4pey8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCmZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO3RoaXNbaV09bzx0P2U6dGhpcy5tZXRob2RGYWN0b3J5KGksdCxuKX0KLy8gRGVmaW5lIGxvZy5sb2cgYXMgYW4gYWxpYXMgZm9yIGxvZy5kZWJ1Zwp0aGlzLmxvZz10aGlzLmRlYnVnfQovLyBJbiBvbGQgSUUgdmVyc2lvbnMsIHRoZSBjb25zb2xlIGlzbid0IHByZXNlbnQgdW50aWwgeW91IGZpcnN0IG9wZW4gaXQuCi8vIFdlIGJ1aWxkIHJlYWxNZXRob2QoKSByZXBsYWNlbWVudHMgaGVyZSB0aGF0IHJlZ2VuZXJhdGUgbG9nZ2luZyBtZXRob2RzCmZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMoZSxyLG4pe3JldHVybiBmdW5jdGlvbigpe3R5cGVvZiBjb25zb2xlIT09dCYmKHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMscixuKSx0aGlzW2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fQovLyBCeSBkZWZhdWx0LCB3ZSB1c2UgY2xvc2VseSBib3VuZCByZWFsIG1ldGhvZHMgd2hlcmV2ZXIgcG9zc2libGUsIGFuZAovLyBvdGhlcndpc2Ugd2Ugd2FpdCBmb3IgYSBjb25zb2xlIHRvIGFwcGVhciwgYW5kIHRoZW4gdHJ5IGFnYWluLgpmdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeShlLHQscil7Lypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KcmV0dXJuIHJlYWxNZXRob2QoZSl8fGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIExvZ2dlcihlLG4sbyl7ZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZShlKXt2YXIgbj0ocltlXXx8InNpbGVudCIpLnRvVXBwZXJDYXNlKCk7aWYodHlwZW9mIHdpbmRvdyE9PXQpewovLyBVc2UgbG9jYWxTdG9yYWdlIGlmIGF2YWlsYWJsZQp0cnl7cmV0dXJuIHZvaWQod2luZG93LmxvY2FsU3RvcmFnZVthXT1uKX1jYXRjaChlKXt9Ci8vIFVzZSBzZXNzaW9uIGNvb2tpZSBhcyBmYWxsYmFjawp0cnl7d2luZG93LmRvY3VtZW50LmNvb2tpZT1lbmNvZGVVUklDb21wb25lbnQoYSkrIj0iK24rIjsifWNhdGNoKGUpe319fWZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCl7dmFyIGU7aWYodHlwZW9mIHdpbmRvdyE9PXQpe3RyeXtlPXdpbmRvdy5sb2NhbFN0b3JhZ2VbYV19Y2F0Y2goZSl7fQovLyBGYWxsYmFjayB0byBjb29raWVzIGlmIGxvY2FsIHN0b3JhZ2UgZ2l2ZXMgdXMgbm90aGluZwppZih0eXBlb2YgZT09PXQpdHJ5e3ZhciByPXdpbmRvdy5kb2N1bWVudC5jb29raWUsbj1yLmluZGV4T2YoZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9Iik7LTEhPT1uJiYoZT0vXihbXjtdKykvLmV4ZWMoci5zbGljZShuKSlbMV0pfWNhdGNoKGUpe30KLy8gSWYgdGhlIHN0b3JlZCBsZXZlbCBpcyBub3QgdmFsaWQsIHRyZWF0IGl0IGFzIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC4KcmV0dXJuIHZvaWQgMD09PXMubGV2ZWxzW2VdJiYoZT12b2lkIDApLGV9fXZhciBpLHM9dGhpcyxhPSJsb2dsZXZlbCI7ZSYmKGErPSI6IitlKSwvKgogICAgICAgKgogICAgICAgKiBQdWJsaWMgbG9nZ2VyIEFQSSAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwgZm9yIGRldGFpbHMKICAgICAgICoKICAgICAgICovCnMubmFtZT1lLHMubGV2ZWxzPXtUUkFDRTowLERFQlVHOjEsSU5GTzoyLFdBUk46MyxFUlJPUjo0LFNJTEVOVDo1fSxzLm1ldGhvZEZhY3Rvcnk9b3x8ZGVmYXVsdE1ldGhvZEZhY3Rvcnkscy5nZXRMZXZlbD1mdW5jdGlvbigpe3JldHVybiBpfSxzLnNldExldmVsPWZ1bmN0aW9uKHIsbil7aWYoInN0cmluZyI9PXR5cGVvZiByJiZ2b2lkIDAhPT1zLmxldmVsc1tyLnRvVXBwZXJDYXNlKCldJiYocj1zLmxldmVsc1tyLnRvVXBwZXJDYXNlKCldKSwhKCJudW1iZXIiPT10eXBlb2YgciYmcj49MCYmcjw9cy5sZXZlbHMuU0lMRU5UKSl0aHJvdyJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiAiK3I7aWYoaT1yLCExIT09biYmLy8gZGVmYXVsdHMgdG8gdHJ1ZQpwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKHIpLHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHMscixlKSx0eXBlb2YgY29uc29sZT09PXQmJnI8cy5sZXZlbHMuU0lMRU5UKXJldHVybiJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZyJ9LHMuc2V0RGVmYXVsdExldmVsPWZ1bmN0aW9uKGUpe2dldFBlcnNpc3RlZExldmVsKCl8fHMuc2V0TGV2ZWwoZSwhMSl9LHMuZW5hYmxlQWxsPWZ1bmN0aW9uKGUpe3Muc2V0TGV2ZWwocy5sZXZlbHMuVFJBQ0UsZSl9LHMuZGlzYWJsZUFsbD1mdW5jdGlvbihlKXtzLnNldExldmVsKHMubGV2ZWxzLlNJTEVOVCxlKX07Ci8vIEluaXRpYWxpemUgd2l0aCB0aGUgcmlnaHQgbGV2ZWwKdmFyIHU9Z2V0UGVyc2lzdGVkTGV2ZWwoKTtudWxsPT11JiYodT1udWxsPT1uPyJXQVJOIjpuKSxzLnNldExldmVsKHUsITEpfQovLyBTbGlnaHRseSBkdWJpb3VzIHRyaWNrcyB0byBjdXQgZG93biBtaW5pbWl6ZWQgZmlsZSBzaXplCnZhciBlPWZ1bmN0aW9uKCl7fSx0PSJ1bmRlZmluZWQiLHI9WyJ0cmFjZSIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciJdLG49bmV3IExvZ2dlcixvPXt9O24uZ2V0TG9nZ2VyPWZ1bmN0aW9uKGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8IiI9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci4iKTt2YXIgdD1vW2VdO3JldHVybiB0fHwodD1vW2VdPW5ldyBMb2dnZXIoZSxuLmdldExldmVsKCksbi5tZXRob2RGYWN0b3J5KSksdH07Ci8vIEdyYWIgdGhlIGN1cnJlbnQgZ2xvYmFsIGxvZyB2YXJpYWJsZSBpbiBjYXNlIG9mIG92ZXJ3cml0ZQp2YXIgaT10eXBlb2Ygd2luZG93IT09dD93aW5kb3cubG9nOnZvaWQgMDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3chPT10JiZ3aW5kb3cubG9nPT09biYmKHdpbmRvdy5sb2c9aSksbn0sbi5nZXRMb2dnZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIG99LG59KX0sLyogOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDIwKSxfX2VzTW9kdWxlOiEwfX0sLyogOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3OSkoIndrcyIpLG89cig0OCksaT1yKDQpLlN5bWJvbCxzPSJmdW5jdGlvbiI9PXR5cGVvZiBpOyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPXMmJmlbZV18fChzP2k6bykoIlN5bWJvbC4iK2UpKX0pLnN0b3JlPW59LC8qIDEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eQplLmV4cG9ydHM9IXIoNSkoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwvKiAxMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzKSxvPXIoMTQ4KSxpPXIoMzIpLHM9T2JqZWN0LmRlZmluZVByb3BlcnR5O3QuZj1yKDEwKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdD1pKHQsITApLG4ociksbyl0cnl7cmV0dXJuIHMoZSx0LHIpfWNhdGNoKGUpe31pZigiZ2V0ImluIHJ8fCJzZXQiaW4gcil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sLyogMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIG49cigzNCksbz1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LC8qIDEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPXt2ZXJzaW9uOiIyLjUuNyJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPXIpfSwvKiAxNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fS8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwovKioKICogQHR5cGVkZWYgZGl2aWRlVVJMCiAqIEB0eXBlIE9iamVjdAogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTAogKi8KLyoqCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcwogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAqLwpmdW5jdGlvbiBkaXZpZGVVUkwoZSl7ZnVuY3Rpb24gcmVjdXJzZShlKXt2YXIgdD0vKFthLXpBLVotXSopKDpcL1wvKD86XC4pP3w6KShbLWEtekEtWjAtOUA6JS5fK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fK34jPVwvXSopL2dpO3JldHVybiBlLnJlcGxhY2UodCwiJDEsJDMsJDQiKS5zcGxpdCgiLCIpfXZhciB0PXJlY3Vyc2UoZSk7Ci8vIElmIHRoZSB1cmwgaGFzIG5vIHNjaGVtZQppZih0WzBdPT09ZSYmIXRbMF0uaW5jbHVkZXMoIkAiKSl7cmV0dXJue3R5cGU6IiIsZG9tYWluOmUsaWRlbnRpdHk6IiJ9fQovLyBjaGVjayBpZiB0aGUgdXJsIGhhcyB0aGUgc2NoZW1lIGFuZCBpbmNsdWRlcyBhbiBACmlmKHRbMF09PT1lJiZ0WzBdLmluY2x1ZGVzKCJAIikpe3Q9cmVjdXJzZSgodFswXT09PWU/InNtdHAiOnRbMF0pKyI6Ly8iK3RbMF0pfQovLyBpZiB0aGUgZG9tYWluIGluY2x1ZGVzIGFuIEAsIGRpdmlkZSBpdCB0byBkb21haW4gYW5kIGlkZW50aXR5IHJlc3BlY3RpdmVseQpyZXR1cm4gdFsxXS5pbmNsdWRlcygiQCIpJiYodFsyXT10WzBdKyI6Ly8iK3RbMV0sdFsxXT10WzFdLnN1YnN0cih0WzFdLmluZGV4T2YoIkAiKSsxKSkse3R5cGU6dFswXSxkb21haW46dFsxXSxpZGVudGl0eTp0WzJdfX0vKioKICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5CiAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IE9iamVjdCB0byBiZSBjaGVja2VkCiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7CiAqLwpmdW5jdGlvbiBlbXB0eU9iamVjdChlKXtyZXR1cm4hKCgwLHMuZGVmYXVsdCkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIHNlY29uZHNTaW5jZUVwb2NoKCl7cmV0dXJuIE1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpfS8qKgogKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YQogKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkCiAqIEByZXR1cm4ge09iamVjdH0KICovCmZ1bmN0aW9uIGRlZXBDbG9uZShlKXsKLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgppZihlKXJldHVybiBKU09OLnBhcnNlKCgwLG8uZGVmYXVsdCkoZSkpfWZ1bmN0aW9uIHJlbW92ZVBhdGhGcm9tVVJMKGUpe3ZhciB0PWUuc3BsaXQoIi8iKTtyZXR1cm4gdFswXSsiLy8iK3RbMl0rIi8iK3RbM119LyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbAogKiBAcGFyYW0gIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKi8KZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX0vKioKICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqIEByZXR1cm4ge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqLwpmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKGUpe3ZhciB0PWRpdmlkZVVSTChlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufS8qKgogKiBDaGVjayBpZiB0aGUgdXNlciBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIFVSTCBmb3JtYXQsIGlmIG5vdCwgY29udmVydCB0byBVUkwgZm9ybWF0CiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXIKICogQHJldHVybiB7c3RyaW5nfSAgIHVzZXJVUkwgICAgdGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9Vc2VyVVJMKGUpewovLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0CmlmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PWRpdmlkZVVSTChlKTsKLy9jaGVjayBpZiB0aGUgdXJsIGlzIHdlbGwgZm9ybWF0ZWQKaWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIGdldFVzZXJVUkxGcm9tRW1haWwoZSl9ZnVuY3Rpb24gaXNEYXRhT2JqZWN0VVJMKGUpe3ZhciB0PVsiZG9tYWluLWlkcCIsInJ1bnRpbWUiLCJkb21haW4iLCJoeXBlcnR5Il0scj1lLnNwbGl0KCI6Ly8iKSxuPXJbMF07cmV0dXJuLTE9PT10LmluZGV4T2Yobil9ZnVuY3Rpb24gaXNMZWdhY3koZSl7cmV0dXJuIGUuc3BsaXQoIkAiKS5sZW5ndGg+MX1mdW5jdGlvbiBpc1VSTChlKXtyZXR1cm4gZS5zcGxpdCgiLyIpLmxlbmd0aD49M31mdW5jdGlvbiBpc1VzZXJVUkwoZSl7cmV0dXJuInVzZXIiPT09ZGl2aWRlVVJMKGUpLnR5cGV9ZnVuY3Rpb24gaXNIeXBlcnR5VVJMKGUpe3JldHVybiJoeXBlcnR5Ij09PWRpdmlkZVVSTChlKS50eXBlfS8qKgogKiBnZXQgaW5mb3JtYXRpb24gcmVsYXRpdmUgZWFjaCBjb21wb25lbnQgY29uZmlndXJlZCBvbiBydW50aW1lIGNvbmZpZ3VyYXRpb247CiAqIEBwYXJhbSAge29iamVjdH0gY29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCBhbGwgY29uZmlndXJhdGlvbgogKiBAcGFyYW0gIHtzdHJpbmd9IGNvbXBvbmVudCAgICAgc3RyaW5nIHdpdGggdGhlIGNvbXBvbmVudCB0byBnZXQgdGhlIGNvbmZpZ3VyYXRpb24sIGxpa2UsIHJ1bnRpbWVVUkxTLCBjYXRhbG9ndWVVUkxzLCBtc2dOb2RlVVJMLCBkb21haW5SZWdpc3RyeVVSTDsKICogQHBhcmFtICB7c3RyaW5nfSByZXNvdXJjZSAgICAgIHR5cGUgb2YgcmVzb3VyY2UgdG8gZ2V0LCBsaWtlLCBjYXRhbG9ndWUsIHJ1bnRpbWVVQSwgcHJvdG9jb2xzdHViLCBpZHBQcm94eQogKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgICAgICAgICAgcmV0dXJuIGFuIG9iamVjdCB3aXRoIGFsbCBjb25maWd1cmF0aW9uczsKICovCmZ1bmN0aW9uIGdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMoZSx0LHIpe3JldHVybiBlW3RdW3JdfS8qKgogKiBCdWlsZCBhIGZ1bGwgdXJsIHdpdGggdGhlIHJ1bnRpbWUgY29uZmlndXJhdGlvbjsKICogQHBhcmFtICB7b2JqZWN0fSBjb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGFsbCBjb25maWd1cmF0aW9uCiAqIEBwYXJhbSAge3N0cmluZ30gY29tcG9uZW50ICAgICBzdHJpbmcgd2l0aCB0aGUgY29tcG9uZW50IHRvIGdldCB0aGUgY29uZmlndXJhdGlvbiwgbGlrZSwgcnVudGltZVVSTFMsIGNhdGFsb2d1ZVVSTHMsIG1zZ05vZGVVUkwsIGRvbWFpblJlZ2lzdHJ5VVJMOwogKiBAcGFyYW0gIHtzdHJpbmd9IHJlc291cmNlICAgICAgdHlwZSBvZiByZXNvdXJjZSB0byBnZXQsIGxpa2UsIGNhdGFsb2d1ZSwgcnVudGltZVVBLCBwcm90b2NvbHN0dWIsIGlkcFByb3h5CiAqIEBwYXJhbSAge3N0cmluZ30gdHlwZSAgICAgICAgICByZXNvdXJjZSB0byBnZXQsIGxpa2UgYSBoeXBlcnR5IG5hbWUgb3IgcHJvdG9jb2xzdHViIG5hbWU7CiAqIEBwYXJhbSAge2Jvb2xlYW59IHVzZUZhbGxiYWNrICBpZiB0cnVlIHRoZSBmdW5jdGlvbiB3aWxsIGNoZWNrIGlmIGhhdmUgYSBmYWxsYmFjayB1cmw7CiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgICBwYXJ0aWFsIHVybCB0byBjb250YWN0IHRoZSByZXNvdXJjZTsKICovCmZ1bmN0aW9uIGJ1aWxkVVJMKGUsdCxyLG4pe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF0scz1lW3RdLGE9dm9pZCAwO2lmKCFzLmhhc093blByb3BlcnR5KHIpKXRocm93IEVycm9yKCJUaGUgY29uZmlndXJhdGlvbiAiKygwLG8uZGVmYXVsdCkocywiIiwyKSsiIGRvbid0IGhhdmUgdGhlICIrcisiIHJlc291cmNlIHlvdSBhcmUgbG9va2luZyBmb3IiKTt2YXIgdT1zW3JdOwovLyBjb25zb2xlLmxvZyh1cmwpOwpyZXR1cm4gbj8oYT11LnByZWZpeCtlLmRvbWFpbit1LnN1ZmZpeCtuLHUuaGFzT3duUHJvcGVydHkoImZhbGxiYWNrIikmJmkmJihhPXUuZmFsbGJhY2suaW5kZXhPZigiJWRvbWFpbiUiKT91LmZhbGxiYWNrLnJlcGxhY2UoLyglZG9tYWluJSkvZyxlLmRvbWFpbikrbjp1LmZhbGxiYWNrK24pKTphPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4LGF9LyoqCiAqIEdlbmVyYXRlIGEgR2xvYmFsIFVuaXF1ZSBJRAogKgogKiBAcmV0dXJucyBTdHJpbmc7CiAqLwpmdW5jdGlvbiBnZW5lcmF0ZUdVSUQoKXtmdW5jdGlvbiBzNCgpe3JldHVybiBNYXRoLmZsb29yKDY1NTM2KigxK01hdGgucmFuZG9tKCkpKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfXJldHVybiBzNCgpK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrczQoKStzNCgpfWZ1bmN0aW9uIGdldFVzZXJJZGVudGl0eURvbWFpbihlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdCgiLiIpLG49ci5sZW5ndGg7cmV0dXJuIDE9PW4/cltuLTFdOnJbbi0yXSsiLiIrcltuLTFdfS8qKgogKiBDaGVjayBpZiBVUkwgaXMgZnJvbSBhIGJhY2tlbmQgc2VydmljZQogKiBAcGFyYW0gIHtzdHJpbmd9IHVybCAgICAgVVJMIHRvIGJlIHByb2Nlc3NlZAogKiBAcmV0dXJuIHtib29sZWFufQogKi8KZnVuY3Rpb24gaXNCYWNrZW5kU2VydmljZVVSTChlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdCgiLiIpLG49WyJkb21haW4iLCJnbG9iYWwiLCJkb21haW4taWRwIl0sbz1bInJlZ2lzdHJ5IiwibXNnLW5vZGUiXSxpPXZvaWQgMDtyZXR1cm4gci5sZW5ndGg+MSYmKGk9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1vLmluZGV4T2YoZSl9KVswXSksISghaXx8LTE9PT1vLmluZGV4T2YoaSkpfHwhIXQudHlwZSYmLTEhPT1uLmluZGV4T2YodC50eXBlKX1mdW5jdGlvbiBkaXZpZGVFbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm57dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX19ZnVuY3Rpb24gYXNzaWduKGUsdCxyKXtlfHwoZT17fSksInN0cmluZyI9PXR5cGVvZiB0JiYodD1wYXJzZUF0dHJpYnV0ZXModCkpO2Zvcih2YXIgbj10Lmxlbmd0aC0xLG89MDtvPG47KytvKXt2YXIgaT10W29dO2kgaW4gZXx8KGVbaV09e30pLGU9ZVtpXX1lW3Rbbl1dPXJ9ZnVuY3Rpb24gc3BsaXRPYmplY3RVUkwoZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpLHI9dFswXSsiLy8iK3RbMl0rIi8iK3RbM10sbj10WzVdLG89e3VybDpyLHJlc291cmNlOm59O3JldHVybiBvfWZ1bmN0aW9uIGNoZWNrQXR0cmlidXRlKGUpe3ZhciB0PS8oKChbYS16QS1aXSspOlwvXC8oWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KVwvW2EtekEtWjAtOS5dK0BbYS16QS1aMC05XSsoLSk/W2EtekEtWjAtOV0rKFwuKT9bYS16QS1aMC05XXsyLDEwfT9cLlthLXpBLVpdezIsMTB9KSguKyg/PS5pZGVudGl0eSkpPy9nbSxyPVtdLG49W107aWYobnVsbD09ZS5tYXRjaCh0KSluPWUuc3BsaXQoIi4iKTtlbHNle2Zvcih2YXIgbz12b2lkIDA7bnVsbCE9PShvPXQuZXhlYyhlKSk7KQovLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCBpbmZpbml0ZSBsb29wcyB3aXRoIHplcm8td2lkdGggbWF0Y2hlcwpvLmluZGV4PT09dC5sYXN0SW5kZXgmJnQubGFzdEluZGV4KyssCi8vIFRoZSByZXN1bHQgY2FuIGJlIGFjY2Vzc2VkIHRocm91Z2ggdGhlIGBtYC12YXJpYWJsZS4Kby5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7MD09PXQmJnIucHVzaChlKX0pO3ZhciBpPXZvaWQgMDtyLmZvckVhY2goZnVuY3Rpb24odCl7aT1lLnJlcGxhY2UodCwiKi0qIiksbj1pLnNwbGl0KCIuIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiIqLSoiPT09ZT90OmV9KX0pfXJldHVybiBufWZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlcyhlKXt2YXIgdD0vKFswLTlhLXpBLVpdWy1cd10qKTpcL1wvL2c7aWYoZS5pbmNsdWRlcygiOi8vIikpe3ZhciByPWUuc3BsaXQodClbMF0sbj1yLnNwbGl0KCIuIiksbz1lLnJlcGxhY2UociwiIik7aWYoZS5pbmNsdWRlcygiaWRlbnRpdHkiKSl7dmFyIGk9by5zcGxpdCgiaWRlbnRpdHkuIik7bz1pWzBdLnNsaWNlKCIuIiwtMSksaT1pWzFdLnNwbGl0KCIuIiksbi5wdXNoKG8sImlkZW50aXR5Iiksbj1uLmNvbmNhdChpKX1lbHNlIG4ucHVzaChvKTtyZXR1cm4gbi5maWx0ZXIoQm9vbGVhbil9cmV0dXJuIGUuc3BsaXQoIi4iKX1mdW5jdGlvbiBpc0VtcHR5KGUpe2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuITE7cmV0dXJuKDAsby5kZWZhdWx0KShlKT09PSgwLG8uZGVmYXVsdCkoe30pfWZ1bmN0aW9uIGNoYXRrZXlzVG9TdHJpbmdDbG9uZXIoZSl7dmFyIHQ9e30scj0oMCxzLmRlZmF1bHQpKGUpO2lmKHIpdHJ5e2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bisrKXt2YXIgbz1yW25dO3Rbb109e30sdFtvXS5zZXNzaW9uS2V5PWVbb10uc2Vzc2lvbktleS50b1N0cmluZygpLHRbb10uaXNUb0VuY3J5cHQ9ZVtvXS5pc1RvRW5jcnlwdH19Y2F0Y2goZSl7fXJldHVybiB0fWZ1bmN0aW9uIGNoYXRrZXlzVG9BcnJheUNsb25lcihlKXt2YXIgdD17fSxyPSgwLHMuZGVmYXVsdCkoZSk7aWYocil0cnl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDtuKyspe3ZhciBvPXJbbl07dFtvXT17fTt2YXIgaT1KU09OLnBhcnNlKCJbIitlW29dLnNlc3Npb25LZXkrIl0iKTt0W29dLnNlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoaSksdFtvXS5pc1RvRW5jcnlwdD1lW29dLmlzVG9FbmNyeXB0fX1jYXRjaChlKXt9cmV0dXJuIHR9ZnVuY3Rpb24gcGFyc2VNZXNzYWdlVVJMKGUpe3ZhciB0PWUuc3BsaXQoIi8iKTtyZXR1cm4gdC5sZW5ndGg8PTY/dFswXSsiLy8iK3RbMl0rIi8iK3RbM106dFswXSsiLy8iK3RbMl0rIi8iK3RbM10rIi8iK3RbNF19ZnVuY3Rpb24gYXZhaWxhYmxlU3BhY2UoZSx0KXt2YXIgcj0oZS90KS50b0ZpeGVkKDIpO3JldHVybntxdW90YTp0LHVzYWdlOmUscGVyY2VudDpOdW1iZXIocil9fS8qKgoqIEVuY29kZXMgYSBKUyBvYmplY3QgdG8gYmFzZSA2NCBlbmNvZGUKKiBAcGFyYW0gICB7T2JqZWN0fSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKKiBAcmV0dXJuICB7c3RyaW5nfSAgIGVuY29kZWQgdmFsdWUKKi8KZnVuY3Rpb24gZW5jb2RlKGUpe3RyeXt2YXIgdD1zdHJpbmdpZnkoZSk7cmV0dXJuIGJ0b2EodCl9Y2F0Y2goZSl7dGhyb3cgZX19LyoqCiAgKiBEZWNvZGUgYSBiYXNlNjQgc3RyaW5nIHRvIG9iamVjdAogICogQHBhcmFtICAge3N0cmluZ19iNjR9ICAgIHZhbHVlICAgIHZhbHVlIGVuY29kZWQgaW4gYmFzZSA2NAogICogQHJldHVybiAge09iamVjdH0gZGVjb2RlZFZhbHVlCiAgKi8KZnVuY3Rpb24gZGVjb2RlKGUpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhdG9iKGUpKX1jYXRjaChlKXt0aHJvdyBlfX0vKioKKiBEZWNvZGUgYSBiYXNlNjQgc3RyaW5nIHRvIFVpbnQ4QXJyYXkKKiBAcGFyYW0gICB7c3RyaW5nX2I2NH0gICAgdmFsdWUgICAgYnl0ZUFycmF5IHZhbHVlCiogQHJldHVybiAge1VpbnQ4QXJyYXl9ICAgZW5jb2RlZCB2YWx1ZQoqLwpmdW5jdGlvbiBkZWNvZGVUb1VpbnQ4QXJyYXkoZSl7dHJ5e3JldHVybiBuZXcgVWludDhBcnJheShkZWNvZGUoZSkpfWNhdGNoKGUpe3Rocm93IGV9fS8qKgoqIENvbnZlcnRzIGEgSlMgb2JqZWN0IHRvIHN0cmluZwoqIE5PVEU6IFNwZWNpYWwgY29udmVyc2lvbiBmb3IgVWludDhBcnJheXMKKiBAcGFyYW0gICB7T2JqZWN0fSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKKiBAcmV0dXJuICB7VWludDhBcnJheX0gICBlbmNvZGVkIHZhbHVlCiovCmZ1bmN0aW9uIHN0cmluZ2lmeShlKXt0cnl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1VaW50OEFycmF5PyJbIitlLnRvU3RyaW5nKCkrIl0iOigwLG8uZGVmYXVsdCkoZSl9Y2F0Y2goZSl7dGhyb3cgZX19LyoqCiogQ29udmVydHMgYSBzdHJpbmdpZmllZCBvYmplY3QgdG8gb2JqZWN0CiogQHBhcmFtICAge1N0cmluZ30gICAgdmFsdWUgICAgYnl0ZUFycmF5IHZhbHVlCiogQHJldHVybiAge09iamVjdH0gICBlbmNvZGVkIHZhbHVlCiovCmZ1bmN0aW9uIHBhcnNlKGUpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaChlKXt0aHJvdyBlfX0vKioKKiBDb252ZXJ0cyBhIHN0cmluZ2lmaWVkIG9iamVjdCB0byBvYmplY3QKKiBAcGFyYW0gICB7U3RyaW5nfSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKKiBAcmV0dXJuICB7VWludDhBcnJheX0gICBlbmNvZGVkIHZhbHVlCiovCmZ1bmN0aW9uIHBhcnNlVG9VaW50OEFycmF5KGUpe3RyeXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkocGFyc2UoZSkpfWNhdGNoKGUpe3Rocm93IGV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDY5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSk7dC5kaXZpZGVVUkw9ZGl2aWRlVVJMLHQuZW1wdHlPYmplY3Q9ZW1wdHlPYmplY3QsdC5zZWNvbmRzU2luY2VFcG9jaD1zZWNvbmRzU2luY2VFcG9jaCx0LmRlZXBDbG9uZT1kZWVwQ2xvbmUsdC5yZW1vdmVQYXRoRnJvbVVSTD1yZW1vdmVQYXRoRnJvbVVSTCx0LmdldFVzZXJVUkxGcm9tRW1haWw9Z2V0VXNlclVSTEZyb21FbWFpbCx0LmdldFVzZXJFbWFpbEZyb21VUkw9Z2V0VXNlckVtYWlsRnJvbVVSTCx0LmNvbnZlcnRUb1VzZXJVUkw9Y29udmVydFRvVXNlclVSTCx0LmlzRGF0YU9iamVjdFVSTD1pc0RhdGFPYmplY3RVUkwsdC5pc0xlZ2FjeT1pc0xlZ2FjeSx0LmlzVVJMPWlzVVJMLHQuaXNVc2VyVVJMPWlzVXNlclVSTCx0LmlzSHlwZXJ0eVVSTD1pc0h5cGVydHlVUkwsdC5nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzPWdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMsdC5idWlsZFVSTD1idWlsZFVSTCx0LmdlbmVyYXRlR1VJRD1nZW5lcmF0ZUdVSUQsdC5nZXRVc2VySWRlbnRpdHlEb21haW49Z2V0VXNlcklkZW50aXR5RG9tYWluLHQuaXNCYWNrZW5kU2VydmljZVVSTD1pc0JhY2tlbmRTZXJ2aWNlVVJMLHQuZGl2aWRlRW1haWw9ZGl2aWRlRW1haWwsdC5hc3NpZ249YXNzaWduLHQuc3BsaXRPYmplY3RVUkw9c3BsaXRPYmplY3RVUkwsdC5jaGVja0F0dHJpYnV0ZT1jaGVja0F0dHJpYnV0ZSx0LnBhcnNlQXR0cmlidXRlcz1wYXJzZUF0dHJpYnV0ZXMsdC5pc0VtcHR5PWlzRW1wdHksdC5jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyPWNoYXRrZXlzVG9TdHJpbmdDbG9uZXIsdC5jaGF0a2V5c1RvQXJyYXlDbG9uZXI9Y2hhdGtleXNUb0FycmF5Q2xvbmVyLHQucGFyc2VNZXNzYWdlVVJMPXBhcnNlTWVzc2FnZVVSTCx0LmF2YWlsYWJsZVNwYWNlPWF2YWlsYWJsZVNwYWNlLHQuZW5jb2RlPWVuY29kZSx0LmRlY29kZT1kZWNvZGUsdC5kZWNvZGVUb1VpbnQ4QXJyYXk9ZGVjb2RlVG9VaW50OEFycmF5LHQuc3RyaW5naWZ5PXN0cmluZ2lmeSx0LnBhcnNlPXBhcnNlLHQucGFyc2VUb1VpbnQ4QXJyYXk9cGFyc2VUb1VpbnQ4QXJyYXl9LC8qIDE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KQp2YXIgbj1yKDMzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LC8qIDE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSwvKiAxNyAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAp2YXIgcj1lLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9cil9LC8qIDE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDExKSxvPXIoNDcpO2UuZXhwb3J0cz1yKDEwKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LC8qIDE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLG89cigxOCksaT1yKDIzKSxzPXIoNDgpKCJzcmMiKSxhPUZ1bmN0aW9uLnRvU3RyaW5nLHU9KCIiK2EpLnNwbGl0KCJ0b1N0cmluZyIpO3IoMjcpLmluc3BlY3RTb3VyY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGEuY2FsbChlKX0sKGUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcjtjJiYoaShyLCJuYW1lIil8fG8ociwibmFtZSIsdCkpLGVbdF0hPT1yJiYoYyYmKGkocixzKXx8byhyLHMsZVt0XT8iIitlW3RdOnUuam9pbihTdHJpbmcodCkpKSksZT09PW4/ZVt0XT1yOmE/ZVt0XT9lW3RdPXI6byhlLHQscik6KGRlbGV0ZSBlW3RdLG8oZSx0LHIpKSl9KShGdW5jdGlvbi5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzJiZ0aGlzW3NdfHxhLmNhbGwodGhpcyl9KX0sLyogMjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksbz1yKDUpLGk9cigzMykscz0vIi9nLGE9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89U3RyaW5nKGkoZSkpLGE9IjwiK3Q7cmV0dXJuIiIhPT1yJiYoYSs9IiAiK3IrJz0iJytTdHJpbmcobikucmVwbGFjZShzLCImcXVvdDsiKSsnIicpLGErIj4iK28rIjwvIit0KyI+In07ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e307cltlXT10KGEpLG4obi5QK24uRipvKGZ1bmN0aW9uKCl7dmFyIHQ9IiJbZV0oJyInKTtyZXR1cm4gdCE9PXQudG9Mb3dlckNhc2UoKXx8dC5zcGxpdCgnIicpLmxlbmd0aD4zfSksIlN0cmluZyIscil9fSwvKiAyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNyksbz1yKDEzKSxpPXIoNjUpLHM9cig1OCksYT1yKDU3KSx1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyxmLGwsZD1lJnUuRixwPWUmdS5HLHk9ZSZ1LlMsaD1lJnUuUCx2PWUmdS5CLGc9ZSZ1LlcsYj1wP286b1t0XXx8KG9bdF09e30pLF89Yi5wcm90b3R5cGUsbT1wP246eT9uW3RdOihuW3RdfHx7fSkucHJvdG90eXBlO3AmJihyPXQpO2ZvcihjIGluIHIpCi8vIGNvbnRhaW5zIGluIG5hdGl2ZQooZj0hZCYmbSYmdm9pZCAwIT09bVtjXSkmJmEoYixjKXx8KAovLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZApsPWY/bVtjXTpyW2NdLAovLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMKYltjXT1wJiYiZnVuY3Rpb24iIT10eXBlb2YgbVtjXT9yW2NdOnYmJmY/aShsLG4pOmcmJm1bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxyLG4pe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHQpO2Nhc2UgMjpyZXR1cm4gbmV3IGUodCxyKX1yZXR1cm4gbmV3IGUodCxyLG4pfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHQucHJvdG90eXBlPWUucHJvdG90eXBlLHR9KGwpOmgmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP2koRnVuY3Rpb24uY2FsbCxsKTpsLAovLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKaCYmKChiLnZpcnR1YWx8fChiLnZpcnR1YWw9e30pKVtjXT1sLAovLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQplJnUuUiYmXyYmIV9bY10mJnMoXyxjLGwpKSl9OwovLyB0eXBlIGJpdG1hcAp1LkY9MSwvLyBmb3JjZWQKdS5HPTIsLy8gZ2xvYmFsCnUuUz00LC8vIHN0YXRpYwp1LlA9OCwvLyBwcm90bwp1LkI9MTYsLy8gYmluZAp1Llc9MzIsLy8gd3JhcAp1LlU9NjQsLy8gc2FmZQp1LlI9MTI4LC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAKZS5leHBvcnRzPXV9LC8qIDIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzMikoIndrcyIpLG89cig5NCksaT1yKDE3KS5TeW1ib2wscz0iZnVuY3Rpb24iPT10eXBlb2YgaTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1zJiZpW2VdfHwocz9pOm8pKCJTeW1ib2wuIitlKSl9KS5zdG9yZT1ufSwvKiAyMyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiByLmNhbGwoZSx0KX19LC8qIDI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzCnZhciBuPXIoNzApLG89cigzMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0sLyogMjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNzEpLG89cig0NyksaT1yKDI0KSxzPXIoMzIpLGE9cigyMyksdT1yKDE0OCksYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3QuZj1yKDEwKT9jOmZ1bmN0aW9uKGUsdCl7aWYoZT1pKGUpLHQ9cyh0LCEwKSx1KXRyeXtyZXR1cm4gYyhlLHQpfWNhdGNoKGUpe31pZihhKGUsdCkpcmV0dXJuIG8oIW4uZi5jYWxsKGUsdCksZVt0XSl9fSwvKiAyNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBuPXIoMjMpLG89cigxNSksaT1yKDEwNCkoIklFX1BST1RPIikscz1PYmplY3QucHJvdG90eXBlO2UuZXhwb3J0cz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUpe3JldHVybiBlPW8oZSksbihlLGkpP2VbaV06ImZ1bmN0aW9uIj09dHlwZW9mIGUuY29uc3RydWN0b3ImJmUgaW5zdGFuY2VvZiBlLmNvbnN0cnVjdG9yP2UuY29uc3RydWN0b3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/czpudWxsfX0sLyogMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmV4cG9ydHM9e3ZlcnNpb246IjIuNS43In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9cil9LC8qIDI4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBuPXIoMTYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sLyogMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj17fS50b1N0cmluZztlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuY2FsbChlKS5zbGljZSg4LC0xKX19LC8qIDMwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJm4oZnVuY3Rpb24oKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY2FsbAp0P2UuY2FsbChudWxsLGZ1bmN0aW9uKCl7fSwxKTplLmNhbGwobnVsbCl9KX19LC8qIDMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0MTYpLF9fZXNNb2R1bGU6ITB9fSwvKiAzMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKQp2YXIgbj1yKDYpOwovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQovLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZwplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKSlyZXR1cm4gZTt2YXIgcixvO2lmKHQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS52YWx1ZU9mKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO2lmKCF0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9fSwvKiAzMyAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQplLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSwvKiAzNCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjEuNCBUb0ludGVnZXIKdmFyIHI9TWF0aC5jZWlsLG49TWF0aC5mbG9vcjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9uOnIpKGUpfX0sLyogMzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMKdmFyIG49cigwKSxvPXIoMjcpLGk9cig1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0sLyogMzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAwIC0+IEFycmF5I2ZvckVhY2gKLy8gMSAtPiBBcnJheSNtYXAKLy8gMiAtPiBBcnJheSNmaWx0ZXIKLy8gMyAtPiBBcnJheSNzb21lCi8vIDQgLT4gQXJyYXkjZXZlcnkKLy8gNSAtPiBBcnJheSNmaW5kCi8vIDYgLT4gQXJyYXkjZmluZEluZGV4CnZhciBuPXIoMjgpLG89cig3MCksaT1yKDE1KSxzPXIoMTIpLGE9cigxMjEpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPTE9PWUsdT0yPT1lLGM9Mz09ZSxmPTQ9PWUsbD02PT1lLGQ9NT09ZXx8bCxwPXR8fGE7cmV0dXJuIGZ1bmN0aW9uKHQsYSx5KXtmb3IodmFyIGgsdixnPWkodCksYj1vKGcpLF89bihhLHksMyksbT1zKGIubGVuZ3RoKSxSPTAsdz1yP3AodCxtKTp1P3AodCwwKTp2b2lkIDA7bT5SO1IrKylpZigoZHx8UiBpbiBiKSYmKGg9YltSXSx2PV8oaCxSLGcpLGUpKWlmKHIpd1tSXT12O2Vsc2UgaWYodilzd2l0Y2goZSl7Y2FzZSAzOnJldHVybiEwOy8vIHNvbWUKY2FzZSA1OnJldHVybiBoOy8vIGZpbmQKY2FzZSA2OnJldHVybiBSOy8vIGZpbmRJbmRleApjYXNlIDI6dy5wdXNoKGgpfWVsc2UgaWYoZilyZXR1cm4hMTtyZXR1cm4gbD8tMTpjfHxmP2Y6d319fSwvKiAzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2lmKHIoMTApKXt2YXIgbj1yKDQzKSxvPXIoNCksaT1yKDUpLHM9cigwKSxhPXIoOTApLHU9cigxMjcpLGM9cigyOCksZj1yKDU0KSxsPXIoNDcpLGQ9cigxOCkscD1yKDU2KSx5PXIoMzQpLGg9cigxMiksdj1yKDE3NCksZz1yKDUwKSxiPXIoMzIpLF89cigyMyksbT1yKDcyKSxSPXIoNiksdz1yKDE1KSxTPXIoMTE4KSxrPXIoNTEpLE89cigyNiksUD1yKDUyKS5mLE09cigxMjApLEw9cig0OCkseD1yKDkpLEE9cigzNiksRD1yKDgwKSxVPXIoODcpLGo9cigxMjMpLEU9cig2MiksST1yKDg0KSxDPXIoNTMpLFQ9cigxMjIpLHE9cigxNjQpLEg9cigxMSksRj1yKDI1KSxOPUguZixCPUYuZixHPW8uUmFuZ2VFcnJvcixLPW8uVHlwZUVycm9yLFY9by5VaW50OEFycmF5LFc9QXJyYXkucHJvdG90eXBlLFk9dS5BcnJheUJ1ZmZlcix6PXUuRGF0YVZpZXcsSj1BKDApLFo9QSgyKSxRPUEoMyksJD1BKDQpLFg9QSg1KSxlZT1BKDYpLHRlPUQoITApLHJlPUQoITEpLG5lPWoudmFsdWVzLG9lPWoua2V5cyxpZT1qLmVudHJpZXMsc2U9Vy5sYXN0SW5kZXhPZixhZT1XLnJlZHVjZSx1ZT1XLnJlZHVjZVJpZ2h0LGNlPVcuam9pbixmZT1XLnNvcnQsbGU9Vy5zbGljZSxkZT1XLnRvU3RyaW5nLHBlPVcudG9Mb2NhbGVTdHJpbmcseWU9eCgiaXRlcmF0b3IiKSxoZT14KCJ0b1N0cmluZ1RhZyIpLHZlPUwoInR5cGVkX2NvbnN0cnVjdG9yIiksZ2U9TCgiZGVmX2NvbnN0cnVjdG9yIiksYmU9YS5DT05TVFIsX2U9YS5UWVBFRCxtZT1hLlZJRVcsUmU9QSgxLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIFBlKFUoZSxlW2dlXSksdCl9KSx3ZT1pKGZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgpyZXR1cm4gMT09PW5ldyBWKG5ldyBVaW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF19KSxTZT0hIVYmJiEhVi5wcm90b3R5cGUuc2V0JiZpKGZ1bmN0aW9uKCl7bmV3IFYoMSkuc2V0KHt9KX0pLGtlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9eShlKTtpZihyPDB8fHIldCl0aHJvdyBHKCJXcm9uZyBvZmZzZXQhIik7cmV0dXJuIHJ9LE9lPWZ1bmN0aW9uKGUpe2lmKFIoZSkmJl9lIGluIGUpcmV0dXJuIGU7dGhyb3cgSyhlKyIgaXMgbm90IGEgdHlwZWQgYXJyYXkhIil9LFBlPWZ1bmN0aW9uKGUsdCl7aWYoIShSKGUpJiZ2ZSBpbiBlKSl0aHJvdyBLKCJJdCBpcyBub3QgYSB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvciEiKTtyZXR1cm4gbmV3IGUodCl9LE1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIExlKFUoZSxlW2dlXSksdCl9LExlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTAsbj10Lmxlbmd0aCxvPVBlKGUsbik7bj5yOylvW3JdPXRbcisrXTtyZXR1cm4gb30seGU9ZnVuY3Rpb24oZSx0LHIpe04oZSx0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZFtyXX19KX0sQWU9ZnVuY3Rpb24oZSl7dmFyIHQscixuLG8saSxzLGE9dyhlKSx1PWFyZ3VtZW50cy5sZW5ndGgsZj11PjE/YXJndW1lbnRzWzFdOnZvaWQgMCxsPXZvaWQgMCE9PWYsZD1NKGEpO2lmKHZvaWQgMCE9ZCYmIVMoZCkpe2ZvcihzPWQuY2FsbChhKSxuPVtdLHQ9MDshKGk9cy5uZXh0KCkpLmRvbmU7dCsrKW4ucHVzaChpLnZhbHVlKTthPW59Zm9yKGwmJnU+MiYmKGY9YyhmLGFyZ3VtZW50c1syXSwyKSksdD0wLHI9aChhLmxlbmd0aCksbz1QZSh0aGlzLHIpO3I+dDt0Kyspb1t0XT1sP2YoYVt0XSx0KTphW3RdO3JldHVybiBvfSxEZT1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aCxyPVBlKHRoaXMsdCk7dD5lOylyW2VdPWFyZ3VtZW50c1tlKytdO3JldHVybiByfSxVZT0hIVYmJmkoZnVuY3Rpb24oKXtwZS5jYWxsKG5ldyBWKDEpKX0pLGplPWZ1bmN0aW9uKCl7cmV0dXJuIHBlLmFwcGx5KFVlP2xlLmNhbGwoT2UodGhpcykpOk9lKHRoaXMpLGFyZ3VtZW50cyl9LEVlPXtjb3B5V2l0aGluOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHEuY2FsbChPZSh0aGlzKSxlLHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxldmVyeTpmdW5jdGlvbihlKXtyZXR1cm4gJChPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmlsbDpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBULmFwcGx5KE9lKHRoaXMpLGFyZ3VtZW50cyl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gTWUodGhpcyxaKE9lKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApKX0sZmluZDpmdW5jdGlvbihlKXtyZXR1cm4gWChPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmluZEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlZShPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZm9yRWFjaDpmdW5jdGlvbihlKXtKKE9lKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxpbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiByZShPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5jbHVkZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRlKE9lKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxqb2luOmZ1bmN0aW9uKGUpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKcmV0dXJuIGNlLmFwcGx5KE9lKHRoaXMpLGFyZ3VtZW50cyl9LGxhc3RJbmRleE9mOmZ1bmN0aW9uKGUpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKcmV0dXJuIHNlLmFwcGx5KE9lKHRoaXMpLGFyZ3VtZW50cyl9LG1hcDpmdW5jdGlvbihlKXtyZXR1cm4gUmUoT2UodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHJlZHVjZTpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBhZS5hcHBseShPZSh0aGlzKSxhcmd1bWVudHMpfSxyZWR1Y2VSaWdodDpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiB1ZS5hcHBseShPZSh0aGlzKSxhcmd1bWVudHMpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9dGhpcyxyPU9lKHQpLmxlbmd0aCxuPU1hdGguZmxvb3Ioci8yKSxvPTA7bzxuOyllPXRbb10sdFtvKytdPXRbLS1yXSx0W3JdPWU7cmV0dXJuIHR9LHNvbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIFEoT2UodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHNvcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGZlLmNhbGwoT2UodGhpcyksZSl9LHN1YmFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIHI9T2UodGhpcyksbj1yLmxlbmd0aCxvPWcoZSxuKTtyZXR1cm4gbmV3KFUocixyW2dlXSkpKHIuYnVmZmVyLHIuYnl0ZU9mZnNldCtvKnIuQllURVNfUEVSX0VMRU1FTlQsaCgodm9pZCAwPT09dD9uOmcodCxuKSktbykpfX0sSWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWUodGhpcyxsZS5jYWxsKE9lKHRoaXMpLGUsdCkpfSxDZT1mdW5jdGlvbihlKXtPZSh0aGlzKTt2YXIgdD1rZShhcmd1bWVudHNbMV0sMSkscj10aGlzLmxlbmd0aCxuPXcoZSksbz1oKG4ubGVuZ3RoKSxpPTA7aWYobyt0PnIpdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpO2Zvcig7aTxvOyl0aGlzW3QraV09bltpKytdfSxUZT17ZW50cmllczpmdW5jdGlvbigpe3JldHVybiBpZS5jYWxsKE9lKHRoaXMpKX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBvZS5jYWxsKE9lKHRoaXMpKX0sdmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIG5lLmNhbGwoT2UodGhpcykpfX0scWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUihlKSYmZVtfZV0mJiJzeW1ib2wiIT10eXBlb2YgdCYmdCBpbiBlJiZTdHJpbmcoK3QpPT1TdHJpbmcodCl9LEhlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHFlKGUsdD1iKHQsITApKT9sKDIsZVt0XSk6QihlLHQpfSxGZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIShxZShlLHQ9Yih0LCEwKSkmJlIocikmJl8ociwidmFsdWUiKSl8fF8ociwiZ2V0Iil8fF8ociwic2V0Iil8fHIuY29uZmlndXJhYmxlfHxfKHIsIndyaXRhYmxlIikmJiFyLndyaXRhYmxlfHxfKHIsImVudW1lcmFibGUiKSYmIXIuZW51bWVyYWJsZT9OKGUsdCxyKTooZVt0XT1yLnZhbHVlLGUpfTtiZXx8KEYuZj1IZSxILmY9RmUpLHMocy5TK3MuRiohYmUsIk9iamVjdCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpIZSxkZWZpbmVQcm9wZXJ0eTpGZX0pLGkoZnVuY3Rpb24oKXtkZS5jYWxsKHt9KX0pJiYoZGU9cGU9ZnVuY3Rpb24oKXtyZXR1cm4gY2UuY2FsbCh0aGlzKX0pO3ZhciBOZT1wKHt9LEVlKTtwKE5lLFRlKSxkKE5lLHllLFRlLnZhbHVlcykscChOZSx7c2xpY2U6SWUsc2V0OkNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7fSx0b1N0cmluZzpkZSx0b0xvY2FsZVN0cmluZzpqZX0pLHhlKE5lLCJidWZmZXIiLCJiIikseGUoTmUsImJ5dGVPZmZzZXQiLCJvIikseGUoTmUsImJ5dGVMZW5ndGgiLCJsIikseGUoTmUsImxlbmd0aCIsImUiKSxOKE5lLGhlLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tfZV19fSksCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtc3RhdGVtZW50cwplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dT0hIXU7dmFyIGM9ZSsodT8iQ2xhbXBlZCI6IiIpKyJBcnJheSIsbD0iZ2V0IitlLHA9InNldCIrZSx5PW9bY10sZz15fHx7fSxiPXkmJk8oeSksXz0heXx8IWEuQUJWLHc9e30sUz15JiZ5LnByb3RvdHlwZSxNPWZ1bmN0aW9uKGUscil7dmFyIG49ZS5fZDtyZXR1cm4gbi52W2xdKHIqdCtuLm8sd2UpfSxMPWZ1bmN0aW9uKGUscixuKXt2YXIgbz1lLl9kO3UmJihuPShuPU1hdGgucm91bmQobikpPDA/MDpuPjI1NT8yNTU6MjU1Jm4pLG8udltwXShyKnQrby5vLG4sd2UpfSx4PWZ1bmN0aW9uKGUsdCl7TihlLHQse2dldDpmdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdCl9LHNldDpmdW5jdGlvbihlKXtyZXR1cm4gTCh0aGlzLHQsZSl9LGVudW1lcmFibGU6ITB9KX07Xz8oeT1yKGZ1bmN0aW9uKGUscixuLG8pe2YoZSx5LGMsIl9kIik7dmFyIGkscyxhLHUsbD0wLHA9MDtpZihSKHIpKXtpZighKHIgaW5zdGFuY2VvZiBZfHwiQXJyYXlCdWZmZXIiPT0odT1tKHIpKXx8IlNoYXJlZEFycmF5QnVmZmVyIj09dSkpcmV0dXJuIF9lIGluIHI/TGUoeSxyKTpBZS5jYWxsKHkscik7aT1yLHA9a2Uobix0KTt2YXIgZz1yLmJ5dGVMZW5ndGg7aWYodm9pZCAwPT09byl7aWYoZyV0KXRocm93IEcoIldyb25nIGxlbmd0aCEiKTtpZigocz1nLXApPDApdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpfWVsc2UgaWYoKHM9aChvKSp0KStwPmcpdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpO2E9cy90fWVsc2UgYT12KHIpLHM9YSp0LGk9bmV3IFkocyk7Zm9yKGQoZSwiX2QiLHtiOmksbzpwLGw6cyxlOmEsdjpuZXcgeihpKX0pO2w8YTspeChlLGwrKyl9KSxTPXkucHJvdG90eXBlPWsoTmUpLGQoUywiY29uc3RydWN0b3IiLHkpKTppKGZ1bmN0aW9uKCl7eSgxKX0pJiZpKGZ1bmN0aW9uKCl7bmV3IHkoLTEpfSkmJkkoZnVuY3Rpb24oZSl7bmV3IHksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKbmV3IHkobnVsbCksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKbmV3IHkoMS41KSwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwpuZXcgeShlKX0sITApfHwoeT1yKGZ1bmN0aW9uKGUscixuLG8pe2YoZSx5LGMpO3ZhciBpOwovLyBgd3NgIG1vZHVsZSBidWcsIHRlbXBvcmFyaWx5IHJlbW92ZSB2YWxpZGF0aW9uIGxlbmd0aCBmb3IgVWludDhBcnJheQovLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9wdWxsLzY0NQovLyBgd3NgIG1vZHVsZSBidWcsIHRlbXBvcmFyaWx5IHJlbW92ZSB2YWxpZGF0aW9uIGxlbmd0aCBmb3IgVWludDhBcnJheQovLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9wdWxsLzY0NQpyZXR1cm4gUihyKT9yIGluc3RhbmNlb2YgWXx8IkFycmF5QnVmZmVyIj09KGk9bShyKSl8fCJTaGFyZWRBcnJheUJ1ZmZlciI9PWk/dm9pZCAwIT09bz9uZXcgZyhyLGtlKG4sdCksbyk6dm9pZCAwIT09bj9uZXcgZyhyLGtlKG4sdCkpOm5ldyBnKHIpOl9lIGluIHI/TGUoeSxyKTpBZS5jYWxsKHkscik6bmV3IGcodihyKSl9KSxKKGIhPT1GdW5jdGlvbi5wcm90b3R5cGU/UChnKS5jb25jYXQoUChiKSk6UChnKSxmdW5jdGlvbihlKXtlIGluIHl8fGQoeSxlLGdbZV0pfSkseS5wcm90b3R5cGU9UyxufHwoUy5jb25zdHJ1Y3Rvcj15KSk7dmFyIEE9U1t5ZV0sRD0hIUEmJigidmFsdWVzIj09QS5uYW1lfHx2b2lkIDA9PUEubmFtZSksVT1UZS52YWx1ZXM7ZCh5LHZlLCEwKSxkKFMsX2UsYyksZChTLG1lLCEwKSxkKFMsZ2UseSksKHU/bmV3IHkoMSlbaGVdPT1jOmhlIGluIFMpfHxOKFMsaGUse2dldDpmdW5jdGlvbigpe3JldHVybiBjfX0pLHdbY109eSxzKHMuRytzLlcrcy5GKih5IT1nKSx3KSxzKHMuUyxjLHtCWVRFU19QRVJfRUxFTUVOVDp0fSkscyhzLlMrcy5GKmkoZnVuY3Rpb24oKXtnLm9mLmNhbGwoeSwxKX0pLGMse2Zyb206QWUsb2Y6RGV9KSwiQllURVNfUEVSX0VMRU1FTlQiaW4gU3x8ZChTLCJCWVRFU19QRVJfRUxFTUVOVCIsdCkscyhzLlAsYyxFZSksQyhjKSxzKHMuUCtzLkYqU2UsYyx7c2V0OkNlfSkscyhzLlArcy5GKiFELGMsVGUpLG58fFMudG9TdHJpbmc9PWRlfHwoUy50b1N0cmluZz1kZSkscyhzLlArcy5GKmkoZnVuY3Rpb24oKXtuZXcgeSgxKS5zbGljZSgpfSksYyx7c2xpY2U6SWV9KSxzKHMuUCtzLkYqKGkoZnVuY3Rpb24oKXtyZXR1cm5bMSwyXS50b0xvY2FsZVN0cmluZygpIT1uZXcgeShbMSwyXSkudG9Mb2NhbGVTdHJpbmcoKX0pfHwhaShmdW5jdGlvbigpe1MudG9Mb2NhbGVTdHJpbmcuY2FsbChbMSwyXSl9KSksYyx7dG9Mb2NhbGVTdHJpbmc6amV9KSxFW2NdPUQ/QTpVLG58fER8fGQoUyx5ZSxVKX19ZWxzZSBlLmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSwvKiAzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNjkpLG89cigwKSxpPXIoNzkpKCJtZXRhZGF0YSIpLHM9aS5zdG9yZXx8KGkuc3RvcmU9bmV3KHIoMTcyKSkpLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPXMuZ2V0KGUpO2lmKCFvKXtpZighcilyZXR1cm47cy5zZXQoZSxvPW5ldyBuKX12YXIgaT1vLmdldCh0KTtpZighaSl7aWYoIXIpcmV0dXJuO28uc2V0KHQsaT1uZXcgbil9cmV0dXJuIGl9LHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWEodCxyLCExKTtyZXR1cm4gdm9pZCAwIT09biYmbi5oYXMoZSl9LGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWEodCxyLCExKTtyZXR1cm4gdm9pZCAwPT09bj92b2lkIDA6bi5nZXQoZSl9LGY9ZnVuY3Rpb24oZSx0LHIsbil7YShyLG4sITApLnNldChlLHQpfSxsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9YShlLHQsITEpLG49W107cmV0dXJuIHImJnIuZm9yRWFjaChmdW5jdGlvbihlLHQpe24ucHVzaCh0KX0pLG59LGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWV8fCJzeW1ib2wiPT10eXBlb2YgZT9lOlN0cmluZyhlKX0scD1mdW5jdGlvbihlKXtvKG8uUywiUmVmbGVjdCIsZSl9O2UuZXhwb3J0cz17c3RvcmU6cyxtYXA6YSxoYXM6dSxnZXQ6YyxzZXQ6ZixrZXlzOmwsa2V5OmQsZXhwOnB9fSwvKiAzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0MCksbz1yKDE4NCksaT1yKDEzNikscz1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPXIoNDYpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aWYobihlKSx0PWkodCwhMCksbihyKSxvKXRyeXtyZXR1cm4gcyhlLHQscil9Y2F0Y2goZSl7fWlmKCJnZXQiaW4gcnx8InNldCJpbiByKXRocm93IFR5cGVFcnJvcigiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhIik7cmV0dXJuInZhbHVlImluIHImJihlW3RdPXIudmFsdWUpLGV9fSwvKiA0MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0MSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LC8qIDQxICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LC8qIDQyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQ4KSgibWV0YSIpLG89cig2KSxpPXIoMjMpLHM9cigxMSkuZixhPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxmPWZ1bmN0aW9uKGUpe3MoZSxuLHt2YWx1ZTp7aToiTyIrICsrYSwvLyBvYmplY3QgSUQKdzp7fX19KX0sbD1mdW5jdGlvbihlLHQpewovLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CmlmKCFvKGUpKXJldHVybiJzeW1ib2wiPT10eXBlb2YgZT9lOigic3RyaW5nIj09dHlwZW9mIGU/IlMiOiJQIikrZTtpZighaShlLG4pKXsKLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKaWYoIXUoZSkpcmV0dXJuIkYiOwovLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQppZighdClyZXR1cm4iRSI7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0uaX0sZD1mdW5jdGlvbihlLHQpe2lmKCFpKGUsbikpewovLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAppZighdShlKSlyZXR1cm4hMDsKLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKaWYoIXQpcmV0dXJuITE7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0ud30scD1mdW5jdGlvbihlKXtyZXR1cm4gYyYmeS5ORUVEJiZ1KGUpJiYhaShlLG4pJiZmKGUpLGV9LHk9ZS5leHBvcnRzPXtLRVk6bixORUVEOiExLGZhc3RLZXk6bCxnZXRXZWFrOmQsb25GcmVlemU6cH19LC8qIDQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPSExfSwvKiA0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIyLjEuMy4zMSBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc10KdmFyIG49cig5KSgidW5zY29wYWJsZXMiKSxvPUFycmF5LnByb3RvdHlwZTt2b2lkIDA9PW9bbl0mJnIoMTgpKG8sbix7fSksZS5leHBvcnRzPWZ1bmN0aW9uKGUpe29bbl1bZV09ITB9fSwvKiA0NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5ncwp2YXIgbj1yKDE4Myksbz1yKDEyOCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0sLyogNDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5CmUuZXhwb3J0cz0hcig2NikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwvKiA0NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LC8qIDQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrcituKS50b1N0cmluZygzNikpfX0sLyogNDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTykKdmFyIG49cigxNTApLG89cigxMDUpO2UuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxvKX19LC8qIDUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM0KSxvPU1hdGgubWF4LGk9TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bihlKSxlPDA/byhlK3QsMCk6aShlLHQpfX0sLyogNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKdmFyIG49cigzKSxvPXIoMTUxKSxpPXIoMTA1KSxzPXIoMTA0KSgiSUVfUFJPVE8iKSxhPWZ1bmN0aW9uKCl7fSx1PWZ1bmN0aW9uKCl7Ci8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnCnZhciBlLHQ9cigxMDIpKCJpZnJhbWUiKSxuPWkubGVuZ3RoO2Zvcih0LnN0eWxlLmRpc3BsYXk9Im5vbmUiLHIoMTA2KS5hcHBlbmRDaGlsZCh0KSx0LnNyYz0iamF2YXNjcmlwdDoiLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybAovLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0OwovLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7CmU9dC5jb250ZW50V2luZG93LmRvY3VtZW50LGUub3BlbigpLGUud3JpdGUoIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XC9zY3JpcHQ+IiksZS5jbG9zZSgpLHU9ZS5GO24tLTspZGVsZXRlIHUucHJvdG90eXBlW2lbbl1dO3JldHVybiB1KCl9O2UuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciByOwovLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbApyZXR1cm4gbnVsbCE9PWU/KGEucHJvdG90eXBlPW4oZSkscj1uZXcgYSxhLnByb3RvdHlwZT1udWxsLHJbc109ZSk6cj11KCksdm9pZCAwPT09dD9yOm8ocix0KX19LC8qIDUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQp2YXIgbj1yKDE1MCksbz1yKDEwNSkuY29uY2F0KCJsZW5ndGgiLCJwcm90b3R5cGUiKTt0LmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsbyl9fSwvKiA1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNCksbz1yKDExKSxpPXIoMTApLHM9cig5KSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uW2VdO2kmJnQmJiF0W3NdJiZvLmYodCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSwvKiA1NCAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXtpZighKGUgaW5zdGFuY2VvZiB0KXx8dm9pZCAwIT09biYmbiBpbiBlKXRocm93IFR5cGVFcnJvcihyKyI6IGluY29ycmVjdCBpbnZvY2F0aW9uISIpO3JldHVybiBlfX0sLyogNTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjgpLG89cigxNjIpLGk9cigxMTgpLHM9cigzKSxhPXIoMTIpLHU9cigxMjApLGM9e30sZj17fSx0PWUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixsLGQpe3ZhciBwLHksaCx2LGc9ZD9mdW5jdGlvbigpe3JldHVybiBlfTp1KGUpLGI9bihyLGwsdD8yOjEpLF89MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZyl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTsKLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yCmlmKGkoZykpe2ZvcihwPWEoZS5sZW5ndGgpO3A+XztfKyspaWYoKHY9dD9iKHMoeT1lW19dKVswXSx5WzFdKTpiKGVbX10pKT09PWN8fHY9PT1mKXJldHVybiB2fWVsc2UgZm9yKGg9Zy5jYWxsKGUpOyEoeT1oLm5leHQoKSkuZG9uZTspaWYoKHY9byhoLGIseS52YWx1ZSx0KSk9PT1jfHx2PT09ZilyZXR1cm4gdn07dC5CUkVBSz1jLHQuUkVUVVJOPWZ9LC8qIDU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbyBpbiB0KW4oZSxvLHRbb10scik7cmV0dXJuIGV9fSwvKiA1NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiByLmNhbGwoZSx0KX19LC8qIDU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM5KSxvPXIoNzYpO2UuZXhwb3J0cz1yKDQ2KT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LC8qIDU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NTYpLF9fZXNNb2R1bGU6ITB9fSwvKiA2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMSkuZixvPXIoMjMpLGk9cig5KSgidG9TdHJpbmdUYWciKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LC8qIDYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigzMyksaT1yKDUpLHM9cigxMDgpLGE9IlsiK3MrIl0iLHU9IuKAi8KFIixjPVJlZ0V4cCgiXiIrYSthKyIqIiksZj1SZWdFeHAoYSthKyIqJCIpLGw9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPXt9LGE9aShmdW5jdGlvbigpe3JldHVybiEhc1tlXSgpfHx1W2VdKCkhPXV9KSxjPW9bZV09YT90KGQpOnNbZV07ciYmKG9bcl09YyksbihuLlArbi5GKmEsIlN0cmluZyIsbyl9LGQ9bC50cmltPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9U3RyaW5nKG8oZSkpLDEmdCYmKGU9ZS5yZXBsYWNlKGMsIiIpKSwyJnQmJihlPWUucmVwbGFjZShmLCIiKSksZX07ZS5leHBvcnRzPWx9LC8qIDYyICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPXt9fSwvKiA2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKXx8ZS5fdCE9PXQpdGhyb3cgVHlwZUVycm9yKCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICIrdCsiIHJlcXVpcmVkISIpO3JldHVybiBlfX0sLyogNjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTykKdmFyIG49cigxODIpLG89cigxMzMpO2UuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxvKX19LC8qIDY1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBuPXIoOTUpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sLyogNjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LC8qIDY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoOTgpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9PSh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOigwLG8uZGVmYXVsdCkodCkpJiYiZnVuY3Rpb24iIT10eXBlb2YgdD9lOnR9fSwvKiA2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQ1OCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0NjIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoOTgpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiKyh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOigwLHUuZGVmYXVsdCkodCkpKTtlLnByb3RvdHlwZT0oMCxzLmRlZmF1bHQpKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoby5kZWZhdWx0PygwLG8uZGVmYXVsdCkoZSx0KTplLl9fcHJvdG9fXz10KX19LC8qIDY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NjcpLF9fZXNNb2R1bGU6ITB9fSwvKiA3MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCnZhciBuPXIoMjkpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCmUuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0sLyogNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LC8qIDcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIG49cigyOSksbz1yKDkpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxzPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKGUpe319O2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLGE7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj1zKHQ9T2JqZWN0KGUpLG8pKT9yOmk/bih0KToiT2JqZWN0Ij09KGE9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjphfX0sLyogNzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpCnZhciBuPXIoMTI4KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LC8qIDc0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9e30udG9TdHJpbmc7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiByLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSwvKiA3NSAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz0hMH0sLyogNzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSwvKiA3NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz17fX0sLyogNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LC8qIDc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI3KSxvPXIoNCksaT1vWyJfX2NvcmUtanNfc2hhcmVkX18iXXx8KG9bIl9fY29yZS1qc19zaGFyZWRfXyJdPXt9KTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGlbZV18fChpW2VdPXZvaWQgMCE9PXQ/dDp7fSl9KSgidmVyc2lvbnMiLFtdKS5wdXNoKHt2ZXJzaW9uOm4udmVyc2lvbixtb2RlOnIoNDMpPyJwdXJlIjoiZ2xvYmFsIixjb3B5cmlnaHQ6IsKpIDIwMTggRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSkifSl9LC8qIDgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZgovLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcwp2YXIgbj1yKDI0KSxvPXIoMTIpLGk9cig1MCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIscyl7dmFyIGEsdT1uKHQpLGM9byh1Lmxlbmd0aCksZj1pKHMsYyk7Ci8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQppZihlJiZyIT1yKXtmb3IoO2M+ZjspCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYoKGE9dVtmKytdKSE9YSlyZXR1cm4hMH1lbHNlIGZvcig7Yz5mO2YrKylpZigoZXx8ZiBpbiB1KSYmdVtmXT09PXIpcmV0dXJuIGV8fGZ8fDA7cmV0dXJuIWUmJi0xfX19LC8qIDgxICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LC8qIDgyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudCkKdmFyIG49cigyOSk7ZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSwvKiA4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMi44IElzUmVnRXhwKGFyZ3VtZW50KQp2YXIgbj1yKDYpLG89cigyOSksaT1yKDkpKCJtYXRjaCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbihlKSYmKHZvaWQgMCE9PSh0PWVbaV0pPyEhdDoiUmVnRXhwIj09byhlKSl9fSwvKiA4NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig5KSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpLnJldHVybj1mdW5jdGlvbigpe289ITB9LAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbApBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goZSl7fWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOnI9ITB9fSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goZSl7fXJldHVybiByfX0sLyogODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMi41LjMgZ2V0IFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3MKdmFyIG49cigzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZT1uKHRoaXMpLHQ9IiI7cmV0dXJuIGUuZ2xvYmFsJiYodCs9ImciKSxlLmlnbm9yZUNhc2UmJih0Kz0iaSIpLGUubXVsdGlsaW5lJiYodCs9Im0iKSxlLnVuaWNvZGUmJih0Kz0idSIpLGUuc3RpY2t5JiYodCs9InkiKSx0fX0sLyogODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDE4KSxvPXIoMTkpLGk9cig1KSxzPXIoMzMpLGE9cig5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1PWEoZSksYz1yKHMsdSwiIltlXSksZj1jWzBdLGw9Y1sxXTtpKGZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHRbdV09ZnVuY3Rpb24oKXtyZXR1cm4gN30sNyE9IiJbZV0odCl9KSYmKG8oU3RyaW5nLnByb3RvdHlwZSxlLGYpLG4oUmVnRXhwLnByb3RvdHlwZSx1LDI9PXQ/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbC5jYWxsKGUsdGhpcyx0KX06ZnVuY3Rpb24oZSl7cmV0dXJuIGwuY2FsbChlLHRoaXMpfSkpfX0sLyogODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikKdmFyIG49cigzKSxvPXIoMTYpLGk9cig5KSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSwvKiA4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxvPW4ubmF2aWdhdG9yO2UuZXhwb3J0cz1vJiZvLnVzZXJBZ2VudHx8IiJ9LC8qIDg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0KSxvPXIoMCksaT1yKDE5KSxzPXIoNTYpLGE9cig0MiksdT1yKDU1KSxjPXIoNTQpLGY9cig2KSxsPXIoNSksZD1yKDg0KSxwPXIoNjApLHk9cigxMDkpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixoLHYsZyl7dmFyIGI9bltlXSxfPWIsbT12PyJzZXQiOiJhZGQiLFI9XyYmXy5wcm90b3R5cGUsdz17fSxTPWZ1bmN0aW9uKGUpe3ZhciB0PVJbZV07aShSLGUsImRlbGV0ZSI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIShnJiYhZihlKSkmJnQuY2FsbCh0aGlzLDA9PT1lPzA6ZSl9OiJoYXMiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiEoZyYmIWYoZSkpJiZ0LmNhbGwodGhpcywwPT09ZT8wOmUpfToiZ2V0Ij09ZT9mdW5jdGlvbihlKXtyZXR1cm4gZyYmIWYoZSk/dm9pZCAwOnQuY2FsbCh0aGlzLDA9PT1lPzA6ZSl9OiJhZGQiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiB0LmNhbGwodGhpcywwPT09ZT8wOmUpLHRoaXN9OmZ1bmN0aW9uKGUscil7cmV0dXJuIHQuY2FsbCh0aGlzLDA9PT1lPzA6ZSxyKSx0aGlzfSl9O2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBfJiYoZ3x8Ui5mb3JFYWNoJiYhbChmdW5jdGlvbigpeyhuZXcgXykuZW50cmllcygpLm5leHQoKX0pKSl7dmFyIGs9bmV3IF8sTz1rW21dKGc/e306LTAsMSkhPWssUD1sKGZ1bmN0aW9uKCl7ay5oYXMoMSl9KSxNPWQoZnVuY3Rpb24oZSl7bmV3IF8oZSl9KSxMPSFnJiZsKGZ1bmN0aW9uKCl7Zm9yKAovLyBWOCB+IENocm9taXVtIDQyLSBmYWlscyBvbmx5IHdpdGggNSsgZWxlbWVudHMKdmFyIGU9bmV3IF8sdD01O3QtLTspZVttXSh0LHQpO3JldHVybiFlLmhhcygtMCl9KTtNfHwoXz10KGZ1bmN0aW9uKHQscil7Yyh0LF8sZSk7dmFyIG49eShuZXcgYix0LF8pO3JldHVybiB2b2lkIDAhPXImJnUocix2LG5bbV0sbiksbn0pLF8ucHJvdG90eXBlPVIsUi5jb25zdHJ1Y3Rvcj1fKSwoUHx8TCkmJihTKCJkZWxldGUiKSxTKCJoYXMiKSx2JiZTKCJnZXQiKSksKEx8fE8pJiZTKG0pLAovLyB3ZWFrIGNvbGxlY3Rpb25zIHNob3VsZCBub3QgY29udGFpbnMgLmNsZWFyIG1ldGhvZApnJiZSLmNsZWFyJiZkZWxldGUgUi5jbGVhcn1lbHNlCi8vIGNyZWF0ZSBjb2xsZWN0aW9uIGNvbnN0cnVjdG9yCl89aC5nZXRDb25zdHJ1Y3Rvcih0LGUsdixtKSxzKF8ucHJvdG90eXBlLHIpLGEuTkVFRD0hMDtyZXR1cm4gcChfLGUpLHdbZV09XyxvKG8uRytvLlcrby5GKihfIT1iKSx3KSxnfHxoLnNldFN0cm9uZyhfLGUsdiksX319LC8qIDkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG4sbz1yKDQpLGk9cigxOCkscz1yKDQ4KSxhPXMoInR5cGVkX2FycmF5IiksdT1zKCJ2aWV3IiksYz0hKCFvLkFycmF5QnVmZmVyfHwhby5EYXRhVmlldyksZj1jLGw9MCxkPSJJbnQ4QXJyYXksVWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheSIuc3BsaXQoIiwiKTtsPDk7KShuPW9bZFtsKytdXSk/KGkobi5wcm90b3R5cGUsYSwhMCksaShuLnByb3RvdHlwZSx1LCEwKSk6Zj0hMTtlLmV4cG9ydHM9e0FCVjpjLENPTlNUUjpmLFRZUEVEOmEsVklFVzp1fX0sLyogOTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gRm9yY2VkIHJlcGxhY2VtZW50IHByb3RvdHlwZSBhY2Nlc3NvcnMgbWV0aG9kcwplLmV4cG9ydHM9cig0Myl8fCFyKDUpKGZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5yYW5kb20oKTsKLy8gSW4gRkYgdGhyb3dzIG9ubHkgZGVmaW5lIG1ldGhvZHMKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmLCBuby11c2VsZXNzLWNhbGwKX19kZWZpbmVTZXR0ZXJfXy5jYWxsKG51bGwsZSxmdW5jdGlvbigpe30pLGRlbGV0ZSByKDQpW2VdfSl9LC8qIDkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8KdmFyIG49cigwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7bihuLlMsZSx7b2Y6ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKTtlLS07KXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBuZXcgdGhpcyh0KX19KX19LC8qIDkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8KdmFyIG49cigwKSxvPXIoMTYpLGk9cigyOCkscz1yKDU1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7bihuLlMsZSx7ZnJvbTpmdW5jdGlvbihlKXt2YXIgdCxyLG4sYSx1PWFyZ3VtZW50c1sxXTtyZXR1cm4gbyh0aGlzKSx0PXZvaWQgMCE9PXUsdCYmbyh1KSx2b2lkIDA9PWU/bmV3IHRoaXM6KHI9W10sdD8obj0wLGE9aSh1LGFyZ3VtZW50c1syXSwyKSxzKGUsITEsZnVuY3Rpb24oZSl7ci5wdXNoKGEoZSxuKyspKX0pKTpzKGUsITEsci5wdXNoLHIpLG5ldyB0aGlzKHIpKX19KX19LC8qIDk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrcituKS50b1N0cmluZygzNikpfX0sLyogOTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LC8qIDk2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM5KS5mLG89cig1NyksaT1yKDIyKSgidG9TdHJpbmdUYWciKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LC8qIDk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0MzcpLF9fZXNNb2R1bGU6ITB9fSwvKiA5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQ0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0NDYpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBzLmRlZmF1bHQmJiJzeW1ib2wiPT10eXBlb2Ygby5kZWZhdWx0P2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBzLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1zLmRlZmF1bHQmJmUhPT1zLmRlZmF1bHQucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBlfTt0LmRlZmF1bHQ9ImZ1bmN0aW9uIj09dHlwZW9mIHMuZGVmYXVsdCYmInN5bWJvbCI9PT1hKG8uZGVmYXVsdCk/ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/InVuZGVmaW5lZCI6YShlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBzLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1zLmRlZmF1bHQmJmUhPT1zLmRlZmF1bHQucHJvdG90eXBlPyJzeW1ib2wiOnZvaWQgMD09PWU/InVuZGVmaW5lZCI6YShlKX19LC8qIDk5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3QucnVudGltZVV0aWxzPXtydW50aW1lRGVzY3JpcHRvcjp7fSxydW50aW1lQ2FwYWJpbGl0aWVzOntjb25zdHJhaW50czp7fX19fSwvKiAxMDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cig3KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1yKDE0KSxkPWYuZ2V0TG9nZ2VyKCJhZGRyZXNzLWFsbG9jYXRpb24iKSxwPXZvaWQgMCx5PWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICAqLwovKioKICAgKiBDcmVhdGUgYW4gQWRkcmVzcyBBbGxvY2F0aW9uCiAgICogQHBhcmFtICB7VVJMLlVSTH0gICAgICB1cmwgLSB1cmwgZnJvbSB3aG8gaXMgc2VuZGluZyB0aGUgbWVzc2FnZQogICAqIEBwYXJhbSAge01pbmlCdXN9ICAgICAgYnVzIC0gTWluaUJ1cyB1c2VkIGZvciBhZGRyZXNzIGFsbG9jYXRpb24KICAgKi8KZnVuY3Rpb24gQWRkcmVzc0FsbG9jYXRpb24oZSx0LHIpe2lmKCgwLHMuZGVmYXVsdCkodGhpcyxBZGRyZXNzQWxsb2NhdGlvbikscClyZXR1cm4gcDt0aGlzLl91cmw9ZSsiL2FkZHJlc3MtYWxsb2NhdGlvbiIsdGhpcy5fYnVzPXQsdGhpcy5fcmVnaXN0cnk9cixwPXRoaXN9cmV0dXJuKDAsdS5kZWZhdWx0KShBZGRyZXNzQWxsb2NhdGlvbixbe2tleToiY3JlYXRlIiwvKioKICAgICAqCiAgICAgKiBBc2sgZm9yIGNyZWF0aW9uIG9mIGEgbnVtYmVyIG9mIEh5cGVydHkgYWRkcmVzc2VzLCB0byB0aGUgZG9tYWluIG1lc3NhZ2Ugbm9kZS4KICAgICAqCiAgICAgKiBAcGFyYW0ge0RvbWFpbn0gZG9tYWluIC0gZG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUKICAgICAqIEBwYXJhbSB7TnVtYmVyfSBudW1iZXIgLSBudW1iZXIgb2YgYWRkcmVzcyB0byBiZSBhbGxvY2F0ZWQKICAgICAqIEBwYXJhbSB7RGVzY3JpcHRvcn0gaW5mbyAtIGRlc2NyaXB0b3IgdG8gc2VhcmNoIGZvciB0aGUgaHlwZXJ0eSAoVE9ETzovLyB0aGlzIHNob3VsZCBiZSBjb25maXJtZWQpCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvZGF0YW1vZGVsL2NvcmUvaHlwZXJ0eS1jYXRhbG9ndWUvcmVhZG1lLm1kI2NhdGFsb2d1ZS1kYXRhLW1vZGVsCiAgICAgKiBAcGFyYW0ge3NjaGVtZX0gc2NoZW1lIC0gc2NoZW1lIG9mIGFkZHJlc3MgdG8gYmUgY3JlYXRlZCBvciByZXVzZWQsIGxpa2U6IGh5cGVydHksIGNvbW0sIGNvbnRleHQsIGV0YzsKICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxVUkwuSHlwZXJ0eVVSTH0gcmV1c2VVUkwgLSByZXVzZVVSTCBpcyB1c2VkIHRvIHJldXNlIHRoZSBoeXBlcnR5VVJMIHByZXZpb3VzbHkgcmVnaXN0cmVkOwogICAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0LCBFcnJvcj59IHRoaXMgaXMgUHJvbWlzZSBhbmQgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgYWRkcmVzcyBpbmZvcm1hdGlvbgogICAgICoKICAgICAqIEBtZW1iZXJPZiBBZGRyZXNzQWxsb2NhdGlvbgogICAgICovCnZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7Ci8vIC8vIGNvbnNvbGUubG9nKCd0eXBlb2YocmV1c2VVUkwpJywgdHlwZW9mKHJldXNlVVJMKSwgcmV1c2VVUkwpOwovL2RlYnVnZ2VyOwovLyAvLyBjb25zb2xlLmxvZygndHlwZW9mKHJldXNlVVJMKScsIHR5cGVvZihyZXVzZVVSTCksIHJldXNlVVJMKTsKLy9kZWJ1Z2dlcjsKcmV0dXJuIGk/ImJvb2xlYW4iPT10eXBlb2YgaT9pP3RoaXMuX3JldXNlQWxsb2NhdGVkQWRkcmVzcyhlLHQscixuLGkpOnRoaXMuX2FsbG9jYXRlTmV3QWRkcmVzcyhlLG4sdCk6InN0cmluZyI9PXR5cGVvZiBpJiYoMCxsLmlzVVJMKShpKT9uZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUoe25ld0FkZHJlc3M6ITEsYWRkcmVzczpbaV19KX0pOnZvaWQgMDooZC5pbmZvKCJbQWRkcmVzc0FsbG9jYXRpb25dIC0gbmV3IGFkZHJlc3Mgd2lsbCBiZSBhbGxvY2F0ZWQiKSx0aGlzLl9hbGxvY2F0ZU5ld0FkZHJlc3MoZSxuLHQpKX19LHtrZXk6Il9yZXVzZUFsbG9jYXRlZEFkZHJlc3MiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIHM9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGEpe3MuX3JlZ2lzdHJ5LmNoZWNrUmVnaXN0ZXJlZFVSTHMocixpKS50aGVuKGZ1bmN0aW9uKHIpe2lmKHIpe2QuaW5mbygiW0FkZHJlc3NBbGxvY2F0aW9uIC0gIituKyJdIC0gUmV1c2UgVVJMIik7byh7bmV3QWRkcmVzczohMSxhZGRyZXNzOnJ9KX1lbHNlInN0cmluZyI9PXR5cGVvZiBpPyhkLmluZm8oIltBZGRyZXNzQWxsb2NhdGlvbiAtIHJldXNlVVJMXSAtIE9iamVjdCAiK2krIiBub3QgZm91bmQiKSxhKCJVUkwgTm90IEZvdW5kIikpOiJib29sZWFuIj09dHlwZW9mIGk/cy5fYWxsb2NhdGVOZXdBZGRyZXNzKGUsbix0KS50aGVuKG8pLmNhdGNoKGEpOmEoIlVSTCBOb3QgRm91bmQiKX0pfSl9fSx7a2V5OiJfYWxsb2NhdGVOZXdBZGRyZXNzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBzPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK2UrIi9hZGRyZXNzLWFsbG9jYXRpb24iLGJvZHk6e3ZhbHVlOntudW1iZXI6cn19fTsiaHlwZXJ0eSIhPT10JiYocy5ib2R5LnNjaGVtZT10KSxkLmluZm8oIltBZGRyZXNzQWxsb2NhdGlvbiAtICIrdCsiXSAtIFJlcXVlc3QgbmV3IFVSTCIpLG4uX2J1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKGUpe2lmKDIwMD09PWUuYm9keS5jb2RlKXt2YXIgdD17bmV3QWRkcmVzczohMCxhZGRyZXNzOmUuYm9keS52YWx1ZS5hbGxvY2F0ZWR9O28odCl9ZWxzZSBpKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXt0eXBlOiJkZWxldGUiLGZyb206ci5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK2UrIi9hZGRyZXNzLWFsbG9jYXRpb24iLGJvZHk6e2NoaWxkcmVuUmVzb3VyY2VzOnR9fTtyLl9idXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT9uKGUuYm9keS5jb2RlKTpvKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJ1cmwiLC8qKgogICAgICogZ2V0IHRoZSBVUkwgdmFsdWUKICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVybCB2YWx1ZTsKICAgICAqLwpnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dLFt7a2V5OiJpbnN0YW5jZSIsZ2V0OmZ1bmN0aW9uKCl7aWYoIXApdGhyb3cgbmV3IEVycm9yKCJUaGUgYWRkcmVzcyBhbGxvY2F0aW9uIHdhcyBub3QgaW5zdGFudGlhdGVkIik7cmV0dXJuIHB9fV0pLEFkZHJlc3NBbGxvY2F0aW9ufSgpO3QuZGVmYXVsdD15LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDEwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDcpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxsPXIoMTQpLGQ9cig0OTIpLHA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSx5PWYuZ2V0TG9nZ2VyKCJDcnlwdG9NYW5hZ2VyIiksaD1mdW5jdGlvbigpey8qKgogICogVGhpcyBpcyB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGlzZSB0aGUgQ3J5cHRvTWFuYWdlciwgaXQgZG9lcyBub3QgcmVxdWlyZSBhbnkgaW5wdXQuCiAgKiBUaGUgaW5pdCgpIG11c3QgY2FsbGVkIGluIG9yZGVyIHRvIHNldCBtYW5kYXRvcmllcyBhdHRyaWJ1dGVzCiAgKi8KZnVuY3Rpb24gQ3J5cHRvTWFuYWdlcihlKXsoMCxzLmRlZmF1bHQpKHRoaXMsQ3J5cHRvTWFuYWdlciksdGhpcy5zdG9yYWdlTWFuYWdlcj1lLHRoaXMudXNlckRlZmF1bHRLZXlSZWY9InVzZXJBc3ltbWV0cmljS2V5In1yZXR1cm4oMCx1LmRlZmF1bHQpKENyeXB0b01hbmFnZXIsW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLHMsYSl7dmFyIHU9dGhpcztpZighZSl0aHJvdyBuZXcgRXJyb3IoIltdIHJ1bnRpbWVVUkwgaXMgbWlzc2luZy4iKTtpZighcil0aHJvdyBuZXcgRXJyb3IoInN0b3JhZ2VNYW5hZ2VyIGlzIG1pc3NpbmciKTtpZighYSl0aHJvdyBuZXcgRXJyb3IoInJ1bnRpbWVGYWN0b3J5IGlzIG1pc3NpbmciKTt1Ll9ydW50aW1lVVJMPWUsdS5fY3J5cHRvTWFuYWdlclVSTD11Ll9ydW50aW1lVVJMKyIvY3J5cHRvTWFuYWdlciIsCi8vX3RoaXMuX215VVJMID0gX3RoaXMuX3J1bnRpbWVVUkwgKyAnL2NyeXB0byc7CnUuc3RvcmFnZU1hbmFnZXI9cix1LmRhdGFPYmplY3RzU3RvcmFnZT1uLHUucnVudGltZUNhcGFiaWxpdGllcz10LHUuX3J1bnRpbWVGYWN0b3J5PWEsdS5fZG9tYWluPSgwLGwuZGl2aWRlVVJMKSh1Ll9ydW50aW1lVVJMKS5kb21haW4sdS5jcnlwdG89bmV3IHAuZGVmYXVsdCh1Ll9ydW50aW1lRmFjdG9yeSksCi8vIGhhc2hUYWJsZSB0byBzdG9yZSBhbGwgdGhlIGNyeXB0byBpbmZvcm1hdGlvbiBiZXR3ZWVuIHR3byBoeXBlcnRpZXMKdS5jaGF0S2V5cz17fSwKLy8gaGFzaFRhYmxlIHRvIHN0b3JlIHRoZSBzeW1tZXRyaWMga2V5cyB0byBiZSB1c2VkIGluIHRoZSBjaGF0IGdyb3VwCnUuZGF0YU9iamVjdFNlc3Npb25LZXlzPXt9LAovL2ZhaWxzYWZlIHRvIGVuYWJsZS9kaXNhYmxlIGFsbCB0aGUgY3JpcHRvZ3JhcGhpYyBmdW5jdGlvbnMKdS5pc1RvVXNlRW5jcnlwdGlvbj0hMCx1Ll9yZWdpc3RyeT1vLHUuX2NvcmVEaXNjb3Zlcnk9aSx1Ll9pZG09c319LHtrZXk6ImxvYWRTZXNzaW9uS2V5cyIsCi8vIHRvIGJlIHVzZWQgdG8gaW5pdGlhbGlzZSBJRE0gd2l0aCBTZXNzaW9uS2V5cyB1c2VkIGluIHByZXZpb3VzIHNlc3Npb24KdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQpe2Uuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKHIpe2UuZGF0YU9iamVjdFNlc3Npb25LZXlzPXJ8fHt9LHQoKX0pfSl9fSx7a2V5OiJfaXNGcm9tUmVtb3RlU00iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiJydW50aW1lIj09PWUuc3BsaXQoIjovLyIpWzBdJiZlIT09dGhpcy5fcnVudGltZVVSTCsiL3NtIn19LHtrZXk6ImFkZENyeXB0b0dVSUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsKLy9UT0RPOiBDaGFuZ2UgdGhlIEdVSSBpbnZvY2F0aW9uIG9mIHRoaXMgbWV0aG9kCnZhciBlPXRoaXM7ZS5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihlLl9jcnlwdG9NYW5hZ2VyVVJMLGZ1bmN0aW9uKHQpewovL2xldCByZXR1cm5lZFZhbHVlOwppZigiZ2VuZXJhdGVSU0FLZXlQYWlyIj09PXQuYm9keS5tZXRob2QpcmV0dXJuIHZvaWQgZS5fY3J5cHRvLmdldE15UHVibGljS2V5KCkudGhlbihmdW5jdGlvbihyKXt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0sbz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfWNhdGNoKGUpe3kuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIGdlbmVyYXRlUlNBS2V5UGFpciBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9KX19LHtrZXk6Il9pc1RvRW5jcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt5LmluZm8oIltDcnlwdG9NYW5hZ2VyLmlzdG9DaHlwZXJNb2R1bGVdIixlKTt2YXIgcj0iY3JlYXRlIj09PWUudHlwZSxuPWUuZnJvbS5pbmNsdWRlcygiaHlwZXJ0eTovLyIpLG89ZS50by5pbmNsdWRlcygiaHlwZXJ0eTovLyIpLGk9KDAsbC5pc0RhdGFPYmplY3RVUkwpKGUudG8pLHM9dC5yZWdpc3RyeS5nZXREYXRhT2JqZWN0UmVwb3J0ZXIoZS50byksYT0hZS5ib2R5Lmhhc093blByb3BlcnR5KCJtdXR1YWwiKXx8ZS5ib2R5Lm11dHVhbDsKLy9pZiBpcyBub3QgdG8gYXBwbHkgZW5jcnlwdGlvbiwgdGhlbiByZXR1cm5zIHJlc29sdmUKcmV0dXJuISFhJiYoKG51bGw9PT1zfHwhKDAsbC5pc0xlZ2FjeSkocykpJiYodGhpcy5pc1RvVXNlRW5jcnlwdGlvbnx8ImhhbmRzaGFrZSI9PT1lLnR5cGU/InVwZGF0ZSI9PT1lLnR5cGU/KHkuaW5mbygidXBkYXRlOmVuY3J5cHRpb24gZGlzYWJsZWQiKSwhMSk6ISgwLGwuaXNMZWdhY3kpKGUudG8pJiYociYmbiYmb3x8ciYmbiYmaSYmYXx8ImhhbmRzaGFrZSI9PT1lLnR5cGV8fCJ1cGRhdGUiPT09ZS50eXBlJiZhKTooeS5pbmZvKCJub3QgaGFuZHNoYWtlOiBlbmNyeXB0aW9uIGRpc2FibGVkIiksITEpKSl9fSx7a2V5OiJfaXNUb0RlY3J5cHQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtpZigic3Vic2NyaWJlIj09PWUudHlwZSZ0Ll9pc0Zyb21SZW1vdGVTTShlLmZyb20pKXt5LmxvZygiX2RvTXV0dWFsQXV0aGVudGljYXRpb25QaGFzZTEiKTt2YXIgbz10LnJlZ2lzdHJ5LmdldERhdGFPYmplY3RSZXBvcnRlcihlLnRvKTtpZihudWxsIT09byYmKDAsbC5pc0xlZ2FjeSkobykpcmV0dXJuIHIoITEpO3QuX2RvTXV0dWFsQXV0aGVudGljYXRpb25QaGFzZTEoZSkudGhlbihmdW5jdGlvbigpe3IoITEpfSxmdW5jdGlvbihlKXtuKGUpfSl9ZWxzZSBlLmhhc093blByb3BlcnR5KCJib2R5IikmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSYmInN0cmluZyI9PXR5cGVvZiBlLmJvZHkudmFsdWU/KHkubG9nKCJfaXNUb0RlY3J5cHQ6dHJ1ZSIpLHIoITApKTooeS5sb2coIl9pc1RvRGVjcnlwdDpmYWxzZSIpLHIoITEpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3kuZXJyb3IoIltDcnlwdG9NYW5hZ2VyLl9pc1RvRGVjcnlwdF0iLGUpfSl9fSx7a2V5OiJlbmNyeXB0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vbG9nLmluZm8oJ2VuY3J5cHRNZXNzYWdlOm1lc3NhZ2UnLCBtZXNzYWdlKTsKdmFyIHQ9dGhpcztyZXR1cm4geS5sb2coImVuY3J5cHQgbWVzc2FnZSAiKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89ImhhbmRzaGFrZSI9PT1lLnR5cGU7Ci8vaWYgaXMgbm90IHRvIGFwcGx5IGVuY3J5cHRpb24sIHRoZW4gcmV0dXJucyByZXNvbHZlCmlmKCF0Ll9pc1RvRW5jcnlwdChlKSkKLy8gbG9nLmxvZygnZGVjcnlwdGlvbiBkaXNhYmxlZCcpOwpyZXR1cm4gcihlKTt2YXIgaT0oMCxsLnBhcnNlTWVzc2FnZVVSTCkoZS50bykscz0oMCxsLmlzRGF0YU9iamVjdFVSTCkoaSksYT0oMCxsLmlzTGVnYWN5KShlLnRvKSx1PSJoeXBlcnR5Ij09PSgwLGwuZGl2aWRlVVJMKShlLmZyb20pLnR5cGUsYz0iaHlwZXJ0eSI9PT0oMCxsLmRpdmlkZVVSTCkoZS50bykudHlwZTtpZigidXBkYXRlIj09PWUudHlwZSlyZXR1cm4geS5sb2coImVuY3J5cHQgbWVzc2FnZTogbWVzc2FnZSB0eXBlIHVwZGF0ZSIpLHIoZSk7aWYoYSlyKGUpO2Vsc2UgaWYodSYmYyl7dmFyIGY9dC5fcmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUuZnJvbSk7aWYoZil7Ci8vIGNoZWNrIGlmIGV4aXN0cyBhbnkga2V5cyBiZXR3ZWVuIHR3byB1c2Vycwp2YXIgZD10LmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXTtpZihkfHwoZD10Ll9uZXdDaGF0Q3J5cHRvKGUsZiksCi8vbG9nLmxvZygnY3JlYXRlQ2hhdEtleSBlbmNyeXB0JywgbWVzc2FnZS5mcm9tICsgbWVzc2FnZS50byk7CnQuY2hhdEtleXNbZS5mcm9tKyI8LT4iK2UudG9dPWQsZS5ib2R5LmhhbmRzaGFrZVBoYXNlPSJzdGFydEhhbmRTaGFrZSIpLGQuYXV0aGVudGljYXRlZCYmIW8pe3ZhciBwPXQuY3J5cHRvLmdlbmVyYXRlSVYoKTt0LmNyeXB0by5lbmNyeXB0QUVTKGQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksKDAsbC5zdHJpbmdpZnkpKGUuYm9keS52YWx1ZSkscCkudGhlbihmdW5jdGlvbihuKXt2YXIgbz10Ll9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsKDAsbC5zdHJpbmdpZnkpKGUuYm9keS52YWx1ZSkrKDAsbC5zdHJpbmdpZnkpKHApLGQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pO3QuY3J5cHRvLmhhc2hITUFDKGQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksbykudGhlbihmdW5jdGlvbih0KXsKLy9sb2cubG9nKCdyZXN1bHQgb2YgaGFzaCAnLCBoYXNoKTsKdmFyIG89e2l2OigwLGwuZW5jb2RlKShwKSx2YWx1ZTooMCxsLmVuY29kZSkobiksaGFzaDooMCxsLmVuY29kZSkodCl9O2UuYm9keS52YWx1ZT0oMCxsLmVuY29kZSkobykscihlKX0pfSl9ZWxzZSBvP3IoZSk6dC5fZG9IYW5kU2hha2VQaGFzZShlLGQpLnRoZW4oZnVuY3Rpb24ocil7dC5jaGF0S2V5c1tlLmZyb20rIjwtPiIrZS50b109ci5jaGF0S2V5cyx0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIubWVzc2FnZSksbigiZW5jcnlwdCBoYW5kc2hha2UgcHJvdG9jb2wgcGhhc2UgIil9KX1lbHNlIG4oIkluIGVuY3J5cHRNZXNzYWdlOiBIeXBlcnR5IG93bmVyIFVSTCB3YXMgbm90IGZvdW5kIil9ZWxzZSB1JiZzJiYKLy9sb2cubG9nKCdkYXRhT2JqZWN0IHZhbHVlIHRvIGVuY3J5cHQ6ICcsIG1lc3NhZ2UuYm9keS52YWx1ZSk7Ci8vbG9nLmxvZygnSWRlbnRpdHlNb2R1bGUgLSBlbmNyeXB0IGZyb20gaHlwZXJ0eSB0byBkYXRhb2JqZWN0ICcsIG1lc3NhZ2UpOwp0LnN0b3JhZ2VNYW5hZ2VyLmdldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIikudGhlbihmdW5jdGlvbihvKXtvPSgwLGwuY2hhdGtleXNUb0FycmF5Q2xvbmVyKShvfHx7fSk7dmFyIHM9bz9vW2ldOm51bGw7dC5kYXRhT2JqZWN0c1N0b3JhZ2UuZ2V0RGF0YU9iamVjdChpKS50aGVuKGZ1bmN0aW9uKG8pewovL2lmIG5vIGtleSBleGlzdHMsIGNyZWF0ZSBhIG5ldyBvbmUgaWYgaXMgdGhlIHJlcG9ydGVyIG9mIGRhdGFPYmplY3QKaWYoIXMmJm8ucmVwb3J0ZXImJm8ucmVwb3J0ZXI9PT1lLmZyb20pe3ZhciBhPXQuY3J5cHRvLmdlbmVyYXRlUmFuZG9tKCk7dC5kYXRhT2JqZWN0U2Vzc2lvbktleXNbaV09e3Nlc3Npb25LZXk6YSxpc1RvRW5jcnlwdDohMH07dmFyIHU9KDAsbC5jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyKSh0LmRhdGFPYmplY3RTZXNzaW9uS2V5cyk7Ci8vVE9ETzogY2hlY2sgaWYgdGhpcyBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZAp0LnN0b3JhZ2VNYW5hZ2VyLnNldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIiwwLHUpLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk9uIGVuY3J5cHRNZXNzYWdlIGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLnNldCBlcnJvcjogIitlKX0pLHM9dC5kYXRhT2JqZWN0U2Vzc2lvbktleXNbaV19Ci8vY2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHNlc3Npb24ga2V5IGZvciB0aGUgY2hhdCByb29tCmlmKHMpCi8vIGFuZCBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uLCBlbmNyeXB0IHRoZSBtZXNzYWdlcwppZihzLmlzVG9FbmNyeXB0KXt2YXIgYz10LmNyeXB0by5nZW5lcmF0ZUlWKCksZj0oMCxsLnN0cmluZ2lmeSkoYyksZD0oMCxsLnN0cmluZ2lmeSkoZS5ib2R5LnZhbHVlKTt0LmNyeXB0by5lbmNyeXB0QUVTKHMuc2Vzc2lvbktleSxkLGMpLnRoZW4oZnVuY3Rpb24obil7ZGVsZXRlIGUuYm9keS5pZGVudGl0eS5hc3NlcnRpb24sLy9UT0RPOiBDaGVjayB3aHkgYXNzZXJ0aW9uIGlzIGNvbW1pbmcgb24gdGhlIG1lc3NhZ2UhCmRlbGV0ZSBlLmJvZHkuaWRlbnRpdHkuZXhwaXJlczsvL1RPRE86IENoZWNrIHdoeSBleHBpcmVzIGlzIGNvbW1pbmcgb24gdGhlIG1lc3NhZ2UhCnZhciBvPXQuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxkK2YpO3QuY3J5cHRvLmhhc2hITUFDKHMuc2Vzc2lvbktleSxvKS50aGVuKGZ1bmN0aW9uKHQpewovLyBsb2cubG9nKCdoYXNoICcsIGhhc2gpOwp2YXIgbz17dmFsdWU6KDAsbC5lbmNvZGUpKG4pLGl2OigwLGwuZW5jb2RlKShjKSxoYXNoOigwLGwuZW5jb2RlKSh0KX07ZS5ib2R5LnZhbHVlPSgwLGwuc3RyaW5naWZ5KShvKSxyKGUpfSl9KX1lbHNlIHIoZSk7ZWxzZSBuKCJEYXRhIG9iamVjdCBrZXkgY291bGQgbm90IGJlIGRlZmluZWQ6IEZhaWxlZCB0byBkZWNyeXB0IG1lc3NhZ2UgIil9KS5jYXRjaChmdW5jdGlvbihlKXtuKCJPbiBlbmNyeXB0TWVzc2FnZSBmcm9tIG1ldGhvZCBkYXRhT2JqZWN0c1N0b3JhZ2UuZ2V0RGF0YU9iamVjdCBlcnJvcjogIitlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bigiT24gZW5jcnlwdE1lc3NhZ2UgZnJvbSBtZXRob2Qgc3RvcmFnZU1hbmFnZXIuZ2V0IGVycm9yOiAiK2UpfSl9KX19LHtrZXk6ImVuY3J5cHREYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt5LmluZm8oImRhdGFPYmplY3QgdmFsdWUgdG8gZW5jcnlwdDogIixlKTt2YXIgaT0oMCxsLnBhcnNlTWVzc2FnZVVSTCkodCk7ci5zdG9yYWdlTWFuYWdlci5nZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIpLnRoZW4oZnVuY3Rpb24odCl7dD0oMCxsLmNoYXRrZXlzVG9BcnJheUNsb25lcikodHx8e30pO3ZhciBzPXQ/dFtpXTpudWxsOwovL2NoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBzZXNzaW9uIGtleSBmb3IgdGhlIGNoYXQgcm9vbQppZighcylyZXR1cm4gbygiTm8gZGF0YU9iamVjdEtleSBmb3IgdGhpcyBkYXRhT2JqZWN0VVJMOiIsaSk7Ci8vIGFuZCBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uLCBlbmNyeXB0IHRoZSBtZXNzYWdlcwppZighcy5pc1RvRW5jcnlwdClyZXR1cm4geS5pbmZvKCJUaGUgZGF0YU9iamVjdCBpcyBub3QgZW5jcnlwdGVkIiksbihlKTt2YXIgYT1yLmNyeXB0by5nZW5lcmF0ZUlWKCk7ci5jcnlwdG8uZW5jcnlwdEFFUyhzLnNlc3Npb25LZXksKDAsbC5zdHJpbmdpZnkpKGUpLGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9e3ZhbHVlOigwLGwuZW5jb2RlKShlKSxpdjooMCxsLmVuY29kZSkoYSl9OwovL2xvZy5sb2coJ2VuY3J5cHRlZCBkYXRhT2JqZWN0JywgbmV3VmFsdWUpOwpyZXR1cm4gbih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIGVuY3J5cHREYXRhT2JqZWN0IGZyb20gbWV0aG9kIGVuY3J5cHRBRVMgZXJyb3I6ICIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIGVuY3J5cHREYXRhT2JqZWN0IGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLmdldCBlcnJvcjogIitlKX0pfSl9fSx7a2V5OiJkZWNyeXB0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy8gIGxvZy5sb2coJ2RlY3J5cHRNZXNzYWdlOm1lc3NhZ2UnLCBtZXNzYWdlKTsKcmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz0iaGFuZHNoYWtlIj09PWUudHlwZTt0Ll9pc1RvRGVjcnlwdChlKS50aGVuKGZ1bmN0aW9uKGkpewovL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQppZighaSlyZXR1cm4gcihlKTt2YXIgcz0oMCxsLnBhcnNlTWVzc2FnZVVSTCkoZS50byksYT0oMCxsLmlzRGF0YU9iamVjdFVSTCkocyksdT0iaHlwZXJ0eSI9PT0oMCxsLmRpdmlkZVVSTCkoZS5mcm9tKS50eXBlLGM9Imh5cGVydHkiPT09KDAsbC5kaXZpZGVVUkwpKGUudG8pLnR5cGU7aWYoInVwZGF0ZSI9PT1lLnR5cGUpcmV0dXJuIHIoZSk7Ci8vaXMgaXMgaHlwZXJ0eSB0byBoeXBlcnR5IGNvbW11bmljYXRpb24KaWYodSYmYyl7Ci8vIGxvZy5sb2coJ2RlY3J5cHQgaHlwZXJ0eSB0byBoeXBlcnR5Jyk7CnZhciBmPXQuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlLnRvKTtpZihmKXt2YXIgZD10LmNoYXRLZXlzW2UudG8rIjwtPiIrZS5mcm9tXTtpZihkfHwoZD10Ll9uZXdDaGF0Q3J5cHRvKGUsZiwiZGVjcnlwdCIpLHQuY2hhdEtleXNbZS50bysiPC0+IitlLmZyb21dPWQpLGQuYXV0aGVudGljYXRlZCYmIW8pe3ZhciBwPSgwLGwuZGVjb2RlKShlLmJvZHkudmFsdWUpLGg9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHAuaXYpLHY9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHAudmFsdWUpLGc9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHAuaGFzaCk7dC5jcnlwdG8uZGVjcnlwdEFFUyhkLmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSx2LGgpLnRoZW4oZnVuY3Rpb24obil7Ci8vIGxvZy5sb2coJ2RlY3J5cHRlZCB2YWx1ZSAnLCBkZWNyeXB0ZWREYXRhKTsKZS5ib2R5LnZhbHVlPW47dmFyIG89dC5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4raCk7dC5jcnlwdG8udmVyaWZ5SE1BQyhkLmtleXMuaHlwZXJ0eVRvSGFzaEtleSxvLGcpLnRoZW4oZnVuY3Rpb24odCl7Ci8vbG9nLmxvZygncmVzdWx0IG9mIGhhc2ggdmVyaWZpY2F0aW9uISAnLCByZXN1bHQpOwplLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eT0hMCxyKGUpfSl9KX1lbHNlIG8/dC5fZG9IYW5kU2hha2VQaGFzZShlLGQpLnRoZW4oZnVuY3Rpb24ocil7Ci8vaWYgaXQgd2FzIHN0YXJ0ZWQgYnkgZG9NdXR1YWxBdXRoZW50aWNhdGlvbiB0aGVuIGVuZHMgdGhlIHByb3RvY29sCiJoYW5kU2hha2VFbmQiPT09cnx8KHQuY2hhdEtleXNbZS50bysiPC0+IitlLmZyb21dPXIuY2hhdEtleXMsdC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyLm1lc3NhZ2UpKX0pOm4oIndyb25nIG1lc3NhZ2UgZG8gZGVjcnlwdCIpfWVsc2UgbigiZXJyb3Igb24gZGVjcnlwdCBtZXNzYWdlIil9ZWxzZSB1JiZhPwovLyBsb2cubG9nKCdkYXRhT2JqZWN0IHZhbHVlIHRvIGRlY3J5cHQ6ICcsIG1lc3NhZ2UuYm9keSk7CnQuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKG8pe289KDAsbC5jaGF0a2V5c1RvQXJyYXlDbG9uZXIpKG98fHt9KTt2YXIgaT1vP29bc106bnVsbDtpZihpKQovL2NoZWNrIGlmIGlzIHRvIGFwcGx5IGVuY3J5cHRpb24KaWYoaS5pc1RvRW5jcnlwdCl7dmFyIGE9KDAsbC5wYXJzZSkoZS5ib2R5LnZhbHVlKSx1PSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhLml2KSxjPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhLnZhbHVlKSxmPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhLmhhc2gpO3QuY3J5cHRvLmRlY3J5cHRBRVMoaS5zZXNzaW9uS2V5LGMsdSkudGhlbihmdW5jdGlvbihvKXt2YXIgcz0oMCxsLnBhcnNlKShvKTsKLy8gbG9nLmxvZygnZGVjcnlwdGVkIFZhbHVlLCcsIHBhcnNlZFZhbHVlKTsKZS5ib2R5LnZhbHVlPXM7dmFyIGE9dC5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLCgwLGwuc3RyaW5naWZ5KShzKSsoMCxsLnN0cmluZ2lmeSkodSkpO3QuY3J5cHRvLnZlcmlmeUhNQUMoaS5zZXNzaW9uS2V5LGEsZikudGhlbihmdW5jdGlvbih0KXt5LmxvZygiUmVjZWl2ZWQgbWVzc2FnZSBITUFDIHJlc3VsdCIsdCksZS5ib2R5LmFzc2VydGVkSWRlbnRpdHk9ITAscihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk1lc3NhZ2UgSE1BQyBpcyBpbnZhbGlkOiAiK2UpfSl9KX1lbHNlIGUuYm9keS5hc3NlcnRlZElkZW50aXR5PSEwLHIoZSk7ZWxzZSBlLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eT0hMCxyKGUpfSk6bigid3JvbmcgbWVzc2FnZSB0byBkZWNyeXB0Iil9KX0pfX0se2tleToiZGVjcnlwdERhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pewovL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQppZighci5pc1RvVXNlRW5jcnlwdGlvbikKLy8gbG9nLmxvZygnZGVjcnlwdGlvbiBkaXNhYmxlZCcpOwpyZXR1cm4gbihlKTt2YXIgaT0oMCxsLnBhcnNlTWVzc2FnZVVSTCkodCk7Ci8vIGxvZy5sb2coJ2RhdGFPYmplY3QgdmFsdWUgdG8gZGVjcnlwdDogJywgZGF0YU9iamVjdCk7CnIuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKHQpe3Q9KDAsbC5jaGF0a2V5c1RvQXJyYXlDbG9uZXIpKHQpO3ZhciBzPXQ/dFtpXTpudWxsO2lmKCFzKXJldHVybiBvKCJObyBkYXRhT2JqZWN0S2V5IGZvciB0aGlzIGRhdGFPYmplY3RVUkw6IixpKTsKLy9jaGVjayBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uCmlmKCFzLmlzVG9FbmNyeXB0KQovLyBsb2cubG9nKCdUaGUgZGF0YU9iamVjdCBpcyBub3QgZW5jcnlwdGVkJyk7CnJldHVybiBuKGUpO3ZhciBhPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShlLml2KSx1PSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShlLnZhbHVlKTtyLmNyeXB0by5kZWNyeXB0QUVTKHMuc2Vzc2lvbktleSx1LGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9KDAsbC5wYXJzZSkoZSkscj17dmFsdWU6dCxpdjooMCxsLmVuY29kZSkoYSl9OwovLyBsb2cubG9nKCdkZWNyeXB0ZWQgZGF0YU9iamVjdCwnLCBuZXdWYWx1ZSk7CnJldHVybiBuKHIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gZGVjcnlwdERhdGFPYmplY3QgZnJvbSBtZXRob2QgZW5jcnlwdEFFUyBlcnJvcjogIitlKX0pfSl9KX19LHtrZXk6Il9kb011dHVhbEF1dGhlbnRpY2F0aW9uUGhhc2UxIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89ZS50by5zcGxpdCgiLyIpOwovL2xldCBzdWJzSW5kZXggPSB0by5pbmRleE9mKCdzdWJzY3JpcHRpb24nKTsKLy9sZXQgaXNEYXRhT2JqZWN0U3Vic2NyaXB0aW9uID0gc3Vic0luZGV4ICE9PSAtMTsKby5wb3AoKTt2YXIgaT1vWzBdKyIvLyIrb1syXSsiLyIrb1szXTt0Ll9kb011dHVhbEF1dGhlbnRpY2F0aW9uUGhhc2UyKGksZS5ib2R5LnN1YnNjcmliZXIpLnRoZW4oZnVuY3Rpb24oKXt0Ll9yZWdpc3RyeS5yZWdpc3RlclN1YnNjcmliZXIoaSxlLmJvZHkuc3Vic2NyaWJlcikscigpfSxmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6Il9kb011dHVhbEF1dGhlbnRpY2F0aW9uUGhhc2UyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3kuaW5mbygiZG9NdXR1YWxBdXRoZW50aWNhdGlvbjpzZW5kZXIgIixlKSx5LmluZm8oImRvTXV0dWFsQXV0aGVudGljYXRpb246cmVjZWl2ZXIgIix0KTt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9dm9pZCAwLHM9ci5fcmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKGUpO3MmJihpPWUsZT1zKTt2YXIgYT17dG86dCxmcm9tOmUsY2FsbGJhY2s6dm9pZCAwLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzdGFydEhhbmRTaGFrZSIsaWdub3JlOiJpZ25vcmVNZXNzYWdlIn19O2lmKCFlfHwhdClyZXR1cm4gbygic2VuZGVyIG9yIHJlY2VpdmVyIG1pc3Npbmcgb24gZG9NdXR1YWxBdXRoZW50aWNhdGlvbiIpO3ZhciB1PXIuY2hhdEtleXNbZSsiPC0+Iit0XSxjPXIuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlKTtpZihjKXtpZighdSl7Ci8vIGNhbGxiYWNrIHRvIHJlc29sdmUgd2hlbiBmaW5pc2ggdGhlIG11dHVhbCBhdXRoZW50aWNhdGlvbgp2YXIgZj1mdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY2FsbGJhY2sgdmFsdWU6JywgdmFsdWUpOwpuKGUpfTthLmNhbGxiYWNrPWYsYS5kYXRhT2JqZWN0VVJMPWksdT1yLl9uZXdDaGF0Q3J5cHRvKGEsYyksci5jaGF0S2V5c1tlKyI8LT4iK3RdPXV9aWYodS5hdXRoZW50aWNhdGVkKXt2YXIgbD17dG86ZSxmcm9tOnR9O3UuZGF0YU9iamVjdFVSTD1pLHIuX3NlbmRSZXBvcnRlclNlc3Npb25LZXkobCx1KS50aGVuKGZ1bmN0aW9uKGUpe3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZS5tZXNzYWdlKSxuKCJleGNoYW5nZSBvZiBjaGF0IHNlc3Npb25LZXkgaW5pdGlhdGVkIil9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBkb011dHVhbEF1dGhlbnRpY2F0aW9uIGZyb20gbWV0aG9kIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGVycm9yOiAiK2UpfSl9ZWxzZSByLl9kb0hhbmRTaGFrZVBoYXNlKGEsdSl9ZWxzZSBvKCJNdXR1YWwgYXV0aGVudGljYXRpb24gZXJyb3I6IEh5cGVydHkgb3duZXIgY291bGQgbm90IGJlIHJlc29sdmVkIil9KX19LHtrZXk6Il9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1yLmRhdGFPYmplY3RTZXNzaW9uS2V5c1t0LmRhdGFPYmplY3RVUkxdLHM9dm9pZCAwLGE9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGY9e307Ci8vaWYgdGhlcmUgaXMgbm90IHlldCBhIHNlc3Npb24gS2V5LCBnZW5lcmF0ZXMgYSBuZXcgb25lCmlmKGkpdT1pLnNlc3Npb25LZXk7ZWxzZXt1PXIuY3J5cHRvLmdlbmVyYXRlUmFuZG9tKCksci5kYXRhT2JqZWN0U2Vzc2lvbktleXNbdC5kYXRhT2JqZWN0VVJMXT17c2Vzc2lvbktleTp1LGlzVG9FbmNyeXB0OiEwfTt2YXIgZD0oMCxsLmNoYXRrZXlzVG9TdHJpbmdDbG9uZXIpKHIuZGF0YU9iamVjdFNlc3Npb25LZXlzKTtyLnN0b3JhZ2VNYW5hZ2VyLnNldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIiwwLGQpLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLnNldChkYXRhT2JqZWN0U2Vzc2lvbktleXMuLi4pIGVycm9yOiAiK2UpfSl9dHJ5e2E9KDAsbC5lbmNvZGUpKHt2YWx1ZTooMCxsLmVuY29kZSkodSksZGF0YU9iamVjdFVSTDp0LmRhdGFPYmplY3RVUkx9KX1jYXRjaChlKXtyZXR1cm4gbygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBtZXRob2Qgc3RvcmFnZU1hbmFnZXIuc2V0IGVycm9yIHZhbHVlVG9FbmNyeXB0OiAiK2UpfWM9ci5jcnlwdG8uZ2VuZXJhdGVJVigpLGYuaXY9KDAsbC5lbmNvZGUpKGMpLHIuY3J5cHRvLmVuY3J5cHRBRVModC5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleSxhLGMpLnRoZW4oZnVuY3Rpb24obil7cz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJyZXBvcnRlclNlc3Npb25LZXkiLHZhbHVlOigwLGwuZW5jb2RlKShuKX19O3ZhciBvPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2gocyxhK2MsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7cmV0dXJuIHIuY3J5cHRvLmhhc2hITUFDKHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksbyl9KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciByPSgwLGwuZW5jb2RlKSh7dmFsdWU6cy5ib2R5LnZhbHVlLGhhc2g6KDAsbC5lbmNvZGUpKGUpLGl2OmYuaXZ9KTtzLmJvZHkudmFsdWU9cixuKHttZXNzYWdlOnMsY2hhdEtleXM6dH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBjaGFpbmVkIHByb21pc2VzIGVuY3J5cHRBRVMgZXJyb3I6ICIrZSl9KX0pfX0se2tleToiX3Jlc29sdmVEb21haW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyJkb21haW4taWRwOi8vIitlOiJkb21haW4taWRwOi8vZ29vZ2xlLmNvbSJ9fSx7a2V5OiJfZG9IYW5kU2hha2VQaGFzZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXsKLy8gbG9nKCdfZG9IYW5kU2hha2VQaGFzZTpkYXRhT2JqZWN0JywgbWVzc2FnZSk7Ci8vCWxvZygnX2RvSGFuZFNoYWtlUGhhc2U6Y2hhdEtleXMnLCBjaGF0S2V5cyk7CnZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1lLmJvZHkuaGFuZHNoYWtlUGhhc2Uscz12b2lkIDAsYT12b2lkIDAsdT17fSxjPXZvaWQgMCxmPXZvaWQgMDtzd2l0Y2goeS5pbmZvKCJoYW5kc2hha2UgcGhhc2U6ICIsaSksaSl7Y2FzZSJzdGFydEhhbmRTaGFrZSI6dC5rZXlzLmZyb21SYW5kb209ci5jcnlwdG8uZ2VuZXJhdGVSYW5kb20oKTt2YXIgZD17dHlwZToiaGFuZHNoYWtlIix0bzplLnRvLGZyb206ZS5mcm9tLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzZW5kZXJIZWxsbyIsdmFsdWU6KDAsbC5lbmNvZGUpKHQua2V5cy5mcm9tUmFuZG9tKX19O3QuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGQsdm9pZCAwLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLAovLyBjaGVjayBpZiB3YXMgdGhlIGVuY3J5cHQgZnVuY3Rpb24gb3IgdGhlIG11dHVhbCBhdXRoZW50aWNhdGlvbiB0aGF0IHJlcXVlc3QgdGhlCi8vIHN0YXJ0IG9mIHRoZSBoYW5kU2hha2VQaGFzZS4KdC5pbml0aWFsTWVzc2FnZT9uKHttZXNzYWdlOmQsY2hhdEtleXM6dH0pOihyLmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXT10LHIuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZCkpO2JyZWFrO2Nhc2Uic2VuZGVySGVsbG8iOnkubG9nKCJzZW5kZXJIZWxsbyIpLHQuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUpLHQua2V5cy5mcm9tUmFuZG9tPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShlLmJvZHkudmFsdWUpLHQua2V5cy50b1JhbmRvbT1yLmNyeXB0by5nZW5lcmF0ZVJhbmRvbSgpO3ZhciBwPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVySGVsbG8iLHZhbHVlOigwLGwuZW5jb2RlKSh0LmtleXMudG9SYW5kb20pfX07dC5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVySGVsbG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChwLHZvaWQgMCx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSxuKHttZXNzYWdlOnAsY2hhdEtleXM6dH0pO2JyZWFrO2Nhc2UicmVjZWl2ZXJIZWxsbyI6eS5sb2coInJlY2VpdmVySGVsbG8iKSxyLmdldE15UHJpdmF0ZUtleSgpLnRoZW4oZnVuY3Rpb24obil7cmV0dXJuIGY9bix0LmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUpLHIuX2lkbS52YWxpZGF0ZUFzc2VydGlvbihlLmJvZHkuaWRlbnRpdHkuYXNzZXJ0aW9uLHZvaWQgMCxlLmJvZHkuaWRlbnRpdHkuaWRwLmRvbWFpbil9KS50aGVuKGZ1bmN0aW9uKG4pewovL1RPRE8gcmVtb3ZlIGxhdGVyIHRoaXMgdmVyaWZpY2F0aW9uIGFzIHNvb24gYXMgYWxsIHRoZSBJZFAgcHJveHkgYXJlIHVwZGF0ZWQgaW4gdGhlIGV4YW1wbGUKdmFyIG89InN0cmluZyI9PXR5cGVvZiBuLmNvbnRlbnRzP24uY29udGVudHM6bi5jb250ZW50cy5ub25jZSxpPSgwLGwucGFyc2VUb1VpbnQ4QXJyYXkpKG8pLHM9ci5jcnlwdG8uZ2VuZXJhdGVQTVMoKSxhPWUuYm9keS52YWx1ZTt0Lmh5cGVydHlUby5hc3NlcnRpb249ZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix0Lmh5cGVydHlUby5wdWJsaWNLZXk9aSx0Lmh5cGVydHlUby51c2VySUQ9ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsdC5rZXlzLnRvUmFuZG9tPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhKSx0LmtleXMucHJlbWFzdGVyS2V5PXM7dmFyIHU9ci5jcnlwdG8uY29uY2F0UE1Td2l0aFJhbmRvbXMocyx0LmtleXMudG9SYW5kb20sdC5rZXlzLmZyb21SYW5kb20pO3JldHVybiByLmNyeXB0by5nZW5lcmF0ZU1hc3RlclNlY3JldCh1LCJtZXNzYWdlSGlzdG9yaWMiK3Qua2V5cy50b1JhbmRvbSt0LmtleXMuZnJvbVJhbmRvbSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmtleXMubWFzdGVyS2V5PWUsci5jcnlwdG8uZ2VuZXJhdGVLZXlzKGUsImtleSBleHBhbnNpb24iK3Qua2V5cy50b1JhbmRvbSt0LmtleXMuZnJvbVJhbmRvbSl9KS50aGVuKGZ1bmN0aW9uKG4pe3Qua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KG5bMF0pLHQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoblsxXSksdC5rZXlzLmh5cGVydHlUb0hhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoblsyXSksdC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleT1uZXcgVWludDhBcnJheShuWzNdKSxzPXIuY3J5cHRvLmdlbmVyYXRlSVYoKSx1Lml2PSgwLGwuZW5jb2RlKShzKTt2YXIgbz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzZW5kZXJDZXJ0aWZpY2F0ZSJ9fTsKLy8gaGFzaCB0aGUgdmFsdWUgYW5kIHRoZSBpdgpyZXR1cm4gYz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKG8sIm9rIitzLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLHIuY3J5cHRvLmhhc2hITUFDKHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksYyl9KS50aGVuKGZ1bmN0aW9uKGUpewovL2VuY3J5cHQgdGhlIGRhdGEKcmV0dXJuIHUuaGFzaD0oMCxsLmVuY29kZSkoZSksci5jcnlwdG8uZW5jcnlwdEFFUyh0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LCJvayIscyl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB1LnN5bWV0cmljRW5jcnlwdGlvbj0oMCxsLmVuY29kZSkoZSksci5jcnlwdG8uZW5jcnlwdFJTQSh0Lmh5cGVydHlUby5wdWJsaWNLZXksdC5rZXlzLnByZW1hc3RlcktleSl9KS50aGVuKGZ1bmN0aW9uKG4pe3UuYXNzeW1ldHJpY0VuY3J5cHRpb249KDAsbC5lbmNvZGUpKG4pO3ZhciBvPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InNlbmRlckNlcnRpZmljYXRlIn19LGk9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChvLHQua2V5cy5wcmVtYXN0ZXJLZXksdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7cmV0dXJuIHIuY3J5cHRvLnNpZ25SU0EoZiwoMCxsLmVuY29kZSkodC5oYW5kc2hha2VIaXN0b3J5KSsoMCxsLmVuY29kZSkoaSkpfSkudGhlbihmdW5jdGlvbihvKXt1LnNpZ25hdHVyZT0oMCxsLmVuY29kZSkobyk7dmFyIGk9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToic2VuZGVyQ2VydGlmaWNhdGUiLHZhbHVlOigwLGwuZW5jb2RlKSh1KX19O3QuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJDZXJ0aWZpY2F0ZT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGksIm9rIitzLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLG4oe21lc3NhZ2U6aSxjaGF0S2V5czp0fSl9LGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSk7YnJlYWs7Y2FzZSJzZW5kZXJDZXJ0aWZpY2F0ZSI6eS5sb2coInNlbmRlckNlcnRpZmljYXRlIik7dmFyIGg9KDAsbC5kZWNvZGUpKGUuYm9keS52YWx1ZSk7ci5nZXRNeVByaXZhdGVLZXkoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBmPXQsci5faWRtLnZhbGlkYXRlQXNzZXJ0aW9uKGUuYm9keS5pZGVudGl0eS5hc3NlcnRpb24sdm9pZCAwLGUuYm9keS5pZGVudGl0eS5pZHAuZG9tYWluKX0pLnRoZW4oZnVuY3Rpb24obil7dmFyIG89KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGguYXNzeW1ldHJpY0VuY3J5cHRpb24pLGk9InN0cmluZyI9PXR5cGVvZiBuLmNvbnRlbnRzP24uY29udGVudHM6bi5jb250ZW50cy5ub25jZSxzPSgwLGwucGFyc2VUb1VpbnQ4QXJyYXkpKGkpO3JldHVybiB0Lmh5cGVydHlUby5hc3NlcnRpb249ZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix0Lmh5cGVydHlUby5wdWJsaWNLZXk9cyx0Lmh5cGVydHlUby51c2VySUQ9ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsci5jcnlwdG8uZGVjcnlwdFJTQShmLG8pfSxmdW5jdGlvbihlKXsKLy8gbG9nLmxvZyhlcnJvcik7Cm8oIkVycm9yIGR1cmluZyBhdXRoZW50aWNhdGlvbiBvZiBpZGVudGl0eTogIixlLm1lc3NhZ2UpfSkudGhlbihmdW5jdGlvbihuKXt0LmtleXMucHJlbWFzdGVyS2V5PW5ldyBVaW50OEFycmF5KG4pO3ZhciBvPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShoLnNpZ25hdHVyZSksaT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsdC5rZXlzLnByZW1hc3RlcktleSk7cmV0dXJuIHIuY3J5cHRvLnZlcmlmeVJTQSh0Lmh5cGVydHlUby5wdWJsaWNLZXksKDAsbC5lbmNvZGUpKHQuaGFuZHNoYWtlSGlzdG9yeSkrKDAsbC5lbmNvZGUpKGkpLG8pfSkudGhlbihmdW5jdGlvbihlKXsKLy9sb2cubG9nKCdTZW5kZXJDZXJ0aWZpY2F0ZSAtIHNpZ25hdHVyZSB2YWxpZGF0aW9uIHJlc3VsdCAnLCBzaWduVmFsaWRhdGlvblJlc3VsdCk7CnZhciBuPXIuY3J5cHRvLmNvbmNhdFBNU3dpdGhSYW5kb21zKHQua2V5cy5wcmVtYXN0ZXJLZXksdC5rZXlzLnRvUmFuZG9tLHQua2V5cy5mcm9tUmFuZG9tKTtyZXR1cm4gci5jcnlwdG8uZ2VuZXJhdGVNYXN0ZXJTZWNyZXQobiwibWVzc2FnZUhpc3RvcmljIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5rZXlzLm1hc3RlcktleT1lLHIuY3J5cHRvLmdlbmVyYXRlS2V5cyhlLCJrZXkgZXhwYW5zaW9uIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihlKXt0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KGVbMF0pLHQua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KGVbMV0pLHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoZVsyXSksdC5rZXlzLmh5cGVydHlUb0hhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoZVszXSkscz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoaC5pdik7dmFyIG49KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGguc3ltZXRyaWNFbmNyeXB0aW9uKTtyZXR1cm4gci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxuLHMpfSkudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygnZGVjcnlwdGVkRGF0YScsIGRlY3J5cHRlZERhdGEpOwp0LmhhbmRzaGFrZUhpc3Rvcnkuc2VuZGVyQ2VydGlmaWNhdGU9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7dmFyIG89KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGguaGFzaCk7cmV0dXJuIGM9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyksci5jcnlwdG8udmVyaWZ5SE1BQyh0LmtleXMuaHlwZXJ0eVRvSGFzaEtleSxjLG8pfSkudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIGhhc2ggdmVyaWZpY2F0aW9uICcsIHZlcmlmaWVkSGFzaCk7CnZhciBvPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVyRmluaXNoZWRNZXNzYWdlIn19OwovL2xvZy5sb2coJ1RJQUdPOiBkb0hhbmRTaGFrZVBoYXNlIHZlcmlmaWVkSGFzaCcpOwpyZXR1cm4gcz1yLmNyeXB0by5nZW5lcmF0ZUlWKCksdS5pdj0oMCxsLmVuY29kZSkocyksYz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKG8sIm9rISIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSxyLmNyeXB0by5oYXNoSE1BQyh0LmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5LGMpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdS5oYXNoPSgwLGwuZW5jb2RlKShlKSxyLmNyeXB0by5lbmNyeXB0QUVTKHQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksIm9rISIscyl9KS50aGVuKGZ1bmN0aW9uKG8pe3UudmFsdWU9KDAsbC5lbmNvZGUpKG8pO3ZhciBpPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVyRmluaXNoZWRNZXNzYWdlIix2YWx1ZTooMCxsLmVuY29kZSkodSl9fTt0LmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2U9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChpLCJvayEiK3MsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyksdC5hdXRoZW50aWNhdGVkPSEwLG4oe21lc3NhZ2U6aSxjaGF0S2V5czp0fSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfZG9IYW5kU2hha2VQaGFzZSBmcm9tIHNlbmRlckNlcnRpZmljYXRlIGVycm9yOiAiK2UpfSk7YnJlYWs7Y2FzZSJyZWNlaXZlckZpbmlzaGVkTWVzc2FnZSI6dC5hdXRoZW50aWNhdGVkPSEwLHU9KDAsbC5kZWNvZGUpKGUuYm9keS52YWx1ZSkscz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkodS5pdik7dmFyIHY9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHUudmFsdWUpO2E9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHUuaGFzaCksci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSx2LHMpLnRoZW4oZnVuY3Rpb24oaSl7Ci8vIGxvZy5sb2coJ2RlY3J5cHRlZERhdGEnLCBkZWNyeXB0ZWREYXRhKTsKdC5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVyRmluaXNoZWRNZXNzYWdlPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxpK3MpO3ZhciB1PXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxpK3MpO3IuY3J5cHRvLnZlcmlmeUhNQUModC5rZXlzLmh5cGVydHlUb0hhc2hLZXksdSxhKS50aGVuKGZ1bmN0aW9uKGkpewovLyBjaGVjayBpZiB0aGVyZSB3YXMgYW4gaW5pdGlhbCBtZXNzYWdlIHRoYXQgd2FzIGJsb2NrZWQgYW5kIHNlbmQgaXQKaWYodC5pbml0aWFsTWVzc2FnZSl7dmFyIHM9e3R5cGU6ImNyZWF0ZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5Ont2YWx1ZTp0LmluaXRpYWxNZXNzYWdlLmJvZHkudmFsdWV9fTtuKHttZXNzYWdlOnMsY2hhdEtleXM6dH0pfWVsc2Ugci5fc2VuZFJlcG9ydGVyU2Vzc2lvbktleShlLHQpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIF9kb0hhbmRTaGFrZVBoYXNlIGZyb20gcmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UgZXJyb3I6ICIrZSl9KX0pfSk7YnJlYWs7Y2FzZSJyZXBvcnRlclNlc3Npb25LZXkiOnkubG9nKCJyZXBvcnRlclNlc3Npb25LZXkiKTt2YXIgZz0oMCxsLmRlY29kZSkoZS5ib2R5LnZhbHVlKTthPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShnLmhhc2gpLHM9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGcuaXYpO3ZhciBiPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShnLnZhbHVlKSxfPXZvaWQgMCxtPXZvaWQgMCxSPXZvaWQgMCx3PXZvaWQgMDsKLy9sb2cubG9nKCdbSWRlbnRpdHlNb2R1bGUgcmVwb3J0ZXJTZXNzaW9uS2V5XSAtIGRlY3J5cHRBRVM6ICcsIGNoYXRLZXlzLmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSwgZW5jcnlwdGVkVmFsdWUsIGl2KTsKci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxiLHMpLnRoZW4oZnVuY3Rpb24obil7Xz0oMCxsLmRlY29kZSkobiksbT0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoXy52YWx1ZSksUj1fLmRhdGFPYmplY3RVUkw7dmFyIG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7cmV0dXJuIHIuY3J5cHRvLnZlcmlmeUhNQUModC5rZXlzLmh5cGVydHlUb0hhc2hLZXksbyxhKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2hhc2ggc3VjY2Vzc2Z1bGx5IHZhbGlkYXRlZCAnLCBoYXNoUmVzdWx0KTsKci5kYXRhT2JqZWN0U2Vzc2lvbktleXNbUl09e3Nlc3Npb25LZXk6bSxpc1RvRW5jcnlwdDohMH07dmFyIG49KDAsbC5jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyKShyLmRhdGFPYmplY3RTZXNzaW9uS2V5cyk7cmV0dXJuIHIuc3RvcmFnZU1hbmFnZXIuc2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiLDAsbikuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBtZXRob2QgcmVwb3J0ZXJTZXNzaW9uS2V5IGVycm9yOiAiK2UpfSkscz1yLmNyeXB0by5nZW5lcmF0ZUlWKCksdS5pdj0oMCxsLmVuY29kZSkocyksci5jcnlwdG8uZW5jcnlwdEFFUyh0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LCJvayEhIixzKX0pLnRoZW4oZnVuY3Rpb24obil7dz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJyZWNlaXZlckFja25vd2xlZGdlIn19LHUudmFsdWU9KDAsbC5lbmNvZGUpKG4pO3ZhciBvPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2godywib2shISIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKTtyZXR1cm4gci5jcnlwdG8uaGFzaEhNQUModC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleSxvKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHI9KDAsbC5lbmNvZGUpKHt2YWx1ZTp1LnZhbHVlLGhhc2g6KDAsbC5lbmNvZGUpKGUpLGl2OnUuaXZ9KTt3LmJvZHkudmFsdWU9cixuKHttZXNzYWdlOncsY2hhdEtleXM6dH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX2RvSGFuZFNoYWtlUGhhc2UgZnJvbSByZXBvcnRlclNlc3Npb25LZXkgZXJyb3I6ICIrZSl9KTticmVhaztjYXNlInJlY2VpdmVyQWNrbm93bGVkZ2UiOnkubG9nKCJyZWNlaXZlckFja25vd2xlZGdlIik7dmFyIFM9KDAsbC5kZWNvZGUpKGUuYm9keS52YWx1ZSksaz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoUy5oYXNoKTtzPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShTLml2KTt2YXIgTz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoUy52YWx1ZSk7ci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxPLHMpLnRoZW4oZnVuY3Rpb24obil7dmFyIG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7cmV0dXJuIHIuY3J5cHRvLnZlcmlmeUhNQUModC5rZXlzLmh5cGVydHlUb0hhc2hLZXksbyxrKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2hhc2hSZXN1bHQgJywgaGFzaFJlc3VsdCk7CnZhciByPXQuY2FsbGJhY2s7ciYmcigiaGFuZFNoYWtlRW5kIiksbigiaGFuZFNoYWtlRW5kIil9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfZG9IYW5kU2hha2VQaGFzZSBmcm9tIHJlY2VpdmVyQWNrbm93bGVkZ2UgZXJyb3I6ICIrZSl9KTticmVhaztkZWZhdWx0Om8oZSl9fSl9fSx7a2V5OiJfZmlsdGVyTWVzc2FnZVRvSGFzaCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybnt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx0bzplLnRvLGJvZHk6e2lkZW50aXR5OnJ8fGUuYm9keS5pZGVudGl0eSx2YWx1ZTp0fHxlLmJvZHkudmFsdWUsaGFuZHNoYWtlUGhhc2U6ZS5ib2R5LmhhbmRzaGFrZVBoYXNlfX19fSx7a2V5OiJfbmV3Q2hhdENyeXB0byIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz1yP2UudG86ZS5mcm9tLGk9cj9lLmZyb206ZS50byxzPW4uX2lkbS5nZXRJZGVudGl0eSh0KTtyZXR1cm57aHlwZXJ0eUZyb206e2h5cGVydHk6byx1c2VySUQ6cy51c2VyUHJvZmlsZS51c2VyVVJMLAovL3ByaXZhdGVLZXk6ICJnZXRNeVB1YmxpY0tleSIsCi8vcHVibGljS2V5OiAiZ2V0TXlQcml2YXRlS2V5IiwKYXNzZXJ0aW9uOnMuYXNzZXJ0aW9uLG1lc3NhZ2VJbmZvOnN9LGh5cGVydHlUbzp7aHlwZXJ0eTppLHVzZXJJRDp2b2lkIDAscHVibGljS2V5OnZvaWQgMCxhc3NlcnRpb246dm9pZCAwfSxrZXlzOntoeXBlcnR5VG9TZXNzaW9uS2V5OnZvaWQgMCxoeXBlcnR5RnJvbVNlc3Npb25LZXk6dm9pZCAwLGh5cGVydHlUb0hhc2hLZXk6dm9pZCAwLGh5cGVydHlGcm9tSGFzaEtleTp2b2lkIDAsdG9SYW5kb206dm9pZCAwLGZyb21SYW5kb206dm9pZCAwLHByZW1hc3RlcktleTp2b2lkIDAsbWFzdGVyS2V5OnZvaWQgMH0saGFuZHNoYWtlSGlzdG9yeTp7c2VuZGVySGVsbG86dm9pZCAwLHJlY2VpdmVySGVsbG86dm9pZCAwLHNlbmRlckNlcnRpZmljYXRlOnZvaWQgMCxyZWNlaXZlckZpbmlzaGVkTWVzc2FnZTp2b2lkIDB9LGluaXRpYWxNZXNzYWdlOmUuYm9keS5pZ25vcmU/dm9pZCAwOmUsY2FsbGJhY2s6ZS5jYWxsYmFjayxhdXRoZW50aWNhdGVkOiExLGRhdGFPYmplY3RVUkw6ZS5kYXRhT2JqZWN0VVJMfX19LHtrZXk6ImdldE15UHVibGljS2V5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLnVzZXJEZWZhdWx0S2V5UmVmLHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3Quc3RvcmFnZU1hbmFnZXIuZ2V0KGUpLnRoZW4oZnVuY3Rpb24obyl7aWYobylyZXR1cm4gcihvLnB1YmxpYyk7dC5fZ2VuZXJhdGVBbmRTdG9yZU5ld0FzeW1ldHJpY0tleShlKS50aGVuKGZ1bmN0aW9uKGUpe3IoZS5wdWJsaWMpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcigiW2dldE15UHVibGljS2V5Ol9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OmVycl06ICIrZS5tZXNzYWdlKSxuKGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJbZ2V0TXlQdWJsaWNLZXk6c3RvcmFnZU1hbmFnZXI6ZXJyXTogIitlLm1lc3NhZ2UpLG4oZSl9KX0pfX0se2tleToiZ2V0TXlQcml2YXRlS2V5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLnVzZXJEZWZhdWx0S2V5UmVmLHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3Quc3RvcmFnZU1hbmFnZXIuZ2V0KGUpLnRoZW4oZnVuY3Rpb24obyl7aWYobylyZXR1cm4gcihvLnByaXZhdGUpO3QuX2dlbmVyYXRlQW5kU3RvcmVOZXdBc3ltZXRyaWNLZXkoZSkudGhlbihmdW5jdGlvbihlKXtyKGUucHJpdmF0ZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJbZ2V0TXlQcml2YXRlS2V5Ol9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OmVycl06ICIrZS5tZXNzYWdlKSxuKGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJbZ2V0TXlQcml2YXRlS2V5OnN0b3JhZ2VNYW5hZ2VyOmVycl06ICIrZS5tZXNzYWdlKSxuKGUpfSl9KX19LHtrZXk6Il9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dm9pZCAwO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dC5jcnlwdG8uZ2VuZXJhdGVSU0FLZXlQYWlyKCkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4geS5sb2coIl9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OnVzZXJBc3ltbWV0cmljS2V5R2VuZXJhdGVkIixuKSxyPW4sdC5zdG9yYWdlTWFuYWdlci5zZXQoZSwwLG4pfSkudGhlbihmdW5jdGlvbihlKXt5LmxvZygiX2dlbmVyYXRlQW5kU3RvcmVOZXdBc3ltZXRyaWNLZXk6dXNlckFzeW1tZXRyaWNLZXlTdWNjZXNzIixlKSxuKHIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcigiW19nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OmVycl06ICIrZS5tZXNzYWdlKSxvKGUpfSl9KX19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9tZXNzYWdlQnVzPWUsdC5hZGRDcnlwdG9HVUlMaXN0ZW5lcnMoKX19LHtrZXk6ImNvcmVEaXNjb3ZlcnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlRGlzY292ZXJ5fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29yZURpc2NvdmVyeT1lfX0se2tleToicmVnaXN0cnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWdpc3RyeX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3JlZ2lzdHJ5PWV9fV0pLENyeXB0b01hbmFnZXJ9KCk7LyoKY29uc3Qgbm9kZUpTS2V5UGFpclBvcHVsYXRlID0geyBwdWJsaWM6IFs0OCwgMTMwLCAxLCAzNCwgNDgsIDEzLCA2LCA5LCA0MiwgMTM0LCA3MiwgMTM0LCAyNDcsIDEzLCAxLCAxLCAxLCA1LCAwLCAzLCAxMzAsIDEsIDE1LCAwLCA0OCwgMTMwLCAxLCAxMCwgMiwgMTMwLCAxLCAxLCAwLCAyMjgsIDQzLCAxMDEsIDEyLCAxMjEsIDcsIDE1NywgNzEsIDgxLCA1OCwgMjE5LCAzMiwgMTAsIDEwOCwgMTkzLCAxNzksIDIxMiwgMTE2LCAyNTUsIDU5LCAyMTcsIDMyLCAxNjEsIDIwMSwgNTMsIDE3MSwgMjI2LCAxOTksIDEzNywgMjAyLCAxNzEsIDYwLCA4MiwgNTMsIDEyNSwgNjIsIDE3NywgMTI2LCAxNjUsIDI0LCAxNDEsIDMwLCAxNSwgMjI2LCA1OSwgMTA3LCAzNCwgNywgMTMsIDE0OSwgMTEyLCAxMjUsIDEwLCAyMzAsIDE5MSwgMTU2LCAxNjQsIDE3NywgMTAsIDE4NSwgMTMsIDY2LCAzLCAyMTcsIDE2NiwgMjQ0LCA5MCwgMTE5LCAxMTEsIDI3LCAxNDUsIDEwNCwgNzEsIDE4OSwgMTY2LCAyMjYsIDI1NSwgMTMzLCA4MywgMTUxLCAyMzEsIDEwMSwgMTUxLCA4OSwgMjIsIDE5LCA2NSwgMTU0LCAxMCwgNTMsIDIwOCwgMjE4LCAyNTIsIDIxOSwgMzcsIDUwLCAyMTIsIDg2LCAxNDUsIDEwNywgMTMyLCA5MCwgMjMzLCAyMDIsIDIyNywgMTA4LCAxMTQsIDE0MSwgMjksIDczLCAxODcsIDMxLCAxMywgMjM0LCAwLCAyMzIsIDI0LCAxOTEsIDM1LCAxNDksIDE3OSwgMTM4LCAyMTQsIDE1OSwgMjQ1LCAxNjIsIDE0OCwgMjIxLCAxMTgsIDE3LCAxMDUsIDg5LCAxNTEsIDE0NiwgMjA5LCA1NSwgMjM2LCA2MSwgMTQzLCAyMzMsIDIyOCwgMTAsIDExNSwgOCwgODEsIDE5NywgNDUsIDEyMywgMTg3LCAyMjMsIDE3NiwgMjU0LCAxNjUsIDY5LCAxNDMsIDI5LCAxMDAsIDExNCwgMTcsIDEzMCwgMjI2LCAyMjMsIDMzLCAxMSwgMjQwLCA4MSwgNjEsIDE3MiwgMTkxLCAxNTcsIDI0NiwgMjAyLCA4NywgMTMxLCAyMjEsIDg4LCA0OCwgMTI3LCAxNTksIDExOSwgMTYwLCAxNTIsIDExNywgNjEsIDI1MywgMTc0LCA2NSwgMjE0LCAyMDMsIDIxOCwgNjMsIDUwLCA3OCwgMTYwLCAxODEsIDIyMSwgMjExLCAxMjgsIDcwLCAxNzgsIDE5MSwgMTcwLCAwLCAxMywgMTIyLCAxNzMsIDEyLCAyMDMsIDI1MiwgNCwgMTg0LCAyMjUsIDI1MiwgNywgNjIsIDk2LCAxMTYsIDE1LCAyMTYsIDE1OCwgNTUsIDg1LCA0OCwgMTYsIDksIDIwNiwgMTE5LCA3NCwgMTEyLCAyNDMsIDEzNiwgODQsIDE4NCwgMjIzLCAyNTQsIDEwMSwgOTEsIDYxLCAxMCwgOTEsIDg1LCAxOTIsIDE0NywgMTQ0LCA1NywgMjksIDY2LCAyMzgsIDE5OSwgMjQ0LCAxOTMsIDE5NCwgMTUwLCAyMzIsIDIwMCwgMTA3LCAyLCAzLCAxLCAwLCAxXSwKICBwcml2YXRlOiBbNDgsIDEzMCwgNCwgMTkxLCAyLCAxLCAwLCA0OCwgMTMsIDYsIDksIDQyLCAxMzQsIDcyLCAxMzQsIDI0NywgMTMsIDEsIDEsIDEsIDUsIDAsIDQsIDEzMCwgNCwgMTY5LCA0OCwgMTMwLCA0LCAxNjUsIDIsIDEsIDAsIDIsIDEzMCwgMSwgMSwgMCwgMjI4LCA0MywgMTAxLCAxMiwgMTIxLCA3LCAxNTcsIDcxLCA4MSwgNTgsIDIxOSwgMzIsIDEwLCAxMDgsIDE5MywgMTc5LCAyMTIsIDExNiwgMjU1LCA1OSwgMjE3LCAzMiwgMTYxLCAyMDEsIDUzLCAxNzEsIDIyNiwgMTk5LCAxMzcsIDIwMiwgMTcxLCA2MCwgODIsIDUzLCAxMjUsIDYyLCAxNzcsIDEyNiwgMTY1LCAyNCwgMTQxLCAzMCwgMTUsIDIyNiwgNTksIDEwNywgMzQsIDcsIDEzLCAxNDksIDExMiwgMTI1LCAxMCwgMjMwLCAxOTEsIDE1NiwgMTY0LCAxNzcsIDEwLCAxODUsIDEzLCA2NiwgMywgMjE3LCAxNjYsIDI0NCwgOTAsIDExOSwgMTExLCAyNywgMTQ1LCAxMDQsIDcxLCAxODksIDE2NiwgMjI2LCAyNTUsIDEzMywgODMsIDE1MSwgMjMxLCAxMDEsIDE1MSwgODksIDIyLCAxOSwgNjUsIDE1NCwgMTAsIDUzLCAyMDgsIDIxOCwgMjUyLCAyMTksIDM3LCA1MCwgMjEyLCA4NiwgMTQ1LCAxMDcsIDEzMiwgOTAsIDIzMywgMjAyLCAyMjcsIDEwOCwgMTE0LCAxNDEsIDI5LCA3MywgMTg3LCAzMSwgMTMsIDIzNCwgMCwgMjMyLCAyNCwgMTkxLCAzNSwgMTQ5LCAxNzksIDEzOCwgMjE0LCAxNTksIDI0NSwgMTYyLCAxNDgsIDIyMSwgMTE4LCAxNywgMTA1LCA4OSwgMTUxLCAxNDYsIDIwOSwgNTUsIDIzNiwgNjEsIDE0MywgMjMzLCAyMjgsIDEwLCAxMTUsIDgsIDgxLCAxOTcsIDQ1LCAxMjMsIDE4NywgMjIzLCAxNzYsIDI1NCwgMTY1LCA2OSwgMTQzLCAyOSwgMTAwLCAxMTQsIDE3LCAxMzAsIDIyNiwgMjIzLCAzMywgMTEsIDI0MCwgODEsIDYxLCAxNzIsIDE5MSwgMTU3LCAyNDYsIDIwMiwgODcsIDEzMSwgMjIxLCA4OCwgNDgsIDEyNywgMTU5LCAxMTksIDE2MCwgMTUyLCAxMTcsIDYxLCAyNTMsIDE3NCwgNjUsIDIxNCwgMjAzLCAyMTgsIDYzLCA1MCwgNzgsIDE2MCwgMTgxLCAyMjEsIDIxMSwgMTI4LCA3MCwgMTc4LCAxOTEsIDE3MCwgMCwgMTMsIDEyMiwgMTczLCAxMiwgMjAzLCAyNTIsIDQsIDE4NCwgMjI1LCAyNTIsIDcsIDYyLCA5NiwgMTE2LCAxNSwgMjE2LCAxNTgsIDU1LCA4NSwgNDgsIDE2LCA5LCAyMDYsIDExOSwgNzQsIDExMiwgMjQzLCAxMzYsIDg0LCAxODQsIDIyMywgMjU0LCAxMDEsIDkxLCA2MSwgMTAsIDkxLCA4NSwgMTkyLCAxNDcsIDE0NCwgNTcsIDI5LCA2NiwgMjM4LCAxOTksIDI0NCwgMTkzLCAxOTQsIDE1MCwgMjMyLCAyMDAsIDEwNywgMiwgMywgMSwgMCwgMSwgMiwgMTMwLCAxLCAwLCAxMDMsIDI0NCwgMTM3LCAxMTgsIDExNiwgODIsIDE0LCAyMDMsIDEwMiwgMTA3LCAyNTMsIDg4LCAxMiwgMTk5LCAyMjIsIDYwLCAyNDMsIDEzNiwgODYsIDE1NywgNzQsIDIyNCwgMTkwLCA1MywgMTEzLCA1NywgMTU3LCAyNTAsIDQ5LCAxMzAsIDk2LCAzMSwgMjUyLCAxMzYsIDE1MiwgNzAsIDE0MywgMTcsIDIxNSwgOTYsIDEwMywgNTEsIDE4LCAzNSwgMTQxLCAyMTIsIDIxMCwgMjA1LCA5LCAyMTYsIDgzLCA3MCwgMjQ1LCA3MSwgMTM4LCAxMTksIDExMiwgMjI5LCAxNjQsIDE3NiwgOSwgMzcsIDgxLCAxNjEsIDE5MywgMTU0LCA2OCwgMjQ5LCAxMTUsIDEwNiwgMjAxLCA2LCAxMiwgMjI1LCAxNDQsIDEyNiwgMTQxLCAyMTAsIDE0MSwgMjQyLCAxMjgsIDE1OSwgMjIxLCAxNjMsIDIyMiwgMjEsIDIzMywgMjMwLCAxNjcsIDIwNiwgNTksIDI0LCAyNTAsIDIzMywgODEsIDEyMiwgMTAyLCAyNiwgNiwgMjMzLCA3MiwgMTMzLCA0NywgNzcsIDE1NSwgMjM4LCA4NiwgNiwgMTM5LCAyNCwgMTMxLCAxNjMsIDE3OSwgMTEyLCA0OCwgMjQ3LCAxNDIsIDYsIDIwNywgMjA0LCAxNzMsIDIyMywgMTQwLCAxOTksIDE1MCwgOTUsIDEyMywgMTUyLCAyMDIsIDE1NSwgMTMxLCAyMzgsIDYyLCA5NiwgMTMzLCA0LCAyMTcsIDUxLCAxMjEsIDMwLCAzOCwgMTc4LCAxODksIDIxNiwgNDQsIDM1LCAyNDEsIDkzLCA3LCA2MiwgOTAsIDExMSwgMjE2LCA2NiwgMjA5LCAyNDMsIDEyOCwgMjM0LCAxNDEsIDg0LCAxMzUsIDE4MSwgMTMsIDM4LCAyMjAsIDExNCwgMjQ1LCAyNDAsIDE3OCwgOTUsIDIyMCwgMjA2LCAxMSwgMTg2LCAyMzQsIDIxMywgNjYsIDEyMSwgODMsIDY4LCA4OSwgNzUsIDQ2LCAxODMsIDE0NSwgMTgzLCAxNDcsIDE2MCwgMjE1LCAxMTgsIDE5OCwgMTI1LCAxODEsIDE0NiwgMzAsIDI1MSwgNTgsIDg3LCA0NywgMjA5LCAyMzcsIDk3LCAyNCwgNDcsIDE3OSwgNiwgMTEwLCAyNDIsIDk5LCAxNTAsIDIyNiwgMTQ4LCAxOTgsIDE3NCwgMTQ2LCAxMDEsIDIxMywgODcsIDE3OCwgMTAsIDIyMywgMTA1LCAxOCwgNTYsIDUzLCAyMiwgMjEyLCAxNTgsIDE3MCwgMTc2LCA1MSwgODYsIDE0NSwgMTI1LCAxMjQsIDQ0LCA5LCA4NSwgMTksIDE0NCwgMjQ2LCAxNzAsIDc4LCAxMjQsIDMwLCAzMiwgMTIsIDE2NiwgMTc0LCAxMzksIDc3LCA2MywgMTczLCA4MiwgMTAsIDE1MywgMiwgMTI5LCAxMjksIDAsIDI0OCwgMTgsIDE0MywgMjQ2LCAxMzcsIDEzNiwgMTQ1LCAyMTksIDE3OCwgMzksIDI3LCA5NCwgNjQsIDkwLCA0NywgMTYzLCAxMTQsIDYwLCA2MywgMTg3LCAxMzEsIDE0MywgMjQ0LCAxNiwgNDIsIDEyOCwgMjMxLCAxMTcsIDkyLCA5OCwgMjE5LCAxNTUsIDYyLCAxMDcsIDI1MiwgMTcsIDI0NSwgNDUsIDE2MCwgMjI1LCAxMDMsIDE0MiwgNzIsIDM2LCAxOTMsIDE1MCwgMjM1LCAyMTQsIDE3NSwgNjIsIDIxMiwgNTYsIDQ1LCA5LCAwLCA2MCwgMTE0LCAxMDcsIDEzNCwgMjI4LCAyMDQsIDEzMSwgMTMxLCAyMTQsIDk0LCAyMDEsIDE0OCwgMTU5LCA5OSwgMTM5LCAxODEsIDEzLCAxMTksIDM4LCAzMCwgMTA3LCAxNjYsIDE2NSwgMjAzLCA0MywgMzQsIDIwLCAyMDcsIDE3MSwgMzIsIDU4LCAxNjcsIDYyLCAxOTYsIDE1MywgMTAzLCAyMDQsIDIxMywgMjQ3LCA0OCwgMTExLCAyMjcsIDU5LCA5NSwgOTcsIDE5NCwgMTg3LCA1MywgMTAsIDI0NywgMTA4LCA1OCwgODYsIDI4LCAyOSwgMTEzLCA4LCAxMTAsIDE3MSwgMjIwLCAyNDUsIDExLCA4MiwgMjMzLCAyMjMsIDkxLCA2OCwgMTY2LCAxMTcsIDE3NCwgMTg3LCA2MiwgNzcsIDIsIDEyOSwgMTI5LCAwLCAyMzUsIDExOCwgMiwgMTA1LCAyMzksIDIxMiwgMzAsIDEwNCwgMTU3LCA0MSwgMTA5LCAxMSwgMjQ4LCAxNTIsIDIyLCAyMzYsIDk3LCA0MCwgMTUzLCAxMzEsIDIyOCwgNSwgODYsIDE4NywgMTEzLCAxMjYsIDE0NCwgNzYsIDE0MSwgNzksIDExMCwgMjUwLCAxNDYsIDE1MiwgNDksIDU4LCAxNTYsIDIwMSwgMTc2LCA5MiwgMTg5LCAyMDksIDMwLCAxMTIsIDEwOCwgMTc1LCAyMDQsIDIwNCwgMjQ3LCAxNjQsIDQ2LCAxMjksIDIzOSwgOTgsIDEyNywgNDksIDE0NSwgMjE4LCA2MywgMTkzLCAxMjQsIDE3NCwgMTgsIDk4LCAyMDEsIDk5LCAxNTQsIDE2MiwgMTM4LCA3OCwgMTU5LCAyNTMsIDMsIDI0OCwgMywgMjA5LCAzNiwgMjM5LCAxOTMsIDE1NSwgMTkzLCA1LCAxOSwgMjM2LCAzNywgNzgsIDExOCwgMTM1LCAyNTAsIDE5OSwgNywgMTQxLCAyNDgsIDEyMCwgMzYsIDEzNiwgOTMsIDk4LCAxNzQsIDYwLCAxOCwgMjE1LCA5MywgMTc0LCAxMDcsIDE0MSwgMTE2LCAxNDUsIDE2NywgMjIxLCAyMTAsIDE2OSwgMjQ3LCA2NywgMjU0LCAyMjIsIDE2MSwgMTM0LCA2MywgMjIxLCA5MCwgODcsIDQyLCA5OSwgMjI3LCA4MSwgMTczLCAxNTEsIDIsIDEyOSwgMTI5LCAwLCAxMzMsIDIzLCAxNjgsIDEwMywgODMsIDIzMiwgMTQ2LCAxNjAsIDE4MSwgMjMsIDQwLCAzOCwgMjA0LCAxMywgMjE0LCAyMDMsIDQ5LCA0MSwgMTk1LCAyMjcsIDE4OSwgMTgxLCA4LCAyNDMsIDExOSwgMTA2LCA3NSwgNjcsIDI1MCwgMjUwLCAxMCwgMjM0LCA5OCwgMTE4LCAyNiwgMjUwLCAzNSwgMTIxLCAxMzIsIDEyNCwgMTAsIDc2LCAyNiwgMTk4LCAxNjUsIDE1NCwgMTA4LCAxOSwgMTE3LCA4OCwgMjMsIDE3LCAxOTIsIDE0MywgMTg0LCAxNzcsIDE4MSwgMTQxLCAxNTcsIDQsIDE4NSwgMjQ4LCAxOTMsIDc3LCAyMDQsIDI0MywgNywgMTcwLCAyNDAsIDQsIDExMSwgMTEzLCAxODMsIDAsIDI3LCAxMzYsIDIwLCAxOSwgMTQ5LCA3NCwgMzMsIDI0MSwgMjE4LCAxMDgsIDIzNiwgODAsIDE3MSwgMTQ4LCAxNiwgMTE2LCA5NywgMTA5LCA4MywgNzQsIDg4LCAxNDUsIDk0LCAyMzksIDEwMiwgMTkyLCAxOSwgMTE0LCAyMDcsIDUsIDEyOCwgNTEsIDExMSwgMTY0LCAyMzcsIDg2LCAxNTQsIDk5LCA1MiwgMTk3LCA2MiwgNTcsIDE4MiwgNiwgMTUyLCAyNDUsIDYxLCAxMzcsIDU4LCAxMDUsIDE1OSwgMiwgODQsIDEwOSwgMiwgMTI5LCAxMjksIDAsIDIyNiwgNjcsIDExMSwgMTMyLCA5NSwgOTEsIDEwMSwgMTc3LCA2MywgMTg5LCA0NCwgNTMsIDE5MywgMTg0LCA5MiwgMjMwLCAyMjMsIDk4LCAxMzMsIDc0LCAyMDksIDg2LCA1MiwgNywgNjUsIDE5NSwgMjA2LCAxMDAsIDgxLCAxNzgsIDE0NCwgNjUsIDE2NywgMTUxLCA0MiwgNzksIDg5LCAxNDksIDE4LCAxNzMsIDE4OCwgMjEsIDI0NCwgMjUxLCA0OSwgMjMwLCA0MSwgMTUwLCAxNTMsIDQ2LCAzNSwgMzgsIDIzMSwgOTksIDE3NCwgNTYsIDExNSwgMzIsIDIxNSwgMjUzLCA4NSwgMTQ3LCAxMDgsIDE5NywgMTQ3LCAzNCwgMjM2LCAyMTYsIDIyMiwgMTc3LCA1NywgOTAsIDEzNiwgMTE0LCAyMDcsIDQ4LCA0NiwgMzEsIDkwLCAyMjAsIDE4LCA1OCwgMTQzLCAyMzksIDExMSwgMjE0LCAyNywgOTUsIDYsIDM2LCA1MywgMjI5LCA2MiwgMTA4LCA0NSwgMzksIDEsIDMwLCA0NywgMTc4LCA1NiwgMTY0LCAyMDYsIDU2LCA0MiwgMjA4LCA0NiwgMTkzLCA2MSwgMzEsIDE0NywgNDUsIDE0NywgMjMsIDE4NywgMjIsIDUwLCAyNTUsIDExMSwgMjI5LCAxMzIsIDE5OSwgMTUyLCA3NSwgMTQyLCAxMzYsIDIwOSwgMTUxLCAyLCAxMjksIDEyOSwgMCwgMTY1LCA1NiwgMjMyLCA3NiwgNTUsIDU3LCAyNDAsIDE1OSwgOTIsIDIwNywgMjIwLCAxNDMsIDEzMCwgMzAsIDU3LCAyMzQsIDI1MSwgMTcyLCAxNzEsIDE4MCwgNTQsIDE1OSwgMjI5LCA5NiwgMjQ2LCA3MywgMTEyLCAxNDYsIDc1LCAxNTcsIDI0MiwgMjAxLCAxNjEsIDIxOCwgMzcsIDE3NiwgMzUsIDE3MCwgNTAsIDkwLCAxNDgsIDEwMiwgMTkxLCAxOTksIDIzOSwgMTc0LCA3OCwgNzIsIDY3LCA4NSwgMTk5LCA0NSwgMTQ5LCAxNDUsIDEzMiwgMTYxLCAyMTIsIDMzLCAxNTcsIDc1LCAyMTYsIDc5LCAzOSwgMjMzLCAxOCwgMjEwLCAyNTUsIDI2LCA3MiwgMjI5LCAyMzksIDQ0LCAxMiwgMTQ3LCAxNTgsIDE3NiwgMTkyLCA5NSwgMTI2LCAzMiwgMTc1LCAyMywgMjI2LCAxMzEsIDEzOSwgMTk3LCAxNzUsIDE5MywgNjIsIDgsIDE1MSwgMjUyLCA2OCwgMTU0LCA5NCwgODksIDE4OSwgMTI1LCA5MCwgMzAsIDM2LCAxNzUsIDczLCAyMzAsIDE5NCwgMTMsIDIzMywgMjQ3LCAxMjMsIDYwLCAyNDEsIDQ3LCAxNzEsIDUxLCAxODksIDExMiwgMTExLCAyMTMsIDE0MSwgODksIDcwLCAyNDksIDIzNiwgNjMsIDIzNiwgMTEwLCAxMTUsIDIwOF19OwoqLwp0LmRlZmF1bHQ9bmV3IGgsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpLG89cig0KS5kb2N1bWVudCxpPW4obykmJm4oby5jcmVhdGVFbGVtZW50KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGk/by5jcmVhdGVFbGVtZW50KGUpOnt9fX0sLyogMTAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLG89cigyNyksaT1yKDQzKSxzPXIoMTQ5KSxhPXIoMTEpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW8uU3ltYm9sfHwoby5TeW1ib2w9aT97fTpuLlN5bWJvbHx8e30pOyJfIj09ZS5jaGFyQXQoMCl8fGUgaW4gdHx8YSh0LGUse3ZhbHVlOnMuZihlKX0pfX0sLyogMTA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDc5KSgia2V5cyIpLG89cig0OCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1vKGUpKX19LC8qIDEwNSAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzCmUuZXhwb3J0cz0iY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mIi5zcGxpdCgiLCIpfSwvKiAxMDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCkuZG9jdW1lbnQ7ZS5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSwvKiAxMDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy4KLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KdmFyIG49cig2KSxvPXIoMyksaT1mdW5jdGlvbihlLHQpe2lmKG8oZSksIW4odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O2UuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT8vLyBlc2xpbnQtZGlzYWJsZS1saW5lCmZ1bmN0aW9uKGUsdCxuKXt0cnl7bj1yKDI4KShGdW5jdGlvbi5jYWxsLHIoMjUpLmYoT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG4oZSxbXSksdD0hKGUgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goZSl7dD0hMH1yZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gaShlLHIpLHQ/ZS5fX3Byb3RvX189cjpuKGUsciksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOml9fSwvKiAxMDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9Ilx0XG5cdlxmXHIgwqDhmoDhoI7igIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIBcdTIwMjhcdTIwMjlcdWZlZmYifSwvKiAxMDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNiksbz1yKDEwNykuc2V0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIGkscz10LmNvbnN0cnVjdG9yO3JldHVybiBzIT09ciYmImZ1bmN0aW9uIj09dHlwZW9mIHMmJihpPXMucHJvdG90eXBlKSE9PXIucHJvdG90eXBlJiZuKGkpJiZvJiZvKGUsaSksZX19LC8qIDExMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMzQpLG89cigzMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PVN0cmluZyhvKHRoaXMpKSxyPSIiLGk9bihlKTtpZihpPDB8fGk9PTEvMCl0aHJvdyBSYW5nZUVycm9yKCJDb3VudCBjYW4ndCBiZSBuZWdhdGl2ZSIpO2Zvcig7aT4wOyhpPj4+PTEpJiYodCs9dCkpMSZpJiYocis9dCk7cmV0dXJuIHJ9fSwvKiAxMTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gMjAuMi4yLjI4IE1hdGguc2lnbih4KQplLmV4cG9ydHM9TWF0aC5zaWdufHxmdW5jdGlvbihlKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gMD09KGU9K2UpfHxlIT1lP2U6ZTwwPy0xOjF9fSwvKiAxMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gMjAuMi4yLjE0IE1hdGguZXhwbTEoeCkKdmFyIHI9TWF0aC5leHBtMTtlLmV4cG9ydHM9IXJ8fHIoMTApPjIyMDI1LjQ2NTc5NDgwNjcxOHx8cigxMCk8MjIwMjUuNDY1Nzk0ODA2NzE4fHwtMmUtMTchPXIoLTJlLTE3KT9mdW5jdGlvbihlKXtyZXR1cm4gMD09KGU9K2UpP2U6ZT4tMWUtNiYmZTwxZS02P2UrZSplLzI6TWF0aC5leHAoZSktMX06cn0sLyogMTEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM0KSxvPXIoMzMpOwovLyB0cnVlICAtPiBTdHJpbmcjYXQKLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0CmUuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLHU9bihyKSxjPWEubGVuZ3RoO3JldHVybiB1PDB8fHU+PWM/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KHUpLGk8NTUyOTZ8fGk+NTYzMTl8fHUrMT09PWN8fChzPWEuY2hhckNvZGVBdCh1KzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KHUpOmk6ZT9hLnNsaWNlKHUsdSsyKTpzLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzYpfX19LC8qIDExNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNDMpLG89cigwKSxpPXIoMTkpLHM9cigxOCksYT1yKDYyKSx1PXIoMTE1KSxjPXIoNjApLGY9cigyNiksbD1yKDkpKCJpdGVyYXRvciIpLGQ9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkscD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIseSxoLHYsZyl7dShyLHQseSk7dmFyIGIsXyxtLFI9ZnVuY3Rpb24oZSl7aWYoIWQmJmUgaW4gTylyZXR1cm4gT1tlXTtzd2l0Y2goZSl7Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0sdz10KyIgSXRlcmF0b3IiLFM9InZhbHVlcyI9PWgsaz0hMSxPPWUucHJvdG90eXBlLFA9T1tsXXx8T1siQEBpdGVyYXRvciJdfHxoJiZPW2hdLE09UHx8UihoKSxMPWg/Uz9SKCJlbnRyaWVzIik6TTp2b2lkIDAseD0iQXJyYXkiPT10P08uZW50cmllc3x8UDpQO2lmKAovLyBGaXggbmF0aXZlCngmJihtPWYoeC5jYWxsKG5ldyBlKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmbS5uZXh0JiYoCi8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKYyhtLHcsITApLAovLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKbnx8ImZ1bmN0aW9uIj09dHlwZW9mIG1bbF18fHMobSxsLHApKSwKLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgpTJiZQJiYidmFsdWVzIiE9PVAubmFtZSYmKGs9ITAsTT1mdW5jdGlvbigpe3JldHVybiBQLmNhbGwodGhpcyl9KSwKLy8gRGVmaW5lIGl0ZXJhdG9yCm4mJiFnfHwhZCYmIWsmJk9bbF18fHMoTyxsLE0pLAovLyBQbHVnIGZvciBsaWJyYXJ5CmFbdF09TSxhW3ddPXAsaClpZihiPXt2YWx1ZXM6Uz9NOlIoInZhbHVlcyIpLGtleXM6dj9NOlIoImtleXMiKSxlbnRyaWVzOkx9LGcpZm9yKF8gaW4gYilfIGluIE98fGkoTyxfLGJbX10pO2Vsc2UgbyhvLlArby5GKihkfHxrKSx0LGIpO3JldHVybiBifX0sLyogMTE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1MSksbz1yKDQ3KSxpPXIoNjApLHM9e307Ci8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpCnIoMTgpKHMscig5KSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0sLyogMTE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaGVscGVyIGZvciBTdHJpbmcje3N0YXJ0c1dpdGgsIGVuZHNXaXRoLCBpbmNsdWRlc30KdmFyIG49cig4Myksbz1yKDMzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4odCkpdGhyb3cgVHlwZUVycm9yKCJTdHJpbmcjIityKyIgZG9lc24ndCBhY2NlcHQgcmVnZXghIik7cmV0dXJuIFN0cmluZyhvKGUpKX19LC8qIDExNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig5KSgibWF0Y2giKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9Ly4vO3RyeXsiLy4vIltlXSh0KX1jYXRjaChyKXt0cnl7cmV0dXJuIHRbbl09ITEsISIvLi8iW2VdKHQpfWNhdGNoKGUpe319cmV0dXJuITB9fSwvKiAxMTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yCnZhciBuPXIoNjIpLG89cig5KSgiaXRlcmF0b3IiKSxpPUFycmF5LnByb3RvdHlwZTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0sLyogMTE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxMSksbz1yKDQ3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3QgaW4gZT9uLmYoZSx0LG8oMCxyKSk6ZVt0XT1yfX0sLyogMTIwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcyKSxvPXIoOSkoIml0ZXJhdG9yIiksaT1yKDYyKTtlLmV4cG9ydHM9cigyNykuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT1lKXJldHVybiBlW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV19fSwvKiAxMjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA5LjQuMi4zIEFycmF5U3BlY2llc0NyZWF0ZShvcmlnaW5hbEFycmF5LCBsZW5ndGgpCnZhciBuPXIoMzA1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3KG4oZSkpKHQpfX0sLyogMTIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgbj1yKDE1KSxvPXIoNTApLGk9cigxMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uKHRoaXMpLHI9aSh0Lmxlbmd0aCkscz1hcmd1bWVudHMubGVuZ3RoLGE9byhzPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxyKSx1PXM+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGM9dm9pZCAwPT09dT9yOm8odSxyKTtjPmE7KXRbYSsrXT1lO3JldHVybiB0fX0sLyogMTIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0NCksbz1yKDE2NSksaT1yKDYyKSxzPXIoMjQpOwovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCmUuZXhwb3J0cz1yKDExNCkoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSwvLyB0YXJnZXQKdGhpcy5faT0wLC8vIG5leHQgaW5kZXgKdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLAovLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpCmkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0sLyogMTI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1yKDI4KSxhPXIoMTU1KSx1PXIoMTA2KSxjPXIoMTAyKSxmPXIoNCksbD1mLnByb2Nlc3MsZD1mLnNldEltbWVkaWF0ZSxwPWYuY2xlYXJJbW1lZGlhdGUseT1mLk1lc3NhZ2VDaGFubmVsLGg9Zi5EaXNwYXRjaCx2PTAsZz17fSxiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Z1tlXTtkZWxldGUgZ1tlXSx0KCl9fSxfPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTsKLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOgpkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gZ1srK3ZdPWZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwphKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgZ1tlXX0sCi8vIE5vZGUuanMgMC44LQoicHJvY2VzcyI9PXIoMjkpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OmgmJmgubm93P249ZnVuY3Rpb24oZSl7aC5ub3cocyhiLGUsMSkpfTp5PyhvPW5ldyB5LGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1fLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmYuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZi5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2YucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLF8sITEpKTpuPSJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gYygic2NyaXB0Iik/ZnVuY3Rpb24oZSl7dS5hcHBlbmRDaGlsZChjKCJzY3JpcHQiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksZS5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0sLyogMTI1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLG89cigxMjQpLnNldCxpPW4uTXV0YXRpb25PYnNlcnZlcnx8bi5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHM9bi5wcm9jZXNzLGE9bi5Qcm9taXNlLHU9InByb2Nlc3MiPT1yKDI5KShzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYz1mdW5jdGlvbigpe3ZhciBuLG87Zm9yKHUmJihuPXMuZG9tYWluKSYmbi5leGl0KCk7ZTspe289ZS5mbixlPWUubmV4dDt0cnl7bygpfWNhdGNoKG4pe3Rocm93IGU/cigpOnQ9dm9pZCAwLG59fXQ9dm9pZCAwLG4mJm4uZW50ZXIoKX07Ci8vIE5vZGUuanMKaWYodSlyPWZ1bmN0aW9uKCl7cy5uZXh0VGljayhjKX07ZWxzZSBpZighaXx8bi5uYXZpZ2F0b3ImJm4ubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYoYSYmYS5yZXNvbHZlKXsKLy8gUHJvbWlzZS5yZXNvbHZlIHdpdGhvdXQgYW4gYXJndW1lbnQgdGhyb3dzIGFuIGVycm9yIGluIExHIFdlYk9TIDIKdmFyIGY9YS5yZXNvbHZlKHZvaWQgMCk7cj1mdW5jdGlvbigpe2YudGhlbihjKX19ZWxzZSByPWZ1bmN0aW9uKCl7Ci8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkKby5jYWxsKG4sYyl9O2Vsc2V7dmFyIGw9ITAsZD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGkoYykub2JzZXJ2ZShkLHtjaGFyYWN0ZXJEYXRhOiEwfSksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKcj1mdW5jdGlvbigpe2QuZGF0YT1sPSFsfX1yZXR1cm4gZnVuY3Rpb24obil7dmFyIG89e2ZuOm4sbmV4dDp2b2lkIDB9O3QmJih0Lm5leHQ9byksZXx8KGU9byxyKCkpLHQ9b319fSwvKiAxMjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBQcm9taXNlQ2FwYWJpbGl0eShlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9bih0KSx0aGlzLnJlamVjdD1uKHIpfQovLyAyNS40LjEuNSBOZXdQcm9taXNlQ2FwYWJpbGl0eShDKQp2YXIgbj1yKDE2KTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KGUpfX0sLyogMTI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIElFRUU3NTQgY29udmVyc2lvbnMgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9pZWVlNzU0CmZ1bmN0aW9uIHBhY2tJRUVFNzU0KGUsdCxyKXt2YXIgbixvLGkscz1uZXcgQXJyYXkociksYT04KnItdC0xLHU9KDE8PGEpLTEsYz11Pj4xLGY9MjM9PT10P00oMiwtMjQpLU0oMiwtNzcpOjAsbD0wLGQ9ZTwwfHwwPT09ZSYmMS9lPDA/MTowO2ZvcihlPVAoZSksCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKZSE9ZXx8ZT09PWs/KAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCm89ZSE9ZT8xOjAsbj11KToobj1MKHgoZSkvQSksZSooaT1NKDIsLW4pKTwxJiYobi0tLGkqPTIpLGUrPW4rYz49MT9mL2k6ZipNKDIsMS1jKSxlKmk+PTImJihuKyssaS89MiksbitjPj11PyhvPTAsbj11KTpuK2M+PTE/KG89KGUqaS0xKSpNKDIsdCksbis9Yyk6KG89ZSpNKDIsYy0xKSpNKDIsdCksbj0wKSk7dD49ODtzW2wrK109MjU1Jm8sby89MjU2LHQtPTgpO2ZvcihuPW48PHR8byxhKz10O2E+MDtzW2wrK109MjU1Jm4sbi89MjU2LGEtPTgpO3JldHVybiBzWy0tbF18PTEyOCpkLHN9ZnVuY3Rpb24gdW5wYWNrSUVFRTc1NChlLHQscil7dmFyIG4sbz04KnItdC0xLGk9KDE8PG8pLTEscz1pPj4xLGE9by03LHU9ci0xLGM9ZVt1LS1dLGY9MTI3JmM7Zm9yKGM+Pj03O2E+MDtmPTI1NipmK2VbdV0sdS0tLGEtPTgpO2ZvcihuPWYmKDE8PC1hKS0xLGY+Pj0tYSxhKz10O2E+MDtuPTI1NipuK2VbdV0sdS0tLGEtPTgpO2lmKDA9PT1mKWY9MS1zO2Vsc2V7aWYoZj09PWkpcmV0dXJuIG4/TmFOOmM/LWs6aztuKz1NKDIsdCksZi09c31yZXR1cm4oYz8tMToxKSpuKk0oMixmLXQpfWZ1bmN0aW9uIHVucGFja0kzMihlKXtyZXR1cm4gZVszXTw8MjR8ZVsyXTw8MTZ8ZVsxXTw8OHxlWzBdfWZ1bmN0aW9uIHBhY2tJOChlKXtyZXR1cm5bMjU1JmVdfWZ1bmN0aW9uIHBhY2tJMTYoZSl7cmV0dXJuWzI1NSZlLGU+PjgmMjU1XX1mdW5jdGlvbiBwYWNrSTMyKGUpe3JldHVyblsyNTUmZSxlPj44JjI1NSxlPj4xNiYyNTUsZT4+MjQmMjU1XX1mdW5jdGlvbiBwYWNrRjY0KGUpe3JldHVybiBwYWNrSUVFRTc1NChlLDUyLDgpfWZ1bmN0aW9uIHBhY2tGMzIoZSl7cmV0dXJuIHBhY2tJRUVFNzU0KGUsMjMsNCl9ZnVuY3Rpb24gYWRkR2V0dGVyKGUsdCxyKXtoKGVbYl0sdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl19fSl9ZnVuY3Rpb24gZ2V0KGUsdCxyLG4pe3ZhciBvPStyLGk9cChvKTtpZihpK3Q+ZVtVXSl0aHJvdyBTKF8pO3ZhciBzPWVbRF0uX2IsYT1pK2Vbal0sdT1zLnNsaWNlKGEsYSt0KTtyZXR1cm4gbj91OnUucmV2ZXJzZSgpfWZ1bmN0aW9uIHNldChlLHQscixuLG8saSl7dmFyIHM9K3IsYT1wKHMpO2lmKGErdD5lW1VdKXRocm93IFMoXyk7Zm9yKHZhciB1PWVbRF0uX2IsYz1hK2Vbal0sZj1uKCtvKSxsPTA7bDx0O2wrKyl1W2MrbF09ZltpP2w6dC1sLTFdfXZhciBuPXIoNCksbz1yKDEwKSxpPXIoNDMpLHM9cig5MCksYT1yKDE4KSx1PXIoNTYpLGM9cig1KSxmPXIoNTQpLGw9cigzNCksZD1yKDEyKSxwPXIoMTc0KSx5PXIoNTIpLmYsaD1yKDExKS5mLHY9cigxMjIpLGc9cig2MCksYj0icHJvdG90eXBlIixfPSJXcm9uZyBpbmRleCEiLG09bi5BcnJheUJ1ZmZlcixSPW4uRGF0YVZpZXcsdz1uLk1hdGgsUz1uLlJhbmdlRXJyb3Isaz1uLkluZmluaXR5LE89bSxQPXcuYWJzLE09dy5wb3csTD13LmZsb29yLHg9dy5sb2csQT13LkxOMixEPW8/Il9iIjoiYnVmZmVyIixVPW8/Il9sIjoiYnl0ZUxlbmd0aCIsaj1vPyJfbyI6ImJ5dGVPZmZzZXQiO2lmKHMuQUJWKXtpZighYyhmdW5jdGlvbigpe20oMSl9KXx8IWMoZnVuY3Rpb24oKXtuZXcgbSgtMSl9KXx8YyhmdW5jdGlvbigpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3Ci8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3Ci8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CnJldHVybiBuZXcgbSxuZXcgbSgxLjUpLG5ldyBtKE5hTiksIkFycmF5QnVmZmVyIiE9bS5uYW1lfSkpe209ZnVuY3Rpb24oZSl7cmV0dXJuIGYodGhpcyxtKSxuZXcgTyhwKGUpKX07Zm9yKHZhciBFLEk9bVtiXT1PW2JdLEM9eShPKSxUPTA7Qy5sZW5ndGg+VDspKEU9Q1tUKytdKWluIG18fGEobSxFLE9bRV0pO2l8fChJLmNvbnN0cnVjdG9yPW0pfQovLyBpT1MgU2FmYXJpIDcueCBidWcKdmFyIHE9bmV3IFIobmV3IG0oMikpLEg9UltiXS5zZXRJbnQ4O3Euc2V0SW50OCgwLDIxNDc0ODM2NDgpLHEuc2V0SW50OCgxLDIxNDc0ODM2NDkpLCFxLmdldEludDgoMCkmJnEuZ2V0SW50OCgxKXx8dShSW2JdLHtzZXRJbnQ4OmZ1bmN0aW9uKGUsdCl7SC5jYWxsKHRoaXMsZSx0PDwyND4+MjQpfSxzZXRVaW50ODpmdW5jdGlvbihlLHQpe0guY2FsbCh0aGlzLGUsdDw8MjQ+PjI0KX19LCEwKX1lbHNlIG09ZnVuY3Rpb24oZSl7Zih0aGlzLG0sIkFycmF5QnVmZmVyIik7dmFyIHQ9cChlKTt0aGlzLl9iPXYuY2FsbChuZXcgQXJyYXkodCksMCksdGhpc1tVXT10fSxSPWZ1bmN0aW9uKGUsdCxyKXtmKHRoaXMsUiwiRGF0YVZpZXciKSxmKGUsbSwiRGF0YVZpZXciKTt2YXIgbj1lW1VdLG89bCh0KTtpZihvPDB8fG8+bil0aHJvdyBTKCJXcm9uZyBvZmZzZXQhIik7aWYocj12b2lkIDA9PT1yP24tbzpkKHIpLG8rcj5uKXRocm93IFMoIldyb25nIGxlbmd0aCEiKTt0aGlzW0RdPWUsdGhpc1tqXT1vLHRoaXNbVV09cn0sbyYmKGFkZEdldHRlcihtLCJieXRlTGVuZ3RoIiwiX2wiKSxhZGRHZXR0ZXIoUiwiYnVmZmVyIiwiX2IiKSxhZGRHZXR0ZXIoUiwiYnl0ZUxlbmd0aCIsIl9sIiksYWRkR2V0dGVyKFIsImJ5dGVPZmZzZXQiLCJfbyIpKSx1KFJbYl0se2dldEludDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGdldCh0aGlzLDEsZSlbMF08PDI0Pj4yNH0sZ2V0VWludDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGdldCh0aGlzLDEsZSlbMF19LGdldEludDE2OmZ1bmN0aW9uKGUpe3ZhciB0PWdldCh0aGlzLDIsZSxhcmd1bWVudHNbMV0pO3JldHVybih0WzFdPDw4fHRbMF0pPDwxNj4+MTZ9LGdldFVpbnQxNjpmdW5jdGlvbihlKXt2YXIgdD1nZXQodGhpcywyLGUsYXJndW1lbnRzWzFdKTtyZXR1cm4gdFsxXTw8OHx0WzBdfSxnZXRJbnQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLDQsZSxhcmd1bWVudHNbMV0pKX0sZ2V0VWludDMyOmZ1bmN0aW9uKGUpe3JldHVybiB1bnBhY2tJMzIoZ2V0KHRoaXMsNCxlLGFyZ3VtZW50c1sxXSkpPj4+MH0sZ2V0RmxvYXQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcyw0LGUsYXJndW1lbnRzWzFdKSwyMyw0KX0sZ2V0RmxvYXQ2NDpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcyw4LGUsYXJndW1lbnRzWzFdKSw1Miw4KX0sc2V0SW50ODpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDEsZSxwYWNrSTgsdCl9LHNldFVpbnQ4OmZ1bmN0aW9uKGUsdCl7c2V0KHRoaXMsMSxlLHBhY2tJOCx0KX0sc2V0SW50MTY6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcywyLGUscGFja0kxNix0LGFyZ3VtZW50c1syXSl9LHNldFVpbnQxNjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDIsZSxwYWNrSTE2LHQsYXJndW1lbnRzWzJdKX0sc2V0SW50MzI6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcyw0LGUscGFja0kzMix0LGFyZ3VtZW50c1syXSl9LHNldFVpbnQzMjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDQsZSxwYWNrSTMyLHQsYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQzMjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDQsZSxwYWNrRjMyLHQsYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQ2NDpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDgsZSxwYWNrRjY0LHQsYXJndW1lbnRzWzJdKX19KTtnKG0sIkFycmF5QnVmZmVyIiksZyhSLCJEYXRhVmlldyIpLGEoUltiXSxzLlZJRVcsITApLHQuQXJyYXlCdWZmZXI9bSx0LkRhdGFWaWV3PVJ9LC8qIDEyOCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQplLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSwvKiAxMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIG49cigxMzApLG89TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSwvKiAxMzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gNy4xLjQgVG9JbnRlZ2VyCnZhciByPU1hdGguY2VpbCxuPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bjpyKShlKX19LC8qIDEzMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMzIpKCJrZXlzIiksbz1yKDk0KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPW8oZSkpfX0sLyogMTMyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzKSxvPXIoMTcpLGk9b1siX19jb3JlLWpzX3NoYXJlZF9fIl18fChvWyJfX2NvcmUtanNfc2hhcmVkX18iXT17fSk7KGUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBpW2VdfHwoaVtlXT12b2lkIDAhPT10P3Q6e30pfSkoInZlcnNpb25zIixbXSkucHVzaCh7dmVyc2lvbjpuLnZlcnNpb24sbW9kZTpyKDc1KT8icHVyZSI6Imdsb2JhbCIsY29weXJpZ2h0OiLCqSAyMDE4IERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIn0pfSwvKiAxMzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5cwplLmV4cG9ydHM9ImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZiIuc3BsaXQoIiwiKX0sLyogMTM0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzCnZhciBuPXIoMjEpLG89cigxMyksaT1yKDY2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0sLyogMTM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQxKSxvPXIoMTcpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSwvKiAxMzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKdmFyIG49cig0MSk7Ci8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlCi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nCmUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLG87aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbztpZigiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoIXQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LC8qIDEzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNDIxKSghMCk7Ci8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKcigxODYpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSwvLyB0YXJnZXQKdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSwvKiAxMzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKdmFyIG49cig0MCksbz1yKDQyMyksaT1yKDEzMykscz1yKDEzMSkoIklFX1BST1RPIiksYT1mdW5jdGlvbigpe30sdT1mdW5jdGlvbigpewovLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Zwp2YXIgZSx0PXIoMTM1KSgiaWZyYW1lIiksbj1pLmxlbmd0aDtmb3IodC5zdHlsZS5kaXNwbGF5PSJub25lIixyKDE4OCkuYXBwZW5kQ2hpbGQodCksdC5zcmM9ImphdmFzY3JpcHQ6IiwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmwKLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOwplPXQuY29udGVudFdpbmRvdy5kb2N1bWVudCxlLm9wZW4oKSxlLndyaXRlKCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFwvc2NyaXB0PiIpLGUuY2xvc2UoKSx1PWUuRjtuLS07KWRlbGV0ZSB1LnByb3RvdHlwZVtpW25dXTtyZXR1cm4gdSgpfTtlLmV4cG9ydHM9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oZSx0KXt2YXIgcjsKLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwKcmV0dXJuIG51bGwhPT1lPyhhLnByb3RvdHlwZT1uKGUpLHI9bmV3IGEsYS5wcm90b3R5cGU9bnVsbCxyW3NdPWUpOnI9dSgpLHZvaWQgMD09PXQ/cjpvKHIsdCl9fSwvKiAxMzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBQcm9taXNlQ2FwYWJpbGl0eShlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9bih0KSx0aGlzLnJlamVjdD1uKHIpfQovLyAyNS40LjEuNSBOZXdQcm9taXNlQ2FwYWJpbGl0eShDKQp2YXIgbj1yKDk1KTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KGUpfX0sLyogMTQwICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LC8qIDE0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dC5mPXIoMjIpfSwvKiAxNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTcpLG89cigxMyksaT1yKDc1KSxzPXIoMTQxKSxhPXIoMzkpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW8uU3ltYm9sfHwoby5TeW1ib2w9aT97fTpuLlN5bWJvbHx8e30pOyJfIj09ZS5jaGFyQXQoMCl8fGUgaW4gdHx8YSh0LGUse3ZhbHVlOnMuZihlKX0pfX0sLyogMTQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDc4KSxvPXIoNzYpLGk9cig0NSkscz1yKDEzNiksYT1yKDU3KSx1PXIoMTg0KSxjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7dC5mPXIoNDYpP2M6ZnVuY3Rpb24oZSx0KXtpZihlPWkoZSksdD1zKHQsITApLHUpdHJ5e3JldHVybiBjKGUsdCl9Y2F0Y2goZSl7fWlmKGEoZSx0KSlyZXR1cm4gbyghbi5mLmNhbGwoZSx0KSxlW3RdKX19LC8qIDE0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt0LnJ1bnRpbWVDb25maWd1cmF0aW9uPXsKLy8gVE9ETyB0aGlzIHNob3VsZCBiZSBjaGFuZ2VkIHdpdGggdGhlIGRlZmluaXRpb24gdXNlZCBmb3IgaW5kZXhlZGRiCi8vIGxvb2sgYXQ6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJPYmplY3RTdG9yZQovLyBOb3cgd2UgYXJlIHVzaW5nIHRoZSBkZWZpbml0aW9uIGZvciBEZXhpZTsgKGh0dHA6Ly9kZXhpZS5vcmcvZG9jcy9WZXJzaW9uL1ZlcnNpb24uc3RvcmVzKCkpCnN0b3JhZ2VTY2hlbWFzOntjYXBhYmlsaXRpZXM6e2NhcGFiaWxpdGllczoia2V5LHZlcnNpb24sdmFsdWUifSxzdWJzY3JpcHRpb25zOntzdWJzY3JpcHRpb25zOiJrZXksdmVyc2lvbix2YWx1ZSJ9LHJ1bnRpbWU6eyJydW50aW1lOlVSTCI6ImtleSx2ZXJzaW9uLHZhbHVlIiwicDJwSGFuZGxlcjpVUkwiOiJrZXksdmVyc2lvbix2YWx1ZSJ9LHJlZ2lzdHJ5OnsicmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiOiJrZXksdmVyc2lvbix2YWx1ZSIsInJlZ2lzdHJ5Okh5cGVydHlVUkxzIjoia2V5LHZlcnNpb24sdmFsdWUifSxjcnlwdG9NYW5hZ2VyOnt1c2VyQXN5bW1ldHJpY0tleToia2V5LHZlcnNpb24sdmFsdWUiLGRhdGFPYmplY3RTZXNzaW9uS2V5czoia2V5LHZlcnNpb24sdmFsdWUifSxpZGVudGl0eTp7YWNjZXNzVG9rZW5zOiJrZXksdmVyc2lvbix2YWx1ZSIsaWRlbnRpdGllczoidXNlclVSTCwgdXNlclByb2ZpbGUuZW1haWwsIHVzZXJQcm9maWxlLnVzZXJVUkwsIHVzZXJQcm9maWxlLm5hbWUifSxydW50aW1lQ2F0YWxvZ3VlOntydW50aW1lQ2F0YWxvZ3VlOiImY2d1aWQsIGFjY2Vzc0NvbnRyb2xQb2xpY3ksIGNvbnN0cmFpbnRzLCBkYXRhT2JqZWN0cywgaHlwZXJ0eVR5cGUsIG9iamVjdE5hbWUsIHNvdXJjZVBhY2thZ2UsIHZlcnNpb24ifSxwb2xpY3k6eyJyZXRoaW5rOmFjdGl2ZVBvbGljeSI6ImtleSx2ZXJzaW9uLHZhbHVlIiwicmV0aGluazpncm91cHMiOiJrZXksdmVyc2lvbix2YWx1ZSIsInJldGhpbms6dXNlclBvbGljaWVzIjoia2V5LHZlcnNpb24sdmFsdWUiLCJyZXRoaW5rOnNwUG9saWNpZXMiOiJrZXksdmVyc2lvbix2YWx1ZSJ9LHN5bmNoZXJNYW5hZ2VyOnsic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyI6ImtleSx2ZXJzaW9uLHZhbHVlIn0saHlwZXJ0eVJlc291cmNlczp7aHlwZXJ0eVJlc291cmNlczoiJnJlc291cmNlVVJMLCBuYW1lLCBjb250ZW50VXJsLCBjb250ZW50LCBjcmVhdGVkLCByZXBvcnRlciwgcmVzb3VyY2VUeXBlIn19LHJ1bnRpbWVVUkxTOntyZWdpc3RyeTp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoicmVnaXN0cnkifSxpZGVudGl0eU1vZHVsZTp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoiL2lkbSJ9LHJ1bnRpbWVVQTp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoiL3VhIn0sY2F0YWxvZ3VlOntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiIvY2F0YWxvZ3VlIn0sZ3JhcGhDb25uZWN0b3I6e3ByZWZpeDoiaHlwZXJ0eS1ydW50aW1lOi8vIixzdWZmaXg6Ii9ncmFwaCJ9LHN5bmNNYW5hZ2VyOntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiIvc20ifX0sY2F0YWxvZ3VlVVJMczp7cHJvdG9jb2xzdHViOntwcmVmaXg6Imh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLiIsc3VmZml4OiIvLndlbGwta25vd24vcHJvdG9jb2xzdHViLyIsZmFsbGJhY2s6Imh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLiVkb21haW4lLy53ZWxsLWtub3duL3Byb3RvY29sc3R1Yi8ifSxpZHBQcm94eTp7cHJlZml4OiJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4iLHN1ZmZpeDoiLy53ZWxsLWtub3duL2lkcC1wcm94eS8iLGZhbGxiYWNrOiJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4lZG9tYWluJS8ud2VsbC1rbm93bi9pZHAtcHJveHkvIn19LG1zZ05vZGVVUkw6e3ByZWZpeDoiZG9tYWluOi8vbXNnLW5vZGUuIixzdWZmaXg6IiIsaHlwZXJ0eUFkZHJlc3NBbGxvY2F0aW9uOiIvaHlwZXJ0eS1hZGRyZXNzLWFsbG9jYXRpb24iLG9iamVjdEFkZHJlc3NBbGxvY2F0aW9uOiIvb2JqZWN0LWFkZHJlc3MtYWxsb2NhdGlvbiIsc3Vic2NyaXB0aW9uTWFuYWdlbWVudDoiL3NtIn0sZG9tYWluUmVnaXN0cnlVUkw6e3ByZWZpeDoiZG9tYWluOi8vcmVnaXN0cnkuIixzdWZmaXg6IiJ9LGdsb2JhbFJlZ2lzdHJ5VVJMOiJnbG9iYWw6Ly9yZWdpc3RyeS4ifX0sLyogMTQ1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIE9wZXJhdG9ycygpeygwLG8uZGVmYXVsdCkodGhpcyxPcGVyYXRvcnMpfXJldHVybigwLHMuZGVmYXVsdCkoT3BlcmF0b3JzLFt7a2V5OiJhbmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzBdJiZlWzFdfX0se2tleToiYmV0d2VlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VJbnQoZVswXVswXSkscj1wYXJzZUludChlWzBdWzFdKSxuPWVbMV07cmV0dXJuIHI8dCYmKG49bjx0P24rPTI0MDA6bixyKz0yNDAwKSxuPnQmJm48cn19LHtrZXk6ImVxdWFscyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIioiPT09U3RyaW5nKGVbMF0pfHxTdHJpbmcoZVswXSk9PT1TdHJpbmcoZVsxXSl9fSx7a2V5OiJncmVhdGVyVGhhbiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV0+ZVswXX19LHtrZXk6ImluIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZVswXS5pbmRleE9mKGVbMV0pPi0xfX0se2tleToibGVzc1RoYW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPGVbMF19fSx7a2V5OiJub3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiFlWzBdfX0se2tleToib3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfHxlWzFdfX1dKSxPcGVyYXRvcnN9KCk7dC5kZWZhdWx0PWEsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDE0NSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9ZnVuY3Rpb24oKXsvKioKICAqIENyZWF0ZXMgYSBuZXcgQ29uZGl0aW9uLgogICogQGNsYXNzCiAgKiBAcGFyYW0gIHtzdHJpbmd9ICBhdHRyaWJ1dGUKICAqIEBwYXJhbSAge3N0cmluZ30gIG9wZXJhdG9yCiAgKiBAcGFyYW0gIHsqfSAgICAgICBwYXJhbXMKICAqLwpmdW5jdGlvbiBDb25kaXRpb24oZSx0LHIpeygwLG8uZGVmYXVsdCkodGhpcyxDb25kaXRpb24pLHRoaXMuYXR0cmlidXRlPWUsdGhpcy5vcGVyYXRvcj10LHRoaXMucGFyYW1zPXIsdGhpcy5vcGVyYXRvcnM9bmV3IHUuZGVmYXVsdH0vKioKICAqIFZlcmlmaWVzIGlmIHRoZSBjb25kaXRpb24gaXMgYXBwbGljYWJsZSB0byB0aGUgbWVzc2FnZS4gRmlyc3QsIHRoZSBzeXN0ZW0gdmFsdWUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgYXR0cmlidXRlIGlzIHJldHJpZXZlZDsgdGhlbiwgdGhhdCB2YWx1ZSBpcyBjb21wYXJlZCB3aXRoIHRoZSBwYXJhbWV0ZXIgc3BlY2lmaWVkIGluIHRoZSBjb25kaXRpb24gYnkgZXhlY3V0aW5nIHRoZSBvcGVyYXRvciBpbXBsZW1lbnRhdGlvbi4gSWYgdGhlIG9wZXJhdG9yIGlzICdpbicgYW5kIHRoZSBuYW1lIG9mIGEgZ3JvdXAgaXMgZ2l2ZW4sIHRoZW4gdGhlIGFycmF5IGhvbGRpbmcgdGhlIG1lbWJlcnMgb2YgdGhlIGdyb3VwIGlzIHJldHJpZXZlZCBiZWZvcmUgdGhlIGNvbXBhcmlzb24uCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGNvbnRleHQgICBlbnZpcm9ubWVudCB3aGVyZSB0aGUgUG9saWN5IEVuZ2luZSBpcyBiZWluZyB1c2VkCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIG1lc3NhZ2UKICAqLwpyZXR1cm4oMCxzLmRlZmF1bHQpKENvbmRpdGlvbixbe2tleToiaXNBcHBsaWNhYmxlIix2YWx1ZTpmdW5jdGlvbihlLHQpe2VbdGhpcy5hdHRyaWJ1dGVdPXttZXNzYWdlOnR9O3ZhciByPWVbdGhpcy5hdHRyaWJ1dGVdLG49dm9pZCAwO3JldHVybiJpbiIhPT10aGlzLm9wZXJhdG9yfHxBcnJheS5pc0FycmF5KHRoaXMucGFyYW1zKT90aGlzLm9wZXJhdG9yc1t0aGlzLm9wZXJhdG9yXShbdGhpcy5wYXJhbXMscl0pOihuPWUuZ2V0R3JvdXAodGhpcy5wYXJhbXMsdC50byksdGhpcy5vcGVyYXRvcnNbdGhpcy5vcGVyYXRvcl0oW24scl0pKX19XSksQ29uZGl0aW9ufSgpOy8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwp0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAxNDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcjsKLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGUKcj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3RyeXsKLy8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApCnI9cnx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKXx8KDAsZXZhbCkoInRoaXMiKX1jYXRjaChlKXsKLy8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGUKIm9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJihyPXdpbmRvdyl9Ci8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi4KLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3MKLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufQplLmV4cG9ydHM9cn0sLyogMTQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoMTApJiYhcig1KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkocigxMDIpKCJkaXYiKSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sLyogMTQ5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt0LmY9cig5KX0sLyogMTUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIzKSxvPXIoMjQpLGk9cig4MCkoITEpLHM9cigxMDQpKCJJRV9QUk9UTyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9byhlKSx1PTAsYz1bXTtmb3IociBpbiBhKXIhPXMmJm4oYSxyKSYmYy5wdXNoKHIpOwovLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzCmZvcig7dC5sZW5ndGg+dTspbihhLHI9dFt1KytdKSYmKH5pKGMscil8fGMucHVzaChyKSk7cmV0dXJuIGN9fSwvKiAxNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTEpLG89cigzKSxpPXIoNDkpO2UuZXhwb3J0cz1yKDEwKT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihlLHQpe28oZSk7Zm9yKHZhciByLHM9aSh0KSxhPXMubGVuZ3RoLHU9MDthPnU7KW4uZihlLHI9c1t1KytdLHRbcl0pO3JldHVybiBlfX0sLyogMTUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdwp2YXIgbj1yKDI0KSxvPXIoNTIpLmYsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10sYT1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIG8oZSl9Y2F0Y2goZSl7cmV0dXJuIHMuc2xpY2UoKX19O2UuZXhwb3J0cy5mPWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LC8qIDE1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pCnZhciBuPXIoNDkpLG89cig4MSksaT1yKDcxKSxzPXIoMTUpLGE9cig3MCksdT1PYmplY3QuYXNzaWduOwovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKZS5leHBvcnRzPSF1fHxyKDUpKGZ1bmN0aW9uKCl7dmFyIGU9e30sdD17fSxyPVN5bWJvbCgpLG49ImFiY2RlZmdoaWprbG1ub3BxcnN0IjtyZXR1cm4gZVtyXT03LG4uc3BsaXQoIiIpLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1lfSksNyE9dSh7fSxlKVtyXXx8T2JqZWN0LmtleXModSh7fSx0KSkuam9pbigiIikhPW59KT9mdW5jdGlvbihlLHQpe2ZvcigvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnZhciByPXMoZSksdT1hcmd1bWVudHMubGVuZ3RoLGM9MSxmPW8uZixsPWkuZjt1PmM7KWZvcih2YXIgZCxwPWEoYXJndW1lbnRzW2MrK10pLHk9Zj9uKHApLmNvbmNhdChmKHApKTpuKHApLGg9eS5sZW5ndGgsdj0wO2g+djspbC5jYWxsKHAsZD15W3YrK10pJiYocltkXT1wW2RdKTtyZXR1cm4gcn06dX0sLyogMTU0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxNiksbz1yKDYpLGk9cigxNTUpLHM9W10uc2xpY2UsYT17fSx1PWZ1bmN0aW9uKGUsdCxyKXtpZighKHQgaW4gYSkpe2Zvcih2YXIgbj1bXSxvPTA7bzx0O28rKyluW29dPSJhWyIrbysiXSI7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwphW3RdPUZ1bmN0aW9uKCJGLGEiLCJyZXR1cm4gbmV3IEYoIituLmpvaW4oIiwiKSsiKSIpfXJldHVybiBhW3RdKGUscil9O2UuZXhwb3J0cz1GdW5jdGlvbi5iaW5kfHxmdW5jdGlvbihlKXt2YXIgdD1uKHRoaXMpLHI9cy5jYWxsKGFyZ3VtZW50cywxKSxhPWZ1bmN0aW9uKCl7dmFyIG49ci5jb25jYXQocy5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0aGlzIGluc3RhbmNlb2YgYT91KHQsbi5sZW5ndGgsbik6aSh0LG4sZSl9O3JldHVybiBvKHQucHJvdG90eXBlKSYmKGEucHJvdG90eXBlPXQucHJvdG90eXBlKSxhfX0sLyogMTU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0sLyogMTU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLnBhcnNlSW50LG89cig2MSkudHJpbSxpPXIoMTA4KSxzPS9eWy0rXT8wW3hYXS87ZS5leHBvcnRzPTghPT1uKGkrIjA4Iil8fDIyIT09bihpKyIweDE2Iik/ZnVuY3Rpb24oZSx0KXt2YXIgcj1vKFN0cmluZyhlKSwzKTtyZXR1cm4gbihyLHQ+Pj4wfHwocy50ZXN0KHIpPzE2OjEwKSl9Om59LC8qIDE1NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KS5wYXJzZUZsb2F0LG89cig2MSkudHJpbTtlLmV4cG9ydHM9MS9uKHIoMTA4KSsiLTAiKSE9LTEvMD9mdW5jdGlvbihlKXt2YXIgdD1vKFN0cmluZyhlKSwzKSxyPW4odCk7cmV0dXJuIDA9PT1yJiYiLSI9PXQuY2hhckF0KDApPy0wOnJ9Om59LC8qIDE1OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyOSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciIhPXR5cGVvZiBlJiYiTnVtYmVyIiE9bihlKSl0aHJvdyBUeXBlRXJyb3IodCk7cmV0dXJuK2V9fSwvKiAxNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcikKdmFyIG49cig2KSxvPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiFuKGUpJiZpc0Zpbml0ZShlKSYmbyhlKT09PWV9fSwvKiAxNjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gMjAuMi4yLjIwIE1hdGgubG9nMXAoeCkKZS5leHBvcnRzPU1hdGgubG9nMXB8fGZ1bmN0aW9uKGUpe3JldHVybihlPStlKT4tMWUtOCYmZTwxZS04P2UtZSplLzI6TWF0aC5sb2coMStlKX19LC8qIDE2MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xNiBNYXRoLmZyb3VuZCh4KQp2YXIgbj1yKDExMSksbz1NYXRoLnBvdyxpPW8oMiwtNTIpLHM9bygyLC0yMyksYT1vKDIsMTI3KSooMi1zKSx1PW8oMiwtMTI2KSxjPWZ1bmN0aW9uKGUpe3JldHVybiBlKzEvaS0xL2l9O2UuZXhwb3J0cz1NYXRoLmZyb3VuZHx8ZnVuY3Rpb24oZSl7dmFyIHQscixvPU1hdGguYWJzKGUpLGY9bihlKTsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gbzx1P2YqYyhvL3UvcykqdSpzOih0PSgxK3MvaSkqbyxyPXQtKHQtbykscj5hfHxyIT1yP2YqKDEvMCk6ZipyKX19LC8qIDE2MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3IKdmFyIG49cigzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKHQpe3ZhciBpPWUucmV0dXJuO3Rocm93IHZvaWQgMCE9PWkmJm4oaS5jYWxsKGUpKSx0fX19LC8qIDE2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNiksbz1yKDE1KSxpPXIoNzApLHM9cigxMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEsdSl7bih0KTt2YXIgYz1vKGUpLGY9aShjKSxsPXMoYy5sZW5ndGgpLGQ9dT9sLTE6MCxwPXU/LTE6MTtpZihyPDIpZm9yKDs7KXtpZihkIGluIGYpe2E9ZltkXSxkKz1wO2JyZWFrfWlmKGQrPXAsdT9kPDA6bDw9ZCl0aHJvdyBUeXBlRXJyb3IoIlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiKX1mb3IoO3U/ZD49MDpsPmQ7ZCs9cClkIGluIGYmJihhPXQoYSxmW2RdLGQsYykpO3JldHVybiBhfX0sLyogMTY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy4zIEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluKHRhcmdldCwgc3RhcnQsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgbj1yKDE1KSxvPXIoNTApLGk9cigxMik7ZS5leHBvcnRzPVtdLmNvcHlXaXRoaW58fGZ1bmN0aW9uKGUsdCl7dmFyIHI9bih0aGlzKSxzPWkoci5sZW5ndGgpLGE9byhlLHMpLHU9byh0LHMpLGM9YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDAsZj1NYXRoLm1pbigodm9pZCAwPT09Yz9zOm8oYyxzKSktdSxzLWEpLGw9MTtmb3IodTxhJiZhPHUrZiYmKGw9LTEsdSs9Zi0xLGErPWYtMSk7Zi0tID4wOyl1IGluIHI/clthXT1yW3VdOmRlbGV0ZSByW2FdLGErPWwsdSs9bDtyZXR1cm4gcn19LC8qIDE2NSAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LC8qIDE2NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIxLjIuNS4zIGdldCBSZWdFeHAucHJvdG90eXBlLmZsYWdzKCkKcigxMCkmJiJnIiE9Ly4vZy5mbGFncyYmcigxMSkuZihSZWdFeHAucHJvdG90eXBlLCJmbGFncyIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6cig4NSl9KX0sLyogMTY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSwvKiAxNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMyksbz1yKDYpLGk9cigxMjYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKG4oZSksbyh0KSYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIHI9aS5mKGUpO3JldHVybigwLHIucmVzb2x2ZSkodCksci5wcm9taXNlfX0sLyogMTY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxNzApLG89cig2Myk7Ci8vIDIzLjEgTWFwIE9iamVjdHMKZS5leHBvcnRzPXIoODkpKCJNYXAiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sewovLyAyMy4xLjMuNiBNYXAucHJvdG90eXBlLmdldChrZXkpCmdldDpmdW5jdGlvbihlKXt2YXIgdD1uLmdldEVudHJ5KG8odGhpcywiTWFwIiksZSk7cmV0dXJuIHQmJnQudn0sCi8vIDIzLjEuMy45IE1hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpCnNldDpmdW5jdGlvbihlLHQpe3JldHVybiBuLmRlZihvKHRoaXMsIk1hcCIpLDA9PT1lPzA6ZSx0KX19LG4sITApfSwvKiAxNzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDExKS5mLG89cig1MSksaT1yKDU2KSxzPXIoMjgpLGE9cig1NCksdT1yKDU1KSxjPXIoMTE0KSxmPXIoMTY1KSxsPXIoNTMpLGQ9cigxMCkscD1yKDQyKS5mYXN0S2V5LHk9cig2MyksaD1kPyJfcyI6InNpemUiLHY9ZnVuY3Rpb24oZSx0KXsKLy8gZmFzdCBjYXNlCnZhciByLG49cCh0KTtpZigiRiIhPT1uKXJldHVybiBlLl9pW25dOwovLyBmcm96ZW4gb2JqZWN0IGNhc2UKZm9yKHI9ZS5fZjtyO3I9ci5uKWlmKHIuaz09dClyZXR1cm4gcn07ZS5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQscixjKXt2YXIgZj1lKGZ1bmN0aW9uKGUsbil7YShlLGYsdCwiX2kiKSxlLl90PXQsLy8gY29sbGVjdGlvbiB0eXBlCmUuX2k9byhudWxsKSwvLyBpbmRleAplLl9mPXZvaWQgMCwvLyBmaXJzdCBlbnRyeQplLl9sPXZvaWQgMCwvLyBsYXN0IGVudHJ5CmVbaF09MCwvLyBzaXplCnZvaWQgMCE9biYmdShuLHIsZVtjXSxlKX0pO3JldHVybiBpKGYucHJvdG90eXBlLHsKLy8gMjMuMS4zLjEgTWFwLnByb3RvdHlwZS5jbGVhcigpCi8vIDIzLjIuMy4yIFNldC5wcm90b3R5cGUuY2xlYXIoKQpjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgZT15KHRoaXMsdCkscj1lLl9pLG49ZS5fZjtuO249bi5uKW4ucj0hMCxuLnAmJihuLnA9bi5wLm49dm9pZCAwKSxkZWxldGUgcltuLmldO2UuX2Y9ZS5fbD12b2lkIDAsZVtoXT0wfSwKLy8gMjMuMS4zLjMgTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQovLyAyMy4yLjMuNCBTZXQucHJvdG90eXBlLmRlbGV0ZSh2YWx1ZSkKZGVsZXRlOmZ1bmN0aW9uKGUpe3ZhciByPXkodGhpcyx0KSxuPXYocixlKTtpZihuKXt2YXIgbz1uLm4saT1uLnA7ZGVsZXRlIHIuX2lbbi5pXSxuLnI9ITAsaSYmKGkubj1vKSxvJiYoby5wPWkpLHIuX2Y9PW4mJihyLl9mPW8pLHIuX2w9PW4mJihyLl9sPWkpLHJbaF0tLX1yZXR1cm4hIW59LAovLyAyMy4yLjMuNiBTZXQucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKLy8gMjMuMS4zLjUgTWFwLnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcgPSB1bmRlZmluZWQpCmZvckVhY2g6ZnVuY3Rpb24oZSl7eSh0aGlzLHQpO2Zvcih2YXIgcixuPXMoZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtyPXI/ci5uOnRoaXMuX2Y7KQovLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnkKZm9yKG4oci52LHIuayx0aGlzKTtyJiZyLnI7KXI9ci5wfSwKLy8gMjMuMS4zLjcgTWFwLnByb3RvdHlwZS5oYXMoa2V5KQovLyAyMy4yLjMuNyBTZXQucHJvdG90eXBlLmhhcyh2YWx1ZSkKaGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhdih5KHRoaXMsdCksZSl9fSksZCYmbihmLnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMsdClbaF19fSksZn0sZGVmOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGk9dihlLHQpOwovLyBjaGFuZ2UgZXhpc3RpbmcgZW50cnkKLy8gYWRkIHRvIGluZGV4CnJldHVybiBpP2kudj1yOihlLl9sPWk9e2k6bz1wKHQsITApLC8vIDwtIGluZGV4Cms6dCwvLyA8LSBrZXkKdjpyLC8vIDwtIHZhbHVlCnA6bj1lLl9sLC8vIDwtIHByZXZpb3VzIGVudHJ5Cm46dm9pZCAwLC8vIDwtIG5leHQgZW50cnkKcjohMX0sZS5fZnx8KGUuX2Y9aSksbiYmKG4ubj1pKSxlW2hdKyssIkYiIT09byYmKGUuX2lbb109aSkpLGV9LGdldEVudHJ5OnYsc2V0U3Ryb25nOmZ1bmN0aW9uKGUsdCxyKXsKLy8gYWRkIC5rZXlzLCAudmFsdWVzLCAuZW50cmllcywgW0BAaXRlcmF0b3JdCi8vIDIzLjEuMy40LCAyMy4xLjMuOCwgMjMuMS4zLjExLCAyMy4xLjMuMTIsIDIzLjIuMy41LCAyMy4yLjMuOCwgMjMuMi4zLjEwLCAyMy4yLjMuMTEKYyhlLHQsZnVuY3Rpb24oZSxyKXt0aGlzLl90PXkoZSx0KSwvLyB0YXJnZXQKdGhpcy5faz1yLC8vIGtpbmQKdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Ci8vIHJldmVydCB0byB0aGUgbGFzdCBleGlzdGluZyBlbnRyeQpmb3IodmFyIGU9dGhpcyx0PWUuX2sscj1lLl9sO3ImJnIucjspcj1yLnA7Ci8vIGdldCBuZXh0IGVudHJ5Ci8vIGdldCBuZXh0IGVudHJ5Ci8vIHJldHVybiBzdGVwIGJ5IGtpbmQKLy8gb3IgZmluaXNoIHRoZSBpdGVyYXRpb24KcmV0dXJuIGUuX3QmJihlLl9sPXI9cj9yLm46ZS5fdC5fZik/ImtleXMiPT10P2YoMCxyLmspOiJ2YWx1ZXMiPT10P2YoMCxyLnYpOmYoMCxbci5rLHIudl0pOihlLl90PXZvaWQgMCxmKDEpKX0scj8iZW50cmllcyI6InZhbHVlcyIsIXIsITApLAovLyBhZGQgW0BAc3BlY2llc10sIDIzLjEuMi4yLCAyMy4yLjIuMgpsKHQpfX19LC8qIDE3MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTcwKSxvPXIoNjMpOwovLyAyMy4yIFNldCBPYmplY3RzCmUuZXhwb3J0cz1yKDg5KSgiU2V0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHsKLy8gMjMuMi4zLjEgU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpCmFkZDpmdW5jdGlvbihlKXtyZXR1cm4gbi5kZWYobyh0aGlzLCJTZXQiKSxlPTA9PT1lPzA6ZSxlKX19LG4pfSwvKiAxNzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPXIoMzYpKDApLGk9cigxOSkscz1yKDQyKSxhPXIoMTUzKSx1PXIoMTczKSxjPXIoNiksZj1yKDUpLGw9cig2MyksZD1zLmdldFdlYWsscD1PYmplY3QuaXNFeHRlbnNpYmxlLHk9dS51ZnN0b3JlLGg9e30sdj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LGc9ewovLyAyMy4zLjMuMyBXZWFrTWFwLnByb3RvdHlwZS5nZXQoa2V5KQpnZXQ6ZnVuY3Rpb24oZSl7aWYoYyhlKSl7dmFyIHQ9ZChlKTtyZXR1cm4hMD09PXQ/eShsKHRoaXMsIldlYWtNYXAiKSkuZ2V0KGUpOnQ/dFt0aGlzLl9pXTp2b2lkIDB9fSwKLy8gMjMuMy4zLjUgV2Vha01hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpCnNldDpmdW5jdGlvbihlLHQpe3JldHVybiB1LmRlZihsKHRoaXMsIldlYWtNYXAiKSxlLHQpfX0sYj1lLmV4cG9ydHM9cig4OSkoIldlYWtNYXAiLHYsZyx1LCEwLCEwKTsKLy8gSUUxMSBXZWFrTWFwIGZyb3plbiBrZXlzIGZpeApmKGZ1bmN0aW9uKCl7cmV0dXJuIDchPShuZXcgYikuc2V0KChPYmplY3QuZnJlZXplfHxPYmplY3QpKGgpLDcpLmdldChoKX0pJiYobj11LmdldENvbnN0cnVjdG9yKHYsIldlYWtNYXAiKSxhKG4ucHJvdG90eXBlLGcpLHMuTkVFRD0hMCxvKFsiZGVsZXRlIiwiaGFzIiwiZ2V0Iiwic2V0Il0sZnVuY3Rpb24oZSl7dmFyIHQ9Yi5wcm90b3R5cGUscj10W2VdO2kodCxlLGZ1bmN0aW9uKHQsbyl7Ci8vIHN0b3JlIGZyb3plbiBvYmplY3RzIG9uIGludGVybmFsIHdlYWttYXAgc2hpbQppZihjKHQpJiYhcCh0KSl7dGhpcy5fZnx8KHRoaXMuX2Y9bmV3IG4pO3ZhciBpPXRoaXMuX2ZbZV0odCxvKTtyZXR1cm4ic2V0Ij09ZT90aGlzOml9cmV0dXJuIHIuY2FsbCh0aGlzLHQsbyl9KX0pKX0sLyogMTczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1Niksbz1yKDQyKS5nZXRXZWFrLGk9cigzKSxzPXIoNiksYT1yKDU0KSx1PXIoNTUpLGM9cigzNiksZj1yKDIzKSxsPXIoNjMpLGQ9Yyg1KSxwPWMoNikseT0wLGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX2x8fChlLl9sPW5ldyB2KX0sdj1mdW5jdGlvbigpe3RoaXMuYT1bXX0sZz1mdW5jdGlvbihlLHQpe3JldHVybiBkKGUuYSxmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXR9KX07di5wcm90b3R5cGU9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1nKHRoaXMsZSk7aWYodClyZXR1cm4gdFsxXX0saGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhZyh0aGlzLGUpfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1nKHRoaXMsZSk7cj9yWzFdPXQ6dGhpcy5hLnB1c2goW2UsdF0pfSxkZWxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9cCh0aGlzLmEsZnVuY3Rpb24odCl7cmV0dXJuIHRbMF09PT1lfSk7cmV0dXJufnQmJnRoaXMuYS5zcGxpY2UodCwxKSwhIX50fX0sZS5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQscixpKXt2YXIgYz1lKGZ1bmN0aW9uKGUsbil7YShlLGMsdCwiX2kiKSxlLl90PXQsLy8gY29sbGVjdGlvbiB0eXBlCmUuX2k9eSsrLC8vIGNvbGxlY3Rpb24gaWQKZS5fbD12b2lkIDAsLy8gbGVhayBzdG9yZSBmb3IgdW5jYXVnaHQgZnJvemVuIG9iamVjdHMKdm9pZCAwIT1uJiZ1KG4scixlW2ldLGUpfSk7cmV0dXJuIG4oYy5wcm90b3R5cGUsewovLyAyMy4zLjMuMiBXZWFrTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQovLyAyMy40LjMuMyBXZWFrU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpCmRlbGV0ZTpmdW5jdGlvbihlKXtpZighcyhlKSlyZXR1cm4hMTt2YXIgcj1vKGUpO3JldHVybiEwPT09cj9oKGwodGhpcyx0KSkuZGVsZXRlKGUpOnImJmYocix0aGlzLl9pKSYmZGVsZXRlIHJbdGhpcy5faV19LAovLyAyMy4zLjMuNCBXZWFrTWFwLnByb3RvdHlwZS5oYXMoa2V5KQovLyAyMy40LjMuNCBXZWFrU2V0LnByb3RvdHlwZS5oYXModmFsdWUpCmhhczpmdW5jdGlvbihlKXtpZighcyhlKSlyZXR1cm4hMTt2YXIgcj1vKGUpO3JldHVybiEwPT09cj9oKGwodGhpcyx0KSkuaGFzKGUpOnImJmYocix0aGlzLl9pKX19KSxjfSxkZWY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8oaSh0KSwhMCk7cmV0dXJuITA9PT1uP2goZSkuc2V0KHQscik6bltlLl9pXT1yLGV9LHVmc3RvcmU6aH19LC8qIDE3NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvaW5kZXgKdmFyIG49cigzNCksbz1yKDEyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSlyZXR1cm4gMDt2YXIgdD1uKGUpLHI9byh0KTtpZih0IT09cil0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBsZW5ndGghIik7cmV0dXJuIHJ9fSwvKiAxNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzCnZhciBuPXIoNTIpLG89cig4MSksaT1yKDMpLHM9cig0KS5SZWZsZWN0O2UuZXhwb3J0cz1zJiZzLm93bktleXN8fGZ1bmN0aW9uKGUpe3ZhciB0PW4uZihpKGUpKSxyPW8uZjtyZXR1cm4gcj90LmNvbmNhdChyKGUpKTp0fX0sLyogMTc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZmxhdHRlbkludG9BcnJheShlLHQscix1LGMsZixsLGQpe2Zvcih2YXIgcCx5LGg9Yyx2PTAsZz0hIWwmJnMobCxkLDMpO3Y8dTspe2lmKHYgaW4gcil7aWYocD1nP2coclt2XSx2LHQpOnJbdl0seT0hMSxvKHApJiYoeT1wW2FdLHk9dm9pZCAwIT09eT8hIXk6bihwKSkseSYmZj4wKWg9ZmxhdHRlbkludG9BcnJheShlLHQscCxpKHAubGVuZ3RoKSxoLGYtMSktMTtlbHNle2lmKGg+PTkwMDcxOTkyNTQ3NDA5OTEpdGhyb3cgVHlwZUVycm9yKCk7ZVtoXT1wfWgrK312Kyt9cmV0dXJuIGh9Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtZmxhdE1hcC8jc2VjLUZsYXR0ZW5JbnRvQXJyYXkKdmFyIG49cig4Miksbz1yKDYpLGk9cigxMikscz1yKDI4KSxhPXIoOSkoImlzQ29uY2F0U3ByZWFkYWJsZSIpO2UuZXhwb3J0cz1mbGF0dGVuSW50b0FycmF5fSwvKiAxNzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZAp2YXIgbj1yKDEyKSxvPXIoMTEwKSxpPXIoMzMpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixzKXt2YXIgYT1TdHJpbmcoaShlKSksdT1hLmxlbmd0aCxjPXZvaWQgMD09PXI/IiAiOlN0cmluZyhyKSxmPW4odCk7aWYoZjw9dXx8IiI9PWMpcmV0dXJuIGE7dmFyIGw9Zi11LGQ9by5jYWxsKGMsTWF0aC5jZWlsKGwvYy5sZW5ndGgpKTtyZXR1cm4gZC5sZW5ndGg+bCYmKGQ9ZC5zbGljZSgwLGwpKSxzP2QrYTphK2R9fSwvKiAxNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDkpLG89cigyNCksaT1yKDcxKS5mO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciByLHM9byh0KSxhPW4ocyksdT1hLmxlbmd0aCxjPTAsZj1bXTt1PmM7KWkuY2FsbChzLHI9YVtjKytdKSYmZi5wdXNoKGU/W3Isc1tyXV06c1tyXSk7cmV0dXJuIGZ9fX0sLyogMTc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTgp2YXIgbj1yKDcyKSxvPXIoMTgwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYobih0aGlzKSE9ZSl0aHJvdyBUeXBlRXJyb3IoZSsiI3RvSlNPTiBpc24ndCBnZW5lcmljIik7cmV0dXJuIG8odGhpcyl9fX0sLyogMTgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXTtyZXR1cm4gbihlLCExLHIucHVzaCxyLHQpLHJ9fSwvKiAxODEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwplLmV4cG9ydHM9TWF0aC5zY2FsZXx8ZnVuY3Rpb24oZSx0LHIsbixvKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGh8fGUhPWV8fHQhPXR8fHIhPXJ8fG4hPW58fG8hPW8/TmFOOmU9PT0xLzB8fGU9PT0tMS8wP2U6KGUtdCkqKG8tbikvKHItdCkrbn19LC8qIDE4MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig1Nyksbz1yKDQ1KSxpPXIoNDE4KSghMSkscz1yKDEzMSkoIklFX1BST1RPIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsYT1vKGUpLHU9MCxjPVtdO2ZvcihyIGluIGEpciE9cyYmbihhLHIpJiZjLnB1c2gocik7Ci8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXMKZm9yKDt0Lmxlbmd0aD51OyluKGEscj10W3UrK10pJiYofmkoYyxyKXx8Yy5wdXNoKHIpKTtyZXR1cm4gY319LC8qIDE4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCnZhciBuPXIoNzQpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCmUuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0sLyogMTg0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoNDYpJiYhcig2NikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIoMTM1KSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDE4NSAqLwovKioqLwpmdW5jdGlvbihlLHQpe30sLyogMTg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig3NSksbz1yKDIxKSxpPXIoMTg3KSxzPXIoNTgpLGE9cig3NyksdT1yKDQyMiksYz1yKDk2KSxmPXIoMTg5KSxsPXIoMjIpKCJpdGVyYXRvciIpLGQ9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkscD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIseSxoLHYsZyl7dShyLHQseSk7dmFyIGIsXyxtLFI9ZnVuY3Rpb24oZSl7aWYoIWQmJmUgaW4gTylyZXR1cm4gT1tlXTtzd2l0Y2goZSl7Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0sdz10KyIgSXRlcmF0b3IiLFM9InZhbHVlcyI9PWgsaz0hMSxPPWUucHJvdG90eXBlLFA9T1tsXXx8T1siQEBpdGVyYXRvciJdfHxoJiZPW2hdLE09UHx8UihoKSxMPWg/Uz9SKCJlbnRyaWVzIik6TTp2b2lkIDAseD0iQXJyYXkiPT10P08uZW50cmllc3x8UDpQO2lmKAovLyBGaXggbmF0aXZlCngmJihtPWYoeC5jYWxsKG5ldyBlKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmbS5uZXh0JiYoCi8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKYyhtLHcsITApLAovLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKbnx8ImZ1bmN0aW9uIj09dHlwZW9mIG1bbF18fHMobSxsLHApKSwKLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgpTJiZQJiYidmFsdWVzIiE9PVAubmFtZSYmKGs9ITAsTT1mdW5jdGlvbigpe3JldHVybiBQLmNhbGwodGhpcyl9KSwKLy8gRGVmaW5lIGl0ZXJhdG9yCm4mJiFnfHwhZCYmIWsmJk9bbF18fHMoTyxsLE0pLAovLyBQbHVnIGZvciBsaWJyYXJ5CmFbdF09TSxhW3ddPXAsaClpZihiPXt2YWx1ZXM6Uz9NOlIoInZhbHVlcyIpLGtleXM6dj9NOlIoImtleXMiKSxlbnRyaWVzOkx9LGcpZm9yKF8gaW4gYilfIGluIE98fGkoTyxfLGJbX10pO2Vsc2UgbyhvLlArby5GKihkfHxrKSx0LGIpO3JldHVybiBifX0sLyogMTg3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9cig1OCl9LC8qIDE4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNykuZG9jdW1lbnQ7ZS5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSwvKiAxODkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDU3KSxvPXIoNzMpLGk9cigxMzEpKCJJRV9QUk9UTyIpLHM9T2JqZWN0LnByb3RvdHlwZTtlLmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlKXtyZXR1cm4gZT1vKGUpLG4oZSxpKT9lW2ldOiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yJiZlIGluc3RhbmNlb2YgZS5jb25zdHJ1Y3Rvcj9lLmNvbnN0cnVjdG9yLnByb3RvdHlwZTplIGluc3RhbmNlb2YgT2JqZWN0P3M6bnVsbH19LC8qIDE5MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MjQpO2Zvcih2YXIgbj1yKDE3KSxvPXIoNTgpLGk9cig3Nykscz1yKDIyKSgidG9TdHJpbmdUYWciKSxhPSJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdCIuc3BsaXQoIiwiKSx1PTA7dTxhLmxlbmd0aDt1Kyspe3ZhciBjPWFbdV0sZj1uW2NdLGw9ZiYmZi5wcm90b3R5cGU7bCYmIWxbc10mJm8obCxzLGMpLGlbY109aS5BcnJheX19LC8qIDE5MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBuPXIoNzQpLG89cigyMikoInRvU3RyaW5nVGFnIiksaT0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLHM9ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGVbdF19Y2F0Y2goZSl7fX07ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIsYTtyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPXModD1PYmplY3QoZSksbykpP3I6aT9uKHQpOiJPYmplY3QiPT0oYT1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOmF9fSwvKiAxOTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yCnZhciBuPXIoNDApO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2godCl7dmFyIGk9ZS5yZXR1cm47dGhyb3cgdm9pZCAwIT09aSYmbihpLmNhbGwoZSkpLHR9fX0sLyogMTkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvcgp2YXIgbj1yKDc3KSxvPXIoMjIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSwvKiAxOTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTkxKSxvPXIoMjIpKCJpdGVyYXRvciIpLGk9cig3Nyk7ZS5leHBvcnRzPXIoMTMpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9ZSlyZXR1cm4gZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldfX0sLyogMTk1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCnZhciBuPXIoNDApLG89cig5NSksaT1yKDIyKSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSwvKiAxOTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPXIoNjUpLGE9cig0MzApLHU9cigxODgpLGM9cigxMzUpLGY9cigxNyksbD1mLnByb2Nlc3MsZD1mLnNldEltbWVkaWF0ZSxwPWYuY2xlYXJJbW1lZGlhdGUseT1mLk1lc3NhZ2VDaGFubmVsLGg9Zi5EaXNwYXRjaCx2PTAsZz17fSxiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Z1tlXTtkZWxldGUgZ1tlXSx0KCl9fSxfPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTsKLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOgpkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gZ1srK3ZdPWZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwphKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgZ1tlXX0sCi8vIE5vZGUuanMgMC44LQoicHJvY2VzcyI9PXIoNzQpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OmgmJmgubm93P249ZnVuY3Rpb24oZSl7aC5ub3cocyhiLGUsMSkpfTp5PyhvPW5ldyB5LGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1fLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmYuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZi5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2YucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLF8sITEpKTpuPSJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gYygic2NyaXB0Iik/ZnVuY3Rpb24oZSl7dS5hcHBlbmRDaGlsZChjKCJzY3JpcHQiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksZS5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0sLyogMTk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSwvKiAxOTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDApLG89cig0MSksaT1yKDEzOSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYobihlKSxvKHQpJiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgcj1pLmYoZSk7cmV0dXJuKDAsci5yZXNvbHZlKSh0KSxyLnByb21pc2V9fSwvKiAxOTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2kucmV0dXJuPWZ1bmN0aW9uKCl7bz0hMH0sCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsCkFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChlKXt9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6cj0hMH19LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChlKXt9cmV0dXJuIHJ9fSwvKiAyMDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5sb2c9dm9pZCAwO3ZhciBuPXIoNyksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pLGk9by5kZWZhdWx0LmdldExvZ2dlcigiYWRkcmVzcy1hbGxvY2F0aW9uIikscz1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJCdXMiKSxhPW8uZGVmYXVsdC5nZXRMb2dnZXIoIk1lc3NhZ2VCdXMiKSx1PW8uZGVmYXVsdC5nZXRMb2dnZXIoIkNvcmVEaXNjb3ZlcnkiKSxjPW8uZGVmYXVsdC5nZXRMb2dnZXIoIkdyYXBoQ29ubmVjdG9yIiksZj1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSIpLGw9by5kZWZhdWx0LmdldExvZ2dlcigiSWRlbnRpdHlNb2R1bGUiKSxkPW8uZGVmYXVsdC5nZXRMb2dnZXIoIlBFUCIpLHA9by5kZWZhdWx0LmdldExvZ2dlcigiUDJQQ29ubmVjdGlvblJlc29sdmUiKSx5PW8uZGVmYXVsdC5nZXRMb2dnZXIoIlJlZ2lzdHJ5IiksaD1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJSdW50aW1lVUEiKSx2PW8uZGVmYXVsdC5nZXRMb2dnZXIoIkxvYWRlciIpLGc9by5kZWZhdWx0LmdldExvZ2dlcigiRGVzY3JpcHRvcnMiKSxiPW8uZGVmYXVsdC5nZXRMb2dnZXIoIkRhdGFPYmplY3RzU3RvcmFnZSIpLF89by5kZWZhdWx0LmdldExvZ2dlcigiU3Vic2NyaXB0aW9uIiksbT1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJTdWJzY3JpcHRpb25NYW5hZ2VyIiksUj1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJPYnNlcnZlck9iamVjdCIpLHc9by5kZWZhdWx0LmdldExvZ2dlcigiUmVwb3J0ZXJPYmplY3QiKSxTPW8uZGVmYXVsdC5nZXRMb2dnZXIoIlN5blN1YnNjcmlwdGlvbiIpLGs9by5kZWZhdWx0LmdldExvZ2dlcigiU3luY2hlck1hbmFnZXIiKSxPPW8uZGVmYXVsdC5nZXRMb2dnZXIoIklkZW50aXR5TWFuYWdlciIpLFA9by5kZWZhdWx0LmdldExvZ2dlcigiQ3J5cHRvTWFuYWdlciIpLE09by5kZWZhdWx0LmdldExvZ2dlcigiUGlwZWxpbmUiKTt0LmxvZz1vLmRlZmF1bHQsLyoqCiAgMCBhY3R1YWwgbG9nZ2luZyBtZXRob2RzLCBvcmRlcmVkIGFuZCBhdmFpbGFibGUgYXM6CgogICAgICAwIC0gbG9nLnRyYWNlKG1zZykKICAgICAgMSAtIGxvZy5kZWJ1Zyhtc2cpCiAgICAgIDIgLSBsb2cuaW5mbyhtc2cpCiAgICAgIDMgLSBsb2cud2Fybihtc2cpCiAgICAgIDQgLSBsb2cuZXJyb3IobXNnKQoKICBsb2cubG9nKG1zZykgaXMgYWxzbyBhdmFpbGFibGUsIGFzIGFuIGFsaWFzIGZvciBsb2cuZGVidWcobXNnKSwgdG8gaW1wcm92ZSBjb21wYXRpYmlsaXR5IHdpdGggY29uc29sZSwgYW5kIG1ha2UgbWlncmF0aW9uIGVhc2llci4KCiAgRXhhY3Qgb3V0cHV0IGZvcm1hdHRpbmcgb2YgdGhlc2Ugd2lsbCBkZXBlbmQgb24gdGhlIGNvbnNvbGUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGNvbnRleHQgb2YgeW91ciBhcHBsaWNhdGlvbi4gRm9yIGV4YW1wbGUsIG1hbnkgZW52aXJvbm1lbnRzIHdpbGwgaW5jbHVkZSBhIGZ1bGwgc3RhY2sgdHJhY2Ugd2l0aCBhbGwgdHJhY2UoKSBjYWxscywgYW5kIGljb25zIG9yIHNpbWlsYXIgdG8gaGlnaGxpZ2h0IG90aGVyIGNhbGxzLgoKICBUaGVzZSBtZXRob2RzIHNob3VsZCBuZXZlciBmYWlsIGluIGFueSBlbnZpcm9ubWVudCwgZXZlbiBpZiBubyBjb25zb2xlIG9iamVjdCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLCBhbmQgc2hvdWxkIGFsd2F5cyBmYWxsIGJhY2sgdG8gYW4gYXZhaWxhYmxlIGxvZyBtZXRob2QgZXZlbiBpZiB0aGUgc3BlY2lmaWMgbWV0aG9kIGNhbGxlZCAoZS5nLiB3YXJuKSBpc24ndCBhdmFpbGFibGUuCgogIEJlIGF3YXJlIHRoYXQgYWxsIHRoaXMgbWVhbnMgdGhhdCB0aGVzZSBtZXRob2Qgd29uJ3QgbmVjZXNzYXJpbHkgYWx3YXlzIHByb2R1Y2UgZXhhY3RseSB0aGUgb3V0cHV0IHlvdSBleHBlY3QgaW4gZXZlcnkgZW52aXJvbm1lbnQ7IGxvZ2xldmVsIG9ubHkgZ3VhcmFudGVlcyB0aGF0IHRoZXNlIG1ldGhvZHMgd2lsbCBuZXZlciBleHBsb2RlIG9uIHlvdSwgYW5kIHRoYXQgaXQgd2lsbCBjYWxsIHRoZSBtb3N0IHJlbGV2YW50IG1ldGhvZCBpdCBjYW4gZmluZCwgd2l0aCB5b3VyIGFyZ3VtZW50LiBGaXJlZm94IGlzIGEgbm90YWJsZSBleGFtcGxlIGhlcmU6IGR1ZSB0byBhIGN1cnJlbnQgRmlyZWZveCBidWcgbG9nLnRyYWNlKG1zZykgY2FsbHMgaW4gRmlyZWZveCB3aWxsIHByaW50IG9ubHkgdGhlIHN0YWNrdHJhY2UsIGFuZCB3b24ndCBpbmNsdWRlIGFueSBwYXNzZWQgbWVzc2FnZSBhcmd1bWVudHMuCgoqLwovLyBhZGRyZXNzLWFsbG9jYXRpb24KaS5zZXRMZXZlbCgzKSwKLy8gQnVzCnMuc2V0TGV2ZWwoMyksCi8vIE1lc3NhZ2VCdXMKYS5zZXRMZXZlbCgwKSwKLy8gQ29yZURpc2NvdmVyeQp1LnNldExldmVsKDUpLAovLyBHcmFwaENvbm5lY3RvcgpjLnNldExldmVsKDUpLAovLyBIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZQpmLnNldExldmVsKDMpLAovLyBJZGVudGl0eU1vZHVsZQpsLnNldExldmVsKDApLAovLyBQRVAKZC5zZXRMZXZlbCgzKSwKLy8gUDJQQ29ubmVjdGlvblJlc29sdmUKcC5zZXRMZXZlbCgzKSwKLy8gUmVnaXN0cnkKeS5zZXRMZXZlbCgzKSwKLy8gUnVudGltZVVBCmguc2V0TGV2ZWwoMyksCi8vIExvYWRlcgp2LnNldExldmVsKDMpLAovLyBEZXNjcmlwdG9ycwpnLnNldExldmVsKDMpLAovLyBEYXRhT2JqZWN0c1N0b3JhZ2UKYi5zZXRMZXZlbCgzKSwKLy8gU3Vic2NyaXB0aW9uCl8uc2V0TGV2ZWwoMyksCi8vIFN1YnNjcmlwdGlvbk1hbmFnZXIKbS5zZXRMZXZlbCgzKSwKLy8gT2JzZXJ2ZXJPYmplY3QKUi5zZXRMZXZlbCgzKSwKLy8gUmVwb3J0ZXJPYmplY3QKdy5zZXRMZXZlbCgzKSwKLy8gU3luU3Vic2NyaXB0aW9uClMuc2V0TGV2ZWwoMyksCi8vIFN5bmNoZXJNYW5hZ2VyCmsuc2V0TGV2ZWwoMyksCi8vIElkZW50aXR5TWFuYWdlcgpPLnNldExldmVsKDApLAovLyBDcnlwdG9NYW5hZ2VyClAuc2V0TGV2ZWwoMyksCi8vIFBpcGVsaW5lCk0uc2V0TGV2ZWwoMyl9LC8qIDIwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKdmFyIG49cigxODIpLG89cigxMzMpLmNvbmNhdCgibGVuZ3RoIiwicHJvdG90eXBlIik7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLG8pfX0sLyogMjAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNyksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9Zi5nZXRMb2dnZXIoIkJ1cyIpLGQ9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX21zZ0lkOiBudW1iZXI7CiAgX3N1YnNjcmlwdGlvbnM6IDx1cmw6IE1zZ0xpc3RlbmVyW10+CiAgIF9yZXNwb25zZVRpbWVPdXQ6IG51bWJlcgogIF9yZXNwb25zZUNhbGxiYWNrczogPHVybCtpZDogKG1zZykgPT4gdm9pZD4KICAgKi8KZnVuY3Rpb24gQnVzKCl7KDAscy5kZWZhdWx0KSh0aGlzLEJ1cyk7dmFyIGU9dGhpcztlLl9tc2dJZD0wLGUuX3N1YnNjcmlwdGlvbnM9e30sZS5fcmVzcG9uc2VUaW1lT3V0PTNlNCwvL2RlZmF1bHQgdG8gM3MKZS5fcmVzcG9uc2VDYWxsYmFja3M9e30sZS5fcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyKCl9LyoqCiAgKiBSZWdpc3RlciBsaXN0ZW5lciB0byByZWNlaXZlIG1lc3NhZ2Ugd2hlbiAibXNnLnRvID09PSB1cmwiLgogICogU3BlY2lhbCB1cmwgIioiIGZvciBkZWZhdWx0IGxpc3RlbmVyIGlzIGFjY2VwdGVkIHRvIGludGVyY2VwdCBhbGwgbWVzc2FnZXMuCiAgKiBAcGFyYW0ge1VSTH0gdXJsIEFkZHJlc3MgdG8gaW50ZXJjZXB0LCB0aGEgaXMgaW4gdGhlIG1lc3NhZ2UgInRvIgogICogQHBhcmFtIHtMaXN0ZW5lcn0gbGlzdGVuZXIgbGlzdGVuZXIKICAqIEByZXR1cm4ge01zZ0xpc3RlbmVyfSBpbnN0YW5jZSBvZiBNc2dMaXN0ZW5lcgogICovCnJldHVybigwLHUuZGVmYXVsdCkoQnVzLFt7a2V5OiJhZGRMaXN0ZW5lciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49bmV3IHAoci5fc3Vic2NyaXB0aW9ucyxlLHQpLG89ci5fc3Vic2NyaXB0aW9uc1tlXTtyZXR1cm4gb3x8KG89W10sci5fc3Vic2NyaXB0aW9uc1tlXT1vKSxvLnB1c2gobiksbn19LHtrZXk6ImFkZFJlc3BvbnNlTGlzdGVuZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tlK3RdPXJ9fSx7a2V5OiJyZW1vdmVSZXNwb25zZUxpc3RlbmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe2RlbGV0ZSB0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tlK3RdfX0se2tleToicmVtb3ZlQWxsTGlzdGVuZXJzT2YiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9zdWJzY3JpcHRpb25zW2VdfX0se2tleToiYmluZCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz10aGlzO3JldHVybnt0aGlzTGlzdGVuZXI6by5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKGUpe3IucG9zdE1lc3NhZ2UoZSl9KSx0YXJnZXRMaXN0ZW5lcjpyLmFkZExpc3RlbmVyKHQsZnVuY3Rpb24oZSl7by5wb3N0TWVzc2FnZShlKX0pLHVuYmluZDpmdW5jdGlvbigpe24udGhpc0xpc3RlbmVyLnJlbW92ZSgpLG4udGFyZ2V0TGlzdGVuZXIucmVtb3ZlKCl9fX19LHtrZXk6Il9wdWJsaXNoT25EZWZhdWx0Iix2YWx1ZTpmdW5jdGlvbihlKXsKLy9pcyB0aGVyZSBhbnkgIioiIChkZWZhdWx0KSBsaXN0ZW5lcnM/CnZhciB0PXRoaXMuX3N1YnNjcmlwdGlvbnNbIioiXTt0JiZ0aGlzLl9wdWJsaXNoT24odCxlKX19LHtrZXk6Il9wdWJsaXNoT24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuX2NhbGxiYWNrKHQpfSl9fSx7a2V5OiJfcmVzcG9uc2VDYWxsYmFjayIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLG49dGhpczsKLy9hdXRvbWF0aWMgbWFuYWdlbWVudCBvZiByZXNwb25zZSBoYW5kbGVycwppZih0KXt2YXIgbz1lLmZyb20rZS5pZDtuLl9yZXNwb25zZUNhbGxiYWNrc1tvXT10LHImJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgdD1uLl9yZXNwb25zZUNhbGxiYWNrc1tvXTtpZihkZWxldGUgbi5fcmVzcG9uc2VDYWxsYmFja3Nbb10sdCl7dCh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7Y29kZTo0MDgsZGVzYzoiUmVzcG9uc2UgdGltZW91dCEiLHZhbHVlOmV9fSl9fSxuLl9yZXNwb25zZVRpbWVPdXQpfX19LHtrZXk6Il9vblJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCJyZXNwb25zZSI9PT1lLnR5cGUpe3ZhciByPWUudG8rZS5pZCxuPXQuX3Jlc3BvbnNlQ2FsbGJhY2tzW3JdO2lmKGUuYm9keS5jb2RlPj0yMDAmJgovL2lmIGl0J3MgYSBwcm92aXNpb25hbCByZXNwb25zZSwgZG9uJ3QgZGVsZXRlIHJlc3BvbnNlIGxpc3RlbmVyCmRlbGV0ZSB0Ll9yZXNwb25zZUNhbGxiYWNrc1tyXSxuKXJldHVybiBuKGUpLCEwfXJldHVybiExfX0se2tleToiX29uTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fb25SZXNwb25zZShlKSl7dmFyIHI9dC5fc3Vic2NyaXB0aW9uc1tlLnRvXTtyP3QuX3B1Ymxpc2hPbihyLGUpOnQuX3B1Ymxpc2hPbkRlZmF1bHQoZSl9fX0se2tleToiX2dlbklkIix2YWx1ZTpmdW5jdGlvbihlKXsKLy9UT0RPOiBob3cgZG8gd2UgbWFuYWdlIG1lc3NhZ2UgSUQncz8gU2hvdWxkIGl0IGJlIGEgZ2xvYmFsIHJ1bnRpbWUgY291bnRlciwgb3IgcGVyIFVSTCBhZGRyZXNzPwovL0dsb2JhbCBjb3VudGVyIHdpbGwgbm90IHdvcmssIGJlY2F1c2UgdGhlcmUgd2lsbCBiZSBtdWx0aXBsZSBNaW5pQnVzIGluc3RhbmNlcyEKLy9QZXIgVVJMLCBjYW4gYmUgYSBsb3Qgb2YgZGF0YSB0byBtYWludGFpbiEKLy9NYXliZSBhIGNvdW50ZXIgcGVyIE1pbmlCdXMgaW5zdGFuY2UuIFRoaXMgaXMgdGhlIGFzc3VtZWQgc29sdXRpb24gZm9yIG5vdy4KZS5pZCYmMCE9PWUuaWR8fCh0aGlzLl9tc2dJZCsrLGUuaWQ9dGhpcy5fbXNnSWQpfX0se2tleToicG9zdE1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7fX0se2tleToicG9zdE1lc3NhZ2VXaXRoUmV0cmllcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT0wLHM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0LG8pe24ucG9zdE1lc3NhZ2UoZSxmdW5jdGlvbihuKXs0MDg9PT1uLmJvZHkuY29kZXx8NTAwPT09bi5ib2R5LmNvZGU/bygpOihsLmluZm8oIltCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllc10gbXNnIGRlbGl2ZXJlZDogIixlKSxyKG4pLHQoKSl9KX0pfTshZnVuY3Rpb24gdHJ5QWdhaW4oKXtzKCkudGhlbihmdW5jdGlvbigpe30sZnVuY3Rpb24oKXtpZihsLndhcm4oIltCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllc10gTWVzc2FnZSBCb3VuY2VkIChyZXRyeSAiK2krIik6ICciLGUpLCEoaSsrPHQpKXt2YXIgcj0iW0Vycm9yXSBNZXNzYWdlIEJvdW5jZWQgKGRlbGl2ZXJ5IGF0dGVtcHRzICIrdCsiKTogJyI7dGhyb3cgbmV3IEVycm9yKHIrZSl9dHJ5QWdhaW4oKX0pfSgpfX0se2tleToiX29uUG9zdE1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe319LHtrZXk6Il9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIiLHZhbHVlOmZ1bmN0aW9uKCl7fX1dKSxCdXN9KCkscD1mdW5jdGlvbigpey8qIHByaXZhdGUKICBfc3Vic2NyaXB0aW9uczogPHN0cmluZzogTXNnTGlzdGVuZXJbXT47CiAgX3VybDogc3RyaW5nOwogIF9jYWxsYmFjazogKG1zZykgPT4gdm9pZDsKICAqLwpmdW5jdGlvbiBNc2dMaXN0ZW5lcihlLHQscil7KDAscy5kZWZhdWx0KSh0aGlzLE1zZ0xpc3RlbmVyKTt2YXIgbj10aGlzO24uX3N1YnNjcmlwdGlvbnM9ZSxuLl91cmw9dCxuLl9jYWxsYmFjaz1yfXJldHVybigwLHUuZGVmYXVsdCkoTXNnTGlzdGVuZXIsW3trZXk6InJlbW92ZSIsLyoqCiAgICAgKiBSZW1vdmUgdGhpcyBsaXN0ZW5lciBmcm9tIHRoZSBCdXMKICAgICAqLwp2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLl9zdWJzY3JpcHRpb25zW2UuX3VybF07aWYodCl7dmFyIHI9dC5pbmRleE9mKGUpO3Quc3BsaWNlKHIsMSksCi8vaWYgdGhlcmUgYXJlIG5vIGxpc3RlbmVycywgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gZW50aXJlbHkuCjA9PT10Lmxlbmd0aCYmZGVsZXRlIGUuX3N1YnNjcmlwdGlvbnNbZS5fdXJsXX19fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fV0pLE1zZ0xpc3RlbmVyfSgpO3QuZGVmYXVsdD1kLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDU5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cig2NyksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig2OCksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig0NjgpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIEh5cGVydHlJbnN0YW5jZShlLHQscixuLGksYSx1LGMsbCxkLHAseSxoLHYsZyl7KDAscy5kZWZhdWx0KSh0aGlzLEh5cGVydHlJbnN0YW5jZSk7dmFyIGI9KDAsZi5kZWZhdWx0KSh0aGlzLChIeXBlcnR5SW5zdGFuY2UuX19wcm90b19ffHwoMCxvLmRlZmF1bHQpKEh5cGVydHlJbnN0YW5jZSkpLmNhbGwodGhpcyxlLHQscixwLHYsZykpLF89YjtyZXR1cm4gXy5fZGVzY3JpcHRvcj1uLF8uX2h5cGVydHlVUkw9aSxfLl91c2VyPWEsXy5fZ3VpZD11LF8uX3J1bnRpbWU9YyxfLl9jb250ZXh0PWwsXy5fcDJwSGFuZGxlcj1kLF8uX2RhdGFTY2hlbWVzPXksXy5fcmVzb3VyY2VzPWgsYn1yZXR1cm4oMCxkLmRlZmF1bHQpKEh5cGVydHlJbnN0YW5jZSxlKSwoMCx1LmRlZmF1bHQpKEh5cGVydHlJbnN0YW5jZSxbe2tleToidXNlciIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMudXNlcj1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlcn19LHtrZXk6Imh5cGVydHlVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oeXBlcnR5VVJMfX0se2tleToiZGVzY3JpcHRvciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3J9fSx7a2V5OiJvYmplY3ROYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvci5fb2JqZWN0TmFtZX19LHtrZXk6InAycEhhbmRsZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wMnBIYW5kbGVyfX0se2tleToiZGF0YVNjaGVtZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhU2NoZW1lc319LHtrZXk6InJlc291cmNlcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc291cmNlc319LHtrZXk6InJ1bnRpbWVVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lfX1dKSxIeXBlcnR5SW5zdGFuY2V9KHkuZGVmYXVsdCk7LyoqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiovCnQuZGVmYXVsdD1oLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIHZlcnNpb246IDAuOS4wCi8vIGRhdGU6IFR1ZSBKdWwgMTcgMjAxOCAxMTowMTozNiBHTVQrMDEwMCAoV2VzdGVybiBFdXJvcGVhbiBTdW1tZXIgVGltZSkKLy8gbGljZW5jZTogCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwohZnVuY3Rpb24odCxyKXtlLmV4cG9ydHM9cigpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihyKXtpZih0W3JdKXJldHVybiB0W3JdLmV4cG9ydHM7dmFyIG89dFtyXT17aTpyLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbcl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsbiksby5sPSEwLG8uZXhwb3J0c312YXIgdD17fTtyZXR1cm4gbi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxyKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0OnJ9KX0sbi5uPWZ1bmN0aW9uKGUpe3ZhciB0PWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiBuLmQodCwiYSIsdCksdH0sbi5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxuLnA9IiIsbihuLnM9MTk5KX0oezA6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmV4cG9ydHM9e3ZlcnNpb246IjIuNS43In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9cil9LDE6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9cil9LDEwOmZ1bmN0aW9uKGUsdCl7dmFyIHI9e30uaGFzT3duUHJvcGVydHk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY2FsbChlLHQpfX0sMTE6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOCksbz1yKDE2KTtlLmV4cG9ydHM9cig0KT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LDEyMzpmdW5jdGlvbihlLHQpeyFmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBlKGUsdCxyLG4sbyxpKXtmdW5jdGlvbiBzKGUsbil7aWYocy5kZWxheT1uLCFzLnBhdXNlJiZ1LmNoYW5nZXNldC5sZW5ndGg+MCl7aWYoIWUpe3ZhciBvPXUuY2hhbmdlc2V0LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hcnx8ci5pbmRleE9mKGUudHlwZSk+PTB9KTtvLmxlbmd0aD4wJiZ0KG8pfXUuY2hhbmdlc2V0PVtdfX12YXIgYSx1PXRoaXM7cmV0dXJuIHMucGF1c2U9byxzLmRlbGF5PWksdS5nZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4iX19vYnNlcnZlcl9fIj09PXQ/dToidW5vYnNlcnZlIj09PXQ/ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LnVub2JzZXJ2ZShlKSxlfToiZGVsaXZlciI9PT10P3M6ZVt0XX0sdS50YXJnZXQ9ZSx1LmNoYW5nZXNldD1bXSx1LnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX198fChPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19vYnNlcnZlckNhbGxiYWNrc19fIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITEsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19vYnNlcnZlcnNfXyIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSkpLHUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKHQpLHUudGFyZ2V0Ll9fb2JzZXJ2ZXJzX18ucHVzaCh0aGlzKSxhPW5ldyBQcm94eShlLHUpLHMoITEsaSksYX1PYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIFByb3h5fHwoZS5wcm90b3R5cGUuZGVsaXZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChudWxsLCJkZWxpdmVyIil9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQscil7dmFyIG49ZVt0XSxvPXZvaWQgMD09PW4/ImFkZCI6InVwZGF0ZSI7aWYoZVt0XT1yLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYoIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2Yobyk+PTApKXt2YXIgaT17b2JqZWN0OmUsbmFtZTp0LHR5cGU6b30scz0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLGE9dGhpcy5kZWxpdmVyKCk7InVwZGF0ZSI9PT1vJiYoaS5vbGRWYWx1ZT1uKSx0aGlzLmNoYW5nZXNldC5wdXNoKGkpLHMmJmEoITEsIm51bWJlciI9PXR5cGVvZiBhLmRlbGF5P2EuZGVsYXk6MTApfXJldHVybiEwfSxlLnByb3RvdHlwZS5kZWxldGVQcm9wZXJ0eT1mdW5jdGlvbihlLHQpe3ZhciByPWVbdF07aWYoZGVsZXRlIGVbdF0sZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJkZWxldGUiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOiJkZWxldGUiLG9sZFZhbHVlOnJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSwibnVtYmVyIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LGUucHJvdG90eXBlLmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCxyKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHIpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicmVjb25maWd1cmUiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOiJyZWNvbmZpZ3VyZSJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSwibnVtYmVyIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LGUucHJvdG90eXBlLnNldFByb3RvdHlwZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigic2V0UHJvdG90eXBlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOiJfX3Byb3RvX18iLHR5cGU6InNldFByb3RvdHlwZSIsb2xkVmFsdWU6cn0sbz0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLGk9dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxvJiZpKCExLCJudW1iZXIiPT10eXBlb2YgaS5kZWxheT9pLmRlbGF5OjEwKX1yZXR1cm4hMH0sZS5wcm90b3R5cGUucHJldmVudEV4dGVuc2lvbnM9ZnVuY3Rpb24oZSl7aWYoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKGUpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicHJldmVudEV4dGVuc2lvbnMiKT49MCl7dmFyIHQ9e29iamVjdDplLHR5cGU6InByZXZlbnRFeHRlbnNpb25zIn0scj0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG49dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaCh0KSxyJiZuKCExLCJudW1iZXIiPT10eXBlb2Ygbi5kZWxheT9uLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JqZWN0Lm9ic2VydmU9ZnVuY3Rpb24odCxyLG4sbyxpLHMpe3JldHVybiBuZXcgZSh0LHIsbixvLGkscyl9LE9iamVjdC51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyl7aWYoIXQpcmV0dXJuIGUuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZSgwLGUuX19vYnNlcnZlckNhbGxiYWNrc19fLmxlbmd0aCksdm9pZCBlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyc19fLmxlbmd0aCk7ZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihyLG4pe3Q9PT1yJiYoZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKG4sMSksZGVsZXRlIGUuX19vYnNlcnZlcnNfX1tuXS5jYWxsYmFjayxlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKG4sMSkpfSl9fSxBcnJheS5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtpZighKGUgaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShlKSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7cj1yfHxbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInNwbGljZSJdO3ZhciBzPW5ldyBQcm94eShlLHtnZXQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4idW5vYnNlcnZlIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIGU/T2JqZWN0LnVub2JzZXJ2ZSh0LGUpOnQudW5vYnNlcnZlKCl9OiJzcGxpY2UiPT09bj9mdW5jdGlvbihuLG8pe2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IHR3byBhcmd1bWVudHMgdG8gQXJyYXkgc3BsaWNlIGFyZSBub3QgbnVtYmVyLCBudW1iZXIiKTt2YXIgaT10aGlzLnNsaWNlKG4sbitvKSxzPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHMubGVuZ3RoLTI6MCx1PXtvYmplY3Q6ZSx0eXBlOiJzcGxpY2UiLGluZGV4Om4scmVtb3ZlZDppLGFkZGVkQ291bnQ6c307aWYodC5zcGxpY2UuYXBwbHkodCxhcmd1bWVudHMpLHIuaW5kZXhPZigic3BsaWNlIik+PTApe249MD09PWEuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5sZW5ndGg7dmFyIGM9YS5fX29ic2VydmVyX18uZGVsaXZlcigpO2EuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5wdXNoKHUpLG4mJmMoITEsIm51bWJlciI9PXR5cGVvZiBjLmRlbGF5P2MuZGVsYXk6MTApfX06InB1c2giPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgsMCxlKX06InBvcCI9PT1uP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLTEsMSl9OiJ1bnNoaWZ0Ij09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxlKX06InNoaWZ0Ij09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwxKX06dFtuXX19KSxhPU9iamVjdC5vYnNlcnZlKHMsZnVuY3Rpb24oZSl7dmFyIG49ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuImxlbmd0aCIhPT1lLm5hbWUmJiJhZGQiIT09ZS5uYW1lJiYoIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wKX0pO24ubGVuZ3RoPjAmJnQobil9LHIsbixvLGkpO3JldHVybiBhfSxBcnJheS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS51bm9ic2VydmUodCl9KSxPYmplY3QuZGVlcE9ic2VydmU9ZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIG8oZSxyKXtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe2lmKCgib2JqZWN0Ij09PW4oZVtvXSl8fCJhcnJheSI9PT1uKGVbb10pKSYmIWVbb10uaGFzT3duUHJvcGVydHkoIl9fb2JzZXJ2ZXJzX18iKSl7dmFyIGk9ci5zbGljZSgwKTtpLnB1c2gobyksZVtvXT1PYmplY3QuZGVlcE9ic2VydmUoZVtvXSx0LGkpfX0pfXZhciBuPWZ1bmN0aW9uKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkubWF0Y2goL1xzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gbyhlLHI9cnx8W10pLE9iamVjdC5vYnNlcnZlKGUsZnVuY3Rpb24obil7dmFyIGk9W107bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PShyLmxlbmd0aD4wP3Iuam9pbigiLiIpKyIuIjoiIikrZS5uYW1lOyJ1cGRhdGUiIT09ZS50eXBlJiYiYWRkIiE9PWUudHlwZXx8byhlLm9iamVjdCxyKSxpLnB1c2goe25hbWU6ZS5uYW1lLG9iamVjdDplLm9iamVjdCx0eXBlOmUudHlwZSxvbGRWYWx1ZTplLm9sZFZhbHVlLG5ld1ZhbHVlOmUub2JqZWN0W2UubmFtZV0sa2V5cGF0aDp0fSksZnVuY3Rpb24gZSh0LHIsbixvLHMpe28gaW5zdGFuY2VvZiBPYmplY3Q/T2JqZWN0LmtleXMobykuZm9yRWFjaChmdW5jdGlvbihhKXtpZighbnx8blthXSE9PW9bYV0pe3ZhciB1PW4mJnZvaWQgMCE9PW5bYV0/blthXTp2b2lkIDAsYz12b2lkIDA9PT11PyJhZGQiOiJ1cGRhdGUiLGY9cysiLiIrYTtpLnB1c2goe25hbWU6dCxvYmplY3Q6cix0eXBlOmMsb2xkVmFsdWU6dSxuZXdWYWx1ZTpvW2FdLGtleXBhdGg6Zn0pLGUodCxyLHUsb1thXSxmKX19KTpuIGluc3RhbmNlb2YgT2JqZWN0JiZPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciB1PW51bGw9PT1vPyJ1cGRhdGUiOiJkZWxldGUiLGM9cysiLiIrYTtpLnB1c2goe25hbWU6dCxvYmplY3Q6cix0eXBlOnUsb2xkVmFsdWU6blthXSxuZXdWYWx1ZTpvLGtleXBhdGg6Y30pLGUodCxyLG5bYV0sdm9pZCAwLGMpfSl9KGUubmFtZSxlLm9iamVjdCxlLm9sZFZhbHVlLGUub2JqZWN0W2UubmFtZV0sdCl9KSx0KGkpfSl9fSgpfSwxMzpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuISFlKCl9Y2F0Y2goZSl7cmV0dXJuITB9fX0sMTQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjQpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sMTY6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSwxOTk6ZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5XYXRjaGluZ1lvdT12b2lkIDA7dmFyIG49ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShyKDIwMCkpO3QuV2F0Y2hpbmdZb3U9bi5kZWZhdWx0fSwyMDA6ZnVuY3Rpb24odCxyLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBpKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkociwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89aShuKDMpKSxzPWkobig1KSk7bigxMjMpO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpeygwLG8uZGVmYXVsdCkodGhpcyxlKSx0aGlzLl93YXRjaGluZz17fSx0aGlzLl9vYnNlcnZlcnM9W119cmV0dXJuKDAscy5kZWZhdWx0KShlLFt7a2V5OiJ3YXRjaCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0mJmFyZ3VtZW50c1syXTtyZXR1cm4gdGhpcy5fd2F0Y2hpbmdbZV09bj9PYmplY3QuZGVlcE9ic2VydmUodCxmdW5jdGlvbih0KXt0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3IuX2ZpcmVFdmVudChlLHQpfSl9KTpPYmplY3Qub2JzZXJ2ZSh0LGZ1bmN0aW9uKHQpe3QuZXZlcnkoZnVuY3Rpb24odCl7ci5fZmlyZUV2ZW50KGUsdCl9KX0pLHRoaXMuX3dhdGNoaW5nW2VdfX0se2tleToib2JzZXJ2ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9vYnNlcnZlcnMucHVzaCh7a2V5OmUsY2FsbGJhY2s6dH0pfX0se2tleToiX2ZpcmVFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9vYnNlcnZlcnMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtleT09PWV9KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuY2FsbGJhY2sodCl9KX19XSksZX0oKTtyLmRlZmF1bHQ9YSx0LmV4cG9ydHM9ci5kZWZhdWx0fSwyNDpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0sMjc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIW4oZSkpcmV0dXJuIGU7dmFyIHIsbztpZih0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO2lmKCJmdW5jdGlvbiI9PXR5cGVvZihyPWUudmFsdWVPZikmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbztpZighdCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbzt0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpfX0sMjg6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyksbz1yKDEpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSwzOmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwLHQuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0sMzk6ZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz0hcig0KSYmIXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShyKDI4KSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LDQ6ZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz0hcigxMykoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSw1OmZ1bmN0aW9uKHQscixuKXsidXNlIHN0cmljdCI7ci5fX2VzTW9kdWxlPSEwO3ZhciBvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obig1OSkpO3IuZGVmYXVsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLG8uZGVmYXVsdCkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCl9LDU5OmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig2MSksX19lc01vZHVsZTohMH19LDY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMSksbz1yKDApLGk9cigxNCkscz1yKDExKSxhPXIoMTApLHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLGYsbCxkPWUmdS5GLHA9ZSZ1LkcseT1lJnUuUyxoPWUmdS5QLHY9ZSZ1LkIsZz1lJnUuVyxiPXA/bzpvW3RdfHwob1t0XT17fSksXz1iLnByb3RvdHlwZSxtPXA/bjp5P25bdF06KG5bdF18fHt9KS5wcm90b3R5cGU7Zm9yKGMgaW4gcCYmKHI9dCkscikoZj0hZCYmbSYmdm9pZCAwIT09bVtjXSkmJmEoYixjKXx8KGw9Zj9tW2NdOnJbY10sYltjXT1wJiYiZnVuY3Rpb24iIT10eXBlb2YgbVtjXT9yW2NdOnYmJmY/aShsLG4pOmcmJm1bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxyLG4pe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHQpO2Nhc2UgMjpyZXR1cm4gbmV3IGUodCxyKX1yZXR1cm4gbmV3IGUodCxyLG4pfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHQucHJvdG90eXBlPWUucHJvdG90eXBlLHR9KGwpOmgmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP2koRnVuY3Rpb24uY2FsbCxsKTpsLGgmJigoYi52aXJ0dWFsfHwoYi52aXJ0dWFsPXt9KSlbY109bCxlJnUuUiYmXyYmIV9bY10mJnMoXyxjLGwpKSl9O3UuRj0xLHUuRz0yLHUuUz00LHUuUD04LHUuQj0xNix1Llc9MzIsdS5VPTY0LHUuUj0xMjgsZS5leHBvcnRzPXV9LDYxOmZ1bmN0aW9uKGUsdCxyKXtyKDYyKTt2YXIgbj1yKDApLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LDYyOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpO24obi5TK24uRiohcig0KSwiT2JqZWN0Iix7ZGVmaW5lUHJvcGVydHk6cig4KS5mfSl9LDc6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0sODpmdW5jdGlvbihlLHQscil7dmFyIG49cig5KSxvPXIoMzkpLGk9cigyNykscz1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPXIoNCk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHQ9aSh0LCEwKSxuKHIpLG8pdHJ5e3JldHVybiBzKGUsdCxyKX1jYXRjaChlKXt9aWYoImdldCJpbiByfHwic2V0ImluIHIpdGhyb3cgVHlwZUVycm9yKCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEiKTtyZXR1cm4idmFsdWUiaW4gciYmKGVbdF09ci52YWx1ZSksZX19LDk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19fSl9KX0sLyogMjA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMzEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNDczKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDgpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoOTcpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMSksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cigyKSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDcpLHY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShoKSxnPXIoMTQpLGI9cigyMDQpLF89di5nZXRMb2dnZXIoIklkZW50aXR5TW9kdWxlIiksbT1mdW5jdGlvbigpe2Z1bmN0aW9uIElkZW50aXRpZXMoZSx0KXsoMCxkLmRlZmF1bHQpKHRoaXMsSWRlbnRpdGllcyk7dmFyIHI9dGhpcztyLl93YXRjaGluZ1lvdT1uZXcgYi5XYXRjaGluZ1lvdSxyLl9zdG9yYWdlTWFuYWdlcj10LHIuX2d1aWQsci5fdHlwZT1lLHIuX2lkZW50aXRpZXM9e30sci5fYWNjZXNzVG9rZW5zPXIud2F0Y2hpbmdZb3Uud2F0Y2goImFjY2Vzc1Rva2VucyIse30sITApfXJldHVybigwLHkuZGVmYXVsdCkoSWRlbnRpdGllcyxbe2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faWRlbnRpdGllcz17fSx0aGlzLmN1cnJlbnRJZGVudGl0eT12b2lkIDAsdGhpcy5kZWZhdWx0SWRlbnRpdHk9dm9pZCAwfX0se2tleToiZ2V0SWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybigwLGYuZGVmYXVsdCkoe30sdGhpcy5faWRlbnRpdGllc1tlXSl9fSx7a2V5OiJsb2FkSWRlbnRpdGllcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHQpe2UuX3N0b3JhZ2VNYW5hZ2VyLmdldChudWxsLG51bGwsImlkZW50aXRpZXMiKS50aGVuKGZ1bmN0aW9uKHIpe18uaW5mbygiW0lkZW50aXRpZXMuTG9hZCBJZGVudGl0aWVzXSBpZGVudGl0aWVzOiAiLHIpLHImJihlLl9pZGVudGl0aWVzPXIsCi8vIGxldCdzIHNldCBhcyBkZWZhdWx0IGlkZW50aXR5IHRoZSBvbmUgdGhhdCBleHBpcmVzIGxhdGVyCmUuaWRlbnRpZmllcnMuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj0oMCxnLnNlY29uZHNTaW5jZUVwb2NoKSgpLG49ZS5faWRlbnRpdGllc1t0XSxvPW4uZXhwaXJlczsKLy8gICAgICAgICAgICBpZiAoIWlkZW50aXR5Lmhhc093blByb3BlcnR5KCdpbnRlcndvcmtpbmcnKQovLyAgICAgICAgICAgIHx8ICFpZGVudGl0eS5pbnRlcndvcmtpbmcpIHsKZS5kZWZhdWx0SWRlbnRpdHk9dCxwYXJzZUludChvKT5yJiYoZS5kZWZhdWx0SWRlbnRpdHkuZXhwaXJlcz1wYXJzZUludChvKSxlLmN1cnJlbnRJZGVudGl0eT10KX0pKSx0KCl9KX0pfX0se2tleToibG9hZEFjY2Vzc1Rva2VucyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHQpe2UuX3N0b3JhZ2VNYW5hZ2VyLmdldCgiYWNjZXNzVG9rZW5zIikudGhlbihmdW5jdGlvbihyKXtyJiYoZS5fYWNjZXNzVG9rZW5zPXIpLHQoKX0pfSl9fSx7a2V5OiJhZGRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixvKXtpZihyLl9pc1ZhbGlkKGUpKXt2YXIgaT1lLmlkZW50aWZpZXJzWzBdOygwLGYuZGVmYXVsdCkodC5faWRlbnRpdGllc1tpXSxlKSx0Ll9zdG9yZUlkZW50aXR5KGUpLnRoZW4oZnVuY3Rpb24oKXt0Ll9pZGVudGl0aWVzW2ldLnN0YXR1cz0iY3JlYXRlZCIsbigpfSl9ZWxzZSBvKCJbSWRlbnRpdGllcy5hZGRJZGVudGl0eV0gaW52YWxpZCBJZEFzc2VydGlvbiIpfSl9fSx7a2V5OiJhZGRBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7aWYoci5faXNWYWxpZChlKSl7ZS51c2VyUHJvZmlsZS5ndWlkPXIuX2d1aWQ7dmFyIGk9ZS51c2VyUHJvZmlsZS51c2VyVVJMO3IuaWRlbnRpdGllc1tpXT9yLmlkZW50aXRpZXNbaV09ZTpyLl9pZGVudGl0aWVzW2ldPWUsci5fc3RvcmUoKS50aGVuKGZ1bmN0aW9uKCl7dC5faWRlbnRpdGllc1tpXS5zdGF0dXM9ImNyZWF0ZWQiLDA9PXIuZGVmYXVsdElkZW50aXR5JiYoci5kZWZhdWx0SWRlbnRpdHk9aSksbihlKX0pfWVsc2UgbygiW0lkZW50aXRpZXMuYWRkQXNzZXJ0aW9uXSBpbnZhbGlkIElkQXNzZXJ0aW9uOiAiLGUpfSl9fSx7a2V5OiJyZW1vdmVJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe2RlbGV0ZSB0LmlkZW50aXRpZXNbZV0sdC5fc3RvcmUoKS50aGVuKGZ1bmN0aW9uKCl7cigpfSl9KX19LHtrZXk6ImFkZEFjY2Vzc1Rva2VuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBfLmluZm8oIltJZGVudGl0aWVzLmFkZEFjY2Vzc1Rva2VuXSAiLGUpLG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9pc1ZhbGlkQWNjZXNzVG9rZW4oZSk/KAovLyAgICAgICAgbGV0IG5ld0FjY2Vzc1Rva2VuID0gZGVlcENsb25lKGFjY2Vzc1Rva2VuKTsKdC5fYWNjZXNzVG9rZW5zW2UuZG9tYWluXT1lLHQuX3N0b3JlQWNjZXNzVG9rZW5zKCkudGhlbihmdW5jdGlvbigpe3QuX2FjY2Vzc1Rva2Vuc1tlLmRvbWFpbl0uc3RhdHVzPSJjcmVhdGVkIixyKGUpfSkpOm4oIltJZGVudGl0aWVzLmFkZElkZW50aXR5XSBpbnZhbGlkIEFjY2Vzc1Rva2VuOiAiLGUpfSl9fSx7a2V5OiJzZXRBY2Nlc3NUb2tlbkluUHJvZ3Jlc3MiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX2FjY2Vzc1Rva2Vuc1tlXT90aGlzLl9hY2Nlc3NUb2tlbnNbZV0uc3RhdHVzPSJpbi1wcm9ncmVzcyI6dGhpcy5fYWNjZXNzVG9rZW5zW2VdPXtzdGF0dXM6ImluLXByb2dyZXNzIn19fSx7a2V5OiJnZXRBY2Nlc3NUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9hY2Nlc3NUb2tlbnNbZV07cmV0dXJuIHI/dC5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4tMSE9ci5yZXNvdXJjZXMuaW5kZXhPZihlKX0pP3RoaXMuX2FjY2Vzc1Rva2Vuc1tlXTpuZXcgRXJyb3IoIltJZGVudGl0aWVzLmdldEFjY2Vzc1Rva2VuXSBOb3QgZm91bmQgZm9yICIsZSk6dm9pZCAwfX0se2tleToidXBkYXRlQXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIpe3ZhciBuPWUudXNlclByb2ZpbGUudXNlclVybDtpZighdC5pZGVudGl0aWVzW25dKXJldHVybiByZWplY3QoIltJZGVudGl0aWVzLnVwZGF0ZUFzc2VydGlvbl0gSWRlbnRpdHkgbm90IGZvdW5kIGZvciAiLG4pO3QuaWRlbnRpdGllc1tuXT1lLHQuX3N0b3JlKCkudGhlbihmdW5jdGlvbigpe3IoKX0pfSl9fSx7a2V5OiJ1cGRhdGVBY2Nlc3NUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gXy5pbmZvKCJbSWRlbnRpdGllcy51cGRhdGVBY2Nlc3NUb2tlbl0gIixlKSxuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5faXNWYWxpZEFjY2Vzc1Rva2VuKGUpPyh0Ll9hY2Nlc3NUb2tlbnNbZS5kb21haW5dLmV4cGlyZXM9ZS5leHBpcmVzLHQuX2FjY2Vzc1Rva2Vuc1tlLmRvbWFpbl0uYWNjZXNzVG9rZW49ZS5hY2Nlc3NUb2tlbix0Ll9zdG9yZUFjY2Vzc1Rva2VucygpLnRoZW4oZnVuY3Rpb24oKXt0Ll9hY2Nlc3NUb2tlbnNbZS5kb21haW5dLnN0YXR1cz0iY3JlYXRlZCIscihlKX0pKTpuKCJbSWRlbnRpdGllcy51cGRhdGVBY2Nlc3NUb2tlbl0gaW52YWxpZCBBY2Nlc3NUb2tlbjogIixlKX0pfX0se2tleToiYWRkSWRBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMsaT1uZXcgUih0LHIsbik7by5pZEFzc2VydGlvbkxpc3QucHVzaChpKX19LHtrZXk6Il9pc1ZhbGlkIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZS5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9uIikpcmV0dXJuITE7dmFyIHQ9ZS5hc3NlcnRpb24uc3BsaXQoIi4iKTsKLy92ZXJpZnkgaWYgdGhlIHRva2VuIGNvbnRhaW5zIHRoZSAzIGNvbXBvbmVudHMsIG9yIGp1c3QgdGhlIGFzc2VydGlvbgp0cnl7dFsxXT8oMCxnLmRlY29kZSkodFsxXSk6KDAsZy5kZWNvZGUpKGUuYXNzZXJ0aW9uKX1jYXRjaChlKXtyZXR1cm4hMX1yZXR1cm4hMH19LHtrZXk6Il9pc1ZhbGlkQWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiEhZS5oYXNPd25Qcm9wZXJ0eSgiYWNjZXNzVG9rZW4iKSYmKCEhZS5oYXNPd25Qcm9wZXJ0eSgiZG9tYWluIikmJighKCFlLmhhc093blByb3BlcnR5KCJyZXNvdXJjZXMiKXx8IUFycmF5LmlzQXJyYXkoZS5yZXNvdXJjZXMpKSYmKCEoIWUuaGFzT3duUHJvcGVydHkoImV4cGlyZXMiKXx8ISgwLHMuZGVmYXVsdCkoZS5leHBpcmVzKSkmJiEhZS5oYXNPd25Qcm9wZXJ0eSgiaW5wdXQiKSkpKX19LHtrZXk6Il9zdG9yZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPSgwLG8uZGVmYXVsdCkoZS5faWRlbnRpdGllcykubWFwKGZ1bmN0aW9uKHIpe3JldHVybiB0Ll9zdG9yYWdlTWFuYWdlci5zZXQociwwLGUuX2lkZW50aXRpZXNbcl0sImlkZW50aXRpZXMiKX0pO3UuZGVmYXVsdC5hbGwoaSkudGhlbihmdW5jdGlvbigpe3IoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk9uIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGZyb20gbWV0aG9kIHN0b3JlSWRlbnRpdHkgZXJyb3I6ICIrZSl9KX0pfX0se2tleToiX3N0b3JlQWNjZXNzVG9rZW5zIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24odCxyKXt2YXIgbj0oMCxnLmRlZXBDbG9uZSkoZS5fYWNjZXNzVG9rZW5zKTtlLl9zdG9yYWdlTWFuYWdlci5zZXQoImFjY2Vzc1Rva2VucyIsMCxuKS50aGVuKGZ1bmN0aW9uKCl7dCgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cigiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBtZXRob2Qgc3RvcmVJZGVudGl0eSBlcnJvcjogIitlKX0pfSl9fSx7a2V5OiJpZGVudGl0aWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWRlbnRpdGllc319LHtrZXk6ImFjY2Vzc1Rva2VucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjY2Vzc1Rva2Vuc319LHtrZXk6IndhdGNoaW5nWW91IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2F0Y2hpbmdZb3V9fSx7a2V5OiJndWlkIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fZ3VpZD1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3VpZH19LHtrZXk6ImRlZmF1bHRJZGVudGl0eSIsc2V0OmZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlkZW50aXRpZXNbZV0pdGhyb3cgbmV3IEVycm9yKCJbSWRlbnRpdGllcy5zZXQgZGVmYXVsdElkZW50aXR5IF0gRXJyb3I6IGlkZW50aXR5IGRvZXMgbm90IGV4aXN0IGhlcmU6ICIsZSk7dGhpcy5fZGVmYXVsdElkZW50aXR5PWV9LGdldDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fZGVmYXVsdElkZW50aXR5JiYoMCxmLmRlZmF1bHQpKHt9LHRoaXMuaWRlbnRpdGllc1t0aGlzLl9kZWZhdWx0SWRlbnRpdHldKX19LHtrZXk6ImN1cnJlbnRJZGVudGl0eSIsc2V0OmZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlkZW50aXRpZXNbZV0pdGhyb3cgZTt0aGlzLl9jdXJyZW50SWRlbnRpdHk9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuKDAsZi5kZWZhdWx0KSh7fSx0aGlzLmlkZW50aXRpZXNbdGhpcy5fY3VycmVudElkZW50aXR5XSl9fSx7a2V5OiJpZGVudGlmaWVycyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuKDAsby5kZWZhdWx0KSh0aGlzLl9pZGVudGl0aWVzKX19XSksSWRlbnRpdGllc30oKSxSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSWRBc3NlcnRpb24oZSx0LHIpeygwLGQuZGVmYXVsdCkodGhpcyxJZEFzc2VydGlvbik7dmFyIG49dGhpcztuLl9hc3NlcnRpb249ZSxuLl9pZHA9dCxuLl91c2VyUHJvZmlsZT1yfXJldHVybigwLHkuZGVmYXVsdCkoSWRBc3NlcnRpb24sW3trZXk6ImFzc2VydGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Fzc2VydGlvbn19LHtrZXk6ImlkcCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkcH19LHtrZXk6InVzZXJQcm9maWxlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlclByb2ZpbGV9fV0pLElkQXNzZXJ0aW9ufSgpOyFmdW5jdGlvbigpe2Z1bmN0aW9uIElkVmFsaWRhdGlvbihlLHQpeygwLGQuZGVmYXVsdCkodGhpcyxJZFZhbGlkYXRpb24pO3ZhciByPXRoaXM7ci5pZGVudGl0eT1lLHIuY29udGVudHM9dH0oMCx5LmRlZmF1bHQpKElkVmFsaWRhdGlvbixbe2tleToidmFsaWRhdGVzIix2YWx1ZTpmdW5jdGlvbihlLHQpe319XSl9KCk7dC5kZWZhdWx0PW0sZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIEFsbG93T3ZlcnJpZGVzKCl7KDAsby5kZWZhdWx0KSh0aGlzLEFsbG93T3ZlcnJpZGVzKX1yZXR1cm4oMCxzLmRlZmF1bHQpKEFsbG93T3ZlcnJpZGVzLFt7a2V5OiJjb21iaW5lIiwvKioKICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBhdXRob3JpemF0aW9uIGRlY2lzaW9ucywgcHJpb3JpdGl6ZXMgYSBwb3NpdGl2ZSBvbmUuCiAgICAqIEBwYXJhbSAgICB7Ym9vbGVhbltdfSAgIGRlY2lzaW9ucwogICAgKiBAcmV0dXJucyAge2Jvb2xlYW59CiAgICAqLwp2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4tMSE9PWUuaW5kZXhPZighMCl8fC0xPT09ZS5pbmRleE9mKCExKSYmIk5vdCBBcHBsaWNhYmxlIn19XSksQWxsb3dPdmVycmlkZXN9KCk7dC5kZWZhdWx0PWEsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjA3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIEJsb2NrT3ZlcnJpZGVzKCl7KDAsby5kZWZhdWx0KSh0aGlzLEJsb2NrT3ZlcnJpZGVzKX1yZXR1cm4oMCxzLmRlZmF1bHQpKEJsb2NrT3ZlcnJpZGVzLFt7a2V5OiJjb21iaW5lIiwvKioKICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBhdXRob3Jpc2F0aW9uIGRlY2lzaW9ucywgcHJpb3JpdGlzZXMgYSBuZWdhdGl2ZSBvbmUuCiAgICAqIEBwYXJhbSAgICB7Ym9vbGVhbltdfSAgIGRlY2lzaW9ucwogICAgKiBAcmV0dXJucyAge2Jvb2xlYW59CiAgICAqLwp2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4tMT09PWUuaW5kZXhPZighMSkmJigtMSE9PWUuaW5kZXhPZighMCl8fCJOb3QgQXBwbGljYWJsZSIpfX1dKSxCbG9ja092ZXJyaWRlc30oKTt0LmRlZmF1bHQ9YSxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAyMDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRmlyc3RBcHBsaWNhYmxlKCl7KDAsby5kZWZhdWx0KSh0aGlzLEZpcnN0QXBwbGljYWJsZSl9cmV0dXJuKDAscy5kZWZhdWx0KShGaXJzdEFwcGxpY2FibGUsW3trZXk6ImNvbWJpbmUiLC8qKgogICAgKiBHaXZlbiBhbiBhcnJheSBvZiBpbmRpdmlkdWFsIGF1dGhvcmlzYXRpb24gZGVjaXNpb25zLCByZXR1cm5zIHRoZSBmaXJzdCBvbmUgZGlmZmVyZW50IGZyb20gJ05vdCBBcHBsaWNhYmxlJywgZWl0aGVyIHBvc2l0aXZlIG9yIG5lZ2F0aXZlLgogICAgKiBAcGFyYW0gICAge2Jvb2xlYW5bXX0gICAgIGRlY2lzaW9ucwogICAgKiBAcmV0dXJucyAge2Jvb2xlYW59CiAgICAqLwp2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZigiTm90IEFwcGxpY2FibGUiIT09ZVt0XSlyZXR1cm4gZVt0XTtyZXR1cm4iTm90IEFwcGxpY2FibGUifX1dKSxGaXJzdEFwcGxpY2FibGV9KCk7dC5kZWZhdWx0PWEsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjA5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig1MDIpLF9fZXNNb2R1bGU6ITB9fSwvKiAyMTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDUwOSksX19lc01vZHVsZTohMH19LC8qIDIxMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig3KSx1PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYSksYz11LmdldExvZ2dlcigiU3luU3Vic2NyaXB0aW9uIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIFN1YnNjcmlwdGlvbihlLHQscixuLGkpeygwLG8uZGVmYXVsdCkodGhpcyxTdWJzY3JpcHRpb24pO3ZhciBzPXRoaXMsYT1yKyIvY2hpbGRyZW4vIix1PXIrIi9jaGFuZ2VzIjsKLy9wcm9jZXNzIGRlbGV0ZSBtZXNzYWdlCnMuX2RlbGV0ZUxpc3RlbmVyPWUuYWRkTGlzdGVuZXIodSxmdW5jdGlvbihuKXtpZigiZGVsZXRlIj09PW4udHlwZSl7Yy5sb2coIlN1YnNjcmlwdGlvbi1ERUxFVEU6ICIsbik7Ci8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byBhbGwgc3Vic2NyaWJlcnMKdmFyIG89e3R5cGU6ImRlbGV0ZSIsZnJvbTpuLmZyb20sdG86dCxib2R5OntpZGVudGl0eTpuLmJvZHkuaWRlbnRpdHkscmVzb3VyY2U6cn19OwovL3NlbmQgZGVsZXRlIHRvIGh5cGVydHkKZS5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKGUpe2MubG9nKCJTdWJzY3JpcHRpb24tREVMRVRFLVJFUExZOiAiLGUpLDIwMD09PWUuYm9keS5jb2RlJiZzLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19KSwKLy9hZGQgY2hhbmdlIHB1Ymxpc2ggYWRkcmVzcyBvciBmb3J3YXJkCnMuX2NoYW5nZUxpc3RlbmVyPWk/ZS5hZGRQdWJsaXNoKHUpOmUuYWRkRm9yd2FyZCh1LHQpLHMuX2NoaWxkcmVuTGlzdGVuZXJzPVtdLGMubG9nKCJbU3Vic2NyaXB0aW9uXSAtIGNoaWxkSUQiLG4pLG4uZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj1hK3I7Yy5sb2coIltTdWJzY3JpcHRpb25dIC0gY2hpbGRJRCIsYSxuLHIpOwovL2FkZCBjaGlsZHJlbiBwdWJsaXNoIGFkZHJlc3MKdmFyIG89ZS5hZGRQdWJsaXNoKG4pOwovL2FkZCBzZWxmIGZvcndhcmQgaWYgYW4gb2JzZXJ2ZXIKaWYocy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChvKSwhaSl7dmFyIHU9ZS5hZGRGb3J3YXJkKG4sdCk7cy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaCh1KX19KX1yZXR1cm4oMCxzLmRlZmF1bHQpKFN1YnNjcmlwdGlvbixbe2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9kZWxldGVMaXN0ZW5lci5yZW1vdmUoKSxlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKSxlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KX19XSksU3Vic2NyaXB0aW9ufSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIxMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigyMTMpLGUuZXhwb3J0cz1yKDQxNSl9LC8qIDIxMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOy8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwooZnVuY3Rpb24oZSl7ZnVuY3Rpb24gZGVmaW5lKGUscixuKXtlW3JdfHxPYmplY3RbdF0oZSxyLHt3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITAsdmFsdWU6bn0pfWlmKHIoMjE0KSxyKDQxMSkscig0MTIpLGUuX2JhYmVsUG9seWZpbGwpdGhyb3cgbmV3IEVycm9yKCJvbmx5IG9uZSBpbnN0YW5jZSBvZiBiYWJlbC1wb2x5ZmlsbCBpcyBhbGxvd2VkIik7ZS5fYmFiZWxQb2x5ZmlsbD0hMDt2YXIgdD0iZGVmaW5lUHJvcGVydHkiO2RlZmluZShTdHJpbmcucHJvdG90eXBlLCJwYWRMZWZ0IiwiIi5wYWRTdGFydCksZGVmaW5lKFN0cmluZy5wcm90b3R5cGUsInBhZFJpZ2h0IiwiIi5wYWRFbmQpLCJwb3AscmV2ZXJzZSxzaGlmdCxrZXlzLHZhbHVlcyxlbnRyaWVzLGluZGV4T2YsZXZlcnksc29tZSxmb3JFYWNoLG1hcCxmaWx0ZXIsZmluZCxmaW5kSW5kZXgsaW5jbHVkZXMsam9pbixzbGljZSxjb25jYXQscHVzaCxzcGxpY2UsdW5zaGlmdCxzb3J0LGxhc3RJbmRleE9mLHJlZHVjZSxyZWR1Y2VSaWdodCxjb3B5V2l0aGluLGZpbGwiLnNwbGl0KCIsIikuZm9yRWFjaChmdW5jdGlvbihlKXtbXVtlXSYmZGVmaW5lKEFycmF5LGUsRnVuY3Rpb24uY2FsbC5iaW5kKFtdW2VdKSl9KX0pLmNhbGwodCxyKDE0NykpfSwvKiAyMTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMjE1KSxyKDIxNykscigyMTgpLHIoMjE5KSxyKDIyMCkscigyMjEpLHIoMjIyKSxyKDIyMykscigyMjQpLHIoMjI1KSxyKDIyNikscigyMjcpLHIoMjI4KSxyKDIyOSkscigyMzApLHIoMjMxKSxyKDIzMykscigyMzQpLHIoMjM1KSxyKDIzNikscigyMzcpLHIoMjM4KSxyKDIzOSkscigyNDApLHIoMjQxKSxyKDI0MikscigyNDMpLHIoMjQ0KSxyKDI0NSkscigyNDYpLHIoMjQ3KSxyKDI0OCkscigyNDkpLHIoMjUwKSxyKDI1MSkscigyNTIpLHIoMjUzKSxyKDI1NCkscigyNTUpLHIoMjU2KSxyKDI1NykscigyNTgpLHIoMjU5KSxyKDI2MCkscigyNjEpLHIoMjYyKSxyKDI2MykscigyNjQpLHIoMjY1KSxyKDI2NikscigyNjcpLHIoMjY4KSxyKDI2OSkscigyNzApLHIoMjcxKSxyKDI3MikscigyNzMpLHIoMjc0KSxyKDI3NSkscigyNzYpLHIoMjc3KSxyKDI3OCkscigyNzkpLHIoMjgwKSxyKDI4MSkscigyODIpLHIoMjgzKSxyKDI4NCkscigyODUpLHIoMjg2KSxyKDI4NykscigyODgpLHIoMjg5KSxyKDI5MCkscigyOTEpLHIoMjkyKSxyKDI5MykscigyOTUpLHIoMjk2KSxyKDI5OCkscigyOTkpLHIoMzAwKSxyKDMwMSkscigzMDIpLHIoMzAzKSxyKDMwNCkscigzMDYpLHIoMzA3KSxyKDMwOCkscigzMDkpLHIoMzEwKSxyKDMxMSkscigzMTIpLHIoMzEzKSxyKDMxNCkscigzMTUpLHIoMzE2KSxyKDMxNykscigzMTgpLHIoMTIzKSxyKDMxOSkscigzMjApLHIoMTY2KSxyKDMyMSkscigzMjIpLHIoMzIzKSxyKDMyNCkscigzMjUpLHIoMTY5KSxyKDE3MSkscigxNzIpLHIoMzI2KSxyKDMyNykscigzMjgpLHIoMzI5KSxyKDMzMCkscigzMzEpLHIoMzMyKSxyKDMzMykscigzMzQpLHIoMzM1KSxyKDMzNikscigzMzcpLHIoMzM4KSxyKDMzOSkscigzNDApLHIoMzQxKSxyKDM0MikscigzNDMpLHIoMzQ0KSxyKDM0NSkscigzNDYpLHIoMzQ3KSxyKDM0OCkscigzNDkpLHIoMzUwKSxyKDM1MSkscigzNTIpLHIoMzUzKSxyKDM1NCkscigzNTUpLHIoMzU2KSxyKDM1NykscigzNTgpLHIoMzU5KSxyKDM2MCkscigzNjEpLHIoMzYyKSxyKDM2MykscigzNjQpLHIoMzY1KSxyKDM2NikscigzNjcpLHIoMzY4KSxyKDM2OSkscigzNzApLHIoMzcxKSxyKDM3MikscigzNzMpLHIoMzc0KSxyKDM3NSkscigzNzYpLHIoMzc3KSxyKDM3OCkscigzNzkpLHIoMzgwKSxyKDM4MSkscigzODIpLHIoMzgzKSxyKDM4NCkscigzODUpLHIoMzg2KSxyKDM4NykscigzODgpLHIoMzg5KSxyKDM5MCkscigzOTEpLHIoMzkyKSxyKDM5MykscigzOTQpLHIoMzk1KSxyKDM5NikscigzOTcpLHIoMzk4KSxyKDM5OSkscig0MDApLHIoNDAxKSxyKDQwMikscig0MDMpLHIoNDA0KSxyKDQwNSkscig0MDYpLHIoNDA3KSxyKDQwOCkscig0MDkpLHIoNDEwKSxlLmV4cG9ydHM9cigyNyl9LC8qIDIxNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltCnZhciBuPXIoNCksbz1yKDIzKSxpPXIoMTApLHM9cigwKSxhPXIoMTkpLHU9cig0MikuS0VZLGM9cig1KSxmPXIoNzkpLGw9cig2MCksZD1yKDQ4KSxwPXIoOSkseT1yKDE0OSksaD1yKDEwMyksdj1yKDIxNiksZz1yKDgyKSxiPXIoMyksXz1yKDYpLG09cigyNCksUj1yKDMyKSx3PXIoNDcpLFM9cig1MSksaz1yKDE1MiksTz1yKDI1KSxQPXIoMTEpLE09cig0OSksTD1PLmYseD1QLmYsQT1rLmYsRD1uLlN5bWJvbCxVPW4uSlNPTixqPVUmJlUuc3RyaW5naWZ5LEU9cCgiX2hpZGRlbiIpLEk9cCgidG9QcmltaXRpdmUiKSxDPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLFQ9Zigic3ltYm9sLXJlZ2lzdHJ5IikscT1mKCJzeW1ib2xzIiksSD1mKCJvcC1zeW1ib2xzIiksRj1PYmplY3QucHJvdG90eXBlLE49ImZ1bmN0aW9uIj09dHlwZW9mIEQsQj1uLlFPYmplY3QsRz0hQnx8IUIucHJvdG90eXBlfHwhQi5wcm90b3R5cGUuZmluZENoaWxkLEs9aSYmYyhmdW5jdGlvbigpe3JldHVybiA3IT1TKHgoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4geCh0aGlzLCJhIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbihlLHQscil7dmFyIG49TChGLHQpO24mJmRlbGV0ZSBGW3RdLHgoZSx0LHIpLG4mJmUhPT1GJiZ4KEYsdCxuKX06eCxWPWZ1bmN0aW9uKGUpe3ZhciB0PXFbZV09UyhELnByb3RvdHlwZSk7cmV0dXJuIHQuX2s9ZSx0fSxXPU4mJiJzeW1ib2wiPT10eXBlb2YgRC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRH0sWT1mdW5jdGlvbihlLHQscil7cmV0dXJuIGU9PT1GJiZZKEgsdCxyKSxiKGUpLHQ9Uih0LCEwKSxiKHIpLG8ocSx0KT8oci5lbnVtZXJhYmxlPyhvKGUsRSkmJmVbRV1bdF0mJihlW0VdW3RdPSExKSxyPVMocix7ZW51bWVyYWJsZTp3KDAsITEpfSkpOihvKGUsRSl8fHgoZSxFLHcoMSx7fSkpLGVbRV1bdF09ITApLEsoZSx0LHIpKTp4KGUsdCxyKX0sej1mdW5jdGlvbihlLHQpe2IoZSk7Zm9yKHZhciByLG49dih0PW0odCkpLG89MCxpPW4ubGVuZ3RoO2k+bzspWShlLHI9bltvKytdLHRbcl0pO3JldHVybiBlfSxKPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/UyhlKTp6KFMoZSksdCl9LFo9ZnVuY3Rpb24oZSl7dmFyIHQ9Qy5jYWxsKHRoaXMsZT1SKGUsITApKTtyZXR1cm4hKHRoaXM9PT1GJiZvKHEsZSkmJiFvKEgsZSkpJiYoISh0fHwhbyh0aGlzLGUpfHwhbyhxLGUpfHxvKHRoaXMsRSkmJnRoaXNbRV1bZV0pfHx0KX0sUT1mdW5jdGlvbihlLHQpe2lmKGU9bShlKSx0PVIodCwhMCksZSE9PUZ8fCFvKHEsdCl8fG8oSCx0KSl7dmFyIHI9TChlLHQpO3JldHVybiFyfHwhbyhxLHQpfHxvKGUsRSkmJmVbRV1bdF18fChyLmVudW1lcmFibGU9ITApLHJ9fSwkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPUEobShlKSksbj1bXSxpPTA7ci5sZW5ndGg+aTspbyhxLHQ9cltpKytdKXx8dD09RXx8dD09dXx8bi5wdXNoKHQpO3JldHVybiBufSxYPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPWU9PT1GLG49QShyP0g6bShlKSksaT1bXSxzPTA7bi5sZW5ndGg+czspIW8ocSx0PW5bcysrXSl8fHImJiFvKEYsdCl8fGkucHVzaChxW3RdKTtyZXR1cm4gaX07Ci8vIDE5LjQuMS4xIFN5bWJvbChbZGVzY3JpcHRpb25dKQpOfHwoRD1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBEKXRocm93IFR5cGVFcnJvcigiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yISIpO3ZhciBlPWQoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApLHQ9ZnVuY3Rpb24ocil7dGhpcz09PUYmJnQuY2FsbChILHIpLG8odGhpcyxFKSYmbyh0aGlzW0VdLGUpJiYodGhpc1tFXVtlXT0hMSksSyh0aGlzLGUsdygxLHIpKX07cmV0dXJuIGkmJkcmJksoRixlLHtjb25maWd1cmFibGU6ITAsc2V0OnR9KSxWKGUpfSxhKEQucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLE8uZj1RLFAuZj1ZLHIoNTIpLmY9ay5mPSQscig3MSkuZj1aLHIoODEpLmY9WCxpJiYhcig0MykmJmEoRiwicHJvcGVydHlJc0VudW1lcmFibGUiLFosITApLHkuZj1mdW5jdGlvbihlKXtyZXR1cm4gVihwKGUpKX0pLHMocy5HK3MuVytzLkYqIU4se1N5bWJvbDpEfSk7Zm9yKHZhciBlZT0iaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMiLnNwbGl0KCIsIiksdGU9MDtlZS5sZW5ndGg+dGU7KXAoZWVbdGUrK10pO2Zvcih2YXIgcmU9TShwLnN0b3JlKSxuZT0wO3JlLmxlbmd0aD5uZTspaChyZVtuZSsrXSk7cyhzLlMrcy5GKiFOLCJTeW1ib2wiLHsKLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpCmZvcjpmdW5jdGlvbihlKXtyZXR1cm4gbyhULGUrPSIiKT9UW2VdOlRbZV09RChlKX0sCi8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQprZXlGb3I6ZnVuY3Rpb24oZSl7aWYoIVcoZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBzeW1ib2whIik7Zm9yKHZhciB0IGluIFQpaWYoVFt0XT09PWUpcmV0dXJuIHR9LHVzZVNldHRlcjpmdW5jdGlvbigpe0c9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe0c9ITF9fSkscyhzLlMrcy5GKiFOLCJPYmplY3QiLHsKLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQpjcmVhdGU6SiwKLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCmRlZmluZVByb3BlcnR5OlksCi8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCmRlZmluZVByb3BlcnRpZXM6eiwKLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQpnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6USwKLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKZ2V0T3duUHJvcGVydHlOYW1lczokLAovLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCmdldE93blByb3BlcnR5U3ltYm9sczpYfSksCi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQpVJiZzKHMuUytzLkYqKCFOfHxjKGZ1bmN0aW9uKCl7dmFyIGU9RCgpOwovLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQovLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwKLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKcmV0dXJuIltudWxsXSIhPWooW2VdKXx8Int9IiE9aih7YTplfSl8fCJ7fSIhPWooT2JqZWN0KGUpKX0pKSwiSlNPTiIse3N0cmluZ2lmeTpmdW5jdGlvbihlKXtmb3IodmFyIHQscixuPVtlXSxvPTE7YXJndW1lbnRzLmxlbmd0aD5vOyluLnB1c2goYXJndW1lbnRzW28rK10pO2lmKHI9dD1uWzFdLChfKHQpfHx2b2lkIDAhPT1lKSYmIVcoZSkpLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZApyZXR1cm4gZyh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksIVcodCkpcmV0dXJuIHR9KSxuWzFdPXQsai5hcHBseShVLG4pfX0pLAovLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpCkQucHJvdG90eXBlW0ldfHxyKDE4KShELnByb3RvdHlwZSxJLEQucHJvdG90eXBlLnZhbHVlT2YpLAovLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddCmwoRCwiU3ltYm9sIiksCi8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ10KbChNYXRoLCJNYXRoIiwhMCksCi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddCmwobi5KU09OLCJKU09OIiwhMCl9LC8qIDIxNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGFsbCBlbnVtZXJhYmxlIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBzeW1ib2xzCnZhciBuPXIoNDkpLG89cig4MSksaT1yKDcxKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bihlKSxyPW8uZjtpZihyKWZvcih2YXIgcyxhPXIoZSksdT1pLmYsYz0wO2EubGVuZ3RoPmM7KXUuY2FsbChlLHM9YVtjKytdKSYmdC5wdXNoKHMpO3JldHVybiB0fX0sLyogMjE3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApOwovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKbihuLlMsIk9iamVjdCIse2NyZWF0ZTpyKDUxKX0pfSwvKiAyMTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCk7Ci8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCm4obi5TK24uRiohcigxMCksIk9iamVjdCIse2RlZmluZVByb3BlcnR5OnIoMTEpLmZ9KX0sLyogMjE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApOwovLyAxOS4xLjIuMyAvIDE1LjIuMy43IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCm4obi5TK24uRiohcigxMCksIk9iamVjdCIse2RlZmluZVByb3BlcnRpZXM6cigxNTEpfSl9LC8qIDIyMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKdmFyIG49cigyNCksbz1yKDI1KS5mO3IoMzUpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8obihlKSx0KX19KX0sLyogMjIxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBuPXIoMTUpLG89cigyNik7cigzNSkoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sLyogMjIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pCnZhciBuPXIoMTUpLG89cig0OSk7cigzNSkoImtleXMiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSkpfX0pfSwvKiAyMjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQpyKDM1KSgiZ2V0T3duUHJvcGVydHlOYW1lcyIsZnVuY3Rpb24oKXtyZXR1cm4gcigxNTIpLmZ9KX0sLyogMjI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjUgT2JqZWN0LmZyZWV6ZShPKQp2YXIgbj1yKDYpLG89cig0Mikub25GcmVlemU7cigzNSkoImZyZWV6ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlJiZuKHQpP2Uobyh0KSk6dH19KX0sLyogMjI1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE3IE9iamVjdC5zZWFsKE8pCnZhciBuPXIoNiksbz1yKDQyKS5vbkZyZWV6ZTtyKDM1KSgic2VhbCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlJiZuKHQpP2Uobyh0KSk6dH19KX0sLyogMjI2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE1IE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhPKQp2YXIgbj1yKDYpLG89cig0Mikub25GcmVlemU7cigzNSkoInByZXZlbnRFeHRlbnNpb25zIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUmJm4odCk/ZShvKHQpKTp0fX0pfSwvKiAyMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTIgT2JqZWN0LmlzRnJvemVuKE8pCnZhciBuPXIoNik7cigzNSkoImlzRnJvemVuIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIW4odCl8fCEhZSYmZSh0KX19KX0sLyogMjI4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjEzIE9iamVjdC5pc1NlYWxlZChPKQp2YXIgbj1yKDYpO3IoMzUpKCJpc1NlYWxlZCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiFuKHQpfHwhIWUmJmUodCl9fSl9LC8qIDIyOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xMSBPYmplY3QuaXNFeHRlbnNpYmxlKE8pCnZhciBuPXIoNik7cigzNSkoImlzRXh0ZW5zaWJsZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiEhbih0KSYmKCFlfHxlKHQpKX19KX0sLyogMjMwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSkKdmFyIG49cigwKTtuKG4uUytuLkYsIk9iamVjdCIse2Fzc2lnbjpyKDE1Myl9KX0sLyogMjMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4zLjEwIE9iamVjdC5pcyh2YWx1ZTEsIHZhbHVlMikKdmFyIG49cigwKTtuKG4uUywiT2JqZWN0Iix7aXM6cigyMzIpfSl9LC8qIDIzMiAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjIuOSBTYW1lVmFsdWUoeCwgeSkKZS5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24oZSx0KXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gZT09PXQ/MCE9PWV8fDEvZT09MS90OmUhPWUmJnQhPXR9fSwvKiAyMzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKQp2YXIgbj1yKDApO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjpyKDEwNykuc2V0fSl9LC8qIDIzNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIG49cig3Miksbz17fTtvW3IoOSkoInRvU3RyaW5nVGFnIildPSJ6IixvKyIiIT0iW29iamVjdCB6XSImJnIoMTkpKE9iamVjdC5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiJbb2JqZWN0ICIrbih0aGlzKSsiXSJ9LCEwKX0sLyogMjM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMi4zLjIgLyAxNS4zLjQuNSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCh0aGlzQXJnLCBhcmdzLi4uKQp2YXIgbj1yKDApO24obi5QLCJGdW5jdGlvbiIse2JpbmQ6cigxNTQpfSl9LC8qIDIzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMSkuZixvPUZ1bmN0aW9uLnByb3RvdHlwZSxpPS9eXHMqZnVuY3Rpb24gKFteIChdKikvOwovLyAxOS4yLjQuMiBuYW1lCiJuYW1lImluIG98fHIoMTApJiZuKG8sIm5hbWUiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dHJ5e3JldHVybigiIit0aGlzKS5tYXRjaChpKVsxXX1jYXRjaChlKXtyZXR1cm4iIn19fSl9LC8qIDIzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNiksbz1yKDI2KSxpPXIoOSkoImhhc0luc3RhbmNlIikscz1GdW5jdGlvbi5wcm90b3R5cGU7Ci8vIDE5LjIuMy42IEZ1bmN0aW9uLnByb3RvdHlwZVtAQGhhc0luc3RhbmNlXShWKQppIGluIHN8fHIoMTEpLmYocyxpLHt2YWx1ZTpmdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdGhpc3x8IW4oZSkpcmV0dXJuITE7aWYoIW4odGhpcy5wcm90b3R5cGUpKXJldHVybiBlIGluc3RhbmNlb2YgdGhpczsKLy8gZm9yIGVudmlyb25tZW50IHcvbyBuYXRpdmUgYEBAaGFzSW5zdGFuY2VgIGxvZ2ljIGVub3VnaCBgaW5zdGFuY2VvZmAsIGJ1dCBhZGQgdGhpczoKZm9yKDtlPW8oZSk7KWlmKHRoaXMucHJvdG90eXBlPT09ZSlyZXR1cm4hMDtyZXR1cm4hMX19KX0sLyogMjM4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigxNTYpOwovLyAxOC4yLjUgcGFyc2VJbnQoc3RyaW5nLCByYWRpeCkKbihuLkcrbi5GKihwYXJzZUludCE9bykse3BhcnNlSW50Om99KX0sLyogMjM5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigxNTcpOwovLyAxOC4yLjQgcGFyc2VGbG9hdChzdHJpbmcpCm4obi5HK24uRioocGFyc2VGbG9hdCE9bykse3BhcnNlRmxvYXQ6b30pfSwvKiAyNDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQpLG89cigyMyksaT1yKDI5KSxzPXIoMTA5KSxhPXIoMzIpLHU9cig1KSxjPXIoNTIpLmYsZj1yKDI1KS5mLGw9cigxMSkuZixkPXIoNjEpLnRyaW0scD1uLk51bWJlcix5PXAsaD1wLnByb3RvdHlwZSx2PSJOdW1iZXIiPT1pKHIoNTEpKGgpKSxnPSJ0cmltImluIFN0cmluZy5wcm90b3R5cGUsYj1mdW5jdGlvbihlKXt2YXIgdD1hKGUsITEpO2lmKCJzdHJpbmciPT10eXBlb2YgdCYmdC5sZW5ndGg+Mil7dD1nP3QudHJpbSgpOmQodCwzKTt2YXIgcixuLG8saT10LmNoYXJDb2RlQXQoMCk7aWYoNDM9PT1pfHw0NT09PWkpe2lmKDg4PT09KHI9dC5jaGFyQ29kZUF0KDIpKXx8MTIwPT09cilyZXR1cm4gTmFOfWVsc2UgaWYoNDg9PT1pKXtzd2l0Y2godC5jaGFyQ29kZUF0KDEpKXtjYXNlIDY2OmNhc2UgOTg6bj0yLG89NDk7YnJlYWs7Ly8gZmFzdCBlcXVhbCAvXjBiWzAxXSskL2kKY2FzZSA3OTpjYXNlIDExMTpuPTgsbz01NTticmVhazsvLyBmYXN0IGVxdWFsIC9eMG9bMC03XSskL2kKZGVmYXVsdDpyZXR1cm4rdH1mb3IodmFyIHMsdT10LnNsaWNlKDIpLGM9MCxmPXUubGVuZ3RoO2M8ZjtjKyspCi8vIHBhcnNlSW50IHBhcnNlcyBhIHN0cmluZyB0byBhIGZpcnN0IHVuYXZhaWxhYmxlIHN5bWJvbAovLyBidXQgVG9OdW1iZXIgc2hvdWxkIHJldHVybiBOYU4gaWYgYSBzdHJpbmcgY29udGFpbnMgdW5hdmFpbGFibGUgc3ltYm9scwppZigocz11LmNoYXJDb2RlQXQoYykpPDQ4fHxzPm8pcmV0dXJuIE5hTjtyZXR1cm4gcGFyc2VJbnQodSxuKX19cmV0dXJuK3R9O2lmKCFwKCIgMG8xIil8fCFwKCIwYjEiKXx8cCgiKzB4MSIpKXtwPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8MT8wOmUscj10aGlzO3JldHVybiByIGluc3RhbmNlb2YgcCYmKHY/dShmdW5jdGlvbigpe2gudmFsdWVPZi5jYWxsKHIpfSk6Ik51bWJlciIhPWkocikpP3MobmV3IHkoYih0KSkscixwKTpiKHQpfTtmb3IodmFyIF8sbT1yKDEwKT9jKHkpOiJNQVhfVkFMVUUsTUlOX1ZBTFVFLE5hTixORUdBVElWRV9JTkZJTklUWSxQT1NJVElWRV9JTkZJTklUWSxFUFNJTE9OLGlzRmluaXRlLGlzSW50ZWdlcixpc05hTixpc1NhZmVJbnRlZ2VyLE1BWF9TQUZFX0lOVEVHRVIsTUlOX1NBRkVfSU5URUdFUixwYXJzZUZsb2F0LHBhcnNlSW50LGlzSW50ZWdlciIuc3BsaXQoIiwiKSxSPTA7bS5sZW5ndGg+UjtSKyspbyh5LF89bVtSXSkmJiFvKHAsXykmJmwocCxfLGYoeSxfKSk7cC5wcm90b3R5cGU9aCxoLmNvbnN0cnVjdG9yPXAscigxOSkobiwiTnVtYmVyIixwKX19LC8qIDI0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDM0KSxpPXIoMTU4KSxzPXIoMTEwKSxhPTEuLnRvRml4ZWQsdT1NYXRoLmZsb29yLGM9WzAsMCwwLDAsMCwwXSxmPSJOdW1iZXIudG9GaXhlZDogaW5jb3JyZWN0IGludm9jYXRpb24hIixsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPS0xLG49dDsrK3I8Njspbis9ZSpjW3JdLGNbcl09biUxZTcsbj11KG4vMWU3KX0sZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9NixyPTA7LS10Pj0wOylyKz1jW3RdLGNbdF09dShyL2UpLHI9ciVlKjFlN30scD1mdW5jdGlvbigpe2Zvcih2YXIgZT02LHQ9IiI7LS1lPj0wOylpZigiIiE9PXR8fDA9PT1lfHwwIT09Y1tlXSl7dmFyIHI9U3RyaW5nKGNbZV0pO3Q9IiI9PT10P3I6dCtzLmNhbGwoIjAiLDctci5sZW5ndGgpK3J9cmV0dXJuIHR9LHk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiAwPT09dD9yOnQlMj09MT95KGUsdC0xLHIqZSk6eShlKmUsdC8yLHIpfSxoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZTtyPj00MDk2Oyl0Kz0xMixyLz00MDk2O2Zvcig7cj49MjspdCs9MSxyLz0yO3JldHVybiB0fTtuKG4uUCtuLkYqKCEhYSYmKCIwLjAwMCIhPT04ZS01LnRvRml4ZWQoMyl8fCIxIiE9PS45LnRvRml4ZWQoMCl8fCIxLjI1IiE9PTEuMjU1LnRvRml4ZWQoMil8fCIxMDAwMDAwMDAwMDAwMDAwMTI4IiE9PSgweGRlMGI2YjNhNzY0MDA4MCkudG9GaXhlZCgwKSl8fCFyKDUpKGZ1bmN0aW9uKCl7Ci8vIFY4IH4gQW5kcm9pZCA0LjMtCmEuY2FsbCh7fSl9KSksIk51bWJlciIse3RvRml4ZWQ6ZnVuY3Rpb24oZSl7dmFyIHQscixuLGEsdT1pKHRoaXMsZiksYz1vKGUpLHY9IiIsZz0iMCI7aWYoYzwwfHxjPjIwKXRocm93IFJhbmdlRXJyb3IoZik7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYodSE9dSlyZXR1cm4iTmFOIjtpZih1PD0tMWUyMXx8dT49MWUyMSlyZXR1cm4gU3RyaW5nKHUpO2lmKHU8MCYmKHY9Ii0iLHU9LXUpLHU+MWUtMjEpaWYodD1oKHUqeSgyLDY5LDEpKS02OSxyPXQ8MD91KnkoMiwtdCwxKTp1L3koMix0LDEpLHIqPTQ1MDM1OTk2MjczNzA0OTYsKHQ9NTItdCk+MCl7Zm9yKGwoMCxyKSxuPWM7bj49NzspbCgxZTcsMCksbi09Nztmb3IobCh5KDEwLG4sMSksMCksbj10LTE7bj49MjM7KWQoMTw8MjMpLG4tPTIzO2QoMTw8biksbCgxLDEpLGQoMiksZz1wKCl9ZWxzZSBsKDAsciksbCgxPDwtdCwwKSxnPXAoKStzLmNhbGwoIjAiLGMpO3JldHVybiBjPjA/KGE9Zy5sZW5ndGgsZz12KyhhPD1jPyIwLiIrcy5jYWxsKCIwIixjLWEpK2c6Zy5zbGljZSgwLGEtYykrIi4iK2cuc2xpY2UoYS1jKSkpOmc9ditnLGd9fSl9LC8qIDI0MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDUpLGk9cigxNTgpLHM9MS4udG9QcmVjaXNpb247bihuLlArbi5GKihvKGZ1bmN0aW9uKCl7Ci8vIElFNy0KcmV0dXJuIjEiIT09cy5jYWxsKDEsdm9pZCAwKX0pfHwhbyhmdW5jdGlvbigpewovLyBWOCB+IEFuZHJvaWQgNC4zLQpzLmNhbGwoe30pfSkpLCJOdW1iZXIiLHt0b1ByZWNpc2lvbjpmdW5jdGlvbihlKXt2YXIgdD1pKHRoaXMsIk51bWJlciN0b1ByZWNpc2lvbjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIHZvaWQgMD09PWU/cy5jYWxsKHQpOnMuY2FsbCh0LGUpfX0pfSwvKiAyNDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMSBOdW1iZXIuRVBTSUxPTgp2YXIgbj1yKDApO24obi5TLCJOdW1iZXIiLHtFUFNJTE9OOk1hdGgucG93KDIsLTUyKX0pfSwvKiAyNDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMiBOdW1iZXIuaXNGaW5pdGUobnVtYmVyKQp2YXIgbj1yKDApLG89cig0KS5pc0Zpbml0ZTtuKG4uUywiTnVtYmVyIix7aXNGaW5pdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlJiZvKGUpfX0pfSwvKiAyNDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcikKdmFyIG49cigwKTtuKG4uUywiTnVtYmVyIix7aXNJbnRlZ2VyOnIoMTU5KX0pfSwvKiAyNDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuNCBOdW1iZXIuaXNOYU4obnVtYmVyKQp2YXIgbj1yKDApO24obi5TLCJOdW1iZXIiLHtpc05hTjpmdW5jdGlvbihlKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gZSE9ZX19KX0sLyogMjQ3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjUgTnVtYmVyLmlzU2FmZUludGVnZXIobnVtYmVyKQp2YXIgbj1yKDApLG89cigxNTkpLGk9TWF0aC5hYnM7bihuLlMsIk51bWJlciIse2lzU2FmZUludGVnZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSkmJmkoZSk8PTkwMDcxOTkyNTQ3NDA5OTF9fSl9LC8qIDI0OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi42IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSCnZhciBuPXIoMCk7bihuLlMsIk51bWJlciIse01BWF9TQUZFX0lOVEVHRVI6OTAwNzE5OTI1NDc0MDk5MX0pfSwvKiAyNDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMTAgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIKdmFyIG49cigwKTtuKG4uUywiTnVtYmVyIix7TUlOX1NBRkVfSU5URUdFUjotOTAwNzE5OTI1NDc0MDk5MX0pfSwvKiAyNTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksbz1yKDE1Nyk7Ci8vIDIwLjEuMi4xMiBOdW1iZXIucGFyc2VGbG9hdChzdHJpbmcpCm4obi5TK24uRiooTnVtYmVyLnBhcnNlRmxvYXQhPW8pLCJOdW1iZXIiLHtwYXJzZUZsb2F0Om99KX0sLyogMjUxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigxNTYpOwovLyAyMC4xLjIuMTMgTnVtYmVyLnBhcnNlSW50KHN0cmluZywgcmFkaXgpCm4obi5TK24uRiooTnVtYmVyLnBhcnNlSW50IT1vKSwiTnVtYmVyIix7cGFyc2VJbnQ6b30pfSwvKiAyNTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMyBNYXRoLmFjb3NoKHgpCnZhciBuPXIoMCksbz1yKDE2MCksaT1NYXRoLnNxcnQscz1NYXRoLmFjb3NoO24obi5TK24uRiohKHMmJjcxMD09TWF0aC5mbG9vcihzKE51bWJlci5NQVhfVkFMVUUpKSYmcygxLzApPT0xLzApLCJNYXRoIix7YWNvc2g6ZnVuY3Rpb24oZSl7cmV0dXJuKGU9K2UpPDE/TmFOOmU+OTQ5MDYyNjUuNjI0MjUxNTY/TWF0aC5sb2coZSkrTWF0aC5MTjI6byhlLTEraShlLTEpKmkoZSsxKSl9fSl9LC8qIDI1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gYXNpbmgoZSl7cmV0dXJuIGlzRmluaXRlKGU9K2UpJiYwIT1lP2U8MD8tYXNpbmgoLWUpOk1hdGgubG9nKGUrTWF0aC5zcXJ0KGUqZSsxKSk6ZX0KLy8gMjAuMi4yLjUgTWF0aC5hc2luaCh4KQp2YXIgbj1yKDApLG89TWF0aC5hc2luaDsKLy8gVG9yIEJyb3dzZXIgYnVnOiBNYXRoLmFzaW5oKDApIC0+IC0wCm4obi5TK24uRiohKG8mJjEvbygwKT4wKSwiTWF0aCIse2FzaW5oOmFzaW5ofSl9LC8qIDI1NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi43IE1hdGguYXRhbmgoeCkKdmFyIG49cigwKSxvPU1hdGguYXRhbmg7Ci8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hdGFuaCgtMCkgLT4gMApuKG4uUytuLkYqIShvJiYxL28oLTApPDApLCJNYXRoIix7YXRhbmg6ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PShlPStlKT9lOk1hdGgubG9nKCgxK2UpLygxLWUpKS8yfX0pfSwvKiAyNTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuOSBNYXRoLmNicnQoeCkKdmFyIG49cigwKSxvPXIoMTExKTtuKG4uUywiTWF0aCIse2NicnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZT0rZSkqTWF0aC5wb3coTWF0aC5hYnMoZSksMS8zKX19KX0sLyogMjU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjExIE1hdGguY2x6MzIoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2NsejMyOmZ1bmN0aW9uKGUpe3JldHVybihlPj4+PTApPzMxLU1hdGguZmxvb3IoTWF0aC5sb2coZSsuNSkqTWF0aC5MT0cyRSk6MzJ9fSl9LC8qIDI1NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xMiBNYXRoLmNvc2goeCkKdmFyIG49cigwKSxvPU1hdGguZXhwO24obi5TLCJNYXRoIix7Y29zaDpmdW5jdGlvbihlKXtyZXR1cm4obyhlPStlKStvKC1lKSkvMn19KX0sLyogMjU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjE0IE1hdGguZXhwbTEoeCkKdmFyIG49cigwKSxvPXIoMTEyKTtuKG4uUytuLkYqKG8hPU1hdGguZXhwbTEpLCJNYXRoIix7ZXhwbTE6b30pfSwvKiAyNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTYgTWF0aC5mcm91bmQoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2Zyb3VuZDpyKDE2MSl9KX0sLyogMjYwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjE3IE1hdGguaHlwb3QoW3ZhbHVlMVssIHZhbHVlMlssIOKApiBdXV0pCnZhciBuPXIoMCksbz1NYXRoLmFicztuKG4uUywiTWF0aCIse2h5cG90OmZ1bmN0aW9uKGUsdCl7Zm9yKC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKdmFyIHIsbixpPTAscz0wLGE9YXJndW1lbnRzLmxlbmd0aCx1PTA7czxhOylyPW8oYXJndW1lbnRzW3MrK10pLHU8cj8obj11L3IsaT1pKm4qbisxLHU9cik6cj4wPyhuPXIvdSxpKz1uKm4pOmkrPXI7cmV0dXJuIHU9PT0xLzA/MS8wOnUqTWF0aC5zcXJ0KGkpfX0pfSwvKiAyNjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTggTWF0aC5pbXVsKHgsIHkpCnZhciBuPXIoMCksbz1NYXRoLmltdWw7Ci8vIHNvbWUgV2ViS2l0IHZlcnNpb25zIGZhaWxzIHdpdGggYmlnIG51bWJlcnMsIHNvbWUgaGFzIHdyb25nIGFyaXR5Cm4obi5TK24uRipyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuLTUhPW8oNDI5NDk2NzI5NSw1KXx8MiE9by5sZW5ndGh9KSwiTWF0aCIse2ltdWw6ZnVuY3Rpb24oZSx0KXt2YXIgcj0rZSxuPSt0LG89NjU1MzUmcixpPTY1NTM1Jm47cmV0dXJuIDB8byppKygoNjU1MzUmcj4+PjE2KSppK28qKDY1NTM1Jm4+Pj4xNik8PDE2Pj4+MCl9fSl9LC8qIDI2MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4yMSBNYXRoLmxvZzEwKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtsb2cxMDpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5sb2coZSkqTWF0aC5MT0cxMEV9fSl9LC8qIDI2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4yMCBNYXRoLmxvZzFwKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtsb2cxcDpyKDE2MCl9KX0sLyogMjY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjIyIE1hdGgubG9nMih4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7bG9nMjpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5sb2coZSkvTWF0aC5MTjJ9fSl9LC8qIDI2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4yOCBNYXRoLnNpZ24oeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse3NpZ246cigxMTEpfSl9LC8qIDI2NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4zMCBNYXRoLnNpbmgoeCkKdmFyIG49cigwKSxvPXIoMTEyKSxpPU1hdGguZXhwOwovLyBWOCBuZWFyIENocm9taXVtIDM4IGhhcyBhIHByb2JsZW0gd2l0aCB2ZXJ5IHNtYWxsIG51bWJlcnMKbihuLlMrbi5GKnIoNSkoZnVuY3Rpb24oKXtyZXR1cm4tMmUtMTchPSFNYXRoLnNpbmgoLTJlLTE3KX0pLCJNYXRoIix7c2luaDpmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5hYnMoZT0rZSk8MT8obyhlKS1vKC1lKSkvMjooaShlLTEpLWkoLWUtMSkpKihNYXRoLkUvMil9fSl9LC8qIDI2NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4zMyBNYXRoLnRhbmgoeCkKdmFyIG49cigwKSxvPXIoMTEyKSxpPU1hdGguZXhwO24obi5TLCJNYXRoIix7dGFuaDpmdW5jdGlvbihlKXt2YXIgdD1vKGU9K2UpLHI9bygtZSk7cmV0dXJuIHQ9PTEvMD8xOnI9PTEvMD8tMToodC1yKS8oaShlKStpKC1lKSl9fSl9LC8qIDI2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4zNCBNYXRoLnRydW5jKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHt0cnVuYzpmdW5jdGlvbihlKXtyZXR1cm4oZT4wP01hdGguZmxvb3I6TWF0aC5jZWlsKShlKX19KX0sLyogMjY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cig1MCksaT1TdHJpbmcuZnJvbUNoYXJDb2RlLHM9U3RyaW5nLmZyb21Db2RlUG9pbnQ7Ci8vIGxlbmd0aCBzaG91bGQgYmUgMSwgb2xkIEZGIHByb2JsZW0KbihuLlMrbi5GKighIXMmJjEhPXMubGVuZ3RoKSwiU3RyaW5nIix7Ci8vIDIxLjEuMi4yIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpCmZyb21Db2RlUG9pbnQ6ZnVuY3Rpb24oZSl7Zm9yKC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKdmFyIHQscj1bXSxuPWFyZ3VtZW50cy5sZW5ndGgscz0wO24+czspe2lmKHQ9K2FyZ3VtZW50c1tzKytdLG8odCwxMTE0MTExKSE9PXQpdGhyb3cgUmFuZ2VFcnJvcih0KyIgaXMgbm90IGEgdmFsaWQgY29kZSBwb2ludCIpO3IucHVzaCh0PDY1NTM2P2kodCk6aSg1NTI5NisoKHQtPTY1NTM2KT4+MTApLHQlMTAyNCs1NjMyMCkpfXJldHVybiByLmpvaW4oIiIpfX0pfSwvKiAyNzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksbz1yKDI0KSxpPXIoMTIpO24obi5TLCJTdHJpbmciLHsKLy8gMjEuMS4yLjQgU3RyaW5nLnJhdyhjYWxsU2l0ZSwgLi4uc3Vic3RpdHV0aW9ucykKcmF3OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1vKGUucmF3KSxyPWkodC5sZW5ndGgpLG49YXJndW1lbnRzLmxlbmd0aCxzPVtdLGE9MDtyPmE7KXMucHVzaChTdHJpbmcodFthKytdKSksYTxuJiZzLnB1c2goU3RyaW5nKGFyZ3VtZW50c1thXSkpO3JldHVybiBzLmpvaW4oIiIpfX0pfSwvKiAyNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMS4zLjI1IFN0cmluZy5wcm90b3R5cGUudHJpbSgpCnIoNjEpKCJ0cmltIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLDMpfX0pfSwvKiAyNzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDExMykoITApOwovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCnIoMTE0KShTdHJpbmcsIlN0cmluZyIsZnVuY3Rpb24oZSl7dGhpcy5fdD1TdHJpbmcoZSksLy8gdGFyZ2V0CnRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX3Qscj10aGlzLl9pO3JldHVybiByPj10Lmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9OihlPW4odCxyKSx0aGlzLl9pKz1lLmxlbmd0aCx7dmFsdWU6ZSxkb25lOiExfSl9KX0sLyogMjczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTEzKSghMSk7bihuLlAsIlN0cmluZyIsewovLyAyMS4xLjMuMyBTdHJpbmcucHJvdG90eXBlLmNvZGVQb2ludEF0KHBvcykKY29kZVBvaW50QXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlKX19KX0sLyogMjc0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIxLjEuMy42IFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGgoc2VhcmNoU3RyaW5nIFssIGVuZFBvc2l0aW9uXSkKdmFyIG49cigwKSxvPXIoMTIpLGk9cigxMTYpLHM9IiIuZW5kc1dpdGg7bihuLlArbi5GKnIoMTE3KSgiZW5kc1dpdGgiKSwiU3RyaW5nIix7ZW5kc1dpdGg6ZnVuY3Rpb24oZSl7dmFyIHQ9aSh0aGlzLGUsImVuZHNXaXRoIikscj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxuPW8odC5sZW5ndGgpLGE9dm9pZCAwPT09cj9uOk1hdGgubWluKG8ociksbiksdT1TdHJpbmcoZSk7cmV0dXJuIHM/cy5jYWxsKHQsdSxhKTp0LnNsaWNlKGEtdS5sZW5ndGgsYSk9PT11fX0pfSwvKiAyNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMS4zLjcgU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyhzZWFyY2hTdHJpbmcsIHBvc2l0aW9uID0gMCkKdmFyIG49cigwKSxvPXIoMTE2KTtuKG4uUCtuLkYqcigxMTcpKCJpbmNsdWRlcyIpLCJTdHJpbmciLHtpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4hIX5vKHRoaXMsZSwiaW5jbHVkZXMiKS5pbmRleE9mKGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pfSwvKiAyNzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCk7bihuLlAsIlN0cmluZyIsewovLyAyMS4xLjMuMTMgU3RyaW5nLnByb3RvdHlwZS5yZXBlYXQoY291bnQpCnJlcGVhdDpyKDExMCl9KX0sLyogMjc3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIxLjEuMy4xOCBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGgoc2VhcmNoU3RyaW5nIFssIHBvc2l0aW9uIF0pCnZhciBuPXIoMCksbz1yKDEyKSxpPXIoMTE2KSxzPSIiLnN0YXJ0c1dpdGg7bihuLlArbi5GKnIoMTE3KSgic3RhcnRzV2l0aCIpLCJTdHJpbmciLHtzdGFydHNXaXRoOmZ1bmN0aW9uKGUpe3ZhciB0PWkodGhpcyxlLCJzdGFydHNXaXRoIikscj1vKE1hdGgubWluKGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLHQubGVuZ3RoKSksbj1TdHJpbmcoZSk7cmV0dXJuIHM/cy5jYWxsKHQsbixyKTp0LnNsaWNlKHIscituLmxlbmd0aCk9PT1ufX0pfSwvKiAyNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMiBTdHJpbmcucHJvdG90eXBlLmFuY2hvcihuYW1lKQpyKDIwKSgiYW5jaG9yIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodGhpcywiYSIsIm5hbWUiLHQpfX0pfSwvKiAyNzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMyBTdHJpbmcucHJvdG90eXBlLmJpZygpCnIoMjApKCJiaWciLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsImJpZyIsIiIsIiIpfX0pfSwvKiAyODAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNCBTdHJpbmcucHJvdG90eXBlLmJsaW5rKCkKcigyMCkoImJsaW5rIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJibGluayIsIiIsIiIpfX0pfSwvKiAyODEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNSBTdHJpbmcucHJvdG90eXBlLmJvbGQoKQpyKDIwKSgiYm9sZCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiYiIsIiIsIiIpfX0pfSwvKiAyODIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNiBTdHJpbmcucHJvdG90eXBlLmZpeGVkKCkKcigyMCkoImZpeGVkIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJ0dCIsIiIsIiIpfX0pfSwvKiAyODMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuNyBTdHJpbmcucHJvdG90eXBlLmZvbnRjb2xvcihjb2xvcikKcigyMCkoImZvbnRjb2xvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsImZvbnQiLCJjb2xvciIsdCl9fSl9LC8qIDI4NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy44IFN0cmluZy5wcm90b3R5cGUuZm9udHNpemUoc2l6ZSkKcigyMCkoImZvbnRzaXplIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodGhpcywiZm9udCIsInNpemUiLHQpfX0pfSwvKiAyODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuOSBTdHJpbmcucHJvdG90eXBlLml0YWxpY3MoKQpyKDIwKSgiaXRhbGljcyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiaSIsIiIsIiIpfX0pfSwvKiAyODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMTAgU3RyaW5nLnByb3RvdHlwZS5saW5rKHVybCkKcigyMCkoImxpbmsiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLCJhIiwiaHJlZiIsdCl9fSl9LC8qIDI4NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4xMSBTdHJpbmcucHJvdG90eXBlLnNtYWxsKCkKcigyMCkoInNtYWxsIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJzbWFsbCIsIiIsIiIpfX0pfSwvKiAyODggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMTIgU3RyaW5nLnByb3RvdHlwZS5zdHJpa2UoKQpyKDIwKSgic3RyaWtlIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJzdHJpa2UiLCIiLCIiKX19KX0sLyogMjg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjEzIFN0cmluZy5wcm90b3R5cGUuc3ViKCkKcigyMCkoInN1YiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywic3ViIiwiIiwiIil9fSl9LC8qIDI5MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4xNCBTdHJpbmcucHJvdG90eXBlLnN1cCgpCnIoMjApKCJzdXAiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsInN1cCIsIiIsIiIpfX0pfSwvKiAyOTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4zLjMuMSAvIDE1LjkuNC40IERhdGUubm93KCkKdmFyIG49cigwKTtuKG4uUywiRGF0ZSIse25vdzpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfX0pfSwvKiAyOTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigxNSksaT1yKDMyKTtuKG4uUCtuLkYqcig1KShmdW5jdGlvbigpe3JldHVybiBudWxsIT09bmV3IERhdGUoTmFOKS50b0pTT04oKXx8MSE9PURhdGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHt0b0lTT1N0cmluZzpmdW5jdGlvbigpe3JldHVybiAxfX0pfSksIkRhdGUiLHsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCnRvSlNPTjpmdW5jdGlvbihlKXt2YXIgdD1vKHRoaXMpLHI9aSh0KTtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mIHJ8fGlzRmluaXRlKHIpP3QudG9JU09TdHJpbmcoKTpudWxsfX0pfSwvKiAyOTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4zLjQuMzYgLyAxNS45LjUuNDMgRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcoKQp2YXIgbj1yKDApLG89cigyOTQpOwovLyBQaGFudG9tSlMgLyBvbGQgV2ViS2l0IGhhcyBhIGJyb2tlbiBpbXBsZW1lbnRhdGlvbnMKbihuLlArbi5GKihEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyE9PW8pLCJEYXRlIix7dG9JU09TdHJpbmc6b30pfSwvKiAyOTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjAuMy40LjM2IC8gMTUuOS41LjQzIERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nKCkKdmFyIG49cig1KSxvPURhdGUucHJvdG90eXBlLmdldFRpbWUsaT1EYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZyxzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjk/ZToiMCIrZX07Ci8vIFBoYW50b21KUyAvIG9sZCBXZWJLaXQgaGFzIGEgYnJva2VuIGltcGxlbWVudGF0aW9ucwplLmV4cG9ydHM9bihmdW5jdGlvbigpe3JldHVybiIwMzg1LTA3LTI1VDA3OjA2OjM5Ljk5OVoiIT1pLmNhbGwobmV3IERhdGUoLTVlMTMtMSkpfSl8fCFuKGZ1bmN0aW9uKCl7aS5jYWxsKG5ldyBEYXRlKE5hTikpfSk/ZnVuY3Rpb24oKXtpZighaXNGaW5pdGUoby5jYWxsKHRoaXMpKSl0aHJvdyBSYW5nZUVycm9yKCJJbnZhbGlkIHRpbWUgdmFsdWUiKTt2YXIgZT10aGlzLHQ9ZS5nZXRVVENGdWxsWWVhcigpLHI9ZS5nZXRVVENNaWxsaXNlY29uZHMoKSxuPXQ8MD8iLSI6dD45OTk5PyIrIjoiIjtyZXR1cm4gbisoIjAwMDAwIitNYXRoLmFicyh0KSkuc2xpY2Uobj8tNjotNCkrIi0iK3MoZS5nZXRVVENNb250aCgpKzEpKyItIitzKGUuZ2V0VVRDRGF0ZSgpKSsiVCIrcyhlLmdldFVUQ0hvdXJzKCkpKyI6IitzKGUuZ2V0VVRDTWludXRlcygpKSsiOiIrcyhlLmdldFVUQ1NlY29uZHMoKSkrIi4iKyhyPjk5P3I6IjAiK3MocikpKyJaIn06aX0sLyogMjk1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1EYXRlLnByb3RvdHlwZSxvPW4udG9TdHJpbmcsaT1uLmdldFRpbWU7bmV3IERhdGUoTmFOKSsiIiE9IkludmFsaWQgRGF0ZSImJnIoMTkpKG4sInRvU3RyaW5nIixmdW5jdGlvbigpe3ZhciBlPWkuY2FsbCh0aGlzKTsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gZT09PWU/by5jYWxsKHRoaXMpOiJJbnZhbGlkIERhdGUifSl9LC8qIDI5NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig5KSgidG9QcmltaXRpdmUiKSxvPURhdGUucHJvdG90eXBlO24gaW4gb3x8cigxOCkobyxuLHIoMjk3KSl9LC8qIDI5NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMyksbz1yKDMyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoInN0cmluZyIhPT1lJiYibnVtYmVyIiE9PWUmJiJkZWZhdWx0IiE9PWUpdGhyb3cgVHlwZUVycm9yKCJJbmNvcnJlY3QgaGludCIpO3JldHVybiBvKG4odGhpcyksIm51bWJlciIhPWUpfX0sLyogMjk4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjIuMS4yLjIgLyAxNS40LjMuMiBBcnJheS5pc0FycmF5KGFyZykKdmFyIG49cigwKTtuKG4uUywiQXJyYXkiLHtpc0FycmF5OnIoODIpfSl9LC8qIDI5OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMjgpLG89cigwKSxpPXIoMTUpLHM9cigxNjIpLGE9cigxMTgpLHU9cigxMiksYz1yKDExOSksZj1yKDEyMCk7byhvLlMrby5GKiFyKDg0KShmdW5jdGlvbihlKXtBcnJheS5mcm9tKGUpfSksIkFycmF5Iix7Ci8vIDIyLjEuMi4xIEFycmF5LmZyb20oYXJyYXlMaWtlLCBtYXBmbiA9IHVuZGVmaW5lZCwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKZnJvbTpmdW5jdGlvbihlKXt2YXIgdCxyLG8sbCxkPWkoZSkscD0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LHk9YXJndW1lbnRzLmxlbmd0aCxoPXk+MT9hcmd1bWVudHNbMV06dm9pZCAwLHY9dm9pZCAwIT09aCxnPTAsYj1mKGQpOwovLyBpZiBvYmplY3QgaXNuJ3QgaXRlcmFibGUgb3IgaXQncyBhcnJheSB3aXRoIGRlZmF1bHQgaXRlcmF0b3IgLSB1c2Ugc2ltcGxlIGNhc2UKaWYodiYmKGg9bihoLHk+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSx2b2lkIDA9PWJ8fHA9PUFycmF5JiZhKGIpKWZvcih0PXUoZC5sZW5ndGgpLHI9bmV3IHAodCk7dD5nO2crKyljKHIsZyx2P2goZFtnXSxnKTpkW2ddKTtlbHNlIGZvcihsPWIuY2FsbChkKSxyPW5ldyBwOyEobz1sLm5leHQoKSkuZG9uZTtnKyspYyhyLGcsdj9zKGwsaCxbby52YWx1ZSxnXSwhMCk6by52YWx1ZSk7cmV0dXJuIHIubGVuZ3RoPWcscn19KX0sLyogMzAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTE5KTsKLy8gV2ViS2l0IEFycmF5Lm9mIGlzbid0IGdlbmVyaWMKbihuLlMrbi5GKnIoNSkoZnVuY3Rpb24oKXtmdW5jdGlvbiBGKCl7fXJldHVybiEoQXJyYXkub2YuY2FsbChGKWluc3RhbmNlb2YgRil9KSwiQXJyYXkiLHsKLy8gMjIuMS4yLjMgQXJyYXkub2YoIC4uLml0ZW1zKQpvZjpmdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aCxyPW5ldygiZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOkFycmF5KSh0KTt0PmU7KW8ocixlLGFyZ3VtZW50c1tlKytdKTtyZXR1cm4gci5sZW5ndGg9dCxyfX0pfSwvKiAzMDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5qb2luKHNlcGFyYXRvcikKdmFyIG49cigwKSxvPXIoMjQpLGk9W10uam9pbjsKLy8gZmFsbGJhY2sgZm9yIG5vdCBhcnJheS1saWtlIHN0cmluZ3MKbihuLlArbi5GKihyKDcwKSE9T2JqZWN0fHwhcigzMCkoaSkpLCJBcnJheSIse2pvaW46ZnVuY3Rpb24oZSl7cmV0dXJuIGkuY2FsbChvKHRoaXMpLHZvaWQgMD09PWU/IiwiOmUpfX0pfSwvKiAzMDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigxMDYpLGk9cigyOSkscz1yKDUwKSxhPXIoMTIpLHU9W10uc2xpY2U7Ci8vIGZhbGxiYWNrIGZvciBub3QgYXJyYXktbGlrZSBFUzMgc3RyaW5ncyBhbmQgRE9NIG9iamVjdHMKbihuLlArbi5GKnIoNSkoZnVuY3Rpb24oKXtvJiZ1LmNhbGwobyl9KSwiQXJyYXkiLHtzbGljZTpmdW5jdGlvbihlLHQpe3ZhciByPWEodGhpcy5sZW5ndGgpLG49aSh0aGlzKTtpZih0PXZvaWQgMD09PXQ/cjp0LCJBcnJheSI9PW4pcmV0dXJuIHUuY2FsbCh0aGlzLGUsdCk7Zm9yKHZhciBvPXMoZSxyKSxjPXModCxyKSxmPWEoYy1vKSxsPW5ldyBBcnJheShmKSxkPTA7ZDxmO2QrKylsW2RdPSJTdHJpbmciPT1uP3RoaXMuY2hhckF0KG8rZCk6dGhpc1tvK2RdO3JldHVybiBsfX0pfSwvKiAzMDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigxNiksaT1yKDE1KSxzPXIoNSksYT1bXS5zb3J0LHU9WzEsMiwzXTtuKG4uUCtuLkYqKHMoZnVuY3Rpb24oKXsKLy8gSUU4LQp1LnNvcnQodm9pZCAwKX0pfHwhcyhmdW5jdGlvbigpewovLyBWOCBidWcKdS5zb3J0KG51bGwpfSl8fCFyKDMwKShhKSksIkFycmF5Iix7Ci8vIDIyLjEuMy4yNSBBcnJheS5wcm90b3R5cGUuc29ydChjb21wYXJlZm4pCnNvcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/YS5jYWxsKGkodGhpcykpOmEuY2FsbChpKHRoaXMpLG8oZSkpfX0pfSwvKiAzMDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigzNikoMCksaT1yKDMwKShbXS5mb3JFYWNoLCEwKTtuKG4uUCtuLkYqIWksIkFycmF5Iix7Ci8vIDIyLjEuMy4xMCAvIDE1LjQuNC4xOCBBcnJheS5wcm90b3R5cGUuZm9yRWFjaChjYWxsYmFja2ZuIFssIHRoaXNBcmddKQpmb3JFYWNoOmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNiksbz1yKDgyKSxpPXIoOSkoInNwZWNpZXMiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ7Ci8vIGNyb3NzLXJlYWxtIGZhbGxiYWNrCnJldHVybiBvKGUpJiYodD1lLmNvbnN0cnVjdG9yLCJmdW5jdGlvbiIhPXR5cGVvZiB0fHx0IT09QXJyYXkmJiFvKHQucHJvdG90eXBlKXx8KHQ9dm9pZCAwKSxuKHQpJiZudWxsPT09KHQ9dFtpXSkmJih0PXZvaWQgMCkpLHZvaWQgMD09PXQ/QXJyYXk6dH19LC8qIDMwNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDM2KSgxKTtuKG4uUCtuLkYqIXIoMzApKFtdLm1hcCwhMCksIkFycmF5Iix7Ci8vIDIyLjEuMy4xNSAvIDE1LjQuNC4xOSBBcnJheS5wcm90b3R5cGUubWFwKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCm1hcDpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUsYXJndW1lbnRzWzFdKX19KX0sLyogMzA3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMzYpKDIpO24obi5QK24uRiohcigzMCkoW10uZmlsdGVyLCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjcgLyAxNS40LjQuMjAgQXJyYXkucHJvdG90eXBlLmZpbHRlcihjYWxsYmFja2ZuIFssIHRoaXNBcmddKQpmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMwOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDM2KSgzKTtuKG4uUCtuLkYqIXIoMzApKFtdLnNvbWUsITApLCJBcnJheSIsewovLyAyMi4xLjMuMjMgLyAxNS40LjQuMTcgQXJyYXkucHJvdG90eXBlLnNvbWUoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKc29tZTpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUsYXJndW1lbnRzWzFdKX19KX0sLyogMzA5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMzYpKDQpO24obi5QK24uRiohcigzMCkoW10uZXZlcnksITApLCJBcnJheSIsewovLyAyMi4xLjMuNSAvIDE1LjQuNC4xNiBBcnJheS5wcm90b3R5cGUuZXZlcnkoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKZXZlcnk6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMxMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDE2Myk7bihuLlArbi5GKiFyKDMwKShbXS5yZWR1Y2UsITApLCJBcnJheSIsewovLyAyMi4xLjMuMTggLyAxNS40LjQuMjEgQXJyYXkucHJvdG90eXBlLnJlZHVjZShjYWxsYmFja2ZuIFssIGluaXRpYWxWYWx1ZV0pCnJlZHVjZTpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aCxhcmd1bWVudHNbMV0sITEpfX0pfSwvKiAzMTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigxNjMpO24obi5QK24uRiohcigzMCkoW10ucmVkdWNlUmlnaHQsITApLCJBcnJheSIsewovLyAyMi4xLjMuMTkgLyAxNS40LjQuMjIgQXJyYXkucHJvdG90eXBlLnJlZHVjZVJpZ2h0KGNhbGxiYWNrZm4gWywgaW5pdGlhbFZhbHVlXSkKcmVkdWNlUmlnaHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGgsYXJndW1lbnRzWzFdLCEwKX19KX0sLyogMzEyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoODApKCExKSxpPVtdLmluZGV4T2Yscz0hIWkmJjEvWzFdLmluZGV4T2YoMSwtMCk8MDtuKG4uUCtuLkYqKHN8fCFyKDMwKShpKSksIkFycmF5Iix7Ci8vIDIyLjEuMy4xMSAvIDE1LjQuNC4xNCBBcnJheS5wcm90b3R5cGUuaW5kZXhPZihzZWFyY2hFbGVtZW50IFssIGZyb21JbmRleF0pCmluZGV4T2Y6ZnVuY3Rpb24oZSl7cmV0dXJuIHM/aS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fDA6byh0aGlzLGUsYXJndW1lbnRzWzFdKX19KX0sLyogMzEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMjQpLGk9cigzNCkscz1yKDEyKSxhPVtdLmxhc3RJbmRleE9mLHU9ISFhJiYxL1sxXS5sYXN0SW5kZXhPZigxLC0wKTwwO24obi5QK24uRioodXx8IXIoMzApKGEpKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjE0IC8gMTUuNC40LjE1IEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZihzZWFyY2hFbGVtZW50IFssIGZyb21JbmRleF0pCmxhc3RJbmRleE9mOmZ1bmN0aW9uKGUpewovLyBjb252ZXJ0IC0wIHRvICswCmlmKHUpcmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwO3ZhciB0PW8odGhpcykscj1zKHQubGVuZ3RoKSxuPXItMTtmb3IoYXJndW1lbnRzLmxlbmd0aD4xJiYobj1NYXRoLm1pbihuLGkoYXJndW1lbnRzWzFdKSkpLG48MCYmKG49cituKTtuPj0wO24tLSlpZihuIGluIHQmJnRbbl09PT1lKXJldHVybiBufHwwO3JldHVybi0xfX0pfSwvKiAzMTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMi4xLjMuMyBBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbih0YXJnZXQsIHN0YXJ0LCBlbmQgPSB0aGlzLmxlbmd0aCkKdmFyIG49cigwKTtuKG4uUCwiQXJyYXkiLHtjb3B5V2l0aGluOnIoMTY0KX0pLHIoNDQpKCJjb3B5V2l0aGluIil9LC8qIDMxNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgbj1yKDApO24obi5QLCJBcnJheSIse2ZpbGw6cigxMjIpfSkscig0NCkoImZpbGwiKX0sLyogMzE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy44IEFycmF5LnByb3RvdHlwZS5maW5kKHByZWRpY2F0ZSwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKdmFyIG49cigwKSxvPXIoMzYpKDUpLGk9ITA7Ci8vIFNob3VsZG4ndCBza2lwIGhvbGVzCiJmaW5kImluW10mJkFycmF5KDEpLmZpbmQoZnVuY3Rpb24oKXtpPSExfSksbihuLlArbi5GKmksIkFycmF5Iix7ZmluZDpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLHIoNDQpKCJmaW5kIil9LC8qIDMxNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMi4xLjMuOSBBcnJheS5wcm90b3R5cGUuZmluZEluZGV4KHByZWRpY2F0ZSwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKdmFyIG49cigwKSxvPXIoMzYpKDYpLGk9ImZpbmRJbmRleCIscz0hMDsKLy8gU2hvdWxkbid0IHNraXAgaG9sZXMKaSBpbltdJiZBcnJheSgxKVtpXShmdW5jdGlvbigpe3M9ITF9KSxuKG4uUCtuLkYqcywiQXJyYXkiLHtmaW5kSW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxyKDQ0KShpKX0sLyogMzE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDUzKSgiQXJyYXkiKX0sLyogMzE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLG89cigxMDkpLGk9cigxMSkuZixzPXIoNTIpLmYsYT1yKDgzKSx1PXIoODUpLGM9bi5SZWdFeHAsZj1jLGw9Yy5wcm90b3R5cGUsZD0vYS9nLHA9L2EvZyx5PW5ldyBjKGQpIT09ZDtpZihyKDEwKSYmKCF5fHxyKDUpKGZ1bmN0aW9uKCl7Ci8vIFJlZ0V4cCBjb25zdHJ1Y3RvciBjYW4gYWx0ZXIgZmxhZ3MgYW5kIElzUmVnRXhwIHdvcmtzIGNvcnJlY3Qgd2l0aCBAQG1hdGNoCnJldHVybiBwW3IoOSkoIm1hdGNoIildPSExLGMoZCkhPWR8fGMocCk9PXB8fCIvYS9pIiE9YyhkLCJpIil9KSkpe2M9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzIGluc3RhbmNlb2YgYyxuPWEoZSksaT12b2lkIDA9PT10O3JldHVybiFyJiZuJiZlLmNvbnN0cnVjdG9yPT09YyYmaT9lOm8oeT9uZXcgZihuJiYhaT9lLnNvdXJjZTplLHQpOmYoKG49ZSBpbnN0YW5jZW9mIGMpP2Uuc291cmNlOmUsbiYmaT91LmNhbGwoZSk6dCkscj90aGlzOmwsYyl9O2Zvcih2YXIgaD1zKGYpLHY9MDtoLmxlbmd0aD52OykhZnVuY3Rpb24oZSl7ZSBpbiBjfHxpKGMsZSx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBmW2VdfSxzZXQ6ZnVuY3Rpb24odCl7ZltlXT10fX0pfShoW3YrK10pO2wuY29uc3RydWN0b3I9YyxjLnByb3RvdHlwZT1sLHIoMTkpKG4sIlJlZ0V4cCIsYyl9cig1MykoIlJlZ0V4cCIpfSwvKiAzMjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtyKDE2Nik7dmFyIG49cigzKSxvPXIoODUpLGk9cigxMCkscz0vLi8udG9TdHJpbmcsYT1mdW5jdGlvbihlKXtyKDE5KShSZWdFeHAucHJvdG90eXBlLCJ0b1N0cmluZyIsZSwhMCl9OwovLyAyMS4yLjUuMTQgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZygpCnIoNSkoZnVuY3Rpb24oKXtyZXR1cm4iL2EvYiIhPXMuY2FsbCh7c291cmNlOiJhIixmbGFnczoiYiJ9KX0pP2EoZnVuY3Rpb24oKXt2YXIgZT1uKHRoaXMpO3JldHVybiIvIi5jb25jYXQoZS5zb3VyY2UsIi8iLCJmbGFncyJpbiBlP2UuZmxhZ3M6IWkmJmUgaW5zdGFuY2VvZiBSZWdFeHA/by5jYWxsKGUpOnZvaWQgMCl9KToidG9TdHJpbmciIT1zLm5hbWUmJmEoZnVuY3Rpb24oKXtyZXR1cm4gcy5jYWxsKHRoaXMpfSl9LC8qIDMyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIEBAbWF0Y2ggbG9naWMKcig4NikoIm1hdGNoIiwxLGZ1bmN0aW9uKGUsdCxyKXsKLy8gMjEuMS4zLjExIFN0cmluZy5wcm90b3R5cGUubWF0Y2gocmVnZXhwKQpyZXR1cm5bZnVuY3Rpb24ocil7InVzZSBzdHJpY3QiO3ZhciBuPWUodGhpcyksbz12b2lkIDA9PXI/dm9pZCAwOnJbdF07cmV0dXJuIHZvaWQgMCE9PW8/by5jYWxsKHIsbik6bmV3IFJlZ0V4cChyKVt0XShTdHJpbmcobikpfSxyXX0pfSwvKiAzMjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBAQHJlcGxhY2UgbG9naWMKcig4NikoInJlcGxhY2UiLDIsZnVuY3Rpb24oZSx0LHIpewovLyAyMS4xLjMuMTQgU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlKHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpCnJldHVybltmdW5jdGlvbihuLG8peyJ1c2Ugc3RyaWN0Ijt2YXIgaT1lKHRoaXMpLHM9dm9pZCAwPT1uP3ZvaWQgMDpuW3RdO3JldHVybiB2b2lkIDAhPT1zP3MuY2FsbChuLGksbyk6ci5jYWxsKFN0cmluZyhpKSxuLG8pfSxyXX0pfSwvKiAzMjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBAQHNlYXJjaCBsb2dpYwpyKDg2KSgic2VhcmNoIiwxLGZ1bmN0aW9uKGUsdCxyKXsKLy8gMjEuMS4zLjE1IFN0cmluZy5wcm90b3R5cGUuc2VhcmNoKHJlZ2V4cCkKcmV0dXJuW2Z1bmN0aW9uKHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKHRoaXMpLG89dm9pZCAwPT1yP3ZvaWQgMDpyW3RdO3JldHVybiB2b2lkIDAhPT1vP28uY2FsbChyLG4pOm5ldyBSZWdFeHAocilbdF0oU3RyaW5nKG4pKX0scl19KX0sLyogMzI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gQEBzcGxpdCBsb2dpYwpyKDg2KSgic3BsaXQiLDIsZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt2YXIgbz1yKDgzKSxpPW4scz1bXS5wdXNoLGE9Imxlbmd0aCI7aWYoImMiPT0iYWJiYyIuc3BsaXQoLyhiKSovKVsxXXx8NCE9InRlc3QiLnNwbGl0KC8oPzopLywtMSlbYV18fDIhPSJhYiIuc3BsaXQoLyg/OmFiKSovKVthXXx8NCE9Ii4iLnNwbGl0KC8oLj8pKC4/KS8pW2FdfHwiLiIuc3BsaXQoLygpKCkvKVthXT4xfHwiIi5zcGxpdCgvLj8vKVthXSl7dmFyIHU9dm9pZCAwPT09LygpPz8vLmV4ZWMoIiIpWzFdOy8vIG5vbnBhcnRpY2lwYXRpbmcgY2FwdHVyaW5nIGdyb3VwCi8vIGJhc2VkIG9uIGVzNS1zaGltIGltcGxlbWVudGF0aW9uLCBuZWVkIHRvIHJld29yayBpdApuPWZ1bmN0aW9uKGUsdCl7dmFyIHI9U3RyaW5nKHRoaXMpO2lmKHZvaWQgMD09PWUmJjA9PT10KXJldHVybltdOwovLyBJZiBgc2VwYXJhdG9yYCBpcyBub3QgYSByZWdleCwgdXNlIG5hdGl2ZSBzcGxpdAppZighbyhlKSlyZXR1cm4gaS5jYWxsKHIsZSx0KTt2YXIgbixjLGYsbCxkLHA9W10seT0oZS5pZ25vcmVDYXNlPyJpIjoiIikrKGUubXVsdGlsaW5lPyJtIjoiIikrKGUudW5pY29kZT8idSI6IiIpKyhlLnN0aWNreT8ieSI6IiIpLGg9MCx2PXZvaWQgMD09PXQ/NDI5NDk2NzI5NTp0Pj4+MCxnPW5ldyBSZWdFeHAoZS5zb3VyY2UseSsiZyIpO2ZvcigKLy8gRG9lc24ndCBuZWVkIGZsYWdzIGd5LCBidXQgdGhleSBkb24ndCBodXJ0CnV8fChuPW5ldyBSZWdFeHAoIl4iK2cuc291cmNlKyIkKD8hXFxzKSIseSkpOyhjPWcuZXhlYyhyKSkmJiEoKAovLyBgc2VwYXJhdG9yQ29weS5sYXN0SW5kZXhgIGlzIG5vdCByZWxpYWJsZSBjcm9zcy1icm93c2VyCmY9Yy5pbmRleCtjWzBdW2FdKT5oJiYocC5wdXNoKHIuc2xpY2UoaCxjLmluZGV4KSksCi8vIEZpeCBicm93c2VycyB3aG9zZSBgZXhlY2AgbWV0aG9kcyBkb24ndCBjb25zaXN0ZW50bHkgcmV0dXJuIGB1bmRlZmluZWRgIGZvciBOUENHCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb29wLWZ1bmMKIXUmJmNbYV0+MSYmY1swXS5yZXBsYWNlKG4sZnVuY3Rpb24oKXtmb3IoZD0xO2Q8YXJndW1lbnRzW2FdLTI7ZCsrKXZvaWQgMD09PWFyZ3VtZW50c1tkXSYmKGNbZF09dm9pZCAwKX0pLGNbYV0+MSYmYy5pbmRleDxyW2FdJiZzLmFwcGx5KHAsYy5zbGljZSgxKSksbD1jWzBdW2FdLGg9ZixwW2FdPj12KSk7KWcubGFzdEluZGV4PT09Yy5pbmRleCYmZy5sYXN0SW5kZXgrKztyZXR1cm4gaD09PXJbYV0/IWwmJmcudGVzdCgiIil8fHAucHVzaCgiIik6cC5wdXNoKHIuc2xpY2UoaCkpLHBbYV0+dj9wLnNsaWNlKDAsdik6cH19ZWxzZSIwIi5zcGxpdCh2b2lkIDAsMClbYV0mJihuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PWUmJjA9PT10P1tdOmkuY2FsbCh0aGlzLGUsdCl9KTsKLy8gMjEuMS4zLjE3IFN0cmluZy5wcm90b3R5cGUuc3BsaXQoc2VwYXJhdG9yLCBsaW1pdCkKcmV0dXJuW2Z1bmN0aW9uKHIsbyl7dmFyIGk9ZSh0aGlzKSxzPXZvaWQgMD09cj92b2lkIDA6clt0XTtyZXR1cm4gdm9pZCAwIT09cz9zLmNhbGwocixpLG8pOm4uY2FsbChTdHJpbmcoaSkscixvKX0sbl19KX0sLyogMzI1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbyxpLHMsYT1yKDQzKSx1PXIoNCksYz1yKDI4KSxmPXIoNzIpLGw9cigwKSxkPXIoNikscD1yKDE2KSx5PXIoNTQpLGg9cig1NSksdj1yKDg3KSxnPXIoMTI0KS5zZXQsYj1yKDEyNSkoKSxfPXIoMTI2KSxtPXIoMTY3KSxSPXIoODgpLHc9cigxNjgpLFM9dS5UeXBlRXJyb3Isaz11LnByb2Nlc3MsTz1rJiZrLnZlcnNpb25zLFA9TyYmTy52OHx8IiIsTT11LlByb21pc2UsTD0icHJvY2VzcyI9PWYoaykseD1mdW5jdGlvbigpe30sQT1vPV8uZixEPSEhZnVuY3Rpb24oKXt0cnl7Ci8vIGNvcnJlY3Qgc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydAp2YXIgZT1NLnJlc29sdmUoMSksdD0oZS5jb25zdHJ1Y3Rvcj17fSlbcig5KSgic3BlY2llcyIpXT1mdW5jdGlvbihlKXtlKHgseCl9OwovLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0CnJldHVybihMfHwiZnVuY3Rpb24iPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmZS50aGVuKHgpaW5zdGFuY2VvZiB0JiYwIT09UC5pbmRleE9mKCI2LjYiKSYmLTE9PT1SLmluZGV4T2YoIkNocm9tZS82NiIpfWNhdGNoKGUpe319KCksVT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hKCFkKGUpfHwiZnVuY3Rpb24iIT10eXBlb2YodD1lLnRoZW4pKSYmdH0saj1mdW5jdGlvbihlLHQpe2lmKCFlLl9uKXtlLl9uPSEwO3ZhciByPWUuX2M7YihmdW5jdGlvbigpe2Zvcih2YXIgbj1lLl92LG89MT09ZS5fcyxpPTA7ci5sZW5ndGg+aTspIWZ1bmN0aW9uKHQpe3ZhciByLGkscyxhPW8/dC5vazp0LmZhaWwsdT10LnJlc29sdmUsYz10LnJlamVjdCxmPXQuZG9tYWluO3RyeXthPyhvfHwoMj09ZS5faCYmQyhlKSxlLl9oPTEpLCEwPT09YT9yPW46KGYmJmYuZW50ZXIoKSxyPWEobiksLy8gbWF5IHRocm93CmYmJihmLmV4aXQoKSxzPSEwKSkscj09PXQucHJvbWlzZT9jKFMoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KGk9VShyKSk/aS5jYWxsKHIsdSxjKTp1KHIpKTpjKG4pfWNhdGNoKGUpe2YmJiFzJiZmLmV4aXQoKSxjKGUpfX0ocltpKytdKTsvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaAplLl9jPVtdLGUuX249ITEsdCYmIWUuX2gmJkUoZSl9KX19LEU9ZnVuY3Rpb24oZSl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdCxyLG4sbz1lLl92LGk9SShlKTtpZihpJiYodD1tKGZ1bmN0aW9uKCl7TD9rLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbyxlKToocj11Lm9udW5oYW5kbGVkcmVqZWN0aW9uKT9yKHtwcm9taXNlOmUscmVhc29uOm99KToobj11LmNvbnNvbGUpJiZuLmVycm9yJiZuLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG8pfSksCi8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkCmUuX2g9THx8SShlKT8yOjEpLGUuX2E9dm9pZCAwLGkmJnQuZSl0aHJvdyB0LnZ9KX0sST1mdW5jdGlvbihlKXtyZXR1cm4gMSE9PWUuX2gmJjA9PT0oZS5fYXx8ZS5fYykubGVuZ3RofSxDPWZ1bmN0aW9uKGUpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIHQ7TD9rLmVtaXQoInJlamVjdGlvbkhhbmRsZWQiLGUpOih0PXUub25yZWplY3Rpb25oYW5kbGVkKSYmdCh7cHJvbWlzZTplLHJlYXNvbjplLl92fSl9KX0sVD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2R8fCh0Ll9kPSEwLHQ9dC5fd3x8dCwvLyB1bndyYXAKdC5fdj1lLHQuX3M9Mix0Ll9hfHwodC5fYT10Ll9jLnNsaWNlKCkpLGoodCwhMCkpfSxxPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5fZCl7ci5fZD0hMCxyPXIuX3d8fHI7Ly8gdW53cmFwCnRyeXtpZihyPT09ZSl0aHJvdyBTKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVUoZSkpP2IoZnVuY3Rpb24oKXt2YXIgbj17X3c6cixfZDohMX07Ly8gd3JhcAp0cnl7dC5jYWxsKGUsYyhxLG4sMSksYyhULG4sMSkpfWNhdGNoKGUpe1QuY2FsbChuLGUpfX0pOihyLl92PWUsci5fcz0xLGoociwhMSkpfWNhdGNoKGUpe1QuY2FsbCh7X3c6cixfZDohMX0sZSl9fX07Ci8vIGNvbnN0cnVjdG9yIHBvbHlmaWxsCkR8fCgKLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcikKTT1mdW5jdGlvbihlKXt5KHRoaXMsTSwiUHJvbWlzZSIsIl9oIikscChlKSxuLmNhbGwodGhpcyk7dHJ5e2UoYyhxLHRoaXMsMSksYyhULHRoaXMsMSkpfWNhdGNoKGUpe1QuY2FsbCh0aGlzLGUpfX0sCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwpuPWZ1bmN0aW9uKGUpe3RoaXMuX2M9W10sLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zCnRoaXMuX2E9dm9pZCAwLC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zCnRoaXMuX3M9MCwvLyA8LSBzdGF0ZQp0aGlzLl9kPSExLC8vIDwtIGRvbmUKdGhpcy5fdj12b2lkIDAsLy8gPC0gdmFsdWUKdGhpcy5faD0wLC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkCnRoaXMuX249ITF9LG4ucHJvdG90eXBlPXIoNTYpKE0ucHJvdG90eXBlLHsKLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkKdGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPUEodih0aGlzLE0pKTtyZXR1cm4gci5vaz0iZnVuY3Rpb24iIT10eXBlb2YgZXx8ZSxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsci5kb21haW49TD9rLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKHIpLHRoaXMuX2EmJnRoaXMuX2EucHVzaChyKSx0aGlzLl9zJiZqKHRoaXMsITEpLHIucHJvbWlzZX0sCi8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpCmNhdGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pLGk9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgbjt0aGlzLnByb21pc2U9ZSx0aGlzLnJlc29sdmU9YyhxLGUsMSksdGhpcy5yZWplY3Q9YyhULGUsMSl9LF8uZj1BPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09TXx8ZT09PXM/bmV3IGkoZSk6byhlKX0pLGwobC5HK2wuVytsLkYqIUQse1Byb21pc2U6TX0pLHIoNjApKE0sIlByb21pc2UiKSxyKDUzKSgiUHJvbWlzZSIpLHM9cigyNykuUHJvbWlzZSwKLy8gc3RhdGljcwpsKGwuUytsLkYqIUQsIlByb21pc2UiLHsKLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocikKcmVqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0PUEodGhpcyk7cmV0dXJuKDAsdC5yZWplY3QpKGUpLHQucHJvbWlzZX19KSxsKGwuUytsLkYqKGF8fCFEKSwiUHJvbWlzZSIsewovLyAyNS40LjQuNiBQcm9taXNlLnJlc29sdmUoeCkKcmVzb2x2ZTpmdW5jdGlvbihlKXtyZXR1cm4gdyhhJiZ0aGlzPT09cz9NOnRoaXMsZSl9fSksbChsLlMrbC5GKiEoRCYmcig4NCkoZnVuY3Rpb24oZSl7TS5hbGwoZSkuY2F0Y2goeCl9KSksIlByb21pc2UiLHsKLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpCmFsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9QSh0KSxuPXIucmVzb2x2ZSxvPXIucmVqZWN0LGk9bShmdW5jdGlvbigpe3ZhciByPVtdLGk9MCxzPTE7aChlLCExLGZ1bmN0aW9uKGUpe3ZhciBhPWkrKyx1PSExO3IucHVzaCh2b2lkIDApLHMrKyx0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXt1fHwodT0hMCxyW2FdPWUsLS1zfHxuKHIpKX0sbyl9KSwtLXN8fG4ocil9KTtyZXR1cm4gaS5lJiZvKGkudiksci5wcm9taXNlfSwKLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKQpyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1BKHQpLG49ci5yZWplY3Qsbz1tKGZ1bmN0aW9uKCl7aChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8uZSYmbihvLnYpLHIucHJvbWlzZX19KX0sLyogMzI2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxNzMpLG89cig2Myk7Ci8vIDIzLjQgV2Vha1NldCBPYmplY3RzCnIoODkpKCJXZWFrU2V0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHsKLy8gMjMuNC4zLjEgV2Vha1NldC5wcm90b3R5cGUuYWRkKHZhbHVlKQphZGQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG4uZGVmKG8odGhpcywiV2Vha1NldCIpLGUsITApfX0sbiwhMSwhMCl9LC8qIDMyNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDkwKSxpPXIoMTI3KSxzPXIoMyksYT1yKDUwKSx1PXIoMTIpLGM9cig2KSxmPXIoNCkuQXJyYXlCdWZmZXIsbD1yKDg3KSxkPWkuQXJyYXlCdWZmZXIscD1pLkRhdGFWaWV3LHk9by5BQlYmJmYuaXNWaWV3LGg9ZC5wcm90b3R5cGUuc2xpY2Usdj1vLlZJRVc7bihuLkcrbi5XK24uRiooZiE9PWQpLHtBcnJheUJ1ZmZlcjpkfSksbihuLlMrbi5GKiFvLkNPTlNUUiwiQXJyYXlCdWZmZXIiLHsKLy8gMjQuMS4zLjEgQXJyYXlCdWZmZXIuaXNWaWV3KGFyZykKaXNWaWV3OmZ1bmN0aW9uKGUpe3JldHVybiB5JiZ5KGUpfHxjKGUpJiZ2IGluIGV9fSksbihuLlArbi5VK24uRipyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuIW5ldyBkKDIpLnNsaWNlKDEsdm9pZCAwKS5ieXRlTGVuZ3RofSksIkFycmF5QnVmZmVyIix7Ci8vIDI0LjEuNC4zIEFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZShzdGFydCwgZW5kKQpzbGljZTpmdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PWgmJnZvaWQgMD09PXQpcmV0dXJuIGguY2FsbChzKHRoaXMpLGUpO2ZvcigvLyBGRiBmaXgKdmFyIHI9cyh0aGlzKS5ieXRlTGVuZ3RoLG49YShlLHIpLG89YSh2b2lkIDA9PT10P3I6dCxyKSxpPW5ldyhsKHRoaXMsZCkpKHUoby1uKSksYz1uZXcgcCh0aGlzKSxmPW5ldyBwKGkpLHk9MDtuPG87KWYuc2V0VWludDgoeSsrLGMuZ2V0VWludDgobisrKSk7cmV0dXJuIGl9fSkscig1MykoIkFycmF5QnVmZmVyIil9LC8qIDMyOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKTtuKG4uRytuLlcrbi5GKiFyKDkwKS5BQlYse0RhdGFWaWV3OnIoMTI3KS5EYXRhVmlld30pfSwvKiAzMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJJbnQ4IiwxLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNykoIlVpbnQ4IiwxLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNykoIlVpbnQ4IiwxLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSwhMCl9LC8qIDMzMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNykoIkludDE2IiwyLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNykoIlVpbnQxNiIsMixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJJbnQzMiIsNCxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJVaW50MzIiLDQsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzM2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM3KSgiRmxvYXQzMiIsNCxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJGbG9hdDY0Iiw4LGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMSBSZWZsZWN0LmFwcGx5KHRhcmdldCwgdGhpc0FyZ3VtZW50LCBhcmd1bWVudHNMaXN0KQp2YXIgbj1yKDApLG89cigxNiksaT1yKDMpLHM9KHIoNCkuUmVmbGVjdHx8e30pLmFwcGx5LGE9RnVuY3Rpb24uYXBwbHk7Ci8vIE1TIEVkZ2UgYXJndW1lbnRzTGlzdCBhcmd1bWVudCBpcyBvcHRpb25hbApuKG4uUytuLkYqIXIoNSkoZnVuY3Rpb24oKXtzKGZ1bmN0aW9uKCl7fSl9KSwiUmVmbGVjdCIse2FwcGx5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1vKGUpLHU9aShyKTtyZXR1cm4gcz9zKG4sdCx1KTphLmNhbGwobix0LHUpfX0pfSwvKiAzMzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjIgUmVmbGVjdC5jb25zdHJ1Y3QodGFyZ2V0LCBhcmd1bWVudHNMaXN0IFssIG5ld1RhcmdldF0pCnZhciBuPXIoMCksbz1yKDUxKSxpPXIoMTYpLHM9cigzKSxhPXIoNiksdT1yKDUpLGM9cigxNTQpLGY9KHIoNCkuUmVmbGVjdHx8e30pLmNvbnN0cnVjdCxsPXUoZnVuY3Rpb24oKXtmdW5jdGlvbiBGKCl7fXJldHVybiEoZihmdW5jdGlvbigpe30sW10sRilpbnN0YW5jZW9mIEYpfSksZD0hdShmdW5jdGlvbigpe2YoZnVuY3Rpb24oKXt9KX0pO24obi5TK24uRioobHx8ZCksIlJlZmxlY3QiLHtjb25zdHJ1Y3Q6ZnVuY3Rpb24oZSx0KXtpKGUpLHModCk7dmFyIHI9YXJndW1lbnRzLmxlbmd0aDwzP2U6aShhcmd1bWVudHNbMl0pO2lmKGQmJiFsKXJldHVybiBmKGUsdCxyKTtpZihlPT1yKXsKLy8gdy9vIGFsdGVyZWQgbmV3VGFyZ2V0LCBvcHRpbWl6YXRpb24gZm9yIDAtNCBhcmd1bWVudHMKc3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyBlO2Nhc2UgMTpyZXR1cm4gbmV3IGUodFswXSk7Y2FzZSAyOnJldHVybiBuZXcgZSh0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbmV3IGUodFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbmV3IGUodFswXSx0WzFdLHRbMl0sdFszXSl9Ci8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgbG90IG9mIGFyZ3VtZW50cyBjYXNlCnZhciBuPVtudWxsXTtyZXR1cm4gbi5wdXNoLmFwcGx5KG4sdCksbmV3KGMuYXBwbHkoZSxuKSl9Ci8vIHdpdGggYWx0ZXJlZCBuZXdUYXJnZXQsIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGNvbnN0cnVjdG9ycwp2YXIgdT1yLnByb3RvdHlwZSxwPW8oYSh1KT91Ok9iamVjdC5wcm90b3R5cGUpLHk9RnVuY3Rpb24uYXBwbHkuY2FsbChlLHAsdCk7cmV0dXJuIGEoeSk/eTpwfX0pfSwvKiAzNDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjMgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzKQp2YXIgbj1yKDExKSxvPXIoMCksaT1yKDMpLHM9cigzMik7Ci8vIE1TIEVkZ2UgaGFzIGJyb2tlbiBSZWZsZWN0LmRlZmluZVByb3BlcnR5IC0gdGhyb3dpbmcgaW5zdGVhZCBvZiByZXR1cm5pbmcgZmFsc2UKbyhvLlMrby5GKnIoNSkoZnVuY3Rpb24oKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmClJlZmxlY3QuZGVmaW5lUHJvcGVydHkobi5mKHt9LDEse3ZhbHVlOjF9KSwxLHt2YWx1ZToyfSl9KSwiUmVmbGVjdCIse2RlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxyKXtpKGUpLHQ9cyh0LCEwKSxpKHIpO3RyeXtyZXR1cm4gbi5mKGUsdCxyKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19fSl9LC8qIDM0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuNCBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXkpCnZhciBuPXIoMCksbz1yKDI1KS5mLGk9cigzKTtuKG4uUywiUmVmbGVjdCIse2RlbGV0ZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCl7dmFyIHI9byhpKGUpLHQpO3JldHVybiEociYmIXIuY29uZmlndXJhYmxlKSYmZGVsZXRlIGVbdF19fSl9LC8qIDM0MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyNi4xLjUgUmVmbGVjdC5lbnVtZXJhdGUodGFyZ2V0KQp2YXIgbj1yKDApLG89cigzKSxpPWZ1bmN0aW9uKGUpe3RoaXMuX3Q9byhlKSwvLyB0YXJnZXQKdGhpcy5faT0wOy8vIG5leHQgaW5kZXgKdmFyIHQscj10aGlzLl9rPVtdO2Zvcih0IGluIGUpci5wdXNoKHQpfTtyKDExNSkoaSwiT2JqZWN0IixmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxyPXQuX2s7ZG97aWYodC5faT49ci5sZW5ndGgpcmV0dXJue3ZhbHVlOnZvaWQgMCxkb25lOiEwfX13aGlsZSghKChlPXJbdC5faSsrXSlpbiB0Ll90KSk7cmV0dXJue3ZhbHVlOmUsZG9uZTohMX19KSxuKG4uUywiUmVmbGVjdCIse2VudW1lcmF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkoZSl9fSl9LC8qIDM0MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gZ2V0KGUsdCl7dmFyIHIscyxjPWFyZ3VtZW50cy5sZW5ndGg8Mz9lOmFyZ3VtZW50c1syXTtyZXR1cm4gdShlKT09PWM/ZVt0XToocj1uLmYoZSx0KSk/aShyLCJ2YWx1ZSIpP3IudmFsdWU6dm9pZCAwIT09ci5nZXQ/ci5nZXQuY2FsbChjKTp2b2lkIDA6YShzPW8oZSkpP2dldChzLHQsYyk6dm9pZCAwfQovLyAyNi4xLjYgUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wZXJ0eUtleSBbLCByZWNlaXZlcl0pCnZhciBuPXIoMjUpLG89cigyNiksaT1yKDIzKSxzPXIoMCksYT1yKDYpLHU9cigzKTtzKHMuUywiUmVmbGVjdCIse2dldDpnZXR9KX0sLyogMzQ0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS43IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHlLZXkpCnZhciBuPXIoMjUpLG89cigwKSxpPXIoMyk7byhvLlMsIlJlZmxlY3QiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5mKGkoZSksdCl9fSl9LC8qIDM0NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuOCBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCkKdmFyIG49cigwKSxvPXIoMjYpLGk9cigzKTtuKG4uUywiUmVmbGVjdCIse2dldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBvKGkoZSkpfX0pfSwvKiAzNDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjkgUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wZXJ0eUtleSkKdmFyIG49cigwKTtuKG4uUywiUmVmbGVjdCIse2hhczpmdW5jdGlvbihlLHQpe3JldHVybiB0IGluIGV9fSl9LC8qIDM0NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTAgUmVmbGVjdC5pc0V4dGVuc2libGUodGFyZ2V0KQp2YXIgbj1yKDApLG89cigzKSxpPU9iamVjdC5pc0V4dGVuc2libGU7bihuLlMsIlJlZmxlY3QiLHtpc0V4dGVuc2libGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSksIWl8fGkoZSl9fSl9LC8qIDM0OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTEgUmVmbGVjdC5vd25LZXlzKHRhcmdldCkKdmFyIG49cigwKTtuKG4uUywiUmVmbGVjdCIse293bktleXM6cigxNzUpfSl9LC8qIDM0OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTIgUmVmbGVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpCnZhciBuPXIoMCksbz1yKDMpLGk9T2JqZWN0LnByZXZlbnRFeHRlbnNpb25zO24obi5TLCJSZWZsZWN0Iix7cHJldmVudEV4dGVuc2lvbnM6ZnVuY3Rpb24oZSl7byhlKTt0cnl7cmV0dXJuIGkmJmkoZSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fX0pfSwvKiAzNTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIHNldChlLHQscil7dmFyIGEsbCxkPWFyZ3VtZW50cy5sZW5ndGg8ND9lOmFyZ3VtZW50c1szXSxwPW8uZihjKGUpLHQpO2lmKCFwKXtpZihmKGw9aShlKSkpcmV0dXJuIHNldChsLHQscixkKTtwPXUoMCl9aWYocyhwLCJ2YWx1ZSIpKXtpZighMT09PXAud3JpdGFibGV8fCFmKGQpKXJldHVybiExO2lmKGE9by5mKGQsdCkpe2lmKGEuZ2V0fHxhLnNldHx8ITE9PT1hLndyaXRhYmxlKXJldHVybiExO2EudmFsdWU9cixuLmYoZCx0LGEpfWVsc2Ugbi5mKGQsdCx1KDAscikpO3JldHVybiEwfXJldHVybiB2b2lkIDAhPT1wLnNldCYmKHAuc2V0LmNhbGwoZCxyKSwhMCl9Ci8vIDI2LjEuMTMgUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wZXJ0eUtleSwgViBbLCByZWNlaXZlcl0pCnZhciBuPXIoMTEpLG89cigyNSksaT1yKDI2KSxzPXIoMjMpLGE9cigwKSx1PXIoNDcpLGM9cigzKSxmPXIoNik7YShhLlMsIlJlZmxlY3QiLHtzZXQ6c2V0fSl9LC8qIDM1MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTQgUmVmbGVjdC5zZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvKQp2YXIgbj1yKDApLG89cigxMDcpO28mJm4obi5TLCJSZWZsZWN0Iix7c2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSx0KXtvLmNoZWNrKGUsdCk7dHJ5e3JldHVybiBvLnNldChlLHQpLCEwfWNhdGNoKGUpe3JldHVybiExfX19KX0sLyogMzUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L0FycmF5LnByb3RvdHlwZS5pbmNsdWRlcwp2YXIgbj1yKDApLG89cig4MCkoITApO24obi5QLCJBcnJheSIse2luY2x1ZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSkscig0NCkoImluY2x1ZGVzIil9LC8qIDM1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLWZsYXRNYXAvI3NlYy1BcnJheS5wcm90b3R5cGUuZmxhdE1hcAp2YXIgbj1yKDApLG89cigxNzYpLGk9cigxNSkscz1yKDEyKSxhPXIoMTYpLHU9cigxMjEpO24obi5QLCJBcnJheSIse2ZsYXRNYXA6ZnVuY3Rpb24oZSl7dmFyIHQscixuPWkodGhpcyk7cmV0dXJuIGEoZSksdD1zKG4ubGVuZ3RoKSxyPXUobiwwKSxvKHIsbixuLHQsMCwxLGUsYXJndW1lbnRzWzFdKSxyfX0pLHIoNDQpKCJmbGF0TWFwIil9LC8qIDM1NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLWZsYXRNYXAvI3NlYy1BcnJheS5wcm90b3R5cGUuZmxhdHRlbgp2YXIgbj1yKDApLG89cigxNzYpLGk9cigxNSkscz1yKDEyKSxhPXIoMzQpLHU9cigxMjEpO24obi5QLCJBcnJheSIse2ZsYXR0ZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHNbMF0sdD1pKHRoaXMpLHI9cyh0Lmxlbmd0aCksbj11KHQsMCk7cmV0dXJuIG8obix0LHQsciwwLHZvaWQgMD09PWU/MTphKGUpKSxufX0pLHIoNDQpKCJmbGF0dGVuIil9LC8qIDM1NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9TdHJpbmcucHJvdG90eXBlLmF0CnZhciBuPXIoMCksbz1yKDExMykoITApO24obi5QLCJTdHJpbmciLHthdDpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUpfX0pfSwvKiAzNTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmQKdmFyIG49cigwKSxvPXIoMTc3KSxpPXIoODgpOwovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMjgwCm4obi5QK24uRiovVmVyc2lvblwvMTBcLlxkKyhcLlxkKyk/IFNhZmFyaVwvLy50ZXN0KGkpLCJTdHJpbmciLHtwYWRTdGFydDpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsITApfX0pfSwvKiAzNTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmQKdmFyIG49cigwKSxvPXIoMTc3KSxpPXIoODgpOwovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMjgwCm4obi5QK24uRiovVmVyc2lvblwvMTBcLlxkKyhcLlxkKyk/IFNhZmFyaVwvLy50ZXN0KGkpLCJTdHJpbmciLHtwYWRFbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCExKX19KX0sLyogMzU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWJtYXJrYmFnZS9lY21hc2NyaXB0LXN0cmluZy1sZWZ0LXJpZ2h0LXRyaW0Kcig2MSkoInRyaW1MZWZ0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLDEpfX0sInRyaW1TdGFydCIpfSwvKiAzNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlYm1hcmtiYWdlL2VjbWFzY3JpcHQtc3RyaW5nLWxlZnQtcmlnaHQtdHJpbQpyKDYxKSgidHJpbVJpZ2h0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLDIpfX0sInRyaW1FbmQiKX0sLyogMzYwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vU3RyaW5nLnByb3RvdHlwZS5tYXRjaEFsbC8KdmFyIG49cigwKSxvPXIoMzMpLGk9cigxMikscz1yKDgzKSxhPXIoODUpLHU9UmVnRXhwLnByb3RvdHlwZSxjPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcj1lLHRoaXMuX3M9dH07cigxMTUpKGMsIlJlZ0V4cCBTdHJpbmciLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fci5leGVjKHRoaXMuX3MpO3JldHVybnt2YWx1ZTplLGRvbmU6bnVsbD09PWV9fSksbihuLlAsIlN0cmluZyIse21hdGNoQWxsOmZ1bmN0aW9uKGUpe2lmKG8odGhpcyksIXMoZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSByZWdleHAhIik7dmFyIHQ9U3RyaW5nKHRoaXMpLHI9ImZsYWdzImluIHU/U3RyaW5nKGUuZmxhZ3MpOmEuY2FsbChlKSxuPW5ldyBSZWdFeHAoZS5zb3VyY2UsfnIuaW5kZXhPZigiZyIpP3I6ImciK3IpO3JldHVybiBuLmxhc3RJbmRleD1pKGUubGFzdEluZGV4KSxuZXcgYyhuLHQpfX0pfSwvKiAzNjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMTAzKSgiYXN5bmNJdGVyYXRvciIpfSwvKiAzNjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMTAzKSgib2JzZXJ2YWJsZSIpfSwvKiAzNjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtZ2V0b3ducHJvcGVydHlkZXNjcmlwdG9ycwp2YXIgbj1yKDApLG89cigxNzUpLGk9cigyNCkscz1yKDI1KSxhPXIoMTE5KTtuKG4uUywiT2JqZWN0Iix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yczpmdW5jdGlvbihlKXtmb3IodmFyIHQscixuPWkoZSksdT1zLmYsYz1vKG4pLGY9e30sbD0wO2MubGVuZ3RoPmw7KXZvaWQgMCE9PShyPXUobix0PWNbbCsrXSkpJiZhKGYsdCxyKTtyZXR1cm4gZn19KX0sLyogMzY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzCnZhciBuPXIoMCksbz1yKDE3OCkoITEpO24obi5TLCJPYmplY3QiLHt2YWx1ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9fSl9LC8qIDM2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC12YWx1ZXMtZW50cmllcwp2YXIgbj1yKDApLG89cigxNzgpKCEwKTtuKG4uUywiT2JqZWN0Iix7ZW50cmllczpmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX19KX0sLyogMzY2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTUpLGk9cigxNikscz1yKDExKTsKLy8gQi4yLjIuMiBPYmplY3QucHJvdG90eXBlLl9fZGVmaW5lR2V0dGVyX18oUCwgZ2V0dGVyKQpyKDEwKSYmbihuLlArcig5MSksIk9iamVjdCIse19fZGVmaW5lR2V0dGVyX186ZnVuY3Rpb24oZSx0KXtzLmYobyh0aGlzKSxlLHtnZXQ6aSh0KSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX0pfSwvKiAzNjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigxNSksaT1yKDE2KSxzPXIoMTEpOwovLyBCLjIuMi4zIE9iamVjdC5wcm90b3R5cGUuX19kZWZpbmVTZXR0ZXJfXyhQLCBzZXR0ZXIpCnIoMTApJiZuKG4uUCtyKDkxKSwiT2JqZWN0Iix7X19kZWZpbmVTZXR0ZXJfXzpmdW5jdGlvbihlLHQpe3MuZihvKHRoaXMpLGUse3NldDppKHQpLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSl9fSl9LC8qIDM2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDE1KSxpPXIoMzIpLHM9cigyNiksYT1yKDI1KS5mOwovLyBCLjIuMi40IE9iamVjdC5wcm90b3R5cGUuX19sb29rdXBHZXR0ZXJfXyhQKQpyKDEwKSYmbihuLlArcig5MSksIk9iamVjdCIse19fbG9va3VwR2V0dGVyX186ZnVuY3Rpb24oZSl7dmFyIHQscj1vKHRoaXMpLG49aShlLCEwKTtkb3tpZih0PWEocixuKSlyZXR1cm4gdC5nZXR9d2hpbGUocj1zKHIpKX19KX0sLyogMzY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTUpLGk9cigzMikscz1yKDI2KSxhPXIoMjUpLmY7Ci8vIEIuMi4yLjUgT2JqZWN0LnByb3RvdHlwZS5fX2xvb2t1cFNldHRlcl9fKFApCnIoMTApJiZuKG4uUCtyKDkxKSwiT2JqZWN0Iix7X19sb29rdXBTZXR0ZXJfXzpmdW5jdGlvbihlKXt2YXIgdCxyPW8odGhpcyksbj1pKGUsITApO2Rve2lmKHQ9YShyLG4pKXJldHVybiB0LnNldH13aGlsZShyPXMocikpfX0pfSwvKiAzNzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OCnZhciBuPXIoMCk7bihuLlArbi5SLCJNYXAiLHt0b0pTT046cigxNzkpKCJNYXAiKX0pfSwvKiAzNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vRGF2aWRCcnVhbnQvTWFwLVNldC5wcm90b3R5cGUudG9KU09OCnZhciBuPXIoMCk7bihuLlArbi5SLCJTZXQiLHt0b0pTT046cigxNzkpKCJTZXQiKX0pfSwvKiAzNzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1tYXAub2YKcig5MikoIk1hcCIpfSwvKiAzNzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1zZXQub2YKcig5MikoIlNldCIpfSwvKiAzNzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrbWFwLm9mCnIoOTIpKCJXZWFrTWFwIil9LC8qIDM3NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXdlYWtzZXQub2YKcig5MikoIldlYWtTZXQiKX0sLyogMzc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtbWFwLmZyb20Kcig5MykoIk1hcCIpfSwvKiAzNzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1zZXQuZnJvbQpyKDkzKSgiU2V0Iil9LC8qIDM3OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXdlYWttYXAuZnJvbQpyKDkzKSgiV2Vha01hcCIpfSwvKiAzNzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrc2V0LmZyb20Kcig5MykoIldlYWtTZXQiKX0sLyogMzgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtZ2xvYmFsCnZhciBuPXIoMCk7bihuLkcse2dsb2JhbDpyKDQpfSl9LC8qIDM4MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbAp2YXIgbj1yKDApO24obi5TLCJTeXN0ZW0iLHtnbG9iYWw6cig0KX0pfSwvKiAzODIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL3Byb3Bvc2FsLWlzLWVycm9yCnZhciBuPXIoMCksbz1yKDI5KTtuKG4uUywiRXJyb3IiLHtpc0Vycm9yOmZ1bmN0aW9uKGUpe3JldHVybiJFcnJvciI9PT1vKGUpfX0pfSwvKiAzODMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtjbGFtcDpmdW5jdGlvbihlLHQscil7cmV0dXJuIE1hdGgubWluKHIsTWF0aC5tYXgodCxlKSl9fSl9LC8qIDM4NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKTtuKG4uUywiTWF0aCIse0RFR19QRVJfUkFEOk1hdGguUEkvMTgwfSl9LC8qIDM4NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKSxvPTE4MC9NYXRoLlBJO24obi5TLCJNYXRoIix7ZGVncmVlczpmdW5jdGlvbihlKXtyZXR1cm4gZSpvfX0pfSwvKiAzODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCksbz1yKDE4MSksaT1yKDE2MSk7bihuLlMsIk1hdGgiLHtmc2NhbGU6ZnVuY3Rpb24oZSx0LHIsbixzKXtyZXR1cm4gaShvKGUsdCxyLG4scykpfX0pfSwvKiAzODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwMwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7aWFkZGg6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89ZT4+PjAsaT10Pj4+MCxzPXI+Pj4wO3JldHVybiBpKyhuPj4+MCkrKChvJnN8KG98cykmfihvK3M+Pj4wKSk+Pj4zMSl8MH19KX0sLyogMzg4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDMKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2lzdWJoOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWU+Pj4wLGk9dD4+PjAscz1yPj4+MDtyZXR1cm4gaS0obj4+PjApLSgofm8mc3x+KG9ecykmby1zPj4+MCk+Pj4zMSl8MH19KX0sLyogMzg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDMKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2ltdWxoOmZ1bmN0aW9uKGUsdCl7dmFyIHI9K2Usbj0rdCxvPTY1NTM1JnIsaT02NTUzNSZuLHM9cj4+MTYsYT1uPj4xNix1PShzKmk+Pj4wKSsobyppPj4+MTYpO3JldHVybiBzKmErKHU+PjE2KSsoKG8qYT4+PjApKyg2NTUzNSZ1KT4+MTYpfX0pfSwvKiAzOTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtSQURfUEVSX0RFRzoxODAvTWF0aC5QSX0pfSwvKiAzOTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCksbz1NYXRoLlBJLzE4MDtuKG4uUywiTWF0aCIse3JhZGlhbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUqb319KX0sLyogMzkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7c2NhbGU6cigxODEpfSl9LC8qIDM5MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHt1bXVsaDpmdW5jdGlvbihlLHQpe3ZhciByPStlLG49K3Qsbz02NTUzNSZyLGk9NjU1MzUmbixzPXI+Pj4xNixhPW4+Pj4xNix1PShzKmk+Pj4wKSsobyppPj4+MTYpO3JldHVybiBzKmErKHU+Pj4xNikrKChvKmE+Pj4wKSsoNjU1MzUmdSk+Pj4xNil9fSl9LC8qIDM5NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHA6Ly9qZmJhc3RpZW4uZ2l0aHViLmlvL3BhcGVycy9NYXRoLnNpZ25iaXQuaHRtbAp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7c2lnbmJpdDpmdW5jdGlvbihlKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4oZT0rZSkhPWU/ZTowPT1lPzEvZT09MS8wOmU+MH19KX0sLyogMzk1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtZmluYWxseQp2YXIgbj1yKDApLG89cigyNyksaT1yKDQpLHM9cig4NyksYT1yKDE2OCk7bihuLlArbi5SLCJQcm9taXNlIix7ZmluYWxseTpmdW5jdGlvbihlKXt2YXIgdD1zKHRoaXMsby5Qcm9taXNlfHxpLlByb21pc2UpLHI9ImZ1bmN0aW9uIj09dHlwZW9mIGU7cmV0dXJuIHRoaXMudGhlbihyP2Z1bmN0aW9uKHIpe3JldHVybiBhKHQsZSgpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KX06ZSxyP2Z1bmN0aW9uKHIpe3JldHVybiBhKHQsZSgpKS50aGVuKGZ1bmN0aW9uKCl7dGhyb3cgcn0pfTplKX19KX0sLyogMzk2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXByb21pc2UtdHJ5CnZhciBuPXIoMCksbz1yKDEyNiksaT1yKDE2Nyk7bihuLlMsIlByb21pc2UiLHt0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9by5mKHRoaXMpLHI9aShlKTtyZXR1cm4oci5lP3QucmVqZWN0OnQucmVzb2x2ZSkoci52KSx0LnByb21pc2V9fSl9LC8qIDM5NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCksbz1yKDMpLGk9bi5rZXkscz1uLnNldDtuLmV4cCh7ZGVmaW5lTWV0YWRhdGE6ZnVuY3Rpb24oZSx0LHIsbil7cyhlLHQsbyhyKSxpKG4pKX19KX0sLyogMzk4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxvPXIoMyksaT1uLmtleSxzPW4ubWFwLGE9bi5zdG9yZTtuLmV4cCh7ZGVsZXRlTWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOmkoYXJndW1lbnRzWzJdKSxuPXMobyh0KSxyLCExKTtpZih2b2lkIDA9PT1ufHwhbi5kZWxldGUoZSkpcmV0dXJuITE7aWYobi5zaXplKXJldHVybiEwO3ZhciB1PWEuZ2V0KHQpO3JldHVybiB1LmRlbGV0ZShyKSwhIXUuc2l6ZXx8YS5kZWxldGUodCl9fSl9LC8qIDM5OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCksbz1yKDMpLGk9cigyNikscz1uLmhhcyxhPW4uZ2V0LHU9bi5rZXksYz1mdW5jdGlvbihlLHQscil7aWYocyhlLHQscikpcmV0dXJuIGEoZSx0LHIpO3ZhciBuPWkodCk7cmV0dXJuIG51bGwhPT1uP2MoZSxuLHIpOnZvaWQgMH07bi5leHAoe2dldE1ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGMoZSxvKHQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6dShhcmd1bWVudHNbMl0pKX19KX0sLyogNDAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE3MSksbz1yKDE4MCksaT1yKDM4KSxzPXIoMyksYT1yKDI2KSx1PWkua2V5cyxjPWkua2V5LGY9ZnVuY3Rpb24oZSx0KXt2YXIgcj11KGUsdCksaT1hKGUpO2lmKG51bGw9PT1pKXJldHVybiByO3ZhciBzPWYoaSx0KTtyZXR1cm4gcy5sZW5ndGg/ci5sZW5ndGg/byhuZXcgbihyLmNvbmNhdChzKSkpOnM6cn07aS5leHAoe2dldE1ldGFkYXRhS2V5czpmdW5jdGlvbihlKXtyZXR1cm4gZihzKGUpLGFyZ3VtZW50cy5sZW5ndGg8Mj92b2lkIDA6Yyhhcmd1bWVudHNbMV0pKX19KX0sLyogNDAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxvPXIoMyksaT1uLmdldCxzPW4ua2V5O24uZXhwKHtnZXRPd25NZXRhZGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBpKGUsbyh0KSxhcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOnMoYXJndW1lbnRzWzJdKSl9fSl9LC8qIDQwMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCksbz1yKDMpLGk9bi5rZXlzLHM9bi5rZXk7bi5leHAoe2dldE93bk1ldGFkYXRhS2V5czpmdW5jdGlvbihlKXtyZXR1cm4gaShvKGUpLGFyZ3VtZW50cy5sZW5ndGg8Mj92b2lkIDA6cyhhcmd1bWVudHNbMV0pKX19KX0sLyogNDAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxvPXIoMyksaT1yKDI2KSxzPW4uaGFzLGE9bi5rZXksdT1mdW5jdGlvbihlLHQscil7aWYocyhlLHQscikpcmV0dXJuITA7dmFyIG49aSh0KTtyZXR1cm4gbnVsbCE9PW4mJnUoZSxuLHIpfTtuLmV4cCh7aGFzTWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdShlLG8odCksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDphKGFyZ3VtZW50c1syXSkpfX0pfSwvKiA0MDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzgpLG89cigzKSxpPW4uaGFzLHM9bi5rZXk7bi5leHAoe2hhc093bk1ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkoZSxvKHQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6cyhhcmd1bWVudHNbMl0pKX19KX0sLyogNDA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxvPXIoMyksaT1yKDE2KSxzPW4ua2V5LGE9bi5zZXQ7bi5leHAoe21ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsbil7YShlLHQsKHZvaWQgMCE9PW4/bzppKShyKSxzKG4pKX19fSl9LC8qIDQwNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yd2FsZHJvbi90YzM5LW5vdGVzL2Jsb2IvbWFzdGVyL2VzNi8yMDE0LTA5L3NlcHQtMjUubWQjNTEwLWdsb2JhbGFzYXAtZm9yLWVucXVldWluZy1hLW1pY3JvdGFzawp2YXIgbj1yKDApLG89cigxMjUpKCksaT1yKDQpLnByb2Nlc3Mscz0icHJvY2VzcyI9PXIoMjkpKGkpO24obi5HLHthc2FwOmZ1bmN0aW9uKGUpe3ZhciB0PXMmJmkuZG9tYWluO28odD90LmJpbmQoZSk6ZSl9fSl9LC8qIDQwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vemVucGFyc2luZy9lcy1vYnNlcnZhYmxlCnZhciBuPXIoMCksbz1yKDQpLGk9cigyNykscz1yKDEyNSkoKSxhPXIoOSkoIm9ic2VydmFibGUiKSx1PXIoMTYpLGM9cigzKSxmPXIoNTQpLGw9cig1NiksZD1yKDE4KSxwPXIoNTUpLHk9cC5SRVRVUk4saD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA6dShlKX0sdj1mdW5jdGlvbihlKXt2YXIgdD1lLl9jO3QmJihlLl9jPXZvaWQgMCx0KCkpfSxnPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lLl9vfSxiPWZ1bmN0aW9uKGUpe2coZSl8fChlLl9vPXZvaWQgMCx2KGUpKX0sXz1mdW5jdGlvbihlLHQpe2MoZSksdGhpcy5fYz12b2lkIDAsdGhpcy5fbz1lLGU9bmV3IG0odGhpcyk7dHJ5e3ZhciByPXQoZSksbj1yO251bGwhPXImJigiZnVuY3Rpb24iPT10eXBlb2Ygci51bnN1YnNjcmliZT9yPWZ1bmN0aW9uKCl7bi51bnN1YnNjcmliZSgpfTp1KHIpLHRoaXMuX2M9cil9Y2F0Y2godCl7cmV0dXJuIHZvaWQgZS5lcnJvcih0KX1nKHRoaXMpJiZ2KHRoaXMpfTtfLnByb3RvdHlwZT1sKHt9LHt1bnN1YnNjcmliZTpmdW5jdGlvbigpe2IodGhpcyl9fSk7dmFyIG09ZnVuY3Rpb24oZSl7dGhpcy5fcz1lfTttLnByb3RvdHlwZT1sKHt9LHtuZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3M7aWYoIWcodCkpe3ZhciByPXQuX287dHJ5e3ZhciBuPWgoci5uZXh0KTtpZihuKXJldHVybiBuLmNhbGwocixlKX1jYXRjaChlKXt0cnl7Yih0KX1maW5hbGx5e3Rocm93IGV9fX19LGVycm9yOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3M7aWYoZyh0KSl0aHJvdyBlO3ZhciByPXQuX287dC5fbz12b2lkIDA7dHJ5e3ZhciBuPWgoci5lcnJvcik7aWYoIW4pdGhyb3cgZTtlPW4uY2FsbChyLGUpfWNhdGNoKGUpe3RyeXt2KHQpfWZpbmFsbHl7dGhyb3cgZX19cmV0dXJuIHYodCksZX0sY29tcGxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcztpZighZyh0KSl7dmFyIHI9dC5fbzt0Ll9vPXZvaWQgMDt0cnl7dmFyIG49aChyLmNvbXBsZXRlKTtlPW4/bi5jYWxsKHIsZSk6dm9pZCAwfWNhdGNoKGUpe3RyeXt2KHQpfWZpbmFsbHl7dGhyb3cgZX19cmV0dXJuIHYodCksZX19fSk7dmFyIFI9ZnVuY3Rpb24oZSl7Zih0aGlzLFIsIk9ic2VydmFibGUiLCJfZiIpLl9mPXUoZSl9O2woUi5wcm90b3R5cGUse3N1YnNjcmliZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IF8oZSx0aGlzLl9mKX0sZm9yRWFjaDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcoaS5Qcm9taXNlfHxvLlByb21pc2UpKGZ1bmN0aW9uKHIsbil7dShlKTt2YXIgbz10LnN1YnNjcmliZSh7bmV4dDpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGUodCl9Y2F0Y2goZSl7bihlKSxvLnVuc3Vic2NyaWJlKCl9fSxlcnJvcjpuLGNvbXBsZXRlOnJ9KX0pfX0pLGwoUix7ZnJvbTpmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOlIscj1oKGMoZSlbYV0pO2lmKHIpe3ZhciBuPWMoci5jYWxsKGUpKTtyZXR1cm4gbi5jb25zdHJ1Y3Rvcj09PXQ/bjpuZXcgdChmdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzY3JpYmUoZSl9KX1yZXR1cm4gbmV3IHQoZnVuY3Rpb24odCl7dmFyIHI9ITE7cmV0dXJuIHMoZnVuY3Rpb24oKXtpZighcil7dHJ5e2lmKHAoZSwhMSxmdW5jdGlvbihlKXtpZih0Lm5leHQoZSkscilyZXR1cm4geX0pPT09eSlyZXR1cm59Y2F0Y2goZSl7aWYocil0aHJvdyBlO3JldHVybiB2b2lkIHQuZXJyb3IoZSl9dC5jb21wbGV0ZSgpfX0pLGZ1bmN0aW9uKCl7cj0hMH19KX0sb2Y6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkodCk7ZTx0OylyW2VdPWFyZ3VtZW50c1tlKytdO3JldHVybiBuZXcoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpSKShmdW5jdGlvbihlKXt2YXIgdD0hMTtyZXR1cm4gcyhmdW5jdGlvbigpe2lmKCF0KXtmb3IodmFyIG49MDtuPHIubGVuZ3RoOysrbilpZihlLm5leHQocltuXSksdClyZXR1cm47ZS5jb21wbGV0ZSgpfX0pLGZ1bmN0aW9uKCl7dD0hMH19KX19KSxkKFIucHJvdG90eXBlLGEsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG4obi5HLHtPYnNlcnZhYmxlOlJ9KSxyKDUzKSgiT2JzZXJ2YWJsZSIpfSwvKiA0MDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBpZTktIHNldFRpbWVvdXQgJiBzZXRJbnRlcnZhbCBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgZml4CnZhciBuPXIoNCksbz1yKDApLGk9cig4OCkscz1bXS5zbGljZSxhPS9NU0lFIC5cLi8udGVzdChpKSx1PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MixvPSEhbiYmcy5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZShuP2Z1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwooImZ1bmN0aW9uIj09dHlwZW9mIHQ/dDpGdW5jdGlvbih0KSkuYXBwbHkodGhpcyxvKX06dCxyKX19O28oby5HK28uQitvLkYqYSx7c2V0VGltZW91dDp1KG4uc2V0VGltZW91dCksc2V0SW50ZXJ2YWw6dShuLnNldEludGVydmFsKX0pfSwvKiA0MDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksbz1yKDEyNCk7bihuLkcrbi5CLHtzZXRJbW1lZGlhdGU6by5zZXQsY2xlYXJJbW1lZGlhdGU6by5jbGVhcn0pfSwvKiA0MTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj1yKDEyMyksbz1yKDQ5KSxpPXIoMTkpLHM9cig0KSxhPXIoMTgpLHU9cig2MiksYz1yKDkpLGY9YygiaXRlcmF0b3IiKSxsPWMoInRvU3RyaW5nVGFnIiksZD11LkFycmF5LHA9e0NTU1J1bGVMaXN0OiEwLC8vIFRPRE86IE5vdCBzcGVjIGNvbXBsaWFudCwgc2hvdWxkIGJlIGZhbHNlLgpDU1NTdHlsZURlY2xhcmF0aW9uOiExLENTU1ZhbHVlTGlzdDohMSxDbGllbnRSZWN0TGlzdDohMSxET01SZWN0TGlzdDohMSxET01TdHJpbmdMaXN0OiExLERPTVRva2VuTGlzdDohMCxEYXRhVHJhbnNmZXJJdGVtTGlzdDohMSxGaWxlTGlzdDohMSxIVE1MQWxsQ29sbGVjdGlvbjohMSxIVE1MQ29sbGVjdGlvbjohMSxIVE1MRm9ybUVsZW1lbnQ6ITEsSFRNTFNlbGVjdEVsZW1lbnQ6ITEsTWVkaWFMaXN0OiEwLC8vIFRPRE86IE5vdCBzcGVjIGNvbXBsaWFudCwgc2hvdWxkIGJlIGZhbHNlLgpNaW1lVHlwZUFycmF5OiExLE5hbWVkTm9kZU1hcDohMSxOb2RlTGlzdDohMCxQYWludFJlcXVlc3RMaXN0OiExLFBsdWdpbjohMSxQbHVnaW5BcnJheTohMSxTVkdMZW5ndGhMaXN0OiExLFNWR051bWJlckxpc3Q6ITEsU1ZHUGF0aFNlZ0xpc3Q6ITEsU1ZHUG9pbnRMaXN0OiExLFNWR1N0cmluZ0xpc3Q6ITEsU1ZHVHJhbnNmb3JtTGlzdDohMSxTb3VyY2VCdWZmZXJMaXN0OiExLFN0eWxlU2hlZXRMaXN0OiEwLC8vIFRPRE86IE5vdCBzcGVjIGNvbXBsaWFudCwgc2hvdWxkIGJlIGZhbHNlLgpUZXh0VHJhY2tDdWVMaXN0OiExLFRleHRUcmFja0xpc3Q6ITEsVG91Y2hMaXN0OiExfSx5PW8ocCksaD0wO2g8eS5sZW5ndGg7aCsrKXt2YXIgdixnPXlbaF0sYj1wW2ddLF89c1tnXSxtPV8mJl8ucHJvdG90eXBlO2lmKG0mJihtW2ZdfHxhKG0sZixkKSxtW2xdfHxhKG0sbCxnKSx1W2ddPWQsYikpZm9yKHYgaW4gbiltW3ZdfHxpKG0sdixuW3ZdLCEwKX19LC8qIDQxMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCihmdW5jdGlvbih0KXsvKioKICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLgogKiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGUKICogaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9tYXN0ZXIvTElDRU5TRSBmaWxlLiBBbgogKiBhZGRpdGlvbmFsIGdyYW50IG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4KICogdGhlIHNhbWUgZGlyZWN0b3J5LgogKi8KIWZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB3cmFwKGUsdCxyLG4pewovLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci4KdmFyIG89dCYmdC5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3I/dDpHZW5lcmF0b3IsaT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxzPW5ldyBDb250ZXh0KG58fFtdKTsKLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LAovLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuCnJldHVybiBpLl9pbnZva2U9bWFrZUludm9rZU1ldGhvZChlLHIscyksaX0KLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uCi8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZAovLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmUKLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZQovLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkCi8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmcKLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWUKLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlCi8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2gKLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLgpmdW5jdGlvbiB0cnlDYXRjaChlLHQscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzplLmNhbGwodCxyKX19Y2F0Y2goZSl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6ZX19fQovLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmQKLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yCi8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyCi8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuCmZ1bmN0aW9uIEdlbmVyYXRvcigpe31mdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpe31mdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpe30KLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGUKLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC4KZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKGUpe1sibmV4dCIsInRocm93IiwicmV0dXJuIl0uZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pbnZva2UodCxlKX19KX1mdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGUpe2Z1bmN0aW9uIGludm9rZSh0LHIsbixpKXt2YXIgcz10cnlDYXRjaChlW3RdLGUscik7aWYoInRocm93IiE9PXMudHlwZSl7dmFyIGE9cy5hcmcsdT1hLnZhbHVlO3JldHVybiB1JiYib2JqZWN0Ij09dHlwZW9mIHUmJm8uY2FsbCh1LCJfX2F3YWl0Iik/UHJvbWlzZS5yZXNvbHZlKHUuX19hd2FpdCkudGhlbihmdW5jdGlvbihlKXtpbnZva2UoIm5leHQiLGUsbixpKX0sZnVuY3Rpb24oZSl7aW52b2tlKCJ0aHJvdyIsZSxuLGkpfSk6UHJvbWlzZS5yZXNvbHZlKHUpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzCi8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZQovLyBjdXJyZW50IGl0ZXJhdGlvbi4gSWYgdGhlIFByb21pc2UgaXMgcmVqZWN0ZWQsIGhvd2V2ZXIsIHRoZQovLyByZXN1bHQgZm9yIHRoaXMgaXRlcmF0aW9uIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgc2FtZQovLyByZWFzb24uIE5vdGUgdGhhdCByZWplY3Rpb25zIG9mIHlpZWxkZWQgUHJvbWlzZXMgYXJlIG5vdAovLyB0aHJvd24gYmFjayBpbnRvIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIGFzIGlzIHRoZSBjYXNlCi8vIHdoZW4gYW4gYXdhaXRlZCBQcm9taXNlIGlzIHJlamVjdGVkLiBUaGlzIGRpZmZlcmVuY2UgaW4KLy8gYmVoYXZpb3IgYmV0d2VlbiB5aWVsZCBhbmQgYXdhaXQgaXMgaW1wb3J0YW50LCBiZWNhdXNlIGl0Ci8vIGFsbG93cyB0aGUgY29uc3VtZXIgdG8gZGVjaWRlIHdoYXQgdG8gZG8gd2l0aCB0aGUgeWllbGRlZAovLyByZWplY3Rpb24gKHN3YWxsb3cgaXQgYW5kIGNvbnRpbnVlLCBtYW51YWxseSAudGhyb3cgaXQgYmFjawovLyBpbnRvIHRoZSBnZW5lcmF0b3IsIGFiYW5kb24gaXRlcmF0aW9uLCB3aGF0ZXZlcikuIFdpdGgKLy8gYXdhaXQsIGJ5IGNvbnRyYXN0LCB0aGVyZSBpcyBubyBvcHBvcnR1bml0eSB0byBleGFtaW5lIHRoZQovLyByZWplY3Rpb24gcmVhc29uIG91dHNpZGUgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgc28gdGhlCi8vIG9ubHkgb3B0aW9uIGlzIHRvIHRocm93IGl0IGZyb20gdGhlIGF3YWl0IGV4cHJlc3Npb24sIGFuZAovLyBsZXQgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiBoYW5kbGUgdGhlIGV4Y2VwdGlvbi4KYS52YWx1ZT1lLG4oYSl9LGkpfWkocy5hcmcpfWZ1bmN0aW9uIGVucXVldWUoZSx0KXtmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyLG4pe2ludm9rZShlLHQscixuKX0pfQovLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsCi8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLAovLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmCi8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvCi8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLAovLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkbwovLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5Ci8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzCi8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5Ci8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlCi8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5Ci8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS4KLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXIKLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLgpyZXR1cm4gcj1yP3IudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyk6Y2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKX0ib2JqZWN0Ij09dHlwZW9mIHQucHJvY2VzcyYmdC5wcm9jZXNzLmRvbWFpbiYmKGludm9rZT10LnByb2Nlc3MuZG9tYWluLmJpbmQoaW52b2tlKSk7dmFyIHI7Ci8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsCi8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLgp0aGlzLl9pbnZva2U9ZW5xdWV1ZX1mdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGUsdCxyKXt2YXIgbj1sO3JldHVybiBmdW5jdGlvbihvLGkpe2lmKG49PT1wKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT15KXtpZigidGhyb3ciPT09byl0aHJvdyBpOwovLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOgovLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lCnJldHVybiBkb25lUmVzdWx0KCl9Zm9yKHIubWV0aG9kPW8sci5hcmc9aTs7KXt2YXIgcz1yLmRlbGVnYXRlO2lmKHMpe3ZhciBhPW1heWJlSW52b2tlRGVsZWdhdGUocyxyKTtpZihhKXtpZihhPT09aCljb250aW51ZTtyZXR1cm4gYX19aWYoIm5leHQiPT09ci5tZXRob2QpCi8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwncwovLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLgpyLnNlbnQ9ci5fc2VudD1yLmFyZztlbHNlIGlmKCJ0aHJvdyI9PT1yLm1ldGhvZCl7aWYobj09PWwpdGhyb3cgbj15LHIuYXJnO3IuZGlzcGF0Y2hFeGNlcHRpb24oci5hcmcpfWVsc2UicmV0dXJuIj09PXIubWV0aG9kJiZyLmFicnVwdCgicmV0dXJuIixyLmFyZyk7bj1wO3ZhciB1PXRyeUNhdGNoKGUsdCxyKTtpZigibm9ybWFsIj09PXUudHlwZSl7aWYoCi8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT0KLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLgpuPXIuZG9uZT95OmQsdS5hcmc9PT1oKWNvbnRpbnVlO3JldHVybnt2YWx1ZTp1LmFyZyxkb25lOnIuZG9uZX19InRocm93Ij09PXUudHlwZSYmKG49eSwKLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZQovLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLgpyLm1ldGhvZD0idGhyb3ciLHIuYXJnPXUuYXJnKX19fQovLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGUKLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZQovLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZywKLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuCmZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZSx0KXt2YXIgbj1lLml0ZXJhdG9yW3QubWV0aG9kXTtpZihuPT09cil7aWYoCi8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvdwovLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLgp0LmRlbGVnYXRlPW51bGwsInRocm93Ij09PXQubWV0aG9kKXtpZihlLml0ZXJhdG9yLnJldHVybiYmKAovLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhCi8vIGNoYW5jZSB0byBjbGVhbiB1cC4KdC5tZXRob2Q9InJldHVybiIsdC5hcmc9cixtYXliZUludm9rZURlbGVnYXRlKGUsdCksInRocm93Ij09PXQubWV0aG9kKSkKLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb20KLy8gInJldHVybiIgdG8gInRocm93IiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy4KcmV0dXJuIGg7dC5tZXRob2Q9InRocm93Iix0LmFyZz1uZXcgVHlwZUVycm9yKCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kIil9cmV0dXJuIGh9dmFyIG89dHJ5Q2F0Y2gobixlLml0ZXJhdG9yLHQuYXJnKTtpZigidGhyb3ciPT09by50eXBlKXJldHVybiB0Lm1ldGhvZD0idGhyb3ciLHQuYXJnPW8uYXJnLHQuZGVsZWdhdGU9bnVsbCxoO3ZhciBpPW8uYXJnOwovLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeQovLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLgovLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuCi8vIElmIGNvbnRleHQubWV0aG9kIHdhcyAidGhyb3ciIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGUKLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZgovLyBjb250ZXh0Lm1ldGhvZCB3YXMgIm5leHQiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW4KLy8gImNvbnN1bWVkIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhcwovLyAicmV0dXJuIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGUKLy8gb3V0ZXIgZ2VuZXJhdG9yLgovLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aAovLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLgpyZXR1cm4gaT9pLmRvbmU/KHRbZS5yZXN1bHROYW1lXT1pLnZhbHVlLHQubmV4dD1lLm5leHRMb2MsInJldHVybiIhPT10Lm1ldGhvZCYmKHQubWV0aG9kPSJuZXh0Iix0LmFyZz1yKSx0LmRlbGVnYXRlPW51bGwsaCk6aToodC5tZXRob2Q9InRocm93Iix0LmFyZz1uZXcgVHlwZUVycm9yKCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdCIpLHQuZGVsZWdhdGU9bnVsbCxoKX1mdW5jdGlvbiBwdXNoVHJ5RW50cnkoZSl7dmFyIHQ9e3RyeUxvYzplWzBdfTsxIGluIGUmJih0LmNhdGNoTG9jPWVbMV0pLDIgaW4gZSYmKHQuZmluYWxseUxvYz1lWzJdLHQuYWZ0ZXJMb2M9ZVszXSksdGhpcy50cnlFbnRyaWVzLnB1c2godCl9ZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlKXt2YXIgdD1lLmNvbXBsZXRpb258fHt9O3QudHlwZT0ibm9ybWFsIixkZWxldGUgdC5hcmcsZS5jb21wbGV0aW9uPXR9ZnVuY3Rpb24gQ29udGV4dChlKXsKLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoCi8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb20KLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50Lgp0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sZS5mb3JFYWNoKHB1c2hUcnlFbnRyeSx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiB2YWx1ZXMoZSl7aWYoZSl7dmFyIHQ9ZVtzXTtpZih0KXJldHVybiB0LmNhbGwoZSk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUubmV4dClyZXR1cm4gZTtpZighaXNOYU4oZS5sZW5ndGgpKXt2YXIgbj0tMSxpPWZ1bmN0aW9uIG5leHQoKXtmb3IoOysrbjxlLmxlbmd0aDspaWYoby5jYWxsKGUsbikpcmV0dXJuIG5leHQudmFsdWU9ZVtuXSxuZXh0LmRvbmU9ITEsbmV4dDtyZXR1cm4gbmV4dC52YWx1ZT1yLG5leHQuZG9uZT0hMCxuZXh0fTtyZXR1cm4gaS5uZXh0PWl9fQovLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuCnJldHVybntuZXh0OmRvbmVSZXN1bHR9fWZ1bmN0aW9uIGRvbmVSZXN1bHQoKXtyZXR1cm57dmFsdWU6cixkb25lOiEwfX12YXIgcixuPU9iamVjdC5wcm90b3R5cGUsbz1uLmhhc093blByb3BlcnR5LGk9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbD9TeW1ib2w6e30scz1pLml0ZXJhdG9yfHwiQEBpdGVyYXRvciIsYT1pLmFzeW5jSXRlcmF0b3J8fCJAQGFzeW5jSXRlcmF0b3IiLHU9aS50b1N0cmluZ1RhZ3x8IkBAdG9TdHJpbmdUYWciLGM9Im9iamVjdCI9PXR5cGVvZiBlLGY9dC5yZWdlbmVyYXRvclJ1bnRpbWU7aWYoZikKLy8gRG9uJ3QgYm90aGVyIGV2YWx1YXRpbmcgdGhlIHJlc3Qgb2YgdGhpcyBmaWxlIGlmIHRoZSBydW50aW1lIHdhcwovLyBhbHJlYWR5IGRlZmluZWQgZ2xvYmFsbHkuCi8vIElmIHJlZ2VuZXJhdG9yUnVudGltZSBpcyBkZWZpbmVkIGdsb2JhbGx5IGFuZCB3ZSdyZSBpbiBhIG1vZHVsZSwKLy8gbWFrZSB0aGUgZXhwb3J0cyBvYmplY3QgaWRlbnRpY2FsIHRvIHJlZ2VuZXJhdG9yUnVudGltZS4KcmV0dXJuIHZvaWQoYyYmKGUuZXhwb3J0cz1mKSk7Ci8vIERlZmluZSB0aGUgcnVudGltZSBnbG9iYWxseSAoYXMgZXhwZWN0ZWQgYnkgZ2VuZXJhdGVkIGNvZGUpIGFzIGVpdGhlcgovLyBtb2R1bGUuZXhwb3J0cyAoaWYgd2UncmUgaW4gYSBtb2R1bGUpIG9yIGEgbmV3LCBlbXB0eSBvYmplY3QuCmY9dC5yZWdlbmVyYXRvclJ1bnRpbWU9Yz9lLmV4cG9ydHM6e30sZi53cmFwPXdyYXA7dmFyIGw9InN1c3BlbmRlZFN0YXJ0IixkPSJzdXNwZW5kZWRZaWVsZCIscD0iZXhlY3V0aW5nIix5PSJjb21wbGV0ZWQiLGg9e30sdj17fTt2W3NdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3ZhciBnPU9iamVjdC5nZXRQcm90b3R5cGVPZixiPWcmJmcoZyh2YWx1ZXMoW10pKSk7YiYmYiE9PW4mJm8uY2FsbChiLHMpJiYoCi8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkCi8vIG9mIHRoZSBwb2x5ZmlsbC4Kdj1iKTt2YXIgXz1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGU9R2VuZXJhdG9yLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHYpO0dlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZT1fLmNvbnN0cnVjdG9yPUdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yPUdlbmVyYXRvckZ1bmN0aW9uLEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlW3VdPUdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lPSJHZW5lcmF0b3JGdW5jdGlvbiIsZi5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yOwovLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuCi8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS4KcmV0dXJuISF0JiYodD09PUdlbmVyYXRvckZ1bmN0aW9ufHwiR2VuZXJhdG9yRnVuY3Rpb24iPT09KHQuZGlzcGxheU5hbWV8fHQubmFtZSkpfSxmLm1hcms9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSxHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk6KGUuX19wcm90b19fPUdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLHUgaW4gZXx8KGVbdV09IkdlbmVyYXRvckZ1bmN0aW9uIikpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoXyksZX0sCi8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0bwovLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdAovLyBgaGFzT3duLmNhbGwodmFsdWUsICJfX2F3YWl0IilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpcwovLyBtZWFudCB0byBiZSBhd2FpdGVkLgpmLmF3cmFwPWZ1bmN0aW9uKGUpe3JldHVybntfX2F3YWl0OmV9fSxkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpLEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGYuQXN5bmNJdGVyYXRvcj1Bc3luY0l0ZXJhdG9yLAovLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mCi8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZgovLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci4KZi5hc3luYz1mdW5jdGlvbihlLHQscixuKXt2YXIgbz1uZXcgQXN5bmNJdGVyYXRvcih3cmFwKGUsdCxyLG4pKTtyZXR1cm4gZi5pc0dlbmVyYXRvckZ1bmN0aW9uKHQpP286by5uZXh0KCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5kb25lP2UudmFsdWU6by5uZXh0KCl9KX0sCi8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlCi8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC4KZGVmaW5lSXRlcmF0b3JNZXRob2RzKF8pLF9bdV09IkdlbmVyYXRvciIsCi8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlCi8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlCi8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yCi8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLgovLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy4KX1tzXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxfLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIltvYmplY3QgR2VuZXJhdG9yXSJ9LGYua2V5cz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gZSl0LnB1c2gocik7Ci8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwCi8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuCnJldHVybiB0LnJldmVyc2UoKSxmdW5jdGlvbiBuZXh0KCl7Zm9yKDt0Lmxlbmd0aDspe3ZhciByPXQucG9wKCk7aWYociBpbiBlKXJldHVybiBuZXh0LnZhbHVlPXIsbmV4dC5kb25lPSExLG5leHR9Ci8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZQovLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpcwovLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi4KcmV0dXJuIG5leHQuZG9uZT0hMCxuZXh0fX0sZi52YWx1ZXM9dmFsdWVzLENvbnRleHQucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpDb250ZXh0LHJlc2V0OmZ1bmN0aW9uKGUpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLAovLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwncwovLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLgp0aGlzLnNlbnQ9dGhpcy5fc2VudD1yLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9Im5leHQiLHRoaXMuYXJnPXIsdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSksIWUpZm9yKHZhciB0IGluIHRoaXMpCi8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6CiJ0Ij09PXQuY2hhckF0KDApJiZvLmNhbGwodGhpcyx0KSYmIWlzTmFOKCt0LnNsaWNlKDEpKSYmKHRoaXNbdF09cil9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIGU9dGhpcy50cnlFbnRyaWVzWzBdLHQ9ZS5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaGFuZGxlKG4sbyl7Ci8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssCi8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuCnJldHVybiBzLnR5cGU9InRocm93IixzLmFyZz1lLHQubmV4dD1uLG8mJih0Lm1ldGhvZD0ibmV4dCIsdC5hcmc9ciksISFvfWlmKHRoaXMuZG9uZSl0aHJvdyBlO2Zvcih2YXIgdD10aGlzLG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbbl0scz1pLmNvbXBsZXRpb247aWYoInJvb3QiPT09aS50cnlMb2MpCi8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlCi8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0bwovLyB0aHJvdyB0aGUgZXhjZXB0aW9uLgpyZXR1cm4gaGFuZGxlKCJlbmQiKTtpZihpLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgYT1vLmNhbGwoaSwiY2F0Y2hMb2MiKSx1PW8uY2FsbChpLCJmaW5hbGx5TG9jIik7aWYoYSYmdSl7aWYodGhpcy5wcmV2PGkuY2F0Y2hMb2MpcmV0dXJuIGhhbmRsZShpLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8aS5maW5hbGx5TG9jKXJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKX1lbHNlIGlmKGEpe2lmKHRoaXMucHJldjxpLmNhdGNoTG9jKXJldHVybiBoYW5kbGUoaS5jYXRjaExvYywhMCl9ZWxzZXtpZighdSl0aHJvdyBuZXcgRXJyb3IoInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5Iik7aWYodGhpcy5wcmV2PGkuZmluYWxseUxvYylyZXR1cm4gaGFuZGxlKGkuZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBuPXRoaXMudHJ5RW50cmllc1tyXTtpZihuLnRyeUxvYzw9dGhpcy5wcmV2JiZvLmNhbGwobiwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8bi5maW5hbGx5TG9jKXt2YXIgaT1uO2JyZWFrfX1pJiYoImJyZWFrIj09PWV8fCJjb250aW51ZSI9PT1lKSYmaS50cnlMb2M8PXQmJnQ8PWkuZmluYWxseUxvYyYmKAovLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhCi8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay4KaT1udWxsKTt2YXIgcz1pP2kuY29tcGxldGlvbjp7fTtyZXR1cm4gcy50eXBlPWUscy5hcmc9dCxpPyh0aGlzLm1ldGhvZD0ibmV4dCIsdGhpcy5uZXh0PWkuZmluYWxseUxvYyxoKTp0aGlzLmNvbXBsZXRlKHMpfSxjb21wbGV0ZTpmdW5jdGlvbihlLHQpe2lmKCJ0aHJvdyI9PT1lLnR5cGUpdGhyb3cgZS5hcmc7cmV0dXJuImJyZWFrIj09PWUudHlwZXx8ImNvbnRpbnVlIj09PWUudHlwZT90aGlzLm5leHQ9ZS5hcmc6InJldHVybiI9PT1lLnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz1lLmFyZyx0aGlzLm1ldGhvZD0icmV0dXJuIix0aGlzLm5leHQ9ImVuZCIpOiJub3JtYWwiPT09ZS50eXBlJiZ0JiYodGhpcy5uZXh0PXQpLGh9LGZpbmlzaDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgcj10aGlzLnRyeUVudHJpZXNbdF07aWYoci5maW5hbGx5TG9jPT09ZSlyZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sci5hZnRlckxvYykscmVzZXRUcnlFbnRyeShyKSxofX0sY2F0Y2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTt0Pj0wOy0tdCl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW3RdO2lmKHIudHJ5TG9jPT09ZSl7dmFyIG49ci5jb21wbGV0aW9uO2lmKCJ0aHJvdyI9PT1uLnR5cGUpe3ZhciBvPW4uYXJnO3Jlc2V0VHJ5RW50cnkocil9cmV0dXJuIG99fQovLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb24KLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLgp0aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKGUsdCxuKXsKLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3QKLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLgpyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6dmFsdWVzKGUpLHJlc3VsdE5hbWU6dCxuZXh0TG9jOm59LCJuZXh0Ij09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9ciksaH19fSgKLy8gQW1vbmcgdGhlIHZhcmlvdXMgdHJpY2tzIGZvciBvYnRhaW5pbmcgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbAovLyBvYmplY3QsIHRoaXMgc2VlbXMgdG8gYmUgdGhlIG1vc3QgcmVsaWFibGUgdGVjaG5pcXVlIHRoYXQgZG9lcyBub3QKLy8gdXNlIGluZGlyZWN0IGV2YWwgKHdoaWNoIHZpb2xhdGVzIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5KS4KIm9iamVjdCI9PXR5cGVvZiB0P3Q6Im9iamVjdCI9PXR5cGVvZiB3aW5kb3c/d2luZG93OiJvYmplY3QiPT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMpfSkuY2FsbCh0LHIoMTQ3KSl9LC8qIDQxMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MTMpLGUuZXhwb3J0cz1yKDI3KS5SZWdFeHAuZXNjYXBlfSwvKiA0MTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vYmVuamFtaW5nci9SZXhFeHAuZXNjYXBlCnZhciBuPXIoMCksbz1yKDQxNCkoL1tcXF4kKis/LigpfFtcXXt9XS9nLCJcXCQmIik7bihuLlMsIlJlZ0V4cCIse2VzY2FwZTpmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX19KX0sLyogNDE0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dD09PU9iamVjdCh0KT9mdW5jdGlvbihlKXtyZXR1cm4gdFtlXX06dDtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIFN0cmluZyh0KS5yZXBsYWNlKGUscil9fX0sLyogNDE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMzEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig5NyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMjAwKSx5PXIoNyksaD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHkpLHY9cig0NDMpLGc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxiPXIoNDcyKSxfPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYiksbT1yKDQ3OCksUj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLHc9cig0NzkpLFM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh3KSxrPXIoNDkwKSxPPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoayksUD1yKDE0KSxNPXIoMTAwKSxMPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoTSkseD1yKDEwMSksQT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHgpLEQ9cig0OTQpLFU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChEKSxqPXIoNDk1KSxFPXIoNDk2KSxJPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoRSksQz1yKDE0NCksVD1yKDQ5NykscT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFQpLEg9cig5OSksRj1yKDQ5OCksTj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEYpLEI9cig1MDApLEc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChCKSxLPXIoNTAxKSxWPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoSyksVz1yKDUwNSksWT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFcpLHo9cig1MDgpLEo9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh6KSxaPXIoNTE0KSxRPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoWiksJD1yKDUxNiksWD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KCQpLGVlPWguZ2V0TG9nZ2VyKCJSdW50aW1lVUEiKSx0ZT1mdW5jdGlvbigpey8qKgogICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBSdW50aW1lIFVzZXIgQWdlbnQKICAgKiBAcGFyYW0ge2Rlc2NyaXB0b3J9IHJ1bnRpbWVEZXNjcmlwdG9yIC0gcGFzcyBhbGwgdGhlIGh5cGVydHkgcnVudGltZSBkZXNjcmlwdG9yCiAgICogQHBhcmFtIHtydW50aW1lRmFjdG9yeX0gcnVudGltZUZhY3RvcnkgLSBTcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGVudmlyb25tZW50IHdoZXJlIHRoZSBjb3JlIHJ1bnRpbWUgd2lsbCBydW47CiAgICogQHBhcmFtIHtkb21haW59IGRvbWFpblVSTCAtIHNwZWNpZnkgdGhlIGRvbWFpbiBiYXNlIGZvciB0aGUgcnVudGltZTsKICAgKi8KZnVuY3Rpb24gUnVudGltZVVBKGUsdCxyKXtpZigoMCxmLmRlZmF1bHQpKHRoaXMsUnVudGltZVVBKSwhZSl0aHJvdyBuZXcgRXJyb3IoIlRoZSBydW50aW1lIGRlc2NyaXB0b3IgaXMgYSBuZWVkZWQgcGFyYW1ldGVyIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJUaGUgc2FuZGJveCBmYWN0b3J5IGlzIGEgbmVlZGVkIHBhcmFtZXRlciIpO2lmKCFyKXRocm93IG5ldyBFcnJvcigiWW91IG5lZWQgdGhlIGRvbWFpbiBvZiBydW50aW1lIik7aWYoCi8vIENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggaW5mb3JtYXRpb24gcmVsYXRlZCB3aXRoIHNlcnZlcnMKdGhpcy5ydW50aW1lQ29uZmlndXJhdGlvbj0oMCx1LmRlZmF1bHQpKHtkb21haW46cn0sQy5ydW50aW1lQ29uZmlndXJhdGlvbiksdGhpcy5ydW50aW1lRmFjdG9yeT10LHRoaXMubG9nPWVlLHRoaXMubG9nTGV2ZWxzPXAubG9nLGUucDJwSGFuZGxlclN0dWImJiJzdHJpbmciPT10eXBlb2YgZS5wMnBIYW5kbGVyU3R1YiYmZS5wMnBIYW5kbGVyU3R1Yi5pbmNsdWRlcygiOi8vIik/dGhpcy5wMnA9ITA6dGhpcy5wMnA9ITEsSC5ydW50aW1lVXRpbHMucnVudGltZURlc2NyaXB0b3I9ZSx0aGlzLnJ1bnRpbWVVdGlscz1ILnJ1bnRpbWVVdGlscyx0aGlzLnN0b3JhZ2VzPXt9LCJmdW5jdGlvbiIhPXR5cGVvZiB0LmNyZWF0ZVJ1bnRpbWVDYXRhbG9ndWUpdGhyb3cgbmV3IEVycm9yKCJDaGVjayB5b3VyIFJ1bnRpbWUgRmFjdG9yeSBiZWNhdXNlIGl0IG5lZWRzIHRoZSBSdW50aW1lIENhdGFsb2d1ZSBpbXBsZW1lbnRhdGlvbiIpO2lmKHRoaXMucnVudGltZUNhdGFsb2d1ZT10LmNyZWF0ZVJ1bnRpbWVDYXRhbG9ndWUoKSwiZnVuY3Rpb24iIT10eXBlb2YgdC5wZXJzaXN0ZW5jZU1hbmFnZXIpdGhyb3cgbmV3IEVycm9yKCJDaGVjayB5b3VyIFJ1bnRpbWUgRmFjdG9yeSBiZWNhdXNlIGl0IG5lZWRzIHRoZSBQZXJzaXN0ZW5jZSBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIik7aWYodGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXI9dC5wZXJzaXN0ZW5jZU1hbmFnZXIoKSwiZnVuY3Rpb24iIT10eXBlb2YgdC5zdG9yYWdlTWFuYWdlcil0aHJvdyBuZXcgRXJyb3IoIkNoZWNrIHlvdXIgUnVudGltZSBGYWN0b3J5IGJlY2F1c2UgaXQgbmVlZHMgdGhlIFN0b3JhZ2UgTWFuYWdlciBpbXBsZW1lbnRhdGlvbiIpO3RoaXMuc3RvcmFnZXM9KDAsai5zdG9yYWdlKSh0KSwiZnVuY3Rpb24iPT10eXBlb2YgdC5ydW50aW1lQ2FwYWJpbGl0aWVzP3RoaXMucnVudGltZUNhcGFiaWxpdGllcz10LnJ1bnRpbWVDYXBhYmlsaXRpZXModGhpcy5zdG9yYWdlcy5jYXBhYmlsaXRpZXMpOmVlLmluZm8oIkNoZWNrIHlvdXIgUnVudGltZUZhY3RvcnkgYmVjYXVzZSBpdCBuZWVkcyB0aGUgUnVudGltZSBDYXBhYmlsaXRpZXMgaW1wbGVtZW50YXRpb24iKX0vKioKICAgKiBJbnRpYWxpemUgdGhlIGluc3RhbGxhdGlvbiBvZiBydW50aW1lCiAgICoKICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEByZXR1cm4ge1Byb21pc2U8Qm9vbGVhbiwgRXJyb3I+fSB0aGlzIGlzIFByb21pc2UgYW5kIGlmIHRoZSBpbnN0YWxsYXRpb24gcHJvY2VzcyBoYXBwZW5lZCB3aXRob3V0IGFueSBwcm9ibGVtcyByZXR1cm5zIHRydWUgb3RoZXJ3aXNlIHRoZSBlcnJvci4KICAgKgogICAqIEBtZW1iZXJPZiBSdW50aW1lVUEKICAgKi8KcmV0dXJuKDAsZC5kZWZhdWx0KShSdW50aW1lVUEsW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbih0LHIpe2UuZG9tYWluPWUucnVudGltZUNvbmZpZ3VyYXRpb24uZG9tYWluO3RyeXt2YXIgbj1lLnJ1bnRpbWVDYXBhYmlsaXRpZXMuZ2V0UnVudGltZUNhcGFiaWxpdGllcygpLG89ZS5zdG9yYWdlcy5ydW50aW1lLmdldCgicnVudGltZTpVUkwiKSxpPWUuc3RvcmFnZXMuc3luY2hlck1hbmFnZXIuZ2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiksYT1lLnN0b3JhZ2VzLmh5cGVydHlSZXNvdXJjZXMuZ2V0KCksYz1lLnN0b3JhZ2VzLnJ1bnRpbWUuZ2V0KCJwMnBIYW5kbGVyOlVSTCIpO3MuZGVmYXVsdC5hbGwoW28sbixpLGEsY10pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUucnVudGltZVVSTD10WzBdP3RbMF0ucnVudGltZVVSTDp0WzBdLGUucnVudGltZVVSTHx8KGUucnVudGltZVVSTD0icnVudGltZTovLyIrZS5kb21haW4rIi8iKygwLFAuZ2VuZXJhdGVHVUlEKSgpLGUuc3RvcmFnZXMucnVudGltZS5zZXQoInJ1bnRpbWU6VVJMIiwxLHtydW50aW1lVVJMOmUucnVudGltZVVSTH0pKSxlLmNhcGFiaWxpdGllcz10WzFdLCgwLHUuZGVmYXVsdCkoSC5ydW50aW1lVXRpbHMucnVudGltZUNhcGFiaWxpdGllcy5jb25zdHJhaW50cyx0WzFdKSxlLl9kYXRhT2JqZWN0c1N0b3JhZ2U9bmV3IFYuZGVmYXVsdChlLnN0b3JhZ2VzLnN5bmNoZXJNYW5hZ2VyLHRbMl18fHt9KSxlLl9oeXBlcnR5UmVzb3VyY2VzPXRbM118fHt9LGUucDJwSGFuZGxlclVSTD10WzRdP3RbNF0ucDJwSGFuZGxlclVSTDp0WzRdLGUucDJwSGFuZGxlclVSTHx8KGUucDJwSGFuZGxlclVSTD1lLnJ1bnRpbWVVUkwrIi9wMnBoYW5kbGVyLyIrKDAsUC5nZW5lcmF0ZUdVSUQpKCksZWUuaW5mbygiW1J1bnRpbWVVQSAtIGluaXRdIFAyUEhhbmRsZXJVUkw6ICIsZS5wMnBIYW5kbGVyVVJMKSxlLnN0b3JhZ2VzLnJ1bnRpbWUuc2V0KCJwMnBIYW5kbGVyOlVSTCIsMSx7cDJwSGFuZGxlclVSTDplLnAycEhhbmRsZXJVUkx9KSksZS5fbG9hZENvbXBvbmVudHMoKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuX2h5cGVydHlSZXNvdXJjZXNTdG9yYWdlPW5ldyBZLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLnN0b3JhZ2VzLmh5cGVydHlSZXNvdXJjZXMsZS5faHlwZXJ0eVJlc291cmNlcyksZS5wMnA/KGVlLmluZm8oIltSdW50aW1lVUEgLSBpbml0XSBsb2FkIHAycEhhbmRsZXI6ICIsdCksZS5fbG9hZFAyUEhhbmRsZXIoKSk6KGVlLmluZm8oIltSdW50aW1lVUEgLSBpbml0XSBQMlAgbm90IHN1cHBvcnRlZCIpLCJQMlAgTm90IFN1cHBvcnRlZCIpfSkudGhlbihmdW5jdGlvbihlKXtlZS5pbmZvKCJbcnVudGltZSB1YSAtIGluaXRdIC0gc3RhdHVzOiAiLGUpLHQoITApfSxmdW5jdGlvbihlKXtlZS5lcnJvcigiRVJST1I6ICIsZSksdCghMCl9KX1jYXRjaChlKXtyKGUpfX0pfX0se2tleToiX2xvYWRQMlBIYW5kbGVyIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24odCl7dmFyIHI9SC5ydW50aW1lVXRpbHMucnVudGltZURlc2NyaXB0b3Isbj1yLnAycEhhbmRsZXJTdHViLG89e2lzSGFuZGxlclN0dWI6ITAscnVudGltZVVSTDplLnJ1bnRpbWVVUkx9O2VlLmxvZygiW1J1bnRpbWVVQSBsb2FkUDJQSGFuZGxlcl0gUDJQU3R1YkhhbmRsZXI6ICIsbiksZS5sb2FkZXIubG9hZFN0dWIobixvKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPWUucnVudGltZVVSTCsiL3VhIixvPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206bix0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitlLmRvbWFpbisiL3NtIixib2R5OntzdWJzY3JpYmU6W3IudXJsXSxzb3VyY2U6ZS5ydW50aW1lVVJMfX07ZS5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKG4sZnVuY3Rpb24oZSl7ZWUubG9nKCJbcnVudGltZSB1YSAtIGxpc3RlbmVyXSAtIHJlY2VpdmUgbXNnOiAiLGUpfSksZS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24oZSl7ZWUubG9nKCJbcnVudGltZSB1YSAtIHBvc3RNZXNzYWdlXSAtIHJlcGx5OiAiLGUpfSksZWUuaW5mbygiW3J1bnRpbWUgdWEgLSBwMnAgaW5zdGFsbGF0aW9uXSAtIHN1Y2Nlc3M6ICIsciksdCghMCl9KS5jYXRjaChmdW5jdGlvbihlKXtlZS5pbmZvKCJbcnVudGltZSB1YSAtIHAycCBpbnN0YWxsYXRpb25dIC0gZmFpbDogIixlKSx0KCExKX0pfSl9fSx7a2V5OiJfbG9hZENvbXBvbmVudHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbih0LHIpe3RyeXsKLy8gUHJlcGFyZSB0aGUgb24gaW5zdGFuY2UgdG8gaGFuZGxlIHdpdGggdGhlIGZhbGxiYWNrcyBhbmQgcnVudGltZUNhdGFsb2d1ZTsKZS5kZXNjcmlwdG9ySW5zdGFuY2U9bmV3IEkuZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5ydW50aW1lQ2F0YWxvZ3VlLGUucnVudGltZUNvbmZpZ3VyYXRpb24pLAovLyBQcmVwYXJlIHRoZSBsb2FkZXIgdG8gbG9hZCB0aGUgaHlwZXJ0aWVzLCBwcm90b3N0dWJzIGFuZCBpZHBwcm94eTsKZS5sb2FkZXI9bmV3IFUuZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5ydW50aW1lQ29uZmlndXJhdGlvbixlLmRlc2NyaXB0b3JJbnN0YW5jZSksCi8vIEluc3RhbnRpYXRlIHRoZSBpZGVudGl0eSBNb2R1bGUKZS5pZGVudGl0eU1vZHVsZT1uZXcgXy5kZWZhdWx0KGUucnVudGltZVVSTCxlLnJ1bnRpbWVDYXBhYmlsaXRpZXMsZS5zdG9yYWdlcy5pZGVudGl0eSxlLl9kYXRhT2JqZWN0c1N0b3JhZ2UsQS5kZWZhdWx0LGUucnVudGltZUNhdGFsb2d1ZSk7Ci8vIFVzZSB0aGUgc2FuZGJveCBmYWN0b3J5IHRvIGNyZWF0ZSBhbiBBcHBTYW5kYm94OwovLyBJbiB0aGUgZnV0dXJlIGNhbiBiZSBkZWNpZGVkIGJ5IHBvbGljeUVuZ2luZSBpZiB3ZSBuZWVkCi8vIGNyZWF0ZSBhIEFwcFNhbmRib3ggb3Igbm90Owp2YXIgbj1lLnJ1bnRpbWVGYWN0b3J5LmNyZWF0ZUFwcFNhbmRib3goKTsKLy8gSW5zdGFudGlhdGUgdGhlIFJlZ2lzdHJ5IE1vZHVsZQplLnJlZ2lzdHJ5PW5ldyBnLmRlZmF1bHQoZS5ydW50aW1lVVJMLG4sZS5pZGVudGl0eU1vZHVsZSxlLnJ1bnRpbWVDYXRhbG9ndWUsZS5ydW50aW1lQ2FwYWJpbGl0aWVzLGUuc3RvcmFnZXMucmVnaXN0cnksZS5wMnBIYW5kbGVyVVJMKSwKLy8gU2V0IHRoZSBsb2FkZXIgdG8gbG9hZCBIeXBlcnRpZXMsIFN0dWJzIGFuZCBJZHBQcm94aWVzCmUucmVnaXN0cnkubG9hZGVyPWUubG9hZGVyLAovLyBJbnN0YW50aWF0ZSB0aGUgTWVzc2FnZSBCdXMKZS5tZXNzYWdlQnVzPW5ldyBPLmRlZmF1bHQoZS5yZWdpc3RyeSksCi8vIFByZXBhcmUgdGhlIGFkZHJlc3MgYWxsb2NhdGlvbiBpbnN0YW5jZTsKZS5hZGRyZXNzQWxsb2NhdGlvbj1uZXcgTC5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5yZWdpc3RyeSksCi8vIEluc3RhbnRpYXRlIHRoZSBQb2xpY3kgRW5naW5lCmUucG9saWN5RW5naW5lPW5ldyBTLmRlZmF1bHQobmV3IFguZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5pZGVudGl0eU1vZHVsZSxlLnJlZ2lzdHJ5LGUuc3RvcmFnZXMucG9saWN5LGUucnVudGltZUNhcGFiaWxpdGllcykpLAovLyBJbnN0YW50aWF0ZSBEaXNjb3ZlcnkKZS5jb3JlRGlzY292ZXJ5PW5ldyBHLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLmdyYXBoQ29ubmVjdG9yLGUucnVudGltZUZhY3RvcnksZS5yZWdpc3RyeSksCi8vIEluc3RhbnRpYXRlIHRoZSBJZGVudGl0eU1hbmFnZXIKZS5pZGVudGl0eU1hbmFnZXI9bmV3IFIuZGVmYXVsdChlLmlkZW50aXR5TW9kdWxlKSwKLy8gaW5pdGlhbGlzZSB0aGUgQ3J5cHRvTWFuYWdlcgpBLmRlZmF1bHQuaW5pdChlLnJ1bnRpbWVVUkwsZS5ydW50aW1lQ2FwYWJpbGl0aWVzLGUuc3RvcmFnZXMuY3J5cHRvTWFuYWdlcixlLl9kYXRhT2JqZWN0c1N0b3JhZ2UsZS5yZWdpc3RyeSxlLmNvcmVEaXNjb3ZlcnksZS5pZGVudGl0eU1vZHVsZSxlLnJ1bnRpbWVGYWN0b3J5KSwKLy8gSW5zdGFudGlhdGUgdGhlIEdyYXBoIENvbm5lY3RvcgplLmdyYXBoQ29ubmVjdG9yPW5ldyBOLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLnN0b3JhZ2VNYW5hZ2VyKSxlLmhhbmRsZXJzPW5ldyBxLmRlZmF1bHQoZS5wb2xpY3lFbmdpbmUsZS5pZGVudGl0eU1hbmFnZXIsQS5kZWZhdWx0KSxlLm1lc3NhZ2VCdXMucGlwZWxpbmVPdXQuaGFuZGxlcnM9W2UuaGFuZGxlcnMuaWRtSGFuZGxlcixlLmhhbmRsZXJzLnBlcE91dEhhbmRsZXIsZS5oYW5kbGVycy5lbmNyeXB0SGFuZGxlcl0sZS5tZXNzYWdlQnVzLnBpcGVsaW5lSW4uaGFuZGxlcnM9W2UuaGFuZGxlcnMuZGVjcnlwdEhhbmRsZXIsZS5oYW5kbGVycy5wZXBJbkhhbmRsZXJdLAovLyBBZGQgdG8gQXBwIFNhbmRib3ggdGhlIGxpc3RlbmVyOwpuLmFkZExpc3RlbmVyKCIqIixmdW5jdGlvbih0KXtlLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodCl9KSxBLmRlZmF1bHQubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIFJlZ2lzdGVyIG1lc3NhZ2VCdXMgb24gUmVnaXN0cnkKZS5yZWdpc3RyeS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gUG9saWN5IEVuZ2luZQplLnBvbGljeUVuZ2luZS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gUmVnaXN0ZXIgbWVzc2FnZUJ1cyBvbiBJRE0KZS5pZGVudGl0eU1vZHVsZS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gUmVnaXN0ZXIgcmVnaXN0cnkgb24gSWRlbnRpdHlNb2R1bGUKZS5pZGVudGl0eU1vZHVsZS5yZWdpc3RyeT1lLnJlZ2lzdHJ5LAovLyBSZWdpc3RlciBjb3JlRGlzY292ZXJ5IG9uIElkZW50aXR5TW9kdWxlCmUuaWRlbnRpdHlNb2R1bGUuY29yZURpc2NvdmVyeT1lLmNvcmVEaXNjb3ZlcnksCi8vIFVzZSBzYW5kYm94IGZhY3RvcnkgdG8gdXNlIHNwZWNpZmljIG1ldGhvZHMKLy8gYW5kIHNldCB0aGUgbWVzc2FnZSBidXMgdG8gdGhlIGZhY3RvcnkKZS5ydW50aW1lRmFjdG9yeS5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cywKLy8gSW5zdGFuY2lhdGUgdGhlIFN5bmNoZXJNYW5hZ2VyOwplLnN5bmNoZXJNYW5hZ2VyPW5ldyBKLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLnJlZ2lzdHJ5LGUucnVudGltZUNhdGFsb2d1ZSxlLnN0b3JhZ2VzLnN5bmNoZXJNYW5hZ2VyLG51bGwsZS5fZGF0YU9iamVjdHNTdG9yYWdlLGUuaWRlbnRpdHlNb2R1bGUpLAovLyBTZXQgaW50byBsb2FkZXIgdGhlIG5lZWRlZCBjb21wb25lbnRzOwplLmxvYWRlci5ydW50aW1lVVJMPWUucnVudGltZVVSTCxlLmxvYWRlci5tZXNzYWdlQnVzPWUubWVzc2FnZUJ1cyxlLmxvYWRlci5yZWdpc3RyeT1lLnJlZ2lzdHJ5LGUubG9hZGVyLnJ1bnRpbWVDYXRhbG9ndWU9ZS5ydW50aW1lQ2F0YWxvZ3VlLGUubG9hZGVyLnJ1bnRpbWVGYWN0b3J5PWUucnVudGltZUZhY3RvcnksCi8vSW5zdGFudGlhdGUgRGlzY292ZXJ5IExpYiBmb3Igbm90aWZpY2F0aW9uIHRlc3RpbmcKLy8gdGhpcy5kaXNjb3ZlcnkgPSBuZXcgRGlzY292ZXJ5KCJoeXBlcnR5Oi8vbG9jYWxob3N0L3Rlc3QiLCB0aGlzLnJ1bnRpbWVVUkwsIHRoaXMubWVzc2FnZUJ1cyk7Ci8vIHRoaXMubG9hZFN0dWIoImxvY2FsaG9zdCIpOwovLyBzZXRUaW1lb3V0KCgpID0+IHsKLy8gICB0aGlzLmRpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc0RPKCJ1c2VyOi8vZ29vZ2xlLmNvbS9vcGVuaWR0ZXN0MjBAZ21haWwuY29tIikKLy8gICAudGhlbihoeXBlcnRpZXMgPT4gewovLyAgICAgaHlwZXJ0aWVzLmZvckVhY2goaHlwZXJ0eSA9PnsKLy8gICAgICAgaHlwZXJ0eS5vbkxpdmUoKCkgPT4gbG9nLmxvZyhgTm90aWZpY2F0aW9uIGZyb20gJHtoeXBlcnR5LmRhdGEuaHlwZXJ0eUlEfSBjaGFuZ2VkIHRvIGxpdmVgKSk7Ci8vICAgICAgIGh5cGVydHkub25EaXNjb25uZWN0ZWQoKCkgPT4gbG9nLmxvZyhgTm90aWZpY2F0aW9uIGZyb20gJHtoeXBlcnR5LmRhdGEuaHlwZXJ0eUlEfSBjaGFuZ2VkIHRvIGRpc2Nvbm5lY3RlZGApKTsKLy8gICAgIH0pOwovLyAgIH0pOwovLyB9LCAyMDAwKTsKLy8gSW5zdGFuY2lhdGUgdGhlIFN1YnNjcmlwdGlvbk1hbmFnZXI7CmUuc3Vic2NyaXB0aW9uTWFuYWdlcj1uZXcgUS5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5zdG9yYWdlcy5zdWJzY3JpcHRpb25zKTsKLy8gdGhpcy5zdWJzY3JpcHRpb25NYW5hZ2VyLmluaXQoKS50aGVuKCgpPT57Ci8vICAgcmVzb2x2ZSh0cnVlKTsKLy8gfSk7CnZhciBvPVtdO28ucHVzaChlLnN1YnNjcmlwdGlvbk1hbmFnZXIuaW5pdCgpKSxvLnB1c2goZS5pZGVudGl0eU1vZHVsZS5pbml0KCkpLG8ucHVzaChBLmRlZmF1bHQubG9hZFNlc3Npb25LZXlzKCkpLHMuZGVmYXVsdC5hbGwobykudGhlbihmdW5jdGlvbihlKXszPT09ZS5sZW5ndGg/dCghMCk6cigiW1J1bnRpbWVVQS5fbG9hZENvbXBvbmVudHNdIEVycm9yIF0gIixlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSl9Y2F0Y2goZSl7cihlKX19KX19LHtrZXk6ImxvYWRIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLHI9YXJndW1lbnRzWzJdO2lmKCFlKXRocm93IG5ldyBFcnJvcigiSHlwZXJ0eSBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkIik7cmV0dXJuIHRoaXMubG9hZGVyLmxvYWRIeXBlcnR5KGUsdCxyKX19LHtrZXk6ImxvYWRTdHViIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIlByb3RvU3R1YiBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkIik7cmV0dXJuIHRoaXMubG9hZGVyLmxvYWRTdHViKGUpfX0se2tleToibG9hZElkcFByb3h5Iix2YWx1ZTpmdW5jdGlvbihlKXtpZihlZS5sb2coImlwZFByb3h5Q2F0YWxvZ3VlVVJMIixlKSwhZSl0aHJvdyBuZXcgRXJyb3IoIlRoZSBJRFAgUHJveHkgVVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlciwgY291bGQgYmUgYSBET01BSU4gb3IgYSBVUkwiKTtyZXR1cm4gdGhpcy5sb2FkZXIubG9hZElkcFByb3h5KGUpfX0se2tleToiY2xvc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuITA9PT1lJiZ0aGlzLmlkZW50aXR5TWFuYWdlci5yZXNldCgpLGVlLmluZm8oIlVucmVnaXN0ZXIgYWxsIGh5cGVydGllcyIpLG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24oZSxyKXt0LnJlZ2lzdHJ5LnVucmVnaXN0ZXJBbGxIeXBlcnRpZXMoKS50aGVuKGZ1bmN0aW9uKHQpe2VlLmluZm8oIkFsbCB0aGUgaHlwZXJ0aWVzIGFyZSB1bnJlZ2lzdGVkIHdpdGggU3VjY2VzczoiLHQpLGUoITApfSkuY2F0Y2goZnVuY3Rpb24oZSl7ZWUuZXJyb3IoIkZhaWxlZCB0byB1bnJlZ2lzdGVyIHRoZSBoeXBlcnRpZXMiLGUpLHIoITEpfSl9KX19LHtrZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1bXTtyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pewovL1RPRE86IGRlbGVnYXRlIGRiIHJlc2V0IG9wZXJhdGlvbiB0byBlYWNoIGNvbXBvbmVudAovLyAgICB0aGlzLmlkZW50aXR5TWFuYWdlci5yZXNldCgpOwplLnN0b3JhZ2VzLmlkZW50aXR5LmdldCghMSwhMSwiaWRlbnRpdGllcyIpLnRoZW4oZnVuY3Rpb24obil7KDAsby5kZWZhdWx0KShuKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3QucHVzaChlLnN0b3JhZ2VzLmlkZW50aXR5LmRlbGV0ZShyLCExLCJpZGVudGl0aWVzIikpfSksdC5wdXNoKGUuc3RvcmFnZXMuY2FwYWJpbGl0aWVzLmRlbGV0ZSgiY2FwYWJpbGl0aWVzIikpLHQucHVzaChlLnN0b3JhZ2VzLmNyeXB0b01hbmFnZXIuZGVsZXRlKCJ1c2VyQXN5bW1ldHJpY0tleSIpKSx0LnB1c2goZS5zdG9yYWdlcy5oeXBlcnR5UmVzb3VyY2VzLmRlbGV0ZSgiaHlwZXJ0eVJlc291cmNlcyIpKSx0LnB1c2goZS5zdG9yYWdlcy5pZGVudGl0eS5kZWxldGUoImFjY2Vzc1Rva2VucyIpKSx0LnB1c2goZS5zdG9yYWdlcy5yZWdpc3RyeS5kZWxldGUoInJlZ2lzdHJ5OkRhdGFPYmplY3RVUkxzIikpLHQucHVzaChlLnN0b3JhZ2VzLnJlZ2lzdHJ5LmRlbGV0ZSgicmVnaXN0cnk6SHlwZXJ0eVVSTHMiKSksdC5wdXNoKGUuc3RvcmFnZXMucnVudGltZS5kZWxldGUoInAycEhhbmRsZXI6VVJMIikpLHQucHVzaChlLnN0b3JhZ2VzLnJ1bnRpbWUuZGVsZXRlKCJydW50aW1lOlVSTCIpKSwKLy8gICAgcmVzZXRpbmcucHVzaCh0aGlzLnN0b3JhZ2VzLnJ1bnRpbWVDYXRhbG9ndWUuZGVsZXRlKCdydW50aW1lQ2F0YWxvZ3VlJykpOwp0LnB1c2goZS5zdG9yYWdlcy5zdWJzY3JpcHRpb25zLmRlbGV0ZSgic3Vic2NyaXB0aW9ucyIpKSx0LnB1c2goZS5zdG9yYWdlcy5zeW5jaGVyTWFuYWdlci5kZWxldGUoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiKSkscy5kZWZhdWx0LmFsbCh0KS50aGVuKGZ1bmN0aW9uKGUpe2VlLmluZm8oIkFsbCBEQnMgd2VyZSByZXNldCB3aXRoIFN1Y2Nlc3M6IixlKSxyKCEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2VlLmVycm9yKCJGYWlsZWQgdG8gcmVzZXQgYWxsIERCcyIsZSkscighMSl9KX0pfSl9fV0pLFJ1bnRpbWVVQX0oKTt0LmRlZmF1bHQ9dGUsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQxNyksZS5leHBvcnRzPXIoMTMpLk9iamVjdC5rZXlzfSwvKiA0MTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTykKdmFyIG49cig3Myksbz1yKDY0KTtyKDEzNCkoImtleXMiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSkpfX0pfSwvKiA0MTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mCi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzCnZhciBuPXIoNDUpLG89cigxMjkpLGk9cig0MTkpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLHMpe3ZhciBhLHU9bih0KSxjPW8odS5sZW5ndGgpLGY9aShzLGMpOwovLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYoZSYmciE9cil7Zm9yKDtjPmY7KQovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCmlmKChhPXVbZisrXSkhPWEpcmV0dXJuITB9ZWxzZSBmb3IoO2M+ZjtmKyspaWYoKGV8fGYgaW4gdSkmJnVbZl09PT1yKXJldHVybiBlfHxmfHwwO3JldHVybiFlJiYtMX19fSwvKiA0MTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTMwKSxvPU1hdGgubWF4LGk9TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bihlKSxlPDA/byhlK3QsMCk6aShlLHQpfX0sLyogNDIwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDE4NSkscigxMzcpLHIoMTkwKSxyKDQyNykscig0MzUpLHIoNDM2KSxlLmV4cG9ydHM9cigxMykuUHJvbWlzZX0sLyogNDIxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzMCksbz1yKDEyOCk7Ci8vIHRydWUgIC0+IFN0cmluZyNhdAovLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXQKZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIpe3ZhciBpLHMsYT1TdHJpbmcobyh0KSksdT1uKHIpLGM9YS5sZW5ndGg7cmV0dXJuIHU8MHx8dT49Yz9lPyIiOnZvaWQgMDooaT1hLmNoYXJDb2RlQXQodSksaTw1NTI5Nnx8aT41NjMxOXx8dSsxPT09Y3x8KHM9YS5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxzPjU3MzQzP2U/YS5jaGFyQXQodSk6aTplP2Euc2xpY2UodSx1KzIpOnMtNTYzMjArKGktNTUyOTY8PDEwKSs2NTUzNil9fX0sLyogNDIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxMzgpLG89cig3NiksaT1yKDk2KSxzPXt9OwovLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKQpyKDU4KShzLHIoMjIpKCJpdGVyYXRvciIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UucHJvdG90eXBlPW4ocyx7bmV4dDpvKDEscil9KSxpKGUsdCsiIEl0ZXJhdG9yIil9fSwvKiA0MjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzkpLG89cig0MCksaT1yKDY0KTtlLmV4cG9ydHM9cig0Nik/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0KXtvKGUpO2Zvcih2YXIgcixzPWkodCksYT1zLmxlbmd0aCx1PTA7YT51OyluLmYoZSxyPXNbdSsrXSx0W3JdKTtyZXR1cm4gZX19LC8qIDQyNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNDI1KSxvPXIoNDI2KSxpPXIoNzcpLHM9cig0NSk7Ci8vIDIyLjEuMy40IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzKCkKLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5rZXlzKCkKLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKQovLyAyMi4xLjMuMzAgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKZS5leHBvcnRzPXIoMTg2KShBcnJheSwiQXJyYXkiLGZ1bmN0aW9uKGUsdCl7dGhpcy5fdD1zKGUpLC8vIHRhcmdldAp0aGlzLl9pPTAsLy8gbmV4dCBpbmRleAp0aGlzLl9rPXR9LGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fdCx0PXRoaXMuX2sscj10aGlzLl9pKys7cmV0dXJuIWV8fHI+PWUubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKToia2V5cyI9PXQ/bygwLHIpOiJ2YWx1ZXMiPT10P28oMCxlW3JdKTpvKDAsW3IsZVtyXV0pfSwidmFsdWVzIiksCi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNykKaS5Bcmd1bWVudHM9aS5BcnJheSxuKCJrZXlzIiksbigidmFsdWVzIiksbigiZW50cmllcyIpfSwvKiA0MjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSwvKiA0MjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSwvKiA0MjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvLGkscyxhPXIoNzUpLHU9cigxNyksYz1yKDY1KSxmPXIoMTkxKSxsPXIoMjEpLGQ9cig0MSkscD1yKDk1KSx5PXIoNDI4KSxoPXIoNDI5KSx2PXIoMTk1KSxnPXIoMTk2KS5zZXQsYj1yKDQzMSkoKSxfPXIoMTM5KSxtPXIoMTk3KSxSPXIoNDMyKSx3PXIoMTk4KSxTPXUuVHlwZUVycm9yLGs9dS5wcm9jZXNzLE89ayYmay52ZXJzaW9ucyxQPU8mJk8udjh8fCIiLE09dS5Qcm9taXNlLEw9InByb2Nlc3MiPT1mKGspLHg9ZnVuY3Rpb24oKXt9LEE9bz1fLmYsRD0hIWZ1bmN0aW9uKCl7dHJ5ewovLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQKdmFyIGU9TS5yZXNvbHZlKDEpLHQ9KGUuY29uc3RydWN0b3I9e30pW3IoMjIpKCJzcGVjaWVzIildPWZ1bmN0aW9uKGUpe2UoeCx4KX07Ci8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3QKcmV0dXJuKEx8fCJmdW5jdGlvbiI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZlLnRoZW4oeClpbnN0YW5jZW9mIHQmJjAhPT1QLmluZGV4T2YoIjYuNiIpJiYtMT09PVIuaW5kZXhPZigiQ2hyb21lLzY2Iil9Y2F0Y2goZSl7fX0oKSxVPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiEoIWQoZSl8fCJmdW5jdGlvbiIhPXR5cGVvZih0PWUudGhlbikpJiZ0fSxqPWZ1bmN0aW9uKGUsdCl7aWYoIWUuX24pe2UuX249ITA7dmFyIHI9ZS5fYztiKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUuX3Ysbz0xPT1lLl9zLGk9MDtyLmxlbmd0aD5pOykhZnVuY3Rpb24odCl7dmFyIHIsaSxzLGE9bz90Lm9rOnQuZmFpbCx1PXQucmVzb2x2ZSxjPXQucmVqZWN0LGY9dC5kb21haW47dHJ5e2E/KG98fCgyPT1lLl9oJiZDKGUpLGUuX2g9MSksITA9PT1hP3I9bjooZiYmZi5lbnRlcigpLHI9YShuKSwvLyBtYXkgdGhyb3cKZiYmKGYuZXhpdCgpLHM9ITApKSxyPT09dC5wcm9taXNlP2MoUygiUHJvbWlzZS1jaGFpbiBjeWNsZSIpKTooaT1VKHIpKT9pLmNhbGwocix1LGMpOnUocikpOmMobil9Y2F0Y2goZSl7ZiYmIXMmJmYuZXhpdCgpLGMoZSl9fShyW2krK10pOy8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoCmUuX2M9W10sZS5fbj0hMSx0JiYhZS5faCYmRShlKX0pfX0sRT1mdW5jdGlvbihlKXtnLmNhbGwodSxmdW5jdGlvbigpe3ZhciB0LHIsbixvPWUuX3YsaT1JKGUpO2lmKGkmJih0PW0oZnVuY3Rpb24oKXtMP2suZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixvLGUpOihyPXUub251bmhhbmRsZWRyZWplY3Rpb24pP3Ioe3Byb21pc2U6ZSxyZWFzb246b30pOihuPXUuY29uc29sZSkmJm4uZXJyb3ImJm4uZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsbyl9KSwKLy8gQnJvd3NlcnMgc2hvdWxkIG5vdCB0cmlnZ2VyIGByZWplY3Rpb25IYW5kbGVkYCBldmVudCBpZiBpdCB3YXMgaGFuZGxlZCBoZXJlLCBOb2RlSlMgLSBzaG91bGQKZS5faD1MfHxJKGUpPzI6MSksZS5fYT12b2lkIDAsaSYmdC5lKXRocm93IHQudn0pfSxJPWZ1bmN0aW9uKGUpe3JldHVybiAxIT09ZS5faCYmMD09PShlLl9hfHxlLl9jKS5sZW5ndGh9LEM9ZnVuY3Rpb24oZSl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdDtMP2suZW1pdCgicmVqZWN0aW9uSGFuZGxlZCIsZSk6KHQ9dS5vbnJlamVjdGlvbmhhbmRsZWQpJiZ0KHtwcm9taXNlOmUscmVhc29uOmUuX3Z9KX0pfSxUPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fZHx8KHQuX2Q9ITAsdD10Ll93fHx0LC8vIHVud3JhcAp0Ll92PWUsdC5fcz0yLHQuX2F8fCh0Ll9hPXQuX2Muc2xpY2UoKSksaih0LCEwKSl9LHE9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzO2lmKCFyLl9kKXtyLl9kPSEwLHI9ci5fd3x8cjsvLyB1bndyYXAKdHJ5e2lmKHI9PT1lKXRocm93IFMoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7KHQ9VShlKSk/YihmdW5jdGlvbigpe3ZhciBuPXtfdzpyLF9kOiExfTsvLyB3cmFwCnRyeXt0LmNhbGwoZSxjKHEsbiwxKSxjKFQsbiwxKSl9Y2F0Y2goZSl7VC5jYWxsKG4sZSl9fSk6KHIuX3Y9ZSxyLl9zPTEsaihyLCExKSl9Y2F0Y2goZSl7VC5jYWxsKHtfdzpyLF9kOiExfSxlKX19fTsKLy8gY29uc3RydWN0b3IgcG9seWZpbGwKRHx8KAovLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQpNPWZ1bmN0aW9uKGUpe3kodGhpcyxNLCJQcm9taXNlIiwiX2giKSxwKGUpLG4uY2FsbCh0aGlzKTt0cnl7ZShjKHEsdGhpcywxKSxjKFQsdGhpcywxKSl9Y2F0Y2goZSl7VC5jYWxsKHRoaXMsZSl9fSwKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCm49ZnVuY3Rpb24oZSl7dGhpcy5fYz1bXSwvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMKdGhpcy5fYT12b2lkIDAsLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnMKdGhpcy5fcz0wLC8vIDwtIHN0YXRlCnRoaXMuX2Q9ITEsLy8gPC0gZG9uZQp0aGlzLl92PXZvaWQgMCwvLyA8LSB2YWx1ZQp0aGlzLl9oPTAsLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWQKdGhpcy5fbj0hMX0sbi5wcm90b3R5cGU9cig0MzMpKE0ucHJvdG90eXBlLHsKLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkKdGhlbjpmdW5jdGlvbihlLHQpe3ZhciByPUEodih0aGlzLE0pKTtyZXR1cm4gci5vaz0iZnVuY3Rpb24iIT10eXBlb2YgZXx8ZSxyLmZhaWw9ImZ1bmN0aW9uIj09dHlwZW9mIHQmJnQsci5kb21haW49TD9rLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKHIpLHRoaXMuX2EmJnRoaXMuX2EucHVzaChyKSx0aGlzLl9zJiZqKHRoaXMsITEpLHIucHJvbWlzZX0sCi8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpCmNhdGNoOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLGUpfX0pLGk9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgbjt0aGlzLnByb21pc2U9ZSx0aGlzLnJlc29sdmU9YyhxLGUsMSksdGhpcy5yZWplY3Q9YyhULGUsMSl9LF8uZj1BPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09TXx8ZT09PXM/bmV3IGkoZSk6byhlKX0pLGwobC5HK2wuVytsLkYqIUQse1Byb21pc2U6TX0pLHIoOTYpKE0sIlByb21pc2UiKSxyKDQzNCkoIlByb21pc2UiKSxzPXIoMTMpLlByb21pc2UsCi8vIHN0YXRpY3MKbChsLlMrbC5GKiFELCJQcm9taXNlIix7Ci8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCnJlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1BKHRoaXMpO3JldHVybigwLHQucmVqZWN0KShlKSx0LnByb21pc2V9fSksbChsLlMrbC5GKihhfHwhRCksIlByb21pc2UiLHsKLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCnJlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHcoYSYmdGhpcz09PXM/TTp0aGlzLGUpfX0pLGwobC5TK2wuRiohKEQmJnIoMTk5KShmdW5jdGlvbihlKXtNLmFsbChlKS5jYXRjaCh4KX0pKSwiUHJvbWlzZSIsewovLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkKYWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1BKHQpLG49ci5yZXNvbHZlLG89ci5yZWplY3QsaT1tKGZ1bmN0aW9uKCl7dmFyIHI9W10saT0wLHM9MTtoKGUsITEsZnVuY3Rpb24oZSl7dmFyIGE9aSsrLHU9ITE7ci5wdXNoKHZvaWQgMCkscysrLHQucmVzb2x2ZShlKS50aGVuKGZ1bmN0aW9uKGUpe3V8fCh1PSEwLHJbYV09ZSwtLXN8fG4ocikpfSxvKX0pLC0tc3x8bihyKX0pO3JldHVybiBpLmUmJm8oaS52KSxyLnByb21pc2V9LAovLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpCnJhY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPUEodCksbj1yLnJlamVjdCxvPW0oZnVuY3Rpb24oKXtoKGUsITEsZnVuY3Rpb24oZSl7dC5yZXNvbHZlKGUpLnRoZW4oci5yZXNvbHZlLG4pfSl9KTtyZXR1cm4gby5lJiZuKG8udiksci5wcm9taXNlfX0pfSwvKiA0MjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbil7aWYoIShlIGluc3RhbmNlb2YgdCl8fHZvaWQgMCE9PW4mJm4gaW4gZSl0aHJvdyBUeXBlRXJyb3IocisiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEiKTtyZXR1cm4gZX19LC8qIDQyOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2NSksbz1yKDE5MiksaT1yKDE5Mykscz1yKDQwKSxhPXIoMTI5KSx1PXIoMTk0KSxjPXt9LGY9e30sdD1lLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbCxkKXt2YXIgcCx5LGgsdixnPWQ/ZnVuY3Rpb24oKXtyZXR1cm4gZX06dShlKSxiPW4ocixsLHQ/MjoxKSxfPTA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGcpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgaXRlcmFibGUhIik7Ci8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvcgppZihpKGcpKXtmb3IocD1hKGUubGVuZ3RoKTtwPl87XysrKWlmKCh2PXQ/YihzKHk9ZVtfXSlbMF0seVsxXSk6YihlW19dKSk9PT1jfHx2PT09ZilyZXR1cm4gdn1lbHNlIGZvcihoPWcuY2FsbChlKTshKHk9aC5uZXh0KCkpLmRvbmU7KWlmKCh2PW8oaCxiLHkudmFsdWUsdCkpPT09Y3x8dj09PWYpcmV0dXJuIHZ9O3QuQlJFQUs9Yyx0LlJFVFVSTj1mfSwvKiA0MzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81CmUuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwPT09cjtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbj9lKCk6ZS5jYWxsKHIpO2Nhc2UgMTpyZXR1cm4gbj9lKHRbMF0pOmUuY2FsbChyLHRbMF0pO2Nhc2UgMjpyZXR1cm4gbj9lKHRbMF0sdFsxXSk6ZS5jYWxsKHIsdFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0pO2Nhc2UgNDpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdLHRbM10pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdLHRbM10pfXJldHVybiBlLmFwcGx5KHIsdCl9fSwvKiA0MzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTcpLG89cigxOTYpLnNldCxpPW4uTXV0YXRpb25PYnNlcnZlcnx8bi5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHM9bi5wcm9jZXNzLGE9bi5Qcm9taXNlLHU9InByb2Nlc3MiPT1yKDc0KShzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYz1mdW5jdGlvbigpe3ZhciBuLG87Zm9yKHUmJihuPXMuZG9tYWluKSYmbi5leGl0KCk7ZTspe289ZS5mbixlPWUubmV4dDt0cnl7bygpfWNhdGNoKG4pe3Rocm93IGU/cigpOnQ9dm9pZCAwLG59fXQ9dm9pZCAwLG4mJm4uZW50ZXIoKX07Ci8vIE5vZGUuanMKaWYodSlyPWZ1bmN0aW9uKCl7cy5uZXh0VGljayhjKX07ZWxzZSBpZighaXx8bi5uYXZpZ2F0b3ImJm4ubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYoYSYmYS5yZXNvbHZlKXsKLy8gUHJvbWlzZS5yZXNvbHZlIHdpdGhvdXQgYW4gYXJndW1lbnQgdGhyb3dzIGFuIGVycm9yIGluIExHIFdlYk9TIDIKdmFyIGY9YS5yZXNvbHZlKHZvaWQgMCk7cj1mdW5jdGlvbigpe2YudGhlbihjKX19ZWxzZSByPWZ1bmN0aW9uKCl7Ci8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkKby5jYWxsKG4sYyl9O2Vsc2V7dmFyIGw9ITAsZD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGkoYykub2JzZXJ2ZShkLHtjaGFyYWN0ZXJEYXRhOiEwfSksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKcj1mdW5jdGlvbigpe2QuZGF0YT1sPSFsfX1yZXR1cm4gZnVuY3Rpb24obil7dmFyIG89e2ZuOm4sbmV4dDp2b2lkIDB9O3QmJih0Lm5leHQ9byksZXx8KGU9byxyKCkpLHQ9b319fSwvKiA0MzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTcpLG89bi5uYXZpZ2F0b3I7ZS5leHBvcnRzPW8mJm8udXNlckFnZW50fHwiIn0sLyogNDMzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU4KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbyBpbiB0KXImJmVbb10/ZVtvXT10W29dOm4oZSxvLHRbb10pO3JldHVybiBlfX0sLyogNDM0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxNyksbz1yKDEzKSxpPXIoMzkpLHM9cig0NiksYT1yKDIyKSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2Ygb1tlXT9vW2VdOm5bZV07cyYmdCYmIXRbYV0mJmkuZih0LGEse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LC8qIDQzNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLWZpbmFsbHkKdmFyIG49cigyMSksbz1yKDEzKSxpPXIoMTcpLHM9cigxOTUpLGE9cigxOTgpO24obi5QK24uUiwiUHJvbWlzZSIse2ZpbmFsbHk6ZnVuY3Rpb24oZSl7dmFyIHQ9cyh0aGlzLG8uUHJvbWlzZXx8aS5Qcm9taXNlKSxyPSJmdW5jdGlvbiI9PXR5cGVvZiBlO3JldHVybiB0aGlzLnRoZW4ocj9mdW5jdGlvbihyKXtyZXR1cm4gYSh0LGUoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiByfSl9OmUscj9mdW5jdGlvbihyKXtyZXR1cm4gYSh0LGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IHJ9KX06ZSl9fSl9LC8qIDQzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLXRyeQp2YXIgbj1yKDIxKSxvPXIoMTM5KSxpPXIoMTk3KTtuKG4uUywiUHJvbWlzZSIse3RyeTpmdW5jdGlvbihlKXt2YXIgdD1vLmYodGhpcykscj1pKGUpO3JldHVybihyLmU/dC5yZWplY3Q6dC5yZXNvbHZlKShyLnYpLHQucHJvbWlzZX19KX0sLyogNDM3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQzOCksZS5leHBvcnRzPXIoMTMpLk9iamVjdC5hc3NpZ259LC8qIDQzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpCnZhciBuPXIoMjEpO24obi5TK24uRiwiT2JqZWN0Iix7YXNzaWduOnIoNDM5KX0pfSwvKiA0MzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKQp2YXIgbj1yKDY0KSxvPXIoMTQwKSxpPXIoNzgpLHM9cig3MyksYT1yKDE4MyksdT1PYmplY3QuYXNzaWduOwovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKZS5leHBvcnRzPSF1fHxyKDY2KShmdW5jdGlvbigpe3ZhciBlPXt9LHQ9e30scj1TeW1ib2woKSxuPSJhYmNkZWZnaGlqa2xtbm9wcXJzdCI7cmV0dXJuIGVbcl09NyxuLnNwbGl0KCIiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RbZV09ZX0pLDchPXUoe30sZSlbcl18fE9iamVjdC5rZXlzKHUoe30sdCkpLmpvaW4oIiIpIT1ufSk/ZnVuY3Rpb24oZSx0KXtmb3IoLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwp2YXIgcj1zKGUpLHU9YXJndW1lbnRzLmxlbmd0aCxjPTEsZj1vLmYsbD1pLmY7dT5jOylmb3IodmFyIGQscD1hKGFyZ3VtZW50c1tjKytdKSx5PWY/bihwKS5jb25jYXQoZihwKSk6bihwKSxoPXkubGVuZ3RoLHY9MDtoPnY7KWwuY2FsbChwLGQ9eVt2KytdKSYmKHJbZF09cFtkXSk7cmV0dXJuIHJ9OnV9LC8qIDQ0MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDQxKSxfX2VzTW9kdWxlOiEwfX0sLyogNDQxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ0Mik7dmFyIG49cigxMykuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZGVmaW5lUHJvcGVydHkoZSx0LHIpfX0sLyogNDQyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIxKTsKLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKbihuLlMrbi5GKiFyKDQ2KSwiT2JqZWN0Iix7ZGVmaW5lUHJvcGVydHk6cigzOSkuZn0pfSwvKiA0NDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig5OCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig4KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig3KSx5PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0ocCksaD1yKDk5KSx2PXIoNDU1KSxnPXIoMTAwKSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksXz1yKDIwMyksbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLFI9cig0NjkpLHc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChSKSxTPXIoNDcwKSxrPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoUyksTz1yKDE0KTtyKDQ3MSk7dmFyIFA9cigyMDQpLE09eS5nZXRMb2dnZXIoIlJlZ2lzdHJ5IiksTD17Q1JFQVRFRDoiY3JlYXRlZCIsTElWRToibGl2ZSIsREVQTE9ZSU5HOiJkZXBsb3lpbmciLERFUExPWUVEOiJkZXBsb3llZCIsUFJPR1JFU1M6ImluLXByb2dyZXNzIixESVNDT05ORUNURUQ6ImRpc2Nvbm5lY3RlZCIsRkFJTEVEOiJkZXBsb3ltZW50LWZhaWxlZCIsREVBRDoiZGVhZCJ9LHg9ZnVuY3Rpb24oKXsvKioKICAqIFRvIGluaXRpYWxpc2UgdGhlIFJ1bnRpbWUgUmVnaXN0cnkgd2l0aCB0aGUgUnVudGltZVVSTCB0aGF0IHdpbGwgYmUgdGhlIGJhc2lzIHRvIGRlcml2ZSB0aGUgaW50ZXJuYWwgcnVudGltZSBhZGRyZXNzZXMgd2hlbiBhbGxvY2F0aW5nIGFkZHJlc3NlcyB0byBpbnRlcm5hbCBydW50aW1lIGNvbXBvbmVudC4gSW4gYWRkaXRpb24sIHRoZSBSZWdpc3RyeSBkb21haW4gYmFjay1lbmQgdG8gYmUgdXNlZCB0byByZW1vdGVseSByZWdpc3RlciBSdW50aW1lIGNvbXBvbmVudHMsIGlzIGFsc28gcGFzc2VkIGFzIGlucHV0IHBhcmFtZXRlci4KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICAgIG1zZ2J1cyAgICAgICAgICAgICAgICBtc2didXMKICAqIEBwYXJhbSAge0h5cGVydHlSdW50aW1lVVJMfSAgIHJ1bnRpbWVVUkwgICAgICAgICAgICBydW50aW1lVVJMCiAgKiBAcGFyYW0gIHtBcHBTYW5kYm94fSAgICAgICAgICBhcHBTYW5kYm94ICAgICAgICAgICAgYXBwU2FuZGJveAogICogQHBhcmFtICB7cnVudGltZUNhdGFsb2d1ZX0gICAgcnVudGltZUNhdGFsb2d1ZSAgICAgIHJ1bnRpbWVDYXRhbG9ndWUKICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgICAgICAgIHJlbW90ZVJlZ2lzdHJ5ICAgICAgICByZW1vdGVSZWdpc3RyeQogICogQHBhcmFtICB7c3RvcmFnZU1hbmFnZXJ9ICAgICAgc3RvcmFnZU1hbmFnZXIKICAqLwpmdW5jdGlvbiBSZWdpc3RyeShlLHQscixuLG8saSxzLGEpewovLyBob3cgc29tZSBmdW5jdGlvbnMgcmVjZWl2ZSB0aGUgcGFyYW1ldGVycyBmb3IgZXhhbXBsZToKLy8gbmV3IFJlZ2lzdHJ5KCdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJywgYXBwU2FuZGJveCwgaWRNb2R1bGUsIHJlbW90ZVJlZ2lzdHJ5KTsKLy8gcmVnaXN0cnkucmVnaXN0ZXJTdHViKHNhbmRib3gsICdzcDEnKTsKLy8gcmVnaXN0cnkucmVnaXN0ZXJIeXBlcnR5KHNhbmRCb3gsICdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJyk7Ci8vIHJlZ2lzdHJ5LnJlc29sdmUoJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKaWYoKDAsZi5kZWZhdWx0KSh0aGlzLFJlZ2lzdHJ5KSwhZSl0aHJvdyBuZXcgRXJyb3IoInJ1bnRpbWVVUkwgaXMgbWlzc2luZy4iKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoInN0b3JhZ2VNYW5hZ2VyIGlzIG1pc3NpbmcuIik7LyppZiAoIXJlbW90ZVJlZ2lzdHJ5KSB0aHJvdyBuZXcgRXJyb3IoJ3JlbW90ZVJlZ2lzdHJ5IGlzIG1pc3NpbmcnKTsqLwp2YXIgdT10aGlzO3UucmVnaXN0cnlVUkw9ZSsiL3JlZ2lzdHJ5LyIsdS5hcHBTYW5kYm94PXQsdS5ydW50aW1lVVJMPWUsdS5wMnBIYW5kbGVyVVJMPXMsdS5ydW50aW1lQ2F0YWxvZ3VlPW4sdS5yZW1vdGVSZWdpc3RyeT1hLHUuaWRNb2R1bGU9cix1LnN0b3JhZ2VNYW5hZ2VyPWksdS5ydW50aW1lQ2FwYWJpbGl0aWVzPW8sdS5pZGVudGlmaWVyPSgwLE8uZ2VuZXJhdGVHVUlEKSgpLHUuaHlwZXJ0aWVzTGlzdFRvUmVtb3ZlPXt9LHUuaHlwZXJ0aWVzTGlzdD1bXSx1LnJlbW90ZUh5cGVydHlMaXN0PVtdLHUucmVtb3RlRGF0YU9iamVjdExpc3Q9W10sdS5pZHBMZWdhY3lQcm94eUxpc3Q9e30sdS53YXRjaGluZ1lvdT1uZXcgUC5XYXRjaGluZ1lvdSx1LnAycEhhbmRsZXJTdHViPXt9LHUucDJwUmVxdWVzdGVyU3R1Yj11LndhdGNoaW5nWW91LndhdGNoKCJwMnBSZXF1ZXN0ZXJTdHViIix7fSwhMCksdS5wMnBDb25uZWN0aW9uTGlzdD11LndhdGNoaW5nWW91LndhdGNoKCJwMnBDb25uZWN0aW9uTGlzdCIse30sITApLHUucDJwSGFuZGxlckFzc29jaWF0aW9uPXt9LHUucHJvdG9zdHVic0xpc3Q9dS53YXRjaGluZ1lvdS53YXRjaCgicHJvdG9zdHVic0xpc3QiLHt9LCEwKSx1LmlkcFByb3h5TGlzdD11LndhdGNoaW5nWW91LndhdGNoKCJpZHBQcm94eUxpc3QiLHt9LCEwKSx1LmRhdGFPYmplY3RMaXN0PXt9LHUuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0PXt9LHUuc2FuZGJveGVzTGlzdD17c2FuZGJveDp7fSxhcHBTYW5kYm94Ont9fSx1LnBlcExpc3Q9e30sdS5yZWdpc3RyaWVzPXt9LHUuX2RvbWFpbj0oMCxPLmRpdmlkZVVSTCkodS5yZWdpc3RyeVVSTCkuZG9tYWluLHUuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W2VdPXQ7dmFyIGM9bmV3IGsuZGVmYXVsdCh1KTt1Ll9wMnBDb25uZWN0aW9uUmVzb2x2ZT1jfXJldHVybigwLGQuZGVmYXVsdCkoUmVnaXN0cnksW3trZXk6Il9nZXRJZGVudGl0eUFzc29jaWF0ZWQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztmb3IodmFyIG4gaW4gci5oeXBlcnRpZXNMaXN0KXt2YXIgbz1yLmh5cGVydGllc0xpc3Rbbl07aWYoby5faHlwZXJ0eVVSTD09PXQpc3dpdGNoKGUpe2Nhc2UidXNlcm5hbWUiOnJldHVybiBvLl91c2VyLnVzZXJuYW1lO2Nhc2UiY24iOnJldHVybiBvLl91c2VyLmNuO2Nhc2UibG9jYWxlIjpyZXR1cm4gby5fdXNlci5sb2NhbGU7Y2FzZSJhdmF0YXIiOnJldHVybiBvLl91c2VyLmF2YXRhcjtjYXNlInVzZXJVUkwiOnJldHVybiBvLl91c2VyLnVzZXJVUkw7Y2FzZSIuIjpyZXR1cm4gby5fdXNlcjtkZWZhdWx0OnJldHVybiIifX1yZXR1cm4iIn19LHtrZXk6ImdldEFwcFNhbmRib3giLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwU2FuZGJveH19LHtrZXk6ImdldEh5cGVydHlPd25lciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztmb3IodmFyIHIgaW4gdC5oeXBlcnRpZXNMaXN0KXt2YXIgbj10Lmh5cGVydGllc0xpc3Rbcl07aWYobi5oeXBlcnR5VVJMPT09ZSlyZXR1cm4gbi51c2VyLnVzZXJVUkx9fX0se2tleToiZ2V0RGF0YU9iamVjdFJlcG9ydGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsTy5yZW1vdmVQYXRoRnJvbVVSTCkoZSk7Zm9yKHZhciBuIGluIHQuZGF0YU9iamVjdExpc3Qpe3ZhciBvPXQuZGF0YU9iamVjdExpc3Rbbl07aWYoby51cmw9PT1yKXJldHVybiBvLnJlcG9ydGVyfXJldHVybiBudWxsfX0se2tleToiZ2V0SHlwZXJ0eU5hbWUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0iaHlwZXJ0eSI9PT0oMCxPLmRpdmlkZVVSTCkoZSkudHlwZSxuPXZvaWQgMCxvPXI/ZTp0LmdldFJlcG9ydGVyVVJMU3luY2hvbm91cyhlKTtmb3IodmFyIGkgaW4gdC5oeXBlcnRpZXNMaXN0KXt2YXIgcz10Lmh5cGVydGllc0xpc3RbaV07aWYocy5oeXBlcnR5VVJMPT09byl7bj1zLm9iamVjdE5hbWU7YnJlYWt9fXJldHVybiBufX0se2tleToiZ2V0UmVwb3J0ZXJVUkwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz10LmRhdGFPYmplY3RMaXN0W2VdO28/cihvLnJlcG9ydGVyKTpuKCJObyByZXBvcnRlciB3YXMgZm91bmQiKX0pfX0se2tleToiZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5kYXRhT2JqZWN0TGlzdFtlXTtyZXR1cm4gcj9yLnJlcG9ydGVyOnZvaWQgMH19LHtrZXk6ImdldERhdGFPYmplY3RTdWJzY3JpYmVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0W2VdfX0se2tleToicmVnaXN0ZXJTdWJzY3JpYmVkRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3ZvaWQgMD09PXIuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0W2VdJiYoci5zdWJzY3JpYmVkRGF0YU9iamVjdExpc3RbZV09dCl9fSx7a2V5OiJnZXRQcmVBdXRoU3Vic2NyaWJlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LmRhdGFPYmplY3RMaXN0W2VdLG49W107cmV0dXJuIHImJihuPXIuYXV0aG9yaXNlKSxufX0se2tleToidW5yZWdpc3RlckFsbEh5cGVydGllcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9W107cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXtmb3IodmFyIG8gaW4gZS5oeXBlcnRpZXNMaXN0KXt2YXIgaT1lLmh5cGVydGllc0xpc3Rbb10scz1lLnVucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2UoaS5oeXBlcnR5VVJMKTt0LnB1c2gocyl9dS5kZWZhdWx0LmFsbCh0KS50aGVuKGZ1bmN0aW9uKCl7cigic3VjY2Vzc2Z1bGx5IHVucmVnaXN0ZXJlZCBhbGwgaHlwZXJ0aWVzIil9LGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleToidW5yZWdpc3Rlckh5cGVydHlJbnN0YW5jZSIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vVE9ETyB3b3JraW5nIGJ1dCB0aGUgdXNlcgp2YXIgdD10aGlzLHI9e3R5cGU6ImV4ZWN1dGUiLGZyb206dC5yZWdpc3RyeVVSTCx0bzplLGJvZHk6e21ldGhvZDoiY2xvc2UifX07Ci8vIFNlbmQgbWVzc2FnZSB0byBoeXBlcnR5IHRvIGNsb3NlCnQuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbihyKXtNLmxvZygiW1JlZ2lzdHJ5LnVucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2VdIENsb3NlIFJlcGx5IixyKSx0Ll9kb21haW5SZWdpc3RyYXRpb24udW5yZWdpc3Rlckh5cGVydHkoZSl9KX19LHtrZXk6InVucmVnaXN0ZXJEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9kb21haW5SZWdpc3RyYXRpb24udW5yZWdpc3RlckRhdGFPYmplY3QoZSl9fSx7a2V5OiJyZWdpc3RlclN1YnNjcmliZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXIuZGF0YU9iamVjdExpc3RbZV07biYmKG4uc3Vic2NyaWJlcnN8fChuLnN1YnNjcmliZXJzPVtdKSxuLnN1YnNjcmliZXJzLnB1c2godCksci5kYXRhT2JqZWN0TGlzdFtlXT1uKX19LHtrZXk6ImdldERhdGFPYmplY3RTdWJzY3JpYmVycyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuZGF0YU9iamVjdExpc3RbZV07aWYocilyZXR1cm4gci5zdWJzY3JpYmVyczt0aHJvdyJObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCJ9fSx7a2V5OiJyZWdpc3RlckRhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxPLmRlZXBDbG9uZSkoZSk7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixvKXt0LmRhdGFPYmplY3RMaXN0W2UudXJsXT1lLHQuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZWdpc3RyeTpEYXRhT2JqZWN0VVJMcyIpLnRoZW4oZnVuY3Rpb24oaSl7aXx8KGk9e30pLAovL3VwZGF0ZSB0aGUgbGlzdCB3aXRoIHRoZSBuZXcgZWxlbWVudHMKaVtlLm5hbWUrZS5zY2hlbWErZS5yZXNvdXJjZXMrZS5yZXBvcnRlcl09ZS51cmwsCi8vIHN0ZXAgdG8gb2J0YWluIHRoZSBsaXN0IG9mIGFsbCBVUkwgcmVnaXN0ZXJlZCB0byB1cGRhdGVkIHdpdGggdGhlIG5ldyBvbmUuCnQuc3RvcmFnZU1hbmFnZXIuc2V0KCJyZWdpc3RyeTpEYXRhT2JqZWN0VVJMcyIsMCxpKS50aGVuKGZ1bmN0aW9uKCl7dC5pc0ludGVyd29ya2luZ1Byb3RvU3R1YihyLnJlcG9ydGVyKSYmKHIuaW50ZXJ3b3JraW5nPSEwKTt2YXIgbz0hMDtyLmhhc093blByb3BlcnR5KCJkb21haW5fcmVnaXN0cmF0aW9uIikmJihvPXIuZG9tYWluX3JlZ2lzdHJhdGlvbiksbz90Ll9kb21haW5SZWdpc3RyYXRpb24ucmVnaXN0ZXJEYXRhT2JqZWN0KHIsZS5yZXN1bWUsdC5wMnBIYW5kbGVyU3R1YikudGhlbihmdW5jdGlvbihlKXtuKGUpfSk6bihyKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe00uZXJyb3IoIltSZWdpc3RyeSByZWdpc3RlckRhdGFPYmplY3RdIEVycm9yOiAiLGUpLG8oZSl9KX0pfSl9fSx7a2V5OiJfZ2V0UmVzb3VyY2VzQW5kU2NoZW1lcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyKXt2YXIgbj12b2lkIDA7Ci8vIGNoZWNrIGlmIHRoZSBoeXBlcnR5IHJlc291cmNlcyBpcyBhIHZlY3RvciBvciBhIHN0cmluZwovLyBUT0RPIGRlbGV0ZSBsYXRlciB3aGVuIGNhdGFsb2d1ZSBpcyBmaXhlZAoic3RyaW5nIj09dHlwZW9mIGUuaHlwZXJ0eVR5cGU/KG49W10sbi5wdXNoKGUuaHlwZXJ0eVR5cGUpKTpuPWUuaHlwZXJ0eVR5cGU7dmFyIG89ZS5vYmplY3ROYW1lLGk9ZS5kYXRhT2JqZWN0cyxzPVtdOwovL3RoaXMgd2lsbCBjcmVhdGUgYSBhcnJheSB3aXRoIGEgUHJvbWlzZSBpbiBlYWNoIHBvc2l0aW9uCmZvcih2YXIgYSBpbiBpKXMucHVzaCh0LnJ1bnRpbWVDYXRhbG9ndWUuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IoaVthXSkpOwovLyBhcyBzb29uIGFzIHRoZSBwcmV2aW91cyBhcnJheSBpcyBjb21wbGV0ZWQsIHRoaXMgd2lsbCB3YWl0IGZvciB0aGUgcmVzb2x2ZSBvZiBhbGwgcHJvbWlzZXMgaW4gdGhlIGFycmF5CnUuZGVmYXVsdC5hbGwocykudGhlbihmdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIGkgaW4gZSl7dmFyIHM9ZVtpXTt0LnB1c2gocy5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllcy5zY2hlbWUuY29uc3RhbnQpfQovLyBsb2cubG9nKCdbUmVnaXN0cnldIEh5cGVydHkgU2NoZW1hcycsIGZpbHRlcmVkRGF0YVNjaGVtYXMpOwovLyBsb2cubG9nKCdbUmVnaXN0cnldIEh5cGVydHkgcmVzb3VyY2VzJywgcmVzb3VyY2VzKTsKcih7cmVzb3VyY2VzOm4sZGF0YVNjaGVtYTp0LG5hbWU6b30pfSl9KX19LHtrZXk6ImNoZWNrUmVnaXN0ZXJlZFVSTHMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuKXt2YXIgbz1lLnJlcG9ydGVyPyJyZWdpc3RyeTpEYXRhT2JqZWN0VVJMcyI6InJlZ2lzdHJ5Okh5cGVydHlVUkxzIjsic3RyaW5nIj09dHlwZW9mIHQmJihvPXQmJiJoeXBlcnR5IiE9PSgwLE8uZGl2aWRlVVJMKSh0KS50eXBlPyJyZWdpc3RyeTpEYXRhT2JqZWN0VVJMcyI6InJlZ2lzdHJ5Okh5cGVydHlVUkxzIiksCi8vZGVidWdnZXI7CnIuc3RvcmFnZU1hbmFnZXIuZ2V0KG8pLnRoZW4oZnVuY3Rpb24oaSl7aWYoaXx8KGk9e30pLCJzdHJpbmciPT10eXBlb2YgdCl7TS5pbmZvKCJbUmVnaXN0cnkgLSBjaGVja1JlZ2lzdGVyZWRVUkxzXSAtIGxvb2sgZm9yICIrdCsiIG9uICIsaSk7dmFyIGE9KDAscy5kZWZhdWx0KShpKS5tYXAoZnVuY3Rpb24oZSl7dmFyIHI9aVtlXS5pbmRleE9mKHQpO3JldHVybiBpW2VdW3JdfSk7cmV0dXJuIE0uaW5mbygiW1JlZ2lzdHJ5IC0gY2hlY2tSZWdpc3RlcmVkVVJMc10gLSBmb3VuZCAiK2EubGVuZ3RoKyIgcmVzdWx0cyBvbiAiLGEpLG4oMT09PWEubGVuZ3RoP2E6dm9pZCAwKX1pZigicmVnaXN0cnk6SHlwZXJ0eVVSTHMiIT09byl7dmFyIHU9ZS5uYW1lK2Uuc2NoZW1hK2UucmVzb3VyY2VzK2UucmVwb3J0ZXI7aWYoaVt1XSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeV0gcmV1c2FnZSBvZiBkYXRhT2JqZWN0IFVSTCcpOwppZigic3RyaW5nIj09dHlwZW9mIGlbdV0pe3ZhciBjPVtdO3JldHVybiBjLnB1c2goaVt1XSksbihjKX1yZXR1cm4gbihpW3VdKX0KLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBubyBkYXRhT2JqZWN0IFVSTCB3YXMgcHJldmlvdXNseSByZWdpc3RlcmVkJyk7CnJldHVybiBuKHZvaWQgMCl9ci5fZ2V0UmVzb3VyY2VzQW5kU2NoZW1lcyhlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuKGlbZS5yZXNvdXJjZXMrZS5kYXRhU2NoZW1hK2UubmFtZV0/aVtlLnJlc291cmNlcytlLmRhdGFTY2hlbWErZS5uYW1lXTp2b2lkIDApfSl9KX0pfX0se2tleToicmVnaXN0ZXJIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8pe3ZhciBpPXRoaXMsYT12b2lkIDA7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24odSxjKXtpLmlkTW9kdWxlLmdldElkZW50aXR5QXNzZXJ0aW9uKG8pLnRoZW4oZnVuY3Rpb24obyl7dmFyIGY9by51c2VyUHJvZmlsZTsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gdXNlclByb2ZpbGUnLCB1c2VyUHJvZmlsZSk7CnZvaWQgMD09PWkuX21lc3NhZ2VCdXM/YygiW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gTWVzc2FnZUJ1cyBpcyB1bmRlZmluZWQiKToKLy9jYWxsIGNoZWNrIGlmIHRoZSBwcm90b3N0dWIgZXhpc3Q6IHRvIGJlIHJlbW92ZWQKLyogIF90aGlzLnJlc29sdmUoZG9tYWluVXJsKS50aGVuKGZ1bmN0aW9uKGEpIHsKICAgICAgICAgICAgICAvLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBzdHViIHRvIGRvbWFpbiByZWdpc3RyeS0gJywgYSk7Ki8KaS5zdG9yYWdlTWFuYWdlci5nZXQoInJlZ2lzdHJ5Okh5cGVydHlVUkxzIikudGhlbihmdW5jdGlvbihvKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gc3RvcmFnZU1hbmFnZXJdIC0gJywgdXJsc0xpc3QpOwppLl9nZXRSZXNvdXJjZXNBbmRTY2hlbWVzKHIpLnRoZW4oZnVuY3Rpb24obCl7YT1sLG98fChvPXt9KSxvW2EucmVzb3VyY2VzK2EuZGF0YVNjaGVtYSthLm5hbWVdPW4uYWRkcmVzcyxpLnN0b3JhZ2VNYW5hZ2VyLnNldCgicmVnaXN0cnk6SHlwZXJ0eVVSTHMiLDAsbykudGhlbihmdW5jdGlvbigpewovL2NoZWNrIHdoZXRoZXIgdGhlIHJlY2VpdmVkIHNhbmJveCBlIEFwcGxpY2F0aW9uU2FuZGJveCBvciBhIG5vcm1hbCBzYW5kYm94CiJhcHAiPT09ZS50eXBlP2kuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W24uYWRkcmVzc1swXV09ZToibm9ybWFsIj09PWUudHlwZT9pLnNhbmRib3hlc0xpc3Quc2FuZGJveFtuLmFkZHJlc3NbMF1dPWU6YygiV3JvbmcgU2FuZGJveFR5cGUiKTt2YXIgbz12b2lkIDAsbD12b2lkIDA7MCE9PSgwLHMuZGVmYXVsdCkoaS5wMnBIYW5kbGVyU3R1YikubGVuZ3RoJiYobz1pLnAycEhhbmRsZXJTdHViW2kucnVudGltZVVSTF0udXJsLGw9aC5ydW50aW1lVXRpbHMucnVudGltZURlc2NyaXB0b3IucDJwUmVxdWVzdGVyU3R1Yik7dmFyIGQ9bmV3IG0uZGVmYXVsdChpLmlkZW50aWZpZXIsaS5yZWdpc3RyeVVSTCx0LHIsbi5hZGRyZXNzWzBdLGYsImd1aWQiLGkucnVudGltZVVSTCwiY3R4IixvLGwsYS5kYXRhU2NoZW1hLGEucmVzb3VyY2VzKTtpLmh5cGVydGllc0xpc3QucHVzaChkKTsvKi0tLSBzdGFydCBoZXJlIG1vdmUgcDJwIGFuZCBkb21haW4gcmVnaXN0cnkgcmVsYXRlZCBmZWF0dXJlcyB0byBhIHNlcGFyYXRlZCBmdW5jdGlvbi4tLS0tLS0tLi4qLwp2YXIgcD0hMDtyLmhhc093blByb3BlcnR5KCJfY29uZmlndXJhdGlvbiIpJiZyLmNvbmZpZ3VyYXRpb24uaGFzT3duUHJvcGVydHkoImRvbWFpbl9yZWdpc3RyYXRpb24iKSYmKHA9ci5jb25maWd1cmF0aW9uLmRvbWFpbl9yZWdpc3RyYXRpb24pLHA/aS5fZG9tYWluUmVnaXN0cmF0aW9uLnJlZ2lzdGVySHlwZXJ0eShkLG4ubmV3QWRkcmVzcykudGhlbihmdW5jdGlvbihlKXt1KGUpfSk6dSh7dXJsOmQuaHlwZXJ0eVVSTH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIEVycm9yOiAnLCByZWFzb24pOwpjKGUpfSl9KX0pfSxmdW5jdGlvbihlKXtjKCJbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSAiLGUpfSl9KX19LHtrZXk6InVucmVnaXN0ZXJIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89ITEsaT0wO2ZvcihpPTA7aTx0Lmh5cGVydGllc0xpc3QubGVuZ3RoO2krKyl7dmFyIHM9dC5oeXBlcnRpZXNMaXN0W2ldO2lmKHZvaWQgMCE9PXMmJnMuaHlwZXJ0eVVSTD09PWUpe289ITA7YnJlYWt9fSExPT09bz9uKCJIeXBlcnR5IG5vdCBmb3VuZCIpOihkZWxldGUgdC5oeXBlcnRpZXNMaXN0W2ldLHIoIkh5cGVydHkgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQiKSl9KX19LHtrZXk6ImRpc2NvdmVyUHJvdG9zdHViIix2YWx1ZTpmdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIlBhcmFtZXRlciB1cmwgbmVlZGVkIik7dmFyIHQ9dGhpcyxyPSgwLE8uZGl2aWRlVVJMKShlKSxuPXIuZG9tYWluO2lmKHQucHJvdG9zdHVic0xpc3QuaGFzT3duUHJvcGVydHkobikmJnQucHJvdG9zdHVic0xpc3Rbbl0uc3RhdHVzPT09TC5MSVZFKXJldHVybiB0LnByb3Rvc3R1YnNMaXN0W25dO3Rocm93IHQucHJvdG9zdHVic0xpc3Rbbl09e3N0YXR1czpMLkRFUExPWUlOR30sbmV3IEVycm9yKCJbUmVnaXN0cnkgLSBkaXNjb3ZlclByb3RvU3R1YiBdIE1lc3NhZ2UgTm9kZSBQcm90b3N0dWIgTm90IEZvdW5kLiBDcmVhdGluZyBvbmUiKX19LHtrZXk6ImRpc2NvdmVyUDJQU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihlKXtpZih0LnAycFJlcXVlc3RlclN0dWIuaGFzT3duUHJvcGVydHkoZSkmJnQucDJwUmVxdWVzdGVyU3R1YltlXS5zdGF0dXM9PT1MLkxJVkUpcmV0dXJuIHQucDJwUmVxdWVzdGVyU3R1YltlXTt0aHJvdyB0LnAycFJlcXVlc3RlclN0dWJbZV09e3N0YXR1czpMLkNSRUFURUR9LG5ldyBFcnJvcigiW1JlZ2lzdHJ5IC0gZGlzY292ZXJQMlBTdHViIF0gUDJQIFJlcXVlc3RlciBTdHViIE5vdCBGb3VuZC4gQ3JlYXRpbmcgb25lIil9aWYodC5wMnBIYW5kbGVyU3R1Yi5oYXNPd25Qcm9wZXJ0eSh0LnJ1bnRpbWVVUkwpKXJldHVybiB0LnAycEhhbmRsZXJTdHViW3QucnVudGltZVVSTF07dGhyb3cgdC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdPXtzdGF0dXM6TC5DUkVBVEVEfSxuZXcgRXJyb3IoIltSZWdpc3RyeSAtIGRpc2NvdmVyUDJQU3R1YiBdIFAyUCBIYW5kbGVyIFN0dWIgTm90IEZvdW5kLiIpfX0se2tleToicmVnaXN0ZXJTdHViIix2YWx1ZTpmdW5jdGlvbihlLHQscixuLGkpe3ZhciBzPXRoaXMsYT1pO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHUsYyl7dmFyIGY9dm9pZCAwOwovL2NoZWNrIGlmIG1lc3NhZ2VCdXMgaXMgcmVnaXN0ZXJlZCBpbiByZWdpc3RyeSBvciBub3QKdm9pZCAwPT09cy5fbWVzc2FnZUJ1cyYmYygiTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gcmVnaXN0ZXJTdHViIiksTS5pbmZvKCJbUmVnaXN0cnkgLSByZWdpc3RlclN0dWJdIC0gc3R1YklEICIsdCk7LyogaWYgKCFzdHViSUQuaW5kZXhPZignbXNnLW5vZGUuJykpIHsKICAgICAgICAgIHN0dWJJRCA9IHN0dWJJRC5zdWJzdHJpbmcoc3R1YklELmluZGV4T2YoJy4nKSArIDEpOwogICAgICAgIH0qLwp2YXIgbD12b2lkIDA7aWYocilpZihyLmhhc093blByb3BlcnR5KCJpc0hhbmRsZXJTdHViIikmJnIuaXNIYW5kbGVyU3R1YilmPXMucDJwSGFuZGxlclVSTCxzLnAycEhhbmRsZXJTdHViW3RdPXt1cmw6ZixzdGF0dXM6TC5DUkVBVEVEfSxzLnAycEhhbmRsZXJBc3NvY2lhdGlvbltzLnJ1bnRpbWVVUkxdPVtdLHMuc2FuZGJveGVzTGlzdC5zYW5kYm94W2ZdPWUsTS5pbmZvKCJbUmVnaXN0cnkgLSByZWdpc3RlclN0dWIgLSBQMlBIYW5kbGVyU3R1Yl0gLSAiLHQsIiAtICIsZiksdShzLnAycEhhbmRsZXJTdHViW3RdKTtlbHNle2w9ci5wMnBSZXF1ZXN0ZXJTdHViLGY9InJ1bnRpbWU6Ly8iKygwLE8uZGl2aWRlVVJMKShyLnJlbW90ZVJ1bnRpbWVVUkwpLmRvbWFpbisiL3AycHJlcXVlc3Rlci8iKygwLE8uZ2VuZXJhdGVHVUlEKSgpLE0uaW5mbygiW1JlZ2lzdHJ5IC0gcmVnaXN0ZXJTdHViIC0gUDJQUmVxdWVzdGVyU3R1Yl0gLSAiLGwsIiAtICIsZiksCi8vIHRvIGJlIGNsYXJpZmllZCB3aGF0IGlzIHRoaXMgcDJwSGFuZGxlckFzc29jaWF0aW9uCnMucDJwSGFuZGxlckFzc29jaWF0aW9uW3MucnVudGltZVVSTF0ucHVzaChmKSxzLnAycFJlcXVlc3RlclN0dWJbdF09e3VybDpmLHN0YXR1czpMLkNSRUFURUR9LHMuc2FuZGJveGVzTGlzdC5zYW5kYm94W2ZdPWU7Ci8vU2V0dXAgUDJQIFJlcXVlc3RlciBwYXRoIGludG8gTU4KdmFyIGQ9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpzLnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK3MuX2RvbWFpbisiL3NtIixib2R5OntzdWJzY3JpYmU6W2ZdLHNvdXJjZTpzLnJlZ2lzdHJ5VVJMfX07cy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShkLGZ1bmN0aW9uKGUpe30pLHUocy5wMnBSZXF1ZXN0ZXJTdHViW3RdKX1lbHNlIGY9InN0cmluZyI9PT0hKHZvaWQgMD09PWk/InVuZGVmaW5lZCI6KDAsby5kZWZhdWx0KShpKSkmJmkuaGFzT3duUHJvcGVydHkoIl9pbnRlcndvcmtpbmciKSYmaS5faW50ZXJ3b3JraW5nPyJydW50aW1lOi8vIit0KyIvcHJvdG9zdHViL3NjaGVtZTEiOiJydW50aW1lOi8vIit0KyIvcHJvdG9zdHViLyIrKDAsTy5nZW5lcmF0ZUdVSUQpKCksTS5pbmZvKCJbUmVnaXN0cnkgLSByZWdpc3RlclN0dWIgLSBOb3JtYWwgU3R1Yl0gLSAiLHQpLAovLyBUT0RPOiBPcHRpbWl6ZSB0aGlzCnMucHJvdG9zdHVic0xpc3RbdF09e3VybDpmLHN0YXR1czpMLkRFUExPWUlOR30sbiYmKHMucHJvdG9zdHVic0xpc3RbdF0uZGVzY3JpcHRvclVSTD1uKSxhJiZhLmludGVyd29ya2luZyYmKHMucHJvdG9zdHVic0xpc3RbdF0uaW50ZXJ3b3JraW5nPWEuaW50ZXJ3b3JraW5nKSxzLnNhbmRib3hlc0xpc3Quc2FuZGJveFtmXT1lLHUocy5wcm90b3N0dWJzTGlzdFt0XSk7Ci8vIHJlc29sdmUocnVudGltZVByb3RvU3R1YlVSTCk7CnMuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoZisiL3N0YXR1cyIsZnVuY3Rpb24oZSl7cy5fb25Qcm90b3N0dWJTdGF0dXNFdmVudChlKX0pfSl9fSx7a2V5OiJfb25Qcm90b3N0dWJTdGF0dXNFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbTtpZighZS50by5pbmNsdWRlcygiL3N0YXR1cyIpKXJldHVybiB2b2lkIE0uZXJyb3IoIltSZWdpc3RyeSBvblByb3Rvc3R1YlN0YXR1c0V2ZW50XSBOb3QgU3RhdHVzIEV2ZW50OiAiLGUpOwovLyBwcm9jZXNzIHN0YXR1cyBldmVudHMgZnJvbSBtZXNzYWdlIG5vZGUgcHJvdG9zdHVicwppZihyLmluY2x1ZGVzKCIvcHJvdG9zdHViLyIpKQovLyBUT0RPOiB1bmNvbW1lbnQgYmVsb3cgd2hlbiBwcm90b3N0dWJzIGFyZSB1cGRhdGVkIHdpdGggbmV3IHN0YXR1cyB2YWx1ZSAibGl2ZSIKKDAscy5kZWZhdWx0KSh0LnByb3Rvc3R1YnNMaXN0KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvdG9zdHVic0xpc3RbZV0udXJsPT09cn0pLm1hcChmdW5jdGlvbihyKXt0LnByb3Rvc3R1YnNMaXN0W3JdLnN0YXR1cz1lLmJvZHkudmFsdWV9KTtlbHNlCi8vIHByb2Nlc3Mgc3RhdHVzIGV2ZW50cyBmcm9tIHAycCBjb25uZWN0aW9ucwppZihlLmJvZHkucmVzb3VyY2Upe3ZhciBuPWUuYm9keS5yZXNvdXJjZTtpZih0LnAycENvbm5lY3Rpb25MaXN0W25dKXQucDJwQ29ubmVjdGlvbkxpc3Rbbl0uc3RhdHVzPWUuYm9keS52YWx1ZSx0LnAycENvbm5lY3Rpb25MaXN0W25dLnVybD1yO2Vsc2V7dmFyIG89e3N0YXR1czplLmJvZHkudmFsdWUsdXJsOnJ9O3QucDJwQ29ubmVjdGlvbkxpc3Rbbl09b30KLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IC0gb25Qcm90b3N0dWJTdGF0dXNFdmVudF0gLSBQMlBDb25uZWN0aW9uIHN0YXR1czogJywgX3RoaXMucDJwQ29ubmVjdGlvbkxpc3RbcmVtb3RlUnVudGltZVVSTF0pOwovLyBVcGRhdGUgUDJQIFJlcXVlc3RlciBwcm90b3N0dWIgaWYgaXQgaXMgY29taW5nIGZyb20gdGhlcmUKci5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKT90LnAycFJlcXVlc3RlclN0dWJbbl0uc3RhdHVzPWUuYm9keS52YWx1ZToKLy8gaWYgZnJvbSBQMlBIYW5kbGVyIHdpdGggc3RhdHVzIGRpc2NvbmVuY3RlZCwgbGV0cyByZW1vdmUgZnJvbSBwMnBDb25uZWN0aW9uTGlzdAoiZGlzY29ubmVjdGVkIj09PWUuYm9keS52YWx1ZSYmZGVsZXRlIHQucDJwQ29ubmVjdGlvbkxpc3Rbbl19ZWxzZXtpZihyLmluY2x1ZGVzKCIvcDJwcmVxdWVzdGVyLyIpKQovLyBJdCBpcyBhbiBldmVudCBmcm9tIFAyUCBSZXF1ZXN0ZXIgd2l0aG91dCBtYW5kYXRvcnkgInJlc291cmNlIiBmaWVsZApyZXR1cm4gdm9pZCBNLmVycm9yKCJbUmVnaXN0cnkgb25Qcm90b3N0dWJTdGF0dXNFdmVudF0gcmVzb3VyY2UgbWlzc2luZzogIixlKTsKLy8gSXQgaXMgYW4gZXZlbnQgZnJvbSBQMlAgSGFuZGxlcgp0LnAycEhhbmRsZXJTdHViW3QucnVudGltZVVSTF0uc3RhdHVzPWUuYm9keS52YWx1ZX19fSx7a2V5OiJ1bnJlZ2lzdGVyU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QucHJvdG9zdHVic0xpc3QuaGFzT3duUHJvcGVydHkoZSk/KGRlbGV0ZSB0LnByb3Rvc3R1YnNMaXN0W2VdLHIoIlByb3Rvc3R1YlVSTCByZW1vdmVkIikpOm4oIkVycm9yIG9uIHVucmVnaXN0ZXJTdHViOiBIeXBlcnR5IG5vdCBmb3VuZCIpfSl9fSx7a2V5OiJyZWdpc3RlcklkcFByb3h5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT12b2lkIDA7Ci8vY2hlY2sgaWYgbWVzc2FnZUJ1cyBpcyByZWdpc3RlcmVkIGluIHJlZ2lzdHJ5IG9yIG5vdAp2b2lkIDA9PT1yLl9tZXNzYWdlQnVzJiZvKCJNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiByZWdpc3RlclN0dWIiKSxpPSJkb21haW4taWRwOi8vIit0KyIvc3R1Yi8iKygwLE8uZ2VuZXJhdGVHVUlEKSgpLAovLyBUT0RPOiBPcHRpbWl6ZSB0aGlzCnIuaWRwUHJveHlMaXN0W3RdPXt1cmw6aSxzdGF0dXM6TC5ERVBMT1lJTkd9LHIuc2FuZGJveGVzTGlzdC5zYW5kYm94W2ldPWUsCi8vIHNhbmRib3guYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbihtc2cpIHsKLy8gICBfdGhpcy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2cpOwovLyB9KTsKbihpKSxyLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGkrIi9zdGF0dXMiLGZ1bmN0aW9uKGUpe3IuX29uSWRwUHJveHlTdGF0dXNFdmVudChlKX0pfSl9fSx7a2V5OiJfb25JZHBQcm94eVN0YXR1c0V2ZW50Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tO2lmKCFlLnRvLmluY2x1ZGVzKCIvc3RhdHVzIikpcmV0dXJuIHZvaWQgTS5lcnJvcigiW1JlZ2lzdHJ5IG9uSWRwUHJveHlTdGF0dXNFdmVudF0gTm90IFN0YXR1cyBFdmVudDogIixlKTsoMCxzLmRlZmF1bHQpKHQuaWRwUHJveHlMaXN0KS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQuaWRwUHJveHlMaXN0W2VdLnVybD09PXJ9KS5tYXAoZnVuY3Rpb24ocil7dC5pZHBQcm94eUxpc3Rbcl0uc3RhdHVzPWUuYm9keS52YWx1ZX0pfX0se2tleToiZGlzY292ZXJJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQYXJhbWV0ZXIgdXJsIG5lZWRlZCIpO3ZhciB0PXRoaXMscj0oMCxPLmRpdmlkZVVSTCkoZSksbj1yLmRvbWFpbjtpZih0LmlkcFByb3h5TGlzdC5oYXNPd25Qcm9wZXJ0eShuKSYmdC5pZHBQcm94eUxpc3Rbbl0uc3RhdHVzPT09TC5MSVZFKXJldHVybiB0LmlkcFByb3h5TGlzdFtuXTt0aHJvdyB0LmlkcFByb3h5TGlzdFtuXT17c3RhdHVzOkwuUFJPR1JFU1N9LG5ldyBFcnJvcigiW1JlZ2lzdHJ5IC0gZGlzY292ZXJJZHBQcm94eSBdIElkcCBQcm94eSBOb3QgRm91bmQuIENyZWF0aW5nIG9uZSIpfX0se2tleToicmVnaXN0ZXJQRVAiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuKXsKLy9UT0RPIGNoZWNrIHdoYXQgcGFyYW1ldGVyIGluIHRoZSBwb3N0TWVzc2FnZSB0aGUgcGVwIGlzLgpyLnBlcExpc3RbdF09ZSxuKCJQRVAgcmVnaXN0ZXJlZCB3aXRoIHN1Y2Nlc3MiKX0pfX0se2tleToidW5yZWdpc3RlclBFUCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZvaWQgMD09PXQucGVwTGlzdFtlXT9uKCJQZXAgTm90IGZvdW5kLiIpOnIoIlBFUCBzdWNjZXNzZnVsbHkgcmVtb3ZlZC4iKX0pfX0se2tleToiZ2V0U2FuZGJveCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIlBhcmFtZXRlciB1cmwgbmVlZGVkIik7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSBnZXRTYW5kYm94XSBnZXRTYW5kYm94IGZvcjogJywgdXJsLCAnIGFuZCBjYXBhYmlsaXRpZXM6ICcsIGNvbnN0cmFpbnRzKTsKdmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXZvaWQgMDsKLy9pZiBubyBhcHBTYW5kYm94IHdhcyBmb3VuZCwgdHJ5IHRvIHNlYXJjaCBpbiB0aGUgbm9ybWFsIHNhbmRib3hlcyBsaXN0CmlmKCEoCi8vZmlyc3QgdHJ5IHRvIGZpbmQgdGhlIHVybCBpbiB0aGUgYXBwU2FuZGJveCBsaXN0Cmk9ci5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbZV0pJiYhKGk9ci5zYW5kYm94ZXNMaXN0LnNhbmRib3hbZV0pKXt2YXIgYT12b2lkIDA7YT1lLmluY2x1ZGVzKCI6Ly8iKT8oMCxPLmRpdmlkZVVSTCkoZSkuZG9tYWluOmU7Ci8vIHNlYXJjaCBpbiB0aGUgc2FuZGJveGVzIGxpc3QgZm9yIGEgZW50cnkgY29udGFpbmluZyB0aGUgZG9tYWluIGdpdmVuCmZvcih2YXIgdSBpbiByLnNhbmRib3hlc0xpc3Quc2FuZGJveCkKLy90b2RvOiB1bmNvbW1lbnQgc2FuZGJveCBjb25zdHJhaW50cyBtYXRjaCBjb25kaXRpb24gd2l0aCBydW50aW1lIHNoYXJpbmcKaWYodS5pbmNsdWRlcyhhKSYmci5zYW5kYm94ZXNMaXN0LnNhbmRib3hbdV0ubWF0Y2hlcyh0KSl7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgZT1yLnNhbmRib3hlc0xpc3Quc2FuZGJveFt1XTtyZXR1cm4oMCxzLmRlZmF1bHQpKHQpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4iYnJvd3NlciI9PT10JiZlLnR5cGU9PT12LlNhbmRib3hUeXBlLk5PUk1BTHx8IndpbmRvd1NhbmJveCI9PT10JiZlLnR5cGU9PT12LlNhbmRib3hUeXBlLldJTkRPV30pLmxlbmd0aD4wJiYoaT1lKSwiYnJlYWsifSgpO2lmKCJicmVhayI9PT1jKWJyZWFrfX1pP24oaSk6bygibm8gc2FuZGJveCBmb3VuZCBmb3I6ICIrZSl9KX19LHtrZXk6InJlc29sdmVOb3JtYWxTdHViIix2YWx1ZTpmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygncmVzb2x2ZU5vcm1hbFN0dWIgJyArIHVybCk7CnZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXsKLy9zcGxpdCB0aGUgdXJsIHRvIGZpbmQgdGhlIGRvbWFpblVSTC4gZGVhbHMgd2l0aCB0aGUgdXJsIGZvciBleGFtcGxlIGFzOgovLyJoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvcHJvdG9zdHViLzEyMyIsCnZhciBvPSgwLE8uZGl2aWRlVVJMKShlKSxpPW8uZG9tYWluLHM9by50eXBlO2UuaW5jbHVkZXModC5ydW50aW1lVVJMKSYmKE0uZXJyb3IoIltSZWdpc3RyeSAtIHJlc29sdmVdIFVSTCB0byBiZSByZXNvbHZlZCBzaG91bGQgaGF2ZSBsaXN0ZW5lcnMgIixlKSxuKCJbUmVnaXN0cnkgLSByZXNvbHZlXSBVUkwgdG8gYmUgcmVzb2x2ZWQgc2hvdWxkIGhhdmUgbGlzdGVuZXJzICIsZSkpLAovLyByZXNvbHZlIHRoZSBkb21haW4gcHJvdG9zdHViIGluIGNhc2Ugb2YgYSBtZXNzYWdlIHRvIGdsb2JhbCByZWdpc3RyeQplLmluY2x1ZGVzKCJnbG9iYWw6Ly9yZWdpc3RyeSIpP2k9dC5fZG9tYWluOmkuaW5kZXhPZigibXNnLW5vZGUuIikmJmkuaW5kZXhPZigicmVnaXN0cnkuIil8fChpPWkuc3Vic3RyaW5nKGkuaW5kZXhPZigiLiIpKzEpKSx0LmlzTGVnYWN5KGUpLnRoZW4oZnVuY3Rpb24obyl7Ci8vIGlmIGxlZ2FjeSBpdCBzaG91bGQgcmVzb2x2ZSBmb3IgPHByb3RvY29sPi48ZG9tYWluPgpvJiYiZG9tYWluLWlkcCIhPT1zJiYoaT1zKyIuIisoMCxPLmdldFVzZXJJZGVudGl0eURvbWFpbikoZSkpLE0uaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVdIGRvbWFpblVybDoiLGkpO3ZhciBhPXZvaWQgMDthPSJkb21haW4taWRwIj09PXM/ISF0LmlkcFByb3h5TGlzdC5oYXNPd25Qcm9wZXJ0eShpKSYmdC5pZHBQcm94eUxpc3RbaV06ISF0LnByb3Rvc3R1YnNMaXN0Lmhhc093blByb3BlcnR5KGkpJiZ0LnByb3Rvc3R1YnNMaXN0W2ldLE0uaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVdIHJlZ2lzdHJlZDoiLGEpLAovLyBUT0RPIHNpbmNlIHRoZSBwcm90b3N0dWJzIGhhdmUgb3RoZXIgc3RhdGVzIHRoaXMgc2hvdWxkIGJlIHJldmlzZWQsIGJlY2F1c2UgdGhlIHN0YXR1cyBjb3VsZCBjaGFuZ2UgZnJvbSBERVBMT1lFRCB0byBMSVZFCi8vIFRPRE8gYW5kIHRoaXMgdmFsaWRhdGlvbiB3aWxsIHRyaWdnZXIgYSBuZXcgbG9hZCBvZiBJRFBQcm94eSBvciBQcm90b3N0dWI7CmEmJmEuaGFzT3duUHJvcGVydHkoInN0YXR1cyIpJiYoYS5zdGF0dXM9PT1MLkRFUExPWUVEfHxhLnN0YXR1cz09PUwuQ1JFQVRFRHx8YS5zdGF0dXM9PT1MLkxJVkV8fGEuc3RhdHVzPT09TC5ESVNDT05ORUNURUQpPyhNLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlXSBSZXNvbHZlZDogIixhLnVybCxhLnN0YXR1cykscihhLnVybCkpOgovL3RvZG86IHVzZSBzd2l0Y2gtY2FzZSB0byBzdXBwb3J0IG90aGVyIHR5cGVzIG9mIHN0dWJzCiJkb21haW4taWRwIj09PXM/KAovLyBUaGUgSWRQIFByb3h5IGRvZXMgbm90IGV4aXN0LCBsZXQncyBwcmVwYXJlIGl0cyBkZXBsb3ltZW50IGJ5IHdhdGNoaW5nIGl0cyBzdGF0dXMKdC53YXRjaGluZ1lvdS5vYnNlcnZlKCJpZHBQcm94eUxpc3QiLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlTm9ybWFsU3R1Yl0gaWRwUHJveHlMaXN0IGNoYW5nZWQgJyArIF90aGlzLmlkcFByb3h5TGlzdCk7CnZhciBuPWUua2V5cGF0aDtuLmluY2x1ZGVzKCJzdGF0dXMiKSYmKG49bi5yZXBsYWNlKCIuc3RhdHVzIiwiIikpLG49PT1pJiYic3RhdHVzIj09PWUubmFtZSYmZS5uZXdWYWx1ZT09PUwuQ1JFQVRFRCYmCi8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVOb3JtYWxTdHViXSBpZHBQcm94eUxpc3QgaXMgbGl2ZSAnICsgX3RoaXMuaWRwUHJveHlMaXN0W2RvbWFpblVybF0pOwpyKHQuaWRwUHJveHlMaXN0W2ldLnVybCl9KSxhfHwoCi8vIHRoaXMgcHJvY2VzcyB3aWxsIGxvYWQgdGhlIGlkcCBwcm94eSwgYmVjYXVzZSBpcyBub3QgeWV0IHJlZ2lzdGVyZWQ7Ck0uaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVOb3JtYWxTdHViXSBkZXBsb3kgbmV3IElEUFByb3h5OiAiLGkpLHQubG9hZGVyLmxvYWRJZHBQcm94eShpKS50aGVuKGZ1bmN0aW9uKCl7TS5pbmZvKCJbUmVnaXN0cnkucmVzb2x2ZU5vcm1hbFN0dWJdIElkUCBQcm94eSBkZXBsb3llZDogIix0LmlkcFByb3h5TGlzdFtpXSl9KS5jYXRjaChmdW5jdGlvbihlKXtNLmVycm9yKCJbUmVnaXN0cnkucmVzb2x2ZV0gRXJyb3IgcmVzb2x2aW5nIExvYWQgSURQUHJveHk6ICIsZSksdC5pZHBQcm94eUxpc3RbaV0uc3RhdHVzPSJkZXBsb3ltZW50LWZhaWxlZCIsbihlKX0pKSk6KAovLyBUaGUgcHJvdG9TdHViIGRvZXMgbm90IGV4aXN0LCBsZXQncyBwcmVwYXJlIGl0cyBkZXBsb3ltZW50IGJ5IHdhdGNoaW5nIGl0cyBzdGF0dXMKdC53YXRjaGluZ1lvdS5vYnNlcnZlKCJwcm90b3N0dWJzTGlzdCIsZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVOb3JtYWxTdHViXSBwcm90b3N0dWJzTGlzdCBjaGFuZ2VkICcgKyBfdGhpcy5wcm90b3N0dWJzTGlzdCk7CnZhciBuPWUua2V5cGF0aDtuLmluY2x1ZGVzKCJzdGF0dXMiKSYmKG49bi5yZXBsYWNlKCIuc3RhdHVzIiwiIikpLG49PT1pJiYic3RhdHVzIj09PWUubmFtZSYmZS5uZXdWYWx1ZT09PUwuQ1JFQVRFRCYmCi8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVdIHByb3Rvc3R1YiBpcyBsaXZlICcgKyBfdGhpcy5wcm90b3N0dWJzTGlzdFtkb21haW5VcmxdKTsKcih0LnByb3Rvc3R1YnNMaXN0W2ldLnVybCl9KSxhfHwoCi8vIGxldHMgZGVwbG95IHRoZSBwcm90b3N0dWIKTS5pbmZvKCJbUmVnaXN0cnkucmVzb2x2ZV0gdHJpZ2dlciBuZXcgUHJvdG9jb2xTdHViOiAiLGkpLHQubG9hZGVyLmxvYWRTdHViKGkpLnRoZW4oZnVuY3Rpb24oKXt9KS5jYXRjaChmdW5jdGlvbihlKXtNLmVycm9yKCJbUmVnaXN0cnkucmVzb2x2ZU5vcm1hbFN0dWJdIEVycm9yIHJlc29sdmluZyBMb2FkIFByb3RvY29sU3R1YjogIixlKSxuKGUpfSkpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe00uZXJyb3IoIltSZWdpc3RyeS5yZXNvbHZlXSBFcnJvciByZXNvbHZpbmcgaXNsZWdhY3k6ICIsZSksbihlKX0pfSl9fSx7a2V5OiJyZXNvbHZlIix2YWx1ZTpmdW5jdGlvbihlKXtNLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gICIsZSk7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPWUudG8/ZS50bzplLGk9ISghZS5ib2R5fHwhZS5ib2R5LnAycCkmJmUuYm9keS5wMnA7Ci8vIGxvZy5sb2coJ1AyUDogJywgcDJwLCB1cmwpOwovLyBsb2cubG9nKCdQMlAgLSBwMnBIYW5kbGVyU3R1YjogJywgIV90aGlzLnAycEhhbmRsZXJTdHViW190aGlzLnJ1bnRpbWVVUkxdLCBfdGhpcy5wMnBIYW5kbGVyU3R1YiwgX3RoaXMucnVudGltZVVSTCk7Ci8vIGxvZy5sb2coJ1AyUCAtIGlzQmFja2VuZFNlcnZpY2VVUkw6ICcsIGlzQmFja2VuZFNlcnZpY2VVUkwodXJsKSwgaXNCYWNrZW5kU2VydmljZVVSTCwgdXJsKTsKLy8gbG9nLmxvZygnUDJQIC0gaW5jbHVkZXMgcnVudGltZVVSTDogJywgdXJsLmluY2x1ZGVzKF90aGlzLnJ1bnRpbWVVUkwpKTsKLy8gbG9nLmxvZygnUDJQIC0gaW5jbHVkZXMgcDJwaGFuZGxlcjogJywgdXJsLmluY2x1ZGVzKCcvcDJwaGFuZGxlci8nKSk7Ci8vIGxvZy5sb2coJ1AyUCAtIGluY2x1ZGVzIHAycHJlcXVlc3RlcjogJywgdXJsLmluY2x1ZGVzKCcvcDJwcmVxdWVzdGVyLycpKTsKLy8gU2tpcCBwMnAgcHJvY2VkdXJlIHdoZW4gbm90IHN1cHBvcnRlZCBieSB0aGUgUnVudGltZSBvciBmb3IgYmFja2VuZCBzZXJ2aWNlcwohdC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdfHwoMCxPLmlzQmFja2VuZFNlcnZpY2VVUkwpKG8pfHxvLmluY2x1ZGVzKHQucnVudGltZVVSTCl8fG8uaW5jbHVkZXMoIi9wMnBoYW5kbGVyLyIpfHxvLmluY2x1ZGVzKCIvcDJwcmVxdWVzdGVyLyIpPyhNLmluZm8oIltSZWdpc3RyeSAtIHJlc29sdmVdIC0gUmVzb2x2ZSBub3JtYWwgc3R1YjogIix0LnAycEhhbmRsZXJTdHViLHQucnVudGltZVVSTCwoMCxPLmlzQmFja2VuZFNlcnZpY2VVUkwpKG8pLGksbyksdC5yZXNvbHZlTm9ybWFsU3R1YihvKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KSk6KE0uaW5mbygiW1JlZ2lzdHJ5IC0gcmVzb2x2ZV0gLSBjaGVja1AyUDogIixpLG8sdC5fcDJwQ29ubmVjdGlvblJlc29sdmUpLHQuX3AycENvbm5lY3Rpb25SZXNvbHZlLmNoZWNrUDJQKGUpLnRoZW4oZnVuY3Rpb24obil7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIHJlc29sdmVdIGZvdW5kIHJlZ2lzdGVyZWQgUDJQOiAnLCByZWdpc3RlcmVkUDJQKTsKdmFyIHM9dC5wMnBDb25uZWN0aW9uTGlzdFtuLnJ1bnRpbWVdO3N3aXRjaChzfHwocz1uLHQucDJwQ29ubmVjdGlvbkxpc3Rbbi5ydW50aW1lXT1zKSxzLnN0YXR1cyl7Y2FzZSBMLkxJVkU6ZS5ib2R5LnBlZXI9bi5ydW50aW1lLHIocy51cmwsZSk7YnJlYWs7Y2FzZSBMLkNSRUFURUQ6Ly8gcDJwIGNvbm5lY3Rpb24gc2V0dXAgaXMgb25nb2luZywgdXNlIE1OIFN0dWIKY2FzZSBMLlBST0dSRVNTOnQucmVzb2x2ZU5vcm1hbFN0dWIobykudGhlbihmdW5jdGlvbihlKXtyKGUpfSk7YnJlYWs7Y2FzZSBMLkRJU0NPTk5FQ1RFRDoKLy8gcDJwIGNvbm5lY3Rpb24gc3R1YiB3YXMgZGlzY29ubmVjdGVkLCBsZXQncyBhc2sgdG8gY29ubmVjdCBhZ2FpbgpNLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gcDJwQ29ubmVjdGlvbiBpcyBkaXNjb25uZWN0ZWQgbGV0cyB0cnkgdG8gcmVjb25uZWN0IiksdC5fcDJwQ29ubmVjdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyKHMpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIFJlc29sdmVdIC0gd2FzIHJlY29ubmVjdGVkIHdpdGggcDJwUmVxdWVzdGVyU3R1YnQ6ICcsIHJldHVyblVSTCk7CnIoZSl9LGZ1bmN0aW9uKGUpe00uaW5mbygiW1JlZ2lzdHJ5IC0gUmVzb2x2ZV0gLSBSZWFzb246ICIsZSksdC5yZXNvbHZlTm9ybWFsU3R1YihvKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KX0pO2JyZWFrO2RlZmF1bHQ6TS5pbmZvKCJbUmVnaXN0cnkgLSByZXNvbHZlXSAtIFAyUDogIixpKSxpP3QuX3NldHVwUDJQUmVxdWVzdGVyKG4pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIG5vIHAycCBjb25uZWN0aW9uIGV4aXN0cyBidXQgdGhlIG1lc3NhZ2Ugc2VuZGVyIGlzIGFza2luZyBvbmUuIExldHMgdHJ5IHRvIHNldHVwIG9uZQpyKGUpfSxmdW5jdGlvbihlKXtNLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gUmVhc29uOiAiLGUpLHQucmVzb2x2ZU5vcm1hbFN0dWIobykudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9KToKLy8gbm8gcDJwIGNvbm5lY3Rpb24gZXhpc3RzIGFuZCB0aGUgbWVzc2FnZSBzZW5kZXIgZG9lcyBub3QgYXNrIG9uZS4gTGV0cyB1c2UgdGhlIE1OIFN0dWIKdC5yZXNvbHZlTm9ybWFsU3R1YihvKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KX19LGZ1bmN0aW9uKGUpe00uaW5mbygiW1JlZ2lzdHJ5IC0gUmVzb2x2ZV0gLSBSZWFzb246ICIsZSksdC5yZXNvbHZlTm9ybWFsU3R1YihvKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KX0pKX0pfX0se2tleToiX3NldHVwUDJQUmVxdWVzdGVyIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBNLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIGxvYWRTdHViIHdpdGggcDJwUmVxdWVzdGVyOiAiLGUpLG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz1lLnJ1bnRpbWUsaT17cmVtb3RlUnVudGltZVVSTDpvLHAycEhhbmRsZXI6ZS5wMnBIYW5kbGVyLHAycFJlcXVlc3RlclN0dWI6ITB9OwovLyBsZXRzIHByZXBhcmUgdGhlIHAycFJlcXVlc3RlclNUdWIgZGVwbG95bWVudCBieSBzZXR0aW5nIGFuIG9ic2VydmVyIHRvIGl0cyBzdGF0dXMgY2hhbmdlcwp0LndhdGNoaW5nWW91Lm9ic2VydmUoInAycFJlcXVlc3RlclN0dWIiLGZ1bmN0aW9uKGUpe00ubG9nKCJbUmVnaXN0cnkuX3NldHVwUDJQQ29ubmVjdGlvbl0gcDJwUmVxdWVzdGVyU3R1YnMgY2hhbmdlZCAiK3QucDJwUmVxdWVzdGVyU3R1YiksZS5rZXlwYXRoLnNwbGl0KCIuIilbMF09PT1vJiYic3RhdHVzIj09PWUubmFtZSYmZS5uZXdWYWx1ZT09PUwuTElWRSYmKE0ubG9nKCJbUmVnaXN0cnkuX3NldHVwUDJQQ29ubmVjdGlvbl0gcDJwUmVxdWVzdGVyIGlzIGxpdmUgIit0LnAycFJlcXVlc3RlclN0dWJbb10pLHIodC5wMnBSZXF1ZXN0ZXJTdHViW29dLnVybCkpfSksCi8vICBzdHViIGxvYWQKdC5sb2FkZXIubG9hZFN0dWIoZS5wMnBSZXF1ZXN0ZXIsaSkudGhlbihmdW5jdGlvbigpe00ubG9nKCJbUmVnaXN0cnkuX3NldHVwUDJQQ29ubmVjdGlvbl0gcDJwUmVxdWVzdGVyIGRlcGxveWVkOiAiLHQucDJwUmVxdWVzdGVyU3R1YltvXSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6ImlzTGVnYWN5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYoZT09PXQuX2RvbWFpbilyZXR1cm4gcighMSk7TS5sb2coIltSZWdpc3RyeV0gW1JlZ2lzdHJ5LlJlZ2lzdHJ5LmlzTGVnYWN5XSAiLGUpOwovLyBUT0RPOiB0byBiZSBkZWZpbmVkIGluIHRoZSBydW50aW1lIGNvbmZpZ3VyYXRpb24KdmFyIG89WyJoeXBlcnR5LXJ1bnRpbWUiLCJkb21haW4iLCJnbG9iYWwiLCJoeXBlcnR5Il0saT0oMCxPLmRpdmlkZVVSTCkoZSk7aWYoLTEhPT1vLmluZGV4T2YoaS50eXBlKXx8aS5kb21haW49PT10Ll9kb21haW4pcmV0dXJuIHIoITEpOwovLyBwcm9jZXNzIFVzZXIgVVJMcwppZihlLnNwbGl0KCJAIikubGVuZ3RoPjEpe3ZhciBzPWkuZG9tYWluOwovLyBsb2cubG9nKCdbUmVnaXN0cnldIFtSZWdpc3RyeS5SZWdpc3RyeS5pc0xlZ2FjeV0gZG9tYWluOiAnLCBkb21haW4pOwppZih0LmlkcExlZ2FjeVByb3h5TGlzdC5oYXNPd25Qcm9wZXJ0eShzKSl7dmFyIGE9dC5pZHBMZWdhY3lQcm94eUxpc3Rbc107cmV0dXJuIHIoYS5pbnRlcndvcmtpbmc/YS5pbnRlcndvcmtpbmc6ITEpfXQuX2xvYWRlci5kZXNjcmlwdG9ycy5nZXRJZHBQcm94eURlc2NyaXB0b3IocykudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBbUmVnaXN0cnkuUmVnaXN0cnkuaXNMZWdhY3ldIExlZ2FjeSBzdHViIGRlc2NyaXB0b3I6ICcsIHJlc3VsdCk7CmUuaW50ZXJ3b3JraW5nPyh0LmlkcExlZ2FjeVByb3h5TGlzdFtzXT1lLHIoZS5pbnRlcndvcmtpbmcpKTpyKCExKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe00ud2FybigicHJvYmxlbSBsb2FkaW5nIGlkcCBwcm94eSBkZXNjcmlwdG9yIGZvciBkb21haW46IixzLCIgYmVjYXVzZSAiLGUpLG4oZSl9KX1lbHNlCi8vIHByb2Nlc3MgcHJvdG9zdHViIFVSTHMKcih0LmlzSW50ZXJ3b3JraW5nUHJvdG9TdHViKGUpKX0pfX0se2tleToiaXNMb2NhbCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9WyJoeXBlcnR5LXJ1bnRpbWUiLCJydW50aW1lIl0scj1bImh5cGVydHkiXSxuPWUuc3BsaXQoIjovLyIpWzBdOwovLyBQcm9jZXNzIFJ1bnRpbWUgQ29yZSBVUkxzLgovLyBNZXNzYWdlcyBvcmlnaW5hdGVkIGZyb20gcHJvdG9zdHVicyBzaG91bGQgYWxzbyBub3QgaW5jbHVkZSB0aGUgcnVudGltZVVSTCBpbiBpdHMgVVJMLgppZigtMSE9PXQuaW5kZXhPZihuKSlyZXR1cm4gZS5pbmNsdWRlcyh0aGlzLnJ1bnRpbWVVUkwpOwovLyBQcm9jZXNzIEh5cGVydHkgVVJMcwovLyBUb2RvOiBoeXBlcnRpZXNMaXN0IHNob3VsZCBiZSBhbiBvYmplY3Qgbm90IGFuIGFycmF5CmlmKC0xIT09ci5pbmRleE9mKG4pKXtmb3IodmFyIG8gaW4gdGhpcy5oeXBlcnRpZXNMaXN0KXtpZih0aGlzLmh5cGVydGllc0xpc3Rbb10uaHlwZXJ0eVVSTD09PWUpcmV0dXJuITB9cmV0dXJuITF9Ci8vIFByb2Nlc3MgRGF0YSBPYmplY3QgVVJMcwplLmluY2x1ZGVzKCIvc3Vic2NyaXB0aW9uIikmJihlPWUuc3Vic3RyaW5nKDAsZS5pbmRleE9mKCIvc3Vic2NyaXB0aW9uIikpKTt2YXIgaT10aGlzLmRhdGFPYmplY3RMaXN0W2VdO3JldHVybiEhaSYmKCFpLmludGVyd29ya2luZ3x8IWkuaW50ZXJ3b3JraW5nKX19LHtrZXk6ImlzSW50ZXJ3b3JraW5nUHJvdG9TdHViIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiJib29sZWFuIiE9dHlwZW9mIGUmJighIWUuaW5jbHVkZXMoIi9wcm90b3N0dWIvIikmJigwLHMuZGVmYXVsdCkodC5wcm90b3N0dWJzTGlzdCkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiB0LnByb3Rvc3R1YnNMaXN0W3JdLnVybD09PWV9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuISF0LnByb3Rvc3R1YnNMaXN0W2VdLmhhc093blByb3BlcnR5KCJpbnRlcndvcmtpbmciKSYmdC5wcm90b3N0dWJzTGlzdFtlXS5pbnRlcndvcmtpbmd9KVswXSl9fSx7a2V5OiJsb2FkZXIiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9sb2FkZXI9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRlcn19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9tZXNzYWdlQnVzPWUsdC5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcih0LnJlZ2lzdHJ5VVJMLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgbGlzdGVuZXJdICcsIG1zZyk7CigwLE8uaXNIeXBlcnR5VVJMKShlLmZyb20pLGUuYm9keS5oYXNPd25Qcm9wZXJ0eSgiY3JpdGVyaWEiKTtlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlc291cmNlIikmJiIuIiE9PWUuYm9keS5yZXNvdXJjZSYmKCgwLE8uaXNVUkwpKGUuYm9keS5yZXNvdXJjZSksKDAsTy5pc1VzZXJVUkwpKGUuYm9keS5yZXNvdXJjZSksKDAsTy5pc0h5cGVydHlVUkwpKGUuYm9keS5yZXNvdXJjZSkpO2UudHlwZTtpZihlLmJvZHkuaGFzT3duUHJvcGVydHkoInZhbHVlIikmJihlLmJvZHkudmFsdWUuaGFzT3duUHJvcGVydHkoIm5hbWUiKSxlLmJvZHkudmFsdWUuaGFzT3duUHJvcGVydHkoInVzZXIiKSksInJlc3BvbnNlIj09PWUudHlwZSlyZXR1cm4gdm9pZCBNLmVycm9yKCJbUmVnaXN0ZXIgbGlzdGVuZXJdIHNraXBwaW5nICIsZSk7Ci8vIG1zZyBzZW50IGJ5IGlkZW50aXR5IG1hbmFnZXIgbGlicmFyeQp2YXIgcj10Ll9nZXRJZGVudGl0eUFzc29jaWF0ZWQoZS5ib2R5LnJlc291cmNlLGUuYm9keS5jcml0ZXJpYSksbj17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntyZXNvdXJjZTpyfX07bi5ib2R5LmNvZGU9cj8yMDA6NDA0LHQuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobil9KTsKLy8gSW5zdGFsbCBBZGRyZXNzQWxsb2NhdGlvbgp2YXIgcj1iLmRlZmF1bHQuaW5zdGFuY2U7dC5hZGRyZXNzQWxsb2NhdGlvbj1yLHQuX2RvbWFpblJlZ2lzdHJhdGlvbj1uZXcgdy5kZWZhdWx0KHQucnVudGltZVVSTCx0LnJlZ2lzdHJ5VVJMLHQuX2RvbWFpbixlKX19XSksUmVnaXN0cnl9KCk7dC5kZWZhdWx0PXgsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDQ0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NDUpLF9fZXNNb2R1bGU6ITB9fSwvKiA0NDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMTM3KSxyKDE5MCksZS5leHBvcnRzPXIoMTQxKS5mKCJpdGVyYXRvciIpfSwvKiA0NDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQ0NyksX19lc01vZHVsZTohMH19LC8qIDQ0NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0NDgpLHIoMTg1KSxyKDQ1Mykscig0NTQpLGUuZXhwb3J0cz1yKDEzKS5TeW1ib2x9LC8qIDQ0OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltCnZhciBuPXIoMTcpLG89cig1NyksaT1yKDQ2KSxzPXIoMjEpLGE9cigxODcpLHU9cig0NDkpLktFWSxjPXIoNjYpLGY9cigxMzIpLGw9cig5NiksZD1yKDk0KSxwPXIoMjIpLHk9cigxNDEpLGg9cigxNDIpLHY9cig0NTApLGc9cig0NTEpLGI9cig0MCksXz1yKDQxKSxtPXIoNDUpLFI9cigxMzYpLHc9cig3NiksUz1yKDEzOCksaz1yKDQ1MiksTz1yKDE0MyksUD1yKDM5KSxNPXIoNjQpLEw9Ty5mLHg9UC5mLEE9ay5mLEQ9bi5TeW1ib2wsVT1uLkpTT04saj1VJiZVLnN0cmluZ2lmeSxFPXAoIl9oaWRkZW4iKSxJPXAoInRvUHJpbWl0aXZlIiksQz17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxUPWYoInN5bWJvbC1yZWdpc3RyeSIpLHE9Zigic3ltYm9scyIpLEg9Zigib3Atc3ltYm9scyIpLEY9T2JqZWN0LnByb3RvdHlwZSxOPSJmdW5jdGlvbiI9PXR5cGVvZiBELEI9bi5RT2JqZWN0LEc9IUJ8fCFCLnByb3RvdHlwZXx8IUIucHJvdG90eXBlLmZpbmRDaGlsZCxLPWkmJmMoZnVuY3Rpb24oKXtyZXR1cm4gNyE9Uyh4KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHgodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPUwoRix0KTtuJiZkZWxldGUgRlt0XSx4KGUsdCxyKSxuJiZlIT09RiYmeChGLHQsbil9OngsVj1mdW5jdGlvbihlKXt2YXIgdD1xW2VdPVMoRC5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUsdH0sVz1OJiYic3ltYm9sIj09dHlwZW9mIEQuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIER9LFk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPT09RiYmWShILHQsciksYihlKSx0PVIodCwhMCksYihyKSxvKHEsdCk/KHIuZW51bWVyYWJsZT8obyhlLEUpJiZlW0VdW3RdJiYoZVtFXVt0XT0hMSkscj1TKHIse2VudW1lcmFibGU6dygwLCExKX0pKToobyhlLEUpfHx4KGUsRSx3KDEse30pKSxlW0VdW3RdPSEwKSxLKGUsdCxyKSk6eChlLHQscil9LHo9ZnVuY3Rpb24oZSx0KXtiKGUpO2Zvcih2YXIgcixuPXYodD1tKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KVkoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sSj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P1MoZSk6eihTKGUpLHQpfSxaPWZ1bmN0aW9uKGUpe3ZhciB0PUMuY2FsbCh0aGlzLGU9UihlLCEwKSk7cmV0dXJuISh0aGlzPT09RiYmbyhxLGUpJiYhbyhILGUpKSYmKCEodHx8IW8odGhpcyxlKXx8IW8ocSxlKXx8byh0aGlzLEUpJiZ0aGlzW0VdW2VdKXx8dCl9LFE9ZnVuY3Rpb24oZSx0KXtpZihlPW0oZSksdD1SKHQsITApLGUhPT1GfHwhbyhxLHQpfHxvKEgsdCkpe3ZhciByPUwoZSx0KTtyZXR1cm4hcnx8IW8ocSx0KXx8byhlLEUpJiZlW0VdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfX0sJD1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1BKG0oZSkpLG49W10saT0wO3IubGVuZ3RoPmk7KW8ocSx0PXJbaSsrXSl8fHQ9PUV8fHQ9PXV8fG4ucHVzaCh0KTtyZXR1cm4gbn0sWD1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1lPT09RixuPUEocj9IOm0oZSkpLGk9W10scz0wO24ubGVuZ3RoPnM7KSFvKHEsdD1uW3MrK10pfHxyJiYhbyhGLHQpfHxpLnB1c2gocVt0XSk7cmV0dXJuIGl9OwovLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKTnx8KEQ9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgRCl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEiKTt2YXIgZT1kKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSx0PWZ1bmN0aW9uKHIpe3RoaXM9PT1GJiZ0LmNhbGwoSCxyKSxvKHRoaXMsRSkmJm8odGhpc1tFXSxlKSYmKHRoaXNbRV1bZV09ITEpLEsodGhpcyxlLHcoMSxyKSl9O3JldHVybiBpJiZHJiZLKEYsZSx7Y29uZmlndXJhYmxlOiEwLHNldDp0fSksVihlKX0sYShELnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxPLmY9USxQLmY9WSxyKDIwMSkuZj1rLmY9JCxyKDc4KS5mPVoscigxNDApLmY9WCxpJiYhcig3NSkmJmEoRiwicHJvcGVydHlJc0VudW1lcmFibGUiLFosITApLHkuZj1mdW5jdGlvbihlKXtyZXR1cm4gVihwKGUpKX0pLHMocy5HK3MuVytzLkYqIU4se1N5bWJvbDpEfSk7Zm9yKHZhciBlZT0iaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMiLnNwbGl0KCIsIiksdGU9MDtlZS5sZW5ndGg+dGU7KXAoZWVbdGUrK10pO2Zvcih2YXIgcmU9TShwLnN0b3JlKSxuZT0wO3JlLmxlbmd0aD5uZTspaChyZVtuZSsrXSk7cyhzLlMrcy5GKiFOLCJTeW1ib2wiLHsKLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpCmZvcjpmdW5jdGlvbihlKXtyZXR1cm4gbyhULGUrPSIiKT9UW2VdOlRbZV09RChlKX0sCi8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQprZXlGb3I6ZnVuY3Rpb24oZSl7aWYoIVcoZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBzeW1ib2whIik7Zm9yKHZhciB0IGluIFQpaWYoVFt0XT09PWUpcmV0dXJuIHR9LHVzZVNldHRlcjpmdW5jdGlvbigpe0c9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe0c9ITF9fSkscyhzLlMrcy5GKiFOLCJPYmplY3QiLHsKLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQpjcmVhdGU6SiwKLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCmRlZmluZVByb3BlcnR5OlksCi8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCmRlZmluZVByb3BlcnRpZXM6eiwKLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQpnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6USwKLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKZ2V0T3duUHJvcGVydHlOYW1lczokLAovLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCmdldE93blByb3BlcnR5U3ltYm9sczpYfSksCi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQpVJiZzKHMuUytzLkYqKCFOfHxjKGZ1bmN0aW9uKCl7dmFyIGU9RCgpOwovLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQovLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwKLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKcmV0dXJuIltudWxsXSIhPWooW2VdKXx8Int9IiE9aih7YTplfSl8fCJ7fSIhPWooT2JqZWN0KGUpKX0pKSwiSlNPTiIse3N0cmluZ2lmeTpmdW5jdGlvbihlKXtmb3IodmFyIHQscixuPVtlXSxvPTE7YXJndW1lbnRzLmxlbmd0aD5vOyluLnB1c2goYXJndW1lbnRzW28rK10pO2lmKHI9dD1uWzFdLChfKHQpfHx2b2lkIDAhPT1lKSYmIVcoZSkpLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZApyZXR1cm4gZyh0KXx8KHQ9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgciYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksIVcodCkpcmV0dXJuIHR9KSxuWzFdPXQsai5hcHBseShVLG4pfX0pLAovLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpCkQucHJvdG90eXBlW0ldfHxyKDU4KShELnByb3RvdHlwZSxJLEQucHJvdG90eXBlLnZhbHVlT2YpLAovLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddCmwoRCwiU3ltYm9sIiksCi8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ10KbChNYXRoLCJNYXRoIiwhMCksCi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddCmwobi5KU09OLCJKU09OIiwhMCl9LC8qIDQ0OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig5NCkoIm1ldGEiKSxvPXIoNDEpLGk9cig1Nykscz1yKDM5KS5mLGE9MCx1PU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGM9IXIoNjYpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxmPWZ1bmN0aW9uKGUpe3MoZSxuLHt2YWx1ZTp7aToiTyIrICsrYSwvLyBvYmplY3QgSUQKdzp7fX19KX0sbD1mdW5jdGlvbihlLHQpewovLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CmlmKCFvKGUpKXJldHVybiJzeW1ib2wiPT10eXBlb2YgZT9lOigic3RyaW5nIj09dHlwZW9mIGU/IlMiOiJQIikrZTtpZighaShlLG4pKXsKLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKaWYoIXUoZSkpcmV0dXJuIkYiOwovLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQppZighdClyZXR1cm4iRSI7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0uaX0sZD1mdW5jdGlvbihlLHQpe2lmKCFpKGUsbikpewovLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAppZighdShlKSlyZXR1cm4hMDsKLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKaWYoIXQpcmV0dXJuITE7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0ud30scD1mdW5jdGlvbihlKXtyZXR1cm4gYyYmeS5ORUVEJiZ1KGUpJiYhaShlLG4pJiZmKGUpLGV9LHk9ZS5leHBvcnRzPXtLRVk6bixORUVEOiExLGZhc3RLZXk6bCxnZXRXZWFrOmQsb25GcmVlemU6cH19LC8qIDQ1MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGFsbCBlbnVtZXJhYmxlIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBzeW1ib2xzCnZhciBuPXIoNjQpLG89cigxNDApLGk9cig3OCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSkscj1vLmY7aWYocilmb3IodmFyIHMsYT1yKGUpLHU9aS5mLGM9MDthLmxlbmd0aD5jOyl1LmNhbGwoZSxzPWFbYysrXSkmJnQucHVzaChzKTtyZXR1cm4gdH19LC8qIDQ1MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpCnZhciBuPXIoNzQpO2UuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm4iQXJyYXkiPT1uKGUpfX0sLyogNDUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdwp2YXIgbj1yKDQ1KSxvPXIoMjAxKS5mLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBvKGUpfWNhdGNoKGUpe3JldHVybiBzLnNsaWNlKCl9fTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbChlKT9hKGUpOm8obihlKSl9fSwvKiA0NTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMTQyKSgiYXN5bmNJdGVyYXRvciIpfSwvKiA0NTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMTQyKSgib2JzZXJ2YWJsZSIpfSwvKiA0NTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5TYW5kYm94VHlwZT12b2lkIDA7dmFyIG49cigzMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDU5KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig2NykseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig2OCksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9cig0NjUpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChnKSxfPXIoNDY2KSxtPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksUj0odC5TYW5kYm94VHlwZT17QVBQOiJhcHAiLE5PUk1BTDoibm9ybWFsIixXSU5ET1c6IndpbmRvdyJ9LGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIFNhbmRib3goZSl7KDAsZi5kZWZhdWx0KSh0aGlzLFNhbmRib3gpO3ZhciB0PSgwLHkuZGVmYXVsdCkodGhpcywoU2FuZGJveC5fX3Byb3RvX198fCgwLHUuZGVmYXVsdCkoU2FuZGJveCkpLmNhbGwodGhpcykpLHI9dDtyZXR1cm4gZSYmKHIuY2FwYWJpbGl0aWVzPWUpLHR9LyoqCiAgICogRGVwbG95IGFuIGluc3RhbmNlIG9mIHRoZSBjb21wb25lbnQgaW50byB0aGUgc2FuZGJveC4KICAgKiBAcGFyYW0gIHtzdHJpbmd9IGNvbXBvbmVudFNvdXJjZUNvZGUgQ29tcG9uZW50IHNvdXJjZSBjb2RlIChIeXBlcnR5LCBQcm90b1N0dWIsIGV0YykKICAgKiBAcGFyYW0gIHtVUkx9IGNvbXBvbmVudFVSTCBIeXBlcnR5LCBQcm90b1N0dWIsIG9yIGFueSBvdGhlciBjb21wb25lbnQgYWRkcmVzcy4KICAgKiBAcGFyYW0gIHtDb25maWd9IGNvbmZpZ3VyYXRpb24gQ29uZmlnIHBhcmFtZXRlcnMgb2YgdGhlIGNvbXBvbmVudAogICAqIEByZXR1cm4ge1Byb21pc2U8c3RyaW5nPn0gcmV0dXJuIGRlcGxveWVkIGlmIHN1Y2Nlc3NmdWwsIG9yIGFueSBvdGhlciBzdHJpbmcgd2l0aCBhbiBlcnJvcgogICAqLwpyZXR1cm4oMCx2LmRlZmF1bHQpKFNhbmRib3gsZSksKDAsZC5kZWZhdWx0KShTYW5kYm94LFt7a2V5OiJkZXBsb3lDb21wb25lbnQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXM7Ci8vIGxldCBtZXNzYWdlRmFjdG9yeSA9IF90aGlzLm1lc3NhZ2VGYWN0b3J5OwpyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihpLHMpewovL0ZMT1ctT1VUOiBkZXBsb3kgbWVzc2FnZSBmb3IgdGhlIGludGVybmFsIFNhbmRib3hSZWdpc3RyeSAtPiBfb25EZXBsb3kKdmFyIGE9e3R5cGU6ImNyZWF0ZSIsZnJvbTpiLmRlZmF1bHQuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzLHRvOmIuZGVmYXVsdC5JbnRlcm5hbERlcGxveUFkZHJlc3MsYm9keTp7dXJsOnQsc291cmNlQ29kZTplLGNvbmZpZzpyLGxpYnM6bn19OwovL3NlbmQgbWVzc2FnZSBpbnRvIHRoZSBzYW5kYm94IGludGVybmFscyBhbmQgd2FpdCBmb3IgcmVwbHkKby5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGUpezIwMD09PWUuYm9keS5jb2RlPwovL2lzIHRoaXMgcmVzcG9uc2UgY29tcGxhaW50IHdpdGggdGhlIHNwZWM/CmkoImRlcGxveWVkIik6cyhlLmJvZHkuZGVzYyl9KX0pfX0se2tleToicmVtb3ZlQ29tcG9uZW50Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Ci8vRkxPVy1PVVQ6IHVuLWRlcGxveSBtZXNzYWdlIGZvciB0aGUgaW50ZXJuYWwgU2FuZGJveFJlZ2lzdHJ5IC0+IF9vblJlbW92ZQp2YXIgbz17dHlwZToiZGVsZXRlIixmcm9tOmIuZGVmYXVsdC5FeHRlcm5hbERlcGxveUFkZHJlc3MsdG86Yi5kZWZhdWx0LkludGVybmFsRGVwbG95QWRkcmVzcyxib2R5Ont1cmw6ZX19OwovL3NlbmQgbWVzc2FnZSBpbnRvIHRoZSBzYW5kYm94IGludGVybmFscyBhbmQgd2FpdCBmb3IgcmVwbHkKdC5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKGUpezIwMD09PWUuYm9keS5jb2RlPwovL2lzIHRoaXMgcmVzcG9uc2UgY29tcGxhaW50IHdpdGggdGhlIHNwZWM/CnIoInVuZGVwbG95ZWQiKTpuKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJtYXRjaGVzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsby5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuISh0LmNhcGFiaWxpdGllc1tyXSYmdC5jYXBhYmlsaXRpZXNbcl09PT1lW3JdKX0pO3JldHVybiAwPT09ci5sZW5ndGh8fCFlW3JdfX1dKSxTYW5kYm94fShtLmRlZmF1bHQpKTt0LmRlZmF1bHQ9Un0sLyogNDU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ1NyksZS5leHBvcnRzPXIoMTMpLk9iamVjdC5nZXRQcm90b3R5cGVPZn0sLyogNDU3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBuPXIoNzMpLG89cigxODkpO3IoMTM0KSgiZ2V0UHJvdG90eXBlT2YiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBvKG4oZSkpfX0pfSwvKiA0NTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQ1OSksX19lc01vZHVsZTohMH19LC8qIDQ1OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0NjApLGUuZXhwb3J0cz1yKDEzKS5PYmplY3Quc2V0UHJvdG90eXBlT2Z9LC8qIDQ2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xOSBPYmplY3Quc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pCnZhciBuPXIoMjEpO24obi5TLCJPYmplY3QiLHtzZXRQcm90b3R5cGVPZjpyKDQ2MSkuc2V0fSl9LC8qIDQ2MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLgovKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwp2YXIgbj1yKDQxKSxvPXIoNDApLGk9ZnVuY3Rpb24oZSx0KXtpZihvKGUpLCFuKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCsiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpfTtlLmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/Ly8gZXNsaW50LWRpc2FibGUtbGluZQpmdW5jdGlvbihlLHQsbil7dHJ5e249cig2NSkoRnVuY3Rpb24uY2FsbCxyKDE0MykuZihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsMiksbihlLFtdKSx0PSEoZSBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaChlKXt0PSEwfXJldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBpKGUsciksdD9lLl9fcHJvdG9fXz1yOm4oZSxyKSxlfX0oe30sITEpOnZvaWQgMCksY2hlY2s6aX19LC8qIDQ2MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDYzKSxfX2VzTW9kdWxlOiEwfX0sLyogNDYzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ2NCk7dmFyIG49cigxMykuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0sLyogNDY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIxKTsKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCm4obi5TLCJPYmplY3QiLHtjcmVhdGU6cigxMzgpfSl9LC8qIDQ2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX2NvbXBvbmVudHM6IDx1cmw6IGluc3RhbmNlPgogICovCmZ1bmN0aW9uIFNhbmRib3hSZWdpc3RyeShlKXsoMCxvLmRlZmF1bHQpKHRoaXMsU2FuZGJveFJlZ2lzdHJ5KTt2YXIgdD10aGlzO3QuX2J1cz1lLHQuX2NvbXBvbmVudHM9e30sZS5hZGRMaXN0ZW5lcihTYW5kYm94UmVnaXN0cnkuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGZ1bmN0aW9uKGUpewovL2NvbnNvbGUubG9nKCdTYW5kYm94UmVnaXN0cnktUkNWOiAnLCBtc2cpOwovLyBsZXQgcmVzcG9uc2VNc2cgPSB7Ci8vICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogU2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcywgdG86IFNhbmRib3hSZWdpc3RyeS5FeHRlcm5hbERlcGxveUFkZHJlc3MKLy8gfTsKc3dpdGNoKGUudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uRGVwbG95KGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjp0Ll9vblJlbW92ZShlKX19KX1yZXR1cm4oMCxzLmRlZmF1bHQpKFNhbmRib3hSZWdpc3RyeSxbe2tleToiX3Jlc3BvbnNlTXNnIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206U2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcyx0bzpTYW5kYm94UmVnaXN0cnkuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzfSxvPXt9OwovLyByZXR1cm4gbWVzc2FnZUZhY3RvcnkuY3JlYXRlUmVzcG9uc2UobXNnLCBjb2RlLCB2YWx1ZSk7CnJldHVybiB0JiYoby5jb2RlPXQpLHImJihvLmRlc2M9ciksbi5ib2R5PW8sbn19LHtrZXk6Il9vbkRlcGxveSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5jb25maWcsbj1lLmJvZHkudXJsLG89ZS5ib2R5LnNvdXJjZUNvZGUsaT12b2lkIDAscz12b2lkIDA7aWYodC5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShuKSlpPTUwMCxzPSJJbnN0YW5jZSAiK24rIiBhbHJlYWR5IGV4aXN0ISI7ZWxzZSB0cnl7dC5fY29tcG9uZW50c1tuXT10Ll9jcmVhdGUobixvLHIpLGk9MjAwfWNhdGNoKGUpe2k9NTAwLHM9ZX12YXIgYT10Ll9yZXNwb25zZU1zZyhlLGkscyk7dC5fYnVzLnBvc3RNZXNzYWdlKGEpfX0se2tleToiX29uUmVtb3ZlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnVybCxuPXZvaWQgMCxvPXZvaWQgMDt0Ll9jb21wb25lbnRzLmhhc093blByb3BlcnR5KHIpPygKLy9yZW1vdmUgY29tcG9uZW50IGZyb20gdGhlIHBvb2wgYW5kIGFsbCBsaXN0ZW5lcnMKZGVsZXRlIHQuX2NvbXBvbmVudHNbcl0sdC5fYnVzLnJlbW92ZUFsbExpc3RlbmVyc09mKHIpLG49MjAwKToobj01MDAsbz0iSW5zdGFuY2UgIityKyIgZG9lc24ndCBleGlzdCEiKTt2YXIgaT10Ll9yZXNwb25zZU1zZyhlLG4sbyk7dC5fYnVzLnBvc3RNZXNzYWdlKGkpfX0se2tleToiX2NyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe319LHtrZXk6ImNvbXBvbmVudHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21wb25lbnRzfX1dKSxTYW5kYm94UmVnaXN0cnl9KCk7YS5FeHRlcm5hbERlcGxveUFkZHJlc3M9Imh5cGVydHktcnVudGltZTovL3NhbmRib3gvZXh0ZXJuYWwiLGEuSW50ZXJuYWxEZXBsb3lBZGRyZXNzPSJoeXBlcnR5LXJ1bnRpbWU6Ly9zYW5kYm94L2ludGVybmFsIix0LmRlZmF1bHQ9YSxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig1OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNjcpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNjgpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMjAyKSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiBNaW5pQnVzKCl7cmV0dXJuKDAscy5kZWZhdWx0KSh0aGlzLE1pbmlCdXMpLCgwLGYuZGVmYXVsdCkodGhpcywoTWluaUJ1cy5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoTWluaUJ1cykpLmNhbGwodGhpcykpfS8qKgogICAqIFBvc3QgYSBtZXNzYWdlIGZvciByb3V0aW5nLiBNZXNzYWdlIGlzIHJvdXRlZCBkaXJlY3RseSB0byB0aGUgZXh0ZXJuYWwgcm91dGluZyBfb25Qb3N0TWVzc2FnZS4KICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBpbk1zZyAgICAgICAgICAgIEpTT04gd2l0aCBtYW5kYXRvcnkgTWVzc2FnZSBzdHJ1Y3R1cmUge2lkLCB0eXBlLCBmcm9tLCB0b30KICAgKiBAcGFyYW0gIHtDYWxsYmFja30gcmVzcG9uc2VDYWxsYmFjayBPcHRpb25hbCBjYWxsYmFjayBpZiBhIHJlc3BvbnNlIGlzIGV4cGVjdGVkIGZyb20gdGhlIHJlcXVlc3QuIEEgcmVzcG9uc2Ugd2lsbCBiZSBhbHdheXMgc2VudCwgZXZlbiBpZiBpdCBpcyBhICJUaW1lb3V0Ii4KICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgdGhlIE1lc3NhZ2UgaWQKICAgKi8KcmV0dXJuKDAsZC5kZWZhdWx0KShNaW5pQnVzLGUpLCgwLHUuZGVmYXVsdCkoTWluaUJ1cyxbe2tleToicG9zdE1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzOwovL2Fsd2F5cyBzZW5kIHRvIGV4dGVybmFsICh0byBjb3JlIE1lc3NhZ2VCdXMpCnJldHVybiBuLl9nZW5JZChlKSxuLl9yZXNwb25zZUNhbGxiYWNrKGUsdCxyKSxuLl9vblBvc3RNZXNzYWdlKGUpLGUuaWR9fSx7a2V5OiJfb25NZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCF0Ll9vblJlc3BvbnNlKGUpKXt2YXIgcj10Ll9zdWJzY3JpcHRpb25zW2UudG9dO3I/KHQuX3B1Ymxpc2hPbihyLGUpLGUudG8uc3RhcnRzV2l0aCgiaHlwZXJ0eSIpfHx0Ll9wdWJsaXNoT25EZWZhdWx0KGUpKTp0Ll9wdWJsaXNoT25EZWZhdWx0KGUpfX19XSksTWluaUJ1c30oeS5kZWZhdWx0KTsvKioKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAqKi8KdC5kZWZhdWx0PWgsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzKSxvPW4uSlNPTnx8KG4uSlNPTj17c3RyaW5naWZ5OkpTT04uc3RyaW5naWZ5fSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKcmV0dXJuIG8uc3RyaW5naWZ5LmFwcGx5KG8sYXJndW1lbnRzKX19LC8qIDQ2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSZWdpc3RyeURhdGFNb2RlbChlLHQscixuLGkscyxhLHUsYyl7KDAsby5kZWZhdWx0KSh0aGlzLFJlZ2lzdHJ5RGF0YU1vZGVsKTt2YXIgZj10aGlzO2YuX2lkPWUsZi5fdXJsPXQsZi5fZGVzY3JpcHRvclVSTD1yLGYuX3N0YXJ0aW5nVGltZT1pLGYuX2xhc3RNb2RpZmllZD1zLGYuX3N0YXR1cz1hLGYuX3N0dWJzPXUsZi5fc3R1YnNDb25maWd1cmF0aW9uPWMsZi5fcDJwUmVxdWVzdGVyPW59cmV0dXJuKDAscy5kZWZhdWx0KShSZWdpc3RyeURhdGFNb2RlbCxbe2tleToiaWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19LHtrZXk6ImRlc2NyaXB0b3JVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdG9yVVJMfX0se2tleToicDJwUmVxdWVzdGVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcDJwUmVxdWVzdGVyfX0se2tleToibGFzdE1vZGlmaWVkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFzdE1vZGlmaWVkfX1dKSxSZWdpc3RyeURhdGFNb2RlbH0oKTt0LmRlZmF1bHQ9YSxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigzMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig3KSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDk5KSx5PXIoMjAzKSxoPShfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHkpLGQuZ2V0TG9nZ2VyKCJSZWdpc3RyeSIpKSx2PWZ1bmN0aW9uKCl7LyoqCiAgKiBUbyBpbml0aWFsaXNlIHRoZSBSdW50aW1lIFJlZ2lzdHJ5IHdpdGggdGhlIFJ1bnRpbWVVUkwgdGhhdCB3aWxsIGJlIHRoZSBiYXNpcyB0byBkZXJpdmUgdGhlIGludGVybmFsIHJ1bnRpbWUgYWRkcmVzc2VzIHdoZW4gYWxsb2NhdGluZyBhZGRyZXNzZXMgdG8gaW50ZXJuYWwgcnVudGltZSBjb21wb25lbnQuIEluIGFkZGl0aW9uLCB0aGUgUmVnaXN0cnkgZG9tYWluIGJhY2stZW5kIHRvIGJlIHVzZWQgdG8gcmVtb3RlbHkgcmVnaXN0ZXIgUnVudGltZSBjb21wb25lbnRzLCBpcyBhbHNvIHBhc3NlZCBhcyBpbnB1dCBwYXJhbWV0ZXIuCiAgKiBAcGFyYW0gIHtNZXNzYWdlQnVzfSAgICAgICAgICBtZXNzYWdlQnVzICAgICAgICAgICAgICAgIG1zZ2J1cwogICogQHBhcmFtICB7SHlwZXJ0eVJ1bnRpbWVVUkx9ICAgcnVudGltZVVSTCAgICAgICAgICAgIHJ1bnRpbWVVUkwKICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgICAgICAgIGRvbWFpbiAgICAgICAgcmVtb3RlUmVnaXN0cnkKICAqLwpmdW5jdGlvbiBEb21haW5SZWdpc3RyYXRpb24oZSx0LHIsbil7aWYoKDAsdS5kZWZhdWx0KSh0aGlzLERvbWFpblJlZ2lzdHJhdGlvbiksIWUpdGhyb3cgbmV3IEVycm9yKCJydW50aW1lVVJMIGlzIG1pc3NpbmcuIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJyZWdpc3RyeVVSTCBpcyBtaXNzaW5nLiIpO2lmKCFyKXRocm93IG5ldyBFcnJvcigiZG9tYWluIGlzIG1pc3NpbmcuIik7aWYoIW4pdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlQnVzIGlzIG1pc3NpbmcuIik7dmFyIG89dGhpcztvLnJlZ2lzdHJ5VVJMPXQsby5ydW50aW1lVVJMPWUsby5fcmVnaXN0cmF0aW9uUmV0cmllcz01LC8vIG51bWJlciBvZiBhdHRlbXB0cyB0byByZWdpc3RlciBIeXBlcnRpZXMgYW5kIERhdGFPYmplY3RzIHdoZW4gZXJyb3JzIG9jY3VycwovLyB0aGUgZXhwaXJlcyBpbiAzNjAwLCByZXByZXNlbnRzIDEgaG91cgovL3RoZSBleHBpcmVzIGlzIGluIHNlY29uZHMsIHVuaXQgb2YgbWVhc3VyZSByZWNlaXZlZCBieSB0aGUgZG9tYWluIHJlZ2lzdHJ5Cm8uZXhwaXJlc1RpbWU9MzYwMCxvLl9kb21haW49cixvLl9tZXNzYWdlQnVzPW59LyoqCiAgKiAgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciBhbiBoeXBlcnR5SW5zdGFuY2UgaW4gdGhlIERvbWFpbiBSZWdpc3RyeQogICogIEBwYXJhbSAgIHtTdHJpbmd9ICAgICAgaHlwZXJ0eUluc3RhbmNlICAgSHlwZXJ0eUluc250YW5jZSB1cmwKICAqCiAgKi8KcmV0dXJuKDAsZi5kZWZhdWx0KShEb21haW5SZWdpc3RyYXRpb24sW3trZXk6InVucmVnaXN0ZXJIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InVwZGF0ZSIsZnJvbTp0LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QuX2RvbWFpbixib2R5OntyZXNvdXJjZToiL2h5cGVydHkvIitlLHZhbHVlOiJkaXNjb25uZWN0ZWQiLGF0dHJpYnV0ZToic3RhdHVzIn19O3QuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbihlKXtoLmxvZygiW0RvbWFpblJlZ2lzdHJhdGlvbl0gdW5yZWdpc3RlciBoeXBlcnR5IFJlcGx5IixlKX0pfX0se2tleToidW5yZWdpc3RlckRhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToidXBkYXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrdC5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmUsdmFsdWU6e3N0YXR1czoiZGlzY29ubmVjdGVkIn19fTt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24oZSl7aC5sb2coIltEb21haW5SZWdpc3RyYXRpb25dIHVucmVnaXN0ZXIgZGF0YU9iamVjdCBSZXBseSIsZSl9KX19LHtrZXk6ImRlbGV0ZURhdGFPYmplY3RJbnN0YW5jZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJkZWxldGUiLGZyb206dC5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIit0Ll9kb21haW4sYm9keTp7dmFsdWU6e25hbWU6ZX19fTt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24oZSl7aC5sb2coIltEb21haW5SZWdpc3RyYXRpb25dIHVucmVnaXN0ZXIgZGF0YU9iamVjdCBSZXBseSIsZSl9KX19LHtrZXk6InVwZGF0ZUh5cGVydHlJbnN0YW5jZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e3R5cGU6IlVQREFURSIsZnJvbTpyLnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX2RvbWFpbixib2R5OntyZXNvdXJjZTplLHZhbHVlOnR9fTtyLl9tZXNzYWdlQnVzLnBvc3QucG9zdE1lc3NhZ2UobixmdW5jdGlvbihlKXt9KX19LHtrZXk6InJlZ2lzdGVyRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsaT12b2lkIDAsYT12b2lkIDA7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocyx1KXt2YXIgYz1bXSxmPWUudXJsLnNwbGl0KCI6Iik7Yy5wdXNoKGZbMF0pLDAhPT0oMCxvLmRlZmF1bHQpKHIpLmxlbmd0aCYmKGk9cltuLnJ1bnRpbWVVUkxdLnVybCxhPXAucnVudGltZVV0aWxzLnJ1bnRpbWVEZXNjcmlwdG9yLnAycFJlcXVlc3RlclN0dWIpLGUuc3RhcnRpbmdUaW1lPWUuY3JlYXRlZCxkZWxldGUgZS5hdXRob3Jpc2UsZGVsZXRlIGUuY3JlYXRlZCxkZWxldGUgZS5tdXR1YWwsZGVsZXRlIGUucmVzdW1lLGUuZXhwaXJlc3x8KGUuZXhwaXJlcz1uLmV4cGlyZXNUaW1lKSxlLmRhdGFTY2hlbWVzPWMsaSYmKGUucDJwSGFuZGxlcj1pLGUucDJwUmVxdWVzdGVyPWEpLGUuc3RhdHVzPSJsaXZlIjt2YXIgbD12b2lkIDA7dD8oaC5sb2coIltSZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3RdIHJlZ2lzdGVyaW5nIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBkYXRhIG9iamVjdCBVUkwiLGUpLGw9e3R5cGU6InVwZGF0ZSIsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbi5fZG9tYWluLGZyb206bi5yZWdpc3RyeVVSTCxib2R5OntyZXNvdXJjZTplLnVybCx2YWx1ZTp7c3RhdHVzOiJsaXZlIn19fSk6KGgubG9nKCJbUmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0XSByZWdpc3RlcmluZyBuZXcgZGF0YSBvYmplY3QgVVJMIixlKSxsPXt0eXBlOiJjcmVhdGUiLGZyb206bi5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituLl9kb21haW4sYm9keTp7dmFsdWU6ZSxwb2xpY3k6InBvbGljeSJ9fSk7dHJ5e24uX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllcyhsLG4uX3JlZ2lzdHJhdGlvblJldHJpZXMsZnVuY3Rpb24odCl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3RdID09PT4gcmVnaXN0ZXJEYXRhT2JqZWN0IFJlcGx5OiAnLCByZXBseSk7CjIwMD09PXQuYm9keS5jb2RlP3MoZSk6dSgiZXJyb3Igb24gcmVnaXN0ZXIgRGF0YU9iamVjdCIpfSl9Y2F0Y2goZSl7aC5lcnJvcihlKSx1KGUpfQovL3RpbWVyIHRvIGtlZXAgdGhlIHJlZ2lzdHJhdGlvbiBhbGl2ZQovLyB0aGUgdGltZSBpcyBkZWZpbmVkIGJ5IGEgbGl0dGxlIGxlc3MgdGhhbiBoYWxmIG9mIHRoZSBleHBpcmVzIHRpbWUgZGVmaW5lZApzZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciB0PXt0eXBlOiJ1cGRhdGUiLGZyb206bi5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituLl9kb21haW4sYm9keTp7cmVzb3VyY2U6ZS51cmwsdmFsdWU6e3N0YXR1czoibGl2ZSJ9LG1ldGhvZDoicmVmcmVzaCJ9fTtuLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24oZSl7fSl9LGUuZXhwaXJlcy8xLjEvMioxZTMpfSl9fSx7a2V5OiJyZWdpc3Rlckh5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihuLG8pewovL2Fzc3VtaW5nIGRlc2NyaXB0b3IgY29tZSBpbiB0aGlzIGZvcm1hdCwgdGhlIHNlcnZpY2UtcHJvdmlkZXItZG9tYWluIHVybCBpcyByZXRyaWV2ZWQgYnkgYSBzcGxpdCBpbnN0cnVjdGlvbgovL2h5cGVydHktY2F0YWxvZ3VlOi8vPHNlcnZpY2UtcHJvdmlkZXItZG9tYWluPi88Y2F0YWxvZ3VlLW9iamVjdC1pZGVudGlmaWVyPgovKiAgICAgIGxldCBkb21haW5VcmwgPSBkaXZpZGVVUkwoaHlwZXJ0eS5kZXNjcmlwdG9yVVJMKS5kb21haW47CiAgICAgICAgCiAgICAgICAgICAgICAgaWYgKGRvbWFpblVybC5pbmNsdWRlcygnY2F0YWxvZ3VlJykpIHsKICAgICAgICAgICAgICAgIGRvbWFpblVybCA9IGRvbWFpblVybC5yZXBsYWNlKCdjYXRhbG9ndWUuJywgJycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpcy5yZWdpc3RyeURvbWFpbiA9IGRvbWFpblVybDsqLwp2YXIgaT1yLnJ1bnRpbWVVUkwscz12b2lkIDAsYT1yLmV4cGlyZXNUaW1lLHU9e3VzZXI6ZS51c2VyLmVtYWlsLGRlc2NyaXB0b3I6ZS5kZXNjcmlwdG9yVVJMLHVybDplLmh5cGVydHlVUkwsZXhwaXJlczphLHJlc291cmNlczplLnJlc291cmNlcyxkYXRhU2NoZW1lczplLmRhdGFTY2hlbWVzLHJ1bnRpbWU6aSxzdGF0dXM6ImxpdmUifTsKLy8gc2V0IGEgZGlmZmVyZW50IGV4cGlyZXMgaWYgZGVmaW5lZCBpbiB0aGUgaHlwZXJ0eSBjb25maWd1cmF0aW9uCmUucDJwSGFuZGxlciYmKHUucDJwSGFuZGxlcj1lLnAycEhhbmRsZXIsdS5wMnBSZXF1ZXN0ZXI9ZS5wMnBSZXF1ZXN0ZXIpLAovLyBzZXQgYSBkaWZmZXJlbnQgZXhwaXJlcyB2YWx1ZSBpZiBjb25maWd1cmVkIGluIHRoZSBIeXBlcnR5IGRlc2NyaXB0b3IKZS5kZXNjcmlwdG9yLmNvbmZpZ3VyYXRpb24mJmUuZGVzY3JpcHRvci5jb25maWd1cmF0aW9uLmV4cGlyZXMmJihhPWUuZGVzY3JpcHRvci5jb25maWd1cmF0aW9uLmV4cGlyZXMpLHQ/KAovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSByZWdpc3RlcmluZyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgSHlwZXJ0eSBVUkwnLCBhZGRyZXNzVVJMLmFkZHJlc3NbMF0pOwpzPXt0eXBlOiJ1cGRhdGUiLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX2RvbWFpbixmcm9tOnIucmVnaXN0cnlVUkwsYm9keTp7cmVzb3VyY2U6ZS5oeXBlcnR5VVJMLHZhbHVlOntzdGF0dXM6ImxpdmUiLHVzZXI6ZS51c2VyLmVtYWlsfX19LGUucDJwSGFuZGxlciYmKHMuYm9keS52YWx1ZS5wMnBIYW5kbGVyPWUucDJwSGFuZGxlcixzLmJvZHkudmFsdWUucDJwUmVxdWVzdGVyPWUucDJwUmVxdWVzdGVyKSk6Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIHJlZ2lzdGVyaW5nIG5ldyBIeXBlcnR5IFVSTCcsIGFkZHJlc3NVUkwuYWRkcmVzc1swXSk7Ci8vIHNldCBhIGRpZmZlcmVudCBleHBpcmVzIGlmIGRlZmluZWQgaW4gdGhlIGh5cGVydHkgY29uZmlndXJhdGlvbgovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSByZWdpc3RlcmluZyBuZXcgSHlwZXJ0eSBhdCBkb21haW4gcmVnaXN0cnkgJywgbWVzc2FnZVZhbHVlKTsKcz17dHlwZToiY3JlYXRlIixmcm9tOnIucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrci5fZG9tYWluLGJvZHk6e3ZhbHVlOnUscG9saWN5OiJwb2xpY3kifX07Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIEh5cGVydHkgcmVnaXN0cmF0aW9uIGF0IGRvbWFpbiByZWdpc3RyeSAgLSAnLCBtZXNzYWdlKTsKdHJ5e3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllcyhzLHIuX3JlZ2lzdHJhdGlvblJldHJpZXMsZnVuY3Rpb24odCl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIEh5cGVydHkgcmVnaXN0cmF0aW9uIHJlc3BvbnNlOiAnLCByZXBseSk7CmlmKDIwMD09PXQuYm9keS5jb2RlKXt2YXIgaT17dXJsOmUuaHlwZXJ0eVVSTH07ZS5wMnBIYW5kbGVyJiYoaS5wMnBIYW5kbGVyPWUucDJwSGFuZGxlcixpLnAycFJlcXVlc3Rlcj1lLnAycFJlcXVlc3RlciksbihpKX1lbHNle2lmKDQwNCE9PXQuYm9keS5jb2RlKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIHJlZ2lzdGVyIGFuIEh5cGVydHkgdG8gZG9tYWluOiAiLHQpOwovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBUaGUgdXBkYXRlIHdhcyBub3QgcG9zc2libGUuIFJlZ2lzdGVyaW5nIG5ldyBIeXBlcnR5IGF0IGRvbWFpbiByZWdpc3RyeScpOwpzPXt0eXBlOiJjcmVhdGUiLGZyb206ci5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9kb21haW4sYm9keTp7dmFsdWU6dSxwb2xpY3k6InBvbGljeSJ9fTt0cnl7ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzKHMsci5fcmVnaXN0cmF0aW9uUmV0cmllcyxmdW5jdGlvbih0KXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gSHlwZXJ0eSByZWdpc3RyYXRpb24gdXBkYXRlIHJlc3BvbnNlOiAnLCByZXBseSk7CmlmKDIwMCE9PXQuYm9keS5jb2RlKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIHJlZ2lzdGVyIGFuIEh5cGVydHk6ICIrdCk7dmFyIHI9e3VybDplLmh5cGVydHlVUkx9O2UucDJwSGFuZGxlciYmKHIucDJwSGFuZGxlcj1lLnAycEhhbmRsZXIsci5wMnBSZXF1ZXN0ZXI9ZS5wMnBSZXF1ZXN0ZXIpLG4ocil9KX1jYXRjaChlKXtoLmVycm9yKGUpLG8oZSl9fX0pfWNhdGNoKGUpe2guZXJyb3IoZSksbyhlKX0KLy90aW1lciB0byBrZWVwIHRoZSByZWdpc3RyYXRpb24gYWxpdmUKLy8gdGhlIHRpbWUgaXMgZGVmaW5lZCBieSBhIGxpdHRsZSBsZXNzIHRoYW4gaGFsZiBvZiB0aGUgZXhwaXJlcyB0aW1lIGRlZmluZWQKc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgdD17dHlwZToidXBkYXRlIixmcm9tOnIucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrci5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmUuaHlwZXJ0eVVSTCx2YWx1ZTp7c3RhdHVzOiJsaXZlIn0sbWV0aG9kOiJyZWZyZXNoIn19O3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UodCxmdW5jdGlvbihlKXt9KX0sYS8xLjEvMioxZTMpfSl9fV0pLERvbWFpblJlZ2lzdHJhdGlvbn0oKTt0LmRlZmF1bHQ9dixlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cig3KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1mLmdldExvZ2dlcigiUDJQQ29ubmVjdGlvblJlc29sdmUiKSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUDJQQ29ubmVjdGlvblJlc29sdmUoZSl7KDAscy5kZWZhdWx0KSh0aGlzLFAyUENvbm5lY3Rpb25SZXNvbHZlKTt2YXIgdD10aGlzO3QuX3JlZ2lzdHJ5PWUsdC5fcmVtb3RlUDJQRW50aXRpZXM9e319LyoqCiAgKiBWZXJpZmllcyBpZiByZW1vdGUgRW50aXR5IGNhbiBiZSByZWFjaGVkIHdpdGggYSBQMlAgQ29ubmVjdGlvbi4KICAqIEBwYXJhbSAge1VSTC5VUkx9ICAgICAgICBpbmZvICAgICAgICAgICBvYmplY3QgVVJMCiAgKiBAcmV0dXJuIHtIeXBlcnR5RGF0YU9iamVjdEluc3RhbmNlfSAgYWRkcmVzc1VSTCAgICAgcmV0dXJuIHRoZSBEYXRhIE9iamVjdCBpbnN0YW5jZSByZWdpc3RlcmVkIFVSTCwgcmV0dXJuIHVuZGVmaW5lZCBvdGhlcndpc2UKICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKFAyUENvbm5lY3Rpb25SZXNvbHZlLFt7a2V5OiJjaGVja1AyUCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUuaGFzT3duUHJvcGVydHkoInRvIikpCi8vIHRocm93IEVycm9yKCdUaGUgcDJwIHZlcmlmaWNhdGlvbiB3YXMgZmFpbGVkJyk7CnJldHVybiBvLmRlZmF1bHQucmVqZWN0KCJUaGUgcDJwIHZlcmlmaWNhdGlvbiB3YXMgZmFpbGVkIik7dmFyIHQ9ZS50by5zcGxpdCgiOi8vIilbMF0scj1lLnRvLnNwbGl0KCI6Ly8iKVsxXS5zcGxpdCgiLyIpWzJdLG49dm9pZCAwO249cj9lLnRvLnN1YnN0cmluZygwLGUudG8uaW5kZXhPZigiLyIrcikpOmUudG87dmFyIGk9e307c3dpdGNoKGUuYm9keSYmZS5ib2R5LnAycCYmKGkucDJwPWUuYm9keS5wMnApLGUuYm9keSYmZS5ib2R5LnAycEhhbmRsZXImJmUuYm9keS5wMnBSZXF1ZXN0ZXImJihpLnAycEhhbmRsZXI9ZS5ib2R5LnAycEhhbmRsZXIsaS5wMnBSZXF1ZXN0ZXI9ZS5ib2R5LnAycFJlcXVlc3RlcixpLnJ1bnRpbWU9ZS5ib2R5LnAycEhhbmRsZXIuc3BsaXQoIi9wMnBoYW5kbGVyLyIpWzBdKSx0KXtjYXNlInJ1bnRpbWUiOnJldHVybiB0aGlzLmNoZWNrUDJQUnVudGltZShuLGkpO2RlZmF1bHQ6cmV0dXJuIHRoaXMuY2hlY2tQMlBFbnRpdHkobixpKX19fSx7a2V5OiJjaGVja1AyUEVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9ci5fcmVtb3RlUDJQRW50aXRpZXNbZV07aWYoaSluKGkpO2Vsc2UgaWYodC5ydW50aW1lKW4odCk7ZWxzZSBpZih0LnAycCl7Ci8vIG90aGVyd2lzZSBsb29rIG9uIERvbWFpbiBSZWdpc3RyeQpsLmxvZygiW1JlZ2lzdHJ5IC0gY2hlY2tQMlBFbnRpdHldIC0gc2VhcmNoIGluIERvbWFpbiBSZWdpc3RyeTogIixlKTt2YXIgcz17dHlwZToicmVhZCIsZnJvbTpyLl9yZWdpc3RyeS5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9yZWdpc3RyeS5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmV9fTtyLl9yZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKGUpe2lmKGwubG9nKCJbUmVnaXN0cnkgLSBjaGVja1AyUEVudGl0eV0gRG9tYWluIFJlZ2lzdHJ5IHJlcGx5IixlKSwidmFsdWUiaW4gZS5ib2R5KXsKLy90b2RvOiBzdG9yZSByZXRyaWV2ZWQgZW50aXR5CnZhciB0PWUuYm9keS52YWx1ZTt0Lmhhc093blByb3BlcnR5KCJwMnBIYW5kbGVyIik/bih0KTpvKCJbUmVnaXN0cnkgY2hlY2tQMlBFbnRpdHldIEh5cGVydHkgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLGUuYm9keS52YWx1ZSl9ZWxzZSBvKCJbUmVnaXN0cnkgY2hlY2tQMlBFbnRpdHldIEh5cGVydHkgd2l0aCBQMlBIYW5kbGVyIG5vdCBmb3VuZCIsZS5ib2R5LmNvZGUpfSl9ZWxzZSBvKCJbUmVnaXN0cnkgY2hlY2tQMlBFbnRpdHldIE5vIFAyUCBDb25uZWN0aW9uIGF2YWlsYWJsZSBmb3IgIixlKX0pfX0se2tleToiY2hlY2tQMlBSdW50aW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17fTsKLy8gbG9vayBvbiBsb2NhbGx5IHN0b3JlZCBwMnAgY29ubmVjdGlvbnMKcmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtyLl9yZWdpc3RyeS5wMnBDb25uZWN0aW9uTGlzdFtlXT9vKHtydW50aW1lOmV9KTp0LnJ1bnRpbWU/KG49dCxvKG4pKTppKCJbUmVnaXN0cnkuUDJQQ29ubmVjdGlvblJlc29sdmUuY2hlY2tQMlBSdW50aW1lXSBObyBQMlAgQ29ubmVjdGlvbiBmb3VuZCB0byAiLGUpfSl9fSx7a2V5OiJjaGVja1AyUEh5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXZvaWQgMDsKLy8gbG9vayBvbiBsb2NhbGx5IHN0b3JlZCBoeXBlcnRpZXMKZm9yKHZhciBzIGluIHIuX3JlZ2lzdHJ5LnJlbW90ZUh5cGVydHlMaXN0KQovLyB0b2RvOiBjaGFuZ2UgdG8gImh5cGVydHkudXJsIiB0byBiZSBhbGlnbmVkIHdpdGggaHlwZXJ0eSBpbnN0YW5jZSBkYXRhIG1vZGVsIHNwZWMKaWYoaT1yLl9yZWdpc3RyeS5yZW1vdGVIeXBlcnR5TGlzdFtzXSxsLmxvZygiW1JlZ2lzdHJ5IC0gY2hlY2tQMlBIeXBlcnR5XSAtIGZvciBlYWNoIEh5cGVydHk6ICIsaSksaS5oeXBlcnR5SUQ9PT1lKXJldHVybiB2b2lkKGkuaGFzT3duUHJvcGVydHkoInAycEhhbmRsZXIiKT9uKGkpOm8oIltSZWdpc3RyeSBjaGVja1AyUEh5cGVydHldIEh5cGVydHkgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLGkpKTtpZighaSYmdC5ydW50aW1lKW4odCk7ZWxzZSBpZighaSYmdC5wMnApewovLyBvdGhlcndpc2UgbG9vayBvbiBEb21haW4gUmVnaXN0cnkKbC5sb2coIltSZWdpc3RyeSAtIGNoZWNrUDJQSHlwZXJ0eV0gLSBzZWFyY2ggaW4gRG9tYWluIFJlZ2lzdHJ5OiAiLGkpO3ZhciBhPXt0eXBlOiJyZWFkIixmcm9tOnIuX3JlZ2lzdHJ5LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX3JlZ2lzdHJ5Ll9kb21haW4sYm9keTp7cmVzb3VyY2U6ZX19O3IuX3JlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24oZSl7aWYobC5sb2coIltSZWdpc3RyeSAtIGNoZWNrUDJQSHlwZXJ0eV0gRG9tYWluIFJlZ2lzdHJ5IHJlcGx5IixlKSwidmFsdWUiaW4gZS5ib2R5KXsKLy90b2RvOiBzdG9yZSByZXRyaWV2ZWQgaHlwZXJ0eQp2YXIgdD1lLmJvZHkudmFsdWU7ci5fcmVnaXN0cnkucmVtb3RlSHlwZXJ0eUxpc3QucHVzaCh0KSx0Lmhhc093blByb3BlcnR5KCJwMnBIYW5kbGVyIik/bih0KTpvKCJbUmVnaXN0cnkgY2hlY2tQMlBIeXBlcnR5XSBIeXBlcnR5IGZvdW5kIGRvZXMgbm90IHN1cHBvcnQgUDJQIixlLmJvZHkudmFsdWUpfWVsc2UgbygiW1JlZ2lzdHJ5IGNoZWNrUDJQSHlwZXJ0eV0gSHlwZXJ0eSB3aXRoIFAyUEhhbmRsZXIgbm90IGZvdW5kIixlLmJvZHkuY29kZSl9KX1lbHNlIG8oIltSZWdpc3RyeSBjaGVja1AyUEh5cGVydHldIE5vIFAyUCBDb25uZWN0aW9uIGF2YWlsYWJsZSBmb3IgIixlKX0pfX0se2tleToiY2hlY2tQMlBEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXsKLy8gbG9vayBvbiBsb2NhbGx5IHN0b3JlZCBSZW1vdGUgRGF0YSBPYmplY3RzCnZhciBpPXIuX3JlZ2lzdHJ5LnJlbW90ZURhdGFPYmplY3RMaXN0LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gci5fcmVnaXN0cnkucmVtb3RlRGF0YU9iamVjdExpc3RbdF0udXJsPT09ZX0pO2lmKDAhPT1pLmxlbmd0aCYmaVswXS5wMnBSZXF1ZXN0ZXIpbihpWzBdKTtlbHNlIGlmKDAhPT1pLmxlbmd0aClvKCJbUmVnaXN0cnkgY2hlY2tQMlBEYXRhT2JqZWN0XSBEYXRhIE9iamVjdCBmb3VuZCBkb2VzIG5vdCBzdXBwb3J0IFAyUCIsaVswXSk7ZWxzZSBpZigwPT09aS5sZW5ndGgmJnQucnVudGltZSluKHQpO2Vsc2UgaWYoaS5sZW5ndGgmJnQucDJwKXsKLy8gb3RoZXJ3aXNlIGxvb2sgb24gRG9tYWluIFJlZ2lzdHJ5Ci8vIGxvb2sgb24gRG9tYWluIFJlZ2lzdHJ5CnZhciBzPXt0eXBlOiJyZWFkIixmcm9tOnIuX3JlZ2lzdHJ5LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX3JlZ2lzdHJ5Ll9kb21haW4sYm9keTp7cmVzb3VyY2U6ZX19O3IuX3JlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24oZSl7aWYobC5sb2coImRpc2NvdmVyIGRhdGEgb2JqZWN0IHBlciB1cmwgcmVwbHkiLGUpLCJ2YWx1ZSJpbiBlLmJvZHkpewovL3RvZG86IHN0b3JlIHJldHJpZXZlZCBoeXBlcnR5CnZhciB0PWUuYm9keS52YWx1ZTtyLl9yZWdpc3RyeS5yZW1vdGVEYXRhT2JqZWN0TGlzdC5wdXNoKHQpLHQucDJwUmVxdWVzdGVyP24odCk6bygiW1JlZ2lzdHJ5IGNoZWNrUDJQRGF0YU9iamVjdF0gRGF0YSBPYmplY3QgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLGUuYm9keS52YWx1ZSl9ZWxzZSBvKCJbUmVnaXN0cnkgY2hlY2tQMlBEYXRhT2JqZWN0XSBub3QgZm91bmQiLGUuYm9keS5jb2RlKX0pfWVsc2UgbygiW1JlZ2lzdHJ5IGNoZWNrUDJQRGF0YU9iamVjdF0gbm8gUDJQIENvbm5lY3Rpb24gZm91bmQiKX0pfX0se2tleToiYWRkUmVtb3RlUDJQRW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3JlbW90ZVAyUEVudGl0aWVzW2VdPXR9fSx7a2V5OiJyZW1vdmVSZW1vdGVQMlBFbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9yZW1vdGVQMlBFbnRpdGllc1tlXX19LHtrZXk6InJlY29ubmVjdFAyUFJlcXVlc3RlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbC5sb2coIltQMlBDb25lbmN0aW9uUmVzb2x2ZS5yZWNvbm5lY3RQMlBSZXF1ZXN0ZXJdIGxldHMgdHJ5IHRvIHJlY29ubmVjdCBQMlAgUmVxdWVzdGVyIFN0dWI6ICIsZSksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPWUucnVudGltZSxpPXt0eXBlOiJleGVjdXRlIixmcm9tOnQuX3JlZ2lzdHJ5LnJlZ2lzdHJ5VVJMLHRvOmUudXJsLGJvZHk6e21ldGhvZDoiY29ubmVjdCIscGFyYW1zOltlLnAycEhhbmRsZXJdfX07Ci8vIGxldHMgcHJlcGFyZSB0aGUgcDJwUmVxdWVzdGVyU1R1YiByZWNvbm5lY3QgYnkgc2V0dGluZyBhbiBvYnNlcnZlciB0byBpdHMgc3RhdHVzIGNoYW5nZXMKdC5fcmVnaXN0cnkud2F0Y2hpbmdZb3Uub2JzZXJ2ZSgicDJwUmVxdWVzdGVyU3R1YiIsZnVuY3Rpb24oZSl7aWYobC5sb2coIltQMlBDb25lbmN0aW9uUmVzb2x2ZS5yZWNvbm5lY3RQMlBSZXF1ZXN0ZXJdIHAycFJlcXVlc3RlclN0dWJzIGNoYW5nZWQgIit0Ll9yZWdpc3RyeS5wMnBSZXF1ZXN0ZXJTdHViKSxlLmtleXBhdGguc3BsaXQoIi4iKVswXT09PW8mJiJzdGF0dXMiPT09ZS5uYW1lKXN3aXRjaChlLm5ld1ZhbHVlKXtjYXNlImxpdmUiOmwubG9nKCJbUDJQQ29uZW5jdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyXSBwMnBSZXF1ZXN0ZXIgaXMgbGl2ZSAiK3QuX3JlZ2lzdHJ5LnAycFJlcXVlc3RlclN0dWJbb10pLHIodC5fcmVnaXN0cnkucDJwUmVxdWVzdGVyU3R1YltvXS51cmwpO2JyZWFrO2Nhc2UiZmFpbGVkIjpsLmxvZygiW1AyUENvbmVuY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3Rlcl0gcDJwUmVxdWVzdGVyIHJlY29ubmVjdCBmYWlsZWQgIit0Ll9yZWdpc3RyeS5wMnBSZXF1ZXN0ZXJTdHViW29dKSxuKCJQMlAgUmVxdWVzdGVyIHJlY29ubmVjdCBmYWlsZWQiKX19KSwKLy8gIHN0dWIgbG9hZAp0Ll9yZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpe2wubG9nKCJbUDJQQ29uZW5jdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyXSByZWNvbm5lY3QgcmVxdWVzdCByZXBseSIsZSl9KX0pfX1dKSxQMlBDb25uZWN0aW9uUmVzb2x2ZX0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gICAgIHByb3h5LW9ic2VydmUgdjAuMC4xOAovLyAgICAgQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE2IFNpbW9uIFkuIEJsYWNrd2VsbCwgQW55V2hpY2hXYXkKLy8gICAgIE1JVCBMaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gT2JzZXJ2ZXIoZSx0LHIsbixvLGkpe2Z1bmN0aW9uIGRlbGl2ZXIoZSxuKXtpZihkZWxpdmVyLmRlbGF5PW4sIWRlbGl2ZXIucGF1c2UmJmEuY2hhbmdlc2V0Lmxlbmd0aD4wKXtpZighZSl7dmFyIG89YS5jaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFyfHxyLmluZGV4T2YoZS50eXBlKT49MH0pO28ubGVuZ3RoPjAmJnQobyl9YS5jaGFuZ2VzZXQ9W119fXZhciBzLGE9dGhpczsKLy8gX19vYnNlcnZlckNhbGxiYWNrc19fIGlzIHVzZWQgYXMgYW4gaW5kZXggdG8gZ2V0IGF0IHRoZSBwcm94eSB3aGljaCBpcyB0aGUgb2JzZXJ2ZXIsIHNvIHdlIGNhbiB1bm9ic2VydmUKcmV0dXJuIGRlbGl2ZXIucGF1c2U9byxkZWxpdmVyLmRlbGF5PWksYS5nZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4iX19vYnNlcnZlcl9fIj09PXQ/YToidW5vYnNlcnZlIj09PXQ/ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LnVub2JzZXJ2ZShlKSxlfToiZGVsaXZlciI9PT10P2RlbGl2ZXI6ZVt0XX0sYS50YXJnZXQ9ZSxhLmNoYW5nZXNldD1bXSxhLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX198fChPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19vYnNlcnZlckNhbGxiYWNrc19fIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITEsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19vYnNlcnZlcnNfXyIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSkpLGEudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKHQpLGEudGFyZ2V0Ll9fb2JzZXJ2ZXJzX18ucHVzaCh0aGlzKSxzPW5ldyBQcm94eShlLGEpLGRlbGl2ZXIoITEsaSksc30KLy8gQ3JlYXRlcyBhbmQgcmV0dXJucyBhIFByb3h5IHdyYXBwaW5nIGEgdGFyZ2V0IHNvIHRoYXQgYWxsIGNoYW5nZXMgY2FuIGJlIHRyYXBwZWQgYW5kIGZvcndhcmRlZCB0bwovLyBhIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgdGFrZXMgYW4gYXJyYXkgb2YgY2hhbmdlcyBqdXN0IGxpa2UgdGhlIHRyYWRpdGlvbmFsIG9yaWdpbmFsIENocm9tZSBPYmplY3Qub2JzZXJ2ZQovLyB7b2JqZWN0OjxvYmplY3QgY2hhbmdlZD4sbmFtZTo8ZmllbGQgY2hhbmdlZD4sdHlwZTphZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUsb2xkVmFsdWU6PG9sZCB2YWx1ZSBpZiB1cGRhdGUgfCBkZWxldGU+fQovLyBUaGUgYWNjZXB0bGlzdCBjYW4gYmUgYWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLgovLyB2IDAuMC4xMCB0byBzdXBwb3J0IHBhdXNpbmcgYW5kIHJlc3RhcnRpbmcgb2JzZXJ2YXRpb24gdHdvIGFkZGl0aW9uYWwgY29uc3RydWN0b3IgYXJndW1lbnRzIGFyZSBhdmFpbGFibGUgdG8gT2JqZWN0Lm9ic2VydmU6Ci8vIHBhdXNhYmxlIC0gY3JlYXRlIHRoZSBPYnNlcnZlciBzbyBpdCBjYW4gYmUgcGF1c2VkCi8vIHBhdXNlIC0gY3JlYXRlIG9ic2VydmVyIGluIHBhdXNlZCBzdGF0ZQovLyBpZiBwYXVzYWJsZSBpcyB0cnVlIHRoZW4gYW4gYWRkaXRpb25hbCBtZXRob2QgZGVsaXZlcihpZ25vcmVQcmV2aW91cykgaXMgYXZhaWxhYmxlIHRvIHN0YXJ0IGRlbGl2ZXJ5Ci8vIHRvIHBhdXNlIGRlbGl2ZXJ5IHNldCBhIHByb3BlcnR5IGNhbGxlZCBwYXVzZSBvbiB0aGUgZnVuY3Rpb24gZGVsaXZlciB0byB0cnVlCi8vIHBhdXNhYmxlIGlzIG9wdGlvbmFsIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mIHNoYWRvd2luZyBhIHByb3BlcnR5IG9yIG1ldGhvZCBvbiBhbnkgZXhpc3RpbmcgY29kZSBjYWxsZWQgZGVsaXZlcgpPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIFByb3h5fHwoT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGl2ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQobnVsbCwiZGVsaXZlciIpfSxPYnNlcnZlci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCxyKXsvLyAsIHJlY2VpdmVyCnZhciBuPWVbdF0sbz12b2lkIDA9PT1uPyJhZGQiOiJ1cGRhdGUiO2lmKGVbdF09cixlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmKCF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKG8pPj0wKSl7dmFyIGk9e29iamVjdDplLG5hbWU6dCx0eXBlOm99LHM9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxhPXRoaXMuZGVsaXZlcigpOyJ1cGRhdGUiPT09byYmKGkub2xkVmFsdWU9biksdGhpcy5jaGFuZ2VzZXQucHVzaChpKSxzJiZhKCExLCJudW1iZXIiPT10eXBlb2YgYS5kZWxheT9hLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGV0ZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVt0XTtpZigKLy9pZih0eXBlb2Yob2xkdmFsdWUpIT09InVuZGVmaW5lZCIpIHsKZGVsZXRlIGVbdF0sZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJkZWxldGUiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOiJkZWxldGUiLG9sZFZhbHVlOnJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSwibnVtYmVyIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9Ci8vfQpyZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCxyKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHIpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicmVjb25maWd1cmUiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOiJyZWNvbmZpZ3VyZSJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSwibnVtYmVyIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5zZXRQcm90b3R5cGVPZj1mdW5jdGlvbihlLHQpe3ZhciByPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihPYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInNldFByb3RvdHlwZSIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZToiX19wcm90b19fIix0eXBlOiJzZXRQcm90b3R5cGUiLG9sZFZhbHVlOnJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSwibnVtYmVyIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5wcmV2ZW50RXh0ZW5zaW9ucz1mdW5jdGlvbihlKXtpZihPYmplY3QucHJldmVudEV4dGVuc2lvbnMoZSksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJwcmV2ZW50RXh0ZW5zaW9ucyIpPj0wKXt2YXIgdD17b2JqZWN0OmUsdHlwZToicHJldmVudEV4dGVuc2lvbnMifSxyPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsbj10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKHQpLHImJm4oITEsIm51bWJlciI9PXR5cGVvZiBuLmRlbGF5P24uZGVsYXk6MTApfXJldHVybiEwfSxPYmplY3Qub2JzZXJ2ZT1mdW5jdGlvbihlLHQscixuLG8saSl7cmV0dXJuIG5ldyBPYnNlcnZlcihlLHQscixuLG8saSl9LE9iamVjdC51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyl7aWYoIXQpcmV0dXJuIGUuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZSgwLGUuX19vYnNlcnZlckNhbGxiYWNrc19fLmxlbmd0aCksdm9pZCBlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyc19fLmxlbmd0aCk7ZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihyLG4pe3Q9PT1yJiYoZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKG4sMSksZGVsZXRlIGUuX19vYnNlcnZlcnNfX1tuXS5jYWxsYmFjayxlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKG4sMSkpfSl9fSxBcnJheS5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4sbyxpKXtpZighKGUgaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShlKSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7cj1yfHxbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInNwbGljZSJdO3ZhciBzPW5ldyBQcm94eShlLHtnZXQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4idW5vYnNlcnZlIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIGU/T2JqZWN0LnVub2JzZXJ2ZSh0LGUpOnQudW5vYnNlcnZlKCl9OiJzcGxpY2UiPT09bj9mdW5jdGlvbihuLG8pe2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiBvKXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IHR3byBhcmd1bWVudHMgdG8gQXJyYXkgc3BsaWNlIGFyZSBub3QgbnVtYmVyLCBudW1iZXIiKTt2YXIgaT10aGlzLnNsaWNlKG4sbitvKSxzPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHMubGVuZ3RoLTI6MCx1PXtvYmplY3Q6ZSx0eXBlOiJzcGxpY2UiLGluZGV4Om4scmVtb3ZlZDppLGFkZGVkQ291bnQ6c307aWYodC5zcGxpY2UuYXBwbHkodCxhcmd1bWVudHMpLHIuaW5kZXhPZigic3BsaWNlIik+PTApe3ZhciBuPTA9PT1hLl9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoLGM9YS5fX29ic2VydmVyX18uZGVsaXZlcigpO2EuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5wdXNoKHUpLG4mJmMoITEsIm51bWJlciI9PXR5cGVvZiBjLmRlbGF5P2MuZGVsYXk6MTApfX06InB1c2giPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgsMCxlKX06InBvcCI9PT1uP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLTEsMSl9OiJ1bnNoaWZ0Ij09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxlKX06InNoaWZ0Ij09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwxKX06dFtuXX19KSxhPU9iamVjdC5vYnNlcnZlKHMsZnVuY3Rpb24oZSl7dmFyIG49ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuImxlbmd0aCIhPT1lLm5hbWUmJiJhZGQiIT09ZS5uYW1lJiYoIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wKX0pO24ubGVuZ3RoPjAmJnQobil9LHIsbixvLGkpO3JldHVybiBhfSxBcnJheS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS51bm9ic2VydmUodCl9KSxPYmplY3QuZGVlcE9ic2VydmU9ZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIHJlb2JzZXJ2ZShlLHIpe09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obyl7aWYoKCJvYmplY3QiPT09bihlW29dKXx8ImFycmF5Ij09PW4oZVtvXSkpJiYhZVtvXS5oYXNPd25Qcm9wZXJ0eSgiX19vYnNlcnZlcnNfXyIpKXt2YXIgaT1yLnNsaWNlKDApO2kucHVzaChvKSxlW29dPU9iamVjdC5kZWVwT2JzZXJ2ZShlW29dLHQsaSl9fSl9cj1yfHxbXTt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKGUpLm1hdGNoKC9ccyhbYS16QS1aXSspLylbMV0udG9Mb3dlckNhc2UoKX07cmV0dXJuIHJlb2JzZXJ2ZShlLHIpLE9iamVjdC5vYnNlcnZlKGUsZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcmVjdXJzZShlLHQscixvLGkpe2lmKG8gaW5zdGFuY2VvZiBPYmplY3Qpe09iamVjdC5rZXlzKG8pLmZvckVhY2goZnVuY3Rpb24ocyl7aWYoIXJ8fHJbc10hPT1vW3NdKXt2YXIgYT1yJiZ2b2lkIDAhPT1yW3NdP3Jbc106dm9pZCAwLHU9dm9pZCAwPT09YT8iYWRkIjoidXBkYXRlIixjPWkrIi4iK3M7bi5wdXNoKHtuYW1lOmUsb2JqZWN0OnQsdHlwZTp1LG9sZFZhbHVlOmEsbmV3VmFsdWU6b1tzXSxrZXlwYXRoOmN9KSxyZWN1cnNlKGUsdCxhLG9bc10sYyl9fSl9ZWxzZSBpZihyIGluc3RhbmNlb2YgT2JqZWN0KXt2YXIgcz1PYmplY3Qua2V5cyhyKTtzLmZvckVhY2goZnVuY3Rpb24ocyl7dmFyIGE9bnVsbD09PW8/InVwZGF0ZSI6ImRlbGV0ZSIsdT1pKyIuIitzO24ucHVzaCh7bmFtZTplLG9iamVjdDp0LHR5cGU6YSxvbGRWYWx1ZTpyW3NdLG5ld1ZhbHVlOm8sa2V5cGF0aDp1fSkscmVjdXJzZShlLHQscltzXSx2b2lkIDAsdSl9KX19dmFyIG49W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PShyLmxlbmd0aD4wP3Iuam9pbigiLiIpKyIuIjoiIikrZS5uYW1lOyJ1cGRhdGUiIT09ZS50eXBlJiYiYWRkIiE9PWUudHlwZXx8cmVvYnNlcnZlKGUub2JqZWN0LHIpLG4ucHVzaCh7bmFtZTplLm5hbWUsb2JqZWN0OmUub2JqZWN0LHR5cGU6ZS50eXBlLG9sZFZhbHVlOmUub2xkVmFsdWUsbmV3VmFsdWU6ZS5vYmplY3RbZS5uYW1lXSxrZXlwYXRoOnR9KSxyZWN1cnNlKGUubmFtZSxlLm9iamVjdCxlLm9sZFZhbHVlLGUub2JqZWN0W2UubmFtZV0sdCl9KSx0KG4pfSl9fSgpfSwvKiA0NzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cig3KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1yKDE0KSxkPXIoMTQ0KSxwPXIoMjA1KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDQ3Nyksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9Zi5nZXRMb2dnZXIoIklkZW50aXR5TW9kdWxlIiksYj1mdW5jdGlvbigpey8qKgogICogVGhpcyBpcyB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGlzZSB0aGUgSWRlbnRpdHkgTW9kdWxlIGl0IGRvZXMgbm90IHJlcXVpcmUgYW55IGlucHV0LgogICovCmZ1bmN0aW9uIElkZW50aXR5TW9kdWxlKGUsdCxyLG4sbyxpKXsoMCxzLmRlZmF1bHQpKHRoaXMsSWRlbnRpdHlNb2R1bGUpO3ZhciBhPXRoaXM7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJydW50aW1lVVJMIGlzIG1pc3NpbmcuIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJzdG9yYWdlTWFuYWdlciBpcyBtaXNzaW5nIik7aWYoIW8pdGhyb3cgbmV3IEVycm9yKCJjcnlwdG9NYW5hZ2VyIGlzIG1pc3NpbmciKTtpZighaSl0aHJvdyBuZXcgRXJyb3IoInJ1bnRpbWVDYXRhbG9ndWUgaXMgbWlzc2luZyIpO2EuX3J1bnRpbWVVUkw9ZSxhLl9ydW50aW1lQ2F0YWxvZ3VlPWksYS5kYXRhT2JqZWN0c1N0b3JhZ2U9bixhLl9pZG1VUkw9YS5fcnVudGltZVVSTCsiL2lkbSIsYS5fZ3VpVVJMPWEuX3J1bnRpbWVVUkwrIi9pZGVudGl0eS1ndWkiLGEucnVudGltZUNhcGFiaWxpdGllcz10LGEuX2RvbWFpbj0oMCxsLmRpdmlkZVVSTCkoYS5fcnVudGltZVVSTCkuZG9tYWluLAovL3RvIHN0b3JlIGl0ZW1zIHdpdGggdGhpcyBmb3JtYXQ6IHtpZGVudGl0eTogaWRlbnRpdHlVUkwsIHRva2VuOiB0b2tlbklEfQphLl9pZGVudGl0aWVzPW5ldyB5LmRlZmF1bHQoImh1bWFuIixyKSwKLy8gdG8gYmUgcmV2aWV3ZWQ6IHdhdGNoaW5nWW91IGlkZW50aXRpZXNMaXN0IG9yIGlkZW50aXRpZXM/Ci8vICAgIF90aGlzLmlkZW50aXRpZXNMaXN0ID0gX3RoaXMud2F0Y2hpbmdZb3Uud2F0Y2goJ2lkZW50aXRpZXNMaXN0Jywge30sIHRydWUpOwphLl9jcnlwdG89bywvKiAgICBfdGhpcy5lbWFpbHNMaXN0ID0gW107CiAgICBsZXQgbmV3SWRlbnRpdHkgPSBuZXcgSWRlbnRpdHkoJ2d1aWQnLCAnSFVNQU4nKTsKICAgIF90aGlzLmlkZW50aXR5ID0gbmV3SWRlbnRpdHk7CiAgICBfdGhpcy5jdXJyZW50SWRlbnRpdHk7CiAgICBfdGhpcy5pZGVudGl0aWVzLmRlZmF1bHRJZGVudGl0eTsqLwovL3N0b3JlcyB0aGUgYXNzb2NpYXRpb24gb2YgdGhlIGRhdGFPYmplY3QgYW5kIHRoZSBIeXBlcnR5IHJlZ2lzdGVyZWQgd2l0aGluCmEuZGF0YU9iamVjdHNJZGVudGl0eT17fSwvLyBpcyB0aGlzIG5lZWRlZD8KYS5fbGlzdE9mSWRwcz1bXSwKLy8gdmFyaWFibGUgdG8ga25vdyBpZiB0aGUgR1VJIGlzIGRlcGxveWVkIHRvIGNob29zZSB0aGUgaWRlbnRpdHkuIGlmIHRoZSByZWFsIEdVSSBpcyBub3QgZGVwbG95ZWQsIGEgZmFrZSBndWkgaXMgZGVwbG95ZWQgaW5zdGVhZC4KYS5ndWlEZXBsb3llZD0hMX0KLy8qKioqKioqKioqKioqKioqKioqIEdFVCBBTkQgU0VUIE1FVEhPRFMgKioqKioqKioqKioqKioqKioqKgovKioKICAqIHJldHVybiB0aGUgbWVzc2FnZUJ1cyBpbiB0aGlzIFJlZ2lzdHJ5CiAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzCiAgKi8KcmV0dXJuKDAsdS5kZWZhdWx0KShJZGVudGl0eU1vZHVsZSxbe2tleToiZ2V0SWRlbnRpdHkiLAovLyoqKioqKioqKioqKioqKioqKiogSURFTlRJVFkgUkVMRUFURUQgTUVUSE9EUyAqKioqKioqKioqKioqKioqKioqCi8qKgogICAgKiBnZXRzIGFsbCB0aGUgaW5mb3JtYXRpb24gZnJvbSBhIGdpdmVuIHVzZXJVUkwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgdXNlclVSTCAgICAgdXNlciB1cmwKICAgICogQHJldHVybiB7SlNPTn0gICAgaWRlbnRpdHkgICAgaWRlbnRpdHkgYnVuZGxlIGZyb20gdGhlIHVzZXJVUkwKICAgICovCnZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmlkZW50aXRpZXMuZ2V0SWRlbnRpdHkoZSl9fSx7a2V5OiJnZXRJZGVudGl0aWVzVG9DaG9vc2UiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczsKLy8gICAgbGV0IGlkZW50aXRpZXMgPSBfdGhpcy5pZGVudGl0aWVzLmlkZW50aWZpZXJzOwovLyBsZXQgaWRwcyA9IFsKLy8gICB7IGRvbWFpbjogJ2dvb2dsZS5jb20nLCB0eXBlOiAnaWRUb2tlbid9LAovLyAgIHsgZG9tYWluOiAnbWljcm9zb2Z0LmNvbScsIHR5cGU6ICdpZFRva2VuJ30sCi8vICAgeyBkb21haW46ICdvcmFuZ2UuZnInLCB0eXBlOiAnaWRUb2tlbid9LAovLyAgIHsgZG9tYWluOiAnc2xhY2suY29tJywgdHlwZTogJ0xlZ2FjeSd9Ci8vIF07Ci8vIHRvZG86IHJldHJpZXZlIGF2YWlsYWJsZSBpZHBzIGZyb20gcnVudGltZSBjYXRhbG9ndWUKLy8gdG9kbzogZW5hYmxlIG9hdXRoIGlkcHMKLy8gbGV0IGlkcHMgPSBbCi8vICAgeyBkb21haW46ICdnb29nbGUuY29tJywgdHlwZTogJ2lkVG9rZW4nIH0sCi8vICAgeyBkb21haW46ICdtaWNyb3NvZnQuY29tJywgdHlwZTogJ2lkVG9rZW4nIH0sCi8vICAgeyBkb21haW46ICdmYWNlYm9vay5jb20nLCB0eXBlOiAnaWRUb2tlbicgfSwKLy8gICB7IGRvbWFpbjogJ3NsYWNrLmNvbScsIHR5cGU6ICdpZFRva2VuJyB9Ci8vIF07CnJldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQpe3ZhciByPWQucnVudGltZUNvbmZpZ3VyYXRpb24uY2F0YWxvZ3VlVVJMcy5pZHBQcm94eS5wcmVmaXgrZS5fZG9tYWluK2QucnVudGltZUNvbmZpZ3VyYXRpb24uY2F0YWxvZ3VlVVJMcy5pZHBQcm94eS5zdWZmaXg7by5kZWZhdWx0LmFsbChbZS5ydW50aW1lQ2FwYWJpbGl0aWVzLmlzQXZhaWxhYmxlKCJicm93c2VyIiksZS5ydW50aW1lQ2FwYWJpbGl0aWVzLmlzQXZhaWxhYmxlKCJub2RlIildKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBvPW5bMF0saT1uWzFdLHM9e2NvbnN0cmFpbnRzOnt9fTtzLmNvbnN0cmFpbnRzLm5vZGU9aSxzLmNvbnN0cmFpbnRzLmJyb3dzZXI9byxlLl9ydW50aW1lQ2F0YWxvZ3VlLmdldFR5cGVMaXN0KHIscykudGhlbihmdW5jdGlvbihyKXt2YXIgbj1yLm1hcChmdW5jdGlvbihlKXtyZXR1cm57ZG9tYWluOmUsdHlwZToiaWRUb2tlbiJ9fSk7cmV0dXJuIGcuaW5mbygiW0lkZW50aXR5TW9kdWxlLmdldElkZW50aXR5QXNzZXJ0aW9uOmdldElkZW50aXRpZXNUb0Nob29zZV0iLHIsbiksZS5fbGlzdE9mSWRwcz1uLHQoe2RlZmF1bHRJZGVudGl0eTplLmlkZW50aXRpZXMuZGVmYXVsdElkZW50aXR5LGlkZW50aXRpZXM6ZS5pZGVudGl0aWVzLmlkZW50aXRpZXMsaWRwczpufSl9KX0pfSl9fSx7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCl7ZS5faWRlbnRpdGllcy5sb2FkSWRlbnRpdGllcygpLnRoZW4oZnVuY3Rpb24oKXtlLl9jcnlwdG8uZ2V0TXlQdWJsaWNLZXkoKS50aGVuKGZ1bmN0aW9uKHIpe2UuX2NyeXB0by5jcnlwdG8uX3NoYTI1NigoMCxsLnN0cmluZ2lmeSkocikpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49InVzZXItZ3VpZDovLyIrcjtlLmlkZW50aXRpZXMuZ3VpZD1uLGUuX2lkZW50aXRpZXMubG9hZEFjY2Vzc1Rva2VucygpLnRoZW4oZnVuY3Rpb24oKXt0KCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe30pfSl9KX0pfX0se2tleToiZ2V0SWRlbnRpdHlBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe2cubG9nKCJbSWRlbnRpdHlNb2R1bGUuZ2V0SWRlbnRpdHlBc3NlcnRpb246aWRlbnRpdHlCdW5kbGVdIixlKTt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Ci8vQ0hFQ0sgd2hldGhlciBpcyBicm93c2VyIGVudmlyb25tZW50IG9yIG5vZGVqcwovL2lmIGl0IGlzIGJyb3dzZXIsIHRoZW4gY3JlYXRlIGEgZmFrZSBpZGVudGl0eQp0LnJ1bnRpbWVDYXBhYmlsaXRpZXMuaXNBdmFpbGFibGUoImJyb3dzZXIiKS50aGVuKGZ1bmN0aW9uKG8pe2lmKGcubG9nKCJydW50aW1lIGJyb3dzZXIgaWRlbnRpdHkgYWNxdWlzaXRpb24iLG8pLG8pCi8vdG9kbzogb25seSBpZHAgc2hvdWxkIGJlIG1hbmRhdG9yeSB3aGVuIGlkZW50aXR5QnVuZGxlIGV4aXN0cwppZihlJiZlLmhhc093blByb3BlcnR5KCJpZHAiKSl7dmFyIGk9ZS5pZHAscz1lLmhhc093blByb3BlcnR5KCJvcmlnaW4iKT9lLm9yaWdpbjoib3JpZ2luIixhPWUuaGFzT3duUHJvcGVydHkoImlkSGludCIpP2UuaWRIaW50OiIiO3Quc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5KHMsaSxhKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBnLmxvZygiW0lkZW50aXR5TW9kdWxlXSBJZGVudGl0eSBzZWxlY3RlZCBieSBoeXBlcnR5LiIpLHIoZSl9LGZ1bmN0aW9uKGUpewovLyBpZiBpdCBnb3QgYW4gZXJyb3IgdGhlbiBqdXN0IHNlbGVjdCBpZGVudGl0eSBmcm9tIEdVSQovLyBsb2cuZXJyb3IoJ1tJZGVudGl0eU1vZHVsZV0gQ291bGQgbm90IHNlbGVjdCBpZGVudGl0eSBmcm9tIGh5cGVydHkuJyk7CnQuc2VsZWN0SWRlbnRpdHlGcm9tR1VJKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZy5sb2coIltJZGVudGl0eU1vZHVsZV0gSWRlbnRpdHkgc2VsZWN0ZWQgYnkgaHlwZXJ0eS4iKSxyKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pfSl9ZWxzZXtpZih0LmlkZW50aXRpZXMuZGVmYXVsdElkZW50aXR5JiZ0LmlkZW50aXRpZXMuZGVmYXVsdElkZW50aXR5LmV4cGlyZXM+KDAsbC5zZWNvbmRzU2luY2VFcG9jaCkoKSlyZXR1cm4gcih0LmlkZW50aXRpZXMuZGVmYXVsdElkZW50aXR5KTt0LnNlbGVjdElkZW50aXR5RnJvbUdVSSgpLnRoZW4oZnVuY3Rpb24oZSl7LyoKICAgICAgICAgICAgICAgICAgX3RoaXMuaWRlbnRpdGllcy5kZWZhdWx0SWRlbnRpdHkgPSBhc3NlcnRpb24udXNlclByb2ZpbGUudXNlclVSTDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoYXNzZXJ0aW9uKTsKICAgICAgICAgICAgICAgIH0qLwpyZXR1cm4gZy5sb2coIltJZGVudGl0eU1vZHVsZV0gSWRlbnRpdHkgc2VsZWN0ZWQgZnJvbSBHVUkuIiksdC5pZGVudGl0aWVzLmRlZmF1bHRJZGVudGl0eT1lLnVzZXJQcm9maWxlLnVzZXJVUkwscihlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX19KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gZy5lcnJvcigiRXJyb3Igb24gaWRlbnRpdHkgYWNxdWlzaXRpb24gIixlKSxuKGUpfSksdC5ydW50aW1lQ2FwYWJpbGl0aWVzLmlzQXZhaWxhYmxlKCJub2RlIikudGhlbihmdW5jdGlvbihlKXtpZihnLmxvZygibm9kZSBpZGVudGl0eSBhY3F1aXNpdGlvbiIsZSksZSl7aWYodC5pZGVudGl0aWVzLmN1cnJlbnRJZGVudGl0eSkKLy9UT0RPIHZlcmlmeSB3aGV0aGVyIHRoZSB0b2tlbiBpcyBzdGlsbCB2YWxpZCBvciBub3QuCi8vIHNob3VsZCBiZSBuZWVkZWQgdG8gbWFrZSBmdXJ0aGVyIHJlcXVlc3RzLCB0byBvYnRhaW4gYSB2YWxpZCB0b2tlbgpyZXR1cm4gcih0LmlkZW50aXRpZXMuY3VycmVudElkZW50aXR5KTtnLmxvZygiZ2V0SWRlbnRpdHlBc3NlcnRpb24gZm9yIG5vZGVqcyIpO3ZhciBvPXt0eXBlOiJpZHAiLHZhbHVlOiJub2RlanMtaWRwIixjb2RlOjIwMCxhdXRoOiExfTt0LmNhbGxOb2RlSnNHZW5lcmF0ZU1ldGhvZHMoby52YWx1ZSwib3JpZ2luIikudGhlbihmdW5jdGlvbihlKXtyKGUpfSxmdW5jdGlvbihlKXtuKGUpfSl9fSkuY2F0Y2goZnVuY3Rpb24oZSl7Zy5lcnJvcigiRXJyb3Igb24gaWRlbnRpdHkgYWNxdWlzaXRpb24gIixlKSxuKGUpfSl9KX19LHtrZXk6ImdldFVzZXJzSURzIix2YWx1ZTpmdW5jdGlvbigpey8qICBsb2cubG9nKCdbZ2V0VXNlcnNJRHM6ZW1haWxGb3JtYXRdJywgZW1haWxGb3JtYXQpOwogICAgICAgIGxvZy5sb2coJ2dldFVzZXJzSURzOmVtYWlsRm9ybWF0JywgZW1haWxGb3JtYXQpOwogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7CiAgICAgICAgbGV0IHVzZXJzID0gW107Ki8KLy9pZiByZXF1ZXN0IGNvbWVzIHdpdGggdGhlIGVtYWlsRm9ybWF0IG9wdGlvbiwgdGhlbiBjb252ZXJ0IHVybCB0byBlbWFpbCBmb3JtYXQKLyogICAgbGV0IGNvbnZlcnRlciA9IChlbWFpbEZvcm1hdCkgPyBnZXRVc2VyRW1haWxGcm9tVVJMIDogKHZhbHVlKSA9PiB7IHJldHVybiB2YWx1ZTsgfTsKICAgICAgIGZvciAobGV0IGluZGV4IGluIF90aGlzLmlkZW50aXRpZXMpIHsKICAgICAgICBsZXQgaWRlbnRpdHkgPSBfdGhpcy5pZGVudGl0aWVzW2luZGV4XTsKICAgICAgICB1c2Vycy5wdXNoKGNvbnZlcnRlcihpZGVudGl0eS5pZGVudGl0eSkpOwogICAgICB9Ki8KcmV0dXJuIHRoaXMuaWRlbnRpdGllcy5pZGVudGlmaWVyc319LHtrZXk6ImRlbGV0ZUlkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pZGVudGl0aWVzLnJlbW92ZUlkZW50aXR5KGUpfX0se2tleToicmVxdWVzdElkZW50aXR5VG9HVUkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Zy5sb2coIltJZGVudGl0eU1vZHVsZS5yZXF1ZXN0SWRlbnRpdHlUb0dVSTppZGVudGl0aWVzXSIsZSksZy5sb2coIltJZGVudGl0eU1vZHVsZS5yZXF1ZXN0SWRlbnRpdHlUb0dVSTppZHBzXSIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pewovL2NvbmRpdGlvbiB0byBjaGVjayBpZiB0aGUgcmVhbCBHVUkgaXMgZGVwbG95ZWQuIElmIG5vdCwgZGVwbG95cyBhIGZha2UgZ3VpCmlmKCExPT09ci5ndWlEZXBsb3llZCl7dmFyIGk9ci5fZ3VpVVJMLHM9bmV3IHYuZGVmYXVsdChpLHIuX21lc3NhZ2VCdXMpO3IuZ3VpRmFrZT1zLHIuZ3VpRGVwbG95ZWQ9ITB9dmFyIGE9e3R5cGU6ImNyZWF0ZSIsdG86ci5fZ3VpVVJMLGZyb206ci5faWRtVVJMLGJvZHk6e3ZhbHVlOntpZGVudGl0aWVzOmUsaWRwczp0fX19LHU9ZnVuY3Rpb24oZSl7Ci8vIHRvZG86IHRvIHJldHVybiB0aGUgdXNlciBVUkwgYW5kIG5vdCB0aGUgZW1haWwgb3IgaWRlbnRpZmllcgppZihyLl9tZXNzYWdlQnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoci5faWRtVVJMLGUuaWQpLDIwMD09PWUuYm9keS5jb2RlKXt2YXIgdD1lLmJvZHk7Zy5sb2coInNlbGVjdGVkSWRlbnRpdHk6ICIsdC52YWx1ZSksbih0KX1lbHNlIG8oImVycm9yIG9uIHJlcXVlc3RpbmcgYW4gaWRlbnRpdHkgdG8gdGhlIEdVSSIpfTsKLy9wb3N0TWVzc2FnZSB3aXRoIGNhbGxiYWNrIGJ1dCB3aXRob3V0IHRpbWVvdXQKdHJ5e3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoYSx1LCExKX1jYXRjaChlKXtvKCJJbiBtZXRob2QgY2FsbElkZW50aXR5TW9kdWxlRnVuYyBlcnJvcjogIitlKX19KX19LHtrZXk6ImNhbGxOb2RlSnNHZW5lcmF0ZU1ldGhvZHMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Zy5sb2coIltjYWxsTm9kZUpzR2VuZXJhdGVNZXRob2RzOmlkcF0iLGUpLGcubG9nKCJbY2FsbE5vZGVKc0dlbmVyYXRlTWV0aG9kczpvcmlnaW5dIix0KTt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7Ci8vZGVidWdnZXI7CnZhciBpPXZvaWQgMDsKLy9sZXQga2V5UGFpciA9IG5vZGVKU0tleVBhaXJQb3B1bGF0ZTsKLy9nZW5lcmF0ZXMgdGhlIFJTQSBrZXkgcGFpcgpyLl9jcnlwdG8uZ2V0TXlQdWJsaWNLZXkoKS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiBnLmxvZygiW2NhbGxOb2RlSnNHZW5lcmF0ZU1ldGhvZHM6a2V5XSIsbiksaT0oMCxsLnN0cmluZ2lmeSkobiksZy5sb2coIltjYWxsTm9kZUpzR2VuZXJhdGVNZXRob2RzXSBOT19VUkwiKSxyLmdlbmVyYXRlQXNzZXJ0aW9uKGksdCwidXJsIixlKX0pLnRoZW4oZnVuY3Rpb24oZSl7ZT9uKGUpOm8oIkVycm9yIG9uIG9idGFpbmluZyBJZGVudGl0eSIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Zy5sb2coZSksbyhlKX0pfSl9fSx7a2V5OiJjYWxsR2VuZXJhdGVNZXRob2RzIix2YWx1ZTpmdW5jdGlvbihlLHQpe2cubG9nKCJbY2FsbEdlbmVyYXRlTWV0aG9kczppZHBdIixlKSxnLmxvZygiW2NhbGxHZW5lcmF0ZU1ldGhvZHM6b3JpZ2luXSIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXZvaWQgMDsKLy9nZW5lcmF0ZXMgdGhlIFJTQSBrZXkgcGFpcgpyLl9jcnlwdG8uZ2V0TXlQdWJsaWNLZXkoKS50aGVuKGZ1bmN0aW9uKG4pewovLyAgICAgICAgdXNlcmtleVBhaXIgPSBrZXlQYWlyOwpyZXR1cm4gZy5sb2coIltjYWxsTm9kZUpzR2VuZXJhdGVNZXRob2RzOmtleV0iLG4pLGk9KDAsbC5zdHJpbmdpZnkpKG4pLGcubG9nKCJnZW5lcmF0ZUFzc2VydGlvbjpub19oaW50Iiksci5nZW5lcmF0ZUFzc2VydGlvbihpLHQsIiIsZSl9KS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiByLm15SGludD1uLGcubG9nKCJnZW5lcmF0ZUFzc2VydGlvbjpoaW50Iiksci5nZW5lcmF0ZUFzc2VydGlvbihpLHQsbixlKX0pLnRoZW4oZnVuY3Rpb24oZSl7ZT9uKGUpOm8oIkVycm9yIG9uIG9idGFpbmluZyBJZGVudGl0eSIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Zy5lcnJvcihlKSxvKGUpfSl9KX19LHtrZXk6ImxvZ2luU2VsZWN0ZWRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7Zy5sb2coIltsb2dpblNlbGVjdGVkSWRlbnRpdHk6cHVibGljS2V5XSIsZSksZy5sb2coIltsb2dpblNlbGVjdGVkSWRlbnRpdHk6b3JpZ2luXSIsdCksZy5sb2coIltsb2dpblNlbGVjdGVkSWRlbnRpdHk6aWRwXSIsciksCi8vICAgIGxvZy5sb2coJ1tsb2dpblNlbGVjdGVkSWRlbnRpdHk6a2V5UGFpcl0nLCBrZXlQYWlyKTsKZy5sb2coIltsb2dpblNlbGVjdGVkSWRlbnRpdHk6bG9naW5VcmxdIixuKTt2YXIgaT10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8scyl7Zy5sb2coIltJZGVudGl0eU1vZHVsZV0gb3BlblBvcHVwIiksaS5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCJvcGVuUG9wdXAiLHt1cmxyZWNlaXZlZDpufSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZX0sZnVuY3Rpb24oZSl7cmV0dXJuIGcuZXJyb3IoIkVycm9yIHdoaWxlIGxvZ2dpbmcgaW4gZm9yIHRoZSBzZWxlY3RlZCBpZGVudGl0eS4iKSxzKGUpfSkudGhlbihmdW5jdGlvbihuKXtpLnNlbmRHZW5lcmF0ZU1lc3NhZ2UoZSx0LG4scikudGhlbihmdW5jdGlvbihlKXtpZighZS5oYXNPd25Qcm9wZXJ0eSgiYXNzZXJ0aW9uIikpcmV0dXJuIGcuZXJyb3IoIkVycm9yIHdoaWxlIGxvZ2dpbmcgaW4gZm9yIHRoZSBzZWxlY3RlZCBpZGVudGl0eS4iKSxzKCJDb3VsZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBhc3NlcnRpb24gZm9yIHNlbGVjdGVkIGlkZW50aXR5LiIpO2kuaWRlbnRpdGllcy5hZGRBc3NlcnRpb24oZSkudGhlbihmdW5jdGlvbihlKXtvKCJMb2dpbiB3YXMgc3VjY2Vzc2Z1bGwiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3MoIkxvZ2luIGhhcyBmYWlsZWQ6IitlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cygiT24gbG9naW5TZWxlY3RlZElkZW50aXR5IGZyb20gbWV0aG9kIHNlbmRHZW5lcmF0ZU1lc3NhZ2UgZXJyb3I6ICAiK2UpfSl9KX0pfX0se2tleToic2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7Zy5sb2coIltzZWxlY3RJZGVudGl0eUZvckh5cGVydHk6b3JpZ2luXSIsZSksZy5sb2coIltzZWxlY3RJZGVudGl0eUZvckh5cGVydHk6aWRwXSIsdCksZy5sb2coIltzZWxlY3RJZGVudGl0eUZvckh5cGVydHk6aWRIaW50XSIscik7dmFyIG49dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpewovL2dlbmVyYXRlcyB0aGUgUlNBIGtleSBwYWlyCm4uX2NyeXB0by5nZXRNeVB1YmxpY0tleSgpLnRoZW4oZnVuY3Rpb24ocyl7dmFyIGE9KDAsbC5zdHJpbmdpZnkpKHMpO24uc2VuZEdlbmVyYXRlTWVzc2FnZShhLGUscix0KS50aGVuKGZ1bmN0aW9uKHIpe3IuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbiIpPwovLyBpZGVudGl0eSB3YXMgbG9nZ2VkIGluLCBqdXN0IHNhdmUgaXQKbi5pZGVudGl0aWVzLmFkZEFzc2VydGlvbihyKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBvKHIpfSxmdW5jdGlvbihlKXtyZXR1cm4gaShlKX0pOnIuaGFzT3duUHJvcGVydHkoImxvZ2luVXJsIik/Ci8vIGlkZW50aXR5IHdhcyBub3QgbG9nZ2VkIGluCm4ubG9naW5TZWxlY3RlZElkZW50aXR5KGEsZSx0LHIubG9naW5VcmwpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9LGZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfSk6KAovLyB5b3Ugc2hvdWxkIG5ldmVyIGdldCBoZXJlLCBpZiB5b3UgZG8gdGhlbiB0aGUgSWRQIFByb3h5IGlzIG5vdCB3ZWxsIGltcGxlbWVudGVkCi8vIGxvZy5lcnJvcignR2VuZXJhdGVBc3NlcnRpb24gcmV0dXJuZWQgaW52YWxpZCByZXNwb25zZS4nKTsKZy5sb2coIlByb2NlZWRpbmcgYnkgbG9nZ2luZyBpbi4iKSxuLmNhbGxHZW5lcmF0ZU1ldGhvZHModCxlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gaShlKX0pKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIk9uIHNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eSBmcm9tIG1ldGhvZCBzZW5kR2VuZXJhdGVNZXNzYWdlIGVycm9yOiAgIitlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7aSgiT24gc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5IGZyb20gbWV0aG9kIGdlbmVyYXRlUlNBS2V5UGFpciBlcnJvcjogICIrZSl9KX0pfX0se2tleToic2VsZWN0SWRlbnRpdHlGcm9tR1VJIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2cubG9nKCJbSWRlbnRpdHlNb2R1bGUuc2VsZWN0SWRlbnRpdHlGcm9tR1VJOm9yaWdpbl0iLGUpO3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt0LmdldElkZW50aXRpZXNUb0Nob29zZSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHIucmVxdWVzdElkZW50aXR5VG9HVUkoZS5pZGVudGl0aWVzLGUuaWRwcyl9KS50aGVuKGZ1bmN0aW9uKHQpe2lmKCJpZGVudGl0eSI9PT10LnR5cGUpCi8vICBsZXQgY2hvc2VuSUQgPSBnZXRVc2VyVVJMRnJvbUVtYWlsKHZhbHVlLnZhbHVlKTsKLy8gaGFjayB3aGlsZSB0aGUgdXNlciB1cmwgaXMgbm90IHJldHVybmVkIGZyb20gcmVxdWVzdElkZW50aXR5VG9HVUk7Ci8qICAgICAgICAgIGxldCBjaG9zZW5JRCA9ICd1c2VyOi8vJyArIF90aGlzLmlkZW50aXRpZXMuY3VycmVudElkZW50aXR5LmlkcC5kb21haW4gKyAnLycgKyB2YWx1ZS52YWx1ZTsKICAgICAgICAgICAgIF90aGlzLmlkZW50aXRpZXMuZGVmYXVsdElkZW50aXR5ID0gX3RoaXMuaWRlbnRpdGllcy5jdXJyZW50SWRlbnRpdHk7Ki8KLy8gcmV0dXJucyB0aGUgaWRlbnRpdHkgaW5mbyBmcm9tIHRoZSBjaG9zZW4gaWQKLy8gICAgICAgICAgaWYgKF90aGlzLmlkZW50aXRpZXMuY3VycmVudElkZW50aXR5KSByZXNvbHZlKF90aGlzLmlkZW50aXRpZXMuY3VycmVudElkZW50aXR5LmFzc2VydGlvbik7CnIuaWRlbnRpdGllcy5pZGVudGl0aWVzW3QudmFsdWVdP24oci5pZGVudGl0aWVzLmlkZW50aXRpZXNbdC52YWx1ZV0pOm8oIltJZGVudGl0eU1vZHVsZS5zZWxlY3RJZGVudGl0eUZyb21HVUldIGlkZW50aXR5IG5vdCBmb3VuZDogIix0LnZhbHVlKTtlbHNle2lmKCJpZHAiIT09dC50eXBlKXJldHVybiBvKCJlcnJvciBvbiBHVUkgcmVjZWl2ZWQgbWVzc2FnZS4iKTtyLmNhbGxHZW5lcmF0ZU1ldGhvZHModC52YWx1ZSxlKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBuKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX0pfX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIHNlbGVjdElkZW50aXR5RnJvbUdVSSBmcm9tIG1ldGhvZCByZXF1ZXN0SWRlbnRpdHlUb0dVSSBlcnJvcjogICIrZSl9KX0pfX0se2tleToiY2FsbElkZW50aXR5TW9kdWxlRnVuYyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtnLmxvZygiW2NhbGxJZGVudGl0eU1vZHVsZUZ1bmM6bWV0aG9kTmFtZV0iLGUpLGcubG9nKCJbY2FsbElkZW50aXR5TW9kdWxlRnVuYzpwYXJhbWV0ZXJzXSIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXt0eXBlOiJleGVjdXRlIix0bzpyLl9ndWlVUkwsZnJvbTpyLl9pZG1VUkwsYm9keTp7cmVzb3VyY2U6ImlkZW50aXR5IixtZXRob2Q6ZSxwYXJhbXM6dH19LHM9ZnVuY3Rpb24oZSl7ci5fbWVzc2FnZUJ1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKHIuX2lkbVVSTCxlLmlkKTt2YXIgdD1lLmJvZHkudmFsdWU7bih0KX07dHJ5e3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxzLCExKX1jYXRjaChlKXtvKCJJbiBtZXRob2QgY2FsbElkZW50aXR5TW9kdWxlRnVuYyBlcnJvcjogIitlKX19KX19LHtrZXk6ImdldFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tLG49ZS50bztyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpJiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInNvdXJjZSIpJiYocj1lLmJvZHkuc291cmNlKSwiZm9yd2FyZCI9PT1lLnR5cGUmJihyPWUuYm9keS5mcm9tKSxlLmhhc093blByb3BlcnR5KCJib2R5IikmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgic3Vic2NyaWJlciIpJiYocj1lLmJvZHkuc3Vic2NyaWJlciksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe2cubG9nKCJbSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGZvciBtc2cgIixlKSwKLy9sb2cubG9nKCd0b1VybCcsIHRvVXJsKTsKdC5yZWdpc3RyeS5pc0xlZ2FjeShuKS50aGVuKGZ1bmN0aW9uKG4pewovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGlzTEVHQUNZOiAnLCByZXN1bHQpOwpuP3QuX2dldEFjY2Vzc1Rva2VuKGUpLnRoZW4oZnVuY3Rpb24oZSl7Zy5sb2coIltJZGVudGl0eU1vZHVsZS5nZXRUb2tlbl0gYWNjZXNzIHRva2VuICIsZSksbygoMCxsLmRlZXBDbG9uZSkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7aSgiW0lkZW50aXR5TW9kdWxlLmdldFRva2VuXSBBY2Nlc3MgVG9rZW4gZXJyb3IgIitlKX0pOnQuX2dldFZhbGlkVG9rZW4ocikudGhlbihmdW5jdGlvbihlKXtvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7aSgiT24gZ2V0VG9rZW4gZnJvbSBtZXRob2QgX2dldFZhbGlkVG9rZW4gZXJyb3I6ICIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIk9uIGdldFRva2VuIGZyb20gbWV0aG9kIGlzTGVnYWN5IGVycm9yOiAiK2UpfSl9KX19LHtrZXk6ImdldElkVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe2cuaW5mbygiZ2V0SWRUb2tlbjpoeXBlcnR5VVJMICIsZSk7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPWUuc3BsaXQoIjovLyIpLGk9dm9pZCAwO2lmKCJoeXBlcnR5Ij09PW9bMF0pe2lmKGk9dC5yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoZSkpe3ZhciBzPXQuaWRlbnRpdGllcy5nZXRJZGVudGl0eShpKTtyZXR1cm4gcz9yKHMpOm4oIltJZGVudGl0eU1vZHVsZS5nZXRJZFRva2VuXSBJZGVudGl0eSBub3QgZm91bmQgZm9yOiAiLGkpfXJldHVybiBuKCJbSWRlbnRpdHlNb2R1bGUuZ2V0SWRUb2tlbl0gVXNlciBub3QgZm91bmQgZm9yIGh5cGVydHk6ICIsaSl9Ci8vIGl0IGlzIGEgRGF0YSBPYmplY3QgVVJMCnQuX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdChlKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGk9dC5yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoZSkpe3ZhciBvPXQuaWRlbnRpdGllcy5nZXRJZGVudGl0eShpKTtyZXR1cm4gbz9yKG8pOm4oIltJZGVudGl0eU1vZHVsZS5nZXRJZFRva2VuXSBJZGVudGl0eSBub3QgZm91bmQgZm9yOiAiLGkpfXJldHVybiBuKCJbSWRlbnRpdHlNb2R1bGUuZ2V0SWRUb2tlbl0gVXNlciBub3QgZm91bmQgZm9yIGh5cGVydHk6ICIsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtnLmVycm9yKCJbSWRlbnRpdHlNb2R1bGUuZ2V0SWRUb2tlbl0gRXJyb3I6ICIsZSksbihlKX0pfSl9fSx7a2V5OiJfZ2V0QWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz1lLnRvLGk9dm9pZCAwO2lmKCFlLmhhc093blByb3BlcnR5KCJib2R5IikpcmV0dXJuIG4oIltJZGVudGl0eU1vZHVsZS5fZ2V0QWNjZXNzVG9rZW5dIG1pc3NpbmcgbWFuZGF0b3J5IG1zZyBib2R5OiAiLGUpO2lmKCFlLmJvZHkuaGFzT3duUHJvcGVydHkoInZhbHVlIikpcmV0dXJuIG4oIltJZGVudGl0eU1vZHVsZS5fZ2V0QWNjZXNzVG9rZW5dIG1pc3NpbmcgbWFuZGF0b3J5IG1zZyBib2R5IHZhbHVlOiAiLGUpO2lmKCFlLmJvZHkudmFsdWUuaGFzT3duUHJvcGVydHkoInJlc291cmNlcyIpKXJldHVybiBuKCJbSWRlbnRpdHlNb2R1bGUuX2dldEFjY2Vzc1Rva2VuXSBtaXNzaW5nIG1hbmRhdG9yeSBtc2cgYm9keSB2YWx1ZSByZXNvdXJjZXM6ICIsZSk7dmFyIHM9KDAsbC5kaXZpZGVVUkwpKG8pLmRvbWFpbjtvLmluY2x1ZGVzKCJwcm90b3N0dWIiKSYmKHM9cy5yZXBsYWNlKHMuc3BsaXQoIi4iKVswXSsiLiIsIiIpKTt2YXIgYT1lLmJvZHkudmFsdWUucmVzb3VyY2VzO3RyeXtpPXQuaWRlbnRpdGllcy5nZXRBY2Nlc3NUb2tlbihzLGEpfWNhdGNoKGUpe3JldHVybiBuKCJbSWRlbnRpdHlNb2R1bGUuX2dldEFjY2Vzc1Rva2VuXSBBY2Nlc3MgVG9rZW4gZXJyb3IgIitlcnIpfWlmKGkpe2lmKCJpbi1wcm9ncmVzcyI9PT1pLnN0YXR1cylyZXR1cm4gcih0Ll9pblByb2dyZXNzQWNjZXNzVG9rZW4ocyxhKSk7dmFyIHU9KDAsbC5zZWNvbmRzU2luY2VFcG9jaCkoKTtpZihnLmxvZygiW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldEFjY2Vzc1Rva2VuXSBmb3VuZCAgQWNjZXNzIFRva2VuICIsaSksISh1Pj1pLmV4cGlyZXMpKXJldHVybiByKGkpOwovLyAgICAgICAgaWYgKHRydWUpIHsKaWYoIWkuaGFzT3duUHJvcGVydHkoInJlZnJlc2giKSlyZXR1cm4gcih0Ll9nZXROZXdBY2Nlc3NUb2tlbihzLGEpKTt0Ll9yZWZyZXNoQWNjZXNzVG9rZW4oaSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gcih0LmlkZW50aXRpZXMudXBkYXRlQWNjZXNzVG9rZW4oZSkpfSl9ZWxzZSB0Ll9nZXROZXdBY2Nlc3NUb2tlbihzLGEpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGcubG9nKCJbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0QWNjZXNzVG9rZW5dIG5ldyBBY2Nlc3MgVG9rZW4gIixlKSxyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bigiW0lkZW50aXR5TW9kdWxlLl9nZXRBY2Nlc3NUb2tlbl0gb24gZ2V0TmV3QWNjZXNzVG9rZW4gIitlKX0pfSl9fSx7a2V5OiJfaW5Qcm9ncmVzc0FjY2Vzc1Rva2VuIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dGhpcy5pZGVudGl0aWVzLndhdGNoaW5nWW91Lm9ic2VydmUoImFjY2Vzc1Rva2VucyIsZnVuY3Rpb24obil7Zy5sb2coIltJZGVudGl0eU1vZHVsZS5faW5Qcm9ncmVzc0FjY2Vzc1Rva2VuXSBhY2Nlc3NUb2tlbnMgY2hhbmdlZCAiK3IuaWRlbnRpdGllcy5hY2Nlc3NUb2tlbnMpO3ZhciBvPW4ua2V5cGF0aDtpZihvLmluY2x1ZGVzKCJzdGF0dXMiKSYmKG89by5yZXBsYWNlKCIuc3RhdHVzIiwiIikpLG89PT1lJiYic3RhdHVzIj09PW4ubmFtZSYmImNyZWF0ZWQiPT09bi5uZXdWYWx1ZSkKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSB0b2tlbiBpcyBjcmVhdGVkICcgKyBfdGhpcy5pZGVudGl0aWVzTGlzdFtkb21haW5dKTsKcmV0dXJuIHIuaWRlbnRpdGllcy5nZXRBY2Nlc3NUb2tlbihlLHQpfSl9fSx7a2V5OiJfZ2V0TmV3QWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuaWRlbnRpdGllcy5zZXRBY2Nlc3NUb2tlbkluUHJvZ3Jlc3MoZSk7dmFyIGk9e3R5cGU6ImV4ZWN1dGUiLHRvOnIuX3Jlc29sdmVEb21haW4oZSksZnJvbTpyLl9pZG1VUkwsYm9keTp7bWV0aG9kOiJnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludCIscGFyYW1zOnR9fTsKLy9sZXQncyBmaXJzdCBnZXQgdGhlIGF1dGhvcmlzYXRpb24gVVJMIGZyb20gdGhlIElkcCBQcm94eQpyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24oZSl7aWYoZS5ib2R5LmNvZGU+Mjk5KXJldHVybiBvKCJbSWRlbnRpdHlNb2R1bGUuX2dldE5ld0FjY2Vzc1Rva2VuXSBFcnJvciBvbiBnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludCBmcm9tIElkUCBQcm94eTogIixlLmJvZHkuZGVzYyk7Ci8vIGxldCdzIGFzayB0aGUgdXNlciBmb3IgYXV0aG9yaXNhdGlvbgpyLmNhbGxJZGVudGl0eU1vZHVsZUZ1bmMoIm9wZW5Qb3B1cCIse3VybHJlY2VpdmVkOmUuYm9keS52YWx1ZX0pLnRoZW4oZnVuY3Rpb24oZSl7Zy5sb2coIltJZGVudGl0eU1vZHVsZTpjYWxsSWRlbnRpdHlNb2R1bGVGdW5jOm9wZW5Qb3B1cF0gYXVodG9yaXNhdGlvbiByZXN1bHQ6ICIsZSksaS5ib2R5Lm1ldGhvZD0iZ2V0QWNjZXNzVG9rZW4iLGkuYm9keS5wYXJhbXM9e3Jlc291cmNlczp0LGxvZ2luOmV9LAovL3dpaHRvdXQgY2FsbGJhY2sgdG8gYXZvaWQgdGltZW91dCBlcnJvcnM/Ci8vIGxldCdzIGFzayBBY2Nlc3MgVG9rZW4gZnJvbSB0aGUgSWRwIFByb3h5CnIuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihlKXtpZihlLmJvZHkuY29kZT4yOTkpcmV0dXJuIG8oIltJZGVudGl0eU1vZHVsZS5fZ2V0TmV3QWNjZXNzVG9rZW5dIEVycm9yIG9uIGdldEFjY2Vzc1Rva2VuIGZyb20gSWRQIFByb3h5OiAiLGUuYm9keS5kZXNjKTtyLmlkZW50aXRpZXMuYWRkQWNjZXNzVG9rZW4oZS5ib2R5LnZhbHVlKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBnLmluZm8oIltJZGVudGl0eU1vZHVsZS5fZ2V0TmV3QWNjZXNzVG9rZW5dIHJlc29sdmluZyB0b2tlbjogIix0KSxuKGUuYm9keS52YWx1ZSl9LGZ1bmN0aW9uKGUpe28oZSl9KX0pfSxmdW5jdGlvbihlKXtvKGUpfSl9KX0pfX0se2tleToiX3JlZnJlc2hBY2Nlc3NUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy8gICAgbGV0IGRvbWFpbiA9IF90aGlzLl9yZXNvbHZlRG9tYWluKG9sZElkZW50aXR5LmlkcCk7Ci8vICAgIGxldCBtZXNzYWdlOwovLyAgICBsZXQgYXNzZXJ0aW9uID0gX3RoaXMuZ2V0SWRlbnRpdHkob2xkSWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCk7CnJldHVybiBnLmxvZygiSWRlbnRpdHlNb2R1bGUuX3JlZnJlc2hBY2Nlc3NUb2tlbjpvdXRkYXRlZFRva2VuIixlKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89dC5fcmVzb2x2ZURvbWFpbihlLmRvbWFpbiksaT12b2lkIDA7aT17dHlwZToiZXhlY3V0ZSIsdG86byxmcm9tOnQuX2lkbVVSTCxib2R5OnttZXRob2Q6InJlZnJlc2hBY2Nlc3NUb2tlbiIscGFyYW1zOnt0b2tlbjplfX19O3RyeXt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LnZhbHVlO3IodCl9KX1jYXRjaChlKXtuKCJJbiBJZGVudGl0eU1vZHVsZS5fcmVmcmVzaEFjY2Vzc1Rva2VuIG9uIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfX0se2tleToic2VuZFJlZnJlc2hNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOwovLyAgICBsZXQgZG9tYWluID0gX3RoaXMuX3Jlc29sdmVEb21haW4ob2xkSWRlbnRpdHkuaWRwKTsKLy8gICAgbGV0IG1lc3NhZ2U7Ci8vICAgIGxldCBhc3NlcnRpb24gPSBfdGhpcy5nZXRJZGVudGl0eShvbGRJZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMKTsKcmV0dXJuIGcubG9nKCJzZW5kUmVmcmVzaE1lc3NhZ2U6b2xkSWRlbnRpdHkiLGUpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz10Ll9yZXNvbHZlRG9tYWluKGUuaWRwKSxpPXZvaWQgMCxzPXQuZ2V0SWRlbnRpdHkoZS51c2VyUHJvZmlsZS51c2VyVVJMKTtnLmluZm8oInNlbmRSZWZyZXNoTWVzc2FnZTpvbGRJZGVudGl0eSIsZSksaT17dHlwZToiZXhlY3V0ZSIsdG86byxmcm9tOnQuX2lkbVVSTCxib2R5OntyZXNvdXJjZToiaWRlbnRpdHkiLG1ldGhvZDoicmVmcmVzaEFzc2VydGlvbiIscGFyYW1zOntpZGVudGl0eTpzfX19O3RyeXt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LnZhbHVlO3IodCl9KX1jYXRjaChlKXtuKCJJbiBzZW5kUmVmcmVzaE1lc3NhZ2Ugb24gcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJnZXRBY2Nlc3NUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2cubG9nKCJbZ2V0QWNjZXNzVG9rZW46aWRwRG9tYWluXSIsZSk7dmFyIG49dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBzPW4uX3Jlc29sdmVEb21haW4oZSksYT12b2lkIDA7YT17dHlwZToiZXhlY3V0ZSIsdG86cyxmcm9tOm4uX2lkbVVSTCxib2R5OntyZXNvdXJjZToiaWRlbnRpdHkiLG1ldGhvZDoiZ2V0QWNjZXNzVG9rZW4iLHBhcmFtczp7cmVzb3VyY2VzOnQsbG9naW46cn19fTt0cnl7bi5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGUpe3ZhciB0PWUuYm9keS52YWx1ZTtvKHQpfSl9Y2F0Y2goZSl7aSgiSWRlbnRpdHlNb2R1bGUuSW4gZ2V0QWNjZXNzVG9rZW46ICIrZSl9fSl9fSx7a2V5OiJnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtnLmxvZygiW2dldEFjY2Vzc1Rva2VuQXV0aG9yaXNhdGlvbkVuZHBvaW50OmlkcERvbWFpbl0iLHQpO3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1yLl9yZXNvbHZlRG9tYWluKHQpLHM9dm9pZCAwO3M9e3R5cGU6ImV4ZWN1dGUiLHRvOmksZnJvbTpyLl9pZG1VUkwsYm9keTp7cmVzb3VyY2U6ImlkZW50aXR5IixtZXRob2Q6ImdldEFjY2Vzc1Rva2VuQXV0aG9yaXNhdGlvbkVuZHBvaW50IixwYXJhbXM6e3Jlc291cmNlczplfX19O3RyeXtyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LnZhbHVlO24odCl9KX1jYXRjaChlKXtvKCJJbiBnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludDogIitlKX19KX19LHtrZXk6InNlbmRHZW5lcmF0ZU1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2cubG9nKCJbc2VuZEdlbmVyYXRlTWVzc2FnZTpjb250ZW50c10iLGUpLGcubG9nKCJbc2VuZEdlbmVyYXRlTWVzc2FnZTpvcmlnaW5dIix0KSxnLmxvZygiW3NlbmRHZW5lcmF0ZU1lc3NhZ2U6dXNlcm5hbWVIaW50XSIsciksZy5sb2coIltzZW5kR2VuZXJhdGVNZXNzYWdlOmlkcERvbWFpbl0iLG4pLGcubG9nKCJzZW5kR2VuZXJhdGVNZXNzYWdlX2hpbnQiKTt2YXIgaT10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8scyl7dmFyIGE9aS5fcmVzb2x2ZURvbWFpbihuKSx1PXZvaWQgMDt1PXt0eXBlOiJleGVjdXRlIix0bzphLGZyb206aS5faWRtVVJMLGJvZHk6e3Jlc291cmNlOiJpZGVudGl0eSIsbWV0aG9kOiJnZW5lcmF0ZUFzc2VydGlvbiIscGFyYW1zOntjb250ZW50czplLG9yaWdpbjp0LHVzZXJuYW1lSGludDpyfX19O3RyeXtpLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHUsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LnZhbHVlO28odCl9KX1jYXRjaChlKXtzKCJJbiBzZW5kR2VuZXJhdGVNZXNzYWdlOiAiK2UpfX0pfX0se2tleToiZ2VuZXJhdGVBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2cubG9nKCJbZ2VuZXJhdGVBc3NlcnRpb246Y29udGVudHNdIixlKSxnLmxvZygiW2dlbmVyYXRlQXNzZXJ0aW9uOm9yaWdpbl0iLHQpLGcubG9nKCJbZ2VuZXJhdGVBc3NlcnRpb246dXNlcm5hbWVIaW50XSIsciksCi8vICAgIGxvZy5sb2coJ1tnZW5lcmF0ZUFzc2VydGlvbjprZXlQYWlyXScsIGtleVBhaXIpOwpnLmxvZygiW2dlbmVyYXRlQXNzZXJ0aW9uOmlkcERvbWFpbl0iLG4pO3ZhciBpPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxzKXtnLmxvZygiW0lkZW50aXR5TW9kdWxlOnNlbmRHZW5lcmF0ZU1lc3NhZ2U6c2VuZEdlbmVyYXRlTWVzc2FnZV0iLHIpLGkuc2VuZEdlbmVyYXRlTWVzc2FnZShlLHQscixuKS50aGVuKGZ1bmN0aW9uKGUpe2UubG9naW5Vcmw/aS5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCJvcGVuUG9wdXAiLHt1cmxyZWNlaXZlZDplLmxvZ2luVXJsfSkudGhlbihmdW5jdGlvbihlKXtnLmxvZygiW0lkZW50aXR5TW9kdWxlOmNhbGxJZGVudGl0eU1vZHVsZUZ1bmM6b3BlblBvcHVwXSIsciksbyhlKX0sZnVuY3Rpb24oZSl7cyhlKX0pOmU/aS5pZGVudGl0aWVzLmFkZEFzc2VydGlvbihlKS50aGVuKGZ1bmN0aW9uKHQpe28oZSl9LGZ1bmN0aW9uKGUpe3MoZSl9KTpzKCJlcnJvciBvbiBvYnRhaW5pbmcgaWRlbnRpdHkgaW5mb3JtYXRpb24iKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3MoIk9uIGdlbmVyYXRlQXNzZXJ0aW9uIGZyb20gbWV0aG9kIHNlbmRHZW5lcmF0ZU1lc3NhZ2UgZXJyb3I6ICIrZSl9KX0pfX0se2tleToidmFsaWRhdGVBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtnLmxvZygiW3ZhbGlkYXRlQXNzZXJ0aW9uOmFzc2VydGlvbl0iLGUpLGcubG9nKCJbdmFsaWRhdGVBc3NlcnRpb246b3JpZ2luXSIsdCksZy5sb2coIlt2YWxpZGF0ZUFzc2VydGlvbjppZHBEb21haW5dIixyKTt2YXIgbj10aGlzLGk9bi5fcmVzb2x2ZURvbWFpbihyKSxzPXt0eXBlOiJleGVjdXRlIix0bzppLGZyb206bi5faWRtVVJMLGJvZHk6e3Jlc291cmNlOiJpZGVudGl0eSIsbWV0aG9kOiJ2YWxpZGF0ZUFzc2VydGlvbiIscGFyYW1zOnthc3NlcnRpb246ZSxvcmlnaW46dH19fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe3RyeXtuLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/ZShyLmJvZHkudmFsdWUpOnQoImVycm9yIixyLmJvZHkuY29kZSl9KX1jYXRjaChlKXt0KCJPbiB2YWxpZGF0ZUFzc2VydGlvbiBmcm9tIG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19LHtrZXk6ImFkZEdVSUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoZS5faWRtVVJMLGZ1bmN0aW9uKHQpe3ZhciByPXQuYm9keS5tZXRob2Q7Zy5sb2coIltJZGVudGl0eU1vZHVsZTphZGRHVUlMaXN0ZW5lcnNdIix0LHQuYm9keSxyKTt2YXIgbj12b2lkIDA7aWYoImRlcGxveUdVSSI9PT1yKW49ZS5kZXBsb3lHVUkoKTtlbHNle2lmKCJnZXRJZGVudGl0aWVzVG9DaG9vc2UiPT09cilyZXR1cm4gdm9pZCBlLmdldElkZW50aXRpZXNUb0Nob29zZSgpLnRoZW4oZnVuY3Rpb24ocil7Ci8vIGlmIHRoZSBmdW5jdGlvbiByZXF1ZXN0ZWQgaXMgbm90IGEgcHJvbWlzZQp2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0sbz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfWNhdGNoKGUpe2cuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIHN0b3JlSWRlbnRpdHkgbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pO2lmKCJ1bnJlZ2lzdGVySWRlbnRpdHkiPT09cil7dmFyIG89dC5ib2R5LnBhcmFtcy5lbWFpbDtuPWUudW5yZWdpc3RlcklkZW50aXR5KG8pfWVsc2V7aWYoImdldE15UHVibGljS2V5Ij09PXIpCi8vIGJlY2F1c2UgZ2VuZXJhdGVSU0FLZXlQYWlyIGlzIGEgcHJvbWlzZQovLyB3ZSBoYXZlIHRvIHNlbmQgdGhlIG1lc3NhZ2Ugb25seSBhZnRlciBnZXR0aW5nIHRoZSBrZXkgcGFpcgpyZXR1cm4gdm9pZCBlLl9jcnlwdG8uZ2V0TXlQdWJsaWNLZXkoKS50aGVuKGZ1bmN0aW9uKHIpe3I9KDAsbC5zdHJpbmdpZnkpKHIpO3ZhciBuPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpyLGNvZGU6MjAwfSxvPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bn07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobyl9Y2F0Y2goZSl7Zy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgZ2VuZXJhdGVSU0FLZXlQYWlyIG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KTtpZigic2VuZEdlbmVyYXRlTWVzc2FnZSI9PT1yKXt2YXIgaT10LmJvZHkucGFyYW1zLmNvbnRlbnRzLHM9dC5ib2R5LnBhcmFtcy5vcmlnaW4sYT10LmJvZHkucGFyYW1zLnVzZXJuYW1lSGludCx1PXQuYm9keS5wYXJhbXMuaWRwRG9tYWluO3JldHVybiB2b2lkIGUuc2VuZEdlbmVyYXRlTWVzc2FnZShpLHMsYSx1KS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpyLGNvZGU6MjAwfSxvPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bn07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobyl9Y2F0Y2goZSl7Zy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc2VuZEdlbmVyYXRlTWVzc2FnZSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9aWYoImdldEFjY2Vzc1Rva2VuQXV0aG9yaXNhdGlvbkVuZHBvaW50Ij09PXIpe3ZhciBjPXQuYm9keS5wYXJhbXMuc2NvcGUsZj10LmJvZHkucGFyYW1zLmlkcERvbWFpbjtyZXR1cm4gdm9pZCBlLmdldEFjY2Vzc1Rva2VuQXV0aG9yaXNhdGlvbkVuZHBvaW50KGMsZikudGhlbihmdW5jdGlvbihyKXt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0sbz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfWNhdGNoKGUpe2cuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIHNlbmRHZW5lcmF0ZU1lc3NhZ2UgbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfWlmKCJhZGRBY2Nlc3NUb2tlbiI9PT1yKXt2YXIgZD10LmJvZHkucGFyYW1zO3JldHVybiB2b2lkIGUuaWRlbnRpdGllcy5hZGRBY2Nlc3NUb2tlbihkKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpyLGNvZGU6MjAwfSxvPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bn07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobyl9Y2F0Y2goZSl7Zy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc3RvcmVJZGVudGl0eSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9aWYoImdldEFjY2Vzc1Rva2VuIj09PXIpe3ZhciBwPXQuYm9keS5wYXJhbXMuaWRwRG9tYWluLHk9dC5ib2R5LnBhcmFtcy5yZXNvdXJjZXMsaD10LmJvZHkucGFyYW1zLmxvZ2luO3JldHVybiB2b2lkIGUuZ2V0QWNjZXNzVG9rZW4ocCx5LGgpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOnIsY29kZToyMDB9LG89e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpufTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvKX1jYXRjaChlKXtnLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzZW5kR2VuZXJhdGVNZXNzYWdlIG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX1pZigiYWRkQXNzZXJ0aW9uIj09PXIpe3ZhciB2PXQuYm9keS5wYXJhbXM7Ci8vICAgICAgICBsZXQga2V5UGFpciA9IG1zZy5ib2R5LnBhcmFtcy5rZXlQYWlyOwpyZXR1cm4gdm9pZCBlLmlkZW50aXRpZXMuYWRkQXNzZXJ0aW9uKHYpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOnIsY29kZToyMDB9LG89e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpufTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvKX1jYXRjaChlKXtnLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzdG9yZUlkZW50aXR5IG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19fS8qZWxzZSBpZiAoZnVuY05hbWUgPT09ICdzZWxlY3RJZGVudGl0eUZvckh5cGVydHknKSB7CiAgICAgICAgICBsZXQgb3JpZ2luID0gbXNnLmJvZHkucGFyYW1zLm9yaWdpbjsKICAgICAgICAgIGxldCBpZHAgPSBtc2cuYm9keS5wYXJhbXMuaWRwOwogICAgICAgICAgbGV0IGlkSGludCA9IG1zZy5ib2R5LnBhcmFtcy5pZEhpbnQ7CiAgICAgICAgICBfdGhpcy5zZWxlY3RJZGVudGl0eUZvckh5cGVydHkob3JpZ2luLCBpZHAsIGlkSGludCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9Ki8KLy8gaWYgdGhlIGZ1bmN0aW9uIHJlcXVlc3RlZCBpcyBub3QgYSBwcm9taXNlCnZhciBiPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpuLGNvZGU6MjAwfSxfPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6Yn07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoXyl9Y2F0Y2goZSl7Zy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc3RvcmVJZGVudGl0eSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJkZXBsb3lHVUkiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5ndWlEZXBsb3llZD0hMH19LHtrZXk6Il9nZXRWYWxpZFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtnLmxvZygiW0lkZW50aXR5TW9kdWxlLl9nZXRWYWxpZFRva2VuXTpoeXBlcnR5VVJMIixlKTt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5nZXRJZFRva2VuKGUpLnRoZW4oZnVuY3Rpb24oZSl7Zy5sb2coIltJZGVudGl0eU1vZHVsZS5fZ2V0VmFsaWRUb2tlbl0gcmV0cmlldmVkIElkQXNzZXJ0aW9uIixlKTt2YXIgbz0oMCxsLnNlY29uZHNTaW5jZUVwb2NoKSgpO2lmKCFlLmhhc093blByb3BlcnR5KCJleHBpcmVzIikpcmV0dXJuIHIoZSk7dmFyIGk9ZS5leHBpcmVzOy8qIGlmIChjb21wbGV0ZUlkLmhhc093blByb3BlcnR5KCdpbmZvJykpIHsKICAgICAgICAgICAgaWYgKGNvbXBsZXRlSWQuaW5mby5oYXNPd25Qcm9wZXJ0eSgnZXhwaXJlcycpKSB7CiAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGUgPSBjb21wbGV0ZUlkLmluZm8uZXhwaXJlczsKICAgICAgICAgICAgfSBlbHNlIGlmIChjb21wbGV0ZUlkLmluZm8uaGFzT3duUHJvcGVydHkoJ3Rva2VuSURKU09OJykpIHsKICAgICAgICAgICAgICBleHBpcmF0aW9uRGF0ZSA9IGNvbXBsZXRlSWQuaW5mby50b2tlbklESlNPTi5leHA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gdGhyb3cgJ1RoZSBJRCBUb2tlbiBkb2VzIG5vdCBoYXZlIGFuIGV4cGlyYXRpb24gdGltZSc7CiAgICAgICAgICAgICAgbG9nLmluZm8oJ1RoZSBJRCBUb2tlbiBkb2VzIG5vdCBoYXZlIGFuIGV4cGlyYXRpb24gdGltZScpOwogICAgICAgICAgICAgIHJlc29sdmUoYXNzZXJ0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChjb21wbGV0ZUlkLmhhc093blByb3BlcnR5KCdpbmZvVG9rZW4nKSAmJiBjb21wbGV0ZUlkLmluZm9Ub2tlbi5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHsKICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGUgPSBjb21wbGV0ZUlkLmluZm9Ub2tlbi5leHA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyB0aHJvdyAnVGhlIElEIFRva2VuIGRvZXMgbm90IGhhdmUgYW4gZXhwaXJhdGlvbiB0aW1lJzsKICAgICAgICAgICAgbG9nLmluZm8oJ1RoZSBJRCBUb2tlbiBkb2VzIG5vdCBoYXZlIGFuIGV4cGlyYXRpb24gdGltZScpOwogICAgICAgICAgICByZXNvbHZlKGFzc2VydGlvbik7CiAgICAgICAgICB9Ki8KZy5sb2coIltJZGVudGl0eS5JZGVudGl0eU1vZHVsZS5nZXRWYWxpZFRva2VuXSBUb2tlbiBleHBpcmVzIGluIixpKSxnLmxvZygiW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFZhbGlkVG9rZW5dIHRpbWUgbm93OiIsbyksbz49aT9lLmhhc093blByb3BlcnR5KCJyZWZyZXNoIik/dC5zZW5kUmVmcmVzaE1lc3NhZ2UoZSkudGhlbihmdW5jdGlvbihlKXt0LmlkZW50aXRpZXMudXBkYXRlQXNzZXJ0aW9uKGUpLnRoZW4oZnVuY3Rpb24oKXtyKGUpfSxmdW5jdGlvbihlKXtnLmVycm9yKCJbSWRlbnRpdHlNb2R1bGUuZ2V0VmFsaWRUb2tlbl0gZXJyb3IgdXBkYXRpbmcgdGhlIGFzc2VydGlvbiAiLGUpLG4oZSl9KX0sZnVuY3Rpb24oZSl7Zy5lcnJvcigiW0lkZW50aXR5TW9kdWxlLmdldFZhbGlkVG9rZW5dIGVycm9yIHJlZnJlc2hpbmcgdGhlIGFzc2VydGlvbiAiLGUpLG4oZSl9KToKLy8gbm8gcmVmcmVzaCB0b2tlbiBhdmFpbGFibGUsIHVzZXIgaGFzIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiB0byBnZXQgYSBuZXcgYXNzZXJ0aW9uCi8vIGdlbmVyYXRlIG5ldyBpZFRva2VuCnQuY2FsbEdlbmVyYXRlTWV0aG9kcyhlLmlkcC5kb21haW4pLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oIltJZGVudGl0eU1vZHVsZS5nZXRWYWxpZFRva2VuXSBlcnJvciB3aGVuIGdlbmVyYXRpbmcgYSBuZXcgYXNzZXJ0aW9uICIrZSl9KTpyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Zy5lcnJvcigiW0lkZW50aXR5TW9kdWxlLmdldFZhbGlkVG9rZW5dIGVycm9yIG9uIGdldElkVG9rZW4iLGUpLG4oZSl9KX0pfX0se2tleToiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OmRhdGFPYmplY3RVUkwiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz0oMCxsLmRpdmlkZVVSTCkoZSksaT1vLmRvbWFpbixzPSgwLGwucGFyc2VNZXNzYWdlVVJMKShlKSxhPXQucmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKHMpO2lmKGcuaW5mbygiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdDpyZXBvcnRlclVSTCIsYSksYSlyKGEpO2Vsc2V7Ci8vIGNoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYW4gYXNzb2NpYXRpb24gZnJvbSBhbiBoeXBlcnR5VVJMIHRvIHRoZSBkYXRhT2JqZWN0CnZhciB1PXQuZGF0YU9iamVjdHNJZGVudGl0eVtzXTtpZihnLmluZm8oIl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3Q6c3RvcmVkUmVwb3J0ZXJVUkwiLHUpLHUpcih1KTtlbHNlewovLyBjaGVjayBpZiB0aGVyZSBpcyBhbnkgaHlwZXJ0eSB0aGF0IHN1YnNjcmliZWQgdGhlIGRhdGFPYmplY3RVUkwKdmFyIGM9dC5yZWdpc3RyeS5nZXREYXRhT2JqZWN0U3Vic2NyaWJlckh5cGVydHkoZSk7Zy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OnN1YnNjcmliZXJIeXBlcnR5IixjKSxjP3IoYyk6Ci8vIHNlYXJjaCBpbiBkb21haW4gcmVnaXN0cnkgZm9yIHRoZSBoeXBlcnR5IGFzc29jaWF0ZWQgdG8gdGhlIGRhdGFPYmplY3QKLy8gc2VhcmNoIGluIGNhc2UgaXMgYSBzdWJzY3JpYmVyIHdobyB3YW50cyB0byBrbm93IHRoZSByZXBvcnRlcgovLyBUbyBiZSByZXZpZXdlZCBpbiBvcmRlciB0byBhdm9pZCB0aGUgZGlzY292ZXJ5IHRyYW5zYWN0aW9uCnQuX2NvcmVEaXNjb3ZlcnkuZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMKHMsaSkudGhlbihmdW5jdGlvbihlKXtnLmluZm8oIl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3Q6ZGF0YU9iamVjdCIsZSksdC5kYXRhT2JqZWN0c0lkZW50aXR5W3NdPWUucmVwb3J0ZXIsZy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OmRhdGFPYmplY3QucmVwb3J0ZXIiLGUucmVwb3J0ZXIpLHIoZS5yZXBvcnRlcil9LGZ1bmN0aW9uKGUpe24oZSl9KX19fSl9fSx7a2V5OiJfcmVzb2x2ZURvbWFpbiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ImRvbWFpbi1pZHA6Ly8iK2U6ImRvbWFpbi1pZHA6Ly9nb29nbGUuY29tIn19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9tZXNzYWdlQnVzPWUsdC5hZGRHVUlMaXN0ZW5lcnMoKX19LHtrZXk6ImNvcmVEaXNjb3ZlcnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlRGlzY292ZXJ5fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29yZURpc2NvdmVyeT1lfX0se2tleToicmVnaXN0cnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWdpc3RyeX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3JlZ2lzdHJ5PWV9fSx7a2V5OiJpZGVudGl0aWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWRlbnRpdGllc30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2lkZW50aXRpZXM9ZX19LHtrZXk6ImlkcHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saXN0T2ZJZHBzfX1dKSxJZGVudGl0eU1vZHVsZX0oKTt0LmRlZmF1bHQ9YixlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQ3NCksX19lc01vZHVsZTohMH19LC8qIDQ3NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0NzUpLGUuZXhwb3J0cz1yKDEzKS5OdW1iZXIuaXNJbnRlZ2VyfSwvKiA0NzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcikKdmFyIG49cigyMSk7bihuLlMsIk51bWJlciIse2lzSW50ZWdlcjpyKDQ3Nil9KX0sLyogNDc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjMgTnVtYmVyLmlzSW50ZWdlcihudW1iZXIpCnZhciBuPXIoNDEpLG89TWF0aC5mbG9vcjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIW4oZSkmJmlzRmluaXRlKGUpJiZvKGUpPT09ZX19LC8qIDQ3NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKSxpPXIoNykscz1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGkpLGE9cy5nZXRMb2dnZXIoIklkZW50aXR5TW9kdWxlIiksdT1mdW5jdGlvbiBHdWlGYWtlKGUsdCl7KDAsby5kZWZhdWx0KSh0aGlzLEd1aUZha2UpLGEubG9nKCJGYWtlR1VJX2RlcGxveWVkIik7dmFyIHI9dGhpcztyLl91cmw9ZSxyLl93YWl0VGltZT0xZTQsci5fbWVzc2FnZUJ1cz10LHIuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoci5fdXJsLGZ1bmN0aW9uKGUpe2lmKGUuaGFzT3duUHJvcGVydHkoInR5cGUiKSYmImNyZWF0ZSI9PT1lLnR5cGUmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSYmZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KCJpZGVudGl0aWVzIikmJmUuYm9keS52YWx1ZS5oYXNPd25Qcm9wZXJ0eSgiaWRwcyIpKXt2YXIgdD1lLmJvZHkudmFsdWUuaWRlbnRpdGllcyxuPWUuYm9keS52YWx1ZS5pZHBzLG89dm9pZCAwO289dm9pZCAwIT09dFswXT97dHlwZToiaWRlbnRpdHkiLHZhbHVlOnRbMF0sY29kZToyMDB9Ont0eXBlOiJpZHAiLHZhbHVlOm5bMV0uZG9tYWluLGNvZGU6MjAwfTt2YXIgaT17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5Om99OwovLyB0byB0ZXN0IG9uIHRoZSBpZGVudGl0eSBzaWRlIHRoZSBsaXN0ZW5lciB3aXRob3V0IHRoZSB0aW1lb3V0Ci8vIGNhbiByZXByZXNlbnQgdGhlIHRpbWUgdGhlIHVzZXIgdGFrZXMgdG8gY2hvb3NlIGFuZCBpZGVudGl0eQoid2FpdCI9PT1lLmJvZHkudmFsdWU/c2V0VGltZW91dChmdW5jdGlvbigpe3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSl9LHIuX3dhaXRUaW1lKTpyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGkpfWVsc2UgYS5sb2coIklnbm9yaW5nIG1lc3NhZ2VzIG5vdCBpbnRlbmRlZCB0byBGYWtlR1VJLiIsZSl9KX07dC5kZWZhdWx0PXUsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDc4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNyksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9cigyMDUpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPWYuZ2V0TG9nZ2VyKCJJZGVudGl0eU1hbmFnZXIiKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSWRlbnRpdHlNYW5hZ2VyKGUpeygwLHMuZGVmYXVsdCkodGhpcyxJZGVudGl0eU1hbmFnZXIpLHRoaXMuX2lkbT1lfXJldHVybigwLHUuZGVmYXVsdCkoSWRlbnRpdHlNYW5hZ2VyLFt7a2V5OiJyZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXsKLy8gdGhpcy5faWRtLmlkZW50aXRpZXMucmVzZXQoKTsKdGhpcy5faWRtLmlkZW50aXRpZXM9bmV3IGQuZGVmYXVsdCh0aGlzLl9pZG0uaWRlbnRpdGllcy5fdHlwZSx0aGlzLl9pZG0uaWRlbnRpdGllcy5fc3RvcmFnZU1hbmFnZXIpfX0se2tleToiX2lzVG9TZXRJRCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9WyJkb21haW4taWRwIiwicnVudGltZSIsImRvbWFpbiJdLHI9ZS5mcm9tO2lmKGUuYm9keSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJzb3VyY2UiKSYmKHI9ZS5ib2R5LnNvdXJjZSksZS5ib2R5JiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInN1YnNjcmliZXIiKSYmKHI9ZS5ib2R5LnN1YnNjcmliZXIpLCJmb3J3YXJkIj09PWUudHlwZSlyZXR1cm4hMTsKLy8gU2lnbmFsbGluZyBNZXNzYWdlcyBiZXR3ZWVuIFAyUCBTdHVicyBkb24ndCBoYXZlIElkZW50aXRpZXMuIEZGUwppZihyLmluY2x1ZGVzKCIvcDJwcmVxdWVzdGVyLyIpfHxyLmluY2x1ZGVzKCIvcDJwaGFuZGxlci8iKSlyZXR1cm4hMTt2YXIgbj1yLnNwbGl0KCI6Ly8iKSxvPW5bMF07cmV0dXJuLTE9PT10LmluZGV4T2Yobyl9fSx7a2V5OiJwcm9jZXNzTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gcC5sb2coIltJZGVudGl0eU1hbmFnZXIucHJvY2Vzc01lc3NhZ2VdICIsZSksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pewovLyBza2lwIG1lc3NhZ2VzIHRoYXQgZG9uJ3QgbmVlZCBpZGVudGl0eSB0b2tlbnMgaW4gdGhlIGJvZHkKaWYoIXQuX2lzVG9TZXRJRChlKSlyZXR1cm4gcihlKTsvKiAgICAgIGxldCBmcm9tID0gbWVzc2FnZS5mcm9tOwogICAgICAgIGxldCBzb3VyY2VVUkwgPSB1bmRlZmluZWQ7CiAgICAgICAgaWYgKCBtZXNzYWdlLmhhc093blByb3BlcnR5KCdib2R5JykgJiYgbWVzc2FnZS5ib2R5Lmhhc093blByb3BlcnR5KCdzb3VyY2UnKSkgewogICAgICAgICAgZnJvbSA9IG1lc3NhZ2UuYm9keS5zb3VyY2U7CiAgICAgICAgfQogICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnZm9yd2FyZCcpIHsKICAgICAgICAgIGZyb20gPSBtZXNzYWdlLmJvZHkuZnJvbTsKICAgICAgICB9CiAgICAgICAgIGlmIChtZXNzYWdlLmhhc093blByb3BlcnR5KCdib2R5JykgJiYgbWVzc2FnZS5ib2R5Lmhhc093blByb3BlcnR5KCdzdWJzY3JpYmVyJykpIHsKICAgICAgICAgIGZyb20gPSBtZXNzYWdlLmJvZHkuc3Vic2NyaWJlcjsKICAgICAgICB9Ki8KdC5faWRtLmdldFRva2VuKGUpLnRoZW4oZnVuY3Rpb24odCl7ZS5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpfHwoZS5ib2R5PXt9KSxlLmJvZHkuaWRlbnRpdHk9dCxyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cC5lcnJvcihlKSxuKGUpfSl9KX19XSksSWRlbnRpdHlNYW5hZ2VyfSgpO3QuZGVmYXVsdD15LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ3OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDcpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxsPXIoNDgwKSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDQ4MSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig0ODIpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPShyKDE0KSxmLmdldExvZ2dlcigiUEVQIiksZnVuY3Rpb24oKXsvKioKICAqIENyZWF0ZXMgYSBQb2xpY3kgRW5mb3JjZW1lbnQgUG9pbnQgKFBFUCkgaW5zdGFuY2UKICAqIEBwYXJhbSAgICB7T2JqZWN0fSAgICBjb250ZXh0CiAgKi8KZnVuY3Rpb24gUEVQKGUpeygwLHMuZGVmYXVsdCkodGhpcyxQRVApO3ZhciB0PXRoaXM7dC5wZHA9bmV3IHkuZGVmYXVsdChlKSx0LmFjdGlvbnNTZXJ2aWNlPW5ldyBkLmRlZmF1bHQoZSksdC5jb250ZXh0PWUsZS5wZXA9dCwKLy9UT0RPIHNob3VsZCBiZSBhZGRlZCBhIHRyaWdnZXIgdG8gdmVyaWZ5IHdoZW4gdGhlIGxvYWRDb25maWd1cmF0aW9ucyBpcyBzdWNjZXNzZnVsbHkgY29tcGxldGVkCmUubG9hZENvbmZpZ3VyYXRpb25zKCl9LyoqCiAgKiByZXR1cm4gdGhlIG1lc3NhZ2VCdXMgaW4gdGhpcyBSZWdpc3RyeQogICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICovCnJldHVybigwLHUuZGVmYXVsdCkoUEVQLFt7a2V5OiJhZGRHVUlMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLmNvbnRleHQubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihlLmNvbnRleHQucGVwVVJMLGZ1bmN0aW9uKHQpe3ZhciByPXQuYm9keS5tZXRob2Qsbj12b2lkIDA7aWYoImFkZFRvR3JvdXAiPT09cil7dmFyIG89dC5ib2R5LnBhcmFtcy5ncm91cE5hbWUsaT10LmJvZHkucGFyYW1zLnVzZXJFbWFpbDtuPWUuY29udGV4dC5hZGRUb0dyb3VwKG8saSl9ZWxzZSBpZigiY3JlYXRlR3JvdXAiPT09cil7dmFyIHM9dC5ib2R5LnBhcmFtcy5ncm91cE5hbWU7bj1lLmNvbnRleHQuY3JlYXRlR3JvdXAocyl9ZWxzZSBpZigiYWRkUG9saWN5Ij09PXIpe3ZhciBhPXQuYm9keS5wYXJhbXMuc291cmNlLHU9dC5ib2R5LnBhcmFtcy5rZXksYz10LmJvZHkucGFyYW1zLnBvbGljeSxmPXQuYm9keS5wYXJhbXMuY29tYmluaW5nQWxnb3JpdGhtO249ZS5hZGRQb2xpY3koYSx1LGMsZil9ZWxzZSBpZigiZGVsZXRlR3JvdXAiPT09cil7dmFyIGw9dC5ib2R5LnBhcmFtcy5ncm91cE5hbWU7bj1lLmNvbnRleHQuZGVsZXRlR3JvdXAobCl9ZWxzZSBpZigicmVtb3ZlUG9saWN5Ij09PXIpe3ZhciBkPXQuYm9keS5wYXJhbXMuc291cmNlLHA9dC5ib2R5LnBhcmFtcy5rZXk7bj1lLnJlbW92ZVBvbGljeShkLHApfWVsc2UgaWYoInNhdmVQb2xpY2llcyI9PT1yKXt2YXIgeT10LmJvZHkucGFyYW1zLnNvdXJjZTtuPWUuY29udGV4dC5zYXZlUG9saWNpZXMoeSl9ZWxzZSBpZigidXNlclBvbGljaWVzIj09PXIpbj1lLmNvbnRleHQudXNlclBvbGljaWVzO2Vsc2UgaWYoImFjdGl2ZVVzZXJQb2xpY3kiPT09cil7dmFyIGg9dC5ib2R5LnBhcmFtcy51c2VyUG9saWN5O2gmJihlLmNvbnRleHQuYWN0aXZlVXNlclBvbGljeT1oKSxuPWUuY29udGV4dC5hY3RpdmVVc2VyUG9saWN5fWVsc2UgaWYoInVzZXJQb2xpY3kiPT09cil7dmFyIHY9dC5ib2R5LnBhcmFtcy5rZXk7bj1lLmNvbnRleHQudXNlclBvbGljaWVzW3ZdfWVsc2Uic2F2ZUFjdGl2ZVBvbGljeSI9PT1yP249ZS5jb250ZXh0LnNhdmVBY3RpdmVQb2xpY3koKToiZ2V0TXlFbWFpbHMiPT09cj9uPWUuY29udGV4dC5nZXRNeUVtYWlscygpOiJnZXRNeUh5cGVydGllcyI9PT1yP249ZS5jb250ZXh0LmdldE15SHlwZXJ0aWVzKCk6Imdyb3VwcyI9PT1yP249ZS5jb250ZXh0Lmdyb3VwczoiZ2V0R3JvdXBzTmFtZXMiPT09ciYmKG49ZS5jb250ZXh0LmdldEdyb3Vwc05hbWVzKCkpO2lmKCJyZW1vdmVGcm9tR3JvdXAiPT09cil7dmFyIGc9dC5ib2R5LnBhcmFtcy5ncm91cE5hbWUsYj10LmJvZHkucGFyYW1zLnVzZXJFbWFpbDtuPWUuY29udGV4dC5yZW1vdmVGcm9tR3JvdXAoZyxiKX12YXIgXz17dHlwZToiZXhlY3V0ZSIsdmFsdWU6bixjb2RlOjIwMH0sbT17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Ol99O2UuY29udGV4dC5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG0pfSl9fSx7a2V5OiJhZGRQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2lmKCFlKXRocm93IG5ldyBFcnJvcigic291cmNlIGlzIG5vdCBkZWZpbmVkIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJrZXkgaXMgbm90IGRlZmluZWQiKTtzd2l0Y2godm9pZCAwPT09cj9yPW5ldyB2LmRlZmF1bHQodCxbXSxbXSxuKTpyIGluc3RhbmNlb2Ygdi5kZWZhdWx0fHwocj1uZXcgdi5kZWZhdWx0KHIua2V5LHIucnVsZXMsci5hY3Rpb25zLHIuY29tYmluaW5nQWxnb3JpdGhtKSksZSl7Y2FzZSJTRVJWSUNFX1BST1ZJREVSIjp0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKGUscix0KTticmVhaztjYXNlIlVTRVIiOnRoaXMuY29udGV4dC51c2VyUG9saWNpZXNbdF09cix0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKGUpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gcG9saWN5IHNvdXJjZTogIitlKX19fSx7a2V5OiJhdXRob3Jpc2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczsKLy8gbG9nLmxvZygnW1BvbGljeS5QRVAgQXV0aG9yaXNlXSAnLCBtZXNzYWdlKTsKLy8gbG9nLmxvZyhtZXNzYWdlKTsKaWYoIWUpdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlIGlzIG5vdCBkZWZpbmVkIik7aWYoIWUuZnJvbSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UuZnJvbSBpcyBub3QgZGVmaW5lZCIpO2lmKCFlLnRvKXRocm93IG5ldyBFcnJvcigibWVzc2FnZS50byBpcyBub3QgZGVmaW5lZCIpO2lmKCFlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlLnR5cGUgaXMgbm90IGRlZmluZWQiKTtyZXR1cm4gZS5ib2R5PWUuYm9keXx8e30sbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe2UuYm9keT1lLmJvZHl8fHt9O3ZhciBpPXIscz1pLnBkcC5ldmFsdWF0ZVBvbGljaWVzKGUsdCk7Ik5vdCBBcHBsaWNhYmxlIj09PXMmJihzPWkuY29udGV4dC5kZWZhdWx0QmVoYXZpb3VyLGUuYm9keS5hdXRoPSExKSxpLmFjdGlvbnNTZXJ2aWNlLmVuZm9yY2VQb2xpY2llcyhlLHQpLnRoZW4oZnVuY3Rpb24odCl7Zm9yKHZhciByIGluIHQpaWYoZT10W3JdLHMpZS5ib2R5LmF1dGg9dm9pZCAwPT09ZS5ib2R5LmF1dGh8fGUuYm9keS5hdXRoLG4oZSk7ZWxzZXt2YXIgaT17Ym9keTp7Y29kZTo0MDMsZGVzY3JpcHRpb246IkJsb2NrZWQgYnkgcG9saWN5In0sZnJvbTplLnRvLHRvOmUuZnJvbSx0eXBlOiJyZXNwb25zZSJ9O28oaSl9fSxmdW5jdGlvbihlKXtvKGUpfSl9KX19LHtrZXk6ImF1dGhvcmlzZVN5bmMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMDtyZXR1cm4gZS5ib2R5PWUuYm9keXx8e30sdD10aGlzLnBkcC5ldmFsdWF0ZVBvbGljaWVzKGUsITApLCJOb3QgQXBwbGljYWJsZSI9PT10JiYodD10aGlzLmNvbnRleHQuZGVmYXVsdEJlaGF2aW91ciksdH19LHtrZXk6InJlbW92ZVBvbGljeSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoInNvdXJjZSBpcyBub3QgZGVmaW5lZCIpO2lmKCIqIiE9PWUmJiF0KXRocm93IG5ldyBFcnJvcigia2V5IGlzIG5vdCBkZWZpbmVkIik7c3dpdGNoKGUpe2Nhc2UiKiI6dGhpcy5jb250ZXh0LnNlcnZpY2VQcm92aWRlclBvbGljeT17fSx0aGlzLmNvbnRleHQudXNlclBvbGljaWVzPXt9LHRoaXMuY29udGV4dC5hY3RpdmVVc2VyUG9saWN5PXZvaWQgMCx0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKCJVU0VSIiksdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcygiU0VSVklDRV9QUk9WSURFUiIpLHRoaXMuY29udGV4dC5zYXZlQWN0aXZlUG9saWN5KCk7YnJlYWs7Y2FzZSJTRVJWSUNFX1BST1ZJREVSIjpkZWxldGUgdGhpcy5jb250ZXh0LnNlcnZpY2VQcm92aWRlclBvbGljeVt0XSx0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKCk7YnJlYWs7Y2FzZSJVU0VSIjpkZWxldGUgdGhpcy5jb250ZXh0LnVzZXJQb2xpY2llc1t0XSx0PT09dGhpcy5jb250ZXh0LmFjdGl2ZVVzZXJQb2xpY3kmJih0aGlzLmNvbnRleHQuYWN0aXZlVXNlclBvbGljeT12b2lkIDAsdGhpcy5jb250ZXh0LnNhdmVBY3RpdmVQb2xpY3koKSksdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcygiVVNFUiIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gcG9saWN5IHNvdXJjZTogIitlKX19fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0Lm1lc3NhZ2VCdXN9LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuY29udGV4dC5tZXNzYWdlQnVzPWUsdC5hZGRHVUlMaXN0ZW5lcnMoKX19XSksUEVQfSgpKTt0LmRlZmF1bHQ9ZyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBBY3Rpb25zU2VydmljZShlKXsoMCxzLmRlZmF1bHQpKHRoaXMsQWN0aW9uc1NlcnZpY2UpLHRoaXMuY29udGV4dD1lfXJldHVybigwLHUuZGVmYXVsdCkoQWN0aW9uc1NlcnZpY2UsW3trZXk6ImVuZm9yY2VQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9ci5jb250ZXh0LmdldFBvbGljaWVzKGUsdCk7dm9pZCAwIT09aT92b2lkIDAhPT1pLnNlcnZpY2VQcm92aWRlclBvbGljeT9pLnNlcnZpY2VQcm92aWRlclBvbGljeS5lbmZvcmNlQWN0aW9ucyhyLmNvbnRleHQsZSkudGhlbihmdW5jdGlvbihlKXtuKGUpfSxmdW5jdGlvbihlKXtvKGUpfSk6dm9pZCAwIT09aS51c2VyUG9saWN5P2kudXNlclBvbGljeS5lbmZvcmNlQWN0aW9ucyhyLmNvbnRleHQsZSkudGhlbihmdW5jdGlvbihlKXtuKGUpfSxmdW5jdGlvbihlKXtvKGUpfSk6bihbZV0pOm4oW2VdKX0pfX0se2tleToiZm9yd2FyZFRvSUQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeSl0aHJvdyBuZXcgRXJyb3IoImZvcndhcmQgbWVzc2FnZSB0byBnaXZlbiBJRCBpcyB1bnN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Iik7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXtpZihyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5Lmh5cGVydGllc0xpc3RbMF0uaHlwZXJ0eVVSTD09PWUudG8peyJydW50aW1lIiE9PWUudG8uc3BsaXQoIjovLyIpWzBdP3IuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuZGlzY292ZXJIeXBlcnR5UGVyVXNlcih0KS50aGVuKGZ1bmN0aW9uKHQpe2UudG89dC5oeXBlcnR5VVJMLGUuYm9keS52aWE9dm9pZCAwLG4oZSksci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShlKX0sZnVuY3Rpb24oZSl7byhlKX0pOm4oZSl9ZWxzZSBuKGUpfSl9fSx7a2V5OiJmb3J3YXJkVG9IeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoIXIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkpdGhyb3cgbmV3IEVycm9yKCJmb3J3YXJkIG1lc3NhZ2UgdG8gZ2l2ZW4gSUQgaXMgdW5zdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCIpO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4pe2lmKHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuaHlwZXJ0aWVzTGlzdFswXS5oeXBlcnR5VVJMPT09ZS50byl7InJ1bnRpbWUiIT09ZS50by5zcGxpdCgiOi8vIilbMF0/KGUudG89dCxlLmJvZHkudmlhPXZvaWQgMCxuKGUpLHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSkpOm4oZSl9ZWxzZSBuKGUpfSl9fSx7a2V5OiJzZW5kQXV0b21hdGljTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4pe3ZhciBvPXtmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e3ZhbHVlOnR9LHR5cGU6ZS50eXBlfTtuKGUpLHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobyl9KX19XSksQWN0aW9uc1NlcnZpY2V9KCk7dC5kZWZhdWx0PWMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDgxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDE0NSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBQRFAoZSl7KDAsby5kZWZhdWx0KSh0aGlzLFBEUCksdGhpcy5jb250ZXh0PWUsdGhpcy5vcGVyYXRvcnM9bmV3IHUuZGVmYXVsdH1yZXR1cm4oMCxzLmRlZmF1bHQpKFBEUCxbe2tleToiZXZhbHVhdGVQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNvbnRleHQuZ2V0UG9saWNpZXMoZSx0KSxuPSJOb3QgQXBwbGljYWJsZSI7aWYodm9pZCAwIT09ciYmKChuPXRoaXMuZXZhbHVhdGVQb2xpY3koZSxyLnNlcnZpY2VQcm92aWRlclBvbGljeSx0KSl8fCJOb3QgQXBwbGljYWJsZSI9PT1uKSl7dmFyIG89dGhpcy5ldmFsdWF0ZVBvbGljeShlLHIudXNlclBvbGljeSx0KTsiTm90IEFwcGxpY2FibGUiIT09byYmKG49byl9cmV0dXJuIG59fSx7a2V5OiJldmFsdWF0ZVBvbGljeSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPSJOb3QgQXBwbGljYWJsZSI7cmV0dXJuIHQmJihuPXQuZXZhbHVhdGVSdWxlcyh0aGlzLmNvbnRleHQsZSxyKSksbn19XSksUERQfSgpO3QuZGVmYXVsdD1jLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDIwNiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigyMDcpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMjA4KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDQ4Myksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBQb2xpY3koZSx0LHIsbil7aWYoKDAscy5kZWZhdWx0KSh0aGlzLFBvbGljeSksIWUpdGhyb3cgbmV3IEVycm9yKCJrZXkgaXMgbm90IGRlZmluZWQiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoImFjdGlvbnMgYXJlIG5vdCBkZWZpbmVkIik7dGhpcy5hY3Rpb25zPXIsdGhpcy5rZXk9ZSx0aGlzLl9zZXRSdWxlcyh0KSx0aGlzLl9zZXRDb21iaW5pbmdBbGdvcml0aG0obil9cmV0dXJuKDAsdS5kZWZhdWx0KShQb2xpY3ksW3trZXk6ImFkZEFjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLmFjdGlvbnMucHVzaCh7bWV0aG9kOmUscGFyYW06dH0pfX0se2tleToiY3JlYXRlUnVsZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXt2b2lkIDA9PT1vJiYobz10aGlzLmdldExhc3RQcmlvcml0eSgpKzEpO3ZhciBpPW5ldyB2LmRlZmF1bHQoZSx0LHIsbixvKTt0aGlzLnJ1bGVzLnB1c2goaSl9fSx7a2V5OiJkZWxldGVSdWxlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJ1bGVzLmluZGV4T2YoZSk7dGhpcy5ydWxlcy5zcGxpY2UodCwxKX19LHtrZXk6ImVuZm9yY2VBY3Rpb25zIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgcz1bXTtpZigwIT09ci5hY3Rpb25zLmxlbmd0aCl7Zm9yKHZhciBhIGluIHIuYWN0aW9ucyl7dmFyIHU9ZS5wZXAuYWN0aW9uc1NlcnZpY2Vbci5hY3Rpb25zW2FdLm1ldGhvZF0odCxyLmFjdGlvbnNbYV0ucGFyYW0pO3MucHVzaCh1KX1vLmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0sZnVuY3Rpb24oZSl7aShlKX0pfWVsc2UgbihbdF0pfSl9fSx7a2V5OiJldmFsdWF0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49W107Zm9yKHZhciBvIGluIHRoaXMucnVsZXMpbi5wdXNoKHRoaXMucnVsZXNbb10uZXZhbHVhdGUoZSx0LHIpKTtyZXR1cm4gdGhpcy5jb21iaW5pbmdBbGdvcml0aG0uY29tYmluZShuKX19LHtrZXk6ImdldExhc3RQcmlvcml0eSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1bXTtpZigwIT09dGhpcy5ydWxlcy5sZW5ndGgpe2Zvcih2YXIgdCBpbiB0aGlzLnJ1bGVzKWUucHVzaCh0aGlzLnJ1bGVzW3RdLnByaW9yaXR5KTtyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCxlKX1yZXR1cm4tMX19LHtrZXk6ImdldFJ1bGVCeVByaW9yaXR5Iix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5ydWxlcylpZihTdHJpbmcodGhpcy5ydWxlc1t0XS5wcmlvcml0eSk9PT1TdHJpbmcoZSkpcmV0dXJuIHRoaXMucnVsZXNbdF07dGhyb3cgRXJyb3IoIlJ1bGUgd2l0aCBwcmlvcml0eSAiK2UrIiBkb2VzIG5vdCBleGlzdCEiKX19LHtrZXk6Il9zZXRDb21iaW5pbmdBbGdvcml0aG0iLHZhbHVlOmZ1bmN0aW9uKGUpe3N3aXRjaChlfHwoZT0iYmxvY2tPdmVycmlkZXMiKSxlKXtjYXNlImJsb2NrT3ZlcnJpZGVzIjp0aGlzLmNvbWJpbmluZ0FsZ29yaXRobT1uZXcgZC5kZWZhdWx0O2JyZWFrO2Nhc2UiYWxsb3dPdmVycmlkZXMiOnRoaXMuY29tYmluaW5nQWxnb3JpdGhtPW5ldyBmLmRlZmF1bHQ7YnJlYWs7Y2FzZSJmaXJzdEFwcGxpY2FibGUiOnRoaXMuY29tYmluaW5nQWxnb3JpdGhtPW5ldyB5LmRlZmF1bHQ7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcigiVW5rbm93biBhbGdvcml0aG06ICIrZSl9fX0se2tleToiX3NldFJ1bGVzIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLnJ1bGVzPVtdO2Zvcih2YXIgdCBpbiBlKXt2YXIgcj1lW3RdO3ZvaWQgMD09PXIucHJpb3JpdHkmJihyLnByaW9yaXR5PXRoaXMuZ2V0TGFzdFByaW9yaXR5KCkrMSksciBpbnN0YW5jZW9mIHYuZGVmYXVsdHx8KHI9bmV3IHYuZGVmYXVsdChyLmRlY2lzaW9uLHIuY29uZGl0aW9uLHIuc2NvcGUsci50YXJnZXQsci5wcmlvcml0eSkpLHRoaXMucnVsZXMucHVzaChyKX19fSx7a2V5OiJzb3J0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVsZXMuc29ydChmdW5jdGlvbihlLHQpe3ZhciByPWUucHJpb3JpdHksbj10LnByaW9yaXR5O3JldHVybiByPG4/LTE6cj5uPzE6MH0pfX1dKSxQb2xpY3l9KCk7dC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDgzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDQ4NCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxNDYpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMTQpLGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSdWxlKGUsdCxyLG4saSl7KDAsby5kZWZhdWx0KSh0aGlzLFJ1bGUpLHRoaXMuZGVjaXNpb249ZSx0aGlzLnNldENvbmRpdGlvbih0KSx0aGlzLnByaW9yaXR5PWksdGhpcy5zY29wZT1yLHRoaXMudGFyZ2V0PW59cmV0dXJuKDAscy5kZWZhdWx0KShSdWxlLFt7a2V5OiJzZXRDb25kaXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBmLmRlZmF1bHR8fGUgaW5zdGFuY2VvZiB1LmRlZmF1bHR8fGUgaW5zdGFuY2VvZiB1LmRlZmF1bHQpdGhpcy5jb25kaXRpb249ZTtlbHNle3N3aXRjaChlLmF0dHJpYnV0ZSl7Y2FzZSJzdWJzY3JpcHRpb24iOnRoaXMuY29uZGl0aW9uPW5ldyB1LmRlZmF1bHQoZS5hdHRyaWJ1dGUsZS5vcGVyYXRvcixlLnBhcmFtcyk7YnJlYWs7Y2FzZSB2b2lkIDA6dGhpcy5jb25kaXRpb249bmV3IHUuZGVmYXVsdChlKTticmVhaztkZWZhdWx0OnRoaXMuY29uZGl0aW9uPW5ldyBmLmRlZmF1bHQoZS5hdHRyaWJ1dGUsZS5vcGVyYXRvcixlLnBhcmFtcyl9fX19LHtrZXk6ImV2YWx1YXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49cj90LnRvOnQuZnJvbSxvPXZvaWQgMDtzd2l0Y2godGhpcy5zY29wZSl7Y2FzZSJnbG9iYWwiOmJyZWFrO2Nhc2UiaHlwZXJ0eSI6aWYoKDAsbC5pc0RhdGFPYmplY3RVUkwpKG4pKXt2YXIgaT1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRSZXBvcnRlclVSTFN5bmNob25vdXMoKDAsbC5yZW1vdmVQYXRoRnJvbVVSTCkobikpO3ZvaWQgMCE9PWkmJihvPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlOYW1lKGkpKX1lbHNlImh5cGVydHkiPT09bi5zcGxpdCgiOi8vIilbMF0mJihvPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlOYW1lKCgwLGwucmVtb3ZlUGF0aEZyb21VUkwpKG4pKSk7aWYobz09PXRoaXMudGFyZ2V0KWJyZWFrO3JldHVybiJOb3QgQXBwbGljYWJsZSI7Y2FzZSJpZGVudGl0eSI6dmFyIHM9dm9pZCAwO2lmKCgwLGwuaXNEYXRhT2JqZWN0VVJMKShuKSl7dmFyIGE9ZS5ydW50aW1lUmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKCgwLGwucmVtb3ZlUGF0aEZyb21VUkwpKG4pKTtzPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihhKX1lbHNlImh5cGVydHkiPT09bi5zcGxpdCgiOi8vIilbMF0mJihzPWUucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlPd25lcigoMCxsLnJlbW92ZVBhdGhGcm9tVVJMKShuKSkpO2lmKHZvaWQgMCE9PXMmJihzPSgwLGwuZ2V0VXNlckVtYWlsRnJvbVVSTCkocykpLHM9PT10aGlzLnRhcmdldClicmVhaztyZXR1cm4iTm90IEFwcGxpY2FibGUifXJldHVybiB0aGlzLmNvbmRpdGlvbi5pc0FwcGxpY2FibGUoZSx0LHRoaXMuc2NvcGUsdGhpcy50YXJnZXQpP3RoaXMuZGVjaXNpb246Ik5vdCBBcHBsaWNhYmxlIn19XSksUnVsZX0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMTQ2KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDE0NSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig0ODUpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQWR2YW5jZWRDb25kaXRpb24oZSl7KDAsby5kZWZhdWx0KSh0aGlzLEFkdmFuY2VkQ29uZGl0aW9uKSx0aGlzLm9wZXJhdG9ycz1uZXcgZi5kZWZhdWx0LHZvaWQgMCE9PWUub3BlcmF0b3JzJiYoZT1lLmNvbmRpdGlvbiksZT10aGlzLmJ1aWxkQ29uZGl0aW9uKGUpLHRoaXMuY29uZGl0aW9uPWV9cmV0dXJuKDAscy5kZWZhdWx0KShBZHZhbmNlZENvbmRpdGlvbixbe2tleToiYnVpbGRDb25kaXRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGVbMV0pP2VbMV09dGhpcy5idWlsZENvbmRpdGlvbihlWzFdKToic3Vic2NyaXB0aW9uIj09PWVbMV0uYXR0cmlidXRlP2VbMV09bmV3IGQuZGVmYXVsdChlWzFdLmF0dHJpYnV0ZSxlWzFdLm9wZXJhdG9yLGVbMV0ucGFyYW1zKTplWzFdPW5ldyB1LmRlZmF1bHQoZVsxXS5hdHRyaWJ1dGUsZVsxXS5vcGVyYXRvcixlWzFdLnBhcmFtcyksdm9pZCAwIT09ZVsyXSYmKEFycmF5LmlzQXJyYXkoZVsyXSk/ZVsyXT10aGlzLmJ1aWxkQ29uZGl0aW9uKGVbMl0pOiJzdWJzY3JpcHRpb24iPT09ZVsyXS5hdHRyaWJ1dGU/ZVsyXT1uZXcgZC5kZWZhdWx0KGVbMl0uYXR0cmlidXRlLGVbMl0ub3BlcmF0b3IsZVsyXS5wYXJhbXMpOmVbMl09bmV3IHUuZGVmYXVsdChlWzJdLmF0dHJpYnV0ZSxlWzJdLm9wZXJhdG9yLGVbMl0ucGFyYW1zKSksZX19LHtrZXk6ImlzQXBwbGljYWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvLGkscyl7Zm9yKG98fChvPXRoaXMuY29uZGl0aW9uWzBdLGk9dGhpcy5jb25kaXRpb25bMV0scz10aGlzLmNvbmRpdGlvblsyXSk7IShpIGluc3RhbmNlb2YgdS5kZWZhdWx0KSYhKGkgaW5zdGFuY2VvZiBkLmRlZmF1bHQpJiJib29sZWFuIiE9dHlwZW9mIGk7KWk9dGhpcy5pc0FwcGxpY2FibGUoZSx0LHIsbixpWzBdLGlbMV0saVsyXSk7aWYodm9pZCAwIT09cylmb3IoOyEocyBpbnN0YW5jZW9mIHUuZGVmYXVsdCkmIShzIGluc3RhbmNlb2YgZC5kZWZhdWx0KSYiYm9vbGVhbiIhPXR5cGVvZiBzOylzPXRoaXMuaXNBcHBsaWNhYmxlKGUsdCxyLG4sc1swXSxzWzFdLHNbMl0pO3ZhciBhPSJib29sZWFuIj09dHlwZW9mIGk/aTppLmlzQXBwbGljYWJsZShlLHQscixuKSxjPXZvaWQgMDtyZXR1cm4gdm9pZCAwIT09cyYmKGM9ImJvb2xlYW4iPT10eXBlb2Ygcz9zOnMuaXNBcHBsaWNhYmxlKGUsdCxyLG4pKSx0aGlzLm9wZXJhdG9yc1tvXShbYSxjXSl9fV0pLEFkdmFuY2VkQ29uZGl0aW9ufSgpO3QuZGVmYXVsdD1wLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDU5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cig2NyksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig0ODYpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNjgpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoMTQ2KSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1mdW5jdGlvbihlKXsvKioKICAqIENyZWF0ZXMgYSBuZXcgU3Vic2NyaXB0aW9uQ29uZGl0aW9uLgogICogQGNsYXNzCiAgKiBAcGFyYW0gIHtzdHJpbmd9ICBhdHRyaWJ1dGUKICAqIEBwYXJhbSAge3N0cmluZ30gIG9wZXJhdG9yCiAgKiBAcGFyYW0gIHsqfSAgICAgICBwYXJhbXMKICAqLwpmdW5jdGlvbiBTdWJzY3JpcHRpb25Db25kaXRpb24oZSx0LHIpe3JldHVybigwLHMuZGVmYXVsdCkodGhpcyxTdWJzY3JpcHRpb25Db25kaXRpb24pLCgwLGYuZGVmYXVsdCkodGhpcywoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLl9fcHJvdG9fX3x8KDAsby5kZWZhdWx0KShTdWJzY3JpcHRpb25Db25kaXRpb24pKS5jYWxsKHRoaXMsZSx0LHIpKX0vKioKICAqIFZlcmlmaWVzIGlmIHRoZSBzdWJzY3JpcHRpb24gY29uZGl0aW9uIGlzIGFwcGxpY2FibGUgdG8gdGhlIG1lc3NhZ2UuIEZpcnN0LCB2ZXJpZmllcyBpZiB0aGUgbWVzc2FnZSBpcyBvZiB0aGUgc3Vic2NyaXB0aW9uIHR5cGU7IHNlY29uZCwgdmVyaWZpZXMgaWYgdGhlIG1lc3NhZ2UgaXMgZnJvbSBhIHJlbW90ZSBydW50aW1lIHRvIGd1YXJhbnRlZSB0aGF0IHRoZSBzdWJzY3JpcHRpb24gaXMgYmVpbmcgdmFsaWRhdGVkIGluIHRoZSBkZXN0aW5hdGlvbiBydW50aW1lOyB0aGlyZCwgdmVyaWZpZXMgaWYgdGhlIHN1YnNjcmlwdGlvbiBwcmVmZXJlbmNlIGlzIG1ldC4KICAqIEBwYXJhbSAge09iamVjdH0gICAgY29udGV4dCAgIGVudmlyb25tZW50IHdoZXJlIHRoZSBQb2xpY3kgRW5naW5lIGlzIGJlaW5nIHVzZWQKICAqIEBwYXJhbSAge09iamVjdH0gICAgbWVzc2FnZQogICovCnJldHVybigwLHkuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLGUpLCgwLHUuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLFt7a2V5OiJpc0FwcGxpY2FibGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISEoInN1YnNjcmliZSI9PT10LnR5cGUmZS5pc0Zyb21SZW1vdGVTTSh0LmZyb20pKSYmKDAsZC5kZWZhdWx0KShTdWJzY3JpcHRpb25Db25kaXRpb24ucHJvdG90eXBlLl9fcHJvdG9fX3x8KDAsby5kZWZhdWx0KShTdWJzY3JpcHRpb25Db25kaXRpb24ucHJvdG90eXBlKSwiaXNBcHBsaWNhYmxlIix0aGlzKS5jYWxsKHRoaXMsZSx0KX19XSksU3Vic2NyaXB0aW9uQ29uZGl0aW9ufSh2LmRlZmF1bHQpOy8qKgogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICoqLwp0LmRlZmF1bHQ9ZyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig1OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0ODcpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKTt0LmRlZmF1bHQ9ZnVuY3Rpb24gZ2V0KGUsdCxyKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbj0oMCxzLmRlZmF1bHQpKGUsdCk7aWYodm9pZCAwPT09bil7dmFyIGk9KDAsby5kZWZhdWx0KShlKTtyZXR1cm4gbnVsbD09PWk/dm9pZCAwOmdldChpLHQscil9aWYoInZhbHVlImluIG4pcmV0dXJuIG4udmFsdWU7dmFyIGE9bi5nZXQ7aWYodm9pZCAwIT09YSlyZXR1cm4gYS5jYWxsKHIpfX0sLyogNDg3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0ODgpLF9fZXNNb2R1bGU6ITB9fSwvKiA0ODggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDg5KTt2YXIgbj1yKDEzKS5PYmplY3Q7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCl9fSwvKiA0ODkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciBuPXIoNDUpLG89cigxNDMpLmY7cigxMzQpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8obihlKSx0KX19KX0sLyogNDkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjkpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNTkpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDY3KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDY4KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDcpLHY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShoKSxnPXIoMjAyKSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksXz1yKDQ5MSksbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLFI9di5nZXRMb2dnZXIoIk1lc3NhZ2VCdXMiKSx3PWZ1bmN0aW9uKGUpey8qIHByaXZhdGUKICBfcmVnaXN0cnk6IFJlZ2lzdHJ5CiAgX2ZvcndhcmRzOiB7IDxmcm9tLXVybD46IHsgZmw6IE1zZ0xpc3RlbmVyLCBzYW5kYm94VG9VcmxzOiBNYXAoU2FuZGJveCwgW3RvLXVybF0pLCB1cmxUb1NhbmRib3g6IHsgdG8tdXJsOiBTYW5kYm94IH0gfSB9CiAgIF9waXBlbGluZTogUGlwZWxpbmUKICAqLwovL1RPRE86IGZ1dHVyZSBvcHRpbWl6YXRpb24KLy8xLiBtZXNzYWdlIGJhdGNoIHByb2Nlc3Npbmcgd2l0aCBzZXRJbnRlcnZhbAovLzIuIHJlc29sdmUgZGVmYXVsdCBnYXRld2F5L3Byb3Rvc3R1YiB3aXRoIHJlZ2lzdGVyLnJlc29sdmUKZnVuY3Rpb24gTWVzc2FnZUJ1cyhlKXsoMCx1LmRlZmF1bHQpKHRoaXMsTWVzc2FnZUJ1cyk7dmFyIHQ9KDAsZC5kZWZhdWx0KSh0aGlzLChNZXNzYWdlQnVzLl9fcHJvdG9fX3x8KDAscy5kZWZhdWx0KShNZXNzYWdlQnVzKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3JlZ2lzdHJ5PWUsdC5fZm9yd2FyZHM9e30sdC5fcGlwZWxpbmVJbj1uZXcgbS5kZWZhdWx0KGZ1bmN0aW9uKGUpe1IuZXJyb3IoIlBJUEVMSU5FLUVSUk9SOiAiLCgwLG8uZGVmYXVsdCkoZSkpfSksdC5fcGlwZWxpbmVPdXQ9bmV3IG0uZGVmYXVsdChmdW5jdGlvbihlKXtSLmVycm9yKCJQSVBFTElORS1FUlJPUjogIiwoMCxvLmRlZmF1bHQpKGUpKX0pLHR9cmV0dXJuKDAseS5kZWZhdWx0KShNZXNzYWdlQnVzLGUpLCgwLGYuZGVmYXVsdCkoTWVzc2FnZUJ1cyxbe2tleToicG9zdE1lc3NhZ2UiLC8qKgogICAgICogUG9zdCBhIG1lc3NhZ2UgZm9yIHJvdXRpbmcuIEl0IHdpbGwgZmlyc3Qgc2VhcmNoIGZvciBhIGxpc3RlbmVyLCBpZiB0aGVyZSBpcyBubyBvbmUsIGl0IHNlbmRzIHRvIGEgZXh0ZXJuYWwgcm91dGluZyB1c2luZyB0aGUgX29uUG9zdE1lc3NhZ2UuCiAgICAgKiBFeHRlcm5hbCByb3V0aW5nIHVzZSB0aGUgcmVnaXN0cnkucmVzb2x2ZSguLikgbWV0aG9kIHRvIGRlY2lkZSB0aGUgZGVzdGluYXRpb24gc2FuZGJveC4KICAgICAqIEBwYXJhbSAge01lc3NhZ2V9IGluTXNnICAgICAgICAgICAgSlNPTiB3aXRoIG1hbmRhdG9yeSBNZXNzYWdlIHN0cnVjdHVyZSB7aWQsIHR5cGUsIGZyb20sIHRvfQogICAgICogQHBhcmFtICB7Q2FsbGJhY2t9IHJlc3BvbnNlQ2FsbGJhY2sgT3B0aW9uYWwgY2FsbGJhY2sgaWYgYSByZXNwb25zZSBpcyBleHBlY3RlZCBmcm9tIHRoZSByZXF1ZXN0LiBBIHJlc3BvbnNlIHdpbGwgYmUgYWx3YXlzIHNlbnQsIGV2ZW4gaWYgaXQgaXMgYSAiVGltZW91dCIuCiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgdGhlIE1lc3NhZ2UgaWQKICAgICAqLwp2YWx1ZTpmdW5jdGlvbihlLHQscil7Ui5pbmZvKCJvblBPU1RNZXNzYWdlOiAiLGUpO3ZhciBuPXRoaXMsbz1mdW5jdGlvbihvKXtpZihuLl9yZXNwb25zZUNhbGxiYWNrKGUsdCxyKSwhbi5fb25SZXNwb25zZShvKSl7dmFyIGk9bi5fc3Vic2NyaXB0aW9uc1tvLnRvXTtpPwovL2RvIG5vdCBwdWJsaXNoIG9uIGRlZmF1bHQgYWRkcmVzcywgYmVjYXVzZSBvZiBsb29wYmFjayBjeWNsZQpuLl9wdWJsaXNoT24oaSxvKToKLy9pZiB0aGVyZSBpcyBubyBsaXN0ZW5lciwgc2VuZCB0byBleHRlcm5hbCBpbnRlcmZhY2UKbi5fb25Qb3N0TWVzc2FnZShvKX19O2lmKG4uX2dlbklkKGUpLG4uX2lzVG9Qcm9jZXNzKGUpKXtuLl9pc0luY29taW5nTWVzc2FnZShlKT9uLl9waXBlbGluZUluLnByb2Nlc3MoZSxvKTpuLl9waXBlbGluZU91dC5wcm9jZXNzKGUsbyl9ZWxzZSBvKGUpO3JldHVybiBlLmlkfX0se2tleToiX2lzVG9Qcm9jZXNzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1bImRvbWFpbiIsImRvbWFpbi1pZHAiLCJnbG9iYWwiLCJoeXBlcnR5LXJ1bnRpbWUiLCJydW50aW1lIl0scj1lLmZyb20uc3BsaXQoIjovLyIpLG49clswXSxvPWUudG8uc3BsaXQoIjovLyIpLGk9b1swXSxzPWUuZnJvbSxhPWUudG87Ci8vIFNpZ25hbGxpbmcgbWVzc2FnZXMgYmV0d2VlbiBQMlAgU3R1YnMgZG9uJ3QgaGF2ZSB0byBiZSB2ZXJpZmllZC4gRkZTCnJldHVybiBlLmJvZHkmJmUuYm9keS5zb3VyY2UmJihzPWUuYm9keS5zb3VyY2UpLGUuYm9keSYmZS5ib2R5LnN1YnNjcmliZXImJihzPWUuYm9keS5zdWJzY3JpYmVyKSwtMT09PXMuaW5kZXhPZigiL3AycGhhbmRsZXIvIikmJi0xPT09cy5pbmRleE9mKCIvcDJwcmVxdWVzdGVyLyIpJiYtMT09PWEuaW5kZXhPZigiL3AycGhhbmRsZXIvIikmJi0xPT09YS5pbmRleE9mKCIvcDJwcmVxdWVzdGVyLyIpJiYoKCF0aGlzLl9yZWdpc3RyeS5pc0xvY2FsKHMpfHwhdGhpcy5fcmVnaXN0cnkuaXNMb2NhbChlLnRvKSkmJighKGUuZnJvbT09PW58fGUudG89PT1pfHwicmVhZCI9PT1lLnR5cGV8fCJyZXNwb25zZSI9PT1lLnR5cGV8fGUuZnJvbS5pbmNsdWRlcygiaHlwZXJ0eTovLyIpJiYiZGVsZXRlIj09PWUudHlwZSkmJigtMT09PXQuaW5kZXhPZihuKXx8LTE9PT10LmluZGV4T2YoaSkpKSl9fSx7a2V5OiJfaXNJbmNvbWluZ01lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMDsKLy9UT0RPOiB0aGlzIHN1YnNjcmliZXIgdmFsaWRhdGlvbiBzaG91bGQgbm90IGV4aXN0LCBiZWNhdXNlIGlzIG91dGRhdGVkCi8vVE9ETzogdGhlIHN5bmNoZXIgYW5kIHN5bmNoZXIgbWFuYWdlciBub3QgZm9sbG93aW5nIHRoZSBjb3JyZWN0IHNwZWM7Ci8vVE9ETzogdGhpcyBzdWJzY3JpYmVyIHZhbGlkYXRpb24gc2hvdWxkIG5vdCBleGlzdCwgYmVjYXVzZSBpcyBvdXRkYXRlZAovL1RPRE86IHRoZSBzeW5jaGVyIGFuZCBzeW5jaGVyIG1hbmFnZXIgbm90IGZvbGxvd2luZyB0aGUgY29ycmVjdCBzcGVjOwpyZXR1cm4iZm9yd2FyZCI9PT1lLnR5cGU/KFIuaW5mbygiW01lc3NhZ2VCdXMgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLnR5cGU6ICIsZS50eXBlKSx0PWUuYm9keS5mcm9tKTplLmhhc093blByb3BlcnR5KCJib2R5IikmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgic291cmNlIikmJmUuYm9keS5zb3VyY2U/KFIuaW5mbygiW01lc3NhZ2VCdXMgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLmJvZHkuc291cmNlOiAiLGUuYm9keS5zb3VyY2UpLHQ9ZS5ib2R5LnNvdXJjZSk6ZS5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpJiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInN1YnNjcmliZXIiKSYmZS5ib2R5LnN1YnNjcmliZXI/KFIuaW5mbygiW01lc3NhZ2VCdXMgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLmJvZHkuc3Vic2NyaWJlcjogIixlLmJvZHkuc3Vic2NyaWJlciksdD1lLmJvZHkuc3Vic2NyaWJlcik6ZS5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpJiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlcG9ydGVyIikmJmUuYm9keS5yZXBvcnRlcj8oUi5pbmZvKCJbTWVzc2FnZUJ1cyAtIGlzSW5jb21pbmdNZXNzYWdlXSAtIG1lc3NhZ2UuYm9keS5yZXBvcnRlcjogIixlLmJvZHkucmVwb3J0ZXIpLHQ9ZS5ib2R5LnJlcG9ydGVyKTooUi5pbmZvKCJbTWVzc2FnZUJ1cyAtIGlzSW5jb21pbmdNZXNzYWdlXSAtIG1lc3NhZ2UuZnJvbSAiLGUuZnJvbSksdD1lLmZyb20pLFIuaW5mbygiW01lc3NhZ2VCdXMgLSBpc0luY29taW5nTWVzc2FnZV0gLSBjaGVjayBpZiBpc0xvY2FsOiAiLHQpLCF0aGlzLl9yZWdpc3RyeS5pc0xvY2FsKHQpfX0se2tleToiYWRkUHVibGlzaCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMsbj1yLl9mb3J3YXJkc1tlXTtpZighbil7bj17Y291bnRlcjowLGZsOnIuYWRkTGlzdGVuZXIoZSxmdW5jdGlvbih0KXtSLmluZm8oIk1CLVBVQkxJU0g6ICggIitlKyIgKSIpLHIuX29uUG9zdE1lc3NhZ2UodCl9KSxyZW1vdmU6ZnVuY3Rpb24oKXswPT09LS10LmNvdW50ZXImJih0LmZsLnJlbW92ZSgpLGRlbGV0ZSByLl9mb3J3YXJkc1tlXSl9fSxyLl9mb3J3YXJkc1tlXT1ufXJldHVybiBuLmNvdW50ZXIrKyxufX0se2tleToiYWRkRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiByLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24obil7Ui5pbmZvKCJNQi1GT1JXQVJEOiAoICIrZSsiIHRvICIrdCsiICkiKSxyLmZvcndhcmQodCxuKX0pfX0se2tleToiZm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ci5fc3Vic2NyaXB0aW9uc1tlXTtuJiZyLl9wdWJsaXNoT24obix0KX19LHtrZXk6Il9vblBvc3RNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOwovL3Jlc29sdmUgZXh0ZXJuYWwgcHJvdG9zdHViLi4uCnQuX3JlZ2lzdHJ5LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihyLG4pe24/dC5mb3J3YXJkKHIsbik6dC5mb3J3YXJkKHIsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtSLmVycm9yKCJSRVNPTFZFLUVSUk9SOiAiLGUpfSl9fSx7a2V5OiJwaXBlbGluZUluIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGlwZWxpbmVJbn19LHtrZXk6InBpcGVsaW5lT3V0IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGlwZWxpbmVPdXR9fV0pLE1lc3NhZ2VCdXN9KGIuZGVmYXVsdCk7dC5kZWZhdWx0PXcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDcpLHU9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShhKSxjPShyKDE0KSx1LmdldExvZ2dlcigiUGlwZWxpbmUiKSxmdW5jdGlvbigpey8qIHB1YmxpYwogICAgaGFuZGxlcnM6ICgoUGlwZUNvbnRleHQpID0+IHZvaWQpW10KICAgIG9uRmFpbDogKGVycm9yKSA9PiB2b2lkCiAgKi8KZnVuY3Rpb24gUGlwZWxpbmUoZSl7KDAsby5kZWZhdWx0KSh0aGlzLFBpcGVsaW5lKTt2YXIgdD10aGlzO3QuaGFuZGxlcnM9W10sdC5vbkZhaWw9ZX0vKioKICAgKiBJbnNlcnQgYSBtZXNzYWdlIGluIHRoZSBwaXBlbGluZSBxdWV1ZS4gQWxsIG1lc3NhZ2VzIGFyZSB3cmFwcGVkIHdpdGggYSBQaXBlQ29udGV4dC4KICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBtc2cgICAgICAgTWVzc2FnZSBmb3IgdGhlIHF1ZXVlCiAgICogQHBhcmFtICB7Q2FsbGJhY2t9IG9uRGVsaXZlciBXaGVuIG1lc3NhZ2UgaXMgZmluaXNoZWQgcHJvY2Vzc2luZyBmcm9tIGFsbCBoYW5kbGVycywgaXQgd2lsbCBiZSBkZWxpdmVyZWQgaW4gdGhpcyBjYWxsYmFjay4KICAgKi8KcmV0dXJuKDAscy5kZWZhdWx0KShQaXBlbGluZSxbe2tleToicHJvY2VzcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHIuaGFuZGxlcnMubGVuZ3RoPjApe3ZhciBuPW5ldyBsKHIuaGFuZGxlcnMpO24ubmV4dChuZXcgZihyLG4sZSx0KSl9ZWxzZSB0KGUpfX1dKSxQaXBlbGluZX0oKSksZj1mdW5jdGlvbigpey8qIHByaXZhdGUKICAgIF9pblN0b3A6IGJvb2xlYW4KICAgICBfcGlwZWxpbmU6IFBpcGVsaW5lCiAgICBfaXRlcjogSXRlcmF0b3IKICAgIF9tc2c6IE1lc3NhZ2UKICAqLwpmdW5jdGlvbiBQaXBlQ29udGV4dChlLHQscixuKXsoMCxvLmRlZmF1bHQpKHRoaXMsUGlwZUNvbnRleHQpO3ZhciBpPXRoaXM7aS5faW5TdG9wPSExLGkuX3BpcGVsaW5lPWUsaS5faXRlcj10LGkuX21zZz1yLGkuX29uRGVsaXZlcj1ufXJldHVybigwLHMuZGVmYXVsdCkoUGlwZUNvbnRleHQsW3trZXk6Im5leHQiLC8qKgogICAgICogUHJvY2VlZCB0byB0aGUgbmV4dCBpbnRlcmNlcHRvciBoYW5kbGVyLCB1bmxlc3MgdGhlcmUgd2FzIGFuIGVycm9yLiBJZiBpdCdzIHRoZSBsYXN0IG9uZSwgcHJvY2VlZCB0byBvbkRlbGl2ZXIgaGFuZGxlci4KICAgICAqLwp2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5TdG9wfHwoZS5faXRlci5oYXNOZXh0P2UuX2l0ZXIubmV4dChlKTplLl9vbkRlbGl2ZXIoZS5fbXNnKSl9fSx7a2V5OiJkZWxpdmVyIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5TdG9wfHwoZS5faW5TdG9wPSEwLGUuX29uRGVsaXZlcihlLl9tc2cpKX19LHtrZXk6ImZhaWwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5faW5TdG9wfHwodC5faW5TdG9wPSEwLHQuX3BpcGVsaW5lLm9uRmFpbCYmdC5fcGlwZWxpbmUub25GYWlsKGUpKX19LHtrZXk6InBpcGVsaW5lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGlwZWxpbmV9fSx7a2V5OiJtc2ciLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tc2d9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9tc2c9ZX19XSksUGlwZUNvbnRleHR9KCksbD1mdW5jdGlvbigpey8qIHByaXZhdGUKICAgIF9pbmRleDogbnVtYmVyCiAgICBfYXJyYXk6IFtdCiAgKi8KZnVuY3Rpb24gSXRlcmF0b3IoZSl7KDAsby5kZWZhdWx0KSh0aGlzLEl0ZXJhdG9yKSx0aGlzLl9pbmRleD0tMSx0aGlzLl9hcnJheT1lfXJldHVybigwLHMuZGVmYXVsdCkoSXRlcmF0b3IsW3trZXk6Imhhc05leHQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbmRleDx0aGlzLl9hcnJheS5sZW5ndGgtMX19LHtrZXk6Im5leHQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbmRleCsrLHRoaXMuX2FycmF5W3RoaXMuX2luZGV4XX19XSksSXRlcmF0b3J9KCk7dC5kZWZhdWx0PWMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjkpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNDkzKSxkPXIoNykscD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGQpLHk9cC5nZXRMb2dnZXIoIkNyeXB0b01hbmFnZXIiKSxoPWZ1bmN0aW9uKCl7LyoqCiAgKiBSdW50aW1lZmFjdG9yeSBpcyBwYXNzZWQgaW4gdGhlIGNvc3RydWN0b3IsIGJlY2F1c2UgdGhlIG5vZGVKUyBoYXMgYSBkaWZmZXJlbnQgY3J5cHRvIG1vZHVsZQogICogZnJvbSB0aGUgYnJvd3Nlci4gUnVudGltZUZhY3RvcnkgcHJvdmlkZXMgYSB3cmFwcGVyIGZvciB0aGUgZnVjdGlvbnMgb2Ygbm9kZUpTLCBzbyB0aGV5IGNhbiBiZQogICogaW52b2tlZCBicm93c2VyIGxpa2UuCiAgKi8KZnVuY3Rpb24gQ3J5cHRvKGUpeygwLHUuZGVmYXVsdCkodGhpcyxDcnlwdG8pO3ZhciB0PXRoaXM7ImZ1bmN0aW9uIj09dHlwZW9mIGUuY3JlYXRlV2ViY3J5cHRvP3QuX2NyeXB0bz1lLmNyZWF0ZVdlYmNyeXB0bygpOnQuX2NyeXB0bz1jcnlwdG99LyoqCiAgKiBQZXJmb3JtcyBhIFJTQSBlbmNyeXB0aW9uCiAgKiBAcGFyYW0gICB7QXJyYXlCdWZmZXJ9ICAgIHZhbHVlICAgIHRoZSBwdWJsaWMga2V5CiAgKiBAcGFyYW0gICB7QnVmZmVyU291cmNlfSAgICB2YWx1ZSAgICBkYXRhIHRvIGJlIGVuY3J5cGVkCiAgKiBAcmV0dXJuICB7VWludDhBcnJheX0gICBlbmNyeXB0ZWQgZGF0YQogICovCnJldHVybigwLGYuZGVmYXVsdCkoQ3J5cHRvLFt7a2V5OiJlbmNyeXB0UlNBIix2YWx1ZTpmdW5jdGlvbihlLHQpe3kubG9nKCJlbmNyeXB0UlNBOnB1YktleSIsZSkseS5sb2coImVuY3J5cHRSU0E6ZGF0YSIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuX2ltcG9ydFJTQWVuY3J5cHRLZXkobmV3IFVpbnQ4QXJyYXkoZSkpLnRoZW4oZnVuY3Rpb24oZSl7ci5fY3J5cHRvLnN1YnRsZS5lbmNyeXB0KHtuYW1lOiJSU0EtT0FFUCJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQp0KS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgZW5jcnlwdGVkIGRhdGEKLy8gbG9nLmxvZygnY3J5cHRvLWVuY3J5cHRSU0EnLCBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpKTsKbihuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY3J5cHRvLWVuY3J5cHRSU0EnLCBlcnIpOwpvKGUpfSl9KX0pfX0se2tleToiZGVjcnlwdFJTQSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt5LmxvZygiZGVjcnlwdFJTQTpwcml2S2V5IixlKSx5LmxvZygiZGVjcnlwdFJTQTpkYXRhIix0KTt2YXIgcj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7ci5faW1wb3J0UlNBZGVjcnlwdEtleShlKS50aGVuKGZ1bmN0aW9uKGUpe3IuX2NyeXB0by5zdWJ0bGUuZGVjcnlwdCh7bmFtZToiUlNBLU9BRVAifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKdCkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1uZXcgVWludDhBcnJheShlKTsKLy8gbG9nLmxvZygnY3J5cHRvLWRlY3J5cHRSU0EnLCBkZWNyeXB0ZWREYXRhKTsKbih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjcnlwdG8tZGVjcnlwdFJTQScsIGVycik7Cm8oZSl9KX0pfSl9fSx7a2V5OiJzaWduUlNBIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obixvKXtyLl9pbXBvcnRSU0FzaWduS2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7ci5fY3J5cHRvLnN1YnRsZS5zaWduKHtuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQooMCxsLmVuY29kZVVURjgpKHQpKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgc2lnbmF0dXJlCi8vIGxvZy5sb2coJ2NyeXB0by1zaWduUlNBJywgbmV3IFVpbnQ4QXJyYXkoc2lnbmF0dXJlKSk7Cm4obmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2NyeXB0by1zaWduUlNBJywgZXJyKTsKbyhlKX0pfSl9KX19LHtrZXk6InZlcmlmeVJTQSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtuLl9pbXBvcnRSU0F2ZXJpZnlLZXkoZSkudGhlbihmdW5jdGlvbihlKXtuLl9jcnlwdG8uc3VidGxlLnZlcmlmeSh7bmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKciwvL0FycmF5QnVmZmVyIG9mIHRoZSBzaWduYXR1cmUKKDAsbC5lbmNvZGVVVEY4KSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIHRoZSBzaWduYXR1cmUgaXMgdHJ1ZSBvciBub3QKLy8gbG9nLmxvZygnY3J5cHRvLXZlcmlmeVJTQScsIGlzdmFsaWQpOwpvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2NyeXB0by12ZXJpZnlSU0EnLCBlcnIpOwppKGUpfSl9KX0pfX0se2tleToiZW5jcnlwdEFFUyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3kubG9nKCJlbmNyeXB0QUVTOmtleSIsZSkseS5sb2coImVuY3J5cHRBRVM6ZGF0YSIsdCkseS5sb2coImVuY3J5cHRBRVM6aXYiLHIpO3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtuLl9pbXBvcnRBRVNrZXkoZSkudGhlbihmdW5jdGlvbihlKXtuLl9jcnlwdG8uc3VidGxlLmVuY3J5cHQoe25hbWU6IkFFUy1DQkMiLAovL0Rvbid0IHJlLXVzZSBpbml0aWFsaXphdGlvbiB2ZWN0b3JzIQovL0Fsd2F5cyBnZW5lcmF0ZSBhIG5ldyBpdiBldmVyeSB0aW1lIHlvdXIgZW5jcnlwdCEKaXY6cn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCigwLGwuZW5jb2RlVVRGOCkodCkpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhbiBBcnJheUJ1ZmZlciBjb250YWluaW5nIHRoZSBlbmNyeXB0ZWQgZGF0YQovLyBsb2cubG9nKCdjcnlwdG8tZW5jcnlwdEFFUycsIG5ldyBVaW50OEFycmF5KGVuY3J5cHRlZCkpOwpvKG5ldyBVaW50OEFycmF5KGUpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjcnlwdG8tZW5jcnlwdEFFUycsIGVycik7CmkoZSl9KX0pfSl9fSx7a2V5OiJkZWNyeXB0QUVTIix2YWx1ZTpmdW5jdGlvbihlLHQscil7eS5sb2coImRlY3J5cHRBRVM6a2V5IixlKSx5LmxvZygiZGVjcnlwdEFFUzpkYXRhIix0KSx5LmxvZygiZGVjcnlwdEFFUzppdiIscik7dmFyIG49dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihvLGkpe24uX2ltcG9ydEFFU2tleShlKS50aGVuKGZ1bmN0aW9uKGUpe24uX2NyeXB0by5zdWJ0bGUuZGVjcnlwdCh7bmFtZToiQUVTLUNCQyIsaXY6cn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnQpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9KDAsbC5kZWNvZGVVVEY4KShuZXcgVWludDhBcnJheShlKSk7eS5sb2coImNyeXB0by1kZWNyeXB0QUVTIix0KSxvKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2NyeXB0by1kZWNyeXB0QUVTJywgZXJyKTsKaShlKX0pfSl9KX19LHtrZXk6Imhhc2hITUFDIix2YWx1ZTpmdW5jdGlvbihlLHQpe3kubG9nKCJoYXNoSE1BQzprZXkiLGUpLHkubG9nKCJoYXNoSE1BQzpkYXRhIix0KTt2YXIgcj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7InN0cmluZyIhPXR5cGVvZiB0JiYodD0oMCxvLmRlZmF1bHQpKHQpLHkubG9nKCJDb252ZXJ0aW5nIGhhc2hITUFDIGlucHVyZWQgREFUQSIpLHkubG9nKCJISGFzaEhNQUM6Iix0KSksci5faW1wb3J0SE1BQ2tleShlKS50aGVuKGZ1bmN0aW9uKGUpe3IuX2NyeXB0by5zdWJ0bGUuc2lnbih7bmFtZToiSE1BQyJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQooMCxsLmVuY29kZVVURjgpKHQpKS50aGVuKGZ1bmN0aW9uKGUpe3kubG9nKCJIYXNoSE1BQyBzaWduYXR1cmU6IixuZXcgVWludDhBcnJheShlKSksCi8vIGxvZy5sb2coJ2NyeXB0by1oYXNoSE1BQycsIHNpZ25hdHVyZSk7Ci8vcmV0dXJucyBhbiBBcnJheUJ1ZmZlciBjb250YWluaW5nIHRoZSBzaWduYXR1cmUKbihuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY3J5cHRvLWhhc2hITUFDJywgZXJyKTsKaShlKX0pfSl9KX19LHtrZXk6InZlcmlmeUhNQUMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt5LmxvZygidmVyaWZ5SE1BQzprZXkiLGUpLHkubG9nKCJ2ZXJpZnlITUFDOmRhdGEiLHQpLHkubG9nKCJ2ZXJpZnlITUFDOnNpZ25hdHVyZSIscik7dmFyIG49dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihpLHMpe24uX2ltcG9ydEhNQUNrZXkoZSkudGhlbihmdW5jdGlvbihlKXsic3RyaW5nIiE9dHlwZW9mIHQmJih0PSgwLG8uZGVmYXVsdCkodCkseS5sb2coIkNvbnZlcnRpbmcgdmVyaWZ5SE1BQyBpbnB1dGVkIERBVEE6Iix0KSksbi5fY3J5cHRvLnN1YnRsZS52ZXJpZnkoe25hbWU6IkhNQUMifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKciwvL0FycmF5QnVmZmVyIG9mIHRoZSBzaWduYXR1cmUKKDAsbC5lbmNvZGVVVEY4KSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIHRoZSBzaWduYXR1cmUgaXMgdHJ1ZSBvciBub3QKLy8gbG9nLmxvZygnY3J5cHRvLXZlcmlmeUhNQUMnLCBpc3ZhbGlkKTsKeS5sb2coInZlcmlmeUhNQUMgcmVzdWx0IixlKSxlP2koZSk6cyhlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3kuZXJyb3IoImNyeXB0by12ZXJpZnlITUFDIixlKSxzKGUpfSl9KX0pfX0se2tleToiZ2VuZXJhdGVSU0FLZXlQYWlyIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17fTtyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe2UuX2NyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoe25hbWU6IlJTQS1QU1MiLG1vZHVsdXNMZW5ndGg6MjA0OCwvL2NhbiBiZSAxMDI0LCAyMDQ4LCBvciA0MDk2CnB1YmxpY0V4cG9uZW50Om5ldyBVaW50OEFycmF5KFsxLDAsMV0pLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbInNpZ24iLCJ2ZXJpZnkiXSkudGhlbihmdW5jdGlvbihvKXsKLy9yZXR1cm5zIGEga2V5cGFpciBvYmplY3QKLy8gbG9nLmxvZyhrZXkpOwplLl9jcnlwdG8uc3VidGxlLmV4cG9ydEtleSgic3BraSIsLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKby5wdWJsaWNLZXkpLnRoZW4oZnVuY3Rpb24ocil7Ci8vcmV0dXJucyB0aGUgZXhwb3J0ZWQga2V5IGRhdGEKLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKcmV0dXJuIHQucHVibGljPW5ldyBVaW50OEFycmF5KHIpLGUuX2NyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCJwa2NzOCIsby5wcml2YXRlS2V5KX0pLnRoZW4oZnVuY3Rpb24oZSl7dC5wcml2YXRlPW5ldyBVaW50OEFycmF5KGUpLAovLyBsb2cubG9nKCdjcnlwdG8tZ2VuZXJhdGVSU0FLZXlQYWlyJywga2V5UGFpcik7CnIodCl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKGUpLG4oZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3kuZXJyb3IoZSksbihlKX0pfSl9fSx7a2V5OiJnZW5lcmF0ZUlWIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgVWludDhBcnJheSgxNik7cmV0dXJuIGUuX2NyeXB0by5nZXRSYW5kb21WYWx1ZXModCksdH19LHtrZXk6ImdlbmVyYXRlUmFuZG9tIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgVWludDhBcnJheSgzMik7ZS5fY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh0KTsKLy8gYWRkIGluIHRoZSBmaXJzdCA0IGJ5dGVzIG9mIHRoZSBhcnJheSB0aGUgYnl0ZXMgZXh0cmFjdGVkIHByZXZpb3VzbHk7CmZvcih2YXIgcj1EYXRlLm5vdygpLG49KDAsbC5lbmNvZGVVVEY4KShyLnRvU3RyaW5nKCkpLG89bi5zbGljZShuLmxlbmd0aC00LG4ubGVuZ3RoKSxpPTA7aTw0O2krKyl0W2ldPW9baV07cmV0dXJuIHR9fSx7a2V5OiJnZW5lcmF0ZVBNUyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IFVpbnQ4QXJyYXkoNDgpO3JldHVybiBlLl9jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHQpLHR9fSx7a2V5OiJnZW5lcmF0ZU1hc3RlclNlY3JldCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9bmV3IFVpbnQ4QXJyYXkoNDgpLHM9dDtyLl9kaWdlc3QoZSkudGhlbihmdW5jdGlvbihlKXtyLmhhc2hITUFDKGUscykudGhlbihmdW5jdGlvbih0KXsKLy9jb3B5IHRoZSBmaXJzdCAzMiBieXRlcyBpbnRvIHRoZSBrZXkKZm9yKHZhciBuPTA7bjwzMjtuKyspaVtuXT10W25dO3JldHVybiByLmhhc2hITUFDKGUscyt0KX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vY29weSB0aGUgZmlyc3QgMTYgYnl0ZXMgdG8gdGhlIGtleSByZW1haW5pbmcgMTYgYnl0ZXMKZm9yKHZhciB0PTA7dDwxNjt0KyspaVt0KzMyXT1lW3RdOwovLyBsb2cubG9nKCdjcnlwdG8tZ2VuZXJhdGVNYXN0ZXJTZWNyZXQnLCBrZXkpOwpuKGkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2NyeXB0by1nZW5lcmF0ZU1hc3RlclNlY3JldCcsIGVycik7Cm8oZSl9KX0pfSl9fSx7a2V5OiJnZW5lcmF0ZUtleXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPVtdLHM9dDsKLy8gaXRlcmF0ZSA0IHRpbWVzIHRvIG9idGFpbiBhIDEwMjQga2V5IHNpemUKci5oYXNoSE1BQyhlLHMpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGkucHVzaCh0KSxyLmhhc2hITUFDKGUscyt0KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGkucHVzaCh0KSxyLmhhc2hITUFDKGUscyt0KX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGkucHVzaCh0KSxyLmhhc2hITUFDKGUscyt0KX0pLnRoZW4oZnVuY3Rpb24oZSl7aS5wdXNoKGUpLAovLyBsb2cubG9nKCdjcnlwdG8tZ2VuZXJhdGVLZXlzJywga2V5KTsKbihpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjcnlwdG8tZ2VuZXJhdGVLZXlzJywgZXJyKTsKbyhlKX0pfSl9fSx7a2V5OiJfaW1wb3J0UlNBc2lnbktleSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJwa2NzOCIsLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKZSx7Ly90aGVzZSBhcmUgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IlJTQVNTQS1QS0NTMS12MV81IixoYXNoOntuYW1lOiJTSEEtMjU2In19LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJzaWduIl0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhIHB1YmxpY0tleSAob3IgcHJpdmF0ZUtleSBpZiB5b3UgYXJlIGltcG9ydGluZyBhIHByaXZhdGUga2V5KQovLyBsb2cubG9nKCdjcnlwdG8tX2ltcG9ydFJTQXNpZ25LZXknLCBwcml2YXRlS2V5KTsKcihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3kuZXJyb3IoImNyeXB0by1faW1wb3J0UlNBc2lnbktleSIsZSksbihlKX0pfSl9fSx7a2V5OiJfaW1wb3J0UlNBdmVyaWZ5S2V5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoInNwa2kiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCmUsey8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwpuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsidmVyaWZ5Il0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhIHB1YmxpY0tleSAob3IgcHJpdmF0ZUtleSBpZiB5b3UgYXJlIGltcG9ydGluZyBhIHByaXZhdGUga2V5KQovLyBsb2cubG9nKCdjcnlwdG8tX2ltcG9ydFJTQXZlcmlmeUtleScsIHB1YmxpY0tleSk7CnIoZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJjcnlwdG8tX2ltcG9ydFJTQXZlcmlmeUtleSIsZSksbihlKX0pfSl9fSx7a2V5OiJfaW1wb3J0UlNBZW5jcnlwdEtleSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJzcGtpIiwvL2NhbiBiZSAnandrJyAocHVibGljIG9yIHByaXZhdGUpLCAnc3BraScgKHB1YmxpYyBvbmx5KSwgb3IgJ3BrY3M4JyAocHJpdmF0ZSBvbmx5KQplLHsvL3RoZXNlIGFyZSB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiUlNBLU9BRVAiLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbImVuY3J5cHQiXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgcHVibGljS2V5IChvciBwcml2YXRlS2V5IGlmIHlvdSBhcmUgaW1wb3J0aW5nIGEgcHJpdmF0ZSBrZXkpCi8vIGxvZy5sb2coJ2NyeXB0by1faW1wb3J0UlNBZW5jcnlwdEtleScsIHB1YmxpY0tleSk7CnIoZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJjcnlwdG8tX2ltcG9ydFJTQWVuY3J5cHRLZXkiLGUubmFtZSksbihlKX0pfSl9fSx7a2V5OiJfaW1wb3J0UlNBZGVjcnlwdEtleSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJwa2NzOCIsLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKZSx7Ly90aGVzZSBhcmUgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IlJTQS1PQUVQIixoYXNoOntuYW1lOiJTSEEtMjU2In19LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJkZWNyeXB0Il0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhIHB1YmxpY0tleSAob3IgcHJpdmF0ZUtleSBpZiB5b3UgYXJlIGltcG9ydGluZyBhIHByaXZhdGUga2V5KQovLyBsb2cubG9nKCdjcnlwdG8tX2ltcG9ydFJTQWRlY3J5cHRLZXknLCBwcml2YXRlS2V5KTsKcihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3kuZXJyb3IoImNyeXB0by1faW1wb3J0UlNBZGVjcnlwdEtleSIsZSksbihlKX0pfSl9fSx7a2V5OiJjb25jYXRQTVN3aXRoUmFuZG9tcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpewovLyBhZGQgUHJlbWFzdGVyS2V5CmZvcih2YXIgbj1uZXcgVWludDhBcnJheShlLmxlbmd0aCt0Lmxlbmd0aCtyLmxlbmd0aCksbz0wO288ZS5sZW5ndGg7bysrKW5bb109ZVtvXTsKLy9hZGQgdG8gcmFuZG9tCmZvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKW5baStlLmxlbmd0aF09ZVtpXTsKLy9hZGQgZnJvbSByYW5kb20KZm9yKHZhciBzPTA7czxyLmxlbmd0aDtzKyspbltzK2UubGVuZ3RoK3QubGVuZ3RoXT1lW3NdO3JldHVybiBufX0se2tleToiX2dlbmVyYXRlMjU2Yml0S2V5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgVWludDhBcnJheSgzMik7cmV0dXJuIGUuX2NyeXB0by5nZXRSYW5kb21WYWx1ZXModCksdH19LHtrZXk6Il9pbXBvcnRITUFDa2V5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fZGlnZXN0KGUpLnRoZW4oZnVuY3Rpb24oZSl7dC5fY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoInJhdyIsLy9jYW4gYmUgJ2p3aycgb3IgJ3JhdycKZSx7Ly90aGlzIGlzIHRoZSBhbGdvcml0aG0gb3B0aW9ucwpuYW1lOiJITUFDIixoYXNoOntuYW1lOiJTSEEtMjU2In0sLy9jYW4gYmUgJ1NIQS0xJywgJ1NIQS0yNTYnLCAnU0hBLTM4NCcsIG9yICdTSEEtNTEyJwpsZW5ndGg6MjU2fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsic2lnbiIsInZlcmlmeSJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgdGhlIHN5bW1ldHJpYyBrZXkKLy8gbG9nLmxvZygnY3J5cHRvLV9pbXBvcnRITUFDa2V5Jywga2V5KTsKcihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfSl9fSx7a2V5OiJfZGlnZXN0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fY3J5cHRvLnN1YnRsZS5kaWdlc3Qoe25hbWU6IlNIQS0yNTYifSxlKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgdGhlIGhhc2ggYXMgYW4gQXJyYXlCdWZmZXIKLy8gbG9nLmxvZygnY3J5cHRvLWRpZ2VzdCcsIG5ldyBVaW50OEFycmF5KGhhc2gpKTsKcihuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKGUpLG4oZSl9KX0pfX0se2tleToiX2ltcG9ydEFFU2tleSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLC8vY2FuIGJlICdqd2snIG9yICdyYXcnCmUsey8vdGhpcyBpcyB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiQUVTLUNCQyJ9LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJlbmNyeXB0IiwiZGVjcnlwdCJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgdGhlIHN5bW1ldHJpYyBrZXkKLy8gbG9nLmxvZygnY3J5cHRvLWltcG9ydEFFU2tleScsIGtleSk7CnIoZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJjcnlwdG8taW1wb3J0QUVTa2V5IixlKSxuKGUpfSl9KX19LHtrZXk6Il9zaGEyNTYiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1uZXcgVGV4dEVuY29kZXIoInV0Zi04IikuZW5jb2RlKGUpO3JldHVybiB0Ll9jcnlwdG8uc3VidGxlLmRpZ2VzdCgiU0hBLTI1NiIscikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5faGV4KGUpfSl9fSx7a2V5OiJfaGV4Iix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj1uZXcgRGF0YVZpZXcoZSksbj0wO248ci5ieXRlTGVuZ3RoO24rPTQpewovLyBVc2luZyBnZXRVaW50MzIgcmVkdWNlcyB0aGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgbmVlZGVkICh3ZSBwcm9jZXNzIDQgYnl0ZXMgZWFjaCB0aW1lKQp2YXIgbz1yLmdldFVpbnQzMihuKSxpPW8udG9TdHJpbmcoMTYpLHM9KCIwMDAwMDAwMCIraSkuc2xpY2UoLSIwMDAwMDAwMCIubGVuZ3RoKTt0LnB1c2gocyl9Ci8vIEpvaW4gYWxsIHRoZSBoZXggc3RyaW5ncyBpbnRvIG9uZQpyZXR1cm4gdC5qb2luKCIiKX19XSksQ3J5cHRvfSgpO3QuZGVmYXVsdD1oLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ5MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBNYXJzaGFscyBhIHN0cmluZyB0byBVaW50OEFycmF5LgpmdW5jdGlvbiBlbmNvZGVVVEY4KGUpe2Zvcih2YXIgdD0wLHI9bmV3IFVpbnQ4QXJyYXkoNCplLmxlbmd0aCksbj0wO24hPWUubGVuZ3RoO24rKyl7dHJ5e2UuY2hhckNvZGVBdChuKX1jYXRjaChlKXtyZXR1cm59dmFyIG89ZS5jaGFyQ29kZUF0KG4pO2lmKG88MTI4KXJbdCsrXT1vO2Vsc2V7aWYobzwyMDQ4KXJbdCsrXT1vPj42fDE5MjtlbHNle2lmKG8+NTUyOTUmJm88NTYzMjApe2lmKCsrbj09ZS5sZW5ndGgpdGhyb3ciVVRGLTggZW5jb2RlOiBpbmNvbXBsZXRlIHN1cnJvZ2F0ZSBwYWlyIjt2YXIgaT1lLmNoYXJDb2RlQXQobik7aWYoaTw1NjMyMHx8aT41NzM0Myl0aHJvdyJVVEYtOCBlbmNvZGU6IHNlY29uZCBjaGFyIGNvZGUgMHgiK2kudG9TdHJpbmcoMTYpKyIgYXQgaW5kZXggIituKyIgaW4gc3Vycm9nYXRlIHBhaXIgb3V0IG9mIHJhbmdlIjtvPTY1NTM2KygoMTAyMyZvKTw8MTApKygxMDIzJmkpLHJbdCsrXT1vPj4xOHwyNDAsclt0KytdPW8+PjEyJjYzfDEyOH1lbHNlCi8vIGMgPD0gMHhmZmZmCnJbdCsrXT1vPj4xMnwyMjQ7clt0KytdPW8+PjYmNjN8MTI4fXJbdCsrXT02MyZvfDEyOH19cmV0dXJuIHIuc3ViYXJyYXkoMCx0KX0KLy8gVW5tYXJzaGFscyBhbiBVaW50OEFycmF5IHRvIHN0cmluZy4KZnVuY3Rpb24gZGVjb2RlVVRGOChlKXtmb3IodmFyIHQ9IiIscj0wO3I8ZS5sZW5ndGg7KXt2YXIgbj1lW3IrK107aWYobj4xMjcpe2lmKG4+MTkxJiZuPDIyNCl7aWYocj49ZS5sZW5ndGgpdGhyb3ciVVRGLTggZGVjb2RlOiBpbmNvbXBsZXRlIDItYnl0ZSBzZXF1ZW5jZSI7bj0oMzEmbik8PDZ8NjMmZVtyXX1lbHNlIGlmKG4+MjIzJiZuPDI0MCl7aWYocisxPj1lLmxlbmd0aCl0aHJvdyJVVEYtOCBkZWNvZGU6IGluY29tcGxldGUgMy1ieXRlIHNlcXVlbmNlIjtuPSgxNSZuKTw8MTJ8KDYzJmVbcl0pPDw2fDYzJmVbKytyXX1lbHNle2lmKCEobj4yMzkmJm48MjQ4KSl0aHJvdyJVVEYtOCBkZWNvZGU6IHVua25vd24gbXVsdGlieXRlIHN0YXJ0IDB4IituLnRvU3RyaW5nKDE2KSsiIGF0IGluZGV4ICIrKHItMSk7aWYocisyPj1lLmxlbmd0aCl0aHJvdyJVVEYtOCBkZWNvZGU6IGluY29tcGxldGUgNC1ieXRlIHNlcXVlbmNlIjtuPSg3Jm4pPDwxOHwoNjMmZVtyXSk8PDEyfCg2MyZlWysrcl0pPDw2fDYzJmVbKytyXX0rK3J9aWYobjw9NjU1MzUpdCs9U3RyaW5nLmZyb21DaGFyQ29kZShuKTtlbHNle2lmKCEobjw9MTExNDExMSkpdGhyb3ciVVRGLTggZGVjb2RlOiBjb2RlIHBvaW50IDB4IituLnRvU3RyaW5nKDE2KSsiIGV4Y2VlZHMgVVRGLTE2IHJlYWNoIjtuLT02NTUzNix0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4+PjEwfDU1Mjk2KSx0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKDEwMjMmbnw1NjMyMCl9fXJldHVybiB0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmVuY29kZVVURjg9ZW5jb2RlVVRGOCx0LmRlY29kZVVURjg9ZGVjb2RlVVRGOH0sLyogNDk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOTcpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNyksZD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGwpLHA9cigxNCkseT1yKDEwMCksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHkpLHY9ZC5nZXRMb2dnZXIoImxvYWRlciIpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBMb2FkZXIoZSx0LHIpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxMb2FkZXIpLCF0KXRocm93IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBkZXNjcmlwdG9yIG5lZWQgdG8ga25vdyB0aGUgcnVudGltZSBjb25maWd1cmF0aW9uIik7aWYoIXIpdGhyb3cgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGRlc2NyaXB0b3IgbmVlZCB0byBrbm93IHRoZSBydW50aW1lIERlc2NyaXB0b3IgaW5zdGFuY2UiKTt0aGlzLmxvZz12LHRoaXMucnVudGltZUNvbmZpZ3VyYXRpb249dCx0aGlzLmRlc2NyaXB0b3JzPXJ9LyoqCiAgICogU2V0IHJ1bnRpbWUgdXJsCiAgICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSBydW50aW1lVVJMCiAgICovCnJldHVybigwLGYuZGVmYXVsdCkoTG9hZGVyLFt7a2V5OiJsb2FkSHlwZXJ0eSIsLyoqCiAgICAgKiBEZXBsb3kgSHlwZXJ0eSBmcm9tIENhdGFsb2d1ZSBVUkwKICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvdHJlZS9tYXN0ZXIvZGF0YW1vZGVsL2NvcmUvYWRkcmVzcwogICAgICoKICAgICAqIEBwYXJhbSB7VVJMLkh5cGVydHlDYXRhbG9ndWVVUkx9IGh5cGVydHlDYXRhbG9ndWVVUkwgLSBUaGUgQ2F0YWxvZ3VlIFVSTCB1c2VkIHRvIGlkZW50aWZ5IGRlc2NyaXB0b3JzIGluIHRoZSBDYXRhbG9ndWUuCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW58VVJMLkh5cGVydHlVUkx9IFtyZXVzZVVSTD1mYWxzZV0gcmV1c2VVUkwgLSByZXVzZVVSTCBpcyB1c2VkIHRvIHJldXNlIHRoZSBoeXBlcnR5VVJMIHByZXZpb3VzbHkgcmVnaXN0cmVkLCBieSBkZWZhdWx0IHRoZSByZXVzZSBpcyBkaXNhYmxlZDsKICAgICAqIEBwYXJhbSB7VVJMfSBhcHBVUkwgLSB0aGUgYXBwIHVybCBvcmlnaW4gYWRkcmVzczsKICAgICAqIEBwYXJhbSB7b2JqZWN0fSBJZHBDb25zdHJhaW50IC0gY29uc3RyYWludHMgdG8gYmUgdXNlZCB3aGVuIHNlbGVjdGluZyB0aGUgaWRlbnRpdHkgdG8gYmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBIeXBlcnR5IGluY2x1ZGluZyBvcmlnaW4sIGlkcCwgYW5kIGlkSGludC4KICAgICAqIEByZXR1cm5zIHtQcm9taXNlPEJvb2xlYW4sIEVycm9yPn0gdGhpcyBpcyBQcm9taXNlIGFuZCByZXR1cm5zIHRydWUgaWYgYWxsIGNvbXBvbmVudHMgYXJlIGxvYWRlZCB3aXRoIHN1Y2Nlc3Mgb3IgYW4gZXJyb3IgaWYgc29tZW9uZSBmYWlscy4KICAgICAqCiAgICAgKiBAbWVtYmVyT2YgTG9hZGVyCiAgICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxyPXRoaXMsbj1hcmd1bWVudHNbMl07YXJndW1lbnRzWzNdO2lmKCF0aGlzLl9yZWFkeVRvVXNlKCkpcmV0dXJuITE7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIEh5cGVydHkgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKGkscyl7dmFyIGE9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGY9dm9pZCAwLGw9ITEsZD1mdW5jdGlvbihlKXt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gU29tZXRoaW5nIGZhaWxlZCBvbiB0aGUgZGVwbG95IGh5cGVydHk6ICIsZSkscyhlKX0seT1mdW5jdGlvbihlKXtsPSEwLHMoZSl9OwovLyBHZXQgSHlwZXJ0eSBkZXNjcmlwdG9yCi8vIFRPRE86IHRoZSByZXF1ZXN0IE1vZHVsZSBzaG91bGQgYmUgY2hhbmdlZCwKLy8gYmVjYXVzZSBhdCB0aGlzIG1vbWVudCBpdCBpcyBpbmNvbXBhdGlibGUgd2l0aCBub2RlanM7Ci8vIFByb2JhYmx5IHdlIG5lZWQgdG8gcGFzcyBhIGZhY3RvcnkgbGlrZSB3ZSBkbyBmb3Igc2FuZGJveGVzOwpyZXR1cm4gdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIC0tLS0tLS0tLS0tLS0tLS0tLSBIeXBlcnR5IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBHZXQgaHlwZXJ0eSBkZXNjcmlwdG9yIGZvciA6IixlKSxyLmRlc2NyaXB0b3JzLmdldEh5cGVydHlEZXNjcmlwdG9yKGUpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDIgYW5kIDMiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDE6IHJldHVybiBoeXBlcnR5IGRlc2NyaXB0b3IiKSwKLy8gaHlwZXJ0eSBjb250YWlucyB0aGUgZnVsbCBwYXRoIG9mIHRoZSBjYXRhbG9ndWUgVVJMLCBlLmcuCi8vIGNhdGFsb2d1ZS5yZXRoaW5rLmV1Ly53ZWxsLWtub3duLy4uLi4uLi4uLi4KYz1lO3ZhciB0PWUuc291cmNlUGFja2FnZVVSTDtyZXR1cm4iL3NvdXJjZVBhY2thZ2UiPT09dD9lLnNvdXJjZVBhY2thZ2U6ci5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHQpfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDI6IHJldHVybiBoeXBlcnR5IHNvdXJjZSBjb2RlIiksCi8vIGF0IHRoaXMgcG9pbnQsIHdlIGhhdmUgY29tcGxldGVkICJzdGVwIDQgYW5kIDUiIGFzIHNob3duIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQKZj1lO3JldHVybiEwfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDM6IHJldHVybiBwb2xpY3kgZW5naW5lIHJlc3VsdCIrZSk7Ci8vIHRoaXMgd2lsbCByZXR1cm4gdGhlIHNhbmRib3ggb3Igb25lIHByb21pc2UgdG8gZ2V0U2FuZGJveDsKcmV0dXJuIHIucmVnaXN0cnkuZ2V0QXBwU2FuZGJveCgpfSx5KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiFsJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDQ6IHJldHVybiB0aGUgc2FuZGJveCIsZSksZSl9LGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDQuMTogVHJ5IHRvIHJlZ2lzdGVyIGEgbmV3IHNhbmRib3giKTsKLy8gY2hlY2sgaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZWQgZm9yIHRoaXMgaHlwZXJ0eSBkZXNjcmlwdG9yIHVybDsKLy8gTWFrZSBTdGVwcyB4eHggLS0tIHh4eAovLyBJbnN0YW50aWF0ZSB0aGUgU2FuZGJveAp2YXIgdD17fTtyZXR1cm4gYyYmYy5oYXNPd25Qcm9wZXJ0eSgiY2FwYWJpbGl0aWVzIikmJih0PWMuc3R1YkNhcGFiaWxpdGllcyksci5fcnVudGltZUZhY3RvcnkuY3JlYXRlU2FuZGJveCh0KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZExpc3RlbmVyKCIqIixmdW5jdGlvbihlKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSl9KSxlfSl9LHkpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNTogcmV0dXJuIHNhbmRib3ggYW5kIHJlZ2lzdGVyIiksdT1lOwovL2RlYnVnZ2VyOwpyZXR1cm4gci5fYWRkcmVzc0FsbG9jYXRpb24uY3JlYXRlKHIuX3JlZ2lzdHJ5Ll9kb21haW4sMSxjLCJoeXBlcnR5Iix0KX0seSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA2OiByZXR1cm4gdGhlIGFkZHJlc3NlcyBmb3IgdGhlIGh5cGVydHkiLHQpLHIucmVnaXN0cnkucmVnaXN0ZXJIeXBlcnR5KHUsZSxjLHQsbikpfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDc6IHJlZ2lzdHJhdGlvbiByZXN1bHQiLGUpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE2IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgphPWUudXJsOwovLyBFeHRlbmQgb3JpZ2luYWwgaHlwZXJ0eSBjb25maWd1cmF0aW9uOwp2YXIgdD17fTtpZighKDAscC5lbXB0eU9iamVjdCkoYy5jb25maWd1cmF0aW9uKSl0cnl7dD0oMCxvLmRlZmF1bHQpKHt9LEpTT04ucGFyc2UoYy5jb25maWd1cmF0aW9uKSl9Y2F0Y2goZSl7dD1jLmNvbmZpZ3VyYXRpb259dC5ydW50aW1lVVJMPXIuX3J1bnRpbWVVUkwsZS5wMnBIYW5kbGVyJiYodC5wMnBIYW5kbGVyPWUucDJwSGFuZGxlcix0LnAycFJlcXVlc3Rlcj1lLnAycFJlcXVlc3Rlcik7Ci8vIFdlIHdpbGwgZGVwbG95IHRoZSBjb21wb25lbnQgLSBzdGVwIDE3IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93Lgp0cnl7cmV0dXJuIHUuZGVwbG95Q29tcG9uZW50KGYuc291cmNlQ29kZSxhLHQpfWNhdGNoKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBFcnJvciBvbiBkZXBsb3kgY29tcG9uZW50OiIsZSkscyhlKX19LHkpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gODogRGVwbG95IGNvbXBvbmVudCBzdGF0dXMgZm9yIGh5cGVydHk6ICIsZSksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTkgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCi8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIgdG8gdGhlIGFwcFNhbmRib3ggb3IgaHlwZXJ0U2FuZGJveDsKci5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGEsZnVuY3Rpb24oZSl7dS5wb3N0TWVzc2FnZShlKX0pOwovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIwIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93Lgp2YXIgdD17cnVudGltZUh5cGVydHlVUkw6YSxzdGF0dXM6ZX07di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIEh5cGVydHk6ICIsdCksaSh0KSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyMSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4Kdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIC0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIil9LHkpLmNhdGNoKGQpfSl9fSx7a2V5OiJsb2FkU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKCF0aGlzLl9yZWFkeVRvVXNlKCkpcmV0dXJuITE7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdUHJvdG9TdHViIGRlc2NyaXB0b3IgdXJsIHBhcmFtZXRlciBpcyBuZWVkZWQiKTtyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihuLGkpewovLyB0byBhbmFseXNlIGlmIGRvbWFpbiBmb3IgcDJwSGFuZGxlcnMgc2hvdWxkIGJlIHNvbWV0aGluZyBlbHNlIGFuZCBub3QgdGhlIGRlZmF1bHQgZG9tYWluIGl0c2VsZgp2YXIgcz0oMCxwLmRpdmlkZVVSTCkoZSkuZG9tYWluO3N8fChzPWUpO3ZhciBhPXZvaWQgMCx1PXZvaWQgMCxjPXZvaWQgMCxmPXZvaWQgMCxsPSExLGQ9dm9pZCAwLHk9ZnVuY3Rpb24oZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdU29tZXRoaW5nIGZhaWxlZCBvbiB0aGUgZGVwbG95IG9mIHByb3RvY29sc3R1YjogIixlKSxpKGUpfSxoPWZ1bmN0aW9uKGUpe2w9ITAsaShlKX0sZz12b2lkIDAsYj17fTt2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0gc3RhcnRpbmcgbG9hZGluZyBmb3IgIixlLCIgd2l0aCBwMnBjb25maWcgIix0KSx2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl1EaXNjb3ZlciBvciBDcmVhdGUgYSBuZXcgUHJvdG9TdHViIGZvciBkb21haW46ICIscyk7Ci8vIHN0ZXAgMiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdHJ5e2lmKHQpaWYodC5oYXNPd25Qcm9wZXJ0eSgiaXNIYW5kbGVyU3R1YiIpJiZ0LmlzSGFuZGxlclN0dWIpCi8vIHN0ZXAgNiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKITAsZD1yLnJ1bnRpbWVVUkwsZz1yLnJlZ2lzdHJ5LmRpc2NvdmVyUDJQU3R1YigpO2Vsc2V7ITA7dmFyIF89dC5yZW1vdGVSdW50aW1lVVJMO2Q9XywKLy8gc3RlcCA0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAovLyBzdGVwIDUgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCmc9ci5yZWdpc3RyeS5kaXNjb3ZlclAyUFN0dWIoXyl9ZWxzZQovLyBzdGVwIDMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCmQ9cyxnPXIucmVnaXN0cnkuZGlzY292ZXJQcm90b3N0dWIocyk7Ci8vIElzIHJlZ2lzdGVkPwp2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0xLiBQcm90byBTdHViIERpc2NvdmVyZWQgZm9yICIsZSwiOiAiLGcpLAovLyBzdGVwIDIzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApuKGcpLHYuaW5mbygiIFtSdW50aW1lLkxvYWRlcl0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpfWNhdGNoKGcpewovLyBpcyBub3QgcmVnaXN0ZWQ/CnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTEuIFByb3RvIFN0dWIgbm90IGZvdW5kICIrZyksCi8vIHN0ZXAgOCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKci5kZXNjcmlwdG9ycy5nZXRTdHViRGVzY3JpcHRvcihlKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdMi4gcmV0dXJuIHRoZSBQcm90b1N0dWIgZGVzY3JpcHRvciIpLAovLyBzdGVwIDkgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnU9ZTt2YXIgdD1lLnNvdXJjZVBhY2thZ2VVUkw7cmV0dXJuIi9zb3VyY2VQYWNrYWdlIj09PXQ/ZS5zb3VyY2VQYWNrYWdlOnIucnVudGltZUNhdGFsb2d1ZS5nZXRTb3VyY2VQYWNrYWdlRnJvbVVSTCh0KX0saCkuY2F0Y2goeSkudGhlbihmdW5jdGlvbihlKXsKLy8gQWNjb3JkaW5nIHRvIGRlYnVnLCBpdCBzZWVtcyBSdW50aW1lQ2F0YWxvZ3VlIGRvZXMgbm90IHN1cHBvcnQgeWV0IGNvbnN0cmFpbnRzLiBJdCBhcHBlYXJzIGVtcHR5ISEhIQovLyBzdGVwIDExIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApyZXR1cm4hbCYmKHUmJnUuY29uc3RyYWludHMmJihiPXUuY29uc3RyYWludHMpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTMuIHJldHVybiB0aGUgUHJvdG9TdHViIFNvdXJjZSBDb2RlIiksZj1lLHIucmVnaXN0cnkuZ2V0U2FuZGJveChzLGIpKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIHN0ZXAgMTUgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnJldHVybiFsJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdNC4gaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZXJlZCB0aGVuIHJldHVybiB0aGUgc2FuZGJveCAiLGUpLGE9ZSxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBzdGVwIDEzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTUuIFNhbmRib3ggd2FzIG5vdCBmb3VuZCwgY3JlYXRpbmcgYSBuZXcgb25lICIsZSksci5fcnVudGltZUZhY3RvcnkuY3JlYXRlU2FuZGJveChiKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZExpc3RlbmVyKCIqIixmdW5jdGlvbihlKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSl9KSxlfSkpfSkudGhlbihmdW5jdGlvbihuKXsKLy8gc3RlcCAxNiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKcmV0dXJuIWwmJih2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl02LiByZXR1cm4gdGhlIHNhbmRib3ggaW5zdGFuY2UgYW5kIHJlZ2lzdGVyIixuLCJ0byBkb21haW4gIixzKSxhPW4sci5yZWdpc3RyeS5yZWdpc3RlclN0dWIoYSxkLHQsZSx1KSl9LGgpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTsKLy8gc3RlcCAyMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIDcuIHJldHVybiB0aGUgcnVudGltZSBwcm90b3N0dWIgdXJsOiAiLGUpLGM9ZS51cmw7Ci8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CnZhciBuPXt9O2lmKCEoMCxwLmVtcHR5T2JqZWN0KSh1LmNvbmZpZ3VyYXRpb24pKXRyeXtuPSgwLG8uZGVmYXVsdCkoe30sSlNPTi5wYXJzZSh1LmNvbmZpZ3VyYXRpb24pKX1jYXRjaChlKXtuPXUuY29uZmlndXJhdGlvbn1pZih0KXRyeXtuPSgwLG8uZGVmYXVsdCkobixKU09OLnBhcnNlKHQpKX1jYXRjaChlKXtuPSgwLG8uZGVmYXVsdCkobix0KX0KLy8gcmVxdWlyZWQgZm9yIHByb3Rvc3R1YiBzZXNzaW9uCm4ucnVudGltZVVSTD1yLl9ydW50aW1lVVJMOwovLyBzdGVwIDI0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp0cnl7Ci8vIHN0ZXAgMjYgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIHN0ZXAgMjcgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIKcmV0dXJuIHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSA4OiBhZGRpbmcgc2FuZGJveCBsaXN0ZW5lciB0byBwcm90b3N0dWJVUkwgOiAiLGMpLHIubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihjLGZ1bmN0aW9uKGUpe2EucG9zdE1lc3NhZ2UoZSl9KSxhLmRlcGxveUNvbXBvbmVudChmLnNvdXJjZUNvZGUsYyxuKX1jYXRjaChlKXt2LmVycm9yKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIEVycm9yIG9uIGRlcGxveSBjb21wb25lbnQ6IixlKSxpKGUpfX0saCkudGhlbihmdW5jdGlvbigpe2lmKGwpcmV0dXJuITE7Ci8vIHN0ZXAgMjggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnZhciBlPXZvaWQgMDt0Pyh2LmxvZygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSBwMnBDb25maWc6ICIsdCksdC5oYXNPd25Qcm9wZXJ0eSgiaXNIYW5kbGVyU3R1YiIpJiYoZT1yLnJlZ2lzdHJ5LnAycEhhbmRsZXJTdHViW3IuX3J1bnRpbWVVUkxdKSx0Lmhhc093blByb3BlcnR5KCJwMnBSZXF1ZXN0ZXJTdHViIikmJihlPXIucmVnaXN0cnkucDJwUmVxdWVzdGVyU3R1Ylt0LnJlbW90ZVJ1bnRpbWVVUkxdKSk6ZT1yLnJlZ2lzdHJ5LnByb3Rvc3R1YnNMaXN0W3NdLHYubG9nKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIFN0dWI6ICIsZSksbihlKSx2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpfSxoKS5jYXRjaCh5KX19KX19LHtrZXk6ImxvYWRJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdGhpcy5fcmVhZHlUb1VzZSgpKXJldHVybiExO2lmKCFlKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBJZHBQcm94eSBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkIik7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT0oMCxwLmRpdmlkZVVSTCkoZSkuZG9tYWluO2l8fChpPWUpO3ZhciBzPXZvaWQgMCxhPXZvaWQgMCx1PXZvaWQgMCxjPXZvaWQgMCxmPSExLGw9ZnVuY3Rpb24oZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIFNvbWV0aGluZyBmYWlsZWQgb24gdGhlIGRlcGxveSBvZiBJZHBQcm94eTogIixlKSxuKGUpfSxkPWZ1bmN0aW9uKGUpe2Y9ITAsbihlKX07Ci8vIERpc2NvdmVyIElEUFByb3h5CnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAtLS0tLS0tLS0tLS0tLS0tLS0tIElEUCBQcm94eSBEZXBsb3kgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKSx2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gRGlzY292ZXIgb3IgQ3JlYXRlIGEgbmV3IElkcFByb3h5IGZvciBkb21haW4vVVJMOiAiLGkpO3RyeXt2YXIgeT10LnJlZ2lzdHJ5LmRpc2NvdmVySWRwUHJveHkoaSk7Ci8vIElzIHJlZ2lzdGVkPwp2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gMS4gSURQUHJveHkgRGlzY292ZXJlZDogIix5KTsKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp2YXIgaD10LnJlZ2lzdHJ5LmlkcFByb3h5TGlzdFtpXTt2LmxvZygiRGVwbG95ZWQ6ICIsaCkscihoKSx2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKX1jYXRjaCh5KXsKLy8gaXMgbm90IHJlZ2lzdGVkPwp2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gMS4gSWRwUHJveHkgbm90IGZvdW5kOiIseSksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gd2UgbmVlZCB0byBnZXQgUHJvdG9TdHViIGRlc2NyaXB0b3Igc3RlcCA0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp0LmRlc2NyaXB0b3JzLmdldElkcFByb3h5RGVzY3JpcHRvcihlKS50aGVuKGZ1bmN0aW9uKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAyLiBSZXR1cm4gdGhlIElEUFByb3h5IGRlc2NyaXB0b3IiKSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA1IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAphPWU7dmFyIHI9ZS5zb3VyY2VQYWNrYWdlVVJMO3JldHVybiIvc291cmNlUGFja2FnZSI9PT1yP2Uuc291cmNlUGFja2FnZTp0LnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U291cmNlUGFja2FnZUZyb21VUkwocil9LGQpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZilyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gMy4gcmV0dXJuIHRoZSBJRFBQcm94eSBzb3VyY2UgcGFja2FnZSIpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDcgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCmM9ZTtyZXR1cm4hMH0sZCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hZiYmdC5yZWdpc3RyeS5nZXRTYW5kYm94KGkpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hZiYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA0LiBpZiB0aGUgc2FuZGJveCBpcyByZWdpc3RlcmVkIHRoZW4gcmV0dXJuIHRoZSBzYW5kYm94IixlKSxzPWUsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtpZihmKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA1LiBTYW5kYm94IHdhcyBub3QgZm91bmQsIGNyZWF0aW5nIGEgbmV3IG9uZSIsZSk7dmFyIHI9e307cmV0dXJuIGEmJmEuaGFzT3duUHJvcGVydHkoImNhcGFiaWxpdGllcyIpJiYoYT1hLnN0dWJDYXBhYmlsaXRpZXMpLHQuX3J1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3gocikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGRMaXN0ZW5lcigiKiIsZnVuY3Rpb24oZSl7dC5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUpfSksZX0pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hZiYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA2LiByZXR1cm4gdGhlIHNhbmRib3ggaW5zdGFuY2UgYW5kIHJlZ2lzdGVyIixlLCJ0byBkb21haW4gIixpKSxzPWUsdC5yZWdpc3RyeS5yZWdpc3RlcklkcFByb3h5KGUsaSkpfSxkKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGYpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDcuIFJldHVybiB0aGUgcnVudGltZSBJZHAgUHJveHkgVVJMOiAiLGUpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdT1lOwovLyBFeHRlbmQgb3JpZ2luYWwgaHlwZXJ0eSBjb25maWd1cmF0aW9uOwp2YXIgcj17fTtpZighKDAscC5lbXB0eU9iamVjdCkoYS5jb25maWd1cmF0aW9uKSl0cnl7cj0oMCxvLmRlZmF1bHQpKHt9LEpTT04ucGFyc2UoYS5jb25maWd1cmF0aW9uKSl9Y2F0Y2goZSl7cj1hLmNvbmZpZ3VyYXRpb259ci5ydW50aW1lVVJMPXQuX3J1bnRpbWVVUkw7Ci8vIERlcGxveSBDb21wb25lbnQgc3RlcCB4eHgKdHJ5ewovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gQWRkIHRoZSBtZXNzYWdlIGJ1cyBsaXN0ZW5lcgpyZXR1cm4gdC5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHUsZnVuY3Rpb24oZSl7cy5wb3N0TWVzc2FnZShlKX0pLHMuZGVwbG95Q29tcG9uZW50KGMuc291cmNlQ29kZSxlLHIpfWNhdGNoKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBFcnJvciBvbiBkZXBsb3kgY29tcG9uZW50OiIsZSksbihlKX19LGQpLnRoZW4oZnVuY3Rpb24oKXtpZihmKXJldHVybiExOwovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gTG9hZCBTdHViIGZ1bmN0aW9uIHJlc29sdmVkIHdpdGggc3VjY2VzczsKLy8gbGV0IGlkcFByb3h5ID0gewovLyAgIHJ1bnRpbWVJZHBQcm94eVVSTDogX3J1bnRpbWVJZHBQcm94eVVSTCwKLy8gICBzdGF0dXM6IGRlcGxveUNvbXBvbmVudFN0YXR1cwovLyB9OwovL3RoaXMucmVnaXN0cnkuaWRwUHJveHlMaXN0W2RvbWFpbl0uc3RhdHVzID0gJ2RlcGxveWVkJzsKdmFyIGU9dC5yZWdpc3RyeS5pZHBQcm94eUxpc3RbaV07di5sb2coIltSdW50aW1lLkxvYWRlci5sb2FkSWRwUHJveHldIDg6IGxvYWRlZDogIixlKSxyKGUpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRJZHBQcm94eV0gLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKX0sZCkuY2F0Y2gobCl9fSl9fSx7a2V5OiJfcmVhZHlUb1VzZSIsdmFsdWU6ZnVuY3Rpb24oKXtpZighdGhpcy5fcnVudGltZVVSTCl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGxvYWRlciBuZWVkIHRoZSBydW50aW1lIHVybCBhZGRyZXNzIik7aWYoIXRoaXMuX21lc3NhZ2VzQnVzKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgbG9hZGVyIG5lZWQgdGhlIG1lc3NhZ2VCdXMgY29tcG9uZW50Iik7aWYoIXRoaXMuX3JlZ2lzdHJ5KXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgbG9hZGVyIG5lZWQgdGhlIHJlZ2lzdHJ5IGNvbXBvbmVudCIpO2lmKCF0aGlzLl9ydW50aW1lRmFjdG9yeSl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGxvYWRlciBuZWVkIHRoZSBydW50aW1lIGZhY3RvcnkgY29tcG9uZW50Iik7cmV0dXJuITB9fSx7a2V5OiJydW50aW1lVVJMIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcnVudGltZVVSTD1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZVVSTH19LHtrZXk6InJlZ2lzdHJ5IixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcmVnaXN0cnk9ZTsKLy8gSW5zdGFsbCBBZGRyZXNzQWxsb2NhdGlvbgp2YXIgdD1oLmRlZmF1bHQuaW5zdGFuY2U7dGhpcy5fYWRkcmVzc0FsbG9jYXRpb249dCx2LmxvZygiW0xvYWRlciAtIEFkZHJlc3NBbGxvY2F0aW9uXSAtICIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWdpc3RyeX19LHtrZXk6Im1lc3NhZ2VCdXMiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlc0J1cz1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZXNCdXN9fSx7a2V5OiJydW50aW1lRmFjdG9yeSIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3J1bnRpbWVGYWN0b3J5PWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lRmFjdG9yeX19XSksTG9hZGVyfSgpO3QuZGVmYXVsdD1nLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ5NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHN0b3JhZ2UoZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJUaGUgcnVudGltZSBmYWN0b3J5IGlzIGEgbmVlZGVkIHBhcmFtZXRlciIpO3JldHVybigwLG8uZGVmYXVsdCkoaS5ydW50aW1lQ29uZmlndXJhdGlvbi5zdG9yYWdlU2NoZW1hcykuZm9yRWFjaChmdW5jdGlvbih0KXtzLmhhc093blByb3BlcnR5KHQpfHwoc1t0XT1lLnN0b3JhZ2VNYW5hZ2VyKHQsaS5ydW50aW1lQ29uZmlndXJhdGlvbi5zdG9yYWdlU2NoZW1hc1t0XSkpfSksc31PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigzMSksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3Quc3RvcmFnZT1zdG9yYWdlO3ZhciBpPXIoMTQ0KSxzPXt9fSwvKiA0OTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxNCksZj1yKDk5KSxsPXIoNyksZD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGwpLHA9ZC5nZXRMb2dnZXIoIkRlc2NyaXB0b3JzIikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIERlc2NyaXB0b3JzKGUsdCxyKXtpZigoMCxzLmRlZmF1bHQpKHRoaXMsRGVzY3JpcHRvcnMpLCFlKXRocm93IEVycm9yKCJUaGUgZGVzY3JpcHRvciBuZWVkIHRvIGtub3cgdGhlIHJ1bnRpbWUgdXJsIHRvIGJlIHVzZWQiKTtpZighdCl0aHJvdyBFcnJvcigiVGhlIGRlc2NyaXB0b3IgbmVlZHMgdGhlIGNhdGFsb2d1ZSBpbnN0YW5jZSIpO2lmKCFyKXRocm93IEVycm9yKCJUaGUgZGVzY3JpcHRvciBuZWVkcyB0aGUgcnVudGltZSBjb25maWd1cmF0aW9uIik7dGhpcy5sb2c9cCx0aGlzLnJ1bnRpbWVDb25maWd1cmF0aW9uPXIsdGhpcy5ydW50aW1lVVJMPWUsdGhpcy5jYXRhbG9ndWU9dCx0aGlzLmNvbnN0cmFpbnRzPWYucnVudGltZVV0aWxzLnJ1bnRpbWVDYXBhYmlsaXRpZXN9cmV0dXJuKDAsdS5kZWZhdWx0KShEZXNjcmlwdG9ycyxbe2tleToiZ2V0SHlwZXJ0eURlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNhdGFsb2d1ZS5nZXRIeXBlcnR5RGVzY3JpcHRvcihlLCEwLHRoaXMuY29uc3RyYWludHMpfX0se2tleToiZ2V0U3R1YkRlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz12b2lkIDAsaT12b2lkIDAscz12b2lkIDAsYT0oMCxjLmRpdmlkZVVSTCkodC5ydW50aW1lVVJMKSx1PWEuZG9tYWluO2lmKGUuaW5jbHVkZXMoIjovLyIpKXt2YXIgZj0oMCxjLmRpdmlkZVVSTCkoZSk7bz1mLmRvbWFpbjt2YXIgbD1mLmlkZW50aXR5O2k9bD9sLnN1YnN0cmluZyhsLmxhc3RJbmRleE9mKCIvIikrMSk6ImRlZmF1bHQifWVsc2UgaT0iZGVmYXVsdCIsbz1lO2lmKHM9KDAsYy5idWlsZFVSTCkodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsInByb3RvY29sc3R1YiIsaSksbyE9PXQucnVudGltZUNvbmZpZ3VyYXRpb24uZG9tYWluKWlmKGUuaW5kZXhPZigiaHR0cHMiKSYmZS5pbmRleE9mKCJoeXBlcnR5LWNhdGFsb2d1ZSIpKXsKLy8gVE9ETzogY2hlY2sgaG93IHRvIGxvYWQgZm9ybSBkaWZmZXJlbnQgY29uZmlndXJhdGlvbiBkb21haW4KdmFyIGQ9KDAsYy5nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzKSh0LnJ1bnRpbWVDb25maWd1cmF0aW9uLCJjYXRhbG9ndWVVUkxzIiwicHJvdG9jb2xzdHViIik7cz1kLnByZWZpeCtvK2Quc3VmZml4K2l9ZWxzZSBzPWU7cmV0dXJuIHAubG9nKCJMb2FkIFByb3RvY29sU3R1YiBmb3IgZG9tYWluLCAiK28rIiA6ICIscyksdC5jYXRhbG9ndWUuZ2V0U3R1YkRlc2NyaXB0b3IocywhMCx0LmNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnRXJyb3I6ICcsIGVycm9yKTsKaT1vLG89dTt2YXIgcj0oMCxjLmdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMpKHQucnVudGltZUNvbmZpZ3VyYXRpb24sImNhdGFsb2d1ZVVSTHMiLCJwcm90b2NvbHN0dWIiKTsKLy8gbG9nLmxvZygnRmFsbGJhY2sgLT4gTG9hZCBQcm90b2NvbHN0dWIgZm9yIGRvbWFpbiwgJyArIGRvbWFpbiArICcgOiAnLCBwcm90b3N0dWIpOwpyZXR1cm4gcz1yLnByZWZpeCtvK3Iuc3VmZml4K2ksdC5jYXRhbG9ndWUuZ2V0U3R1YkRlc2NyaXB0b3IocywhMCx0LmNvbnN0cmFpbnRzKX0pLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleToiZ2V0SWRwUHJveHlEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89dm9pZCAwLGk9dm9pZCAwLHM9KDAsYy5kaXZpZGVVUkwpKHQucnVudGltZVVSTCksYT1zLmRvbWFpbix1PXQuY29uc3RyYWludHM7aWYodS5jb25zdHJhaW50cy5vbmx5QWNjZXNzVG9rZW49ITAsdS5jb25zdHJhaW50cy5vbmx5SWRBc3NlcnRpb25WYWxpZGF0aW9uPSEwLGUuaW5jbHVkZXMoIjovLyIpKXt2YXIgZj0oMCxjLmRpdmlkZVVSTCkoZSk7bz1mLmRvbWFpbjt2YXIgbD1mLmlkZW50aXR5O2k9bD9sLnN1YnN0cmluZyhsLmxhc3RJbmRleE9mKCIvIikrMSk6ImRlZmF1bHQifWVsc2UgaT0iZGVmYXVsdCIsbz1lO3ZhciBkPSgwLGMuZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcykodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsImlkcFByb3h5Iik7Ci8vIGxvZy5sb2coJ0xvYWQgSWRwIFByb3h5IGZvciBkb21haW4sICcgKyBkb21haW4gKyAnIDogJywgaWRwUHJveHlVUkwpOwpyZXR1cm4gZT1kLnByZWZpeCtvK2Quc3VmZml4K2ksdC5jYXRhbG9ndWUuZ2V0SWRwUHJveHlEZXNjcmlwdG9yKGUsITAsdSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oKXsKLy8gbG9nLmxvZygnTG9hZCBJZHAgUHJveHkgZm9yIGRvbWFpbiwgJyArIGRvbWFpbiArICcgOiAnLCBpZHBQcm94eVVSTCk7CnJldHVybiBpPW8sbz1hLGU9KDAsYy5idWlsZFVSTCkodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsImlkcFByb3h5IixpKSx0LmNhdGFsb2d1ZS5nZXRJZHBQcm94eURlc2NyaXB0b3IoZSwhMCx1KX0pLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX1dKSxEZXNjcmlwdG9yc30oKTt0LmRlZmF1bHQ9eSxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0OTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPShyKDIwMCkscig3KSksdT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGEpLGM9dS5nZXRMb2dnZXIoIlJ1bnRpbWVVQSIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBNc2dCdXNIYW5kbGVycyhlLHQscil7aWYoKDAsby5kZWZhdWx0KSh0aGlzLE1zZ0J1c0hhbmRsZXJzKSwhZSl0aHJvdyBFcnJvcigiW01zZ0J1c0hhbmRsZXJzXSBwZXAgaW5wdXQgcGFyYW1lbnRlciBpcyBtYW5kYXRvcnkiKTtpZighdCl0aHJvdyBFcnJvcigiW01zZ0J1c0hhbmRsZXJzXSBpZG0gaW5wdXQgcGFyYW1lbnRlIGlzIG1hbmRhdG9yeSIpO2lmKCFyKXRocm93IEVycm9yKCJbTXNnQnVzSGFuZGxlcnNdIGNyeXB0byBpbnB1dCBwYXJhbWVudGUgaXMgbWFuZGF0b3J5Iik7dGhpcy5wb2xpY3lFbmdpbmU9ZSx0aGlzLmlkZW50aXR5TWFuYWdlcj10LHRoaXMuY3J5cHRvTWFuYWdlcj1yfQovLyBQb2xpY3kgYmFzZWQgYWNjZXNzIGNvbnRyb2wgZm9yIGluY29taW5nIG1lc3NhZ2VzCnJldHVybigwLHMuZGVmYXVsdCkoTXNnQnVzSGFuZGxlcnMsW3trZXk6InBlcEluSGFuZGxlciIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24odCl7ZS5wb2xpY3lFbmdpbmUuYXV0aG9yaXNlKHQubXNnLCEwKS50aGVuKGZ1bmN0aW9uKGUpe3QubXNnPWUsdC5uZXh0KCl9KS5jYXRjaChmdW5jdGlvbihlKXtjLmVycm9yKGUpLHQuZmFpbChlKX0pfX19LHtrZXk6InBlcE91dEhhbmRsZXIiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpe2UucG9saWN5RW5naW5lLmF1dGhvcmlzZSh0Lm1zZywhMSkudGhlbihmdW5jdGlvbihlKXt0Lm1zZz1lLHQubmV4dCgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Yy5lcnJvcihlKSx0LmZhaWwoZSl9KX19fSx7a2V5OiJpZG1IYW5kbGVyIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbih0KXtlLmlkZW50aXR5TWFuYWdlci5wcm9jZXNzTWVzc2FnZSh0Lm1zZykudGhlbihmdW5jdGlvbihlKXt0Lm1zZz1lLHQubmV4dCgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Yy5lcnJvcihlKSx0LmZhaWwoZSl9KX19fSx7a2V5OiJlbmNyeXB0SGFuZGxlciIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24odCl7ZS5jcnlwdG9NYW5hZ2VyLmVuY3J5cHRNZXNzYWdlKHQubXNnKS50aGVuKGZ1bmN0aW9uKGUpe3QubXNnPWUsdC5uZXh0KCl9KS5jYXRjaChmdW5jdGlvbihlKXtjLmVycm9yKGUpLHQuZmFpbChlKX0pfX19LHtrZXk6ImRlY3J5cHRIYW5kbGVyIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbih0KXtlLmNyeXB0b01hbmFnZXIuZGVjcnlwdE1lc3NhZ2UodC5tc2cpLnRoZW4oZnVuY3Rpb24oZSl7dC5tc2c9ZSx0Lm5leHQoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2Mud2FybihlKSx0LmZhaWwoZSl9KX19fV0pLE1zZ0J1c0hhbmRsZXJzfSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ5OSksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1vLmRlZmF1bHQsLy8gbGV0IEdyYXBoQ29ubmVjdG9yOwovLyBpZiAocHJvY2Vzcy5lbnYuTU9ERSAhPT0gJ2xpZ2h0JykgewovLyAgIEdyYXBoQ29ubmVjdG9yID0gcmVxdWlyZSgnLi9HcmFwaENvbm5lY3RvckJhc2UnKTsKLy8gICBpZiAoR3JhcGhDb25uZWN0b3IgJiYgR3JhcGhDb25uZWN0b3IuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSkgR3JhcGhDb25uZWN0b3IgPSBHcmFwaENvbm5lY3Rvci5kZWZhdWx0OwovLyB9IGVsc2UgewovLyAgIEdyYXBoQ29ubmVjdG9yID0gcmVxdWlyZSgnLi9HcmFwaENvbm5lY3RvckxpZ2h0Jyk7Ci8vICAgaWYgKEdyYXBoQ29ubmVjdG9yICYmICBHcmFwaENvbm5lY3Rvci5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdCcpKSBHcmFwaENvbm5lY3RvciA9IEdyYXBoQ29ubmVjdG9yLmRlZmF1bHQ7Ci8vIH0KLyoqCiAqIFRoZSBHcmFwaENvbm5lY3RvckJhc2UgaGF2ZSBzb21lIHByb2JsZW1zIHdpdGggdGhlIHNpemU7CiAqIEBkZXByZWNhdGVkIER1ZSB0byBzb21lIHByb2JsZW1zIGluY3JlYXNlIGEgbG90IHRoZSBmaWxlIHNpemUKICovCi8vIGltcG9ydCBHcmFwaENvbm5lY3RvciBmcm9tICcuL0dyYXBoQ29ubmVjdG9yQmFzZSc7Ci8qKgogKgogKiBAZXhwZXJpbWVudGFsIHVzZWQgaW5zdGVhZCBvZiBHcmFwaENvbm5lY3RvckJhc2U7CiAqLwplLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0OTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obiksaT1mdW5jdGlvbiBHcmFwaENvbm5lY3RvcihlLHQscil7KDAsby5kZWZhdWx0KSh0aGlzLEdyYXBoQ29ubmVjdG9yKX07dC5kZWZhdWx0PWksZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNyksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9cigxNCksZD1mLmdldExvZ2dlcigiQ29yZURpc2NvdmVyeSIpLHA9ZnVuY3Rpb24oKXsvKioKICAqIFRvIGluaXRpYWxpc2UgdGhlIERpc2NvdmVyeSwgd2hpY2ggd2lsbCBwcm92aWRlIHRoZSBzdXBwb3J0IGZvciBoeXBlcnRpZXMgdG8KICAqIHF1ZXJ5IHVzZXJzIHJlZ2lzdGVyZWQgaW4gb3V0c2lkZSB0aGUgaW50ZXJuYWwgY29yZS4KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICAgIG1zZ2J1cyAgICAgICAgICAgICAgICBtc2didXMKICAqIEBwYXJhbSAge1J1bnRpbWVVUkx9ICAgICAgICAgIHJ1bnRpbWVVUkwgICAgICAgICAgICBydW50aW1lVVJMCiAgKiBAcGFyYW0gIHtncmFwaENvbm5lY3Rvcn0gICAgZ3JhcGhDb25uZWN0b3IKICAqLwpmdW5jdGlvbiBDb3JlRGlzY292ZXJ5KGUsdCxyLG4sbyl7aWYoKDAscy5kZWZhdWx0KSh0aGlzLENvcmVEaXNjb3ZlcnkpLCFuKXRocm93IEVycm9yKCJUaGUgY2F0YWxvZ3VlIG5lZWRzIHRoZSBydW50aW1lRmFjdG9yeSIpO3ZhciBpPXRoaXM7dGhpcy5fbWVzc2FnZUJ1cz10LGkuZ3JhcGhDb25uZWN0b3I9cixpLmh0dHBSZXF1ZXN0PW4uY3JlYXRlSHR0cFJlcXVlc3QoKSxpLmRvbWFpbj0oMCxsLmRpdmlkZVVSTCkoZSkuZG9tYWluLGkuZGlzY292ZXJ5VVJMPWUrIi9kaXNjb3ZlcnkvIixpLnJlZ2lzdHJ5PW8saS5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGkuZGlzY292ZXJ5VVJMLGZ1bmN0aW9uKGUpe2kuZGlzY292ZXJ5TWFuYWdlcihlKS50aGVuKGZ1bmN0aW9uKHQpewovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlCmkubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTp0fX0pfSkuY2F0Y2goZnVuY3Rpb24odCl7dmFyIHI9dm9pZCAwLG49dm9pZCAwOyJHcmFwaENvbm5lY3RvciI9PT10PyhyPSJUaGlzIHNlYXJjaCBpcyBub3QgYXZhaWxhYmxlIGF0IHRoZSBtb21lbnQuIFRyeSBsYXRlci4iLG49NTAwKToocj0iTm90IEZvdW5kIixuPTQwNCksCi8vRkxPVy1PVVQ6IGVycm9yIG1lc3NhZ2UgcmVzcG9uc2UKaS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bixkZXNjcmlwdGlvbjpyfX0pfSl9KX0vKioKICAgKiBSZXR1cm5zIHRoZSBNZXNzYWdlQnVzLgogICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKENvcmVEaXNjb3ZlcnksW3trZXk6ImRpc2NvdmVyeU1hbmFnZXIiLC8qIGZ1bmN0aW9uIHRvIGRlY2lkZSB3aGF0IGRpc2NvdmVyeSBtZXRob2QgdG8gY2FsbCBhbmQgbGF0ZXIgcmV0dXJuIHRoZSByZXNwb25zZSBtc2cgICovCnZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oKDAsbC5kaXZpZGVVUkwpKGUuZnJvbSkuZG9tYWluLGUuYm9keS5yZXNvdXJjZS5zcGxpdCgiLyIpLmZpbHRlcihCb29sZWFuKSksbj1bXSxpPVtdO3N3aXRjaChkLmxvZygiW0NvcmVEaXNjb3ZlcnkuZGlzY292ZXJ5TWFuYWdlcl0gcmVjZWl2ZWQ6ICIsZSksZS5ib2R5LmNyaXRlcmlhJiYoZS5ib2R5LmNyaXRlcmlhLnJlc291cmNlcyYmKG49ZS5ib2R5LmNyaXRlcmlhLnJlc291cmNlcyksZS5ib2R5LmNyaXRlcmlhLmRhdGFTY2hlbWVzJiYoaT1lLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXMpKSxyWzFdKXtjYXNlInVzZXIiOnJldHVybiJoeXBlcnR5Ij09clswXT90LmRpc2NvdmVySHlwZXJ0aWVzKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlci8iKVsxXSxpLG4sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik6dC5kaXNjb3ZlckRhdGFPYmplY3RzKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlci8iKVsxXSxpLG4sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik7Y2FzZSJ1cmwiOnJldHVybiJoeXBlcnR5Ij09clswXT90LmRpc2NvdmVySHlwZXJ0eVBlclVSTChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVybC8iKVsxXSxlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTp0LmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVybC8iKVsxXSxlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTtjYXNlIm5hbWUiOnJldHVybiB0LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgibmFtZS8iKVsxXSxpLG4sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik7Y2FzZSJyZXBvcnRlciI6cmV0dXJuIHQuZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgicmVwb3J0ZXIvIilbMV0saSxuLGUuYm9keS5jcml0ZXJpYS5kb21haW4pO2Nhc2UiZ3VpZCI6cmV0dXJuIHZvaWQgMCE9PXQuZ3JhcGhDb25uZWN0b3ImJm51bGwhPT10LmdyYXBoQ29ubmVjdG9yPyJoeXBlcnR5Ij09clswXT90LmRpc2NvdmVySHlwZXJ0aWVzUGVyR1VJRChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXItZ3VpZDovLyIpWzFdLGksbik6dC5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXItZ3VpZDovLyIpWzFdLGksbik6by5kZWZhdWx0LnJlamVjdCgiR3JhcGhDb25uZWN0b3IiKTtjYXNlInVzZXJwcm9maWxlIjpyZXR1cm4gdm9pZCAwIT09dC5ncmFwaENvbm5lY3RvciYmbnVsbCE9PXQuZ3JhcGhDb25uZWN0b3I/Imh5cGVydHkiPT1yWzBdP3QuZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGEoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1c2VycHJvZmlsZS8iKVsxXSxpLG4pOnQuZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YShlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXJwcm9maWxlLyIpWzFdLGksbik6by5kZWZhdWx0LnJlamVjdCgiR3JhcGhDb25uZWN0b3IiKX19fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oaSxzKXsKLy90cmFuc2xhdGUgdXNlciBpZGVudGlmaWVyIChlLmcuIGVtYWlsLCBuYW1lLi4uKSBpbnRvIHRoZSBhc3NvY2lhdGVkIEdVSURzCm4uZGlzY292ZXJHVUlEUGVyVXNlcklkZW50aWZpZXIoZSkudGhlbihmdW5jdGlvbihlKXt2YXIgYT1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe24uZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEKGUsdCxyKS50aGVuKGZ1bmN0aW9uKGUpe28oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKFtdKX0pfSl9KTtvLmRlZmF1bHQuYWxsKGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W10uY29uY2F0LmFwcGx5KFtdLGUpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gcygiTm8gaHlwZXJ0aWVzIHdlcmUgZm91bmQiKTtpKHQpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gcyhlKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzUGVyVXNlclByb2ZpbGVEYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihpLHMpewovL3RyYW5zbGF0ZSB1c2VyIGlkZW50aWZpZXIgKGUuZy4gZW1haWwsIG5hbWUuLi4pIGludG8gdGhlIGFzc29jaWF0ZWQgR1VJRHMKbi5kaXNjb3ZlckdVSURQZXJVc2VySWRlbnRpZmllcihlKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBhPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7bi5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRChlLHQscikudGhlbihmdW5jdGlvbihlKXtvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7byhbXSl9KX0pfSk7by5kZWZhdWx0LmFsbChhKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLmNvbmNhdC5hcHBseShbXSxlKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHMoIk5vIGRhdGFPYmplY3RzIHdlcmUgZm91bmQiKTtpKHQpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gcyhlKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlckdVSUQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGkscyl7Ci8vdHJhbnNsYXRlIEdVSUQgaW50byB0aGUgdXNlciBJRHMgdG8gcXVlcnkgdGhlIGRvbWFpbiByZWdpc3RyeQpuLmRpc2NvdmVyVXNlcklkc1BlckdVSUQoZSkudGhlbihmdW5jdGlvbihlKXsKLy90cmFuc2xhdGUgdXNlciBJRHMgaW50byB0aGUgYXNzb2NpYXRlZCBoeXBlcnRpZXMgcmVnaXN0ZXJlZCBpbiBzb21lIGRvbWFpbgp2YXIgYT1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe24uZGlzY292ZXJIeXBlcnRpZXMoZS51SUQsdCxyLGUuZG9tYWluKS50aGVuKGZ1bmN0aW9uKGUpe28oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKFtdKX0pfSl9KTtvLmRlZmF1bHQuYWxsKGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W10uY29uY2F0LmFwcGx5KFtdLGUpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gcygiTm8gaHlwZXJ0aWVzIHdlcmUgZm91bmQiKTsKLy8gbG9nLmxvZygnSHlwZXJ0aWVzIDogJywgaHlwZXJ0aWVzKTsKaSh0KX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSl9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSUQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGkscyl7Ci8vdHJhbnNsYXRlIEdVSUQgaW50byB0aGUgdXNlciBJRHMgdG8gcXVlcnkgdGhlIGRvbWFpbiByZWdpc3RyeQpuLmRpc2NvdmVyVXNlcklkc1BlckdVSUQoZSkudGhlbihmdW5jdGlvbihlKXsKLy90cmFuc2xhdGUgdXNlciBJRHMgaW50byB0aGUgYXNzb2NpYXRlZCBkYXRhT2JqZWN0cyByZWdpc3RlcmVkIGluIHNvbWUgZG9tYWluCnZhciBhPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7bi5kaXNjb3ZlckRhdGFPYmplY3RzKGUudUlELHQscixlLmRvbWFpbikudGhlbihmdW5jdGlvbihlKXtvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7byhbXSl9KX0pfSk7by5kZWZhdWx0LmFsbChhKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLmNvbmNhdC5hcHBseShbXSxlKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHMoIk5vIGRhdGFPYmplY3RzIHdlcmUgZm91bmQiKTsKLy8gbG9nLmxvZygnRGF0YU9iamVjdHMgOiAnLCBkYXRhT2JqZWN0cyk7CmkodCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBzKGUpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLHM9dm9pZCAwO3M9bnx8aS5kb21haW47dmFyIGE9e3R5cGU6InJlYWQiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrcyxib2R5Ont9fTtyZXR1cm4gZS5pbmRleE9mKCJ1c2VyOi8vIik+LTE/YS5ib2R5LnJlc291cmNlPWU6YS5ib2R5LnJlc291cmNlPSIvaHlwZXJ0eS9pZHAtaWRlbnRpZmllci8iK2UsdC5sZW5ndGg+MCYmKGEuYm9keS5jcml0ZXJpYXx8KGEuYm9keS5jcml0ZXJpYT17fSksYS5ib2R5LmNyaXRlcmlhLmRhdGFTY2hlbWVzPXQpLHIubGVuZ3RoPjAmJihhLmJvZHkuY3JpdGVyaWF8fChhLmJvZHkuY3JpdGVyaWE9e30pLGEuYm9keS5jcml0ZXJpYS5yZXNvdXJjZXM9ciksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpewovLyBsb2cubG9nKCJbQ29yZURpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gc2VuZGluZyBtc2cgIiwgbXNnKTsKaS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24ocil7Ci8vIGxvZy5sb2coIltDb3JlRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzXSByY3ZlZCByZXBseSAiLCByZXBseSk7CmlmKDIwMCE9PXIuYm9keS5jb2RlJiY1MDAhPT1yLmJvZHkuY29kZSlyZXR1cm4gdCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKTt2YXIgbj1yLmJvZHkudmFsdWUsbz1bXTtmb3IodmFyIGkgaW4gbilvLnB1c2gobltpXSk7aWYoIShvLmxlbmd0aD4wKSlyZXR1cm4gdCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKTsKLy8gbG9nLmxvZygiW0NvcmVEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNdIEh5cGVydGllcyBGb3VuZDogIiwgZmluYWxIeXBlcnRpZXMpOwplKG8pfSl9KX19LHtrZXk6ImRpc2NvdmVyRGF0YU9iamVjdHMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMscz12b2lkIDAsYT1bXTtyZXR1cm4gcz1ufHxpLmRvbWFpbixuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sdSl7Ci8vdHJhbnNsYXRlIHVzZXIgaWRlbnRpZmllciAoZS5nLiBlbWFpbCwgbmFtZS4uLikgaW50byB0aGUgYXNzb2NpYXRlZCBoeXBlcnRpZXMKaS5kaXNjb3Zlckh5cGVydGllcyhlLFtdLFtdLHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIGM9W107Zm9yKHZhciBmIGluIGUpYy5wdXNoKGVbZl0pOy8vdHJhbnNsYXRlIGh5cGVydGllcyBVUkxzIGludG8gdGhlIGFzc29jaWF0ZWQgZGF0YU9iamVjdHMgcmVnaXN0ZXJlZCBpbiBzb21lIGRvbWFpbgp2YXIgbD1jLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe2kuZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyKGUuaHlwZXJ0eUlELHQscixzKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKFtdKX0pfSl9KTtvLmRlZmF1bHQuYWxsKGwpLnRoZW4oZnVuY3Rpb24oZSl7W10uY29uY2F0LmFwcGx5KFtdLGUpLmZvckVhY2goZnVuY3Rpb24oZSl7YS5wdXNoKGUpfSk7dmFyIHQ9W107Zm9yKHZhciByIGluIGEpdC5wdXNoKGFbcl0pO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gdSgiTm8gZGF0YU9iamVjdHMgd2VyZSBmb3VuZCIpOwovLyBsb2cubG9nKCdEYXRhT2JqZWN0cyBGb3VuZDogJywgZmluYWxEYXRhT2JqZWN0cyk7Cm4odCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB1KGUpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVSTCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dHx8ci5kb21haW47dmFyIGk9e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbixib2R5OntyZXNvdXJjZTplfX07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihyKXtpZigyMDAhPT1yLmJvZHkuY29kZSYmNTAwIT09ci5ib2R5LmNvZGUpcmV0dXJuIHQoIk5vIEh5cGVydHkgd2FzIGZvdW5kIik7dmFyIG49ci5ib2R5LnZhbHVlO2lmKCFuKXJldHVybiB0KCJObyBIeXBlcnR5IHdhcyBmb3VuZCIpOwovLyBsb2cubG9nKCdIeXBlcnR5IGZvdW5kOiAnLCBoeXBlcnR5KTsKZShuKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJVUkwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXR8fHIuZG9tYWluO3ZhciBpPXt0eXBlOiJyZWFkIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24sYm9keTp7cmVzb3VyY2U6ZX19O3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlO2lmKCFuKXJldHVybiB0KCJEYXRhT2JqZWN0IG5vdCBmb3VuZCIpOwovLyBsb2cubG9nKCdEYXRhT2JqZWN0IGZvdW5kOiAnLCBkYXRhT2JqZWN0KTsKZShuKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxzPXZvaWQgMDtzPW58fGkuZG9tYWluO3ZhciBhPXt0eXBlOiJyZWFkIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3MsYm9keTp7cmVzb3VyY2U6ZX19O3JldHVybiB0Lmxlbmd0aD4wJiYoYS5ib2R5LmNyaXRlcmlhfHwoYS5ib2R5LmNyaXRlcmlhPXt9KSxhLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXM9dCksci5sZW5ndGg+MCYmKGEuYm9keS5jcml0ZXJpYXx8KGEuYm9keS5jcml0ZXJpYT17fSksYS5ib2R5LmNyaXRlcmlhLnJlc291cmNlcz1yKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7aS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlLG89W107Zm9yKHZhciBpIGluIG4pby5wdXNoKG5baV0pO2lmKCEoby5sZW5ndGg+MCkpcmV0dXJuIHQoIk5vIERhdGFPYmplY3Qgd2FzIGZvdW5kIik7Ci8vIGxvZy5sb2coIkRhdGFPYmplY3RzIEZvdW5kOiAiLCBmaW5hbERhdGFPYmplY3RzKTsKZShvKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMscz12b2lkIDA7cz1ufHxpLmRvbWFpbjt2YXIgYT17dHlwZToicmVhZCIsZnJvbTppLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIitzLGJvZHk6e3Jlc291cmNlOiIvY29tbSIsY3JpdGVyaWE6e3JlcG9ydGVyOmV9fX07cmV0dXJuIHQubGVuZ3RoPjAmJihhLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXM9dCksci5sZW5ndGg+MCYmKGEuYm9keS5jcml0ZXJpYS5yZXNvdXJjZXM9ciksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZSxvPVtdO2Zvcih2YXIgaSBpbiBuKW8ucHVzaChuW2ldKTtpZighKG8ubGVuZ3RoPjApKXJldHVybiB0KCJObyBEYXRhT2JqZWN0IHdhcyBmb3VuZCIpOwovLyBsb2cubG9nKCJEYXRhT2JqZWN0cyBGb3VuZDogIiwgZmluYWxEYXRhT2JqZWN0cyk7CmUobyl9KX0pfX0se2tleToiZGlzY292ZXJVc2VySWRzUGVyR1VJRCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pewovLyBsb2cubG9nKCJHTyBncmFwaENvbm5lY3RvcjoiLCBndWlkKTsKdC5ncmFwaENvbm5lY3Rvci5xdWVyeUdsb2JhbFJlZ2lzdHJ5KGUpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ0luZm9ybWF0aW9uIHJldHVybmVkIGZyb20gR2xvYmFsIFJlZ2lzdHJ5OiAnLCBncmFwaENvbm5lY3RvckNvbnRhY3REYXRhKTsKaWYoInN0cmluZyI9PXR5cGVvZiBlfHwhZSlyZXR1cm4gbigiVW5zdWNjZXNzZnVsIGRpc2NvdmVyIHVzZXJJRHMgYnkgR1VJRCIpO3ZhciB0PWUudXNlcklEcztpZigwPT09dC5sZW5ndGgpcmV0dXJuIG4oIlVzZXJJRHMgbm90IGF2YWlsYWJsZSIpO3IodCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckdVSURQZXJVc2VySWRlbnRpZmllciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuaHR0cFJlcXVlc3QuZ2V0KCJodHRwczovL3JldGhpbmsudGxhYnNjbG91ZC5jb20vZGlzY292ZXJ5L3Jlc3QvZGlzY292ZXIvbG9va3VwP3NlYXJjaHF1ZXJ5PSIrZSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnZGlzY292ZXIgR1VJRCBieSB1c2VyIGlkZW50aWZpZXInLCBqc29uKTsKdmFyIHQ9SlNPTi5wYXJzZShlKSxvPXQucmVzdWx0cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZS5yZXRoaW5rSUR9KTtpZigwPT09by5sZW5ndGgpcmV0dXJuIG4oIlVuc3VjY2Vzc2Z1bCBkaXNjb3ZlciBHVUlEIGJ5IHVzZXIgaWRlbnRpZmllciIpO3ZhciBpPW8ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJldGhpbmtJRH0pO3JldHVybiByKGkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coIkhUVFAgUmVxdWVzdCBlcnJvcjogIiwgZXJyKTsKcmV0dXJuIG4oZSl9KX0pfX0se2tleToibWVzc2FnZUJ1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VCdXN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlQnVzPWV9fV0pLENvcmVEaXNjb3Zlcnl9KCk7dC5kZWZhdWx0PXAsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMjA5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDgpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoOTgpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoOTcpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cigyKSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1yKDcpLGI9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShnKSxfPXIoMTQpLG09Yi5nZXRMb2dnZXIoIkRhdGFPYmplY3RzU3RvcmFnZSIpLFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBEYXRhT2JqZWN0c1N0b3JhZ2UoZSx0KXtpZigoMCx5LmRlZmF1bHQpKHRoaXMsRGF0YU9iamVjdHNTdG9yYWdlKSwhZSl0aHJvdyBuZXcgRXJyb3IoIltTdG9yZSBEYXRhIE9iamVjdHNdIC0gTmVlZHMgdGhlIHN0b3JhZ2VNYW5hZ2VyIGNvbXBvbmVudCIpO3RoaXMuX3N0b3JhZ2VNYW5hZ2VyPWUsdGhpcy5fc3RvcmVEYXRhT2JqZWN0PXQsdGhpcy5fY2FjaGU9e319LyoqCiAgICogQGRlc2NyaXB0aW9uIHNob3VsZCBzZXQgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGRhdGFPYmplY3RVUkwgdG8gYmUgcmVzdW1lZCBpZiBuZWNlc3Nhcnk7CiAgICoKICAgKiBAcGFyYW0ge0RhdGFPYmplY3RVUkx9IHVybCAtIGRhdGFPYmplY3RVUkwgdG8gYmUgc2F2ZWQ7CiAgICogQHBhcmFtIHtCb29sZWFufSBpc1JlcG9ydGVyIC0gdGhlIG9iamVjdCB0byBiZSBzYXZlZCBpcyBhIHJlcG9ydGVyCiAgICogQHBhcmFtIHtTY2hlbWFVUkx9IHNjaGVtYSAtIHRoZSBzY2hlbWEgdXJsCiAgICogQHBhcmFtIHtTdHJpbmd9IHN0YXR1cyAtIHRoZSBzdGF0dXMgb2YgY3VycmVudCBkYXRhT2JqZWN0CiAgICogQHBhcmFtIHtIeXBlcnR5VVJMfSByZXBvcnRlciAtIHRoZSBSZXBvcnRlciBoeXBlcnR5VVJMCiAgICogQHBhcmFtIHtBcnJheTxIeXBlcnR5VVJMPn0gc3Vic2NyaXB0aW9uIC0gbGlzdCBvZiBzdWJzY3JpcHRpb25zCiAgICogQHBhcmFtIHtBcnJheTxEYXRhT2JqZWN0Q2hpbGQ+fSBjaGlsZHJlbiAtIGxpc3Qgb2YgY2hpbGRzIG9mIGRhdGFPYmplY3RVUkwKICAgKiBAcGFyYW0ge0FycmF5PFN0cmluZz59IGNoaWxkcmVucyAtIGxpc3Qgb2YgY2hpbGRyZW5zLCBsaWtlLCAnY2hhdG1lc3NhZ2UnOwogICAqIEBwYXJhbSB7QXJyYXk8VXNlclVSTH0gc3Vic2NyaWJlclVzZXIgLSBsaXN0IG9mIHN1YnNjcmliZWQgdXNlcnM7CiAgICovCnJldHVybigwLHYuZGVmYXVsdCkoRGF0YU9iamVjdHNTdG9yYWdlLFt7a2V5OiJzZXQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N0b3JlRGF0YU9iamVjdCxyPXRoaXMuX2dldFR5cGVPZk9iamVjdChlLmlzUmVwb3J0ZXIpOy8vIFRPRE86ZG8gd2UgbmVlZCB0aGlzPwovLyBUT0RPOmRvIHdlIG5lZWQgdGhpcz8KLyppZiAoc2NoZW1hKSBzdG9yZURhdGFPYmplY3RbdHlwZV1bbWV0YWRhdGEudXJsXS5zY2hlbWEgPSBzY2hlbWE7CiAgICAgIGlmIChzdGF0dXMpIHN0b3JlRGF0YU9iamVjdFt0eXBlXVttZXRhZGF0YS51cmxdLnN0YXR1cyA9IHN0YXR1czsKICAgICAgaWYgKGNoaWxkcmVuUmVzb3VyY2VzKSBzdG9yZURhdGFPYmplY3RbdHlwZV1bbWV0YWRhdGEudXJsXS5jaGlsZHJlblJlc291cmNlcyA9IGNoaWxkcmVuUmVzb3VyY2VzOyovCi8vIFRPRE86IGRvIHdlIG5lZWQgdGhpcz8KLy9zdG9yZURhdGFPYmplY3RbdHlwZV1bbWV0YWRhdGEudXJsXS5vd25lciA9IG93bmVyOwpyZXR1cm4gdC5oYXNPd25Qcm9wZXJ0eShyKXx8KHRbcl09e30pLHRbcl0uaGFzT3duUHJvcGVydHkoZS51cmwpfHwodFtyXVtlLnVybF09e30sdFtyXVtlLnVybF0uc3Vic2NyaXB0aW9ucz1bXSx0W3JdW2UudXJsXS5zdWJzY3JpYmVyVXNlcnM9W10sdFtyXVtlLnVybF0uY2hpbGRyZW5PYmplY3RzPXt9LHRbcl1bZS51cmxdLmRhdGE9e30pLCgwLGQuZGVmYXVsdCkodFtyXVtlLnVybF0sZSksZGVsZXRlIHRbcl1bZS51cmxdLnN1YnNjcmliZXJVc2VyLGRlbGV0ZSB0W3JdW2UudXJsXS5zdWJzY3JpYmVySHlwZXJ0eSxlLnN1YnNjcmliZXJIeXBlcnR5JiYhZS5pc1JlcG9ydGVyJiZ0aGlzLl91cGRhdGVUb0FycmF5KHRbcl0sZS51cmwsInN1YnNjcmlwdGlvbnMiLGUuc3Vic2NyaWJlckh5cGVydHkpLGUuc3Vic2NyaWJlclVzZXImJnRbcl1bZS51cmxdLnN1YnNjcmliZXJVc2Vycy5pbmRleE9mKGUuc3Vic2NyaWJlclVzZXIpJiZ0aGlzLl91cGRhdGVUb0FycmF5KHRbcl0sZS51cmwsInN1YnNjcmliZXJVc2VycyIsZS5zdWJzY3JpYmVyVXNlciksdGhpcy5fc3RvcmVEYXRhT2JqZWN0PXQsdGhpcy5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLHQpLHRbcl1bZS51cmxdfX0se2tleToic2F2ZURhdGEiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMuX3N0b3JlRGF0YU9iamVjdCxpPXRoaXMuX2dldFR5cGVPZk9iamVjdChlKTtpZighb3x8IW9baV18fCFvW2ldW3RdKXJldHVybiB2b2lkIG0ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIHNhdmUgZGF0YV0gLSBub3Qgc2F2ZWQiKTtpZihtLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSBzYXZlRGF0YV0gLSAiLGUsaSx0LHIsbiksb1tpXVt0XS5oYXNPd25Qcm9wZXJ0eSgiZGF0YSIpfHwob1tpXVt0XS5kYXRhPXt9KSxyKXt2YXIgcz12b2lkIDA7cz0ib2JqZWN0Ij09PSh2b2lkIDA9PT1uPyJ1bmRlZmluZWQiOigwLGYuZGVmYXVsdCkobikpPygwLF8uZGVlcENsb25lKShuKTpuLCgwLF8uYXNzaWduKShvW2ldW3RdLmRhdGEscixzKX1lbHNlIG9baV1bdF0uZGF0YT0oMCxfLmRlZXBDbG9uZSkobil8fHt9O3JldHVybiB0aGlzLl9zdG9yZURhdGFPYmplY3Q9byx0aGlzLl9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsbyksb1tpXVt0XX19LHtrZXk6InNhdmVDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMuX3N0b3JlRGF0YU9iamVjdCxpPXRoaXMuX2dldFR5cGVPZk9iamVjdChlKTtyZXR1cm4gbyYmb1tpXSYmb1tpXVt0XT8ob1tpXVt0XS5oYXNPd25Qcm9wZXJ0eSgiY2hpbGRyZW5zIil8fChvW2ldW3RdLmNoaWxkcmVuT2JqZWN0cz17fSkscj8oMCxfLmFzc2lnbikob1tpXVt0XS5jaGlsZHJlbk9iamVjdHMsciwoMCxfLmRlZXBDbG9uZSkobikpOm9baV1bdF0uY2hpbGRyZW5PYmplY3RzPSgwLF8uZGVlcENsb25lKShuKXx8e30sdGhpcy5fc3RvcmVEYXRhT2JqZWN0PW8sdGhpcy5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLG8pLG9baV1bdF0pOnZvaWQgbS5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gc2F2ZSBjaGlsZHJlbnNdIC0gbm90IHNhdmVkIil9fSx7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMuX3N0b3JlRGF0YU9iamVjdCxpPXRoaXMuX2dldFR5cGVPZk9iamVjdChlKTtpZighb3x8IW9baV18fCFvW2ldW3RdKXJldHVybiB2b2lkIG0ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIHVwZGF0ZV0gLSBub3Qgc2F2ZWQiKTtpZihtLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSB1cGRhdGVdIC0gIixlLGksdCxyLG4pLG9baV0mJm9baV1bdF0mJnQmJnImJm4pe2lmKCJzdWJzY3JpcHRpb25zIj09PXJ8fCJzdWJzY3JpYmVyVXNlcnMiPT09cil7dmFyIHM9ITA7InN1YnNjcmlwdGlvbnMiPT09ciYmKHM9IXRoaXMuX2lzT3duZXIob1tpXVt0XSxuKSkscyYmdGhpcy5fdXBkYXRlVG9BcnJheShvW2ldLHQscixuKX1lbHNlIG9baV1bdF1bcl09bjtyZXR1cm4gdGhpcy5fc3RvcmVEYXRhT2JqZWN0PW8sdGhpcy5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLG8pLG9baV1bdF19fX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzLl9zdG9yZURhdGFPYmplY3QsaT10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZSk7cmV0dXJuIG8mJm9baV0mJm9baV1bdF0/b1tpXSYmb1tpXVt0XSYmdCYmciYmbj8oInN1YnNjcmlwdGlvbnMiPT09cnx8InN1YnNjcmliZXJVc2VycyI9PT1yP3RoaXMuX3JlbW92ZUZyb21BcnJheShvW2ldLHQscixuKTpkZWxldGUgb1tpXVt0XVtyXSx0aGlzLl9zdG9yZURhdGFPYmplY3Q9byx0aGlzLl9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsbyksb1tpXVt0XSk6dm9pZCAwOnZvaWQgbS5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gZGVsZXRlXSAtIG5vdCBzYXZlZCIpfX0se2tleToiZGVsZXRlUmVzb3VyY2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXtpZihlKXJldHVybiB0LmdldEFsbCgpLnRoZW4oZnVuY3Rpb24obil7dmFyIG89KDAsZC5kZWZhdWx0KShuLHQuX3N0b3JlRGF0YU9iamVjdHx8e30pO3JldHVybiBvLmhhc093blByb3BlcnR5KCJvYnNlcnZlcnMiKSYmby5vYnNlcnZlcnMuaGFzT3duUHJvcGVydHkoZSk/KGRlbGV0ZSBvLm9ic2VydmVyc1tlXSx0Ll9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsbyksdC5fc3RvcmVEYXRhT2JqZWN0PW8scihvLm9ic2VydmVyc1tlXSkpOm8uaGFzT3duUHJvcGVydHkoInJlcG9ydGVycyIpJiZvLnJlcG9ydGVycy5oYXNPd25Qcm9wZXJ0eShlKT8oZGVsZXRlIG8ucmVwb3J0ZXJzW2VdLHQuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxvKSx0Ll9zdG9yZURhdGFPYmplY3Q9byxyKG8ucmVwb3J0ZXJzW2VdKSk6dm9pZCByKCJUaGUgIitlKyIgZG9zZW5cdCBleGlzdHMsIG5vdGhpbmcgd2FzIGRlbGV0ZWQiKX0pO24obmV3IEVycm9yKCJbU3RvcmVEYXRhT2JqZWN0c10gLSBDYW4ndCBkZWxldGUgdGhpcyAiK2UpKX0pfX0se2tleToiZ2V0QWxsIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9yYWdlTWFuYWdlci5nZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiKX19LHtrZXk6ImdldERhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9zdG9yYWdlTWFuYWdlci5nZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBvPXQuaGFzT3duUHJvcGVydHkoIm9ic2VydmVycyIpP3Qub2JzZXJ2ZXJzOnt9LGk9dC5oYXNPd25Qcm9wZXJ0eSgicmVwb3J0ZXJzIik/dC5yZXBvcnRlcnM6e30sYT0oMCxzLmRlZmF1bHQpKGkpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSksdT0oMCxzLmRlZmF1bHQpKG8pLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSksYz12b2lkIDA7cmV0dXJuIHUmJihjPXQub2JzZXJ2ZXJzW3VdKSxhJiYoYz10LnJlcG9ydGVyc1thXSksbS5pbmZvKCJbU3RvcmVEYXRhT2JqZWN0cyAtIGdldERhdGFPYmplY3RdIC0gZm9yIG9ic2VydmVyOiAiLHUpLG0uaW5mbygiW1N0b3JlRGF0YU9iamVjdHMgLSBnZXREYXRhT2JqZWN0XSAtIGZvciByZXBvcnRlcnM6ICIsYSksbS5pbmZvKCJbU3RvcmVEYXRhT2JqZWN0cyAtIGdldERhdGFPYmplY3RdIC0gcmVzb2x2ZTogIixjKSxjP3IoYyk6bigiTm8gZGF0YU9iamVjdCB3YXMgZm91bmQiKX0pfSl9fSx7a2V5OiJnZXRSZXNvdXJjZXNCeUNyaXRlcmlhIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obil7dmFyIG89ci5fZ2V0VHlwZU9mT2JqZWN0KHQpO3IuZ2V0QWxsKCkudGhlbihmdW5jdGlvbih0KXtpZighdClyZXR1cm4gbS5sb2coIltEYXRhT2JqZWN0c1N0b3JhZ2UuZ2V0UmVzb3VyY2VzQnlDcml0ZXJpYV0gZG9uJ3QgaGF2ZSBzdG9yZWQgZGF0YSBvYmplY3RzIiksbihudWxsKTtpZihlLmJvZHkmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgicmVzdW1lIikmJiFlLmJvZHkucmVzdW1lKXJldHVybiBuKG51bGwpOwovLyBjaGVjayBpZiB0aGUgbWVzc2FnZSBoYXZlIG90aGVyIGNyaXRlcmlhCi8vIGlmIG5vdCBzZWFyY2ggZm9yIG9uIHRoZSAnZnJvbScgb2YgdGhlIG1lc3NhZ2UuCnZhciBpPVtdLGE9ci5faGFzU3Vic2NyaXB0aW9uKHRbb10sZS5mcm9tKSx1PXIuX3NlYXJjaE93bmVyKHRbb10sZS5mcm9tKSxjPXIuX2NoZWNrUHJvdG9zdHViUmVzdW1lKHQsZSk7aWYobS5sb2coIltTdG9yZWREYXRhT2JqZWN0cyAtIGdldFJlc291cmNlc0J5Q3JpdGVyaWFdOiIsdCxlLGEsdSksIShlLmhhc093blByb3BlcnR5KCJmcm9tIikmJmF8fHV8fGMpKXJldHVybiBuKG51bGwpO3ZhciBmPXZvaWQgMDtmPXU/ci5fZ2V0UmVzb3VyY2VzQnlPd25lcih0W29dLGUuZnJvbSk6ci5fZ2V0UmVzb3VyY2VzQnlTdWJzY3JpcHRpb24odFtvXSxlLmZyb20pO3ZhciBsPVtdO2UuYm9keSYmZS5ib2R5LmlkZW50aXR5JiYobD1yLl9nZXRSZXNvdXJjZXNCeUlkZW50aXR5KHRbb10sZS5ib2R5LmlkZW50aXR5KSk7Ci8vVE9ETzogcmVtb3ZlIHNjaGVtYSBzaW5jZSBtZXRhZGF0YSBhbHJlYWR5IGluY2x1ZGVzIHRoZSBzY2hlbWE/CnZhciBkPVtdO2UuYm9keSYmZS5ib2R5LnNjaGVtYSYmKGQ9ci5fZ2V0UmVzb3VyY2VzQnlTY2hlbWEodFtvXSxlLmJvZHkuc2NoZW1hKSk7dmFyIHA9W107aWYoZS5ib2R5JiZlLmJvZHkudmFsdWUpe3ZhciB5PWUuYm9keS52YWx1ZTtkZWxldGUgeS5kYXRhLHA9ci5fZ2V0UmVzb3VyY2VzQnlNZXRhZGF0YSh0W29dLHkpfXZhciBoPVtdO2lmKGUuYm9keSYmZS5ib2R5LnZhbHVlJiZlLmJvZHkudmFsdWUuZGF0YSYmKGg9ci5fZ2V0UmVzb3VyY2VzQnlEYXRhKHRbb10sZS5ib2R5LnZhbHVlLmRhdGEpKSwKLy8geW91IGNhbiBwYXNzIGFzIGFycmF5cyBhcyB5b3Ugd2FudC4uIGl0IHdpbGwgYmUgbWVyZ2VkIGluIG9uIHBsYWNlCi8vIHJlbW92ZWQgZHVwbGljYXRlczsKaT1yLl9pbnRlcnNlY3Rpb24oZixsLGQsaCxwKSwwPT1pLmxlbmd0aCYmYyYmIm9ic2VydmVycyI9PW8mJmUuZnJvbS5zcGxpdCgicHJvdG9zdHViIikubGVuZ3RoPjApe3ZhciB2PXRbb10sZz0oMCxfLmRpdmlkZVVSTCkoZS5mcm9tKS5kb21haW47KDAscy5kZWZhdWx0KSh2KS5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9dltlXS5zdWJzY3JpcHRpb25zO3QuZm9yRWFjaChmdW5jdGlvbih0KXsoMCxfLmRpdmlkZVVSTCkodCkuZG9tYWluPT1nJiZpLnB1c2goZSl9KX0pfXZhciBiPXt9O2kuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgcj10W29dW2VdO3JldHVybiBiW2VdPXIsYn0pLG0ubG9nKCJbU3RvcmUgRGF0YSBPYmplY3RzXSAtICIsYiksbihiKX0pfSl9fSx7a2V5OiJfZ2V0UmVzb3VyY2VzQnlJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8oMCxzLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZVtyXS5zdWJzY3JpYmVyVXNlcnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0pLmxlbmd0aH0pOltdfX0se2tleToiX2dldFJlc291cmNlc0J5T3duZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/KDAscy5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGVbcl0ucmVwb3J0ZXI9PT10fSk6W119fSx7a2V5OiJfZ2V0UmVzb3VyY2VzQnlTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/KDAscy5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGVbcl0uc3Vic2NyaXB0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSkubGVuZ3RofSk6W119fSx7a2V5OiJfZ2V0UmVzb3VyY2VzQnlTY2hlbWEiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuKDAscy5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIG49ZVtyXTtyZXR1cm4oMCxzLmRlZmF1bHQpKG4pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4ic2NoZW1hIj09PWUmJm5bZV09PT10fSkubGVuZ3RofSl9fSx7a2V5OiJfZ2V0UmVzb3VyY2VzQnlNZXRhZGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8oMCxzLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXt2YXIgbj1lW3JdO3JldHVybigwLHMuZGVmYXVsdCkobikuZmlsdGVyKGZ1bmN0aW9uKGUpewovLyBzZWFyY2ggb24gc3RvcmVEYXRhT2JqZWN0cyBmb3Igc3BlY2lmaWMga2V5IHByb3ZpZGVkIGZyb20gZGF0YTsKcmV0dXJuKDAscy5kZWZhdWx0KSh0KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGU9PT1yJiZuW2VdPT09dFtyXX0pLmxlbmd0aH0pLmxlbmd0aH0pOltdfX0se2tleToiX2dldFJlc291cmNlc0J5RGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD8oMCxzLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXt2YXIgbj1lW3JdLmhhc093blByb3BlcnR5KCJkYXRhIik/ZVtyXS5kYXRhOnt9O3JldHVybigwLHMuZGVmYXVsdCkobikuZmlsdGVyKGZ1bmN0aW9uKGUpewovLyBzZWFyY2ggb24gc3RvcmVEYXRhT2JqZWN0cyBmb3Igc3BlY2lmaWMga2V5IHByb3ZpZGVkIGZyb20gZGF0YTsKcmV0dXJuKDAscy5kZWZhdWx0KSh0KS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGU9PT1yJiZuW2VdPT09dFtyXX0pLmxlbmd0aH0pLmxlbmd0aH0pOltdfX0se2tleToiX2hhc1N1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJigwLHMuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnN1YnNjcmlwdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0pLmxlbmd0aH0pLmxlbmd0aD4wfX0se2tleToiX3NlYXJjaE93bmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEhZSYmKDAscy5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGVbcl0ucmVwb3J0ZXI9PT10fSkubGVuZ3RoPjB9fSx7a2V5OiJfY2hlY2tQcm90b3N0dWJSZXN1bWUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuITE7aWYodC5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpJiZ0LmJvZHkuaGFzT3duUHJvcGVydHkoInZhbHVlIikmJnQuYm9keS52YWx1ZS5oYXNPd25Qcm9wZXJ0eSgicmVwb3J0ZXIiKSl7dmFyIHI9dC5ib2R5LnZhbHVlLnJlcG9ydGVyO2lmKGUuaGFzT3duUHJvcGVydHkoInJlcG9ydGVycyIpKXt2YXIgbj1lLnJlcG9ydGVycztyZXR1cm4oMCxzLmRlZmF1bHQpKG4pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gbltlXS5yZXBvcnRlcj09PXJ9KS5sZW5ndGg+MH1yZXR1cm4hMX1pZihlLmhhc093blByb3BlcnR5KCJvYnNlcnZlcnMiKSl7dmFyIG89ZS5vYnNlcnZlcnMsaT0oMCxfLmRpdmlkZVVSTCkodC5mcm9tKS5kb21haW47cmV0dXJuKDAscy5kZWZhdWx0KShvKS5maWx0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9b1tlXS5zdWJzY3JpcHRpb25zLHI9ITE7aWYodC5mb3JFYWNoKGZ1bmN0aW9uKGUpeygwLF8uZGl2aWRlVVJMKShlKS5kb21haW49PWkmJihyPSEwKX0pLHIpcmV0dXJuITB9KS5sZW5ndGg+MH19fSx7a2V5OiJfaXNPd25lciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJmUucmVwb3J0ZXI9PT10fX0se2tleToiX2ludGVyc2VjdGlvbiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT0oMCxvLmRlZmF1bHQpKGFyZ3VtZW50cyksdD1lLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbmNhdCh0KX0pLmZpbHRlcihmdW5jdGlvbihlLHQscil7cmV0dXJuIHIuaW5kZXhPZihlKT09PXR9KTtyZXR1cm4gbS5sb2coIkRhdGFPYmplY3RzU3RvcmFnZS5faW50ZXJzZWN0aW9uXSBSZXN1bHQgYW4gdW5pcXVlIGFycmF5IG9mIHN0cmluZ3M6ICIsdCksdH19LHtrZXk6Il91cGRhdGVUb0FycmF5Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXttLmxvZygiW0RhdGFPYmplY3RzU3RvcmFnZV0gLSBfdXBkYXRlVG9BcnJheTogIixlLHQscixuKSwtMT09PWVbdF1bcl0uaW5kZXhPZihuKSYmZVt0XVtyXS5wdXNoKG4pfX0se2tleToiX3JlbW92ZUZyb21BcnJheSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89ZVt0XVtyXS5pbmRleE9mKG4pOy0xPT09byYmZVt0XVtyXS5zcGxpY2UobywxKX19LHtrZXk6Il9oYXNWYWx1ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLmhhc093blByb3BlcnR5KHQpJiZlW3RdPT09cn19LHtrZXk6Il9nZXRUeXBlT2ZPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyJyZXBvcnRlcnMiOiJvYnNlcnZlcnMifX1dKSxEYXRhT2JqZWN0c1N0b3JhZ2V9KCk7dC5kZWZhdWx0PVIsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDEzNykscig1MDMpLGUuZXhwb3J0cz1yKDEzKS5BcnJheS5mcm9tfSwvKiA1MDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDY1KSxvPXIoMjEpLGk9cig3Mykscz1yKDE5MiksYT1yKDE5MyksdT1yKDEyOSksYz1yKDUwNCksZj1yKDE5NCk7byhvLlMrby5GKiFyKDE5OSkoZnVuY3Rpb24oZSl7QXJyYXkuZnJvbShlKX0pLCJBcnJheSIsewovLyAyMi4xLjIuMSBBcnJheS5mcm9tKGFycmF5TGlrZSwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQpCmZyb206ZnVuY3Rpb24oZSl7dmFyIHQscixvLGwsZD1pKGUpLHA9ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSx5PWFyZ3VtZW50cy5sZW5ndGgsaD15PjE/YXJndW1lbnRzWzFdOnZvaWQgMCx2PXZvaWQgMCE9PWgsZz0wLGI9ZihkKTsKLy8gaWYgb2JqZWN0IGlzbid0IGl0ZXJhYmxlIG9yIGl0J3MgYXJyYXkgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yIC0gdXNlIHNpbXBsZSBjYXNlCmlmKHYmJihoPW4oaCx5PjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksdm9pZCAwPT1ifHxwPT1BcnJheSYmYShiKSlmb3IodD11KGQubGVuZ3RoKSxyPW5ldyBwKHQpO3Q+ZztnKyspYyhyLGcsdj9oKGRbZ10sZyk6ZFtnXSk7ZWxzZSBmb3IobD1iLmNhbGwoZCkscj1uZXcgcDshKG89bC5uZXh0KCkpLmRvbmU7ZysrKWMocixnLHY/cyhsLGgsW28udmFsdWUsZ10sITApOm8udmFsdWUpO3JldHVybiByLmxlbmd0aD1nLHJ9fSl9LC8qIDUwNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMzkpLG89cig3Nik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt0IGluIGU/bi5mKGUsdCxvKDAscikpOmVbdF09cn19LC8qIDUwNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDcpLGQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShsKSxwPXIoMTQpLHk9cig1MDYpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSx2PWQuZ2V0TG9nZ2VyKCJIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSIpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZShlLHQscixuKXtpZigoMCx1LmRlZmF1bHQpKHRoaXMsSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UpLCFyKXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlIGNvbnN0cnVjdG9yXSBtYW5kYXRvcnkgc3RvcmFnZU1hbmFnZXIgcGFyYW1ldGVyIG1pc3NpbmciKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSBjb25zdHJ1Y3Rvcl0gbWFuZGF0b3J5IHJ1bnRpbWVVUkwgcGFyYW1ldGVyIG1pc3NpbmciKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSBjb25zdHJ1Y3Rvcl0gbWFuZGF0b3J5IGJ1cyBwYXJhbWV0ZXIgbWlzc2luZyIpO3ZhciBvPXRoaXM7by5fYnVzPXQsby5fc3RvcmFnZUxpbWl0PS45LC8vIHRoZSBzYXZlIHN0b3JhZ2VMaW1pdDsKby5fdXJsPWUrIi9zdG9yYWdlIixvLl9zdG9yYWdlTWFuYWdlcj1yLG8ucHJvbWlzZVF1ZXVlPW5ldyBoLmRlZmF1bHQsby5faHlwZXJ0eVJlc291cmNlcz1uLHQuYWRkTGlzdGVuZXIoby5fdXJsLGZ1bmN0aW9uKGUpe3N3aXRjaCh2LmluZm8oIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZV0gTWVzc2FnZSBSQ1Y6ICIsZSksZS50eXBlKXtjYXNlImNyZWF0ZSI6by5fb25DcmVhdGUoZSk7YnJlYWs7Y2FzZSJyZWFkIjpvLl9vblJlYWQoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOm8uX29uRGVsZXRlKGUpfX0pfS8qKgogICAqIGNoZWNrIHRoZSBhdmFpbGFibGUgc3RvcmFnZSBxdW90YQogICAqCiAgICogQG1lbWJlcm9mIEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlCiAgICovCnJldHVybigwLGYuZGVmYXVsdCkoSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UsW3trZXk6ImNoZWNrU3RvcmFnZVF1b3RhIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtpZihlLl9hdmFpbGFibGVRdW90YSYmZS5fdXNhZ2UpcmV0dXJuIHQoKDAscC5hdmFpbGFibGVTcGFjZSkoZS5fdXNhZ2UsZS5fYXZhaWxhYmxlUXVvdGEpKTtuYXZpZ2F0b3ImJm5hdmlnYXRvci5zdG9yYWdlLmVzdGltYXRlKCkudGhlbihmdW5jdGlvbihyKXtlLl9hdmFpbGFibGVRdW90YT1yLnF1b3RhLGUuX3VzYWdlPXIudXNhZ2UsdCgoMCxwLmF2YWlsYWJsZVNwYWNlKShlLl91c2FnZSxlLl9hdmFpbGFibGVRdW90YSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7di5lcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlXSBDaGVja1N0b3JhZ2VRdW90YSBlcnJvcjogIixlKSxyKGUpfSl9KX19LHtrZXk6Il9vbkNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5fHwhZS5ib2R5LnZhbHVlKXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlLl9vbkNyZWF0ZV0gbWFuZGF0b3J5IG1lc3NhZ2UgYm9keSB2YWx1ZSBtaXNzaW5nOiAiLGUpO3ZhciByPWUuYm9keS52YWx1ZSxuPXIuY29udGVudFVSTCxvPSIiO2lmKG4pe3ZhciBpPW5bMF0scz1pLnN1YnN0cihpLmxhc3RJbmRleE9mKCIvIikrMSk7bz10Ll91cmwrIi8iK3N9ZWxzZSBuPVtdLG89dC5fdXJsKyIvIisoMCxwLmdlbmVyYXRlR1VJRCkoKTt0Ll9oeXBlcnR5UmVzb3VyY2VzLmhhc093blByb3BlcnR5KG8pfHwobi5wdXNoKG8pLHIuY29udGVudFVSTD1uKSx0aGlzLl9oeXBlcnR5UmVzb3VyY2VzW29dPXIsdGhpcy5wcm9taXNlUXVldWUuYWRkKHRoaXMuX3RvU2F2ZShvLGUscikpfX0se2tleToiX3RvU2F2ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obyxpKXt2YXIgcz1mdW5jdGlvbihyKXt2YXIgbz17ZnJvbTp0LnRvLHRvOnQuZnJvbSxpZDp0LmlkLHR5cGU6InJlc3BvbnNlIixib2R5Ont2YWx1ZTplLGNvZGU6NTAwLGRlc2NyaXB0aW9uOnJ9fTtyZXR1cm4gbi5fYnVzLnBvc3RNZXNzYWdlKG8pLGkocil9O24uY2hlY2tTdG9yYWdlUXVvdGEoKS50aGVuKGZ1bmN0aW9uKGUpe2lmKHIuc2l6ZT5lLnF1b3RhKXt2YXIgdD0iVGhlIHN0b3JhZ2UgZG8gbm90IGhhdmUgc3BhY2UgdG8gc3RvcmUgdGhhdCByZXNvdXJjZSI7dGhyb3cgcyh0KSxFcnJvcih0KX12YXIgbz1lLnF1b3RhLGk9ZS51c2FnZStyLnNpemU7cmV0dXJuIShlLnBlcmNlbnQ+PW4uX3N0b3JhZ2VMaW1pdHx8aT5vKXx8bi5fZ2V0T2xkZXJSZXNvdXJjZXMoci5zaXplKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbi5fc3RvcmFnZU1hbmFnZXIuc2V0KGUsMSxyKX0pLnRoZW4oZnVuY3Rpb24oKXt2YXIgcj17ZnJvbTp0LnRvLHRvOnQuZnJvbSxpZDp0LmlkLHR5cGU6InJlc3BvbnNlIixib2R5Ont2YWx1ZTplLGNvZGU6MjAwfX07cmV0dXJuIG4uX2J1cy5wb3N0TWVzc2FnZShyKSx2LmxvZygiU3VjY2VzcyIpLG8oKX0pLmNhdGNoKHMpfSl9fSx7a2V5OiJfZ2V0T2xkZXJSZXNvdXJjZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9zdG9yYWdlTWFuYWdlci5nZXQoKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBhPSgwLG8uZGVmYXVsdCkoaSksdT0wLGM9YS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGlbZV0uY3JlYXRlZDxpW3RdLmNyZWF0ZWR9KS5yZWR1Y2UoZnVuY3Rpb24ocixuKXt2YXIgbz10Ll9oeXBlcnR5UmVzb3VyY2VzW25dO3JldHVybiB2LmxvZygiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlXSBfZ2V0T2xkZXJSZXNvdXJjZXM6ICIsdSxlLG4sdC5fYXZhaWxhYmxlUXVvdGEpLHU8PWUmJih1Kz1vLnNpemUsci5wdXNoKG4pKSxyfSxbXSksZj1jLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc3RvcmFnZU1hbmFnZXIuZGVsZXRlKGUpfSk7cy5kZWZhdWx0LmFsbChmKS50aGVuKGZ1bmN0aW9uKCl7cighMCl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSl9KX0pfX0se2tleToiX29uUmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5fHwhZS5ib2R5LnJlc291cmNlKXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlLl9vblJlYWRdIG1hbmRhdG9yeSBtZXNzYWdlIGJvZHkgcmVzb3VyY2UgbWlzc2luZzogIixlKTt2YXIgcj1lLmJvZHkucmVzb3VyY2Usbj17ZnJvbTplLnRvLHRvOmUuZnJvbSxpZDplLmlkLHR5cGU6InJlc3BvbnNlIixib2R5Ont9fTsKLy8gbGV0IGNvbnRlbnQgPSBfdGhpcy5faHlwZXJ0eVJlc291cmNlc1tjb250ZW50VXJsXTsKdi5pbmZvKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UuX29uUmVhZF0gZ2V0IHJlc291cmNlVVJMOiIsciksdGhpcy5fc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXNvdXJjZVVSTCIscikudGhlbihmdW5jdGlvbihlKXt2LmluZm8oIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZS5fb25SZWFkXSBmb3VuZCBjb250ZW50OiIsZSksZT8iZmlsZSI9PT1lLnJlc291cmNlVHlwZT90Ll9vblJlYWRGaWxlKG4sZSk6KG4uYm9keS5jb2RlPTIwMCxuLmJvZHkucDJwPSEwLG4uYm9keS52YWx1ZT1lLHQuX2J1cy5wb3N0TWVzc2FnZShuKSk6KG4uYm9keS5jb2RlPTQwNCxuLmJvZHkuZGVzYz0iQ29udGVudCBOb3QgRm91bmQgZm9yICIrcix0Ll9idXMucG9zdE1lc3NhZ2UobikpfSl9fSx7a2V5OiJfb25SZWFkRmlsZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49bmV3IEZpbGVSZWFkZXI7aWYobi5vbmxvYWQ9ZnVuY3Rpb24obil7di5pbmZvKCJbRmlsZUh5cGVydHlSZXNvdXJjZS5pbml0XSBmaWxlIGxvYWRlZCAiLG4pLGUuYm9keS5jb2RlPTIwMCxlLmJvZHkucDJwPSEwLGUuYm9keS52YWx1ZT0oMCxwLmRlZXBDbG9uZSkodCksZS5ib2R5LnZhbHVlLmNvbnRlbnQ9bi50YXJnZXQucmVzdWx0LHIuX2J1cy5wb3N0TWVzc2FnZShlKX0sdC5taW1ldHlwZS5pbmNsdWRlcygidGV4dC8iKSluLnJlYWRBc1RleHQodC5jb250ZW50KTtlbHNle3ZhciBvPXQuY29udGVudCxpPXZvaWQgMDtpPUFycmF5LmlzQXJyYXkobyk/bmV3IEJsb2Iobyx7dHlwZTp0Lm1pbWV0eXBlfSk6bmV3IEJsb2IoW29dLHt0eXBlOnQubWltZXR5cGV9KSxuLnJlYWRBc0FycmF5QnVmZmVyKGkpfX19LHtrZXk6Il9vbkRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5KXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlLl9vbkRlbGV0ZV0gbWFuZGF0b3J5IG1lc3NhZ2UgYm9keSBtaXNzaW5nOiAiLGUpO2lmKGUuYm9keS5yZXNvdXJjZSlkZWxldGUgdC5faHlwZXJ0eVJlc291cmNlc1tlLmJvZHkucmVzb3VyY2VdO2Vsc2V7aWYoIWUuYm9keS5yZXNvdXJjZXMpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UuX29uRGVsZXRlXSBtYW5kYXRvcnkgcmVzb3VyY2UgbWlzc2luZzogIixlKTtlLmJvZHkucmVzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oZSl7ZGVsZXRlIHQuX2h5cGVydHlSZXNvdXJjZXNbZV19KX10Ll9zdG9yYWdlTWFuYWdlci5kZWxldGUoInJlc291cmNlVVJMIixlLmJvZHkucmVzb3VyY2UpLnRoZW4oZnVuY3Rpb24oKXt2YXIgcj17ZnJvbTplLnRvLHRvOmUuZnJvbSxpZDplLmlkLHR5cGU6InJlc3BvbnNlIixib2R5Ontjb2RlOjIwMH19O3QuX2J1cy5wb3N0TWVzc2FnZShyKX0pLmNhdGNoKGZ1bmN0aW9uKHIpe3ZhciBuPXtmcm9tOmUudG8sdG86ZS5mcm9tLGlkOmUuaWQsdHlwZToicmVzcG9uc2UiLGJvZHk6e2NvZGU6NDAwLGRlc2NyaXB0aW9uOnJ9fTt0Ll9idXMucG9zdE1lc3NhZ2Uobil9KX19XSksSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2V9KCk7dC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNTA3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1mdW5jdGlvbigpewovLyBUT0RPOiBJbXByb3ZlIHRoaXMgUXVldWluZwpmdW5jdGlvbiBQcm9taXNlUXVldWUoZSl7KDAsdS5kZWZhdWx0KSh0aGlzLFByb21pc2VRdWV1ZSksdGhpcy5mbHVzaGluZz0hMSx0aGlzLlByb21pc2U9cy5kZWZhdWx0LHRoaXMuY29uY3VycmVuY3k9Im51bWJlciIhPXR5cGVvZiBlPzE6ZSx0aGlzLnByb21pc2VzPVtdLHRoaXMucXVldWU9W10sdGhpcy5pc1Byb2Nlc3Npbmc9ITF9cmV0dXJuKDAsZi5kZWZhdWx0KShQcm9taXNlUXVldWUsW3trZXk6ImRvbmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY2FsbGJhY2s9ZX19LHtrZXk6ImFkZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLnF1ZXVlLnB1c2goZSksIXRoaXMuaXNQcm9jZXNzaW5nKXJldHVybiB0aGlzLnF1ZXVlLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiBlLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQudGhlbihmdW5jdGlvbih0KXtyZXR1cm5bXS5jb25jYXQoKDAsby5kZWZhdWx0KShlKSxbdF0pfSl9KX0scy5kZWZhdWx0LnJlc29sdmUoW10pKS50aGVuKGZ1bmN0aW9uKGUpewovLyBEbyBzb21ldGhpbmcgd2l0aCBhbGwgcmVzdWx0cwp0LmlzUHJvY2Vzc2luZz0hMX0pfX1dKSxQcm9taXNlUXVldWV9KCk7dC5kZWZhdWx0PWwsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTA3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoMjA5KSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD0wLHI9QXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKXJbdF09ZVt0XTtyZXR1cm4gcn1yZXR1cm4oMCxvLmRlZmF1bHQpKGUpfX0sLyogNTA4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDIxMCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDMxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig3KSx5PV9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHApLGg9cigxNCksdj1yKDEwMCksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLGI9cig1MTIpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChiKSxtPXIoNTEzKSxSPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksdz1yKDEwMSksUz1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZCh3KSxrPXkuZ2V0TG9nZ2VyKCJTeW5jaGVyTWFuYWdlciIpLE89ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX3VybDogVVJMCiAgX2J1czogTWluaUJ1cwogIF9yZWdpc3RyeTogUmVnaXN0cnkKICBfYWxsb2NhdG9yOiBBZGRyZXNzQWxsb2NhdGlvbgogICBfcmVwb3J0ZXJzOiB7IE9iamVjdFVSTDogUmVwb3J0ZXJPYmplY3QgfQogIF9vYnNlcnZlcnM6IHsgT2JqZWN0VVJMOiBPYnNlcnZlck9iamVjdCB9CiAgKi8KZnVuY3Rpb24gU3luY2hlck1hbmFnZXIoZSx0LHIsbixvLGkscyxhKXtpZigoMCxmLmRlZmF1bHQpKHRoaXMsU3luY2hlck1hbmFnZXIpLCFlKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXIgTWFuYWdlcl0gLSBuZWVkcyB0aGUgcnVudGltZVVSTCBwYXJhbWV0ZXIiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIltTeW5jaGVyIE1hbmFnZXJdIC0gbmVlZHMgdGhlIE1lc3NhZ2VCdXMgaW5zdGFuY2UiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoIltTeW5jaGVyIE1hbmFnZXJdIC0gbmVlZHMgdGhlIFJlZ2lzdHJ5IGluc3RhbmNlIik7aWYoIW4pdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWRzIHRoZSBSdW50aW1lQ2F0YWxvZ3VlIGluc3RhbmNlIik7aWYoIW8pdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWQgdGhlIHN0b3JhZ2VNYW5hZ2VyIGluc3RhbmNlIik7dmFyIHU9dGhpczt1Ll9idXM9dCx1Ll9yZWdpc3RyeT1yLHUuX2NhdGFsb2c9bix1Ll9zdG9yYWdlTWFuYWdlcj1vLHUuX2lkZW50aXR5TW9kdWxlPWEsCi8vVE9ETzogdGhlc2Ugc2hvdWxkIGJlIHNhdmVkIGluIHBlcnNpc3RlbmNlIGVuZ2luZT8KdS5ydW50aW1lVVJMPWUsdS5fdXJsPWUrIi9zbSIsdS5fb2JqZWN0VVJMPWUrIi9vYmplY3QtYWxsb2NhdGlvbiIsdS5fcmVwb3J0ZXJzPXt9LHUuX29ic2VydmVycz17fSx1Ll9kYXRhT2JqZWN0c1N0b3JhZ2U9cywKLy9UT0RPOiB0aGlzIHNob3VsZCBub3QgYmUgaGFyZGNvZGVkIQp1Ll9kb21haW49KDAsaC5kaXZpZGVVUkwpKGUpLmRvbWFpbix1Ll9hbGxvY2F0b3I9aXx8Zy5kZWZhdWx0Lmluc3RhbmNlLGsubG9nKCJbU3luY2hlck1hbmFnZXIgLSBBZGRyZXNzQWxsb2NhdGlvbl0gLSAiLHUuX2FsbG9jYXRvciksdC5hZGRMaXN0ZW5lcih1Ll91cmwsZnVuY3Rpb24oZSl7c3dpdGNoKGsuaW5mbygiW1N5bmNoZXJNYW5hZ2VyXSBSQ1Y6ICIsZSksZS50eXBlKXtjYXNlImNyZWF0ZSI6dS5fb25DcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOnUuX29uRGVsZXRlKGUpO2JyZWFrO2Nhc2Uic3Vic2NyaWJlIjp1Ll9vbkxvY2FsU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnUuX29uTG9jYWxVblN1YnNjcmliZShlKX19KX1yZXR1cm4oMCxkLmRlZmF1bHQpKFN5bmNoZXJNYW5hZ2VyLFt7a2V5OiJfb25DcmVhdGUiLAovL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBTeW5jaGVyIC0+IGNyZWF0ZQp2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tLG49ZS50bzsKLy8gY2hlY2sgaWYgbWVzc2FnZSBpcyB0byBzYXZlIG5ldyBjaGlsZHJlbk9iamVjdHMgaW4gdGhlIGxvY2FsIHN0b3JhZ2UKLy8gVE9ETzogY2hlY2sgaWYgbWVzc2FnZSBpcyB0byBzdG9yZSBuZXcgY2hpbGQgaW4gdGhlIGxvY2FsIHN0b3JhZ2UgYW5kIGNhbGwgc3RvcmVDaGlsZC4gSG93IHRvIGRpc3Rpbmd1aXNoIGZyb20gb3RoZXJzPwovL2RlYnVnZ2VyOwplLmJvZHkuYXR0cmlidXRlP3RoaXMuX3N0b3JlQ2hpbGRyZW5zKGUpOiFlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlc3VtZSIpfHxlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlc3VtZSIpJiYhZS5ib2R5LnJlc3VtZT8KLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBpbnZpdGF0aW9uIG1lc3NhZ2UKZS5ib2R5LmF1dGhvcmlzZT8odGhpcy5fYXV0aG9yaXNlKGUpLGsuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLm9uQ3JlYXRlIC0gaW52aXRlIG9ic2VydmVyc10iLGUpKTooCi8vIHRoaXMgaXMgdG8gY3JlYXRlIGEgbmV3IGRhdGEgb2JqZWN0CmsuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLm9uQ3JlYXRlIC0gQ3JlYXRlIE5ldyBPYmplY3RdIixlKSx0aGlzLl9uZXdDcmVhdGUoZSkpOgovLyBJZiBmcm9tIHRoZSBoeXBlcnR5IHNpZGUsIGNhbGwgdGhlIHJlc3VtZVJlcG9ydGVyIHdlIHdpbGwgaGF2ZSByZXN1bWUgPSB0cnVlJwovLyBzbyB3ZSB3aWxsIGNyZWF0ZSBhbiByZXN1bWVkIG9iamVjdCBhbmQgd2lsbCB0cnkgdG8gcmVzdW1lIHRoZSBvYmplY3QgcHJldmlvdXNseSBzYXZlZDsKdGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLmdldFJlc291cmNlc0J5Q3JpdGVyaWEoZSwhMCkudGhlbihmdW5jdGlvbihpKXtpZihrLmluZm8oIltTeW5jaGVyTWFuYWdlciAtIENyZWF0ZSBSZXN1bWVkXSAtIFJlc291cmNlc0J5Q3JpdGVyaWEgfCBNZXNzYWdlOiAiLGUsIiByZXN1bHQ6ICIsaSksaSYmKDAsdS5kZWZhdWx0KShpKS5sZW5ndGg+MCl7dmFyIGE9W107KDAsdS5kZWZhdWx0KShpKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe2EucHVzaCh0Ll9yZXN1bWVDcmVhdGUoZSxpW3JdKSl9KSxzLmRlZmF1bHQuYWxsKGEpLnRoZW4oZnVuY3Rpb24oaSl7ay5sb2coIltTeW5jaGVyTWFuYWdlciAtIENyZWF0ZSBSZXN1bWVkXSIsaSk7Ci8vIFRPRE86IHNob3VkIHNlbmQgdGhlIGluZm9ybWF0aW9uIGlmIHNvbWUgb2JqZWN0IHdhcyBmYWlsOwp2YXIgcz0oMCxvLmRlZmF1bHQpKGkpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hMSE9PWV9KTtrLmluZm8oIltTeW5jaGVyTWFuYWdlci5vbkNyZWF0ZV0gcmV0dXJuaW5nIHJlc3VtZWQgb2JqZWN0cyA6ICIscyksCi8vRkxPVy1PVVQ6IG1lc3NhZ2UgcmVzcG9uc2UgdG8gU3luY2hlciAtPiBjcmVhdGUgcmVzdW1lCnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTpuLHRvOnIsYm9keTp7Y29kZToyMDAsdmFsdWU6c319KX0pfWVsc2V7Ci8vZm9yd2FyZCB0byBoeXBlcnR5Ogp2YXIgYz17fTtjLmlkPWUuaWQsYy5mcm9tPWUudG8sYy50bz1lLmZyb20sYy50eXBlPSJyZXNwb25zZSIsYy5ib2R5PXtjb2RlOjQwNCxkZXNjOiJObyBkYXRhIG9iamVjdHMgcmVwb3J0ZXJzIHRvIGJlIHJlc3VtZWQifSx0Ll9idXMucG9zdE1lc3NhZ2UoYyl9fSl9fSx7a2V5OiJfc3RvcmVDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2Usbj1lLmJvZHkuYXR0cmlidXRlOyJjaGlsZHJlbk9iamVjdHMiPT09bj90Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZUNoaWxkcmVucyghMSxyLHZvaWQgMCxlLmJvZHkudmFsdWUpOnQuX2RhdGFPYmplY3RzU3RvcmFnZS5zYXZlQ2hpbGRyZW5zKCEwLHIsbixlLmJvZHkudmFsdWUpfX0se2tleToiX25ld0NyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMsbj1lLmZyb20sbz0oMCxoLmRpdmlkZVVSTCkoZS5mcm9tKS5kb21haW47Ci8vIGlmIHJlcG9ydGVyIGlzIGluIGEgSW50ZXJ3b3JraW5nIFByb3Rvc3R1YiB0aGUgcnVudGltZSBkb21haW4gYmFja2VuZCBzZXJ2aWNlcyB3aWxsIGJlIHVzZWQKci5fcmVnaXN0cnkuaXNJbnRlcndvcmtpbmdQcm90b1N0dWIoZS5mcm9tKSYmKG89KDAsaC5kaXZpZGVVUkwpKHIucnVudGltZVVSTCkuZG9tYWluKSwKLy8gUHJvY2VzcyBpbnZpdGF0aW9uIG1lc3NhZ2UgdG8gb2JzZXJ2ZXJzCi8qaWYgKG1zZy5ib2R5LmF1dGhvcmlzZSkgewogICAgICAgIF90aGlzLl9hdXRob3Jpc2UobXNnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0qLwovL2dldCBzY2hlbWEgZnJvbSBjYXRhbG9ndWUgYW5kIHBhcnNlIC0+IChzY2hlbWUsIGNoaWxkcmVuKQpyLl9jYXRhbG9nLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKGUuYm9keS5zY2hlbWEpLnRoZW4oZnVuY3Rpb24oaSl7dmFyIHM9aS5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllcyxhPXMuc2NoZW1lP3Muc2NoZW1lLmNvbnN0YW50OiJyZXNvdXJjZSIsdT1zLmNoaWxkcmVuP3MuY2hpbGRyZW4uY29uc3RhbnQ6W10sYz17bmFtZTplLmJvZHkudmFsdWUubmFtZSxzY2hlbWE6ZS5ib2R5LnZhbHVlLnNjaGVtYSxyZXBvcnRlcjplLmJvZHkudmFsdWUucmVwb3J0ZXIscmVzb3VyY2VzOmUuYm9keS52YWx1ZS5yZXNvdXJjZXN9LGY9ZS5ib2R5LnZhbHVlLnJlc291cmNlOwovL2RlYnVnZ2VyOwovL3JlcXVlc3QgYWRkcmVzcyBhbGxvY2F0aW9uIG9mIGEgbmV3IG9iamVjdCBmcm9tIHRoZSBtc2ctbm9kZQovL190aGlzLl9hbGxvY2F0b3IuY3JlYXRlKGRvbWFpbiwgbnVtT2ZBZGRyZXNzLCBvYmplY3RJbmZvLCBzY2hlbWUsIHJldXNlRGF0YU9iamVjdCkudGhlbigoYWxsb2NhdGVkKSA9PiB7CnIuX2FsbG9jYXRvci5jcmVhdGUobywxLGMsYSxmKS50aGVuKGZ1bmN0aW9uKG8pe3ZhciBpPSgwLGguZGVlcENsb25lKShlLmJvZHkudmFsdWUpO2kudXJsPW8uYWRkcmVzc1swXSxpLmF1dGhvcmlzZT1lLmJvZHkuYXV0aG9yaXNlLGkuY2hpbGRyZW5zPXUsCi8vb2JqZWN0UmVnaXN0cmF0aW9uLmV4cGlyZXMgPSAzMDsvL1RPRE86IGdldCBpdCBmcm9tIGRhdGEgb2JqZWN0IGNvbmZpZ3VyYXRpb24gZGVzY3JpcHRpb24gd2hlbiBwcmVzZW50CmRlbGV0ZSBpLmRhdGEsay5sb2coIltTeW5jaGVyTWFuYWdlci5fbmV3Q3JlYXRlXSBBTExPQ0FUT1IgQ1JFQVRFOiIsbyk7dmFyIHM9aS51cmwrIi9zdWJzY3JpcHRpb24iO2subG9nKCJbU3luY2hlck1hbmFnZXIuX25ld0NyZWF0ZV0gU3Vic2NyaXB0aW9uIFVSTCIscyksCi8vVG8gcmVnaXN0ZXIgdGhlIGRhdGFPYmplY3QgaW4gdGhlIHJ1bnRpbWVSZWdpc3RyeQprLmluZm8oIltTeW5jaGVyTWFuYWdlci5fbmV3Q3JlYXRlXSBSZWdpc3RlciBPYmplY3Q6ICIsaSksCi8vX3RoaXMuX3JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdChtc2cuYm9keS52YWx1ZS5uYW1lLCBtc2cuYm9keS52YWx1ZS5zY2hlbWEsIG9ialVSTCwgbXNnLmJvZHkudmFsdWUucmVwb3J0ZXIsIG1zZy5ib2R5LnZhbHVlLnJlc291cmNlcywgYWxsb2NhdGVkLCBtc2cuYm9keS5hdXRob3Jpc2UpLnRoZW4oKHJlc29sdmUpID0+IHsKci5fcmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0KGkpLnRoZW4oZnVuY3Rpb24obyl7ay5sb2coIltTeW5jaGVyTWFuYWdlci5fbmV3Q3JlYXRlXSBEYXRhT2JqZWN0IHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkIixvKTsKLy9hbGwgT0sgLT4gY3JlYXRlIHJlcG9ydGVyIGFuZCByZWdpc3RlciBsaXN0ZW5lcnMKdmFyIGE9dm9pZCAwO2E9dC5fcmVwb3J0ZXJzW2kudXJsXT90Ll9yZXBvcnRlcnNbaS51cmxdOm5ldyBfLmRlZmF1bHQocixuLGkudXJsKSxrLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gbmV3IENyZWF0ZV0gLSAiLGUpOwovLyBTdG9yZSBmb3IgZWFjaCByZXBvcnRlciBoeXBlcnR5IHRoZSBkYXRhT2JqZWN0CnZhciBjPXZvaWQgMDsKLy8gbGV0IGludGVyd29ya2luZyA9IGZhbHNlOwpjPWUuYm9keS5oYXNPd25Qcm9wZXJ0eSgiaWRlbnRpdHkiKSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlJiZlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTD9lLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTDpyLl9yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoZS5mcm9tKTsKLy8gc2hvdWxkIHdlIHVzZSB0aGUgbXNnLmJvZHkudmFsdWUgaW5zdGVhZD8KdmFyIGY9KDAsaC5kZWVwQ2xvbmUpKGkpO2Yuc3Vic2NyaWJlclVzZXI9YyxmLmlzUmVwb3J0ZXI9ITAsCi8vIFN0b3JlIHRoZSBkYXRhT2JqZWN0IGluZm9ybWF0aW9uCi8vaWYgKCFpbnRlcndvcmtpbmcpIHsKci5fZGF0YU9iamVjdHNTdG9yYWdlLnNldChmKSxlLmJvZHkuaGFzT3duUHJvcGVydHkoInN0b3JlIikmJmUuYm9keS5zdG9yZSYmKGEuaXNUb1NhdmVEYXRhPSEwLHIuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITAsaS51cmwsImlzVG9TYXZlRGF0YSIsITApLGUuYm9keS52YWx1ZS5kYXRhJiZyLl9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZURhdGEoITAsaS51cmwsbnVsbCxlLmJvZHkudmFsdWUuZGF0YSkpLAovL30KLy8gYWRkaW5nIGxpc3RlbmVycyB0byBmb3J3YXJkIHRvIHJlcG9ydGVyCmEuZm9yd2FyZFN1YnNjcmliZShbaS51cmwsc10pLnRoZW4oZnVuY3Rpb24oKXthLmFkZENoaWxkcmVucyh1KS50aGVuKGZ1bmN0aW9uKCl7ci5fcmVwb3J0ZXJzW2kudXJsXT1hO3ZhciB0PXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86bixib2R5Ontjb2RlOjIwMCxyZXNvdXJjZTppLnVybCxjaGlsZHJlblJlc291cmNlczp1fX07Ci8vRkxPVy1PVVQ6IG1lc3NhZ2UgcmVzcG9uc2UgdG8gU3luY2hlciAtPiBjcmVhdGUKci5fYnVzLnBvc3RNZXNzYWdlKHQpfSl9KX0sZnVuY3Rpb24oZSl7ay5lcnJvcihlKX0pfSl9KS5jYXRjaChmdW5jdGlvbih0KXsKLy9GTE9XLU9VVDogZXJyb3IgbWVzc2FnZSByZXNwb25zZSB0byBTeW5jaGVyIC0+IGNyZWF0ZQp2YXIgbz17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOm4sYm9keTp7Y29kZTo1MDAsZGVzYzp0fX07ci5fYnVzLnBvc3RNZXNzYWdlKG8pfSl9fSx7a2V5OiJfcmVzdW1lQ3JlYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG8pe3ZhciBpPWUuZnJvbSxzPXQuc2NoZW1hLGE9dC51cmw7dC5kYXRhO2subG9nKCJbU3luY2hlck1hbmFnZXJdIC0gcmVzdW1lIGNyZWF0ZSIsZSx0KSwKLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoc2NoZW1lLCBjaGlsZHJlbikKbi5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihzKS50aGVuKGZ1bmN0aW9uKHMpe3ZhciB1PXMuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMsYz0odS5zY2hlbWUmJnUuc2NoZW1lLmNvbnN0YW50LHUuY2hpbGRyZW4/dS5jaGlsZHJlbi5jb25zdGFudDpbXSk7ay5sb2coIltTeW5jaGVyTWFuYWdlcl0gLSBnZXREYXRhU2NoZW1hRGVzY3JpcHRvcjogIixzLGMpOwovLyBEbyBzY2hlbWEgdmFsaWRhdGlvbgovLyBUT0RPOiBjaGVjayBpZiBpcyBuZWVkIHRvIGhhbmRsZSB3aXRoIHRoZSByZXN1bHQgb2YgdmFsaWRhdGlvbgovLyAgICAgICAgc2NoZW1hVmFsaWRhdGlvbihzY2hlbWUsIGRlc2NyaXB0b3IsIGluaXRpYWxEYXRhKTsKdmFyIGY9KDAsaC5kZWVwQ2xvbmUpKGUuYm9keS52YWx1ZSk7Zi51cmw9dC51cmwsZi5leHBpcmVzPXQuZXhwaXJlcyxkZWxldGUgZi5kYXRhOwovL2FsbCBPSyAtPiBjcmVhdGUgcmVwb3J0ZXIgYW5kIHJlZ2lzdGVyIGxpc3RlbmVycwp2YXIgbD12b2lkIDA7bD1yLl9yZXBvcnRlcnNbYV0/ci5fcmVwb3J0ZXJzW2FdOm5ldyBfLmRlZmF1bHQobixpLGEpLGwuaXNUb1NhdmVEYXRhPXQuaXNUb1NhdmVEYXRhLGwuZm9yd2FyZFN1YnNjcmliZShbdC51cmxdKS50aGVuKGZ1bmN0aW9uKCl7bC5hZGRDaGlsZHJlbnMoYykudGhlbihmdW5jdGlvbigpe3JldHVybiBsLnJlc3VtZVN1YnNjcmlwdGlvbnModC5zdWJzY3JpcHRpb25zKSxuLl9yZXBvcnRlcnNbYV09bCxrLmluZm8oIltTeW5jaGVyTWFuYWdlciAtIHJlc3VtZSBjcmVhdGVdIC0gcmVzb2x2ZWQgcmVzdW1lZDogIix0KSxuLl9kZWNyeXB0Q2hpbGRyZW5zKHQsYyl9KS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdyZXN1bHQgb2YgcHJldmlvdXMgcHJvbWlzZScpOwpvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7ay5lcnJvcigiW1N5bmNoZXJNYW5hZ2VyIC0gcmVzdW1lIGNyZWF0ZV0gLSBmYWlsIG9uIGFkZENoaWxkcmVuczogIixlKSxvKCExKX0pfSksay5pbmZvKCJbU3luY2hlck1hbmFnZXIuX3Jlc3VtZUNyZWF0ZV0gUmVnaXN0ZXIgT2JqZWN0OiAiLGYpLG4uX3JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdChmKS50aGVuKGZ1bmN0aW9uKGUpe2subG9nKCJbU3luY2hlck1hbmFnZXIuX3Jlc3VtZUNyZWF0ZV0gRGF0YU9iamVjdCByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQiLGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtrLmVycm9yKCJbU3luY2hlck1hbmFnZXIgLSByZXN1bWUgY3JlYXRlXSAtIGZhaWwgb24gZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3I6ICIsZSksbyghMSl9KX0pfX0se2tleToiX2RlY3J5cHRDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocil7aWYodCl7MD09PSgwLHUuZGVmYXVsdCkoZS5jaGlsZHJlbk9iamVjdHMpLmxlbmd0aCYmcihlKSx0LmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49ZS5jaGlsZHJlbk9iamVjdHNbdF07ay5sb2coIltTeW5jaGVyTWFuYWdlci5fZGVjcnlwdENoaWxkcmVuc10gZGF0YU9iamVjdENoaWxkcyB0byBkZWNyeXB0ICIsbik7dmFyIG89W107KDAsdS5kZWZhdWx0KShuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciByPW5bdF0saT10LnNwbGl0KCIjIilbMF07aWYoInN0cmluZyI9PXR5cGVvZiByLnZhbHVlKXtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSBjcmVhdGVkQnkgIixpLCIgb2JqZWN0OiAiLHIudmFsdWUpO3ZhciBzPVMuZGVmYXVsdC5kZWNyeXB0RGF0YU9iamVjdChKU09OLnBhcnNlKHIudmFsdWUpLGUudXJsKTtvLnB1c2gocyl9fSkscy5kZWZhdWx0LmFsbChvKS50aGVuKGZ1bmN0aW9uKG4pe2subG9nKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIHJldHVybmluZyBkZWNyeXB0ZWQgIixuKSxuLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49ci52YWx1ZS51cmw7ZS5jaGlsZHJlbk9iamVjdHNbdF1bbl0udmFsdWU9ci52YWx1ZX0pLGsubG9nKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIHN0b3JlZE9iamVjdCAiLGUpLHIoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtrLndhcm4oIltTeW5jaGVyTWFuYWdlci5fZGVjcnlwdENoaWxkcmVuc10gZmFpbGVkIDogIixlKX0pfSl9ZWxzZSByKGUpfSl9fSx7a2V5OiJfYXV0aG9yaXNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFlLmJvZHkucmVzb3VyY2UpdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlck1hbmFnZXIuX2F1dGhvcmlzZV0gaW52aXRhdGlvbiByZXF1ZXN0IHdpdGhvdXQgZGF0YSBvYmplY3QgdXJsOiIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlKyIvc3Vic2NyaXB0aW9uIixuPSEhZS5ib2R5LnAycCYmZS5ib2R5LnAycDtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gIGF1dGhvcmlzZV0gLSAiLGUpLGUuYm9keS5hdXRob3Jpc2UmJmUuYm9keS5hdXRob3Jpc2UuZm9yRWFjaChmdW5jdGlvbihvKXsKLy9GTE9XLU9VVDogc2VuZCBpbnZpdGVzIHRvIGxpc3Qgb2YgcmVtb3RlIFN5bmNoZXIgLT4gX29uUmVtb3RlQ3JlYXRlIC0+IG9uTm90aWZpY2F0aW9uCnQuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToiY3JlYXRlIixmcm9tOnIsdG86byxib2R5OntwMnA6bixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksc291cmNlOmUuZnJvbSx2YWx1ZTplLmJvZHkudmFsdWUsc2NoZW1hOmUuYm9keS5zY2hlbWF9fSxmdW5jdGlvbihyKXsKLy8gbGV0cyBmb3J3YXJkIHRoZSBpbnZpdGF0aW9uIHJlc3BvbnNlCnZhciBuPXtmcm9tOmUudG8sdG86ZS5mcm9tLGlkOmUuaWQsdHlwZTpyLnR5cGUsYm9keTpyLmJvZHl9O3QuX2J1cy5wb3N0TWVzc2FnZShuKX0pfSl9fSx7a2V5OiJfb25EZWxldGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2Usbj10Ll9yZXBvcnRlcnNbcl07biYmKAovL1RPRE86IGlzIHRoZXJlIGFueSBwb2xpY3kgdmVyaWZpY2F0aW9uIGJlZm9yZSBkZWxldGU/Cm4uZGVsZXRlKCksdGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLmRlbGV0ZVJlc291cmNlKHIpLnRoZW4oZnVuY3Rpb24obil7ay5sb2coIltTeW5jaGVyTWFuYWdlciAtIG9uRGVsZXRlXSAtIGRlbGV0ZVJlc291cmNlOiAiLG4pLHQuX3JlZ2lzdHJ5LnVucmVnaXN0ZXJEYXRhT2JqZWN0KHIpLAovL1RPRE86IHVucmVnaXN0ZXIgb2JqZWN0Pwp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fSl9KSl9fSx7a2V5OiJfb25Mb2NhbFN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy9kZWJ1Z2dlcjsKdGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLmdldFJlc291cmNlc0J5Q3JpdGVyaWEoZSwhMSkudGhlbihmdW5jdGlvbihyKXtpZihrLmluZm8oIltTeW5jaGVyTWFuYWdlciAtIFN1YnNjcmliZV0gLSBSZXNvdXJjZXNCeUNyaXRlcmlhIHwgTWVzc2FnZTogIixlLCIgcmVzdWx0OiAiLHIpLHImJigwLHUuZGVmYXVsdCkocikubGVuZ3RoPjApe3ZhciBuPVtdOwovLyBUT0RPOiBzaG91bGQgcmV1c2UgdGhlIHN0b3JhZ2VkIGluZm9ybWF0aW9uCigwLHUuZGVmYXVsdCkocikuZm9yRWFjaChmdW5jdGlvbihvKXtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gcmVzdW1lIFN1YnNjcmliZV0gLSByZXVzZSBjdXJyZW50IG9iamVjdCB1cmw6ICIscltvXSksbi5wdXNoKHQuX3Jlc3VtZVN1YnNjcmlwdGlvbihlLHJbb10pKX0pLHMuZGVmYXVsdC5hbGwobikudGhlbihmdW5jdGlvbihyKXtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gT2JzZXJ2ZXJzIFJlc3VtZWRdIixyKTsKLy8gVE9ETzogc2hvdWQgc2VuZCB0aGUgaW5mb3JtYXRpb24gaWYgc29tZSBvYmplY3Qgd2FzIGZhaWw7CnZhciBuPSgwLG8uZGVmYXVsdCkocikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiExIT09ZX0pOwovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlIHRvIFN5bmNoZXIgLT4gY3JlYXRlCnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTpufX0pfSl9ZWxzZSBpZihlLmJvZHkuc2NoZW1hJiZlLmJvZHkucmVzb3VyY2Upay5sb2coIltTeW5jaGVyTWFuYWdlci5vbkxvY2FsU3Vic2NyaWJlIC0gbmV3IFN1YnNjcmliZV0gLSAiLGUuYm9keS5zY2hlbWEsZS5ib2R5LnJlc291cmNlKSx0Ll9uZXdTdWJzY3JpcHRpb24oZSk7ZWxzZXsKLy9mb3J3YXJkIHRvIGh5cGVydHk6CnZhciBpPXt9O2kuaWQ9ZS5pZCxpLmZyb209ZS50byxpLnRvPWUuZnJvbSxpLnR5cGU9InJlc3BvbnNlIixpLmJvZHk9e2NvZGU6NDA0LGRlc2M6Ik5vIGRhdGEgb2JqZWN0cyBvYnNlcnZlcnMgdG8gYmUgcmVzdW1lZCJ9LHQuX2J1cy5wb3N0TWVzc2FnZShpKX19KX19LHtrZXk6Il9uZXdTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLG49ZS5ib2R5LnJlc291cmNlLG89ZS5mcm9tLGk9KDAsaC5kaXZpZGVVUkwpKG4pLmRvbWFpbixzPW4rIi9zdWJzY3JpcHRpb24iLGE9bisiL2NoaWxkcmVuLyI7Ci8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKGNoaWxkcmVuKQpyLl9jYXRhbG9nLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKGUuYm9keS5zY2hlbWEpLnRoZW4oZnVuY3Rpb24odSl7dmFyIGM9dS5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllcyxmPWMuY2hpbGRyZW4/Yy5jaGlsZHJlbi5jb25zdGFudDpbXSxsPVtdO2wucHVzaChuKyIvY2hhbmdlcyIpLGYuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gbC5wdXNoKGErZSl9KTsKLy9jaGlsZHJlbiBhZGRyZXNzZXMKLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gdGhlIG1zZy1ub2RlLCByZWdpc3RlcmluZyBsaXN0ZW5lcnMgb24gdGhlIGJyb2tlcgp2YXIgZD17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitpKyIvc20iLGJvZHk6e2lkZW50aXR5OmUuYm9keS5pZGVudGl0eSxyZXNvdXJjZXM6bCxzb3VyY2U6b319OwovL3N1YnNjcmliZSBpbiBtc2ctbm9kZQpyLl9idXMucG9zdE1lc3NhZ2UoZCxmdW5jdGlvbihpKXtpZihrLmxvZygibm9kZS1zdWJzY3JpYmUtcmVzcG9uc2Uob2JzZXJ2ZXIpOiAiLGkpLDIwMD09PWkuYm9keS5jb2RlKXsKLy9GTE9XLU9VVDogcmVwbHkgd2l0aCBwcm92aXNpb25hbCByZXNwb25zZQpyLl9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzpvLGJvZHk6e2NvZGU6MTAwLGNoaWxkcmVuUmVzb3VyY2VzOmYsc2NoZW1hOmUuYm9keS5zY2hlbWEscmVzb3VyY2U6ZS5ib2R5LnJlc291cmNlfX0pOwovL0ZMT1ctT1VUOiBzdWJzY3JpYmUgbWVzc2FnZSB0byByZW1vdGUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlU3Vic2NyaWJlCnZhciBhPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206ci5fdXJsLHRvOnMsYm9keTp7aWRlbnRpdHk6ZC5ib2R5LmlkZW50aXR5LHN1YnNjcmliZXI6b319OwovL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIikmJihhLmJvZHkubXV0dWFsPWUuYm9keS5tdXR1YWwpLGsubG9nKCJbU3luY2hlck1hbmFnZXIuX25ld1N1YnNjcmlwdGlvbl0iLGEsZSksCi8vc3Vic2NyaWJlIHRvIHJlcG9ydGVyIFNNCnIuX2J1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGkpe2lmKGsubG9nKCJyZXBvcnRlci1zdWJzY3JpYmUtcmVzcG9uc2UtbmV3OiAiLGkpLDIwMD09PWkuYm9keS5jb2RlKXtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdTdWJzY3JpcHRpb25dIC0gb2JzZXJ2ZXJzOiAiLHIuX29ic2VydmVycyxuLHIuX29ic2VydmVyc1tuXSk7dmFyIHM9ci5fb2JzZXJ2ZXJzW25dO3N8fChzPW5ldyBSLmRlZmF1bHQocixuLGYpLGsubG9nKCJbU3luY2hlck1hbmFnZXIuX25ld1N1YnNjcmlwdGlvbl0gLSBvYnNlcnZlcnM6IGNyZWF0ZSBuZXcgT2JzZXJ2ZXJPYmplY3Q6ICIscyksci5fb2JzZXJ2ZXJzW25dPXMsCi8vIHJlZ2lzdGVyIG5ldyBoeXBlcnR5IHN1YnNjcmlwdGlvbgpzLmFkZFN1YnNjcmlwdGlvbihvKSwKLy8gYWRkIGNoaWxkcmVucyBhbmQgbGlzdGVuZXJzIHRvIHNhdmUgZGF0YSBpZiBuZWNlc3NhcnkKcy5hZGRDaGlsZHJlbnMoZikpO3ZhciBhPSExLHU9dm9pZCAwO2UuYm9keS5oYXNPd25Qcm9wZXJ0eSgiaWRlbnRpdHkiKSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlJiZlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTD8odT1lLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCx1LmluY2x1ZGVzKCJ1c2VyOi8vIil8fChhPSEwKSk6KHU9ci5fcmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUuZnJvbSkpfHwoYT0hMCk7dmFyIGM9KDAsaC5kZWVwQ2xvbmUpKGkuYm9keS52YWx1ZSk7Ci8vIGxldCBjaGlsZHJlbk9iamVjdHMgPSBtZXRhZGF0YS5jaGlsZHJlbk9iamVjdHMgfHwge307CmRlbGV0ZSBjLmRhdGEsZGVsZXRlIGMuY2hpbGRyZW5PYmplY3RzLGMuY2hpbGRyZW5zPWYsYy5zdWJzY3JpYmVyVXNlcj11LGMuaXNSZXBvcnRlcj0hMSxjLnN1YnNjcmliZXJIeXBlcnR5PW8sYXx8KAovL190aGlzLl9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2V0KG9ialVSTCwgZmFsc2UsIG1zZy5ib2R5LnNjaGVtYSwgJ29uJywgcmVwbHkuYm9keS5vd25lciwgaHlwZXJ0eVVSTCwgY2hpbGRyZW5zLCB1c2VyVVJMKTsKci5fZGF0YU9iamVjdHNTdG9yYWdlLnNldChjKSwoYy5oYXNPd25Qcm9wZXJ0eSgic3RvcmUiKSYmYy5zdG9yZXx8Yy5oYXNPd25Qcm9wZXJ0eSgiaXNUb1NhdmVEYXRhIikmJmMuaXNUb1NhdmVEYXRhKSYmKHMuaXNUb1NhdmVEYXRhPSEwLHIuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITEsbiwiaXNUb1NhdmVEYXRhIiwhMCksci5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVEYXRhKCExLG4sbnVsbCxpLmJvZHkudmFsdWUuZGF0YSkpKSwKLy9mb3J3YXJkIHRvIGh5cGVydHk6CmkuaWQ9ZS5pZCxpLmZyb209ci5fdXJsLGkudG89byxpLmJvZHkuc2NoZW1hPWUuYm9keS5zY2hlbWEsaS5ib2R5LnJlc291cmNlPWUuYm9keS5yZXNvdXJjZSwKLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQplLmJvZHkuaGFzT3duUHJvcGVydHkoIm11dHVhbCIpJiYoaS5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsKSxrLmxvZygiW3N1YnNjcmliZV0gLSBuZXcgc3Vic2NyaXB0aW9uOiAiLGUsaSxzKSx0Ll9idXMucG9zdE1lc3NhZ2UoaSl9fSl9ZWxzZQovL2xpc3RlbmVyIHJlamVjdGVkCnIuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOm8sYm9keTppLmJvZHl9KX0pfSl9fSx7a2V5OiJfcmVzdW1lU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obil7dmFyIG89dC51cmwsaT10LnNjaGVtYSxzPWUuZnJvbSxhPW8rIi9jaGlsZHJlbi8iO2subG9nKCJbU3luY2hlck1hbmFnZXIgLSBSZXVzZVN1YnNjcmlwdGlvbl0gLSBvYmpVUkw6ICIsbywiIC0gc2NoZW1hOiIsaSksCi8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKGNoaWxkcmVuKQovLyBUT0RPOiByZW1vdmUgdGhpcyBzaW5jZSBjaGlsZHJlbiByZXNvdXJjZXMgc2hvdWxkIGJlIGF2YWlsYWJsZSBpbiB0aGUgRGF0YU9iamVjdHNTdG9yYWdlCnIuX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IoaSkudGhlbihmdW5jdGlvbihuKXt2YXIgdT1uLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzLGM9dS5jaGlsZHJlbj91LmNoaWxkcmVuLmNvbnN0YW50OltdLGY9W107Zi5wdXNoKG8rIi9jaGFuZ2VzIiksYy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBmLnB1c2goYStlKX0pLAovL0ZMT1ctT1VUOiByZXBseSB3aXRoIHByb3Zpc2lvbmFsIHJlc3BvbnNlCnIuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOnMsYm9keTp7Y29kZToxMDAsY2hpbGRyZW5SZXNvdXJjZXM6YyxzY2hlbWE6aSxyZXNvdXJjZTpvfX0pOwovL0ZMT1ctT1VUOiBzdWJzY3JpYmUgbWVzc2FnZSB0byByZW1vdGUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlU3Vic2NyaWJlCi8qbGV0IG9ialN1YnNjcmliZU1zZyA9IHsKICAgICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IHRoaXMuX3VybCwgdG86IG9ialVSTFN1YnNjcmlwdGlvbiwKICAgICAgICAgICAgYm9keTogeyBzdWJzY3JpYmVyOiBoeXBlcnR5VVJMLCBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHkgfQogICAgICAgICAgfTsKICAgICAgICAgICAvL3N1YnNjcmliZSB0byByZXBvcnRlciBTTQogICAgICAgICAgdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG9ialN1YnNjcmliZU1zZywgKHJlcGx5KSA9PiB7Ki8KdmFyIGw9ci5fb2JzZXJ2ZXJzW29dOwovLyBPYmplY3QuYXNzaWduKHN0b3JlZE9iamVjdC5kYXRhLCByZXBseS5ib2R5LnZhbHVlLmRhdGEpOwovLyBPYmplY3QuYXNzaWduKHN0b3JlZE9iamVjdC5jaGlsZHJlbnMsIHJlcGx5LmJvZHkudmFsdWUuY2hpbGRyZW5zKTsKLy9sb2cubG9nKCdbc3Vic2NyaWJlXSAtIHJlc3VtZSBzdWJzY3JpcHRpb246ICcsIG1zZywgcmVwbHksIHN0b3JlZE9iamVjdCwgb2JzZXJ2ZXIpOwovL3JlZ2lzdGVyIG5ldyBoeXBlcnR5IHN1YnNjcmlwdGlvbgpyZXR1cm4gbHx8KGw9bmV3IFIuZGVmYXVsdChyLG8sYyksbC5pc1RvU2F2ZURhdGE9dC5pc1RvU2F2ZURhdGEsci5fb2JzZXJ2ZXJzW29dPWwpLGwuYWRkU3Vic2NyaXB0aW9uKHMpLGwuYWRkQ2hpbGRyZW5zKGMpLHIuX2RlY3J5cHRDaGlsZHJlbnModCxjKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ3Jlc3VsdCBvZiBwcmV2aW91cyBwcm9taXNlJyk7Cm4oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtrLmVycm9yKCJbU3luY2hlck1hbmFnZXIgLSByZXN1bWUgc3Vic2NyaXB0aW9uXSAtIGZhaWwgb24gZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3I6ICIsZSksbighMSl9KX0pfX0se2tleToiX29uTG9jYWxVblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPShlLmZyb20sZS5ib2R5LnJlc291cmNlKSxuPXQuX29ic2VydmVyc1tyXTtuJiYoCi8vVE9ETzogaXMgdGhlcmUgYW55IHBvbGljeSB2ZXJpZmljYXRpb24gYmVmb3JlIGRlbGV0ZT8Kbi5yZW1vdmVTdWJzY3JpcHRpb24oZSksCi8vVE9ETzogZGVzdHJveSBvYmplY3QgaW4gdGhlIHJlZ2lzdHJ5Pwp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fSksdGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLmRlbGV0ZVJlc291cmNlKHIpLAovL1RPRE86IHJlbW92ZSBPYmplY3QgaWYgbm8gbW9yZSBzdWJzY3JpcHRpb24/CmRlbGV0ZSB0Ll9vYnNlcnZlcnNbcl0pfX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxTeW5jaGVyTWFuYWdlcn0oKTt0LmRlZmF1bHQ9TyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA1MDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNTEwKSxlLmV4cG9ydHM9cigxMykuT2JqZWN0LnZhbHVlc30sLyogNTEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzCnZhciBuPXIoMjEpLG89cig1MTEpKCExKTtuKG4uUywiT2JqZWN0Iix7dmFsdWVzOmZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfX0pfSwvKiA1MTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNjQpLG89cig0NSksaT1yKDc4KS5mO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciByLHM9byh0KSxhPW4ocyksdT1hLmxlbmd0aCxjPTAsZj1bXTt1PmM7KWkuY2FsbChzLHI9YVtjKytdKSYmZi5wdXNoKGU/W3Isc1tyXV06c1tyXSk7cmV0dXJuIGZ9fX0sLyogNTEyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDY5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMzEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigyKSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDcpLHk9X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocCksaD1yKDE0KSx2PXIoMjExKSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksYj1yKDEwMSksXz1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZChiKSxtPXkuZ2V0TG9nZ2VyKCJSZXBvcnRlck9iamVjdCIpLFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSZXBvcnRlck9iamVjdChlLHQscil7KDAsZi5kZWZhdWx0KSh0aGlzLFJlcG9ydGVyT2JqZWN0KTt2YXIgbj10aGlzO24uX3BhcmVudD1lLG4uX293bmVyPXQsbi5fdXJsPXIsbi5fYnVzPWUuX2J1cyxuLl9kb21haW49KDAsaC5kaXZpZGVVUkwpKHIpLmRvbWFpbixuLl9vYmpTdWJzY3JpcHRvclVSTD1uLl91cmwrIi9zdWJzY3JpcHRpb24iLG4uX3N1YnNjcmlwdGlvbnM9e30sbi5fY2hpbGRyZW5zPVtdLG4uX2NoaWxkcmVuTGlzdGVuZXJzPVtdLG4uX2ZvcndhcmRzPXt9LG4uX2lzVG9TYXZlRGF0YT0hMSxuLl9hbGxvY2F0ZUxpc3RlbmVycygpfXJldHVybigwLGQuZGVmYXVsdCkoUmVwb3J0ZXJPYmplY3QsW3trZXk6Il9hbGxvY2F0ZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpczsKLy9hZGQgc3Vic2NyaXB0aW9uIGxpc3RlbmVyLi4uCnQuX3N1YnNjcmlwdGlvbkxpc3RlbmVyPXQuX2J1cy5hZGRMaXN0ZW5lcih0Ll9vYmpTdWJzY3JpcHRvclVSTCxmdW5jdGlvbihlKXtzd2l0Y2gobS5pbmZvKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgcmVjZWl2ZWQgXSIsZSksZS50eXBlKXtjYXNlInN1YnNjcmliZSI6dC5fb25SZW1vdGVTdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6dC5fb25SZW1vdGVVblN1YnNjcmliZShlKTticmVhaztjYXNlInJlc3BvbnNlIjp0Ll9vblJlbW90ZVJlc3BvbnNlKGUpfX0pO3ZhciByPXQuX3VybCsiL2NoYW5nZXMiO3QuX2NoYW5nZUxpc3RlbmVyPXQuX2J1cy5hZGRMaXN0ZW5lcihyLGZ1bmN0aW9uKG4pe20uaW5mbygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF0gU3luY2hlck1hbmFnZXItIityKyItUkNWOiAiLG4pLAovL1RPRE86IHdoYXQgdG9kbyBoZXJlPyBTYXZlIGNoYW5nZXM/CmUuX2lzVG9TYXZlRGF0YSYmbi5ib2R5LmF0dHJpYnV0ZSYmKG0ubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgXSBTeW5jaGVyTWFuYWdlciAtIHNhdmUgZGF0YTogIixuKSx0Ll9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITAsdC5fdXJsLCJ2ZXJzaW9uIixuLmJvZHkudmVyc2lvbiksdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwibGFzdE1vZGlmaWVkIixuLmJvZHkubGFzdE1vZGlmaWVkKSx0Ll9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS5zYXZlRGF0YSghMCx0Ll91cmwsbi5ib2R5LmF0dHJpYnV0ZSxuLmJvZHkudmFsdWUpKX0pfX0se2tleToiX3JlbGVhc2VMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9zdWJzY3JpcHRpb25MaXN0ZW5lci5yZW1vdmUoKSxlLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKSxlLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVtb3ZlKCl9KSwoMCx1LmRlZmF1bHQpKGUuX2ZvcndhcmRzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuZm9yd2FyZFVuU3Vic2NyaWJlKHQpfSksCi8vcmVtb3ZlIGFsbCBzdWJzY3JpcHRpb25zCigwLHUuZGVmYXVsdCkoZS5fc3Vic2NyaXB0aW9ucykuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9zdWJzY3JpcHRpb25zW3RdLl9yZWxlYXNlTGlzdGVuZXJzKCl9KX19LHtrZXk6InJlc3VtZVN1YnNjcmlwdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZSYmKDAsdS5kZWZhdWx0KShlKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPWVbcl07bS5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdF0gLSByZXN1bWUgc3Vic2NyaXB0aW9ucyIsdCxuLHQuX2NoaWxkcmVucyksdC5fc3Vic2NyaXB0aW9uc1tuXXx8KHQuX3N1YnNjcmlwdGlvbnNbbl09bmV3IGcuZGVmYXVsdCh0Ll9idXMsdC5fb3duZXIsdC5fdXJsLHQuX2NoaWxkcmVucywhMCkpfSl9fSx7a2V5OiJmb3J3YXJkU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InN1YnNjcmliZSIsZnJvbTp0Ll9wYXJlbnQuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIit0Ll9kb21haW4rIi9zbSIsYm9keTp7cmVzb3VyY2VzOmUsc291cmNlOnQuX293bmVyfX07cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obixvKXt0Ll9idXMucG9zdE1lc3NhZ2UocixmdW5jdGlvbihyKXtpZihtLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF1mb3J3YXJkLXN1YnNjcmliZS1yZXNwb25zZShyZXBvcnRlcik6ICIsciksMjAwPT09ci5ib2R5LmNvZGUpe3ZhciBpPXQuX2J1cy5hZGRGb3J3YXJkKHQuX3VybCx0Ll9vd25lcik7dC5fZm9yd2FyZHNbZVswXV09aSxuKCl9ZWxzZSBvKCJFcnJvciBvbiBtc2ctbm9kZSBzdWJzY3JpcHRpb246ICIrci5ib2R5LmRlc2MpfSl9KX19LHtrZXk6ImZvcndhcmRVblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9mb3J3YXJkc1tlXS5yZW1vdmUoKSxkZWxldGUgdC5fZm9yd2FyZHNbZV07Ci8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byB0aGUgbXNnLW5vZGUgU3Vic2NyaXB0aW9uTWFuYWdlciBjb21wb25lbnQKdmFyIHI9e3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOnQuX3BhcmVudC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK3QuX2RvbWFpbisiL3NtIixib2R5OntyZXNvdXJjZXM6W2VdLHNvdXJjZTp0Ll9vd25lcn19O3QuX2J1cy5wb3N0TWVzc2FnZShyKX19LHtrZXk6ImFkZENoaWxkcmVucyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obixpKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIHZvaWQgbigpO3ZhciBzPXIuX3VybCsiL2NoaWxkcmVuLyI7bS5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCAtIGFkZENoaWxkcmVuc10gLSBjaGlsZHJlbnM6ICIsZSxzKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7ci5fY2hpbGRyZW5zLnB1c2goZSl9KTsvKgogICAgICAgIF90aGlzLl9jaGlsZHJlbnMuZm9yRWFjaCgoY2hpbGQpID0+IHsKICAgICAgICAgIGxldCBjaGlsZElkID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CiAgICAgICAgICAgbGV0IHNlbGZGb3J3YXJkID0gX3RoaXMuX2J1cy5hZGRGb3J3YXJkKGNoaWxkSWQsIG93bmVyKTsKICAgICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKHNlbGZGb3J3YXJkKTsKICAgICAgICB9KTsqLwp2YXIgYT1bXTtlLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGEucHVzaChzK2UpfSk7Ci8vX3RoaXMuX3N0b3JhZ2VTdWJzY3JpcHRpb25zW190aGlzLl9vYmpTdWJzY3JpcHRvclVSTF0gPSB7dXJsOiBfdGhpcy5fdXJsLCBvd25lcjogX3RoaXMuX293bmVyLCBjaGlsZHJlbnM6IF90aGlzLl9jaGlsZHJlbnN9OwovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gdGhlIG1zZy1ub2RlIFN1YnNjcmlwdGlvbk1hbmFnZXIgY29tcG9uZW50CnZhciB1PXt0eXBlOiJzdWJzY3JpYmUiLGZyb206ci5fcGFyZW50Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrci5fZG9tYWluKyIvc20iLGJvZHk6e3Jlc291cmNlczphLHNvdXJjZTpyLl9vd25lcn19O3IuX2J1cy5wb3N0TWVzc2FnZSh1LGZ1bmN0aW9uKGUpe20ubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgXW5vZGUtc3Vic2NyaWJlLXJlc3BvbnNlKHJlcG9ydGVyKToiLGUpLDIwMD09PWUuYm9keS5jb2RlPygKLy9hZGQgY2hpbGRyZW4gbGlzdGVuZXJzIG9uIGxvY2FsIC4uLgphLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ci5fYnVzLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7aWYoCi8vVE9ETzogd2hhdCB0b2RvIGhlcmU/IFNhdmUgY2hpbGRyZW5zPwptLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IHJlY2VpdmVkXSIsZSksImNyZWF0ZSI9PT1lLnR5cGUmJmUudG8uaW5jbHVkZXMoImNoaWxkcmVuIikmJnQuX2lzVG9TYXZlRGF0YSl7Ci8vIGlmIHRoZSB2YWx1ZSBpcyBub3QgZW5jcnlwdGVkIGxldHMgZW5jcnlwdCBpdAovLyB0b2RvOiBzaG91bGQgYmUgc3ViamVjdCB0byBzb21lIHBvbGljeQp2YXIgbj0oMCxoLnNwbGl0T2JqZWN0VVJMKShlLnRvKSxpPW4udXJsOwovL3JlbW92ZSBmYWxzZSB3aGVuIG11dHVhbEF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQKInN0cmluZyIhPXR5cGVvZiBlLmJvZHkudmFsdWU/KG0ubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3RdIGVuY3J5cHRpbmcgcmVjZWl2ZWQgZGF0YSAiLGUuYm9keS52YWx1ZSksXy5kZWZhdWx0LmVuY3J5cHREYXRhT2JqZWN0KGUuYm9keS52YWx1ZSxpKS50aGVuKGZ1bmN0aW9uKHQpe20ubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3RdIGVuY3J5cHRlZCBkYXRhICIsdCksci5fc3RvcmVDaGlsZE9iamVjdChlLCgwLG8uZGVmYXVsdCkodCkpfSkuY2F0Y2goZnVuY3Rpb24odCl7bS53YXJuKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIGZhaWxlZCA6ICIsdCwiIFN0b3JpbmcgdW5lbmNyeXB0ZWQiKSxyLl9zdG9yZUNoaWxkT2JqZWN0KGUsZS5ib2R5LnZhbHVlKX0pKTpyLl9zdG9yZUNoaWxkT2JqZWN0KGUsZS5ib2R5LnZhbHVlKX19KTtyLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKG4pO3ZhciBpPXIuX2J1cy5hZGRGb3J3YXJkKGUsci5fb3duZXIpO3IuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2goaSl9KSxuKCkpOmkoIkVycm9yIG9uIG1zZy1ub2RlIHN1YnNjcmlwdGlvbjogIitlLmJvZHkuZGVzYyl9KX0pfX0se2tleToiX3N0b3JlQ2hpbGRPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPSgwLGguc3BsaXRPYmplY3RVUkwpKGUudG8pLG89bi51cmwsaT1uLnJlc291cmNlLHM9e2lkZW50aXR5OmUuYm9keS5pZGVudGl0eSx2YWx1ZTp0fSxhPWUuYm9keS5yZXNvdXJjZSx1PWk7YSYmKHUrPSIuIithKSwKLy8gdGhpcyBpZGVudGl0eSBkYXRhIGlzIG5vdCBuZWVkZWQgdG8gYmUgc3RvcmVkCmRlbGV0ZSBzLmlkZW50aXR5LmFzc2VydGlvbixkZWxldGUgcy5pZGVudGl0eS5leHBpcmVzLHIuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVDaGlsZHJlbnMoITAsbyx1LHMpfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD0oMCxoLmRpdmlkZVVSTCkoZS5fb3duZXIpLmRvbWFpbjsKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IGRpcmVjdGx5IHRvIGFsbCBzdWJzY3JpYmVycyBvZiB0aGUgcmVwb3J0ZXIKZS5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJkZWxldGUiLGZyb206ZS5fb2JqU3Vic2NyaXB0b3JVUkwsdG86ZS5fdXJsKyIvY2hhbmdlcyJ9KSwKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIHRoZSBtc2ctbm9kZSBPYmplY3RBbGxvY2F0aW9uTWFuYWdlciBjb21wb25lbnQKZS5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJkZWxldGUiLGZyb206ZS5fcGFyZW50Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrdCsiL29iamVjdC1hZGRyZXNzLWFsbG9jYXRpb24iLGJvZHk6e3Jlc291cmNlOmUuX3VybCxjaGlsZHJlblJlc291cmNlczplLl9jaGlsZHJlbnN9fSksZS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSBlLl9wYXJlbnQuX3JlcG9ydGVyc1tlLl91cmxdfX0se2tleToiX29uUmVtb3RlUmVzcG9uc2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86dC5fdXJsLGJvZHk6e2NvZGU6ZS5ib2R5LmNvZGUsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LHNvdXJjZTplLmZyb219fSl9fSx7a2V5OiJfb25SZW1vdGVTdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuc3Vic2NyaWJlcjsKLy92YWxpZGF0ZSBpZiBzdWJzY3JpcHRpb24gYWxyZWFkeSBleGlzdHM/CnQuX3N1YnNjcmlwdGlvbnNbcl0mJgovLyBsZXQgZXJyb3JNc2cgPSB7Ci8vICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogaHlwZXJ0eVVSTCwKLy8gICBib2R5OiB7IGNvZGU6IDUwMCwgZGVzYzogJ1N1YnNjcmlwdGlvbiBmb3IgKCcgKyBfdGhpcy5fdXJsICsgJyA6ICcgKyAgaHlwZXJ0eVVSTCArICcpIGFscmVhZHkgZXhpc3RzIScgfQovLyB9OwovLwovLyBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGVycm9yTXNnKTsKLy8gcmV0dXJuOwovLyBuZXcgdmVyc2lvbiBiZWNhdXNlIG9mIHJldXNhZ2UKdC5fc3Vic2NyaXB0aW9uc1tyXS5fcmVsZWFzZUxpc3RlbmVycygpOwovL2FzayB0byBzdWJzY3JpYmUgdG8gU3luY2hlcj8gKGRlcGVuZHMgb24gdGhlIG9wZXJhdGlvbiBtb2RlKQovL1RPRE86IGdldCBtb2RlIGZyb20gb2JqZWN0IQp2YXIgbj17dHlwZToiZm9yd2FyZCIsZnJvbTp0Ll91cmwsdG86dC5fb3duZXIsYm9keTp7dHlwZTplLnR5cGUsZnJvbTpyLHRvOnQuX3VybCxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9fTsKLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQplLmJvZHkuaGFzT3duUHJvcGVydHkoIm11dHVhbCIpJiYobi5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsKSx0Ll9idXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihuKXttLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF1mb3J3YXJkLXJlcGx5OiAiLG4pLDIwMD09PW4uYm9keS5jb2RlJiYodC5fc3Vic2NyaXB0aW9uc1tyXXx8KG0ubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3RdIC0gX29uUmVtb3RlU3Vic2NyaWJlOiIsdC5fY2hpbGRyZW5zKSx0Ll9zdWJzY3JpcHRpb25zW3JdPW5ldyBnLmRlZmF1bHQodC5fYnVzLHQuX293bmVyLHQuX3VybCx0Ll9jaGlsZHJlbnMsITApKSk7Ci8vVE9ETzogYXR1YWxpemFyIG11dHVhbCBubyBzdG9yYWdlIGUgdGIgbmEgc2Vzc2lvbktleXMKLy8gU3RvcmUgZm9yIGVhY2ggcmVwb3J0ZXIgaHlwZXJ0eSB0aGUgZGF0YU9iamVjdAp2YXIgbz12b2lkIDA7ZS5ib2R5LmlkZW50aXR5JiZlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCYmKG89ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwic3Vic2NyaWJlclVzZXJzIixvKSksZS5ib2R5Lmhhc093blByb3BlcnR5KCJtdXR1YWwiKSYmCi8vICAgICAgICAgIF90aGlzLl9wYXJlbnQuX2lkZW50aXR5TW9kdWxlLnVwZGF0ZUlzVG9FbmNyeXB0Rm9yRGF0YU9iamVjdFNlc3Npb25LZXkoX3RoaXMuX3VybCwgbXNnLmJvZHkubXV0dWFsKS50aGVuKCgpPT57CnQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCx0Ll91cmwsIm11dHVhbCIsZS5ib2R5Lm11dHVhbCksdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwic3Vic2NyaXB0aW9ucyIsciksbi5ib2R5Lm93bmVyPXQuX293bmVyLAovL0ZMT1ctT1VUOiBzdWJzY3JpcHRpb24gcmVzcG9uc2Ugc2VudCAoZm9yd2FyZCBmcm9tIGludGVybmFsIEh5cGVydHkpCnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Om4uYm9keX0pfSl9fSx7a2V5OiJfb25SZW1vdGVVblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5zb3VyY2Usbj10Ll9zdWJzY3JpcHRpb25zW3JdO2lmKG4pe24uX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXTt2YXIgbz17dHlwZToiZm9yd2FyZCIsZnJvbTp0Ll91cmwsdG86dC5fb3duZXIsYm9keTp7dHlwZTplLnR5cGUsZnJvbTpyLHRvOnQuX3VybCxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9fTt0Ll9idXMucG9zdE1lc3NhZ2Uobyl9fX0se2tleToiaXNUb1NhdmVEYXRhIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faXNUb1NhdmVEYXRhPWV9fV0pLFJlcG9ydGVyT2JqZWN0fSgpO3QuZGVmYXVsdD1SLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUxMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH1mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig2OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig3KSxkPV9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKGwpLHA9cigxNCkseT1yKDIxMSksaD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHkpLHY9cigxMDEpLGc9X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQodiksYj1kLmdldExvZ2dlcigiT2JzZXJ2ZXJPYmplY3QiKSxfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gT2JzZXJ2ZXJPYmplY3QoZSx0LHIpe3ZhciBuPXRoaXM7KDAsdS5kZWZhdWx0KSh0aGlzLE9ic2VydmVyT2JqZWN0KTt2YXIgbz10aGlzO28uX3BhcmVudD1lLG8uX3VybD10LG8uX2NoaWxkcmVucz1yLG8uX2J1cz1lLl9idXMsby5fc3Vic2NyaXB0aW9ucz17fSxvLl9zdG9yYWdlU3Vic2NyaXB0aW9ucz17fSxvLl9jaGlsZHJlbkxpc3RlbmVycz1bXSx0aGlzLl9pc1RvU2F2ZURhdGE9ITE7dmFyIGk9by5fdXJsKyIvY2hhbmdlcyI7by5fY2hhbmdlTGlzdGVuZXI9by5fYnVzLmFkZExpc3RlbmVyKGksZnVuY3Rpb24oZSl7Yi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCBdIFN5bmNoZXJNYW5hZ2VyLSIraSsiLVJDVjogIixlKSwKLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGFuZ2VzPwpuLl9pc1RvU2F2ZURhdGEmJmUuYm9keS5hdHRyaWJ1dGUmJihiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0IF0gU3luY2hlck1hbmFnZXIgLSBzYXZlIGRhdGE6ICIsZSksby5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCExLG8uX3VybCwidmVyc2lvbiIsZS5ib2R5LnZlcnNpb24pLG8uX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMSxvLl91cmwsImxhc3RNb2RpZmllZCIsZS5ib2R5Lmxhc3RNb2RpZmllZCksby5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZURhdGEoITEsby5fdXJsLGUuYm9keS5hdHRyaWJ1dGUsZS5ib2R5LnZhbHVlKSl9KX1yZXR1cm4oMCxmLmRlZmF1bHQpKE9ic2VydmVyT2JqZWN0LFt7a2V5OiJfbmV3U3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5fc3Vic2NyaXB0aW9uc1tlXTtiLmxvZygiW09ic2VydmVyIE9iamVjdCAtIG5ldyBzdWJzY3JpcHRpb25dIC0gIix0Ll9zdWJzY3JpcHRpb25zLGUsdC5fc3Vic2NyaXB0aW9ucy5oYXNPd25Qcm9wZXJ0eShlKSkscnx8KHQuX3N1YnNjcmlwdGlvbnNbZV09bmV3IGguZGVmYXVsdCh0Ll9idXMsZSx0Ll91cmwsdC5fY2hpbGRyZW5zLCExKSl9fSx7a2V5OiJhZGRTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX25ld1N1YnNjcmlwdGlvbihlKX19LHtrZXk6ImFkZENoaWxkcmVucyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obil7aWYoMD09PWUubGVuZ3RoKXJldHVybiBuKCk7dmFyIGk9ci5fdXJsKyIvY2hpbGRyZW4vIjtiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0IC0gYWRkQ2hpbGRyZW5zXSAtIGNoaWxkcmVuczogIixlLGkpLGUuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1yLl9idXMuYWRkTGlzdGVuZXIoaStlLGZ1bmN0aW9uKGUpe2lmKAovL1RPRE86IHdoYXQgdG9kbyBoZXJlPyBTYXZlIGNoaWxkcmVucz8KYi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCByZWNlaXZlZF0iLGUpLCJjcmVhdGUiPT09ZS50eXBlJiZlLnRvLmluY2x1ZGVzKCJjaGlsZHJlbiIpJiZ0Ll9pc1RvU2F2ZURhdGEpe3ZhciBpPSgwLHAuc3BsaXRPYmplY3RVUkwpKGUudG8pLHM9aS51cmw7Ci8vcmVtb3ZlIGZhbHNlIHdoZW4gbXV0dWFsQXV0aGVudGljYXRpb24gaXMgZW5hYmxlZAoic3RyaW5nIiE9dHlwZW9mIGUuYm9keS52YWx1ZT8oYi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdF0gZW5jcnlwdGluZyByZWNlaXZlZCBkYXRhICIsZS5ib2R5LnZhbHVlKSxnLmRlZmF1bHQuZW5jcnlwdERhdGFPYmplY3QoZS5ib2R5LnZhbHVlLHMpLnRoZW4oZnVuY3Rpb24odCl7Yi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdF0gZW5jcnlwdGVkIGRhdGEgIix0KSxyLl9zdG9yZUNoaWxkT2JqZWN0KGUsKDAsby5kZWZhdWx0KSh0KSl9KS5jYXRjaChmdW5jdGlvbih0KXtiLndhcm4oIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdC5fZW5jcnlwdENoaWxkXSBmYWlsZWQsIHN0b3JpbmcgdW5lbmNyeXB0ZWQgIix0KSxyLl9zdG9yZUNoaWxkT2JqZWN0KGUsZS5ib2R5LnZhbHVlKX0pKTpyLl9zdG9yZUNoaWxkT2JqZWN0KGUsZS5ib2R5LnZhbHVlKX1iLmxvZygiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0IGNoaWxkcmVuIExpc3RlbmVyc10iLHIuX2NoaWxkcmVuTGlzdGVuZXJzLG4pLC0xPT09ci5fY2hpbGRyZW5MaXN0ZW5lcnMuaW5kZXhPZihuKSYmci5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChuKX0pfSl9KX19LHtrZXk6Il9zdG9yZUNoaWxkT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj0oMCxwLnNwbGl0T2JqZWN0VVJMKShlLnRvKSxvPW4udXJsLGk9bi5yZXNvdXJjZSxzPXtpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksdmFsdWU6dH07Ci8vIHRoaXMgaWRlbnRpdHkgZGF0YSBpcyBub3QgbmVlZGVkIHRvIGJlIHN0b3JlZApkZWxldGUgcy5pZGVudGl0eS5hc3NlcnRpb24sZGVsZXRlIHMuaWRlbnRpdHkuZXhwaXJlczt2YXIgYT1lLmJvZHkucmVzb3VyY2UsdT1pO2EmJih1Kz0iLiIrYSksYi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdC5fc3RvcmVDaGlsZE9iamVjdF0gOiAiLG8sdSxzKSxyLl9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS5zYXZlQ2hpbGRyZW5zKCExLG8sdSxzKX19LHtrZXk6InJlbW92ZVN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbSxuPSgwLHAuZGl2aWRlVVJMKShyKS5kb21haW4sbz10Ll91cmwrIi9zdWJzY3JpcHRpb24iLGk9dC5fc3Vic2NyaXB0aW9uc1tyXTtpJiYoCi8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byByZW1vdGUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlVW5TdWJzY3JpYmUKdC5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTp0Ll9wYXJlbnQuX3VybCx0bzpvLGJvZHk6e3NvdXJjZTpyLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX19KSwKLy9UT0RPOiBzaG91bGQgSSB3YWl0IGZvciByZXNwb25zZSBiZWZvcmUgdW5zdWJzY3JpYmUgb24gbXNnLW5vZGUKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIG1zZy1ub2RlIFN1YnNjcmlwdGlvbk1hbmFnZXIgY29tcG9uZW50CnQuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToidW5zdWJzY3JpYmUiLGZyb206dC5fcGFyZW50Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrbisiL3NtIixib2R5OntyZXNvdXJjZTp0Ll91cmwsY2hpbGRyZW5SZXNvdXJjZXM6dC5fY2hpbGRyZW5zfX0pLGkuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXSl9fSx7a2V5OiJpc1RvU2F2ZURhdGEiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9pc1RvU2F2ZURhdGE9ZX19XSksT2JzZXJ2ZXJPYmplY3R9KCk7dC5kZWZhdWx0PV8sZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTE0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMjEwKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDcpLGQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShsKSxwPXIoMTQpLHk9cig1MTUpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSx2PWQuZ2V0TG9nZ2VyKCJTdWJzY3JpcHRpb25NYW5hZ2VyIiksZz1mdW5jdGlvbigpe2Z1bmN0aW9uIFN1YnNjcmlwdGlvbk1hbmFnZXIoZSx0LHIpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxTdWJzY3JpcHRpb25NYW5hZ2VyKSwhZSl0aHJvdyBuZXcgRXJyb3IoIltTdWJzY3JpcHRpb25NYW5hZ2VyXSAtIG5lZWRzIHRoZSBydW50aW1lVVJMIHBhcmFtZXRlciIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIC0gbmVlZHMgdGhlIE1lc3NhZ2VCdXMgaW5zdGFuY2UiKTt2YXIgbj10aGlzO24uX2J1cz10LG4uX3N0b3JhZ2U9cixuLl9zdWJzY3JpcHRpb25zPXt9LG4uX3N1YnNjcmlwdGlvbnNTdG9yYWdlPXt9LAovL1RPRE86IHRoZXNlIHNob3VsZCBiZSBzYXZlZCBpbiBwZXJzaXN0ZW5jZSBlbmdpbmU/Cm4ucnVudGltZVVSTD1lLG4uX3VybD1lKyIvc3Vic2NyaXB0aW9ucyIsCi8vVE9ETzogdGhpcyBzaG91bGQgbm90IGJlIGhhcmRjb2RlZCEKbi5fZG9tYWluPSgwLHAuZGl2aWRlVVJMKShlKS5kb21haW4sdC5hZGRMaXN0ZW5lcihuLl91cmwsZnVuY3Rpb24oZSl7c3dpdGNoKHYuaW5mbygiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIFJDVjogIixlKSxlLnR5cGUpe2Nhc2Uic3Vic2NyaWJlIjpuLl9vblN1YnNjcmliZShlKTticmVhaztjYXNlInVuc3Vic2NyaWJlIjpuLl9vblVuU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UicmVhZCI6bi5fb25SZWFkKGUpfX0pfXJldHVybigwLGYuZGVmYXVsdCkoU3Vic2NyaXB0aW9uTWFuYWdlcixbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHQpe2UuX3N0b3JhZ2UuZ2V0KCJzdWJzY3JpcHRpb25zIikudGhlbihmdW5jdGlvbihyKXt2LmxvZygiW1N1YnNjcmlwdGlvbk1hbmFnZXIuaW5pdF0gcmVzdW1lIHN1YnNjcmlwdGlvbnM6ICIsciksciYmKGUuX3N1YnNjcmlwdGlvbnNTdG9yYWdlPXIsKDAsby5kZWZhdWx0KShyKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NyZWF0ZVN1YnNjcmlwdGlvbih0LmRvbWFpbix0LnJlc291cmNlcyx0LnN1YnNjcmliZXIsdC5pZGVudGl0eSl9KSksdCgpfSl9KX19LHtrZXk6Il9vblN1YnNjcmliZSIsCi8vbWVzc2FnZSByZWNlaXZlZCB0byBzZXQgYSByb3V0aW5nIHBhdGgKdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZXMsbj1lLmZyb20sbz0oMCxwLmRpdmlkZVVSTCkoclswXSkuZG9tYWluLGk9ZS5ib2R5LmlkZW50aXR5O3QuX2NyZWF0ZVN1YnNjcmlwdGlvbihvLHIsbixpKS50aGVuKGZ1bmN0aW9uKHMpewovL2ZvcndhcmQgdG8gaHlwZXJ0eToKcy5pZD1lLmlkLHMuZnJvbT10Ll91cmwscy50bz1uLHMuYm9keT1lLmJvZHkscy5ib2R5LmNvZGU9MjAwLHYubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gLSBjcmFldGVTdWJzY3JpcHRpb246ICIsZSxzLG4pLHQuX2J1cy5wb3N0TWVzc2FnZShzKSx0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtuXT9yLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbbl0ucmVzb3VyY2VzLmluY2x1ZGVzKGUpfHx0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtuXS5yZXNvdXJjZXMucHVzaChlKX0pOnQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW25dPXtkb21haW46byxyZXNvdXJjZXM6cixzdWJzY3JpYmVyOm4saWRlbnRpdHk6aX0sdC5fc3RvcmFnZS5zZXQoInN1YnNjcmlwdGlvbnMiLDEsdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2UpfSl9fSx7a2V5OiJfY3JlYXRlU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzOwovL2RlYnVnZ2VyOwpyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihpKXsKLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gdGhlIG1zZy1ub2RlLCByZWdpc3RlcmluZyBsaXN0ZW5lcnMgb24gdGhlIGJyb2tlcgp2YXIgcz17dHlwZToic3Vic2NyaWJlIixmcm9tOm8uX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitlKyIvc20iLGJvZHk6e2lkZW50aXR5Om4scmVzb3VyY2VzOnQsc291cmNlOnJ9fTsKLy9zdWJzY3JpYmUgaW4gbXNnLW5vZGUKby5fYnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24oZSl7di5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyXSBub2RlLXN1YnNjcmliZS1yZXNwb25zZTogIixlKTsKLy9pZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsvL1RPRE86IHVuY29tbWVudCB3aGVuICBNTiByZXBsaWVzIHdpdGggY29ycmVjdCByZXNwb25zZSBib2R5IGNvZGUKLy9UT0RPOiBzdXBwb3J0IG11bHRpcGxlIHJvdXRlcyBmb3IgbXVsdGlwbGUgcmVzb3VyY2VzCnZhciBuPW8uX3N1YnNjcmlwdGlvbnNbcl07di5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyXSAtICIsby5fc3Vic2NyaXB0aW9ucyx0LG8uX3N1YnNjcmlwdGlvbnMuaGFzT3duUHJvcGVydHkocikpLG58fChvLl9zdWJzY3JpcHRpb25zW3JdPXt9KSx0LmZvckVhY2goZnVuY3Rpb24oZSl7by5fc3Vic2NyaXB0aW9uc1tyXVtlXT1uZXcgaC5kZWZhdWx0KG8uX2J1cyxyLGUpfSksaShlKX0pfSl9fSx7a2V5OiJfb25VblN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbSxuPWUuYm9keS5yZXNvdXJjZTtpZih0Ll9zdWJzY3JpcHRpb25zW3JdJiZ0Ll9zdWJzY3JpcHRpb25zW3JdW25dKXt2YXIgbz0oMCxwLmRpdmlkZVVSTCkobikuZG9tYWluLGk9dC5fc3Vic2NyaXB0aW9uc1tyXVtuXTtpZigKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIG1zZy1ub2RlIFN1YnNjcmlwdGlvbk1hbmFnZXIgY29tcG9uZW50CnQuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToidW5zdWJzY3JpYmUiLGZyb206dC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK28rIi9zbSIsYm9keTp7cmVzb3VyY2VzOltuXSxzb3VyY2U6cn19KSxpLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl1bbl0sdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbcl0pe3ZhciBzPXQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW3JdLnJlc291cmNlcy5pbmRleE9mKG4pOy0xIT1zJiZ0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtyXS5yZXNvdXJjZXMuc3BsaWNlKHMsMSksdC5fc3RvcmFnZS5zZXQoInN1YnNjcmlwdGlvbnMiLDEsdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2UpfX10Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDB9fSl9fSx7a2V5OiJfb25SZWFkIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dm9pZCAwO3YubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gLSByZXF1ZXN0IHRvIHJlYWQgU3Vic2NyaXB0aW9uczogIixlKSx0Ll9zdG9yYWdlLmdldCgic3Vic2NyaXB0aW9ucyIpLnRoZW4oZnVuY3Rpb24obyl7aWYobyYmb1tyXSl7dmFyIGk9b1tyXS5yZXNvdXJjZXM7bj17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTppfX19ZWxzZSBuPXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6NDA0LGRlc2NyaXB0aW9uOiJOb3QgRm91bmQifX07dC5fYnVzLnBvc3RNZXNzYWdlKG4pfSl9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fV0pLFN1YnNjcmlwdGlvbk1hbmFnZXJ9KCk7dC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDcpLHU9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShhKSxjPXUuZ2V0TG9nZ2VyKCJTdWJzY3JpcHRpb24iKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU3Vic2NyaXB0aW9uKGUsdCxyKXsoMCxvLmRlZmF1bHQpKHRoaXMsU3Vic2NyaXB0aW9uKTt2YXIgbj10aGlzO24uX3N1YnNjcmliZXI9dCxuLnJlc291cmNlPXIsYy5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyLlN1YnNjcmlwdGlvbl0gbmV3OiAiLHQsciksCi8vYWRkIGZvcndhcmQKbi5fbGlzdGVuZXI9ZS5hZGRGb3J3YXJkKHIsdCl9cmV0dXJuKDAscy5kZWZhdWx0KShTdWJzY3JpcHRpb24sW3trZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2xpc3RlbmVyLnJlbW92ZSgpfX1dKSxTdWJzY3JpcHRpb259KCk7dC5kZWZhdWx0PWYsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjkpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig1OSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNjcpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoNjgpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPXIoNyksYj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGcpLF89cigyMDYpLG09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxSPXIoMjA3KSx3PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoUiksUz1yKDE0KSxrPXIoMjA4KSxPPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoayksUD1yKDUxNyksTT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFApLEw9KGIuZ2V0TG9nZ2VyKCJQRVAiKSxmdW5jdGlvbihlKXtmdW5jdGlvbiBSdW50aW1lQ29yZUN0eChlLHQscixuLG8peygwLGYuZGVmYXVsdCkodGhpcyxSdW50aW1lQ29yZUN0eCk7dmFyIGk9KDAseS5kZWZhdWx0KSh0aGlzLChSdW50aW1lQ29yZUN0eC5fX3Byb3RvX198fCgwLHUuZGVmYXVsdCkoUnVudGltZUNvcmVDdHgpKS5jYWxsKHRoaXMpKTtyZXR1cm4gaS5fcnVudGltZVVSTD1lLGkuX3BlcFVSTD1pLl9ydW50aW1lVVJMKyIvcGVwIixpLl9ndWlVUkw9aS5fcnVudGltZVVSTCsiL3BvbGljeS1ndWkiLGkuaWRNb2R1bGU9dCxpLnJ1bnRpbWVSZWdpc3RyeT1yLGkuYWN0aXZlVXNlclBvbGljeT12b2lkIDAsaS5zZXJ2aWNlUHJvdmlkZXJQb2xpY3k9e30saS51c2VyUG9saWNpZXM9e30saS5zdG9yYWdlTWFuYWdlcj1uLGkucnVudGltZUNhcGFiaWxpdGllcz1vLGl9cmV0dXJuKDAsdi5kZWZhdWx0KShSdW50aW1lQ29yZUN0eCxlKSwoMCxkLmRlZmF1bHQpKFJ1bnRpbWVDb3JlQ3R4LFt7a2V5OiJsb2FkQ29uZmlndXJhdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbih0LHIpe2Uuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXRoaW5rOmFjdGl2ZVBvbGljeSIpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuYWN0aXZlVXNlclBvbGljeT10LGUuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXRoaW5rOmdyb3VwcyIpfSkudGhlbihmdW5jdGlvbih0KXt2YXIgcj10O3JldHVybiBlLmdyb3Vwcz12b2lkIDA9PT1yP3t9OnIsZS5zdG9yYWdlTWFuYWdlci5nZXQoInJldGhpbms6c3BQb2xpY2llcyIpfSkudGhlbihmdW5jdGlvbihyKXt2YXIgbj1yO2Uuc2VydmljZVByb3ZpZGVyUG9saWN5PXZvaWQgMD09PW4/e306bixlLl9sb2FkVXNlclBvbGljaWVzKCkudGhlbihmdW5jdGlvbigpe3QoKX0pfSl9KX19LHtrZXk6ImdldFBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXt9O3JldHVybiB2b2lkIDAhPT10aGlzLmFjdGl2ZVVzZXJQb2xpY3kmJihyLnVzZXJQb2xpY3k9dGhpcy51c2VyUG9saWNpZXNbdGhpcy5hY3RpdmVVc2VyUG9saWN5XSksci5zZXJ2aWNlUHJvdmlkZXJQb2xpY3k9dGhpcy5nZXRTZXJ2aWNlUHJvdmlkZXJQb2xpY3koZSx0KSxyfX0se2tleToiX2lzVmFsaWRVcGRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlLmZyb20uc3BsaXQoIjovLyIpLmxlbmd0aD4xP3QuaWRNb2R1bGUuX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdChlLmZyb20pLnRoZW4oZnVuY3Rpb24odCl7dD09PWUuYm9keS5zb3VyY2U/cihlKTpuKCJUaGUgc291cmNlIG9mIHRoZSBtZXNzYWdlIGlzIG5vdCB2YWxpZC4iKX0sZnVuY3Rpb24oZSl7bihlKX0pOnIoZSl9KX19LHtrZXk6ImdldE15RW1haWxzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaWRNb2R1bGUuZ2V0SWRlbnRpdGllcygpLHQ9W107Zm9yKHZhciByIGluIGUpdC5wdXNoKCgwLFMuZ2V0VXNlckVtYWlsRnJvbVVSTCkoZVtyXS5pZGVudGl0eSkpO3JldHVybiB0fX0se2tleToiZ2V0TXlIeXBlcnRpZXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ydW50aW1lUmVnaXN0cnkuaHlwZXJ0aWVzTGlzdCx0PVtdO2Zvcih2YXIgciBpbiBlKXt2YXIgbj1lW3JdLm9iamVjdE5hbWU7LTE9PT10LmluZGV4T2YobikmJnQucHVzaChuKX1yZXR1cm4gdH19LHtrZXk6ImdldFNlcnZpY2VQcm92aWRlclBvbGljeSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj12b2lkIDA7aWYodCl7dmFyIG49dGhpcy5ydW50aW1lUmVnaXN0cnkuZ2V0SHlwZXJ0eU5hbWUoZS50byk7cj10aGlzLnNlcnZpY2VQcm92aWRlclBvbGljeVtuXX1lbHNle3ZhciBvPXRoaXMucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlOYW1lKGUuZnJvbSk7cj10aGlzLnNlcnZpY2VQcm92aWRlclBvbGljeVtvXX1yZXR1cm4gcn19LHtrZXk6ImdldFVSTCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpO3JldHVybiB0WzBdKyIvLyIrdFsyXSsiLyIrdFszXX19LHtrZXk6Il9sb2FkVXNlclBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5zdG9yYWdlTWFuYWdlci5nZXQoInJldGhpbms6dXNlclBvbGljaWVzIikudGhlbihmdW5jdGlvbih0KXt2YXIgbj10O2lmKHZvaWQgMCE9PW4pZm9yKHZhciBvIGluIG4pZS5wZXAuYWRkUG9saWN5KCJVU0VSIixvLG5bb10pO3IoKX0pfSl9fSx7a2V5OiJfZ2V0TGFzdENvbXBvbmVudE9mVVJMIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIvIik7cmV0dXJuIHRbdC5sZW5ndGgtMV19fSx7a2V5OiJfZ2V0UG9saWNpZXNKU09OIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl7dmFyIHI9ZVt0XS5jb21iaW5pbmdBbGdvcml0aG07ciBpbnN0YW5jZW9mIHcuZGVmYXVsdD9lW3RdLmNvbWJpbmluZ0FsZ29yaXRobT0iYmxvY2tPdmVycmlkZXMiOnIgaW5zdGFuY2VvZiBtLmRlZmF1bHQ/ZVt0XS5jb21iaW5pbmdBbGdvcml0aG09ImFsbG93T3ZlcnJpZGVzIjpyIGluc3RhbmNlb2YgTy5kZWZhdWx0P2VbdF0uY29tYmluaW5nQWxnb3JpdGhtPSJmaXJzdEFwcGxpY2FibGUiOmVbdF0uY29tYmluaW5nQWxnb3JpdGhtPXZvaWQgMH1yZXR1cm4gZX19LHtrZXk6InNhdmVBY3RpdmVQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazphY3RpdmVQb2xpY3kiLDAsZS5hY3RpdmVVc2VyUG9saWN5KS50aGVuKGZ1bmN0aW9uKCl7cigpfSl9KX19LHtrZXk6InNhdmVHcm91cHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazpncm91cHMiLDAsZS5ncm91cHMpLnRoZW4oZnVuY3Rpb24oKXtyKCl9KX0pfX0se2tleToic2F2ZVBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwO3N3aXRjaChlKXtjYXNlIlVTRVIiOm49KDAsby5kZWZhdWx0KSh0aGlzLnVzZXJQb2xpY2llcyksbj10aGlzLl9nZXRQb2xpY2llc0pTT04oSlNPTi5wYXJzZShuKSksdGhpcy5zdG9yYWdlTWFuYWdlci5zZXQoInJldGhpbms6dXNlclBvbGljaWVzIiwwLG4pO2JyZWFrO2Nhc2UiU0VSVklDRV9QUk9WSURFUiI6dm9pZCAwIT09dCZ2b2lkIDAhPT1yJiYodGhpcy5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbcl09dCksbj0oMCxvLmRlZmF1bHQpKHRoaXMuc2VydmljZVByb3ZpZGVyUG9saWN5KSxuPXRoaXMuX2dldFBvbGljaWVzSlNPTihKU09OLnBhcnNlKG4pKSx0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazpzcFBvbGljaWVzIiwwLG4pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gcG9saWN5IHNvdXJjZTogIitlKX19fSx7a2V5OiJnZXRHcm91cHNOYW1lcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3Vwcyx0PVtdO2lmKHZvaWQgMCE9PWUpZm9yKHZhciByIGluIGUpdC5wdXNoKHIpO3JldHVybiB0fX0se2tleToiZ2V0R3JvdXAiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9W107aWYoInByZWF1dGhvcmlzZWQiPT09ZSl7dmFyIG49dC5zcGxpdCgiLyIpO24ucG9wKCksbj1uWzBdKyIvLyIrblsyXSxyPXRoaXMucnVudGltZVJlZ2lzdHJ5LmdldFByZUF1dGhTdWJzY3JpYmVycyhuKX1lbHNlIHZvaWQgMCE9PXRoaXMuZ3JvdXBzW2VdJiYocj10aGlzLmdyb3Vwc1tlXSk7cmV0dXJuIHJ9fSx7a2V5OiJjcmVhdGVHcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cHNbZV09W10sdGhpcy5zYXZlR3JvdXBzKCl9fSx7a2V5OiJkZWxldGVHcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuZ3JvdXBzW2VdLHRoaXMuc2F2ZUdyb3VwcygpfX0se2tleToiYWRkVG9Hcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyb3VwcztpZih2b2lkIDA9PT1yW2VdKXRocm93IEVycm9yKCdHcm91cCAiJytlKyciIGRvZXMgbm90IGV4aXN0IScpOy0xPT09cltlXS5pbmRleE9mKHQpJiYocltlXS5wdXNoKHQpLHRoaXMuc2F2ZUdyb3VwcygpKX19LHtrZXk6InJlbW92ZUZyb21Hcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyb3Vwc1tlXTtyLnNwbGljZShyLmluZGV4T2YodCksMSksdGhpcy5zYXZlR3JvdXBzKCl9fSx7a2V5OiJwZXBVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wZXBVUkx9fSx7a2V5OiJndWlVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ndWlVUkx9fSx7a2V5OiJydW50aW1lVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZVVSTH19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUJ1cz1lfX0se2tleToic3Vic2NyaXB0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3Vic2NyaXB0aW9uPWUubWVzc2FnZS5ib2R5LnN1YnNjcmliZXJ9fV0pLFJ1bnRpbWVDb3JlQ3R4fShNLmRlZmF1bHQpKTt0LmRlZmF1bHQ9TCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA1MTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMTQpLHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBSZVRoaW5rQ3R4KCl7KDAsby5kZWZhdWx0KSh0aGlzLFJlVGhpbmtDdHgpLHRoaXMuZGVmYXVsdEJlaGF2aW91cj0hMCx0aGlzLmdyb3Vwcz17fX1yZXR1cm4oMCxzLmRlZmF1bHQpKFJlVGhpbmtDdHgsW3trZXk6InNjaGVtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjaGVtZX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUubWVzc2FnZS5mcm9tOygwLGEuaXNEYXRhT2JqZWN0VVJMKSh0KT90aGlzLl9zY2hlbWU9KDAsYS5kaXZpZGVVUkwpKHQpLnR5cGU6dGhpcy5fc2NoZW1lPXZvaWQgMH19LHtrZXk6ImRhdGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRlfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IERhdGUscj1TdHJpbmcodC5nZXREYXRlKCkpOzE9PT1yLmxlbmd0aCYmKHI9IjAiK3IpO3ZhciBuPVN0cmluZyh0LmdldE1vbnRoKCkrMSk7MT09PW4ubGVuZ3RoJiYobj0iMCIrbiksdGhpcy5fZGF0ZT1yKyIvIituKyIvIit0LmdldEZ1bGxZZWFyKCl9fSx7a2V5OiJkb21haW4iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21haW59LHNldDpmdW5jdGlvbihlKXt2b2lkIDAhPT1lLm1lc3NhZ2UuYm9keS5pZGVudGl0eSYmKHRoaXMuX2RvbWFpbj0oMCxhLmRpdmlkZUVtYWlsKShlLm1lc3NhZ2UuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VybmFtZSkuZG9tYWluKX19LHtrZXk6InR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlO3ZvaWQgMCE9PXQuYm9keS52YWx1ZSYmKHRoaXMuX3R5cGU9dC5ib2R5LnZhbHVlLnJlc291cmNlVHlwZSl9fSx7a2V5OiJzb3VyY2UiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2V9LHNldDpmdW5jdGlvbihlKXt2b2lkIDAhPT1lLm1lc3NhZ2UuYm9keS5pZGVudGl0eSYmKHRoaXMuX3NvdXJjZT1lLm1lc3NhZ2UuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VybmFtZSl9fSx7a2V5OiJ0aW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZX0sc2V0OmZ1bmN0aW9uKGUpe2U9bmV3IERhdGU7dmFyIHQ9U3RyaW5nKGUuZ2V0TWludXRlcygpKTsxPT09dC5sZW5ndGgmJih0PSIwIit0KSx0aGlzLl90aW1lPXBhcnNlSW50KFN0cmluZyhlLmdldEhvdXJzKCkpK3QpfX0se2tleToid2Vla2RheSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dlZWtkYXl9LHNldDpmdW5jdGlvbihlKXt0aGlzLl93ZWVrZGF5PVN0cmluZygobmV3IERhdGUpLmdldERheSgpKX19XSksUmVUaGlua0N0eH0oKTt0LmRlZmF1bHQ9dSxlLmV4cG9ydHM9dC5kZWZhdWx0fV0pfSk7",
      "sourceCodeClassname": "Runtime",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "version": "10.80",
    "description": "",
    "language": "Javascript",
    "cguid": "3bc366f2d0ba3d681e7a3899917c5d3de",
    "type": "Runtimes",
    "runtimeType": "browser",
    "p2pHandlerStub": "",
    "p2pRequesterStub": "",
    "constraints": {
      "browser": true,
      "mic": true,
      "camera": true,
      "sensor": false,
      "webrtc": true,
      "ortc": true,
      "http": true,
      "https": true,
      "ws": true,
      "wss": true,
      "coap": false,
      "datachannel": false
    },
    "objectName": "Runtime",
    "configuration": {},
    "messageSchemas": [],
    "dataObjects": [],
    "signature": "",
    "accessControlPolicy": "somePolicy"
  }
}