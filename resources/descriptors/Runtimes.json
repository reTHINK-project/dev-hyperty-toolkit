{
  "Runtime": {
    "sourcePackage": {
      "sourceCode": "Ly8gdmVyc2lvbjogMC4xMC4wCi8vIGRhdGU6IFdlZCBOb3YgMDggMjAxNyAxMjoyODo0MCBHTVQrMDAwMCAoV0VUKQovLyBsaWNlbmNlOiAKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgoKLy8gdmVyc2lvbjogMC4xMC4wCi8vIGRhdGU6IFdlZCBOb3YgMDggMjAxNyAxMjoyODo0MCBHTVQrMDAwMCAoV0VUKQovLyBsaWNlbmNlOiAKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgoKLy8gdmVyc2lvbjogMC4xMC4wCi8vIGRhdGU6IFdlZCBOb3YgMDggMjAxNyAxMjoyODozMCBHTVQrMDAwMCAoV0VUKQovLyBsaWNlbmNlOiAKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgoKIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoIlJ1bnRpbWUiLFtdLHQpOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlJ1bnRpbWU9dCgpOmUuUnVudGltZT10KCl9KHRoaXMsZnVuY3Rpb24oKXsvKioqKioqLwpyZXR1cm4gZnVuY3Rpb24oZSl7LyoqKioqKi8KLyoqKioqKi8KLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KLyoqKioqKi8KZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhyKXsvKioqKioqLwovKioqKioqLwovLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8KaWYodFtyXSkvKioqKioqLwpyZXR1cm4gdFtyXS5leHBvcnRzOy8qKioqKiovCi8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovCnZhciBuPXRbcl09ey8qKioqKiovCmk6ciwvKioqKioqLwpsOiExLC8qKioqKiovCmV4cG9ydHM6e319Oy8qKioqKiovCi8qKioqKiovCi8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovCnJldHVybiBlW3JdLmNhbGwobi5leHBvcnRzLG4sbi5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLG4ubD0hMCxuLmV4cG9ydHN9Ly8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLwovLyBUaGUgbW9kdWxlIGNhY2hlCi8qKioqKiovCnZhciB0PXt9Oy8qKioqKiovCi8qKioqKiovCi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLwovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKQovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovCnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLm09ZSxfX3dlYnBhY2tfcmVxdWlyZV9fLmM9dCxfX3dlYnBhY2tfcmVxdWlyZV9fLmQ9ZnVuY3Rpb24oZSx0LHIpey8qKioqKiovCl9fd2VicGFja19yZXF1aXJlX18ubyhlLHQpfHwvKioqKioqLwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHsvKioqKioqLwpjb25maWd1cmFibGU6ITEsLyoqKioqKi8KZW51bWVyYWJsZTohMCwvKioqKioqLwpnZXQ6cn0pfSxfX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24oZSl7LyoqKioqKi8KdmFyIHQ9ZSYmZS5fX2VzTW9kdWxlPy8qKioqKiovCmZ1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06LyoqKioqKi8KZnVuY3Rpb24oKXtyZXR1cm4gZX07LyoqKioqKi8KLyoqKioqKi8KcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZCh0LCJhIix0KSx0fSxfX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LF9fd2VicGFja19yZXF1aXJlX18ucD0iIixfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucz0yMDcpfShbLyogMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxpPXIoMzApLG89cigxOCksYT1yKDE5KSxzPXIoMjcpLHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBjLGYsbCxkLHA9ZSZ1LkYseT1lJnUuRyxoPWUmdS5TLHY9ZSZ1LlAsZz1lJnUuQixiPXk/bjpoP25bdF18fChuW3RdPXt9KTooblt0XXx8e30pLnByb3RvdHlwZSxtPXk/aTppW3RdfHwoaVt0XT17fSksXz1tLnByb3RvdHlwZXx8KG0ucHJvdG90eXBlPXt9KTt5JiYocj10KTtmb3IoYyBpbiByKQovLyBjb250YWlucyBpbiBuYXRpdmUKZj0hcCYmYiYmdm9pZCAwIT09YltjXSwKLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWQKbD0oZj9iOnIpW2NdLAovLyBiaW5kIHRpbWVycyB0byBnbG9iYWwgZm9yIGNhbGwgZnJvbSBleHBvcnQgY29udGV4dApkPWcmJmY/cyhsLG4pOnYmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP3MoRnVuY3Rpb24uY2FsbCxsKTpsLAovLyBleHRlbmQgZ2xvYmFsCmImJmEoYixjLGwsZSZ1LlUpLAovLyBleHBvcnQKbVtjXSE9bCYmbyhtLGMsZCksdiYmX1tjXSE9bCYmKF9bY109bCl9O24uY29yZT1pLAovLyB0eXBlIGJpdG1hcAp1LkY9MSwvLyBmb3JjZWQKdS5HPTIsLy8gZ2xvYmFsCnUuUz00LC8vIHN0YXRpYwp1LlA9OCwvLyBwcm90bwp1LkI9MTYsLy8gYmluZAp1Llc9MzIsLy8gd3JhcAp1LlU9NjQsLy8gc2FmZQp1LlI9MTI4LC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAKZS5leHBvcnRzPXV9LC8qIDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt0Ll9fZXNNb2R1bGU9ITAsdC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9fSwvKiAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoMTk3KSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaS5kZWZhdWx0KShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0JiZkZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJmRlZmluZVByb3BlcnRpZXMoZSxyKSxlfX0oKX0sLyogMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIW4oZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiBlfX0sLyogNCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAp2YXIgcj1lLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9cil9LC8qIDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LC8qIDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0sLyogNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3OCkoIndrcyIpLGk9cig0OCksbz1yKDQpLlN5bWJvbCxhPSJmdW5jdGlvbiI9PXR5cGVvZiBvOyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPWEmJm9bZV18fChhP286aSkoIlN5bWJvbC4iK2UpKX0pLnN0b3JlPW59LC8qIDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5CmUuZXhwb3J0cz0hcig1KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMyksaT1yKDE0NSksbz1yKDMxKSxhPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt0LmY9cig4KT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdD1vKHQsITApLG4ociksaSl0cnl7cmV0dXJuIGEoZSx0LHIpfWNhdGNoKGUpe31pZigiZ2V0ImluIHJ8fCJzZXQiaW4gcil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sLyogMTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIG49cigzMyksaT1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9pKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LC8qIDExICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpOy8qCiogbG9nbGV2ZWwgLSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwKKgoqIENvcHlyaWdodCAoYykgMjAxMyBUaW0gUGVycnkKKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiovCiFmdW5jdGlvbihvLGEpeyJ1c2Ugc3RyaWN0IjtuPWEsdm9pZCAwIT09KGk9ImZ1bmN0aW9uIj09dHlwZW9mIG4/bi5jYWxsKHQscix0LGUpOm4pJiYoZS5leHBvcnRzPWkpfSgwLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiOwovLyBDcm9zcy1icm93c2VyIGJpbmQgZXF1aXZhbGVudCB0aGF0IHdvcmtzIGF0IGxlYXN0IGJhY2sgdG8gSUU2CmZ1bmN0aW9uIGJpbmRNZXRob2QoZSx0KXt2YXIgcj1lW3RdO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiByLmJpbmQpcmV0dXJuIHIuYmluZChlKTt0cnl7cmV0dXJuIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwocixlKX1jYXRjaCh0KXsKLy8gTWlzc2luZyBiaW5kIHNoaW0gb3IgSUU4ICsgTW9kZXJuaXpyLCBmYWxsYmFjayB0byB3cmFwcGluZwpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmFwcGx5KHIsW2UsYXJndW1lbnRzXSl9fX0KLy8gQnVpbGQgdGhlIGJlc3QgbG9nZ2luZyBtZXRob2QgcG9zc2libGUgZm9yIHRoaXMgZW52Ci8vIFdoZXJldmVyIHBvc3NpYmxlIHdlIHdhbnQgdG8gYmluZCwgbm90IHdyYXAsIHRvIHByZXNlcnZlIHN0YWNrIHRyYWNlcwpmdW5jdGlvbiByZWFsTWV0aG9kKHIpe3JldHVybiJkZWJ1ZyI9PT1yJiYocj0ibG9nIiksdHlwZW9mIGNvbnNvbGUhPT10JiYodm9pZCAwIT09Y29uc29sZVtyXT9iaW5kTWV0aG9kKGNvbnNvbGUscik6dm9pZCAwIT09Y29uc29sZS5sb2c/YmluZE1ldGhvZChjb25zb2xlLCJsb2ciKTplKX0KLy8gVGhlc2UgcHJpdmF0ZSBmdW5jdGlvbnMgYWx3YXlzIG5lZWQgYHRoaXNgIHRvIGJlIHNldCBwcm9wZXJseQpmdW5jdGlvbiByZXBsYWNlTG9nZ2luZ01ldGhvZHModCxuKXsvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwpmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG89cltpXTt0aGlzW29dPWk8dD9lOnRoaXMubWV0aG9kRmFjdG9yeShvLHQsbil9Ci8vIERlZmluZSBsb2cubG9nIGFzIGFuIGFsaWFzIGZvciBsb2cuZGVidWcKdGhpcy5sb2c9dGhpcy5kZWJ1Z30KLy8gSW4gb2xkIElFIHZlcnNpb25zLCB0aGUgY29uc29sZSBpc24ndCBwcmVzZW50IHVudGlsIHlvdSBmaXJzdCBvcGVuIGl0LgovLyBXZSBidWlsZCByZWFsTWV0aG9kKCkgcmVwbGFjZW1lbnRzIGhlcmUgdGhhdCByZWdlbmVyYXRlIGxvZ2dpbmcgbWV0aG9kcwpmdW5jdGlvbiBlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzKGUscixuKXtyZXR1cm4gZnVuY3Rpb24oKXt0eXBlb2YgY29uc29sZSE9PXQmJihyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbCh0aGlzLHIsbiksdGhpc1tlXS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfX0KLy8gQnkgZGVmYXVsdCwgd2UgdXNlIGNsb3NlbHkgYm91bmQgcmVhbCBtZXRob2RzIHdoZXJldmVyIHBvc3NpYmxlLCBhbmQKLy8gb3RoZXJ3aXNlIHdlIHdhaXQgZm9yIGEgY29uc29sZSB0byBhcHBlYXIsIGFuZCB0aGVuIHRyeSBhZ2Fpbi4KZnVuY3Rpb24gZGVmYXVsdE1ldGhvZEZhY3RvcnkoZSx0LHIpey8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCnJldHVybiByZWFsTWV0aG9kKGUpfHxlbmFibGVMb2dnaW5nV2hlbkNvbnNvbGVBcnJpdmVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBMb2dnZXIoZSxuLGkpe2Z1bmN0aW9uIHBlcnNpc3RMZXZlbElmUG9zc2libGUoZSl7dmFyIG49KHJbZV18fCJzaWxlbnQiKS50b1VwcGVyQ2FzZSgpO2lmKHR5cGVvZiB3aW5kb3chPT10KXsKLy8gVXNlIGxvY2FsU3RvcmFnZSBpZiBhdmFpbGFibGUKdHJ5e3JldHVybiB2b2lkKHdpbmRvdy5sb2NhbFN0b3JhZ2Vbc109bil9Y2F0Y2goZSl7fQovLyBVc2Ugc2Vzc2lvbiBjb29raWUgYXMgZmFsbGJhY2sKdHJ5e3dpbmRvdy5kb2N1bWVudC5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KHMpKyI9IituKyI7In1jYXRjaChlKXt9fX1mdW5jdGlvbiBnZXRQZXJzaXN0ZWRMZXZlbCgpe3ZhciBlO2lmKHR5cGVvZiB3aW5kb3chPT10KXt0cnl7ZT13aW5kb3cubG9jYWxTdG9yYWdlW3NdfWNhdGNoKGUpe30KLy8gRmFsbGJhY2sgdG8gY29va2llcyBpZiBsb2NhbCBzdG9yYWdlIGdpdmVzIHVzIG5vdGhpbmcKaWYodHlwZW9mIGU9PT10KXRyeXt2YXIgcj13aW5kb3cuZG9jdW1lbnQuY29va2llLG49ci5pbmRleE9mKGVuY29kZVVSSUNvbXBvbmVudChzKSsiPSIpOy0xIT09biYmKGU9L14oW147XSspLy5leGVjKHIuc2xpY2UobikpWzFdKX1jYXRjaChlKXt9Ci8vIElmIHRoZSBzdG9yZWQgbGV2ZWwgaXMgbm90IHZhbGlkLCB0cmVhdCBpdCBhcyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuCnJldHVybiB2b2lkIDA9PT1hLmxldmVsc1tlXSYmKGU9dm9pZCAwKSxlfX12YXIgbyxhPXRoaXMscz0ibG9nbGV2ZWwiO2UmJihzKz0iOiIrZSksLyoKICAgICAgICoKICAgICAgICogUHVibGljIGxvZ2dlciBBUEkgLSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BpbXRlcnJ5L2xvZ2xldmVsIGZvciBkZXRhaWxzCiAgICAgICAqCiAgICAgICAqLwphLmxldmVscz17VFJBQ0U6MCxERUJVRzoxLElORk86MixXQVJOOjMsRVJST1I6NCxTSUxFTlQ6NX0sYS5tZXRob2RGYWN0b3J5PWl8fGRlZmF1bHRNZXRob2RGYWN0b3J5LGEuZ2V0TGV2ZWw9ZnVuY3Rpb24oKXtyZXR1cm4gb30sYS5zZXRMZXZlbD1mdW5jdGlvbihyLG4pe2lmKCJzdHJpbmciPT10eXBlb2YgciYmdm9pZCAwIT09YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSYmKHI9YS5sZXZlbHNbci50b1VwcGVyQ2FzZSgpXSksISgibnVtYmVyIj09dHlwZW9mIHImJnI+PTAmJnI8PWEubGV2ZWxzLlNJTEVOVCkpdGhyb3cibG9nLnNldExldmVsKCkgY2FsbGVkIHdpdGggaW52YWxpZCBsZXZlbDogIityO2lmKG89ciwhMSE9PW4mJi8vIGRlZmF1bHRzIHRvIHRydWUKcGVyc2lzdExldmVsSWZQb3NzaWJsZShyKSxyZXBsYWNlTG9nZ2luZ01ldGhvZHMuY2FsbChhLHIsZSksdHlwZW9mIGNvbnNvbGU9PT10JiZyPGEubGV2ZWxzLlNJTEVOVClyZXR1cm4iTm8gY29uc29sZSBhdmFpbGFibGUgZm9yIGxvZ2dpbmcifSxhLnNldERlZmF1bHRMZXZlbD1mdW5jdGlvbihlKXtnZXRQZXJzaXN0ZWRMZXZlbCgpfHxhLnNldExldmVsKGUsITEpfSxhLmVuYWJsZUFsbD1mdW5jdGlvbihlKXthLnNldExldmVsKGEubGV2ZWxzLlRSQUNFLGUpfSxhLmRpc2FibGVBbGw9ZnVuY3Rpb24oZSl7YS5zZXRMZXZlbChhLmxldmVscy5TSUxFTlQsZSl9OwovLyBJbml0aWFsaXplIHdpdGggdGhlIHJpZ2h0IGxldmVsCnZhciB1PWdldFBlcnNpc3RlZExldmVsKCk7bnVsbD09dSYmKHU9bnVsbD09bj8iV0FSTiI6biksYS5zZXRMZXZlbCh1LCExKX0KLy8gU2xpZ2h0bHkgZHViaW91cyB0cmlja3MgdG8gY3V0IGRvd24gbWluaW1pemVkIGZpbGUgc2l6ZQp2YXIgZT1mdW5jdGlvbigpe30sdD0idW5kZWZpbmVkIixyPVsidHJhY2UiLCJkZWJ1ZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiXSxuPW5ldyBMb2dnZXIsaT17fTtuLmdldExvZ2dlcj1mdW5jdGlvbihlKXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCIiPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJZb3UgbXVzdCBzdXBwbHkgYSBuYW1lIHdoZW4gY3JlYXRpbmcgYSBsb2dnZXIuIik7dmFyIHQ9aVtlXTtyZXR1cm4gdHx8KHQ9aVtlXT1uZXcgTG9nZ2VyKGUsbi5nZXRMZXZlbCgpLG4ubWV0aG9kRmFjdG9yeSkpLHR9OwovLyBHcmFiIHRoZSBjdXJyZW50IGdsb2JhbCBsb2cgdmFyaWFibGUgaW4gY2FzZSBvZiBvdmVyd3JpdGUKdmFyIG89dHlwZW9mIHdpbmRvdyE9PXQ/d2luZG93LmxvZzp2b2lkIDA7cmV0dXJuIG4ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0eXBlb2Ygd2luZG93IT09dCYmd2luZG93LmxvZz09PW4mJih3aW5kb3cubG9nPW8pLG59LG59KX0sLyogMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQxMSksX19lc01vZHVsZTohMH19LC8qIDEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPXt2ZXJzaW9uOiIyLjUuMSJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPXIpfSwvKiAxNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudCkKdmFyIG49cigzMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSwvKiAxNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fS8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwovKioKICogQHR5cGVkZWYgZGl2aWRlVVJMCiAqIEB0eXBlIE9iamVjdAogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTAogKi8KLyoqCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcwogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAqLwpmdW5jdGlvbiBkaXZpZGVVUkwoZSl7ZnVuY3Rpb24gcmVjdXJzZShlKXt2YXIgdD0vKFthLXpBLVotXSopKDpcL1wvKD86XC4pP3w6KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7cmV0dXJuIGUucmVwbGFjZSh0LCIkMSwkMywkNCIpLnNwbGl0KCIsIil9dmFyIHQ9cmVjdXJzZShlKTsKLy8gSWYgdGhlIHVybCBoYXMgbm8gc2NoZW1lCmlmKHRbMF09PT1lJiYhdFswXS5pbmNsdWRlcygiQCIpKXtyZXR1cm57dHlwZToiIixkb21haW46ZSxpZGVudGl0eToiIn19Ci8vIGNoZWNrIGlmIHRoZSB1cmwgaGFzIHRoZSBzY2hlbWUgYW5kIGluY2x1ZGVzIGFuIEAKaWYodFswXT09PWUmJnRbMF0uaW5jbHVkZXMoIkAiKSl7dD1yZWN1cnNlKCh0WzBdPT09ZT8ic210cCI6dFswXSkrIjovLyIrdFswXSl9Ci8vIGlmIHRoZSBkb21haW4gaW5jbHVkZXMgYW4gQCwgZGl2aWRlIGl0IHRvIGRvbWFpbiBhbmQgaWRlbnRpdHkgcmVzcGVjdGl2ZWx5CnJldHVybiB0WzFdLmluY2x1ZGVzKCJAIikmJih0WzJdPXRbMF0rIjovLyIrdFsxXSx0WzFdPXRbMV0uc3Vic3RyKHRbMV0uaW5kZXhPZigiQCIpKzEpKSx7dHlwZTp0WzBdLGRvbWFpbjp0WzFdLGlkZW50aXR5OnRbMl19fS8qKgogKiBDaGVjayBpZiBhbiBPYmplY3QgaXMgZW1wdHkKICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3QgT2JqZWN0IHRvIGJlIGNoZWNrZWQKICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgc3RhdHVzIG9mIE9iamVjdCwgZW1wdHkgb3Igbm90ICh0cnVlfGZhbHNlKTsKICovCmZ1bmN0aW9uIGVtcHR5T2JqZWN0KGUpe3JldHVybiEoKDAsYS5kZWZhdWx0KShlKS5sZW5ndGg+MCl9LyoqCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQKICogQHJldHVybiB7T2JqZWN0fQogKi8KZnVuY3Rpb24gZGVlcENsb25lKGUpewovL1RPRE86IHNpbXBsZSBidXQgaW5lZmZpY2llbnQgSlNPTiBkZWVwIGNsb25lLi4uCmlmKGUpcmV0dXJuIEpTT04ucGFyc2UoKDAsaS5kZWZhdWx0KShlKSl9ZnVuY3Rpb24gcmVtb3ZlUGF0aEZyb21VUkwoZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpO3JldHVybiB0WzBdKyIvLyIrdFsyXSsiLyIrdFszXX0vKioKICogT2J0YWlucyB0aGUgdXNlciBVUkwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIGVtYWlsCiAqIEBwYXJhbSAge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqIEByZXR1cm4ge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybiJ1c2VyOi8vIitlLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpKyIvIitlLnN1YnN0cmluZygwLHQpfS8qKgogKiBPYnRhaW5zIHRoZSB1c2VyIGVtYWlsIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBVUkwKICogQHBhcmFtICB7VVJMLlVSTH0gdXNlclVSTCBUaGUgdXNlciBVUkwKICogQHJldHVybiB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwKICovCmZ1bmN0aW9uIGdldFVzZXJFbWFpbEZyb21VUkwoZSl7dmFyIHQ9ZGl2aWRlVVJMKGUpO3JldHVybiB0LmlkZW50aXR5LnJlcGxhY2UoIi8iLCIiKSsiQCIrdC5kb21haW59LyoqCiAqIENoZWNrIGlmIHRoZSB1c2VyIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgVVJMIGZvcm1hdCwgaWYgbm90LCBjb252ZXJ0IHRvIFVSTCBmb3JtYXQKICogQHBhcmFtICB7c3RyaW5nfSAgIGlkZW50aWZpZXIgIHVzZXIgaWRlbnRpZmllcgogKiBAcmV0dXJuIHtzdHJpbmd9ICAgdXNlclVSTCAgICB0aGUgdXNlciBVUkwKICovCmZ1bmN0aW9uIGNvbnZlcnRUb1VzZXJVUkwoZSl7Ci8vIGNoZWNrIGlmIHRoZSBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIHVybCBmb3JtYXQKaWYoInVzZXI6Ly8iPT09ZS5zdWJzdHJpbmcoMCw3KSl7dmFyIHQ9ZGl2aWRlVVJMKGUpOwovL2NoZWNrIGlmIHRoZSB1cmwgaXMgd2VsbCBmb3JtYXRlZAppZih0LmRvbWFpbiYmdC5pZGVudGl0eSlyZXR1cm4gZTt0aHJvdyJ1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0In1yZXR1cm4gZ2V0VXNlclVSTEZyb21FbWFpbChlKX1mdW5jdGlvbiBpc0RhdGFPYmplY3RVUkwoZSl7dmFyIHQ9WyJkb21haW4taWRwIiwicnVudGltZSIsImRvbWFpbiIsImh5cGVydHkiXSxyPWUuc3BsaXQoIjovLyIpLG49clswXTtyZXR1cm4tMT09PXQuaW5kZXhPZihuKX1mdW5jdGlvbiBpc0xlZ2FjeShlKXtyZXR1cm4gZS5zcGxpdCgiQCIpLmxlbmd0aD4xfWZ1bmN0aW9uIGlzVVJMKGUpe3JldHVybiBlLnNwbGl0KCIvIikubGVuZ3RoPj0zfWZ1bmN0aW9uIGlzVXNlclVSTChlKXtyZXR1cm4idXNlciI9PT1kaXZpZGVVUkwoZSkudHlwZX1mdW5jdGlvbiBpc0h5cGVydHlVUkwoZSl7cmV0dXJuImh5cGVydHkiPT09ZGl2aWRlVVJMKGUpLnR5cGV9LyoqCiAqIGdldCBpbmZvcm1hdGlvbiByZWxhdGl2ZSBlYWNoIGNvbXBvbmVudCBjb25maWd1cmVkIG9uIHJ1bnRpbWUgY29uZmlndXJhdGlvbjsKICogQHBhcmFtICB7b2JqZWN0fSBjb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGFsbCBjb25maWd1cmF0aW9uCiAqIEBwYXJhbSAge3N0cmluZ30gY29tcG9uZW50ICAgICBzdHJpbmcgd2l0aCB0aGUgY29tcG9uZW50IHRvIGdldCB0aGUgY29uZmlndXJhdGlvbiwgbGlrZSwgcnVudGltZVVSTFMsIGNhdGFsb2d1ZVVSTHMsIG1zZ05vZGVVUkwsIGRvbWFpblJlZ2lzdHJ5VVJMOwogKiBAcGFyYW0gIHtzdHJpbmd9IHJlc291cmNlICAgICAgdHlwZSBvZiByZXNvdXJjZSB0byBnZXQsIGxpa2UsIGNhdGFsb2d1ZSwgcnVudGltZVVBLCBwcm90b2NvbHN0dWIsIGlkcFByb3h5CiAqIEByZXR1cm4ge29iamVjdH0gICAgICAgICAgICAgICByZXR1cm4gYW4gb2JqZWN0IHdpdGggYWxsIGNvbmZpZ3VyYXRpb25zOwogKi8KZnVuY3Rpb24gZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcyhlLHQscil7cmV0dXJuIGVbdF1bcl19LyoqCiAqIEJ1aWxkIGEgZnVsbCB1cmwgd2l0aCB0aGUgcnVudGltZSBjb25maWd1cmF0aW9uOwogKiBAcGFyYW0gIHtvYmplY3R9IGNvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggYWxsIGNvbmZpZ3VyYXRpb24KICogQHBhcmFtICB7c3RyaW5nfSBjb21wb25lbnQgICAgIHN0cmluZyB3aXRoIHRoZSBjb21wb25lbnQgdG8gZ2V0IHRoZSBjb25maWd1cmF0aW9uLCBsaWtlLCBydW50aW1lVVJMUywgY2F0YWxvZ3VlVVJMcywgbXNnTm9kZVVSTCwgZG9tYWluUmVnaXN0cnlVUkw7CiAqIEBwYXJhbSAge3N0cmluZ30gcmVzb3VyY2UgICAgICB0eXBlIG9mIHJlc291cmNlIHRvIGdldCwgbGlrZSwgY2F0YWxvZ3VlLCBydW50aW1lVUEsIHByb3RvY29sc3R1YiwgaWRwUHJveHkKICogQHBhcmFtICB7c3RyaW5nfSB0eXBlICAgICAgICAgIHJlc291cmNlIHRvIGdldCwgbGlrZSBhIGh5cGVydHkgbmFtZSBvciBwcm90b2NvbHN0dWIgbmFtZTsKICogQHBhcmFtICB7Ym9vbGVhbn0gdXNlRmFsbGJhY2sgIGlmIHRydWUgdGhlIGZ1bmN0aW9uIHdpbGwgY2hlY2sgaWYgaGF2ZSBhIGZhbGxiYWNrIHVybDsKICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgICAgIHBhcnRpYWwgdXJsIHRvIGNvbnRhY3QgdGhlIHJlc291cmNlOwogKi8KZnVuY3Rpb24gYnVpbGRVUkwoZSx0LHIsbil7dmFyIG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0mJmFyZ3VtZW50c1s0XSxhPWVbdF0scz12b2lkIDA7aWYoIWEuaGFzT3duUHJvcGVydHkocikpdGhyb3cgRXJyb3IoIlRoZSBjb25maWd1cmF0aW9uICIrKDAsaS5kZWZhdWx0KShhLCIiLDIpKyIgZG9uJ3QgaGF2ZSB0aGUgIityKyIgcmVzb3VyY2UgeW91IGFyZSBsb29raW5nIGZvciIpO3ZhciB1PWFbcl07Ci8vIGNvbnNvbGUubG9nKHVybCk7CnJldHVybiBuPyhzPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4K24sdS5oYXNPd25Qcm9wZXJ0eSgiZmFsbGJhY2siKSYmbyYmKHM9dS5mYWxsYmFjay5pbmRleE9mKCIlZG9tYWluJSIpP3UuZmFsbGJhY2sucmVwbGFjZSgvKCVkb21haW4lKS9nLGUuZG9tYWluKStuOnUuZmFsbGJhY2srbikpOnM9dS5wcmVmaXgrZS5kb21haW4rdS5zdWZmaXgsc30vKioKICogR2VuZXJhdGUgYSBHbG9iYWwgVW5pcXVlIElECiAqCiAqIEByZXR1cm5zIFN0cmluZzsKICovCmZ1bmN0aW9uIGdlbmVyYXRlR1VJRCgpe2Z1bmN0aW9uIHM0KCl7cmV0dXJuIE1hdGguZmxvb3IoNjU1MzYqKDErTWF0aC5yYW5kb20oKSkpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSl9cmV0dXJuIHM0KCkrczQoKSsiLSIrczQoKSsiLSIrczQoKSsiLSIrczQoKSsiLSIrczQoKStzNCgpK3M0KCl9ZnVuY3Rpb24gZ2V0VXNlcklkZW50aXR5RG9tYWluKGUpe3ZhciB0PWRpdmlkZVVSTChlKSxyPXQuZG9tYWluLnNwbGl0KCIuIiksbj1yLmxlbmd0aDtyZXR1cm4gMT09bj9yW24tMV06cltuLTJdKyIuIityW24tMV19LyoqCiAqIENoZWNrIGlmIFVSTCBpcyBmcm9tIGEgYmFja2VuZCBzZXJ2aWNlCiAqIEBwYXJhbSAge3N0cmluZ30gdXJsICAgICBVUkwgdG8gYmUgcHJvY2Vzc2VkCiAqIEByZXR1cm4ge2Jvb2xlYW59CiAqLwpmdW5jdGlvbiBpc0JhY2tlbmRTZXJ2aWNlVVJMKGUpe3ZhciB0PWRpdmlkZVVSTChlKSxyPXQuZG9tYWluLnNwbGl0KCIuIiksbj1bImRvbWFpbiIsImdsb2JhbCIsImRvbWFpbi1pZHAiXSxpPVsicmVnaXN0cnkiLCJtc2ctbm9kZSJdLG89dm9pZCAwO3JldHVybiByLmxlbmd0aD4xJiYobz1yLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4tMSE9PWkuaW5kZXhPZihlKX0pWzBdKSwhKCFvfHwtMT09PWkuaW5kZXhPZihvKSl8fCEhdC50eXBlJiYtMSE9PW4uaW5kZXhPZih0LnR5cGUpfWZ1bmN0aW9uIGRpdmlkZUVtYWlsKGUpe3ZhciB0PWUuaW5kZXhPZigiQCIpO3JldHVybnt1c2VybmFtZTplLnN1YnN0cmluZygwLHQpLGRvbWFpbjplLnN1YnN0cmluZyh0KzEsZS5sZW5ndGgpfX1mdW5jdGlvbiBhc3NpZ24oZSx0LHIpe2V8fChlPXt9KSwic3RyaW5nIj09dHlwZW9mIHQmJih0PXBhcnNlQXR0cmlidXRlcyh0KSk7Zm9yKHZhciBuPXQubGVuZ3RoLTEsaT0wO2k8bjsrK2kpe3ZhciBvPXRbaV07byBpbiBlfHwoZVtvXT17fSksZT1lW29dfWVbdFtuXV09cn1mdW5jdGlvbiBzcGxpdE9iamVjdFVSTChlKXt2YXIgdD1lLnNwbGl0KCIvIikscj10WzBdKyIvLyIrdFsyXSsiLyIrdFszXSxuPXRbNV0saT17dXJsOnIscmVzb3VyY2U6bn07cmV0dXJuIGl9ZnVuY3Rpb24gY2hlY2tBdHRyaWJ1dGUoZSl7dmFyIHQ9LygoKFthLXpBLVpdKyk6XC9cLyhbMC05YS16QS1aXVstXHddKlswLTlhLXpBLVpdXC4pK1thLXpBLVpdezIsOX0pXC9bYS16QS1aMC05XC5dK0BbYS16QS1aMC05XSsoXC0pP1thLXpBLVowLTldKyhcLik/W2EtekEtWjAtOV17MiwxMH0/XC5bYS16QS1aXXsyLDEwfSkoLisoPz0uaWRlbnRpdHkpKT8vZ20scj1bXSxuPVtdO2lmKG51bGw9PWUubWF0Y2godCkpbj1lLnNwbGl0KCIuIik7ZWxzZXtmb3IodmFyIGk9dm9pZCAwO251bGwhPT0oaT10LmV4ZWMoZSkpOykKLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gYXZvaWQgaW5maW5pdGUgbG9vcHMgd2l0aCB6ZXJvLXdpZHRoIG1hdGNoZXMKaS5pbmRleD09PXQubGFzdEluZGV4JiZ0Lmxhc3RJbmRleCsrLAovLyBUaGUgcmVzdWx0IGNhbiBiZSBhY2Nlc3NlZCB0aHJvdWdoIHRoZSBgbWAtdmFyaWFibGUuCmkuZm9yRWFjaChmdW5jdGlvbihlLHQpezA9PT10JiZyLnB1c2goZSl9KTt2YXIgbz12b2lkIDA7ci5mb3JFYWNoKGZ1bmN0aW9uKHQpe289ZS5yZXBsYWNlKHQsIiotKiIpLG49by5zcGxpdCgiLiIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iKi0qIj09PWU/dDplfSl9KX1yZXR1cm4gbn1mdW5jdGlvbiBwYXJzZUF0dHJpYnV0ZXMoZSl7dmFyIHQ9LyhbMC05YS16QS1aXVstXHddKik6XC9cLy9nO2lmKGUuaW5jbHVkZXMoIjovLyIpKXt2YXIgcj1lLnNwbGl0KHQpWzBdLG49ci5zcGxpdCgiLiIpLGk9ZS5yZXBsYWNlKHIsIiIpO2lmKGUuaW5jbHVkZXMoImlkZW50aXR5Iikpe3ZhciBvPWkuc3BsaXQoImlkZW50aXR5LiIpO2k9b1swXS5zbGljZSgiLiIsLTEpLG89b1sxXS5zcGxpdCgiLiIpLG4ucHVzaChpLCJpZGVudGl0eSIpLG49bi5jb25jYXQobyl9ZWxzZSBuLnB1c2goaSk7cmV0dXJuIG4uZmlsdGVyKEJvb2xlYW4pfXJldHVybiBlLnNwbGl0KCIuIil9ZnVuY3Rpb24gaXNFbXB0eShlKXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHQpKXJldHVybiExO3JldHVybigwLGkuZGVmYXVsdCkoZSk9PT0oMCxpLmRlZmF1bHQpKHt9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0NiksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cig0NSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pO3QuZGl2aWRlVVJMPWRpdmlkZVVSTCx0LmVtcHR5T2JqZWN0PWVtcHR5T2JqZWN0LHQuZGVlcENsb25lPWRlZXBDbG9uZSx0LnJlbW92ZVBhdGhGcm9tVVJMPXJlbW92ZVBhdGhGcm9tVVJMLHQuZ2V0VXNlclVSTEZyb21FbWFpbD1nZXRVc2VyVVJMRnJvbUVtYWlsLHQuZ2V0VXNlckVtYWlsRnJvbVVSTD1nZXRVc2VyRW1haWxGcm9tVVJMLHQuY29udmVydFRvVXNlclVSTD1jb252ZXJ0VG9Vc2VyVVJMLHQuaXNEYXRhT2JqZWN0VVJMPWlzRGF0YU9iamVjdFVSTCx0LmlzTGVnYWN5PWlzTGVnYWN5LHQuaXNVUkw9aXNVUkwsdC5pc1VzZXJVUkw9aXNVc2VyVVJMLHQuaXNIeXBlcnR5VVJMPWlzSHlwZXJ0eVVSTCx0LmdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXM9Z2V0Q29uZmlndXJhdGlvblJlc291cmNlcyx0LmJ1aWxkVVJMPWJ1aWxkVVJMLHQuZ2VuZXJhdGVHVUlEPWdlbmVyYXRlR1VJRCx0LmdldFVzZXJJZGVudGl0eURvbWFpbj1nZXRVc2VySWRlbnRpdHlEb21haW4sdC5pc0JhY2tlbmRTZXJ2aWNlVVJMPWlzQmFja2VuZFNlcnZpY2VVUkwsdC5kaXZpZGVFbWFpbD1kaXZpZGVFbWFpbCx0LmFzc2lnbj1hc3NpZ24sdC5zcGxpdE9iamVjdFVSTD1zcGxpdE9iamVjdFVSTCx0LmNoZWNrQXR0cmlidXRlPWNoZWNrQXR0cmlidXRlLHQucGFyc2VBdHRyaWJ1dGVzPXBhcnNlQXR0cmlidXRlcyx0LmlzRW1wdHk9aXNFbXB0eX0sLyogMTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LC8qIDE3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9e30uaGFzT3duUHJvcGVydHk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY2FsbChlLHQpfX0sLyogMTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSksaT1yKDQ3KTtlLmV4cG9ydHM9cig4KT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LC8qIDE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLGk9cigxOCksbz1yKDE3KSxhPXIoNDgpKCJzcmMiKSxzPUZ1bmN0aW9uLnRvU3RyaW5nLHU9KCIiK3MpLnNwbGl0KCJ0b1N0cmluZyIpO3IoMzApLmluc3BlY3RTb3VyY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHMuY2FsbChlKX0sKGUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixzKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcjtjJiYobyhyLCJuYW1lIil8fGkociwibmFtZSIsdCkpLGVbdF0hPT1yJiYoYyYmKG8ocixhKXx8aShyLGEsZVt0XT8iIitlW3RdOnUuam9pbihTdHJpbmcodCkpKSksZT09PW4/ZVt0XT1yOnM/ZVt0XT9lW3RdPXI6aShlLHQscik6KGRlbGV0ZSBlW3RdLGkoZSx0LHIpKSl9KShGdW5jdGlvbi5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzJiZ0aGlzW2FdfHxzLmNhbGwodGhpcyl9KX0sLyogMjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDUpLG89cigzMiksYT0vIi9nLHM9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9U3RyaW5nKG8oZSkpLHM9IjwiK3Q7cmV0dXJuIiIhPT1yJiYocys9IiAiK3IrJz0iJytTdHJpbmcobikucmVwbGFjZShhLCImcXVvdDsiKSsnIicpLHMrIj4iK2krIjwvIit0KyI+In07ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e307cltlXT10KHMpLG4obi5QK24uRippKGZ1bmN0aW9uKCl7dmFyIHQ9IiJbZV0oJyInKTtyZXR1cm4gdCE9PXQudG9Mb3dlckNhc2UoKXx8dC5zcGxpdCgnIicpLmxlbmd0aD4zfSksIlN0cmluZyIscil9fSwvKiAyMSAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAp2YXIgcj1lLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9cil9LC8qIDIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzNCkoIndrcyIpLGk9cig5NCksbz1yKDIxKS5TeW1ib2wsYT0iZnVuY3Rpb24iPT10eXBlb2YgbzsoZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1hJiZvW2VdfHwoYT9vOmkpKCJTeW1ib2wuIitlKSl9KS5zdG9yZT1ufSwvKiAyMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5ncwp2YXIgbj1yKDcwKSxpPXIoMzIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbihpKGUpKX19LC8qIDI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcxKSxpPXIoNDcpLG89cigyMyksYT1yKDMxKSxzPXIoMTcpLHU9cigxNDUpLGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjt0LmY9cig4KT9jOmZ1bmN0aW9uKGUsdCl7aWYoZT1vKGUpLHQ9YSh0LCEwKSx1KXRyeXtyZXR1cm4gYyhlLHQpfWNhdGNoKGUpe31pZihzKGUsdCkpcmV0dXJuIGkoIW4uZi5jYWxsKGUsdCksZVt0XSl9fSwvKiAyNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBuPXIoMTcpLGk9cigxNCksbz1yKDEwMikoIklFX1BST1RPIiksYT1PYmplY3QucHJvdG90eXBlO2UuZXhwb3J0cz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUpe3JldHVybiBlPWkoZSksbihlLG8pP2Vbb106ImZ1bmN0aW9uIj09dHlwZW9mIGUuY29uc3RydWN0b3ImJmUgaW5zdGFuY2VvZiBlLmNvbnN0cnVjdG9yP2UuY29uc3RydWN0b3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/YTpudWxsfX0sLyogMjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjEpLGk9cigxMyksbz1yKDY1KSxhPXIoNTgpLHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1LGMsZixsPWUmcy5GLGQ9ZSZzLkcscD1lJnMuUyx5PWUmcy5QLGg9ZSZzLkIsdj1lJnMuVyxnPWQ/aTppW3RdfHwoaVt0XT17fSksYj1nLnByb3RvdHlwZSxtPWQ/bjpwP25bdF06KG5bdF18fHt9KS5wcm90b3R5cGU7ZCYmKHI9dCk7Zm9yKHUgaW4gcikKLy8gY29udGFpbnMgaW4gbmF0aXZlCihjPSFsJiZtJiZ2b2lkIDAhPT1tW3VdKSYmdSBpbiBnfHwoCi8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkCmY9Yz9tW3VdOnJbdV0sCi8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcwpnW3VdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBtW3VdP3JbdV06aCYmYz9vKGYsbik6diYmbVt1XT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0LHIsbil7aWYodGhpcyBpbnN0YW5jZW9mIGUpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyBlO2Nhc2UgMTpyZXR1cm4gbmV3IGUodCk7Y2FzZSAyOnJldHVybiBuZXcgZSh0LHIpfXJldHVybiBuZXcgZSh0LHIsbil9cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gdC5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdH0oZik6eSYmImZ1bmN0aW9uIj09dHlwZW9mIGY/byhGdW5jdGlvbi5jYWxsLGYpOmYsCi8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5tZXRob2RzLiVOQU1FJQp5JiYoKGcudmlydHVhbHx8KGcudmlydHVhbD17fSkpW3VdPWYsCi8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5wcm90b3R5cGUuJU5BTUUlCmUmcy5SJiZiJiYhYlt1XSYmYShiLHUsZikpKX07Ci8vIHR5cGUgYml0bWFwCnMuRj0xLC8vIGZvcmNlZApzLkc9MiwvLyBnbG9iYWwKcy5TPTQsLy8gc3RhdGljCnMuUD04LC8vIHByb3RvCnMuQj0xNiwvLyBiaW5kCnMuVz0zMiwvLyB3cmFwCnMuVT02NCwvLyBzYWZlCnMuUj0xMjgsLy8gcmVhbCBwcm90byBtZXRob2QgZm9yIGBsaWJyYXJ5YAplLmV4cG9ydHM9c30sLyogMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBvcHRpb25hbCAvIHNpbXBsZSBjb250ZXh0IGJpbmRpbmcKdmFyIG49cigxNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHZvaWQgMD09PXQpcmV0dXJuIGU7c3dpdGNoKHIpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIGUuY2FsbCh0LHIpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHIsbil7cmV0dXJuIGUuY2FsbCh0LHIsbil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24ocixuLGkpe3JldHVybiBlLmNhbGwodCxyLG4saSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19fSwvKiAyOCAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByPXt9LnRvU3RyaW5nO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gci5jYWxsKGUpLnNsaWNlKDgsLTEpfX0sLyogMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDUpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiEhZSYmbihmdW5jdGlvbigpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1jYWxsCnQ/ZS5jYWxsKG51bGwsZnVuY3Rpb24oKXt9LDEpOmUuY2FsbChudWxsKX0pfX0sLyogMzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmV4cG9ydHM9e3ZlcnNpb246IjIuNS4xIn07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9cil9LC8qIDMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pCnZhciBuPXIoNik7Ci8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlCi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nCmUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLGk7aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTtpZigiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7aWYoIXQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LC8qIDMyICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpCmUuZXhwb3J0cz1mdW5jdGlvbihlKXtpZih2b2lkIDA9PWUpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIitlKTtyZXR1cm4gZX19LC8qIDMzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIDcuMS40IFRvSW50ZWdlcgp2YXIgcj1NYXRoLmNlaWwsbj1NYXRoLmZsb29yO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaXNOYU4oZT0rZSk/MDooZT4wP246cikoZSl9fSwvKiAzNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlcwp2YXIgbj1yKDApLGk9cigzMCksbz1yKDUpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShpLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0sYT17fTthW2VdPXQociksbihuLlMrbi5GKm8oZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIsYSl9fSwvKiAzNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDAgLT4gQXJyYXkjZm9yRWFjaAovLyAxIC0+IEFycmF5I21hcAovLyAyIC0+IEFycmF5I2ZpbHRlcgovLyAzIC0+IEFycmF5I3NvbWUKLy8gNCAtPiBBcnJheSNldmVyeQovLyA1IC0+IEFycmF5I2ZpbmQKLy8gNiAtPiBBcnJheSNmaW5kSW5kZXgKdmFyIG49cigyNyksaT1yKDcwKSxvPXIoMTQpLGE9cigxMCkscz1yKDExOSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9MT09ZSx1PTI9PWUsYz0zPT1lLGY9ND09ZSxsPTY9PWUsZD01PT1lfHxsLHA9dHx8cztyZXR1cm4gZnVuY3Rpb24odCxzLHkpe2Zvcih2YXIgaCx2LGc9byh0KSxiPWkoZyksbT1uKHMseSwzKSxfPWEoYi5sZW5ndGgpLFI9MCx3PXI/cCh0LF8pOnU/cCh0LDApOnZvaWQgMDtfPlI7UisrKWlmKChkfHxSIGluIGIpJiYoaD1iW1JdLHY9bShoLFIsZyksZSkpaWYocil3W1JdPXY7ZWxzZSBpZih2KXN3aXRjaChlKXtjYXNlIDM6cmV0dXJuITA7Ly8gc29tZQpjYXNlIDU6cmV0dXJuIGg7Ly8gZmluZApjYXNlIDY6cmV0dXJuIFI7Ly8gZmluZEluZGV4CmNhc2UgMjp3LnB1c2goaCl9ZWxzZSBpZihmKXJldHVybiExO3JldHVybiBsPy0xOmN8fGY/Zjp3fX19LC8qIDM2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7aWYocig4KSl7dmFyIG49cig0OSksaT1yKDQpLG89cig1KSxhPXIoMCkscz1yKDg4KSx1PXIoMTI1KSxjPXIoMjcpLGY9cig1NSksbD1yKDQ3KSxkPXIoMTgpLHA9cig1NykseT1yKDMzKSxoPXIoMTApLHY9cigxNzEpLGc9cig1MSksYj1yKDMxKSxtPXIoMTcpLF89cig3MiksUj1yKDYpLHc9cigxNCksUz1yKDExNiksTz1yKDUyKSxQPXIoMjUpLGs9cig1MykuZixNPXIoMTE4KSxMPXIoNDgpLHg9cig3KSxFPXIoMzUpLEQ9cig3OSksVT1yKDg2KSxBPXIoMTIxKSxqPXIoNjMpLEk9cig4MyksQz1yKDU0KSxUPXIoMTIwKSxOPXIoMTYxKSxGPXIoOSkscT1yKDI0KSxIPUYuZixCPXEuZixHPWkuUmFuZ2VFcnJvcixLPWkuVHlwZUVycm9yLFY9aS5VaW50OEFycmF5LFc9QXJyYXkucHJvdG90eXBlLFk9dS5BcnJheUJ1ZmZlcixKPXUuRGF0YVZpZXcsej1FKDApLCQ9RSgyKSxYPUUoMyksWj1FKDQpLFE9RSg1KSxlZT1FKDYpLHRlPUQoITApLHJlPUQoITEpLG5lPUEudmFsdWVzLGllPUEua2V5cyxvZT1BLmVudHJpZXMsYWU9Vy5sYXN0SW5kZXhPZixzZT1XLnJlZHVjZSx1ZT1XLnJlZHVjZVJpZ2h0LGNlPVcuam9pbixmZT1XLnNvcnQsbGU9Vy5zbGljZSxkZT1XLnRvU3RyaW5nLHBlPVcudG9Mb2NhbGVTdHJpbmcseWU9eCgiaXRlcmF0b3IiKSxoZT14KCJ0b1N0cmluZ1RhZyIpLHZlPUwoInR5cGVkX2NvbnN0cnVjdG9yIiksZ2U9TCgiZGVmX2NvbnN0cnVjdG9yIiksYmU9cy5DT05TVFIsbWU9cy5UWVBFRCxfZT1zLlZJRVcsUmU9RSgxLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGtlKFUoZSxlW2dlXSksdCl9KSx3ZT1vKGZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgpyZXR1cm4gMT09PW5ldyBWKG5ldyBVaW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF19KSxTZT0hIVYmJiEhVi5wcm90b3R5cGUuc2V0JiZvKGZ1bmN0aW9uKCl7bmV3IFYoMSkuc2V0KHt9KX0pLE9lPWZ1bmN0aW9uKGUsdCl7dmFyIHI9eShlKTtpZihyPDB8fHIldCl0aHJvdyBHKCJXcm9uZyBvZmZzZXQhIik7cmV0dXJuIHJ9LFBlPWZ1bmN0aW9uKGUpe2lmKFIoZSkmJm1lIGluIGUpcmV0dXJuIGU7dGhyb3cgSyhlKyIgaXMgbm90IGEgdHlwZWQgYXJyYXkhIil9LGtlPWZ1bmN0aW9uKGUsdCl7aWYoIShSKGUpJiZ2ZSBpbiBlKSl0aHJvdyBLKCJJdCBpcyBub3QgYSB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvciEiKTtyZXR1cm4gbmV3IGUodCl9LE1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIExlKFUoZSxlW2dlXSksdCl9LExlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTAsbj10Lmxlbmd0aCxpPWtlKGUsbik7bj5yOylpW3JdPXRbcisrXTtyZXR1cm4gaX0seGU9ZnVuY3Rpb24oZSx0LHIpe0goZSx0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZFtyXX19KX0sRWU9ZnVuY3Rpb24oZSl7dmFyIHQscixuLGksbyxhLHM9dyhlKSx1PWFyZ3VtZW50cy5sZW5ndGgsZj11PjE/YXJndW1lbnRzWzFdOnZvaWQgMCxsPXZvaWQgMCE9PWYsZD1NKHMpO2lmKHZvaWQgMCE9ZCYmIVMoZCkpe2ZvcihhPWQuY2FsbChzKSxuPVtdLHQ9MDshKG89YS5uZXh0KCkpLmRvbmU7dCsrKW4ucHVzaChvLnZhbHVlKTtzPW59Zm9yKGwmJnU+MiYmKGY9YyhmLGFyZ3VtZW50c1syXSwyKSksdD0wLHI9aChzLmxlbmd0aCksaT1rZSh0aGlzLHIpO3I+dDt0KyspaVt0XT1sP2Yoc1t0XSx0KTpzW3RdO3JldHVybiBpfSxEZT1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aCxyPWtlKHRoaXMsdCk7dD5lOylyW2VdPWFyZ3VtZW50c1tlKytdO3JldHVybiByfSxVZT0hIVYmJm8oZnVuY3Rpb24oKXtwZS5jYWxsKG5ldyBWKDEpKX0pLEFlPWZ1bmN0aW9uKCl7cmV0dXJuIHBlLmFwcGx5KFVlP2xlLmNhbGwoUGUodGhpcykpOlBlKHRoaXMpLGFyZ3VtZW50cyl9LGplPXtjb3B5V2l0aGluOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIE4uY2FsbChQZSh0aGlzKSxlLHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxldmVyeTpmdW5jdGlvbihlKXtyZXR1cm4gWihQZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmlsbDpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBULmFwcGx5KFBlKHRoaXMpLGFyZ3VtZW50cyl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gTWUodGhpcywkKFBlKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApKX0sZmluZDpmdW5jdGlvbihlKXtyZXR1cm4gUShQZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmluZEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlZShQZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZm9yRWFjaDpmdW5jdGlvbihlKXt6KFBlKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxpbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiByZShQZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5jbHVkZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRlKFBlKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxqb2luOmZ1bmN0aW9uKGUpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKcmV0dXJuIGNlLmFwcGx5KFBlKHRoaXMpLGFyZ3VtZW50cyl9LGxhc3RJbmRleE9mOmZ1bmN0aW9uKGUpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKcmV0dXJuIGFlLmFwcGx5KFBlKHRoaXMpLGFyZ3VtZW50cyl9LG1hcDpmdW5jdGlvbihlKXtyZXR1cm4gUmUoUGUodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHJlZHVjZTpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBzZS5hcHBseShQZSh0aGlzKSxhcmd1bWVudHMpfSxyZWR1Y2VSaWdodDpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiB1ZS5hcHBseShQZSh0aGlzKSxhcmd1bWVudHMpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9dGhpcyxyPVBlKHQpLmxlbmd0aCxuPU1hdGguZmxvb3Ioci8yKSxpPTA7aTxuOyllPXRbaV0sdFtpKytdPXRbLS1yXSx0W3JdPWU7cmV0dXJuIHR9LHNvbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIFgoUGUodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHNvcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGZlLmNhbGwoUGUodGhpcyksZSl9LHN1YmFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIHI9UGUodGhpcyksbj1yLmxlbmd0aCxpPWcoZSxuKTtyZXR1cm4gbmV3KFUocixyW2dlXSkpKHIuYnVmZmVyLHIuYnl0ZU9mZnNldCtpKnIuQllURVNfUEVSX0VMRU1FTlQsaCgodm9pZCAwPT09dD9uOmcodCxuKSktaSkpfX0sSWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWUodGhpcyxsZS5jYWxsKFBlKHRoaXMpLGUsdCkpfSxDZT1mdW5jdGlvbihlKXtQZSh0aGlzKTt2YXIgdD1PZShhcmd1bWVudHNbMV0sMSkscj10aGlzLmxlbmd0aCxuPXcoZSksaT1oKG4ubGVuZ3RoKSxvPTA7aWYoaSt0PnIpdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpO2Zvcig7bzxpOyl0aGlzW3Qrb109bltvKytdfSxUZT17ZW50cmllczpmdW5jdGlvbigpe3JldHVybiBvZS5jYWxsKFBlKHRoaXMpKX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBpZS5jYWxsKFBlKHRoaXMpKX0sdmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIG5lLmNhbGwoUGUodGhpcykpfX0sTmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUihlKSYmZVttZV0mJiJzeW1ib2wiIT10eXBlb2YgdCYmdCBpbiBlJiZTdHJpbmcoK3QpPT1TdHJpbmcodCl9LEZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE5lKGUsdD1iKHQsITApKT9sKDIsZVt0XSk6QihlLHQpfSxxZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIShOZShlLHQ9Yih0LCEwKSkmJlIocikmJm0ociwidmFsdWUiKSl8fG0ociwiZ2V0Iil8fG0ociwic2V0Iil8fHIuY29uZmlndXJhYmxlfHxtKHIsIndyaXRhYmxlIikmJiFyLndyaXRhYmxlfHxtKHIsImVudW1lcmFibGUiKSYmIXIuZW51bWVyYWJsZT9IKGUsdCxyKTooZVt0XT1yLnZhbHVlLGUpfTtiZXx8KHEuZj1GZSxGLmY9cWUpLGEoYS5TK2EuRiohYmUsIk9iamVjdCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpGZSxkZWZpbmVQcm9wZXJ0eTpxZX0pLG8oZnVuY3Rpb24oKXtkZS5jYWxsKHt9KX0pJiYoZGU9cGU9ZnVuY3Rpb24oKXtyZXR1cm4gY2UuY2FsbCh0aGlzKX0pO3ZhciBIZT1wKHt9LGplKTtwKEhlLFRlKSxkKEhlLHllLFRlLnZhbHVlcykscChIZSx7c2xpY2U6SWUsc2V0OkNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7fSx0b1N0cmluZzpkZSx0b0xvY2FsZVN0cmluZzpBZX0pLHhlKEhlLCJidWZmZXIiLCJiIikseGUoSGUsImJ5dGVPZmZzZXQiLCJvIikseGUoSGUsImJ5dGVMZW5ndGgiLCJsIikseGUoSGUsImxlbmd0aCIsImUiKSxIKEhlLGhlLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1ttZV19fSksCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtc3RhdGVtZW50cwplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dT0hIXU7dmFyIGM9ZSsodT8iQ2xhbXBlZCI6IiIpKyJBcnJheSIsbD0iZ2V0IitlLHA9InNldCIrZSx5PWlbY10sZz15fHx7fSxiPXkmJlAoeSksbT0heXx8IXMuQUJWLHc9e30sUz15JiZ5LnByb3RvdHlwZSxNPWZ1bmN0aW9uKGUscil7dmFyIG49ZS5fZDtyZXR1cm4gbi52W2xdKHIqdCtuLm8sd2UpfSxMPWZ1bmN0aW9uKGUscixuKXt2YXIgaT1lLl9kO3UmJihuPShuPU1hdGgucm91bmQobikpPDA/MDpuPjI1NT8yNTU6MjU1Jm4pLGkudltwXShyKnQraS5vLG4sd2UpfSx4PWZ1bmN0aW9uKGUsdCl7SChlLHQse2dldDpmdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdCl9LHNldDpmdW5jdGlvbihlKXtyZXR1cm4gTCh0aGlzLHQsZSl9LGVudW1lcmFibGU6ITB9KX07bT8oeT1yKGZ1bmN0aW9uKGUscixuLGkpe2YoZSx5LGMsIl9kIik7dmFyIG8sYSxzLHUsbD0wLHA9MDtpZihSKHIpKXtpZighKHIgaW5zdGFuY2VvZiBZfHwiQXJyYXlCdWZmZXIiPT0odT1fKHIpKXx8IlNoYXJlZEFycmF5QnVmZmVyIj09dSkpcmV0dXJuIG1lIGluIHI/TGUoeSxyKTpFZS5jYWxsKHkscik7bz1yLHA9T2Uobix0KTt2YXIgZz1yLmJ5dGVMZW5ndGg7aWYodm9pZCAwPT09aSl7aWYoZyV0KXRocm93IEcoIldyb25nIGxlbmd0aCEiKTtpZigoYT1nLXApPDApdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpfWVsc2UgaWYoKGE9aChpKSp0KStwPmcpdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpO3M9YS90fWVsc2Ugcz12KHIpLGE9cyp0LG89bmV3IFkoYSk7Zm9yKGQoZSwiX2QiLHtiOm8sbzpwLGw6YSxlOnMsdjpuZXcgSihvKX0pO2w8czspeChlLGwrKyl9KSxTPXkucHJvdG90eXBlPU8oSGUpLGQoUywiY29uc3RydWN0b3IiLHkpKTpvKGZ1bmN0aW9uKCl7eSgxKX0pJiZvKGZ1bmN0aW9uKCl7bmV3IHkoLTEpfSkmJkkoZnVuY3Rpb24oZSl7bmV3IHksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKbmV3IHkobnVsbCksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKbmV3IHkoMS41KSwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwpuZXcgeShlKX0sITApfHwoeT1yKGZ1bmN0aW9uKGUscixuLGkpe2YoZSx5LGMpO3ZhciBvOwovLyBgd3NgIG1vZHVsZSBidWcsIHRlbXBvcmFyaWx5IHJlbW92ZSB2YWxpZGF0aW9uIGxlbmd0aCBmb3IgVWludDhBcnJheQovLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9wdWxsLzY0NQovLyBgd3NgIG1vZHVsZSBidWcsIHRlbXBvcmFyaWx5IHJlbW92ZSB2YWxpZGF0aW9uIGxlbmd0aCBmb3IgVWludDhBcnJheQovLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9wdWxsLzY0NQpyZXR1cm4gUihyKT9yIGluc3RhbmNlb2YgWXx8IkFycmF5QnVmZmVyIj09KG89XyhyKSl8fCJTaGFyZWRBcnJheUJ1ZmZlciI9PW8/dm9pZCAwIT09aT9uZXcgZyhyLE9lKG4sdCksaSk6dm9pZCAwIT09bj9uZXcgZyhyLE9lKG4sdCkpOm5ldyBnKHIpOm1lIGluIHI/TGUoeSxyKTpFZS5jYWxsKHkscik6bmV3IGcodihyKSl9KSx6KGIhPT1GdW5jdGlvbi5wcm90b3R5cGU/ayhnKS5jb25jYXQoayhiKSk6ayhnKSxmdW5jdGlvbihlKXtlIGluIHl8fGQoeSxlLGdbZV0pfSkseS5wcm90b3R5cGU9UyxufHwoUy5jb25zdHJ1Y3Rvcj15KSk7dmFyIEU9U1t5ZV0sRD0hIUUmJigidmFsdWVzIj09RS5uYW1lfHx2b2lkIDA9PUUubmFtZSksVT1UZS52YWx1ZXM7ZCh5LHZlLCEwKSxkKFMsbWUsYyksZChTLF9lLCEwKSxkKFMsZ2UseSksKHU/bmV3IHkoMSlbaGVdPT1jOmhlIGluIFMpfHxIKFMsaGUse2dldDpmdW5jdGlvbigpe3JldHVybiBjfX0pLHdbY109eSxhKGEuRythLlcrYS5GKih5IT1nKSx3KSxhKGEuUyxjLHtCWVRFU19QRVJfRUxFTUVOVDp0fSksYShhLlMrYS5GKm8oZnVuY3Rpb24oKXtnLm9mLmNhbGwoeSwxKX0pLGMse2Zyb206RWUsb2Y6RGV9KSwiQllURVNfUEVSX0VMRU1FTlQiaW4gU3x8ZChTLCJCWVRFU19QRVJfRUxFTUVOVCIsdCksYShhLlAsYyxqZSksQyhjKSxhKGEuUCthLkYqU2UsYyx7c2V0OkNlfSksYShhLlArYS5GKiFELGMsVGUpLG58fFMudG9TdHJpbmc9PWRlfHwoUy50b1N0cmluZz1kZSksYShhLlArYS5GKm8oZnVuY3Rpb24oKXtuZXcgeSgxKS5zbGljZSgpfSksYyx7c2xpY2U6SWV9KSxhKGEuUCthLkYqKG8oZnVuY3Rpb24oKXtyZXR1cm5bMSwyXS50b0xvY2FsZVN0cmluZygpIT1uZXcgeShbMSwyXSkudG9Mb2NhbGVTdHJpbmcoKX0pfHwhbyhmdW5jdGlvbigpe1MudG9Mb2NhbGVTdHJpbmcuY2FsbChbMSwyXSl9KSksYyx7dG9Mb2NhbGVTdHJpbmc6QWV9KSxqW2NdPUQ/RTpVLG58fER8fGQoUyx5ZSxVKX19ZWxzZSBlLmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSwvKiAzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNjYpLGk9cigwKSxvPXIoNzgpKCJtZXRhZGF0YSIpLGE9by5zdG9yZXx8KG8uc3RvcmU9bmV3KHIoMTY5KSkpLHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPWEuZ2V0KGUpO2lmKCFpKXtpZighcilyZXR1cm47YS5zZXQoZSxpPW5ldyBuKX12YXIgbz1pLmdldCh0KTtpZighbyl7aWYoIXIpcmV0dXJuO2kuc2V0KHQsbz1uZXcgbil9cmV0dXJuIG99LHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXModCxyLCExKTtyZXR1cm4gdm9pZCAwIT09biYmbi5oYXMoZSl9LGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXModCxyLCExKTtyZXR1cm4gdm9pZCAwPT09bj92b2lkIDA6bi5nZXQoZSl9LGY9ZnVuY3Rpb24oZSx0LHIsbil7cyhyLG4sITApLnNldChlLHQpfSxsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9cyhlLHQsITEpLG49W107cmV0dXJuIHImJnIuZm9yRWFjaChmdW5jdGlvbihlLHQpe24ucHVzaCh0KX0pLG59LGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWV8fCJzeW1ib2wiPT10eXBlb2YgZT9lOlN0cmluZyhlKX0scD1mdW5jdGlvbihlKXtpKGkuUywiUmVmbGVjdCIsZSl9O2UuZXhwb3J0cz17c3RvcmU6YSxtYXA6cyxoYXM6dSxnZXQ6YyxzZXQ6ZixrZXlzOmwsa2V5OmQsZXhwOnB9fSwvKiAzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOSksaT1yKDE4MSksbz1yKDEzMCksYT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPXIoNDMpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aWYobihlKSx0PW8odCwhMCksbihyKSxpKXRyeXtyZXR1cm4gYShlLHQscil9Y2F0Y2goZSl7fWlmKCJnZXQiaW4gcnx8InNldCJpbiByKXRocm93IFR5cGVFcnJvcigiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhIik7cmV0dXJuInZhbHVlImluIHImJihlW3RdPXIudmFsdWUpLGV9fSwvKiAzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0Mik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LC8qIDQwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQ4KSgibWV0YSIpLGk9cig2KSxvPXIoMTcpLGE9cig5KS5mLHM9MCx1PU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGM9IXIoNSkoZnVuY3Rpb24oKXtyZXR1cm4gdShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLGY9ZnVuY3Rpb24oZSl7YShlLG4se3ZhbHVlOntpOiJPIisgKytzLC8vIG9iamVjdCBJRAp3Ont9fX0pfSxsPWZ1bmN0aW9uKGUsdCl7Ci8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXgKaWYoIWkoZSkpcmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlP2U6KCJzdHJpbmciPT10eXBlb2YgZT8iUyI6IlAiKStlO2lmKCFvKGUsbikpewovLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAppZighdShlKSlyZXR1cm4iRiI7Ci8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCmlmKCF0KXJldHVybiJFIjsKLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKZihlKX1yZXR1cm4gZVtuXS5pfSxkPWZ1bmN0aW9uKGUsdCl7aWYoIW8oZSxuKSl7Ci8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CmlmKCF1KGUpKXJldHVybiEwOwovLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQppZighdClyZXR1cm4hMTsKLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKZihlKX1yZXR1cm4gZVtuXS53fSxwPWZ1bmN0aW9uKGUpe3JldHVybiBjJiZ5Lk5FRUQmJnUoZSkmJiFvKGUsbikmJmYoZSksZX0seT1lLmV4cG9ydHM9e0tFWTpuLE5FRUQ6ITEsZmFzdEtleTpsLGdldFdlYWs6ZCxvbkZyZWV6ZTpwfX0sLyogNDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMi4xLjMuMzEgQXJyYXkucHJvdG90eXBlW0BAdW5zY29wYWJsZXNdCnZhciBuPXIoNykoInVuc2NvcGFibGVzIiksaT1BcnJheS5wcm90b3R5cGU7dm9pZCAwPT1pW25dJiZyKDE4KShpLG4se30pLGUuZXhwb3J0cz1mdW5jdGlvbihlKXtpW25dW2VdPSEwfX0sLyogNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0sLyogNDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5CmUuZXhwb3J0cz0hcig2NikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwvKiA0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5ncwp2YXIgbj1yKDE4NCksaT1yKDEyOCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKGkoZSkpfX0sLyogNDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQzNiksX19lc01vZHVsZTohMH19LC8qIDQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NjApLF9fZXNNb2R1bGU6ITB9fSwvKiA0NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LC8qIDQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrcituKS50b1N0cmluZygzNikpfX0sLyogNDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ITF9LC8qIDUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pCnZhciBuPXIoMTQ3KSxpPXIoMTAzKTtlLmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsaSl9fSwvKiA1MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzMyksaT1NYXRoLm1heCxvPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4oZSksZTwwP2koZSt0LDApOm8oZSx0KX19LC8qIDUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCnZhciBuPXIoMyksaT1yKDE0OCksbz1yKDEwMyksYT1yKDEwMikoIklFX1BST1RPIikscz1mdW5jdGlvbigpe30sdT1mdW5jdGlvbigpewovLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Zwp2YXIgZSx0PXIoMTAwKSgiaWZyYW1lIiksbj1vLmxlbmd0aDtmb3IodC5zdHlsZS5kaXNwbGF5PSJub25lIixyKDEwNCkuYXBwZW5kQ2hpbGQodCksdC5zcmM9ImphdmFzY3JpcHQ6IiwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmwKLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOwplPXQuY29udGVudFdpbmRvdy5kb2N1bWVudCxlLm9wZW4oKSxlLndyaXRlKCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFwvc2NyaXB0PiIpLGUuY2xvc2UoKSx1PWUuRjtuLS07KWRlbGV0ZSB1LnByb3RvdHlwZVtvW25dXTtyZXR1cm4gdSgpfTtlLmV4cG9ydHM9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oZSx0KXt2YXIgcjsKLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwKcmV0dXJuIG51bGwhPT1lPyhzLnByb3RvdHlwZT1uKGUpLHI9bmV3IHMscy5wcm90b3R5cGU9bnVsbCxyW2FdPWUpOnI9dSgpLHZvaWQgMD09PXQ/cjppKHIsdCl9fSwvKiA1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKdmFyIG49cigxNDcpLGk9cigxMDMpLmNvbmNhdCgibGVuZ3RoIiwicHJvdG90eXBlIik7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLGkpfX0sLyogNTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQpLGk9cig5KSxvPXIoOCksYT1yKDcpKCJzcGVjaWVzIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW5bZV07byYmdCYmIXRbYV0mJmkuZih0LGEse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LC8qIDU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKCEoZSBpbnN0YW5jZW9mIHQpfHx2b2lkIDAhPT1uJiZuIGluIGUpdGhyb3cgVHlwZUVycm9yKHIrIjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIGV9fSwvKiA1NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyNyksaT1yKDE1OSksbz1yKDExNiksYT1yKDMpLHM9cigxMCksdT1yKDExOCksYz17fSxmPXt9LHQ9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGwsZCl7dmFyIHAseSxoLHYsZz1kP2Z1bmN0aW9uKCl7cmV0dXJuIGV9OnUoZSksYj1uKHIsbCx0PzI6MSksbT0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBnKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpOwovLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3IKaWYobyhnKSl7Zm9yKHA9cyhlLmxlbmd0aCk7cD5tO20rKylpZigodj10P2IoYSh5PWVbbV0pWzBdLHlbMV0pOmIoZVttXSkpPT09Y3x8dj09PWYpcmV0dXJuIHZ9ZWxzZSBmb3IoaD1nLmNhbGwoZSk7ISh5PWgubmV4dCgpKS5kb25lOylpZigodj1pKGgsYix5LnZhbHVlLHQpKT09PWN8fHY9PT1mKXJldHVybiB2fTt0LkJSRUFLPWMsdC5SRVRVUk49Zn0sLyogNTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTkpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpIGluIHQpbihlLGksdFtpXSxyKTtyZXR1cm4gZX19LC8qIDU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxpPXIoNzMpO2UuZXhwb3J0cz1yKDQzKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LC8qIDU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9e30uaGFzT3duUHJvcGVydHk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuY2FsbChlLHQpfX0sLyogNjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQzOSksX19lc01vZHVsZTohMH19LC8qIDYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDkpLmYsaT1yKDE3KSxvPXIoNykoInRvU3RyaW5nVGFnIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhaShlPXI/ZTplLnByb3RvdHlwZSxvKSYmbihlLG8se2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSwvKiA2MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxpPXIoMzIpLG89cig1KSxhPXIoMTA2KSxzPSJbIithKyJdIix1PSLigIvChSIsYz1SZWdFeHAoIl4iK3MrcysiKiIpLGY9UmVnRXhwKHMrcysiKiQiKSxsPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT17fSxzPW8oZnVuY3Rpb24oKXtyZXR1cm4hIWFbZV0oKXx8dVtlXSgpIT11fSksYz1pW2VdPXM/dChkKTphW2VdO3ImJihpW3JdPWMpLG4obi5QK24uRipzLCJTdHJpbmciLGkpfSxkPWwudHJpbT1mdW5jdGlvbihlLHQpe3JldHVybiBlPVN0cmluZyhpKGUpKSwxJnQmJihlPWUucmVwbGFjZShjLCIiKSksMiZ0JiYoZT1lLnJlcGxhY2UoZiwiIikpLGV9O2UuZXhwb3J0cz1sfSwvKiA2MyAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz17fX0sLyogNjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIW4oZSl8fGUuX3QhPT10KXRocm93IFR5cGVFcnJvcigiSW5jb21wYXRpYmxlIHJlY2VpdmVyLCAiK3QrIiByZXF1aXJlZCEiKTtyZXR1cm4gZX19LC8qIDY1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBuPXIoOTMpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixpKXtyZXR1cm4gZS5jYWxsKHQscixuLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sLyogNjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LC8qIDY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pCnZhciBuPXIoMTgzKSxpPXIoMTM1KTtlLmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsaSl9fSwvKiA2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDk4KSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4hdHx8Im9iamVjdCIhPT0odm9pZCAwPT09dD8idW5kZWZpbmVkIjooMCxpLmRlZmF1bHQpKHQpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIHQ/ZTp0fX0sLyogNjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX10Ll9fZXNNb2R1bGU9ITA7dmFyIG49cig0NTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTk5KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDk4KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyk7dC5kZWZhdWx0PWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIisodm9pZCAwPT09dD8idW5kZWZpbmVkIjooMCx1LmRlZmF1bHQpKHQpKSk7ZS5wcm90b3R5cGU9KDAsYS5kZWZhdWx0KSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKGkuZGVmYXVsdD8oMCxpLmRlZmF1bHQpKGUsdCk6ZS5fX3Byb3RvX189dCl9fSwvKiA3MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCnZhciBuPXIoMjgpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCmUuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0sLyogNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LC8qIDcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIG49cigyOCksaT1yKDcpKCJ0b1N0cmluZ1RhZyIpLG89IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxhPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKGUpe319O2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLHM7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj1hKHQ9T2JqZWN0KGUpLGkpKT9yOm8/bih0KToiT2JqZWN0Ij09KHM9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjpzfX0sLyogNzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSwvKiA3NCAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz17fX0sLyogNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj17fS50b1N0cmluZztlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuY2FsbChlKS5zbGljZSg4LC0xKX19LC8qIDc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KQp2YXIgbj1yKDEyOCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QobihlKSl9fSwvKiA3NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3QuZj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0sLyogNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCksaT1uWyJfX2NvcmUtanNfc2hhcmVkX18iXXx8KG5bIl9fY29yZS1qc19zaGFyZWRfXyJdPXt9KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlbZV18fChpW2VdPXt9KX19LC8qIDc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZgovLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcwp2YXIgbj1yKDIzKSxpPXIoMTApLG89cig1MSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsYSl7dmFyIHMsdT1uKHQpLGM9aSh1Lmxlbmd0aCksZj1vKGEsYyk7Ci8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQppZihlJiZyIT1yKXtmb3IoO2M+ZjspCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYoKHM9dVtmKytdKSE9cylyZXR1cm4hMH1lbHNlIGZvcig7Yz5mO2YrKylpZigoZXx8ZiBpbiB1KSYmdVtmXT09PXIpcmV0dXJuIGV8fGZ8fDA7cmV0dXJuIWUmJi0xfX19LC8qIDgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LC8qIDgxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudCkKdmFyIG49cigyOCk7ZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSwvKiA4MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMi44IElzUmVnRXhwKGFyZ3VtZW50KQp2YXIgbj1yKDYpLGk9cigyOCksbz1yKDcpKCJtYXRjaCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbihlKSYmKHZvaWQgMCE9PSh0PWVbb10pPyEhdDoiUmVnRXhwIj09aShlKSl9fSwvKiA4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3KSgiaXRlcmF0b3IiKSxpPSExO3RyeXt2YXIgbz1bN11bbl0oKTtvLnJldHVybj1mdW5jdGlvbigpe2k9ITB9LAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbApBcnJheS5mcm9tKG8sZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goZSl7fWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhaSlyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIG89WzddLGE9b1tuXSgpO2EubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOnI9ITB9fSxvW25dPWZ1bmN0aW9uKCl7cmV0dXJuIGF9LGUobyl9Y2F0Y2goZSl7fXJldHVybiByfX0sLyogODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMi41LjMgZ2V0IFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3MKdmFyIG49cigzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZT1uKHRoaXMpLHQ9IiI7cmV0dXJuIGUuZ2xvYmFsJiYodCs9ImciKSxlLmlnbm9yZUNhc2UmJih0Kz0iaSIpLGUubXVsdGlsaW5lJiYodCs9Im0iKSxlLnVuaWNvZGUmJih0Kz0idSIpLGUuc3RpY2t5JiYodCs9InkiKSx0fX0sLyogODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDE4KSxpPXIoMTkpLG89cig1KSxhPXIoMzIpLHM9cig3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1PXMoZSksYz1yKGEsdSwiIltlXSksZj1jWzBdLGw9Y1sxXTtvKGZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHRbdV09ZnVuY3Rpb24oKXtyZXR1cm4gN30sNyE9IiJbZV0odCl9KSYmKGkoU3RyaW5nLnByb3RvdHlwZSxlLGYpLG4oUmVnRXhwLnByb3RvdHlwZSx1LDI9PXQ/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbC5jYWxsKGUsdGhpcyx0KX06ZnVuY3Rpb24oZSl7cmV0dXJuIGwuY2FsbChlLHRoaXMpfSkpfX0sLyogODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikKdmFyIG49cigzKSxpPXIoMTYpLG89cig3KSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09YXx8dm9pZCAwPT0ocj1uKGEpW29dKT90Omkocil9fSwvKiA4NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNCksaT1yKDApLG89cigxOSksYT1yKDU3KSxzPXIoNDApLHU9cig1NiksYz1yKDU1KSxmPXIoNiksbD1yKDUpLGQ9cig4MykscD1yKDYxKSx5PXIoMTA3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsaCx2LGcpe3ZhciBiPW5bZV0sbT1iLF89dj8ic2V0IjoiYWRkIixSPW0mJm0ucHJvdG90eXBlLHc9e30sUz1mdW5jdGlvbihlKXt2YXIgdD1SW2VdO28oUixlLCJkZWxldGUiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiEoZyYmIWYoZSkpJiZ0LmNhbGwodGhpcywwPT09ZT8wOmUpfToiaGFzIj09ZT9mdW5jdGlvbihlKXtyZXR1cm4hKGcmJiFmKGUpKSYmdC5jYWxsKHRoaXMsMD09PWU/MDplKX06ImdldCI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIGcmJiFmKGUpP3ZvaWQgMDp0LmNhbGwodGhpcywwPT09ZT8wOmUpfToiYWRkIj09ZT9mdW5jdGlvbihlKXtyZXR1cm4gdC5jYWxsKHRoaXMsMD09PWU/MDplKSx0aGlzfTpmdW5jdGlvbihlLHIpe3JldHVybiB0LmNhbGwodGhpcywwPT09ZT8wOmUsciksdGhpc30pfTtpZigiZnVuY3Rpb24iPT10eXBlb2YgbSYmKGd8fFIuZm9yRWFjaCYmIWwoZnVuY3Rpb24oKXsobmV3IG0pLmVudHJpZXMoKS5uZXh0KCl9KSkpe3ZhciBPPW5ldyBtLFA9T1tfXShnP3t9Oi0wLDEpIT1PLGs9bChmdW5jdGlvbigpe08uaGFzKDEpfSksTT1kKGZ1bmN0aW9uKGUpe25ldyBtKGUpfSksTD0hZyYmbChmdW5jdGlvbigpe2ZvcigKLy8gVjggfiBDaHJvbWl1bSA0Mi0gZmFpbHMgb25seSB3aXRoIDUrIGVsZW1lbnRzCnZhciBlPW5ldyBtLHQ9NTt0LS07KWVbX10odCx0KTtyZXR1cm4hZS5oYXMoLTApfSk7TXx8KG09dChmdW5jdGlvbih0LHIpe2ModCxtLGUpO3ZhciBuPXkobmV3IGIsdCxtKTtyZXR1cm4gdm9pZCAwIT1yJiZ1KHIsdixuW19dLG4pLG59KSxtLnByb3RvdHlwZT1SLFIuY29uc3RydWN0b3I9bSksKGt8fEwpJiYoUygiZGVsZXRlIiksUygiaGFzIiksdiYmUygiZ2V0IikpLChMfHxQKSYmUyhfKSwKLy8gd2VhayBjb2xsZWN0aW9ucyBzaG91bGQgbm90IGNvbnRhaW5zIC5jbGVhciBtZXRob2QKZyYmUi5jbGVhciYmZGVsZXRlIFIuY2xlYXJ9ZWxzZQovLyBjcmVhdGUgY29sbGVjdGlvbiBjb25zdHJ1Y3RvcgptPWguZ2V0Q29uc3RydWN0b3IodCxlLHYsXyksYShtLnByb3RvdHlwZSxyKSxzLk5FRUQ9ITA7cmV0dXJuIHAobSxlKSx3W2VdPW0saShpLkcraS5XK2kuRioobSE9YiksdyksZ3x8aC5zZXRTdHJvbmcobSxlLHYpLG19fSwvKiA4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Zm9yKHZhciBuLGk9cig0KSxvPXIoMTgpLGE9cig0OCkscz1hKCJ0eXBlZF9hcnJheSIpLHU9YSgidmlldyIpLGM9ISghaS5BcnJheUJ1ZmZlcnx8IWkuRGF0YVZpZXcpLGY9YyxsPTAsZD0iSW50OEFycmF5LFVpbnQ4QXJyYXksVWludDhDbGFtcGVkQXJyYXksSW50MTZBcnJheSxVaW50MTZBcnJheSxJbnQzMkFycmF5LFVpbnQzMkFycmF5LEZsb2F0MzJBcnJheSxGbG9hdDY0QXJyYXkiLnNwbGl0KCIsIik7bDw5Oykobj1pW2RbbCsrXV0pPyhvKG4ucHJvdG90eXBlLHMsITApLG8obi5wcm90b3R5cGUsdSwhMCkpOmY9ITE7ZS5leHBvcnRzPXtBQlY6YyxDT05TVFI6ZixUWVBFRDpzLFZJRVc6dX19LC8qIDg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEZvcmNlZCByZXBsYWNlbWVudCBwcm90b3R5cGUgYWNjZXNzb3JzIG1ldGhvZHMKZS5leHBvcnRzPXIoNDkpfHwhcig1KShmdW5jdGlvbigpe3ZhciBlPU1hdGgucmFuZG9tKCk7Ci8vIEluIEZGIHRocm93cyBvbmx5IGRlZmluZSBtZXRob2RzCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZiwgbm8tdXNlbGVzcy1jYWxsCl9fZGVmaW5lU2V0dGVyX18uY2FsbChudWxsLGUsZnVuY3Rpb24oKXt9KSxkZWxldGUgcig0KVtlXX0pfSwvKiA5MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vCnZhciBuPXIoMCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe24obi5TLGUse29mOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsdD1BcnJheShlKTtlLS07KXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBuZXcgdGhpcyh0KX19KX19LC8qIDkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8KdmFyIG49cigwKSxpPXIoMTYpLG89cigyNyksYT1yKDU2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7bihuLlMsZSx7ZnJvbTpmdW5jdGlvbihlKXt2YXIgdCxyLG4scyx1PWFyZ3VtZW50c1sxXTtyZXR1cm4gaSh0aGlzKSx0PXZvaWQgMCE9PXUsdCYmaSh1KSx2b2lkIDA9PWU/bmV3IHRoaXM6KHI9W10sdD8obj0wLHM9byh1LGFyZ3VtZW50c1syXSwyKSxhKGUsITEsZnVuY3Rpb24oZSl7ci5wdXNoKHMoZSxuKyspKX0pKTphKGUsITEsci5wdXNoLHIpLG5ldyB0aGlzKHIpKX19KX19LC8qIDkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPSEwfSwvKiA5MyAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0sLyogOTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj0wLG49TWF0aC5yYW5kb20oKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIlN5bWJvbCgiLmNvbmNhdCh2b2lkIDA9PT1lPyIiOmUsIilfIiwoKytyK24pLnRvU3RyaW5nKDM2KSl9fSwvKiA5NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCkuZixpPXIoNTkpLG89cigyMikoInRvU3RyaW5nVGFnIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlJiYhaShlPXI/ZTplLnByb3RvdHlwZSxvKSYmbihlLG8se2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0fSl9fSwvKiA5NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDI5KSxfX2VzTW9kdWxlOiEwfX0sLyogOTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMKdmFyIG49cigyNiksaT1yKDEzKSxvPXIoNjYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPShpLk9iamVjdHx8e30pW2VdfHxPYmplY3RbZV0sYT17fTthW2VdPXQociksbihuLlMrbi5GKm8oZnVuY3Rpb24oKXtyKDEpfSksIk9iamVjdCIsYSl9fSwvKiA5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQ0MSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cig0NDMpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPSJmdW5jdGlvbiI9PXR5cGVvZiBhLmRlZmF1bHQmJiJzeW1ib2wiPT10eXBlb2YgaS5kZWZhdWx0P2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBhLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1hLmRlZmF1bHQmJmUhPT1hLmRlZmF1bHQucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBlfTt0LmRlZmF1bHQ9ImZ1bmN0aW9uIj09dHlwZW9mIGEuZGVmYXVsdCYmInN5bWJvbCI9PT1zKGkuZGVmYXVsdCk/ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/InVuZGVmaW5lZCI6cyhlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBhLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1hLmRlZmF1bHQmJmUhPT1hLmRlZmF1bHQucHJvdG90eXBlPyJzeW1ib2wiOnZvaWQgMD09PWU/InVuZGVmaW5lZCI6cyhlKX19LC8qIDk5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDExKSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1yKDE1KSxkPWYuZ2V0TG9nZ2VyKCJhZGRyZXNzLWFsbG9jYXRpb24iKSxwPXZvaWQgMCx5PWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICAqLwovKioKICAgKiBDcmVhdGUgYW4gQWRkcmVzcyBBbGxvY2F0aW9uCiAgICogQHBhcmFtICB7VVJMLlVSTH0gICAgICB1cmwgLSB1cmwgZnJvbSB3aG8gaXMgc2VuZGluZyB0aGUgbWVzc2FnZQogICAqIEBwYXJhbSAge01pbmlCdXN9ICAgICAgYnVzIC0gTWluaUJ1cyB1c2VkIGZvciBhZGRyZXNzIGFsbG9jYXRpb24KICAgKi8KZnVuY3Rpb24gQWRkcmVzc0FsbG9jYXRpb24oZSx0LHIpe2lmKCgwLGEuZGVmYXVsdCkodGhpcyxBZGRyZXNzQWxsb2NhdGlvbikscClyZXR1cm4gcDt0aGlzLl91cmw9ZSsiL2FkZHJlc3MtYWxsb2NhdGlvbiIsdGhpcy5fYnVzPXQsdGhpcy5fcmVnaXN0cnk9cixwPXRoaXN9cmV0dXJuKDAsdS5kZWZhdWx0KShBZGRyZXNzQWxsb2NhdGlvbixbe2tleToiY3JlYXRlIiwvKioKICAgICAqCiAgICAgKiBBc2sgZm9yIGNyZWF0aW9uIG9mIGEgbnVtYmVyIG9mIEh5cGVydHkgYWRkcmVzc2VzLCB0byB0aGUgZG9tYWluIG1lc3NhZ2Ugbm9kZS4KICAgICAqCiAgICAgKiBAcGFyYW0ge0RvbWFpbn0gZG9tYWluIC0gZG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUKICAgICAqIEBwYXJhbSB7TnVtYmVyfSBudW1iZXIgLSBudW1iZXIgb2YgYWRkcmVzcyB0byBiZSBhbGxvY2F0ZWQKICAgICAqIEBwYXJhbSB7RGVzY3JpcHRvcn0gaW5mbyAtIGRlc2NyaXB0b3IgdG8gc2VhcmNoIGZvciB0aGUgaHlwZXJ0eSAoVE9ETzovLyB0aGlzIHNob3VsZCBiZSBjb25maXJtZWQpCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvZGF0YW1vZGVsL2NvcmUvaHlwZXJ0eS1jYXRhbG9ndWUvcmVhZG1lLm1kI2NhdGFsb2d1ZS1kYXRhLW1vZGVsCiAgICAgKiBAcGFyYW0ge3NjaGVtZX0gc2NoZW1lIC0gc2NoZW1lIG9mIGFkZHJlc3MgdG8gYmUgY3JlYXRlZCBvciByZXVzZWQsIGxpa2U6IGh5cGVydHksIGNvbW0sIGNvbnRleHQsIGV0YzsKICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxVUkwuSHlwZXJ0eVVSTH0gcmV1c2VVUkwgLSByZXVzZVVSTCBpcyB1c2VkIHRvIHJldXNlIHRoZSBoeXBlcnR5VVJMIHByZXZpb3VzbHkgcmVnaXN0cmVkOwogICAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0LCBFcnJvcj59IHRoaXMgaXMgUHJvbWlzZSBhbmQgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgYWRkcmVzcyBpbmZvcm1hdGlvbgogICAgICoKICAgICAqIEBtZW1iZXJPZiBBZGRyZXNzQWxsb2NhdGlvbgogICAgICovCnZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7Ci8vIC8vIGNvbnNvbGUubG9nKCd0eXBlb2YocmV1c2VVUkwpJywgdHlwZW9mKHJldXNlVVJMKSwgcmV1c2VVUkwpOwovLyAvLyBjb25zb2xlLmxvZygndHlwZW9mKHJldXNlVVJMKScsIHR5cGVvZihyZXVzZVVSTCksIHJldXNlVVJMKTsKcmV0dXJuIGk/ImJvb2xlYW4iPT10eXBlb2YgaT9pP3RoaXMuX3JldXNlQWxsb2NhdGVkQWRkcmVzcyhlLHQscixuLGkpOnRoaXMuX2FsbG9jYXRlTmV3QWRkcmVzcyhlLG4sdCk6InN0cmluZyI9PXR5cGVvZiBpJiYoMCxsLmlzVVJMKShpKT90aGlzLl9yZXVzZUFsbG9jYXRlZEFkZHJlc3MoZSx0LHIsbixpKTp2b2lkIDA6KGQuaW5mbygiW0FkZHJlc3NBbGxvY2F0aW9uXSAtIG5ldyBhZGRyZXNzIHdpbGwgYmUgYWxsb2NhdGVkIiksdGhpcy5fYWxsb2NhdGVOZXdBZGRyZXNzKGUsbix0KSl9fSx7a2V5OiJfcmV1c2VBbGxvY2F0ZWRBZGRyZXNzIix2YWx1ZTpmdW5jdGlvbihlLHQscixuLG8pe3ZhciBhPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxzKXthLl9yZWdpc3RyeS5jaGVja1JlZ2lzdGVyZWRVUkxzKHIsbykudGhlbihmdW5jdGlvbihyKXtpZihyKXtkLmluZm8oIltBZGRyZXNzQWxsb2NhdGlvbiAtICIrbisiXSAtIFJldXNlIFVSTCIpO2koe25ld0FkZHJlc3M6ITEsYWRkcmVzczpyfSl9ZWxzZSJzdHJpbmciPT10eXBlb2Ygbz8oZC5pbmZvKCJbQWRkcmVzc0FsbG9jYXRpb24gLSByZXVzZVVSTF0gLSBPYmplY3QgIitvKyIgbm90IGZvdW5kIikscygiVVJMIE5vdCBGb3VuZCIpKToiYm9vbGVhbiI9PXR5cGVvZiBvP2EuX2FsbG9jYXRlTmV3QWRkcmVzcyhlLG4sdCkudGhlbihpKS5jYXRjaChzKTpzKCJVUkwgTm90IEZvdW5kIil9KX0pfX0se2tleToiX2FsbG9jYXRlTmV3QWRkcmVzcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXt2YXIgYT17dHlwZToiY3JlYXRlIixmcm9tOm4uX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitlKyIvYWRkcmVzcy1hbGxvY2F0aW9uIixib2R5Ont2YWx1ZTp7bnVtYmVyOnJ9fX07Imh5cGVydHkiIT09dCYmKGEuYm9keS5zY2hlbWU9dCksZC5pbmZvKCJbQWRkcmVzc0FsbG9jYXRpb24gLSAiK3QrIl0gLSBSZXF1ZXN0IG5ldyBVUkwiKSxuLl9idXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXtpZigyMDA9PT1lLmJvZHkuY29kZSl7dmFyIHQ9e25ld0FkZHJlc3M6ITAsYWRkcmVzczplLmJvZHkudmFsdWUuYWxsb2NhdGVkfTtpKHQpfWVsc2UgbyhlLmJvZHkuZGVzYyl9KX0pfX0se2tleToiZGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgbz17dHlwZToiZGVsZXRlIixmcm9tOnIuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitlKyIvYWRkcmVzcy1hbGxvY2F0aW9uIixib2R5OntjaGlsZHJlblJlc291cmNlczp0fX07ci5fYnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24oZSl7MjAwPT09ZS5ib2R5LmNvZGU/bihlLmJvZHkuY29kZSk6aShlLmJvZHkuZGVzYyl9KX0pfX0se2tleToidXJsIiwvKioKICAgICAqIGdldCB0aGUgVVJMIHZhbHVlCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB1cmwgdmFsdWU7CiAgICAgKi8KZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19XSxbe2tleToiaW5zdGFuY2UiLGdldDpmdW5jdGlvbigpe2lmKCFwKXRocm93IG5ldyBFcnJvcigiVGhlIGFkZHJlc3MgYWxsb2NhdGlvbiB3YXMgbm90IGluc3RhbnRpYXRlZCIpO3JldHVybiBwfX1dKSxBZGRyZXNzQWxsb2NhdGlvbn0oKTt0LmRlZmF1bHQ9eSxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAxMDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNiksaT1yKDQpLmRvY3VtZW50LG89bihpKSYmbihpLmNyZWF0ZUVsZW1lbnQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbz9pLmNyZWF0ZUVsZW1lbnQoZSk6e319fSwvKiAxMDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCksaT1yKDMwKSxvPXIoNDkpLGE9cigxNDYpLHM9cig5KS5mO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1pLlN5bWJvbHx8KGkuU3ltYm9sPW8/e306bi5TeW1ib2x8fHt9KTsiXyI9PWUuY2hhckF0KDApfHxlIGluIHR8fHModCxlLHt2YWx1ZTphLmYoZSl9KX19LC8qIDEwMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3OCkoImtleXMiKSxpPXIoNDgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aShlKSl9fSwvKiAxMDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5cwplLmV4cG9ydHM9ImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZiIuc3BsaXQoIiwiKX0sLyogMTA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLmRvY3VtZW50O2UuZXhwb3J0cz1uJiZuLmRvY3VtZW50RWxlbWVudH0sLyogMTA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCnZhciBuPXIoNiksaT1yKDMpLG89ZnVuY3Rpb24oZSx0KXtpZihpKGUpLCFuKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IodCsiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpfTtlLmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/Ly8gZXNsaW50LWRpc2FibGUtbGluZQpmdW5jdGlvbihlLHQsbil7dHJ5e249cigyNykoRnVuY3Rpb24uY2FsbCxyKDI0KS5mKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxuKGUsW10pLHQ9IShlIGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGUpe3Q9ITB9cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIG8oZSxyKSx0P2UuX19wcm90b19fPXI6bihlLHIpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpvfX0sLyogMTA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPSJcdFxuXHZcZlxyIMKg4ZqA4aCO4oCA4oCB4oCC4oCD4oCE4oCF4oCG4oCH4oCI4oCJ4oCK4oCv4oGf44CAXHUyMDI4XHUyMDI5XHVmZWZmIn0sLyogMTA3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpLGk9cigxMDUpLnNldDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvLGE9dC5jb25zdHJ1Y3RvcjtyZXR1cm4gYSE9PXImJiJmdW5jdGlvbiI9PXR5cGVvZiBhJiYobz1hLnByb3RvdHlwZSkhPT1yLnByb3RvdHlwZSYmbihvKSYmaSYmaShlLG8pLGV9fSwvKiAxMDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDMzKSxpPXIoMzIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1TdHJpbmcoaSh0aGlzKSkscj0iIixvPW4oZSk7aWYobzwwfHxvPT0xLzApdGhyb3cgUmFuZ2VFcnJvcigiQ291bnQgY2FuJ3QgYmUgbmVnYXRpdmUiKTtmb3IoO28+MDsobz4+Pj0xKSYmKHQrPXQpKTEmbyYmKHIrPXQpO3JldHVybiByfX0sLyogMTA5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIDIwLjIuMi4yOCBNYXRoLnNpZ24oeCkKZS5leHBvcnRzPU1hdGguc2lnbnx8ZnVuY3Rpb24oZSl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKcmV0dXJuIDA9PShlPStlKXx8ZSE9ZT9lOmU8MD8tMToxfX0sLyogMTEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIDIwLjIuMi4xNCBNYXRoLmV4cG0xKHgpCnZhciByPU1hdGguZXhwbTE7ZS5leHBvcnRzPSFyfHxyKDEwKT4yMjAyNS40NjU3OTQ4MDY3MTh8fHIoMTApPDIyMDI1LjQ2NTc5NDgwNjcxOHx8LTJlLTE3IT1yKC0yZS0xNyk/ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PShlPStlKT9lOmU+LTFlLTYmJmU8MWUtNj9lK2UqZS8yOk1hdGguZXhwKGUpLTF9OnJ9LC8qIDExMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzMyksaT1yKDMyKTsKLy8gdHJ1ZSAgLT4gU3RyaW5nI2F0Ci8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdAplLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscil7dmFyIG8sYSxzPVN0cmluZyhpKHQpKSx1PW4ociksYz1zLmxlbmd0aDtyZXR1cm4gdTwwfHx1Pj1jP2U/IiI6dm9pZCAwOihvPXMuY2hhckNvZGVBdCh1KSxvPDU1Mjk2fHxvPjU2MzE5fHx1KzE9PT1jfHwoYT1zLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fGE+NTczNDM/ZT9zLmNoYXJBdCh1KTpvOmU/cy5zbGljZSh1LHUrMik6YS01NjMyMCsoby01NTI5Njw8MTApKzY1NTM2KX19fSwvKiAxMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQ5KSxpPXIoMCksbz1yKDE5KSxhPXIoMTgpLHM9cigxNyksdT1yKDYzKSxjPXIoMTEzKSxmPXIoNjEpLGw9cigyNSksZD1yKDcpKCJpdGVyYXRvciIpLHA9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkseT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsaCx2LGcsYil7YyhyLHQsaCk7dmFyIG0sXyxSLHc9ZnVuY3Rpb24oZSl7aWYoIXAmJmUgaW4gaylyZXR1cm4ga1tlXTtzd2l0Y2goZSl7Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0sUz10KyIgSXRlcmF0b3IiLE89InZhbHVlcyI9PXYsUD0hMSxrPWUucHJvdG90eXBlLE09a1tkXXx8a1siQEBpdGVyYXRvciJdfHx2JiZrW3ZdLEw9TXx8dyh2KSx4PXY/Tz93KCJlbnRyaWVzIik6TDp2b2lkIDAsRT0iQXJyYXkiPT10P2suZW50cmllc3x8TTpNO2lmKAovLyBGaXggbmF0aXZlCkUmJihSPWwoRS5jYWxsKG5ldyBlKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmUi5uZXh0JiYoCi8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKZihSLFMsITApLAovLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKbnx8cyhSLGQpfHxhKFIsZCx5KSksCi8vIGZpeCBBcnJheSN7dmFsdWVzLCBAQGl0ZXJhdG9yfS5uYW1lIGluIFY4IC8gRkYKTyYmTSYmInZhbHVlcyIhPT1NLm5hbWUmJihQPSEwLEw9ZnVuY3Rpb24oKXtyZXR1cm4gTS5jYWxsKHRoaXMpfSksCi8vIERlZmluZSBpdGVyYXRvcgpuJiYhYnx8IXAmJiFQJiZrW2RdfHxhKGssZCxMKSwKLy8gUGx1ZyBmb3IgbGlicmFyeQp1W3RdPUwsdVtTXT15LHYpaWYobT17dmFsdWVzOk8/TDp3KCJ2YWx1ZXMiKSxrZXlzOmc/TDp3KCJrZXlzIiksZW50cmllczp4fSxiKWZvcihfIGluIG0pXyBpbiBrfHxvKGssXyxtW19dKTtlbHNlIGkoaS5QK2kuRioocHx8UCksdCxtKTtyZXR1cm4gbX19LC8qIDExMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNTIpLGk9cig0Nyksbz1yKDYxKSxhPXt9OwovLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKQpyKDE4KShhLHIoNykoIml0ZXJhdG9yIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLGUuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7ZS5wcm90b3R5cGU9bihhLHtuZXh0OmkoMSxyKX0pLG8oZSx0KyIgSXRlcmF0b3IiKX19LC8qIDExNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGhlbHBlciBmb3IgU3RyaW5nI3tzdGFydHNXaXRoLCBlbmRzV2l0aCwgaW5jbHVkZXN9CnZhciBuPXIoODIpLGk9cigzMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtpZihuKHQpKXRocm93IFR5cGVFcnJvcigiU3RyaW5nIyIrcisiIGRvZXNuJ3QgYWNjZXB0IHJlZ2V4ISIpO3JldHVybiBTdHJpbmcoaShlKSl9fSwvKiAxMTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNykoIm1hdGNoIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PS8uLzt0cnl7Ii8uLyJbZV0odCl9Y2F0Y2gocil7dHJ5e3JldHVybiB0W25dPSExLCEiLy4vIltlXSh0KX1jYXRjaChlKXt9fXJldHVybiEwfX0sLyogMTE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvcgp2YXIgbj1yKDYzKSxpPXIoNykoIml0ZXJhdG9yIiksbz1BcnJheS5wcm90b3R5cGU7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lJiYobi5BcnJheT09PWV8fG9baV09PT1lKX19LC8qIDExNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoOSksaT1yKDQ3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3QgaW4gZT9uLmYoZSx0LGkoMCxyKSk6ZVt0XT1yfX0sLyogMTE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcyKSxpPXIoNykoIml0ZXJhdG9yIiksbz1yKDYzKTtlLmV4cG9ydHM9cigzMCkuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT1lKXJldHVybiBlW2ldfHxlWyJAQGl0ZXJhdG9yIl18fG9bbihlKV19fSwvKiAxMTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA5LjQuMi4zIEFycmF5U3BlY2llc0NyZWF0ZShvcmlnaW5hbEFycmF5LCBsZW5ndGgpCnZhciBuPXIoMzAwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3KG4oZSkpKHQpfX0sLyogMTIwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgbj1yKDE0KSxpPXIoNTEpLG89cigxMCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uKHRoaXMpLHI9byh0Lmxlbmd0aCksYT1hcmd1bWVudHMubGVuZ3RoLHM9aShhPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxyKSx1PWE+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGM9dm9pZCAwPT09dT9yOmkodSxyKTtjPnM7KXRbcysrXT1lO3JldHVybiB0fX0sLyogMTIxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0MSksaT1yKDE2Miksbz1yKDYzKSxhPXIoMjMpOwovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCmUuZXhwb3J0cz1yKDExMikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9YShlKSwvLyB0YXJnZXQKdGhpcy5faT0wLC8vIG5leHQgaW5kZXgKdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsaSgxKSk6ImtleXMiPT10P2koMCxyKToidmFsdWVzIj09dD9pKDAsZVtyXSk6aSgwLFtyLGVbcl1dKX0sInZhbHVlcyIpLAovLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpCm8uQXJndW1lbnRzPW8uQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0sLyogMTIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG8sYT1yKDI3KSxzPXIoMTUyKSx1PXIoMTA0KSxjPXIoMTAwKSxmPXIoNCksbD1mLnByb2Nlc3MsZD1mLnNldEltbWVkaWF0ZSxwPWYuY2xlYXJJbW1lZGlhdGUseT1mLk1lc3NhZ2VDaGFubmVsLGg9Zi5EaXNwYXRjaCx2PTAsZz17fSxiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Z1tlXTtkZWxldGUgZ1tlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTsKLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOgpkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gZ1srK3ZdPWZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwpzKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgZ1tlXX0sCi8vIE5vZGUuanMgMC44LQoicHJvY2VzcyI9PXIoMjgpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhhKGIsZSwxKSl9OmgmJmgubm93P249ZnVuY3Rpb24oZSl7aC5ub3coYShiLGUsMSkpfTp5PyhpPW5ldyB5LG89aS5wb3J0MixpLnBvcnQxLm9ubWVzc2FnZT1tLG49YShvLnBvc3RNZXNzYWdlLG8sMSkpOmYuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZi5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2YucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG0sITEpKTpuPSJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gYygic2NyaXB0Iik/ZnVuY3Rpb24oZSl7dS5hcHBlbmRDaGlsZChjKCJzY3JpcHQiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGEoYixlLDEpLDApfSksZS5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0sLyogMTIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLGk9cigxMjIpLnNldCxvPW4uTXV0YXRpb25PYnNlcnZlcnx8bi5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGE9bi5wcm9jZXNzLHM9bi5Qcm9taXNlLHU9InByb2Nlc3MiPT1yKDI4KShhKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYz1mdW5jdGlvbigpe3ZhciBuLGk7Zm9yKHUmJihuPWEuZG9tYWluKSYmbi5leGl0KCk7ZTspe2k9ZS5mbixlPWUubmV4dDt0cnl7aSgpfWNhdGNoKG4pe3Rocm93IGU/cigpOnQ9dm9pZCAwLG59fXQ9dm9pZCAwLG4mJm4uZW50ZXIoKX07Ci8vIE5vZGUuanMKaWYodSlyPWZ1bmN0aW9uKCl7YS5uZXh0VGljayhjKX07ZWxzZSBpZihvKXt2YXIgZj0hMCxsPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKTtuZXcgbyhjKS5vYnNlcnZlKGwse2NoYXJhY3RlckRhdGE6ITB9KSwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwpyPWZ1bmN0aW9uKCl7bC5kYXRhPWY9IWZ9fWVsc2UgaWYocyYmcy5yZXNvbHZlKXt2YXIgZD1zLnJlc29sdmUoKTtyPWZ1bmN0aW9uKCl7ZC50aGVuKGMpfX1lbHNlIHI9ZnVuY3Rpb24oKXsKLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKQppLmNhbGwobixjKX07cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBpPXtmbjpuLG5leHQ6dm9pZCAwfTt0JiYodC5uZXh0PWkpLGV8fChlPWkscigpKSx0PWl9fX0sLyogMTI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gUHJvbWlzZUNhcGFiaWxpdHkoZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPW4odCksdGhpcy5yZWplY3Q9bihyKX0KLy8gMjUuNC4xLjUgTmV3UHJvbWlzZUNhcGFiaWxpdHkoQykKdmFyIG49cigxNik7ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eShlKX19LC8qIDEyNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBJRUVFNzU0IGNvbnZlcnNpb25zIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvaWVlZTc1NApmdW5jdGlvbiBwYWNrSUVFRTc1NChlLHQscil7dmFyIG4saSxvLGE9QXJyYXkocikscz04KnItdC0xLHU9KDE8PHMpLTEsYz11Pj4xLGY9MjM9PT10P00oMiwtMjQpLU0oMiwtNzcpOjAsbD0wLGQ9ZTwwfHwwPT09ZSYmMS9lPDA/MTowO2ZvcihlPWsoZSksCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKZSE9ZXx8ZT09PU8/KAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCmk9ZSE9ZT8xOjAsbj11KToobj1MKHgoZSkvRSksZSoobz1NKDIsLW4pKTwxJiYobi0tLG8qPTIpLGUrPW4rYz49MT9mL286ZipNKDIsMS1jKSxlKm8+PTImJihuKyssby89MiksbitjPj11PyhpPTAsbj11KTpuK2M+PTE/KGk9KGUqby0xKSpNKDIsdCksbis9Yyk6KGk9ZSpNKDIsYy0xKSpNKDIsdCksbj0wKSk7dD49ODthW2wrK109MjU1JmksaS89MjU2LHQtPTgpO2ZvcihuPW48PHR8aSxzKz10O3M+MDthW2wrK109MjU1Jm4sbi89MjU2LHMtPTgpO3JldHVybiBhWy0tbF18PTEyOCpkLGF9ZnVuY3Rpb24gdW5wYWNrSUVFRTc1NChlLHQscil7dmFyIG4saT04KnItdC0xLG89KDE8PGkpLTEsYT1vPj4xLHM9aS03LHU9ci0xLGM9ZVt1LS1dLGY9MTI3JmM7Zm9yKGM+Pj03O3M+MDtmPTI1NipmK2VbdV0sdS0tLHMtPTgpO2ZvcihuPWYmKDE8PC1zKS0xLGY+Pj0tcyxzKz10O3M+MDtuPTI1NipuK2VbdV0sdS0tLHMtPTgpO2lmKDA9PT1mKWY9MS1hO2Vsc2V7aWYoZj09PW8pcmV0dXJuIG4/TmFOOmM/LU86TztuKz1NKDIsdCksZi09YX1yZXR1cm4oYz8tMToxKSpuKk0oMixmLXQpfWZ1bmN0aW9uIHVucGFja0kzMihlKXtyZXR1cm4gZVszXTw8MjR8ZVsyXTw8MTZ8ZVsxXTw8OHxlWzBdfWZ1bmN0aW9uIHBhY2tJOChlKXtyZXR1cm5bMjU1JmVdfWZ1bmN0aW9uIHBhY2tJMTYoZSl7cmV0dXJuWzI1NSZlLGU+PjgmMjU1XX1mdW5jdGlvbiBwYWNrSTMyKGUpe3JldHVyblsyNTUmZSxlPj44JjI1NSxlPj4xNiYyNTUsZT4+MjQmMjU1XX1mdW5jdGlvbiBwYWNrRjY0KGUpe3JldHVybiBwYWNrSUVFRTc1NChlLDUyLDgpfWZ1bmN0aW9uIHBhY2tGMzIoZSl7cmV0dXJuIHBhY2tJRUVFNzU0KGUsMjMsNCl9ZnVuY3Rpb24gYWRkR2V0dGVyKGUsdCxyKXtoKGVbYl0sdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl19fSl9ZnVuY3Rpb24gZ2V0KGUsdCxyLG4pe3ZhciBpPStyLG89cChpKTtpZihvK3Q+ZVtVXSl0aHJvdyBTKG0pO3ZhciBhPWVbRF0uX2Iscz1vK2VbQV0sdT1hLnNsaWNlKHMscyt0KTtyZXR1cm4gbj91OnUucmV2ZXJzZSgpfWZ1bmN0aW9uIHNldChlLHQscixuLGksbyl7dmFyIGE9K3Iscz1wKGEpO2lmKHMrdD5lW1VdKXRocm93IFMobSk7Zm9yKHZhciB1PWVbRF0uX2IsYz1zK2VbQV0sZj1uKCtpKSxsPTA7bDx0O2wrKyl1W2MrbF09ZltvP2w6dC1sLTFdfXZhciBuPXIoNCksaT1yKDgpLG89cig0OSksYT1yKDg4KSxzPXIoMTgpLHU9cig1NyksYz1yKDUpLGY9cig1NSksbD1yKDMzKSxkPXIoMTApLHA9cigxNzEpLHk9cig1MykuZixoPXIoOSkuZix2PXIoMTIwKSxnPXIoNjEpLGI9InByb3RvdHlwZSIsbT0iV3JvbmcgaW5kZXghIixfPW4uQXJyYXlCdWZmZXIsUj1uLkRhdGFWaWV3LHc9bi5NYXRoLFM9bi5SYW5nZUVycm9yLE89bi5JbmZpbml0eSxQPV8saz13LmFicyxNPXcucG93LEw9dy5mbG9vcix4PXcubG9nLEU9dy5MTjIsRD1pPyJfYiI6ImJ1ZmZlciIsVT1pPyJfbCI6ImJ5dGVMZW5ndGgiLEE9aT8iX28iOiJieXRlT2Zmc2V0IjtpZihhLkFCVil7aWYoIWMoZnVuY3Rpb24oKXtfKDEpfSl8fCFjKGZ1bmN0aW9uKCl7bmV3IF8oLTEpfSl8fGMoZnVuY3Rpb24oKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwovLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwovLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwpyZXR1cm4gbmV3IF8sbmV3IF8oMS41KSxuZXcgXyhOYU4pLCJBcnJheUJ1ZmZlciIhPV8ubmFtZX0pKXtfPWZ1bmN0aW9uKGUpe3JldHVybiBmKHRoaXMsXyksbmV3IFAocChlKSl9O2Zvcih2YXIgaixJPV9bYl09UFtiXSxDPXkoUCksVD0wO0MubGVuZ3RoPlQ7KShqPUNbVCsrXSlpbiBffHxzKF8saixQW2pdKTtvfHwoSS5jb25zdHJ1Y3Rvcj1fKX0KLy8gaU9TIFNhZmFyaSA3LnggYnVnCnZhciBOPW5ldyBSKG5ldyBfKDIpKSxGPVJbYl0uc2V0SW50ODtOLnNldEludDgoMCwyMTQ3NDgzNjQ4KSxOLnNldEludDgoMSwyMTQ3NDgzNjQ5KSwhTi5nZXRJbnQ4KDApJiZOLmdldEludDgoMSl8fHUoUltiXSx7c2V0SW50ODpmdW5jdGlvbihlLHQpe0YuY2FsbCh0aGlzLGUsdDw8MjQ+PjI0KX0sc2V0VWludDg6ZnVuY3Rpb24oZSx0KXtGLmNhbGwodGhpcyxlLHQ8PDI0Pj4yNCl9fSwhMCl9ZWxzZSBfPWZ1bmN0aW9uKGUpe2YodGhpcyxfLCJBcnJheUJ1ZmZlciIpO3ZhciB0PXAoZSk7dGhpcy5fYj12LmNhbGwoQXJyYXkodCksMCksdGhpc1tVXT10fSxSPWZ1bmN0aW9uKGUsdCxyKXtmKHRoaXMsUiwiRGF0YVZpZXciKSxmKGUsXywiRGF0YVZpZXciKTt2YXIgbj1lW1VdLGk9bCh0KTtpZihpPDB8fGk+bil0aHJvdyBTKCJXcm9uZyBvZmZzZXQhIik7aWYocj12b2lkIDA9PT1yP24taTpkKHIpLGkrcj5uKXRocm93IFMoIldyb25nIGxlbmd0aCEiKTt0aGlzW0RdPWUsdGhpc1tBXT1pLHRoaXNbVV09cn0saSYmKGFkZEdldHRlcihfLCJieXRlTGVuZ3RoIiwiX2wiKSxhZGRHZXR0ZXIoUiwiYnVmZmVyIiwiX2IiKSxhZGRHZXR0ZXIoUiwiYnl0ZUxlbmd0aCIsIl9sIiksYWRkR2V0dGVyKFIsImJ5dGVPZmZzZXQiLCJfbyIpKSx1KFJbYl0se2dldEludDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGdldCh0aGlzLDEsZSlbMF08PDI0Pj4yNH0sZ2V0VWludDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGdldCh0aGlzLDEsZSlbMF19LGdldEludDE2OmZ1bmN0aW9uKGUpe3ZhciB0PWdldCh0aGlzLDIsZSxhcmd1bWVudHNbMV0pO3JldHVybih0WzFdPDw4fHRbMF0pPDwxNj4+MTZ9LGdldFVpbnQxNjpmdW5jdGlvbihlKXt2YXIgdD1nZXQodGhpcywyLGUsYXJndW1lbnRzWzFdKTtyZXR1cm4gdFsxXTw8OHx0WzBdfSxnZXRJbnQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLDQsZSxhcmd1bWVudHNbMV0pKX0sZ2V0VWludDMyOmZ1bmN0aW9uKGUpe3JldHVybiB1bnBhY2tJMzIoZ2V0KHRoaXMsNCxlLGFyZ3VtZW50c1sxXSkpPj4+MH0sZ2V0RmxvYXQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcyw0LGUsYXJndW1lbnRzWzFdKSwyMyw0KX0sZ2V0RmxvYXQ2NDpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcyw4LGUsYXJndW1lbnRzWzFdKSw1Miw4KX0sc2V0SW50ODpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDEsZSxwYWNrSTgsdCl9LHNldFVpbnQ4OmZ1bmN0aW9uKGUsdCl7c2V0KHRoaXMsMSxlLHBhY2tJOCx0KX0sc2V0SW50MTY6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcywyLGUscGFja0kxNix0LGFyZ3VtZW50c1syXSl9LHNldFVpbnQxNjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDIsZSxwYWNrSTE2LHQsYXJndW1lbnRzWzJdKX0sc2V0SW50MzI6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcyw0LGUscGFja0kzMix0LGFyZ3VtZW50c1syXSl9LHNldFVpbnQzMjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDQsZSxwYWNrSTMyLHQsYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQzMjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDQsZSxwYWNrRjMyLHQsYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQ2NDpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDgsZSxwYWNrRjY0LHQsYXJndW1lbnRzWzJdKX19KTtnKF8sIkFycmF5QnVmZmVyIiksZyhSLCJEYXRhVmlldyIpLHMoUltiXSxhLlZJRVcsITApLHQuQXJyYXlCdWZmZXI9Xyx0LkRhdGFWaWV3PVJ9LC8qIDEyNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNDEyKSghMCk7Ci8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKcigxODApKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSwvLyB0YXJnZXQKdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSwvKiAxMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gNy4xLjQgVG9JbnRlZ2VyCnZhciByPU1hdGguY2VpbCxuPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bjpyKShlKX19LC8qIDEyOCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQplLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSwvKiAxMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDIpLGk9cigyMSkuZG9jdW1lbnQsbz1uKGkpJiZuKGkuY3JlYXRlRWxlbWVudCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvP2kuY3JlYXRlRWxlbWVudChlKTp7fX19LC8qIDEzMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKQp2YXIgbj1yKDQyKTsKLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2UKLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcKZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIW4oZSkpcmV0dXJuIGU7dmFyIHIsaTtpZih0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4oaT1yLmNhbGwoZSkpKXJldHVybiBpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZihyPWUudmFsdWVPZikmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTtpZighdCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTt0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpfX0sLyogMTMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCnZhciBuPXIoMzkpLGk9cig0MTQpLG89cigxMzUpLGE9cigxMzMpKCJJRV9QUk9UTyIpLHM9ZnVuY3Rpb24oKXt9LHU9ZnVuY3Rpb24oKXsKLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWcKdmFyIGUsdD1yKDEyOSkoImlmcmFtZSIpLG49by5sZW5ndGg7Zm9yKHQuc3R5bGUuZGlzcGxheT0ibm9uZSIscigxODUpLmFwcGVuZENoaWxkKHQpLHQuc3JjPSJqYXZhc2NyaXB0OiIsLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsCi8vIGNyZWF0ZURpY3QgPSBpZnJhbWUuY29udGVudFdpbmRvdy5PYmplY3Q7Ci8vIGh0bWwucmVtb3ZlQ2hpbGQoaWZyYW1lKTsKZT10LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQsZS5vcGVuKCksZS53cml0ZSgiPHNjcmlwdD5kb2N1bWVudC5GPU9iamVjdDxcL3NjcmlwdD4iKSxlLmNsb3NlKCksdT1lLkY7bi0tOylkZWxldGUgdS5wcm90b3R5cGVbb1tuXV07cmV0dXJuIHUoKX07ZS5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUsdCl7dmFyIHI7Ci8vIGFkZCAiX19wcm90b19fIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsCnJldHVybiBudWxsIT09ZT8ocy5wcm90b3R5cGU9bihlKSxyPW5ldyBzLHMucHJvdG90eXBlPW51bGwsclthXT1lKTpyPXUoKSx2b2lkIDA9PT10P3I6aShyLHQpfX0sLyogMTMyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4xLjE1IFRvTGVuZ3RoCnZhciBuPXIoMTI3KSxpPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZT4wP2kobihlKSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sLyogMTMzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzNCkoImtleXMiKSxpPXIoOTQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gbltlXXx8KG5bZV09aShlKSl9fSwvKiAxMzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjEpLGk9blsiX19jb3JlLWpzX3NoYXJlZF9fIl18fChuWyJfX2NvcmUtanNfc2hhcmVkX18iXT17fSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfHwoaVtlXT17fSl9fSwvKiAxMzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5cwplLmV4cG9ydHM9ImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZiIuc3BsaXQoIiwiKX0sLyogMTM2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gUHJvbWlzZUNhcGFiaWxpdHkoZSl7dmFyIHQscjt0aGlzLnByb21pc2U9bmV3IGUoZnVuY3Rpb24oZSxuKXtpZih2b2lkIDAhPT10fHx2b2lkIDAhPT1yKXRocm93IFR5cGVFcnJvcigiQmFkIFByb21pc2UgY29uc3RydWN0b3IiKTt0PWUscj1ufSksdGhpcy5yZXNvbHZlPW4odCksdGhpcy5yZWplY3Q9bihyKX0KLy8gMjUuNC4xLjUgTmV3UHJvbWlzZUNhcGFiaWxpdHkoQykKdmFyIG49cig5Myk7ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlQ2FwYWJpbGl0eShlKX19LC8qIDEzNyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3QuZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSwvKiAxMzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dC5ydW50aW1lVXRpbHM9e3J1bnRpbWVEZXNjcmlwdG9yOnt9LHJ1bnRpbWVDYXBhYmlsaXRpZXM6e2NvbnN0cmFpbnRzOnt9fX19LC8qIDEzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dC5mPXIoMjIpfSwvKiAxNDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjEpLGk9cigxMyksbz1yKDkyKSxhPXIoMTM5KSxzPXIoMzgpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PWkuU3ltYm9sfHwoaS5TeW1ib2w9bz97fTpuLlN5bWJvbHx8e30pOyJfIj09ZS5jaGFyQXQoMCl8fGUgaW4gdHx8cyh0LGUse3ZhbHVlOmEuZihlKX0pfX0sLyogMTQxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDc3KSxpPXIoNzMpLG89cig0NCksYT1yKDEzMCkscz1yKDU5KSx1PXIoMTgxKSxjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7dC5mPXIoNDMpP2M6ZnVuY3Rpb24oZSx0KXtpZihlPW8oZSksdD1hKHQsITApLHUpdHJ5e3JldHVybiBjKGUsdCl9Y2F0Y2goZSl7fWlmKHMoZSx0KSlyZXR1cm4gaSghbi5mLmNhbGwoZSx0KSxlW3RdKX19LC8qIDE0MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBPcGVyYXRvcnMoKXsoMCxpLmRlZmF1bHQpKHRoaXMsT3BlcmF0b3JzKX1yZXR1cm4oMCxhLmRlZmF1bHQpKE9wZXJhdG9ycyxbe2tleToiYW5kIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZVswXSYmZVsxXX19LHtrZXk6ImJldHdlZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXBhcnNlSW50KGVbMF1bMF0pLHI9cGFyc2VJbnQoZVswXVsxXSksbj1lWzFdO3JldHVybiByPHQmJihuPW48dD9uKz0yNDAwOm4scis9MjQwMCksbj50JiZuPHJ9fSx7a2V5OiJlcXVhbHMiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiIqIj09PVN0cmluZyhlWzBdKXx8U3RyaW5nKGVbMF0pPT09U3RyaW5nKGVbMV0pfX0se2tleToiZ3JlYXRlclRoYW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPmVbMF19fSx7a2V5OiJpbiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF0uaW5kZXhPZihlWzFdKT4tMX19LHtrZXk6Imxlc3NUaGFuIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXTxlWzBdfX0se2tleToibm90Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hZVswXX19LHtrZXk6Im9yIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZVswXXx8ZVsxXX19XSksT3BlcmF0b3JzfSgpO3QuZGVmYXVsdD1zLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDE0MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxNDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPWZ1bmN0aW9uKCl7LyoqCiAgKiBDcmVhdGVzIGEgbmV3IENvbmRpdGlvbi4KICAqIEBjbGFzcwogICogQHBhcmFtICB7c3RyaW5nfSAgYXR0cmlidXRlCiAgKiBAcGFyYW0gIHtzdHJpbmd9ICBvcGVyYXRvcgogICogQHBhcmFtICB7Kn0gICAgICAgcGFyYW1zCiAgKi8KZnVuY3Rpb24gQ29uZGl0aW9uKGUsdCxyKXsoMCxpLmRlZmF1bHQpKHRoaXMsQ29uZGl0aW9uKSx0aGlzLmF0dHJpYnV0ZT1lLHRoaXMub3BlcmF0b3I9dCx0aGlzLnBhcmFtcz1yLHRoaXMub3BlcmF0b3JzPW5ldyB1LmRlZmF1bHR9LyoqCiAgKiBWZXJpZmllcyBpZiB0aGUgY29uZGl0aW9uIGlzIGFwcGxpY2FibGUgdG8gdGhlIG1lc3NhZ2UuIEZpcnN0LCB0aGUgc3lzdGVtIHZhbHVlIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGF0dHJpYnV0ZSBpcyByZXRyaWV2ZWQ7IHRoZW4sIHRoYXQgdmFsdWUgaXMgY29tcGFyZWQgd2l0aCB0aGUgcGFyYW1ldGVyIHNwZWNpZmllZCBpbiB0aGUgY29uZGl0aW9uIGJ5IGV4ZWN1dGluZyB0aGUgb3BlcmF0b3IgaW1wbGVtZW50YXRpb24uIElmIHRoZSBvcGVyYXRvciBpcyAnaW4nIGFuZCB0aGUgbmFtZSBvZiBhIGdyb3VwIGlzIGdpdmVuLCB0aGVuIHRoZSBhcnJheSBob2xkaW5nIHRoZSBtZW1iZXJzIG9mIHRoZSBncm91cCBpcyByZXRyaWV2ZWQgYmVmb3JlIHRoZSBjb21wYXJpc29uLgogICogQHBhcmFtICB7T2JqZWN0fSAgICBjb250ZXh0ICAgZW52aXJvbm1lbnQgd2hlcmUgdGhlIFBvbGljeSBFbmdpbmUgaXMgYmVpbmcgdXNlZAogICogQHBhcmFtICB7T2JqZWN0fSAgICBtZXNzYWdlCiAgKi8KcmV0dXJuKDAsYS5kZWZhdWx0KShDb25kaXRpb24sW3trZXk6ImlzQXBwbGljYWJsZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlW3RoaXMuYXR0cmlidXRlXT17bWVzc2FnZTp0fTt2YXIgcj1lW3RoaXMuYXR0cmlidXRlXSxuPXZvaWQgMDtyZXR1cm4iaW4iIT09dGhpcy5vcGVyYXRvcnx8QXJyYXkuaXNBcnJheSh0aGlzLnBhcmFtcyk/dGhpcy5vcGVyYXRvcnNbdGhpcy5vcGVyYXRvcl0oW3RoaXMucGFyYW1zLHJdKToobj1lLmdldEdyb3VwKHRoaXMucGFyYW1zLHQudG8pLHRoaXMub3BlcmF0b3JzW3RoaXMub3BlcmF0b3JdKFtuLHJdKSl9fV0pLENvbmRpdGlvbn0oKTsvKioKICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICoKICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgKgogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAqCiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAqKi8KdC5kZWZhdWx0PWMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTQ0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI7Ci8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlCnI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7Ci8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKQpyPXJ8fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCl8fCgwLGV2YWwpKCJ0aGlzIil9Y2F0Y2goZSl7Ci8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlCiJvYmplY3QiPT10eXBlb2Ygd2luZG93JiYocj13aW5kb3cpfQovLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uCi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzCi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn0KZS5leHBvcnRzPXJ9LC8qIDE0NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPSFyKDgpJiYhcig1KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkocigxMDApKCJkaXYiKSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sLyogMTQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt0LmY9cig3KX0sLyogMTQ3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE3KSxpPXIoMjMpLG89cig3OSkoITEpLGE9cigxMDIpKCJJRV9QUk9UTyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9aShlKSx1PTAsYz1bXTtmb3IociBpbiBzKXIhPWEmJm4ocyxyKSYmYy5wdXNoKHIpOwovLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzCmZvcig7dC5sZW5ndGg+dTspbihzLHI9dFt1KytdKSYmKH5vKGMscil8fGMucHVzaChyKSk7cmV0dXJuIGN9fSwvKiAxNDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSksaT1yKDMpLG89cig1MCk7ZS5leHBvcnRzPXIoOCk/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0KXtpKGUpO2Zvcih2YXIgcixhPW8odCkscz1hLmxlbmd0aCx1PTA7cz51OyluLmYoZSxyPWFbdSsrXSx0W3JdKTtyZXR1cm4gZX19LC8qIDE0OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3cKdmFyIG49cigyMyksaT1yKDUzKS5mLG89e30udG9TdHJpbmcsYT0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiBpKGUpfWNhdGNoKGUpe3JldHVybiBhLnNsaWNlKCl9fTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gYSYmIltvYmplY3QgV2luZG93XSI9PW8uY2FsbChlKT9zKGUpOmkobihlKSl9fSwvKiAxNTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKQp2YXIgbj1yKDUwKSxpPXIoODApLG89cig3MSksYT1yKDE0KSxzPXIoNzApLHU9T2JqZWN0LmFzc2lnbjsKLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpCmUuZXhwb3J0cz0hdXx8cig1KShmdW5jdGlvbigpe3ZhciBlPXt9LHQ9e30scj1TeW1ib2woKSxuPSJhYmNkZWZnaGlqa2xtbm9wcXJzdCI7cmV0dXJuIGVbcl09NyxuLnNwbGl0KCIiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RbZV09ZX0pLDchPXUoe30sZSlbcl18fE9iamVjdC5rZXlzKHUoe30sdCkpLmpvaW4oIiIpIT1ufSk/ZnVuY3Rpb24oZSx0KXtmb3IoLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwp2YXIgcj1hKGUpLHU9YXJndW1lbnRzLmxlbmd0aCxjPTEsZj1pLmYsbD1vLmY7dT5jOylmb3IodmFyIGQscD1zKGFyZ3VtZW50c1tjKytdKSx5PWY/bihwKS5jb25jYXQoZihwKSk6bihwKSxoPXkubGVuZ3RoLHY9MDtoPnY7KWwuY2FsbChwLGQ9eVt2KytdKSYmKHJbZF09cFtkXSk7cmV0dXJuIHJ9OnV9LC8qIDE1MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTYpLGk9cig2KSxvPXIoMTUyKSxhPVtdLnNsaWNlLHM9e30sdT1mdW5jdGlvbihlLHQscil7aWYoISh0IGluIHMpKXtmb3IodmFyIG49W10saT0wO2k8dDtpKyspbltpXT0iYVsiK2krIl0iOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMKc1t0XT1GdW5jdGlvbigiRixhIiwicmV0dXJuIG5ldyBGKCIrbi5qb2luKCIsIikrIikiKX1yZXR1cm4gc1t0XShlLHIpfTtlLmV4cG9ydHM9RnVuY3Rpb24uYmluZHx8ZnVuY3Rpb24oZSl7dmFyIHQ9bih0aGlzKSxyPWEuY2FsbChhcmd1bWVudHMsMSkscz1mdW5jdGlvbigpe3ZhciBuPXIuY29uY2F0KGEuY2FsbChhcmd1bWVudHMpKTtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHM/dSh0LG4ubGVuZ3RoLG4pOm8odCxuLGUpfTtyZXR1cm4gaSh0LnByb3RvdHlwZSkmJihzLnByb3RvdHlwZT10LnByb3RvdHlwZSksc319LC8qIDE1MiAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBmYXN0IGFwcGx5LCBodHRwOi8vanNwZXJmLmxua2l0LmNvbS9mYXN0LWFwcGx5LzUKZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj12b2lkIDA9PT1yO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuP2UoKTplLmNhbGwocik7Y2FzZSAxOnJldHVybiBuP2UodFswXSk6ZS5jYWxsKHIsdFswXSk7Y2FzZSAyOnJldHVybiBuP2UodFswXSx0WzFdKTplLmNhbGwocix0WzBdLHRbMV0pO2Nhc2UgMzpyZXR1cm4gbj9lKHRbMF0sdFsxXSx0WzJdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSk7Y2FzZSA0OnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0sdFszXSk6ZS5jYWxsKHIsdFswXSx0WzFdLHRbMl0sdFszXSl9cmV0dXJuIGUuYXBwbHkocix0KX19LC8qIDE1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KS5wYXJzZUludCxpPXIoNjIpLnRyaW0sbz1yKDEwNiksYT0vXlstK10/MFt4WF0vO2UuZXhwb3J0cz04IT09bihvKyIwOCIpfHwyMiE9PW4obysiMHgxNiIpP2Z1bmN0aW9uKGUsdCl7dmFyIHI9aShTdHJpbmcoZSksMyk7cmV0dXJuIG4ocix0Pj4+MHx8KGEudGVzdChyKT8xNjoxMCkpfTpufSwvKiAxNTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCkucGFyc2VGbG9hdCxpPXIoNjIpLnRyaW07ZS5leHBvcnRzPTEvbihyKDEwNikrIi0wIikhPS0xLzA/ZnVuY3Rpb24oZSl7dmFyIHQ9aShTdHJpbmcoZSksMykscj1uKHQpO3JldHVybiAwPT09ciYmIi0iPT10LmNoYXJBdCgwKT8tMDpyfTpufSwvKiAxNTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjgpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCJudW1iZXIiIT10eXBlb2YgZSYmIk51bWJlciIhPW4oZSkpdGhyb3cgVHlwZUVycm9yKHQpO3JldHVybitlfX0sLyogMTU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjMgTnVtYmVyLmlzSW50ZWdlcihudW1iZXIpCnZhciBuPXIoNiksaT1NYXRoLmZsb29yO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4hbihlKSYmaXNGaW5pdGUoZSkmJmkoZSk9PT1lfX0sLyogMTU3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIDIwLjIuMi4yMCBNYXRoLmxvZzFwKHgpCmUuZXhwb3J0cz1NYXRoLmxvZzFwfHxmdW5jdGlvbihlKXtyZXR1cm4oZT0rZSk+LTFlLTgmJmU8MWUtOD9lLWUqZS8yOk1hdGgubG9nKDErZSl9fSwvKiAxNTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTYgTWF0aC5mcm91bmQoeCkKdmFyIG49cigxMDkpLGk9TWF0aC5wb3csbz1pKDIsLTUyKSxhPWkoMiwtMjMpLHM9aSgyLDEyNykqKDItYSksdT1pKDIsLTEyNiksYz1mdW5jdGlvbihlKXtyZXR1cm4gZSsxL28tMS9vfTtlLmV4cG9ydHM9TWF0aC5mcm91bmR8fGZ1bmN0aW9uKGUpe3ZhciB0LHIsaT1NYXRoLmFicyhlKSxmPW4oZSk7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKcmV0dXJuIGk8dT9mKmMoaS91L2EpKnUqYToodD0oMSthL28pKmkscj10LSh0LWkpLHI+c3x8ciE9cj9mKigxLzApOmYqcil9fSwvKiAxNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yCnZhciBuPXIoMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGkpe3RyeXtyZXR1cm4gaT90KG4ocilbMF0sclsxXSk6dChyKX1jYXRjaCh0KXt2YXIgbz1lLnJldHVybjt0aHJvdyB2b2lkIDAhPT1vJiZuKG8uY2FsbChlKSksdH19fSwvKiAxNjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTYpLGk9cigxNCksbz1yKDcwKSxhPXIoMTApO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixzLHUpe24odCk7dmFyIGM9aShlKSxmPW8oYyksbD1hKGMubGVuZ3RoKSxkPXU/bC0xOjAscD11Py0xOjE7aWYocjwyKWZvcig7Oyl7aWYoZCBpbiBmKXtzPWZbZF0sZCs9cDticmVha31pZihkKz1wLHU/ZDwwOmw8PWQpdGhyb3cgVHlwZUVycm9yKCJSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlIil9Zm9yKDt1P2Q+PTA6bD5kO2QrPXApZCBpbiBmJiYocz10KHMsZltkXSxkLGMpKTtyZXR1cm4gc319LC8qIDE2MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMi4xLjMuMyBBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbih0YXJnZXQsIHN0YXJ0LCBlbmQgPSB0aGlzLmxlbmd0aCkKdmFyIG49cigxNCksaT1yKDUxKSxvPXIoMTApO2UuZXhwb3J0cz1bXS5jb3B5V2l0aGlufHxmdW5jdGlvbihlLHQpe3ZhciByPW4odGhpcyksYT1vKHIubGVuZ3RoKSxzPWkoZSxhKSx1PWkodCxhKSxjPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGY9TWF0aC5taW4oKHZvaWQgMD09PWM/YTppKGMsYSkpLXUsYS1zKSxsPTE7Zm9yKHU8cyYmczx1K2YmJihsPS0xLHUrPWYtMSxzKz1mLTEpO2YtLSA+MDspdSBpbiByP3Jbc109clt1XTpkZWxldGUgcltzXSxzKz1sLHUrPWw7cmV0dXJuIHJ9fSwvKiAxNjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57dmFsdWU6dCxkb25lOiEhZX19fSwvKiAxNjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMS4yLjUuMyBnZXQgUmVnRXhwLnByb3RvdHlwZS5mbGFncygpCnIoOCkmJiJnIiE9Ly4vZy5mbGFncyYmcig5KS5mKFJlZ0V4cC5wcm90b3R5cGUsImZsYWdzIix7Y29uZmlndXJhYmxlOiEwLGdldDpyKDg0KX0pfSwvKiAxNjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybntlOiExLHY6ZSgpfX1jYXRjaChlKXtyZXR1cm57ZTohMCx2OmV9fX19LC8qIDE2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzKSxpPXIoNiksbz1yKDEyNCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYobihlKSxpKHQpJiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgcj1vLmYoZSk7cmV0dXJuKDAsci5yZXNvbHZlKSh0KSxyLnByb21pc2V9fSwvKiAxNjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDE2NyksaT1yKDY0KTsKLy8gMjMuMSBNYXAgT2JqZWN0cwplLmV4cG9ydHM9cig4NykoIk1hcCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7Ci8vIDIzLjEuMy42IE1hcC5wcm90b3R5cGUuZ2V0KGtleSkKZ2V0OmZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0RW50cnkoaSh0aGlzLCJNYXAiKSxlKTtyZXR1cm4gdCYmdC52fSwKLy8gMjMuMS4zLjkgTWFwLnByb3RvdHlwZS5zZXQoa2V5LCB2YWx1ZSkKc2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZGVmKGkodGhpcywiTWFwIiksMD09PWU/MDplLHQpfX0sbiwhMCl9LC8qIDE2NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoOSkuZixpPXIoNTIpLG89cig1NyksYT1yKDI3KSxzPXIoNTUpLHU9cig1NiksYz1yKDExMiksZj1yKDE2MiksbD1yKDU0KSxkPXIoOCkscD1yKDQwKS5mYXN0S2V5LHk9cig2NCksaD1kPyJfcyI6InNpemUiLHY9ZnVuY3Rpb24oZSx0KXsKLy8gZmFzdCBjYXNlCnZhciByLG49cCh0KTtpZigiRiIhPT1uKXJldHVybiBlLl9pW25dOwovLyBmcm96ZW4gb2JqZWN0IGNhc2UKZm9yKHI9ZS5fZjtyO3I9ci5uKWlmKHIuaz09dClyZXR1cm4gcn07ZS5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQscixjKXt2YXIgZj1lKGZ1bmN0aW9uKGUsbil7cyhlLGYsdCwiX2kiKSxlLl90PXQsLy8gY29sbGVjdGlvbiB0eXBlCmUuX2k9aShudWxsKSwvLyBpbmRleAplLl9mPXZvaWQgMCwvLyBmaXJzdCBlbnRyeQplLl9sPXZvaWQgMCwvLyBsYXN0IGVudHJ5CmVbaF09MCwvLyBzaXplCnZvaWQgMCE9biYmdShuLHIsZVtjXSxlKX0pO3JldHVybiBvKGYucHJvdG90eXBlLHsKLy8gMjMuMS4zLjEgTWFwLnByb3RvdHlwZS5jbGVhcigpCi8vIDIzLjIuMy4yIFNldC5wcm90b3R5cGUuY2xlYXIoKQpjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgZT15KHRoaXMsdCkscj1lLl9pLG49ZS5fZjtuO249bi5uKW4ucj0hMCxuLnAmJihuLnA9bi5wLm49dm9pZCAwKSxkZWxldGUgcltuLmldO2UuX2Y9ZS5fbD12b2lkIDAsZVtoXT0wfSwKLy8gMjMuMS4zLjMgTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQovLyAyMy4yLjMuNCBTZXQucHJvdG90eXBlLmRlbGV0ZSh2YWx1ZSkKZGVsZXRlOmZ1bmN0aW9uKGUpe3ZhciByPXkodGhpcyx0KSxuPXYocixlKTtpZihuKXt2YXIgaT1uLm4sbz1uLnA7ZGVsZXRlIHIuX2lbbi5pXSxuLnI9ITAsbyYmKG8ubj1pKSxpJiYoaS5wPW8pLHIuX2Y9PW4mJihyLl9mPWkpLHIuX2w9PW4mJihyLl9sPW8pLHJbaF0tLX1yZXR1cm4hIW59LAovLyAyMy4yLjMuNiBTZXQucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKLy8gMjMuMS4zLjUgTWFwLnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcgPSB1bmRlZmluZWQpCmZvckVhY2g6ZnVuY3Rpb24oZSl7eSh0aGlzLHQpO2Zvcih2YXIgcixuPWEoZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtyPXI/ci5uOnRoaXMuX2Y7KQovLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnkKZm9yKG4oci52LHIuayx0aGlzKTtyJiZyLnI7KXI9ci5wfSwKLy8gMjMuMS4zLjcgTWFwLnByb3RvdHlwZS5oYXMoa2V5KQovLyAyMy4yLjMuNyBTZXQucHJvdG90eXBlLmhhcyh2YWx1ZSkKaGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhdih5KHRoaXMsdCksZSl9fSksZCYmbihmLnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMsdClbaF19fSksZn0sZGVmOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixpLG89dihlLHQpOwovLyBjaGFuZ2UgZXhpc3RpbmcgZW50cnkKLy8gYWRkIHRvIGluZGV4CnJldHVybiBvP28udj1yOihlLl9sPW89e2k6aT1wKHQsITApLC8vIDwtIGluZGV4Cms6dCwvLyA8LSBrZXkKdjpyLC8vIDwtIHZhbHVlCnA6bj1lLl9sLC8vIDwtIHByZXZpb3VzIGVudHJ5Cm46dm9pZCAwLC8vIDwtIG5leHQgZW50cnkKcjohMX0sZS5fZnx8KGUuX2Y9byksbiYmKG4ubj1vKSxlW2hdKyssIkYiIT09aSYmKGUuX2lbaV09bykpLGV9LGdldEVudHJ5OnYsc2V0U3Ryb25nOmZ1bmN0aW9uKGUsdCxyKXsKLy8gYWRkIC5rZXlzLCAudmFsdWVzLCAuZW50cmllcywgW0BAaXRlcmF0b3JdCi8vIDIzLjEuMy40LCAyMy4xLjMuOCwgMjMuMS4zLjExLCAyMy4xLjMuMTIsIDIzLjIuMy41LCAyMy4yLjMuOCwgMjMuMi4zLjEwLCAyMy4yLjMuMTEKYyhlLHQsZnVuY3Rpb24oZSxyKXt0aGlzLl90PXkoZSx0KSwvLyB0YXJnZXQKdGhpcy5faz1yLC8vIGtpbmQKdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Ci8vIHJldmVydCB0byB0aGUgbGFzdCBleGlzdGluZyBlbnRyeQpmb3IodmFyIGU9dGhpcyx0PWUuX2sscj1lLl9sO3ImJnIucjspcj1yLnA7Ci8vIGdldCBuZXh0IGVudHJ5Ci8vIGdldCBuZXh0IGVudHJ5Ci8vIHJldHVybiBzdGVwIGJ5IGtpbmQKLy8gb3IgZmluaXNoIHRoZSBpdGVyYXRpb24KcmV0dXJuIGUuX3QmJihlLl9sPXI9cj9yLm46ZS5fdC5fZik/ImtleXMiPT10P2YoMCxyLmspOiJ2YWx1ZXMiPT10P2YoMCxyLnYpOmYoMCxbci5rLHIudl0pOihlLl90PXZvaWQgMCxmKDEpKX0scj8iZW50cmllcyI6InZhbHVlcyIsIXIsITApLAovLyBhZGQgW0BAc3BlY2llc10sIDIzLjEuMi4yLCAyMy4yLjIuMgpsKHQpfX19LC8qIDE2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTY3KSxpPXIoNjQpOwovLyAyMy4yIFNldCBPYmplY3RzCmUuZXhwb3J0cz1yKDg3KSgiU2V0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHsKLy8gMjMuMi4zLjEgU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpCmFkZDpmdW5jdGlvbihlKXtyZXR1cm4gbi5kZWYoaSh0aGlzLCJTZXQiKSxlPTA9PT1lPzA6ZSxlKX19LG4pfSwvKiAxNjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixpPXIoMzUpKDApLG89cigxOSksYT1yKDQwKSxzPXIoMTUwKSx1PXIoMTcwKSxjPXIoNiksZj1yKDUpLGw9cig2NCksZD1hLmdldFdlYWsscD1PYmplY3QuaXNFeHRlbnNpYmxlLHk9dS51ZnN0b3JlLGg9e30sdj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LGc9ewovLyAyMy4zLjMuMyBXZWFrTWFwLnByb3RvdHlwZS5nZXQoa2V5KQpnZXQ6ZnVuY3Rpb24oZSl7aWYoYyhlKSl7dmFyIHQ9ZChlKTtyZXR1cm4hMD09PXQ/eShsKHRoaXMsIldlYWtNYXAiKSkuZ2V0KGUpOnQ/dFt0aGlzLl9pXTp2b2lkIDB9fSwKLy8gMjMuMy4zLjUgV2Vha01hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpCnNldDpmdW5jdGlvbihlLHQpe3JldHVybiB1LmRlZihsKHRoaXMsIldlYWtNYXAiKSxlLHQpfX0sYj1lLmV4cG9ydHM9cig4NykoIldlYWtNYXAiLHYsZyx1LCEwLCEwKTsKLy8gSUUxMSBXZWFrTWFwIGZyb3plbiBrZXlzIGZpeApmKGZ1bmN0aW9uKCl7cmV0dXJuIDchPShuZXcgYikuc2V0KChPYmplY3QuZnJlZXplfHxPYmplY3QpKGgpLDcpLmdldChoKX0pJiYobj11LmdldENvbnN0cnVjdG9yKHYsIldlYWtNYXAiKSxzKG4ucHJvdG90eXBlLGcpLGEuTkVFRD0hMCxpKFsiZGVsZXRlIiwiaGFzIiwiZ2V0Iiwic2V0Il0sZnVuY3Rpb24oZSl7dmFyIHQ9Yi5wcm90b3R5cGUscj10W2VdO28odCxlLGZ1bmN0aW9uKHQsaSl7Ci8vIHN0b3JlIGZyb3plbiBvYmplY3RzIG9uIGludGVybmFsIHdlYWttYXAgc2hpbQppZihjKHQpJiYhcCh0KSl7dGhpcy5fZnx8KHRoaXMuX2Y9bmV3IG4pO3ZhciBvPXRoaXMuX2ZbZV0odCxpKTtyZXR1cm4ic2V0Ij09ZT90aGlzOm99cmV0dXJuIHIuY2FsbCh0aGlzLHQsaSl9KX0pKX0sLyogMTcwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1NyksaT1yKDQwKS5nZXRXZWFrLG89cigzKSxhPXIoNikscz1yKDU1KSx1PXIoNTYpLGM9cigzNSksZj1yKDE3KSxsPXIoNjQpLGQ9Yyg1KSxwPWMoNikseT0wLGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX2x8fChlLl9sPW5ldyB2KX0sdj1mdW5jdGlvbigpe3RoaXMuYT1bXX0sZz1mdW5jdGlvbihlLHQpe3JldHVybiBkKGUuYSxmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXR9KX07di5wcm90b3R5cGU9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1nKHRoaXMsZSk7aWYodClyZXR1cm4gdFsxXX0saGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhZyh0aGlzLGUpfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1nKHRoaXMsZSk7cj9yWzFdPXQ6dGhpcy5hLnB1c2goW2UsdF0pfSxkZWxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9cCh0aGlzLmEsZnVuY3Rpb24odCl7cmV0dXJuIHRbMF09PT1lfSk7cmV0dXJufnQmJnRoaXMuYS5zcGxpY2UodCwxKSwhIX50fX0sZS5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQscixvKXt2YXIgYz1lKGZ1bmN0aW9uKGUsbil7cyhlLGMsdCwiX2kiKSxlLl90PXQsLy8gY29sbGVjdGlvbiB0eXBlCmUuX2k9eSsrLC8vIGNvbGxlY3Rpb24gaWQKZS5fbD12b2lkIDAsLy8gbGVhayBzdG9yZSBmb3IgdW5jYXVnaHQgZnJvemVuIG9iamVjdHMKdm9pZCAwIT1uJiZ1KG4scixlW29dLGUpfSk7cmV0dXJuIG4oYy5wcm90b3R5cGUsewovLyAyMy4zLjMuMiBXZWFrTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQovLyAyMy40LjMuMyBXZWFrU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpCmRlbGV0ZTpmdW5jdGlvbihlKXtpZighYShlKSlyZXR1cm4hMTt2YXIgcj1pKGUpO3JldHVybiEwPT09cj9oKGwodGhpcyx0KSkuZGVsZXRlKGUpOnImJmYocix0aGlzLl9pKSYmZGVsZXRlIHJbdGhpcy5faV19LAovLyAyMy4zLjMuNCBXZWFrTWFwLnByb3RvdHlwZS5oYXMoa2V5KQovLyAyMy40LjMuNCBXZWFrU2V0LnByb3RvdHlwZS5oYXModmFsdWUpCmhhczpmdW5jdGlvbihlKXtpZighYShlKSlyZXR1cm4hMTt2YXIgcj1pKGUpO3JldHVybiEwPT09cj9oKGwodGhpcyx0KSkuaGFzKGUpOnImJmYocix0aGlzLl9pKX19KSxjfSxkZWY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWkobyh0KSwhMCk7cmV0dXJuITA9PT1uP2goZSkuc2V0KHQscik6bltlLl9pXT1yLGV9LHVmc3RvcmU6aH19LC8qIDE3MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvaW5kZXgKdmFyIG49cigzMyksaT1yKDEwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSlyZXR1cm4gMDt2YXIgdD1uKGUpLHI9aSh0KTtpZih0IT09cil0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBsZW5ndGghIik7cmV0dXJuIHJ9fSwvKiAxNzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzCnZhciBuPXIoNTMpLGk9cig4MCksbz1yKDMpLGE9cig0KS5SZWZsZWN0O2UuZXhwb3J0cz1hJiZhLm93bktleXN8fGZ1bmN0aW9uKGUpe3ZhciB0PW4uZihvKGUpKSxyPWkuZjtyZXR1cm4gcj90LmNvbmNhdChyKGUpKTp0fX0sLyogMTczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZmxhdHRlbkludG9BcnJheShlLHQscix1LGMsZixsLGQpe2Zvcih2YXIgcCx5LGg9Yyx2PTAsZz0hIWwmJmEobCxkLDMpO3Y8dTspe2lmKHYgaW4gcil7aWYocD1nP2coclt2XSx2LHQpOnJbdl0seT0hMSxpKHApJiYoeT1wW3NdLHk9dm9pZCAwIT09eT8hIXk6bihwKSkseSYmZj4wKWg9ZmxhdHRlbkludG9BcnJheShlLHQscCxvKHAubGVuZ3RoKSxoLGYtMSktMTtlbHNle2lmKGg+PTkwMDcxOTkyNTQ3NDA5OTEpdGhyb3cgVHlwZUVycm9yKCk7ZVtoXT1wfWgrK312Kyt9cmV0dXJuIGh9Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtZmxhdE1hcC8jc2VjLUZsYXR0ZW5JbnRvQXJyYXkKdmFyIG49cig4MSksaT1yKDYpLG89cigxMCksYT1yKDI3KSxzPXIoNykoImlzQ29uY2F0U3ByZWFkYWJsZSIpO2UuZXhwb3J0cz1mbGF0dGVuSW50b0FycmF5fSwvKiAxNzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZAp2YXIgbj1yKDEwKSxpPXIoMTA4KSxvPXIoMzIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgcz1TdHJpbmcobyhlKSksdT1zLmxlbmd0aCxjPXZvaWQgMD09PXI/IiAiOlN0cmluZyhyKSxmPW4odCk7aWYoZjw9dXx8IiI9PWMpcmV0dXJuIHM7dmFyIGw9Zi11LGQ9aS5jYWxsKGMsTWF0aC5jZWlsKGwvYy5sZW5ndGgpKTtyZXR1cm4gZC5sZW5ndGg+bCYmKGQ9ZC5zbGljZSgwLGwpKSxhP2QrczpzK2R9fSwvKiAxNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNTApLGk9cigyMyksbz1yKDcxKS5mO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciByLGE9aSh0KSxzPW4oYSksdT1zLmxlbmd0aCxjPTAsZj1bXTt1PmM7KW8uY2FsbChhLHI9c1tjKytdKSYmZi5wdXNoKGU/W3IsYVtyXV06YVtyXSk7cmV0dXJuIGZ9fX0sLyogMTc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTgp2YXIgbj1yKDcyKSxpPXIoMTc3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYobih0aGlzKSE9ZSl0aHJvdyBUeXBlRXJyb3IoZSsiI3RvSlNPTiBpc24ndCBnZW5lcmljIik7cmV0dXJuIGkodGhpcyl9fX0sLyogMTc3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXTtyZXR1cm4gbihlLCExLHIucHVzaCxyLHQpLHJ9fSwvKiAxNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwplLmV4cG9ydHM9TWF0aC5zY2FsZXx8ZnVuY3Rpb24oZSx0LHIsbixpKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGh8fGUhPWV8fHQhPXR8fHIhPXJ8fG4hPW58fGkhPWk/TmFOOmU9PT0xLzB8fGU9PT0tMS8wP2U6KGUtdCkqKGktbikvKHItdCkrbn19LC8qIDE3OSAqLwovKioqLwpmdW5jdGlvbihlLHQpe30sLyogMTgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig5MiksaT1yKDI2KSxvPXIoMTgyKSxhPXIoNTgpLHM9cig1OSksdT1yKDc0KSxjPXIoNDEzKSxmPXIoOTUpLGw9cigxODYpLGQ9cigyMikoIml0ZXJhdG9yIikscD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSx5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixoLHYsZyxiKXtjKHIsdCxoKTt2YXIgbSxfLFIsdz1mdW5jdGlvbihlKXtpZighcCYmZSBpbiBrKXJldHVybiBrW2VdO3N3aXRjaChlKXtjYXNlImtleXMiOmNhc2UidmFsdWVzIjpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcyxlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fSxTPXQrIiBJdGVyYXRvciIsTz0idmFsdWVzIj09dixQPSExLGs9ZS5wcm90b3R5cGUsTT1rW2RdfHxrWyJAQGl0ZXJhdG9yIl18fHYmJmtbdl0sTD1NfHx3KHYpLHg9dj9PP3coImVudHJpZXMiKTpMOnZvaWQgMCxFPSJBcnJheSI9PXQ/ay5lbnRyaWVzfHxNOk07aWYoCi8vIEZpeCBuYXRpdmUKRSYmKFI9bChFLmNhbGwobmV3IGUpKSkhPT1PYmplY3QucHJvdG90eXBlJiZSLm5leHQmJigKLy8gU2V0IEBAdG9TdHJpbmdUYWcgdG8gbmF0aXZlIGl0ZXJhdG9ycwpmKFIsUywhMCksCi8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lcwpufHxzKFIsZCl8fGEoUixkLHkpKSwKLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgpPJiZNJiYidmFsdWVzIiE9PU0ubmFtZSYmKFA9ITAsTD1mdW5jdGlvbigpe3JldHVybiBNLmNhbGwodGhpcyl9KSwKLy8gRGVmaW5lIGl0ZXJhdG9yCm4mJiFifHwhcCYmIVAmJmtbZF18fGEoayxkLEwpLAovLyBQbHVnIGZvciBsaWJyYXJ5CnVbdF09TCx1W1NdPXksdilpZihtPXt2YWx1ZXM6Tz9MOncoInZhbHVlcyIpLGtleXM6Zz9MOncoImtleXMiKSxlbnRyaWVzOnh9LGIpZm9yKF8gaW4gbSlfIGluIGt8fG8oayxfLG1bX10pO2Vsc2UgaShpLlAraS5GKihwfHxQKSx0LG0pO3JldHVybiBtfX0sLyogMTgxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoNDMpJiYhcig2NikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIoMTI5KSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDE4MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXIoNTgpfSwvKiAxODMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNTkpLGk9cig0NCksbz1yKDQxNSkoITEpLGE9cigxMzMpKCJJRV9QUk9UTyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9aShlKSx1PTAsYz1bXTtmb3IociBpbiBzKXIhPWEmJm4ocyxyKSYmYy5wdXNoKHIpOwovLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzCmZvcig7dC5sZW5ndGg+dTspbihzLHI9dFt1KytdKSYmKH5vKGMscil8fGMucHVzaChyKSk7cmV0dXJuIGN9fSwvKiAxODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIGFuZCBub24tZW51bWVyYWJsZSBvbGQgVjggc3RyaW5ncwp2YXIgbj1yKDc1KTsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb3RvdHlwZS1idWlsdGlucwplLmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiJTdHJpbmciPT1uKGUpP2Uuc3BsaXQoIiIpOk9iamVjdChlKX19LC8qIDE4NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyMSkuZG9jdW1lbnQ7ZS5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSwvKiAxODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDU5KSxpPXIoNzYpLG89cigxMzMpKCJJRV9QUk9UTyIpLGE9T2JqZWN0LnByb3RvdHlwZTtlLmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlKXtyZXR1cm4gZT1pKGUpLG4oZSxvKT9lW29dOiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yJiZlIGluc3RhbmNlb2YgZS5jb25zdHJ1Y3Rvcj9lLmNvbnN0cnVjdG9yLnByb3RvdHlwZTplIGluc3RhbmNlb2YgT2JqZWN0P2E6bnVsbH19LC8qIDE4NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MTcpO2Zvcih2YXIgbj1yKDIxKSxpPXIoNTgpLG89cig3NCksYT1yKDIyKSgidG9TdHJpbmdUYWciKSxzPSJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdCIuc3BsaXQoIiwiKSx1PTA7dTxzLmxlbmd0aDt1Kyspe3ZhciBjPXNbdV0sZj1uW2NdLGw9ZiYmZi5wcm90b3R5cGU7bCYmIWxbYV0mJmkobCxhLGMpLG9bY109by5BcnJheX19LC8qIDE4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBuPXIoNzUpLGk9cigyMikoInRvU3RyaW5nVGFnIiksbz0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLGE9ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGVbdF19Y2F0Y2goZSl7fX07ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIscztyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPWEodD1PYmplY3QoZSksaSkpP3I6bz9uKHQpOiJPYmplY3QiPT0ocz1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOnN9fSwvKiAxODkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yCnZhciBuPXIoMzkpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixpKXt0cnl7cmV0dXJuIGk/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2godCl7dmFyIG89ZS5yZXR1cm47dGhyb3cgdm9pZCAwIT09byYmbihvLmNhbGwoZSkpLHR9fX0sLyogMTkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvcgp2YXIgbj1yKDc0KSxpPXIoMjIpKCJpdGVyYXRvciIpLG89QXJyYXkucHJvdG90eXBlO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxvW2ldPT09ZSl9fSwvKiAxOTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTg4KSxpPXIoMjIpKCJpdGVyYXRvciIpLG89cig3NCk7ZS5leHBvcnRzPXIoMTMpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9ZSlyZXR1cm4gZVtpXXx8ZVsiQEBpdGVyYXRvciJdfHxvW24oZSldfX0sLyogMTkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCnZhciBuPXIoMzkpLGk9cig5Myksbz1yKDIyKSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09YXx8dm9pZCAwPT0ocj1uKGEpW29dKT90Omkocil9fSwvKiAxOTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuLGksbyxhPXIoNjUpLHM9cig0MjMpLHU9cigxODUpLGM9cigxMjkpLGY9cigyMSksbD1mLnByb2Nlc3MsZD1mLnNldEltbWVkaWF0ZSxwPWYuY2xlYXJJbW1lZGlhdGUseT1mLk1lc3NhZ2VDaGFubmVsLGg9Zi5EaXNwYXRjaCx2PTAsZz17fSxiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Z1tlXTtkZWxldGUgZ1tlXSx0KCl9fSxtPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTsKLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOgpkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gZ1srK3ZdPWZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwpzKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgZ1tlXX0sCi8vIE5vZGUuanMgMC44LQoicHJvY2VzcyI9PXIoNzUpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhhKGIsZSwxKSl9OmgmJmgubm93P249ZnVuY3Rpb24oZSl7aC5ub3coYShiLGUsMSkpfTp5PyhpPW5ldyB5LG89aS5wb3J0MixpLnBvcnQxLm9ubWVzc2FnZT1tLG49YShvLnBvc3RNZXNzYWdlLG8sMSkpOmYuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZi5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2YucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLG0sITEpKTpuPSJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gYygic2NyaXB0Iik/ZnVuY3Rpb24oZSl7dS5hcHBlbmRDaGlsZChjKCJzY3JpcHQiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGEoYixlLDEpLDApfSksZS5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0sLyogMTk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSwvKiAxOTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzkpLGk9cig0Miksbz1yKDEzNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYobihlKSxpKHQpJiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgcj1vLmYoZSk7cmV0dXJuKDAsci5yZXNvbHZlKSh0KSxyLnByb21pc2V9fSwvKiAxOTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjIpKCJpdGVyYXRvciIpLGk9ITE7dHJ5e3ZhciBvPVs3XVtuXSgpO28ucmV0dXJuPWZ1bmN0aW9uKCl7aT0hMH0sCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsCkFycmF5LmZyb20obyxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChlKXt9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFpKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgbz1bN10sYT1vW25dKCk7YS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6cj0hMH19LG9bbl09ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZShvKX1jYXRjaChlKXt9cmV0dXJuIHJ9fSwvKiAxOTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQzMiksX19lc01vZHVsZTohMH19LC8qIDE5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKdmFyIG49cigxODMpLGk9cigxMzUpLmNvbmNhdCgibGVuZ3RoIiwicHJvdG90eXBlIik7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLGkpfX0sLyogMTk5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NTYpLF9fZXNNb2R1bGU6ITB9fSwvKiAyMDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxMiksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTEpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxsPWYuZ2V0TG9nZ2VyKCJCdXMiKSxkPWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF9tc2dJZDogbnVtYmVyOwogIF9zdWJzY3JpcHRpb25zOiA8dXJsOiBNc2dMaXN0ZW5lcltdPgogICBfcmVzcG9uc2VUaW1lT3V0OiBudW1iZXIKICBfcmVzcG9uc2VDYWxsYmFja3M6IDx1cmwraWQ6IChtc2cpID0+IHZvaWQ+CiAgICovCmZ1bmN0aW9uIEJ1cygpeygwLGEuZGVmYXVsdCkodGhpcyxCdXMpO3ZhciBlPXRoaXM7ZS5fbXNnSWQ9MCxlLl9zdWJzY3JpcHRpb25zPXt9LGUuX3Jlc3BvbnNlVGltZU91dD0xNWUzLC8vZGVmYXVsdCB0byAzcwplLl9yZXNwb25zZUNhbGxiYWNrcz17fSxlLl9yZWdpc3RlckV4dGVybmFsTGlzdGVuZXIoKX0vKioKICAqIFJlZ2lzdGVyIGxpc3RlbmVyIHRvIHJlY2VpdmUgbWVzc2FnZSB3aGVuICJtc2cudG8gPT09IHVybCIuCiAgKiBTcGVjaWFsIHVybCAiKiIgZm9yIGRlZmF1bHQgbGlzdGVuZXIgaXMgYWNjZXB0ZWQgdG8gaW50ZXJjZXB0IGFsbCBtZXNzYWdlcy4KICAqIEBwYXJhbSB7VVJMfSB1cmwgQWRkcmVzcyB0byBpbnRlcmNlcHQsIHRoYSBpcyBpbiB0aGUgbWVzc2FnZSAidG8iCiAgKiBAcGFyYW0ge0xpc3RlbmVyfSBsaXN0ZW5lciBsaXN0ZW5lcgogICogQHJldHVybiB7TXNnTGlzdGVuZXJ9IGluc3RhbmNlIG9mIE1zZ0xpc3RlbmVyCiAgKi8KcmV0dXJuKDAsdS5kZWZhdWx0KShCdXMsW3trZXk6ImFkZExpc3RlbmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1uZXcgcChyLl9zdWJzY3JpcHRpb25zLGUsdCksaT1yLl9zdWJzY3JpcHRpb25zW2VdO3JldHVybiBpfHwoaT1bXSxyLl9zdWJzY3JpcHRpb25zW2VdPWkpLGkucHVzaChuKSxufX0se2tleToiYWRkUmVzcG9uc2VMaXN0ZW5lciIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW2UrdF09cn19LHtrZXk6InJlbW92ZVJlc3BvbnNlTGlzdGVuZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7ZGVsZXRlIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW2UrdF19fSx7a2V5OiJyZW1vdmVBbGxMaXN0ZW5lcnNPZiIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX3N1YnNjcmlwdGlvbnNbZV19fSx7a2V5OiJiaW5kIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcyxpPXRoaXM7cmV0dXJue3RoaXNMaXN0ZW5lcjppLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24oZSl7ci5wb3N0TWVzc2FnZShlKX0pLHRhcmdldExpc3RlbmVyOnIuYWRkTGlzdGVuZXIodCxmdW5jdGlvbihlKXtpLnBvc3RNZXNzYWdlKGUpfSksdW5iaW5kOmZ1bmN0aW9uKCl7bi50aGlzTGlzdGVuZXIucmVtb3ZlKCksbi50YXJnZXRMaXN0ZW5lci5yZW1vdmUoKX19fX0se2tleToiX3B1Ymxpc2hPbkRlZmF1bHQiLHZhbHVlOmZ1bmN0aW9uKGUpewovL2lzIHRoZXJlIGFueSAiKiIgKGRlZmF1bHQpIGxpc3RlbmVycz8KdmFyIHQ9dGhpcy5fc3Vic2NyaXB0aW9uc1siKiJdO3QmJnRoaXMuX3B1Ymxpc2hPbih0LGUpfX0se2tleToiX3B1Ymxpc2hPbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5fY2FsbGJhY2sodCl9KX19LHtrZXk6Il9yZXNwb25zZUNhbGxiYWNrIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Ci8vYXV0b21hdGljIG1hbmFnZW1lbnQgb2YgcmVzcG9uc2UgaGFuZGxlcnMKaWYodCl7dmFyIG49ZS5mcm9tK2UuaWQ7ci5fcmVzcG9uc2VDYWxsYmFja3Nbbl09dCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9ci5fcmVzcG9uc2VDYWxsYmFja3Nbbl07aWYoZGVsZXRlIHIuX3Jlc3BvbnNlQ2FsbGJhY2tzW25dLHQpe3Qoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGJvZHk6e2NvZGU6NDA4LGRlc2M6IlJlc3BvbnNlIHRpbWVvdXQhIix2YWx1ZTplfX0pfX0sci5fcmVzcG9uc2VUaW1lT3V0KX19fSx7a2V5OiJfb25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZigicmVzcG9uc2UiPT09ZS50eXBlKXt2YXIgcj1lLnRvK2UuaWQsbj10Ll9yZXNwb25zZUNhbGxiYWNrc1tyXTtpZihlLmJvZHkuY29kZT49MjAwJiYKLy9pZiBpdCdzIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2UsIGRvbid0IGRlbGV0ZSByZXNwb25zZSBsaXN0ZW5lcgpkZWxldGUgdC5fcmVzcG9uc2VDYWxsYmFja3Nbcl0sbilyZXR1cm4gbihlKSwhMH1yZXR1cm4hMX19LHtrZXk6Il9vbk1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXQuX29uUmVzcG9uc2UoZSkpe3ZhciByPXQuX3N1YnNjcmlwdGlvbnNbZS50b107cj90Ll9wdWJsaXNoT24ocixlKTp0Ll9wdWJsaXNoT25EZWZhdWx0KGUpfX19LHtrZXk6Il9nZW5JZCIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vVE9ETzogaG93IGRvIHdlIG1hbmFnZSBtZXNzYWdlIElEJ3M/IFNob3VsZCBpdCBiZSBhIGdsb2JhbCBydW50aW1lIGNvdW50ZXIsIG9yIHBlciBVUkwgYWRkcmVzcz8KLy9HbG9iYWwgY291bnRlciB3aWxsIG5vdCB3b3JrLCBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbXVsdGlwbGUgTWluaUJ1cyBpbnN0YW5jZXMhCi8vUGVyIFVSTCwgY2FuIGJlIGEgbG90IG9mIGRhdGEgdG8gbWFpbnRhaW4hCi8vTWF5YmUgYSBjb3VudGVyIHBlciBNaW5pQnVzIGluc3RhbmNlLiBUaGlzIGlzIHRoZSBhc3N1bWVkIHNvbHV0aW9uIGZvciBub3cuCmUuaWQmJjAhPT1lLmlkfHwodGhpcy5fbXNnSWQrKyxlLmlkPXRoaXMuX21zZ0lkKX19LHtrZXk6InBvc3RNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe319LHtrZXk6InBvc3RNZXNzYWdlV2l0aFJldHJpZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLG89MCxhPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24odCxpKXtuLnBvc3RNZXNzYWdlKGUsZnVuY3Rpb24obil7NDA4PT09bi5ib2R5LmNvZGV8fDUwMD09PW4uYm9keS5jb2RlP2koKToobC5pbmZvKCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIG1zZyBkZWxpdmVyZWQ6ICIsZSkscihuKSx0KCkpfSl9KX07IWZ1bmN0aW9uIHRyeUFnYWluKCl7YSgpLnRoZW4oZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7aWYobC53YXJuKCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIE1lc3NhZ2UgQm91bmNlZCAocmV0cnkgIitvKyIpOiAnIixlKSwhKG8rKzx0KSl7dmFyIHI9IltFcnJvcl0gTWVzc2FnZSBCb3VuY2VkIChkZWxpdmVyeSBhdHRlbXB0cyAiK3QrIik6ICciO3Rocm93IG5ldyBFcnJvcihyK2UpfXRyeUFnYWluKCl9KX0oKX19LHtrZXk6Il9vblBvc3RNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt9fSx7a2V5OiJfcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyIix2YWx1ZTpmdW5jdGlvbigpe319XSksQnVzfSgpLHA9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX3N1YnNjcmlwdGlvbnM6IDxzdHJpbmc6IE1zZ0xpc3RlbmVyW10+OwogIF91cmw6IHN0cmluZzsKICBfY2FsbGJhY2s6IChtc2cpID0+IHZvaWQ7CiAgKi8KZnVuY3Rpb24gTXNnTGlzdGVuZXIoZSx0LHIpeygwLGEuZGVmYXVsdCkodGhpcyxNc2dMaXN0ZW5lcik7dmFyIG49dGhpcztuLl9zdWJzY3JpcHRpb25zPWUsbi5fdXJsPXQsbi5fY2FsbGJhY2s9cn1yZXR1cm4oMCx1LmRlZmF1bHQpKE1zZ0xpc3RlbmVyLFt7a2V5OiJyZW1vdmUiLC8qKgogICAgICogUmVtb3ZlIHRoaXMgbGlzdGVuZXIgZnJvbSB0aGUgQnVzCiAgICAgKi8KdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fc3Vic2NyaXB0aW9uc1tlLl91cmxdO2lmKHQpe3ZhciByPXQuaW5kZXhPZihlKTt0LnNwbGljZShyLDEpLAovL2lmIHRoZXJlIGFyZSBubyBsaXN0ZW5lcnMsIHJlbW92ZSB0aGUgc3Vic2NyaXB0aW9uIGVudGlyZWx5LgowPT09dC5sZW5ndGgmJmRlbGV0ZSBlLl9zdWJzY3JpcHRpb25zW2UuX3VybF19fX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxNc2dMaXN0ZW5lcn0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAyMDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyB2ZXJzaW9uOiAwLjcuMgovLyBkYXRlOiBXZWQgTm92IDA4IDIwMTcgMTA6NTQ6MTIgR01UKzAwMDAgKFdFVCkKLy8gbGljZW5jZTogCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwohZnVuY3Rpb24odCxyKXtlLmV4cG9ydHM9cigpfSgwLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18ocil7aWYodFtyXSlyZXR1cm4gdFtyXS5leHBvcnRzO3ZhciBuPXRbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3JdLmNhbGwobi5leHBvcnRzLG4sbi5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pLG4ubD0hMCxuLmV4cG9ydHN9dmFyIHQ9e307cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18ubT1lLF9fd2VicGFja19yZXF1aXJlX18uYz10LF9fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihlLHQscil7X193ZWJwYWNrX3JlcXVpcmVfXy5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpyfSl9LF9fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5kKHQsImEiLHQpLHR9LF9fd2VicGFja19yZXF1aXJlX18ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5wPSIiLF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zPTE3OSl9KHswOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPXt2ZXJzaW9uOiIyLjUuMSJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPXIpfSwxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPXIpfSwxMDpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQwKSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5kZWZhdWx0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBuJiYobi53cml0YWJsZT0hMCksKDAsaS5kZWZhdWx0KShlLG4ua2V5LG4pfX1yZXR1cm4gZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0JiZkZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLHQpLHImJmRlZmluZVByb3BlcnRpZXMoZSxyKSxlfX0oKX0sMTE6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LDExNzpmdW5jdGlvbihlLHQpeyFmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBPYnNlcnZlcihlLHQscixuLGksbyl7ZnVuY3Rpb24gZGVsaXZlcihlLG4pe2lmKGRlbGl2ZXIuZGVsYXk9biwhZGVsaXZlci5wYXVzZSYmcy5jaGFuZ2VzZXQubGVuZ3RoPjApe2lmKCFlKXt2YXIgaT1zLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wfSk7aS5sZW5ndGg+MCYmdChpKX1zLmNoYW5nZXNldD1bXX19dmFyIGEscz10aGlzO3JldHVybiBkZWxpdmVyLnBhdXNlPWksZGVsaXZlci5kZWxheT1vLHMuZ2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIl9fb2JzZXJ2ZXJfXyI9PT10P3M6InVub2JzZXJ2ZSI9PT10P2Z1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC51bm9ic2VydmUoZSksZX06ImRlbGl2ZXIiPT09dD9kZWxpdmVyOmVbdF19LHMudGFyZ2V0PWUscy5jaGFuZ2VzZXQ9W10scy50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19ffHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJzX18iLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMSx2YWx1ZTpbXX0pKSxzLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaCh0KSxzLnRhcmdldC5fX29ic2VydmVyc19fLnB1c2godGhpcyksYT1uZXcgUHJveHkoZSxzKSxkZWxpdmVyKCExLG8pLGF9T2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBQcm94eXx8KE9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KG51bGwsImRlbGl2ZXIiKX0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQscil7dmFyIG49ZVt0XSxpPXZvaWQgMD09PW4/ImFkZCI6InVwZGF0ZSI7aWYoZVt0XT1yLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYoIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoaSk+PTApKXt2YXIgbz17b2JqZWN0OmUsbmFtZTp0LHR5cGU6aX0sYT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLHM9dGhpcy5kZWxpdmVyKCk7InVwZGF0ZSI9PT1pJiYoby5vbGRWYWx1ZT1uKSx0aGlzLmNoYW5nZXNldC5wdXNoKG8pLGEmJnMoITEsIm51bWJlciI9PXR5cGVvZiBzLmRlbGF5P3MuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lW3RdO2lmKGRlbGV0ZSBlW3RdLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigiZGVsZXRlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZToiZGVsZXRlIixvbGRWYWx1ZTpyfSxpPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsbz10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLGkmJm8oITEsIm51bWJlciI9PXR5cGVvZiBvLmRlbGF5P28uZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24oZSx0LHIpe2lmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsciksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJyZWNvbmZpZ3VyZSIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZTp0LHR5cGU6InJlY29uZmlndXJlIn0saT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG89dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxpJiZvKCExLCJudW1iZXIiPT10eXBlb2Ygby5kZWxheT9vLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldFByb3RvdHlwZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKE9iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigic2V0UHJvdG90eXBlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOiJfX3Byb3RvX18iLHR5cGU6InNldFByb3RvdHlwZSIsb2xkVmFsdWU6cn0saT0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG89dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaChuKSxpJiZvKCExLCJudW1iZXIiPT10eXBlb2Ygby5kZWxheT9vLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zPWZ1bmN0aW9uKGUpe2lmKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhlKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApe3ZhciB0PXtvYmplY3Q6ZSx0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyJ9LHI9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxuPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2godCksciYmbighMSwibnVtYmVyIj09dHlwZW9mIG4uZGVsYXk/bi5kZWxheToxMCl9cmV0dXJuITB9LE9iamVjdC5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4saSxvKXtyZXR1cm4gbmV3IE9ic2VydmVyKGUsdCxyLG4saSxvKX0sT2JqZWN0LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe2lmKGUuX19vYnNlcnZlckNhbGxiYWNrc19fKXtpZighdClyZXR1cm4gZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyQ2FsbGJhY2tzX18ubGVuZ3RoKSx2b2lkIGUuX19vYnNlcnZlcnNfXy5zcGxpY2UoMCxlLl9fb2JzZXJ2ZXJzX18ubGVuZ3RoKTtlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKHIsbil7dD09PXImJihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UobiwxKSxkZWxldGUgZS5fX29ic2VydmVyc19fW25dLmNhbGxiYWNrLGUuX19vYnNlcnZlcnNfXy5zcGxpY2UobiwxKSl9KX19LEFycmF5Lm9ic2VydmU9ZnVuY3Rpb24oZSx0LHIsbixpLG8pe2lmKCEoZSBpbnN0YW5jZW9mIEFycmF5fHxBcnJheS5pc0FycmF5KGUpKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCBhcmd1bWVudCB0byBBcnJheS5vYnNlcnZlciBpcyBub3QgYW4gQXJyYXkiKTtyPXJ8fFsiYWRkIiwidXBkYXRlIiwiZGVsZXRlIiwic3BsaWNlIl07dmFyIGE9bmV3IFByb3h5KGUse2dldDpmdW5jdGlvbih0LG4pe3JldHVybiJ1bm9ic2VydmUiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gZT9PYmplY3QudW5vYnNlcnZlKHQsZSk6dC51bm9ic2VydmUoKX06InNwbGljZSI9PT1uP2Z1bmN0aW9uKG4saSl7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIGkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgdHdvIGFyZ3VtZW50cyB0byBBcnJheSBzcGxpY2UgYXJlIG5vdCBudW1iZXIsIG51bWJlciIpO3ZhciBvPXRoaXMuc2xpY2UobixuK2kpLGE9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50cy5sZW5ndGgtMjowLHU9e29iamVjdDplLHR5cGU6InNwbGljZSIsaW5kZXg6bixyZW1vdmVkOm8sYWRkZWRDb3VudDphfTtpZih0LnNwbGljZS5hcHBseSh0LGFyZ3VtZW50cyksci5pbmRleE9mKCJzcGxpY2UiKT49MCl7dmFyIG49MD09PXMuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5sZW5ndGgsYz1zLl9fb2JzZXJ2ZXJfXy5kZWxpdmVyKCk7cy5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2godSksbiYmYyghMSwibnVtYmVyIj09dHlwZW9mIGMuZGVsYXk/Yy5kZWxheToxMCl9fToicHVzaCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGUpfToicG9wIj09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgtMSwxKX06InVuc2hpZnQiPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwwLGUpfToic2hpZnQiPT09bj9mdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGljZSgwLDEpfTp0W25dfX0pLHM9T2JqZWN0Lm9ic2VydmUoYSxmdW5jdGlvbihlKXt2YXIgbj1lLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4ibGVuZ3RoIiE9PWUubmFtZSYmImFkZCIhPT1lLm5hbWUmJighcnx8ci5pbmRleE9mKGUudHlwZSk+PTApfSk7bi5sZW5ndGg+MCYmdChuKX0scixuLGksbyk7cmV0dXJuIHN9LEFycmF5LnVub2JzZXJ2ZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnVub2JzZXJ2ZSh0KX0pLE9iamVjdC5kZWVwT2JzZXJ2ZT1mdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gcmVvYnNlcnZlKGUscil7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihpKXtpZigoIm9iamVjdCI9PT1uKGVbaV0pfHwiYXJyYXkiPT09bihlW2ldKSkmJiFlW2ldLmhhc093blByb3BlcnR5KCJfX29ic2VydmVyc19fIikpe3ZhciBvPXIuc2xpY2UoMCk7by5wdXNoKGkpLGVbaV09T2JqZWN0LmRlZXBPYnNlcnZlKGVbaV0sdCxvKX19KX1yPXJ8fFtdO3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkubWF0Y2goL1xzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gcmVvYnNlcnZlKGUsciksT2JqZWN0Lm9ic2VydmUoZSxmdW5jdGlvbihlKXtmdW5jdGlvbiByZWN1cnNlKGUsdCxyLGksbyl7aWYoaSBpbnN0YW5jZW9mIE9iamVjdClPYmplY3Qua2V5cyhpKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKCFyfHxyW2FdIT09aVthXSl7dmFyIHM9ciYmdm9pZCAwIT09clthXT9yW2FdOnZvaWQgMCx1PXZvaWQgMD09PXM/ImFkZCI6InVwZGF0ZSIsYz1vKyIuIithO24ucHVzaCh7bmFtZTplLG9iamVjdDp0LHR5cGU6dSxvbGRWYWx1ZTpzLG5ld1ZhbHVlOmlbYV0sa2V5cGF0aDpjfSkscmVjdXJzZShlLHQscyxpW2FdLGMpfX0pO2Vsc2UgaWYociBpbnN0YW5jZW9mIE9iamVjdCl7dmFyIGE9T2JqZWN0LmtleXMocik7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBzPW51bGw9PT1pPyJ1cGRhdGUiOiJkZWxldGUiLHU9bysiLiIrYTtuLnB1c2goe25hbWU6ZSxvYmplY3Q6dCx0eXBlOnMsb2xkVmFsdWU6clthXSxuZXdWYWx1ZTppLGtleXBhdGg6dX0pLHJlY3Vyc2UoZSx0LHJbYV0sdm9pZCAwLHUpfSl9fXZhciBuPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD0oci5sZW5ndGg+MD9yLmpvaW4oIi4iKSsiLiI6IiIpK2UubmFtZTsidXBkYXRlIiE9PWUudHlwZSYmImFkZCIhPT1lLnR5cGV8fHJlb2JzZXJ2ZShlLm9iamVjdCxyKSxuLnB1c2goe25hbWU6ZS5uYW1lLG9iamVjdDplLm9iamVjdCx0eXBlOmUudHlwZSxvbGRWYWx1ZTplLm9sZFZhbHVlLG5ld1ZhbHVlOmUub2JqZWN0W2UubmFtZV0sa2V5cGF0aDp0fSkscmVjdXJzZShlLm5hbWUsZS5vYmplY3QsZS5vbGRWYWx1ZSxlLm9iamVjdFtlLm5hbWVdLHQpfSksdChuKX0pfX0oKX0sMTQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTcpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixpKXtyZXR1cm4gZS5jYWxsKHQscixuLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sMTU6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSwxNzpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIGZ1bmN0aW9uISIpO3JldHVybiBlfX0sMTc5OmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuV2F0Y2hpbmdZb3U9dm9pZCAwO3ZhciBuPXIoMTgwKSxpPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obik7dC5XYXRjaGluZ1lvdT1pLmRlZmF1bHR9LDE4MDpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTApLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKTtyKDExNyk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBXYXRjaGluZ1lvdSgpeygwLGkuZGVmYXVsdCkodGhpcyxXYXRjaGluZ1lvdSksdGhpcy5fd2F0Y2hpbmc9e30sdGhpcy5fb2JzZXJ2ZXJzPVtdfXJldHVybigwLGEuZGVmYXVsdCkoV2F0Y2hpbmdZb3UsW3trZXk6IndhdGNoIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdO3JldHVybiB0aGlzLl93YXRjaGluZ1tlXT1uP09iamVjdC5kZWVwT2JzZXJ2ZSh0LGZ1bmN0aW9uKHQpe3QuZXZlcnkoZnVuY3Rpb24odCl7ci5fZmlyZUV2ZW50KGUsdCl9KX0pOk9iamVjdC5vYnNlcnZlKHQsZnVuY3Rpb24odCl7dC5ldmVyeShmdW5jdGlvbih0KXtyLl9maXJlRXZlbnQoZSx0KX0pfSksdGhpcy5fd2F0Y2hpbmdbZV19fSx7a2V5OiJvYnNlcnZlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX29ic2VydmVycy5wdXNoKHtrZXk6ZSxjYWxsYmFjazp0fSl9fSx7a2V5OiJfZmlyZUV2ZW50Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX29ic2VydmVycy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5PT09ZX0pLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5jYWxsYmFjayh0KX0pfX1dKSxXYXRjaGluZ1lvdX0oKTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwxOTpmdW5jdGlvbihlLHQscil7dmFyIG49cig3KSxpPXIoMSkuZG9jdW1lbnQsbz1uKGkpJiZuKGkuY3JlYXRlRWxlbWVudCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBvP2kuY3JlYXRlRWxlbWVudChlKTp7fX19LDIwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLGk7aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKGk9ci5jYWxsKGUpKSlyZXR1cm4gaTtpZigiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7aWYoIXQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihpPXIuY2FsbChlKSkpcmV0dXJuIGk7dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LDI2OmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoMykmJiFyKDExKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkocigxOSkoImRpdiIpLCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwzOmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoMTEpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sNDpmdW5jdGlvbihlLHQscil7dmFyIG49cigxKSxpPXIoMCksbz1yKDE0KSxhPXIoOSkscz1mdW5jdGlvbihlLHQscil7dmFyIHUsYyxmLGw9ZSZzLkYsZD1lJnMuRyxwPWUmcy5TLHk9ZSZzLlAsaD1lJnMuQix2PWUmcy5XLGc9ZD9pOmlbdF18fChpW3RdPXt9KSxiPWcucHJvdG90eXBlLG09ZD9uOnA/blt0XTooblt0XXx8e30pLnByb3RvdHlwZTtkJiYocj10KTtmb3IodSBpbiByKShjPSFsJiZtJiZ2b2lkIDAhPT1tW3VdKSYmdSBpbiBnfHwoZj1jP21bdV06clt1XSxnW3VdPWQmJiJmdW5jdGlvbiIhPXR5cGVvZiBtW3VdP3JbdV06aCYmYz9vKGYsbik6diYmbVt1XT09Zj9mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0LHIsbil7aWYodGhpcyBpbnN0YW5jZW9mIGUpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyBlO2Nhc2UgMTpyZXR1cm4gbmV3IGUodCk7Y2FzZSAyOnJldHVybiBuZXcgZSh0LHIpfXJldHVybiBuZXcgZSh0LHIsbil9cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtyZXR1cm4gdC5wcm90b3R5cGU9ZS5wcm90b3R5cGUsdH0oZik6eSYmImZ1bmN0aW9uIj09dHlwZW9mIGY/byhGdW5jdGlvbi5jYWxsLGYpOmYseSYmKChnLnZpcnR1YWx8fChnLnZpcnR1YWw9e30pKVt1XT1mLGUmcy5SJiZiJiYhYlt1XSYmYShiLHUsZikpKX07cy5GPTEscy5HPTIscy5TPTQscy5QPTgscy5CPTE2LHMuVz0zMixzLlU9NjQscy5SPTEyOCxlLmV4cG9ydHM9c30sNDA6ZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQxKSxfX2VzTW9kdWxlOiEwfX0sNDE6ZnVuY3Rpb24oZSx0LHIpe3IoNDIpO3ZhciBuPXIoMCkuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZGVmaW5lUHJvcGVydHkoZSx0LHIpfX0sNDI6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCk7bihuLlMrbi5GKiFyKDMpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0eTpyKDUpLmZ9KX0sNTpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KSxpPXIoMjYpLG89cigyMCksYT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPXIoMyk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxyKXtpZihuKGUpLHQ9byh0LCEwKSxuKHIpLGkpdHJ5e3JldHVybiBhKGUsdCxyKX1jYXRjaChlKXt9aWYoImdldCJpbiByfHwic2V0ImluIHIpdGhyb3cgVHlwZUVycm9yKCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEiKTtyZXR1cm4idmFsdWUiaW4gciYmKGVbdF09ci52YWx1ZSksZX19LDY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LDc6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP251bGwhPT1lOiJmdW5jdGlvbiI9PXR5cGVvZiBlfX0sODpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuX19lc01vZHVsZT0hMCx0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX19LDk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNSksaT1yKDE1KTtlLmV4cG9ydHM9cigzKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsaSgxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19fSl9KX0sLyogMjAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1mdW5jdGlvbigpe2Z1bmN0aW9uIEFsbG93T3ZlcnJpZGVzKCl7KDAsaS5kZWZhdWx0KSh0aGlzLEFsbG93T3ZlcnJpZGVzKX1yZXR1cm4oMCxhLmRlZmF1bHQpKEFsbG93T3ZlcnJpZGVzLFt7a2V5OiJjb21iaW5lIiwvKioKICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBhdXRob3JpemF0aW9uIGRlY2lzaW9ucywgcHJpb3JpdGl6ZXMgYSBwb3NpdGl2ZSBvbmUuCiAgICAqIEBwYXJhbSAgICB7Ym9vbGVhbltdfSAgIGRlY2lzaW9ucwogICAgKiBAcmV0dXJucyAge2Jvb2xlYW59CiAgICAqLwp2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4tMSE9PWUuaW5kZXhPZighMCl8fC0xPT09ZS5pbmRleE9mKCExKSYmIk5vdCBBcHBsaWNhYmxlIn19XSksQWxsb3dPdmVycmlkZXN9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1mdW5jdGlvbigpe2Z1bmN0aW9uIEJsb2NrT3ZlcnJpZGVzKCl7KDAsaS5kZWZhdWx0KSh0aGlzLEJsb2NrT3ZlcnJpZGVzKX1yZXR1cm4oMCxhLmRlZmF1bHQpKEJsb2NrT3ZlcnJpZGVzLFt7a2V5OiJjb21iaW5lIiwvKioKICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBhdXRob3Jpc2F0aW9uIGRlY2lzaW9ucywgcHJpb3JpdGlzZXMgYSBuZWdhdGl2ZSBvbmUuCiAgICAqIEBwYXJhbSAgICB7Ym9vbGVhbltdfSAgIGRlY2lzaW9ucwogICAgKiBAcmV0dXJucyAge2Jvb2xlYW59CiAgICAqLwp2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4tMT09PWUuaW5kZXhPZighMSkmJigtMSE9PWUuaW5kZXhPZighMCl8fCJOb3QgQXBwbGljYWJsZSIpfX1dKSxCbG9ja092ZXJyaWRlc30oKTt0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAyMDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRmlyc3RBcHBsaWNhYmxlKCl7KDAsaS5kZWZhdWx0KSh0aGlzLEZpcnN0QXBwbGljYWJsZSl9cmV0dXJuKDAsYS5kZWZhdWx0KShGaXJzdEFwcGxpY2FibGUsW3trZXk6ImNvbWJpbmUiLC8qKgogICAgKiBHaXZlbiBhbiBhcnJheSBvZiBpbmRpdmlkdWFsIGF1dGhvcmlzYXRpb24gZGVjaXNpb25zLCByZXR1cm5zIHRoZSBmaXJzdCBvbmUgZGlmZmVyZW50IGZyb20gJ05vdCBBcHBsaWNhYmxlJywgZWl0aGVyIHBvc2l0aXZlIG9yIG5lZ2F0aXZlLgogICAgKiBAcGFyYW0gICAge2Jvb2xlYW5bXX0gICAgIGRlY2lzaW9ucwogICAgKiBAcmV0dXJucyAge2Jvb2xlYW59CiAgICAqLwp2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlpZigiTm90IEFwcGxpY2FibGUiIT09ZVt0XSlyZXR1cm4gZVt0XTtyZXR1cm4iTm90IEFwcGxpY2FibGUifX1dKSxGaXJzdEFwcGxpY2FibGV9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0OTUpLF9fZXNNb2R1bGU6ITB9fSwvKiAyMDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMTEpLHU9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShzKSxjPXUuZ2V0TG9nZ2VyKCJTeW5TdWJzY3JpcHRpb24iKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU3Vic2NyaXB0aW9uKGUsdCxyLG4sbyl7KDAsaS5kZWZhdWx0KSh0aGlzLFN1YnNjcmlwdGlvbik7dmFyIGE9dGhpcyxzPXIrIi9jaGlsZHJlbi8iLHU9cisiL2NoYW5nZXMiOwovL3Byb2Nlc3MgZGVsZXRlIG1lc3NhZ2UKYS5fZGVsZXRlTGlzdGVuZXI9ZS5hZGRMaXN0ZW5lcih1LGZ1bmN0aW9uKG4pe2lmKCJkZWxldGUiPT09bi50eXBlKXtjLmxvZygiU3Vic2NyaXB0aW9uLURFTEVURTogIixuKTsKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIGFsbCBzdWJzY3JpYmVycwp2YXIgaT17dHlwZToiZGVsZXRlIixmcm9tOm4uZnJvbSx0bzp0LGJvZHk6e2lkZW50aXR5Om4uYm9keS5pZGVudGl0eSxyZXNvdXJjZTpyfX07Ci8vc2VuZCBkZWxldGUgdG8gaHlwZXJ0eQplLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24oZSl7Yy5sb2coIlN1YnNjcmlwdGlvbi1ERUxFVEUtUkVQTFk6ICIsZSksMjAwPT09ZS5ib2R5LmNvZGUmJmEuX3JlbGVhc2VMaXN0ZW5lcnMoKX0pfX0pLAovL2FkZCBjaGFuZ2UgcHVibGlzaCBhZGRyZXNzIG9yIGZvcndhcmQKYS5fY2hhbmdlTGlzdGVuZXI9bz9lLmFkZFB1Ymxpc2godSk6ZS5hZGRGb3J3YXJkKHUsdCksYS5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sYy5sb2coIltTdWJzY3JpcHRpb25dIC0gY2hpbGRJRCIsbiksbi5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXMrcjtjLmxvZygiW1N1YnNjcmlwdGlvbl0gLSBjaGlsZElEIixzLG4scik7Ci8vYWRkIGNoaWxkcmVuIHB1Ymxpc2ggYWRkcmVzcwp2YXIgaT1lLmFkZFB1Ymxpc2gobik7Ci8vYWRkIHNlbGYgZm9yd2FyZCBpZiBhbiBvYnNlcnZlcgppZihhLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGkpLCFvKXt2YXIgdT1lLmFkZEZvcndhcmQobix0KTthLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKHUpfX0pfXJldHVybigwLGEuZGVmYXVsdCkoU3Vic2NyaXB0aW9uLFt7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2RlbGV0ZUxpc3RlbmVyLnJlbW92ZSgpLGUuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpLGUuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5yZW1vdmUoKX0pfX1dKSxTdWJzY3JpcHRpb259KCk7dC5kZWZhdWx0PWYsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjA3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDIwOCksZS5leHBvcnRzPXIoNDEwKX0sLyogMjA4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovCihmdW5jdGlvbihlKXtmdW5jdGlvbiBkZWZpbmUoZSxyLG4pe2Vbcl18fE9iamVjdFt0XShlLHIse3dyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx2YWx1ZTpufSl9aWYocigyMDkpLHIoNDA2KSxyKDQwNyksZS5fYmFiZWxQb2x5ZmlsbCl0aHJvdyBuZXcgRXJyb3IoIm9ubHkgb25lIGluc3RhbmNlIG9mIGJhYmVsLXBvbHlmaWxsIGlzIGFsbG93ZWQiKTtlLl9iYWJlbFBvbHlmaWxsPSEwO3ZhciB0PSJkZWZpbmVQcm9wZXJ0eSI7ZGVmaW5lKFN0cmluZy5wcm90b3R5cGUsInBhZExlZnQiLCIiLnBhZFN0YXJ0KSxkZWZpbmUoU3RyaW5nLnByb3RvdHlwZSwicGFkUmlnaHQiLCIiLnBhZEVuZCksInBvcCxyZXZlcnNlLHNoaWZ0LGtleXMsdmFsdWVzLGVudHJpZXMsaW5kZXhPZixldmVyeSxzb21lLGZvckVhY2gsbWFwLGZpbHRlcixmaW5kLGZpbmRJbmRleCxpbmNsdWRlcyxqb2luLHNsaWNlLGNvbmNhdCxwdXNoLHNwbGljZSx1bnNoaWZ0LHNvcnQsbGFzdEluZGV4T2YscmVkdWNlLHJlZHVjZVJpZ2h0LGNvcHlXaXRoaW4sZmlsbCIuc3BsaXQoIiwiKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1tdW2VdJiZkZWZpbmUoQXJyYXksZSxGdW5jdGlvbi5jYWxsLmJpbmQoW11bZV0pKX0pfSkuY2FsbCh0LHIoMTQ0KSl9LC8qIDIwOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigyMTApLHIoMjEyKSxyKDIxMykscigyMTQpLHIoMjE1KSxyKDIxNikscigyMTcpLHIoMjE4KSxyKDIxOSkscigyMjApLHIoMjIxKSxyKDIyMikscigyMjMpLHIoMjI0KSxyKDIyNSkscigyMjYpLHIoMjI4KSxyKDIyOSkscigyMzApLHIoMjMxKSxyKDIzMikscigyMzMpLHIoMjM0KSxyKDIzNSkscigyMzYpLHIoMjM3KSxyKDIzOCkscigyMzkpLHIoMjQwKSxyKDI0MSkscigyNDIpLHIoMjQzKSxyKDI0NCkscigyNDUpLHIoMjQ2KSxyKDI0NykscigyNDgpLHIoMjQ5KSxyKDI1MCkscigyNTEpLHIoMjUyKSxyKDI1MykscigyNTQpLHIoMjU1KSxyKDI1NikscigyNTcpLHIoMjU4KSxyKDI1OSkscigyNjApLHIoMjYxKSxyKDI2MikscigyNjMpLHIoMjY0KSxyKDI2NSkscigyNjYpLHIoMjY3KSxyKDI2OCkscigyNjkpLHIoMjcwKSxyKDI3MSkscigyNzIpLHIoMjczKSxyKDI3NCkscigyNzUpLHIoMjc2KSxyKDI3NykscigyNzgpLHIoMjc5KSxyKDI4MCkscigyODEpLHIoMjgyKSxyKDI4MykscigyODQpLHIoMjg1KSxyKDI4NikscigyODcpLHIoMjg4KSxyKDI5MCkscigyOTEpLHIoMjkzKSxyKDI5NCkscigyOTUpLHIoMjk2KSxyKDI5NykscigyOTgpLHIoMjk5KSxyKDMwMSkscigzMDIpLHIoMzAzKSxyKDMwNCkscigzMDUpLHIoMzA2KSxyKDMwNykscigzMDgpLHIoMzA5KSxyKDMxMCkscigzMTEpLHIoMzEyKSxyKDMxMykscigxMjEpLHIoMzE0KSxyKDMxNSkscigxNjMpLHIoMzE2KSxyKDMxNykscigzMTgpLHIoMzE5KSxyKDMyMCkscigxNjYpLHIoMTY4KSxyKDE2OSkscigzMjEpLHIoMzIyKSxyKDMyMykscigzMjQpLHIoMzI1KSxyKDMyNikscigzMjcpLHIoMzI4KSxyKDMyOSkscigzMzApLHIoMzMxKSxyKDMzMikscigzMzMpLHIoMzM0KSxyKDMzNSkscigzMzYpLHIoMzM3KSxyKDMzOCkscigzMzkpLHIoMzQwKSxyKDM0MSkscigzNDIpLHIoMzQzKSxyKDM0NCkscigzNDUpLHIoMzQ2KSxyKDM0NykscigzNDgpLHIoMzQ5KSxyKDM1MCkscigzNTEpLHIoMzUyKSxyKDM1MykscigzNTQpLHIoMzU1KSxyKDM1NikscigzNTcpLHIoMzU4KSxyKDM1OSkscigzNjApLHIoMzYxKSxyKDM2MikscigzNjMpLHIoMzY0KSxyKDM2NSkscigzNjYpLHIoMzY3KSxyKDM2OCkscigzNjkpLHIoMzcwKSxyKDM3MSkscigzNzIpLHIoMzczKSxyKDM3NCkscigzNzUpLHIoMzc2KSxyKDM3NykscigzNzgpLHIoMzc5KSxyKDM4MCkscigzODEpLHIoMzgyKSxyKDM4MykscigzODQpLHIoMzg1KSxyKDM4NikscigzODcpLHIoMzg4KSxyKDM4OSkscigzOTApLHIoMzkxKSxyKDM5MikscigzOTMpLHIoMzk0KSxyKDM5NSkscigzOTYpLHIoMzk3KSxyKDM5OCkscigzOTkpLHIoNDAwKSxyKDQwMSkscig0MDIpLHIoNDAzKSxyKDQwNCkscig0MDUpLGUuZXhwb3J0cz1yKDMwKX0sLyogMjEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW0KdmFyIG49cig0KSxpPXIoMTcpLG89cig4KSxhPXIoMCkscz1yKDE5KSx1PXIoNDApLktFWSxjPXIoNSksZj1yKDc4KSxsPXIoNjEpLGQ9cig0OCkscD1yKDcpLHk9cigxNDYpLGg9cigxMDEpLHY9cigyMTEpLGc9cig4MSksYj1yKDMpLG09cigyMyksXz1yKDMxKSxSPXIoNDcpLHc9cig1MiksUz1yKDE0OSksTz1yKDI0KSxQPXIoOSksaz1yKDUwKSxNPU8uZixMPVAuZix4PVMuZixFPW4uU3ltYm9sLEQ9bi5KU09OLFU9RCYmRC5zdHJpbmdpZnksQT1wKCJfaGlkZGVuIiksaj1wKCJ0b1ByaW1pdGl2ZSIpLEk9e30ucHJvcGVydHlJc0VudW1lcmFibGUsQz1mKCJzeW1ib2wtcmVnaXN0cnkiKSxUPWYoInN5bWJvbHMiKSxOPWYoIm9wLXN5bWJvbHMiKSxGPU9iamVjdC5wcm90b3R5cGUscT0iZnVuY3Rpb24iPT10eXBlb2YgRSxIPW4uUU9iamVjdCxCPSFIfHwhSC5wcm90b3R5cGV8fCFILnByb3RvdHlwZS5maW5kQ2hpbGQsRz1vJiZjKGZ1bmN0aW9uKCl7cmV0dXJuIDchPXcoTCh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiBMKHRoaXMsImEiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1NKEYsdCk7biYmZGVsZXRlIEZbdF0sTChlLHQsciksbiYmZSE9PUYmJkwoRix0LG4pfTpMLEs9ZnVuY3Rpb24oZSl7dmFyIHQ9VFtlXT13KEUucHJvdG90eXBlKTtyZXR1cm4gdC5faz1lLHR9LFY9cSYmInN5bWJvbCI9PXR5cGVvZiBFLml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBFfSxXPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT09PUYmJlcoTix0LHIpLGIoZSksdD1fKHQsITApLGIociksaShULHQpPyhyLmVudW1lcmFibGU/KGkoZSxBKSYmZVtBXVt0XSYmKGVbQV1bdF09ITEpLHI9dyhyLHtlbnVtZXJhYmxlOlIoMCwhMSl9KSk6KGkoZSxBKXx8TChlLEEsUigxLHt9KSksZVtBXVt0XT0hMCksRyhlLHQscikpOkwoZSx0LHIpfSxZPWZ1bmN0aW9uKGUsdCl7YihlKTtmb3IodmFyIHIsbj12KHQ9bSh0KSksaT0wLG89bi5sZW5ndGg7bz5pOylXKGUscj1uW2krK10sdFtyXSk7cmV0dXJuIGV9LEo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD93KGUpOlkodyhlKSx0KX0sej1mdW5jdGlvbihlKXt2YXIgdD1JLmNhbGwodGhpcyxlPV8oZSwhMCkpO3JldHVybiEodGhpcz09PUYmJmkoVCxlKSYmIWkoTixlKSkmJighKHR8fCFpKHRoaXMsZSl8fCFpKFQsZSl8fGkodGhpcyxBKSYmdGhpc1tBXVtlXSl8fHQpfSwkPWZ1bmN0aW9uKGUsdCl7aWYoZT1tKGUpLHQ9Xyh0LCEwKSxlIT09Rnx8IWkoVCx0KXx8aShOLHQpKXt2YXIgcj1NKGUsdCk7cmV0dXJuIXJ8fCFpKFQsdCl8fGkoZSxBKSYmZVtBXVt0XXx8KHIuZW51bWVyYWJsZT0hMCkscn19LFg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9eChtKGUpKSxuPVtdLG89MDtyLmxlbmd0aD5vOylpKFQsdD1yW28rK10pfHx0PT1BfHx0PT11fHxuLnB1c2godCk7cmV0dXJuIG59LFo9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9ZT09PUYsbj14KHI/TjptKGUpKSxvPVtdLGE9MDtuLmxlbmd0aD5hOykhaShULHQ9blthKytdKXx8ciYmIWkoRix0KXx8by5wdXNoKFRbdF0pO3JldHVybiBvfTsKLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pCnF8fChFPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIEUpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhIik7dmFyIGU9ZChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksdD1mdW5jdGlvbihyKXt0aGlzPT09RiYmdC5jYWxsKE4sciksaSh0aGlzLEEpJiZpKHRoaXNbQV0sZSkmJih0aGlzW0FdW2VdPSExKSxHKHRoaXMsZSxSKDEscikpfTtyZXR1cm4gbyYmQiYmRyhGLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6dH0pLEsoZSl9LHMoRS5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTy5mPSQsUC5mPVcscig1MykuZj1TLmY9WCxyKDcxKS5mPXoscig4MCkuZj1aLG8mJiFyKDQ5KSYmcyhGLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIseiwhMCkseS5mPWZ1bmN0aW9uKGUpe3JldHVybiBLKHAoZSkpfSksYShhLkcrYS5XK2EuRiohcSx7U3ltYm9sOkV9KTtmb3IodmFyIFE9Imhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLGVlPTA7US5sZW5ndGg+ZWU7KXAoUVtlZSsrXSk7Zm9yKHZhciB0ZT1rKHAuc3RvcmUpLHJlPTA7dGUubGVuZ3RoPnJlOyloKHRlW3JlKytdKTthKGEuUythLkYqIXEsIlN5bWJvbCIsewovLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSkKZm9yOmZ1bmN0aW9uKGUpe3JldHVybiBpKEMsZSs9IiIpP0NbZV06Q1tlXT1FKGUpfSwKLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pCmtleUZvcjpmdW5jdGlvbihlKXtpZighVihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIHN5bWJvbCEiKTtmb3IodmFyIHQgaW4gQylpZihDW3RdPT09ZSlyZXR1cm4gdH0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7Qj0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7Qj0hMX19KSxhKGEuUythLkYqIXEsIk9iamVjdCIsewovLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCmNyZWF0ZTpKLAovLyAxOS4xLjIuNCBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKZGVmaW5lUHJvcGVydHk6VywKLy8gMTkuMS4yLjMgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykKZGVmaW5lUHJvcGVydGllczpZLAovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCmdldE93blByb3BlcnR5RGVzY3JpcHRvcjokLAovLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQpnZXRPd25Qcm9wZXJ0eU5hbWVzOlgsCi8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTykKZ2V0T3duUHJvcGVydHlTeW1ib2xzOlp9KSwKLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pCkQmJmEoYS5TK2EuRiooIXF8fGMoZnVuY3Rpb24oKXt2YXIgZT1FKCk7Ci8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9Ci8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbAovLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9scwpyZXR1cm4iW251bGxdIiE9VShbZV0pfHwie30iIT1VKHthOmV9KXx8Int9IiE9VShPYmplY3QoZSkpfSkpLCJKU09OIix7c3RyaW5naWZ5OmZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUmJiFWKGUpKXtmb3IoLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZAp2YXIgdCxyLG49W2VdLGk9MTthcmd1bWVudHMubGVuZ3RoPmk7KW4ucHVzaChhcmd1bWVudHNbaSsrXSk7cmV0dXJuIHQ9blsxXSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHI9dCksIXImJmcodCl8fCh0PWZ1bmN0aW9uKGUsdCl7aWYociYmKHQ9ci5jYWxsKHRoaXMsZSx0KSksIVYodCkpcmV0dXJuIHR9KSxuWzFdPXQsVS5hcHBseShELG4pfX19KSwKLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KQpFLnByb3RvdHlwZVtqXXx8cigxOCkoRS5wcm90b3R5cGUsaixFLnByb3RvdHlwZS52YWx1ZU9mKSwKLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQpsKEUsIlN5bWJvbCIpLAovLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddCmwoTWF0aCwiTWF0aCIsITApLAovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQpsKG4uSlNPTiwiSlNPTiIsITApfSwvKiAyMTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwp2YXIgbj1yKDUwKSxpPXIoODApLG89cig3MSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSkscj1pLmY7aWYocilmb3IodmFyIGEscz1yKGUpLHU9by5mLGM9MDtzLmxlbmd0aD5jOyl1LmNhbGwoZSxhPXNbYysrXSkmJnQucHVzaChhKTtyZXR1cm4gdH19LC8qIDIxMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKTsKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCm4obi5TLCJPYmplY3QiLHtjcmVhdGU6cig1Mil9KX0sLyogMjEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApOwovLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQpuKG4uUytuLkYqIXIoOCksIk9iamVjdCIse2RlZmluZVByb3BlcnR5OnIoOSkuZn0pfSwvKiAyMTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCk7Ci8vIDE5LjEuMi4zIC8gMTUuMi4zLjcgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykKbihuLlMrbi5GKiFyKDgpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0aWVzOnIoMTQ4KX0pfSwvKiAyMTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciBuPXIoMjMpLGk9cigyNCkuZjtyKDM0KSgiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBpKG4oZSksdCl9fSl9LC8qIDIxNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi45IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDE0KSxpPXIoMjUpO3IoMzQpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGkobihlKSl9fSl9LC8qIDIxNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKQp2YXIgbj1yKDE0KSxpPXIoNTApO3IoMzQpKCJrZXlzIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gaShuKGUpKX19KX0sLyogMjE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKcigzNCkoImdldE93blByb3BlcnR5TmFtZXMiLGZ1bmN0aW9uKCl7cmV0dXJuIHIoMTQ5KS5mfSl9LC8qIDIxOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi41IE9iamVjdC5mcmVlemUoTykKdmFyIG49cig2KSxpPXIoNDApLm9uRnJlZXplO3IoMzQpKCJmcmVlemUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKGkodCkpOnR9fSl9LC8qIDIyMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xNyBPYmplY3Quc2VhbChPKQp2YXIgbj1yKDYpLGk9cig0MCkub25GcmVlemU7cigzNCkoInNlYWwiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKGkodCkpOnR9fSl9LC8qIDIyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xNSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoTykKdmFyIG49cig2KSxpPXIoNDApLm9uRnJlZXplO3IoMzQpKCJwcmV2ZW50RXh0ZW5zaW9ucyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlJiZuKHQpP2UoaSh0KSk6dH19KX0sLyogMjIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjEyIE9iamVjdC5pc0Zyb3plbihPKQp2YXIgbj1yKDYpO3IoMzQpKCJpc0Zyb3plbiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiFuKHQpfHwhIWUmJmUodCl9fSl9LC8qIDIyMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xMyBPYmplY3QuaXNTZWFsZWQoTykKdmFyIG49cig2KTtyKDM0KSgiaXNTZWFsZWQiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4hbih0KXx8ISFlJiZlKHQpfX0pfSwvKiAyMjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTEgT2JqZWN0LmlzRXh0ZW5zaWJsZShPKQp2YXIgbj1yKDYpO3IoMzQpKCJpc0V4dGVuc2libGUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4hIW4odCkmJighZXx8ZSh0KSl9fSl9LC8qIDIyNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpCnZhciBuPXIoMCk7bihuLlMrbi5GLCJPYmplY3QiLHthc3NpZ246cigxNTApfSl9LC8qIDIyNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xMCBPYmplY3QuaXModmFsdWUxLCB2YWx1ZTIpCnZhciBuPXIoMCk7bihuLlMsIk9iamVjdCIse2lzOnIoMjI3KX0pfSwvKiAyMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gNy4yLjkgU2FtZVZhbHVlKHgsIHkpCmUuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKcmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PTEvdDplIT1lJiZ0IT10fX0sLyogMjI4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykKdmFyIG49cigwKTtuKG4uUywiT2JqZWN0Iix7c2V0UHJvdG90eXBlT2Y6cigxMDUpLnNldH0pfSwvKiAyMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBuPXIoNzIpLGk9e307aVtyKDcpKCJ0b1N0cmluZ1RhZyIpXT0ieiIsaSsiIiE9IltvYmplY3Qgel0iJiZyKDE5KShPYmplY3QucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCAiK24odGhpcykrIl0ifSwhMCl9LC8qIDIzMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjIuMy4yIC8gMTUuMy40LjUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQodGhpc0FyZywgYXJncy4uLikKdmFyIG49cigwKTtuKG4uUCwiRnVuY3Rpb24iLHtiaW5kOnIoMTUxKX0pfSwvKiAyMzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSkuZixpPUZ1bmN0aW9uLnByb3RvdHlwZSxvPS9eXHMqZnVuY3Rpb24gKFteIChdKikvOwovLyAxOS4yLjQuMiBuYW1lCiJuYW1lImluIGl8fHIoOCkmJm4oaSwibmFtZSIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuKCIiK3RoaXMpLm1hdGNoKG8pWzFdfWNhdGNoKGUpe3JldHVybiIifX19KX0sLyogMjMyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig2KSxpPXIoMjUpLG89cig3KSgiaGFzSW5zdGFuY2UiKSxhPUZ1bmN0aW9uLnByb3RvdHlwZTsKLy8gMTkuMi4zLjYgRnVuY3Rpb24ucHJvdG90eXBlW0BAaGFzSW5zdGFuY2VdKFYpCm8gaW4gYXx8cig5KS5mKGEsbyx7dmFsdWU6ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHRoaXN8fCFuKGUpKXJldHVybiExO2lmKCFuKHRoaXMucHJvdG90eXBlKSlyZXR1cm4gZSBpbnN0YW5jZW9mIHRoaXM7Ci8vIGZvciBlbnZpcm9ubWVudCB3L28gbmF0aXZlIGBAQGhhc0luc3RhbmNlYCBsb2dpYyBlbm91Z2ggYGluc3RhbmNlb2ZgLCBidXQgYWRkIHRoaXM6CmZvcig7ZT1pKGUpOylpZih0aGlzLnByb3RvdHlwZT09PWUpcmV0dXJuITA7cmV0dXJuITF9fSl9LC8qIDIzMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxpPXIoMTUzKTsKLy8gMTguMi41IHBhcnNlSW50KHN0cmluZywgcmFkaXgpCm4obi5HK24uRioocGFyc2VJbnQhPWkpLHtwYXJzZUludDppfSl9LC8qIDIzNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxpPXIoMTU0KTsKLy8gMTguMi40IHBhcnNlRmxvYXQoc3RyaW5nKQpuKG4uRytuLkYqKHBhcnNlRmxvYXQhPWkpLHtwYXJzZUZsb2F0Oml9KX0sLyogMjM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0KSxpPXIoMTcpLG89cigyOCksYT1yKDEwNykscz1yKDMxKSx1PXIoNSksYz1yKDUzKS5mLGY9cigyNCkuZixsPXIoOSkuZixkPXIoNjIpLnRyaW0scD1uLk51bWJlcix5PXAsaD1wLnByb3RvdHlwZSx2PSJOdW1iZXIiPT1vKHIoNTIpKGgpKSxnPSJ0cmltImluIFN0cmluZy5wcm90b3R5cGUsYj1mdW5jdGlvbihlKXt2YXIgdD1zKGUsITEpO2lmKCJzdHJpbmciPT10eXBlb2YgdCYmdC5sZW5ndGg+Mil7dD1nP3QudHJpbSgpOmQodCwzKTt2YXIgcixuLGksbz10LmNoYXJDb2RlQXQoMCk7aWYoNDM9PT1vfHw0NT09PW8pe2lmKDg4PT09KHI9dC5jaGFyQ29kZUF0KDIpKXx8MTIwPT09cilyZXR1cm4gTmFOfWVsc2UgaWYoNDg9PT1vKXtzd2l0Y2godC5jaGFyQ29kZUF0KDEpKXtjYXNlIDY2OmNhc2UgOTg6bj0yLGk9NDk7YnJlYWs7Ly8gZmFzdCBlcXVhbCAvXjBiWzAxXSskL2kKY2FzZSA3OTpjYXNlIDExMTpuPTgsaT01NTticmVhazsvLyBmYXN0IGVxdWFsIC9eMG9bMC03XSskL2kKZGVmYXVsdDpyZXR1cm4rdH1mb3IodmFyIGEsdT10LnNsaWNlKDIpLGM9MCxmPXUubGVuZ3RoO2M8ZjtjKyspCi8vIHBhcnNlSW50IHBhcnNlcyBhIHN0cmluZyB0byBhIGZpcnN0IHVuYXZhaWxhYmxlIHN5bWJvbAovLyBidXQgVG9OdW1iZXIgc2hvdWxkIHJldHVybiBOYU4gaWYgYSBzdHJpbmcgY29udGFpbnMgdW5hdmFpbGFibGUgc3ltYm9scwppZigoYT11LmNoYXJDb2RlQXQoYykpPDQ4fHxhPmkpcmV0dXJuIE5hTjtyZXR1cm4gcGFyc2VJbnQodSxuKX19cmV0dXJuK3R9O2lmKCFwKCIgMG8xIil8fCFwKCIwYjEiKXx8cCgiKzB4MSIpKXtwPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg8MT8wOmUscj10aGlzO3JldHVybiByIGluc3RhbmNlb2YgcCYmKHY/dShmdW5jdGlvbigpe2gudmFsdWVPZi5jYWxsKHIpfSk6Ik51bWJlciIhPW8ocikpP2EobmV3IHkoYih0KSkscixwKTpiKHQpfTtmb3IodmFyIG0sXz1yKDgpP2MoeSk6Ik1BWF9WQUxVRSxNSU5fVkFMVUUsTmFOLE5FR0FUSVZFX0lORklOSVRZLFBPU0lUSVZFX0lORklOSVRZLEVQU0lMT04saXNGaW5pdGUsaXNJbnRlZ2VyLGlzTmFOLGlzU2FmZUludGVnZXIsTUFYX1NBRkVfSU5URUdFUixNSU5fU0FGRV9JTlRFR0VSLHBhcnNlRmxvYXQscGFyc2VJbnQsaXNJbnRlZ2VyIi5zcGxpdCgiLCIpLFI9MDtfLmxlbmd0aD5SO1IrKylpKHksbT1fW1JdKSYmIWkocCxtKSYmbChwLG0sZih5LG0pKTtwLnByb3RvdHlwZT1oLGguY29uc3RydWN0b3I9cCxyKDE5KShuLCJOdW1iZXIiLHApfX0sLyogMjM2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMzMpLG89cigxNTUpLGE9cigxMDgpLHM9MS4udG9GaXhlZCx1PU1hdGguZmxvb3IsYz1bMCwwLDAsMCwwLDBdLGY9Ik51bWJlci50b0ZpeGVkOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEiLGw9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9LTEsbj10Oysrcjw2OyluKz1lKmNbcl0sY1tyXT1uJTFlNyxuPXUobi8xZTcpfSxkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD02LHI9MDstLXQ+PTA7KXIrPWNbdF0sY1t0XT11KHIvZSkscj1yJWUqMWU3fSxwPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTYsdD0iIjstLWU+PTA7KWlmKCIiIT09dHx8MD09PWV8fDAhPT1jW2VdKXt2YXIgcj1TdHJpbmcoY1tlXSk7dD0iIj09PXQ/cjp0K2EuY2FsbCgiMCIsNy1yLmxlbmd0aCkrcn1yZXR1cm4gdH0seT1mdW5jdGlvbihlLHQscil7cmV0dXJuIDA9PT10P3I6dCUyPT0xP3koZSx0LTEsciplKTp5KGUqZSx0LzIscil9LGg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj1lO3I+PTQwOTY7KXQrPTEyLHIvPTQwOTY7Zm9yKDtyPj0yOyl0Kz0xLHIvPTI7cmV0dXJuIHR9O24obi5QK24uRiooISFzJiYoIjAuMDAwIiE9PThlLTUudG9GaXhlZCgzKXx8IjEiIT09LjkudG9GaXhlZCgwKXx8IjEuMjUiIT09MS4yNTUudG9GaXhlZCgyKXx8IjEwMDAwMDAwMDAwMDAwMDAxMjgiIT09KDB4ZGUwYjZiM2E3NjQwMDgwKS50b0ZpeGVkKDApKXx8IXIoNSkoZnVuY3Rpb24oKXsKLy8gVjggfiBBbmRyb2lkIDQuMy0Kcy5jYWxsKHt9KX0pKSwiTnVtYmVyIix7dG9GaXhlZDpmdW5jdGlvbihlKXt2YXIgdCxyLG4scyx1PW8odGhpcyxmKSxjPWkoZSksdj0iIixnPSIwIjtpZihjPDB8fGM+MjApdGhyb3cgUmFuZ2VFcnJvcihmKTsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQppZih1IT11KXJldHVybiJOYU4iO2lmKHU8PS0xZTIxfHx1Pj0xZTIxKXJldHVybiBTdHJpbmcodSk7aWYodTwwJiYodj0iLSIsdT0tdSksdT4xZS0yMSlpZih0PWgodSp5KDIsNjksMSkpLTY5LHI9dDwwP3UqeSgyLC10LDEpOnUveSgyLHQsMSkscio9NDUwMzU5OTYyNzM3MDQ5NiwodD01Mi10KT4wKXtmb3IobCgwLHIpLG49YztuPj03OylsKDFlNywwKSxuLT03O2ZvcihsKHkoMTAsbiwxKSwwKSxuPXQtMTtuPj0yMzspZCgxPDwyMyksbi09MjM7ZCgxPDxuKSxsKDEsMSksZCgyKSxnPXAoKX1lbHNlIGwoMCxyKSxsKDE8PC10LDApLGc9cCgpK2EuY2FsbCgiMCIsYyk7cmV0dXJuIGM+MD8ocz1nLmxlbmd0aCxnPXYrKHM8PWM/IjAuIithLmNhbGwoIjAiLGMtcykrZzpnLnNsaWNlKDAscy1jKSsiLiIrZy5zbGljZShzLWMpKSk6Zz12K2csZ319KX0sLyogMjM3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoNSksbz1yKDE1NSksYT0xLi50b1ByZWNpc2lvbjtuKG4uUCtuLkYqKGkoZnVuY3Rpb24oKXsKLy8gSUU3LQpyZXR1cm4iMSIhPT1hLmNhbGwoMSx2b2lkIDApfSl8fCFpKGZ1bmN0aW9uKCl7Ci8vIFY4IH4gQW5kcm9pZCA0LjMtCmEuY2FsbCh7fSl9KSksIk51bWJlciIse3RvUHJlY2lzaW9uOmZ1bmN0aW9uKGUpe3ZhciB0PW8odGhpcywiTnVtYmVyI3RvUHJlY2lzaW9uOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEiKTtyZXR1cm4gdm9pZCAwPT09ZT9hLmNhbGwodCk6YS5jYWxsKHQsZSl9fSl9LC8qIDIzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi4xIE51bWJlci5FUFNJTE9OCnZhciBuPXIoMCk7bihuLlMsIk51bWJlciIse0VQU0lMT046TWF0aC5wb3coMiwtNTIpfSl9LC8qIDIzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi4yIE51bWJlci5pc0Zpbml0ZShudW1iZXIpCnZhciBuPXIoMCksaT1yKDQpLmlzRmluaXRlO24obi5TLCJOdW1iZXIiLHtpc0Zpbml0ZTpmdW5jdGlvbihlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmkoZSl9fSl9LC8qIDI0MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi4zIE51bWJlci5pc0ludGVnZXIobnVtYmVyKQp2YXIgbj1yKDApO24obi5TLCJOdW1iZXIiLHtpc0ludGVnZXI6cigxNTYpfSl9LC8qIDI0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi40IE51bWJlci5pc05hTihudW1iZXIpCnZhciBuPXIoMCk7bihuLlMsIk51bWJlciIse2lzTmFOOmZ1bmN0aW9uKGUpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCnJldHVybiBlIT1lfX0pfSwvKiAyNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuNSBOdW1iZXIuaXNTYWZlSW50ZWdlcihudW1iZXIpCnZhciBuPXIoMCksaT1yKDE1Niksbz1NYXRoLmFicztuKG4uUywiTnVtYmVyIix7aXNTYWZlSW50ZWdlcjpmdW5jdGlvbihlKXtyZXR1cm4gaShlKSYmbyhlKTw9OTAwNzE5OTI1NDc0MDk5MX19KX0sLyogMjQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjYgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIKdmFyIG49cigwKTtuKG4uUywiTnVtYmVyIix7TUFYX1NBRkVfSU5URUdFUjo5MDA3MTk5MjU0NzQwOTkxfSl9LC8qIDI0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi4xMCBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUgp2YXIgbj1yKDApO24obi5TLCJOdW1iZXIiLHtNSU5fU0FGRV9JTlRFR0VSOi05MDA3MTk5MjU0NzQwOTkxfSl9LC8qIDI0NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxpPXIoMTU0KTsKLy8gMjAuMS4yLjEyIE51bWJlci5wYXJzZUZsb2F0KHN0cmluZykKbihuLlMrbi5GKihOdW1iZXIucGFyc2VGbG9hdCE9aSksIk51bWJlciIse3BhcnNlRmxvYXQ6aX0pfSwvKiAyNDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDE1Myk7Ci8vIDIwLjEuMi4xMyBOdW1iZXIucGFyc2VJbnQoc3RyaW5nLCByYWRpeCkKbihuLlMrbi5GKihOdW1iZXIucGFyc2VJbnQhPWkpLCJOdW1iZXIiLHtwYXJzZUludDppfSl9LC8qIDI0NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4zIE1hdGguYWNvc2goeCkKdmFyIG49cigwKSxpPXIoMTU3KSxvPU1hdGguc3FydCxhPU1hdGguYWNvc2g7bihuLlMrbi5GKiEoYSYmNzEwPT1NYXRoLmZsb29yKGEoTnVtYmVyLk1BWF9WQUxVRSkpJiZhKDEvMCk9PTEvMCksIk1hdGgiLHthY29zaDpmdW5jdGlvbihlKXtyZXR1cm4oZT0rZSk8MT9OYU46ZT45NDkwNjI2NS42MjQyNTE1Nj9NYXRoLmxvZyhlKStNYXRoLkxOMjppKGUtMStvKGUtMSkqbyhlKzEpKX19KX0sLyogMjQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBhc2luaChlKXtyZXR1cm4gaXNGaW5pdGUoZT0rZSkmJjAhPWU/ZTwwPy1hc2luaCgtZSk6TWF0aC5sb2coZStNYXRoLnNxcnQoZSplKzEpKTplfQovLyAyMC4yLjIuNSBNYXRoLmFzaW5oKHgpCnZhciBuPXIoMCksaT1NYXRoLmFzaW5oOwovLyBUb3IgQnJvd3NlciBidWc6IE1hdGguYXNpbmgoMCkgLT4gLTAKbihuLlMrbi5GKiEoaSYmMS9pKDApPjApLCJNYXRoIix7YXNpbmg6YXNpbmh9KX0sLyogMjQ5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjcgTWF0aC5hdGFuaCh4KQp2YXIgbj1yKDApLGk9TWF0aC5hdGFuaDsKLy8gVG9yIEJyb3dzZXIgYnVnOiBNYXRoLmF0YW5oKC0wKSAtPiAwCm4obi5TK24uRiohKGkmJjEvaSgtMCk8MCksIk1hdGgiLHthdGFuaDpmdW5jdGlvbihlKXtyZXR1cm4gMD09KGU9K2UpP2U6TWF0aC5sb2coKDErZSkvKDEtZSkpLzJ9fSl9LC8qIDI1MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi45IE1hdGguY2JydCh4KQp2YXIgbj1yKDApLGk9cigxMDkpO24obi5TLCJNYXRoIix7Y2JydDpmdW5jdGlvbihlKXtyZXR1cm4gaShlPStlKSpNYXRoLnBvdyhNYXRoLmFicyhlKSwxLzMpfX0pfSwvKiAyNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTEgTWF0aC5jbHozMih4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7Y2x6MzI6ZnVuY3Rpb24oZSl7cmV0dXJuKGU+Pj49MCk/MzEtTWF0aC5mbG9vcihNYXRoLmxvZyhlKy41KSpNYXRoLkxPRzJFKTozMn19KX0sLyogMjUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjEyIE1hdGguY29zaCh4KQp2YXIgbj1yKDApLGk9TWF0aC5leHA7bihuLlMsIk1hdGgiLHtjb3NoOmZ1bmN0aW9uKGUpe3JldHVybihpKGU9K2UpK2koLWUpKS8yfX0pfSwvKiAyNTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTQgTWF0aC5leHBtMSh4KQp2YXIgbj1yKDApLGk9cigxMTApO24obi5TK24uRiooaSE9TWF0aC5leHBtMSksIk1hdGgiLHtleHBtMTppfSl9LC8qIDI1NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xNiBNYXRoLmZyb3VuZCh4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7ZnJvdW5kOnIoMTU4KX0pfSwvKiAyNTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTcgTWF0aC5oeXBvdChbdmFsdWUxWywgdmFsdWUyWywg4oCmIF1dXSkKdmFyIG49cigwKSxpPU1hdGguYWJzO24obi5TLCJNYXRoIix7aHlwb3Q6ZnVuY3Rpb24oZSx0KXtmb3IoLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwp2YXIgcixuLG89MCxhPTAscz1hcmd1bWVudHMubGVuZ3RoLHU9MDthPHM7KXI9aShhcmd1bWVudHNbYSsrXSksdTxyPyhuPXUvcixvPW8qbipuKzEsdT1yKTpyPjA/KG49ci91LG8rPW4qbik6bys9cjtyZXR1cm4gdT09PTEvMD8xLzA6dSpNYXRoLnNxcnQobyl9fSl9LC8qIDI1NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xOCBNYXRoLmltdWwoeCwgeSkKdmFyIG49cigwKSxpPU1hdGguaW11bDsKLy8gc29tZSBXZWJLaXQgdmVyc2lvbnMgZmFpbHMgd2l0aCBiaWcgbnVtYmVycywgc29tZSBoYXMgd3JvbmcgYXJpdHkKbihuLlMrbi5GKnIoNSkoZnVuY3Rpb24oKXtyZXR1cm4tNSE9aSg0Mjk0OTY3Mjk1LDUpfHwyIT1pLmxlbmd0aH0pLCJNYXRoIix7aW11bDpmdW5jdGlvbihlLHQpe3ZhciByPStlLG49K3QsaT02NTUzNSZyLG89NjU1MzUmbjtyZXR1cm4gMHxpKm8rKCg2NTUzNSZyPj4+MTYpKm8raSooNjU1MzUmbj4+PjE2KTw8MTY+Pj4wKX19KX0sLyogMjU3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjIxIE1hdGgubG9nMTAoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2xvZzEwOmZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmxvZyhlKSpNYXRoLkxPRzEwRX19KX0sLyogMjU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjIwIE1hdGgubG9nMXAoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2xvZzFwOnIoMTU3KX0pfSwvKiAyNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMjIgTWF0aC5sb2cyKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtsb2cyOmZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmxvZyhlKS9NYXRoLkxOMn19KX0sLyogMjYwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjI4IE1hdGguc2lnbih4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7c2lnbjpyKDEwOSl9KX0sLyogMjYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjMwIE1hdGguc2luaCh4KQp2YXIgbj1yKDApLGk9cigxMTApLG89TWF0aC5leHA7Ci8vIFY4IG5lYXIgQ2hyb21pdW0gMzggaGFzIGEgcHJvYmxlbSB3aXRoIHZlcnkgc21hbGwgbnVtYmVycwpuKG4uUytuLkYqcig1KShmdW5jdGlvbigpe3JldHVybi0yZS0xNyE9IU1hdGguc2luaCgtMmUtMTcpfSksIk1hdGgiLHtzaW5oOmZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmFicyhlPStlKTwxPyhpKGUpLWkoLWUpKS8yOihvKGUtMSktbygtZS0xKSkqKE1hdGguRS8yKX19KX0sLyogMjYyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjMzIE1hdGgudGFuaCh4KQp2YXIgbj1yKDApLGk9cigxMTApLG89TWF0aC5leHA7bihuLlMsIk1hdGgiLHt0YW5oOmZ1bmN0aW9uKGUpe3ZhciB0PWkoZT0rZSkscj1pKC1lKTtyZXR1cm4gdD09MS8wPzE6cj09MS8wPy0xOih0LXIpLyhvKGUpK28oLWUpKX19KX0sLyogMjYzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjM0IE1hdGgudHJ1bmMoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse3RydW5jOmZ1bmN0aW9uKGUpe3JldHVybihlPjA/TWF0aC5mbG9vcjpNYXRoLmNlaWwpKGUpfX0pfSwvKiAyNjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksaT1yKDUxKSxvPVN0cmluZy5mcm9tQ2hhckNvZGUsYT1TdHJpbmcuZnJvbUNvZGVQb2ludDsKLy8gbGVuZ3RoIHNob3VsZCBiZSAxLCBvbGQgRkYgcHJvYmxlbQpuKG4uUytuLkYqKCEhYSYmMSE9YS5sZW5ndGgpLCJTdHJpbmciLHsKLy8gMjEuMS4yLjIgU3RyaW5nLmZyb21Db2RlUG9pbnQoLi4uY29kZVBvaW50cykKZnJvbUNvZGVQb2ludDpmdW5jdGlvbihlKXtmb3IoLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwp2YXIgdCxyPVtdLG49YXJndW1lbnRzLmxlbmd0aCxhPTA7bj5hOyl7aWYodD0rYXJndW1lbnRzW2ErK10saSh0LDExMTQxMTEpIT09dCl0aHJvdyBSYW5nZUVycm9yKHQrIiBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50Iik7ci5wdXNoKHQ8NjU1MzY/byh0KTpvKDU1Mjk2KygodC09NjU1MzYpPj4xMCksdCUxMDI0KzU2MzIwKSl9cmV0dXJuIHIuam9pbigiIil9fSl9LC8qIDI2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxpPXIoMjMpLG89cigxMCk7bihuLlMsIlN0cmluZyIsewovLyAyMS4xLjIuNCBTdHJpbmcucmF3KGNhbGxTaXRlLCAuLi5zdWJzdGl0dXRpb25zKQpyYXc6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWkoZS5yYXcpLHI9byh0Lmxlbmd0aCksbj1hcmd1bWVudHMubGVuZ3RoLGE9W10scz0wO3I+czspYS5wdXNoKFN0cmluZyh0W3MrK10pKSxzPG4mJmEucHVzaChTdHJpbmcoYXJndW1lbnRzW3NdKSk7cmV0dXJuIGEuam9pbigiIil9fSl9LC8qIDI2NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMS4xLjMuMjUgU3RyaW5nLnByb3RvdHlwZS50cmltKCkKcig2MikoInRyaW0iLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsMyl9fSl9LC8qIDI2NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTExKSghMCk7Ci8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKcigxMTIpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSwvLyB0YXJnZXQKdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSwvKiAyNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxMTEpKCExKTtuKG4uUCwiU3RyaW5nIix7Ci8vIDIxLjEuMy4zIFN0cmluZy5wcm90b3R5cGUuY29kZVBvaW50QXQocG9zKQpjb2RlUG9pbnRBdDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUpfX0pfSwvKiAyNjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMS4zLjYgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aChzZWFyY2hTdHJpbmcgWywgZW5kUG9zaXRpb25dKQp2YXIgbj1yKDApLGk9cigxMCksbz1yKDExNCksYT0iIi5lbmRzV2l0aDtuKG4uUCtuLkYqcigxMTUpKCJlbmRzV2l0aCIpLCJTdHJpbmciLHtlbmRzV2l0aDpmdW5jdGlvbihlKXt2YXIgdD1vKHRoaXMsZSwiZW5kc1dpdGgiKSxyPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLG49aSh0Lmxlbmd0aCkscz12b2lkIDA9PT1yP246TWF0aC5taW4oaShyKSxuKSx1PVN0cmluZyhlKTtyZXR1cm4gYT9hLmNhbGwodCx1LHMpOnQuc2xpY2Uocy11Lmxlbmd0aCxzKT09PXV9fSl9LC8qIDI3MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMS4xLjMuNyBTdHJpbmcucHJvdG90eXBlLmluY2x1ZGVzKHNlYXJjaFN0cmluZywgcG9zaXRpb24gPSAwKQp2YXIgbj1yKDApLGk9cigxMTQpO24obi5QK24uRipyKDExNSkoImluY2x1ZGVzIiksIlN0cmluZyIse2luY2x1ZGVzOmZ1bmN0aW9uKGUpe3JldHVybiEhfmkodGhpcyxlLCJpbmNsdWRlcyIpLmluZGV4T2YoZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSl9LC8qIDI3MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKTtuKG4uUCwiU3RyaW5nIix7Ci8vIDIxLjEuMy4xMyBTdHJpbmcucHJvdG90eXBlLnJlcGVhdChjb3VudCkKcmVwZWF0OnIoMTA4KX0pfSwvKiAyNzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMS4zLjE4IFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aChzZWFyY2hTdHJpbmcgWywgcG9zaXRpb24gXSkKdmFyIG49cigwKSxpPXIoMTApLG89cigxMTQpLGE9IiIuc3RhcnRzV2l0aDtuKG4uUCtuLkYqcigxMTUpKCJzdGFydHNXaXRoIiksIlN0cmluZyIse3N0YXJ0c1dpdGg6ZnVuY3Rpb24oZSl7dmFyIHQ9byh0aGlzLGUsInN0YXJ0c1dpdGgiKSxyPWkoTWF0aC5taW4oYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsdC5sZW5ndGgpKSxuPVN0cmluZyhlKTtyZXR1cm4gYT9hLmNhbGwodCxuLHIpOnQuc2xpY2UocixyK24ubGVuZ3RoKT09PW59fSl9LC8qIDI3MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4yIFN0cmluZy5wcm90b3R5cGUuYW5jaG9yKG5hbWUpCnIoMjApKCJhbmNob3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLCJhIiwibmFtZSIsdCl9fSl9LC8qIDI3NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4zIFN0cmluZy5wcm90b3R5cGUuYmlnKCkKcigyMCkoImJpZyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiYmlnIiwiIiwiIil9fSl9LC8qIDI3NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy40IFN0cmluZy5wcm90b3R5cGUuYmxpbmsoKQpyKDIwKSgiYmxpbmsiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsImJsaW5rIiwiIiwiIil9fSl9LC8qIDI3NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy41IFN0cmluZy5wcm90b3R5cGUuYm9sZCgpCnIoMjApKCJib2xkIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJiIiwiIiwiIil9fSl9LC8qIDI3NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy42IFN0cmluZy5wcm90b3R5cGUuZml4ZWQoKQpyKDIwKSgiZml4ZWQiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsInR0IiwiIiwiIil9fSl9LC8qIDI3OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy43IFN0cmluZy5wcm90b3R5cGUuZm9udGNvbG9yKGNvbG9yKQpyKDIwKSgiZm9udGNvbG9yIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodGhpcywiZm9udCIsImNvbG9yIix0KX19KX0sLyogMjc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjggU3RyaW5nLnByb3RvdHlwZS5mb250c2l6ZShzaXplKQpyKDIwKSgiZm9udHNpemUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLCJmb250Iiwic2l6ZSIsdCl9fSl9LC8qIDI4MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy45IFN0cmluZy5wcm90b3R5cGUuaXRhbGljcygpCnIoMjApKCJpdGFsaWNzIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJpIiwiIiwiIil9fSl9LC8qIDI4MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4xMCBTdHJpbmcucHJvdG90eXBlLmxpbmsodXJsKQpyKDIwKSgibGluayIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsImEiLCJocmVmIix0KX19KX0sLyogMjgyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjExIFN0cmluZy5wcm90b3R5cGUuc21hbGwoKQpyKDIwKSgic21hbGwiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsInNtYWxsIiwiIiwiIil9fSl9LC8qIDI4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4xMiBTdHJpbmcucHJvdG90eXBlLnN0cmlrZSgpCnIoMjApKCJzdHJpa2UiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsInN0cmlrZSIsIiIsIiIpfX0pfSwvKiAyODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMTMgU3RyaW5nLnByb3RvdHlwZS5zdWIoKQpyKDIwKSgic3ViIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJzdWIiLCIiLCIiKX19KX0sLyogMjg1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjE0IFN0cmluZy5wcm90b3R5cGUuc3VwKCkKcigyMCkoInN1cCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywic3VwIiwiIiwiIil9fSl9LC8qIDI4NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjMuMy4xIC8gMTUuOS40LjQgRGF0ZS5ub3coKQp2YXIgbj1yKDApO24obi5TLCJEYXRlIix7bm93OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9fSl9LC8qIDI4NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDE0KSxvPXIoMzEpO24obi5QK24uRipyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT1uZXcgRGF0ZShOYU4pLnRvSlNPTigpfHwxIT09RGF0ZS5wcm90b3R5cGUudG9KU09OLmNhbGwoe3RvSVNPU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIDF9fSl9KSwiRGF0ZSIsewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKdG9KU09OOmZ1bmN0aW9uKGUpe3ZhciB0PWkodGhpcykscj1vKHQpO3JldHVybiJudW1iZXIiIT10eXBlb2Ygcnx8aXNGaW5pdGUocik/dC50b0lTT1N0cmluZygpOm51bGx9fSl9LC8qIDI4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjMuNC4zNiAvIDE1LjkuNS40MyBEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZygpCnZhciBuPXIoMCksaT1yKDI4OSk7Ci8vIFBoYW50b21KUyAvIG9sZCBXZWJLaXQgaGFzIGEgYnJva2VuIGltcGxlbWVudGF0aW9ucwpuKG4uUCtuLkYqKERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nIT09aSksIkRhdGUiLHt0b0lTT1N0cmluZzppfSl9LC8qIDI4OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMC4zLjQuMzYgLyAxNS45LjUuNDMgRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcoKQp2YXIgbj1yKDUpLGk9RGF0ZS5wcm90b3R5cGUuZ2V0VGltZSxvPURhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nLGE9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+OT9lOiIwIitlfTsKLy8gUGhhbnRvbUpTIC8gb2xkIFdlYktpdCBoYXMgYSBicm9rZW4gaW1wbGVtZW50YXRpb25zCmUuZXhwb3J0cz1uKGZ1bmN0aW9uKCl7cmV0dXJuIjAzODUtMDctMjVUMDc6MDY6MzkuOTk5WiIhPW8uY2FsbChuZXcgRGF0ZSgtNWUxMy0xKSl9KXx8IW4oZnVuY3Rpb24oKXtvLmNhbGwobmV3IERhdGUoTmFOKSl9KT9mdW5jdGlvbigpe2lmKCFpc0Zpbml0ZShpLmNhbGwodGhpcykpKXRocm93IFJhbmdlRXJyb3IoIkludmFsaWQgdGltZSB2YWx1ZSIpO3ZhciBlPXRoaXMsdD1lLmdldFVUQ0Z1bGxZZWFyKCkscj1lLmdldFVUQ01pbGxpc2Vjb25kcygpLG49dDwwPyItIjp0Pjk5OTk/IisiOiIiO3JldHVybiBuKygiMDAwMDAiK01hdGguYWJzKHQpKS5zbGljZShuPy02Oi00KSsiLSIrYShlLmdldFVUQ01vbnRoKCkrMSkrIi0iK2EoZS5nZXRVVENEYXRlKCkpKyJUIithKGUuZ2V0VVRDSG91cnMoKSkrIjoiK2EoZS5nZXRVVENNaW51dGVzKCkpKyI6IithKGUuZ2V0VVRDU2Vjb25kcygpKSsiLiIrKHI+OTk/cjoiMCIrYShyKSkrIloifTpvfSwvKiAyOTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPURhdGUucHJvdG90eXBlLGk9bi50b1N0cmluZyxvPW4uZ2V0VGltZTtuZXcgRGF0ZShOYU4pKyIiIT0iSW52YWxpZCBEYXRlIiYmcigxOSkobiwidG9TdHJpbmciLGZ1bmN0aW9uKCl7dmFyIGU9by5jYWxsKHRoaXMpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCnJldHVybiBlPT09ZT9pLmNhbGwodGhpcyk6IkludmFsaWQgRGF0ZSJ9KX0sLyogMjkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpKCJ0b1ByaW1pdGl2ZSIpLGk9RGF0ZS5wcm90b3R5cGU7biBpbiBpfHxyKDE4KShpLG4scigyOTIpKX0sLyogMjkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigzKSxpPXIoMzEpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZigic3RyaW5nIiE9PWUmJiJudW1iZXIiIT09ZSYmImRlZmF1bHQiIT09ZSl0aHJvdyBUeXBlRXJyb3IoIkluY29ycmVjdCBoaW50Iik7cmV0dXJuIGkobih0aGlzKSwibnVtYmVyIiE9ZSl9fSwvKiAyOTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMi4xLjIuMiAvIDE1LjQuMy4yIEFycmF5LmlzQXJyYXkoYXJnKQp2YXIgbj1yKDApO24obi5TLCJBcnJheSIse2lzQXJyYXk6cig4MSl9KX0sLyogMjk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigyNyksaT1yKDApLG89cigxNCksYT1yKDE1OSkscz1yKDExNiksdT1yKDEwKSxjPXIoMTE3KSxmPXIoMTE4KTtpKGkuUytpLkYqIXIoODMpKGZ1bmN0aW9uKGUpe0FycmF5LmZyb20oZSl9KSwiQXJyYXkiLHsKLy8gMjIuMS4yLjEgQXJyYXkuZnJvbShhcnJheUxpa2UsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKQpmcm9tOmZ1bmN0aW9uKGUpe3ZhciB0LHIsaSxsLGQ9byhlKSxwPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXkseT1hcmd1bWVudHMubGVuZ3RoLGg9eT4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsdj12b2lkIDAhPT1oLGc9MCxiPWYoZCk7Ci8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZQppZih2JiYoaD1uKGgseT4yP2FyZ3VtZW50c1syXTp2b2lkIDAsMikpLHZvaWQgMD09Ynx8cD09QXJyYXkmJnMoYikpZm9yKHQ9dShkLmxlbmd0aCkscj1uZXcgcCh0KTt0Pmc7ZysrKWMocixnLHY/aChkW2ddLGcpOmRbZ10pO2Vsc2UgZm9yKGw9Yi5jYWxsKGQpLHI9bmV3IHA7IShpPWwubmV4dCgpKS5kb25lO2crKyljKHIsZyx2P2EobCxoLFtpLnZhbHVlLGddLCEwKTppLnZhbHVlKTtyZXR1cm4gci5sZW5ndGg9ZyxyfX0pfSwvKiAyOTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxMTcpOwovLyBXZWJLaXQgQXJyYXkub2YgaXNuJ3QgZ2VuZXJpYwpuKG4uUytuLkYqcig1KShmdW5jdGlvbigpe2Z1bmN0aW9uIEYoKXt9cmV0dXJuIShBcnJheS5vZi5jYWxsKEYpaW5zdGFuY2VvZiBGKX0pLCJBcnJheSIsewovLyAyMi4xLjIuMyBBcnJheS5vZiggLi4uaXRlbXMpCm9mOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3KCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXkpKHQpO3Q+ZTspaShyLGUsYXJndW1lbnRzW2UrK10pO3JldHVybiByLmxlbmd0aD10LHJ9fSl9LC8qIDI5NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmpvaW4oc2VwYXJhdG9yKQp2YXIgbj1yKDApLGk9cigyMyksbz1bXS5qb2luOwovLyBmYWxsYmFjayBmb3Igbm90IGFycmF5LWxpa2Ugc3RyaW5ncwpuKG4uUCtuLkYqKHIoNzApIT1PYmplY3R8fCFyKDI5KShvKSksIkFycmF5Iix7am9pbjpmdW5jdGlvbihlKXtyZXR1cm4gby5jYWxsKGkodGhpcyksdm9pZCAwPT09ZT8iLCI6ZSl9fSl9LC8qIDI5NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDEwNCksbz1yKDI4KSxhPXIoNTEpLHM9cigxMCksdT1bXS5zbGljZTsKLy8gZmFsbGJhY2sgZm9yIG5vdCBhcnJheS1saWtlIEVTMyBzdHJpbmdzIGFuZCBET00gb2JqZWN0cwpuKG4uUCtuLkYqcig1KShmdW5jdGlvbigpe2kmJnUuY2FsbChpKX0pLCJBcnJheSIse3NsaWNlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9cyh0aGlzLmxlbmd0aCksbj1vKHRoaXMpO2lmKHQ9dm9pZCAwPT09dD9yOnQsIkFycmF5Ij09bilyZXR1cm4gdS5jYWxsKHRoaXMsZSx0KTtmb3IodmFyIGk9YShlLHIpLGM9YSh0LHIpLGY9cyhjLWkpLGw9QXJyYXkoZiksZD0wO2Q8ZjtkKyspbFtkXT0iU3RyaW5nIj09bj90aGlzLmNoYXJBdChpK2QpOnRoaXNbaStkXTtyZXR1cm4gbH19KX0sLyogMjk4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTYpLG89cigxNCksYT1yKDUpLHM9W10uc29ydCx1PVsxLDIsM107bihuLlArbi5GKihhKGZ1bmN0aW9uKCl7Ci8vIElFOC0KdS5zb3J0KHZvaWQgMCl9KXx8IWEoZnVuY3Rpb24oKXsKLy8gVjggYnVnCnUuc29ydChudWxsKX0pfHwhcigyOSkocykpLCJBcnJheSIsewovLyAyMi4xLjMuMjUgQXJyYXkucHJvdG90eXBlLnNvcnQoY29tcGFyZWZuKQpzb3J0OmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3MuY2FsbChvKHRoaXMpKTpzLmNhbGwobyh0aGlzKSxpKGUpKX19KX0sLyogMjk5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMzUpKDApLG89cigyOSkoW10uZm9yRWFjaCwhMCk7bihuLlArbi5GKiFvLCJBcnJheSIsewovLyAyMi4xLjMuMTAgLyAxNS40LjQuMTggQXJyYXkucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKZm9yRWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUsYXJndW1lbnRzWzFdKX19KX0sLyogMzAwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpLGk9cig4MSksbz1yKDcpKCJzcGVjaWVzIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0OwovLyBjcm9zcy1yZWFsbSBmYWxsYmFjawpyZXR1cm4gaShlKSYmKHQ9ZS5jb25zdHJ1Y3RvciwiZnVuY3Rpb24iIT10eXBlb2YgdHx8dCE9PUFycmF5JiYhaSh0LnByb3RvdHlwZSl8fCh0PXZvaWQgMCksbih0KSYmbnVsbD09PSh0PXRbb10pJiYodD12b2lkIDApKSx2b2lkIDA9PT10P0FycmF5OnR9fSwvKiAzMDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigzNSkoMSk7bihuLlArbi5GKiFyKDI5KShbXS5tYXAsITApLCJBcnJheSIsewovLyAyMi4xLjMuMTUgLyAxNS40LjQuMTkgQXJyYXkucHJvdG90eXBlLm1hcChjYWxsYmFja2ZuIFssIHRoaXNBcmddKQptYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMwMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDM1KSgyKTtuKG4uUCtuLkYqIXIoMjkpKFtdLmZpbHRlciwhMCksIkFycmF5Iix7Ci8vIDIyLjEuMy43IC8gMTUuNC40LjIwIEFycmF5LnByb3RvdHlwZS5maWx0ZXIoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigzNSkoMyk7bihuLlArbi5GKiFyKDI5KShbXS5zb21lLCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjIzIC8gMTUuNC40LjE3IEFycmF5LnByb3RvdHlwZS5zb21lKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCnNvbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMwNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDM1KSg0KTtuKG4uUCtuLkYqIXIoMjkpKFtdLmV2ZXJ5LCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjUgLyAxNS40LjQuMTYgQXJyYXkucHJvdG90eXBlLmV2ZXJ5KGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCmV2ZXJ5OmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxNjApO24obi5QK24uRiohcigyOSkoW10ucmVkdWNlLCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjE4IC8gMTUuNC40LjIxIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UoY2FsbGJhY2tmbiBbLCBpbml0aWFsVmFsdWVdKQpyZWR1Y2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGgsYXJndW1lbnRzWzFdLCExKX19KX0sLyogMzA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTYwKTtuKG4uUCtuLkYqIXIoMjkpKFtdLnJlZHVjZVJpZ2h0LCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjE5IC8gMTUuNC40LjIyIEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodChjYWxsYmFja2ZuIFssIGluaXRpYWxWYWx1ZV0pCnJlZHVjZVJpZ2h0OmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoLGFyZ3VtZW50c1sxXSwhMCl9fSl9LC8qIDMwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDc5KSghMSksbz1bXS5pbmRleE9mLGE9ISFvJiYxL1sxXS5pbmRleE9mKDEsLTApPDA7bihuLlArbi5GKihhfHwhcigyOSkobykpLCJBcnJheSIsewovLyAyMi4xLjMuMTEgLyAxNS40LjQuMTQgQXJyYXkucHJvdG90eXBlLmluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKQppbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiBhP28uYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwOmkodGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMwOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksaT1yKDIzKSxvPXIoMzMpLGE9cigxMCkscz1bXS5sYXN0SW5kZXhPZix1PSEhcyYmMS9bMV0ubGFzdEluZGV4T2YoMSwtMCk8MDtuKG4uUCtuLkYqKHV8fCFyKDI5KShzKSksIkFycmF5Iix7Ci8vIDIyLjEuMy4xNCAvIDE1LjQuNC4xNSBBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKQpsYXN0SW5kZXhPZjpmdW5jdGlvbihlKXsKLy8gY29udmVydCAtMCB0byArMAppZih1KXJldHVybiBzLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8MDt2YXIgdD1pKHRoaXMpLHI9YSh0Lmxlbmd0aCksbj1yLTE7Zm9yKGFyZ3VtZW50cy5sZW5ndGg+MSYmKG49TWF0aC5taW4obixvKGFyZ3VtZW50c1sxXSkpKSxuPDAmJihuPXIrbik7bj49MDtuLS0paWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbnx8MDtyZXR1cm4tMX19KX0sLyogMzA5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjIuMS4zLjMgQXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCwgZW5kID0gdGhpcy5sZW5ndGgpCnZhciBuPXIoMCk7bihuLlAsIkFycmF5Iix7Y29weVdpdGhpbjpyKDE2MSl9KSxyKDQxKSgiY29weVdpdGhpbiIpfSwvKiAzMTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMi4xLjMuNiBBcnJheS5wcm90b3R5cGUuZmlsbCh2YWx1ZSwgc3RhcnQgPSAwLCBlbmQgPSB0aGlzLmxlbmd0aCkKdmFyIG49cigwKTtuKG4uUCwiQXJyYXkiLHtmaWxsOnIoMTIwKX0pLHIoNDEpKCJmaWxsIil9LC8qIDMxMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMi4xLjMuOCBBcnJheS5wcm90b3R5cGUuZmluZChwcmVkaWNhdGUsIHRoaXNBcmcgPSB1bmRlZmluZWQpCnZhciBuPXIoMCksaT1yKDM1KSg1KSxvPSEwOwovLyBTaG91bGRuJ3Qgc2tpcCBob2xlcwoiZmluZCJpbltdJiZBcnJheSgxKS5maW5kKGZ1bmN0aW9uKCl7bz0hMX0pLG4obi5QK24uRipvLCJBcnJheSIse2ZpbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxyKDQxKSgiZmluZCIpfSwvKiAzMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjIuMS4zLjkgQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleChwcmVkaWNhdGUsIHRoaXNBcmcgPSB1bmRlZmluZWQpCnZhciBuPXIoMCksaT1yKDM1KSg2KSxvPSJmaW5kSW5kZXgiLGE9ITA7Ci8vIFNob3VsZG4ndCBza2lwIGhvbGVzCm8gaW5bXSYmQXJyYXkoMSlbb10oZnVuY3Rpb24oKXthPSExfSksbihuLlArbi5GKmEsIkFycmF5Iix7ZmluZEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSkscig0MSkobyl9LC8qIDMxMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig1NCkoIkFycmF5Iil9LC8qIDMxNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxpPXIoMTA3KSxvPXIoOSkuZixhPXIoNTMpLmYscz1yKDgyKSx1PXIoODQpLGM9bi5SZWdFeHAsZj1jLGw9Yy5wcm90b3R5cGUsZD0vYS9nLHA9L2EvZyx5PW5ldyBjKGQpIT09ZDtpZihyKDgpJiYoIXl8fHIoNSkoZnVuY3Rpb24oKXsKLy8gUmVnRXhwIGNvbnN0cnVjdG9yIGNhbiBhbHRlciBmbGFncyBhbmQgSXNSZWdFeHAgd29ya3MgY29ycmVjdCB3aXRoIEBAbWF0Y2gKcmV0dXJuIHBbcig3KSgibWF0Y2giKV09ITEsYyhkKSE9ZHx8YyhwKT09cHx8Ii9hL2kiIT1jKGQsImkiKX0pKSl7Yz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMgaW5zdGFuY2VvZiBjLG49cyhlKSxvPXZvaWQgMD09PXQ7cmV0dXJuIXImJm4mJmUuY29uc3RydWN0b3I9PT1jJiZvP2U6aSh5P25ldyBmKG4mJiFvP2Uuc291cmNlOmUsdCk6Zigobj1lIGluc3RhbmNlb2YgYyk/ZS5zb3VyY2U6ZSxuJiZvP3UuY2FsbChlKTp0KSxyP3RoaXM6bCxjKX07Zm9yKHZhciBoPWEoZiksdj0wO2gubGVuZ3RoPnY7KSFmdW5jdGlvbihlKXtlIGluIGN8fG8oYyxlLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZbZV19LHNldDpmdW5jdGlvbih0KXtmW2VdPXR9fSl9KGhbdisrXSk7bC5jb25zdHJ1Y3Rvcj1jLGMucHJvdG90eXBlPWwscigxOSkobiwiUmVnRXhwIixjKX1yKDU0KSgiUmVnRXhwIil9LC8qIDMxNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3IoMTYzKTt2YXIgbj1yKDMpLGk9cig4NCksbz1yKDgpLGE9Ly4vLnRvU3RyaW5nLHM9ZnVuY3Rpb24oZSl7cigxOSkoUmVnRXhwLnByb3RvdHlwZSwidG9TdHJpbmciLGUsITApfTsKLy8gMjEuMi41LjE0IFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcoKQpyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuIi9hL2IiIT1hLmNhbGwoe3NvdXJjZToiYSIsZmxhZ3M6ImIifSl9KT9zKGZ1bmN0aW9uKCl7dmFyIGU9bih0aGlzKTtyZXR1cm4iLyIuY29uY2F0KGUuc291cmNlLCIvIiwiZmxhZ3MiaW4gZT9lLmZsYWdzOiFvJiZlIGluc3RhbmNlb2YgUmVnRXhwP2kuY2FsbChlKTp2b2lkIDApfSk6InRvU3RyaW5nIiE9YS5uYW1lJiZzKGZ1bmN0aW9uKCl7cmV0dXJuIGEuY2FsbCh0aGlzKX0pfSwvKiAzMTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBAQG1hdGNoIGxvZ2ljCnIoODUpKCJtYXRjaCIsMSxmdW5jdGlvbihlLHQscil7Ci8vIDIxLjEuMy4xMSBTdHJpbmcucHJvdG90eXBlLm1hdGNoKHJlZ2V4cCkKcmV0dXJuW2Z1bmN0aW9uKHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKHRoaXMpLGk9dm9pZCAwPT1yP3ZvaWQgMDpyW3RdO3JldHVybiB2b2lkIDAhPT1pP2kuY2FsbChyLG4pOm5ldyBSZWdFeHAocilbdF0oU3RyaW5nKG4pKX0scl19KX0sLyogMzE3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gQEByZXBsYWNlIGxvZ2ljCnIoODUpKCJyZXBsYWNlIiwyLGZ1bmN0aW9uKGUsdCxyKXsKLy8gMjEuMS4zLjE0IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZShzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKQpyZXR1cm5bZnVuY3Rpb24obixpKXsidXNlIHN0cmljdCI7dmFyIG89ZSh0aGlzKSxhPXZvaWQgMD09bj92b2lkIDA6blt0XTtyZXR1cm4gdm9pZCAwIT09YT9hLmNhbGwobixvLGkpOnIuY2FsbChTdHJpbmcobyksbixpKX0scl19KX0sLyogMzE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gQEBzZWFyY2ggbG9naWMKcig4NSkoInNlYXJjaCIsMSxmdW5jdGlvbihlLHQscil7Ci8vIDIxLjEuMy4xNSBTdHJpbmcucHJvdG90eXBlLnNlYXJjaChyZWdleHApCnJldHVybltmdW5jdGlvbihyKXsidXNlIHN0cmljdCI7dmFyIG49ZSh0aGlzKSxpPXZvaWQgMD09cj92b2lkIDA6clt0XTtyZXR1cm4gdm9pZCAwIT09aT9pLmNhbGwocixuKTpuZXcgUmVnRXhwKHIpW3RdKFN0cmluZyhuKSl9LHJdfSl9LC8qIDMxOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIEBAc3BsaXQgbG9naWMKcig4NSkoInNwbGl0IiwyLGZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dmFyIGk9cig4Miksbz1uLGE9W10ucHVzaCxzPSJsZW5ndGgiO2lmKCJjIj09ImFiYmMiLnNwbGl0KC8oYikqLylbMV18fDQhPSJ0ZXN0Ii5zcGxpdCgvKD86KS8sLTEpW3NdfHwyIT0iYWIiLnNwbGl0KC8oPzphYikqLylbc118fDQhPSIuIi5zcGxpdCgvKC4/KSguPykvKVtzXXx8Ii4iLnNwbGl0KC8oKSgpLylbc10+MXx8IiIuc3BsaXQoLy4/Lylbc10pe3ZhciB1PXZvaWQgMD09PS8oKT8/Ly5leGVjKCIiKVsxXTsvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cAovLyBiYXNlZCBvbiBlczUtc2hpbSBpbXBsZW1lbnRhdGlvbiwgbmVlZCB0byByZXdvcmsgaXQKbj1mdW5jdGlvbihlLHQpe3ZhciByPVN0cmluZyh0aGlzKTtpZih2b2lkIDA9PT1lJiYwPT09dClyZXR1cm5bXTsKLy8gSWYgYHNlcGFyYXRvcmAgaXMgbm90IGEgcmVnZXgsIHVzZSBuYXRpdmUgc3BsaXQKaWYoIWkoZSkpcmV0dXJuIG8uY2FsbChyLGUsdCk7dmFyIG4sYyxmLGwsZCxwPVtdLHk9KGUuaWdub3JlQ2FzZT8iaSI6IiIpKyhlLm11bHRpbGluZT8ibSI6IiIpKyhlLnVuaWNvZGU/InUiOiIiKSsoZS5zdGlja3k/InkiOiIiKSxoPTAsdj12b2lkIDA9PT10PzQyOTQ5NjcyOTU6dD4+PjAsZz1uZXcgUmVnRXhwKGUuc291cmNlLHkrImciKTtmb3IoCi8vIERvZXNuJ3QgbmVlZCBmbGFncyBneSwgYnV0IHRoZXkgZG9uJ3QgaHVydAp1fHwobj1uZXcgUmVnRXhwKCJeIitnLnNvdXJjZSsiJCg/IVxccykiLHkpKTsoYz1nLmV4ZWMocikpJiYhKCgKLy8gYHNlcGFyYXRvckNvcHkubGFzdEluZGV4YCBpcyBub3QgcmVsaWFibGUgY3Jvc3MtYnJvd3NlcgpmPWMuaW5kZXgrY1swXVtzXSk+aCYmKHAucHVzaChyLnNsaWNlKGgsYy5pbmRleCkpLAovLyBGaXggYnJvd3NlcnMgd2hvc2UgYGV4ZWNgIG1ldGhvZHMgZG9uJ3QgY29uc2lzdGVudGx5IHJldHVybiBgdW5kZWZpbmVkYCBmb3IgTlBDRwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9vcC1mdW5jCiF1JiZjW3NdPjEmJmNbMF0ucmVwbGFjZShuLGZ1bmN0aW9uKCl7Zm9yKGQ9MTtkPGFyZ3VtZW50c1tzXS0yO2QrKyl2b2lkIDA9PT1hcmd1bWVudHNbZF0mJihjW2RdPXZvaWQgMCl9KSxjW3NdPjEmJmMuaW5kZXg8cltzXSYmYS5hcHBseShwLGMuc2xpY2UoMSkpLGw9Y1swXVtzXSxoPWYscFtzXT49dikpOylnLmxhc3RJbmRleD09PWMuaW5kZXgmJmcubGFzdEluZGV4Kys7cmV0dXJuIGg9PT1yW3NdPyFsJiZnLnRlc3QoIiIpfHxwLnB1c2goIiIpOnAucHVzaChyLnNsaWNlKGgpKSxwW3NdPnY/cC5zbGljZSgwLHYpOnB9fWVsc2UiMCIuc3BsaXQodm9pZCAwLDApW3NdJiYobj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT1lJiYwPT09dD9bXTpvLmNhbGwodGhpcyxlLHQpfSk7Ci8vIDIxLjEuMy4xNyBTdHJpbmcucHJvdG90eXBlLnNwbGl0KHNlcGFyYXRvciwgbGltaXQpCnJldHVybltmdW5jdGlvbihyLGkpe3ZhciBvPWUodGhpcyksYT12b2lkIDA9PXI/dm9pZCAwOnJbdF07cmV0dXJuIHZvaWQgMCE9PWE/YS5jYWxsKHIsbyxpKTpuLmNhbGwoU3RyaW5nKG8pLHIsaSl9LG5dfSl9LC8qIDMyMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLGksbyxhLHM9cig0OSksdT1yKDQpLGM9cigyNyksZj1yKDcyKSxsPXIoMCksZD1yKDYpLHA9cigxNikseT1yKDU1KSxoPXIoNTYpLHY9cig4NiksZz1yKDEyMikuc2V0LGI9cigxMjMpKCksbT1yKDEyNCksXz1yKDE2NCksUj1yKDE2NSksdz11LlR5cGVFcnJvcixTPXUucHJvY2VzcyxPPXUuUHJvbWlzZSxQPSJwcm9jZXNzIj09ZihTKSxrPWZ1bmN0aW9uKCl7fSxNPWk9bS5mLEw9ISFmdW5jdGlvbigpe3RyeXsKLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0CnZhciBlPU8ucmVzb2x2ZSgxKSx0PShlLmNvbnN0cnVjdG9yPXt9KVtyKDcpKCJzcGVjaWVzIildPWZ1bmN0aW9uKGUpe2UoayxrKX07Ci8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3QKcmV0dXJuKFB8fCJmdW5jdGlvbiI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZlLnRoZW4oaylpbnN0YW5jZW9mIHR9Y2F0Y2goZSl7fX0oKSx4PWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiEoIWQoZSl8fCJmdW5jdGlvbiIhPXR5cGVvZih0PWUudGhlbikpJiZ0fSxFPWZ1bmN0aW9uKGUsdCl7aWYoIWUuX24pe2UuX249ITA7dmFyIHI9ZS5fYztiKGZ1bmN0aW9uKCl7Zm9yKHZhciBuPWUuX3YsaT0xPT1lLl9zLG89MDtyLmxlbmd0aD5vOykhZnVuY3Rpb24odCl7dmFyIHIsbyxhPWk/dC5vazp0LmZhaWwscz10LnJlc29sdmUsdT10LnJlamVjdCxjPXQuZG9tYWluO3RyeXthPyhpfHwoMj09ZS5faCYmQShlKSxlLl9oPTEpLCEwPT09YT9yPW46KGMmJmMuZW50ZXIoKSxyPWEobiksYyYmYy5leGl0KCkpLHI9PT10LnByb21pc2U/dSh3KCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihvPXgocikpP28uY2FsbChyLHMsdSk6cyhyKSk6dShuKX1jYXRjaChlKXt1KGUpfX0ocltvKytdKTsvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaAplLl9jPVtdLGUuX249ITEsdCYmIWUuX2gmJkQoZSl9KX19LEQ9ZnVuY3Rpb24oZSl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdCxyLG4saT1lLl92LG89VShlKTtpZihvJiYodD1fKGZ1bmN0aW9uKCl7UD9TLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsaSxlKToocj11Lm9udW5oYW5kbGVkcmVqZWN0aW9uKT9yKHtwcm9taXNlOmUscmVhc29uOml9KToobj11LmNvbnNvbGUpJiZuLmVycm9yJiZuLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLGkpfSksCi8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkCmUuX2g9UHx8VShlKT8yOjEpLGUuX2E9dm9pZCAwLG8mJnQuZSl0aHJvdyB0LnZ9KX0sVT1mdW5jdGlvbihlKXtpZigxPT1lLl9oKXJldHVybiExO2Zvcih2YXIgdCxyPWUuX2F8fGUuX2Msbj0wO3IubGVuZ3RoPm47KWlmKHQ9cltuKytdLHQuZmFpbHx8IVUodC5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sQT1mdW5jdGlvbihlKXtnLmNhbGwodSxmdW5jdGlvbigpe3ZhciB0O1A/Uy5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIixlKToodD11Lm9ucmVqZWN0aW9uaGFuZGxlZCkmJnQoe3Byb21pc2U6ZSxyZWFzb246ZS5fdn0pfSl9LGo9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9kfHwodC5fZD0hMCx0PXQuX3d8fHQsLy8gdW53cmFwCnQuX3Y9ZSx0Ll9zPTIsdC5fYXx8KHQuX2E9dC5fYy5zbGljZSgpKSxFKHQsITApKX0sST1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuX2Qpe3IuX2Q9ITAscj1yLl93fHxyOy8vIHVud3JhcAp0cnl7aWYocj09PWUpdGhyb3cgdygiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD14KGUpKT9iKGZ1bmN0aW9uKCl7dmFyIG49e193OnIsX2Q6ITF9Oy8vIHdyYXAKdHJ5e3QuY2FsbChlLGMoSSxuLDEpLGMoaixuLDEpKX1jYXRjaChlKXtqLmNhbGwobixlKX19KTooci5fdj1lLHIuX3M9MSxFKHIsITEpKX1jYXRjaChlKXtqLmNhbGwoe193OnIsX2Q6ITF9LGUpfX19OwovLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbApMfHwoCi8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpCk89ZnVuY3Rpb24oZSl7eSh0aGlzLE8sIlByb21pc2UiLCJfaCIpLHAoZSksbi5jYWxsKHRoaXMpO3RyeXtlKGMoSSx0aGlzLDEpLGMoaix0aGlzLDEpKX1jYXRjaChlKXtqLmNhbGwodGhpcyxlKX19LAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKbj1mdW5jdGlvbihlKXt0aGlzLl9jPVtdLC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9ucwp0aGlzLl9hPXZvaWQgMCwvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9ucwp0aGlzLl9zPTAsLy8gPC0gc3RhdGUKdGhpcy5fZD0hMSwvLyA8LSBkb25lCnRoaXMuX3Y9dm9pZCAwLC8vIDwtIHZhbHVlCnRoaXMuX2g9MCwvLyA8LSByZWplY3Rpb24gc3RhdGUsIDAgLSBkZWZhdWx0LCAxIC0gaGFuZGxlZCwgMiAtIHVuaGFuZGxlZAp0aGlzLl9uPSExfSxuLnByb3RvdHlwZT1yKDU3KShPLnByb3RvdHlwZSx7Ci8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpCnRoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1NKHYodGhpcyxPKSk7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LHIuZG9tYWluPVA/Uy5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChyKSx0aGlzLl9hJiZ0aGlzLl9hLnB1c2gociksdGhpcy5fcyYmRSh0aGlzLCExKSxyLnByb21pc2V9LAovLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKQpjYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSxvPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG47dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPWMoSSxlLDEpLHRoaXMucmVqZWN0PWMoaixlLDEpfSxtLmY9TT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PU98fGU9PT1hP25ldyBvKGUpOmkoZSl9KSxsKGwuRytsLlcrbC5GKiFMLHtQcm9taXNlOk99KSxyKDYxKShPLCJQcm9taXNlIikscig1NCkoIlByb21pc2UiKSxhPXIoMzApLlByb21pc2UsCi8vIHN0YXRpY3MKbChsLlMrbC5GKiFMLCJQcm9taXNlIix7Ci8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCnJlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1NKHRoaXMpO3JldHVybigwLHQucmVqZWN0KShlKSx0LnByb21pc2V9fSksbChsLlMrbC5GKihzfHwhTCksIlByb21pc2UiLHsKLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCnJlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIFIocyYmdGhpcz09PWE/Tzp0aGlzLGUpfX0pLGwobC5TK2wuRiohKEwmJnIoODMpKGZ1bmN0aW9uKGUpe08uYWxsKGUpLmNhdGNoKGspfSkpLCJQcm9taXNlIix7Ci8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKQphbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPU0odCksbj1yLnJlc29sdmUsaT1yLnJlamVjdCxvPV8oZnVuY3Rpb24oKXt2YXIgcj1bXSxvPTAsYT0xO2goZSwhMSxmdW5jdGlvbihlKXt2YXIgcz1vKyssdT0hMTtyLnB1c2godm9pZCAwKSxhKyssdC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7dXx8KHU9ITAscltzXT1lLC0tYXx8bihyKSl9LGkpfSksLS1hfHxuKHIpfSk7cmV0dXJuIG8uZSYmaShvLnYpLHIucHJvbWlzZX0sCi8vIDI1LjQuNC40IFByb21pc2UucmFjZShpdGVyYWJsZSkKcmFjZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9TSh0KSxuPXIucmVqZWN0LGk9XyhmdW5jdGlvbigpe2goZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBpLmUmJm4oaS52KSxyLnByb21pc2V9fSl9LC8qIDMyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTcwKSxpPXIoNjQpOwovLyAyMy40IFdlYWtTZXQgT2JqZWN0cwpyKDg3KSgiV2Vha1NldCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7Ci8vIDIzLjQuMy4xIFdlYWtTZXQucHJvdG90eXBlLmFkZCh2YWx1ZSkKYWRkOmZ1bmN0aW9uKGUpe3JldHVybiBuLmRlZihpKHRoaXMsIldlYWtTZXQiKSxlLCEwKX19LG4sITEsITApfSwvKiAzMjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cig4OCksbz1yKDEyNSksYT1yKDMpLHM9cig1MSksdT1yKDEwKSxjPXIoNiksZj1yKDQpLkFycmF5QnVmZmVyLGw9cig4NiksZD1vLkFycmF5QnVmZmVyLHA9by5EYXRhVmlldyx5PWkuQUJWJiZmLmlzVmlldyxoPWQucHJvdG90eXBlLnNsaWNlLHY9aS5WSUVXO24obi5HK24uVytuLkYqKGYhPT1kKSx7QXJyYXlCdWZmZXI6ZH0pLG4obi5TK24uRiohaS5DT05TVFIsIkFycmF5QnVmZmVyIix7Ci8vIDI0LjEuMy4xIEFycmF5QnVmZmVyLmlzVmlldyhhcmcpCmlzVmlldzpmdW5jdGlvbihlKXtyZXR1cm4geSYmeShlKXx8YyhlKSYmdiBpbiBlfX0pLG4obi5QK24uVStuLkYqcig1KShmdW5jdGlvbigpe3JldHVybiFuZXcgZCgyKS5zbGljZSgxLHZvaWQgMCkuYnl0ZUxlbmd0aH0pLCJBcnJheUJ1ZmZlciIsewovLyAyNC4xLjQuMyBBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2Uoc3RhcnQsIGVuZCkKc2xpY2U6ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1oJiZ2b2lkIDA9PT10KXJldHVybiBoLmNhbGwoYSh0aGlzKSxlKTtmb3IoLy8gRkYgZml4CnZhciByPWEodGhpcykuYnl0ZUxlbmd0aCxuPXMoZSxyKSxpPXModm9pZCAwPT09dD9yOnQsciksbz1uZXcobCh0aGlzLGQpKSh1KGktbikpLGM9bmV3IHAodGhpcyksZj1uZXcgcChvKSx5PTA7bjxpOylmLnNldFVpbnQ4KHkrKyxjLmdldFVpbnQ4KG4rKykpO3JldHVybiBvfX0pLHIoNTQpKCJBcnJheUJ1ZmZlciIpfSwvKiAzMjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCk7bihuLkcrbi5XK24uRiohcig4OCkuQUJWLHtEYXRhVmlldzpyKDEyNSkuRGF0YVZpZXd9KX0sLyogMzI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiSW50OCIsMSxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzYpKCJVaW50OCIsMSxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzYpKCJVaW50OCIsMSxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0sITApfSwvKiAzMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzYpKCJJbnQxNiIsMixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzYpKCJVaW50MTYiLDIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzI5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiSW50MzIiLDQsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzMwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiVWludDMyIiw0LGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNikoIkZsb2F0MzIiLDQsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzMyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM2KSgiRmxvYXQ2NCIsOCxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjEgUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmd1bWVudCwgYXJndW1lbnRzTGlzdCkKdmFyIG49cigwKSxpPXIoMTYpLG89cigzKSxhPShyKDQpLlJlZmxlY3R8fHt9KS5hcHBseSxzPUZ1bmN0aW9uLmFwcGx5OwovLyBNUyBFZGdlIGFyZ3VtZW50c0xpc3QgYXJndW1lbnQgaXMgb3B0aW9uYWwKbihuLlMrbi5GKiFyKDUpKGZ1bmN0aW9uKCl7YShmdW5jdGlvbigpe30pfSksIlJlZmxlY3QiLHthcHBseTpmdW5jdGlvbihlLHQscil7dmFyIG49aShlKSx1PW8ocik7cmV0dXJuIGE/YShuLHQsdSk6cy5jYWxsKG4sdCx1KX19KX0sLyogMzM0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS4yIFJlZmxlY3QuY29uc3RydWN0KHRhcmdldCwgYXJndW1lbnRzTGlzdCBbLCBuZXdUYXJnZXRdKQp2YXIgbj1yKDApLGk9cig1Miksbz1yKDE2KSxhPXIoMykscz1yKDYpLHU9cig1KSxjPXIoMTUxKSxmPShyKDQpLlJlZmxlY3R8fHt9KS5jb25zdHJ1Y3QsbD11KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gRigpe31yZXR1cm4hKGYoZnVuY3Rpb24oKXt9LFtdLEYpaW5zdGFuY2VvZiBGKX0pLGQ9IXUoZnVuY3Rpb24oKXtmKGZ1bmN0aW9uKCl7fSl9KTtuKG4uUytuLkYqKGx8fGQpLCJSZWZsZWN0Iix7Y29uc3RydWN0OmZ1bmN0aW9uKGUsdCl7byhlKSxhKHQpO3ZhciByPWFyZ3VtZW50cy5sZW5ndGg8Mz9lOm8oYXJndW1lbnRzWzJdKTtpZihkJiYhbClyZXR1cm4gZihlLHQscik7aWYoZT09cil7Ci8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgb3B0aW1pemF0aW9uIGZvciAwLTQgYXJndW1lbnRzCnN3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHRbMF0pO2Nhc2UgMjpyZXR1cm4gbmV3IGUodFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG5ldyBlKHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG5ldyBlKHRbMF0sdFsxXSx0WzJdLHRbM10pfQovLyB3L28gYWx0ZXJlZCBuZXdUYXJnZXQsIGxvdCBvZiBhcmd1bWVudHMgY2FzZQp2YXIgbj1bbnVsbF07cmV0dXJuIG4ucHVzaC5hcHBseShuLHQpLG5ldyhjLmFwcGx5KGUsbikpfQovLyB3aXRoIGFsdGVyZWQgbmV3VGFyZ2V0LCBub3Qgc3VwcG9ydCBidWlsdC1pbiBjb25zdHJ1Y3RvcnMKdmFyIHU9ci5wcm90b3R5cGUscD1pKHModSk/dTpPYmplY3QucHJvdG90eXBlKSx5PUZ1bmN0aW9uLmFwcGx5LmNhbGwoZSxwLHQpO3JldHVybiBzKHkpP3k6cH19KX0sLyogMzM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS4zIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlcykKdmFyIG49cig5KSxpPXIoMCksbz1yKDMpLGE9cigzMSk7Ci8vIE1TIEVkZ2UgaGFzIGJyb2tlbiBSZWZsZWN0LmRlZmluZVByb3BlcnR5IC0gdGhyb3dpbmcgaW5zdGVhZCBvZiByZXR1cm5pbmcgZmFsc2UKaShpLlMraS5GKnIoNSkoZnVuY3Rpb24oKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmClJlZmxlY3QuZGVmaW5lUHJvcGVydHkobi5mKHt9LDEse3ZhbHVlOjF9KSwxLHt2YWx1ZToyfSl9KSwiUmVmbGVjdCIse2RlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxyKXtvKGUpLHQ9YSh0LCEwKSxvKHIpO3RyeXtyZXR1cm4gbi5mKGUsdCxyKSwhMH1jYXRjaChlKXtyZXR1cm4hMX19fSl9LC8qIDMzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuNCBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHlLZXkpCnZhciBuPXIoMCksaT1yKDI0KS5mLG89cigzKTtuKG4uUywiUmVmbGVjdCIse2RlbGV0ZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCl7dmFyIHI9aShvKGUpLHQpO3JldHVybiEociYmIXIuY29uZmlndXJhYmxlKSYmZGVsZXRlIGVbdF19fSl9LC8qIDMzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyNi4xLjUgUmVmbGVjdC5lbnVtZXJhdGUodGFyZ2V0KQp2YXIgbj1yKDApLGk9cigzKSxvPWZ1bmN0aW9uKGUpe3RoaXMuX3Q9aShlKSwvLyB0YXJnZXQKdGhpcy5faT0wOy8vIG5leHQgaW5kZXgKdmFyIHQscj10aGlzLl9rPVtdO2Zvcih0IGluIGUpci5wdXNoKHQpfTtyKDExMykobywiT2JqZWN0IixmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxyPXQuX2s7ZG97aWYodC5faT49ci5sZW5ndGgpcmV0dXJue3ZhbHVlOnZvaWQgMCxkb25lOiEwfX13aGlsZSghKChlPXJbdC5faSsrXSlpbiB0Ll90KSk7cmV0dXJue3ZhbHVlOmUsZG9uZTohMX19KSxuKG4uUywiUmVmbGVjdCIse2VudW1lcmF0ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8oZSl9fSl9LC8qIDMzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZnVuY3Rpb24gZ2V0KGUsdCl7dmFyIHIsYSxjPWFyZ3VtZW50cy5sZW5ndGg8Mz9lOmFyZ3VtZW50c1syXTtyZXR1cm4gdShlKT09PWM/ZVt0XToocj1uLmYoZSx0KSk/byhyLCJ2YWx1ZSIpP3IudmFsdWU6dm9pZCAwIT09ci5nZXQ/ci5nZXQuY2FsbChjKTp2b2lkIDA6cyhhPWkoZSkpP2dldChhLHQsYyk6dm9pZCAwfQovLyAyNi4xLjYgUmVmbGVjdC5nZXQodGFyZ2V0LCBwcm9wZXJ0eUtleSBbLCByZWNlaXZlcl0pCnZhciBuPXIoMjQpLGk9cigyNSksbz1yKDE3KSxhPXIoMCkscz1yKDYpLHU9cigzKTthKGEuUywiUmVmbGVjdCIse2dldDpnZXR9KX0sLyogMzM5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS43IFJlZmxlY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHlLZXkpCnZhciBuPXIoMjQpLGk9cigwKSxvPXIoMyk7aShpLlMsIlJlZmxlY3QiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5mKG8oZSksdCl9fSl9LC8qIDM0MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuOCBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCkKdmFyIG49cigwKSxpPXIoMjUpLG89cigzKTtuKG4uUywiUmVmbGVjdCIse2dldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUpe3JldHVybiBpKG8oZSkpfX0pfSwvKiAzNDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjkgUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wZXJ0eUtleSkKdmFyIG49cigwKTtuKG4uUywiUmVmbGVjdCIse2hhczpmdW5jdGlvbihlLHQpe3JldHVybiB0IGluIGV9fSl9LC8qIDM0MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTAgUmVmbGVjdC5pc0V4dGVuc2libGUodGFyZ2V0KQp2YXIgbj1yKDApLGk9cigzKSxvPU9iamVjdC5pc0V4dGVuc2libGU7bihuLlMsIlJlZmxlY3QiLHtpc0V4dGVuc2libGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSksIW98fG8oZSl9fSl9LC8qIDM0MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTEgUmVmbGVjdC5vd25LZXlzKHRhcmdldCkKdmFyIG49cigwKTtuKG4uUywiUmVmbGVjdCIse293bktleXM6cigxNzIpfSl9LC8qIDM0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTIgUmVmbGVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpCnZhciBuPXIoMCksaT1yKDMpLG89T2JqZWN0LnByZXZlbnRFeHRlbnNpb25zO24obi5TLCJSZWZsZWN0Iix7cHJldmVudEV4dGVuc2lvbnM6ZnVuY3Rpb24oZSl7aShlKTt0cnl7cmV0dXJuIG8mJm8oZSksITB9Y2F0Y2goZSl7cmV0dXJuITF9fX0pfSwvKiAzNDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIHNldChlLHQscil7dmFyIHMsbCxkPWFyZ3VtZW50cy5sZW5ndGg8ND9lOmFyZ3VtZW50c1szXSxwPWkuZihjKGUpLHQpO2lmKCFwKXtpZihmKGw9byhlKSkpcmV0dXJuIHNldChsLHQscixkKTtwPXUoMCl9cmV0dXJuIGEocCwidmFsdWUiKT8hKCExPT09cC53cml0YWJsZXx8IWYoZCkpJiYocz1pLmYoZCx0KXx8dSgwKSxzLnZhbHVlPXIsbi5mKGQsdCxzKSwhMCk6dm9pZCAwIT09cC5zZXQmJihwLnNldC5jYWxsKGQsciksITApfQovLyAyNi4xLjEzIFJlZmxlY3Quc2V0KHRhcmdldCwgcHJvcGVydHlLZXksIFYgWywgcmVjZWl2ZXJdKQp2YXIgbj1yKDkpLGk9cigyNCksbz1yKDI1KSxhPXIoMTcpLHM9cigwKSx1PXIoNDcpLGM9cigzKSxmPXIoNik7cyhzLlMsIlJlZmxlY3QiLHtzZXQ6c2V0fSl9LC8qIDM0NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuMTQgUmVmbGVjdC5zZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvKQp2YXIgbj1yKDApLGk9cigxMDUpO2kmJm4obi5TLCJSZWZsZWN0Iix7c2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oZSx0KXtpLmNoZWNrKGUsdCk7dHJ5e3JldHVybiBpLnNldChlLHQpLCEwfWNhdGNoKGUpe3JldHVybiExfX19KX0sLyogMzQ3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L0FycmF5LnByb3RvdHlwZS5pbmNsdWRlcwp2YXIgbj1yKDApLGk9cig3OSkoITApO24obi5QLCJBcnJheSIse2luY2x1ZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBpKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSkscig0MSkoImluY2x1ZGVzIil9LC8qIDM0OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLWZsYXRNYXAvI3NlYy1BcnJheS5wcm90b3R5cGUuZmxhdE1hcAp2YXIgbj1yKDApLGk9cigxNzMpLG89cigxNCksYT1yKDEwKSxzPXIoMTYpLHU9cigxMTkpO24obi5QLCJBcnJheSIse2ZsYXRNYXA6ZnVuY3Rpb24oZSl7dmFyIHQscixuPW8odGhpcyk7cmV0dXJuIHMoZSksdD1hKG4ubGVuZ3RoKSxyPXUobiwwKSxpKHIsbixuLHQsMCwxLGUsYXJndW1lbnRzWzFdKSxyfX0pLHIoNDEpKCJmbGF0TWFwIil9LC8qIDM0OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLWZsYXRNYXAvI3NlYy1BcnJheS5wcm90b3R5cGUuZmxhdHRlbgp2YXIgbj1yKDApLGk9cigxNzMpLG89cigxNCksYT1yKDEwKSxzPXIoMzMpLHU9cigxMTkpO24obi5QLCJBcnJheSIse2ZsYXR0ZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHNbMF0sdD1vKHRoaXMpLHI9YSh0Lmxlbmd0aCksbj11KHQsMCk7cmV0dXJuIGkobix0LHQsciwwLHZvaWQgMD09PWU/MTpzKGUpKSxufX0pLHIoNDEpKCJmbGF0dGVuIil9LC8qIDM1MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vbWF0aGlhc2J5bmVucy9TdHJpbmcucHJvdG90eXBlLmF0CnZhciBuPXIoMCksaT1yKDExMSkoITApO24obi5QLCJTdHJpbmciLHthdDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUpfX0pfSwvKiAzNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtc3RyaW5nLXBhZC1zdGFydC1lbmQKdmFyIG49cigwKSxpPXIoMTc0KTtuKG4uUCwiU3RyaW5nIix7cGFkU3RhcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGkodGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCEwKX19KX0sLyogMzUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXN0cmluZy1wYWQtc3RhcnQtZW5kCnZhciBuPXIoMCksaT1yKDE3NCk7bihuLlAsIlN0cmluZyIse3BhZEVuZDpmdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsITEpfX0pfSwvKiAzNTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlYm1hcmtiYWdlL2VjbWFzY3JpcHQtc3RyaW5nLWxlZnQtcmlnaHQtdHJpbQpyKDYyKSgidHJpbUxlZnQiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsMSl9fSwidHJpbVN0YXJ0Iil9LC8qIDM1NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vc2VibWFya2JhZ2UvZWNtYXNjcmlwdC1zdHJpbmctbGVmdC1yaWdodC10cmltCnIoNjIpKCJ0cmltUmlnaHQiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsMil9fSwidHJpbUVuZCIpfSwvKiAzNTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9TdHJpbmcucHJvdG90eXBlLm1hdGNoQWxsLwp2YXIgbj1yKDApLGk9cigzMiksbz1yKDEwKSxhPXIoODIpLHM9cig4NCksdT1SZWdFeHAucHJvdG90eXBlLGM9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yPWUsdGhpcy5fcz10fTtyKDExMykoYywiUmVnRXhwIFN0cmluZyIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9yLmV4ZWModGhpcy5fcyk7cmV0dXJue3ZhbHVlOmUsZG9uZTpudWxsPT09ZX19KSxuKG4uUCwiU3RyaW5nIix7bWF0Y2hBbGw6ZnVuY3Rpb24oZSl7aWYoaSh0aGlzKSwhYShlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhIHJlZ2V4cCEiKTt2YXIgdD1TdHJpbmcodGhpcykscj0iZmxhZ3MiaW4gdT9TdHJpbmcoZS5mbGFncyk6cy5jYWxsKGUpLG49bmV3IFJlZ0V4cChlLnNvdXJjZSx+ci5pbmRleE9mKCJnIik/cjoiZyIrcik7cmV0dXJuIG4ubGFzdEluZGV4PW8oZS5sYXN0SW5kZXgpLG5ldyBjKG4sdCl9fSl9LC8qIDM1NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxMDEpKCJhc3luY0l0ZXJhdG9yIil9LC8qIDM1NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxMDEpKCJvYnNlcnZhYmxlIil9LC8qIDM1OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC1nZXRvd25wcm9wZXJ0eWRlc2NyaXB0b3JzCnZhciBuPXIoMCksaT1yKDE3Miksbz1yKDIzKSxhPXIoMjQpLHM9cigxMTcpO24obi5TLCJPYmplY3QiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyLG49byhlKSx1PWEuZixjPWkobiksZj17fSxsPTA7Yy5sZW5ndGg+bDspdm9pZCAwIT09KHI9dShuLHQ9Y1tsKytdKSkmJnMoZix0LHIpO3JldHVybiBmfX0pfSwvKiAzNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtdmFsdWVzLWVudHJpZXMKdmFyIG49cigwKSxpPXIoMTc1KSghMSk7bihuLlMsIk9iamVjdCIse3ZhbHVlczpmdW5jdGlvbihlKXtyZXR1cm4gaShlKX19KX0sLyogMzYwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LXZhbHVlcy1lbnRyaWVzCnZhciBuPXIoMCksaT1yKDE3NSkoITApO24obi5TLCJPYmplY3QiLHtlbnRyaWVzOmZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfX0pfSwvKiAzNjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxNCksbz1yKDE2KSxhPXIoOSk7Ci8vIEIuMi4yLjIgT2JqZWN0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKFAsIGdldHRlcikKcig4KSYmbihuLlArcig4OSksIk9iamVjdCIse19fZGVmaW5lR2V0dGVyX186ZnVuY3Rpb24oZSx0KXthLmYoaSh0aGlzKSxlLHtnZXQ6byh0KSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX0pfSwvKiAzNjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxNCksbz1yKDE2KSxhPXIoOSk7Ci8vIEIuMi4yLjMgT2JqZWN0LnByb3RvdHlwZS5fX2RlZmluZVNldHRlcl9fKFAsIHNldHRlcikKcig4KSYmbihuLlArcig4OSksIk9iamVjdCIse19fZGVmaW5lU2V0dGVyX186ZnVuY3Rpb24oZSx0KXthLmYoaSh0aGlzKSxlLHtzZXQ6byh0KSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX0pfSwvKiAzNjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLGk9cigxNCksbz1yKDMxKSxhPXIoMjUpLHM9cigyNCkuZjsKLy8gQi4yLjIuNCBPYmplY3QucHJvdG90eXBlLl9fbG9va3VwR2V0dGVyX18oUCkKcig4KSYmbihuLlArcig4OSksIk9iamVjdCIse19fbG9va3VwR2V0dGVyX186ZnVuY3Rpb24oZSl7dmFyIHQscj1pKHRoaXMpLG49byhlLCEwKTtkb3tpZih0PXMocixuKSlyZXR1cm4gdC5nZXR9d2hpbGUocj1hKHIpKX19KX0sLyogMzY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxpPXIoMTQpLG89cigzMSksYT1yKDI1KSxzPXIoMjQpLmY7Ci8vIEIuMi4yLjUgT2JqZWN0LnByb3RvdHlwZS5fX2xvb2t1cFNldHRlcl9fKFApCnIoOCkmJm4obi5QK3IoODkpLCJPYmplY3QiLHtfX2xvb2t1cFNldHRlcl9fOmZ1bmN0aW9uKGUpe3ZhciB0LHI9aSh0aGlzKSxuPW8oZSwhMCk7ZG97aWYodD1zKHIsbikpcmV0dXJuIHQuc2V0fXdoaWxlKHI9YShyKSl9fSl9LC8qIDM2NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EYXZpZEJydWFudC9NYXAtU2V0LnByb3RvdHlwZS50b0pTT04KdmFyIG49cigwKTtuKG4uUCtuLlIsIk1hcCIse3RvSlNPTjpyKDE3NikoIk1hcCIpfSl9LC8qIDM2NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EYXZpZEJydWFudC9NYXAtU2V0LnByb3RvdHlwZS50b0pTT04KdmFyIG49cigwKTtuKG4uUCtuLlIsIlNldCIse3RvSlNPTjpyKDE3NikoIlNldCIpfSl9LC8qIDM2NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLW1hcC5vZgpyKDkwKSgiTWFwIil9LC8qIDM2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXNldC5vZgpyKDkwKSgiU2V0Iil9LC8qIDM2OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXdlYWttYXAub2YKcig5MCkoIldlYWtNYXAiKX0sLyogMzcwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtd2Vha3NldC5vZgpyKDkwKSgiV2Vha1NldCIpfSwvKiAzNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy1tYXAuZnJvbQpyKDkxKSgiTWFwIil9LC8qIDM3MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXNldC5mcm9tCnIoOTEpKCJTZXQiKX0sLyogMzczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtd2Vha21hcC5mcm9tCnIoOTEpKCJXZWFrTWFwIil9LC8qIDM3NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLXdlYWtzZXQuZnJvbQpyKDkxKSgiV2Vha1NldCIpfSwvKiAzNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1nbG9iYWwKdmFyIG49cigwKTtuKG4uRyx7Z2xvYmFsOnIoNCl9KX0sLyogMzc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtZ2xvYmFsCnZhciBuPXIoMCk7bihuLlMsIlN5c3RlbSIse2dsb2JhbDpyKDQpfSl9LC8qIDM3NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9samhhcmIvcHJvcG9zYWwtaXMtZXJyb3IKdmFyIG49cigwKSxpPXIoMjgpO24obi5TLCJFcnJvciIse2lzRXJyb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIkVycm9yIj09PWkoZSl9fSl9LC8qIDM3OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2NsYW1wOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gTWF0aC5taW4ocixNYXRoLm1heCh0LGUpKX19KX0sLyogMzc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7REVHX1BFUl9SQUQ6TWF0aC5QSS8xODB9KX0sLyogMzgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApLGk9MTgwL01hdGguUEk7bihuLlMsIk1hdGgiLHtkZWdyZWVzOmZ1bmN0aW9uKGUpe3JldHVybiBlKml9fSl9LC8qIDM4MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKSxpPXIoMTc4KSxvPXIoMTU4KTtuKG4uUywiTWF0aCIse2ZzY2FsZTpmdW5jdGlvbihlLHQscixuLGEpe3JldHVybiBvKGkoZSx0LHIsbixhKSl9fSl9LC8qIDM4MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtpYWRkaDpmdW5jdGlvbihlLHQscixuKXt2YXIgaT1lPj4+MCxvPXQ+Pj4wLGE9cj4+PjA7cmV0dXJuIG8rKG4+Pj4wKSsoKGkmYXwoaXxhKSZ+KGkrYT4+PjApKT4+PjMxKXwwfX0pfSwvKiAzODMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwMwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7aXN1Ymg6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9ZT4+PjAsbz10Pj4+MCxhPXI+Pj4wO3JldHVybiBvLShuPj4+MCktKCh+aSZhfH4oaV5hKSZpLWE+Pj4wKT4+PjMxKXwwfX0pfSwvKiAzODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwMwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7aW11bGg6ZnVuY3Rpb24oZSx0KXt2YXIgcj0rZSxuPSt0LGk9NjU1MzUmcixvPTY1NTM1Jm4sYT1yPj4xNixzPW4+PjE2LHU9KGEqbz4+PjApKyhpKm8+Pj4xNik7cmV0dXJuIGEqcysodT4+MTYpKygoaSpzPj4+MCkrKDY1NTM1JnUpPj4xNil9fSl9LC8qIDM4NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKTtuKG4uUywiTWF0aCIse1JBRF9QRVJfREVHOjE4MC9NYXRoLlBJfSl9LC8qIDM4NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKSxpPU1hdGguUEkvMTgwO24obi5TLCJNYXRoIix7cmFkaWFuczpmdW5jdGlvbihlKXtyZXR1cm4gZSppfX0pfSwvKiAzODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtzY2FsZTpyKDE3OCl9KX0sLyogMzg4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDMKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse3VtdWxoOmZ1bmN0aW9uKGUsdCl7dmFyIHI9K2Usbj0rdCxpPTY1NTM1JnIsbz02NTUzNSZuLGE9cj4+PjE2LHM9bj4+PjE2LHU9KGEqbz4+PjApKyhpKm8+Pj4xNik7cmV0dXJuIGEqcysodT4+PjE2KSsoKGkqcz4+PjApKyg2NTUzNSZ1KT4+PjE2KX19KX0sLyogMzg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cDovL2pmYmFzdGllbi5naXRodWIuaW8vcGFwZXJzL01hdGguc2lnbmJpdC5odG1sCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtzaWduYml0OmZ1bmN0aW9uKGUpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCnJldHVybihlPStlKSE9ZT9lOjA9PWU/MS9lPT0xLzA6ZT4wfX0pfSwvKiAzOTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS1maW5hbGx5CnZhciBuPXIoMCksaT1yKDMwKSxvPXIoNCksYT1yKDg2KSxzPXIoMTY1KTtuKG4uUCtuLlIsIlByb21pc2UiLHtmaW5hbGx5OmZ1bmN0aW9uKGUpe3ZhciB0PWEodGhpcyxpLlByb21pc2V8fG8uUHJvbWlzZSkscj0iZnVuY3Rpb24iPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKHI/ZnVuY3Rpb24ocil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcn0pfTplLHI/ZnVuY3Rpb24ocil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyByfSl9OmUpfX0pfSwvKiAzOTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS10cnkKdmFyIG49cigwKSxpPXIoMTI0KSxvPXIoMTY0KTtuKG4uUywiUHJvbWlzZSIse3RyeTpmdW5jdGlvbihlKXt2YXIgdD1pLmYodGhpcykscj1vKGUpO3JldHVybihyLmU/dC5yZWplY3Q6dC5yZXNvbHZlKShyLnYpLHQucHJvbWlzZX19KX0sLyogMzkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM3KSxpPXIoMyksbz1uLmtleSxhPW4uc2V0O24uZXhwKHtkZWZpbmVNZXRhZGF0YTpmdW5jdGlvbihlLHQscixuKXthKGUsdCxpKHIpLG8obikpfX0pfSwvKiAzOTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzcpLGk9cigzKSxvPW4ua2V5LGE9bi5tYXAscz1uLnN0b3JlO24uZXhwKHtkZWxldGVNZXRhZGF0YTpmdW5jdGlvbihlLHQpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6byhhcmd1bWVudHNbMl0pLG49YShpKHQpLHIsITEpO2lmKHZvaWQgMD09PW58fCFuLmRlbGV0ZShlKSlyZXR1cm4hMTtpZihuLnNpemUpcmV0dXJuITA7dmFyIHU9cy5nZXQodCk7cmV0dXJuIHUuZGVsZXRlKHIpLCEhdS5zaXplfHxzLmRlbGV0ZSh0KX19KX0sLyogMzk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM3KSxpPXIoMyksbz1yKDI1KSxhPW4uaGFzLHM9bi5nZXQsdT1uLmtleSxjPWZ1bmN0aW9uKGUsdCxyKXtpZihhKGUsdCxyKSlyZXR1cm4gcyhlLHQscik7dmFyIG49byh0KTtyZXR1cm4gbnVsbCE9PW4/YyhlLG4scik6dm9pZCAwfTtuLmV4cCh7Z2V0TWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyhlLGkodCksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDp1KGFyZ3VtZW50c1syXSkpfX0pfSwvKiAzOTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTY4KSxpPXIoMTc3KSxvPXIoMzcpLGE9cigzKSxzPXIoMjUpLHU9by5rZXlzLGM9by5rZXksZj1mdW5jdGlvbihlLHQpe3ZhciByPXUoZSx0KSxvPXMoZSk7aWYobnVsbD09PW8pcmV0dXJuIHI7dmFyIGE9ZihvLHQpO3JldHVybiBhLmxlbmd0aD9yLmxlbmd0aD9pKG5ldyBuKHIuY29uY2F0KGEpKSk6YTpyfTtvLmV4cCh7Z2V0TWV0YWRhdGFLZXlzOmZ1bmN0aW9uKGUpe3JldHVybiBmKGEoZSksYXJndW1lbnRzLmxlbmd0aDwyP3ZvaWQgMDpjKGFyZ3VtZW50c1sxXSkpfX0pfSwvKiAzOTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzcpLGk9cigzKSxvPW4uZ2V0LGE9bi5rZXk7bi5leHAoe2dldE93bk1ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8oZSxpKHQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6YShhcmd1bWVudHNbMl0pKX19KX0sLyogMzk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM3KSxpPXIoMyksbz1uLmtleXMsYT1uLmtleTtuLmV4cCh7Z2V0T3duTWV0YWRhdGFLZXlzOmZ1bmN0aW9uKGUpe3JldHVybiBvKGkoZSksYXJndW1lbnRzLmxlbmd0aDwyP3ZvaWQgMDphKGFyZ3VtZW50c1sxXSkpfX0pfSwvKiAzOTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzcpLGk9cigzKSxvPXIoMjUpLGE9bi5oYXMscz1uLmtleSx1PWZ1bmN0aW9uKGUsdCxyKXtpZihhKGUsdCxyKSlyZXR1cm4hMDt2YXIgbj1vKHQpO3JldHVybiBudWxsIT09biYmdShlLG4scil9O24uZXhwKHtoYXNNZXRhZGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiB1KGUsaSh0KSxhcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOnMoYXJndW1lbnRzWzJdKSl9fSl9LC8qIDM5OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzNyksaT1yKDMpLG89bi5oYXMsYT1uLmtleTtuLmV4cCh7aGFzT3duTWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbyhlLGkodCksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDphKGFyZ3VtZW50c1syXSkpfX0pfSwvKiA0MDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzcpLGk9cigzKSxvPXIoMTYpLGE9bi5rZXkscz1uLnNldDtuLmV4cCh7bWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixuKXtzKGUsdCwodm9pZCAwIT09bj9pOm8pKHIpLGEobikpfX19KX0sLyogNDAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3J3YWxkcm9uL3RjMzktbm90ZXMvYmxvYi9tYXN0ZXIvZXM2LzIwMTQtMDkvc2VwdC0yNS5tZCM1MTAtZ2xvYmFsYXNhcC1mb3ItZW5xdWV1aW5nLWEtbWljcm90YXNrCnZhciBuPXIoMCksaT1yKDEyMykoKSxvPXIoNCkucHJvY2VzcyxhPSJwcm9jZXNzIj09cigyOCkobyk7bihuLkcse2FzYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9YSYmby5kb21haW47aSh0P3QuYmluZChlKTplKX19KX0sLyogNDAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS96ZW5wYXJzaW5nL2VzLW9ic2VydmFibGUKdmFyIG49cigwKSxpPXIoNCksbz1yKDMwKSxhPXIoMTIzKSgpLHM9cig3KSgib2JzZXJ2YWJsZSIpLHU9cigxNiksYz1yKDMpLGY9cig1NSksbD1yKDU3KSxkPXIoMTgpLHA9cig1NikseT1wLlJFVFVSTixoPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP3ZvaWQgMDp1KGUpfSx2PWZ1bmN0aW9uKGUpe3ZhciB0PWUuX2M7dCYmKGUuX2M9dm9pZCAwLHQoKSl9LGc9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUuX299LGI9ZnVuY3Rpb24oZSl7ZyhlKXx8KGUuX289dm9pZCAwLHYoZSkpfSxtPWZ1bmN0aW9uKGUsdCl7YyhlKSx0aGlzLl9jPXZvaWQgMCx0aGlzLl9vPWUsZT1uZXcgXyh0aGlzKTt0cnl7dmFyIHI9dChlKSxuPXI7bnVsbCE9ciYmKCJmdW5jdGlvbiI9PXR5cGVvZiByLnVuc3Vic2NyaWJlP3I9ZnVuY3Rpb24oKXtuLnVuc3Vic2NyaWJlKCl9OnUociksdGhpcy5fYz1yKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCBlLmVycm9yKHQpfWcodGhpcykmJnYodGhpcyl9O20ucHJvdG90eXBlPWwoe30se3Vuc3Vic2NyaWJlOmZ1bmN0aW9uKCl7Yih0aGlzKX19KTt2YXIgXz1mdW5jdGlvbihlKXt0aGlzLl9zPWV9O18ucHJvdG90eXBlPWwoe30se25leHQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcztpZighZyh0KSl7dmFyIHI9dC5fbzt0cnl7dmFyIG49aChyLm5leHQpO2lmKG4pcmV0dXJuIG4uY2FsbChyLGUpfWNhdGNoKGUpe3RyeXtiKHQpfWZpbmFsbHl7dGhyb3cgZX19fX0sZXJyb3I6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcztpZihnKHQpKXRocm93IGU7dmFyIHI9dC5fbzt0Ll9vPXZvaWQgMDt0cnl7dmFyIG49aChyLmVycm9yKTtpZighbil0aHJvdyBlO2U9bi5jYWxsKHIsZSl9Y2F0Y2goZSl7dHJ5e3YodCl9ZmluYWxseXt0aHJvdyBlfX1yZXR1cm4gdih0KSxlfSxjb21wbGV0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zO2lmKCFnKHQpKXt2YXIgcj10Ll9vO3QuX289dm9pZCAwO3RyeXt2YXIgbj1oKHIuY29tcGxldGUpO2U9bj9uLmNhbGwocixlKTp2b2lkIDB9Y2F0Y2goZSl7dHJ5e3YodCl9ZmluYWxseXt0aHJvdyBlfX1yZXR1cm4gdih0KSxlfX19KTt2YXIgUj1mdW5jdGlvbihlKXtmKHRoaXMsUiwiT2JzZXJ2YWJsZSIsIl9mIikuX2Y9dShlKX07bChSLnByb3RvdHlwZSx7c3Vic2NyaWJlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgbShlLHRoaXMuX2YpfSxmb3JFYWNoOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyhvLlByb21pc2V8fGkuUHJvbWlzZSkoZnVuY3Rpb24ocixuKXt1KGUpO3ZhciBpPXQuc3Vic2NyaWJlKHtuZXh0OmZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gZSh0KX1jYXRjaChlKXtuKGUpLGkudW5zdWJzY3JpYmUoKX19LGVycm9yOm4sY29tcGxldGU6cn0pfSl9fSksbChSLHtmcm9tOmZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6UixyPWgoYyhlKVtzXSk7aWYocil7dmFyIG49YyhyLmNhbGwoZSkpO3JldHVybiBuLmNvbnN0cnVjdG9yPT09dD9uOm5ldyB0KGZ1bmN0aW9uKGUpe3JldHVybiBuLnN1YnNjcmliZShlKX0pfXJldHVybiBuZXcgdChmdW5jdGlvbih0KXt2YXIgcj0hMTtyZXR1cm4gYShmdW5jdGlvbigpe2lmKCFyKXt0cnl7aWYocChlLCExLGZ1bmN0aW9uKGUpe2lmKHQubmV4dChlKSxyKXJldHVybiB5fSk9PT15KXJldHVybn1jYXRjaChlKXtpZihyKXRocm93IGU7cmV0dXJuIHZvaWQgdC5lcnJvcihlKX10LmNvbXBsZXRlKCl9fSksZnVuY3Rpb24oKXtyPSEwfX0pfSxvZjpmdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KHQpO2U8dDspcltlXT1hcmd1bWVudHNbZSsrXTtyZXR1cm4gbmV3KCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6UikoZnVuY3Rpb24oZSl7dmFyIHQ9ITE7cmV0dXJuIGEoZnVuY3Rpb24oKXtpZighdCl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDsrK24paWYoZS5uZXh0KHJbbl0pLHQpcmV0dXJuO2UuY29tcGxldGUoKX19KSxmdW5jdGlvbigpe3Q9ITB9fSl9fSksZChSLnByb3RvdHlwZSxzLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxuKG4uRyx7T2JzZXJ2YWJsZTpSfSkscig1NCkoIk9ic2VydmFibGUiKX0sLyogNDAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaWU5LSBzZXRUaW1lb3V0ICYgc2V0SW50ZXJ2YWwgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIGZpeAp2YXIgbj1yKDQpLGk9cigwKSxvPW4ubmF2aWdhdG9yLGE9W10uc2xpY2Uscz0hIW8mJi9NU0lFIC5cLi8udGVzdChvLnVzZXJBZ2VudCksdT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjIsaT0hIW4mJmEuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGUobj9mdW5jdGlvbigpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMKKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCkpLmFwcGx5KHRoaXMsaSl9OnQscil9fTtpKGkuRytpLkIraS5GKnMse3NldFRpbWVvdXQ6dShuLnNldFRpbWVvdXQpLHNldEludGVydmFsOnUobi5zZXRJbnRlcnZhbCl9KX0sLyogNDA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLGk9cigxMjIpO24obi5HK24uQix7c2V0SW1tZWRpYXRlOmkuc2V0LGNsZWFySW1tZWRpYXRlOmkuY2xlYXJ9KX0sLyogNDA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49cigxMjEpLGk9cig1MCksbz1yKDE5KSxhPXIoNCkscz1yKDE4KSx1PXIoNjMpLGM9cig3KSxmPWMoIml0ZXJhdG9yIiksbD1jKCJ0b1N0cmluZ1RhZyIpLGQ9dS5BcnJheSxwPXtDU1NSdWxlTGlzdDohMCwvLyBUT0RPOiBOb3Qgc3BlYyBjb21wbGlhbnQsIHNob3VsZCBiZSBmYWxzZS4KQ1NTU3R5bGVEZWNsYXJhdGlvbjohMSxDU1NWYWx1ZUxpc3Q6ITEsQ2xpZW50UmVjdExpc3Q6ITEsRE9NUmVjdExpc3Q6ITEsRE9NU3RyaW5nTGlzdDohMSxET01Ub2tlbkxpc3Q6ITAsRGF0YVRyYW5zZmVySXRlbUxpc3Q6ITEsRmlsZUxpc3Q6ITEsSFRNTEFsbENvbGxlY3Rpb246ITEsSFRNTENvbGxlY3Rpb246ITEsSFRNTEZvcm1FbGVtZW50OiExLEhUTUxTZWxlY3RFbGVtZW50OiExLE1lZGlhTGlzdDohMCwvLyBUT0RPOiBOb3Qgc3BlYyBjb21wbGlhbnQsIHNob3VsZCBiZSBmYWxzZS4KTWltZVR5cGVBcnJheTohMSxOYW1lZE5vZGVNYXA6ITEsTm9kZUxpc3Q6ITAsUGFpbnRSZXF1ZXN0TGlzdDohMSxQbHVnaW46ITEsUGx1Z2luQXJyYXk6ITEsU1ZHTGVuZ3RoTGlzdDohMSxTVkdOdW1iZXJMaXN0OiExLFNWR1BhdGhTZWdMaXN0OiExLFNWR1BvaW50TGlzdDohMSxTVkdTdHJpbmdMaXN0OiExLFNWR1RyYW5zZm9ybUxpc3Q6ITEsU291cmNlQnVmZmVyTGlzdDohMSxTdHlsZVNoZWV0TGlzdDohMCwvLyBUT0RPOiBOb3Qgc3BlYyBjb21wbGlhbnQsIHNob3VsZCBiZSBmYWxzZS4KVGV4dFRyYWNrQ3VlTGlzdDohMSxUZXh0VHJhY2tMaXN0OiExLFRvdWNoTGlzdDohMX0seT1pKHApLGg9MDtoPHkubGVuZ3RoO2grKyl7dmFyIHYsZz15W2hdLGI9cFtnXSxtPWFbZ10sXz1tJiZtLnByb3RvdHlwZTtpZihfJiYoX1tmXXx8cyhfLGYsZCksX1tsXXx8cyhfLGwsZyksdVtnXT1kLGIpKWZvcih2IGluIG4pX1t2XXx8byhfLHYsblt2XSwhMCl9fSwvKiA0MDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpey8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwooZnVuY3Rpb24odCl7LyoqCiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy4KICogQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvbWFzdGVyL0xJQ0VOU0UgZmlsZS4gQW4KICogYWRkaXRpb25hbCBncmFudCBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluCiAqIHRoZSBzYW1lIGRpcmVjdG9yeS4KICovCiFmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gd3JhcChlLHQscixuKXsKLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuCnZhciBpPXQmJnQucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yP3Q6R2VuZXJhdG9yLG89T2JqZWN0LmNyZWF0ZShpLnByb3RvdHlwZSksYT1uZXcgQ29udGV4dChufHxbXSk7Ci8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCwKLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLgpyZXR1cm4gby5faW52b2tlPW1ha2VJbnZva2VNZXRob2QoZSxyLGEpLG99Ci8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvbgovLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGQKLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlCi8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2UKLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZAovLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nCi8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlCi8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZQovLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoCi8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS4KZnVuY3Rpb24gdHJ5Q2F0Y2goZSx0LHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6ZS5jYWxsKHQscil9fWNhdGNoKGUpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOmV9fX0KLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kCi8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvcgovLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91cgovLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLgpmdW5jdGlvbiBHZW5lcmF0b3IoKXt9ZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKXt9ZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKXt9Ci8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlCi8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuCmZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhlKXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faW52b2tlKHQsZSl9fSl9ZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihlKXtmdW5jdGlvbiBpbnZva2UodCxyLG4sbyl7dmFyIGE9dHJ5Q2F0Y2goZVt0XSxlLHIpO2lmKCJ0aHJvdyIhPT1hLnR5cGUpe3ZhciBzPWEuYXJnLHU9cy52YWx1ZTtyZXR1cm4gdSYmIm9iamVjdCI9PXR5cGVvZiB1JiZpLmNhbGwodSwiX19hd2FpdCIpP1Byb21pc2UucmVzb2x2ZSh1Ll9fYXdhaXQpLnRoZW4oZnVuY3Rpb24oZSl7aW52b2tlKCJuZXh0IixlLG4sbyl9LGZ1bmN0aW9uKGUpe2ludm9rZSgidGhyb3ciLGUsbixvKX0pOlByb21pc2UucmVzb2x2ZSh1KS50aGVuKGZ1bmN0aW9uKGUpewovLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lcwovLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGUKLy8gY3VycmVudCBpdGVyYXRpb24uIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBob3dldmVyLCB0aGUKLy8gcmVzdWx0IGZvciB0aGlzIGl0ZXJhdGlvbiB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIHNhbWUKLy8gcmVhc29uLiBOb3RlIHRoYXQgcmVqZWN0aW9ucyBvZiB5aWVsZGVkIFByb21pc2VzIGFyZSBub3QKLy8gdGhyb3duIGJhY2sgaW50byB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBhcyBpcyB0aGUgY2FzZQovLyB3aGVuIGFuIGF3YWl0ZWQgUHJvbWlzZSBpcyByZWplY3RlZC4gVGhpcyBkaWZmZXJlbmNlIGluCi8vIGJlaGF2aW9yIGJldHdlZW4geWllbGQgYW5kIGF3YWl0IGlzIGltcG9ydGFudCwgYmVjYXVzZSBpdAovLyBhbGxvd3MgdGhlIGNvbnN1bWVyIHRvIGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggdGhlIHlpZWxkZWQKLy8gcmVqZWN0aW9uIChzd2FsbG93IGl0IGFuZCBjb250aW51ZSwgbWFudWFsbHkgLnRocm93IGl0IGJhY2sKLy8gaW50byB0aGUgZ2VuZXJhdG9yLCBhYmFuZG9uIGl0ZXJhdGlvbiwgd2hhdGV2ZXIpLiBXaXRoCi8vIGF3YWl0LCBieSBjb250cmFzdCwgdGhlcmUgaXMgbm8gb3Bwb3J0dW5pdHkgdG8gZXhhbWluZSB0aGUKLy8gcmVqZWN0aW9uIHJlYXNvbiBvdXRzaWRlIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIHNvIHRoZQovLyBvbmx5IG9wdGlvbiBpcyB0byB0aHJvdyBpdCBmcm9tIHRoZSBhd2FpdCBleHByZXNzaW9uLCBhbmQKLy8gbGV0IHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gaGFuZGxlIHRoZSBleGNlcHRpb24uCnMudmFsdWU9ZSxuKHMpfSxvKX1vKGEuYXJnKX1mdW5jdGlvbiBlbnF1ZXVlKGUsdCl7ZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixuKXtpbnZva2UoZSx0LHIsbil9KX0KLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbAovLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSwKLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZgovLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0bwovLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSwKLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG8KLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eQovLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0cwovLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseQovLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZQovLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseQovLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuCi8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyCi8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci4KcmV0dXJuIHI9cj9yLnRoZW4oY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpOmNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCl9Im9iamVjdCI9PXR5cGVvZiB0LnByb2Nlc3MmJnQucHJvY2Vzcy5kb21haW4mJihpbnZva2U9dC5wcm9jZXNzLmRvbWFpbi5iaW5kKGludm9rZSkpO3ZhciByOwovLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LAovLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS4KdGhpcy5faW52b2tlPWVucXVldWV9ZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChlLHQscil7dmFyIG49bDtyZXR1cm4gZnVuY3Rpb24oaSxvKXtpZihuPT09cCl0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTtpZihuPT09eSl7aWYoInRocm93Ij09PWkpdGhyb3cgbzsKLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzoKLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZQpyZXR1cm4gZG9uZVJlc3VsdCgpfWZvcihyLm1ldGhvZD1pLHIuYXJnPW87Oyl7dmFyIGE9ci5kZWxlZ2F0ZTtpZihhKXt2YXIgcz1tYXliZUludm9rZURlbGVnYXRlKGEscik7aWYocyl7aWYocz09PWgpY29udGludWU7cmV0dXJuIHN9fWlmKCJuZXh0Ij09PXIubWV0aG9kKQovLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3MKLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi4Kci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT1sKXRocm93IG49eSxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249cDt2YXIgdT10cnlDYXRjaChlLHQscik7aWYoIm5vcm1hbCI9PT11LnR5cGUpe2lmKAovLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09Ci8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi4Kbj1yLmRvbmU/eTpkLHUuYXJnPT09aCljb250aW51ZTtyZXR1cm57dmFsdWU6dS5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT11LnR5cGUmJihuPXksCi8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGUKLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS4Kci5tZXRob2Q9InRocm93IixyLmFyZz11LmFyZyl9fX0KLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlCi8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGUKLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsCi8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLgpmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGUsdCl7dmFyIG49ZS5pdGVyYXRvclt0Lm1ldGhvZF07aWYobj09PXIpe2lmKAovLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3cKLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC4KdC5kZWxlZ2F0ZT1udWxsLCJ0aHJvdyI9PT10Lm1ldGhvZCl7aWYoZS5pdGVyYXRvci5yZXR1cm4mJigKLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYQovLyBjaGFuY2UgdG8gY2xlYW4gdXAuCnQubWV0aG9kPSJyZXR1cm4iLHQuYXJnPXIsbWF5YmVJbnZva2VEZWxlZ2F0ZShlLHQpLCJ0aHJvdyI9PT10Lm1ldGhvZCkpCi8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tCi8vICJyZXR1cm4iIHRvICJ0aHJvdyIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuCnJldHVybiBoO3QubWV0aG9kPSJ0aHJvdyIsdC5hcmc9bmV3IFR5cGVFcnJvcigiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZCIpfXJldHVybiBofXZhciBpPXRyeUNhdGNoKG4sZS5pdGVyYXRvcix0LmFyZyk7aWYoInRocm93Ij09PWkudHlwZSlyZXR1cm4gdC5tZXRob2Q9InRocm93Iix0LmFyZz1pLmFyZyx0LmRlbGVnYXRlPW51bGwsaDt2YXIgbz1pLmFyZzsKLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnkKLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS4KLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLgovLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgInRocm93IiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlCi8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWYKLy8gY29udGV4dC5tZXRob2Qgd2FzICJuZXh0IiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuCi8vICJjb25zdW1lZCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXMKLy8gInJldHVybiIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlCi8vIG91dGVyIGdlbmVyYXRvci4KLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGgKLy8gdGhlIG91dGVyIGdlbmVyYXRvci4KcmV0dXJuIG8/by5kb25lPyh0W2UucmVzdWx0TmFtZV09by52YWx1ZSx0Lm5leHQ9ZS5uZXh0TG9jLCJyZXR1cm4iIT09dC5tZXRob2QmJih0Lm1ldGhvZD0ibmV4dCIsdC5hcmc9ciksdC5kZWxlZ2F0ZT1udWxsLGgpOm86KHQubWV0aG9kPSJ0aHJvdyIsdC5hcmc9bmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSx0LmRlbGVnYXRlPW51bGwsaCl9ZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGUpe3ZhciB0PXt0cnlMb2M6ZVswXX07MSBpbiBlJiYodC5jYXRjaExvYz1lWzFdKSwyIGluIGUmJih0LmZpbmFsbHlMb2M9ZVsyXSx0LmFmdGVyTG9jPWVbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKHQpfWZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZSl7dmFyIHQ9ZS5jb21wbGV0aW9ufHx7fTt0LnR5cGU9Im5vcm1hbCIsZGVsZXRlIHQuYXJnLGUuY29tcGxldGlvbj10fWZ1bmN0aW9uIENvbnRleHQoZSl7Ci8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaAovLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tCi8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC4KdGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLGUuZm9yRWFjaChwdXNoVHJ5RW50cnksdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gdmFsdWVzKGUpe2lmKGUpe3ZhciB0PWVbYV07aWYodClyZXR1cm4gdC5jYWxsKGUpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBlLm5leHQpcmV0dXJuIGU7aWYoIWlzTmFOKGUubGVuZ3RoKSl7dmFyIG49LTEsbz1mdW5jdGlvbiBuZXh0KCl7Zm9yKDsrK248ZS5sZW5ndGg7KWlmKGkuY2FsbChlLG4pKXJldHVybiBuZXh0LnZhbHVlPWVbbl0sbmV4dC5kb25lPSExLG5leHQ7cmV0dXJuIG5leHQudmFsdWU9cixuZXh0LmRvbmU9ITAsbmV4dH07cmV0dXJuIG8ubmV4dD1vfX0KLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLgpyZXR1cm57bmV4dDpkb25lUmVzdWx0fX1mdW5jdGlvbiBkb25lUmVzdWx0KCl7cmV0dXJue3ZhbHVlOnIsZG9uZTohMH19dmFyIHIsbj1PYmplY3QucHJvdG90eXBlLGk9bi5oYXNPd25Qcm9wZXJ0eSxvPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LGE9by5pdGVyYXRvcnx8IkBAaXRlcmF0b3IiLHM9by5hc3luY0l0ZXJhdG9yfHwiQEBhc3luY0l0ZXJhdG9yIix1PW8udG9TdHJpbmdUYWd8fCJAQHRvU3RyaW5nVGFnIixjPSJvYmplY3QiPT10eXBlb2YgZSxmPXQucmVnZW5lcmF0b3JSdW50aW1lO2lmKGYpCi8vIERvbid0IGJvdGhlciBldmFsdWF0aW5nIHRoZSByZXN0IG9mIHRoaXMgZmlsZSBpZiB0aGUgcnVudGltZSB3YXMKLy8gYWxyZWFkeSBkZWZpbmVkIGdsb2JhbGx5LgovLyBJZiByZWdlbmVyYXRvclJ1bnRpbWUgaXMgZGVmaW5lZCBnbG9iYWxseSBhbmQgd2UncmUgaW4gYSBtb2R1bGUsCi8vIG1ha2UgdGhlIGV4cG9ydHMgb2JqZWN0IGlkZW50aWNhbCB0byByZWdlbmVyYXRvclJ1bnRpbWUuCnJldHVybiB2b2lkKGMmJihlLmV4cG9ydHM9ZikpOwovLyBEZWZpbmUgdGhlIHJ1bnRpbWUgZ2xvYmFsbHkgKGFzIGV4cGVjdGVkIGJ5IGdlbmVyYXRlZCBjb2RlKSBhcyBlaXRoZXIKLy8gbW9kdWxlLmV4cG9ydHMgKGlmIHdlJ3JlIGluIGEgbW9kdWxlKSBvciBhIG5ldywgZW1wdHkgb2JqZWN0LgpmPXQucmVnZW5lcmF0b3JSdW50aW1lPWM/ZS5leHBvcnRzOnt9LGYud3JhcD13cmFwO3ZhciBsPSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLHA9ImV4ZWN1dGluZyIseT0iY29tcGxldGVkIixoPXt9LHY9e307dlthXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt2YXIgZz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsYj1nJiZnKGcodmFsdWVzKFtdKSkpO2ImJmIhPT1uJiZpLmNhbGwoYixhKSYmKAovLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZAovLyBvZiB0aGUgcG9seWZpbGwuCnY9Yik7dmFyIG09R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlPUdlbmVyYXRvci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh2KTtHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGU9bS5jb25zdHJ1Y3Rvcj1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1HZW5lcmF0b3JGdW5jdGlvbixHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt1XT1HZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZT0iR2VuZXJhdG9yRnVuY3Rpb24iLGYuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5jb25zdHJ1Y3RvcjsKLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhbgovLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuCnJldHVybiEhdCYmKHQ9PT1HZW5lcmF0b3JGdW5jdGlvbnx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PSh0LmRpc3BsYXlOYW1lfHx0Lm5hbWUpKX0sZi5tYXJrPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpOihlLl9fcHJvdG9fXz1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSx1IGluIGV8fChlW3VdPSJHZW5lcmF0b3JGdW5jdGlvbiIpKSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG0pLGV9LAovLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG8KLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3QKLy8gYGhhc093bi5jYWxsKHZhbHVlLCAiX19hd2FpdCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXMKLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC4KZi5hd3JhcD1mdW5jdGlvbihlKXtyZXR1cm57X19hd2FpdDplfX0sZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSxBc3luY0l0ZXJhdG9yLnByb3RvdHlwZVtzXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxmLkFzeW5jSXRlcmF0b3I9QXN5bmNJdGVyYXRvciwKLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZgovLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2YKLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuCmYuYXN5bmM9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9bmV3IEFzeW5jSXRlcmF0b3Iod3JhcChlLHQscixuKSk7cmV0dXJuIGYuaXNHZW5lcmF0b3JGdW5jdGlvbih0KT9pOmkubmV4dCgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZG9uZT9lLnZhbHVlOmkubmV4dCgpfSl9LAovLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZQovLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuCmRlZmluZUl0ZXJhdG9yTWV0aG9kcyhtKSxtW3VdPSJHZW5lcmF0b3IiLAovLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZQovLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZQovLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvcgovLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi4KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuCm1bYV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sbS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSxmLmtleXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpdC5wdXNoKHIpOwovLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcAovLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLgpyZXR1cm4gdC5yZXZlcnNlKCksZnVuY3Rpb24gbmV4dCgpe2Zvcig7dC5sZW5ndGg7KXt2YXIgcj10LnBvcCgpO2lmKHIgaW4gZSlyZXR1cm4gbmV4dC52YWx1ZT1yLG5leHQuZG9uZT0hMSxuZXh0fQovLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWUKLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXMKLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uCnJldHVybiBuZXh0LmRvbmU9ITAsbmV4dH19LGYudmFsdWVzPXZhbHVlcyxDb250ZXh0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6Q29udGV4dCxyZXNldDpmdW5jdGlvbihlKXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCwKLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3MKLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi4KdGhpcy5zZW50PXRoaXMuX3NlbnQ9cix0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLmFyZz1yLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpLCFlKWZvcih2YXIgdCBpbiB0aGlzKQovLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOgoidCI9PT10LmNoYXJBdCgwKSYmaS5jYWxsKHRoaXMsdCkmJiFpc05hTigrdC5zbGljZSgxKSkmJih0aGlzW3RdPXIpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciBlPXRoaXMudHJ5RW50cmllc1swXSx0PWUuY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGhhbmRsZShuLGkpewovLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLAovLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LgpyZXR1cm4gYS50eXBlPSJ0aHJvdyIsYS5hcmc9ZSx0Lm5leHQ9bixpJiYodC5tZXRob2Q9Im5leHQiLHQuYXJnPXIpLCEhaX1pZih0aGlzLmRvbmUpdGhyb3cgZTtmb3IodmFyIHQ9dGhpcyxuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIG89dGhpcy50cnlFbnRyaWVzW25dLGE9by5jb21wbGV0aW9uO2lmKCJyb290Ij09PW8udHJ5TG9jKQovLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZQovLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG8KLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi4KcmV0dXJuIGhhbmRsZSgiZW5kIik7aWYoby50cnlMb2M8PXRoaXMucHJldil7dmFyIHM9aS5jYWxsKG8sImNhdGNoTG9jIiksdT1pLmNhbGwobywiZmluYWxseUxvYyIpO2lmKHMmJnUpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBoYW5kbGUoby5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaGFuZGxlKG8uZmluYWxseUxvYyl9ZWxzZSBpZihzKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gaGFuZGxlKG8uY2F0Y2hMb2MsITApfWVsc2V7aWYoIXUpdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIGhhbmRsZShvLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgbj10aGlzLnRyeUVudHJpZXNbcl07aWYobi50cnlMb2M8PXRoaXMucHJldiYmaS5jYWxsKG4sImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PG4uZmluYWxseUxvYyl7dmFyIG89bjticmVha319byYmKCJicmVhayI9PT1lfHwiY29udGludWUiPT09ZSkmJm8udHJ5TG9jPD10JiZ0PD1vLmZpbmFsbHlMb2MmJigKLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYQovLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suCm89bnVsbCk7dmFyIGE9bz9vLmNvbXBsZXRpb246e307cmV0dXJuIGEudHlwZT1lLGEuYXJnPXQsbz8odGhpcy5tZXRob2Q9Im5leHQiLHRoaXMubmV4dD1vLmZpbmFsbHlMb2MsaCk6dGhpcy5jb21wbGV0ZShhKX0sY29tcGxldGU6ZnVuY3Rpb24oZSx0KXtpZigidGhyb3ciPT09ZS50eXBlKXRocm93IGUuYXJnO3JldHVybiJicmVhayI9PT1lLnR5cGV8fCJjb250aW51ZSI9PT1lLnR5cGU/dGhpcy5uZXh0PWUuYXJnOiJyZXR1cm4iPT09ZS50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9ZS5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PWUudHlwZSYmdCYmKHRoaXMubmV4dD10KSxofSxmaW5pc2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTt0Pj0wOy0tdCl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW3RdO2lmKHIuZmluYWxseUxvYz09PWUpcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLHIuYWZ0ZXJMb2MpLHJlc2V0VHJ5RW50cnkociksaH19LGNhdGNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLnRyeUxvYz09PWUpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgaT1uLmFyZztyZXNldFRyeUVudHJ5KHIpfXJldHVybiBpfX0KLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uCi8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay4KdGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbihlLHQsbil7Ci8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0Ci8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS4KcmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOnZhbHVlcyhlKSxyZXN1bHROYW1lOnQsbmV4dExvYzpufSwibmV4dCI9PT10aGlzLm1ldGhvZCYmKHRoaXMuYXJnPXIpLGh9fX0oCi8vIEFtb25nIHRoZSB2YXJpb3VzIHRyaWNrcyBmb3Igb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwKLy8gb2JqZWN0LCB0aGlzIHNlZW1zIHRvIGJlIHRoZSBtb3N0IHJlbGlhYmxlIHRlY2huaXF1ZSB0aGF0IGRvZXMgbm90Ci8vIHVzZSBpbmRpcmVjdCBldmFsICh3aGljaCB2aW9sYXRlcyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSkuCiJvYmplY3QiPT10eXBlb2YgdD90OiJvYmplY3QiPT10eXBlb2Ygd2luZG93P3dpbmRvdzoib2JqZWN0Ij09dHlwZW9mIHNlbGY/c2VsZjp0aGlzKX0pLmNhbGwodCxyKDE0NCkpfSwvKiA0MDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDA4KSxlLmV4cG9ydHM9cigzMCkuUmVnRXhwLmVzY2FwZX0sLyogNDA4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbWluZ3IvUmV4RXhwLmVzY2FwZQp2YXIgbj1yKDApLGk9cig0MDkpKC9bXFxeJCorPy4oKXxbXF17fV0vZywiXFwkJiIpO24obi5TLCJSZWdFeHAiLHtlc2NhcGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9fSl9LC8qIDQwOSAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPXQ9PT1PYmplY3QodCk/ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19OnQ7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBTdHJpbmcodCkucmVwbGFjZShlLHIpfX19LC8qIDQxMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDk2KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpO3IoNDM0KTt2YXIgbD1yKDExKSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDQzNSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig0NjUpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPXIoNDY5KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksbT1yKDQ4MCksXz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9cigxNSksdz1yKDk5KSxTPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodyksTz1yKDQ4MiksUD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KE8pLGs9cig0ODMpLE09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChrKSxMPXIoNDg0KSx4PXIoMTM4KSxFPXIoNDg1KSxEPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoRSksVT1yKDQ4NyksQT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFUpLGo9cig0ODgpLEk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChqKSxDPXIoNDkzKSxUPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoQyksTj1yKDQ5NCksRj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KE4pLHE9cig1MDUpLEg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChxKSxCPXIoNTA3KSxHPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoQiksSz1kLmdldExvZ2dlcigiUnVudGltZVVBIiksVj1mdW5jdGlvbigpey8qKgogICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBSdW50aW1lIFVzZXIgQWdlbnQKICAgKiBAcGFyYW0ge2Rlc2NyaXB0b3J9IHJ1bnRpbWVEZXNjcmlwdG9yIC0gcGFzcyBhbGwgdGhlIGh5cGVydHkgcnVudGltZSBkZXNjcmlwdG9yCiAgICogQHBhcmFtIHtydW50aW1lRmFjdG9yeX0gcnVudGltZUZhY3RvcnkgLSBTcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGVudmlyb25tZW50IHdoZXJlIHRoZSBjb3JlIHJ1bnRpbWUgd2lsbCBydW47CiAgICogQHBhcmFtIHtkb21haW59IGRvbWFpblVSTCAtIHNwZWNpZnkgdGhlIGRvbWFpbiBiYXNlIGZvciB0aGUgcnVudGltZTsKICAgKi8KZnVuY3Rpb24gUnVudGltZVVBKGUsdCxyKXtpZigoMCx1LmRlZmF1bHQpKHRoaXMsUnVudGltZVVBKSwhZSl0aHJvdyBuZXcgRXJyb3IoIlRoZSBydW50aW1lIGRlc2NyaXB0b3IgaXMgYSBuZWVkZWQgcGFyYW1ldGVyIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJUaGUgc2FuZGJveCBmYWN0b3J5IGlzIGEgbmVlZGVkIHBhcmFtZXRlciIpO2lmKCFyKXRocm93IG5ldyBFcnJvcigiWW91IG5lZWQgdGhlIGRvbWFpbiBvZiBydW50aW1lIik7aWYoCi8vIENvbmZpZ3VyYXRpb24gb2JqZWN0IHdpdGggaW5mb3JtYXRpb24gcmVsYXRlZCB3aXRoIHNlcnZlcnMKdGhpcy5ydW50aW1lQ29uZmlndXJhdGlvbj0oMCxhLmRlZmF1bHQpKHtkb21haW46cn0sTC5ydW50aW1lQ29uZmlndXJhdGlvbiksdGhpcy5ydW50aW1lRmFjdG9yeT10LHRoaXMucnVudGltZUNhdGFsb2d1ZT10LmNyZWF0ZVJ1bnRpbWVDYXRhbG9ndWUoKSx0aGlzLmxvZz1LLGUucDJwSGFuZGxlclN0dWImJiJzdHJpbmciPT10eXBlb2YgZS5wMnBIYW5kbGVyU3R1YiYmZS5wMnBIYW5kbGVyU3R1Yi5pbmNsdWRlcygiOi8vIik/dGhpcy5wMnA9ITA6dGhpcy5wMnA9ITEseC5ydW50aW1lVXRpbHMucnVudGltZURlc2NyaXB0b3I9ZSx0aGlzLnJ1bnRpbWVVdGlscz14LnJ1bnRpbWVVdGlscywiZnVuY3Rpb24iIT10eXBlb2YgdC5jcmVhdGVSdW50aW1lQ2F0YWxvZ3VlKXRocm93IG5ldyBFcnJvcigiQ2hlY2sgeW91ciBSdW50aW1lIEZhY3RvcnkgYmVjYXVzZSBpdCBuZWVkcyB0aGUgUnVudGltZSBDYXRhbG9ndWUgaW1wbGVtZW50YXRpb24iKTtpZih0aGlzLnBlcnNpc3RlbmNlTWFuYWdlcj10LmNyZWF0ZVJ1bnRpbWVDYXRhbG9ndWUoKSwiZnVuY3Rpb24iIT10eXBlb2YgdC5wZXJzaXN0ZW5jZU1hbmFnZXIpdGhyb3cgbmV3IEVycm9yKCJDaGVjayB5b3VyIFJ1bnRpbWUgRmFjdG9yeSBiZWNhdXNlIGl0IG5lZWRzIHRoZSBQZXJzaXN0ZW5jZSBNYW5hZ2VyIGltcGxlbWVudGF0aW9uIik7aWYodGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXI9dC5wZXJzaXN0ZW5jZU1hbmFnZXIoKSwiZnVuY3Rpb24iIT10eXBlb2YgdC5zdG9yYWdlTWFuYWdlcil0aHJvdyBuZXcgRXJyb3IoIkNoZWNrIHlvdXIgUnVudGltZSBGYWN0b3J5IGJlY2F1c2UgaXQgbmVlZHMgdGhlIFN0b3JhZ2UgTWFuYWdlciBpbXBsZW1lbnRhdGlvbiIpO3RoaXMuc3RvcmFnZU1hbmFnZXI9dC5zdG9yYWdlTWFuYWdlcigpLCJmdW5jdGlvbiI9PXR5cGVvZiB0LnJ1bnRpbWVDYXBhYmlsaXRpZXM/dGhpcy5ydW50aW1lQ2FwYWJpbGl0aWVzPXQucnVudGltZUNhcGFiaWxpdGllcyh0aGlzLnN0b3JhZ2VNYW5hZ2VyKTpLLmluZm8oIkNoZWNrIHlvdXIgUnVudGltZUZhY3RvcnkgYmVjYXVzZSBpdCBuZWVkcyB0aGUgUnVudGltZSBDYXBhYmlsaXRpZXMgaW1wbGVtZW50YXRpb24iKX0vKioKICAgKiBJbnRpYWxpemUgdGhlIGluc3RhbGxhdGlvbiBvZiBydW50aW1lCiAgICoKICAgKiBAYWNjZXNzIHB1YmxpYwogICAqIEByZXR1cm4ge1Byb21pc2U8Qm9vbGVhbiwgRXJyb3I+fSB0aGlzIGlzIFByb21pc2UgYW5kIGlmIHRoZSBpbnN0YWxsYXRpb24gcHJvY2VzcyBoYXBwZW5lZCB3aXRob3V0IGFueSBwcm9ibGVtcyByZXR1cm5zIHRydWUgb3RoZXJ3aXNlIHRoZSBlcnJvci4KICAgKgogICAqIEBtZW1iZXJPZiBSdW50aW1lVUEKICAgKi8KcmV0dXJuKDAsZi5kZWZhdWx0KShSdW50aW1lVUEsW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2UuZG9tYWluPWUucnVudGltZUNvbmZpZ3VyYXRpb24uZG9tYWluO3RyeXt2YXIgbj1lLnJ1bnRpbWVDYXBhYmlsaXRpZXMuZ2V0UnVudGltZUNhcGFiaWxpdGllcygpLG89ZS5zdG9yYWdlTWFuYWdlci5nZXQoInJ1bnRpbWU6VVJMIikscz1lLnN0b3JhZ2VNYW5hZ2VyLmdldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIpLHU9ZS5zdG9yYWdlTWFuYWdlci5nZXQoImh5cGVydHlSZXNvdXJjZXMiKSxjPWUuc3RvcmFnZU1hbmFnZXIuZ2V0KCJwMnBIYW5kbGVyOlVSTCIpO2kuZGVmYXVsdC5hbGwoW28sbixzLHUsY10pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUucnVudGltZVVSTD10WzBdP3RbMF0ucnVudGltZVVSTDp0WzBdLGUucnVudGltZVVSTHx8KGUucnVudGltZVVSTD0icnVudGltZTovLyIrZS5kb21haW4rIi8iKygwLFIuZ2VuZXJhdGVHVUlEKSgpLGUuc3RvcmFnZU1hbmFnZXIuc2V0KCJydW50aW1lOlVSTCIsMSx7cnVudGltZVVSTDplLnJ1bnRpbWVVUkx9KSksZS5jYXBhYmlsaXRpZXM9dFsxXSwoMCxhLmRlZmF1bHQpKHgucnVudGltZVV0aWxzLnJ1bnRpbWVDYXBhYmlsaXRpZXMuY29uc3RyYWludHMsdFsxXSksZS5fZGF0YU9iamVjdHNTdG9yYWdlPW5ldyBJLmRlZmF1bHQoZS5zdG9yYWdlTWFuYWdlcix0WzJdfHx7fSksZS5faHlwZXJ0eVJlc291cmNlcz10WzNdfHx7fSxlLnAycEhhbmRsZXJVUkw9dFs0XT90WzRdLnAycEhhbmRsZXJVUkw6dFs0XSxlLnAycEhhbmRsZXJVUkx8fChlLnAycEhhbmRsZXJVUkw9ZS5ydW50aW1lVVJMKyIvcDJwaGFuZGxlci8iKygwLFIuZ2VuZXJhdGVHVUlEKSgpLEsuaW5mbygiW1J1bnRpbWVVQSAtIGluaXRdIFAyUEhhbmRsZXJVUkw6ICIsZS5wMnBIYW5kbGVyVVJMKSxlLnN0b3JhZ2VNYW5hZ2VyLnNldCgicDJwSGFuZGxlcjpVUkwiLDEse3AycEhhbmRsZXJVUkw6ZS5wMnBIYW5kbGVyVVJMfSkpLGUuX2xvYWRDb21wb25lbnRzKCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9oeXBlcnR5UmVzb3VyY2VzU3RvcmFnZT1uZXcgVC5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5zdG9yYWdlTWFuYWdlcixlLl9oeXBlcnR5UmVzb3VyY2VzKSxlLnAycD8oSy5pbmZvKCJbUnVudGltZVVBIC0gaW5pdF0gbG9hZCBwMnBIYW5kbGVyOiAiLHQpLGUuX2xvYWRQMlBIYW5kbGVyKCkpOihLLmluZm8oIltSdW50aW1lVUEgLSBpbml0XSBQMlAgbm90IHN1cHBvcnRlZCIpLCJQMlAgTm90IFN1cHBvcnRlZCIpfSkudGhlbihmdW5jdGlvbihlKXtLLmluZm8oIltydW50aW1lIHVhIC0gaW5pdF0gLSBzdGF0dXM6ICIsZSksdCghMCl9LGZ1bmN0aW9uKGUpe0suZXJyb3IoIkVSUk9SOiAiLGUpLHQoITApfSl9Y2F0Y2goZSl7cihlKX19KX19LHtrZXk6Il9sb2FkUDJQSGFuZGxlciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQpe3ZhciByPXgucnVudGltZVV0aWxzLnJ1bnRpbWVEZXNjcmlwdG9yLG49ci5wMnBIYW5kbGVyU3R1YixpPXtpc0hhbmRsZXJTdHViOiEwLHJ1bnRpbWVVUkw6ZS5ydW50aW1lVVJMfTtLLmxvZygiW1J1bnRpbWVVQSBsb2FkUDJQSGFuZGxlcl0gUDJQU3R1YkhhbmRsZXI6ICIsbiksZS5sb2FkZXIubG9hZFN0dWIobixpKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPWUucnVudGltZVVSTCsiL3VhIixpPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206bix0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitlLmRvbWFpbisiL3NtIixib2R5OntzdWJzY3JpYmU6W3IudXJsXSxzb3VyY2U6ZS5ydW50aW1lVVJMfX07ZS5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKG4sZnVuY3Rpb24oZSl7Sy5sb2coIltydW50aW1lIHVhIC0gbGlzdGVuZXJdIC0gcmVjZWl2ZSBtc2c6ICIsZSl9KSxlLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihlKXtLLmxvZygiW3J1bnRpbWUgdWEgLSBwb3N0TWVzc2FnZV0gLSByZXBseTogIixlKX0pLEsuaW5mbygiW3J1bnRpbWUgdWEgLSBwMnAgaW5zdGFsbGF0aW9uXSAtIHN1Y2Nlc3M6ICIsciksdCghMCl9KS5jYXRjaChmdW5jdGlvbihlKXtLLmluZm8oIltydW50aW1lIHVhIC0gcDJwIGluc3RhbGxhdGlvbl0gLSBmYWlsOiAiLGUpLHQoITEpfSl9KX19LHtrZXk6Il9sb2FkQ29tcG9uZW50cyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7dHJ5ewovLyBQcmVwYXJlIHRoZSBvbiBpbnN0YW5jZSB0byBoYW5kbGUgd2l0aCB0aGUgZmFsbGJhY2tzIGFuZCBydW50aW1lQ2F0YWxvZ3VlOwplLmRlc2NyaXB0b3JJbnN0YW5jZT1uZXcgTS5kZWZhdWx0KGUucnVudGltZVVSTCxlLnJ1bnRpbWVDYXRhbG9ndWUsZS5ydW50aW1lQ29uZmlndXJhdGlvbiksCi8vIFByZXBhcmUgdGhlIGxvYWRlciB0byBsb2FkIHRoZSBoeXBlcnRpZXMsIHByb3Rvc3R1YnMgYW5kIGlkcHByb3h5OwplLmxvYWRlcj1uZXcgUC5kZWZhdWx0KGUucnVudGltZVVSTCxlLnJ1bnRpbWVDb25maWd1cmF0aW9uLGUuZGVzY3JpcHRvckluc3RhbmNlKSwKLy8gSW5zdGFudGlhdGUgdGhlIGlkZW50aXR5IE1vZHVsZQplLmlkZW50aXR5TW9kdWxlPW5ldyB2LmRlZmF1bHQoZS5ydW50aW1lVVJMLGUucnVudGltZUNhcGFiaWxpdGllcyxlLnN0b3JhZ2VNYW5hZ2VyLGUuX2RhdGFPYmplY3RzU3RvcmFnZSk7Ci8vIFVzZSB0aGUgc2FuZGJveCBmYWN0b3J5IHRvIGNyZWF0ZSBhbiBBcHBTYW5kYm94OwovLyBJbiB0aGUgZnV0dXJlIGNhbiBiZSBkZWNpZGVkIGJ5IHBvbGljeUVuZ2luZSBpZiB3ZSBuZWVkCi8vIGNyZWF0ZSBhIEFwcFNhbmRib3ggb3Igbm90Owp2YXIgbj1lLnJ1bnRpbWVGYWN0b3J5LmNyZWF0ZUFwcFNhbmRib3goKTsKLy8gSW5zdGFudGlhdGUgdGhlIFJlZ2lzdHJ5IE1vZHVsZQplLnJlZ2lzdHJ5PW5ldyB5LmRlZmF1bHQoZS5ydW50aW1lVVJMLG4sZS5pZGVudGl0eU1vZHVsZSxlLnJ1bnRpbWVDYXRhbG9ndWUsZS5ydW50aW1lQ2FwYWJpbGl0aWVzLGUuc3RvcmFnZU1hbmFnZXIsZS5wMnBIYW5kbGVyVVJMKSwKLy8gU2V0IHRoZSBsb2FkZXIgdG8gbG9hZCBIeXBlcnRpZXMsIFN0dWJzIGFuZCBJZHBQcm94aWVzCmUucmVnaXN0cnkubG9hZGVyPWUubG9hZGVyLAovLyBJbnN0YW50aWF0ZSB0aGUgTWVzc2FnZSBCdXMKZS5tZXNzYWdlQnVzPW5ldyBfLmRlZmF1bHQoZS5yZWdpc3RyeSksCi8vIFByZXBhcmUgdGhlIGFkZHJlc3MgYWxsb2NhdGlvbiBpbnN0YW5jZTsKZS5hZGRyZXNzQWxsb2NhdGlvbj1uZXcgUy5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5yZWdpc3RyeSksCi8vIEluc3RhbnRpYXRlIHRoZSBQb2xpY3kgRW5naW5lCmUucG9saWN5RW5naW5lPW5ldyBiLmRlZmF1bHQobmV3IEcuZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5pZGVudGl0eU1vZHVsZSxlLnJlZ2lzdHJ5LGUuc3RvcmFnZU1hbmFnZXIsZS5ydW50aW1lQ2FwYWJpbGl0aWVzKSksZS5tZXNzYWdlQnVzLnBpcGVsaW5lLmhhbmRsZXJzPVsKLy8gUG9saWN5IG1lc3NhZ2UgYXV0aG9yaXNlCmZ1bmN0aW9uKHQpe2UucG9saWN5RW5naW5lLmF1dGhvcmlzZSh0Lm1zZykudGhlbihmdW5jdGlvbihlKXt0Lm1zZz1lLHQubmV4dCgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Sy5lcnJvcihlKSx0LmZhaWwoZSl9KX1dLAovLyBJbnN0YW50aWF0ZSB0aGUgR3JhcGggQ29ubmVjdG9yCmUuZ3JhcGhDb25uZWN0b3I9bmV3IEQuZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5tZXNzYWdlQnVzLGUuc3RvcmFnZU1hbmFnZXIpLAovLyBJbnN0YW50aWF0ZSBEaXNjb3ZlcnkKZS5jb3JlRGlzY292ZXJ5PW5ldyBBLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUubWVzc2FnZUJ1cyxlLmdyYXBoQ29ubmVjdG9yLGUucnVudGltZUZhY3RvcnksZS5yZWdpc3RyeSksCi8vIEFkZCB0byBBcHAgU2FuZGJveCB0aGUgbGlzdGVuZXI7Cm4uYWRkTGlzdGVuZXIoIioiLGZ1bmN0aW9uKHQpe2UubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh0KX0pLAovLyBSZWdpc3RlciBtZXNzYWdlQnVzIG9uIFJlZ2lzdHJ5CmUucmVnaXN0cnkubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIFBvbGljeSBFbmdpbmUKZS5wb2xpY3lFbmdpbmUubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIFJlZ2lzdGVyIG1lc3NhZ2VCdXMgb24gSURNCmUuaWRlbnRpdHlNb2R1bGUubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIFJlZ2lzdGVyIHJlZ2lzdHJ5IG9uIElkZW50aXR5TW9kdWxlCmUuaWRlbnRpdHlNb2R1bGUucmVnaXN0cnk9ZS5yZWdpc3RyeSwKLy8gUmVnaXN0ZXIgY29yZURpc2NvdmVyeSBvbiBJZGVudGl0eU1vZHVsZQplLmlkZW50aXR5TW9kdWxlLmNvcmVEaXNjb3Zlcnk9ZS5jb3JlRGlzY292ZXJ5LAovLyBVc2Ugc2FuZGJveCBmYWN0b3J5IHRvIHVzZSBzcGVjaWZpYyBtZXRob2RzCi8vIGFuZCBzZXQgdGhlIG1lc3NhZ2UgYnVzIHRvIHRoZSBmYWN0b3J5CmUucnVudGltZUZhY3RvcnkubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIEluc3RhbmNpYXRlIHRoZSBTeW5jaGVyTWFuYWdlcjsKZS5zeW5jaGVyTWFuYWdlcj1uZXcgRi5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5yZWdpc3RyeSxlLnJ1bnRpbWVDYXRhbG9ndWUsZS5zdG9yYWdlTWFuYWdlcixudWxsLGUuX2RhdGFPYmplY3RzU3RvcmFnZSxlLmlkZW50aXR5TW9kdWxlKSwKLy8gU2V0IGludG8gbG9hZGVyIHRoZSBuZWVkZWQgY29tcG9uZW50czsKZS5sb2FkZXIucnVudGltZVVSTD1lLnJ1bnRpbWVVUkwsZS5sb2FkZXIubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsZS5sb2FkZXIucmVnaXN0cnk9ZS5yZWdpc3RyeSxlLmxvYWRlci5ydW50aW1lQ2F0YWxvZ3VlPWUucnVudGltZUNhdGFsb2d1ZSxlLmxvYWRlci5ydW50aW1lRmFjdG9yeT1lLnJ1bnRpbWVGYWN0b3J5LAovL0luc3RhbnRpYXRlIERpc2NvdmVyeSBMaWIgZm9yIG5vdGlmaWNhdGlvbiB0ZXN0aW5nCi8vIHRoaXMuZGlzY292ZXJ5ID0gbmV3IERpc2NvdmVyeSgiaHlwZXJ0eTovL2xvY2FsaG9zdC90ZXN0IiwgdGhpcy5ydW50aW1lVVJMLCB0aGlzLm1lc3NhZ2VCdXMpOwovLyB0aGlzLmxvYWRTdHViKCJsb2NhbGhvc3QiKTsKLy8gc2V0VGltZW91dCgoKSA9PiB7Ci8vICAgdGhpcy5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNETygidXNlcjovL2dvb2dsZS5jb20vb3BlbmlkdGVzdDIwQGdtYWlsLmNvbSIpCi8vICAgLnRoZW4oaHlwZXJ0aWVzID0+IHsKLy8gICAgIGh5cGVydGllcy5mb3JFYWNoKGh5cGVydHkgPT57Ci8vICAgICAgIGh5cGVydHkub25MaXZlKCgpID0+IGxvZy5sb2coYE5vdGlmaWNhdGlvbiBmcm9tICR7aHlwZXJ0eS5kYXRhLmh5cGVydHlJRH0gY2hhbmdlZCB0byBsaXZlYCkpOwovLyAgICAgICBoeXBlcnR5Lm9uRGlzY29ubmVjdGVkKCgpID0+IGxvZy5sb2coYE5vdGlmaWNhdGlvbiBmcm9tICR7aHlwZXJ0eS5kYXRhLmh5cGVydHlJRH0gY2hhbmdlZCB0byBkaXNjb25uZWN0ZWRgKSk7Ci8vICAgICB9KTsKLy8gICB9KTsKLy8gfSwgMjAwMCk7Ci8vIEluc3RhbmNpYXRlIHRoZSBTdWJzY3JpcHRpb25NYW5hZ2VyOwplLnN1YnNjcmlwdGlvbk1hbmFnZXI9bmV3IEguZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5tZXNzYWdlQnVzLGUuc3RvcmFnZU1hbmFnZXIpOwovLyB0aGlzLnN1YnNjcmlwdGlvbk1hbmFnZXIuaW5pdCgpLnRoZW4oKCk9PnsKLy8gICByZXNvbHZlKHRydWUpOwovLyB9KTsKdmFyIG89W107by5wdXNoKGUuc3Vic2NyaXB0aW9uTWFuYWdlci5pbml0KCkpLG8ucHVzaChlLmlkZW50aXR5TW9kdWxlLmxvYWRJZGVudGl0aWVzKCkpLG8ucHVzaChlLmlkZW50aXR5TW9kdWxlLmxvYWRTZXNzaW9uS2V5cygpKSxpLmRlZmF1bHQuYWxsKG8pLnRoZW4oZnVuY3Rpb24oZSl7Mz09PWUubGVuZ3RoP3QoITApOnIoIltSdW50aW1lVUEuX2xvYWRDb21wb25lbnRzXSBFcnJvciBdICIsZSl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyBFcnJvcihlKX0pfWNhdGNoKGUpe3IoZSl9fSl9fSx7a2V5OiJsb2FkSHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkh5cGVydHkgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiB0aGlzLmxvYWRlci5sb2FkSHlwZXJ0eShlLHQscil9fSx7a2V5OiJsb2FkU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQcm90b1N0dWIgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiB0aGlzLmxvYWRlci5sb2FkU3R1YihlKX19LHtrZXk6ImxvYWRJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJUaGUgSURQIFByb3h5IFVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXIsIGNvdWxkIGJlIGEgRE9NQUlOIG9yIGEgVVJMIik7cmV0dXJuIHRoaXMubG9hZGVyLmxvYWRJZHBQcm94eShlKX19LHtrZXk6ImNsb3NlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIEsuaW5mbygiVW5yZWdpc3RlciBhbGwgaHlwZXJ0aWVzIiksbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2UucmVnaXN0cnkudW5yZWdpc3RlckFsbEh5cGVydGllcygpLnRoZW4oZnVuY3Rpb24oZSl7Sy5pbmZvKCJBbGwgdGhlIGh5cGVydGllcyBhcmUgdW5yZWdpc3RlZCB3aXRoIFN1Y2Nlc3M6IixlKSx0KCEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe0suZXJyb3IoIkZhaWxlZCB0byB1bnJlZ2lzdGVyIHRoZSBoeXBlcnRpZXMiLGUpLHIoITEpfSl9KX19XSksUnVudGltZVVBfSgpO3QuZGVmYXVsdD1WLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQxMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxNzkpLHIoMTI2KSxyKDE4Nykscig0MjApLHIoNDI3KSxyKDQyOCksZS5leHBvcnRzPXIoMTMpLlByb21pc2V9LC8qIDQxMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMjcpLGk9cigxMjgpOwovLyB0cnVlICAtPiBTdHJpbmcjYXQKLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0CmUuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgbyxhLHM9U3RyaW5nKGkodCkpLHU9bihyKSxjPXMubGVuZ3RoO3JldHVybiB1PDB8fHU+PWM/ZT8iIjp2b2lkIDA6KG89cy5jaGFyQ29kZUF0KHUpLG88NTUyOTZ8fG8+NTYzMTl8fHUrMT09PWN8fChhPXMuY2hhckNvZGVBdCh1KzEpKTw1NjMyMHx8YT41NzM0Mz9lP3MuY2hhckF0KHUpOm86ZT9zLnNsaWNlKHUsdSsyKTphLTU2MzIwKyhvLTU1Mjk2PDwxMCkrNjU1MzYpfX19LC8qIDQxMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTMxKSxpPXIoNzMpLG89cig5NSksYT17fTsKLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKCkKcig1OCkoYSxyKDIyKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uKGEse25leHQ6aSgxLHIpfSksbyhlLHQrIiBJdGVyYXRvciIpfX0sLyogNDE0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxpPXIoMzkpLG89cig2Nyk7ZS5leHBvcnRzPXIoNDMpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUsdCl7aShlKTtmb3IodmFyIHIsYT1vKHQpLHM9YS5sZW5ndGgsdT0wO3M+dTspbi5mKGUscj1hW3UrK10sdFtyXSk7cmV0dXJuIGV9fSwvKiA0MTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mCi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzCnZhciBuPXIoNDQpLGk9cigxMzIpLG89cig0MTYpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLGEpe3ZhciBzLHU9bih0KSxjPWkodS5sZW5ndGgpLGY9byhhLGMpOwovLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYoZSYmciE9cil7Zm9yKDtjPmY7KQovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCmlmKChzPXVbZisrXSkhPXMpcmV0dXJuITB9ZWxzZSBmb3IoO2M+ZjtmKyspaWYoKGV8fGYgaW4gdSkmJnVbZl09PT1yKXJldHVybiBlfHxmfHwwO3JldHVybiFlJiYtMX19fSwvKiA0MTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTI3KSxpPU1hdGgubWF4LG89TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bihlKSxlPDA/aShlK3QsMCk6byhlLHQpfX0sLyogNDE3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0MTgpLGk9cig0MTkpLG89cig3NCksYT1yKDQ0KTsKLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKQovLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKQovLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpCi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQplLmV4cG9ydHM9cigxODApKEFycmF5LCJBcnJheSIsZnVuY3Rpb24oZSx0KXt0aGlzLl90PWEoZSksLy8gdGFyZ2V0CnRoaXMuX2k9MCwvLyBuZXh0IGluZGV4CnRoaXMuX2s9dH0sZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90LHQ9dGhpcy5fayxyPXRoaXMuX2krKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLGkoMSkpOiJrZXlzIj09dD9pKDAscik6InZhbHVlcyI9PXQ/aSgwLGVbcl0pOmkoMCxbcixlW3JdXSl9LCJ2YWx1ZXMiKSwKLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQpvLkFyZ3VtZW50cz1vLkFycmF5LG4oImtleXMiKSxuKCJ2YWx1ZXMiKSxuKCJlbnRyaWVzIil9LC8qIDQxOCAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbigpe319LC8qIDQxOSAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LC8qIDQyMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLGksbyxhLHM9cig5MiksdT1yKDIxKSxjPXIoNjUpLGY9cigxODgpLGw9cigyNiksZD1yKDQyKSxwPXIoOTMpLHk9cig0MjEpLGg9cig0MjIpLHY9cigxOTIpLGc9cigxOTMpLnNldCxiPXIoNDI0KSgpLG09cigxMzYpLF89cigxOTQpLFI9cigxOTUpLHc9dS5UeXBlRXJyb3IsUz11LnByb2Nlc3MsTz11LlByb21pc2UsUD0icHJvY2VzcyI9PWYoUyksaz1mdW5jdGlvbigpe30sTT1pPW0uZixMPSEhZnVuY3Rpb24oKXt0cnl7Ci8vIGNvcnJlY3Qgc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydAp2YXIgZT1PLnJlc29sdmUoMSksdD0oZS5jb25zdHJ1Y3Rvcj17fSlbcigyMikoInNwZWNpZXMiKV09ZnVuY3Rpb24oZSl7ZShrLGspfTsKLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdApyZXR1cm4oUHx8ImZ1bmN0aW9uIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCkmJmUudGhlbihrKWluc3RhbmNlb2YgdH1jYXRjaChlKXt9fSgpLHg9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuISghZChlKXx8ImZ1bmN0aW9uIiE9dHlwZW9mKHQ9ZS50aGVuKSkmJnR9LEU9ZnVuY3Rpb24oZSx0KXtpZighZS5fbil7ZS5fbj0hMDt2YXIgcj1lLl9jO2IoZnVuY3Rpb24oKXtmb3IodmFyIG49ZS5fdixpPTE9PWUuX3Msbz0wO3IubGVuZ3RoPm87KSFmdW5jdGlvbih0KXt2YXIgcixvLGE9aT90Lm9rOnQuZmFpbCxzPXQucmVzb2x2ZSx1PXQucmVqZWN0LGM9dC5kb21haW47dHJ5e2E/KGl8fCgyPT1lLl9oJiZBKGUpLGUuX2g9MSksITA9PT1hP3I9bjooYyYmYy5lbnRlcigpLHI9YShuKSxjJiZjLmV4aXQoKSkscj09PXQucHJvbWlzZT91KHcoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KG89eChyKSk/by5jYWxsKHIscyx1KTpzKHIpKTp1KG4pfWNhdGNoKGUpe3UoZSl9fShyW28rK10pOy8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoCmUuX2M9W10sZS5fbj0hMSx0JiYhZS5faCYmRChlKX0pfX0sRD1mdW5jdGlvbihlKXtnLmNhbGwodSxmdW5jdGlvbigpe3ZhciB0LHIsbixpPWUuX3Ysbz1VKGUpO2lmKG8mJih0PV8oZnVuY3Rpb24oKXtQP1MuZW1pdCgidW5oYW5kbGVkUmVqZWN0aW9uIixpLGUpOihyPXUub251bmhhbmRsZWRyZWplY3Rpb24pP3Ioe3Byb21pc2U6ZSxyZWFzb246aX0pOihuPXUuY29uc29sZSkmJm4uZXJyb3ImJm4uZXJyb3IoIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiIsaSl9KSwKLy8gQnJvd3NlcnMgc2hvdWxkIG5vdCB0cmlnZ2VyIGByZWplY3Rpb25IYW5kbGVkYCBldmVudCBpZiBpdCB3YXMgaGFuZGxlZCBoZXJlLCBOb2RlSlMgLSBzaG91bGQKZS5faD1QfHxVKGUpPzI6MSksZS5fYT12b2lkIDAsbyYmdC5lKXRocm93IHQudn0pfSxVPWZ1bmN0aW9uKGUpe2lmKDE9PWUuX2gpcmV0dXJuITE7Zm9yKHZhciB0LHI9ZS5fYXx8ZS5fYyxuPTA7ci5sZW5ndGg+bjspaWYodD1yW24rK10sdC5mYWlsfHwhVSh0LnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxBPWZ1bmN0aW9uKGUpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIHQ7UD9TLmVtaXQoInJlamVjdGlvbkhhbmRsZWQiLGUpOih0PXUub25yZWplY3Rpb25oYW5kbGVkKSYmdCh7cHJvbWlzZTplLHJlYXNvbjplLl92fSl9KX0saj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2R8fCh0Ll9kPSEwLHQ9dC5fd3x8dCwvLyB1bndyYXAKdC5fdj1lLHQuX3M9Mix0Ll9hfHwodC5fYT10Ll9jLnNsaWNlKCkpLEUodCwhMCkpfSxJPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5fZCl7ci5fZD0hMCxyPXIuX3d8fHI7Ly8gdW53cmFwCnRyeXtpZihyPT09ZSl0aHJvdyB3KCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PXgoZSkpP2IoZnVuY3Rpb24oKXt2YXIgbj17X3c6cixfZDohMX07Ly8gd3JhcAp0cnl7dC5jYWxsKGUsYyhJLG4sMSksYyhqLG4sMSkpfWNhdGNoKGUpe2ouY2FsbChuLGUpfX0pOihyLl92PWUsci5fcz0xLEUociwhMSkpfWNhdGNoKGUpe2ouY2FsbCh7X3c6cixfZDohMX0sZSl9fX07Ci8vIGNvbnN0cnVjdG9yIHBvbHlmaWxsCkx8fCgKLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcikKTz1mdW5jdGlvbihlKXt5KHRoaXMsTywiUHJvbWlzZSIsIl9oIikscChlKSxuLmNhbGwodGhpcyk7dHJ5e2UoYyhJLHRoaXMsMSksYyhqLHRoaXMsMSkpfWNhdGNoKGUpe2ouY2FsbCh0aGlzLGUpfX0sCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwpuPWZ1bmN0aW9uKGUpe3RoaXMuX2M9W10sLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zCnRoaXMuX2E9dm9pZCAwLC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zCnRoaXMuX3M9MCwvLyA8LSBzdGF0ZQp0aGlzLl9kPSExLC8vIDwtIGRvbmUKdGhpcy5fdj12b2lkIDAsLy8gPC0gdmFsdWUKdGhpcy5faD0wLC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkCnRoaXMuX249ITF9LG4ucHJvdG90eXBlPXIoNDI1KShPLnByb3RvdHlwZSx7Ci8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpCnRoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1NKHYodGhpcyxPKSk7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LHIuZG9tYWluPVA/Uy5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChyKSx0aGlzLl9hJiZ0aGlzLl9hLnB1c2gociksdGhpcy5fcyYmRSh0aGlzLCExKSxyLnByb21pc2V9LAovLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKQpjYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSxvPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG47dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPWMoSSxlLDEpLHRoaXMucmVqZWN0PWMoaixlLDEpfSxtLmY9TT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PU98fGU9PT1hP25ldyBvKGUpOmkoZSl9KSxsKGwuRytsLlcrbC5GKiFMLHtQcm9taXNlOk99KSxyKDk1KShPLCJQcm9taXNlIikscig0MjYpKCJQcm9taXNlIiksYT1yKDEzKS5Qcm9taXNlLAovLyBzdGF0aWNzCmwobC5TK2wuRiohTCwiUHJvbWlzZSIsewovLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKQpyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9TSh0aGlzKTtyZXR1cm4oMCx0LnJlamVjdCkoZSksdC5wcm9taXNlfX0pLGwobC5TK2wuRiooc3x8IUwpLCJQcm9taXNlIix7Ci8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KQpyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiBSKHMmJnRoaXM9PT1hP086dGhpcyxlKX19KSxsKGwuUytsLkYqIShMJiZyKDE5NikoZnVuY3Rpb24oZSl7Ty5hbGwoZSkuY2F0Y2goayl9KSksIlByb21pc2UiLHsKLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpCmFsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9TSh0KSxuPXIucmVzb2x2ZSxpPXIucmVqZWN0LG89XyhmdW5jdGlvbigpe3ZhciByPVtdLG89MCxhPTE7aChlLCExLGZ1bmN0aW9uKGUpe3ZhciBzPW8rKyx1PSExO3IucHVzaCh2b2lkIDApLGErKyx0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXt1fHwodT0hMCxyW3NdPWUsLS1hfHxuKHIpKX0saSl9KSwtLWF8fG4ocil9KTtyZXR1cm4gby5lJiZpKG8udiksci5wcm9taXNlfSwKLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKQpyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1NKHQpLG49ci5yZWplY3QsaT1fKGZ1bmN0aW9uKCl7aChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIGkuZSYmbihpLnYpLHIucHJvbWlzZX19KX0sLyogNDIxICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKCEoZSBpbnN0YW5jZW9mIHQpfHx2b2lkIDAhPT1uJiZuIGluIGUpdGhyb3cgVHlwZUVycm9yKHIrIjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIGV9fSwvKiA0MjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNjUpLGk9cigxODkpLG89cigxOTApLGE9cigzOSkscz1yKDEzMiksdT1yKDE5MSksYz17fSxmPXt9LHQ9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGwsZCl7dmFyIHAseSxoLHYsZz1kP2Z1bmN0aW9uKCl7cmV0dXJuIGV9OnUoZSksYj1uKHIsbCx0PzI6MSksbT0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBnKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpOwovLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3IKaWYobyhnKSl7Zm9yKHA9cyhlLmxlbmd0aCk7cD5tO20rKylpZigodj10P2IoYSh5PWVbbV0pWzBdLHlbMV0pOmIoZVttXSkpPT09Y3x8dj09PWYpcmV0dXJuIHZ9ZWxzZSBmb3IoaD1nLmNhbGwoZSk7ISh5PWgubmV4dCgpKS5kb25lOylpZigodj1pKGgsYix5LnZhbHVlLHQpKT09PWN8fHY9PT1mKXJldHVybiB2fTt0LkJSRUFLPWMsdC5SRVRVUk49Zn0sLyogNDIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0sLyogNDI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIxKSxpPXIoMTkzKS5zZXQsbz1uLk11dGF0aW9uT2JzZXJ2ZXJ8fG4uV2ViS2l0TXV0YXRpb25PYnNlcnZlcixhPW4ucHJvY2VzcyxzPW4uUHJvbWlzZSx1PSJwcm9jZXNzIj09cig3NSkoYSk7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxyLGM9ZnVuY3Rpb24oKXt2YXIgbixpO2Zvcih1JiYobj1hLmRvbWFpbikmJm4uZXhpdCgpO2U7KXtpPWUuZm4sZT1lLm5leHQ7dHJ5e2koKX1jYXRjaChuKXt0aHJvdyBlP3IoKTp0PXZvaWQgMCxufX10PXZvaWQgMCxuJiZuLmVudGVyKCl9OwovLyBOb2RlLmpzCmlmKHUpcj1mdW5jdGlvbigpe2EubmV4dFRpY2soYyl9O2Vsc2UgaWYobyl7dmFyIGY9ITAsbD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IG8oYykub2JzZXJ2ZShsLHtjaGFyYWN0ZXJEYXRhOiEwfSksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKcj1mdW5jdGlvbigpe2wuZGF0YT1mPSFmfX1lbHNlIGlmKHMmJnMucmVzb2x2ZSl7dmFyIGQ9cy5yZXNvbHZlKCk7cj1mdW5jdGlvbigpe2QudGhlbihjKX19ZWxzZSByPWZ1bmN0aW9uKCl7Ci8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkKaS5jYWxsKG4sYyl9O3JldHVybiBmdW5jdGlvbihuKXt2YXIgaT17Zm46bixuZXh0OnZvaWQgMH07dCYmKHQubmV4dD1pKSxlfHwoZT1pLHIoKSksdD1pfX19LC8qIDQyNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig1OCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGkgaW4gdClyJiZlW2ldP2VbaV09dFtpXTpuKGUsaSx0W2ldKTtyZXR1cm4gZX19LC8qIDQyNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMjEpLGk9cigxMyksbz1yKDM4KSxhPXIoNDMpLHM9cigyMikoInNwZWNpZXMiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIGlbZV0/aVtlXTpuW2VdO2EmJnQmJiF0W3NdJiZvLmYodCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSwvKiA0MjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS1maW5hbGx5CnZhciBuPXIoMjYpLGk9cigxMyksbz1yKDIxKSxhPXIoMTkyKSxzPXIoMTk1KTtuKG4uUCtuLlIsIlByb21pc2UiLHtmaW5hbGx5OmZ1bmN0aW9uKGUpe3ZhciB0PWEodGhpcyxpLlByb21pc2V8fG8uUHJvbWlzZSkscj0iZnVuY3Rpb24iPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKHI/ZnVuY3Rpb24ocil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcn0pfTplLHI/ZnVuY3Rpb24ocil7cmV0dXJuIHModCxlKCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyByfSl9OmUpfX0pfSwvKiA0MjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS10cnkKdmFyIG49cigyNiksaT1yKDEzNiksbz1yKDE5NCk7bihuLlMsIlByb21pc2UiLHt0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9aS5mKHRoaXMpLHI9byhlKTtyZXR1cm4oci5lP3QucmVqZWN0OnQucmVzb2x2ZSkoci52KSx0LnByb21pc2V9fSl9LC8qIDQyOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MzApLGUuZXhwb3J0cz1yKDEzKS5PYmplY3QuYXNzaWdufSwvKiA0MzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKQp2YXIgbj1yKDI2KTtuKG4uUytuLkYsIk9iamVjdCIse2Fzc2lnbjpyKDQzMSl9KX0sLyogNDMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDE5LjEuMi4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UsIC4uLikKdmFyIG49cig2NyksaT1yKDEzNyksbz1yKDc3KSxhPXIoNzYpLHM9cigxODQpLHU9T2JqZWN0LmFzc2lnbjsKLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpCmUuZXhwb3J0cz0hdXx8cig2NikoZnVuY3Rpb24oKXt2YXIgZT17fSx0PXt9LHI9U3ltYm9sKCksbj0iYWJjZGVmZ2hpamtsbW5vcHFyc3QiO3JldHVybiBlW3JdPTcsbi5zcGxpdCgiIikuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPWV9KSw3IT11KHt9LGUpW3JdfHxPYmplY3Qua2V5cyh1KHt9LHQpKS5qb2luKCIiKSE9bn0pP2Z1bmN0aW9uKGUsdCl7Zm9yKC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKdmFyIHI9YShlKSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0xLGY9aS5mLGw9by5mO3U+YzspZm9yKHZhciBkLHA9cyhhcmd1bWVudHNbYysrXSkseT1mP24ocCkuY29uY2F0KGYocCkpOm4ocCksaD15Lmxlbmd0aCx2PTA7aD52OylsLmNhbGwocCxkPXlbdisrXSkmJihyW2RdPXBbZF0pO3JldHVybiByfTp1fSwvKiA0MzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDMzKTt2YXIgbj1yKDEzKS5PYmplY3Q7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5kZWZpbmVQcm9wZXJ0eShlLHQscil9fSwvKiA0MzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjYpOwovLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQpuKG4uUytuLkYqIXIoNDMpLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0eTpyKDM4KS5mfSl9LC8qIDQzNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTEpLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKSxvPWkuZGVmYXVsdC5nZXRMb2dnZXIoImFkZHJlc3MtYWxsb2NhdGlvbiIpLGE9aS5kZWZhdWx0LmdldExvZ2dlcigiQnVzIikscz1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJNZXNzYWdlQnVzIiksdT1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJDb3JlRGlzY292ZXJ5IiksYz1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJHcmFwaENvbm5lY3RvciIpLGY9aS5kZWZhdWx0LmdldExvZ2dlcigiSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UiKSxsPWkuZGVmYXVsdC5nZXRMb2dnZXIoIklkZW50aXR5TW9kdWxlIiksZD1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJQRVAiKSxwPWkuZGVmYXVsdC5nZXRMb2dnZXIoIlAyUENvbm5lY3Rpb25SZXNvbHZlIikseT1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJSZWdpc3RyeSIpLGg9aS5kZWZhdWx0LmdldExvZ2dlcigiUnVudGltZVVBIiksdj1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJMb2FkZXIiKSxnPWkuZGVmYXVsdC5nZXRMb2dnZXIoIkRlc2NyaXB0b3JzIiksYj1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJEYXRhT2JqZWN0c1N0b3JhZ2UiKSxtPWkuZGVmYXVsdC5nZXRMb2dnZXIoIlN1YnNjcmlwdGlvbiIpLF89aS5kZWZhdWx0LmdldExvZ2dlcigiU3Vic2NyaXB0aW9uTWFuYWdlciIpLFI9aS5kZWZhdWx0LmdldExvZ2dlcigiT2JzZXJ2ZXJPYmplY3QiKSx3PWkuZGVmYXVsdC5nZXRMb2dnZXIoIlJlcG9ydGVyT2JqZWN0IiksUz1pLmRlZmF1bHQuZ2V0TG9nZ2VyKCJTeW5TdWJzY3JpcHRpb24iKSxPPWkuZGVmYXVsdC5nZXRMb2dnZXIoIlN5bmNoZXJNYW5hZ2VyIik7LyoqCiAgNSBhY3R1YWwgbG9nZ2luZyBtZXRob2RzLCBvcmRlcmVkIGFuZCBhdmFpbGFibGUgYXM6CgogICAgICAwIC0gbG9nLnRyYWNlKG1zZykKICAgICAgMSAtIGxvZy5kZWJ1Zyhtc2cpCiAgICAgIDIgLSBsb2cuaW5mbyhtc2cpCiAgICAgIDMgLSBsb2cud2Fybihtc2cpCiAgICAgIDQgLSBsb2cuZXJyb3IobXNnKQoKICBsb2cubG9nKG1zZykgaXMgYWxzbyBhdmFpbGFibGUsIGFzIGFuIGFsaWFzIGZvciBsb2cuZGVidWcobXNnKSwgdG8gaW1wcm92ZSBjb21wYXRpYmlsaXR5IHdpdGggY29uc29sZSwgYW5kIG1ha2UgbWlncmF0aW9uIGVhc2llci4KCiAgRXhhY3Qgb3V0cHV0IGZvcm1hdHRpbmcgb2YgdGhlc2Ugd2lsbCBkZXBlbmQgb24gdGhlIGNvbnNvbGUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGNvbnRleHQgb2YgeW91ciBhcHBsaWNhdGlvbi4gRm9yIGV4YW1wbGUsIG1hbnkgZW52aXJvbm1lbnRzIHdpbGwgaW5jbHVkZSBhIGZ1bGwgc3RhY2sgdHJhY2Ugd2l0aCBhbGwgdHJhY2UoKSBjYWxscywgYW5kIGljb25zIG9yIHNpbWlsYXIgdG8gaGlnaGxpZ2h0IG90aGVyIGNhbGxzLgoKICBUaGVzZSBtZXRob2RzIHNob3VsZCBuZXZlciBmYWlsIGluIGFueSBlbnZpcm9ubWVudCwgZXZlbiBpZiBubyBjb25zb2xlIG9iamVjdCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLCBhbmQgc2hvdWxkIGFsd2F5cyBmYWxsIGJhY2sgdG8gYW4gYXZhaWxhYmxlIGxvZyBtZXRob2QgZXZlbiBpZiB0aGUgc3BlY2lmaWMgbWV0aG9kIGNhbGxlZCAoZS5nLiB3YXJuKSBpc24ndCBhdmFpbGFibGUuCgogIEJlIGF3YXJlIHRoYXQgYWxsIHRoaXMgbWVhbnMgdGhhdCB0aGVzZSBtZXRob2Qgd29uJ3QgbmVjZXNzYXJpbHkgYWx3YXlzIHByb2R1Y2UgZXhhY3RseSB0aGUgb3V0cHV0IHlvdSBleHBlY3QgaW4gZXZlcnkgZW52aXJvbm1lbnQ7IGxvZ2xldmVsIG9ubHkgZ3VhcmFudGVlcyB0aGF0IHRoZXNlIG1ldGhvZHMgd2lsbCBuZXZlciBleHBsb2RlIG9uIHlvdSwgYW5kIHRoYXQgaXQgd2lsbCBjYWxsIHRoZSBtb3N0IHJlbGV2YW50IG1ldGhvZCBpdCBjYW4gZmluZCwgd2l0aCB5b3VyIGFyZ3VtZW50LiBGaXJlZm94IGlzIGEgbm90YWJsZSBleGFtcGxlIGhlcmU6IGR1ZSB0byBhIGN1cnJlbnQgRmlyZWZveCBidWcgbG9nLnRyYWNlKG1zZykgY2FsbHMgaW4gRmlyZWZveCB3aWxsIHByaW50IG9ubHkgdGhlIHN0YWNrdHJhY2UsIGFuZCB3b24ndCBpbmNsdWRlIGFueSBwYXNzZWQgbWVzc2FnZSBhcmd1bWVudHMuCgoqLwovLyBhZGRyZXNzLWFsbG9jYXRpb24Kby5zZXRMZXZlbCg1KSwKLy8gQnVzCmEuc2V0TGV2ZWwoNSksCi8vIE1lc3NhZ2VCdXMKcy5zZXRMZXZlbCg1KSwKLy8gQ29yZURpc2NvdmVyeQp1LnNldExldmVsKDUpLAovLyBHcmFwaENvbm5lY3RvcgpjLnNldExldmVsKDUpLAovLyBIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZQpmLnNldExldmVsKDUpLAovLyBJZGVudGl0eU1vZHVsZQpsLnNldExldmVsKDApLAovLyBQRVAKZC5zZXRMZXZlbCg1KSwKLy8gUDJQQ29ubmVjdGlvblJlc29sdmUKcC5zZXRMZXZlbCg1KSwKLy8gUmVnaXN0cnkKeS5zZXRMZXZlbCg1KSwKLy8gUnVudGltZVVBCmguc2V0TGV2ZWwoMCksCi8vIExvYWRlcgp2LnNldExldmVsKDApLAovLyBEZXNjcmlwdG9ycwpnLnNldExldmVsKDApLAovLyBEYXRhT2JqZWN0c1N0b3JhZ2UKYi5zZXRMZXZlbCg1KSwKLy8gU3Vic2NyaXB0aW9uCm0uc2V0TGV2ZWwoNSksCi8vIFN1YnNjcmlwdGlvbk1hbmFnZXIKXy5zZXRMZXZlbCg1KSwKLy8gT2JzZXJ2ZXJPYmplY3QKUi5zZXRMZXZlbCgzKSwKLy8gUmVwb3J0ZXJPYmplY3QKdy5zZXRMZXZlbCgzKSwKLy8gU3luU3Vic2NyaXB0aW9uClMuc2V0TGV2ZWwoMyksCi8vIFN5bmNoZXJNYW5hZ2VyCk8uc2V0TGV2ZWwoMyl9LC8qIDQzNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigxMSksZD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGwpLHA9cigxMzgpLHk9cig0MzgpLGg9cig5OSksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9cig0NjEpLGI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChnKSxtPXIoNDYzKSxfPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobSksUj1yKDE1KTtyKDQ2NCk7dmFyIHc9cigyMDEpLFM9ZC5nZXRMb2dnZXIoIlJlZ2lzdHJ5IiksTz17Q1JFQVRFRDoiY3JlYXRlZCIsTElWRToibGl2ZSIsREVQTE9ZSU5HOiJkZXBsb3lpbmciLERFUExPWUVEOiJkZXBsb3llZCIsUFJPR1JFU1M6ImluLXByb2dyZXNzIixESVNDT05ORUNURUQ6ImRpc2Nvbm5lY3RlZCIsRkFJTEVEOiJkZXBsb3ltZW50LWZhaWxlZCIsREVBRDoiZGVhZCJ9LFA9ZnVuY3Rpb24oKXsvKioKICAqIFRvIGluaXRpYWxpc2UgdGhlIFJ1bnRpbWUgUmVnaXN0cnkgd2l0aCB0aGUgUnVudGltZVVSTCB0aGF0IHdpbGwgYmUgdGhlIGJhc2lzIHRvIGRlcml2ZSB0aGUgaW50ZXJuYWwgcnVudGltZSBhZGRyZXNzZXMgd2hlbiBhbGxvY2F0aW5nIGFkZHJlc3NlcyB0byBpbnRlcm5hbCBydW50aW1lIGNvbXBvbmVudC4gSW4gYWRkaXRpb24sIHRoZSBSZWdpc3RyeSBkb21haW4gYmFjay1lbmQgdG8gYmUgdXNlZCB0byByZW1vdGVseSByZWdpc3RlciBSdW50aW1lIGNvbXBvbmVudHMsIGlzIGFsc28gcGFzc2VkIGFzIGlucHV0IHBhcmFtZXRlci4KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICAgIG1zZ2J1cyAgICAgICAgICAgICAgICBtc2didXMKICAqIEBwYXJhbSAge0h5cGVydHlSdW50aW1lVVJMfSAgIHJ1bnRpbWVVUkwgICAgICAgICAgICBydW50aW1lVVJMCiAgKiBAcGFyYW0gIHtBcHBTYW5kYm94fSAgICAgICAgICBhcHBTYW5kYm94ICAgICAgICAgICAgYXBwU2FuZGJveAogICogQHBhcmFtICB7cnVudGltZUNhdGFsb2d1ZX0gICAgcnVudGltZUNhdGFsb2d1ZSAgICAgIHJ1bnRpbWVDYXRhbG9ndWUKICAqIEBwYXJhbSAge0RvbWFpblVSTH0gICAgICAgICAgIHJlbW90ZVJlZ2lzdHJ5ICAgICAgICByZW1vdGVSZWdpc3RyeQogICogQHBhcmFtICB7c3RvcmFnZU1hbmFnZXJ9ICAgICAgc3RvcmFnZU1hbmFnZXIKICAqLwpmdW5jdGlvbiBSZWdpc3RyeShlLHQscixuLGksbyxhLHMpewovLyBob3cgc29tZSBmdW5jdGlvbnMgcmVjZWl2ZSB0aGUgcGFyYW1ldGVycyBmb3IgZXhhbXBsZToKLy8gbmV3IFJlZ2lzdHJ5KCdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJywgYXBwU2FuZGJveCwgaWRNb2R1bGUsIHJlbW90ZVJlZ2lzdHJ5KTsKLy8gcmVnaXN0cnkucmVnaXN0ZXJTdHViKHNhbmRib3gsICdzcDEnKTsKLy8gcmVnaXN0cnkucmVnaXN0ZXJIeXBlcnR5KHNhbmRCb3gsICdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJyk7Ci8vIHJlZ2lzdHJ5LnJlc29sdmUoJ2h5cGVydHktcnVudGltZTovL3NwMS8xMjMnKTsKaWYoKDAsdS5kZWZhdWx0KSh0aGlzLFJlZ2lzdHJ5KSwhZSl0aHJvdyBuZXcgRXJyb3IoInJ1bnRpbWVVUkwgaXMgbWlzc2luZy4iKTtpZighbyl0aHJvdyBuZXcgRXJyb3IoInN0b3JhZ2VNYW5hZ2VyIGlzIG1pc3NpbmcuIik7LyppZiAoIXJlbW90ZVJlZ2lzdHJ5KSB0aHJvdyBuZXcgRXJyb3IoJ3JlbW90ZVJlZ2lzdHJ5IGlzIG1pc3NpbmcnKTsqLwp2YXIgYz10aGlzO2MucmVnaXN0cnlVUkw9ZSsiL3JlZ2lzdHJ5LyIsYy5hcHBTYW5kYm94PXQsYy5ydW50aW1lVVJMPWUsYy5wMnBIYW5kbGVyVVJMPWEsYy5ydW50aW1lQ2F0YWxvZ3VlPW4sYy5yZW1vdGVSZWdpc3RyeT1zLGMuaWRNb2R1bGU9cixjLnN0b3JhZ2VNYW5hZ2VyPW8sYy5ydW50aW1lQ2FwYWJpbGl0aWVzPWksYy5pZGVudGlmaWVyPSgwLFIuZ2VuZXJhdGVHVUlEKSgpLGMucmVnaXN0cmF0aW9uUmV0cmllcz01LC8vIG51bWJlciBvZiBhdHRlbXB0cyB0byByZWdpc3RlciBIeXBlcnRpZXMgYW5kIERhdGFPYmplY3RzIHdoZW4gZXJyb3JzIG9jY3VycwovLyB0aGUgZXhwaXJlcyBpbiAzNjAwLCByZXByZXNlbnRzIDEgaG91cgovL3RoZSBleHBpcmVzIGlzIGluIHNlY29uZHMsIHVuaXQgb2YgbWVhc3VyZSByZWNlaXZlZCBieSB0aGUgZG9tYWluIHJlZ2lzdHJ5CmMuZXhwaXJlc1RpbWU9MzYwMCxjLmh5cGVydGllc0xpc3RUb1JlbW92ZT17fSxjLmh5cGVydGllc0xpc3Q9W10sYy5yZW1vdGVIeXBlcnR5TGlzdD1bXSxjLnJlbW90ZURhdGFPYmplY3RMaXN0PVtdLGMuaWRwTGVnYWN5UHJveHlMaXN0PXt9LGMud2F0Y2hpbmdZb3U9bmV3IHcuV2F0Y2hpbmdZb3UsYy5wMnBIYW5kbGVyU3R1Yj17fSxjLnAycFJlcXVlc3RlclN0dWI9Yy53YXRjaGluZ1lvdS53YXRjaCgicDJwUmVxdWVzdGVyU3R1YiIse30sITApLGMucDJwQ29ubmVjdGlvbkxpc3Q9Yy53YXRjaGluZ1lvdS53YXRjaCgicDJwQ29ubmVjdGlvbkxpc3QiLHt9LCEwKSxjLnAycEhhbmRsZXJBc3NvY2lhdGlvbj17fSxjLnByb3Rvc3R1YnNMaXN0PWMud2F0Y2hpbmdZb3Uud2F0Y2goInByb3Rvc3R1YnNMaXN0Iix7fSwhMCksYy5pZHBQcm94eUxpc3Q9Yy53YXRjaGluZ1lvdS53YXRjaCgiaWRwUHJveHlMaXN0Iix7fSwhMCksYy5kYXRhT2JqZWN0TGlzdD17fSxjLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdD17fSxjLnNhbmRib3hlc0xpc3Q9e3NhbmRib3g6e30sYXBwU2FuZGJveDp7fX0sYy5wZXBMaXN0PXt9LGMucmVnaXN0cmllcz17fSxjLl9kb21haW49KDAsUi5kaXZpZGVVUkwpKGMucmVnaXN0cnlVUkwpLmRvbWFpbixjLnNhbmRib3hlc0xpc3QuYXBwU2FuZGJveFtlXT10O3ZhciBmPW5ldyBfLmRlZmF1bHQoYyk7Yy5fcDJwQ29ubmVjdGlvblJlc29sdmU9Zn1yZXR1cm4oMCxmLmRlZmF1bHQpKFJlZ2lzdHJ5LFt7a2V5OiJfZ2V0SWRlbnRpdHlBc3NvY2lhdGVkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHIuaHlwZXJ0aWVzTGlzdCl7dmFyIGk9ci5oeXBlcnRpZXNMaXN0W25dO2lmKGkuX2h5cGVydHlVUkw9PT10KXN3aXRjaChlKXtjYXNlInVzZXJuYW1lIjpyZXR1cm4gaS5fdXNlci51c2VybmFtZTtjYXNlImNuIjpyZXR1cm4gaS5fdXNlci5jbjtjYXNlImxvY2FsZSI6cmV0dXJuIGkuX3VzZXIubG9jYWxlO2Nhc2UiYXZhdGFyIjpyZXR1cm4gaS5fdXNlci5hdmF0YXI7Y2FzZSJ1c2VyVVJMIjpyZXR1cm4gaS5fdXNlci51c2VyVVJMO2Nhc2UiLiI6cmV0dXJuIGkuX3VzZXI7ZGVmYXVsdDpyZXR1cm4iIn19cmV0dXJuIiJ9fSx7a2V5OiJnZXRBcHBTYW5kYm94Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcFNhbmRib3h9fSx7a2V5OiJnZXRIeXBlcnR5T3duZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj12b2lkIDA7Zm9yKHZhciBuIGluIHQuaHlwZXJ0aWVzTGlzdCl7dmFyIGk9dC5oeXBlcnRpZXNMaXN0W25dO2kuaHlwZXJ0eVVSTD09PWUmJihyPWkudXNlci51c2VyVVJMKX1yZXR1cm4gcn19LHtrZXk6ImdldEh5cGVydHlOYW1lIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9Imh5cGVydHkiPT09KDAsUi5kaXZpZGVVUkwpKGUpLnR5cGUsbj12b2lkIDAsaT1yP2U6dC5nZXRSZXBvcnRlclVSTFN5bmNob25vdXMoZSk7Zm9yKHZhciBvIGluIHQuaHlwZXJ0aWVzTGlzdCl7dmFyIGE9dC5oeXBlcnRpZXNMaXN0W29dO2lmKGEuaHlwZXJ0eVVSTD09PWkpe249YS5vYmplY3ROYW1lO2JyZWFrfX1yZXR1cm4gbn19LHtrZXk6ImdldFJlcG9ydGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9dC5kYXRhT2JqZWN0TGlzdFtlXTtpP3IoaS5yZXBvcnRlcik6bigiTm8gcmVwb3J0ZXIgd2FzIGZvdW5kIil9KX19LHtrZXk6ImdldFJlcG9ydGVyVVJMU3luY2hvbm91cyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuZGF0YU9iamVjdExpc3RbZV07cmV0dXJuIHI/ci5yZXBvcnRlcjp2b2lkIDB9fSx7a2V5OiJnZXREYXRhT2JqZWN0U3Vic2NyaWJlckh5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdFtlXX19LHtrZXk6InJlZ2lzdGVyU3Vic2NyaWJlZERhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt2b2lkIDA9PT1yLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdFtlXSYmKHIuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0W2VdPXQpfX0se2tleToiZ2V0UHJlQXV0aFN1YnNjcmliZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5kYXRhT2JqZWN0TGlzdFtlXSxuPVtdO3JldHVybiByJiYobj1yLmF1dGhvcmlzZSksbn19LHtrZXk6InVucmVnaXN0ZXJBbGxIeXBlcnRpZXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVtdO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Zm9yKHZhciBpIGluIGUuaHlwZXJ0aWVzTGlzdCl7dmFyIG89ZS5oeXBlcnRpZXNMaXN0W2ldLHM9ZS51bnJlZ2lzdGVySHlwZXJ0eUluc3RhbmNlKG8uaHlwZXJ0eVVSTCk7dC5wdXNoKHMpfWEuZGVmYXVsdC5hbGwodCkudGhlbihmdW5jdGlvbigpe3IoInN1Y2Nlc3NmdWxseSB1bnJlZ2lzdGVyZWQgYWxsIGh5cGVydGllcyIpfSxmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6InVucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2UiLHZhbHVlOmZ1bmN0aW9uKGUpewovL1RPRE8gd29ya2luZyBidXQgdGhlIHVzZXIKdmFyIHQ9dGhpcyxyPXt0eXBlOiJleGVjdXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ZSxib2R5OnttZXRob2Q6ImNsb3NlIn19OwovLyBTZW5kIG1lc3NhZ2UgdG8gaHlwZXJ0eSB0byBjbG9zZQp0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24ocil7Uy5sb2coIltSZWdpc3RyeS51bnJlZ2lzdGVySHlwZXJ0eUluc3RhbmNlXSBDbG9zZSBSZXBseSIscik7dmFyIG49e3R5cGU6InVwZGF0ZSIsZnJvbTp0LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QuX2RvbWFpbixib2R5OntyZXNvdXJjZToiL2h5cGVydHkvIitlLHZhbHVlOiJkaXNjb25uZWN0ZWQiLGF0dHJpYnV0ZToic3RhdHVzIn19O3QuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobixmdW5jdGlvbihlKXtTLmxvZygiW1JlZ2lzdHJ5XSB1bnJlZ2lzdGVyIGh5cGVydHkgUmVwbHkiLGUpfSl9KX19LHtrZXk6InVucmVnaXN0ZXJEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InVwZGF0ZSIsZnJvbTp0LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QuX2RvbWFpbixib2R5OntyZXNvdXJjZTplLHZhbHVlOntzdGF0dXM6ImRpc2Nvbm5lY3RlZCJ9fX07dC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKGUpe1MubG9nKCJbUmVnaXN0cnldIHVucmVnaXN0ZXIgZGF0YU9iamVjdCBSZXBseSIsZSl9KX19LHtrZXk6ImRlbGV0ZURhdGFPYmplY3RJbnN0YW5jZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJkZWxldGUiLGZyb206dC5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIit0Ll9kb21haW4sYm9keTp7dmFsdWU6e25hbWU6ZX19fTt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24oZSl7Uy5sb2coIltSZWdpc3RyeV0gdW5yZWdpc3RlciBkYXRhT2JqZWN0IFJlcGx5IixlKX0pfX0se2tleToidXBkYXRlSHlwZXJ0eUluc3RhbmNlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17dHlwZToiVVBEQVRFIixmcm9tOnIucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrci5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmUsdmFsdWU6dH19O3IuX21lc3NhZ2VCdXMucG9zdC5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKGUpe30pfX0se2tleToicmVnaXN0ZXJTdWJzY3JpYmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1yLmRhdGFPYmplY3RMaXN0W2VdO24mJihuLnN1YnNjcmliZXJzfHwobi5zdWJzY3JpYmVycz1bXSksbi5zdWJzY3JpYmVycy5wdXNoKHQpLHIuZGF0YU9iamVjdExpc3RbZV09bil9fSx7a2V5OiJnZXREYXRhT2JqZWN0U3Vic2NyaWJlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LmRhdGFPYmplY3RMaXN0W2VdO2lmKHIpcmV0dXJuIHIuc3Vic2NyaWJlcnM7dGhyb3ciTm8gZGF0YU9iamVjdCB3YXMgZm91bmQifX0se2tleToicmVnaXN0ZXJEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsUi5kZWVwQ2xvbmUpKGUpO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGE9W10scz1yLnVybC5zcGxpdCgiOiIpO2EucHVzaChzWzBdKSx0LnN0b3JhZ2VNYW5hZ2VyLmdldCgicmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiKS50aGVuKGZ1bmN0aW9uKHMpe3N8fChzPXt9KSwKLy91cGRhdGUgdGhlIGxpc3Qgd2l0aCB0aGUgbmV3IGVsZW1lbnRzCnNbZS5uYW1lK2Uuc2NoZW1hK2UucmVzb3VyY2VzK2UucmVwb3J0ZXJdPWUudXJsO3ZhciB1PXZvaWQgMCxjPXZvaWQgMDswIT09KDAsaS5kZWZhdWx0KSh0LnAycEhhbmRsZXJTdHViKS5sZW5ndGgmJih1PXQucDJwSGFuZGxlclN0dWJbdC5ydW50aW1lVVJMXS51cmwsYz1wLnJ1bnRpbWVVdGlscy5ydW50aW1lRGVzY3JpcHRvci5wMnBSZXF1ZXN0ZXJTdHViKSxyLnN0YXJ0aW5nVGltZT1yLmNyZWF0ZWQsZGVsZXRlIHIuYXV0aG9yaXNlLGRlbGV0ZSByLmNyZWF0ZWQsZGVsZXRlIHIubXV0dWFsLGRlbGV0ZSByLnJlc3VtZSxyLmV4cGlyZXN8fChyLmV4cGlyZXM9dC5leHBpcmVzVGltZSksci5kYXRhU2NoZW1lcz1hLHUmJihyLnAycEhhbmRsZXI9dSxyLnAycFJlcXVlc3Rlcj1jKSx0LmlzSW50ZXJ3b3JraW5nUHJvdG9TdHViKHIucmVwb3J0ZXIpJiYoci5pbnRlcndvcmtpbmc9ITApLHIuc3RhdHVzPSJsaXZlIjt2YXIgZj12b2lkIDA7ZS5yZXN1bWU/KFMubG9nKCJbUmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0XSByZWdpc3RlcmluZyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgZGF0YSBvYmplY3QgVVJMIixyKSxmPXt0eXBlOiJ1cGRhdGUiLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QucmVnaXN0cnlEb21haW4sZnJvbTp0LnJlZ2lzdHJ5VVJMLGJvZHk6e3Jlc291cmNlOnIudXJsLHZhbHVlOntzdGF0dXM6ImxpdmUifX19KTooUy5sb2coIltSZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3RdIHJlZ2lzdGVyaW5nIG5ldyBkYXRhIG9iamVjdCBVUkwiLHIpLGY9e3R5cGU6ImNyZWF0ZSIsZnJvbTp0LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QucmVnaXN0cnlEb21haW4sYm9keTp7dmFsdWU6cixwb2xpY3k6InBvbGljeSJ9fSksdC5kYXRhT2JqZWN0TGlzdFtyLnVybF09ZSwKLy8gc3RlcCB0byBvYnRhaW4gdGhlIGxpc3Qgb2YgYWxsIFVSTCByZWdpc3RlcmVkIHRvIHVwZGF0ZWQgd2l0aCB0aGUgbmV3IG9uZS4KdC5zdG9yYWdlTWFuYWdlci5zZXQoInJlZ2lzdHJ5OkRhdGFPYmplY3RVUkxzIiwwLHMpLnRoZW4oZnVuY3Rpb24oKXt0cnl7dC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZVdpdGhSZXRyaWVzKGYsdC5fcmVnaXN0cmF0aW9uUmV0cmllcyxmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdF0gPT09PiByZWdpc3RlckRhdGFPYmplY3QgUmVwbHk6ICcsIHJlcGx5KTsKMjAwPT09ZS5ib2R5LmNvZGU/bihyKTpvKCJlcnJvciBvbiByZWdpc3RlciBEYXRhT2JqZWN0Iil9KX1jYXRjaChlKXtTLmVycm9yKGUpLG8oZSl9Ci8vdGltZXIgdG8ga2VlcCB0aGUgcmVnaXN0cmF0aW9uIGFsaXZlCi8vIHRoZSB0aW1lIGlzIGRlZmluZWQgYnkgYSBsaXR0bGUgbGVzcyB0aGFuIGhhbGYgb2YgdGhlIGV4cGlyZXMgdGltZSBkZWZpbmVkCnNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGU9e3R5cGU6InVwZGF0ZSIsZnJvbTp0LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QucmVnaXN0cnlEb21haW4sYm9keTp7cmVzb3VyY2U6ci51cmwsdmFsdWU6e3N0YXR1czoibGl2ZSJ9LG1ldGhvZDoicmVmcmVzaCJ9fTt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUsZnVuY3Rpb24oZSl7fSl9LHIuZXhwaXJlcy8xLjEvMioxZTMpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcigiW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gRXJyb3I6ICIsZSksbyhlKX0pfSl9KX19LHtrZXk6Il9nZXRSZXNvdXJjZXNBbmRTY2hlbWVzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIpe3ZhciBuPXZvaWQgMDsKLy8gY2hlY2sgaWYgdGhlIGh5cGVydHkgcmVzb3VyY2VzIGlzIGEgdmVjdG9yIG9yIGEgc3RyaW5nCi8vIFRPRE8gZGVsZXRlIGxhdGVyIHdoZW4gY2F0YWxvZ3VlIGlzIGZpeGVkCiJzdHJpbmciPT10eXBlb2YgZS5oeXBlcnR5VHlwZT8obj1bXSxuLnB1c2goZS5oeXBlcnR5VHlwZSkpOm49ZS5oeXBlcnR5VHlwZTt2YXIgaT1lLm9iamVjdE5hbWUsbz1lLmRhdGFPYmplY3RzLHM9W107Ci8vdGhpcyB3aWxsIGNyZWF0ZSBhIGFycmF5IHdpdGggYSBQcm9taXNlIGluIGVhY2ggcG9zaXRpb24KZm9yKHZhciB1IGluIG8pcy5wdXNoKHQucnVudGltZUNhdGFsb2d1ZS5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihvW3VdKSk7Ci8vIGFzIHNvb24gYXMgdGhlIHByZXZpb3VzIGFycmF5IGlzIGNvbXBsZXRlZCwgdGhpcyB3aWxsIHdhaXQgZm9yIHRoZSByZXNvbHZlIG9mIGFsbCBwcm9taXNlcyBpbiB0aGUgYXJyYXkKYS5kZWZhdWx0LmFsbChzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgbyBpbiBlKXt2YXIgYT1lW29dO3QucHVzaChhLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzLnNjaGVtZS5jb25zdGFudCl9Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeV0gSHlwZXJ0eSBTY2hlbWFzJywgZmlsdGVyZWREYXRhU2NoZW1hcyk7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeV0gSHlwZXJ0eSByZXNvdXJjZXMnLCByZXNvdXJjZXMpOwpyKHtyZXNvdXJjZXM6bixkYXRhU2NoZW1hOnQsbmFtZTppfSl9KX0pfX0se2tleToiY2hlY2tSZWdpc3RlcmVkVVJMcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4pe3ZhciBvPWUucmVwb3J0ZXI/InJlZ2lzdHJ5OkRhdGFPYmplY3RVUkxzIjoicmVnaXN0cnk6SHlwZXJ0eVVSTHMiOyJzdHJpbmciPT10eXBlb2YgdCYmKG89dCYmImh5cGVydHkiIT09KDAsUi5kaXZpZGVVUkwpKHQpLnR5cGU/InJlZ2lzdHJ5OkRhdGFPYmplY3RVUkxzIjoicmVnaXN0cnk6SHlwZXJ0eVVSTHMiKSxyLnN0b3JhZ2VNYW5hZ2VyLmdldChvKS50aGVuKGZ1bmN0aW9uKGEpe2lmKGF8fChhPXt9KSwic3RyaW5nIj09dHlwZW9mIHQpe1MuaW5mbygiW1JlZ2lzdHJ5IC0gY2hlY2tSZWdpc3RlcmVkVVJMc10gLSBsb29rIGZvciAiK3QrIiBvbiAiLGEpO3ZhciBzPSgwLGkuZGVmYXVsdCkoYSkubWFwKGZ1bmN0aW9uKGUpe3ZhciByPWFbZV0uaW5kZXhPZih0KTtyZXR1cm4gYVtlXVtyXX0pO3JldHVybiBTLmluZm8oIltSZWdpc3RyeSAtIGNoZWNrUmVnaXN0ZXJlZFVSTHNdIC0gZm91bmQgIitzLmxlbmd0aCsiIHJlc3VsdHMgb24gIixzKSxuKDE9PT1zLmxlbmd0aD9zOnZvaWQgMCl9aWYoInJlZ2lzdHJ5Okh5cGVydHlVUkxzIiE9PW8pe3ZhciB1PWUubmFtZStlLnNjaGVtYStlLnJlc291cmNlcytlLnJlcG9ydGVyO3JldHVybiBuKGFbdV0/YVt1XTp2b2lkIDApfXIuX2dldFJlc291cmNlc0FuZFNjaGVtZXMoZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbihhW2UucmVzb3VyY2VzK2UuZGF0YVNjaGVtYStlLm5hbWVdP2FbZS5yZXNvdXJjZXMrZS5kYXRhU2NoZW1hK2UubmFtZV06dm9pZCAwKX0pfSl9KX19LHtrZXk6InJlZ2lzdGVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgcz10aGlzLHU9dm9pZCAwO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKGEsYyl7Ci8vYXNzdW1pbmcgZGVzY3JpcHRvciBjb21lIGluIHRoaXMgZm9ybWF0LCB0aGUgc2VydmljZS1wcm92aWRlci1kb21haW4gdXJsIGlzIHJldHJpZXZlZCBieSBhIHNwbGl0IGluc3RydWN0aW9uCi8vaHlwZXJ0eS1jYXRhbG9ndWU6Ly88c2VydmljZS1wcm92aWRlci1kb21haW4+LzxjYXRhbG9ndWUtb2JqZWN0LWlkZW50aWZpZXI+CnZhciBmPSgwLFIuZGl2aWRlVVJMKSh0KS5kb21haW47Zi5pbmNsdWRlcygiY2F0YWxvZ3VlIikmJihmPWYucmVwbGFjZSgiY2F0YWxvZ3VlLiIsIiIpKSxzLmlkTW9kdWxlLmdldElkZW50aXR5QXNzZXJ0aW9uKG8pLnRoZW4oZnVuY3Rpb24obyl7dmFyIGw9by51c2VyUHJvZmlsZSxkPWwudXNlclVSTDt2b2lkIDA9PT1zLl9tZXNzYWdlQnVzP2MoIltSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIE1lc3NhZ2VCdXMgaXMgdW5kZWZpbmVkIik6Ci8vY2FsbCBjaGVjayBpZiB0aGUgcHJvdG9zdHViIGV4aXN0OiB0byBiZSByZW1vdmVkCi8qICBfdGhpcy5yZXNvbHZlKGRvbWFpblVybCkudGhlbihmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gc3R1YiB0byBkb21haW4gcmVnaXN0cnktICcsIGEpOyovCnMuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZWdpc3RyeTpIeXBlcnR5VVJMcyIpLnRoZW4oZnVuY3Rpb24obyl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIHN0b3JhZ2VNYW5hZ2VyXSAtICcsIHVybHNMaXN0KTsKcy5fZ2V0UmVzb3VyY2VzQW5kU2NoZW1lcyhyKS50aGVuKGZ1bmN0aW9uKHkpe3U9eSxvfHwobz17fSksb1t1LnJlc291cmNlcyt1LmRhdGFTY2hlbWErdS5uYW1lXT1uLmFkZHJlc3Mscy5zdG9yYWdlTWFuYWdlci5zZXQoInJlZ2lzdHJ5Okh5cGVydHlVUkxzIiwwLG8pLnRoZW4oZnVuY3Rpb24oKXtzLnJlZ2lzdHJ5RG9tYWluPWYsCi8vY2hlY2sgd2hldGhlciB0aGUgcmVjZWl2ZWQgc2FuYm94IGUgQXBwbGljYXRpb25TYW5kYm94IG9yIGEgbm9ybWFsIHNhbmRib3gKImFwcCI9PT1lLnR5cGU/cy5zYW5kYm94ZXNMaXN0LmFwcFNhbmRib3hbbi5hZGRyZXNzWzBdXT1lOiJub3JtYWwiPT09ZS50eXBlP3Muc2FuZGJveGVzTGlzdC5zYW5kYm94W24uYWRkcmVzc1swXV09ZTpjKCJXcm9uZyBTYW5kYm94VHlwZSIpO3ZhciBvPXZvaWQgMCx5PXZvaWQgMDswIT09KDAsaS5kZWZhdWx0KShzLnAycEhhbmRsZXJTdHViKS5sZW5ndGgmJihvPXMucDJwSGFuZGxlclN0dWJbcy5ydW50aW1lVVJMXS51cmwseT1wLnJ1bnRpbWVVdGlscy5ydW50aW1lRGVzY3JpcHRvci5wMnBSZXF1ZXN0ZXJTdHViKTt2YXIgaD1zLnJ1bnRpbWVVUkwsdj1uZXcgYi5kZWZhdWx0KHMuaWRlbnRpZmllcixzLnJlZ2lzdHJ5VVJMLHQscixuLmFkZHJlc3NbMF0sbCwiZ3VpZCIscy5ydW50aW1lVVJMLCJjdHgiLG8seSx1LmRhdGFTY2hlbWEsdS5yZXNvdXJjZXMpO3MuaHlwZXJ0aWVzTGlzdC5wdXNoKHYpOwovL21lc3NhZ2UgdG8gcmVnaXN0ZXIgdGhlIG5ldyBoeXBlcnR5LCB3aXRoaW4gdGhlIGRvbWFpbiByZWdpc3RyeQp2YXIgZz12b2lkIDAsbT12b2lkIDAsXz1zLmV4cGlyZXNUaW1lOwovLyBzZXQgYSBkaWZmZXJlbnQgZXhwaXJlcyB2YWx1ZSBpZiBjb25maWd1cmVkIGluIHRoZSBIeXBlcnR5IGRlc2NyaXB0b3IKci5jb25maWd1cmF0aW9uJiZyLmNvbmZpZ3VyYXRpb24uZXhwaXJlcyYmKF89ci5jb25maWd1cmF0aW9uLmV4cGlyZXMpLG4ubmV3QWRkcmVzcz8oCi8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIHJlZ2lzdGVyaW5nIG5ldyBIeXBlcnR5IFVSTCcsIGFkZHJlc3NVUkwuYWRkcmVzc1swXSk7Cmc9e3VzZXI6ZCxkZXNjcmlwdG9yOnQsdXJsOm4uYWRkcmVzc1swXSxleHBpcmVzOl8scmVzb3VyY2VzOnUucmVzb3VyY2VzLGRhdGFTY2hlbWVzOnUuZGF0YVNjaGVtYSxydW50aW1lOmgsc3RhdHVzOiJsaXZlIn0sCi8vIHNldCBhIGRpZmZlcmVudCBleHBpcmVzIGlmIGRlZmluZWQgaW4gdGhlIGh5cGVydHkgY29uZmlndXJhdGlvbgpvJiYoZy5wMnBIYW5kbGVyPW8sZy5wMnBSZXF1ZXN0ZXI9eSksCi8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIHJlZ2lzdGVyaW5nIG5ldyBIeXBlcnR5IGF0IGRvbWFpbiByZWdpc3RyeSAnLCBtZXNzYWdlVmFsdWUpOwptPXt0eXBlOiJjcmVhdGUiLGZyb206cy5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIitzLnJlZ2lzdHJ5RG9tYWluLGJvZHk6e3ZhbHVlOmcscG9saWN5OiJwb2xpY3kifX0pOigKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gcmVnaXN0ZXJpbmcgcHJldmlvdXNseSByZWdpc3RlcmVkIEh5cGVydHkgVVJMJywgYWRkcmVzc1VSTC5hZGRyZXNzWzBdKTsKbT17dHlwZToidXBkYXRlIix0bzoiZG9tYWluOi8vcmVnaXN0cnkuIitzLnJlZ2lzdHJ5RG9tYWluLGZyb206cy5yZWdpc3RyeVVSTCxib2R5OntyZXNvdXJjZTpuLmFkZHJlc3NbMF0sdmFsdWU6e3N0YXR1czoibGl2ZSIsdXNlcjpkfX19LG8mJihtLmJvZHkudmFsdWUucDJwSGFuZGxlcj1vLG0uYm9keS52YWx1ZS5wMnBSZXF1ZXN0ZXI9eSkpOwovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBIeXBlcnR5IHJlZ2lzdHJhdGlvbiBhdCBkb21haW4gcmVnaXN0cnkgIC0gJywgbWVzc2FnZSk7CnRyeXtzLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXMobSxzLnJlZ2lzdHJhdGlvblJldHJpZXMsZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIEh5cGVydHkgcmVnaXN0cmF0aW9uIHJlc3BvbnNlOiAnLCByZXBseSk7CmlmKDIwMD09PWUuYm9keS5jb2RlKXt2YXIgcj17dXJsOm4uYWRkcmVzc1swXX07byYmKHIucDJwSGFuZGxlcj1vLHIucDJwUmVxdWVzdGVyPXkpLGEocil9ZWxzZXtpZig0MDQhPT1lLmJvZHkuY29kZSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byByZWdpc3RlciBhbiBIeXBlcnR5OiAiLGUpOwovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBUaGUgdXBkYXRlIHdhcyBub3QgcG9zc2libGUuIFJlZ2lzdGVyaW5nIG5ldyBIeXBlcnR5IGF0IGRvbWFpbiByZWdpc3RyeScpOwpnPXt1c2VyOmQsZGVzY3JpcHRvcjp0LHVybDpuLmFkZHJlc3NbMF0sZXhwaXJlczpfLHJlc291cmNlczp1LnJlc291cmNlcyxkYXRhU2NoZW1lczp1LmRhdGFTY2hlbWEscnVudGltZTpoLHN0YXR1czoibGl2ZSJ9LG8mJihnLnAycEhhbmRsZXI9byxnLnAycFJlcXVlc3Rlcj15KSxtPXt0eXBlOiJjcmVhdGUiLGZyb206cy5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIitzLnJlZ2lzdHJ5RG9tYWluLGJvZHk6e3ZhbHVlOmcscG9saWN5OiJwb2xpY3kifX07dHJ5e3MuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllcyhtLHMucmVnaXN0cmF0aW9uUmV0cmllcyxmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gSHlwZXJ0eSByZWdpc3RyYXRpb24gdXBkYXRlIHJlc3BvbnNlOiAnLCByZXBseSk7CmlmKDIwMCE9PWUuYm9keS5jb2RlKXRocm93IG5ldyBFcnJvcigiRmFpbGVkIHRvIHJlZ2lzdGVyIGFuIEh5cGVydHk6ICIrZSk7dmFyIHQ9e3VybDpuLmFkZHJlc3NbMF19O28mJih0LnAycEhhbmRsZXI9byx0LnAycFJlcXVlc3Rlcj15KSxhKHQpfSl9Y2F0Y2goZSl7Uy5lcnJvcihlKSxjKGUpfX19KX1jYXRjaChlKXtTLmVycm9yKGUpLGMoZSl9Ci8vdGltZXIgdG8ga2VlcCB0aGUgcmVnaXN0cmF0aW9uIGFsaXZlCi8vIHRoZSB0aW1lIGlzIGRlZmluZWQgYnkgYSBsaXR0bGUgbGVzcyB0aGFuIGhhbGYgb2YgdGhlIGV4cGlyZXMgdGltZSBkZWZpbmVkCnNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGU9e3R5cGU6InVwZGF0ZSIsZnJvbTpzLnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3MucmVnaXN0cnlEb21haW4sYm9keTp7cmVzb3VyY2U6bi5hZGRyZXNzWzBdLHZhbHVlOntzdGF0dXM6ImxpdmUifSxtZXRob2Q6InJlZnJlc2gifX07cy5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShlLGZ1bmN0aW9uKGUpe30pfSxfLzEuMS8yKjFlMyl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gRXJyb3I6ICcsIHJlYXNvbik7CmMoZSl9KX0pfSl9LGZ1bmN0aW9uKGUpe2MoIltSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldICIsZSl9KX0pfX0se2tleToidW5yZWdpc3Rlckh5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT0hMSxvPTA7Zm9yKG89MDtvPHQuaHlwZXJ0aWVzTGlzdC5sZW5ndGg7bysrKXt2YXIgYT10Lmh5cGVydGllc0xpc3Rbb107aWYodm9pZCAwIT09YSYmYS5oeXBlcnR5VVJMPT09ZSl7aT0hMDticmVha319ITE9PT1pP24oIkh5cGVydHkgbm90IGZvdW5kIik6KGRlbGV0ZSB0Lmh5cGVydGllc0xpc3Rbb10scigiSHlwZXJ0eSBzdWNjZXNzZnVsbHkgZGVsZXRlZCIpKX0pfX0se2tleToiZGlzY292ZXJQcm90b3N0dWIiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigiUGFyYW1ldGVyIHVybCBuZWVkZWQiKTt2YXIgdD10aGlzLHI9KDAsUi5kaXZpZGVVUkwpKGUpLG49ci5kb21haW47aWYodC5wcm90b3N0dWJzTGlzdC5oYXNPd25Qcm9wZXJ0eShuKSYmdC5wcm90b3N0dWJzTGlzdFtuXS5zdGF0dXM9PT1PLkxJVkUpcmV0dXJuIHQucHJvdG9zdHVic0xpc3Rbbl07dGhyb3cgdC5wcm90b3N0dWJzTGlzdFtuXT17c3RhdHVzOk8uREVQTE9ZSU5HfSxuZXcgRXJyb3IoIltSZWdpc3RyeSAtIGRpc2NvdmVyUHJvdG9TdHViIF0gTWVzc2FnZSBOb2RlIFByb3Rvc3R1YiBOb3QgRm91bmQuIENyZWF0aW5nIG9uZSIpfX0se2tleToiZGlzY292ZXJQMlBTdHViIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGUpe2lmKHQucDJwUmVxdWVzdGVyU3R1Yi5oYXNPd25Qcm9wZXJ0eShlKSYmdC5wMnBSZXF1ZXN0ZXJTdHViW2VdLnN0YXR1cz09PU8uTElWRSlyZXR1cm4gdC5wMnBSZXF1ZXN0ZXJTdHViW2VdO3Rocm93IHQucDJwUmVxdWVzdGVyU3R1YltlXT17c3RhdHVzOk8uQ1JFQVRFRH0sbmV3IEVycm9yKCJbUmVnaXN0cnkgLSBkaXNjb3ZlclAyUFN0dWIgXSBQMlAgUmVxdWVzdGVyIFN0dWIgTm90IEZvdW5kLiBDcmVhdGluZyBvbmUiKX1pZih0LnAycEhhbmRsZXJTdHViLmhhc093blByb3BlcnR5KHQucnVudGltZVVSTCkpcmV0dXJuIHQucDJwSGFuZGxlclN0dWJbdC5ydW50aW1lVVJMXTt0aHJvdyB0LnAycEhhbmRsZXJTdHViW3QucnVudGltZVVSTF09e3N0YXR1czpPLkNSRUFURUR9LG5ldyBFcnJvcigiW1JlZ2lzdHJ5IC0gZGlzY292ZXJQMlBTdHViIF0gUDJQIEhhbmRsZXIgU3R1YiBOb3QgRm91bmQuIil9fSx7a2V5OiJyZWdpc3RlclN0dWIiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89dGhpcyxzPWk7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24oaSxhKXt2YXIgdT12b2lkIDA7Ci8vY2hlY2sgaWYgbWVzc2FnZUJ1cyBpcyByZWdpc3RlcmVkIGluIHJlZ2lzdHJ5IG9yIG5vdAp2b2lkIDA9PT1vLl9tZXNzYWdlQnVzJiZhKCJNZXNzYWdlQnVzIG5vdCBmb3VuZCBvbiByZWdpc3RlclN0dWIiKSxTLmluZm8oIltSZWdpc3RyeSAtIHJlZ2lzdGVyU3R1Yl0gLSBzdHViSUQgIix0KTsvKiBpZiAoIXN0dWJJRC5pbmRleE9mKCdtc2ctbm9kZS4nKSkgewogICAgICAgICAgc3R1YklEID0gc3R1YklELnN1YnN0cmluZyhzdHViSUQuaW5kZXhPZignLicpICsgMSk7CiAgICAgICAgfSovCnZhciBjPXZvaWQgMDtpZihyKWlmKHIuaGFzT3duUHJvcGVydHkoImlzSGFuZGxlclN0dWIiKSYmci5pc0hhbmRsZXJTdHViKXU9by5wMnBIYW5kbGVyVVJMLG8ucDJwSGFuZGxlclN0dWJbdF09e3VybDp1LHN0YXR1czpPLkNSRUFURUR9LG8ucDJwSGFuZGxlckFzc29jaWF0aW9uW28ucnVudGltZVVSTF09W10sby5zYW5kYm94ZXNMaXN0LnNhbmRib3hbdV09ZSxTLmluZm8oIltSZWdpc3RyeSAtIHJlZ2lzdGVyU3R1YiAtIFAyUEhhbmRsZXJTdHViXSAtICIsdCwiIC0gIix1KSxpKG8ucDJwSGFuZGxlclN0dWJbdF0pO2Vsc2V7Yz1yLnAycFJlcXVlc3RlclN0dWIsdT0icnVudGltZTovLyIrKDAsUi5kaXZpZGVVUkwpKHIucmVtb3RlUnVudGltZVVSTCkuZG9tYWluKyIvcDJwcmVxdWVzdGVyLyIrKDAsUi5nZW5lcmF0ZUdVSUQpKCksUy5pbmZvKCJbUmVnaXN0cnkgLSByZWdpc3RlclN0dWIgLSBQMlBSZXF1ZXN0ZXJTdHViXSAtICIsYywiIC0gIix1KSwKLy8gdG8gYmUgY2xhcmlmaWVkIHdoYXQgaXMgdGhpcyBwMnBIYW5kbGVyQXNzb2NpYXRpb24Kby5wMnBIYW5kbGVyQXNzb2NpYXRpb25bby5ydW50aW1lVVJMXS5wdXNoKHUpLG8ucDJwUmVxdWVzdGVyU3R1Ylt0XT17dXJsOnUsc3RhdHVzOk8uQ1JFQVRFRH0sby5zYW5kYm94ZXNMaXN0LnNhbmRib3hbdV09ZTsKLy9TZXR1cCBQMlAgUmVxdWVzdGVyIHBhdGggaW50byBNTgp2YXIgZj17dHlwZToic3Vic2NyaWJlIixmcm9tOm8ucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrby5fZG9tYWluKyIvc20iLGJvZHk6e3N1YnNjcmliZTpbdV0sc291cmNlOm8ucmVnaXN0cnlVUkx9fTtvLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGYsZnVuY3Rpb24oZSl7fSksaShvLnAycFJlcXVlc3RlclN0dWJbdF0pfWVsc2UgdT0icnVudGltZTovLyIrdCsiL3Byb3Rvc3R1Yi8iKygwLFIuZ2VuZXJhdGVHVUlEKSgpLFMuaW5mbygiW1JlZ2lzdHJ5IC0gcmVnaXN0ZXJTdHViIC0gTm9ybWFsIFN0dWJdIC0gIix0KSwKLy8gVE9ETzogT3B0aW1pemUgdGhpcwpvLnByb3Rvc3R1YnNMaXN0W3RdPXt1cmw6dSxzdGF0dXM6Ty5ERVBMT1lJTkd9LG4mJihvLnByb3Rvc3R1YnNMaXN0W3RdLmRlc2NyaXB0b3JVUkw9bikscyYmcy5pbnRlcndvcmtpbmcmJihvLnByb3Rvc3R1YnNMaXN0W3RdLmludGVyd29ya2luZz1zLmludGVyd29ya2luZyksby5zYW5kYm94ZXNMaXN0LnNhbmRib3hbdV09ZSxpKG8ucHJvdG9zdHVic0xpc3RbdF0pOwovLyByZXNvbHZlKHJ1bnRpbWVQcm90b1N0dWJVUkwpOwpvLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHUrIi9zdGF0dXMiLGZ1bmN0aW9uKGUpe28uX29uUHJvdG9zdHViU3RhdHVzRXZlbnQoZSl9KX0pfX0se2tleToiX29uUHJvdG9zdHViU3RhdHVzRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb207aWYoIWUudG8uaW5jbHVkZXMoIi9zdGF0dXMiKSlyZXR1cm4gdm9pZCBTLmVycm9yKCJbUmVnaXN0cnkgb25Qcm90b3N0dWJTdGF0dXNFdmVudF0gTm90IFN0YXR1cyBFdmVudDogIixlKTsKLy8gcHJvY2VzcyBzdGF0dXMgZXZlbnRzIGZyb20gbWVzc2FnZSBub2RlIHByb3Rvc3R1YnMKaWYoci5pbmNsdWRlcygiL3Byb3Rvc3R1Yi8iKSkKLy8gVE9ETzogdW5jb21tZW50IGJlbG93IHdoZW4gcHJvdG9zdHVicyBhcmUgdXBkYXRlZCB3aXRoIG5ldyBzdGF0dXMgdmFsdWUgImxpdmUiCigwLGkuZGVmYXVsdCkodC5wcm90b3N0dWJzTGlzdCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb3Rvc3R1YnNMaXN0W2VdLnVybD09PXJ9KS5tYXAoZnVuY3Rpb24ocil7dC5wcm90b3N0dWJzTGlzdFtyXS5zdGF0dXM9ZS5ib2R5LnZhbHVlfSk7ZWxzZQovLyBwcm9jZXNzIHN0YXR1cyBldmVudHMgZnJvbSBwMnAgY29ubmVjdGlvbnMKaWYoZS5ib2R5LnJlc291cmNlKXt2YXIgbj1lLmJvZHkucmVzb3VyY2U7aWYodC5wMnBDb25uZWN0aW9uTGlzdFtuXSl0LnAycENvbm5lY3Rpb25MaXN0W25dLnN0YXR1cz1lLmJvZHkudmFsdWUsdC5wMnBDb25uZWN0aW9uTGlzdFtuXS51cmw9cjtlbHNle3ZhciBvPXtzdGF0dXM6ZS5ib2R5LnZhbHVlLHVybDpyfTt0LnAycENvbm5lY3Rpb25MaXN0W25dPW99Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIG9uUHJvdG9zdHViU3RhdHVzRXZlbnRdIC0gUDJQQ29ubmVjdGlvbiBzdGF0dXM6ICcsIF90aGlzLnAycENvbm5lY3Rpb25MaXN0W3JlbW90ZVJ1bnRpbWVVUkxdKTsKLy8gVXBkYXRlIFAyUCBSZXF1ZXN0ZXIgcHJvdG9zdHViIGlmIGl0IGlzIGNvbWluZyBmcm9tIHRoZXJlCnIuaW5jbHVkZXMoIi9wMnByZXF1ZXN0ZXIvIik/dC5wMnBSZXF1ZXN0ZXJTdHViW25dLnN0YXR1cz1lLmJvZHkudmFsdWU6Ci8vIGlmIGZyb20gUDJQSGFuZGxlciB3aXRoIHN0YXR1cyBkaXNjb25lbmN0ZWQsIGxldHMgcmVtb3ZlIGZyb20gcDJwQ29ubmVjdGlvbkxpc3QKImRpc2Nvbm5lY3RlZCI9PT1lLmJvZHkudmFsdWUmJmRlbGV0ZSB0LnAycENvbm5lY3Rpb25MaXN0W25dfWVsc2V7aWYoci5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKSkKLy8gSXQgaXMgYW4gZXZlbnQgZnJvbSBQMlAgUmVxdWVzdGVyIHdpdGhvdXQgbWFuZGF0b3J5ICJyZXNvdXJjZSIgZmllbGQKcmV0dXJuIHZvaWQgUy5lcnJvcigiW1JlZ2lzdHJ5IG9uUHJvdG9zdHViU3RhdHVzRXZlbnRdIHJlc291cmNlIG1pc3Npbmc6ICIsZSk7Ci8vIEl0IGlzIGFuIGV2ZW50IGZyb20gUDJQIEhhbmRsZXIKdC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdLnN0YXR1cz1lLmJvZHkudmFsdWV9fX0se2tleToidW5yZWdpc3RlclN0dWIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnByb3Rvc3R1YnNMaXN0Lmhhc093blByb3BlcnR5KGUpPyhkZWxldGUgdC5wcm90b3N0dWJzTGlzdFtlXSxyKCJQcm90b3N0dWJVUkwgcmVtb3ZlZCIpKTpuKCJFcnJvciBvbiB1bnJlZ2lzdGVyU3R1YjogSHlwZXJ0eSBub3QgZm91bmQiKX0pfX0se2tleToicmVnaXN0ZXJJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89dm9pZCAwOwovL2NoZWNrIGlmIG1lc3NhZ2VCdXMgaXMgcmVnaXN0ZXJlZCBpbiByZWdpc3RyeSBvciBub3QKdm9pZCAwPT09ci5fbWVzc2FnZUJ1cyYmaSgiTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gcmVnaXN0ZXJTdHViIiksbz0iZG9tYWluLWlkcDovLyIrdCsiL3N0dWIvIisoMCxSLmdlbmVyYXRlR1VJRCkoKSwKLy8gVE9ETzogT3B0aW1pemUgdGhpcwpyLmlkcFByb3h5TGlzdFt0XT17dXJsOm8sc3RhdHVzOk8uREVQTE9ZSU5HfSxyLnNhbmRib3hlc0xpc3Quc2FuZGJveFtvXT1lLAovLyBzYW5kYm94LmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24obXNnKSB7Ci8vICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKLy8gfSk7Cm4obyksci5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihvKyIvc3RhdHVzIixmdW5jdGlvbihlKXtyLl9vbklkcFByb3h5U3RhdHVzRXZlbnQoZSl9KX0pfX0se2tleToiX29uSWRwUHJveHlTdGF0dXNFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbTtpZighZS50by5pbmNsdWRlcygiL3N0YXR1cyIpKXJldHVybiB2b2lkIFMuZXJyb3IoIltSZWdpc3RyeSBvbklkcFByb3h5U3RhdHVzRXZlbnRdIE5vdCBTdGF0dXMgRXZlbnQ6ICIsZSk7KDAsaS5kZWZhdWx0KSh0LmlkcFByb3h5TGlzdCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0LmlkcFByb3h5TGlzdFtlXS51cmw9PT1yfSkubWFwKGZ1bmN0aW9uKHIpe3QuaWRwUHJveHlMaXN0W3JdLnN0YXR1cz1lLmJvZHkudmFsdWV9KX19LHtrZXk6ImRpc2NvdmVySWRwUHJveHkiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigiUGFyYW1ldGVyIHVybCBuZWVkZWQiKTt2YXIgdD10aGlzLHI9KDAsUi5kaXZpZGVVUkwpKGUpLG49ci5kb21haW47aWYodC5pZHBQcm94eUxpc3QuaGFzT3duUHJvcGVydHkobikmJnQuaWRwUHJveHlMaXN0W25dLnN0YXR1cz09PU8uTElWRSlyZXR1cm4gdC5pZHBQcm94eUxpc3Rbbl07dGhyb3cgdC5pZHBQcm94eUxpc3Rbbl09e3N0YXR1czpPLlBST0dSRVNTfSxuZXcgRXJyb3IoIltSZWdpc3RyeSAtIGRpc2NvdmVySWRwUHJveHkgXSBJZHAgUHJveHkgTm90IEZvdW5kLiBDcmVhdGluZyBvbmUiKX19LHtrZXk6InJlZ2lzdGVyUEVQIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obil7Ci8vVE9ETyBjaGVjayB3aGF0IHBhcmFtZXRlciBpbiB0aGUgcG9zdE1lc3NhZ2UgdGhlIHBlcCBpcy4Kci5wZXBMaXN0W3RdPWUsbigiUEVQIHJlZ2lzdGVyZWQgd2l0aCBzdWNjZXNzIil9KX19LHtrZXk6InVucmVnaXN0ZXJQRVAiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2b2lkIDA9PT10LnBlcExpc3RbZV0/bigiUGVwIE5vdCBmb3VuZC4iKTpyKCJQRVAgc3VjY2Vzc2Z1bGx5IHJlbW92ZWQuIil9KX19LHtrZXk6ImdldFNhbmRib3giLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQYXJhbWV0ZXIgdXJsIG5lZWRlZCIpOwovLyBsb2cubG9nKCdbUmVnaXN0cnkgZ2V0U2FuZGJveF0gZ2V0U2FuZGJveCBmb3I6ICcsIHVybCwgJyBhbmQgY2FwYWJpbGl0aWVzOiAnLCBjb25zdHJhaW50cyk7CnZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgYT12b2lkIDA7Ci8vaWYgbm8gYXBwU2FuZGJveCB3YXMgZm91bmQsIHRyeSB0byBzZWFyY2ggaW4gdGhlIG5vcm1hbCBzYW5kYm94ZXMgbGlzdAppZighKAovL2ZpcnN0IHRyeSB0byBmaW5kIHRoZSB1cmwgaW4gdGhlIGFwcFNhbmRib3ggbGlzdAphPXIuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W2VdKSYmIShhPXIuc2FuZGJveGVzTGlzdC5zYW5kYm94W2VdKSl7dmFyIHM9dm9pZCAwO3M9ZS5pbmNsdWRlcygiOi8vIik/KDAsUi5kaXZpZGVVUkwpKGUpLmRvbWFpbjplOwovLyBzZWFyY2ggaW4gdGhlIHNhbmRib3hlcyBsaXN0IGZvciBhIGVudHJ5IGNvbnRhaW5pbmcgdGhlIGRvbWFpbiBnaXZlbgpmb3IodmFyIHUgaW4gci5zYW5kYm94ZXNMaXN0LnNhbmRib3gpCi8vdG9kbzogdW5jb21tZW50IHNhbmRib3ggY29uc3RyYWludHMgbWF0Y2ggY29uZGl0aW9uIHdpdGggcnVudGltZSBzaGFyaW5nCmlmKHUuaW5jbHVkZXMocykmJnIuc2FuZGJveGVzTGlzdC5zYW5kYm94W3VdLm1hdGNoZXModCkpe3ZhciBjPWZ1bmN0aW9uKCl7dmFyIGU9ci5zYW5kYm94ZXNMaXN0LnNhbmRib3hbdV07cmV0dXJuKDAsaS5kZWZhdWx0KSh0KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuImJyb3dzZXIiPT09dCYmZS50eXBlPT09eS5TYW5kYm94VHlwZS5OT1JNQUx8fCJ3aW5kb3dTYW5ib3giPT09dCYmZS50eXBlPT09eS5TYW5kYm94VHlwZS5XSU5ET1d9KS5sZW5ndGg+MCYmKGE9ZSksImJyZWFrIn0oKTtpZigiYnJlYWsiPT09YylicmVha319YT9uKGEpOm8oIm5vIHNhbmRib3ggZm91bmQgZm9yOiAiK2UpfSl9fSx7a2V5OiJyZXNvbHZlTm9ybWFsU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ3Jlc29sdmVOb3JtYWxTdHViICcgKyB1cmwpOwp2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Ci8vc3BsaXQgdGhlIHVybCB0byBmaW5kIHRoZSBkb21haW5VUkwuIGRlYWxzIHdpdGggdGhlIHVybCBmb3IgZXhhbXBsZSBhczoKLy8iaHlwZXJ0eS1ydW50aW1lOi8vc3AxL3Byb3Rvc3R1Yi8xMjMiLAp2YXIgaT0oMCxSLmRpdmlkZVVSTCkoZSksbz1pLmRvbWFpbixhPWkudHlwZTtlLmluY2x1ZGVzKHQucnVudGltZVVSTCkmJihTLmVycm9yKCJbUmVnaXN0cnkgLSByZXNvbHZlXSBVUkwgdG8gYmUgcmVzb2x2ZWQgc2hvdWxkIGhhdmUgbGlzdGVuZXJzICIsZSksbigiW1JlZ2lzdHJ5IC0gcmVzb2x2ZV0gVVJMIHRvIGJlIHJlc29sdmVkIHNob3VsZCBoYXZlIGxpc3RlbmVycyAiLGUpKSwKLy8gcmVzb2x2ZSB0aGUgZG9tYWluIHByb3Rvc3R1YiBpbiBjYXNlIG9mIGEgbWVzc2FnZSB0byBnbG9iYWwgcmVnaXN0cnkKZS5pbmNsdWRlcygiZ2xvYmFsOi8vcmVnaXN0cnkiKT9vPXQuX2RvbWFpbjpvLmluZGV4T2YoIm1zZy1ub2RlLiIpJiZvLmluZGV4T2YoInJlZ2lzdHJ5LiIpfHwobz1vLnN1YnN0cmluZyhvLmluZGV4T2YoIi4iKSsxKSksdC5pc0xlZ2FjeShlKS50aGVuKGZ1bmN0aW9uKGkpewovLyBpZiBsZWdhY3kgaXQgc2hvdWxkIHJlc29sdmUgZm9yIDxwcm90b2NvbD4uPGRvbWFpbj4KaSYmImRvbWFpbi1pZHAiIT09YSYmKG89YSsiLiIrKDAsUi5nZXRVc2VySWRlbnRpdHlEb21haW4pKGUpKSxTLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlXSBkb21haW5Vcmw6IixvKTt2YXIgcz12b2lkIDA7cz0iZG9tYWluLWlkcCI9PT1hPyEhdC5pZHBQcm94eUxpc3QuaGFzT3duUHJvcGVydHkobykmJnQuaWRwUHJveHlMaXN0W29dOiEhdC5wcm90b3N0dWJzTGlzdC5oYXNPd25Qcm9wZXJ0eShvKSYmdC5wcm90b3N0dWJzTGlzdFtvXSxTLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlXSByZWdpc3RyZWQ6IixzKSwKLy8gVE9ETyBzaW5jZSB0aGUgcHJvdG9zdHVicyBoYXZlIG90aGVyIHN0YXRlcyB0aGlzIHNob3VsZCBiZSByZXZpc2VkLCBiZWNhdXNlIHRoZSBzdGF0dXMgY291bGQgY2hhbmdlIGZyb20gREVQTE9ZRUQgdG8gTElWRQovLyBUT0RPIGFuZCB0aGlzIHZhbGlkYXRpb24gd2lsbCB0cmlnZ2VyIGEgbmV3IGxvYWQgb2YgSURQUHJveHkgb3IgUHJvdG9zdHViOwpzJiZzLmhhc093blByb3BlcnR5KCJzdGF0dXMiKSYmKHMuc3RhdHVzPT09Ty5ERVBMT1lFRHx8cy5zdGF0dXM9PT1PLkNSRUFURUR8fHMuc3RhdHVzPT09Ty5MSVZFfHxzLnN0YXR1cz09PU8uRElTQ09OTkVDVEVEKT8oUy5pbmZvKCJbUmVnaXN0cnkucmVzb2x2ZV0gUmVzb2x2ZWQ6ICIscy51cmwscy5zdGF0dXMpLHIocy51cmwpKToKLy90b2RvOiB1c2Ugc3dpdGNoLWNhc2UgdG8gc3VwcG9ydCBvdGhlciB0eXBlcyBvZiBzdHVicwoiZG9tYWluLWlkcCI9PT1hPygKLy8gVGhlIElkUCBQcm94eSBkb2VzIG5vdCBleGlzdCwgbGV0J3MgcHJlcGFyZSBpdHMgZGVwbG95bWVudCBieSB3YXRjaGluZyBpdHMgc3RhdHVzCnQud2F0Y2hpbmdZb3Uub2JzZXJ2ZSgiaWRwUHJveHlMaXN0IixmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IC0gcmVzb2x2ZU5vcm1hbFN0dWJdIGlkcFByb3h5TGlzdCBjaGFuZ2VkICcgKyBfdGhpcy5pZHBQcm94eUxpc3QpOwp2YXIgbj1lLmtleXBhdGg7bi5pbmNsdWRlcygic3RhdHVzIikmJihuPW4ucmVwbGFjZSgiLnN0YXR1cyIsIiIpKSxuPT09byYmInN0YXR1cyI9PT1lLm5hbWUmJmUubmV3VmFsdWU9PT1PLkNSRUFURUQmJgovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlTm9ybWFsU3R1Yl0gaWRwUHJveHlMaXN0IGlzIGxpdmUgJyArIF90aGlzLmlkcFByb3h5TGlzdFtkb21haW5VcmxdKTsKcih0LmlkcFByb3h5TGlzdFtvXS51cmwpfSksc3x8KAovLyB0aGlzIHByb2Nlc3Mgd2lsbCBsb2FkIHRoZSBpZHAgcHJveHksIGJlY2F1c2UgaXMgbm90IHlldCByZWdpc3RlcmVkOwpTLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlTm9ybWFsU3R1Yl0gZGVwbG95IG5ldyBJRFBQcm94eTogIixvKSx0LmxvYWRlci5sb2FkSWRwUHJveHkobykudGhlbihmdW5jdGlvbigpe1MuaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVOb3JtYWxTdHViXSBJZFAgUHJveHkgZGVwbG95ZWQ6ICIsdC5pZHBQcm94eUxpc3Rbb10pfSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcigiW1JlZ2lzdHJ5LnJlc29sdmVdIEVycm9yIHJlc29sdmluZyBMb2FkIElEUFByb3h5OiAiLGUpLHQuaWRwUHJveHlMaXN0W29dLnN0YXR1cz0iZGVwbG95bWVudC1mYWlsZWQiLG4oZSl9KSkpOigKLy8gVGhlIHByb3RvU3R1YiBkb2VzIG5vdCBleGlzdCwgbGV0J3MgcHJlcGFyZSBpdHMgZGVwbG95bWVudCBieSB3YXRjaGluZyBpdHMgc3RhdHVzCnQud2F0Y2hpbmdZb3Uub2JzZXJ2ZSgicHJvdG9zdHVic0xpc3QiLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlTm9ybWFsU3R1Yl0gcHJvdG9zdHVic0xpc3QgY2hhbmdlZCAnICsgX3RoaXMucHJvdG9zdHVic0xpc3QpOwp2YXIgbj1lLmtleXBhdGg7bi5pbmNsdWRlcygic3RhdHVzIikmJihuPW4ucmVwbGFjZSgiLnN0YXR1cyIsIiIpKSxuPT09byYmInN0YXR1cyI9PT1lLm5hbWUmJmUubmV3VmFsdWU9PT1PLkNSRUFURUQmJgovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlXSBwcm90b3N0dWIgaXMgbGl2ZSAnICsgX3RoaXMucHJvdG9zdHVic0xpc3RbZG9tYWluVXJsXSk7CnIodC5wcm90b3N0dWJzTGlzdFtvXS51cmwpfSksc3x8KAovLyBsZXRzIGRlcGxveSB0aGUgcHJvdG9zdHViClMuaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVdIHRyaWdnZXIgbmV3IFByb3RvY29sU3R1YjogIixvKSx0LmxvYWRlci5sb2FkU3R1YihvKS50aGVuKGZ1bmN0aW9uKCl7fSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcigiW1JlZ2lzdHJ5LnJlc29sdmVOb3JtYWxTdHViXSBFcnJvciByZXNvbHZpbmcgTG9hZCBQcm90b2NvbFN0dWI6ICIsZSksbihlKX0pKSl9KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJbUmVnaXN0cnkucmVzb2x2ZV0gRXJyb3IgcmVzb2x2aW5nIGlzbGVnYWN5OiAiLGUpLG4oZSl9KX0pfX0se2tleToicmVzb2x2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7Uy5pbmZvKCJbUmVnaXN0cnkgLSBSZXNvbHZlXSAtICAiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT1lLnRvP2UudG86ZSxvPSEoIWUuYm9keXx8IWUuYm9keS5wMnApJiZlLmJvZHkucDJwOwovLyBsb2cubG9nKCdQMlA6ICcsIHAycCwgdXJsKTsKLy8gbG9nLmxvZygnUDJQIC0gcDJwSGFuZGxlclN0dWI6ICcsICFfdGhpcy5wMnBIYW5kbGVyU3R1YltfdGhpcy5ydW50aW1lVVJMXSwgX3RoaXMucDJwSGFuZGxlclN0dWIsIF90aGlzLnJ1bnRpbWVVUkwpOwovLyBsb2cubG9nKCdQMlAgLSBpc0JhY2tlbmRTZXJ2aWNlVVJMOiAnLCBpc0JhY2tlbmRTZXJ2aWNlVVJMKHVybCksIGlzQmFja2VuZFNlcnZpY2VVUkwsIHVybCk7Ci8vIGxvZy5sb2coJ1AyUCAtIGluY2x1ZGVzIHJ1bnRpbWVVUkw6ICcsIHVybC5pbmNsdWRlcyhfdGhpcy5ydW50aW1lVVJMKSk7Ci8vIGxvZy5sb2coJ1AyUCAtIGluY2x1ZGVzIHAycGhhbmRsZXI6ICcsIHVybC5pbmNsdWRlcygnL3AycGhhbmRsZXIvJykpOwovLyBsb2cubG9nKCdQMlAgLSBpbmNsdWRlcyBwMnByZXF1ZXN0ZXI6ICcsIHVybC5pbmNsdWRlcygnL3AycHJlcXVlc3Rlci8nKSk7Ci8vIFNraXAgcDJwIHByb2NlZHVyZSB3aGVuIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIFJ1bnRpbWUgb3IgZm9yIGJhY2tlbmQgc2VydmljZXMKIXQucDJwSGFuZGxlclN0dWJbdC5ydW50aW1lVVJMXXx8KDAsUi5pc0JhY2tlbmRTZXJ2aWNlVVJMKShpKXx8aS5pbmNsdWRlcyh0LnJ1bnRpbWVVUkwpfHxpLmluY2x1ZGVzKCIvcDJwaGFuZGxlci8iKXx8aS5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKT8oUy5pbmZvKCJbUmVnaXN0cnkgLSByZXNvbHZlXSAtIFJlc29sdmUgbm9ybWFsIHN0dWI6ICIsdC5wMnBIYW5kbGVyU3R1Yix0LnJ1bnRpbWVVUkwsKDAsUi5pc0JhY2tlbmRTZXJ2aWNlVVJMKShpKSxvLGkpLHQucmVzb2x2ZU5vcm1hbFN0dWIoaSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSkpOihTLmluZm8oIltSZWdpc3RyeSAtIHJlc29sdmVdIC0gY2hlY2tQMlA6ICIsbyxpLHQuX3AycENvbm5lY3Rpb25SZXNvbHZlKSx0Ll9wMnBDb25uZWN0aW9uUmVzb2x2ZS5jaGVja1AyUChlKS50aGVuKGZ1bmN0aW9uKG4pewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlXSBmb3VuZCByZWdpc3RlcmVkIFAyUDogJywgcmVnaXN0ZXJlZFAyUCk7CnZhciBhPXQucDJwQ29ubmVjdGlvbkxpc3Rbbi5ydW50aW1lXTtzd2l0Y2goYXx8KGE9bix0LnAycENvbm5lY3Rpb25MaXN0W24ucnVudGltZV09YSksYS5zdGF0dXMpe2Nhc2UgTy5MSVZFOmUuYm9keS5wZWVyPW4ucnVudGltZSxyKGEudXJsLGUpO2JyZWFrO2Nhc2UgTy5DUkVBVEVEOi8vIHAycCBjb25uZWN0aW9uIHNldHVwIGlzIG9uZ29pbmcsIHVzZSBNTiBTdHViCmNhc2UgTy5QUk9HUkVTUzp0LnJlc29sdmVOb3JtYWxTdHViKGkpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pO2JyZWFrO2Nhc2UgTy5ESVNDT05ORUNURUQ6Ci8vIHAycCBjb25uZWN0aW9uIHN0dWIgd2FzIGRpc2Nvbm5lY3RlZCwgbGV0J3MgYXNrIHRvIGNvbm5lY3QgYWdhaW4KUy5pbmZvKCJbUmVnaXN0cnkgLSBSZXNvbHZlXSAtIHAycENvbm5lY3Rpb24gaXMgZGlzY29ubmVjdGVkIGxldHMgdHJ5IHRvIHJlY29ubmVjdCIpLHQuX3AycENvbm5lY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3RlcihhKS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSBSZXNvbHZlXSAtIHdhcyByZWNvbm5lY3RlZCB3aXRoIHAycFJlcXVlc3RlclN0dWJ0OiAnLCByZXR1cm5VUkwpOwpyKGUpfSxmdW5jdGlvbihlKXtTLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gUmVhc29uOiAiLGUpLHQucmVzb2x2ZU5vcm1hbFN0dWIoaSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9KTticmVhaztkZWZhdWx0OlMuaW5mbygiW1JlZ2lzdHJ5IC0gcmVzb2x2ZV0gLSBQMlA6ICIsbyksbz90Ll9zZXR1cFAyUFJlcXVlc3RlcihuKS50aGVuKGZ1bmN0aW9uKGUpewovLyBubyBwMnAgY29ubmVjdGlvbiBleGlzdHMgYnV0IHRoZSBtZXNzYWdlIHNlbmRlciBpcyBhc2tpbmcgb25lLiBMZXRzIHRyeSB0byBzZXR1cCBvbmUKcihlKX0sZnVuY3Rpb24oZSl7Uy5pbmZvKCJbUmVnaXN0cnkgLSBSZXNvbHZlXSAtIFJlYXNvbjogIixlKSx0LnJlc29sdmVOb3JtYWxTdHViKGkpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pfSk6Ci8vIG5vIHAycCBjb25uZWN0aW9uIGV4aXN0cyBhbmQgdGhlIG1lc3NhZ2Ugc2VuZGVyIGRvZXMgbm90IGFzayBvbmUuIExldHMgdXNlIHRoZSBNTiBTdHViCnQucmVzb2x2ZU5vcm1hbFN0dWIoaSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9fSxmdW5jdGlvbihlKXtTLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gUmVhc29uOiAiLGUpLHQucmVzb2x2ZU5vcm1hbFN0dWIoaSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9KSl9KX19LHtrZXk6Il9zZXR1cFAyUFJlcXVlc3RlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gUy5sb2coIltSZWdpc3RyeS5fc2V0dXBQMlBDb25uZWN0aW9uXSBsb2FkU3R1YiB3aXRoIHAycFJlcXVlc3RlcjogIixlKSxuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9ZS5ydW50aW1lLG89e3JlbW90ZVJ1bnRpbWVVUkw6aSxwMnBIYW5kbGVyOmUucDJwSGFuZGxlcixwMnBSZXF1ZXN0ZXJTdHViOiEwfTsKLy8gbGV0cyBwcmVwYXJlIHRoZSBwMnBSZXF1ZXN0ZXJTVHViIGRlcGxveW1lbnQgYnkgc2V0dGluZyBhbiBvYnNlcnZlciB0byBpdHMgc3RhdHVzIGNoYW5nZXMKdC53YXRjaGluZ1lvdS5vYnNlcnZlKCJwMnBSZXF1ZXN0ZXJTdHViIixmdW5jdGlvbihlKXtTLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIHAycFJlcXVlc3RlclN0dWJzIGNoYW5nZWQgIit0LnAycFJlcXVlc3RlclN0dWIpLGUua2V5cGF0aC5zcGxpdCgiLiIpWzBdPT09aSYmInN0YXR1cyI9PT1lLm5hbWUmJmUubmV3VmFsdWU9PT1PLkxJVkUmJihTLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIHAycFJlcXVlc3RlciBpcyBsaXZlICIrdC5wMnBSZXF1ZXN0ZXJTdHViW2ldKSxyKHQucDJwUmVxdWVzdGVyU3R1YltpXS51cmwpKX0pLAovLyAgc3R1YiBsb2FkCnQubG9hZGVyLmxvYWRTdHViKGUucDJwUmVxdWVzdGVyLG8pLnRoZW4oZnVuY3Rpb24oKXtTLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIHAycFJlcXVlc3RlciBkZXBsb3llZDogIix0LnAycFJlcXVlc3RlclN0dWJbaV0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pfSl9fSx7a2V5OiJpc0xlZ2FjeSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKGU9PT10Ll9kb21haW4pcmV0dXJuIHIoITEpO1MubG9nKCJbUmVnaXN0cnldIFtSZWdpc3RyeS5SZWdpc3RyeS5pc0xlZ2FjeV0gIixlKTsKLy8gVE9ETzogdG8gYmUgZGVmaW5lZCBpbiB0aGUgcnVudGltZSBjb25maWd1cmF0aW9uCnZhciBpPVsiaHlwZXJ0eS1ydW50aW1lIiwiZG9tYWluIiwiZ2xvYmFsIiwiaHlwZXJ0eSJdLG89KDAsUi5kaXZpZGVVUkwpKGUpO2lmKC0xIT09aS5pbmRleE9mKG8udHlwZSl8fG8uZG9tYWluPT09dC5fZG9tYWluKXJldHVybiByKCExKTsKLy8gcHJvY2VzcyBVc2VyIFVSTHMKaWYoZS5zcGxpdCgiQCIpLmxlbmd0aD4xKXt2YXIgYT1vLmRvbWFpbjsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBbUmVnaXN0cnkuUmVnaXN0cnkuaXNMZWdhY3ldIGRvbWFpbjogJywgZG9tYWluKTsKaWYodC5pZHBMZWdhY3lQcm94eUxpc3QuaGFzT3duUHJvcGVydHkoYSkpe3ZhciBzPXQuaWRwTGVnYWN5UHJveHlMaXN0W2FdO3JldHVybiByKHMuaW50ZXJ3b3JraW5nP3MuaW50ZXJ3b3JraW5nOiExKX10Ll9sb2FkZXIuZGVzY3JpcHRvcnMuZ2V0SWRwUHJveHlEZXNjcmlwdG9yKGEpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeV0gW1JlZ2lzdHJ5LlJlZ2lzdHJ5LmlzTGVnYWN5XSBMZWdhY3kgc3R1YiBkZXNjcmlwdG9yOiAnLCByZXN1bHQpOwplLmludGVyd29ya2luZz8odC5pZHBMZWdhY3lQcm94eUxpc3RbYV09ZSxyKGUuaW50ZXJ3b3JraW5nKSk6cighMSl9KS5jYXRjaChmdW5jdGlvbihlKXtTLndhcm4oInByb2JsZW0gbG9hZGluZyBpZHAgcHJveHkgZGVzY3JpcHRvciBmb3IgZG9tYWluOiIsYSwiIGJlY2F1c2UgIixlKSxuKGUpfSl9ZWxzZQovLyBwcm9jZXNzIHByb3Rvc3R1YiBVUkxzCnIodC5pc0ludGVyd29ya2luZ1Byb3RvU3R1YihlKSl9KX19LHtrZXk6ImlzTG9jYWwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVsiaHlwZXJ0eS1ydW50aW1lIiwicnVudGltZSJdLHI9WyJoeXBlcnR5Il0sbj1lLnNwbGl0KCI6Ly8iKVswXTsKLy8gUHJvY2VzcyBSdW50aW1lIENvcmUgVVJMcy4KLy8gTWVzc2FnZXMgb3JpZ2luYXRlZCBmcm9tIHByb3Rvc3R1YnMgc2hvdWxkIGFsc28gbm90IGluY2x1ZGUgdGhlIHJ1bnRpbWVVUkwgaW4gaXRzIFVSTC4KaWYoLTEhPT10LmluZGV4T2YobikpcmV0dXJuIGUuaW5jbHVkZXModGhpcy5ydW50aW1lVVJMKTsKLy8gUHJvY2VzcyBIeXBlcnR5IFVSTHMKLy8gVG9kbzogaHlwZXJ0aWVzTGlzdCBzaG91bGQgYmUgYW4gb2JqZWN0IG5vdCBhbiBhcnJheQppZigtMSE9PXIuaW5kZXhPZihuKSl7Zm9yKHZhciBpIGluIHRoaXMuaHlwZXJ0aWVzTGlzdCl7aWYodGhpcy5oeXBlcnRpZXNMaXN0W2ldLmh5cGVydHlVUkw9PT1lKXJldHVybiEwfXJldHVybiExfQovLyBQcm9jZXNzIERhdGEgT2JqZWN0IFVSTHMKZS5pbmNsdWRlcygiL3N1YnNjcmlwdGlvbiIpJiYoZT1lLnN1YnN0cmluZygwLGUuaW5kZXhPZigiL3N1YnNjcmlwdGlvbiIpKSk7dmFyIG89dGhpcy5kYXRhT2JqZWN0TGlzdFtlXTtyZXR1cm4hIW8mJighby5pbnRlcndvcmtpbmd8fCFvLmludGVyd29ya2luZyl9fSx7a2V5OiJpc0ludGVyd29ya2luZ1Byb3RvU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4hIWUuaW5jbHVkZXMoIi9wcm90b3N0dWIvIikmJigwLGkuZGVmYXVsdCkodC5wcm90b3N0dWJzTGlzdCkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiB0LnByb3Rvc3R1YnNMaXN0W3JdLnVybD09PWV9KS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuISF0LnByb3Rvc3R1YnNMaXN0W2VdLmhhc093blByb3BlcnR5KCJpbnRlcndvcmtpbmciKSYmdC5wcm90b3N0dWJzTGlzdFtlXS5pbnRlcndvcmtpbmd9KVswXX19LHtrZXk6ImxvYWRlciIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2xvYWRlcj1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZGVyfX0se2tleToibWVzc2FnZUJ1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VCdXN9LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX21lc3NhZ2VCdXM9ZSx0Ll9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHQucmVnaXN0cnlVUkwsZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSBsaXN0ZW5lcl0gJywgbXNnKTsKKDAsUi5pc0h5cGVydHlVUkwpKGUuZnJvbSksZS5ib2R5Lmhhc093blByb3BlcnR5KCJjcml0ZXJpYSIpO2UuYm9keS5oYXNPd25Qcm9wZXJ0eSgicmVzb3VyY2UiKSYmIi4iIT09ZS5ib2R5LnJlc291cmNlJiYoKDAsUi5pc1VSTCkoZS5ib2R5LnJlc291cmNlKSwoMCxSLmlzVXNlclVSTCkoZS5ib2R5LnJlc291cmNlKSwoMCxSLmlzSHlwZXJ0eVVSTCkoZS5ib2R5LnJlc291cmNlKSk7ZS50eXBlO2lmKGUuYm9keS5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSYmKGUuYm9keS52YWx1ZS5oYXNPd25Qcm9wZXJ0eSgibmFtZSIpLGUuYm9keS52YWx1ZS5oYXNPd25Qcm9wZXJ0eSgidXNlciIpKSwicmVzcG9uc2UiPT09ZS50eXBlKXJldHVybiB2b2lkIFMuZXJyb3IoIltSZWdpc3RlciBsaXN0ZW5lcl0gc2tpcHBpbmcgIixlKTsKLy8gbXNnIHNlbnQgYnkgaWRlbnRpdHkgbWFuYWdlciBsaWJyYXJ5CnZhciByPXQuX2dldElkZW50aXR5QXNzb2NpYXRlZChlLmJvZHkucmVzb3VyY2UsZS5ib2R5LmNyaXRlcmlhKSxuPXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e3Jlc291cmNlOnJ9fTtuLmJvZHkuY29kZT1yPzIwMDo0MDQsdC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShuKX0pOwovLyBJbnN0YWxsIEFkZHJlc3NBbGxvY2F0aW9uCnZhciByPXYuZGVmYXVsdC5pbnN0YW5jZTt0LmFkZHJlc3NBbGxvY2F0aW9uPXJ9fV0pLFJlZ2lzdHJ5fSgpO3QuZGVmYXVsdD1QLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MzcpLGUuZXhwb3J0cz1yKDEzKS5PYmplY3Qua2V5c30sLyogNDM3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pCnZhciBuPXIoNzYpLGk9cig2Nyk7cig5NykoImtleXMiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBpKG4oZSkpfX0pfSwvKiA0MzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5TYW5kYm94VHlwZT12b2lkIDA7dmFyIG49cig0NSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cig2MCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNjgpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoNjkpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPXIoNDU4KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksbT1yKDQ1OSksXz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9KHQuU2FuZGJveFR5cGU9e0FQUDoiYXBwIixOT1JNQUw6Im5vcm1hbCIsV0lORE9XOiJ3aW5kb3cifSxmdW5jdGlvbihlKXtmdW5jdGlvbiBTYW5kYm94KGUpeygwLGYuZGVmYXVsdCkodGhpcyxTYW5kYm94KTt2YXIgdD0oMCx5LmRlZmF1bHQpKHRoaXMsKFNhbmRib3guX19wcm90b19ffHwoMCx1LmRlZmF1bHQpKFNhbmRib3gpKS5jYWxsKHRoaXMpKSxyPXQ7cmV0dXJuIGUmJihyLmNhcGFiaWxpdGllcz1lKSx0fS8qKgogICAqIERlcGxveSBhbiBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50IGludG8gdGhlIHNhbmRib3guCiAgICogQHBhcmFtICB7c3RyaW5nfSBjb21wb25lbnRTb3VyY2VDb2RlIENvbXBvbmVudCBzb3VyY2UgY29kZSAoSHlwZXJ0eSwgUHJvdG9TdHViLCBldGMpCiAgICogQHBhcmFtICB7VVJMfSBjb21wb25lbnRVUkwgSHlwZXJ0eSwgUHJvdG9TdHViLCBvciBhbnkgb3RoZXIgY29tcG9uZW50IGFkZHJlc3MuCiAgICogQHBhcmFtICB7Q29uZmlnfSBjb25maWd1cmF0aW9uIENvbmZpZyBwYXJhbWV0ZXJzIG9mIHRoZSBjb21wb25lbnQKICAgKiBAcmV0dXJuIHtQcm9taXNlPHN0cmluZz59IHJldHVybiBkZXBsb3llZCBpZiBzdWNjZXNzZnVsLCBvciBhbnkgb3RoZXIgc3RyaW5nIHdpdGggYW4gZXJyb3IKICAgKi8KcmV0dXJuKDAsdi5kZWZhdWx0KShTYW5kYm94LGUpLCgwLGQuZGVmYXVsdCkoU2FuZGJveCxbe2tleToiZGVwbG95Q29tcG9uZW50Iix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpczsKLy8gbGV0IG1lc3NhZ2VGYWN0b3J5ID0gX3RoaXMubWVzc2FnZUZhY3Rvcnk7CnJldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7Ci8vRkxPVy1PVVQ6IGRlcGxveSBtZXNzYWdlIGZvciB0aGUgaW50ZXJuYWwgU2FuZGJveFJlZ2lzdHJ5IC0+IF9vbkRlcGxveQp2YXIgYT17dHlwZToiY3JlYXRlIixmcm9tOmIuZGVmYXVsdC5FeHRlcm5hbERlcGxveUFkZHJlc3MsdG86Yi5kZWZhdWx0LkludGVybmFsRGVwbG95QWRkcmVzcyxib2R5Ont1cmw6dCxzb3VyY2VDb2RlOmUsY29uZmlnOnJ9fTsKLy9zZW5kIG1lc3NhZ2UgaW50byB0aGUgc2FuZGJveCBpbnRlcm5hbHMgYW5kIHdhaXQgZm9yIHJlcGx5Cm4ucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT8KLy9pcyB0aGlzIHJlc3BvbnNlIGNvbXBsYWludCB3aXRoIHRoZSBzcGVjPwppKCJkZXBsb3llZCIpOm8oZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InJlbW92ZUNvbXBvbmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG4pewovL0ZMT1ctT1VUOiB1bi1kZXBsb3kgbWVzc2FnZSBmb3IgdGhlIGludGVybmFsIFNhbmRib3hSZWdpc3RyeSAtPiBfb25SZW1vdmUKdmFyIGk9e3R5cGU6ImRlbGV0ZSIsZnJvbTpiLmRlZmF1bHQuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzLHRvOmIuZGVmYXVsdC5JbnRlcm5hbERlcGxveUFkZHJlc3MsYm9keTp7dXJsOmV9fTsKLy9zZW5kIG1lc3NhZ2UgaW50byB0aGUgc2FuZGJveCBpbnRlcm5hbHMgYW5kIHdhaXQgZm9yIHJlcGx5CnQucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT8KLy9pcyB0aGlzIHJlc3BvbnNlIGNvbXBsYWludCB3aXRoIHRoZSBzcGVjPwpyKCJ1bmRlcGxveWVkIik6bihlLmJvZHkuZGVzYyl9KX0pfX0se2tleToibWF0Y2hlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLGkuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiEodC5jYXBhYmlsaXRpZXNbcl0mJnQuY2FwYWJpbGl0aWVzW3JdPT09ZVtyXSl9KTtyZXR1cm4gMD09PXIubGVuZ3RofHwhZVtyXX19XSksU2FuZGJveH0oXy5kZWZhdWx0KSk7dC5kZWZhdWx0PVJ9LC8qIDQzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0NDApLGUuZXhwb3J0cz1yKDEzKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LC8qIDQ0MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi45IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDc2KSxpPXIoMTg2KTtyKDk3KSgiZ2V0UHJvdG90eXBlT2YiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBpKG4oZSkpfX0pfSwvKiA0NDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQ0MiksX19lc01vZHVsZTohMH19LC8qIDQ0MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxMjYpLHIoMTg3KSxlLmV4cG9ydHM9cigxMzkpLmYoIml0ZXJhdG9yIil9LC8qIDQ0MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDQ0KSxfX2VzTW9kdWxlOiEwfX0sLyogNDQ0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ0NSkscigxNzkpLHIoNDUwKSxyKDQ1MSksZS5leHBvcnRzPXIoMTMpLlN5bWJvbH0sLyogNDQ1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW0KdmFyIG49cigyMSksaT1yKDU5KSxvPXIoNDMpLGE9cigyNikscz1yKDE4MiksdT1yKDQ0NikuS0VZLGM9cig2NiksZj1yKDEzNCksbD1yKDk1KSxkPXIoOTQpLHA9cigyMikseT1yKDEzOSksaD1yKDE0MCksdj1yKDQ0NyksZz1yKDQ0OCksYj1yKDM5KSxtPXIoNDQpLF89cigxMzApLFI9cig3Myksdz1yKDEzMSksUz1yKDQ0OSksTz1yKDE0MSksUD1yKDM4KSxrPXIoNjcpLE09Ty5mLEw9UC5mLHg9Uy5mLEU9bi5TeW1ib2wsRD1uLkpTT04sVT1EJiZELnN0cmluZ2lmeSxBPXAoIl9oaWRkZW4iKSxqPXAoInRvUHJpbWl0aXZlIiksST17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxDPWYoInN5bWJvbC1yZWdpc3RyeSIpLFQ9Zigic3ltYm9scyIpLE49Zigib3Atc3ltYm9scyIpLEY9T2JqZWN0LnByb3RvdHlwZSxxPSJmdW5jdGlvbiI9PXR5cGVvZiBFLEg9bi5RT2JqZWN0LEI9IUh8fCFILnByb3RvdHlwZXx8IUgucHJvdG90eXBlLmZpbmRDaGlsZCxHPW8mJmMoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dyhMKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEwodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPU0oRix0KTtuJiZkZWxldGUgRlt0XSxMKGUsdCxyKSxuJiZlIT09RiYmTChGLHQsbil9OkwsSz1mdW5jdGlvbihlKXt2YXIgdD1UW2VdPXcoRS5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUsdH0sVj1xJiYic3ltYm9sIj09dHlwZW9mIEUuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEV9LFc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPT09RiYmVyhOLHQsciksYihlKSx0PV8odCwhMCksYihyKSxpKFQsdCk/KHIuZW51bWVyYWJsZT8oaShlLEEpJiZlW0FdW3RdJiYoZVtBXVt0XT0hMSkscj13KHIse2VudW1lcmFibGU6UigwLCExKX0pKTooaShlLEEpfHxMKGUsQSxSKDEse30pKSxlW0FdW3RdPSEwKSxHKGUsdCxyKSk6TChlLHQscil9LFk9ZnVuY3Rpb24oZSx0KXtiKGUpO2Zvcih2YXIgcixuPXYodD1tKHQpKSxpPTAsbz1uLmxlbmd0aDtvPmk7KVcoZSxyPW5baSsrXSx0W3JdKTtyZXR1cm4gZX0sSj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P3coZSk6WSh3KGUpLHQpfSx6PWZ1bmN0aW9uKGUpe3ZhciB0PUkuY2FsbCh0aGlzLGU9XyhlLCEwKSk7cmV0dXJuISh0aGlzPT09RiYmaShULGUpJiYhaShOLGUpKSYmKCEodHx8IWkodGhpcyxlKXx8IWkoVCxlKXx8aSh0aGlzLEEpJiZ0aGlzW0FdW2VdKXx8dCl9LCQ9ZnVuY3Rpb24oZSx0KXtpZihlPW0oZSksdD1fKHQsITApLGUhPT1GfHwhaShULHQpfHxpKE4sdCkpe3ZhciByPU0oZSx0KTtyZXR1cm4hcnx8IWkoVCx0KXx8aShlLEEpJiZlW0FdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfX0sWD1mdW5jdGlvbihlKXtmb3IodmFyIHQscj14KG0oZSkpLG49W10sbz0wO3IubGVuZ3RoPm87KWkoVCx0PXJbbysrXSl8fHQ9PUF8fHQ9PXV8fG4ucHVzaCh0KTtyZXR1cm4gbn0sWj1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1lPT09RixuPXgocj9OOm0oZSkpLG89W10sYT0wO24ubGVuZ3RoPmE7KSFpKFQsdD1uW2ErK10pfHxyJiYhaShGLHQpfHxvLnB1c2goVFt0XSk7cmV0dXJuIG99OwovLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKcXx8KEU9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgRSl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEiKTt2YXIgZT1kKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSx0PWZ1bmN0aW9uKHIpe3RoaXM9PT1GJiZ0LmNhbGwoTixyKSxpKHRoaXMsQSkmJmkodGhpc1tBXSxlKSYmKHRoaXNbQV1bZV09ITEpLEcodGhpcyxlLFIoMSxyKSl9O3JldHVybiBvJiZCJiZHKEYsZSx7Y29uZmlndXJhYmxlOiEwLHNldDp0fSksSyhlKX0scyhFLnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxPLmY9JCxQLmY9VyxyKDE5OCkuZj1TLmY9WCxyKDc3KS5mPXoscigxMzcpLmY9WixvJiYhcig5MikmJnMoRiwicHJvcGVydHlJc0VudW1lcmFibGUiLHosITApLHkuZj1mdW5jdGlvbihlKXtyZXR1cm4gSyhwKGUpKX0pLGEoYS5HK2EuVythLkYqIXEse1N5bWJvbDpFfSk7Zm9yKHZhciBRPSJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcyIuc3BsaXQoIiwiKSxlZT0wO1EubGVuZ3RoPmVlOylwKFFbZWUrK10pO2Zvcih2YXIgdGU9ayhwLnN0b3JlKSxyZT0wO3RlLmxlbmd0aD5yZTspaCh0ZVtyZSsrXSk7YShhLlMrYS5GKiFxLCJTeW1ib2wiLHsKLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpCmZvcjpmdW5jdGlvbihlKXtyZXR1cm4gaShDLGUrPSIiKT9DW2VdOkNbZV09RShlKX0sCi8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQprZXlGb3I6ZnVuY3Rpb24oZSl7aWYoIVYoZSkpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBzeW1ib2whIik7Zm9yKHZhciB0IGluIEMpaWYoQ1t0XT09PWUpcmV0dXJuIHR9LHVzZVNldHRlcjpmdW5jdGlvbigpe0I9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe0I9ITF9fSksYShhLlMrYS5GKiFxLCJPYmplY3QiLHsKLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQpjcmVhdGU6SiwKLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCmRlZmluZVByb3BlcnR5OlcsCi8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCmRlZmluZVByb3BlcnRpZXM6WSwKLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQpnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6JCwKLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKZ2V0T3duUHJvcGVydHlOYW1lczpYLAovLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCmdldE93blByb3BlcnR5U3ltYm9sczpafSksCi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQpEJiZhKGEuUythLkYqKCFxfHxjKGZ1bmN0aW9uKCl7dmFyIGU9RSgpOwovLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQovLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwKLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKcmV0dXJuIltudWxsXSIhPVUoW2VdKXx8Int9IiE9VSh7YTplfSl8fCJ7fSIhPVUoT2JqZWN0KGUpKX0pKSwiSlNPTiIse3N0cmluZ2lmeTpmdW5jdGlvbihlKXtpZih2b2lkIDAhPT1lJiYhVihlKSl7Zm9yKC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQKdmFyIHQscixuPVtlXSxpPTE7YXJndW1lbnRzLmxlbmd0aD5pOyluLnB1c2goYXJndW1lbnRzW2krK10pO3JldHVybiB0PW5bMV0sImZ1bmN0aW9uIj09dHlwZW9mIHQmJihyPXQpLCFyJiZnKHQpfHwodD1mdW5jdGlvbihlLHQpe2lmKHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLCFWKHQpKXJldHVybiB0fSksblsxXT10LFUuYXBwbHkoRCxuKX19fSksCi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludCkKRS5wcm90b3R5cGVbal18fHIoNTgpKEUucHJvdG90eXBlLGosRS5wcm90b3R5cGUudmFsdWVPZiksCi8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10KbChFLCJTeW1ib2wiKSwKLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXQpsKE1hdGgsIk1hdGgiLCEwKSwKLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ10KbChuLkpTT04sIkpTT04iLCEwKX0sLyogNDQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDk0KSgibWV0YSIpLGk9cig0Miksbz1yKDU5KSxhPXIoMzgpLmYscz0wLHU9T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0sYz0hcig2NikoZnVuY3Rpb24oKXtyZXR1cm4gdShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLGY9ZnVuY3Rpb24oZSl7YShlLG4se3ZhbHVlOntpOiJPIisgKytzLC8vIG9iamVjdCBJRAp3Ont9fX0pfSxsPWZ1bmN0aW9uKGUsdCl7Ci8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXgKaWYoIWkoZSkpcmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlP2U6KCJzdHJpbmciPT10eXBlb2YgZT8iUyI6IlAiKStlO2lmKCFvKGUsbikpewovLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAppZighdShlKSlyZXR1cm4iRiI7Ci8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCmlmKCF0KXJldHVybiJFIjsKLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKZihlKX1yZXR1cm4gZVtuXS5pfSxkPWZ1bmN0aW9uKGUsdCl7aWYoIW8oZSxuKSl7Ci8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CmlmKCF1KGUpKXJldHVybiEwOwovLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQppZighdClyZXR1cm4hMTsKLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKZihlKX1yZXR1cm4gZVtuXS53fSxwPWZ1bmN0aW9uKGUpe3JldHVybiBjJiZ5Lk5FRUQmJnUoZSkmJiFvKGUsbikmJmYoZSksZX0seT1lLmV4cG9ydHM9e0tFWTpuLE5FRUQ6ITEsZmFzdEtleTpsLGdldFdlYWs6ZCxvbkZyZWV6ZTpwfX0sLyogNDQ3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHMKdmFyIG49cig2NyksaT1yKDEzNyksbz1yKDc3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9bihlKSxyPWkuZjtpZihyKWZvcih2YXIgYSxzPXIoZSksdT1vLmYsYz0wO3MubGVuZ3RoPmM7KXUuY2FsbChlLGE9c1tjKytdKSYmdC5wdXNoKGEpO3JldHVybiB0fX0sLyogNDQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudCkKdmFyIG49cig3NSk7ZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSwvKiA0NDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93CnZhciBuPXIoNDQpLGk9cigxOTgpLmYsbz17fS50b1N0cmluZyxhPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10scz1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIGkoZSl9Y2F0Y2goZSl7cmV0dXJuIGEuc2xpY2UoKX19O2UuZXhwb3J0cy5mPWZ1bmN0aW9uKGUpe3JldHVybiBhJiYiW29iamVjdCBXaW5kb3ddIj09by5jYWxsKGUpP3MoZSk6aShuKGUpKX19LC8qIDQ1MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxNDApKCJhc3luY0l0ZXJhdG9yIil9LC8qIDQ1MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxNDApKCJvYnNlcnZhYmxlIil9LC8qIDQ1MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDUzKSxfX2VzTW9kdWxlOiEwfX0sLyogNDUzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ1NCksZS5leHBvcnRzPXIoMTMpLk9iamVjdC5zZXRQcm90b3R5cGVPZn0sLyogNDU0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykKdmFyIG49cigyNik7bihuLlMsIk9iamVjdCIse3NldFByb3RvdHlwZU9mOnIoNDU1KS5zZXR9KX0sLyogNDU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCnZhciBuPXIoNDIpLGk9cigzOSksbz1mdW5jdGlvbihlLHQpe2lmKGkoZSksIW4odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O2UuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT8vLyBlc2xpbnQtZGlzYWJsZS1saW5lCmZ1bmN0aW9uKGUsdCxuKXt0cnl7bj1yKDY1KShGdW5jdGlvbi5jYWxsLHIoMTQxKS5mKE9iamVjdC5wcm90b3R5cGUsIl9fcHJvdG9fXyIpLnNldCwyKSxuKGUsW10pLHQ9IShlIGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKGUpe3Q9ITB9cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIG8oZSxyKSx0P2UuX19wcm90b19fPXI6bihlLHIpLGV9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpvfX0sLyogNDU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ1Nyk7dmFyIG49cigxMykuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmNyZWF0ZShlLHQpfX0sLyogNDU3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI2KTsKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCm4obi5TLCJPYmplY3QiLHtjcmVhdGU6cigxMzEpfSl9LC8qIDQ1OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX2NvbXBvbmVudHM6IDx1cmw6IGluc3RhbmNlPgogICovCmZ1bmN0aW9uIFNhbmRib3hSZWdpc3RyeShlKXsoMCxpLmRlZmF1bHQpKHRoaXMsU2FuZGJveFJlZ2lzdHJ5KTt2YXIgdD10aGlzO3QuX2J1cz1lLHQuX2NvbXBvbmVudHM9e30sZS5hZGRMaXN0ZW5lcihTYW5kYm94UmVnaXN0cnkuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGZ1bmN0aW9uKGUpewovL2NvbnNvbGUubG9nKCdTYW5kYm94UmVnaXN0cnktUkNWOiAnLCBtc2cpOwovLyBsZXQgcmVzcG9uc2VNc2cgPSB7Ci8vICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogU2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcywgdG86IFNhbmRib3hSZWdpc3RyeS5FeHRlcm5hbERlcGxveUFkZHJlc3MKLy8gfTsKc3dpdGNoKGUudHlwZSl7Y2FzZSJjcmVhdGUiOnQuX29uRGVwbG95KGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjp0Ll9vblJlbW92ZShlKX19KX1yZXR1cm4oMCxhLmRlZmF1bHQpKFNhbmRib3hSZWdpc3RyeSxbe2tleToiX3Jlc3BvbnNlTXNnIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206U2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcyx0bzpTYW5kYm94UmVnaXN0cnkuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzfSxpPXt9OwovLyByZXR1cm4gbWVzc2FnZUZhY3RvcnkuY3JlYXRlUmVzcG9uc2UobXNnLCBjb2RlLCB2YWx1ZSk7CnJldHVybiB0JiYoaS5jb2RlPXQpLHImJihpLmRlc2M9ciksbi5ib2R5PWksbn19LHtrZXk6Il9vbkRlcGxveSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5jb25maWcsbj1lLmJvZHkudXJsLGk9ZS5ib2R5LnNvdXJjZUNvZGUsbz12b2lkIDAsYT12b2lkIDA7aWYodC5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShuKSlvPTUwMCxhPSJJbnN0YW5jZSAiK24rIiBhbHJlYWR5IGV4aXN0ISI7ZWxzZSB0cnl7dC5fY29tcG9uZW50c1tuXT10Ll9jcmVhdGUobixpLHIpLG89MjAwfWNhdGNoKGUpe289NTAwLGE9ZX12YXIgcz10Ll9yZXNwb25zZU1zZyhlLG8sYSk7dC5fYnVzLnBvc3RNZXNzYWdlKHMpfX0se2tleToiX29uUmVtb3ZlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnVybCxuPXZvaWQgMCxpPXZvaWQgMDt0Ll9jb21wb25lbnRzLmhhc093blByb3BlcnR5KHIpPygKLy9yZW1vdmUgY29tcG9uZW50IGZyb20gdGhlIHBvb2wgYW5kIGFsbCBsaXN0ZW5lcnMKZGVsZXRlIHQuX2NvbXBvbmVudHNbcl0sdC5fYnVzLnJlbW92ZUFsbExpc3RlbmVyc09mKHIpLG49MjAwKToobj01MDAsaT0iSW5zdGFuY2UgIityKyIgZG9lc24ndCBleGlzdCEiKTt2YXIgbz10Ll9yZXNwb25zZU1zZyhlLG4saSk7dC5fYnVzLnBvc3RNZXNzYWdlKG8pfX0se2tleToiX2NyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe319LHtrZXk6ImNvbXBvbmVudHMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21wb25lbnRzfX1dKSxTYW5kYm94UmVnaXN0cnl9KCk7cy5FeHRlcm5hbERlcGxveUFkZHJlc3M9Imh5cGVydHktcnVudGltZTovL3NhbmRib3gvZXh0ZXJuYWwiLHMuSW50ZXJuYWxEZXBsb3lBZGRyZXNzPSJoeXBlcnR5LXJ1bnRpbWU6Ly9zYW5kYm94L2ludGVybmFsIix0LmRlZmF1bHQ9cyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig2MCksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNjgpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNjkpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMjAwKSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiBNaW5pQnVzKCl7cmV0dXJuKDAsYS5kZWZhdWx0KSh0aGlzLE1pbmlCdXMpLCgwLGYuZGVmYXVsdCkodGhpcywoTWluaUJ1cy5fX3Byb3RvX198fCgwLGkuZGVmYXVsdCkoTWluaUJ1cykpLmNhbGwodGhpcykpfS8qKgogICAqIFBvc3QgYSBtZXNzYWdlIGZvciByb3V0aW5nLiBNZXNzYWdlIGlzIHJvdXRlZCBkaXJlY3RseSB0byB0aGUgZXh0ZXJuYWwgcm91dGluZyBfb25Qb3N0TWVzc2FnZS4KICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBpbk1zZyAgICAgICAgICAgIEpTT04gd2l0aCBtYW5kYXRvcnkgTWVzc2FnZSBzdHJ1Y3R1cmUge2lkLCB0eXBlLCBmcm9tLCB0b30KICAgKiBAcGFyYW0gIHtDYWxsYmFja30gcmVzcG9uc2VDYWxsYmFjayBPcHRpb25hbCBjYWxsYmFjayBpZiBhIHJlc3BvbnNlIGlzIGV4cGVjdGVkIGZyb20gdGhlIHJlcXVlc3QuIEEgcmVzcG9uc2Ugd2lsbCBiZSBhbHdheXMgc2VudCwgZXZlbiBpZiBpdCBpcyBhICJUaW1lb3V0Ii4KICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgdGhlIE1lc3NhZ2UgaWQKICAgKi8KcmV0dXJuKDAsZC5kZWZhdWx0KShNaW5pQnVzLGUpLCgwLHUuZGVmYXVsdCkoTWluaUJ1cyxbe2tleToicG9zdE1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczsKLy9hbHdheXMgc2VuZCB0byBleHRlcm5hbCAodG8gY29yZSBNZXNzYWdlQnVzKQpyZXR1cm4gci5fZ2VuSWQoZSksci5fcmVzcG9uc2VDYWxsYmFjayhlLHQpLHIuX29uUG9zdE1lc3NhZ2UoZSksZS5pZH19LHtrZXk6Il9vbk1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXQuX29uUmVzcG9uc2UoZSkpe3ZhciByPXQuX3N1YnNjcmlwdGlvbnNbZS50b107cj8odC5fcHVibGlzaE9uKHIsZSksZS50by5zdGFydHNXaXRoKCJoeXBlcnR5Iil8fHQuX3B1Ymxpc2hPbkRlZmF1bHQoZSkpOnQuX3B1Ymxpc2hPbkRlZmF1bHQoZSl9fX1dKSxNaW5pQnVzfSh5LmRlZmF1bHQpOy8qKgogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICoqLwp0LmRlZmF1bHQ9aCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTMpLGk9bi5KU09OfHwobi5KU09OPXtzdHJpbmdpZnk6SlNPTi5zdHJpbmdpZnl9KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7Ly8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwpyZXR1cm4gaS5zdHJpbmdpZnkuYXBwbHkoaSxhcmd1bWVudHMpfX0sLyogNDYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjApLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDY4KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDY5KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDQ2MikseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gSHlwZXJ0eUluc3RhbmNlKGUsdCxyLG4sbyxzLHUsYyxsLGQscCx5LGgsdixnKXsoMCxhLmRlZmF1bHQpKHRoaXMsSHlwZXJ0eUluc3RhbmNlKTt2YXIgYj0oMCxmLmRlZmF1bHQpKHRoaXMsKEh5cGVydHlJbnN0YW5jZS5fX3Byb3RvX198fCgwLGkuZGVmYXVsdCkoSHlwZXJ0eUluc3RhbmNlKSkuY2FsbCh0aGlzLGUsdCxyLHAsdixnKSksbT1iO3JldHVybiBtLl9kZXNjcmlwdG9yPW4sbS5faHlwZXJ0eVVSTD1vLG0uX3VzZXI9cyxtLl9ndWlkPXUsbS5fcnVudGltZT1jLG0uX2NvbnRleHQ9bCxtLl9wMnBIYW5kbGVyPWQsbS5fZGF0YVNjaGVtZXM9eSxtLl9yZXNvdXJjZXM9aCxifXJldHVybigwLGQuZGVmYXVsdCkoSHlwZXJ0eUluc3RhbmNlLGUpLCgwLHUuZGVmYXVsdCkoSHlwZXJ0eUluc3RhbmNlLFt7a2V5OiJ1c2VyIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy51c2VyPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VyfX0se2tleToiaHlwZXJ0eVVSTCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h5cGVydHlVUkx9fSx7a2V5OiJkZXNjcmlwdG9yIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvcn19LHtrZXk6Im9iamVjdE5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdG9yLl9vYmplY3ROYW1lfX0se2tleToicDJwSGFuZGxlciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3AycEhhbmRsZXJ9fSx7a2V5OiJkYXRhU2NoZW1lcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFTY2hlbWVzfX0se2tleToicmVzb3VyY2VzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzb3VyY2VzfX0se2tleToicnVudGltZVVSTCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J1bnRpbWV9fV0pLEh5cGVydHlJbnN0YW5jZX0oeS5kZWZhdWx0KTsvKioKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KdC5kZWZhdWx0PWgsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDYyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlZ2lzdHJ5RGF0YU1vZGVsKGUsdCxyLG4sbyxhLHMsdSxjKXsoMCxpLmRlZmF1bHQpKHRoaXMsUmVnaXN0cnlEYXRhTW9kZWwpO3ZhciBmPXRoaXM7Zi5faWQ9ZSxmLl91cmw9dCxmLl9kZXNjcmlwdG9yVVJMPXIsZi5fc3RhcnRpbmdUaW1lPW8sZi5fbGFzdE1vZGlmaWVkPWEsZi5fc3RhdHVzPXMsZi5fc3R1YnM9dSxmLl9zdHVic0NvbmZpZ3VyYXRpb249YyxmLl9wMnBSZXF1ZXN0ZXI9bn1yZXR1cm4oMCxhLmRlZmF1bHQpKFJlZ2lzdHJ5RGF0YU1vZGVsLFt7a2V5OiJpZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX0se2tleToiZGVzY3JpcHRvciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3JVUkx9fSx7a2V5OiJwMnBSZXF1ZXN0ZXIiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wMnBSZXF1ZXN0ZXJ9fSx7a2V5OiJsYXN0TW9kaWZpZWQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXN0TW9kaWZpZWR9fV0pLFJlZ2lzdHJ5RGF0YU1vZGVsfSgpO3QuZGVmYXVsdD1zLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxMSksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9Zi5nZXRMb2dnZXIoIlAyUENvbm5lY3Rpb25SZXNvbHZlIiksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIFAyUENvbm5lY3Rpb25SZXNvbHZlKGUpeygwLGEuZGVmYXVsdCkodGhpcyxQMlBDb25uZWN0aW9uUmVzb2x2ZSk7dmFyIHQ9dGhpczt0Ll9yZWdpc3RyeT1lLHQuX3JlbW90ZVAyUEVudGl0aWVzPXt9fS8qKgogICogVmVyaWZpZXMgaWYgcmVtb3RlIEVudGl0eSBjYW4gYmUgcmVhY2hlZCB3aXRoIGEgUDJQIENvbm5lY3Rpb24uCiAgKiBAcGFyYW0gIHtVUkwuVVJMfSAgICAgICAgaW5mbyAgICAgICAgICAgb2JqZWN0IFVSTAogICogQHJldHVybiB7SHlwZXJ0eURhdGFPYmplY3RJbnN0YW5jZX0gIGFkZHJlc3NVUkwgICAgIHJldHVybiB0aGUgRGF0YSBPYmplY3QgaW5zdGFuY2UgcmVnaXN0ZXJlZCBVUkwsIHJldHVybiB1bmRlZmluZWQgb3RoZXJ3aXNlCiAgKi8KcmV0dXJuKDAsdS5kZWZhdWx0KShQMlBDb25uZWN0aW9uUmVzb2x2ZSxbe2tleToiY2hlY2tQMlAiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlLmhhc093blByb3BlcnR5KCJ0byIpKQovLyB0aHJvdyBFcnJvcignVGhlIHAycCB2ZXJpZmljYXRpb24gd2FzIGZhaWxlZCcpOwpyZXR1cm4gaS5kZWZhdWx0LnJlamVjdCgiVGhlIHAycCB2ZXJpZmljYXRpb24gd2FzIGZhaWxlZCIpO3ZhciB0PWUudG8uc3BsaXQoIjovLyIpWzBdLHI9ZS50by5zcGxpdCgiOi8vIilbMV0uc3BsaXQoIi8iKVsyXSxuPXZvaWQgMDtuPXI/ZS50by5zdWJzdHJpbmcoMCxlLnRvLmluZGV4T2YoIi8iK3IpKTplLnRvO3ZhciBvPXt9O3N3aXRjaChlLmJvZHkucDJwJiYoby5wMnA9ZS5ib2R5LnAycCksZS5ib2R5LnAycEhhbmRsZXImJmUuYm9keS5wMnBSZXF1ZXN0ZXImJihvLnAycEhhbmRsZXI9ZS5ib2R5LnAycEhhbmRsZXIsby5wMnBSZXF1ZXN0ZXI9ZS5ib2R5LnAycFJlcXVlc3RlcixvLnJ1bnRpbWU9ZS5ib2R5LnAycEhhbmRsZXIuc3BsaXQoIi9wMnBoYW5kbGVyLyIpWzBdKSx0KXtjYXNlInJ1bnRpbWUiOnJldHVybiB0aGlzLmNoZWNrUDJQUnVudGltZShuLG8pO2RlZmF1bHQ6cmV0dXJuIHRoaXMuY2hlY2tQMlBFbnRpdHkobixvKX19fSx7a2V5OiJjaGVja1AyUEVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89ci5fcmVtb3RlUDJQRW50aXRpZXNbZV07aWYobyluKG8pO2Vsc2UgaWYodC5ydW50aW1lKW4odCk7ZWxzZSBpZih0LnAycCl7Ci8vIG90aGVyd2lzZSBsb29rIG9uIERvbWFpbiBSZWdpc3RyeQpsLmxvZygiW1JlZ2lzdHJ5IC0gY2hlY2tQMlBFbnRpdHldIC0gc2VhcmNoIGluIERvbWFpbiBSZWdpc3RyeTogIixlKTt2YXIgYT17dHlwZToicmVhZCIsZnJvbTpyLl9yZWdpc3RyeS5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9yZWdpc3RyeS5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmV9fTtyLl9yZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGUpe2lmKGwubG9nKCJbUmVnaXN0cnkgLSBjaGVja1AyUEVudGl0eV0gRG9tYWluIFJlZ2lzdHJ5IHJlcGx5IixlKSwidmFsdWUiaW4gZS5ib2R5KXsKLy90b2RvOiBzdG9yZSByZXRyaWV2ZWQgZW50aXR5CnZhciB0PWUuYm9keS52YWx1ZTt0Lmhhc093blByb3BlcnR5KCJwMnBIYW5kbGVyIik/bih0KTppKCJbUmVnaXN0cnkgY2hlY2tQMlBFbnRpdHldIEh5cGVydHkgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLGUuYm9keS52YWx1ZSl9ZWxzZSBpKCJbUmVnaXN0cnkgY2hlY2tQMlBFbnRpdHldIEh5cGVydHkgd2l0aCBQMlBIYW5kbGVyIG5vdCBmb3VuZCIsZS5ib2R5LmNvZGUpfSl9ZWxzZSBpKCJbUmVnaXN0cnkgY2hlY2tQMlBFbnRpdHldIE5vIFAyUCBDb25uZWN0aW9uIGF2YWlsYWJsZSBmb3IgIixlKX0pfX0se2tleToiY2hlY2tQMlBSdW50aW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj17fTsKLy8gbG9vayBvbiBsb2NhbGx5IHN0b3JlZCBwMnAgY29ubmVjdGlvbnMKcmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXtyLl9yZWdpc3RyeS5wMnBDb25uZWN0aW9uTGlzdFtlXT9pKHtydW50aW1lOmV9KTp0LnJ1bnRpbWU/KG49dCxpKG4pKTpvKCJbUmVnaXN0cnkuUDJQQ29ubmVjdGlvblJlc29sdmUuY2hlY2tQMlBSdW50aW1lXSBObyBQMlAgQ29ubmVjdGlvbiBmb3VuZCB0byAiLGUpfSl9fSx7a2V5OiJjaGVja1AyUEh5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihuLGkpe3ZhciBvPXZvaWQgMDsKLy8gbG9vayBvbiBsb2NhbGx5IHN0b3JlZCBoeXBlcnRpZXMKZm9yKHZhciBhIGluIHIuX3JlZ2lzdHJ5LnJlbW90ZUh5cGVydHlMaXN0KQovLyB0b2RvOiBjaGFuZ2UgdG8gImh5cGVydHkudXJsIiB0byBiZSBhbGlnbmVkIHdpdGggaHlwZXJ0eSBpbnN0YW5jZSBkYXRhIG1vZGVsIHNwZWMKaWYobz1yLl9yZWdpc3RyeS5yZW1vdGVIeXBlcnR5TGlzdFthXSxsLmxvZygiW1JlZ2lzdHJ5IC0gY2hlY2tQMlBIeXBlcnR5XSAtIGZvciBlYWNoIEh5cGVydHk6ICIsbyksby5oeXBlcnR5SUQ9PT1lKXJldHVybiB2b2lkKG8uaGFzT3duUHJvcGVydHkoInAycEhhbmRsZXIiKT9uKG8pOmkoIltSZWdpc3RyeSBjaGVja1AyUEh5cGVydHldIEh5cGVydHkgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLG8pKTtpZighbyYmdC5ydW50aW1lKW4odCk7ZWxzZSBpZighbyYmdC5wMnApewovLyBvdGhlcndpc2UgbG9vayBvbiBEb21haW4gUmVnaXN0cnkKbC5sb2coIltSZWdpc3RyeSAtIGNoZWNrUDJQSHlwZXJ0eV0gLSBzZWFyY2ggaW4gRG9tYWluIFJlZ2lzdHJ5OiAiLG8pO3ZhciBzPXt0eXBlOiJyZWFkIixmcm9tOnIuX3JlZ2lzdHJ5LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX3JlZ2lzdHJ5Ll9kb21haW4sYm9keTp7cmVzb3VyY2U6ZX19O3IuX3JlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24oZSl7aWYobC5sb2coIltSZWdpc3RyeSAtIGNoZWNrUDJQSHlwZXJ0eV0gRG9tYWluIFJlZ2lzdHJ5IHJlcGx5IixlKSwidmFsdWUiaW4gZS5ib2R5KXsKLy90b2RvOiBzdG9yZSByZXRyaWV2ZWQgaHlwZXJ0eQp2YXIgdD1lLmJvZHkudmFsdWU7ci5fcmVnaXN0cnkucmVtb3RlSHlwZXJ0eUxpc3QucHVzaCh0KSx0Lmhhc093blByb3BlcnR5KCJwMnBIYW5kbGVyIik/bih0KTppKCJbUmVnaXN0cnkgY2hlY2tQMlBIeXBlcnR5XSBIeXBlcnR5IGZvdW5kIGRvZXMgbm90IHN1cHBvcnQgUDJQIixlLmJvZHkudmFsdWUpfWVsc2UgaSgiW1JlZ2lzdHJ5IGNoZWNrUDJQSHlwZXJ0eV0gSHlwZXJ0eSB3aXRoIFAyUEhhbmRsZXIgbm90IGZvdW5kIixlLmJvZHkuY29kZSl9KX1lbHNlIGkoIltSZWdpc3RyeSBjaGVja1AyUEh5cGVydHldIE5vIFAyUCBDb25uZWN0aW9uIGF2YWlsYWJsZSBmb3IgIixlKX0pfX0se2tleToiY2hlY2tQMlBEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXsKLy8gbG9vayBvbiBsb2NhbGx5IHN0b3JlZCBSZW1vdGUgRGF0YSBPYmplY3RzCnZhciBvPXIuX3JlZ2lzdHJ5LnJlbW90ZURhdGFPYmplY3RMaXN0LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gci5fcmVnaXN0cnkucmVtb3RlRGF0YU9iamVjdExpc3RbdF0udXJsPT09ZX0pO2lmKDAhPT1vLmxlbmd0aCYmb1swXS5wMnBSZXF1ZXN0ZXIpbihvWzBdKTtlbHNlIGlmKDAhPT1vLmxlbmd0aClpKCJbUmVnaXN0cnkgY2hlY2tQMlBEYXRhT2JqZWN0XSBEYXRhIE9iamVjdCBmb3VuZCBkb2VzIG5vdCBzdXBwb3J0IFAyUCIsb1swXSk7ZWxzZSBpZigwPT09by5sZW5ndGgmJnQucnVudGltZSluKHQpO2Vsc2UgaWYoby5sZW5ndGgmJnQucDJwKXsKLy8gb3RoZXJ3aXNlIGxvb2sgb24gRG9tYWluIFJlZ2lzdHJ5Ci8vIGxvb2sgb24gRG9tYWluIFJlZ2lzdHJ5CnZhciBhPXt0eXBlOiJyZWFkIixmcm9tOnIuX3JlZ2lzdHJ5LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX3JlZ2lzdHJ5Ll9kb21haW4sYm9keTp7cmVzb3VyY2U6ZX19O3IuX3JlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsZnVuY3Rpb24oZSl7aWYobC5sb2coImRpc2NvdmVyIGRhdGEgb2JqZWN0IHBlciB1cmwgcmVwbHkiLGUpLCJ2YWx1ZSJpbiBlLmJvZHkpewovL3RvZG86IHN0b3JlIHJldHJpZXZlZCBoeXBlcnR5CnZhciB0PWUuYm9keS52YWx1ZTtyLl9yZWdpc3RyeS5yZW1vdGVEYXRhT2JqZWN0TGlzdC5wdXNoKHQpLHQucDJwUmVxdWVzdGVyP24odCk6aSgiW1JlZ2lzdHJ5IGNoZWNrUDJQRGF0YU9iamVjdF0gRGF0YSBPYmplY3QgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLGUuYm9keS52YWx1ZSl9ZWxzZSBpKCJbUmVnaXN0cnkgY2hlY2tQMlBEYXRhT2JqZWN0XSBub3QgZm91bmQiLGUuYm9keS5jb2RlKX0pfWVsc2UgaSgiW1JlZ2lzdHJ5IGNoZWNrUDJQRGF0YU9iamVjdF0gbm8gUDJQIENvbm5lY3Rpb24gZm91bmQiKX0pfX0se2tleToiYWRkUmVtb3RlUDJQRW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3RoaXMuX3JlbW90ZVAyUEVudGl0aWVzW2VdPXR9fSx7a2V5OiJyZW1vdmVSZW1vdGVQMlBFbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9yZW1vdGVQMlBFbnRpdGllc1tlXX19LHtrZXk6InJlY29ubmVjdFAyUFJlcXVlc3RlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbC5sb2coIltQMlBDb25lbmN0aW9uUmVzb2x2ZS5yZWNvbm5lY3RQMlBSZXF1ZXN0ZXJdIGxldHMgdHJ5IHRvIHJlY29ubmVjdCBQMlAgUmVxdWVzdGVyIFN0dWI6ICIsZSksbmV3IGkuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPWUucnVudGltZSxvPXt0eXBlOiJleGVjdXRlIixmcm9tOnQuX3JlZ2lzdHJ5LnJlZ2lzdHJ5VVJMLHRvOmUudXJsLGJvZHk6e21ldGhvZDoiY29ubmVjdCIscGFyYW1zOltlLnAycEhhbmRsZXJdfX07Ci8vIGxldHMgcHJlcGFyZSB0aGUgcDJwUmVxdWVzdGVyU1R1YiByZWNvbm5lY3QgYnkgc2V0dGluZyBhbiBvYnNlcnZlciB0byBpdHMgc3RhdHVzIGNoYW5nZXMKdC5fcmVnaXN0cnkud2F0Y2hpbmdZb3Uub2JzZXJ2ZSgicDJwUmVxdWVzdGVyU3R1YiIsZnVuY3Rpb24oZSl7aWYobC5sb2coIltQMlBDb25lbmN0aW9uUmVzb2x2ZS5yZWNvbm5lY3RQMlBSZXF1ZXN0ZXJdIHAycFJlcXVlc3RlclN0dWJzIGNoYW5nZWQgIit0Ll9yZWdpc3RyeS5wMnBSZXF1ZXN0ZXJTdHViKSxlLmtleXBhdGguc3BsaXQoIi4iKVswXT09PWkmJiJzdGF0dXMiPT09ZS5uYW1lKXN3aXRjaChlLm5ld1ZhbHVlKXtjYXNlImxpdmUiOmwubG9nKCJbUDJQQ29uZW5jdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyXSBwMnBSZXF1ZXN0ZXIgaXMgbGl2ZSAiK3QuX3JlZ2lzdHJ5LnAycFJlcXVlc3RlclN0dWJbaV0pLHIodC5fcmVnaXN0cnkucDJwUmVxdWVzdGVyU3R1YltpXS51cmwpO2JyZWFrO2Nhc2UiZmFpbGVkIjpsLmxvZygiW1AyUENvbmVuY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3Rlcl0gcDJwUmVxdWVzdGVyIHJlY29ubmVjdCBmYWlsZWQgIit0Ll9yZWdpc3RyeS5wMnBSZXF1ZXN0ZXJTdHViW2ldKSxuKCJQMlAgUmVxdWVzdGVyIHJlY29ubmVjdCBmYWlsZWQiKX19KSwKLy8gIHN0dWIgbG9hZAp0Ll9yZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKGUpe2wubG9nKCJbUDJQQ29uZW5jdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyXSByZWNvbm5lY3QgcmVxdWVzdCByZXBseSIsZSl9KX0pfX1dKSxQMlBDb25uZWN0aW9uUmVzb2x2ZX0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gICAgIHByb3h5LW9ic2VydmUgdjAuMC4xOAovLyAgICAgQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE2IFNpbW9uIFkuIEJsYWNrd2VsbCwgQW55V2hpY2hXYXkKLy8gICAgIE1JVCBMaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gT2JzZXJ2ZXIoZSx0LHIsbixpLG8pe2Z1bmN0aW9uIGRlbGl2ZXIoZSxuKXtpZihkZWxpdmVyLmRlbGF5PW4sIWRlbGl2ZXIucGF1c2UmJnMuY2hhbmdlc2V0Lmxlbmd0aD4wKXtpZighZSl7dmFyIGk9cy5jaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiFyfHxyLmluZGV4T2YoZS50eXBlKT49MH0pO2kubGVuZ3RoPjAmJnQoaSl9cy5jaGFuZ2VzZXQ9W119fXZhciBhLHM9dGhpczsKLy8gX19vYnNlcnZlckNhbGxiYWNrc19fIGlzIHVzZWQgYXMgYW4gaW5kZXggdG8gZ2V0IGF0IHRoZSBwcm94eSB3aGljaCBpcyB0aGUgb2JzZXJ2ZXIsIHNvIHdlIGNhbiB1bm9ic2VydmUKcmV0dXJuIGRlbGl2ZXIucGF1c2U9aSxkZWxpdmVyLmRlbGF5PW8scy5nZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4iX19vYnNlcnZlcl9fIj09PXQ/czoidW5vYnNlcnZlIj09PXQ/ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LnVub2JzZXJ2ZShlKSxlfToiZGVsaXZlciI9PT10P2RlbGl2ZXI6ZVt0XX0scy50YXJnZXQ9ZSxzLmNoYW5nZXNldD1bXSxzLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX198fChPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19vYnNlcnZlckNhbGxiYWNrc19fIix7ZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITEsdmFsdWU6W119KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19vYnNlcnZlcnNfXyIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSkpLHMudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKHQpLHMudGFyZ2V0Ll9fb2JzZXJ2ZXJzX18ucHVzaCh0aGlzKSxhPW5ldyBQcm94eShlLHMpLGRlbGl2ZXIoITEsbyksYX0KLy8gQ3JlYXRlcyBhbmQgcmV0dXJucyBhIFByb3h5IHdyYXBwaW5nIGEgdGFyZ2V0IHNvIHRoYXQgYWxsIGNoYW5nZXMgY2FuIGJlIHRyYXBwZWQgYW5kIGZvcndhcmRlZCB0bwovLyBhIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgdGFrZXMgYW4gYXJyYXkgb2YgY2hhbmdlcyBqdXN0IGxpa2UgdGhlIHRyYWRpdGlvbmFsIG9yaWdpbmFsIENocm9tZSBPYmplY3Qub2JzZXJ2ZQovLyB7b2JqZWN0OjxvYmplY3QgY2hhbmdlZD4sbmFtZTo8ZmllbGQgY2hhbmdlZD4sdHlwZTphZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUsb2xkVmFsdWU6PG9sZCB2YWx1ZSBpZiB1cGRhdGUgfCBkZWxldGU+fQovLyBUaGUgYWNjZXB0bGlzdCBjYW4gYmUgYWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLgovLyB2IDAuMC4xMCB0byBzdXBwb3J0IHBhdXNpbmcgYW5kIHJlc3RhcnRpbmcgb2JzZXJ2YXRpb24gdHdvIGFkZGl0aW9uYWwgY29uc3RydWN0b3IgYXJndW1lbnRzIGFyZSBhdmFpbGFibGUgdG8gT2JqZWN0Lm9ic2VydmU6Ci8vIHBhdXNhYmxlIC0gY3JlYXRlIHRoZSBPYnNlcnZlciBzbyBpdCBjYW4gYmUgcGF1c2VkCi8vIHBhdXNlIC0gY3JlYXRlIG9ic2VydmVyIGluIHBhdXNlZCBzdGF0ZQovLyBpZiBwYXVzYWJsZSBpcyB0cnVlIHRoZW4gYW4gYWRkaXRpb25hbCBtZXRob2QgZGVsaXZlcihpZ25vcmVQcmV2aW91cykgaXMgYXZhaWxhYmxlIHRvIHN0YXJ0IGRlbGl2ZXJ5Ci8vIHRvIHBhdXNlIGRlbGl2ZXJ5IHNldCBhIHByb3BlcnR5IGNhbGxlZCBwYXVzZSBvbiB0aGUgZnVuY3Rpb24gZGVsaXZlciB0byB0cnVlCi8vIHBhdXNhYmxlIGlzIG9wdGlvbmFsIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mIHNoYWRvd2luZyBhIHByb3BlcnR5IG9yIG1ldGhvZCBvbiBhbnkgZXhpc3RpbmcgY29kZSBjYWxsZWQgZGVsaXZlcgpPYmplY3Qub2JzZXJ2ZXx8ImZ1bmN0aW9uIiE9dHlwZW9mIFByb3h5fHwoT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGl2ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQobnVsbCwiZGVsaXZlciIpfSxPYnNlcnZlci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCxyKXsvLyAsIHJlY2VpdmVyCnZhciBuPWVbdF0saT12b2lkIDA9PT1uPyJhZGQiOiJ1cGRhdGUiO2lmKGVbdF09cixlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmKCF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKGkpPj0wKSl7dmFyIG89e29iamVjdDplLG5hbWU6dCx0eXBlOml9LGE9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxzPXRoaXMuZGVsaXZlcigpOyJ1cGRhdGUiPT09aSYmKG8ub2xkVmFsdWU9biksdGhpcy5jaGFuZ2VzZXQucHVzaChvKSxhJiZzKCExLCJudW1iZXIiPT10eXBlb2Ygcy5kZWxheT9zLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGV0ZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZVt0XTtpZigKLy9pZih0eXBlb2Yob2xkdmFsdWUpIT09InVuZGVmaW5lZCIpIHsKZGVsZXRlIGVbdF0sZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJkZWxldGUiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOiJkZWxldGUiLG9sZFZhbHVlOnJ9LGk9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxvPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksaSYmbyghMSwibnVtYmVyIj09dHlwZW9mIG8uZGVsYXk/by5kZWxheToxMCl9Ci8vfQpyZXR1cm4hMH0sT2JzZXJ2ZXIucHJvdG90eXBlLmRlZmluZVByb3BlcnR5PWZ1bmN0aW9uKGUsdCxyKXtpZihPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHIpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicmVjb25maWd1cmUiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6dCx0eXBlOiJyZWNvbmZpZ3VyZSJ9LGk9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxvPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksaSYmbyghMSwibnVtYmVyIj09dHlwZW9mIG8uZGVsYXk/by5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5zZXRQcm90b3R5cGVPZj1mdW5jdGlvbihlLHQpe3ZhciByPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihPYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInNldFByb3RvdHlwZSIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZToiX19wcm90b19fIix0eXBlOiJzZXRQcm90b3R5cGUiLG9sZFZhbHVlOnJ9LGk9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxvPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksaSYmbyghMSwibnVtYmVyIj09dHlwZW9mIG8uZGVsYXk/by5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5wcmV2ZW50RXh0ZW5zaW9ucz1mdW5jdGlvbihlKXtpZihPYmplY3QucHJldmVudEV4dGVuc2lvbnMoZSksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJwcmV2ZW50RXh0ZW5zaW9ucyIpPj0wKXt2YXIgdD17b2JqZWN0OmUsdHlwZToicHJldmVudEV4dGVuc2lvbnMifSxyPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsbj10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKHQpLHImJm4oITEsIm51bWJlciI9PXR5cGVvZiBuLmRlbGF5P24uZGVsYXk6MTApfXJldHVybiEwfSxPYmplY3Qub2JzZXJ2ZT1mdW5jdGlvbihlLHQscixuLGksbyl7cmV0dXJuIG5ldyBPYnNlcnZlcihlLHQscixuLGksbyl9LE9iamVjdC51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtpZihlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyl7aWYoIXQpcmV0dXJuIGUuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZSgwLGUuX19vYnNlcnZlckNhbGxiYWNrc19fLmxlbmd0aCksdm9pZCBlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKDAsZS5fX29ic2VydmVyc19fLmxlbmd0aCk7ZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihyLG4pe3Q9PT1yJiYoZS5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKG4sMSksZGVsZXRlIGUuX19vYnNlcnZlcnNfX1tuXS5jYWxsYmFjayxlLl9fb2JzZXJ2ZXJzX18uc3BsaWNlKG4sMSkpfSl9fSxBcnJheS5vYnNlcnZlPWZ1bmN0aW9uKGUsdCxyLG4saSxvKXtpZighKGUgaW5zdGFuY2VvZiBBcnJheXx8QXJyYXkuaXNBcnJheShlKSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7cj1yfHxbImFkZCIsInVwZGF0ZSIsImRlbGV0ZSIsInNwbGljZSJdO3ZhciBhPW5ldyBQcm94eShlLHtnZXQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4idW5vYnNlcnZlIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIGU/T2JqZWN0LnVub2JzZXJ2ZSh0LGUpOnQudW5vYnNlcnZlKCl9OiJzcGxpY2UiPT09bj9mdW5jdGlvbihuLGkpe2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiBpKXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IHR3byBhcmd1bWVudHMgdG8gQXJyYXkgc3BsaWNlIGFyZSBub3QgbnVtYmVyLCBudW1iZXIiKTt2YXIgbz10aGlzLnNsaWNlKG4sbitpKSxhPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHMubGVuZ3RoLTI6MCx1PXtvYmplY3Q6ZSx0eXBlOiJzcGxpY2UiLGluZGV4Om4scmVtb3ZlZDpvLGFkZGVkQ291bnQ6YX07aWYodC5zcGxpY2UuYXBwbHkodCxhcmd1bWVudHMpLHIuaW5kZXhPZigic3BsaWNlIik+PTApe3ZhciBuPTA9PT1zLl9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoLGM9cy5fX29ic2VydmVyX18uZGVsaXZlcigpO3MuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5wdXNoKHUpLG4mJmMoITEsIm51bWJlciI9PXR5cGVvZiBjLmRlbGF5P2MuZGVsYXk6MTApfX06InB1c2giPT09bj9mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgsMCxlKX06InBvcCI9PT1uP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLTEsMSl9OiJ1bnNoaWZ0Ij09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxlKX06InNoaWZ0Ij09PW4/ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpY2UoMCwxKX06dFtuXX19KSxzPU9iamVjdC5vYnNlcnZlKGEsZnVuY3Rpb24oZSl7dmFyIG49ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuImxlbmd0aCIhPT1lLm5hbWUmJiJhZGQiIT09ZS5uYW1lJiYoIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wKX0pO24ubGVuZ3RoPjAmJnQobil9LHIsbixpLG8pO3JldHVybiBzfSxBcnJheS51bm9ic2VydmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS51bm9ic2VydmUodCl9KSxPYmplY3QuZGVlcE9ic2VydmU9ZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIHJlb2JzZXJ2ZShlLHIpe09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oaSl7aWYoKCJvYmplY3QiPT09bihlW2ldKXx8ImFycmF5Ij09PW4oZVtpXSkpJiYhZVtpXS5oYXNPd25Qcm9wZXJ0eSgiX19vYnNlcnZlcnNfXyIpKXt2YXIgbz1yLnNsaWNlKDApO28ucHVzaChpKSxlW2ldPU9iamVjdC5kZWVwT2JzZXJ2ZShlW2ldLHQsbyl9fSl9cj1yfHxbXTt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKGUpLm1hdGNoKC9ccyhbYS16QS1aXSspLylbMV0udG9Mb3dlckNhc2UoKX07cmV0dXJuIHJlb2JzZXJ2ZShlLHIpLE9iamVjdC5vYnNlcnZlKGUsZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcmVjdXJzZShlLHQscixpLG8pe2lmKGkgaW5zdGFuY2VvZiBPYmplY3Qpe09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoIXJ8fHJbYV0hPT1pW2FdKXt2YXIgcz1yJiZ2b2lkIDAhPT1yW2FdP3JbYV06dm9pZCAwLHU9dm9pZCAwPT09cz8iYWRkIjoidXBkYXRlIixjPW8rIi4iK2E7bi5wdXNoKHtuYW1lOmUsb2JqZWN0OnQsdHlwZTp1LG9sZFZhbHVlOnMsbmV3VmFsdWU6aVthXSxrZXlwYXRoOmN9KSxyZWN1cnNlKGUsdCxzLGlbYV0sYyl9fSl9ZWxzZSBpZihyIGluc3RhbmNlb2YgT2JqZWN0KXt2YXIgYT1PYmplY3Qua2V5cyhyKTthLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIHM9bnVsbD09PWk/InVwZGF0ZSI6ImRlbGV0ZSIsdT1vKyIuIithO24ucHVzaCh7bmFtZTplLG9iamVjdDp0LHR5cGU6cyxvbGRWYWx1ZTpyW2FdLG5ld1ZhbHVlOmksa2V5cGF0aDp1fSkscmVjdXJzZShlLHQsclthXSx2b2lkIDAsdSl9KX19dmFyIG49W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PShyLmxlbmd0aD4wP3Iuam9pbigiLiIpKyIuIjoiIikrZS5uYW1lOyJ1cGRhdGUiIT09ZS50eXBlJiYiYWRkIiE9PWUudHlwZXx8cmVvYnNlcnZlKGUub2JqZWN0LHIpLG4ucHVzaCh7bmFtZTplLm5hbWUsb2JqZWN0OmUub2JqZWN0LHR5cGU6ZS50eXBlLG9sZFZhbHVlOmUub2xkVmFsdWUsbmV3VmFsdWU6ZS5vYmplY3RbZS5uYW1lXSxrZXlwYXRoOnR9KSxyZWN1cnNlKGUubmFtZSxlLm9iamVjdCxlLm9sZFZhbHVlLGUub2JqZWN0W2UubmFtZV0sdCl9KSx0KG4pfSl9fSgpfSwvKiA0NjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0NiksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cig5NiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMTEpLHk9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShwKSxoPXIoMTUpLHY9cig0NjYpLGc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxiPXIoNDY3KSxtPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYiksXz1yKDQ2OCksUj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLHc9cigyMDEpLFM9eS5nZXRMb2dnZXIoIklkZW50aXR5TW9kdWxlIiksTz1mdW5jdGlvbigpey8qKgogICogVGhpcyBpcyB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGlzZSB0aGUgSWRlbnRpdHkgTW9kdWxlIGl0IGRvZXMgbm90IHJlcXVpcmUgYW55IGlucHV0LgogICovCmZ1bmN0aW9uIElkZW50aXR5TW9kdWxlKGUsdCxyLG4peygwLGYuZGVmYXVsdCkodGhpcyxJZGVudGl0eU1vZHVsZSk7dmFyIGk9dGhpcztpZighZSl0aHJvdyBuZXcgRXJyb3IoInJ1bnRpbWVVUkwgaXMgbWlzc2luZy4iKTtpZighcil0aHJvdyBuZXcgRXJyb3IoInN0b3JhZ2VNYW5hZ2VyIGlzIG1pc3NpbmciKTtpLl9ydW50aW1lVVJMPWUsaS5zdG9yYWdlTWFuYWdlcj1yLGkuZGF0YU9iamVjdHNTdG9yYWdlPW4saS5faWRtVVJMPWkuX3J1bnRpbWVVUkwrIi9pZG0iLGkuX2d1aVVSTD1pLl9ydW50aW1lVVJMKyIvaWRlbnRpdHktZ3VpIixpLnJ1bnRpbWVDYXBhYmlsaXRpZXM9dCxpLl9kb21haW49KDAsaC5kaXZpZGVVUkwpKGkuX3J1bnRpbWVVUkwpLmRvbWFpbixpLndhdGNoaW5nWW91PW5ldyB3LldhdGNoaW5nWW91LAovL3RvIHN0b3JlIGl0ZW1zIHdpdGggdGhpcyBmb3JtYXQ6IHtpZGVudGl0eTogaWRlbnRpdHlVUkwsIHRva2VuOiB0b2tlbklEfQppLmlkZW50aXRpZXM9W10saS5pZGVudGl0aWVzTGlzdD1pLndhdGNoaW5nWW91LndhdGNoKCJpZGVudGl0aWVzTGlzdCIse30sITApLGkuZW1haWxzTGlzdD1bXTt2YXIgbz1uZXcgZy5kZWZhdWx0KCJndWlkIiwiSFVNQU4iKTtpLmlkZW50aXR5PW8saS5jcnlwdG89bmV3IG0uZGVmYXVsdCxpLmN1cnJlbnRJZGVudGl0eSxpLmRlZmF1bHRJZGVudGl0eSwKLy9zdG9yZXMgdGhlIGFzc29jaWF0aW9uIG9mIHRoZSBkYXRhT2JqZWN0IGFuZCB0aGUgSHlwZXJ0eSByZWdpc3RlcmVkIHdpdGhpbgppLmRhdGFPYmplY3RzSWRlbnRpdHk9e30sCi8vIGhhc2hUYWJsZSB0byBzdG9yZSBhbGwgdGhlIGNyeXB0byBpbmZvcm1hdGlvbiBiZXR3ZWVuIHR3byBoeXBlcnRpZXMKaS5jaGF0S2V5cz17fSwKLy8gaGFzaFRhYmxlIHRvIHN0b3JlIHRoZSBzeW1tZXRyaWMga2V5cyB0byBiZSB1c2VkIGluIHRoZSBjaGF0IGdyb3VwCmkuZGF0YU9iamVjdFNlc3Npb25LZXlzPXt9LAovL2ZhaWxzYWZlIHRvIGVuYWJsZS9kaXNhYmxlIGFsbCB0aGUgY3JpcHRvZ3JhcGhpYyBmdW5jdGlvbnMKaS5pc1RvVXNlRW5jcnlwdGlvbj0hMCwKLy8gdmFyaWFibGUgdG8ga25vdyBpZiB0aGUgR1VJIGlzIGRlcGxveWVkIHRvIGNob29zZSB0aGUgaWRlbnRpdHkuIGlmIHRoZSByZWFsIEdVSSBpcyBub3QgZGVwbG95ZWQsIGEgZmFrZSBndWkgaXMgZGVwbG95ZWQgaW5zdGVhZC4KaS5ndWlEZXBsb3llZD0hMX0KLy8qKioqKioqKioqKioqKioqKioqIEdFVCBBTkQgU0VUIE1FVEhPRFMgKioqKioqKioqKioqKioqKioqKgovKioKICAqIHJldHVybiB0aGUgbWVzc2FnZUJ1cyBpbiB0aGlzIFJlZ2lzdHJ5CiAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzCiAgKi8KcmV0dXJuKDAsZC5kZWZhdWx0KShJZGVudGl0eU1vZHVsZSxbe2tleToiZ2V0SWRlbnRpdHkiLAovLyoqKioqKioqKioqKioqKioqKiogSURFTlRJVFkgUkVMRUFURUQgTUVUSE9EUyAqKioqKioqKioqKioqKioqKioqCi8qKgogICAgKiBnZXRzIGFsbCB0aGUgaW5mb3JtYXRpb24gZnJvbSBhIGdpdmVuIHVzZXJVUkwKICAgICogQHBhcmFtICB7U3RyaW5nfSAgdXNlclVSTCAgICAgdXNlciB1cmwKICAgICogQHJldHVybiB7SlNPTn0gICAgaWRlbnRpdHkgICAgaWRlbnRpdHkgYnVuZGxlIGZyb20gdGhlIHVzZXJVUkwKICAgICovCnZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Zm9yKHZhciByIGluIHQuaWRlbnRpdGllcyl7dmFyIG49dC5pZGVudGl0aWVzW3JdO2lmKG4uaWRlbnRpdHk9PT1lKXJldHVybiBufXRocm93ImlkZW50aXR5IG5vdCBmb3VuZCJ9fSx7a2V5OiJzZXRDdXJyZW50SWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuY3VycmVudElkZW50aXR5PWV9fSx7a2V5OiJnZXRJZGVudGl0aWVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkZW50aXRpZXN9fSx7a2V5OiJnZXRJZGVudGl0aWVzVG9DaG9vc2UiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJue2lkZW50aXRpZXM6dGhpcy5lbWFpbHNMaXN0LGlkcHM6W3tkb21haW46Imdvb2dsZS5jb20iLHR5cGU6ImlkVG9rZW4ifSx7ZG9tYWluOiJtaWNyb3NvZnQuY29tIix0eXBlOiJpZFRva2VuIn0se2RvbWFpbjoic2xhY2suY29tIix0eXBlOiJMZWdhY3kifV19fX0se2tleToiZ2V0Q3VycmVudElkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRJZGVudGl0eX19LHtrZXk6ImxvYWRJZGVudGl0aWVzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24odCl7ZS5zdG9yYWdlTWFuYWdlci5nZXQoImlkTW9kdWxlOmlkZW50aXRpZXMiKS50aGVuKGZ1bmN0aW9uKHIpe3ImJihlLmlkZW50aXRpZXM9cixyLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9ZS5fc2Vjb25kc19zaW5jZV9lcG9jaCgpLG49MDt0LmluZm8mJnQuaW5mby5leHBpcmVzP249dC5pbmZvLmV4cGlyZXM6dC5pbmZvJiZ0LmluZm8udG9rZW5JREpTT04mJnQuaW5mby50b2tlbklESlNPTi5leHAmJihuPXQuaW5mby50b2tlbklESlNPTi5leHApLHQuaGFzT3duUHJvcGVydHkoImludGVyd29ya2luZyIpfHx0LmludGVyd29ya2luZ3x8KGUuZGVmYXVsdElkZW50aXR5PXQubWVzc2FnZUluZm8scGFyc2VJbnQobik+ciYmKGUuZGVmYXVsdElkZW50aXR5LmV4cGlyZXM9cGFyc2VJbnQobiksZS5jdXJyZW50SWRlbnRpdHk9ZS5kZWZhdWx0SWRlbnRpdHkpKX0pKSx0KCl9KX0pfX0se2tleToibG9hZFNlc3Npb25LZXlzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24odCl7ZS5zdG9yYWdlTWFuYWdlci5nZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIpLnRoZW4oZnVuY3Rpb24ocil7ZS5kYXRhT2JqZWN0U2Vzc2lvbktleXM9cnx8e30sdCgpfSl9KX19LHtrZXk6ImdldElkZW50aXR5QXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Ci8vQ0hFQ0sgd2hldGhlciBpcyBicm93c2VyIGVudmlyb25tZW50IG9yIG5vZGVqcwovL2lmIGl0IGlzIGJyb3dzZXIsIHRoZW4gY3JlYXRlIGEgZmFrZSBpZGVudGl0eQp0LnJ1bnRpbWVDYXBhYmlsaXRpZXMuaXNBdmFpbGFibGUoImJyb3dzZXIiKS50aGVuKGZ1bmN0aW9uKGkpe2lmKFMubG9nKCJydW50aW1lIGJyb3dzZXIgaWRlbnRpdHkgYWNxdWlzaXRpb24gIixpKSxpKQovL3RvZG86IG9ubHkgaWRwIHNob3VsZCBiZSBtYW5kYXRvcnkgd2hlbiBpZGVudGl0eUJ1bmRsZSBleGlzdHMKaWYoZSYmZS5oYXNPd25Qcm9wZXJ0eSgiaWRwIikpe3ZhciBvPWUuaWRwLGE9ZS5oYXNPd25Qcm9wZXJ0eSgib3JpZ2luIik/ZS5vcmlnaW46Im9yaWdpbiIscz1lLmhhc093blByb3BlcnR5KCJpZEhpbnQiKT9lLmlkSGludDoiIjt0LnNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eShhLG8scykudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gUy5sb2coIltJZGVudGl0eU1vZHVsZV0gSWRlbnRpdHkgc2VsZWN0ZWQgYnkgaHlwZXJ0eS4iKSxyKGUpfSxmdW5jdGlvbihlKXsKLy8gaWYgaXQgZ290IGFuIGVycm9yIHRoZW4ganVzdCBzZWxlY3QgaWRlbnRpdHkgZnJvbSBHVUkKLy8gbG9nLmVycm9yKCdbSWRlbnRpdHlNb2R1bGVdIENvdWxkIG5vdCBzZWxlY3QgaWRlbnRpdHkgZnJvbSBoeXBlcnR5LicpOwp0LnNlbGVjdElkZW50aXR5RnJvbUdVSSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIFMubG9nKCJbSWRlbnRpdHlNb2R1bGVdIElkZW50aXR5IHNlbGVjdGVkIGJ5IGh5cGVydHkuIikscihlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX0pfWVsc2V7aWYodC5kZWZhdWx0SWRlbnRpdHkmJnQuZGVmYXVsdElkZW50aXR5LmV4cGlyZXM+dC5fc2Vjb25kc19zaW5jZV9lcG9jaCgpKXJldHVybiByKHQuZGVmYXVsdElkZW50aXR5KTt0LnNlbGVjdElkZW50aXR5RnJvbUdVSSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIFMubG9nKCJbSWRlbnRpdHlNb2R1bGVdIElkZW50aXR5IHNlbGVjdGVkIGZyb20gR1VJLiIpLGUuaGFzT3duUHJvcGVydHkoIm1lc3NhZ2VJbmZvIik/KHQuZGVmYXVsdElkZW50aXR5PWUubWVzc2FnZUluZm8scihlLm1lc3NhZ2VJbmZvKSk6KHQuZGVmYXVsdElkZW50aXR5PWUscihlKSl9LGZ1bmN0aW9uKGUpe3JldHVybiBuKGUpfSl9fSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIFMuZXJyb3IoIkVycm9yIG9uIGlkZW50aXR5IGFjcXVpc2l0aW9uICIsZSksbihlKX0pLHQucnVudGltZUNhcGFiaWxpdGllcy5pc0F2YWlsYWJsZSgibm9kZSIpLnRoZW4oZnVuY3Rpb24oZSl7aWYoUy5sb2coIm5vZGUgaWRlbnRpdHkgYWNxdWlzaXRpb24gIixlKSxlKXtpZih2b2lkIDAhPT10LmN1cnJlbnRJZGVudGl0eSkKLy9UT0RPIHZlcmlmeSB3aGV0aGVyIHRoZSB0b2tlbiBpcyBzdGlsbCB2YWxpZCBvciBub3QuCi8vIHNob3VsZCBiZSBuZWVkZWQgdG8gbWFrZSBmdXJ0aGVyIHJlcXVlc3RzLCB0byBvYnRhaW4gYSB2YWxpZCB0b2tlbgpyZXR1cm4gcih0LmN1cnJlbnRJZGVudGl0eSk7Uy5sb2coImdldElkZW50aXR5QXNzZXJ0aW9uIGZvciBub2RlanMiKTsKLy9sZXQgcmFuZG9tTnVtYmVyID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwMDAwKSArIDEpOwp2YXIgbj17YXZhdGFyOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vLVdhQ3JqVk1NVi1RL0FBQUFBQUFBQUFJL0FBQUFBQUFBQUFzLzhPbFZxQ3BTQjljL3Bob3RvLmpwZyIsY246InRlc3Qgbm9kZWpzIix1c2VybmFtZToibm9kZWpzLWNvbmZlcmVuY2VAbm9kZWpzLmNvbSIsdXNlclVSTDoidXNlcjovL25vZGVqcy5jb20vbm9kZWpzLWNvbmZlcmVuY2VAbm9kZWpzLmNvbSJ9LGk9e2Fzc2VydGlvbjoiYXNzZXJ0aW9uIixpZHA6Im5vZGVqcyIsaWRlbnRpdHk6InVzZXI6Ly9ub2RlanMuY29tL25vZGVqcy1jb25mZXJlbmNlQG5vZGVqcy5jb20iLG1lc3NhZ2VJbmZvOnthc3NlcnRpb246ImFzc2VydGlvbiIsaWRwOiJub2RlanMiLHVzZXJQcm9maWxlOm59LHVzZXJQcm9maWxlOm59O3QuY3VycmVudElkZW50aXR5PWksdC5pZGVudGl0aWVzLnB1c2goaSksdC5zdG9yYWdlTWFuYWdlci5zZXQoImlkTW9kdWxlOmlkZW50aXRpZXMiLDAsdC5pZGVudGl0aWVzKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHIoaSl9KX19KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJFcnJvciBvbiBpZGVudGl0eSBhY3F1aXNpdGlvbiAiLGUpLG4oZSl9KX0pfX0se2tleToiZ2V0VXNlcnNJRHMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1bXSxuPWU/aC5nZXRVc2VyRW1haWxGcm9tVVJMOmZ1bmN0aW9uKGUpe3JldHVybiBlfTtmb3IodmFyIGkgaW4gdC5pZGVudGl0aWVzKXt2YXIgbz10LmlkZW50aXRpZXNbaV07ci5wdXNoKG4oby5pZGVudGl0eSkpfXJldHVybiByfX0se2tleToiZGVsZXRlSWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Ci8vbGV0IHVzZXJVUkwgPSBjb252ZXJ0VG9Vc2VyVVJMKHVzZXJJRCk7CmZvcih2YXIgciBpbiB0LmlkZW50aXRpZXMpdC5pZGVudGl0aWVzW3JdLmlkZW50aXR5PT09ZSYmdC5pZGVudGl0aWVzLnNwbGljZShyLDEpfX0se2tleToidW5yZWdpc3RlcklkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2Zvcih2YXIgciBpbiB0LmVtYWlsc0xpc3QpdC5lbWFpbHNMaXN0W3JdPT09ZSYmdC5lbWFpbHNMaXN0LnNwbGljZShyLDEpfX0se2tleToicmVxdWVzdElkZW50aXR5VG9HVUkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLGkpewovL2NvbmRpdGlvbiB0byBjaGVjayBpZiB0aGUgcmVhbCBHVUkgaXMgZGVwbG95ZWQuIElmIG5vdCwgZGVwbG95cyBhIGZha2UgZ3VpCmlmKCExPT09ci5ndWlEZXBsb3llZCl7dmFyIG89ci5fZ3VpVVJMLGE9bmV3IFIuZGVmYXVsdChvLHIuX21lc3NhZ2VCdXMpO3IuZ3VpRmFrZT1hLHIuZ3VpRGVwbG95ZWQ9ITB9dmFyIHM9e3R5cGU6ImNyZWF0ZSIsdG86ci5fZ3VpVVJMLGZyb206ci5faWRtVVJMLGJvZHk6e3ZhbHVlOntpZGVudGl0aWVzOmUsaWRwczp0fX19LHU9ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzKTsKLy9hZGQgbGlzdGVuZXIgd2l0aG91dCB0aW1vdXQKdHJ5e3IuX21lc3NhZ2VCdXMuYWRkUmVzcG9uc2VMaXN0ZW5lcihyLl9pZG1VUkwsdSxmdW5jdGlvbihlKXsKLy8gdG9kbzogdG8gcmV0dXJuIHRoZSB1c2VyIFVSTCBhbmQgbm90IHRoZSBlbWFpbCBvciBpZGVudGlmaWVyCmlmKHIuX21lc3NhZ2VCdXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLl9pZG1VUkwsdSksMjAwPT09ZS5ib2R5LmNvZGUpe3ZhciB0PWUuYm9keTtTLmxvZygic2VsZWN0ZWRJZGVudGl0eTogIix0LnZhbHVlKSxuKHQpfWVsc2UgaSgiZXJyb3Igb24gcmVxdWVzdGluZyBhbiBpZGVudGl0eSB0byB0aGUgR1VJIil9KX1jYXRjaChlKXtpKCJJbiBtZXRob2QgY2FsbElkZW50aXR5TW9kdWxlRnVuYyBlcnJvcjogIitlKX19KX19LHtrZXk6ImNhbGxHZW5lcmF0ZU1ldGhvZHMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLGkpe3ZhciBvPXZvaWQgMCxhPXZvaWQgMDsKLy9nZW5lcmF0ZXMgdGhlIFJTQSBrZXkgcGFpcgpyLmNyeXB0by5nZW5lcmF0ZVJTQUtleVBhaXIoKS50aGVuKGZ1bmN0aW9uKG4pe3JldHVybiBvPWJ0b2Eobi5wdWJsaWMpLGE9bixyLmdlbmVyYXRlQXNzZXJ0aW9uKG8sdCwiIixhLGUpfSkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gUy5sb2coWyIiXSksci5teUhpbnQ9bixyLmdlbmVyYXRlQXNzZXJ0aW9uKG8sdCxuLGEsZSl9KS50aGVuKGZ1bmN0aW9uKGUpe2U/bihlKTppKCJFcnJvciBvbiBvYnRhaW5pbmcgSWRlbnRpdHkiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1MuZXJyb3IoZSksaShlKX0pfSl9fSx7a2V5OiJzZWxlY3RJZGVudGl0eUZvckh5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7Ci8vZ2VuZXJhdGVzIHRoZSBSU0Ega2V5IHBhaXIKbi5jcnlwdG8uZ2VuZXJhdGVSU0FLZXlQYWlyKCkudGhlbihmdW5jdGlvbihhKXt2YXIgcz1idG9hKGEucHVibGljKTtuLnNlbmRHZW5lcmF0ZU1lc3NhZ2UocyxlLHIsdCkudGhlbihmdW5jdGlvbihyKXtyLmhhc093blByb3BlcnR5KCJhc3NlcnRpb24iKT8KLy8gaWRlbnRpdHkgd2FzIGxvZ2dlZCBpbiwganVzdCBzYXZlIGl0Cm4uc3RvcmVJZGVudGl0eShyLGEpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9LGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSk6ci5oYXNPd25Qcm9wZXJ0eSgibG9naW5VcmwiKT8KLy8gaWRlbnRpdHkgd2FzIG5vdCBsb2dnZWQgaW4Kbi5sb2dpblNlbGVjdGVkSWRlbnRpdHkocyxlLHQsYSxyLmxvZ2luVXJsKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBpKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX0pOigKLy8geW91IHNob3VsZCBuZXZlciBnZXQgaGVyZSwgaWYgeW91IGRvIHRoZW4gdGhlIElkUCBQcm94eSBpcyBub3Qgd2VsbCBpbXBsZW1lbnRlZAovLyBsb2cuZXJyb3IoJ0dlbmVyYXRlQXNzZXJ0aW9uIHJldHVybmVkIGludmFsaWQgcmVzcG9uc2UuJyk7ClMubG9nKCJQcm9jZWVkaW5nIGJ5IGxvZ2dpbmcgaW4uIiksbi5nZW5lcmF0ZVNlbGVjdGVkSWRlbnRpdHkocyxlLHQsYSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gaShlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9KSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBzZWxlY3RJZGVudGl0eUZvckh5cGVydHkgZnJvbSBtZXRob2Qgc2VuZEdlbmVyYXRlTWVzc2FnZSBlcnJvcjogICIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIHNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eSBmcm9tIG1ldGhvZCBnZW5lcmF0ZVJTQUtleVBhaXIgZXJyb3I6ICAiK2UpfSl9KX19LHtrZXk6InNlbGVjdElkZW50aXR5RnJvbUdVSSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPXQuZ2V0SWRlbnRpdGllc1RvQ2hvb3NlKCk7dC5yZXF1ZXN0SWRlbnRpdHlUb0dVSShpLmlkZW50aXRpZXMsaS5pZHBzKS50aGVuKGZ1bmN0aW9uKGkpe2lmKCJpZGVudGl0eSI9PT1pLnR5cGUpewovLyAgbGV0IGNob3NlbklEID0gZ2V0VXNlclVSTEZyb21FbWFpbCh2YWx1ZS52YWx1ZSk7Ci8vIGhhY2sgd2hpbGUgdGhlIHVzZXIgdXJsIGlzIG5vdCByZXR1cm5lZCBmcm9tIHJlcXVlc3RJZGVudGl0eVRvR1VJOwp2YXIgbz0idXNlcjovLyIrdC5jdXJyZW50SWRlbnRpdHkuaWRwKyIvIitpLnZhbHVlO3QuZGVmYXVsdElkZW50aXR5PXQuY3VycmVudElkZW50aXR5OwovLyByZXR1cm5zIHRoZSBpZGVudGl0eSBpbmZvIGZyb20gdGhlIGNob3NlbiBpZApmb3IodmFyIGEgaW4gdC5pZGVudGl0aWVzKWlmKHQuaWRlbnRpdGllc1thXS5pZGVudGl0eT09PW8pcmV0dXJuIHIodC5pZGVudGl0aWVzW2FdLm1lc3NhZ2VJbmZvKTtyZXR1cm4gbigibm8gaWRlbnRpdHkgd2FzIGZvdW5kIC4iKX1pZigiaWRwIiE9PWkudHlwZSlyZXR1cm4gbigiZXJyb3Igb24gR1VJIHJlY2VpdmVkIG1lc3NhZ2UuIik7dC5jYWxsR2VuZXJhdGVNZXRob2RzKGkudmFsdWUsZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gcihlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk9uIHNlbGVjdElkZW50aXR5RnJvbUdVSSBmcm9tIG1ldGhvZCByZXF1ZXN0SWRlbnRpdHlUb0dVSSBlcnJvcjogICIrZSl9KX0pfX0se2tleToic3RvcmVJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7aWYoIWUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbiIpKXJldHVybiBpKCJTdG9yZUlkZW50aXR5OiBpbnB1dCBpcyBub3QgYW4gaWRlbnRpdHkgYXNzZXJ0aW9uLiIpO3ZhciBvPWUuYXNzZXJ0aW9uLnNwbGl0KCIuIikscz12b2lkIDA7Ci8vdmVyaWZ5IGlmIHRoZSB0b2tlbiBjb250YWlucyB0aGUgMyBjb21wb25lbnRzLCBvciBqdXN0IHRoZSBhc3NlcnRpb24KdHJ5e3M9b1sxXT9KU09OLnBhcnNlKGF0b2Iob1sxXSkpOkpTT04ucGFyc2UoYXRvYihlLmFzc2VydGlvbikpfWNhdGNoKGUpe3JldHVybiBpKCJJbiBzdG9yZUlkZW50aXR5LCBlcnJvciBwYXJzaW5nIGFzc2VydGlvbjogIitlKX12YXIgdT12b2lkIDA7Ci8vVE9ETyByZW1vdmUgdGhlIHZlcmlmaWNhdGlvbiBhbmQgcmVtb3ZlIHRoZSB0b2tlbklESlNPTiBmcm9tIHRoZSBnb29nbGUgaWRwUHJveHk7CnU9cy50b2tlbklESlNPTj9zLnRva2VuSURKU09OOnMsdS5pZHA9ZS5pZHA7dmFyIGM9dS5lbWFpbHx8dS5zdWIsZj0idXNlcjovLyIrdS5pZHAuZG9tYWluKyIvIitjO2UuaWRlbnRpdHk9ZixyLmlkZW50aXR5LmFkZElkZW50aXR5KGUpOwovLyBjaGVjayBpZiBleGlzdHMgYW55IGluZm9Ub2tlbiBpbiB0aGUgcmVzdWx0IHJlY2VpdmVkCnZhciBsPWUuaW5mb1Rva2VuP2UuaW5mb1Rva2VuOnt9LGQ9dS5uYW1lfHxjLnN1YnN0cmluZygwLGMuaW5kZXhPZigiQCIpKSxwPXt1c2VybmFtZTpjLGNuOmQsYXZhdGFyOmwucGljdHVyZSxsb2NhbGU6bC5sb2NhbGUsdXNlclVSTDpmfSx5PXZvaWQgMDtsLmhhc093blByb3BlcnR5KCJleHAiKT95PWwuZXhwOmUuaGFzT3duUHJvcGVydHkoImluZm8iKSYmZS5pbmZvLmhhc093blByb3BlcnR5KCJleHBpcmVzIikmJih5PWUuaW5mby5leHBpcmVzKTsKLy9jcmVhdGlvbiBvZiBhIG5ldyBKU09OIHdpdGggdGhlIGlkZW50aXR5IHRvIHNlbmQgdmlhIG1lc3NhZ2VzCnZhciBoPXt1c2VyUHJvZmlsZTpwLGlkcDplLmlkcC5kb21haW4sYXNzZXJ0aW9uOmUuYXNzZXJ0aW9uLGV4cGlyZXM6eX07ZS5tZXNzYWdlSW5mbz1oLGUua2V5UGFpcj10LHIuY3VycmVudElkZW50aXR5PWg7Ci8vdmVyaWZ5IGlmIHRoZSBpZCBhbHJlYWR5IGV4aXN0cy4gSWYgYWxyZWFkeSBleGlzdHMgdGhlbiBkbyBub3QgYWRkIHRvIHRoZSBpZGVudGl0aWVzIGxpc3Q7Ci8vdG8gYmUgcmV2aWV3ZWQgc2luY2UgdGhlIGlkZW50aXR5IGNvbnRhaW5zIGRhdGEgbGlrZSB0aGUgYXNzc3J0aW9uIGFuZCBsZXkgcGFpcnMgdGhhdCBtYXkgYmUgZGlmZmVyZW50IGlmIGdlbmVyYXRlZCB0d2ljZQp2YXIgdj0hMSxnPXZvaWQgMDtmb3IodmFyIGIgaW4gci5pZGVudGl0aWVzKXIuaWRlbnRpdGllc1tiXS5pZGVudGl0eT09PWUuaWRlbnRpdHkmJih2PSEwLGc9ci5pZGVudGl0aWVzW2JdKTtpZih2KXsKLy8gVE9ETzogbWF5YmUgb3ZlcndyaXRlIHRoZSBpZGVudGl0eQpnPSgwLGEuZGVmYXVsdCkoZyxlKSxuKGcubWVzc2FnZUluZm8pO3ZhciBtPSExOwovL2NoZWNrIGlmIHRoZSBpZGVudGl0eSBleGlzdHMgaW4gZW1haWxMaXN0LCBpZiBub3QgYWRkIGl0Ci8vVGhpcyBpcyB1c2VmdWwgaWYgYW4gaWRlbnRpdHkgd2FzIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCBidXQgd2FzIGxhdGVyIHVucmVnaXN0ZXJlZApmb3IodmFyIF8gaW4gci5lbWFpbHNMaXN0KWlmKHIuZW1haWxzTGlzdFtfXT09PWMpe209ITA7YnJlYWt9bXx8ci5lbWFpbHNMaXN0LnB1c2goYyl9ZWxzZSByLmVtYWlsc0xpc3QucHVzaChjKSxyLmlkZW50aXRpZXMucHVzaChlKTtyLnN0b3JhZ2VNYW5hZ2VyLnNldCgiaWRNb2R1bGU6aWRlbnRpdGllcyIsMCxyLmlkZW50aXRpZXMpLnRoZW4oZnVuY3Rpb24oKXtyLmlkZW50aXRpZXNMaXN0W3UuaWRwLmRvbWFpbl0mJihyLmlkZW50aXRpZXNMaXN0W3UuaWRwLmRvbWFpbl0uc3RhdHVzPSJjcmVhdGVkIiksbihoKX0pfSl9fSx7a2V5OiJsb2dpblNlbGVjdGVkSWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIG89dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihhLHMpe28uY2FsbElkZW50aXR5TW9kdWxlRnVuYygib3BlblBvcHVwIix7dXJscmVjZWl2ZWQ6aX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGZ1bmN0aW9uKGUpe3JldHVybiBTLmVycm9yKCJFcnJvciB3aGlsZSBsb2dnaW5nIGluIGZvciB0aGUgc2VsZWN0ZWQgaWRlbnRpdHkuIikscyhlKX0pLnRoZW4oZnVuY3Rpb24oaSl7by5zZW5kR2VuZXJhdGVNZXNzYWdlKGUsdCxpLHIpLnRoZW4oZnVuY3Rpb24oZSl7aWYoIWUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbiIpKXJldHVybiBTLmVycm9yKCJFcnJvciB3aGlsZSBsb2dnaW5nIGluIGZvciB0aGUgc2VsZWN0ZWQgaWRlbnRpdHkuIikscygiQ291bGQgbm90IGdlbmVyYXRlIGEgdmFsaWQgYXNzZXJ0aW9uIGZvciBzZWxlY3RlZCBpZGVudGl0eS4iKTtvLnN0b3JlSWRlbnRpdHkoZSxuKS50aGVuKGZ1bmN0aW9uKGUpe2EoIkxvZ2luIHdhcyBzdWNjZXNzZnVsbCIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cygiTG9naW4gaGFzIGZhaWxlZDoiK2UpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtzKCJPbiBsb2dpblNlbGVjdGVkSWRlbnRpdHkgZnJvbSBtZXRob2Qgc2VuZEdlbmVyYXRlTWVzc2FnZSBlcnJvcjogICIrZSl9KX0pfSl9fSx7a2V5OiJnZW5lcmF0ZVNlbGVjdGVkSWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obyxhKXtpLmdlbmVyYXRlQXNzZXJ0aW9uKGUsdCwiIixuLHIpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGV9KS50aGVuKGZ1bmN0aW9uKG8pe3JldHVybiBpLmdlbmVyYXRlQXNzZXJ0aW9uKGUsdCxvLG4scil9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlP28oZSk6YSgiRXJyb3Igb24gb2J0YWluaW5nIElkZW50aXR5Iil9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gUy5lcnJvcihlKSxhKGUpfSl9KX19LHtrZXk6ImNhbGxJZGVudGl0eU1vZHVsZUZ1bmMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLGkpe3ZhciBvPXt0eXBlOiJleGVjdXRlIix0bzpyLl9ndWlVUkwsZnJvbTpyLl9pZG1VUkwsYm9keTp7cmVzb3VyY2U6ImlkZW50aXR5IixtZXRob2Q6ZSxwYXJhbXM6dH19LGE9ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvKTsKLy9hZGQgbGlzdGVuZXIgd2l0aG91dCB0aW1vdXQKdHJ5e3IuX21lc3NhZ2VCdXMuYWRkUmVzcG9uc2VMaXN0ZW5lcihyLl9pZG1VUkwsYSxmdW5jdGlvbihlKXtyLl9tZXNzYWdlQnVzLnJlbW92ZVJlc3BvbnNlTGlzdGVuZXIoci5faWRtVVJMLGEpO3ZhciB0PWUuYm9keS52YWx1ZTtuKHQpfSl9Y2F0Y2goZSl7aSgiSW4gbWV0aG9kIGNhbGxJZGVudGl0eU1vZHVsZUZ1bmMgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJlbmNyeXB0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7Uy5pbmZvKCJlbmNyeXB0TWVzc2FnZTptZXNzYWdlIixlKTt2YXIgdD10aGlzO3JldHVybiBTLmxvZygiZW5jcnlwdCBtZXNzYWdlICIpLG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz0iaGFuZHNoYWtlIj09PWUudHlwZTsKLy9pZiBpcyBub3QgdG8gYXBwbHkgZW5jcnlwdGlvbiwgdGhlbiByZXR1cm5zIHJlc29sdmUKaWYoIXQuaXNUb1VzZUVuY3J5cHRpb24mJiFvKXJldHVybiBTLmluZm8oImVuY3J5cHRpb24gZGlzYWJsZWQiKSxyKGUpO3ZhciBhPXQuX3BhcnNlTWVzc2FnZVVSTChlLnRvKSxzPSgwLGguaXNEYXRhT2JqZWN0VVJMKShhKSx1PSgwLGguaXNMZWdhY3kpKGUudG8pLGM9Imh5cGVydHkiPT09KDAsaC5kaXZpZGVVUkwpKGUuZnJvbSkudHlwZSxmPSJoeXBlcnR5Ij09PSgwLGguZGl2aWRlVVJMKShlLnRvKS50eXBlO2lmKCJ1cGRhdGUiPT09ZS50eXBlKXJldHVybiByKGUpO2lmKHUpcihlKTtlbHNlIGlmKGMmJmYpe3ZhciBsPXQuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlLmZyb20pO2lmKGwpewovLyBjaGVjayBpZiBleGlzdHMgYW55IGtleXMgYmV0d2VlbiB0d28gdXNlcnMKdmFyIGQ9dC5jaGF0S2V5c1tlLmZyb20rIjwtPiIrZS50b107aWYoZHx8KGQ9dC5fbmV3Q2hhdENyeXB0byhlLGwpLFMubG9nKCJjcmVhdGVDaGF0S2V5IGVuY3J5cHQiLGUuZnJvbStlLnRvKSx0LmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXT1kLGUuYm9keS5oYW5kc2hha2VQaGFzZT0ic3RhcnRIYW5kU2hha2UiKSxkLmF1dGhlbnRpY2F0ZWQmJiFvKXt2YXIgcD10LmNyeXB0by5nZW5lcmF0ZUlWKCk7dC5jcnlwdG8uZW5jcnlwdEFFUyhkLmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LGUuYm9keS52YWx1ZSxwKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBvPXQuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxlLmJvZHkudmFsdWUrcCxkLmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKTt0LmNyeXB0by5oYXNoSE1BQyhkLmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5LG8pLnRoZW4oZnVuY3Rpb24obyl7Ci8vIGxvZy5sb2coJ3Jlc3VsdCBvZiBoYXNoICcsIGhhc2gpOwp2YXIgYT17aXY6dC5jcnlwdG8uZW5jb2RlKHApLHZhbHVlOnQuY3J5cHRvLmVuY29kZShuKSxoYXNoOnQuY3J5cHRvLmVuY29kZShvKX07ZS5ib2R5LnZhbHVlPSgwLGkuZGVmYXVsdCkoYSkscihlKX0pfSl9ZWxzZSBvP3IoZSk6dC5fZG9IYW5kU2hha2VQaGFzZShlLGQpLnRoZW4oZnVuY3Rpb24ocil7dC5jaGF0S2V5c1tlLmZyb20rIjwtPiIrZS50b109ci5jaGF0S2V5cyx0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIubWVzc2FnZSksbigiZW5jcnlwdCBoYW5kc2hha2UgcHJvdG9jb2wgcGhhc2UgIil9KX1lbHNlIG4oIkluIGVuY3J5cHRNZXNzYWdlOiBIeXBlcnR5IG93bmVyIFVSTCB3YXMgbm90IGZvdW5kIil9ZWxzZSBjJiZzJiYoUy5sb2coImRhdGFPYmplY3QgdmFsdWUgdG8gZW5jcnlwdDogIixlLmJvZHkudmFsdWUpLFMubG9nKCJJZGVudGl0eU1vZHVsZSAtIGVuY3J5cHQgZnJvbSBoeXBlcnR5IHRvIGRhdGFvYmplY3QgIixlKSx0LnN0b3JhZ2VNYW5hZ2VyLmdldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIikudGhlbihmdW5jdGlvbihvKXt2YXIgcz1vP29bYV06bnVsbDt0LmRhdGFPYmplY3RzU3RvcmFnZS5nZXREYXRhT2JqZWN0KGEpLnRoZW4oZnVuY3Rpb24obyl7Ci8vaWYgbm8ga2V5IGV4aXN0cywgY3JlYXRlIGEgbmV3IG9uZSBpZiBpcyB0aGUgcmVwb3J0ZXIgb2YgZGF0YU9iamVjdAppZighcyYmby5yZXBvcnRlciYmby5yZXBvcnRlcj09PWUuZnJvbSl7dmFyIHU9dC5jcnlwdG8uZ2VuZXJhdGVSYW5kb20oKTt0LmRhdGFPYmplY3RTZXNzaW9uS2V5c1thXT17c2Vzc2lvbktleTp1LGlzVG9FbmNyeXB0OiEwfSx0LnN0b3JhZ2VNYW5hZ2VyLnNldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIiwwLHQuZGF0YU9iamVjdFNlc3Npb25LZXlzKS5jYXRjaChmdW5jdGlvbihlKXtuKCJPbiBlbmNyeXB0TWVzc2FnZSBmcm9tIG1ldGhvZCBzdG9yYWdlTWFuYWdlci5zZXQgZXJyb3I6ICIrZSl9KSxzPXQuZGF0YU9iamVjdFNlc3Npb25LZXlzW2FdfQovL2NoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBzZXNzaW9uIGtleSBmb3IgdGhlIGNoYXQgcm9vbQppZihzKQovLyBhbmQgaWYgaXMgdG8gYXBwbHkgZW5jcnlwdGlvbiwgZW5jcnlwdCB0aGUgbWVzc2FnZXMKaWYocy5pc1RvRW5jcnlwdCl7dmFyIGM9dC5jcnlwdG8uZ2VuZXJhdGVJVigpO3QuY3J5cHRvLmVuY3J5cHRBRVMocy5zZXNzaW9uS2V5LHQuY3J5cHRvLmVuY29kZSgoMCxpLmRlZmF1bHQpKGUuYm9keS52YWx1ZSkpLGMpLnRoZW4oZnVuY3Rpb24obil7dmFyIG89dC5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLGUuYm9keS52YWx1ZStjLHMuc2Vzc2lvbktleSk7dC5jcnlwdG8uaGFzaEhNQUMocy5zZXNzaW9uS2V5LG8pLnRoZW4oZnVuY3Rpb24obyl7Ci8vIGxvZy5sb2coJ2hhc2ggJywgaGFzaCk7CnZhciBhPXt2YWx1ZTp0LmNyeXB0by5lbmNvZGUobiksaXY6dC5jcnlwdG8uZW5jb2RlKGMpLGhhc2g6dC5jcnlwdG8uZW5jb2RlKG8pfTtlLmJvZHkudmFsdWU9KDAsaS5kZWZhdWx0KShhKSxyKGUpfSl9KX1lbHNlIHIoZSk7ZWxzZSBuKCJEYXRhIG9iamVjdCBrZXkgY291bGQgbm90IGJlIGRlZmluZWQ6IEZhaWxlZCB0byBkZWNyeXB0IG1lc3NhZ2UgIil9KS5jYXRjaChmdW5jdGlvbihlKXtuKCJPbiBlbmNyeXB0TWVzc2FnZSBmcm9tIG1ldGhvZCBkYXRhT2JqZWN0c1N0b3JhZ2UuZ2V0RGF0YU9iamVjdCBlcnJvcjogIitlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bigiT24gZW5jcnlwdE1lc3NhZ2UgZnJvbSBtZXRob2Qgc3RvcmFnZU1hbmFnZXIuZ2V0IGVycm9yOiAiK2UpfSkpfSl9fSx7a2V5OiJlbmNyeXB0RGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7Uy5pbmZvKCJkYXRhT2JqZWN0IHZhbHVlIHRvIGVuY3J5cHQ6ICIsZSk7dmFyIGE9ci5fcGFyc2VNZXNzYWdlVVJMKHQpO3Iuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBzPXQ/dFthXTpudWxsOwovL2NoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBzZXNzaW9uIGtleSBmb3IgdGhlIGNoYXQgcm9vbQppZighcylyZXR1cm4gbygiTm8gZGF0YU9iamVjdEtleSBmb3IgdGhpcyBkYXRhT2JqZWN0VVJMOiIsYSk7Ci8vIGFuZCBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uLCBlbmNyeXB0IHRoZSBtZXNzYWdlcwppZighcy5pc1RvRW5jcnlwdClyZXR1cm4gUy5pbmZvKCJUaGUgZGF0YU9iamVjdCBpcyBub3QgZW5jcnlwdGVkIiksbihlKTt2YXIgdT1yLmNyeXB0by5nZW5lcmF0ZUlWKCk7ci5jcnlwdG8uZW5jcnlwdEFFUyhzLnNlc3Npb25LZXksci5jcnlwdG8uZW5jb2RlKCgwLGkuZGVmYXVsdCkoZSkpLHUpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9e3ZhbHVlOnIuY3J5cHRvLmVuY29kZShlKSxpdjpyLmNyeXB0by5lbmNvZGUodSl9O3JldHVybiBTLmxvZygiZW5jcnlwdGVkIGRhdGFPYmplY3QiLHQpLG4odCl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBlbmNyeXB0RGF0YU9iamVjdCBmcm9tIG1ldGhvZCBlbmNyeXB0QUVTIGVycm9yOiAiK2UpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBlbmNyeXB0RGF0YU9iamVjdCBmcm9tIG1ldGhvZCBzdG9yYWdlTWFuYWdlci5nZXQgZXJyb3I6ICIrZSl9KX0pfX0se2tleToiZGVjcnlwdE1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIFMuaW5mbygiZGVjcnlwdE1lc3NhZ2U6bWVzc2FnZSIsZSksbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPSJoYW5kc2hha2UiPT09ZS50eXBlOwovL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQppZighdC5pc1RvVXNlRW5jcnlwdGlvbiYmIWkpCi8vIGxvZy5sb2coJ2RlY3J5cHRpb24gZGlzYWJsZWQnKTsKcmV0dXJuIHIoZSk7dmFyIG89dC5fcGFyc2VNZXNzYWdlVVJMKGUudG8pLGE9KDAsaC5pc0RhdGFPYmplY3RVUkwpKG8pLHM9Imh5cGVydHkiPT09KDAsaC5kaXZpZGVVUkwpKGUuZnJvbSkudHlwZSx1PSJoeXBlcnR5Ij09PSgwLGguZGl2aWRlVVJMKShlLnRvKS50eXBlO2lmKCJ1cGRhdGUiPT09ZS50eXBlKXJldHVybiByKGUpOwovL2lzIGlzIGh5cGVydHkgdG8gaHlwZXJ0eSBjb21tdW5pY2F0aW9uCmlmKHMmJnUpewovLyBsb2cubG9nKCdkZWNyeXB0IGh5cGVydHkgdG8gaHlwZXJ0eScpOwp2YXIgYz10Ll9yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoZS50byk7aWYoYyl7dmFyIGY9dC5jaGF0S2V5c1tlLnRvKyI8LT4iK2UuZnJvbV07aWYoZnx8KGY9dC5fbmV3Q2hhdENyeXB0byhlLGMsImRlY3J5cHQiKSx0LmNoYXRLZXlzW2UudG8rIjwtPiIrZS5mcm9tXT1mKSxmLmF1dGhlbnRpY2F0ZWQmJiFpKXt2YXIgbD1KU09OLnBhcnNlKGUuYm9keS52YWx1ZSksZD10LmNyeXB0by5kZWNvZGUobC5pdikscD10LmNyeXB0by5kZWNvZGUobC52YWx1ZSkseT10LmNyeXB0by5kZWNvZGUobC5oYXNoKTt0LmNyeXB0by5kZWNyeXB0QUVTKGYua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5LHAsZCkudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygnZGVjcnlwdGVkIHZhbHVlICcsIGRlY3J5cHRlZERhdGEpOwplLmJvZHkudmFsdWU9bjt2YXIgaT10Ll9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsbitkKTt0LmNyeXB0by52ZXJpZnlITUFDKGYua2V5cy5oeXBlcnR5VG9IYXNoS2V5LGkseSkudGhlbihmdW5jdGlvbih0KXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIGhhc2ggdmVyaWZpY2F0aW9uISAnLCByZXN1bHQpOwplLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eT0hMCxyKGUpfSl9KX1lbHNlIGk/dC5fZG9IYW5kU2hha2VQaGFzZShlLGYpLnRoZW4oZnVuY3Rpb24ocil7Ci8vaWYgaXQgd2FzIHN0YXJ0ZWQgYnkgZG9NdXR1YWxBdXRoZW50aWNhdGlvbiB0aGVuIGVuZHMgdGhlIHByb3RvY29sCiJoYW5kU2hha2VFbmQiPT09cj9uKCJkZWNyeXB0IGhhbmRzaGFrZSBwcm90b2NvbCBwaGFzZSAiKToodC5jaGF0S2V5c1tlLnRvKyI8LT4iK2UuZnJvbV09ci5jaGF0S2V5cyx0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIubWVzc2FnZSksbigiZGVjcnlwdCBoYW5kc2hha2UgcHJvdG9jb2wgcGhhc2UgIikpfSk6bigid3JvbmcgbWVzc2FnZSBkbyBkZWNyeXB0Iil9ZWxzZSBuKCJlcnJvciBvbiBkZWNyeXB0IG1lc3NhZ2UiKX1lbHNlIHMmJmE/Ci8vIGxvZy5sb2coJ2RhdGFPYmplY3QgdmFsdWUgdG8gZGVjcnlwdDogJywgbWVzc2FnZS5ib2R5KTsKdC5zdG9yYWdlTWFuYWdlci5nZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIpLnRoZW4oZnVuY3Rpb24obil7dmFyIGk9bj9uW29dOm51bGw7aWYoaSkKLy9jaGVjayBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uCmlmKGkuaXNUb0VuY3J5cHQpe3ZhciBhPXZvaWQgMDt0cnl7YT1KU09OLnBhcnNlKGUuYm9keS52YWx1ZSl9Y2F0Y2godCl7Ci8vIElmIHRoZSBtZXNzYWdlIGlzIG5vdCBhdXRoZW50aWNhdGVkIG9yIGhhZCBtdXR1YWwgYXV0aCBhY3RpdmUgc2hvdWxkIGNvbnRpbnVlCmE9ZS5ib2R5LnZhbHVlfWlmKCFhLmhhc093blByb3BlcnR5KCJpdiIpJiYhYS5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSYmIWEuaGFzT3duUHJvcGVydHkoImhhc2giKSlyZXR1cm4gZS5ib2R5LmFzc2VydGVkSWRlbnRpdHk9ITAscihlKTt2YXIgcz10LmNyeXB0by5kZWNvZGUoYS5pdiksdT10LmNyeXB0by5kZWNvZGUoYS52YWx1ZSksYz10LmNyeXB0by5kZWNvZGUoYS5oYXNoKTt0LmNyeXB0by5kZWNyeXB0QUVTKGkuc2Vzc2lvbktleSx1LHMpLnRoZW4oZnVuY3Rpb24obil7dmFyIG89SlNPTi5wYXJzZShhdG9iKG4pKTsKLy8gbG9nLmxvZygnZGVjcnlwdGVkIFZhbHVlLCcsIHBhcnNlZFZhbHVlKTsKZS5ib2R5LnZhbHVlPW87dmFyIGE9dC5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG8rcyk7dC5jcnlwdG8udmVyaWZ5SE1BQyhpLnNlc3Npb25LZXksYSxjKS50aGVuKGZ1bmN0aW9uKHQpewovLyBsb2cubG9nKCdyZXN1bHQgb2YgaGFzaCB2ZXJpZmljYXRpb24hICcsIHJlc3VsdCk7CmUuYm9keS5hc3NlcnRlZElkZW50aXR5PSEwLHIoZSl9KX0pfWVsc2UgZS5ib2R5LmFzc2VydGVkSWRlbnRpdHk9ITAscihlKTtlbHNlIGUuYm9keS5hc3NlcnRlZElkZW50aXR5PSEwLHIoZSl9KTpuKCJ3cm9uZyBtZXNzYWdlIHRvIGRlY3J5cHQiKX0pfX0se2tleToiZGVjcnlwdERhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLGkpewovL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQppZighci5pc1RvVXNlRW5jcnlwdGlvbikKLy8gbG9nLmxvZygnZGVjcnlwdGlvbiBkaXNhYmxlZCcpOwpyZXR1cm4gbihlKTt2YXIgbz1yLl9wYXJzZU1lc3NhZ2VVUkwodCk7Ci8vIGxvZy5sb2coJ2RhdGFPYmplY3QgdmFsdWUgdG8gZGVjcnlwdDogJywgZGF0YU9iamVjdCk7CnIuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBhPXQ/dFtvXTpudWxsO2lmKCFhKXJldHVybiBpKCJObyBkYXRhT2JqZWN0S2V5IGZvciB0aGlzIGRhdGFPYmplY3RVUkw6IixvKTsKLy9jaGVjayBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uCmlmKCFhLmlzVG9FbmNyeXB0KQovLyBsb2cubG9nKCdUaGUgZGF0YU9iamVjdCBpcyBub3QgZW5jcnlwdGVkJyk7CnJldHVybiBuKGUpO3ZhciBzPXIuY3J5cHRvLmRlY29kZShlLml2KSx1PXIuY3J5cHRvLmRlY29kZShlLnZhbHVlKTtyLmNyeXB0by5kZWNyeXB0QUVTKGEuc2Vzc2lvbktleSx1LHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9SlNPTi5wYXJzZShhdG9iKGUpKSxpPXt2YWx1ZTp0LGl2OnIuY3J5cHRvLmVuY29kZShzKX07Ci8vIGxvZy5sb2coJ2RlY3J5cHRlZCBkYXRhT2JqZWN0LCcsIG5ld1ZhbHVlKTsKcmV0dXJuIG4oaSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKCJPbiBkZWNyeXB0RGF0YU9iamVjdCBmcm9tIG1ldGhvZCBlbmNyeXB0QUVTIGVycm9yOiAiK2UpfSl9KX0pfX0se2tleToiZG9NdXR1YWxBdXRoZW50aWNhdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtTLmluZm8oImRvTXV0dWFsQXV0aGVudGljYXRpb246c2VuZGVyICIsZSksUy5pbmZvKCJkb011dHVhbEF1dGhlbnRpY2F0aW9uOnJlY2VpdmVyICIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLGkpe3ZhciBvPXZvaWQgMCxhPXIucmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKGUpO2EmJihvPWUsZT1hKTt2YXIgcz17dG86dCxmcm9tOmUsY2FsbGJhY2s6dm9pZCAwLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzdGFydEhhbmRTaGFrZSIsaWdub3JlOiJpZ25vcmVNZXNzYWdlIn19O2lmKCFlfHwhdClyZXR1cm4gaSgic2VuZGVyIG9yIHJlY2VpdmVyIG1pc3Npbmcgb24gZG9NdXR1YWxBdXRoZW50aWNhdGlvbiIpO3ZhciB1PXIuY2hhdEtleXNbZSsiPC0+Iit0XSxjPXIuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlKTtpZihjKXtpZighdSl7Ci8vIGNhbGxiYWNrIHRvIHJlc29sdmUgd2hlbiBmaW5pc2ggdGhlIG11dHVhbCBhdXRoZW50aWNhdGlvbgp2YXIgZj1mdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY2FsbGJhY2sgdmFsdWU6JywgdmFsdWUpOwpuKGUpfTtzLmNhbGxiYWNrPWYscy5kYXRhT2JqZWN0VVJMPW8sdT1yLl9uZXdDaGF0Q3J5cHRvKHMsYyksci5jaGF0S2V5c1tlKyI8LT4iK3RdPXV9aWYodS5hdXRoZW50aWNhdGVkKXt2YXIgbD17dG86ZSxmcm9tOnR9O3UuZGF0YU9iamVjdFVSTD1vLHIuX3NlbmRSZXBvcnRlclNlc3Npb25LZXkobCx1KS50aGVuKGZ1bmN0aW9uKGUpe3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZS5tZXNzYWdlKSxuKCJleGNoYW5nZSBvZiBjaGF0IHNlc3Npb25LZXkgaW5pdGlhdGVkIil9KS5jYXRjaChmdW5jdGlvbihlKXtpKCJPbiBkb011dHVhbEF1dGhlbnRpY2F0aW9uIGZyb20gbWV0aG9kIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGVycm9yOiAiK2UpfSl9ZWxzZSByLl9kb0hhbmRTaGFrZVBoYXNlKHMsdSl9ZWxzZSBpKCJNdXR1YWwgYXV0aGVudGljYXRpb24gZXJyb3I6IEh5cGVydHkgb3duZXIgY291bGQgbm90IGJlIHJlc29sdmVkIil9KX19LHtrZXk6ImdldFRva2VuIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixpKXsKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSBmcm9tLT4nLCBmcm9tVVJMLCAnICB0by0+JywgdG9VcmwpOwp0PyhTLmxvZygidG9VcmwiLHQpLHIucmVnaXN0cnkuaXNMZWdhY3kodCkudGhlbihmdW5jdGlvbihvKXsKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSBpc0xFR0FDWTogJywgcmVzdWx0KTsKaWYobyl7Ci8vIFRPRE86IGNoZWNrIGlmIGluIHRoZSBmdXR1cmUgb3RoZXIgbGVnYWN5IGh5cGVydGllcyBoYXZlIGV4cGlyYXRpb24gdGltZXMKLy8gaWYgc28gdGhlIGNoZWNrIHNob3VsZCBiZSBtYWRlIGhlcmUgKG9yIGluIHRoZSBnZXRBY2Nlc3NUb2tlbiBmdW5jdGlvbikKdmFyIGE9ci5nZXRBY2Nlc3NUb2tlbih0KTtpZihhKXJldHVybiBuKGEpO3ZhciBzPSgwLGguZ2V0VXNlcklkZW50aXR5RG9tYWluKSh0KTsKLy8gY2hlY2sgaWYgcHJvY2VzcyB0byBnZXQgdG9rZW4gaGFzIGFscmVhZHkgc3RhcnRlZApyLmlkZW50aXRpZXNMaXN0W3NdJiYiaW4tcHJvZ3Jlc3MiPT09ci5pZGVudGl0aWVzTGlzdFtzXS5zdGF0dXM/Ci8vIFRoZSBwcm9jZXNzIHRvIGdldCB0aGUgdG9rZW4gaGFzIGFscmVhZHkgc3RhcnRlZCwgbGV0J3Mgd2FpdCBieSB3YXRjaGluZyBpdHMgc3RhdHVzCnIud2F0Y2hpbmdZb3Uub2JzZXJ2ZSgiaWRlbnRpdGllc0xpc3QiLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dICBpZGVudGl0aWVzTGlzdCBjaGFuZ2VkICcgKyBfdGhpcy5pZGVudGl0aWVzTGlzdCk7CnZhciBpPWUua2V5cGF0aDtpZihpLmluY2x1ZGVzKCJzdGF0dXMiKSYmKGk9aS5yZXBsYWNlKCIuc3RhdHVzIiwiIikpLGk9PT1zJiYic3RhdHVzIj09PWUubmFtZSYmImNyZWF0ZWQiPT09ZS5uZXdWYWx1ZSkKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSB0b2tlbiBpcyBjcmVhdGVkICcgKyBfdGhpcy5pZGVudGl0aWVzTGlzdFtkb21haW5dKTsKcmV0dXJuIG4oci5nZXRBY2Nlc3NUb2tlbih0KSl9KTooCi8vVG9rZW4gZG9lcyBub3QgZXhpc3QgYW5kIHRoZSBwcm9jZXNzIHRvIGdldCBoYXMgbm90IHN0YXJ0ZWQgeWV0CnIuaWRlbnRpdGllc0xpc3Rbc109e3N0YXR1czoiaW4tcHJvZ3Jlc3MifSwKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSBmb3ItPiAnLCBkb21haW4pOwpyLmNhbGxHZW5lcmF0ZU1ldGhvZHMocykudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSBDYWxsR2VuZXJhdGVtZXRob2RzJywgdmFsdWUpOwp2YXIgbz1yLmdldEFjY2Vzc1Rva2VuKHQpO3JldHVybiBvP24obyk6aSgiTm8gQWNjZXNzIHRva2VuIGZvdW5kIil9LGZ1bmN0aW9uKGUpe3JldHVybiBTLmVycm9yKCJbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGVycm9yIENhbGxHZW5lcmF0ZW1ldGhvZHMiKSxpKGUpfSkpfWVsc2Ugci5fZ2V0VmFsaWRUb2tlbihlKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKCJPbiBnZXRUb2tlbiBmcm9tIG1ldGhvZCBfZ2V0VmFsaWRUb2tlbiBlcnJvcjogIitlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7aSgiT24gZ2V0VG9rZW4gZnJvbSBtZXRob2QgaXNMZWdhY3kgZXJyb3I6ICIrZSl9KSk6ci5fZ2V0VmFsaWRUb2tlbihlKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX0se2tleToiZ2V0SWRUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7Uy5pbmZvKCJnZXRJZFRva2VuOmh5cGVydHlVUkwgIixlKTt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYoImh5cGVydHkiIT09ZS5zcGxpdCgiOi8vIilbMF0pdC5fZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0KGUpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIGk9dC5yZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoZSk7aWYoIWkpcmV0dXJuIG4oIm5vIGlkZW50aXR5IHdhcyBmb3VuZCAiKTtmb3IodmFyIG8gaW4gdC5pZGVudGl0aWVzKXt2YXIgYT10LmlkZW50aXRpZXNbb107aWYoYS5pZGVudGl0eT09PWkpcmV0dXJuIHIoYS5tZXNzYWdlSW5mbyl9fSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcigibm8gaWRlbnRpdHkgd2FzIGZvdW5kOiAiLGUpLG4oZSl9KTtlbHNle3ZhciBpPXQucmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUpO2lmKCFpKXJldHVybiBuKCJubyBpZGVudGl0eSB3YXMgZm91bmQuIik7Zm9yKHZhciBvIGluIHQuaWRlbnRpdGllcyl7dmFyIGE9dC5pZGVudGl0aWVzW29dO2lmKGEuaWRlbnRpdHk9PT1pKQovLyBUT0RPIGNoZWNrIHRoaXMgZ2V0SWRUb2tlbiB3aGVuIHdlIHJ1biBvbiBub2RlanMgZW52aXJvbm1lbnQ7Ci8vIFRPRE8gY2hlY2sgdGhpcyBnZXRJZFRva2VuIHdoZW4gd2UgcnVuIG9uIG5vZGVqcyBlbnZpcm9ubWVudDsKLy9oYWNrIHdoaWxlIGlkbSBpcyBub3QgcmVlc3R1Y3R1cmVkCnJldHVybiBhLmhhc093blByb3BlcnR5KCJtZXNzYWdlSW5mbyIpP2EubWVzc2FnZUluZm8uaGFzT3duUHJvcGVydHkoImFzc2VydGlvbiIpP3IoYS5tZXNzYWdlSW5mbyk6KGEubWVzc2FnZUluZm8uYXNzZXJ0aW9uPWEuYXNzZXJ0aW9uLHIoYS5tZXNzYWdlSW5mbykpOnIoYSl9fX0pfX0se2tleToiZ2V0QWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oMCxoLmRpdmlkZVVSTCkoZSkuZG9tYWluO2UuaW5jbHVkZXMoInByb3Rvc3R1YiIpJiYocj1yLnJlcGxhY2Uoci5zcGxpdCgiLiIpWzBdKyIuIiwiIikpO3ZhciBuPXZvaWQgMCxpPXZvaWQgMCxvPXQuX3NlY29uZHNfc2luY2VfZXBvY2goKTtmb3IodmFyIGEgaW4gdC5pZGVudGl0aWVzKXt2YXIgcz10LmlkZW50aXRpZXNbYV07aWYocy5oYXNPd25Qcm9wZXJ0eSgiaW50ZXJ3b3JraW5nIikmJnMuaW50ZXJ3b3JraW5nLmRvbWFpbj09PXIpCi8vIGNoZWNrIGlmIHRoZXJlIGlzIGV4cGlyYXRpb24gdGltZQovLyBjaGVjayBpZiB0aGVyZSBpcyBleHBpcmF0aW9uIHRpbWUKLy8gZWxzZSB0aGlzIGFjY2VzcyB0b2tlbiBoYXMgbm8gZXhwaXJhdGlvbiB0aW1lCnJldHVybiBzLmhhc093blByb3BlcnR5KCJpbmZvIikmJnMuaW5mby5oYXNPd25Qcm9wZXJ0eSgiZXhwaXJlcyIpJiYoaT1zLmluZm8uZXhwaXJlcyxvPj1pKT9udWxsOihzLmhhc093blByb3BlcnR5KCJtZXNzYWdlSW5mbyIpJiZzLm1lc3NhZ2VJbmZvLmhhc093blByb3BlcnR5KCJ1c2VyUHJvZmlsZSIpJiZzLm1lc3NhZ2VJbmZvLnVzZXJQcm9maWxlJiYobj17dXNlclByb2ZpbGU6cy5tZXNzYWdlSW5mby51c2VyUHJvZmlsZSxhY2Nlc3NfdG9rZW46cy5pbnRlcndvcmtpbmcuYWNjZXNzX3Rva2VufSxzLmhhc093blByb3BlcnR5KCJpbmZvVG9rZW4iKSYmcy5pbmZvVG9rZW4uaGFzT3duUHJvcGVydHkoImlkIikmJihuLnVzZXJQcm9maWxlLmlkPXMuaW5mb1Rva2VuLmlkKSksbil9cmV0dXJuIG51bGx9fSx7a2V5OiJzZW5kUmVmcmVzaE1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT10Ll9yZXNvbHZlRG9tYWluKGUuaWRwKSxvPXZvaWQgMCxhPXQuZ2V0SWRlbnRpdHkoZS51c2VyUHJvZmlsZS51c2VyVVJMKTtTLmluZm8oInNlbmRSZWZyZXNoTWVzc2FnZTpvbGRJZGVudGl0eSIsZSksbz17dHlwZToiZXhlY3V0ZSIsdG86aSxmcm9tOnQuX2lkbVVSTCxib2R5OntyZXNvdXJjZToiaWRlbnRpdHkiLG1ldGhvZDoicmVmcmVzaEFzc2VydGlvbiIscGFyYW1zOntpZGVudGl0eTphfX19O3RyeXt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LnZhbHVlO3IodCl9KX1jYXRjaChlKXtuKCJJbiBzZW5kUmVmcmVzaE1lc3NhZ2Ugb24gcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJzZW5kR2VuZXJhdGVNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG8sYSl7dmFyIHM9aS5fcmVzb2x2ZURvbWFpbihuKSx1PXZvaWQgMDt1PXt0eXBlOiJleGVjdXRlIix0bzpzLGZyb206aS5faWRtVVJMLGJvZHk6e3Jlc291cmNlOiJpZGVudGl0eSIsbWV0aG9kOiJnZW5lcmF0ZUFzc2VydGlvbiIscGFyYW1zOntjb250ZW50czplLG9yaWdpbjp0LHVzZXJuYW1lSGludDpyfX19O3RyeXtpLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHUsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ib2R5LnZhbHVlO28odCl9KX1jYXRjaChlKXthKCJJbiBzZW5kUmVmcmVzaE1lc3NhZ2Ugb24gcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJnZW5lcmF0ZUFzc2VydGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbz10aGlzOwovLyBsb2cubG9nKCdnZW5lcmF0ZUFzc2VydGlvbicpOwpyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihhLHMpe28uc2VuZEdlbmVyYXRlTWVzc2FnZShlLHQscixpKS50aGVuKGZ1bmN0aW9uKGUpe2UubG9naW5Vcmw/by5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCJvcGVuUG9wdXAiLHt1cmxyZWNlaXZlZDplLmxvZ2luVXJsfSkudGhlbihmdW5jdGlvbihlKXthKGUpfSxmdW5jdGlvbihlKXtzKGUpfSk6ZT9vLnN0b3JlSWRlbnRpdHkoZSxuKS50aGVuKGZ1bmN0aW9uKGUpe2EoZSl9LGZ1bmN0aW9uKGUpe3MoZSl9KTpzKCJlcnJvciBvbiBvYnRhaW5pbmcgaWRlbnRpdHkgaW5mb3JtYXRpb24iKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3MoIk9uIGdlbmVyYXRlQXNzZXJ0aW9uIGZyb20gbWV0aG9kIHNlbmRHZW5lcmF0ZU1lc3NhZ2UgZXJyb3I6ICIrZSl9KX0pfX0se2tleToidmFsaWRhdGVBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9bi5fcmVzb2x2ZURvbWFpbihyKSxvPXt0eXBlOiJleGVjdXRlIix0bzppLGZyb206bi5faWRtVVJMLGJvZHk6e3Jlc291cmNlOiJpZGVudGl0eSIsbWV0aG9kOiJ2YWxpZGF0ZUFzc2VydGlvbiIscGFyYW1zOnthc3NlcnRpb246ZSxvcmlnaW46dH19fTtyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihlLHQpe3RyeXtuLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24ocil7MjAwPT09ci5ib2R5LmNvZGU/ZShyLmJvZHkudmFsdWUpOnQoImVycm9yIixyLmJvZHkuY29kZSl9KX1jYXRjaChlKXt0KCJPbiB2YWxpZGF0ZUFzc2VydGlvbiBmcm9tIG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19LHtrZXk6ImFkZEdVSUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoZS5faWRtVVJMLGZ1bmN0aW9uKHQpe3ZhciByPXQuYm9keS5tZXRob2Qsbj12b2lkIDA7aWYoImRlcGxveUdVSSI9PT1yKW49ZS5kZXBsb3lHVUkoKTtlbHNlIGlmKCJnZXRJZGVudGl0aWVzVG9DaG9vc2UiPT09ciluPWUuZ2V0SWRlbnRpdGllc1RvQ2hvb3NlKCk7ZWxzZSBpZigidW5yZWdpc3RlcklkZW50aXR5Ij09PXIpe3ZhciBpPXQuYm9keS5wYXJhbXMuZW1haWw7bj1lLnVucmVnaXN0ZXJJZGVudGl0eShpKX1lbHNle2lmKCJnZW5lcmF0ZVJTQUtleVBhaXIiPT09cikKLy8gYmVjYXVzZSBnZW5lcmF0ZVJTQUtleVBhaXIgaXMgYSBwcm9taXNlCi8vIHdlIGhhdmUgdG8gc2VuZCB0aGUgbWVzc2FnZSBvbmx5IGFmdGVyIGdldHRpbmcgdGhlIGtleSBwYWlyCnJldHVybiB2b2lkIGUuY3J5cHRvLmdlbmVyYXRlUlNBS2V5UGFpcigpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOnIsY29kZToyMDB9LGk9e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpufTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpKX1jYXRjaChlKXtTLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBnZW5lcmF0ZVJTQUtleVBhaXIgbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pO2lmKCJzZW5kR2VuZXJhdGVNZXNzYWdlIj09PXIpe3ZhciBvPXQuYm9keS5wYXJhbXMuY29udGVudHMsYT10LmJvZHkucGFyYW1zLm9yaWdpbixzPXQuYm9keS5wYXJhbXMudXNlcm5hbWVIaW50LHU9dC5ib2R5LnBhcmFtcy5pZHBEb21haW47cmV0dXJuIHZvaWQgZS5zZW5kR2VuZXJhdGVNZXNzYWdlKG8sYSxzLHUpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOnIsY29kZToyMDB9LGk9e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpufTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpKX1jYXRjaChlKXtTLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzZW5kR2VuZXJhdGVNZXNzYWdlIG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX1pZigic3RvcmVJZGVudGl0eSI9PT1yKXt2YXIgYz10LmJvZHkucGFyYW1zLnJlc3VsdCxmPXQuYm9keS5wYXJhbXMua2V5UGFpcjtyZXR1cm4gdm9pZCBlLnN0b3JlSWRlbnRpdHkoYyxmKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpyLGNvZGU6MjAwfSxpPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bn07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSl9Y2F0Y2goZSl7Uy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc3RvcmVJZGVudGl0eSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fS8qZWxzZSBpZiAoZnVuY05hbWUgPT09ICdzZWxlY3RJZGVudGl0eUZvckh5cGVydHknKSB7CiAgICAgICAgICBsZXQgb3JpZ2luID0gbXNnLmJvZHkucGFyYW1zLm9yaWdpbjsKICAgICAgICAgIGxldCBpZHAgPSBtc2cuYm9keS5wYXJhbXMuaWRwOwogICAgICAgICAgbGV0IGlkSGludCA9IG1zZy5ib2R5LnBhcmFtcy5pZEhpbnQ7CiAgICAgICAgICBfdGhpcy5zZWxlY3RJZGVudGl0eUZvckh5cGVydHkob3JpZ2luLCBpZHAsIGlkSGludCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9Ki8KLy8gaWYgdGhlIGZ1bmN0aW9uIHJlcXVlc3RlZCBpcyBub3QgYSBwcm9taXNlCnZhciBsPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpuLGNvZGU6MjAwfSxkPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bH07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZCl9Y2F0Y2goZSl7Uy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc3RvcmVJZGVudGl0eSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJkZXBsb3lHVUkiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5ndWlEZXBsb3llZD0hMH19LHtrZXk6Il9nZXRWYWxpZFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtTLmluZm8oIl9nZXRWYWxpZFRva2VuOmh5cGVydHlVUkwiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LmdldElkVG9rZW4oZSkudGhlbihmdW5jdGlvbihlKXtTLmxvZygiW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFZhbGlkVG9rZW5dIFRva2VuIixlKTt2YXIgaT10Ll9zZWNvbmRzX3NpbmNlX2Vwb2NoKCksbz10LmdldElkZW50aXR5KGUudXNlclByb2ZpbGUudXNlclVSTCksYT12b2lkIDA7by5oYXNPd25Qcm9wZXJ0eSgiaW5mbyIpP28uaW5mby5oYXNPd25Qcm9wZXJ0eSgiZXhwaXJlcyIpP2E9by5pbmZvLmV4cGlyZXM6by5pbmZvLmhhc093blByb3BlcnR5KCJ0b2tlbklESlNPTiIpP2E9by5pbmZvLnRva2VuSURKU09OLmV4cDooCi8vIHRocm93ICdUaGUgSUQgVG9rZW4gZG9lcyBub3QgaGF2ZSBhbiBleHBpcmF0aW9uIHRpbWUnOwpTLmluZm8oIlRoZSBJRCBUb2tlbiBkb2VzIG5vdCBoYXZlIGFuIGV4cGlyYXRpb24gdGltZSIpLHIoZSkpOm8uaGFzT3duUHJvcGVydHkoImluZm9Ub2tlbiIpJiZvLmluZm9Ub2tlbi5oYXNPd25Qcm9wZXJ0eSgiZXhwIik/YT1vLmluZm9Ub2tlbi5leHA6KAovLyB0aHJvdyAnVGhlIElEIFRva2VuIGRvZXMgbm90IGhhdmUgYW4gZXhwaXJhdGlvbiB0aW1lJzsKUy5pbmZvKCJUaGUgSUQgVG9rZW4gZG9lcyBub3QgaGF2ZSBhbiBleHBpcmF0aW9uIHRpbWUiKSxyKGUpKSwKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFZhbGlkVG9rZW5dIFRva2VuIGV4cGlyZXMgaW46ICcsIGV4cGlyYXRpb25fZGF0ZSwgICcgfCB0aW1lIG5vdzogJywgdGltZV9ub3cpOwppPj1hPyJnb29nbGUuY29tIj09PWUuaWRwP3Quc2VuZFJlZnJlc2hNZXNzYWdlKGUpLnRoZW4oZnVuY3Rpb24oZSl7dC5kZWxldGVJZGVudGl0eShvLmlkZW50aXR5KSx0LnN0b3JlSWRlbnRpdHkoZSxvLmtleVBhaXIpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0sZnVuY3Rpb24oZSl7Uy5lcnJvcigiW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSBlcnJvciBvbiBnZXRUb2tlbiIsZSksbihlKX0pfSk6KAovLyBtaWNyb3NvZnQuY29tCnQuZGVsZXRlSWRlbnRpdHkoby5pZGVudGl0eSksCi8vIGdlbmVyYXRlIG5ldyBpZFRva2VuCnQuY2FsbEdlbmVyYXRlTWV0aG9kcyhlLmlkcCkudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc3RvcmVJZGVudGl0eSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9KSk6cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1MuZXJyb3IoIltJZGVudGl0eS5JZGVudGl0eU1vZHVsZS5nZXRUb2tlbl0gZXJyb3Igb24gZ2V0VG9rZW4iLGUpLG4oZSl9KX0pfX0se2tleToiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSl7Uy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OmRhdGFPYmplY3RVUkwiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT0oMCxoLmRpdmlkZVVSTCkoZSksbz1pLmRvbWFpbixhPXQuX3BhcnNlTWVzc2FnZVVSTChlKSxzPXQucmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKGEpO2lmKFMuaW5mbygiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdDpyZXBvcnRlclVSTCIscykscylyKHMpO2Vsc2V7Ci8vIGNoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYW4gYXNzb2NpYXRpb24gZnJvbSBhbiBoeXBlcnR5VVJMIHRvIHRoZSBkYXRhT2JqZWN0CnZhciB1PXQuZGF0YU9iamVjdHNJZGVudGl0eVthXTtpZihTLmluZm8oIl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3Q6c3RvcmVkUmVwb3J0ZXJVUkwiLHUpLHUpcih1KTtlbHNlewovLyBjaGVjayBpZiB0aGVyZSBpcyBhbnkgaHlwZXJ0eSB0aGF0IHN1YnNjcmliZWQgdGhlIGRhdGFPYmplY3RVUkwKdmFyIGM9dC5yZWdpc3RyeS5nZXREYXRhT2JqZWN0U3Vic2NyaWJlckh5cGVydHkoZSk7Uy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OnN1YnNjcmliZXJIeXBlcnR5IixjKSxjP3IoYyk6Ci8vIHNlYXJjaCBpbiBkb21haW4gcmVnaXN0cnkgZm9yIHRoZSBoeXBlcnR5IGFzc29jaWF0ZWQgdG8gdGhlIGRhdGFPYmplY3QKLy8gc2VhcmNoIGluIGNhc2UgaXMgYSBzdWJzY3JpYmVyIHdobyB3YW50cyB0byBrbm93IHRoZSByZXBvcnRlcgp0Ll9jb3JlRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTChhLG8pLnRoZW4oZnVuY3Rpb24oZSl7Uy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OmRhdGFPYmplY3QiLGUpLHQuZGF0YU9iamVjdHNJZGVudGl0eVthXT1lLnJlcG9ydGVyLFMuaW5mbygiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdDpkYXRhT2JqZWN0LnJlcG9ydGVyIixlLnJlcG9ydGVyKSxyKGUucmVwb3J0ZXIpfSxmdW5jdGlvbihlKXtuKGUpfSl9fX0pfX0se2tleToiX3NlbmRSZXBvcnRlclNlc3Npb25LZXkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBhPXIuZGF0YU9iamVjdFNlc3Npb25LZXlzW3QuZGF0YU9iamVjdFVSTF0scz12b2lkIDAsdT12b2lkIDAsYz12b2lkIDAsZj12b2lkIDAsbD17fTsKLy9pZiB0aGVyZSBpcyBub3QgeWV0IGEgc2Vzc2lvbiBLZXksIGdlbmVyYXRlcyBhIG5ldyBvbmUKYT9jPWEuc2Vzc2lvbktleTooYz1yLmNyeXB0by5nZW5lcmF0ZVJhbmRvbSgpLHIuZGF0YU9iamVjdFNlc3Npb25LZXlzW3QuZGF0YU9iamVjdFVSTF09e3Nlc3Npb25LZXk6Yyxpc1RvRW5jcnlwdDohMH0sci5zdG9yYWdlTWFuYWdlci5zZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIsMCxyLmRhdGFPYmplY3RTZXNzaW9uS2V5cykuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBtZXRob2Qgc3RvcmFnZU1hbmFnZXIuc2V0IGVycm9yOiAiK2UpfSkpO3RyeXt1PSgwLGkuZGVmYXVsdCkoe3ZhbHVlOnIuY3J5cHRvLmVuY29kZShjKSxkYXRhT2JqZWN0VVJMOnQuZGF0YU9iamVjdFVSTH0pfWNhdGNoKGUpe3JldHVybiBvKCJPbiBfc2VuZFJlcG9ydGVyU2Vzc2lvbktleSBmcm9tIG1ldGhvZCBzdG9yYWdlTWFuYWdlci5zZXQgZXJyb3I6ICIrZSl9Zj1yLmNyeXB0by5nZW5lcmF0ZUlWKCksbC5pdj1yLmNyeXB0by5lbmNvZGUoZiksci5jcnlwdG8uZW5jcnlwdEFFUyh0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LHUsZikudGhlbihmdW5jdGlvbihuKXtzPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlcG9ydGVyU2Vzc2lvbktleSIsdmFsdWU6ci5jcnlwdG8uZW5jb2RlKG4pfX07dmFyIGk9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChzLHUrZix0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKTtyZXR1cm4gci5jcnlwdG8uaGFzaEhNQUModC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleSxpKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG89YnRvYSgoMCxpLmRlZmF1bHQpKHt2YWx1ZTpzLmJvZHkudmFsdWUsaGFzaDpyLmNyeXB0by5lbmNvZGUoZSksaXY6bC5pdn0pKTtzLmJvZHkudmFsdWU9byxuKHttZXNzYWdlOnMsY2hhdEtleXM6dH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBjaGFpbmVkIHByb21pc2VzIGVuY3J5cHRBRVMgZXJyb3I6ICIrZSl9KX0pfX0se2tleToiX3Jlc29sdmVEb21haW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyJkb21haW4taWRwOi8vIitlOiJkb21haW4taWRwOi8vZ29vZ2xlLmNvbSJ9fSx7a2V5OiJfZG9IYW5kU2hha2VQaGFzZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGE9ZS5ib2R5LmhhbmRzaGFrZVBoYXNlLHM9dm9pZCAwLHU9dm9pZCAwLGM9e30sZj12b2lkIDA7c3dpdGNoKFMuaW5mbygiaGFuZHNoYWtlIHBoYXNlOiAiLGEpLGEpe2Nhc2Uic3RhcnRIYW5kU2hha2UiOnQua2V5cy5mcm9tUmFuZG9tPXIuY3J5cHRvLmdlbmVyYXRlUmFuZG9tKCk7dmFyIGw9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS50byxmcm9tOmUuZnJvbSxib2R5OntoYW5kc2hha2VQaGFzZToic2VuZGVySGVsbG8iLHZhbHVlOnIuY3J5cHRvLmVuY29kZSh0LmtleXMuZnJvbVJhbmRvbSl9fTt0LmhhbmRzaGFrZUhpc3Rvcnkuc2VuZGVySGVsbG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChsLHZvaWQgMCx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSwKLy8gY2hlY2sgaWYgd2FzIHRoZSBlbmNyeXB0IGZ1bmN0aW9uIG9yIHRoZSBtdXR1YWwgYXV0aGVudGljYXRpb24gdGhhdCByZXF1ZXN0IHRoZQovLyBzdGFydCBvZiB0aGUgaGFuZFNoYWtlUGhhc2UuCnQuaW5pdGlhbE1lc3NhZ2U/bih7bWVzc2FnZTpsLGNoYXRLZXlzOnR9KTooci5jaGF0S2V5c1tlLmZyb20rIjwtPiIrZS50b109dCxyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGwpKTticmVhaztjYXNlInNlbmRlckhlbGxvIjpTLmxvZygic2VuZGVySGVsbG8iKSx0LmhhbmRzaGFrZUhpc3Rvcnkuc2VuZGVySGVsbG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlKSx0LmtleXMuZnJvbVJhbmRvbT1yLmNyeXB0by5kZWNvZGUoZS5ib2R5LnZhbHVlKSx0LmtleXMudG9SYW5kb209ci5jcnlwdG8uZ2VuZXJhdGVSYW5kb20oKTt2YXIgZD17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJyZWNlaXZlckhlbGxvIix2YWx1ZTpyLmNyeXB0by5lbmNvZGUodC5rZXlzLnRvUmFuZG9tKX19O3QuaGFuZHNoYWtlSGlzdG9yeS5yZWNlaXZlckhlbGxvPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZCx2b2lkIDAsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyksbih7bWVzc2FnZTpkLGNoYXRLZXlzOnR9KTticmVhaztjYXNlInJlY2VpdmVySGVsbG8iOlMubG9nKCJyZWNlaXZlckhlbGxvIiksdC5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVySGVsbG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlKSxyLnZhbGlkYXRlQXNzZXJ0aW9uKGUuYm9keS5pZGVudGl0eS5hc3NlcnRpb24sdm9pZCAwLGUuYm9keS5pZGVudGl0eS5pZHApLnRoZW4oZnVuY3Rpb24obil7Ci8vVE9ETyByZW1vdmUgbGF0ZXIgdGhpcyB2ZXJpZmljYXRpb24gYXMgc29vbiBhcyBhbGwgdGhlIElkUCBwcm94eSBhcmUgdXBkYXRlZCBpbiB0aGUgZXhhbXBsZQp2YXIgaT0ic3RyaW5nIj09dHlwZW9mIG4uY29udGVudHM/bi5jb250ZW50czpuLmNvbnRlbnRzLm5vbmNlLG89ci5jcnlwdG8uZGVjb2RlKGkpLGE9ci5jcnlwdG8uZ2VuZXJhdGVQTVMoKSxzPWUuYm9keS52YWx1ZTt0Lmh5cGVydHlUby5hc3NlcnRpb249ZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix0Lmh5cGVydHlUby5wdWJsaWNLZXk9byx0Lmh5cGVydHlUby51c2VySUQ9bi5jb250ZW50cy5lbWFpbCx0LmtleXMudG9SYW5kb209ci5jcnlwdG8uZGVjb2RlKHMpLHQua2V5cy5wcmVtYXN0ZXJLZXk9YTt2YXIgdT1yLmNyeXB0by5jb25jYXRQTVN3aXRoUmFuZG9tcyhhLHQua2V5cy50b1JhbmRvbSx0LmtleXMuZnJvbVJhbmRvbSk7cmV0dXJuIHIuY3J5cHRvLmdlbmVyYXRlTWFzdGVyU2VjcmV0KHUsIm1lc3NhZ2VIaXN0b3JpYyIrdC5rZXlzLnRvUmFuZG9tK3Qua2V5cy5mcm9tUmFuZG9tKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQua2V5cy5tYXN0ZXJLZXk9ZSxyLmNyeXB0by5nZW5lcmF0ZUtleXMoZSwia2V5IGV4cGFuc2lvbiIrdC5rZXlzLnRvUmFuZG9tK3Qua2V5cy5mcm9tUmFuZG9tKX0pLnRoZW4oZnVuY3Rpb24obil7dC5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoblswXSksdC5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleT1uZXcgVWludDhBcnJheShuWzFdKSx0LmtleXMuaHlwZXJ0eVRvSGFzaEtleT1uZXcgVWludDhBcnJheShuWzJdKSx0LmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5PW5ldyBVaW50OEFycmF5KG5bM10pLHM9ci5jcnlwdG8uZ2VuZXJhdGVJVigpLGMuaXY9ci5jcnlwdG8uZW5jb2RlKHMpO3ZhciBpPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InNlbmRlckNlcnRpZmljYXRlIn19OwovLyBoYXNoIHRoZSB2YWx1ZSBhbmQgdGhlIGl2CnJldHVybiBmPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goaSwib2siK3MsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyksci5jcnlwdG8uaGFzaEhNQUModC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleSxmKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vZW5jcnlwdCB0aGUgZGF0YQpyZXR1cm4gYy5oYXNoPXIuY3J5cHRvLmVuY29kZShlKSxyLmNyeXB0by5lbmNyeXB0QUVTKHQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksIm9rIixzKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGMuc3ltZXRyaWNFbmNyeXB0aW9uPXIuY3J5cHRvLmVuY29kZShlKSxyLmNyeXB0by5lbmNyeXB0UlNBKHQuaHlwZXJ0eVRvLnB1YmxpY0tleSx0LmtleXMucHJlbWFzdGVyS2V5KX0pLnRoZW4oZnVuY3Rpb24obil7Yy5hc3N5bWV0cmljRW5jcnlwdGlvbj1yLmNyeXB0by5lbmNvZGUobik7dmFyIG89e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToic2VuZGVyQ2VydGlmaWNhdGUifX0sYT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKG8sdC5rZXlzLnByZW1hc3RlcktleSx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKTtyZXR1cm4gci5jcnlwdG8uc2lnblJTQSh0Lmh5cGVydHlGcm9tLnByaXZhdGVLZXksKDAsaS5kZWZhdWx0KSh0LmhhbmRzaGFrZUhpc3RvcnkpKygwLGkuZGVmYXVsdCkoYSkpfSkudGhlbihmdW5jdGlvbihvKXtjLnNpZ25hdHVyZT1yLmNyeXB0by5lbmNvZGUobyk7dmFyIGE9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToic2VuZGVyQ2VydGlmaWNhdGUiLHZhbHVlOmJ0b2EoKDAsaS5kZWZhdWx0KShjKSl9fTt0LmhhbmRzaGFrZUhpc3Rvcnkuc2VuZGVyQ2VydGlmaWNhdGU9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChhLCJvayIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSxuKHttZXNzYWdlOmEsY2hhdEtleXM6dH0pfSxmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX0pO2JyZWFrO2Nhc2Uic2VuZGVyQ2VydGlmaWNhdGUiOlMubG9nKCJzZW5kZXJDZXJ0aWZpY2F0ZSIpO3ZhciBwPUpTT04ucGFyc2UoYXRvYihlLmJvZHkudmFsdWUpKTtyLnZhbGlkYXRlQXNzZXJ0aW9uKGUuYm9keS5pZGVudGl0eS5hc3NlcnRpb24sdm9pZCAwLGUuYm9keS5pZGVudGl0eS5pZHApLnRoZW4oZnVuY3Rpb24obil7dmFyIGk9ci5jcnlwdG8uZGVjb2RlKHAuYXNzeW1ldHJpY0VuY3J5cHRpb24pLG89InN0cmluZyI9PXR5cGVvZiBuLmNvbnRlbnRzP24uY29udGVudHM6bi5jb250ZW50cy5ub25jZSxhPXIuY3J5cHRvLmRlY29kZShvKTtyZXR1cm4gdC5oeXBlcnR5VG8uYXNzZXJ0aW9uPWUuYm9keS5pZGVudGl0eS5hc3NlcnRpb24sdC5oeXBlcnR5VG8ucHVibGljS2V5PWEsdC5oeXBlcnR5VG8udXNlcklEPW4uY29udGVudHMuZW1haWwsci5jcnlwdG8uZGVjcnlwdFJTQSh0Lmh5cGVydHlGcm9tLnByaXZhdGVLZXksaSl9LGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKGVycm9yKTsKbygiRXJyb3IgZHVyaW5nIGF1dGhlbnRpY2F0aW9uIG9mIGlkZW50aXR5Iil9KS50aGVuKGZ1bmN0aW9uKG4pe3Qua2V5cy5wcmVtYXN0ZXJLZXk9bmV3IFVpbnQ4QXJyYXkobik7dmFyIG89ci5jcnlwdG8uZGVjb2RlKHAuc2lnbmF0dXJlKSxhPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSx0LmtleXMucHJlbWFzdGVyS2V5KTtyZXR1cm4gci5jcnlwdG8udmVyaWZ5UlNBKHQuaHlwZXJ0eVRvLnB1YmxpY0tleSwoMCxpLmRlZmF1bHQpKHQuaGFuZHNoYWtlSGlzdG9yeSkrKDAsaS5kZWZhdWx0KShhKSxvKX0pLnRoZW4oZnVuY3Rpb24oZSl7Uy5sb2coInNpZ25hdHVyZSB2YWxpZGF0aW9uIHJlc3VsdCAiLGUpO3ZhciBuPXIuY3J5cHRvLmNvbmNhdFBNU3dpdGhSYW5kb21zKHQua2V5cy5wcmVtYXN0ZXJLZXksdC5rZXlzLnRvUmFuZG9tLHQua2V5cy5mcm9tUmFuZG9tKTtyZXR1cm4gci5jcnlwdG8uZ2VuZXJhdGVNYXN0ZXJTZWNyZXQobiwibWVzc2FnZUhpc3RvcmljIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5rZXlzLm1hc3RlcktleT1lLHIuY3J5cHRvLmdlbmVyYXRlS2V5cyhlLCJrZXkgZXhwYW5zaW9uIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihlKXt0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KGVbMF0pLHQua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KGVbMV0pLHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoZVsyXSksdC5rZXlzLmh5cGVydHlUb0hhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoZVszXSkscz1yLmNyeXB0by5kZWNvZGUocC5pdik7dmFyIG49ci5jcnlwdG8uZGVjb2RlKHAuc3ltZXRyaWNFbmNyeXB0aW9uKTtyZXR1cm4gci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxuLHMpfSkudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygnZGVjcnlwdGVkRGF0YScsIGRlY3J5cHRlZERhdGEpOwp0LmhhbmRzaGFrZUhpc3Rvcnkuc2VuZGVyQ2VydGlmaWNhdGU9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7dmFyIGk9ci5jcnlwdG8uZGVjb2RlKHAuaGFzaCk7cmV0dXJuIGY9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyksci5jcnlwdG8udmVyaWZ5SE1BQyh0LmtleXMuaHlwZXJ0eVRvSGFzaEtleSxmLGkpfSkudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIGhhc2ggdmVyaWZpY2F0aW9uICcsIHZlcmlmaWVkSGFzaCk7CnZhciBpPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVyRmluaXNoZWRNZXNzYWdlIn19O3JldHVybiBzPXIuY3J5cHRvLmdlbmVyYXRlSVYoKSxjLml2PXIuY3J5cHRvLmVuY29kZShzKSxmPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goaSwib2shIitzLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLHIuY3J5cHRvLmhhc2hITUFDKHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksaSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBjLmhhc2g9ci5jcnlwdG8uZW5jb2RlKGUpLHIuY3J5cHRvLmVuY3J5cHRBRVModC5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleSwib2shIixzKX0pLnRoZW4oZnVuY3Rpb24obyl7Yy52YWx1ZT1yLmNyeXB0by5lbmNvZGUobyk7dmFyIGE9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToicmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UiLHZhbHVlOmJ0b2EoKDAsaS5kZWZhdWx0KShjKSl9fTt0LmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2U9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChhLCJvayEiK3MsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyksdC5hdXRoZW50aWNhdGVkPSEwLG4oe21lc3NhZ2U6YSxjaGF0S2V5czp0fSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfZG9IYW5kU2hha2VQaGFzZSBmcm9tIHNlbmRlckNlcnRpZmljYXRlIGVycm9yOiAiK2UpfSk7YnJlYWs7Y2FzZSJyZWNlaXZlckZpbmlzaGVkTWVzc2FnZSI6Ci8vIGxvZy5sb2coJ3JlY2VpdmVyRmluaXNoZWRNZXNzYWdlJyk7CnQuYXV0aGVudGljYXRlZD0hMCxjPUpTT04ucGFyc2UoYXRvYihlLmJvZHkudmFsdWUpKSxzPXIuY3J5cHRvLmRlY29kZShjLml2KTt2YXIgeT1yLmNyeXB0by5kZWNvZGUoYy52YWx1ZSk7dT1yLmNyeXB0by5kZWNvZGUoYy5oYXNoKSxyLmNyeXB0by5kZWNyeXB0QUVTKHQua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5LHkscykudGhlbihmdW5jdGlvbihpKXsKLy8gbG9nLmxvZygnZGVjcnlwdGVkRGF0YScsIGRlY3J5cHRlZERhdGEpOwp0LmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2U9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLGkrcyk7dmFyIGE9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLHkrcyk7ci5jcnlwdG8udmVyaWZ5SE1BQyh0LmtleXMuaHlwZXJ0eVRvSGFzaEtleSxhLHUpLnRoZW4oZnVuY3Rpb24oaSl7Ci8vIGxvZy5sb2coJ2hhc2ggcmVzdWx0JywgcmVzdWx0KTsKLy8gY2hlY2sgaWYgdGhlcmUgd2FzIGFuIGluaXRpYWwgbWVzc2FnZSB0aGF0IHdhcyBibG9ja2VkIGFuZCBzZW5kIGl0CmlmKHQuaW5pdGlhbE1lc3NhZ2Upe3ZhciBhPXt0eXBlOiJjcmVhdGUiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7dmFsdWU6dC5pbml0aWFsTWVzc2FnZS5ib2R5LnZhbHVlfX07bih7bWVzc2FnZTphLGNoYXRLZXlzOnR9KX1lbHNlIHIuX3NlbmRSZXBvcnRlclNlc3Npb25LZXkoZSx0KS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfZG9IYW5kU2hha2VQaGFzZSBmcm9tIHJlY2VpdmVyRmluaXNoZWRNZXNzYWdlIGVycm9yOiAiK2UpfSl9KX0pO2JyZWFrO2Nhc2UicmVwb3J0ZXJTZXNzaW9uS2V5Ijp2YXIgaD1KU09OLnBhcnNlKGF0b2IoZS5ib2R5LnZhbHVlKSk7dT1yLmNyeXB0by5kZWNvZGUoaC5oYXNoKSxzPXIuY3J5cHRvLmRlY29kZShoLml2KTt2YXIgdj1yLmNyeXB0by5kZWNvZGUoaC52YWx1ZSksZz12b2lkIDAsYj12b2lkIDAsbT12b2lkIDAsXz12b2lkIDA7Uy5sb2coIltJZGVudGl0eU1vZHVsZSByZXBvcnRlclNlc3Npb25LZXldIC0gZGVjcnlwdEFFUzogIix0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSx2LHMpLHIuY3J5cHRvLmRlY3J5cHRBRVModC5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXksdixzKS50aGVuKGZ1bmN0aW9uKG4pe2c9SlNPTi5wYXJzZShuKSxiPXIuY3J5cHRvLmRlY29kZShnLnZhbHVlKSxtPWcuZGF0YU9iamVjdFVSTDt2YXIgaT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsbitzKTtyZXR1cm4gci5jcnlwdG8udmVyaWZ5SE1BQyh0LmtleXMuaHlwZXJ0eVRvSGFzaEtleSxpLHUpfSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnaGFzaCBzdWNjZXNzZnVsbHkgdmFsaWRhdGVkICcsIGhhc2hSZXN1bHQpOwpyZXR1cm4gci5kYXRhT2JqZWN0U2Vzc2lvbktleXNbbV09e3Nlc3Npb25LZXk6Yixpc1RvRW5jcnlwdDohMH0sci5zdG9yYWdlTWFuYWdlci5zZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIsMCxyLmRhdGFPYmplY3RTZXNzaW9uS2V5cykscz1yLmNyeXB0by5nZW5lcmF0ZUlWKCksYy5pdj1yLmNyeXB0by5lbmNvZGUocyksci5jcnlwdG8uZW5jcnlwdEFFUyh0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LCJvayEhIixzKX0pLnRoZW4oZnVuY3Rpb24obil7Xz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJyZWNlaXZlckFja25vd2xlZGdlIn19LGMudmFsdWU9ci5jcnlwdG8uZW5jb2RlKG4pO3ZhciBpPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goXywib2shISIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKTtyZXR1cm4gci5jcnlwdG8uaGFzaEhNQUModC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleSxpKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIG89YnRvYSgoMCxpLmRlZmF1bHQpKHt2YWx1ZTpjLnZhbHVlLGhhc2g6ci5jcnlwdG8uZW5jb2RlKGUpLGl2OmMuaXZ9KSk7Xy5ib2R5LnZhbHVlPW8sbih7bWVzc2FnZTpfLGNoYXRLZXlzOnR9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIF9kb0hhbmRTaGFrZVBoYXNlIGZyb20gcmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UgZXJyb3I6ICIrZSl9KTticmVhaztjYXNlInJlY2VpdmVyQWNrbm93bGVkZ2UiOlMubG9nKCJyZWNlaXZlckFja25vd2xlZGdlIik7dmFyIFI9SlNPTi5wYXJzZShhdG9iKGUuYm9keS52YWx1ZSkpLHc9ci5jcnlwdG8uZGVjb2RlKFIuaGFzaCk7cz1yLmNyeXB0by5kZWNvZGUoUi5pdik7dmFyIE89ci5jcnlwdG8uZGVjb2RlKFIudmFsdWUpO3IuY3J5cHRvLmRlY3J5cHRBRVModC5rZXlzLmh5cGVydHlUb1Nlc3Npb25LZXksTyxzKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBpPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxuK3MpO3JldHVybiByLmNyeXB0by52ZXJpZnlITUFDKHQua2V5cy5oeXBlcnR5VG9IYXNoS2V5LGksdyl9KS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdoYXNoUmVzdWx0ICcsIGhhc2hSZXN1bHQpOwp2YXIgcj10LmNhbGxiYWNrO3ImJnIoImhhbmRTaGFrZUVuZCIpLG4oImhhbmRTaGFrZUVuZCIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX2RvSGFuZFNoYWtlUGhhc2UgZnJvbSByZWNlaXZlckFja25vd2xlZGdlIGVycm9yOiAiK2UpfSk7YnJlYWs7ZGVmYXVsdDpvKGUpfX0pfX0se2tleToiX2ZpbHRlck1lc3NhZ2VUb0hhc2giLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm57dHlwZTplLnR5cGUsZnJvbTplLmZyb20sdG86ZS50byxib2R5OntpZGVudGl0eTpyfHxlLmJvZHkuaWRlbnRpdHksdmFsdWU6dHx8ZS5ib2R5LnZhbHVlLGhhbmRzaGFrZVBoYXNlOmUuYm9keS5oYW5kc2hha2VQaGFzZX19fX0se2tleToiX25ld0NoYXRDcnlwdG8iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9cj9lLnRvOmUuZnJvbSxvPXI/ZS5mcm9tOmUudG8sYT1uLmdldElkZW50aXR5KHQpO3JldHVybntoeXBlcnR5RnJvbTp7aHlwZXJ0eTppLHVzZXJJRDphLm1lc3NhZ2VJbmZvLnVzZXJQcm9maWxlLnVzZXJuYW1lLHByaXZhdGVLZXk6YS5rZXlQYWlyLnByaXZhdGUscHVibGljS2V5OmEua2V5UGFpci5wdWJsaWMsYXNzZXJ0aW9uOmEuYXNzZXJ0aW9uLG1lc3NhZ2VJbmZvOmEubWVzc2FnZUluZm99LGh5cGVydHlUbzp7aHlwZXJ0eTpvLHVzZXJJRDp2b2lkIDAscHVibGljS2V5OnZvaWQgMCxhc3NlcnRpb246dm9pZCAwfSxrZXlzOntoeXBlcnR5VG9TZXNzaW9uS2V5OnZvaWQgMCxoeXBlcnR5RnJvbVNlc3Npb25LZXk6dm9pZCAwLGh5cGVydHlUb0hhc2hLZXk6dm9pZCAwLGh5cGVydHlGcm9tSGFzaEtleTp2b2lkIDAsdG9SYW5kb206dm9pZCAwLGZyb21SYW5kb206dm9pZCAwLHByZW1hc3RlcktleTp2b2lkIDAsbWFzdGVyS2V5OnZvaWQgMH0saGFuZHNoYWtlSGlzdG9yeTp7c2VuZGVySGVsbG86dm9pZCAwLHJlY2VpdmVySGVsbG86dm9pZCAwLHNlbmRlckNlcnRpZmljYXRlOnZvaWQgMCxyZWNlaXZlckZpbmlzaGVkTWVzc2FnZTp2b2lkIDB9LGluaXRpYWxNZXNzYWdlOmUuYm9keS5pZ25vcmU/dm9pZCAwOmUsY2FsbGJhY2s6ZS5jYWxsYmFjayxhdXRoZW50aWNhdGVkOiExLGRhdGFPYmplY3RVUkw6ZS5kYXRhT2JqZWN0VVJMfX19LHtrZXk6Il9zZWNvbmRzX3NpbmNlX2Vwb2NoIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKERhdGUubm93KCkvMWUzKX19LHtrZXk6Il9wYXJzZU1lc3NhZ2VVUkwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoIi8iKTtyZXR1cm4gdC5sZW5ndGg8PTY/dFswXSsiLy8iK3RbMl0rIi8iK3RbM106dFswXSsiLy8iK3RbMl0rIi8iK3RbM10rIi8iK3RbNF19fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUJ1c30sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fbWVzc2FnZUJ1cz1lLHQuYWRkR1VJTGlzdGVuZXJzKCl9fSx7a2V5OiJjb3JlRGlzY292ZXJ5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZURpc2NvdmVyeX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2NvcmVEaXNjb3Zlcnk9ZX19LHtrZXk6InJlZ2lzdHJ5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVnaXN0cnl9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9yZWdpc3RyeT1lfX1dKSxJZGVudGl0eU1vZHVsZX0oKTt0LmRlZmF1bHQ9TyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSWRlbnRpdHkoZSx0KXsoMCxpLmRlZmF1bHQpKHRoaXMsSWRlbnRpdHkpO3ZhciByPXRoaXM7ci5ndWlkPWUsci50eXBlPXQsci5pZGVudGlmaWVyc0xpc3Q9e319cmV0dXJuKDAsYS5kZWZhdWx0KShJZGVudGl0eSxbe2tleToiYWRkSWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17aWRBc3NlcnRpb246IiIsc2VydmljZUFkZHJlc3M6IiIsYXV0aGVudGljYXRpb25EYXRhOiIiLGF1dGhvcmlzYXRpb25EYXRhOiIiLHVzZXJQcm9maWxlOiIifTt0LmlkZW50aWZpZXJzTGlzdFtlXT1yfX0se2tleToiYWRkSWRBc3NlcnRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMsbz1uZXcgdSh0LHIsbik7aS5pZEFzc2VydGlvbkxpc3QucHVzaChvKX19XSksSWRlbnRpdHl9KCksdT1mdW5jdGlvbiBJZEFzc2VydGlvbihlLHQscil7KDAsaS5kZWZhdWx0KSh0aGlzLElkQXNzZXJ0aW9uKTt2YXIgbj10aGlzO24uYXNzZXJ0aW9uPWUsbi5pZHA9dCxuLnNjb3BlPXJ9OyFmdW5jdGlvbigpe2Z1bmN0aW9uIElkVmFsaWRhdGlvbihlLHQpeygwLGkuZGVmYXVsdCkodGhpcyxJZFZhbGlkYXRpb24pO3ZhciByPXRoaXM7ci5pZGVudGl0eT1lLHIuY29udGVudHM9dH0oMCxhLmRlZmF1bHQpKElkVmFsaWRhdGlvbixbe2tleToidmFsaWRhdGVzIix2YWx1ZTpmdW5jdGlvbihlLHQpe319XSl9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMTIpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMSksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIENyeXB0bygpeygwLGEuZGVmYXVsdCkodGhpcyxDcnlwdG8pfS8qKgogICogZW5jb2RlIGEgYnl0ZUFycmF5IHZhbHVlIGluIGJhc2UgNjQgZW5jb2RlCiAgKiBAcGFyYW0gICB7Ynl0ZUFycmF5fSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKICAqIEByZXR1cm4gIHtzdHJpbmd9ICAgZW5jb2RlZCB2YWx1ZQogICovCnJldHVybigwLHUuZGVmYXVsdCkoQ3J5cHRvLFt7a2V5OiJlbmNvZGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBidG9hKGUpfX0se2tleToiZGVjb2RlIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoSlNPTi5wYXJzZSgiWyIrYXRvYihlKSsiXSIpKX19LHtrZXk6ImVuY3J5cHRSU0EiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihuLGkpe3IuX2ltcG9ydFJTQWVuY3J5cHRLZXkobmV3IFVpbnQ4QXJyYXkoZSkpLnRoZW4oZnVuY3Rpb24oZSl7Y3J5cHRvLnN1YnRsZS5lbmNyeXB0KHtuYW1lOiJSU0EtT0FFUCJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQp0KS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgZW5jcnlwdGVkIGRhdGEKLy8gY29uc29sZS5sb2coJ2NyeXB0by1lbmNyeXB0UlNBJywgbmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSk7Cm4obmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZW5jcnlwdFJTQScsIGVycik7CmkoZSl9KX0pfSl9fSx7a2V5OiJkZWNyeXB0UlNBIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXtyLl9pbXBvcnRSU0FkZWNyeXB0S2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7Y3J5cHRvLnN1YnRsZS5kZWNyeXB0KHtuYW1lOiJSU0EtT0FFUCJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQp0KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBVaW50OEFycmF5KGUpOwovLyBjb25zb2xlLmxvZygnY3J5cHRvLWRlY3J5cHRSU0EnLCBkZWNyeXB0ZWREYXRhKTsKbih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBjb25zb2xlLmxvZygnY3J5cHRvLWRlY3J5cHRSU0EnLCBlcnIpOwppKGUpfSl9KX0pfX0se2tleToic2lnblJTQSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7ci5faW1wb3J0UlNBc2lnbktleShlKS50aGVuKGZ1bmN0aW9uKGUpe2NyeXB0by5zdWJ0bGUuc2lnbih7bmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKci5fdXRmOEVuY29kZSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGFuIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgdGhlIHNpZ25hdHVyZQovLyBjb25zb2xlLmxvZygnY3J5cHRvLXNpZ25SU0EnLCBuZXcgVWludDhBcnJheShzaWduYXR1cmUpKTsKbihuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gY29uc29sZS5sb2coJ2NyeXB0by1zaWduUlNBJywgZXJyKTsKaShlKX0pfSl9KX19LHtrZXk6InZlcmlmeVJTQSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXtuLl9pbXBvcnRSU0F2ZXJpZnlLZXkoZSkudGhlbihmdW5jdGlvbihlKXtjcnlwdG8uc3VidGxlLnZlcmlmeSh7bmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKciwvL0FycmF5QnVmZmVyIG9mIHRoZSBzaWduYXR1cmUKbi5fdXRmOEVuY29kZSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIHRoZSBzaWduYXR1cmUgaXMgdHJ1ZSBvciBub3QKLy8gY29uc29sZS5sb2coJ2NyeXB0by12ZXJpZnlSU0EnLCBpc3ZhbGlkKTsKaShlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBjb25zb2xlLmxvZygnY3J5cHRvLXZlcmlmeVJTQScsIGVycik7Cm8oZSl9KX0pfSl9fSx7a2V5OiJlbmNyeXB0QUVTIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihpLG8pe24uX2ltcG9ydEFFU2tleShlKS50aGVuKGZ1bmN0aW9uKGUpe2NyeXB0by5zdWJ0bGUuZW5jcnlwdCh7bmFtZToiQUVTLUNCQyIsCi8vRG9uJ3QgcmUtdXNlIGluaXRpYWxpemF0aW9uIHZlY3RvcnMhCi8vQWx3YXlzIGdlbmVyYXRlIGEgbmV3IGl2IGV2ZXJ5IHRpbWUgeW91ciBlbmNyeXB0IQppdjpyfSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKbi5fdXRmOEVuY29kZSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGFuIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgdGhlIGVuY3J5cHRlZCBkYXRhCi8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZW5jcnlwdEFFUycsIG5ldyBVaW50OEFycmF5KGVuY3J5cHRlZCkpOwppKG5ldyBVaW50OEFycmF5KGUpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBjb25zb2xlLmxvZygnY3J5cHRvLWVuY3J5cHRBRVMnLCBlcnIpOwpvKGUpfSl9KX0pfX0se2tleToiZGVjcnlwdEFFUyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXtuLl9pbXBvcnRBRVNrZXkoZSkudGhlbihmdW5jdGlvbihlKXtjcnlwdG8uc3VidGxlLmRlY3J5cHQoe25hbWU6IkFFUy1DQkMiLGl2OnJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQp0KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PW4uX3V0ZjhEZWNvZGUobmV3IFVpbnQ4QXJyYXkoZSkpOwovLyBjb25zb2xlLmxvZygnY3J5cHRvLWRlY3J5cHRBRVMnLCBkZWNvZGVkRGF0YSk7CmkodCl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gY29uc29sZS5sb2coJ2NyeXB0by1kZWNyeXB0QUVTJywgZXJyKTsKbyhlKX0pfSl9KX19LHtrZXk6Imhhc2hITUFDIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXtyLl9pbXBvcnRITUFDa2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7Y3J5cHRvLnN1YnRsZS5zaWduKHtuYW1lOiJITUFDIn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnIuX3V0ZjhFbmNvZGUodCkpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8taGFzaEhNQUMnLCBzaWduYXR1cmUpOwovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgc2lnbmF0dXJlCm4obmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8taGFzaEhNQUMnLCBlcnIpOwppKGUpfSl9KX0pfX0se2tleToidmVyaWZ5SE1BQyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oaSxvKXtuLl9pbXBvcnRITUFDa2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7Y3J5cHRvLnN1YnRsZS52ZXJpZnkoe25hbWU6IkhNQUMifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKciwvL0FycmF5QnVmZmVyIG9mIHRoZSBzaWduYXR1cmUKbi5fdXRmOEVuY29kZSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgYm9vbGVhbiBvbiB3aGV0aGVyIHRoZSBzaWduYXR1cmUgaXMgdHJ1ZSBvciBub3QKLy8gY29uc29sZS5sb2coJ2NyeXB0by12ZXJpZnlITUFDJywgaXN2YWxpZCk7CmU/aShlKTpvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7byhlKX0pfSl9KX19LHtrZXk6ImdlbmVyYXRlUlNBS2V5UGFpciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2NyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoe25hbWU6IlJTQS1QU1MiLG1vZHVsdXNMZW5ndGg6MjA0OCwvL2NhbiBiZSAxMDI0LCAyMDQ4LCBvciA0MDk2CnB1YmxpY0V4cG9uZW50Om5ldyBVaW50OEFycmF5KFsxLDAsMV0pLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbInNpZ24iLCJ2ZXJpZnkiXSkudGhlbihmdW5jdGlvbihuKXsKLy9yZXR1cm5zIGEga2V5cGFpciBvYmplY3QKLy8gY29uc29sZS5sb2coa2V5KTsKY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoInNwa2kiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCm4ucHVibGljS2V5KS50aGVuKGZ1bmN0aW9uKHQpewovL3JldHVybnMgdGhlIGV4cG9ydGVkIGtleSBkYXRhCi8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCnJldHVybiBlLnB1YmxpYz1uZXcgVWludDhBcnJheSh0KSxjcnlwdG8uc3VidGxlLmV4cG9ydEtleSgicGtjczgiLG4ucHJpdmF0ZUtleSl9KS50aGVuKGZ1bmN0aW9uKHIpe2UucHJpdmF0ZT1uZXcgVWludDhBcnJheShyKSwKLy8gY29uc29sZS5sb2coJ2NyeXB0by1nZW5lcmF0ZVJTQUtleVBhaXInLCBrZXlQYWlyKTsKdChlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pfX0se2tleToiZ2VuZXJhdGVJViIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgVWludDhBcnJheSgxNik7cmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoZSksZX19LHtrZXk6ImdlbmVyYXRlUmFuZG9tIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgVWludDhBcnJheSgzMik7Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyh0KTsKLy8gYWRkIGluIHRoZSBmaXJzdCA0IGJ5dGVzIG9mIHRoZSBhcnJheSB0aGUgYnl0ZXMgZXh0cmFjdGVkIHByZXZpb3VzbHk7CmZvcih2YXIgcj1EYXRlLm5vdygpLG49ZS5fdXRmOEVuY29kZShyKSxpPW4uc2xpY2Uobi5sZW5ndGgtNCxuLmxlbmd0aCksbz0wO288NDtvKyspdFtvXT1pW29dO3JldHVybiB0fX0se2tleToiZ2VuZXJhdGVQTVMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkoNDgpO3JldHVybiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGUpLGV9fSx7a2V5OiJnZW5lcmF0ZU1hc3RlclNlY3JldCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89bmV3IFVpbnQ4QXJyYXkoNDgpLGE9dDtyLl9kaWdlc3QoZSkudGhlbihmdW5jdGlvbihlKXtyLmhhc2hITUFDKGUsYSkudGhlbihmdW5jdGlvbih0KXsKLy9jb3B5IHRoZSBmaXJzdCAzMiBieXRlcyBpbnRvIHRoZSBrZXkKZm9yKHZhciBuPTA7bjwzMjtuKyspb1tuXT10W25dO3JldHVybiByLmhhc2hITUFDKGUsYSt0KX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vY29weSB0aGUgZmlyc3QgMTYgYnl0ZXMgdG8gdGhlIGtleSByZW1haW5pbmcgMTYgYnl0ZXMKZm9yKHZhciB0PTA7dDwxNjt0Kyspb1t0KzMyXT1lW3RdOwovLyBjb25zb2xlLmxvZygnY3J5cHRvLWdlbmVyYXRlTWFzdGVyU2VjcmV0Jywga2V5KTsKbihvKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBjb25zb2xlLmxvZygnY3J5cHRvLWdlbmVyYXRlTWFzdGVyU2VjcmV0JywgZXJyKTsKaShlKX0pfSl9KX19LHtrZXk6ImdlbmVyYXRlS2V5cyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89W10sYT10OwovLyBpdGVyYXRlIDQgdGltZXMgdG8gb2J0YWluIGEgMTAyNCBrZXkgc2l6ZQpyLmhhc2hITUFDKGUsYSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gby5wdXNoKHQpLHIuaGFzaEhNQUMoZSxhK3QpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gby5wdXNoKHQpLHIuaGFzaEhNQUMoZSxhK3QpfSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gby5wdXNoKHQpLHIuaGFzaEhNQUMoZSxhK3QpfSkudGhlbihmdW5jdGlvbihlKXtvLnB1c2goZSksCi8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZ2VuZXJhdGVLZXlzJywga2V5KTsKbihvKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBjb25zb2xlLmxvZygnY3J5cHRvLWdlbmVyYXRlS2V5cycsIGVycik7CmkoZSl9KX0pfX0se2tleToiX2ltcG9ydFJTQXNpZ25LZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7Y3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoInBrY3M4IiwvL2NhbiBiZSAnandrJyAocHVibGljIG9yIHByaXZhdGUpLCAnc3BraScgKHB1YmxpYyBvbmx5KSwgb3IgJ3BrY3M4JyAocHJpdmF0ZSBvbmx5KQplLHsvL3RoZXNlIGFyZSB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUiLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbInNpZ24iXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgcHVibGljS2V5IChvciBwcml2YXRlS2V5IGlmIHlvdSBhcmUgaW1wb3J0aW5nIGEgcHJpdmF0ZSBrZXkpCi8vIGNvbnNvbGUubG9nKCdjcnlwdG8tX2ltcG9ydFJTQXNpZ25LZXknLCBwcml2YXRlS2V5KTsKdChlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pfX0se2tleToiX2ltcG9ydFJTQXZlcmlmeUtleSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtjcnlwdG8uc3VidGxlLmltcG9ydEtleSgic3BraSIsLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKZSx7Ly90aGVzZSBhcmUgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IlJTQVNTQS1QS0NTMS12MV81IixoYXNoOntuYW1lOiJTSEEtMjU2In19LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJ2ZXJpZnkiXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgcHVibGljS2V5IChvciBwcml2YXRlS2V5IGlmIHlvdSBhcmUgaW1wb3J0aW5nIGEgcHJpdmF0ZSBrZXkpCi8vIGNvbnNvbGUubG9nKCdjcnlwdG8tX2ltcG9ydFJTQXZlcmlmeUtleScsIHB1YmxpY0tleSk7CnQoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtyKGUpfSl9KX19LHtrZXk6Il9pbXBvcnRSU0FlbmNyeXB0S2V5Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJzcGtpIiwvL2NhbiBiZSAnandrJyAocHVibGljIG9yIHByaXZhdGUpLCAnc3BraScgKHB1YmxpYyBvbmx5KSwgb3IgJ3BrY3M4JyAocHJpdmF0ZSBvbmx5KQplLHsvL3RoZXNlIGFyZSB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiUlNBLU9BRVAiLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbImVuY3J5cHQiXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGEgcHVibGljS2V5IChvciBwcml2YXRlS2V5IGlmIHlvdSBhcmUgaW1wb3J0aW5nIGEgcHJpdmF0ZSBrZXkpCi8vIGNvbnNvbGUubG9nKCdjcnlwdG8tX2ltcG9ydFJTQWVuY3J5cHRLZXknLCBwdWJsaWNLZXkpOwp0KGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSl9fSx7a2V5OiJfaW1wb3J0UlNBZGVjcnlwdEtleSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtjcnlwdG8uc3VidGxlLmltcG9ydEtleSgicGtjczgiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCmUsey8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwpuYW1lOiJSU0EtT0FFUCIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsiZGVjcnlwdCJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKLy8gY29uc29sZS5sb2coJ2NyeXB0by1faW1wb3J0UlNBZGVjcnlwdEtleScsIHByaXZhdGVLZXkpOwp0KGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pfSl9fSx7a2V5OiJjb25jYXRQTVN3aXRoUmFuZG9tcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpewovLyBhZGQgUHJlbWFzdGVyS2V5CmZvcih2YXIgbj1uZXcgVWludDhBcnJheShlLmxlbmd0aCt0Lmxlbmd0aCtyLmxlbmd0aCksaT0wO2k8ZS5sZW5ndGg7aSsrKW5baV09ZVtpXTsKLy9hZGQgdG8gcmFuZG9tCmZvcih2YXIgbz0wO288dC5sZW5ndGg7bysrKW5bbytlLmxlbmd0aF09ZVtvXTsKLy9hZGQgZnJvbSByYW5kb20KZm9yKHZhciBhPTA7YTxyLmxlbmd0aDthKyspblthK2UubGVuZ3RoK3QubGVuZ3RoXT1lW2FdO3JldHVybiBufX0se2tleToiX2dlbmVyYXRlMjU2Yml0S2V5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPW5ldyBVaW50OEFycmF5KDMyKTtyZXR1cm4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhlKSxlfX0se2tleToiX2ltcG9ydEhNQUNrZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9kaWdlc3QoZSkudGhlbihmdW5jdGlvbihlKXtjcnlwdG8uc3VidGxlLmltcG9ydEtleSgicmF3IiwvL2NhbiBiZSAnandrJyBvciAncmF3JwplLHsvL3RoaXMgaXMgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IkhNQUMiLGhhc2g6e25hbWU6IlNIQS0yNTYifSwvL2NhbiBiZSAnU0hBLTEnLCAnU0hBLTI1NicsICdTSEEtMzg0Jywgb3IgJ1NIQS01MTInCmxlbmd0aDoyNTZ9LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJzaWduIiwidmVyaWZ5Il0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyB0aGUgc3ltbWV0cmljIGtleQovLyBjb25zb2xlLmxvZygnY3J5cHRvLV9pbXBvcnRITUFDa2V5Jywga2V5KTsKcihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfSl9fSx7a2V5OiJfZGlnZXN0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbih0LHIpe2NyeXB0by5zdWJ0bGUuZGlnZXN0KHtuYW1lOiJTSEEtMjU2In0sZSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIHRoZSBoYXNoIGFzIGFuIEFycmF5QnVmZmVyCi8vIGNvbnNvbGUubG9nKCdjcnlwdG8tZGlnZXN0JywgbmV3IFVpbnQ4QXJyYXkoaGFzaCkpOwp0KG5ldyBVaW50OEFycmF5KGUpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pfX0se2tleToiX2ltcG9ydEFFU2tleSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtjcnlwdG8uc3VidGxlLmltcG9ydEtleSgicmF3IiwvL2NhbiBiZSAnandrJyBvciAncmF3JwplLHsvL3RoaXMgaXMgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IkFFUy1DQkMifSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsiZW5jcnlwdCIsImRlY3J5cHQiXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIHRoZSBzeW1tZXRyaWMga2V5Ci8vIGNvbnNvbGUubG9nKCdjcnlwdG8taW1wb3J0QUVTa2V5Jywga2V5KTsKdChlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KX0pfX0se2tleToiX3V0ZjhFbmNvZGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgVGV4dEVuY29kZXIoInV0Zi04IikuZW5jb2RlKGUpfX0se2tleToiX3V0ZjhEZWNvZGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgVGV4dERlY29kZXIoInV0Zi04IikuZGVjb2RlKGUpfX1dKSxDcnlwdG99KCk7dC5kZWZhdWx0PWMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDY4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pLG89ZnVuY3Rpb24gR3VpRmFrZShlLHQpeygwLGkuZGVmYXVsdCkodGhpcyxHdWlGYWtlKTt2YXIgcj10aGlzO3IuX3VybD1lLHIuX3dhaXRUaW1lPTFlNCxyLl9tZXNzYWdlQnVzPXQsci5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihyLl91cmwsZnVuY3Rpb24oZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eSgidHlwZSIpJiYiY3JlYXRlIj09PWUudHlwZSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJ2YWx1ZSIpJiZlLmJvZHkudmFsdWUuaGFzT3duUHJvcGVydHkoImlkZW50aXRpZXMiKSYmZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KCJpZHBzIikpe3ZhciB0PWUuYm9keS52YWx1ZS5pZGVudGl0aWVzLG49ZS5ib2R5LnZhbHVlLmlkcHMsaT12b2lkIDA7aT12b2lkIDAhPT10WzBdP3t0eXBlOiJpZGVudGl0eSIsdmFsdWU6dFswXSxjb2RlOjIwMH06e3R5cGU6ImlkcCIsdmFsdWU6blswXS5kb21haW4sY29kZToyMDB9O3ZhciBvPXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6aX07Ci8vIHRvIHRlc3Qgb24gdGhlIGlkZW50aXR5IHNpZGUgdGhlIGxpc3RlbmVyIHdpdGhvdXQgdGhlIHRpbWVvdXQKLy8gY2FuIHJlcHJlc2VudCB0aGUgdGltZSB0aGUgdXNlciB0YWtlcyB0byBjaG9vc2UgYW5kIGlkZW50aXR5CiJ3YWl0Ij09PWUuYm9keS52YWx1ZT9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvKX0sci5fd2FpdFRpbWUpOnIuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobyl9fSl9O3QuZGVmYXVsdD1vLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ2OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxMSksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9cig0NzApLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNDcxKSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDQ3Miksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9cigxNSksYj1mLmdldExvZ2dlcigiUEVQIiksbT1mdW5jdGlvbigpey8qKgogICogQ3JlYXRlcyBhIFBvbGljeSBFbmZvcmNlbWVudCBQb2ludCAoUEVQKSBpbnN0YW5jZQogICogQHBhcmFtICAgIHtPYmplY3R9ICAgIGNvbnRleHQKICAqLwpmdW5jdGlvbiBQRVAoZSl7KDAsYS5kZWZhdWx0KSh0aGlzLFBFUCk7dmFyIHQ9dGhpczt0LnBkcD1uZXcgeS5kZWZhdWx0KGUpLHQuYWN0aW9uc1NlcnZpY2U9bmV3IGQuZGVmYXVsdChlKSx0LmNvbnRleHQ9ZSxlLnBlcD10LAovL1RPRE8gc2hvdWxkIGJlIGFkZGVkIGEgdHJpZ2dlciB0byB2ZXJpZnkgd2hlbiB0aGUgbG9hZENvbmZpZ3VyYXRpb25zIGlzIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWQKZS5sb2FkQ29uZmlndXJhdGlvbnMoKX0vKioKICAqIHJldHVybiB0aGUgbWVzc2FnZUJ1cyBpbiB0aGlzIFJlZ2lzdHJ5CiAgKiBAcGFyYW0ge01lc3NhZ2VCdXN9ICAgICAgICAgICBtZXNzYWdlQnVzCiAgKi8KcmV0dXJuKDAsdS5kZWZhdWx0KShQRVAsW3trZXk6ImFkZEdVSUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuY29udGV4dC5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGUuY29udGV4dC5wZXBVUkwsZnVuY3Rpb24odCl7dmFyIHI9dC5ib2R5Lm1ldGhvZCxuPXZvaWQgMDtpZigiYWRkVG9Hcm91cCI9PT1yKXt2YXIgaT10LmJvZHkucGFyYW1zLmdyb3VwTmFtZSxvPXQuYm9keS5wYXJhbXMudXNlckVtYWlsO249ZS5jb250ZXh0LmFkZFRvR3JvdXAoaSxvKX1lbHNlIGlmKCJjcmVhdGVHcm91cCI9PT1yKXt2YXIgYT10LmJvZHkucGFyYW1zLmdyb3VwTmFtZTtuPWUuY29udGV4dC5jcmVhdGVHcm91cChhKX1lbHNlIGlmKCJhZGRQb2xpY3kiPT09cil7dmFyIHM9dC5ib2R5LnBhcmFtcy5zb3VyY2UsdT10LmJvZHkucGFyYW1zLmtleSxjPXQuYm9keS5wYXJhbXMucG9saWN5LGY9dC5ib2R5LnBhcmFtcy5jb21iaW5pbmdBbGdvcml0aG07bj1lLmFkZFBvbGljeShzLHUsYyxmKX1lbHNlIGlmKCJkZWxldGVHcm91cCI9PT1yKXt2YXIgbD10LmJvZHkucGFyYW1zLmdyb3VwTmFtZTtuPWUuY29udGV4dC5kZWxldGVHcm91cChsKX1lbHNlIGlmKCJyZW1vdmVQb2xpY3kiPT09cil7dmFyIGQ9dC5ib2R5LnBhcmFtcy5zb3VyY2UscD10LmJvZHkucGFyYW1zLmtleTtuPWUucmVtb3ZlUG9saWN5KGQscCl9ZWxzZSBpZigic2F2ZVBvbGljaWVzIj09PXIpe3ZhciB5PXQuYm9keS5wYXJhbXMuc291cmNlO249ZS5jb250ZXh0LnNhdmVQb2xpY2llcyh5KX1lbHNlIGlmKCJ1c2VyUG9saWNpZXMiPT09ciluPWUuY29udGV4dC51c2VyUG9saWNpZXM7ZWxzZSBpZigiYWN0aXZlVXNlclBvbGljeSI9PT1yKXt2YXIgaD10LmJvZHkucGFyYW1zLnVzZXJQb2xpY3k7aCYmKGUuY29udGV4dC5hY3RpdmVVc2VyUG9saWN5PWgpLG49ZS5jb250ZXh0LmFjdGl2ZVVzZXJQb2xpY3l9ZWxzZSBpZigidXNlclBvbGljeSI9PT1yKXt2YXIgdj10LmJvZHkucGFyYW1zLmtleTtuPWUuY29udGV4dC51c2VyUG9saWNpZXNbdl19ZWxzZSJzYXZlQWN0aXZlUG9saWN5Ij09PXI/bj1lLmNvbnRleHQuc2F2ZUFjdGl2ZVBvbGljeSgpOiJnZXRNeUVtYWlscyI9PT1yP249ZS5jb250ZXh0LmdldE15RW1haWxzKCk6ImdldE15SHlwZXJ0aWVzIj09PXI/bj1lLmNvbnRleHQuZ2V0TXlIeXBlcnRpZXMoKToiZ3JvdXBzIj09PXI/bj1lLmNvbnRleHQuZ3JvdXBzOiJnZXRHcm91cHNOYW1lcyI9PT1yJiYobj1lLmNvbnRleHQuZ2V0R3JvdXBzTmFtZXMoKSk7aWYoInJlbW92ZUZyb21Hcm91cCI9PT1yKXt2YXIgZz10LmJvZHkucGFyYW1zLmdyb3VwTmFtZSxiPXQuYm9keS5wYXJhbXMudXNlckVtYWlsO249ZS5jb250ZXh0LnJlbW92ZUZyb21Hcm91cChnLGIpfXZhciBtPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpuLGNvZGU6MjAwfSxfPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bX07ZS5jb250ZXh0Lm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoXyl9KX19LHtrZXk6ImFkZFBvbGljeSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJzb3VyY2UgaXMgbm90IGRlZmluZWQiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoImtleSBpcyBub3QgZGVmaW5lZCIpO3N3aXRjaCh2b2lkIDA9PT1yP3I9bmV3IHYuZGVmYXVsdCh0LFtdLFtdLG4pOnIgaW5zdGFuY2VvZiB2LmRlZmF1bHR8fChyPW5ldyB2LmRlZmF1bHQoci5rZXksci5ydWxlcyxyLmFjdGlvbnMsci5jb21iaW5pbmdBbGdvcml0aG0pKSxlKXtjYXNlIlNFUlZJQ0VfUFJPVklERVIiOnRoaXMuY29udGV4dC5zYXZlUG9saWNpZXMoZSxyLHQpO2JyZWFrO2Nhc2UiVVNFUiI6dGhpcy5jb250ZXh0LnVzZXJQb2xpY2llc1t0XT1yLHRoaXMuY29udGV4dC5zYXZlUG9saWNpZXMoZSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcigiVW5rbm93biBwb2xpY3kgc291cmNlOiAiK2UpfX19LHtrZXk6ImF1dGhvcmlzZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy8gbG9nLmxvZygnW1BvbGljeS5QRVAgQXV0aG9yaXNlXSAnLCBtZXNzYWdlKTsKLy8gbG9nLmxvZyhtZXNzYWdlKTsKaWYoIWUpdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlIGlzIG5vdCBkZWZpbmVkIik7aWYoIWUuZnJvbSl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UuZnJvbSBpcyBub3QgZGVmaW5lZCIpO2lmKCFlLnRvKXRocm93IG5ldyBFcnJvcigibWVzc2FnZS50byBpcyBub3QgZGVmaW5lZCIpO2lmKCFlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlLnR5cGUgaXMgbm90IGRlZmluZWQiKTtyZXR1cm4gZS5ib2R5PWUuYm9keXx8e30sbmV3IGkuZGVmYXVsdChmdW5jdGlvbihyLG4pe2UuYm9keT1lLmJvZHl8fHt9O3ZhciBpPXQsbz12b2lkIDA7aWYoaS5faXNUb1ZlcmlmeShlKSl7dmFyIGE9aS5faXNJbmNvbWluZ01lc3NhZ2UoZSk7aS5jb250ZXh0LnByZXBhcmVGb3JFdmFsdWF0aW9uKGUsYSkudGhlbihmdW5jdGlvbihlKXtvPWkucGRwLmV2YWx1YXRlUG9saWNpZXMoZSxhKSwiTm90IEFwcGxpY2FibGUiPT09byYmKG89aS5jb250ZXh0LmRlZmF1bHRCZWhhdmlvdXIsZS5ib2R5LmF1dGg9ITEpLGkuYWN0aW9uc1NlcnZpY2UuZW5mb3JjZVBvbGljaWVzKGUsYSkudGhlbihmdW5jdGlvbih0KXtmb3IodmFyIHMgaW4gdCllPXRbc10saS5jb250ZXh0LnByZXBhcmVUb0ZvcndhcmQoZSxhLG8pLnRoZW4oZnVuY3Rpb24oZSl7aWYobykvKiAgaWYgKGlzSW5jb21pbmcgJiYgbWVzc2FnZS5ib2R5LmlkZW50aXR5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZXNzYWdlLmJvZHkuaWRlbnRpdHkuYXNzZXJ0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWVzc2FnZS5ib2R5LmlkZW50aXR5LmV4cGlyZXM7CiAgICAgICAgICAgICAgICAgICAgICB9ICovCmUuYm9keS5hdXRoPXZvaWQgMD09PWUuYm9keS5hdXRofHxlLmJvZHkuYXV0aCxyKGUpO2Vsc2V7dmFyIHQ9e2JvZHk6e2NvZGU6NDAzLGRlc2NyaXB0aW9uOiJCbG9ja2VkIGJ5IHBvbGljeSJ9LGZyb206ZS50byx0bzplLmZyb20sdHlwZToicmVzcG9uc2UifTtuKHQpfX0sZnVuY3Rpb24oZSl7bihlKX0pfSxmdW5jdGlvbihlKXtuKGUpfSl9LGZ1bmN0aW9uKGUpe24oZSl9KX1lbHNlIGlmKG89aS5jb250ZXh0LmRlZmF1bHRCZWhhdmlvdXIpZS5ib2R5LmF1dGg9ITEscihlKTtlbHNle3ZhciBzPXtib2R5Ontjb2RlOjQwMyxkZXNjcmlwdGlvbjoiQmxvY2tlZCBieSBwb2xpY3kifSxmcm9tOmUudG8sdG86ZS5mcm9tLHR5cGU6InJlc3BvbnNlIn07bihzKX19KX19LHtrZXk6ImF1dGhvcmlzZVN5bmMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXZvaWQgMDtpZihlLmJvZHk9ZS5ib2R5fHx7fSx0aGlzLl9pc1RvVmVyaWZ5KGUpKXt2YXIgcj10aGlzLl9pc0luY29taW5nTWVzc2FnZShlKTtyZXR1cm4gZT10aGlzLmNvbnRleHQucHJlcGFyZUZvckV2YWx1YXRpb24oZSxyKSx0PXRoaXMucGRwLmV2YWx1YXRlUG9saWNpZXMoZSxyKSwiTm90IEFwcGxpY2FibGUiPT09dCYmKHQ9dGhpcy5jb250ZXh0LmRlZmF1bHRCZWhhdmlvdXIsZS5ib2R5LmF1dGg9ITEpLHRoaXMuYWN0aW9uc1NlcnZpY2UuZW5mb3JjZVBvbGljaWVzKGUsciksZT10aGlzLmNvbnRleHQucHJlcGFyZVRvRm9yd2FyZChlLHIsdCksISF0JiYoZS5ib2R5LmF1dGg9dm9pZCAwPT09ZS5ib2R5LmF1dGh8fGUuYm9keS5hdXRoLCEwKX1yZXR1cm4hISh0PXRoaXMuY29udGV4dC5kZWZhdWx0QmVoYXZpb3VyKSYmKGUuYm9keS5hdXRoPSExLCEwKX19LHtrZXk6Il9pc0luY29taW5nTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dm9pZCAwOwovL1RPRE86IHRoaXMgc3Vic2NyaWJlciB2YWxpZGF0aW9uIHNob3VsZCBub3QgZXhpc3QsIGJlY2F1c2UgaXMgb3V0ZGF0ZWQKLy9UT0RPOiB0aGUgc3luY2hlciBhbmQgc3luY2hlciBtYW5hZ2VyIG5vdCBmb2xsb3dpbmcgdGhlIGNvcnJlY3Qgc3BlYzsKLy9UT0RPOiB0aGlzIHN1YnNjcmliZXIgdmFsaWRhdGlvbiBzaG91bGQgbm90IGV4aXN0LCBiZWNhdXNlIGlzIG91dGRhdGVkCi8vVE9ETzogdGhlIHN5bmNoZXIgYW5kIHN5bmNoZXIgbWFuYWdlciBub3QgZm9sbG93aW5nIHRoZSBjb3JyZWN0IHNwZWM7CnJldHVybiJmb3J3YXJkIj09PWUudHlwZT8oYi5pbmZvKCJbUEVQIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gbWVzc2FnZS50eXBlOiAiLGUudHlwZSksdD1lLmJvZHkuZnJvbSk6ZS5ib2R5Lmhhc093blByb3BlcnR5KCJzb3VyY2UiKSYmZS5ib2R5LnNvdXJjZT8oYi5pbmZvKCJbUEVQIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gbWVzc2FnZS5ib2R5LnNvdXJjZTogIixlLmJvZHkuc291cmNlKSx0PWUuYm9keS5zb3VyY2UpOmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgic3Vic2NyaWJlciIpJiZlLmJvZHkuc3Vic2NyaWJlcj8oYi5pbmZvKCJbUEVQIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gbWVzc2FnZS5ib2R5LnN1YnNjcmliZXI6ICIsZS5ib2R5LnN1YnNjcmliZXIpLHQ9ZS5ib2R5LnN1YnNjcmliZXIpOmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgicmVwb3J0ZXIiKSYmZS5ib2R5LnJlcG9ydGVyPyhiLmluZm8oIltQRVAgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLmJvZHkucmVwb3J0ZXI6ICIsZS5ib2R5LnJlcG9ydGVyKSx0PWUuYm9keS5yZXBvcnRlcik6KGIuaW5mbygiW1BFUCAtIGlzSW5jb21pbmdNZXNzYWdlXSAtIG1lc3NhZ2UuZnJvbSAiLGUuZnJvbSksdD1lLmZyb20pLGIuaW5mbygiW1BFUCAtIGlzSW5jb21pbmdNZXNzYWdlXSAtIGNoZWNrIGlmIGlzTG9jYWw6ICIsdCksIXRoaXMuY29udGV4dC5pc0xvY2FsKHQpfX0se2tleToiX2lzVG9WZXJpZnkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVsiZG9tYWluIiwiZG9tYWluLWlkcCIsImdsb2JhbCIsImh5cGVydHktcnVudGltZSIsInJ1bnRpbWUiXSxyPWUuZnJvbS5zcGxpdCgiOi8vIiksbj1yWzBdLGk9ZS50by5zcGxpdCgiOi8vIiksbz1pWzBdLGE9ZS5mcm9tLHM9ZS50bzsKLy8gU2lnbmFsbGluZyBtZXNzYWdlcyBiZXR3ZWVuIFAyUCBTdHVicyBkb24ndCBoYXZlIHRvIGJlIHZlcmlmaWVkLiBGRlMKLy8gaGFjayB0byBkaXNhYmxlIElkZW50aXR5IHZlcmlmaWNhdGlvbiBmb3IgbWVzc2FnZXMgY29taW5nIGZyb20gbGVnYWN5IGRvbWFpbnMgd2hpbGUgc29sdXRpb24gaXMgbm90IGltcGxlbWVudGVkCnJldHVybiBlLmJvZHkmJmUuYm9keS5zb3VyY2UmJihhPWUuYm9keS5zb3VyY2UpLGUuYm9keSYmZS5ib2R5LnN1YnNjcmliZXImJihhPWUuYm9keS5zdWJzY3JpYmVyKSwtMT09PWEuaW5kZXhPZigiL3AycGhhbmRsZXIvIikmJi0xPT09YS5pbmRleE9mKCIvcDJwcmVxdWVzdGVyLyIpJiYtMT09PXMuaW5kZXhPZigiL3AycGhhbmRsZXIvIikmJi0xPT09cy5pbmRleE9mKCIvcDJwcmVxdWVzdGVyLyIpJiYoIXRoaXMuY29udGV4dC5pc0ludGVyd29ya2luZ1Byb3RvU3R1YihhKSYmKCEoZS5mcm9tPT09bnx8ZS50bz09PW98fCJyZWFkIj09PWUudHlwZXx8InJlc3BvbnNlIj09PWUudHlwZXx8KDAsZy5pc0h5cGVydHlVUkwpKGUuZnJvbSkmJiJkZWxldGUiPT09ZS50eXBlKSYmKC0xPT09dC5pbmRleE9mKG4pfHwtMT09PXQuaW5kZXhPZihvKSkpKX19LHtrZXk6InJlbW92ZVBvbGljeSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoInNvdXJjZSBpcyBub3QgZGVmaW5lZCIpO2lmKCIqIiE9PWUmJiF0KXRocm93IG5ldyBFcnJvcigia2V5IGlzIG5vdCBkZWZpbmVkIik7c3dpdGNoKGUpe2Nhc2UiKiI6dGhpcy5jb250ZXh0LnNlcnZpY2VQcm92aWRlclBvbGljeT17fSx0aGlzLmNvbnRleHQudXNlclBvbGljaWVzPXt9LHRoaXMuY29udGV4dC5hY3RpdmVVc2VyUG9saWN5PXZvaWQgMCx0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKCJVU0VSIiksdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcygiU0VSVklDRV9QUk9WSURFUiIpLHRoaXMuY29udGV4dC5zYXZlQWN0aXZlUG9saWN5KCk7YnJlYWs7Y2FzZSJTRVJWSUNFX1BST1ZJREVSIjpkZWxldGUgdGhpcy5jb250ZXh0LnNlcnZpY2VQcm92aWRlclBvbGljeVt0XSx0aGlzLmNvbnRleHQuc2F2ZVBvbGljaWVzKCk7YnJlYWs7Y2FzZSJVU0VSIjpkZWxldGUgdGhpcy5jb250ZXh0LnVzZXJQb2xpY2llc1t0XSx0PT09dGhpcy5jb250ZXh0LmFjdGl2ZVVzZXJQb2xpY3kmJih0aGlzLmNvbnRleHQuYWN0aXZlVXNlclBvbGljeT12b2lkIDAsdGhpcy5jb250ZXh0LnNhdmVBY3RpdmVQb2xpY3koKSksdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcygiVVNFUiIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gcG9saWN5IHNvdXJjZTogIitlKX19fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0Lm1lc3NhZ2VCdXN9LHNldDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuY29udGV4dC5tZXNzYWdlQnVzPWUsdC5hZGRHVUlMaXN0ZW5lcnMoKX19XSksUEVQfSgpO3QuZGVmYXVsdD1tLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ3MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBBY3Rpb25zU2VydmljZShlKXsoMCxhLmRlZmF1bHQpKHRoaXMsQWN0aW9uc1NlcnZpY2UpLHRoaXMuY29udGV4dD1lfXJldHVybigwLHUuZGVmYXVsdCkoQWN0aW9uc1NlcnZpY2UsW3trZXk6ImVuZm9yY2VQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIG89ci5jb250ZXh0LmdldFBvbGljaWVzKGUsdCk7dm9pZCAwIT09bz92b2lkIDAhPT1vLnNlcnZpY2VQcm92aWRlclBvbGljeT9vLnNlcnZpY2VQcm92aWRlclBvbGljeS5lbmZvcmNlQWN0aW9ucyhyLmNvbnRleHQsZSkudGhlbihmdW5jdGlvbihlKXtuKGUpfSxmdW5jdGlvbihlKXtpKGUpfSk6dm9pZCAwIT09by51c2VyUG9saWN5P28udXNlclBvbGljeS5lbmZvcmNlQWN0aW9ucyhyLmNvbnRleHQsZSkudGhlbihmdW5jdGlvbihlKXtuKGUpfSxmdW5jdGlvbihlKXtpKGUpfSk6bihbZV0pOm4oW2VdKX0pfX0se2tleToiZm9yd2FyZFRvSUQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeSl0aHJvdyBuZXcgRXJyb3IoImZvcndhcmQgbWVzc2FnZSB0byBnaXZlbiBJRCBpcyB1bnN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50Iik7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obixpKXtpZihyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5Lmh5cGVydGllc0xpc3RbMF0uaHlwZXJ0eVVSTD09PWUudG8peyJydW50aW1lIiE9PWUudG8uc3BsaXQoIjovLyIpWzBdP3IuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuZGlzY292ZXJIeXBlcnR5UGVyVXNlcih0KS50aGVuKGZ1bmN0aW9uKHQpe2UudG89dC5oeXBlcnR5VVJMLGUuYm9keS52aWE9dm9pZCAwLG4oZSksci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShlKX0sZnVuY3Rpb24oZSl7aShlKX0pOm4oZSl9ZWxzZSBuKGUpfSl9fSx7a2V5OiJmb3J3YXJkVG9IeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoIXIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkpdGhyb3cgbmV3IEVycm9yKCJmb3J3YXJkIG1lc3NhZ2UgdG8gZ2l2ZW4gSUQgaXMgdW5zdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCIpO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4pe2lmKHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuaHlwZXJ0aWVzTGlzdFswXS5oeXBlcnR5VVJMPT09ZS50byl7InJ1bnRpbWUiIT09ZS50by5zcGxpdCgiOi8vIilbMF0/KGUudG89dCxlLmJvZHkudmlhPXZvaWQgMCxuKGUpLHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSkpOm4oZSl9ZWxzZSBuKGUpfSl9fSx7a2V5OiJzZW5kQXV0b21hdGljTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4pe3ZhciBpPXtmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e3ZhbHVlOnR9LHR5cGU6ZS50eXBlfTtuKGUpLHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSl9KX19XSksQWN0aW9uc1NlcnZpY2V9KCk7dC5kZWZhdWx0PWMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDcxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDE0MiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBQRFAoZSl7KDAsaS5kZWZhdWx0KSh0aGlzLFBEUCksdGhpcy5jb250ZXh0PWUsdGhpcy5vcGVyYXRvcnM9bmV3IHUuZGVmYXVsdH1yZXR1cm4oMCxhLmRlZmF1bHQpKFBEUCxbe2tleToiZXZhbHVhdGVQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmNvbnRleHQuZ2V0UG9saWNpZXMoZSx0KSxuPSJOb3QgQXBwbGljYWJsZSI7aWYodm9pZCAwIT09ciYmKChuPXRoaXMuZXZhbHVhdGVQb2xpY3koZSxyLnNlcnZpY2VQcm92aWRlclBvbGljeSx0KSl8fCJOb3QgQXBwbGljYWJsZSI9PT1uKSl7dmFyIGk9dGhpcy5ldmFsdWF0ZVBvbGljeShlLHIudXNlclBvbGljeSx0KTsiTm90IEFwcGxpY2FibGUiIT09aSYmKG49aSl9cmV0dXJuIG59fSx7a2V5OiJldmFsdWF0ZVBvbGljeSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPSJOb3QgQXBwbGljYWJsZSI7cmV0dXJuIHQmJihuPXQuZXZhbHVhdGVSdWxlcyh0aGlzLmNvbnRleHQsZSxyKSksbn19XSksUERQfSgpO3QuZGVmYXVsdD1jLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ3MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyMDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMjAzKSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDIwNCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig0NzMpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUG9saWN5KGUsdCxyLG4pe2lmKCgwLGEuZGVmYXVsdCkodGhpcyxQb2xpY3kpLCFlKXRocm93IG5ldyBFcnJvcigia2V5IGlzIG5vdCBkZWZpbmVkIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJhY3Rpb25zIGFyZSBub3QgZGVmaW5lZCIpO3RoaXMuYWN0aW9ucz1yLHRoaXMua2V5PWUsdGhpcy5fc2V0UnVsZXModCksdGhpcy5fc2V0Q29tYmluaW5nQWxnb3JpdGhtKG4pfXJldHVybigwLHUuZGVmYXVsdCkoUG9saWN5LFt7a2V5OiJhZGRBY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5hY3Rpb25zLnB1c2goe21ldGhvZDplLHBhcmFtOnR9KX19LHtrZXk6ImNyZWF0ZVJ1bGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7dm9pZCAwPT09aSYmKGk9dGhpcy5nZXRMYXN0UHJpb3JpdHkoKSsxKTt2YXIgbz1uZXcgdi5kZWZhdWx0KGUsdCxyLG4saSk7dGhpcy5ydWxlcy5wdXNoKG8pfX0se2tleToiZGVsZXRlUnVsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ydWxlcy5pbmRleE9mKGUpO3RoaXMucnVsZXMuc3BsaWNlKHQsMSl9fSx7a2V5OiJlbmZvcmNlQWN0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGE9W107aWYoMCE9PXIuYWN0aW9ucy5sZW5ndGgpe2Zvcih2YXIgcyBpbiByLmFjdGlvbnMpe3ZhciB1PWUucGVwLmFjdGlvbnNTZXJ2aWNlW3IuYWN0aW9uc1tzXS5tZXRob2RdKHQsci5hY3Rpb25zW3NdLnBhcmFtKTthLnB1c2godSl9aS5kZWZhdWx0LmFsbChhKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9LGZ1bmN0aW9uKGUpe28oZSl9KX1lbHNlIG4oW3RdKX0pfX0se2tleToiZXZhbHVhdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVtdO2Zvcih2YXIgaSBpbiB0aGlzLnJ1bGVzKW4ucHVzaCh0aGlzLnJ1bGVzW2ldLmV2YWx1YXRlKGUsdCxyKSk7cmV0dXJuIHRoaXMuY29tYmluaW5nQWxnb3JpdGhtLmNvbWJpbmUobil9fSx7a2V5OiJnZXRMYXN0UHJpb3JpdHkiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9W107aWYoMCE9PXRoaXMucnVsZXMubGVuZ3RoKXtmb3IodmFyIHQgaW4gdGhpcy5ydWxlcyllLnB1c2godGhpcy5ydWxlc1t0XS5wcmlvcml0eSk7cmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsZSl9cmV0dXJuLTF9fSx7a2V5OiJnZXRSdWxlQnlQcmlvcml0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMucnVsZXMpaWYoU3RyaW5nKHRoaXMucnVsZXNbdF0ucHJpb3JpdHkpPT09U3RyaW5nKGUpKXJldHVybiB0aGlzLnJ1bGVzW3RdO3Rocm93IEVycm9yKCJSdWxlIHdpdGggcHJpb3JpdHkgIitlKyIgZG9lcyBub3QgZXhpc3QhIil9fSx7a2V5OiJfc2V0Q29tYmluaW5nQWxnb3JpdGhtIix2YWx1ZTpmdW5jdGlvbihlKXtzd2l0Y2goZXx8KGU9ImJsb2NrT3ZlcnJpZGVzIiksZSl7Y2FzZSJibG9ja092ZXJyaWRlcyI6dGhpcy5jb21iaW5pbmdBbGdvcml0aG09bmV3IGQuZGVmYXVsdDticmVhaztjYXNlImFsbG93T3ZlcnJpZGVzIjp0aGlzLmNvbWJpbmluZ0FsZ29yaXRobT1uZXcgZi5kZWZhdWx0O2JyZWFrO2Nhc2UiZmlyc3RBcHBsaWNhYmxlIjp0aGlzLmNvbWJpbmluZ0FsZ29yaXRobT1uZXcgeS5kZWZhdWx0O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gYWxnb3JpdGhtOiAiK2UpfX19LHtrZXk6Il9zZXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ydWxlcz1bXTtmb3IodmFyIHQgaW4gZSl7dmFyIHI9ZVt0XTt2b2lkIDA9PT1yLnByaW9yaXR5JiYoci5wcmlvcml0eT10aGlzLmdldExhc3RQcmlvcml0eSgpKzEpLHIgaW5zdGFuY2VvZiB2LmRlZmF1bHR8fChyPW5ldyB2LmRlZmF1bHQoci5kZWNpc2lvbixyLmNvbmRpdGlvbixyLnNjb3BlLHIudGFyZ2V0LHIucHJpb3JpdHkpKSx0aGlzLnJ1bGVzLnB1c2gocil9fX0se2tleToic29ydFJ1bGVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bGVzLnNvcnQoZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnByaW9yaXR5LG49dC5wcmlvcml0eTtyZXR1cm4gcjxuPy0xOnI+bj8xOjB9KX19XSksUG9saWN5fSgpO3QuZGVmYXVsdD1nLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ3MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cig0NzQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTQzKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDE1KSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUnVsZShlLHQscixuLG8peygwLGkuZGVmYXVsdCkodGhpcyxSdWxlKSx0aGlzLmRlY2lzaW9uPWUsdGhpcy5zZXRDb25kaXRpb24odCksdGhpcy5wcmlvcml0eT1vLHRoaXMuc2NvcGU9cix0aGlzLnRhcmdldD1ufXJldHVybigwLGEuZGVmYXVsdCkoUnVsZSxbe2tleToic2V0Q29uZGl0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgZi5kZWZhdWx0fHxlIGluc3RhbmNlb2YgdS5kZWZhdWx0fHxlIGluc3RhbmNlb2YgdS5kZWZhdWx0KXRoaXMuY29uZGl0aW9uPWU7ZWxzZXtzd2l0Y2goZS5hdHRyaWJ1dGUpe2Nhc2Uic3Vic2NyaXB0aW9uIjp0aGlzLmNvbmRpdGlvbj1uZXcgdS5kZWZhdWx0KGUuYXR0cmlidXRlLGUub3BlcmF0b3IsZS5wYXJhbXMpO2JyZWFrO2Nhc2Ugdm9pZCAwOnRoaXMuY29uZGl0aW9uPW5ldyB1LmRlZmF1bHQoZSk7YnJlYWs7ZGVmYXVsdDp0aGlzLmNvbmRpdGlvbj1uZXcgZi5kZWZhdWx0KGUuYXR0cmlidXRlLGUub3BlcmF0b3IsZS5wYXJhbXMpfX19fSx7a2V5OiJldmFsdWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXI/dC50bzp0LmZyb20saT12b2lkIDA7c3dpdGNoKHRoaXMuc2NvcGUpe2Nhc2UiZ2xvYmFsIjpicmVhaztjYXNlImh5cGVydHkiOmlmKCgwLGwuaXNEYXRhT2JqZWN0VVJMKShuKSl7dmFyIG89ZS5ydW50aW1lUmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKCgwLGwucmVtb3ZlUGF0aEZyb21VUkwpKG4pKTt2b2lkIDAhPT1vJiYoaT1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZShvKSl9ZWxzZSJoeXBlcnR5Ij09PW4uc3BsaXQoIjovLyIpWzBdJiYoaT1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZSgoMCxsLnJlbW92ZVBhdGhGcm9tVVJMKShuKSkpO2lmKGk9PT10aGlzLnRhcmdldClicmVhaztyZXR1cm4iTm90IEFwcGxpY2FibGUiO2Nhc2UiaWRlbnRpdHkiOnZhciBhPXZvaWQgMDtpZigoMCxsLmlzRGF0YU9iamVjdFVSTCkobikpe3ZhciBzPWUucnVudGltZVJlZ2lzdHJ5LmdldFJlcG9ydGVyVVJMU3luY2hvbm91cygoMCxsLnJlbW92ZVBhdGhGcm9tVVJMKShuKSk7YT1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIocyl9ZWxzZSJoeXBlcnR5Ij09PW4uc3BsaXQoIjovLyIpWzBdJiYoYT1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoKDAsbC5yZW1vdmVQYXRoRnJvbVVSTCkobikpKTtpZih2b2lkIDAhPT1hJiYoYT0oMCxsLmdldFVzZXJFbWFpbEZyb21VUkwpKGEpKSxhPT09dGhpcy50YXJnZXQpYnJlYWs7cmV0dXJuIk5vdCBBcHBsaWNhYmxlIn1yZXR1cm4gdGhpcy5jb25kaXRpb24uaXNBcHBsaWNhYmxlKGUsdCx0aGlzLnNjb3BlLHRoaXMudGFyZ2V0KT90aGlzLmRlY2lzaW9uOiJOb3QgQXBwbGljYWJsZSJ9fV0pLFJ1bGV9KCk7dC5kZWZhdWx0PWQsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDc0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDE0MyksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxNDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNDc1KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIEFkdmFuY2VkQ29uZGl0aW9uKGUpeygwLGkuZGVmYXVsdCkodGhpcyxBZHZhbmNlZENvbmRpdGlvbiksdGhpcy5vcGVyYXRvcnM9bmV3IGYuZGVmYXVsdCx2b2lkIDAhPT1lLm9wZXJhdG9ycyYmKGU9ZS5jb25kaXRpb24pLGU9dGhpcy5idWlsZENvbmRpdGlvbihlKSx0aGlzLmNvbmRpdGlvbj1lfXJldHVybigwLGEuZGVmYXVsdCkoQWR2YW5jZWRDb25kaXRpb24sW3trZXk6ImJ1aWxkQ29uZGl0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlWzFdKT9lWzFdPXRoaXMuYnVpbGRDb25kaXRpb24oZVsxXSk6InN1YnNjcmlwdGlvbiI9PT1lWzFdLmF0dHJpYnV0ZT9lWzFdPW5ldyBkLmRlZmF1bHQoZVsxXS5hdHRyaWJ1dGUsZVsxXS5vcGVyYXRvcixlWzFdLnBhcmFtcyk6ZVsxXT1uZXcgdS5kZWZhdWx0KGVbMV0uYXR0cmlidXRlLGVbMV0ub3BlcmF0b3IsZVsxXS5wYXJhbXMpLHZvaWQgMCE9PWVbMl0mJihBcnJheS5pc0FycmF5KGVbMl0pP2VbMl09dGhpcy5idWlsZENvbmRpdGlvbihlWzJdKToic3Vic2NyaXB0aW9uIj09PWVbMl0uYXR0cmlidXRlP2VbMl09bmV3IGQuZGVmYXVsdChlWzJdLmF0dHJpYnV0ZSxlWzJdLm9wZXJhdG9yLGVbMl0ucGFyYW1zKTplWzJdPW5ldyB1LmRlZmF1bHQoZVsyXS5hdHRyaWJ1dGUsZVsyXS5vcGVyYXRvcixlWzJdLnBhcmFtcykpLGV9fSx7a2V5OiJpc0FwcGxpY2FibGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSxvLGEpe2ZvcihpfHwoaT10aGlzLmNvbmRpdGlvblswXSxvPXRoaXMuY29uZGl0aW9uWzFdLGE9dGhpcy5jb25kaXRpb25bMl0pOyEobyBpbnN0YW5jZW9mIHUuZGVmYXVsdCkmIShvIGluc3RhbmNlb2YgZC5kZWZhdWx0KSYiYm9vbGVhbiIhPXR5cGVvZiBvOylvPXRoaXMuaXNBcHBsaWNhYmxlKGUsdCxyLG4sb1swXSxvWzFdLG9bMl0pO2lmKHZvaWQgMCE9PWEpZm9yKDshKGEgaW5zdGFuY2VvZiB1LmRlZmF1bHQpJiEoYSBpbnN0YW5jZW9mIGQuZGVmYXVsdCkmImJvb2xlYW4iIT10eXBlb2YgYTspYT10aGlzLmlzQXBwbGljYWJsZShlLHQscixuLGFbMF0sYVsxXSxhWzJdKTt2YXIgcz0iYm9vbGVhbiI9PXR5cGVvZiBvP286by5pc0FwcGxpY2FibGUoZSx0LHIsbiksYz12b2lkIDA7cmV0dXJuIHZvaWQgMCE9PWEmJihjPSJib29sZWFuIj09dHlwZW9mIGE/YTphLmlzQXBwbGljYWJsZShlLHQscixuKSksdGhpcy5vcGVyYXRvcnNbaV0oW3MsY10pfX1dKSxBZHZhbmNlZENvbmRpdGlvbn0oKTt0LmRlZmF1bHQ9cCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig2MCksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoNjgpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNDc2KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDY5KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDE0Myksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9ZnVuY3Rpb24oZSl7LyoqCiAgKiBDcmVhdGVzIGEgbmV3IFN1YnNjcmlwdGlvbkNvbmRpdGlvbi4KICAqIEBjbGFzcwogICogQHBhcmFtICB7c3RyaW5nfSAgYXR0cmlidXRlCiAgKiBAcGFyYW0gIHtzdHJpbmd9ICBvcGVyYXRvcgogICogQHBhcmFtICB7Kn0gICAgICAgcGFyYW1zCiAgKi8KZnVuY3Rpb24gU3Vic2NyaXB0aW9uQ29uZGl0aW9uKGUsdCxyKXtyZXR1cm4oMCxhLmRlZmF1bHQpKHRoaXMsU3Vic2NyaXB0aW9uQ29uZGl0aW9uKSwoMCxmLmRlZmF1bHQpKHRoaXMsKFN1YnNjcmlwdGlvbkNvbmRpdGlvbi5fX3Byb3RvX198fCgwLGkuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uKSkuY2FsbCh0aGlzLGUsdCxyKSl9LyoqCiAgKiBWZXJpZmllcyBpZiB0aGUgc3Vic2NyaXB0aW9uIGNvbmRpdGlvbiBpcyBhcHBsaWNhYmxlIHRvIHRoZSBtZXNzYWdlLiBGaXJzdCwgdmVyaWZpZXMgaWYgdGhlIG1lc3NhZ2UgaXMgb2YgdGhlIHN1YnNjcmlwdGlvbiB0eXBlOyBzZWNvbmQsIHZlcmlmaWVzIGlmIHRoZSBtZXNzYWdlIGlzIGZyb20gYSByZW1vdGUgcnVudGltZSB0byBndWFyYW50ZWUgdGhhdCB0aGUgc3Vic2NyaXB0aW9uIGlzIGJlaW5nIHZhbGlkYXRlZCBpbiB0aGUgZGVzdGluYXRpb24gcnVudGltZTsgdGhpcmQsIHZlcmlmaWVzIGlmIHRoZSBzdWJzY3JpcHRpb24gcHJlZmVyZW5jZSBpcyBtZXQuCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGNvbnRleHQgICBlbnZpcm9ubWVudCB3aGVyZSB0aGUgUG9saWN5IEVuZ2luZSBpcyBiZWluZyB1c2VkCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIG1lc3NhZ2UKICAqLwpyZXR1cm4oMCx5LmRlZmF1bHQpKFN1YnNjcmlwdGlvbkNvbmRpdGlvbixlKSwoMCx1LmRlZmF1bHQpKFN1YnNjcmlwdGlvbkNvbmRpdGlvbixbe2tleToiaXNBcHBsaWNhYmxlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEhKCJzdWJzY3JpYmUiPT09dC50eXBlJmUuaXNGcm9tUmVtb3RlU00odC5mcm9tKSkmJigwLGQuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLGkuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLnByb3RvdHlwZSksImlzQXBwbGljYWJsZSIsdGhpcykuY2FsbCh0aGlzLGUsdCl9fV0pLFN1YnNjcmlwdGlvbkNvbmRpdGlvbn0odi5kZWZhdWx0KTsvKioKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAqKi8KdC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoNjApLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoNDc3KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobyk7dC5kZWZhdWx0PWZ1bmN0aW9uIGdldChlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAsYS5kZWZhdWx0KShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBvPSgwLGkuZGVmYXVsdCkoZSk7cmV0dXJuIG51bGw9PT1vP3ZvaWQgMDpnZXQobyx0LHIpfWlmKCJ2YWx1ZSJpbiBuKXJldHVybiBuLnZhbHVlO3ZhciBzPW4uZ2V0O2lmKHZvaWQgMCE9PXMpcmV0dXJuIHMuY2FsbChyKX19LC8qIDQ3NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDc4KSxfX2VzTW9kdWxlOiEwfX0sLyogNDc4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ3OSk7dmFyIG49cigxMykuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpfX0sLyogNDc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQp2YXIgbj1yKDQ0KSxpPXIoMTQxKS5mO3IoOTcpKCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkobihlKSx0KX19KX0sLyogNDgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDYpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoNjApLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDY4KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDY5KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDExKSx2PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oaCksZz1yKDIwMCksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLG09cig0ODEpLF89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSxSPXYuZ2V0TG9nZ2VyKCJNZXNzYWdlQnVzIiksdz1mdW5jdGlvbihlKXsvKiBwcml2YXRlCiAgX3JlZ2lzdHJ5OiBSZWdpc3RyeQogIF9mb3J3YXJkczogeyA8ZnJvbS11cmw+OiB7IGZsOiBNc2dMaXN0ZW5lciwgc2FuZGJveFRvVXJsczogTWFwKFNhbmRib3gsIFt0by11cmxdKSwgdXJsVG9TYW5kYm94OiB7IHRvLXVybDogU2FuZGJveCB9IH0gfQogICBfcGlwZWxpbmU6IFBpcGVsaW5lCiAgKi8KLy9UT0RPOiBmdXR1cmUgb3B0aW1pemF0aW9uCi8vMS4gbWVzc2FnZSBiYXRjaCBwcm9jZXNzaW5nIHdpdGggc2V0SW50ZXJ2YWwKLy8yLiByZXNvbHZlIGRlZmF1bHQgZ2F0ZXdheS9wcm90b3N0dWIgd2l0aCByZWdpc3Rlci5yZXNvbHZlCmZ1bmN0aW9uIE1lc3NhZ2VCdXMoZSl7KDAsdS5kZWZhdWx0KSh0aGlzLE1lc3NhZ2VCdXMpO3ZhciB0PSgwLGQuZGVmYXVsdCkodGhpcywoTWVzc2FnZUJ1cy5fX3Byb3RvX198fCgwLGEuZGVmYXVsdCkoTWVzc2FnZUJ1cykpLmNhbGwodGhpcykpO3JldHVybiB0Ll9yZWdpc3RyeT1lLHQuX2ZvcndhcmRzPXt9LHQuX3BpcGVsaW5lPW5ldyBfLmRlZmF1bHQoZnVuY3Rpb24oZSl7Ui5lcnJvcigiUElQRUxJTkUtRVJST1I6ICIsKDAsaS5kZWZhdWx0KShlKSl9KSx0fXJldHVybigwLHkuZGVmYXVsdCkoTWVzc2FnZUJ1cyxlKSwoMCxmLmRlZmF1bHQpKE1lc3NhZ2VCdXMsW3trZXk6InBvc3RNZXNzYWdlIiwvKioKICAgICAqIFBvc3QgYSBtZXNzYWdlIGZvciByb3V0aW5nLiBJdCB3aWxsIGZpcnN0IHNlYXJjaCBmb3IgYSBsaXN0ZW5lciwgaWYgdGhlcmUgaXMgbm8gb25lLCBpdCBzZW5kcyB0byBhIGV4dGVybmFsIHJvdXRpbmcgdXNpbmcgdGhlIF9vblBvc3RNZXNzYWdlLgogICAgICogRXh0ZXJuYWwgcm91dGluZyB1c2UgdGhlIHJlZ2lzdHJ5LnJlc29sdmUoLi4pIG1ldGhvZCB0byBkZWNpZGUgdGhlIGRlc3RpbmF0aW9uIHNhbmRib3guCiAgICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBpbk1zZyAgICAgICAgICAgIEpTT04gd2l0aCBtYW5kYXRvcnkgTWVzc2FnZSBzdHJ1Y3R1cmUge2lkLCB0eXBlLCBmcm9tLCB0b30KICAgICAqIEBwYXJhbSAge0NhbGxiYWNrfSByZXNwb25zZUNhbGxiYWNrIE9wdGlvbmFsIGNhbGxiYWNrIGlmIGEgcmVzcG9uc2UgaXMgZXhwZWN0ZWQgZnJvbSB0aGUgcmVxdWVzdC4gQSByZXNwb25zZSB3aWxsIGJlIGFsd2F5cyBzZW50LCBldmVuIGlmIGl0IGlzIGEgIlRpbWVvdXQiLgogICAgICogQHJldHVybiB7bnVtYmVyfSAgICAgICAgICAgICAgICAgIHRoZSBNZXNzYWdlIGlkCiAgICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSx0KXtSLmluZm8oIm9uUE9TVE1lc3NhZ2U6ICIsZSk7dmFyIHI9dGhpcztyZXR1cm4gci5fZ2VuSWQoZSksci5fcGlwZWxpbmUucHJvY2VzcyhlLGZ1bmN0aW9uKG4pe2lmKHIuX3Jlc3BvbnNlQ2FsbGJhY2soZSx0KSwhci5fb25SZXNwb25zZShuKSl7dmFyIGk9ci5fc3Vic2NyaXB0aW9uc1tuLnRvXTtpPwovL2RvIG5vdCBwdWJsaXNoIG9uIGRlZmF1bHQgYWRkcmVzcywgYmVjYXVzZSBvZiBsb29wYmFjayBjeWNsZQpyLl9wdWJsaXNoT24oaSxuKToKLy9pZiB0aGVyZSBpcyBubyBsaXN0ZW5lciwgc2VuZCB0byBleHRlcm5hbCBpbnRlcmZhY2UKci5fb25Qb3N0TWVzc2FnZShuKX19KSxlLmlkfX0se2tleToiYWRkUHVibGlzaCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMsbj1yLl9mb3J3YXJkc1tlXTtpZighbil7bj17Y291bnRlcjowLGZsOnIuYWRkTGlzdGVuZXIoZSxmdW5jdGlvbih0KXtSLmluZm8oIk1CLVBVQkxJU0g6ICggIitlKyIgKSIpLHIuX29uUG9zdE1lc3NhZ2UodCl9KSxyZW1vdmU6ZnVuY3Rpb24oKXswPT09LS10LmNvdW50ZXImJih0LmZsLnJlbW92ZSgpLGRlbGV0ZSByLl9mb3J3YXJkc1tlXSl9fSxyLl9mb3J3YXJkc1tlXT1ufXJldHVybiBuLmNvdW50ZXIrKyxufX0se2tleToiYWRkRm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiByLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24obil7Ui5pbmZvKCJNQi1GT1JXQVJEOiAoICIrZSsiIHRvICIrdCsiICkiKSxyLmZvcndhcmQodCxuKX0pfX0se2tleToiZm9yd2FyZCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ci5fc3Vic2NyaXB0aW9uc1tlXTtuJiZyLl9wdWJsaXNoT24obix0KX19LHtrZXk6Il9vblBvc3RNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOwovL3Jlc29sdmUgZXh0ZXJuYWwgcHJvdG9zdHViLi4uCnQuX3JlZ2lzdHJ5LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihyLG4pe24/dC5mb3J3YXJkKHIsbik6dC5mb3J3YXJkKHIsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtSLmVycm9yKCJSRVNPTFZFLUVSUk9SOiAiLGUpfSl9fSx7a2V5OiJwaXBlbGluZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpcGVsaW5lfX1dKSxNZXNzYWdlQnVzfShiLmRlZmF1bHQpO3QuZGVmYXVsdD13LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9ZnVuY3Rpb24oKXsvKiBwdWJsaWMKICAgIGhhbmRsZXJzOiAoKFBpcGVDb250ZXh0KSA9PiB2b2lkKVtdCiAgICBvbkZhaWw6IChlcnJvcikgPT4gdm9pZAogICovCmZ1bmN0aW9uIFBpcGVsaW5lKGUpeygwLGkuZGVmYXVsdCkodGhpcyxQaXBlbGluZSk7dmFyIHQ9dGhpczt0LmhhbmRsZXJzPVtdLHQub25GYWlsPWV9LyoqCiAgICogSW5zZXJ0IGEgbWVzc2FnZSBpbiB0aGUgcGlwZWxpbmUgcXVldWUuIEFsbCBtZXNzYWdlcyBhcmUgd3JhcHBlZCB3aXRoIGEgUGlwZUNvbnRleHQuCiAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnICAgICAgIE1lc3NhZ2UgZm9yIHRoZSBxdWV1ZQogICAqIEBwYXJhbSAge0NhbGxiYWNrfSBvbkRlbGl2ZXIgV2hlbiBtZXNzYWdlIGlzIGZpbmlzaGVkIHByb2Nlc3NpbmcgZnJvbSBhbGwgaGFuZGxlcnMsIGl0IHdpbGwgYmUgZGVsaXZlcmVkIGluIHRoaXMgY2FsbGJhY2suCiAgICovCnJldHVybigwLGEuZGVmYXVsdCkoUGlwZWxpbmUsW3trZXk6InByb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLmhhbmRsZXJzLmxlbmd0aD4wKXt2YXIgbj1uZXcgYyhyLmhhbmRsZXJzKTtuLm5leHQobmV3IHUocixuLGUsdCkpfWVsc2UgdChlKX19XSksUGlwZWxpbmV9KCksdT1mdW5jdGlvbigpey8qIHByaXZhdGUKICAgIF9pblN0b3A6IGJvb2xlYW4KICAgICBfcGlwZWxpbmU6IFBpcGVsaW5lCiAgICBfaXRlcjogSXRlcmF0b3IKICAgIF9tc2c6IE1lc3NhZ2UKICAqLwpmdW5jdGlvbiBQaXBlQ29udGV4dChlLHQscixuKXsoMCxpLmRlZmF1bHQpKHRoaXMsUGlwZUNvbnRleHQpO3ZhciBvPXRoaXM7by5faW5TdG9wPSExLG8uX3BpcGVsaW5lPWUsby5faXRlcj10LG8uX21zZz1yLG8uX29uRGVsaXZlcj1ufXJldHVybigwLGEuZGVmYXVsdCkoUGlwZUNvbnRleHQsW3trZXk6Im5leHQiLC8qKgogICAgICogUHJvY2VlZCB0byB0aGUgbmV4dCBpbnRlcmNlcHRvciBoYW5kbGVyLCB1bmxlc3MgdGhlcmUgd2FzIGFuIGVycm9yLiBJZiBpdCdzIHRoZSBsYXN0IG9uZSwgcHJvY2VlZCB0byBvbkRlbGl2ZXIgaGFuZGxlci4KICAgICAqLwp2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5TdG9wfHwoZS5faXRlci5oYXNOZXh0P2UuX2l0ZXIubmV4dChlKTplLl9vbkRlbGl2ZXIoZS5fbXNnKSl9fSx7a2V5OiJkZWxpdmVyIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5faW5TdG9wfHwoZS5faW5TdG9wPSEwLGUuX29uRGVsaXZlcihlLl9tc2cpKX19LHtrZXk6ImZhaWwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5faW5TdG9wfHwodC5faW5TdG9wPSEwLHQuX3BpcGVsaW5lLm9uRmFpbCYmdC5fcGlwZWxpbmUub25GYWlsKGUpKX19LHtrZXk6InBpcGVsaW5lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGlwZWxpbmV9fSx7a2V5OiJtc2ciLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tc2d9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9tc2c9ZX19XSksUGlwZUNvbnRleHR9KCksYz1mdW5jdGlvbigpey8qIHByaXZhdGUKICAgIF9pbmRleDogbnVtYmVyCiAgICBfYXJyYXk6IFtdCiAgKi8KZnVuY3Rpb24gSXRlcmF0b3IoZSl7KDAsaS5kZWZhdWx0KSh0aGlzLEl0ZXJhdG9yKSx0aGlzLl9pbmRleD0tMSx0aGlzLl9hcnJheT1lfXJldHVybigwLGEuZGVmYXVsdCkoSXRlcmF0b3IsW3trZXk6Imhhc05leHQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbmRleDx0aGlzLl9hcnJheS5sZW5ndGgtMX19LHtrZXk6Im5leHQiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbmRleCsrLHRoaXMuX2FycmF5W3RoaXMuX2luZGV4XX19XSksSXRlcmF0b3J9KCk7dC5kZWZhdWx0PXMsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDgyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOTYpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDExKSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDE1KSx5PXIoOTkpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSx2PWQuZ2V0TG9nZ2VyKCJsb2FkZXIiKSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTG9hZGVyKGUsdCxyKXtpZigoMCx1LmRlZmF1bHQpKHRoaXMsTG9hZGVyKSwhdCl0aHJvdyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgZGVzY3JpcHRvciBuZWVkIHRvIGtub3cgdGhlIHJ1bnRpbWUgY29uZmlndXJhdGlvbiIpO2lmKCFyKXRocm93IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBkZXNjcmlwdG9yIG5lZWQgdG8ga25vdyB0aGUgcnVudGltZSBEZXNjcmlwdG9yIGluc3RhbmNlIik7dGhpcy5sb2c9dix0aGlzLnJ1bnRpbWVDb25maWd1cmF0aW9uPXQsdGhpcy5kZXNjcmlwdG9ycz1yfS8qKgogICAqIFNldCBydW50aW1lIHVybAogICAqIEBwYXJhbSAge3N0cmluZ30gdmFsdWUgcnVudGltZVVSTAogICAqLwpyZXR1cm4oMCxmLmRlZmF1bHQpKExvYWRlcixbe2tleToibG9hZEh5cGVydHkiLC8qKgogICAgICogRGVwbG95IEh5cGVydHkgZnJvbSBDYXRhbG9ndWUgVVJMCiAgICAgKgogICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL3RyZWUvbWFzdGVyL2RhdGFtb2RlbC9jb3JlL2FkZHJlc3MKICAgICAqCiAgICAgKiBAcGFyYW0ge1VSTC5IeXBlcnR5Q2F0YWxvZ3VlVVJMfSBoeXBlcnR5Q2F0YWxvZ3VlVVJMIC0gVGhlIENhdGFsb2d1ZSBVUkwgdXNlZCB0byBpZGVudGlmeSBkZXNjcmlwdG9ycyBpbiB0aGUgQ2F0YWxvZ3VlLgogICAgICogQHBhcmFtIHtib29sZWFufFVSTC5IeXBlcnR5VVJMfSBbcmV1c2VVUkw9ZmFsc2VdIHJldXNlVVJMIC0gcmV1c2VVUkwgaXMgdXNlZCB0byByZXVzZSB0aGUgaHlwZXJ0eVVSTCBwcmV2aW91c2x5IHJlZ2lzdHJlZCwgYnkgZGVmYXVsdCB0aGUgcmV1c2UgaXMgZGlzYWJsZWQ7CiAgICAgKiBAcGFyYW0ge1VSTH0gYXBwVVJMIC0gdGhlIGFwcCB1cmwgb3JpZ2luIGFkZHJlc3M7CiAgICAgKiBAcGFyYW0ge29iamVjdH0gSWRwQ29uc3RyYWludCAtIGNvbnN0cmFpbnRzIHRvIGJlIHVzZWQgd2hlbiBzZWxlY3RpbmcgdGhlIGlkZW50aXR5IHRvIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgSHlwZXJ0eSBpbmNsdWRpbmcgb3JpZ2luLCBpZHAsIGFuZCBpZEhpbnQuCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxCb29sZWFuLCBFcnJvcj59IHRoaXMgaXMgUHJvbWlzZSBhbmQgcmV0dXJucyB0cnVlIGlmIGFsbCBjb21wb25lbnRzIGFyZSBsb2FkZWQgd2l0aCBzdWNjZXNzIG9yIGFuIGVycm9yIGlmIHNvbWVvbmUgZmFpbHMuCiAgICAgKgogICAgICogQG1lbWJlck9mIExvYWRlcgogICAgICovCnZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0scj10aGlzLG49YXJndW1lbnRzWzJdO2FyZ3VtZW50c1szXTtpZighdGhpcy5fcmVhZHlUb1VzZSgpKXJldHVybiExO2lmKCFlKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBIeXBlcnR5IGRlc2NyaXB0b3IgdXJsIHBhcmFtZXRlciBpcyBuZWVkZWQiKTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihvLGEpe3ZhciBzPXZvaWQgMCx1PXZvaWQgMCxjPXZvaWQgMCxmPXZvaWQgMCxsPSExLGQ9ZnVuY3Rpb24oZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIFNvbWV0aGluZyBmYWlsZWQgb24gdGhlIGRlcGxveSBoeXBlcnR5OiAiLGUpLGEoZSl9LHk9ZnVuY3Rpb24oZSl7bD0hMCxhKGUpfTsKLy8gR2V0IEh5cGVydHkgZGVzY3JpcHRvcgovLyBUT0RPOiB0aGUgcmVxdWVzdCBNb2R1bGUgc2hvdWxkIGJlIGNoYW5nZWQsCi8vIGJlY2F1c2UgYXQgdGhpcyBtb21lbnQgaXQgaXMgaW5jb21wYXRpYmxlIHdpdGggbm9kZWpzOwovLyBQcm9iYWJseSB3ZSBuZWVkIHRvIHBhc3MgYSBmYWN0b3J5IGxpa2Ugd2UgZG8gZm9yIHNhbmRib3hlczsKcmV0dXJuIHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAtLS0tLS0tLS0tLS0tLS0tLS0gSHlwZXJ0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKSx2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gR2V0IGh5cGVydHkgZGVzY3JpcHRvciBmb3IgOiIsZSksci5kZXNjcmlwdG9ycy5nZXRIeXBlcnR5RGVzY3JpcHRvcihlKS50aGVuKGZ1bmN0aW9uKGUpewovLyBhdCB0aGlzIHBvaW50LCB3ZSBoYXZlIGNvbXBsZXRlZCAic3RlcCAyIGFuZCAzIiBhcyBzaG93biBpbiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kCnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAxOiByZXR1cm4gaHlwZXJ0eSBkZXNjcmlwdG9yIiksCi8vIGh5cGVydHkgY29udGFpbnMgdGhlIGZ1bGwgcGF0aCBvZiB0aGUgY2F0YWxvZ3VlIFVSTCwgZS5nLgovLyBjYXRhbG9ndWUucmV0aGluay5ldS8ud2VsbC1rbm93bi8uLi4uLi4uLi4uCmM9ZTt2YXIgdD1lLnNvdXJjZVBhY2thZ2VVUkw7cmV0dXJuIi9zb3VyY2VQYWNrYWdlIj09PXQ/ZS5zb3VyY2VQYWNrYWdlOnIucnVudGltZUNhdGFsb2d1ZS5nZXRTb3VyY2VQYWNrYWdlRnJvbVVSTCh0KX0seSkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAyOiByZXR1cm4gaHlwZXJ0eSBzb3VyY2UgY29kZSIpLAovLyBhdCB0aGlzIHBvaW50LCB3ZSBoYXZlIGNvbXBsZXRlZCAic3RlcCA0IGFuZCA1IiBhcyBzaG93biBpbiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kCmY9ZTtyZXR1cm4hMH0seSkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAzOiByZXR1cm4gcG9saWN5IGVuZ2luZSByZXN1bHQiK2UpOwovLyB0aGlzIHdpbGwgcmV0dXJuIHRoZSBzYW5kYm94IG9yIG9uZSBwcm9taXNlIHRvIGdldFNhbmRib3g7CnJldHVybiByLnJlZ2lzdHJ5LmdldEFwcFNhbmRib3goKX0seSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA0OiByZXR1cm4gdGhlIHNhbmRib3giLGUpLGUpfSxmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA0LjE6IFRyeSB0byByZWdpc3RlciBhIG5ldyBzYW5kYm94Iik7Ci8vIGNoZWNrIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVkIGZvciB0aGlzIGh5cGVydHkgZGVzY3JpcHRvciB1cmw7Ci8vIE1ha2UgU3RlcHMgeHh4IC0tLSB4eHgKLy8gSW5zdGFudGlhdGUgdGhlIFNhbmRib3gKdmFyIHQ9e307cmV0dXJuIGMmJmMuaGFzT3duUHJvcGVydHkoImNhcGFiaWxpdGllcyIpJiYodD1jLnN0dWJDYXBhYmlsaXRpZXMpLHIuX3J1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3godCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGRMaXN0ZW5lcigiKiIsZnVuY3Rpb24oZSl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUpfSksZX0pfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDU6IHJldHVybiBzYW5kYm94IGFuZCByZWdpc3RlciIpLHU9ZTtyZXR1cm4gci5fYWRkcmVzc0FsbG9jYXRpb24uY3JlYXRlKHIuX3JlZ2lzdHJ5Ll9kb21haW4sMSxjLCJoeXBlcnR5Iix0KX0seSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA2OiByZXR1cm4gdGhlIGFkZHJlc3NlcyBmb3IgdGhlIGh5cGVydHkiLHQpLHIucmVnaXN0cnkucmVnaXN0ZXJIeXBlcnR5KHUsZSxjLHQsbikpfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDc6IHJlZ2lzdHJhdGlvbiByZXN1bHQiLGUpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE2IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgpzPWUudXJsOwovLyBFeHRlbmQgb3JpZ2luYWwgaHlwZXJ0eSBjb25maWd1cmF0aW9uOwp2YXIgdD17fTtpZighKDAscC5lbXB0eU9iamVjdCkoYy5jb25maWd1cmF0aW9uKSl0cnl7dD0oMCxpLmRlZmF1bHQpKHt9LEpTT04ucGFyc2UoYy5jb25maWd1cmF0aW9uKSl9Y2F0Y2goZSl7dD1jLmNvbmZpZ3VyYXRpb259dC5ydW50aW1lVVJMPXIuX3J1bnRpbWVVUkwsZS5wMnBIYW5kbGVyJiYodC5wMnBIYW5kbGVyPWUucDJwSGFuZGxlcix0LnAycFJlcXVlc3Rlcj1lLnAycFJlcXVlc3Rlcik7Ci8vIFdlIHdpbGwgZGVwbG95IHRoZSBjb21wb25lbnQgLSBzdGVwIDE3IG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93Lgp0cnl7cmV0dXJuIHUuZGVwbG95Q29tcG9uZW50KGYuc291cmNlQ29kZSxzLHQpfWNhdGNoKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBFcnJvciBvbiBkZXBsb3kgY29tcG9uZW50OiIsZSksYShlKX19LHkpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gODogRGVwbG95IGNvbXBvbmVudCBzdGF0dXMgZm9yIGh5cGVydHk6ICIsZSksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMTkgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCi8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIgdG8gdGhlIGFwcFNhbmRib3ggb3IgaHlwZXJ0U2FuZGJveDsKci5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHMsZnVuY3Rpb24oZSl7dS5wb3N0TWVzc2FnZShlKX0pOwovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDIwIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93Lgp2YXIgdD17cnVudGltZUh5cGVydHlVUkw6cyxzdGF0dXM6ZX07di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIEh5cGVydHk6ICIsdCksbyh0KSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyMSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4Kdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIC0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIil9LHkpLmNhdGNoKGQpfSl9fSx7a2V5OiJsb2FkU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKCF0aGlzLl9yZWFkeVRvVXNlKCkpcmV0dXJuITE7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdUHJvdG9TdHViIGRlc2NyaXB0b3IgdXJsIHBhcmFtZXRlciBpcyBuZWVkZWQiKTtyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuLG8pewovLyB0byBhbmFseXNlIGlmIGRvbWFpbiBmb3IgcDJwSGFuZGxlcnMgc2hvdWxkIGJlIHNvbWV0aGluZyBlbHNlIGFuZCBub3QgdGhlIGRlZmF1bHQgZG9tYWluIGl0c2VsZgp2YXIgYT0oMCxwLmRpdmlkZVVSTCkoZSkuZG9tYWluO2F8fChhPWUpO3ZhciBzPXZvaWQgMCx1PXZvaWQgMCxjPXZvaWQgMCxmPXZvaWQgMCxsPSExLGQ9dm9pZCAwLHk9ZnVuY3Rpb24oZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdU29tZXRoaW5nIGZhaWxlZCBvbiB0aGUgZGVwbG95IG9mIHByb3RvY29sc3R1YjogIixlKSxvKGUpfSxoPWZ1bmN0aW9uKGUpe2w9ITAsbyhlKX0sZz12b2lkIDAsYj17fTt2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0gc3RhcnRpbmcgbG9hZGluZyBmb3IgIixlLCIgd2l0aCBwMnBjb25maWcgIix0KSx2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl1EaXNjb3ZlciBvciBDcmVhdGUgYSBuZXcgUHJvdG9TdHViIGZvciBkb21haW46ICIsYSk7Ci8vIHN0ZXAgMiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdHJ5e2lmKHQpaWYodC5oYXNPd25Qcm9wZXJ0eSgiaXNIYW5kbGVyU3R1YiIpJiZ0LmlzSGFuZGxlclN0dWIpCi8vIHN0ZXAgNiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKITAsZD1yLnJ1bnRpbWVVUkwsZz1yLnJlZ2lzdHJ5LmRpc2NvdmVyUDJQU3R1YigpO2Vsc2V7ITA7dmFyIG09dC5yZW1vdGVSdW50aW1lVVJMO2Q9bSwKLy8gc3RlcCA0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAovLyBzdGVwIDUgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCmc9ci5yZWdpc3RyeS5kaXNjb3ZlclAyUFN0dWIobSl9ZWxzZQovLyBzdGVwIDMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCmQ9YSxnPXIucmVnaXN0cnkuZGlzY292ZXJQcm90b3N0dWIoYSk7Ci8vIElzIHJlZ2lzdGVkPwp2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0xLiBQcm90byBTdHViIERpc2NvdmVyZWQgZm9yICIsZSwiOiAiLGcpLAovLyBzdGVwIDIzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApuKGcpLHYuaW5mbygiIFtSdW50aW1lLkxvYWRlcl0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpfWNhdGNoKGcpewovLyBpcyBub3QgcmVnaXN0ZWQ/CnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTEuIFByb3RvIFN0dWIgbm90IGZvdW5kICIrZyksCi8vIHN0ZXAgOCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKci5kZXNjcmlwdG9ycy5nZXRTdHViRGVzY3JpcHRvcihlKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdMi4gcmV0dXJuIHRoZSBQcm90b1N0dWIgZGVzY3JpcHRvciIpLAovLyBzdGVwIDkgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnU9ZTt2YXIgdD1lLnNvdXJjZVBhY2thZ2VVUkw7cmV0dXJuIi9zb3VyY2VQYWNrYWdlIj09PXQ/ZS5zb3VyY2VQYWNrYWdlOnIucnVudGltZUNhdGFsb2d1ZS5nZXRTb3VyY2VQYWNrYWdlRnJvbVVSTCh0KX0saCkuY2F0Y2goeSkudGhlbihmdW5jdGlvbihlKXsKLy8gQWNjb3JkaW5nIHRvIGRlYnVnLCBpdCBzZWVtcyBSdW50aW1lQ2F0YWxvZ3VlIGRvZXMgbm90IHN1cHBvcnQgeWV0IGNvbnN0cmFpbnRzLiBJdCBhcHBlYXJzIGVtcHR5ISEhIQovLyBzdGVwIDExIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApyZXR1cm4hbCYmKHUmJnUuY29uc3RyYWludHMmJihiPXUuY29uc3RyYWludHMpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTMuIHJldHVybiB0aGUgUHJvdG9TdHViIFNvdXJjZSBDb2RlIiksZj1lLHIucmVnaXN0cnkuZ2V0U2FuZGJveChhLGIpKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIHN0ZXAgMTUgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnJldHVybiFsJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdNC4gaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZXJlZCB0aGVuIHJldHVybiB0aGUgc2FuZGJveCAiLGUpLHM9ZSxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBzdGVwIDEzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTUuIFNhbmRib3ggd2FzIG5vdCBmb3VuZCwgY3JlYXRpbmcgYSBuZXcgb25lICIsZSksci5fcnVudGltZUZhY3RvcnkuY3JlYXRlU2FuZGJveChiKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFkZExpc3RlbmVyKCIqIixmdW5jdGlvbihlKXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSl9KSxlfSkpfSkudGhlbihmdW5jdGlvbihuKXsKLy8gc3RlcCAxNiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKcmV0dXJuIWwmJih2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl02LiByZXR1cm4gdGhlIHNhbmRib3ggaW5zdGFuY2UgYW5kIHJlZ2lzdGVyIixuLCJ0byBkb21haW4gIixhKSxzPW4sci5yZWdpc3RyeS5yZWdpc3RlclN0dWIocyxkLHQsZSx1KSl9LGgpLnRoZW4oZnVuY3Rpb24oZSl7aWYobClyZXR1cm4hMTsKLy8gc3RlcCAyMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIDcuIHJldHVybiB0aGUgcnVudGltZSBwcm90b3N0dWIgdXJsOiAiLGUpLGM9ZS51cmw7Ci8vIEV4dGVuZCBvcmlnaW5hbCBoeXBlcnR5IGNvbmZpZ3VyYXRpb247CnZhciBuPXt9O2lmKCEoMCxwLmVtcHR5T2JqZWN0KSh1LmNvbmZpZ3VyYXRpb24pKXRyeXtuPSgwLGkuZGVmYXVsdCkoe30sSlNPTi5wYXJzZSh1LmNvbmZpZ3VyYXRpb24pKX1jYXRjaChlKXtuPXUuY29uZmlndXJhdGlvbn1pZih0KXRyeXtuPSgwLGkuZGVmYXVsdCkobixKU09OLnBhcnNlKHQpKX1jYXRjaChlKXtuPSgwLGkuZGVmYXVsdCkobix0KX0KLy8gcmVxdWlyZWQgZm9yIHByb3Rvc3R1YiBzZXNzaW9uCm4ucnVudGltZVVSTD1yLl9ydW50aW1lVVJMOwovLyBzdGVwIDI0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp0cnl7Ci8vIHN0ZXAgMjYgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIHN0ZXAgMjcgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIKcmV0dXJuIHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSA4OiBhZGRpbmcgc2FuZGJveCBsaXN0ZW5lciB0byBwcm90b3N0dWJVUkwgOiAiLGMpLHIubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihjLGZ1bmN0aW9uKGUpe3MucG9zdE1lc3NhZ2UoZSl9KSxzLmRlcGxveUNvbXBvbmVudChmLnNvdXJjZUNvZGUsYyxuKX1jYXRjaChlKXt2LmVycm9yKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIEVycm9yIG9uIGRlcGxveSBjb21wb25lbnQ6IixlKSxvKGUpfX0saCkudGhlbihmdW5jdGlvbigpe2lmKGwpcmV0dXJuITE7Ci8vIHN0ZXAgMjggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnZhciBlPXZvaWQgMDt0Pyh2LmxvZygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSBwMnBDb25maWc6ICIsdCksdC5oYXNPd25Qcm9wZXJ0eSgiaXNIYW5kbGVyU3R1YiIpJiYoZT1yLnJlZ2lzdHJ5LnAycEhhbmRsZXJTdHViW3IuX3J1bnRpbWVVUkxdKSx0Lmhhc093blByb3BlcnR5KCJwMnBSZXF1ZXN0ZXJTdHViIikmJihlPXIucmVnaXN0cnkucDJwUmVxdWVzdGVyU3R1Ylt0LnJlbW90ZVJ1bnRpbWVVUkxdKSk6ZT1yLnJlZ2lzdHJ5LnByb3Rvc3R1YnNMaXN0W2FdLHYubG9nKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIFN0dWI6ICIsZSksbihlKSx2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0tLS0tLS0tLS0tLS0tLS0tLS0tIEVORCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiIpfSxoKS5jYXRjaCh5KX19KX19LHtrZXk6ImxvYWRJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdGhpcy5fcmVhZHlUb1VzZSgpKXJldHVybiExO2lmKCFlKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBJZHBQcm94eSBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkIik7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz0oMCxwLmRpdmlkZVVSTCkoZSkuZG9tYWluO298fChvPWUpO3ZhciBhPXZvaWQgMCxzPXZvaWQgMCx1PXZvaWQgMCxjPXZvaWQgMCxmPSExLGw9ZnVuY3Rpb24oZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIFNvbWV0aGluZyBmYWlsZWQgb24gdGhlIGRlcGxveSBvZiBJZHBQcm94eTogIixlKSxuKGUpfSxkPWZ1bmN0aW9uKGUpe2Y9ITAsbihlKX07Ci8vIERpc2NvdmVyIElEUFByb3h5CnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAtLS0tLS0tLS0tLS0tLS0tLS0tIElEUCBQcm94eSBEZXBsb3kgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKSx2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gRGlzY292ZXIgb3IgQ3JlYXRlIGEgbmV3IElkcFByb3h5IGZvciBkb21haW4vVVJMOiAiLG8pO3RyeXt2YXIgeT10LnJlZ2lzdHJ5LmRpc2NvdmVySWRwUHJveHkobyk7Ci8vIElzIHJlZ2lzdGVkPwp2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gMS4gSURQUHJveHkgRGlzY292ZXJlZDogIix5KTsKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp2YXIgaD10LnJlZ2lzdHJ5LmlkcFByb3h5TGlzdFtvXTt2LmxvZygiRGVwbG95ZWQ6ICIsaCkscihoKSx2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKX1jYXRjaCh5KXsKLy8gaXMgbm90IHJlZ2lzdGVkPwp2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gMS4gSWRwUHJveHkgbm90IGZvdW5kOiIseSksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gd2UgbmVlZCB0byBnZXQgUHJvdG9TdHViIGRlc2NyaXB0b3Igc3RlcCA0IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp0LmRlc2NyaXB0b3JzLmdldElkcFByb3h5RGVzY3JpcHRvcihlKS50aGVuKGZ1bmN0aW9uKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAyLiBSZXR1cm4gdGhlIElEUFByb3h5IGRlc2NyaXB0b3IiKSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA1IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApzPWU7dmFyIHI9ZS5zb3VyY2VQYWNrYWdlVVJMO3JldHVybiIvc291cmNlUGFja2FnZSI9PT1yP2Uuc291cmNlUGFja2FnZTp0LnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U291cmNlUGFja2FnZUZyb21VUkwocil9LGQpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZilyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gMy4gcmV0dXJuIHRoZSBJRFBQcm94eSBzb3VyY2UgcGFja2FnZSIpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDcgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCmM9ZTtyZXR1cm4hMH0sZCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hZiYmdC5yZWdpc3RyeS5nZXRTYW5kYm94KG8pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hZiYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA0LiBpZiB0aGUgc2FuZGJveCBpcyByZWdpc3RlcmVkIHRoZW4gcmV0dXJuIHRoZSBzYW5kYm94IixlKSxhPWUsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtpZihmKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA1LiBTYW5kYm94IHdhcyBub3QgZm91bmQsIGNyZWF0aW5nIGEgbmV3IG9uZSIsZSk7dmFyIHI9e307cmV0dXJuIHMmJnMuaGFzT3duUHJvcGVydHkoImNhcGFiaWxpdGllcyIpJiYocz1zLnN0dWJDYXBhYmlsaXRpZXMpLHQuX3J1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3gocikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGRMaXN0ZW5lcigiKiIsZnVuY3Rpb24oZSl7dC5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUpfSksZX0pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hZiYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA2LiByZXR1cm4gdGhlIHNhbmRib3ggaW5zdGFuY2UgYW5kIHJlZ2lzdGVyIixlLCJ0byBkb21haW4gIixvKSxhPWUsdC5yZWdpc3RyeS5yZWdpc3RlcklkcFByb3h5KGUsbykpfSxkKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGYpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDcuIFJldHVybiB0aGUgcnVudGltZSBJZHAgUHJveHkgVVJMOiAiLGUpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdT1lOwovLyBFeHRlbmQgb3JpZ2luYWwgaHlwZXJ0eSBjb25maWd1cmF0aW9uOwp2YXIgcj17fTtpZighKDAscC5lbXB0eU9iamVjdCkocy5jb25maWd1cmF0aW9uKSl0cnl7cj0oMCxpLmRlZmF1bHQpKHt9LEpTT04ucGFyc2Uocy5jb25maWd1cmF0aW9uKSl9Y2F0Y2goZSl7cj1zLmNvbmZpZ3VyYXRpb259ci5ydW50aW1lVVJMPXQuX3J1bnRpbWVVUkw7Ci8vIERlcGxveSBDb21wb25lbnQgc3RlcCB4eHgKdHJ5ewovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gQWRkIHRoZSBtZXNzYWdlIGJ1cyBsaXN0ZW5lcgpyZXR1cm4gdC5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHUsZnVuY3Rpb24oZSl7YS5wb3N0TWVzc2FnZShlKX0pLGEuZGVwbG95Q29tcG9uZW50KGMuc291cmNlQ29kZSxlLHIpfWNhdGNoKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBFcnJvciBvbiBkZXBsb3kgY29tcG9uZW50OiIsZSksbihlKX19LGQpLnRoZW4oZnVuY3Rpb24oKXtpZihmKXJldHVybiExOwovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIHh4eCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gTG9hZCBTdHViIGZ1bmN0aW9uIHJlc29sdmVkIHdpdGggc3VjY2VzczsKLy8gbGV0IGlkcFByb3h5ID0gewovLyAgIHJ1bnRpbWVJZHBQcm94eVVSTDogX3J1bnRpbWVJZHBQcm94eVVSTCwKLy8gICBzdGF0dXM6IGRlcGxveUNvbXBvbmVudFN0YXR1cwovLyB9OwovL3RoaXMucmVnaXN0cnkuaWRwUHJveHlMaXN0W2RvbWFpbl0uc3RhdHVzID0gJ2RlcGxveWVkJzsKdmFyIGU9dC5yZWdpc3RyeS5pZHBQcm94eUxpc3Rbb107di5sb2coIltSdW50aW1lLkxvYWRlci5sb2FkSWRwUHJveHldIDg6IGxvYWRlZDogIixlKSxyKGUpLHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRJZHBQcm94eV0gLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKX0sZCkuY2F0Y2gobCl9fSl9fSx7a2V5OiJfcmVhZHlUb1VzZSIsdmFsdWU6ZnVuY3Rpb24oKXtpZighdGhpcy5fcnVudGltZVVSTCl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGxvYWRlciBuZWVkIHRoZSBydW50aW1lIHVybCBhZGRyZXNzIik7aWYoIXRoaXMuX21lc3NhZ2VzQnVzKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgbG9hZGVyIG5lZWQgdGhlIG1lc3NhZ2VCdXMgY29tcG9uZW50Iik7aWYoIXRoaXMuX3JlZ2lzdHJ5KXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgbG9hZGVyIG5lZWQgdGhlIHJlZ2lzdHJ5IGNvbXBvbmVudCIpO2lmKCF0aGlzLl9ydW50aW1lRmFjdG9yeSl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGxvYWRlciBuZWVkIHRoZSBydW50aW1lIGZhY3RvcnkgY29tcG9uZW50Iik7cmV0dXJuITB9fSx7a2V5OiJydW50aW1lVVJMIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcnVudGltZVVSTD1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZVVSTH19LHtrZXk6InJlZ2lzdHJ5IixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fcmVnaXN0cnk9ZTsKLy8gSW5zdGFsbCBBZGRyZXNzQWxsb2NhdGlvbgp2YXIgdD1oLmRlZmF1bHQuaW5zdGFuY2U7dGhpcy5fYWRkcmVzc0FsbG9jYXRpb249dCx2LmxvZygiW0xvYWRlciAtIEFkZHJlc3NBbGxvY2F0aW9uXSAtICIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWdpc3RyeX19LHtrZXk6Im1lc3NhZ2VCdXMiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlc0J1cz1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZXNCdXN9fSx7a2V5OiJydW50aW1lRmFjdG9yeSIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3J1bnRpbWVGYWN0b3J5PWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ydW50aW1lRmFjdG9yeX19XSksTG9hZGVyfSgpO3QuZGVmYXVsdD1nLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxNSksZj1yKDEzOCksbD1yKDExKSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1kLmdldExvZ2dlcigiRGVzY3JpcHRvcnMiKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGVzY3JpcHRvcnMoZSx0LHIpe2lmKCgwLGEuZGVmYXVsdCkodGhpcyxEZXNjcmlwdG9ycyksIWUpdGhyb3cgRXJyb3IoIlRoZSBkZXNjcmlwdG9yIG5lZWQgdG8ga25vdyB0aGUgcnVudGltZSB1cmwgdG8gYmUgdXNlZCIpO2lmKCF0KXRocm93IEVycm9yKCJUaGUgZGVzY3JpcHRvciBuZWVkcyB0aGUgY2F0YWxvZ3VlIGluc3RhbmNlIik7aWYoIXIpdGhyb3cgRXJyb3IoIlRoZSBkZXNjcmlwdG9yIG5lZWRzIHRoZSBydW50aW1lIGNvbmZpZ3VyYXRpb24iKTt0aGlzLmxvZz1wLHRoaXMucnVudGltZUNvbmZpZ3VyYXRpb249cix0aGlzLnJ1bnRpbWVVUkw9ZSx0aGlzLmNhdGFsb2d1ZT10LHRoaXMuY29uc3RyYWludHM9Zi5ydW50aW1lVXRpbHMucnVudGltZUNhcGFiaWxpdGllc31yZXR1cm4oMCx1LmRlZmF1bHQpKERlc2NyaXB0b3JzLFt7a2V5OiJnZXRIeXBlcnR5RGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2F0YWxvZ3VlLmdldEh5cGVydHlEZXNjcmlwdG9yKGUsITAsdGhpcy5jb25zdHJhaW50cyl9fSx7a2V5OiJnZXRTdHViRGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBpPXZvaWQgMCxvPXZvaWQgMCxhPXZvaWQgMCxzPSgwLGMuZGl2aWRlVVJMKSh0LnJ1bnRpbWVVUkwpLHU9cy5kb21haW47aWYoZS5pbmNsdWRlcygiOi8vIikpe3ZhciBmPSgwLGMuZGl2aWRlVVJMKShlKTtpPWYuZG9tYWluO3ZhciBsPWYuaWRlbnRpdHk7bz1sP2wuc3Vic3RyaW5nKGwubGFzdEluZGV4T2YoIi8iKSsxKToiZGVmYXVsdCJ9ZWxzZSBvPSJkZWZhdWx0IixpPWU7aWYoYT0oMCxjLmJ1aWxkVVJMKSh0LnJ1bnRpbWVDb25maWd1cmF0aW9uLCJjYXRhbG9ndWVVUkxzIiwicHJvdG9jb2xzdHViIixvKSxpIT09dC5ydW50aW1lQ29uZmlndXJhdGlvbi5kb21haW4paWYoZS5pbmRleE9mKCJodHRwcyIpJiZlLmluZGV4T2YoImh5cGVydHktY2F0YWxvZ3VlIikpewovLyBUT0RPOiBjaGVjayBob3cgdG8gbG9hZCBmb3JtIGRpZmZlcmVudCBjb25maWd1cmF0aW9uIGRvbWFpbgp2YXIgZD0oMCxjLmdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMpKHQucnVudGltZUNvbmZpZ3VyYXRpb24sImNhdGFsb2d1ZVVSTHMiLCJwcm90b2NvbHN0dWIiKTthPWQucHJlZml4K2krZC5zdWZmaXgrb31lbHNlIGE9ZTtyZXR1cm4gcC5sb2coIkxvYWQgUHJvdG9jb2xTdHViIGZvciBkb21haW4sICIraSsiIDogIixhKSx0LmNhdGFsb2d1ZS5nZXRTdHViRGVzY3JpcHRvcihhLCEwLHQuY29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdFcnJvcjogJywgZXJyb3IpOwpvPWksaT11O3ZhciByPSgwLGMuZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcykodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsInByb3RvY29sc3R1YiIpOwovLyBsb2cubG9nKCdGYWxsYmFjayAtPiBMb2FkIFByb3RvY29sc3R1YiBmb3IgZG9tYWluLCAnICsgZG9tYWluICsgJyA6ICcsIHByb3Rvc3R1Yik7CnJldHVybiBhPXIucHJlZml4K2krci5zdWZmaXgrbyx0LmNhdGFsb2d1ZS5nZXRTdHViRGVzY3JpcHRvcihhLCEwLHQuY29uc3RyYWludHMpfSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pfSl9fSx7a2V5OiJnZXRJZHBQcm94eURlc2NyaXB0b3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT12b2lkIDAsbz12b2lkIDAsYT0oMCxjLmRpdmlkZVVSTCkodC5ydW50aW1lVVJMKSxzPWEuZG9tYWluO2lmKGUuaW5jbHVkZXMoIjovLyIpKXt2YXIgdT0oMCxjLmRpdmlkZVVSTCkoZSk7aT11LmRvbWFpbjt2YXIgZj11LmlkZW50aXR5O289Zj9mLnN1YnN0cmluZyhmLmxhc3RJbmRleE9mKCIvIikrMSk6ImRlZmF1bHQifWVsc2Ugbz0iZGVmYXVsdCIsaT1lO3ZhciBsPSgwLGMuZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcykodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsImlkcFByb3h5Iik7Ci8vIGxvZy5sb2coJ0xvYWQgSWRwIFByb3h5IGZvciBkb21haW4sICcgKyBkb21haW4gKyAnIDogJywgaWRwUHJveHlVUkwpOwpyZXR1cm4gZT1sLnByZWZpeCtpK2wuc3VmZml4K28sdC5jYXRhbG9ndWUuZ2V0SWRwUHJveHlEZXNjcmlwdG9yKGUsITAsdC5jb25zdHJhaW50cykudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oKXsKLy8gbG9nLmxvZygnTG9hZCBJZHAgUHJveHkgZm9yIGRvbWFpbiwgJyArIGRvbWFpbiArICcgOiAnLCBpZHBQcm94eVVSTCk7CnJldHVybiBvPWksaT1zLGU9KDAsYy5idWlsZFVSTCkodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsImlkcFByb3h5IixvKSx0LmNhdGFsb2d1ZS5nZXRJZHBQcm94eURlc2NyaXB0b3IoZSwhMCx0LmNvbnN0cmFpbnRzKX0pLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oZSl9KX0pfX1dKSxEZXNjcmlwdG9yc30oKTt0LmRlZmF1bHQ9eSxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dC5ydW50aW1lQ29uZmlndXJhdGlvbj17cnVudGltZVVSTFM6e3JlZ2lzdHJ5OntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiJyZWdpc3RyeSJ9LGlkZW50aXR5TW9kdWxlOntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiIvaWRtIn0scnVudGltZVVBOntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiIvdWEifSxjYXRhbG9ndWU6e3ByZWZpeDoiaHlwZXJ0eS1ydW50aW1lOi8vIixzdWZmaXg6Ii9jYXRhbG9ndWUifSxncmFwaENvbm5lY3Rvcjp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoiL2dyYXBoIn0sc3luY01hbmFnZXI6e3ByZWZpeDoiaHlwZXJ0eS1ydW50aW1lOi8vIixzdWZmaXg6Ii9zbSJ9fSxjYXRhbG9ndWVVUkxzOntwcm90b2NvbHN0dWI6e3ByZWZpeDoiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuIixzdWZmaXg6Ii8ud2VsbC1rbm93bi9wcm90b2NvbHN0dWIvIixmYWxsYmFjazoiaHlwZXJ0eS1jYXRhbG9ndWU6Ly9jYXRhbG9ndWUuJWRvbWFpbiUvLndlbGwta25vd24vcHJvdG9jb2xzdHViLyJ9LGlkcFByb3h5OntwcmVmaXg6Imh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLiIsc3VmZml4OiIvLndlbGwta25vd24vaWRwLXByb3h5LyIsZmFsbGJhY2s6Imh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLiVkb21haW4lLy53ZWxsLWtub3duL2lkcC1wcm94eS8ifX0sbXNnTm9kZVVSTDp7cHJlZml4OiJkb21haW46Ly9tc2ctbm9kZS4iLHN1ZmZpeDoiIixoeXBlcnR5QWRkcmVzc0FsbG9jYXRpb246Ii9oeXBlcnR5LWFkZHJlc3MtYWxsb2NhdGlvbiIsb2JqZWN0QWRkcmVzc0FsbG9jYXRpb246Ii9vYmplY3QtYWRkcmVzcy1hbGxvY2F0aW9uIixzdWJzY3JpcHRpb25NYW5hZ2VtZW50OiIvc20ifSxkb21haW5SZWdpc3RyeVVSTDp7cHJlZml4OiJkb21haW46Ly9yZWdpc3RyeS4iLHN1ZmZpeDoiIn0sZ2xvYmFsUmVnaXN0cnlVUkw6Imdsb2JhbDovL3JlZ2lzdHJ5LiJ9fSwvKiA0ODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0ODYpLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LmRlZmF1bHQ9aS5kZWZhdWx0LC8vIGxldCBHcmFwaENvbm5lY3RvcjsKLy8gaWYgKHByb2Nlc3MuZW52Lk1PREUgIT09ICdsaWdodCcpIHsKLy8gICBHcmFwaENvbm5lY3RvciA9IHJlcXVpcmUoJy4vR3JhcGhDb25uZWN0b3JCYXNlJyk7Ci8vICAgaWYgKEdyYXBoQ29ubmVjdG9yICYmIEdyYXBoQ29ubmVjdG9yLmhhc093blByb3BlcnR5KCdkZWZhdWx0JykpIEdyYXBoQ29ubmVjdG9yID0gR3JhcGhDb25uZWN0b3IuZGVmYXVsdDsKLy8gfSBlbHNlIHsKLy8gICBHcmFwaENvbm5lY3RvciA9IHJlcXVpcmUoJy4vR3JhcGhDb25uZWN0b3JMaWdodCcpOwovLyAgIGlmIChHcmFwaENvbm5lY3RvciAmJiAgR3JhcGhDb25uZWN0b3IuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSkgR3JhcGhDb25uZWN0b3IgPSBHcmFwaENvbm5lY3Rvci5kZWZhdWx0OwovLyB9Ci8qKgogKiBUaGUgR3JhcGhDb25uZWN0b3JCYXNlIGhhdmUgc29tZSBwcm9ibGVtcyB3aXRoIHRoZSBzaXplOwogKiBAZGVwcmVjYXRlZCBEdWUgdG8gc29tZSBwcm9ibGVtcyBpbmNyZWFzZSBhIGxvdCB0aGUgZmlsZSBzaXplCiAqLwovLyBpbXBvcnQgR3JhcGhDb25uZWN0b3IgZnJvbSAnLi9HcmFwaENvbm5lY3RvckJhc2UnOwovKioKICoKICogQGV4cGVyaW1lbnRhbCB1c2VkIGluc3RlYWQgb2YgR3JhcGhDb25uZWN0b3JCYXNlOwogKi8KZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksaT1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pLG89ZnVuY3Rpb24gR3JhcGhDb25uZWN0b3IoZSx0LHIpeygwLGkuZGVmYXVsdCkodGhpcyxHcmFwaENvbm5lY3Rvcil9O3QuZGVmYXVsdD1vLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEyKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxMSksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9cigxNSksZD1mLmdldExvZ2dlcigiQ29yZURpc2NvdmVyeSIpLHA9ZnVuY3Rpb24oKXsvKioKICAqIFRvIGluaXRpYWxpc2UgdGhlIERpc2NvdmVyeSwgd2hpY2ggd2lsbCBwcm92aWRlIHRoZSBzdXBwb3J0IGZvciBoeXBlcnRpZXMgdG8KICAqIHF1ZXJ5IHVzZXJzIHJlZ2lzdGVyZWQgaW4gb3V0c2lkZSB0aGUgaW50ZXJuYWwgY29yZS4KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICAgIG1zZ2J1cyAgICAgICAgICAgICAgICBtc2didXMKICAqIEBwYXJhbSAge1J1bnRpbWVVUkx9ICAgICAgICAgIHJ1bnRpbWVVUkwgICAgICAgICAgICBydW50aW1lVVJMCiAgKiBAcGFyYW0gIHtncmFwaENvbm5lY3Rvcn0gICAgZ3JhcGhDb25uZWN0b3IKICAqLwpmdW5jdGlvbiBDb3JlRGlzY292ZXJ5KGUsdCxyLG4saSl7aWYoKDAsYS5kZWZhdWx0KSh0aGlzLENvcmVEaXNjb3ZlcnkpLCFuKXRocm93IEVycm9yKCJUaGUgY2F0YWxvZ3VlIG5lZWRzIHRoZSBydW50aW1lRmFjdG9yeSIpO3ZhciBvPXRoaXM7dGhpcy5fbWVzc2FnZUJ1cz10LG8uZ3JhcGhDb25uZWN0b3I9cixvLmh0dHBSZXF1ZXN0PW4uY3JlYXRlSHR0cFJlcXVlc3QoKSxvLmRvbWFpbj0oMCxsLmRpdmlkZVVSTCkoZSkuZG9tYWluLG8uZGlzY292ZXJ5VVJMPWUrIi9kaXNjb3ZlcnkvIixvLnJlZ2lzdHJ5PWksby5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKG8uZGlzY292ZXJ5VVJMLGZ1bmN0aW9uKGUpe28uZGlzY292ZXJ5TWFuYWdlcihlKS50aGVuKGZ1bmN0aW9uKHQpewovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlCm8ubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTp0fX0pfSkuY2F0Y2goZnVuY3Rpb24odCl7dmFyIHI9dm9pZCAwLG49dm9pZCAwOyJHcmFwaENvbm5lY3RvciI9PT10PyhyPSJUaGlzIHNlYXJjaCBpcyBub3QgYXZhaWxhYmxlIGF0IHRoZSBtb21lbnQuIFRyeSBsYXRlci4iLG49NTAwKToocj0iTm90IEZvdW5kIixuPTQwNCksCi8vRkxPVy1PVVQ6IGVycm9yIG1lc3NhZ2UgcmVzcG9uc2UKby5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6bixkZXNjcmlwdGlvbjpyfX0pfSl9KX0vKioKICAgKiBSZXR1cm5zIHRoZSBNZXNzYWdlQnVzLgogICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKENvcmVEaXNjb3ZlcnksW3trZXk6ImRpc2NvdmVyeU1hbmFnZXIiLC8qIGZ1bmN0aW9uIHRvIGRlY2lkZSB3aGF0IGRpc2NvdmVyeSBtZXRob2QgdG8gY2FsbCBhbmQgbGF0ZXIgcmV0dXJuIHRoZSByZXNwb25zZSBtc2cgICovCnZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oKDAsbC5kaXZpZGVVUkwpKGUuZnJvbSkuZG9tYWluLGUuYm9keS5yZXNvdXJjZS5zcGxpdCgiLyIpLmZpbHRlcihCb29sZWFuKSksbj1bXSxvPVtdO3N3aXRjaChkLmxvZygiW0NvcmVEaXNjb3ZlcnkuZGlzY292ZXJ5TWFuYWdlcl0gcmVjZWl2ZWQ6ICIsZSksZS5ib2R5LmNyaXRlcmlhJiYoZS5ib2R5LmNyaXRlcmlhLnJlc291cmNlcyYmKG49ZS5ib2R5LmNyaXRlcmlhLnJlc291cmNlcyksZS5ib2R5LmNyaXRlcmlhLmRhdGFTY2hlbWVzJiYobz1lLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXMpKSxyWzFdKXtjYXNlInVzZXIiOnJldHVybiJoeXBlcnR5Ij09clswXT90LmRpc2NvdmVySHlwZXJ0aWVzKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlci8iKVsxXSxvLG4sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik6dC5kaXNjb3ZlckRhdGFPYmplY3RzKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlci8iKVsxXSxvLG4sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik7Y2FzZSJ1cmwiOnJldHVybiJoeXBlcnR5Ij09clswXT90LmRpc2NvdmVySHlwZXJ0eVBlclVSTChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVybC8iKVsxXSxlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTp0LmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVybC8iKVsxXSxlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTtjYXNlIm5hbWUiOnJldHVybiB0LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJOYW1lKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgibmFtZS8iKVsxXSxvLG4sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik7Y2FzZSJyZXBvcnRlciI6cmV0dXJuIHQuZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgicmVwb3J0ZXIvIilbMV0sbyxuLGUuYm9keS5jcml0ZXJpYS5kb21haW4pO2Nhc2UiZ3VpZCI6cmV0dXJuIHZvaWQgMCE9PXQuZ3JhcGhDb25uZWN0b3ImJm51bGwhPT10LmdyYXBoQ29ubmVjdG9yPyJoeXBlcnR5Ij09clswXT90LmRpc2NvdmVySHlwZXJ0aWVzUGVyR1VJRChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXItZ3VpZDovLyIpWzFdLG8sbik6dC5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRChlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXItZ3VpZDovLyIpWzFdLG8sbik6aS5kZWZhdWx0LnJlamVjdCgiR3JhcGhDb25uZWN0b3IiKTtjYXNlInVzZXJwcm9maWxlIjpyZXR1cm4gdm9pZCAwIT09dC5ncmFwaENvbm5lY3RvciYmbnVsbCE9PXQuZ3JhcGhDb25uZWN0b3I/Imh5cGVydHkiPT1yWzBdP3QuZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGEoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1c2VycHJvZmlsZS8iKVsxXSxvLG4pOnQuZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YShlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXJwcm9maWxlLyIpWzFdLG8sbik6aS5kZWZhdWx0LnJlamVjdCgiR3JhcGhDb25uZWN0b3IiKX19fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlclVzZXJQcm9maWxlRGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24obyxhKXsKLy90cmFuc2xhdGUgdXNlciBpZGVudGlmaWVyIChlLmcuIGVtYWlsLCBuYW1lLi4uKSBpbnRvIHRoZSBhc3NvY2lhdGVkIEdVSURzCm4uZGlzY292ZXJHVUlEUGVyVXNlcklkZW50aWZpZXIoZSkudGhlbihmdW5jdGlvbihlKXt2YXIgcz1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihpLG8pe24uZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEKGUsdCxyKS50aGVuKGZ1bmN0aW9uKGUpe2koZSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKFtdKX0pfSl9KTtpLmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W10uY29uY2F0LmFwcGx5KFtdLGUpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gYSgiTm8gaHlwZXJ0aWVzIHdlcmUgZm91bmQiKTtvKHQpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gYShlKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzUGVyVXNlclByb2ZpbGVEYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihvLGEpewovL3RyYW5zbGF0ZSB1c2VyIGlkZW50aWZpZXIgKGUuZy4gZW1haWwsIG5hbWUuLi4pIGludG8gdGhlIGFzc29jaWF0ZWQgR1VJRHMKbi5kaXNjb3ZlckdVSURQZXJVc2VySWRlbnRpZmllcihlKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBzPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7bi5kaXNjb3ZlckRhdGFPYmplY3RzUGVyR1VJRChlLHQscikudGhlbihmdW5jdGlvbihlKXtpKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7aShbXSl9KX0pfSk7aS5kZWZhdWx0LmFsbChzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLmNvbmNhdC5hcHBseShbXSxlKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIGEoIk5vIGRhdGFPYmplY3RzIHdlcmUgZm91bmQiKTtvKHQpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gYShlKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllc1BlckdVSUQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG8sYSl7Ci8vdHJhbnNsYXRlIEdVSUQgaW50byB0aGUgdXNlciBJRHMgdG8gcXVlcnkgdGhlIGRvbWFpbiByZWdpc3RyeQpuLmRpc2NvdmVyVXNlcklkc1BlckdVSUQoZSkudGhlbihmdW5jdGlvbihlKXsKLy90cmFuc2xhdGUgdXNlciBJRHMgaW50byB0aGUgYXNzb2NpYXRlZCBoeXBlcnRpZXMgcmVnaXN0ZXJlZCBpbiBzb21lIGRvbWFpbgp2YXIgcz1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihpLG8pe24uZGlzY292ZXJIeXBlcnRpZXMoZS51SUQsdCxyLGUuZG9tYWluKS50aGVuKGZ1bmN0aW9uKGUpe2koZSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKFtdKX0pfSl9KTtpLmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W10uY29uY2F0LmFwcGx5KFtdLGUpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gYSgiTm8gaHlwZXJ0aWVzIHdlcmUgZm91bmQiKTsKLy8gbG9nLmxvZygnSHlwZXJ0aWVzIDogJywgaHlwZXJ0aWVzKTsKbyh0KX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSl9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSUQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG8sYSl7Ci8vdHJhbnNsYXRlIEdVSUQgaW50byB0aGUgdXNlciBJRHMgdG8gcXVlcnkgdGhlIGRvbWFpbiByZWdpc3RyeQpuLmRpc2NvdmVyVXNlcklkc1BlckdVSUQoZSkudGhlbihmdW5jdGlvbihlKXsKLy90cmFuc2xhdGUgdXNlciBJRHMgaW50byB0aGUgYXNzb2NpYXRlZCBkYXRhT2JqZWN0cyByZWdpc3RlcmVkIGluIHNvbWUgZG9tYWluCnZhciBzPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGksbyl7bi5kaXNjb3ZlckRhdGFPYmplY3RzKGUudUlELHQscixlLmRvbWFpbikudGhlbihmdW5jdGlvbihlKXtpKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7aShbXSl9KX0pfSk7aS5kZWZhdWx0LmFsbChzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLmNvbmNhdC5hcHBseShbXSxlKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIGEoIk5vIGRhdGFPYmplY3RzIHdlcmUgZm91bmQiKTsKLy8gbG9nLmxvZygnRGF0YU9iamVjdHMgOiAnLCBkYXRhT2JqZWN0cyk7Cm8odCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBhKGUpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0aWVzIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzLGE9dm9pZCAwO2E9bnx8by5kb21haW47dmFyIHM9e3R5cGU6InJlYWQiLGZyb206by5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrYSxib2R5Ont9fTtyZXR1cm4gZS5pbmRleE9mKCJ1c2VyOi8vIik+LTE/cy5ib2R5LnJlc291cmNlPWU6cy5ib2R5LnJlc291cmNlPSIvaHlwZXJ0eS9pZHAtaWRlbnRpZmllci8iK2UsdC5sZW5ndGg+MCYmKHMuYm9keS5jcml0ZXJpYXx8KHMuYm9keS5jcml0ZXJpYT17fSkscy5ib2R5LmNyaXRlcmlhLmRhdGFTY2hlbWVzPXQpLHIubGVuZ3RoPjAmJihzLmJvZHkuY3JpdGVyaWF8fChzLmJvZHkuY3JpdGVyaWE9e30pLHMuYm9keS5jcml0ZXJpYS5yZXNvdXJjZXM9ciksbmV3IGkuZGVmYXVsdChmdW5jdGlvbihlLHQpewovLyBsb2cubG9nKCJbQ29yZURpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gc2VuZGluZyBtc2cgIiwgbXNnKTsKby5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7Ci8vIGxvZy5sb2coIltDb3JlRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzXSByY3ZlZCByZXBseSAiLCByZXBseSk7CmlmKDIwMCE9PXIuYm9keS5jb2RlJiY1MDAhPT1yLmJvZHkuY29kZSlyZXR1cm4gdCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKTt2YXIgbj1yLmJvZHkudmFsdWUsaT1bXTtmb3IodmFyIG8gaW4gbilpLnB1c2gobltvXSk7aWYoIShpLmxlbmd0aD4wKSlyZXR1cm4gdCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKTsKLy8gbG9nLmxvZygiW0NvcmVEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNdIEh5cGVydGllcyBGb3VuZDogIiwgZmluYWxIeXBlcnRpZXMpOwplKGkpfSl9KX19LHtrZXk6ImRpc2NvdmVyRGF0YU9iamVjdHMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMsYT12b2lkIDAscz1bXTtyZXR1cm4gYT1ufHxvLmRvbWFpbixuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKG4sdSl7Ci8vdHJhbnNsYXRlIHVzZXIgaWRlbnRpZmllciAoZS5nLiBlbWFpbCwgbmFtZS4uLikgaW50byB0aGUgYXNzb2NpYXRlZCBoeXBlcnRpZXMKby5kaXNjb3Zlckh5cGVydGllcyhlLFtdLFtdLGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIGM9W107Zm9yKHZhciBmIGluIGUpYy5wdXNoKGVbZl0pOy8vdHJhbnNsYXRlIGh5cGVydGllcyBVUkxzIGludG8gdGhlIGFzc29jaWF0ZWQgZGF0YU9iamVjdHMgcmVnaXN0ZXJlZCBpbiBzb21lIGRvbWFpbgp2YXIgbD1jLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihuLGkpe28uZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyKGUuaHlwZXJ0eUlELHQscixhKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKFtdKX0pfSl9KTtpLmRlZmF1bHQuYWxsKGwpLnRoZW4oZnVuY3Rpb24oZSl7W10uY29uY2F0LmFwcGx5KFtdLGUpLmZvckVhY2goZnVuY3Rpb24oZSl7cy5wdXNoKGUpfSk7dmFyIHQ9W107Zm9yKHZhciByIGluIHMpdC5wdXNoKHNbcl0pO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gdSgiTm8gZGF0YU9iamVjdHMgd2VyZSBmb3VuZCIpOwovLyBsb2cubG9nKCdEYXRhT2JqZWN0cyBGb3VuZDogJywgZmluYWxEYXRhT2JqZWN0cyk7Cm4odCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiB1KGUpfSl9KX19LHtrZXk6ImRpc2NvdmVySHlwZXJ0eVBlclVSTCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dm9pZCAwO249dHx8ci5kb21haW47dmFyIG89e3R5cGU6InJlYWQiLGZyb206ci5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbixib2R5OntyZXNvdXJjZTplfX07cmV0dXJuIG5ldyBpLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtyLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihyKXtpZigyMDAhPT1yLmJvZHkuY29kZSYmNTAwIT09ci5ib2R5LmNvZGUpcmV0dXJuIHQoIk5vIEh5cGVydHkgd2FzIGZvdW5kIik7dmFyIG49ci5ib2R5LnZhbHVlO2lmKCFuKXJldHVybiB0KCJObyBIeXBlcnR5IHdhcyBmb3VuZCIpOwovLyBsb2cubG9nKCdIeXBlcnR5IGZvdW5kOiAnLCBoeXBlcnR5KTsKZShuKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RQZXJVUkwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXR8fHIuZG9tYWluO3ZhciBvPXt0eXBlOiJyZWFkIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24sYm9keTp7cmVzb3VyY2U6ZX19O3JldHVybiBuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8sZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlO2lmKCFuKXJldHVybiB0KCJEYXRhT2JqZWN0IG5vdCBmb3VuZCIpOwovLyBsb2cubG9nKCdEYXRhT2JqZWN0IGZvdW5kOiAnLCBkYXRhT2JqZWN0KTsKZShuKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcyxhPXZvaWQgMDthPW58fG8uZG9tYWluO3ZhciBzPXt0eXBlOiJyZWFkIixmcm9tOm8uZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK2EsYm9keTp7cmVzb3VyY2U6ZX19O3JldHVybiB0Lmxlbmd0aD4wJiYocy5ib2R5LmNyaXRlcmlhfHwocy5ib2R5LmNyaXRlcmlhPXt9KSxzLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXM9dCksci5sZW5ndGg+MCYmKHMuYm9keS5jcml0ZXJpYXx8KHMuYm9keS5jcml0ZXJpYT17fSkscy5ib2R5LmNyaXRlcmlhLnJlc291cmNlcz1yKSxuZXcgaS5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7by5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHMsZnVuY3Rpb24ocil7dmFyIG49ci5ib2R5LnZhbHVlLGk9W107Zm9yKHZhciBvIGluIG4paS5wdXNoKG5bb10pO2lmKCEoaS5sZW5ndGg+MCkpcmV0dXJuIHQoIk5vIERhdGFPYmplY3Qgd2FzIGZvdW5kIik7Ci8vIGxvZy5sb2coIkRhdGFPYmplY3RzIEZvdW5kOiAiLCBmaW5hbERhdGFPYmplY3RzKTsKZShpKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzUGVyUmVwb3J0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXRoaXMsYT12b2lkIDA7YT1ufHxvLmRvbWFpbjt2YXIgcz17dHlwZToicmVhZCIsZnJvbTpvLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIithLGJvZHk6e3Jlc291cmNlOiIvY29tbSIsY3JpdGVyaWE6e3JlcG9ydGVyOmV9fX07cmV0dXJuIHQubGVuZ3RoPjAmJihzLmJvZHkuY3JpdGVyaWEuZGF0YVNjaGVtZXM9dCksci5sZW5ndGg+MCYmKHMuYm9keS5jcml0ZXJpYS5yZXNvdXJjZXM9ciksbmV3IGkuZGVmYXVsdChmdW5jdGlvbihlLHQpe28ubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZSxpPVtdO2Zvcih2YXIgbyBpbiBuKWkucHVzaChuW29dKTtpZighKGkubGVuZ3RoPjApKXJldHVybiB0KCJObyBEYXRhT2JqZWN0IHdhcyBmb3VuZCIpOwovLyBsb2cubG9nKCJEYXRhT2JqZWN0cyBGb3VuZDogIiwgZmluYWxEYXRhT2JqZWN0cyk7CmUoaSl9KX0pfX0se2tleToiZGlzY292ZXJVc2VySWRzUGVyR1VJRCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihyLG4pewovLyBsb2cubG9nKCJHTyBncmFwaENvbm5lY3RvcjoiLCBndWlkKTsKdC5ncmFwaENvbm5lY3Rvci5xdWVyeUdsb2JhbFJlZ2lzdHJ5KGUpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ0luZm9ybWF0aW9uIHJldHVybmVkIGZyb20gR2xvYmFsIFJlZ2lzdHJ5OiAnLCBncmFwaENvbm5lY3RvckNvbnRhY3REYXRhKTsKaWYoInN0cmluZyI9PXR5cGVvZiBlfHwhZSlyZXR1cm4gbigiVW5zdWNjZXNzZnVsIGRpc2NvdmVyIHVzZXJJRHMgYnkgR1VJRCIpO3ZhciB0PWUudXNlcklEcztpZigwPT09dC5sZW5ndGgpcmV0dXJuIG4oIlVzZXJJRHMgbm90IGF2YWlsYWJsZSIpO3IodCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckdVSURQZXJVc2VySWRlbnRpZmllciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IGkuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuaHR0cFJlcXVlc3QuZ2V0KCJodHRwczovL3JldGhpbmsudGxhYnNjbG91ZC5jb20vZGlzY292ZXJ5L3Jlc3QvZGlzY292ZXIvbG9va3VwP3NlYXJjaHF1ZXJ5PSIrZSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnZGlzY292ZXIgR1VJRCBieSB1c2VyIGlkZW50aWZpZXInLCBqc29uKTsKdmFyIHQ9SlNPTi5wYXJzZShlKSxpPXQucmVzdWx0cy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9ZS5yZXRoaW5rSUR9KTtpZigwPT09aS5sZW5ndGgpcmV0dXJuIG4oIlVuc3VjY2Vzc2Z1bCBkaXNjb3ZlciBHVUlEIGJ5IHVzZXIgaWRlbnRpZmllciIpO3ZhciBvPWkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJldGhpbmtJRH0pO3JldHVybiByKG8pfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coIkhUVFAgUmVxdWVzdCBlcnJvcjogIiwgZXJyKTsKcmV0dXJuIG4oZSl9KX0pfX0se2tleToibWVzc2FnZUJ1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VCdXN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9tZXNzYWdlQnVzPWV9fV0pLENvcmVEaXNjb3Zlcnl9KCk7dC5kZWZhdWx0PXAsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDg4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDg5KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDQ1KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDEyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDk4KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDk2KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDEpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoMiksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9cigxMSksYj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGcpLG09cigxNSksXz1iLmdldExvZ2dlcigiRGF0YU9iamVjdHNTdG9yYWdlIiksUj1mdW5jdGlvbigpe2Z1bmN0aW9uIERhdGFPYmplY3RzU3RvcmFnZShlLHQpe2lmKCgwLHkuZGVmYXVsdCkodGhpcyxEYXRhT2JqZWN0c1N0b3JhZ2UpLCFlKXRocm93IG5ldyBFcnJvcigiW1N0b3JlIERhdGEgT2JqZWN0c10gLSBOZWVkcyB0aGUgc3RvcmFnZU1hbmFnZXIgY29tcG9uZW50Iik7dGhpcy5fc3RvcmFnZU1hbmFnZXI9ZSx0aGlzLl9zdG9yZURhdGFPYmplY3Q9dCx0aGlzLl9jYWNoZT17fX0vKioKICAgKiBAZGVzY3JpcHRpb24gc2hvdWxkIHNldCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZGF0YU9iamVjdFVSTCB0byBiZSByZXN1bWVkIGlmIG5lY2Vzc2FyeTsKICAgKgogICAqIEBwYXJhbSB7RGF0YU9iamVjdFVSTH0gdXJsIC0gZGF0YU9iamVjdFVSTCB0byBiZSBzYXZlZDsKICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzUmVwb3J0ZXIgLSB0aGUgb2JqZWN0IHRvIGJlIHNhdmVkIGlzIGEgcmVwb3J0ZXIKICAgKiBAcGFyYW0ge1NjaGVtYVVSTH0gc2NoZW1hIC0gdGhlIHNjaGVtYSB1cmwKICAgKiBAcGFyYW0ge1N0cmluZ30gc3RhdHVzIC0gdGhlIHN0YXR1cyBvZiBjdXJyZW50IGRhdGFPYmplY3QKICAgKiBAcGFyYW0ge0h5cGVydHlVUkx9IHJlcG9ydGVyIC0gdGhlIFJlcG9ydGVyIGh5cGVydHlVUkwKICAgKiBAcGFyYW0ge0FycmF5PEh5cGVydHlVUkw+fSBzdWJzY3JpcHRpb24gLSBsaXN0IG9mIHN1YnNjcmlwdGlvbnMKICAgKiBAcGFyYW0ge0FycmF5PERhdGFPYmplY3RDaGlsZD59IGNoaWxkcmVuIC0gbGlzdCBvZiBjaGlsZHMgb2YgZGF0YU9iamVjdFVSTAogICAqIEBwYXJhbSB7QXJyYXk8U3RyaW5nPn0gY2hpbGRyZW5zIC0gbGlzdCBvZiBjaGlsZHJlbnMsIGxpa2UsICdjaGF0bWVzc2FnZSc7CiAgICogQHBhcmFtIHtBcnJheTxVc2VyVVJMfSBzdWJzY3JpYmVyVXNlciAtIGxpc3Qgb2Ygc3Vic2NyaWJlZCB1c2VyczsKICAgKi8KcmV0dXJuKDAsdi5kZWZhdWx0KShEYXRhT2JqZWN0c1N0b3JhZ2UsW3trZXk6InNldCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmVEYXRhT2JqZWN0LHI9dGhpcy5fZ2V0VHlwZU9mT2JqZWN0KGUuaXNSZXBvcnRlcik7Ly8gVE9ETzpkbyB3ZSBuZWVkIHRoaXM/Ci8vIFRPRE86ZG8gd2UgbmVlZCB0aGlzPwovKmlmIChzY2hlbWEpIHN0b3JlRGF0YU9iamVjdFt0eXBlXVttZXRhZGF0YS51cmxdLnNjaGVtYSA9IHNjaGVtYTsKICAgICAgaWYgKHN0YXR1cykgc3RvcmVEYXRhT2JqZWN0W3R5cGVdW21ldGFkYXRhLnVybF0uc3RhdHVzID0gc3RhdHVzOwogICAgICBpZiAoY2hpbGRyZW5SZXNvdXJjZXMpIHN0b3JlRGF0YU9iamVjdFt0eXBlXVttZXRhZGF0YS51cmxdLmNoaWxkcmVuUmVzb3VyY2VzID0gY2hpbGRyZW5SZXNvdXJjZXM7Ki8KLy8gVE9ETzogZG8gd2UgbmVlZCB0aGlzPwovL3N0b3JlRGF0YU9iamVjdFt0eXBlXVttZXRhZGF0YS51cmxdLm93bmVyID0gb3duZXI7CnJldHVybiB0Lmhhc093blByb3BlcnR5KHIpfHwodFtyXT17fSksdFtyXS5oYXNPd25Qcm9wZXJ0eShlLnVybCl8fCh0W3JdW2UudXJsXT17fSx0W3JdW2UudXJsXS5zdWJzY3JpcHRpb25zPVtdLHRbcl1bZS51cmxdLnN1YnNjcmliZXJVc2Vycz1bXSx0W3JdW2UudXJsXS5jaGlsZHJlbk9iamVjdHM9e30sdFtyXVtlLnVybF0uZGF0YT17fSksKDAsZC5kZWZhdWx0KSh0W3JdW2UudXJsXSxlKSxkZWxldGUgdFtyXVtlLnVybF0uc3Vic2NyaWJlclVzZXIsZGVsZXRlIHRbcl1bZS51cmxdLnN1YnNjcmliZXJIeXBlcnR5LGUuc3Vic2NyaWJlckh5cGVydHkmJiFlLmlzUmVwb3J0ZXImJnRoaXMuX3VwZGF0ZVRvQXJyYXkodFtyXSxlLnVybCwic3Vic2NyaXB0aW9ucyIsZS5zdWJzY3JpYmVySHlwZXJ0eSksZS5zdWJzY3JpYmVyVXNlciYmdFtyXVtlLnVybF0uc3Vic2NyaWJlclVzZXJzLmluZGV4T2YoZS5zdWJzY3JpYmVyVXNlcikmJnRoaXMuX3VwZGF0ZVRvQXJyYXkodFtyXSxlLnVybCwic3Vic2NyaWJlclVzZXJzIixlLnN1YnNjcmliZXJVc2VyKSx0aGlzLl9zdG9yZURhdGFPYmplY3Q9dCx0aGlzLl9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsdCksdFtyXVtlLnVybF19fSx7a2V5OiJzYXZlRGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcy5fc3RvcmVEYXRhT2JqZWN0LG89dGhpcy5fZ2V0VHlwZU9mT2JqZWN0KGUpO2lmKCFpfHwhaVtvXXx8IWlbb11bdF0pcmV0dXJuIHZvaWQgXy5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gc2F2ZSBkYXRhXSAtIG5vdCBzYXZlZCIpO2lmKF8ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIHNhdmVEYXRhXSAtICIsZSxvLHQscixuKSxpW29dW3RdLmhhc093blByb3BlcnR5KCJkYXRhIil8fChpW29dW3RdLmRhdGE9e30pLHIpe3ZhciBhPXZvaWQgMDthPSJvYmplY3QiPT09KHZvaWQgMD09PW4/InVuZGVmaW5lZCI6KDAsZi5kZWZhdWx0KShuKSk/KDAsbS5kZWVwQ2xvbmUpKG4pOm4sKDAsbS5hc3NpZ24pKGlbb11bdF0uZGF0YSxyLGEpfWVsc2UgaVtvXVt0XS5kYXRhPSgwLG0uZGVlcENsb25lKShuKXx8e307cmV0dXJuIHRoaXMuX3N0b3JlRGF0YU9iamVjdD1pLHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxpKSxpW29dW3RdfX0se2tleToic2F2ZUNoaWxkcmVucyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcy5fc3RvcmVEYXRhT2JqZWN0LG89dGhpcy5fZ2V0VHlwZU9mT2JqZWN0KGUpO3JldHVybiBpJiZpW29dJiZpW29dW3RdPyhpW29dW3RdLmhhc093blByb3BlcnR5KCJjaGlsZHJlbnMiKXx8KGlbb11bdF0uY2hpbGRyZW5PYmplY3RzPXt9KSxyPygwLG0uYXNzaWduKShpW29dW3RdLmNoaWxkcmVuT2JqZWN0cyxyLCgwLG0uZGVlcENsb25lKShuKSk6aVtvXVt0XS5jaGlsZHJlbk9iamVjdHM9KDAsbS5kZWVwQ2xvbmUpKG4pfHx7fSx0aGlzLl9zdG9yZURhdGFPYmplY3Q9aSx0aGlzLl9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsaSksaVtvXVt0XSk6dm9pZCBfLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSBzYXZlIGNoaWxkcmVuc10gLSBub3Qgc2F2ZWQiKX19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcy5fc3RvcmVEYXRhT2JqZWN0LG89dGhpcy5fZ2V0VHlwZU9mT2JqZWN0KGUpO2lmKCFpfHwhaVtvXXx8IWlbb11bdF0pcmV0dXJuIHZvaWQgXy5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gdXBkYXRlXSAtIG5vdCBzYXZlZCIpO2lmKF8ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIHVwZGF0ZV0gLSAiLGUsbyx0LHIsbiksaVtvXSYmaVtvXVt0XSYmdCYmciYmbil7aWYoInN1YnNjcmlwdGlvbnMiPT09cnx8InN1YnNjcmliZXJVc2VycyI9PT1yKXt2YXIgYT0hMDsic3Vic2NyaXB0aW9ucyI9PT1yJiYoYT0hdGhpcy5faXNPd25lcihpW29dW3RdLG4pKSxhJiZ0aGlzLl91cGRhdGVUb0FycmF5KGlbb10sdCxyLG4pfWVsc2UgaVtvXVt0XVtyXT1uO3JldHVybiB0aGlzLl9zdG9yZURhdGFPYmplY3Q9aSx0aGlzLl9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsaSksaVtvXVt0XX19fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMuX3N0b3JlRGF0YU9iamVjdCxvPXRoaXMuX2dldFR5cGVPZk9iamVjdChlKTtyZXR1cm4gaSYmaVtvXSYmaVtvXVt0XT9pW29dJiZpW29dW3RdJiZ0JiZyJiZuPygic3Vic2NyaXB0aW9ucyI9PT1yfHwic3Vic2NyaWJlclVzZXJzIj09PXI/dGhpcy5fcmVtb3ZlRnJvbUFycmF5KGlbb10sdCxyLG4pOmRlbGV0ZSBpW29dW3RdW3JdLHRoaXMuX3N0b3JlRGF0YU9iamVjdD1pLHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxpKSxpW29dW3RdKTp2b2lkIDA6dm9pZCBfLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSBkZWxldGVdIC0gbm90IHNhdmVkIil9fSx7a2V5OiJkZWxldGVSZXNvdXJjZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKGUpcmV0dXJuIHQuZ2V0QWxsKCkudGhlbihmdW5jdGlvbihuKXt2YXIgaT0oMCxkLmRlZmF1bHQpKG4sdC5fc3RvcmVEYXRhT2JqZWN0fHx7fSk7cmV0dXJuIGkuaGFzT3duUHJvcGVydHkoIm9ic2VydmVycyIpJiZpLm9ic2VydmVycy5oYXNPd25Qcm9wZXJ0eShlKT8oZGVsZXRlIGkub2JzZXJ2ZXJzW2VdLHQuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxpKSx0Ll9zdG9yZURhdGFPYmplY3Q9aSxyKGkub2JzZXJ2ZXJzW2VdKSk6aS5oYXNPd25Qcm9wZXJ0eSgicmVwb3J0ZXJzIikmJmkucmVwb3J0ZXJzLmhhc093blByb3BlcnR5KGUpPyhkZWxldGUgaS5yZXBvcnRlcnNbZV0sdC5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLGkpLHQuX3N0b3JlRGF0YU9iamVjdD1pLHIoaS5yZXBvcnRlcnNbZV0pKTp2b2lkIHIoIlRoZSAiK2UrIiBkb3Nlblx0IGV4aXN0cywgbm90aGluZyB3YXMgZGVsZXRlZCIpfSk7bihuZXcgRXJyb3IoIltTdG9yZURhdGFPYmplY3RzXSAtIENhbid0IGRlbGV0ZSB0aGlzICIrZSkpfSl9fSx7a2V5OiJnZXRBbGwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLmdldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIpfX0se2tleToiZ2V0RGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX3N0b3JhZ2VNYW5hZ2VyLmdldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIpLnRoZW4oZnVuY3Rpb24odCl7dmFyIGk9dC5oYXNPd25Qcm9wZXJ0eSgib2JzZXJ2ZXJzIik/dC5vYnNlcnZlcnM6e30sbz10Lmhhc093blByb3BlcnR5KCJyZXBvcnRlcnMiKT90LnJlcG9ydGVyczp7fSxzPSgwLGEuZGVmYXVsdCkobykuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KSx1PSgwLGEuZGVmYXVsdCkoaSkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdD09PWV9KSxjPXZvaWQgMDtyZXR1cm4gdSYmKGM9dC5vYnNlcnZlcnNbdV0pLHMmJihjPXQucmVwb3J0ZXJzW3NdKSxfLmluZm8oIltTdG9yZURhdGFPYmplY3RzIC0gZ2V0RGF0YU9iamVjdF0gLSBmb3Igb2JzZXJ2ZXI6ICIsdSksXy5pbmZvKCJbU3RvcmVEYXRhT2JqZWN0cyAtIGdldERhdGFPYmplY3RdIC0gZm9yIHJlcG9ydGVyczogIixzKSxfLmluZm8oIltTdG9yZURhdGFPYmplY3RzIC0gZ2V0RGF0YU9iamVjdF0gLSByZXNvbHZlOiAiLGMpLGM/cihjKTpuKCJObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCIpfSl9KX19LHtrZXk6ImdldFJlc291cmNlc0J5Q3JpdGVyaWEiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuKXt2YXIgaT1yLl9nZXRUeXBlT2ZPYmplY3QodCk7ci5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBfLmxvZygiW0RhdGFPYmplY3RzU3RvcmFnZS5nZXRSZXNvdXJjZXNCeUNyaXRlcmlhXSBkb24ndCBoYXZlIHN0b3JlZCBkYXRhIG9iamVjdHMiKSxuKG51bGwpO2lmKGUuYm9keSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXN1bWUiKSYmIWUuYm9keS5yZXN1bWUpcmV0dXJuIG4obnVsbCk7Ci8vIGNoZWNrIGlmIHRoZSBtZXNzYWdlIGhhdmUgb3RoZXIgY3JpdGVyaWEKLy8gaWYgbm90IHNlYXJjaCBmb3Igb24gdGhlICdmcm9tJyBvZiB0aGUgbWVzc2FnZS4KdmFyIG89W10sYT1yLl9oYXNTdWJzY3JpcHRpb24odFtpXSxlLmZyb20pLHM9ci5fc2VhcmNoT3duZXIodFtpXSxlLmZyb20pO2lmKF8ubG9nKCJbU3RvcmVkRGF0YU9iamVjdHMgLSBnZXRSZXNvdXJjZXNCeUNyaXRlcmlhXToiLHQsZSxhLHMpLCEoZS5oYXNPd25Qcm9wZXJ0eSgiZnJvbSIpJiZhfHxzKSlyZXR1cm4gbihudWxsKTt2YXIgdT12b2lkIDA7dT1zP3IuX2dldFJlc291cmNlc0J5T3duZXIodFtpXSxlLmZyb20pOnIuX2dldFJlc291cmNlc0J5U3Vic2NyaXB0aW9uKHRbaV0sZS5mcm9tKTt2YXIgYz1bXTtlLmJvZHkmJmUuYm9keS5pZGVudGl0eSYmKGM9ci5fZ2V0UmVzb3VyY2VzQnlJZGVudGl0eSh0W2ldLGUuYm9keS5pZGVudGl0eSkpOwovL1RPRE86IHJlbW92ZSBzY2hlbWEgc2luY2UgbWV0YWRhdGEgYWxyZWFkeSBpbmNsdWRlcyB0aGUgc2NoZW1hPwp2YXIgZj1bXTtlLmJvZHkmJmUuYm9keS5zY2hlbWEmJihmPXIuX2dldFJlc291cmNlc0J5U2NoZW1hKHRbaV0sZS5ib2R5LnNjaGVtYSkpO3ZhciBsPVtdO2lmKGUuYm9keSYmZS5ib2R5LnZhbHVlKXt2YXIgZD1lLmJvZHkudmFsdWU7ZGVsZXRlIGQuZGF0YSxsPXIuX2dldFJlc291cmNlc0J5TWV0YWRhdGEodFtpXSxkKX12YXIgcD1bXTtlLmJvZHkmJmUuYm9keS52YWx1ZSYmZS5ib2R5LnZhbHVlLmRhdGEmJihwPXIuX2dldFJlc291cmNlc0J5RGF0YSh0W2ldLGUuYm9keS52YWx1ZS5kYXRhKSksCi8vIHlvdSBjYW4gcGFzcyBhcyBhcnJheXMgYXMgeW91IHdhbnQuLiBpdCB3aWxsIGJlIG1lcmdlZCBpbiBvbiBwbGFjZQovLyByZW1vdmVkIGR1cGxpY2F0ZXM7Cm89ci5faW50ZXJzZWN0aW9uKHUsYyxmLHAsbCk7dmFyIHk9e307by5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPXRbaV1bZV07cmV0dXJuIHlbZV09cix5fSksXy5sb2coIltTdG9yZSBEYXRhIE9iamVjdHNdIC0gIix5KSxuKHkpfSl9KX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeUlkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPygwLGEuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnN1YnNjcmliZXJVc2Vycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSkubGVuZ3RofSk6W119fSx7a2V5OiJfZ2V0UmVzb3VyY2VzQnlPd25lciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8oMCxhLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZVtyXS5yZXBvcnRlcj09PXR9KTpbXX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeVN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT8oMCxhLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZVtyXS5zdWJzY3JpcHRpb25zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9KS5sZW5ndGh9KTpbXX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeVNjaGVtYSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4oMCxhLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXt2YXIgbj1lW3JdO3JldHVybigwLGEuZGVmYXVsdCkobikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiJzY2hlbWEiPT09ZSYmbltlXT09PXR9KS5sZW5ndGh9KX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeU1ldGFkYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0PygwLGEuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3ZhciBuPWVbcl07cmV0dXJuKDAsYS5kZWZhdWx0KShuKS5maWx0ZXIoZnVuY3Rpb24oZSl7Ci8vIHNlYXJjaCBvbiBzdG9yZURhdGFPYmplY3RzIGZvciBzcGVjaWZpYyBrZXkgcHJvdmlkZWQgZnJvbSBkYXRhOwpyZXR1cm4oMCxhLmRlZmF1bHQpKHQpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZT09PXImJm5bZV09PT10W3JdfSkubGVuZ3RofSkubGVuZ3RofSk6W119fSx7a2V5OiJfZ2V0UmVzb3VyY2VzQnlEYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiB0PygwLGEuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3ZhciBuPWVbcl0uaGFzT3duUHJvcGVydHkoImRhdGEiKT9lW3JdLmRhdGE6e307cmV0dXJuKDAsYS5kZWZhdWx0KShuKS5maWx0ZXIoZnVuY3Rpb24oZSl7Ci8vIHNlYXJjaCBvbiBzdG9yZURhdGFPYmplY3RzIGZvciBzcGVjaWZpYyBrZXkgcHJvdmlkZWQgZnJvbSBkYXRhOwpyZXR1cm4oMCxhLmRlZmF1bHQpKHQpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZT09PXImJm5bZV09PT10W3JdfSkubGVuZ3RofSkubGVuZ3RofSk6W119fSx7a2V5OiJfaGFzU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEhZSYmKDAsYS5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGVbcl0uc3Vic2NyaXB0aW9ucy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10fSkubGVuZ3RofSkubGVuZ3RoPjB9fSx7a2V5OiJfc2VhcmNoT3duZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFlJiYoMCxhLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZVtyXS5yZXBvcnRlcj09PXR9KS5sZW5ndGg+MH19LHtrZXk6Il9pc093bmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEhZSYmZS5yZXBvcnRlcj09PXR9fSx7a2V5OiJfaW50ZXJzZWN0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPSgwLGkuZGVmYXVsdCkoYXJndW1lbnRzKSx0PWUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29uY2F0KHQpfSkuZmlsdGVyKGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gci5pbmRleE9mKGUpPT09dH0pO3JldHVybiBfLmxvZygiRGF0YU9iamVjdHNTdG9yYWdlLl9pbnRlcnNlY3Rpb25dIFJlc3VsdCBhbiB1bmlxdWUgYXJyYXkgb2Ygc3RyaW5nczogIix0KSx0fX0se2tleToiX3VwZGF0ZVRvQXJyYXkiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe18ubG9nKCJbRGF0YU9iamVjdHNTdG9yYWdlXSAtIF91cGRhdGVUb0FycmF5OiAiLGUsdCxyLG4pLC0xPT09ZVt0XVtyXS5pbmRleE9mKG4pJiZlW3RdW3JdLnB1c2gobil9fSx7a2V5OiJfcmVtb3ZlRnJvbUFycmF5Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT1lW3RdW3JdLmluZGV4T2Yobik7LTE9PT1pJiZlW3RdW3JdLnNwbGljZShpLDEpfX0se2tleToiX2hhc1ZhbHVlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGUuaGFzT3duUHJvcGVydHkodCkmJmVbdF09PT1yfX0se2tleToiX2dldFR5cGVPZk9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InJlcG9ydGVycyI6Im9ic2VydmVycyJ9fV0pLERhdGFPYmplY3RzU3RvcmFnZX0oKTt0LmRlZmF1bHQ9UixlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQ5MCksX19lc01vZHVsZTohMH19LC8qIDQ5MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxMjYpLHIoNDkxKSxlLmV4cG9ydHM9cigxMykuQXJyYXkuZnJvbX0sLyogNDkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig2NSksaT1yKDI2KSxvPXIoNzYpLGE9cigxODkpLHM9cigxOTApLHU9cigxMzIpLGM9cig0OTIpLGY9cigxOTEpO2koaS5TK2kuRiohcigxOTYpKGZ1bmN0aW9uKGUpe0FycmF5LmZyb20oZSl9KSwiQXJyYXkiLHsKLy8gMjIuMS4yLjEgQXJyYXkuZnJvbShhcnJheUxpa2UsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKQpmcm9tOmZ1bmN0aW9uKGUpe3ZhciB0LHIsaSxsLGQ9byhlKSxwPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXkseT1hcmd1bWVudHMubGVuZ3RoLGg9eT4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsdj12b2lkIDAhPT1oLGc9MCxiPWYoZCk7Ci8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZQppZih2JiYoaD1uKGgseT4yP2FyZ3VtZW50c1syXTp2b2lkIDAsMikpLHZvaWQgMD09Ynx8cD09QXJyYXkmJnMoYikpZm9yKHQ9dShkLmxlbmd0aCkscj1uZXcgcCh0KTt0Pmc7ZysrKWMocixnLHY/aChkW2ddLGcpOmRbZ10pO2Vsc2UgZm9yKGw9Yi5jYWxsKGQpLHI9bmV3IHA7IShpPWwubmV4dCgpKS5kb25lO2crKyljKHIsZyx2P2EobCxoLFtpLnZhbHVlLGddLCEwKTppLnZhbHVlKTtyZXR1cm4gci5sZW5ndGg9ZyxyfX0pfSwvKiA0OTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDM4KSxpPXIoNzMpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dCBpbiBlP24uZihlLHQsaSgwLHIpKTplW3RdPXJ9fSwvKiA0OTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0NSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMTEpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxsPXIoMTUpLGQ9Zi5nZXRMb2dnZXIoIkh5cGVydHlSZXNvdXJjZXNTdG9yYWdlIikscD1mdW5jdGlvbigpe2Z1bmN0aW9uIEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlKGUsdCxyLG4pe2lmKCgwLGEuZGVmYXVsdCkodGhpcyxIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSksIXIpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UgY29uc3RydWN0b3JdIG1hbmRhdG9yeSBzdG9yYWdlTWFuYWdlciBwYXJhbWV0ZXIgbWlzc2luZyIpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlIGNvbnN0cnVjdG9yXSBtYW5kYXRvcnkgcnVudGltZVVSTCBwYXJhbWV0ZXIgbWlzc2luZyIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlIGNvbnN0cnVjdG9yXSBtYW5kYXRvcnkgYnVzIHBhcmFtZXRlciBtaXNzaW5nIik7dmFyIGk9dGhpcztpLl9idXM9dCxpLl91cmw9ZSsiL3N0b3JhZ2UiLGkuX3N0b3JhZ2VNYW5hZ2VyPXIsaS5faHlwZXJ0eVJlc291cmNlcz1uLHQuYWRkTGlzdGVuZXIoaS5fdXJsLGZ1bmN0aW9uKGUpe3N3aXRjaChkLmluZm8oIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZV0gTWVzc2FnZSBSQ1Y6ICIsZSksZS50eXBlKXtjYXNlImNyZWF0ZSI6aS5fb25DcmVhdGUoZSk7YnJlYWs7Y2FzZSJyZWFkIjppLl9vblJlYWQoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOmkuX29uRGVsZXRlKGUpfX0pfS8qKgogICAqIEBkZXNjcmlwdGlvbiBzaG91bGQgc2F2ZSBhbiBIeXBlcnR5UmVzb3VyY2UgY29udGFpbmVkIGluIHRoZSBib2R5IG9mIGEgY3JlYXRlIG1lc3NhZ2UgcmVxdWVzdDsKICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gbWVzc2FnZSBjb250YWluaW5nIHRoZSBoeXBlcnR5IHJlc291cmNlIHRvIGJlIHN0b3JlZAogICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlLFt7a2V5OiJfb25DcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keXx8IWUuYm9keS52YWx1ZSl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZS5fb25DcmVhdGVdIG1hbmRhdG9yeSBtZXNzYWdlIGJvZHkgdmFsdWUgbWlzc2luZzogIixlKTt2YXIgcj10Ll91cmwrIi8iKygwLGwuZ2VuZXJhdGVHVUlEKSgpLG49ZS5ib2R5LnZhbHVlLG89ZS5ib2R5LnZhbHVlLnVybDsKLy8gLy8gbG9nLmxvZygnUmVzb3VyY2UgRmluZDogJywgcmVzb3VyY2VGaW5kKTsKKDAsaS5kZWZhdWx0KSh0Ll9oeXBlcnR5UmVzb3VyY2VzKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9oeXBlcnR5UmVzb3VyY2VzW2VdLnVybD09PW99KXx8KG4uY29udGVudFVSTHx8KG4uY29udGVudFVSTD1bXSksbi5jb250ZW50VVJMLnB1c2gociksdC5faHlwZXJ0eVJlc291cmNlc1tyXT1uLHQuX3N0b3JhZ2VNYW5hZ2VyLnNldCgiaHlwZXJ0eVJlc291cmNlcyIsMSx0Ll9oeXBlcnR5UmVzb3VyY2VzKS50aGVuKGZ1bmN0aW9uKCl7dmFyIG49e2Zyb206ZS50byx0bzplLmZyb20saWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7dmFsdWU6cixjb2RlOjIwMH19O3QuX2J1cy5wb3N0TWVzc2FnZShuKX0pKX19LHtrZXk6Il9vblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keXx8IWUuYm9keS5yZXNvdXJjZSl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZS5fb25SZWFkXSBtYW5kYXRvcnkgbWVzc2FnZSBib2R5IHJlc291cmNlIG1pc3Npbmc6ICIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49e2Zyb206ZS50byx0bzplLmZyb20saWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7fX0saT10Ll9oeXBlcnR5UmVzb3VyY2VzW3JdO2k/ImZpbGUiPT09aS5yZXNvdXJjZVR5cGU/dC5fb25SZWFkRmlsZShuLGkpOihuLmJvZHkuY29kZT0yMDAsbi5ib2R5LnAycD0hMCxuLmJvZHkudmFsdWU9aSx0Ll9idXMucG9zdE1lc3NhZ2UobikpOihuLmJvZHkuY29kZT00MDQsbi5ib2R5LmRlc2M9IkNvbnRlbnQgTm90IEZvdW5kIGZvciAiK3IsdC5fYnVzLnBvc3RNZXNzYWdlKG4pKX19LHtrZXk6Il9vblJlYWRGaWxlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1uZXcgRmlsZVJlYWRlcjtpZihuLm9ubG9hZD1mdW5jdGlvbihuKXtkLmluZm8oIltGaWxlSHlwZXJ0eVJlc291cmNlLmluaXRdIGZpbGUgbG9hZGVkICIsbiksZS5ib2R5LmNvZGU9MjAwLGUuYm9keS5wMnA9ITAsZS5ib2R5LnZhbHVlPSgwLGwuZGVlcENsb25lKSh0KSxlLmJvZHkudmFsdWUuY29udGVudD1uLnRhcmdldC5yZXN1bHQsci5fYnVzLnBvc3RNZXNzYWdlKGUpfSx0Lm1pbWV0eXBlLmluY2x1ZGVzKCJ0ZXh0LyIpKW4ucmVhZEFzVGV4dCh0LmNvbnRlbnQpO2Vsc2V7dmFyIGk9dC5jb250ZW50O24ucmVhZEFzQXJyYXlCdWZmZXIoaSl9fX0se2tleToiX29uRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFlLmJvZHkpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UuX29uRGVsZXRlXSBtYW5kYXRvcnkgbWVzc2FnZSBib2R5IG1pc3Npbmc6ICIsZSk7aWYoZS5ib2R5LnJlc291cmNlKWRlbGV0ZSB0Ll9oeXBlcnR5UmVzb3VyY2VzW2UuYm9keS5yZXNvdXJjZV07ZWxzZXtpZighZS5ib2R5LnJlc291cmNlcyl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZS5fb25EZWxldGVdIG1hbmRhdG9yeSByZXNvdXJjZSBtaXNzaW5nOiAiLGUpO2UuYm9keS5yZXNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihlKXtkZWxldGUgdC5faHlwZXJ0eVJlc291cmNlc1tlXX0pfXQuX3N0b3JhZ2VNYW5hZ2VyLnNldCgiaHlwZXJ0eVJlc291cmNlcyIsMSx0Ll9oeXBlcnR5UmVzb3VyY2VzKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHI9e2Zyb206ZS50byx0bzplLmZyb20saWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7Y29kZToyMDB9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9KX19XSksSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2V9KCk7dC5kZWZhdWx0PXAsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMjA1KSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDEyKSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDQ1KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cigxMSkseT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHApLGg9cigxNSksdj1yKDQ5OCksZz1yKDk5KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksbT1yKDUwMyksXz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9cig1MDQpLHc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChSKSxTPXkuZ2V0TG9nZ2VyKCJTeW5jaGVyTWFuYWdlciIpLE89ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX3VybDogVVJMCiAgX2J1czogTWluaUJ1cwogIF9yZWdpc3RyeTogUmVnaXN0cnkKICBfYWxsb2NhdG9yOiBBZGRyZXNzQWxsb2NhdGlvbgogICBfcmVwb3J0ZXJzOiB7IE9iamVjdFVSTDogUmVwb3J0ZXJPYmplY3QgfQogIF9vYnNlcnZlcnM6IHsgT2JqZWN0VVJMOiBPYnNlcnZlck9iamVjdCB9CiAgKi8KZnVuY3Rpb24gU3luY2hlck1hbmFnZXIoZSx0LHIsbixpLG8sYSxzKXtpZigoMCxmLmRlZmF1bHQpKHRoaXMsU3luY2hlck1hbmFnZXIpLCFlKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXIgTWFuYWdlcl0gLSBuZWVkcyB0aGUgcnVudGltZVVSTCBwYXJhbWV0ZXIiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIltTeW5jaGVyIE1hbmFnZXJdIC0gbmVlZHMgdGhlIE1lc3NhZ2VCdXMgaW5zdGFuY2UiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoIltTeW5jaGVyIE1hbmFnZXJdIC0gbmVlZHMgdGhlIFJlZ2lzdHJ5IGluc3RhbmNlIik7aWYoIW4pdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWRzIHRoZSBSdW50aW1lQ2F0YWxvZ3VlIGluc3RhbmNlIik7aWYoIWkpdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWQgdGhlIHN0b3JhZ2VNYW5hZ2VyIGluc3RhbmNlIik7dmFyIHU9dGhpczt1Ll9idXM9dCx1Ll9yZWdpc3RyeT1yLHUuX2NhdGFsb2c9bix1Ll9zdG9yYWdlTWFuYWdlcj1pLHUuX2lkZW50aXR5TW9kdWxlPXMsCi8vVE9ETzogdGhlc2Ugc2hvdWxkIGJlIHNhdmVkIGluIHBlcnNpc3RlbmNlIGVuZ2luZT8KdS5ydW50aW1lVVJMPWUsdS5fdXJsPWUrIi9zbSIsdS5fb2JqZWN0VVJMPWUrIi9vYmplY3QtYWxsb2NhdGlvbiIsdS5fcmVwb3J0ZXJzPXt9LHUuX29ic2VydmVycz17fSx1Ll9kYXRhT2JqZWN0c1N0b3JhZ2U9YSwKLy9UT0RPOiB0aGlzIHNob3VsZCBub3QgYmUgaGFyZGNvZGVkIQp1Ll9kb21haW49KDAsaC5kaXZpZGVVUkwpKGUpLmRvbWFpbix1Ll9hbGxvY2F0b3I9b3x8Yi5kZWZhdWx0Lmluc3RhbmNlLFMubG9nKCJbU3luY2hlck1hbmFnZXIgLSBBZGRyZXNzQWxsb2NhdGlvbl0gLSAiLHUuX2FsbG9jYXRvciksdC5hZGRMaXN0ZW5lcih1Ll91cmwsZnVuY3Rpb24oZSl7c3dpdGNoKFMuaW5mbygiW1N5bmNoZXJNYW5hZ2VyXSBSQ1Y6ICIsZSksZS50eXBlKXtjYXNlImNyZWF0ZSI6dS5fb25DcmVhdGUoZSk7YnJlYWs7Y2FzZSJkZWxldGUiOnUuX29uRGVsZXRlKGUpO2JyZWFrO2Nhc2Uic3Vic2NyaWJlIjp1Ll9vbkxvY2FsU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnUuX29uTG9jYWxVblN1YnNjcmliZShlKX19KX1yZXR1cm4oMCxkLmRlZmF1bHQpKFN5bmNoZXJNYW5hZ2VyLFt7a2V5OiJfb25DcmVhdGUiLAovL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBTeW5jaGVyIC0+IGNyZWF0ZQp2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tLG49ZS50bzsKLy8gY2hlY2sgaWYgbWVzc2FnZSBpcyB0byBzYXZlIG5ldyBjaGlsZHJlbk9iamVjdHMgaW4gdGhlIGxvY2FsIHN0b3JhZ2UKLy8gVE9ETzogY2hlY2sgaWYgbWVzc2FnZSBpcyB0byBzdG9yZSBuZXcgY2hpbGQgaW4gdGhlIGxvY2FsIHN0b3JhZ2UgYW5kIGNhbGwgc3RvcmVDaGlsZC4gSG93IHRvIGRpc3Rpbmd1aXNoIGZyb20gb3RoZXJzPwplLmJvZHkuYXR0cmlidXRlP3RoaXMuX3N0b3JlQ2hpbGRyZW5zKGUpOiFlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlc3VtZSIpfHxlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlc3VtZSIpJiYhZS5ib2R5LnJlc3VtZT8KLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBpbnZpdGF0aW9uIG1lc3NhZ2UKZS5ib2R5LmF1dGhvcmlzZT8odGhpcy5fYXV0aG9yaXNlKGUpLFMuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLm9uQ3JlYXRlIC0gaW52aXRlIG9ic2VydmVyc10iLGUpKTooCi8vIHRoaXMgaXMgdG8gY3JlYXRlIGEgbmV3IGRhdGEgb2JqZWN0ClMuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLm9uQ3JlYXRlIC0gQ3JlYXRlIE5ldyBPYmplY3RdIixlKSx0aGlzLl9uZXdDcmVhdGUoZSkpOgovLyBJZiBmcm9tIHRoZSBoeXBlcnR5IHNpZGUsIGNhbGwgdGhlIHJlc3VtZVJlcG9ydGVyIHdlIHdpbGwgaGF2ZSByZXN1bWUgPSB0cnVlJwovLyBzbyB3ZSB3aWxsIGNyZWF0ZSBhbiByZXN1bWVkIG9iamVjdCBhbmQgd2lsbCB0cnkgdG8gcmVzdW1lIHRoZSBvYmplY3QgcHJldmlvdXNseSBzYXZlZDsKdGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLmdldFJlc291cmNlc0J5Q3JpdGVyaWEoZSwhMCkudGhlbihmdW5jdGlvbihvKXtpZihTLmluZm8oIltTeW5jaGVyTWFuYWdlciAtIENyZWF0ZSBSZXN1bWVkXSAtIFJlc291cmNlc0J5Q3JpdGVyaWEgfCBNZXNzYWdlOiAiLGUsIiByZXN1bHQ6ICIsbyksbyYmKDAsdS5kZWZhdWx0KShvKS5sZW5ndGg+MCl7dmFyIHM9W107KDAsdS5kZWZhdWx0KShvKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3MucHVzaCh0Ll9yZXN1bWVDcmVhdGUoZSxvW3JdKSl9KSxhLmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24obyl7Uy5sb2coIltTeW5jaGVyTWFuYWdlciAtIENyZWF0ZSBSZXN1bWVkXSIsbyk7Ci8vIFRPRE86IHNob3VkIHNlbmQgdGhlIGluZm9ybWF0aW9uIGlmIHNvbWUgb2JqZWN0IHdhcyBmYWlsOwp2YXIgYT0oMCxpLmRlZmF1bHQpKG8pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hMSE9PWV9KTtTLmluZm8oIltTeW5jaGVyTWFuYWdlci5vbkNyZWF0ZV0gcmV0dXJuaW5nIHJlc3VtZWQgb2JqZWN0cyA6ICIsYSksCi8vRkxPVy1PVVQ6IG1lc3NhZ2UgcmVzcG9uc2UgdG8gU3luY2hlciAtPiBjcmVhdGUgcmVzdW1lCnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTpuLHRvOnIsYm9keTp7Y29kZToyMDAsdmFsdWU6YX19KX0pfWVsc2V7Ci8vZm9yd2FyZCB0byBoeXBlcnR5Ogp2YXIgYz17fTtjLmlkPWUuaWQsYy5mcm9tPWUudG8sYy50bz1lLmZyb20sYy50eXBlPSJyZXNwb25zZSIsYy5ib2R5PXtjb2RlOjQwNCxkZXNjOiJObyBkYXRhIG9iamVjdHMgcmVwb3J0ZXJzIHRvIGJlIHJlc3VtZWQifSx0Ll9idXMucG9zdE1lc3NhZ2UoYyl9fSl9fSx7a2V5OiJfc3RvcmVDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2Usbj1lLmJvZHkuYXR0cmlidXRlOyJjaGlsZHJlbk9iamVjdHMiPT09bj90Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZUNoaWxkcmVucyghMSxyLHZvaWQgMCxlLmJvZHkudmFsdWUpOnQuX2RhdGFPYmplY3RzU3RvcmFnZS5zYXZlQ2hpbGRyZW5zKCEwLHIsbixlLmJvZHkudmFsdWUpfX0se2tleToiX25ld0NyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMsbj1lLmZyb20saT0oMCxoLmRpdmlkZVVSTCkoZS5mcm9tKS5kb21haW47Ci8vIGlmIHJlcG9ydGVyIGlzIGluIGEgSW50ZXJ3b3JraW5nIFByb3Rvc3R1YiB0aGUgcnVudGltZSBkb21haW4gYmFja2VuZCBzZXJ2aWNlcyB3aWxsIGJlIHVzZWQKci5fcmVnaXN0cnkuaXNJbnRlcndvcmtpbmdQcm90b1N0dWIoZS5mcm9tKSYmKGk9KDAsaC5kaXZpZGVVUkwpKHIucnVudGltZVVSTCkuZG9tYWluKSwKLy8gUHJvY2VzcyBpbnZpdGF0aW9uIG1lc3NhZ2UgdG8gb2JzZXJ2ZXJzCi8qaWYgKG1zZy5ib2R5LmF1dGhvcmlzZSkgewogICAgICAgIF90aGlzLl9hdXRob3Jpc2UobXNnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0qLwovL2dldCBzY2hlbWEgZnJvbSBjYXRhbG9ndWUgYW5kIHBhcnNlIC0+IChzY2hlbWUsIGNoaWxkcmVuKQpyLl9jYXRhbG9nLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKGUuYm9keS5zY2hlbWEpLnRoZW4oZnVuY3Rpb24obyl7dmFyIGE9by5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllcyxzPWEuc2NoZW1lP2Euc2NoZW1lLmNvbnN0YW50OiJyZXNvdXJjZSIsdT1hLmNoaWxkcmVuP2EuY2hpbGRyZW4uY29uc3RhbnQ6W107Ci8vIERvIHNjaGVtYSB2YWxpZGF0aW9uCi8vIFRPRE86IGNoZWNrIGlmIGlzIG5lZWQgdG8gaGFuZGxlIHdpdGggdGhlIHJlc3VsdCBvZiB2YWxpZGF0aW9uCigwLHYuc2NoZW1hVmFsaWRhdGlvbikocyxvLGUuYm9keS52YWx1ZSk7dmFyIGM9e25hbWU6ZS5ib2R5LnZhbHVlLm5hbWUsc2NoZW1hOmUuYm9keS52YWx1ZS5zY2hlbWEscmVwb3J0ZXI6ZS5ib2R5LnZhbHVlLnJlcG9ydGVyLHJlc291cmNlczplLmJvZHkudmFsdWUucmVzb3VyY2VzfSxmPWUuYm9keS52YWx1ZS5yZXNvdXJjZTsKLy9yZXF1ZXN0IGFkZHJlc3MgYWxsb2NhdGlvbiBvZiBhIG5ldyBvYmplY3QgZnJvbSB0aGUgbXNnLW5vZGUKci5fYWxsb2NhdG9yLmNyZWF0ZShpLDEsYyxzLGYpLnRoZW4oZnVuY3Rpb24oaSl7dmFyIG89KDAsaC5kZWVwQ2xvbmUpKGUuYm9keS52YWx1ZSk7by51cmw9aS5hZGRyZXNzWzBdLG8uYXV0aG9yaXNlPWUuYm9keS5hdXRob3Jpc2Usby5jaGlsZHJlbnM9dSwKLy9vYmplY3RSZWdpc3RyYXRpb24uZXhwaXJlcyA9IDMwOy8vVE9ETzogZ2V0IGl0IGZyb20gZGF0YSBvYmplY3QgY29uZmlndXJhdGlvbiBkZXNjcmlwdGlvbiB3aGVuIHByZXNlbnQKZGVsZXRlIG8uZGF0YSxTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdDcmVhdGVdIEFMTE9DQVRPUiBDUkVBVEU6IixpKTt2YXIgYT1vLnVybCsiL3N1YnNjcmlwdGlvbiI7Uy5sb2coIltTeW5jaGVyTWFuYWdlci5fbmV3Q3JlYXRlXSBTdWJzY3JpcHRpb24gVVJMIixhKSwKLy9UbyByZWdpc3RlciB0aGUgZGF0YU9iamVjdCBpbiB0aGUgcnVudGltZVJlZ2lzdHJ5ClMuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdDcmVhdGVdIFJlZ2lzdGVyIE9iamVjdDogIixvKSwKLy9fdGhpcy5fcmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0KG1zZy5ib2R5LnZhbHVlLm5hbWUsIG1zZy5ib2R5LnZhbHVlLnNjaGVtYSwgb2JqVVJMLCBtc2cuYm9keS52YWx1ZS5yZXBvcnRlciwgbXNnLmJvZHkudmFsdWUucmVzb3VyY2VzLCBhbGxvY2F0ZWQsIG1zZy5ib2R5LmF1dGhvcmlzZSkudGhlbigocmVzb2x2ZSkgPT4gewpyLl9yZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3QobykudGhlbihmdW5jdGlvbihpKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdDcmVhdGVdIERhdGFPYmplY3Qgc3VjY2Vzc2Z1bGx5IHJlZ2lzdGVyZWQiLGkpOwovL2FsbCBPSyAtPiBjcmVhdGUgcmVwb3J0ZXIgYW5kIHJlZ2lzdGVyIGxpc3RlbmVycwp2YXIgcz12b2lkIDA7cz10Ll9yZXBvcnRlcnNbby51cmxdP3QuX3JlcG9ydGVyc1tvLnVybF06bmV3IF8uZGVmYXVsdChyLG4sby51cmwpLFMubG9nKCJbU3luY2hlck1hbmFnZXIgLSBuZXcgQ3JlYXRlXSAtICIsZSk7Ci8vIFN0b3JlIGZvciBlYWNoIHJlcG9ydGVyIGh5cGVydHkgdGhlIGRhdGFPYmplY3QKdmFyIGM9dm9pZCAwLGY9ITE7ZS5ib2R5Lmhhc093blByb3BlcnR5KCJpZGVudGl0eSIpJiZlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUmJmUuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMPyhjPWUuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMLGMuaW5jbHVkZXMoInVzZXI6Ly8iKXx8KGY9ITApKTpmPSEwOwovLyBzaG91bGQgd2UgdXNlIHRoZSBtc2cuYm9keS52YWx1ZSBpbnN0ZWFkPwp2YXIgbD0oMCxoLmRlZXBDbG9uZSkobyk7bC5zdWJzY3JpYmVyVXNlcj1jLGwuaXNSZXBvcnRlcj0hMCwKLy8gU3RvcmUgdGhlIGRhdGFPYmplY3QgaW5mb3JtYXRpb24KZnx8KHIuX2RhdGFPYmplY3RzU3RvcmFnZS5zZXQobCksZS5ib2R5Lmhhc093blByb3BlcnR5KCJzdG9yZSIpJiZlLmJvZHkuc3RvcmUmJihzLmlzVG9TYXZlRGF0YT0hMCxyLl9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLG8udXJsLCJpc1RvU2F2ZURhdGEiLCEwKSxlLmJvZHkudmFsdWUuZGF0YSYmci5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVEYXRhKCEwLG8udXJsLG51bGwsZS5ib2R5LnZhbHVlLmRhdGEpKSksCi8vIGFkZGluZyBsaXN0ZW5lcnMgdG8gZm9yd2FyZCB0byByZXBvcnRlcgpzLmZvcndhcmRTdWJzY3JpYmUoW28udXJsLGFdKS50aGVuKGZ1bmN0aW9uKCl7cy5hZGRDaGlsZHJlbnModSkudGhlbihmdW5jdGlvbigpe3IuX3JlcG9ydGVyc1tvLnVybF09czt2YXIgdD17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOm4sYm9keTp7Y29kZToyMDAscmVzb3VyY2U6by51cmwsY2hpbGRyZW5SZXNvdXJjZXM6dX19OwovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlIHRvIFN5bmNoZXIgLT4gY3JlYXRlCnIuX2J1cy5wb3N0TWVzc2FnZSh0KX0pfSl9LGZ1bmN0aW9uKGUpe1MuZXJyb3IoZSl9KX0pfSkuY2F0Y2goZnVuY3Rpb24odCl7Ci8vRkxPVy1PVVQ6IGVycm9yIG1lc3NhZ2UgcmVzcG9uc2UgdG8gU3luY2hlciAtPiBjcmVhdGUKdmFyIGk9e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzpuLGJvZHk6e2NvZGU6NTAwLGRlc2M6dH19O3IuX2J1cy5wb3N0TWVzc2FnZShpKX0pfX0se2tleToiX3Jlc3VtZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihpKXt2YXIgbz1lLmZyb20sYT10LnNjaGVtYSxzPXQudXJsLHU9dC5kYXRhO1MubG9nKCJbU3luY2hlck1hbmFnZXJdIC0gcmVzdW1lIGNyZWF0ZSIsZSx0KSwKLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoc2NoZW1lLCBjaGlsZHJlbikKbi5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihhKS50aGVuKGZ1bmN0aW9uKGEpe3ZhciBjPWEuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMsZj1jLnNjaGVtZT9jLnNjaGVtZS5jb25zdGFudDoicmVzb3VyY2UiLGw9Yy5jaGlsZHJlbj9jLmNoaWxkcmVuLmNvbnN0YW50OltdO1MubG9nKCJbU3luY2hlck1hbmFnZXJdIC0gZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3I6ICIsYSxsKSwKLy8gRG8gc2NoZW1hIHZhbGlkYXRpb24KLy8gVE9ETzogY2hlY2sgaWYgaXMgbmVlZCB0byBoYW5kbGUgd2l0aCB0aGUgcmVzdWx0IG9mIHZhbGlkYXRpb24KKDAsdi5zY2hlbWFWYWxpZGF0aW9uKShmLGEsdSk7dmFyIGQ9KDAsaC5kZWVwQ2xvbmUpKGUuYm9keS52YWx1ZSk7ZC51cmw9dC51cmwsZC5leHBpcmVzPXQuZXhwaXJlcyxkZWxldGUgZC5kYXRhOwovL2FsbCBPSyAtPiBjcmVhdGUgcmVwb3J0ZXIgYW5kIHJlZ2lzdGVyIGxpc3RlbmVycwp2YXIgcD12b2lkIDA7cD1yLl9yZXBvcnRlcnNbc10/ci5fcmVwb3J0ZXJzW3NdOm5ldyBfLmRlZmF1bHQobixvLHMpLHAuaXNUb1NhdmVEYXRhPXQuaXNUb1NhdmVEYXRhLHAuZm9yd2FyZFN1YnNjcmliZShbdC51cmxdKS50aGVuKGZ1bmN0aW9uKCl7cC5hZGRDaGlsZHJlbnMobCkudGhlbihmdW5jdGlvbigpe3JldHVybiBwLnJlc3VtZVN1YnNjcmlwdGlvbnModC5zdWJzY3JpcHRpb25zKSxuLl9yZXBvcnRlcnNbc109cCxTLmluZm8oIltTeW5jaGVyTWFuYWdlciAtIHJlc3VtZSBjcmVhdGVdIC0gcmVzb2x2ZWQgcmVzdW1lZDogIix0KSxuLl9kZWNyeXB0Q2hpbGRyZW5zKHQsbCl9KS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdyZXN1bHQgb2YgcHJldmlvdXMgcHJvbWlzZScpOwppKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy5lcnJvcigiW1N5bmNoZXJNYW5hZ2VyIC0gcmVzdW1lIGNyZWF0ZV0gLSBmYWlsIG9uIGFkZENoaWxkcmVuczogIixlKSxpKCExKX0pfSksUy5pbmZvKCJbU3luY2hlck1hbmFnZXIuX3Jlc3VtZUNyZWF0ZV0gUmVnaXN0ZXIgT2JqZWN0OiAiLGQpLG4uX3JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdChkKS50aGVuKGZ1bmN0aW9uKGUpe1MubG9nKCJbU3luY2hlck1hbmFnZXIuX3Jlc3VtZUNyZWF0ZV0gRGF0YU9iamVjdCByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQiLGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtTLmVycm9yKCJbU3luY2hlck1hbmFnZXIgLSByZXN1bWUgY3JlYXRlXSAtIGZhaWwgb24gZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3I6ICIsZSksaSghMSl9KX0pfX0se2tleToiX2RlY3J5cHRDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuKXtpZih0KXswPT09KDAsdS5kZWZhdWx0KShlLmNoaWxkcmVuT2JqZWN0cykubGVuZ3RoJiZuKGUpLHQuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgaT1lLmNoaWxkcmVuT2JqZWN0c1t0XTtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSBkYXRhT2JqZWN0Q2hpbGRzIHRvIGRlY3J5cHQgIixpKTt2YXIgbz1bXTsoMCx1LmRlZmF1bHQpKGkpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49aVt0XSxhPXQuc3BsaXQoIiMiKVswXTtpZigic3RyaW5nIj09dHlwZW9mIG4udmFsdWUpe1MubG9nKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIGNyZWF0ZWRCeSAiLGEsIiBvYmplY3Q6ICIsbi52YWx1ZSk7dmFyIHM9ci5faWRlbnRpdHlNb2R1bGUuZGVjcnlwdERhdGFPYmplY3QoSlNPTi5wYXJzZShuLnZhbHVlKSxlLnVybCk7by5wdXNoKHMpfX0pLGEuZGVmYXVsdC5hbGwobykudGhlbihmdW5jdGlvbihyKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSByZXR1cm5pbmcgZGVjcnlwdGVkICIsciksci5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXIudmFsdWUudXJsO2UuY2hpbGRyZW5PYmplY3RzW3RdW25dLnZhbHVlPXIudmFsdWV9KSxTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSBzdG9yZWRPYmplY3QgIixlKSxuKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Uy53YXJuKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIGZhaWxlZCA6ICIsZSl9KX0pfWVsc2UgbihlKX0pfX0se2tleToiX2F1dGhvcmlzZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5LnJlc291cmNlKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXJNYW5hZ2VyLl9hdXRob3Jpc2VdIGludml0YXRpb24gcmVxdWVzdCB3aXRob3V0IGRhdGEgb2JqZWN0IHVybDoiLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSsiL3N1YnNjcmlwdGlvbiIsbj0hIWUuYm9keS5wMnAmJmUuYm9keS5wMnA7Uy5sb2coIltTeW5jaGVyTWFuYWdlciAtICBhdXRob3Jpc2VdIC0gIixlKSxlLmJvZHkuYXV0aG9yaXNlJiZlLmJvZHkuYXV0aG9yaXNlLmZvckVhY2goZnVuY3Rpb24oaSl7Ci8vRkxPVy1PVVQ6IHNlbmQgaW52aXRlcyB0byBsaXN0IG9mIHJlbW90ZSBTeW5jaGVyIC0+IF9vblJlbW90ZUNyZWF0ZSAtPiBvbk5vdGlmaWNhdGlvbgp0Ll9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6ImNyZWF0ZSIsZnJvbTpyLHRvOmksYm9keTp7cDJwOm4saWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LHNvdXJjZTplLmZyb20sdmFsdWU6ZS5ib2R5LnZhbHVlLHNjaGVtYTplLmJvZHkuc2NoZW1hfX0sZnVuY3Rpb24ocil7Ci8vIGxldHMgZm9yd2FyZCB0aGUgaW52aXRhdGlvbiByZXNwb25zZQp2YXIgbj17ZnJvbTplLnRvLHRvOmUuZnJvbSxpZDplLmlkLHR5cGU6ci50eXBlLGJvZHk6ci5ib2R5fTt0Ll9idXMucG9zdE1lc3NhZ2Uobil9KX0pfX0se2tleToiX29uRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fcmVwb3J0ZXJzW3JdO24mJigKLy9UT0RPOiBpcyB0aGVyZSBhbnkgcG9saWN5IHZlcmlmaWNhdGlvbiBiZWZvcmUgZGVsZXRlPwpuLmRlbGV0ZSgpLHRoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5kZWxldGVSZXNvdXJjZShyKS50aGVuKGZ1bmN0aW9uKG4pe1MubG9nKCJbU3luY2hlck1hbmFnZXIgLSBvbkRlbGV0ZV0gLSBkZWxldGVSZXNvdXJjZTogIixuKSx0Ll9yZWdpc3RyeS51bnJlZ2lzdGVyRGF0YU9iamVjdChyKSwKLy9UT0RPOiB1bnJlZ2lzdGVyIG9iamVjdD8KdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwfX0pfSkpfX0se2tleToiX29uTG9jYWxTdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLmdldFJlc291cmNlc0J5Q3JpdGVyaWEoZSwhMSkudGhlbihmdW5jdGlvbihyKXtpZihTLmluZm8oIltTeW5jaGVyTWFuYWdlciAtIFN1YnNjcmliZV0gLSBSZXNvdXJjZXNCeUNyaXRlcmlhIHwgTWVzc2FnZTogIixlLCIgcmVzdWx0OiAiLHIpLHImJigwLHUuZGVmYXVsdCkocikubGVuZ3RoPjApe3ZhciBuPVtdOwovLyBUT0RPOiBzaG91bGQgcmV1c2UgdGhlIHN0b3JhZ2VkIGluZm9ybWF0aW9uCigwLHUuZGVmYXVsdCkocikuZm9yRWFjaChmdW5jdGlvbihpKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gcmVzdW1lIFN1YnNjcmliZV0gLSByZXVzZSBjdXJyZW50IG9iamVjdCB1cmw6ICIscltpXSksbi5wdXNoKHQuX3Jlc3VtZVN1YnNjcmlwdGlvbihlLHJbaV0pKX0pLGEuZGVmYXVsdC5hbGwobikudGhlbihmdW5jdGlvbihyKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gT2JzZXJ2ZXJzIFJlc3VtZWRdIixyKTsKLy8gVE9ETzogc2hvdWQgc2VuZCB0aGUgaW5mb3JtYXRpb24gaWYgc29tZSBvYmplY3Qgd2FzIGZhaWw7CnZhciBuPSgwLGkuZGVmYXVsdCkocikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiExIT09ZX0pOwovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlIHRvIFN5bmNoZXIgLT4gY3JlYXRlCnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMCx2YWx1ZTpufX0pfSl9ZWxzZSBpZihlLmJvZHkuc2NoZW1hJiZlLmJvZHkucmVzb3VyY2UpUy5sb2coIltTeW5jaGVyTWFuYWdlci5vbkxvY2FsU3Vic2NyaWJlIC0gbmV3IFN1YnNjcmliZV0gLSAiLGUuYm9keS5zY2hlbWEsZS5ib2R5LnJlc291cmNlKSx0Ll9uZXdTdWJzY3JpcHRpb24oZSk7ZWxzZXsKLy9mb3J3YXJkIHRvIGh5cGVydHk6CnZhciBvPXt9O28uaWQ9ZS5pZCxvLmZyb209ZS50byxvLnRvPWUuZnJvbSxvLnR5cGU9InJlc3BvbnNlIixvLmJvZHk9e2NvZGU6NDA0LGRlc2M6Ik5vIGRhdGEgb2JqZWN0cyBvYnNlcnZlcnMgdG8gYmUgcmVzdW1lZCJ9LHQuX2J1cy5wb3N0TWVzc2FnZShvKX19KX19LHtrZXk6Il9uZXdTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLG49ZS5ib2R5LnJlc291cmNlLGk9ZS5mcm9tLG89KDAsaC5kaXZpZGVVUkwpKG4pLmRvbWFpbixhPW4rIi9zdWJzY3JpcHRpb24iLHM9bisiL2NoaWxkcmVuLyI7Ci8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKGNoaWxkcmVuKQpyLl9jYXRhbG9nLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKGUuYm9keS5zY2hlbWEpLnRoZW4oZnVuY3Rpb24odSl7dmFyIGM9dS5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllcyxmPWMuY2hpbGRyZW4/Yy5jaGlsZHJlbi5jb25zdGFudDpbXSxsPVtdO2wucHVzaChuKyIvY2hhbmdlcyIpLGYuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gbC5wdXNoKHMrZSl9KTsKLy9jaGlsZHJlbiBhZGRyZXNzZXMKLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gdGhlIG1zZy1ub2RlLCByZWdpc3RlcmluZyBsaXN0ZW5lcnMgb24gdGhlIGJyb2tlcgp2YXIgZD17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitvKyIvc20iLGJvZHk6e2lkZW50aXR5OmUuYm9keS5pZGVudGl0eSxyZXNvdXJjZXM6bCxzb3VyY2U6aX19OwovL3N1YnNjcmliZSBpbiBtc2ctbm9kZQpyLl9idXMucG9zdE1lc3NhZ2UoZCxmdW5jdGlvbihvKXtpZihTLmxvZygibm9kZS1zdWJzY3JpYmUtcmVzcG9uc2Uob2JzZXJ2ZXIpOiAiLG8pLDIwMD09PW8uYm9keS5jb2RlKXsKLy9GTE9XLU9VVDogcmVwbHkgd2l0aCBwcm92aXNpb25hbCByZXNwb25zZQpyLl9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzppLGJvZHk6e2NvZGU6MTAwLGNoaWxkcmVuUmVzb3VyY2VzOmYsc2NoZW1hOmUuYm9keS5zY2hlbWEscmVzb3VyY2U6ZS5ib2R5LnJlc291cmNlfX0pOwovL0ZMT1ctT1VUOiBzdWJzY3JpYmUgbWVzc2FnZSB0byByZW1vdGUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlU3Vic2NyaWJlCnZhciBzPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206ci5fdXJsLHRvOmEsYm9keTp7aWRlbnRpdHk6ZC5ib2R5LmlkZW50aXR5LHN1YnNjcmliZXI6aX19OwovL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIikmJihzLmJvZHkubXV0dWFsPWUuYm9keS5tdXR1YWwpLFMubG9nKCJbU3luY2hlck1hbmFnZXIuX25ld1N1YnNjcmlwdGlvbl0iLHMsZSksCi8vc3Vic2NyaWJlIHRvIHJlcG9ydGVyIFNNCnIuX2J1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKG8pe2lmKFMubG9nKCJyZXBvcnRlci1zdWJzY3JpYmUtcmVzcG9uc2UtbmV3OiAiLG8pLDIwMD09PW8uYm9keS5jb2RlKXtTLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdTdWJzY3JpcHRpb25dIC0gb2JzZXJ2ZXJzOiAiLHIuX29ic2VydmVycyxuLHIuX29ic2VydmVyc1tuXSk7dmFyIGE9ci5fb2JzZXJ2ZXJzW25dO2F8fChhPW5ldyB3LmRlZmF1bHQocixuLGYpLFMubG9nKCJbU3luY2hlck1hbmFnZXIuX25ld1N1YnNjcmlwdGlvbl0gLSBvYnNlcnZlcnM6IGNyZWF0ZSBuZXcgT2JzZXJ2ZXJPYmplY3Q6ICIsYSksci5fb2JzZXJ2ZXJzW25dPWEsCi8vIHJlZ2lzdGVyIG5ldyBoeXBlcnR5IHN1YnNjcmlwdGlvbgphLmFkZFN1YnNjcmlwdGlvbihpKSwKLy8gYWRkIGNoaWxkcmVucyBhbmQgbGlzdGVuZXJzIHRvIHNhdmUgZGF0YSBpZiBuZWNlc3NhcnkKYS5hZGRDaGlsZHJlbnMoZikpO3ZhciBzPSExLHU9dm9pZCAwO2UuYm9keS5oYXNPd25Qcm9wZXJ0eSgiaWRlbnRpdHkiKSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlJiZlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTD8odT1lLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCx1LmluY2x1ZGVzKCJ1c2VyOi8vIil8fChzPSEwKSk6cz0hMDt2YXIgYz0oMCxoLmRlZXBDbG9uZSkoby5ib2R5LnZhbHVlKTsKLy8gbGV0IGNoaWxkcmVuT2JqZWN0cyA9IG1ldGFkYXRhLmNoaWxkcmVuT2JqZWN0cyB8fCB7fTsKZGVsZXRlIGMuZGF0YSxkZWxldGUgYy5jaGlsZHJlbk9iamVjdHMsYy5jaGlsZHJlbnM9ZixjLnN1YnNjcmliZXJVc2VyPXUsYy5pc1JlcG9ydGVyPSExLGMuc3Vic2NyaWJlckh5cGVydHk9aSxzfHwoCi8vX3RoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5zZXQob2JqVVJMLCBmYWxzZSwgbXNnLmJvZHkuc2NoZW1hLCAnb24nLCByZXBseS5ib2R5Lm93bmVyLCBoeXBlcnR5VVJMLCBjaGlsZHJlbnMsIHVzZXJVUkwpOwpyLl9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2V0KGMpLChjLmhhc093blByb3BlcnR5KCJzdG9yZSIpJiZjLnN0b3JlfHxjLmhhc093blByb3BlcnR5KCJpc1RvU2F2ZURhdGEiKSYmYy5pc1RvU2F2ZURhdGEpJiYoYS5pc1RvU2F2ZURhdGE9ITAsci5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMSxuLCJpc1RvU2F2ZURhdGEiLCEwKSxyLl9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZURhdGEoITEsbixudWxsLG8uYm9keS52YWx1ZS5kYXRhKSkpLAovL2ZvcndhcmQgdG8gaHlwZXJ0eToKby5pZD1lLmlkLG8uZnJvbT1yLl91cmwsby50bz1pLG8uYm9keS5zY2hlbWE9ZS5ib2R5LnNjaGVtYSxvLmJvZHkucmVzb3VyY2U9ZS5ib2R5LnJlc291cmNlLAovL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIikmJihvLmJvZHkubXV0dWFsPWUuYm9keS5tdXR1YWwpLFMubG9nKCJbc3Vic2NyaWJlXSAtIG5ldyBzdWJzY3JpcHRpb246ICIsZSxvLGEpLHQuX2J1cy5wb3N0TWVzc2FnZShvKX19KX1lbHNlCi8vbGlzdGVuZXIgcmVqZWN0ZWQKci5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86aSxib2R5Om8uYm9keX0pfSl9KX19LHtrZXk6Il9yZXN1bWVTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihuKXt2YXIgaT10LnVybCxvPXQuc2NoZW1hLGE9ZS5mcm9tLHM9aSsiL2NoaWxkcmVuLyI7Uy5sb2coIltTeW5jaGVyTWFuYWdlciAtIFJldXNlU3Vic2NyaXB0aW9uXSAtIG9ialVSTDogIixpLCIgLSBzY2hlbWE6IixvKSwKLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoY2hpbGRyZW4pCi8vIFRPRE86IHJlbW92ZSB0aGlzIHNpbmNlIGNoaWxkcmVuIHJlc291cmNlcyBzaG91bGQgYmUgYXZhaWxhYmxlIGluIHRoZSBEYXRhT2JqZWN0c1N0b3JhZ2UKci5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihvKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciB1PW4uc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMsYz11LmNoaWxkcmVuP3UuY2hpbGRyZW4uY29uc3RhbnQ6W10sZj1bXTtmLnB1c2goaSsiL2NoYW5nZXMiKSxjLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGYucHVzaChzK2UpfSksCi8vRkxPVy1PVVQ6IHJlcGx5IHdpdGggcHJvdmlzaW9uYWwgcmVzcG9uc2UKci5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86YSxib2R5Ontjb2RlOjEwMCxjaGlsZHJlblJlc291cmNlczpjLHNjaGVtYTpvLHJlc291cmNlOml9fSk7Ci8vRkxPVy1PVVQ6IHN1YnNjcmliZSBtZXNzYWdlIHRvIHJlbW90ZSBSZXBvcnRlck9iamVjdCAtPiBfb25SZW1vdGVTdWJzY3JpYmUKLypsZXQgb2JqU3Vic2NyaWJlTXNnID0gewogICAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogdGhpcy5fdXJsLCB0bzogb2JqVVJMU3Vic2NyaXB0aW9uLAogICAgICAgICAgICBib2R5OiB7IHN1YnNjcmliZXI6IGh5cGVydHlVUkwsIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSB9CiAgICAgICAgICB9OwogICAgICAgICAgIC8vc3Vic2NyaWJlIHRvIHJlcG9ydGVyIFNNCiAgICAgICAgICB0aGlzLl9idXMucG9zdE1lc3NhZ2Uob2JqU3Vic2NyaWJlTXNnLCAocmVwbHkpID0+IHsqLwp2YXIgbD1yLl9vYnNlcnZlcnNbaV07Ci8vIE9iamVjdC5hc3NpZ24oc3RvcmVkT2JqZWN0LmRhdGEsIHJlcGx5LmJvZHkudmFsdWUuZGF0YSk7Ci8vIE9iamVjdC5hc3NpZ24oc3RvcmVkT2JqZWN0LmNoaWxkcmVucywgcmVwbHkuYm9keS52YWx1ZS5jaGlsZHJlbnMpOwovL2xvZy5sb2coJ1tzdWJzY3JpYmVdIC0gcmVzdW1lIHN1YnNjcmlwdGlvbjogJywgbXNnLCByZXBseSwgc3RvcmVkT2JqZWN0LCBvYnNlcnZlcik7Ci8vcmVnaXN0ZXIgbmV3IGh5cGVydHkgc3Vic2NyaXB0aW9uCnJldHVybiBsfHwobD1uZXcgdy5kZWZhdWx0KHIsaSxjKSxsLmlzVG9TYXZlRGF0YT10LmlzVG9TYXZlRGF0YSxyLl9vYnNlcnZlcnNbaV09bCksbC5hZGRTdWJzY3JpcHRpb24oYSksbC5hZGRDaGlsZHJlbnMoYyksci5fZGVjcnlwdENoaWxkcmVucyh0LGMpfSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIHByZXZpb3VzIHByb21pc2UnKTsKbihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe1MuZXJyb3IoIltTeW5jaGVyTWFuYWdlciAtIHJlc3VtZSBzdWJzY3JpcHRpb25dIC0gZmFpbCBvbiBnZXREYXRhU2NoZW1hRGVzY3JpcHRvcjogIixlKSxuKCExKX0pfSl9fSx7a2V5OiJfb25Mb2NhbFVuU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KGUuZnJvbSxlLmJvZHkucmVzb3VyY2UpLG49dC5fb2JzZXJ2ZXJzW3JdO24mJigKLy9UT0RPOiBpcyB0aGVyZSBhbnkgcG9saWN5IHZlcmlmaWNhdGlvbiBiZWZvcmUgZGVsZXRlPwpuLnJlbW92ZVN1YnNjcmlwdGlvbihlKSwKLy9UT0RPOiBkZXN0cm95IG9iamVjdCBpbiB0aGUgcmVnaXN0cnk/CnQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMH19KSx0aGlzLl9kYXRhT2JqZWN0c1N0b3JhZ2UuZGVsZXRlUmVzb3VyY2UociksCi8vVE9ETzogcmVtb3ZlIE9iamVjdCBpZiBubyBtb3JlIHN1YnNjcmlwdGlvbj8KZGVsZXRlIHQuX29ic2VydmVyc1tyXSl9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fV0pLFN5bmNoZXJNYW5hZ2VyfSgpO3QuZGVmYXVsdD1PLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ5NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0OTYpLGUuZXhwb3J0cz1yKDEzKS5PYmplY3QudmFsdWVzfSwvKiA0OTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtdmFsdWVzLWVudHJpZXMKdmFyIG49cigyNiksaT1yKDQ5NykoITEpO24obi5TLCJPYmplY3QiLHt2YWx1ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9fSl9LC8qIDQ5NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2NyksaT1yKDQ0KSxvPXIoNzcpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtmb3IodmFyIHIsYT1pKHQpLHM9bihhKSx1PXMubGVuZ3RoLGM9MCxmPVtdO3U+Yzspby5jYWxsKGEscj1zW2MrK10pJiZmLnB1c2goZT9bcixhW3JdXTphW3JdKTtyZXR1cm4gZn19fSwvKiA0OTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBzY2hlbWFWYWxpZGF0aW9uKGUsdCxyKXt0cnl7dmFyIG49cixpPXQuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlOwovLyBhZGQgc3VwcG9ydCBmb3Igc2NoZW1hIHJlZmVyZW5jaW5nIGl0c2VsZgpvLmRlZmF1bHQuYWRkU2NoZW1hKGkuaWQsaSk7Ci8vIHZhbGlkYXRlCnZhciBhPW8uZGVmYXVsdC52YWxpZGF0ZU11bHRpcGxlKG4saSk7Ci8vIGRlbGV0ZSBlcnJvciBzdGFja3MgdG8gaW1wcm92ZSBsb2dnaW5nCmEuZXJyb3JzLmZvckVhY2goZnVuY3Rpb24oZSl7ZGVsZXRlIGUuc3RhY2t9KSwhYS52YWxpZHx8YS5taXNzaW5nLmxlbmd0aH1jYXRjaChlKXt9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDQ2KTtfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pO3Quc2NoZW1hVmFsaWRhdGlvbj1zY2hlbWFWYWxpZGF0aW9uO3ZhciBpPXIoNDk5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSl9LC8qIDQ5OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIG5vdFJlYWxseVBlcmNlbnRFbmNvZGUoZSl7cmV0dXJuIGVuY29kZVVSSShlKS5yZXBsYWNlKC8lMjVbMC05XVswLTldL2csZnVuY3Rpb24oZSl7cmV0dXJuIiUiK2Uuc3Vic3RyaW5nKDMpfSl9ZnVuY3Rpb24gdXJpVGVtcGxhdGVTdWJzdGl0dXRpb24oZSl7dmFyIHQ9IiI7aFtlLmNoYXJBdCgwKV0mJih0PWUuY2hhckF0KDApLGU9ZS5zdWJzdHJpbmcoMSkpO3ZhciByPSIiLG49IiIsaT0hMCxvPSExLGE9ITE7IisiPT09dD9pPSExOiIuIj09PXQ/KG49Ii4iLHI9Ii4iKToiLyI9PT10PyhuPSIvIixyPSIvIik6IiMiPT09dD8obj0iIyIsaT0hMSk6IjsiPT09dD8obj0iOyIscj0iOyIsbz0hMCxhPSEwKToiPyI9PT10PyhuPSI/IixyPSImIixvPSEwKToiJiI9PT10JiYobj0iJiIscj0iJiIsbz0hMCk7Zm9yKHZhciBzPVtdLHU9ZS5zcGxpdCgiLCIpLGM9W10sZj17fSxsPTA7bDx1Lmxlbmd0aDtsKyspe3ZhciBwPXVbbF0sZz1udWxsO2lmKC0xIT09cC5pbmRleE9mKCI6Iikpe3ZhciBiPXAuc3BsaXQoIjoiKTtwPWJbMF0sZz1wYXJzZUludChiWzFdLDEwKX1mb3IodmFyIG09e307dltwLmNoYXJBdChwLmxlbmd0aC0xKV07KW1bcC5jaGFyQXQocC5sZW5ndGgtMSldPSEwLHA9cC5zdWJzdHJpbmcoMCxwLmxlbmd0aC0xKTt2YXIgXz17dHJ1bmNhdGU6ZyxuYW1lOnAsc3VmZmljZXM6bX07Yy5wdXNoKF8pLGZbcF09XyxzLnB1c2gocCl9dmFyIFI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PSIiLHM9MCx1PTA7dTxjLmxlbmd0aDt1Kyspe3ZhciBmPWNbdV0sbD1lKGYubmFtZSk7aWYobnVsbD09PWx8fHZvaWQgMD09PWx8fEFycmF5LmlzQXJyYXkobCkmJjA9PT1sLmxlbmd0aHx8Im9iamVjdCI9PT0odm9pZCAwPT09bD8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKGwpKSYmMD09PSgwLHkuZGVmYXVsdCkobCkubGVuZ3RoKXMrKztlbHNlIGlmKHQrPXU9PT1zP246cnx8IiwiLEFycmF5LmlzQXJyYXkobCkpe28mJih0Kz1mLm5hbWUrIj0iKTtmb3IodmFyIHA9MDtwPGwubGVuZ3RoO3ArKylwPjAmJih0Kz1mLnN1ZmZpY2VzWyIqIl0/cnx8IiwiOiIsIixmLnN1ZmZpY2VzWyIqIl0mJm8mJih0Kz1mLm5hbWUrIj0iKSksdCs9aT9lbmNvZGVVUklDb21wb25lbnQobFtwXSkucmVwbGFjZSgvIS9nLCIlMjEiKTpub3RSZWFsbHlQZXJjZW50RW5jb2RlKGxbcF0pfWVsc2UgaWYoIm9iamVjdCI9PT0odm9pZCAwPT09bD8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKGwpKSl7byYmIWYuc3VmZmljZXNbIioiXSYmKHQrPWYubmFtZSsiPSIpO3ZhciBoPSEwO2Zvcih2YXIgdiBpbiBsKWh8fCh0Kz1mLnN1ZmZpY2VzWyIqIl0/cnx8IiwiOiIsIiksaD0hMSx0Kz1pP2VuY29kZVVSSUNvbXBvbmVudCh2KS5yZXBsYWNlKC8hL2csIiUyMSIpOm5vdFJlYWxseVBlcmNlbnRFbmNvZGUodiksdCs9Zi5zdWZmaWNlc1siKiJdPyI9IjoiLCIsdCs9aT9lbmNvZGVVUklDb21wb25lbnQobFt2XSkucmVwbGFjZSgvIS9nLCIlMjEiKTpub3RSZWFsbHlQZXJjZW50RW5jb2RlKGxbdl0pfWVsc2UgbyYmKHQrPWYubmFtZSxhJiYiIj09PWx8fCh0Kz0iPSIpKSxudWxsIT1mLnRydW5jYXRlJiYobD1sLnN1YnN0cmluZygwLGYudHJ1bmNhdGUpKSx0Kz1pP2VuY29kZVVSSUNvbXBvbmVudChsKS5yZXBsYWNlKC8hL2csIiUyMSIpOm5vdFJlYWxseVBlcmNlbnRFbmNvZGUobCl9cmV0dXJuIHR9O3JldHVybiBSLnZhck5hbWVzPXMse3ByZWZpeDpuLHN1YnN0aXR1dGlvbjpSfX1mdW5jdGlvbiBVcmlUZW1wbGF0ZShlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBVcmlUZW1wbGF0ZSkpcmV0dXJuIG5ldyBVcmlUZW1wbGF0ZShlKTtmb3IodmFyIHQ9ZS5zcGxpdCgieyIpLHI9W3Quc2hpZnQoKV0sbj1bXSxpPVtdLG89W107dC5sZW5ndGg+MDspe3ZhciBhPXQuc2hpZnQoKSxzPWEuc3BsaXQoIn0iKVswXSx1PWEuc3Vic3RyaW5nKHMubGVuZ3RoKzEpLGM9dXJpVGVtcGxhdGVTdWJzdGl0dXRpb24ocyk7aS5wdXNoKGMuc3Vic3RpdHV0aW9uKSxuLnB1c2goYy5wcmVmaXgpLHIucHVzaCh1KSxvPW8uY29uY2F0KGMuc3Vic3RpdHV0aW9uLnZhck5hbWVzKX10aGlzLmZpbGw9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXJbMF0sbj0wO248aS5sZW5ndGg7bisrKXt0Kz0oMCxpW25dKShlKSx0Kz1yW24rMV19cmV0dXJuIHR9LHRoaXMudmFyTmFtZXM9byx0aGlzLnRlbXBsYXRlPWV9ZnVuY3Rpb24gcmVjdXJzaXZlQ29tcGFyZShlLHQpe2lmKGU9PT10KXJldHVybiEwO2lmKGUmJnQmJiJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShlKSkmJiJvYmplY3QiPT09KHZvaWQgMD09PXQ/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KSh0KSkpe2lmKEFycmF5LmlzQXJyYXkoZSkhPT1BcnJheS5pc0FycmF5KHQpKXJldHVybiExO2lmKEFycmF5LmlzQXJyYXkoZSkpe2lmKGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspaWYoIXJlY3Vyc2l2ZUNvbXBhcmUoZVtyXSx0W3JdKSlyZXR1cm4hMX1lbHNle3ZhciBuO2ZvcihuIGluIGUpaWYodm9pZCAwPT09dFtuXSYmdm9pZCAwIT09ZVtuXSlyZXR1cm4hMTtmb3IobiBpbiB0KWlmKHZvaWQgMD09PWVbbl0mJnZvaWQgMCE9PXRbbl0pcmV0dXJuITE7Zm9yKG4gaW4gZSlpZighcmVjdXJzaXZlQ29tcGFyZShlW25dLHRbbl0pKXJldHVybiExfXJldHVybiEwfXJldHVybiExfQovLyBwYXJzZVVSSSgpIGFuZCByZXNvbHZlVXJsKCkgYXJlIGZyb20gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vMTA4ODg1MAovLyAgIC0gIHJlbGVhc2VkIGFzIHB1YmxpYyBkb21haW4gYnkgYXV0aG9yICgiWWFmZmxlIikgLSBzZWUgY29tbWVudHMgb24gZ2lzdApmdW5jdGlvbiBwYXJzZVVSSShlKXt2YXIgdD1TdHJpbmcoZSkucmVwbGFjZSgvXlxzK3xccyskL2csIiIpLm1hdGNoKC9eKFteOlwvPyNdKzopPyhcL1wvKD86W146QF0qKD86OlteOkBdKik/QCk/KChbXjpcLz8jXSopKD86OihcZCopKT8pKT8oW14/I10qKShcP1teI10qKT8oI1tcc1xTXSopPy8pOwovLyBhdXRob3JpdHkgPSAnLy8nICsgdXNlciArICc6JyArIHBhc3MgJ0AnICsgaG9zdG5hbWUgKyAnOicgcG9ydApyZXR1cm4gdD97aHJlZjp0WzBdfHwiIixwcm90b2NvbDp0WzFdfHwiIixhdXRob3JpdHk6dFsyXXx8IiIsaG9zdDp0WzNdfHwiIixob3N0bmFtZTp0WzRdfHwiIixwb3J0OnRbNV18fCIiLHBhdGhuYW1lOnRbNl18fCIiLHNlYXJjaDp0WzddfHwiIixoYXNoOnRbOF18fCIifTpudWxsfWZ1bmN0aW9uIHJlc29sdmVVcmwoZSx0KXsKLy8gUkZDIDM5ODYKcmV0dXJuIHQ9cGFyc2VVUkkodHx8IiIpLGU9cGFyc2VVUkkoZXx8IiIpLHQmJmU/KHQucHJvdG9jb2x8fGUucHJvdG9jb2wpKyh0LnByb3RvY29sfHx0LmF1dGhvcml0eT90LmF1dGhvcml0eTplLmF1dGhvcml0eSkrZnVuY3Rpb24oZSl7dmFyIHQ9W107cmV0dXJuIGUucmVwbGFjZSgvXihcLlwuPyhcL3wkKSkrLywiIikucmVwbGFjZSgvXC8oXC4oXC98JCkpKy9nLCIvIikucmVwbGFjZSgvXC9cLlwuJC8sIi8uLi8iKS5yZXBsYWNlKC9cLz9bXlwvXSovZyxmdW5jdGlvbihlKXsiLy4uIj09PWU/dC5wb3AoKTp0LnB1c2goZSl9KSx0LmpvaW4oIiIpLnJlcGxhY2UoL15cLy8sIi8iPT09ZS5jaGFyQXQoMCk/Ii8iOiIiKX0odC5wcm90b2NvbHx8dC5hdXRob3JpdHl8fCIvIj09PXQucGF0aG5hbWUuY2hhckF0KDApP3QucGF0aG5hbWU6dC5wYXRobmFtZT8oZS5hdXRob3JpdHkmJiFlLnBhdGhuYW1lPyIvIjoiIikrZS5wYXRobmFtZS5zbGljZSgwLGUucGF0aG5hbWUubGFzdEluZGV4T2YoIi8iKSsxKSt0LnBhdGhuYW1lOmUucGF0aG5hbWUpKyh0LnByb3RvY29sfHx0LmF1dGhvcml0eXx8dC5wYXRobmFtZT90LnNlYXJjaDp0LnNlYXJjaHx8ZS5zZWFyY2gpK3QuaGFzaDpudWxsfWZ1bmN0aW9uIGdldERvY3VtZW50VXJpKGUpe3JldHVybiBlLnNwbGl0KCIjIilbMF19ZnVuY3Rpb24gbm9ybVNjaGVtYShlLHQpe2lmKGUmJiJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShlKSkpaWYodm9pZCAwPT09dD90PWUuaWQ6InN0cmluZyI9PXR5cGVvZiBlLmlkJiYodD1yZXNvbHZlVXJsKHQsZS5pZCksZS5pZD10KSxBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKW5vcm1TY2hlbWEoZVtyXSx0KTtlbHNleyJzdHJpbmciPT10eXBlb2YgZS4kcmVmJiYoZS4kcmVmPXJlc29sdmVVcmwodCxlLiRyZWYpKTtmb3IodmFyIG4gaW4gZSkiZW51bSIhPT1uJiZub3JtU2NoZW1hKGVbbl0sdCl9fWZ1bmN0aW9uIGRlZmF1bHRFcnJvclJlcG9ydGVyKGUpe2U9ZXx8ImVuIjt2YXIgdD1PW2VdO3JldHVybiBmdW5jdGlvbihlKXt2YXIgcj10W2UuY29kZV18fFNbZS5jb2RlXTtpZigic3RyaW5nIiE9dHlwZW9mIHIpcmV0dXJuIlVua25vd24gZXJyb3IgY29kZSAiK2UuY29kZSsiOiAiKygwLGkuZGVmYXVsdCkoZS5tZXNzYWdlUGFyYW1zKTt2YXIgbj1lLnBhcmFtczsKLy8gQWRhcHRlZCBmcm9tIENyb2NrZm9yZCdzIHN1cHBsYW50KCkKcmV0dXJuIHIucmVwbGFjZSgvXHsoW157fV0qKVx9L2csZnVuY3Rpb24oZSx0KXt2YXIgcj1uW3RdO3JldHVybiJzdHJpbmciPT10eXBlb2Ygcnx8Im51bWJlciI9PXR5cGVvZiByP3I6ZX0pfX1mdW5jdGlvbiBWYWxpZGF0aW9uRXJyb3IoZSx0LHIsbixpKXtpZihFcnJvci5jYWxsKHRoaXMpLHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKCJObyBlcnJvciBjb2RlIHN1cHBsaWVkOiAiK24pO3RoaXMubWVzc2FnZT0iIix0aGlzLnBhcmFtcz10LHRoaXMuY29kZT1lLHRoaXMuZGF0YVBhdGg9cnx8IiIsdGhpcy5zY2hlbWFQYXRoPW58fCIiLHRoaXMuc3ViRXJyb3JzPWl8fG51bGw7dmFyIG89bmV3IEVycm9yKHRoaXMubWVzc2FnZSk7aWYodGhpcy5zdGFjaz1vLnN0YWNrfHxvLnN0YWNrdHJhY2UsIXRoaXMuc3RhY2spdHJ5e3Rocm93IG99Y2F0Y2gobyl7dGhpcy5zdGFjaz1vLnN0YWNrfHxvLnN0YWNrdHJhY2V9fWZ1bmN0aW9uIGlzVHJ1c3RlZFVybChlLHQpe2lmKHQuc3Vic3RyaW5nKDAsZS5sZW5ndGgpPT09ZSl7dmFyIHI9dC5zdWJzdHJpbmcoZS5sZW5ndGgpO2lmKHQubGVuZ3RoPjAmJiIvIj09PXQuY2hhckF0KGUubGVuZ3RoLTEpfHwiIyI9PT1yLmNoYXJBdCgwKXx8Ij8iPT09ci5jaGFyQXQoMCkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gY3JlYXRlQXBpKGUpe3ZhciB0LHIsbj1uZXcgZyxpPXtzZXRFcnJvclJlcG9ydGVyOmZ1bmN0aW9uKGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgZT90aGlzLmxhbmd1YWdlKGUpOihyPWUsITApfSxhZGRGb3JtYXQ6ZnVuY3Rpb24oKXtuLmFkZEZvcm1hdC5hcHBseShuLGFyZ3VtZW50cyl9LGxhbmd1YWdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyhPW2VdfHwoZT1lLnNwbGl0KCItIilbMF0pLCEhT1tlXSYmKHQ9ZSxlKSk6dH0sYWRkTGFuZ3VhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgcjtmb3IociBpbiBfKXRbcl0mJiF0W19bcl1dJiYodFtfW3JdXT10W3JdKTt2YXIgbj1lLnNwbGl0KCItIilbMF07aWYoT1tuXSl7T1tlXT0oMCxmLmRlZmF1bHQpKE9bbl0pO2ZvcihyIGluIHQpdm9pZCAwPT09T1tuXVtyXSYmKE9bbl1bcl09dFtyXSksT1tlXVtyXT10W3JdfWVsc2UKLy8gdXNlIGZvciBiYXNlIGxhbmd1YWdlIGlmIG5vdCB5ZXQgZGVmaW5lZApPW2VdPXQsT1tuXT10O3JldHVybiB0aGlzfSxmcmVzaEFwaTpmdW5jdGlvbihlKXt2YXIgdD1jcmVhdGVBcGkoKTtyZXR1cm4gZSYmdC5sYW5ndWFnZShlKSx0fSx2YWxpZGF0ZTpmdW5jdGlvbihlLGksbyxhKXt2YXIgcz1kZWZhdWx0RXJyb3JSZXBvcnRlcih0KSx1PXI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByKGUsdCxuKXx8cyhlLHQsbil9OnMsYz1uZXcgZyhuLCExLHUsbyxhKTsic3RyaW5nIj09dHlwZW9mIGkmJihpPXskcmVmOml9KSxjLmFkZFNjaGVtYSgiIixpKTt2YXIgZj1jLnZhbGlkYXRlQWxsKGUsaSxudWxsLG51bGwsIiIpO3JldHVybiFmJiZhJiYoZj1jLmJhblVua25vd25Qcm9wZXJ0aWVzKGUsaSkpLHRoaXMuZXJyb3I9Zix0aGlzLm1pc3Npbmc9Yy5taXNzaW5nLHRoaXMudmFsaWQ9bnVsbD09PWYsdGhpcy52YWxpZH0sdmFsaWRhdGVSZXN1bHQ6ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gdGhpcy52YWxpZGF0ZS5hcHBseShlLGFyZ3VtZW50cyksZX0sdmFsaWRhdGVNdWx0aXBsZTpmdW5jdGlvbihlLGksbyxhKXt2YXIgcz1kZWZhdWx0RXJyb3JSZXBvcnRlcih0KSx1PXI/ZnVuY3Rpb24oZSx0LG4pe3JldHVybiByKGUsdCxuKXx8cyhlLHQsbil9OnMsYz1uZXcgZyhuLCEwLHUsbyxhKTsic3RyaW5nIj09dHlwZW9mIGkmJihpPXskcmVmOml9KSxjLmFkZFNjaGVtYSgiIixpKSxjLnZhbGlkYXRlQWxsKGUsaSxudWxsLG51bGwsIiIpLGEmJmMuYmFuVW5rbm93blByb3BlcnRpZXMoZSxpKTt2YXIgZj17fTtyZXR1cm4gZi5lcnJvcnM9Yy5lcnJvcnMsZi5taXNzaW5nPWMubWlzc2luZyxmLnZhbGlkPTA9PT1mLmVycm9ycy5sZW5ndGgsZn0sYWRkU2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIG4uYWRkU2NoZW1hLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0U2NoZW1hOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0U2NoZW1hTWFwOmZ1bmN0aW9uKCl7cmV0dXJuIG4uZ2V0U2NoZW1hTWFwLmFwcGx5KG4sYXJndW1lbnRzKX0sZ2V0U2NoZW1hVXJpczpmdW5jdGlvbigpe3JldHVybiBuLmdldFNjaGVtYVVyaXMuYXBwbHkobixhcmd1bWVudHMpfSxnZXRNaXNzaW5nVXJpczpmdW5jdGlvbigpe3JldHVybiBuLmdldE1pc3NpbmdVcmlzLmFwcGx5KG4sYXJndW1lbnRzKX0sZHJvcFNjaGVtYXM6ZnVuY3Rpb24oKXtuLmRyb3BTY2hlbWFzLmFwcGx5KG4sYXJndW1lbnRzKX0sZGVmaW5lS2V5d29yZDpmdW5jdGlvbigpe24uZGVmaW5lS2V5d29yZC5hcHBseShuLGFyZ3VtZW50cyl9LGRlZmluZUVycm9yOmZ1bmN0aW9uKGUsdCxyKXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCEvXltBLVpdKyhfW0EtWl0rKSokLy50ZXN0KGUpKXRocm93IG5ldyBFcnJvcigiQ29kZSBuYW1lIG11c3QgYmUgYSBzdHJpbmcgaW4gVVBQRVJfQ0FTRV9XSVRIX1VOREVSU0NPUkVTIik7aWYoIm51bWJlciIhPXR5cGVvZiB0fHx0JTEhPTB8fHQ8MWU0KXRocm93IG5ldyBFcnJvcigiQ29kZSBudW1iZXIgbXVzdCBiZSBhbiBpbnRlZ2VyID4gMTAwMDAiKTtpZih2b2lkIDAhPT1fW2VdKXRocm93IG5ldyBFcnJvcigiRXJyb3IgYWxyZWFkeSBkZWZpbmVkOiAiK2UrIiBhcyAiK19bZV0pO2lmKHZvaWQgMCE9PVJbdF0pdGhyb3cgbmV3IEVycm9yKCJFcnJvciBjb2RlIGFscmVhZHkgdXNlZDogIitSW3RdKyIgYXMgIit0KTtfW2VdPXQsUlt0XT1lLFNbZV09U1t0XT1yO2Zvcih2YXIgbiBpbiBPKXt2YXIgaT1PW25dO2lbZV0mJihpW3RdPWlbdF18fGlbZV0pfX0scmVzZXQ6ZnVuY3Rpb24oKXtuLnJlc2V0KCksdGhpcy5lcnJvcj1udWxsLHRoaXMubWlzc2luZz1bXSx0aGlzLnZhbGlkPSEwfSxtaXNzaW5nOltdLGVycm9yOm51bGwsdmFsaWQ6ITAsbm9ybVNjaGVtYTpub3JtU2NoZW1hLHJlc29sdmVVcmw6cmVzb2x2ZVVybCxnZXREb2N1bWVudFVyaTpnZXREb2N1bWVudFVyaSxlcnJvckNvZGVzOl99O3JldHVybiBpLmxhbmd1YWdlKGV8fCJlbiIpLGl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDYpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTk3KSxhPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobykscz1yKDUwMCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigxOTkpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoOTgpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNDUpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKTsvKgogQXV0aG9yOiBHZXJhaW50IEx1ZmYgYW5kIG90aGVycwogWWVhcjogMjAxMwoKIFRoaXMgY29kZSBpcyByZWxlYXNlZCBpbnRvIHRoZSAicHVibGljIGRvbWFpbiIgYnkgaXRzIGF1dGhvcihzKS4gIEFueWJvZHkgbWF5IHVzZSwgYWx0ZXIgYW5kIGRpc3RyaWJ1dGUgdGhlIGNvZGUgd2l0aG91dCByZXN0cmljdGlvbi4gIFRoZSBhdXRob3IgbWFrZXMgbm8gZ3VhcmFudGVlcywgYW5kIHRha2VzIG5vIGxpYWJpbGl0eSBvZiBhbnkga2luZCBmb3IgdXNlIG9mIHRoaXMgY29kZS4KCiBJZiB5b3UgZmluZCBhIGJ1ZyBvciBtYWtlIGFuIGltcHJvdmVtZW50LCBpdCB3b3VsZCBiZSBjb3VydGVvdXMgdG8gbGV0IHRoZSBhdXRob3Iga25vdywgYnV0IGl0IGlzIG5vdCBjb21wdWxzb3J5LgogKi8KLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2tleXM/cmVkaXJlY3Rsb2NhbGU9ZW4tVVMmcmVkaXJlY3RzbHVnPUphdmFTY3JpcHQlMkZSZWZlcmVuY2UlMkZHbG9iYWxfT2JqZWN0cyUyRk9iamVjdCUyRmtleXMKeS5kZWZhdWx0fHwoT2JqZWN0LmtleXM9ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LHQ9IXt0b1N0cmluZzpudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgidG9TdHJpbmciKSxyPVsidG9TdHJpbmciLCJ0b0xvY2FsZVN0cmluZyIsInZhbHVlT2YiLCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImNvbnN0cnVjdG9yIl0sbj1yLmxlbmd0aDtyZXR1cm4gZnVuY3Rpb24oaSl7aWYoIm9iamVjdCIhPT0odm9pZCAwPT09aT8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKGkpKSYmImZ1bmN0aW9uIiE9dHlwZW9mIGl8fG51bGw9PT1pKXRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5rZXlzIGNhbGxlZCBvbiBub24tb2JqZWN0Iik7dmFyIG89W107Zm9yKHZhciBhIGluIGkpZS5jYWxsKGksYSkmJm8ucHVzaChhKTtpZih0KWZvcih2YXIgcz0wO3M8bjtzKyspZS5jYWxsKGkscltzXSkmJm8ucHVzaChyW3NdKTtyZXR1cm4gb319KCkpLAovLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvY3JlYXRlCmYuZGVmYXVsdHx8KE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBGKCl7fXJldHVybiBmdW5jdGlvbihlKXtpZigxIT09YXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIk9iamVjdC5jcmVhdGUgaW1wbGVtZW50YXRpb24gb25seSBhY2NlcHRzIG9uZSBwYXJhbWV0ZXIuIik7cmV0dXJuIEYucHJvdG90eXBlPWUsbmV3IEZ9fSgpKSwKLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaXNBcnJheT9yZWRpcmVjdGxvY2FsZT1lbi1VUyZyZWRpcmVjdHNsdWc9SmF2YVNjcmlwdCUyRlJlZmVyZW5jZSUyRkdsb2JhbF9PYmplY3RzJTJGQXJyYXklMkZpc0FycmF5CkFycmF5LmlzQXJyYXl8fChBcnJheS5pc0FycmF5PWZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9KSwKLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvaW5kZXhPZj9yZWRpcmVjdGxvY2FsZT1lbi1VUyZyZWRpcmVjdHNsdWc9SmF2YVNjcmlwdCUyRlJlZmVyZW5jZSUyRkdsb2JhbF9PYmplY3RzJTJGQXJyYXklMkZpbmRleE9mCkFycmF5LnByb3RvdHlwZS5pbmRleE9mfHwoQXJyYXkucHJvdG90eXBlLmluZGV4T2Y9ZnVuY3Rpb24oZSl7aWYobnVsbD09PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgdD1PYmplY3QodGhpcykscj10Lmxlbmd0aD4+PjA7aWYoMD09PXIpcmV0dXJuLTE7dmFyIG49MDtpZihhcmd1bWVudHMubGVuZ3RoPjEmJihuPU51bWJlcihhcmd1bWVudHNbMV0pLG4hPT1uPwovLyBzaG9ydGN1dCBmb3IgdmVyaWZ5aW5nIGlmIGl0J3MgTmFOCm49MDowIT09biYmbiE9PTEvMCYmbiE9PS0xLzAmJihuPShuPjB8fC0xKSpNYXRoLmZsb29yKE1hdGguYWJzKG4pKSkpLG4+PXIpcmV0dXJuLTE7Zm9yKHZhciBpPW4+PTA/bjpNYXRoLm1heChyLU1hdGguYWJzKG4pLDApO2k8cjtpKyspaWYoaSBpbiB0JiZ0W2ldPT09ZSlyZXR1cm4gaTtyZXR1cm4tMX0pLAovLyBHcnVuZ2V5IE9iamVjdC5pc0Zyb3plbiBoYWNrCnUuZGVmYXVsdHx8KE9iamVjdC5pc0Zyb3plbj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9InR2NF90ZXN0X2Zyb3plbl9rZXkiO2UuaGFzT3duUHJvcGVydHkodCk7KXQrPU1hdGgucmFuZG9tKCk7dHJ5e3JldHVybiBlW3RdPSEwLGRlbGV0ZSBlW3RdLCExfWNhdGNoKGUpe3JldHVybiEwfX0pOwovLyBCYXNlZCBvbjogaHR0cHM6Ly9naXRodWIuY29tL2dlcmFpbnRsdWZmL3VyaS10ZW1wbGF0ZXMsIGJ1dCB3aXRoIGFsbCB0aGUgZGUtc3Vic3RpdHV0aW9uIHN0dWZmIHJlbW92ZWQKdmFyIGg9eyIrIjohMCwiIyI6ITAsIi4iOiEwLCIvIjohMCwiOyI6ITAsIj8iOiEwLCImIjohMH0sdj17IioiOiEwfTtVcmlUZW1wbGF0ZS5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGVtcGxhdGV9LGZpbGxGcm9tT2JqZWN0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmZpbGwoZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19KX19O3ZhciBnPWZ1bmN0aW9uKGUsdCxyLG4saSl7aWYodGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmZvcm1hdFZhbGlkYXRvcnM9ZT8oMCxmLmRlZmF1bHQpKGUuZm9ybWF0VmFsaWRhdG9ycyk6e30sdGhpcy5zY2hlbWFzPWU/KDAsZi5kZWZhdWx0KShlLnNjaGVtYXMpOnt9LHRoaXMuY29sbGVjdE11bHRpcGxlPXQsdGhpcy5lcnJvcnM9W10sdGhpcy5oYW5kbGVFcnJvcj10P3RoaXMuY29sbGVjdEVycm9yOnRoaXMucmV0dXJuRXJyb3IsbiYmKHRoaXMuY2hlY2tSZWN1cnNpdmU9ITAsdGhpcy5zY2FubmVkPVtdLHRoaXMuc2Nhbm5lZEZyb3plbj1bXSx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzPVtdLHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnM9W10sdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5PSJ0djRfdmFsaWRhdGlvbl9pZCIsdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5PSJ0djRfdmFsaWRhdGlvbl9lcnJvcnNfaWQiKSxpJiYodGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzPSEwLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMudW5rbm93blByb3BlcnR5UGF0aHM9e30pLHRoaXMuZXJyb3JSZXBvcnRlcj1yfHxkZWZhdWx0RXJyb3JSZXBvcnRlcigiZW4iKSwic3RyaW5nIj09dHlwZW9mIHRoaXMuZXJyb3JSZXBvcnRlcil0aHJvdyBuZXcgRXJyb3IoImRlYnVnIik7aWYodGhpcy5kZWZpbmVkS2V5d29yZHM9e30sZSlmb3IodmFyIG8gaW4gZS5kZWZpbmVkS2V5d29yZHMpdGhpcy5kZWZpbmVkS2V5d29yZHNbb109ZS5kZWZpbmVkS2V5d29yZHNbb10uc2xpY2UoMCl9O2cucHJvdG90eXBlLmRlZmluZUtleXdvcmQ9ZnVuY3Rpb24oZSx0KXt0aGlzLmRlZmluZWRLZXl3b3Jkc1tlXT10aGlzLmRlZmluZWRLZXl3b3Jkc1tlXXx8W10sdGhpcy5kZWZpbmVkS2V5d29yZHNbZV0ucHVzaCh0KX0sZy5wcm90b3R5cGUuY3JlYXRlRXJyb3I9ZnVuY3Rpb24oZSx0LHIsbixpLG8sYSl7dmFyIHM9bmV3IFZhbGlkYXRpb25FcnJvcihlLHQscixuLGkpO3JldHVybiBzLm1lc3NhZ2U9dGhpcy5lcnJvclJlcG9ydGVyKHMsbyxhKSxzfSxnLnByb3RvdHlwZS5yZXR1cm5FcnJvcj1mdW5jdGlvbihlKXtyZXR1cm4gZX0sZy5wcm90b3R5cGUuY29sbGVjdEVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZ0aGlzLmVycm9ycy5wdXNoKGUpLG51bGx9LGcucHJvdG90eXBlLnByZWZpeEVycm9ycz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPWU7bjx0aGlzLmVycm9ycy5sZW5ndGg7bisrKXRoaXMuZXJyb3JzW25dPXRoaXMuZXJyb3JzW25dLnByZWZpeFdpdGgodCxyKTtyZXR1cm4gdGhpc30sZy5wcm90b3R5cGUuYmFuVW5rbm93blByb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocyl7dmFyIG49dGhpcy5jcmVhdGVFcnJvcihfLlVOS05PV05fUFJPUEVSVFkse3BhdGg6cn0sciwiIixudWxsLGUsdCksaT10aGlzLmhhbmRsZUVycm9yKG4pO2lmKGkpcmV0dXJuIGl9cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLmFkZEZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT09KHZvaWQgMD09PWU/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShlKSkpe2Zvcih2YXIgciBpbiBlKXRoaXMuYWRkRm9ybWF0KHIsZVtyXSk7cmV0dXJuIHRoaXN9dGhpcy5mb3JtYXRWYWxpZGF0b3JzW2VdPXR9LGcucHJvdG90eXBlLnJlc29sdmVSZWZzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09ZS4kcmVmKXtpZih0PXR8fHt9LHRbZS4kcmVmXSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLkNJUkNVTEFSX1JFRkVSRU5DRSx7dXJsczooMCx5LmRlZmF1bHQpKHQpLmpvaW4oIiwgIil9LCIiLCIiLG51bGwsdm9pZCAwLGUpO3RbZS4kcmVmXT0hMCxlPXRoaXMuZ2V0U2NoZW1hKGUuJHJlZix0KX1yZXR1cm4gZX0sZy5wcm90b3R5cGUuZ2V0U2NoZW1hPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYodm9pZCAwIT09dGhpcy5zY2hlbWFzW2VdKXJldHVybiByPXRoaXMuc2NoZW1hc1tlXSx0aGlzLnJlc29sdmVSZWZzKHIsdCk7dmFyIG49ZSxpPSIiO2lmKC0xIT09ZS5pbmRleE9mKCIjIikmJihpPWUuc3Vic3RyaW5nKGUuaW5kZXhPZigiIyIpKzEpLG49ZS5zdWJzdHJpbmcoMCxlLmluZGV4T2YoIiMiKSkpLCJvYmplY3QiPT09KDAsZC5kZWZhdWx0KSh0aGlzLnNjaGVtYXNbbl0pKXtyPXRoaXMuc2NoZW1hc1tuXTt2YXIgbz1kZWNvZGVVUklDb21wb25lbnQoaSk7aWYoIiI9PT1vKXJldHVybiB0aGlzLnJlc29sdmVSZWZzKHIsdCk7aWYoIi8iIT09by5jaGFyQXQoMCkpcmV0dXJuO2Zvcih2YXIgYT1vLnNwbGl0KCIvIikuc2xpY2UoMSkscz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgdT1hW3NdLnJlcGxhY2UoL34xL2csIi8iKS5yZXBsYWNlKC9+MC9nLCJ+Iik7aWYodm9pZCAwPT09clt1XSl7cj12b2lkIDA7YnJlYWt9cj1yW3VdfWlmKHZvaWQgMCE9PXIpcmV0dXJuIHRoaXMucmVzb2x2ZVJlZnMocix0KX12b2lkIDA9PT10aGlzLm1pc3Npbmdbbl0mJih0aGlzLm1pc3NpbmcucHVzaChuKSx0aGlzLm1pc3Npbmdbbl09bix0aGlzLm1pc3NpbmdNYXBbbl09bil9LGcucHJvdG90eXBlLnNlYXJjaFNjaGVtYXM9ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKXRoaXMuc2VhcmNoU2NoZW1hcyhlW3JdLHQpO2Vsc2UgaWYoZSYmIm9iamVjdCI9PT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKGUpKSl7InN0cmluZyI9PXR5cGVvZiBlLmlkJiZpc1RydXN0ZWRVcmwodCxlLmlkKSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2UuaWRdJiYodGhpcy5zY2hlbWFzW2UuaWRdPWUpO2Zvcih2YXIgbiBpbiBlKWlmKCJlbnVtIiE9PW4paWYoIm9iamVjdCI9PT0oMCxkLmRlZmF1bHQpKGVbbl0pKXRoaXMuc2VhcmNoU2NoZW1hcyhlW25dLHQpO2Vsc2UgaWYoIiRyZWYiPT09bil7dmFyIGk9Z2V0RG9jdW1lbnRVcmkoZVtuXSk7aSYmdm9pZCAwPT09dGhpcy5zY2hlbWFzW2ldJiZ2b2lkIDA9PT10aGlzLm1pc3NpbmdNYXBbaV0mJih0aGlzLm1pc3NpbmdNYXBbaV09aSl9fX0sZy5wcm90b3R5cGUuYWRkU2NoZW1hPWZ1bmN0aW9uKGUsdCl7Ci8vb3ZlcmxvYWQKaWYoInN0cmluZyIhPXR5cGVvZiBlfHx2b2lkIDA9PT10KXtpZigib2JqZWN0IiE9PSh2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkoZSkpfHwic3RyaW5nIiE9dHlwZW9mIGUuaWQpcmV0dXJuO3Q9ZSxlPXQuaWR9ZT09PWdldERvY3VtZW50VXJpKGUpKyIjIiYmKAovLyBSZW1vdmUgZW1wdHkgZnJhZ21lbnQKZT1nZXREb2N1bWVudFVyaShlKSksdGhpcy5zY2hlbWFzW2VdPXQsZGVsZXRlIHRoaXMubWlzc2luZ01hcFtlXSxub3JtU2NoZW1hKHQsZSksdGhpcy5zZWFyY2hTY2hlbWFzKHQsZSl9LGcucHJvdG90eXBlLmdldFNjaGVtYU1hcD1mdW5jdGlvbigpe3ZhciBlPXt9O2Zvcih2YXIgdCBpbiB0aGlzLnNjaGVtYXMpZVt0XT10aGlzLnNjaGVtYXNbdF07cmV0dXJuIGV9LGcucHJvdG90eXBlLmdldFNjaGVtYVVyaXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIHRoaXMuc2NoZW1hcyllJiYhZS50ZXN0KHIpfHx0LnB1c2gocik7cmV0dXJuIHR9LGcucHJvdG90eXBlLmdldE1pc3NpbmdVcmlzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgciBpbiB0aGlzLm1pc3NpbmdNYXApZSYmIWUudGVzdChyKXx8dC5wdXNoKHIpO3JldHVybiB0fSxnLnByb3RvdHlwZS5kcm9wU2NoZW1hcz1mdW5jdGlvbigpe3RoaXMuc2NoZW1hcz17fSx0aGlzLnJlc2V0KCl9LGcucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5taXNzaW5nPVtdLHRoaXMubWlzc2luZ01hcD17fSx0aGlzLmVycm9ycz1bXX0sZy5wcm90b3R5cGUudmFsaWRhdGVBbGw9ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgbztpZighKHQ9dGhpcy5yZXNvbHZlUmVmcyh0KSkpcmV0dXJuIG51bGw7aWYodCBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcilyZXR1cm4gdGhpcy5lcnJvcnMucHVzaCh0KSx0O3ZhciBzLGM9dGhpcy5lcnJvcnMubGVuZ3RoLGY9bnVsbCxsPW51bGw7aWYodGhpcy5jaGVja1JlY3Vyc2l2ZSYmZSYmIm9iamVjdCI9PT0odm9pZCAwPT09ZT8idW5kZWZpbmVkIjooMCxkLmRlZmF1bHQpKGUpKSl7aWYobz0hdGhpcy5zY2FubmVkLmxlbmd0aCxlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pe3ZhciBwPWVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XS5pbmRleE9mKHQpO2lmKC0xIT09cClyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtwXSksbnVsbH1pZigoMCx1LmRlZmF1bHQpKGUpJiYtMSE9PShzPXRoaXMuc2Nhbm5lZEZyb3plbi5pbmRleE9mKGUpKSl7dmFyIHk9dGhpcy5zY2FubmVkRnJvemVuU2NoZW1hc1tzXS5pbmRleE9mKHQpO2lmKC0xIT09eSlyZXR1cm4gdGhpcy5lcnJvcnM9dGhpcy5lcnJvcnMuY29uY2F0KHRoaXMuc2Nhbm5lZEZyb3plblZhbGlkYXRpb25FcnJvcnNbc11beV0pLG51bGx9aWYodGhpcy5zY2FubmVkLnB1c2goZSksKDAsdS5kZWZhdWx0KShlKSktMT09PXMmJihzPXRoaXMuc2Nhbm5lZEZyb3plbi5sZW5ndGgsdGhpcy5zY2FubmVkRnJvemVuLnB1c2goZSksdGhpcy5zY2FubmVkRnJvemVuU2NoZW1hcy5wdXNoKFtdKSksZj10aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW3NdLmxlbmd0aCx0aGlzLnNjYW5uZWRGcm96ZW5TY2hlbWFzW3NdW2ZdPXQsdGhpcy5zY2FubmVkRnJvemVuVmFsaWRhdGlvbkVycm9yc1tzXVtmXT1bXTtlbHNle2lmKCFlW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0pdHJ5eygwLGEuZGVmYXVsdCkoZSx0aGlzLnZhbGlkYXRlZFNjaGVtYXNLZXkse3ZhbHVlOltdLGNvbmZpZ3VyYWJsZTohMH0pLCgwLGEuZGVmYXVsdCkoZSx0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXkse3ZhbHVlOltdLGNvbmZpZ3VyYWJsZTohMH0pfWNhdGNoKHQpewovL0lFIDcvOCB3b3JrYXJvdW5kCmVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XT1bXSxlW3RoaXMudmFsaWRhdGlvbkVycm9yc0tleV09W119bD1lW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV0ubGVuZ3RoLGVbdGhpcy52YWxpZGF0ZWRTY2hlbWFzS2V5XVtsXT10LGVbdGhpcy52YWxpZGF0aW9uRXJyb3JzS2V5XVtsXT1bXX19dmFyIGg9dGhpcy5lcnJvcnMubGVuZ3RoLHY9dGhpcy52YWxpZGF0ZUJhc2ljKGUsdCxpKXx8dGhpcy52YWxpZGF0ZU51bWVyaWMoZSx0LGkpfHx0aGlzLnZhbGlkYXRlU3RyaW5nKGUsdCxpKXx8dGhpcy52YWxpZGF0ZUFycmF5KGUsdCxpKXx8dGhpcy52YWxpZGF0ZU9iamVjdChlLHQsaSl8fHRoaXMudmFsaWRhdGVDb21iaW5hdGlvbnMoZSx0LGkpfHx0aGlzLnZhbGlkYXRlSHlwZXJtZWRpYShlLHQsaSl8fHRoaXMudmFsaWRhdGVGb3JtYXQoZSx0LGkpfHx0aGlzLnZhbGlkYXRlRGVmaW5lZEtleXdvcmRzKGUsdCxpKXx8bnVsbDtpZihvKXtmb3IoO3RoaXMuc2Nhbm5lZC5sZW5ndGg7KXtkZWxldGUgdGhpcy5zY2FubmVkLnBvcCgpW3RoaXMudmFsaWRhdGVkU2NoZW1hc0tleV19dGhpcy5zY2FubmVkRnJvemVuPVtdLHRoaXMuc2Nhbm5lZEZyb3plblNjaGVtYXM9W119aWYodnx8aCE9PXRoaXMuZXJyb3JzLmxlbmd0aClmb3IoO3ImJnIubGVuZ3RofHxuJiZuLmxlbmd0aDspe3ZhciBnPXImJnIubGVuZ3RoPyIiK3IucG9wKCk6bnVsbCxiPW4mJm4ubGVuZ3RoPyIiK24ucG9wKCk6bnVsbDt2JiYodj12LnByZWZpeFdpdGgoZyxiKSksdGhpcy5wcmVmaXhFcnJvcnMoaCxnLGIpfXJldHVybiBudWxsIT09Zj90aGlzLnNjYW5uZWRGcm96ZW5WYWxpZGF0aW9uRXJyb3JzW3NdW2ZdPXRoaXMuZXJyb3JzLnNsaWNlKGMpOm51bGwhPT1sJiYoZVt0aGlzLnZhbGlkYXRpb25FcnJvcnNLZXldW2xdPXRoaXMuZXJyb3JzLnNsaWNlKGMpKSx0aGlzLmhhbmRsZUVycm9yKHYpfSxnLnByb3RvdHlwZS52YWxpZGF0ZUZvcm1hdD1mdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdC5mb3JtYXR8fCF0aGlzLmZvcm1hdFZhbGlkYXRvcnNbdC5mb3JtYXRdKXJldHVybiBudWxsO3ZhciByPXRoaXMuZm9ybWF0VmFsaWRhdG9yc1t0LmZvcm1hdF0uY2FsbChudWxsLGUsdCk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiByfHwibnVtYmVyIj09dHlwZW9mIHI/dGhpcy5jcmVhdGVFcnJvcihfLkZPUk1BVF9DVVNUT00se21lc3NhZ2U6cn0sIiIsIi9mb3JtYXQiLG51bGwsZSx0KTpyJiYib2JqZWN0Ij09PSh2b2lkIDA9PT1yPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkocikpP3RoaXMuY3JlYXRlRXJyb3IoXy5GT1JNQVRfQ1VTVE9NLHttZXNzYWdlOnIubWVzc2FnZXx8Ij8ifSxyLmRhdGFQYXRofHwiIixyLnNjaGVtYVBhdGh8fCIvZm9ybWF0IixudWxsLGUsdCk6bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVEZWZpbmVkS2V5d29yZHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbiBpbiB0aGlzLmRlZmluZWRLZXl3b3JkcylpZih2b2lkIDAhPT10W25dKWZvcih2YXIgaT10aGlzLmRlZmluZWRLZXl3b3Jkc1tuXSxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciBhPWlbb10scz1hKGUsdFtuXSx0LHIpO2lmKCJzdHJpbmciPT10eXBlb2Ygc3x8Im51bWJlciI9PXR5cGVvZiBzKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uS0VZV09SRF9DVVNUT00se2tleTpuLG1lc3NhZ2U6c30sIiIsIiIsbnVsbCxlLHQpLnByZWZpeFdpdGgobnVsbCxuKTtpZihzJiYib2JqZWN0Ij09PSh2b2lkIDA9PT1zPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkocykpKXt2YXIgdT1zLmNvZGU7aWYoInN0cmluZyI9PXR5cGVvZiB1KXtpZighX1t1XSl0aHJvdyBuZXcgRXJyb3IoIlVuZGVmaW5lZCBlcnJvciBjb2RlICh1c2UgZGVmaW5lRXJyb3IpOiAiK3UpO3U9X1t1XX1lbHNlIm51bWJlciIhPXR5cGVvZiB1JiYodT1fLktFWVdPUkRfQ1VTVE9NKTt2YXIgYz0ib2JqZWN0Ij09PSgwLGQuZGVmYXVsdCkocy5tZXNzYWdlKT9zLm1lc3NhZ2U6e2tleTpuLG1lc3NhZ2U6cy5tZXNzYWdlfHwiPyJ9LGY9cy5zY2hlbWFQYXRofHwiLyIrbi5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKTtyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcih1LGMscy5kYXRhUGF0aHx8bnVsbCxmLG51bGwsZSx0KX19cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlQmFzaWM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuO3JldHVybihuPXRoaXMudmFsaWRhdGVUeXBlKGUsdCxyKSk/bi5wcmVmaXhXaXRoKG51bGwsInR5cGUiKToobj10aGlzLnZhbGlkYXRlRW51bShlLHQscikpP24ucHJlZml4V2l0aChudWxsLCJ0eXBlIik6bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVUeXBlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dC50eXBlKXJldHVybiBudWxsO3ZhciByPXZvaWQgMD09PWU/InVuZGVmaW5lZCI6KDAsZC5kZWZhdWx0KShlKTtudWxsPT09ZT9yPSJudWxsIjpBcnJheS5pc0FycmF5KGUpJiYocj0iYXJyYXkiKTt2YXIgbj10LnR5cGU7QXJyYXkuaXNBcnJheShuKXx8KG49W25dKTtmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIG89bltpXTtpZihvPT09cnx8ImludGVnZXIiPT09byYmIm51bWJlciI9PT1yJiZlJTE9PTApcmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5JTlZBTElEX1RZUEUse3R5cGU6cixleHBlY3RlZDpuLmpvaW4oIi8iKX0sIiIsIiIsbnVsbCxlLHQpfSxnLnByb3RvdHlwZS52YWxpZGF0ZUVudW09ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10LmVudW0pcmV0dXJuIG51bGw7Zm9yKHZhciByPTA7cjx0LmVudW0ubGVuZ3RoO3IrKyl7aWYocmVjdXJzaXZlQ29tcGFyZShlLHQuZW51bVtyXSkpcmV0dXJuIG51bGx9cmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5FTlVNX01JU01BVENILHt2YWx1ZToidW5kZWZpbmVkIiE9dHlwZW9mIEpTT04/KDAsaS5kZWZhdWx0KShlKTplfSwiIiwiIixudWxsLGUsdCl9LGcucHJvdG90eXBlLnZhbGlkYXRlTnVtZXJpYz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMudmFsaWRhdGVNdWx0aXBsZU9mKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU1pbk1heChlLHQscil8fHRoaXMudmFsaWRhdGVOYU4oZSx0LHIpfHxudWxsfTt2YXIgYj1NYXRoLnBvdygyLC01MSksbT0xLWI7Zy5wcm90b3R5cGUudmFsaWRhdGVNdWx0aXBsZU9mPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5tdWx0aXBsZU9mfHx0LmRpdmlzaWJsZUJ5O2lmKHZvaWQgMD09PXIpcmV0dXJuIG51bGw7aWYoIm51bWJlciI9PXR5cGVvZiBlKXt2YXIgbj1lL3IlMTtpZihuPj1iJiZuPG0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5OVU1CRVJfTVVMVElQTEVfT0Yse3ZhbHVlOmUsbXVsdGlwbGVPZjpyfSwiIiwiIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlTWluTWF4PWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciIhPXR5cGVvZiBlKXJldHVybiBudWxsO2lmKHZvaWQgMCE9PXQubWluaW11bSl7aWYoZTx0Lm1pbmltdW0pcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3IoXy5OVU1CRVJfTUlOSU1VTSx7dmFsdWU6ZSxtaW5pbXVtOnQubWluaW11bX0sIiIsIi9taW5pbXVtIixudWxsLGUsdCk7aWYodC5leGNsdXNpdmVNaW5pbXVtJiZlPT09dC5taW5pbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uTlVNQkVSX01JTklNVU1fRVhDTFVTSVZFLHt2YWx1ZTplLG1pbmltdW06dC5taW5pbXVtfSwiIiwiL2V4Y2x1c2l2ZU1pbmltdW0iLG51bGwsZSx0KX1pZih2b2lkIDAhPT10Lm1heGltdW0pe2lmKGU+dC5tYXhpbXVtKXJldHVybiB0aGlzLmNyZWF0ZUVycm9yKF8uTlVNQkVSX01BWElNVU0se3ZhbHVlOmUsbWF4aW11bTp0Lm1heGltdW19LCIiLCIvbWF4aW11bSIsbnVsbCxlLHQpO2lmKHQuZXhjbHVzaXZlTWF4aW11bSYmZT09PXQubWF4aW11bSlyZXR1cm4gdGhpcy5jcmVhdGVFcnJvcihfLk5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRSx7dmFsdWU6ZSxtYXhpbXVtOnQubWF4aW11bX0sIiIsIi9leGNsdXNpdmVNYXhpbXVtIixudWxsLGUsdCl9cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlTmFOPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIm51bWJlciIhPXR5cGVvZiBlP251bGw6ITA9PT1pc05hTihlKXx8ZT09PTEvMHx8ZT09PS0xLzA/dGhpcy5jcmVhdGVFcnJvcihfLk5VTUJFUl9OT1RfQV9OVU1CRVIse3ZhbHVlOmV9LCIiLCIvdHlwZSIsbnVsbCxlLHQpOm51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlU3RyaW5nPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy52YWxpZGF0ZVN0cmluZ0xlbmd0aChlLHQscil8fHRoaXMudmFsaWRhdGVTdHJpbmdQYXR0ZXJuKGUsdCxyKXx8bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVTdHJpbmdMZW5ndGg9ZnVuY3Rpb24oZSx0KXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGU/bnVsbDp2b2lkIDAhPT10Lm1pbkxlbmd0aCYmZS5sZW5ndGg8dC5taW5MZW5ndGg/dGhpcy5jcmVhdGVFcnJvcihfLlNUUklOR19MRU5HVEhfU0hPUlQse2xlbmd0aDplLmxlbmd0aCxtaW5pbXVtOnQubWluTGVuZ3RofSwiIiwiL21pbkxlbmd0aCIsbnVsbCxlLHQpOnZvaWQgMCE9PXQubWF4TGVuZ3RoJiZlLmxlbmd0aD50Lm1heExlbmd0aD90aGlzLmNyZWF0ZUVycm9yKF8uU1RSSU5HX0xFTkdUSF9MT05HLHtsZW5ndGg6ZS5sZW5ndGgsbWF4aW11bTp0Lm1heExlbmd0aH0sIiIsIi9tYXhMZW5ndGgiLG51bGwsZSx0KTpudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZVN0cmluZ1BhdHRlcm49ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIGV8fCJzdHJpbmciIT10eXBlb2YgdC5wYXR0ZXJuJiYhKHQucGF0dGVybiBpbnN0YW5jZW9mIFJlZ0V4cCkpcmV0dXJuIG51bGw7dmFyIHI7aWYodC5wYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwKXI9dC5wYXR0ZXJuO2Vsc2V7dmFyIG4saT0iIixvPXQucGF0dGVybi5tYXRjaCgvXlwvKC4rKVwvKFtpbWddKikkLyk7bz8obj1vWzFdLGk9b1syXSk6bj10LnBhdHRlcm4scj1uZXcgUmVnRXhwKG4saSl9cmV0dXJuIHIudGVzdChlKT9udWxsOnRoaXMuY3JlYXRlRXJyb3IoXy5TVFJJTkdfUEFUVEVSTix7cGF0dGVybjp0LnBhdHRlcm59LCIiLCIvcGF0dGVybiIsbnVsbCxlLHQpfSxnLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT90aGlzLnZhbGlkYXRlQXJyYXlMZW5ndGgoZSx0LHIpfHx0aGlzLnZhbGlkYXRlQXJyYXlVbmlxdWVJdGVtcyhlLHQscil8fHRoaXMudmFsaWRhdGVBcnJheUl0ZW1zKGUsdCxyKXx8bnVsbDpudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5TGVuZ3RoPWZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIHZvaWQgMCE9PXQubWluSXRlbXMmJmUubGVuZ3RoPHQubWluSXRlbXMmJihyPXRoaXMuY3JlYXRlRXJyb3IoXy5BUlJBWV9MRU5HVEhfU0hPUlQse2xlbmd0aDplLmxlbmd0aCxtaW5pbXVtOnQubWluSXRlbXN9LCIiLCIvbWluSXRlbXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOnZvaWQgMCE9PXQubWF4SXRlbXMmJmUubGVuZ3RoPnQubWF4SXRlbXMmJihyPXRoaXMuY3JlYXRlRXJyb3IoXy5BUlJBWV9MRU5HVEhfTE9ORyx7bGVuZ3RoOmUubGVuZ3RoLG1heGltdW06dC5tYXhJdGVtc30sIiIsIi9tYXhJdGVtcyIsbnVsbCxlLHQpLHRoaXMuaGFuZGxlRXJyb3IocikpP3I6bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVBcnJheVVuaXF1ZUl0ZW1zPWZ1bmN0aW9uKGUsdCl7aWYodC51bmlxdWVJdGVtcylmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKylmb3IodmFyIG49cisxO248ZS5sZW5ndGg7bisrKWlmKHJlY3Vyc2l2ZUNvbXBhcmUoZVtyXSxlW25dKSl7dmFyIGk9dGhpcy5jcmVhdGVFcnJvcihfLkFSUkFZX1VOSVFVRSx7bWF0Y2gxOnIsbWF0Y2gyOm59LCIiLCIvdW5pcXVlSXRlbXMiLG51bGwsZSx0KTtpZih0aGlzLmhhbmRsZUVycm9yKGkpKXJldHVybiBpfXJldHVybiBudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZUFycmF5SXRlbXM9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQuaXRlbXMpcmV0dXJuIG51bGw7dmFyIG4saTtpZihBcnJheS5pc0FycmF5KHQuaXRlbXMpKXtmb3IoaT0wO2k8ZS5sZW5ndGg7aSsrKWlmKGk8dC5pdGVtcy5sZW5ndGgpe2lmKG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQuaXRlbXNbaV0sW2ldLFsiaXRlbXMiLGldLHIrIi8iK2kpKXJldHVybiBufWVsc2UgaWYodm9pZCAwIT09dC5hZGRpdGlvbmFsSXRlbXMpaWYoImJvb2xlYW4iPT10eXBlb2YgdC5hZGRpdGlvbmFsSXRlbXMpe2lmKCF0LmFkZGl0aW9uYWxJdGVtcyYmKG49dGhpcy5jcmVhdGVFcnJvcihfLkFSUkFZX0FERElUSU9OQUxfSVRFTVMse30sIi8iK2ksIi9hZGRpdGlvbmFsSXRlbXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQuYWRkaXRpb25hbEl0ZW1zLFtpXSxbImFkZGl0aW9uYWxJdGVtcyJdLHIrIi8iK2kpKXJldHVybiBufWVsc2UgZm9yKGk9MDtpPGUubGVuZ3RoO2krKylpZihuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0Lml0ZW1zLFtpXSxbIml0ZW1zIl0scisiLyIraSkpcmV0dXJuIG47cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4ib2JqZWN0IiE9PSh2b2lkIDA9PT1lPyJ1bmRlZmluZWQiOigwLGQuZGVmYXVsdCkoZSkpfHxudWxsPT09ZXx8QXJyYXkuaXNBcnJheShlKT9udWxsOnRoaXMudmFsaWRhdGVPYmplY3RNaW5NYXhQcm9wZXJ0aWVzKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9iamVjdFJlcXVpcmVkUHJvcGVydGllcyhlLHQscil8fHRoaXMudmFsaWRhdGVPYmplY3RQcm9wZXJ0aWVzKGUsdCxyKXx8dGhpcy52YWxpZGF0ZU9iamVjdERlcGVuZGVuY2llcyhlLHQscil8fG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0TWluTWF4UHJvcGVydGllcz1mdW5jdGlvbihlLHQpe3ZhciByLG49KDAseS5kZWZhdWx0KShlKTtyZXR1cm4gdm9pZCAwIT09dC5taW5Qcm9wZXJ0aWVzJiZuLmxlbmd0aDx0Lm1pblByb3BlcnRpZXMmJihyPXRoaXMuY3JlYXRlRXJyb3IoXy5PQkpFQ1RfUFJPUEVSVElFU19NSU5JTVVNLHtwcm9wZXJ0eUNvdW50Om4ubGVuZ3RoLG1pbmltdW06dC5taW5Qcm9wZXJ0aWVzfSwiIiwiL21pblByb3BlcnRpZXMiLG51bGwsZSx0KSx0aGlzLmhhbmRsZUVycm9yKHIpKT9yOnZvaWQgMCE9PXQubWF4UHJvcGVydGllcyYmbi5sZW5ndGg+dC5tYXhQcm9wZXJ0aWVzJiYocj10aGlzLmNyZWF0ZUVycm9yKF8uT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTSx7cHJvcGVydHlDb3VudDpuLmxlbmd0aCxtYXhpbXVtOnQubWF4UHJvcGVydGllc30sIiIsIi9tYXhQcm9wZXJ0aWVzIixudWxsLGUsdCksdGhpcy5oYW5kbGVFcnJvcihyKSk/cjpudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZU9iamVjdFJlcXVpcmVkUHJvcGVydGllcz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PXQucmVxdWlyZWQpZm9yKHZhciByPTA7cjx0LnJlcXVpcmVkLmxlbmd0aDtyKyspe3ZhciBuPXQucmVxdWlyZWRbcl07aWYodm9pZCAwPT09ZVtuXSl7dmFyIGk9dGhpcy5jcmVhdGVFcnJvcihfLk9CSkVDVF9SRVFVSVJFRCx7a2V5Om59LCIiLCIvcmVxdWlyZWQvIityLG51bGwsZSx0KTtpZih0aGlzLmhhbmRsZUVycm9yKGkpKXJldHVybiBpfX1yZXR1cm4gbnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVPYmplY3RQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbjtmb3IodmFyIGkgaW4gZSl7dmFyIG89cisiLyIraS5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSxhPSExO2lmKHZvaWQgMCE9PXQucHJvcGVydGllcyYmdm9pZCAwIT09dC5wcm9wZXJ0aWVzW2ldJiYoYT0hMCxuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0LnByb3BlcnRpZXNbaV0sW2ldLFsicHJvcGVydGllcyIsaV0sbykpKXJldHVybiBuO2lmKHZvaWQgMCE9PXQucGF0dGVyblByb3BlcnRpZXMpZm9yKHZhciBzIGluIHQucGF0dGVyblByb3BlcnRpZXMpe3ZhciB1PW5ldyBSZWdFeHAocyk7aWYodS50ZXN0KGkpJiYoYT0hMCxuPXRoaXMudmFsaWRhdGVBbGwoZVtpXSx0LnBhdHRlcm5Qcm9wZXJ0aWVzW3NdLFtpXSxbInBhdHRlcm5Qcm9wZXJ0aWVzIixzXSxvKSkpcmV0dXJuIG59aWYoYSl0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLmtub3duUHJvcGVydHlQYXRoc1tvXT0hMCxkZWxldGUgdGhpcy51bmtub3duUHJvcGVydHlQYXRoc1tvXSk7ZWxzZSBpZih2b2lkIDAhPT10LmFkZGl0aW9uYWxQcm9wZXJ0aWVzKXtpZih0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLmtub3duUHJvcGVydHlQYXRoc1tvXT0hMCxkZWxldGUgdGhpcy51bmtub3duUHJvcGVydHlQYXRoc1tvXSksImJvb2xlYW4iPT10eXBlb2YgdC5hZGRpdGlvbmFsUHJvcGVydGllcyl7aWYoIXQuYWRkaXRpb25hbFByb3BlcnRpZXMmJihuPXRoaXMuY3JlYXRlRXJyb3IoXy5PQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTLHtrZXk6aX0sIiIsIi9hZGRpdGlvbmFsUHJvcGVydGllcyIsbnVsbCxlLHQpLnByZWZpeFdpdGgoaSxudWxsKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKG49dGhpcy52YWxpZGF0ZUFsbChlW2ldLHQuYWRkaXRpb25hbFByb3BlcnRpZXMsW2ldLFsiYWRkaXRpb25hbFByb3BlcnRpZXMiXSxvKSlyZXR1cm4gbn1lbHNlIHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmIXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzW29dJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRoc1tvXT0hMCl9cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlT2JqZWN0RGVwZW5kZW5jaWVzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbjtpZih2b2lkIDAhPT10LmRlcGVuZGVuY2llcylmb3IodmFyIGkgaW4gdC5kZXBlbmRlbmNpZXMpaWYodm9pZCAwIT09ZVtpXSl7dmFyIG89dC5kZXBlbmRlbmNpZXNbaV07aWYoInN0cmluZyI9PXR5cGVvZiBvKXtpZih2b2lkIDA9PT1lW29dJiYobj10aGlzLmNyZWF0ZUVycm9yKF8uT0JKRUNUX0RFUEVOREVOQ1lfS0VZLHtrZXk6aSxtaXNzaW5nOm99LCIiLCIiLG51bGwsZSx0KS5wcmVmaXhXaXRoKG51bGwsaSkucHJlZml4V2l0aChudWxsLCJkZXBlbmRlbmNpZXMiKSx0aGlzLmhhbmRsZUVycm9yKG4pKSlyZXR1cm4gbn1lbHNlIGlmKEFycmF5LmlzQXJyYXkobykpZm9yKHZhciBhPTA7YTxvLmxlbmd0aDthKyspe3ZhciBzPW9bYV07aWYodm9pZCAwPT09ZVtzXSYmKG49dGhpcy5jcmVhdGVFcnJvcihfLk9CSkVDVF9ERVBFTkRFTkNZX0tFWSx7a2V5OmksbWlzc2luZzpzfSwiIiwiLyIrYSxudWxsLGUsdCkucHJlZml4V2l0aChudWxsLGkpLnByZWZpeFdpdGgobnVsbCwiZGVwZW5kZW5jaWVzIiksdGhpcy5oYW5kbGVFcnJvcihuKSkpcmV0dXJuIG59ZWxzZSBpZihuPXRoaXMudmFsaWRhdGVBbGwoZSxvLFtdLFsiZGVwZW5kZW5jaWVzIixpXSxyKSlyZXR1cm4gbn1yZXR1cm4gbnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVDb21iaW5hdGlvbnM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLnZhbGlkYXRlQWxsT2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlQW55T2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlT25lT2YoZSx0LHIpfHx0aGlzLnZhbGlkYXRlTm90KGUsdCxyKXx8bnVsbH0sZy5wcm90b3R5cGUudmFsaWRhdGVBbGxPZj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5hbGxPZilyZXR1cm4gbnVsbDtmb3IodmFyIG4saT0wO2k8dC5hbGxPZi5sZW5ndGg7aSsrKXt2YXIgbz10LmFsbE9mW2ldO2lmKG49dGhpcy52YWxpZGF0ZUFsbChlLG8sW10sWyJhbGxPZiIsaV0scikpcmV0dXJuIG59cmV0dXJuIG51bGx9LGcucHJvdG90eXBlLnZhbGlkYXRlQW55T2Y9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXQuYW55T2YpcmV0dXJuIG51bGw7dmFyIG4saSxvPVtdLGE9dGhpcy5lcnJvcnMubGVuZ3RoO3RoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyYmKG49dGhpcy51bmtub3duUHJvcGVydHlQYXRocyxpPXRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKTtmb3IodmFyIHM9ITAsdT0wO3U8dC5hbnlPZi5sZW5ndGg7dSsrKXt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9KTt2YXIgYz10LmFueU9mW3VdLGY9dGhpcy5lcnJvcnMubGVuZ3RoLGw9dGhpcy52YWxpZGF0ZUFsbChlLGMsW10sWyJhbnlPZiIsdV0scik7aWYobnVsbD09PWwmJmY9PT10aGlzLmVycm9ycy5sZW5ndGgpe2lmKHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzKXtmb3IodmFyIGQgaW4gdGhpcy5rbm93blByb3BlcnR5UGF0aHMpaVtkXT0hMCxkZWxldGUgbltkXTtmb3IodmFyIHAgaW4gdGhpcy51bmtub3duUHJvcGVydHlQYXRocylpW3BdfHwobltwXT0hMCk7Ci8vIFdlIG5lZWQgdG8gY29udGludWUgbG9vcGluZyBzbyB3ZSBjYXRjaCBhbGwgdGhlIHByb3BlcnR5IGRlZmluaXRpb25zLCBidXQgd2UgZG9uJ3Qgd2FudCB0byByZXR1cm4gYW4gZXJyb3IKcz0hMTtjb250aW51ZX1yZXR1cm4gbnVsbH1sJiZvLnB1c2gobC5wcmVmaXhXaXRoKG51bGwsIiIrdSkucHJlZml4V2l0aChudWxsLCJhbnlPZiIpKX1yZXR1cm4gdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz1uLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPWkpLHM/KG89by5jb25jYXQodGhpcy5lcnJvcnMuc2xpY2UoYSkpLHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsYSksdGhpcy5jcmVhdGVFcnJvcihfLkFOWV9PRl9NSVNTSU5HLHt9LCIiLCIvYW55T2YiLG8sZSx0KSk6dm9pZCAwfSxnLnByb3RvdHlwZS52YWxpZGF0ZU9uZU9mPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT10Lm9uZU9mKXJldHVybiBudWxsO3ZhciBuLGksbz1udWxsLGE9W10scz10aGlzLmVycm9ycy5sZW5ndGg7dGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYobj10aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzLGk9dGhpcy5rbm93blByb3BlcnR5UGF0aHMpO2Zvcih2YXIgdT0wO3U8dC5vbmVPZi5sZW5ndGg7dSsrKXt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJih0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9KTt2YXIgYz10Lm9uZU9mW3VdLGY9dGhpcy5lcnJvcnMubGVuZ3RoLGw9dGhpcy52YWxpZGF0ZUFsbChlLGMsW10sWyJvbmVPZiIsdV0scik7aWYobnVsbD09PWwmJmY9PT10aGlzLmVycm9ycy5sZW5ndGgpe2lmKG51bGwhPT1vKXJldHVybiB0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLHMpLHRoaXMuY3JlYXRlRXJyb3IoXy5PTkVfT0ZfTVVMVElQTEUse2luZGV4MTpvLGluZGV4Mjp1fSwiIiwiL29uZU9mIixudWxsLGUsdCk7aWYobz11LHRoaXMudHJhY2tVbmtub3duUHJvcGVydGllcyl7Zm9yKHZhciBkIGluIHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzKWlbZF09ITAsZGVsZXRlIG5bZF07Zm9yKHZhciBwIGluIHRoaXMudW5rbm93blByb3BlcnR5UGF0aHMpaVtwXXx8KG5bcF09ITApfX1lbHNlIGwmJmEucHVzaChsKX1yZXR1cm4gdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz1uLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPWkpLG51bGw9PT1vPyhhPWEuY29uY2F0KHRoaXMuZXJyb3JzLnNsaWNlKHMpKSx0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLHMpLHRoaXMuY3JlYXRlRXJyb3IoXy5PTkVfT0ZfTUlTU0lORyx7fSwiIiwiL29uZU9mIixhLGUsdCkpOih0aGlzLmVycm9ycz10aGlzLmVycm9ycy5zbGljZSgwLHMpLG51bGwpfSxnLnByb3RvdHlwZS52YWxpZGF0ZU5vdD1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09dC5ub3QpcmV0dXJuIG51bGw7dmFyIG4saSxvPXRoaXMuZXJyb3JzLmxlbmd0aDt0aGlzLnRyYWNrVW5rbm93blByb3BlcnRpZXMmJihuPXRoaXMudW5rbm93blByb3BlcnR5UGF0aHMsaT10aGlzLmtub3duUHJvcGVydHlQYXRocyx0aGlzLnVua25vd25Qcm9wZXJ0eVBhdGhzPXt9LHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPXt9KTt2YXIgYT10aGlzLnZhbGlkYXRlQWxsKGUsdC5ub3QsbnVsbCxudWxsLHIpLHM9dGhpcy5lcnJvcnMuc2xpY2Uobyk7cmV0dXJuIHRoaXMuZXJyb3JzPXRoaXMuZXJyb3JzLnNsaWNlKDAsbyksdGhpcy50cmFja1Vua25vd25Qcm9wZXJ0aWVzJiYodGhpcy51bmtub3duUHJvcGVydHlQYXRocz1uLHRoaXMua25vd25Qcm9wZXJ0eVBhdGhzPWkpLG51bGw9PT1hJiYwPT09cy5sZW5ndGg/dGhpcy5jcmVhdGVFcnJvcihfLk5PVF9QQVNTRUQse30sIiIsIi9ub3QiLG51bGwsZSx0KTpudWxsfSxnLnByb3RvdHlwZS52YWxpZGF0ZUh5cGVybWVkaWE9ZnVuY3Rpb24oZSx0LHIpe2lmKCF0LmxpbmtzKXJldHVybiBudWxsO2Zvcih2YXIgbixpPTA7aTx0LmxpbmtzLmxlbmd0aDtpKyspe3ZhciBvPXQubGlua3NbaV07aWYoImRlc2NyaWJlZGJ5Ij09PW8ucmVsKXtmb3IodmFyIGE9bmV3IFVyaVRlbXBsYXRlKG8uaHJlZikscz0hMCx1PTA7dTxhLnZhck5hbWVzLmxlbmd0aDt1KyspaWYoIShhLnZhck5hbWVzW3VdaW4gZSkpe3M9ITE7YnJlYWt9aWYocyl7dmFyIGM9YS5maWxsRnJvbU9iamVjdChlKSxmPXskcmVmOmN9O2lmKG49dGhpcy52YWxpZGF0ZUFsbChlLGYsW10sWyJsaW5rcyIsaV0scikpcmV0dXJuIG59fX19O3ZhciBfPXtJTlZBTElEX1RZUEU6MCxFTlVNX01JU01BVENIOjEsQU5ZX09GX01JU1NJTkc6MTAsT05FX09GX01JU1NJTkc6MTEsT05FX09GX01VTFRJUExFOjEyLE5PVF9QQVNTRUQ6MTMsCi8vIE51bWVyaWMgZXJyb3JzCk5VTUJFUl9NVUxUSVBMRV9PRjoxMDAsTlVNQkVSX01JTklNVU06MTAxLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToxMDIsTlVNQkVSX01BWElNVU06MTAzLE5VTUJFUl9NQVhJTVVNX0VYQ0xVU0lWRToxMDQsTlVNQkVSX05PVF9BX05VTUJFUjoxMDUsCi8vIFN0cmluZyBlcnJvcnMKU1RSSU5HX0xFTkdUSF9TSE9SVDoyMDAsU1RSSU5HX0xFTkdUSF9MT05HOjIwMSxTVFJJTkdfUEFUVEVSTjoyMDIsCi8vIE9iamVjdCBlcnJvcnMKT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTTozMDAsT0JKRUNUX1BST1BFUlRJRVNfTUFYSU1VTTozMDEsT0JKRUNUX1JFUVVJUkVEOjMwMixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOjMwMyxPQkpFQ1RfREVQRU5ERU5DWV9LRVk6MzA0LAovLyBBcnJheSBlcnJvcnMKQVJSQVlfTEVOR1RIX1NIT1JUOjQwMCxBUlJBWV9MRU5HVEhfTE9ORzo0MDEsQVJSQVlfVU5JUVVFOjQwMixBUlJBWV9BRERJVElPTkFMX0lURU1TOjQwMywKLy8gQ3VzdG9tL3VzZXItZGVmaW5lZCBlcnJvcnMKRk9STUFUX0NVU1RPTTo1MDAsS0VZV09SRF9DVVNUT006NTAxLAovLyBTY2hlbWEgc3RydWN0dXJlCkNJUkNVTEFSX1JFRkVSRU5DRTo2MDAsCi8vIE5vbi1zdGFuZGFyZCB2YWxpZGF0aW9uIG9wdGlvbnMKVU5LTk9XTl9QUk9QRVJUWToxZTN9LFI9e307Zm9yKHZhciB3IGluIF8pUltfW3ddXT13O3ZhciBTPXtJTlZBTElEX1RZUEU6IkludmFsaWQgdHlwZToge3R5cGV9IChleHBlY3RlZCB7ZXhwZWN0ZWR9KSIsRU5VTV9NSVNNQVRDSDoiTm8gZW51bSBtYXRjaCBmb3I6IHt2YWx1ZX0iLEFOWV9PRl9NSVNTSU5HOidEYXRhIGRvZXMgbm90IG1hdGNoIGFueSBzY2hlbWFzIGZyb20gImFueU9mIicsT05FX09GX01JU1NJTkc6J0RhdGEgZG9lcyBub3QgbWF0Y2ggYW55IHNjaGVtYXMgZnJvbSAib25lT2YiJyxPTkVfT0ZfTVVMVElQTEU6J0RhdGEgaXMgdmFsaWQgYWdhaW5zdCBtb3JlIHRoYW4gb25lIHNjaGVtYSBmcm9tICJvbmVPZiI6IGluZGljZXMge2luZGV4MX0gYW5kIHtpbmRleDJ9JyxOT1RfUEFTU0VEOidEYXRhIG1hdGNoZXMgc2NoZW1hIGZyb20gIm5vdCInLAovLyBOdW1lcmljIGVycm9ycwpOVU1CRVJfTVVMVElQTEVfT0Y6IlZhbHVlIHt2YWx1ZX0gaXMgbm90IGEgbXVsdGlwbGUgb2Yge211bHRpcGxlT2Z9IixOVU1CRVJfTUlOSU1VTToiVmFsdWUge3ZhbHVlfSBpcyBsZXNzIHRoYW4gbWluaW11bSB7bWluaW11bX0iLE5VTUJFUl9NSU5JTVVNX0VYQ0xVU0lWRToiVmFsdWUge3ZhbHVlfSBpcyBlcXVhbCB0byBleGNsdXNpdmUgbWluaW11bSB7bWluaW11bX0iLE5VTUJFUl9NQVhJTVVNOiJWYWx1ZSB7dmFsdWV9IGlzIGdyZWF0ZXIgdGhhbiBtYXhpbXVtIHttYXhpbXVtfSIsTlVNQkVSX01BWElNVU1fRVhDTFVTSVZFOiJWYWx1ZSB7dmFsdWV9IGlzIGVxdWFsIHRvIGV4Y2x1c2l2ZSBtYXhpbXVtIHttYXhpbXVtfSIsTlVNQkVSX05PVF9BX05VTUJFUjoiVmFsdWUge3ZhbHVlfSBpcyBub3QgYSB2YWxpZCBudW1iZXIiLAovLyBTdHJpbmcgZXJyb3JzClNUUklOR19MRU5HVEhfU0hPUlQ6IlN0cmluZyBpcyB0b28gc2hvcnQgKHtsZW5ndGh9IGNoYXJzKSwgbWluaW11bSB7bWluaW11bX0iLFNUUklOR19MRU5HVEhfTE9ORzoiU3RyaW5nIGlzIHRvbyBsb25nICh7bGVuZ3RofSBjaGFycyksIG1heGltdW0ge21heGltdW19IixTVFJJTkdfUEFUVEVSTjoiU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm46IHtwYXR0ZXJufSIsCi8vIE9iamVjdCBlcnJvcnMKT0JKRUNUX1BST1BFUlRJRVNfTUlOSU1VTToiVG9vIGZldyBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1pbmltdW0ge21pbmltdW19IixPQkpFQ1RfUFJPUEVSVElFU19NQVhJTVVNOiJUb28gbWFueSBwcm9wZXJ0aWVzIGRlZmluZWQgKHtwcm9wZXJ0eUNvdW50fSksIG1heGltdW0ge21heGltdW19IixPQkpFQ1RfUkVRVUlSRUQ6Ik1pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHk6IHtrZXl9IixPQkpFQ1RfQURESVRJT05BTF9QUk9QRVJUSUVTOiJBZGRpdGlvbmFsIHByb3BlcnRpZXMgbm90IGFsbG93ZWQiLE9CSkVDVF9ERVBFTkRFTkNZX0tFWToiRGVwZW5kZW5jeSBmYWlsZWQgLSBrZXkgbXVzdCBleGlzdDoge21pc3Npbmd9IChkdWUgdG8ga2V5OiB7a2V5fSkiLAovLyBBcnJheSBlcnJvcnMKQVJSQVlfTEVOR1RIX1NIT1JUOiJBcnJheSBpcyB0b28gc2hvcnQgKHtsZW5ndGh9KSwgbWluaW11bSB7bWluaW11bX0iLEFSUkFZX0xFTkdUSF9MT05HOiJBcnJheSBpcyB0b28gbG9uZyAoe2xlbmd0aH0pLCBtYXhpbXVtIHttYXhpbXVtfSIsQVJSQVlfVU5JUVVFOiJBcnJheSBpdGVtcyBhcmUgbm90IHVuaXF1ZSAoaW5kaWNlcyB7bWF0Y2gxfSBhbmQge21hdGNoMn0pIixBUlJBWV9BRERJVElPTkFMX0lURU1TOiJBZGRpdGlvbmFsIGl0ZW1zIG5vdCBhbGxvd2VkIiwKLy8gRm9ybWF0IGVycm9ycwpGT1JNQVRfQ1VTVE9NOiJGb3JtYXQgdmFsaWRhdGlvbiBmYWlsZWQgKHttZXNzYWdlfSkiLEtFWVdPUkRfQ1VTVE9NOiJLZXl3b3JkIGZhaWxlZDoge2tleX0gKHttZXNzYWdlfSkiLAovLyBTY2hlbWEgc3RydWN0dXJlCkNJUkNVTEFSX1JFRkVSRU5DRToiQ2lyY3VsYXIgJHJlZnM6IHt1cmxzfSIsCi8vIE5vbi1zdGFuZGFyZCB2YWxpZGF0aW9uIG9wdGlvbnMKVU5LTk9XTl9QUk9QRVJUWToiVW5rbm93biBwcm9wZXJ0eSAobm90IGluIHNjaGVtYSkifTtWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlPSgwLGYuZGVmYXVsdCkoRXJyb3IucHJvdG90eXBlKSxWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yPVZhbGlkYXRpb25FcnJvcixWYWxpZGF0aW9uRXJyb3IucHJvdG90eXBlLm5hbWU9IlZhbGlkYXRpb25FcnJvciIsVmFsaWRhdGlvbkVycm9yLnByb3RvdHlwZS5wcmVmaXhXaXRoPWZ1bmN0aW9uKGUsdCl7aWYobnVsbCE9PWUmJihlPWUucmVwbGFjZSgvfi9nLCJ+MCIpLnJlcGxhY2UoL1wvL2csIn4xIiksdGhpcy5kYXRhUGF0aD0iLyIrZSt0aGlzLmRhdGFQYXRoKSxudWxsIT09dCYmKHQ9dC5yZXBsYWNlKC9+L2csIn4wIikucmVwbGFjZSgvXC8vZywifjEiKSx0aGlzLnNjaGVtYVBhdGg9Ii8iK3QrdGhpcy5zY2hlbWFQYXRoKSxudWxsIT09dGhpcy5zdWJFcnJvcnMpZm9yKHZhciByPTA7cjx0aGlzLnN1YkVycm9ycy5sZW5ndGg7cisrKXRoaXMuc3ViRXJyb3JzW3JdLnByZWZpeFdpdGgoZSx0KTtyZXR1cm4gdGhpc307dmFyIE89e30sUD1jcmVhdGVBcGkoKTtQLmFkZExhbmd1YWdlKCJlbi1nYiIsUyksCi8vbGVnYWN5IHByb3BlcnR5ClAudHY0PVAsCi8vcmV0dXJuIHR2NDsKdC5kZWZhdWx0PVAsCi8vfQplLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA1MDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDUwMSksX19lc01vZHVsZTohMH19LC8qIDUwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig1MDIpLGUuZXhwb3J0cz1yKDEzKS5PYmplY3QuaXNGcm96ZW59LC8qIDUwMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xMiBPYmplY3QuaXNGcm96ZW4oTykKdmFyIG49cig0Mik7cig5NykoImlzRnJvemVuIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIW4odCl8fCEhZSYmZSh0KX19KX0sLyogNTAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDYpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoNDUpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigyKSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDExKSx5PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0ocCksaD1yKDE1KSx2PXIoMjA2KSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksYj15LmdldExvZ2dlcigiUmVwb3J0ZXJPYmplY3QiKSxtPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUmVwb3J0ZXJPYmplY3QoZSx0LHIpeygwLGYuZGVmYXVsdCkodGhpcyxSZXBvcnRlck9iamVjdCk7dmFyIG49dGhpcztuLl9wYXJlbnQ9ZSxuLl9vd25lcj10LG4uX3VybD1yLG4uX2J1cz1lLl9idXMsbi5fZG9tYWluPSgwLGguZGl2aWRlVVJMKShyKS5kb21haW4sbi5fb2JqU3Vic2NyaXB0b3JVUkw9bi5fdXJsKyIvc3Vic2NyaXB0aW9uIixuLl9zdWJzY3JpcHRpb25zPXt9LG4uX2NoaWxkcmVucz1bXSxuLl9jaGlsZHJlbkxpc3RlbmVycz1bXSxuLl9mb3J3YXJkcz17fSxuLl9pc1RvU2F2ZURhdGE9ITEsbi5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxkLmRlZmF1bHQpKFJlcG9ydGVyT2JqZWN0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7Ci8vYWRkIHN1YnNjcmlwdGlvbiBsaXN0ZW5lci4uLgp0Ll9zdWJzY3JpcHRpb25MaXN0ZW5lcj10Ll9idXMuYWRkTGlzdGVuZXIodC5fb2JqU3Vic2NyaXB0b3JVUkwsZnVuY3Rpb24oZSl7c3dpdGNoKGIuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IHJlY2VpdmVkIF0iLGUpLGUudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uUmVtb3RlU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uUmVtb3RlVW5TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJyZXNwb25zZSI6dC5fb25SZW1vdGVSZXNwb25zZShlKX19KTt2YXIgcj10Ll91cmwrIi9jaGFuZ2VzIjt0Ll9jaGFuZ2VMaXN0ZW5lcj10Ll9idXMuYWRkTGlzdGVuZXIocixmdW5jdGlvbihuKXtiLmluZm8oIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCBdIFN5bmNoZXJNYW5hZ2VyLSIrcisiLVJDVjogIixuKSwKLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGFuZ2VzPwplLl9pc1RvU2F2ZURhdGEmJm4uYm9keS5hdHRyaWJ1dGUmJihiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF0gU3luY2hlck1hbmFnZXIgLSBzYXZlIGRhdGE6ICIsbiksdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwidmVyc2lvbiIsbi5ib2R5LnZlcnNpb24pLHQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCx0Ll91cmwsImxhc3RNb2RpZmllZCIsbi5ib2R5Lmxhc3RNb2RpZmllZCksdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZURhdGEoITAsdC5fdXJsLG4uYm9keS5hdHRyaWJ1dGUsbi5ib2R5LnZhbHVlKSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fc3Vic2NyaXB0aW9uTGlzdGVuZXIucmVtb3ZlKCksZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCksZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksKDAsdS5kZWZhdWx0KShlLl9mb3J3YXJkcykuZm9yRWFjaChmdW5jdGlvbih0KXtlLmZvcndhcmRVblN1YnNjcmliZSh0KX0pLAovL3JlbW92ZSBhbGwgc3Vic2NyaXB0aW9ucwooMCx1LmRlZmF1bHQpKGUuX3N1YnNjcmlwdGlvbnMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fc3Vic2NyaXB0aW9uc1t0XS5fcmVsZWFzZUxpc3RlbmVycygpfSl9fSx7a2V5OiJyZXN1bWVTdWJzY3JpcHRpb25zIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UmJigwLHUuZGVmYXVsdCkoZSkuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj1lW3JdO2IubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3RdIC0gcmVzdW1lIHN1YnNjcmlwdGlvbnMiLHQsbix0Ll9jaGlsZHJlbnMpLHQuX3N1YnNjcmlwdGlvbnNbbl18fCh0Ll9zdWJzY3JpcHRpb25zW25dPW5ldyBnLmRlZmF1bHQodC5fYnVzLHQuX293bmVyLHQuX3VybCx0Ll9jaGlsZHJlbnMsITApKX0pfX0se2tleToiZm9yd2FyZFN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206dC5fcGFyZW50Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrdC5fZG9tYWluKyIvc20iLGJvZHk6e3Jlc291cmNlczplLHNvdXJjZTp0Ll9vd25lcn19O3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24ocil7aWYoYi5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCBdZm9yd2FyZC1zdWJzY3JpYmUtcmVzcG9uc2UocmVwb3J0ZXIpOiAiLHIpLDIwMD09PXIuYm9keS5jb2RlKXt2YXIgbz10Ll9idXMuYWRkRm9yd2FyZCh0Ll91cmwsdC5fb3duZXIpO3QuX2ZvcndhcmRzW2VbMF1dPW8sbigpfWVsc2UgaSgiRXJyb3Igb24gbXNnLW5vZGUgc3Vic2NyaXB0aW9uOiAiK3IuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJmb3J3YXJkVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fZm9yd2FyZHNbZV0ucmVtb3ZlKCksZGVsZXRlIHQuX2ZvcndhcmRzW2VdOwovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gdGhlIG1zZy1ub2RlIFN1YnNjcmlwdGlvbk1hbmFnZXIgY29tcG9uZW50CnZhciByPXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTp0Ll9wYXJlbnQuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIit0Ll9kb21haW4rIi9zbSIsYm9keTp7cmVzb3VyY2VzOltlXSxzb3VyY2U6dC5fb3duZXJ9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJhZGRDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7aWYoMD09PWUubGVuZ3RoKXJldHVybiB2b2lkIG4oKTt2YXIgYT1yLl91cmwrIi9jaGlsZHJlbi8iO2IubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgLSBhZGRDaGlsZHJlbnNdIC0gY2hpbGRyZW5zOiAiLGUsYSksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX2NoaWxkcmVucy5wdXNoKGUpfSk7LyoKICAgICAgICBfdGhpcy5fY2hpbGRyZW5zLmZvckVhY2goKGNoaWxkKSA9PiB7CiAgICAgICAgICBsZXQgY2hpbGRJZCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwogICAgICAgICAgIGxldCBzZWxmRm9yd2FyZCA9IF90aGlzLl9idXMuYWRkRm9yd2FyZChjaGlsZElkLCBvd25lcik7CiAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChzZWxmRm9yd2FyZCk7CiAgICAgICAgfSk7Ki8KdmFyIHM9W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBzLnB1c2goYStlKX0pOwovL190aGlzLl9zdG9yYWdlU3Vic2NyaXB0aW9uc1tfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkxdID0ge3VybDogX3RoaXMuX3VybCwgb3duZXI6IF90aGlzLl9vd25lciwgY2hpbGRyZW5zOiBfdGhpcy5fY2hpbGRyZW5zfTsKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIHRoZSBtc2ctbm9kZSBTdWJzY3JpcHRpb25NYW5hZ2VyIGNvbXBvbmVudAp2YXIgdT17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX3BhcmVudC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK3IuX2RvbWFpbisiL3NtIixib2R5OntyZXNvdXJjZXM6cyxzb3VyY2U6ci5fb3duZXJ9fTtyLl9idXMucG9zdE1lc3NhZ2UodSxmdW5jdGlvbihlKXtiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF1ub2RlLXN1YnNjcmliZS1yZXNwb25zZShyZXBvcnRlcik6IixlKSwyMDA9PT1lLmJvZHkuY29kZT8oCi8vYWRkIGNoaWxkcmVuIGxpc3RlbmVycyBvbiBsb2NhbCAuLi4Kcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPXIuX2J1cy5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKGUpe2lmKAovL1RPRE86IHdoYXQgdG9kbyBoZXJlPyBTYXZlIGNoaWxkcmVucz8KYi5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCByZWNlaXZlZF0iLGUpLCJjcmVhdGUiPT09ZS50eXBlJiZlLnRvLmluY2x1ZGVzKCJjaGlsZHJlbiIpJiZ0Ll9pc1RvU2F2ZURhdGEpewovLyBpZiB0aGUgdmFsdWUgaXMgbm90IGVuY3J5cHRlZCBsZXRzIGVuY3J5cHQgaXQKLy8gdG9kbzogc2hvdWxkIGJlIHN1YmplY3QgdG8gc29tZSBwb2xpY3kKdmFyIG49KDAsaC5zcGxpdE9iamVjdFVSTCkoZS50byksbz1uLnVybDsKLy9yZW1vdmUgZmFsc2Ugd2hlbiBtdXR1YWxBdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkCiJzdHJpbmciIT10eXBlb2YgZS5ib2R5LnZhbHVlPyhiLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0XSBlbmNyeXB0aW5nIHJlY2VpdmVkIGRhdGEgIixlLmJvZHkudmFsdWUpLHIuX3BhcmVudC5faWRlbnRpdHlNb2R1bGUuZW5jcnlwdERhdGFPYmplY3QoZS5ib2R5LnZhbHVlLG8pLnRoZW4oZnVuY3Rpb24odCl7Yi5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdF0gZW5jcnlwdGVkIGRhdGEgIix0KSxyLl9zdG9yZUNoaWxkT2JqZWN0KGUsKDAsaS5kZWZhdWx0KSh0KSl9KS5jYXRjaChmdW5jdGlvbih0KXtiLndhcm4oIltTeW5jaGVyTWFuYWdlci5fZGVjcnlwdENoaWxkcmVuc10gZmFpbGVkIDogIix0LCIgU3RvcmluZyB1bmVuY3J5cHRlZCIpLHIuX3N0b3JlQ2hpbGRPYmplY3QoZSxlLmJvZHkudmFsdWUpfSkpOnIuX3N0b3JlQ2hpbGRPYmplY3QoZSxlLmJvZHkudmFsdWUpfX0pO3IuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobik7dmFyIG89ci5fYnVzLmFkZEZvcndhcmQoZSxyLl9vd25lcik7ci5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChvKX0pLG4oKSk6bygiRXJyb3Igb24gbXNnLW5vZGUgc3Vic2NyaXB0aW9uOiAiK2UuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJfc3RvcmVDaGlsZE9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49KDAsaC5zcGxpdE9iamVjdFVSTCkoZS50byksaT1uLnVybCxvPW4ucmVzb3VyY2UsYT17aWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LHZhbHVlOnR9LHM9ZS5ib2R5LnJlc291cmNlLHU9bztzJiYodSs9Ii4iK3MpLAovLyB0aGlzIGlkZW50aXR5IGRhdGEgaXMgbm90IG5lZWRlZCB0byBiZSBzdG9yZWQKZGVsZXRlIGEuaWRlbnRpdHkuYXNzZXJ0aW9uLGRlbGV0ZSBhLmlkZW50aXR5LmV4cGlyZXMsci5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZUNoaWxkcmVucyghMCxpLHUsYSl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PSgwLGguZGl2aWRlVVJMKShlLl9vd25lcikuZG9tYWluOwovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgZGlyZWN0bHkgdG8gYWxsIHN1YnNjcmliZXJzIG9mIHRoZSByZXBvcnRlcgplLl9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6ImRlbGV0ZSIsZnJvbTplLl9vYmpTdWJzY3JpcHRvclVSTCx0bzplLl91cmwrIi9jaGFuZ2VzIn0pLAovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gdGhlIG1zZy1ub2RlIE9iamVjdEFsbG9jYXRpb25NYW5hZ2VyIGNvbXBvbmVudAplLl9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6ImRlbGV0ZSIsZnJvbTplLl9wYXJlbnQuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIit0KyIvb2JqZWN0LWFkZHJlc3MtYWxsb2NhdGlvbiIsYm9keTp7cmVzb3VyY2U6ZS5fdXJsLGNoaWxkcmVuUmVzb3VyY2VzOmUuX2NoaWxkcmVuc319KSxlLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIGUuX3BhcmVudC5fcmVwb3J0ZXJzW2UuX3VybF19fSx7a2V5OiJfb25SZW1vdGVSZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzp0Ll91cmwsYm9keTp7Y29kZTplLmJvZHkuY29kZSxpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksc291cmNlOmUuZnJvbX19KX19LHtrZXk6Il9vblJlbW90ZVN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5zdWJzY3JpYmVyOwovL3ZhbGlkYXRlIGlmIHN1YnNjcmlwdGlvbiBhbHJlYWR5IGV4aXN0cz8KdC5fc3Vic2NyaXB0aW9uc1tyXSYmCi8vIGxldCBlcnJvck1zZyA9IHsKLy8gICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBoeXBlcnR5VVJMLAovLyAgIGJvZHk6IHsgY29kZTogNTAwLCBkZXNjOiAnU3Vic2NyaXB0aW9uIGZvciAoJyArIF90aGlzLl91cmwgKyAnIDogJyArICBoeXBlcnR5VVJMICsgJykgYWxyZWFkeSBleGlzdHMhJyB9Ci8vIH07Ci8vCi8vIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoZXJyb3JNc2cpOwovLyByZXR1cm47Ci8vIG5ldyB2ZXJzaW9uIGJlY2F1c2Ugb2YgcmV1c2FnZQp0Ll9zdWJzY3JpcHRpb25zW3JdLl9yZWxlYXNlTGlzdGVuZXJzKCk7Ci8vYXNrIHRvIHN1YnNjcmliZSB0byBTeW5jaGVyPyAoZGVwZW5kcyBvbiB0aGUgb3BlcmF0aW9uIG1vZGUpCi8vVE9ETzogZ2V0IG1vZGUgZnJvbSBvYmplY3QhCnZhciBuPXt0eXBlOiJmb3J3YXJkIixmcm9tOnQuX3VybCx0bzp0Ll9vd25lcixib2R5Ont0eXBlOmUudHlwZSxmcm9tOnIsdG86dC5fdXJsLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX19OwovL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIikmJihuLmJvZHkubXV0dWFsPWUuYm9keS5tdXR1YWwpLHQuX2J1cy5wb3N0TWVzc2FnZShuLGZ1bmN0aW9uKG4pe2IubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgXWZvcndhcmQtcmVwbHk6ICIsbiksMjAwPT09bi5ib2R5LmNvZGUmJih0Ll9zdWJzY3JpcHRpb25zW3JdfHwoYi5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdF0gLSBfb25SZW1vdGVTdWJzY3JpYmU6Iix0Ll9jaGlsZHJlbnMpLHQuX3N1YnNjcmlwdGlvbnNbcl09bmV3IGcuZGVmYXVsdCh0Ll9idXMsdC5fb3duZXIsdC5fdXJsLHQuX2NoaWxkcmVucywhMCkpKTsKLy9UT0RPOiBhdHVhbGl6YXIgbXV0dWFsIG5vIHN0b3JhZ2UgZSB0YiBuYSBzZXNzaW9uS2V5cwovLyBTdG9yZSBmb3IgZWFjaCByZXBvcnRlciBoeXBlcnR5IHRoZSBkYXRhT2JqZWN0CnZhciBpPXZvaWQgMDtlLmJvZHkuaWRlbnRpdHkmJmUuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMJiYoaT1lLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCx0Ll9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITAsdC5fdXJsLCJzdWJzY3JpYmVyVXNlcnMiLGkpKSxlLmJvZHkuaGFzT3duUHJvcGVydHkoIm11dHVhbCIpJiYKLy8gICAgICAgICAgX3RoaXMuX3BhcmVudC5faWRlbnRpdHlNb2R1bGUudXBkYXRlSXNUb0VuY3J5cHRGb3JEYXRhT2JqZWN0U2Vzc2lvbktleShfdGhpcy5fdXJsLCBtc2cuYm9keS5tdXR1YWwpLnRoZW4oKCk9PnsKdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwibXV0dWFsIixlLmJvZHkubXV0dWFsKSx0Ll9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITAsdC5fdXJsLCJzdWJzY3JpcHRpb25zIixyKSxuLmJvZHkub3duZXI9dC5fb3duZXIsCi8vRkxPVy1PVVQ6IHN1YnNjcmlwdGlvbiByZXNwb25zZSBzZW50IChmb3J3YXJkIGZyb20gaW50ZXJuYWwgSHlwZXJ0eSkKdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6bi5ib2R5fSl9KX19LHtrZXk6Il9vblJlbW90ZVVuU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnNvdXJjZSxuPXQuX3N1YnNjcmlwdGlvbnNbcl07aWYobil7bi5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSB0Ll9zdWJzY3JpcHRpb25zW3JdO3ZhciBpPXt0eXBlOiJmb3J3YXJkIixmcm9tOnQuX3VybCx0bzp0Ll9vd25lcixib2R5Ont0eXBlOmUudHlwZSxmcm9tOnIsdG86dC5fdXJsLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eX19O3QuX2J1cy5wb3N0TWVzc2FnZShpKX19fSx7a2V5OiJpc1RvU2F2ZURhdGEiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9pc1RvU2F2ZURhdGE9ZX19XSksUmVwb3J0ZXJPYmplY3R9KCk7dC5kZWZhdWx0PW0sZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDYpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHMpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDExKSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDE1KSx5PXIoMjA2KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoeSksdj1kLmdldExvZ2dlcigiT2JzZXJ2ZXJPYmplY3QiKSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gT2JzZXJ2ZXJPYmplY3QoZSx0LHIpe3ZhciBuPXRoaXM7KDAsdS5kZWZhdWx0KSh0aGlzLE9ic2VydmVyT2JqZWN0KTt2YXIgaT10aGlzO2kuX3BhcmVudD1lLGkuX3VybD10LGkuX2NoaWxkcmVucz1yLGkuX2J1cz1lLl9idXMsaS5fc3Vic2NyaXB0aW9ucz17fSxpLl9zdG9yYWdlU3Vic2NyaXB0aW9ucz17fSxpLl9jaGlsZHJlbkxpc3RlbmVycz1bXSx0aGlzLl9pc1RvU2F2ZURhdGE9ITE7dmFyIG89aS5fdXJsKyIvY2hhbmdlcyI7aS5fY2hhbmdlTGlzdGVuZXI9aS5fYnVzLmFkZExpc3RlbmVyKG8sZnVuY3Rpb24oZSl7di5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCBdIFN5bmNoZXJNYW5hZ2VyLSIrbysiLVJDVjogIixlKSwKLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGFuZ2VzPwpuLl9pc1RvU2F2ZURhdGEmJmUuYm9keS5hdHRyaWJ1dGUmJih2LmxvZygiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0IF0gU3luY2hlck1hbmFnZXIgLSBzYXZlIGRhdGE6ICIsZSksaS5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCExLGkuX3VybCwidmVyc2lvbiIsZS5ib2R5LnZlcnNpb24pLGkuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMSxpLl91cmwsImxhc3RNb2RpZmllZCIsZS5ib2R5Lmxhc3RNb2RpZmllZCksaS5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZURhdGEoITEsaS5fdXJsLGUuYm9keS5hdHRyaWJ1dGUsZS5ib2R5LnZhbHVlKSl9KX1yZXR1cm4oMCxmLmRlZmF1bHQpKE9ic2VydmVyT2JqZWN0LFt7a2V5OiJfbmV3U3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5fc3Vic2NyaXB0aW9uc1tlXTt2LmxvZygiW09ic2VydmVyIE9iamVjdCAtIG5ldyBzdWJzY3JpcHRpb25dIC0gIix0Ll9zdWJzY3JpcHRpb25zLGUsdC5fc3Vic2NyaXB0aW9ucy5oYXNPd25Qcm9wZXJ0eShlKSkscnx8KHQuX3N1YnNjcmlwdGlvbnNbZV09bmV3IGguZGVmYXVsdCh0Ll9idXMsZSx0Ll91cmwsdC5fY2hpbGRyZW5zLCExKSl9fSx7a2V5OiJhZGRTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuX25ld1N1YnNjcmlwdGlvbihlKX19LHtrZXk6ImFkZENoaWxkcmVucyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obil7aWYoMD09PWUubGVuZ3RoKXJldHVybiBuKCk7dmFyIG89ci5fdXJsKyIvY2hpbGRyZW4vIjt2LmxvZygiW1N5bmNoZXJNYW5hZ2VyLk9ic2VydmVyT2JqZWN0IC0gYWRkQ2hpbGRyZW5zXSAtIGNoaWxkcmVuczogIixlLG8pLGUuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1yLl9idXMuYWRkTGlzdGVuZXIobytlLGZ1bmN0aW9uKGUpe2lmKAovL1RPRE86IHdoYXQgdG9kbyBoZXJlPyBTYXZlIGNoaWxkcmVucz8Kdi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCByZWNlaXZlZF0iLGUpLCJjcmVhdGUiPT09ZS50eXBlJiZlLnRvLmluY2x1ZGVzKCJjaGlsZHJlbiIpJiZ0Ll9pc1RvU2F2ZURhdGEpe3ZhciBvPSgwLHAuc3BsaXRPYmplY3RVUkwpKGUudG8pLGE9by51cmw7Ci8vcmVtb3ZlIGZhbHNlIHdoZW4gbXV0dWFsQXV0aGVudGljYXRpb24gaXMgZW5hYmxlZAoic3RyaW5nIiE9dHlwZW9mIGUuYm9keS52YWx1ZT8odi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdF0gZW5jcnlwdGluZyByZWNlaXZlZCBkYXRhICIsZS5ib2R5LnZhbHVlKSxyLl9wYXJlbnQuX2lkZW50aXR5TW9kdWxlLmVuY3J5cHREYXRhT2JqZWN0KGUuYm9keS52YWx1ZSxhKS50aGVuKGZ1bmN0aW9uKHQpe3YubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3RdIGVuY3J5cHRlZCBkYXRhICIsdCksci5fc3RvcmVDaGlsZE9iamVjdChlLCgwLGkuZGVmYXVsdCkodCkpfSkuY2F0Y2goZnVuY3Rpb24odCl7di53YXJuKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QuX2VuY3J5cHRDaGlsZF0gZmFpbGVkLCBzdG9yaW5nIHVuZW5jcnlwdGVkICIsdCksci5fc3RvcmVDaGlsZE9iamVjdChlLGUuYm9keS52YWx1ZSl9KSk6ci5fc3RvcmVDaGlsZE9iamVjdChlLGUuYm9keS52YWx1ZSl9di5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCBjaGlsZHJlbiBMaXN0ZW5lcnNdIixyLl9jaGlsZHJlbkxpc3RlbmVycyxuKSwtMT09PXIuX2NoaWxkcmVuTGlzdGVuZXJzLmluZGV4T2YobikmJnIuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobil9KX0pfSl9fSx7a2V5OiJfc3RvcmVDaGlsZE9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49KDAscC5zcGxpdE9iamVjdFVSTCkoZS50byksaT1uLnVybCxvPW4ucmVzb3VyY2UsYT17aWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LHZhbHVlOnR9OwovLyB0aGlzIGlkZW50aXR5IGRhdGEgaXMgbm90IG5lZWRlZCB0byBiZSBzdG9yZWQKZGVsZXRlIGEuaWRlbnRpdHkuYXNzZXJ0aW9uLGRlbGV0ZSBhLmlkZW50aXR5LmV4cGlyZXM7dmFyIHM9ZS5ib2R5LnJlc291cmNlLHU9bztzJiYodSs9Ii4iK3MpLHYubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QuX3N0b3JlQ2hpbGRPYmplY3RdIDogIixpLHUsYSksci5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZUNoaWxkcmVucyghMSxpLHUsYSl9fSx7a2V5OiJyZW1vdmVTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20sbj0oMCxwLmRpdmlkZVVSTCkocikuZG9tYWluLGk9dC5fdXJsKyIvc3Vic2NyaXB0aW9uIixvPXQuX3N1YnNjcmlwdGlvbnNbcl07byYmKAovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gcmVtb3RlIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVVuU3Vic2NyaWJlCnQuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToidW5zdWJzY3JpYmUiLGZyb206dC5fcGFyZW50Ll91cmwsdG86aSxib2R5Ontzb3VyY2U6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9fSksCi8vVE9ETzogc2hvdWxkIEkgd2FpdCBmb3IgcmVzcG9uc2UgYmVmb3JlIHVuc3Vic2NyaWJlIG9uIG1zZy1ub2RlCi8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byBtc2ctbm9kZSBTdWJzY3JpcHRpb25NYW5hZ2VyIGNvbXBvbmVudAp0Ll9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOnQuX3BhcmVudC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK24rIi9zbSIsYm9keTp7cmVzb3VyY2U6dC5fdXJsLGNoaWxkcmVuUmVzb3VyY2VzOnQuX2NoaWxkcmVuc319KSxvLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl0pfX0se2tleToiaXNUb1NhdmVEYXRhIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faXNUb1NhdmVEYXRhPWV9fV0pLE9ic2VydmVyT2JqZWN0fSgpO3QuZGVmYXVsdD1nLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDIwNSksaT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLG89cigxMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocyksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMTEpLGQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShsKSxwPXIoMTUpLHk9cig1MDYpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSx2PWQuZ2V0TG9nZ2VyKCJTdWJzY3JpcHRpb25NYW5hZ2VyIiksZz1mdW5jdGlvbigpe2Z1bmN0aW9uIFN1YnNjcmlwdGlvbk1hbmFnZXIoZSx0LHIpe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxTdWJzY3JpcHRpb25NYW5hZ2VyKSwhZSl0aHJvdyBuZXcgRXJyb3IoIltTdWJzY3JpcHRpb25NYW5hZ2VyXSAtIG5lZWRzIHRoZSBydW50aW1lVVJMIHBhcmFtZXRlciIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIC0gbmVlZHMgdGhlIE1lc3NhZ2VCdXMgaW5zdGFuY2UiKTt2YXIgbj10aGlzO24uX2J1cz10LG4uX3N0b3JhZ2U9cixuLl9zdWJzY3JpcHRpb25zPXt9LG4uX3N1YnNjcmlwdGlvbnNTdG9yYWdlPXt9LAovL1RPRE86IHRoZXNlIHNob3VsZCBiZSBzYXZlZCBpbiBwZXJzaXN0ZW5jZSBlbmdpbmU/Cm4ucnVudGltZVVSTD1lLG4uX3VybD1lKyIvc3Vic2NyaXB0aW9ucyIsCi8vVE9ETzogdGhpcyBzaG91bGQgbm90IGJlIGhhcmRjb2RlZCEKbi5fZG9tYWluPSgwLHAuZGl2aWRlVVJMKShlKS5kb21haW4sdC5hZGRMaXN0ZW5lcihuLl91cmwsZnVuY3Rpb24oZSl7c3dpdGNoKHYuaW5mbygiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIFJDVjogIixlKSxlLnR5cGUpe2Nhc2Uic3Vic2NyaWJlIjpuLl9vblN1YnNjcmliZShlKTticmVhaztjYXNlInVuc3Vic2NyaWJlIjpuLl9vblVuU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UicmVhZCI6bi5fb25SZWFkKGUpfX0pfXJldHVybigwLGYuZGVmYXVsdCkoU3Vic2NyaXB0aW9uTWFuYWdlcixbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHQpe2UuX3N0b3JhZ2UuZ2V0KCJzdWJzY3JpcHRpb25zIikudGhlbihmdW5jdGlvbihyKXt2LmxvZygiW1N1YnNjcmlwdGlvbk1hbmFnZXIuaW5pdF0gcmVzdW1lIHN1YnNjcmlwdGlvbnM6ICIsciksciYmKGUuX3N1YnNjcmlwdGlvbnNTdG9yYWdlPXIsKDAsaS5kZWZhdWx0KShyKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuX2NyZWF0ZVN1YnNjcmlwdGlvbih0LmRvbWFpbix0LnJlc291cmNlcyx0LnN1YnNjcmliZXIsdC5pZGVudGl0eSl9KSksdCgpfSl9KX19LHtrZXk6Il9vblN1YnNjcmliZSIsCi8vbWVzc2FnZSByZWNlaXZlZCB0byBzZXQgYSByb3V0aW5nIHBhdGgKdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZXMsbj1lLmZyb20saT0oMCxwLmRpdmlkZVVSTCkoclswXSkuZG9tYWluLG89ZS5ib2R5LmlkZW50aXR5O3QuX2NyZWF0ZVN1YnNjcmlwdGlvbihpLHIsbixvKS50aGVuKGZ1bmN0aW9uKGEpewovL2ZvcndhcmQgdG8gaHlwZXJ0eToKYS5pZD1lLmlkLGEuZnJvbT10Ll91cmwsYS50bz1uLGEuYm9keT1lLmJvZHksYS5ib2R5LmNvZGU9MjAwLHYubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gLSBjcmFldGVTdWJzY3JpcHRpb246ICIsZSxhLG4pLHQuX2J1cy5wb3N0TWVzc2FnZShhKSx0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtuXT9yLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbbl0ucmVzb3VyY2VzLmluY2x1ZGVzKGUpfHx0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtuXS5yZXNvdXJjZXMucHVzaChlKX0pOnQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW25dPXtkb21haW46aSxyZXNvdXJjZXM6cixzdWJzY3JpYmVyOm4saWRlbnRpdHk6b30sdC5fc3RvcmFnZS5zZXQoInN1YnNjcmlwdGlvbnMiLDEsdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2UpfSl9fSx7a2V5OiJfY3JlYXRlU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKG8pewovL0ZMT1ctT1VUOiBzdWJzY3JpYmUgbWVzc2FnZSB0byB0aGUgbXNnLW5vZGUsIHJlZ2lzdGVyaW5nIGxpc3RlbmVycyBvbiB0aGUgYnJva2VyCnZhciBhPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206aS5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK2UrIi9zbSIsYm9keTp7aWRlbnRpdHk6bixyZXNvdXJjZXM6dCxzb3VyY2U6cn19OwovL3N1YnNjcmliZSBpbiBtc2ctbm9kZQppLl9idXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXt2LmxvZygiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIG5vZGUtc3Vic2NyaWJlLXJlc3BvbnNlOiAiLGUpOwovL2lmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgey8vVE9ETzogdW5jb21tZW50IHdoZW4gIE1OIHJlcGxpZXMgd2l0aCBjb3JyZWN0IHJlc3BvbnNlIGJvZHkgY29kZQovL1RPRE86IHN1cHBvcnQgbXVsdGlwbGUgcm91dGVzIGZvciBtdWx0aXBsZSByZXNvdXJjZXMKdmFyIG49aS5fc3Vic2NyaXB0aW9uc1tyXTt2LmxvZygiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIC0gIixpLl9zdWJzY3JpcHRpb25zLHQsaS5fc3Vic2NyaXB0aW9ucy5oYXNPd25Qcm9wZXJ0eShyKSksbnx8KGkuX3N1YnNjcmlwdGlvbnNbcl09e30pLHQuZm9yRWFjaChmdW5jdGlvbihlKXtpLl9zdWJzY3JpcHRpb25zW3JdW2VdPW5ldyBoLmRlZmF1bHQoaS5fYnVzLHIsZSl9KSxvKGUpfSl9KX19LHtrZXk6Il9vblVuU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5mcm9tLG49ZS5ib2R5LnJlc291cmNlO2lmKHQuX3N1YnNjcmlwdGlvbnNbcl0mJnQuX3N1YnNjcmlwdGlvbnNbcl1bbl0pe3ZhciBpPSgwLHAuZGl2aWRlVVJMKShuKS5kb21haW4sbz10Ll9zdWJzY3JpcHRpb25zW3JdW25dO2lmKAovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gbXNnLW5vZGUgU3Vic2NyaXB0aW9uTWFuYWdlciBjb21wb25lbnQKdC5fYnVzLnBvc3RNZXNzYWdlKHt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTp0Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIraSsiL3NtIixib2R5OntyZXNvdXJjZXM6W25dLHNvdXJjZTpyfX0pLG8uX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgdC5fc3Vic2NyaXB0aW9uc1tyXVtuXSx0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtyXSl7dmFyIGE9dC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbcl0ucmVzb3VyY2VzLmluZGV4T2Yobik7LTEhPWEmJnQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW3JdLnJlc291cmNlcy5zcGxpY2UoYSwxKSx0Ll9zdG9yYWdlLnNldCgic3Vic2NyaXB0aW9ucyIsMSx0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZSl9fXQuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjIwMH19KX19LHtrZXk6Il9vblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2Usbj12b2lkIDA7di5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyXSAtIHJlcXVlc3QgdG8gcmVhZCBTdWJzY3JpcHRpb25zOiAiLGUpLHQuX3N0b3JhZ2UuZ2V0KCJzdWJzY3JpcHRpb25zIikudGhlbihmdW5jdGlvbihpKXtpZihpJiZpW3JdKXt2YXIgbz1pW3JdLnJlc291cmNlcztuPXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwLHZhbHVlOm99fX1lbHNlIG49e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZTo0MDQsZGVzY3JpcHRpb246Ik5vdCBGb3VuZCJ9fTt0Ll9idXMucG9zdE1lc3NhZ2Uobil9KX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19XSksU3Vic2NyaXB0aW9uTWFuYWdlcn0oKTt0LmRlZmF1bHQ9ZyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA1MDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxpPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksbz1yKDIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoMTEpLHU9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShzKSxjPXUuZ2V0TG9nZ2VyKCJTdWJzY3JpcHRpb24iKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gU3Vic2NyaXB0aW9uKGUsdCxyKXsoMCxpLmRlZmF1bHQpKHRoaXMsU3Vic2NyaXB0aW9uKTt2YXIgbj10aGlzO24uX3N1YnNjcmliZXI9dCxuLnJlc291cmNlPXIsYy5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyLlN1YnNjcmlwdGlvbl0gbmV3OiAiLHQsciksCi8vYWRkIGZvcndhcmQKbi5fbGlzdGVuZXI9ZS5hZGRGb3J3YXJkKHIsdCl9cmV0dXJuKDAsYS5kZWZhdWx0KShTdWJzY3JpcHRpb24sW3trZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2xpc3RlbmVyLnJlbW92ZSgpfX1dKSxTdWJzY3JpcHRpb259KCk7dC5kZWZhdWx0PWYsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTA3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNDYpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMTIpLGE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChvKSxzPXIoNjApLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChzKSxjPXIoMSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigyKSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDY4KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDY5KSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1yKDExKSxiPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oZyksbT1yKDIwMiksXz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLFI9cigyMDMpLHc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChSKSxTPXIoMTUpLE89cigyMDQpLFA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChPKSxrPXIoNTA4KSxNPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoayksTD1iLmdldExvZ2dlcigiUEVQIikseD1mdW5jdGlvbihlKXtmdW5jdGlvbiBSdW50aW1lQ29yZUN0eChlLHQscixuLGkpeygwLGYuZGVmYXVsdCkodGhpcyxSdW50aW1lQ29yZUN0eCk7dmFyIG89KDAseS5kZWZhdWx0KSh0aGlzLChSdW50aW1lQ29yZUN0eC5fX3Byb3RvX198fCgwLHUuZGVmYXVsdCkoUnVudGltZUNvcmVDdHgpKS5jYWxsKHRoaXMpKTtyZXR1cm4gby5fcnVudGltZVVSTD1lLG8uX3BlcFVSTD1vLl9ydW50aW1lVVJMKyIvcGVwIixvLl9ndWlVUkw9by5fcnVudGltZVVSTCsiL3BvbGljeS1ndWkiLG8uaWRNb2R1bGU9dCxvLnJ1bnRpbWVSZWdpc3RyeT1yLG8uYWN0aXZlVXNlclBvbGljeT12b2lkIDAsby5zZXJ2aWNlUHJvdmlkZXJQb2xpY3k9e30sby51c2VyUG9saWNpZXM9e30sby5zdG9yYWdlTWFuYWdlcj1uLG8ucnVudGltZUNhcGFiaWxpdGllcz1pLG99cmV0dXJuKDAsdi5kZWZhdWx0KShSdW50aW1lQ29yZUN0eCxlKSwoMCxkLmRlZmF1bHQpKFJ1bnRpbWVDb3JlQ3R4LFt7a2V5OiJsb2FkQ29uZmlndXJhdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbih0LHIpe2Uuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXRoaW5rOmFjdGl2ZVBvbGljeSIpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuYWN0aXZlVXNlclBvbGljeT10LGUuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXRoaW5rOmdyb3VwcyIpfSkudGhlbihmdW5jdGlvbih0KXt2YXIgcj10O3JldHVybiBlLmdyb3Vwcz12b2lkIDA9PT1yP3t9OnIsZS5zdG9yYWdlTWFuYWdlci5nZXQoInJldGhpbms6c3BQb2xpY2llcyIpfSkudGhlbihmdW5jdGlvbihyKXt2YXIgbj1yO2Uuc2VydmljZVByb3ZpZGVyUG9saWN5PXZvaWQgMD09PW4/e306bixlLl9sb2FkVXNlclBvbGljaWVzKCkudGhlbihmdW5jdGlvbigpe3QoKX0pfSl9KX19LHtrZXk6InByZXBhcmVGb3JFdmFsdWF0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24obixpKXt2YXIgbz1yO3Q/by5faXNUb0N5cGhlck1vZHVsZShlKT9vLmlkTW9kdWxlLmRlY3J5cHRNZXNzYWdlKGUpLnRoZW4oZnVuY3Rpb24oZSl7LyppZiAobWVzc2FnZS50eXBlID09PSAndXBkYXRlJykgewogICAgICAgICAgICAgICAgX3RoaXMuX2lzVmFsaWRVcGRhdGUobWVzc2FnZSkudGhlbihtZXNzYWdlID0+IHsqLwpuKGUpfSxmdW5jdGlvbihlKXtpKGUpfSk6bihlKToKLy8gbG9nLmxvZygnW1BvbGljeS5SdW50aW1lQ29yZUN0eCBwcmVwYXJlRm9yRXZhbHVhdGlvbl0nLCBtZXNzYWdlKTsKby5faXNUb1NldElEKGUpP28uX2dldElkZW50aXR5KGUpLnRoZW4oZnVuY3Rpb24odCl7ZS5ib2R5LmlkZW50aXR5PXQsbihlKX0sZnVuY3Rpb24oZSl7aShlKX0pOm4oZSl9KX19LHtrZXk6ImdldFBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXt9O3JldHVybiB2b2lkIDAhPT10aGlzLmFjdGl2ZVVzZXJQb2xpY3kmJihyLnVzZXJQb2xpY3k9dGhpcy51c2VyUG9saWNpZXNbdGhpcy5hY3RpdmVVc2VyUG9saWN5XSksci5zZXJ2aWNlUHJvdmlkZXJQb2xpY3k9dGhpcy5nZXRTZXJ2aWNlUHJvdmlkZXJQb2xpY3koZSx0KSxyfX0se2tleToiX2lzVmFsaWRVcGRhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlLmZyb20uc3BsaXQoIjovLyIpLmxlbmd0aD4xP3QuaWRNb2R1bGUuX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdChlLmZyb20pLnRoZW4oZnVuY3Rpb24odCl7dD09PWUuYm9keS5zb3VyY2U/cihlKTpuKCJUaGUgc291cmNlIG9mIHRoZSBtZXNzYWdlIGlzIG5vdCB2YWxpZC4iKX0sZnVuY3Rpb24oZSl7bihlKX0pOnIoZSl9KX19LHtrZXk6InByZXBhcmVUb0ZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9dGhpcztyZXR1cm4gbmV3IGEuZGVmYXVsdChmdW5jdGlvbihyLG8pewovLyBsb2cubG9nKCdbUG9saWN5LlJ1bnRpbWVDb3JlQ3R4LnByZXBhcmVUb0ZvcndhcmRdJywgbWVzc2FnZSk7Ci8vIGNvbW1lbnQgdGhpcyB0byBlbmFibGUgbXV0dWFsIGF1dGhlbnRpY2F0aW9uCi8vcmV0dXJuIHJlc29sdmUobWVzc2FnZSk7Ci8vIFRPRE8gcmVtb3ZlIHRoaXMgdmFsaWRhdGlvbi4gV2hlbiB0aGUgTm9kZWpzIGF1dGggd2FzIGNvbXBsZXRlZCB0aGlzIHNob3VsZCB3b3JrIGxpa2UgYnJvd3NlcjsKbi5ydW50aW1lQ2FwYWJpbGl0aWVzLmlzQXZhaWxhYmxlKCJub2RlIikudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygnW1J1bnRpbWVDb3JlQ3R4IC0gaXNBdmFpbGFibGUgLSBub2RlXSAtICcsIHJlc3VsdCk7CmlmKG58fGUuYm9keSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJtdXR1YWwiKSYmIWUuYm9keS5tdXR1YWwpcmV0dXJuIHIoZSk7aWYodCl7InN1YnNjcmliZSI9PT1lLnR5cGUmaS5pc0Zyb21SZW1vdGVTTShlLmZyb20pPwovLyBUT0RPOiBzaG91bGQgdmVyaWZ5IHdoeSB0aGUgbXV0dWFsQXV0aGVudGljYXRpb24gaXMgbm90IHdvcmtpbmcKLy8gVE9ETzogdGhpcyBzaG91bGQgdW5jb21tZW50ZWQKaS5kb011dHVhbEF1dGhlbnRpY2F0aW9uKGUpLnRoZW4oZnVuY3Rpb24oKXtyKGUpfSxmdW5jdGlvbihlKXtvKGUpfSk6cihlKX1lbHNlCi8vIFRPRE86IHNob3VsZCB2ZXJpZnkgd2h5IHRoZSBtdXR1YWxBdXRoZW50aWNhdGlvbiBpcyBub3Qgd29ya2luZwovLyBUT0RPOiB0aGlzIHNob3VsZCB1bmNvbW1lbnRlZAppLl9pc1RvQ3lwaGVyTW9kdWxlKGUpP2kuaWRNb2R1bGUuZW5jcnlwdE1lc3NhZ2UoZSkudGhlbihmdW5jdGlvbihlKXtyKGUpfSxmdW5jdGlvbihlKXtvKGUpfSk6cihlKX0pfSl9fSx7a2V5OiJkb011dHVhbEF1dGhlbnRpY2F0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9ZS50by5zcGxpdCgiLyIpO2lmKC0xIT09aS5pbmRleE9mKCJzdWJzY3JpcHRpb24iKSZ0LmlzRnJvbVJlbW90ZVNNKGUuZnJvbSkpe2kucG9wKCk7dmFyIG89aVswXSsiLy8iK2lbMl0rIi8iK2lbM107dC5pZE1vZHVsZS5kb011dHVhbEF1dGhlbnRpY2F0aW9uKG8sZS5ib2R5LnN1YnNjcmliZXIpLnRoZW4oZnVuY3Rpb24oKXt0LnJ1bnRpbWVSZWdpc3RyeS5yZWdpc3RlclN1YnNjcmliZXIobyxlLmJvZHkuc3Vic2NyaWJlcikscigpfSxmdW5jdGlvbihlKXtuKGUpfSl9fSl9fSx7a2V5OiJnZXRNeUVtYWlscyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlkTW9kdWxlLmdldElkZW50aXRpZXMoKSx0PVtdO2Zvcih2YXIgciBpbiBlKXQucHVzaCgoMCxTLmdldFVzZXJFbWFpbEZyb21VUkwpKGVbcl0uaWRlbnRpdHkpKTtyZXR1cm4gdH19LHtrZXk6ImdldE15SHlwZXJ0aWVzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucnVudGltZVJlZ2lzdHJ5Lmh5cGVydGllc0xpc3QsdD1bXTtmb3IodmFyIHIgaW4gZSl7dmFyIG49ZVtyXS5vYmplY3ROYW1lOy0xPT09dC5pbmRleE9mKG4pJiZ0LnB1c2gobil9cmV0dXJuIHR9fSx7a2V5OiJnZXRTZXJ2aWNlUHJvdmlkZXJQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwO2lmKHQpe3ZhciBuPXRoaXMucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlOYW1lKGUudG8pO3I9dGhpcy5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbbl19ZWxzZXt2YXIgaT10aGlzLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZShlLmZyb20pO3I9dGhpcy5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbaV19cmV0dXJuIHJ9fSx7a2V5OiJpc0Zyb21SZW1vdGVTTSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuInJ1bnRpbWUiPT09ZS5zcGxpdCgiOi8vIilbMF0mJmUhPT10aGlzLnJ1bnRpbWVSZWdpc3RyeS5ydW50aW1lVVJMKyIvc20ifX0se2tleToiaXNMb2NhbCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucnVudGltZVJlZ2lzdHJ5LmlzTG9jYWwoZSl9fSx7a2V5OiJpc0ludGVyd29ya2luZ1Byb3RvU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucnVudGltZVJlZ2lzdHJ5LmlzSW50ZXJ3b3JraW5nUHJvdG9TdHViKGUpfX0se2tleToiX2lzVG9TZXRJRCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9WyJkb21haW4taWRwIiwicnVudGltZSIsImRvbWFpbiJdLHI9ZS5mcm9tLnNwbGl0KCI6Ly8iKSxuPXJbMF0saT1lLmZyb207Ci8vIFNpZ25hbGxpbmcgTWVzc2FnZXMgYmV0d2VlbiBQMlAgU3R1YnMgZG9uJ3QgaGF2ZSBJZGVudGl0aWVzLiBGRlMKLy8gU2lnbmFsbGluZyBNZXNzYWdlcyBiZXR3ZWVuIFAyUCBTdHVicyBkb24ndCBoYXZlIElkZW50aXRpZXMuIEZGUwpyZXR1cm4gZS5ib2R5JiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInNvdXJjZSIpJiYoaT1lLmJvZHkuc291cmNlKSwhaS5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKSYmIWkuaW5jbHVkZXMoIi9wMnBoYW5kbGVyLyIpJiYtMT09PXQuaW5kZXhPZihuKX19LHtrZXk6ImdldFVSTCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpO3JldHVybiB0WzBdKyIvLyIrdFsyXSsiLyIrdFszXX19LHtrZXk6Il9nZXRJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mcm9tO3JldHVybiB2b2lkIDAhPT1lLmJvZHkuc291cmNlJiYodD1lLmJvZHkuc291cmNlKSwiZm9yd2FyZCI9PT1lLnR5cGUmJih0PWUuYm9keS5mcm9tKSx0aGlzLmlkTW9kdWxlLmdldFRva2VuKHQsZS50byl9fSx7a2V5OiJfaXNUb0N5cGhlck1vZHVsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7TC5sb2coIltQb2xpY3kuUnVudGltZUNvcmVDdHguaXN0b0NoeXBlck1vZHVsZV0iLGUpO3ZhciB0PSJjcmVhdGUiPT09ZS50eXBlLHI9Imh5cGVydHkiPT09KDAsUy5kaXZpZGVVUkwpKGUuZnJvbSkudHlwZSxuPSJoeXBlcnR5Ij09PSgwLFMuZGl2aWRlVVJMKShlLnRvKS50eXBlLGk9KDAsUy5pc0RhdGFPYmplY3RVUkwpKGUudG8pLG89IWUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIil8fGUuYm9keS5tdXR1YWw7cmV0dXJuIHQmJnImJm58fHQmJnImJmkmJm98fCJoYW5kc2hha2UiPT09ZS50eXBlfHwidXBkYXRlIj09PWUudHlwZSYmb319LHtrZXk6Il9sb2FkVXNlclBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzO3JldHVybiBuZXcgYS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5zdG9yYWdlTWFuYWdlci5nZXQoInJldGhpbms6dXNlclBvbGljaWVzIikudGhlbihmdW5jdGlvbih0KXt2YXIgbj10O2lmKHZvaWQgMCE9PW4pZm9yKHZhciBpIGluIG4pZS5wZXAuYWRkUG9saWN5KCJVU0VSIixpLG5baV0pO3IoKX0pfSl9fSx7a2V5OiJfZ2V0TGFzdENvbXBvbmVudE9mVVJMIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KCIvIik7cmV0dXJuIHRbdC5sZW5ndGgtMV19fSx7a2V5OiJfZ2V0UG9saWNpZXNKU09OIix2YWx1ZTpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl7dmFyIHI9ZVt0XS5jb21iaW5pbmdBbGdvcml0aG07ciBpbnN0YW5jZW9mIHcuZGVmYXVsdD9lW3RdLmNvbWJpbmluZ0FsZ29yaXRobT0iYmxvY2tPdmVycmlkZXMiOnIgaW5zdGFuY2VvZiBfLmRlZmF1bHQ/ZVt0XS5jb21iaW5pbmdBbGdvcml0aG09ImFsbG93T3ZlcnJpZGVzIjpyIGluc3RhbmNlb2YgUC5kZWZhdWx0P2VbdF0uY29tYmluaW5nQWxnb3JpdGhtPSJmaXJzdEFwcGxpY2FibGUiOmVbdF0uY29tYmluaW5nQWxnb3JpdGhtPXZvaWQgMH1yZXR1cm4gZX19LHtrZXk6InNhdmVBY3RpdmVQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazphY3RpdmVQb2xpY3kiLDAsZS5hY3RpdmVVc2VyUG9saWN5KS50aGVuKGZ1bmN0aW9uKCl7cigpfSl9KX19LHtrZXk6InNhdmVHcm91cHMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyBhLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazpncm91cHMiLDAsZS5ncm91cHMpLnRoZW4oZnVuY3Rpb24oKXtyKCl9KX0pfX0se2tleToic2F2ZVBvbGljaWVzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dm9pZCAwO3N3aXRjaChlKXtjYXNlIlVTRVIiOm49KDAsaS5kZWZhdWx0KSh0aGlzLnVzZXJQb2xpY2llcyksbj10aGlzLl9nZXRQb2xpY2llc0pTT04oSlNPTi5wYXJzZShuKSksdGhpcy5zdG9yYWdlTWFuYWdlci5zZXQoInJldGhpbms6dXNlclBvbGljaWVzIiwwLG4pO2JyZWFrO2Nhc2UiU0VSVklDRV9QUk9WSURFUiI6dm9pZCAwIT09dCZ2b2lkIDAhPT1yJiYodGhpcy5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbcl09dCksbj0oMCxpLmRlZmF1bHQpKHRoaXMuc2VydmljZVByb3ZpZGVyUG9saWN5KSxuPXRoaXMuX2dldFBvbGljaWVzSlNPTihKU09OLnBhcnNlKG4pKSx0aGlzLnN0b3JhZ2VNYW5hZ2VyLnNldCgicmV0aGluazpzcFBvbGljaWVzIiwwLG4pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gcG9saWN5IHNvdXJjZTogIitlKX19fSx7a2V5OiJnZXRHcm91cHNOYW1lcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3Vwcyx0PVtdO2lmKHZvaWQgMCE9PWUpZm9yKHZhciByIGluIGUpdC5wdXNoKHIpO3JldHVybiB0fX0se2tleToiZ2V0R3JvdXAiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9W107aWYoInByZWF1dGhvcmlzZWQiPT09ZSl7dmFyIG49dC5zcGxpdCgiLyIpO24ucG9wKCksbj1uWzBdKyIvLyIrblsyXSxyPXRoaXMucnVudGltZVJlZ2lzdHJ5LmdldFByZUF1dGhTdWJzY3JpYmVycyhuKX1lbHNlIHZvaWQgMCE9PXRoaXMuZ3JvdXBzW2VdJiYocj10aGlzLmdyb3Vwc1tlXSk7cmV0dXJuIHJ9fSx7a2V5OiJjcmVhdGVHcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ncm91cHNbZV09W10sdGhpcy5zYXZlR3JvdXBzKCl9fSx7a2V5OiJkZWxldGVHcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuZ3JvdXBzW2VdLHRoaXMuc2F2ZUdyb3VwcygpfX0se2tleToiYWRkVG9Hcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyb3VwcztpZih2b2lkIDA9PT1yW2VdKXRocm93IEVycm9yKCdHcm91cCAiJytlKyciIGRvZXMgbm90IGV4aXN0IScpOy0xPT09cltlXS5pbmRleE9mKHQpJiYocltlXS5wdXNoKHQpLHRoaXMuc2F2ZUdyb3VwcygpKX19LHtrZXk6InJlbW92ZUZyb21Hcm91cCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdyb3Vwc1tlXTtyLnNwbGljZShyLmluZGV4T2YodCksMSksdGhpcy5zYXZlR3JvdXBzKCl9fSx7a2V5OiJwZXBVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wZXBVUkx9fSx7a2V5OiJndWlVUkwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ndWlVUkx9fSx7a2V5OiJydW50aW1lVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZVVSTH19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUJ1cz1lfX0se2tleToic3Vic2NyaXB0aW9uIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fc3Vic2NyaXB0aW9uPWUubWVzc2FnZS5ib2R5LnN1YnNjcmliZXJ9fV0pLFJ1bnRpbWVDb3JlQ3R4fShNLmRlZmF1bHQpO3QuZGVmYXVsdD14LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLGk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxvPXIoMiksYT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG8pLHM9cigxNSksdT1mdW5jdGlvbigpe2Z1bmN0aW9uIFJlVGhpbmtDdHgoKXsoMCxpLmRlZmF1bHQpKHRoaXMsUmVUaGlua0N0eCksdGhpcy5kZWZhdWx0QmVoYXZpb3VyPSEwLHRoaXMuZ3JvdXBzPXt9fXJldHVybigwLGEuZGVmYXVsdCkoUmVUaGlua0N0eCxbe2tleToic2NoZW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZW1lfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlLmZyb207KDAscy5pc0RhdGFPYmplY3RVUkwpKHQpP3RoaXMuX3NjaGVtZT0oMCxzLmRpdmlkZVVSTCkodCkudHlwZTp0aGlzLl9zY2hlbWU9dm9pZCAwfX0se2tleToiZGF0ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGV9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgRGF0ZSxyPVN0cmluZyh0LmdldERhdGUoKSk7MT09PXIubGVuZ3RoJiYocj0iMCIrcik7dmFyIG49U3RyaW5nKHQuZ2V0TW9udGgoKSsxKTsxPT09bi5sZW5ndGgmJihuPSIwIituKSx0aGlzLl9kYXRlPXIrIi8iK24rIi8iK3QuZ2V0RnVsbFllYXIoKX19LHtrZXk6ImRvbWFpbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbWFpbn0sc2V0OmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUubWVzc2FnZS5ib2R5LmlkZW50aXR5JiYodGhpcy5fZG9tYWluPSgwLHMuZGl2aWRlRW1haWwpKGUubWVzc2FnZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJuYW1lKS5kb21haW4pfX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1lLm1lc3NhZ2U7dm9pZCAwIT09dC5ib2R5LnZhbHVlJiYodGhpcy5fdHlwZT10LmJvZHkudmFsdWUucmVzb3VyY2VUeXBlKX19LHtrZXk6InNvdXJjZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX0sc2V0OmZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUubWVzc2FnZS5ib2R5LmlkZW50aXR5JiYodGhpcy5fc291cmNlPWUubWVzc2FnZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJuYW1lKX19LHtrZXk6InRpbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lfSxzZXQ6ZnVuY3Rpb24oZSl7ZT1uZXcgRGF0ZTt2YXIgdD1TdHJpbmcoZS5nZXRNaW51dGVzKCkpOzE9PT10Lmxlbmd0aCYmKHQ9IjAiK3QpLHRoaXMuX3RpbWU9cGFyc2VJbnQoU3RyaW5nKGUuZ2V0SG91cnMoKSkrdCl9fSx7a2V5OiJ3ZWVrZGF5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2Vla2RheX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3dlZWtkYXk9U3RyaW5nKChuZXcgRGF0ZSkuZ2V0RGF5KCkpfX1dKSxSZVRoaW5rQ3R4fSgpO3QuZGVmYXVsdD11LGUuZXhwb3J0cz10LmRlZmF1bHR9XSl9KTs=",
      "sourceCodeClassname": "Runtime",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": "3bc366f2d0ba3d681e7a3899917c5d3de",
    "type": "Runtimes",
    "version": "34.90",
    "description": "Description of Runtime",
    "objectName": "Runtime",
    "configuration": {},
    "runtimeType": "browser",
    "hypertyCapabilities": {
      "mic": true,
      "camera": true,
      "sensor": false,
      "webrtc": true,
      "ortc": true
    },
    "protocolCapabilities": {
      "http": true,
      "https": true,
      "ws": true,
      "wss": true,
      "coap": false,
      "datachannel": false
    },
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy",
    "p2pHandlerStub": "hyperty-catalogue://catalogue.localhost/.well-known/protocolstub/P2PHandlerProtoStub",
    "p2pRequesterStub": "hyperty-catalogue://catalogue.localhost/.well-known/protocolstub/P2PRequesterProtoStub",
    "constraints": {
      "browser": true,
      "mic": true,
      "camera": true,
      "sensor": false,
      "webrtc": true,
      "ortc": true,
      "http": true,
      "https": true,
      "ws": true,
      "wss": true,
      "coap": false,
      "datachannel": false
    }
  }
}