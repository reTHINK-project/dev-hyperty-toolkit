{
  "Runtime": {
    "sourcePackage": {
      "sourceCode": "Ly8gdmVyc2lvbjogMC4xMi4wCi8vIGRhdGU6IFdlZCBKdWwgMjUgMjAxOCAxNjo1MTozMSBHTVQrMDEwMCAoV0VTVCkKLy8gbGljZW5jZTogCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKCiFmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKCJSdW50aW1lIixbXSx0KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5SdW50aW1lPXQoKTplLlJ1bnRpbWU9dCgpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLGZ1bmN0aW9uKCl7LyoqKioqKi8KcmV0dXJuIGZ1bmN0aW9uKGUpey8qKioqKiovCi8qKioqKiovCi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovCmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18ocil7LyoqKioqKi8KLyoqKioqKi8KLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovCmlmKHRbcl0pLyoqKioqKi8KcmV0dXJuIHRbcl0uZXhwb3J0czsvKioqKioqLwovLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLwp2YXIgbj10W3JdPXsvKioqKioqLwppOnIsLyoqKioqKi8KbDohMSwvKioqKioqLwpleHBvcnRzOnt9fTsvKioqKioqLwovKioqKioqLwovLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLwpyZXR1cm4gZVtyXS5jYWxsKG4uZXhwb3J0cyxuLG4uZXhwb3J0cyxfX3dlYnBhY2tfcmVxdWlyZV9fKSxuLmw9ITAsbi5leHBvcnRzfS8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8KLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLwp2YXIgdD17fTsvKioqKioqLwovKioqKioqLwovLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8KLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovCi8qKioqKiovCi8qKioqKiovCi8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLwovKioqKioqLwovKioqKioqLwovLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwovKioqKioqLwpyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXy5tPWUsX193ZWJwYWNrX3JlcXVpcmVfXy5jPXQsX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGUsdCxyKXsvKioqKioqLwpfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZSx0KXx8LyoqKioqKi8KT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7LyoqKioqKi8KY29uZmlndXJhYmxlOiExLC8qKioqKiovCmVudW1lcmFibGU6ITAsLyoqKioqKi8KZ2V0OnJ9KX0sX193ZWJwYWNrX3JlcXVpcmVfXy5uPWZ1bmN0aW9uKGUpey8qKioqKiovCnZhciB0PWUmJmUuX19lc01vZHVsZT8vKioqKioqLwpmdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9Oi8qKioqKiovCmZ1bmN0aW9uKCl7cmV0dXJuIGV9Oy8qKioqKiovCi8qKioqKiovCnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmQodCwiYSIsdCksdH0sX193ZWJwYWNrX3JlcXVpcmVfXy5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxfX3dlYnBhY2tfcmVxdWlyZV9fLnA9IiIsX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnM9MjEyKX0oWy8qIDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCksbz1yKDI3KSxpPXIoMTgpLHM9cigxOSksYT1yKDI4KSx1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyxmLGwsZCxwPWUmdS5GLHk9ZSZ1LkcsaD1lJnUuUyx2PWUmdS5QLGc9ZSZ1LkIsYj15P246aD9uW3RdfHwoblt0XT17fSk6KG5bdF18fHt9KS5wcm90b3R5cGUsXz15P286b1t0XXx8KG9bdF09e30pLG09Xy5wcm90b3R5cGV8fChfLnByb3RvdHlwZT17fSk7eSYmKHI9dCk7Zm9yKGMgaW4gcikKLy8gY29udGFpbnMgaW4gbmF0aXZlCmY9IXAmJmImJnZvaWQgMCE9PWJbY10sCi8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkCmw9KGY/YjpyKVtjXSwKLy8gYmluZCB0aW1lcnMgdG8gZ2xvYmFsIGZvciBjYWxsIGZyb20gZXhwb3J0IGNvbnRleHQKZD1nJiZmP2EobCxuKTp2JiYiZnVuY3Rpb24iPT10eXBlb2YgbD9hKEZ1bmN0aW9uLmNhbGwsbCk6bCwKLy8gZXh0ZW5kIGdsb2JhbApiJiZzKGIsYyxsLGUmdS5VKSwKLy8gZXhwb3J0Cl9bY10hPWwmJmkoXyxjLGQpLHYmJm1bY10hPWwmJihtW2NdPWwpfTtuLmNvcmU9bywKLy8gdHlwZSBiaXRtYXAKdS5GPTEsLy8gZm9yY2VkCnUuRz0yLC8vIGdsb2JhbAp1LlM9NCwvLyBzdGF0aWMKdS5QPTgsLy8gcHJvdG8KdS5CPTE2LC8vIGJpbmQKdS5XPTMyLC8vIHdyYXAKdS5VPTY0LC8vIHNhZmUKdS5SPTEyOCwvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgCmUuZXhwb3J0cz11fSwvKiAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwLHQuZGVmYXVsdD1mdW5jdGlvbihlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpfX0sLyogMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQ0MCksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoZSx0KXtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG49dFtyXTtuLmVudW1lcmFibGU9bi5lbnVtZXJhYmxlfHwhMSxuLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gbiYmKG4ud3JpdGFibGU9ITApLCgwLG8uZGVmYXVsdCkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdCYmZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSx0KSxyJiZkZWZpbmVQcm9wZXJ0aWVzKGUsciksZX19KCl9LC8qIDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LC8qIDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKdmFyIHI9ZS5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPXIpfSwvKiA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4hIWUoKX1jYXRjaChlKXtyZXR1cm4hMH19fSwvKiA2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LC8qIDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG87LyoKKiBsb2dsZXZlbCAtIGh0dHBzOi8vZ2l0aHViLmNvbS9waW10ZXJyeS9sb2dsZXZlbAoqCiogQ29weXJpZ2h0IChjKSAyMDEzIFRpbSBQZXJyeQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KKi8KIWZ1bmN0aW9uKGkscyl7InVzZSBzdHJpY3QiO249cyx2b2lkIDAhPT0obz0iZnVuY3Rpb24iPT10eXBlb2Ygbj9uLmNhbGwodCxyLHQsZSk6bikmJihlLmV4cG9ydHM9byl9KDAsZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8vIENyb3NzLWJyb3dzZXIgYmluZCBlcXVpdmFsZW50IHRoYXQgd29ya3MgYXQgbGVhc3QgYmFjayB0byBJRTYKZnVuY3Rpb24gYmluZE1ldGhvZChlLHQpe3ZhciByPWVbdF07aWYoImZ1bmN0aW9uIj09dHlwZW9mIHIuYmluZClyZXR1cm4gci5iaW5kKGUpO3RyeXtyZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChyLGUpfWNhdGNoKHQpewovLyBNaXNzaW5nIGJpbmQgc2hpbSBvciBJRTggKyBNb2Rlcm5penIsIGZhbGxiYWNrIHRvIHdyYXBwaW5nCnJldHVybiBmdW5jdGlvbigpe3JldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuYXBwbHkocixbZSxhcmd1bWVudHNdKX19fQovLyBCdWlsZCB0aGUgYmVzdCBsb2dnaW5nIG1ldGhvZCBwb3NzaWJsZSBmb3IgdGhpcyBlbnYKLy8gV2hlcmV2ZXIgcG9zc2libGUgd2Ugd2FudCB0byBiaW5kLCBub3Qgd3JhcCwgdG8gcHJlc2VydmUgc3RhY2sgdHJhY2VzCmZ1bmN0aW9uIHJlYWxNZXRob2Qocil7cmV0dXJuImRlYnVnIj09PXImJihyPSJsb2ciKSx0eXBlb2YgY29uc29sZSE9PXQmJih2b2lkIDAhPT1jb25zb2xlW3JdP2JpbmRNZXRob2QoY29uc29sZSxyKTp2b2lkIDAhPT1jb25zb2xlLmxvZz9iaW5kTWV0aG9kKGNvbnNvbGUsImxvZyIpOmUpfQovLyBUaGVzZSBwcml2YXRlIGZ1bmN0aW9ucyBhbHdheXMgbmVlZCBgdGhpc2AgdG8gYmUgc2V0IHByb3Blcmx5CmZ1bmN0aW9uIHJlcGxhY2VMb2dnaW5nTWV0aG9kcyh0LG4pey8qanNoaW50IHZhbGlkdGhpczp0cnVlICovCmZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO3RoaXNbaV09bzx0P2U6dGhpcy5tZXRob2RGYWN0b3J5KGksdCxuKX0KLy8gRGVmaW5lIGxvZy5sb2cgYXMgYW4gYWxpYXMgZm9yIGxvZy5kZWJ1Zwp0aGlzLmxvZz10aGlzLmRlYnVnfQovLyBJbiBvbGQgSUUgdmVyc2lvbnMsIHRoZSBjb25zb2xlIGlzbid0IHByZXNlbnQgdW50aWwgeW91IGZpcnN0IG9wZW4gaXQuCi8vIFdlIGJ1aWxkIHJlYWxNZXRob2QoKSByZXBsYWNlbWVudHMgaGVyZSB0aGF0IHJlZ2VuZXJhdGUgbG9nZ2luZyBtZXRob2RzCmZ1bmN0aW9uIGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMoZSxyLG4pe3JldHVybiBmdW5jdGlvbigpe3R5cGVvZiBjb25zb2xlIT09dCYmKHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHRoaXMscixuKSx0aGlzW2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9fQovLyBCeSBkZWZhdWx0LCB3ZSB1c2UgY2xvc2VseSBib3VuZCByZWFsIG1ldGhvZHMgd2hlcmV2ZXIgcG9zc2libGUsIGFuZAovLyBvdGhlcndpc2Ugd2Ugd2FpdCBmb3IgYSBjb25zb2xlIHRvIGFwcGVhciwgYW5kIHRoZW4gdHJ5IGFnYWluLgpmdW5jdGlvbiBkZWZhdWx0TWV0aG9kRmFjdG9yeShlLHQscil7Lypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KcmV0dXJuIHJlYWxNZXRob2QoZSl8fGVuYWJsZUxvZ2dpbmdXaGVuQ29uc29sZUFycml2ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIExvZ2dlcihlLG4sbyl7ZnVuY3Rpb24gcGVyc2lzdExldmVsSWZQb3NzaWJsZShlKXt2YXIgbj0ocltlXXx8InNpbGVudCIpLnRvVXBwZXJDYXNlKCk7aWYodHlwZW9mIHdpbmRvdyE9PXQpewovLyBVc2UgbG9jYWxTdG9yYWdlIGlmIGF2YWlsYWJsZQp0cnl7cmV0dXJuIHZvaWQod2luZG93LmxvY2FsU3RvcmFnZVthXT1uKX1jYXRjaChlKXt9Ci8vIFVzZSBzZXNzaW9uIGNvb2tpZSBhcyBmYWxsYmFjawp0cnl7d2luZG93LmRvY3VtZW50LmNvb2tpZT1lbmNvZGVVUklDb21wb25lbnQoYSkrIj0iK24rIjsifWNhdGNoKGUpe319fWZ1bmN0aW9uIGdldFBlcnNpc3RlZExldmVsKCl7dmFyIGU7aWYodHlwZW9mIHdpbmRvdyE9PXQpe3RyeXtlPXdpbmRvdy5sb2NhbFN0b3JhZ2VbYV19Y2F0Y2goZSl7fQovLyBGYWxsYmFjayB0byBjb29raWVzIGlmIGxvY2FsIHN0b3JhZ2UgZ2l2ZXMgdXMgbm90aGluZwppZih0eXBlb2YgZT09PXQpdHJ5e3ZhciByPXdpbmRvdy5kb2N1bWVudC5jb29raWUsbj1yLmluZGV4T2YoZW5jb2RlVVJJQ29tcG9uZW50KGEpKyI9Iik7LTEhPT1uJiYoZT0vXihbXjtdKykvLmV4ZWMoci5zbGljZShuKSlbMV0pfWNhdGNoKGUpe30KLy8gSWYgdGhlIHN0b3JlZCBsZXZlbCBpcyBub3QgdmFsaWQsIHRyZWF0IGl0IGFzIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC4KcmV0dXJuIHZvaWQgMD09PXMubGV2ZWxzW2VdJiYoZT12b2lkIDApLGV9fXZhciBpLHM9dGhpcyxhPSJsb2dsZXZlbCI7ZSYmKGErPSI6IitlKSwvKgogICAgICAgKgogICAgICAgKiBQdWJsaWMgbG9nZ2VyIEFQSSAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGltdGVycnkvbG9nbGV2ZWwgZm9yIGRldGFpbHMKICAgICAgICoKICAgICAgICovCnMubmFtZT1lLHMubGV2ZWxzPXtUUkFDRTowLERFQlVHOjEsSU5GTzoyLFdBUk46MyxFUlJPUjo0LFNJTEVOVDo1fSxzLm1ldGhvZEZhY3Rvcnk9b3x8ZGVmYXVsdE1ldGhvZEZhY3Rvcnkscy5nZXRMZXZlbD1mdW5jdGlvbigpe3JldHVybiBpfSxzLnNldExldmVsPWZ1bmN0aW9uKHIsbil7aWYoInN0cmluZyI9PXR5cGVvZiByJiZ2b2lkIDAhPT1zLmxldmVsc1tyLnRvVXBwZXJDYXNlKCldJiYocj1zLmxldmVsc1tyLnRvVXBwZXJDYXNlKCldKSwhKCJudW1iZXIiPT10eXBlb2YgciYmcj49MCYmcjw9cy5sZXZlbHMuU0lMRU5UKSl0aHJvdyJsb2cuc2V0TGV2ZWwoKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGxldmVsOiAiK3I7aWYoaT1yLCExIT09biYmLy8gZGVmYXVsdHMgdG8gdHJ1ZQpwZXJzaXN0TGV2ZWxJZlBvc3NpYmxlKHIpLHJlcGxhY2VMb2dnaW5nTWV0aG9kcy5jYWxsKHMscixlKSx0eXBlb2YgY29uc29sZT09PXQmJnI8cy5sZXZlbHMuU0lMRU5UKXJldHVybiJObyBjb25zb2xlIGF2YWlsYWJsZSBmb3IgbG9nZ2luZyJ9LHMuc2V0RGVmYXVsdExldmVsPWZ1bmN0aW9uKGUpe2dldFBlcnNpc3RlZExldmVsKCl8fHMuc2V0TGV2ZWwoZSwhMSl9LHMuZW5hYmxlQWxsPWZ1bmN0aW9uKGUpe3Muc2V0TGV2ZWwocy5sZXZlbHMuVFJBQ0UsZSl9LHMuZGlzYWJsZUFsbD1mdW5jdGlvbihlKXtzLnNldExldmVsKHMubGV2ZWxzLlNJTEVOVCxlKX07Ci8vIEluaXRpYWxpemUgd2l0aCB0aGUgcmlnaHQgbGV2ZWwKdmFyIHU9Z2V0UGVyc2lzdGVkTGV2ZWwoKTtudWxsPT11JiYodT1udWxsPT1uPyJXQVJOIjpuKSxzLnNldExldmVsKHUsITEpfQovLyBTbGlnaHRseSBkdWJpb3VzIHRyaWNrcyB0byBjdXQgZG93biBtaW5pbWl6ZWQgZmlsZSBzaXplCnZhciBlPWZ1bmN0aW9uKCl7fSx0PSJ1bmRlZmluZWQiLHI9WyJ0cmFjZSIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciJdLG49bmV3IExvZ2dlcixvPXt9O24uZ2V0TG9nZ2VyPWZ1bmN0aW9uKGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8IiI9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIllvdSBtdXN0IHN1cHBseSBhIG5hbWUgd2hlbiBjcmVhdGluZyBhIGxvZ2dlci4iKTt2YXIgdD1vW2VdO3JldHVybiB0fHwodD1vW2VdPW5ldyBMb2dnZXIoZSxuLmdldExldmVsKCksbi5tZXRob2RGYWN0b3J5KSksdH07Ci8vIEdyYWIgdGhlIGN1cnJlbnQgZ2xvYmFsIGxvZyB2YXJpYWJsZSBpbiBjYXNlIG9mIG92ZXJ3cml0ZQp2YXIgaT10eXBlb2Ygd2luZG93IT09dD93aW5kb3cubG9nOnZvaWQgMDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHR5cGVvZiB3aW5kb3chPT10JiZ3aW5kb3cubG9nPT09biYmKHdpbmRvdy5sb2c9aSksbn0sbi5nZXRMb2dnZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIG99LG59KX0sLyogOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDIwKSxfX2VzTW9kdWxlOiEwfX0sLyogOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig3OSkoIndrcyIpLG89cig0OCksaT1yKDQpLlN5bWJvbCxzPSJmdW5jdGlvbiI9PXR5cGVvZiBpOyhlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPXMmJmlbZV18fChzP2k6bykoIlN5bWJvbC4iK2UpKX0pLnN0b3JlPW59LC8qIDEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eQplLmV4cG9ydHM9IXIoNSkoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwvKiAxMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzKSxvPXIoMTQ4KSxpPXIoMzIpLHM9T2JqZWN0LmRlZmluZVByb3BlcnR5O3QuZj1yKDEwKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdD1pKHQsITApLG4ociksbyl0cnl7cmV0dXJuIHMoZSx0LHIpfWNhdGNoKGUpe31pZigiZ2V0ImluIHJ8fCJzZXQiaW4gcil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiByJiYoZVt0XT1yLnZhbHVlKSxlfX0sLyogMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIG49cigzNCksbz1NYXRoLm1pbjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+MD9vKG4oZSksOTAwNzE5OTI1NDc0MDk5MSk6MH19LC8qIDEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPXt2ZXJzaW9uOiIyLjUuNyJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPXIpfSwvKiAxNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fS8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwovKioKICogQHR5cGVkZWYgZGl2aWRlVVJMCiAqIEB0eXBlIE9iamVjdAogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTAogKi8KLyoqCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcwogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAqLwpmdW5jdGlvbiBkaXZpZGVVUkwoZSl7ZnVuY3Rpb24gcmVjdXJzZShlKXt2YXIgdD0vKFthLXpBLVotXSopKDpcL1wvKD86XC4pP3w6KShbLWEtekEtWjAtOUA6JS5fK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fK34jPVwvXSopL2dpO3JldHVybiBlLnJlcGxhY2UodCwiJDEsJDMsJDQiKS5zcGxpdCgiLCIpfXZhciB0PXJlY3Vyc2UoZSk7Ci8vIElmIHRoZSB1cmwgaGFzIG5vIHNjaGVtZQppZih0WzBdPT09ZSYmIXRbMF0uaW5jbHVkZXMoIkAiKSl7cmV0dXJue3R5cGU6IiIsZG9tYWluOmUsaWRlbnRpdHk6IiJ9fQovLyBjaGVjayBpZiB0aGUgdXJsIGhhcyB0aGUgc2NoZW1lIGFuZCBpbmNsdWRlcyBhbiBACmlmKHRbMF09PT1lJiZ0WzBdLmluY2x1ZGVzKCJAIikpe3Q9cmVjdXJzZSgodFswXT09PWU/InNtdHAiOnRbMF0pKyI6Ly8iK3RbMF0pfQovLyBpZiB0aGUgZG9tYWluIGluY2x1ZGVzIGFuIEAsIGRpdmlkZSBpdCB0byBkb21haW4gYW5kIGlkZW50aXR5IHJlc3BlY3RpdmVseQpyZXR1cm4gdFsxXS5pbmNsdWRlcygiQCIpJiYodFsyXT10WzBdKyI6Ly8iK3RbMV0sdFsxXT10WzFdLnN1YnN0cih0WzFdLmluZGV4T2YoIkAiKSsxKSkse3R5cGU6dFswXSxkb21haW46dFsxXSxpZGVudGl0eTp0WzJdfX0vKioKICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5CiAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IE9iamVjdCB0byBiZSBjaGVja2VkCiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7CiAqLwpmdW5jdGlvbiBlbXB0eU9iamVjdChlKXtyZXR1cm4hKCgwLHMuZGVmYXVsdCkoZSkubGVuZ3RoPjApfWZ1bmN0aW9uIHNlY29uZHNTaW5jZUVwb2NoKCl7cmV0dXJuIE1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpfS8qKgogKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YQogKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkCiAqIEByZXR1cm4ge09iamVjdH0KICovCmZ1bmN0aW9uIGRlZXBDbG9uZShlKXsKLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgppZihlKXJldHVybiBKU09OLnBhcnNlKCgwLG8uZGVmYXVsdCkoZSkpfWZ1bmN0aW9uIHJlbW92ZVBhdGhGcm9tVVJMKGUpe3ZhciB0PWUuc3BsaXQoIi8iKTtyZXR1cm4gdFswXSsiLy8iK3RbMl0rIi8iK3RbM119LyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbAogKiBAcGFyYW0gIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKi8KZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm4idXNlcjovLyIrZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKSsiLyIrZS5zdWJzdHJpbmcoMCx0KX0vKioKICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCiAqIEByZXR1cm4ge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCiAqLwpmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKGUpe3ZhciB0PWRpdmlkZVVSTChlKTtyZXR1cm4gdC5pZGVudGl0eS5yZXBsYWNlKCIvIiwiIikrIkAiK3QuZG9tYWlufS8qKgogKiBDaGVjayBpZiB0aGUgdXNlciBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIFVSTCBmb3JtYXQsIGlmIG5vdCwgY29udmVydCB0byBVUkwgZm9ybWF0CiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXIKICogQHJldHVybiB7c3RyaW5nfSAgIHVzZXJVUkwgICAgdGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9Vc2VyVVJMKGUpewovLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0CmlmKCJ1c2VyOi8vIj09PWUuc3Vic3RyaW5nKDAsNykpe3ZhciB0PWRpdmlkZVVSTChlKTsKLy9jaGVjayBpZiB0aGUgdXJsIGlzIHdlbGwgZm9ybWF0ZWQKaWYodC5kb21haW4mJnQuaWRlbnRpdHkpcmV0dXJuIGU7dGhyb3cidXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCJ9cmV0dXJuIGdldFVzZXJVUkxGcm9tRW1haWwoZSl9ZnVuY3Rpb24gaXNEYXRhT2JqZWN0VVJMKGUpe3ZhciB0PVsiZG9tYWluLWlkcCIsInJ1bnRpbWUiLCJkb21haW4iLCJoeXBlcnR5Il0scj1lLnNwbGl0KCI6Ly8iKSxuPXJbMF07cmV0dXJuLTE9PT10LmluZGV4T2Yobil9ZnVuY3Rpb24gaXNMZWdhY3koZSl7cmV0dXJuIGUuc3BsaXQoIkAiKS5sZW5ndGg+MX1mdW5jdGlvbiBpc1VSTChlKXtyZXR1cm4gZS5zcGxpdCgiLyIpLmxlbmd0aD49M31mdW5jdGlvbiBpc1VzZXJVUkwoZSl7cmV0dXJuInVzZXIiPT09ZGl2aWRlVVJMKGUpLnR5cGV9ZnVuY3Rpb24gaXNIeXBlcnR5VVJMKGUpe3JldHVybiJoeXBlcnR5Ij09PWRpdmlkZVVSTChlKS50eXBlfS8qKgogKiBnZXQgaW5mb3JtYXRpb24gcmVsYXRpdmUgZWFjaCBjb21wb25lbnQgY29uZmlndXJlZCBvbiBydW50aW1lIGNvbmZpZ3VyYXRpb247CiAqIEBwYXJhbSAge29iamVjdH0gY29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCBhbGwgY29uZmlndXJhdGlvbgogKiBAcGFyYW0gIHtzdHJpbmd9IGNvbXBvbmVudCAgICAgc3RyaW5nIHdpdGggdGhlIGNvbXBvbmVudCB0byBnZXQgdGhlIGNvbmZpZ3VyYXRpb24sIGxpa2UsIHJ1bnRpbWVVUkxTLCBjYXRhbG9ndWVVUkxzLCBtc2dOb2RlVVJMLCBkb21haW5SZWdpc3RyeVVSTDsKICogQHBhcmFtICB7c3RyaW5nfSByZXNvdXJjZSAgICAgIHR5cGUgb2YgcmVzb3VyY2UgdG8gZ2V0LCBsaWtlLCBjYXRhbG9ndWUsIHJ1bnRpbWVVQSwgcHJvdG9jb2xzdHViLCBpZHBQcm94eQogKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgICAgICAgICAgcmV0dXJuIGFuIG9iamVjdCB3aXRoIGFsbCBjb25maWd1cmF0aW9uczsKICovCmZ1bmN0aW9uIGdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMoZSx0LHIpe3JldHVybiBlW3RdW3JdfS8qKgogKiBCdWlsZCBhIGZ1bGwgdXJsIHdpdGggdGhlIHJ1bnRpbWUgY29uZmlndXJhdGlvbjsKICogQHBhcmFtICB7b2JqZWN0fSBjb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGFsbCBjb25maWd1cmF0aW9uCiAqIEBwYXJhbSAge3N0cmluZ30gY29tcG9uZW50ICAgICBzdHJpbmcgd2l0aCB0aGUgY29tcG9uZW50IHRvIGdldCB0aGUgY29uZmlndXJhdGlvbiwgbGlrZSwgcnVudGltZVVSTFMsIGNhdGFsb2d1ZVVSTHMsIG1zZ05vZGVVUkwsIGRvbWFpblJlZ2lzdHJ5VVJMOwogKiBAcGFyYW0gIHtzdHJpbmd9IHJlc291cmNlICAgICAgdHlwZSBvZiByZXNvdXJjZSB0byBnZXQsIGxpa2UsIGNhdGFsb2d1ZSwgcnVudGltZVVBLCBwcm90b2NvbHN0dWIsIGlkcFByb3h5CiAqIEBwYXJhbSAge3N0cmluZ30gdHlwZSAgICAgICAgICByZXNvdXJjZSB0byBnZXQsIGxpa2UgYSBoeXBlcnR5IG5hbWUgb3IgcHJvdG9jb2xzdHViIG5hbWU7CiAqIEBwYXJhbSAge2Jvb2xlYW59IHVzZUZhbGxiYWNrICBpZiB0cnVlIHRoZSBmdW5jdGlvbiB3aWxsIGNoZWNrIGlmIGhhdmUgYSBmYWxsYmFjayB1cmw7CiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgICBwYXJ0aWFsIHVybCB0byBjb250YWN0IHRoZSByZXNvdXJjZTsKICovCmZ1bmN0aW9uIGJ1aWxkVVJMKGUsdCxyLG4pe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdJiZhcmd1bWVudHNbNF0scz1lW3RdLGE9dm9pZCAwO2lmKCFzLmhhc093blByb3BlcnR5KHIpKXRocm93IEVycm9yKCJUaGUgY29uZmlndXJhdGlvbiAiKygwLG8uZGVmYXVsdCkocywiIiwyKSsiIGRvbid0IGhhdmUgdGhlICIrcisiIHJlc291cmNlIHlvdSBhcmUgbG9va2luZyBmb3IiKTt2YXIgdT1zW3JdOwovLyBjb25zb2xlLmxvZyh1cmwpOwpyZXR1cm4gbj8oYT11LnByZWZpeCtlLmRvbWFpbit1LnN1ZmZpeCtuLHUuaGFzT3duUHJvcGVydHkoImZhbGxiYWNrIikmJmkmJihhPXUuZmFsbGJhY2suaW5kZXhPZigiJWRvbWFpbiUiKT91LmZhbGxiYWNrLnJlcGxhY2UoLyglZG9tYWluJSkvZyxlLmRvbWFpbikrbjp1LmZhbGxiYWNrK24pKTphPXUucHJlZml4K2UuZG9tYWluK3Uuc3VmZml4LGF9LyoqCiAqIEdlbmVyYXRlIGEgR2xvYmFsIFVuaXF1ZSBJRAogKgogKiBAcmV0dXJucyBTdHJpbmc7CiAqLwpmdW5jdGlvbiBnZW5lcmF0ZUdVSUQoKXtmdW5jdGlvbiBzNCgpe3JldHVybiBNYXRoLmZsb29yKDY1NTM2KigxK01hdGgucmFuZG9tKCkpKS50b1N0cmluZygxNikuc3Vic3RyaW5nKDEpfXJldHVybiBzNCgpK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrIi0iK3M0KCkrczQoKStzNCgpfWZ1bmN0aW9uIGdldFVzZXJJZGVudGl0eURvbWFpbihlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdCgiLiIpLG49ci5sZW5ndGg7cmV0dXJuIDE9PW4/cltuLTFdOnJbbi0yXSsiLiIrcltuLTFdfS8qKgogKiBDaGVjayBpZiBVUkwgaXMgZnJvbSBhIGJhY2tlbmQgc2VydmljZQogKiBAcGFyYW0gIHtzdHJpbmd9IHVybCAgICAgVVJMIHRvIGJlIHByb2Nlc3NlZAogKiBAcmV0dXJuIHtib29sZWFufQogKi8KZnVuY3Rpb24gaXNCYWNrZW5kU2VydmljZVVSTChlKXt2YXIgdD1kaXZpZGVVUkwoZSkscj10LmRvbWFpbi5zcGxpdCgiLiIpLG49WyJkb21haW4iLCJnbG9iYWwiLCJkb21haW4taWRwIl0sbz1bInJlZ2lzdHJ5IiwibXNnLW5vZGUiXSxpPXZvaWQgMDtyZXR1cm4gci5sZW5ndGg+MSYmKGk9ci5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1vLmluZGV4T2YoZSl9KVswXSksISghaXx8LTE9PT1vLmluZGV4T2YoaSkpfHwhIXQudHlwZSYmLTEhPT1uLmluZGV4T2YodC50eXBlKX1mdW5jdGlvbiBkaXZpZGVFbWFpbChlKXt2YXIgdD1lLmluZGV4T2YoIkAiKTtyZXR1cm57dXNlcm5hbWU6ZS5zdWJzdHJpbmcoMCx0KSxkb21haW46ZS5zdWJzdHJpbmcodCsxLGUubGVuZ3RoKX19ZnVuY3Rpb24gYXNzaWduKGUsdCxyKXtlfHwoZT17fSksInN0cmluZyI9PXR5cGVvZiB0JiYodD1wYXJzZUF0dHJpYnV0ZXModCkpO2Zvcih2YXIgbj10Lmxlbmd0aC0xLG89MDtvPG47KytvKXt2YXIgaT10W29dO2kgaW4gZXx8KGVbaV09e30pLGU9ZVtpXX1lW3Rbbl1dPXJ9ZnVuY3Rpb24gc3BsaXRPYmplY3RVUkwoZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpLHI9dFswXSsiLy8iK3RbMl0rIi8iK3RbM10sbj10WzVdLG89e3VybDpyLHJlc291cmNlOm59O3JldHVybiBvfWZ1bmN0aW9uIGNoZWNrQXR0cmlidXRlKGUpe3ZhciB0PS8oKChbYS16QS1aXSspOlwvXC8oWzAtOWEtekEtWl1bLVx3XSpbMC05YS16QS1aXVwuKStbYS16QS1aXXsyLDl9KVwvW2EtekEtWjAtOS5dK0BbYS16QS1aMC05XSsoLSk/W2EtekEtWjAtOV0rKFwuKT9bYS16QS1aMC05XXsyLDEwfT9cLlthLXpBLVpdezIsMTB9KSguKyg/PS5pZGVudGl0eSkpPy9nbSxyPVtdLG49W107aWYobnVsbD09ZS5tYXRjaCh0KSluPWUuc3BsaXQoIi4iKTtlbHNle2Zvcih2YXIgbz12b2lkIDA7bnVsbCE9PShvPXQuZXhlYyhlKSk7KQovLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCBpbmZpbml0ZSBsb29wcyB3aXRoIHplcm8td2lkdGggbWF0Y2hlcwpvLmluZGV4PT09dC5sYXN0SW5kZXgmJnQubGFzdEluZGV4KyssCi8vIFRoZSByZXN1bHQgY2FuIGJlIGFjY2Vzc2VkIHRocm91Z2ggdGhlIGBtYC12YXJpYWJsZS4Kby5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7MD09PXQmJnIucHVzaChlKX0pO3ZhciBpPXZvaWQgMDtyLmZvckVhY2goZnVuY3Rpb24odCl7aT1lLnJlcGxhY2UodCwiKi0qIiksbj1pLnNwbGl0KCIuIikubWFwKGZ1bmN0aW9uKGUpe3JldHVybiIqLSoiPT09ZT90OmV9KX0pfXJldHVybiBufWZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlcyhlKXt2YXIgdD0vKFswLTlhLXpBLVpdWy1cd10qKTpcL1wvL2c7aWYoZS5pbmNsdWRlcygiOi8vIikpe3ZhciByPWUuc3BsaXQodClbMF0sbj1yLnNwbGl0KCIuIiksbz1lLnJlcGxhY2UociwiIik7aWYoZS5pbmNsdWRlcygiaWRlbnRpdHkiKSl7dmFyIGk9by5zcGxpdCgiaWRlbnRpdHkuIik7bz1pWzBdLnNsaWNlKCIuIiwtMSksaT1pWzFdLnNwbGl0KCIuIiksbi5wdXNoKG8sImlkZW50aXR5Iiksbj1uLmNvbmNhdChpKX1lbHNlIG4ucHVzaChvKTtyZXR1cm4gbi5maWx0ZXIoQm9vbGVhbil9cmV0dXJuIGUuc3BsaXQoIi4iKX1mdW5jdGlvbiBpc0VtcHR5KGUpe2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuITE7cmV0dXJuKDAsby5kZWZhdWx0KShlKT09PSgwLG8uZGVmYXVsdCkoe30pfWZ1bmN0aW9uIGNoYXRrZXlzVG9TdHJpbmdDbG9uZXIoZSl7dmFyIHQ9e30scj0oMCxzLmRlZmF1bHQpKGUpO2lmKHIpdHJ5e2Zvcih2YXIgbj0wO248ci5sZW5ndGg7bisrKXt2YXIgbz1yW25dO3Rbb109e30sdFtvXS5zZXNzaW9uS2V5PWVbb10uc2Vzc2lvbktleS50b1N0cmluZygpLHRbb10uaXNUb0VuY3J5cHQ9ZVtvXS5pc1RvRW5jcnlwdH19Y2F0Y2goZSl7fXJldHVybiB0fWZ1bmN0aW9uIGNoYXRrZXlzVG9BcnJheUNsb25lcihlKXt2YXIgdD17fSxyPSgwLHMuZGVmYXVsdCkoZSk7aWYocil0cnl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDtuKyspe3ZhciBvPXJbbl07dFtvXT17fTt2YXIgaT1KU09OLnBhcnNlKCJbIitlW29dLnNlc3Npb25LZXkrIl0iKTt0W29dLnNlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoaSksdFtvXS5pc1RvRW5jcnlwdD1lW29dLmlzVG9FbmNyeXB0fX1jYXRjaChlKXt9cmV0dXJuIHR9ZnVuY3Rpb24gcGFyc2VNZXNzYWdlVVJMKGUpe3ZhciB0PWUuc3BsaXQoIi8iKTtyZXR1cm4gdC5sZW5ndGg8PTY/dFswXSsiLy8iK3RbMl0rIi8iK3RbM106dFswXSsiLy8iK3RbMl0rIi8iK3RbM10rIi8iK3RbNF19ZnVuY3Rpb24gYXZhaWxhYmxlU3BhY2UoZSx0KXt2YXIgcj0oZS90KS50b0ZpeGVkKDIpO3JldHVybntxdW90YTp0LHVzYWdlOmUscGVyY2VudDpOdW1iZXIocil9fS8qKgoqIEVuY29kZXMgYSBKUyBvYmplY3QgdG8gYmFzZSA2NCBlbmNvZGUKKiBAcGFyYW0gICB7T2JqZWN0fSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKKiBAcmV0dXJuICB7c3RyaW5nfSAgIGVuY29kZWQgdmFsdWUKKi8KZnVuY3Rpb24gZW5jb2RlKGUpe3RyeXt2YXIgdD1zdHJpbmdpZnkoZSk7cmV0dXJuIGJ0b2EodCl9Y2F0Y2goZSl7dGhyb3cgZX19LyoqCiAgKiBEZWNvZGUgYSBiYXNlNjQgc3RyaW5nIHRvIG9iamVjdAogICogQHBhcmFtICAge3N0cmluZ19iNjR9ICAgIHZhbHVlICAgIHZhbHVlIGVuY29kZWQgaW4gYmFzZSA2NAogICogQHJldHVybiAge09iamVjdH0gZGVjb2RlZFZhbHVlCiAgKi8KZnVuY3Rpb24gZGVjb2RlKGUpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShhdG9iKGUpKX1jYXRjaChlKXt0aHJvdyBlfX0vKioKKiBEZWNvZGUgYSBiYXNlNjQgc3RyaW5nIHRvIFVpbnQ4QXJyYXkKKiBAcGFyYW0gICB7c3RyaW5nX2I2NH0gICAgdmFsdWUgICAgYnl0ZUFycmF5IHZhbHVlCiogQHJldHVybiAge1VpbnQ4QXJyYXl9ICAgZW5jb2RlZCB2YWx1ZQoqLwpmdW5jdGlvbiBkZWNvZGVUb1VpbnQ4QXJyYXkoZSl7dHJ5e3JldHVybiBuZXcgVWludDhBcnJheShkZWNvZGUoZSkpfWNhdGNoKGUpe3Rocm93IGV9fS8qKgoqIENvbnZlcnRzIGEgSlMgb2JqZWN0IHRvIHN0cmluZwoqIE5PVEU6IFNwZWNpYWwgY29udmVyc2lvbiBmb3IgVWludDhBcnJheXMKKiBAcGFyYW0gICB7T2JqZWN0fSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKKiBAcmV0dXJuICB7VWludDhBcnJheX0gICBlbmNvZGVkIHZhbHVlCiovCmZ1bmN0aW9uIHN0cmluZ2lmeShlKXt0cnl7cmV0dXJuIGUuY29uc3RydWN0b3I9PT1VaW50OEFycmF5PyJbIitlLnRvU3RyaW5nKCkrIl0iOigwLG8uZGVmYXVsdCkoZSl9Y2F0Y2goZSl7dGhyb3cgZX19LyoqCiogQ29udmVydHMgYSBzdHJpbmdpZmllZCBvYmplY3QgdG8gb2JqZWN0CiogQHBhcmFtICAge1N0cmluZ30gICAgdmFsdWUgICAgYnl0ZUFycmF5IHZhbHVlCiogQHJldHVybiAge09iamVjdH0gICBlbmNvZGVkIHZhbHVlCiovCmZ1bmN0aW9uIHBhcnNlKGUpe3RyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaChlKXt0aHJvdyBlfX0vKioKKiBDb252ZXJ0cyBhIHN0cmluZ2lmaWVkIG9iamVjdCB0byBvYmplY3QKKiBAcGFyYW0gICB7U3RyaW5nfSAgICB2YWx1ZSAgICBieXRlQXJyYXkgdmFsdWUKKiBAcmV0dXJuICB7VWludDhBcnJheX0gICBlbmNvZGVkIHZhbHVlCiovCmZ1bmN0aW9uIHBhcnNlVG9VaW50OEFycmF5KGUpe3RyeXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkocGFyc2UoZSkpfWNhdGNoKGUpe3Rocm93IGV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDY5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDMxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSk7dC5kaXZpZGVVUkw9ZGl2aWRlVVJMLHQuZW1wdHlPYmplY3Q9ZW1wdHlPYmplY3QsdC5zZWNvbmRzU2luY2VFcG9jaD1zZWNvbmRzU2luY2VFcG9jaCx0LmRlZXBDbG9uZT1kZWVwQ2xvbmUsdC5yZW1vdmVQYXRoRnJvbVVSTD1yZW1vdmVQYXRoRnJvbVVSTCx0LmdldFVzZXJVUkxGcm9tRW1haWw9Z2V0VXNlclVSTEZyb21FbWFpbCx0LmdldFVzZXJFbWFpbEZyb21VUkw9Z2V0VXNlckVtYWlsRnJvbVVSTCx0LmNvbnZlcnRUb1VzZXJVUkw9Y29udmVydFRvVXNlclVSTCx0LmlzRGF0YU9iamVjdFVSTD1pc0RhdGFPYmplY3RVUkwsdC5pc0xlZ2FjeT1pc0xlZ2FjeSx0LmlzVVJMPWlzVVJMLHQuaXNVc2VyVVJMPWlzVXNlclVSTCx0LmlzSHlwZXJ0eVVSTD1pc0h5cGVydHlVUkwsdC5nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzPWdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMsdC5idWlsZFVSTD1idWlsZFVSTCx0LmdlbmVyYXRlR1VJRD1nZW5lcmF0ZUdVSUQsdC5nZXRVc2VySWRlbnRpdHlEb21haW49Z2V0VXNlcklkZW50aXR5RG9tYWluLHQuaXNCYWNrZW5kU2VydmljZVVSTD1pc0JhY2tlbmRTZXJ2aWNlVVJMLHQuZGl2aWRlRW1haWw9ZGl2aWRlRW1haWwsdC5hc3NpZ249YXNzaWduLHQuc3BsaXRPYmplY3RVUkw9c3BsaXRPYmplY3RVUkwsdC5jaGVja0F0dHJpYnV0ZT1jaGVja0F0dHJpYnV0ZSx0LnBhcnNlQXR0cmlidXRlcz1wYXJzZUF0dHJpYnV0ZXMsdC5pc0VtcHR5PWlzRW1wdHksdC5jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyPWNoYXRrZXlzVG9TdHJpbmdDbG9uZXIsdC5jaGF0a2V5c1RvQXJyYXlDbG9uZXI9Y2hhdGtleXNUb0FycmF5Q2xvbmVyLHQucGFyc2VNZXNzYWdlVVJMPXBhcnNlTWVzc2FnZVVSTCx0LmF2YWlsYWJsZVNwYWNlPWF2YWlsYWJsZVNwYWNlLHQuZW5jb2RlPWVuY29kZSx0LmRlY29kZT1kZWNvZGUsdC5kZWNvZGVUb1VpbnQ4QXJyYXk9ZGVjb2RlVG9VaW50OEFycmF5LHQuc3RyaW5naWZ5PXN0cmluZ2lmeSx0LnBhcnNlPXBhcnNlLHQucGFyc2VUb1VpbnQ4QXJyYXk9cGFyc2VUb1VpbnQ4QXJyYXl9LC8qIDE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KQp2YXIgbj1yKDMzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LC8qIDE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIGV9fSwvKiAxNyAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAp2YXIgcj1lLmV4cG9ydHM9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCk7Im51bWJlciI9PXR5cGVvZiBfX2cmJihfX2c9cil9LC8qIDE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDExKSxvPXIoNDcpO2UuZXhwb3J0cz1yKDEwKT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LC8qIDE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLG89cigxOCksaT1yKDIzKSxzPXIoNDgpKCJzcmMiKSxhPUZ1bmN0aW9uLnRvU3RyaW5nLHU9KCIiK2EpLnNwbGl0KCJ0b1N0cmluZyIpO3IoMjcpLmluc3BlY3RTb3VyY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGEuY2FsbChlKX0sKGUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixhKXt2YXIgYz0iZnVuY3Rpb24iPT10eXBlb2YgcjtjJiYoaShyLCJuYW1lIil8fG8ociwibmFtZSIsdCkpLGVbdF0hPT1yJiYoYyYmKGkocixzKXx8byhyLHMsZVt0XT8iIitlW3RdOnUuam9pbihTdHJpbmcodCkpKSksZT09PW4/ZVt0XT1yOmE/ZVt0XT9lW3RdPXI6byhlLHQscik6KGRlbGV0ZSBlW3RdLG8oZSx0LHIpKSl9KShGdW5jdGlvbi5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzJiZ0aGlzW3NdfHxhLmNhbGwodGhpcyl9KX0sLyogMjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCksbz1yKDUpLGk9cigzMykscz0vIi9nLGE9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89U3RyaW5nKGkoZSkpLGE9IjwiK3Q7cmV0dXJuIiIhPT1yJiYoYSs9IiAiK3IrJz0iJytTdHJpbmcobikucmVwbGFjZShzLCImcXVvdDsiKSsnIicpLGErIj4iK28rIjwvIit0KyI+In07ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e307cltlXT10KGEpLG4obi5QK24uRipvKGZ1bmN0aW9uKCl7dmFyIHQ9IiJbZV0oJyInKTtyZXR1cm4gdCE9PXQudG9Mb3dlckNhc2UoKXx8dC5zcGxpdCgnIicpLmxlbmd0aD4zfSksIlN0cmluZyIscil9fSwvKiAyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNyksbz1yKDEzKSxpPXIoNjUpLHM9cig1OCksYT1yKDU3KSx1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyxmLGwsZD1lJnUuRixwPWUmdS5HLHk9ZSZ1LlMsaD1lJnUuUCx2PWUmdS5CLGc9ZSZ1LlcsYj1wP286b1t0XXx8KG9bdF09e30pLF89Yi5wcm90b3R5cGUsbT1wP246eT9uW3RdOihuW3RdfHx7fSkucHJvdG90eXBlO3AmJihyPXQpO2ZvcihjIGluIHIpCi8vIGNvbnRhaW5zIGluIG5hdGl2ZQooZj0hZCYmbSYmdm9pZCAwIT09bVtjXSkmJmEoYixjKXx8KAovLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZApsPWY/bVtjXTpyW2NdLAovLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMKYltjXT1wJiYiZnVuY3Rpb24iIT10eXBlb2YgbVtjXT9yW2NdOnYmJmY/aShsLG4pOmcmJm1bY109PWw/ZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24odCxyLG4pe2lmKHRoaXMgaW5zdGFuY2VvZiBlKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHQpO2Nhc2UgMjpyZXR1cm4gbmV3IGUodCxyKX1yZXR1cm4gbmV3IGUodCxyLG4pfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07cmV0dXJuIHQucHJvdG90eXBlPWUucHJvdG90eXBlLHR9KGwpOmgmJiJmdW5jdGlvbiI9PXR5cGVvZiBsP2koRnVuY3Rpb24uY2FsbCxsKTpsLAovLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKaCYmKChiLnZpcnR1YWx8fChiLnZpcnR1YWw9e30pKVtjXT1sLAovLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQplJnUuUiYmXyYmIV9bY10mJnMoXyxjLGwpKSl9OwovLyB0eXBlIGJpdG1hcAp1LkY9MSwvLyBmb3JjZWQKdS5HPTIsLy8gZ2xvYmFsCnUuUz00LC8vIHN0YXRpYwp1LlA9OCwvLyBwcm90bwp1LkI9MTYsLy8gYmluZAp1Llc9MzIsLy8gd3JhcAp1LlU9NjQsLy8gc2FmZQp1LlI9MTI4LC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAKZS5leHBvcnRzPXV9LC8qIDIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzMikoIndrcyIpLG89cig5NCksaT1yKDE3KS5TeW1ib2wscz0iZnVuY3Rpb24iPT10eXBlb2YgaTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1zJiZpW2VdfHwocz9pOm8pKCJTeW1ib2wuIitlKSl9KS5zdG9yZT1ufSwvKiAyMyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiByLmNhbGwoZSx0KX19LC8qIDI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzCnZhciBuPXIoNzApLG89cigzMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0sLyogMjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNzEpLG89cig0NyksaT1yKDI0KSxzPXIoMzIpLGE9cigyMyksdT1yKDE0OCksYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3QuZj1yKDEwKT9jOmZ1bmN0aW9uKGUsdCl7aWYoZT1pKGUpLHQ9cyh0LCEwKSx1KXRyeXtyZXR1cm4gYyhlLHQpfWNhdGNoKGUpe31pZihhKGUsdCkpcmV0dXJuIG8oIW4uZi5jYWxsKGUsdCksZVt0XSl9fSwvKiAyNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBuPXIoMjMpLG89cigxNSksaT1yKDEwNCkoIklFX1BST1RPIikscz1PYmplY3QucHJvdG90eXBlO2UuZXhwb3J0cz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKGUpe3JldHVybiBlPW8oZSksbihlLGkpP2VbaV06ImZ1bmN0aW9uIj09dHlwZW9mIGUuY29uc3RydWN0b3ImJmUgaW5zdGFuY2VvZiBlLmNvbnN0cnVjdG9yP2UuY29uc3RydWN0b3IucHJvdG90eXBlOmUgaW5zdGFuY2VvZiBPYmplY3Q/czpudWxsfX0sLyogMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmV4cG9ydHM9e3ZlcnNpb246IjIuNS43In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9cil9LC8qIDI4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBuPXIoMTYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sLyogMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcj17fS50b1N0cmluZztlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuY2FsbChlKS5zbGljZSg4LC0xKX19LC8qIDMwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJm4oZnVuY3Rpb24oKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY2FsbAp0P2UuY2FsbChudWxsLGZ1bmN0aW9uKCl7fSwxKTplLmNhbGwobnVsbCl9KX19LC8qIDMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0MTYpLF9fZXNNb2R1bGU6ITB9fSwvKiAzMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKQp2YXIgbj1yKDYpOwovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQovLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZwplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKSlyZXR1cm4gZTt2YXIgcixvO2lmKHQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS52YWx1ZU9mKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO2lmKCF0JiYiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnRvU3RyaW5nKSYmIW4obz1yLmNhbGwoZSkpKXJldHVybiBvO3Rocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIil9fSwvKiAzMyAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQplLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSwvKiAzNCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjEuNCBUb0ludGVnZXIKdmFyIHI9TWF0aC5jZWlsLG49TWF0aC5mbG9vcjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzTmFOKGU9K2UpPzA6KGU+MD9uOnIpKGUpfX0sLyogMzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMKdmFyIG49cigwKSxvPXIoMjcpLGk9cig1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0sLyogMzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAwIC0+IEFycmF5I2ZvckVhY2gKLy8gMSAtPiBBcnJheSNtYXAKLy8gMiAtPiBBcnJheSNmaWx0ZXIKLy8gMyAtPiBBcnJheSNzb21lCi8vIDQgLT4gQXJyYXkjZXZlcnkKLy8gNSAtPiBBcnJheSNmaW5kCi8vIDYgLT4gQXJyYXkjZmluZEluZGV4CnZhciBuPXIoMjgpLG89cig3MCksaT1yKDE1KSxzPXIoMTIpLGE9cigxMjEpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPTE9PWUsdT0yPT1lLGM9Mz09ZSxmPTQ9PWUsbD02PT1lLGQ9NT09ZXx8bCxwPXR8fGE7cmV0dXJuIGZ1bmN0aW9uKHQsYSx5KXtmb3IodmFyIGgsdixnPWkodCksYj1vKGcpLF89bihhLHksMyksbT1zKGIubGVuZ3RoKSxSPTAsdz1yP3AodCxtKTp1P3AodCwwKTp2b2lkIDA7bT5SO1IrKylpZigoZHx8UiBpbiBiKSYmKGg9YltSXSx2PV8oaCxSLGcpLGUpKWlmKHIpd1tSXT12O2Vsc2UgaWYodilzd2l0Y2goZSl7Y2FzZSAzOnJldHVybiEwOy8vIHNvbWUKY2FzZSA1OnJldHVybiBoOy8vIGZpbmQKY2FzZSA2OnJldHVybiBSOy8vIGZpbmRJbmRleApjYXNlIDI6dy5wdXNoKGgpfWVsc2UgaWYoZilyZXR1cm4hMTtyZXR1cm4gbD8tMTpjfHxmP2Y6d319fSwvKiAzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2lmKHIoMTApKXt2YXIgbj1yKDQzKSxvPXIoNCksaT1yKDUpLHM9cigwKSxhPXIoOTApLHU9cigxMjcpLGM9cigyOCksZj1yKDU0KSxsPXIoNDcpLGQ9cigxOCkscD1yKDU2KSx5PXIoMzQpLGg9cigxMiksdj1yKDE3NCksZz1yKDUwKSxiPXIoMzIpLF89cigyMyksbT1yKDcyKSxSPXIoNiksdz1yKDE1KSxTPXIoMTE4KSxrPXIoNTEpLE89cigyNiksUD1yKDUyKS5mLE09cigxMjApLEw9cig0OCkseD1yKDkpLEE9cigzNiksRD1yKDgwKSxVPXIoODcpLGo9cigxMjMpLEU9cig2MiksST1yKDg0KSxDPXIoNTMpLFQ9cigxMjIpLHE9cigxNjQpLEg9cigxMSksRj1yKDI1KSxOPUguZixCPUYuZixHPW8uUmFuZ2VFcnJvcixLPW8uVHlwZUVycm9yLFY9by5VaW50OEFycmF5LFc9QXJyYXkucHJvdG90eXBlLFk9dS5BcnJheUJ1ZmZlcix6PXUuRGF0YVZpZXcsSj1BKDApLFo9QSgyKSxRPUEoMyksJD1BKDQpLFg9QSg1KSxlZT1BKDYpLHRlPUQoITApLHJlPUQoITEpLG5lPWoudmFsdWVzLG9lPWoua2V5cyxpZT1qLmVudHJpZXMsc2U9Vy5sYXN0SW5kZXhPZixhZT1XLnJlZHVjZSx1ZT1XLnJlZHVjZVJpZ2h0LGNlPVcuam9pbixmZT1XLnNvcnQsbGU9Vy5zbGljZSxkZT1XLnRvU3RyaW5nLHBlPVcudG9Mb2NhbGVTdHJpbmcseWU9eCgiaXRlcmF0b3IiKSxoZT14KCJ0b1N0cmluZ1RhZyIpLHZlPUwoInR5cGVkX2NvbnN0cnVjdG9yIiksZ2U9TCgiZGVmX2NvbnN0cnVjdG9yIiksYmU9YS5DT05TVFIsX2U9YS5UWVBFRCxtZT1hLlZJRVcsUmU9QSgxLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIFBlKFUoZSxlW2dlXSksdCl9KSx3ZT1pKGZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgpyZXR1cm4gMT09PW5ldyBWKG5ldyBVaW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF19KSxTZT0hIVYmJiEhVi5wcm90b3R5cGUuc2V0JiZpKGZ1bmN0aW9uKCl7bmV3IFYoMSkuc2V0KHt9KX0pLGtlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9eShlKTtpZihyPDB8fHIldCl0aHJvdyBHKCJXcm9uZyBvZmZzZXQhIik7cmV0dXJuIHJ9LE9lPWZ1bmN0aW9uKGUpe2lmKFIoZSkmJl9lIGluIGUpcmV0dXJuIGU7dGhyb3cgSyhlKyIgaXMgbm90IGEgdHlwZWQgYXJyYXkhIil9LFBlPWZ1bmN0aW9uKGUsdCl7aWYoIShSKGUpJiZ2ZSBpbiBlKSl0aHJvdyBLKCJJdCBpcyBub3QgYSB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvciEiKTtyZXR1cm4gbmV3IGUodCl9LE1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIExlKFUoZSxlW2dlXSksdCl9LExlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTAsbj10Lmxlbmd0aCxvPVBlKGUsbik7bj5yOylvW3JdPXRbcisrXTtyZXR1cm4gb30seGU9ZnVuY3Rpb24oZSx0LHIpe04oZSx0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZFtyXX19KX0sQWU9ZnVuY3Rpb24oZSl7dmFyIHQscixuLG8saSxzLGE9dyhlKSx1PWFyZ3VtZW50cy5sZW5ndGgsZj11PjE/YXJndW1lbnRzWzFdOnZvaWQgMCxsPXZvaWQgMCE9PWYsZD1NKGEpO2lmKHZvaWQgMCE9ZCYmIVMoZCkpe2ZvcihzPWQuY2FsbChhKSxuPVtdLHQ9MDshKGk9cy5uZXh0KCkpLmRvbmU7dCsrKW4ucHVzaChpLnZhbHVlKTthPW59Zm9yKGwmJnU+MiYmKGY9YyhmLGFyZ3VtZW50c1syXSwyKSksdD0wLHI9aChhLmxlbmd0aCksbz1QZSh0aGlzLHIpO3I+dDt0Kyspb1t0XT1sP2YoYVt0XSx0KTphW3RdO3JldHVybiBvfSxEZT1mdW5jdGlvbigpe2Zvcih2YXIgZT0wLHQ9YXJndW1lbnRzLmxlbmd0aCxyPVBlKHRoaXMsdCk7dD5lOylyW2VdPWFyZ3VtZW50c1tlKytdO3JldHVybiByfSxVZT0hIVYmJmkoZnVuY3Rpb24oKXtwZS5jYWxsKG5ldyBWKDEpKX0pLGplPWZ1bmN0aW9uKCl7cmV0dXJuIHBlLmFwcGx5KFVlP2xlLmNhbGwoT2UodGhpcykpOk9lKHRoaXMpLGFyZ3VtZW50cyl9LEVlPXtjb3B5V2l0aGluOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHEuY2FsbChPZSh0aGlzKSxlLHQsYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxldmVyeTpmdW5jdGlvbihlKXtyZXR1cm4gJChPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmlsbDpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBULmFwcGx5KE9lKHRoaXMpLGFyZ3VtZW50cyl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gTWUodGhpcyxaKE9lKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApKX0sZmluZDpmdW5jdGlvbihlKXtyZXR1cm4gWChPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmluZEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlZShPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZm9yRWFjaDpmdW5jdGlvbihlKXtKKE9lKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxpbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiByZShPZSh0aGlzKSxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5jbHVkZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRlKE9lKHRoaXMpLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxqb2luOmZ1bmN0aW9uKGUpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKcmV0dXJuIGNlLmFwcGx5KE9lKHRoaXMpLGFyZ3VtZW50cyl9LGxhc3RJbmRleE9mOmZ1bmN0aW9uKGUpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKcmV0dXJuIHNlLmFwcGx5KE9lKHRoaXMpLGFyZ3VtZW50cyl9LG1hcDpmdW5jdGlvbihlKXtyZXR1cm4gUmUoT2UodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHJlZHVjZTpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBhZS5hcHBseShPZSh0aGlzKSxhcmd1bWVudHMpfSxyZWR1Y2VSaWdodDpmdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiB1ZS5hcHBseShPZSh0aGlzKSxhcmd1bWVudHMpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9dGhpcyxyPU9lKHQpLmxlbmd0aCxuPU1hdGguZmxvb3Ioci8yKSxvPTA7bzxuOyllPXRbb10sdFtvKytdPXRbLS1yXSx0W3JdPWU7cmV0dXJuIHR9LHNvbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIFEoT2UodGhpcyksZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHNvcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGZlLmNhbGwoT2UodGhpcyksZSl9LHN1YmFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIHI9T2UodGhpcyksbj1yLmxlbmd0aCxvPWcoZSxuKTtyZXR1cm4gbmV3KFUocixyW2dlXSkpKHIuYnVmZmVyLHIuYnl0ZU9mZnNldCtvKnIuQllURVNfUEVSX0VMRU1FTlQsaCgodm9pZCAwPT09dD9uOmcodCxuKSktbykpfX0sSWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWUodGhpcyxsZS5jYWxsKE9lKHRoaXMpLGUsdCkpfSxDZT1mdW5jdGlvbihlKXtPZSh0aGlzKTt2YXIgdD1rZShhcmd1bWVudHNbMV0sMSkscj10aGlzLmxlbmd0aCxuPXcoZSksbz1oKG4ubGVuZ3RoKSxpPTA7aWYobyt0PnIpdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpO2Zvcig7aTxvOyl0aGlzW3QraV09bltpKytdfSxUZT17ZW50cmllczpmdW5jdGlvbigpe3JldHVybiBpZS5jYWxsKE9lKHRoaXMpKX0sa2V5czpmdW5jdGlvbigpe3JldHVybiBvZS5jYWxsKE9lKHRoaXMpKX0sdmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIG5lLmNhbGwoT2UodGhpcykpfX0scWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUihlKSYmZVtfZV0mJiJzeW1ib2wiIT10eXBlb2YgdCYmdCBpbiBlJiZTdHJpbmcoK3QpPT1TdHJpbmcodCl9LEhlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHFlKGUsdD1iKHQsITApKT9sKDIsZVt0XSk6QihlLHQpfSxGZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIShxZShlLHQ9Yih0LCEwKSkmJlIocikmJl8ociwidmFsdWUiKSl8fF8ociwiZ2V0Iil8fF8ociwic2V0Iil8fHIuY29uZmlndXJhYmxlfHxfKHIsIndyaXRhYmxlIikmJiFyLndyaXRhYmxlfHxfKHIsImVudW1lcmFibGUiKSYmIXIuZW51bWVyYWJsZT9OKGUsdCxyKTooZVt0XT1yLnZhbHVlLGUpfTtiZXx8KEYuZj1IZSxILmY9RmUpLHMocy5TK3MuRiohYmUsIk9iamVjdCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpIZSxkZWZpbmVQcm9wZXJ0eTpGZX0pLGkoZnVuY3Rpb24oKXtkZS5jYWxsKHt9KX0pJiYoZGU9cGU9ZnVuY3Rpb24oKXtyZXR1cm4gY2UuY2FsbCh0aGlzKX0pO3ZhciBOZT1wKHt9LEVlKTtwKE5lLFRlKSxkKE5lLHllLFRlLnZhbHVlcykscChOZSx7c2xpY2U6SWUsc2V0OkNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7fSx0b1N0cmluZzpkZSx0b0xvY2FsZVN0cmluZzpqZX0pLHhlKE5lLCJidWZmZXIiLCJiIikseGUoTmUsImJ5dGVPZmZzZXQiLCJvIikseGUoTmUsImJ5dGVMZW5ndGgiLCJsIikseGUoTmUsImxlbmd0aCIsImUiKSxOKE5lLGhlLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tfZV19fSksCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtc3RhdGVtZW50cwplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsdSl7dT0hIXU7dmFyIGM9ZSsodT8iQ2xhbXBlZCI6IiIpKyJBcnJheSIsbD0iZ2V0IitlLHA9InNldCIrZSx5PW9bY10sZz15fHx7fSxiPXkmJk8oeSksXz0heXx8IWEuQUJWLHc9e30sUz15JiZ5LnByb3RvdHlwZSxNPWZ1bmN0aW9uKGUscil7dmFyIG49ZS5fZDtyZXR1cm4gbi52W2xdKHIqdCtuLm8sd2UpfSxMPWZ1bmN0aW9uKGUscixuKXt2YXIgbz1lLl9kO3UmJihuPShuPU1hdGgucm91bmQobikpPDA/MDpuPjI1NT8yNTU6MjU1Jm4pLG8udltwXShyKnQrby5vLG4sd2UpfSx4PWZ1bmN0aW9uKGUsdCl7TihlLHQse2dldDpmdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdCl9LHNldDpmdW5jdGlvbihlKXtyZXR1cm4gTCh0aGlzLHQsZSl9LGVudW1lcmFibGU6ITB9KX07Xz8oeT1yKGZ1bmN0aW9uKGUscixuLG8pe2YoZSx5LGMsIl9kIik7dmFyIGkscyxhLHUsbD0wLHA9MDtpZihSKHIpKXtpZighKHIgaW5zdGFuY2VvZiBZfHwiQXJyYXlCdWZmZXIiPT0odT1tKHIpKXx8IlNoYXJlZEFycmF5QnVmZmVyIj09dSkpcmV0dXJuIF9lIGluIHI/TGUoeSxyKTpBZS5jYWxsKHkscik7aT1yLHA9a2Uobix0KTt2YXIgZz1yLmJ5dGVMZW5ndGg7aWYodm9pZCAwPT09byl7aWYoZyV0KXRocm93IEcoIldyb25nIGxlbmd0aCEiKTtpZigocz1nLXApPDApdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpfWVsc2UgaWYoKHM9aChvKSp0KStwPmcpdGhyb3cgRygiV3JvbmcgbGVuZ3RoISIpO2E9cy90fWVsc2UgYT12KHIpLHM9YSp0LGk9bmV3IFkocyk7Zm9yKGQoZSwiX2QiLHtiOmksbzpwLGw6cyxlOmEsdjpuZXcgeihpKX0pO2w8YTspeChlLGwrKyl9KSxTPXkucHJvdG90eXBlPWsoTmUpLGQoUywiY29uc3RydWN0b3IiLHkpKTppKGZ1bmN0aW9uKCl7eSgxKX0pJiZpKGZ1bmN0aW9uKCl7bmV3IHkoLTEpfSkmJkkoZnVuY3Rpb24oZSl7bmV3IHksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKbmV3IHkobnVsbCksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKbmV3IHkoMS41KSwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldwpuZXcgeShlKX0sITApfHwoeT1yKGZ1bmN0aW9uKGUscixuLG8pe2YoZSx5LGMpO3ZhciBpOwovLyBgd3NgIG1vZHVsZSBidWcsIHRlbXBvcmFyaWx5IHJlbW92ZSB2YWxpZGF0aW9uIGxlbmd0aCBmb3IgVWludDhBcnJheQovLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9wdWxsLzY0NQovLyBgd3NgIG1vZHVsZSBidWcsIHRlbXBvcmFyaWx5IHJlbW92ZSB2YWxpZGF0aW9uIGxlbmd0aCBmb3IgVWludDhBcnJheQovLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9wdWxsLzY0NQpyZXR1cm4gUihyKT9yIGluc3RhbmNlb2YgWXx8IkFycmF5QnVmZmVyIj09KGk9bShyKSl8fCJTaGFyZWRBcnJheUJ1ZmZlciI9PWk/dm9pZCAwIT09bz9uZXcgZyhyLGtlKG4sdCksbyk6dm9pZCAwIT09bj9uZXcgZyhyLGtlKG4sdCkpOm5ldyBnKHIpOl9lIGluIHI/TGUoeSxyKTpBZS5jYWxsKHkscik6bmV3IGcodihyKSl9KSxKKGIhPT1GdW5jdGlvbi5wcm90b3R5cGU/UChnKS5jb25jYXQoUChiKSk6UChnKSxmdW5jdGlvbihlKXtlIGluIHl8fGQoeSxlLGdbZV0pfSkseS5wcm90b3R5cGU9UyxufHwoUy5jb25zdHJ1Y3Rvcj15KSk7dmFyIEE9U1t5ZV0sRD0hIUEmJigidmFsdWVzIj09QS5uYW1lfHx2b2lkIDA9PUEubmFtZSksVT1UZS52YWx1ZXM7ZCh5LHZlLCEwKSxkKFMsX2UsYyksZChTLG1lLCEwKSxkKFMsZ2UseSksKHU/bmV3IHkoMSlbaGVdPT1jOmhlIGluIFMpfHxOKFMsaGUse2dldDpmdW5jdGlvbigpe3JldHVybiBjfX0pLHdbY109eSxzKHMuRytzLlcrcy5GKih5IT1nKSx3KSxzKHMuUyxjLHtCWVRFU19QRVJfRUxFTUVOVDp0fSkscyhzLlMrcy5GKmkoZnVuY3Rpb24oKXtnLm9mLmNhbGwoeSwxKX0pLGMse2Zyb206QWUsb2Y6RGV9KSwiQllURVNfUEVSX0VMRU1FTlQiaW4gU3x8ZChTLCJCWVRFU19QRVJfRUxFTUVOVCIsdCkscyhzLlAsYyxFZSksQyhjKSxzKHMuUCtzLkYqU2UsYyx7c2V0OkNlfSkscyhzLlArcy5GKiFELGMsVGUpLG58fFMudG9TdHJpbmc9PWRlfHwoUy50b1N0cmluZz1kZSkscyhzLlArcy5GKmkoZnVuY3Rpb24oKXtuZXcgeSgxKS5zbGljZSgpfSksYyx7c2xpY2U6SWV9KSxzKHMuUCtzLkYqKGkoZnVuY3Rpb24oKXtyZXR1cm5bMSwyXS50b0xvY2FsZVN0cmluZygpIT1uZXcgeShbMSwyXSkudG9Mb2NhbGVTdHJpbmcoKX0pfHwhaShmdW5jdGlvbigpe1MudG9Mb2NhbGVTdHJpbmcuY2FsbChbMSwyXSl9KSksYyx7dG9Mb2NhbGVTdHJpbmc6amV9KSxFW2NdPUQ/QTpVLG58fER8fGQoUyx5ZSxVKX19ZWxzZSBlLmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSwvKiAzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNjkpLG89cigwKSxpPXIoNzkpKCJtZXRhZGF0YSIpLHM9aS5zdG9yZXx8KGkuc3RvcmU9bmV3KHIoMTcyKSkpLGE9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPXMuZ2V0KGUpO2lmKCFvKXtpZighcilyZXR1cm47cy5zZXQoZSxvPW5ldyBuKX12YXIgaT1vLmdldCh0KTtpZighaSl7aWYoIXIpcmV0dXJuO28uc2V0KHQsaT1uZXcgbil9cmV0dXJuIGl9LHU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWEodCxyLCExKTtyZXR1cm4gdm9pZCAwIT09biYmbi5oYXMoZSl9LGM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWEodCxyLCExKTtyZXR1cm4gdm9pZCAwPT09bj92b2lkIDA6bi5nZXQoZSl9LGY9ZnVuY3Rpb24oZSx0LHIsbil7YShyLG4sITApLnNldChlLHQpfSxsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9YShlLHQsITEpLG49W107cmV0dXJuIHImJnIuZm9yRWFjaChmdW5jdGlvbihlLHQpe24ucHVzaCh0KX0pLG59LGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWV8fCJzeW1ib2wiPT10eXBlb2YgZT9lOlN0cmluZyhlKX0scD1mdW5jdGlvbihlKXtvKG8uUywiUmVmbGVjdCIsZSl9O2UuZXhwb3J0cz17c3RvcmU6cyxtYXA6YSxoYXM6dSxnZXQ6YyxzZXQ6ZixrZXlzOmwsa2V5OmQsZXhwOnB9fSwvKiAzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0MCksbz1yKDE4NCksaT1yKDEzNikscz1PYmplY3QuZGVmaW5lUHJvcGVydHk7dC5mPXIoNDYpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aWYobihlKSx0PWkodCwhMCksbihyKSxvKXRyeXtyZXR1cm4gcyhlLHQscil9Y2F0Y2goZSl7fWlmKCJnZXQiaW4gcnx8InNldCJpbiByKXRocm93IFR5cGVFcnJvcigiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhIik7cmV0dXJuInZhbHVlImluIHImJihlW3RdPXIudmFsdWUpLGV9fSwvKiA0MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0MSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCFuKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gZX19LC8qIDQxICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LC8qIDQyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQ4KSgibWV0YSIpLG89cig2KSxpPXIoMjMpLHM9cigxMSkuZixhPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxmPWZ1bmN0aW9uKGUpe3MoZSxuLHt2YWx1ZTp7aToiTyIrICsrYSwvLyBvYmplY3QgSUQKdzp7fX19KX0sbD1mdW5jdGlvbihlLHQpewovLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CmlmKCFvKGUpKXJldHVybiJzeW1ib2wiPT10eXBlb2YgZT9lOigic3RyaW5nIj09dHlwZW9mIGU/IlMiOiJQIikrZTtpZighaShlLG4pKXsKLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKaWYoIXUoZSkpcmV0dXJuIkYiOwovLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQppZighdClyZXR1cm4iRSI7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0uaX0sZD1mdW5jdGlvbihlLHQpe2lmKCFpKGUsbikpewovLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAppZighdShlKSlyZXR1cm4hMDsKLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKaWYoIXQpcmV0dXJuITE7Ci8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCmYoZSl9cmV0dXJuIGVbbl0ud30scD1mdW5jdGlvbihlKXtyZXR1cm4gYyYmeS5ORUVEJiZ1KGUpJiYhaShlLG4pJiZmKGUpLGV9LHk9ZS5leHBvcnRzPXtLRVk6bixORUVEOiExLGZhc3RLZXk6bCxnZXRXZWFrOmQsb25GcmVlemU6cH19LC8qIDQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPSExfSwvKiA0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIyLjEuMy4zMSBBcnJheS5wcm90b3R5cGVbQEB1bnNjb3BhYmxlc10KdmFyIG49cig5KSgidW5zY29wYWJsZXMiKSxvPUFycmF5LnByb3RvdHlwZTt2b2lkIDA9PW9bbl0mJnIoMTgpKG8sbix7fSksZS5leHBvcnRzPWZ1bmN0aW9uKGUpe29bbl1bZV09ITB9fSwvKiA0NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5ncwp2YXIgbj1yKDE4Myksbz1yKDEyOCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuKG8oZSkpfX0sLyogNDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5CmUuZXhwb3J0cz0hcig2NikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSwvKiA0NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybntlbnVtZXJhYmxlOiEoMSZlKSxjb25maWd1cmFibGU6ISgyJmUpLHdyaXRhYmxlOiEoNCZlKSx2YWx1ZTp0fX19LC8qIDQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrcituKS50b1N0cmluZygzNikpfX0sLyogNDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTykKdmFyIG49cigxNTApLG89cigxMDUpO2UuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxvKX19LC8qIDUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM0KSxvPU1hdGgubWF4LGk9TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bihlKSxlPDA/byhlK3QsMCk6aShlLHQpfX0sLyogNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKdmFyIG49cigzKSxvPXIoMTUxKSxpPXIoMTA1KSxzPXIoMTA0KSgiSUVfUFJPVE8iKSxhPWZ1bmN0aW9uKCl7fSx1PWZ1bmN0aW9uKCl7Ci8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnCnZhciBlLHQ9cigxMDIpKCJpZnJhbWUiKSxuPWkubGVuZ3RoO2Zvcih0LnN0eWxlLmRpc3BsYXk9Im5vbmUiLHIoMTA2KS5hcHBlbmRDaGlsZCh0KSx0LnNyYz0iamF2YXNjcmlwdDoiLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybAovLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0OwovLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7CmU9dC5jb250ZW50V2luZG93LmRvY3VtZW50LGUub3BlbigpLGUud3JpdGUoIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XC9zY3JpcHQ+IiksZS5jbG9zZSgpLHU9ZS5GO24tLTspZGVsZXRlIHUucHJvdG90eXBlW2lbbl1dO3JldHVybiB1KCl9O2UuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbihlLHQpe3ZhciByOwovLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbApyZXR1cm4gbnVsbCE9PWU/KGEucHJvdG90eXBlPW4oZSkscj1uZXcgYSxhLnByb3RvdHlwZT1udWxsLHJbc109ZSk6cj11KCksdm9pZCAwPT09dD9yOm8ocix0KX19LC8qIDUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQp2YXIgbj1yKDE1MCksbz1yKDEwNSkuY29uY2F0KCJsZW5ndGgiLCJwcm90b3R5cGUiKTt0LmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsbyl9fSwvKiA1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNCksbz1yKDExKSxpPXIoMTApLHM9cig5KSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uW2VdO2kmJnQmJiF0W3NdJiZvLmYodCxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSwvKiA1NCAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixuKXtpZighKGUgaW5zdGFuY2VvZiB0KXx8dm9pZCAwIT09biYmbiBpbiBlKXRocm93IFR5cGVFcnJvcihyKyI6IGluY29ycmVjdCBpbnZvY2F0aW9uISIpO3JldHVybiBlfX0sLyogNTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjgpLG89cigxNjIpLGk9cigxMTgpLHM9cigzKSxhPXIoMTIpLHU9cigxMjApLGM9e30sZj17fSx0PWUuZXhwb3J0cz1mdW5jdGlvbihlLHQscixsLGQpe3ZhciBwLHksaCx2LGc9ZD9mdW5jdGlvbigpe3JldHVybiBlfTp1KGUpLGI9bihyLGwsdD8yOjEpLF89MDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZyl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBpdGVyYWJsZSEiKTsKLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yCmlmKGkoZykpe2ZvcihwPWEoZS5sZW5ndGgpO3A+XztfKyspaWYoKHY9dD9iKHMoeT1lW19dKVswXSx5WzFdKTpiKGVbX10pKT09PWN8fHY9PT1mKXJldHVybiB2fWVsc2UgZm9yKGg9Zy5jYWxsKGUpOyEoeT1oLm5leHQoKSkuZG9uZTspaWYoKHY9byhoLGIseS52YWx1ZSx0KSk9PT1jfHx2PT09ZilyZXR1cm4gdn07dC5CUkVBSz1jLHQuUkVUVVJOPWZ9LC8qIDU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbyBpbiB0KW4oZSxvLHRbb10scik7cmV0dXJuIGV9fSwvKiA1NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe3ZhciByPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiByLmNhbGwoZSx0KX19LC8qIDU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM5KSxvPXIoNzYpO2UuZXhwb3J0cz1yKDQ2KT9mdW5jdGlvbihlLHQscil7cmV0dXJuIG4uZihlLHQsbygxLHIpKX06ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlW3RdPXIsZX19LC8qIDU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NTYpLF9fZXNNb2R1bGU6ITB9fSwvKiA2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMSkuZixvPXIoMjMpLGk9cig5KSgidG9TdHJpbmdUYWciKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LC8qIDYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigzMyksaT1yKDUpLHM9cigxMDgpLGE9IlsiK3MrIl0iLHU9IuKAi8KFIixjPVJlZ0V4cCgiXiIrYSthKyIqIiksZj1SZWdFeHAoYSthKyIqJCIpLGw9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPXt9LGE9aShmdW5jdGlvbigpe3JldHVybiEhc1tlXSgpfHx1W2VdKCkhPXV9KSxjPW9bZV09YT90KGQpOnNbZV07ciYmKG9bcl09YyksbihuLlArbi5GKmEsIlN0cmluZyIsbyl9LGQ9bC50cmltPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9U3RyaW5nKG8oZSkpLDEmdCYmKGU9ZS5yZXBsYWNlKGMsIiIpKSwyJnQmJihlPWUucmVwbGFjZShmLCIiKSksZX07ZS5leHBvcnRzPWx9LC8qIDYyICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPXt9fSwvKiA2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtpZighbihlKXx8ZS5fdCE9PXQpdGhyb3cgVHlwZUVycm9yKCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICIrdCsiIHJlcXVpcmVkISIpO3JldHVybiBlfX0sLyogNjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTykKdmFyIG49cigxODIpLG89cigxMzMpO2UuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSxvKX19LC8qIDY1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBuPXIoOTUpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7aWYobihlKSx2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChyKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKHIpe3JldHVybiBlLmNhbGwodCxyKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihyLG4pe3JldHVybiBlLmNhbGwodCxyLG4pfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKHIsbixvKXtyZXR1cm4gZS5jYWxsKHQscixuLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0LGFyZ3VtZW50cyl9fX0sLyogNjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LC8qIDY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoOTgpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiF0fHwib2JqZWN0IiE9PSh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOigwLG8uZGVmYXVsdCkodCkpJiYiZnVuY3Rpb24iIT10eXBlb2YgdD9lOnR9fSwvKiA2OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQ1OCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0NjIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoOTgpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKTt0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiKyh2b2lkIDA9PT10PyJ1bmRlZmluZWQiOigwLHUuZGVmYXVsdCkodCkpKTtlLnByb3RvdHlwZT0oMCxzLmRlZmF1bHQpKHQmJnQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSx0JiYoby5kZWZhdWx0PygwLG8uZGVmYXVsdCkoZSx0KTplLl9fcHJvdG9fXz10KX19LC8qIDY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NjcpLF9fZXNNb2R1bGU6ITB9fSwvKiA3MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCnZhciBuPXIoMjkpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCmUuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0sLyogNzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LC8qIDcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIG49cigyOSksbz1yKDkpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PW4oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxzPWZ1bmN0aW9uKGUsdCl7dHJ5e3JldHVybiBlW3RdfWNhdGNoKGUpe319O2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdCxyLGE7cmV0dXJuIHZvaWQgMD09PWU/IlVuZGVmaW5lZCI6bnVsbD09PWU/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yocj1zKHQ9T2JqZWN0KGUpLG8pKT9yOmk/bih0KToiT2JqZWN0Ij09KGE9bih0KSkmJiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNhbGxlZT8iQXJndW1lbnRzIjphfX0sLyogNzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpCnZhciBuPXIoMTI4KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChuKGUpKX19LC8qIDc0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9e30udG9TdHJpbmc7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiByLmNhbGwoZSkuc2xpY2UoOCwtMSl9fSwvKiA3NSAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz0hMH0sLyogNzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm57ZW51bWVyYWJsZTohKDEmZSksY29uZmlndXJhYmxlOiEoMiZlKSx3cml0YWJsZTohKDQmZSksdmFsdWU6dH19fSwvKiA3NyAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz17fX0sLyogNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt0LmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LC8qIDc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI3KSxvPXIoNCksaT1vWyJfX2NvcmUtanNfc2hhcmVkX18iXXx8KG9bIl9fY29yZS1qc19zaGFyZWRfXyJdPXt9KTsoZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGlbZV18fChpW2VdPXZvaWQgMCE9PXQ/dDp7fSl9KSgidmVyc2lvbnMiLFtdKS5wdXNoKHt2ZXJzaW9uOm4udmVyc2lvbixtb2RlOnIoNDMpPyJwdXJlIjoiZ2xvYmFsIixjb3B5cmlnaHQ6IsKpIDIwMTggRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSkifSl9LC8qIDgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZgovLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcwp2YXIgbj1yKDI0KSxvPXIoMTIpLGk9cig1MCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIscyl7dmFyIGEsdT1uKHQpLGM9byh1Lmxlbmd0aCksZj1pKHMsYyk7Ci8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQppZihlJiZyIT1yKXtmb3IoO2M+ZjspCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKaWYoKGE9dVtmKytdKSE9YSlyZXR1cm4hMH1lbHNlIGZvcig7Yz5mO2YrKylpZigoZXx8ZiBpbiB1KSYmdVtmXT09PXIpcmV0dXJuIGV8fGZ8fDA7cmV0dXJuIWUmJi0xfX19LC8qIDgxICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LC8qIDgyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudCkKdmFyIG49cigyOSk7ZS5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJBcnJheSI9PW4oZSl9fSwvKiA4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDcuMi44IElzUmVnRXhwKGFyZ3VtZW50KQp2YXIgbj1yKDYpLG89cigyOSksaT1yKDkpKCJtYXRjaCIpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gbihlKSYmKHZvaWQgMCE9PSh0PWVbaV0pPyEhdDoiUmVnRXhwIj09byhlKSl9fSwvKiA4NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig5KSgiaXRlcmF0b3IiKSxvPSExO3RyeXt2YXIgaT1bN11bbl0oKTtpLnJldHVybj1mdW5jdGlvbigpe289ITB9LAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbApBcnJheS5mcm9tKGksZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2goZSl7fWUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCF0JiYhbylyZXR1cm4hMTt2YXIgcj0hMTt0cnl7dmFyIGk9WzddLHM9aVtuXSgpO3MubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOnI9ITB9fSxpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIHN9LGUoaSl9Y2F0Y2goZSl7fXJldHVybiByfX0sLyogODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjEuMi41LjMgZ2V0IFJlZ0V4cC5wcm90b3R5cGUuZmxhZ3MKdmFyIG49cigzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZT1uKHRoaXMpLHQ9IiI7cmV0dXJuIGUuZ2xvYmFsJiYodCs9ImciKSxlLmlnbm9yZUNhc2UmJih0Kz0iaSIpLGUubXVsdGlsaW5lJiYodCs9Im0iKSxlLnVuaWNvZGUmJih0Kz0idSIpLGUuc3RpY2t5JiYodCs9InkiKSx0fX0sLyogODYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDE4KSxvPXIoMTkpLGk9cig1KSxzPXIoMzMpLGE9cig5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciB1PWEoZSksYz1yKHMsdSwiIltlXSksZj1jWzBdLGw9Y1sxXTtpKGZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHRbdV09ZnVuY3Rpb24oKXtyZXR1cm4gN30sNyE9IiJbZV0odCl9KSYmKG8oU3RyaW5nLnByb3RvdHlwZSxlLGYpLG4oUmVnRXhwLnByb3RvdHlwZSx1LDI9PXQ/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbC5jYWxsKGUsdGhpcyx0KX06ZnVuY3Rpb24oZSl7cmV0dXJuIGwuY2FsbChlLHRoaXMpfSkpfX0sLyogODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikKdmFyIG49cigzKSxvPXIoMTYpLGk9cig5KSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSwvKiA4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxvPW4ubmF2aWdhdG9yO2UuZXhwb3J0cz1vJiZvLnVzZXJBZ2VudHx8IiJ9LC8qIDg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0KSxvPXIoMCksaT1yKDE5KSxzPXIoNTYpLGE9cig0MiksdT1yKDU1KSxjPXIoNTQpLGY9cig2KSxsPXIoNSksZD1yKDg0KSxwPXIoNjApLHk9cigxMDkpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixoLHYsZyl7dmFyIGI9bltlXSxfPWIsbT12PyJzZXQiOiJhZGQiLFI9XyYmXy5wcm90b3R5cGUsdz17fSxTPWZ1bmN0aW9uKGUpe3ZhciB0PVJbZV07aShSLGUsImRlbGV0ZSI9PWU/ZnVuY3Rpb24oZSl7cmV0dXJuIShnJiYhZihlKSkmJnQuY2FsbCh0aGlzLDA9PT1lPzA6ZSl9OiJoYXMiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiEoZyYmIWYoZSkpJiZ0LmNhbGwodGhpcywwPT09ZT8wOmUpfToiZ2V0Ij09ZT9mdW5jdGlvbihlKXtyZXR1cm4gZyYmIWYoZSk/dm9pZCAwOnQuY2FsbCh0aGlzLDA9PT1lPzA6ZSl9OiJhZGQiPT1lP2Z1bmN0aW9uKGUpe3JldHVybiB0LmNhbGwodGhpcywwPT09ZT8wOmUpLHRoaXN9OmZ1bmN0aW9uKGUscil7cmV0dXJuIHQuY2FsbCh0aGlzLDA9PT1lPzA6ZSxyKSx0aGlzfSl9O2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBfJiYoZ3x8Ui5mb3JFYWNoJiYhbChmdW5jdGlvbigpeyhuZXcgXykuZW50cmllcygpLm5leHQoKX0pKSl7dmFyIGs9bmV3IF8sTz1rW21dKGc/e306LTAsMSkhPWssUD1sKGZ1bmN0aW9uKCl7ay5oYXMoMSl9KSxNPWQoZnVuY3Rpb24oZSl7bmV3IF8oZSl9KSxMPSFnJiZsKGZ1bmN0aW9uKCl7Zm9yKAovLyBWOCB+IENocm9taXVtIDQyLSBmYWlscyBvbmx5IHdpdGggNSsgZWxlbWVudHMKdmFyIGU9bmV3IF8sdD01O3QtLTspZVttXSh0LHQpO3JldHVybiFlLmhhcygtMCl9KTtNfHwoXz10KGZ1bmN0aW9uKHQscil7Yyh0LF8sZSk7dmFyIG49eShuZXcgYix0LF8pO3JldHVybiB2b2lkIDAhPXImJnUocix2LG5bbV0sbiksbn0pLF8ucHJvdG90eXBlPVIsUi5jb25zdHJ1Y3Rvcj1fKSwoUHx8TCkmJihTKCJkZWxldGUiKSxTKCJoYXMiKSx2JiZTKCJnZXQiKSksKEx8fE8pJiZTKG0pLAovLyB3ZWFrIGNvbGxlY3Rpb25zIHNob3VsZCBub3QgY29udGFpbnMgLmNsZWFyIG1ldGhvZApnJiZSLmNsZWFyJiZkZWxldGUgUi5jbGVhcn1lbHNlCi8vIGNyZWF0ZSBjb2xsZWN0aW9uIGNvbnN0cnVjdG9yCl89aC5nZXRDb25zdHJ1Y3Rvcih0LGUsdixtKSxzKF8ucHJvdG90eXBlLHIpLGEuTkVFRD0hMDtyZXR1cm4gcChfLGUpLHdbZV09XyxvKG8uRytvLlcrby5GKihfIT1iKSx3KSxnfHxoLnNldFN0cm9uZyhfLGUsdiksX319LC8qIDkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG4sbz1yKDQpLGk9cigxOCkscz1yKDQ4KSxhPXMoInR5cGVkX2FycmF5IiksdT1zKCJ2aWV3IiksYz0hKCFvLkFycmF5QnVmZmVyfHwhby5EYXRhVmlldyksZj1jLGw9MCxkPSJJbnQ4QXJyYXksVWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheSIuc3BsaXQoIiwiKTtsPDk7KShuPW9bZFtsKytdXSk/KGkobi5wcm90b3R5cGUsYSwhMCksaShuLnByb3RvdHlwZSx1LCEwKSk6Zj0hMTtlLmV4cG9ydHM9e0FCVjpjLENPTlNUUjpmLFRZUEVEOmEsVklFVzp1fX0sLyogOTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gRm9yY2VkIHJlcGxhY2VtZW50IHByb3RvdHlwZSBhY2Nlc3NvcnMgbWV0aG9kcwplLmV4cG9ydHM9cig0Myl8fCFyKDUpKGZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5yYW5kb20oKTsKLy8gSW4gRkYgdGhyb3dzIG9ubHkgZGVmaW5lIG1ldGhvZHMKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmLCBuby11c2VsZXNzLWNhbGwKX19kZWZpbmVTZXR0ZXJfXy5jYWxsKG51bGwsZSxmdW5jdGlvbigpe30pLGRlbGV0ZSByKDQpW2VdfSl9LC8qIDkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8KdmFyIG49cigwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7bihuLlMsZSx7b2Y6ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKTtlLS07KXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBuZXcgdGhpcyh0KX19KX19LC8qIDkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8KdmFyIG49cigwKSxvPXIoMTYpLGk9cigyOCkscz1yKDU1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7bihuLlMsZSx7ZnJvbTpmdW5jdGlvbihlKXt2YXIgdCxyLG4sYSx1PWFyZ3VtZW50c1sxXTtyZXR1cm4gbyh0aGlzKSx0PXZvaWQgMCE9PXUsdCYmbyh1KSx2b2lkIDA9PWU/bmV3IHRoaXM6KHI9W10sdD8obj0wLGE9aSh1LGFyZ3VtZW50c1syXSwyKSxzKGUsITEsZnVuY3Rpb24oZSl7ci5wdXNoKGEoZSxuKyspKX0pKTpzKGUsITEsci5wdXNoLHIpLG5ldyB0aGlzKHIpKX19KX19LC8qIDk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dmFyIHI9MCxuPU1hdGgucmFuZG9tKCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJTeW1ib2woIi5jb25jYXQodm9pZCAwPT09ZT8iIjplLCIpXyIsKCsrcituKS50b1N0cmluZygzNikpfX0sLyogOTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LC8qIDk2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM5KS5mLG89cig1NyksaT1yKDIyKSgidG9TdHJpbmdUYWciKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2UmJiFvKGU9cj9lOmUucHJvdG90eXBlLGkpJiZuKGUsaSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnR9KX19LC8qIDk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0MzcpLF9fZXNNb2R1bGU6ITB9fSwvKiA5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fXQuX19lc01vZHVsZT0hMDt2YXIgbj1yKDQ0NCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig0NDYpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPSJmdW5jdGlvbiI9PXR5cGVvZiBzLmRlZmF1bHQmJiJzeW1ib2wiPT10eXBlb2Ygby5kZWZhdWx0P2Z1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBzLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1zLmRlZmF1bHQmJmUhPT1zLmRlZmF1bHQucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiBlfTt0LmRlZmF1bHQ9ImZ1bmN0aW9uIj09dHlwZW9mIHMuZGVmYXVsdCYmInN5bWJvbCI9PT1hKG8uZGVmYXVsdCk/ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/InVuZGVmaW5lZCI6YShlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBzLmRlZmF1bHQmJmUuY29uc3RydWN0b3I9PT1zLmRlZmF1bHQmJmUhPT1zLmRlZmF1bHQucHJvdG90eXBlPyJzeW1ib2wiOnZvaWQgMD09PWU/InVuZGVmaW5lZCI6YShlKX19LC8qIDk5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3QucnVudGltZVV0aWxzPXtydW50aW1lRGVzY3JpcHRvcjp7fSxydW50aW1lQ2FwYWJpbGl0aWVzOntjb25zdHJhaW50czp7fX19fSwvKiAxMDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cig3KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1yKDE0KSxkPWYuZ2V0TG9nZ2VyKCJhZGRyZXNzLWFsbG9jYXRpb24iKSxwPXZvaWQgMCx5PWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICAqLwovKioKICAgKiBDcmVhdGUgYW4gQWRkcmVzcyBBbGxvY2F0aW9uCiAgICogQHBhcmFtICB7VVJMLlVSTH0gICAgICB1cmwgLSB1cmwgZnJvbSB3aG8gaXMgc2VuZGluZyB0aGUgbWVzc2FnZQogICAqIEBwYXJhbSAge01pbmlCdXN9ICAgICAgYnVzIC0gTWluaUJ1cyB1c2VkIGZvciBhZGRyZXNzIGFsbG9jYXRpb24KICAgKi8KZnVuY3Rpb24gQWRkcmVzc0FsbG9jYXRpb24oZSx0LHIpe2lmKCgwLHMuZGVmYXVsdCkodGhpcyxBZGRyZXNzQWxsb2NhdGlvbikscClyZXR1cm4gcDt0aGlzLl91cmw9ZSsiL2FkZHJlc3MtYWxsb2NhdGlvbiIsdGhpcy5fYnVzPXQsdGhpcy5fcmVnaXN0cnk9cixwPXRoaXN9cmV0dXJuKDAsdS5kZWZhdWx0KShBZGRyZXNzQWxsb2NhdGlvbixbe2tleToiY3JlYXRlIiwvKioKICAgICAqCiAgICAgKiBBc2sgZm9yIGNyZWF0aW9uIG9mIGEgbnVtYmVyIG9mIEh5cGVydHkgYWRkcmVzc2VzLCB0byB0aGUgZG9tYWluIG1lc3NhZ2Ugbm9kZS4KICAgICAqCiAgICAgKiBAcGFyYW0ge0RvbWFpbn0gZG9tYWluIC0gZG9tYWluIG9mIHRoZSBtZXNzYWdlIG5vZGUKICAgICAqIEBwYXJhbSB7TnVtYmVyfSBudW1iZXIgLSBudW1iZXIgb2YgYWRkcmVzcyB0byBiZSBhbGxvY2F0ZWQKICAgICAqIEBwYXJhbSB7RGVzY3JpcHRvcn0gaW5mbyAtIGRlc2NyaXB0b3IgdG8gc2VhcmNoIGZvciB0aGUgaHlwZXJ0eSAoVE9ETzovLyB0aGlzIHNob3VsZCBiZSBjb25maXJtZWQpCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvZGF0YW1vZGVsL2NvcmUvaHlwZXJ0eS1jYXRhbG9ndWUvcmVhZG1lLm1kI2NhdGFsb2d1ZS1kYXRhLW1vZGVsCiAgICAgKiBAcGFyYW0ge3NjaGVtZX0gc2NoZW1lIC0gc2NoZW1lIG9mIGFkZHJlc3MgdG8gYmUgY3JlYXRlZCBvciByZXVzZWQsIGxpa2U6IGh5cGVydHksIGNvbW0sIGNvbnRleHQsIGV0YzsKICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxVUkwuSHlwZXJ0eVVSTH0gcmV1c2VVUkwgLSByZXVzZVVSTCBpcyB1c2VkIHRvIHJldXNlIHRoZSBoeXBlcnR5VVJMIHByZXZpb3VzbHkgcmVnaXN0cmVkOwogICAgICogQHJldHVybnMge1Byb21pc2U8T2JqZWN0LCBFcnJvcj59IHRoaXMgaXMgUHJvbWlzZSBhbmQgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB0aGUgYWRkcmVzcyBpbmZvcm1hdGlvbgogICAgICoKICAgICAqIEBtZW1iZXJPZiBBZGRyZXNzQWxsb2NhdGlvbgogICAgICovCnZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7Ci8vIC8vIGNvbnNvbGUubG9nKCd0eXBlb2YocmV1c2VVUkwpJywgdHlwZW9mKHJldXNlVVJMKSwgcmV1c2VVUkwpOwovL2RlYnVnZ2VyOwovLyAvLyBjb25zb2xlLmxvZygndHlwZW9mKHJldXNlVVJMKScsIHR5cGVvZihyZXVzZVVSTCksIHJldXNlVVJMKTsKLy9kZWJ1Z2dlcjsKcmV0dXJuIGk/ImJvb2xlYW4iPT10eXBlb2YgaT9pP3RoaXMuX3JldXNlQWxsb2NhdGVkQWRkcmVzcyhlLHQscixuLGkpOnRoaXMuX2FsbG9jYXRlTmV3QWRkcmVzcyhlLG4sdCk6InN0cmluZyI9PXR5cGVvZiBpJiYoMCxsLmlzVVJMKShpKT9uZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUoe25ld0FkZHJlc3M6ITEsYWRkcmVzczpbaV19KX0pOnZvaWQgMDooZC5pbmZvKCJbQWRkcmVzc0FsbG9jYXRpb25dIC0gbmV3IGFkZHJlc3Mgd2lsbCBiZSBhbGxvY2F0ZWQiKSx0aGlzLl9hbGxvY2F0ZU5ld0FkZHJlc3MoZSxuLHQpKX19LHtrZXk6Il9yZXVzZUFsbG9jYXRlZEFkZHJlc3MiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIHM9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGEpe3MuX3JlZ2lzdHJ5LmNoZWNrUmVnaXN0ZXJlZFVSTHMocixpKS50aGVuKGZ1bmN0aW9uKHIpe2lmKHIpe2QuaW5mbygiW0FkZHJlc3NBbGxvY2F0aW9uIC0gIituKyJdIC0gUmV1c2UgVVJMIik7byh7bmV3QWRkcmVzczohMSxhZGRyZXNzOnJ9KX1lbHNlInN0cmluZyI9PXR5cGVvZiBpPyhkLmluZm8oIltBZGRyZXNzQWxsb2NhdGlvbiAtIHJldXNlVVJMXSAtIE9iamVjdCAiK2krIiBub3QgZm91bmQiKSxhKCJVUkwgTm90IEZvdW5kIikpOiJib29sZWFuIj09dHlwZW9mIGk/cy5fYWxsb2NhdGVOZXdBZGRyZXNzKGUsbix0KS50aGVuKG8pLmNhdGNoKGEpOmEoIlVSTCBOb3QgRm91bmQiKX0pfSl9fSx7a2V5OiJfYWxsb2NhdGVOZXdBZGRyZXNzIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe3ZhciBzPXt0eXBlOiJjcmVhdGUiLGZyb206bi5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK2UrIi9hZGRyZXNzLWFsbG9jYXRpb24iLGJvZHk6e3ZhbHVlOntudW1iZXI6cn19fTsiaHlwZXJ0eSIhPT10JiYocy5ib2R5LnNjaGVtZT10KSxkLmluZm8oIltBZGRyZXNzQWxsb2NhdGlvbiAtICIrdCsiXSAtIFJlcXVlc3QgbmV3IFVSTCIpLG4uX2J1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKGUpe2lmKDIwMD09PWUuYm9keS5jb2RlKXt2YXIgdD17bmV3QWRkcmVzczohMCxhZGRyZXNzOmUuYm9keS52YWx1ZS5hbGxvY2F0ZWR9O28odCl9ZWxzZSBpKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJkZWxldGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXt0eXBlOiJkZWxldGUiLGZyb206ci5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK2UrIi9hZGRyZXNzLWFsbG9jYXRpb24iLGJvZHk6e2NoaWxkcmVuUmVzb3VyY2VzOnR9fTtyLl9idXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT9uKGUuYm9keS5jb2RlKTpvKGUuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJ1cmwiLC8qKgogICAgICogZ2V0IHRoZSBVUkwgdmFsdWUKICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVybCB2YWx1ZTsKICAgICAqLwpnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dLFt7a2V5OiJpbnN0YW5jZSIsZ2V0OmZ1bmN0aW9uKCl7aWYoIXApdGhyb3cgbmV3IEVycm9yKCJUaGUgYWRkcmVzcyBhbGxvY2F0aW9uIHdhcyBub3QgaW5zdGFudGlhdGVkIik7cmV0dXJuIHB9fV0pLEFkZHJlc3NBbGxvY2F0aW9ufSgpO3QuZGVmYXVsdD15LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDEwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDcpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxsPXIoMTQpLGQ9cig0OTIpLHA9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChkKSx5PWYuZ2V0TG9nZ2VyKCJDcnlwdG9NYW5hZ2VyIiksaD1mdW5jdGlvbigpey8qKgogICogVGhpcyBpcyB0aGUgY29uc3RydWN0b3IgdG8gaW5pdGlhbGlzZSB0aGUgQ3J5cHRvTWFuYWdlciwgaXQgZG9lcyBub3QgcmVxdWlyZSBhbnkgaW5wdXQuCiAgKiBUaGUgaW5pdCgpIG11c3QgY2FsbGVkIGluIG9yZGVyIHRvIHNldCBtYW5kYXRvcmllcyBhdHRyaWJ1dGVzCiAgKi8KZnVuY3Rpb24gQ3J5cHRvTWFuYWdlcihlKXsoMCxzLmRlZmF1bHQpKHRoaXMsQ3J5cHRvTWFuYWdlciksdGhpcy5zdG9yYWdlTWFuYWdlcj1lLHRoaXMudXNlckRlZmF1bHRLZXlSZWY9InVzZXJBc3ltbWV0cmljS2V5In1yZXR1cm4oMCx1LmRlZmF1bHQpKENyeXB0b01hbmFnZXIsW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLHMsYSl7dmFyIHU9dGhpcztpZighZSl0aHJvdyBuZXcgRXJyb3IoIltdIHJ1bnRpbWVVUkwgaXMgbWlzc2luZy4iKTtpZighcil0aHJvdyBuZXcgRXJyb3IoInN0b3JhZ2VNYW5hZ2VyIGlzIG1pc3NpbmciKTtpZighYSl0aHJvdyBuZXcgRXJyb3IoInJ1bnRpbWVGYWN0b3J5IGlzIG1pc3NpbmciKTt1Ll9ydW50aW1lVVJMPWUsdS5fY3J5cHRvTWFuYWdlclVSTD11Ll9ydW50aW1lVVJMKyIvY3J5cHRvTWFuYWdlciIsCi8vX3RoaXMuX215VVJMID0gX3RoaXMuX3J1bnRpbWVVUkwgKyAnL2NyeXB0byc7CnUuc3RvcmFnZU1hbmFnZXI9cix1LmRhdGFPYmplY3RzU3RvcmFnZT1uLHUucnVudGltZUNhcGFiaWxpdGllcz10LHUuX3J1bnRpbWVGYWN0b3J5PWEsdS5fZG9tYWluPSgwLGwuZGl2aWRlVVJMKSh1Ll9ydW50aW1lVVJMKS5kb21haW4sdS5jcnlwdG89bmV3IHAuZGVmYXVsdCh1Ll9ydW50aW1lRmFjdG9yeSksCi8vIGhhc2hUYWJsZSB0byBzdG9yZSBhbGwgdGhlIGNyeXB0byBpbmZvcm1hdGlvbiBiZXR3ZWVuIHR3byBoeXBlcnRpZXMKdS5jaGF0S2V5cz17fSwKLy8gaGFzaFRhYmxlIHRvIHN0b3JlIHRoZSBzeW1tZXRyaWMga2V5cyB0byBiZSB1c2VkIGluIHRoZSBjaGF0IGdyb3VwCnUuZGF0YU9iamVjdFNlc3Npb25LZXlzPXt9LAovL2ZhaWxzYWZlIHRvIGVuYWJsZS9kaXNhYmxlIGFsbCB0aGUgY3JpcHRvZ3JhcGhpYyBmdW5jdGlvbnMKdS5pc1RvVXNlRW5jcnlwdGlvbj0hMCx1Ll9yZWdpc3RyeT1vLHUuX2NvcmVEaXNjb3Zlcnk9aSx1Ll9pZG09c319LHtrZXk6ImxvYWRTZXNzaW9uS2V5cyIsCi8vIHRvIGJlIHVzZWQgdG8gaW5pdGlhbGlzZSBJRE0gd2l0aCBTZXNzaW9uS2V5cyB1c2VkIGluIHByZXZpb3VzIHNlc3Npb24KdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQpe2Uuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKHIpe2UuZGF0YU9iamVjdFNlc3Npb25LZXlzPXJ8fHt9LHQoKX0pfSl9fSx7a2V5OiJfaXNGcm9tUmVtb3RlU00iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiJydW50aW1lIj09PWUuc3BsaXQoIjovLyIpWzBdJiZlIT09dGhpcy5fcnVudGltZVVSTCsiL3NtIn19LHtrZXk6ImFkZENyeXB0b0dVSUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXsKLy9UT0RPOiBDaGFuZ2UgdGhlIEdVSSBpbnZvY2F0aW9uIG9mIHRoaXMgbWV0aG9kCnZhciBlPXRoaXM7ZS5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihlLl9jcnlwdG9NYW5hZ2VyVVJMLGZ1bmN0aW9uKHQpewovL2xldCByZXR1cm5lZFZhbHVlOwppZigiZ2VuZXJhdGVSU0FLZXlQYWlyIj09PXQuYm9keS5tZXRob2QpcmV0dXJuIHZvaWQgZS5fY3J5cHRvLmdldE15UHVibGljS2V5KCkudGhlbihmdW5jdGlvbihyKXt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0sbz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfWNhdGNoKGUpe3kuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIGdlbmVyYXRlUlNBS2V5UGFpciBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9KX19LHtrZXk6Il9pc1RvRW5jcnlwdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt5LmluZm8oIltDcnlwdG9NYW5hZ2VyLmlzdG9DaHlwZXJNb2R1bGVdIixlKTt2YXIgcj0iY3JlYXRlIj09PWUudHlwZSxuPWUuZnJvbS5pbmNsdWRlcygiaHlwZXJ0eTovLyIpLG89ZS50by5pbmNsdWRlcygiaHlwZXJ0eTovLyIpLGk9KDAsbC5pc0RhdGFPYmplY3RVUkwpKGUudG8pLHM9dC5yZWdpc3RyeS5nZXREYXRhT2JqZWN0UmVwb3J0ZXIoZS50byksYT0hZS5ib2R5Lmhhc093blByb3BlcnR5KCJtdXR1YWwiKXx8ZS5ib2R5Lm11dHVhbDsKLy9pZiBpcyBub3QgdG8gYXBwbHkgZW5jcnlwdGlvbiwgdGhlbiByZXR1cm5zIHJlc29sdmUKcmV0dXJuISFhJiYoKG51bGw9PT1zfHwhKDAsbC5pc0xlZ2FjeSkocykpJiYodGhpcy5pc1RvVXNlRW5jcnlwdGlvbnx8ImhhbmRzaGFrZSI9PT1lLnR5cGU/InVwZGF0ZSI9PT1lLnR5cGU/KHkuaW5mbygidXBkYXRlOmVuY3J5cHRpb24gZGlzYWJsZWQiKSwhMSk6ISgwLGwuaXNMZWdhY3kpKGUudG8pJiYociYmbiYmb3x8ciYmbiYmaSYmYXx8ImhhbmRzaGFrZSI9PT1lLnR5cGV8fCJ1cGRhdGUiPT09ZS50eXBlJiZhKTooeS5pbmZvKCJub3QgaGFuZHNoYWtlOiBlbmNyeXB0aW9uIGRpc2FibGVkIiksITEpKSl9fSx7a2V5OiJfaXNUb0RlY3J5cHQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtpZigic3Vic2NyaWJlIj09PWUudHlwZSZ0Ll9pc0Zyb21SZW1vdGVTTShlLmZyb20pKXt5LmxvZygiX2RvTXV0dWFsQXV0aGVudGljYXRpb25QaGFzZTEiKTt2YXIgbz10LnJlZ2lzdHJ5LmdldERhdGFPYmplY3RSZXBvcnRlcihlLnRvKTtpZihudWxsIT09byYmKDAsbC5pc0xlZ2FjeSkobykpcmV0dXJuIHIoITEpO3QuX2RvTXV0dWFsQXV0aGVudGljYXRpb25QaGFzZTEoZSkudGhlbihmdW5jdGlvbigpe3IoITEpfSxmdW5jdGlvbihlKXtuKGUpfSl9ZWxzZSBlLmhhc093blByb3BlcnR5KCJib2R5IikmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSYmInN0cmluZyI9PXR5cGVvZiBlLmJvZHkudmFsdWU/KHkubG9nKCJfaXNUb0RlY3J5cHQ6dHJ1ZSIpLHIoITApKTooeS5sb2coIl9pc1RvRGVjcnlwdDpmYWxzZSIpLHIoITEpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3kuZXJyb3IoIltDcnlwdG9NYW5hZ2VyLl9pc1RvRGVjcnlwdF0iLGUpfSl9fSx7a2V5OiJlbmNyeXB0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vbG9nLmluZm8oJ2VuY3J5cHRNZXNzYWdlOm1lc3NhZ2UnLCBtZXNzYWdlKTsKdmFyIHQ9dGhpcztyZXR1cm4geS5sb2coImVuY3J5cHQgbWVzc2FnZSAiKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89ImhhbmRzaGFrZSI9PT1lLnR5cGU7Ci8vaWYgaXMgbm90IHRvIGFwcGx5IGVuY3J5cHRpb24sIHRoZW4gcmV0dXJucyByZXNvbHZlCmlmKCF0Ll9pc1RvRW5jcnlwdChlKSkKLy8gbG9nLmxvZygnZGVjcnlwdGlvbiBkaXNhYmxlZCcpOwpyZXR1cm4gcihlKTt2YXIgaT0oMCxsLnBhcnNlTWVzc2FnZVVSTCkoZS50bykscz0oMCxsLmlzRGF0YU9iamVjdFVSTCkoaSksYT0oMCxsLmlzTGVnYWN5KShlLnRvKSx1PSJoeXBlcnR5Ij09PSgwLGwuZGl2aWRlVVJMKShlLmZyb20pLnR5cGUsYz0iaHlwZXJ0eSI9PT0oMCxsLmRpdmlkZVVSTCkoZS50bykudHlwZTtpZigidXBkYXRlIj09PWUudHlwZSlyZXR1cm4geS5sb2coImVuY3J5cHQgbWVzc2FnZTogbWVzc2FnZSB0eXBlIHVwZGF0ZSIpLHIoZSk7aWYoYSlyKGUpO2Vsc2UgaWYodSYmYyl7dmFyIGY9dC5fcmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUuZnJvbSk7aWYoZil7Ci8vIGNoZWNrIGlmIGV4aXN0cyBhbnkga2V5cyBiZXR3ZWVuIHR3byB1c2Vycwp2YXIgZD10LmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXTtpZihkfHwoZD10Ll9uZXdDaGF0Q3J5cHRvKGUsZiksCi8vbG9nLmxvZygnY3JlYXRlQ2hhdEtleSBlbmNyeXB0JywgbWVzc2FnZS5mcm9tICsgbWVzc2FnZS50byk7CnQuY2hhdEtleXNbZS5mcm9tKyI8LT4iK2UudG9dPWQsZS5ib2R5LmhhbmRzaGFrZVBoYXNlPSJzdGFydEhhbmRTaGFrZSIpLGQuYXV0aGVudGljYXRlZCYmIW8pe3ZhciBwPXQuY3J5cHRvLmdlbmVyYXRlSVYoKTt0LmNyeXB0by5lbmNyeXB0QUVTKGQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksKDAsbC5zdHJpbmdpZnkpKGUuYm9keS52YWx1ZSkscCkudGhlbihmdW5jdGlvbihuKXt2YXIgbz10Ll9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsKDAsbC5zdHJpbmdpZnkpKGUuYm9keS52YWx1ZSkrKDAsbC5zdHJpbmdpZnkpKHApLGQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pO3QuY3J5cHRvLmhhc2hITUFDKGQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksbykudGhlbihmdW5jdGlvbih0KXsKLy9sb2cubG9nKCdyZXN1bHQgb2YgaGFzaCAnLCBoYXNoKTsKdmFyIG89e2l2OigwLGwuZW5jb2RlKShwKSx2YWx1ZTooMCxsLmVuY29kZSkobiksaGFzaDooMCxsLmVuY29kZSkodCl9O2UuYm9keS52YWx1ZT0oMCxsLmVuY29kZSkobykscihlKX0pfSl9ZWxzZSBvP3IoZSk6dC5fZG9IYW5kU2hha2VQaGFzZShlLGQpLnRoZW4oZnVuY3Rpb24ocil7dC5jaGF0S2V5c1tlLmZyb20rIjwtPiIrZS50b109ci5jaGF0S2V5cyx0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIubWVzc2FnZSksbigiZW5jcnlwdCBoYW5kc2hha2UgcHJvdG9jb2wgcGhhc2UgIil9KX1lbHNlIG4oIkluIGVuY3J5cHRNZXNzYWdlOiBIeXBlcnR5IG93bmVyIFVSTCB3YXMgbm90IGZvdW5kIil9ZWxzZSB1JiZzJiYKLy9sb2cubG9nKCdkYXRhT2JqZWN0IHZhbHVlIHRvIGVuY3J5cHQ6ICcsIG1lc3NhZ2UuYm9keS52YWx1ZSk7Ci8vbG9nLmxvZygnSWRlbnRpdHlNb2R1bGUgLSBlbmNyeXB0IGZyb20gaHlwZXJ0eSB0byBkYXRhb2JqZWN0ICcsIG1lc3NhZ2UpOwp0LnN0b3JhZ2VNYW5hZ2VyLmdldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIikudGhlbihmdW5jdGlvbihvKXtvPSgwLGwuY2hhdGtleXNUb0FycmF5Q2xvbmVyKShvfHx7fSk7dmFyIHM9bz9vW2ldOm51bGw7dC5kYXRhT2JqZWN0c1N0b3JhZ2UuZ2V0RGF0YU9iamVjdChpKS50aGVuKGZ1bmN0aW9uKG8pewovL2lmIG5vIGtleSBleGlzdHMsIGNyZWF0ZSBhIG5ldyBvbmUgaWYgaXMgdGhlIHJlcG9ydGVyIG9mIGRhdGFPYmplY3QKaWYoIXMmJm8ucmVwb3J0ZXImJm8ucmVwb3J0ZXI9PT1lLmZyb20pe3ZhciBhPXQuY3J5cHRvLmdlbmVyYXRlUmFuZG9tKCk7dC5kYXRhT2JqZWN0U2Vzc2lvbktleXNbaV09e3Nlc3Npb25LZXk6YSxpc1RvRW5jcnlwdDohMH07dmFyIHU9KDAsbC5jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyKSh0LmRhdGFPYmplY3RTZXNzaW9uS2V5cyk7Ci8vVE9ETzogY2hlY2sgaWYgdGhpcyBkb2VzIG5vdCBuZWVkIHRvIGJlIHN0b3JlZAp0LnN0b3JhZ2VNYW5hZ2VyLnNldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIiwwLHUpLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk9uIGVuY3J5cHRNZXNzYWdlIGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLnNldCBlcnJvcjogIitlKX0pLHM9dC5kYXRhT2JqZWN0U2Vzc2lvbktleXNbaV19Ci8vY2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIHNlc3Npb24ga2V5IGZvciB0aGUgY2hhdCByb29tCmlmKHMpCi8vIGFuZCBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uLCBlbmNyeXB0IHRoZSBtZXNzYWdlcwppZihzLmlzVG9FbmNyeXB0KXt2YXIgYz10LmNyeXB0by5nZW5lcmF0ZUlWKCksZj0oMCxsLnN0cmluZ2lmeSkoYyksZD0oMCxsLnN0cmluZ2lmeSkoZS5ib2R5LnZhbHVlKTt0LmNyeXB0by5lbmNyeXB0QUVTKHMuc2Vzc2lvbktleSxkLGMpLnRoZW4oZnVuY3Rpb24obil7ZGVsZXRlIGUuYm9keS5pZGVudGl0eS5hc3NlcnRpb24sLy9UT0RPOiBDaGVjayB3aHkgYXNzZXJ0aW9uIGlzIGNvbW1pbmcgb24gdGhlIG1lc3NhZ2UhCmRlbGV0ZSBlLmJvZHkuaWRlbnRpdHkuZXhwaXJlczsvL1RPRE86IENoZWNrIHdoeSBleHBpcmVzIGlzIGNvbW1pbmcgb24gdGhlIG1lc3NhZ2UhCnZhciBvPXQuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxkK2YpO3QuY3J5cHRvLmhhc2hITUFDKHMuc2Vzc2lvbktleSxvKS50aGVuKGZ1bmN0aW9uKHQpewovLyBsb2cubG9nKCdoYXNoICcsIGhhc2gpOwp2YXIgbz17dmFsdWU6KDAsbC5lbmNvZGUpKG4pLGl2OigwLGwuZW5jb2RlKShjKSxoYXNoOigwLGwuZW5jb2RlKSh0KX07ZS5ib2R5LnZhbHVlPSgwLGwuc3RyaW5naWZ5KShvKSxyKGUpfSl9KX1lbHNlIHIoZSk7ZWxzZSBuKCJEYXRhIG9iamVjdCBrZXkgY291bGQgbm90IGJlIGRlZmluZWQ6IEZhaWxlZCB0byBkZWNyeXB0IG1lc3NhZ2UgIil9KS5jYXRjaChmdW5jdGlvbihlKXtuKCJPbiBlbmNyeXB0TWVzc2FnZSBmcm9tIG1ldGhvZCBkYXRhT2JqZWN0c1N0b3JhZ2UuZ2V0RGF0YU9iamVjdCBlcnJvcjogIitlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bigiT24gZW5jcnlwdE1lc3NhZ2UgZnJvbSBtZXRob2Qgc3RvcmFnZU1hbmFnZXIuZ2V0IGVycm9yOiAiK2UpfSl9KX19LHtrZXk6ImVuY3J5cHREYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt5LmluZm8oImRhdGFPYmplY3QgdmFsdWUgdG8gZW5jcnlwdDogIixlKTt2YXIgaT0oMCxsLnBhcnNlTWVzc2FnZVVSTCkodCk7ci5zdG9yYWdlTWFuYWdlci5nZXQoImRhdGFPYmplY3RTZXNzaW9uS2V5cyIpLnRoZW4oZnVuY3Rpb24odCl7dD0oMCxsLmNoYXRrZXlzVG9BcnJheUNsb25lcikodHx8e30pO3ZhciBzPXQ/dFtpXTpudWxsOwovL2NoZWNrIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBzZXNzaW9uIGtleSBmb3IgdGhlIGNoYXQgcm9vbQppZighcylyZXR1cm4gbygiTm8gZGF0YU9iamVjdEtleSBmb3IgdGhpcyBkYXRhT2JqZWN0VVJMOiIsaSk7Ci8vIGFuZCBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uLCBlbmNyeXB0IHRoZSBtZXNzYWdlcwppZighcy5pc1RvRW5jcnlwdClyZXR1cm4geS5pbmZvKCJUaGUgZGF0YU9iamVjdCBpcyBub3QgZW5jcnlwdGVkIiksbihlKTt2YXIgYT1yLmNyeXB0by5nZW5lcmF0ZUlWKCk7ci5jcnlwdG8uZW5jcnlwdEFFUyhzLnNlc3Npb25LZXksKDAsbC5zdHJpbmdpZnkpKGUpLGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9e3ZhbHVlOigwLGwuZW5jb2RlKShlKSxpdjooMCxsLmVuY29kZSkoYSl9OwovL2xvZy5sb2coJ2VuY3J5cHRlZCBkYXRhT2JqZWN0JywgbmV3VmFsdWUpOwpyZXR1cm4gbih0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIGVuY3J5cHREYXRhT2JqZWN0IGZyb20gbWV0aG9kIGVuY3J5cHRBRVMgZXJyb3I6ICIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIGVuY3J5cHREYXRhT2JqZWN0IGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLmdldCBlcnJvcjogIitlKX0pfSl9fSx7a2V5OiJkZWNyeXB0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy8gIGxvZy5sb2coJ2RlY3J5cHRNZXNzYWdlOm1lc3NhZ2UnLCBtZXNzYWdlKTsKcmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz0iaGFuZHNoYWtlIj09PWUudHlwZTt0Ll9pc1RvRGVjcnlwdChlKS50aGVuKGZ1bmN0aW9uKGkpewovL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQppZighaSlyZXR1cm4gcihlKTt2YXIgcz0oMCxsLnBhcnNlTWVzc2FnZVVSTCkoZS50byksYT0oMCxsLmlzRGF0YU9iamVjdFVSTCkocyksdT0iaHlwZXJ0eSI9PT0oMCxsLmRpdmlkZVVSTCkoZS5mcm9tKS50eXBlLGM9Imh5cGVydHkiPT09KDAsbC5kaXZpZGVVUkwpKGUudG8pLnR5cGU7aWYoInVwZGF0ZSI9PT1lLnR5cGUpcmV0dXJuIHIoZSk7Ci8vaXMgaXMgaHlwZXJ0eSB0byBoeXBlcnR5IGNvbW11bmljYXRpb24KaWYodSYmYyl7Ci8vIGxvZy5sb2coJ2RlY3J5cHQgaHlwZXJ0eSB0byBoeXBlcnR5Jyk7CnZhciBmPXQuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlLnRvKTtpZihmKXt2YXIgZD10LmNoYXRLZXlzW2UudG8rIjwtPiIrZS5mcm9tXTtpZihkfHwoZD10Ll9uZXdDaGF0Q3J5cHRvKGUsZiwiZGVjcnlwdCIpLHQuY2hhdEtleXNbZS50bysiPC0+IitlLmZyb21dPWQpLGQuYXV0aGVudGljYXRlZCYmIW8pe3ZhciBwPSgwLGwuZGVjb2RlKShlLmJvZHkudmFsdWUpLGg9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHAuaXYpLHY9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHAudmFsdWUpLGc9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHAuaGFzaCk7dC5jcnlwdG8uZGVjcnlwdEFFUyhkLmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSx2LGgpLnRoZW4oZnVuY3Rpb24obil7Ci8vIGxvZy5sb2coJ2RlY3J5cHRlZCB2YWx1ZSAnLCBkZWNyeXB0ZWREYXRhKTsKZS5ib2R5LnZhbHVlPW47dmFyIG89dC5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4raCk7dC5jcnlwdG8udmVyaWZ5SE1BQyhkLmtleXMuaHlwZXJ0eVRvSGFzaEtleSxvLGcpLnRoZW4oZnVuY3Rpb24odCl7Ci8vbG9nLmxvZygncmVzdWx0IG9mIGhhc2ggdmVyaWZpY2F0aW9uISAnLCByZXN1bHQpOwplLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eT0hMCxyKGUpfSl9KX1lbHNlIG8/dC5fZG9IYW5kU2hha2VQaGFzZShlLGQpLnRoZW4oZnVuY3Rpb24ocil7Ci8vaWYgaXQgd2FzIHN0YXJ0ZWQgYnkgZG9NdXR1YWxBdXRoZW50aWNhdGlvbiB0aGVuIGVuZHMgdGhlIHByb3RvY29sCiJoYW5kU2hha2VFbmQiPT09cnx8KHQuY2hhdEtleXNbZS50bysiPC0+IitlLmZyb21dPXIuY2hhdEtleXMsdC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyLm1lc3NhZ2UpKX0pOm4oIndyb25nIG1lc3NhZ2UgZG8gZGVjcnlwdCIpfWVsc2UgbigiZXJyb3Igb24gZGVjcnlwdCBtZXNzYWdlIil9ZWxzZSB1JiZhPwovLyBsb2cubG9nKCdkYXRhT2JqZWN0IHZhbHVlIHRvIGRlY3J5cHQ6ICcsIG1lc3NhZ2UuYm9keSk7CnQuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKG8pe289KDAsbC5jaGF0a2V5c1RvQXJyYXlDbG9uZXIpKG98fHt9KTt2YXIgaT1vP29bc106bnVsbDtpZihpKQovL2NoZWNrIGlmIGlzIHRvIGFwcGx5IGVuY3J5cHRpb24KaWYoaS5pc1RvRW5jcnlwdCl7dmFyIGE9KDAsbC5wYXJzZSkoZS5ib2R5LnZhbHVlKSx1PSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhLml2KSxjPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhLnZhbHVlKSxmPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhLmhhc2gpO3QuY3J5cHRvLmRlY3J5cHRBRVMoaS5zZXNzaW9uS2V5LGMsdSkudGhlbihmdW5jdGlvbihvKXt2YXIgcz0oMCxsLnBhcnNlKShvKTsKLy8gbG9nLmxvZygnZGVjcnlwdGVkIFZhbHVlLCcsIHBhcnNlZFZhbHVlKTsKZS5ib2R5LnZhbHVlPXM7dmFyIGE9dC5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLCgwLGwuc3RyaW5naWZ5KShzKSsoMCxsLnN0cmluZ2lmeSkodSkpO3QuY3J5cHRvLnZlcmlmeUhNQUMoaS5zZXNzaW9uS2V5LGEsZikudGhlbihmdW5jdGlvbih0KXt5LmxvZygiUmVjZWl2ZWQgbWVzc2FnZSBITUFDIHJlc3VsdCIsdCksZS5ib2R5LmFzc2VydGVkSWRlbnRpdHk9ITAscihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oIk1lc3NhZ2UgSE1BQyBpcyBpbnZhbGlkOiAiK2UpfSl9KX1lbHNlIGUuYm9keS5hc3NlcnRlZElkZW50aXR5PSEwLHIoZSk7ZWxzZSBlLmJvZHkuYXNzZXJ0ZWRJZGVudGl0eT0hMCxyKGUpfSk6bigid3JvbmcgbWVzc2FnZSB0byBkZWNyeXB0Iil9KX0pfX0se2tleToiZGVjcnlwdERhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pewovL2lmIGlzIG5vdCB0byBhcHBseSBlbmNyeXB0aW9uLCB0aGVuIHJldHVybnMgcmVzb2x2ZQppZighci5pc1RvVXNlRW5jcnlwdGlvbikKLy8gbG9nLmxvZygnZGVjcnlwdGlvbiBkaXNhYmxlZCcpOwpyZXR1cm4gbihlKTt2YXIgaT0oMCxsLnBhcnNlTWVzc2FnZVVSTCkodCk7Ci8vIGxvZy5sb2coJ2RhdGFPYmplY3QgdmFsdWUgdG8gZGVjcnlwdDogJywgZGF0YU9iamVjdCk7CnIuc3RvcmFnZU1hbmFnZXIuZ2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiKS50aGVuKGZ1bmN0aW9uKHQpe3Q9KDAsbC5jaGF0a2V5c1RvQXJyYXlDbG9uZXIpKHQpO3ZhciBzPXQ/dFtpXTpudWxsO2lmKCFzKXJldHVybiBvKCJObyBkYXRhT2JqZWN0S2V5IGZvciB0aGlzIGRhdGFPYmplY3RVUkw6IixpKTsKLy9jaGVjayBpZiBpcyB0byBhcHBseSBlbmNyeXB0aW9uCmlmKCFzLmlzVG9FbmNyeXB0KQovLyBsb2cubG9nKCdUaGUgZGF0YU9iamVjdCBpcyBub3QgZW5jcnlwdGVkJyk7CnJldHVybiBuKGUpO3ZhciBhPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShlLml2KSx1PSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShlLnZhbHVlKTtyLmNyeXB0by5kZWNyeXB0QUVTKHMuc2Vzc2lvbktleSx1LGEpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9KDAsbC5wYXJzZSkoZSkscj17dmFsdWU6dCxpdjooMCxsLmVuY29kZSkoYSl9OwovLyBsb2cubG9nKCdkZWNyeXB0ZWQgZGF0YU9iamVjdCwnLCBuZXdWYWx1ZSk7CnJldHVybiBuKHIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gZGVjcnlwdERhdGFPYmplY3QgZnJvbSBtZXRob2QgZW5jcnlwdEFFUyBlcnJvcjogIitlKX0pfSl9KX19LHtrZXk6Il9kb011dHVhbEF1dGhlbnRpY2F0aW9uUGhhc2UxIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89ZS50by5zcGxpdCgiLyIpOwovL2xldCBzdWJzSW5kZXggPSB0by5pbmRleE9mKCdzdWJzY3JpcHRpb24nKTsKLy9sZXQgaXNEYXRhT2JqZWN0U3Vic2NyaXB0aW9uID0gc3Vic0luZGV4ICE9PSAtMTsKby5wb3AoKTt2YXIgaT1vWzBdKyIvLyIrb1syXSsiLyIrb1szXTt0Ll9kb011dHVhbEF1dGhlbnRpY2F0aW9uUGhhc2UyKGksZS5ib2R5LnN1YnNjcmliZXIpLnRoZW4oZnVuY3Rpb24oKXt0Ll9yZWdpc3RyeS5yZWdpc3RlclN1YnNjcmliZXIoaSxlLmJvZHkuc3Vic2NyaWJlcikscigpfSxmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6Il9kb011dHVhbEF1dGhlbnRpY2F0aW9uUGhhc2UyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3kuaW5mbygiZG9NdXR1YWxBdXRoZW50aWNhdGlvbjpzZW5kZXIgIixlKSx5LmluZm8oImRvTXV0dWFsQXV0aGVudGljYXRpb246cmVjZWl2ZXIgIix0KTt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9dm9pZCAwLHM9ci5fcmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKGUpO3MmJihpPWUsZT1zKTt2YXIgYT17dG86dCxmcm9tOmUsY2FsbGJhY2s6dm9pZCAwLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzdGFydEhhbmRTaGFrZSIsaWdub3JlOiJpZ25vcmVNZXNzYWdlIn19O2lmKCFlfHwhdClyZXR1cm4gbygic2VuZGVyIG9yIHJlY2VpdmVyIG1pc3Npbmcgb24gZG9NdXR1YWxBdXRoZW50aWNhdGlvbiIpO3ZhciB1PXIuY2hhdEtleXNbZSsiPC0+Iit0XSxjPXIuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlKTtpZihjKXtpZighdSl7Ci8vIGNhbGxiYWNrIHRvIHJlc29sdmUgd2hlbiBmaW5pc2ggdGhlIG11dHVhbCBhdXRoZW50aWNhdGlvbgp2YXIgZj1mdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY2FsbGJhY2sgdmFsdWU6JywgdmFsdWUpOwpuKGUpfTthLmNhbGxiYWNrPWYsYS5kYXRhT2JqZWN0VVJMPWksdT1yLl9uZXdDaGF0Q3J5cHRvKGEsYyksci5jaGF0S2V5c1tlKyI8LT4iK3RdPXV9aWYodS5hdXRoZW50aWNhdGVkKXt2YXIgbD17dG86ZSxmcm9tOnR9O3UuZGF0YU9iamVjdFVSTD1pLHIuX3NlbmRSZXBvcnRlclNlc3Npb25LZXkobCx1KS50aGVuKGZ1bmN0aW9uKGUpe3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZS5tZXNzYWdlKSxuKCJleGNoYW5nZSBvZiBjaGF0IHNlc3Npb25LZXkgaW5pdGlhdGVkIil9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBkb011dHVhbEF1dGhlbnRpY2F0aW9uIGZyb20gbWV0aG9kIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGVycm9yOiAiK2UpfSl9ZWxzZSByLl9kb0hhbmRTaGFrZVBoYXNlKGEsdSl9ZWxzZSBvKCJNdXR1YWwgYXV0aGVudGljYXRpb24gZXJyb3I6IEh5cGVydHkgb3duZXIgY291bGQgbm90IGJlIHJlc29sdmVkIil9KX19LHtrZXk6Il9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1yLmRhdGFPYmplY3RTZXNzaW9uS2V5c1t0LmRhdGFPYmplY3RVUkxdLHM9dm9pZCAwLGE9dm9pZCAwLHU9dm9pZCAwLGM9dm9pZCAwLGY9e307Ci8vaWYgdGhlcmUgaXMgbm90IHlldCBhIHNlc3Npb24gS2V5LCBnZW5lcmF0ZXMgYSBuZXcgb25lCmlmKGkpdT1pLnNlc3Npb25LZXk7ZWxzZXt1PXIuY3J5cHRvLmdlbmVyYXRlUmFuZG9tKCksci5kYXRhT2JqZWN0U2Vzc2lvbktleXNbdC5kYXRhT2JqZWN0VVJMXT17c2Vzc2lvbktleTp1LGlzVG9FbmNyeXB0OiEwfTt2YXIgZD0oMCxsLmNoYXRrZXlzVG9TdHJpbmdDbG9uZXIpKHIuZGF0YU9iamVjdFNlc3Npb25LZXlzKTtyLnN0b3JhZ2VNYW5hZ2VyLnNldCgiZGF0YU9iamVjdFNlc3Npb25LZXlzIiwwLGQpLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGZyb20gbWV0aG9kIHN0b3JhZ2VNYW5hZ2VyLnNldChkYXRhT2JqZWN0U2Vzc2lvbktleXMuLi4pIGVycm9yOiAiK2UpfSl9dHJ5e2E9KDAsbC5lbmNvZGUpKHt2YWx1ZTooMCxsLmVuY29kZSkodSksZGF0YU9iamVjdFVSTDp0LmRhdGFPYmplY3RVUkx9KX1jYXRjaChlKXtyZXR1cm4gbygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBtZXRob2Qgc3RvcmFnZU1hbmFnZXIuc2V0IGVycm9yIHZhbHVlVG9FbmNyeXB0OiAiK2UpfWM9ci5jcnlwdG8uZ2VuZXJhdGVJVigpLGYuaXY9KDAsbC5lbmNvZGUpKGMpLHIuY3J5cHRvLmVuY3J5cHRBRVModC5rZXlzLmh5cGVydHlGcm9tU2Vzc2lvbktleSxhLGMpLnRoZW4oZnVuY3Rpb24obil7cz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJyZXBvcnRlclNlc3Npb25LZXkiLHZhbHVlOigwLGwuZW5jb2RlKShuKX19O3ZhciBvPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2gocyxhK2MsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7cmV0dXJuIHIuY3J5cHRvLmhhc2hITUFDKHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksbyl9KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciByPSgwLGwuZW5jb2RlKSh7dmFsdWU6cy5ib2R5LnZhbHVlLGhhc2g6KDAsbC5lbmNvZGUpKGUpLGl2OmYuaXZ9KTtzLmJvZHkudmFsdWU9cixuKHttZXNzYWdlOnMsY2hhdEtleXM6dH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBjaGFpbmVkIHByb21pc2VzIGVuY3J5cHRBRVMgZXJyb3I6ICIrZSl9KX0pfX0se2tleToiX3Jlc29sdmVEb21haW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyJkb21haW4taWRwOi8vIitlOiJkb21haW4taWRwOi8vZ29vZ2xlLmNvbSJ9fSx7a2V5OiJfZG9IYW5kU2hha2VQaGFzZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXsKLy8gbG9nKCdfZG9IYW5kU2hha2VQaGFzZTpkYXRhT2JqZWN0JywgbWVzc2FnZSk7Ci8vCWxvZygnX2RvSGFuZFNoYWtlUGhhc2U6Y2hhdEtleXMnLCBjaGF0S2V5cyk7CnZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1lLmJvZHkuaGFuZHNoYWtlUGhhc2Uscz12b2lkIDAsYT12b2lkIDAsdT17fSxjPXZvaWQgMCxmPXZvaWQgMDtzd2l0Y2goeS5pbmZvKCJoYW5kc2hha2UgcGhhc2U6ICIsaSksaSl7Y2FzZSJzdGFydEhhbmRTaGFrZSI6dC5rZXlzLmZyb21SYW5kb209ci5jcnlwdG8uZ2VuZXJhdGVSYW5kb20oKTt2YXIgZD17dHlwZToiaGFuZHNoYWtlIix0bzplLnRvLGZyb206ZS5mcm9tLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzZW5kZXJIZWxsbyIsdmFsdWU6KDAsbC5lbmNvZGUpKHQua2V5cy5mcm9tUmFuZG9tKX19O3QuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGQsdm9pZCAwLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLAovLyBjaGVjayBpZiB3YXMgdGhlIGVuY3J5cHQgZnVuY3Rpb24gb3IgdGhlIG11dHVhbCBhdXRoZW50aWNhdGlvbiB0aGF0IHJlcXVlc3QgdGhlCi8vIHN0YXJ0IG9mIHRoZSBoYW5kU2hha2VQaGFzZS4KdC5pbml0aWFsTWVzc2FnZT9uKHttZXNzYWdlOmQsY2hhdEtleXM6dH0pOihyLmNoYXRLZXlzW2UuZnJvbSsiPC0+IitlLnRvXT10LHIuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZCkpO2JyZWFrO2Nhc2Uic2VuZGVySGVsbG8iOnkubG9nKCJzZW5kZXJIZWxsbyIpLHQuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUpLHQua2V5cy5mcm9tUmFuZG9tPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShlLmJvZHkudmFsdWUpLHQua2V5cy50b1JhbmRvbT1yLmNyeXB0by5nZW5lcmF0ZVJhbmRvbSgpO3ZhciBwPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVySGVsbG8iLHZhbHVlOigwLGwuZW5jb2RlKSh0LmtleXMudG9SYW5kb20pfX07dC5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVySGVsbG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChwLHZvaWQgMCx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSxuKHttZXNzYWdlOnAsY2hhdEtleXM6dH0pO2JyZWFrO2Nhc2UicmVjZWl2ZXJIZWxsbyI6eS5sb2coInJlY2VpdmVySGVsbG8iKSxyLmdldE15UHJpdmF0ZUtleSgpLnRoZW4oZnVuY3Rpb24obil7cmV0dXJuIGY9bix0LmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJIZWxsbz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUpLHIuX2lkbS52YWxpZGF0ZUFzc2VydGlvbihlLmJvZHkuaWRlbnRpdHkuYXNzZXJ0aW9uLHZvaWQgMCxlLmJvZHkuaWRlbnRpdHkuaWRwLmRvbWFpbil9KS50aGVuKGZ1bmN0aW9uKG4pewovL1RPRE8gcmVtb3ZlIGxhdGVyIHRoaXMgdmVyaWZpY2F0aW9uIGFzIHNvb24gYXMgYWxsIHRoZSBJZFAgcHJveHkgYXJlIHVwZGF0ZWQgaW4gdGhlIGV4YW1wbGUKdmFyIG89InN0cmluZyI9PXR5cGVvZiBuLmNvbnRlbnRzP24uY29udGVudHM6bi5jb250ZW50cy5ub25jZSxpPSgwLGwucGFyc2VUb1VpbnQ4QXJyYXkpKG8pLHM9ci5jcnlwdG8uZ2VuZXJhdGVQTVMoKSxhPWUuYm9keS52YWx1ZTt0Lmh5cGVydHlUby5hc3NlcnRpb249ZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix0Lmh5cGVydHlUby5wdWJsaWNLZXk9aSx0Lmh5cGVydHlUby51c2VySUQ9ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsdC5rZXlzLnRvUmFuZG9tPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShhKSx0LmtleXMucHJlbWFzdGVyS2V5PXM7dmFyIHU9ci5jcnlwdG8uY29uY2F0UE1Td2l0aFJhbmRvbXMocyx0LmtleXMudG9SYW5kb20sdC5rZXlzLmZyb21SYW5kb20pO3JldHVybiByLmNyeXB0by5nZW5lcmF0ZU1hc3RlclNlY3JldCh1LCJtZXNzYWdlSGlzdG9yaWMiK3Qua2V5cy50b1JhbmRvbSt0LmtleXMuZnJvbVJhbmRvbSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LmtleXMubWFzdGVyS2V5PWUsci5jcnlwdG8uZ2VuZXJhdGVLZXlzKGUsImtleSBleHBhbnNpb24iK3Qua2V5cy50b1JhbmRvbSt0LmtleXMuZnJvbVJhbmRvbSl9KS50aGVuKGZ1bmN0aW9uKG4pe3Qua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KG5bMF0pLHQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXk9bmV3IFVpbnQ4QXJyYXkoblsxXSksdC5rZXlzLmh5cGVydHlUb0hhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoblsyXSksdC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleT1uZXcgVWludDhBcnJheShuWzNdKSxzPXIuY3J5cHRvLmdlbmVyYXRlSVYoKSx1Lml2PSgwLGwuZW5jb2RlKShzKTt2YXIgbz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJzZW5kZXJDZXJ0aWZpY2F0ZSJ9fTsKLy8gaGFzaCB0aGUgdmFsdWUgYW5kIHRoZSBpdgpyZXR1cm4gYz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKG8sIm9rIitzLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLHIuY3J5cHRvLmhhc2hITUFDKHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXksYyl9KS50aGVuKGZ1bmN0aW9uKGUpewovL2VuY3J5cHQgdGhlIGRhdGEKcmV0dXJuIHUuaGFzaD0oMCxsLmVuY29kZSkoZSksci5jcnlwdG8uZW5jcnlwdEFFUyh0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LCJvayIscyl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB1LnN5bWV0cmljRW5jcnlwdGlvbj0oMCxsLmVuY29kZSkoZSksci5jcnlwdG8uZW5jcnlwdFJTQSh0Lmh5cGVydHlUby5wdWJsaWNLZXksdC5rZXlzLnByZW1hc3RlcktleSl9KS50aGVuKGZ1bmN0aW9uKG4pe3UuYXNzeW1ldHJpY0VuY3J5cHRpb249KDAsbC5lbmNvZGUpKG4pO3ZhciBvPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InNlbmRlckNlcnRpZmljYXRlIn19LGk9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChvLHQua2V5cy5wcmVtYXN0ZXJLZXksdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyk7cmV0dXJuIHIuY3J5cHRvLnNpZ25SU0EoZiwoMCxsLmVuY29kZSkodC5oYW5kc2hha2VIaXN0b3J5KSsoMCxsLmVuY29kZSkoaSkpfSkudGhlbihmdW5jdGlvbihvKXt1LnNpZ25hdHVyZT0oMCxsLmVuY29kZSkobyk7dmFyIGk9e3R5cGU6ImhhbmRzaGFrZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5OntoYW5kc2hha2VQaGFzZToic2VuZGVyQ2VydGlmaWNhdGUiLHZhbHVlOigwLGwuZW5jb2RlKSh1KX19O3QuaGFuZHNoYWtlSGlzdG9yeS5zZW5kZXJDZXJ0aWZpY2F0ZT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGksIm9rIitzLHQuaHlwZXJ0eUZyb20ubWVzc2FnZUluZm8pLG4oe21lc3NhZ2U6aSxjaGF0S2V5czp0fSl9LGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSk7YnJlYWs7Y2FzZSJzZW5kZXJDZXJ0aWZpY2F0ZSI6eS5sb2coInNlbmRlckNlcnRpZmljYXRlIik7dmFyIGg9KDAsbC5kZWNvZGUpKGUuYm9keS52YWx1ZSk7ci5nZXRNeVByaXZhdGVLZXkoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBmPXQsci5faWRtLnZhbGlkYXRlQXNzZXJ0aW9uKGUuYm9keS5pZGVudGl0eS5hc3NlcnRpb24sdm9pZCAwLGUuYm9keS5pZGVudGl0eS5pZHAuZG9tYWluKX0pLnRoZW4oZnVuY3Rpb24obil7dmFyIG89KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGguYXNzeW1ldHJpY0VuY3J5cHRpb24pLGk9InN0cmluZyI9PXR5cGVvZiBuLmNvbnRlbnRzP24uY29udGVudHM6bi5jb250ZW50cy5ub25jZSxzPSgwLGwucGFyc2VUb1VpbnQ4QXJyYXkpKGkpO3JldHVybiB0Lmh5cGVydHlUby5hc3NlcnRpb249ZS5ib2R5LmlkZW50aXR5LmFzc2VydGlvbix0Lmh5cGVydHlUby5wdWJsaWNLZXk9cyx0Lmh5cGVydHlUby51c2VySUQ9ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsci5jcnlwdG8uZGVjcnlwdFJTQShmLG8pfSxmdW5jdGlvbihlKXsKLy8gbG9nLmxvZyhlcnJvcik7Cm8oIkVycm9yIGR1cmluZyBhdXRoZW50aWNhdGlvbiBvZiBpZGVudGl0eTogIixlLm1lc3NhZ2UpfSkudGhlbihmdW5jdGlvbihuKXt0LmtleXMucHJlbWFzdGVyS2V5PW5ldyBVaW50OEFycmF5KG4pO3ZhciBvPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShoLnNpZ25hdHVyZSksaT1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKGUsdC5rZXlzLnByZW1hc3RlcktleSk7cmV0dXJuIHIuY3J5cHRvLnZlcmlmeVJTQSh0Lmh5cGVydHlUby5wdWJsaWNLZXksKDAsbC5lbmNvZGUpKHQuaGFuZHNoYWtlSGlzdG9yeSkrKDAsbC5lbmNvZGUpKGkpLG8pfSkudGhlbihmdW5jdGlvbihlKXsKLy9sb2cubG9nKCdTZW5kZXJDZXJ0aWZpY2F0ZSAtIHNpZ25hdHVyZSB2YWxpZGF0aW9uIHJlc3VsdCAnLCBzaWduVmFsaWRhdGlvblJlc3VsdCk7CnZhciBuPXIuY3J5cHRvLmNvbmNhdFBNU3dpdGhSYW5kb21zKHQua2V5cy5wcmVtYXN0ZXJLZXksdC5rZXlzLnRvUmFuZG9tLHQua2V5cy5mcm9tUmFuZG9tKTtyZXR1cm4gci5jcnlwdG8uZ2VuZXJhdGVNYXN0ZXJTZWNyZXQobiwibWVzc2FnZUhpc3RvcmljIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdC5rZXlzLm1hc3RlcktleT1lLHIuY3J5cHRvLmdlbmVyYXRlS2V5cyhlLCJrZXkgZXhwYW5zaW9uIit0LmtleXMudG9SYW5kb20rdC5rZXlzLmZyb21SYW5kb20pfSkudGhlbihmdW5jdGlvbihlKXt0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KGVbMF0pLHQua2V5cy5oeXBlcnR5VG9TZXNzaW9uS2V5PW5ldyBVaW50OEFycmF5KGVbMV0pLHQua2V5cy5oeXBlcnR5RnJvbUhhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoZVsyXSksdC5rZXlzLmh5cGVydHlUb0hhc2hLZXk9bmV3IFVpbnQ4QXJyYXkoZVszXSkscz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoaC5pdik7dmFyIG49KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGguc3ltZXRyaWNFbmNyeXB0aW9uKTtyZXR1cm4gci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxuLHMpfSkudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygnZGVjcnlwdGVkRGF0YScsIGRlY3J5cHRlZERhdGEpOwp0LmhhbmRzaGFrZUhpc3Rvcnkuc2VuZGVyQ2VydGlmaWNhdGU9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7dmFyIG89KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGguaGFzaCk7cmV0dXJuIGM9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyksci5jcnlwdG8udmVyaWZ5SE1BQyh0LmtleXMuaHlwZXJ0eVRvSGFzaEtleSxjLG8pfSkudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIGhhc2ggdmVyaWZpY2F0aW9uICcsIHZlcmlmaWVkSGFzaCk7CnZhciBvPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVyRmluaXNoZWRNZXNzYWdlIn19OwovL2xvZy5sb2coJ1RJQUdPOiBkb0hhbmRTaGFrZVBoYXNlIHZlcmlmaWVkSGFzaCcpOwpyZXR1cm4gcz1yLmNyeXB0by5nZW5lcmF0ZUlWKCksdS5pdj0oMCxsLmVuY29kZSkocyksYz1yLl9maWx0ZXJNZXNzYWdlVG9IYXNoKG8sIm9rISIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKSxyLmNyeXB0by5oYXNoSE1BQyh0LmtleXMuaHlwZXJ0eUZyb21IYXNoS2V5LGMpfSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gdS5oYXNoPSgwLGwuZW5jb2RlKShlKSxyLmNyeXB0by5lbmNyeXB0QUVTKHQua2V5cy5oeXBlcnR5RnJvbVNlc3Npb25LZXksIm9rISIscyl9KS50aGVuKGZ1bmN0aW9uKG8pe3UudmFsdWU9KDAsbC5lbmNvZGUpKG8pO3ZhciBpPXt0eXBlOiJoYW5kc2hha2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7aGFuZHNoYWtlUGhhc2U6InJlY2VpdmVyRmluaXNoZWRNZXNzYWdlIix2YWx1ZTooMCxsLmVuY29kZSkodSl9fTt0LmhhbmRzaGFrZUhpc3RvcnkucmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2U9ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChpLCJvayEiK3MsdC5oeXBlcnR5RnJvbS5tZXNzYWdlSW5mbyksdC5hdXRoZW50aWNhdGVkPSEwLG4oe21lc3NhZ2U6aSxjaGF0S2V5czp0fSl9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfZG9IYW5kU2hha2VQaGFzZSBmcm9tIHNlbmRlckNlcnRpZmljYXRlIGVycm9yOiAiK2UpfSk7YnJlYWs7Y2FzZSJyZWNlaXZlckZpbmlzaGVkTWVzc2FnZSI6dC5hdXRoZW50aWNhdGVkPSEwLHU9KDAsbC5kZWNvZGUpKGUuYm9keS52YWx1ZSkscz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkodS5pdik7dmFyIHY9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHUudmFsdWUpO2E9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKHUuaGFzaCksci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSx2LHMpLnRoZW4oZnVuY3Rpb24oaSl7Ci8vIGxvZy5sb2coJ2RlY3J5cHRlZERhdGEnLCBkZWNyeXB0ZWREYXRhKTsKdC5oYW5kc2hha2VIaXN0b3J5LnJlY2VpdmVyRmluaXNoZWRNZXNzYWdlPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxpK3MpO3ZhciB1PXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2goZSxpK3MpO3IuY3J5cHRvLnZlcmlmeUhNQUModC5rZXlzLmh5cGVydHlUb0hhc2hLZXksdSxhKS50aGVuKGZ1bmN0aW9uKGkpewovLyBjaGVjayBpZiB0aGVyZSB3YXMgYW4gaW5pdGlhbCBtZXNzYWdlIHRoYXQgd2FzIGJsb2NrZWQgYW5kIHNlbmQgaXQKaWYodC5pbml0aWFsTWVzc2FnZSl7dmFyIHM9e3R5cGU6ImNyZWF0ZSIsdG86ZS5mcm9tLGZyb206ZS50byxib2R5Ont2YWx1ZTp0LmluaXRpYWxNZXNzYWdlLmJvZHkudmFsdWV9fTtuKHttZXNzYWdlOnMsY2hhdEtleXM6dH0pfWVsc2Ugci5fc2VuZFJlcG9ydGVyU2Vzc2lvbktleShlLHQpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oIk9uIF9kb0hhbmRTaGFrZVBoYXNlIGZyb20gcmVjZWl2ZXJGaW5pc2hlZE1lc3NhZ2UgZXJyb3I6ICIrZSl9KX0pfSk7YnJlYWs7Y2FzZSJyZXBvcnRlclNlc3Npb25LZXkiOnkubG9nKCJyZXBvcnRlclNlc3Npb25LZXkiKTt2YXIgZz0oMCxsLmRlY29kZSkoZS5ib2R5LnZhbHVlKTthPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShnLmhhc2gpLHM9KDAsbC5kZWNvZGVUb1VpbnQ4QXJyYXkpKGcuaXYpO3ZhciBiPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShnLnZhbHVlKSxfPXZvaWQgMCxtPXZvaWQgMCxSPXZvaWQgMCx3PXZvaWQgMDsKLy9sb2cubG9nKCdbSWRlbnRpdHlNb2R1bGUgcmVwb3J0ZXJTZXNzaW9uS2V5XSAtIGRlY3J5cHRBRVM6ICcsIGNoYXRLZXlzLmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSwgZW5jcnlwdGVkVmFsdWUsIGl2KTsKci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxiLHMpLnRoZW4oZnVuY3Rpb24obil7Xz0oMCxsLmRlY29kZSkobiksbT0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoXy52YWx1ZSksUj1fLmRhdGFPYmplY3RVUkw7dmFyIG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7cmV0dXJuIHIuY3J5cHRvLnZlcmlmeUhNQUModC5rZXlzLmh5cGVydHlUb0hhc2hLZXksbyxhKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2hhc2ggc3VjY2Vzc2Z1bGx5IHZhbGlkYXRlZCAnLCBoYXNoUmVzdWx0KTsKci5kYXRhT2JqZWN0U2Vzc2lvbktleXNbUl09e3Nlc3Npb25LZXk6bSxpc1RvRW5jcnlwdDohMH07dmFyIG49KDAsbC5jaGF0a2V5c1RvU3RyaW5nQ2xvbmVyKShyLmRhdGFPYmplY3RTZXNzaW9uS2V5cyk7cmV0dXJuIHIuc3RvcmFnZU1hbmFnZXIuc2V0KCJkYXRhT2JqZWN0U2Vzc2lvbktleXMiLDAsbikuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX3NlbmRSZXBvcnRlclNlc3Npb25LZXkgZnJvbSBtZXRob2QgcmVwb3J0ZXJTZXNzaW9uS2V5IGVycm9yOiAiK2UpfSkscz1yLmNyeXB0by5nZW5lcmF0ZUlWKCksdS5pdj0oMCxsLmVuY29kZSkocyksci5jcnlwdG8uZW5jcnlwdEFFUyh0LmtleXMuaHlwZXJ0eUZyb21TZXNzaW9uS2V5LCJvayEhIixzKX0pLnRoZW4oZnVuY3Rpb24obil7dz17dHlwZToiaGFuZHNoYWtlIix0bzplLmZyb20sZnJvbTplLnRvLGJvZHk6e2hhbmRzaGFrZVBoYXNlOiJyZWNlaXZlckFja25vd2xlZGdlIn19LHUudmFsdWU9KDAsbC5lbmNvZGUpKG4pO3ZhciBvPXIuX2ZpbHRlck1lc3NhZ2VUb0hhc2godywib2shISIrcyx0Lmh5cGVydHlGcm9tLm1lc3NhZ2VJbmZvKTtyZXR1cm4gci5jcnlwdG8uaGFzaEhNQUModC5rZXlzLmh5cGVydHlGcm9tSGFzaEtleSxvKX0pLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHI9KDAsbC5lbmNvZGUpKHt2YWx1ZTp1LnZhbHVlLGhhc2g6KDAsbC5lbmNvZGUpKGUpLGl2OnUuaXZ9KTt3LmJvZHkudmFsdWU9cixuKHttZXNzYWdlOncsY2hhdEtleXM6dH0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bygiT24gX2RvSGFuZFNoYWtlUGhhc2UgZnJvbSByZXBvcnRlclNlc3Npb25LZXkgZXJyb3I6ICIrZSl9KTticmVhaztjYXNlInJlY2VpdmVyQWNrbm93bGVkZ2UiOnkubG9nKCJyZWNlaXZlckFja25vd2xlZGdlIik7dmFyIFM9KDAsbC5kZWNvZGUpKGUuYm9keS52YWx1ZSksaz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoUy5oYXNoKTtzPSgwLGwuZGVjb2RlVG9VaW50OEFycmF5KShTLml2KTt2YXIgTz0oMCxsLmRlY29kZVRvVWludDhBcnJheSkoUy52YWx1ZSk7ci5jcnlwdG8uZGVjcnlwdEFFUyh0LmtleXMuaHlwZXJ0eVRvU2Vzc2lvbktleSxPLHMpLnRoZW4oZnVuY3Rpb24obil7dmFyIG89ci5fZmlsdGVyTWVzc2FnZVRvSGFzaChlLG4rcyk7cmV0dXJuIHIuY3J5cHRvLnZlcmlmeUhNQUModC5rZXlzLmh5cGVydHlUb0hhc2hLZXksbyxrKX0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2hhc2hSZXN1bHQgJywgaGFzaFJlc3VsdCk7CnZhciByPXQuY2FsbGJhY2s7ciYmcigiaGFuZFNoYWtlRW5kIiksbigiaGFuZFNoYWtlRW5kIil9KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBfZG9IYW5kU2hha2VQaGFzZSBmcm9tIHJlY2VpdmVyQWNrbm93bGVkZ2UgZXJyb3I6ICIrZSl9KTticmVhaztkZWZhdWx0Om8oZSl9fSl9fSx7a2V5OiJfZmlsdGVyTWVzc2FnZVRvSGFzaCIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybnt0eXBlOmUudHlwZSxmcm9tOmUuZnJvbSx0bzplLnRvLGJvZHk6e2lkZW50aXR5OnJ8fGUuYm9keS5pZGVudGl0eSx2YWx1ZTp0fHxlLmJvZHkudmFsdWUsaGFuZHNoYWtlUGhhc2U6ZS5ib2R5LmhhbmRzaGFrZVBoYXNlfX19fSx7a2V5OiJfbmV3Q2hhdENyeXB0byIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXMsbz1yP2UudG86ZS5mcm9tLGk9cj9lLmZyb206ZS50byxzPW4uX2lkbS5nZXRJZGVudGl0eSh0KTtyZXR1cm57aHlwZXJ0eUZyb206e2h5cGVydHk6byx1c2VySUQ6cy51c2VyUHJvZmlsZS51c2VyVVJMLAovL3ByaXZhdGVLZXk6ICJnZXRNeVB1YmxpY0tleSIsCi8vcHVibGljS2V5OiAiZ2V0TXlQcml2YXRlS2V5IiwKYXNzZXJ0aW9uOnMuYXNzZXJ0aW9uLG1lc3NhZ2VJbmZvOnN9LGh5cGVydHlUbzp7aHlwZXJ0eTppLHVzZXJJRDp2b2lkIDAscHVibGljS2V5OnZvaWQgMCxhc3NlcnRpb246dm9pZCAwfSxrZXlzOntoeXBlcnR5VG9TZXNzaW9uS2V5OnZvaWQgMCxoeXBlcnR5RnJvbVNlc3Npb25LZXk6dm9pZCAwLGh5cGVydHlUb0hhc2hLZXk6dm9pZCAwLGh5cGVydHlGcm9tSGFzaEtleTp2b2lkIDAsdG9SYW5kb206dm9pZCAwLGZyb21SYW5kb206dm9pZCAwLHByZW1hc3RlcktleTp2b2lkIDAsbWFzdGVyS2V5OnZvaWQgMH0saGFuZHNoYWtlSGlzdG9yeTp7c2VuZGVySGVsbG86dm9pZCAwLHJlY2VpdmVySGVsbG86dm9pZCAwLHNlbmRlckNlcnRpZmljYXRlOnZvaWQgMCxyZWNlaXZlckZpbmlzaGVkTWVzc2FnZTp2b2lkIDB9LGluaXRpYWxNZXNzYWdlOmUuYm9keS5pZ25vcmU/dm9pZCAwOmUsY2FsbGJhY2s6ZS5jYWxsYmFjayxhdXRoZW50aWNhdGVkOiExLGRhdGFPYmplY3RVUkw6ZS5kYXRhT2JqZWN0VVJMfX19LHtrZXk6ImdldE15UHVibGljS2V5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLnVzZXJEZWZhdWx0S2V5UmVmLHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3Quc3RvcmFnZU1hbmFnZXIuZ2V0KGUpLnRoZW4oZnVuY3Rpb24obyl7aWYobylyZXR1cm4gcihvLnB1YmxpYyk7dC5fZ2VuZXJhdGVBbmRTdG9yZU5ld0FzeW1ldHJpY0tleShlKS50aGVuKGZ1bmN0aW9uKGUpe3IoZS5wdWJsaWMpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcigiW2dldE15UHVibGljS2V5Ol9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OmVycl06ICIrZS5tZXNzYWdlKSxuKGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJbZ2V0TXlQdWJsaWNLZXk6c3RvcmFnZU1hbmFnZXI6ZXJyXTogIitlLm1lc3NhZ2UpLG4oZSl9KX0pfX0se2tleToiZ2V0TXlQcml2YXRlS2V5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLnVzZXJEZWZhdWx0S2V5UmVmLHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3Quc3RvcmFnZU1hbmFnZXIuZ2V0KGUpLnRoZW4oZnVuY3Rpb24obyl7aWYobylyZXR1cm4gcihvLnByaXZhdGUpO3QuX2dlbmVyYXRlQW5kU3RvcmVOZXdBc3ltZXRyaWNLZXkoZSkudGhlbihmdW5jdGlvbihlKXtyKGUucHJpdmF0ZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJbZ2V0TXlQcml2YXRlS2V5Ol9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OmVycl06ICIrZS5tZXNzYWdlKSxuKGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJbZ2V0TXlQcml2YXRlS2V5OnN0b3JhZ2VNYW5hZ2VyOmVycl06ICIrZS5tZXNzYWdlKSxuKGUpfSl9KX19LHtrZXk6Il9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dm9pZCAwO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dC5jcnlwdG8uZ2VuZXJhdGVSU0FLZXlQYWlyKCkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4geS5sb2coIl9nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OnVzZXJBc3ltbWV0cmljS2V5R2VuZXJhdGVkIixuKSxyPW4sdC5zdG9yYWdlTWFuYWdlci5zZXQoZSwwLG4pfSkudGhlbihmdW5jdGlvbihlKXt5LmxvZygiX2dlbmVyYXRlQW5kU3RvcmVOZXdBc3ltZXRyaWNLZXk6dXNlckFzeW1tZXRyaWNLZXlTdWNjZXNzIixlKSxuKHIpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcigiW19nZW5lcmF0ZUFuZFN0b3JlTmV3QXN5bWV0cmljS2V5OmVycl06ICIrZS5tZXNzYWdlKSxvKGUpfSl9KX19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9tZXNzYWdlQnVzPWUsdC5hZGRDcnlwdG9HVUlMaXN0ZW5lcnMoKX19LHtrZXk6ImNvcmVEaXNjb3ZlcnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlRGlzY292ZXJ5fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29yZURpc2NvdmVyeT1lfX0se2tleToicmVnaXN0cnkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWdpc3RyeX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3JlZ2lzdHJ5PWV9fV0pLENyeXB0b01hbmFnZXJ9KCk7LyoKY29uc3Qgbm9kZUpTS2V5UGFpclBvcHVsYXRlID0geyBwdWJsaWM6IFs0OCwgMTMwLCAxLCAzNCwgNDgsIDEzLCA2LCA5LCA0MiwgMTM0LCA3MiwgMTM0LCAyNDcsIDEzLCAxLCAxLCAxLCA1LCAwLCAzLCAxMzAsIDEsIDE1LCAwLCA0OCwgMTMwLCAxLCAxMCwgMiwgMTMwLCAxLCAxLCAwLCAyMjgsIDQzLCAxMDEsIDEyLCAxMjEsIDcsIDE1NywgNzEsIDgxLCA1OCwgMjE5LCAzMiwgMTAsIDEwOCwgMTkzLCAxNzksIDIxMiwgMTE2LCAyNTUsIDU5LCAyMTcsIDMyLCAxNjEsIDIwMSwgNTMsIDE3MSwgMjI2LCAxOTksIDEzNywgMjAyLCAxNzEsIDYwLCA4MiwgNTMsIDEyNSwgNjIsIDE3NywgMTI2LCAxNjUsIDI0LCAxNDEsIDMwLCAxNSwgMjI2LCA1OSwgMTA3LCAzNCwgNywgMTMsIDE0OSwgMTEyLCAxMjUsIDEwLCAyMzAsIDE5MSwgMTU2LCAxNjQsIDE3NywgMTAsIDE4NSwgMTMsIDY2LCAzLCAyMTcsIDE2NiwgMjQ0LCA5MCwgMTE5LCAxMTEsIDI3LCAxNDUsIDEwNCwgNzEsIDE4OSwgMTY2LCAyMjYsIDI1NSwgMTMzLCA4MywgMTUxLCAyMzEsIDEwMSwgMTUxLCA4OSwgMjIsIDE5LCA2NSwgMTU0LCAxMCwgNTMsIDIwOCwgMjE4LCAyNTIsIDIxOSwgMzcsIDUwLCAyMTIsIDg2LCAxNDUsIDEwNywgMTMyLCA5MCwgMjMzLCAyMDIsIDIyNywgMTA4LCAxMTQsIDE0MSwgMjksIDczLCAxODcsIDMxLCAxMywgMjM0LCAwLCAyMzIsIDI0LCAxOTEsIDM1LCAxNDksIDE3OSwgMTM4LCAyMTQsIDE1OSwgMjQ1LCAxNjIsIDE0OCwgMjIxLCAxMTgsIDE3LCAxMDUsIDg5LCAxNTEsIDE0NiwgMjA5LCA1NSwgMjM2LCA2MSwgMTQzLCAyMzMsIDIyOCwgMTAsIDExNSwgOCwgODEsIDE5NywgNDUsIDEyMywgMTg3LCAyMjMsIDE3NiwgMjU0LCAxNjUsIDY5LCAxNDMsIDI5LCAxMDAsIDExNCwgMTcsIDEzMCwgMjI2LCAyMjMsIDMzLCAxMSwgMjQwLCA4MSwgNjEsIDE3MiwgMTkxLCAxNTcsIDI0NiwgMjAyLCA4NywgMTMxLCAyMjEsIDg4LCA0OCwgMTI3LCAxNTksIDExOSwgMTYwLCAxNTIsIDExNywgNjEsIDI1MywgMTc0LCA2NSwgMjE0LCAyMDMsIDIxOCwgNjMsIDUwLCA3OCwgMTYwLCAxODEsIDIyMSwgMjExLCAxMjgsIDcwLCAxNzgsIDE5MSwgMTcwLCAwLCAxMywgMTIyLCAxNzMsIDEyLCAyMDMsIDI1MiwgNCwgMTg0LCAyMjUsIDI1MiwgNywgNjIsIDk2LCAxMTYsIDE1LCAyMTYsIDE1OCwgNTUsIDg1LCA0OCwgMTYsIDksIDIwNiwgMTE5LCA3NCwgMTEyLCAyNDMsIDEzNiwgODQsIDE4NCwgMjIzLCAyNTQsIDEwMSwgOTEsIDYxLCAxMCwgOTEsIDg1LCAxOTIsIDE0NywgMTQ0LCA1NywgMjksIDY2LCAyMzgsIDE5OSwgMjQ0LCAxOTMsIDE5NCwgMTUwLCAyMzIsIDIwMCwgMTA3LCAyLCAzLCAxLCAwLCAxXSwKICBwcml2YXRlOiBbNDgsIDEzMCwgNCwgMTkxLCAyLCAxLCAwLCA0OCwgMTMsIDYsIDksIDQyLCAxMzQsIDcyLCAxMzQsIDI0NywgMTMsIDEsIDEsIDEsIDUsIDAsIDQsIDEzMCwgNCwgMTY5LCA0OCwgMTMwLCA0LCAxNjUsIDIsIDEsIDAsIDIsIDEzMCwgMSwgMSwgMCwgMjI4LCA0MywgMTAxLCAxMiwgMTIxLCA3LCAxNTcsIDcxLCA4MSwgNTgsIDIxOSwgMzIsIDEwLCAxMDgsIDE5MywgMTc5LCAyMTIsIDExNiwgMjU1LCA1OSwgMjE3LCAzMiwgMTYxLCAyMDEsIDUzLCAxNzEsIDIyNiwgMTk5LCAxMzcsIDIwMiwgMTcxLCA2MCwgODIsIDUzLCAxMjUsIDYyLCAxNzcsIDEyNiwgMTY1LCAyNCwgMTQxLCAzMCwgMTUsIDIyNiwgNTksIDEwNywgMzQsIDcsIDEzLCAxNDksIDExMiwgMTI1LCAxMCwgMjMwLCAxOTEsIDE1NiwgMTY0LCAxNzcsIDEwLCAxODUsIDEzLCA2NiwgMywgMjE3LCAxNjYsIDI0NCwgOTAsIDExOSwgMTExLCAyNywgMTQ1LCAxMDQsIDcxLCAxODksIDE2NiwgMjI2LCAyNTUsIDEzMywgODMsIDE1MSwgMjMxLCAxMDEsIDE1MSwgODksIDIyLCAxOSwgNjUsIDE1NCwgMTAsIDUzLCAyMDgsIDIxOCwgMjUyLCAyMTksIDM3LCA1MCwgMjEyLCA4NiwgMTQ1LCAxMDcsIDEzMiwgOTAsIDIzMywgMjAyLCAyMjcsIDEwOCwgMTE0LCAxNDEsIDI5LCA3MywgMTg3LCAzMSwgMTMsIDIzNCwgMCwgMjMyLCAyNCwgMTkxLCAzNSwgMTQ5LCAxNzksIDEzOCwgMjE0LCAxNTksIDI0NSwgMTYyLCAxNDgsIDIyMSwgMTE4LCAxNywgMTA1LCA4OSwgMTUxLCAxNDYsIDIwOSwgNTUsIDIzNiwgNjEsIDE0MywgMjMzLCAyMjgsIDEwLCAxMTUsIDgsIDgxLCAxOTcsIDQ1LCAxMjMsIDE4NywgMjIzLCAxNzYsIDI1NCwgMTY1LCA2OSwgMTQzLCAyOSwgMTAwLCAxMTQsIDE3LCAxMzAsIDIyNiwgMjIzLCAzMywgMTEsIDI0MCwgODEsIDYxLCAxNzIsIDE5MSwgMTU3LCAyNDYsIDIwMiwgODcsIDEzMSwgMjIxLCA4OCwgNDgsIDEyNywgMTU5LCAxMTksIDE2MCwgMTUyLCAxMTcsIDYxLCAyNTMsIDE3NCwgNjUsIDIxNCwgMjAzLCAyMTgsIDYzLCA1MCwgNzgsIDE2MCwgMTgxLCAyMjEsIDIxMSwgMTI4LCA3MCwgMTc4LCAxOTEsIDE3MCwgMCwgMTMsIDEyMiwgMTczLCAxMiwgMjAzLCAyNTIsIDQsIDE4NCwgMjI1LCAyNTIsIDcsIDYyLCA5NiwgMTE2LCAxNSwgMjE2LCAxNTgsIDU1LCA4NSwgNDgsIDE2LCA5LCAyMDYsIDExOSwgNzQsIDExMiwgMjQzLCAxMzYsIDg0LCAxODQsIDIyMywgMjU0LCAxMDEsIDkxLCA2MSwgMTAsIDkxLCA4NSwgMTkyLCAxNDcsIDE0NCwgNTcsIDI5LCA2NiwgMjM4LCAxOTksIDI0NCwgMTkzLCAxOTQsIDE1MCwgMjMyLCAyMDAsIDEwNywgMiwgMywgMSwgMCwgMSwgMiwgMTMwLCAxLCAwLCAxMDMsIDI0NCwgMTM3LCAxMTgsIDExNiwgODIsIDE0LCAyMDMsIDEwMiwgMTA3LCAyNTMsIDg4LCAxMiwgMTk5LCAyMjIsIDYwLCAyNDMsIDEzNiwgODYsIDE1NywgNzQsIDIyNCwgMTkwLCA1MywgMTEzLCA1NywgMTU3LCAyNTAsIDQ5LCAxMzAsIDk2LCAzMSwgMjUyLCAxMzYsIDE1MiwgNzAsIDE0MywgMTcsIDIxNSwgOTYsIDEwMywgNTEsIDE4LCAzNSwgMTQxLCAyMTIsIDIxMCwgMjA1LCA5LCAyMTYsIDgzLCA3MCwgMjQ1LCA3MSwgMTM4LCAxMTksIDExMiwgMjI5LCAxNjQsIDE3NiwgOSwgMzcsIDgxLCAxNjEsIDE5MywgMTU0LCA2OCwgMjQ5LCAxMTUsIDEwNiwgMjAxLCA2LCAxMiwgMjI1LCAxNDQsIDEyNiwgMTQxLCAyMTAsIDE0MSwgMjQyLCAxMjgsIDE1OSwgMjIxLCAxNjMsIDIyMiwgMjEsIDIzMywgMjMwLCAxNjcsIDIwNiwgNTksIDI0LCAyNTAsIDIzMywgODEsIDEyMiwgMTAyLCAyNiwgNiwgMjMzLCA3MiwgMTMzLCA0NywgNzcsIDE1NSwgMjM4LCA4NiwgNiwgMTM5LCAyNCwgMTMxLCAxNjMsIDE3OSwgMTEyLCA0OCwgMjQ3LCAxNDIsIDYsIDIwNywgMjA0LCAxNzMsIDIyMywgMTQwLCAxOTksIDE1MCwgOTUsIDEyMywgMTUyLCAyMDIsIDE1NSwgMTMxLCAyMzgsIDYyLCA5NiwgMTMzLCA0LCAyMTcsIDUxLCAxMjEsIDMwLCAzOCwgMTc4LCAxODksIDIxNiwgNDQsIDM1LCAyNDEsIDkzLCA3LCA2MiwgOTAsIDExMSwgMjE2LCA2NiwgMjA5LCAyNDMsIDEyOCwgMjM0LCAxNDEsIDg0LCAxMzUsIDE4MSwgMTMsIDM4LCAyMjAsIDExNCwgMjQ1LCAyNDAsIDE3OCwgOTUsIDIyMCwgMjA2LCAxMSwgMTg2LCAyMzQsIDIxMywgNjYsIDEyMSwgODMsIDY4LCA4OSwgNzUsIDQ2LCAxODMsIDE0NSwgMTgzLCAxNDcsIDE2MCwgMjE1LCAxMTgsIDE5OCwgMTI1LCAxODEsIDE0NiwgMzAsIDI1MSwgNTgsIDg3LCA0NywgMjA5LCAyMzcsIDk3LCAyNCwgNDcsIDE3OSwgNiwgMTEwLCAyNDIsIDk5LCAxNTAsIDIyNiwgMTQ4LCAxOTgsIDE3NCwgMTQ2LCAxMDEsIDIxMywgODcsIDE3OCwgMTAsIDIyMywgMTA1LCAxOCwgNTYsIDUzLCAyMiwgMjEyLCAxNTgsIDE3MCwgMTc2LCA1MSwgODYsIDE0NSwgMTI1LCAxMjQsIDQ0LCA5LCA4NSwgMTksIDE0NCwgMjQ2LCAxNzAsIDc4LCAxMjQsIDMwLCAzMiwgMTIsIDE2NiwgMTc0LCAxMzksIDc3LCA2MywgMTczLCA4MiwgMTAsIDE1MywgMiwgMTI5LCAxMjksIDAsIDI0OCwgMTgsIDE0MywgMjQ2LCAxMzcsIDEzNiwgMTQ1LCAyMTksIDE3OCwgMzksIDI3LCA5NCwgNjQsIDkwLCA0NywgMTYzLCAxMTQsIDYwLCA2MywgMTg3LCAxMzEsIDE0MywgMjQ0LCAxNiwgNDIsIDEyOCwgMjMxLCAxMTcsIDkyLCA5OCwgMjE5LCAxNTUsIDYyLCAxMDcsIDI1MiwgMTcsIDI0NSwgNDUsIDE2MCwgMjI1LCAxMDMsIDE0MiwgNzIsIDM2LCAxOTMsIDE1MCwgMjM1LCAyMTQsIDE3NSwgNjIsIDIxMiwgNTYsIDQ1LCA5LCAwLCA2MCwgMTE0LCAxMDcsIDEzNCwgMjI4LCAyMDQsIDEzMSwgMTMxLCAyMTQsIDk0LCAyMDEsIDE0OCwgMTU5LCA5OSwgMTM5LCAxODEsIDEzLCAxMTksIDM4LCAzMCwgMTA3LCAxNjYsIDE2NSwgMjAzLCA0MywgMzQsIDIwLCAyMDcsIDE3MSwgMzIsIDU4LCAxNjcsIDYyLCAxOTYsIDE1MywgMTAzLCAyMDQsIDIxMywgMjQ3LCA0OCwgMTExLCAyMjcsIDU5LCA5NSwgOTcsIDE5NCwgMTg3LCA1MywgMTAsIDI0NywgMTA4LCA1OCwgODYsIDI4LCAyOSwgMTEzLCA4LCAxMTAsIDE3MSwgMjIwLCAyNDUsIDExLCA4MiwgMjMzLCAyMjMsIDkxLCA2OCwgMTY2LCAxMTcsIDE3NCwgMTg3LCA2MiwgNzcsIDIsIDEyOSwgMTI5LCAwLCAyMzUsIDExOCwgMiwgMTA1LCAyMzksIDIxMiwgMzAsIDEwNCwgMTU3LCA0MSwgMTA5LCAxMSwgMjQ4LCAxNTIsIDIyLCAyMzYsIDk3LCA0MCwgMTUzLCAxMzEsIDIyOCwgNSwgODYsIDE4NywgMTEzLCAxMjYsIDE0NCwgNzYsIDE0MSwgNzksIDExMCwgMjUwLCAxNDYsIDE1MiwgNDksIDU4LCAxNTYsIDIwMSwgMTc2LCA5MiwgMTg5LCAyMDksIDMwLCAxMTIsIDEwOCwgMTc1LCAyMDQsIDIwNCwgMjQ3LCAxNjQsIDQ2LCAxMjksIDIzOSwgOTgsIDEyNywgNDksIDE0NSwgMjE4LCA2MywgMTkzLCAxMjQsIDE3NCwgMTgsIDk4LCAyMDEsIDk5LCAxNTQsIDE2MiwgMTM4LCA3OCwgMTU5LCAyNTMsIDMsIDI0OCwgMywgMjA5LCAzNiwgMjM5LCAxOTMsIDE1NSwgMTkzLCA1LCAxOSwgMjM2LCAzNywgNzgsIDExOCwgMTM1LCAyNTAsIDE5OSwgNywgMTQxLCAyNDgsIDEyMCwgMzYsIDEzNiwgOTMsIDk4LCAxNzQsIDYwLCAxOCwgMjE1LCA5MywgMTc0LCAxMDcsIDE0MSwgMTE2LCAxNDUsIDE2NywgMjIxLCAyMTAsIDE2OSwgMjQ3LCA2NywgMjU0LCAyMjIsIDE2MSwgMTM0LCA2MywgMjIxLCA5MCwgODcsIDQyLCA5OSwgMjI3LCA4MSwgMTczLCAxNTEsIDIsIDEyOSwgMTI5LCAwLCAxMzMsIDIzLCAxNjgsIDEwMywgODMsIDIzMiwgMTQ2LCAxNjAsIDE4MSwgMjMsIDQwLCAzOCwgMjA0LCAxMywgMjE0LCAyMDMsIDQ5LCA0MSwgMTk1LCAyMjcsIDE4OSwgMTgxLCA4LCAyNDMsIDExOSwgMTA2LCA3NSwgNjcsIDI1MCwgMjUwLCAxMCwgMjM0LCA5OCwgMTE4LCAyNiwgMjUwLCAzNSwgMTIxLCAxMzIsIDEyNCwgMTAsIDc2LCAyNiwgMTk4LCAxNjUsIDE1NCwgMTA4LCAxOSwgMTE3LCA4OCwgMjMsIDE3LCAxOTIsIDE0MywgMTg0LCAxNzcsIDE4MSwgMTQxLCAxNTcsIDQsIDE4NSwgMjQ4LCAxOTMsIDc3LCAyMDQsIDI0MywgNywgMTcwLCAyNDAsIDQsIDExMSwgMTEzLCAxODMsIDAsIDI3LCAxMzYsIDIwLCAxOSwgMTQ5LCA3NCwgMzMsIDI0MSwgMjE4LCAxMDgsIDIzNiwgODAsIDE3MSwgMTQ4LCAxNiwgMTE2LCA5NywgMTA5LCA4MywgNzQsIDg4LCAxNDUsIDk0LCAyMzksIDEwMiwgMTkyLCAxOSwgMTE0LCAyMDcsIDUsIDEyOCwgNTEsIDExMSwgMTY0LCAyMzcsIDg2LCAxNTQsIDk5LCA1MiwgMTk3LCA2MiwgNTcsIDE4MiwgNiwgMTUyLCAyNDUsIDYxLCAxMzcsIDU4LCAxMDUsIDE1OSwgMiwgODQsIDEwOSwgMiwgMTI5LCAxMjksIDAsIDIyNiwgNjcsIDExMSwgMTMyLCA5NSwgOTEsIDEwMSwgMTc3LCA2MywgMTg5LCA0NCwgNTMsIDE5MywgMTg0LCA5MiwgMjMwLCAyMjMsIDk4LCAxMzMsIDc0LCAyMDksIDg2LCA1MiwgNywgNjUsIDE5NSwgMjA2LCAxMDAsIDgxLCAxNzgsIDE0NCwgNjUsIDE2NywgMTUxLCA0MiwgNzksIDg5LCAxNDksIDE4LCAxNzMsIDE4OCwgMjEsIDI0NCwgMjUxLCA0OSwgMjMwLCA0MSwgMTUwLCAxNTMsIDQ2LCAzNSwgMzgsIDIzMSwgOTksIDE3NCwgNTYsIDExNSwgMzIsIDIxNSwgMjUzLCA4NSwgMTQ3LCAxMDgsIDE5NywgMTQ3LCAzNCwgMjM2LCAyMTYsIDIyMiwgMTc3LCA1NywgOTAsIDEzNiwgMTE0LCAyMDcsIDQ4LCA0NiwgMzEsIDkwLCAyMjAsIDE4LCA1OCwgMTQzLCAyMzksIDExMSwgMjE0LCAyNywgOTUsIDYsIDM2LCA1MywgMjI5LCA2MiwgMTA4LCA0NSwgMzksIDEsIDMwLCA0NywgMTc4LCA1NiwgMTY0LCAyMDYsIDU2LCA0MiwgMjA4LCA0NiwgMTkzLCA2MSwgMzEsIDE0NywgNDUsIDE0NywgMjMsIDE4NywgMjIsIDUwLCAyNTUsIDExMSwgMjI5LCAxMzIsIDE5OSwgMTUyLCA3NSwgMTQyLCAxMzYsIDIwOSwgMTUxLCAyLCAxMjksIDEyOSwgMCwgMTY1LCA1NiwgMjMyLCA3NiwgNTUsIDU3LCAyNDAsIDE1OSwgOTIsIDIwNywgMjIwLCAxNDMsIDEzMCwgMzAsIDU3LCAyMzQsIDI1MSwgMTcyLCAxNzEsIDE4MCwgNTQsIDE1OSwgMjI5LCA5NiwgMjQ2LCA3MywgMTEyLCAxNDYsIDc1LCAxNTcsIDI0MiwgMjAxLCAxNjEsIDIxOCwgMzcsIDE3NiwgMzUsIDE3MCwgNTAsIDkwLCAxNDgsIDEwMiwgMTkxLCAxOTksIDIzOSwgMTc0LCA3OCwgNzIsIDY3LCA4NSwgMTk5LCA0NSwgMTQ5LCAxNDUsIDEzMiwgMTYxLCAyMTIsIDMzLCAxNTcsIDc1LCAyMTYsIDc5LCAzOSwgMjMzLCAxOCwgMjEwLCAyNTUsIDI2LCA3MiwgMjI5LCAyMzksIDQ0LCAxMiwgMTQ3LCAxNTgsIDE3NiwgMTkyLCA5NSwgMTI2LCAzMiwgMTc1LCAyMywgMjI2LCAxMzEsIDEzOSwgMTk3LCAxNzUsIDE5MywgNjIsIDgsIDE1MSwgMjUyLCA2OCwgMTU0LCA5NCwgODksIDE4OSwgMTI1LCA5MCwgMzAsIDM2LCAxNzUsIDczLCAyMzAsIDE5NCwgMTMsIDIzMywgMjQ3LCAxMjMsIDYwLCAyNDEsIDQ3LCAxNzEsIDUxLCAxODksIDExMiwgMTExLCAyMTMsIDE0MSwgODksIDcwLCAyNDksIDIzNiwgNjMsIDIzNiwgMTEwLCAxMTUsIDIwOF19OwoqLwp0LmRlZmF1bHQ9bmV3IGgsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpLG89cig0KS5kb2N1bWVudCxpPW4obykmJm4oby5jcmVhdGVFbGVtZW50KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGk/by5jcmVhdGVFbGVtZW50KGUpOnt9fX0sLyogMTAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLG89cigyNyksaT1yKDQzKSxzPXIoMTQ5KSxhPXIoMTEpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW8uU3ltYm9sfHwoby5TeW1ib2w9aT97fTpuLlN5bWJvbHx8e30pOyJfIj09ZS5jaGFyQXQoMCl8fGUgaW4gdHx8YSh0LGUse3ZhbHVlOnMuZihlKX0pfX0sLyogMTA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDc5KSgia2V5cyIpLG89cig0OCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfHwobltlXT1vKGUpKX19LC8qIDEwNSAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzCmUuZXhwb3J0cz0iY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mIi5zcGxpdCgiLCIpfSwvKiAxMDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNCkuZG9jdW1lbnQ7ZS5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSwvKiAxMDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy4KLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KdmFyIG49cig2KSxvPXIoMyksaT1mdW5jdGlvbihlLHQpe2lmKG8oZSksIW4odCkmJm51bGwhPT10KXRocm93IFR5cGVFcnJvcih0KyI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIil9O2UuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KCJfX3Byb3RvX18iaW57fT8vLyBlc2xpbnQtZGlzYWJsZS1saW5lCmZ1bmN0aW9uKGUsdCxuKXt0cnl7bj1yKDI4KShGdW5jdGlvbi5jYWxsLHIoMjUpLmYoT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG4oZSxbXSksdD0hKGUgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goZSl7dD0hMH1yZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gaShlLHIpLHQ/ZS5fX3Byb3RvX189cjpuKGUsciksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOml9fSwvKiAxMDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9Ilx0XG5cdlxmXHIgwqDhmoDhoI7igIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIBcdTIwMjhcdTIwMjlcdWZlZmYifSwvKiAxMDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNiksbz1yKDEwNykuc2V0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dmFyIGkscz10LmNvbnN0cnVjdG9yO3JldHVybiBzIT09ciYmImZ1bmN0aW9uIj09dHlwZW9mIHMmJihpPXMucHJvdG90eXBlKSE9PXIucHJvdG90eXBlJiZuKGkpJiZvJiZvKGUsaSksZX19LC8qIDExMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMzQpLG89cigzMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PVN0cmluZyhvKHRoaXMpKSxyPSIiLGk9bihlKTtpZihpPDB8fGk9PTEvMCl0aHJvdyBSYW5nZUVycm9yKCJDb3VudCBjYW4ndCBiZSBuZWdhdGl2ZSIpO2Zvcig7aT4wOyhpPj4+PTEpJiYodCs9dCkpMSZpJiYocis9dCk7cmV0dXJuIHJ9fSwvKiAxMTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gMjAuMi4yLjI4IE1hdGguc2lnbih4KQplLmV4cG9ydHM9TWF0aC5zaWdufHxmdW5jdGlvbihlKXsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gMD09KGU9K2UpfHxlIT1lP2U6ZTwwPy0xOjF9fSwvKiAxMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gMjAuMi4yLjE0IE1hdGguZXhwbTEoeCkKdmFyIHI9TWF0aC5leHBtMTtlLmV4cG9ydHM9IXJ8fHIoMTApPjIyMDI1LjQ2NTc5NDgwNjcxOHx8cigxMCk8MjIwMjUuNDY1Nzk0ODA2NzE4fHwtMmUtMTchPXIoLTJlLTE3KT9mdW5jdGlvbihlKXtyZXR1cm4gMD09KGU9K2UpP2U6ZT4tMWUtNiYmZTwxZS02P2UrZSplLzI6TWF0aC5leHAoZSktMX06cn0sLyogMTEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM0KSxvPXIoMzMpOwovLyB0cnVlICAtPiBTdHJpbmcjYXQKLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0CmUuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLHU9bihyKSxjPWEubGVuZ3RoO3JldHVybiB1PDB8fHU+PWM/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KHUpLGk8NTUyOTZ8fGk+NTYzMTl8fHUrMT09PWN8fChzPWEuY2hhckNvZGVBdCh1KzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KHUpOmk6ZT9hLnNsaWNlKHUsdSsyKTpzLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzYpfX19LC8qIDExNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNDMpLG89cigwKSxpPXIoMTkpLHM9cigxOCksYT1yKDYyKSx1PXIoMTE1KSxjPXIoNjApLGY9cigyNiksbD1yKDkpKCJpdGVyYXRvciIpLGQ9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkscD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIseSxoLHYsZyl7dShyLHQseSk7dmFyIGIsXyxtLFI9ZnVuY3Rpb24oZSl7aWYoIWQmJmUgaW4gTylyZXR1cm4gT1tlXTtzd2l0Y2goZSl7Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0sdz10KyIgSXRlcmF0b3IiLFM9InZhbHVlcyI9PWgsaz0hMSxPPWUucHJvdG90eXBlLFA9T1tsXXx8T1siQEBpdGVyYXRvciJdfHxoJiZPW2hdLE09UHx8UihoKSxMPWg/Uz9SKCJlbnRyaWVzIik6TTp2b2lkIDAseD0iQXJyYXkiPT10P08uZW50cmllc3x8UDpQO2lmKAovLyBGaXggbmF0aXZlCngmJihtPWYoeC5jYWxsKG5ldyBlKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmbS5uZXh0JiYoCi8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKYyhtLHcsITApLAovLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKbnx8ImZ1bmN0aW9uIj09dHlwZW9mIG1bbF18fHMobSxsLHApKSwKLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgpTJiZQJiYidmFsdWVzIiE9PVAubmFtZSYmKGs9ITAsTT1mdW5jdGlvbigpe3JldHVybiBQLmNhbGwodGhpcyl9KSwKLy8gRGVmaW5lIGl0ZXJhdG9yCm4mJiFnfHwhZCYmIWsmJk9bbF18fHMoTyxsLE0pLAovLyBQbHVnIGZvciBsaWJyYXJ5CmFbdF09TSxhW3ddPXAsaClpZihiPXt2YWx1ZXM6Uz9NOlIoInZhbHVlcyIpLGtleXM6dj9NOlIoImtleXMiKSxlbnRyaWVzOkx9LGcpZm9yKF8gaW4gYilfIGluIE98fGkoTyxfLGJbX10pO2Vsc2UgbyhvLlArby5GKihkfHxrKSx0LGIpO3JldHVybiBifX0sLyogMTE1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1MSksbz1yKDQ3KSxpPXIoNjApLHM9e307Ci8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpCnIoMTgpKHMscig5KSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0sLyogMTE2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaGVscGVyIGZvciBTdHJpbmcje3N0YXJ0c1dpdGgsIGVuZHNXaXRoLCBpbmNsdWRlc30KdmFyIG49cig4Myksbz1yKDMzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4odCkpdGhyb3cgVHlwZUVycm9yKCJTdHJpbmcjIityKyIgZG9lc24ndCBhY2NlcHQgcmVnZXghIik7cmV0dXJuIFN0cmluZyhvKGUpKX19LC8qIDExNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig5KSgibWF0Y2giKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9Ly4vO3RyeXsiLy4vIltlXSh0KX1jYXRjaChyKXt0cnl7cmV0dXJuIHRbbl09ITEsISIvLi8iW2VdKHQpfWNhdGNoKGUpe319cmV0dXJuITB9fSwvKiAxMTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yCnZhciBuPXIoNjIpLG89cig5KSgiaXRlcmF0b3IiKSxpPUFycmF5LnByb3RvdHlwZTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUmJihuLkFycmF5PT09ZXx8aVtvXT09PWUpfX0sLyogMTE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxMSksbz1yKDQ3KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3QgaW4gZT9uLmYoZSx0LG8oMCxyKSk6ZVt0XT1yfX0sLyogMTIwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcyKSxvPXIoOSkoIml0ZXJhdG9yIiksaT1yKDYyKTtlLmV4cG9ydHM9cigyNykuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT1lKXJldHVybiBlW29dfHxlWyJAQGl0ZXJhdG9yIl18fGlbbihlKV19fSwvKiAxMjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA5LjQuMi4zIEFycmF5U3BlY2llc0NyZWF0ZShvcmlnaW5hbEFycmF5LCBsZW5ndGgpCnZhciBuPXIoMzA1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3KG4oZSkpKHQpfX0sLyogMTIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy42IEFycmF5LnByb3RvdHlwZS5maWxsKHZhbHVlLCBzdGFydCA9IDAsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgbj1yKDE1KSxvPXIoNTApLGk9cigxMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uKHRoaXMpLHI9aSh0Lmxlbmd0aCkscz1hcmd1bWVudHMubGVuZ3RoLGE9byhzPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxyKSx1PXM+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGM9dm9pZCAwPT09dT9yOm8odSxyKTtjPmE7KXRbYSsrXT1lO3JldHVybiB0fX0sLyogMTIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0NCksbz1yKDE2NSksaT1yKDYyKSxzPXIoMjQpOwovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCmUuZXhwb3J0cz1yKDExNCkoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSwvLyB0YXJnZXQKdGhpcy5faT0wLC8vIG5leHQgaW5kZXgKdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLAovLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpCmkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0sLyogMTI0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGkscz1yKDI4KSxhPXIoMTU1KSx1PXIoMTA2KSxjPXIoMTAyKSxmPXIoNCksbD1mLnByb2Nlc3MsZD1mLnNldEltbWVkaWF0ZSxwPWYuY2xlYXJJbW1lZGlhdGUseT1mLk1lc3NhZ2VDaGFubmVsLGg9Zi5EaXNwYXRjaCx2PTAsZz17fSxiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Z1tlXTtkZWxldGUgZ1tlXSx0KCl9fSxfPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTsKLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOgpkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gZ1srK3ZdPWZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwphKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgZ1tlXX0sCi8vIE5vZGUuanMgMC44LQoicHJvY2VzcyI9PXIoMjkpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OmgmJmgubm93P249ZnVuY3Rpb24oZSl7aC5ub3cocyhiLGUsMSkpfTp5PyhvPW5ldyB5LGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1fLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmYuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZi5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2YucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLF8sITEpKTpuPSJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gYygic2NyaXB0Iik/ZnVuY3Rpb24oZSl7dS5hcHBlbmRDaGlsZChjKCJzY3JpcHQiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksZS5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0sLyogMTI1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLG89cigxMjQpLnNldCxpPW4uTXV0YXRpb25PYnNlcnZlcnx8bi5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLHM9bi5wcm9jZXNzLGE9bi5Qcm9taXNlLHU9InByb2Nlc3MiPT1yKDI5KShzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsYz1mdW5jdGlvbigpe3ZhciBuLG87Zm9yKHUmJihuPXMuZG9tYWluKSYmbi5leGl0KCk7ZTspe289ZS5mbixlPWUubmV4dDt0cnl7bygpfWNhdGNoKG4pe3Rocm93IGU/cigpOnQ9dm9pZCAwLG59fXQ9dm9pZCAwLG4mJm4uZW50ZXIoKX07Ci8vIE5vZGUuanMKaWYodSlyPWZ1bmN0aW9uKCl7cy5uZXh0VGljayhjKX07ZWxzZSBpZighaXx8bi5uYXZpZ2F0b3ImJm4ubmF2aWdhdG9yLnN0YW5kYWxvbmUpaWYoYSYmYS5yZXNvbHZlKXsKLy8gUHJvbWlzZS5yZXNvbHZlIHdpdGhvdXQgYW4gYXJndW1lbnQgdGhyb3dzIGFuIGVycm9yIGluIExHIFdlYk9TIDIKdmFyIGY9YS5yZXNvbHZlKHZvaWQgMCk7cj1mdW5jdGlvbigpe2YudGhlbihjKX19ZWxzZSByPWZ1bmN0aW9uKCl7Ci8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkKby5jYWxsKG4sYyl9O2Vsc2V7dmFyIGw9ITAsZD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiIik7bmV3IGkoYykub2JzZXJ2ZShkLHtjaGFyYWN0ZXJEYXRhOiEwfSksLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKcj1mdW5jdGlvbigpe2QuZGF0YT1sPSFsfX1yZXR1cm4gZnVuY3Rpb24obil7dmFyIG89e2ZuOm4sbmV4dDp2b2lkIDB9O3QmJih0Lm5leHQ9byksZXx8KGU9byxyKCkpLHQ9b319fSwvKiAxMjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBQcm9taXNlQ2FwYWJpbGl0eShlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9bih0KSx0aGlzLnJlamVjdD1uKHIpfQovLyAyNS40LjEuNSBOZXdQcm9taXNlQ2FwYWJpbGl0eShDKQp2YXIgbj1yKDE2KTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KGUpfX0sLyogMTI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIElFRUU3NTQgY29udmVyc2lvbnMgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9pZWVlNzU0CmZ1bmN0aW9uIHBhY2tJRUVFNzU0KGUsdCxyKXt2YXIgbixvLGkscz1uZXcgQXJyYXkociksYT04KnItdC0xLHU9KDE8PGEpLTEsYz11Pj4xLGY9MjM9PT10P00oMiwtMjQpLU0oMiwtNzcpOjAsbD0wLGQ9ZTwwfHwwPT09ZSYmMS9lPDA/MTowO2ZvcihlPVAoZSksCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKZSE9ZXx8ZT09PWs/KAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCm89ZSE9ZT8xOjAsbj11KToobj1MKHgoZSkvQSksZSooaT1NKDIsLW4pKTwxJiYobi0tLGkqPTIpLGUrPW4rYz49MT9mL2k6ZipNKDIsMS1jKSxlKmk+PTImJihuKyssaS89MiksbitjPj11PyhvPTAsbj11KTpuK2M+PTE/KG89KGUqaS0xKSpNKDIsdCksbis9Yyk6KG89ZSpNKDIsYy0xKSpNKDIsdCksbj0wKSk7dD49ODtzW2wrK109MjU1Jm8sby89MjU2LHQtPTgpO2ZvcihuPW48PHR8byxhKz10O2E+MDtzW2wrK109MjU1Jm4sbi89MjU2LGEtPTgpO3JldHVybiBzWy0tbF18PTEyOCpkLHN9ZnVuY3Rpb24gdW5wYWNrSUVFRTc1NChlLHQscil7dmFyIG4sbz04KnItdC0xLGk9KDE8PG8pLTEscz1pPj4xLGE9by03LHU9ci0xLGM9ZVt1LS1dLGY9MTI3JmM7Zm9yKGM+Pj03O2E+MDtmPTI1NipmK2VbdV0sdS0tLGEtPTgpO2ZvcihuPWYmKDE8PC1hKS0xLGY+Pj0tYSxhKz10O2E+MDtuPTI1NipuK2VbdV0sdS0tLGEtPTgpO2lmKDA9PT1mKWY9MS1zO2Vsc2V7aWYoZj09PWkpcmV0dXJuIG4/TmFOOmM/LWs6aztuKz1NKDIsdCksZi09c31yZXR1cm4oYz8tMToxKSpuKk0oMixmLXQpfWZ1bmN0aW9uIHVucGFja0kzMihlKXtyZXR1cm4gZVszXTw8MjR8ZVsyXTw8MTZ8ZVsxXTw8OHxlWzBdfWZ1bmN0aW9uIHBhY2tJOChlKXtyZXR1cm5bMjU1JmVdfWZ1bmN0aW9uIHBhY2tJMTYoZSl7cmV0dXJuWzI1NSZlLGU+PjgmMjU1XX1mdW5jdGlvbiBwYWNrSTMyKGUpe3JldHVyblsyNTUmZSxlPj44JjI1NSxlPj4xNiYyNTUsZT4+MjQmMjU1XX1mdW5jdGlvbiBwYWNrRjY0KGUpe3JldHVybiBwYWNrSUVFRTc1NChlLDUyLDgpfWZ1bmN0aW9uIHBhY2tGMzIoZSl7cmV0dXJuIHBhY2tJRUVFNzU0KGUsMjMsNCl9ZnVuY3Rpb24gYWRkR2V0dGVyKGUsdCxyKXtoKGVbYl0sdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcl19fSl9ZnVuY3Rpb24gZ2V0KGUsdCxyLG4pe3ZhciBvPStyLGk9cChvKTtpZihpK3Q+ZVtVXSl0aHJvdyBTKF8pO3ZhciBzPWVbRF0uX2IsYT1pK2Vbal0sdT1zLnNsaWNlKGEsYSt0KTtyZXR1cm4gbj91OnUucmV2ZXJzZSgpfWZ1bmN0aW9uIHNldChlLHQscixuLG8saSl7dmFyIHM9K3IsYT1wKHMpO2lmKGErdD5lW1VdKXRocm93IFMoXyk7Zm9yKHZhciB1PWVbRF0uX2IsYz1hK2Vbal0sZj1uKCtvKSxsPTA7bDx0O2wrKyl1W2MrbF09ZltpP2w6dC1sLTFdfXZhciBuPXIoNCksbz1yKDEwKSxpPXIoNDMpLHM9cig5MCksYT1yKDE4KSx1PXIoNTYpLGM9cig1KSxmPXIoNTQpLGw9cigzNCksZD1yKDEyKSxwPXIoMTc0KSx5PXIoNTIpLmYsaD1yKDExKS5mLHY9cigxMjIpLGc9cig2MCksYj0icHJvdG90eXBlIixfPSJXcm9uZyBpbmRleCEiLG09bi5BcnJheUJ1ZmZlcixSPW4uRGF0YVZpZXcsdz1uLk1hdGgsUz1uLlJhbmdlRXJyb3Isaz1uLkluZmluaXR5LE89bSxQPXcuYWJzLE09dy5wb3csTD13LmZsb29yLHg9dy5sb2csQT13LkxOMixEPW8/Il9iIjoiYnVmZmVyIixVPW8/Il9sIjoiYnl0ZUxlbmd0aCIsaj1vPyJfbyI6ImJ5dGVPZmZzZXQiO2lmKHMuQUJWKXtpZighYyhmdW5jdGlvbigpe20oMSl9KXx8IWMoZnVuY3Rpb24oKXtuZXcgbSgtMSl9KXx8YyhmdW5jdGlvbigpey8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3Ci8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3Ci8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CnJldHVybiBuZXcgbSxuZXcgbSgxLjUpLG5ldyBtKE5hTiksIkFycmF5QnVmZmVyIiE9bS5uYW1lfSkpe209ZnVuY3Rpb24oZSl7cmV0dXJuIGYodGhpcyxtKSxuZXcgTyhwKGUpKX07Zm9yKHZhciBFLEk9bVtiXT1PW2JdLEM9eShPKSxUPTA7Qy5sZW5ndGg+VDspKEU9Q1tUKytdKWluIG18fGEobSxFLE9bRV0pO2l8fChJLmNvbnN0cnVjdG9yPW0pfQovLyBpT1MgU2FmYXJpIDcueCBidWcKdmFyIHE9bmV3IFIobmV3IG0oMikpLEg9UltiXS5zZXRJbnQ4O3Euc2V0SW50OCgwLDIxNDc0ODM2NDgpLHEuc2V0SW50OCgxLDIxNDc0ODM2NDkpLCFxLmdldEludDgoMCkmJnEuZ2V0SW50OCgxKXx8dShSW2JdLHtzZXRJbnQ4OmZ1bmN0aW9uKGUsdCl7SC5jYWxsKHRoaXMsZSx0PDwyND4+MjQpfSxzZXRVaW50ODpmdW5jdGlvbihlLHQpe0guY2FsbCh0aGlzLGUsdDw8MjQ+PjI0KX19LCEwKX1lbHNlIG09ZnVuY3Rpb24oZSl7Zih0aGlzLG0sIkFycmF5QnVmZmVyIik7dmFyIHQ9cChlKTt0aGlzLl9iPXYuY2FsbChuZXcgQXJyYXkodCksMCksdGhpc1tVXT10fSxSPWZ1bmN0aW9uKGUsdCxyKXtmKHRoaXMsUiwiRGF0YVZpZXciKSxmKGUsbSwiRGF0YVZpZXciKTt2YXIgbj1lW1VdLG89bCh0KTtpZihvPDB8fG8+bil0aHJvdyBTKCJXcm9uZyBvZmZzZXQhIik7aWYocj12b2lkIDA9PT1yP24tbzpkKHIpLG8rcj5uKXRocm93IFMoIldyb25nIGxlbmd0aCEiKTt0aGlzW0RdPWUsdGhpc1tqXT1vLHRoaXNbVV09cn0sbyYmKGFkZEdldHRlcihtLCJieXRlTGVuZ3RoIiwiX2wiKSxhZGRHZXR0ZXIoUiwiYnVmZmVyIiwiX2IiKSxhZGRHZXR0ZXIoUiwiYnl0ZUxlbmd0aCIsIl9sIiksYWRkR2V0dGVyKFIsImJ5dGVPZmZzZXQiLCJfbyIpKSx1KFJbYl0se2dldEludDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGdldCh0aGlzLDEsZSlbMF08PDI0Pj4yNH0sZ2V0VWludDg6ZnVuY3Rpb24oZSl7cmV0dXJuIGdldCh0aGlzLDEsZSlbMF19LGdldEludDE2OmZ1bmN0aW9uKGUpe3ZhciB0PWdldCh0aGlzLDIsZSxhcmd1bWVudHNbMV0pO3JldHVybih0WzFdPDw4fHRbMF0pPDwxNj4+MTZ9LGdldFVpbnQxNjpmdW5jdGlvbihlKXt2YXIgdD1nZXQodGhpcywyLGUsYXJndW1lbnRzWzFdKTtyZXR1cm4gdFsxXTw8OHx0WzBdfSxnZXRJbnQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSTMyKGdldCh0aGlzLDQsZSxhcmd1bWVudHNbMV0pKX0sZ2V0VWludDMyOmZ1bmN0aW9uKGUpe3JldHVybiB1bnBhY2tJMzIoZ2V0KHRoaXMsNCxlLGFyZ3VtZW50c1sxXSkpPj4+MH0sZ2V0RmxvYXQzMjpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcyw0LGUsYXJndW1lbnRzWzFdKSwyMyw0KX0sZ2V0RmxvYXQ2NDpmdW5jdGlvbihlKXtyZXR1cm4gdW5wYWNrSUVFRTc1NChnZXQodGhpcyw4LGUsYXJndW1lbnRzWzFdKSw1Miw4KX0sc2V0SW50ODpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDEsZSxwYWNrSTgsdCl9LHNldFVpbnQ4OmZ1bmN0aW9uKGUsdCl7c2V0KHRoaXMsMSxlLHBhY2tJOCx0KX0sc2V0SW50MTY6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcywyLGUscGFja0kxNix0LGFyZ3VtZW50c1syXSl9LHNldFVpbnQxNjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDIsZSxwYWNrSTE2LHQsYXJndW1lbnRzWzJdKX0sc2V0SW50MzI6ZnVuY3Rpb24oZSx0KXtzZXQodGhpcyw0LGUscGFja0kzMix0LGFyZ3VtZW50c1syXSl9LHNldFVpbnQzMjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDQsZSxwYWNrSTMyLHQsYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQzMjpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDQsZSxwYWNrRjMyLHQsYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQ2NDpmdW5jdGlvbihlLHQpe3NldCh0aGlzLDgsZSxwYWNrRjY0LHQsYXJndW1lbnRzWzJdKX19KTtnKG0sIkFycmF5QnVmZmVyIiksZyhSLCJEYXRhVmlldyIpLGEoUltiXSxzLlZJRVcsITApLHQuQXJyYXlCdWZmZXI9bSx0LkRhdGFWaWV3PVJ9LC8qIDEyOCAqLwovKioqLwpmdW5jdGlvbihlLHQpewovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQplLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT1lKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrZSk7cmV0dXJuIGV9fSwvKiAxMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIG49cigxMzApLG89TWF0aC5taW47ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlPjA/byhuKGUpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSwvKiAxMzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gNy4xLjQgVG9JbnRlZ2VyCnZhciByPU1hdGguY2VpbCxuPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBpc05hTihlPStlKT8wOihlPjA/bjpyKShlKX19LC8qIDEzMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMzIpKCJrZXlzIiksbz1yKDk0KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV18fChuW2VdPW8oZSkpfX0sLyogMTMyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzKSxvPXIoMTcpLGk9b1siX19jb3JlLWpzX3NoYXJlZF9fIl18fChvWyJfX2NvcmUtanNfc2hhcmVkX18iXT17fSk7KGUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBpW2VdfHwoaVtlXT12b2lkIDAhPT10P3Q6e30pfSkoInZlcnNpb25zIixbXSkucHVzaCh7dmVyc2lvbjpuLnZlcnNpb24sbW9kZTpyKDc1KT8icHVyZSI6Imdsb2JhbCIsY29weXJpZ2h0OiLCqSAyMDE4IERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIn0pfSwvKiAxMzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5cwplLmV4cG9ydHM9ImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZiIuc3BsaXQoIiwiKX0sLyogMTM0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzCnZhciBuPXIoMjEpLG89cigxMyksaT1yKDY2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oby5PYmplY3R8fHt9KVtlXXx8T2JqZWN0W2VdLHM9e307c1tlXT10KHIpLG4obi5TK24uRippKGZ1bmN0aW9uKCl7cigxKX0pLCJPYmplY3QiLHMpfX0sLyogMTM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQxKSxvPXIoMTcpLmRvY3VtZW50LGk9bihvKSYmbihvLmNyZWF0ZUVsZW1lbnQpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQoZSk6e319fSwvKiAxMzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKdmFyIG49cig0MSk7Ci8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlCi8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nCmUuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLG87aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbztpZigiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoIXQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LC8qIDEzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoNDIxKSghMCk7Ci8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkKcigxODYpKFN0cmluZywiU3RyaW5nIixmdW5jdGlvbihlKXt0aGlzLl90PVN0cmluZyhlKSwvLyB0YXJnZXQKdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciBlLHQ9dGhpcy5fdCxyPXRoaXMuX2k7cmV0dXJuIHI+PXQubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KGU9bih0LHIpLHRoaXMuX2krPWUubGVuZ3RoLHt2YWx1ZTplLGRvbmU6ITF9KX0pfSwvKiAxMzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKdmFyIG49cig0MCksbz1yKDQyMyksaT1yKDEzMykscz1yKDEzMSkoIklFX1BST1RPIiksYT1mdW5jdGlvbigpe30sdT1mdW5jdGlvbigpewovLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Zwp2YXIgZSx0PXIoMTM1KSgiaWZyYW1lIiksbj1pLmxlbmd0aDtmb3IodC5zdHlsZS5kaXNwbGF5PSJub25lIixyKDE4OCkuYXBwZW5kQ2hpbGQodCksdC5zcmM9ImphdmFzY3JpcHQ6IiwvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmwKLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOwplPXQuY29udGVudFdpbmRvdy5kb2N1bWVudCxlLm9wZW4oKSxlLndyaXRlKCI8c2NyaXB0PmRvY3VtZW50LkY9T2JqZWN0PFwvc2NyaXB0PiIpLGUuY2xvc2UoKSx1PWUuRjtuLS07KWRlbGV0ZSB1LnByb3RvdHlwZVtpW25dXTtyZXR1cm4gdSgpfTtlLmV4cG9ydHM9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oZSx0KXt2YXIgcjsKLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwKcmV0dXJuIG51bGwhPT1lPyhhLnByb3RvdHlwZT1uKGUpLHI9bmV3IGEsYS5wcm90b3R5cGU9bnVsbCxyW3NdPWUpOnI9dSgpLHZvaWQgMD09PXQ/cjpvKHIsdCl9fSwvKiAxMzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBQcm9taXNlQ2FwYWJpbGl0eShlKXt2YXIgdCxyO3RoaXMucHJvbWlzZT1uZXcgZShmdW5jdGlvbihlLG4pe2lmKHZvaWQgMCE9PXR8fHZvaWQgMCE9PXIpdGhyb3cgVHlwZUVycm9yKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpO3Q9ZSxyPW59KSx0aGlzLnJlc29sdmU9bih0KSx0aGlzLnJlamVjdD1uKHIpfQovLyAyNS40LjEuNSBOZXdQcm9taXNlQ2FwYWJpbGl0eShDKQp2YXIgbj1yKDk1KTtlLmV4cG9ydHMuZj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2VDYXBhYmlsaXR5KGUpfX0sLyogMTQwICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LC8qIDE0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dC5mPXIoMjIpfSwvKiAxNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTcpLG89cigxMyksaT1yKDc1KSxzPXIoMTQxKSxhPXIoMzkpLmY7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW8uU3ltYm9sfHwoby5TeW1ib2w9aT97fTpuLlN5bWJvbHx8e30pOyJfIj09ZS5jaGFyQXQoMCl8fGUgaW4gdHx8YSh0LGUse3ZhbHVlOnMuZihlKX0pfX0sLyogMTQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDc4KSxvPXIoNzYpLGk9cig0NSkscz1yKDEzNiksYT1yKDU3KSx1PXIoMTg0KSxjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7dC5mPXIoNDYpP2M6ZnVuY3Rpb24oZSx0KXtpZihlPWkoZSksdD1zKHQsITApLHUpdHJ5e3JldHVybiBjKGUsdCl9Y2F0Y2goZSl7fWlmKGEoZSx0KSlyZXR1cm4gbyghbi5mLmNhbGwoZSx0KSxlW3RdKX19LC8qIDE0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt0LnJ1bnRpbWVDb25maWd1cmF0aW9uPXsKLy8gVE9ETyB0aGlzIHNob3VsZCBiZSBjaGFuZ2VkIHdpdGggdGhlIGRlZmluaXRpb24gdXNlZCBmb3IgaW5kZXhlZGRiCi8vIGxvb2sgYXQ6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJPYmplY3RTdG9yZQovLyBOb3cgd2UgYXJlIHVzaW5nIHRoZSBkZWZpbml0aW9uIGZvciBEZXhpZTsgKGh0dHA6Ly9kZXhpZS5vcmcvZG9jcy9WZXJzaW9uL1ZlcnNpb24uc3RvcmVzKCkpCnN0b3JhZ2VTY2hlbWFzOntjYXBhYmlsaXRpZXM6e2NhcGFiaWxpdGllczoia2V5LHZlcnNpb24sdmFsdWUifSxzdWJzY3JpcHRpb25zOntzdWJzY3JpcHRpb25zOiJrZXksdmVyc2lvbix2YWx1ZSJ9LHJ1bnRpbWU6eyJydW50aW1lOlVSTCI6ImtleSx2ZXJzaW9uLHZhbHVlIiwicDJwSGFuZGxlcjpVUkwiOiJrZXksdmVyc2lvbix2YWx1ZSJ9LHJlZ2lzdHJ5OnsicmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiOiJrZXksdmVyc2lvbix2YWx1ZSIsInJlZ2lzdHJ5Okh5cGVydHlVUkxzIjoia2V5LHZlcnNpb24sdmFsdWUifSxjcnlwdG9NYW5hZ2VyOnt1c2VyQXN5bW1ldHJpY0tleToia2V5LHZlcnNpb24sdmFsdWUiLGRhdGFPYmplY3RTZXNzaW9uS2V5czoia2V5LHZlcnNpb24sdmFsdWUifSxpZGVudGl0eTp7YWNjZXNzVG9rZW5zOiJrZXksdmVyc2lvbix2YWx1ZSIsaWRlbnRpdGllczoidXNlclVSTCwgdXNlclByb2ZpbGUuZW1haWwsIHVzZXJQcm9maWxlLnVzZXJVUkwsIHVzZXJQcm9maWxlLm5hbWUifSxydW50aW1lQ2F0YWxvZ3VlOntydW50aW1lQ2F0YWxvZ3VlOiImY2d1aWQsIGFjY2Vzc0NvbnRyb2xQb2xpY3ksIGNvbnN0cmFpbnRzLCBkYXRhT2JqZWN0cywgaHlwZXJ0eVR5cGUsIG9iamVjdE5hbWUsIHNvdXJjZVBhY2thZ2UsIHZlcnNpb24ifSxwb2xpY3k6eyJyZXRoaW5rOmFjdGl2ZVBvbGljeSI6ImtleSx2ZXJzaW9uLHZhbHVlIiwicmV0aGluazpncm91cHMiOiJrZXksdmVyc2lvbix2YWx1ZSIsInJldGhpbms6dXNlclBvbGljaWVzIjoia2V5LHZlcnNpb24sdmFsdWUiLCJyZXRoaW5rOnNwUG9saWNpZXMiOiJrZXksdmVyc2lvbix2YWx1ZSJ9LHN5bmNoZXJNYW5hZ2VyOnsic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyI6ImtleSx2ZXJzaW9uLHZhbHVlIn0saHlwZXJ0eVJlc291cmNlczp7aHlwZXJ0eVJlc291cmNlczoiJnJlc291cmNlVVJMLCBuYW1lLCBjb250ZW50VXJsLCBjb250ZW50LCBjcmVhdGVkLCByZXBvcnRlciwgcmVzb3VyY2VUeXBlIn19LHJ1bnRpbWVVUkxTOntyZWdpc3RyeTp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoicmVnaXN0cnkifSxpZGVudGl0eU1vZHVsZTp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoiL2lkbSJ9LHJ1bnRpbWVVQTp7cHJlZml4OiJoeXBlcnR5LXJ1bnRpbWU6Ly8iLHN1ZmZpeDoiL3VhIn0sY2F0YWxvZ3VlOntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiIvY2F0YWxvZ3VlIn0sZ3JhcGhDb25uZWN0b3I6e3ByZWZpeDoiaHlwZXJ0eS1ydW50aW1lOi8vIixzdWZmaXg6Ii9ncmFwaCJ9LHN5bmNNYW5hZ2VyOntwcmVmaXg6Imh5cGVydHktcnVudGltZTovLyIsc3VmZml4OiIvc20ifX0sY2F0YWxvZ3VlVVJMczp7cHJvdG9jb2xzdHViOntwcmVmaXg6Imh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLiIsc3VmZml4OiIvLndlbGwta25vd24vcHJvdG9jb2xzdHViLyIsZmFsbGJhY2s6Imh5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLiVkb21haW4lLy53ZWxsLWtub3duL3Byb3RvY29sc3R1Yi8ifSxpZHBQcm94eTp7cHJlZml4OiJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4iLHN1ZmZpeDoiLy53ZWxsLWtub3duL2lkcC1wcm94eS8iLGZhbGxiYWNrOiJoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4lZG9tYWluJS8ud2VsbC1rbm93bi9pZHAtcHJveHkvIn19LG1zZ05vZGVVUkw6e3ByZWZpeDoiZG9tYWluOi8vbXNnLW5vZGUuIixzdWZmaXg6IiIsaHlwZXJ0eUFkZHJlc3NBbGxvY2F0aW9uOiIvaHlwZXJ0eS1hZGRyZXNzLWFsbG9jYXRpb24iLG9iamVjdEFkZHJlc3NBbGxvY2F0aW9uOiIvb2JqZWN0LWFkZHJlc3MtYWxsb2NhdGlvbiIsc3Vic2NyaXB0aW9uTWFuYWdlbWVudDoiL3NtIn0sZG9tYWluUmVnaXN0cnlVUkw6e3ByZWZpeDoiZG9tYWluOi8vcmVnaXN0cnkuIixzdWZmaXg6IiJ9LGdsb2JhbFJlZ2lzdHJ5VVJMOiJnbG9iYWw6Ly9yZWdpc3RyeS4ifX0sLyogMTQ1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIE9wZXJhdG9ycygpeygwLG8uZGVmYXVsdCkodGhpcyxPcGVyYXRvcnMpfXJldHVybigwLHMuZGVmYXVsdCkoT3BlcmF0b3JzLFt7a2V5OiJhbmQiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzBdJiZlWzFdfX0se2tleToiYmV0d2VlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9cGFyc2VJbnQoZVswXVswXSkscj1wYXJzZUludChlWzBdWzFdKSxuPWVbMV07cmV0dXJuIHI8dCYmKG49bjx0P24rPTI0MDA6bixyKz0yNDAwKSxuPnQmJm48cn19LHtrZXk6ImVxdWFscyIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIioiPT09U3RyaW5nKGVbMF0pfHxTdHJpbmcoZVswXSk9PT1TdHJpbmcoZVsxXSl9fSx7a2V5OiJncmVhdGVyVGhhbiIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV0+ZVswXX19LHtrZXk6ImluIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZVswXS5pbmRleE9mKGVbMV0pPi0xfX0se2tleToibGVzc1RoYW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPGVbMF19fSx7a2V5OiJub3QiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiFlWzBdfX0se2tleToib3IiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfHxlWzFdfX1dKSxPcGVyYXRvcnN9KCk7dC5kZWZhdWx0PWEsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMTQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDE0NSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9ZnVuY3Rpb24oKXsvKioKICAqIENyZWF0ZXMgYSBuZXcgQ29uZGl0aW9uLgogICogQGNsYXNzCiAgKiBAcGFyYW0gIHtzdHJpbmd9ICBhdHRyaWJ1dGUKICAqIEBwYXJhbSAge3N0cmluZ30gIG9wZXJhdG9yCiAgKiBAcGFyYW0gIHsqfSAgICAgICBwYXJhbXMKICAqLwpmdW5jdGlvbiBDb25kaXRpb24oZSx0LHIpeygwLG8uZGVmYXVsdCkodGhpcyxDb25kaXRpb24pLHRoaXMuYXR0cmlidXRlPWUsdGhpcy5vcGVyYXRvcj10LHRoaXMucGFyYW1zPXIsdGhpcy5vcGVyYXRvcnM9bmV3IHUuZGVmYXVsdH0vKioKICAqIFZlcmlmaWVzIGlmIHRoZSBjb25kaXRpb24gaXMgYXBwbGljYWJsZSB0byB0aGUgbWVzc2FnZS4gRmlyc3QsIHRoZSBzeXN0ZW0gdmFsdWUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgYXR0cmlidXRlIGlzIHJldHJpZXZlZDsgdGhlbiwgdGhhdCB2YWx1ZSBpcyBjb21wYXJlZCB3aXRoIHRoZSBwYXJhbWV0ZXIgc3BlY2lmaWVkIGluIHRoZSBjb25kaXRpb24gYnkgZXhlY3V0aW5nIHRoZSBvcGVyYXRvciBpbXBsZW1lbnRhdGlvbi4gSWYgdGhlIG9wZXJhdG9yIGlzICdpbicgYW5kIHRoZSBuYW1lIG9mIGEgZ3JvdXAgaXMgZ2l2ZW4sIHRoZW4gdGhlIGFycmF5IGhvbGRpbmcgdGhlIG1lbWJlcnMgb2YgdGhlIGdyb3VwIGlzIHJldHJpZXZlZCBiZWZvcmUgdGhlIGNvbXBhcmlzb24uCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGNvbnRleHQgICBlbnZpcm9ubWVudCB3aGVyZSB0aGUgUG9saWN5IEVuZ2luZSBpcyBiZWluZyB1c2VkCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIG1lc3NhZ2UKICAqLwpyZXR1cm4oMCxzLmRlZmF1bHQpKENvbmRpdGlvbixbe2tleToiaXNBcHBsaWNhYmxlIix2YWx1ZTpmdW5jdGlvbihlLHQpe2VbdGhpcy5hdHRyaWJ1dGVdPXttZXNzYWdlOnR9O3ZhciByPWVbdGhpcy5hdHRyaWJ1dGVdLG49dm9pZCAwO3JldHVybiJpbiIhPT10aGlzLm9wZXJhdG9yfHxBcnJheS5pc0FycmF5KHRoaXMucGFyYW1zKT90aGlzLm9wZXJhdG9yc1t0aGlzLm9wZXJhdG9yXShbdGhpcy5wYXJhbXMscl0pOihuPWUuZ2V0R3JvdXAodGhpcy5wYXJhbXMsdC50byksdGhpcy5vcGVyYXRvcnNbdGhpcy5vcGVyYXRvcl0oW24scl0pKX19XSksQ29uZGl0aW9ufSgpOy8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwp0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAxNDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXt2YXIgcjsKLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGUKcj1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpO3RyeXsKLy8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApCnI9cnx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKXx8KDAsZXZhbCkoInRoaXMiKX1jYXRjaChlKXsKLy8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGUKIm9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJihyPXdpbmRvdyl9Ci8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi4KLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3MKLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufQplLmV4cG9ydHM9cn0sLyogMTQ4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoMTApJiYhcig1KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkocigxMDIpKCJkaXYiKSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sLyogMTQ5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt0LmY9cig5KX0sLyogMTUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDIzKSxvPXIoMjQpLGk9cig4MCkoITEpLHM9cigxMDQpKCJJRV9QUk9UTyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLGE9byhlKSx1PTAsYz1bXTtmb3IociBpbiBhKXIhPXMmJm4oYSxyKSYmYy5wdXNoKHIpOwovLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzCmZvcig7dC5sZW5ndGg+dTspbihhLHI9dFt1KytdKSYmKH5pKGMscil8fGMucHVzaChyKSk7cmV0dXJuIGN9fSwvKiAxNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTEpLG89cigzKSxpPXIoNDkpO2UuZXhwb3J0cz1yKDEwKT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbihlLHQpe28oZSk7Zm9yKHZhciByLHM9aSh0KSxhPXMubGVuZ3RoLHU9MDthPnU7KW4uZihlLHI9c1t1KytdLHRbcl0pO3JldHVybiBlfX0sLyogMTUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdwp2YXIgbj1yKDI0KSxvPXIoNTIpLmYsaT17fS50b1N0cmluZyxzPSJvYmplY3QiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10sYT1mdW5jdGlvbihlKXt0cnl7cmV0dXJuIG8oZSl9Y2F0Y2goZSl7cmV0dXJuIHMuc2xpY2UoKX19O2UuZXhwb3J0cy5mPWZ1bmN0aW9uKGUpe3JldHVybiBzJiYiW29iamVjdCBXaW5kb3ddIj09aS5jYWxsKGUpP2EoZSk6byhuKGUpKX19LC8qIDE1MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pCnZhciBuPXIoNDkpLG89cig4MSksaT1yKDcxKSxzPXIoMTUpLGE9cig3MCksdT1PYmplY3QuYXNzaWduOwovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKZS5leHBvcnRzPSF1fHxyKDUpKGZ1bmN0aW9uKCl7dmFyIGU9e30sdD17fSxyPVN5bWJvbCgpLG49ImFiY2RlZmdoaWprbG1ub3BxcnN0IjtyZXR1cm4gZVtyXT03LG4uc3BsaXQoIiIpLmZvckVhY2goZnVuY3Rpb24oZSl7dFtlXT1lfSksNyE9dSh7fSxlKVtyXXx8T2JqZWN0LmtleXModSh7fSx0KSkuam9pbigiIikhPW59KT9mdW5jdGlvbihlLHQpe2ZvcigvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnZhciByPXMoZSksdT1hcmd1bWVudHMubGVuZ3RoLGM9MSxmPW8uZixsPWkuZjt1PmM7KWZvcih2YXIgZCxwPWEoYXJndW1lbnRzW2MrK10pLHk9Zj9uKHApLmNvbmNhdChmKHApKTpuKHApLGg9eS5sZW5ndGgsdj0wO2g+djspbC5jYWxsKHAsZD15W3YrK10pJiYocltkXT1wW2RdKTtyZXR1cm4gcn06dX0sLyogMTU0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxNiksbz1yKDYpLGk9cigxNTUpLHM9W10uc2xpY2UsYT17fSx1PWZ1bmN0aW9uKGUsdCxyKXtpZighKHQgaW4gYSkpe2Zvcih2YXIgbj1bXSxvPTA7bzx0O28rKyluW29dPSJhWyIrbysiXSI7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwphW3RdPUZ1bmN0aW9uKCJGLGEiLCJyZXR1cm4gbmV3IEYoIituLmpvaW4oIiwiKSsiKSIpfXJldHVybiBhW3RdKGUscil9O2UuZXhwb3J0cz1GdW5jdGlvbi5iaW5kfHxmdW5jdGlvbihlKXt2YXIgdD1uKHRoaXMpLHI9cy5jYWxsKGFyZ3VtZW50cywxKSxhPWZ1bmN0aW9uKCl7dmFyIG49ci5jb25jYXQocy5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0aGlzIGluc3RhbmNlb2YgYT91KHQsbi5sZW5ndGgsbik6aSh0LG4sZSl9O3JldHVybiBvKHQucHJvdG90eXBlKSYmKGEucHJvdG90eXBlPXQucHJvdG90eXBlKSxhfX0sLyogMTU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0sLyogMTU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDQpLnBhcnNlSW50LG89cig2MSkudHJpbSxpPXIoMTA4KSxzPS9eWy0rXT8wW3hYXS87ZS5leHBvcnRzPTghPT1uKGkrIjA4Iil8fDIyIT09bihpKyIweDE2Iik/ZnVuY3Rpb24oZSx0KXt2YXIgcj1vKFN0cmluZyhlKSwzKTtyZXR1cm4gbihyLHQ+Pj4wfHwocy50ZXN0KHIpPzE2OjEwKSl9Om59LC8qIDE1NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KS5wYXJzZUZsb2F0LG89cig2MSkudHJpbTtlLmV4cG9ydHM9MS9uKHIoMTA4KSsiLTAiKSE9LTEvMD9mdW5jdGlvbihlKXt2YXIgdD1vKFN0cmluZyhlKSwzKSxyPW4odCk7cmV0dXJuIDA9PT1yJiYiLSI9PXQuY2hhckF0KDApPy0wOnJ9Om59LC8qIDE1OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyOSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciIhPXR5cGVvZiBlJiYiTnVtYmVyIiE9bihlKSl0aHJvdyBUeXBlRXJyb3IodCk7cmV0dXJuK2V9fSwvKiAxNTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuMyBOdW1iZXIuaXNJbnRlZ2VyKG51bWJlcikKdmFyIG49cig2KSxvPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiFuKGUpJiZpc0Zpbml0ZShlKSYmbyhlKT09PWV9fSwvKiAxNjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gMjAuMi4yLjIwIE1hdGgubG9nMXAoeCkKZS5leHBvcnRzPU1hdGgubG9nMXB8fGZ1bmN0aW9uKGUpe3JldHVybihlPStlKT4tMWUtOCYmZTwxZS04P2UtZSplLzI6TWF0aC5sb2coMStlKX19LC8qIDE2MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xNiBNYXRoLmZyb3VuZCh4KQp2YXIgbj1yKDExMSksbz1NYXRoLnBvdyxpPW8oMiwtNTIpLHM9bygyLC0yMyksYT1vKDIsMTI3KSooMi1zKSx1PW8oMiwtMTI2KSxjPWZ1bmN0aW9uKGUpe3JldHVybiBlKzEvaS0xL2l9O2UuZXhwb3J0cz1NYXRoLmZyb3VuZHx8ZnVuY3Rpb24oZSl7dmFyIHQscixvPU1hdGguYWJzKGUpLGY9bihlKTsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQpyZXR1cm4gbzx1P2YqYyhvL3UvcykqdSpzOih0PSgxK3MvaSkqbyxyPXQtKHQtbykscj5hfHxyIT1yP2YqKDEvMCk6ZipyKX19LC8qIDE2MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3IKdmFyIG49cigzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIsbyl7dHJ5e3JldHVybiBvP3QobihyKVswXSxyWzFdKTp0KHIpfWNhdGNoKHQpe3ZhciBpPWUucmV0dXJuO3Rocm93IHZvaWQgMCE9PWkmJm4oaS5jYWxsKGUpKSx0fX19LC8qIDE2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNiksbz1yKDE1KSxpPXIoNzApLHM9cigxMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGEsdSl7bih0KTt2YXIgYz1vKGUpLGY9aShjKSxsPXMoYy5sZW5ndGgpLGQ9dT9sLTE6MCxwPXU/LTE6MTtpZihyPDIpZm9yKDs7KXtpZihkIGluIGYpe2E9ZltkXSxkKz1wO2JyZWFrfWlmKGQrPXAsdT9kPDA6bDw9ZCl0aHJvdyBUeXBlRXJyb3IoIlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWUiKX1mb3IoO3U/ZD49MDpsPmQ7ZCs9cClkIGluIGYmJihhPXQoYSxmW2RdLGQsYykpO3JldHVybiBhfX0sLyogMTY0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy4zIEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluKHRhcmdldCwgc3RhcnQsIGVuZCA9IHRoaXMubGVuZ3RoKQp2YXIgbj1yKDE1KSxvPXIoNTApLGk9cigxMik7ZS5leHBvcnRzPVtdLmNvcHlXaXRoaW58fGZ1bmN0aW9uKGUsdCl7dmFyIHI9bih0aGlzKSxzPWkoci5sZW5ndGgpLGE9byhlLHMpLHU9byh0LHMpLGM9YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDAsZj1NYXRoLm1pbigodm9pZCAwPT09Yz9zOm8oYyxzKSktdSxzLWEpLGw9MTtmb3IodTxhJiZhPHUrZiYmKGw9LTEsdSs9Zi0xLGErPWYtMSk7Zi0tID4wOyl1IGluIHI/clthXT1yW3VdOmRlbGV0ZSByW2FdLGErPWwsdSs9bDtyZXR1cm4gcn19LC8qIDE2NSAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTp0LGRvbmU6ISFlfX19LC8qIDE2NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIxLjIuNS4zIGdldCBSZWdFeHAucHJvdG90eXBlLmZsYWdzKCkKcigxMCkmJiJnIiE9Ly4vZy5mbGFncyYmcigxMSkuZihSZWdFeHAucHJvdG90eXBlLCJmbGFncyIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6cig4NSl9KX0sLyogMTY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSwvKiAxNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMyksbz1yKDYpLGk9cigxMjYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKG4oZSksbyh0KSYmdC5jb25zdHJ1Y3Rvcj09PWUpcmV0dXJuIHQ7dmFyIHI9aS5mKGUpO3JldHVybigwLHIucmVzb2x2ZSkodCksci5wcm9taXNlfX0sLyogMTY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxNzApLG89cig2Myk7Ci8vIDIzLjEgTWFwIE9iamVjdHMKZS5leHBvcnRzPXIoODkpKCJNYXAiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sewovLyAyMy4xLjMuNiBNYXAucHJvdG90eXBlLmdldChrZXkpCmdldDpmdW5jdGlvbihlKXt2YXIgdD1uLmdldEVudHJ5KG8odGhpcywiTWFwIiksZSk7cmV0dXJuIHQmJnQudn0sCi8vIDIzLjEuMy45IE1hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpCnNldDpmdW5jdGlvbihlLHQpe3JldHVybiBuLmRlZihvKHRoaXMsIk1hcCIpLDA9PT1lPzA6ZSx0KX19LG4sITApfSwvKiAxNzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDExKS5mLG89cig1MSksaT1yKDU2KSxzPXIoMjgpLGE9cig1NCksdT1yKDU1KSxjPXIoMTE0KSxmPXIoMTY1KSxsPXIoNTMpLGQ9cigxMCkscD1yKDQyKS5mYXN0S2V5LHk9cig2MyksaD1kPyJfcyI6InNpemUiLHY9ZnVuY3Rpb24oZSx0KXsKLy8gZmFzdCBjYXNlCnZhciByLG49cCh0KTtpZigiRiIhPT1uKXJldHVybiBlLl9pW25dOwovLyBmcm96ZW4gb2JqZWN0IGNhc2UKZm9yKHI9ZS5fZjtyO3I9ci5uKWlmKHIuaz09dClyZXR1cm4gcn07ZS5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQscixjKXt2YXIgZj1lKGZ1bmN0aW9uKGUsbil7YShlLGYsdCwiX2kiKSxlLl90PXQsLy8gY29sbGVjdGlvbiB0eXBlCmUuX2k9byhudWxsKSwvLyBpbmRleAplLl9mPXZvaWQgMCwvLyBmaXJzdCBlbnRyeQplLl9sPXZvaWQgMCwvLyBsYXN0IGVudHJ5CmVbaF09MCwvLyBzaXplCnZvaWQgMCE9biYmdShuLHIsZVtjXSxlKX0pO3JldHVybiBpKGYucHJvdG90eXBlLHsKLy8gMjMuMS4zLjEgTWFwLnByb3RvdHlwZS5jbGVhcigpCi8vIDIzLjIuMy4yIFNldC5wcm90b3R5cGUuY2xlYXIoKQpjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgZT15KHRoaXMsdCkscj1lLl9pLG49ZS5fZjtuO249bi5uKW4ucj0hMCxuLnAmJihuLnA9bi5wLm49dm9pZCAwKSxkZWxldGUgcltuLmldO2UuX2Y9ZS5fbD12b2lkIDAsZVtoXT0wfSwKLy8gMjMuMS4zLjMgTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQovLyAyMy4yLjMuNCBTZXQucHJvdG90eXBlLmRlbGV0ZSh2YWx1ZSkKZGVsZXRlOmZ1bmN0aW9uKGUpe3ZhciByPXkodGhpcyx0KSxuPXYocixlKTtpZihuKXt2YXIgbz1uLm4saT1uLnA7ZGVsZXRlIHIuX2lbbi5pXSxuLnI9ITAsaSYmKGkubj1vKSxvJiYoby5wPWkpLHIuX2Y9PW4mJihyLl9mPW8pLHIuX2w9PW4mJihyLl9sPWkpLHJbaF0tLX1yZXR1cm4hIW59LAovLyAyMy4yLjMuNiBTZXQucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiwgdGhpc0FyZyA9IHVuZGVmaW5lZCkKLy8gMjMuMS4zLjUgTWFwLnByb3RvdHlwZS5mb3JFYWNoKGNhbGxiYWNrZm4sIHRoaXNBcmcgPSB1bmRlZmluZWQpCmZvckVhY2g6ZnVuY3Rpb24oZSl7eSh0aGlzLHQpO2Zvcih2YXIgcixuPXMoZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtyPXI/ci5uOnRoaXMuX2Y7KQovLyByZXZlcnQgdG8gdGhlIGxhc3QgZXhpc3RpbmcgZW50cnkKZm9yKG4oci52LHIuayx0aGlzKTtyJiZyLnI7KXI9ci5wfSwKLy8gMjMuMS4zLjcgTWFwLnByb3RvdHlwZS5oYXMoa2V5KQovLyAyMy4yLjMuNyBTZXQucHJvdG90eXBlLmhhcyh2YWx1ZSkKaGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhdih5KHRoaXMsdCksZSl9fSksZCYmbihmLnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB5KHRoaXMsdClbaF19fSksZn0sZGVmOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLGk9dihlLHQpOwovLyBjaGFuZ2UgZXhpc3RpbmcgZW50cnkKLy8gYWRkIHRvIGluZGV4CnJldHVybiBpP2kudj1yOihlLl9sPWk9e2k6bz1wKHQsITApLC8vIDwtIGluZGV4Cms6dCwvLyA8LSBrZXkKdjpyLC8vIDwtIHZhbHVlCnA6bj1lLl9sLC8vIDwtIHByZXZpb3VzIGVudHJ5Cm46dm9pZCAwLC8vIDwtIG5leHQgZW50cnkKcjohMX0sZS5fZnx8KGUuX2Y9aSksbiYmKG4ubj1pKSxlW2hdKyssIkYiIT09byYmKGUuX2lbb109aSkpLGV9LGdldEVudHJ5OnYsc2V0U3Ryb25nOmZ1bmN0aW9uKGUsdCxyKXsKLy8gYWRkIC5rZXlzLCAudmFsdWVzLCAuZW50cmllcywgW0BAaXRlcmF0b3JdCi8vIDIzLjEuMy40LCAyMy4xLjMuOCwgMjMuMS4zLjExLCAyMy4xLjMuMTIsIDIzLjIuMy41LCAyMy4yLjMuOCwgMjMuMi4zLjEwLCAyMy4yLjMuMTEKYyhlLHQsZnVuY3Rpb24oZSxyKXt0aGlzLl90PXkoZSx0KSwvLyB0YXJnZXQKdGhpcy5faz1yLC8vIGtpbmQKdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Ci8vIHJldmVydCB0byB0aGUgbGFzdCBleGlzdGluZyBlbnRyeQpmb3IodmFyIGU9dGhpcyx0PWUuX2sscj1lLl9sO3ImJnIucjspcj1yLnA7Ci8vIGdldCBuZXh0IGVudHJ5Ci8vIGdldCBuZXh0IGVudHJ5Ci8vIHJldHVybiBzdGVwIGJ5IGtpbmQKLy8gb3IgZmluaXNoIHRoZSBpdGVyYXRpb24KcmV0dXJuIGUuX3QmJihlLl9sPXI9cj9yLm46ZS5fdC5fZik/ImtleXMiPT10P2YoMCxyLmspOiJ2YWx1ZXMiPT10P2YoMCxyLnYpOmYoMCxbci5rLHIudl0pOihlLl90PXZvaWQgMCxmKDEpKX0scj8iZW50cmllcyI6InZhbHVlcyIsIXIsITApLAovLyBhZGQgW0BAc3BlY2llc10sIDIzLjEuMi4yLCAyMy4yLjIuMgpsKHQpfX19LC8qIDE3MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTcwKSxvPXIoNjMpOwovLyAyMy4yIFNldCBPYmplY3RzCmUuZXhwb3J0cz1yKDg5KSgiU2V0IixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHsKLy8gMjMuMi4zLjEgU2V0LnByb3RvdHlwZS5hZGQodmFsdWUpCmFkZDpmdW5jdGlvbihlKXtyZXR1cm4gbi5kZWYobyh0aGlzLCJTZXQiKSxlPTA9PT1lPzA6ZSxlKX19LG4pfSwvKiAxNzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbixvPXIoMzYpKDApLGk9cigxOSkscz1yKDQyKSxhPXIoMTUzKSx1PXIoMTczKSxjPXIoNiksZj1yKDUpLGw9cig2MyksZD1zLmdldFdlYWsscD1PYmplY3QuaXNFeHRlbnNpYmxlLHk9dS51ZnN0b3JlLGg9e30sdj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LGc9ewovLyAyMy4zLjMuMyBXZWFrTWFwLnByb3RvdHlwZS5nZXQoa2V5KQpnZXQ6ZnVuY3Rpb24oZSl7aWYoYyhlKSl7dmFyIHQ9ZChlKTtyZXR1cm4hMD09PXQ/eShsKHRoaXMsIldlYWtNYXAiKSkuZ2V0KGUpOnQ/dFt0aGlzLl9pXTp2b2lkIDB9fSwKLy8gMjMuMy4zLjUgV2Vha01hcC5wcm90b3R5cGUuc2V0KGtleSwgdmFsdWUpCnNldDpmdW5jdGlvbihlLHQpe3JldHVybiB1LmRlZihsKHRoaXMsIldlYWtNYXAiKSxlLHQpfX0sYj1lLmV4cG9ydHM9cig4OSkoIldlYWtNYXAiLHYsZyx1LCEwLCEwKTsKLy8gSUUxMSBXZWFrTWFwIGZyb3plbiBrZXlzIGZpeApmKGZ1bmN0aW9uKCl7cmV0dXJuIDchPShuZXcgYikuc2V0KChPYmplY3QuZnJlZXplfHxPYmplY3QpKGgpLDcpLmdldChoKX0pJiYobj11LmdldENvbnN0cnVjdG9yKHYsIldlYWtNYXAiKSxhKG4ucHJvdG90eXBlLGcpLHMuTkVFRD0hMCxvKFsiZGVsZXRlIiwiaGFzIiwiZ2V0Iiwic2V0Il0sZnVuY3Rpb24oZSl7dmFyIHQ9Yi5wcm90b3R5cGUscj10W2VdO2kodCxlLGZ1bmN0aW9uKHQsbyl7Ci8vIHN0b3JlIGZyb3plbiBvYmplY3RzIG9uIGludGVybmFsIHdlYWttYXAgc2hpbQppZihjKHQpJiYhcCh0KSl7dGhpcy5fZnx8KHRoaXMuX2Y9bmV3IG4pO3ZhciBpPXRoaXMuX2ZbZV0odCxvKTtyZXR1cm4ic2V0Ij09ZT90aGlzOml9cmV0dXJuIHIuY2FsbCh0aGlzLHQsbyl9KX0pKX0sLyogMTczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig1Niksbz1yKDQyKS5nZXRXZWFrLGk9cigzKSxzPXIoNiksYT1yKDU0KSx1PXIoNTUpLGM9cigzNiksZj1yKDIzKSxsPXIoNjMpLGQ9Yyg1KSxwPWMoNikseT0wLGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX2x8fChlLl9sPW5ldyB2KX0sdj1mdW5jdGlvbigpe3RoaXMuYT1bXX0sZz1mdW5jdGlvbihlLHQpe3JldHVybiBkKGUuYSxmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXR9KX07di5wcm90b3R5cGU9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1nKHRoaXMsZSk7aWYodClyZXR1cm4gdFsxXX0saGFzOmZ1bmN0aW9uKGUpe3JldHVybiEhZyh0aGlzLGUpfSxzZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj1nKHRoaXMsZSk7cj9yWzFdPXQ6dGhpcy5hLnB1c2goW2UsdF0pfSxkZWxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9cCh0aGlzLmEsZnVuY3Rpb24odCl7cmV0dXJuIHRbMF09PT1lfSk7cmV0dXJufnQmJnRoaXMuYS5zcGxpY2UodCwxKSwhIX50fX0sZS5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbihlLHQscixpKXt2YXIgYz1lKGZ1bmN0aW9uKGUsbil7YShlLGMsdCwiX2kiKSxlLl90PXQsLy8gY29sbGVjdGlvbiB0eXBlCmUuX2k9eSsrLC8vIGNvbGxlY3Rpb24gaWQKZS5fbD12b2lkIDAsLy8gbGVhayBzdG9yZSBmb3IgdW5jYXVnaHQgZnJvemVuIG9iamVjdHMKdm9pZCAwIT1uJiZ1KG4scixlW2ldLGUpfSk7cmV0dXJuIG4oYy5wcm90b3R5cGUsewovLyAyMy4zLjMuMiBXZWFrTWFwLnByb3RvdHlwZS5kZWxldGUoa2V5KQovLyAyMy40LjMuMyBXZWFrU2V0LnByb3RvdHlwZS5kZWxldGUodmFsdWUpCmRlbGV0ZTpmdW5jdGlvbihlKXtpZighcyhlKSlyZXR1cm4hMTt2YXIgcj1vKGUpO3JldHVybiEwPT09cj9oKGwodGhpcyx0KSkuZGVsZXRlKGUpOnImJmYocix0aGlzLl9pKSYmZGVsZXRlIHJbdGhpcy5faV19LAovLyAyMy4zLjMuNCBXZWFrTWFwLnByb3RvdHlwZS5oYXMoa2V5KQovLyAyMy40LjMuNCBXZWFrU2V0LnByb3RvdHlwZS5oYXModmFsdWUpCmhhczpmdW5jdGlvbihlKXtpZighcyhlKSlyZXR1cm4hMTt2YXIgcj1vKGUpO3JldHVybiEwPT09cj9oKGwodGhpcyx0KSkuaGFzKGUpOnImJmYocix0aGlzLl9pKX19KSxjfSxkZWY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPW8oaSh0KSwhMCk7cmV0dXJuITA9PT1uP2goZSkuc2V0KHQscik6bltlLl9pXT1yLGV9LHVmc3RvcmU6aH19LC8qIDE3NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvaW5kZXgKdmFyIG49cigzNCksbz1yKDEyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSlyZXR1cm4gMDt2YXIgdD1uKGUpLHI9byh0KTtpZih0IT09cil0aHJvdyBSYW5nZUVycm9yKCJXcm9uZyBsZW5ndGghIik7cmV0dXJuIHJ9fSwvKiAxNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBhbGwgb2JqZWN0IGtleXMsIGluY2x1ZGVzIG5vbi1lbnVtZXJhYmxlIGFuZCBzeW1ib2xzCnZhciBuPXIoNTIpLG89cig4MSksaT1yKDMpLHM9cig0KS5SZWZsZWN0O2UuZXhwb3J0cz1zJiZzLm93bktleXN8fGZ1bmN0aW9uKGUpe3ZhciB0PW4uZihpKGUpKSxyPW8uZjtyZXR1cm4gcj90LmNvbmNhdChyKGUpKTp0fX0sLyogMTc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZmxhdHRlbkludG9BcnJheShlLHQscix1LGMsZixsLGQpe2Zvcih2YXIgcCx5LGg9Yyx2PTAsZz0hIWwmJnMobCxkLDMpO3Y8dTspe2lmKHYgaW4gcil7aWYocD1nP2coclt2XSx2LHQpOnJbdl0seT0hMSxvKHApJiYoeT1wW2FdLHk9dm9pZCAwIT09eT8hIXk6bihwKSkseSYmZj4wKWg9ZmxhdHRlbkludG9BcnJheShlLHQscCxpKHAubGVuZ3RoKSxoLGYtMSktMTtlbHNle2lmKGg+PTkwMDcxOTkyNTQ3NDA5OTEpdGhyb3cgVHlwZUVycm9yKCk7ZVtoXT1wfWgrK312Kyt9cmV0dXJuIGh9Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtZmxhdE1hcC8jc2VjLUZsYXR0ZW5JbnRvQXJyYXkKdmFyIG49cig4Miksbz1yKDYpLGk9cigxMikscz1yKDI4KSxhPXIoOSkoImlzQ29uY2F0U3ByZWFkYWJsZSIpO2UuZXhwb3J0cz1mbGF0dGVuSW50b0FycmF5fSwvKiAxNzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zdHJpbmctcGFkLXN0YXJ0LWVuZAp2YXIgbj1yKDEyKSxvPXIoMTEwKSxpPXIoMzMpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixzKXt2YXIgYT1TdHJpbmcoaShlKSksdT1hLmxlbmd0aCxjPXZvaWQgMD09PXI/IiAiOlN0cmluZyhyKSxmPW4odCk7aWYoZjw9dXx8IiI9PWMpcmV0dXJuIGE7dmFyIGw9Zi11LGQ9by5jYWxsKGMsTWF0aC5jZWlsKGwvYy5sZW5ndGgpKTtyZXR1cm4gZC5sZW5ndGg+bCYmKGQ9ZC5zbGljZSgwLGwpKSxzP2QrYTphK2R9fSwvKiAxNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDkpLG89cigyNCksaT1yKDcxKS5mO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7Zm9yKHZhciByLHM9byh0KSxhPW4ocyksdT1hLmxlbmd0aCxjPTAsZj1bXTt1PmM7KWkuY2FsbChzLHI9YVtjKytdKSYmZi5wdXNoKGU/W3Isc1tyXV06c1tyXSk7cmV0dXJuIGZ9fX0sLyogMTc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTgp2YXIgbj1yKDcyKSxvPXIoMTgwKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYobih0aGlzKSE9ZSl0aHJvdyBUeXBlRXJyb3IoZSsiI3RvSlNPTiBpc24ndCBnZW5lcmljIik7cmV0dXJuIG8odGhpcyl9fX0sLyogMTgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDU1KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1bXTtyZXR1cm4gbihlLCExLHIucHVzaCxyLHQpLHJ9fSwvKiAxODEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwplLmV4cG9ydHM9TWF0aC5zY2FsZXx8ZnVuY3Rpb24oZSx0LHIsbixvKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGh8fGUhPWV8fHQhPXR8fHIhPXJ8fG4hPW58fG8hPW8/TmFOOmU9PT0xLzB8fGU9PT0tMS8wP2U6KGUtdCkqKG8tbikvKHItdCkrbn19LC8qIDE4MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig1Nyksbz1yKDQ1KSxpPXIoNDE4KSghMSkscz1yKDEzMSkoIklFX1BST1RPIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsYT1vKGUpLHU9MCxjPVtdO2ZvcihyIGluIGEpciE9cyYmbihhLHIpJiZjLnB1c2gocik7Ci8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXMKZm9yKDt0Lmxlbmd0aD51OyluKGEscj10W3UrK10pJiYofmkoYyxyKXx8Yy5wdXNoKHIpKTtyZXR1cm4gY319LC8qIDE4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCnZhciBuPXIoNzQpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zCmUuZXhwb3J0cz1PYmplY3QoInoiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIlN0cmluZyI9PW4oZSk/ZS5zcGxpdCgiIik6T2JqZWN0KGUpfX0sLyogMTg0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoNDYpJiYhcig2NikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHIoMTM1KSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LC8qIDE4NSAqLwovKioqLwpmdW5jdGlvbihlLHQpe30sLyogMTg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig3NSksbz1yKDIxKSxpPXIoMTg3KSxzPXIoNTgpLGE9cig3NyksdT1yKDQyMiksYz1yKDk2KSxmPXIoMTg5KSxsPXIoMjIpKCJpdGVyYXRvciIpLGQ9IShbXS5rZXlzJiYibmV4dCJpbltdLmtleXMoKSkscD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIseSxoLHYsZyl7dShyLHQseSk7dmFyIGIsXyxtLFI9ZnVuY3Rpb24oZSl7aWYoIWQmJmUgaW4gTylyZXR1cm4gT1tlXTtzd2l0Y2goZSl7Y2FzZSJrZXlzIjpjYXNlInZhbHVlcyI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLGUpfX0sdz10KyIgSXRlcmF0b3IiLFM9InZhbHVlcyI9PWgsaz0hMSxPPWUucHJvdG90eXBlLFA9T1tsXXx8T1siQEBpdGVyYXRvciJdfHxoJiZPW2hdLE09UHx8UihoKSxMPWg/Uz9SKCJlbnRyaWVzIik6TTp2b2lkIDAseD0iQXJyYXkiPT10P08uZW50cmllc3x8UDpQO2lmKAovLyBGaXggbmF0aXZlCngmJihtPWYoeC5jYWxsKG5ldyBlKSkpIT09T2JqZWN0LnByb3RvdHlwZSYmbS5uZXh0JiYoCi8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKYyhtLHcsITApLAovLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKbnx8ImZ1bmN0aW9uIj09dHlwZW9mIG1bbF18fHMobSxsLHApKSwKLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgpTJiZQJiYidmFsdWVzIiE9PVAubmFtZSYmKGs9ITAsTT1mdW5jdGlvbigpe3JldHVybiBQLmNhbGwodGhpcyl9KSwKLy8gRGVmaW5lIGl0ZXJhdG9yCm4mJiFnfHwhZCYmIWsmJk9bbF18fHMoTyxsLE0pLAovLyBQbHVnIGZvciBsaWJyYXJ5CmFbdF09TSxhW3ddPXAsaClpZihiPXt2YWx1ZXM6Uz9NOlIoInZhbHVlcyIpLGtleXM6dj9NOlIoImtleXMiKSxlbnRyaWVzOkx9LGcpZm9yKF8gaW4gYilfIGluIE98fGkoTyxfLGJbX10pO2Vsc2UgbyhvLlArby5GKihkfHxrKSx0LGIpO3JldHVybiBifX0sLyogMTg3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9cig1OCl9LC8qIDE4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNykuZG9jdW1lbnQ7ZS5leHBvcnRzPW4mJm4uZG9jdW1lbnRFbGVtZW50fSwvKiAxODkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDU3KSxvPXIoNzMpLGk9cigxMzEpKCJJRV9QUk9UTyIpLHM9T2JqZWN0LnByb3RvdHlwZTtlLmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbihlKXtyZXR1cm4gZT1vKGUpLG4oZSxpKT9lW2ldOiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yJiZlIGluc3RhbmNlb2YgZS5jb25zdHJ1Y3Rvcj9lLmNvbnN0cnVjdG9yLnByb3RvdHlwZTplIGluc3RhbmNlb2YgT2JqZWN0P3M6bnVsbH19LC8qIDE5MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MjQpO2Zvcih2YXIgbj1yKDE3KSxvPXIoNTgpLGk9cig3Nykscz1yKDIyKSgidG9TdHJpbmdUYWciKSxhPSJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdCIuc3BsaXQoIiwiKSx1PTA7dTxhLmxlbmd0aDt1Kyspe3ZhciBjPWFbdV0sZj1uW2NdLGw9ZiYmZi5wcm90b3R5cGU7bCYmIWxbc10mJm8obCxzLGMpLGlbY109aS5BcnJheX19LC8qIDE5MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBuPXIoNzQpLG89cigyMikoInRvU3RyaW5nVGFnIiksaT0iQXJndW1lbnRzIj09bihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLHM9ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGVbdF19Y2F0Y2goZSl7fX07ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHIsYTtyZXR1cm4gdm9pZCAwPT09ZT8iVW5kZWZpbmVkIjpudWxsPT09ZT8iTnVsbCI6InN0cmluZyI9PXR5cGVvZihyPXModD1PYmplY3QoZSksbykpP3I6aT9uKHQpOiJPYmplY3QiPT0oYT1uKHQpKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuY2FsbGVlPyJBcmd1bWVudHMiOmF9fSwvKiAxOTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yCnZhciBuPXIoNDApO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscixvKXt0cnl7cmV0dXJuIG8/dChuKHIpWzBdLHJbMV0pOnQocil9Y2F0Y2godCl7dmFyIGk9ZS5yZXR1cm47dGhyb3cgdm9pZCAwIT09aSYmbihpLmNhbGwoZSkpLHR9fX0sLyogMTkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvcgp2YXIgbj1yKDc3KSxvPXIoMjIpKCJpdGVyYXRvciIpLGk9QXJyYXkucHJvdG90eXBlO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZSYmKG4uQXJyYXk9PT1lfHxpW29dPT09ZSl9fSwvKiAxOTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTkxKSxvPXIoMjIpKCJpdGVyYXRvciIpLGk9cig3Nyk7ZS5leHBvcnRzPXIoMTMpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9ZSlyZXR1cm4gZVtvXXx8ZVsiQEBpdGVyYXRvciJdfHxpW24oZSldfX0sLyogMTk1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCnZhciBuPXIoNDApLG89cig5NSksaT1yKDIyKSgic3BlY2llcyIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByLHM9bihlKS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09c3x8dm9pZCAwPT0ocj1uKHMpW2ldKT90Om8ocil9fSwvKiAxOTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8saSxzPXIoNjUpLGE9cig0MzApLHU9cigxODgpLGM9cigxMzUpLGY9cigxNyksbD1mLnByb2Nlc3MsZD1mLnNldEltbWVkaWF0ZSxwPWYuY2xlYXJJbW1lZGlhdGUseT1mLk1lc3NhZ2VDaGFubmVsLGg9Zi5EaXNwYXRjaCx2PTAsZz17fSxiPWZ1bmN0aW9uKCl7dmFyIGU9K3RoaXM7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnMKaWYoZy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Z1tlXTtkZWxldGUgZ1tlXSx0KCl9fSxfPWZ1bmN0aW9uKGUpe2IuY2FsbChlLmRhdGEpfTsKLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOgpkJiZwfHwoZD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO2FyZ3VtZW50cy5sZW5ndGg+cjspdC5wdXNoKGFyZ3VtZW50c1tyKytdKTtyZXR1cm4gZ1srK3ZdPWZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuYwphKCJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6RnVuY3Rpb24oZSksdCl9LG4odiksdn0scD1mdW5jdGlvbihlKXtkZWxldGUgZ1tlXX0sCi8vIE5vZGUuanMgMC44LQoicHJvY2VzcyI9PXIoNzQpKGwpP249ZnVuY3Rpb24oZSl7bC5uZXh0VGljayhzKGIsZSwxKSl9OmgmJmgubm93P249ZnVuY3Rpb24oZSl7aC5ub3cocyhiLGUsMSkpfTp5PyhvPW5ldyB5LGk9by5wb3J0MixvLnBvcnQxLm9ubWVzc2FnZT1fLG49cyhpLnBvc3RNZXNzYWdlLGksMSkpOmYuYWRkRXZlbnRMaXN0ZW5lciYmImZ1bmN0aW9uIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZi5pbXBvcnRTY3JpcHRzPyhuPWZ1bmN0aW9uKGUpe2YucG9zdE1lc3NhZ2UoZSsiIiwiKiIpfSxmLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLF8sITEpKTpuPSJvbnJlYWR5c3RhdGVjaGFuZ2UiaW4gYygic2NyaXB0Iik/ZnVuY3Rpb24oZSl7dS5hcHBlbmRDaGlsZChjKCJzY3JpcHQiKSkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwoZSl9fTpmdW5jdGlvbihlKXtzZXRUaW1lb3V0KHMoYixlLDEpLDApfSksZS5leHBvcnRzPXtzZXQ6ZCxjbGVhcjpwfX0sLyogMTk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm57ZTohMSx2OmUoKX19Y2F0Y2goZSl7cmV0dXJue2U6ITAsdjplfX19fSwvKiAxOTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNDApLG89cig0MSksaT1yKDEzOSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYobihlKSxvKHQpJiZ0LmNvbnN0cnVjdG9yPT09ZSlyZXR1cm4gdDt2YXIgcj1pLmYoZSk7cmV0dXJuKDAsci5yZXNvbHZlKSh0KSxyLnByb21pc2V9fSwvKiAxOTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMjIpKCJpdGVyYXRvciIpLG89ITE7dHJ5e3ZhciBpPVs3XVtuXSgpO2kucmV0dXJuPWZ1bmN0aW9uKCl7bz0hMH0sCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby10aHJvdy1saXRlcmFsCkFycmF5LmZyb20oaSxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaChlKXt9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoIXQmJiFvKXJldHVybiExO3ZhciByPSExO3RyeXt2YXIgaT1bN10scz1pW25dKCk7cy5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6cj0hMH19LGlbbl09ZnVuY3Rpb24oKXtyZXR1cm4gc30sZShpKX1jYXRjaChlKXt9cmV0dXJuIHJ9fSwvKiAyMDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5sb2c9dm9pZCAwO3ZhciBuPXIoNyksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pLGk9by5kZWZhdWx0LmdldExvZ2dlcigiYWRkcmVzcy1hbGxvY2F0aW9uIikscz1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJCdXMiKSxhPW8uZGVmYXVsdC5nZXRMb2dnZXIoIk1lc3NhZ2VCdXMiKSx1PW8uZGVmYXVsdC5nZXRMb2dnZXIoIkNvcmVEaXNjb3ZlcnkiKSxjPW8uZGVmYXVsdC5nZXRMb2dnZXIoIkdyYXBoQ29ubmVjdG9yIiksZj1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSIpLGw9by5kZWZhdWx0LmdldExvZ2dlcigiSWRlbnRpdHlNb2R1bGUiKSxkPW8uZGVmYXVsdC5nZXRMb2dnZXIoIlBFUCIpLHA9by5kZWZhdWx0LmdldExvZ2dlcigiUDJQQ29ubmVjdGlvblJlc29sdmUiKSx5PW8uZGVmYXVsdC5nZXRMb2dnZXIoIlJlZ2lzdHJ5IiksaD1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJSdW50aW1lVUEiKSx2PW8uZGVmYXVsdC5nZXRMb2dnZXIoIkxvYWRlciIpLGc9by5kZWZhdWx0LmdldExvZ2dlcigiRGVzY3JpcHRvcnMiKSxiPW8uZGVmYXVsdC5nZXRMb2dnZXIoIkRhdGFPYmplY3RzU3RvcmFnZSIpLF89by5kZWZhdWx0LmdldExvZ2dlcigiU3Vic2NyaXB0aW9uIiksbT1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJTdWJzY3JpcHRpb25NYW5hZ2VyIiksUj1vLmRlZmF1bHQuZ2V0TG9nZ2VyKCJPYnNlcnZlck9iamVjdCIpLHc9by5kZWZhdWx0LmdldExvZ2dlcigiUmVwb3J0ZXJPYmplY3QiKSxTPW8uZGVmYXVsdC5nZXRMb2dnZXIoIlN5blN1YnNjcmlwdGlvbiIpLGs9by5kZWZhdWx0LmdldExvZ2dlcigiU3luY2hlck1hbmFnZXIiKSxPPW8uZGVmYXVsdC5nZXRMb2dnZXIoIklkZW50aXR5TWFuYWdlciIpLFA9by5kZWZhdWx0LmdldExvZ2dlcigiQ3J5cHRvTWFuYWdlciIpLE09by5kZWZhdWx0LmdldExvZ2dlcigiUGlwZWxpbmUiKTt0LmxvZz1vLmRlZmF1bHQsLyoqCiAgMCBhY3R1YWwgbG9nZ2luZyBtZXRob2RzLCBvcmRlcmVkIGFuZCBhdmFpbGFibGUgYXM6CgogICAgICAwIC0gbG9nLnRyYWNlKG1zZykKICAgICAgMSAtIGxvZy5kZWJ1Zyhtc2cpCiAgICAgIDIgLSBsb2cuaW5mbyhtc2cpCiAgICAgIDMgLSBsb2cud2Fybihtc2cpCiAgICAgIDQgLSBsb2cuZXJyb3IobXNnKQoKICBsb2cubG9nKG1zZykgaXMgYWxzbyBhdmFpbGFibGUsIGFzIGFuIGFsaWFzIGZvciBsb2cuZGVidWcobXNnKSwgdG8gaW1wcm92ZSBjb21wYXRpYmlsaXR5IHdpdGggY29uc29sZSwgYW5kIG1ha2UgbWlncmF0aW9uIGVhc2llci4KCiAgRXhhY3Qgb3V0cHV0IGZvcm1hdHRpbmcgb2YgdGhlc2Ugd2lsbCBkZXBlbmQgb24gdGhlIGNvbnNvbGUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGNvbnRleHQgb2YgeW91ciBhcHBsaWNhdGlvbi4gRm9yIGV4YW1wbGUsIG1hbnkgZW52aXJvbm1lbnRzIHdpbGwgaW5jbHVkZSBhIGZ1bGwgc3RhY2sgdHJhY2Ugd2l0aCBhbGwgdHJhY2UoKSBjYWxscywgYW5kIGljb25zIG9yIHNpbWlsYXIgdG8gaGlnaGxpZ2h0IG90aGVyIGNhbGxzLgoKICBUaGVzZSBtZXRob2RzIHNob3VsZCBuZXZlciBmYWlsIGluIGFueSBlbnZpcm9ubWVudCwgZXZlbiBpZiBubyBjb25zb2xlIG9iamVjdCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLCBhbmQgc2hvdWxkIGFsd2F5cyBmYWxsIGJhY2sgdG8gYW4gYXZhaWxhYmxlIGxvZyBtZXRob2QgZXZlbiBpZiB0aGUgc3BlY2lmaWMgbWV0aG9kIGNhbGxlZCAoZS5nLiB3YXJuKSBpc24ndCBhdmFpbGFibGUuCgogIEJlIGF3YXJlIHRoYXQgYWxsIHRoaXMgbWVhbnMgdGhhdCB0aGVzZSBtZXRob2Qgd29uJ3QgbmVjZXNzYXJpbHkgYWx3YXlzIHByb2R1Y2UgZXhhY3RseSB0aGUgb3V0cHV0IHlvdSBleHBlY3QgaW4gZXZlcnkgZW52aXJvbm1lbnQ7IGxvZ2xldmVsIG9ubHkgZ3VhcmFudGVlcyB0aGF0IHRoZXNlIG1ldGhvZHMgd2lsbCBuZXZlciBleHBsb2RlIG9uIHlvdSwgYW5kIHRoYXQgaXQgd2lsbCBjYWxsIHRoZSBtb3N0IHJlbGV2YW50IG1ldGhvZCBpdCBjYW4gZmluZCwgd2l0aCB5b3VyIGFyZ3VtZW50LiBGaXJlZm94IGlzIGEgbm90YWJsZSBleGFtcGxlIGhlcmU6IGR1ZSB0byBhIGN1cnJlbnQgRmlyZWZveCBidWcgbG9nLnRyYWNlKG1zZykgY2FsbHMgaW4gRmlyZWZveCB3aWxsIHByaW50IG9ubHkgdGhlIHN0YWNrdHJhY2UsIGFuZCB3b24ndCBpbmNsdWRlIGFueSBwYXNzZWQgbWVzc2FnZSBhcmd1bWVudHMuCgoqLwovLyBhZGRyZXNzLWFsbG9jYXRpb24KaS5zZXRMZXZlbCgzKSwKLy8gQnVzCnMuc2V0TGV2ZWwoMyksCi8vIE1lc3NhZ2VCdXMKYS5zZXRMZXZlbCgwKSwKLy8gQ29yZURpc2NvdmVyeQp1LnNldExldmVsKDUpLAovLyBHcmFwaENvbm5lY3RvcgpjLnNldExldmVsKDUpLAovLyBIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZQpmLnNldExldmVsKDMpLAovLyBJZGVudGl0eU1vZHVsZQpsLnNldExldmVsKDApLAovLyBQRVAKZC5zZXRMZXZlbCgzKSwKLy8gUDJQQ29ubmVjdGlvblJlc29sdmUKcC5zZXRMZXZlbCgzKSwKLy8gUmVnaXN0cnkKeS5zZXRMZXZlbCgzKSwKLy8gUnVudGltZVVBCmguc2V0TGV2ZWwoMyksCi8vIExvYWRlcgp2LnNldExldmVsKDMpLAovLyBEZXNjcmlwdG9ycwpnLnNldExldmVsKDMpLAovLyBEYXRhT2JqZWN0c1N0b3JhZ2UKYi5zZXRMZXZlbCgzKSwKLy8gU3Vic2NyaXB0aW9uCl8uc2V0TGV2ZWwoMyksCi8vIFN1YnNjcmlwdGlvbk1hbmFnZXIKbS5zZXRMZXZlbCgzKSwKLy8gT2JzZXJ2ZXJPYmplY3QKUi5zZXRMZXZlbCgzKSwKLy8gUmVwb3J0ZXJPYmplY3QKdy5zZXRMZXZlbCgzKSwKLy8gU3luU3Vic2NyaXB0aW9uClMuc2V0TGV2ZWwoMyksCi8vIFN5bmNoZXJNYW5hZ2VyCmsuc2V0TGV2ZWwoMyksCi8vIElkZW50aXR5TWFuYWdlcgpPLnNldExldmVsKDApLAovLyBDcnlwdG9NYW5hZ2VyClAuc2V0TGV2ZWwoMyksCi8vIFBpcGVsaW5lCk0uc2V0TGV2ZWwoMyl9LC8qIDIwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi43IC8gMTUuMi4zLjQgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKdmFyIG49cigxODIpLG89cigxMzMpLmNvbmNhdCgibGVuZ3RoIiwicHJvdG90eXBlIik7dC5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbihlKXtyZXR1cm4gbihlLG8pfX0sLyogMjAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNyksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9Zi5nZXRMb2dnZXIoIkJ1cyIpLGQ9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX21zZ0lkOiBudW1iZXI7CiAgX3N1YnNjcmlwdGlvbnM6IDx1cmw6IE1zZ0xpc3RlbmVyW10+CiAgIF9yZXNwb25zZVRpbWVPdXQ6IG51bWJlcgogIF9yZXNwb25zZUNhbGxiYWNrczogPHVybCtpZDogKG1zZykgPT4gdm9pZD4KICAgKi8KZnVuY3Rpb24gQnVzKCl7KDAscy5kZWZhdWx0KSh0aGlzLEJ1cyk7dmFyIGU9dGhpcztlLl9tc2dJZD0wLGUuX3N1YnNjcmlwdGlvbnM9e30sZS5fcmVzcG9uc2VUaW1lT3V0PTE1ZTMsLy9kZWZhdWx0IHRvIDNzCmUuX3Jlc3BvbnNlQ2FsbGJhY2tzPXt9LGUuX3JlZ2lzdGVyRXh0ZXJuYWxMaXN0ZW5lcigpfS8qKgogICogUmVnaXN0ZXIgbGlzdGVuZXIgdG8gcmVjZWl2ZSBtZXNzYWdlIHdoZW4gIm1zZy50byA9PT0gdXJsIi4KICAqIFNwZWNpYWwgdXJsICIqIiBmb3IgZGVmYXVsdCBsaXN0ZW5lciBpcyBhY2NlcHRlZCB0byBpbnRlcmNlcHQgYWxsIG1lc3NhZ2VzLgogICogQHBhcmFtIHtVUkx9IHVybCBBZGRyZXNzIHRvIGludGVyY2VwdCwgdGhhIGlzIGluIHRoZSBtZXNzYWdlICJ0byIKICAqIEBwYXJhbSB7TGlzdGVuZXJ9IGxpc3RlbmVyIGxpc3RlbmVyCiAgKiBAcmV0dXJuIHtNc2dMaXN0ZW5lcn0gaW5zdGFuY2Ugb2YgTXNnTGlzdGVuZXIKICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKEJ1cyxbe2tleToiYWRkTGlzdGVuZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPW5ldyBwKHIuX3N1YnNjcmlwdGlvbnMsZSx0KSxvPXIuX3N1YnNjcmlwdGlvbnNbZV07cmV0dXJuIG98fChvPVtdLHIuX3N1YnNjcmlwdGlvbnNbZV09byksby5wdXNoKG4pLG59fSx7a2V5OiJhZGRSZXNwb25zZUxpc3RlbmVyIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbZSt0XT1yfX0se2tleToicmVtb3ZlUmVzcG9uc2VMaXN0ZW5lciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtkZWxldGUgdGhpcy5fcmVzcG9uc2VDYWxsYmFja3NbZSt0XX19LHtrZXk6InJlbW92ZUFsbExpc3RlbmVyc09mIix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fc3Vic2NyaXB0aW9uc1tlXX19LHtrZXk6ImJpbmQiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLG89dGhpcztyZXR1cm57dGhpc0xpc3RlbmVyOm8uYWRkTGlzdGVuZXIoZSxmdW5jdGlvbihlKXtyLnBvc3RNZXNzYWdlKGUpfSksdGFyZ2V0TGlzdGVuZXI6ci5hZGRMaXN0ZW5lcih0LGZ1bmN0aW9uKGUpe28ucG9zdE1lc3NhZ2UoZSl9KSx1bmJpbmQ6ZnVuY3Rpb24oKXtuLnRoaXNMaXN0ZW5lci5yZW1vdmUoKSxuLnRhcmdldExpc3RlbmVyLnJlbW92ZSgpfX19fSx7a2V5OiJfcHVibGlzaE9uRGVmYXVsdCIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vaXMgdGhlcmUgYW55ICIqIiAoZGVmYXVsdCkgbGlzdGVuZXJzPwp2YXIgdD10aGlzLl9zdWJzY3JpcHRpb25zWyIqIl07dCYmdGhpcy5fcHVibGlzaE9uKHQsZSl9fSx7a2V5OiJfcHVibGlzaE9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLl9jYWxsYmFjayh0KX0pfX0se2tleToiX3Jlc3BvbnNlQ2FsbGJhY2siLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxuPXRoaXM7Ci8vYXV0b21hdGljIG1hbmFnZW1lbnQgb2YgcmVzcG9uc2UgaGFuZGxlcnMKaWYodCl7dmFyIG89ZS5mcm9tK2UuaWQ7bi5fcmVzcG9uc2VDYWxsYmFja3Nbb109dCxyJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIHQ9bi5fcmVzcG9uc2VDYWxsYmFja3Nbb107aWYoZGVsZXRlIG4uX3Jlc3BvbnNlQ2FsbGJhY2tzW29dLHQpe3Qoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGJvZHk6e2NvZGU6NDA4LGRlc2M6IlJlc3BvbnNlIHRpbWVvdXQhIix2YWx1ZTplfX0pfX0sbi5fcmVzcG9uc2VUaW1lT3V0KX19fSx7a2V5OiJfb25SZXNwb25zZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZigicmVzcG9uc2UiPT09ZS50eXBlKXt2YXIgcj1lLnRvK2UuaWQsbj10Ll9yZXNwb25zZUNhbGxiYWNrc1tyXTtpZihlLmJvZHkuY29kZT49MjAwJiYKLy9pZiBpdCdzIGEgcHJvdmlzaW9uYWwgcmVzcG9uc2UsIGRvbid0IGRlbGV0ZSByZXNwb25zZSBsaXN0ZW5lcgpkZWxldGUgdC5fcmVzcG9uc2VDYWxsYmFja3Nbcl0sbilyZXR1cm4gbihlKSwhMH1yZXR1cm4hMX19LHtrZXk6Il9vbk1lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXQuX29uUmVzcG9uc2UoZSkpe3ZhciByPXQuX3N1YnNjcmlwdGlvbnNbZS50b107cj90Ll9wdWJsaXNoT24ocixlKTp0Ll9wdWJsaXNoT25EZWZhdWx0KGUpfX19LHtrZXk6Il9nZW5JZCIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vVE9ETzogaG93IGRvIHdlIG1hbmFnZSBtZXNzYWdlIElEJ3M/IFNob3VsZCBpdCBiZSBhIGdsb2JhbCBydW50aW1lIGNvdW50ZXIsIG9yIHBlciBVUkwgYWRkcmVzcz8KLy9HbG9iYWwgY291bnRlciB3aWxsIG5vdCB3b3JrLCBiZWNhdXNlIHRoZXJlIHdpbGwgYmUgbXVsdGlwbGUgTWluaUJ1cyBpbnN0YW5jZXMhCi8vUGVyIFVSTCwgY2FuIGJlIGEgbG90IG9mIGRhdGEgdG8gbWFpbnRhaW4hCi8vTWF5YmUgYSBjb3VudGVyIHBlciBNaW5pQnVzIGluc3RhbmNlLiBUaGlzIGlzIHRoZSBhc3N1bWVkIHNvbHV0aW9uIGZvciBub3cuCmUuaWQmJjAhPT1lLmlkfHwodGhpcy5fbXNnSWQrKyxlLmlkPXRoaXMuX21zZ0lkKX19LHtrZXk6InBvc3RNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQpe319LHtrZXk6InBvc3RNZXNzYWdlV2l0aFJldHJpZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9MCxzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24odCxvKXtuLnBvc3RNZXNzYWdlKGUsZnVuY3Rpb24obil7NDA4PT09bi5ib2R5LmNvZGV8fDUwMD09PW4uYm9keS5jb2RlP28oKToobC5pbmZvKCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIG1zZyBkZWxpdmVyZWQ6ICIsZSkscihuKSx0KCkpfSl9KX07IWZ1bmN0aW9uIHRyeUFnYWluKCl7cygpLnRoZW4oZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7aWYobC53YXJuKCJbQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXNdIE1lc3NhZ2UgQm91bmNlZCAocmV0cnkgIitpKyIpOiAnIixlKSwhKGkrKzx0KSl7dmFyIHI9IltFcnJvcl0gTWVzc2FnZSBCb3VuY2VkIChkZWxpdmVyeSBhdHRlbXB0cyAiK3QrIik6ICciO3Rocm93IG5ldyBFcnJvcihyK2UpfXRyeUFnYWluKCl9KX0oKX19LHtrZXk6Il9vblBvc3RNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt9fSx7a2V5OiJfcmVnaXN0ZXJFeHRlcm5hbExpc3RlbmVyIix2YWx1ZTpmdW5jdGlvbigpe319XSksQnVzfSgpLHA9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgX3N1YnNjcmlwdGlvbnM6IDxzdHJpbmc6IE1zZ0xpc3RlbmVyW10+OwogIF91cmw6IHN0cmluZzsKICBfY2FsbGJhY2s6IChtc2cpID0+IHZvaWQ7CiAgKi8KZnVuY3Rpb24gTXNnTGlzdGVuZXIoZSx0LHIpeygwLHMuZGVmYXVsdCkodGhpcyxNc2dMaXN0ZW5lcik7dmFyIG49dGhpcztuLl9zdWJzY3JpcHRpb25zPWUsbi5fdXJsPXQsbi5fY2FsbGJhY2s9cn1yZXR1cm4oMCx1LmRlZmF1bHQpKE1zZ0xpc3RlbmVyLFt7a2V5OiJyZW1vdmUiLC8qKgogICAgICogUmVtb3ZlIHRoaXMgbGlzdGVuZXIgZnJvbSB0aGUgQnVzCiAgICAgKi8KdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5fc3Vic2NyaXB0aW9uc1tlLl91cmxdO2lmKHQpe3ZhciByPXQuaW5kZXhPZihlKTt0LnNwbGljZShyLDEpLAovL2lmIHRoZXJlIGFyZSBubyBsaXN0ZW5lcnMsIHJlbW92ZSB0aGUgc3Vic2NyaXB0aW9uIGVudGlyZWx5LgowPT09dC5sZW5ndGgmJmRlbGV0ZSBlLl9zdWJzY3JpcHRpb25zW2UuX3VybF19fX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxNc2dMaXN0ZW5lcn0oKTt0LmRlZmF1bHQ9ZCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAyMDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig1OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNjcpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNjgpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNDY4KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiBIeXBlcnR5SW5zdGFuY2UoZSx0LHIsbixpLGEsdSxjLGwsZCxwLHksaCx2LGcpeygwLHMuZGVmYXVsdCkodGhpcyxIeXBlcnR5SW5zdGFuY2UpO3ZhciBiPSgwLGYuZGVmYXVsdCkodGhpcywoSHlwZXJ0eUluc3RhbmNlLl9fcHJvdG9fX3x8KDAsby5kZWZhdWx0KShIeXBlcnR5SW5zdGFuY2UpKS5jYWxsKHRoaXMsZSx0LHIscCx2LGcpKSxfPWI7cmV0dXJuIF8uX2Rlc2NyaXB0b3I9bixfLl9oeXBlcnR5VVJMPWksXy5fdXNlcj1hLF8uX2d1aWQ9dSxfLl9ydW50aW1lPWMsXy5fY29udGV4dD1sLF8uX3AycEhhbmRsZXI9ZCxfLl9kYXRhU2NoZW1lcz15LF8uX3Jlc291cmNlcz1oLGJ9cmV0dXJuKDAsZC5kZWZhdWx0KShIeXBlcnR5SW5zdGFuY2UsZSksKDAsdS5kZWZhdWx0KShIeXBlcnR5SW5zdGFuY2UsW3trZXk6InVzZXIiLHNldDpmdW5jdGlvbihlKXt0aGlzLnVzZXI9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJ9fSx7a2V5OiJoeXBlcnR5VVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faHlwZXJ0eVVSTH19LHtrZXk6ImRlc2NyaXB0b3IiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXNjcmlwdG9yfX0se2tleToib2JqZWN0TmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rlc2NyaXB0b3IuX29iamVjdE5hbWV9fSx7a2V5OiJwMnBIYW5kbGVyIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcDJwSGFuZGxlcn19LHtrZXk6ImRhdGFTY2hlbWVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVNjaGVtZXN9fSx7a2V5OiJyZXNvdXJjZXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXNvdXJjZXN9fSx7a2V5OiJydW50aW1lVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZX19XSksSHlwZXJ0eUluc3RhbmNlfSh5LmRlZmF1bHQpOy8qKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwp0LmRlZmF1bHQ9aCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAyMDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyB2ZXJzaW9uOiAwLjkuMAovLyBkYXRlOiBUdWUgSnVsIDE3IDIwMTggMTE6MDE6MzYgR01UKzAxMDAgKFdlc3Rlcm4gRXVyb3BlYW4gU3VtbWVyIFRpbWUpCi8vIGxpY2VuY2U6IAovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KIWZ1bmN0aW9uKHQscil7ZS5leHBvcnRzPXIoKX0oInVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4ocil7aWYodFtyXSlyZXR1cm4gdFtyXS5leHBvcnRzO3ZhciBvPXRbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiBlW3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9dmFyIHQ9e307cmV0dXJuIG4ubT1lLG4uYz10LG4uZD1mdW5jdGlvbihlLHQscil7bi5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDpyfSl9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsImEiLHQpLHR9LG4ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sbi5wPSIiLG4obi5zPTE5OSl9KHswOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPXt2ZXJzaW9uOiIyLjUuNyJ9OyJudW1iZXIiPT10eXBlb2YgX19lJiYoX19lPXIpfSwxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPXIpfSwxMDpmdW5jdGlvbihlLHQpe3ZhciByPXt9Lmhhc093blByb3BlcnR5O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiByLmNhbGwoZSx0KX19LDExOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDgpLG89cigxNik7ZS5leHBvcnRzPXIoNCk/ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmYoZSx0LG8oMSxyKSl9OmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVt0XT1yLGV9fSwxMjM6ZnVuY3Rpb24oZSx0KXshZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQscixuLG8saSl7ZnVuY3Rpb24gcyhlLG4pe2lmKHMuZGVsYXk9biwhcy5wYXVzZSYmdS5jaGFuZ2VzZXQubGVuZ3RoPjApe2lmKCFlKXt2YXIgbz11LmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIXJ8fHIuaW5kZXhPZihlLnR5cGUpPj0wfSk7by5sZW5ndGg+MCYmdChvKX11LmNoYW5nZXNldD1bXX19dmFyIGEsdT10aGlzO3JldHVybiBzLnBhdXNlPW8scy5kZWxheT1pLHUuZ2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIl9fb2JzZXJ2ZXJfXyI9PT10P3U6InVub2JzZXJ2ZSI9PT10P2Z1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC51bm9ic2VydmUoZSksZX06ImRlbGl2ZXIiPT09dD9zOmVbdF19LHUudGFyZ2V0PWUsdS5jaGFuZ2VzZXQ9W10sdS50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19ffHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJzX18iLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMSx2YWx1ZTpbXX0pKSx1LnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaCh0KSx1LnRhcmdldC5fX29ic2VydmVyc19fLnB1c2godGhpcyksYT1uZXcgUHJveHkoZSx1KSxzKCExLGkpLGF9T2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBQcm94eXx8KGUucHJvdG90eXBlLmRlbGl2ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQobnVsbCwiZGVsaXZlciIpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWVbdF0sbz12b2lkIDA9PT1uPyJhZGQiOiJ1cGRhdGUiO2lmKGVbdF09cixlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmKCF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKG8pPj0wKSl7dmFyIGk9e29iamVjdDplLG5hbWU6dCx0eXBlOm99LHM9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxhPXRoaXMuZGVsaXZlcigpOyJ1cGRhdGUiPT09byYmKGkub2xkVmFsdWU9biksdGhpcy5jaGFuZ2VzZXQucHVzaChpKSxzJiZhKCExLCJudW1iZXIiPT10eXBlb2YgYS5kZWxheT9hLmRlbGF5OjEwKX1yZXR1cm4hMH0sZS5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lW3RdO2lmKGRlbGV0ZSBlW3RdLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigiZGVsZXRlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZToiZGVsZXRlIixvbGRWYWx1ZTpyfSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsIm51bWJlciI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfXJldHVybiEwfSxlLnByb3RvdHlwZS5kZWZpbmVQcm9wZXJ0eT1mdW5jdGlvbihlLHQscil7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxyKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInJlY29uZmlndXJlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZToicmVjb25maWd1cmUifSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsIm51bWJlciI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfXJldHVybiEwfSxlLnByb3RvdHlwZS5zZXRQcm90b3R5cGVPZj1mdW5jdGlvbihlLHQpe3ZhciByPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihPYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInNldFByb3RvdHlwZSIpPj0wKXt2YXIgbj17b2JqZWN0OmUsbmFtZToiX19wcm90b19fIix0eXBlOiJzZXRQcm90b3R5cGUiLG9sZFZhbHVlOnJ9LG89MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxpPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2gobiksbyYmaSghMSwibnVtYmVyIj09dHlwZW9mIGkuZGVsYXk/aS5kZWxheToxMCl9cmV0dXJuITB9LGUucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zPWZ1bmN0aW9uKGUpe2lmKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyhlKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApe3ZhciB0PXtvYmplY3Q6ZSx0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyJ9LHI9MD09PXRoaXMuY2hhbmdlc2V0Lmxlbmd0aCxuPXRoaXMuZGVsaXZlcigpO3RoaXMuY2hhbmdlc2V0LnB1c2godCksciYmbighMSwibnVtYmVyIj09dHlwZW9mIG4uZGVsYXk/bi5kZWxheToxMCl9cmV0dXJuITB9LE9iamVjdC5vYnNlcnZlPWZ1bmN0aW9uKHQscixuLG8saSxzKXtyZXR1cm4gbmV3IGUodCxyLG4sbyxpLHMpfSxPYmplY3QudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYoZS5fX29ic2VydmVyQ2FsbGJhY2tzX18pe2lmKCF0KXJldHVybiBlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UoMCxlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpLHZvaWQgZS5fX29ic2VydmVyc19fLnNwbGljZSgwLGUuX19vYnNlcnZlcnNfXy5sZW5ndGgpO2UuX19vYnNlcnZlckNhbGxiYWNrc19fLmZvckVhY2goZnVuY3Rpb24ocixuKXt0PT09ciYmKGUuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShuLDEpLGRlbGV0ZSBlLl9fb2JzZXJ2ZXJzX19bbl0uY2FsbGJhY2ssZS5fX29ic2VydmVyc19fLnNwbGljZShuLDEpKX0pfX0sQXJyYXkub2JzZXJ2ZT1mdW5jdGlvbihlLHQscixuLG8saSl7aWYoIShlIGluc3RhbmNlb2YgQXJyYXl8fEFycmF5LmlzQXJyYXkoZSkpKXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IHRvIEFycmF5Lm9ic2VydmVyIGlzIG5vdCBhbiBBcnJheSIpO3I9cnx8WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJzcGxpY2UiXTt2YXIgcz1uZXcgUHJveHkoZSx7Z2V0OmZ1bmN0aW9uKHQsbil7cmV0dXJuInVub2JzZXJ2ZSI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiBlP09iamVjdC51bm9ic2VydmUodCxlKTp0LnVub2JzZXJ2ZSgpfToic3BsaWNlIj09PW4/ZnVuY3Rpb24obixvKXtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCB0d28gYXJndW1lbnRzIHRvIEFycmF5IHNwbGljZSBhcmUgbm90IG51bWJlciwgbnVtYmVyIik7dmFyIGk9dGhpcy5zbGljZShuLG4rbykscz1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzLmxlbmd0aC0yOjAsdT17b2JqZWN0OmUsdHlwZToic3BsaWNlIixpbmRleDpuLHJlbW92ZWQ6aSxhZGRlZENvdW50OnN9O2lmKHQuc3BsaWNlLmFwcGx5KHQsYXJndW1lbnRzKSxyLmluZGV4T2YoInNwbGljZSIpPj0wKXtuPTA9PT1hLl9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoO3ZhciBjPWEuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTthLl9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQucHVzaCh1KSxuJiZjKCExLCJudW1iZXIiPT10eXBlb2YgYy5kZWxheT9jLmRlbGF5OjEwKX19OiJwdXNoIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLDAsZSl9OiJwb3AiPT09bj9mdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpfToidW5zaGlmdCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwbGljZSgwLDAsZSl9OiJzaGlmdCI9PT1uP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaWNlKDAsMSl9OnRbbl19fSksYT1PYmplY3Qub2JzZXJ2ZShzLGZ1bmN0aW9uKGUpe3ZhciBuPWUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiJsZW5ndGgiIT09ZS5uYW1lJiYiYWRkIiE9PWUubmFtZSYmKCFyfHxyLmluZGV4T2YoZS50eXBlKT49MCl9KTtuLmxlbmd0aD4wJiZ0KG4pfSxyLG4sbyxpKTtyZXR1cm4gYX0sQXJyYXkudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudW5vYnNlcnZlKHQpfSksT2JqZWN0LmRlZXBPYnNlcnZlPWZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBvKGUscil7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihvKXtpZigoIm9iamVjdCI9PT1uKGVbb10pfHwiYXJyYXkiPT09bihlW29dKSkmJiFlW29dLmhhc093blByb3BlcnR5KCJfX29ic2VydmVyc19fIikpe3ZhciBpPXIuc2xpY2UoMCk7aS5wdXNoKG8pLGVbb109T2JqZWN0LmRlZXBPYnNlcnZlKGVbb10sdCxpKX19KX12YXIgbj1mdW5jdGlvbihlKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKGUpLm1hdGNoKC9ccyhbYS16QS1aXSspLylbMV0udG9Mb3dlckNhc2UoKX07cmV0dXJuIG8oZSxyPXJ8fFtdKSxPYmplY3Qub2JzZXJ2ZShlLGZ1bmN0aW9uKG4pe3ZhciBpPVtdO24uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD0oci5sZW5ndGg+MD9yLmpvaW4oIi4iKSsiLiI6IiIpK2UubmFtZTsidXBkYXRlIiE9PWUudHlwZSYmImFkZCIhPT1lLnR5cGV8fG8oZS5vYmplY3QsciksaS5wdXNoKHtuYW1lOmUubmFtZSxvYmplY3Q6ZS5vYmplY3QsdHlwZTplLnR5cGUsb2xkVmFsdWU6ZS5vbGRWYWx1ZSxuZXdWYWx1ZTplLm9iamVjdFtlLm5hbWVdLGtleXBhdGg6dH0pLGZ1bmN0aW9uIGUodCxyLG4sbyxzKXtvIGluc3RhbmNlb2YgT2JqZWN0P09iamVjdC5rZXlzKG8pLmZvckVhY2goZnVuY3Rpb24oYSl7aWYoIW58fG5bYV0hPT1vW2FdKXt2YXIgdT1uJiZ2b2lkIDAhPT1uW2FdP25bYV06dm9pZCAwLGM9dm9pZCAwPT09dT8iYWRkIjoidXBkYXRlIixmPXMrIi4iK2E7aS5wdXNoKHtuYW1lOnQsb2JqZWN0OnIsdHlwZTpjLG9sZFZhbHVlOnUsbmV3VmFsdWU6b1thXSxrZXlwYXRoOmZ9KSxlKHQscix1LG9bYV0sZil9fSk6biBpbnN0YW5jZW9mIE9iamVjdCYmT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgdT1udWxsPT09bz8idXBkYXRlIjoiZGVsZXRlIixjPXMrIi4iK2E7aS5wdXNoKHtuYW1lOnQsb2JqZWN0OnIsdHlwZTp1LG9sZFZhbHVlOm5bYV0sbmV3VmFsdWU6byxrZXlwYXRoOmN9KSxlKHQscixuW2FdLHZvaWQgMCxjKX0pfShlLm5hbWUsZS5vYmplY3QsZS5vbGRWYWx1ZSxlLm9iamVjdFtlLm5hbWVdLHQpfSksdChpKX0pfX0oKX0sMTM6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiEhZSgpfWNhdGNoKGUpe3JldHVybiEwfX19LDE0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDI0KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe2lmKG4oZSksdm9pZCAwPT09dClyZXR1cm4gZTtzd2l0Y2gocil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gZS5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixuKXtyZXR1cm4gZS5jYWxsKHQscixuKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLG4sbyl7cmV0dXJuIGUuY2FsbCh0LHIsbixvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodCxhcmd1bWVudHMpfX19LDE2OmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue2VudW1lcmFibGU6ISgxJmUpLGNvbmZpZ3VyYWJsZTohKDImZSksd3JpdGFibGU6ISg0JmUpLHZhbHVlOnR9fX0sMTk5OmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuV2F0Y2hpbmdZb3U9dm9pZCAwO3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0ocigyMDApKTt0LldhdGNoaW5nWW91PW4uZGVmYXVsdH0sMjAwOmZ1bmN0aW9uKHQscixuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaShlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPWkobigzKSkscz1pKG4oNSkpO24oMTIzKTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXsoMCxvLmRlZmF1bHQpKHRoaXMsZSksdGhpcy5fd2F0Y2hpbmc9e30sdGhpcy5fb2JzZXJ2ZXJzPVtdfXJldHVybigwLHMuZGVmYXVsdCkoZSxbe2tleToid2F0Y2giLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07cmV0dXJuIHRoaXMuX3dhdGNoaW5nW2VdPW4/T2JqZWN0LmRlZXBPYnNlcnZlKHQsZnVuY3Rpb24odCl7dC5ldmVyeShmdW5jdGlvbih0KXtyLl9maXJlRXZlbnQoZSx0KX0pfSk6T2JqZWN0Lm9ic2VydmUodCxmdW5jdGlvbih0KXt0LmV2ZXJ5KGZ1bmN0aW9uKHQpe3IuX2ZpcmVFdmVudChlLHQpfSl9KSx0aGlzLl93YXRjaGluZ1tlXX19LHtrZXk6Im9ic2VydmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fb2JzZXJ2ZXJzLnB1c2goe2tleTplLGNhbGxiYWNrOnR9KX19LHtrZXk6Il9maXJlRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fb2JzZXJ2ZXJzLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXk9PT1lfSkuZm9yRWFjaChmdW5jdGlvbihlKXtlLmNhbGxiYWNrKHQpfSl9fV0pLGV9KCk7ci5kZWZhdWx0PWEsdC5leHBvcnRzPXIuZGVmYXVsdH0sMjQ6ZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKGUrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gZX19LDI3OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2lmKCFuKGUpKXJldHVybiBlO3ZhciByLG87aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mKHI9ZS50b1N0cmluZykmJiFuKG89ci5jYWxsKGUpKSlyZXR1cm4gbztpZigiZnVuY3Rpb24iPT10eXBlb2Yocj1lLnZhbHVlT2YpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87aWYoIXQmJiJmdW5jdGlvbiI9PXR5cGVvZihyPWUudG9TdHJpbmcpJiYhbihvPXIuY2FsbChlKSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LDI4OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpLG89cigxKS5kb2N1bWVudCxpPW4obykmJm4oby5jcmVhdGVFbGVtZW50KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGk/by5jcmVhdGVFbGVtZW50KGUpOnt9fX0sMzpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuX19lc01vZHVsZT0hMCx0LmRlZmF1bHQ9ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX19LDM5OmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoNCkmJiFyKDEzKShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkocigyOCkoImRpdiIpLCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSw0OmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9IXIoMTMpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sNTpmdW5jdGlvbih0LHIsbil7InVzZSBzdHJpY3QiO3IuX19lc01vZHVsZT0hMDt2YXIgbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4oNTkpKTtyLmRlZmF1bHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBuPXRbcl07bi5lbnVtZXJhYmxlPW4uZW51bWVyYWJsZXx8ITEsbi5jb25maWd1cmFibGU9ITAsInZhbHVlImluIG4mJihuLndyaXRhYmxlPSEwKSwoMCxvLmRlZmF1bHQpKGUsbi5rZXksbil9fXJldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIHImJmUodC5wcm90b3R5cGUsciksbiYmZSh0LG4pLHR9fSgpfSw1OTpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNjEpLF9fZXNNb2R1bGU6ITB9fSw2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEpLG89cigwKSxpPXIoMTQpLHM9cigxMSksYT1yKDEwKSx1PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYyxmLGwsZD1lJnUuRixwPWUmdS5HLHk9ZSZ1LlMsaD1lJnUuUCx2PWUmdS5CLGc9ZSZ1LlcsYj1wP286b1t0XXx8KG9bdF09e30pLF89Yi5wcm90b3R5cGUsbT1wP246eT9uW3RdOihuW3RdfHx7fSkucHJvdG90eXBlO2ZvcihjIGluIHAmJihyPXQpLHIpKGY9IWQmJm0mJnZvaWQgMCE9PW1bY10pJiZhKGIsYyl8fChsPWY/bVtjXTpyW2NdLGJbY109cCYmImZ1bmN0aW9uIiE9dHlwZW9mIG1bY10/cltjXTp2JiZmP2kobCxuKTpnJiZtW2NdPT1sP2Z1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQscixuKXtpZih0aGlzIGluc3RhbmNlb2YgZSl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IGU7Y2FzZSAxOnJldHVybiBuZXcgZSh0KTtjYXNlIDI6cmV0dXJuIG5ldyBlKHQscil9cmV0dXJuIG5ldyBlKHQscixuKX1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiB0LnByb3RvdHlwZT1lLnByb3RvdHlwZSx0fShsKTpoJiYiZnVuY3Rpb24iPT10eXBlb2YgbD9pKEZ1bmN0aW9uLmNhbGwsbCk6bCxoJiYoKGIudmlydHVhbHx8KGIudmlydHVhbD17fSkpW2NdPWwsZSZ1LlImJl8mJiFfW2NdJiZzKF8sYyxsKSkpfTt1LkY9MSx1Lkc9Mix1LlM9NCx1LlA9OCx1LkI9MTYsdS5XPTMyLHUuVT02NCx1LlI9MTI4LGUuZXhwb3J0cz11fSw2MTpmdW5jdGlvbihlLHQscil7cig2Mik7dmFyIG49cigwKS5PYmplY3Q7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbi5kZWZpbmVQcm9wZXJ0eShlLHQscil9fSw2MjpmdW5jdGlvbihlLHQscil7dmFyIG49cig2KTtuKG4uUytuLkYqIXIoNCksIk9iamVjdCIse2RlZmluZVByb3BlcnR5OnIoOCkuZn0pfSw3OmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZT9udWxsIT09ZToiZnVuY3Rpb24iPT10eXBlb2YgZX19LDg6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSksbz1yKDM5KSxpPXIoMjcpLHM9T2JqZWN0LmRlZmluZVByb3BlcnR5O3QuZj1yKDQpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aWYobihlKSx0PWkodCwhMCksbihyKSxvKXRyeXtyZXR1cm4gcyhlLHQscil9Y2F0Y2goZSl7fWlmKCJnZXQiaW4gcnx8InNldCJpbiByKXRocm93IFR5cGVFcnJvcigiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhIik7cmV0dXJuInZhbHVlImluIHImJihlW3RdPXIudmFsdWUpLGV9fSw5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDcpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZighbihlKSl0aHJvdyBUeXBlRXJyb3IoZSsiIGlzIG5vdCBhbiBvYmplY3QhIik7cmV0dXJuIGV9fX0pfSl9LC8qIDIwNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDQ3Mykscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig4KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDk3KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDEpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoMikseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig3KSx2PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oaCksZz1yKDE0KSxiPXIoMjA0KSxfPXYuZ2V0TG9nZ2VyKCJJZGVudGl0eU1vZHVsZSIpLG09ZnVuY3Rpb24oKXtmdW5jdGlvbiBJZGVudGl0aWVzKGUsdCl7KDAsZC5kZWZhdWx0KSh0aGlzLElkZW50aXRpZXMpO3ZhciByPXRoaXM7ci5fd2F0Y2hpbmdZb3U9bmV3IGIuV2F0Y2hpbmdZb3Usci5fc3RvcmFnZU1hbmFnZXI9dCxyLl9ndWlkLHIuX3R5cGU9ZSxyLl9pZGVudGl0aWVzPXt9LHIuX2FjY2Vzc1Rva2Vucz1yLndhdGNoaW5nWW91LndhdGNoKCJhY2Nlc3NUb2tlbnMiLHt9LCEwKX1yZXR1cm4oMCx5LmRlZmF1bHQpKElkZW50aXRpZXMsW3trZXk6InJlc2V0Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lkZW50aXRpZXM9e30sdGhpcy5jdXJyZW50SWRlbnRpdHk9dm9pZCAwLHRoaXMuZGVmYXVsdElkZW50aXR5PXZvaWQgMH19LHtrZXk6ImdldElkZW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4oMCxmLmRlZmF1bHQpKHt9LHRoaXMuX2lkZW50aXRpZXNbZV0pfX0se2tleToibG9hZElkZW50aXRpZXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbih0KXtlLl9zdG9yYWdlTWFuYWdlci5nZXQobnVsbCxudWxsLCJpZGVudGl0aWVzIikudGhlbihmdW5jdGlvbihyKXtfLmluZm8oIltJZGVudGl0aWVzLkxvYWQgSWRlbnRpdGllc10gaWRlbnRpdGllczogIixyKSxyJiYoZS5faWRlbnRpdGllcz1yLAovLyBsZXQncyBzZXQgYXMgZGVmYXVsdCBpZGVudGl0eSB0aGUgb25lIHRoYXQgZXhwaXJlcyBsYXRlcgplLmlkZW50aWZpZXJzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIHI9KDAsZy5zZWNvbmRzU2luY2VFcG9jaCkoKSxuPWUuX2lkZW50aXRpZXNbdF0sbz1uLmV4cGlyZXM7Ci8vICAgICAgICAgICAgaWYgKCFpZGVudGl0eS5oYXNPd25Qcm9wZXJ0eSgnaW50ZXJ3b3JraW5nJykKLy8gICAgICAgICAgICB8fCAhaWRlbnRpdHkuaW50ZXJ3b3JraW5nKSB7CmUuZGVmYXVsdElkZW50aXR5PXQscGFyc2VJbnQobyk+ciYmKGUuZGVmYXVsdElkZW50aXR5LmV4cGlyZXM9cGFyc2VJbnQobyksZS5jdXJyZW50SWRlbnRpdHk9dCl9KSksdCgpfSl9KX19LHtrZXk6ImxvYWRBY2Nlc3NUb2tlbnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbih0KXtlLl9zdG9yYWdlTWFuYWdlci5nZXQoImFjY2Vzc1Rva2VucyIpLnRoZW4oZnVuY3Rpb24ocil7ciYmKGUuX2FjY2Vzc1Rva2Vucz1yKSx0KCl9KX0pfX0se2tleToiYWRkSWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7aWYoci5faXNWYWxpZChlKSl7dmFyIGk9ZS5pZGVudGlmaWVyc1swXTsoMCxmLmRlZmF1bHQpKHQuX2lkZW50aXRpZXNbaV0sZSksdC5fc3RvcmVJZGVudGl0eShlKS50aGVuKGZ1bmN0aW9uKCl7dC5faWRlbnRpdGllc1tpXS5zdGF0dXM9ImNyZWF0ZWQiLG4oKX0pfWVsc2UgbygiW0lkZW50aXRpZXMuYWRkSWRlbnRpdHldIGludmFsaWQgSWRBc3NlcnRpb24iKX0pfX0se2tleToiYWRkQXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihuLG8pe2lmKHIuX2lzVmFsaWQoZSkpe2UudXNlclByb2ZpbGUuZ3VpZD1yLl9ndWlkO3ZhciBpPWUudXNlclByb2ZpbGUudXNlclVSTDtyLmlkZW50aXRpZXNbaV0/ci5pZGVudGl0aWVzW2ldPWU6ci5faWRlbnRpdGllc1tpXT1lLHIuX3N0b3JlKCkudGhlbihmdW5jdGlvbigpe3QuX2lkZW50aXRpZXNbaV0uc3RhdHVzPSJjcmVhdGVkIiwwPT1yLmRlZmF1bHRJZGVudGl0eSYmKHIuZGVmYXVsdElkZW50aXR5PWkpLG4oZSl9KX1lbHNlIG8oIltJZGVudGl0aWVzLmFkZEFzc2VydGlvbl0gaW52YWxpZCBJZEFzc2VydGlvbjogIixlKX0pfX0se2tleToicmVtb3ZlSWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXtkZWxldGUgdC5pZGVudGl0aWVzW2VdLHQuX3N0b3JlKCkudGhlbihmdW5jdGlvbigpe3IoKX0pfSl9fSx7a2V5OiJhZGRBY2Nlc3NUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gXy5pbmZvKCJbSWRlbnRpdGllcy5hZGRBY2Nlc3NUb2tlbl0gIixlKSxuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5faXNWYWxpZEFjY2Vzc1Rva2VuKGUpPygKLy8gICAgICAgIGxldCBuZXdBY2Nlc3NUb2tlbiA9IGRlZXBDbG9uZShhY2Nlc3NUb2tlbik7CnQuX2FjY2Vzc1Rva2Vuc1tlLmRvbWFpbl09ZSx0Ll9zdG9yZUFjY2Vzc1Rva2VucygpLnRoZW4oZnVuY3Rpb24oKXt0Ll9hY2Nlc3NUb2tlbnNbZS5kb21haW5dLnN0YXR1cz0iY3JlYXRlZCIscihlKX0pKTpuKCJbSWRlbnRpdGllcy5hZGRJZGVudGl0eV0gaW52YWxpZCBBY2Nlc3NUb2tlbjogIixlKX0pfX0se2tleToic2V0QWNjZXNzVG9rZW5JblByb2dyZXNzIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9hY2Nlc3NUb2tlbnNbZV0/dGhpcy5fYWNjZXNzVG9rZW5zW2VdLnN0YXR1cz0iaW4tcHJvZ3Jlc3MiOnRoaXMuX2FjY2Vzc1Rva2Vuc1tlXT17c3RhdHVzOiJpbi1wcm9ncmVzcyJ9fX0se2tleToiZ2V0QWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fYWNjZXNzVG9rZW5zW2VdO3JldHVybiByP3QuZXZlcnkoZnVuY3Rpb24oZSl7cmV0dXJuLTEhPXIucmVzb3VyY2VzLmluZGV4T2YoZSl9KT90aGlzLl9hY2Nlc3NUb2tlbnNbZV06bmV3IEVycm9yKCJbSWRlbnRpdGllcy5nZXRBY2Nlc3NUb2tlbl0gTm90IGZvdW5kIGZvciAiLGUpOnZvaWQgMH19LHtrZXk6InVwZGF0ZUFzc2VydGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyKXt2YXIgbj1lLnVzZXJQcm9maWxlLnVzZXJVcmw7aWYoIXQuaWRlbnRpdGllc1tuXSlyZXR1cm4gcmVqZWN0KCJbSWRlbnRpdGllcy51cGRhdGVBc3NlcnRpb25dIElkZW50aXR5IG5vdCBmb3VuZCBmb3IgIixuKTt0LmlkZW50aXRpZXNbbl09ZSx0Ll9zdG9yZSgpLnRoZW4oZnVuY3Rpb24oKXtyKCl9KX0pfX0se2tleToidXBkYXRlQWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIF8uaW5mbygiW0lkZW50aXRpZXMudXBkYXRlQWNjZXNzVG9rZW5dICIsZSksbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2lzVmFsaWRBY2Nlc3NUb2tlbihlKT8odC5fYWNjZXNzVG9rZW5zW2UuZG9tYWluXS5leHBpcmVzPWUuZXhwaXJlcyx0Ll9hY2Nlc3NUb2tlbnNbZS5kb21haW5dLmFjY2Vzc1Rva2VuPWUuYWNjZXNzVG9rZW4sdC5fc3RvcmVBY2Nlc3NUb2tlbnMoKS50aGVuKGZ1bmN0aW9uKCl7dC5fYWNjZXNzVG9rZW5zW2UuZG9tYWluXS5zdGF0dXM9ImNyZWF0ZWQiLHIoZSl9KSk6bigiW0lkZW50aXRpZXMudXBkYXRlQWNjZXNzVG9rZW5dIGludmFsaWQgQWNjZXNzVG9rZW46ICIsZSl9KX19LHtrZXk6ImFkZElkQXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzLGk9bmV3IFIodCxyLG4pO28uaWRBc3NlcnRpb25MaXN0LnB1c2goaSl9fSx7a2V5OiJfaXNWYWxpZCIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbiIpKXJldHVybiExO3ZhciB0PWUuYXNzZXJ0aW9uLnNwbGl0KCIuIik7Ci8vdmVyaWZ5IGlmIHRoZSB0b2tlbiBjb250YWlucyB0aGUgMyBjb21wb25lbnRzLCBvciBqdXN0IHRoZSBhc3NlcnRpb24KdHJ5e3RbMV0/KDAsZy5kZWNvZGUpKHRbMV0pOigwLGcuZGVjb2RlKShlLmFzc2VydGlvbil9Y2F0Y2goZSl7cmV0dXJuITF9cmV0dXJuITB9fSx7a2V5OiJfaXNWYWxpZEFjY2Vzc1Rva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4hIWUuaGFzT3duUHJvcGVydHkoImFjY2Vzc1Rva2VuIikmJighIWUuaGFzT3duUHJvcGVydHkoImRvbWFpbiIpJiYoISghZS5oYXNPd25Qcm9wZXJ0eSgicmVzb3VyY2VzIil8fCFBcnJheS5pc0FycmF5KGUucmVzb3VyY2VzKSkmJighKCFlLmhhc093blByb3BlcnR5KCJleHBpcmVzIil8fCEoMCxzLmRlZmF1bHQpKGUuZXhwaXJlcykpJiYhIWUuaGFzT3duUHJvcGVydHkoImlucHV0IikpKSl9fSx7a2V5OiJfc3RvcmUiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgaT0oMCxvLmRlZmF1bHQpKGUuX2lkZW50aXRpZXMpLm1hcChmdW5jdGlvbihyKXtyZXR1cm4gdC5fc3RvcmFnZU1hbmFnZXIuc2V0KHIsMCxlLl9pZGVudGl0aWVzW3JdLCJpZGVudGl0aWVzIil9KTt1LmRlZmF1bHQuYWxsKGkpLnRoZW4oZnVuY3Rpb24oKXtyKCl9KS5jYXRjaChmdW5jdGlvbihlKXtuKCJPbiBfc2VuZFJlcG9ydGVyU2Vzc2lvbktleSBmcm9tIG1ldGhvZCBzdG9yZUlkZW50aXR5IGVycm9yOiAiK2UpfSl9KX19LHtrZXk6Il9zdG9yZUFjY2Vzc1Rva2VucyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHQscil7dmFyIG49KDAsZy5kZWVwQ2xvbmUpKGUuX2FjY2Vzc1Rva2Vucyk7ZS5fc3RvcmFnZU1hbmFnZXIuc2V0KCJhY2Nlc3NUb2tlbnMiLDAsbikudGhlbihmdW5jdGlvbigpe3QoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoIk9uIF9zZW5kUmVwb3J0ZXJTZXNzaW9uS2V5IGZyb20gbWV0aG9kIHN0b3JlSWRlbnRpdHkgZXJyb3I6ICIrZSl9KX0pfX0se2tleToiaWRlbnRpdGllcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkZW50aXRpZXN9fSx7a2V5OiJhY2Nlc3NUb2tlbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY2Nlc3NUb2tlbnN9fSx7a2V5OiJ3YXRjaGluZ1lvdSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dhdGNoaW5nWW91fX0se2tleToiZ3VpZCIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2d1aWQ9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2d1aWR9fSx7a2V5OiJkZWZhdWx0SWRlbnRpdHkiLHNldDpmdW5jdGlvbihlKXtpZighdGhpcy5pZGVudGl0aWVzW2VdKXRocm93IG5ldyBFcnJvcigiW0lkZW50aXRpZXMuc2V0IGRlZmF1bHRJZGVudGl0eSBdIEVycm9yOiBpZGVudGl0eSBkb2VzIG5vdCBleGlzdCBoZXJlOiAiLGUpO3RoaXMuX2RlZmF1bHRJZGVudGl0eT1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2RlZmF1bHRJZGVudGl0eSYmKDAsZi5kZWZhdWx0KSh7fSx0aGlzLmlkZW50aXRpZXNbdGhpcy5fZGVmYXVsdElkZW50aXR5XSl9fSx7a2V5OiJjdXJyZW50SWRlbnRpdHkiLHNldDpmdW5jdGlvbihlKXtpZighdGhpcy5pZGVudGl0aWVzW2VdKXRocm93IGU7dGhpcy5fY3VycmVudElkZW50aXR5PWV9LGdldDpmdW5jdGlvbigpe3JldHVybigwLGYuZGVmYXVsdCkoe30sdGhpcy5pZGVudGl0aWVzW3RoaXMuX2N1cnJlbnRJZGVudGl0eV0pfX0se2tleToiaWRlbnRpZmllcnMiLGdldDpmdW5jdGlvbigpe3JldHVybigwLG8uZGVmYXVsdCkodGhpcy5faWRlbnRpdGllcyl9fV0pLElkZW50aXRpZXN9KCksUj1mdW5jdGlvbigpe2Z1bmN0aW9uIElkQXNzZXJ0aW9uKGUsdCxyKXsoMCxkLmRlZmF1bHQpKHRoaXMsSWRBc3NlcnRpb24pO3ZhciBuPXRoaXM7bi5fYXNzZXJ0aW9uPWUsbi5faWRwPXQsbi5fdXNlclByb2ZpbGU9cn1yZXR1cm4oMCx5LmRlZmF1bHQpKElkQXNzZXJ0aW9uLFt7a2V5OiJhc3NlcnRpb24iLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hc3NlcnRpb259fSx7a2V5OiJpZHAiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZHB9fSx7a2V5OiJ1c2VyUHJvZmlsZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJQcm9maWxlfX1dKSxJZEFzc2VydGlvbn0oKTshZnVuY3Rpb24oKXtmdW5jdGlvbiBJZFZhbGlkYXRpb24oZSx0KXsoMCxkLmRlZmF1bHQpKHRoaXMsSWRWYWxpZGF0aW9uKTt2YXIgcj10aGlzO3IuaWRlbnRpdHk9ZSxyLmNvbnRlbnRzPXR9KDAseS5kZWZhdWx0KShJZFZhbGlkYXRpb24sW3trZXk6InZhbGlkYXRlcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt9fV0pfSgpO3QuZGVmYXVsdD1tLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBBbGxvd092ZXJyaWRlcygpeygwLG8uZGVmYXVsdCkodGhpcyxBbGxvd092ZXJyaWRlcyl9cmV0dXJuKDAscy5kZWZhdWx0KShBbGxvd092ZXJyaWRlcyxbe2tleToiY29tYmluZSIsLyoqCiAgICAqIEdpdmVuIGFuIGFycmF5IG9mIGluZGl2aWR1YWwgYXV0aG9yaXphdGlvbiBkZWNpc2lvbnMsIHByaW9yaXRpemVzIGEgcG9zaXRpdmUgb25lLgogICAgKiBAcGFyYW0gICAge2Jvb2xlYW5bXX0gICBkZWNpc2lvbnMKICAgICogQHJldHVybnMgIHtib29sZWFufQogICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1lLmluZGV4T2YoITApfHwtMT09PWUuaW5kZXhPZighMSkmJiJOb3QgQXBwbGljYWJsZSJ9fV0pLEFsbG93T3ZlcnJpZGVzfSgpO3QuZGVmYXVsdD1hLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBCbG9ja092ZXJyaWRlcygpeygwLG8uZGVmYXVsdCkodGhpcyxCbG9ja092ZXJyaWRlcyl9cmV0dXJuKDAscy5kZWZhdWx0KShCbG9ja092ZXJyaWRlcyxbe2tleToiY29tYmluZSIsLyoqCiAgICAqIEdpdmVuIGFuIGFycmF5IG9mIGluZGl2aWR1YWwgYXV0aG9yaXNhdGlvbiBkZWNpc2lvbnMsIHByaW9yaXRpc2VzIGEgbmVnYXRpdmUgb25lLgogICAgKiBAcGFyYW0gICAge2Jvb2xlYW5bXX0gICBkZWNpc2lvbnMKICAgICogQHJldHVybnMgIHtib29sZWFufQogICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1lLmluZGV4T2YoITEpJiYoLTEhPT1lLmluZGV4T2YoITApfHwiTm90IEFwcGxpY2FibGUiKX19XSksQmxvY2tPdmVycmlkZXN9KCk7dC5kZWZhdWx0PWEsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogMjA4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIEZpcnN0QXBwbGljYWJsZSgpeygwLG8uZGVmYXVsdCkodGhpcyxGaXJzdEFwcGxpY2FibGUpfXJldHVybigwLHMuZGVmYXVsdCkoRmlyc3RBcHBsaWNhYmxlLFt7a2V5OiJjb21iaW5lIiwvKioKICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBhdXRob3Jpc2F0aW9uIGRlY2lzaW9ucywgcmV0dXJucyB0aGUgZmlyc3Qgb25lIGRpZmZlcmVudCBmcm9tICdOb3QgQXBwbGljYWJsZScsIGVpdGhlciBwb3NpdGl2ZSBvciBuZWdhdGl2ZS4KICAgICogQHBhcmFtICAgIHtib29sZWFuW119ICAgICBkZWNpc2lvbnMKICAgICogQHJldHVybnMgIHtib29sZWFufQogICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpaWYoIk5vdCBBcHBsaWNhYmxlIiE9PWVbdF0pcmV0dXJuIGVbdF07cmV0dXJuIk5vdCBBcHBsaWNhYmxlIn19XSksRmlyc3RBcHBsaWNhYmxlfSgpO3QuZGVmYXVsdD1hLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDIwOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNTAyKSxfX2VzTW9kdWxlOiEwfX0sLyogMjEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig1MDkpLF9fZXNNb2R1bGU6ITB9fSwvKiAyMTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoNyksdT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGEpLGM9dS5nZXRMb2dnZXIoIlN5blN1YnNjcmlwdGlvbiIpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBTdWJzY3JpcHRpb24oZSx0LHIsbixpKXsoMCxvLmRlZmF1bHQpKHRoaXMsU3Vic2NyaXB0aW9uKTt2YXIgcz10aGlzLGE9cisiL2NoaWxkcmVuLyIsdT1yKyIvY2hhbmdlcyI7Ci8vcHJvY2VzcyBkZWxldGUgbWVzc2FnZQpzLl9kZWxldGVMaXN0ZW5lcj1lLmFkZExpc3RlbmVyKHUsZnVuY3Rpb24obil7aWYoImRlbGV0ZSI9PT1uLnR5cGUpe2MubG9nKCJTdWJzY3JpcHRpb24tREVMRVRFOiAiLG4pOwovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gYWxsIHN1YnNjcmliZXJzCnZhciBvPXt0eXBlOiJkZWxldGUiLGZyb206bi5mcm9tLHRvOnQsYm9keTp7aWRlbnRpdHk6bi5ib2R5LmlkZW50aXR5LHJlc291cmNlOnJ9fTsKLy9zZW5kIGRlbGV0ZSB0byBoeXBlcnR5CmUucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihlKXtjLmxvZygiU3Vic2NyaXB0aW9uLURFTEVURS1SRVBMWTogIixlKSwyMDA9PT1lLmJvZHkuY29kZSYmcy5fcmVsZWFzZUxpc3RlbmVycygpfSl9fSksCi8vYWRkIGNoYW5nZSBwdWJsaXNoIGFkZHJlc3Mgb3IgZm9yd2FyZApzLl9jaGFuZ2VMaXN0ZW5lcj1pP2UuYWRkUHVibGlzaCh1KTplLmFkZEZvcndhcmQodSx0KSxzLl9jaGlsZHJlbkxpc3RlbmVycz1bXSxjLmxvZygiW1N1YnNjcmlwdGlvbl0gLSBjaGlsZElEIixuKSxuLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49YStyO2MubG9nKCJbU3Vic2NyaXB0aW9uXSAtIGNoaWxkSUQiLGEsbixyKTsKLy9hZGQgY2hpbGRyZW4gcHVibGlzaCBhZGRyZXNzCnZhciBvPWUuYWRkUHVibGlzaChuKTsKLy9hZGQgc2VsZiBmb3J3YXJkIGlmIGFuIG9ic2VydmVyCmlmKHMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobyksIWkpe3ZhciB1PWUuYWRkRm9yd2FyZChuLHQpO3MuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2godSl9fSl9cmV0dXJuKDAscy5kZWZhdWx0KShTdWJzY3JpcHRpb24sW3trZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fZGVsZXRlTGlzdGVuZXIucmVtb3ZlKCksZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCksZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSl9fV0pLFN1YnNjcmlwdGlvbn0oKTt0LmRlZmF1bHQ9ZixlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiAyMTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMjEzKSxlLmV4cG9ydHM9cig0MTUpfSwvKiAyMTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8KKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGRlZmluZShlLHIsbil7ZVtyXXx8T2JqZWN0W3RdKGUscix7d3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwLHZhbHVlOm59KX1pZihyKDIxNCkscig0MTEpLHIoNDEyKSxlLl9iYWJlbFBvbHlmaWxsKXRocm93IG5ldyBFcnJvcigib25seSBvbmUgaW5zdGFuY2Ugb2YgYmFiZWwtcG9seWZpbGwgaXMgYWxsb3dlZCIpO2UuX2JhYmVsUG9seWZpbGw9ITA7dmFyIHQ9ImRlZmluZVByb3BlcnR5IjtkZWZpbmUoU3RyaW5nLnByb3RvdHlwZSwicGFkTGVmdCIsIiIucGFkU3RhcnQpLGRlZmluZShTdHJpbmcucHJvdG90eXBlLCJwYWRSaWdodCIsIiIucGFkRW5kKSwicG9wLHJldmVyc2Usc2hpZnQsa2V5cyx2YWx1ZXMsZW50cmllcyxpbmRleE9mLGV2ZXJ5LHNvbWUsZm9yRWFjaCxtYXAsZmlsdGVyLGZpbmQsZmluZEluZGV4LGluY2x1ZGVzLGpvaW4sc2xpY2UsY29uY2F0LHB1c2gsc3BsaWNlLHVuc2hpZnQsc29ydCxsYXN0SW5kZXhPZixyZWR1Y2UscmVkdWNlUmlnaHQsY29weVdpdGhpbixmaWxsIi5zcGxpdCgiLCIpLmZvckVhY2goZnVuY3Rpb24oZSl7W11bZV0mJmRlZmluZShBcnJheSxlLEZ1bmN0aW9uLmNhbGwuYmluZChbXVtlXSkpfSl9KS5jYWxsKHQscigxNDcpKX0sLyogMjE0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDIxNSkscigyMTcpLHIoMjE4KSxyKDIxOSkscigyMjApLHIoMjIxKSxyKDIyMikscigyMjMpLHIoMjI0KSxyKDIyNSkscigyMjYpLHIoMjI3KSxyKDIyOCkscigyMjkpLHIoMjMwKSxyKDIzMSkscigyMzMpLHIoMjM0KSxyKDIzNSkscigyMzYpLHIoMjM3KSxyKDIzOCkscigyMzkpLHIoMjQwKSxyKDI0MSkscigyNDIpLHIoMjQzKSxyKDI0NCkscigyNDUpLHIoMjQ2KSxyKDI0NykscigyNDgpLHIoMjQ5KSxyKDI1MCkscigyNTEpLHIoMjUyKSxyKDI1MykscigyNTQpLHIoMjU1KSxyKDI1NikscigyNTcpLHIoMjU4KSxyKDI1OSkscigyNjApLHIoMjYxKSxyKDI2MikscigyNjMpLHIoMjY0KSxyKDI2NSkscigyNjYpLHIoMjY3KSxyKDI2OCkscigyNjkpLHIoMjcwKSxyKDI3MSkscigyNzIpLHIoMjczKSxyKDI3NCkscigyNzUpLHIoMjc2KSxyKDI3NykscigyNzgpLHIoMjc5KSxyKDI4MCkscigyODEpLHIoMjgyKSxyKDI4MykscigyODQpLHIoMjg1KSxyKDI4NikscigyODcpLHIoMjg4KSxyKDI4OSkscigyOTApLHIoMjkxKSxyKDI5MikscigyOTMpLHIoMjk1KSxyKDI5NikscigyOTgpLHIoMjk5KSxyKDMwMCkscigzMDEpLHIoMzAyKSxyKDMwMykscigzMDQpLHIoMzA2KSxyKDMwNykscigzMDgpLHIoMzA5KSxyKDMxMCkscigzMTEpLHIoMzEyKSxyKDMxMykscigzMTQpLHIoMzE1KSxyKDMxNikscigzMTcpLHIoMzE4KSxyKDEyMykscigzMTkpLHIoMzIwKSxyKDE2NikscigzMjEpLHIoMzIyKSxyKDMyMykscigzMjQpLHIoMzI1KSxyKDE2OSkscigxNzEpLHIoMTcyKSxyKDMyNikscigzMjcpLHIoMzI4KSxyKDMyOSkscigzMzApLHIoMzMxKSxyKDMzMikscigzMzMpLHIoMzM0KSxyKDMzNSkscigzMzYpLHIoMzM3KSxyKDMzOCkscigzMzkpLHIoMzQwKSxyKDM0MSkscigzNDIpLHIoMzQzKSxyKDM0NCkscigzNDUpLHIoMzQ2KSxyKDM0NykscigzNDgpLHIoMzQ5KSxyKDM1MCkscigzNTEpLHIoMzUyKSxyKDM1MykscigzNTQpLHIoMzU1KSxyKDM1NikscigzNTcpLHIoMzU4KSxyKDM1OSkscigzNjApLHIoMzYxKSxyKDM2MikscigzNjMpLHIoMzY0KSxyKDM2NSkscigzNjYpLHIoMzY3KSxyKDM2OCkscigzNjkpLHIoMzcwKSxyKDM3MSkscigzNzIpLHIoMzczKSxyKDM3NCkscigzNzUpLHIoMzc2KSxyKDM3NykscigzNzgpLHIoMzc5KSxyKDM4MCkscigzODEpLHIoMzgyKSxyKDM4MykscigzODQpLHIoMzg1KSxyKDM4NikscigzODcpLHIoMzg4KSxyKDM4OSkscigzOTApLHIoMzkxKSxyKDM5MikscigzOTMpLHIoMzk0KSxyKDM5NSkscigzOTYpLHIoMzk3KSxyKDM5OCkscigzOTkpLHIoNDAwKSxyKDQwMSkscig0MDIpLHIoNDAzKSxyKDQwNCkscig0MDUpLHIoNDA2KSxyKDQwNykscig0MDgpLHIoNDA5KSxyKDQxMCksZS5leHBvcnRzPXIoMjcpfSwvKiAyMTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbQp2YXIgbj1yKDQpLG89cigyMyksaT1yKDEwKSxzPXIoMCksYT1yKDE5KSx1PXIoNDIpLktFWSxjPXIoNSksZj1yKDc5KSxsPXIoNjApLGQ9cig0OCkscD1yKDkpLHk9cigxNDkpLGg9cigxMDMpLHY9cigyMTYpLGc9cig4MiksYj1yKDMpLF89cig2KSxtPXIoMjQpLFI9cigzMiksdz1yKDQ3KSxTPXIoNTEpLGs9cigxNTIpLE89cigyNSksUD1yKDExKSxNPXIoNDkpLEw9Ty5mLHg9UC5mLEE9ay5mLEQ9bi5TeW1ib2wsVT1uLkpTT04saj1VJiZVLnN0cmluZ2lmeSxFPXAoIl9oaWRkZW4iKSxJPXAoInRvUHJpbWl0aXZlIiksQz17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxUPWYoInN5bWJvbC1yZWdpc3RyeSIpLHE9Zigic3ltYm9scyIpLEg9Zigib3Atc3ltYm9scyIpLEY9T2JqZWN0LnByb3RvdHlwZSxOPSJmdW5jdGlvbiI9PXR5cGVvZiBELEI9bi5RT2JqZWN0LEc9IUJ8fCFCLnByb3RvdHlwZXx8IUIucHJvdG90eXBlLmZpbmRDaGlsZCxLPWkmJmMoZnVuY3Rpb24oKXtyZXR1cm4gNyE9Uyh4KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHgodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPUwoRix0KTtuJiZkZWxldGUgRlt0XSx4KGUsdCxyKSxuJiZlIT09RiYmeChGLHQsbil9OngsVj1mdW5jdGlvbihlKXt2YXIgdD1xW2VdPVMoRC5wcm90b3R5cGUpO3JldHVybiB0Ll9rPWUsdH0sVz1OJiYic3ltYm9sIj09dHlwZW9mIEQuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuInN5bWJvbCI9PXR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIER9LFk9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlPT09RiYmWShILHQsciksYihlKSx0PVIodCwhMCksYihyKSxvKHEsdCk/KHIuZW51bWVyYWJsZT8obyhlLEUpJiZlW0VdW3RdJiYoZVtFXVt0XT0hMSkscj1TKHIse2VudW1lcmFibGU6dygwLCExKX0pKToobyhlLEUpfHx4KGUsRSx3KDEse30pKSxlW0VdW3RdPSEwKSxLKGUsdCxyKSk6eChlLHQscil9LHo9ZnVuY3Rpb24oZSx0KXtiKGUpO2Zvcih2YXIgcixuPXYodD1tKHQpKSxvPTAsaT1uLmxlbmd0aDtpPm87KVkoZSxyPW5bbysrXSx0W3JdKTtyZXR1cm4gZX0sSj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10P1MoZSk6eihTKGUpLHQpfSxaPWZ1bmN0aW9uKGUpe3ZhciB0PUMuY2FsbCh0aGlzLGU9UihlLCEwKSk7cmV0dXJuISh0aGlzPT09RiYmbyhxLGUpJiYhbyhILGUpKSYmKCEodHx8IW8odGhpcyxlKXx8IW8ocSxlKXx8byh0aGlzLEUpJiZ0aGlzW0VdW2VdKXx8dCl9LFE9ZnVuY3Rpb24oZSx0KXtpZihlPW0oZSksdD1SKHQsITApLGUhPT1GfHwhbyhxLHQpfHxvKEgsdCkpe3ZhciByPUwoZSx0KTtyZXR1cm4hcnx8IW8ocSx0KXx8byhlLEUpJiZlW0VdW3RdfHwoci5lbnVtZXJhYmxlPSEwKSxyfX0sJD1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1BKG0oZSkpLG49W10saT0wO3IubGVuZ3RoPmk7KW8ocSx0PXJbaSsrXSl8fHQ9PUV8fHQ9PXV8fG4ucHVzaCh0KTtyZXR1cm4gbn0sWD1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1lPT09RixuPUEocj9IOm0oZSkpLGk9W10scz0wO24ubGVuZ3RoPnM7KSFvKHEsdD1uW3MrK10pfHxyJiYhbyhGLHQpfHxpLnB1c2gocVt0XSk7cmV0dXJuIGl9OwovLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKTnx8KEQ9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgRCl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEiKTt2YXIgZT1kKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSx0PWZ1bmN0aW9uKHIpe3RoaXM9PT1GJiZ0LmNhbGwoSCxyKSxvKHRoaXMsRSkmJm8odGhpc1tFXSxlKSYmKHRoaXNbRV1bZV09ITEpLEsodGhpcyxlLHcoMSxyKSl9O3JldHVybiBpJiZHJiZLKEYsZSx7Y29uZmlndXJhYmxlOiEwLHNldDp0fSksVihlKX0sYShELnByb3RvdHlwZSwidG9TdHJpbmciLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxPLmY9USxQLmY9WSxyKDUyKS5mPWsuZj0kLHIoNzEpLmY9WixyKDgxKS5mPVgsaSYmIXIoNDMpJiZhKEYsInByb3BlcnR5SXNFbnVtZXJhYmxlIixaLCEwKSx5LmY9ZnVuY3Rpb24oZSl7cmV0dXJuIFYocChlKSl9KSxzKHMuRytzLlcrcy5GKiFOLHtTeW1ib2w6RH0pO2Zvcih2YXIgZWU9Imhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLHRlPTA7ZWUubGVuZ3RoPnRlOylwKGVlW3RlKytdKTtmb3IodmFyIHJlPU0ocC5zdG9yZSksbmU9MDtyZS5sZW5ndGg+bmU7KWgocmVbbmUrK10pO3Mocy5TK3MuRiohTiwiU3ltYm9sIix7Ci8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KQpmb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oVCxlKz0iIik/VFtlXTpUW2VdPUQoZSl9LAovLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSkKa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFXKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgc3ltYm9sISIpO2Zvcih2YXIgdCBpbiBUKWlmKFRbdF09PT1lKXJldHVybiB0fSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtHPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtHPSExfX0pLHMocy5TK3MuRiohTiwiT2JqZWN0Iix7Ci8vIDE5LjEuMi4yIE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKY3JlYXRlOkosCi8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQpkZWZpbmVQcm9wZXJ0eTpZLAovLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQpkZWZpbmVQcm9wZXJ0aWVzOnosCi8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOlEsCi8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCmdldE93blByb3BlcnR5TmFtZXM6JCwKLy8gMTkuMS4yLjggT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhPKQpnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6WH0pLAovLyAyNC4zLjIgSlNPTi5zdHJpbmdpZnkodmFsdWUgWywgcmVwbGFjZXIgWywgc3BhY2VdXSkKVSYmcyhzLlMrcy5GKighTnx8YyhmdW5jdGlvbigpe3ZhciBlPUQoKTsKLy8gTVMgRWRnZSBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMge30KLy8gV2ViS2l0IGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyBudWxsCi8vIFY4IHRocm93cyBvbiBib3hlZCBzeW1ib2xzCnJldHVybiJbbnVsbF0iIT1qKFtlXSl8fCJ7fSIhPWooe2E6ZX0pfHwie30iIT1qKE9iamVjdChlKSl9KSksIkpTT04iLHtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIsbj1bZV0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspbi5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihyPXQ9blsxXSwoXyh0KXx8dm9pZCAwIT09ZSkmJiFXKGUpKS8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQKcmV0dXJuIGcodCl8fCh0PWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLCFXKHQpKXJldHVybiB0fSksblsxXT10LGouYXBwbHkoVSxuKX19KSwKLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KQpELnByb3RvdHlwZVtJXXx8cigxOCkoRC5wcm90b3R5cGUsSSxELnByb3RvdHlwZS52YWx1ZU9mKSwKLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQpsKEQsIlN5bWJvbCIpLAovLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddCmwoTWF0aCwiTWF0aCIsITApLAovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQpsKG4uSlNPTiwiSlNPTiIsITApfSwvKiAyMTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwp2YXIgbj1yKDQ5KSxvPXIoODEpLGk9cig3MSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PW4oZSkscj1vLmY7aWYocilmb3IodmFyIHMsYT1yKGUpLHU9aS5mLGM9MDthLmxlbmd0aD5jOyl1LmNhbGwoZSxzPWFbYysrXSkmJnQucHVzaChzKTtyZXR1cm4gdH19LC8qIDIxNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKTsKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCm4obi5TLCJPYmplY3QiLHtjcmVhdGU6cig1MSl9KX0sLyogMjE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApOwovLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQpuKG4uUytuLkYqIXIoMTApLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0eTpyKDExKS5mfSl9LC8qIDIxOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKTsKLy8gMTkuMS4yLjMgLyAxNS4yLjMuNyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQpuKG4uUytuLkYqIXIoMTApLCJPYmplY3QiLHtkZWZpbmVQcm9wZXJ0aWVzOnIoMTUxKX0pfSwvKiAyMjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciBuPXIoMjQpLG89cigyNSkuZjtyKDM1KSgiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBvKG4oZSksdCl9fSl9LC8qIDIyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi45IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDE1KSxvPXIoMjYpO3IoMzUpKCJnZXRQcm90b3R5cGVPZiIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG8obihlKSl9fSl9LC8qIDIyMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKQp2YXIgbj1yKDE1KSxvPXIoNDkpO3IoMzUpKCJrZXlzIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sLyogMjIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKcigzNSkoImdldE93blByb3BlcnR5TmFtZXMiLGZ1bmN0aW9uKCl7cmV0dXJuIHIoMTUyKS5mfSl9LC8qIDIyNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi41IE9iamVjdC5mcmVlemUoTykKdmFyIG49cig2KSxvPXIoNDIpLm9uRnJlZXplO3IoMzUpKCJmcmVlemUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKG8odCkpOnR9fSl9LC8qIDIyNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xNyBPYmplY3Quc2VhbChPKQp2YXIgbj1yKDYpLG89cig0Mikub25GcmVlemU7cigzNSkoInNlYWwiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSYmbih0KT9lKG8odCkpOnR9fSl9LC8qIDIyNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xNSBPYmplY3QucHJldmVudEV4dGVuc2lvbnMoTykKdmFyIG49cig2KSxvPXIoNDIpLm9uRnJlZXplO3IoMzUpKCJwcmV2ZW50RXh0ZW5zaW9ucyIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlJiZuKHQpP2Uobyh0KSk6dH19KX0sLyogMjI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjEyIE9iamVjdC5pc0Zyb3plbihPKQp2YXIgbj1yKDYpO3IoMzUpKCJpc0Zyb3plbiIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiFuKHQpfHwhIWUmJmUodCl9fSl9LC8qIDIyOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi4xMyBPYmplY3QuaXNTZWFsZWQoTykKdmFyIG49cig2KTtyKDM1KSgiaXNTZWFsZWQiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4hbih0KXx8ISFlJiZlKHQpfX0pfSwvKiAyMjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjIuMTEgT2JqZWN0LmlzRXh0ZW5zaWJsZShPKQp2YXIgbj1yKDYpO3IoMzUpKCJpc0V4dGVuc2libGUiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4hIW4odCkmJighZXx8ZSh0KSl9fSl9LC8qIDIzMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpCnZhciBuPXIoMCk7bihuLlMrbi5GLCJPYmplY3QiLHthc3NpZ246cigxNTMpfSl9LC8qIDIzMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMy4xMCBPYmplY3QuaXModmFsdWUxLCB2YWx1ZTIpCnZhciBuPXIoMCk7bihuLlMsIk9iamVjdCIse2lzOnIoMjMyKX0pfSwvKiAyMzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0KXsKLy8gNy4yLjkgU2FtZVZhbHVlKHgsIHkpCmUuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKGUsdCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKcmV0dXJuIGU9PT10PzAhPT1lfHwxL2U9PTEvdDplIT1lJiZ0IT10fX0sLyogMjMzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykKdmFyIG49cigwKTtuKG4uUywiT2JqZWN0Iix7c2V0UHJvdG90eXBlT2Y6cigxMDcpLnNldH0pfSwvKiAyMzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBuPXIoNzIpLG89e307b1tyKDkpKCJ0b1N0cmluZ1RhZyIpXT0ieiIsbysiIiE9IltvYmplY3Qgel0iJiZyKDE5KShPYmplY3QucHJvdG90eXBlLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCAiK24odGhpcykrIl0ifSwhMCl9LC8qIDIzNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjIuMy4yIC8gMTUuMy40LjUgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQodGhpc0FyZywgYXJncy4uLikKdmFyIG49cigwKTtuKG4uUCwiRnVuY3Rpb24iLHtiaW5kOnIoMTU0KX0pfSwvKiAyMzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMTEpLmYsbz1GdW5jdGlvbi5wcm90b3R5cGUsaT0vXlxzKmZ1bmN0aW9uIChbXiAoXSopLzsKLy8gMTkuMi40LjIgbmFtZQoibmFtZSJpbiBvfHxyKDEwKSYmbihvLCJuYW1lIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4oIiIrdGhpcykubWF0Y2goaSlbMV19Y2F0Y2goZSl7cmV0dXJuIiJ9fX0pfSwvKiAyMzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDYpLG89cigyNiksaT1yKDkpKCJoYXNJbnN0YW5jZSIpLHM9RnVuY3Rpb24ucHJvdG90eXBlOwovLyAxOS4yLjMuNiBGdW5jdGlvbi5wcm90b3R5cGVbQEBoYXNJbnN0YW5jZV0oVikKaSBpbiBzfHxyKDExKS5mKHMsaSx7dmFsdWU6ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHRoaXN8fCFuKGUpKXJldHVybiExO2lmKCFuKHRoaXMucHJvdG90eXBlKSlyZXR1cm4gZSBpbnN0YW5jZW9mIHRoaXM7Ci8vIGZvciBlbnZpcm9ubWVudCB3L28gbmF0aXZlIGBAQGhhc0luc3RhbmNlYCBsb2dpYyBlbm91Z2ggYGluc3RhbmNlb2ZgLCBidXQgYWRkIHRoaXM6CmZvcig7ZT1vKGUpOylpZih0aGlzLnByb3RvdHlwZT09PWUpcmV0dXJuITA7cmV0dXJuITF9fSl9LC8qIDIzOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxvPXIoMTU2KTsKLy8gMTguMi41IHBhcnNlSW50KHN0cmluZywgcmFkaXgpCm4obi5HK24uRioocGFyc2VJbnQhPW8pLHtwYXJzZUludDpvfSl9LC8qIDIzOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxvPXIoMTU3KTsKLy8gMTguMi40IHBhcnNlRmxvYXQoc3RyaW5nKQpuKG4uRytuLkYqKHBhcnNlRmxvYXQhPW8pLHtwYXJzZUZsb2F0Om99KX0sLyogMjQwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig0KSxvPXIoMjMpLGk9cigyOSkscz1yKDEwOSksYT1yKDMyKSx1PXIoNSksYz1yKDUyKS5mLGY9cigyNSkuZixsPXIoMTEpLmYsZD1yKDYxKS50cmltLHA9bi5OdW1iZXIseT1wLGg9cC5wcm90b3R5cGUsdj0iTnVtYmVyIj09aShyKDUxKShoKSksZz0idHJpbSJpbiBTdHJpbmcucHJvdG90eXBlLGI9ZnVuY3Rpb24oZSl7dmFyIHQ9YShlLCExKTtpZigic3RyaW5nIj09dHlwZW9mIHQmJnQubGVuZ3RoPjIpe3Q9Zz90LnRyaW0oKTpkKHQsMyk7dmFyIHIsbixvLGk9dC5jaGFyQ29kZUF0KDApO2lmKDQzPT09aXx8NDU9PT1pKXtpZig4OD09PShyPXQuY2hhckNvZGVBdCgyKSl8fDEyMD09PXIpcmV0dXJuIE5hTn1lbHNlIGlmKDQ4PT09aSl7c3dpdGNoKHQuY2hhckNvZGVBdCgxKSl7Y2FzZSA2NjpjYXNlIDk4Om49MixvPTQ5O2JyZWFrOy8vIGZhc3QgZXF1YWwgL14wYlswMV0rJC9pCmNhc2UgNzk6Y2FzZSAxMTE6bj04LG89NTU7YnJlYWs7Ly8gZmFzdCBlcXVhbCAvXjBvWzAtN10rJC9pCmRlZmF1bHQ6cmV0dXJuK3R9Zm9yKHZhciBzLHU9dC5zbGljZSgyKSxjPTAsZj11Lmxlbmd0aDtjPGY7YysrKQovLyBwYXJzZUludCBwYXJzZXMgYSBzdHJpbmcgdG8gYSBmaXJzdCB1bmF2YWlsYWJsZSBzeW1ib2wKLy8gYnV0IFRvTnVtYmVyIHNob3VsZCByZXR1cm4gTmFOIGlmIGEgc3RyaW5nIGNvbnRhaW5zIHVuYXZhaWxhYmxlIHN5bWJvbHMKaWYoKHM9dS5jaGFyQ29kZUF0KGMpKTw0OHx8cz5vKXJldHVybiBOYU47cmV0dXJuIHBhcnNlSW50KHUsbil9fXJldHVybit0fTtpZighcCgiIDBvMSIpfHwhcCgiMGIxIil8fHAoIisweDEiKSl7cD1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPDE/MDplLHI9dGhpcztyZXR1cm4gciBpbnN0YW5jZW9mIHAmJih2P3UoZnVuY3Rpb24oKXtoLnZhbHVlT2YuY2FsbChyKX0pOiJOdW1iZXIiIT1pKHIpKT9zKG5ldyB5KGIodCkpLHIscCk6Yih0KX07Zm9yKHZhciBfLG09cigxMCk/Yyh5KToiTUFYX1ZBTFVFLE1JTl9WQUxVRSxOYU4sTkVHQVRJVkVfSU5GSU5JVFksUE9TSVRJVkVfSU5GSU5JVFksRVBTSUxPTixpc0Zpbml0ZSxpc0ludGVnZXIsaXNOYU4saXNTYWZlSW50ZWdlcixNQVhfU0FGRV9JTlRFR0VSLE1JTl9TQUZFX0lOVEVHRVIscGFyc2VGbG9hdCxwYXJzZUludCxpc0ludGVnZXIiLnNwbGl0KCIsIiksUj0wO20ubGVuZ3RoPlI7UisrKW8oeSxfPW1bUl0pJiYhbyhwLF8pJiZsKHAsXyxmKHksXykpO3AucHJvdG90eXBlPWgsaC5jb25zdHJ1Y3Rvcj1wLHIoMTkpKG4sIk51bWJlciIscCl9fSwvKiAyNDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigzNCksaT1yKDE1OCkscz1yKDExMCksYT0xLi50b0ZpeGVkLHU9TWF0aC5mbG9vcixjPVswLDAsMCwwLDAsMF0sZj0iTnVtYmVyLnRvRml4ZWQ6IGluY29ycmVjdCBpbnZvY2F0aW9uISIsbD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0tMSxuPXQ7KytyPDY7KW4rPWUqY1tyXSxjW3JdPW4lMWU3LG49dShuLzFlNyl9LGQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTYscj0wOy0tdD49MDspcis9Y1t0XSxjW3RdPXUoci9lKSxyPXIlZSoxZTd9LHA9ZnVuY3Rpb24oKXtmb3IodmFyIGU9Nix0PSIiOy0tZT49MDspaWYoIiIhPT10fHwwPT09ZXx8MCE9PWNbZV0pe3ZhciByPVN0cmluZyhjW2VdKTt0PSIiPT09dD9yOnQrcy5jYWxsKCIwIiw3LXIubGVuZ3RoKStyfXJldHVybiB0fSx5PWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gMD09PXQ/cjp0JTI9PTE/eShlLHQtMSxyKmUpOnkoZSplLHQvMixyKX0saD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPWU7cj49NDA5NjspdCs9MTIsci89NDA5Njtmb3IoO3I+PTI7KXQrPTEsci89MjtyZXR1cm4gdH07bihuLlArbi5GKighIWEmJigiMC4wMDAiIT09OGUtNS50b0ZpeGVkKDMpfHwiMSIhPT0uOS50b0ZpeGVkKDApfHwiMS4yNSIhPT0xLjI1NS50b0ZpeGVkKDIpfHwiMTAwMDAwMDAwMDAwMDAwMDEyOCIhPT0oMHhkZTBiNmIzYTc2NDAwODApLnRvRml4ZWQoMCkpfHwhcig1KShmdW5jdGlvbigpewovLyBWOCB+IEFuZHJvaWQgNC4zLQphLmNhbGwoe30pfSkpLCJOdW1iZXIiLHt0b0ZpeGVkOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbixhLHU9aSh0aGlzLGYpLGM9byhlKSx2PSIiLGc9IjAiO2lmKGM8MHx8Yz4yMCl0aHJvdyBSYW5nZUVycm9yKGYpOwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCmlmKHUhPXUpcmV0dXJuIk5hTiI7aWYodTw9LTFlMjF8fHU+PTFlMjEpcmV0dXJuIFN0cmluZyh1KTtpZih1PDAmJih2PSItIix1PS11KSx1PjFlLTIxKWlmKHQ9aCh1KnkoMiw2OSwxKSktNjkscj10PDA/dSp5KDIsLXQsMSk6dS95KDIsdCwxKSxyKj00NTAzNTk5NjI3MzcwNDk2LCh0PTUyLXQpPjApe2ZvcihsKDAsciksbj1jO24+PTc7KWwoMWU3LDApLG4tPTc7Zm9yKGwoeSgxMCxuLDEpLDApLG49dC0xO24+PTIzOylkKDE8PDIzKSxuLT0yMztkKDE8PG4pLGwoMSwxKSxkKDIpLGc9cCgpfWVsc2UgbCgwLHIpLGwoMTw8LXQsMCksZz1wKCkrcy5jYWxsKCIwIixjKTtyZXR1cm4gYz4wPyhhPWcubGVuZ3RoLGc9disoYTw9Yz8iMC4iK3MuY2FsbCgiMCIsYy1hKStnOmcuc2xpY2UoMCxhLWMpKyIuIitnLnNsaWNlKGEtYykpKTpnPXYrZyxnfX0pfSwvKiAyNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cig1KSxpPXIoMTU4KSxzPTEuLnRvUHJlY2lzaW9uO24obi5QK24uRioobyhmdW5jdGlvbigpewovLyBJRTctCnJldHVybiIxIiE9PXMuY2FsbCgxLHZvaWQgMCl9KXx8IW8oZnVuY3Rpb24oKXsKLy8gVjggfiBBbmRyb2lkIDQuMy0Kcy5jYWxsKHt9KX0pKSwiTnVtYmVyIix7dG9QcmVjaXNpb246ZnVuY3Rpb24oZSl7dmFyIHQ9aSh0aGlzLCJOdW1iZXIjdG9QcmVjaXNpb246IGluY29ycmVjdCBpbnZvY2F0aW9uISIpO3JldHVybiB2b2lkIDA9PT1lP3MuY2FsbCh0KTpzLmNhbGwodCxlKX19KX0sLyogMjQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjEgTnVtYmVyLkVQU0lMT04KdmFyIG49cigwKTtuKG4uUywiTnVtYmVyIix7RVBTSUxPTjpNYXRoLnBvdygyLC01Mil9KX0sLyogMjQ0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjIgTnVtYmVyLmlzRmluaXRlKG51bWJlcikKdmFyIG49cigwKSxvPXIoNCkuaXNGaW5pdGU7bihuLlMsIk51bWJlciIse2lzRmluaXRlOmZ1bmN0aW9uKGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgZSYmbyhlKX19KX0sLyogMjQ1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjMgTnVtYmVyLmlzSW50ZWdlcihudW1iZXIpCnZhciBuPXIoMCk7bihuLlMsIk51bWJlciIse2lzSW50ZWdlcjpyKDE1OSl9KX0sLyogMjQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjQgTnVtYmVyLmlzTmFOKG51bWJlcikKdmFyIG49cigwKTtuKG4uUywiTnVtYmVyIix7aXNOYU46ZnVuY3Rpb24oZSl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKcmV0dXJuIGUhPWV9fSl9LC8qIDI0NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi41IE51bWJlci5pc1NhZmVJbnRlZ2VyKG51bWJlcikKdmFyIG49cigwKSxvPXIoMTU5KSxpPU1hdGguYWJzO24obi5TLCJOdW1iZXIiLHtpc1NhZmVJbnRlZ2VyOmZ1bmN0aW9uKGUpe3JldHVybiBvKGUpJiZpKGUpPD05MDA3MTk5MjU0NzQwOTkxfX0pfSwvKiAyNDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4xLjIuNiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUgp2YXIgbj1yKDApO24obi5TLCJOdW1iZXIiLHtNQVhfU0FGRV9JTlRFR0VSOjkwMDcxOTkyNTQ3NDA5OTF9KX0sLyogMjQ5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjEwIE51bWJlci5NSU5fU0FGRV9JTlRFR0VSCnZhciBuPXIoMCk7bihuLlMsIk51bWJlciIse01JTl9TQUZFX0lOVEVHRVI6LTkwMDcxOTkyNTQ3NDA5OTF9KX0sLyogMjUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigxNTcpOwovLyAyMC4xLjIuMTIgTnVtYmVyLnBhcnNlRmxvYXQoc3RyaW5nKQpuKG4uUytuLkYqKE51bWJlci5wYXJzZUZsb2F0IT1vKSwiTnVtYmVyIix7cGFyc2VGbG9hdDpvfSl9LC8qIDI1MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxvPXIoMTU2KTsKLy8gMjAuMS4yLjEzIE51bWJlci5wYXJzZUludChzdHJpbmcsIHJhZGl4KQpuKG4uUytuLkYqKE51bWJlci5wYXJzZUludCE9byksIk51bWJlciIse3BhcnNlSW50Om99KX0sLyogMjUyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjMgTWF0aC5hY29zaCh4KQp2YXIgbj1yKDApLG89cigxNjApLGk9TWF0aC5zcXJ0LHM9TWF0aC5hY29zaDtuKG4uUytuLkYqIShzJiY3MTA9PU1hdGguZmxvb3IocyhOdW1iZXIuTUFYX1ZBTFVFKSkmJnMoMS8wKT09MS8wKSwiTWF0aCIse2Fjb3NoOmZ1bmN0aW9uKGUpe3JldHVybihlPStlKTwxP05hTjplPjk0OTA2MjY1LjYyNDI1MTU2P01hdGgubG9nKGUpK01hdGguTE4yOm8oZS0xK2koZS0xKSppKGUrMSkpfX0pfSwvKiAyNTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGFzaW5oKGUpe3JldHVybiBpc0Zpbml0ZShlPStlKSYmMCE9ZT9lPDA/LWFzaW5oKC1lKTpNYXRoLmxvZyhlK01hdGguc3FydChlKmUrMSkpOmV9Ci8vIDIwLjIuMi41IE1hdGguYXNpbmgoeCkKdmFyIG49cigwKSxvPU1hdGguYXNpbmg7Ci8vIFRvciBCcm93c2VyIGJ1ZzogTWF0aC5hc2luaCgwKSAtPiAtMApuKG4uUytuLkYqIShvJiYxL28oMCk+MCksIk1hdGgiLHthc2luaDphc2luaH0pfSwvKiAyNTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuNyBNYXRoLmF0YW5oKHgpCnZhciBuPXIoMCksbz1NYXRoLmF0YW5oOwovLyBUb3IgQnJvd3NlciBidWc6IE1hdGguYXRhbmgoLTApIC0+IDAKbihuLlMrbi5GKiEobyYmMS9vKC0wKTwwKSwiTWF0aCIse2F0YW5oOmZ1bmN0aW9uKGUpe3JldHVybiAwPT0oZT0rZSk/ZTpNYXRoLmxvZygoMStlKS8oMS1lKSkvMn19KX0sLyogMjU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjkgTWF0aC5jYnJ0KHgpCnZhciBuPXIoMCksbz1yKDExMSk7bihuLlMsIk1hdGgiLHtjYnJ0OmZ1bmN0aW9uKGUpe3JldHVybiBvKGU9K2UpKk1hdGgucG93KE1hdGguYWJzKGUpLDEvMyl9fSl9LC8qIDI1NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xMSBNYXRoLmNsejMyKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtjbHozMjpmdW5jdGlvbihlKXtyZXR1cm4oZT4+Pj0wKT8zMS1NYXRoLmZsb29yKE1hdGgubG9nKGUrLjUpKk1hdGguTE9HMkUpOjMyfX0pfSwvKiAyNTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMTIgTWF0aC5jb3NoKHgpCnZhciBuPXIoMCksbz1NYXRoLmV4cDtuKG4uUywiTWF0aCIse2Nvc2g6ZnVuY3Rpb24oZSl7cmV0dXJuKG8oZT0rZSkrbygtZSkpLzJ9fSl9LC8qIDI1OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xNCBNYXRoLmV4cG0xKHgpCnZhciBuPXIoMCksbz1yKDExMik7bihuLlMrbi5GKihvIT1NYXRoLmV4cG0xKSwiTWF0aCIse2V4cG0xOm99KX0sLyogMjU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjE2IE1hdGguZnJvdW5kKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtmcm91bmQ6cigxNjEpfSl9LC8qIDI2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4xNyBNYXRoLmh5cG90KFt2YWx1ZTFbLCB2YWx1ZTJbLCDigKYgXV1dKQp2YXIgbj1yKDApLG89TWF0aC5hYnM7bihuLlMsIk1hdGgiLHtoeXBvdDpmdW5jdGlvbihlLHQpe2ZvcigvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnZhciByLG4saT0wLHM9MCxhPWFyZ3VtZW50cy5sZW5ndGgsdT0wO3M8YTspcj1vKGFyZ3VtZW50c1tzKytdKSx1PHI/KG49dS9yLGk9aSpuKm4rMSx1PXIpOnI+MD8obj1yL3UsaSs9bipuKTppKz1yO3JldHVybiB1PT09MS8wPzEvMDp1Kk1hdGguc3FydChpKX19KX0sLyogMjYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMi4yLjE4IE1hdGguaW11bCh4LCB5KQp2YXIgbj1yKDApLG89TWF0aC5pbXVsOwovLyBzb21lIFdlYktpdCB2ZXJzaW9ucyBmYWlscyB3aXRoIGJpZyBudW1iZXJzLCBzb21lIGhhcyB3cm9uZyBhcml0eQpuKG4uUytuLkYqcig1KShmdW5jdGlvbigpe3JldHVybi01IT1vKDQyOTQ5NjcyOTUsNSl8fDIhPW8ubGVuZ3RofSksIk1hdGgiLHtpbXVsOmZ1bmN0aW9uKGUsdCl7dmFyIHI9K2Usbj0rdCxvPTY1NTM1JnIsaT02NTUzNSZuO3JldHVybiAwfG8qaSsoKDY1NTM1JnI+Pj4xNikqaStvKig2NTUzNSZuPj4+MTYpPDwxNj4+PjApfX0pfSwvKiAyNjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMjEgTWF0aC5sb2cxMCh4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7bG9nMTA6ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgubG9nKGUpKk1hdGguTE9HMTBFfX0pfSwvKiAyNjMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMjAgTWF0aC5sb2cxcCh4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7bG9nMXA6cigxNjApfSl9LC8qIDI2NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjIuMi4yMiBNYXRoLmxvZzIoeCkKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2xvZzI6ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgubG9nKGUpL01hdGguTE4yfX0pfSwvKiAyNjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMjggTWF0aC5zaWduKHgpCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtzaWduOnIoMTExKX0pfSwvKiAyNjYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMzAgTWF0aC5zaW5oKHgpCnZhciBuPXIoMCksbz1yKDExMiksaT1NYXRoLmV4cDsKLy8gVjggbmVhciBDaHJvbWl1bSAzOCBoYXMgYSBwcm9ibGVtIHdpdGggdmVyeSBzbWFsbCBudW1iZXJzCm4obi5TK24uRipyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuLTJlLTE3IT0hTWF0aC5zaW5oKC0yZS0xNyl9KSwiTWF0aCIse3Npbmg6ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGguYWJzKGU9K2UpPDE/KG8oZSktbygtZSkpLzI6KGkoZS0xKS1pKC1lLTEpKSooTWF0aC5FLzIpfX0pfSwvKiAyNjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMzMgTWF0aC50YW5oKHgpCnZhciBuPXIoMCksbz1yKDExMiksaT1NYXRoLmV4cDtuKG4uUywiTWF0aCIse3Rhbmg6ZnVuY3Rpb24oZSl7dmFyIHQ9byhlPStlKSxyPW8oLWUpO3JldHVybiB0PT0xLzA/MTpyPT0xLzA/LTE6KHQtcikvKGkoZSkraSgtZSkpfX0pfSwvKiAyNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMC4yLjIuMzQgTWF0aC50cnVuYyh4KQp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7dHJ1bmM6ZnVuY3Rpb24oZSl7cmV0dXJuKGU+MD9NYXRoLmZsb29yOk1hdGguY2VpbCkoZSl9fSl9LC8qIDI2OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigwKSxvPXIoNTApLGk9U3RyaW5nLmZyb21DaGFyQ29kZSxzPVN0cmluZy5mcm9tQ29kZVBvaW50OwovLyBsZW5ndGggc2hvdWxkIGJlIDEsIG9sZCBGRiBwcm9ibGVtCm4obi5TK24uRiooISFzJiYxIT1zLmxlbmd0aCksIlN0cmluZyIsewovLyAyMS4xLjIuMiBTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5jb2RlUG9pbnRzKQpmcm9tQ29kZVBvaW50OmZ1bmN0aW9uKGUpe2ZvcigvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnZhciB0LHI9W10sbj1hcmd1bWVudHMubGVuZ3RoLHM9MDtuPnM7KXtpZih0PSthcmd1bWVudHNbcysrXSxvKHQsMTExNDExMSkhPT10KXRocm93IFJhbmdlRXJyb3IodCsiIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnQiKTtyLnB1c2godDw2NTUzNj9pKHQpOmkoNTUyOTYrKCh0LT02NTUzNik+PjEwKSx0JTEwMjQrNTYzMjApKX1yZXR1cm4gci5qb2luKCIiKX19KX0sLyogMjcwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigyNCksaT1yKDEyKTtuKG4uUywiU3RyaW5nIix7Ci8vIDIxLjEuMi40IFN0cmluZy5yYXcoY2FsbFNpdGUsIC4uLnN1YnN0aXR1dGlvbnMpCnJhdzpmdW5jdGlvbihlKXtmb3IodmFyIHQ9byhlLnJhdykscj1pKHQubGVuZ3RoKSxuPWFyZ3VtZW50cy5sZW5ndGgscz1bXSxhPTA7cj5hOylzLnB1c2goU3RyaW5nKHRbYSsrXSkpLGE8biYmcy5wdXNoKFN0cmluZyhhcmd1bWVudHNbYV0pKTtyZXR1cm4gcy5qb2luKCIiKX19KX0sLyogMjcxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIxLjEuMy4yNSBTdHJpbmcucHJvdG90eXBlLnRyaW0oKQpyKDYxKSgidHJpbSIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywzKX19KX0sLyogMjcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigxMTMpKCEwKTsKLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQpyKDExNCkoU3RyaW5nLCJTdHJpbmciLGZ1bmN0aW9uKGUpe3RoaXMuX3Q9U3RyaW5nKGUpLC8vIHRhcmdldAp0aGlzLl9pPTB9LGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLl90LHI9dGhpcy5faTtyZXR1cm4gcj49dC5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfTooZT1uKHQsciksdGhpcy5faSs9ZS5sZW5ndGgse3ZhbHVlOmUsZG9uZTohMX0pfSl9LC8qIDI3MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDExMykoITEpO24obi5QLCJTdHJpbmciLHsKLy8gMjEuMS4zLjMgU3RyaW5nLnByb3RvdHlwZS5jb2RlUG9pbnRBdChwb3MpCmNvZGVQb2ludEF0OmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSl9fSl9LC8qIDI3NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMS4xLjMuNiBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoKHNlYXJjaFN0cmluZyBbLCBlbmRQb3NpdGlvbl0pCnZhciBuPXIoMCksbz1yKDEyKSxpPXIoMTE2KSxzPSIiLmVuZHNXaXRoO24obi5QK24uRipyKDExNykoImVuZHNXaXRoIiksIlN0cmluZyIse2VuZHNXaXRoOmZ1bmN0aW9uKGUpe3ZhciB0PWkodGhpcyxlLCJlbmRzV2l0aCIpLHI9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbj1vKHQubGVuZ3RoKSxhPXZvaWQgMD09PXI/bjpNYXRoLm1pbihvKHIpLG4pLHU9U3RyaW5nKGUpO3JldHVybiBzP3MuY2FsbCh0LHUsYSk6dC5zbGljZShhLXUubGVuZ3RoLGEpPT09dX19KX0sLyogMjc1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIxLjEuMy43IFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbiA9IDApCnZhciBuPXIoMCksbz1yKDExNik7bihuLlArbi5GKnIoMTE3KSgiaW5jbHVkZXMiKSwiU3RyaW5nIix7aW5jbHVkZXM6ZnVuY3Rpb24oZSl7cmV0dXJuISF+byh0aGlzLGUsImluY2x1ZGVzIikuaW5kZXhPZihlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KX0sLyogMjc2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApO24obi5QLCJTdHJpbmciLHsKLy8gMjEuMS4zLjEzIFN0cmluZy5wcm90b3R5cGUucmVwZWF0KGNvdW50KQpyZXBlYXQ6cigxMTApfSl9LC8qIDI3NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMS4xLjMuMTggU3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoKHNlYXJjaFN0cmluZyBbLCBwb3NpdGlvbiBdKQp2YXIgbj1yKDApLG89cigxMiksaT1yKDExNikscz0iIi5zdGFydHNXaXRoO24obi5QK24uRipyKDExNykoInN0YXJ0c1dpdGgiKSwiU3RyaW5nIix7c3RhcnRzV2l0aDpmdW5jdGlvbihlKXt2YXIgdD1pKHRoaXMsZSwic3RhcnRzV2l0aCIpLHI9byhNYXRoLm1pbihhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCx0Lmxlbmd0aCkpLG49U3RyaW5nKGUpO3JldHVybiBzP3MuY2FsbCh0LG4scik6dC5zbGljZShyLHIrbi5sZW5ndGgpPT09bn19KX0sLyogMjc4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjIgU3RyaW5nLnByb3RvdHlwZS5hbmNob3IobmFtZSkKcigyMCkoImFuY2hvciIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsImEiLCJuYW1lIix0KX19KX0sLyogMjc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjMgU3RyaW5nLnByb3RvdHlwZS5iaWcoKQpyKDIwKSgiYmlnIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJiaWciLCIiLCIiKX19KX0sLyogMjgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjQgU3RyaW5nLnByb3RvdHlwZS5ibGluaygpCnIoMjApKCJibGluayIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywiYmxpbmsiLCIiLCIiKX19KX0sLyogMjgxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjUgU3RyaW5nLnByb3RvdHlwZS5ib2xkKCkKcigyMCkoImJvbGQiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsImIiLCIiLCIiKX19KX0sLyogMjgyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjYgU3RyaW5nLnByb3RvdHlwZS5maXhlZCgpCnIoMjApKCJmaXhlZCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywidHQiLCIiLCIiKX19KX0sLyogMjgzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjcgU3RyaW5nLnByb3RvdHlwZS5mb250Y29sb3IoY29sb3IpCnIoMjApKCJmb250Y29sb3IiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLCJmb250IiwiY29sb3IiLHQpfX0pfSwvKiAyODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuOCBTdHJpbmcucHJvdG90eXBlLmZvbnRzaXplKHNpemUpCnIoMjApKCJmb250c2l6ZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMsImZvbnQiLCJzaXplIix0KX19KX0sLyogMjg1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjkgU3RyaW5nLnByb3RvdHlwZS5pdGFsaWNzKCkKcigyMCkoIml0YWxpY3MiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsImkiLCIiLCIiKX19KX0sLyogMjg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjEwIFN0cmluZy5wcm90b3R5cGUubGluayh1cmwpCnIoMjApKCJsaW5rIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUodGhpcywiYSIsImhyZWYiLHQpfX0pfSwvKiAyODcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMTEgU3RyaW5nLnByb3RvdHlwZS5zbWFsbCgpCnIoMjApKCJzbWFsbCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywic21hbGwiLCIiLCIiKX19KX0sLyogMjg4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIEIuMi4zLjEyIFN0cmluZy5wcm90b3R5cGUuc3RyaWtlKCkKcigyMCkoInN0cmlrZSIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywic3RyaWtlIiwiIiwiIil9fSl9LC8qIDI4OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBCLjIuMy4xMyBTdHJpbmcucHJvdG90eXBlLnN1YigpCnIoMjApKCJzdWIiLGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlKHRoaXMsInN1YiIsIiIsIiIpfX0pfSwvKiAyOTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gQi4yLjMuMTQgU3RyaW5nLnByb3RvdHlwZS5zdXAoKQpyKDIwKSgic3VwIixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzLCJzdXAiLCIiLCIiKX19KX0sLyogMjkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMy4zLjEgLyAxNS45LjQuNCBEYXRlLm5vdygpCnZhciBuPXIoMCk7bihuLlMsIkRhdGUiLHtub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX19KX0sLyogMjkyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTUpLGk9cigzMik7bihuLlArbi5GKnIoNSkoZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PW5ldyBEYXRlKE5hTikudG9KU09OKCl8fDEhPT1EYXRlLnByb3RvdHlwZS50b0pTT04uY2FsbCh7dG9JU09TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gMX19KX0pLCJEYXRlIix7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwp0b0pTT046ZnVuY3Rpb24oZSl7dmFyIHQ9byh0aGlzKSxyPWkodCk7cmV0dXJuIm51bWJlciIhPXR5cGVvZiByfHxpc0Zpbml0ZShyKT90LnRvSVNPU3RyaW5nKCk6bnVsbH19KX0sLyogMjkzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMy40LjM2IC8gMTUuOS41LjQzIERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nKCkKdmFyIG49cigwKSxvPXIoMjk0KTsKLy8gUGhhbnRvbUpTIC8gb2xkIFdlYktpdCBoYXMgYSBicm9rZW4gaW1wbGVtZW50YXRpb25zCm4obi5QK24uRiooRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmchPT1vKSwiRGF0ZSIse3RvSVNPU3RyaW5nOm99KX0sLyogMjk0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIwLjMuNC4zNiAvIDE1LjkuNS40MyBEYXRlLnByb3RvdHlwZS50b0lTT1N0cmluZygpCnZhciBuPXIoNSksbz1EYXRlLnByb3RvdHlwZS5nZXRUaW1lLGk9RGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcscz1mdW5jdGlvbihlKXtyZXR1cm4gZT45P2U6IjAiK2V9OwovLyBQaGFudG9tSlMgLyBvbGQgV2ViS2l0IGhhcyBhIGJyb2tlbiBpbXBsZW1lbnRhdGlvbnMKZS5leHBvcnRzPW4oZnVuY3Rpb24oKXtyZXR1cm4iMDM4NS0wNy0yNVQwNzowNjozOS45OTlaIiE9aS5jYWxsKG5ldyBEYXRlKC01ZTEzLTEpKX0pfHwhbihmdW5jdGlvbigpe2kuY2FsbChuZXcgRGF0ZShOYU4pKX0pP2Z1bmN0aW9uKCl7aWYoIWlzRmluaXRlKG8uY2FsbCh0aGlzKSkpdGhyb3cgUmFuZ2VFcnJvcigiSW52YWxpZCB0aW1lIHZhbHVlIik7dmFyIGU9dGhpcyx0PWUuZ2V0VVRDRnVsbFllYXIoKSxyPWUuZ2V0VVRDTWlsbGlzZWNvbmRzKCksbj10PDA/Ii0iOnQ+OTk5OT8iKyI6IiI7cmV0dXJuIG4rKCIwMDAwMCIrTWF0aC5hYnModCkpLnNsaWNlKG4/LTY6LTQpKyItIitzKGUuZ2V0VVRDTW9udGgoKSsxKSsiLSIrcyhlLmdldFVUQ0RhdGUoKSkrIlQiK3MoZS5nZXRVVENIb3VycygpKSsiOiIrcyhlLmdldFVUQ01pbnV0ZXMoKSkrIjoiK3MoZS5nZXRVVENTZWNvbmRzKCkpKyIuIisocj45OT9yOiIwIitzKHIpKSsiWiJ9Oml9LC8qIDI5NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49RGF0ZS5wcm90b3R5cGUsbz1uLnRvU3RyaW5nLGk9bi5nZXRUaW1lO25ldyBEYXRlKE5hTikrIiIhPSJJbnZhbGlkIERhdGUiJiZyKDE5KShuLCJ0b1N0cmluZyIsZnVuY3Rpb24oKXt2YXIgZT1pLmNhbGwodGhpcyk7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKcmV0dXJuIGU9PT1lP28uY2FsbCh0aGlzKToiSW52YWxpZCBEYXRlIn0pfSwvKiAyOTYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOSkoInRvUHJpbWl0aXZlIiksbz1EYXRlLnByb3RvdHlwZTtuIGluIG98fHIoMTgpKG8sbixyKDI5NykpfSwvKiAyOTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDMpLG89cigzMik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKCJzdHJpbmciIT09ZSYmIm51bWJlciIhPT1lJiYiZGVmYXVsdCIhPT1lKXRocm93IFR5cGVFcnJvcigiSW5jb3JyZWN0IGhpbnQiKTtyZXR1cm4gbyhuKHRoaXMpLCJudW1iZXIiIT1lKX19LC8qIDI5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIyLjEuMi4yIC8gMTUuNC4zLjIgQXJyYXkuaXNBcnJheShhcmcpCnZhciBuPXIoMCk7bihuLlMsIkFycmF5Iix7aXNBcnJheTpyKDgyKX0pfSwvKiAyOTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDI4KSxvPXIoMCksaT1yKDE1KSxzPXIoMTYyKSxhPXIoMTE4KSx1PXIoMTIpLGM9cigxMTkpLGY9cigxMjApO28oby5TK28uRiohcig4NCkoZnVuY3Rpb24oZSl7QXJyYXkuZnJvbShlKX0pLCJBcnJheSIsewovLyAyMi4xLjIuMSBBcnJheS5mcm9tKGFycmF5TGlrZSwgbWFwZm4gPSB1bmRlZmluZWQsIHRoaXNBcmcgPSB1bmRlZmluZWQpCmZyb206ZnVuY3Rpb24oZSl7dmFyIHQscixvLGwsZD1pKGUpLHA9ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSx5PWFyZ3VtZW50cy5sZW5ndGgsaD15PjE/YXJndW1lbnRzWzFdOnZvaWQgMCx2PXZvaWQgMCE9PWgsZz0wLGI9ZihkKTsKLy8gaWYgb2JqZWN0IGlzbid0IGl0ZXJhYmxlIG9yIGl0J3MgYXJyYXkgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yIC0gdXNlIHNpbXBsZSBjYXNlCmlmKHYmJihoPW4oaCx5PjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksdm9pZCAwPT1ifHxwPT1BcnJheSYmYShiKSlmb3IodD11KGQubGVuZ3RoKSxyPW5ldyBwKHQpO3Q+ZztnKyspYyhyLGcsdj9oKGRbZ10sZyk6ZFtnXSk7ZWxzZSBmb3IobD1iLmNhbGwoZCkscj1uZXcgcDshKG89bC5uZXh0KCkpLmRvbmU7ZysrKWMocixnLHY/cyhsLGgsW28udmFsdWUsZ10sITApOm8udmFsdWUpO3JldHVybiByLmxlbmd0aD1nLHJ9fSl9LC8qIDMwMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDExOSk7Ci8vIFdlYktpdCBBcnJheS5vZiBpc24ndCBnZW5lcmljCm4obi5TK24uRipyKDUpKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gRigpe31yZXR1cm4hKEFycmF5Lm9mLmNhbGwoRilpbnN0YW5jZW9mIEYpfSksIkFycmF5Iix7Ci8vIDIyLjEuMi4zIEFycmF5Lm9mKCAuLi5pdGVtcykKb2Y6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MCx0PWFyZ3VtZW50cy5sZW5ndGgscj1uZXcoImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSkodCk7dD5lOylvKHIsZSxhcmd1bWVudHNbZSsrXSk7cmV0dXJuIHIubGVuZ3RoPXQscn19KX0sLyogMzAxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUuam9pbihzZXBhcmF0b3IpCnZhciBuPXIoMCksbz1yKDI0KSxpPVtdLmpvaW47Ci8vIGZhbGxiYWNrIGZvciBub3QgYXJyYXktbGlrZSBzdHJpbmdzCm4obi5QK24uRioocig3MCkhPU9iamVjdHx8IXIoMzApKGkpKSwiQXJyYXkiLHtqb2luOmZ1bmN0aW9uKGUpe3JldHVybiBpLmNhbGwobyh0aGlzKSx2b2lkIDA9PT1lPyIsIjplKX19KX0sLyogMzAyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTA2KSxpPXIoMjkpLHM9cig1MCksYT1yKDEyKSx1PVtdLnNsaWNlOwovLyBmYWxsYmFjayBmb3Igbm90IGFycmF5LWxpa2UgRVMzIHN0cmluZ3MgYW5kIERPTSBvYmplY3RzCm4obi5QK24uRipyKDUpKGZ1bmN0aW9uKCl7byYmdS5jYWxsKG8pfSksIkFycmF5Iix7c2xpY2U6ZnVuY3Rpb24oZSx0KXt2YXIgcj1hKHRoaXMubGVuZ3RoKSxuPWkodGhpcyk7aWYodD12b2lkIDA9PT10P3I6dCwiQXJyYXkiPT1uKXJldHVybiB1LmNhbGwodGhpcyxlLHQpO2Zvcih2YXIgbz1zKGUsciksYz1zKHQsciksZj1hKGMtbyksbD1uZXcgQXJyYXkoZiksZD0wO2Q8ZjtkKyspbFtkXT0iU3RyaW5nIj09bj90aGlzLmNoYXJBdChvK2QpOnRoaXNbbytkXTtyZXR1cm4gbH19KX0sLyogMzAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTYpLGk9cigxNSkscz1yKDUpLGE9W10uc29ydCx1PVsxLDIsM107bihuLlArbi5GKihzKGZ1bmN0aW9uKCl7Ci8vIElFOC0KdS5zb3J0KHZvaWQgMCl9KXx8IXMoZnVuY3Rpb24oKXsKLy8gVjggYnVnCnUuc29ydChudWxsKX0pfHwhcigzMCkoYSkpLCJBcnJheSIsewovLyAyMi4xLjMuMjUgQXJyYXkucHJvdG90eXBlLnNvcnQoY29tcGFyZWZuKQpzb3J0OmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP2EuY2FsbChpKHRoaXMpKTphLmNhbGwoaSh0aGlzKSxvKGUpKX19KX0sLyogMzA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMzYpKDApLGk9cigzMCkoW10uZm9yRWFjaCwhMCk7bihuLlArbi5GKiFpLCJBcnJheSIsewovLyAyMi4xLjMuMTAgLyAxNS40LjQuMTggQXJyYXkucHJvdG90eXBlLmZvckVhY2goY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKZm9yRWFjaDpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUsYXJndW1lbnRzWzFdKX19KX0sLyogMzA1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDYpLG89cig4MiksaT1yKDkpKCJzcGVjaWVzIik7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0OwovLyBjcm9zcy1yZWFsbSBmYWxsYmFjawpyZXR1cm4gbyhlKSYmKHQ9ZS5jb25zdHJ1Y3RvciwiZnVuY3Rpb24iIT10eXBlb2YgdHx8dCE9PUFycmF5JiYhbyh0LnByb3RvdHlwZSl8fCh0PXZvaWQgMCksbih0KSYmbnVsbD09PSh0PXRbaV0pJiYodD12b2lkIDApKSx2b2lkIDA9PT10P0FycmF5OnR9fSwvKiAzMDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigzNikoMSk7bihuLlArbi5GKiFyKDMwKShbXS5tYXAsITApLCJBcnJheSIsewovLyAyMi4xLjMuMTUgLyAxNS40LjQuMTkgQXJyYXkucHJvdG90eXBlLm1hcChjYWxsYmFja2ZuIFssIHRoaXNBcmddKQptYXA6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDM2KSgyKTtuKG4uUCtuLkYqIXIoMzApKFtdLmZpbHRlciwhMCksIkFycmF5Iix7Ci8vIDIyLjEuMy43IC8gMTUuNC40LjIwIEFycmF5LnByb3RvdHlwZS5maWx0ZXIoY2FsbGJhY2tmbiBbLCB0aGlzQXJnXSkKZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigzNikoMyk7bihuLlArbi5GKiFyKDMwKShbXS5zb21lLCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjIzIC8gMTUuNC40LjE3IEFycmF5LnByb3RvdHlwZS5zb21lKGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCnNvbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMwOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDM2KSg0KTtuKG4uUCtuLkYqIXIoMzApKFtdLmV2ZXJ5LCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjUgLyAxNS40LjQuMTYgQXJyYXkucHJvdG90eXBlLmV2ZXJ5KGNhbGxiYWNrZm4gWywgdGhpc0FyZ10pCmV2ZXJ5OmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSxhcmd1bWVudHNbMV0pfX0pfSwvKiAzMTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigxNjMpO24obi5QK24uRiohcigzMCkoW10ucmVkdWNlLCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjE4IC8gMTUuNC40LjIxIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UoY2FsbGJhY2tmbiBbLCBpbml0aWFsVmFsdWVdKQpyZWR1Y2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGgsYXJndW1lbnRzWzFdLCExKX19KX0sLyogMzExICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTYzKTtuKG4uUCtuLkYqIXIoMzApKFtdLnJlZHVjZVJpZ2h0LCEwKSwiQXJyYXkiLHsKLy8gMjIuMS4zLjE5IC8gMTUuNC40LjIyIEFycmF5LnByb3RvdHlwZS5yZWR1Y2VSaWdodChjYWxsYmFja2ZuIFssIGluaXRpYWxWYWx1ZV0pCnJlZHVjZVJpZ2h0OmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoLGFyZ3VtZW50c1sxXSwhMCl9fSl9LC8qIDMxMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDgwKSghMSksaT1bXS5pbmRleE9mLHM9ISFpJiYxL1sxXS5pbmRleE9mKDEsLTApPDA7bihuLlArbi5GKihzfHwhcigzMCkoaSkpLCJBcnJheSIsewovLyAyMi4xLjMuMTEgLyAxNS40LjQuMTQgQXJyYXkucHJvdG90eXBlLmluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKQppbmRleE9mOmZ1bmN0aW9uKGUpe3JldHVybiBzP2kuYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwOm8odGhpcyxlLGFyZ3VtZW50c1sxXSl9fSl9LC8qIDMxMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDI0KSxpPXIoMzQpLHM9cigxMiksYT1bXS5sYXN0SW5kZXhPZix1PSEhYSYmMS9bMV0ubGFzdEluZGV4T2YoMSwtMCk8MDtuKG4uUCtuLkYqKHV8fCFyKDMwKShhKSksIkFycmF5Iix7Ci8vIDIyLjEuMy4xNCAvIDE1LjQuNC4xNSBBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2Yoc2VhcmNoRWxlbWVudCBbLCBmcm9tSW5kZXhdKQpsYXN0SW5kZXhPZjpmdW5jdGlvbihlKXsKLy8gY29udmVydCAtMCB0byArMAppZih1KXJldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8MDt2YXIgdD1vKHRoaXMpLHI9cyh0Lmxlbmd0aCksbj1yLTE7Zm9yKGFyZ3VtZW50cy5sZW5ndGg+MSYmKG49TWF0aC5taW4obixpKGFyZ3VtZW50c1sxXSkpKSxuPDAmJihuPXIrbik7bj49MDtuLS0paWYobiBpbiB0JiZ0W25dPT09ZSlyZXR1cm4gbnx8MDtyZXR1cm4tMX19KX0sLyogMzE0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjIuMS4zLjMgQXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4odGFyZ2V0LCBzdGFydCwgZW5kID0gdGhpcy5sZW5ndGgpCnZhciBuPXIoMCk7bihuLlAsIkFycmF5Iix7Y29weVdpdGhpbjpyKDE2NCl9KSxyKDQ0KSgiY29weVdpdGhpbiIpfSwvKiAzMTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyMi4xLjMuNiBBcnJheS5wcm90b3R5cGUuZmlsbCh2YWx1ZSwgc3RhcnQgPSAwLCBlbmQgPSB0aGlzLmxlbmd0aCkKdmFyIG49cigwKTtuKG4uUCwiQXJyYXkiLHtmaWxsOnIoMTIyKX0pLHIoNDQpKCJmaWxsIil9LC8qIDMxNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyAyMi4xLjMuOCBBcnJheS5wcm90b3R5cGUuZmluZChwcmVkaWNhdGUsIHRoaXNBcmcgPSB1bmRlZmluZWQpCnZhciBuPXIoMCksbz1yKDM2KSg1KSxpPSEwOwovLyBTaG91bGRuJ3Qgc2tpcCBob2xlcwoiZmluZCJpbltdJiZBcnJheSgxKS5maW5kKGZ1bmN0aW9uKCl7aT0hMX0pLG4obi5QK24uRippLCJBcnJheSIse2ZpbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxyKDQ0KSgiZmluZCIpfSwvKiAzMTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjIuMS4zLjkgQXJyYXkucHJvdG90eXBlLmZpbmRJbmRleChwcmVkaWNhdGUsIHRoaXNBcmcgPSB1bmRlZmluZWQpCnZhciBuPXIoMCksbz1yKDM2KSg2KSxpPSJmaW5kSW5kZXgiLHM9ITA7Ci8vIFNob3VsZG4ndCBza2lwIGhvbGVzCmkgaW5bXSYmQXJyYXkoMSlbaV0oZnVuY3Rpb24oKXtzPSExfSksbihuLlArbi5GKnMsIkFycmF5Iix7ZmluZEluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSkscig0NCkoaSl9LC8qIDMxOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig1MykoIkFycmF5Iil9LC8qIDMxOSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig0KSxvPXIoMTA5KSxpPXIoMTEpLmYscz1yKDUyKS5mLGE9cig4MyksdT1yKDg1KSxjPW4uUmVnRXhwLGY9YyxsPWMucHJvdG90eXBlLGQ9L2EvZyxwPS9hL2cseT1uZXcgYyhkKSE9PWQ7aWYocigxMCkmJigheXx8cig1KShmdW5jdGlvbigpewovLyBSZWdFeHAgY29uc3RydWN0b3IgY2FuIGFsdGVyIGZsYWdzIGFuZCBJc1JlZ0V4cCB3b3JrcyBjb3JyZWN0IHdpdGggQEBtYXRjaApyZXR1cm4gcFtyKDkpKCJtYXRjaCIpXT0hMSxjKGQpIT1kfHxjKHApPT1wfHwiL2EvaSIhPWMoZCwiaSIpfSkpKXtjPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyBpbnN0YW5jZW9mIGMsbj1hKGUpLGk9dm9pZCAwPT09dDtyZXR1cm4hciYmbiYmZS5jb25zdHJ1Y3Rvcj09PWMmJmk/ZTpvKHk/bmV3IGYobiYmIWk/ZS5zb3VyY2U6ZSx0KTpmKChuPWUgaW5zdGFuY2VvZiBjKT9lLnNvdXJjZTplLG4mJmk/dS5jYWxsKGUpOnQpLHI/dGhpczpsLGMpfTtmb3IodmFyIGg9cyhmKSx2PTA7aC5sZW5ndGg+djspIWZ1bmN0aW9uKGUpe2UgaW4gY3x8aShjLGUse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZltlXX0sc2V0OmZ1bmN0aW9uKHQpe2ZbZV09dH19KX0oaFt2KytdKTtsLmNvbnN0cnVjdG9yPWMsYy5wcm90b3R5cGU9bCxyKDE5KShuLCJSZWdFeHAiLGMpfXIoNTMpKCJSZWdFeHAiKX0sLyogMzIwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7cigxNjYpO3ZhciBuPXIoMyksbz1yKDg1KSxpPXIoMTApLHM9Ly4vLnRvU3RyaW5nLGE9ZnVuY3Rpb24oZSl7cigxOSkoUmVnRXhwLnByb3RvdHlwZSwidG9TdHJpbmciLGUsITApfTsKLy8gMjEuMi41LjE0IFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcoKQpyKDUpKGZ1bmN0aW9uKCl7cmV0dXJuIi9hL2IiIT1zLmNhbGwoe3NvdXJjZToiYSIsZmxhZ3M6ImIifSl9KT9hKGZ1bmN0aW9uKCl7dmFyIGU9bih0aGlzKTtyZXR1cm4iLyIuY29uY2F0KGUuc291cmNlLCIvIiwiZmxhZ3MiaW4gZT9lLmZsYWdzOiFpJiZlIGluc3RhbmNlb2YgUmVnRXhwP28uY2FsbChlKTp2b2lkIDApfSk6InRvU3RyaW5nIiE9cy5uYW1lJiZhKGZ1bmN0aW9uKCl7cmV0dXJuIHMuY2FsbCh0aGlzKX0pfSwvKiAzMjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBAQG1hdGNoIGxvZ2ljCnIoODYpKCJtYXRjaCIsMSxmdW5jdGlvbihlLHQscil7Ci8vIDIxLjEuMy4xMSBTdHJpbmcucHJvdG90eXBlLm1hdGNoKHJlZ2V4cCkKcmV0dXJuW2Z1bmN0aW9uKHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1lKHRoaXMpLG89dm9pZCAwPT1yP3ZvaWQgMDpyW3RdO3JldHVybiB2b2lkIDAhPT1vP28uY2FsbChyLG4pOm5ldyBSZWdFeHAocilbdF0oU3RyaW5nKG4pKX0scl19KX0sLyogMzIyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gQEByZXBsYWNlIGxvZ2ljCnIoODYpKCJyZXBsYWNlIiwyLGZ1bmN0aW9uKGUsdCxyKXsKLy8gMjEuMS4zLjE0IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZShzZWFyY2hWYWx1ZSwgcmVwbGFjZVZhbHVlKQpyZXR1cm5bZnVuY3Rpb24obixvKXsidXNlIHN0cmljdCI7dmFyIGk9ZSh0aGlzKSxzPXZvaWQgMD09bj92b2lkIDA6blt0XTtyZXR1cm4gdm9pZCAwIT09cz9zLmNhbGwobixpLG8pOnIuY2FsbChTdHJpbmcoaSksbixvKX0scl19KX0sLyogMzIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gQEBzZWFyY2ggbG9naWMKcig4NikoInNlYXJjaCIsMSxmdW5jdGlvbihlLHQscil7Ci8vIDIxLjEuMy4xNSBTdHJpbmcucHJvdG90eXBlLnNlYXJjaChyZWdleHApCnJldHVybltmdW5jdGlvbihyKXsidXNlIHN0cmljdCI7dmFyIG49ZSh0aGlzKSxvPXZvaWQgMD09cj92b2lkIDA6clt0XTtyZXR1cm4gdm9pZCAwIT09bz9vLmNhbGwocixuKTpuZXcgUmVnRXhwKHIpW3RdKFN0cmluZyhuKSl9LHJdfSl9LC8qIDMyNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIEBAc3BsaXQgbG9naWMKcig4NikoInNwbGl0IiwyLGZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dmFyIG89cig4MyksaT1uLHM9W10ucHVzaCxhPSJsZW5ndGgiO2lmKCJjIj09ImFiYmMiLnNwbGl0KC8oYikqLylbMV18fDQhPSJ0ZXN0Ii5zcGxpdCgvKD86KS8sLTEpW2FdfHwyIT0iYWIiLnNwbGl0KC8oPzphYikqLylbYV18fDQhPSIuIi5zcGxpdCgvKC4/KSguPykvKVthXXx8Ii4iLnNwbGl0KC8oKSgpLylbYV0+MXx8IiIuc3BsaXQoLy4/LylbYV0pe3ZhciB1PXZvaWQgMD09PS8oKT8/Ly5leGVjKCIiKVsxXTsvLyBub25wYXJ0aWNpcGF0aW5nIGNhcHR1cmluZyBncm91cAovLyBiYXNlZCBvbiBlczUtc2hpbSBpbXBsZW1lbnRhdGlvbiwgbmVlZCB0byByZXdvcmsgaXQKbj1mdW5jdGlvbihlLHQpe3ZhciByPVN0cmluZyh0aGlzKTtpZih2b2lkIDA9PT1lJiYwPT09dClyZXR1cm5bXTsKLy8gSWYgYHNlcGFyYXRvcmAgaXMgbm90IGEgcmVnZXgsIHVzZSBuYXRpdmUgc3BsaXQKaWYoIW8oZSkpcmV0dXJuIGkuY2FsbChyLGUsdCk7dmFyIG4sYyxmLGwsZCxwPVtdLHk9KGUuaWdub3JlQ2FzZT8iaSI6IiIpKyhlLm11bHRpbGluZT8ibSI6IiIpKyhlLnVuaWNvZGU/InUiOiIiKSsoZS5zdGlja3k/InkiOiIiKSxoPTAsdj12b2lkIDA9PT10PzQyOTQ5NjcyOTU6dD4+PjAsZz1uZXcgUmVnRXhwKGUuc291cmNlLHkrImciKTtmb3IoCi8vIERvZXNuJ3QgbmVlZCBmbGFncyBneSwgYnV0IHRoZXkgZG9uJ3QgaHVydAp1fHwobj1uZXcgUmVnRXhwKCJeIitnLnNvdXJjZSsiJCg/IVxccykiLHkpKTsoYz1nLmV4ZWMocikpJiYhKCgKLy8gYHNlcGFyYXRvckNvcHkubGFzdEluZGV4YCBpcyBub3QgcmVsaWFibGUgY3Jvc3MtYnJvd3NlcgpmPWMuaW5kZXgrY1swXVthXSk+aCYmKHAucHVzaChyLnNsaWNlKGgsYy5pbmRleCkpLAovLyBGaXggYnJvd3NlcnMgd2hvc2UgYGV4ZWNgIG1ldGhvZHMgZG9uJ3QgY29uc2lzdGVudGx5IHJldHVybiBgdW5kZWZpbmVkYCBmb3IgTlBDRwovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9vcC1mdW5jCiF1JiZjW2FdPjEmJmNbMF0ucmVwbGFjZShuLGZ1bmN0aW9uKCl7Zm9yKGQ9MTtkPGFyZ3VtZW50c1thXS0yO2QrKyl2b2lkIDA9PT1hcmd1bWVudHNbZF0mJihjW2RdPXZvaWQgMCl9KSxjW2FdPjEmJmMuaW5kZXg8clthXSYmcy5hcHBseShwLGMuc2xpY2UoMSkpLGw9Y1swXVthXSxoPWYscFthXT49dikpOylnLmxhc3RJbmRleD09PWMuaW5kZXgmJmcubGFzdEluZGV4Kys7cmV0dXJuIGg9PT1yW2FdPyFsJiZnLnRlc3QoIiIpfHxwLnB1c2goIiIpOnAucHVzaChyLnNsaWNlKGgpKSxwW2FdPnY/cC5zbGljZSgwLHYpOnB9fWVsc2UiMCIuc3BsaXQodm9pZCAwLDApW2FdJiYobj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT1lJiYwPT09dD9bXTppLmNhbGwodGhpcyxlLHQpfSk7Ci8vIDIxLjEuMy4xNyBTdHJpbmcucHJvdG90eXBlLnNwbGl0KHNlcGFyYXRvciwgbGltaXQpCnJldHVybltmdW5jdGlvbihyLG8pe3ZhciBpPWUodGhpcykscz12b2lkIDA9PXI/dm9pZCAwOnJbdF07cmV0dXJuIHZvaWQgMCE9PXM/cy5jYWxsKHIsaSxvKTpuLmNhbGwoU3RyaW5nKGkpLHIsbyl9LG5dfSl9LC8qIDMyNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuLG8saSxzLGE9cig0MyksdT1yKDQpLGM9cigyOCksZj1yKDcyKSxsPXIoMCksZD1yKDYpLHA9cigxNikseT1yKDU0KSxoPXIoNTUpLHY9cig4NyksZz1yKDEyNCkuc2V0LGI9cigxMjUpKCksXz1yKDEyNiksbT1yKDE2NyksUj1yKDg4KSx3PXIoMTY4KSxTPXUuVHlwZUVycm9yLGs9dS5wcm9jZXNzLE89ayYmay52ZXJzaW9ucyxQPU8mJk8udjh8fCIiLE09dS5Qcm9taXNlLEw9InByb2Nlc3MiPT1mKGspLHg9ZnVuY3Rpb24oKXt9LEE9bz1fLmYsRD0hIWZ1bmN0aW9uKCl7dHJ5ewovLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQKdmFyIGU9TS5yZXNvbHZlKDEpLHQ9KGUuY29uc3RydWN0b3I9e30pW3IoOSkoInNwZWNpZXMiKV09ZnVuY3Rpb24oZSl7ZSh4LHgpfTsKLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdApyZXR1cm4oTHx8ImZ1bmN0aW9uIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCkmJmUudGhlbih4KWluc3RhbmNlb2YgdCYmMCE9PVAuaW5kZXhPZigiNi42IikmJi0xPT09Ui5pbmRleE9mKCJDaHJvbWUvNjYiKX1jYXRjaChlKXt9fSgpLFU9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuISghZChlKXx8ImZ1bmN0aW9uIiE9dHlwZW9mKHQ9ZS50aGVuKSkmJnR9LGo9ZnVuY3Rpb24oZSx0KXtpZighZS5fbil7ZS5fbj0hMDt2YXIgcj1lLl9jO2IoZnVuY3Rpb24oKXtmb3IodmFyIG49ZS5fdixvPTE9PWUuX3MsaT0wO3IubGVuZ3RoPmk7KSFmdW5jdGlvbih0KXt2YXIgcixpLHMsYT1vP3Qub2s6dC5mYWlsLHU9dC5yZXNvbHZlLGM9dC5yZWplY3QsZj10LmRvbWFpbjt0cnl7YT8ob3x8KDI9PWUuX2gmJkMoZSksZS5faD0xKSwhMD09PWE/cj1uOihmJiZmLmVudGVyKCkscj1hKG4pLC8vIG1heSB0aHJvdwpmJiYoZi5leGl0KCkscz0hMCkpLHI9PT10LnByb21pc2U/YyhTKCJQcm9taXNlLWNoYWluIGN5Y2xlIikpOihpPVUocikpP2kuY2FsbChyLHUsYyk6dShyKSk6YyhuKX1jYXRjaChlKXtmJiYhcyYmZi5leGl0KCksYyhlKX19KHJbaSsrXSk7Ly8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2gKZS5fYz1bXSxlLl9uPSExLHQmJiFlLl9oJiZFKGUpfSl9fSxFPWZ1bmN0aW9uKGUpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIHQscixuLG89ZS5fdixpPUkoZSk7aWYoaSYmKHQ9bShmdW5jdGlvbigpe0w/ay5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLG8sZSk6KHI9dS5vbnVuaGFuZGxlZHJlamVjdGlvbik/cih7cHJvbWlzZTplLHJlYXNvbjpvfSk6KG49dS5jb25zb2xlKSYmbi5lcnJvciYmbi5lcnJvcigiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uIixvKX0pLAovLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZAplLl9oPUx8fEkoZSk/MjoxKSxlLl9hPXZvaWQgMCxpJiZ0LmUpdGhyb3cgdC52fSl9LEk9ZnVuY3Rpb24oZSl7cmV0dXJuIDEhPT1lLl9oJiYwPT09KGUuX2F8fGUuX2MpLmxlbmd0aH0sQz1mdW5jdGlvbihlKXtnLmNhbGwodSxmdW5jdGlvbigpe3ZhciB0O0w/ay5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIixlKToodD11Lm9ucmVqZWN0aW9uaGFuZGxlZCkmJnQoe3Byb21pc2U6ZSxyZWFzb246ZS5fdn0pfSl9LFQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0Ll9kfHwodC5fZD0hMCx0PXQuX3d8fHQsLy8gdW53cmFwCnQuX3Y9ZSx0Ll9zPTIsdC5fYXx8KHQuX2E9dC5fYy5zbGljZSgpKSxqKHQsITApKX0scT1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7aWYoIXIuX2Qpe3IuX2Q9ITAscj1yLl93fHxyOy8vIHVud3JhcAp0cnl7aWYocj09PWUpdGhyb3cgUygiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsodD1VKGUpKT9iKGZ1bmN0aW9uKCl7dmFyIG49e193OnIsX2Q6ITF9Oy8vIHdyYXAKdHJ5e3QuY2FsbChlLGMocSxuLDEpLGMoVCxuLDEpKX1jYXRjaChlKXtULmNhbGwobixlKX19KTooci5fdj1lLHIuX3M9MSxqKHIsITEpKX1jYXRjaChlKXtULmNhbGwoe193OnIsX2Q6ITF9LGUpfX19OwovLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbApEfHwoCi8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpCk09ZnVuY3Rpb24oZSl7eSh0aGlzLE0sIlByb21pc2UiLCJfaCIpLHAoZSksbi5jYWxsKHRoaXMpO3RyeXtlKGMocSx0aGlzLDEpLGMoVCx0aGlzLDEpKX1jYXRjaChlKXtULmNhbGwodGhpcyxlKX19LAovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKbj1mdW5jdGlvbihlKXt0aGlzLl9jPVtdLC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9ucwp0aGlzLl9hPXZvaWQgMCwvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9ucwp0aGlzLl9zPTAsLy8gPC0gc3RhdGUKdGhpcy5fZD0hMSwvLyA8LSBkb25lCnRoaXMuX3Y9dm9pZCAwLC8vIDwtIHZhbHVlCnRoaXMuX2g9MCwvLyA8LSByZWplY3Rpb24gc3RhdGUsIDAgLSBkZWZhdWx0LCAxIC0gaGFuZGxlZCwgMiAtIHVuaGFuZGxlZAp0aGlzLl9uPSExfSxuLnByb3RvdHlwZT1yKDU2KShNLnByb3RvdHlwZSx7Ci8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpCnRoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1BKHYodGhpcyxNKSk7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LHIuZG9tYWluPUw/ay5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChyKSx0aGlzLl9hJiZ0aGlzLl9hLnB1c2gociksdGhpcy5fcyYmaih0aGlzLCExKSxyLnByb21pc2V9LAovLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKQpjYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSxpPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG47dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPWMocSxlLDEpLHRoaXMucmVqZWN0PWMoVCxlLDEpfSxfLmY9QT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PU18fGU9PT1zP25ldyBpKGUpOm8oZSl9KSxsKGwuRytsLlcrbC5GKiFELHtQcm9taXNlOk19KSxyKDYwKShNLCJQcm9taXNlIikscig1MykoIlByb21pc2UiKSxzPXIoMjcpLlByb21pc2UsCi8vIHN0YXRpY3MKbChsLlMrbC5GKiFELCJQcm9taXNlIix7Ci8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCnJlamVjdDpmdW5jdGlvbihlKXt2YXIgdD1BKHRoaXMpO3JldHVybigwLHQucmVqZWN0KShlKSx0LnByb21pc2V9fSksbChsLlMrbC5GKihhfHwhRCksIlByb21pc2UiLHsKLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCnJlc29sdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHcoYSYmdGhpcz09PXM/TTp0aGlzLGUpfX0pLGwobC5TK2wuRiohKEQmJnIoODQpKGZ1bmN0aW9uKGUpe00uYWxsKGUpLmNhdGNoKHgpfSkpLCJQcm9taXNlIix7Ci8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKQphbGw6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPUEodCksbj1yLnJlc29sdmUsbz1yLnJlamVjdCxpPW0oZnVuY3Rpb24oKXt2YXIgcj1bXSxpPTAscz0xO2goZSwhMSxmdW5jdGlvbihlKXt2YXIgYT1pKyssdT0hMTtyLnB1c2godm9pZCAwKSxzKyssdC5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24oZSl7dXx8KHU9ITAsclthXT1lLC0tc3x8bihyKSl9LG8pfSksLS1zfHxuKHIpfSk7cmV0dXJuIGkuZSYmbyhpLnYpLHIucHJvbWlzZX0sCi8vIDI1LjQuNC40IFByb21pc2UucmFjZShpdGVyYWJsZSkKcmFjZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9QSh0KSxuPXIucmVqZWN0LG89bShmdW5jdGlvbigpe2goZSwhMSxmdW5jdGlvbihlKXt0LnJlc29sdmUoZSkudGhlbihyLnJlc29sdmUsbil9KX0pO3JldHVybiBvLmUmJm4oby52KSxyLnByb21pc2V9fSl9LC8qIDMyNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTczKSxvPXIoNjMpOwovLyAyMy40IFdlYWtTZXQgT2JqZWN0cwpyKDg5KSgiV2Vha1NldCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7Ci8vIDIzLjQuMy4xIFdlYWtTZXQucHJvdG90eXBlLmFkZCh2YWx1ZSkKYWRkOmZ1bmN0aW9uKGUpe3JldHVybiBuLmRlZihvKHRoaXMsIldlYWtTZXQiKSxlLCEwKX19LG4sITEsITApfSwvKiAzMjcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cig5MCksaT1yKDEyNykscz1yKDMpLGE9cig1MCksdT1yKDEyKSxjPXIoNiksZj1yKDQpLkFycmF5QnVmZmVyLGw9cig4NyksZD1pLkFycmF5QnVmZmVyLHA9aS5EYXRhVmlldyx5PW8uQUJWJiZmLmlzVmlldyxoPWQucHJvdG90eXBlLnNsaWNlLHY9by5WSUVXO24obi5HK24uVytuLkYqKGYhPT1kKSx7QXJyYXlCdWZmZXI6ZH0pLG4obi5TK24uRiohby5DT05TVFIsIkFycmF5QnVmZmVyIix7Ci8vIDI0LjEuMy4xIEFycmF5QnVmZmVyLmlzVmlldyhhcmcpCmlzVmlldzpmdW5jdGlvbihlKXtyZXR1cm4geSYmeShlKXx8YyhlKSYmdiBpbiBlfX0pLG4obi5QK24uVStuLkYqcig1KShmdW5jdGlvbigpe3JldHVybiFuZXcgZCgyKS5zbGljZSgxLHZvaWQgMCkuYnl0ZUxlbmd0aH0pLCJBcnJheUJ1ZmZlciIsewovLyAyNC4xLjQuMyBBcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2Uoc3RhcnQsIGVuZCkKc2xpY2U6ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT1oJiZ2b2lkIDA9PT10KXJldHVybiBoLmNhbGwocyh0aGlzKSxlKTtmb3IoLy8gRkYgZml4CnZhciByPXModGhpcykuYnl0ZUxlbmd0aCxuPWEoZSxyKSxvPWEodm9pZCAwPT09dD9yOnQsciksaT1uZXcobCh0aGlzLGQpKSh1KG8tbikpLGM9bmV3IHAodGhpcyksZj1uZXcgcChpKSx5PTA7bjxvOylmLnNldFVpbnQ4KHkrKyxjLmdldFVpbnQ4KG4rKykpO3JldHVybiBpfX0pLHIoNTMpKCJBcnJheUJ1ZmZlciIpfSwvKiAzMjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMCk7bihuLkcrbi5XK24uRiohcig5MCkuQUJWLHtEYXRhVmlldzpyKDEyNykuRGF0YVZpZXd9KX0sLyogMzI5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM3KSgiSW50OCIsMSxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJVaW50OCIsMSxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJVaW50OCIsMSxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0sITApfSwvKiAzMzIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJJbnQxNiIsMixmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoMzcpKCJVaW50MTYiLDIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzM0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM3KSgiSW50MzIiLDQsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzM1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM3KSgiVWludDMyIiw0LGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUodGhpcyx0LHIsbil9fSl9LC8qIDMzNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigzNykoIkZsb2F0MzIiLDQsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gZSh0aGlzLHQscixuKX19KX0sLyogMzM3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDM3KSgiRmxvYXQ2NCIsOCxmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyLG4pe3JldHVybiBlKHRoaXMsdCxyLG4pfX0pfSwvKiAzMzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjEgUmVmbGVjdC5hcHBseSh0YXJnZXQsIHRoaXNBcmd1bWVudCwgYXJndW1lbnRzTGlzdCkKdmFyIG49cigwKSxvPXIoMTYpLGk9cigzKSxzPShyKDQpLlJlZmxlY3R8fHt9KS5hcHBseSxhPUZ1bmN0aW9uLmFwcGx5OwovLyBNUyBFZGdlIGFyZ3VtZW50c0xpc3QgYXJndW1lbnQgaXMgb3B0aW9uYWwKbihuLlMrbi5GKiFyKDUpKGZ1bmN0aW9uKCl7cyhmdW5jdGlvbigpe30pfSksIlJlZmxlY3QiLHthcHBseTpmdW5jdGlvbihlLHQscil7dmFyIG49byhlKSx1PWkocik7cmV0dXJuIHM/cyhuLHQsdSk6YS5jYWxsKG4sdCx1KX19KX0sLyogMzM5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS4yIFJlZmxlY3QuY29uc3RydWN0KHRhcmdldCwgYXJndW1lbnRzTGlzdCBbLCBuZXdUYXJnZXRdKQp2YXIgbj1yKDApLG89cig1MSksaT1yKDE2KSxzPXIoMyksYT1yKDYpLHU9cig1KSxjPXIoMTU0KSxmPShyKDQpLlJlZmxlY3R8fHt9KS5jb25zdHJ1Y3QsbD11KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gRigpe31yZXR1cm4hKGYoZnVuY3Rpb24oKXt9LFtdLEYpaW5zdGFuY2VvZiBGKX0pLGQ9IXUoZnVuY3Rpb24oKXtmKGZ1bmN0aW9uKCl7fSl9KTtuKG4uUytuLkYqKGx8fGQpLCJSZWZsZWN0Iix7Y29uc3RydWN0OmZ1bmN0aW9uKGUsdCl7aShlKSxzKHQpO3ZhciByPWFyZ3VtZW50cy5sZW5ndGg8Mz9lOmkoYXJndW1lbnRzWzJdKTtpZihkJiYhbClyZXR1cm4gZihlLHQscik7aWYoZT09cil7Ci8vIHcvbyBhbHRlcmVkIG5ld1RhcmdldCwgb3B0aW1pemF0aW9uIGZvciAwLTQgYXJndW1lbnRzCnN3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgZTtjYXNlIDE6cmV0dXJuIG5ldyBlKHRbMF0pO2Nhc2UgMjpyZXR1cm4gbmV3IGUodFswXSx0WzFdKTtjYXNlIDM6cmV0dXJuIG5ldyBlKHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG5ldyBlKHRbMF0sdFsxXSx0WzJdLHRbM10pfQovLyB3L28gYWx0ZXJlZCBuZXdUYXJnZXQsIGxvdCBvZiBhcmd1bWVudHMgY2FzZQp2YXIgbj1bbnVsbF07cmV0dXJuIG4ucHVzaC5hcHBseShuLHQpLG5ldyhjLmFwcGx5KGUsbikpfQovLyB3aXRoIGFsdGVyZWQgbmV3VGFyZ2V0LCBub3Qgc3VwcG9ydCBidWlsdC1pbiBjb25zdHJ1Y3RvcnMKdmFyIHU9ci5wcm90b3R5cGUscD1vKGEodSk/dTpPYmplY3QucHJvdG90eXBlKSx5PUZ1bmN0aW9uLmFwcGx5LmNhbGwoZSxwLHQpO3JldHVybiBhKHkpP3k6cH19KX0sLyogMzQwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS4zIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlcykKdmFyIG49cigxMSksbz1yKDApLGk9cigzKSxzPXIoMzIpOwovLyBNUyBFZGdlIGhhcyBicm9rZW4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSAtIHRocm93aW5nIGluc3RlYWQgb2YgcmV0dXJuaW5nIGZhbHNlCm8oby5TK28uRipyKDUpKGZ1bmN0aW9uKCl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgpSZWZsZWN0LmRlZmluZVByb3BlcnR5KG4uZih7fSwxLHt2YWx1ZToxfSksMSx7dmFsdWU6Mn0pfSksIlJlZmxlY3QiLHtkZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbihlLHQscil7aShlKSx0PXModCwhMCksaShyKTt0cnl7cmV0dXJuIG4uZihlLHQsciksITB9Y2F0Y2goZSl7cmV0dXJuITF9fX0pfSwvKiAzNDEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjQgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5S2V5KQp2YXIgbj1yKDApLG89cigyNSkuZixpPXIoMyk7bihuLlMsIlJlZmxlY3QiLHtkZWxldGVQcm9wZXJ0eTpmdW5jdGlvbihlLHQpe3ZhciByPW8oaShlKSx0KTtyZXR1cm4hKHImJiFyLmNvbmZpZ3VyYWJsZSkmJmRlbGV0ZSBlW3RdfX0pfSwvKiAzNDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gMjYuMS41IFJlZmxlY3QuZW51bWVyYXRlKHRhcmdldCkKdmFyIG49cigwKSxvPXIoMyksaT1mdW5jdGlvbihlKXt0aGlzLl90PW8oZSksLy8gdGFyZ2V0CnRoaXMuX2k9MDsvLyBuZXh0IGluZGV4CnZhciB0LHI9dGhpcy5faz1bXTtmb3IodCBpbiBlKXIucHVzaCh0KX07cigxMTUpKGksIk9iamVjdCIsZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMscj10Ll9rO2Rve2lmKHQuX2k+PXIubGVuZ3RoKXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH19d2hpbGUoISgoZT1yW3QuX2krK10paW4gdC5fdCkpO3JldHVybnt2YWx1ZTplLGRvbmU6ITF9fSksbihuLlMsIlJlZmxlY3QiLHtlbnVtZXJhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBpKGUpfX0pfSwvKiAzNDMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2Z1bmN0aW9uIGdldChlLHQpe3ZhciByLHMsYz1hcmd1bWVudHMubGVuZ3RoPDM/ZTphcmd1bWVudHNbMl07cmV0dXJuIHUoZSk9PT1jP2VbdF06KHI9bi5mKGUsdCkpP2kociwidmFsdWUiKT9yLnZhbHVlOnZvaWQgMCE9PXIuZ2V0P3IuZ2V0LmNhbGwoYyk6dm9pZCAwOmEocz1vKGUpKT9nZXQocyx0LGMpOnZvaWQgMH0KLy8gMjYuMS42IFJlZmxlY3QuZ2V0KHRhcmdldCwgcHJvcGVydHlLZXkgWywgcmVjZWl2ZXJdKQp2YXIgbj1yKDI1KSxvPXIoMjYpLGk9cigyMykscz1yKDApLGE9cig2KSx1PXIoMyk7cyhzLlMsIlJlZmxlY3QiLHtnZXQ6Z2V0fSl9LC8qIDM0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDI2LjEuNyBSZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5S2V5KQp2YXIgbj1yKDI1KSxvPXIoMCksaT1yKDMpO28oby5TLCJSZWZsZWN0Iix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uZihpKGUpLHQpfX0pfSwvKiAzNDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjggUmVmbGVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpCnZhciBuPXIoMCksbz1yKDI2KSxpPXIoMyk7bihuLlMsIlJlZmxlY3QiLHtnZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlKXtyZXR1cm4gbyhpKGUpKX19KX0sLyogMzQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjYuMS45IFJlZmxlY3QuaGFzKHRhcmdldCwgcHJvcGVydHlLZXkpCnZhciBuPXIoMCk7bihuLlMsIlJlZmxlY3QiLHtoYXM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCBpbiBlfX0pfSwvKiAzNDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjEwIFJlZmxlY3QuaXNFeHRlbnNpYmxlKHRhcmdldCkKdmFyIG49cigwKSxvPXIoMyksaT1PYmplY3QuaXNFeHRlbnNpYmxlO24obi5TLCJSZWZsZWN0Iix7aXNFeHRlbnNpYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBvKGUpLCFpfHxpKGUpfX0pfSwvKiAzNDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjExIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpCnZhciBuPXIoMCk7bihuLlMsIlJlZmxlY3QiLHtvd25LZXlzOnIoMTc1KX0pfSwvKiAzNDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjEyIFJlZmxlY3QucHJldmVudEV4dGVuc2lvbnModGFyZ2V0KQp2YXIgbj1yKDApLG89cigzKSxpPU9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucztuKG4uUywiUmVmbGVjdCIse3ByZXZlbnRFeHRlbnNpb25zOmZ1bmN0aW9uKGUpe28oZSk7dHJ5e3JldHVybiBpJiZpKGUpLCEwfWNhdGNoKGUpe3JldHVybiExfX19KX0sLyogMzUwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiBzZXQoZSx0LHIpe3ZhciBhLGwsZD1hcmd1bWVudHMubGVuZ3RoPDQ/ZTphcmd1bWVudHNbM10scD1vLmYoYyhlKSx0KTtpZighcCl7aWYoZihsPWkoZSkpKXJldHVybiBzZXQobCx0LHIsZCk7cD11KDApfWlmKHMocCwidmFsdWUiKSl7aWYoITE9PT1wLndyaXRhYmxlfHwhZihkKSlyZXR1cm4hMTtpZihhPW8uZihkLHQpKXtpZihhLmdldHx8YS5zZXR8fCExPT09YS53cml0YWJsZSlyZXR1cm4hMTthLnZhbHVlPXIsbi5mKGQsdCxhKX1lbHNlIG4uZihkLHQsdSgwLHIpKTtyZXR1cm4hMH1yZXR1cm4gdm9pZCAwIT09cC5zZXQmJihwLnNldC5jYWxsKGQsciksITApfQovLyAyNi4xLjEzIFJlZmxlY3Quc2V0KHRhcmdldCwgcHJvcGVydHlLZXksIFYgWywgcmVjZWl2ZXJdKQp2YXIgbj1yKDExKSxvPXIoMjUpLGk9cigyNikscz1yKDIzKSxhPXIoMCksdT1yKDQ3KSxjPXIoMyksZj1yKDYpO2EoYS5TLCJSZWZsZWN0Iix7c2V0OnNldH0pfSwvKiAzNTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAyNi4xLjE0IFJlZmxlY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90bykKdmFyIG49cigwKSxvPXIoMTA3KTtvJiZuKG4uUywiUmVmbGVjdCIse3NldFByb3RvdHlwZU9mOmZ1bmN0aW9uKGUsdCl7by5jaGVjayhlLHQpO3RyeXtyZXR1cm4gby5zZXQoZSx0KSwhMH1jYXRjaChlKXtyZXR1cm4hMX19fSl9LC8qIDM1MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9BcnJheS5wcm90b3R5cGUuaW5jbHVkZXMKdmFyIG49cigwKSxvPXIoODApKCEwKTtuKG4uUCwiQXJyYXkiLHtpbmNsdWRlczpmdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLGUsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLHIoNDQpKCJpbmNsdWRlcyIpfSwvKiAzNTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1mbGF0TWFwLyNzZWMtQXJyYXkucHJvdG90eXBlLmZsYXRNYXAKdmFyIG49cigwKSxvPXIoMTc2KSxpPXIoMTUpLHM9cigxMiksYT1yKDE2KSx1PXIoMTIxKTtuKG4uUCwiQXJyYXkiLHtmbGF0TWFwOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbj1pKHRoaXMpO3JldHVybiBhKGUpLHQ9cyhuLmxlbmd0aCkscj11KG4sMCksbyhyLG4sbix0LDAsMSxlLGFyZ3VtZW50c1sxXSkscn19KSxyKDQ0KSgiZmxhdE1hcCIpfSwvKiAzNTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1mbGF0TWFwLyNzZWMtQXJyYXkucHJvdG90eXBlLmZsYXR0ZW4KdmFyIG49cigwKSxvPXIoMTc2KSxpPXIoMTUpLHM9cigxMiksYT1yKDM0KSx1PXIoMTIxKTtuKG4uUCwiQXJyYXkiLHtmbGF0dGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzWzBdLHQ9aSh0aGlzKSxyPXModC5sZW5ndGgpLG49dSh0LDApO3JldHVybiBvKG4sdCx0LHIsMCx2b2lkIDA9PT1lPzE6YShlKSksbn19KSxyKDQ0KSgiZmxhdHRlbiIpfSwvKiAzNTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL21hdGhpYXNieW5lbnMvU3RyaW5nLnByb3RvdHlwZS5hdAp2YXIgbj1yKDApLG89cigxMTMpKCEwKTtuKG4uUCwiU3RyaW5nIix7YXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlKX19KX0sLyogMzU2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXN0cmluZy1wYWQtc3RhcnQtZW5kCnZhciBuPXIoMCksbz1yKDE3NyksaT1yKDg4KTsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzI4MApuKG4uUCtuLkYqL1ZlcnNpb25cLzEwXC5cZCsoXC5cZCspPyBTYWZhcmlcLy8udGVzdChpKSwiU3RyaW5nIix7cGFkU3RhcnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcyxlLGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCEwKX19KX0sLyogMzU3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLXN0cmluZy1wYWQtc3RhcnQtZW5kCnZhciBuPXIoMCksbz1yKDE3NyksaT1yKDg4KTsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzI4MApuKG4uUCtuLkYqL1ZlcnNpb25cLzEwXC5cZCsoXC5cZCspPyBTYWZhcmlcLy8udGVzdChpKSwiU3RyaW5nIix7cGFkRW5kOmZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsZSxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwhMSl9fSl9LC8qIDM1OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vc2VibWFya2JhZ2UvZWNtYXNjcmlwdC1zdHJpbmctbGVmdC1yaWdodC10cmltCnIoNjEpKCJ0cmltTGVmdCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywxKX19LCJ0cmltU3RhcnQiKX0sLyogMzU5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zZWJtYXJrYmFnZS9lY21hc2NyaXB0LXN0cmluZy1sZWZ0LXJpZ2h0LXRyaW0Kcig2MSkoInRyaW1SaWdodCIsZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcywyKX19LCJ0cmltRW5kIil9LC8qIDM2MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL1N0cmluZy5wcm90b3R5cGUubWF0Y2hBbGwvCnZhciBuPXIoMCksbz1yKDMzKSxpPXIoMTIpLHM9cig4MyksYT1yKDg1KSx1PVJlZ0V4cC5wcm90b3R5cGUsYz1mdW5jdGlvbihlLHQpe3RoaXMuX3I9ZSx0aGlzLl9zPXR9O3IoMTE1KShjLCJSZWdFeHAgU3RyaW5nIixmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3IuZXhlYyh0aGlzLl9zKTtyZXR1cm57dmFsdWU6ZSxkb25lOm51bGw9PT1lfX0pLG4obi5QLCJTdHJpbmciLHttYXRjaEFsbDpmdW5jdGlvbihlKXtpZihvKHRoaXMpLCFzKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgcmVnZXhwISIpO3ZhciB0PVN0cmluZyh0aGlzKSxyPSJmbGFncyJpbiB1P1N0cmluZyhlLmZsYWdzKTphLmNhbGwoZSksbj1uZXcgUmVnRXhwKGUuc291cmNlLH5yLmluZGV4T2YoImciKT9yOiJnIityKTtyZXR1cm4gbi5sYXN0SW5kZXg9aShlLmxhc3RJbmRleCksbmV3IGMobix0KX19KX0sLyogMzYxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDEwMykoImFzeW5jSXRlcmF0b3IiKX0sLyogMzYyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDEwMykoIm9ic2VydmFibGUiKX0sLyogMzYzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JqZWN0LWdldG93bnByb3BlcnR5ZGVzY3JpcHRvcnMKdmFyIG49cigwKSxvPXIoMTc1KSxpPXIoMjQpLHM9cigyNSksYT1yKDExOSk7bihuLlMsIk9iamVjdCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIsbj1pKGUpLHU9cy5mLGM9byhuKSxmPXt9LGw9MDtjLmxlbmd0aD5sOyl2b2lkIDAhPT0ocj11KG4sdD1jW2wrK10pKSYmYShmLHQscik7cmV0dXJuIGZ9fSl9LC8qIDM2NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC12YWx1ZXMtZW50cmllcwp2YXIgbj1yKDApLG89cigxNzgpKCExKTtuKG4uUywiT2JqZWN0Iix7dmFsdWVzOmZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfX0pfSwvKiAzNjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1vYmplY3QtdmFsdWVzLWVudHJpZXMKdmFyIG49cigwKSxvPXIoMTc4KSghMCk7bihuLlMsIk9iamVjdCIse2VudHJpZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9fSl9LC8qIDM2NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDE1KSxpPXIoMTYpLHM9cigxMSk7Ci8vIEIuMi4yLjIgT2JqZWN0LnByb3RvdHlwZS5fX2RlZmluZUdldHRlcl9fKFAsIGdldHRlcikKcigxMCkmJm4obi5QK3IoOTEpLCJPYmplY3QiLHtfX2RlZmluZUdldHRlcl9fOmZ1bmN0aW9uKGUsdCl7cy5mKG8odGhpcyksZSx7Z2V0OmkodCksZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX19KX0sLyogMzY3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cigwKSxvPXIoMTUpLGk9cigxNikscz1yKDExKTsKLy8gQi4yLjIuMyBPYmplY3QucHJvdG90eXBlLl9fZGVmaW5lU2V0dGVyX18oUCwgc2V0dGVyKQpyKDEwKSYmbihuLlArcig5MSksIk9iamVjdCIse19fZGVmaW5lU2V0dGVyX186ZnVuY3Rpb24oZSx0KXtzLmYobyh0aGlzKSxlLHtzZXQ6aSh0KSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfX0pfSwvKiAzNjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDApLG89cigxNSksaT1yKDMyKSxzPXIoMjYpLGE9cigyNSkuZjsKLy8gQi4yLjIuNCBPYmplY3QucHJvdG90eXBlLl9fbG9va3VwR2V0dGVyX18oUCkKcigxMCkmJm4obi5QK3IoOTEpLCJPYmplY3QiLHtfX2xvb2t1cEdldHRlcl9fOmZ1bmN0aW9uKGUpe3ZhciB0LHI9byh0aGlzKSxuPWkoZSwhMCk7ZG97aWYodD1hKHIsbikpcmV0dXJuIHQuZ2V0fXdoaWxlKHI9cyhyKSl9fSl9LC8qIDM2OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMCksbz1yKDE1KSxpPXIoMzIpLHM9cigyNiksYT1yKDI1KS5mOwovLyBCLjIuMi41IE9iamVjdC5wcm90b3R5cGUuX19sb29rdXBTZXR0ZXJfXyhQKQpyKDEwKSYmbihuLlArcig5MSksIk9iamVjdCIse19fbG9va3VwU2V0dGVyX186ZnVuY3Rpb24oZSl7dmFyIHQscj1vKHRoaXMpLG49aShlLCEwKTtkb3tpZih0PWEocixuKSlyZXR1cm4gdC5zZXR9d2hpbGUocj1zKHIpKX19KX0sLyogMzcwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTgp2YXIgbj1yKDApO24obi5QK24uUiwiTWFwIix7dG9KU09OOnIoMTc5KSgiTWFwIil9KX0sLyogMzcxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL0RhdmlkQnJ1YW50L01hcC1TZXQucHJvdG90eXBlLnRvSlNPTgp2YXIgbj1yKDApO24obi5QK24uUiwiU2V0Iix7dG9KU09OOnIoMTc5KSgiU2V0Iil9KX0sLyogMzcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtbWFwLm9mCnIoOTIpKCJNYXAiKX0sLyogMzczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtc2V0Lm9mCnIoOTIpKCJTZXQiKX0sLyogMzc0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtd2Vha21hcC5vZgpyKDkyKSgiV2Vha01hcCIpfSwvKiAzNzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrc2V0Lm9mCnIoOTIpKCJXZWFrU2V0Iil9LC8qIDM3NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vcHJvcG9zYWwtc2V0bWFwLW9mZnJvbS8jc2VjLW1hcC5mcm9tCnIoOTMpKCJNYXAiKX0sLyogMzc3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtc2V0LmZyb20Kcig5MykoIlNldCIpfSwvKiAzNzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL3Byb3Bvc2FsLXNldG1hcC1vZmZyb20vI3NlYy13ZWFrbWFwLmZyb20Kcig5MykoIldlYWtNYXAiKX0sLyogMzc5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9wcm9wb3NhbC1zZXRtYXAtb2Zmcm9tLyNzZWMtd2Vha3NldC5mcm9tCnIoOTMpKCJXZWFrU2V0Iil9LC8qIDM4MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWdsb2JhbAp2YXIgbj1yKDApO24obi5HLHtnbG9iYWw6cig0KX0pfSwvKiAzODEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1nbG9iYWwKdmFyIG49cigwKTtuKG4uUywiU3lzdGVtIix7Z2xvYmFsOnIoNCl9KX0sLyogMzgyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL2xqaGFyYi9wcm9wb3NhbC1pcy1lcnJvcgp2YXIgbj1yKDApLG89cigyOSk7bihuLlMsIkVycm9yIix7aXNFcnJvcjpmdW5jdGlvbihlKXtyZXR1cm4iRXJyb3IiPT09byhlKX19KX0sLyogMzgzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7Y2xhbXA6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBNYXRoLm1pbihyLE1hdGgubWF4KHQsZSkpfX0pfSwvKiAzODQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtERUdfUEVSX1JBRDpNYXRoLlBJLzE4MH0pfSwvKiAzODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL3J3YWxkcm9uLmdpdGh1Yi5pby9wcm9wb3NhbC1tYXRoLWV4dGVuc2lvbnMvCnZhciBuPXIoMCksbz0xODAvTWF0aC5QSTtuKG4uUywiTWF0aCIse2RlZ3JlZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUqb319KX0sLyogMzg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApLG89cigxODEpLGk9cigxNjEpO24obi5TLCJNYXRoIix7ZnNjYWxlOmZ1bmN0aW9uKGUsdCxyLG4scyl7cmV0dXJuIGkobyhlLHQscixuLHMpKX19KX0sLyogMzg3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vQnJlbmRhbkVpY2gvNDI5NGQ1YzIxMmE2ZDIyNTQ3MDMKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse2lhZGRoOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWU+Pj4wLGk9dD4+PjAscz1yPj4+MDtyZXR1cm4gaSsobj4+PjApKygobyZzfChvfHMpJn4obytzPj4+MCkpPj4+MzEpfDB9fSl9LC8qIDM4OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtpc3ViaDpmdW5jdGlvbihlLHQscixuKXt2YXIgbz1lPj4+MCxpPXQ+Pj4wLHM9cj4+PjA7cmV0dXJuIGktKG4+Pj4wKS0oKH5vJnN8fihvXnMpJm8tcz4+PjApPj4+MzEpfDB9fSl9LC8qIDM4OSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JyZW5kYW5FaWNoLzQyOTRkNWMyMTJhNmQyMjU0NzAzCnZhciBuPXIoMCk7bihuLlMsIk1hdGgiLHtpbXVsaDpmdW5jdGlvbihlLHQpe3ZhciByPStlLG49K3Qsbz02NTUzNSZyLGk9NjU1MzUmbixzPXI+PjE2LGE9bj4+MTYsdT0ocyppPj4+MCkrKG8qaT4+PjE2KTtyZXR1cm4gcyphKyh1Pj4xNikrKChvKmE+Pj4wKSsoNjU1MzUmdSk+PjE2KX19KX0sLyogMzkwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7UkFEX1BFUl9ERUc6MTgwL01hdGguUEl9KX0sLyogMzkxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9yd2FsZHJvbi5naXRodWIuaW8vcHJvcG9zYWwtbWF0aC1leHRlbnNpb25zLwp2YXIgbj1yKDApLG89TWF0aC5QSS8xODA7bihuLlMsIk1hdGgiLHtyYWRpYW5zOmZ1bmN0aW9uKGUpe3JldHVybiBlKm99fSl9LC8qIDM5MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vcndhbGRyb24uZ2l0aHViLmlvL3Byb3Bvc2FsLW1hdGgtZXh0ZW5zaW9ucy8KdmFyIG49cigwKTtuKG4uUywiTWF0aCIse3NjYWxlOnIoMTgxKX0pfSwvKiAzOTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9CcmVuZGFuRWljaC80Mjk0ZDVjMjEyYTZkMjI1NDcwMwp2YXIgbj1yKDApO24obi5TLCJNYXRoIix7dW11bGg6ZnVuY3Rpb24oZSx0KXt2YXIgcj0rZSxuPSt0LG89NjU1MzUmcixpPTY1NTM1Jm4scz1yPj4+MTYsYT1uPj4+MTYsdT0ocyppPj4+MCkrKG8qaT4+PjE2KTtyZXR1cm4gcyphKyh1Pj4+MTYpKygobyphPj4+MCkrKDY1NTM1JnUpPj4+MTYpfX0pfSwvKiAzOTQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwOi8vamZiYXN0aWVuLmdpdGh1Yi5pby9wYXBlcnMvTWF0aC5zaWduYml0Lmh0bWwKdmFyIG49cigwKTtuKG4uUywiTWF0aCIse3NpZ25iaXQ6ZnVuY3Rpb24oZSl7Ci8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zZWxmLWNvbXBhcmUKcmV0dXJuKGU9K2UpIT1lP2U6MD09ZT8xL2U9PTEvMDplPjB9fSl9LC8qIDM5NSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLWZpbmFsbHkKdmFyIG49cigwKSxvPXIoMjcpLGk9cig0KSxzPXIoODcpLGE9cigxNjgpO24obi5QK24uUiwiUHJvbWlzZSIse2ZpbmFsbHk6ZnVuY3Rpb24oZSl7dmFyIHQ9cyh0aGlzLG8uUHJvbWlzZXx8aS5Qcm9taXNlKSxyPSJmdW5jdGlvbiI9PXR5cGVvZiBlO3JldHVybiB0aGlzLnRoZW4ocj9mdW5jdGlvbihyKXtyZXR1cm4gYSh0LGUoKSkudGhlbihmdW5jdGlvbigpe3JldHVybiByfSl9OmUscj9mdW5jdGlvbihyKXtyZXR1cm4gYSh0LGUoKSkudGhlbihmdW5jdGlvbigpe3Rocm93IHJ9KX06ZSl9fSl9LC8qIDM5NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiOwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcm9taXNlLXRyeQp2YXIgbj1yKDApLG89cigxMjYpLGk9cigxNjcpO24obi5TLCJQcm9taXNlIix7dHJ5OmZ1bmN0aW9uKGUpe3ZhciB0PW8uZih0aGlzKSxyPWkoZSk7cmV0dXJuKHIuZT90LnJlamVjdDp0LnJlc29sdmUpKHIudiksdC5wcm9taXNlfX0pfSwvKiAzOTcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzgpLG89cigzKSxpPW4ua2V5LHM9bi5zZXQ7bi5leHAoe2RlZmluZU1ldGFkYXRhOmZ1bmN0aW9uKGUsdCxyLG4pe3MoZSx0LG8ociksaShuKSl9fSl9LC8qIDM5OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCksbz1yKDMpLGk9bi5rZXkscz1uLm1hcCxhPW4uc3RvcmU7bi5leHAoe2RlbGV0ZU1ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDppKGFyZ3VtZW50c1syXSksbj1zKG8odCksciwhMSk7aWYodm9pZCAwPT09bnx8IW4uZGVsZXRlKGUpKXJldHVybiExO2lmKG4uc2l6ZSlyZXR1cm4hMDt2YXIgdT1hLmdldCh0KTtyZXR1cm4gdS5kZWxldGUociksISF1LnNpemV8fGEuZGVsZXRlKHQpfX0pfSwvKiAzOTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzgpLG89cigzKSxpPXIoMjYpLHM9bi5oYXMsYT1uLmdldCx1PW4ua2V5LGM9ZnVuY3Rpb24oZSx0LHIpe2lmKHMoZSx0LHIpKXJldHVybiBhKGUsdCxyKTt2YXIgbj1pKHQpO3JldHVybiBudWxsIT09bj9jKGUsbixyKTp2b2lkIDB9O24uZXhwKHtnZXRNZXRhZGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBjKGUsbyh0KSxhcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOnUoYXJndW1lbnRzWzJdKSl9fSl9LC8qIDQwMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxNzEpLG89cigxODApLGk9cigzOCkscz1yKDMpLGE9cigyNiksdT1pLmtleXMsYz1pLmtleSxmPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dShlLHQpLGk9YShlKTtpZihudWxsPT09aSlyZXR1cm4gcjt2YXIgcz1mKGksdCk7cmV0dXJuIHMubGVuZ3RoP3IubGVuZ3RoP28obmV3IG4oci5jb25jYXQocykpKTpzOnJ9O2kuZXhwKHtnZXRNZXRhZGF0YUtleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGYocyhlKSxhcmd1bWVudHMubGVuZ3RoPDI/dm9pZCAwOmMoYXJndW1lbnRzWzFdKSl9fSl9LC8qIDQwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCksbz1yKDMpLGk9bi5nZXQscz1uLmtleTtuLmV4cCh7Z2V0T3duTWV0YWRhdGE6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShlLG8odCksYXJndW1lbnRzLmxlbmd0aDwzP3ZvaWQgMDpzKGFyZ3VtZW50c1syXSkpfX0pfSwvKiA0MDIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoMzgpLG89cigzKSxpPW4ua2V5cyxzPW4ua2V5O24uZXhwKHtnZXRPd25NZXRhZGF0YUtleXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGkobyhlKSxhcmd1bWVudHMubGVuZ3RoPDI/dm9pZCAwOnMoYXJndW1lbnRzWzFdKSl9fSl9LC8qIDQwMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCksbz1yKDMpLGk9cigyNikscz1uLmhhcyxhPW4ua2V5LHU9ZnVuY3Rpb24oZSx0LHIpe2lmKHMoZSx0LHIpKXJldHVybiEwO3ZhciBuPWkodCk7cmV0dXJuIG51bGwhPT1uJiZ1KGUsbixyKX07bi5leHAoe2hhc01ldGFkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUoZSxvKHQpLGFyZ3VtZW50cy5sZW5ndGg8Mz92b2lkIDA6YShhcmd1bWVudHNbMl0pKX19KX0sLyogNDA0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM4KSxvPXIoMyksaT1uLmhhcyxzPW4ua2V5O24uZXhwKHtoYXNPd25NZXRhZGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBpKGUsbyh0KSxhcmd1bWVudHMubGVuZ3RoPDM/dm9pZCAwOnMoYXJndW1lbnRzWzJdKSl9fSl9LC8qIDQwNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigzOCksbz1yKDMpLGk9cigxNikscz1uLmtleSxhPW4uc2V0O24uZXhwKHttZXRhZGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLG4pe2EoZSx0LCh2b2lkIDAhPT1uP286aSkocikscyhuKSl9fX0pfSwvKiA0MDYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBodHRwczovL2dpdGh1Yi5jb20vcndhbGRyb24vdGMzOS1ub3Rlcy9ibG9iL21hc3Rlci9lczYvMjAxNC0wOS9zZXB0LTI1Lm1kIzUxMC1nbG9iYWxhc2FwLWZvci1lbnF1ZXVpbmctYS1taWNyb3Rhc2sKdmFyIG49cigwKSxvPXIoMTI1KSgpLGk9cig0KS5wcm9jZXNzLHM9InByb2Nlc3MiPT1yKDI5KShpKTtuKG4uRyx7YXNhcDpmdW5jdGlvbihlKXt2YXIgdD1zJiZpLmRvbWFpbjtvKHQ/dC5iaW5kKGUpOmUpfX0pfSwvKiA0MDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3plbnBhcnNpbmcvZXMtb2JzZXJ2YWJsZQp2YXIgbj1yKDApLG89cig0KSxpPXIoMjcpLHM9cigxMjUpKCksYT1yKDkpKCJvYnNlcnZhYmxlIiksdT1yKDE2KSxjPXIoMyksZj1yKDU0KSxsPXIoNTYpLGQ9cigxOCkscD1yKDU1KSx5PXAuUkVUVVJOLGg9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/dm9pZCAwOnUoZSl9LHY9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5fYzt0JiYoZS5fYz12b2lkIDAsdCgpKX0sZz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZS5fb30sYj1mdW5jdGlvbihlKXtnKGUpfHwoZS5fbz12b2lkIDAsdihlKSl9LF89ZnVuY3Rpb24oZSx0KXtjKGUpLHRoaXMuX2M9dm9pZCAwLHRoaXMuX289ZSxlPW5ldyBtKHRoaXMpO3RyeXt2YXIgcj10KGUpLG49cjtudWxsIT1yJiYoImZ1bmN0aW9uIj09dHlwZW9mIHIudW5zdWJzY3JpYmU/cj1mdW5jdGlvbigpe24udW5zdWJzY3JpYmUoKX06dShyKSx0aGlzLl9jPXIpfWNhdGNoKHQpe3JldHVybiB2b2lkIGUuZXJyb3IodCl9Zyh0aGlzKSYmdih0aGlzKX07Xy5wcm90b3R5cGU9bCh7fSx7dW5zdWJzY3JpYmU6ZnVuY3Rpb24oKXtiKHRoaXMpfX0pO3ZhciBtPWZ1bmN0aW9uKGUpe3RoaXMuX3M9ZX07bS5wcm90b3R5cGU9bCh7fSx7bmV4dDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zO2lmKCFnKHQpKXt2YXIgcj10Ll9vO3RyeXt2YXIgbj1oKHIubmV4dCk7aWYobilyZXR1cm4gbi5jYWxsKHIsZSl9Y2F0Y2goZSl7dHJ5e2IodCl9ZmluYWxseXt0aHJvdyBlfX19fSxlcnJvcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zO2lmKGcodCkpdGhyb3cgZTt2YXIgcj10Ll9vO3QuX289dm9pZCAwO3RyeXt2YXIgbj1oKHIuZXJyb3IpO2lmKCFuKXRocm93IGU7ZT1uLmNhbGwocixlKX1jYXRjaChlKXt0cnl7dih0KX1maW5hbGx5e3Rocm93IGV9fXJldHVybiB2KHQpLGV9LGNvbXBsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3M7aWYoIWcodCkpe3ZhciByPXQuX287dC5fbz12b2lkIDA7dHJ5e3ZhciBuPWgoci5jb21wbGV0ZSk7ZT1uP24uY2FsbChyLGUpOnZvaWQgMH1jYXRjaChlKXt0cnl7dih0KX1maW5hbGx5e3Rocm93IGV9fXJldHVybiB2KHQpLGV9fX0pO3ZhciBSPWZ1bmN0aW9uKGUpe2YodGhpcyxSLCJPYnNlcnZhYmxlIiwiX2YiKS5fZj11KGUpfTtsKFIucHJvdG90eXBlLHtzdWJzY3JpYmU6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBfKGUsdGhpcy5fZil9LGZvckVhY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3KGkuUHJvbWlzZXx8by5Qcm9taXNlKShmdW5jdGlvbihyLG4pe3UoZSk7dmFyIG89dC5zdWJzY3JpYmUoe25leHQ6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBlKHQpfWNhdGNoKGUpe24oZSksby51bnN1YnNjcmliZSgpfX0sZXJyb3I6bixjb21wbGV0ZTpyfSl9KX19KSxsKFIse2Zyb206ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIHRoaXM/dGhpczpSLHI9aChjKGUpW2FdKTtpZihyKXt2YXIgbj1jKHIuY2FsbChlKSk7cmV0dXJuIG4uY29uc3RydWN0b3I9PT10P246bmV3IHQoZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3Vic2NyaWJlKGUpfSl9cmV0dXJuIG5ldyB0KGZ1bmN0aW9uKHQpe3ZhciByPSExO3JldHVybiBzKGZ1bmN0aW9uKCl7aWYoIXIpe3RyeXtpZihwKGUsITEsZnVuY3Rpb24oZSl7aWYodC5uZXh0KGUpLHIpcmV0dXJuIHl9KT09PXkpcmV0dXJufWNhdGNoKGUpe2lmKHIpdGhyb3cgZTtyZXR1cm4gdm9pZCB0LmVycm9yKGUpfXQuY29tcGxldGUoKX19KSxmdW5jdGlvbigpe3I9ITB9fSl9LG9mOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD1hcmd1bWVudHMubGVuZ3RoLHI9bmV3IEFycmF5KHQpO2U8dDspcltlXT1hcmd1bWVudHNbZSsrXTtyZXR1cm4gbmV3KCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6UikoZnVuY3Rpb24oZSl7dmFyIHQ9ITE7cmV0dXJuIHMoZnVuY3Rpb24oKXtpZighdCl7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDsrK24paWYoZS5uZXh0KHJbbl0pLHQpcmV0dXJuO2UuY29tcGxldGUoKX19KSxmdW5jdGlvbigpe3Q9ITB9fSl9fSksZChSLnByb3RvdHlwZSxhLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxuKG4uRyx7T2JzZXJ2YWJsZTpSfSkscig1MykoIk9ic2VydmFibGUiKX0sLyogNDA4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaWU5LSBzZXRUaW1lb3V0ICYgc2V0SW50ZXJ2YWwgYWRkaXRpb25hbCBwYXJhbWV0ZXJzIGZpeAp2YXIgbj1yKDQpLG89cigwKSxpPXIoODgpLHM9W10uc2xpY2UsYT0vTVNJRSAuXC4vLnRlc3QoaSksdT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjIsbz0hIW4mJnMuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGUobj9mdW5jdGlvbigpewovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmV3LWZ1bmMKKCJmdW5jdGlvbiI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCkpLmFwcGx5KHRoaXMsbyl9OnQscil9fTtvKG8uRytvLkIrby5GKmEse3NldFRpbWVvdXQ6dShuLnNldFRpbWVvdXQpLHNldEludGVydmFsOnUobi5zZXRJbnRlcnZhbCl9KX0sLyogNDA5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDApLG89cigxMjQpO24obi5HK24uQix7c2V0SW1tZWRpYXRlOm8uc2V0LGNsZWFySW1tZWRpYXRlOm8uY2xlYXJ9KX0sLyogNDEwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG49cigxMjMpLG89cig0OSksaT1yKDE5KSxzPXIoNCksYT1yKDE4KSx1PXIoNjIpLGM9cig5KSxmPWMoIml0ZXJhdG9yIiksbD1jKCJ0b1N0cmluZ1RhZyIpLGQ9dS5BcnJheSxwPXtDU1NSdWxlTGlzdDohMCwvLyBUT0RPOiBOb3Qgc3BlYyBjb21wbGlhbnQsIHNob3VsZCBiZSBmYWxzZS4KQ1NTU3R5bGVEZWNsYXJhdGlvbjohMSxDU1NWYWx1ZUxpc3Q6ITEsQ2xpZW50UmVjdExpc3Q6ITEsRE9NUmVjdExpc3Q6ITEsRE9NU3RyaW5nTGlzdDohMSxET01Ub2tlbkxpc3Q6ITAsRGF0YVRyYW5zZmVySXRlbUxpc3Q6ITEsRmlsZUxpc3Q6ITEsSFRNTEFsbENvbGxlY3Rpb246ITEsSFRNTENvbGxlY3Rpb246ITEsSFRNTEZvcm1FbGVtZW50OiExLEhUTUxTZWxlY3RFbGVtZW50OiExLE1lZGlhTGlzdDohMCwvLyBUT0RPOiBOb3Qgc3BlYyBjb21wbGlhbnQsIHNob3VsZCBiZSBmYWxzZS4KTWltZVR5cGVBcnJheTohMSxOYW1lZE5vZGVNYXA6ITEsTm9kZUxpc3Q6ITAsUGFpbnRSZXF1ZXN0TGlzdDohMSxQbHVnaW46ITEsUGx1Z2luQXJyYXk6ITEsU1ZHTGVuZ3RoTGlzdDohMSxTVkdOdW1iZXJMaXN0OiExLFNWR1BhdGhTZWdMaXN0OiExLFNWR1BvaW50TGlzdDohMSxTVkdTdHJpbmdMaXN0OiExLFNWR1RyYW5zZm9ybUxpc3Q6ITEsU291cmNlQnVmZmVyTGlzdDohMSxTdHlsZVNoZWV0TGlzdDohMCwvLyBUT0RPOiBOb3Qgc3BlYyBjb21wbGlhbnQsIHNob3VsZCBiZSBmYWxzZS4KVGV4dFRyYWNrQ3VlTGlzdDohMSxUZXh0VHJhY2tMaXN0OiExLFRvdWNoTGlzdDohMX0seT1vKHApLGg9MDtoPHkubGVuZ3RoO2grKyl7dmFyIHYsZz15W2hdLGI9cFtnXSxfPXNbZ10sbT1fJiZfLnByb3RvdHlwZTtpZihtJiYobVtmXXx8YShtLGYsZCksbVtsXXx8YShtLGwsZyksdVtnXT1kLGIpKWZvcih2IGluIG4pbVt2XXx8aShtLHYsblt2XSwhMCl9fSwvKiA0MTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpey8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLwooZnVuY3Rpb24odCl7LyoqCiAqIENvcHlyaWdodCAoYykgMjAxNCwgRmFjZWJvb2ssIEluYy4KICogQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAqIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvbWFzdGVyL0xJQ0VOU0UgZmlsZS4gQW4KICogYWRkaXRpb25hbCBncmFudCBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluCiAqIHRoZSBzYW1lIGRpcmVjdG9yeS4KICovCiFmdW5jdGlvbih0KXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gd3JhcChlLHQscixuKXsKLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuCnZhciBvPXQmJnQucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yP3Q6R2VuZXJhdG9yLGk9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscz1uZXcgQ29udGV4dChufHxbXSk7Ci8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCwKLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLgpyZXR1cm4gaS5faW52b2tlPW1ha2VJbnZva2VNZXRob2QoZSxyLHMpLGl9Ci8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvbgovLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGQKLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlCi8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2UKLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZAovLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nCi8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlCi8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZQovLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoCi8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS4KZnVuY3Rpb24gdHJ5Q2F0Y2goZSx0LHIpe3RyeXtyZXR1cm57dHlwZToibm9ybWFsIixhcmc6ZS5jYWxsKHQscil9fWNhdGNoKGUpe3JldHVybnt0eXBlOiJ0aHJvdyIsYXJnOmV9fX0KLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kCi8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvcgovLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91cgovLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLgpmdW5jdGlvbiBHZW5lcmF0b3IoKXt9ZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKXt9ZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKXt9Ci8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlCi8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuCmZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhlKXtbIm5leHQiLCJ0aHJvdyIsInJldHVybiJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faW52b2tlKHQsZSl9fSl9ZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihlKXtmdW5jdGlvbiBpbnZva2UodCxyLG4saSl7dmFyIHM9dHJ5Q2F0Y2goZVt0XSxlLHIpO2lmKCJ0aHJvdyIhPT1zLnR5cGUpe3ZhciBhPXMuYXJnLHU9YS52YWx1ZTtyZXR1cm4gdSYmIm9iamVjdCI9PXR5cGVvZiB1JiZvLmNhbGwodSwiX19hd2FpdCIpP1Byb21pc2UucmVzb2x2ZSh1Ll9fYXdhaXQpLnRoZW4oZnVuY3Rpb24oZSl7aW52b2tlKCJuZXh0IixlLG4saSl9LGZ1bmN0aW9uKGUpe2ludm9rZSgidGhyb3ciLGUsbixpKX0pOlByb21pc2UucmVzb2x2ZSh1KS50aGVuKGZ1bmN0aW9uKGUpewovLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lcwovLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGUKLy8gY3VycmVudCBpdGVyYXRpb24uIElmIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLCBob3dldmVyLCB0aGUKLy8gcmVzdWx0IGZvciB0aGlzIGl0ZXJhdGlvbiB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIHNhbWUKLy8gcmVhc29uLiBOb3RlIHRoYXQgcmVqZWN0aW9ucyBvZiB5aWVsZGVkIFByb21pc2VzIGFyZSBub3QKLy8gdGhyb3duIGJhY2sgaW50byB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLCBhcyBpcyB0aGUgY2FzZQovLyB3aGVuIGFuIGF3YWl0ZWQgUHJvbWlzZSBpcyByZWplY3RlZC4gVGhpcyBkaWZmZXJlbmNlIGluCi8vIGJlaGF2aW9yIGJldHdlZW4geWllbGQgYW5kIGF3YWl0IGlzIGltcG9ydGFudCwgYmVjYXVzZSBpdAovLyBhbGxvd3MgdGhlIGNvbnN1bWVyIHRvIGRlY2lkZSB3aGF0IHRvIGRvIHdpdGggdGhlIHlpZWxkZWQKLy8gcmVqZWN0aW9uIChzd2FsbG93IGl0IGFuZCBjb250aW51ZSwgbWFudWFsbHkgLnRocm93IGl0IGJhY2sKLy8gaW50byB0aGUgZ2VuZXJhdG9yLCBhYmFuZG9uIGl0ZXJhdGlvbiwgd2hhdGV2ZXIpLiBXaXRoCi8vIGF3YWl0LCBieSBjb250cmFzdCwgdGhlcmUgaXMgbm8gb3Bwb3J0dW5pdHkgdG8gZXhhbWluZSB0aGUKLy8gcmVqZWN0aW9uIHJlYXNvbiBvdXRzaWRlIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIHNvIHRoZQovLyBvbmx5IG9wdGlvbiBpcyB0byB0aHJvdyBpdCBmcm9tIHRoZSBhd2FpdCBleHByZXNzaW9uLCBhbmQKLy8gbGV0IHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24gaGFuZGxlIHRoZSBleGNlcHRpb24uCmEudmFsdWU9ZSxuKGEpfSxpKX1pKHMuYXJnKX1mdW5jdGlvbiBlbnF1ZXVlKGUsdCl7ZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixuKXtpbnZva2UoZSx0LHIsbil9KX0KLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbAovLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSwKLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZgovLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0bwovLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSwKLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG8KLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eQovLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0cwovLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseQovLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZQovLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseQovLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuCi8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyCi8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci4KcmV0dXJuIHI9cj9yLnRoZW4oY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpOmNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCl9Im9iamVjdCI9PXR5cGVvZiB0LnByb2Nlc3MmJnQucHJvY2Vzcy5kb21haW4mJihpbnZva2U9dC5wcm9jZXNzLmRvbWFpbi5iaW5kKGludm9rZSkpO3ZhciByOwovLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LAovLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS4KdGhpcy5faW52b2tlPWVucXVldWV9ZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChlLHQscil7dmFyIG49bDtyZXR1cm4gZnVuY3Rpb24obyxpKXtpZihuPT09cCl0aHJvdyBuZXcgRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmciKTtpZihuPT09eSl7aWYoInRocm93Ij09PW8pdGhyb3cgaTsKLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzoKLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZQpyZXR1cm4gZG9uZVJlc3VsdCgpfWZvcihyLm1ldGhvZD1vLHIuYXJnPWk7Oyl7dmFyIHM9ci5kZWxlZ2F0ZTtpZihzKXt2YXIgYT1tYXliZUludm9rZURlbGVnYXRlKHMscik7aWYoYSl7aWYoYT09PWgpY29udGludWU7cmV0dXJuIGF9fWlmKCJuZXh0Ij09PXIubWV0aG9kKQovLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3MKLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi4Kci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT1sKXRocm93IG49eSxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249cDt2YXIgdT10cnlDYXRjaChlLHQscik7aWYoIm5vcm1hbCI9PT11LnR5cGUpe2lmKAovLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09Ci8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi4Kbj1yLmRvbmU/eTpkLHUuYXJnPT09aCljb250aW51ZTtyZXR1cm57dmFsdWU6dS5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT11LnR5cGUmJihuPXksCi8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGUKLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS4Kci5tZXRob2Q9InRocm93IixyLmFyZz11LmFyZyl9fX0KLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlCi8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGUKLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsCi8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLgpmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGUsdCl7dmFyIG49ZS5pdGVyYXRvclt0Lm1ldGhvZF07aWYobj09PXIpe2lmKAovLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3cKLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC4KdC5kZWxlZ2F0ZT1udWxsLCJ0aHJvdyI9PT10Lm1ldGhvZCl7aWYoZS5pdGVyYXRvci5yZXR1cm4mJigKLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYQovLyBjaGFuY2UgdG8gY2xlYW4gdXAuCnQubWV0aG9kPSJyZXR1cm4iLHQuYXJnPXIsbWF5YmVJbnZva2VEZWxlZ2F0ZShlLHQpLCJ0aHJvdyI9PT10Lm1ldGhvZCkpCi8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tCi8vICJyZXR1cm4iIHRvICJ0aHJvdyIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuCnJldHVybiBoO3QubWV0aG9kPSJ0aHJvdyIsdC5hcmc9bmV3IFR5cGVFcnJvcigiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZCIpfXJldHVybiBofXZhciBvPXRyeUNhdGNoKG4sZS5pdGVyYXRvcix0LmFyZyk7aWYoInRocm93Ij09PW8udHlwZSlyZXR1cm4gdC5tZXRob2Q9InRocm93Iix0LmFyZz1vLmFyZyx0LmRlbGVnYXRlPW51bGwsaDt2YXIgaT1vLmFyZzsKLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnkKLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS4KLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLgovLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgInRocm93IiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlCi8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWYKLy8gY29udGV4dC5tZXRob2Qgd2FzICJuZXh0IiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuCi8vICJjb25zdW1lZCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXMKLy8gInJldHVybiIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlCi8vIG91dGVyIGdlbmVyYXRvci4KLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGgKLy8gdGhlIG91dGVyIGdlbmVyYXRvci4KcmV0dXJuIGk/aS5kb25lPyh0W2UucmVzdWx0TmFtZV09aS52YWx1ZSx0Lm5leHQ9ZS5uZXh0TG9jLCJyZXR1cm4iIT09dC5tZXRob2QmJih0Lm1ldGhvZD0ibmV4dCIsdC5hcmc9ciksdC5kZWxlZ2F0ZT1udWxsLGgpOmk6KHQubWV0aG9kPSJ0aHJvdyIsdC5hcmc9bmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSx0LmRlbGVnYXRlPW51bGwsaCl9ZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGUpe3ZhciB0PXt0cnlMb2M6ZVswXX07MSBpbiBlJiYodC5jYXRjaExvYz1lWzFdKSwyIGluIGUmJih0LmZpbmFsbHlMb2M9ZVsyXSx0LmFmdGVyTG9jPWVbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKHQpfWZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZSl7dmFyIHQ9ZS5jb21wbGV0aW9ufHx7fTt0LnR5cGU9Im5vcm1hbCIsZGVsZXRlIHQuYXJnLGUuY29tcGxldGlvbj10fWZ1bmN0aW9uIENvbnRleHQoZSl7Ci8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaAovLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tCi8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC4KdGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOiJyb290In1dLGUuZm9yRWFjaChwdXNoVHJ5RW50cnksdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gdmFsdWVzKGUpe2lmKGUpe3ZhciB0PWVbc107aWYodClyZXR1cm4gdC5jYWxsKGUpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBlLm5leHQpcmV0dXJuIGU7aWYoIWlzTmFOKGUubGVuZ3RoKSl7dmFyIG49LTEsaT1mdW5jdGlvbiBuZXh0KCl7Zm9yKDsrK248ZS5sZW5ndGg7KWlmKG8uY2FsbChlLG4pKXJldHVybiBuZXh0LnZhbHVlPWVbbl0sbmV4dC5kb25lPSExLG5leHQ7cmV0dXJuIG5leHQudmFsdWU9cixuZXh0LmRvbmU9ITAsbmV4dH07cmV0dXJuIGkubmV4dD1pfX0KLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLgpyZXR1cm57bmV4dDpkb25lUmVzdWx0fX1mdW5jdGlvbiBkb25lUmVzdWx0KCl7cmV0dXJue3ZhbHVlOnIsZG9uZTohMH19dmFyIHIsbj1PYmplY3QucHJvdG90eXBlLG89bi5oYXNPd25Qcm9wZXJ0eSxpPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LHM9aS5pdGVyYXRvcnx8IkBAaXRlcmF0b3IiLGE9aS5hc3luY0l0ZXJhdG9yfHwiQEBhc3luY0l0ZXJhdG9yIix1PWkudG9TdHJpbmdUYWd8fCJAQHRvU3RyaW5nVGFnIixjPSJvYmplY3QiPT10eXBlb2YgZSxmPXQucmVnZW5lcmF0b3JSdW50aW1lO2lmKGYpCi8vIERvbid0IGJvdGhlciBldmFsdWF0aW5nIHRoZSByZXN0IG9mIHRoaXMgZmlsZSBpZiB0aGUgcnVudGltZSB3YXMKLy8gYWxyZWFkeSBkZWZpbmVkIGdsb2JhbGx5LgovLyBJZiByZWdlbmVyYXRvclJ1bnRpbWUgaXMgZGVmaW5lZCBnbG9iYWxseSBhbmQgd2UncmUgaW4gYSBtb2R1bGUsCi8vIG1ha2UgdGhlIGV4cG9ydHMgb2JqZWN0IGlkZW50aWNhbCB0byByZWdlbmVyYXRvclJ1bnRpbWUuCnJldHVybiB2b2lkKGMmJihlLmV4cG9ydHM9ZikpOwovLyBEZWZpbmUgdGhlIHJ1bnRpbWUgZ2xvYmFsbHkgKGFzIGV4cGVjdGVkIGJ5IGdlbmVyYXRlZCBjb2RlKSBhcyBlaXRoZXIKLy8gbW9kdWxlLmV4cG9ydHMgKGlmIHdlJ3JlIGluIGEgbW9kdWxlKSBvciBhIG5ldywgZW1wdHkgb2JqZWN0LgpmPXQucmVnZW5lcmF0b3JSdW50aW1lPWM/ZS5leHBvcnRzOnt9LGYud3JhcD13cmFwO3ZhciBsPSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLHA9ImV4ZWN1dGluZyIseT0iY29tcGxldGVkIixoPXt9LHY9e307dltzXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt2YXIgZz1PYmplY3QuZ2V0UHJvdG90eXBlT2YsYj1nJiZnKGcodmFsdWVzKFtdKSkpO2ImJmIhPT1uJiZvLmNhbGwoYixzKSYmKAovLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZAovLyBvZiB0aGUgcG9seWZpbGwuCnY9Yik7dmFyIF89R2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlPUdlbmVyYXRvci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh2KTtHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGU9Xy5jb25zdHJ1Y3Rvcj1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1HZW5lcmF0b3JGdW5jdGlvbixHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt1XT1HZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZT0iR2VuZXJhdG9yRnVuY3Rpb24iLGYuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZS5jb25zdHJ1Y3RvcjsKLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhbgovLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuCnJldHVybiEhdCYmKHQ9PT1HZW5lcmF0b3JGdW5jdGlvbnx8IkdlbmVyYXRvckZ1bmN0aW9uIj09PSh0LmRpc3BsYXlOYW1lfHx0Lm5hbWUpKX0sZi5tYXJrPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpOihlLl9fcHJvdG9fXz1HZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSx1IGluIGV8fChlW3VdPSJHZW5lcmF0b3JGdW5jdGlvbiIpKSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKF8pLGV9LAovLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG8KLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3QKLy8gYGhhc093bi5jYWxsKHZhbHVlLCAiX19hd2FpdCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXMKLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC4KZi5hd3JhcD1mdW5jdGlvbihlKXtyZXR1cm57X19hd2FpdDplfX0sZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKSxBc3luY0l0ZXJhdG9yLnByb3RvdHlwZVthXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxmLkFzeW5jSXRlcmF0b3I9QXN5bmNJdGVyYXRvciwKLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZgovLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2YKLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuCmYuYXN5bmM9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89bmV3IEFzeW5jSXRlcmF0b3Iod3JhcChlLHQscixuKSk7cmV0dXJuIGYuaXNHZW5lcmF0b3JGdW5jdGlvbih0KT9vOm8ubmV4dCgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZG9uZT9lLnZhbHVlOm8ubmV4dCgpfSl9LAovLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZQovLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuCmRlZmluZUl0ZXJhdG9yTWV0aG9kcyhfKSxfW3VdPSJHZW5lcmF0b3IiLAovLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZQovLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZQovLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvcgovLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi4KLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuCl9bc109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sXy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IEdlbmVyYXRvcl0ifSxmLmtleXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpdC5wdXNoKHIpOwovLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcAovLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLgpyZXR1cm4gdC5yZXZlcnNlKCksZnVuY3Rpb24gbmV4dCgpe2Zvcig7dC5sZW5ndGg7KXt2YXIgcj10LnBvcCgpO2lmKHIgaW4gZSlyZXR1cm4gbmV4dC52YWx1ZT1yLG5leHQuZG9uZT0hMSxuZXh0fQovLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWUKLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXMKLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uCnJldHVybiBuZXh0LmRvbmU9ITAsbmV4dH19LGYudmFsdWVzPXZhbHVlcyxDb250ZXh0LnByb3RvdHlwZT17Y29uc3RydWN0b3I6Q29udGV4dCxyZXNldDpmdW5jdGlvbihlKXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCwKLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3MKLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi4KdGhpcy5zZW50PXRoaXMuX3NlbnQ9cix0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLmFyZz1yLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpLCFlKWZvcih2YXIgdCBpbiB0aGlzKQovLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOgoidCI9PT10LmNoYXJBdCgwKSYmby5jYWxsKHRoaXMsdCkmJiFpc05hTigrdC5zbGljZSgxKSkmJih0aGlzW3RdPXIpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciBlPXRoaXMudHJ5RW50cmllc1swXSx0PWUuY29tcGxldGlvbjtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIGhhbmRsZShuLG8pewovLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLAovLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LgpyZXR1cm4gcy50eXBlPSJ0aHJvdyIscy5hcmc9ZSx0Lm5leHQ9bixvJiYodC5tZXRob2Q9Im5leHQiLHQuYXJnPXIpLCEhb31pZih0aGlzLmRvbmUpdGhyb3cgZTtmb3IodmFyIHQ9dGhpcyxuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIGk9dGhpcy50cnlFbnRyaWVzW25dLHM9aS5jb21wbGV0aW9uO2lmKCJyb290Ij09PWkudHJ5TG9jKQovLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZQovLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG8KLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi4KcmV0dXJuIGhhbmRsZSgiZW5kIik7aWYoaS50cnlMb2M8PXRoaXMucHJldil7dmFyIGE9by5jYWxsKGksImNhdGNoTG9jIiksdT1vLmNhbGwoaSwiZmluYWxseUxvYyIpO2lmKGEmJnUpe2lmKHRoaXMucHJldjxpLmNhdGNoTG9jKXJldHVybiBoYW5kbGUoaS5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PGkuZmluYWxseUxvYylyZXR1cm4gaGFuZGxlKGkuZmluYWxseUxvYyl9ZWxzZSBpZihhKXtpZih0aGlzLnByZXY8aS5jYXRjaExvYylyZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsITApfWVsc2V7aWYoIXUpdGhyb3cgbmV3IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpO2lmKHRoaXMucHJldjxpLmZpbmFsbHlMb2MpcmV0dXJuIGhhbmRsZShpLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgbj10aGlzLnRyeUVudHJpZXNbcl07aWYobi50cnlMb2M8PXRoaXMucHJldiYmby5jYWxsKG4sImZpbmFsbHlMb2MiKSYmdGhpcy5wcmV2PG4uZmluYWxseUxvYyl7dmFyIGk9bjticmVha319aSYmKCJicmVhayI9PT1lfHwiY29udGludWUiPT09ZSkmJmkudHJ5TG9jPD10JiZ0PD1pLmZpbmFsbHlMb2MmJigKLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYQovLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suCmk9bnVsbCk7dmFyIHM9aT9pLmNvbXBsZXRpb246e307cmV0dXJuIHMudHlwZT1lLHMuYXJnPXQsaT8odGhpcy5tZXRob2Q9Im5leHQiLHRoaXMubmV4dD1pLmZpbmFsbHlMb2MsaCk6dGhpcy5jb21wbGV0ZShzKX0sY29tcGxldGU6ZnVuY3Rpb24oZSx0KXtpZigidGhyb3ciPT09ZS50eXBlKXRocm93IGUuYXJnO3JldHVybiJicmVhayI9PT1lLnR5cGV8fCJjb250aW51ZSI9PT1lLnR5cGU/dGhpcy5uZXh0PWUuYXJnOiJyZXR1cm4iPT09ZS50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9ZS5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PWUudHlwZSYmdCYmKHRoaXMubmV4dD10KSxofSxmaW5pc2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTt0Pj0wOy0tdCl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW3RdO2lmKHIuZmluYWxseUxvYz09PWUpcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLHIuYWZ0ZXJMb2MpLHJlc2V0VHJ5RW50cnkociksaH19LGNhdGNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciByPXRoaXMudHJ5RW50cmllc1t0XTtpZihyLnRyeUxvYz09PWUpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgbz1uLmFyZztyZXNldFRyeUVudHJ5KHIpfXJldHVybiBvfX0KLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uCi8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay4KdGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbihlLHQsbil7Ci8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0Ci8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS4KcmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOnZhbHVlcyhlKSxyZXN1bHROYW1lOnQsbmV4dExvYzpufSwibmV4dCI9PT10aGlzLm1ldGhvZCYmKHRoaXMuYXJnPXIpLGh9fX0oCi8vIEFtb25nIHRoZSB2YXJpb3VzIHRyaWNrcyBmb3Igb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwKLy8gb2JqZWN0LCB0aGlzIHNlZW1zIHRvIGJlIHRoZSBtb3N0IHJlbGlhYmxlIHRlY2huaXF1ZSB0aGF0IGRvZXMgbm90Ci8vIHVzZSBpbmRpcmVjdCBldmFsICh3aGljaCB2aW9sYXRlcyBDb250ZW50IFNlY3VyaXR5IFBvbGljeSkuCiJvYmplY3QiPT10eXBlb2YgdD90OiJvYmplY3QiPT10eXBlb2Ygd2luZG93P3dpbmRvdzoib2JqZWN0Ij09dHlwZW9mIHNlbGY/c2VsZjp0aGlzKX0pLmNhbGwodCxyKDE0NykpfSwvKiA0MTIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDEzKSxlLmV4cG9ydHM9cigyNykuUmVnRXhwLmVzY2FwZX0sLyogNDEzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gaHR0cHM6Ly9naXRodWIuY29tL2JlbmphbWluZ3IvUmV4RXhwLmVzY2FwZQp2YXIgbj1yKDApLG89cig0MTQpKC9bXFxeJCorPy4oKXxbXF17fV0vZywiXFwkJiIpO24obi5TLCJSZWdFeHAiLHtlc2NhcGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9fSl9LC8qIDQxNCAqLwovKioqLwpmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciByPXQ9PT1PYmplY3QodCk/ZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19OnQ7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBTdHJpbmcodCkucmVwbGFjZShlLHIpfX19LC8qIDQxNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDMxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoOTcpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigyKSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDIwMCkseT1yKDcpLGg9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fSh5KSx2PXIoNDQzKSxnPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodiksYj1yKDQ3MiksXz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGIpLG09cig0NzgpLFI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChtKSx3PXIoNDc5KSxTPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQodyksaz1yKDQ5MCksTz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGspLFA9cigxNCksTT1yKDEwMCksTD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KE0pLHg9cigxMDEpLEE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh4KSxEPXIoNDk0KSxVPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoRCksaj1yKDQ5NSksRT1yKDQ5NiksST1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEUpLEM9cigxNDQpLFQ9cig0OTcpLHE9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChUKSxIPXIoOTkpLEY9cig0OTgpLE49X2ludGVyb3BSZXF1aXJlRGVmYXVsdChGKSxCPXIoNTAwKSxHPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoQiksSz1yKDUwMSksVj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KEspLFc9cig1MDUpLFk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChXKSx6PXIoNTA4KSxKPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoeiksWj1yKDUxNCksUT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFopLCQ9cig1MTYpLFg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCgkKSxlZT1oLmdldExvZ2dlcigiUnVudGltZVVBIiksdGU9ZnVuY3Rpb24oKXsvKioKICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgUnVudGltZSBVc2VyIEFnZW50CiAgICogQHBhcmFtIHtkZXNjcmlwdG9yfSBydW50aW1lRGVzY3JpcHRvciAtIHBhc3MgYWxsIHRoZSBoeXBlcnR5IHJ1bnRpbWUgZGVzY3JpcHRvcgogICAqIEBwYXJhbSB7cnVudGltZUZhY3Rvcnl9IHJ1bnRpbWVGYWN0b3J5IC0gU3BlY2lmaWMgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBlbnZpcm9ubWVudCB3aGVyZSB0aGUgY29yZSBydW50aW1lIHdpbGwgcnVuOwogICAqIEBwYXJhbSB7ZG9tYWlufSBkb21haW5VUkwgLSBzcGVjaWZ5IHRoZSBkb21haW4gYmFzZSBmb3IgdGhlIHJ1bnRpbWU7CiAgICovCmZ1bmN0aW9uIFJ1bnRpbWVVQShlLHQscil7aWYoKDAsZi5kZWZhdWx0KSh0aGlzLFJ1bnRpbWVVQSksIWUpdGhyb3cgbmV3IEVycm9yKCJUaGUgcnVudGltZSBkZXNjcmlwdG9yIGlzIGEgbmVlZGVkIHBhcmFtZXRlciIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiVGhlIHNhbmRib3ggZmFjdG9yeSBpcyBhIG5lZWRlZCBwYXJhbWV0ZXIiKTtpZighcil0aHJvdyBuZXcgRXJyb3IoIllvdSBuZWVkIHRoZSBkb21haW4gb2YgcnVudGltZSIpO2lmKAovLyBDb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIGluZm9ybWF0aW9uIHJlbGF0ZWQgd2l0aCBzZXJ2ZXJzCnRoaXMucnVudGltZUNvbmZpZ3VyYXRpb249KDAsdS5kZWZhdWx0KSh7ZG9tYWluOnJ9LEMucnVudGltZUNvbmZpZ3VyYXRpb24pLHRoaXMucnVudGltZUZhY3Rvcnk9dCx0aGlzLmxvZz1lZSx0aGlzLmxvZ0xldmVscz1wLmxvZyxlLnAycEhhbmRsZXJTdHViJiYic3RyaW5nIj09dHlwZW9mIGUucDJwSGFuZGxlclN0dWImJmUucDJwSGFuZGxlclN0dWIuaW5jbHVkZXMoIjovLyIpP3RoaXMucDJwPSEwOnRoaXMucDJwPSExLEgucnVudGltZVV0aWxzLnJ1bnRpbWVEZXNjcmlwdG9yPWUsdGhpcy5ydW50aW1lVXRpbHM9SC5ydW50aW1lVXRpbHMsdGhpcy5zdG9yYWdlcz17fSwiZnVuY3Rpb24iIT10eXBlb2YgdC5jcmVhdGVSdW50aW1lQ2F0YWxvZ3VlKXRocm93IG5ldyBFcnJvcigiQ2hlY2sgeW91ciBSdW50aW1lIEZhY3RvcnkgYmVjYXVzZSBpdCBuZWVkcyB0aGUgUnVudGltZSBDYXRhbG9ndWUgaW1wbGVtZW50YXRpb24iKTtpZih0aGlzLnJ1bnRpbWVDYXRhbG9ndWU9dC5jcmVhdGVSdW50aW1lQ2F0YWxvZ3VlKCksImZ1bmN0aW9uIiE9dHlwZW9mIHQucGVyc2lzdGVuY2VNYW5hZ2VyKXRocm93IG5ldyBFcnJvcigiQ2hlY2sgeW91ciBSdW50aW1lIEZhY3RvcnkgYmVjYXVzZSBpdCBuZWVkcyB0aGUgUGVyc2lzdGVuY2UgTWFuYWdlciBpbXBsZW1lbnRhdGlvbiIpO2lmKHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyPXQucGVyc2lzdGVuY2VNYW5hZ2VyKCksImZ1bmN0aW9uIiE9dHlwZW9mIHQuc3RvcmFnZU1hbmFnZXIpdGhyb3cgbmV3IEVycm9yKCJDaGVjayB5b3VyIFJ1bnRpbWUgRmFjdG9yeSBiZWNhdXNlIGl0IG5lZWRzIHRoZSBTdG9yYWdlIE1hbmFnZXIgaW1wbGVtZW50YXRpb24iKTt0aGlzLnN0b3JhZ2VzPSgwLGouc3RvcmFnZSkodCksImZ1bmN0aW9uIj09dHlwZW9mIHQucnVudGltZUNhcGFiaWxpdGllcz90aGlzLnJ1bnRpbWVDYXBhYmlsaXRpZXM9dC5ydW50aW1lQ2FwYWJpbGl0aWVzKHRoaXMuc3RvcmFnZXMuY2FwYWJpbGl0aWVzKTplZS5pbmZvKCJDaGVjayB5b3VyIFJ1bnRpbWVGYWN0b3J5IGJlY2F1c2UgaXQgbmVlZHMgdGhlIFJ1bnRpbWUgQ2FwYWJpbGl0aWVzIGltcGxlbWVudGF0aW9uIil9LyoqCiAgICogSW50aWFsaXplIHRoZSBpbnN0YWxsYXRpb24gb2YgcnVudGltZQogICAqCiAgICogQGFjY2VzcyBwdWJsaWMKICAgKiBAcmV0dXJuIHtQcm9taXNlPEJvb2xlYW4sIEVycm9yPn0gdGhpcyBpcyBQcm9taXNlIGFuZCBpZiB0aGUgaW5zdGFsbGF0aW9uIHByb2Nlc3MgaGFwcGVuZWQgd2l0aG91dCBhbnkgcHJvYmxlbXMgcmV0dXJucyB0cnVlIG90aGVyd2lzZSB0aGUgZXJyb3IuCiAgICoKICAgKiBAbWVtYmVyT2YgUnVudGltZVVBCiAgICovCnJldHVybigwLGQuZGVmYXVsdCkoUnVudGltZVVBLFt7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtlLmRvbWFpbj1lLnJ1bnRpbWVDb25maWd1cmF0aW9uLmRvbWFpbjt0cnl7dmFyIG49ZS5ydW50aW1lQ2FwYWJpbGl0aWVzLmdldFJ1bnRpbWVDYXBhYmlsaXRpZXMoKSxvPWUuc3RvcmFnZXMucnVudGltZS5nZXQoInJ1bnRpbWU6VVJMIiksaT1lLnN0b3JhZ2VzLnN5bmNoZXJNYW5hZ2VyLmdldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIpLGE9ZS5zdG9yYWdlcy5oeXBlcnR5UmVzb3VyY2VzLmdldCgpLGM9ZS5zdG9yYWdlcy5ydW50aW1lLmdldCgicDJwSGFuZGxlcjpVUkwiKTtzLmRlZmF1bHQuYWxsKFtvLG4saSxhLGNdKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLnJ1bnRpbWVVUkw9dFswXT90WzBdLnJ1bnRpbWVVUkw6dFswXSxlLnJ1bnRpbWVVUkx8fChlLnJ1bnRpbWVVUkw9InJ1bnRpbWU6Ly8iK2UuZG9tYWluKyIvIisoMCxQLmdlbmVyYXRlR1VJRCkoKSxlLnN0b3JhZ2VzLnJ1bnRpbWUuc2V0KCJydW50aW1lOlVSTCIsMSx7cnVudGltZVVSTDplLnJ1bnRpbWVVUkx9KSksZS5jYXBhYmlsaXRpZXM9dFsxXSwoMCx1LmRlZmF1bHQpKEgucnVudGltZVV0aWxzLnJ1bnRpbWVDYXBhYmlsaXRpZXMuY29uc3RyYWludHMsdFsxXSksZS5fZGF0YU9iamVjdHNTdG9yYWdlPW5ldyBWLmRlZmF1bHQoZS5zdG9yYWdlcy5zeW5jaGVyTWFuYWdlcix0WzJdfHx7fSksZS5faHlwZXJ0eVJlc291cmNlcz10WzNdfHx7fSxlLnAycEhhbmRsZXJVUkw9dFs0XT90WzRdLnAycEhhbmRsZXJVUkw6dFs0XSxlLnAycEhhbmRsZXJVUkx8fChlLnAycEhhbmRsZXJVUkw9ZS5ydW50aW1lVVJMKyIvcDJwaGFuZGxlci8iKygwLFAuZ2VuZXJhdGVHVUlEKSgpLGVlLmluZm8oIltSdW50aW1lVUEgLSBpbml0XSBQMlBIYW5kbGVyVVJMOiAiLGUucDJwSGFuZGxlclVSTCksZS5zdG9yYWdlcy5ydW50aW1lLnNldCgicDJwSGFuZGxlcjpVUkwiLDEse3AycEhhbmRsZXJVUkw6ZS5wMnBIYW5kbGVyVVJMfSkpLGUuX2xvYWRDb21wb25lbnRzKCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9oeXBlcnR5UmVzb3VyY2VzU3RvcmFnZT1uZXcgWS5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5zdG9yYWdlcy5oeXBlcnR5UmVzb3VyY2VzLGUuX2h5cGVydHlSZXNvdXJjZXMpLGUucDJwPyhlZS5pbmZvKCJbUnVudGltZVVBIC0gaW5pdF0gbG9hZCBwMnBIYW5kbGVyOiAiLHQpLGUuX2xvYWRQMlBIYW5kbGVyKCkpOihlZS5pbmZvKCJbUnVudGltZVVBIC0gaW5pdF0gUDJQIG5vdCBzdXBwb3J0ZWQiKSwiUDJQIE5vdCBTdXBwb3J0ZWQiKX0pLnRoZW4oZnVuY3Rpb24oZSl7ZWUuaW5mbygiW3J1bnRpbWUgdWEgLSBpbml0XSAtIHN0YXR1czogIixlKSx0KCEwKX0sZnVuY3Rpb24oZSl7ZWUuZXJyb3IoIkVSUk9SOiAiLGUpLHQoITApfSl9Y2F0Y2goZSl7cihlKX19KX19LHtrZXk6Il9sb2FkUDJQSGFuZGxlciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHQpe3ZhciByPUgucnVudGltZVV0aWxzLnJ1bnRpbWVEZXNjcmlwdG9yLG49ci5wMnBIYW5kbGVyU3R1YixvPXtpc0hhbmRsZXJTdHViOiEwLHJ1bnRpbWVVUkw6ZS5ydW50aW1lVVJMfTtlZS5sb2coIltSdW50aW1lVUEgbG9hZFAyUEhhbmRsZXJdIFAyUFN0dWJIYW5kbGVyOiAiLG4pLGUubG9hZGVyLmxvYWRTdHViKG4sbykudGhlbihmdW5jdGlvbihyKXt2YXIgbj1lLnJ1bnRpbWVVUkwrIi91YSIsbz17dHlwZToic3Vic2NyaWJlIixmcm9tOm4sdG86ImRvbWFpbjovL21zZy1ub2RlLiIrZS5kb21haW4rIi9zbSIsYm9keTp7c3Vic2NyaWJlOltyLnVybF0sc291cmNlOmUucnVudGltZVVSTH19O2UubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihuLGZ1bmN0aW9uKGUpe2VlLmxvZygiW3J1bnRpbWUgdWEgLSBsaXN0ZW5lcl0gLSByZWNlaXZlIG1zZzogIixlKX0pLGUubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvLGZ1bmN0aW9uKGUpe2VlLmxvZygiW3J1bnRpbWUgdWEgLSBwb3N0TWVzc2FnZV0gLSByZXBseTogIixlKX0pLGVlLmluZm8oIltydW50aW1lIHVhIC0gcDJwIGluc3RhbGxhdGlvbl0gLSBzdWNjZXNzOiAiLHIpLHQoITApfSkuY2F0Y2goZnVuY3Rpb24oZSl7ZWUuaW5mbygiW3J1bnRpbWUgdWEgLSBwMnAgaW5zdGFsbGF0aW9uXSAtIGZhaWw6ICIsZSksdCghMSl9KX0pfX0se2tleToiX2xvYWRDb21wb25lbnRzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24odCxyKXt0cnl7Ci8vIFByZXBhcmUgdGhlIG9uIGluc3RhbmNlIHRvIGhhbmRsZSB3aXRoIHRoZSBmYWxsYmFja3MgYW5kIHJ1bnRpbWVDYXRhbG9ndWU7CmUuZGVzY3JpcHRvckluc3RhbmNlPW5ldyBJLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUucnVudGltZUNhdGFsb2d1ZSxlLnJ1bnRpbWVDb25maWd1cmF0aW9uKSwKLy8gUHJlcGFyZSB0aGUgbG9hZGVyIHRvIGxvYWQgdGhlIGh5cGVydGllcywgcHJvdG9zdHVicyBhbmQgaWRwcHJveHk7CmUubG9hZGVyPW5ldyBVLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUucnVudGltZUNvbmZpZ3VyYXRpb24sZS5kZXNjcmlwdG9ySW5zdGFuY2UpLAovLyBJbnN0YW50aWF0ZSB0aGUgaWRlbnRpdHkgTW9kdWxlCmUuaWRlbnRpdHlNb2R1bGU9bmV3IF8uZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5ydW50aW1lQ2FwYWJpbGl0aWVzLGUuc3RvcmFnZXMuaWRlbnRpdHksZS5fZGF0YU9iamVjdHNTdG9yYWdlLEEuZGVmYXVsdCxlLnJ1bnRpbWVDYXRhbG9ndWUpOwovLyBVc2UgdGhlIHNhbmRib3ggZmFjdG9yeSB0byBjcmVhdGUgYW4gQXBwU2FuZGJveDsKLy8gSW4gdGhlIGZ1dHVyZSBjYW4gYmUgZGVjaWRlZCBieSBwb2xpY3lFbmdpbmUgaWYgd2UgbmVlZAovLyBjcmVhdGUgYSBBcHBTYW5kYm94IG9yIG5vdDsKdmFyIG49ZS5ydW50aW1lRmFjdG9yeS5jcmVhdGVBcHBTYW5kYm94KCk7Ci8vIEluc3RhbnRpYXRlIHRoZSBSZWdpc3RyeSBNb2R1bGUKZS5yZWdpc3RyeT1uZXcgZy5kZWZhdWx0KGUucnVudGltZVVSTCxuLGUuaWRlbnRpdHlNb2R1bGUsZS5ydW50aW1lQ2F0YWxvZ3VlLGUucnVudGltZUNhcGFiaWxpdGllcyxlLnN0b3JhZ2VzLnJlZ2lzdHJ5LGUucDJwSGFuZGxlclVSTCksCi8vIFNldCB0aGUgbG9hZGVyIHRvIGxvYWQgSHlwZXJ0aWVzLCBTdHVicyBhbmQgSWRwUHJveGllcwplLnJlZ2lzdHJ5LmxvYWRlcj1lLmxvYWRlciwKLy8gSW5zdGFudGlhdGUgdGhlIE1lc3NhZ2UgQnVzCmUubWVzc2FnZUJ1cz1uZXcgTy5kZWZhdWx0KGUucmVnaXN0cnkpLAovLyBQcmVwYXJlIHRoZSBhZGRyZXNzIGFsbG9jYXRpb24gaW5zdGFuY2U7CmUuYWRkcmVzc0FsbG9jYXRpb249bmV3IEwuZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5tZXNzYWdlQnVzLGUucmVnaXN0cnkpLAovLyBJbnN0YW50aWF0ZSB0aGUgUG9saWN5IEVuZ2luZQplLnBvbGljeUVuZ2luZT1uZXcgUy5kZWZhdWx0KG5ldyBYLmRlZmF1bHQoZS5ydW50aW1lVVJMLGUuaWRlbnRpdHlNb2R1bGUsZS5yZWdpc3RyeSxlLnN0b3JhZ2VzLnBvbGljeSxlLnJ1bnRpbWVDYXBhYmlsaXRpZXMpKSwKLy8gSW5zdGFudGlhdGUgRGlzY292ZXJ5CmUuY29yZURpc2NvdmVyeT1uZXcgRy5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5ncmFwaENvbm5lY3RvcixlLnJ1bnRpbWVGYWN0b3J5LGUucmVnaXN0cnkpLAovLyBJbnN0YW50aWF0ZSB0aGUgSWRlbnRpdHlNYW5hZ2VyCmUuaWRlbnRpdHlNYW5hZ2VyPW5ldyBSLmRlZmF1bHQoZS5pZGVudGl0eU1vZHVsZSksCi8vIGluaXRpYWxpc2UgdGhlIENyeXB0b01hbmFnZXIKQS5kZWZhdWx0LmluaXQoZS5ydW50aW1lVVJMLGUucnVudGltZUNhcGFiaWxpdGllcyxlLnN0b3JhZ2VzLmNyeXB0b01hbmFnZXIsZS5fZGF0YU9iamVjdHNTdG9yYWdlLGUucmVnaXN0cnksZS5jb3JlRGlzY292ZXJ5LGUuaWRlbnRpdHlNb2R1bGUsZS5ydW50aW1lRmFjdG9yeSksCi8vIEluc3RhbnRpYXRlIHRoZSBHcmFwaCBDb25uZWN0b3IKZS5ncmFwaENvbm5lY3Rvcj1uZXcgTi5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5zdG9yYWdlTWFuYWdlciksZS5oYW5kbGVycz1uZXcgcS5kZWZhdWx0KGUucG9saWN5RW5naW5lLGUuaWRlbnRpdHlNYW5hZ2VyLEEuZGVmYXVsdCksZS5tZXNzYWdlQnVzLnBpcGVsaW5lT3V0LmhhbmRsZXJzPVtlLmhhbmRsZXJzLmlkbUhhbmRsZXIsZS5oYW5kbGVycy5wZXBPdXRIYW5kbGVyLGUuaGFuZGxlcnMuZW5jcnlwdEhhbmRsZXJdLGUubWVzc2FnZUJ1cy5waXBlbGluZUluLmhhbmRsZXJzPVtlLmhhbmRsZXJzLmRlY3J5cHRIYW5kbGVyLGUuaGFuZGxlcnMucGVwSW5IYW5kbGVyXSwKLy8gQWRkIHRvIEFwcCBTYW5kYm94IHRoZSBsaXN0ZW5lcjsKbi5hZGRMaXN0ZW5lcigiKiIsZnVuY3Rpb24odCl7ZS5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHQpfSksQS5kZWZhdWx0Lm1lc3NhZ2VCdXM9ZS5tZXNzYWdlQnVzLAovLyBSZWdpc3RlciBtZXNzYWdlQnVzIG9uIFJlZ2lzdHJ5CmUucmVnaXN0cnkubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIFBvbGljeSBFbmdpbmUKZS5wb2xpY3lFbmdpbmUubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIFJlZ2lzdGVyIG1lc3NhZ2VCdXMgb24gSURNCmUuaWRlbnRpdHlNb2R1bGUubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIFJlZ2lzdGVyIHJlZ2lzdHJ5IG9uIElkZW50aXR5TW9kdWxlCmUuaWRlbnRpdHlNb2R1bGUucmVnaXN0cnk9ZS5yZWdpc3RyeSwKLy8gUmVnaXN0ZXIgY29yZURpc2NvdmVyeSBvbiBJZGVudGl0eU1vZHVsZQplLmlkZW50aXR5TW9kdWxlLmNvcmVEaXNjb3Zlcnk9ZS5jb3JlRGlzY292ZXJ5LAovLyBVc2Ugc2FuZGJveCBmYWN0b3J5IHRvIHVzZSBzcGVjaWZpYyBtZXRob2RzCi8vIGFuZCBzZXQgdGhlIG1lc3NhZ2UgYnVzIHRvIHRoZSBmYWN0b3J5CmUucnVudGltZUZhY3RvcnkubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsCi8vIEluc3RhbmNpYXRlIHRoZSBTeW5jaGVyTWFuYWdlcjsKZS5zeW5jaGVyTWFuYWdlcj1uZXcgSi5kZWZhdWx0KGUucnVudGltZVVSTCxlLm1lc3NhZ2VCdXMsZS5yZWdpc3RyeSxlLnJ1bnRpbWVDYXRhbG9ndWUsZS5zdG9yYWdlcy5zeW5jaGVyTWFuYWdlcixudWxsLGUuX2RhdGFPYmplY3RzU3RvcmFnZSxlLmlkZW50aXR5TW9kdWxlKSwKLy8gU2V0IGludG8gbG9hZGVyIHRoZSBuZWVkZWQgY29tcG9uZW50czsKZS5sb2FkZXIucnVudGltZVVSTD1lLnJ1bnRpbWVVUkwsZS5sb2FkZXIubWVzc2FnZUJ1cz1lLm1lc3NhZ2VCdXMsZS5sb2FkZXIucmVnaXN0cnk9ZS5yZWdpc3RyeSxlLmxvYWRlci5ydW50aW1lQ2F0YWxvZ3VlPWUucnVudGltZUNhdGFsb2d1ZSxlLmxvYWRlci5ydW50aW1lRmFjdG9yeT1lLnJ1bnRpbWVGYWN0b3J5LAovL0luc3RhbnRpYXRlIERpc2NvdmVyeSBMaWIgZm9yIG5vdGlmaWNhdGlvbiB0ZXN0aW5nCi8vIHRoaXMuZGlzY292ZXJ5ID0gbmV3IERpc2NvdmVyeSgiaHlwZXJ0eTovL2xvY2FsaG9zdC90ZXN0IiwgdGhpcy5ydW50aW1lVVJMLCB0aGlzLm1lc3NhZ2VCdXMpOwovLyB0aGlzLmxvYWRTdHViKCJsb2NhbGhvc3QiKTsKLy8gc2V0VGltZW91dCgoKSA9PiB7Ci8vICAgdGhpcy5kaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNETygidXNlcjovL2dvb2dsZS5jb20vb3BlbmlkdGVzdDIwQGdtYWlsLmNvbSIpCi8vICAgLnRoZW4oaHlwZXJ0aWVzID0+IHsKLy8gICAgIGh5cGVydGllcy5mb3JFYWNoKGh5cGVydHkgPT57Ci8vICAgICAgIGh5cGVydHkub25MaXZlKCgpID0+IGxvZy5sb2coYE5vdGlmaWNhdGlvbiBmcm9tICR7aHlwZXJ0eS5kYXRhLmh5cGVydHlJRH0gY2hhbmdlZCB0byBsaXZlYCkpOwovLyAgICAgICBoeXBlcnR5Lm9uRGlzY29ubmVjdGVkKCgpID0+IGxvZy5sb2coYE5vdGlmaWNhdGlvbiBmcm9tICR7aHlwZXJ0eS5kYXRhLmh5cGVydHlJRH0gY2hhbmdlZCB0byBkaXNjb25uZWN0ZWRgKSk7Ci8vICAgICB9KTsKLy8gICB9KTsKLy8gfSwgMjAwMCk7Ci8vIEluc3RhbmNpYXRlIHRoZSBTdWJzY3JpcHRpb25NYW5hZ2VyOwplLnN1YnNjcmlwdGlvbk1hbmFnZXI9bmV3IFEuZGVmYXVsdChlLnJ1bnRpbWVVUkwsZS5tZXNzYWdlQnVzLGUuc3RvcmFnZXMuc3Vic2NyaXB0aW9ucyk7Ci8vIHRoaXMuc3Vic2NyaXB0aW9uTWFuYWdlci5pbml0KCkudGhlbigoKT0+ewovLyAgIHJlc29sdmUodHJ1ZSk7Ci8vIH0pOwp2YXIgbz1bXTtvLnB1c2goZS5zdWJzY3JpcHRpb25NYW5hZ2VyLmluaXQoKSksby5wdXNoKGUuaWRlbnRpdHlNb2R1bGUuaW5pdCgpKSxvLnB1c2goQS5kZWZhdWx0LmxvYWRTZXNzaW9uS2V5cygpKSxzLmRlZmF1bHQuYWxsKG8pLnRoZW4oZnVuY3Rpb24oZSl7Mz09PWUubGVuZ3RoP3QoITApOnIoIltSdW50aW1lVUEuX2xvYWRDb21wb25lbnRzXSBFcnJvciBdICIsZSl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyBFcnJvcihlKX0pfWNhdGNoKGUpe3IoZSl9fSl9fSx7a2V5OiJsb2FkSHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxyPWFyZ3VtZW50c1syXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkh5cGVydHkgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiB0aGlzLmxvYWRlci5sb2FkSHlwZXJ0eShlLHQscil9fSx7a2V5OiJsb2FkU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQcm90b1N0dWIgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiB0aGlzLmxvYWRlci5sb2FkU3R1YihlKX19LHtrZXk6ImxvYWRJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoZWUubG9nKCJpcGRQcm94eUNhdGFsb2d1ZVVSTCIsZSksIWUpdGhyb3cgbmV3IEVycm9yKCJUaGUgSURQIFByb3h5IFVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXIsIGNvdWxkIGJlIGEgRE9NQUlOIG9yIGEgVVJMIik7cmV0dXJuIHRoaXMubG9hZGVyLmxvYWRJZHBQcm94eShlKX19LHtrZXk6ImNsb3NlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiEwPT09ZSYmdGhpcy5pZGVudGl0eU1hbmFnZXIucmVzZXQoKSxlZS5pbmZvKCJVbnJlZ2lzdGVyIGFsbCBoeXBlcnRpZXMiKSxuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKGUscil7dC5yZWdpc3RyeS51bnJlZ2lzdGVyQWxsSHlwZXJ0aWVzKCkudGhlbihmdW5jdGlvbih0KXtlZS5pbmZvKCJBbGwgdGhlIGh5cGVydGllcyBhcmUgdW5yZWdpc3RlZCB3aXRoIFN1Y2Nlc3M6Iix0KSxlKCEwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2VlLmVycm9yKCJGYWlsZWQgdG8gdW5yZWdpc3RlciB0aGUgaHlwZXJ0aWVzIixlKSxyKCExKX0pfSl9fSx7a2V5OiJyZXNldCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9W107cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXsKLy9UT0RPOiBkZWxlZ2F0ZSBkYiByZXNldCBvcGVyYXRpb24gdG8gZWFjaCBjb21wb25lbnQKLy8gICAgdGhpcy5pZGVudGl0eU1hbmFnZXIucmVzZXQoKTsKZS5zdG9yYWdlcy5pZGVudGl0eS5nZXQoITEsITEsImlkZW50aXRpZXMiKS50aGVuKGZ1bmN0aW9uKG4peygwLG8uZGVmYXVsdCkobikuZm9yRWFjaChmdW5jdGlvbihyKXt0LnB1c2goZS5zdG9yYWdlcy5pZGVudGl0eS5kZWxldGUociwhMSwiaWRlbnRpdGllcyIpKX0pLHQucHVzaChlLnN0b3JhZ2VzLmNhcGFiaWxpdGllcy5kZWxldGUoImNhcGFiaWxpdGllcyIpKSx0LnB1c2goZS5zdG9yYWdlcy5jcnlwdG9NYW5hZ2VyLmRlbGV0ZSgidXNlckFzeW1tZXRyaWNLZXkiKSksdC5wdXNoKGUuc3RvcmFnZXMuaHlwZXJ0eVJlc291cmNlcy5kZWxldGUoImh5cGVydHlSZXNvdXJjZXMiKSksdC5wdXNoKGUuc3RvcmFnZXMuaWRlbnRpdHkuZGVsZXRlKCJhY2Nlc3NUb2tlbnMiKSksdC5wdXNoKGUuc3RvcmFnZXMucmVnaXN0cnkuZGVsZXRlKCJyZWdpc3RyeTpEYXRhT2JqZWN0VVJMcyIpKSx0LnB1c2goZS5zdG9yYWdlcy5yZWdpc3RyeS5kZWxldGUoInJlZ2lzdHJ5Okh5cGVydHlVUkxzIikpLHQucHVzaChlLnN0b3JhZ2VzLnJ1bnRpbWUuZGVsZXRlKCJwMnBIYW5kbGVyOlVSTCIpKSx0LnB1c2goZS5zdG9yYWdlcy5ydW50aW1lLmRlbGV0ZSgicnVudGltZTpVUkwiKSksCi8vICAgIHJlc2V0aW5nLnB1c2godGhpcy5zdG9yYWdlcy5ydW50aW1lQ2F0YWxvZ3VlLmRlbGV0ZSgncnVudGltZUNhdGFsb2d1ZScpKTsKdC5wdXNoKGUuc3RvcmFnZXMuc3Vic2NyaXB0aW9ucy5kZWxldGUoInN1YnNjcmlwdGlvbnMiKSksdC5wdXNoKGUuc3RvcmFnZXMuc3luY2hlck1hbmFnZXIuZGVsZXRlKCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIikpLHMuZGVmYXVsdC5hbGwodCkudGhlbihmdW5jdGlvbihlKXtlZS5pbmZvKCJBbGwgREJzIHdlcmUgcmVzZXQgd2l0aCBTdWNjZXNzOiIsZSkscighMCl9KS5jYXRjaChmdW5jdGlvbihlKXtlZS5lcnJvcigiRmFpbGVkIHRvIHJlc2V0IGFsbCBEQnMiLGUpLHIoITEpfSl9KX0pfX1dKSxSdW50aW1lVUF9KCk7dC5kZWZhdWx0PXRlLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQxNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MTcpLGUuZXhwb3J0cz1yKDEzKS5PYmplY3Qua2V5c30sLyogNDE3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pCnZhciBuPXIoNzMpLG89cig2NCk7cigxMzQpKCJrZXlzIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sLyogNDE4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZgovLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcwp2YXIgbj1yKDQ1KSxvPXIoMTI5KSxpPXIoNDE5KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQscixzKXt2YXIgYSx1PW4odCksYz1vKHUubGVuZ3RoKSxmPWkocyxjKTsKLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobQovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tc2VsZi1jb21wYXJlCmlmKGUmJnIhPXIpe2Zvcig7Yz5mOykKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNlbGYtY29tcGFyZQppZigoYT11W2YrK10pIT1hKXJldHVybiEwfWVsc2UgZm9yKDtjPmY7ZisrKWlmKChlfHxmIGluIHUpJiZ1W2ZdPT09cilyZXR1cm4gZXx8Znx8MDtyZXR1cm4hZSYmLTF9fX0sLyogNDE5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDEzMCksbz1NYXRoLm1heCxpPU1hdGgubWluO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBlPW4oZSksZTwwP28oZSt0LDApOmkoZSx0KX19LC8qIDQyMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxODUpLHIoMTM3KSxyKDE5MCkscig0MjcpLHIoNDM1KSxyKDQzNiksZS5leHBvcnRzPXIoMTMpLlByb21pc2V9LC8qIDQyMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMzApLG89cigxMjgpOwovLyB0cnVlICAtPiBTdHJpbmcjYXQKLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0CmUuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxyKXt2YXIgaSxzLGE9U3RyaW5nKG8odCkpLHU9bihyKSxjPWEubGVuZ3RoO3JldHVybiB1PDB8fHU+PWM/ZT8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KHUpLGk8NTUyOTZ8fGk+NTYzMTl8fHUrMT09PWN8fChzPWEuY2hhckNvZGVBdCh1KzEpKTw1NjMyMHx8cz41NzM0Mz9lP2EuY2hhckF0KHUpOmk6ZT9hLnNsaWNlKHUsdSsyKTpzLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzYpfX19LC8qIDQyMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTM4KSxvPXIoNzYpLGk9cig5Nikscz17fTsKLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKCkKcig1OCkocyxyKDIyKSgiaXRlcmF0b3IiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtlLnByb3RvdHlwZT1uKHMse25leHQ6bygxLHIpfSksaShlLHQrIiBJdGVyYXRvciIpfX0sLyogNDIzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDM5KSxvPXIoNDApLGk9cig2NCk7ZS5leHBvcnRzPXIoNDYpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUsdCl7byhlKTtmb3IodmFyIHIscz1pKHQpLGE9cy5sZW5ndGgsdT0wO2E+dTspbi5mKGUscj1zW3UrK10sdFtyXSk7cmV0dXJuIGV9fSwvKiA0MjQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDQyNSksbz1yKDQyNiksaT1yKDc3KSxzPXIoNDUpOwovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCmUuZXhwb3J0cz1yKDE4NikoQXJyYXksIkFycmF5IixmdW5jdGlvbihlLHQpe3RoaXMuX3Q9cyhlKSwvLyB0YXJnZXQKdGhpcy5faT0wLC8vIG5leHQgaW5kZXgKdGhpcy5faz10fSxmdW5jdGlvbigpe3ZhciBlPXRoaXMuX3QsdD10aGlzLl9rLHI9dGhpcy5faSsrO3JldHVybiFlfHxyPj1lLmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbygxKSk6ImtleXMiPT10P28oMCxyKToidmFsdWVzIj09dD9vKDAsZVtyXSk6bygwLFtyLGVbcl1dKX0sInZhbHVlcyIpLAovLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpCmkuQXJndW1lbnRzPWkuQXJyYXksbigia2V5cyIpLG4oInZhbHVlcyIpLG4oImVudHJpZXMiKX0sLyogNDI1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sLyogNDI2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJue3ZhbHVlOnQsZG9uZTohIWV9fX0sLyogNDI3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG4sbyxpLHMsYT1yKDc1KSx1PXIoMTcpLGM9cig2NSksZj1yKDE5MSksbD1yKDIxKSxkPXIoNDEpLHA9cig5NSkseT1yKDQyOCksaD1yKDQyOSksdj1yKDE5NSksZz1yKDE5Nikuc2V0LGI9cig0MzEpKCksXz1yKDEzOSksbT1yKDE5NyksUj1yKDQzMiksdz1yKDE5OCksUz11LlR5cGVFcnJvcixrPXUucHJvY2VzcyxPPWsmJmsudmVyc2lvbnMsUD1PJiZPLnY4fHwiIixNPXUuUHJvbWlzZSxMPSJwcm9jZXNzIj09ZihrKSx4PWZ1bmN0aW9uKCl7fSxBPW89Xy5mLEQ9ISFmdW5jdGlvbigpe3RyeXsKLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0CnZhciBlPU0ucmVzb2x2ZSgxKSx0PShlLmNvbnN0cnVjdG9yPXt9KVtyKDIyKSgic3BlY2llcyIpXT1mdW5jdGlvbihlKXtlKHgseCl9OwovLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0CnJldHVybihMfHwiZnVuY3Rpb24iPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmZS50aGVuKHgpaW5zdGFuY2VvZiB0JiYwIT09UC5pbmRleE9mKCI2LjYiKSYmLTE9PT1SLmluZGV4T2YoIkNocm9tZS82NiIpfWNhdGNoKGUpe319KCksVT1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4hKCFkKGUpfHwiZnVuY3Rpb24iIT10eXBlb2YodD1lLnRoZW4pKSYmdH0saj1mdW5jdGlvbihlLHQpe2lmKCFlLl9uKXtlLl9uPSEwO3ZhciByPWUuX2M7YihmdW5jdGlvbigpe2Zvcih2YXIgbj1lLl92LG89MT09ZS5fcyxpPTA7ci5sZW5ndGg+aTspIWZ1bmN0aW9uKHQpe3ZhciByLGkscyxhPW8/dC5vazp0LmZhaWwsdT10LnJlc29sdmUsYz10LnJlamVjdCxmPXQuZG9tYWluO3RyeXthPyhvfHwoMj09ZS5faCYmQyhlKSxlLl9oPTEpLCEwPT09YT9yPW46KGYmJmYuZW50ZXIoKSxyPWEobiksLy8gbWF5IHRocm93CmYmJihmLmV4aXQoKSxzPSEwKSkscj09PXQucHJvbWlzZT9jKFMoIlByb21pc2UtY2hhaW4gY3ljbGUiKSk6KGk9VShyKSk/aS5jYWxsKHIsdSxjKTp1KHIpKTpjKG4pfWNhdGNoKGUpe2YmJiFzJiZmLmV4aXQoKSxjKGUpfX0ocltpKytdKTsvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaAplLl9jPVtdLGUuX249ITEsdCYmIWUuX2gmJkUoZSl9KX19LEU9ZnVuY3Rpb24oZSl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgdCxyLG4sbz1lLl92LGk9SShlKTtpZihpJiYodD1tKGZ1bmN0aW9uKCl7TD9rLmVtaXQoInVuaGFuZGxlZFJlamVjdGlvbiIsbyxlKToocj11Lm9udW5oYW5kbGVkcmVqZWN0aW9uKT9yKHtwcm9taXNlOmUscmVhc29uOm99KToobj11LmNvbnNvbGUpJiZuLmVycm9yJiZuLmVycm9yKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLG8pfSksCi8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkCmUuX2g9THx8SShlKT8yOjEpLGUuX2E9dm9pZCAwLGkmJnQuZSl0aHJvdyB0LnZ9KX0sST1mdW5jdGlvbihlKXtyZXR1cm4gMSE9PWUuX2gmJjA9PT0oZS5fYXx8ZS5fYykubGVuZ3RofSxDPWZ1bmN0aW9uKGUpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIHQ7TD9rLmVtaXQoInJlamVjdGlvbkhhbmRsZWQiLGUpOih0PXUub25yZWplY3Rpb25oYW5kbGVkKSYmdCh7cHJvbWlzZTplLHJlYXNvbjplLl92fSl9KX0sVD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2R8fCh0Ll9kPSEwLHQ9dC5fd3x8dCwvLyB1bndyYXAKdC5fdj1lLHQuX3M9Mix0Ll9hfHwodC5fYT10Ll9jLnNsaWNlKCkpLGoodCwhMCkpfSxxPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztpZighci5fZCl7ci5fZD0hMCxyPXIuX3d8fHI7Ly8gdW53cmFwCnRyeXtpZihyPT09ZSl0aHJvdyBTKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOyh0PVUoZSkpP2IoZnVuY3Rpb24oKXt2YXIgbj17X3c6cixfZDohMX07Ly8gd3JhcAp0cnl7dC5jYWxsKGUsYyhxLG4sMSksYyhULG4sMSkpfWNhdGNoKGUpe1QuY2FsbChuLGUpfX0pOihyLl92PWUsci5fcz0xLGoociwhMSkpfWNhdGNoKGUpe1QuY2FsbCh7X3c6cixfZDohMX0sZSl9fX07Ci8vIGNvbnN0cnVjdG9yIHBvbHlmaWxsCkR8fCgKLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcikKTT1mdW5jdGlvbihlKXt5KHRoaXMsTSwiUHJvbWlzZSIsIl9oIikscChlKSxuLmNhbGwodGhpcyk7dHJ5e2UoYyhxLHRoaXMsMSksYyhULHRoaXMsMSkpfWNhdGNoKGUpe1QuY2FsbCh0aGlzLGUpfX0sCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwpuPWZ1bmN0aW9uKGUpe3RoaXMuX2M9W10sLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zCnRoaXMuX2E9dm9pZCAwLC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zCnRoaXMuX3M9MCwvLyA8LSBzdGF0ZQp0aGlzLl9kPSExLC8vIDwtIGRvbmUKdGhpcy5fdj12b2lkIDAsLy8gPC0gdmFsdWUKdGhpcy5faD0wLC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkCnRoaXMuX249ITF9LG4ucHJvdG90eXBlPXIoNDMzKShNLnByb3RvdHlwZSx7Ci8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpCnRoZW46ZnVuY3Rpb24oZSx0KXt2YXIgcj1BKHYodGhpcyxNKSk7cmV0dXJuIHIub2s9ImZ1bmN0aW9uIiE9dHlwZW9mIGV8fGUsci5mYWlsPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LHIuZG9tYWluPUw/ay5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChyKSx0aGlzLl9hJiZ0aGlzLl9hLnB1c2gociksdGhpcy5fcyYmaih0aGlzLCExKSxyLnByb21pc2V9LAovLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKQpjYXRjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCxlKX19KSxpPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IG47dGhpcy5wcm9taXNlPWUsdGhpcy5yZXNvbHZlPWMocSxlLDEpLHRoaXMucmVqZWN0PWMoVCxlLDEpfSxfLmY9QT1mdW5jdGlvbihlKXtyZXR1cm4gZT09PU18fGU9PT1zP25ldyBpKGUpOm8oZSl9KSxsKGwuRytsLlcrbC5GKiFELHtQcm9taXNlOk19KSxyKDk2KShNLCJQcm9taXNlIikscig0MzQpKCJQcm9taXNlIikscz1yKDEzKS5Qcm9taXNlLAovLyBzdGF0aWNzCmwobC5TK2wuRiohRCwiUHJvbWlzZSIsewovLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKQpyZWplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9QSh0aGlzKTtyZXR1cm4oMCx0LnJlamVjdCkoZSksdC5wcm9taXNlfX0pLGwobC5TK2wuRiooYXx8IUQpLCJQcm9taXNlIix7Ci8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KQpyZXNvbHZlOmZ1bmN0aW9uKGUpe3JldHVybiB3KGEmJnRoaXM9PT1zP006dGhpcyxlKX19KSxsKGwuUytsLkYqIShEJiZyKDE5OSkoZnVuY3Rpb24oZSl7TS5hbGwoZSkuY2F0Y2goeCl9KSksIlByb21pc2UiLHsKLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpCmFsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9QSh0KSxuPXIucmVzb2x2ZSxvPXIucmVqZWN0LGk9bShmdW5jdGlvbigpe3ZhciByPVtdLGk9MCxzPTE7aChlLCExLGZ1bmN0aW9uKGUpe3ZhciBhPWkrKyx1PSExO3IucHVzaCh2b2lkIDApLHMrKyx0LnJlc29sdmUoZSkudGhlbihmdW5jdGlvbihlKXt1fHwodT0hMCxyW2FdPWUsLS1zfHxuKHIpKX0sbyl9KSwtLXN8fG4ocil9KTtyZXR1cm4gaS5lJiZvKGkudiksci5wcm9taXNlfSwKLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKQpyYWNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1BKHQpLG49ci5yZWplY3Qsbz1tKGZ1bmN0aW9uKCl7aChlLCExLGZ1bmN0aW9uKGUpe3QucmVzb2x2ZShlKS50aGVuKHIucmVzb2x2ZSxuKX0pfSk7cmV0dXJuIG8uZSYmbihvLnYpLHIucHJvbWlzZX19KX0sLyogNDI4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKCEoZSBpbnN0YW5jZW9mIHQpfHx2b2lkIDAhPT1uJiZuIGluIGUpdGhyb3cgVHlwZUVycm9yKHIrIjogaW5jb3JyZWN0IGludm9jYXRpb24hIik7cmV0dXJuIGV9fSwvKiA0MjkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoNjUpLG89cigxOTIpLGk9cigxOTMpLHM9cig0MCksYT1yKDEyOSksdT1yKDE5NCksYz17fSxmPXt9LHQ9ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGwsZCl7dmFyIHAseSxoLHYsZz1kP2Z1bmN0aW9uKCl7cmV0dXJuIGV9OnUoZSksYj1uKHIsbCx0PzI6MSksXz0wO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBnKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGl0ZXJhYmxlISIpOwovLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3IKaWYoaShnKSl7Zm9yKHA9YShlLmxlbmd0aCk7cD5fO18rKylpZigodj10P2Iocyh5PWVbX10pWzBdLHlbMV0pOmIoZVtfXSkpPT09Y3x8dj09PWYpcmV0dXJuIHZ9ZWxzZSBmb3IoaD1nLmNhbGwoZSk7ISh5PWgubmV4dCgpKS5kb25lOylpZigodj1vKGgsYix5LnZhbHVlLHQpKT09PWN8fHY9PT1mKXJldHVybiB2fTt0LkJSRUFLPWMsdC5SRVRVUk49Zn0sLyogNDMwICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQplLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMD09PXI7c3dpdGNoKHQubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG4/ZSgpOmUuY2FsbChyKTtjYXNlIDE6cmV0dXJuIG4/ZSh0WzBdKTplLmNhbGwocix0WzBdKTtjYXNlIDI6cmV0dXJuIG4/ZSh0WzBdLHRbMV0pOmUuY2FsbChyLHRbMF0sdFsxXSk7Y2FzZSAzOnJldHVybiBuP2UodFswXSx0WzFdLHRbMl0pOmUuY2FsbChyLHRbMF0sdFsxXSx0WzJdKTtjYXNlIDQ6cmV0dXJuIG4/ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKTplLmNhbGwocix0WzBdLHRbMV0sdFsyXSx0WzNdKX1yZXR1cm4gZS5hcHBseShyLHQpfX0sLyogNDMxICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE3KSxvPXIoMTk2KS5zZXQsaT1uLk11dGF0aW9uT2JzZXJ2ZXJ8fG4uV2ViS2l0TXV0YXRpb25PYnNlcnZlcixzPW4ucHJvY2VzcyxhPW4uUHJvbWlzZSx1PSJwcm9jZXNzIj09cig3NCkocyk7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIGUsdCxyLGM9ZnVuY3Rpb24oKXt2YXIgbixvO2Zvcih1JiYobj1zLmRvbWFpbikmJm4uZXhpdCgpO2U7KXtvPWUuZm4sZT1lLm5leHQ7dHJ5e28oKX1jYXRjaChuKXt0aHJvdyBlP3IoKTp0PXZvaWQgMCxufX10PXZvaWQgMCxuJiZuLmVudGVyKCl9OwovLyBOb2RlLmpzCmlmKHUpcj1mdW5jdGlvbigpe3MubmV4dFRpY2soYyl9O2Vsc2UgaWYoIWl8fG4ubmF2aWdhdG9yJiZuLm5hdmlnYXRvci5zdGFuZGFsb25lKWlmKGEmJmEucmVzb2x2ZSl7Ci8vIFByb21pc2UucmVzb2x2ZSB3aXRob3V0IGFuIGFyZ3VtZW50IHRocm93cyBhbiBlcnJvciBpbiBMRyBXZWJPUyAyCnZhciBmPWEucmVzb2x2ZSh2b2lkIDApO3I9ZnVuY3Rpb24oKXtmLnRoZW4oYyl9fWVsc2Ugcj1mdW5jdGlvbigpewovLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpCm8uY2FsbChuLGMpfTtlbHNle3ZhciBsPSEwLGQ9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpO25ldyBpKGMpLm9ic2VydmUoZCx7Y2hhcmFjdGVyRGF0YTohMH0pLC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CnI9ZnVuY3Rpb24oKXtkLmRhdGE9bD0hbH19cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvPXtmbjpuLG5leHQ6dm9pZCAwfTt0JiYodC5uZXh0PW8pLGV8fChlPW8scigpKSx0PW99fX0sLyogNDMyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDE3KSxvPW4ubmF2aWdhdG9yO2UuZXhwb3J0cz1vJiZvLnVzZXJBZ2VudHx8IiJ9LC8qIDQzMyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cig1OCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIG8gaW4gdClyJiZlW29dP2Vbb109dFtvXTpuKGUsbyx0W29dKTtyZXR1cm4gZX19LC8qIDQzNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3ZhciBuPXIoMTcpLG89cigxMyksaT1yKDM5KSxzPXIoNDYpLGE9cigyMikoInNwZWNpZXMiKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIG9bZV0/b1tlXTpuW2VdO3MmJnQmJiF0W2FdJiZpLmYodCxhLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSwvKiA0MzUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS1maW5hbGx5CnZhciBuPXIoMjEpLG89cigxMyksaT1yKDE3KSxzPXIoMTk1KSxhPXIoMTk4KTtuKG4uUCtuLlIsIlByb21pc2UiLHtmaW5hbGx5OmZ1bmN0aW9uKGUpe3ZhciB0PXModGhpcyxvLlByb21pc2V8fGkuUHJvbWlzZSkscj0iZnVuY3Rpb24iPT10eXBlb2YgZTtyZXR1cm4gdGhpcy50aGVuKHI/ZnVuY3Rpb24ocil7cmV0dXJuIGEodCxlKCkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gcn0pfTplLHI/ZnVuY3Rpb24ocil7cmV0dXJuIGEodCxlKCkpLnRoZW4oZnVuY3Rpb24oKXt0aHJvdyByfSl9OmUpfX0pfSwvKiA0MzYgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJvbWlzZS10cnkKdmFyIG49cigyMSksbz1yKDEzOSksaT1yKDE5Nyk7bihuLlMsIlByb21pc2UiLHt0cnk6ZnVuY3Rpb24oZSl7dmFyIHQ9by5mKHRoaXMpLHI9aShlKTtyZXR1cm4oci5lP3QucmVqZWN0OnQucmVzb2x2ZSkoci52KSx0LnByb21pc2V9fSl9LC8qIDQzNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0MzgpLGUuZXhwb3J0cz1yKDEzKS5PYmplY3QuYXNzaWdufSwvKiA0MzggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKQp2YXIgbj1yKDIxKTtuKG4uUytuLkYsIk9iamVjdCIse2Fzc2lnbjpyKDQzOSl9KX0sLyogNDM5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7Ci8vIDE5LjEuMi4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UsIC4uLikKdmFyIG49cig2NCksbz1yKDE0MCksaT1yKDc4KSxzPXIoNzMpLGE9cigxODMpLHU9T2JqZWN0LmFzc2lnbjsKLy8gc2hvdWxkIHdvcmsgd2l0aCBzeW1ib2xzIGFuZCBzaG91bGQgaGF2ZSBkZXRlcm1pbmlzdGljIHByb3BlcnR5IG9yZGVyIChWOCBidWcpCmUuZXhwb3J0cz0hdXx8cig2NikoZnVuY3Rpb24oKXt2YXIgZT17fSx0PXt9LHI9U3ltYm9sKCksbj0iYWJjZGVmZ2hpamtsbW5vcHFyc3QiO3JldHVybiBlW3JdPTcsbi5zcGxpdCgiIikuZm9yRWFjaChmdW5jdGlvbihlKXt0W2VdPWV9KSw3IT11KHt9LGUpW3JdfHxPYmplY3Qua2V5cyh1KHt9LHQpKS5qb2luKCIiKSE9bn0pP2Z1bmN0aW9uKGUsdCl7Zm9yKC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKdmFyIHI9cyhlKSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0xLGY9by5mLGw9aS5mO3U+YzspZm9yKHZhciBkLHA9YShhcmd1bWVudHNbYysrXSkseT1mP24ocCkuY29uY2F0KGYocCkpOm4ocCksaD15Lmxlbmd0aCx2PTA7aD52OylsLmNhbGwocCxkPXlbdisrXSkmJihyW2RdPXBbZF0pO3JldHVybiByfTp1fSwvKiA0NDAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQ0MSksX19lc01vZHVsZTohMH19LC8qIDQ0MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0NDIpO3ZhciBuPXIoMTMpLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuLmRlZmluZVByb3BlcnR5KGUsdCxyKX19LC8qIDQ0MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyMSk7Ci8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCm4obi5TK24uRiohcig0NiksIk9iamVjdCIse2RlZmluZVByb3BlcnR5OnIoMzkpLmZ9KX0sLyogNDQzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOTgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMzEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoOCksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNykseT1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KHApLGg9cig5OSksdj1yKDQ1NSksZz1yKDEwMCksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLF89cigyMDMpLG09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxSPXIoNDY5KSx3PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoUiksUz1yKDQ3MCksaz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFMpLE89cigxNCk7cig0NzEpO3ZhciBQPXIoMjA0KSxNPXkuZ2V0TG9nZ2VyKCJSZWdpc3RyeSIpLEw9e0NSRUFURUQ6ImNyZWF0ZWQiLExJVkU6ImxpdmUiLERFUExPWUlORzoiZGVwbG95aW5nIixERVBMT1lFRDoiZGVwbG95ZWQiLFBST0dSRVNTOiJpbi1wcm9ncmVzcyIsRElTQ09OTkVDVEVEOiJkaXNjb25uZWN0ZWQiLEZBSUxFRDoiZGVwbG95bWVudC1mYWlsZWQiLERFQUQ6ImRlYWQifSx4PWZ1bmN0aW9uKCl7LyoqCiAgKiBUbyBpbml0aWFsaXNlIHRoZSBSdW50aW1lIFJlZ2lzdHJ5IHdpdGggdGhlIFJ1bnRpbWVVUkwgdGhhdCB3aWxsIGJlIHRoZSBiYXNpcyB0byBkZXJpdmUgdGhlIGludGVybmFsIHJ1bnRpbWUgYWRkcmVzc2VzIHdoZW4gYWxsb2NhdGluZyBhZGRyZXNzZXMgdG8gaW50ZXJuYWwgcnVudGltZSBjb21wb25lbnQuIEluIGFkZGl0aW9uLCB0aGUgUmVnaXN0cnkgZG9tYWluIGJhY2stZW5kIHRvIGJlIHVzZWQgdG8gcmVtb3RlbHkgcmVnaXN0ZXIgUnVudGltZSBjb21wb25lbnRzLCBpcyBhbHNvIHBhc3NlZCBhcyBpbnB1dCBwYXJhbWV0ZXIuCiAgKiBAcGFyYW0gIHtNZXNzYWdlQnVzfSAgICAgICAgICBtc2didXMgICAgICAgICAgICAgICAgbXNnYnVzCiAgKiBAcGFyYW0gIHtIeXBlcnR5UnVudGltZVVSTH0gICBydW50aW1lVVJMICAgICAgICAgICAgcnVudGltZVVSTAogICogQHBhcmFtICB7QXBwU2FuZGJveH0gICAgICAgICAgYXBwU2FuZGJveCAgICAgICAgICAgIGFwcFNhbmRib3gKICAqIEBwYXJhbSAge3J1bnRpbWVDYXRhbG9ndWV9ICAgIHJ1bnRpbWVDYXRhbG9ndWUgICAgICBydW50aW1lQ2F0YWxvZ3VlCiAgKiBAcGFyYW0gIHtEb21haW5VUkx9ICAgICAgICAgICByZW1vdGVSZWdpc3RyeSAgICAgICAgcmVtb3RlUmVnaXN0cnkKICAqIEBwYXJhbSAge3N0b3JhZ2VNYW5hZ2VyfSAgICAgIHN0b3JhZ2VNYW5hZ2VyCiAgKi8KZnVuY3Rpb24gUmVnaXN0cnkoZSx0LHIsbixvLGkscyxhKXsKLy8gaG93IHNvbWUgZnVuY3Rpb25zIHJlY2VpdmUgdGhlIHBhcmFtZXRlcnMgZm9yIGV4YW1wbGU6Ci8vIG5ldyBSZWdpc3RyeSgnaHlwZXJ0eS1ydW50aW1lOi8vc3AxLzEyMycsIGFwcFNhbmRib3gsIGlkTW9kdWxlLCByZW1vdGVSZWdpc3RyeSk7Ci8vIHJlZ2lzdHJ5LnJlZ2lzdGVyU3R1YihzYW5kYm94LCAnc3AxJyk7Ci8vIHJlZ2lzdHJ5LnJlZ2lzdGVySHlwZXJ0eShzYW5kQm94LCAnaHlwZXJ0eS1ydW50aW1lOi8vc3AxLzEyMycpOwovLyByZWdpc3RyeS5yZXNvbHZlKCdoeXBlcnR5LXJ1bnRpbWU6Ly9zcDEvMTIzJyk7CmlmKCgwLGYuZGVmYXVsdCkodGhpcyxSZWdpc3RyeSksIWUpdGhyb3cgbmV3IEVycm9yKCJydW50aW1lVVJMIGlzIG1pc3NpbmcuIik7aWYoIWkpdGhyb3cgbmV3IEVycm9yKCJzdG9yYWdlTWFuYWdlciBpcyBtaXNzaW5nLiIpOy8qaWYgKCFyZW1vdGVSZWdpc3RyeSkgdGhyb3cgbmV3IEVycm9yKCdyZW1vdGVSZWdpc3RyeSBpcyBtaXNzaW5nJyk7Ki8KdmFyIHU9dGhpczt1LnJlZ2lzdHJ5VVJMPWUrIi9yZWdpc3RyeS8iLHUuYXBwU2FuZGJveD10LHUucnVudGltZVVSTD1lLHUucDJwSGFuZGxlclVSTD1zLHUucnVudGltZUNhdGFsb2d1ZT1uLHUucmVtb3RlUmVnaXN0cnk9YSx1LmlkTW9kdWxlPXIsdS5zdG9yYWdlTWFuYWdlcj1pLHUucnVudGltZUNhcGFiaWxpdGllcz1vLHUuaWRlbnRpZmllcj0oMCxPLmdlbmVyYXRlR1VJRCkoKSx1Lmh5cGVydGllc0xpc3RUb1JlbW92ZT17fSx1Lmh5cGVydGllc0xpc3Q9W10sdS5yZW1vdGVIeXBlcnR5TGlzdD1bXSx1LnJlbW90ZURhdGFPYmplY3RMaXN0PVtdLHUuaWRwTGVnYWN5UHJveHlMaXN0PXt9LHUud2F0Y2hpbmdZb3U9bmV3IFAuV2F0Y2hpbmdZb3UsdS5wMnBIYW5kbGVyU3R1Yj17fSx1LnAycFJlcXVlc3RlclN0dWI9dS53YXRjaGluZ1lvdS53YXRjaCgicDJwUmVxdWVzdGVyU3R1YiIse30sITApLHUucDJwQ29ubmVjdGlvbkxpc3Q9dS53YXRjaGluZ1lvdS53YXRjaCgicDJwQ29ubmVjdGlvbkxpc3QiLHt9LCEwKSx1LnAycEhhbmRsZXJBc3NvY2lhdGlvbj17fSx1LnByb3Rvc3R1YnNMaXN0PXUud2F0Y2hpbmdZb3Uud2F0Y2goInByb3Rvc3R1YnNMaXN0Iix7fSwhMCksdS5pZHBQcm94eUxpc3Q9dS53YXRjaGluZ1lvdS53YXRjaCgiaWRwUHJveHlMaXN0Iix7fSwhMCksdS5kYXRhT2JqZWN0TGlzdD17fSx1LnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdD17fSx1LnNhbmRib3hlc0xpc3Q9e3NhbmRib3g6e30sYXBwU2FuZGJveDp7fX0sdS5wZXBMaXN0PXt9LHUucmVnaXN0cmllcz17fSx1Ll9kb21haW49KDAsTy5kaXZpZGVVUkwpKHUucmVnaXN0cnlVUkwpLmRvbWFpbix1LnNhbmRib3hlc0xpc3QuYXBwU2FuZGJveFtlXT10O3ZhciBjPW5ldyBrLmRlZmF1bHQodSk7dS5fcDJwQ29ubmVjdGlvblJlc29sdmU9Y31yZXR1cm4oMCxkLmRlZmF1bHQpKFJlZ2lzdHJ5LFt7a2V5OiJfZ2V0SWRlbnRpdHlBc3NvY2lhdGVkIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Zm9yKHZhciBuIGluIHIuaHlwZXJ0aWVzTGlzdCl7dmFyIG89ci5oeXBlcnRpZXNMaXN0W25dO2lmKG8uX2h5cGVydHlVUkw9PT10KXN3aXRjaChlKXtjYXNlInVzZXJuYW1lIjpyZXR1cm4gby5fdXNlci51c2VybmFtZTtjYXNlImNuIjpyZXR1cm4gby5fdXNlci5jbjtjYXNlImxvY2FsZSI6cmV0dXJuIG8uX3VzZXIubG9jYWxlO2Nhc2UiYXZhdGFyIjpyZXR1cm4gby5fdXNlci5hdmF0YXI7Y2FzZSJ1c2VyVVJMIjpyZXR1cm4gby5fdXNlci51c2VyVVJMO2Nhc2UiLiI6cmV0dXJuIG8uX3VzZXI7ZGVmYXVsdDpyZXR1cm4iIn19cmV0dXJuIiJ9fSx7a2V5OiJnZXRBcHBTYW5kYm94Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcFNhbmRib3h9fSx7a2V5OiJnZXRIeXBlcnR5T3duZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Zm9yKHZhciByIGluIHQuaHlwZXJ0aWVzTGlzdCl7dmFyIG49dC5oeXBlcnRpZXNMaXN0W3JdO2lmKG4uaHlwZXJ0eVVSTD09PWUpcmV0dXJuIG4udXNlci51c2VyVVJMfX19LHtrZXk6ImdldERhdGFPYmplY3RSZXBvcnRlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLE8ucmVtb3ZlUGF0aEZyb21VUkwpKGUpO2Zvcih2YXIgbiBpbiB0LmRhdGFPYmplY3RMaXN0KXt2YXIgbz10LmRhdGFPYmplY3RMaXN0W25dO2lmKG8udXJsPT09cilyZXR1cm4gby5yZXBvcnRlcn1yZXR1cm4gbnVsbH19LHtrZXk6ImdldEh5cGVydHlOYW1lIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9Imh5cGVydHkiPT09KDAsTy5kaXZpZGVVUkwpKGUpLnR5cGUsbj12b2lkIDAsbz1yP2U6dC5nZXRSZXBvcnRlclVSTFN5bmNob25vdXMoZSk7Zm9yKHZhciBpIGluIHQuaHlwZXJ0aWVzTGlzdCl7dmFyIHM9dC5oeXBlcnRpZXNMaXN0W2ldO2lmKHMuaHlwZXJ0eVVSTD09PW8pe249cy5vYmplY3ROYW1lO2JyZWFrfX1yZXR1cm4gbn19LHtrZXk6ImdldFJlcG9ydGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89dC5kYXRhT2JqZWN0TGlzdFtlXTtvP3Ioby5yZXBvcnRlcik6bigiTm8gcmVwb3J0ZXIgd2FzIGZvdW5kIil9KX19LHtrZXk6ImdldFJlcG9ydGVyVVJMU3luY2hvbm91cyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuZGF0YU9iamVjdExpc3RbZV07cmV0dXJuIHI/ci5yZXBvcnRlcjp2b2lkIDB9fSx7a2V5OiJnZXREYXRhT2JqZWN0U3Vic2NyaWJlckh5cGVydHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdFtlXX19LHtrZXk6InJlZ2lzdGVyU3Vic2NyaWJlZERhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt2b2lkIDA9PT1yLnN1YnNjcmliZWREYXRhT2JqZWN0TGlzdFtlXSYmKHIuc3Vic2NyaWJlZERhdGFPYmplY3RMaXN0W2VdPXQpfX0se2tleToiZ2V0UHJlQXV0aFN1YnNjcmliZXJzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dC5kYXRhT2JqZWN0TGlzdFtlXSxuPVtdO3JldHVybiByJiYobj1yLmF1dGhvcmlzZSksbn19LHtrZXk6InVucmVnaXN0ZXJBbGxIeXBlcnRpZXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVtdO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Zm9yKHZhciBvIGluIGUuaHlwZXJ0aWVzTGlzdCl7dmFyIGk9ZS5oeXBlcnRpZXNMaXN0W29dLHM9ZS51bnJlZ2lzdGVySHlwZXJ0eUluc3RhbmNlKGkuaHlwZXJ0eVVSTCk7dC5wdXNoKHMpfXUuZGVmYXVsdC5hbGwodCkudGhlbihmdW5jdGlvbigpe3IoInN1Y2Nlc3NmdWxseSB1bnJlZ2lzdGVyZWQgYWxsIGh5cGVydGllcyIpfSxmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6InVucmVnaXN0ZXJIeXBlcnR5SW5zdGFuY2UiLHZhbHVlOmZ1bmN0aW9uKGUpewovL1RPRE8gd29ya2luZyBidXQgdGhlIHVzZXIKdmFyIHQ9dGhpcyxyPXt0eXBlOiJleGVjdXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ZSxib2R5OnttZXRob2Q6ImNsb3NlIn19OwovLyBTZW5kIG1lc3NhZ2UgdG8gaHlwZXJ0eSB0byBjbG9zZQp0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24ocil7TS5sb2coIltSZWdpc3RyeS51bnJlZ2lzdGVySHlwZXJ0eUluc3RhbmNlXSBDbG9zZSBSZXBseSIsciksdC5fZG9tYWluUmVnaXN0cmF0aW9uLnVucmVnaXN0ZXJIeXBlcnR5KGUpfSl9fSx7a2V5OiJ1bnJlZ2lzdGVyRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5fZG9tYWluUmVnaXN0cmF0aW9uLnVucmVnaXN0ZXJEYXRhT2JqZWN0KGUpfX0se2tleToicmVnaXN0ZXJTdWJzY3JpYmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj1yLmRhdGFPYmplY3RMaXN0W2VdO24mJihuLnN1YnNjcmliZXJzfHwobi5zdWJzY3JpYmVycz1bXSksbi5zdWJzY3JpYmVycy5wdXNoKHQpLHIuZGF0YU9iamVjdExpc3RbZV09bil9fSx7a2V5OiJnZXREYXRhT2JqZWN0U3Vic2NyaWJlcnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LmRhdGFPYmplY3RMaXN0W2VdO2lmKHIpcmV0dXJuIHIuc3Vic2NyaWJlcnM7dGhyb3ciTm8gZGF0YU9iamVjdCB3YXMgZm91bmQifX0se2tleToicmVnaXN0ZXJEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KDAsTy5kZWVwQ2xvbmUpKGUpO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dC5kYXRhT2JqZWN0TGlzdFtlLnVybF09ZSx0LnN0b3JhZ2VNYW5hZ2VyLmdldCgicmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiKS50aGVuKGZ1bmN0aW9uKGkpe2l8fChpPXt9KSwKLy91cGRhdGUgdGhlIGxpc3Qgd2l0aCB0aGUgbmV3IGVsZW1lbnRzCmlbZS5uYW1lK2Uuc2NoZW1hK2UucmVzb3VyY2VzK2UucmVwb3J0ZXJdPWUudXJsLAovLyBzdGVwIHRvIG9idGFpbiB0aGUgbGlzdCBvZiBhbGwgVVJMIHJlZ2lzdGVyZWQgdG8gdXBkYXRlZCB3aXRoIHRoZSBuZXcgb25lLgp0LnN0b3JhZ2VNYW5hZ2VyLnNldCgicmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiLDAsaSkudGhlbihmdW5jdGlvbigpe3QuaXNJbnRlcndvcmtpbmdQcm90b1N0dWIoci5yZXBvcnRlcikmJihyLmludGVyd29ya2luZz0hMCk7dmFyIG89ITA7ci5oYXNPd25Qcm9wZXJ0eSgiZG9tYWluX3JlZ2lzdHJhdGlvbiIpJiYobz1yLmRvbWFpbl9yZWdpc3RyYXRpb24pLG8/dC5fZG9tYWluUmVnaXN0cmF0aW9uLnJlZ2lzdGVyRGF0YU9iamVjdChyLGUucmVzdW1lLHQucDJwSGFuZGxlclN0dWIpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0pOm4ocil9KS5jYXRjaChmdW5jdGlvbihlKXtNLmVycm9yKCJbUmVnaXN0cnkgcmVnaXN0ZXJEYXRhT2JqZWN0XSBFcnJvcjogIixlKSxvKGUpfSl9KX0pfX0se2tleToiX2dldFJlc291cmNlc0FuZFNjaGVtZXMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocil7dmFyIG49dm9pZCAwOwovLyBjaGVjayBpZiB0aGUgaHlwZXJ0eSByZXNvdXJjZXMgaXMgYSB2ZWN0b3Igb3IgYSBzdHJpbmcKLy8gVE9ETyBkZWxldGUgbGF0ZXIgd2hlbiBjYXRhbG9ndWUgaXMgZml4ZWQKInN0cmluZyI9PXR5cGVvZiBlLmh5cGVydHlUeXBlPyhuPVtdLG4ucHVzaChlLmh5cGVydHlUeXBlKSk6bj1lLmh5cGVydHlUeXBlO3ZhciBvPWUub2JqZWN0TmFtZSxpPWUuZGF0YU9iamVjdHMscz1bXTsKLy90aGlzIHdpbGwgY3JlYXRlIGEgYXJyYXkgd2l0aCBhIFByb21pc2UgaW4gZWFjaCBwb3NpdGlvbgpmb3IodmFyIGEgaW4gaSlzLnB1c2godC5ydW50aW1lQ2F0YWxvZ3VlLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKGlbYV0pKTsKLy8gYXMgc29vbiBhcyB0aGUgcHJldmlvdXMgYXJyYXkgaXMgY29tcGxldGVkLCB0aGlzIHdpbGwgd2FpdCBmb3IgdGhlIHJlc29sdmUgb2YgYWxsIHByb21pc2VzIGluIHRoZSBhcnJheQp1LmRlZmF1bHQuYWxsKHMpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciBpIGluIGUpe3ZhciBzPWVbaV07dC5wdXNoKHMuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMuc2NoZW1lLmNvbnN0YW50KX0KLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBIeXBlcnR5IFNjaGVtYXMnLCBmaWx0ZXJlZERhdGFTY2hlbWFzKTsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBIeXBlcnR5IHJlc291cmNlcycsIHJlc291cmNlcyk7CnIoe3Jlc291cmNlczpuLGRhdGFTY2hlbWE6dCxuYW1lOm99KX0pfSl9fSx7a2V5OiJjaGVja1JlZ2lzdGVyZWRVUkxzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obil7dmFyIG89ZS5yZXBvcnRlcj8icmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiOiJyZWdpc3RyeTpIeXBlcnR5VVJMcyI7InN0cmluZyI9PXR5cGVvZiB0JiYobz10JiYiaHlwZXJ0eSIhPT0oMCxPLmRpdmlkZVVSTCkodCkudHlwZT8icmVnaXN0cnk6RGF0YU9iamVjdFVSTHMiOiJyZWdpc3RyeTpIeXBlcnR5VVJMcyIpLAovL2RlYnVnZ2VyOwpyLnN0b3JhZ2VNYW5hZ2VyLmdldChvKS50aGVuKGZ1bmN0aW9uKGkpe2lmKGl8fChpPXt9KSwic3RyaW5nIj09dHlwZW9mIHQpe00uaW5mbygiW1JlZ2lzdHJ5IC0gY2hlY2tSZWdpc3RlcmVkVVJMc10gLSBsb29rIGZvciAiK3QrIiBvbiAiLGkpO3ZhciBhPSgwLHMuZGVmYXVsdCkoaSkubWFwKGZ1bmN0aW9uKGUpe3ZhciByPWlbZV0uaW5kZXhPZih0KTtyZXR1cm4gaVtlXVtyXX0pO3JldHVybiBNLmluZm8oIltSZWdpc3RyeSAtIGNoZWNrUmVnaXN0ZXJlZFVSTHNdIC0gZm91bmQgIithLmxlbmd0aCsiIHJlc3VsdHMgb24gIixhKSxuKDE9PT1hLmxlbmd0aD9hOnZvaWQgMCl9aWYoInJlZ2lzdHJ5Okh5cGVydHlVUkxzIiE9PW8pe3ZhciB1PWUubmFtZStlLnNjaGVtYStlLnJlc291cmNlcytlLnJlcG9ydGVyO2lmKGlbdV0pewovLyBsb2cubG9nKCdbUmVnaXN0cnldIHJldXNhZ2Ugb2YgZGF0YU9iamVjdCBVUkwnKTsKaWYoInN0cmluZyI9PXR5cGVvZiBpW3VdKXt2YXIgYz1bXTtyZXR1cm4gYy5wdXNoKGlbdV0pLG4oYyl9cmV0dXJuIG4oaVt1XSl9Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeV0gbm8gZGF0YU9iamVjdCBVUkwgd2FzIHByZXZpb3VzbHkgcmVnaXN0ZXJlZCcpOwpyZXR1cm4gbih2b2lkIDApfXIuX2dldFJlc291cmNlc0FuZFNjaGVtZXMoZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbihpW2UucmVzb3VyY2VzK2UuZGF0YVNjaGVtYStlLm5hbWVdP2lbZS5yZXNvdXJjZXMrZS5kYXRhU2NoZW1hK2UubmFtZV06dm9pZCAwKX0pfSl9KX19LHtrZXk6InJlZ2lzdGVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixvKXt2YXIgaT10aGlzLGE9dm9pZCAwO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHUsYyl7aS5pZE1vZHVsZS5nZXRJZGVudGl0eUFzc2VydGlvbihvKS50aGVuKGZ1bmN0aW9uKG8pe3ZhciBmPW8udXNlclByb2ZpbGU7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIHVzZXJQcm9maWxlJywgdXNlclByb2ZpbGUpOwp2b2lkIDA9PT1pLl9tZXNzYWdlQnVzP2MoIltSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIE1lc3NhZ2VCdXMgaXMgdW5kZWZpbmVkIik6Ci8vY2FsbCBjaGVjayBpZiB0aGUgcHJvdG9zdHViIGV4aXN0OiB0byBiZSByZW1vdmVkCi8qICBfdGhpcy5yZXNvbHZlKGRvbWFpblVybCkudGhlbihmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gc3R1YiB0byBkb21haW4gcmVnaXN0cnktICcsIGEpOyovCmkuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZWdpc3RyeTpIeXBlcnR5VVJMcyIpLnRoZW4oZnVuY3Rpb24obyl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIHN0b3JhZ2VNYW5hZ2VyXSAtICcsIHVybHNMaXN0KTsKaS5fZ2V0UmVzb3VyY2VzQW5kU2NoZW1lcyhyKS50aGVuKGZ1bmN0aW9uKGwpe2E9bCxvfHwobz17fSksb1thLnJlc291cmNlcythLmRhdGFTY2hlbWErYS5uYW1lXT1uLmFkZHJlc3MsaS5zdG9yYWdlTWFuYWdlci5zZXQoInJlZ2lzdHJ5Okh5cGVydHlVUkxzIiwwLG8pLnRoZW4oZnVuY3Rpb24oKXsKLy9jaGVjayB3aGV0aGVyIHRoZSByZWNlaXZlZCBzYW5ib3ggZSBBcHBsaWNhdGlvblNhbmRib3ggb3IgYSBub3JtYWwgc2FuZGJveAoiYXBwIj09PWUudHlwZT9pLnNhbmRib3hlc0xpc3QuYXBwU2FuZGJveFtuLmFkZHJlc3NbMF1dPWU6Im5vcm1hbCI9PT1lLnR5cGU/aS5zYW5kYm94ZXNMaXN0LnNhbmRib3hbbi5hZGRyZXNzWzBdXT1lOmMoIldyb25nIFNhbmRib3hUeXBlIik7dmFyIG89dm9pZCAwLGw9dm9pZCAwOzAhPT0oMCxzLmRlZmF1bHQpKGkucDJwSGFuZGxlclN0dWIpLmxlbmd0aCYmKG89aS5wMnBIYW5kbGVyU3R1YltpLnJ1bnRpbWVVUkxdLnVybCxsPWgucnVudGltZVV0aWxzLnJ1bnRpbWVEZXNjcmlwdG9yLnAycFJlcXVlc3RlclN0dWIpO3ZhciBkPW5ldyBtLmRlZmF1bHQoaS5pZGVudGlmaWVyLGkucmVnaXN0cnlVUkwsdCxyLG4uYWRkcmVzc1swXSxmLCJndWlkIixpLnJ1bnRpbWVVUkwsImN0eCIsbyxsLGEuZGF0YVNjaGVtYSxhLnJlc291cmNlcyk7aS5oeXBlcnRpZXNMaXN0LnB1c2goZCk7LyotLS0gc3RhcnQgaGVyZSBtb3ZlIHAycCBhbmQgZG9tYWluIHJlZ2lzdHJ5IHJlbGF0ZWQgZmVhdHVyZXMgdG8gYSBzZXBhcmF0ZWQgZnVuY3Rpb24uLS0tLS0tLS4uKi8KdmFyIHA9ITA7ci5oYXNPd25Qcm9wZXJ0eSgiX2NvbmZpZ3VyYXRpb24iKSYmci5jb25maWd1cmF0aW9uLmhhc093blByb3BlcnR5KCJkb21haW5fcmVnaXN0cmF0aW9uIikmJihwPXIuY29uZmlndXJhdGlvbi5kb21haW5fcmVnaXN0cmF0aW9uKSxwP2kuX2RvbWFpblJlZ2lzdHJhdGlvbi5yZWdpc3Rlckh5cGVydHkoZCxuLm5ld0FkZHJlc3MpLnRoZW4oZnVuY3Rpb24oZSl7dShlKX0pOnUoe3VybDpkLmh5cGVydHlVUkx9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBFcnJvcjogJywgcmVhc29uKTsKYyhlKX0pfSl9KX0sZnVuY3Rpb24oZSl7YygiW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gIixlKX0pfSl9fSx7a2V5OiJ1bnJlZ2lzdGVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPSExLGk9MDtmb3IoaT0wO2k8dC5oeXBlcnRpZXNMaXN0Lmxlbmd0aDtpKyspe3ZhciBzPXQuaHlwZXJ0aWVzTGlzdFtpXTtpZih2b2lkIDAhPT1zJiZzLmh5cGVydHlVUkw9PT1lKXtvPSEwO2JyZWFrfX0hMT09PW8/bigiSHlwZXJ0eSBub3QgZm91bmQiKTooZGVsZXRlIHQuaHlwZXJ0aWVzTGlzdFtpXSxyKCJIeXBlcnR5IHN1Y2Nlc3NmdWxseSBkZWxldGVkIikpfSl9fSx7a2V5OiJkaXNjb3ZlclByb3Rvc3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQYXJhbWV0ZXIgdXJsIG5lZWRlZCIpO3ZhciB0PXRoaXMscj0oMCxPLmRpdmlkZVVSTCkoZSksbj1yLmRvbWFpbjtpZih0LnByb3Rvc3R1YnNMaXN0Lmhhc093blByb3BlcnR5KG4pJiZ0LnByb3Rvc3R1YnNMaXN0W25dLnN0YXR1cz09PUwuTElWRSlyZXR1cm4gdC5wcm90b3N0dWJzTGlzdFtuXTt0aHJvdyB0LnByb3Rvc3R1YnNMaXN0W25dPXtzdGF0dXM6TC5ERVBMT1lJTkd9LG5ldyBFcnJvcigiW1JlZ2lzdHJ5IC0gZGlzY292ZXJQcm90b1N0dWIgXSBNZXNzYWdlIE5vZGUgUHJvdG9zdHViIE5vdCBGb3VuZC4gQ3JlYXRpbmcgb25lIil9fSx7a2V5OiJkaXNjb3ZlclAyUFN0dWIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZSl7aWYodC5wMnBSZXF1ZXN0ZXJTdHViLmhhc093blByb3BlcnR5KGUpJiZ0LnAycFJlcXVlc3RlclN0dWJbZV0uc3RhdHVzPT09TC5MSVZFKXJldHVybiB0LnAycFJlcXVlc3RlclN0dWJbZV07dGhyb3cgdC5wMnBSZXF1ZXN0ZXJTdHViW2VdPXtzdGF0dXM6TC5DUkVBVEVEfSxuZXcgRXJyb3IoIltSZWdpc3RyeSAtIGRpc2NvdmVyUDJQU3R1YiBdIFAyUCBSZXF1ZXN0ZXIgU3R1YiBOb3QgRm91bmQuIENyZWF0aW5nIG9uZSIpfWlmKHQucDJwSGFuZGxlclN0dWIuaGFzT3duUHJvcGVydHkodC5ydW50aW1lVVJMKSlyZXR1cm4gdC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdO3Rocm93IHQucDJwSGFuZGxlclN0dWJbdC5ydW50aW1lVVJMXT17c3RhdHVzOkwuQ1JFQVRFRH0sbmV3IEVycm9yKCJbUmVnaXN0cnkgLSBkaXNjb3ZlclAyUFN0dWIgXSBQMlAgSGFuZGxlciBTdHViIE5vdCBGb3VuZC4iKX19LHtrZXk6InJlZ2lzdGVyU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbixpKXt2YXIgcz10aGlzLGE9aTtyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbih1LGMpe3ZhciBmPXZvaWQgMDsKLy9jaGVjayBpZiBtZXNzYWdlQnVzIGlzIHJlZ2lzdGVyZWQgaW4gcmVnaXN0cnkgb3Igbm90CnZvaWQgMD09PXMuX21lc3NhZ2VCdXMmJmMoIk1lc3NhZ2VCdXMgbm90IGZvdW5kIG9uIHJlZ2lzdGVyU3R1YiIpLE0uaW5mbygiW1JlZ2lzdHJ5IC0gcmVnaXN0ZXJTdHViXSAtIHN0dWJJRCAiLHQpOy8qIGlmICghc3R1YklELmluZGV4T2YoJ21zZy1ub2RlLicpKSB7CiAgICAgICAgICBzdHViSUQgPSBzdHViSUQuc3Vic3RyaW5nKHN0dWJJRC5pbmRleE9mKCcuJykgKyAxKTsKICAgICAgICB9Ki8KdmFyIGw9dm9pZCAwO2lmKHIpaWYoci5oYXNPd25Qcm9wZXJ0eSgiaXNIYW5kbGVyU3R1YiIpJiZyLmlzSGFuZGxlclN0dWIpZj1zLnAycEhhbmRsZXJVUkwscy5wMnBIYW5kbGVyU3R1Ylt0XT17dXJsOmYsc3RhdHVzOkwuQ1JFQVRFRH0scy5wMnBIYW5kbGVyQXNzb2NpYXRpb25bcy5ydW50aW1lVVJMXT1bXSxzLnNhbmRib3hlc0xpc3Quc2FuZGJveFtmXT1lLE0uaW5mbygiW1JlZ2lzdHJ5IC0gcmVnaXN0ZXJTdHViIC0gUDJQSGFuZGxlclN0dWJdIC0gIix0LCIgLSAiLGYpLHUocy5wMnBIYW5kbGVyU3R1Ylt0XSk7ZWxzZXtsPXIucDJwUmVxdWVzdGVyU3R1YixmPSJydW50aW1lOi8vIisoMCxPLmRpdmlkZVVSTCkoci5yZW1vdGVSdW50aW1lVVJMKS5kb21haW4rIi9wMnByZXF1ZXN0ZXIvIisoMCxPLmdlbmVyYXRlR1VJRCkoKSxNLmluZm8oIltSZWdpc3RyeSAtIHJlZ2lzdGVyU3R1YiAtIFAyUFJlcXVlc3RlclN0dWJdIC0gIixsLCIgLSAiLGYpLAovLyB0byBiZSBjbGFyaWZpZWQgd2hhdCBpcyB0aGlzIHAycEhhbmRsZXJBc3NvY2lhdGlvbgpzLnAycEhhbmRsZXJBc3NvY2lhdGlvbltzLnJ1bnRpbWVVUkxdLnB1c2goZikscy5wMnBSZXF1ZXN0ZXJTdHViW3RdPXt1cmw6ZixzdGF0dXM6TC5DUkVBVEVEfSxzLnNhbmRib3hlc0xpc3Quc2FuZGJveFtmXT1lOwovL1NldHVwIFAyUCBSZXF1ZXN0ZXIgcGF0aCBpbnRvIE1OCnZhciBkPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206cy5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitzLl9kb21haW4rIi9zbSIsYm9keTp7c3Vic2NyaWJlOltmXSxzb3VyY2U6cy5yZWdpc3RyeVVSTH19O3MuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZCxmdW5jdGlvbihlKXt9KSx1KHMucDJwUmVxdWVzdGVyU3R1Ylt0XSl9ZWxzZSBmPSJzdHJpbmciPT09ISh2b2lkIDA9PT1pPyJ1bmRlZmluZWQiOigwLG8uZGVmYXVsdCkoaSkpJiZpLmhhc093blByb3BlcnR5KCJfaW50ZXJ3b3JraW5nIikmJmkuX2ludGVyd29ya2luZz8icnVudGltZTovLyIrdCsiL3Byb3Rvc3R1Yi9zY2hlbWUxIjoicnVudGltZTovLyIrdCsiL3Byb3Rvc3R1Yi8iKygwLE8uZ2VuZXJhdGVHVUlEKSgpLE0uaW5mbygiW1JlZ2lzdHJ5IC0gcmVnaXN0ZXJTdHViIC0gTm9ybWFsIFN0dWJdIC0gIix0KSwKLy8gVE9ETzogT3B0aW1pemUgdGhpcwpzLnByb3Rvc3R1YnNMaXN0W3RdPXt1cmw6ZixzdGF0dXM6TC5ERVBMT1lJTkd9LG4mJihzLnByb3Rvc3R1YnNMaXN0W3RdLmRlc2NyaXB0b3JVUkw9biksYSYmYS5pbnRlcndvcmtpbmcmJihzLnByb3Rvc3R1YnNMaXN0W3RdLmludGVyd29ya2luZz1hLmludGVyd29ya2luZykscy5zYW5kYm94ZXNMaXN0LnNhbmRib3hbZl09ZSx1KHMucHJvdG9zdHVic0xpc3RbdF0pOwovLyByZXNvbHZlKHJ1bnRpbWVQcm90b1N0dWJVUkwpOwpzLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGYrIi9zdGF0dXMiLGZ1bmN0aW9uKGUpe3MuX29uUHJvdG9zdHViU3RhdHVzRXZlbnQoZSl9KX0pfX0se2tleToiX29uUHJvdG9zdHViU3RhdHVzRXZlbnQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb207aWYoIWUudG8uaW5jbHVkZXMoIi9zdGF0dXMiKSlyZXR1cm4gdm9pZCBNLmVycm9yKCJbUmVnaXN0cnkgb25Qcm90b3N0dWJTdGF0dXNFdmVudF0gTm90IFN0YXR1cyBFdmVudDogIixlKTsKLy8gcHJvY2VzcyBzdGF0dXMgZXZlbnRzIGZyb20gbWVzc2FnZSBub2RlIHByb3Rvc3R1YnMKaWYoci5pbmNsdWRlcygiL3Byb3Rvc3R1Yi8iKSkKLy8gVE9ETzogdW5jb21tZW50IGJlbG93IHdoZW4gcHJvdG9zdHVicyBhcmUgdXBkYXRlZCB3aXRoIG5ldyBzdGF0dXMgdmFsdWUgImxpdmUiCigwLHMuZGVmYXVsdCkodC5wcm90b3N0dWJzTGlzdCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0LnByb3Rvc3R1YnNMaXN0W2VdLnVybD09PXJ9KS5tYXAoZnVuY3Rpb24ocil7dC5wcm90b3N0dWJzTGlzdFtyXS5zdGF0dXM9ZS5ib2R5LnZhbHVlfSk7ZWxzZQovLyBwcm9jZXNzIHN0YXR1cyBldmVudHMgZnJvbSBwMnAgY29ubmVjdGlvbnMKaWYoZS5ib2R5LnJlc291cmNlKXt2YXIgbj1lLmJvZHkucmVzb3VyY2U7aWYodC5wMnBDb25uZWN0aW9uTGlzdFtuXSl0LnAycENvbm5lY3Rpb25MaXN0W25dLnN0YXR1cz1lLmJvZHkudmFsdWUsdC5wMnBDb25uZWN0aW9uTGlzdFtuXS51cmw9cjtlbHNle3ZhciBvPXtzdGF0dXM6ZS5ib2R5LnZhbHVlLHVybDpyfTt0LnAycENvbm5lY3Rpb25MaXN0W25dPW99Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSAtIG9uUHJvdG9zdHViU3RhdHVzRXZlbnRdIC0gUDJQQ29ubmVjdGlvbiBzdGF0dXM6ICcsIF90aGlzLnAycENvbm5lY3Rpb25MaXN0W3JlbW90ZVJ1bnRpbWVVUkxdKTsKLy8gVXBkYXRlIFAyUCBSZXF1ZXN0ZXIgcHJvdG9zdHViIGlmIGl0IGlzIGNvbWluZyBmcm9tIHRoZXJlCnIuaW5jbHVkZXMoIi9wMnByZXF1ZXN0ZXIvIik/dC5wMnBSZXF1ZXN0ZXJTdHViW25dLnN0YXR1cz1lLmJvZHkudmFsdWU6Ci8vIGlmIGZyb20gUDJQSGFuZGxlciB3aXRoIHN0YXR1cyBkaXNjb25lbmN0ZWQsIGxldHMgcmVtb3ZlIGZyb20gcDJwQ29ubmVjdGlvbkxpc3QKImRpc2Nvbm5lY3RlZCI9PT1lLmJvZHkudmFsdWUmJmRlbGV0ZSB0LnAycENvbm5lY3Rpb25MaXN0W25dfWVsc2V7aWYoci5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKSkKLy8gSXQgaXMgYW4gZXZlbnQgZnJvbSBQMlAgUmVxdWVzdGVyIHdpdGhvdXQgbWFuZGF0b3J5ICJyZXNvdXJjZSIgZmllbGQKcmV0dXJuIHZvaWQgTS5lcnJvcigiW1JlZ2lzdHJ5IG9uUHJvdG9zdHViU3RhdHVzRXZlbnRdIHJlc291cmNlIG1pc3Npbmc6ICIsZSk7Ci8vIEl0IGlzIGFuIGV2ZW50IGZyb20gUDJQIEhhbmRsZXIKdC5wMnBIYW5kbGVyU3R1Ylt0LnJ1bnRpbWVVUkxdLnN0YXR1cz1lLmJvZHkudmFsdWV9fX0se2tleToidW5yZWdpc3RlclN0dWIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0LnByb3Rvc3R1YnNMaXN0Lmhhc093blByb3BlcnR5KGUpPyhkZWxldGUgdC5wcm90b3N0dWJzTGlzdFtlXSxyKCJQcm90b3N0dWJVUkwgcmVtb3ZlZCIpKTpuKCJFcnJvciBvbiB1bnJlZ2lzdGVyU3R1YjogSHlwZXJ0eSBub3QgZm91bmQiKX0pfX0se2tleToicmVnaXN0ZXJJZHBQcm94eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9dm9pZCAwOwovL2NoZWNrIGlmIG1lc3NhZ2VCdXMgaXMgcmVnaXN0ZXJlZCBpbiByZWdpc3RyeSBvciBub3QKdm9pZCAwPT09ci5fbWVzc2FnZUJ1cyYmbygiTWVzc2FnZUJ1cyBub3QgZm91bmQgb24gcmVnaXN0ZXJTdHViIiksaT0iZG9tYWluLWlkcDovLyIrdCsiL3N0dWIvIisoMCxPLmdlbmVyYXRlR1VJRCkoKSwKLy8gVE9ETzogT3B0aW1pemUgdGhpcwpyLmlkcFByb3h5TGlzdFt0XT17dXJsOmksc3RhdHVzOkwuREVQTE9ZSU5HfSxyLnNhbmRib3hlc0xpc3Quc2FuZGJveFtpXT1lLAovLyBzYW5kYm94LmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24obXNnKSB7Ci8vICAgX3RoaXMuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnKTsKLy8gfSk7Cm4oaSksci5fbWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihpKyIvc3RhdHVzIixmdW5jdGlvbihlKXtyLl9vbklkcFByb3h5U3RhdHVzRXZlbnQoZSl9KX0pfX0se2tleToiX29uSWRwUHJveHlTdGF0dXNFdmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbTtpZighZS50by5pbmNsdWRlcygiL3N0YXR1cyIpKXJldHVybiB2b2lkIE0uZXJyb3IoIltSZWdpc3RyeSBvbklkcFByb3h5U3RhdHVzRXZlbnRdIE5vdCBTdGF0dXMgRXZlbnQ6ICIsZSk7KDAscy5kZWZhdWx0KSh0LmlkcFByb3h5TGlzdCkuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0LmlkcFByb3h5TGlzdFtlXS51cmw9PT1yfSkubWFwKGZ1bmN0aW9uKHIpe3QuaWRwUHJveHlMaXN0W3JdLnN0YXR1cz1lLmJvZHkudmFsdWV9KX19LHtrZXk6ImRpc2NvdmVySWRwUHJveHkiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigiUGFyYW1ldGVyIHVybCBuZWVkZWQiKTt2YXIgdD10aGlzLHI9KDAsTy5kaXZpZGVVUkwpKGUpLG49ci5kb21haW47aWYodC5pZHBQcm94eUxpc3QuaGFzT3duUHJvcGVydHkobikmJnQuaWRwUHJveHlMaXN0W25dLnN0YXR1cz09PUwuTElWRSlyZXR1cm4gdC5pZHBQcm94eUxpc3Rbbl07dGhyb3cgdC5pZHBQcm94eUxpc3Rbbl09e3N0YXR1czpMLlBST0dSRVNTfSxuZXcgRXJyb3IoIltSZWdpc3RyeSAtIGRpc2NvdmVySWRwUHJveHkgXSBJZHAgUHJveHkgTm90IEZvdW5kLiBDcmVhdGluZyBvbmUiKX19LHtrZXk6InJlZ2lzdGVyUEVQIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obil7Ci8vVE9ETyBjaGVjayB3aGF0IHBhcmFtZXRlciBpbiB0aGUgcG9zdE1lc3NhZ2UgdGhlIHBlcCBpcy4Kci5wZXBMaXN0W3RdPWUsbigiUEVQIHJlZ2lzdGVyZWQgd2l0aCBzdWNjZXNzIil9KX19LHtrZXk6InVucmVnaXN0ZXJQRVAiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2b2lkIDA9PT10LnBlcExpc3RbZV0/bigiUGVwIE5vdCBmb3VuZC4iKTpyKCJQRVAgc3VjY2Vzc2Z1bGx5IHJlbW92ZWQuIil9KX19LHtrZXk6ImdldFNhbmRib3giLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJQYXJhbWV0ZXIgdXJsIG5lZWRlZCIpOwovLyBsb2cubG9nKCdbUmVnaXN0cnkgZ2V0U2FuZGJveF0gZ2V0U2FuZGJveCBmb3I6ICcsIHVybCwgJyBhbmQgY2FwYWJpbGl0aWVzOiAnLCBjb25zdHJhaW50cyk7CnZhciByPXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT12b2lkIDA7Ci8vaWYgbm8gYXBwU2FuZGJveCB3YXMgZm91bmQsIHRyeSB0byBzZWFyY2ggaW4gdGhlIG5vcm1hbCBzYW5kYm94ZXMgbGlzdAppZighKAovL2ZpcnN0IHRyeSB0byBmaW5kIHRoZSB1cmwgaW4gdGhlIGFwcFNhbmRib3ggbGlzdAppPXIuc2FuZGJveGVzTGlzdC5hcHBTYW5kYm94W2VdKSYmIShpPXIuc2FuZGJveGVzTGlzdC5zYW5kYm94W2VdKSl7dmFyIGE9dm9pZCAwO2E9ZS5pbmNsdWRlcygiOi8vIik/KDAsTy5kaXZpZGVVUkwpKGUpLmRvbWFpbjplOwovLyBzZWFyY2ggaW4gdGhlIHNhbmRib3hlcyBsaXN0IGZvciBhIGVudHJ5IGNvbnRhaW5pbmcgdGhlIGRvbWFpbiBnaXZlbgpmb3IodmFyIHUgaW4gci5zYW5kYm94ZXNMaXN0LnNhbmRib3gpCi8vdG9kbzogdW5jb21tZW50IHNhbmRib3ggY29uc3RyYWludHMgbWF0Y2ggY29uZGl0aW9uIHdpdGggcnVudGltZSBzaGFyaW5nCmlmKHUuaW5jbHVkZXMoYSkmJnIuc2FuZGJveGVzTGlzdC5zYW5kYm94W3VdLm1hdGNoZXModCkpe3ZhciBjPWZ1bmN0aW9uKCl7dmFyIGU9ci5zYW5kYm94ZXNMaXN0LnNhbmRib3hbdV07cmV0dXJuKDAscy5kZWZhdWx0KSh0KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuImJyb3dzZXIiPT09dCYmZS50eXBlPT09di5TYW5kYm94VHlwZS5OT1JNQUx8fCJ3aW5kb3dTYW5ib3giPT09dCYmZS50eXBlPT09di5TYW5kYm94VHlwZS5XSU5ET1d9KS5sZW5ndGg+MCYmKGk9ZSksImJyZWFrIn0oKTtpZigiYnJlYWsiPT09YylicmVha319aT9uKGkpOm8oIm5vIHNhbmRib3ggZm91bmQgZm9yOiAiK2UpfSl9fSx7a2V5OiJyZXNvbHZlTm9ybWFsU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ3Jlc29sdmVOb3JtYWxTdHViICcgKyB1cmwpOwp2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7Ci8vc3BsaXQgdGhlIHVybCB0byBmaW5kIHRoZSBkb21haW5VUkwuIGRlYWxzIHdpdGggdGhlIHVybCBmb3IgZXhhbXBsZSBhczoKLy8iaHlwZXJ0eS1ydW50aW1lOi8vc3AxL3Byb3Rvc3R1Yi8xMjMiLAp2YXIgbz0oMCxPLmRpdmlkZVVSTCkoZSksaT1vLmRvbWFpbixzPW8udHlwZTtlLmluY2x1ZGVzKHQucnVudGltZVVSTCkmJihNLmVycm9yKCJbUmVnaXN0cnkgLSByZXNvbHZlXSBVUkwgdG8gYmUgcmVzb2x2ZWQgc2hvdWxkIGhhdmUgbGlzdGVuZXJzICIsZSksbigiW1JlZ2lzdHJ5IC0gcmVzb2x2ZV0gVVJMIHRvIGJlIHJlc29sdmVkIHNob3VsZCBoYXZlIGxpc3RlbmVycyAiLGUpKSwKLy8gcmVzb2x2ZSB0aGUgZG9tYWluIHByb3Rvc3R1YiBpbiBjYXNlIG9mIGEgbWVzc2FnZSB0byBnbG9iYWwgcmVnaXN0cnkKZS5pbmNsdWRlcygiZ2xvYmFsOi8vcmVnaXN0cnkiKT9pPXQuX2RvbWFpbjppLmluZGV4T2YoIm1zZy1ub2RlLiIpJiZpLmluZGV4T2YoInJlZ2lzdHJ5LiIpfHwoaT1pLnN1YnN0cmluZyhpLmluZGV4T2YoIi4iKSsxKSksdC5pc0xlZ2FjeShlKS50aGVuKGZ1bmN0aW9uKG8pewovLyBpZiBsZWdhY3kgaXQgc2hvdWxkIHJlc29sdmUgZm9yIDxwcm90b2NvbD4uPGRvbWFpbj4KbyYmImRvbWFpbi1pZHAiIT09cyYmKGk9cysiLiIrKDAsTy5nZXRVc2VySWRlbnRpdHlEb21haW4pKGUpKSxNLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlXSBkb21haW5Vcmw6IixpKTt2YXIgYT12b2lkIDA7YT0iZG9tYWluLWlkcCI9PT1zPyEhdC5pZHBQcm94eUxpc3QuaGFzT3duUHJvcGVydHkoaSkmJnQuaWRwUHJveHlMaXN0W2ldOiEhdC5wcm90b3N0dWJzTGlzdC5oYXNPd25Qcm9wZXJ0eShpKSYmdC5wcm90b3N0dWJzTGlzdFtpXSxNLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlXSByZWdpc3RyZWQ6IixhKSwKLy8gVE9ETyBzaW5jZSB0aGUgcHJvdG9zdHVicyBoYXZlIG90aGVyIHN0YXRlcyB0aGlzIHNob3VsZCBiZSByZXZpc2VkLCBiZWNhdXNlIHRoZSBzdGF0dXMgY291bGQgY2hhbmdlIGZyb20gREVQTE9ZRUQgdG8gTElWRQovLyBUT0RPIGFuZCB0aGlzIHZhbGlkYXRpb24gd2lsbCB0cmlnZ2VyIGEgbmV3IGxvYWQgb2YgSURQUHJveHkgb3IgUHJvdG9zdHViOwphJiZhLmhhc093blByb3BlcnR5KCJzdGF0dXMiKSYmKGEuc3RhdHVzPT09TC5ERVBMT1lFRHx8YS5zdGF0dXM9PT1MLkNSRUFURUR8fGEuc3RhdHVzPT09TC5MSVZFfHxhLnN0YXR1cz09PUwuRElTQ09OTkVDVEVEKT8oTS5pbmZvKCJbUmVnaXN0cnkucmVzb2x2ZV0gUmVzb2x2ZWQ6ICIsYS51cmwsYS5zdGF0dXMpLHIoYS51cmwpKToKLy90b2RvOiB1c2Ugc3dpdGNoLWNhc2UgdG8gc3VwcG9ydCBvdGhlciB0eXBlcyBvZiBzdHVicwoiZG9tYWluLWlkcCI9PT1zPygKLy8gVGhlIElkUCBQcm94eSBkb2VzIG5vdCBleGlzdCwgbGV0J3MgcHJlcGFyZSBpdHMgZGVwbG95bWVudCBieSB3YXRjaGluZyBpdHMgc3RhdHVzCnQud2F0Y2hpbmdZb3Uub2JzZXJ2ZSgiaWRwUHJveHlMaXN0IixmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IC0gcmVzb2x2ZU5vcm1hbFN0dWJdIGlkcFByb3h5TGlzdCBjaGFuZ2VkICcgKyBfdGhpcy5pZHBQcm94eUxpc3QpOwp2YXIgbj1lLmtleXBhdGg7bi5pbmNsdWRlcygic3RhdHVzIikmJihuPW4ucmVwbGFjZSgiLnN0YXR1cyIsIiIpKSxuPT09aSYmInN0YXR1cyI9PT1lLm5hbWUmJmUubmV3VmFsdWU9PT1MLkNSRUFURUQmJgovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlTm9ybWFsU3R1Yl0gaWRwUHJveHlMaXN0IGlzIGxpdmUgJyArIF90aGlzLmlkcFByb3h5TGlzdFtkb21haW5VcmxdKTsKcih0LmlkcFByb3h5TGlzdFtpXS51cmwpfSksYXx8KAovLyB0aGlzIHByb2Nlc3Mgd2lsbCBsb2FkIHRoZSBpZHAgcHJveHksIGJlY2F1c2UgaXMgbm90IHlldCByZWdpc3RlcmVkOwpNLmluZm8oIltSZWdpc3RyeS5yZXNvbHZlTm9ybWFsU3R1Yl0gZGVwbG95IG5ldyBJRFBQcm94eTogIixpKSx0LmxvYWRlci5sb2FkSWRwUHJveHkoaSkudGhlbihmdW5jdGlvbigpe00uaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVOb3JtYWxTdHViXSBJZFAgUHJveHkgZGVwbG95ZWQ6ICIsdC5pZHBQcm94eUxpc3RbaV0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7TS5lcnJvcigiW1JlZ2lzdHJ5LnJlc29sdmVdIEVycm9yIHJlc29sdmluZyBMb2FkIElEUFByb3h5OiAiLGUpLHQuaWRwUHJveHlMaXN0W2ldLnN0YXR1cz0iZGVwbG95bWVudC1mYWlsZWQiLG4oZSl9KSkpOigKLy8gVGhlIHByb3RvU3R1YiBkb2VzIG5vdCBleGlzdCwgbGV0J3MgcHJlcGFyZSBpdHMgZGVwbG95bWVudCBieSB3YXRjaGluZyBpdHMgc3RhdHVzCnQud2F0Y2hpbmdZb3Uub2JzZXJ2ZSgicHJvdG9zdHVic0xpc3QiLGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlTm9ybWFsU3R1Yl0gcHJvdG9zdHVic0xpc3QgY2hhbmdlZCAnICsgX3RoaXMucHJvdG9zdHVic0xpc3QpOwp2YXIgbj1lLmtleXBhdGg7bi5pbmNsdWRlcygic3RhdHVzIikmJihuPW4ucmVwbGFjZSgiLnN0YXR1cyIsIiIpKSxuPT09aSYmInN0YXR1cyI9PT1lLm5hbWUmJmUubmV3VmFsdWU9PT1MLkNSRUFURUQmJgovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlXSBwcm90b3N0dWIgaXMgbGl2ZSAnICsgX3RoaXMucHJvdG9zdHVic0xpc3RbZG9tYWluVXJsXSk7CnIodC5wcm90b3N0dWJzTGlzdFtpXS51cmwpfSksYXx8KAovLyBsZXRzIGRlcGxveSB0aGUgcHJvdG9zdHViCk0uaW5mbygiW1JlZ2lzdHJ5LnJlc29sdmVdIHRyaWdnZXIgbmV3IFByb3RvY29sU3R1YjogIixpKSx0LmxvYWRlci5sb2FkU3R1YihpKS50aGVuKGZ1bmN0aW9uKCl7fSkuY2F0Y2goZnVuY3Rpb24oZSl7TS5lcnJvcigiW1JlZ2lzdHJ5LnJlc29sdmVOb3JtYWxTdHViXSBFcnJvciByZXNvbHZpbmcgTG9hZCBQcm90b2NvbFN0dWI6ICIsZSksbihlKX0pKSl9KS5jYXRjaChmdW5jdGlvbihlKXtNLmVycm9yKCJbUmVnaXN0cnkucmVzb2x2ZV0gRXJyb3IgcmVzb2x2aW5nIGlzbGVnYWN5OiAiLGUpLG4oZSl9KX0pfX0se2tleToicmVzb2x2ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7TS5pbmZvKCJbUmVnaXN0cnkgLSBSZXNvbHZlXSAtICAiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIG5ldyB1LmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz1lLnRvP2UudG86ZSxpPSEoIWUuYm9keXx8IWUuYm9keS5wMnApJiZlLmJvZHkucDJwOwovLyBsb2cubG9nKCdQMlA6ICcsIHAycCwgdXJsKTsKLy8gbG9nLmxvZygnUDJQIC0gcDJwSGFuZGxlclN0dWI6ICcsICFfdGhpcy5wMnBIYW5kbGVyU3R1YltfdGhpcy5ydW50aW1lVVJMXSwgX3RoaXMucDJwSGFuZGxlclN0dWIsIF90aGlzLnJ1bnRpbWVVUkwpOwovLyBsb2cubG9nKCdQMlAgLSBpc0JhY2tlbmRTZXJ2aWNlVVJMOiAnLCBpc0JhY2tlbmRTZXJ2aWNlVVJMKHVybCksIGlzQmFja2VuZFNlcnZpY2VVUkwsIHVybCk7Ci8vIGxvZy5sb2coJ1AyUCAtIGluY2x1ZGVzIHJ1bnRpbWVVUkw6ICcsIHVybC5pbmNsdWRlcyhfdGhpcy5ydW50aW1lVVJMKSk7Ci8vIGxvZy5sb2coJ1AyUCAtIGluY2x1ZGVzIHAycGhhbmRsZXI6ICcsIHVybC5pbmNsdWRlcygnL3AycGhhbmRsZXIvJykpOwovLyBsb2cubG9nKCdQMlAgLSBpbmNsdWRlcyBwMnByZXF1ZXN0ZXI6ICcsIHVybC5pbmNsdWRlcygnL3AycHJlcXVlc3Rlci8nKSk7Ci8vIFNraXAgcDJwIHByb2NlZHVyZSB3aGVuIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIFJ1bnRpbWUgb3IgZm9yIGJhY2tlbmQgc2VydmljZXMKIXQucDJwSGFuZGxlclN0dWJbdC5ydW50aW1lVVJMXXx8KDAsTy5pc0JhY2tlbmRTZXJ2aWNlVVJMKShvKXx8by5pbmNsdWRlcyh0LnJ1bnRpbWVVUkwpfHxvLmluY2x1ZGVzKCIvcDJwaGFuZGxlci8iKXx8by5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKT8oTS5pbmZvKCJbUmVnaXN0cnkgLSByZXNvbHZlXSAtIFJlc29sdmUgbm9ybWFsIHN0dWI6ICIsdC5wMnBIYW5kbGVyU3R1Yix0LnJ1bnRpbWVVUkwsKDAsTy5pc0JhY2tlbmRTZXJ2aWNlVVJMKShvKSxpLG8pLHQucmVzb2x2ZU5vcm1hbFN0dWIobykudGhlbihmdW5jdGlvbihlKXtyKGUpfSkpOihNLmluZm8oIltSZWdpc3RyeSAtIHJlc29sdmVdIC0gY2hlY2tQMlA6ICIsaSxvLHQuX3AycENvbm5lY3Rpb25SZXNvbHZlKSx0Ll9wMnBDb25uZWN0aW9uUmVzb2x2ZS5jaGVja1AyUChlKS50aGVuKGZ1bmN0aW9uKG4pewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSByZXNvbHZlXSBmb3VuZCByZWdpc3RlcmVkIFAyUDogJywgcmVnaXN0ZXJlZFAyUCk7CnZhciBzPXQucDJwQ29ubmVjdGlvbkxpc3Rbbi5ydW50aW1lXTtzd2l0Y2goc3x8KHM9bix0LnAycENvbm5lY3Rpb25MaXN0W24ucnVudGltZV09cykscy5zdGF0dXMpe2Nhc2UgTC5MSVZFOmUuYm9keS5wZWVyPW4ucnVudGltZSxyKHMudXJsLGUpO2JyZWFrO2Nhc2UgTC5DUkVBVEVEOi8vIHAycCBjb25uZWN0aW9uIHNldHVwIGlzIG9uZ29pbmcsIHVzZSBNTiBTdHViCmNhc2UgTC5QUk9HUkVTUzp0LnJlc29sdmVOb3JtYWxTdHViKG8pLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pO2JyZWFrO2Nhc2UgTC5ESVNDT05ORUNURUQ6Ci8vIHAycCBjb25uZWN0aW9uIHN0dWIgd2FzIGRpc2Nvbm5lY3RlZCwgbGV0J3MgYXNrIHRvIGNvbm5lY3QgYWdhaW4KTS5pbmZvKCJbUmVnaXN0cnkgLSBSZXNvbHZlXSAtIHAycENvbm5lY3Rpb24gaXMgZGlzY29ubmVjdGVkIGxldHMgdHJ5IHRvIHJlY29ubmVjdCIpLHQuX3AycENvbm5lY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3RlcihzKS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgLSBSZXNvbHZlXSAtIHdhcyByZWNvbm5lY3RlZCB3aXRoIHAycFJlcXVlc3RlclN0dWJ0OiAnLCByZXR1cm5VUkwpOwpyKGUpfSxmdW5jdGlvbihlKXtNLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gUmVhc29uOiAiLGUpLHQucmVzb2x2ZU5vcm1hbFN0dWIobykudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9KTticmVhaztkZWZhdWx0Ok0uaW5mbygiW1JlZ2lzdHJ5IC0gcmVzb2x2ZV0gLSBQMlA6ICIsaSksaT90Ll9zZXR1cFAyUFJlcXVlc3RlcihuKS50aGVuKGZ1bmN0aW9uKGUpewovLyBubyBwMnAgY29ubmVjdGlvbiBleGlzdHMgYnV0IHRoZSBtZXNzYWdlIHNlbmRlciBpcyBhc2tpbmcgb25lLiBMZXRzIHRyeSB0byBzZXR1cCBvbmUKcihlKX0sZnVuY3Rpb24oZSl7TS5pbmZvKCJbUmVnaXN0cnkgLSBSZXNvbHZlXSAtIFJlYXNvbjogIixlKSx0LnJlc29sdmVOb3JtYWxTdHViKG8pLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pfSk6Ci8vIG5vIHAycCBjb25uZWN0aW9uIGV4aXN0cyBhbmQgdGhlIG1lc3NhZ2Ugc2VuZGVyIGRvZXMgbm90IGFzayBvbmUuIExldHMgdXNlIHRoZSBNTiBTdHViCnQucmVzb2x2ZU5vcm1hbFN0dWIobykudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9fSxmdW5jdGlvbihlKXtNLmluZm8oIltSZWdpc3RyeSAtIFJlc29sdmVdIC0gUmVhc29uOiAiLGUpLHQucmVzb2x2ZU5vcm1hbFN0dWIobykudGhlbihmdW5jdGlvbihlKXtyKGUpfSl9KSl9KX19LHtrZXk6Il9zZXR1cFAyUFJlcXVlc3RlciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gTS5sb2coIltSZWdpc3RyeS5fc2V0dXBQMlBDb25uZWN0aW9uXSBsb2FkU3R1YiB3aXRoIHAycFJlcXVlc3RlcjogIixlKSxuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89ZS5ydW50aW1lLGk9e3JlbW90ZVJ1bnRpbWVVUkw6byxwMnBIYW5kbGVyOmUucDJwSGFuZGxlcixwMnBSZXF1ZXN0ZXJTdHViOiEwfTsKLy8gbGV0cyBwcmVwYXJlIHRoZSBwMnBSZXF1ZXN0ZXJTVHViIGRlcGxveW1lbnQgYnkgc2V0dGluZyBhbiBvYnNlcnZlciB0byBpdHMgc3RhdHVzIGNoYW5nZXMKdC53YXRjaGluZ1lvdS5vYnNlcnZlKCJwMnBSZXF1ZXN0ZXJTdHViIixmdW5jdGlvbihlKXtNLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIHAycFJlcXVlc3RlclN0dWJzIGNoYW5nZWQgIit0LnAycFJlcXVlc3RlclN0dWIpLGUua2V5cGF0aC5zcGxpdCgiLiIpWzBdPT09byYmInN0YXR1cyI9PT1lLm5hbWUmJmUubmV3VmFsdWU9PT1MLkxJVkUmJihNLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIHAycFJlcXVlc3RlciBpcyBsaXZlICIrdC5wMnBSZXF1ZXN0ZXJTdHViW29dKSxyKHQucDJwUmVxdWVzdGVyU3R1YltvXS51cmwpKX0pLAovLyAgc3R1YiBsb2FkCnQubG9hZGVyLmxvYWRTdHViKGUucDJwUmVxdWVzdGVyLGkpLnRoZW4oZnVuY3Rpb24oKXtNLmxvZygiW1JlZ2lzdHJ5Ll9zZXR1cFAyUENvbm5lY3Rpb25dIHAycFJlcXVlc3RlciBkZXBsb3llZDogIix0LnAycFJlcXVlc3RlclN0dWJbb10pfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pfSl9fSx7a2V5OiJpc0xlZ2FjeSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHUuZGVmYXVsdChmdW5jdGlvbihyLG4pe2lmKGU9PT10Ll9kb21haW4pcmV0dXJuIHIoITEpO00ubG9nKCJbUmVnaXN0cnldIFtSZWdpc3RyeS5SZWdpc3RyeS5pc0xlZ2FjeV0gIixlKTsKLy8gVE9ETzogdG8gYmUgZGVmaW5lZCBpbiB0aGUgcnVudGltZSBjb25maWd1cmF0aW9uCnZhciBvPVsiaHlwZXJ0eS1ydW50aW1lIiwiZG9tYWluIiwiZ2xvYmFsIiwiaHlwZXJ0eSJdLGk9KDAsTy5kaXZpZGVVUkwpKGUpO2lmKC0xIT09by5pbmRleE9mKGkudHlwZSl8fGkuZG9tYWluPT09dC5fZG9tYWluKXJldHVybiByKCExKTsKLy8gcHJvY2VzcyBVc2VyIFVSTHMKaWYoZS5zcGxpdCgiQCIpLmxlbmd0aD4xKXt2YXIgcz1pLmRvbWFpbjsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5XSBbUmVnaXN0cnkuUmVnaXN0cnkuaXNMZWdhY3ldIGRvbWFpbjogJywgZG9tYWluKTsKaWYodC5pZHBMZWdhY3lQcm94eUxpc3QuaGFzT3duUHJvcGVydHkocykpe3ZhciBhPXQuaWRwTGVnYWN5UHJveHlMaXN0W3NdO3JldHVybiByKGEuaW50ZXJ3b3JraW5nP2EuaW50ZXJ3b3JraW5nOiExKX10Ll9sb2FkZXIuZGVzY3JpcHRvcnMuZ2V0SWRwUHJveHlEZXNjcmlwdG9yKHMpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeV0gW1JlZ2lzdHJ5LlJlZ2lzdHJ5LmlzTGVnYWN5XSBMZWdhY3kgc3R1YiBkZXNjcmlwdG9yOiAnLCByZXN1bHQpOwplLmludGVyd29ya2luZz8odC5pZHBMZWdhY3lQcm94eUxpc3Rbc109ZSxyKGUuaW50ZXJ3b3JraW5nKSk6cighMSl9KS5jYXRjaChmdW5jdGlvbihlKXtNLndhcm4oInByb2JsZW0gbG9hZGluZyBpZHAgcHJveHkgZGVzY3JpcHRvciBmb3IgZG9tYWluOiIscywiIGJlY2F1c2UgIixlKSxuKGUpfSl9ZWxzZQovLyBwcm9jZXNzIHByb3Rvc3R1YiBVUkxzCnIodC5pc0ludGVyd29ya2luZ1Byb3RvU3R1YihlKSl9KX19LHtrZXk6ImlzTG9jYWwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVsiaHlwZXJ0eS1ydW50aW1lIiwicnVudGltZSJdLHI9WyJoeXBlcnR5Il0sbj1lLnNwbGl0KCI6Ly8iKVswXTsKLy8gUHJvY2VzcyBSdW50aW1lIENvcmUgVVJMcy4KLy8gTWVzc2FnZXMgb3JpZ2luYXRlZCBmcm9tIHByb3Rvc3R1YnMgc2hvdWxkIGFsc28gbm90IGluY2x1ZGUgdGhlIHJ1bnRpbWVVUkwgaW4gaXRzIFVSTC4KaWYoLTEhPT10LmluZGV4T2YobikpcmV0dXJuIGUuaW5jbHVkZXModGhpcy5ydW50aW1lVVJMKTsKLy8gUHJvY2VzcyBIeXBlcnR5IFVSTHMKLy8gVG9kbzogaHlwZXJ0aWVzTGlzdCBzaG91bGQgYmUgYW4gb2JqZWN0IG5vdCBhbiBhcnJheQppZigtMSE9PXIuaW5kZXhPZihuKSl7Zm9yKHZhciBvIGluIHRoaXMuaHlwZXJ0aWVzTGlzdCl7aWYodGhpcy5oeXBlcnRpZXNMaXN0W29dLmh5cGVydHlVUkw9PT1lKXJldHVybiEwfXJldHVybiExfQovLyBQcm9jZXNzIERhdGEgT2JqZWN0IFVSTHMKZS5pbmNsdWRlcygiL3N1YnNjcmlwdGlvbiIpJiYoZT1lLnN1YnN0cmluZygwLGUuaW5kZXhPZigiL3N1YnNjcmlwdGlvbiIpKSk7dmFyIGk9dGhpcy5kYXRhT2JqZWN0TGlzdFtlXTtyZXR1cm4hIWkmJighaS5pbnRlcndvcmtpbmd8fCFpLmludGVyd29ya2luZyl9fSx7a2V5OiJpc0ludGVyd29ya2luZ1Byb3RvU3R1YiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4iYm9vbGVhbiIhPXR5cGVvZiBlJiYoISFlLmluY2x1ZGVzKCIvcHJvdG9zdHViLyIpJiYoMCxzLmRlZmF1bHQpKHQucHJvdG9zdHVic0xpc3QpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gdC5wcm90b3N0dWJzTGlzdFtyXS51cmw9PT1lfSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiEhdC5wcm90b3N0dWJzTGlzdFtlXS5oYXNPd25Qcm9wZXJ0eSgiaW50ZXJ3b3JraW5nIikmJnQucHJvdG9zdHVic0xpc3RbZV0uaW50ZXJ3b3JraW5nfSlbMF0pfX0se2tleToibG9hZGVyIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbG9hZGVyPWV9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2FkZXJ9fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUJ1c30sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fbWVzc2FnZUJ1cz1lLHQuX21lc3NhZ2VCdXMuYWRkTGlzdGVuZXIodC5yZWdpc3RyeVVSTCxmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IGxpc3RlbmVyXSAnLCBtc2cpOwooMCxPLmlzSHlwZXJ0eVVSTCkoZS5mcm9tKSxlLmJvZHkuaGFzT3duUHJvcGVydHkoImNyaXRlcmlhIik7ZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXNvdXJjZSIpJiYiLiIhPT1lLmJvZHkucmVzb3VyY2UmJigoMCxPLmlzVVJMKShlLmJvZHkucmVzb3VyY2UpLCgwLE8uaXNVc2VyVVJMKShlLmJvZHkucmVzb3VyY2UpLCgwLE8uaXNIeXBlcnR5VVJMKShlLmJvZHkucmVzb3VyY2UpKTtlLnR5cGU7aWYoZS5ib2R5Lmhhc093blByb3BlcnR5KCJ2YWx1ZSIpJiYoZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KCJuYW1lIiksZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KCJ1c2VyIikpLCJyZXNwb25zZSI9PT1lLnR5cGUpcmV0dXJuIHZvaWQgTS5lcnJvcigiW1JlZ2lzdGVyIGxpc3RlbmVyXSBza2lwcGluZyAiLGUpOwovLyBtc2cgc2VudCBieSBpZGVudGl0eSBtYW5hZ2VyIGxpYnJhcnkKdmFyIHI9dC5fZ2V0SWRlbnRpdHlBc3NvY2lhdGVkKGUuYm9keS5yZXNvdXJjZSxlLmJvZHkuY3JpdGVyaWEpLG49e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTp7cmVzb3VyY2U6cn19O24uYm9keS5jb2RlPXI/MjAwOjQwNCx0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG4pfSk7Ci8vIEluc3RhbGwgQWRkcmVzc0FsbG9jYXRpb24KdmFyIHI9Yi5kZWZhdWx0Lmluc3RhbmNlO3QuYWRkcmVzc0FsbG9jYXRpb249cix0Ll9kb21haW5SZWdpc3RyYXRpb249bmV3IHcuZGVmYXVsdCh0LnJ1bnRpbWVVUkwsdC5yZWdpc3RyeVVSTCx0Ll9kb21haW4sZSl9fV0pLFJlZ2lzdHJ5fSgpO3QuZGVmYXVsdD14LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ0NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDQ1KSxfX2VzTW9kdWxlOiEwfX0sLyogNDQ1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDEzNykscigxOTApLGUuZXhwb3J0cz1yKDE0MSkuZigiaXRlcmF0b3IiKX0sLyogNDQ2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NDcpLF9fZXNNb2R1bGU6ITB9fSwvKiA0NDcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDQ4KSxyKDE4NSkscig0NTMpLHIoNDU0KSxlLmV4cG9ydHM9cigxMykuU3ltYm9sfSwvKiA0NDggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbQp2YXIgbj1yKDE3KSxvPXIoNTcpLGk9cig0Nikscz1yKDIxKSxhPXIoMTg3KSx1PXIoNDQ5KS5LRVksYz1yKDY2KSxmPXIoMTMyKSxsPXIoOTYpLGQ9cig5NCkscD1yKDIyKSx5PXIoMTQxKSxoPXIoMTQyKSx2PXIoNDUwKSxnPXIoNDUxKSxiPXIoNDApLF89cig0MSksbT1yKDQ1KSxSPXIoMTM2KSx3PXIoNzYpLFM9cigxMzgpLGs9cig0NTIpLE89cigxNDMpLFA9cigzOSksTT1yKDY0KSxMPU8uZix4PVAuZixBPWsuZixEPW4uU3ltYm9sLFU9bi5KU09OLGo9VSYmVS5zdHJpbmdpZnksRT1wKCJfaGlkZGVuIiksST1wKCJ0b1ByaW1pdGl2ZSIpLEM9e30ucHJvcGVydHlJc0VudW1lcmFibGUsVD1mKCJzeW1ib2wtcmVnaXN0cnkiKSxxPWYoInN5bWJvbHMiKSxIPWYoIm9wLXN5bWJvbHMiKSxGPU9iamVjdC5wcm90b3R5cGUsTj0iZnVuY3Rpb24iPT10eXBlb2YgRCxCPW4uUU9iamVjdCxHPSFCfHwhQi5wcm90b3R5cGV8fCFCLnByb3RvdHlwZS5maW5kQ2hpbGQsSz1pJiZjKGZ1bmN0aW9uKCl7cmV0dXJuIDchPVMoeCh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiB4KHRoaXMsImEiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKGUsdCxyKXt2YXIgbj1MKEYsdCk7biYmZGVsZXRlIEZbdF0seChlLHQsciksbiYmZSE9PUYmJngoRix0LG4pfTp4LFY9ZnVuY3Rpb24oZSl7dmFyIHQ9cVtlXT1TKEQucHJvdG90eXBlKTtyZXR1cm4gdC5faz1lLHR9LFc9TiYmInN5bWJvbCI9PXR5cGVvZiBELml0ZXJhdG9yP2Z1bmN0aW9uKGUpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgZX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBEfSxZPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZT09PUYmJlkoSCx0LHIpLGIoZSksdD1SKHQsITApLGIociksbyhxLHQpPyhyLmVudW1lcmFibGU/KG8oZSxFKSYmZVtFXVt0XSYmKGVbRV1bdF09ITEpLHI9UyhyLHtlbnVtZXJhYmxlOncoMCwhMSl9KSk6KG8oZSxFKXx8eChlLEUsdygxLHt9KSksZVtFXVt0XT0hMCksSyhlLHQscikpOngoZSx0LHIpfSx6PWZ1bmN0aW9uKGUsdCl7YihlKTtmb3IodmFyIHIsbj12KHQ9bSh0KSksbz0wLGk9bi5sZW5ndGg7aT5vOylZKGUscj1uW28rK10sdFtyXSk7cmV0dXJuIGV9LEo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD9TKGUpOnooUyhlKSx0KX0sWj1mdW5jdGlvbihlKXt2YXIgdD1DLmNhbGwodGhpcyxlPVIoZSwhMCkpO3JldHVybiEodGhpcz09PUYmJm8ocSxlKSYmIW8oSCxlKSkmJighKHR8fCFvKHRoaXMsZSl8fCFvKHEsZSl8fG8odGhpcyxFKSYmdGhpc1tFXVtlXSl8fHQpfSxRPWZ1bmN0aW9uKGUsdCl7aWYoZT1tKGUpLHQ9Uih0LCEwKSxlIT09Rnx8IW8ocSx0KXx8byhILHQpKXt2YXIgcj1MKGUsdCk7cmV0dXJuIXJ8fCFvKHEsdCl8fG8oZSxFKSYmZVtFXVt0XXx8KHIuZW51bWVyYWJsZT0hMCkscn19LCQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9QShtKGUpKSxuPVtdLGk9MDtyLmxlbmd0aD5pOylvKHEsdD1yW2krK10pfHx0PT1FfHx0PT11fHxuLnB1c2godCk7cmV0dXJuIG59LFg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9ZT09PUYsbj1BKHI/SDptKGUpKSxpPVtdLHM9MDtuLmxlbmd0aD5zOykhbyhxLHQ9bltzKytdKXx8ciYmIW8oRix0KXx8aS5wdXNoKHFbdF0pO3JldHVybiBpfTsKLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pCk58fChEPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIEQpdGhyb3cgVHlwZUVycm9yKCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhIik7dmFyIGU9ZChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksdD1mdW5jdGlvbihyKXt0aGlzPT09RiYmdC5jYWxsKEgsciksbyh0aGlzLEUpJiZvKHRoaXNbRV0sZSkmJih0aGlzW0VdW2VdPSExKSxLKHRoaXMsZSx3KDEscikpfTtyZXR1cm4gaSYmRyYmSyhGLGUse2NvbmZpZ3VyYWJsZTohMCxzZXQ6dH0pLFYoZSl9LGEoRC5wcm90b3R5cGUsInRvU3RyaW5nIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksTy5mPVEsUC5mPVkscigyMDEpLmY9ay5mPSQscig3OCkuZj1aLHIoMTQwKS5mPVgsaSYmIXIoNzUpJiZhKEYsInByb3BlcnR5SXNFbnVtZXJhYmxlIixaLCEwKSx5LmY9ZnVuY3Rpb24oZSl7cmV0dXJuIFYocChlKSl9KSxzKHMuRytzLlcrcy5GKiFOLHtTeW1ib2w6RH0pO2Zvcih2YXIgZWU9Imhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzIi5zcGxpdCgiLCIpLHRlPTA7ZWUubGVuZ3RoPnRlOylwKGVlW3RlKytdKTtmb3IodmFyIHJlPU0ocC5zdG9yZSksbmU9MDtyZS5sZW5ndGg+bmU7KWgocmVbbmUrK10pO3Mocy5TK3MuRiohTiwiU3ltYm9sIix7Ci8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KQpmb3I6ZnVuY3Rpb24oZSl7cmV0dXJuIG8oVCxlKz0iIik/VFtlXTpUW2VdPUQoZSl9LAovLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSkKa2V5Rm9yOmZ1bmN0aW9uKGUpe2lmKCFXKGUpKXRocm93IFR5cGVFcnJvcihlKyIgaXMgbm90IGEgc3ltYm9sISIpO2Zvcih2YXIgdCBpbiBUKWlmKFRbdF09PT1lKXJldHVybiB0fSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtHPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtHPSExfX0pLHMocy5TK3MuRiohTiwiT2JqZWN0Iix7Ci8vIDE5LjEuMi4yIE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKY3JlYXRlOkosCi8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQpkZWZpbmVQcm9wZXJ0eTpZLAovLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQpkZWZpbmVQcm9wZXJ0aWVzOnosCi8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOlEsCi8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCmdldE93blByb3BlcnR5TmFtZXM6JCwKLy8gMTkuMS4yLjggT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhPKQpnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6WH0pLAovLyAyNC4zLjIgSlNPTi5zdHJpbmdpZnkodmFsdWUgWywgcmVwbGFjZXIgWywgc3BhY2VdXSkKVSYmcyhzLlMrcy5GKighTnx8YyhmdW5jdGlvbigpe3ZhciBlPUQoKTsKLy8gTVMgRWRnZSBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMge30KLy8gV2ViS2l0IGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyBudWxsCi8vIFY4IHRocm93cyBvbiBib3hlZCBzeW1ib2xzCnJldHVybiJbbnVsbF0iIT1qKFtlXSl8fCJ7fSIhPWooe2E6ZX0pfHwie30iIT1qKE9iamVjdChlKSl9KSksIkpTT04iLHtzdHJpbmdpZnk6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIsbj1bZV0sbz0xO2FyZ3VtZW50cy5sZW5ndGg+bzspbi5wdXNoKGFyZ3VtZW50c1tvKytdKTtpZihyPXQ9blsxXSwoXyh0KXx8dm9pZCAwIT09ZSkmJiFXKGUpKS8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQKcmV0dXJuIGcodCl8fCh0PWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHImJih0PXIuY2FsbCh0aGlzLGUsdCkpLCFXKHQpKXJldHVybiB0fSksblsxXT10LGouYXBwbHkoVSxuKX19KSwKLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KQpELnByb3RvdHlwZVtJXXx8cig1OCkoRC5wcm90b3R5cGUsSSxELnByb3RvdHlwZS52YWx1ZU9mKSwKLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQpsKEQsIlN5bWJvbCIpLAovLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddCmwoTWF0aCwiTWF0aCIsITApLAovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQpsKG4uSlNPTiwiSlNPTiIsITApfSwvKiA0NDkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXIoOTQpKCJtZXRhIiksbz1yKDQxKSxpPXIoNTcpLHM9cigzOSkuZixhPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxjPSFyKDY2KShmdW5jdGlvbigpe3JldHVybiB1KE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpfSksZj1mdW5jdGlvbihlKXtzKGUsbix7dmFsdWU6e2k6Ik8iKyArK2EsLy8gb2JqZWN0IElECnc6e319fSl9LGw9ZnVuY3Rpb24oZSx0KXsKLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeAppZighbyhlKSlyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGU/ZTooInN0cmluZyI9PXR5cGVvZiBlPyJTIjoiUCIpK2U7aWYoIWkoZSxuKSl7Ci8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CmlmKCF1KGUpKXJldHVybiJGIjsKLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKaWYoIXQpcmV0dXJuIkUiOwovLyBhZGQgbWlzc2luZyBtZXRhZGF0YQpmKGUpfXJldHVybiBlW25dLml9LGQ9ZnVuY3Rpb24oZSx0KXtpZighaShlLG4pKXsKLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKaWYoIXUoZSkpcmV0dXJuITA7Ci8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCmlmKCF0KXJldHVybiExOwovLyBhZGQgbWlzc2luZyBtZXRhZGF0YQpmKGUpfXJldHVybiBlW25dLnd9LHA9ZnVuY3Rpb24oZSl7cmV0dXJuIGMmJnkuTkVFRCYmdShlKSYmIWkoZSxuKSYmZihlKSxlfSx5PWUuZXhwb3J0cz17S0VZOm4sTkVFRDohMSxmYXN0S2V5OmwsZ2V0V2VhazpkLG9uRnJlZXplOnB9fSwvKiA0NTAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwp2YXIgbj1yKDY0KSxvPXIoMTQwKSxpPXIoNzgpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD1uKGUpLHI9by5mO2lmKHIpZm9yKHZhciBzLGE9cihlKSx1PWkuZixjPTA7YS5sZW5ndGg+YzspdS5jYWxsKGUscz1hW2MrK10pJiZ0LnB1c2gocyk7cmV0dXJuIHR9fSwvKiA0NTEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQp2YXIgbj1yKDc0KTtlLmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuIkFycmF5Ij09bihlKX19LC8qIDQ1MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGZhbGxiYWNrIGZvciBJRTExIGJ1Z2d5IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHdpdGggaWZyYW1lIGFuZCB3aW5kb3cKdmFyIG49cig0NSksbz1yKDIwMSkuZixpPXt9LnRvU3RyaW5nLHM9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxhPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gbyhlKX1jYXRjaChlKXtyZXR1cm4gcy5zbGljZSgpfX07ZS5leHBvcnRzLmY9ZnVuY3Rpb24oZSl7cmV0dXJuIHMmJiJbb2JqZWN0IFdpbmRvd10iPT1pLmNhbGwoZSk/YShlKTpvKG4oZSkpfX0sLyogNDUzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDE0MikoImFzeW5jSXRlcmF0b3IiKX0sLyogNDU0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDE0MikoIm9ic2VydmFibGUiKX0sLyogNDU1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU2FuZGJveFR5cGU9dm9pZCAwO3ZhciBuPXIoMzEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig1OSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNjcpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoNjgpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPXIoNDY1KSxiPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZyksXz1yKDQ2NiksbT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF8pLFI9KHQuU2FuZGJveFR5cGU9e0FQUDoiYXBwIixOT1JNQUw6Im5vcm1hbCIsV0lORE9XOiJ3aW5kb3cifSxmdW5jdGlvbihlKXtmdW5jdGlvbiBTYW5kYm94KGUpeygwLGYuZGVmYXVsdCkodGhpcyxTYW5kYm94KTt2YXIgdD0oMCx5LmRlZmF1bHQpKHRoaXMsKFNhbmRib3guX19wcm90b19ffHwoMCx1LmRlZmF1bHQpKFNhbmRib3gpKS5jYWxsKHRoaXMpKSxyPXQ7cmV0dXJuIGUmJihyLmNhcGFiaWxpdGllcz1lKSx0fS8qKgogICAqIERlcGxveSBhbiBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50IGludG8gdGhlIHNhbmRib3guCiAgICogQHBhcmFtICB7c3RyaW5nfSBjb21wb25lbnRTb3VyY2VDb2RlIENvbXBvbmVudCBzb3VyY2UgY29kZSAoSHlwZXJ0eSwgUHJvdG9TdHViLCBldGMpCiAgICogQHBhcmFtICB7VVJMfSBjb21wb25lbnRVUkwgSHlwZXJ0eSwgUHJvdG9TdHViLCBvciBhbnkgb3RoZXIgY29tcG9uZW50IGFkZHJlc3MuCiAgICogQHBhcmFtICB7Q29uZmlnfSBjb25maWd1cmF0aW9uIENvbmZpZyBwYXJhbWV0ZXJzIG9mIHRoZSBjb21wb25lbnQKICAgKiBAcmV0dXJuIHtQcm9taXNlPHN0cmluZz59IHJldHVybiBkZXBsb3llZCBpZiBzdWNjZXNzZnVsLCBvciBhbnkgb3RoZXIgc3RyaW5nIHdpdGggYW4gZXJyb3IKICAgKi8KcmV0dXJuKDAsdi5kZWZhdWx0KShTYW5kYm94LGUpLCgwLGQuZGVmYXVsdCkoU2FuZGJveCxbe2tleToiZGVwbG95Q29tcG9uZW50Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzOwovLyBsZXQgbWVzc2FnZUZhY3RvcnkgPSBfdGhpcy5tZXNzYWdlRmFjdG9yeTsKcmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24oaSxzKXsKLy9GTE9XLU9VVDogZGVwbG95IG1lc3NhZ2UgZm9yIHRoZSBpbnRlcm5hbCBTYW5kYm94UmVnaXN0cnkgLT4gX29uRGVwbG95CnZhciBhPXt0eXBlOiJjcmVhdGUiLGZyb206Yi5kZWZhdWx0LkV4dGVybmFsRGVwbG95QWRkcmVzcyx0bzpiLmRlZmF1bHQuSW50ZXJuYWxEZXBsb3lBZGRyZXNzLGJvZHk6e3VybDp0LHNvdXJjZUNvZGU6ZSxjb25maWc6cixsaWJzOm59fTsKLy9zZW5kIG1lc3NhZ2UgaW50byB0aGUgc2FuZGJveCBpbnRlcm5hbHMgYW5kIHdhaXQgZm9yIHJlcGx5Cm8ucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT8KLy9pcyB0aGlzIHJlc3BvbnNlIGNvbXBsYWludCB3aXRoIHRoZSBzcGVjPwppKCJkZXBsb3llZCIpOnMoZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6InJlbW92ZUNvbXBvbmVudCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pewovL0ZMT1ctT1VUOiB1bi1kZXBsb3kgbWVzc2FnZSBmb3IgdGhlIGludGVybmFsIFNhbmRib3hSZWdpc3RyeSAtPiBfb25SZW1vdmUKdmFyIG89e3R5cGU6ImRlbGV0ZSIsZnJvbTpiLmRlZmF1bHQuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzLHRvOmIuZGVmYXVsdC5JbnRlcm5hbERlcGxveUFkZHJlc3MsYm9keTp7dXJsOmV9fTsKLy9zZW5kIG1lc3NhZ2UgaW50byB0aGUgc2FuZGJveCBpbnRlcm5hbHMgYW5kIHdhaXQgZm9yIHJlcGx5CnQucG9zdE1lc3NhZ2UobyxmdW5jdGlvbihlKXsyMDA9PT1lLmJvZHkuY29kZT8KLy9pcyB0aGlzIHJlc3BvbnNlIGNvbXBsYWludCB3aXRoIHRoZSBzcGVjPwpyKCJ1bmRlcGxveWVkIik6bihlLmJvZHkuZGVzYyl9KX0pfX0se2tleToibWF0Y2hlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSgwLG8uZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiEodC5jYXBhYmlsaXRpZXNbcl0mJnQuY2FwYWJpbGl0aWVzW3JdPT09ZVtyXSl9KTtyZXR1cm4gMD09PXIubGVuZ3RofHwhZVtyXX19XSksU2FuZGJveH0obS5kZWZhdWx0KSk7dC5kZWZhdWx0PVJ9LC8qIDQ1NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0NTcpLGUuZXhwb3J0cz1yKDEzKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Z9LC8qIDQ1NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDE5LjEuMi45IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQp2YXIgbj1yKDczKSxvPXIoMTg5KTtyKDEzNCkoImdldFByb3RvdHlwZU9mIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gbyhuKGUpKX19KX0sLyogNDU4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NTkpLF9fZXNNb2R1bGU6ITB9fSwvKiA0NTkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDYwKSxlLmV4cG9ydHM9cigxMykuT2JqZWN0LnNldFByb3RvdHlwZU9mfSwvKiA0NjAgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKQp2YXIgbj1yKDIxKTtuKG4uUywiT2JqZWN0Iix7c2V0UHJvdG90eXBlT2Y6cig0NjEpLnNldH0pfSwvKiA0NjEgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpewovLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy4KLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8KdmFyIG49cig0MSksbz1yKDQwKSxpPWZ1bmN0aW9uKGUsdCl7aWYobyhlKSwhbih0KSYmbnVsbCE9PXQpdGhyb3cgVHlwZUVycm9yKHQrIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKX07ZS5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoIl9fcHJvdG9fXyJpbnt9Py8vIGVzbGludC1kaXNhYmxlLWxpbmUKZnVuY3Rpb24oZSx0LG4pe3RyeXtuPXIoNjUpKEZ1bmN0aW9uLmNhbGwscigxNDMpLmYoT2JqZWN0LnByb3RvdHlwZSwiX19wcm90b19fIikuc2V0LDIpLG4oZSxbXSksdD0hKGUgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2goZSl7dD0hMH1yZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gaShlLHIpLHQ/ZS5fX3Byb3RvX189cjpuKGUsciksZX19KHt9LCExKTp2b2lkIDApLGNoZWNrOml9fSwvKiA0NjIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz17ZGVmYXVsdDpyKDQ2MyksX19lc01vZHVsZTohMH19LC8qIDQ2MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cig0NjQpO3ZhciBuPXIoMTMpLk9iamVjdDtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbi5jcmVhdGUoZSx0KX19LC8qIDQ2NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigyMSk7Ci8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQpuKG4uUywiT2JqZWN0Iix7Y3JlYXRlOnIoMTM4KX0pfSwvKiA0NjUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF9jb21wb25lbnRzOiA8dXJsOiBpbnN0YW5jZT4KICAqLwpmdW5jdGlvbiBTYW5kYm94UmVnaXN0cnkoZSl7KDAsby5kZWZhdWx0KSh0aGlzLFNhbmRib3hSZWdpc3RyeSk7dmFyIHQ9dGhpczt0Ll9idXM9ZSx0Ll9jb21wb25lbnRzPXt9LGUuYWRkTGlzdGVuZXIoU2FuZGJveFJlZ2lzdHJ5LkludGVybmFsRGVwbG95QWRkcmVzcyxmdW5jdGlvbihlKXsKLy9jb25zb2xlLmxvZygnU2FuZGJveFJlZ2lzdHJ5LVJDVjogJywgbXNnKTsKLy8gbGV0IHJlc3BvbnNlTXNnID0gewovLyAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IFNhbmRib3hSZWdpc3RyeS5JbnRlcm5hbERlcGxveUFkZHJlc3MsIHRvOiBTYW5kYm94UmVnaXN0cnkuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzCi8vIH07CnN3aXRjaChlLnR5cGUpe2Nhc2UiY3JlYXRlIjp0Ll9vbkRlcGxveShlKTticmVhaztjYXNlImRlbGV0ZSI6dC5fb25SZW1vdmUoZSl9fSl9cmV0dXJuKDAscy5kZWZhdWx0KShTYW5kYm94UmVnaXN0cnksW3trZXk6Il9yZXNwb25zZU1zZyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOlNhbmRib3hSZWdpc3RyeS5JbnRlcm5hbERlcGxveUFkZHJlc3MsdG86U2FuZGJveFJlZ2lzdHJ5LkV4dGVybmFsRGVwbG95QWRkcmVzc30sbz17fTsKLy8gcmV0dXJuIG1lc3NhZ2VGYWN0b3J5LmNyZWF0ZVJlc3BvbnNlKG1zZywgY29kZSwgdmFsdWUpOwpyZXR1cm4gdCYmKG8uY29kZT10KSxyJiYoby5kZXNjPXIpLG4uYm9keT1vLG59fSx7a2V5OiJfb25EZXBsb3kiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuY29uZmlnLG49ZS5ib2R5LnVybCxvPWUuYm9keS5zb3VyY2VDb2RlLGk9dm9pZCAwLHM9dm9pZCAwO2lmKHQuX2NvbXBvbmVudHMuaGFzT3duUHJvcGVydHkobikpaT01MDAscz0iSW5zdGFuY2UgIituKyIgYWxyZWFkeSBleGlzdCEiO2Vsc2UgdHJ5e3QuX2NvbXBvbmVudHNbbl09dC5fY3JlYXRlKG4sbyxyKSxpPTIwMH1jYXRjaChlKXtpPTUwMCxzPWV9dmFyIGE9dC5fcmVzcG9uc2VNc2coZSxpLHMpO3QuX2J1cy5wb3N0TWVzc2FnZShhKX19LHtrZXk6Il9vblJlbW92ZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS51cmwsbj12b2lkIDAsbz12b2lkIDA7dC5fY29tcG9uZW50cy5oYXNPd25Qcm9wZXJ0eShyKT8oCi8vcmVtb3ZlIGNvbXBvbmVudCBmcm9tIHRoZSBwb29sIGFuZCBhbGwgbGlzdGVuZXJzCmRlbGV0ZSB0Ll9jb21wb25lbnRzW3JdLHQuX2J1cy5yZW1vdmVBbGxMaXN0ZW5lcnNPZihyKSxuPTIwMCk6KG49NTAwLG89Ikluc3RhbmNlICIrcisiIGRvZXNuJ3QgZXhpc3QhIik7dmFyIGk9dC5fcmVzcG9uc2VNc2coZSxuLG8pO3QuX2J1cy5wb3N0TWVzc2FnZShpKX19LHtrZXk6Il9jcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt9fSx7a2V5OiJjb21wb25lbnRzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50c319XSksU2FuZGJveFJlZ2lzdHJ5fSgpO2EuRXh0ZXJuYWxEZXBsb3lBZGRyZXNzPSJoeXBlcnR5LXJ1bnRpbWU6Ly9zYW5kYm94L2V4dGVybmFsIixhLkludGVybmFsRGVwbG95QWRkcmVzcz0iaHlwZXJ0eS1ydW50aW1lOi8vc2FuZGJveC9pbnRlcm5hbCIsdC5kZWZhdWx0PWEsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDY2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNTkpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDY3KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDY4KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDIwMikseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gTWluaUJ1cygpe3JldHVybigwLHMuZGVmYXVsdCkodGhpcyxNaW5pQnVzKSwoMCxmLmRlZmF1bHQpKHRoaXMsKE1pbmlCdXMuX19wcm90b19ffHwoMCxvLmRlZmF1bHQpKE1pbmlCdXMpKS5jYWxsKHRoaXMpKX0vKioKICAgKiBQb3N0IGEgbWVzc2FnZSBmb3Igcm91dGluZy4gTWVzc2FnZSBpcyByb3V0ZWQgZGlyZWN0bHkgdG8gdGhlIGV4dGVybmFsIHJvdXRpbmcgX29uUG9zdE1lc3NhZ2UuCiAgICogQHBhcmFtICB7TWVzc2FnZX0gaW5Nc2cgICAgICAgICAgICBKU09OIHdpdGggbWFuZGF0b3J5IE1lc3NhZ2Ugc3RydWN0dXJlIHtpZCwgdHlwZSwgZnJvbSwgdG99CiAgICogQHBhcmFtICB7Q2FsbGJhY2t9IHJlc3BvbnNlQ2FsbGJhY2sgT3B0aW9uYWwgY2FsbGJhY2sgaWYgYSByZXNwb25zZSBpcyBleHBlY3RlZCBmcm9tIHRoZSByZXF1ZXN0LiBBIHJlc3BvbnNlIHdpbGwgYmUgYWx3YXlzIHNlbnQsIGV2ZW4gaWYgaXQgaXMgYSAiVGltZW91dCIuCiAgICogQHJldHVybiB7bnVtYmVyfSAgICAgICAgICAgICAgICAgIHRoZSBNZXNzYWdlIGlkCiAgICovCnJldHVybigwLGQuZGVmYXVsdCkoTWluaUJ1cyxlKSwoMCx1LmRlZmF1bHQpKE1pbmlCdXMsW3trZXk6InBvc3RNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpczsKLy9hbHdheXMgc2VuZCB0byBleHRlcm5hbCAodG8gY29yZSBNZXNzYWdlQnVzKQpyZXR1cm4gbi5fZ2VuSWQoZSksbi5fcmVzcG9uc2VDYWxsYmFjayhlLHQsciksbi5fb25Qb3N0TWVzc2FnZShlKSxlLmlkfX0se2tleToiX29uTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighdC5fb25SZXNwb25zZShlKSl7dmFyIHI9dC5fc3Vic2NyaXB0aW9uc1tlLnRvXTtyPyh0Ll9wdWJsaXNoT24ocixlKSxlLnRvLnN0YXJ0c1dpdGgoImh5cGVydHkiKXx8dC5fcHVibGlzaE9uRGVmYXVsdChlKSk6dC5fcHVibGlzaE9uRGVmYXVsdChlKX19fV0pLE1pbmlCdXN9KHkuZGVmYXVsdCk7LyoqCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICAgICAgICAgICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgKiovCnQuZGVmYXVsdD1oLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ2NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7dmFyIG49cigxMyksbz1uLkpTT058fChuLkpTT049e3N0cmluZ2lmeTpKU09OLnN0cmluZ2lmeX0pO2UuZXhwb3J0cz1mdW5jdGlvbihlKXsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCnJldHVybiBvLnN0cmluZ2lmeS5hcHBseShvLGFyZ3VtZW50cyl9fSwvKiA0NjggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDIpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUmVnaXN0cnlEYXRhTW9kZWwoZSx0LHIsbixpLHMsYSx1LGMpeygwLG8uZGVmYXVsdCkodGhpcyxSZWdpc3RyeURhdGFNb2RlbCk7dmFyIGY9dGhpcztmLl9pZD1lLGYuX3VybD10LGYuX2Rlc2NyaXB0b3JVUkw9cixmLl9zdGFydGluZ1RpbWU9aSxmLl9sYXN0TW9kaWZpZWQ9cyxmLl9zdGF0dXM9YSxmLl9zdHVicz11LGYuX3N0dWJzQ29uZmlndXJhdGlvbj1jLGYuX3AycFJlcXVlc3Rlcj1ufXJldHVybigwLHMuZGVmYXVsdCkoUmVnaXN0cnlEYXRhTW9kZWwsW3trZXk6ImlkIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9fSx7a2V5OiJ1cmwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cmx9fSx7a2V5OiJkZXNjcmlwdG9yVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvclVSTH19LHtrZXk6InAycFJlcXVlc3RlciIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3AycFJlcXVlc3Rlcn19LHtrZXk6Imxhc3RNb2RpZmllZCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhc3RNb2RpZmllZH19XSksUmVnaXN0cnlEYXRhTW9kZWx9KCk7dC5kZWZhdWx0PWEsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDY5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMzEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNyksZD1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGwpLHA9cig5OSkseT1yKDIwMyksaD0oX2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSxkLmdldExvZ2dlcigiUmVnaXN0cnkiKSksdj1mdW5jdGlvbigpey8qKgogICogVG8gaW5pdGlhbGlzZSB0aGUgUnVudGltZSBSZWdpc3RyeSB3aXRoIHRoZSBSdW50aW1lVVJMIHRoYXQgd2lsbCBiZSB0aGUgYmFzaXMgdG8gZGVyaXZlIHRoZSBpbnRlcm5hbCBydW50aW1lIGFkZHJlc3NlcyB3aGVuIGFsbG9jYXRpbmcgYWRkcmVzc2VzIHRvIGludGVybmFsIHJ1bnRpbWUgY29tcG9uZW50LiBJbiBhZGRpdGlvbiwgdGhlIFJlZ2lzdHJ5IGRvbWFpbiBiYWNrLWVuZCB0byBiZSB1c2VkIHRvIHJlbW90ZWx5IHJlZ2lzdGVyIFJ1bnRpbWUgY29tcG9uZW50cywgaXMgYWxzbyBwYXNzZWQgYXMgaW5wdXQgcGFyYW1ldGVyLgogICogQHBhcmFtICB7TWVzc2FnZUJ1c30gICAgICAgICAgbWVzc2FnZUJ1cyAgICAgICAgICAgICAgICBtc2didXMKICAqIEBwYXJhbSAge0h5cGVydHlSdW50aW1lVVJMfSAgIHJ1bnRpbWVVUkwgICAgICAgICAgICBydW50aW1lVVJMCiAgKiBAcGFyYW0gIHtEb21haW5VUkx9ICAgICAgICAgICBkb21haW4gICAgICAgIHJlbW90ZVJlZ2lzdHJ5CiAgKi8KZnVuY3Rpb24gRG9tYWluUmVnaXN0cmF0aW9uKGUsdCxyLG4pe2lmKCgwLHUuZGVmYXVsdCkodGhpcyxEb21haW5SZWdpc3RyYXRpb24pLCFlKXRocm93IG5ldyBFcnJvcigicnVudGltZVVSTCBpcyBtaXNzaW5nLiIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigicmVnaXN0cnlVUkwgaXMgbWlzc2luZy4iKTtpZighcil0aHJvdyBuZXcgRXJyb3IoImRvbWFpbiBpcyBtaXNzaW5nLiIpO2lmKCFuKXRocm93IG5ldyBFcnJvcigibWVzc2FnZUJ1cyBpcyBtaXNzaW5nLiIpO3ZhciBvPXRoaXM7by5yZWdpc3RyeVVSTD10LG8ucnVudGltZVVSTD1lLG8uX3JlZ2lzdHJhdGlvblJldHJpZXM9NSwvLyBudW1iZXIgb2YgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgSHlwZXJ0aWVzIGFuZCBEYXRhT2JqZWN0cyB3aGVuIGVycm9ycyBvY2N1cnMKLy8gdGhlIGV4cGlyZXMgaW4gMzYwMCwgcmVwcmVzZW50cyAxIGhvdXIKLy90aGUgZXhwaXJlcyBpcyBpbiBzZWNvbmRzLCB1bml0IG9mIG1lYXN1cmUgcmVjZWl2ZWQgYnkgdGhlIGRvbWFpbiByZWdpc3RyeQpvLmV4cGlyZXNUaW1lPTM2MDAsby5fZG9tYWluPXIsby5fbWVzc2FnZUJ1cz1ufS8qKgogICogIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgYW4gaHlwZXJ0eUluc3RhbmNlIGluIHRoZSBEb21haW4gUmVnaXN0cnkKICAqICBAcGFyYW0gICB7U3RyaW5nfSAgICAgIGh5cGVydHlJbnN0YW5jZSAgIEh5cGVydHlJbnNudGFuY2UgdXJsCiAgKgogICovCnJldHVybigwLGYuZGVmYXVsdCkoRG9tYWluUmVnaXN0cmF0aW9uLFt7a2V5OiJ1bnJlZ2lzdGVySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJ1cGRhdGUiLGZyb206dC5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIit0Ll9kb21haW4sYm9keTp7cmVzb3VyY2U6Ii9oeXBlcnR5LyIrZSx2YWx1ZToiZGlzY29ubmVjdGVkIixhdHRyaWJ1dGU6InN0YXR1cyJ9fTt0Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24oZSl7aC5sb2coIltEb21haW5SZWdpc3RyYXRpb25dIHVucmVnaXN0ZXIgaHlwZXJ0eSBSZXBseSIsZSl9KX19LHtrZXk6InVucmVnaXN0ZXJEYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9e3R5cGU6InVwZGF0ZSIsZnJvbTp0LnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3QuX2RvbWFpbixib2R5OntyZXNvdXJjZTplLHZhbHVlOntzdGF0dXM6ImRpc2Nvbm5lY3RlZCJ9fX07dC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKGUpe2gubG9nKCJbRG9tYWluUmVnaXN0cmF0aW9uXSB1bnJlZ2lzdGVyIGRhdGFPYmplY3QgUmVwbHkiLGUpfSl9fSx7a2V5OiJkZWxldGVEYXRhT2JqZWN0SW5zdGFuY2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj17dHlwZToiZGVsZXRlIixmcm9tOnQucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrdC5fZG9tYWluLGJvZHk6e3ZhbHVlOntuYW1lOmV9fX07dC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShyLGZ1bmN0aW9uKGUpe2gubG9nKCJbRG9tYWluUmVnaXN0cmF0aW9uXSB1bnJlZ2lzdGVyIGRhdGFPYmplY3QgUmVwbHkiLGUpfSl9fSx7a2V5OiJ1cGRhdGVIeXBlcnR5SW5zdGFuY2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXt0eXBlOiJVUERBVEUiLGZyb206ci5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9kb21haW4sYm9keTp7cmVzb3VyY2U6ZSx2YWx1ZTp0fX07ci5fbWVzc2FnZUJ1cy5wb3N0LnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24oZSl7fSl9fSx7a2V5OiJyZWdpc3RlckRhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLGk9dm9pZCAwLGE9dm9pZCAwO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHMsdSl7dmFyIGM9W10sZj1lLnVybC5zcGxpdCgiOiIpO2MucHVzaChmWzBdKSwwIT09KDAsby5kZWZhdWx0KShyKS5sZW5ndGgmJihpPXJbbi5ydW50aW1lVVJMXS51cmwsYT1wLnJ1bnRpbWVVdGlscy5ydW50aW1lRGVzY3JpcHRvci5wMnBSZXF1ZXN0ZXJTdHViKSxlLnN0YXJ0aW5nVGltZT1lLmNyZWF0ZWQsZGVsZXRlIGUuYXV0aG9yaXNlLGRlbGV0ZSBlLmNyZWF0ZWQsZGVsZXRlIGUubXV0dWFsLGRlbGV0ZSBlLnJlc3VtZSxlLmV4cGlyZXN8fChlLmV4cGlyZXM9bi5leHBpcmVzVGltZSksZS5kYXRhU2NoZW1lcz1jLGkmJihlLnAycEhhbmRsZXI9aSxlLnAycFJlcXVlc3Rlcj1hKSxlLnN0YXR1cz0ibGl2ZSI7dmFyIGw9dm9pZCAwO3Q/KGgubG9nKCJbUmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0XSByZWdpc3RlcmluZyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQgZGF0YSBvYmplY3QgVVJMIixlKSxsPXt0eXBlOiJ1cGRhdGUiLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24uX2RvbWFpbixmcm9tOm4ucmVnaXN0cnlVUkwsYm9keTp7cmVzb3VyY2U6ZS51cmwsdmFsdWU6e3N0YXR1czoibGl2ZSJ9fX0pOihoLmxvZygiW1JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdF0gcmVnaXN0ZXJpbmcgbmV3IGRhdGEgb2JqZWN0IFVSTCIsZSksbD17dHlwZToiY3JlYXRlIixmcm9tOm4ucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbi5fZG9tYWluLGJvZHk6e3ZhbHVlOmUscG9saWN5OiJwb2xpY3kifX0pO3RyeXtuLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXMobCxuLl9yZWdpc3RyYXRpb25SZXRyaWVzLGZ1bmN0aW9uKHQpewovLyBsb2cubG9nKCdbUmVnaXN0cnkucmVnaXN0ZXJEYXRhT2JqZWN0XSA9PT0+IHJlZ2lzdGVyRGF0YU9iamVjdCBSZXBseTogJywgcmVwbHkpOwoyMDA9PT10LmJvZHkuY29kZT9zKGUpOnUoImVycm9yIG9uIHJlZ2lzdGVyIERhdGFPYmplY3QiKX0pfWNhdGNoKGUpe2guZXJyb3IoZSksdShlKX0KLy90aW1lciB0byBrZWVwIHRoZSByZWdpc3RyYXRpb24gYWxpdmUKLy8gdGhlIHRpbWUgaXMgZGVmaW5lZCBieSBhIGxpdHRsZSBsZXNzIHRoYW4gaGFsZiBvZiB0aGUgZXhwaXJlcyB0aW1lIGRlZmluZWQKc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgdD17dHlwZToidXBkYXRlIixmcm9tOm4ucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrbi5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmUudXJsLHZhbHVlOntzdGF0dXM6ImxpdmUifSxtZXRob2Q6InJlZnJlc2gifX07bi5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh0LGZ1bmN0aW9uKGUpe30pfSxlLmV4cGlyZXMvMS4xLzIqMWUzKX0pfX0se2tleToicmVnaXN0ZXJIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obixvKXsKLy9hc3N1bWluZyBkZXNjcmlwdG9yIGNvbWUgaW4gdGhpcyBmb3JtYXQsIHRoZSBzZXJ2aWNlLXByb3ZpZGVyLWRvbWFpbiB1cmwgaXMgcmV0cmlldmVkIGJ5IGEgc3BsaXQgaW5zdHJ1Y3Rpb24KLy9oeXBlcnR5LWNhdGFsb2d1ZTovLzxzZXJ2aWNlLXByb3ZpZGVyLWRvbWFpbj4vPGNhdGFsb2d1ZS1vYmplY3QtaWRlbnRpZmllcj4KLyogICAgICBsZXQgZG9tYWluVXJsID0gZGl2aWRlVVJMKGh5cGVydHkuZGVzY3JpcHRvclVSTCkuZG9tYWluOwogICAgICAgIAogICAgICAgICAgICAgIGlmIChkb21haW5VcmwuaW5jbHVkZXMoJ2NhdGFsb2d1ZScpKSB7CiAgICAgICAgICAgICAgICBkb21haW5VcmwgPSBkb21haW5VcmwucmVwbGFjZSgnY2F0YWxvZ3VlLicsICcnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXMucmVnaXN0cnlEb21haW4gPSBkb21haW5Vcmw7Ki8KdmFyIGk9ci5ydW50aW1lVVJMLHM9dm9pZCAwLGE9ci5leHBpcmVzVGltZSx1PXt1c2VyOmUudXNlci5lbWFpbCxkZXNjcmlwdG9yOmUuZGVzY3JpcHRvclVSTCx1cmw6ZS5oeXBlcnR5VVJMLGV4cGlyZXM6YSxyZXNvdXJjZXM6ZS5yZXNvdXJjZXMsZGF0YVNjaGVtZXM6ZS5kYXRhU2NoZW1lcyxydW50aW1lOmksc3RhdHVzOiJsaXZlIn07Ci8vIHNldCBhIGRpZmZlcmVudCBleHBpcmVzIGlmIGRlZmluZWQgaW4gdGhlIGh5cGVydHkgY29uZmlndXJhdGlvbgplLnAycEhhbmRsZXImJih1LnAycEhhbmRsZXI9ZS5wMnBIYW5kbGVyLHUucDJwUmVxdWVzdGVyPWUucDJwUmVxdWVzdGVyKSwKLy8gc2V0IGEgZGlmZmVyZW50IGV4cGlyZXMgdmFsdWUgaWYgY29uZmlndXJlZCBpbiB0aGUgSHlwZXJ0eSBkZXNjcmlwdG9yCmUuZGVzY3JpcHRvci5jb25maWd1cmF0aW9uJiZlLmRlc2NyaXB0b3IuY29uZmlndXJhdGlvbi5leHBpcmVzJiYoYT1lLmRlc2NyaXB0b3IuY29uZmlndXJhdGlvbi5leHBpcmVzKSx0PygKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gcmVnaXN0ZXJpbmcgcHJldmlvdXNseSByZWdpc3RlcmVkIEh5cGVydHkgVVJMJywgYWRkcmVzc1VSTC5hZGRyZXNzWzBdKTsKcz17dHlwZToidXBkYXRlIix0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9kb21haW4sZnJvbTpyLnJlZ2lzdHJ5VVJMLGJvZHk6e3Jlc291cmNlOmUuaHlwZXJ0eVVSTCx2YWx1ZTp7c3RhdHVzOiJsaXZlIix1c2VyOmUudXNlci5lbWFpbH19fSxlLnAycEhhbmRsZXImJihzLmJvZHkudmFsdWUucDJwSGFuZGxlcj1lLnAycEhhbmRsZXIscy5ib2R5LnZhbHVlLnAycFJlcXVlc3Rlcj1lLnAycFJlcXVlc3RlcikpOgovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSByZWdpc3RlcmluZyBuZXcgSHlwZXJ0eSBVUkwnLCBhZGRyZXNzVVJMLmFkZHJlc3NbMF0pOwovLyBzZXQgYSBkaWZmZXJlbnQgZXhwaXJlcyBpZiBkZWZpbmVkIGluIHRoZSBoeXBlcnR5IGNvbmZpZ3VyYXRpb24KLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gcmVnaXN0ZXJpbmcgbmV3IEh5cGVydHkgYXQgZG9tYWluIHJlZ2lzdHJ5ICcsIG1lc3NhZ2VWYWx1ZSk7CnM9e3R5cGU6ImNyZWF0ZSIsZnJvbTpyLnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX2RvbWFpbixib2R5Ont2YWx1ZTp1LHBvbGljeToicG9saWN5In19OwovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBIeXBlcnR5IHJlZ2lzdHJhdGlvbiBhdCBkb21haW4gcmVnaXN0cnkgIC0gJywgbWVzc2FnZSk7CnRyeXtyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlV2l0aFJldHJpZXMocyxyLl9yZWdpc3RyYXRpb25SZXRyaWVzLGZ1bmN0aW9uKHQpewovLyBsb2cubG9nKCdbUmVnaXN0cnkgcmVnaXN0ZXJIeXBlcnR5XSBIeXBlcnR5IHJlZ2lzdHJhdGlvbiByZXNwb25zZTogJywgcmVwbHkpOwppZigyMDA9PT10LmJvZHkuY29kZSl7dmFyIGk9e3VybDplLmh5cGVydHlVUkx9O2UucDJwSGFuZGxlciYmKGkucDJwSGFuZGxlcj1lLnAycEhhbmRsZXIsaS5wMnBSZXF1ZXN0ZXI9ZS5wMnBSZXF1ZXN0ZXIpLG4oaSl9ZWxzZXtpZig0MDQhPT10LmJvZHkuY29kZSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byByZWdpc3RlciBhbiBIeXBlcnR5IHRvIGRvbWFpbjogIix0KTsKLy8gbG9nLmxvZygnW1JlZ2lzdHJ5IHJlZ2lzdGVySHlwZXJ0eV0gVGhlIHVwZGF0ZSB3YXMgbm90IHBvc3NpYmxlLiBSZWdpc3RlcmluZyBuZXcgSHlwZXJ0eSBhdCBkb21haW4gcmVnaXN0cnknKTsKcz17dHlwZToiY3JlYXRlIixmcm9tOnIucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrci5fZG9tYWluLGJvZHk6e3ZhbHVlOnUscG9saWN5OiJwb2xpY3kifX07dHJ5e3IuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2VXaXRoUmV0cmllcyhzLHIuX3JlZ2lzdHJhdGlvblJldHJpZXMsZnVuY3Rpb24odCl7Ci8vIGxvZy5sb2coJ1tSZWdpc3RyeSByZWdpc3Rlckh5cGVydHldIEh5cGVydHkgcmVnaXN0cmF0aW9uIHVwZGF0ZSByZXNwb25zZTogJywgcmVwbHkpOwppZigyMDAhPT10LmJvZHkuY29kZSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byByZWdpc3RlciBhbiBIeXBlcnR5OiAiK3QpO3ZhciByPXt1cmw6ZS5oeXBlcnR5VVJMfTtlLnAycEhhbmRsZXImJihyLnAycEhhbmRsZXI9ZS5wMnBIYW5kbGVyLHIucDJwUmVxdWVzdGVyPWUucDJwUmVxdWVzdGVyKSxuKHIpfSl9Y2F0Y2goZSl7aC5lcnJvcihlKSxvKGUpfX19KX1jYXRjaChlKXtoLmVycm9yKGUpLG8oZSl9Ci8vdGltZXIgdG8ga2VlcCB0aGUgcmVnaXN0cmF0aW9uIGFsaXZlCi8vIHRoZSB0aW1lIGlzIGRlZmluZWQgYnkgYSBsaXR0bGUgbGVzcyB0aGFuIGhhbGYgb2YgdGhlIGV4cGlyZXMgdGltZSBkZWZpbmVkCnNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6InVwZGF0ZSIsZnJvbTpyLnJlZ2lzdHJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3IuX2RvbWFpbixib2R5OntyZXNvdXJjZTplLmh5cGVydHlVUkwsdmFsdWU6e3N0YXR1czoibGl2ZSJ9LG1ldGhvZDoicmVmcmVzaCJ9fTtyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKHQsZnVuY3Rpb24oZSl7fSl9LGEvMS4xLzIqMWUzKX0pfX1dKSxEb21haW5SZWdpc3RyYXRpb259KCk7dC5kZWZhdWx0PXYsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDcwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNyksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9Zi5nZXRMb2dnZXIoIlAyUENvbm5lY3Rpb25SZXNvbHZlIiksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIFAyUENvbm5lY3Rpb25SZXNvbHZlKGUpeygwLHMuZGVmYXVsdCkodGhpcyxQMlBDb25uZWN0aW9uUmVzb2x2ZSk7dmFyIHQ9dGhpczt0Ll9yZWdpc3RyeT1lLHQuX3JlbW90ZVAyUEVudGl0aWVzPXt9fS8qKgogICogVmVyaWZpZXMgaWYgcmVtb3RlIEVudGl0eSBjYW4gYmUgcmVhY2hlZCB3aXRoIGEgUDJQIENvbm5lY3Rpb24uCiAgKiBAcGFyYW0gIHtVUkwuVVJMfSAgICAgICAgaW5mbyAgICAgICAgICAgb2JqZWN0IFVSTAogICogQHJldHVybiB7SHlwZXJ0eURhdGFPYmplY3RJbnN0YW5jZX0gIGFkZHJlc3NVUkwgICAgIHJldHVybiB0aGUgRGF0YSBPYmplY3QgaW5zdGFuY2UgcmVnaXN0ZXJlZCBVUkwsIHJldHVybiB1bmRlZmluZWQgb3RoZXJ3aXNlCiAgKi8KcmV0dXJuKDAsdS5kZWZhdWx0KShQMlBDb25uZWN0aW9uUmVzb2x2ZSxbe2tleToiY2hlY2tQMlAiLHZhbHVlOmZ1bmN0aW9uKGUpe2lmKCFlLmhhc093blByb3BlcnR5KCJ0byIpKQovLyB0aHJvdyBFcnJvcignVGhlIHAycCB2ZXJpZmljYXRpb24gd2FzIGZhaWxlZCcpOwpyZXR1cm4gby5kZWZhdWx0LnJlamVjdCgiVGhlIHAycCB2ZXJpZmljYXRpb24gd2FzIGZhaWxlZCIpO3ZhciB0PWUudG8uc3BsaXQoIjovLyIpWzBdLHI9ZS50by5zcGxpdCgiOi8vIilbMV0uc3BsaXQoIi8iKVsyXSxuPXZvaWQgMDtuPXI/ZS50by5zdWJzdHJpbmcoMCxlLnRvLmluZGV4T2YoIi8iK3IpKTplLnRvO3ZhciBpPXt9O3N3aXRjaChlLmJvZHkmJmUuYm9keS5wMnAmJihpLnAycD1lLmJvZHkucDJwKSxlLmJvZHkmJmUuYm9keS5wMnBIYW5kbGVyJiZlLmJvZHkucDJwUmVxdWVzdGVyJiYoaS5wMnBIYW5kbGVyPWUuYm9keS5wMnBIYW5kbGVyLGkucDJwUmVxdWVzdGVyPWUuYm9keS5wMnBSZXF1ZXN0ZXIsaS5ydW50aW1lPWUuYm9keS5wMnBIYW5kbGVyLnNwbGl0KCIvcDJwaGFuZGxlci8iKVswXSksdCl7Y2FzZSJydW50aW1lIjpyZXR1cm4gdGhpcy5jaGVja1AyUFJ1bnRpbWUobixpKTtkZWZhdWx0OnJldHVybiB0aGlzLmNoZWNrUDJQRW50aXR5KG4saSl9fX0se2tleToiY2hlY2tQMlBFbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXIuX3JlbW90ZVAyUEVudGl0aWVzW2VdO2lmKGkpbihpKTtlbHNlIGlmKHQucnVudGltZSluKHQpO2Vsc2UgaWYodC5wMnApewovLyBvdGhlcndpc2UgbG9vayBvbiBEb21haW4gUmVnaXN0cnkKbC5sb2coIltSZWdpc3RyeSAtIGNoZWNrUDJQRW50aXR5XSAtIHNlYXJjaCBpbiBEb21haW4gUmVnaXN0cnk6ICIsZSk7dmFyIHM9e3R5cGU6InJlYWQiLGZyb206ci5fcmVnaXN0cnkucmVnaXN0cnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrci5fcmVnaXN0cnkuX2RvbWFpbixib2R5OntyZXNvdXJjZTplfX07ci5fcmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UocyxmdW5jdGlvbihlKXtpZihsLmxvZygiW1JlZ2lzdHJ5IC0gY2hlY2tQMlBFbnRpdHldIERvbWFpbiBSZWdpc3RyeSByZXBseSIsZSksInZhbHVlImluIGUuYm9keSl7Ci8vdG9kbzogc3RvcmUgcmV0cmlldmVkIGVudGl0eQp2YXIgdD1lLmJvZHkudmFsdWU7dC5oYXNPd25Qcm9wZXJ0eSgicDJwSGFuZGxlciIpP24odCk6bygiW1JlZ2lzdHJ5IGNoZWNrUDJQRW50aXR5XSBIeXBlcnR5IGZvdW5kIGRvZXMgbm90IHN1cHBvcnQgUDJQIixlLmJvZHkudmFsdWUpfWVsc2UgbygiW1JlZ2lzdHJ5IGNoZWNrUDJQRW50aXR5XSBIeXBlcnR5IHdpdGggUDJQSGFuZGxlciBub3QgZm91bmQiLGUuYm9keS5jb2RlKX0pfWVsc2UgbygiW1JlZ2lzdHJ5IGNoZWNrUDJQRW50aXR5XSBObyBQMlAgQ29ubmVjdGlvbiBhdmFpbGFibGUgZm9yICIsZSl9KX19LHtrZXk6ImNoZWNrUDJQUnVudGltZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49e307Ci8vIGxvb2sgb24gbG9jYWxseSBzdG9yZWQgcDJwIGNvbm5lY3Rpb25zCnJldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7ci5fcmVnaXN0cnkucDJwQ29ubmVjdGlvbkxpc3RbZV0/byh7cnVudGltZTplfSk6dC5ydW50aW1lPyhuPXQsbyhuKSk6aSgiW1JlZ2lzdHJ5LlAyUENvbm5lY3Rpb25SZXNvbHZlLmNoZWNrUDJQUnVudGltZV0gTm8gUDJQIENvbm5lY3Rpb24gZm91bmQgdG8gIixlKX0pfX0se2tleToiY2hlY2tQMlBIeXBlcnR5Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT12b2lkIDA7Ci8vIGxvb2sgb24gbG9jYWxseSBzdG9yZWQgaHlwZXJ0aWVzCmZvcih2YXIgcyBpbiByLl9yZWdpc3RyeS5yZW1vdGVIeXBlcnR5TGlzdCkKLy8gdG9kbzogY2hhbmdlIHRvICJoeXBlcnR5LnVybCIgdG8gYmUgYWxpZ25lZCB3aXRoIGh5cGVydHkgaW5zdGFuY2UgZGF0YSBtb2RlbCBzcGVjCmlmKGk9ci5fcmVnaXN0cnkucmVtb3RlSHlwZXJ0eUxpc3Rbc10sbC5sb2coIltSZWdpc3RyeSAtIGNoZWNrUDJQSHlwZXJ0eV0gLSBmb3IgZWFjaCBIeXBlcnR5OiAiLGkpLGkuaHlwZXJ0eUlEPT09ZSlyZXR1cm4gdm9pZChpLmhhc093blByb3BlcnR5KCJwMnBIYW5kbGVyIik/bihpKTpvKCJbUmVnaXN0cnkgY2hlY2tQMlBIeXBlcnR5XSBIeXBlcnR5IGZvdW5kIGRvZXMgbm90IHN1cHBvcnQgUDJQIixpKSk7aWYoIWkmJnQucnVudGltZSluKHQpO2Vsc2UgaWYoIWkmJnQucDJwKXsKLy8gb3RoZXJ3aXNlIGxvb2sgb24gRG9tYWluIFJlZ2lzdHJ5CmwubG9nKCJbUmVnaXN0cnkgLSBjaGVja1AyUEh5cGVydHldIC0gc2VhcmNoIGluIERvbWFpbiBSZWdpc3RyeTogIixpKTt2YXIgYT17dHlwZToicmVhZCIsZnJvbTpyLl9yZWdpc3RyeS5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9yZWdpc3RyeS5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmV9fTtyLl9yZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKGUpe2lmKGwubG9nKCJbUmVnaXN0cnkgLSBjaGVja1AyUEh5cGVydHldIERvbWFpbiBSZWdpc3RyeSByZXBseSIsZSksInZhbHVlImluIGUuYm9keSl7Ci8vdG9kbzogc3RvcmUgcmV0cmlldmVkIGh5cGVydHkKdmFyIHQ9ZS5ib2R5LnZhbHVlO3IuX3JlZ2lzdHJ5LnJlbW90ZUh5cGVydHlMaXN0LnB1c2godCksdC5oYXNPd25Qcm9wZXJ0eSgicDJwSGFuZGxlciIpP24odCk6bygiW1JlZ2lzdHJ5IGNoZWNrUDJQSHlwZXJ0eV0gSHlwZXJ0eSBmb3VuZCBkb2VzIG5vdCBzdXBwb3J0IFAyUCIsZS5ib2R5LnZhbHVlKX1lbHNlIG8oIltSZWdpc3RyeSBjaGVja1AyUEh5cGVydHldIEh5cGVydHkgd2l0aCBQMlBIYW5kbGVyIG5vdCBmb3VuZCIsZS5ib2R5LmNvZGUpfSl9ZWxzZSBvKCJbUmVnaXN0cnkgY2hlY2tQMlBIeXBlcnR5XSBObyBQMlAgQ29ubmVjdGlvbiBhdmFpbGFibGUgZm9yICIsZSl9KX19LHtrZXk6ImNoZWNrUDJQRGF0YU9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7Ci8vIGxvb2sgb24gbG9jYWxseSBzdG9yZWQgUmVtb3RlIERhdGEgT2JqZWN0cwp2YXIgaT1yLl9yZWdpc3RyeS5yZW1vdGVEYXRhT2JqZWN0TGlzdC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHIuX3JlZ2lzdHJ5LnJlbW90ZURhdGFPYmplY3RMaXN0W3RdLnVybD09PWV9KTtpZigwIT09aS5sZW5ndGgmJmlbMF0ucDJwUmVxdWVzdGVyKW4oaVswXSk7ZWxzZSBpZigwIT09aS5sZW5ndGgpbygiW1JlZ2lzdHJ5IGNoZWNrUDJQRGF0YU9iamVjdF0gRGF0YSBPYmplY3QgZm91bmQgZG9lcyBub3Qgc3VwcG9ydCBQMlAiLGlbMF0pO2Vsc2UgaWYoMD09PWkubGVuZ3RoJiZ0LnJ1bnRpbWUpbih0KTtlbHNlIGlmKGkubGVuZ3RoJiZ0LnAycCl7Ci8vIG90aGVyd2lzZSBsb29rIG9uIERvbWFpbiBSZWdpc3RyeQovLyBsb29rIG9uIERvbWFpbiBSZWdpc3RyeQp2YXIgcz17dHlwZToicmVhZCIsZnJvbTpyLl9yZWdpc3RyeS5yZWdpc3RyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIityLl9yZWdpc3RyeS5fZG9tYWluLGJvZHk6e3Jlc291cmNlOmV9fTtyLl9yZWdpc3RyeS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKGUpe2lmKGwubG9nKCJkaXNjb3ZlciBkYXRhIG9iamVjdCBwZXIgdXJsIHJlcGx5IixlKSwidmFsdWUiaW4gZS5ib2R5KXsKLy90b2RvOiBzdG9yZSByZXRyaWV2ZWQgaHlwZXJ0eQp2YXIgdD1lLmJvZHkudmFsdWU7ci5fcmVnaXN0cnkucmVtb3RlRGF0YU9iamVjdExpc3QucHVzaCh0KSx0LnAycFJlcXVlc3Rlcj9uKHQpOm8oIltSZWdpc3RyeSBjaGVja1AyUERhdGFPYmplY3RdIERhdGEgT2JqZWN0IGZvdW5kIGRvZXMgbm90IHN1cHBvcnQgUDJQIixlLmJvZHkudmFsdWUpfWVsc2UgbygiW1JlZ2lzdHJ5IGNoZWNrUDJQRGF0YU9iamVjdF0gbm90IGZvdW5kIixlLmJvZHkuY29kZSl9KX1lbHNlIG8oIltSZWdpc3RyeSBjaGVja1AyUERhdGFPYmplY3RdIG5vIFAyUCBDb25uZWN0aW9uIGZvdW5kIil9KX19LHtrZXk6ImFkZFJlbW90ZVAyUEVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZW1vdGVQMlBFbnRpdGllc1tlXT10fX0se2tleToicmVtb3ZlUmVtb3RlUDJQRW50aXR5Iix2YWx1ZTpmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fcmVtb3RlUDJQRW50aXRpZXNbZV19fSx7a2V5OiJyZWNvbm5lY3RQMlBSZXF1ZXN0ZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGwubG9nKCJbUDJQQ29uZW5jdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyXSBsZXRzIHRyeSB0byByZWNvbm5lY3QgUDJQIFJlcXVlc3RlciBTdHViOiAiLGUpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz1lLnJ1bnRpbWUsaT17dHlwZToiZXhlY3V0ZSIsZnJvbTp0Ll9yZWdpc3RyeS5yZWdpc3RyeVVSTCx0bzplLnVybCxib2R5OnttZXRob2Q6ImNvbm5lY3QiLHBhcmFtczpbZS5wMnBIYW5kbGVyXX19OwovLyBsZXRzIHByZXBhcmUgdGhlIHAycFJlcXVlc3RlclNUdWIgcmVjb25uZWN0IGJ5IHNldHRpbmcgYW4gb2JzZXJ2ZXIgdG8gaXRzIHN0YXR1cyBjaGFuZ2VzCnQuX3JlZ2lzdHJ5LndhdGNoaW5nWW91Lm9ic2VydmUoInAycFJlcXVlc3RlclN0dWIiLGZ1bmN0aW9uKGUpe2lmKGwubG9nKCJbUDJQQ29uZW5jdGlvblJlc29sdmUucmVjb25uZWN0UDJQUmVxdWVzdGVyXSBwMnBSZXF1ZXN0ZXJTdHVicyBjaGFuZ2VkICIrdC5fcmVnaXN0cnkucDJwUmVxdWVzdGVyU3R1YiksZS5rZXlwYXRoLnNwbGl0KCIuIilbMF09PT1vJiYic3RhdHVzIj09PWUubmFtZSlzd2l0Y2goZS5uZXdWYWx1ZSl7Y2FzZSJsaXZlIjpsLmxvZygiW1AyUENvbmVuY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3Rlcl0gcDJwUmVxdWVzdGVyIGlzIGxpdmUgIit0Ll9yZWdpc3RyeS5wMnBSZXF1ZXN0ZXJTdHViW29dKSxyKHQuX3JlZ2lzdHJ5LnAycFJlcXVlc3RlclN0dWJbb10udXJsKTticmVhaztjYXNlImZhaWxlZCI6bC5sb2coIltQMlBDb25lbmN0aW9uUmVzb2x2ZS5yZWNvbm5lY3RQMlBSZXF1ZXN0ZXJdIHAycFJlcXVlc3RlciByZWNvbm5lY3QgZmFpbGVkICIrdC5fcmVnaXN0cnkucDJwUmVxdWVzdGVyU3R1YltvXSksbigiUDJQIFJlcXVlc3RlciByZWNvbm5lY3QgZmFpbGVkIil9fSksCi8vICBzdHViIGxvYWQKdC5fcmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoaSxmdW5jdGlvbihlKXtsLmxvZygiW1AyUENvbmVuY3Rpb25SZXNvbHZlLnJlY29ubmVjdFAyUFJlcXVlc3Rlcl0gcmVjb25uZWN0IHJlcXVlc3QgcmVwbHkiLGUpfSl9KX19XSksUDJQQ29ubmVjdGlvblJlc29sdmV9KCk7dC5kZWZhdWx0PWQsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDcxICovCi8qKiovCmZ1bmN0aW9uKGUsdCl7Ci8vICAgICBwcm94eS1vYnNlcnZlIHYwLjAuMTgKLy8gICAgIENvcHlyaWdodCAoYykgMjAxNSwgMjAxNiBTaW1vbiBZLiBCbGFja3dlbGwsIEFueVdoaWNoV2F5Ci8vICAgICBNSVQgTGljZW5zZSAtIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAKIWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIE9ic2VydmVyKGUsdCxyLG4sbyxpKXtmdW5jdGlvbiBkZWxpdmVyKGUsbil7aWYoZGVsaXZlci5kZWxheT1uLCFkZWxpdmVyLnBhdXNlJiZhLmNoYW5nZXNldC5sZW5ndGg+MCl7aWYoIWUpe3ZhciBvPWEuY2hhbmdlc2V0LmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hcnx8ci5pbmRleE9mKGUudHlwZSk+PTB9KTtvLmxlbmd0aD4wJiZ0KG8pfWEuY2hhbmdlc2V0PVtdfX12YXIgcyxhPXRoaXM7Ci8vIF9fb2JzZXJ2ZXJDYWxsYmFja3NfXyBpcyB1c2VkIGFzIGFuIGluZGV4IHRvIGdldCBhdCB0aGUgcHJveHkgd2hpY2ggaXMgdGhlIG9ic2VydmVyLCBzbyB3ZSBjYW4gdW5vYnNlcnZlCnJldHVybiBkZWxpdmVyLnBhdXNlPW8sZGVsaXZlci5kZWxheT1pLGEuZ2V0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIl9fb2JzZXJ2ZXJfXyI9PT10P2E6InVub2JzZXJ2ZSI9PT10P2Z1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC51bm9ic2VydmUoZSksZX06ImRlbGl2ZXIiPT09dD9kZWxpdmVyOmVbdF19LGEudGFyZ2V0PWUsYS5jaGFuZ2VzZXQ9W10sYS50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19ffHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiExLHZhbHVlOltdfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fb2JzZXJ2ZXJzX18iLHtlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMSx2YWx1ZTpbXX0pKSxhLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaCh0KSxhLnRhcmdldC5fX29ic2VydmVyc19fLnB1c2godGhpcykscz1uZXcgUHJveHkoZSxhKSxkZWxpdmVyKCExLGkpLHN9Ci8vIENyZWF0ZXMgYW5kIHJldHVybnMgYSBQcm94eSB3cmFwcGluZyBhIHRhcmdldCBzbyB0aGF0IGFsbCBjaGFuZ2VzIGNhbiBiZSB0cmFwcGVkIGFuZCBmb3J3YXJkZWQgdG8KLy8gYSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHRha2VzIGFuIGFycmF5IG9mIGNoYW5nZXMganVzdCBsaWtlIHRoZSB0cmFkaXRpb25hbCBvcmlnaW5hbCBDaHJvbWUgT2JqZWN0Lm9ic2VydmUKLy8ge29iamVjdDo8b2JqZWN0IGNoYW5nZWQ+LG5hbWU6PGZpZWxkIGNoYW5nZWQ+LHR5cGU6YWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLG9sZFZhbHVlOjxvbGQgdmFsdWUgaWYgdXBkYXRlIHwgZGVsZXRlPn0KLy8gVGhlIGFjY2VwdGxpc3QgY2FuIGJlIGFkZHx1cGRhdGV8ZGVsZXRlfHJlY29uZmlndXJlfHByZXZlbnRFeHRlbnNpb25zfHNldFByb3RvdHlwZS4KLy8gdiAwLjAuMTAgdG8gc3VwcG9ydCBwYXVzaW5nIGFuZCByZXN0YXJ0aW5nIG9ic2VydmF0aW9uIHR3byBhZGRpdGlvbmFsIGNvbnN0cnVjdG9yIGFyZ3VtZW50cyBhcmUgYXZhaWxhYmxlIHRvIE9iamVjdC5vYnNlcnZlOgovLyBwYXVzYWJsZSAtIGNyZWF0ZSB0aGUgT2JzZXJ2ZXIgc28gaXQgY2FuIGJlIHBhdXNlZAovLyBwYXVzZSAtIGNyZWF0ZSBvYnNlcnZlciBpbiBwYXVzZWQgc3RhdGUKLy8gaWYgcGF1c2FibGUgaXMgdHJ1ZSB0aGVuIGFuIGFkZGl0aW9uYWwgbWV0aG9kIGRlbGl2ZXIoaWdub3JlUHJldmlvdXMpIGlzIGF2YWlsYWJsZSB0byBzdGFydCBkZWxpdmVyeQovLyB0byBwYXVzZSBkZWxpdmVyeSBzZXQgYSBwcm9wZXJ0eSBjYWxsZWQgcGF1c2Ugb24gdGhlIGZ1bmN0aW9uIGRlbGl2ZXIgdG8gdHJ1ZQovLyBwYXVzYWJsZSBpcyBvcHRpb25hbCB0byByZWR1Y2UgdGhlIGNoYW5jZSBvZiBzaGFkb3dpbmcgYSBwcm9wZXJ0eSBvciBtZXRob2Qgb24gYW55IGV4aXN0aW5nIGNvZGUgY2FsbGVkIGRlbGl2ZXIKT2JqZWN0Lm9ic2VydmV8fCJmdW5jdGlvbiIhPXR5cGVvZiBQcm94eXx8KE9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KG51bGwsImRlbGl2ZXIiKX0sT2JzZXJ2ZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQscil7Ly8gLCByZWNlaXZlcgp2YXIgbj1lW3RdLG89dm9pZCAwPT09bj8iYWRkIjoidXBkYXRlIjtpZihlW3RdPXIsZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJighdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZihvKT49MCkpe3ZhciBpPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZTpvfSxzPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsYT10aGlzLmRlbGl2ZXIoKTsidXBkYXRlIj09PW8mJihpLm9sZFZhbHVlPW4pLHRoaXMuY2hhbmdlc2V0LnB1c2goaSkscyYmYSghMSwibnVtYmVyIj09dHlwZW9mIGEuZGVsYXk/YS5kZWxheToxMCl9cmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5kZWxldGVQcm9wZXJ0eT1mdW5jdGlvbihlLHQpe3ZhciByPWVbdF07aWYoCi8vaWYodHlwZW9mKG9sZHZhbHVlKSE9PSJ1bmRlZmluZWQiKSB7CmRlbGV0ZSBlW3RdLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigiZGVsZXRlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZToiZGVsZXRlIixvbGRWYWx1ZTpyfSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsIm51bWJlciI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfQovL30KcmV0dXJuITB9LE9ic2VydmVyLnByb3RvdHlwZS5kZWZpbmVQcm9wZXJ0eT1mdW5jdGlvbihlLHQscil7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxyKSxlLl9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCYmIXRoaXMuYWNjZXB0bGlzdHx8dGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInJlY29uZmlndXJlIik+PTApe3ZhciBuPXtvYmplY3Q6ZSxuYW1lOnQsdHlwZToicmVjb25maWd1cmUifSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsIm51bWJlciI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2Y9ZnVuY3Rpb24oZSx0KXt2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7aWYoT2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCksZS5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAmJiF0aGlzLmFjY2VwdGxpc3R8fHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJzZXRQcm90b3R5cGUiKT49MCl7dmFyIG49e29iamVjdDplLG5hbWU6Il9fcHJvdG9fXyIsdHlwZToic2V0UHJvdG90eXBlIixvbGRWYWx1ZTpyfSxvPTA9PT10aGlzLmNoYW5nZXNldC5sZW5ndGgsaT10aGlzLmRlbGl2ZXIoKTt0aGlzLmNoYW5nZXNldC5wdXNoKG4pLG8mJmkoITEsIm51bWJlciI9PXR5cGVvZiBpLmRlbGF5P2kuZGVsYXk6MTApfXJldHVybiEwfSxPYnNlcnZlci5wcm90b3R5cGUucHJldmVudEV4dGVuc2lvbnM9ZnVuY3Rpb24oZSl7aWYoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKGUpLGUuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wJiYhdGhpcy5hY2NlcHRsaXN0fHx0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicHJldmVudEV4dGVuc2lvbnMiKT49MCl7dmFyIHQ9e29iamVjdDplLHR5cGU6InByZXZlbnRFeHRlbnNpb25zIn0scj0wPT09dGhpcy5jaGFuZ2VzZXQubGVuZ3RoLG49dGhpcy5kZWxpdmVyKCk7dGhpcy5jaGFuZ2VzZXQucHVzaCh0KSxyJiZuKCExLCJudW1iZXIiPT10eXBlb2Ygbi5kZWxheT9uLmRlbGF5OjEwKX1yZXR1cm4hMH0sT2JqZWN0Lm9ic2VydmU9ZnVuY3Rpb24oZSx0LHIsbixvLGkpe3JldHVybiBuZXcgT2JzZXJ2ZXIoZSx0LHIsbixvLGkpfSxPYmplY3QudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7aWYoZS5fX29ic2VydmVyQ2FsbGJhY2tzX18pe2lmKCF0KXJldHVybiBlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UoMCxlLl9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpLHZvaWQgZS5fX29ic2VydmVyc19fLnNwbGljZSgwLGUuX19vYnNlcnZlcnNfXy5sZW5ndGgpO2UuX19vYnNlcnZlckNhbGxiYWNrc19fLmZvckVhY2goZnVuY3Rpb24ocixuKXt0PT09ciYmKGUuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShuLDEpLGRlbGV0ZSBlLl9fb2JzZXJ2ZXJzX19bbl0uY2FsbGJhY2ssZS5fX29ic2VydmVyc19fLnNwbGljZShuLDEpKX0pfX0sQXJyYXkub2JzZXJ2ZT1mdW5jdGlvbihlLHQscixuLG8saSl7aWYoIShlIGluc3RhbmNlb2YgQXJyYXl8fEFycmF5LmlzQXJyYXkoZSkpKXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IHRvIEFycmF5Lm9ic2VydmVyIGlzIG5vdCBhbiBBcnJheSIpO3I9cnx8WyJhZGQiLCJ1cGRhdGUiLCJkZWxldGUiLCJzcGxpY2UiXTt2YXIgcz1uZXcgUHJveHkoZSx7Z2V0OmZ1bmN0aW9uKHQsbil7cmV0dXJuInVub2JzZXJ2ZSI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiBlP09iamVjdC51bm9ic2VydmUodCxlKTp0LnVub2JzZXJ2ZSgpfToic3BsaWNlIj09PW4/ZnVuY3Rpb24obixvKXtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygbyl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCB0d28gYXJndW1lbnRzIHRvIEFycmF5IHNwbGljZSBhcmUgbm90IG51bWJlciwgbnVtYmVyIik7dmFyIGk9dGhpcy5zbGljZShuLG4rbykscz1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzLmxlbmd0aC0yOjAsdT17b2JqZWN0OmUsdHlwZToic3BsaWNlIixpbmRleDpuLHJlbW92ZWQ6aSxhZGRlZENvdW50OnN9O2lmKHQuc3BsaWNlLmFwcGx5KHQsYXJndW1lbnRzKSxyLmluZGV4T2YoInNwbGljZSIpPj0wKXt2YXIgbj0wPT09YS5fX29ic2VydmVyX18uY2hhbmdlc2V0Lmxlbmd0aCxjPWEuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTthLl9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQucHVzaCh1KSxuJiZjKCExLCJudW1iZXIiPT10eXBlb2YgYy5kZWxheT9jLmRlbGF5OjEwKX19OiJwdXNoIj09PW4/ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLDAsZSl9OiJwb3AiPT09bj9mdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpfToidW5zaGlmdCI9PT1uP2Z1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwbGljZSgwLDAsZSl9OiJzaGlmdCI9PT1uP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3BsaWNlKDAsMSl9OnRbbl19fSksYT1PYmplY3Qub2JzZXJ2ZShzLGZ1bmN0aW9uKGUpe3ZhciBuPWUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiJsZW5ndGgiIT09ZS5uYW1lJiYiYWRkIiE9PWUubmFtZSYmKCFyfHxyLmluZGV4T2YoZS50eXBlKT49MCl9KTtuLmxlbmd0aD4wJiZ0KG4pfSxyLG4sbyxpKTtyZXR1cm4gYX0sQXJyYXkudW5vYnNlcnZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudW5vYnNlcnZlKHQpfSksT2JqZWN0LmRlZXBPYnNlcnZlPWZ1bmN0aW9uKGUsdCxyKXtmdW5jdGlvbiByZW9ic2VydmUoZSxyKXtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe2lmKCgib2JqZWN0Ij09PW4oZVtvXSl8fCJhcnJheSI9PT1uKGVbb10pKSYmIWVbb10uaGFzT3duUHJvcGVydHkoIl9fb2JzZXJ2ZXJzX18iKSl7dmFyIGk9ci5zbGljZSgwKTtpLnB1c2gobyksZVtvXT1PYmplY3QuZGVlcE9ic2VydmUoZVtvXSx0LGkpfX0pfXI9cnx8W107dmFyIG49ZnVuY3Rpb24oZSl7cmV0dXJue30udG9TdHJpbmcuY2FsbChlKS5tYXRjaCgvXHMoW2EtekEtWl0rKS8pWzFdLnRvTG93ZXJDYXNlKCl9O3JldHVybiByZW9ic2VydmUoZSxyKSxPYmplY3Qub2JzZXJ2ZShlLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHJlY3Vyc2UoZSx0LHIsbyxpKXtpZihvIGluc3RhbmNlb2YgT2JqZWN0KXtPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGZ1bmN0aW9uKHMpe2lmKCFyfHxyW3NdIT09b1tzXSl7dmFyIGE9ciYmdm9pZCAwIT09cltzXT9yW3NdOnZvaWQgMCx1PXZvaWQgMD09PWE/ImFkZCI6InVwZGF0ZSIsYz1pKyIuIitzO24ucHVzaCh7bmFtZTplLG9iamVjdDp0LHR5cGU6dSxvbGRWYWx1ZTphLG5ld1ZhbHVlOm9bc10sa2V5cGF0aDpjfSkscmVjdXJzZShlLHQsYSxvW3NdLGMpfX0pfWVsc2UgaWYociBpbnN0YW5jZW9mIE9iamVjdCl7dmFyIHM9T2JqZWN0LmtleXMocik7cy5mb3JFYWNoKGZ1bmN0aW9uKHMpe3ZhciBhPW51bGw9PT1vPyJ1cGRhdGUiOiJkZWxldGUiLHU9aSsiLiIrcztuLnB1c2goe25hbWU6ZSxvYmplY3Q6dCx0eXBlOmEsb2xkVmFsdWU6cltzXSxuZXdWYWx1ZTpvLGtleXBhdGg6dX0pLHJlY3Vyc2UoZSx0LHJbc10sdm9pZCAwLHUpfSl9fXZhciBuPVtdO2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD0oci5sZW5ndGg+MD9yLmpvaW4oIi4iKSsiLiI6IiIpK2UubmFtZTsidXBkYXRlIiE9PWUudHlwZSYmImFkZCIhPT1lLnR5cGV8fHJlb2JzZXJ2ZShlLm9iamVjdCxyKSxuLnB1c2goe25hbWU6ZS5uYW1lLG9iamVjdDplLm9iamVjdCx0eXBlOmUudHlwZSxvbGRWYWx1ZTplLm9sZFZhbHVlLG5ld1ZhbHVlOmUub2JqZWN0W2UubmFtZV0sa2V5cGF0aDp0fSkscmVjdXJzZShlLm5hbWUsZS5vYmplY3QsZS5vbGRWYWx1ZSxlLm9iamVjdFtlLm5hbWVdLHQpfSksdChuKX0pfX0oKX0sLyogNDcyICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNyksZj1mdW5jdGlvbihlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9KGMpLGw9cigxNCksZD1yKDE0NCkscD1yKDIwNSkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig0NzcpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPWYuZ2V0TG9nZ2VyKCJJZGVudGl0eU1vZHVsZSIpLGI9ZnVuY3Rpb24oKXsvKioKICAqIFRoaXMgaXMgdGhlIGNvbnN0cnVjdG9yIHRvIGluaXRpYWxpc2UgdGhlIElkZW50aXR5IE1vZHVsZSBpdCBkb2VzIG5vdCByZXF1aXJlIGFueSBpbnB1dC4KICAqLwpmdW5jdGlvbiBJZGVudGl0eU1vZHVsZShlLHQscixuLG8saSl7KDAscy5kZWZhdWx0KSh0aGlzLElkZW50aXR5TW9kdWxlKTt2YXIgYT10aGlzO2lmKCFlKXRocm93IG5ldyBFcnJvcigicnVudGltZVVSTCBpcyBtaXNzaW5nLiIpO2lmKCFyKXRocm93IG5ldyBFcnJvcigic3RvcmFnZU1hbmFnZXIgaXMgbWlzc2luZyIpO2lmKCFvKXRocm93IG5ldyBFcnJvcigiY3J5cHRvTWFuYWdlciBpcyBtaXNzaW5nIik7aWYoIWkpdGhyb3cgbmV3IEVycm9yKCJydW50aW1lQ2F0YWxvZ3VlIGlzIG1pc3NpbmciKTthLl9ydW50aW1lVVJMPWUsYS5fcnVudGltZUNhdGFsb2d1ZT1pLGEuZGF0YU9iamVjdHNTdG9yYWdlPW4sYS5faWRtVVJMPWEuX3J1bnRpbWVVUkwrIi9pZG0iLGEuX2d1aVVSTD1hLl9ydW50aW1lVVJMKyIvaWRlbnRpdHktZ3VpIixhLnJ1bnRpbWVDYXBhYmlsaXRpZXM9dCxhLl9kb21haW49KDAsbC5kaXZpZGVVUkwpKGEuX3J1bnRpbWVVUkwpLmRvbWFpbiwKLy90byBzdG9yZSBpdGVtcyB3aXRoIHRoaXMgZm9ybWF0OiB7aWRlbnRpdHk6IGlkZW50aXR5VVJMLCB0b2tlbjogdG9rZW5JRH0KYS5faWRlbnRpdGllcz1uZXcgeS5kZWZhdWx0KCJodW1hbiIsciksCi8vIHRvIGJlIHJldmlld2VkOiB3YXRjaGluZ1lvdSBpZGVudGl0aWVzTGlzdCBvciBpZGVudGl0aWVzPwovLyAgICBfdGhpcy5pZGVudGl0aWVzTGlzdCA9IF90aGlzLndhdGNoaW5nWW91LndhdGNoKCdpZGVudGl0aWVzTGlzdCcsIHt9LCB0cnVlKTsKYS5fY3J5cHRvPW8sLyogICAgX3RoaXMuZW1haWxzTGlzdCA9IFtdOwogICAgbGV0IG5ld0lkZW50aXR5ID0gbmV3IElkZW50aXR5KCdndWlkJywgJ0hVTUFOJyk7CiAgICBfdGhpcy5pZGVudGl0eSA9IG5ld0lkZW50aXR5OwogICAgX3RoaXMuY3VycmVudElkZW50aXR5OwogICAgX3RoaXMuaWRlbnRpdGllcy5kZWZhdWx0SWRlbnRpdHk7Ki8KLy9zdG9yZXMgdGhlIGFzc29jaWF0aW9uIG9mIHRoZSBkYXRhT2JqZWN0IGFuZCB0aGUgSHlwZXJ0eSByZWdpc3RlcmVkIHdpdGhpbgphLmRhdGFPYmplY3RzSWRlbnRpdHk9e30sLy8gaXMgdGhpcyBuZWVkZWQ/CmEuX2xpc3RPZklkcHM9W10sCi8vIHZhcmlhYmxlIHRvIGtub3cgaWYgdGhlIEdVSSBpcyBkZXBsb3llZCB0byBjaG9vc2UgdGhlIGlkZW50aXR5LiBpZiB0aGUgcmVhbCBHVUkgaXMgbm90IGRlcGxveWVkLCBhIGZha2UgZ3VpIGlzIGRlcGxveWVkIGluc3RlYWQuCmEuZ3VpRGVwbG95ZWQ9ITF9Ci8vKioqKioqKioqKioqKioqKioqKiBHRVQgQU5EIFNFVCBNRVRIT0RTICoqKioqKioqKioqKioqKioqKioKLyoqCiAgKiByZXR1cm4gdGhlIG1lc3NhZ2VCdXMgaW4gdGhpcyBSZWdpc3RyeQogICogQHBhcmFtIHtNZXNzYWdlQnVzfSAgICAgICAgICAgbWVzc2FnZUJ1cwogICovCnJldHVybigwLHUuZGVmYXVsdCkoSWRlbnRpdHlNb2R1bGUsW3trZXk6ImdldElkZW50aXR5IiwKLy8qKioqKioqKioqKioqKioqKioqIElERU5USVRZIFJFTEVBVEVEIE1FVEhPRFMgKioqKioqKioqKioqKioqKioqKgovKioKICAgICogZ2V0cyBhbGwgdGhlIGluZm9ybWF0aW9uIGZyb20gYSBnaXZlbiB1c2VyVVJMCiAgICAqIEBwYXJhbSAge1N0cmluZ30gIHVzZXJVUkwgICAgIHVzZXIgdXJsCiAgICAqIEByZXR1cm4ge0pTT059ICAgIGlkZW50aXR5ICAgIGlkZW50aXR5IGJ1bmRsZSBmcm9tIHRoZSB1c2VyVVJMCiAgICAqLwp2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pZGVudGl0aWVzLmdldElkZW50aXR5KGUpfX0se2tleToiZ2V0SWRlbnRpdGllc1RvQ2hvb3NlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7Ci8vICAgIGxldCBpZGVudGl0aWVzID0gX3RoaXMuaWRlbnRpdGllcy5pZGVudGlmaWVyczsKLy8gbGV0IGlkcHMgPSBbCi8vICAgeyBkb21haW46ICdnb29nbGUuY29tJywgdHlwZTogJ2lkVG9rZW4nfSwKLy8gICB7IGRvbWFpbjogJ21pY3Jvc29mdC5jb20nLCB0eXBlOiAnaWRUb2tlbid9LAovLyAgIHsgZG9tYWluOiAnb3JhbmdlLmZyJywgdHlwZTogJ2lkVG9rZW4nfSwKLy8gICB7IGRvbWFpbjogJ3NsYWNrLmNvbScsIHR5cGU6ICdMZWdhY3knfQovLyBdOwovLyB0b2RvOiByZXRyaWV2ZSBhdmFpbGFibGUgaWRwcyBmcm9tIHJ1bnRpbWUgY2F0YWxvZ3VlCi8vIHRvZG86IGVuYWJsZSBvYXV0aCBpZHBzCi8vIGxldCBpZHBzID0gWwovLyAgIHsgZG9tYWluOiAnZ29vZ2xlLmNvbScsIHR5cGU6ICdpZFRva2VuJyB9LAovLyAgIHsgZG9tYWluOiAnbWljcm9zb2Z0LmNvbScsIHR5cGU6ICdpZFRva2VuJyB9LAovLyAgIHsgZG9tYWluOiAnZmFjZWJvb2suY29tJywgdHlwZTogJ2lkVG9rZW4nIH0sCi8vICAgeyBkb21haW46ICdzbGFjay5jb20nLCB0eXBlOiAnaWRUb2tlbicgfQovLyBdOwpyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbih0KXt2YXIgcj1kLnJ1bnRpbWVDb25maWd1cmF0aW9uLmNhdGFsb2d1ZVVSTHMuaWRwUHJveHkucHJlZml4K2UuX2RvbWFpbitkLnJ1bnRpbWVDb25maWd1cmF0aW9uLmNhdGFsb2d1ZVVSTHMuaWRwUHJveHkuc3VmZml4O28uZGVmYXVsdC5hbGwoW2UucnVudGltZUNhcGFiaWxpdGllcy5pc0F2YWlsYWJsZSgiYnJvd3NlciIpLGUucnVudGltZUNhcGFiaWxpdGllcy5pc0F2YWlsYWJsZSgibm9kZSIpXSkudGhlbihmdW5jdGlvbihuKXt2YXIgbz1uWzBdLGk9blsxXSxzPXtjb25zdHJhaW50czp7fX07cy5jb25zdHJhaW50cy5ub2RlPWkscy5jb25zdHJhaW50cy5icm93c2VyPW8sZS5fcnVudGltZUNhdGFsb2d1ZS5nZXRUeXBlTGlzdChyLHMpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49ci5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue2RvbWFpbjplLHR5cGU6ImlkVG9rZW4ifX0pO3JldHVybiBnLmluZm8oIltJZGVudGl0eU1vZHVsZS5nZXRJZGVudGl0eUFzc2VydGlvbjpnZXRJZGVudGl0aWVzVG9DaG9vc2VdIixyLG4pLGUuX2xpc3RPZklkcHM9bix0KHtkZWZhdWx0SWRlbnRpdHk6ZS5pZGVudGl0aWVzLmRlZmF1bHRJZGVudGl0eSxpZGVudGl0aWVzOmUuaWRlbnRpdGllcy5pZGVudGl0aWVzLGlkcHM6bn0pfSl9KX0pfX0se2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHQpe2UuX2lkZW50aXRpZXMubG9hZElkZW50aXRpZXMoKS50aGVuKGZ1bmN0aW9uKCl7ZS5fY3J5cHRvLmdldE15UHVibGljS2V5KCkudGhlbihmdW5jdGlvbihyKXtlLl9jcnlwdG8uY3J5cHRvLl9zaGEyNTYoKDAsbC5zdHJpbmdpZnkpKHIpKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPSJ1c2VyLWd1aWQ6Ly8iK3I7ZS5pZGVudGl0aWVzLmd1aWQ9bixlLl9pZGVudGl0aWVzLmxvYWRBY2Nlc3NUb2tlbnMoKS50aGVuKGZ1bmN0aW9uKCl7dCgpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt9KX0pfSl9KX19LHtrZXk6ImdldElkZW50aXR5QXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXtnLmxvZygiW0lkZW50aXR5TW9kdWxlLmdldElkZW50aXR5QXNzZXJ0aW9uOmlkZW50aXR5QnVuZGxlXSIsZSk7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pewovL0NIRUNLIHdoZXRoZXIgaXMgYnJvd3NlciBlbnZpcm9ubWVudCBvciBub2RlanMKLy9pZiBpdCBpcyBicm93c2VyLCB0aGVuIGNyZWF0ZSBhIGZha2UgaWRlbnRpdHkKdC5ydW50aW1lQ2FwYWJpbGl0aWVzLmlzQXZhaWxhYmxlKCJicm93c2VyIikudGhlbihmdW5jdGlvbihvKXtpZihnLmxvZygicnVudGltZSBicm93c2VyIGlkZW50aXR5IGFjcXVpc2l0aW9uIixvKSxvKQovL3RvZG86IG9ubHkgaWRwIHNob3VsZCBiZSBtYW5kYXRvcnkgd2hlbiBpZGVudGl0eUJ1bmRsZSBleGlzdHMKaWYoZSYmZS5oYXNPd25Qcm9wZXJ0eSgiaWRwIikpe3ZhciBpPWUuaWRwLHM9ZS5oYXNPd25Qcm9wZXJ0eSgib3JpZ2luIik/ZS5vcmlnaW46Im9yaWdpbiIsYT1lLmhhc093blByb3BlcnR5KCJpZEhpbnQiKT9lLmlkSGludDoiIjt0LnNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eShzLGksYSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZy5sb2coIltJZGVudGl0eU1vZHVsZV0gSWRlbnRpdHkgc2VsZWN0ZWQgYnkgaHlwZXJ0eS4iKSxyKGUpfSxmdW5jdGlvbihlKXsKLy8gaWYgaXQgZ290IGFuIGVycm9yIHRoZW4ganVzdCBzZWxlY3QgaWRlbnRpdHkgZnJvbSBHVUkKLy8gbG9nLmVycm9yKCdbSWRlbnRpdHlNb2R1bGVdIENvdWxkIG5vdCBzZWxlY3QgaWRlbnRpdHkgZnJvbSBoeXBlcnR5LicpOwp0LnNlbGVjdElkZW50aXR5RnJvbUdVSSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGcubG9nKCJbSWRlbnRpdHlNb2R1bGVdIElkZW50aXR5IHNlbGVjdGVkIGJ5IGh5cGVydHkuIikscihlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX0pfWVsc2V7aWYodC5pZGVudGl0aWVzLmRlZmF1bHRJZGVudGl0eSYmdC5pZGVudGl0aWVzLmRlZmF1bHRJZGVudGl0eS5leHBpcmVzPigwLGwuc2Vjb25kc1NpbmNlRXBvY2gpKCkpcmV0dXJuIHIodC5pZGVudGl0aWVzLmRlZmF1bHRJZGVudGl0eSk7dC5zZWxlY3RJZGVudGl0eUZyb21HVUkoKS50aGVuKGZ1bmN0aW9uKGUpey8qCiAgICAgICAgICAgICAgICAgIF90aGlzLmlkZW50aXRpZXMuZGVmYXVsdElkZW50aXR5ID0gYXNzZXJ0aW9uLnVzZXJQcm9maWxlLnVzZXJVUkw7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGFzc2VydGlvbik7CiAgICAgICAgICAgICAgICB9Ki8KcmV0dXJuIGcubG9nKCJbSWRlbnRpdHlNb2R1bGVdIElkZW50aXR5IHNlbGVjdGVkIGZyb20gR1VJLiIpLHQuaWRlbnRpdGllcy5kZWZhdWx0SWRlbnRpdHk9ZS51c2VyUHJvZmlsZS51c2VyVVJMLHIoZSl9LGZ1bmN0aW9uKGUpe3JldHVybiBuKGUpfSl9fSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIGcuZXJyb3IoIkVycm9yIG9uIGlkZW50aXR5IGFjcXVpc2l0aW9uICIsZSksbihlKX0pLHQucnVudGltZUNhcGFiaWxpdGllcy5pc0F2YWlsYWJsZSgibm9kZSIpLnRoZW4oZnVuY3Rpb24oZSl7aWYoZy5sb2coIm5vZGUgaWRlbnRpdHkgYWNxdWlzaXRpb24iLGUpLGUpe2lmKHQuaWRlbnRpdGllcy5jdXJyZW50SWRlbnRpdHkpCi8vVE9ETyB2ZXJpZnkgd2hldGhlciB0aGUgdG9rZW4gaXMgc3RpbGwgdmFsaWQgb3Igbm90LgovLyBzaG91bGQgYmUgbmVlZGVkIHRvIG1ha2UgZnVydGhlciByZXF1ZXN0cywgdG8gb2J0YWluIGEgdmFsaWQgdG9rZW4KcmV0dXJuIHIodC5pZGVudGl0aWVzLmN1cnJlbnRJZGVudGl0eSk7Zy5sb2coImdldElkZW50aXR5QXNzZXJ0aW9uIGZvciBub2RlanMiKTt2YXIgbz17dHlwZToiaWRwIix2YWx1ZToibm9kZWpzLWlkcCIsY29kZToyMDAsYXV0aDohMX07dC5jYWxsTm9kZUpzR2VuZXJhdGVNZXRob2RzKG8udmFsdWUsIm9yaWdpbiIpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0sZnVuY3Rpb24oZSl7bihlKX0pfX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2cuZXJyb3IoIkVycm9yIG9uIGlkZW50aXR5IGFjcXVpc2l0aW9uICIsZSksbihlKX0pfSl9fSx7a2V5OiJnZXRVc2Vyc0lEcyIsdmFsdWU6ZnVuY3Rpb24oKXsvKiAgbG9nLmxvZygnW2dldFVzZXJzSURzOmVtYWlsRm9ybWF0XScsIGVtYWlsRm9ybWF0KTsKICAgICAgICBsb2cubG9nKCdnZXRVc2Vyc0lEczplbWFpbEZvcm1hdCcsIGVtYWlsRm9ybWF0KTsKICAgICAgICBsZXQgX3RoaXMgPSB0aGlzOwogICAgICAgIGxldCB1c2VycyA9IFtdOyovCi8vaWYgcmVxdWVzdCBjb21lcyB3aXRoIHRoZSBlbWFpbEZvcm1hdCBvcHRpb24sIHRoZW4gY29udmVydCB1cmwgdG8gZW1haWwgZm9ybWF0Ci8qICAgIGxldCBjb252ZXJ0ZXIgPSAoZW1haWxGb3JtYXQpID8gZ2V0VXNlckVtYWlsRnJvbVVSTCA6ICh2YWx1ZSkgPT4geyByZXR1cm4gdmFsdWU7IH07CiAgICAgICBmb3IgKGxldCBpbmRleCBpbiBfdGhpcy5pZGVudGl0aWVzKSB7CiAgICAgICAgbGV0IGlkZW50aXR5ID0gX3RoaXMuaWRlbnRpdGllc1tpbmRleF07CiAgICAgICAgdXNlcnMucHVzaChjb252ZXJ0ZXIoaWRlbnRpdHkuaWRlbnRpdHkpKTsKICAgICAgfSovCnJldHVybiB0aGlzLmlkZW50aXRpZXMuaWRlbnRpZmllcnN9fSx7a2V5OiJkZWxldGVJZGVudGl0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaWRlbnRpdGllcy5yZW1vdmVJZGVudGl0eShlKX19LHtrZXk6InJlcXVlc3RJZGVudGl0eVRvR1VJIix2YWx1ZTpmdW5jdGlvbihlLHQpe2cubG9nKCJbSWRlbnRpdHlNb2R1bGUucmVxdWVzdElkZW50aXR5VG9HVUk6aWRlbnRpdGllc10iLGUpLGcubG9nKCJbSWRlbnRpdHlNb2R1bGUucmVxdWVzdElkZW50aXR5VG9HVUk6aWRwc10iLHQpO3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXsKLy9jb25kaXRpb24gdG8gY2hlY2sgaWYgdGhlIHJlYWwgR1VJIGlzIGRlcGxveWVkLiBJZiBub3QsIGRlcGxveXMgYSBmYWtlIGd1aQppZighMT09PXIuZ3VpRGVwbG95ZWQpe3ZhciBpPXIuX2d1aVVSTCxzPW5ldyB2LmRlZmF1bHQoaSxyLl9tZXNzYWdlQnVzKTtyLmd1aUZha2U9cyxyLmd1aURlcGxveWVkPSEwfXZhciBhPXt0eXBlOiJjcmVhdGUiLHRvOnIuX2d1aVVSTCxmcm9tOnIuX2lkbVVSTCxib2R5Ont2YWx1ZTp7aWRlbnRpdGllczplLGlkcHM6dH19fSx1PWZ1bmN0aW9uKGUpewovLyB0b2RvOiB0byByZXR1cm4gdGhlIHVzZXIgVVJMIGFuZCBub3QgdGhlIGVtYWlsIG9yIGlkZW50aWZpZXIKaWYoci5fbWVzc2FnZUJ1cy5yZW1vdmVSZXNwb25zZUxpc3RlbmVyKHIuX2lkbVVSTCxlLmlkKSwyMDA9PT1lLmJvZHkuY29kZSl7dmFyIHQ9ZS5ib2R5O2cubG9nKCJzZWxlY3RlZElkZW50aXR5OiAiLHQudmFsdWUpLG4odCl9ZWxzZSBvKCJlcnJvciBvbiByZXF1ZXN0aW5nIGFuIGlkZW50aXR5IHRvIHRoZSBHVUkiKX07Ci8vcG9zdE1lc3NhZ2Ugd2l0aCBjYWxsYmFjayBidXQgd2l0aG91dCB0aW1lb3V0CnRyeXtyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGEsdSwhMSl9Y2F0Y2goZSl7bygiSW4gbWV0aG9kIGNhbGxJZGVudGl0eU1vZHVsZUZ1bmMgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJjYWxsTm9kZUpzR2VuZXJhdGVNZXRob2RzIix2YWx1ZTpmdW5jdGlvbihlLHQpe2cubG9nKCJbY2FsbE5vZGVKc0dlbmVyYXRlTWV0aG9kczppZHBdIixlKSxnLmxvZygiW2NhbGxOb2RlSnNHZW5lcmF0ZU1ldGhvZHM6b3JpZ2luXSIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pewovL2RlYnVnZ2VyOwp2YXIgaT12b2lkIDA7Ci8vbGV0IGtleVBhaXIgPSBub2RlSlNLZXlQYWlyUG9wdWxhdGU7Ci8vZ2VuZXJhdGVzIHRoZSBSU0Ega2V5IHBhaXIKci5fY3J5cHRvLmdldE15UHVibGljS2V5KCkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gZy5sb2coIltjYWxsTm9kZUpzR2VuZXJhdGVNZXRob2RzOmtleV0iLG4pLGk9KDAsbC5zdHJpbmdpZnkpKG4pLGcubG9nKCJbY2FsbE5vZGVKc0dlbmVyYXRlTWV0aG9kc10gTk9fVVJMIiksci5nZW5lcmF0ZUFzc2VydGlvbihpLHQsInVybCIsZSl9KS50aGVuKGZ1bmN0aW9uKGUpe2U/bihlKTpvKCJFcnJvciBvbiBvYnRhaW5pbmcgSWRlbnRpdHkiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2cubG9nKGUpLG8oZSl9KX0pfX0se2tleToiY2FsbEdlbmVyYXRlTWV0aG9kcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtnLmxvZygiW2NhbGxHZW5lcmF0ZU1ldGhvZHM6aWRwXSIsZSksZy5sb2coIltjYWxsR2VuZXJhdGVNZXRob2RzOm9yaWdpbl0iLHQpO3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT12b2lkIDA7Ci8vZ2VuZXJhdGVzIHRoZSBSU0Ega2V5IHBhaXIKci5fY3J5cHRvLmdldE15UHVibGljS2V5KCkudGhlbihmdW5jdGlvbihuKXsKLy8gICAgICAgIHVzZXJrZXlQYWlyID0ga2V5UGFpcjsKcmV0dXJuIGcubG9nKCJbY2FsbE5vZGVKc0dlbmVyYXRlTWV0aG9kczprZXldIixuKSxpPSgwLGwuc3RyaW5naWZ5KShuKSxnLmxvZygiZ2VuZXJhdGVBc3NlcnRpb246bm9faGludCIpLHIuZ2VuZXJhdGVBc3NlcnRpb24oaSx0LCIiLGUpfSkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gci5teUhpbnQ9bixnLmxvZygiZ2VuZXJhdGVBc3NlcnRpb246aGludCIpLHIuZ2VuZXJhdGVBc3NlcnRpb24oaSx0LG4sZSl9KS50aGVuKGZ1bmN0aW9uKGUpe2U/bihlKTpvKCJFcnJvciBvbiBvYnRhaW5pbmcgSWRlbnRpdHkiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2cuZXJyb3IoZSksbyhlKX0pfSl9fSx7a2V5OiJsb2dpblNlbGVjdGVkSWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe2cubG9nKCJbbG9naW5TZWxlY3RlZElkZW50aXR5OnB1YmxpY0tleV0iLGUpLGcubG9nKCJbbG9naW5TZWxlY3RlZElkZW50aXR5Om9yaWdpbl0iLHQpLGcubG9nKCJbbG9naW5TZWxlY3RlZElkZW50aXR5OmlkcF0iLHIpLAovLyAgICBsb2cubG9nKCdbbG9naW5TZWxlY3RlZElkZW50aXR5OmtleVBhaXJdJywga2V5UGFpcik7CmcubG9nKCJbbG9naW5TZWxlY3RlZElkZW50aXR5OmxvZ2luVXJsXSIsbik7dmFyIGk9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLHMpe2cubG9nKCJbSWRlbnRpdHlNb2R1bGVdIG9wZW5Qb3B1cCIpLGkuY2FsbElkZW50aXR5TW9kdWxlRnVuYygib3BlblBvcHVwIix7dXJscmVjZWl2ZWQ6bn0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGZ1bmN0aW9uKGUpe3JldHVybiBnLmVycm9yKCJFcnJvciB3aGlsZSBsb2dnaW5nIGluIGZvciB0aGUgc2VsZWN0ZWQgaWRlbnRpdHkuIikscyhlKX0pLnRoZW4oZnVuY3Rpb24obil7aS5zZW5kR2VuZXJhdGVNZXNzYWdlKGUsdCxuLHIpLnRoZW4oZnVuY3Rpb24oZSl7aWYoIWUuaGFzT3duUHJvcGVydHkoImFzc2VydGlvbiIpKXJldHVybiBnLmVycm9yKCJFcnJvciB3aGlsZSBsb2dnaW5nIGluIGZvciB0aGUgc2VsZWN0ZWQgaWRlbnRpdHkuIikscygiQ291bGQgbm90IGdlbmVyYXRlIGEgdmFsaWQgYXNzZXJ0aW9uIGZvciBzZWxlY3RlZCBpZGVudGl0eS4iKTtpLmlkZW50aXRpZXMuYWRkQXNzZXJ0aW9uKGUpLnRoZW4oZnVuY3Rpb24oZSl7bygiTG9naW4gd2FzIHN1Y2Nlc3NmdWxsIil9KS5jYXRjaChmdW5jdGlvbihlKXtzKCJMb2dpbiBoYXMgZmFpbGVkOiIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3MoIk9uIGxvZ2luU2VsZWN0ZWRJZGVudGl0eSBmcm9tIG1ldGhvZCBzZW5kR2VuZXJhdGVNZXNzYWdlIGVycm9yOiAgIitlKX0pfSl9KX19LHtrZXk6InNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe2cubG9nKCJbc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5Om9yaWdpbl0iLGUpLGcubG9nKCJbc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5OmlkcF0iLHQpLGcubG9nKCJbc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5OmlkSGludF0iLHIpO3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXsKLy9nZW5lcmF0ZXMgdGhlIFJTQSBrZXkgcGFpcgpuLl9jcnlwdG8uZ2V0TXlQdWJsaWNLZXkoKS50aGVuKGZ1bmN0aW9uKHMpe3ZhciBhPSgwLGwuc3RyaW5naWZ5KShzKTtuLnNlbmRHZW5lcmF0ZU1lc3NhZ2UoYSxlLHIsdCkudGhlbihmdW5jdGlvbihyKXtyLmhhc093blByb3BlcnR5KCJhc3NlcnRpb24iKT8KLy8gaWRlbnRpdHkgd2FzIGxvZ2dlZCBpbiwganVzdCBzYXZlIGl0Cm4uaWRlbnRpdGllcy5hZGRBc3NlcnRpb24ocikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbyhyKX0sZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9KTpyLmhhc093blByb3BlcnR5KCJsb2dpblVybCIpPwovLyBpZGVudGl0eSB3YXMgbm90IGxvZ2dlZCBpbgpuLmxvZ2luU2VsZWN0ZWRJZGVudGl0eShhLGUsdCxyLmxvZ2luVXJsKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBvKGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gaShlKX0pOigKLy8geW91IHNob3VsZCBuZXZlciBnZXQgaGVyZSwgaWYgeW91IGRvIHRoZW4gdGhlIElkUCBQcm94eSBpcyBub3Qgd2VsbCBpbXBsZW1lbnRlZAovLyBsb2cuZXJyb3IoJ0dlbmVyYXRlQXNzZXJ0aW9uIHJldHVybmVkIGludmFsaWQgcmVzcG9uc2UuJyk7CmcubG9nKCJQcm9jZWVkaW5nIGJ5IGxvZ2dpbmcgaW4uIiksbi5jYWxsR2VuZXJhdGVNZXRob2RzKHQsZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9KSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKCJPbiBzZWxlY3RJZGVudGl0eUZvckh5cGVydHkgZnJvbSBtZXRob2Qgc2VuZEdlbmVyYXRlTWVzc2FnZSBlcnJvcjogICIrZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIk9uIHNlbGVjdElkZW50aXR5Rm9ySHlwZXJ0eSBmcm9tIG1ldGhvZCBnZW5lcmF0ZVJTQUtleVBhaXIgZXJyb3I6ICAiK2UpfSl9KX19LHtrZXk6InNlbGVjdElkZW50aXR5RnJvbUdVSSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztnLmxvZygiW0lkZW50aXR5TW9kdWxlLnNlbGVjdElkZW50aXR5RnJvbUdVSTpvcmlnaW5dIixlKTt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dC5nZXRJZGVudGl0aWVzVG9DaG9vc2UoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiByLnJlcXVlc3RJZGVudGl0eVRvR1VJKGUuaWRlbnRpdGllcyxlLmlkcHMpfSkudGhlbihmdW5jdGlvbih0KXtpZigiaWRlbnRpdHkiPT09dC50eXBlKQovLyAgbGV0IGNob3NlbklEID0gZ2V0VXNlclVSTEZyb21FbWFpbCh2YWx1ZS52YWx1ZSk7Ci8vIGhhY2sgd2hpbGUgdGhlIHVzZXIgdXJsIGlzIG5vdCByZXR1cm5lZCBmcm9tIHJlcXVlc3RJZGVudGl0eVRvR1VJOwovKiAgICAgICAgICBsZXQgY2hvc2VuSUQgPSAndXNlcjovLycgKyBfdGhpcy5pZGVudGl0aWVzLmN1cnJlbnRJZGVudGl0eS5pZHAuZG9tYWluICsgJy8nICsgdmFsdWUudmFsdWU7CiAgICAgICAgICAgICBfdGhpcy5pZGVudGl0aWVzLmRlZmF1bHRJZGVudGl0eSA9IF90aGlzLmlkZW50aXRpZXMuY3VycmVudElkZW50aXR5OyovCi8vIHJldHVybnMgdGhlIGlkZW50aXR5IGluZm8gZnJvbSB0aGUgY2hvc2VuIGlkCi8vICAgICAgICAgIGlmIChfdGhpcy5pZGVudGl0aWVzLmN1cnJlbnRJZGVudGl0eSkgcmVzb2x2ZShfdGhpcy5pZGVudGl0aWVzLmN1cnJlbnRJZGVudGl0eS5hc3NlcnRpb24pOwpyLmlkZW50aXRpZXMuaWRlbnRpdGllc1t0LnZhbHVlXT9uKHIuaWRlbnRpdGllcy5pZGVudGl0aWVzW3QudmFsdWVdKTpvKCJbSWRlbnRpdHlNb2R1bGUuc2VsZWN0SWRlbnRpdHlGcm9tR1VJXSBpZGVudGl0eSBub3QgZm91bmQ6ICIsdC52YWx1ZSk7ZWxzZXtpZigiaWRwIiE9PXQudHlwZSlyZXR1cm4gbygiZXJyb3Igb24gR1VJIHJlY2VpdmVkIG1lc3NhZ2UuIik7ci5jYWxsR2VuZXJhdGVNZXRob2RzKHQudmFsdWUsZSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gbihlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSl9KX19KS5jYXRjaChmdW5jdGlvbihlKXtvKCJPbiBzZWxlY3RJZGVudGl0eUZyb21HVUkgZnJvbSBtZXRob2QgcmVxdWVzdElkZW50aXR5VG9HVUkgZXJyb3I6ICAiK2UpfSl9KX19LHtrZXk6ImNhbGxJZGVudGl0eU1vZHVsZUZ1bmMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Zy5sb2coIltjYWxsSWRlbnRpdHlNb2R1bGVGdW5jOm1ldGhvZE5hbWVdIixlKSxnLmxvZygiW2NhbGxJZGVudGl0eU1vZHVsZUZ1bmM6cGFyYW1ldGVyc10iLHQpO3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT17dHlwZToiZXhlY3V0ZSIsdG86ci5fZ3VpVVJMLGZyb206ci5faWRtVVJMLGJvZHk6e3Jlc291cmNlOiJpZGVudGl0eSIsbWV0aG9kOmUscGFyYW1zOnR9fSxzPWZ1bmN0aW9uKGUpe3IuX21lc3NhZ2VCdXMucmVtb3ZlUmVzcG9uc2VMaXN0ZW5lcihyLl9pZG1VUkwsZS5pZCk7dmFyIHQ9ZS5ib2R5LnZhbHVlO24odCl9O3RyeXtyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGkscywhMSl9Y2F0Y2goZSl7bygiSW4gbWV0aG9kIGNhbGxJZGVudGl0eU1vZHVsZUZ1bmMgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJnZXRUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbSxuPWUudG87cmV0dXJuIGUuaGFzT3duUHJvcGVydHkoImJvZHkiKSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJzb3VyY2UiKSYmKHI9ZS5ib2R5LnNvdXJjZSksImZvcndhcmQiPT09ZS50eXBlJiYocj1lLmJvZHkuZnJvbSksZS5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpJiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInN1YnNjcmliZXIiKSYmKHI9ZS5ib2R5LnN1YnNjcmliZXIpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtnLmxvZygiW0lkZW50aXR5TW9kdWxlLmdldFRva2VuXSBmb3IgbXNnICIsZSksCi8vbG9nLmxvZygndG9VcmwnLCB0b1VybCk7CnQucmVnaXN0cnkuaXNMZWdhY3kobikudGhlbihmdW5jdGlvbihuKXsKLy8gbG9nLmxvZygnW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldFRva2VuXSBpc0xFR0FDWTogJywgcmVzdWx0KTsKbj90Ll9nZXRBY2Nlc3NUb2tlbihlKS50aGVuKGZ1bmN0aW9uKGUpe2cubG9nKCJbSWRlbnRpdHlNb2R1bGUuZ2V0VG9rZW5dIGFjY2VzcyB0b2tlbiAiLGUpLG8oKDAsbC5kZWVwQ2xvbmUpKGUpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIltJZGVudGl0eU1vZHVsZS5nZXRUb2tlbl0gQWNjZXNzIFRva2VuIGVycm9yICIrZSl9KTp0Ll9nZXRWYWxpZFRva2VuKHIpLnRoZW4oZnVuY3Rpb24oZSl7byhlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2koIk9uIGdldFRva2VuIGZyb20gbWV0aG9kIF9nZXRWYWxpZFRva2VuIGVycm9yOiAiK2UpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtpKCJPbiBnZXRUb2tlbiBmcm9tIG1ldGhvZCBpc0xlZ2FjeSBlcnJvcjogIitlKX0pfSl9fSx7a2V5OiJnZXRJZFRva2VuIix2YWx1ZTpmdW5jdGlvbihlKXtnLmluZm8oImdldElkVG9rZW46aHlwZXJ0eVVSTCAiLGUpO3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt2YXIgbz1lLnNwbGl0KCI6Ly8iKSxpPXZvaWQgMDtpZigiaHlwZXJ0eSI9PT1vWzBdKXtpZihpPXQucmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUpKXt2YXIgcz10LmlkZW50aXRpZXMuZ2V0SWRlbnRpdHkoaSk7cmV0dXJuIHM/cihzKTpuKCJbSWRlbnRpdHlNb2R1bGUuZ2V0SWRUb2tlbl0gSWRlbnRpdHkgbm90IGZvdW5kIGZvcjogIixpKX1yZXR1cm4gbigiW0lkZW50aXR5TW9kdWxlLmdldElkVG9rZW5dIFVzZXIgbm90IGZvdW5kIGZvciBoeXBlcnR5OiAiLGkpfQovLyBpdCBpcyBhIERhdGEgT2JqZWN0IFVSTAp0Ll9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3QoZSkudGhlbihmdW5jdGlvbihlKXtpZihpPXQucmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUpKXt2YXIgbz10LmlkZW50aXRpZXMuZ2V0SWRlbnRpdHkoaSk7cmV0dXJuIG8/cihvKTpuKCJbSWRlbnRpdHlNb2R1bGUuZ2V0SWRUb2tlbl0gSWRlbnRpdHkgbm90IGZvdW5kIGZvcjogIixpKX1yZXR1cm4gbigiW0lkZW50aXR5TW9kdWxlLmdldElkVG9rZW5dIFVzZXIgbm90IGZvdW5kIGZvciBoeXBlcnR5OiAiLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Zy5lcnJvcigiW0lkZW50aXR5TW9kdWxlLmdldElkVG9rZW5dIEVycm9yOiAiLGUpLG4oZSl9KX0pfX0se2tleToiX2dldEFjY2Vzc1Rva2VuIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89ZS50byxpPXZvaWQgMDtpZighZS5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpKXJldHVybiBuKCJbSWRlbnRpdHlNb2R1bGUuX2dldEFjY2Vzc1Rva2VuXSBtaXNzaW5nIG1hbmRhdG9yeSBtc2cgYm9keTogIixlKTtpZighZS5ib2R5Lmhhc093blByb3BlcnR5KCJ2YWx1ZSIpKXJldHVybiBuKCJbSWRlbnRpdHlNb2R1bGUuX2dldEFjY2Vzc1Rva2VuXSBtaXNzaW5nIG1hbmRhdG9yeSBtc2cgYm9keSB2YWx1ZTogIixlKTtpZighZS5ib2R5LnZhbHVlLmhhc093blByb3BlcnR5KCJyZXNvdXJjZXMiKSlyZXR1cm4gbigiW0lkZW50aXR5TW9kdWxlLl9nZXRBY2Nlc3NUb2tlbl0gbWlzc2luZyBtYW5kYXRvcnkgbXNnIGJvZHkgdmFsdWUgcmVzb3VyY2VzOiAiLGUpO3ZhciBzPSgwLGwuZGl2aWRlVVJMKShvKS5kb21haW47by5pbmNsdWRlcygicHJvdG9zdHViIikmJihzPXMucmVwbGFjZShzLnNwbGl0KCIuIilbMF0rIi4iLCIiKSk7dmFyIGE9ZS5ib2R5LnZhbHVlLnJlc291cmNlczt0cnl7aT10LmlkZW50aXRpZXMuZ2V0QWNjZXNzVG9rZW4ocyxhKX1jYXRjaChlKXtyZXR1cm4gbigiW0lkZW50aXR5TW9kdWxlLl9nZXRBY2Nlc3NUb2tlbl0gQWNjZXNzIFRva2VuIGVycm9yICIrZXJyKX1pZihpKXtpZigiaW4tcHJvZ3Jlc3MiPT09aS5zdGF0dXMpcmV0dXJuIHIodC5faW5Qcm9ncmVzc0FjY2Vzc1Rva2VuKHMsYSkpO3ZhciB1PSgwLGwuc2Vjb25kc1NpbmNlRXBvY2gpKCk7aWYoZy5sb2coIltJZGVudGl0eS5JZGVudGl0eU1vZHVsZS5nZXRBY2Nlc3NUb2tlbl0gZm91bmQgIEFjY2VzcyBUb2tlbiAiLGkpLCEodT49aS5leHBpcmVzKSlyZXR1cm4gcihpKTsKLy8gICAgICAgIGlmICh0cnVlKSB7CmlmKCFpLmhhc093blByb3BlcnR5KCJyZWZyZXNoIikpcmV0dXJuIHIodC5fZ2V0TmV3QWNjZXNzVG9rZW4ocyxhKSk7dC5fcmVmcmVzaEFjY2Vzc1Rva2VuKGkpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHIodC5pZGVudGl0aWVzLnVwZGF0ZUFjY2Vzc1Rva2VuKGUpKX0pfWVsc2UgdC5fZ2V0TmV3QWNjZXNzVG9rZW4ocyxhKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBnLmxvZygiW0lkZW50aXR5LklkZW50aXR5TW9kdWxlLmdldEFjY2Vzc1Rva2VuXSBuZXcgQWNjZXNzIFRva2VuICIsZSkscihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe24oIltJZGVudGl0eU1vZHVsZS5fZ2V0QWNjZXNzVG9rZW5dIG9uIGdldE5ld0FjY2Vzc1Rva2VuICIrZSl9KX0pfX0se2tleToiX2luUHJvZ3Jlc3NBY2Nlc3NUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RoaXMuaWRlbnRpdGllcy53YXRjaGluZ1lvdS5vYnNlcnZlKCJhY2Nlc3NUb2tlbnMiLGZ1bmN0aW9uKG4pe2cubG9nKCJbSWRlbnRpdHlNb2R1bGUuX2luUHJvZ3Jlc3NBY2Nlc3NUb2tlbl0gYWNjZXNzVG9rZW5zIGNoYW5nZWQgIityLmlkZW50aXRpZXMuYWNjZXNzVG9rZW5zKTt2YXIgbz1uLmtleXBhdGg7aWYoby5pbmNsdWRlcygic3RhdHVzIikmJihvPW8ucmVwbGFjZSgiLnN0YXR1cyIsIiIpKSxvPT09ZSYmInN0YXR1cyI9PT1uLm5hbWUmJiJjcmVhdGVkIj09PW4ubmV3VmFsdWUpCi8vIGxvZy5sb2coJ1tJZGVudGl0eS5JZGVudGl0eU1vZHVsZS5nZXRUb2tlbl0gdG9rZW4gaXMgY3JlYXRlZCAnICsgX3RoaXMuaWRlbnRpdGllc0xpc3RbZG9tYWluXSk7CnJldHVybiByLmlkZW50aXRpZXMuZ2V0QWNjZXNzVG9rZW4oZSx0KX0pfX0se2tleToiX2dldE5ld0FjY2Vzc1Rva2VuIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXtyLmlkZW50aXRpZXMuc2V0QWNjZXNzVG9rZW5JblByb2dyZXNzKGUpO3ZhciBpPXt0eXBlOiJleGVjdXRlIix0bzpyLl9yZXNvbHZlRG9tYWluKGUpLGZyb206ci5faWRtVVJMLGJvZHk6e21ldGhvZDoiZ2V0QWNjZXNzVG9rZW5BdXRob3Jpc2F0aW9uRW5kcG9pbnQiLHBhcmFtczp0fX07Ci8vbGV0J3MgZmlyc3QgZ2V0IHRoZSBhdXRob3Jpc2F0aW9uIFVSTCBmcm9tIHRoZSBJZHAgUHJveHkKci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpe2lmKGUuYm9keS5jb2RlPjI5OSlyZXR1cm4gbygiW0lkZW50aXR5TW9kdWxlLl9nZXROZXdBY2Nlc3NUb2tlbl0gRXJyb3Igb24gZ2V0QWNjZXNzVG9rZW5BdXRob3Jpc2F0aW9uRW5kcG9pbnQgZnJvbSBJZFAgUHJveHk6ICIsZS5ib2R5LmRlc2MpOwovLyBsZXQncyBhc2sgdGhlIHVzZXIgZm9yIGF1dGhvcmlzYXRpb24Kci5jYWxsSWRlbnRpdHlNb2R1bGVGdW5jKCJvcGVuUG9wdXAiLHt1cmxyZWNlaXZlZDplLmJvZHkudmFsdWV9KS50aGVuKGZ1bmN0aW9uKGUpe2cubG9nKCJbSWRlbnRpdHlNb2R1bGU6Y2FsbElkZW50aXR5TW9kdWxlRnVuYzpvcGVuUG9wdXBdIGF1aHRvcmlzYXRpb24gcmVzdWx0OiAiLGUpLGkuYm9keS5tZXRob2Q9ImdldEFjY2Vzc1Rva2VuIixpLmJvZHkucGFyYW1zPXtyZXNvdXJjZXM6dCxsb2dpbjplfSwKLy93aWh0b3V0IGNhbGxiYWNrIHRvIGF2b2lkIHRpbWVvdXQgZXJyb3JzPwovLyBsZXQncyBhc2sgQWNjZXNzIFRva2VuIGZyb20gdGhlIElkcCBQcm94eQpyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24oZSl7aWYoZS5ib2R5LmNvZGU+Mjk5KXJldHVybiBvKCJbSWRlbnRpdHlNb2R1bGUuX2dldE5ld0FjY2Vzc1Rva2VuXSBFcnJvciBvbiBnZXRBY2Nlc3NUb2tlbiBmcm9tIElkUCBQcm94eTogIixlLmJvZHkuZGVzYyk7ci5pZGVudGl0aWVzLmFkZEFjY2Vzc1Rva2VuKGUuYm9keS52YWx1ZSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gZy5pbmZvKCJbSWRlbnRpdHlNb2R1bGUuX2dldE5ld0FjY2Vzc1Rva2VuXSByZXNvbHZpbmcgdG9rZW46ICIsdCksbihlLmJvZHkudmFsdWUpfSxmdW5jdGlvbihlKXtvKGUpfSl9KX0sZnVuY3Rpb24oZSl7byhlKX0pfSl9KX19LHtrZXk6Il9yZWZyZXNoQWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Ci8vICAgIGxldCBkb21haW4gPSBfdGhpcy5fcmVzb2x2ZURvbWFpbihvbGRJZGVudGl0eS5pZHApOwovLyAgICBsZXQgbWVzc2FnZTsKLy8gICAgbGV0IGFzc2VydGlvbiA9IF90aGlzLmdldElkZW50aXR5KG9sZElkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwpOwpyZXR1cm4gZy5sb2coIklkZW50aXR5TW9kdWxlLl9yZWZyZXNoQWNjZXNzVG9rZW46b3V0ZGF0ZWRUb2tlbiIsZSksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPXQuX3Jlc29sdmVEb21haW4oZS5kb21haW4pLGk9dm9pZCAwO2k9e3R5cGU6ImV4ZWN1dGUiLHRvOm8sZnJvbTp0Ll9pZG1VUkwsYm9keTp7bWV0aG9kOiJyZWZyZXNoQWNjZXNzVG9rZW4iLHBhcmFtczp7dG9rZW46ZX19fTt0cnl7dC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpe3ZhciB0PWUuYm9keS52YWx1ZTtyKHQpfSl9Y2F0Y2goZSl7bigiSW4gSWRlbnRpdHlNb2R1bGUuX3JlZnJlc2hBY2Nlc3NUb2tlbiBvbiBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX19LHtrZXk6InNlbmRSZWZyZXNoTWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy8gICAgbGV0IGRvbWFpbiA9IF90aGlzLl9yZXNvbHZlRG9tYWluKG9sZElkZW50aXR5LmlkcCk7Ci8vICAgIGxldCBtZXNzYWdlOwovLyAgICBsZXQgYXNzZXJ0aW9uID0gX3RoaXMuZ2V0SWRlbnRpdHkob2xkSWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCk7CnJldHVybiBnLmxvZygic2VuZFJlZnJlc2hNZXNzYWdlOm9sZElkZW50aXR5IixlKSxuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89dC5fcmVzb2x2ZURvbWFpbihlLmlkcCksaT12b2lkIDAscz10LmdldElkZW50aXR5KGUudXNlclByb2ZpbGUudXNlclVSTCk7Zy5pbmZvKCJzZW5kUmVmcmVzaE1lc3NhZ2U6b2xkSWRlbnRpdHkiLGUpLGk9e3R5cGU6ImV4ZWN1dGUiLHRvOm8sZnJvbTp0Ll9pZG1VUkwsYm9keTp7cmVzb3VyY2U6ImlkZW50aXR5IixtZXRob2Q6InJlZnJlc2hBc3NlcnRpb24iLHBhcmFtczp7aWRlbnRpdHk6c319fTt0cnl7dC5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKGUpe3ZhciB0PWUuYm9keS52YWx1ZTtyKHQpfSl9Y2F0Y2goZSl7bigiSW4gc2VuZFJlZnJlc2hNZXNzYWdlIG9uIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfX0se2tleToiZ2V0QWNjZXNzVG9rZW4iLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtnLmxvZygiW2dldEFjY2Vzc1Rva2VuOmlkcERvbWFpbl0iLGUpO3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXt2YXIgcz1uLl9yZXNvbHZlRG9tYWluKGUpLGE9dm9pZCAwO2E9e3R5cGU6ImV4ZWN1dGUiLHRvOnMsZnJvbTpuLl9pZG1VUkwsYm9keTp7cmVzb3VyY2U6ImlkZW50aXR5IixtZXRob2Q6ImdldEFjY2Vzc1Rva2VuIixwYXJhbXM6e3Jlc291cmNlczp0LGxvZ2luOnJ9fX07dHJ5e24uX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihlKXt2YXIgdD1lLmJvZHkudmFsdWU7byh0KX0pfWNhdGNoKGUpe2koIklkZW50aXR5TW9kdWxlLkluIGdldEFjY2Vzc1Rva2VuOiAiK2UpfX0pfX0se2tleToiZ2V0QWNjZXNzVG9rZW5BdXRob3Jpc2F0aW9uRW5kcG9pbnQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7Zy5sb2coIltnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludDppZHBEb21haW5dIix0KTt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dmFyIGk9ci5fcmVzb2x2ZURvbWFpbih0KSxzPXZvaWQgMDtzPXt0eXBlOiJleGVjdXRlIix0bzppLGZyb206ci5faWRtVVJMLGJvZHk6e3Jlc291cmNlOiJpZGVudGl0eSIsbWV0aG9kOiJnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludCIscGFyYW1zOntyZXNvdXJjZXM6ZX19fTt0cnl7ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKGUpe3ZhciB0PWUuYm9keS52YWx1ZTtuKHQpfSl9Y2F0Y2goZSl7bygiSW4gZ2V0QWNjZXNzVG9rZW5BdXRob3Jpc2F0aW9uRW5kcG9pbnQ6ICIrZSl9fSl9fSx7a2V5OiJzZW5kR2VuZXJhdGVNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtnLmxvZygiW3NlbmRHZW5lcmF0ZU1lc3NhZ2U6Y29udGVudHNdIixlKSxnLmxvZygiW3NlbmRHZW5lcmF0ZU1lc3NhZ2U6b3JpZ2luXSIsdCksZy5sb2coIltzZW5kR2VuZXJhdGVNZXNzYWdlOnVzZXJuYW1lSGludF0iLHIpLGcubG9nKCJbc2VuZEdlbmVyYXRlTWVzc2FnZTppZHBEb21haW5dIixuKSxnLmxvZygic2VuZEdlbmVyYXRlTWVzc2FnZV9oaW50Iik7dmFyIGk9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLHMpe3ZhciBhPWkuX3Jlc29sdmVEb21haW4obiksdT12b2lkIDA7dT17dHlwZToiZXhlY3V0ZSIsdG86YSxmcm9tOmkuX2lkbVVSTCxib2R5OntyZXNvdXJjZToiaWRlbnRpdHkiLG1ldGhvZDoiZ2VuZXJhdGVBc3NlcnRpb24iLHBhcmFtczp7Y29udGVudHM6ZSxvcmlnaW46dCx1c2VybmFtZUhpbnQ6cn19fTt0cnl7aS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh1LGZ1bmN0aW9uKGUpe3ZhciB0PWUuYm9keS52YWx1ZTtvKHQpfSl9Y2F0Y2goZSl7cygiSW4gc2VuZEdlbmVyYXRlTWVzc2FnZTogIitlKX19KX19LHtrZXk6ImdlbmVyYXRlQXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtnLmxvZygiW2dlbmVyYXRlQXNzZXJ0aW9uOmNvbnRlbnRzXSIsZSksZy5sb2coIltnZW5lcmF0ZUFzc2VydGlvbjpvcmlnaW5dIix0KSxnLmxvZygiW2dlbmVyYXRlQXNzZXJ0aW9uOnVzZXJuYW1lSGludF0iLHIpLAovLyAgICBsb2cubG9nKCdbZ2VuZXJhdGVBc3NlcnRpb246a2V5UGFpcl0nLCBrZXlQYWlyKTsKZy5sb2coIltnZW5lcmF0ZUFzc2VydGlvbjppZHBEb21haW5dIixuKTt2YXIgaT10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG8scyl7Zy5sb2coIltJZGVudGl0eU1vZHVsZTpzZW5kR2VuZXJhdGVNZXNzYWdlOnNlbmRHZW5lcmF0ZU1lc3NhZ2VdIixyKSxpLnNlbmRHZW5lcmF0ZU1lc3NhZ2UoZSx0LHIsbikudGhlbihmdW5jdGlvbihlKXtlLmxvZ2luVXJsP2kuY2FsbElkZW50aXR5TW9kdWxlRnVuYygib3BlblBvcHVwIix7dXJscmVjZWl2ZWQ6ZS5sb2dpblVybH0pLnRoZW4oZnVuY3Rpb24oZSl7Zy5sb2coIltJZGVudGl0eU1vZHVsZTpjYWxsSWRlbnRpdHlNb2R1bGVGdW5jOm9wZW5Qb3B1cF0iLHIpLG8oZSl9LGZ1bmN0aW9uKGUpe3MoZSl9KTplP2kuaWRlbnRpdGllcy5hZGRBc3NlcnRpb24oZSkudGhlbihmdW5jdGlvbih0KXtvKGUpfSxmdW5jdGlvbihlKXtzKGUpfSk6cygiZXJyb3Igb24gb2J0YWluaW5nIGlkZW50aXR5IGluZm9ybWF0aW9uIil9KS5jYXRjaChmdW5jdGlvbihlKXtzKCJPbiBnZW5lcmF0ZUFzc2VydGlvbiBmcm9tIG1ldGhvZCBzZW5kR2VuZXJhdGVNZXNzYWdlIGVycm9yOiAiK2UpfSl9KX19LHtrZXk6InZhbGlkYXRlQXNzZXJ0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQscil7Zy5sb2coIlt2YWxpZGF0ZUFzc2VydGlvbjphc3NlcnRpb25dIixlKSxnLmxvZygiW3ZhbGlkYXRlQXNzZXJ0aW9uOm9yaWdpbl0iLHQpLGcubG9nKCJbdmFsaWRhdGVBc3NlcnRpb246aWRwRG9tYWluXSIscik7dmFyIG49dGhpcyxpPW4uX3Jlc29sdmVEb21haW4ocikscz17dHlwZToiZXhlY3V0ZSIsdG86aSxmcm9tOm4uX2lkbVVSTCxib2R5OntyZXNvdXJjZToiaWRlbnRpdHkiLG1ldGhvZDoidmFsaWRhdGVBc3NlcnRpb24iLHBhcmFtczp7YXNzZXJ0aW9uOmUsb3JpZ2luOnR9fX07cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXt0cnl7bi5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKHIpezIwMD09PXIuYm9keS5jb2RlP2Uoci5ib2R5LnZhbHVlKTp0KCJlcnJvciIsci5ib2R5LmNvZGUpfSl9Y2F0Y2goZSl7dCgiT24gdmFsaWRhdGVBc3NlcnRpb24gZnJvbSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fSx7a2V5OiJhZGRHVUlMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKGUuX2lkbVVSTCxmdW5jdGlvbih0KXt2YXIgcj10LmJvZHkubWV0aG9kO2cubG9nKCJbSWRlbnRpdHlNb2R1bGU6YWRkR1VJTGlzdGVuZXJzXSIsdCx0LmJvZHkscik7dmFyIG49dm9pZCAwO2lmKCJkZXBsb3lHVUkiPT09ciluPWUuZGVwbG95R1VJKCk7ZWxzZXtpZigiZ2V0SWRlbnRpdGllc1RvQ2hvb3NlIj09PXIpcmV0dXJuIHZvaWQgZS5nZXRJZGVudGl0aWVzVG9DaG9vc2UoKS50aGVuKGZ1bmN0aW9uKHIpewovLyBpZiB0aGUgZnVuY3Rpb24gcmVxdWVzdGVkIGlzIG5vdCBhIHByb21pc2UKdmFyIG49e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOnIsY29kZToyMDB9LG89e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpufTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvKX1jYXRjaChlKXtnLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzdG9yZUlkZW50aXR5IG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KTtpZigidW5yZWdpc3RlcklkZW50aXR5Ij09PXIpe3ZhciBvPXQuYm9keS5wYXJhbXMuZW1haWw7bj1lLnVucmVnaXN0ZXJJZGVudGl0eShvKX1lbHNle2lmKCJnZXRNeVB1YmxpY0tleSI9PT1yKQovLyBiZWNhdXNlIGdlbmVyYXRlUlNBS2V5UGFpciBpcyBhIHByb21pc2UKLy8gd2UgaGF2ZSB0byBzZW5kIHRoZSBtZXNzYWdlIG9ubHkgYWZ0ZXIgZ2V0dGluZyB0aGUga2V5IHBhaXIKcmV0dXJuIHZvaWQgZS5fY3J5cHRvLmdldE15UHVibGljS2V5KCkudGhlbihmdW5jdGlvbihyKXtyPSgwLGwuc3RyaW5naWZ5KShyKTt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0sbz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfWNhdGNoKGUpe2cuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIGdlbmVyYXRlUlNBS2V5UGFpciBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSk7aWYoInNlbmRHZW5lcmF0ZU1lc3NhZ2UiPT09cil7dmFyIGk9dC5ib2R5LnBhcmFtcy5jb250ZW50cyxzPXQuYm9keS5wYXJhbXMub3JpZ2luLGE9dC5ib2R5LnBhcmFtcy51c2VybmFtZUhpbnQsdT10LmJvZHkucGFyYW1zLmlkcERvbWFpbjtyZXR1cm4gdm9pZCBlLnNlbmRHZW5lcmF0ZU1lc3NhZ2UoaSxzLGEsdSkudGhlbihmdW5jdGlvbihyKXt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0sbz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfWNhdGNoKGUpe2cuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIHNlbmRHZW5lcmF0ZU1lc3NhZ2UgbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfWlmKCJnZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludCI9PT1yKXt2YXIgYz10LmJvZHkucGFyYW1zLnNjb3BlLGY9dC5ib2R5LnBhcmFtcy5pZHBEb21haW47cmV0dXJuIHZvaWQgZS5nZXRBY2Nlc3NUb2tlbkF1dGhvcmlzYXRpb25FbmRwb2ludChjLGYpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOnIsY29kZToyMDB9LG89e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpufTt0cnl7ZS5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShvKX1jYXRjaChlKXtnLmVycm9yKCJPbiBhZGRHVUlMaXN0ZW5lcnMgZnJvbSBpZiBzZW5kR2VuZXJhdGVNZXNzYWdlIG1ldGhvZCBwb3N0TWVzc2FnZSBlcnJvcjogIitlKX19KX1pZigiYWRkQWNjZXNzVG9rZW4iPT09cil7dmFyIGQ9dC5ib2R5LnBhcmFtcztyZXR1cm4gdm9pZCBlLmlkZW50aXRpZXMuYWRkQWNjZXNzVG9rZW4oZCkudGhlbihmdW5jdGlvbihyKXt2YXIgbj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6cixjb2RlOjIwMH0sbz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5Om59O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfWNhdGNoKGUpe2cuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIHN0b3JlSWRlbnRpdHkgbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfWlmKCJnZXRBY2Nlc3NUb2tlbiI9PT1yKXt2YXIgcD10LmJvZHkucGFyYW1zLmlkcERvbWFpbix5PXQuYm9keS5wYXJhbXMucmVzb3VyY2VzLGg9dC5ib2R5LnBhcmFtcy5sb2dpbjtyZXR1cm4gdm9pZCBlLmdldEFjY2Vzc1Rva2VuKHAseSxoKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpyLGNvZGU6MjAwfSxvPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bn07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobyl9Y2F0Y2goZSl7Zy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc2VuZEdlbmVyYXRlTWVzc2FnZSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9aWYoImFkZEFzc2VydGlvbiI9PT1yKXt2YXIgdj10LmJvZHkucGFyYW1zOwovLyAgICAgICAgbGV0IGtleVBhaXIgPSBtc2cuYm9keS5wYXJhbXMua2V5UGFpcjsKcmV0dXJuIHZvaWQgZS5pZGVudGl0aWVzLmFkZEFzc2VydGlvbih2KS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBuPXt0eXBlOiJleGVjdXRlIix2YWx1ZTpyLGNvZGU6MjAwfSxvPXtpZDp0LmlkLHR5cGU6InJlc3BvbnNlIix0bzp0LmZyb20sZnJvbTp0LnRvLGJvZHk6bn07dHJ5e2UuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uobyl9Y2F0Y2goZSl7Zy5lcnJvcigiT24gYWRkR1VJTGlzdGVuZXJzIGZyb20gaWYgc3RvcmVJZGVudGl0eSBtZXRob2QgcG9zdE1lc3NhZ2UgZXJyb3I6ICIrZSl9fSl9fX0vKmVsc2UgaWYgKGZ1bmNOYW1lID09PSAnc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5JykgewogICAgICAgICAgbGV0IG9yaWdpbiA9IG1zZy5ib2R5LnBhcmFtcy5vcmlnaW47CiAgICAgICAgICBsZXQgaWRwID0gbXNnLmJvZHkucGFyYW1zLmlkcDsKICAgICAgICAgIGxldCBpZEhpbnQgPSBtc2cuYm9keS5wYXJhbXMuaWRIaW50OwogICAgICAgICAgX3RoaXMuc2VsZWN0SWRlbnRpdHlGb3JIeXBlcnR5KG9yaWdpbiwgaWRwLCBpZEhpbnQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSovCi8vIGlmIHRoZSBmdW5jdGlvbiByZXF1ZXN0ZWQgaXMgbm90IGEgcHJvbWlzZQp2YXIgYj17dHlwZToiZXhlY3V0ZSIsdmFsdWU6bixjb2RlOjIwMH0sXz17aWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsdG86dC5mcm9tLGZyb206dC50byxib2R5OmJ9O3RyeXtlLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKF8pfWNhdGNoKGUpe2cuZXJyb3IoIk9uIGFkZEdVSUxpc3RlbmVycyBmcm9tIGlmIHN0b3JlSWRlbnRpdHkgbWV0aG9kIHBvc3RNZXNzYWdlIGVycm9yOiAiK2UpfX0pfX0se2tleToiZGVwbG95R1VJIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ3VpRGVwbG95ZWQ9ITB9fSx7a2V5OiJfZ2V0VmFsaWRUb2tlbiIsdmFsdWU6ZnVuY3Rpb24oZSl7Zy5sb2coIltJZGVudGl0eU1vZHVsZS5fZ2V0VmFsaWRUb2tlbl06aHlwZXJ0eVVSTCIsZSk7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuZ2V0SWRUb2tlbihlKS50aGVuKGZ1bmN0aW9uKGUpe2cubG9nKCJbSWRlbnRpdHlNb2R1bGUuX2dldFZhbGlkVG9rZW5dIHJldHJpZXZlZCBJZEFzc2VydGlvbiIsZSk7dmFyIG89KDAsbC5zZWNvbmRzU2luY2VFcG9jaCkoKTtpZighZS5oYXNPd25Qcm9wZXJ0eSgiZXhwaXJlcyIpKXJldHVybiByKGUpO3ZhciBpPWUuZXhwaXJlczsvKiBpZiAoY29tcGxldGVJZC5oYXNPd25Qcm9wZXJ0eSgnaW5mbycpKSB7CiAgICAgICAgICAgIGlmIChjb21wbGV0ZUlkLmluZm8uaGFzT3duUHJvcGVydHkoJ2V4cGlyZXMnKSkgewogICAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlID0gY29tcGxldGVJZC5pbmZvLmV4cGlyZXM7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcGxldGVJZC5pbmZvLmhhc093blByb3BlcnR5KCd0b2tlbklESlNPTicpKSB7CiAgICAgICAgICAgICAgZXhwaXJhdGlvbkRhdGUgPSBjb21wbGV0ZUlkLmluZm8udG9rZW5JREpTT04uZXhwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIHRocm93ICdUaGUgSUQgVG9rZW4gZG9lcyBub3QgaGF2ZSBhbiBleHBpcmF0aW9uIHRpbWUnOwogICAgICAgICAgICAgIGxvZy5pbmZvKCdUaGUgSUQgVG9rZW4gZG9lcyBub3QgaGF2ZSBhbiBleHBpcmF0aW9uIHRpbWUnKTsKICAgICAgICAgICAgICByZXNvbHZlKGFzc2VydGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoY29tcGxldGVJZC5oYXNPd25Qcm9wZXJ0eSgnaW5mb1Rva2VuJykgJiYgY29tcGxldGVJZC5pbmZvVG9rZW4uaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7CiAgICAgICAgICAgIGV4cGlyYXRpb25EYXRlID0gY29tcGxldGVJZC5pbmZvVG9rZW4uZXhwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdGhyb3cgJ1RoZSBJRCBUb2tlbiBkb2VzIG5vdCBoYXZlIGFuIGV4cGlyYXRpb24gdGltZSc7CiAgICAgICAgICAgIGxvZy5pbmZvKCdUaGUgSUQgVG9rZW4gZG9lcyBub3QgaGF2ZSBhbiBleHBpcmF0aW9uIHRpbWUnKTsKICAgICAgICAgICAgcmVzb2x2ZShhc3NlcnRpb24pOwogICAgICAgICAgfSovCmcubG9nKCJbSWRlbnRpdHkuSWRlbnRpdHlNb2R1bGUuZ2V0VmFsaWRUb2tlbl0gVG9rZW4gZXhwaXJlcyBpbiIsaSksZy5sb2coIltJZGVudGl0eS5JZGVudGl0eU1vZHVsZS5nZXRWYWxpZFRva2VuXSB0aW1lIG5vdzoiLG8pLG8+PWk/ZS5oYXNPd25Qcm9wZXJ0eSgicmVmcmVzaCIpP3Quc2VuZFJlZnJlc2hNZXNzYWdlKGUpLnRoZW4oZnVuY3Rpb24oZSl7dC5pZGVudGl0aWVzLnVwZGF0ZUFzc2VydGlvbihlKS50aGVuKGZ1bmN0aW9uKCl7cihlKX0sZnVuY3Rpb24oZSl7Zy5lcnJvcigiW0lkZW50aXR5TW9kdWxlLmdldFZhbGlkVG9rZW5dIGVycm9yIHVwZGF0aW5nIHRoZSBhc3NlcnRpb24gIixlKSxuKGUpfSl9LGZ1bmN0aW9uKGUpe2cuZXJyb3IoIltJZGVudGl0eU1vZHVsZS5nZXRWYWxpZFRva2VuXSBlcnJvciByZWZyZXNoaW5nIHRoZSBhc3NlcnRpb24gIixlKSxuKGUpfSk6Ci8vIG5vIHJlZnJlc2ggdG9rZW4gYXZhaWxhYmxlLCB1c2VyIGhhcyB0byBhdXRoZW50aWNhdGUgYWdhaW4gdG8gZ2V0IGEgbmV3IGFzc2VydGlvbgovLyBnZW5lcmF0ZSBuZXcgaWRUb2tlbgp0LmNhbGxHZW5lcmF0ZU1ldGhvZHMoZS5pZHAuZG9tYWluKS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKCJbSWRlbnRpdHlNb2R1bGUuZ2V0VmFsaWRUb2tlbl0gZXJyb3Igd2hlbiBnZW5lcmF0aW5nIGEgbmV3IGFzc2VydGlvbiAiK2UpfSk6cihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2cuZXJyb3IoIltJZGVudGl0eU1vZHVsZS5nZXRWYWxpZFRva2VuXSBlcnJvciBvbiBnZXRJZFRva2VuIixlKSxuKGUpfSl9KX19LHtrZXk6Il9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3QiLHZhbHVlOmZ1bmN0aW9uKGUpe2cuaW5mbygiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdDpkYXRhT2JqZWN0VVJMIixlKTt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89KDAsbC5kaXZpZGVVUkwpKGUpLGk9by5kb21haW4scz0oMCxsLnBhcnNlTWVzc2FnZVVSTCkoZSksYT10LnJlZ2lzdHJ5LmdldFJlcG9ydGVyVVJMU3luY2hvbm91cyhzKTtpZihnLmluZm8oIl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3Q6cmVwb3J0ZXJVUkwiLGEpLGEpcihhKTtlbHNlewovLyBjaGVjayBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGFzc29jaWF0aW9uIGZyb20gYW4gaHlwZXJ0eVVSTCB0byB0aGUgZGF0YU9iamVjdAp2YXIgdT10LmRhdGFPYmplY3RzSWRlbnRpdHlbc107aWYoZy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OnN0b3JlZFJlcG9ydGVyVVJMIix1KSx1KXIodSk7ZWxzZXsKLy8gY2hlY2sgaWYgdGhlcmUgaXMgYW55IGh5cGVydHkgdGhhdCBzdWJzY3JpYmVkIHRoZSBkYXRhT2JqZWN0VVJMCnZhciBjPXQucmVnaXN0cnkuZ2V0RGF0YU9iamVjdFN1YnNjcmliZXJIeXBlcnR5KGUpO2cuaW5mbygiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdDpzdWJzY3JpYmVySHlwZXJ0eSIsYyksYz9yKGMpOgovLyBzZWFyY2ggaW4gZG9tYWluIHJlZ2lzdHJ5IGZvciB0aGUgaHlwZXJ0eSBhc3NvY2lhdGVkIHRvIHRoZSBkYXRhT2JqZWN0Ci8vIHNlYXJjaCBpbiBjYXNlIGlzIGEgc3Vic2NyaWJlciB3aG8gd2FudHMgdG8ga25vdyB0aGUgcmVwb3J0ZXIKLy8gVG8gYmUgcmV2aWV3ZWQgaW4gb3JkZXIgdG8gYXZvaWQgdGhlIGRpc2NvdmVyeSB0cmFuc2FjdGlvbgp0Ll9jb3JlRGlzY292ZXJ5LmRpc2NvdmVyRGF0YU9iamVjdFBlclVSTChzLGkpLnRoZW4oZnVuY3Rpb24oZSl7Zy5pbmZvKCJfZ2V0SHlwZXJ0eUZyb21EYXRhT2JqZWN0OmRhdGFPYmplY3QiLGUpLHQuZGF0YU9iamVjdHNJZGVudGl0eVtzXT1lLnJlcG9ydGVyLGcuaW5mbygiX2dldEh5cGVydHlGcm9tRGF0YU9iamVjdDpkYXRhT2JqZWN0LnJlcG9ydGVyIixlLnJlcG9ydGVyKSxyKGUucmVwb3J0ZXIpfSxmdW5jdGlvbihlKXtuKGUpfSl9fX0pfX0se2tleToiX3Jlc29sdmVEb21haW4iLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPyJkb21haW4taWRwOi8vIitlOiJkb21haW4taWRwOi8vZ29vZ2xlLmNvbSJ9fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUJ1c30sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fbWVzc2FnZUJ1cz1lLHQuYWRkR1VJTGlzdGVuZXJzKCl9fSx7a2V5OiJjb3JlRGlzY292ZXJ5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZURpc2NvdmVyeX0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2NvcmVEaXNjb3Zlcnk9ZX19LHtrZXk6InJlZ2lzdHJ5IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVnaXN0cnl9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9yZWdpc3RyeT1lfX0se2tleToiaWRlbnRpdGllcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkZW50aXRpZXN9LHNldDpmdW5jdGlvbihlKXt0aGlzLl9pZGVudGl0aWVzPWV9fSx7a2V5OiJpZHBzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGlzdE9mSWRwc319XSksSWRlbnRpdHlNb2R1bGV9KCk7dC5kZWZhdWx0PWIsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDczICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtlLmV4cG9ydHM9e2RlZmF1bHQ6cig0NzQpLF9fZXNNb2R1bGU6ITB9fSwvKiA0NzQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpe3IoNDc1KSxlLmV4cG9ydHM9cigxMykuTnVtYmVyLmlzSW50ZWdlcn0sLyogNDc1ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMjAuMS4yLjMgTnVtYmVyLmlzSW50ZWdlcihudW1iZXIpCnZhciBuPXIoMjEpO24obi5TLCJOdW1iZXIiLHtpc0ludGVnZXI6cig0NzYpfSl9LC8qIDQ3NiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIDIwLjEuMi4zIE51bWJlci5pc0ludGVnZXIobnVtYmVyKQp2YXIgbj1yKDQxKSxvPU1hdGguZmxvb3I7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiFuKGUpJiZpc0Zpbml0ZShlKSYmbyhlKT09PWV9fSwvKiA0NzcgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigxKSxvPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0obiksaT1yKDcpLHM9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShpKSxhPXMuZ2V0TG9nZ2VyKCJJZGVudGl0eU1vZHVsZSIpLHU9ZnVuY3Rpb24gR3VpRmFrZShlLHQpeygwLG8uZGVmYXVsdCkodGhpcyxHdWlGYWtlKSxhLmxvZygiRmFrZUdVSV9kZXBsb3llZCIpO3ZhciByPXRoaXM7ci5fdXJsPWUsci5fd2FpdFRpbWU9MWU0LHIuX21lc3NhZ2VCdXM9dCxyLl9tZXNzYWdlQnVzLmFkZExpc3RlbmVyKHIuX3VybCxmdW5jdGlvbihlKXtpZihlLmhhc093blByb3BlcnR5KCJ0eXBlIikmJiJjcmVhdGUiPT09ZS50eXBlJiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInZhbHVlIikmJmUuYm9keS52YWx1ZS5oYXNPd25Qcm9wZXJ0eSgiaWRlbnRpdGllcyIpJiZlLmJvZHkudmFsdWUuaGFzT3duUHJvcGVydHkoImlkcHMiKSl7dmFyIHQ9ZS5ib2R5LnZhbHVlLmlkZW50aXRpZXMsbj1lLmJvZHkudmFsdWUuaWRwcyxvPXZvaWQgMDtvPXZvaWQgMCE9PXRbMF0/e3R5cGU6ImlkZW50aXR5Iix2YWx1ZTp0WzBdLGNvZGU6MjAwfTp7dHlwZToiaWRwIix2YWx1ZTpuWzFdLmRvbWFpbixjb2RlOjIwMH07dmFyIGk9e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLHRvOmUuZnJvbSxmcm9tOmUudG8sYm9keTpvfTsKLy8gdG8gdGVzdCBvbiB0aGUgaWRlbnRpdHkgc2lkZSB0aGUgbGlzdGVuZXIgd2l0aG91dCB0aGUgdGltZW91dAovLyBjYW4gcmVwcmVzZW50IHRoZSB0aW1lIHRoZSB1c2VyIHRha2VzIHRvIGNob29zZSBhbmQgaWRlbnRpdHkKIndhaXQiPT09ZS5ib2R5LnZhbHVlP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyLl9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGkpfSxyLl93YWl0VGltZSk6ci5fbWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpKX1lbHNlIGEubG9nKCJJZ25vcmluZyBtZXNzYWdlcyBub3QgaW50ZW5kZWQgdG8gRmFrZUdVSS4iLGUpfSl9O3QuZGVmYXVsdD11LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ3OCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDcpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxsPXIoMjA1KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1mLmdldExvZ2dlcigiSWRlbnRpdHlNYW5hZ2VyIikseT1mdW5jdGlvbigpe2Z1bmN0aW9uIElkZW50aXR5TWFuYWdlcihlKXsoMCxzLmRlZmF1bHQpKHRoaXMsSWRlbnRpdHlNYW5hZ2VyKSx0aGlzLl9pZG09ZX1yZXR1cm4oMCx1LmRlZmF1bHQpKElkZW50aXR5TWFuYWdlcixbe2tleToicmVzZXQiLHZhbHVlOmZ1bmN0aW9uKCl7Ci8vIHRoaXMuX2lkbS5pZGVudGl0aWVzLnJlc2V0KCk7CnRoaXMuX2lkbS5pZGVudGl0aWVzPW5ldyBkLmRlZmF1bHQodGhpcy5faWRtLmlkZW50aXRpZXMuX3R5cGUsdGhpcy5faWRtLmlkZW50aXRpZXMuX3N0b3JhZ2VNYW5hZ2VyKX19LHtrZXk6Il9pc1RvU2V0SUQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PVsiZG9tYWluLWlkcCIsInJ1bnRpbWUiLCJkb21haW4iXSxyPWUuZnJvbTtpZihlLmJvZHkmJmUuYm9keS5oYXNPd25Qcm9wZXJ0eSgic291cmNlIikmJihyPWUuYm9keS5zb3VyY2UpLGUuYm9keSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJzdWJzY3JpYmVyIikmJihyPWUuYm9keS5zdWJzY3JpYmVyKSwiZm9yd2FyZCI9PT1lLnR5cGUpcmV0dXJuITE7Ci8vIFNpZ25hbGxpbmcgTWVzc2FnZXMgYmV0d2VlbiBQMlAgU3R1YnMgZG9uJ3QgaGF2ZSBJZGVudGl0aWVzLiBGRlMKaWYoci5pbmNsdWRlcygiL3AycHJlcXVlc3Rlci8iKXx8ci5pbmNsdWRlcygiL3AycGhhbmRsZXIvIikpcmV0dXJuITE7dmFyIG49ci5zcGxpdCgiOi8vIiksbz1uWzBdO3JldHVybi0xPT09dC5pbmRleE9mKG8pfX0se2tleToicHJvY2Vzc01lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHAubG9nKCJbSWRlbnRpdHlNYW5hZ2VyLnByb2Nlc3NNZXNzYWdlXSAiLGUpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXsKLy8gc2tpcCBtZXNzYWdlcyB0aGF0IGRvbid0IG5lZWQgaWRlbnRpdHkgdG9rZW5zIGluIHRoZSBib2R5CmlmKCF0Ll9pc1RvU2V0SUQoZSkpcmV0dXJuIHIoZSk7LyogICAgICBsZXQgZnJvbSA9IG1lc3NhZ2UuZnJvbTsKICAgICAgICBsZXQgc291cmNlVVJMID0gdW5kZWZpbmVkOwogICAgICAgIGlmICggbWVzc2FnZS5oYXNPd25Qcm9wZXJ0eSgnYm9keScpICYmIG1lc3NhZ2UuYm9keS5oYXNPd25Qcm9wZXJ0eSgnc291cmNlJykpIHsKICAgICAgICAgIGZyb20gPSBtZXNzYWdlLmJvZHkuc291cmNlOwogICAgICAgIH0KICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ2ZvcndhcmQnKSB7CiAgICAgICAgICBmcm9tID0gbWVzc2FnZS5ib2R5LmZyb207CiAgICAgICAgfQogICAgICAgICBpZiAobWVzc2FnZS5oYXNPd25Qcm9wZXJ0eSgnYm9keScpICYmIG1lc3NhZ2UuYm9keS5oYXNPd25Qcm9wZXJ0eSgnc3Vic2NyaWJlcicpKSB7CiAgICAgICAgICBmcm9tID0gbWVzc2FnZS5ib2R5LnN1YnNjcmliZXI7CiAgICAgICAgfSovCnQuX2lkbS5nZXRUb2tlbihlKS50aGVuKGZ1bmN0aW9uKHQpe2UuaGFzT3duUHJvcGVydHkoImJvZHkiKXx8KGUuYm9keT17fSksZS5ib2R5LmlkZW50aXR5PXQscihlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3AuZXJyb3IoZSksbihlKX0pfSl9fV0pLElkZW50aXR5TWFuYWdlcn0oKTt0LmRlZmF1bHQ9eSxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0NzkgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cig3KSxmPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYyksbD1yKDQ4MCksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig0ODEpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoNDgyKSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz0ocigxNCksZi5nZXRMb2dnZXIoIlBFUCIpLGZ1bmN0aW9uKCl7LyoqCiAgKiBDcmVhdGVzIGEgUG9saWN5IEVuZm9yY2VtZW50IFBvaW50IChQRVApIGluc3RhbmNlCiAgKiBAcGFyYW0gICAge09iamVjdH0gICAgY29udGV4dAogICovCmZ1bmN0aW9uIFBFUChlKXsoMCxzLmRlZmF1bHQpKHRoaXMsUEVQKTt2YXIgdD10aGlzO3QucGRwPW5ldyB5LmRlZmF1bHQoZSksdC5hY3Rpb25zU2VydmljZT1uZXcgZC5kZWZhdWx0KGUpLHQuY29udGV4dD1lLGUucGVwPXQsCi8vVE9ETyBzaG91bGQgYmUgYWRkZWQgYSB0cmlnZ2VyIHRvIHZlcmlmeSB3aGVuIHRoZSBsb2FkQ29uZmlndXJhdGlvbnMgaXMgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZAplLmxvYWRDb25maWd1cmF0aW9ucygpfS8qKgogICogcmV0dXJuIHRoZSBtZXNzYWdlQnVzIGluIHRoaXMgUmVnaXN0cnkKICAqIEBwYXJhbSB7TWVzc2FnZUJ1c30gICAgICAgICAgIG1lc3NhZ2VCdXMKICAqLwpyZXR1cm4oMCx1LmRlZmF1bHQpKFBFUCxbe2tleToiYWRkR1VJTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5jb250ZXh0Lm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoZS5jb250ZXh0LnBlcFVSTCxmdW5jdGlvbih0KXt2YXIgcj10LmJvZHkubWV0aG9kLG49dm9pZCAwO2lmKCJhZGRUb0dyb3VwIj09PXIpe3ZhciBvPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lLGk9dC5ib2R5LnBhcmFtcy51c2VyRW1haWw7bj1lLmNvbnRleHQuYWRkVG9Hcm91cChvLGkpfWVsc2UgaWYoImNyZWF0ZUdyb3VwIj09PXIpe3ZhciBzPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lO249ZS5jb250ZXh0LmNyZWF0ZUdyb3VwKHMpfWVsc2UgaWYoImFkZFBvbGljeSI9PT1yKXt2YXIgYT10LmJvZHkucGFyYW1zLnNvdXJjZSx1PXQuYm9keS5wYXJhbXMua2V5LGM9dC5ib2R5LnBhcmFtcy5wb2xpY3ksZj10LmJvZHkucGFyYW1zLmNvbWJpbmluZ0FsZ29yaXRobTtuPWUuYWRkUG9saWN5KGEsdSxjLGYpfWVsc2UgaWYoImRlbGV0ZUdyb3VwIj09PXIpe3ZhciBsPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lO249ZS5jb250ZXh0LmRlbGV0ZUdyb3VwKGwpfWVsc2UgaWYoInJlbW92ZVBvbGljeSI9PT1yKXt2YXIgZD10LmJvZHkucGFyYW1zLnNvdXJjZSxwPXQuYm9keS5wYXJhbXMua2V5O249ZS5yZW1vdmVQb2xpY3koZCxwKX1lbHNlIGlmKCJzYXZlUG9saWNpZXMiPT09cil7dmFyIHk9dC5ib2R5LnBhcmFtcy5zb3VyY2U7bj1lLmNvbnRleHQuc2F2ZVBvbGljaWVzKHkpfWVsc2UgaWYoInVzZXJQb2xpY2llcyI9PT1yKW49ZS5jb250ZXh0LnVzZXJQb2xpY2llcztlbHNlIGlmKCJhY3RpdmVVc2VyUG9saWN5Ij09PXIpe3ZhciBoPXQuYm9keS5wYXJhbXMudXNlclBvbGljeTtoJiYoZS5jb250ZXh0LmFjdGl2ZVVzZXJQb2xpY3k9aCksbj1lLmNvbnRleHQuYWN0aXZlVXNlclBvbGljeX1lbHNlIGlmKCJ1c2VyUG9saWN5Ij09PXIpe3ZhciB2PXQuYm9keS5wYXJhbXMua2V5O249ZS5jb250ZXh0LnVzZXJQb2xpY2llc1t2XX1lbHNlInNhdmVBY3RpdmVQb2xpY3kiPT09cj9uPWUuY29udGV4dC5zYXZlQWN0aXZlUG9saWN5KCk6ImdldE15RW1haWxzIj09PXI/bj1lLmNvbnRleHQuZ2V0TXlFbWFpbHMoKToiZ2V0TXlIeXBlcnRpZXMiPT09cj9uPWUuY29udGV4dC5nZXRNeUh5cGVydGllcygpOiJncm91cHMiPT09cj9uPWUuY29udGV4dC5ncm91cHM6ImdldEdyb3Vwc05hbWVzIj09PXImJihuPWUuY29udGV4dC5nZXRHcm91cHNOYW1lcygpKTtpZigicmVtb3ZlRnJvbUdyb3VwIj09PXIpe3ZhciBnPXQuYm9keS5wYXJhbXMuZ3JvdXBOYW1lLGI9dC5ib2R5LnBhcmFtcy51c2VyRW1haWw7bj1lLmNvbnRleHQucmVtb3ZlRnJvbUdyb3VwKGcsYil9dmFyIF89e3R5cGU6ImV4ZWN1dGUiLHZhbHVlOm4sY29kZToyMDB9LG09e2lkOnQuaWQsdHlwZToicmVzcG9uc2UiLHRvOnQuZnJvbSxmcm9tOnQudG8sYm9keTpffTtlLmNvbnRleHQubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtKX0pfX0se2tleToiYWRkUG9saWN5Iix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoInNvdXJjZSBpcyBub3QgZGVmaW5lZCIpO2lmKCF0KXRocm93IG5ldyBFcnJvcigia2V5IGlzIG5vdCBkZWZpbmVkIik7c3dpdGNoKHZvaWQgMD09PXI/cj1uZXcgdi5kZWZhdWx0KHQsW10sW10sbik6ciBpbnN0YW5jZW9mIHYuZGVmYXVsdHx8KHI9bmV3IHYuZGVmYXVsdChyLmtleSxyLnJ1bGVzLHIuYWN0aW9ucyxyLmNvbWJpbmluZ0FsZ29yaXRobSkpLGUpe2Nhc2UiU0VSVklDRV9QUk9WSURFUiI6dGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcyhlLHIsdCk7YnJlYWs7Y2FzZSJVU0VSIjp0aGlzLmNvbnRleHQudXNlclBvbGljaWVzW3RdPXIsdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcyhlKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJVbmtub3duIHBvbGljeSBzb3VyY2U6ICIrZSl9fX0se2tleToiYXV0aG9yaXNlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7Ci8vIGxvZy5sb2coJ1tQb2xpY3kuUEVQIEF1dGhvcmlzZV0gJywgbWVzc2FnZSk7Ci8vIGxvZy5sb2cobWVzc2FnZSk7CmlmKCFlKXRocm93IG5ldyBFcnJvcigibWVzc2FnZSBpcyBub3QgZGVmaW5lZCIpO2lmKCFlLmZyb20pdGhyb3cgbmV3IEVycm9yKCJtZXNzYWdlLmZyb20gaXMgbm90IGRlZmluZWQiKTtpZighZS50byl0aHJvdyBuZXcgRXJyb3IoIm1lc3NhZ2UudG8gaXMgbm90IGRlZmluZWQiKTtpZighZS50eXBlKXRocm93IG5ldyBFcnJvcigibWVzc2FnZS50eXBlIGlzIG5vdCBkZWZpbmVkIik7cmV0dXJuIGUuYm9keT1lLmJvZHl8fHt9LG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXtlLmJvZHk9ZS5ib2R5fHx7fTt2YXIgaT1yLHM9aS5wZHAuZXZhbHVhdGVQb2xpY2llcyhlLHQpOyJOb3QgQXBwbGljYWJsZSI9PT1zJiYocz1pLmNvbnRleHQuZGVmYXVsdEJlaGF2aW91cixlLmJvZHkuYXV0aD0hMSksaS5hY3Rpb25zU2VydmljZS5lbmZvcmNlUG9saWNpZXMoZSx0KS50aGVuKGZ1bmN0aW9uKHQpe2Zvcih2YXIgciBpbiB0KWlmKGU9dFtyXSxzKWUuYm9keS5hdXRoPXZvaWQgMD09PWUuYm9keS5hdXRofHxlLmJvZHkuYXV0aCxuKGUpO2Vsc2V7dmFyIGk9e2JvZHk6e2NvZGU6NDAzLGRlc2NyaXB0aW9uOiJCbG9ja2VkIGJ5IHBvbGljeSJ9LGZyb206ZS50byx0bzplLmZyb20sdHlwZToicmVzcG9uc2UifTtvKGkpfX0sZnVuY3Rpb24oZSl7byhlKX0pfSl9fSx7a2V5OiJhdXRob3Jpc2VTeW5jIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD12b2lkIDA7cmV0dXJuIGUuYm9keT1lLmJvZHl8fHt9LHQ9dGhpcy5wZHAuZXZhbHVhdGVQb2xpY2llcyhlLCEwKSwiTm90IEFwcGxpY2FibGUiPT09dCYmKHQ9dGhpcy5jb250ZXh0LmRlZmF1bHRCZWhhdmlvdXIpLHR9fSx7a2V5OiJyZW1vdmVQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJzb3VyY2UgaXMgbm90IGRlZmluZWQiKTtpZigiKiIhPT1lJiYhdCl0aHJvdyBuZXcgRXJyb3IoImtleSBpcyBub3QgZGVmaW5lZCIpO3N3aXRjaChlKXtjYXNlIioiOnRoaXMuY29udGV4dC5zZXJ2aWNlUHJvdmlkZXJQb2xpY3k9e30sdGhpcy5jb250ZXh0LnVzZXJQb2xpY2llcz17fSx0aGlzLmNvbnRleHQuYWN0aXZlVXNlclBvbGljeT12b2lkIDAsdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcygiVVNFUiIpLHRoaXMuY29udGV4dC5zYXZlUG9saWNpZXMoIlNFUlZJQ0VfUFJPVklERVIiKSx0aGlzLmNvbnRleHQuc2F2ZUFjdGl2ZVBvbGljeSgpO2JyZWFrO2Nhc2UiU0VSVklDRV9QUk9WSURFUiI6ZGVsZXRlIHRoaXMuY29udGV4dC5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbdF0sdGhpcy5jb250ZXh0LnNhdmVQb2xpY2llcygpO2JyZWFrO2Nhc2UiVVNFUiI6ZGVsZXRlIHRoaXMuY29udGV4dC51c2VyUG9saWNpZXNbdF0sdD09PXRoaXMuY29udGV4dC5hY3RpdmVVc2VyUG9saWN5JiYodGhpcy5jb250ZXh0LmFjdGl2ZVVzZXJQb2xpY3k9dm9pZCAwLHRoaXMuY29udGV4dC5zYXZlQWN0aXZlUG9saWN5KCkpLHRoaXMuY29udGV4dC5zYXZlUG9saWNpZXMoIlVTRVIiKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJVbmtub3duIHBvbGljeSBzb3VyY2U6ICIrZSl9fX0se2tleToibWVzc2FnZUJ1cyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0LmNvbnRleHQubWVzc2FnZUJ1cz1lLHQuYWRkR1VJTGlzdGVuZXJzKCl9fV0pLFBFUH0oKSk7dC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDgwICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gQWN0aW9uc1NlcnZpY2UoZSl7KDAscy5kZWZhdWx0KSh0aGlzLEFjdGlvbnNTZXJ2aWNlKSx0aGlzLmNvbnRleHQ9ZX1yZXR1cm4oMCx1LmRlZmF1bHQpKEFjdGlvbnNTZXJ2aWNlLFt7a2V5OiJlbmZvcmNlUG9saWNpZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPXIuY29udGV4dC5nZXRQb2xpY2llcyhlLHQpO3ZvaWQgMCE9PWk/dm9pZCAwIT09aS5zZXJ2aWNlUHJvdmlkZXJQb2xpY3k/aS5zZXJ2aWNlUHJvdmlkZXJQb2xpY3kuZW5mb3JjZUFjdGlvbnMoci5jb250ZXh0LGUpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0sZnVuY3Rpb24oZSl7byhlKX0pOnZvaWQgMCE9PWkudXNlclBvbGljeT9pLnVzZXJQb2xpY3kuZW5mb3JjZUFjdGlvbnMoci5jb250ZXh0LGUpLnRoZW4oZnVuY3Rpb24oZSl7bihlKX0sZnVuY3Rpb24oZSl7byhlKX0pOm4oW2VdKTpuKFtlXSl9KX19LHtrZXk6ImZvcndhcmRUb0lEIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYoIXIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkpdGhyb3cgbmV3IEVycm9yKCJmb3J3YXJkIG1lc3NhZ2UgdG8gZ2l2ZW4gSUQgaXMgdW5zdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCIpO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7aWYoci5jb250ZXh0LnJ1bnRpbWVSZWdpc3RyeS5oeXBlcnRpZXNMaXN0WzBdLmh5cGVydHlVUkw9PT1lLnRvKXsicnVudGltZSIhPT1lLnRvLnNwbGl0KCI6Ly8iKVswXT9yLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5LmRpc2NvdmVySHlwZXJ0eVBlclVzZXIodCkudGhlbihmdW5jdGlvbih0KXtlLnRvPXQuaHlwZXJ0eVVSTCxlLmJvZHkudmlhPXZvaWQgMCxuKGUpLHIuY29udGV4dC5ydW50aW1lUmVnaXN0cnkuX21lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoZSl9LGZ1bmN0aW9uKGUpe28oZSl9KTpuKGUpfWVsc2UgbihlKX0pfX0se2tleToiZm9yd2FyZFRvSHlwZXJ0eSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKCFyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5KXRocm93IG5ldyBFcnJvcigiZm9yd2FyZCBtZXNzYWdlIHRvIGdpdmVuIElEIGlzIHVuc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQiKTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuKXtpZihyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5Lmh5cGVydGllc0xpc3RbMF0uaHlwZXJ0eVVSTD09PWUudG8peyJydW50aW1lIiE9PWUudG8uc3BsaXQoIjovLyIpWzBdPyhlLnRvPXQsZS5ib2R5LnZpYT12b2lkIDAsbihlKSxyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUpKTpuKGUpfWVsc2UgbihlKX0pfX0se2tleToic2VuZEF1dG9tYXRpY01lc3NhZ2UiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuKXt2YXIgbz17ZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ont2YWx1ZTp0fSx0eXBlOmUudHlwZX07bihlKSxyLmNvbnRleHQucnVudGltZVJlZ2lzdHJ5Ll9tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG8pfSl9fV0pLEFjdGlvbnNTZXJ2aWNlfSgpO3QuZGVmYXVsdD1jLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigxNDUpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUERQKGUpeygwLG8uZGVmYXVsdCkodGhpcyxQRFApLHRoaXMuY29udGV4dD1lLHRoaXMub3BlcmF0b3JzPW5ldyB1LmRlZmF1bHR9cmV0dXJuKDAscy5kZWZhdWx0KShQRFAsW3trZXk6ImV2YWx1YXRlUG9saWNpZXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5jb250ZXh0LmdldFBvbGljaWVzKGUsdCksbj0iTm90IEFwcGxpY2FibGUiO2lmKHZvaWQgMCE9PXImJigobj10aGlzLmV2YWx1YXRlUG9saWN5KGUsci5zZXJ2aWNlUHJvdmlkZXJQb2xpY3ksdCkpfHwiTm90IEFwcGxpY2FibGUiPT09bikpe3ZhciBvPXRoaXMuZXZhbHVhdGVQb2xpY3koZSxyLnVzZXJQb2xpY3ksdCk7Ik5vdCBBcHBsaWNhYmxlIiE9PW8mJihuPW8pfXJldHVybiBufX0se2tleToiZXZhbHVhdGVQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj0iTm90IEFwcGxpY2FibGUiO3JldHVybiB0JiYobj10LmV2YWx1YXRlUnVsZXModGhpcy5jb250ZXh0LGUscikpLG59fV0pLFBEUH0oKTt0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODIgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig4KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDEpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigyMDYpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMjA3KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDIwOCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig0ODMpLHY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChoKSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUG9saWN5KGUsdCxyLG4pe2lmKCgwLHMuZGVmYXVsdCkodGhpcyxQb2xpY3kpLCFlKXRocm93IG5ldyBFcnJvcigia2V5IGlzIG5vdCBkZWZpbmVkIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJhY3Rpb25zIGFyZSBub3QgZGVmaW5lZCIpO3RoaXMuYWN0aW9ucz1yLHRoaXMua2V5PWUsdGhpcy5fc2V0UnVsZXModCksdGhpcy5fc2V0Q29tYmluaW5nQWxnb3JpdGhtKG4pfXJldHVybigwLHUuZGVmYXVsdCkoUG9saWN5LFt7a2V5OiJhZGRBY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dGhpcy5hY3Rpb25zLnB1c2goe21ldGhvZDplLHBhcmFtOnR9KX19LHtrZXk6ImNyZWF0ZVJ1bGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyl7dm9pZCAwPT09byYmKG89dGhpcy5nZXRMYXN0UHJpb3JpdHkoKSsxKTt2YXIgaT1uZXcgdi5kZWZhdWx0KGUsdCxyLG4sbyk7dGhpcy5ydWxlcy5wdXNoKGkpfX0se2tleToiZGVsZXRlUnVsZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5ydWxlcy5pbmRleE9mKGUpO3RoaXMucnVsZXMuc3BsaWNlKHQsMSl9fSx7a2V5OiJlbmZvcmNlQWN0aW9ucyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7dmFyIHM9W107aWYoMCE9PXIuYWN0aW9ucy5sZW5ndGgpe2Zvcih2YXIgYSBpbiByLmFjdGlvbnMpe3ZhciB1PWUucGVwLmFjdGlvbnNTZXJ2aWNlW3IuYWN0aW9uc1thXS5tZXRob2RdKHQsci5hY3Rpb25zW2FdLnBhcmFtKTtzLnB1c2godSl9by5kZWZhdWx0LmFsbChzKS50aGVuKGZ1bmN0aW9uKGUpe24oZSl9LGZ1bmN0aW9uKGUpe2koZSl9KX1lbHNlIG4oW3RdKX0pfX0se2tleToiZXZhbHVhdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPVtdO2Zvcih2YXIgbyBpbiB0aGlzLnJ1bGVzKW4ucHVzaCh0aGlzLnJ1bGVzW29dLmV2YWx1YXRlKGUsdCxyKSk7cmV0dXJuIHRoaXMuY29tYmluaW5nQWxnb3JpdGhtLmNvbWJpbmUobil9fSx7a2V5OiJnZXRMYXN0UHJpb3JpdHkiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9W107aWYoMCE9PXRoaXMucnVsZXMubGVuZ3RoKXtmb3IodmFyIHQgaW4gdGhpcy5ydWxlcyllLnB1c2godGhpcy5ydWxlc1t0XS5wcmlvcml0eSk7cmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsZSl9cmV0dXJuLTF9fSx7a2V5OiJnZXRSdWxlQnlQcmlvcml0eSIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMucnVsZXMpaWYoU3RyaW5nKHRoaXMucnVsZXNbdF0ucHJpb3JpdHkpPT09U3RyaW5nKGUpKXJldHVybiB0aGlzLnJ1bGVzW3RdO3Rocm93IEVycm9yKCJSdWxlIHdpdGggcHJpb3JpdHkgIitlKyIgZG9lcyBub3QgZXhpc3QhIil9fSx7a2V5OiJfc2V0Q29tYmluaW5nQWxnb3JpdGhtIix2YWx1ZTpmdW5jdGlvbihlKXtzd2l0Y2goZXx8KGU9ImJsb2NrT3ZlcnJpZGVzIiksZSl7Y2FzZSJibG9ja092ZXJyaWRlcyI6dGhpcy5jb21iaW5pbmdBbGdvcml0aG09bmV3IGQuZGVmYXVsdDticmVhaztjYXNlImFsbG93T3ZlcnJpZGVzIjp0aGlzLmNvbWJpbmluZ0FsZ29yaXRobT1uZXcgZi5kZWZhdWx0O2JyZWFrO2Nhc2UiZmlyc3RBcHBsaWNhYmxlIjp0aGlzLmNvbWJpbmluZ0FsZ29yaXRobT1uZXcgeS5kZWZhdWx0O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoIlVua25vd24gYWxnb3JpdGhtOiAiK2UpfX19LHtrZXk6Il9zZXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5ydWxlcz1bXTtmb3IodmFyIHQgaW4gZSl7dmFyIHI9ZVt0XTt2b2lkIDA9PT1yLnByaW9yaXR5JiYoci5wcmlvcml0eT10aGlzLmdldExhc3RQcmlvcml0eSgpKzEpLHIgaW5zdGFuY2VvZiB2LmRlZmF1bHR8fChyPW5ldyB2LmRlZmF1bHQoci5kZWNpc2lvbixyLmNvbmRpdGlvbixyLnNjb3BlLHIudGFyZ2V0LHIucHJpb3JpdHkpKSx0aGlzLnJ1bGVzLnB1c2gocil9fX0se2tleToic29ydFJ1bGVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJ1bGVzLnNvcnQoZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnByaW9yaXR5LG49dC5wcmlvcml0eTtyZXR1cm4gcjxuPy0xOnI+bj8xOjB9KX19XSksUG9saWN5fSgpO3QuZGVmYXVsdD1nLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ4MyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig0ODQpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMTQ2KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDE0KSxkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUnVsZShlLHQscixuLGkpeygwLG8uZGVmYXVsdCkodGhpcyxSdWxlKSx0aGlzLmRlY2lzaW9uPWUsdGhpcy5zZXRDb25kaXRpb24odCksdGhpcy5wcmlvcml0eT1pLHRoaXMuc2NvcGU9cix0aGlzLnRhcmdldD1ufXJldHVybigwLHMuZGVmYXVsdCkoUnVsZSxbe2tleToic2V0Q29uZGl0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgZi5kZWZhdWx0fHxlIGluc3RhbmNlb2YgdS5kZWZhdWx0fHxlIGluc3RhbmNlb2YgdS5kZWZhdWx0KXRoaXMuY29uZGl0aW9uPWU7ZWxzZXtzd2l0Y2goZS5hdHRyaWJ1dGUpe2Nhc2Uic3Vic2NyaXB0aW9uIjp0aGlzLmNvbmRpdGlvbj1uZXcgdS5kZWZhdWx0KGUuYXR0cmlidXRlLGUub3BlcmF0b3IsZS5wYXJhbXMpO2JyZWFrO2Nhc2Ugdm9pZCAwOnRoaXMuY29uZGl0aW9uPW5ldyB1LmRlZmF1bHQoZSk7YnJlYWs7ZGVmYXVsdDp0aGlzLmNvbmRpdGlvbj1uZXcgZi5kZWZhdWx0KGUuYXR0cmlidXRlLGUub3BlcmF0b3IsZS5wYXJhbXMpfX19fSx7a2V5OiJldmFsdWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXI/dC50bzp0LmZyb20sbz12b2lkIDA7c3dpdGNoKHRoaXMuc2NvcGUpe2Nhc2UiZ2xvYmFsIjpicmVhaztjYXNlImh5cGVydHkiOmlmKCgwLGwuaXNEYXRhT2JqZWN0VVJMKShuKSl7dmFyIGk9ZS5ydW50aW1lUmVnaXN0cnkuZ2V0UmVwb3J0ZXJVUkxTeW5jaG9ub3VzKCgwLGwucmVtb3ZlUGF0aEZyb21VUkwpKG4pKTt2b2lkIDAhPT1pJiYobz1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZShpKSl9ZWxzZSJoeXBlcnR5Ij09PW4uc3BsaXQoIjovLyIpWzBdJiYobz1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZSgoMCxsLnJlbW92ZVBhdGhGcm9tVVJMKShuKSkpO2lmKG89PT10aGlzLnRhcmdldClicmVhaztyZXR1cm4iTm90IEFwcGxpY2FibGUiO2Nhc2UiaWRlbnRpdHkiOnZhciBzPXZvaWQgMDtpZigoMCxsLmlzRGF0YU9iamVjdFVSTCkobikpe3ZhciBhPWUucnVudGltZVJlZ2lzdHJ5LmdldFJlcG9ydGVyVVJMU3luY2hvbm91cygoMCxsLnJlbW92ZVBhdGhGcm9tVVJMKShuKSk7cz1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoYSl9ZWxzZSJoeXBlcnR5Ij09PW4uc3BsaXQoIjovLyIpWzBdJiYocz1lLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5T3duZXIoKDAsbC5yZW1vdmVQYXRoRnJvbVVSTCkobikpKTtpZih2b2lkIDAhPT1zJiYocz0oMCxsLmdldFVzZXJFbWFpbEZyb21VUkwpKHMpKSxzPT09dGhpcy50YXJnZXQpYnJlYWs7cmV0dXJuIk5vdCBBcHBsaWNhYmxlIn1yZXR1cm4gdGhpcy5jb25kaXRpb24uaXNBcHBsaWNhYmxlKGUsdCx0aGlzLnNjb3BlLHRoaXMudGFyZ2V0KT90aGlzLmRlY2lzaW9uOiJOb3QgQXBwbGljYWJsZSJ9fV0pLFJ1bGV9KCk7dC5kZWZhdWx0PWQsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDg0ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDE0NiksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxNDUpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNDg1KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1mdW5jdGlvbigpe2Z1bmN0aW9uIEFkdmFuY2VkQ29uZGl0aW9uKGUpeygwLG8uZGVmYXVsdCkodGhpcyxBZHZhbmNlZENvbmRpdGlvbiksdGhpcy5vcGVyYXRvcnM9bmV3IGYuZGVmYXVsdCx2b2lkIDAhPT1lLm9wZXJhdG9ycyYmKGU9ZS5jb25kaXRpb24pLGU9dGhpcy5idWlsZENvbmRpdGlvbihlKSx0aGlzLmNvbmRpdGlvbj1lfXJldHVybigwLHMuZGVmYXVsdCkoQWR2YW5jZWRDb25kaXRpb24sW3trZXk6ImJ1aWxkQ29uZGl0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlWzFdKT9lWzFdPXRoaXMuYnVpbGRDb25kaXRpb24oZVsxXSk6InN1YnNjcmlwdGlvbiI9PT1lWzFdLmF0dHJpYnV0ZT9lWzFdPW5ldyBkLmRlZmF1bHQoZVsxXS5hdHRyaWJ1dGUsZVsxXS5vcGVyYXRvcixlWzFdLnBhcmFtcyk6ZVsxXT1uZXcgdS5kZWZhdWx0KGVbMV0uYXR0cmlidXRlLGVbMV0ub3BlcmF0b3IsZVsxXS5wYXJhbXMpLHZvaWQgMCE9PWVbMl0mJihBcnJheS5pc0FycmF5KGVbMl0pP2VbMl09dGhpcy5idWlsZENvbmRpdGlvbihlWzJdKToic3Vic2NyaXB0aW9uIj09PWVbMl0uYXR0cmlidXRlP2VbMl09bmV3IGQuZGVmYXVsdChlWzJdLmF0dHJpYnV0ZSxlWzJdLm9wZXJhdG9yLGVbMl0ucGFyYW1zKTplWzJdPW5ldyB1LmRlZmF1bHQoZVsyXS5hdHRyaWJ1dGUsZVsyXS5vcGVyYXRvcixlWzJdLnBhcmFtcykpLGV9fSx7a2V5OiJpc0FwcGxpY2FibGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4sbyxpLHMpe2ZvcihvfHwobz10aGlzLmNvbmRpdGlvblswXSxpPXRoaXMuY29uZGl0aW9uWzFdLHM9dGhpcy5jb25kaXRpb25bMl0pOyEoaSBpbnN0YW5jZW9mIHUuZGVmYXVsdCkmIShpIGluc3RhbmNlb2YgZC5kZWZhdWx0KSYiYm9vbGVhbiIhPXR5cGVvZiBpOylpPXRoaXMuaXNBcHBsaWNhYmxlKGUsdCxyLG4saVswXSxpWzFdLGlbMl0pO2lmKHZvaWQgMCE9PXMpZm9yKDshKHMgaW5zdGFuY2VvZiB1LmRlZmF1bHQpJiEocyBpbnN0YW5jZW9mIGQuZGVmYXVsdCkmImJvb2xlYW4iIT10eXBlb2Ygczspcz10aGlzLmlzQXBwbGljYWJsZShlLHQscixuLHNbMF0sc1sxXSxzWzJdKTt2YXIgYT0iYm9vbGVhbiI9PXR5cGVvZiBpP2k6aS5pc0FwcGxpY2FibGUoZSx0LHIsbiksYz12b2lkIDA7cmV0dXJuIHZvaWQgMCE9PXMmJihjPSJib29sZWFuIj09dHlwZW9mIHM/czpzLmlzQXBwbGljYWJsZShlLHQscixuKSksdGhpcy5vcGVyYXRvcnNbb10oW2EsY10pfX1dKSxBZHZhbmNlZENvbmRpdGlvbn0oKTt0LmRlZmF1bHQ9cCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0ODUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig1OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoNjcpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNDg2KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDY4KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDE0Niksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9ZnVuY3Rpb24oZSl7LyoqCiAgKiBDcmVhdGVzIGEgbmV3IFN1YnNjcmlwdGlvbkNvbmRpdGlvbi4KICAqIEBjbGFzcwogICogQHBhcmFtICB7c3RyaW5nfSAgYXR0cmlidXRlCiAgKiBAcGFyYW0gIHtzdHJpbmd9ICBvcGVyYXRvcgogICogQHBhcmFtICB7Kn0gICAgICAgcGFyYW1zCiAgKi8KZnVuY3Rpb24gU3Vic2NyaXB0aW9uQ29uZGl0aW9uKGUsdCxyKXtyZXR1cm4oMCxzLmRlZmF1bHQpKHRoaXMsU3Vic2NyaXB0aW9uQ29uZGl0aW9uKSwoMCxmLmRlZmF1bHQpKHRoaXMsKFN1YnNjcmlwdGlvbkNvbmRpdGlvbi5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uKSkuY2FsbCh0aGlzLGUsdCxyKSl9LyoqCiAgKiBWZXJpZmllcyBpZiB0aGUgc3Vic2NyaXB0aW9uIGNvbmRpdGlvbiBpcyBhcHBsaWNhYmxlIHRvIHRoZSBtZXNzYWdlLiBGaXJzdCwgdmVyaWZpZXMgaWYgdGhlIG1lc3NhZ2UgaXMgb2YgdGhlIHN1YnNjcmlwdGlvbiB0eXBlOyBzZWNvbmQsIHZlcmlmaWVzIGlmIHRoZSBtZXNzYWdlIGlzIGZyb20gYSByZW1vdGUgcnVudGltZSB0byBndWFyYW50ZWUgdGhhdCB0aGUgc3Vic2NyaXB0aW9uIGlzIGJlaW5nIHZhbGlkYXRlZCBpbiB0aGUgZGVzdGluYXRpb24gcnVudGltZTsgdGhpcmQsIHZlcmlmaWVzIGlmIHRoZSBzdWJzY3JpcHRpb24gcHJlZmVyZW5jZSBpcyBtZXQuCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIGNvbnRleHQgICBlbnZpcm9ubWVudCB3aGVyZSB0aGUgUG9saWN5IEVuZ2luZSBpcyBiZWluZyB1c2VkCiAgKiBAcGFyYW0gIHtPYmplY3R9ICAgIG1lc3NhZ2UKICAqLwpyZXR1cm4oMCx5LmRlZmF1bHQpKFN1YnNjcmlwdGlvbkNvbmRpdGlvbixlKSwoMCx1LmRlZmF1bHQpKFN1YnNjcmlwdGlvbkNvbmRpdGlvbixbe2tleToiaXNBcHBsaWNhYmxlIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiEhKCJzdWJzY3JpYmUiPT09dC50eXBlJmUuaXNGcm9tUmVtb3RlU00odC5mcm9tKSkmJigwLGQuZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLnByb3RvdHlwZS5fX3Byb3RvX198fCgwLG8uZGVmYXVsdCkoU3Vic2NyaXB0aW9uQ29uZGl0aW9uLnByb3RvdHlwZSksImlzQXBwbGljYWJsZSIsdGhpcykuY2FsbCh0aGlzLGUsdCl9fV0pLFN1YnNjcmlwdGlvbkNvbmRpdGlvbn0odi5kZWZhdWx0KTsvKioKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAqKi8KdC5kZWZhdWx0PWcsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDg2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19dC5fX2VzTW9kdWxlPSEwO3ZhciBuPXIoNTkpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoNDg3KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSk7dC5kZWZhdWx0PWZ1bmN0aW9uIGdldChlLHQscil7bnVsbD09PWUmJihlPUZ1bmN0aW9uLnByb3RvdHlwZSk7dmFyIG49KDAscy5kZWZhdWx0KShlLHQpO2lmKHZvaWQgMD09PW4pe3ZhciBpPSgwLG8uZGVmYXVsdCkoZSk7cmV0dXJuIG51bGw9PT1pP3ZvaWQgMDpnZXQoaSx0LHIpfWlmKCJ2YWx1ZSJpbiBuKXJldHVybiBuLnZhbHVlO3ZhciBhPW4uZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChyKX19LC8qIDQ4NyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXtkZWZhdWx0OnIoNDg4KSxfX2VzTW9kdWxlOiEwfX0sLyogNDg4ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDQ4OSk7dmFyIG49cigxMykuT2JqZWN0O2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiBuLmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpfX0sLyogNDg5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsKLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQp2YXIgbj1yKDQ1KSxvPXIoMTQzKS5mO3IoMTM0KSgiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQpe3JldHVybiBvKG4oZSksdCl9fSl9LC8qIDQ5MCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDY5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDU5KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig2NyksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig2OCkseT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHApLGg9cig3KSx2PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oaCksZz1yKDIwMiksYj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGcpLF89cig0OTEpLG09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfKSxSPXYuZ2V0TG9nZ2VyKCJNZXNzYWdlQnVzIiksdz1mdW5jdGlvbihlKXsvKiBwcml2YXRlCiAgX3JlZ2lzdHJ5OiBSZWdpc3RyeQogIF9mb3J3YXJkczogeyA8ZnJvbS11cmw+OiB7IGZsOiBNc2dMaXN0ZW5lciwgc2FuZGJveFRvVXJsczogTWFwKFNhbmRib3gsIFt0by11cmxdKSwgdXJsVG9TYW5kYm94OiB7IHRvLXVybDogU2FuZGJveCB9IH0gfQogICBfcGlwZWxpbmU6IFBpcGVsaW5lCiAgKi8KLy9UT0RPOiBmdXR1cmUgb3B0aW1pemF0aW9uCi8vMS4gbWVzc2FnZSBiYXRjaCBwcm9jZXNzaW5nIHdpdGggc2V0SW50ZXJ2YWwKLy8yLiByZXNvbHZlIGRlZmF1bHQgZ2F0ZXdheS9wcm90b3N0dWIgd2l0aCByZWdpc3Rlci5yZXNvbHZlCmZ1bmN0aW9uIE1lc3NhZ2VCdXMoZSl7KDAsdS5kZWZhdWx0KSh0aGlzLE1lc3NhZ2VCdXMpO3ZhciB0PSgwLGQuZGVmYXVsdCkodGhpcywoTWVzc2FnZUJ1cy5fX3Byb3RvX198fCgwLHMuZGVmYXVsdCkoTWVzc2FnZUJ1cykpLmNhbGwodGhpcykpO3JldHVybiB0Ll9yZWdpc3RyeT1lLHQuX2ZvcndhcmRzPXt9LHQuX3BpcGVsaW5lSW49bmV3IG0uZGVmYXVsdChmdW5jdGlvbihlKXtSLmVycm9yKCJQSVBFTElORS1FUlJPUjogIiwoMCxvLmRlZmF1bHQpKGUpKX0pLHQuX3BpcGVsaW5lT3V0PW5ldyBtLmRlZmF1bHQoZnVuY3Rpb24oZSl7Ui5lcnJvcigiUElQRUxJTkUtRVJST1I6ICIsKDAsby5kZWZhdWx0KShlKSl9KSx0fXJldHVybigwLHkuZGVmYXVsdCkoTWVzc2FnZUJ1cyxlKSwoMCxmLmRlZmF1bHQpKE1lc3NhZ2VCdXMsW3trZXk6InBvc3RNZXNzYWdlIiwvKioKICAgICAqIFBvc3QgYSBtZXNzYWdlIGZvciByb3V0aW5nLiBJdCB3aWxsIGZpcnN0IHNlYXJjaCBmb3IgYSBsaXN0ZW5lciwgaWYgdGhlcmUgaXMgbm8gb25lLCBpdCBzZW5kcyB0byBhIGV4dGVybmFsIHJvdXRpbmcgdXNpbmcgdGhlIF9vblBvc3RNZXNzYWdlLgogICAgICogRXh0ZXJuYWwgcm91dGluZyB1c2UgdGhlIHJlZ2lzdHJ5LnJlc29sdmUoLi4pIG1ldGhvZCB0byBkZWNpZGUgdGhlIGRlc3RpbmF0aW9uIHNhbmRib3guCiAgICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBpbk1zZyAgICAgICAgICAgIEpTT04gd2l0aCBtYW5kYXRvcnkgTWVzc2FnZSBzdHJ1Y3R1cmUge2lkLCB0eXBlLCBmcm9tLCB0b30KICAgICAqIEBwYXJhbSAge0NhbGxiYWNrfSByZXNwb25zZUNhbGxiYWNrIE9wdGlvbmFsIGNhbGxiYWNrIGlmIGEgcmVzcG9uc2UgaXMgZXhwZWN0ZWQgZnJvbSB0aGUgcmVxdWVzdC4gQSByZXNwb25zZSB3aWxsIGJlIGFsd2F5cyBzZW50LCBldmVuIGlmIGl0IGlzIGEgIlRpbWVvdXQiLgogICAgICogQHJldHVybiB7bnVtYmVyfSAgICAgICAgICAgICAgICAgIHRoZSBNZXNzYWdlIGlkCiAgICAgKi8KdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe1IuaW5mbygib25QT1NUTWVzc2FnZTogIixlKTt2YXIgbj10aGlzLG89ZnVuY3Rpb24obyl7aWYobi5fcmVzcG9uc2VDYWxsYmFjayhlLHQsciksIW4uX29uUmVzcG9uc2Uobykpe3ZhciBpPW4uX3N1YnNjcmlwdGlvbnNbby50b107aT8KLy9kbyBub3QgcHVibGlzaCBvbiBkZWZhdWx0IGFkZHJlc3MsIGJlY2F1c2Ugb2YgbG9vcGJhY2sgY3ljbGUKbi5fcHVibGlzaE9uKGksbyk6Ci8vaWYgdGhlcmUgaXMgbm8gbGlzdGVuZXIsIHNlbmQgdG8gZXh0ZXJuYWwgaW50ZXJmYWNlCm4uX29uUG9zdE1lc3NhZ2Uobyl9fTtpZihuLl9nZW5JZChlKSxuLl9pc1RvUHJvY2VzcyhlKSl7bi5faXNJbmNvbWluZ01lc3NhZ2UoZSk/bi5fcGlwZWxpbmVJbi5wcm9jZXNzKGUsbyk6bi5fcGlwZWxpbmVPdXQucHJvY2VzcyhlLG8pfWVsc2UgbyhlKTtyZXR1cm4gZS5pZH19LHtrZXk6Il9pc1RvUHJvY2VzcyIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9WyJkb21haW4iLCJkb21haW4taWRwIiwiZ2xvYmFsIiwiaHlwZXJ0eS1ydW50aW1lIiwicnVudGltZSJdLHI9ZS5mcm9tLnNwbGl0KCI6Ly8iKSxuPXJbMF0sbz1lLnRvLnNwbGl0KCI6Ly8iKSxpPW9bMF0scz1lLmZyb20sYT1lLnRvOwovLyBTaWduYWxsaW5nIG1lc3NhZ2VzIGJldHdlZW4gUDJQIFN0dWJzIGRvbid0IGhhdmUgdG8gYmUgdmVyaWZpZWQuIEZGUwpyZXR1cm4gZS5ib2R5JiZlLmJvZHkuc291cmNlJiYocz1lLmJvZHkuc291cmNlKSxlLmJvZHkmJmUuYm9keS5zdWJzY3JpYmVyJiYocz1lLmJvZHkuc3Vic2NyaWJlciksLTE9PT1zLmluZGV4T2YoIi9wMnBoYW5kbGVyLyIpJiYtMT09PXMuaW5kZXhPZigiL3AycHJlcXVlc3Rlci8iKSYmLTE9PT1hLmluZGV4T2YoIi9wMnBoYW5kbGVyLyIpJiYtMT09PWEuaW5kZXhPZigiL3AycHJlcXVlc3Rlci8iKSYmKCghdGhpcy5fcmVnaXN0cnkuaXNMb2NhbChzKXx8IXRoaXMuX3JlZ2lzdHJ5LmlzTG9jYWwoZS50bykpJiYoIShlLmZyb209PT1ufHxlLnRvPT09aXx8InJlYWQiPT09ZS50eXBlfHwicmVzcG9uc2UiPT09ZS50eXBlfHxlLmZyb20uaW5jbHVkZXMoImh5cGVydHk6Ly8iKSYmImRlbGV0ZSI9PT1lLnR5cGUpJiYoLTE9PT10LmluZGV4T2Yobil8fC0xPT09dC5pbmRleE9mKGkpKSkpfX0se2tleToiX2lzSW5jb21pbmdNZXNzYWdlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD12b2lkIDA7Ci8vVE9ETzogdGhpcyBzdWJzY3JpYmVyIHZhbGlkYXRpb24gc2hvdWxkIG5vdCBleGlzdCwgYmVjYXVzZSBpcyBvdXRkYXRlZAovL1RPRE86IHRoZSBzeW5jaGVyIGFuZCBzeW5jaGVyIG1hbmFnZXIgbm90IGZvbGxvd2luZyB0aGUgY29ycmVjdCBzcGVjOwovL1RPRE86IHRoaXMgc3Vic2NyaWJlciB2YWxpZGF0aW9uIHNob3VsZCBub3QgZXhpc3QsIGJlY2F1c2UgaXMgb3V0ZGF0ZWQKLy9UT0RPOiB0aGUgc3luY2hlciBhbmQgc3luY2hlciBtYW5hZ2VyIG5vdCBmb2xsb3dpbmcgdGhlIGNvcnJlY3Qgc3BlYzsKcmV0dXJuImZvcndhcmQiPT09ZS50eXBlPyhSLmluZm8oIltNZXNzYWdlQnVzIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gbWVzc2FnZS50eXBlOiAiLGUudHlwZSksdD1lLmJvZHkuZnJvbSk6ZS5oYXNPd25Qcm9wZXJ0eSgiYm9keSIpJiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInNvdXJjZSIpJiZlLmJvZHkuc291cmNlPyhSLmluZm8oIltNZXNzYWdlQnVzIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gbWVzc2FnZS5ib2R5LnNvdXJjZTogIixlLmJvZHkuc291cmNlKSx0PWUuYm9keS5zb3VyY2UpOmUuaGFzT3duUHJvcGVydHkoImJvZHkiKSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJzdWJzY3JpYmVyIikmJmUuYm9keS5zdWJzY3JpYmVyPyhSLmluZm8oIltNZXNzYWdlQnVzIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gbWVzc2FnZS5ib2R5LnN1YnNjcmliZXI6ICIsZS5ib2R5LnN1YnNjcmliZXIpLHQ9ZS5ib2R5LnN1YnNjcmliZXIpOmUuaGFzT3duUHJvcGVydHkoImJvZHkiKSYmZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXBvcnRlciIpJiZlLmJvZHkucmVwb3J0ZXI/KFIuaW5mbygiW01lc3NhZ2VCdXMgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLmJvZHkucmVwb3J0ZXI6ICIsZS5ib2R5LnJlcG9ydGVyKSx0PWUuYm9keS5yZXBvcnRlcik6KFIuaW5mbygiW01lc3NhZ2VCdXMgLSBpc0luY29taW5nTWVzc2FnZV0gLSBtZXNzYWdlLmZyb20gIixlLmZyb20pLHQ9ZS5mcm9tKSxSLmluZm8oIltNZXNzYWdlQnVzIC0gaXNJbmNvbWluZ01lc3NhZ2VdIC0gY2hlY2sgaWYgaXNMb2NhbDogIix0KSwhdGhpcy5fcmVnaXN0cnkuaXNMb2NhbCh0KX19LHtrZXk6ImFkZFB1Ymxpc2giLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLG49ci5fZm9yd2FyZHNbZV07aWYoIW4pe249e2NvdW50ZXI6MCxmbDpyLmFkZExpc3RlbmVyKGUsZnVuY3Rpb24odCl7Ui5pbmZvKCJNQi1QVUJMSVNIOiAoICIrZSsiICkiKSxyLl9vblBvc3RNZXNzYWdlKHQpfSkscmVtb3ZlOmZ1bmN0aW9uKCl7MD09PS0tdC5jb3VudGVyJiYodC5mbC5yZW1vdmUoKSxkZWxldGUgci5fZm9yd2FyZHNbZV0pfX0sci5fZm9yd2FyZHNbZV09bn1yZXR1cm4gbi5jb3VudGVyKyssbn19LHtrZXk6ImFkZEZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gci5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKG4pe1IuaW5mbygiTUItRk9SV0FSRDogKCAiK2UrIiB0byAiK3QrIiApIiksci5mb3J3YXJkKHQsbil9KX19LHtrZXk6ImZvcndhcmQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXIuX3N1YnNjcmlwdGlvbnNbZV07biYmci5fcHVibGlzaE9uKG4sdCl9fSx7a2V5OiJfb25Qb3N0TWVzc2FnZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczsKLy9yZXNvbHZlIGV4dGVybmFsIHByb3Rvc3R1Yi4uLgp0Ll9yZWdpc3RyeS5yZXNvbHZlKGUpLnRoZW4oZnVuY3Rpb24ocixuKXtuP3QuZm9yd2FyZChyLG4pOnQuZm9yd2FyZChyLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ui5lcnJvcigiUkVTT0xWRS1FUlJPUjogIixlKX0pfX0se2tleToicGlwZWxpbmVJbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpcGVsaW5lSW59fSx7a2V5OiJwaXBlbGluZU91dCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpcGVsaW5lT3V0fX1dKSxNZXNzYWdlQnVzfShiLmRlZmF1bHQpO3QuZGVmYXVsdD13LGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ5MSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig3KSx1PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYSksYz0ocigxNCksdS5nZXRMb2dnZXIoIlBpcGVsaW5lIiksZnVuY3Rpb24oKXsvKiBwdWJsaWMKICAgIGhhbmRsZXJzOiAoKFBpcGVDb250ZXh0KSA9PiB2b2lkKVtdCiAgICBvbkZhaWw6IChlcnJvcikgPT4gdm9pZAogICovCmZ1bmN0aW9uIFBpcGVsaW5lKGUpeygwLG8uZGVmYXVsdCkodGhpcyxQaXBlbGluZSk7dmFyIHQ9dGhpczt0LmhhbmRsZXJzPVtdLHQub25GYWlsPWV9LyoqCiAgICogSW5zZXJ0IGEgbWVzc2FnZSBpbiB0aGUgcGlwZWxpbmUgcXVldWUuIEFsbCBtZXNzYWdlcyBhcmUgd3JhcHBlZCB3aXRoIGEgUGlwZUNvbnRleHQuCiAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnICAgICAgIE1lc3NhZ2UgZm9yIHRoZSBxdWV1ZQogICAqIEBwYXJhbSAge0NhbGxiYWNrfSBvbkRlbGl2ZXIgV2hlbiBtZXNzYWdlIGlzIGZpbmlzaGVkIHByb2Nlc3NpbmcgZnJvbSBhbGwgaGFuZGxlcnMsIGl0IHdpbGwgYmUgZGVsaXZlcmVkIGluIHRoaXMgY2FsbGJhY2suCiAgICovCnJldHVybigwLHMuZGVmYXVsdCkoUGlwZWxpbmUsW3trZXk6InByb2Nlc3MiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZihyLmhhbmRsZXJzLmxlbmd0aD4wKXt2YXIgbj1uZXcgbChyLmhhbmRsZXJzKTtuLm5leHQobmV3IGYocixuLGUsdCkpfWVsc2UgdChlKX19XSksUGlwZWxpbmV9KCkpLGY9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgICBfaW5TdG9wOiBib29sZWFuCiAgICAgX3BpcGVsaW5lOiBQaXBlbGluZQogICAgX2l0ZXI6IEl0ZXJhdG9yCiAgICBfbXNnOiBNZXNzYWdlCiAgKi8KZnVuY3Rpb24gUGlwZUNvbnRleHQoZSx0LHIsbil7KDAsby5kZWZhdWx0KSh0aGlzLFBpcGVDb250ZXh0KTt2YXIgaT10aGlzO2kuX2luU3RvcD0hMSxpLl9waXBlbGluZT1lLGkuX2l0ZXI9dCxpLl9tc2c9cixpLl9vbkRlbGl2ZXI9bn1yZXR1cm4oMCxzLmRlZmF1bHQpKFBpcGVDb250ZXh0LFt7a2V5OiJuZXh0IiwvKioKICAgICAqIFByb2NlZWQgdG8gdGhlIG5leHQgaW50ZXJjZXB0b3IgaGFuZGxlciwgdW5sZXNzIHRoZXJlIHdhcyBhbiBlcnJvci4gSWYgaXQncyB0aGUgbGFzdCBvbmUsIHByb2NlZWQgdG8gb25EZWxpdmVyIGhhbmRsZXIuCiAgICAgKi8KdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2luU3RvcHx8KGUuX2l0ZXIuaGFzTmV4dD9lLl9pdGVyLm5leHQoZSk6ZS5fb25EZWxpdmVyKGUuX21zZykpfX0se2tleToiZGVsaXZlciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuX2luU3RvcHx8KGUuX2luU3RvcD0hMCxlLl9vbkRlbGl2ZXIoZS5fbXNnKSl9fSx7a2V5OiJmYWlsIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2luU3RvcHx8KHQuX2luU3RvcD0hMCx0Ll9waXBlbGluZS5vbkZhaWwmJnQuX3BpcGVsaW5lLm9uRmFpbChlKSl9fSx7a2V5OiJwaXBlbGluZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BpcGVsaW5lfX0se2tleToibXNnIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbXNnfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbXNnPWV9fV0pLFBpcGVDb250ZXh0fSgpLGw9ZnVuY3Rpb24oKXsvKiBwcml2YXRlCiAgICBfaW5kZXg6IG51bWJlcgogICAgX2FycmF5OiBbXQogICovCmZ1bmN0aW9uIEl0ZXJhdG9yKGUpeygwLG8uZGVmYXVsdCkodGhpcyxJdGVyYXRvciksdGhpcy5faW5kZXg9LTEsdGhpcy5fYXJyYXk9ZX1yZXR1cm4oMCxzLmRlZmF1bHQpKEl0ZXJhdG9yLFt7a2V5OiJoYXNOZXh0IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5kZXg8dGhpcy5fYXJyYXkubGVuZ3RoLTF9fSx7a2V5OiJuZXh0IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5kZXgrKyx0aGlzLl9hcnJheVt0aGlzLl9pbmRleF19fV0pLEl0ZXJhdG9yfSgpO3QuZGVmYXVsdD1jLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDQ5MiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDY5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDQ5MyksZD1yKDcpLHA9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShkKSx5PXAuZ2V0TG9nZ2VyKCJDcnlwdG9NYW5hZ2VyIiksaD1mdW5jdGlvbigpey8qKgogICogUnVudGltZWZhY3RvcnkgaXMgcGFzc2VkIGluIHRoZSBjb3N0cnVjdG9yLCBiZWNhdXNlIHRoZSBub2RlSlMgaGFzIGEgZGlmZmVyZW50IGNyeXB0byBtb2R1bGUKICAqIGZyb20gdGhlIGJyb3dzZXIuIFJ1bnRpbWVGYWN0b3J5IHByb3ZpZGVzIGEgd3JhcHBlciBmb3IgdGhlIGZ1Y3Rpb25zIG9mIG5vZGVKUywgc28gdGhleSBjYW4gYmUKICAqIGludm9rZWQgYnJvd3NlciBsaWtlLgogICovCmZ1bmN0aW9uIENyeXB0byhlKXsoMCx1LmRlZmF1bHQpKHRoaXMsQ3J5cHRvKTt2YXIgdD10aGlzOyJmdW5jdGlvbiI9PXR5cGVvZiBlLmNyZWF0ZVdlYmNyeXB0bz90Ll9jcnlwdG89ZS5jcmVhdGVXZWJjcnlwdG8oKTp0Ll9jcnlwdG89Y3J5cHRvfS8qKgogICogUGVyZm9ybXMgYSBSU0EgZW5jcnlwdGlvbgogICogQHBhcmFtICAge0FycmF5QnVmZmVyfSAgICB2YWx1ZSAgICB0aGUgcHVibGljIGtleQogICogQHBhcmFtICAge0J1ZmZlclNvdXJjZX0gICAgdmFsdWUgICAgZGF0YSB0byBiZSBlbmNyeXBlZAogICogQHJldHVybiAge1VpbnQ4QXJyYXl9ICAgZW5jcnlwdGVkIGRhdGEKICAqLwpyZXR1cm4oMCxmLmRlZmF1bHQpKENyeXB0byxbe2tleToiZW5jcnlwdFJTQSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt5LmxvZygiZW5jcnlwdFJTQTpwdWJLZXkiLGUpLHkubG9nKCJlbmNyeXB0UlNBOmRhdGEiLHQpO3ZhciByPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obixvKXtyLl9pbXBvcnRSU0FlbmNyeXB0S2V5KG5ldyBVaW50OEFycmF5KGUpKS50aGVuKGZ1bmN0aW9uKGUpe3IuX2NyeXB0by5zdWJ0bGUuZW5jcnlwdCh7bmFtZToiUlNBLU9BRVAifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKdCkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGFuIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgdGhlIGVuY3J5cHRlZCBkYXRhCi8vIGxvZy5sb2coJ2NyeXB0by1lbmNyeXB0UlNBJywgbmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkKSk7Cm4obmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2NyeXB0by1lbmNyeXB0UlNBJywgZXJyKTsKbyhlKX0pfSl9KX19LHtrZXk6ImRlY3J5cHRSU0EiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7eS5sb2coImRlY3J5cHRSU0E6cHJpdktleSIsZSkseS5sb2coImRlY3J5cHRSU0E6ZGF0YSIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihuLG8pe3IuX2ltcG9ydFJTQWRlY3J5cHRLZXkoZSkudGhlbihmdW5jdGlvbihlKXtyLl9jcnlwdG8uc3VidGxlLmRlY3J5cHQoe25hbWU6IlJTQS1PQUVQIn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnQpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZSk7Ci8vIGxvZy5sb2coJ2NyeXB0by1kZWNyeXB0UlNBJywgZGVjcnlwdGVkRGF0YSk7Cm4odCl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY3J5cHRvLWRlY3J5cHRSU0EnLCBlcnIpOwpvKGUpfSl9KX0pfX0se2tleToic2lnblJTQSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7ci5faW1wb3J0UlNBc2lnbktleShlKS50aGVuKGZ1bmN0aW9uKGUpe3IuX2NyeXB0by5zdWJ0bGUuc2lnbih7bmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKKDAsbC5lbmNvZGVVVEY4KSh0KSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIGFuIEFycmF5QnVmZmVyIGNvbnRhaW5pbmcgdGhlIHNpZ25hdHVyZQovLyBsb2cubG9nKCdjcnlwdG8tc2lnblJTQScsIG5ldyBVaW50OEFycmF5KHNpZ25hdHVyZSkpOwpuKG5ldyBVaW50OEFycmF5KGUpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjcnlwdG8tc2lnblJTQScsIGVycik7Cm8oZSl9KX0pfSl9fSx7a2V5OiJ2ZXJpZnlSU0EiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7bi5faW1wb3J0UlNBdmVyaWZ5S2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7bi5fY3J5cHRvLnN1YnRsZS52ZXJpZnkoe25hbWU6IlJTQVNTQS1QS0NTMS12MV81In0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnIsLy9BcnJheUJ1ZmZlciBvZiB0aGUgc2lnbmF0dXJlCigwLGwuZW5jb2RlVVRGOCkodCkpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhIGJvb2xlYW4gb24gd2hldGhlciB0aGUgc2lnbmF0dXJlIGlzIHRydWUgb3Igbm90Ci8vIGxvZy5sb2coJ2NyeXB0by12ZXJpZnlSU0EnLCBpc3ZhbGlkKTsKbyhlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjcnlwdG8tdmVyaWZ5UlNBJywgZXJyKTsKaShlKX0pfSl9KX19LHtrZXk6ImVuY3J5cHRBRVMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt5LmxvZygiZW5jcnlwdEFFUzprZXkiLGUpLHkubG9nKCJlbmNyeXB0QUVTOmRhdGEiLHQpLHkubG9nKCJlbmNyeXB0QUVTOml2IixyKTt2YXIgbj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7bi5faW1wb3J0QUVTa2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7bi5fY3J5cHRvLnN1YnRsZS5lbmNyeXB0KHtuYW1lOiJBRVMtQ0JDIiwKLy9Eb24ndCByZS11c2UgaW5pdGlhbGl6YXRpb24gdmVjdG9ycyEKLy9BbHdheXMgZ2VuZXJhdGUgYSBuZXcgaXYgZXZlcnkgdGltZSB5b3VyIGVuY3J5cHQhCml2OnJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQooMCxsLmVuY29kZVVURjgpKHQpKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgZW5jcnlwdGVkIGRhdGEKLy8gbG9nLmxvZygnY3J5cHRvLWVuY3J5cHRBRVMnLCBuZXcgVWludDhBcnJheShlbmNyeXB0ZWQpKTsKbyhuZXcgVWludDhBcnJheShlKSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY3J5cHRvLWVuY3J5cHRBRVMnLCBlcnIpOwppKGUpfSl9KX0pfX0se2tleToiZGVjcnlwdEFFUyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3kubG9nKCJkZWNyeXB0QUVTOmtleSIsZSkseS5sb2coImRlY3J5cHRBRVM6ZGF0YSIsdCkseS5sb2coImRlY3J5cHRBRVM6aXYiLHIpO3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtuLl9pbXBvcnRBRVNrZXkoZSkudGhlbihmdW5jdGlvbihlKXtuLl9jcnlwdG8uc3VidGxlLmRlY3J5cHQoe25hbWU6IkFFUy1DQkMiLGl2OnJ9LGUsLy9mcm9tIGdlbmVyYXRlS2V5IG9yIGltcG9ydEtleSBhYm92ZQp0KS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PSgwLGwuZGVjb2RlVVRGOCkobmV3IFVpbnQ4QXJyYXkoZSkpO3kubG9nKCJjcnlwdG8tZGVjcnlwdEFFUyIsdCksbyh0KX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjcnlwdG8tZGVjcnlwdEFFUycsIGVycik7CmkoZSl9KX0pfSl9fSx7a2V5OiJoYXNoSE1BQyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt5LmxvZygiaGFzaEhNQUM6a2V5IixlKSx5LmxvZygiaGFzaEhNQUM6ZGF0YSIsdCk7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihuLGkpeyJzdHJpbmciIT10eXBlb2YgdCYmKHQ9KDAsby5kZWZhdWx0KSh0KSx5LmxvZygiQ29udmVydGluZyBoYXNoSE1BQyBpbnB1cmVkIERBVEEiKSx5LmxvZygiSEhhc2hITUFDOiIsdCkpLHIuX2ltcG9ydEhNQUNrZXkoZSkudGhlbihmdW5jdGlvbihlKXtyLl9jcnlwdG8uc3VidGxlLnNpZ24oe25hbWU6IkhNQUMifSxlLC8vZnJvbSBnZW5lcmF0ZUtleSBvciBpbXBvcnRLZXkgYWJvdmUKKDAsbC5lbmNvZGVVVEY4KSh0KSkudGhlbihmdW5jdGlvbihlKXt5LmxvZygiSGFzaEhNQUMgc2lnbmF0dXJlOiIsbmV3IFVpbnQ4QXJyYXkoZSkpLAovLyBsb2cubG9nKCdjcnlwdG8taGFzaEhNQUMnLCBzaWduYXR1cmUpOwovL3JldHVybnMgYW4gQXJyYXlCdWZmZXIgY29udGFpbmluZyB0aGUgc2lnbmF0dXJlCm4obmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2NyeXB0by1oYXNoSE1BQycsIGVycik7CmkoZSl9KX0pfSl9fSx7a2V5OiJ2ZXJpZnlITUFDIix2YWx1ZTpmdW5jdGlvbihlLHQscil7eS5sb2coInZlcmlmeUhNQUM6a2V5IixlKSx5LmxvZygidmVyaWZ5SE1BQzpkYXRhIix0KSx5LmxvZygidmVyaWZ5SE1BQzpzaWduYXR1cmUiLHIpO3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24oaSxzKXtuLl9pbXBvcnRITUFDa2V5KGUpLnRoZW4oZnVuY3Rpb24oZSl7InN0cmluZyIhPXR5cGVvZiB0JiYodD0oMCxvLmRlZmF1bHQpKHQpLHkubG9nKCJDb252ZXJ0aW5nIHZlcmlmeUhNQUMgaW5wdXRlZCBEQVRBOiIsdCkpLG4uX2NyeXB0by5zdWJ0bGUudmVyaWZ5KHtuYW1lOiJITUFDIn0sZSwvL2Zyb20gZ2VuZXJhdGVLZXkgb3IgaW1wb3J0S2V5IGFib3ZlCnIsLy9BcnJheUJ1ZmZlciBvZiB0aGUgc2lnbmF0dXJlCigwLGwuZW5jb2RlVVRGOCkodCkpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhIGJvb2xlYW4gb24gd2hldGhlciB0aGUgc2lnbmF0dXJlIGlzIHRydWUgb3Igbm90Ci8vIGxvZy5sb2coJ2NyeXB0by12ZXJpZnlITUFDJywgaXN2YWxpZCk7CnkubG9nKCJ2ZXJpZnlITUFDIHJlc3VsdCIsZSksZT9pKGUpOnMoZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJjcnlwdG8tdmVyaWZ5SE1BQyIsZSkscyhlKX0pfSl9KX19LHtrZXk6ImdlbmVyYXRlUlNBS2V5UGFpciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e307cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXtlLl9jcnlwdG8uc3VidGxlLmdlbmVyYXRlS2V5KHtuYW1lOiJSU0EtUFNTIixtb2R1bHVzTGVuZ3RoOjIwNDgsLy9jYW4gYmUgMTAyNCwgMjA0OCwgb3IgNDA5NgpwdWJsaWNFeHBvbmVudDpuZXcgVWludDhBcnJheShbMSwwLDFdKSxoYXNoOntuYW1lOiJTSEEtMjU2In19LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJzaWduIiwidmVyaWZ5Il0pLnRoZW4oZnVuY3Rpb24obyl7Ci8vcmV0dXJucyBhIGtleXBhaXIgb2JqZWN0Ci8vIGxvZy5sb2coa2V5KTsKZS5fY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoInNwa2kiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCm8ucHVibGljS2V5KS50aGVuKGZ1bmN0aW9uKHIpewovL3JldHVybnMgdGhlIGV4cG9ydGVkIGtleSBkYXRhCi8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCnJldHVybiB0LnB1YmxpYz1uZXcgVWludDhBcnJheShyKSxlLl9jcnlwdG8uc3VidGxlLmV4cG9ydEtleSgicGtjczgiLG8ucHJpdmF0ZUtleSl9KS50aGVuKGZ1bmN0aW9uKGUpe3QucHJpdmF0ZT1uZXcgVWludDhBcnJheShlKSwKLy8gbG9nLmxvZygnY3J5cHRvLWdlbmVyYXRlUlNBS2V5UGFpcicsIGtleVBhaXIpOwpyKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcihlKSxuKGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKGUpLG4oZSl9KX0pfX0se2tleToiZ2VuZXJhdGVJViIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IFVpbnQ4QXJyYXkoMTYpO3JldHVybiBlLl9jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHQpLHR9fSx7a2V5OiJnZW5lcmF0ZVJhbmRvbSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IFVpbnQ4QXJyYXkoMzIpO2UuX2NyeXB0by5nZXRSYW5kb21WYWx1ZXModCk7Ci8vIGFkZCBpbiB0aGUgZmlyc3QgNCBieXRlcyBvZiB0aGUgYXJyYXkgdGhlIGJ5dGVzIGV4dHJhY3RlZCBwcmV2aW91c2x5Owpmb3IodmFyIHI9RGF0ZS5ub3coKSxuPSgwLGwuZW5jb2RlVVRGOCkoci50b1N0cmluZygpKSxvPW4uc2xpY2Uobi5sZW5ndGgtNCxuLmxlbmd0aCksaT0wO2k8NDtpKyspdFtpXT1vW2ldO3JldHVybiB0fX0se2tleToiZ2VuZXJhdGVQTVMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBVaW50OEFycmF5KDQ4KTtyZXR1cm4gZS5fY3J5cHRvLmdldFJhbmRvbVZhbHVlcyh0KSx0fX0se2tleToiZ2VuZXJhdGVNYXN0ZXJTZWNyZXQiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihuLG8pe3ZhciBpPW5ldyBVaW50OEFycmF5KDQ4KSxzPXQ7ci5fZGlnZXN0KGUpLnRoZW4oZnVuY3Rpb24oZSl7ci5oYXNoSE1BQyhlLHMpLnRoZW4oZnVuY3Rpb24odCl7Ci8vY29weSB0aGUgZmlyc3QgMzIgYnl0ZXMgaW50byB0aGUga2V5CmZvcih2YXIgbj0wO248MzI7bisrKWlbbl09dFtuXTtyZXR1cm4gci5oYXNoSE1BQyhlLHMrdCl9KS50aGVuKGZ1bmN0aW9uKGUpewovL2NvcHkgdGhlIGZpcnN0IDE2IGJ5dGVzIHRvIHRoZSBrZXkgcmVtYWluaW5nIDE2IGJ5dGVzCmZvcih2YXIgdD0wO3Q8MTY7dCsrKWlbdCszMl09ZVt0XTsKLy8gbG9nLmxvZygnY3J5cHRvLWdlbmVyYXRlTWFzdGVyU2VjcmV0Jywga2V5KTsKbihpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdjcnlwdG8tZ2VuZXJhdGVNYXN0ZXJTZWNyZXQnLCBlcnIpOwpvKGUpfSl9KX0pfX0se2tleToiZ2VuZXJhdGVLZXlzIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obixvKXt2YXIgaT1bXSxzPXQ7Ci8vIGl0ZXJhdGUgNCB0aW1lcyB0byBvYnRhaW4gYSAxMDI0IGtleSBzaXplCnIuaGFzaEhNQUMoZSxzKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBpLnB1c2godCksci5oYXNoSE1BQyhlLHMrdCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBpLnB1c2godCksci5oYXNoSE1BQyhlLHMrdCl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBpLnB1c2godCksci5oYXNoSE1BQyhlLHMrdCl9KS50aGVuKGZ1bmN0aW9uKGUpe2kucHVzaChlKSwKLy8gbG9nLmxvZygnY3J5cHRvLWdlbmVyYXRlS2V5cycsIGtleSk7Cm4oaSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygnY3J5cHRvLWdlbmVyYXRlS2V5cycsIGVycik7Cm8oZSl9KX0pfX0se2tleToiX2ltcG9ydFJTQXNpZ25LZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9jcnlwdG8uc3VidGxlLmltcG9ydEtleSgicGtjczgiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCmUsey8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwpuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsic2lnbiJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKLy8gbG9nLmxvZygnY3J5cHRvLV9pbXBvcnRSU0FzaWduS2V5JywgcHJpdmF0ZUtleSk7CnIoZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJjcnlwdG8tX2ltcG9ydFJTQXNpZ25LZXkiLGUpLG4oZSl9KX0pfX0se2tleToiX2ltcG9ydFJTQXZlcmlmeUtleSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJzcGtpIiwvL2NhbiBiZSAnandrJyAocHVibGljIG9yIHByaXZhdGUpLCAnc3BraScgKHB1YmxpYyBvbmx5KSwgb3IgJ3BrY3M4JyAocHJpdmF0ZSBvbmx5KQplLHsvL3RoZXNlIGFyZSB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiUlNBU1NBLVBLQ1MxLXYxXzUiLGhhc2g6e25hbWU6IlNIQS0yNTYifX0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbInZlcmlmeSJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKLy8gbG9nLmxvZygnY3J5cHRvLV9pbXBvcnRSU0F2ZXJpZnlLZXknLCBwdWJsaWNLZXkpOwpyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcigiY3J5cHRvLV9pbXBvcnRSU0F2ZXJpZnlLZXkiLGUpLG4oZSl9KX0pfX0se2tleToiX2ltcG9ydFJTQWVuY3J5cHRLZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9jcnlwdG8uc3VidGxlLmltcG9ydEtleSgic3BraSIsLy9jYW4gYmUgJ2p3aycgKHB1YmxpYyBvciBwcml2YXRlKSwgJ3Nwa2knIChwdWJsaWMgb25seSksIG9yICdwa2NzOCcgKHByaXZhdGUgb25seSkKZSx7Ly90aGVzZSBhcmUgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IlJTQS1PQUVQIixoYXNoOntuYW1lOiJTSEEtMjU2In19LCEwLC8vd2hldGhlciB0aGUga2V5IGlzIGV4dHJhY3RhYmxlIChpLmUuIGNhbiBiZSB1c2VkIGluIGV4cG9ydEtleSkKWyJlbmNyeXB0Il0pLnRoZW4oZnVuY3Rpb24oZSl7Ci8vcmV0dXJucyBhIHB1YmxpY0tleSAob3IgcHJpdmF0ZUtleSBpZiB5b3UgYXJlIGltcG9ydGluZyBhIHByaXZhdGUga2V5KQovLyBsb2cubG9nKCdjcnlwdG8tX2ltcG9ydFJTQWVuY3J5cHRLZXknLCBwdWJsaWNLZXkpOwpyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcigiY3J5cHRvLV9pbXBvcnRSU0FlbmNyeXB0S2V5IixlLm5hbWUpLG4oZSl9KX0pfX0se2tleToiX2ltcG9ydFJTQWRlY3J5cHRLZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9jcnlwdG8uc3VidGxlLmltcG9ydEtleSgicGtjczgiLC8vY2FuIGJlICdqd2snIChwdWJsaWMgb3IgcHJpdmF0ZSksICdzcGtpJyAocHVibGljIG9ubHkpLCBvciAncGtjczgnIChwcml2YXRlIG9ubHkpCmUsey8vdGhlc2UgYXJlIHRoZSBhbGdvcml0aG0gb3B0aW9ucwpuYW1lOiJSU0EtT0FFUCIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsiZGVjcnlwdCJdKS50aGVuKGZ1bmN0aW9uKGUpewovL3JldHVybnMgYSBwdWJsaWNLZXkgKG9yIHByaXZhdGVLZXkgaWYgeW91IGFyZSBpbXBvcnRpbmcgYSBwcml2YXRlIGtleSkKLy8gbG9nLmxvZygnY3J5cHRvLV9pbXBvcnRSU0FkZWNyeXB0S2V5JywgcHJpdmF0ZUtleSk7CnIoZSl9KS5jYXRjaChmdW5jdGlvbihlKXt5LmVycm9yKCJjcnlwdG8tX2ltcG9ydFJTQWRlY3J5cHRLZXkiLGUpLG4oZSl9KX0pfX0se2tleToiY29uY2F0UE1Td2l0aFJhbmRvbXMiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXsKLy8gYWRkIFByZW1hc3RlcktleQpmb3IodmFyIG49bmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgrdC5sZW5ndGgrci5sZW5ndGgpLG89MDtvPGUubGVuZ3RoO28rKyluW29dPWVbb107Ci8vYWRkIHRvIHJhbmRvbQpmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyluW2krZS5sZW5ndGhdPWVbaV07Ci8vYWRkIGZyb20gcmFuZG9tCmZvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKW5bcytlLmxlbmd0aCt0Lmxlbmd0aF09ZVtzXTtyZXR1cm4gbn19LHtrZXk6Il9nZW5lcmF0ZTI1NmJpdEtleSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IFVpbnQ4QXJyYXkoMzIpO3JldHVybiBlLl9jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHQpLHR9fSx7a2V5OiJfaW1wb3J0SE1BQ2tleSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2RpZ2VzdChlKS50aGVuKGZ1bmN0aW9uKGUpe3QuX2NyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCJyYXciLC8vY2FuIGJlICdqd2snIG9yICdyYXcnCmUsey8vdGhpcyBpcyB0aGUgYWxnb3JpdGhtIG9wdGlvbnMKbmFtZToiSE1BQyIsaGFzaDp7bmFtZToiU0hBLTI1NiJ9LC8vY2FuIGJlICdTSEEtMScsICdTSEEtMjU2JywgJ1NIQS0zODQnLCBvciAnU0hBLTUxMicKbGVuZ3RoOjI1Nn0sITAsLy93aGV0aGVyIHRoZSBrZXkgaXMgZXh0cmFjdGFibGUgKGkuZS4gY2FuIGJlIHVzZWQgaW4gZXhwb3J0S2V5KQpbInNpZ24iLCJ2ZXJpZnkiXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIHRoZSBzeW1tZXRyaWMga2V5Ci8vIGxvZy5sb2coJ2NyeXB0by1faW1wb3J0SE1BQ2tleScsIGtleSk7CnIoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSl9KX0pfX0se2tleToiX2RpZ2VzdCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3QuX2NyeXB0by5zdWJ0bGUuZGlnZXN0KHtuYW1lOiJTSEEtMjU2In0sZSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIHRoZSBoYXNoIGFzIGFuIEFycmF5QnVmZmVyCi8vIGxvZy5sb2coJ2NyeXB0by1kaWdlc3QnLCBuZXcgVWludDhBcnJheShoYXNoKSk7CnIobmV3IFVpbnQ4QXJyYXkoZSkpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcihlKSxuKGUpfSl9KX19LHtrZXk6Il9pbXBvcnRBRVNrZXkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Ll9jcnlwdG8uc3VidGxlLmltcG9ydEtleSgicmF3IiwvL2NhbiBiZSAnandrJyBvciAncmF3JwplLHsvL3RoaXMgaXMgdGhlIGFsZ29yaXRobSBvcHRpb25zCm5hbWU6IkFFUy1DQkMifSwhMCwvL3doZXRoZXIgdGhlIGtleSBpcyBleHRyYWN0YWJsZSAoaS5lLiBjYW4gYmUgdXNlZCBpbiBleHBvcnRLZXkpClsiZW5jcnlwdCIsImRlY3J5cHQiXSkudGhlbihmdW5jdGlvbihlKXsKLy9yZXR1cm5zIHRoZSBzeW1tZXRyaWMga2V5Ci8vIGxvZy5sb2coJ2NyeXB0by1pbXBvcnRBRVNrZXknLCBrZXkpOwpyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7eS5lcnJvcigiY3J5cHRvLWltcG9ydEFFU2tleSIsZSksbihlKX0pfSl9fSx7a2V5OiJfc2hhMjU2Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9bmV3IFRleHRFbmNvZGVyKCJ1dGYtOCIpLmVuY29kZShlKTtyZXR1cm4gdC5fY3J5cHRvLnN1YnRsZS5kaWdlc3QoIlNIQS0yNTYiLHIpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2hleChlKX0pfX0se2tleToiX2hleCIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9bmV3IERhdGFWaWV3KGUpLG49MDtuPHIuYnl0ZUxlbmd0aDtuKz00KXsKLy8gVXNpbmcgZ2V0VWludDMyIHJlZHVjZXMgdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIG5lZWRlZCAod2UgcHJvY2VzcyA0IGJ5dGVzIGVhY2ggdGltZSkKdmFyIG89ci5nZXRVaW50MzIobiksaT1vLnRvU3RyaW5nKDE2KSxzPSgiMDAwMDAwMDAiK2kpLnNsaWNlKC0iMDAwMDAwMDAiLmxlbmd0aCk7dC5wdXNoKHMpfQovLyBKb2luIGFsbCB0aGUgaGV4IHN0cmluZ3MgaW50byBvbmUKcmV0dXJuIHQuam9pbigiIil9fV0pLENyeXB0b30oKTt0LmRlZmF1bHQ9aCxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0OTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjsKLy8gTWFyc2hhbHMgYSBzdHJpbmcgdG8gVWludDhBcnJheS4KZnVuY3Rpb24gZW5jb2RlVVRGOChlKXtmb3IodmFyIHQ9MCxyPW5ldyBVaW50OEFycmF5KDQqZS5sZW5ndGgpLG49MDtuIT1lLmxlbmd0aDtuKyspe3RyeXtlLmNoYXJDb2RlQXQobil9Y2F0Y2goZSl7cmV0dXJufXZhciBvPWUuY2hhckNvZGVBdChuKTtpZihvPDEyOClyW3QrK109bztlbHNle2lmKG88MjA0OClyW3QrK109bz4+NnwxOTI7ZWxzZXtpZihvPjU1Mjk1JiZvPDU2MzIwKXtpZigrK249PWUubGVuZ3RoKXRocm93IlVURi04IGVuY29kZTogaW5jb21wbGV0ZSBzdXJyb2dhdGUgcGFpciI7dmFyIGk9ZS5jaGFyQ29kZUF0KG4pO2lmKGk8NTYzMjB8fGk+NTczNDMpdGhyb3ciVVRGLTggZW5jb2RlOiBzZWNvbmQgY2hhciBjb2RlIDB4IitpLnRvU3RyaW5nKDE2KSsiIGF0IGluZGV4ICIrbisiIGluIHN1cnJvZ2F0ZSBwYWlyIG91dCBvZiByYW5nZSI7bz02NTUzNisoKDEwMjMmbyk8PDEwKSsoMTAyMyZpKSxyW3QrK109bz4+MTh8MjQwLHJbdCsrXT1vPj4xMiY2M3wxMjh9ZWxzZQovLyBjIDw9IDB4ZmZmZgpyW3QrK109bz4+MTJ8MjI0O3JbdCsrXT1vPj42JjYzfDEyOH1yW3QrK109NjMmb3wxMjh9fXJldHVybiByLnN1YmFycmF5KDAsdCl9Ci8vIFVubWFyc2hhbHMgYW4gVWludDhBcnJheSB0byBzdHJpbmcuCmZ1bmN0aW9uIGRlY29kZVVURjgoZSl7Zm9yKHZhciB0PSIiLHI9MDtyPGUubGVuZ3RoOyl7dmFyIG49ZVtyKytdO2lmKG4+MTI3KXtpZihuPjE5MSYmbjwyMjQpe2lmKHI+PWUubGVuZ3RoKXRocm93IlVURi04IGRlY29kZTogaW5jb21wbGV0ZSAyLWJ5dGUgc2VxdWVuY2UiO249KDMxJm4pPDw2fDYzJmVbcl19ZWxzZSBpZihuPjIyMyYmbjwyNDApe2lmKHIrMT49ZS5sZW5ndGgpdGhyb3ciVVRGLTggZGVjb2RlOiBpbmNvbXBsZXRlIDMtYnl0ZSBzZXF1ZW5jZSI7bj0oMTUmbik8PDEyfCg2MyZlW3JdKTw8Nnw2MyZlWysrcl19ZWxzZXtpZighKG4+MjM5JiZuPDI0OCkpdGhyb3ciVVRGLTggZGVjb2RlOiB1bmtub3duIG11bHRpYnl0ZSBzdGFydCAweCIrbi50b1N0cmluZygxNikrIiBhdCBpbmRleCAiKyhyLTEpO2lmKHIrMj49ZS5sZW5ndGgpdGhyb3ciVVRGLTggZGVjb2RlOiBpbmNvbXBsZXRlIDQtYnl0ZSBzZXF1ZW5jZSI7bj0oNyZuKTw8MTh8KDYzJmVbcl0pPDwxMnwoNjMmZVsrK3JdKTw8Nnw2MyZlWysrcl19KytyfWlmKG48PTY1NTM1KXQrPVN0cmluZy5mcm9tQ2hhckNvZGUobik7ZWxzZXtpZighKG48PTExMTQxMTEpKXRocm93IlVURi04IGRlY29kZTogY29kZSBwb2ludCAweCIrbi50b1N0cmluZygxNikrIiBleGNlZWRzIFVURi0xNiByZWFjaCI7bi09NjU1MzYsdCs9U3RyaW5nLmZyb21DaGFyQ29kZShuPj4xMHw1NTI5NiksdCs9U3RyaW5nLmZyb21DaGFyQ29kZSgxMDIzJm58NTYzMjApfX1yZXR1cm4gdH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5lbmNvZGVVVEY4PWVuY29kZVVURjgsdC5kZWNvZGVVVEY4PWRlY29kZVVURjh9LC8qIDQ5NCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDk3KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigyKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDcpLGQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShsKSxwPXIoMTQpLHk9cigxMDApLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSx2PWQuZ2V0TG9nZ2VyKCJsb2FkZXIiKSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTG9hZGVyKGUsdCxyKXtpZigoMCx1LmRlZmF1bHQpKHRoaXMsTG9hZGVyKSwhdCl0aHJvdyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBUaGUgZGVzY3JpcHRvciBuZWVkIHRvIGtub3cgdGhlIHJ1bnRpbWUgY29uZmlndXJhdGlvbiIpO2lmKCFyKXRocm93IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBkZXNjcmlwdG9yIG5lZWQgdG8ga25vdyB0aGUgcnVudGltZSBEZXNjcmlwdG9yIGluc3RhbmNlIik7dGhpcy5sb2c9dix0aGlzLnJ1bnRpbWVDb25maWd1cmF0aW9uPXQsdGhpcy5kZXNjcmlwdG9ycz1yfS8qKgogICAqIFNldCBydW50aW1lIHVybAogICAqIEBwYXJhbSAge3N0cmluZ30gdmFsdWUgcnVudGltZVVSTAogICAqLwpyZXR1cm4oMCxmLmRlZmF1bHQpKExvYWRlcixbe2tleToibG9hZEh5cGVydHkiLC8qKgogICAgICogRGVwbG95IEh5cGVydHkgZnJvbSBDYXRhbG9ndWUgVVJMCiAgICAgKgogICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL3RyZWUvbWFzdGVyL2RhdGFtb2RlbC9jb3JlL2FkZHJlc3MKICAgICAqCiAgICAgKiBAcGFyYW0ge1VSTC5IeXBlcnR5Q2F0YWxvZ3VlVVJMfSBoeXBlcnR5Q2F0YWxvZ3VlVVJMIC0gVGhlIENhdGFsb2d1ZSBVUkwgdXNlZCB0byBpZGVudGlmeSBkZXNjcmlwdG9ycyBpbiB0aGUgQ2F0YWxvZ3VlLgogICAgICogQHBhcmFtIHtib29sZWFufFVSTC5IeXBlcnR5VVJMfSBbcmV1c2VVUkw9ZmFsc2VdIHJldXNlVVJMIC0gcmV1c2VVUkwgaXMgdXNlZCB0byByZXVzZSB0aGUgaHlwZXJ0eVVSTCBwcmV2aW91c2x5IHJlZ2lzdHJlZCwgYnkgZGVmYXVsdCB0aGUgcmV1c2UgaXMgZGlzYWJsZWQ7CiAgICAgKiBAcGFyYW0ge1VSTH0gYXBwVVJMIC0gdGhlIGFwcCB1cmwgb3JpZ2luIGFkZHJlc3M7CiAgICAgKiBAcGFyYW0ge29iamVjdH0gSWRwQ29uc3RyYWludCAtIGNvbnN0cmFpbnRzIHRvIGJlIHVzZWQgd2hlbiBzZWxlY3RpbmcgdGhlIGlkZW50aXR5IHRvIGJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgSHlwZXJ0eSBpbmNsdWRpbmcgb3JpZ2luLCBpZHAsIGFuZCBpZEhpbnQuCiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxCb29sZWFuLCBFcnJvcj59IHRoaXMgaXMgUHJvbWlzZSBhbmQgcmV0dXJucyB0cnVlIGlmIGFsbCBjb21wb25lbnRzIGFyZSBsb2FkZWQgd2l0aCBzdWNjZXNzIG9yIGFuIGVycm9yIGlmIHNvbWVvbmUgZmFpbHMuCiAgICAgKgogICAgICogQG1lbWJlck9mIExvYWRlcgogICAgICovCnZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0scj10aGlzLG49YXJndW1lbnRzWzJdO2FyZ3VtZW50c1szXTtpZighdGhpcy5fcmVhZHlUb1VzZSgpKXJldHVybiExO2lmKCFlKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyXSBIeXBlcnR5IGRlc2NyaXB0b3IgdXJsIHBhcmFtZXRlciBpcyBuZWVkZWQiKTtyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihpLHMpe3ZhciBhPXZvaWQgMCx1PXZvaWQgMCxjPXZvaWQgMCxmPXZvaWQgMCxsPSExLGQ9ZnVuY3Rpb24oZSl7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIFNvbWV0aGluZyBmYWlsZWQgb24gdGhlIGRlcGxveSBoeXBlcnR5OiAiLGUpLHMoZSl9LHk9ZnVuY3Rpb24oZSl7bD0hMCxzKGUpfTsKLy8gR2V0IEh5cGVydHkgZGVzY3JpcHRvcgovLyBUT0RPOiB0aGUgcmVxdWVzdCBNb2R1bGUgc2hvdWxkIGJlIGNoYW5nZWQsCi8vIGJlY2F1c2UgYXQgdGhpcyBtb21lbnQgaXQgaXMgaW5jb21wYXRpYmxlIHdpdGggbm9kZWpzOwovLyBQcm9iYWJseSB3ZSBuZWVkIHRvIHBhc3MgYSBmYWN0b3J5IGxpa2Ugd2UgZG8gZm9yIHNhbmRib3hlczsKcmV0dXJuIHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAtLS0tLS0tLS0tLS0tLS0tLS0gSHlwZXJ0eSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKSx2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gR2V0IGh5cGVydHkgZGVzY3JpcHRvciBmb3IgOiIsZSksci5kZXNjcmlwdG9ycy5nZXRIeXBlcnR5RGVzY3JpcHRvcihlKS50aGVuKGZ1bmN0aW9uKGUpewovLyBhdCB0aGlzIHBvaW50LCB3ZSBoYXZlIGNvbXBsZXRlZCAic3RlcCAyIGFuZCAzIiBhcyBzaG93biBpbiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kCnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAxOiByZXR1cm4gaHlwZXJ0eSBkZXNjcmlwdG9yIiksCi8vIGh5cGVydHkgY29udGFpbnMgdGhlIGZ1bGwgcGF0aCBvZiB0aGUgY2F0YWxvZ3VlIFVSTCwgZS5nLgovLyBjYXRhbG9ndWUucmV0aGluay5ldS8ud2VsbC1rbm93bi8uLi4uLi4uLi4uCmM9ZTt2YXIgdD1lLnNvdXJjZVBhY2thZ2VVUkw7cmV0dXJuIi9zb3VyY2VQYWNrYWdlIj09PXQ/ZS5zb3VyY2VQYWNrYWdlOnIucnVudGltZUNhdGFsb2d1ZS5nZXRTb3VyY2VQYWNrYWdlRnJvbVVSTCh0KX0seSkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAyOiByZXR1cm4gaHlwZXJ0eSBzb3VyY2UgY29kZSIpLAovLyBhdCB0aGlzIHBvaW50LCB3ZSBoYXZlIGNvbXBsZXRlZCAic3RlcCA0IGFuZCA1IiBhcyBzaG93biBpbiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kCmY9ZTtyZXR1cm4hMH0seSkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAzOiByZXR1cm4gcG9saWN5IGVuZ2luZSByZXN1bHQiK2UpOwovLyB0aGlzIHdpbGwgcmV0dXJuIHRoZSBzYW5kYm94IG9yIG9uZSBwcm9taXNlIHRvIGdldFNhbmRib3g7CnJldHVybiByLnJlZ2lzdHJ5LmdldEFwcFNhbmRib3goKX0seSkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA0OiByZXR1cm4gdGhlIHNhbmRib3giLGUpLGUpfSxmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA0LjE6IFRyeSB0byByZWdpc3RlciBhIG5ldyBzYW5kYm94Iik7Ci8vIGNoZWNrIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVkIGZvciB0aGlzIGh5cGVydHkgZGVzY3JpcHRvciB1cmw7Ci8vIE1ha2UgU3RlcHMgeHh4IC0tLSB4eHgKLy8gSW5zdGFudGlhdGUgdGhlIFNhbmRib3gKdmFyIHQ9e307cmV0dXJuIGMmJmMuaGFzT3duUHJvcGVydHkoImNhcGFiaWxpdGllcyIpJiYodD1jLnN0dWJDYXBhYmlsaXRpZXMpLHIuX3J1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3godCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGRMaXN0ZW5lcigiKiIsZnVuY3Rpb24oZSl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUpfSksZX0pfSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDU6IHJldHVybiBzYW5kYm94IGFuZCByZWdpc3RlciIpLHU9ZTsKLy9kZWJ1Z2dlcjsKcmV0dXJuIHIuX2FkZHJlc3NBbGxvY2F0aW9uLmNyZWF0ZShyLl9yZWdpc3RyeS5fZG9tYWluLDEsYywiaHlwZXJ0eSIsdCl9LHkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIWwmJih2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNjogcmV0dXJuIHRoZSBhZGRyZXNzZXMgZm9yIHRoZSBoeXBlcnR5Iix0KSxyLnJlZ2lzdHJ5LnJlZ2lzdGVySHlwZXJ0eSh1LGUsYyx0LG4pKX0seSkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA3OiByZWdpc3RyYXRpb24gcmVzdWx0IixlKSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAxNiBvZiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KYT1lLnVybDsKLy8gRXh0ZW5kIG9yaWdpbmFsIGh5cGVydHkgY29uZmlndXJhdGlvbjsKdmFyIHQ9e307aWYoISgwLHAuZW1wdHlPYmplY3QpKGMuY29uZmlndXJhdGlvbikpdHJ5e3Q9KDAsby5kZWZhdWx0KSh7fSxKU09OLnBhcnNlKGMuY29uZmlndXJhdGlvbikpfWNhdGNoKGUpe3Q9Yy5jb25maWd1cmF0aW9ufXQucnVudGltZVVSTD1yLl9ydW50aW1lVVJMLGUucDJwSGFuZGxlciYmKHQucDJwSGFuZGxlcj1lLnAycEhhbmRsZXIsdC5wMnBSZXF1ZXN0ZXI9ZS5wMnBSZXF1ZXN0ZXIpOwovLyBXZSB3aWxsIGRlcGxveSB0aGUgY29tcG9uZW50IC0gc3RlcCAxNyBvZiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KdHJ5e3JldHVybiB1LmRlcGxveUNvbXBvbmVudChmLnNvdXJjZUNvZGUsYSx0KX1jYXRjaChlKXt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gRXJyb3Igb24gZGVwbG95IGNvbXBvbmVudDoiLGUpLHMoZSl9fSx5KS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDg6IERlcGxveSBjb21wb25lbnQgc3RhdHVzIGZvciBoeXBlcnR5OiAiLGUpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDE5IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LWh5cGVydHkubWQgcmlnaHQgbm93LgovLyBBZGQgdGhlIG1lc3NhZ2UgYnVzIGxpc3RlbmVyIHRvIHRoZSBhcHBTYW5kYm94IG9yIGh5cGVydFNhbmRib3g7CnIubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihhLGZ1bmN0aW9uKGUpe3UucG9zdE1lc3NhZ2UoZSl9KTsKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCAyMCBvZiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1oeXBlcnR5Lm1kIHJpZ2h0IG5vdy4KdmFyIHQ9e3J1bnRpbWVIeXBlcnR5VVJMOmEsc3RhdHVzOmV9O3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBIeXBlcnR5OiAiLHQpLGkodCksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMjEgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktaHlwZXJ0eS5tZCByaWdodCBub3cuCnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSAtLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIpfSx5KS5jYXRjaChkKX0pfX0se2tleToibG9hZFN0dWIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZighdGhpcy5fcmVhZHlUb1VzZSgpKXJldHVybiExO2lmKCFlKXRocm93IG5ldyBFcnJvcigiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXVByb3RvU3R1YiBkZXNjcmlwdG9yIHVybCBwYXJhbWV0ZXIgaXMgbmVlZGVkIik7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24obixpKXsKLy8gdG8gYW5hbHlzZSBpZiBkb21haW4gZm9yIHAycEhhbmRsZXJzIHNob3VsZCBiZSBzb21ldGhpbmcgZWxzZSBhbmQgbm90IHRoZSBkZWZhdWx0IGRvbWFpbiBpdHNlbGYKdmFyIHM9KDAscC5kaXZpZGVVUkwpKGUpLmRvbWFpbjtzfHwocz1lKTt2YXIgYT12b2lkIDAsdT12b2lkIDAsYz12b2lkIDAsZj12b2lkIDAsbD0hMSxkPXZvaWQgMCx5PWZ1bmN0aW9uKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXVNvbWV0aGluZyBmYWlsZWQgb24gdGhlIGRlcGxveSBvZiBwcm90b2NvbHN0dWI6ICIsZSksaShlKX0saD1mdW5jdGlvbihlKXtsPSEwLGkoZSl9LGc9dm9pZCAwLGI9e307di5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdIHN0YXJ0aW5nIGxvYWRpbmcgZm9yICIsZSwiIHdpdGggcDJwY29uZmlnICIsdCksdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdRGlzY292ZXIgb3IgQ3JlYXRlIGEgbmV3IFByb3RvU3R1YiBmb3IgZG9tYWluOiAiLHMpOwovLyBzdGVwIDIgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnRyeXtpZih0KWlmKHQuaGFzT3duUHJvcGVydHkoImlzSGFuZGxlclN0dWIiKSYmdC5pc0hhbmRsZXJTdHViKQovLyBzdGVwIDYgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCiEwLGQ9ci5ydW50aW1lVVJMLGc9ci5yZWdpc3RyeS5kaXNjb3ZlclAyUFN0dWIoKTtlbHNleyEwO3ZhciBfPXQucmVtb3RlUnVudGltZVVSTDtkPV8sCi8vIHN0ZXAgNCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKLy8gc3RlcCA1IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApnPXIucmVnaXN0cnkuZGlzY292ZXJQMlBTdHViKF8pfWVsc2UKLy8gc3RlcCAzIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApkPXMsZz1yLnJlZ2lzdHJ5LmRpc2NvdmVyUHJvdG9zdHViKHMpOwovLyBJcyByZWdpc3RlZD8Kdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdMS4gUHJvdG8gU3R1YiBEaXNjb3ZlcmVkIGZvciAiLGUsIjogIixnKSwKLy8gc3RlcCAyMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKbihnKSx2LmluZm8oIiBbUnVudGltZS5Mb2FkZXJdLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKX1jYXRjaChnKXsKLy8gaXMgbm90IHJlZ2lzdGVkPwp2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0xLiBQcm90byBTdHViIG5vdCBmb3VuZCAiK2cpLAovLyBzdGVwIDggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnIuZGVzY3JpcHRvcnMuZ2V0U3R1YkRlc2NyaXB0b3IoZSkudGhlbihmdW5jdGlvbihlKXtpZihsKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTIuIHJldHVybiB0aGUgUHJvdG9TdHViIGRlc2NyaXB0b3IiKSwKLy8gc3RlcCA5IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp1PWU7dmFyIHQ9ZS5zb3VyY2VQYWNrYWdlVVJMO3JldHVybiIvc291cmNlUGFja2FnZSI9PT10P2Uuc291cmNlUGFja2FnZTpyLnJ1bnRpbWVDYXRhbG9ndWUuZ2V0U291cmNlUGFja2FnZUZyb21VUkwodCl9LGgpLmNhdGNoKHkpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIEFjY29yZGluZyB0byBkZWJ1ZywgaXQgc2VlbXMgUnVudGltZUNhdGFsb2d1ZSBkb2VzIG5vdCBzdXBwb3J0IHlldCBjb25zdHJhaW50cy4gSXQgYXBwZWFycyBlbXB0eSEhISEKLy8gc3RlcCAxMSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKcmV0dXJuIWwmJih1JiZ1LmNvbnN0cmFpbnRzJiYoYj11LmNvbnN0cmFpbnRzKSx2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0zLiByZXR1cm4gdGhlIFByb3RvU3R1YiBTb3VyY2UgQ29kZSIpLGY9ZSxyLnJlZ2lzdHJ5LmdldFNhbmRib3gocyxiKSl9KS50aGVuKGZ1bmN0aW9uKGUpewovLyBzdGVwIDE1IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApyZXR1cm4hbCYmKHYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXTQuIGlmIHRoZSBzYW5kYm94IGlzIHJlZ2lzdGVyZWQgdGhlbiByZXR1cm4gdGhlIHNhbmRib3ggIixlKSxhPWUsZSl9KS5jYXRjaChmdW5jdGlvbihlKXsKLy8gc3RlcCAxMyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKcmV0dXJuIWwmJih2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl01LiBTYW5kYm94IHdhcyBub3QgZm91bmQsIGNyZWF0aW5nIGEgbmV3IG9uZSAiLGUpLHIuX3J1bnRpbWVGYWN0b3J5LmNyZWF0ZVNhbmRib3goYikudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5hZGRMaXN0ZW5lcigiKiIsZnVuY3Rpb24oZSl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGUpfSksZX0pKX0pLnRoZW4oZnVuY3Rpb24obil7Ci8vIHN0ZXAgMTYgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnJldHVybiFsJiYodi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdNi4gcmV0dXJuIHRoZSBzYW5kYm94IGluc3RhbmNlIGFuZCByZWdpc3RlciIsbiwidG8gZG9tYWluICIscyksYT1uLHIucmVnaXN0cnkucmVnaXN0ZXJTdHViKGEsZCx0LGUsdSkpfSxoKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGwpcmV0dXJuITE7Ci8vIHN0ZXAgMjMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnYuaW5mbygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSA3LiByZXR1cm4gdGhlIHJ1bnRpbWUgcHJvdG9zdHViIHVybDogIixlKSxjPWUudXJsOwovLyBFeHRlbmQgb3JpZ2luYWwgaHlwZXJ0eSBjb25maWd1cmF0aW9uOwp2YXIgbj17fTtpZighKDAscC5lbXB0eU9iamVjdCkodS5jb25maWd1cmF0aW9uKSl0cnl7bj0oMCxvLmRlZmF1bHQpKHt9LEpTT04ucGFyc2UodS5jb25maWd1cmF0aW9uKSl9Y2F0Y2goZSl7bj11LmNvbmZpZ3VyYXRpb259aWYodCl0cnl7bj0oMCxvLmRlZmF1bHQpKG4sSlNPTi5wYXJzZSh0KSl9Y2F0Y2goZSl7bj0oMCxvLmRlZmF1bHQpKG4sdCl9Ci8vIHJlcXVpcmVkIGZvciBwcm90b3N0dWIgc2Vzc2lvbgpuLnJ1bnRpbWVVUkw9ci5fcnVudGltZVVSTDsKLy8gc3RlcCAyNCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdHJ5ewovLyBzdGVwIDI2IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAovLyBzdGVwIDI3IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAovLyBBZGQgdGhlIG1lc3NhZ2UgYnVzIGxpc3RlbmVyCnJldHVybiB2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0gODogYWRkaW5nIHNhbmRib3ggbGlzdGVuZXIgdG8gcHJvdG9zdHViVVJMIDogIixjKSxyLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoYyxmdW5jdGlvbihlKXthLnBvc3RNZXNzYWdlKGUpfSksYS5kZXBsb3lDb21wb25lbnQoZi5zb3VyY2VDb2RlLGMsbil9Y2F0Y2goZSl7di5lcnJvcigiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSBFcnJvciBvbiBkZXBsb3kgY29tcG9uZW50OiIsZSksaShlKX19LGgpLnRoZW4oZnVuY3Rpb24oKXtpZihsKXJldHVybiExOwovLyBzdGVwIDI4IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZAp2YXIgZT12b2lkIDA7dD8odi5sb2coIltSdW50aW1lLkxvYWRlci5sb2FkU3R1Yl0gcDJwQ29uZmlnOiAiLHQpLHQuaGFzT3duUHJvcGVydHkoImlzSGFuZGxlclN0dWIiKSYmKGU9ci5yZWdpc3RyeS5wMnBIYW5kbGVyU3R1YltyLl9ydW50aW1lVVJMXSksdC5oYXNPd25Qcm9wZXJ0eSgicDJwUmVxdWVzdGVyU3R1YiIpJiYoZT1yLnJlZ2lzdHJ5LnAycFJlcXVlc3RlclN0dWJbdC5yZW1vdGVSdW50aW1lVVJMXSkpOmU9ci5yZWdpc3RyeS5wcm90b3N0dWJzTGlzdFtzXSx2LmxvZygiW1J1bnRpbWUuTG9hZGVyLmxvYWRTdHViXSBTdHViOiAiLGUpLG4oZSksdi5pbmZvKCJbUnVudGltZS5Mb2FkZXIubG9hZFN0dWJdLS0tLS0tLS0tLS0tLS0tLS0tLSBFTkQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iKX0saCkuY2F0Y2goeSl9fSl9fSx7a2V5OiJsb2FkSWRwUHJveHkiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXRoaXMuX3JlYWR5VG9Vc2UoKSlyZXR1cm4hMTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gSWRwUHJveHkgZGVzY3JpcHRvciB1cmwgcGFyYW1ldGVyIGlzIG5lZWRlZCIpO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIGk9KDAscC5kaXZpZGVVUkwpKGUpLmRvbWFpbjtpfHwoaT1lKTt2YXIgcz12b2lkIDAsYT12b2lkIDAsdT12b2lkIDAsYz12b2lkIDAsZj0hMSxsPWZ1bmN0aW9uKGUpe3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSBTb21ldGhpbmcgZmFpbGVkIG9uIHRoZSBkZXBsb3kgb2YgSWRwUHJveHk6ICIsZSksbihlKX0sZD1mdW5jdGlvbihlKXtmPSEwLG4oZSl9OwovLyBEaXNjb3ZlciBJRFBQcm94eQp2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gLS0tLS0tLS0tLS0tLS0tLS0tLSBJRFAgUHJveHkgRGVwbG95IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIiksdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIERpc2NvdmVyIG9yIENyZWF0ZSBhIG5ldyBJZHBQcm94eSBmb3IgZG9tYWluL1VSTDogIixpKTt0cnl7dmFyIHk9dC5yZWdpc3RyeS5kaXNjb3ZlcklkcFByb3h5KGkpOwovLyBJcyByZWdpc3RlZD8Kdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDEuIElEUFByb3h5IERpc2NvdmVyZWQ6ICIseSk7Ci8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgMiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdmFyIGg9dC5yZWdpc3RyeS5pZHBQcm94eUxpc3RbaV07di5sb2coIkRlcGxveWVkOiAiLGgpLHIoaCksdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIC0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIil9Y2F0Y2goeSl7Ci8vIGlzIG5vdCByZWdpc3RlZD8Kdi5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDEuIElkcFByb3h5IG5vdCBmb3VuZDoiLHkpLAovLyB3ZSBoYXZlIGNvbXBsZXRlZCBzdGVwIDMgaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIHdlIG5lZWQgdG8gZ2V0IFByb3RvU3R1YiBkZXNjcmlwdG9yIHN0ZXAgNCBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKdC5kZXNjcmlwdG9ycy5nZXRJZHBQcm94eURlc2NyaXB0b3IoZSkudGhlbihmdW5jdGlvbihlKXt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gMi4gUmV0dXJuIHRoZSBJRFBQcm94eSBkZXNjcmlwdG9yIiksCi8vIHdlIGhhdmUgY29tcGxldGVkIHN0ZXAgNSBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2NvcmUtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2RvY3Mvc3BlY3MvcnVudGltZS9keW5hbWljLXZpZXcvYmFzaWNzL2RlcGxveS1wcm90b3N0dWIubWQKYT1lO3ZhciByPWUuc291cmNlUGFja2FnZVVSTDtyZXR1cm4iL3NvdXJjZVBhY2thZ2UiPT09cj9lLnNvdXJjZVBhY2thZ2U6dC5ydW50aW1lQ2F0YWxvZ3VlLmdldFNvdXJjZVBhY2thZ2VGcm9tVVJMKHIpfSxkKS50aGVuKGZ1bmN0aW9uKGUpe2lmKGYpcmV0dXJuITE7di5pbmZvKCJbUnVudGltZS5Mb2FkZXJdIDMuIHJldHVybiB0aGUgSURQUHJveHkgc291cmNlIHBhY2thZ2UiKSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCA3IGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3QvY29yZS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvZG9jcy9zcGVjcy9ydW50aW1lL2R5bmFtaWMtdmlldy9iYXNpY3MvZGVwbG95LXByb3Rvc3R1Yi5tZApjPWU7cmV0dXJuITB9LGQpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIWYmJnQucmVnaXN0cnkuZ2V0U2FuZGJveChpKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIWYmJih2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNC4gaWYgdGhlIHNhbmRib3ggaXMgcmVnaXN0ZXJlZCB0aGVuIHJldHVybiB0aGUgc2FuZGJveCIsZSkscz1lLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7aWYoZilyZXR1cm4hMTt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNS4gU2FuZGJveCB3YXMgbm90IGZvdW5kLCBjcmVhdGluZyBhIG5ldyBvbmUiLGUpO3ZhciByPXt9O3JldHVybiBhJiZhLmhhc093blByb3BlcnR5KCJjYXBhYmlsaXRpZXMiKSYmKGE9YS5zdHViQ2FwYWJpbGl0aWVzKSx0Ll9ydW50aW1lRmFjdG9yeS5jcmVhdGVTYW5kYm94KHIpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWRkTGlzdGVuZXIoIioiLGZ1bmN0aW9uKGUpe3QubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShlKX0pLGV9KX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIWYmJih2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gNi4gcmV0dXJuIHRoZSBzYW5kYm94IGluc3RhbmNlIGFuZCByZWdpc3RlciIsZSwidG8gZG9tYWluICIsaSkscz1lLHQucmVnaXN0cnkucmVnaXN0ZXJJZHBQcm94eShlLGkpKX0sZCkudGhlbihmdW5jdGlvbihlKXtpZihmKXJldHVybiExO3YuaW5mbygiW1J1bnRpbWUuTG9hZGVyXSA3LiBSZXR1cm4gdGhlIHJ1bnRpbWUgSWRwIFByb3h5IFVSTDogIixlKSwKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCnU9ZTsKLy8gRXh0ZW5kIG9yaWdpbmFsIGh5cGVydHkgY29uZmlndXJhdGlvbjsKdmFyIHI9e307aWYoISgwLHAuZW1wdHlPYmplY3QpKGEuY29uZmlndXJhdGlvbikpdHJ5e3I9KDAsby5kZWZhdWx0KSh7fSxKU09OLnBhcnNlKGEuY29uZmlndXJhdGlvbikpfWNhdGNoKGUpe3I9YS5jb25maWd1cmF0aW9ufXIucnVudGltZVVSTD10Ll9ydW50aW1lVVJMOwovLyBEZXBsb3kgQ29tcG9uZW50IHN0ZXAgeHh4CnRyeXsKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIEFkZCB0aGUgbWVzc2FnZSBidXMgbGlzdGVuZXIKcmV0dXJuIHQubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcih1LGZ1bmN0aW9uKGUpe3MucG9zdE1lc3NhZ2UoZSl9KSxzLmRlcGxveUNvbXBvbmVudChjLnNvdXJjZUNvZGUsZSxyKX1jYXRjaChlKXt2LmluZm8oIltSdW50aW1lLkxvYWRlcl0gRXJyb3Igb24gZGVwbG95IGNvbXBvbmVudDoiLGUpLG4oZSl9fSxkKS50aGVuKGZ1bmN0aW9uKCl7aWYoZilyZXR1cm4hMTsKLy8gd2UgaGF2ZSBjb21wbGV0ZWQgc3RlcCB4eHggaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9jb3JlLWZyYW1ld29yay9ibG9iL21hc3Rlci9kb2NzL3NwZWNzL3J1bnRpbWUvZHluYW1pYy12aWV3L2Jhc2ljcy9kZXBsb3ktcHJvdG9zdHViLm1kCi8vIExvYWQgU3R1YiBmdW5jdGlvbiByZXNvbHZlZCB3aXRoIHN1Y2Nlc3M7Ci8vIGxldCBpZHBQcm94eSA9IHsKLy8gICBydW50aW1lSWRwUHJveHlVUkw6IF9ydW50aW1lSWRwUHJveHlVUkwsCi8vICAgc3RhdHVzOiBkZXBsb3lDb21wb25lbnRTdGF0dXMKLy8gfTsKLy90aGlzLnJlZ2lzdHJ5LmlkcFByb3h5TGlzdFtkb21haW5dLnN0YXR1cyA9ICdkZXBsb3llZCc7CnZhciBlPXQucmVnaXN0cnkuaWRwUHJveHlMaXN0W2ldO3YubG9nKCJbUnVudGltZS5Mb2FkZXIubG9hZElkcFByb3h5XSA4OiBsb2FkZWQ6ICIsZSkscihlKSx2LmluZm8oIltSdW50aW1lLkxvYWRlci5sb2FkSWRwUHJveHldIC0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuIil9LGQpLmNhdGNoKGwpfX0pfX0se2tleToiX3JlYWR5VG9Vc2UiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3J1bnRpbWVVUkwpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBsb2FkZXIgbmVlZCB0aGUgcnVudGltZSB1cmwgYWRkcmVzcyIpO2lmKCF0aGlzLl9tZXNzYWdlc0J1cyl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGxvYWRlciBuZWVkIHRoZSBtZXNzYWdlQnVzIGNvbXBvbmVudCIpO2lmKCF0aGlzLl9yZWdpc3RyeSl0aHJvdyBuZXcgRXJyb3IoIltSdW50aW1lLkxvYWRlcl0gVGhlIGxvYWRlciBuZWVkIHRoZSByZWdpc3RyeSBjb21wb25lbnQiKTtpZighdGhpcy5fcnVudGltZUZhY3RvcnkpdGhyb3cgbmV3IEVycm9yKCJbUnVudGltZS5Mb2FkZXJdIFRoZSBsb2FkZXIgbmVlZCB0aGUgcnVudGltZSBmYWN0b3J5IGNvbXBvbmVudCIpO3JldHVybiEwfX0se2tleToicnVudGltZVVSTCIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3J1bnRpbWVVUkw9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J1bnRpbWVVUkx9fSx7a2V5OiJyZWdpc3RyeSIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3JlZ2lzdHJ5PWU7Ci8vIEluc3RhbGwgQWRkcmVzc0FsbG9jYXRpb24KdmFyIHQ9aC5kZWZhdWx0Lmluc3RhbmNlO3RoaXMuX2FkZHJlc3NBbGxvY2F0aW9uPXQsdi5sb2coIltMb2FkZXIgLSBBZGRyZXNzQWxsb2NhdGlvbl0gLSAiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVnaXN0cnl9fSx7a2V5OiJtZXNzYWdlQnVzIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZXNCdXM9ZX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lc3NhZ2VzQnVzfX0se2tleToicnVudGltZUZhY3RvcnkiLHNldDpmdW5jdGlvbihlKXt0aGlzLl9ydW50aW1lRmFjdG9yeT1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcnVudGltZUZhY3Rvcnl9fV0pLExvYWRlcn0oKTt0LmRlZmF1bHQ9ZyxlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0OTUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBzdG9yYWdlKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigiVGhlIHJ1bnRpbWUgZmFjdG9yeSBpcyBhIG5lZWRlZCBwYXJhbWV0ZXIiKTtyZXR1cm4oMCxvLmRlZmF1bHQpKGkucnVudGltZUNvbmZpZ3VyYXRpb24uc3RvcmFnZVNjaGVtYXMpLmZvckVhY2goZnVuY3Rpb24odCl7cy5oYXNPd25Qcm9wZXJ0eSh0KXx8KHNbdF09ZS5zdG9yYWdlTWFuYWdlcih0LGkucnVudGltZUNvbmZpZ3VyYXRpb24uc3RvcmFnZVNjaGVtYXNbdF0pKX0pLHN9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMzEpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LnN0b3JhZ2U9c3RvcmFnZTt2YXIgaT1yKDE0NCkscz17fX0sLyogNDk2ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoOCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigxKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDIpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMTQpLGY9cig5OSksbD1yKDcpLGQ9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShsKSxwPWQuZ2V0TG9nZ2VyKCJEZXNjcmlwdG9ycyIpLHk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBEZXNjcmlwdG9ycyhlLHQscil7aWYoKDAscy5kZWZhdWx0KSh0aGlzLERlc2NyaXB0b3JzKSwhZSl0aHJvdyBFcnJvcigiVGhlIGRlc2NyaXB0b3IgbmVlZCB0byBrbm93IHRoZSBydW50aW1lIHVybCB0byBiZSB1c2VkIik7aWYoIXQpdGhyb3cgRXJyb3IoIlRoZSBkZXNjcmlwdG9yIG5lZWRzIHRoZSBjYXRhbG9ndWUgaW5zdGFuY2UiKTtpZighcil0aHJvdyBFcnJvcigiVGhlIGRlc2NyaXB0b3IgbmVlZHMgdGhlIHJ1bnRpbWUgY29uZmlndXJhdGlvbiIpO3RoaXMubG9nPXAsdGhpcy5ydW50aW1lQ29uZmlndXJhdGlvbj1yLHRoaXMucnVudGltZVVSTD1lLHRoaXMuY2F0YWxvZ3VlPXQsdGhpcy5jb25zdHJhaW50cz1mLnJ1bnRpbWVVdGlscy5ydW50aW1lQ2FwYWJpbGl0aWVzfXJldHVybigwLHUuZGVmYXVsdCkoRGVzY3JpcHRvcnMsW3trZXk6ImdldEh5cGVydHlEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jYXRhbG9ndWUuZ2V0SHlwZXJ0eURlc2NyaXB0b3IoZSwhMCx0aGlzLmNvbnN0cmFpbnRzKX19LHtrZXk6ImdldFN0dWJEZXNjcmlwdG9yIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dmFyIG89dm9pZCAwLGk9dm9pZCAwLHM9dm9pZCAwLGE9KDAsYy5kaXZpZGVVUkwpKHQucnVudGltZVVSTCksdT1hLmRvbWFpbjtpZihlLmluY2x1ZGVzKCI6Ly8iKSl7dmFyIGY9KDAsYy5kaXZpZGVVUkwpKGUpO289Zi5kb21haW47dmFyIGw9Zi5pZGVudGl0eTtpPWw/bC5zdWJzdHJpbmcobC5sYXN0SW5kZXhPZigiLyIpKzEpOiJkZWZhdWx0In1lbHNlIGk9ImRlZmF1bHQiLG89ZTtpZihzPSgwLGMuYnVpbGRVUkwpKHQucnVudGltZUNvbmZpZ3VyYXRpb24sImNhdGFsb2d1ZVVSTHMiLCJwcm90b2NvbHN0dWIiLGkpLG8hPT10LnJ1bnRpbWVDb25maWd1cmF0aW9uLmRvbWFpbilpZihlLmluZGV4T2YoImh0dHBzIikmJmUuaW5kZXhPZigiaHlwZXJ0eS1jYXRhbG9ndWUiKSl7Ci8vIFRPRE86IGNoZWNrIGhvdyB0byBsb2FkIGZvcm0gZGlmZmVyZW50IGNvbmZpZ3VyYXRpb24gZG9tYWluCnZhciBkPSgwLGMuZ2V0Q29uZmlndXJhdGlvblJlc291cmNlcykodC5ydW50aW1lQ29uZmlndXJhdGlvbiwiY2F0YWxvZ3VlVVJMcyIsInByb3RvY29sc3R1YiIpO3M9ZC5wcmVmaXgrbytkLnN1ZmZpeCtpfWVsc2Ugcz1lO3JldHVybiBwLmxvZygiTG9hZCBQcm90b2NvbFN0dWIgZm9yIGRvbWFpbiwgIitvKyIgOiAiLHMpLHQuY2F0YWxvZ3VlLmdldFN0dWJEZXNjcmlwdG9yKHMsITAsdC5jb25zdHJhaW50cykudGhlbihmdW5jdGlvbihlKXtyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ0Vycm9yOiAnLCBlcnJvcik7Cmk9byxvPXU7dmFyIHI9KDAsYy5nZXRDb25maWd1cmF0aW9uUmVzb3VyY2VzKSh0LnJ1bnRpbWVDb25maWd1cmF0aW9uLCJjYXRhbG9ndWVVUkxzIiwicHJvdG9jb2xzdHViIik7Ci8vIGxvZy5sb2coJ0ZhbGxiYWNrIC0+IExvYWQgUHJvdG9jb2xzdHViIGZvciBkb21haW4sICcgKyBkb21haW4gKyAnIDogJywgcHJvdG9zdHViKTsKcmV0dXJuIHM9ci5wcmVmaXgrbytyLnN1ZmZpeCtpLHQuY2F0YWxvZ3VlLmdldFN0dWJEZXNjcmlwdG9yKHMsITAsdC5jb25zdHJhaW50cyl9KS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSl9KX19LHtrZXk6ImdldElkcFByb3h5RGVzY3JpcHRvciIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihyLG4pe3ZhciBvPXZvaWQgMCxpPXZvaWQgMCxzPSgwLGMuZGl2aWRlVVJMKSh0LnJ1bnRpbWVVUkwpLGE9cy5kb21haW4sdT10LmNvbnN0cmFpbnRzO2lmKHUuY29uc3RyYWludHMub25seUFjY2Vzc1Rva2VuPSEwLHUuY29uc3RyYWludHMub25seUlkQXNzZXJ0aW9uVmFsaWRhdGlvbj0hMCxlLmluY2x1ZGVzKCI6Ly8iKSl7dmFyIGY9KDAsYy5kaXZpZGVVUkwpKGUpO289Zi5kb21haW47dmFyIGw9Zi5pZGVudGl0eTtpPWw/bC5zdWJzdHJpbmcobC5sYXN0SW5kZXhPZigiLyIpKzEpOiJkZWZhdWx0In1lbHNlIGk9ImRlZmF1bHQiLG89ZTt2YXIgZD0oMCxjLmdldENvbmZpZ3VyYXRpb25SZXNvdXJjZXMpKHQucnVudGltZUNvbmZpZ3VyYXRpb24sImNhdGFsb2d1ZVVSTHMiLCJpZHBQcm94eSIpOwovLyBsb2cubG9nKCdMb2FkIElkcCBQcm94eSBmb3IgZG9tYWluLCAnICsgZG9tYWluICsgJyA6ICcsIGlkcFByb3h5VVJMKTsKcmV0dXJuIGU9ZC5wcmVmaXgrbytkLnN1ZmZpeCtpLHQuY2F0YWxvZ3VlLmdldElkcFByb3h5RGVzY3JpcHRvcihlLCEwLHUpLnRoZW4oZnVuY3Rpb24oZSl7cihlKX0pLmNhdGNoKGZ1bmN0aW9uKCl7Ci8vIGxvZy5sb2coJ0xvYWQgSWRwIFByb3h5IGZvciBkb21haW4sICcgKyBkb21haW4gKyAnIDogJywgaWRwUHJveHlVUkwpOwpyZXR1cm4gaT1vLG89YSxlPSgwLGMuYnVpbGRVUkwpKHQucnVudGltZUNvbmZpZ3VyYXRpb24sImNhdGFsb2d1ZVVSTHMiLCJpZHBQcm94eSIsaSksdC5jYXRhbG9ndWUuZ2V0SWRwUHJveHlEZXNjcmlwdG9yKGUsITAsdSl9KS50aGVuKGZ1bmN0aW9uKGUpe3IoZSl9KS5jYXRjaChmdW5jdGlvbihlKXtuKGUpfSl9KX19XSksRGVzY3JpcHRvcnN9KCk7dC5kZWZhdWx0PXksZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDk3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT0ocigyMDApLHIoNykpLHU9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShhKSxjPXUuZ2V0TG9nZ2VyKCJSdW50aW1lVUEiKSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gTXNnQnVzSGFuZGxlcnMoZSx0LHIpe2lmKCgwLG8uZGVmYXVsdCkodGhpcyxNc2dCdXNIYW5kbGVycyksIWUpdGhyb3cgRXJyb3IoIltNc2dCdXNIYW5kbGVyc10gcGVwIGlucHV0IHBhcmFtZW50ZXIgaXMgbWFuZGF0b3J5Iik7aWYoIXQpdGhyb3cgRXJyb3IoIltNc2dCdXNIYW5kbGVyc10gaWRtIGlucHV0IHBhcmFtZW50ZSBpcyBtYW5kYXRvcnkiKTtpZighcil0aHJvdyBFcnJvcigiW01zZ0J1c0hhbmRsZXJzXSBjcnlwdG8gaW5wdXQgcGFyYW1lbnRlIGlzIG1hbmRhdG9yeSIpO3RoaXMucG9saWN5RW5naW5lPWUsdGhpcy5pZGVudGl0eU1hbmFnZXI9dCx0aGlzLmNyeXB0b01hbmFnZXI9cn0KLy8gUG9saWN5IGJhc2VkIGFjY2VzcyBjb250cm9sIGZvciBpbmNvbWluZyBtZXNzYWdlcwpyZXR1cm4oMCxzLmRlZmF1bHQpKE1zZ0J1c0hhbmRsZXJzLFt7a2V5OiJwZXBJbkhhbmRsZXIiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpe2UucG9saWN5RW5naW5lLmF1dGhvcmlzZSh0Lm1zZywhMCkudGhlbihmdW5jdGlvbihlKXt0Lm1zZz1lLHQubmV4dCgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Yy5lcnJvcihlKSx0LmZhaWwoZSl9KX19fSx7a2V5OiJwZXBPdXRIYW5kbGVyIixnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbih0KXtlLnBvbGljeUVuZ2luZS5hdXRob3Jpc2UodC5tc2csITEpLnRoZW4oZnVuY3Rpb24oZSl7dC5tc2c9ZSx0Lm5leHQoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2MuZXJyb3IoZSksdC5mYWlsKGUpfSl9fX0se2tleToiaWRtSGFuZGxlciIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24odCl7ZS5pZGVudGl0eU1hbmFnZXIucHJvY2Vzc01lc3NhZ2UodC5tc2cpLnRoZW4oZnVuY3Rpb24oZSl7dC5tc2c9ZSx0Lm5leHQoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2MuZXJyb3IoZSksdC5mYWlsKGUpfSl9fX0se2tleToiZW5jcnlwdEhhbmRsZXIiLGdldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpe2UuY3J5cHRvTWFuYWdlci5lbmNyeXB0TWVzc2FnZSh0Lm1zZykudGhlbihmdW5jdGlvbihlKXt0Lm1zZz1lLHQubmV4dCgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7Yy5lcnJvcihlKSx0LmZhaWwoZSl9KX19fSx7a2V5OiJkZWNyeXB0SGFuZGxlciIsZ2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24odCl7ZS5jcnlwdG9NYW5hZ2VyLmRlY3J5cHRNZXNzYWdlKHQubXNnKS50aGVuKGZ1bmN0aW9uKGUpe3QubXNnPWUsdC5uZXh0KCl9KS5jYXRjaChmdW5jdGlvbihlKXtjLndhcm4oZSksdC5mYWlsKGUpfSl9fX1dKSxNc2dCdXNIYW5kbGVyc30oKTt0LmRlZmF1bHQ9ZixlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA0OTggKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig0OTkpLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fShuKTt0LmRlZmF1bHQ9by5kZWZhdWx0LC8vIGxldCBHcmFwaENvbm5lY3RvcjsKLy8gaWYgKHByb2Nlc3MuZW52Lk1PREUgIT09ICdsaWdodCcpIHsKLy8gICBHcmFwaENvbm5lY3RvciA9IHJlcXVpcmUoJy4vR3JhcGhDb25uZWN0b3JCYXNlJyk7Ci8vICAgaWYgKEdyYXBoQ29ubmVjdG9yICYmIEdyYXBoQ29ubmVjdG9yLmhhc093blByb3BlcnR5KCdkZWZhdWx0JykpIEdyYXBoQ29ubmVjdG9yID0gR3JhcGhDb25uZWN0b3IuZGVmYXVsdDsKLy8gfSBlbHNlIHsKLy8gICBHcmFwaENvbm5lY3RvciA9IHJlcXVpcmUoJy4vR3JhcGhDb25uZWN0b3JMaWdodCcpOwovLyAgIGlmIChHcmFwaENvbm5lY3RvciAmJiAgR3JhcGhDb25uZWN0b3IuaGFzT3duUHJvcGVydHkoJ2RlZmF1bHQnKSkgR3JhcGhDb25uZWN0b3IgPSBHcmFwaENvbm5lY3Rvci5kZWZhdWx0OwovLyB9Ci8qKgogKiBUaGUgR3JhcGhDb25uZWN0b3JCYXNlIGhhdmUgc29tZSBwcm9ibGVtcyB3aXRoIHRoZSBzaXplOwogKiBAZGVwcmVjYXRlZCBEdWUgdG8gc29tZSBwcm9ibGVtcyBpbmNyZWFzZSBhIGxvdCB0aGUgZmlsZSBzaXplCiAqLwovLyBpbXBvcnQgR3JhcGhDb25uZWN0b3IgZnJvbSAnLi9HcmFwaENvbm5lY3RvckJhc2UnOwovKioKICoKICogQGV4cGVyaW1lbnRhbCB1c2VkIGluc3RlYWQgb2YgR3JhcGhDb25uZWN0b3JCYXNlOwogKi8KZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNDk5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pLGk9ZnVuY3Rpb24gR3JhcGhDb25uZWN0b3IoZSx0LHIpeygwLG8uZGVmYXVsdCkodGhpcyxHcmFwaENvbm5lY3Rvcil9O3QuZGVmYXVsdD1pLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDgpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigyKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDcpLGY9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShjKSxsPXIoMTQpLGQ9Zi5nZXRMb2dnZXIoIkNvcmVEaXNjb3ZlcnkiKSxwPWZ1bmN0aW9uKCl7LyoqCiAgKiBUbyBpbml0aWFsaXNlIHRoZSBEaXNjb3ZlcnksIHdoaWNoIHdpbGwgcHJvdmlkZSB0aGUgc3VwcG9ydCBmb3IgaHlwZXJ0aWVzIHRvCiAgKiBxdWVyeSB1c2VycyByZWdpc3RlcmVkIGluIG91dHNpZGUgdGhlIGludGVybmFsIGNvcmUuCiAgKiBAcGFyYW0gIHtNZXNzYWdlQnVzfSAgICAgICAgICBtc2didXMgICAgICAgICAgICAgICAgbXNnYnVzCiAgKiBAcGFyYW0gIHtSdW50aW1lVVJMfSAgICAgICAgICBydW50aW1lVVJMICAgICAgICAgICAgcnVudGltZVVSTAogICogQHBhcmFtICB7Z3JhcGhDb25uZWN0b3J9ICAgIGdyYXBoQ29ubmVjdG9yCiAgKi8KZnVuY3Rpb24gQ29yZURpc2NvdmVyeShlLHQscixuLG8pe2lmKCgwLHMuZGVmYXVsdCkodGhpcyxDb3JlRGlzY292ZXJ5KSwhbil0aHJvdyBFcnJvcigiVGhlIGNhdGFsb2d1ZSBuZWVkcyB0aGUgcnVudGltZUZhY3RvcnkiKTt2YXIgaT10aGlzO3RoaXMuX21lc3NhZ2VCdXM9dCxpLmdyYXBoQ29ubmVjdG9yPXIsaS5odHRwUmVxdWVzdD1uLmNyZWF0ZUh0dHBSZXF1ZXN0KCksaS5kb21haW49KDAsbC5kaXZpZGVVUkwpKGUpLmRvbWFpbixpLmRpc2NvdmVyeVVSTD1lKyIvZGlzY292ZXJ5LyIsaS5yZWdpc3RyeT1vLGkubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcihpLmRpc2NvdmVyeVVSTCxmdW5jdGlvbihlKXtpLmRpc2NvdmVyeU1hbmFnZXIoZSkudGhlbihmdW5jdGlvbih0KXsKLy9GTE9XLU9VVDogbWVzc2FnZSByZXNwb25zZQppLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsdmFsdWU6dH19KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3ZhciByPXZvaWQgMCxuPXZvaWQgMDsiR3JhcGhDb25uZWN0b3IiPT09dD8ocj0iVGhpcyBzZWFyY2ggaXMgbm90IGF2YWlsYWJsZSBhdCB0aGUgbW9tZW50LiBUcnkgbGF0ZXIuIixuPTUwMCk6KHI9Ik5vdCBGb3VuZCIsbj00MDQpLAovL0ZMT1ctT1VUOiBlcnJvciBtZXNzYWdlIHJlc3BvbnNlCmkubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOm4sZGVzY3JpcHRpb246cn19KX0pfSl9LyoqCiAgICogUmV0dXJucyB0aGUgTWVzc2FnZUJ1cy4KICAgKi8KcmV0dXJuKDAsdS5kZWZhdWx0KShDb3JlRGlzY292ZXJ5LFt7a2V5OiJkaXNjb3ZlcnlNYW5hZ2VyIiwvKiBmdW5jdGlvbiB0byBkZWNpZGUgd2hhdCBkaXNjb3ZlcnkgbWV0aG9kIHRvIGNhbGwgYW5kIGxhdGVyIHJldHVybiB0aGUgcmVzcG9uc2UgbXNnICAqLwp2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9KCgwLGwuZGl2aWRlVVJMKShlLmZyb20pLmRvbWFpbixlLmJvZHkucmVzb3VyY2Uuc3BsaXQoIi8iKS5maWx0ZXIoQm9vbGVhbikpLG49W10saT1bXTtzd2l0Y2goZC5sb2coIltDb3JlRGlzY292ZXJ5LmRpc2NvdmVyeU1hbmFnZXJdIHJlY2VpdmVkOiAiLGUpLGUuYm9keS5jcml0ZXJpYSYmKGUuYm9keS5jcml0ZXJpYS5yZXNvdXJjZXMmJihuPWUuYm9keS5jcml0ZXJpYS5yZXNvdXJjZXMpLGUuYm9keS5jcml0ZXJpYS5kYXRhU2NoZW1lcyYmKGk9ZS5ib2R5LmNyaXRlcmlhLmRhdGFTY2hlbWVzKSksclsxXSl7Y2FzZSJ1c2VyIjpyZXR1cm4iaHlwZXJ0eSI9PXJbMF0/dC5kaXNjb3Zlckh5cGVydGllcyhlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXIvIilbMV0saSxuLGUuYm9keS5jcml0ZXJpYS5kb21haW4pOnQuZGlzY292ZXJEYXRhT2JqZWN0cyhlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInVzZXIvIilbMV0saSxuLGUuYm9keS5jcml0ZXJpYS5kb21haW4pO2Nhc2UidXJsIjpyZXR1cm4iaHlwZXJ0eSI9PXJbMF0/dC5kaXNjb3Zlckh5cGVydHlQZXJVUkwoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1cmwvIilbMV0sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik6dC5kaXNjb3ZlckRhdGFPYmplY3RQZXJVUkwoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1cmwvIilbMV0sZS5ib2R5LmNyaXRlcmlhLmRvbWFpbik7Y2FzZSJuYW1lIjpyZXR1cm4gdC5kaXNjb3ZlckRhdGFPYmplY3RzUGVyTmFtZShlLmJvZHkucmVzb3VyY2Uuc3BsaXQoIm5hbWUvIilbMV0saSxuLGUuYm9keS5jcml0ZXJpYS5kb21haW4pO2Nhc2UicmVwb3J0ZXIiOnJldHVybiB0LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJSZXBvcnRlcihlLmJvZHkucmVzb3VyY2Uuc3BsaXQoInJlcG9ydGVyLyIpWzFdLGksbixlLmJvZHkuY3JpdGVyaWEuZG9tYWluKTtjYXNlImd1aWQiOnJldHVybiB2b2lkIDAhPT10LmdyYXBoQ29ubmVjdG9yJiZudWxsIT09dC5ncmFwaENvbm5lY3Rvcj8iaHlwZXJ0eSI9PXJbMF0/dC5kaXNjb3Zlckh5cGVydGllc1BlckdVSUQoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1c2VyLWd1aWQ6Ly8iKVsxXSxpLG4pOnQuZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSUQoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1c2VyLWd1aWQ6Ly8iKVsxXSxpLG4pOm8uZGVmYXVsdC5yZWplY3QoIkdyYXBoQ29ubmVjdG9yIik7Y2FzZSJ1c2VycHJvZmlsZSI6cmV0dXJuIHZvaWQgMCE9PXQuZ3JhcGhDb25uZWN0b3ImJm51bGwhPT10LmdyYXBoQ29ubmVjdG9yPyJoeXBlcnR5Ij09clswXT90LmRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlclByb2ZpbGVEYXRhKGUuYm9keS5yZXNvdXJjZS5zcGxpdCgidXNlcnByb2ZpbGUvIilbMV0saSxuKTp0LmRpc2NvdmVyRGF0YU9iamVjdHNQZXJVc2VyUHJvZmlsZURhdGEoZS5ib2R5LnJlc291cmNlLnNwbGl0KCJ1c2VycHJvZmlsZS8iKVsxXSxpLG4pOm8uZGVmYXVsdC5yZWplY3QoIkdyYXBoQ29ubmVjdG9yIil9fX0se2tleToiZGlzY292ZXJIeXBlcnRpZXNQZXJVc2VyUHJvZmlsZURhdGEiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGkscyl7Ci8vdHJhbnNsYXRlIHVzZXIgaWRlbnRpZmllciAoZS5nLiBlbWFpbCwgbmFtZS4uLikgaW50byB0aGUgYXNzb2NpYXRlZCBHVUlEcwpuLmRpc2NvdmVyR1VJRFBlclVzZXJJZGVudGlmaWVyKGUpLnRoZW4oZnVuY3Rpb24oZSl7dmFyIGE9ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtuLmRpc2NvdmVySHlwZXJ0aWVzUGVyR1VJRChlLHQscikudGhlbihmdW5jdGlvbihlKXtvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7byhbXSl9KX0pfSk7by5kZWZhdWx0LmFsbChhKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLmNvbmNhdC5hcHBseShbXSxlKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHMoIk5vIGh5cGVydGllcyB3ZXJlIGZvdW5kIik7aSh0KX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSl9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0c1BlclVzZXJQcm9maWxlRGF0YSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oaSxzKXsKLy90cmFuc2xhdGUgdXNlciBpZGVudGlmaWVyIChlLmcuIGVtYWlsLCBuYW1lLi4uKSBpbnRvIHRoZSBhc3NvY2lhdGVkIEdVSURzCm4uZGlzY292ZXJHVUlEUGVyVXNlcklkZW50aWZpZXIoZSkudGhlbihmdW5jdGlvbihlKXt2YXIgYT1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe24uZGlzY292ZXJEYXRhT2JqZWN0c1BlckdVSUQoZSx0LHIpLnRoZW4oZnVuY3Rpb24oZSl7byhlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oW10pfSl9KX0pO28uZGVmYXVsdC5hbGwoYSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1bXS5jb25jYXQuYXBwbHkoW10sZSk7aWYoMD09PXQubGVuZ3RoKXJldHVybiBzKCJObyBkYXRhT2JqZWN0cyB3ZXJlIGZvdW5kIik7aSh0KX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSl9KX0pfX0se2tleToiZGlzY292ZXJIeXBlcnRpZXNQZXJHVUlEIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihpLHMpewovL3RyYW5zbGF0ZSBHVUlEIGludG8gdGhlIHVzZXIgSURzIHRvIHF1ZXJ5IHRoZSBkb21haW4gcmVnaXN0cnkKbi5kaXNjb3ZlclVzZXJJZHNQZXJHVUlEKGUpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vdHJhbnNsYXRlIHVzZXIgSURzIGludG8gdGhlIGFzc29jaWF0ZWQgaHlwZXJ0aWVzIHJlZ2lzdGVyZWQgaW4gc29tZSBkb21haW4KdmFyIGE9ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obyxpKXtuLmRpc2NvdmVySHlwZXJ0aWVzKGUudUlELHQscixlLmRvbWFpbikudGhlbihmdW5jdGlvbihlKXtvKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7byhbXSl9KX0pfSk7by5kZWZhdWx0LmFsbChhKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciB0PVtdLmNvbmNhdC5hcHBseShbXSxlKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHMoIk5vIGh5cGVydGllcyB3ZXJlIGZvdW5kIik7Ci8vIGxvZy5sb2coJ0h5cGVydGllcyA6ICcsIGh5cGVydGllcyk7CmkodCl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3JldHVybiBzKGUpfSl9KX19LHtrZXk6ImRpc2NvdmVyRGF0YU9iamVjdHNQZXJHVUlEIix2YWx1ZTpmdW5jdGlvbihlLHQscil7dmFyIG49dGhpcztyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihpLHMpewovL3RyYW5zbGF0ZSBHVUlEIGludG8gdGhlIHVzZXIgSURzIHRvIHF1ZXJ5IHRoZSBkb21haW4gcmVnaXN0cnkKbi5kaXNjb3ZlclVzZXJJZHNQZXJHVUlEKGUpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vdHJhbnNsYXRlIHVzZXIgSURzIGludG8gdGhlIGFzc29jaWF0ZWQgZGF0YU9iamVjdHMgcmVnaXN0ZXJlZCBpbiBzb21lIGRvbWFpbgp2YXIgYT1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihvLGkpe24uZGlzY292ZXJEYXRhT2JqZWN0cyhlLnVJRCx0LHIsZS5kb21haW4pLnRoZW4oZnVuY3Rpb24oZSl7byhlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28oW10pfSl9KX0pO28uZGVmYXVsdC5hbGwoYSkudGhlbihmdW5jdGlvbihlKXt2YXIgdD1bXS5jb25jYXQuYXBwbHkoW10sZSk7aWYoMD09PXQubGVuZ3RoKXJldHVybiBzKCJObyBkYXRhT2JqZWN0cyB3ZXJlIGZvdW5kIik7Ci8vIGxvZy5sb2coJ0RhdGFPYmplY3RzIDogJywgZGF0YU9iamVjdHMpOwppKHQpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gcyhlKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydGllcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9dGhpcyxzPXZvaWQgMDtzPW58fGkuZG9tYWluO3ZhciBhPXt0eXBlOiJyZWFkIixmcm9tOmkuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK3MsYm9keTp7fX07cmV0dXJuIGUuaW5kZXhPZigidXNlcjovLyIpPi0xP2EuYm9keS5yZXNvdXJjZT1lOmEuYm9keS5yZXNvdXJjZT0iL2h5cGVydHkvaWRwLWlkZW50aWZpZXIvIitlLHQubGVuZ3RoPjAmJihhLmJvZHkuY3JpdGVyaWF8fChhLmJvZHkuY3JpdGVyaWE9e30pLGEuYm9keS5jcml0ZXJpYS5kYXRhU2NoZW1lcz10KSxyLmxlbmd0aD4wJiYoYS5ib2R5LmNyaXRlcmlhfHwoYS5ib2R5LmNyaXRlcmlhPXt9KSxhLmJvZHkuY3JpdGVyaWEucmVzb3VyY2VzPXIpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXsKLy8gbG9nLmxvZygiW0NvcmVEaXNjb3ZlcnkuZGlzY292ZXJIeXBlcnRpZXNdIHNlbmRpbmcgbXNnICIsIG1zZyk7CmkubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpewovLyBsb2cubG9nKCJbQ29yZURpc2NvdmVyeS5kaXNjb3Zlckh5cGVydGllc10gcmN2ZWQgcmVwbHkgIiwgcmVwbHkpOwppZigyMDAhPT1yLmJvZHkuY29kZSYmNTAwIT09ci5ib2R5LmNvZGUpcmV0dXJuIHQoIk5vIEh5cGVydHkgd2FzIGZvdW5kIik7dmFyIG49ci5ib2R5LnZhbHVlLG89W107Zm9yKHZhciBpIGluIG4pby5wdXNoKG5baV0pO2lmKCEoby5sZW5ndGg+MCkpcmV0dXJuIHQoIk5vIEh5cGVydHkgd2FzIGZvdW5kIik7Ci8vIGxvZy5sb2coIltDb3JlRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0aWVzXSBIeXBlcnRpZXMgRm91bmQ6ICIsIGZpbmFsSHlwZXJ0aWVzKTsKZShvKX0pfSl9fSx7a2V5OiJkaXNjb3ZlckRhdGFPYmplY3RzIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLHM9dm9pZCAwLGE9W107cmV0dXJuIHM9bnx8aS5kb21haW4sbmV3IG8uZGVmYXVsdChmdW5jdGlvbihuLHUpewovL3RyYW5zbGF0ZSB1c2VyIGlkZW50aWZpZXIgKGUuZy4gZW1haWwsIG5hbWUuLi4pIGludG8gdGhlIGFzc29jaWF0ZWQgaHlwZXJ0aWVzCmkuZGlzY292ZXJIeXBlcnRpZXMoZSxbXSxbXSxzKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBjPVtdO2Zvcih2YXIgZiBpbiBlKWMucHVzaChlW2ZdKTsvL3RyYW5zbGF0ZSBoeXBlcnRpZXMgVVJMcyBpbnRvIHRoZSBhc3NvY2lhdGVkIGRhdGFPYmplY3RzIHJlZ2lzdGVyZWQgaW4gc29tZSBkb21haW4KdmFyIGw9Yy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24obixvKXtpLmRpc2NvdmVyRGF0YU9iamVjdHNQZXJSZXBvcnRlcihlLmh5cGVydHlJRCx0LHIscykudGhlbihmdW5jdGlvbihlKXtuKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihbXSl9KX0pfSk7by5kZWZhdWx0LmFsbChsKS50aGVuKGZ1bmN0aW9uKGUpe1tdLmNvbmNhdC5hcHBseShbXSxlKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EucHVzaChlKX0pO3ZhciB0PVtdO2Zvcih2YXIgciBpbiBhKXQucHVzaChhW3JdKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHUoIk5vIGRhdGFPYmplY3RzIHdlcmUgZm91bmQiKTsKLy8gbG9nLmxvZygnRGF0YU9iamVjdHMgRm91bmQ6ICcsIGZpbmFsRGF0YU9iamVjdHMpOwpuKHQpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gdShlKX0pfSl9fSx7a2V5OiJkaXNjb3Zlckh5cGVydHlQZXJVUkwiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPXZvaWQgMDtuPXR8fHIuZG9tYWluO3ZhciBpPXt0eXBlOiJyZWFkIixmcm9tOnIuZGlzY292ZXJ5VVJMLHRvOiJkb21haW46Ly9yZWdpc3RyeS4iK24sYm9keTp7cmVzb3VyY2U6ZX19O3JldHVybiBuZXcgby5kZWZhdWx0KGZ1bmN0aW9uKGUsdCl7ci5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKGksZnVuY3Rpb24ocil7aWYoMjAwIT09ci5ib2R5LmNvZGUmJjUwMCE9PXIuYm9keS5jb2RlKXJldHVybiB0KCJObyBIeXBlcnR5IHdhcyBmb3VuZCIpO3ZhciBuPXIuYm9keS52YWx1ZTtpZighbilyZXR1cm4gdCgiTm8gSHlwZXJ0eSB3YXMgZm91bmQiKTsKLy8gbG9nLmxvZygnSHlwZXJ0eSBmb3VuZDogJywgaHlwZXJ0eSk7CmUobil9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0UGVyVVJMIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj12b2lkIDA7bj10fHxyLmRvbWFpbjt2YXIgaT17dHlwZToicmVhZCIsZnJvbTpyLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIituLGJvZHk6e3Jlc291cmNlOmV9fTtyZXR1cm4gbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe3IubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShpLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZTtpZighbilyZXR1cm4gdCgiRGF0YU9iamVjdCBub3QgZm91bmQiKTsKLy8gbG9nLmxvZygnRGF0YU9iamVjdCBmb3VuZDogJywgZGF0YU9iamVjdCk7CmUobil9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0c1Blck5hbWUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBpPXRoaXMscz12b2lkIDA7cz1ufHxpLmRvbWFpbjt2YXIgYT17dHlwZToicmVhZCIsZnJvbTppLmRpc2NvdmVyeVVSTCx0bzoiZG9tYWluOi8vcmVnaXN0cnkuIitzLGJvZHk6e3Jlc291cmNlOmV9fTtyZXR1cm4gdC5sZW5ndGg+MCYmKGEuYm9keS5jcml0ZXJpYXx8KGEuYm9keS5jcml0ZXJpYT17fSksYS5ib2R5LmNyaXRlcmlhLmRhdGFTY2hlbWVzPXQpLHIubGVuZ3RoPjAmJihhLmJvZHkuY3JpdGVyaWF8fChhLmJvZHkuY3JpdGVyaWE9e30pLGEuYm9keS5jcml0ZXJpYS5yZXNvdXJjZXM9ciksbmV3IG8uZGVmYXVsdChmdW5jdGlvbihlLHQpe2kubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShhLGZ1bmN0aW9uKHIpe3ZhciBuPXIuYm9keS52YWx1ZSxvPVtdO2Zvcih2YXIgaSBpbiBuKW8ucHVzaChuW2ldKTtpZighKG8ubGVuZ3RoPjApKXJldHVybiB0KCJObyBEYXRhT2JqZWN0IHdhcyBmb3VuZCIpOwovLyBsb2cubG9nKCJEYXRhT2JqZWN0cyBGb3VuZDogIiwgZmluYWxEYXRhT2JqZWN0cyk7CmUobyl9KX0pfX0se2tleToiZGlzY292ZXJEYXRhT2JqZWN0c1BlclJlcG9ydGVyIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgaT10aGlzLHM9dm9pZCAwO3M9bnx8aS5kb21haW47dmFyIGE9e3R5cGU6InJlYWQiLGZyb206aS5kaXNjb3ZlcnlVUkwsdG86ImRvbWFpbjovL3JlZ2lzdHJ5LiIrcyxib2R5OntyZXNvdXJjZToiL2NvbW0iLGNyaXRlcmlhOntyZXBvcnRlcjplfX19O3JldHVybiB0Lmxlbmd0aD4wJiYoYS5ib2R5LmNyaXRlcmlhLmRhdGFTY2hlbWVzPXQpLHIubGVuZ3RoPjAmJihhLmJvZHkuY3JpdGVyaWEucmVzb3VyY2VzPXIpLG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24oZSx0KXtpLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihyKXt2YXIgbj1yLmJvZHkudmFsdWUsbz1bXTtmb3IodmFyIGkgaW4gbilvLnB1c2gobltpXSk7aWYoIShvLmxlbmd0aD4wKSlyZXR1cm4gdCgiTm8gRGF0YU9iamVjdCB3YXMgZm91bmQiKTsKLy8gbG9nLmxvZygiRGF0YU9iamVjdHMgRm91bmQ6ICIsIGZpbmFsRGF0YU9iamVjdHMpOwplKG8pfSl9KX19LHtrZXk6ImRpc2NvdmVyVXNlcklkc1BlckdVSUQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXsKLy8gbG9nLmxvZygiR08gZ3JhcGhDb25uZWN0b3I6IiwgZ3VpZCk7CnQuZ3JhcGhDb25uZWN0b3IucXVlcnlHbG9iYWxSZWdpc3RyeShlKS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdJbmZvcm1hdGlvbiByZXR1cm5lZCBmcm9tIEdsb2JhbCBSZWdpc3RyeTogJywgZ3JhcGhDb25uZWN0b3JDb250YWN0RGF0YSk7CmlmKCJzdHJpbmciPT10eXBlb2YgZXx8IWUpcmV0dXJuIG4oIlVuc3VjY2Vzc2Z1bCBkaXNjb3ZlciB1c2VySURzIGJ5IEdVSUQiKTt2YXIgdD1lLnVzZXJJRHM7aWYoMD09PXQubGVuZ3RoKXJldHVybiBuKCJVc2VySURzIG5vdCBhdmFpbGFibGUiKTtyKHQpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9KX0pfX0se2tleToiZGlzY292ZXJHVUlEUGVyVXNlcklkZW50aWZpZXIiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBvLmRlZmF1bHQoZnVuY3Rpb24ocixuKXt0Lmh0dHBSZXF1ZXN0LmdldCgiaHR0cHM6Ly9yZXRoaW5rLnRsYWJzY2xvdWQuY29tL2Rpc2NvdmVyeS9yZXN0L2Rpc2NvdmVyL2xvb2t1cD9zZWFyY2hxdWVyeT0iK2UpLnRoZW4oZnVuY3Rpb24oZSl7Ci8vIGxvZy5sb2coJ2Rpc2NvdmVyIEdVSUQgYnkgdXNlciBpZGVudGlmaWVyJywganNvbik7CnZhciB0PUpTT04ucGFyc2UoZSksbz10LnJlc3VsdHMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPWUucmV0aGlua0lEfSk7aWYoMD09PW8ubGVuZ3RoKXJldHVybiBuKCJVbnN1Y2Nlc3NmdWwgZGlzY292ZXIgR1VJRCBieSB1c2VyIGlkZW50aWZpZXIiKTt2YXIgaT1vLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXRoaW5rSUR9KTtyZXR1cm4gcihpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCJIVFRQIFJlcXVlc3QgZXJyb3I6ICIsIGVycik7CnJldHVybiBuKGUpfSl9KX19LHtrZXk6Im1lc3NhZ2VCdXMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlQnVzfSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fbWVzc2FnZUJ1cz1lfX1dKSxDb3JlRGlzY292ZXJ5fSgpO3QuZGVmYXVsdD1wLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwMSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDIwOSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigzMSkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig4KSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDk4KSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDk3KSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDEpLHk9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChwKSxoPXIoMiksdj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGgpLGc9cig3KSxiPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oZyksXz1yKDE0KSxtPWIuZ2V0TG9nZ2VyKCJEYXRhT2JqZWN0c1N0b3JhZ2UiKSxSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gRGF0YU9iamVjdHNTdG9yYWdlKGUsdCl7aWYoKDAseS5kZWZhdWx0KSh0aGlzLERhdGFPYmplY3RzU3RvcmFnZSksIWUpdGhyb3cgbmV3IEVycm9yKCJbU3RvcmUgRGF0YSBPYmplY3RzXSAtIE5lZWRzIHRoZSBzdG9yYWdlTWFuYWdlciBjb21wb25lbnQiKTt0aGlzLl9zdG9yYWdlTWFuYWdlcj1lLHRoaXMuX3N0b3JlRGF0YU9iamVjdD10LHRoaXMuX2NhY2hlPXt9fS8qKgogICAqIEBkZXNjcmlwdGlvbiBzaG91bGQgc2V0IHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBkYXRhT2JqZWN0VVJMIHRvIGJlIHJlc3VtZWQgaWYgbmVjZXNzYXJ5OwogICAqCiAgICogQHBhcmFtIHtEYXRhT2JqZWN0VVJMfSB1cmwgLSBkYXRhT2JqZWN0VVJMIHRvIGJlIHNhdmVkOwogICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNSZXBvcnRlciAtIHRoZSBvYmplY3QgdG8gYmUgc2F2ZWQgaXMgYSByZXBvcnRlcgogICAqIEBwYXJhbSB7U2NoZW1hVVJMfSBzY2hlbWEgLSB0aGUgc2NoZW1hIHVybAogICAqIEBwYXJhbSB7U3RyaW5nfSBzdGF0dXMgLSB0aGUgc3RhdHVzIG9mIGN1cnJlbnQgZGF0YU9iamVjdAogICAqIEBwYXJhbSB7SHlwZXJ0eVVSTH0gcmVwb3J0ZXIgLSB0aGUgUmVwb3J0ZXIgaHlwZXJ0eVVSTAogICAqIEBwYXJhbSB7QXJyYXk8SHlwZXJ0eVVSTD59IHN1YnNjcmlwdGlvbiAtIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucwogICAqIEBwYXJhbSB7QXJyYXk8RGF0YU9iamVjdENoaWxkPn0gY2hpbGRyZW4gLSBsaXN0IG9mIGNoaWxkcyBvZiBkYXRhT2JqZWN0VVJMCiAgICogQHBhcmFtIHtBcnJheTxTdHJpbmc+fSBjaGlsZHJlbnMgLSBsaXN0IG9mIGNoaWxkcmVucywgbGlrZSwgJ2NoYXRtZXNzYWdlJzsKICAgKiBAcGFyYW0ge0FycmF5PFVzZXJVUkx9IHN1YnNjcmliZXJVc2VyIC0gbGlzdCBvZiBzdWJzY3JpYmVkIHVzZXJzOwogICAqLwpyZXR1cm4oMCx2LmRlZmF1bHQpKERhdGFPYmplY3RzU3RvcmFnZSxbe2tleToic2V0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdG9yZURhdGFPYmplY3Qscj10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZS5pc1JlcG9ydGVyKTsvLyBUT0RPOmRvIHdlIG5lZWQgdGhpcz8KLy8gVE9ETzpkbyB3ZSBuZWVkIHRoaXM/Ci8qaWYgKHNjaGVtYSkgc3RvcmVEYXRhT2JqZWN0W3R5cGVdW21ldGFkYXRhLnVybF0uc2NoZW1hID0gc2NoZW1hOwogICAgICBpZiAoc3RhdHVzKSBzdG9yZURhdGFPYmplY3RbdHlwZV1bbWV0YWRhdGEudXJsXS5zdGF0dXMgPSBzdGF0dXM7CiAgICAgIGlmIChjaGlsZHJlblJlc291cmNlcykgc3RvcmVEYXRhT2JqZWN0W3R5cGVdW21ldGFkYXRhLnVybF0uY2hpbGRyZW5SZXNvdXJjZXMgPSBjaGlsZHJlblJlc291cmNlczsqLwovLyBUT0RPOiBkbyB3ZSBuZWVkIHRoaXM/Ci8vc3RvcmVEYXRhT2JqZWN0W3R5cGVdW21ldGFkYXRhLnVybF0ub3duZXIgPSBvd25lcjsKcmV0dXJuIHQuaGFzT3duUHJvcGVydHkocil8fCh0W3JdPXt9KSx0W3JdLmhhc093blByb3BlcnR5KGUudXJsKXx8KHRbcl1bZS51cmxdPXt9LHRbcl1bZS51cmxdLnN1YnNjcmlwdGlvbnM9W10sdFtyXVtlLnVybF0uc3Vic2NyaWJlclVzZXJzPVtdLHRbcl1bZS51cmxdLmNoaWxkcmVuT2JqZWN0cz17fSx0W3JdW2UudXJsXS5kYXRhPXt9KSwoMCxkLmRlZmF1bHQpKHRbcl1bZS51cmxdLGUpLGRlbGV0ZSB0W3JdW2UudXJsXS5zdWJzY3JpYmVyVXNlcixkZWxldGUgdFtyXVtlLnVybF0uc3Vic2NyaWJlckh5cGVydHksZS5zdWJzY3JpYmVySHlwZXJ0eSYmIWUuaXNSZXBvcnRlciYmdGhpcy5fdXBkYXRlVG9BcnJheSh0W3JdLGUudXJsLCJzdWJzY3JpcHRpb25zIixlLnN1YnNjcmliZXJIeXBlcnR5KSxlLnN1YnNjcmliZXJVc2VyJiZ0W3JdW2UudXJsXS5zdWJzY3JpYmVyVXNlcnMuaW5kZXhPZihlLnN1YnNjcmliZXJVc2VyKSYmdGhpcy5fdXBkYXRlVG9BcnJheSh0W3JdLGUudXJsLCJzdWJzY3JpYmVyVXNlcnMiLGUuc3Vic2NyaWJlclVzZXIpLHRoaXMuX3N0b3JlRGF0YU9iamVjdD10LHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSx0KSx0W3JdW2UudXJsXX19LHtrZXk6InNhdmVEYXRhIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzLl9zdG9yZURhdGFPYmplY3QsaT10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZSk7aWYoIW98fCFvW2ldfHwhb1tpXVt0XSlyZXR1cm4gdm9pZCBtLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSBzYXZlIGRhdGFdIC0gbm90IHNhdmVkIik7aWYobS5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gc2F2ZURhdGFdIC0gIixlLGksdCxyLG4pLG9baV1bdF0uaGFzT3duUHJvcGVydHkoImRhdGEiKXx8KG9baV1bdF0uZGF0YT17fSkscil7dmFyIHM9dm9pZCAwO3M9Im9iamVjdCI9PT0odm9pZCAwPT09bj8idW5kZWZpbmVkIjooMCxmLmRlZmF1bHQpKG4pKT8oMCxfLmRlZXBDbG9uZSkobik6biwoMCxfLmFzc2lnbikob1tpXVt0XS5kYXRhLHIscyl9ZWxzZSBvW2ldW3RdLmRhdGE9KDAsXy5kZWVwQ2xvbmUpKG4pfHx7fTtyZXR1cm4gdGhpcy5fc3RvcmVEYXRhT2JqZWN0PW8sdGhpcy5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLG8pLG9baV1bdF19fSx7a2V5OiJzYXZlQ2hpbGRyZW5zIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzLl9zdG9yZURhdGFPYmplY3QsaT10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZSk7cmV0dXJuIG8mJm9baV0mJm9baV1bdF0/KG9baV1bdF0uaGFzT3duUHJvcGVydHkoImNoaWxkcmVucyIpfHwob1tpXVt0XS5jaGlsZHJlbk9iamVjdHM9e30pLHI/KDAsXy5hc3NpZ24pKG9baV1bdF0uY2hpbGRyZW5PYmplY3RzLHIsKDAsXy5kZWVwQ2xvbmUpKG4pKTpvW2ldW3RdLmNoaWxkcmVuT2JqZWN0cz0oMCxfLmRlZXBDbG9uZSkobil8fHt9LHRoaXMuX3N0b3JlRGF0YU9iamVjdD1vLHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxvKSxvW2ldW3RdKTp2b2lkIG0ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIHNhdmUgY2hpbGRyZW5zXSAtIG5vdCBzYXZlZCIpfX0se2tleToidXBkYXRlIix2YWx1ZTpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10aGlzLl9zdG9yZURhdGFPYmplY3QsaT10aGlzLl9nZXRUeXBlT2ZPYmplY3QoZSk7aWYoIW98fCFvW2ldfHwhb1tpXVt0XSlyZXR1cm4gdm9pZCBtLmxvZygiW1N0b3JlRGF0YU9iamVjdHMgLSB1cGRhdGVdIC0gbm90IHNhdmVkIik7aWYobS5sb2coIltTdG9yZURhdGFPYmplY3RzIC0gdXBkYXRlXSAtICIsZSxpLHQscixuKSxvW2ldJiZvW2ldW3RdJiZ0JiZyJiZuKXtpZigic3Vic2NyaXB0aW9ucyI9PT1yfHwic3Vic2NyaWJlclVzZXJzIj09PXIpe3ZhciBzPSEwOyJzdWJzY3JpcHRpb25zIj09PXImJihzPSF0aGlzLl9pc093bmVyKG9baV1bdF0sbikpLHMmJnRoaXMuX3VwZGF0ZVRvQXJyYXkob1tpXSx0LHIsbil9ZWxzZSBvW2ldW3RdW3JdPW47cmV0dXJuIHRoaXMuX3N0b3JlRGF0YU9iamVjdD1vLHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLnNldCgic3luY2hlck1hbmFnZXI6T2JqZWN0VVJMcyIsMSxvKSxvW2ldW3RdfX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpcy5fc3RvcmVEYXRhT2JqZWN0LGk9dGhpcy5fZ2V0VHlwZU9mT2JqZWN0KGUpO3JldHVybiBvJiZvW2ldJiZvW2ldW3RdP29baV0mJm9baV1bdF0mJnQmJnImJm4/KCJzdWJzY3JpcHRpb25zIj09PXJ8fCJzdWJzY3JpYmVyVXNlcnMiPT09cj90aGlzLl9yZW1vdmVGcm9tQXJyYXkob1tpXSx0LHIsbik6ZGVsZXRlIG9baV1bdF1bcl0sdGhpcy5fc3RvcmVEYXRhT2JqZWN0PW8sdGhpcy5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLG8pLG9baV1bdF0pOnZvaWQgMDp2b2lkIG0ubG9nKCJbU3RvcmVEYXRhT2JqZWN0cyAtIGRlbGV0ZV0gLSBub3Qgc2F2ZWQiKX19LHtrZXk6ImRlbGV0ZVJlc291cmNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7aWYoZSlyZXR1cm4gdC5nZXRBbGwoKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBvPSgwLGQuZGVmYXVsdCkobix0Ll9zdG9yZURhdGFPYmplY3R8fHt9KTtyZXR1cm4gby5oYXNPd25Qcm9wZXJ0eSgib2JzZXJ2ZXJzIikmJm8ub2JzZXJ2ZXJzLmhhc093blByb3BlcnR5KGUpPyhkZWxldGUgby5vYnNlcnZlcnNbZV0sdC5fc3RvcmFnZU1hbmFnZXIuc2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIiwxLG8pLHQuX3N0b3JlRGF0YU9iamVjdD1vLHIoby5vYnNlcnZlcnNbZV0pKTpvLmhhc093blByb3BlcnR5KCJyZXBvcnRlcnMiKSYmby5yZXBvcnRlcnMuaGFzT3duUHJvcGVydHkoZSk/KGRlbGV0ZSBvLnJlcG9ydGVyc1tlXSx0Ll9zdG9yYWdlTWFuYWdlci5zZXQoInN5bmNoZXJNYW5hZ2VyOk9iamVjdFVSTHMiLDEsbyksdC5fc3RvcmVEYXRhT2JqZWN0PW8scihvLnJlcG9ydGVyc1tlXSkpOnZvaWQgcigiVGhlICIrZSsiIGRvc2VuXHQgZXhpc3RzLCBub3RoaW5nIHdhcyBkZWxldGVkIil9KTtuKG5ldyBFcnJvcigiW1N0b3JlRGF0YU9iamVjdHNdIC0gQ2FuJ3QgZGVsZXRlIHRoaXMgIitlKSl9KX19LHtrZXk6ImdldEFsbCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZU1hbmFnZXIuZ2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIil9fSx7a2V5OiJnZXREYXRhT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fc3RvcmFnZU1hbmFnZXIuZ2V0KCJzeW5jaGVyTWFuYWdlcjpPYmplY3RVUkxzIikudGhlbihmdW5jdGlvbih0KXt2YXIgbz10Lmhhc093blByb3BlcnR5KCJvYnNlcnZlcnMiKT90Lm9ic2VydmVyczp7fSxpPXQuaGFzT3duUHJvcGVydHkoInJlcG9ydGVycyIpP3QucmVwb3J0ZXJzOnt9LGE9KDAscy5kZWZhdWx0KShpKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZX0pLHU9KDAscy5kZWZhdWx0KShvKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZX0pLGM9dm9pZCAwO3JldHVybiB1JiYoYz10Lm9ic2VydmVyc1t1XSksYSYmKGM9dC5yZXBvcnRlcnNbYV0pLG0uaW5mbygiW1N0b3JlRGF0YU9iamVjdHMgLSBnZXREYXRhT2JqZWN0XSAtIGZvciBvYnNlcnZlcjogIix1KSxtLmluZm8oIltTdG9yZURhdGFPYmplY3RzIC0gZ2V0RGF0YU9iamVjdF0gLSBmb3IgcmVwb3J0ZXJzOiAiLGEpLG0uaW5mbygiW1N0b3JlRGF0YU9iamVjdHMgLSBnZXREYXRhT2JqZWN0XSAtIHJlc29sdmU6ICIsYyksYz9yKGMpOm4oIk5vIGRhdGFPYmplY3Qgd2FzIGZvdW5kIil9KX0pfX0se2tleToiZ2V0UmVzb3VyY2VzQnlDcml0ZXJpYSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgdS5kZWZhdWx0KGZ1bmN0aW9uKG4pe3ZhciBvPXIuX2dldFR5cGVPZk9iamVjdCh0KTtyLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIG0ubG9nKCJbRGF0YU9iamVjdHNTdG9yYWdlLmdldFJlc291cmNlc0J5Q3JpdGVyaWFdIGRvbid0IGhhdmUgc3RvcmVkIGRhdGEgb2JqZWN0cyIpLG4obnVsbCk7aWYoZS5ib2R5JiZlLmJvZHkuaGFzT3duUHJvcGVydHkoInJlc3VtZSIpJiYhZS5ib2R5LnJlc3VtZSlyZXR1cm4gbihudWxsKTsKLy8gY2hlY2sgaWYgdGhlIG1lc3NhZ2UgaGF2ZSBvdGhlciBjcml0ZXJpYQovLyBpZiBub3Qgc2VhcmNoIGZvciBvbiB0aGUgJ2Zyb20nIG9mIHRoZSBtZXNzYWdlLgp2YXIgaT1bXSxhPXIuX2hhc1N1YnNjcmlwdGlvbih0W29dLGUuZnJvbSksdT1yLl9zZWFyY2hPd25lcih0W29dLGUuZnJvbSksYz1yLl9jaGVja1Byb3Rvc3R1YlJlc3VtZSh0LGUpO2lmKG0ubG9nKCJbU3RvcmVkRGF0YU9iamVjdHMgLSBnZXRSZXNvdXJjZXNCeUNyaXRlcmlhXToiLHQsZSxhLHUpLCEoZS5oYXNPd25Qcm9wZXJ0eSgiZnJvbSIpJiZhfHx1fHxjKSlyZXR1cm4gbihudWxsKTt2YXIgZj12b2lkIDA7Zj11P3IuX2dldFJlc291cmNlc0J5T3duZXIodFtvXSxlLmZyb20pOnIuX2dldFJlc291cmNlc0J5U3Vic2NyaXB0aW9uKHRbb10sZS5mcm9tKTt2YXIgbD1bXTtlLmJvZHkmJmUuYm9keS5pZGVudGl0eSYmKGw9ci5fZ2V0UmVzb3VyY2VzQnlJZGVudGl0eSh0W29dLGUuYm9keS5pZGVudGl0eSkpOwovL1RPRE86IHJlbW92ZSBzY2hlbWEgc2luY2UgbWV0YWRhdGEgYWxyZWFkeSBpbmNsdWRlcyB0aGUgc2NoZW1hPwp2YXIgZD1bXTtlLmJvZHkmJmUuYm9keS5zY2hlbWEmJihkPXIuX2dldFJlc291cmNlc0J5U2NoZW1hKHRbb10sZS5ib2R5LnNjaGVtYSkpO3ZhciBwPVtdO2lmKGUuYm9keSYmZS5ib2R5LnZhbHVlKXt2YXIgeT1lLmJvZHkudmFsdWU7ZGVsZXRlIHkuZGF0YSxwPXIuX2dldFJlc291cmNlc0J5TWV0YWRhdGEodFtvXSx5KX12YXIgaD1bXTtpZihlLmJvZHkmJmUuYm9keS52YWx1ZSYmZS5ib2R5LnZhbHVlLmRhdGEmJihoPXIuX2dldFJlc291cmNlc0J5RGF0YSh0W29dLGUuYm9keS52YWx1ZS5kYXRhKSksCi8vIHlvdSBjYW4gcGFzcyBhcyBhcnJheXMgYXMgeW91IHdhbnQuLiBpdCB3aWxsIGJlIG1lcmdlZCBpbiBvbiBwbGFjZQovLyByZW1vdmVkIGR1cGxpY2F0ZXM7Cmk9ci5faW50ZXJzZWN0aW9uKGYsbCxkLGgscCksMD09aS5sZW5ndGgmJmMmJiJvYnNlcnZlcnMiPT1vJiZlLmZyb20uc3BsaXQoInByb3Rvc3R1YiIpLmxlbmd0aD4wKXt2YXIgdj10W29dLGc9KDAsXy5kaXZpZGVVUkwpKGUuZnJvbSkuZG9tYWluOygwLHMuZGVmYXVsdCkodikuZmlsdGVyKGZ1bmN0aW9uKGUpe3ZhciB0PXZbZV0uc3Vic2NyaXB0aW9uczt0LmZvckVhY2goZnVuY3Rpb24odCl7KDAsXy5kaXZpZGVVUkwpKHQpLmRvbWFpbj09ZyYmaS5wdXNoKGUpfSl9KX12YXIgYj17fTtpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHI9dFtvXVtlXTtyZXR1cm4gYltlXT1yLGJ9KSxtLmxvZygiW1N0b3JlIERhdGEgT2JqZWN0c10gLSAiLGIpLG4oYil9KX0pfX0se2tleToiX2dldFJlc291cmNlc0J5SWRlbnRpdHkiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/KDAscy5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7cmV0dXJuIGVbcl0uc3Vic2NyaWJlclVzZXJzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9KS5sZW5ndGh9KTpbXX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeU93bmVyIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPygwLHMuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnJlcG9ydGVyPT09dH0pOltdfX0se2tleToiX2dldFJlc291cmNlc0J5U3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPygwLHMuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnN1YnNjcmlwdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH0pLmxlbmd0aH0pOltdfX0se2tleToiX2dldFJlc291cmNlc0J5U2NoZW1hIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybigwLHMuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3ZhciBuPWVbcl07cmV0dXJuKDAscy5kZWZhdWx0KShuKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuInNjaGVtYSI9PT1lJiZuW2VdPT09dH0pLmxlbmd0aH0pfX0se2tleToiX2dldFJlc291cmNlc0J5TWV0YWRhdGEiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/KDAscy5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIG49ZVtyXTtyZXR1cm4oMCxzLmRlZmF1bHQpKG4pLmZpbHRlcihmdW5jdGlvbihlKXsKLy8gc2VhcmNoIG9uIHN0b3JlRGF0YU9iamVjdHMgZm9yIHNwZWNpZmljIGtleSBwcm92aWRlZCBmcm9tIGRhdGE7CnJldHVybigwLHMuZGVmYXVsdCkodCkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlPT09ciYmbltlXT09PXRbcl19KS5sZW5ndGh9KS5sZW5ndGh9KTpbXX19LHtrZXk6Il9nZXRSZXNvdXJjZXNCeURhdGEiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/KDAscy5kZWZhdWx0KShlKS5maWx0ZXIoZnVuY3Rpb24ocil7dmFyIG49ZVtyXS5oYXNPd25Qcm9wZXJ0eSgiZGF0YSIpP2Vbcl0uZGF0YTp7fTtyZXR1cm4oMCxzLmRlZmF1bHQpKG4pLmZpbHRlcihmdW5jdGlvbihlKXsKLy8gc2VhcmNoIG9uIHN0b3JlRGF0YU9iamVjdHMgZm9yIHNwZWNpZmljIGtleSBwcm92aWRlZCBmcm9tIGRhdGE7CnJldHVybigwLHMuZGVmYXVsdCkodCkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlPT09ciYmbltlXT09PXRbcl19KS5sZW5ndGh9KS5sZW5ndGh9KTpbXX19LHtrZXk6Il9oYXNTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFlJiYoMCxzLmRlZmF1bHQpKGUpLmZpbHRlcihmdW5jdGlvbihyKXtyZXR1cm4gZVtyXS5zdWJzY3JpcHRpb25zLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9KS5sZW5ndGh9KS5sZW5ndGg+MH19LHtrZXk6Il9zZWFyY2hPd25lciIsdmFsdWU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4hIWUmJigwLHMuZGVmYXVsdCkoZSkuZmlsdGVyKGZ1bmN0aW9uKHIpe3JldHVybiBlW3JdLnJlcG9ydGVyPT09dH0pLmxlbmd0aD4wfX0se2tleToiX2NoZWNrUHJvdG9zdHViUmVzdW1lIix2YWx1ZTpmdW5jdGlvbihlLHQpe2lmKCFlKXJldHVybiExO2lmKHQuaGFzT3duUHJvcGVydHkoImJvZHkiKSYmdC5ib2R5Lmhhc093blByb3BlcnR5KCJ2YWx1ZSIpJiZ0LmJvZHkudmFsdWUuaGFzT3duUHJvcGVydHkoInJlcG9ydGVyIikpe3ZhciByPXQuYm9keS52YWx1ZS5yZXBvcnRlcjtpZihlLmhhc093blByb3BlcnR5KCJyZXBvcnRlcnMiKSl7dmFyIG49ZS5yZXBvcnRlcnM7cmV0dXJuKDAscy5kZWZhdWx0KShuKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV0ucmVwb3J0ZXI9PT1yfSkubGVuZ3RoPjB9cmV0dXJuITF9aWYoZS5oYXNPd25Qcm9wZXJ0eSgib2JzZXJ2ZXJzIikpe3ZhciBvPWUub2JzZXJ2ZXJzLGk9KDAsXy5kaXZpZGVVUkwpKHQuZnJvbSkuZG9tYWluO3JldHVybigwLHMuZGVmYXVsdCkobykuZmlsdGVyKGZ1bmN0aW9uKGUpe3ZhciB0PW9bZV0uc3Vic2NyaXB0aW9ucyxyPSExO2lmKHQuZm9yRWFjaChmdW5jdGlvbihlKXsoMCxfLmRpdmlkZVVSTCkoZSkuZG9tYWluPT1pJiYocj0hMCl9KSxyKXJldHVybiEwfSkubGVuZ3RoPjB9fX0se2tleToiX2lzT3duZXIiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuISFlJiZlLnJlcG9ydGVyPT09dH19LHtrZXk6Il9pbnRlcnNlY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9KDAsby5kZWZhdWx0KShhcmd1bWVudHMpLHQ9ZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb25jYXQodCl9KS5maWx0ZXIoZnVuY3Rpb24oZSx0LHIpe3JldHVybiByLmluZGV4T2YoZSk9PT10fSk7cmV0dXJuIG0ubG9nKCJEYXRhT2JqZWN0c1N0b3JhZ2UuX2ludGVyc2VjdGlvbl0gUmVzdWx0IGFuIHVuaXF1ZSBhcnJheSBvZiBzdHJpbmdzOiAiLHQpLHR9fSx7a2V5OiJfdXBkYXRlVG9BcnJheSIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7bS5sb2coIltEYXRhT2JqZWN0c1N0b3JhZ2VdIC0gX3VwZGF0ZVRvQXJyYXk6ICIsZSx0LHIsbiksLTE9PT1lW3RdW3JdLmluZGV4T2YobikmJmVbdF1bcl0ucHVzaChuKX19LHtrZXk6Il9yZW1vdmVGcm9tQXJyYXkiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWVbdF1bcl0uaW5kZXhPZihuKTstMT09PW8mJmVbdF1bcl0uc3BsaWNlKG8sMSl9fSx7a2V5OiJfaGFzVmFsdWUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eSh0KSYmZVt0XT09PXJ9fSx7a2V5OiJfZ2V0VHlwZU9mT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT8icmVwb3J0ZXJzIjoib2JzZXJ2ZXJzIn19XSksRGF0YU9iamVjdHNTdG9yYWdlfSgpO3QuZGVmYXVsdD1SLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7cigxMzcpLHIoNTAzKSxlLmV4cG9ydHM9cigxMykuQXJyYXkuZnJvbX0sLyogNTAzICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7dmFyIG49cig2NSksbz1yKDIxKSxpPXIoNzMpLHM9cigxOTIpLGE9cigxOTMpLHU9cigxMjkpLGM9cig1MDQpLGY9cigxOTQpO28oby5TK28uRiohcigxOTkpKGZ1bmN0aW9uKGUpe0FycmF5LmZyb20oZSl9KSwiQXJyYXkiLHsKLy8gMjIuMS4yLjEgQXJyYXkuZnJvbShhcnJheUxpa2UsIG1hcGZuID0gdW5kZWZpbmVkLCB0aGlzQXJnID0gdW5kZWZpbmVkKQpmcm9tOmZ1bmN0aW9uKGUpe3ZhciB0LHIsbyxsLGQ9aShlKSxwPSJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXkseT1hcmd1bWVudHMubGVuZ3RoLGg9eT4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsdj12b2lkIDAhPT1oLGc9MCxiPWYoZCk7Ci8vIGlmIG9iamVjdCBpc24ndCBpdGVyYWJsZSBvciBpdCdzIGFycmF5IHdpdGggZGVmYXVsdCBpdGVyYXRvciAtIHVzZSBzaW1wbGUgY2FzZQppZih2JiYoaD1uKGgseT4yP2FyZ3VtZW50c1syXTp2b2lkIDAsMikpLHZvaWQgMD09Ynx8cD09QXJyYXkmJmEoYikpZm9yKHQ9dShkLmxlbmd0aCkscj1uZXcgcCh0KTt0Pmc7ZysrKWMocixnLHY/aChkW2ddLGcpOmRbZ10pO2Vsc2UgZm9yKGw9Yi5jYWxsKGQpLHI9bmV3IHA7IShvPWwubmV4dCgpKS5kb25lO2crKyljKHIsZyx2P3MobCxoLFtvLnZhbHVlLGddLCEwKTpvLnZhbHVlKTtyZXR1cm4gci5sZW5ndGg9ZyxyfX0pfSwvKiA1MDQgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0Ijt2YXIgbj1yKDM5KSxvPXIoNzYpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQscil7dCBpbiBlP24uZihlLHQsbygwLHIpKTplW3RdPXJ9fSwvKiA1MDUgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigzMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig3KSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDE0KSx5PXIoNTA2KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoeSksdj1kLmdldExvZ2dlcigiSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UiKSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UoZSx0LHIsbil7aWYoKDAsdS5kZWZhdWx0KSh0aGlzLEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlKSwhcil0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZSBjb25zdHJ1Y3Rvcl0gbWFuZGF0b3J5IHN0b3JhZ2VNYW5hZ2VyIHBhcmFtZXRlciBtaXNzaW5nIik7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UgY29uc3RydWN0b3JdIG1hbmRhdG9yeSBydW50aW1lVVJMIHBhcmFtZXRlciBtaXNzaW5nIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UgY29uc3RydWN0b3JdIG1hbmRhdG9yeSBidXMgcGFyYW1ldGVyIG1pc3NpbmciKTt2YXIgbz10aGlzO28uX2J1cz10LG8uX3N0b3JhZ2VMaW1pdD0uOSwvLyB0aGUgc2F2ZSBzdG9yYWdlTGltaXQ7Cm8uX3VybD1lKyIvc3RvcmFnZSIsby5fc3RvcmFnZU1hbmFnZXI9cixvLnByb21pc2VRdWV1ZT1uZXcgaC5kZWZhdWx0LG8uX2h5cGVydHlSZXNvdXJjZXM9bix0LmFkZExpc3RlbmVyKG8uX3VybCxmdW5jdGlvbihlKXtzd2l0Y2godi5pbmZvKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2VdIE1lc3NhZ2UgUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJjcmVhdGUiOm8uX29uQ3JlYXRlKGUpO2JyZWFrO2Nhc2UicmVhZCI6by5fb25SZWFkKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjpvLl9vbkRlbGV0ZShlKX19KX0vKioKICAgKiBjaGVjayB0aGUgYXZhaWxhYmxlIHN0b3JhZ2UgcXVvdGEKICAgKgogICAqIEBtZW1iZXJvZiBIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZQogICAqLwpyZXR1cm4oMCxmLmRlZmF1bHQpKEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlLFt7a2V5OiJjaGVja1N0b3JhZ2VRdW90YSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHQscil7aWYoZS5fYXZhaWxhYmxlUXVvdGEmJmUuX3VzYWdlKXJldHVybiB0KCgwLHAuYXZhaWxhYmxlU3BhY2UpKGUuX3VzYWdlLGUuX2F2YWlsYWJsZVF1b3RhKSk7bmF2aWdhdG9yJiZuYXZpZ2F0b3Iuc3RvcmFnZS5lc3RpbWF0ZSgpLnRoZW4oZnVuY3Rpb24ocil7ZS5fYXZhaWxhYmxlUXVvdGE9ci5xdW90YSxlLl91c2FnZT1yLnVzYWdlLHQoKDAscC5hdmFpbGFibGVTcGFjZSkoZS5fdXNhZ2UsZS5fYXZhaWxhYmxlUXVvdGEpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3YuZXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZV0gQ2hlY2tTdG9yYWdlUXVvdGEgZXJyb3I6ICIsZSkscihlKX0pfSl9fSx7a2V5OiJfb25DcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keXx8IWUuYm9keS52YWx1ZSl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZS5fb25DcmVhdGVdIG1hbmRhdG9yeSBtZXNzYWdlIGJvZHkgdmFsdWUgbWlzc2luZzogIixlKTt2YXIgcj1lLmJvZHkudmFsdWUsbj1yLmNvbnRlbnRVUkwsbz0iIjtpZihuKXt2YXIgaT1uWzBdLHM9aS5zdWJzdHIoaS5sYXN0SW5kZXhPZigiLyIpKzEpO289dC5fdXJsKyIvIitzfWVsc2Ugbj1bXSxvPXQuX3VybCsiLyIrKDAscC5nZW5lcmF0ZUdVSUQpKCk7dC5faHlwZXJ0eVJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShvKXx8KG4ucHVzaChvKSxyLmNvbnRlbnRVUkw9biksdGhpcy5faHlwZXJ0eVJlc291cmNlc1tvXT1yLHRoaXMucHJvbWlzZVF1ZXVlLmFkZCh0aGlzLl90b1NhdmUobyxlLHIpKX19LHtrZXk6Il90b1NhdmUiLHZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG8saSl7dmFyIHM9ZnVuY3Rpb24ocil7dmFyIG89e2Zyb206dC50byx0bzp0LmZyb20saWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7dmFsdWU6ZSxjb2RlOjUwMCxkZXNjcmlwdGlvbjpyfX07cmV0dXJuIG4uX2J1cy5wb3N0TWVzc2FnZShvKSxpKHIpfTtuLmNoZWNrU3RvcmFnZVF1b3RhKCkudGhlbihmdW5jdGlvbihlKXtpZihyLnNpemU+ZS5xdW90YSl7dmFyIHQ9IlRoZSBzdG9yYWdlIGRvIG5vdCBoYXZlIHNwYWNlIHRvIHN0b3JlIHRoYXQgcmVzb3VyY2UiO3Rocm93IHModCksRXJyb3IodCl9dmFyIG89ZS5xdW90YSxpPWUudXNhZ2Urci5zaXplO3JldHVybiEoZS5wZXJjZW50Pj1uLl9zdG9yYWdlTGltaXR8fGk+byl8fG4uX2dldE9sZGVyUmVzb3VyY2VzKHIuc2l6ZSl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uX3N0b3JhZ2VNYW5hZ2VyLnNldChlLDEscil9KS50aGVuKGZ1bmN0aW9uKCl7dmFyIHI9e2Zyb206dC50byx0bzp0LmZyb20saWQ6dC5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7dmFsdWU6ZSxjb2RlOjIwMH19O3JldHVybiBuLl9idXMucG9zdE1lc3NhZ2Uociksdi5sb2coIlN1Y2Nlc3MiKSxvKCl9KS5jYXRjaChzKX0pfX0se2tleToiX2dldE9sZGVyUmVzb3VyY2VzIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5fc3RvcmFnZU1hbmFnZXIuZ2V0KCkudGhlbihmdW5jdGlvbihpKXt2YXIgYT0oMCxvLmRlZmF1bHQpKGkpLHU9MCxjPWEuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBpW2VdLmNyZWF0ZWQ8aVt0XS5jcmVhdGVkfSkucmVkdWNlKGZ1bmN0aW9uKHIsbil7dmFyIG89dC5faHlwZXJ0eVJlc291cmNlc1tuXTtyZXR1cm4gdi5sb2coIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZV0gX2dldE9sZGVyUmVzb3VyY2VzOiAiLHUsZSxuLHQuX2F2YWlsYWJsZVF1b3RhKSx1PD1lJiYodSs9by5zaXplLHIucHVzaChuKSkscn0sW10pLGY9Yy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3N0b3JhZ2VNYW5hZ2VyLmRlbGV0ZShlKX0pO3MuZGVmYXVsdC5hbGwoZikudGhlbihmdW5jdGlvbigpe3IoITApfSkuY2F0Y2goZnVuY3Rpb24oZSl7bihlKX0pfSl9KX19LHtrZXk6Il9vblJlYWQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keXx8IWUuYm9keS5yZXNvdXJjZSl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZS5fb25SZWFkXSBtYW5kYXRvcnkgbWVzc2FnZSBib2R5IHJlc291cmNlIG1pc3Npbmc6ICIsZSk7dmFyIHI9ZS5ib2R5LnJlc291cmNlLG49e2Zyb206ZS50byx0bzplLmZyb20saWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7fX07Ci8vIGxldCBjb250ZW50ID0gX3RoaXMuX2h5cGVydHlSZXNvdXJjZXNbY29udGVudFVybF07CnYuaW5mbygiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlLl9vblJlYWRdIGdldCByZXNvdXJjZVVSTDoiLHIpLHRoaXMuX3N0b3JhZ2VNYW5hZ2VyLmdldCgicmVzb3VyY2VVUkwiLHIpLnRoZW4oZnVuY3Rpb24oZSl7di5pbmZvKCJbSHlwZXJ0eVJlc291cmNlc1N0b3JhZ2UuX29uUmVhZF0gZm91bmQgY29udGVudDoiLGUpLGU/ImZpbGUiPT09ZS5yZXNvdXJjZVR5cGU/dC5fb25SZWFkRmlsZShuLGUpOihuLmJvZHkuY29kZT0yMDAsbi5ib2R5LnAycD0hMCxuLmJvZHkudmFsdWU9ZSx0Ll9idXMucG9zdE1lc3NhZ2UobikpOihuLmJvZHkuY29kZT00MDQsbi5ib2R5LmRlc2M9IkNvbnRlbnQgTm90IEZvdW5kIGZvciAiK3IsdC5fYnVzLnBvc3RNZXNzYWdlKG4pKX0pfX0se2tleToiX29uUmVhZEZpbGUiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxuPW5ldyBGaWxlUmVhZGVyO2lmKG4ub25sb2FkPWZ1bmN0aW9uKG4pe3YuaW5mbygiW0ZpbGVIeXBlcnR5UmVzb3VyY2UuaW5pdF0gZmlsZSBsb2FkZWQgIixuKSxlLmJvZHkuY29kZT0yMDAsZS5ib2R5LnAycD0hMCxlLmJvZHkudmFsdWU9KDAscC5kZWVwQ2xvbmUpKHQpLGUuYm9keS52YWx1ZS5jb250ZW50PW4udGFyZ2V0LnJlc3VsdCxyLl9idXMucG9zdE1lc3NhZ2UoZSl9LHQubWltZXR5cGUuaW5jbHVkZXMoInRleHQvIikpbi5yZWFkQXNUZXh0KHQuY29udGVudCk7ZWxzZXt2YXIgbz10LmNvbnRlbnQsaT12b2lkIDA7aT1BcnJheS5pc0FycmF5KG8pP25ldyBCbG9iKG8se3R5cGU6dC5taW1ldHlwZX0pOm5ldyBCbG9iKFtvXSx7dHlwZTp0Lm1pbWV0eXBlfSksbi5yZWFkQXNBcnJheUJ1ZmZlcihpKX19fSx7a2V5OiJfb25EZWxldGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUuYm9keSl0aHJvdyBuZXcgRXJyb3IoIltIeXBlcnR5UmVzb3VyY2VzU3RvcmFnZS5fb25EZWxldGVdIG1hbmRhdG9yeSBtZXNzYWdlIGJvZHkgbWlzc2luZzogIixlKTtpZihlLmJvZHkucmVzb3VyY2UpZGVsZXRlIHQuX2h5cGVydHlSZXNvdXJjZXNbZS5ib2R5LnJlc291cmNlXTtlbHNle2lmKCFlLmJvZHkucmVzb3VyY2VzKXRocm93IG5ldyBFcnJvcigiW0h5cGVydHlSZXNvdXJjZXNTdG9yYWdlLl9vbkRlbGV0ZV0gbWFuZGF0b3J5IHJlc291cmNlIG1pc3Npbmc6ICIsZSk7ZS5ib2R5LnJlc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2RlbGV0ZSB0Ll9oeXBlcnR5UmVzb3VyY2VzW2VdfSl9dC5fc3RvcmFnZU1hbmFnZXIuZGVsZXRlKCJyZXNvdXJjZVVSTCIsZS5ib2R5LnJlc291cmNlKS50aGVuKGZ1bmN0aW9uKCl7dmFyIHI9e2Zyb206ZS50byx0bzplLmZyb20saWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsYm9keTp7Y29kZToyMDB9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9KS5jYXRjaChmdW5jdGlvbihyKXt2YXIgbj17ZnJvbTplLnRvLHRvOmUuZnJvbSxpZDplLmlkLHR5cGU6InJlc3BvbnNlIixib2R5Ontjb2RlOjQwMCxkZXNjcmlwdGlvbjpyfX07dC5fYnVzLnBvc3RNZXNzYWdlKG4pfSl9fV0pLEh5cGVydHlSZXNvdXJjZXNTdG9yYWdlfSgpO3QuZGVmYXVsdD1nLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDUwNyksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9ZnVuY3Rpb24oKXsKLy8gVE9ETzogSW1wcm92ZSB0aGlzIFF1ZXVpbmcKZnVuY3Rpb24gUHJvbWlzZVF1ZXVlKGUpeygwLHUuZGVmYXVsdCkodGhpcyxQcm9taXNlUXVldWUpLHRoaXMuZmx1c2hpbmc9ITEsdGhpcy5Qcm9taXNlPXMuZGVmYXVsdCx0aGlzLmNvbmN1cnJlbmN5PSJudW1iZXIiIT10eXBlb2YgZT8xOmUsdGhpcy5wcm9taXNlcz1bXSx0aGlzLnF1ZXVlPVtdLHRoaXMuaXNQcm9jZXNzaW5nPSExfXJldHVybigwLGYuZGVmYXVsdCkoUHJvbWlzZVF1ZXVlLFt7a2V5OiJkb25lIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmNhbGxiYWNrPWV9fSx7a2V5OiJhZGQiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5xdWV1ZS5wdXNoKGUpLCF0aGlzLmlzUHJvY2Vzc2luZylyZXR1cm4gdGhpcy5xdWV1ZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuW10uY29uY2F0KCgwLG8uZGVmYXVsdCkoZSksW3RdKX0pfSl9LHMuZGVmYXVsdC5yZXNvbHZlKFtdKSkudGhlbihmdW5jdGlvbihlKXsKLy8gRG8gc29tZXRoaW5nIHdpdGggYWxsIHJlc3VsdHMKdC5pc1Byb2Nlc3Npbmc9ITF9KX19XSksUHJvbWlzZVF1ZXVlfSgpO3QuZGVmYXVsdD1sLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUwNyAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO3QuX19lc01vZHVsZT0hMDt2YXIgbj1yKDIwOSksbz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19KG4pO3QuZGVmYXVsdD1mdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXtmb3IodmFyIHQ9MCxyPUFycmF5KGUubGVuZ3RoKTt0PGUubGVuZ3RoO3QrKylyW3RdPWVbdF07cmV0dXJuIHJ9cmV0dXJuKDAsby5kZWZhdWx0KShlKX19LC8qIDUwOCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH1mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cigyMTApLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigzMSksdT1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGEpLGM9cigxKSxmPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYyksbD1yKDIpLGQ9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChsKSxwPXIoNykseT1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZChwKSxoPXIoMTQpLHY9cigxMDApLGc9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh2KSxiPXIoNTEyKSxfPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYiksbT1yKDUxMyksUj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG0pLHc9cigxMDEpLFM9X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQodyksaz15LmdldExvZ2dlcigiU3luY2hlck1hbmFnZXIiKSxPPWZ1bmN0aW9uKCl7LyogcHJpdmF0ZQogIF91cmw6IFVSTAogIF9idXM6IE1pbmlCdXMKICBfcmVnaXN0cnk6IFJlZ2lzdHJ5CiAgX2FsbG9jYXRvcjogQWRkcmVzc0FsbG9jYXRpb24KICAgX3JlcG9ydGVyczogeyBPYmplY3RVUkw6IFJlcG9ydGVyT2JqZWN0IH0KICBfb2JzZXJ2ZXJzOiB7IE9iamVjdFVSTDogT2JzZXJ2ZXJPYmplY3QgfQogICovCmZ1bmN0aW9uIFN5bmNoZXJNYW5hZ2VyKGUsdCxyLG4sbyxpLHMsYSl7aWYoKDAsZi5kZWZhdWx0KSh0aGlzLFN5bmNoZXJNYW5hZ2VyKSwhZSl0aHJvdyBuZXcgRXJyb3IoIltTeW5jaGVyIE1hbmFnZXJdIC0gbmVlZHMgdGhlIHJ1bnRpbWVVUkwgcGFyYW1ldGVyIik7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWRzIHRoZSBNZXNzYWdlQnVzIGluc3RhbmNlIik7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJbU3luY2hlciBNYW5hZ2VyXSAtIG5lZWRzIHRoZSBSZWdpc3RyeSBpbnN0YW5jZSIpO2lmKCFuKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXIgTWFuYWdlcl0gLSBuZWVkcyB0aGUgUnVudGltZUNhdGFsb2d1ZSBpbnN0YW5jZSIpO2lmKCFvKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXIgTWFuYWdlcl0gLSBuZWVkIHRoZSBzdG9yYWdlTWFuYWdlciBpbnN0YW5jZSIpO3ZhciB1PXRoaXM7dS5fYnVzPXQsdS5fcmVnaXN0cnk9cix1Ll9jYXRhbG9nPW4sdS5fc3RvcmFnZU1hbmFnZXI9byx1Ll9pZGVudGl0eU1vZHVsZT1hLAovL1RPRE86IHRoZXNlIHNob3VsZCBiZSBzYXZlZCBpbiBwZXJzaXN0ZW5jZSBlbmdpbmU/CnUucnVudGltZVVSTD1lLHUuX3VybD1lKyIvc20iLHUuX29iamVjdFVSTD1lKyIvb2JqZWN0LWFsbG9jYXRpb24iLHUuX3JlcG9ydGVycz17fSx1Ll9vYnNlcnZlcnM9e30sdS5fZGF0YU9iamVjdHNTdG9yYWdlPXMsCi8vVE9ETzogdGhpcyBzaG91bGQgbm90IGJlIGhhcmRjb2RlZCEKdS5fZG9tYWluPSgwLGguZGl2aWRlVVJMKShlKS5kb21haW4sdS5fYWxsb2NhdG9yPWl8fGcuZGVmYXVsdC5pbnN0YW5jZSxrLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gQWRkcmVzc0FsbG9jYXRpb25dIC0gIix1Ll9hbGxvY2F0b3IpLHQuYWRkTGlzdGVuZXIodS5fdXJsLGZ1bmN0aW9uKGUpe3N3aXRjaChrLmluZm8oIltTeW5jaGVyTWFuYWdlcl0gUkNWOiAiLGUpLGUudHlwZSl7Y2FzZSJjcmVhdGUiOnUuX29uQ3JlYXRlKGUpO2JyZWFrO2Nhc2UiZGVsZXRlIjp1Ll9vbkRlbGV0ZShlKTticmVhaztjYXNlInN1YnNjcmliZSI6dS5fb25Mb2NhbFN1YnNjcmliZShlKTticmVhaztjYXNlInVuc3Vic2NyaWJlIjp1Ll9vbkxvY2FsVW5TdWJzY3JpYmUoZSl9fSl9cmV0dXJuKDAsZC5kZWZhdWx0KShTeW5jaGVyTWFuYWdlcixbe2tleToiX29uQ3JlYXRlIiwKLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gU3luY2hlciAtPiBjcmVhdGUKdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuZnJvbSxuPWUudG87Ci8vIGNoZWNrIGlmIG1lc3NhZ2UgaXMgdG8gc2F2ZSBuZXcgY2hpbGRyZW5PYmplY3RzIGluIHRoZSBsb2NhbCBzdG9yYWdlCi8vIFRPRE86IGNoZWNrIGlmIG1lc3NhZ2UgaXMgdG8gc3RvcmUgbmV3IGNoaWxkIGluIHRoZSBsb2NhbCBzdG9yYWdlIGFuZCBjYWxsIHN0b3JlQ2hpbGQuIEhvdyB0byBkaXN0aW5ndWlzaCBmcm9tIG90aGVycz8KLy9kZWJ1Z2dlcjsKZS5ib2R5LmF0dHJpYnV0ZT90aGlzLl9zdG9yZUNoaWxkcmVucyhlKTohZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXN1bWUiKXx8ZS5ib2R5Lmhhc093blByb3BlcnR5KCJyZXN1bWUiKSYmIWUuYm9keS5yZXN1bWU/Ci8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gaW52aXRhdGlvbiBtZXNzYWdlCmUuYm9keS5hdXRob3Jpc2U/KHRoaXMuX2F1dGhvcmlzZShlKSxrLmluZm8oIltTeW5jaGVyTWFuYWdlci5vbkNyZWF0ZSAtIGludml0ZSBvYnNlcnZlcnNdIixlKSk6KAovLyB0aGlzIGlzIHRvIGNyZWF0ZSBhIG5ldyBkYXRhIG9iamVjdAprLmluZm8oIltTeW5jaGVyTWFuYWdlci5vbkNyZWF0ZSAtIENyZWF0ZSBOZXcgT2JqZWN0XSIsZSksdGhpcy5fbmV3Q3JlYXRlKGUpKToKLy8gSWYgZnJvbSB0aGUgaHlwZXJ0eSBzaWRlLCBjYWxsIHRoZSByZXN1bWVSZXBvcnRlciB3ZSB3aWxsIGhhdmUgcmVzdW1lID0gdHJ1ZScKLy8gc28gd2Ugd2lsbCBjcmVhdGUgYW4gcmVzdW1lZCBvYmplY3QgYW5kIHdpbGwgdHJ5IHRvIHJlc3VtZSB0aGUgb2JqZWN0IHByZXZpb3VzbHkgc2F2ZWQ7CnRoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5nZXRSZXNvdXJjZXNCeUNyaXRlcmlhKGUsITApLnRoZW4oZnVuY3Rpb24oaSl7aWYoay5pbmZvKCJbU3luY2hlck1hbmFnZXIgLSBDcmVhdGUgUmVzdW1lZF0gLSBSZXNvdXJjZXNCeUNyaXRlcmlhIHwgTWVzc2FnZTogIixlLCIgcmVzdWx0OiAiLGkpLGkmJigwLHUuZGVmYXVsdCkoaSkubGVuZ3RoPjApe3ZhciBhPVtdOygwLHUuZGVmYXVsdCkoaSkuZm9yRWFjaChmdW5jdGlvbihyKXthLnB1c2godC5fcmVzdW1lQ3JlYXRlKGUsaVtyXSkpfSkscy5kZWZhdWx0LmFsbChhKS50aGVuKGZ1bmN0aW9uKGkpe2subG9nKCJbU3luY2hlck1hbmFnZXIgLSBDcmVhdGUgUmVzdW1lZF0iLGkpOwovLyBUT0RPOiBzaG91ZCBzZW5kIHRoZSBpbmZvcm1hdGlvbiBpZiBzb21lIG9iamVjdCB3YXMgZmFpbDsKdmFyIHM9KDAsby5kZWZhdWx0KShpKS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuITEhPT1lfSk7ay5pbmZvKCJbU3luY2hlck1hbmFnZXIub25DcmVhdGVdIHJldHVybmluZyByZXN1bWVkIG9iamVjdHMgOiAiLHMpLAovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlIHRvIFN5bmNoZXIgLT4gY3JlYXRlIHJlc3VtZQp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206bix0bzpyLGJvZHk6e2NvZGU6MjAwLHZhbHVlOnN9fSl9KX1lbHNlewovL2ZvcndhcmQgdG8gaHlwZXJ0eToKdmFyIGM9e307Yy5pZD1lLmlkLGMuZnJvbT1lLnRvLGMudG89ZS5mcm9tLGMudHlwZT0icmVzcG9uc2UiLGMuYm9keT17Y29kZTo0MDQsZGVzYzoiTm8gZGF0YSBvYmplY3RzIHJlcG9ydGVycyB0byBiZSByZXN1bWVkIn0sdC5fYnVzLnBvc3RNZXNzYWdlKGMpfX0pfX0se2tleToiX3N0b3JlQ2hpbGRyZW5zIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49ZS5ib2R5LmF0dHJpYnV0ZTsiY2hpbGRyZW5PYmplY3RzIj09PW4/dC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVDaGlsZHJlbnMoITEscix2b2lkIDAsZS5ib2R5LnZhbHVlKTp0Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZUNoaWxkcmVucyghMCxyLG4sZS5ib2R5LnZhbHVlKX19LHtrZXk6Il9uZXdDcmVhdGUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLG49ZS5mcm9tLG89KDAsaC5kaXZpZGVVUkwpKGUuZnJvbSkuZG9tYWluOwovLyBpZiByZXBvcnRlciBpcyBpbiBhIEludGVyd29ya2luZyBQcm90b3N0dWIgdGhlIHJ1bnRpbWUgZG9tYWluIGJhY2tlbmQgc2VydmljZXMgd2lsbCBiZSB1c2VkCnIuX3JlZ2lzdHJ5LmlzSW50ZXJ3b3JraW5nUHJvdG9TdHViKGUuZnJvbSkmJihvPSgwLGguZGl2aWRlVVJMKShyLnJ1bnRpbWVVUkwpLmRvbWFpbiksCi8vIFByb2Nlc3MgaW52aXRhdGlvbiBtZXNzYWdlIHRvIG9ic2VydmVycwovKmlmIChtc2cuYm9keS5hdXRob3Jpc2UpIHsKICAgICAgICBfdGhpcy5fYXV0aG9yaXNlKG1zZyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9Ki8KLy9nZXQgc2NoZW1hIGZyb20gY2F0YWxvZ3VlIGFuZCBwYXJzZSAtPiAoc2NoZW1lLCBjaGlsZHJlbikKci5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihlLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBzPWkuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMsYT1zLnNjaGVtZT9zLnNjaGVtZS5jb25zdGFudDoicmVzb3VyY2UiLHU9cy5jaGlsZHJlbj9zLmNoaWxkcmVuLmNvbnN0YW50OltdLGM9e25hbWU6ZS5ib2R5LnZhbHVlLm5hbWUsc2NoZW1hOmUuYm9keS52YWx1ZS5zY2hlbWEscmVwb3J0ZXI6ZS5ib2R5LnZhbHVlLnJlcG9ydGVyLHJlc291cmNlczplLmJvZHkudmFsdWUucmVzb3VyY2VzfSxmPWUuYm9keS52YWx1ZS5yZXNvdXJjZTsKLy9kZWJ1Z2dlcjsKLy9yZXF1ZXN0IGFkZHJlc3MgYWxsb2NhdGlvbiBvZiBhIG5ldyBvYmplY3QgZnJvbSB0aGUgbXNnLW5vZGUKLy9fdGhpcy5fYWxsb2NhdG9yLmNyZWF0ZShkb21haW4sIG51bU9mQWRkcmVzcywgb2JqZWN0SW5mbywgc2NoZW1lLCByZXVzZURhdGFPYmplY3QpLnRoZW4oKGFsbG9jYXRlZCkgPT4gewpyLl9hbGxvY2F0b3IuY3JlYXRlKG8sMSxjLGEsZikudGhlbihmdW5jdGlvbihvKXt2YXIgaT0oMCxoLmRlZXBDbG9uZSkoZS5ib2R5LnZhbHVlKTtpLnVybD1vLmFkZHJlc3NbMF0saS5hdXRob3Jpc2U9ZS5ib2R5LmF1dGhvcmlzZSxpLmNoaWxkcmVucz11LAovL29iamVjdFJlZ2lzdHJhdGlvbi5leHBpcmVzID0gMzA7Ly9UT0RPOiBnZXQgaXQgZnJvbSBkYXRhIG9iamVjdCBjb25maWd1cmF0aW9uIGRlc2NyaXB0aW9uIHdoZW4gcHJlc2VudApkZWxldGUgaS5kYXRhLGsubG9nKCJbU3luY2hlck1hbmFnZXIuX25ld0NyZWF0ZV0gQUxMT0NBVE9SIENSRUFURToiLG8pO3ZhciBzPWkudXJsKyIvc3Vic2NyaXB0aW9uIjtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdDcmVhdGVdIFN1YnNjcmlwdGlvbiBVUkwiLHMpLAovL1RvIHJlZ2lzdGVyIHRoZSBkYXRhT2JqZWN0IGluIHRoZSBydW50aW1lUmVnaXN0cnkKay5pbmZvKCJbU3luY2hlck1hbmFnZXIuX25ld0NyZWF0ZV0gUmVnaXN0ZXIgT2JqZWN0OiAiLGkpLAovL190aGlzLl9yZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3QobXNnLmJvZHkudmFsdWUubmFtZSwgbXNnLmJvZHkudmFsdWUuc2NoZW1hLCBvYmpVUkwsIG1zZy5ib2R5LnZhbHVlLnJlcG9ydGVyLCBtc2cuYm9keS52YWx1ZS5yZXNvdXJjZXMsIGFsbG9jYXRlZCwgbXNnLmJvZHkuYXV0aG9yaXNlKS50aGVuKChyZXNvbHZlKSA9PiB7CnIuX3JlZ2lzdHJ5LnJlZ2lzdGVyRGF0YU9iamVjdChpKS50aGVuKGZ1bmN0aW9uKG8pe2subG9nKCJbU3luY2hlck1hbmFnZXIuX25ld0NyZWF0ZV0gRGF0YU9iamVjdCBzdWNjZXNzZnVsbHkgcmVnaXN0ZXJlZCIsbyk7Ci8vYWxsIE9LIC0+IGNyZWF0ZSByZXBvcnRlciBhbmQgcmVnaXN0ZXIgbGlzdGVuZXJzCnZhciBhPXZvaWQgMDthPXQuX3JlcG9ydGVyc1tpLnVybF0/dC5fcmVwb3J0ZXJzW2kudXJsXTpuZXcgXy5kZWZhdWx0KHIsbixpLnVybCksay5sb2coIltTeW5jaGVyTWFuYWdlciAtIG5ldyBDcmVhdGVdIC0gIixlKTsKLy8gU3RvcmUgZm9yIGVhY2ggcmVwb3J0ZXIgaHlwZXJ0eSB0aGUgZGF0YU9iamVjdAp2YXIgYz12b2lkIDA7Ci8vIGxldCBpbnRlcndvcmtpbmcgPSBmYWxzZTsKYz1lLmJvZHkuaGFzT3duUHJvcGVydHkoImlkZW50aXR5IikmJmUuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkw/ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkw6ci5fcmVnaXN0cnkuZ2V0SHlwZXJ0eU93bmVyKGUuZnJvbSk7Ci8vIHNob3VsZCB3ZSB1c2UgdGhlIG1zZy5ib2R5LnZhbHVlIGluc3RlYWQ/CnZhciBmPSgwLGguZGVlcENsb25lKShpKTtmLnN1YnNjcmliZXJVc2VyPWMsZi5pc1JlcG9ydGVyPSEwLAovLyBTdG9yZSB0aGUgZGF0YU9iamVjdCBpbmZvcm1hdGlvbgovL2lmICghaW50ZXJ3b3JraW5nKSB7CnIuX2RhdGFPYmplY3RzU3RvcmFnZS5zZXQoZiksZS5ib2R5Lmhhc093blByb3BlcnR5KCJzdG9yZSIpJiZlLmJvZHkuc3RvcmUmJihhLmlzVG9TYXZlRGF0YT0hMCxyLl9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLGkudXJsLCJpc1RvU2F2ZURhdGEiLCEwKSxlLmJvZHkudmFsdWUuZGF0YSYmci5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVEYXRhKCEwLGkudXJsLG51bGwsZS5ib2R5LnZhbHVlLmRhdGEpKSwKLy99Ci8vIGFkZGluZyBsaXN0ZW5lcnMgdG8gZm9yd2FyZCB0byByZXBvcnRlcgphLmZvcndhcmRTdWJzY3JpYmUoW2kudXJsLHNdKS50aGVuKGZ1bmN0aW9uKCl7YS5hZGRDaGlsZHJlbnModSkudGhlbihmdW5jdGlvbigpe3IuX3JlcG9ydGVyc1tpLnVybF09YTt2YXIgdD17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOm4sYm9keTp7Y29kZToyMDAscmVzb3VyY2U6aS51cmwsY2hpbGRyZW5SZXNvdXJjZXM6dX19OwovL0ZMT1ctT1VUOiBtZXNzYWdlIHJlc3BvbnNlIHRvIFN5bmNoZXIgLT4gY3JlYXRlCnIuX2J1cy5wb3N0TWVzc2FnZSh0KX0pfSl9LGZ1bmN0aW9uKGUpe2suZXJyb3IoZSl9KX0pfSkuY2F0Y2goZnVuY3Rpb24odCl7Ci8vRkxPVy1PVVQ6IGVycm9yIG1lc3NhZ2UgcmVzcG9uc2UgdG8gU3luY2hlciAtPiBjcmVhdGUKdmFyIG89e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzpuLGJvZHk6e2NvZGU6NTAwLGRlc2M6dH19O3IuX2J1cy5wb3N0TWVzc2FnZShvKX0pfX0se2tleToiX3Jlc3VtZUNyZWF0ZSIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihvKXt2YXIgaT1lLmZyb20scz10LnNjaGVtYSxhPXQudXJsO3QuZGF0YTtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyXSAtIHJlc3VtZSBjcmVhdGUiLGUsdCksCi8vZ2V0IHNjaGVtYSBmcm9tIGNhdGFsb2d1ZSBhbmQgcGFyc2UgLT4gKHNjaGVtZSwgY2hpbGRyZW4pCm4uX2NhdGFsb2cuZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3IocykudGhlbihmdW5jdGlvbihzKXt2YXIgdT1zLnNvdXJjZVBhY2thZ2Uuc291cmNlQ29kZS5wcm9wZXJ0aWVzLGM9KHUuc2NoZW1lJiZ1LnNjaGVtZS5jb25zdGFudCx1LmNoaWxkcmVuP3UuY2hpbGRyZW4uY29uc3RhbnQ6W10pO2subG9nKCJbU3luY2hlck1hbmFnZXJdIC0gZ2V0RGF0YVNjaGVtYURlc2NyaXB0b3I6ICIscyxjKTsKLy8gRG8gc2NoZW1hIHZhbGlkYXRpb24KLy8gVE9ETzogY2hlY2sgaWYgaXMgbmVlZCB0byBoYW5kbGUgd2l0aCB0aGUgcmVzdWx0IG9mIHZhbGlkYXRpb24KLy8gICAgICAgIHNjaGVtYVZhbGlkYXRpb24oc2NoZW1lLCBkZXNjcmlwdG9yLCBpbml0aWFsRGF0YSk7CnZhciBmPSgwLGguZGVlcENsb25lKShlLmJvZHkudmFsdWUpO2YudXJsPXQudXJsLGYuZXhwaXJlcz10LmV4cGlyZXMsZGVsZXRlIGYuZGF0YTsKLy9hbGwgT0sgLT4gY3JlYXRlIHJlcG9ydGVyIGFuZCByZWdpc3RlciBsaXN0ZW5lcnMKdmFyIGw9dm9pZCAwO2w9ci5fcmVwb3J0ZXJzW2FdP3IuX3JlcG9ydGVyc1thXTpuZXcgXy5kZWZhdWx0KG4saSxhKSxsLmlzVG9TYXZlRGF0YT10LmlzVG9TYXZlRGF0YSxsLmZvcndhcmRTdWJzY3JpYmUoW3QudXJsXSkudGhlbihmdW5jdGlvbigpe2wuYWRkQ2hpbGRyZW5zKGMpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbC5yZXN1bWVTdWJzY3JpcHRpb25zKHQuc3Vic2NyaXB0aW9ucyksbi5fcmVwb3J0ZXJzW2FdPWwsay5pbmZvKCJbU3luY2hlck1hbmFnZXIgLSByZXN1bWUgY3JlYXRlXSAtIHJlc29sdmVkIHJlc3VtZWQ6ICIsdCksbi5fZGVjcnlwdENoaWxkcmVucyh0LGMpfSkudGhlbihmdW5jdGlvbihlKXsKLy8gbG9nLmxvZygncmVzdWx0IG9mIHByZXZpb3VzIHByb21pc2UnKTsKbyhlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2suZXJyb3IoIltTeW5jaGVyTWFuYWdlciAtIHJlc3VtZSBjcmVhdGVdIC0gZmFpbCBvbiBhZGRDaGlsZHJlbnM6ICIsZSksbyghMSl9KX0pLGsuaW5mbygiW1N5bmNoZXJNYW5hZ2VyLl9yZXN1bWVDcmVhdGVdIFJlZ2lzdGVyIE9iamVjdDogIixmKSxuLl9yZWdpc3RyeS5yZWdpc3RlckRhdGFPYmplY3QoZikudGhlbihmdW5jdGlvbihlKXtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9yZXN1bWVDcmVhdGVdIERhdGFPYmplY3QgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWxseSB1cGRhdGVkIixlKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7ay5lcnJvcigiW1N5bmNoZXJNYW5hZ2VyIC0gcmVzdW1lIGNyZWF0ZV0gLSBmYWlsIG9uIGdldERhdGFTY2hlbWFEZXNjcmlwdG9yOiAiLGUpLG8oITEpfSl9KX19LHtrZXk6Il9kZWNyeXB0Q2hpbGRyZW5zIix2YWx1ZTpmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIpe2lmKHQpezA9PT0oMCx1LmRlZmF1bHQpKGUuY2hpbGRyZW5PYmplY3RzKS5sZW5ndGgmJnIoZSksdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuY2hpbGRyZW5PYmplY3RzW3RdO2subG9nKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIGRhdGFPYmplY3RDaGlsZHMgdG8gZGVjcnlwdCAiLG4pO3ZhciBvPVtdOygwLHUuZGVmYXVsdCkobikuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgcj1uW3RdLGk9dC5zcGxpdCgiIyIpWzBdO2lmKCJzdHJpbmciPT10eXBlb2Ygci52YWx1ZSl7ay5sb2coIltTeW5jaGVyTWFuYWdlci5fZGVjcnlwdENoaWxkcmVuc10gY3JlYXRlZEJ5ICIsaSwiIG9iamVjdDogIixyLnZhbHVlKTt2YXIgcz1TLmRlZmF1bHQuZGVjcnlwdERhdGFPYmplY3QoSlNPTi5wYXJzZShyLnZhbHVlKSxlLnVybCk7by5wdXNoKHMpfX0pLHMuZGVmYXVsdC5hbGwobykudGhlbihmdW5jdGlvbihuKXtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSByZXR1cm5pbmcgZGVjcnlwdGVkICIsbiksbi5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBuPXIudmFsdWUudXJsO2UuY2hpbGRyZW5PYmplY3RzW3RdW25dLnZhbHVlPXIudmFsdWV9KSxrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSBzdG9yZWRPYmplY3QgIixlKSxyKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7ay53YXJuKCJbU3luY2hlck1hbmFnZXIuX2RlY3J5cHRDaGlsZHJlbnNdIGZhaWxlZCA6ICIsZSl9KX0pfWVsc2UgcihlKX0pfX0se2tleToiX2F1dGhvcmlzZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5ib2R5LnJlc291cmNlKXRocm93IG5ldyBFcnJvcigiW1N5bmNoZXJNYW5hZ2VyLl9hdXRob3Jpc2VdIGludml0YXRpb24gcmVxdWVzdCB3aXRob3V0IGRhdGEgb2JqZWN0IHVybDoiLGUpO3ZhciByPWUuYm9keS5yZXNvdXJjZSsiL3N1YnNjcmlwdGlvbiIsbj0hIWUuYm9keS5wMnAmJmUuYm9keS5wMnA7ay5sb2coIltTeW5jaGVyTWFuYWdlciAtICBhdXRob3Jpc2VdIC0gIixlKSxlLmJvZHkuYXV0aG9yaXNlJiZlLmJvZHkuYXV0aG9yaXNlLmZvckVhY2goZnVuY3Rpb24obyl7Ci8vRkxPVy1PVVQ6IHNlbmQgaW52aXRlcyB0byBsaXN0IG9mIHJlbW90ZSBTeW5jaGVyIC0+IF9vblJlbW90ZUNyZWF0ZSAtPiBvbk5vdGlmaWNhdGlvbgp0Ll9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6ImNyZWF0ZSIsZnJvbTpyLHRvOm8sYm9keTp7cDJwOm4saWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LHNvdXJjZTplLmZyb20sdmFsdWU6ZS5ib2R5LnZhbHVlLHNjaGVtYTplLmJvZHkuc2NoZW1hfX0sZnVuY3Rpb24ocil7Ci8vIGxldHMgZm9yd2FyZCB0aGUgaW52aXRhdGlvbiByZXNwb25zZQp2YXIgbj17ZnJvbTplLnRvLHRvOmUuZnJvbSxpZDplLmlkLHR5cGU6ci50eXBlLGJvZHk6ci5ib2R5fTt0Ll9idXMucG9zdE1lc3NhZ2Uobil9KX0pfX0se2tleToiX29uRGVsZXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnJlc291cmNlLG49dC5fcmVwb3J0ZXJzW3JdO24mJigKLy9UT0RPOiBpcyB0aGVyZSBhbnkgcG9saWN5IHZlcmlmaWNhdGlvbiBiZWZvcmUgZGVsZXRlPwpuLmRlbGV0ZSgpLHRoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5kZWxldGVSZXNvdXJjZShyKS50aGVuKGZ1bmN0aW9uKG4pe2subG9nKCJbU3luY2hlck1hbmFnZXIgLSBvbkRlbGV0ZV0gLSBkZWxldGVSZXNvdXJjZTogIixuKSx0Ll9yZWdpc3RyeS51bnJlZ2lzdGVyRGF0YU9iamVjdChyKSwKLy9UT0RPOiB1bnJlZ2lzdGVyIG9iamVjdD8KdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwfX0pfSkpfX0se2tleToiX29uTG9jYWxTdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7Ci8vZGVidWdnZXI7CnRoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5nZXRSZXNvdXJjZXNCeUNyaXRlcmlhKGUsITEpLnRoZW4oZnVuY3Rpb24ocil7aWYoay5pbmZvKCJbU3luY2hlck1hbmFnZXIgLSBTdWJzY3JpYmVdIC0gUmVzb3VyY2VzQnlDcml0ZXJpYSB8IE1lc3NhZ2U6ICIsZSwiIHJlc3VsdDogIixyKSxyJiYoMCx1LmRlZmF1bHQpKHIpLmxlbmd0aD4wKXt2YXIgbj1bXTsKLy8gVE9ETzogc2hvdWxkIHJldXNlIHRoZSBzdG9yYWdlZCBpbmZvcm1hdGlvbgooMCx1LmRlZmF1bHQpKHIpLmZvckVhY2goZnVuY3Rpb24obyl7ay5sb2coIltTeW5jaGVyTWFuYWdlciAtIHJlc3VtZSBTdWJzY3JpYmVdIC0gcmV1c2UgY3VycmVudCBvYmplY3QgdXJsOiAiLHJbb10pLG4ucHVzaCh0Ll9yZXN1bWVTdWJzY3JpcHRpb24oZSxyW29dKSl9KSxzLmRlZmF1bHQuYWxsKG4pLnRoZW4oZnVuY3Rpb24ocil7ay5sb2coIltTeW5jaGVyTWFuYWdlciAtIE9ic2VydmVycyBSZXN1bWVkXSIscik7Ci8vIFRPRE86IHNob3VkIHNlbmQgdGhlIGluZm9ybWF0aW9uIGlmIHNvbWUgb2JqZWN0IHdhcyBmYWlsOwp2YXIgbj0oMCxvLmRlZmF1bHQpKHIpLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4hMSE9PWV9KTsKLy9GTE9XLU9VVDogbWVzc2FnZSByZXNwb25zZSB0byBTeW5jaGVyIC0+IGNyZWF0ZQp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsdmFsdWU6bn19KX0pfWVsc2UgaWYoZS5ib2R5LnNjaGVtYSYmZS5ib2R5LnJlc291cmNlKWsubG9nKCJbU3luY2hlck1hbmFnZXIub25Mb2NhbFN1YnNjcmliZSAtIG5ldyBTdWJzY3JpYmVdIC0gIixlLmJvZHkuc2NoZW1hLGUuYm9keS5yZXNvdXJjZSksdC5fbmV3U3Vic2NyaXB0aW9uKGUpO2Vsc2V7Ci8vZm9yd2FyZCB0byBoeXBlcnR5Ogp2YXIgaT17fTtpLmlkPWUuaWQsaS5mcm9tPWUudG8saS50bz1lLmZyb20saS50eXBlPSJyZXNwb25zZSIsaS5ib2R5PXtjb2RlOjQwNCxkZXNjOiJObyBkYXRhIG9iamVjdHMgb2JzZXJ2ZXJzIHRvIGJlIHJlc3VtZWQifSx0Ll9idXMucG9zdE1lc3NhZ2UoaSl9fSl9fSx7a2V5OiJfbmV3U3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcyxuPWUuYm9keS5yZXNvdXJjZSxvPWUuZnJvbSxpPSgwLGguZGl2aWRlVVJMKShuKS5kb21haW4scz1uKyIvc3Vic2NyaXB0aW9uIixhPW4rIi9jaGlsZHJlbi8iOwovL2dldCBzY2hlbWEgZnJvbSBjYXRhbG9ndWUgYW5kIHBhcnNlIC0+IChjaGlsZHJlbikKci5fY2F0YWxvZy5nZXREYXRhU2NoZW1hRGVzY3JpcHRvcihlLmJvZHkuc2NoZW1hKS50aGVuKGZ1bmN0aW9uKHUpe3ZhciBjPXUuc291cmNlUGFja2FnZS5zb3VyY2VDb2RlLnByb3BlcnRpZXMsZj1jLmNoaWxkcmVuP2MuY2hpbGRyZW4uY29uc3RhbnQ6W10sbD1bXTtsLnB1c2gobisiL2NoYW5nZXMiKSxmLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGwucHVzaChhK2UpfSk7Ci8vY2hpbGRyZW4gYWRkcmVzc2VzCi8vRkxPVy1PVVQ6IHN1YnNjcmliZSBtZXNzYWdlIHRvIHRoZSBtc2ctbm9kZSwgcmVnaXN0ZXJpbmcgbGlzdGVuZXJzIG9uIHRoZSBicm9rZXIKdmFyIGQ9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpyLl91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIraSsiL3NtIixib2R5OntpZGVudGl0eTplLmJvZHkuaWRlbnRpdHkscmVzb3VyY2VzOmwsc291cmNlOm99fTsKLy9zdWJzY3JpYmUgaW4gbXNnLW5vZGUKci5fYnVzLnBvc3RNZXNzYWdlKGQsZnVuY3Rpb24oaSl7aWYoay5sb2coIm5vZGUtc3Vic2NyaWJlLXJlc3BvbnNlKG9ic2VydmVyKTogIixpKSwyMDA9PT1pLmJvZHkuY29kZSl7Ci8vRkxPVy1PVVQ6IHJlcGx5IHdpdGggcHJvdmlzaW9uYWwgcmVzcG9uc2UKci5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86byxib2R5Ontjb2RlOjEwMCxjaGlsZHJlblJlc291cmNlczpmLHNjaGVtYTplLmJvZHkuc2NoZW1hLHJlc291cmNlOmUuYm9keS5yZXNvdXJjZX19KTsKLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gcmVtb3RlIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQp2YXIgYT17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX3VybCx0bzpzLGJvZHk6e2lkZW50aXR5OmQuYm9keS5pZGVudGl0eSxzdWJzY3JpYmVyOm99fTsKLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQplLmJvZHkuaGFzT3duUHJvcGVydHkoIm11dHVhbCIpJiYoYS5ib2R5Lm11dHVhbD1lLmJvZHkubXV0dWFsKSxrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdTdWJzY3JpcHRpb25dIixhLGUpLAovL3N1YnNjcmliZSB0byByZXBvcnRlciBTTQpyLl9idXMucG9zdE1lc3NhZ2UoYSxmdW5jdGlvbihpKXtpZihrLmxvZygicmVwb3J0ZXItc3Vic2NyaWJlLXJlc3BvbnNlLW5ldzogIixpKSwyMDA9PT1pLmJvZHkuY29kZSl7ay5sb2coIltTeW5jaGVyTWFuYWdlci5fbmV3U3Vic2NyaXB0aW9uXSAtIG9ic2VydmVyczogIixyLl9vYnNlcnZlcnMsbixyLl9vYnNlcnZlcnNbbl0pO3ZhciBzPXIuX29ic2VydmVyc1tuXTtzfHwocz1uZXcgUi5kZWZhdWx0KHIsbixmKSxrLmxvZygiW1N5bmNoZXJNYW5hZ2VyLl9uZXdTdWJzY3JpcHRpb25dIC0gb2JzZXJ2ZXJzOiBjcmVhdGUgbmV3IE9ic2VydmVyT2JqZWN0OiAiLHMpLHIuX29ic2VydmVyc1tuXT1zLAovLyByZWdpc3RlciBuZXcgaHlwZXJ0eSBzdWJzY3JpcHRpb24Kcy5hZGRTdWJzY3JpcHRpb24obyksCi8vIGFkZCBjaGlsZHJlbnMgYW5kIGxpc3RlbmVycyB0byBzYXZlIGRhdGEgaWYgbmVjZXNzYXJ5CnMuYWRkQ2hpbGRyZW5zKGYpKTt2YXIgYT0hMSx1PXZvaWQgMDtlLmJvZHkuaGFzT3duUHJvcGVydHkoImlkZW50aXR5IikmJmUuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkw/KHU9ZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsdS5pbmNsdWRlcygidXNlcjovLyIpfHwoYT0hMCkpOih1PXIuX3JlZ2lzdHJ5LmdldEh5cGVydHlPd25lcihlLmZyb20pKXx8KGE9ITApO3ZhciBjPSgwLGguZGVlcENsb25lKShpLmJvZHkudmFsdWUpOwovLyBsZXQgY2hpbGRyZW5PYmplY3RzID0gbWV0YWRhdGEuY2hpbGRyZW5PYmplY3RzIHx8IHt9OwpkZWxldGUgYy5kYXRhLGRlbGV0ZSBjLmNoaWxkcmVuT2JqZWN0cyxjLmNoaWxkcmVucz1mLGMuc3Vic2NyaWJlclVzZXI9dSxjLmlzUmVwb3J0ZXI9ITEsYy5zdWJzY3JpYmVySHlwZXJ0eT1vLGF8fCgKLy9fdGhpcy5fZGF0YU9iamVjdHNTdG9yYWdlLnNldChvYmpVUkwsIGZhbHNlLCBtc2cuYm9keS5zY2hlbWEsICdvbicsIHJlcGx5LmJvZHkub3duZXIsIGh5cGVydHlVUkwsIGNoaWxkcmVucywgdXNlclVSTCk7CnIuX2RhdGFPYmplY3RzU3RvcmFnZS5zZXQoYyksKGMuaGFzT3duUHJvcGVydHkoInN0b3JlIikmJmMuc3RvcmV8fGMuaGFzT3duUHJvcGVydHkoImlzVG9TYXZlRGF0YSIpJiZjLmlzVG9TYXZlRGF0YSkmJihzLmlzVG9TYXZlRGF0YT0hMCxyLl9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCExLG4sImlzVG9TYXZlRGF0YSIsITApLHIuX2RhdGFPYmplY3RzU3RvcmFnZS5zYXZlRGF0YSghMSxuLG51bGwsaS5ib2R5LnZhbHVlLmRhdGEpKSksCi8vZm9yd2FyZCB0byBoeXBlcnR5OgppLmlkPWUuaWQsaS5mcm9tPXIuX3VybCxpLnRvPW8saS5ib2R5LnNjaGVtYT1lLmJvZHkuc2NoZW1hLGkuYm9keS5yZXNvdXJjZT1lLmJvZHkucmVzb3VyY2UsCi8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKZS5ib2R5Lmhhc093blByb3BlcnR5KCJtdXR1YWwiKSYmKGkuYm9keS5tdXR1YWw9ZS5ib2R5Lm11dHVhbCksay5sb2coIltzdWJzY3JpYmVdIC0gbmV3IHN1YnNjcmlwdGlvbjogIixlLGkscyksdC5fYnVzLnBvc3RNZXNzYWdlKGkpfX0pfWVsc2UKLy9saXN0ZW5lciByZWplY3RlZApyLl9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzpvLGJvZHk6aS5ib2R5fSl9KX0pfX0se2tleToiX3Jlc3VtZVN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4pe3ZhciBvPXQudXJsLGk9dC5zY2hlbWEscz1lLmZyb20sYT1vKyIvY2hpbGRyZW4vIjtrLmxvZygiW1N5bmNoZXJNYW5hZ2VyIC0gUmV1c2VTdWJzY3JpcHRpb25dIC0gb2JqVVJMOiAiLG8sIiAtIHNjaGVtYToiLGkpLAovL2dldCBzY2hlbWEgZnJvbSBjYXRhbG9ndWUgYW5kIHBhcnNlIC0+IChjaGlsZHJlbikKLy8gVE9ETzogcmVtb3ZlIHRoaXMgc2luY2UgY2hpbGRyZW4gcmVzb3VyY2VzIHNob3VsZCBiZSBhdmFpbGFibGUgaW4gdGhlIERhdGFPYmplY3RzU3RvcmFnZQpyLl9jYXRhbG9nLmdldERhdGFTY2hlbWFEZXNjcmlwdG9yKGkpLnRoZW4oZnVuY3Rpb24obil7dmFyIHU9bi5zb3VyY2VQYWNrYWdlLnNvdXJjZUNvZGUucHJvcGVydGllcyxjPXUuY2hpbGRyZW4/dS5jaGlsZHJlbi5jb25zdGFudDpbXSxmPVtdO2YucHVzaChvKyIvY2hhbmdlcyIpLGMuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZi5wdXNoKGErZSl9KSwKLy9GTE9XLU9VVDogcmVwbHkgd2l0aCBwcm92aXNpb25hbCByZXNwb25zZQpyLl9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzpzLGJvZHk6e2NvZGU6MTAwLGNoaWxkcmVuUmVzb3VyY2VzOmMsc2NoZW1hOmkscmVzb3VyY2U6b319KTsKLy9GTE9XLU9VVDogc3Vic2NyaWJlIG1lc3NhZ2UgdG8gcmVtb3RlIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQovKmxldCBvYmpTdWJzY3JpYmVNc2cgPSB7CiAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiB0aGlzLl91cmwsIHRvOiBvYmpVUkxTdWJzY3JpcHRpb24sCiAgICAgICAgICAgIGJvZHk6IHsgc3Vic2NyaWJlcjogaHlwZXJ0eVVSTCwgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5IH0KICAgICAgICAgIH07CiAgICAgICAgICAgLy9zdWJzY3JpYmUgdG8gcmVwb3J0ZXIgU00KICAgICAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShvYmpTdWJzY3JpYmVNc2csIChyZXBseSkgPT4geyovCnZhciBsPXIuX29ic2VydmVyc1tvXTsKLy8gT2JqZWN0LmFzc2lnbihzdG9yZWRPYmplY3QuZGF0YSwgcmVwbHkuYm9keS52YWx1ZS5kYXRhKTsKLy8gT2JqZWN0LmFzc2lnbihzdG9yZWRPYmplY3QuY2hpbGRyZW5zLCByZXBseS5ib2R5LnZhbHVlLmNoaWxkcmVucyk7Ci8vbG9nLmxvZygnW3N1YnNjcmliZV0gLSByZXN1bWUgc3Vic2NyaXB0aW9uOiAnLCBtc2csIHJlcGx5LCBzdG9yZWRPYmplY3QsIG9ic2VydmVyKTsKLy9yZWdpc3RlciBuZXcgaHlwZXJ0eSBzdWJzY3JpcHRpb24KcmV0dXJuIGx8fChsPW5ldyBSLmRlZmF1bHQocixvLGMpLGwuaXNUb1NhdmVEYXRhPXQuaXNUb1NhdmVEYXRhLHIuX29ic2VydmVyc1tvXT1sKSxsLmFkZFN1YnNjcmlwdGlvbihzKSxsLmFkZENoaWxkcmVucyhjKSxyLl9kZWNyeXB0Q2hpbGRyZW5zKHQsYyl9KS50aGVuKGZ1bmN0aW9uKGUpewovLyBsb2cubG9nKCdyZXN1bHQgb2YgcHJldmlvdXMgcHJvbWlzZScpOwpuKGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7ay5lcnJvcigiW1N5bmNoZXJNYW5hZ2VyIC0gcmVzdW1lIHN1YnNjcmlwdGlvbl0gLSBmYWlsIG9uIGdldERhdGFTY2hlbWFEZXNjcmlwdG9yOiAiLGUpLG4oITEpfSl9KX19LHtrZXk6Il9vbkxvY2FsVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0oZS5mcm9tLGUuYm9keS5yZXNvdXJjZSksbj10Ll9vYnNlcnZlcnNbcl07biYmKAovL1RPRE86IGlzIHRoZXJlIGFueSBwb2xpY3kgdmVyaWZpY2F0aW9uIGJlZm9yZSBkZWxldGU/Cm4ucmVtb3ZlU3Vic2NyaXB0aW9uKGUpLAovL1RPRE86IGRlc3Ryb3kgb2JqZWN0IGluIHRoZSByZWdpc3RyeT8KdC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwfX0pLHRoaXMuX2RhdGFPYmplY3RzU3RvcmFnZS5kZWxldGVSZXNvdXJjZShyKSwKLy9UT0RPOiByZW1vdmUgT2JqZWN0IGlmIG5vIG1vcmUgc3Vic2NyaXB0aW9uPwpkZWxldGUgdC5fb2JzZXJ2ZXJzW3JdKX19LHtrZXk6InVybCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VybH19XSksU3luY2hlck1hbmFnZXJ9KCk7dC5kZWZhdWx0PU8sZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTA5ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXtyKDUxMCksZS5leHBvcnRzPXIoMTMpLk9iamVjdC52YWx1ZXN9LC8qIDUxMCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7Ci8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9iamVjdC12YWx1ZXMtZW50cmllcwp2YXIgbj1yKDIxKSxvPXIoNTExKSghMSk7bihuLlMsIk9iamVjdCIse3ZhbHVlczpmdW5jdGlvbihlKXtyZXR1cm4gbyhlKX19KX0sLyogNTExICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1yKDY0KSxvPXIoNDUpLGk9cig3OCkuZjtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgcixzPW8odCksYT1uKHMpLHU9YS5sZW5ndGgsYz0wLGY9W107dT5jOylpLmNhbGwocyxyPWFbYysrXSkmJmYucHVzaChlP1tyLHNbcl1dOnNbcl0pO3JldHVybiBmfX19LC8qIDUxMiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH1mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG49cig2OSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDMxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDEpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoMiksZD1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGwpLHA9cig3KSx5PV9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHApLGg9cigxNCksdj1yKDIxMSksZz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KHYpLGI9cigxMDEpLF89X2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoYiksbT15LmdldExvZ2dlcigiUmVwb3J0ZXJPYmplY3QiKSxSPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUmVwb3J0ZXJPYmplY3QoZSx0LHIpeygwLGYuZGVmYXVsdCkodGhpcyxSZXBvcnRlck9iamVjdCk7dmFyIG49dGhpcztuLl9wYXJlbnQ9ZSxuLl9vd25lcj10LG4uX3VybD1yLG4uX2J1cz1lLl9idXMsbi5fZG9tYWluPSgwLGguZGl2aWRlVVJMKShyKS5kb21haW4sbi5fb2JqU3Vic2NyaXB0b3JVUkw9bi5fdXJsKyIvc3Vic2NyaXB0aW9uIixuLl9zdWJzY3JpcHRpb25zPXt9LG4uX2NoaWxkcmVucz1bXSxuLl9jaGlsZHJlbkxpc3RlbmVycz1bXSxuLl9mb3J3YXJkcz17fSxuLl9pc1RvU2F2ZURhdGE9ITEsbi5fYWxsb2NhdGVMaXN0ZW5lcnMoKX1yZXR1cm4oMCxkLmRlZmF1bHQpKFJlcG9ydGVyT2JqZWN0LFt7a2V5OiJfYWxsb2NhdGVMaXN0ZW5lcnMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXM7Ci8vYWRkIHN1YnNjcmlwdGlvbiBsaXN0ZW5lci4uLgp0Ll9zdWJzY3JpcHRpb25MaXN0ZW5lcj10Ll9idXMuYWRkTGlzdGVuZXIodC5fb2JqU3Vic2NyaXB0b3JVUkwsZnVuY3Rpb24oZSl7c3dpdGNoKG0uaW5mbygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IHJlY2VpdmVkIF0iLGUpLGUudHlwZSl7Y2FzZSJzdWJzY3JpYmUiOnQuX29uUmVtb3RlU3Vic2NyaWJlKGUpO2JyZWFrO2Nhc2UidW5zdWJzY3JpYmUiOnQuX29uUmVtb3RlVW5TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJyZXNwb25zZSI6dC5fb25SZW1vdGVSZXNwb25zZShlKX19KTt2YXIgcj10Ll91cmwrIi9jaGFuZ2VzIjt0Ll9jaGFuZ2VMaXN0ZW5lcj10Ll9idXMuYWRkTGlzdGVuZXIocixmdW5jdGlvbihuKXttLmluZm8oIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCBdIFN5bmNoZXJNYW5hZ2VyLSIrcisiLVJDVjogIixuKSwKLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGFuZ2VzPwplLl9pc1RvU2F2ZURhdGEmJm4uYm9keS5hdHRyaWJ1dGUmJihtLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF0gU3luY2hlck1hbmFnZXIgLSBzYXZlIGRhdGE6ICIsbiksdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2UudXBkYXRlKCEwLHQuX3VybCwidmVyc2lvbiIsbi5ib2R5LnZlcnNpb24pLHQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCx0Ll91cmwsImxhc3RNb2RpZmllZCIsbi5ib2R5Lmxhc3RNb2RpZmllZCksdC5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZURhdGEoITAsdC5fdXJsLG4uYm9keS5hdHRyaWJ1dGUsbi5ib2R5LnZhbHVlKSl9KX19LHtrZXk6Il9yZWxlYXNlTGlzdGVuZXJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5fc3Vic2NyaXB0aW9uTGlzdGVuZXIucmVtb3ZlKCksZS5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCksZS5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlbW92ZSgpfSksKDAsdS5kZWZhdWx0KShlLl9mb3J3YXJkcykuZm9yRWFjaChmdW5jdGlvbih0KXtlLmZvcndhcmRVblN1YnNjcmliZSh0KX0pLAovL3JlbW92ZSBhbGwgc3Vic2NyaXB0aW9ucwooMCx1LmRlZmF1bHQpKGUuX3N1YnNjcmlwdGlvbnMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5fc3Vic2NyaXB0aW9uc1t0XS5fcmVsZWFzZUxpc3RlbmVycygpfSl9fSx7a2V5OiJyZXN1bWVTdWJzY3JpcHRpb25zIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2UmJigwLHUuZGVmYXVsdCkoZSkuZm9yRWFjaChmdW5jdGlvbihyKXt2YXIgbj1lW3JdO20ubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3RdIC0gcmVzdW1lIHN1YnNjcmlwdGlvbnMiLHQsbix0Ll9jaGlsZHJlbnMpLHQuX3N1YnNjcmlwdGlvbnNbbl18fCh0Ll9zdWJzY3JpcHRpb25zW25dPW5ldyBnLmRlZmF1bHQodC5fYnVzLHQuX293bmVyLHQuX3VybCx0Ll9jaGlsZHJlbnMsITApKX0pfX0se2tleToiZm9yd2FyZFN1YnNjcmliZSIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXt0eXBlOiJzdWJzY3JpYmUiLGZyb206dC5fcGFyZW50Ll91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrdC5fZG9tYWluKyIvc20iLGJvZHk6e3Jlc291cmNlczplLHNvdXJjZTp0Ll9vd25lcn19O3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4sbyl7dC5fYnVzLnBvc3RNZXNzYWdlKHIsZnVuY3Rpb24ocil7aWYobS5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCBdZm9yd2FyZC1zdWJzY3JpYmUtcmVzcG9uc2UocmVwb3J0ZXIpOiAiLHIpLDIwMD09PXIuYm9keS5jb2RlKXt2YXIgaT10Ll9idXMuYWRkRm9yd2FyZCh0Ll91cmwsdC5fb3duZXIpO3QuX2ZvcndhcmRzW2VbMF1dPWksbigpfWVsc2UgbygiRXJyb3Igb24gbXNnLW5vZGUgc3Vic2NyaXB0aW9uOiAiK3IuYm9keS5kZXNjKX0pfSl9fSx7a2V5OiJmb3J3YXJkVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC5fZm9yd2FyZHNbZV0ucmVtb3ZlKCksZGVsZXRlIHQuX2ZvcndhcmRzW2VdOwovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gdGhlIG1zZy1ub2RlIFN1YnNjcmlwdGlvbk1hbmFnZXIgY29tcG9uZW50CnZhciByPXt0eXBlOiJ1bnN1YnNjcmliZSIsZnJvbTp0Ll9wYXJlbnQuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIit0Ll9kb21haW4rIi9zbSIsYm9keTp7cmVzb3VyY2VzOltlXSxzb3VyY2U6dC5fb3duZXJ9fTt0Ll9idXMucG9zdE1lc3NhZ2Uocil9fSx7a2V5OiJhZGRDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4saSl7aWYoMD09PWUubGVuZ3RoKXJldHVybiB2b2lkIG4oKTt2YXIgcz1yLl91cmwrIi9jaGlsZHJlbi8iO20ubG9nKCJbU3luY2hlck1hbmFnZXIuUmVwb3J0ZXJPYmplY3QgLSBhZGRDaGlsZHJlbnNdIC0gY2hpbGRyZW5zOiAiLGUscyksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3IuX2NoaWxkcmVucy5wdXNoKGUpfSk7LyoKICAgICAgICBfdGhpcy5fY2hpbGRyZW5zLmZvckVhY2goKGNoaWxkKSA9PiB7CiAgICAgICAgICBsZXQgY2hpbGRJZCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwogICAgICAgICAgIGxldCBzZWxmRm9yd2FyZCA9IF90aGlzLl9idXMuYWRkRm9yd2FyZChjaGlsZElkLCBvd25lcik7CiAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChzZWxmRm9yd2FyZCk7CiAgICAgICAgfSk7Ki8KdmFyIGE9W107ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBhLnB1c2gocytlKX0pOwovL190aGlzLl9zdG9yYWdlU3Vic2NyaXB0aW9uc1tfdGhpcy5fb2JqU3Vic2NyaXB0b3JVUkxdID0ge3VybDogX3RoaXMuX3VybCwgb3duZXI6IF90aGlzLl9vd25lciwgY2hpbGRyZW5zOiBfdGhpcy5fY2hpbGRyZW5zfTsKLy9GTE9XLU9VVDogbWVzc2FnZSBzZW50IHRvIHRoZSBtc2ctbm9kZSBTdWJzY3JpcHRpb25NYW5hZ2VyIGNvbXBvbmVudAp2YXIgdT17dHlwZToic3Vic2NyaWJlIixmcm9tOnIuX3BhcmVudC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK3IuX2RvbWFpbisiL3NtIixib2R5OntyZXNvdXJjZXM6YSxzb3VyY2U6ci5fb3duZXJ9fTtyLl9idXMucG9zdE1lc3NhZ2UodSxmdW5jdGlvbihlKXttLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0IF1ub2RlLXN1YnNjcmliZS1yZXNwb25zZShyZXBvcnRlcik6IixlKSwyMDA9PT1lLmJvZHkuY29kZT8oCi8vYWRkIGNoaWxkcmVuIGxpc3RlbmVycyBvbiBsb2NhbCAuLi4KYS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPXIuX2J1cy5hZGRMaXN0ZW5lcihlLGZ1bmN0aW9uKGUpe2lmKAovL1RPRE86IHdoYXQgdG9kbyBoZXJlPyBTYXZlIGNoaWxkcmVucz8KbS5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCByZWNlaXZlZF0iLGUpLCJjcmVhdGUiPT09ZS50eXBlJiZlLnRvLmluY2x1ZGVzKCJjaGlsZHJlbiIpJiZ0Ll9pc1RvU2F2ZURhdGEpewovLyBpZiB0aGUgdmFsdWUgaXMgbm90IGVuY3J5cHRlZCBsZXRzIGVuY3J5cHQgaXQKLy8gdG9kbzogc2hvdWxkIGJlIHN1YmplY3QgdG8gc29tZSBwb2xpY3kKdmFyIG49KDAsaC5zcGxpdE9iamVjdFVSTCkoZS50byksaT1uLnVybDsKLy9yZW1vdmUgZmFsc2Ugd2hlbiBtdXR1YWxBdXRoZW50aWNhdGlvbiBpcyBlbmFibGVkCiJzdHJpbmciIT10eXBlb2YgZS5ib2R5LnZhbHVlPyhtLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0XSBlbmNyeXB0aW5nIHJlY2VpdmVkIGRhdGEgIixlLmJvZHkudmFsdWUpLF8uZGVmYXVsdC5lbmNyeXB0RGF0YU9iamVjdChlLmJvZHkudmFsdWUsaSkudGhlbihmdW5jdGlvbih0KXttLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0XSBlbmNyeXB0ZWQgZGF0YSAiLHQpLHIuX3N0b3JlQ2hpbGRPYmplY3QoZSwoMCxvLmRlZmF1bHQpKHQpKX0pLmNhdGNoKGZ1bmN0aW9uKHQpe20ud2FybigiW1N5bmNoZXJNYW5hZ2VyLl9kZWNyeXB0Q2hpbGRyZW5zXSBmYWlsZWQgOiAiLHQsIiBTdG9yaW5nIHVuZW5jcnlwdGVkIiksci5fc3RvcmVDaGlsZE9iamVjdChlLGUuYm9keS52YWx1ZSl9KSk6ci5fc3RvcmVDaGlsZE9iamVjdChlLGUuYm9keS52YWx1ZSl9fSk7ci5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChuKTt2YXIgaT1yLl9idXMuYWRkRm9yd2FyZChlLHIuX293bmVyKTtyLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGkpfSksbigpKTppKCJFcnJvciBvbiBtc2ctbm9kZSBzdWJzY3JpcHRpb246ICIrZS5ib2R5LmRlc2MpfSl9KX19LHtrZXk6Il9zdG9yZUNoaWxkT2JqZWN0Iix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj0oMCxoLnNwbGl0T2JqZWN0VVJMKShlLnRvKSxvPW4udXJsLGk9bi5yZXNvdXJjZSxzPXtpZGVudGl0eTplLmJvZHkuaWRlbnRpdHksdmFsdWU6dH0sYT1lLmJvZHkucmVzb3VyY2UsdT1pO2EmJih1Kz0iLiIrYSksCi8vIHRoaXMgaWRlbnRpdHkgZGF0YSBpcyBub3QgbmVlZGVkIHRvIGJlIHN0b3JlZApkZWxldGUgcy5pZGVudGl0eS5hc3NlcnRpb24sZGVsZXRlIHMuaWRlbnRpdHkuZXhwaXJlcyxyLl9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS5zYXZlQ2hpbGRyZW5zKCEwLG8sdSxzKX19LHtrZXk6ImRlbGV0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9KDAsaC5kaXZpZGVVUkwpKGUuX293bmVyKS5kb21haW47Ci8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCBkaXJlY3RseSB0byBhbGwgc3Vic2NyaWJlcnMgb2YgdGhlIHJlcG9ydGVyCmUuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToiZGVsZXRlIixmcm9tOmUuX29ialN1YnNjcmlwdG9yVVJMLHRvOmUuX3VybCsiL2NoYW5nZXMifSksCi8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byB0aGUgbXNnLW5vZGUgT2JqZWN0QWxsb2NhdGlvbk1hbmFnZXIgY29tcG9uZW50CmUuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToiZGVsZXRlIixmcm9tOmUuX3BhcmVudC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK3QrIi9vYmplY3QtYWRkcmVzcy1hbGxvY2F0aW9uIixib2R5OntyZXNvdXJjZTplLl91cmwsY2hpbGRyZW5SZXNvdXJjZXM6ZS5fY2hpbGRyZW5zfX0pLGUuX3JlbGVhc2VMaXN0ZW5lcnMoKSxkZWxldGUgZS5fcGFyZW50Ll9yZXBvcnRlcnNbZS5fdXJsXX19LHtrZXk6Il9vblJlbW90ZVJlc3BvbnNlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3QuX2J1cy5wb3N0TWVzc2FnZSh7aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOnQuX3VybCxib2R5Ontjb2RlOmUuYm9keS5jb2RlLGlkZW50aXR5OmUuYm9keS5pZGVudGl0eSxzb3VyY2U6ZS5mcm9tfX0pfX0se2tleToiX29uUmVtb3RlU3Vic2NyaWJlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5ib2R5LnN1YnNjcmliZXI7Ci8vdmFsaWRhdGUgaWYgc3Vic2NyaXB0aW9uIGFscmVhZHkgZXhpc3RzPwp0Ll9zdWJzY3JpcHRpb25zW3JdJiYKLy8gbGV0IGVycm9yTXNnID0gewovLyAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IGh5cGVydHlVUkwsCi8vICAgYm9keTogeyBjb2RlOiA1MDAsIGRlc2M6ICdTdWJzY3JpcHRpb24gZm9yICgnICsgX3RoaXMuX3VybCArICcgOiAnICsgIGh5cGVydHlVUkwgKyAnKSBhbHJlYWR5IGV4aXN0cyEnIH0KLy8gfTsKLy8KLy8gX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShlcnJvck1zZyk7Ci8vIHJldHVybjsKLy8gbmV3IHZlcnNpb24gYmVjYXVzZSBvZiByZXVzYWdlCnQuX3N1YnNjcmlwdGlvbnNbcl0uX3JlbGVhc2VMaXN0ZW5lcnMoKTsKLy9hc2sgdG8gc3Vic2NyaWJlIHRvIFN5bmNoZXI/IChkZXBlbmRzIG9uIHRoZSBvcGVyYXRpb24gbW9kZSkKLy9UT0RPOiBnZXQgbW9kZSBmcm9tIG9iamVjdCEKdmFyIG49e3R5cGU6ImZvcndhcmQiLGZyb206dC5fdXJsLHRvOnQuX293bmVyLGJvZHk6e3R5cGU6ZS50eXBlLGZyb206cix0bzp0Ll91cmwsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5fX07Ci8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKZS5ib2R5Lmhhc093blByb3BlcnR5KCJtdXR1YWwiKSYmKG4uYm9keS5tdXR1YWw9ZS5ib2R5Lm11dHVhbCksdC5fYnVzLnBvc3RNZXNzYWdlKG4sZnVuY3Rpb24obil7bS5sb2coIltTeW5jaGVyTWFuYWdlci5SZXBvcnRlck9iamVjdCBdZm9yd2FyZC1yZXBseTogIixuKSwyMDA9PT1uLmJvZHkuY29kZSYmKHQuX3N1YnNjcmlwdGlvbnNbcl18fChtLmxvZygiW1N5bmNoZXJNYW5hZ2VyLlJlcG9ydGVyT2JqZWN0XSAtIF9vblJlbW90ZVN1YnNjcmliZToiLHQuX2NoaWxkcmVucyksdC5fc3Vic2NyaXB0aW9uc1tyXT1uZXcgZy5kZWZhdWx0KHQuX2J1cyx0Ll9vd25lcix0Ll91cmwsdC5fY2hpbGRyZW5zLCEwKSkpOwovL1RPRE86IGF0dWFsaXphciBtdXR1YWwgbm8gc3RvcmFnZSBlIHRiIG5hIHNlc3Npb25LZXlzCi8vIFN0b3JlIGZvciBlYWNoIHJlcG9ydGVyIGh5cGVydHkgdGhlIGRhdGFPYmplY3QKdmFyIG89dm9pZCAwO2UuYm9keS5pZGVudGl0eSYmZS5ib2R5LmlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwmJihvPWUuYm9keS5pZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMLHQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCx0Ll91cmwsInN1YnNjcmliZXJVc2VycyIsbykpLGUuYm9keS5oYXNPd25Qcm9wZXJ0eSgibXV0dWFsIikmJgovLyAgICAgICAgICBfdGhpcy5fcGFyZW50Ll9pZGVudGl0eU1vZHVsZS51cGRhdGVJc1RvRW5jcnlwdEZvckRhdGFPYmplY3RTZXNzaW9uS2V5KF90aGlzLl91cmwsIG1zZy5ib2R5Lm11dHVhbCkudGhlbigoKT0+ewp0Ll9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITAsdC5fdXJsLCJtdXR1YWwiLGUuYm9keS5tdXR1YWwpLHQuX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMCx0Ll91cmwsInN1YnNjcmlwdGlvbnMiLHIpLG4uYm9keS5vd25lcj10Ll9vd25lciwKLy9GTE9XLU9VVDogc3Vic2NyaXB0aW9uIHJlc3BvbnNlIHNlbnQgKGZvcndhcmQgZnJvbSBpbnRlcm5hbCBIeXBlcnR5KQp0Ll9idXMucG9zdE1lc3NhZ2Uoe2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTpuLmJvZHl9KX0pfX0se2tleToiX29uUmVtb3RlVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkuc291cmNlLG49dC5fc3Vic2NyaXB0aW9uc1tyXTtpZihuKXtuLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl07dmFyIG89e3R5cGU6ImZvcndhcmQiLGZyb206dC5fdXJsLHRvOnQuX293bmVyLGJvZHk6e3R5cGU6ZS50eXBlLGZyb206cix0bzp0Ll91cmwsaWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5fX07dC5fYnVzLnBvc3RNZXNzYWdlKG8pfX19LHtrZXk6ImlzVG9TYXZlRGF0YSIsc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2lzVG9TYXZlRGF0YT1lfX1dKSxSZXBvcnRlck9iamVjdH0oKTt0LmRlZmF1bHQ9UixlLmV4cG9ydHM9dC5kZWZhdWx0fSwvKiA1MTMgKi8KLyoqKi8KZnVuY3Rpb24oZSx0LHIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChlKXtpZihlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIHQ9e307aWYobnVsbCE9ZSlmb3IodmFyIHIgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyKSYmKHRbcl09ZVtyXSk7cmV0dXJuIHQuZGVmYXVsdD1lLHR9ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoNjkpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoOCkscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cigxKSx1PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYSksYz1yKDIpLGY9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChjKSxsPXIoNyksZD1faW50ZXJvcFJlcXVpcmVXaWxkY2FyZChsKSxwPXIoMTQpLHk9cigyMTEpLGg9X2ludGVyb3BSZXF1aXJlRGVmYXVsdCh5KSx2PXIoMTAxKSxnPV9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHYpLGI9ZC5nZXRMb2dnZXIoIk9ic2VydmVyT2JqZWN0IiksXz1mdW5jdGlvbigpe2Z1bmN0aW9uIE9ic2VydmVyT2JqZWN0KGUsdCxyKXt2YXIgbj10aGlzOygwLHUuZGVmYXVsdCkodGhpcyxPYnNlcnZlck9iamVjdCk7dmFyIG89dGhpcztvLl9wYXJlbnQ9ZSxvLl91cmw9dCxvLl9jaGlsZHJlbnM9cixvLl9idXM9ZS5fYnVzLG8uX3N1YnNjcmlwdGlvbnM9e30sby5fc3RvcmFnZVN1YnNjcmlwdGlvbnM9e30sby5fY2hpbGRyZW5MaXN0ZW5lcnM9W10sdGhpcy5faXNUb1NhdmVEYXRhPSExO3ZhciBpPW8uX3VybCsiL2NoYW5nZXMiO28uX2NoYW5nZUxpc3RlbmVyPW8uX2J1cy5hZGRMaXN0ZW5lcihpLGZ1bmN0aW9uKGUpe2IubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QgXSBTeW5jaGVyTWFuYWdlci0iK2krIi1SQ1Y6ICIsZSksCi8vVE9ETzogd2hhdCB0b2RvIGhlcmU/IFNhdmUgY2hhbmdlcz8Kbi5faXNUb1NhdmVEYXRhJiZlLmJvZHkuYXR0cmlidXRlJiYoYi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCBdIFN5bmNoZXJNYW5hZ2VyIC0gc2F2ZSBkYXRhOiAiLGUpLG8uX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnVwZGF0ZSghMSxvLl91cmwsInZlcnNpb24iLGUuYm9keS52ZXJzaW9uKSxvLl9wYXJlbnQuX2RhdGFPYmplY3RzU3RvcmFnZS51cGRhdGUoITEsby5fdXJsLCJsYXN0TW9kaWZpZWQiLGUuYm9keS5sYXN0TW9kaWZpZWQpLG8uX3BhcmVudC5fZGF0YU9iamVjdHNTdG9yYWdlLnNhdmVEYXRhKCExLG8uX3VybCxlLmJvZHkuYXR0cmlidXRlLGUuYm9keS52YWx1ZSkpfSl9cmV0dXJuKDAsZi5kZWZhdWx0KShPYnNlcnZlck9iamVjdCxbe2tleToiX25ld1N1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuX3N1YnNjcmlwdGlvbnNbZV07Yi5sb2coIltPYnNlcnZlciBPYmplY3QgLSBuZXcgc3Vic2NyaXB0aW9uXSAtICIsdC5fc3Vic2NyaXB0aW9ucyxlLHQuX3N1YnNjcmlwdGlvbnMuaGFzT3duUHJvcGVydHkoZSkpLHJ8fCh0Ll9zdWJzY3JpcHRpb25zW2VdPW5ldyBoLmRlZmF1bHQodC5fYnVzLGUsdC5fdXJsLHQuX2NoaWxkcmVucywhMSkpfX0se2tleToiYWRkU3Vic2NyaXB0aW9uIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLl9uZXdTdWJzY3JpcHRpb24oZSl9fSx7a2V5OiJhZGRDaGlsZHJlbnMiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKG4pe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gbigpO3ZhciBpPXIuX3VybCsiL2NoaWxkcmVuLyI7Yi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCAtIGFkZENoaWxkcmVuc10gLSBjaGlsZHJlbnM6ICIsZSxpKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ci5fYnVzLmFkZExpc3RlbmVyKGkrZSxmdW5jdGlvbihlKXtpZigKLy9UT0RPOiB3aGF0IHRvZG8gaGVyZT8gU2F2ZSBjaGlsZHJlbnM/CmIubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QgcmVjZWl2ZWRdIixlKSwiY3JlYXRlIj09PWUudHlwZSYmZS50by5pbmNsdWRlcygiY2hpbGRyZW4iKSYmdC5faXNUb1NhdmVEYXRhKXt2YXIgaT0oMCxwLnNwbGl0T2JqZWN0VVJMKShlLnRvKSxzPWkudXJsOwovL3JlbW92ZSBmYWxzZSB3aGVuIG11dHVhbEF1dGhlbnRpY2F0aW9uIGlzIGVuYWJsZWQKInN0cmluZyIhPXR5cGVvZiBlLmJvZHkudmFsdWU/KGIubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3RdIGVuY3J5cHRpbmcgcmVjZWl2ZWQgZGF0YSAiLGUuYm9keS52YWx1ZSksZy5kZWZhdWx0LmVuY3J5cHREYXRhT2JqZWN0KGUuYm9keS52YWx1ZSxzKS50aGVuKGZ1bmN0aW9uKHQpe2IubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3RdIGVuY3J5cHRlZCBkYXRhICIsdCksci5fc3RvcmVDaGlsZE9iamVjdChlLCgwLG8uZGVmYXVsdCkodCkpfSkuY2F0Y2goZnVuY3Rpb24odCl7Yi53YXJuKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QuX2VuY3J5cHRDaGlsZF0gZmFpbGVkLCBzdG9yaW5nIHVuZW5jcnlwdGVkICIsdCksci5fc3RvcmVDaGlsZE9iamVjdChlLGUuYm9keS52YWx1ZSl9KSk6ci5fc3RvcmVDaGlsZE9iamVjdChlLGUuYm9keS52YWx1ZSl9Yi5sb2coIltTeW5jaGVyTWFuYWdlci5PYnNlcnZlck9iamVjdCBjaGlsZHJlbiBMaXN0ZW5lcnNdIixyLl9jaGlsZHJlbkxpc3RlbmVycyxuKSwtMT09PXIuX2NoaWxkcmVuTGlzdGVuZXJzLmluZGV4T2YobikmJnIuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobil9KX0pfSl9fSx7a2V5OiJfc3RvcmVDaGlsZE9iamVjdCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49KDAscC5zcGxpdE9iamVjdFVSTCkoZS50byksbz1uLnVybCxpPW4ucmVzb3VyY2Uscz17aWRlbnRpdHk6ZS5ib2R5LmlkZW50aXR5LHZhbHVlOnR9OwovLyB0aGlzIGlkZW50aXR5IGRhdGEgaXMgbm90IG5lZWRlZCB0byBiZSBzdG9yZWQKZGVsZXRlIHMuaWRlbnRpdHkuYXNzZXJ0aW9uLGRlbGV0ZSBzLmlkZW50aXR5LmV4cGlyZXM7dmFyIGE9ZS5ib2R5LnJlc291cmNlLHU9aTthJiYodSs9Ii4iK2EpLGIubG9nKCJbU3luY2hlck1hbmFnZXIuT2JzZXJ2ZXJPYmplY3QuX3N0b3JlQ2hpbGRPYmplY3RdIDogIixvLHUscyksci5fcGFyZW50Ll9kYXRhT2JqZWN0c1N0b3JhZ2Uuc2F2ZUNoaWxkcmVucyghMSxvLHUscyl9fSx7a2V5OiJyZW1vdmVTdWJzY3JpcHRpb24iLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20sbj0oMCxwLmRpdmlkZVVSTCkocikuZG9tYWluLG89dC5fdXJsKyIvc3Vic2NyaXB0aW9uIixpPXQuX3N1YnNjcmlwdGlvbnNbcl07aSYmKAovL0ZMT1ctT1VUOiBtZXNzYWdlIHNlbnQgdG8gcmVtb3RlIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVVuU3Vic2NyaWJlCnQuX2J1cy5wb3N0TWVzc2FnZSh7dHlwZToidW5zdWJzY3JpYmUiLGZyb206dC5fcGFyZW50Ll91cmwsdG86byxib2R5Ontzb3VyY2U6cixpZGVudGl0eTplLmJvZHkuaWRlbnRpdHl9fSksCi8vVE9ETzogc2hvdWxkIEkgd2FpdCBmb3IgcmVzcG9uc2UgYmVmb3JlIHVuc3Vic2NyaWJlIG9uIG1zZy1ub2RlCi8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byBtc2ctbm9kZSBTdWJzY3JpcHRpb25NYW5hZ2VyIGNvbXBvbmVudAp0Ll9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOnQuX3BhcmVudC5fdXJsLHRvOiJkb21haW46Ly9tc2ctbm9kZS4iK24rIi9zbSIsYm9keTp7cmVzb3VyY2U6dC5fdXJsLGNoaWxkcmVuUmVzb3VyY2VzOnQuX2NoaWxkcmVuc319KSxpLl9yZWxlYXNlTGlzdGVuZXJzKCksZGVsZXRlIHQuX3N1YnNjcmlwdGlvbnNbcl0pfX0se2tleToiaXNUb1NhdmVEYXRhIixzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5faXNUb1NhdmVEYXRhPWV9fV0pLE9ic2VydmVyT2JqZWN0fSgpO3QuZGVmYXVsdD1fLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUxNCAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDIxMCksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cig4KSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDEpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMiksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cig3KSxkPWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0obCkscD1yKDE0KSx5PXIoNTE1KSxoPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoeSksdj1kLmdldExvZ2dlcigiU3Vic2NyaXB0aW9uTWFuYWdlciIpLGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBTdWJzY3JpcHRpb25NYW5hZ2VyKGUsdCxyKXtpZigoMCx1LmRlZmF1bHQpKHRoaXMsU3Vic2NyaXB0aW9uTWFuYWdlciksIWUpdGhyb3cgbmV3IEVycm9yKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gLSBuZWVkcyB0aGUgcnVudGltZVVSTCBwYXJhbWV0ZXIiKTtpZighdCl0aHJvdyBuZXcgRXJyb3IoIltTdWJzY3JpcHRpb25NYW5hZ2VyXSAtIG5lZWRzIHRoZSBNZXNzYWdlQnVzIGluc3RhbmNlIik7dmFyIG49dGhpcztuLl9idXM9dCxuLl9zdG9yYWdlPXIsbi5fc3Vic2NyaXB0aW9ucz17fSxuLl9zdWJzY3JpcHRpb25zU3RvcmFnZT17fSwKLy9UT0RPOiB0aGVzZSBzaG91bGQgYmUgc2F2ZWQgaW4gcGVyc2lzdGVuY2UgZW5naW5lPwpuLnJ1bnRpbWVVUkw9ZSxuLl91cmw9ZSsiL3N1YnNjcmlwdGlvbnMiLAovL1RPRE86IHRoaXMgc2hvdWxkIG5vdCBiZSBoYXJkY29kZWQhCm4uX2RvbWFpbj0oMCxwLmRpdmlkZVVSTCkoZSkuZG9tYWluLHQuYWRkTGlzdGVuZXIobi5fdXJsLGZ1bmN0aW9uKGUpe3N3aXRjaCh2LmluZm8oIltTdWJzY3JpcHRpb25NYW5hZ2VyXSBSQ1Y6ICIsZSksZS50eXBlKXtjYXNlInN1YnNjcmliZSI6bi5fb25TdWJzY3JpYmUoZSk7YnJlYWs7Y2FzZSJ1bnN1YnNjcmliZSI6bi5fb25VblN1YnNjcmliZShlKTticmVhaztjYXNlInJlYWQiOm4uX29uUmVhZChlKX19KX1yZXR1cm4oMCxmLmRlZmF1bHQpKFN1YnNjcmlwdGlvbk1hbmFnZXIsW3trZXk6ImluaXQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbih0KXtlLl9zdG9yYWdlLmdldCgic3Vic2NyaXB0aW9ucyIpLnRoZW4oZnVuY3Rpb24ocil7di5sb2coIltTdWJzY3JpcHRpb25NYW5hZ2VyLmluaXRdIHJlc3VtZSBzdWJzY3JpcHRpb25zOiAiLHIpLHImJihlLl9zdWJzY3JpcHRpb25zU3RvcmFnZT1yLCgwLG8uZGVmYXVsdCkocikuZm9yRWFjaChmdW5jdGlvbih0KXtlLl9jcmVhdGVTdWJzY3JpcHRpb24odC5kb21haW4sdC5yZXNvdXJjZXMsdC5zdWJzY3JpYmVyLHQuaWRlbnRpdHkpfSkpLHQoKX0pfSl9fSx7a2V5OiJfb25TdWJzY3JpYmUiLAovL21lc3NhZ2UgcmVjZWl2ZWQgdG8gc2V0IGEgcm91dGluZyBwYXRoCnZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmJvZHkucmVzb3VyY2VzLG49ZS5mcm9tLG89KDAscC5kaXZpZGVVUkwpKHJbMF0pLmRvbWFpbixpPWUuYm9keS5pZGVudGl0eTt0Ll9jcmVhdGVTdWJzY3JpcHRpb24obyxyLG4saSkudGhlbihmdW5jdGlvbihzKXsKLy9mb3J3YXJkIHRvIGh5cGVydHk6CnMuaWQ9ZS5pZCxzLmZyb209dC5fdXJsLHMudG89bixzLmJvZHk9ZS5ib2R5LHMuYm9keS5jb2RlPTIwMCx2LmxvZygiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIC0gY3JhZXRlU3Vic2NyaXB0aW9uOiAiLGUscyxuKSx0Ll9idXMucG9zdE1lc3NhZ2UocyksdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbbl0/ci5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW25dLnJlc291cmNlcy5pbmNsdWRlcyhlKXx8dC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbbl0ucmVzb3VyY2VzLnB1c2goZSl9KTp0Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtuXT17ZG9tYWluOm8scmVzb3VyY2VzOnIsc3Vic2NyaWJlcjpuLGlkZW50aXR5Oml9LHQuX3N0b3JhZ2Uuc2V0KCJzdWJzY3JpcHRpb25zIiwxLHQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlKX0pfX0se2tleToiX2NyZWF0ZVN1YnNjcmlwdGlvbiIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIsbil7dmFyIG89dGhpczsKLy9kZWJ1Z2dlcjsKcmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24oaSl7Ci8vRkxPVy1PVVQ6IHN1YnNjcmliZSBtZXNzYWdlIHRvIHRoZSBtc2ctbm9kZSwgcmVnaXN0ZXJpbmcgbGlzdGVuZXJzIG9uIHRoZSBicm9rZXIKdmFyIHM9e3R5cGU6InN1YnNjcmliZSIsZnJvbTpvLl91cmwsdG86ImRvbWFpbjovL21zZy1ub2RlLiIrZSsiL3NtIixib2R5OntpZGVudGl0eTpuLHJlc291cmNlczp0LHNvdXJjZTpyfX07Ci8vc3Vic2NyaWJlIGluIG1zZy1ub2RlCm8uX2J1cy5wb3N0TWVzc2FnZShzLGZ1bmN0aW9uKGUpe3YubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gbm9kZS1zdWJzY3JpYmUtcmVzcG9uc2U6ICIsZSk7Ci8vaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7Ly9UT0RPOiB1bmNvbW1lbnQgd2hlbiAgTU4gcmVwbGllcyB3aXRoIGNvcnJlY3QgcmVzcG9uc2UgYm9keSBjb2RlCi8vVE9ETzogc3VwcG9ydCBtdWx0aXBsZSByb3V0ZXMgZm9yIG11bHRpcGxlIHJlc291cmNlcwp2YXIgbj1vLl9zdWJzY3JpcHRpb25zW3JdO3YubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlcl0gLSAiLG8uX3N1YnNjcmlwdGlvbnMsdCxvLl9zdWJzY3JpcHRpb25zLmhhc093blByb3BlcnR5KHIpKSxufHwoby5fc3Vic2NyaXB0aW9uc1tyXT17fSksdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe28uX3N1YnNjcmlwdGlvbnNbcl1bZV09bmV3IGguZGVmYXVsdChvLl9idXMscixlKX0pLGkoZSl9KX0pfX0se2tleToiX29uVW5TdWJzY3JpYmUiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLmZyb20sbj1lLmJvZHkucmVzb3VyY2U7aWYodC5fc3Vic2NyaXB0aW9uc1tyXSYmdC5fc3Vic2NyaXB0aW9uc1tyXVtuXSl7dmFyIG89KDAscC5kaXZpZGVVUkwpKG4pLmRvbWFpbixpPXQuX3N1YnNjcmlwdGlvbnNbcl1bbl07aWYoCi8vRkxPVy1PVVQ6IG1lc3NhZ2Ugc2VudCB0byBtc2ctbm9kZSBTdWJzY3JpcHRpb25NYW5hZ2VyIGNvbXBvbmVudAp0Ll9idXMucG9zdE1lc3NhZ2Uoe3R5cGU6InVuc3Vic2NyaWJlIixmcm9tOnQuX3VybCx0bzoiZG9tYWluOi8vbXNnLW5vZGUuIitvKyIvc20iLGJvZHk6e3Jlc291cmNlczpbbl0sc291cmNlOnJ9fSksaS5fcmVsZWFzZUxpc3RlbmVycygpLGRlbGV0ZSB0Ll9zdWJzY3JpcHRpb25zW3JdW25dLHQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlW3JdKXt2YXIgcz10Ll9zdWJzY3JpcHRpb25zU3RvcmFnZVtyXS5yZXNvdXJjZXMuaW5kZXhPZihuKTstMSE9cyYmdC5fc3Vic2NyaXB0aW9uc1N0b3JhZ2Vbcl0ucmVzb3VyY2VzLnNwbGljZShzLDEpLHQuX3N0b3JhZ2Uuc2V0KCJzdWJzY3JpcHRpb25zIiwxLHQuX3N1YnNjcmlwdGlvbnNTdG9yYWdlKX19dC5fYnVzLnBvc3RNZXNzYWdlKHtpZDplLmlkLHR5cGU6InJlc3BvbnNlIixmcm9tOmUudG8sdG86ZS5mcm9tLGJvZHk6e2NvZGU6MjAwfX0pfX0se2tleToiX29uUmVhZCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUuYm9keS5yZXNvdXJjZSxuPXZvaWQgMDt2LmxvZygiW1N1YnNjcmlwdGlvbk1hbmFnZXJdIC0gcmVxdWVzdCB0byByZWFkIFN1YnNjcmlwdGlvbnM6ICIsZSksdC5fc3RvcmFnZS5nZXQoInN1YnNjcmlwdGlvbnMiKS50aGVuKGZ1bmN0aW9uKG8pe2lmKG8mJm9bcl0pe3ZhciBpPW9bcl0ucmVzb3VyY2VzO249e2lkOmUuaWQsdHlwZToicmVzcG9uc2UiLGZyb206ZS50byx0bzplLmZyb20sYm9keTp7Y29kZToyMDAsdmFsdWU6aX19fWVsc2Ugbj17aWQ6ZS5pZCx0eXBlOiJyZXNwb25zZSIsZnJvbTplLnRvLHRvOmUuZnJvbSxib2R5Ontjb2RlOjQwNCxkZXNjcmlwdGlvbjoiTm90IEZvdW5kIn19O3QuX2J1cy5wb3N0TWVzc2FnZShuKX0pfX0se2tleToidXJsIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfX1dKSxTdWJzY3JpcHRpb25NYW5hZ2VyfSgpO3QuZGVmYXVsdD1nLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUxNSAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDEpLG89X2ludGVyb3BSZXF1aXJlRGVmYXVsdChuKSxpPXIoMikscz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGkpLGE9cig3KSx1PWZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgciBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHIpJiYodFtyXT1lW3JdKTtyZXR1cm4gdC5kZWZhdWx0PWUsdH0oYSksYz11LmdldExvZ2dlcigiU3Vic2NyaXB0aW9uIiksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIFN1YnNjcmlwdGlvbihlLHQscil7KDAsby5kZWZhdWx0KSh0aGlzLFN1YnNjcmlwdGlvbik7dmFyIG49dGhpcztuLl9zdWJzY3JpYmVyPXQsbi5yZXNvdXJjZT1yLGMubG9nKCJbU3Vic2NyaXB0aW9uTWFuYWdlci5TdWJzY3JpcHRpb25dIG5ldzogIix0LHIpLAovL2FkZCBmb3J3YXJkCm4uX2xpc3RlbmVyPWUuYWRkRm9yd2FyZChyLHQpfXJldHVybigwLHMuZGVmYXVsdCkoU3Vic2NyaXB0aW9uLFt7a2V5OiJfcmVsZWFzZUxpc3RlbmVycyIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9saXN0ZW5lci5yZW1vdmUoKX19XSksU3Vic2NyaXB0aW9ufSgpO3QuZGVmYXVsdD1mLGUuZXhwb3J0cz10LmRlZmF1bHR9LC8qIDUxNiAqLwovKioqLwpmdW5jdGlvbihlLHQscil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbj1yKDY5KSxvPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobiksaT1yKDgpLHM9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChpKSxhPXIoNTkpLHU9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChhKSxjPXIoMSksZj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGMpLGw9cigyKSxkPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQobCkscD1yKDY3KSx5PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQocCksaD1yKDY4KSx2PV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaCksZz1yKDcpLGI9ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciByIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJih0W3JdPWVbcl0pO3JldHVybiB0LmRlZmF1bHQ9ZSx0fShnKSxfPXIoMjA2KSxtPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoXyksUj1yKDIwNyksdz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KFIpLFM9cigxNCksaz1yKDIwOCksTz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KGspLFA9cig1MTcpLE09X2ludGVyb3BSZXF1aXJlRGVmYXVsdChQKSxMPShiLmdldExvZ2dlcigiUEVQIiksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gUnVudGltZUNvcmVDdHgoZSx0LHIsbixvKXsoMCxmLmRlZmF1bHQpKHRoaXMsUnVudGltZUNvcmVDdHgpO3ZhciBpPSgwLHkuZGVmYXVsdCkodGhpcywoUnVudGltZUNvcmVDdHguX19wcm90b19ffHwoMCx1LmRlZmF1bHQpKFJ1bnRpbWVDb3JlQ3R4KSkuY2FsbCh0aGlzKSk7cmV0dXJuIGkuX3J1bnRpbWVVUkw9ZSxpLl9wZXBVUkw9aS5fcnVudGltZVVSTCsiL3BlcCIsaS5fZ3VpVVJMPWkuX3J1bnRpbWVVUkwrIi9wb2xpY3ktZ3VpIixpLmlkTW9kdWxlPXQsaS5ydW50aW1lUmVnaXN0cnk9cixpLmFjdGl2ZVVzZXJQb2xpY3k9dm9pZCAwLGkuc2VydmljZVByb3ZpZGVyUG9saWN5PXt9LGkudXNlclBvbGljaWVzPXt9LGkuc3RvcmFnZU1hbmFnZXI9bixpLnJ1bnRpbWVDYXBhYmlsaXRpZXM9byxpfXJldHVybigwLHYuZGVmYXVsdCkoUnVudGltZUNvcmVDdHgsZSksKDAsZC5kZWZhdWx0KShSdW50aW1lQ29yZUN0eCxbe2tleToibG9hZENvbmZpZ3VyYXRpb25zIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIG5ldyBzLmRlZmF1bHQoZnVuY3Rpb24odCxyKXtlLnN0b3JhZ2VNYW5hZ2VyLmdldCgicmV0aGluazphY3RpdmVQb2xpY3kiKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLmFjdGl2ZVVzZXJQb2xpY3k9dCxlLnN0b3JhZ2VNYW5hZ2VyLmdldCgicmV0aGluazpncm91cHMiKX0pLnRoZW4oZnVuY3Rpb24odCl7dmFyIHI9dDtyZXR1cm4gZS5ncm91cHM9dm9pZCAwPT09cj97fTpyLGUuc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXRoaW5rOnNwUG9saWNpZXMiKX0pLnRoZW4oZnVuY3Rpb24ocil7dmFyIG49cjtlLnNlcnZpY2VQcm92aWRlclBvbGljeT12b2lkIDA9PT1uP3t9Om4sZS5fbG9hZFVzZXJQb2xpY2llcygpLnRoZW4oZnVuY3Rpb24oKXt0KCl9KX0pfSl9fSx7a2V5OiJnZXRQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtyZXR1cm4gdm9pZCAwIT09dGhpcy5hY3RpdmVVc2VyUG9saWN5JiYoci51c2VyUG9saWN5PXRoaXMudXNlclBvbGljaWVzW3RoaXMuYWN0aXZlVXNlclBvbGljeV0pLHIuc2VydmljZVByb3ZpZGVyUG9saWN5PXRoaXMuZ2V0U2VydmljZVByb3ZpZGVyUG9saWN5KGUsdCkscn19LHtrZXk6Il9pc1ZhbGlkVXBkYXRlIix2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7ZS5mcm9tLnNwbGl0KCI6Ly8iKS5sZW5ndGg+MT90LmlkTW9kdWxlLl9nZXRIeXBlcnR5RnJvbURhdGFPYmplY3QoZS5mcm9tKS50aGVuKGZ1bmN0aW9uKHQpe3Q9PT1lLmJvZHkuc291cmNlP3IoZSk6bigiVGhlIHNvdXJjZSBvZiB0aGUgbWVzc2FnZSBpcyBub3QgdmFsaWQuIil9LGZ1bmN0aW9uKGUpe24oZSl9KTpyKGUpfSl9fSx7a2V5OiJnZXRNeUVtYWlscyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlkTW9kdWxlLmdldElkZW50aXRpZXMoKSx0PVtdO2Zvcih2YXIgciBpbiBlKXQucHVzaCgoMCxTLmdldFVzZXJFbWFpbEZyb21VUkwpKGVbcl0uaWRlbnRpdHkpKTtyZXR1cm4gdH19LHtrZXk6ImdldE15SHlwZXJ0aWVzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucnVudGltZVJlZ2lzdHJ5Lmh5cGVydGllc0xpc3QsdD1bXTtmb3IodmFyIHIgaW4gZSl7dmFyIG49ZVtyXS5vYmplY3ROYW1lOy0xPT09dC5pbmRleE9mKG4pJiZ0LnB1c2gobil9cmV0dXJuIHR9fSx7a2V5OiJnZXRTZXJ2aWNlUHJvdmlkZXJQb2xpY3kiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dm9pZCAwO2lmKHQpe3ZhciBuPXRoaXMucnVudGltZVJlZ2lzdHJ5LmdldEh5cGVydHlOYW1lKGUudG8pO3I9dGhpcy5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbbl19ZWxzZXt2YXIgbz10aGlzLnJ1bnRpbWVSZWdpc3RyeS5nZXRIeXBlcnR5TmFtZShlLmZyb20pO3I9dGhpcy5zZXJ2aWNlUHJvdmlkZXJQb2xpY3lbb119cmV0dXJuIHJ9fSx7a2V5OiJnZXRVUkwiLHZhbHVlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoIi8iKTtyZXR1cm4gdFswXSsiLy8iK3RbMl0rIi8iK3RbM119fSx7a2V5OiJfbG9hZFVzZXJQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcztyZXR1cm4gbmV3IHMuZGVmYXVsdChmdW5jdGlvbihyLG4pe3Quc3RvcmFnZU1hbmFnZXIuZ2V0KCJyZXRoaW5rOnVzZXJQb2xpY2llcyIpLnRoZW4oZnVuY3Rpb24odCl7dmFyIG49dDtpZih2b2lkIDAhPT1uKWZvcih2YXIgbyBpbiBuKWUucGVwLmFkZFBvbGljeSgiVVNFUiIsbyxuW29dKTtyKCl9KX0pfX0se2tleToiX2dldExhc3RDb21wb25lbnRPZlVSTCIsdmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdCgiLyIpO3JldHVybiB0W3QubGVuZ3RoLTFdfX0se2tleToiX2dldFBvbGljaWVzSlNPTiIsdmFsdWU6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpe3ZhciByPWVbdF0uY29tYmluaW5nQWxnb3JpdGhtO3IgaW5zdGFuY2VvZiB3LmRlZmF1bHQ/ZVt0XS5jb21iaW5pbmdBbGdvcml0aG09ImJsb2NrT3ZlcnJpZGVzIjpyIGluc3RhbmNlb2YgbS5kZWZhdWx0P2VbdF0uY29tYmluaW5nQWxnb3JpdGhtPSJhbGxvd092ZXJyaWRlcyI6ciBpbnN0YW5jZW9mIE8uZGVmYXVsdD9lW3RdLmNvbWJpbmluZ0FsZ29yaXRobT0iZmlyc3RBcHBsaWNhYmxlIjplW3RdLmNvbWJpbmluZ0FsZ29yaXRobT12b2lkIDB9cmV0dXJuIGV9fSx7a2V5OiJzYXZlQWN0aXZlUG9saWN5Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5zdG9yYWdlTWFuYWdlci5zZXQoInJldGhpbms6YWN0aXZlUG9saWN5IiwwLGUuYWN0aXZlVXNlclBvbGljeSkudGhlbihmdW5jdGlvbigpe3IoKX0pfSl9fSx7a2V5OiJzYXZlR3JvdXBzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzO3JldHVybiBuZXcgcy5kZWZhdWx0KGZ1bmN0aW9uKHIsbil7dC5zdG9yYWdlTWFuYWdlci5zZXQoInJldGhpbms6Z3JvdXBzIiwwLGUuZ3JvdXBzKS50aGVuKGZ1bmN0aW9uKCl7cigpfSl9KX19LHtrZXk6InNhdmVQb2xpY2llcyIsdmFsdWU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPXZvaWQgMDtzd2l0Y2goZSl7Y2FzZSJVU0VSIjpuPSgwLG8uZGVmYXVsdCkodGhpcy51c2VyUG9saWNpZXMpLG49dGhpcy5fZ2V0UG9saWNpZXNKU09OKEpTT04ucGFyc2UobikpLHRoaXMuc3RvcmFnZU1hbmFnZXIuc2V0KCJyZXRoaW5rOnVzZXJQb2xpY2llcyIsMCxuKTticmVhaztjYXNlIlNFUlZJQ0VfUFJPVklERVIiOnZvaWQgMCE9PXQmdm9pZCAwIT09ciYmKHRoaXMuc2VydmljZVByb3ZpZGVyUG9saWN5W3JdPXQpLG49KDAsby5kZWZhdWx0KSh0aGlzLnNlcnZpY2VQcm92aWRlclBvbGljeSksbj10aGlzLl9nZXRQb2xpY2llc0pTT04oSlNPTi5wYXJzZShuKSksdGhpcy5zdG9yYWdlTWFuYWdlci5zZXQoInJldGhpbms6c3BQb2xpY2llcyIsMCxuKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKCJVbmtub3duIHBvbGljeSBzb3VyY2U6ICIrZSl9fX0se2tleToiZ2V0R3JvdXBzTmFtZXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5ncm91cHMsdD1bXTtpZih2b2lkIDAhPT1lKWZvcih2YXIgciBpbiBlKXQucHVzaChyKTtyZXR1cm4gdH19LHtrZXk6ImdldEdyb3VwIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciByPVtdO2lmKCJwcmVhdXRob3Jpc2VkIj09PWUpe3ZhciBuPXQuc3BsaXQoIi8iKTtuLnBvcCgpLG49blswXSsiLy8iK25bMl0scj10aGlzLnJ1bnRpbWVSZWdpc3RyeS5nZXRQcmVBdXRoU3Vic2NyaWJlcnMobil9ZWxzZSB2b2lkIDAhPT10aGlzLmdyb3Vwc1tlXSYmKHI9dGhpcy5ncm91cHNbZV0pO3JldHVybiByfX0se2tleToiY3JlYXRlR3JvdXAiLHZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBzW2VdPVtdLHRoaXMuc2F2ZUdyb3VwcygpfX0se2tleToiZGVsZXRlR3JvdXAiLHZhbHVlOmZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLmdyb3Vwc1tlXSx0aGlzLnNhdmVHcm91cHMoKX19LHtrZXk6ImFkZFRvR3JvdXAiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5ncm91cHM7aWYodm9pZCAwPT09cltlXSl0aHJvdyBFcnJvcignR3JvdXAgIicrZSsnIiBkb2VzIG5vdCBleGlzdCEnKTstMT09PXJbZV0uaW5kZXhPZih0KSYmKHJbZV0ucHVzaCh0KSx0aGlzLnNhdmVHcm91cHMoKSl9fSx7a2V5OiJyZW1vdmVGcm9tR3JvdXAiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5ncm91cHNbZV07ci5zcGxpY2Uoci5pbmRleE9mKHQpLDEpLHRoaXMuc2F2ZUdyb3VwcygpfX0se2tleToicGVwVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGVwVVJMfX0se2tleToiZ3VpVVJMIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3VpVVJMfX0se2tleToicnVudGltZVVSTCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3J1bnRpbWVVUkx9fSx7a2V5OiJtZXNzYWdlQnVzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUJ1c30sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX21lc3NhZ2VCdXM9ZX19LHtrZXk6InN1YnNjcmlwdGlvbiIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3N1YnNjcmlwdGlvbj1lLm1lc3NhZ2UuYm9keS5zdWJzY3JpYmVyfX1dKSxSdW50aW1lQ29yZUN0eH0oTS5kZWZhdWx0KSk7dC5kZWZhdWx0PUwsZS5leHBvcnRzPXQuZGVmYXVsdH0sLyogNTE3ICovCi8qKiovCmZ1bmN0aW9uKGUsdCxyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBuPXIoMSksbz1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KG4pLGk9cigyKSxzPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaSksYT1yKDE0KSx1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gUmVUaGlua0N0eCgpeygwLG8uZGVmYXVsdCkodGhpcyxSZVRoaW5rQ3R4KSx0aGlzLmRlZmF1bHRCZWhhdmlvdXI9ITAsdGhpcy5ncm91cHM9e319cmV0dXJuKDAscy5kZWZhdWx0KShSZVRoaW5rQ3R4LFt7a2V5OiJzY2hlbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2hlbWV9LHNldDpmdW5jdGlvbihlKXt2YXIgdD1lLm1lc3NhZ2UuZnJvbTsoMCxhLmlzRGF0YU9iamVjdFVSTCkodCk/dGhpcy5fc2NoZW1lPSgwLGEuZGl2aWRlVVJMKSh0KS50eXBlOnRoaXMuX3NjaGVtZT12b2lkIDB9fSx7a2V5OiJkYXRlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0ZX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBEYXRlLHI9U3RyaW5nKHQuZ2V0RGF0ZSgpKTsxPT09ci5sZW5ndGgmJihyPSIwIityKTt2YXIgbj1TdHJpbmcodC5nZXRNb250aCgpKzEpOzE9PT1uLmxlbmd0aCYmKG49IjAiK24pLHRoaXMuX2RhdGU9cisiLyIrbisiLyIrdC5nZXRGdWxsWWVhcigpfX0se2tleToiZG9tYWluIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tYWlufSxzZXQ6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5tZXNzYWdlLmJvZHkuaWRlbnRpdHkmJih0aGlzLl9kb21haW49KDAsYS5kaXZpZGVFbWFpbCkoZS5tZXNzYWdlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlcm5hbWUpLmRvbWFpbil9fSx7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUubWVzc2FnZTt2b2lkIDAhPT10LmJvZHkudmFsdWUmJih0aGlzLl90eXBlPXQuYm9keS52YWx1ZS5yZXNvdXJjZVR5cGUpfX0se2tleToic291cmNlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlfSxzZXQ6ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5tZXNzYWdlLmJvZHkuaWRlbnRpdHkmJih0aGlzLl9zb3VyY2U9ZS5tZXNzYWdlLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlcm5hbWUpfX0se2tleToidGltZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWV9LHNldDpmdW5jdGlvbihlKXtlPW5ldyBEYXRlO3ZhciB0PVN0cmluZyhlLmdldE1pbnV0ZXMoKSk7MT09PXQubGVuZ3RoJiYodD0iMCIrdCksdGhpcy5fdGltZT1wYXJzZUludChTdHJpbmcoZS5nZXRIb3VycygpKSt0KX19LHtrZXk6IndlZWtkYXkiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93ZWVrZGF5fSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fd2Vla2RheT1TdHJpbmcoKG5ldyBEYXRlKS5nZXREYXkoKSl9fV0pLFJlVGhpbmtDdHh9KCk7dC5kZWZhdWx0PXUsZS5leHBvcnRzPXQuZGVmYXVsdH1dKX0pOw==",
      "sourceCodeClassname": "Runtime",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "version": "10.60",
    "description": "",
    "language": "Javascript",
    "cguid": "3bc366f2d0ba3d681e7a3899917c5d3de",
    "type": "Runtimes",
    "runtimeType": "browser",
    "p2pHandlerStub": "",
    "p2pRequesterStub": "",
    "constraints": {
      "browser": true,
      "mic": true,
      "camera": true,
      "sensor": false,
      "webrtc": true,
      "ortc": true,
      "http": true,
      "https": true,
      "ws": true,
      "wss": true,
      "coap": false,
      "datachannel": false
    },
    "objectName": "Runtime",
    "configuration": {},
    "messageSchemas": [],
    "dataObjects": [],
    "signature": "",
    "accessControlPolicy": "somePolicy"
  }
}