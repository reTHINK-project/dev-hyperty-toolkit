{
  "default": {
    "cguid": "4-aaf84b28-7f8b-b2e6-93d7-4784864cd37b0",
    "type": "ProtoStubs",
    "version": 0.6,
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9Cgp2YXIgVmVydHhQcm90b1N0dWIgPSAoZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9jb250aW51b3VzT3BlbjogYm9vbGVhbgogICAgIF9ydW50aW1lUHJvdG9TdHViVVJMOiBzdHJpbmcKICAgIF9idXM6IE1pbmlCdXMKICAgIF9tc2dDYWxsYmFjazogKE1lc3NhZ2UpID0+IHZvaWQKICAgIF9jb25maWc6IHsgdXJsLCBydW50aW1lVVJMIH0KICAgICBfc29jazogKFdlYlNvY2tldCB8IFNvY2tKUykKICAgIF9yZU9wZW46IGJvb2xlYW4KICAqLwoKICAvKioKICAgKiBWZXJ0eCBQcm90b1N0dWIgY3JlYXRpb24KICAgKiBAcGFyYW0gIHtzdHJpbmd9IHJ1bnRpbWVQcm90b1N0dWJVUkwgLSBVUkwgdXNlZCBpbnRlcm5hbGx5IGZvciBtZXNzYWdlIGRlbGl2ZXJ5IHBvaW50LiBOb3QgdXNlZCBmb3IgTWVzc2FnZU5vZGUgZGVsaXZlci4KICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuCiAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKiBAcmV0dXJuIHtWZXJ0eFByb3RvU3R1Yn0KICAgKi8KCiAgZnVuY3Rpb24gVmVydHhQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZXJ0eFByb3RvU3R1Yik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLl9pZCA9IDA7CiAgICB0aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CgogICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICB0aGlzLl9idXMgPSBidXM7CiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7CgogICAgdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBjb25maWcucnVudGltZVVSTDsKICAgIHRoaXMuX3JlT3BlbiA9IGZhbHNlOwoKICAgIGJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpcy5fZmlsdGVyKG1zZykpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbVmVydHhQcm90b1N0dWI6IFByb3RvU3R1YiAtPiBNTl0nLCBtc2cpOwogICAgICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgUHJvdG9TdHViCiAgICogQHJldHVybiB7T2JqZWN0fSAtIE1hbmRhdG9yeSBmaWVsZHMgYXJlOiAidXJsIiBvZiB0aGUgTWVzc2FnZU5vZGUgYWRkcmVzcyBhbmQgInJ1bnRpbWVVUkwiLgogICAqLwoKICBfY3JlYXRlQ2xhc3MoVmVydHhQcm90b1N0dWIsIFt7CiAgICBrZXk6ICdjb25uZWN0JywKCiAgICAvKioKICAgICAqIFRyeSB0byBvcGVuIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBNZXNzYWdlTm9kZS4gQ29ubmVjdGlvbiBpcyBhdXRvIG1hbmFnZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCB0aGlzIGV4cGxpY2l0bHkuCiAgICAgKiBIb3dldmVyLCBpZiAiZGlzY29ubmVjdCgpIiBpcyBjYWxsZWQsIGl0J3MgbmVjZXNzYXJ5IHRvIGNhbGwgdGhpcyB0byBlbmFibGUgY29ubmVjdGlvbnMgYWdhaW4uCiAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiwgY29udGFpbmluZyB0aGUgdmFsdWUgImNvbm5lY3RlZCIgaWYgc3VjY2Vzc2Z1bCwgb3IgImRpc2Nvbm5lY3RlZCIgaWYgc29tZSBlcnJvciBvY2N1cnMuCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2NvbnRpbnVvdXNPcGVuID0gdHJ1ZTsKICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkge30pOwogICAgfQoKICAgIC8qKgogICAgICogSXQgd2lsbCBkaXNjb25uZWN0IGFuZCBvcmRlciB0byBzdGF5IGRpc2Nvbm5lY3RlZC4gUmVjb25uZWN0aW9uIHRyaWVzLCB3aWxsIG5vdCBiZSBhdHRlbXB0ZWQsIHVubGVzcyAiY29ubmVjdCgpIiBpcyBjYWxsZWQuCiAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiB3aXRoIHZhbHVlICJkaXNjb25uZWN0ZWQiLgogICAgICovCiAgfSwgewogICAga2V5OiAnZGlzY29ubmVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IGZhbHNlOwogICAgICBpZiAoX3RoaXMuX3NvY2spIHsKICAgICAgICBfdGhpcy5fc2VuZENsb3NlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZE9wZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kT3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2lkKys7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgaWQ6IF90aGlzLl9pZCwgdHlwZTogJ29wZW4nLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX3JlT3BlbikgewogICAgICAgIG1zZy50eXBlID0gJ3JlLW9wZW4nOwogICAgICB9CgogICAgICAvL3JlZ2lzdGVyIGFuZCB3YWl0IGZvciBvcGVuIHJlcGx5Li4uCiAgICAgIHZhciBoYXNSZXNwb25zZSA9IGZhbHNlOwogICAgICBfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrID0gZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgaWYgKHJlcGx5LnR5cGUgPT09ICdyZXNwb25zZScgJiByZXBseS5pZCA9PT0gbXNnLmlkKSB7CiAgICAgICAgICBoYXNSZXNwb25zZSA9IHRydWU7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgaWYgKHJlcGx5LmJvZHkucnVudGltZVRva2VuKSB7CiAgICAgICAgICAgICAgLy9zZXR1cCBydW50aW1lU2Vzc2lvbgogICAgICAgICAgICAgIF90aGlzLl9yZU9wZW4gPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzLl9ydW50aW1lU2Vzc2lvblVSTCA9IF90aGlzLl9jb25maWcucnVudGltZVVSTCArICcvJyArIHJlcGx5LmJvZHkucnVudGltZVRva2VuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnY29ubmVjdGVkJyk7CiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJywgcmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBfdGhpcy5fc29jay5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIWhhc1Jlc3BvbnNlKSB7CiAgICAgICAgICAvL25vIHJlc3BvbnNlIGFmdGVyIHggc2Vjb25kcy4uLgogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsICdUaW1lb3V0IGZyb20gbW46L3Nlc3Npb24nKTsKICAgICAgICB9CiAgICAgIH0sIDMwMDApOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kQ2xvc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kQ2xvc2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5faWQrKzsKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICBpZDogX3RoaXMuX2lkLCB0eXBlOiAnY2xvc2UnLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCiAgICAgIH07CgogICAgICAvL2ludmFsaWRhdGUgcnVudGltZVNlc3Npb24KICAgICAgX3RoaXMuX3JlT3BlbiA9IGZhbHNlOwogICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLl9ydW50aW1lVVJMOwoKICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZFN0YXR1cycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRTdGF0dXModmFsdWUsIHJlYXNvbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAndXBkYXRlJywKICAgICAgICBmcm9tOiBfdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICB0bzogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgYm9keTogewogICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHJlYXNvbikgewogICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CiAgICAgIH0KCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfd2FpdFJlYWR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfd2FpdFJlYWR5KGNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuX3NvY2sucmVhZHlTdGF0ZSA9PT0gMSkgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19maWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2RlbGl2ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxpdmVyKG1zZykgewogICAgICBpZiAoIW1zZy5ib2R5KSBtc2cuYm9keSA9IHt9OwoKICAgICAgbXNnLmJvZHkudmlhID0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgY29uc29sZS5sb2coJ1tWZXJ0eFByb3RvU3R1YjogTU4gLT4gUHJvdG9TdHViXScsIG1zZyk7CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl9jb250aW51b3VzT3BlbikgewogICAgICAgIC8vVE9ETzogc2VuZCBzdGF0dXMgKHNlbnQgbWVzc2FnZSBlcnJvciAtIGRpc2Nvbm5lY3RlZCkKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghX3RoaXMuX3NvY2spIHsKICAgICAgICBpZiAoX3RoaXMuX2NvbmZpZy51cmwuc3Vic3RyaW5nKDAsIDIpID09PSAnd3MnKSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBXZWJTb2NrZXQoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBTb2NrSlMoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuX3NvY2sub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3NlbmRPcGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShlLmRhdGEpOwoKICAgICAgICAgIGNvbnNvbGUubG9nKCdbVmVydHhQcm90b1N0dWI6IE1OIC0+IFNPQ0tFVCBPTiBNRVNTQUdFXScsIG1zZyk7CgogICAgICAgICAgaWYgKG1zZy5mcm9tID09PSAnbW46L3Nlc3Npb24nKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fZGVsaXZlcihtc2cpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHZhciByZWFzb24gPSB1bmRlZmluZWQ7CgogICAgICAgICAgLy9TZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY0NTUjc2VjdGlvbi03LjQKICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAxMDAwKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdOb3JtYWwgY2xvc3VyZSwgbWVhbmluZyB0aGF0IHRoZSBwdXJwb3NlIGZvciB3aGljaCB0aGUgY29ubmVjdGlvbiB3YXMgZXN0YWJsaXNoZWQgaGFzIGJlZW4gZnVsZmlsbGVkLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDEpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIFwnZ29pbmcgYXdheVwnLCBzdWNoIGFzIGEgc2VydmVyIGdvaW5nIGRvd24gb3IgYSBicm93c2VyIGhhdmluZyBuYXZpZ2F0ZWQgYXdheSBmcm9tIGEgcGFnZS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAyKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBkdWUgdG8gYSBwcm90b2NvbCBlcnJvcic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDMpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgdHlwZSBvZiBkYXRhIGl0IGNhbm5vdCBhY2NlcHQgKGUuZy4sIGFuIGVuZHBvaW50IHRoYXQgdW5kZXJzdGFuZHMgb25seSB0ZXh0IGRhdGEgTUFZIHNlbmQgdGhpcyBpZiBpdCByZWNlaXZlcyBhIGJpbmFyeSBtZXNzYWdlKS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA0KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdSZXNlcnZlZC4gVGhlIHNwZWNpZmljIG1lYW5pbmcgbWlnaHQgYmUgZGVmaW5lZCBpbiB0aGUgZnV0dXJlLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDUpIHsKICAgICAgICAgICAgcmVhc29uID0gJ05vIHN0YXR1cyBjb2RlIHdhcyBhY3R1YWxseSBwcmVzZW50Lic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDYpIHsKICAgICAgICAgICAgcmVhc29uID0gJ1RoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgYWJub3JtYWxseSwgZS5nLiwgd2l0aG91dCBzZW5kaW5nIG9yIHJlY2VpdmluZyBhIENsb3NlIGNvbnRyb2wgZnJhbWUnOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA3KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBkYXRhIHdpdGhpbiBhIG1lc3NhZ2UgdGhhdCB3YXMgbm90IGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBvZiB0aGUgbWVzc2FnZSAoZS5nLiwgbm9uLVVURi04IFtodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNjI5XSBkYXRhIHdpdGhpbiBhIHRleHQgbWVzc2FnZSkuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwOCkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgInZpb2xhdGVzIGl0cyBwb2xpY3kiLiBUaGlzIHJlYXNvbiBpcyBnaXZlbiBlaXRoZXIgaWYgdGhlcmUgaXMgbm8gb3RoZXIgc3V0aWJsZSByZWFzb24sIG9yIGlmIHRoZXJlIGlzIGEgbmVlZCB0byBoaWRlIHNwZWNpZmljIGRldGFpbHMgYWJvdXQgdGhlIHBvbGljeS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA5KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIG1lc3NhZ2UgdGhhdCBpcyB0b28gYmlnIGZvciBpdCB0byBwcm9jZXNzLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTApIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IChjbGllbnQpIGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIGV4cGVjdGVkIHRoZSBzZXJ2ZXIgdG8gbmVnb3RpYXRlIG9uZSBvciBtb3JlIGV4dGVuc2lvbiwgYnV0IHRoZSBzZXJ2ZXIgZGlkblwndCByZXR1cm4gdGhlbSBpbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSBvZiB0aGUgV2ViU29ja2V0IGhhbmRzaGFrZS4gPGJyIC8+IFNwZWNpZmljYWxseSwgdGhlIGV4dGVuc2lvbnMgdGhhdCBhcmUgbmVlZGVkIGFyZTogJyArIGV2ZW50LnJlYXNvbjsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxMSkgewogICAgICAgICAgICByZWFzb24gPSAnQSBzZXJ2ZXIgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGNvbmRpdGlvbiB0aGF0IHByZXZlbnRlZCBpdCBmcm9tIGZ1bGZpbGxpbmcgdGhlIHJlcXVlc3QuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxNSkgewogICAgICAgICAgICByZWFzb24gPSAnVGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBkdWUgdG8gYSBmYWlsdXJlIHRvIHBlcmZvcm0gYSBUTFMgaGFuZHNoYWtlIChlLmcuLCB0aGUgc2VydmVyIGNlcnRpZmljYXRlIGNhblwndCBiZSB2ZXJpZmllZCkuJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdVbmtub3duIHJlYXNvbic7CiAgICAgICAgICB9CgogICAgICAgICAgZGVsZXRlIF90aGlzLl9zb2NrOwogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlYXNvbik7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ2NvbmZpZycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdydW50aW1lU2Vzc2lvbicsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZlcnR4UHJvdG9TdHViOwp9KSgpOwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnVmVydHhQcm90b1N0dWInLAogICAgaW5zdGFuY2U6IG5ldyBWZXJ0eFByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCi8qKgoqIENhbGxiYWNrIHVzZWQgdG8gc2VuZCBtZXNzYWdlcwoqIEBjYWxsYmFjayBQb3N0TWVzc2FnZQoqIEBwYXJhbSB7TWVzc2FnZX0gbXNnIC0gTWVzc2FnZSB0byBzZW5kCiovCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFsxXSkoMSkKfSk7Cg==",
      "sourceCodeClassname": "VertxProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "configuration": {
      "url": "wss://msg-node.localhost:9090/ws"
    },
    "constraints": "",
    "hypertyCapabilities": "",
    "protocolCapabilities": "",
    "policies": "",
    "dataObjects": [],
    "interworking": false,
    "description": "Description of VertxProtoStub",
    "objectName": "VertxProtoStub",
    "accessControlPolicy": "somePolicy"
  },
  "VertxProtoStubNode": {
    "sourcePackage": {
      "sourceCode": "J3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8qKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gYWN0aXZhdGU7Cgp2YXIgX3dzID0gcmVxdWlyZSgnd3MnKTsKCnZhciBfd3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd3MpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIFZlcnR4UHJvdG9TdHViID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9jb250aW51b3VzT3BlbjogYm9vbGVhbgogICAgIF9ydW50aW1lUHJvdG9TdHViVVJMOiBzdHJpbmcKICAgIF9idXM6IE1pbmlCdXMKICAgIF9tc2dDYWxsYmFjazogKE1lc3NhZ2UpID0+IHZvaWQKICAgIF9jb25maWc6IHsgdXJsLCBydW50aW1lVVJMIH0KICAgICBfc29jazogKFdlYlNvY2tldCB8IFNvY2tKUykKICAgIF9yZU9wZW46IGJvb2xlYW4KICAqLwoKICAvKioKICAgKiBWZXJ0eCBQcm90b1N0dWIgY3JlYXRpb24KICAgKiBAcGFyYW0gIHtzdHJpbmd9IHJ1bnRpbWVQcm90b1N0dWJVUkwgLSBVUkwgdXNlZCBpbnRlcm5hbGx5IGZvciBtZXNzYWdlIGRlbGl2ZXJ5IHBvaW50LiBOb3QgdXNlZCBmb3IgTWVzc2FnZU5vZGUgZGVsaXZlci4KICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuCiAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKiBAcmV0dXJuIHtWZXJ0eFByb3RvU3R1Yn0KICAgKi8KICBmdW5jdGlvbiBWZXJ0eFByb3RvU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBidXMsIGNvbmZpZykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlcnR4UHJvdG9TdHViKTsKCiAgICBpZiAoIXJ1bnRpbWVQcm90b1N0dWJVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIHJ1bnRpbWVQcm90b1N0dWJVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgYnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWcpIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICBpZiAoIWNvbmZpZy51cmwpIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZy51cmwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZy5ydW50aW1lVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWcucnVudGltZVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuX2lkID0gMDsKICAgIHRoaXMuX2NvbnRpbnVvdXNPcGVuID0gdHJ1ZTsKCiAgICB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgIHRoaXMuX2J1cyA9IGJ1czsKICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZzsKCiAgICB0aGlzLl9ydW50aW1lU2Vzc2lvblVSTCA9IGNvbmZpZy5ydW50aW1lVVJMOwogICAgdGhpcy5fcmVPcGVuID0gZmFsc2U7CgogICAgYnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICBfdGhpcy5fb3BlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLl9maWx0ZXIobXNnKSkgewogICAgICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgUHJvdG9TdHViCiAgICogQHJldHVybiB7T2JqZWN0fSAtIE1hbmRhdG9yeSBmaWVsZHMgYXJlOiAidXJsIiBvZiB0aGUgTWVzc2FnZU5vZGUgYWRkcmVzcyBhbmQgInJ1bnRpbWVVUkwiLgogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFZlcnR4UHJvdG9TdHViLCBbewogICAga2V5OiAnY29ubmVjdCcsCgoKICAgIC8qKgogICAgICogVHJ5IHRvIG9wZW4gdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE1lc3NhZ2VOb2RlLiBDb25uZWN0aW9uIGlzIGF1dG8gbWFuYWdlZCwgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIHRoaXMgZXhwbGljaXRseS4KICAgICAqIEhvd2V2ZXIsIGlmICJkaXNjb25uZWN0KCkiIGlzIGNhbGxlZCwgaXQncyBuZWNlc3NhcnkgdG8gY2FsbCB0aGlzIHRvIGVuYWJsZSBjb25uZWN0aW9ucyBhZ2Fpbi4KICAgICAqIEEgc3RhdHVzIG1lc3NhZ2UgaXMgc2VudCB0byAicnVudGltZVByb3RvU3R1YlVSTC9zdGF0dXMiLCBjb250YWluaW5nIHRoZSB2YWx1ZSAiY29ubmVjdGVkIiBpZiBzdWNjZXNzZnVsLCBvciAiZGlzY29ubmVjdGVkIiBpZiBzb21lIGVycm9yIG9jY3Vycy4KICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSB0cnVlOwogICAgICBfdGhpcy5fb3BlbihmdW5jdGlvbiAoKSB7fSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJdCB3aWxsIGRpc2Nvbm5lY3QgYW5kIG9yZGVyIHRvIHN0YXkgZGlzY29ubmVjdGVkLiBSZWNvbm5lY3Rpb24gdHJpZXMsIHdpbGwgbm90IGJlIGF0dGVtcHRlZCwgdW5sZXNzICJjb25uZWN0KCkiIGlzIGNhbGxlZC4KICAgICAqIEEgc3RhdHVzIG1lc3NhZ2UgaXMgc2VudCB0byAicnVudGltZVByb3RvU3R1YlVSTC9zdGF0dXMiIHdpdGggdmFsdWUgImRpc2Nvbm5lY3RlZCIuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGlzY29ubmVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IGZhbHNlOwogICAgICBpZiAoX3RoaXMuX3NvY2spIHsKICAgICAgICBfdGhpcy5fc2VuZENsb3NlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZE9wZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kT3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2lkKys7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgaWQ6IF90aGlzLl9pZCwgdHlwZTogJ29wZW4nLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX3JlT3BlbikgewogICAgICAgIG1zZy50eXBlID0gJ3JlLW9wZW4nOwogICAgICB9CgogICAgICAvL3JlZ2lzdGVyIGFuZCB3YWl0IGZvciBvcGVuIHJlcGx5Li4uCiAgICAgIHZhciBoYXNSZXNwb25zZSA9IGZhbHNlOwogICAgICBfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrID0gZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgaWYgKHJlcGx5LnR5cGUgPT09ICdyZXNwb25zZScgJiByZXBseS5pZCA9PT0gbXNnLmlkKSB7CiAgICAgICAgICBoYXNSZXNwb25zZSA9IHRydWU7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgaWYgKHJlcGx5LmJvZHkucnVudGltZVRva2VuKSB7CiAgICAgICAgICAgICAgLy9zZXR1cCBydW50aW1lU2Vzc2lvbgogICAgICAgICAgICAgIF90aGlzLl9yZU9wZW4gPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzLl9ydW50aW1lU2Vzc2lvblVSTCA9IF90aGlzLl9jb25maWcucnVudGltZVVSTCArICcvJyArIHJlcGx5LmJvZHkucnVudGltZVRva2VuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnY29ubmVjdGVkJyk7CiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJywgcmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBfdGhpcy5fc29jay5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIWhhc1Jlc3BvbnNlKSB7CiAgICAgICAgICAvL25vIHJlc3BvbnNlIGFmdGVyIHggc2Vjb25kcy4uLgogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsICdUaW1lb3V0IGZyb20gbW46L3Nlc3Npb24nKTsKICAgICAgICB9CiAgICAgIH0sIDMwMDApOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kQ2xvc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kQ2xvc2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5faWQrKzsKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICBpZDogX3RoaXMuX2lkLCB0eXBlOiAnY2xvc2UnLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCiAgICAgIH07CgogICAgICAvL2ludmFsaWRhdGUgcnVudGltZVNlc3Npb24KICAgICAgX3RoaXMuX3JlT3BlbiA9IGZhbHNlOwogICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLl9ydW50aW1lVVJMOwoKICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZFN0YXR1cycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRTdGF0dXModmFsdWUsIHJlYXNvbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAndXBkYXRlJywKICAgICAgICBmcm9tOiBfdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICB0bzogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgYm9keTogewogICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHJlYXNvbikgewogICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CiAgICAgIH0KCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfd2FpdFJlYWR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfd2FpdFJlYWR5KGNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuX3NvY2sucmVhZHlTdGF0ZSA9PT0gMSkgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19maWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2RlbGl2ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxpdmVyKG1zZykgewogICAgICBpZiAoIW1zZy5ib2R5KSBtc2cuYm9keSA9IHt9OwoKICAgICAgbXNnLmJvZHkudmlhID0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX29wZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vcGVuKGNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuX2NvbnRpbnVvdXNPcGVuKSB7CiAgICAgICAgLy9UT0RPOiBzZW5kIHN0YXR1cyAoc2VudCBtZXNzYWdlIGVycm9yIC0gZGlzY29ubmVjdGVkKQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFfdGhpcy5fc29jaykgewogICAgICAgIGlmIChfdGhpcy5fY29uZmlnLnVybC5zdWJzdHJpbmcoMCwgMikgPT09ICd3cycpIHsKICAgICAgICAgIF90aGlzLl9zb2NrID0gbmV3IF93czIuZGVmYXVsdChfdGhpcy5fY29uZmlnLnVybCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLl9zb2NrID0gbmV3IFNvY2tKUyhfdGhpcy5fY29uZmlnLnVybCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5fc29jay5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5fc2VuZE9wZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX3NvY2sub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBtc2cgPSBKU09OLnBhcnNlKGUuZGF0YSk7CiAgICAgICAgICBpZiAobXNnLmZyb20gPT09ICdtbjovc2Vzc2lvbicpIHsKICAgICAgICAgICAgaWYgKF90aGlzLl9zZXNzaW9uQ2FsbGJhY2spIHsKICAgICAgICAgICAgICBfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrKG1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLl9kZWxpdmVyKG1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX3NvY2sub25jbG9zZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgdmFyIHJlYXNvbiA9IHZvaWQgMDsKCiAgICAgICAgICAvL1NlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjQ1NSNzZWN0aW9uLTcuNAogICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDApIHsKICAgICAgICAgICAgcmVhc29uID0gJ05vcm1hbCBjbG9zdXJlLCBtZWFuaW5nIHRoYXQgdGhlIHB1cnBvc2UgZm9yIHdoaWNoIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCBoYXMgYmVlbiBmdWxmaWxsZWQuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMSkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgXCdnb2luZyBhd2F5XCcsIHN1Y2ggYXMgYSBzZXJ2ZXIgZ29pbmcgZG93biBvciBhIGJyb3dzZXIgaGF2aW5nIG5hdmlnYXRlZCBhd2F5IGZyb20gYSBwYWdlLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDIpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGR1ZSB0byBhIHByb3RvY29sIGVycm9yJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMykgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSB0eXBlIG9mIGRhdGEgaXQgY2Fubm90IGFjY2VwdCAoZS5nLiwgYW4gZW5kcG9pbnQgdGhhdCB1bmRlcnN0YW5kcyBvbmx5IHRleHQgZGF0YSBNQVkgc2VuZCB0aGlzIGlmIGl0IHJlY2VpdmVzIGEgYmluYXJ5IG1lc3NhZ2UpLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDQpIHsKICAgICAgICAgICAgcmVhc29uID0gJ1Jlc2VydmVkLiBUaGUgc3BlY2lmaWMgbWVhbmluZyBtaWdodCBiZSBkZWZpbmVkIGluIHRoZSBmdXR1cmUuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNSkgewogICAgICAgICAgICByZWFzb24gPSAnTm8gc3RhdHVzIGNvZGUgd2FzIGFjdHVhbGx5IHByZXNlbnQuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNikgewogICAgICAgICAgICByZWFzb24gPSAnVGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBhYm5vcm1hbGx5LCBlLmcuLCB3aXRob3V0IHNlbmRpbmcgb3IgcmVjZWl2aW5nIGEgQ2xvc2UgY29udHJvbCBmcmFtZSc7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDcpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGRhdGEgd2l0aGluIGEgbWVzc2FnZSB0aGF0IHdhcyBub3QgY29uc2lzdGVudCB3aXRoIHRoZSB0eXBlIG9mIHRoZSBtZXNzYWdlIChlLmcuLCBub24tVVRGLTggW2h0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM2MjldIGRhdGEgd2l0aGluIGEgdGV4dCBtZXNzYWdlKS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA4KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIG1lc3NhZ2UgdGhhdCAidmlvbGF0ZXMgaXRzIHBvbGljeSIuIFRoaXMgcmVhc29uIGlzIGdpdmVuIGVpdGhlciBpZiB0aGVyZSBpcyBubyBvdGhlciBzdXRpYmxlIHJlYXNvbiwgb3IgaWYgdGhlcmUgaXMgYSBuZWVkIHRvIGhpZGUgc3BlY2lmaWMgZGV0YWlscyBhYm91dCB0aGUgcG9saWN5Lic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDkpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0IGlzIHRvbyBiaWcgZm9yIGl0IHRvIHByb2Nlc3MuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxMCkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgKGNsaWVudCkgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgZXhwZWN0ZWQgdGhlIHNlcnZlciB0byBuZWdvdGlhdGUgb25lIG9yIG1vcmUgZXh0ZW5zaW9uLCBidXQgdGhlIHNlcnZlciBkaWRuXCd0IHJldHVybiB0aGVtIGluIHRoZSByZXNwb25zZSBtZXNzYWdlIG9mIHRoZSBXZWJTb2NrZXQgaGFuZHNoYWtlLiA8YnIgLz4gU3BlY2lmaWNhbGx5LCB0aGUgZXh0ZW5zaW9ucyB0aGF0IGFyZSBuZWVkZWQgYXJlOiAnICsgZXZlbnQucmVhc29uOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDExKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBIHNlcnZlciBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGVuY291bnRlcmVkIGFuIHVuZXhwZWN0ZWQgY29uZGl0aW9uIHRoYXQgcHJldmVudGVkIGl0IGZyb20gZnVsZmlsbGluZyB0aGUgcmVxdWVzdC4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDE1KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGR1ZSB0byBhIGZhaWx1cmUgdG8gcGVyZm9ybSBhIFRMUyBoYW5kc2hha2UgKGUuZy4sIHRoZSBzZXJ2ZXIgY2VydGlmaWNhdGUgY2FuXCd0IGJlIHZlcmlmaWVkKS4nOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVhc29uID0gJ1Vua25vd24gcmVhc29uJzsKICAgICAgICAgIH0KCiAgICAgICAgICBkZWxldGUgX3RoaXMuX3NvY2s7CiAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJywgcmVhc29uKTsKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLl93YWl0UmVhZHkoY2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnY29uZmlnJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY29uZmlnOwogICAgfQogIH0sIHsKICAgIGtleTogJ3J1bnRpbWVTZXNzaW9uJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcnVudGltZVNlc3Npb25VUkw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVmVydHhQcm90b1N0dWI7Cn0oKTsKCmZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsKICByZXR1cm4gewogICAgbmFtZTogJ1ZlcnR4UHJvdG9TdHViJywKICAgIGluc3RhbmNlOiBuZXcgVmVydHhQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykKICB9Owp9CgovKioKKiBDYWxsYmFjayB1c2VkIHRvIHNlbmQgbWVzc2FnZXMKKiBAY2FsbGJhY2sgUG9zdE1lc3NhZ2UKKiBAcGFyYW0ge01lc3NhZ2V9IG1zZyAtIE1lc3NhZ2UgdG8gc2VuZAoqLw==",
      "sourceCodeClassname": "VertxProtoStubNode",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-aaf84b28-7f8b-b2e6-93d7-4784864cd37b1",
    "version": 0.2,
    "description": "Description of VertxProtoStubNode",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "VertxProtoStubNode",
    "configuration": {
      "url": "wss://msg-node.localhost:9090/ws"
    },
    "messageSchemas": "",
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": "",
    "dataObjects": []
  },
  "P2PHandlerProtoStub": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CgovLyBTRFAgaGVscGVycy4KdmFyIFNEUFV0aWxzID0ge307CgovLyBHZW5lcmF0ZSBhbiBhbHBoYW51bWVyaWMgaWRlbnRpZmllciBmb3IgY25hbWUgb3IgbWlkcy4KLy8gVE9ETzogdXNlIFVVSURzIGluc3RlYWQ/IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODMKU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7Cn07CgovLyBUaGUgUlRDUCBDTkFNRSB1c2VkIGJ5IGFsbCBwZWVyY29ubmVjdGlvbnMgZnJvbSB0aGUgc2FtZSBKUy4KU0RQVXRpbHMubG9jYWxDTmFtZSA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwoKLy8gU3BsaXRzIFNEUCBpbnRvIGxpbmVzLCBkZWFsaW5nIHdpdGggYm90aCBDUkxGIGFuZCBMRi4KU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKGJsb2IpIHsKICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHJldHVybiBsaW5lLnRyaW0oKTsKICB9KTsKfTsKLy8gU3BsaXRzIFNEUCBpbnRvIHNlc3Npb25wYXJ0IGFuZCBtZWRpYXNlY3Rpb25zLiBFbnN1cmVzIENSTEYuClNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7CiAgdmFyIHBhcnRzID0gYmxvYi5zcGxpdCgnXG5tPScpOwogIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHsKICAgIHJldHVybiAoaW5kZXggPiAwID8gJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXHJcbic7CiAgfSk7Cn07CgovLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgpTRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uKGJsb2IsIHByZWZpeCkgewogIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7CiAgfSk7Cn07CgovLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6Ci8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOAovLyBycG9ydCA1NTk5NiIKU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzOwogIC8vIFBhcnNlIGJvdGggdmFyaWFudHMuCiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgfSBlbHNlIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7CiAgfQoKICB2YXIgY2FuZGlkYXRlID0gewogICAgZm91bmRhdGlvbjogcGFydHNbMF0sCiAgICBjb21wb25lbnQ6IHBhcnRzWzFdLAogICAgcHJvdG9jb2w6IHBhcnRzWzJdLnRvTG93ZXJDYXNlKCksCiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSwKICAgIGlwOiBwYXJ0c1s0XSwKICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzVdLCAxMCksCiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnCiAgICB0eXBlOiBwYXJ0c1s3XQogIH07CgogIGZvciAodmFyIGkgPSA4OyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHN3aXRjaCAocGFydHNbaV0pIHsKICAgICAgY2FzZSAncmFkZHInOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncnBvcnQnOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCA9IHBhcnNlSW50KHBhcnRzW2kgKyAxXSwgMTApOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICd0Y3B0eXBlJzoKICAgICAgICBjYW5kaWRhdGUudGNwVHlwZSA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDogLy8gVW5rbm93biBleHRlbnNpb25zIGFyZSBzaWxlbnRseSBpZ25vcmVkLgogICAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gY2FuZGlkYXRlOwp9OwoKLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS4KU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHsKICB2YXIgc2RwID0gW107CiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5jb21wb25lbnQpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTsKICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5pcCk7CiAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpOwoKICB2YXIgdHlwZSA9IGNhbmRpZGF0ZS50eXBlOwogIHNkcC5wdXNoKCd0eXAnKTsKICBzZHAucHVzaCh0eXBlKTsKICBpZiAodHlwZSAhPT0gJ2hvc3QnICYmIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyAmJgogICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQpIHsKICAgIHNkcC5wdXNoKCdyYWRkcicpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzKTsgLy8gd2FzOiByZWxBZGRyCiAgICBzZHAucHVzaCgncnBvcnQnKTsKICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydAogIH0KICBpZiAoY2FuZGlkYXRlLnRjcFR5cGUgJiYgY2FuZGlkYXRlLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09ICd0Y3AnKSB7CiAgICBzZHAucHVzaCgndGNwdHlwZScpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpOwogIH0KICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTsKfTsKCi8vIFBhcnNlcyBhbiBydHBtYXAgbGluZSwgcmV0dXJucyBSVENSdHBDb2RkZWNQYXJhbWV0ZXJzLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzIKU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTsKICB2YXIgcGFyc2VkID0gewogICAgcGF5bG9hZFR5cGU6IHBhcnNlSW50KHBhcnRzLnNoaWZ0KCksIDEwKSAvLyB3YXM6IGlkCiAgfTsKCiAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpOwoKICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdOwogIHBhcnNlZC5jbG9ja1JhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOyAvLyB3YXM6IGNsb2NrcmF0ZQogIC8vIHdhczogY2hhbm5lbHMKICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTsKICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGUgYW4gYT1ydHBtYXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvcgovLyBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICsKICAgICAgKGNvZGVjLm51bUNoYW5uZWxzICE9PSAxID8gJy8nICsgY29kZWMubnVtQ2hhbm5lbHMgOiAnJykgKyAnXHJcbic7Cn07CgovLyBQYXJzZXMgYW4gYT1leHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldApTRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpOwogIHJldHVybiB7CiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSwKICAgIHVyaTogcGFydHNbMV0KICB9Owp9OwoKLy8gR2VuZXJhdGVzIGE9ZXh0bWFwIGxpbmUgZnJvbSBSVENSdHBIZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzIG9yCi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi4KU0RQVXRpbHMud3JpdGVFeHRtYXAgPSBmdW5jdGlvbihoZWFkZXJFeHRlbnNpb24pIHsKICByZXR1cm4gJ2E9ZXh0bWFwOicgKyAoaGVhZGVyRXh0ZW5zaW9uLmlkIHx8IGhlYWRlckV4dGVuc2lvbi5wcmVmZXJyZWRJZCkgKwogICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcclxuJzsKfTsKCi8vIFBhcnNlcyBhbiBmdG1wIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OgovLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vbgovLyBBbHNvIGRlYWxzIHdpdGggdmJyPW9uOyBjbmc9b24KU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkgewogIHZhciBwYXJzZWQgPSB7fTsKICB2YXIga3Y7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIobGluZS5pbmRleE9mKCcgJykgKyAxKS5zcGxpdCgnOycpOwogIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7CiAgICBwYXJzZWRba3ZbMF0udHJpbSgpXSA9IGt2WzFdOwogIH0KICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy4KU0RQVXRpbHMud3JpdGVGbXRwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZSA9ICcnOwogIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogIH0KICBpZiAoY29kZWMucGFyYW1ldGVycyAmJiBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5sZW5ndGgpIHsKICAgIHZhciBwYXJhbXMgPSBbXTsKICAgIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHsKICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7CiAgICB9KTsKICAgIGxpbmUgKz0gJ2E9Zm10cDonICsgcHQgKyAnICcgKyBwYXJhbXMuam9pbignOycpICsgJ1xyXG4nOwogIH0KICByZXR1cm4gbGluZTsKfTsKCi8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQpTRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgcmV0dXJuIHsKICAgIHR5cGU6IHBhcnRzLnNoaWZ0KCksCiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKQogIH07Cn07Ci8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZXMgPSAnJzsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7CiAgICAvLyBGSVhNRTogc3BlY2lhbCBoYW5kbGluZyBmb3IgdHJyLWludD8KICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7CiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArCiAgICAgIChmYi5wYXJhbWV0ZXIgJiYgZmIucGFyYW1ldGVyLmxlbmd0aCA/ICcgJyArIGZiLnBhcmFtZXRlciA6ICcnKSArCiAgICAgICAgICAnXHJcbic7CiAgICB9KTsKICB9CiAgcmV0dXJuIGxpbmVzOwp9OwoKLy8gUGFyc2VzIGFuIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9c3NyYzozNzM1OTI4NTU5IGNuYW1lOnNvbWV0aGluZwpTRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgc3AgPSBsaW5lLmluZGV4T2YoJyAnKTsKICB2YXIgcGFydHMgPSB7CiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMCkKICB9OwogIHZhciBjb2xvbiA9IGxpbmUuaW5kZXhPZignOicsIHNwKTsKICBpZiAoY29sb24gPiAtMSkgewogICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxLCBjb2xvbiAtIHNwIC0gMSk7CiAgICBwYXJ0cy52YWx1ZSA9IGxpbmUuc3Vic3RyKGNvbG9uICsgMSk7CiAgfSBlbHNlIHsKICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgfQogIHJldHVybiBwYXJ0czsKfTsKCi8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LgovLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHkKLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuClNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBmcExpbmUgPSBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkgewogICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1maW5nZXJwcmludDonKSA9PT0gMDsKICB9KVswXS5zdWJzdHIoMTQpOwogIC8vIE5vdGU6IGE9c2V0dXAgbGluZSBpcyBpZ25vcmVkIHNpbmNlIHdlIHVzZSB0aGUgJ2F1dG8nIHJvbGUuCiAgdmFyIGR0bHNQYXJhbWV0ZXJzID0gewogICAgcm9sZTogJ2F1dG8nLAogICAgZmluZ2VycHJpbnRzOiBbewogICAgICBhbGdvcml0aG06IGZwTGluZS5zcGxpdCgnICcpWzBdLAogICAgICB2YWx1ZTogZnBMaW5lLnNwbGl0KCcgJylbMV0KICAgIH1dCiAgfTsKICByZXR1cm4gZHRsc1BhcmFtZXRlcnM7Cn07CgovLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkgewogIHZhciBzZHAgPSAnYT1zZXR1cDonICsgc2V0dXBUeXBlICsgJ1xyXG4nOwogIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmdW5jdGlvbihmcCkgewogICAgc2RwICs9ICdhPWZpbmdlcnByaW50OicgKyBmcC5hbGdvcml0aG0gKyAnICcgKyBmcC52YWx1ZSArICdcclxuJzsKICB9KTsKICByZXR1cm4gc2RwOwp9OwovLyBQYXJzZXMgSUNFIGluZm9ybWF0aW9uIGZyb20gU0RQIG1lZGlhIHNlY3Rpb24gb3Igc2Vzc2lvbnBhcnQuCi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQovLyAgIGdldCB0aGUgaWNlLXVmcmFnIGFuZCBpY2UtcHdkIGxpbmVzIGFzIGlucHV0LgpTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBpY2VQYXJhbWV0ZXJzID0gewogICAgdXNlcm5hbWVGcmFnbWVudDogbGluZXMuZmlsdGVyKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtdWZyYWc6JykgPT09IDA7CiAgICB9KVswXS5zdWJzdHIoMTIpLAogICAgcGFzc3dvcmQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgIHJldHVybiBsaW5lLmluZGV4T2YoJ2E9aWNlLXB3ZDonKSA9PT0gMDsKICAgIH0pWzBdLnN1YnN0cigxMCkKICB9OwogIHJldHVybiBpY2VQYXJhbWV0ZXJzOwp9OwoKLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykgewogIHJldHVybiAnYT1pY2UtdWZyYWc6JyArIHBhcmFtcy51c2VybmFtZUZyYWdtZW50ICsgJ1xyXG4nICsKICAgICAgJ2E9aWNlLXB3ZDonICsgcGFyYW1zLnBhc3N3b3JkICsgJ1xyXG4nOwp9OwoKLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLgpTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgZGVzY3JpcHRpb24gPSB7CiAgICBjb2RlY3M6IFtdLAogICAgaGVhZGVyRXh0ZW5zaW9uczogW10sCiAgICBmZWNNZWNoYW5pc21zOiBbXSwKICAgIHJ0Y3A6IFtdCiAgfTsKICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTsKICBmb3IgKHZhciBpID0gMzsgaSA8IG1saW5lLmxlbmd0aDsgaSsrKSB7IC8vIGZpbmQgYWxsIGNvZGVjcyBmcm9tIG1saW5lWzMuLl0KICAgIHZhciBwdCA9IG1saW5lW2ldOwogICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICBtZWRpYVNlY3Rpb24sICdhPXJ0cG1hcDonICsgcHQgKyAnICcpWzBdOwogICAgaWYgKHJ0cG1hcGxpbmUpIHsKICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7CiAgICAgIHZhciBmbXRwcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1mbXRwOicgKyBwdCArICcgJyk7CiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuCiAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307CiAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjayA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJykKICAgICAgICAubWFwKFNEUFV0aWxzLnBhcnNlUnRjcEZiKTsKICAgICAgZGVzY3JpcHRpb24uY29kZWNzLnB1c2goY29kZWMpOwogICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy4KICAgICAgc3dpdGNoIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICBjYXNlICdSRUQnOgogICAgICAgIGNhc2UgJ1VMUEZFQyc6CiAgICAgICAgICBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLnB1c2goY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWV4dG1hcDonKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHsKICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7CiAgfSk7CiAgLy8gRklYTUU6IHBhcnNlIHJ0Y3AuCiAgcmV0dXJuIGRlc2NyaXB0aW9uOwp9OwoKLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgLwovLyBwYXJhbWV0ZXJzLgpTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24oa2luZCwgY2FwcykgewogIHZhciBzZHAgPSAnJzsKCiAgLy8gQnVpbGQgdGhlIG1saW5lLgogIHNkcCArPSAnbT0nICsga2luZCArICcgJzsKICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy4KICBzZHAgKz0gJyBVRFAvVExTL1JUUC9TQVZQRiAnOwogIHNkcCArPSBjYXBzLmNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICAgIH0KICAgIHJldHVybiBjb2RlYy5wYXlsb2FkVHlwZTsKICB9KS5qb2luKCcgJykgKyAnXHJcbic7CgogIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxyXG4nOwogIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuJzsKCiAgLy8gQWRkIGE9cnRwbWFwIGxpbmVzIGZvciBlYWNoIGNvZGVjLiBBbHNvIGZtdHAgYW5kIHJ0Y3AtZmIuCiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykgewogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTsKICAgIHNkcCArPSBTRFBVdGlscy53cml0ZUZtdHAoY29kZWMpOwogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRjcEZiKGNvZGVjKTsKICB9KTsKICBzZHAgKz0gJ2E9cnRjcC1tdXhcclxuJzsKCiAgY2Fwcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7CiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTsKICB9KTsKICAvLyBGSVhNRTogd3JpdGUgZmVjTWVjaGFuaXNtcy4KICByZXR1cm4gc2RwOwp9OwoKLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZgovLyBSVENSdHBFbmNvZGluZ1BhcmFtZXRlcnMuClNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7CiAgdmFyIGVuY29kaW5nUGFyYW1ldGVycyA9IFtdOwogIHZhciBkZXNjcmlwdGlvbiA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwogIHZhciBoYXNSZWQgPSBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLmluZGV4T2YoJ1JFRCcpICE9PSAtMTsKICB2YXIgaGFzVWxwZmVjID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdVTFBGRUMnKSAhPT0gLTE7CgogIC8vIGZpbHRlciBhPXNzcmM6Li4uIGNuYW1lOiwgaWdub3JlIFBsYW5CLW1zaWQKICB2YXIgc3NyY3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JykKICAubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTsKICB9KQogIC5maWx0ZXIoZnVuY3Rpb24ocGFydHMpIHsKICAgIHJldHVybiBwYXJ0cy5hdHRyaWJ1dGUgPT09ICdjbmFtZSc7CiAgfSk7CiAgdmFyIHByaW1hcnlTc3JjID0gc3NyY3MubGVuZ3RoID4gMCAmJiBzc3Jjc1swXS5zc3JjOwogIHZhciBzZWNvbmRhcnlTc3JjOwoKICB2YXIgZmxvd3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmMtZ3JvdXA6RklEJykKICAubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJyAnKTsKICAgIHBhcnRzLnNoaWZ0KCk7CiAgICByZXR1cm4gcGFydHMubWFwKGZ1bmN0aW9uKHBhcnQpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KHBhcnQsIDEwKTsKICAgIH0pOwogIH0pOwogIGlmIChmbG93cy5sZW5ndGggPiAwICYmIGZsb3dzWzBdLmxlbmd0aCA+IDEgJiYgZmxvd3NbMF1bMF0gPT09IHByaW1hcnlTc3JjKSB7CiAgICBzZWNvbmRhcnlTc3JjID0gZmxvd3NbMF1bMV07CiAgfQoKICBkZXNjcmlwdGlvbi5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykgewogICAgaWYgKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1JUWCcgJiYgY29kZWMucGFyYW1ldGVycy5hcHQpIHsKICAgICAgdmFyIGVuY1BhcmFtID0gewogICAgICAgIHNzcmM6IHByaW1hcnlTc3JjLAogICAgICAgIGNvZGVjUGF5bG9hZFR5cGU6IHBhcnNlSW50KGNvZGVjLnBhcmFtZXRlcnMuYXB0LCAxMCksCiAgICAgICAgcnR4OiB7CiAgICAgICAgICBwYXlsb2FkVHlwZTogY29kZWMucGF5bG9hZFR5cGUsCiAgICAgICAgICBzc3JjOiBzZWNvbmRhcnlTc3JjCiAgICAgICAgfQogICAgICB9OwogICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7CiAgICAgIGlmIChoYXNSZWQpIHsKICAgICAgICBlbmNQYXJhbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZW5jUGFyYW0pKTsKICAgICAgICBlbmNQYXJhbS5mZWMgPSB7CiAgICAgICAgICBzc3JjOiBzZWNvbmRhcnlTc3JjLAogICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJwogICAgICAgIH07CiAgICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pOwogICAgICB9CiAgICB9CiAgfSk7CiAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHsKICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKHsKICAgICAgc3NyYzogcHJpbWFyeVNzcmMKICAgIH0pOwogIH0KCiAgLy8gd2Ugc3VwcG9ydCBib3RoIGI9QVMgYW5kIGI9VElBUyBidXQgaW50ZXJwcmV0IEFTIGFzIFRJQVMuCiAgdmFyIGJhbmR3aWR0aCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2I9Jyk7CiAgaWYgKGJhbmR3aWR0aC5sZW5ndGgpIHsKICAgIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1USUFTOicpID09PSAwKSB7CiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHIoNyksIDEwKTsKICAgIH0gZWxzZSBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9QVM6JykgPT09IDApIHsKICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig1KSwgMTApOwogICAgfQogICAgZW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgIHBhcmFtcy5tYXhCaXRyYXRlID0gYmFuZHdpZHRoOwogICAgfSk7CiAgfQogIHJldHVybiBlbmNvZGluZ1BhcmFtZXRlcnM7Cn07CgpTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSA9IGZ1bmN0aW9uKCkgewogIC8vIEZJWE1FOiBzZXNzLWlkIHNob3VsZCBiZSBhbiBOVFAgdGltZXN0YW1wLgogIHJldHVybiAndj0wXHJcbicgKwogICAgICAnbz10aGlzaXNhZGFwdGVyb3J0YyA4MTY5NjM5OTE1NjQ2OTQzMTM3IDIgSU4gSVA0IDEyNy4wLjAuMVxyXG4nICsKICAgICAgJ3M9LVxyXG4nICsKICAgICAgJ3Q9MCAwXHJcbic7Cn07CgpTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbiA9IGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBjYXBzLCB0eXBlLCBzdHJlYW0pIHsKICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbih0cmFuc2NlaXZlci5raW5kLCBjYXBzKTsKCiAgLy8gTWFwIElDRSBwYXJhbWV0ZXJzICh1ZnJhZywgcHdkKSB0byBTRFAuCiAgc2RwICs9IFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycygKICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpOwoKICAvLyBNYXAgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC4KICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycygKICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSwKICAgICAgdHlwZSA9PT0gJ29mZmVyJyA/ICdhY3RwYXNzJyA6ICdhY3RpdmUnKTsKCiAgc2RwICs9ICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xyXG4nOwoKICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICBzZHAgKz0gJ2E9c2VuZHJlY3ZcclxuJzsKICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgc2RwICs9ICdhPXNlbmRvbmx5XHJcbic7CiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikgewogICAgc2RwICs9ICdhPXJlY3Zvbmx5XHJcbic7CiAgfSBlbHNlIHsKICAgIHNkcCArPSAnYT1pbmFjdGl2ZVxyXG4nOwogIH0KCiAgLy8gRklYTUU6IGZvciBSVFggdGhlcmUgbWlnaHQgYmUgbXVsdGlwbGUgU1NSQ3MuIE5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlIHlldC4KICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICB2YXIgbXNpZCA9ICdtc2lkOicgKyBzdHJlYW0uaWQgKyAnICcgKwogICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZCArICdcclxuJzsKICAgIHNkcCArPSAnYT0nICsgbXNpZDsKICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKwogICAgICAgICcgJyArIG1zaWQ7CiAgfQogIC8vIEZJWE1FOiB0aGlzIHNob3VsZCBiZSB3cml0dGVuIGJ5IHdyaXRlUnRwRGVzY3JpcHRpb24uCiAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArCiAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXHJcbic7CiAgcmV0dXJuIHNkcDsKfTsKCi8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LgpTRFBVdGlscy5nZXREaXJlY3Rpb24gPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuCiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKICAgIHN3aXRjaCAobGluZXNbaV0pIHsKICAgICAgY2FzZSAnYT1zZW5kcmVjdic6CiAgICAgIGNhc2UgJ2E9c2VuZG9ubHknOgogICAgICBjYXNlICdhPXJlY3Zvbmx5JzoKICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6CiAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cigyKTsKICAgICAgZGVmYXVsdDoKICAgICAgICAvLyBGSVhNRTogV2hhdCBzaG91bGQgaGFwcGVuIGhlcmU/CiAgICB9CiAgfQogIGlmIChzZXNzaW9ucGFydCkgewogICAgcmV0dXJuIFNEUFV0aWxzLmdldERpcmVjdGlvbihzZXNzaW9ucGFydCk7CiAgfQogIHJldHVybiAnc2VuZHJlY3YnOwp9OwoKLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgptb2R1bGUuZXhwb3J0cyA9IFNEUFV0aWxzOwoKfSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIHZlcnNpb246IDAuNS4xDQovLyBkYXRlOiBXZWQgRmViIDAxIDIwMTcgMTA6MTE6NDkgR01UKzAwMDAgKFdFVCkNCi8vIGxpY2VuY2U6IA0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQoNCg0KKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsNCglpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpDQoJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOw0KCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQ0KCQlkZWZpbmUoIlN5bmNoZXIiLCBbXSwgZmFjdG9yeSk7DQoJZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpDQoJCWV4cG9ydHNbIlN5bmNoZXIiXSA9IGZhY3RvcnkoKTsNCgllbHNlDQoJCXJvb3RbIiJdID0gcm9vdFsiIl0gfHwge30sIHJvb3RbIiJdWyJTeW5jaGVyIl0gPSBmYWN0b3J5KCk7DQp9KSh0aGlzLCBmdW5jdGlvbigpIHsNCnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwDQovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQ0KLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307DQovKioqKioqLw0KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uDQovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgew0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlDQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQ0KLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQ0KLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7DQovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwNCi8qKioqKiovIAkJCWw6IGZhbHNlLA0KLyoqKioqKi8gCQkJZXhwb3J0czoge30NCi8qKioqKiovIAkJfTsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbg0KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQNCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOw0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUNCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOw0KLyoqKioqKi8gCX0NCi8qKioqKiovDQovKioqKioqLw0KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsNCi8qKioqKiovDQovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOw0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0DQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHsNCi8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgew0KLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsNCi8qKioqKiovIAkJCQljb25maWd1cmFibGU6IGZhbHNlLA0KLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsDQovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXINCi8qKioqKiovIAkJCX0pOw0KLyoqKioqKi8gCQl9DQovKioqKioqLyAJfTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsNCi8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/DQovKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOg0KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsNCi8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOw0KLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOw0KLyoqKioqKi8gCX07DQovKioqKioqLw0KLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbA0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18NCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsNCi8qKioqKiovDQovKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzDQovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTYyKTsNCi8qKioqKiovIH0pDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KLyoqKioqKi8gKFsNCi8qIDAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KdmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTsNCmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZg0KDQovKioqLyB9KSwNCi8qIDEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgNCnZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aA0KICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZiA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7DQppZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZg0KDQovKioqLyB9KSwNCi8qIDIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIHN0b3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgnd2tzJykNCiAgLCB1aWQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykNCiAgLCBTeW1ib2wgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5TeW1ib2wNCiAgLCBVU0VfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PSAnZnVuY3Rpb24nOw0KDQp2YXIgJGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpew0KICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID0NCiAgICBVU0VfU1lNQk9MICYmIFN5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IFN5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpOw0KfTsNCg0KJGV4cG9ydHMuc3RvcmUgPSBzdG9yZTsNCg0KLyoqKi8gfSksDQovKiAzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkNCm1vZHVsZS5leHBvcnRzID0gIV9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7DQogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7DQp9KTsNCg0KLyoqKi8gfSksDQovKiA0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCBJRThfRE9NX0RFRklORSA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpDQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKQ0KICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5Ow0KDQpleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7DQogIGFuT2JqZWN0KE8pOw0KICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7DQogIGFuT2JqZWN0KEF0dHJpYnV0ZXMpOw0KICBpZihJRThfRE9NX0RFRklORSl0cnkgew0KICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsNCiAgaWYoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKU9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlOw0KICByZXR1cm4gTzsNCn07DQoNCi8qKiovIH0pLA0KLyogNSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpOw0KICByZXR1cm4gaXQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGRQICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpDQogICwgY3JlYXRlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsNCiAgcmV0dXJuIGRQLmYob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsNCn0gOiBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpew0KICBvYmplY3Rba2V5XSA9IHZhbHVlOw0KICByZXR1cm4gb2JqZWN0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nOw0KfTsNCg0KLyoqKi8gfSksDQovKiA4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgY29yZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQ0KICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgaGlkZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KQ0KICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnOw0KDQp2YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7DQogIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GDQogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HDQogICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TDQogICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QDQogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CDQogICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XDQogICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KQ0KICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdDQogICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdDQogICAgLCBrZXksIG93biwgb3V0Ow0KICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsNCiAgZm9yKGtleSBpbiBzb3VyY2Upew0KICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZQ0KICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7DQogICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlOw0KICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkDQogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsNCiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMNCiAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XQ0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0DQogICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbCkNCiAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeQ0KICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7DQogICAgICB2YXIgRiA9IGZ1bmN0aW9uKGEsIGIsIGMpew0KICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgQyl7DQogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpew0KICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEM7DQogICAgICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgQyhhKTsNCiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOw0KICAgICAgICAgIH0gcmV0dXJuIG5ldyBDKGEsIGIsIGMpOw0KICAgICAgICB9IHJldHVybiBDLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICB9Ow0KICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdOw0KICAgICAgcmV0dXJuIEY7DQogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzDQogICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0Ow0KICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5tZXRob2RzLiVOQU1FJQ0KICAgIGlmKElTX1BST1RPKXsNCiAgICAgIChleHBvcnRzLnZpcnR1YWwgfHwgKGV4cG9ydHMudmlydHVhbCA9IHt9KSlba2V5XSA9IG91dDsNCiAgICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5wcm90b3R5cGUuJU5BTUUlDQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsNCiAgICB9DQogIH0NCn07DQovLyB0eXBlIGJpdG1hcA0KJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWQNCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsDQokZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpYw0KJGV4cG9ydC5QID0gODsgICAvLyBwcm90bw0KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kDQokZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXANCiRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZQ0KJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIA0KbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0Ow0KDQovKioqLyB9KSwNCi8qIDkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsNCiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsNCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsNCiAgfQ0KfTsNCg0KLyoqKi8gfSksDQovKiAxMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF9kZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOw0KDQp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkgew0KICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7DQogICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOw0KICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOw0KICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOw0KICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7DQogICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsNCiAgICB9DQogIH0NCg0KICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgew0KICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7DQogICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7DQogICAgcmV0dXJuIENvbnN0cnVjdG9yOw0KICB9Ow0KfSgpOw0KDQovKioqLyB9KSwNCi8qIDExICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYyl7DQogIHRyeSB7DQogICAgcmV0dXJuICEhZXhlYygpOw0KICB9IGNhdGNoKGUpew0KICAgIHJldHVybiB0cnVlOw0KICB9DQp9Ow0KDQovKioqLyB9KSwNCi8qIDEyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCnZhciBoYXNPd25Qcm9wZXJ0eSA9IHt9Lmhhc093blByb3BlcnR5Ow0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwga2V5KXsNCiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDEzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5ncw0KdmFyIElPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KQ0KICAsIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZw0KdmFyIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXsNCiAgYUZ1bmN0aW9uKGZuKTsNCiAgaWYodGhhdCA9PT0gdW5kZWZpbmVkKXJldHVybiBmbjsNCiAgc3dpdGNoKGxlbmd0aCl7DQogICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7DQogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTsNCiAgICB9Ow0KICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpew0KICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7DQogICAgfTsNCiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXsNCiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpOw0KICAgIH07DQogIH0NCiAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pew0KICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpOw0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiAxNSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHt9Ow0KDQovKioqLyB9KSwNCi8qIDE2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYml0bWFwLCB2YWx1ZSl7DQogIHJldHVybiB7DQogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLA0KICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSwNCiAgICB3cml0YWJsZSAgICA6ICEoYml0bWFwICYgNCksDQogICAgdmFsdWUgICAgICAgOiB2YWx1ZQ0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiAxNyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTykNCnZhciAka2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpDQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pew0KICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAxOCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQp2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZzsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykNCiAgLCBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQNCiAgLy8gaW4gb2xkIElFIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnDQogICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTsNCn07DQoNCi8qKiovIH0pLA0KLyogMjAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7DQogIHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogMjEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGRlZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZg0KICAsIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgdGFnLCBzdGF0KXsNCiAgaWYoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSlkZWYoaXQsIFRBRywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRhZ30pOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7DQovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQ0KLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpew0KICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDsNCiAgdmFyIGZuLCB2YWw7DQogIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsNCiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOw0KICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOw0KICB0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyMyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQp2YXIgaWQgPSAwDQogICwgcHggPSBNYXRoLnJhbmRvbSgpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpew0KICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyNCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQ0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiICsgaXQpOw0KICByZXR1cm4gaXQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDI1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gdHJ1ZTsNCg0KLyoqKi8gfSksDQovKiAyNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgc2hhcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkoJ2tleXMnKQ0KICAsIHVpZCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpew0KICByZXR1cm4gc2hhcmVkW2tleV0gfHwgKHNoYXJlZFtrZXldID0gdWlkKGtleSkpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyNyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyA3LjEuNCBUb0ludGVnZXINCnZhciBjZWlsICA9IE1hdGguY2VpbA0KICAsIGZsb29yID0gTWF0aC5mbG9vcjsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMjggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5cw0KbW9kdWxlLmV4cG9ydHMgPSAoDQogICdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YnDQopLnNwbGl0KCcsJyk7DQoNCi8qKiovIH0pLA0KLyogMjkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygzKSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsNCiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSgnZGl2JyksICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7DQp9KTsNCg0KLyoqKi8gfSksDQovKiAzMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nDQogICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpew0KICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMzEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg3OSksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiAzMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpDQp2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAzMyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF9zZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOw0KDQp2YXIgX3NldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldFByb3RvdHlwZU9mKTsNCg0KdmFyIF9jcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsNCg0KdmFyIF9jcmVhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlKTsNCg0KdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7DQoNCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsNCiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsNCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoc3VwZXJDbGFzcykpKTsNCiAgfQ0KDQogIHN1YkNsYXNzLnByb3RvdHlwZSA9ICgwLCBfY3JlYXRlMi5kZWZhdWx0KShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7DQogICAgY29uc3RydWN0b3I6IHsNCiAgICAgIHZhbHVlOiBzdWJDbGFzcywNCiAgICAgIGVudW1lcmFibGU6IGZhbHNlLA0KICAgICAgd3JpdGFibGU6IHRydWUsDQogICAgICBjb25maWd1cmFibGU6IHRydWUNCiAgICB9DQogIH0pOw0KICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mMi5kZWZhdWx0ID8gKDAsIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsNCn07DQoNCi8qKiovIH0pLA0KLyogMzQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7DQoNCnZhciBfdHlwZW9mMiA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpOw0KDQp2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHsNCiAgaWYgKCFzZWxmKSB7DQogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsNCiAgfQ0KDQogIHJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoY2FsbCkpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsNCn07DQoNCi8qKiovIH0pLA0KLyogMzUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pDQp2YXIgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpDQogICwgZFBzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KQ0KICAsIGVudW1CdWdLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkNCiAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpDQogICwgRW1wdHkgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9DQogICwgUFJPVE9UWVBFICAgPSAncHJvdG90eXBlJzsNCg0KLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZQ0KdmFyIGNyZWF0ZURpY3QgPSBmdW5jdGlvbigpew0KICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Zw0KICB2YXIgaWZyYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkoJ2lmcmFtZScpDQogICAgLCBpICAgICAgPSBlbnVtQnVnS2V5cy5sZW5ndGgNCiAgICAsIGx0ICAgICA9ICc8Jw0KICAgICwgZ3QgICAgID0gJz4nDQogICAgLCBpZnJhbWVEb2N1bWVudDsNCiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogIF9fd2VicGFja19yZXF1aXJlX18oNDIpLmFwcGVuZENoaWxkKGlmcmFtZSk7DQogIGlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDonOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmwNCiAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsNCiAgLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOw0KICBpZnJhbWVEb2N1bWVudCA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50Ow0KICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7DQogIGlmcmFtZURvY3VtZW50LndyaXRlKGx0ICsgJ3NjcmlwdCcgKyBndCArICdkb2N1bWVudC5GPU9iamVjdCcgKyBsdCArICcvc2NyaXB0JyArIGd0KTsNCiAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTsNCiAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7DQogIHdoaWxlKGktLSlkZWxldGUgY3JlYXRlRGljdFtQUk9UT1RZUEVdW2VudW1CdWdLZXlzW2ldXTsNCiAgcmV0dXJuIGNyZWF0ZURpY3QoKTsNCn07DQoNCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcyl7DQogIHZhciByZXN1bHQ7DQogIGlmKE8gIT09IG51bGwpew0KICAgIEVtcHR5W1BST1RPVFlQRV0gPSBhbk9iamVjdChPKTsNCiAgICByZXN1bHQgPSBuZXcgRW1wdHk7DQogICAgRW1wdHlbUFJPVE9UWVBFXSA9IG51bGw7DQogICAgLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwNCiAgICByZXN1bHRbSUVfUFJPVE9dID0gTzsNCiAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTsNCiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpOw0KfTsNCg0KDQovKioqLyB9KSwNCi8qIDM2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMzcpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogMzcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7DQp2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0Ow0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXsNCiAgcmV0dXJuICRPYmplY3QuZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDM4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkNCiAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOCkNCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpDQogICwgaGlkZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpDQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIEl0ZXJhdG9ycyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCAkaXRlckNyZWF0ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpDQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQ0KICAsIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MykNCiAgLCBJVEVSQVRPUiAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykNCiAgLCBCVUdHWSAgICAgICAgICA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKSAvLyBTYWZhcmkgaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgDQogICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcicNCiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJw0KICAsIFZBTFVFUyAgICAgICAgID0gJ3ZhbHVlcyc7DQoNCnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXsNCiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpOw0KICB2YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24oa2luZCl7DQogICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdOw0KICAgIHN3aXRjaChraW5kKXsNCiAgICAgIGNhc2UgS0VZUzogcmV0dXJuIGZ1bmN0aW9uIGtleXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTsNCiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07DQogICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9Ow0KICB9Ow0KICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJw0KICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTDQogICAgLCBWQUxVRVNfQlVHID0gZmFsc2UNCiAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZQ0KICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXQ0KICAgICwgJGRlZmF1bHQgICA9ICRuYXRpdmUgfHwgZ2V0TWV0aG9kKERFRkFVTFQpDQogICAgLCAkZW50cmllcyAgID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZA0KICAgICwgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmUNCiAgICAsIG1ldGhvZHMsIGtleSwgSXRlcmF0b3JQcm90b3R5cGU7DQogIC8vIEZpeCBuYXRpdmUNCiAgaWYoJGFueU5hdGl2ZSl7DQogICAgSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UpKTsNCiAgICBpZihJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSl7DQogICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzDQogICAgICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvclByb3RvdHlwZSwgVEFHLCB0cnVlKTsNCiAgICAgIC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lcw0KICAgICAgaWYoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTsNCiAgICB9DQogIH0NCiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRg0KICBpZihERUZfVkFMVUVTICYmICRuYXRpdmUgJiYgJG5hdGl2ZS5uYW1lICE9PSBWQUxVRVMpew0KICAgIFZBTFVFU19CVUcgPSB0cnVlOw0KICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07DQogIH0NCiAgLy8gRGVmaW5lIGl0ZXJhdG9yDQogIGlmKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKXsNCiAgICBoaWRlKHByb3RvLCBJVEVSQVRPUiwgJGRlZmF1bHQpOw0KICB9DQogIC8vIFBsdWcgZm9yIGxpYnJhcnkNCiAgSXRlcmF0b3JzW05BTUVdID0gJGRlZmF1bHQ7DQogIEl0ZXJhdG9yc1tUQUddICA9IHJldHVyblRoaXM7DQogIGlmKERFRkFVTFQpew0KICAgIG1ldGhvZHMgPSB7DQogICAgICB2YWx1ZXM6ICBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSwNCiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSwNCiAgICAgIGVudHJpZXM6ICRlbnRyaWVzDQogICAgfTsNCiAgICBpZihGT1JDRUQpZm9yKGtleSBpbiBtZXRob2RzKXsNCiAgICAgIGlmKCEoa2V5IGluIHByb3RvKSlyZWRlZmluZShwcm90bywga2V5LCBtZXRob2RzW2tleV0pOw0KICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7DQogIH0NCiAgcmV0dXJuIG1ldGhvZHM7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDM5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsNCi8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpDQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLCAnT2JqZWN0Jywge2RlZmluZVByb3BlcnR5OiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmZ9KTsNCg0KLyoqKi8gfSksDQovKiA0MCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDQxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCmV4cG9ydHMuZiA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlOw0KDQovKioqLyB9KSwNCi8qIDQyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7DQoNCi8qKiovIH0pLA0KLyogNDMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykNCnZhciBoYXMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgdG9PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQ0KICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikoJ0lFX1BST1RPJykNCiAgLCBPYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7DQoNCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pew0KICBPID0gdG9PYmplY3QoTyk7DQogIGlmKGhhcyhPLCBJRV9QUk9UTykpcmV0dXJuIE9bSUVfUFJPVE9dOw0KICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXsNCiAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7DQogIH0gcmV0dXJuIE8gaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90byA6IG51bGw7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBoYXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIHRvSU9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpDQogICwgYXJyYXlJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSkoZmFsc2UpDQogICwgSUVfUFJPVE8gICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikoJ0lFX1BST1RPJyk7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBuYW1lcyl7DQogIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQ0KICAgICwgaSAgICAgID0gMA0KICAgICwgcmVzdWx0ID0gW10NCiAgICAsIGtleTsNCiAgZm9yKGtleSBpbiBPKWlmKGtleSAhPSBJRV9QUk9UTyloYXMoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpOw0KICAvLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzDQogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpaWYoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKXsNCiAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpOw0KICB9DQogIHJldHVybiByZXN1bHQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlcw0KdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpDQogICwgY29yZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkNCiAgLCBmYWlscyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSwgZXhlYyl7DQogIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV0NCiAgICAsIGV4cCA9IHt9Ow0KICBleHBbS0VZXSA9IGV4ZWMoZm4pOw0KICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsNCg0KLyoqKi8gfSksDQovKiA0NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjEuMTUgVG9MZW5ndGgNCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQ0KICAsIG1pbiAgICAgICA9IE1hdGgubWluOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxDQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkNCiAgLCBjb3JlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkNCiAgLCBMSUJSQVJZICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpDQogICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KQ0KICAsIGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXsNCiAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTsNCiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7DQoNCi8qKiovIH0pLA0KLyogNTAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgJGF0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpKHRydWUpOw0KDQovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7DQogIHRoaXMuX3QgPSBTdHJpbmcoaXRlcmF0ZWQpOyAvLyB0YXJnZXQNCiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgNCi8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkNCn0sIGZ1bmN0aW9uKCl7DQogIHZhciBPICAgICA9IHRoaXMuX3QNCiAgICAsIGluZGV4ID0gdGhpcy5faQ0KICAgICwgcG9pbnQ7DQogIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07DQogIHBvaW50ID0gJGF0KE8sIGluZGV4KTsNCiAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7DQogIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07DQp9KTsNCg0KLyoqKi8gfSksDQovKiA1MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTsNCnZhciBnbG9iYWwgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGhpZGUgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpDQogICwgSXRlcmF0b3JzICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpDQogICwgVE9fU1RSSU5HX1RBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7DQoNCmZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspew0KICB2YXIgTkFNRSAgICAgICA9IGNvbGxlY3Rpb25zW2ldDQogICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdDQogICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTsNCiAgaWYocHJvdG8gJiYgIXByb3RvW1RPX1NUUklOR19UQUddKWhpZGUocHJvdG8sIFRPX1NUUklOR19UQUcsIE5BTUUpOw0KICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7DQp9DQoNCi8qKiovIH0pLA0KLyogNTIgKi8sDQovKiA1MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgY29yZSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApDQogICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMNCiAgcmV0dXJuICRKU09OLnN0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJndW1lbnRzKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNTQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KDQoNCi8qKiovIH0pLA0KLyogNTUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkNCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQ0KICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJykNCiAgLy8gRVMzIHdyb25nIGhlcmUNCiAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJzsNCg0KLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3INCnZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXsNCiAgdHJ5IHsNCiAgICByZXR1cm4gaXRba2V5XTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KfTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHZhciBPLCBULCBCOw0KICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCcNCiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2UNCiAgICA6IHR5cGVvZiAoVCA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVEFHKSkgPT0gJ3N0cmluZycgPyBUDQogICAgLy8gYnVpbHRpblRhZyBjYXNlDQogICAgOiBBUkcgPyBjb2YoTykNCiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrDQogICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDU2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzDQp2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7DQptb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpew0KICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDU3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBwSUUgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpDQogICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQ0KICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpDQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkNCiAgLCBnT1BEICAgICAgICAgICA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7DQoNCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBnT1BEIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApew0KICBPID0gdG9JT2JqZWN0KE8pOw0KICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7DQogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7DQogICAgcmV0dXJuIGdPUEQoTywgUCk7DQogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0NCiAgaWYoaGFzKE8sIFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sIFApLCBPW1BdKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNTggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsNCg0KLyoqKi8gfSksDQovKiA1OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF9pdGVyYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOw0KDQp2YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTsNCg0KdmFyIF9zeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTsNCg0KdmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTsNCg0KdmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgX2l0ZXJhdG9yMi5kZWZhdWx0ID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCmV4cG9ydHMuZGVmYXVsdCA9IHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YoX2l0ZXJhdG9yMi5kZWZhdWx0KSA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7DQogIHJldHVybiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOw0KfSA6IGZ1bmN0aW9uIChvYmopIHsNCiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyLmRlZmF1bHQgJiYgb2JqICE9PSBfc3ltYm9sMi5kZWZhdWx0LnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9Ow0KDQovKioqLyB9KSwNCi8qIDYxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2YNCi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzDQp2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCB0b0xlbmd0aCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KQ0KICAsIHRvSW5kZXggICA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7DQogIHJldHVybiBmdW5jdGlvbigkdGhpcywgZWwsIGZyb21JbmRleCl7DQogICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCgkdGhpcykNCiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpDQogICAgICAsIGluZGV4ICA9IHRvSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpDQogICAgICAsIHZhbHVlOw0KICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0NCiAgICBpZihJU19JTkNMVURFUyAmJiBlbCAhPSBlbCl3aGlsZShsZW5ndGggPiBpbmRleCl7DQogICAgICB2YWx1ZSA9IE9baW5kZXgrK107DQogICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTsNCiAgICAvLyBBcnJheSN0b0luZGV4IGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90DQogICAgfSBlbHNlIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTyl7DQogICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7DQogICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xOw0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA2MiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCnZhciBjcmVhdGUgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpDQogICwgZGVzY3JpcHRvciAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQ0KICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkNCiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9Ow0KDQovLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKQ0KX193ZWJwYWNrX3JlcXVpcmVfXyg2KShJdGVyYXRvclByb3RvdHlwZSwgX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KXsNCiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pOw0KICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkb25lLCB2YWx1ZSl7DQogIHJldHVybiB7dmFsdWU6IHZhbHVlLCBkb25lOiAhIWRvbmV9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA2NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZFAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpDQogICwgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpDQogICwgZ2V0S2V5cyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpew0KICBhbk9iamVjdChPKTsNCiAgdmFyIGtleXMgICA9IGdldEtleXMoUHJvcGVydGllcykNCiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoDQogICAgLCBpID0gMA0KICAgICwgUDsNCiAgd2hpbGUobGVuZ3RoID4gaSlkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pOw0KICByZXR1cm4gTzsNCn07DQoNCi8qKiovIH0pLA0KLyogNjUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQ0KdmFyICRrZXlzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KQ0KICAsIGhpZGRlbktleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTsNCg0KZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhPKXsNCiAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA2NiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykNCiAgLCBkZWZpbmVkICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsNCi8vIHRydWUgIC0+IFN0cmluZyNhdA0KLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRPX1NUUklORyl7DQogIHJldHVybiBmdW5jdGlvbih0aGF0LCBwb3Mpew0KICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpDQogICAgICAsIGkgPSB0b0ludGVnZXIocG9zKQ0KICAgICAgLCBsID0gcy5sZW5ndGgNCiAgICAgICwgYSwgYjsNCiAgICBpZihpIDwgMCB8fCBpID49IGwpcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkOw0KICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7DQogICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmYNCiAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhDQogICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDsNCiAgfTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGN0eCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgaW52b2tlICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCkNCiAgLCBodG1sICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKQ0KICAsIGNlbCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpDQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzDQogICwgc2V0VGFzayAgICAgICAgICAgID0gZ2xvYmFsLnNldEltbWVkaWF0ZQ0KICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZQ0KICAsIE1lc3NhZ2VDaGFubmVsICAgICA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbA0KICAsIGNvdW50ZXIgICAgICAgICAgICA9IDANCiAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fQ0KICAsIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnDQogICwgZGVmZXIsIGNoYW5uZWwsIHBvcnQ7DQp2YXIgcnVuID0gZnVuY3Rpb24oKXsNCiAgdmFyIGlkID0gK3RoaXM7DQogIGlmKHF1ZXVlLmhhc093blByb3BlcnR5KGlkKSl7DQogICAgdmFyIGZuID0gcXVldWVbaWRdOw0KICAgIGRlbGV0ZSBxdWV1ZVtpZF07DQogICAgZm4oKTsNCiAgfQ0KfTsNCnZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KXsNCiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7DQp9Ow0KLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOg0KaWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7DQogIHNldFRhc2sgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pew0KICAgIHZhciBhcmdzID0gW10sIGkgPSAxOw0KICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7DQogICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uKCl7DQogICAgICBpbnZva2UodHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKSwgYXJncyk7DQogICAgfTsNCiAgICBkZWZlcihjb3VudGVyKTsNCiAgICByZXR1cm4gY291bnRlcjsNCiAgfTsNCiAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpew0KICAgIGRlbGV0ZSBxdWV1ZVtpZF07DQogIH07DQogIC8vIE5vZGUuanMgMC44LQ0KICBpZihfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KShwcm9jZXNzKSA9PSAncHJvY2Vzcycpew0KICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpew0KICAgICAgcHJvY2Vzcy5uZXh0VGljayhjdHgocnVuLCBpZCwgMSkpOw0KICAgIH07DQogIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnMNCiAgfSBlbHNlIGlmKE1lc3NhZ2VDaGFubmVsKXsNCiAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsOw0KICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyOw0KICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdGVuZXI7DQogICAgZGVmZXIgPSBjdHgocG9ydC5wb3N0TWVzc2FnZSwgcG9ydCwgMSk7DQogIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2Vycw0KICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0Jw0KICB9IGVsc2UgaWYoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgJiYgdHlwZW9mIHBvc3RNZXNzYWdlID09ICdmdW5jdGlvbicgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKXsNCiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsNCiAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShpZCArICcnLCAnKicpOw0KICAgIH07DQogICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpOw0KICAvLyBJRTgtDQogIH0gZWxzZSBpZihPTlJFQURZU1RBVEVDSEFOR0UgaW4gY2VsKCdzY3JpcHQnKSl7DQogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7DQogICAgICBodG1sLmFwcGVuZENoaWxkKGNlbCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbigpew0KICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHRoaXMpOw0KICAgICAgICBydW4uY2FsbChpZCk7DQogICAgICB9Ow0KICAgIH07DQogIC8vIFJlc3Qgb2xkIGJyb3dzZXJzDQogIH0gZWxzZSB7DQogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7DQogICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7DQogICAgfTsNCiAgfQ0KfQ0KbW9kdWxlLmV4cG9ydHMgPSB7DQogIHNldDogICBzZXRUYXNrLA0KICBjbGVhcjogY2xlYXJUYXNrDQp9Ow0KDQovKioqLyB9KSwNCi8qIDY4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQ0KICAsIG1heCAgICAgICA9IE1hdGgubWF4DQogICwgbWluICAgICAgID0gTWF0aC5taW47DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluZGV4LCBsZW5ndGgpew0KICBpbmRleCA9IHRvSW50ZWdlcihpbmRleCk7DQogIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA2OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCnZhciBhZGRUb1Vuc2NvcGFibGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkNCiAgLCBzdGVwICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MykNCiAgLCBJdGVyYXRvcnMgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCB0b0lPYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7DQoNCi8vIDIyLjEuMy40IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzKCkNCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpDQovLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpDQovLyAyMi4xLjMuMzAgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCkoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXsNCiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldA0KICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleA0KICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZA0KLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpDQp9LCBmdW5jdGlvbigpew0KICB2YXIgTyAgICAgPSB0aGlzLl90DQogICAgLCBraW5kICA9IHRoaXMuX2sNCiAgICAsIGluZGV4ID0gdGhpcy5faSsrOw0KICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7DQogICAgdGhpcy5fdCA9IHVuZGVmaW5lZDsNCiAgICByZXR1cm4gc3RlcCgxKTsNCiAgfQ0KICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTsNCiAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7DQogIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTsNCn0sICd2YWx1ZXMnKTsNCg0KLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQ0KSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTsNCg0KYWRkVG9VbnNjb3BhYmxlcygna2V5cycpOw0KYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7DQphZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7DQoNCi8qKiovIH0pLA0KLyogNzAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MCksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiA3MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDcyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBNRVRBICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpKCdtZXRhJykNCiAgLCBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykNCiAgLCBoYXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgc2V0RGVzYyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmYNCiAgLCBpZCAgICAgICA9IDA7DQp2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpew0KICByZXR1cm4gdHJ1ZTsNCn07DQp2YXIgRlJFRVpFID0gIV9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7DQogIHJldHVybiBpc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSk7DQp9KTsNCnZhciBzZXRNZXRhID0gZnVuY3Rpb24oaXQpew0KICBzZXREZXNjKGl0LCBNRVRBLCB7dmFsdWU6IHsNCiAgICBpOiAnTycgKyArK2lkLCAvLyBvYmplY3QgSUQNCiAgICB3OiB7fSAgICAgICAgICAvLyB3ZWFrIGNvbGxlY3Rpb25zIElEcw0KICB9fSk7DQp9Ow0KdmFyIGZhc3RLZXkgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsNCiAgLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeA0KICBpZighaXNPYmplY3QoaXQpKXJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7DQogIGlmKCFoYXMoaXQsIE1FVEEpKXsNCiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdA0KICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiAnRic7DQogICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGENCiAgICBpZighY3JlYXRlKXJldHVybiAnRSc7DQogICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGENCiAgICBzZXRNZXRhKGl0KTsNCiAgLy8gcmV0dXJuIG9iamVjdCBJRA0KICB9IHJldHVybiBpdFtNRVRBXS5pOw0KfTsNCnZhciBnZXRXZWFrID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7DQogIGlmKCFoYXMoaXQsIE1FVEEpKXsNCiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdA0KICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiB0cnVlOw0KICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhDQogICAgaWYoIWNyZWF0ZSlyZXR1cm4gZmFsc2U7DQogICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGENCiAgICBzZXRNZXRhKGl0KTsNCiAgLy8gcmV0dXJuIGhhc2ggd2VhayBjb2xsZWN0aW9ucyBJRHMNCiAgfSByZXR1cm4gaXRbTUVUQV0udzsNCn07DQovLyBhZGQgbWV0YWRhdGEgb24gZnJlZXplLWZhbWlseSBtZXRob2RzIGNhbGxpbmcNCnZhciBvbkZyZWV6ZSA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKXNldE1ldGEoaXQpOw0KICByZXR1cm4gaXQ7DQp9Ow0KdmFyIG1ldGEgPSBtb2R1bGUuZXhwb3J0cyA9IHsNCiAgS0VZOiAgICAgIE1FVEEsDQogIE5FRUQ6ICAgICBmYWxzZSwNCiAgZmFzdEtleTogIGZhc3RLZXksDQogIGdldFdlYWs6ICBnZXRXZWFrLA0KICBvbkZyZWV6ZTogb25GcmVlemUNCn07DQoNCi8qKiovIH0pLA0KLyogNzMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGNsYXNzb2YgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpDQogICwgSVRFUkFUT1IgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQ0KICAsIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpew0KICBpZihpdCAhPSB1bmRlZmluZWQpcmV0dXJuIGl0W0lURVJBVE9SXQ0KICAgIHx8IGl0WydAQGl0ZXJhdG9yJ10NCiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldOw0KfTsNCg0KLyoqKi8gfSksDQovKiA3NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDc1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODEpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNzYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MyksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiA3NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDc4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTAwKTsNCnZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Q7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZShQLCBEKXsNCiAgcmV0dXJuICRPYmplY3QuY3JlYXRlKFAsIEQpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA3OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmdldFByb3RvdHlwZU9mOw0KDQovKioqLyB9KSwNCi8qIDgwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTAyKTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Qua2V5czsNCg0KLyoqKi8gfSksDQovKiA4MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LnNldFByb3RvdHlwZU9mOw0KDQovKioqLyB9KSwNCi8qIDgyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNTQpOw0KX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTsNCl9fd2VicGFja19yZXF1aXJlX18oMTA0KTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5Qcm9taXNlOw0KDQovKioqLyB9KSwNCi8qIDgzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTA1KTsNCl9fd2VicGFja19yZXF1aXJlX18oNTQpOw0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpOw0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlN5bWJvbDsNCg0KLyoqKi8gfSksDQovKiA4NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsNCl9fd2VicGFja19yZXF1aXJlX18oNTEpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KS5mKCdpdGVyYXRvcicpOw0KDQovKioqLyB9KSwNCi8qIDg1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCl7DQogIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgKGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpKXsNCiAgICB0aHJvdyBUeXBlRXJyb3IobmFtZSArICc6IGluY29ycmVjdCBpbnZvY2F0aW9uIScpOw0KICB9IHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogODYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHMNCnZhciBnZXRLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykNCiAgLCBnT1BTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkNCiAgLCBwSUUgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgdmFyIHJlc3VsdCAgICAgPSBnZXRLZXlzKGl0KQ0KICAgICwgZ2V0U3ltYm9scyA9IGdPUFMuZjsNCiAgaWYoZ2V0U3ltYm9scyl7DQogICAgdmFyIHN5bWJvbHMgPSBnZXRTeW1ib2xzKGl0KQ0KICAgICAgLCBpc0VudW0gID0gcElFLmYNCiAgICAgICwgaSAgICAgICA9IDANCiAgICAgICwga2V5Ow0KICAgIHdoaWxlKHN5bWJvbHMubGVuZ3RoID4gaSlpZihpc0VudW0uY2FsbChpdCwga2V5ID0gc3ltYm9sc1tpKytdKSlyZXN1bHQucHVzaChrZXkpOw0KICB9IHJldHVybiByZXN1bHQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDg3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBjdHggICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgY2FsbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKQ0KICAsIGlzQXJyYXlJdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSkNCiAgLCBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCB0b0xlbmd0aCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpDQogICwgZ2V0SXRlckZuICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKQ0KICAsIEJSRUFLICAgICAgID0ge30NCiAgLCBSRVRVUk4gICAgICA9IHt9Ow0KdmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhYmxlLCBlbnRyaWVzLCBmbiwgdGhhdCwgSVRFUkFUT1Ipew0KICB2YXIgaXRlckZuID0gSVRFUkFUT1IgPyBmdW5jdGlvbigpeyByZXR1cm4gaXRlcmFibGU7IH0gOiBnZXRJdGVyRm4oaXRlcmFibGUpDQogICAgLCBmICAgICAgPSBjdHgoZm4sIHRoYXQsIGVudHJpZXMgPyAyIDogMSkNCiAgICAsIGluZGV4ICA9IDANCiAgICAsIGxlbmd0aCwgc3RlcCwgaXRlcmF0b3IsIHJlc3VsdDsNCiAgaWYodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdGVyYWJsZSArICcgaXMgbm90IGl0ZXJhYmxlIScpOw0KICAvLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3INCiAgaWYoaXNBcnJheUl0ZXIoaXRlckZuKSlmb3IobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4Kyspew0KICAgIHJlc3VsdCA9IGVudHJpZXMgPyBmKGFuT2JqZWN0KHN0ZXAgPSBpdGVyYWJsZVtpbmRleF0pWzBdLCBzdGVwWzFdKSA6IGYoaXRlcmFibGVbaW5kZXhdKTsNCiAgICBpZihyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKXJldHVybiByZXN1bHQ7DQogIH0gZWxzZSBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgKXsNCiAgICByZXN1bHQgPSBjYWxsKGl0ZXJhdG9yLCBmLCBzdGVwLnZhbHVlLCBlbnRyaWVzKTsNCiAgICBpZihyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKXJldHVybiByZXN1bHQ7DQogIH0NCn07DQpleHBvcnRzLkJSRUFLICA9IEJSRUFLOw0KZXhwb3J0cy5SRVRVUk4gPSBSRVRVUk47DQoNCi8qKiovIH0pLA0KLyogODggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCBhcmdzLCB0aGF0KXsNCiAgdmFyIHVuID0gdGhhdCA9PT0gdW5kZWZpbmVkOw0KICBzd2l0Y2goYXJncy5sZW5ndGgpew0KICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKQ0KICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0KTsNCiAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pDQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pOw0KICAgIGNhc2UgMjogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSkNCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7DQogICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKQ0KICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsNCiAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pDQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOw0KICB9IHJldHVybiAgICAgICAgICAgICAgZm4uYXBwbHkodGhhdCwgYXJncyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDg5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3INCnZhciBJdGVyYXRvcnMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCBJVEVSQVRPUiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQ0KICAsIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA5MCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQ0KdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOw0KbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKXsNCiAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDkxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3INCnZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpew0KICB0cnkgew0KICAgIHJldHVybiBlbnRyaWVzID8gZm4oYW5PYmplY3QodmFsdWUpWzBdLCB2YWx1ZVsxXSkgOiBmbih2YWx1ZSk7DQogIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pDQogIH0gY2F0Y2goZSl7DQogICAgdmFyIHJldCA9IGl0ZXJhdG9yWydyZXR1cm4nXTsNCiAgICBpZihyZXQgIT09IHVuZGVmaW5lZClhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpOw0KICAgIHRocm93IGU7DQogIH0NCn07DQoNCi8qKiovIH0pLA0KLyogOTIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIElURVJBVE9SICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykNCiAgLCBTQUZFX0NMT1NJTkcgPSBmYWxzZTsNCg0KdHJ5IHsNCiAgdmFyIHJpdGVyID0gWzddW0lURVJBVE9SXSgpOw0KICByaXRlclsncmV0dXJuJ10gPSBmdW5jdGlvbigpeyBTQUZFX0NMT1NJTkcgPSB0cnVlOyB9Ow0KICBBcnJheS5mcm9tKHJpdGVyLCBmdW5jdGlvbigpeyB0aHJvdyAyOyB9KTsNCn0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0NCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjLCBza2lwQ2xvc2luZyl7DQogIGlmKCFza2lwQ2xvc2luZyAmJiAhU0FGRV9DTE9TSU5HKXJldHVybiBmYWxzZTsNCiAgdmFyIHNhZmUgPSBmYWxzZTsNCiAgdHJ5IHsNCiAgICB2YXIgYXJyICA9IFs3XQ0KICAgICAgLCBpdGVyID0gYXJyW0lURVJBVE9SXSgpOw0KICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uKCl7IHJldHVybiB7ZG9uZTogc2FmZSA9IHRydWV9OyB9Ow0KICAgIGFycltJVEVSQVRPUl0gPSBmdW5jdGlvbigpeyByZXR1cm4gaXRlcjsgfTsNCiAgICBleGVjKGFycik7DQogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0NCiAgcmV0dXJuIHNhZmU7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDkzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnZXRLZXlzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQ0KICAsIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIGVsKXsNCiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpDQogICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pDQogICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aA0KICAgICwgaW5kZXggID0gMA0KICAgICwga2V5Ow0KICB3aGlsZShsZW5ndGggPiBpbmRleClpZihPW2tleSA9IGtleXNbaW5kZXgrK11dID09PSBlbClyZXR1cm4ga2V5Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA5NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZ2xvYmFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIG1hY3JvdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpLnNldA0KICAsIE9ic2VydmVyICA9IGdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyDQogICwgcHJvY2VzcyAgID0gZ2xvYmFsLnByb2Nlc3MNCiAgLCBQcm9taXNlICAgPSBnbG9iYWwuUHJvbWlzZQ0KICAsIGlzTm9kZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJzsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpew0KICB2YXIgaGVhZCwgbGFzdCwgbm90aWZ5Ow0KDQogIHZhciBmbHVzaCA9IGZ1bmN0aW9uKCl7DQogICAgdmFyIHBhcmVudCwgZm47DQogICAgaWYoaXNOb2RlICYmIChwYXJlbnQgPSBwcm9jZXNzLmRvbWFpbikpcGFyZW50LmV4aXQoKTsNCiAgICB3aGlsZShoZWFkKXsNCiAgICAgIGZuICAgPSBoZWFkLmZuOw0KICAgICAgaGVhZCA9IGhlYWQubmV4dDsNCiAgICAgIHRyeSB7DQogICAgICAgIGZuKCk7DQogICAgICB9IGNhdGNoKGUpew0KICAgICAgICBpZihoZWFkKW5vdGlmeSgpOw0KICAgICAgICBlbHNlIGxhc3QgPSB1bmRlZmluZWQ7DQogICAgICAgIHRocm93IGU7DQogICAgICB9DQogICAgfSBsYXN0ID0gdW5kZWZpbmVkOw0KICAgIGlmKHBhcmVudClwYXJlbnQuZW50ZXIoKTsNCiAgfTsNCg0KICAvLyBOb2RlLmpzDQogIGlmKGlzTm9kZSl7DQogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsNCiAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOw0KICAgIH07DQogIC8vIGJyb3dzZXJzIHdpdGggTXV0YXRpb25PYnNlcnZlcg0KICB9IGVsc2UgaWYoT2JzZXJ2ZXIpew0KICAgIHZhciB0b2dnbGUgPSB0cnVlDQogICAgICAsIG5vZGUgICA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTsNCiAgICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcNCiAgICBub3RpZnkgPSBmdW5jdGlvbigpew0KICAgICAgbm9kZS5kYXRhID0gdG9nZ2xlID0gIXRvZ2dsZTsNCiAgICB9Ow0KICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZQ0KICB9IGVsc2UgaWYoUHJvbWlzZSAmJiBQcm9taXNlLnJlc29sdmUpew0KICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7DQogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsNCiAgICAgIHByb21pc2UudGhlbihmbHVzaCk7DQogICAgfTsNCiAgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjoNCiAgLy8gLSBzZXRJbW1lZGlhdGUNCiAgLy8gLSBNZXNzYWdlQ2hhbm5lbA0KICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnDQogIC8vIC0gb25yZWFkeXN0YXRlY2hhbmdlDQogIC8vIC0gc2V0VGltZW91dA0KICB9IGVsc2Ugew0KICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7DQogICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpDQogICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTsNCiAgICB9Ow0KICB9DQoNCiAgcmV0dXJuIGZ1bmN0aW9uKGZuKXsNCiAgICB2YXIgdGFzayA9IHtmbjogZm4sIG5leHQ6IHVuZGVmaW5lZH07DQogICAgaWYobGFzdClsYXN0Lm5leHQgPSB0YXNrOw0KICAgIGlmKCFoZWFkKXsNCiAgICAgIGhlYWQgPSB0YXNrOw0KICAgICAgbm90aWZ5KCk7DQogICAgfSBsYXN0ID0gdGFzazsNCiAgfTsNCn07DQoNCi8qKiovIH0pLA0KLyogOTUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdw0KdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpDQogICwgZ09QTiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZg0KICAsIHRvU3RyaW5nICA9IHt9LnRvU3RyaW5nOw0KDQp2YXIgd2luZG93TmFtZXMgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcw0KICA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTsNCg0KdmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24oaXQpew0KICB0cnkgew0KICAgIHJldHVybiBnT1BOKGl0KTsNCiAgfSBjYXRjaChlKXsNCiAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTsNCiAgfQ0KfTsNCg0KbW9kdWxlLmV4cG9ydHMuZiA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpew0KICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpOw0KfTsNCg0KDQovKioqLyB9KSwNCi8qIDk2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMsIHNhZmUpew0KICBmb3IodmFyIGtleSBpbiBzcmMpew0KICAgIGlmKHNhZmUgJiYgdGFyZ2V0W2tleV0pdGFyZ2V0W2tleV0gPSBzcmNba2V5XTsNCiAgICBlbHNlIGhpZGUodGFyZ2V0LCBrZXksIHNyY1trZXldKTsNCiAgfSByZXR1cm4gdGFyZ2V0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA5NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy4NCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovDQp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpDQogICwgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOw0KdmFyIGNoZWNrID0gZnVuY3Rpb24oTywgcHJvdG8pew0KICBhbk9iamVjdChPKTsNCiAgaWYoIWlzT2JqZWN0KHByb3RvKSAmJiBwcm90byAhPT0gbnVsbCl0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyAiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpOw0KfTsNCm1vZHVsZS5leHBvcnRzID0gew0KICBzZXQ6IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoJ19fcHJvdG9fXycgaW4ge30gPyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lDQogICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7DQogICAgICB0cnkgew0KICAgICAgICBzZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KShGdW5jdGlvbi5jYWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KS5mKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKS5zZXQsIDIpOw0KICAgICAgICBzZXQodGVzdCwgW10pOw0KICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTsNCiAgICAgIH0gY2F0Y2goZSl7IGJ1Z2d5ID0gdHJ1ZTsgfQ0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKXsNCiAgICAgICAgY2hlY2soTywgcHJvdG8pOw0KICAgICAgICBpZihidWdneSlPLl9fcHJvdG9fXyA9IHByb3RvOw0KICAgICAgICBlbHNlIHNldChPLCBwcm90byk7DQogICAgICAgIHJldHVybiBPOw0KICAgICAgfTsNCiAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLA0KICBjaGVjazogY2hlY2sNCn07DQoNCi8qKiovIH0pLA0KLyogOTggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgZ2xvYmFsICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgY29yZSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApDQogICwgZFAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpDQogICwgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpDQogICwgU1BFQ0lFUyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdzcGVjaWVzJyk7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZKXsNCiAgdmFyIEMgPSB0eXBlb2YgY29yZVtLRVldID09ICdmdW5jdGlvbicgPyBjb3JlW0tFWV0gOiBnbG9iYWxbS0VZXTsNCiAgaWYoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSlkUC5mKEMsIFNQRUNJRVMsIHsNCiAgICBjb25maWd1cmFibGU6IHRydWUsDQogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfQ0KICB9KTsNCn07DQoNCi8qKiovIH0pLA0KLyogOTkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpDQp2YXIgYW5PYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQ0KICAsIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApDQogICwgU1BFQ0lFUyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihPLCBEKXsNCiAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvciwgUzsNCiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAxMDAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpDQovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkNCiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge2NyZWF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXygzNSl9KTsNCg0KLyoqKi8gfSksDQovKiAxMDEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pDQp2YXIgdG9PYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikNCiAgLCAkZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2dldFByb3RvdHlwZU9mJywgZnVuY3Rpb24oKXsNCiAgcmV0dXJuIGZ1bmN0aW9uIGdldFByb3RvdHlwZU9mKGl0KXsNCiAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7DQogIH07DQp9KTsNCg0KLyoqKi8gfSksDQovKiAxMDIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pDQp2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQ0KICAsICRrZXlzICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNDUpKCdrZXlzJywgZnVuY3Rpb24oKXsNCiAgcmV0dXJuIGZ1bmN0aW9uIGtleXMoaXQpew0KICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpOw0KICB9Ow0KfSk7DQoNCi8qKiovIH0pLA0KLyogMTAzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMy4xOSBPYmplY3Quc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pDQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7DQokZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXyg5Nykuc2V0fSk7DQoNCi8qKiovIH0pLA0KLyogMTA0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIExJQlJBUlkgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpDQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGN0eCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgY2xhc3NvZiAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSkNCiAgLCAkZXhwb3J0ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpDQogICwgaXNPYmplY3QgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQ0KICAsIGFGdW5jdGlvbiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjApDQogICwgYW5JbnN0YW5jZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkNCiAgLCBmb3JPZiAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KQ0KICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpDQogICwgdGFzayAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0DQogICwgbWljcm90YXNrICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCkoKQ0KICAsIFBST01JU0UgICAgICAgICAgICA9ICdQcm9taXNlJw0KICAsIFR5cGVFcnJvciAgICAgICAgICA9IGdsb2JhbC5UeXBlRXJyb3INCiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzcw0KICAsICRQcm9taXNlICAgICAgICAgICA9IGdsb2JhbFtQUk9NSVNFXQ0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzDQogICwgaXNOb2RlICAgICAgICAgICAgID0gY2xhc3NvZihwcm9jZXNzKSA9PSAncHJvY2VzcycNCiAgLCBlbXB0eSAgICAgICAgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9DQogICwgSW50ZXJuYWwsIEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSwgV3JhcHBlcjsNCg0KdmFyIFVTRV9OQVRJVkUgPSAhIWZ1bmN0aW9uKCl7DQogIHRyeSB7DQogICAgLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0DQogICAgdmFyIHByb21pc2UgICAgID0gJFByb21pc2UucmVzb2x2ZSgxKQ0KICAgICAgLCBGYWtlUHJvbWlzZSA9IChwcm9taXNlLmNvbnN0cnVjdG9yID0ge30pW19fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKV0gPSBmdW5jdGlvbihleGVjKXsgZXhlYyhlbXB0eSwgZW1wdHkpOyB9Ow0KICAgIC8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3QNCiAgICByZXR1cm4gKGlzTm9kZSB8fCB0eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50ID09ICdmdW5jdGlvbicpICYmIHByb21pc2UudGhlbihlbXB0eSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KfSgpOw0KDQovLyBoZWxwZXJzDQp2YXIgc2FtZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24oYSwgYil7DQogIC8vIHdpdGggbGlicmFyeSB3cmFwcGVyIHNwZWNpYWwgY2FzZQ0KICByZXR1cm4gYSA9PT0gYiB8fCBhID09PSAkUHJvbWlzZSAmJiBiID09PSBXcmFwcGVyOw0KfTsNCnZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24oaXQpew0KICB2YXIgdGhlbjsNCiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiB0eXBlb2YgKHRoZW4gPSBpdC50aGVuKSA9PSAnZnVuY3Rpb24nID8gdGhlbiA6IGZhbHNlOw0KfTsNCnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpew0KICByZXR1cm4gc2FtZUNvbnN0cnVjdG9yKCRQcm9taXNlLCBDKQ0KICAgID8gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpDQogICAgOiBuZXcgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpOw0KfTsNCnZhciBQcm9taXNlQ2FwYWJpbGl0eSA9IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpew0KICB2YXIgcmVzb2x2ZSwgcmVqZWN0Ow0KICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbigkJHJlc29sdmUsICQkcmVqZWN0KXsNCiAgICBpZihyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKCdCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvcicpOw0KICAgIHJlc29sdmUgPSAkJHJlc29sdmU7DQogICAgcmVqZWN0ICA9ICQkcmVqZWN0Ow0KICB9KTsNCiAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpOw0KICB0aGlzLnJlamVjdCAgPSBhRnVuY3Rpb24ocmVqZWN0KTsNCn07DQp2YXIgcGVyZm9ybSA9IGZ1bmN0aW9uKGV4ZWMpew0KICB0cnkgew0KICAgIGV4ZWMoKTsNCiAgfSBjYXRjaChlKXsNCiAgICByZXR1cm4ge2Vycm9yOiBlfTsNCiAgfQ0KfTsNCnZhciBub3RpZnkgPSBmdW5jdGlvbihwcm9taXNlLCBpc1JlamVjdCl7DQogIGlmKHByb21pc2UuX24pcmV0dXJuOw0KICBwcm9taXNlLl9uID0gdHJ1ZTsNCiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYzsNCiAgbWljcm90YXNrKGZ1bmN0aW9uKCl7DQogICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdg0KICAgICAgLCBvayAgICA9IHByb21pc2UuX3MgPT0gMQ0KICAgICAgLCBpICAgICA9IDA7DQogICAgdmFyIHJ1biA9IGZ1bmN0aW9uKHJlYWN0aW9uKXsNCiAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWwNCiAgICAgICAgLCByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZQ0KICAgICAgICAsIHJlamVjdCAgPSByZWFjdGlvbi5yZWplY3QNCiAgICAgICAgLCBkb21haW4gID0gcmVhY3Rpb24uZG9tYWluDQogICAgICAgICwgcmVzdWx0LCB0aGVuOw0KICAgICAgdHJ5IHsNCiAgICAgICAgaWYoaGFuZGxlcil7DQogICAgICAgICAgaWYoIW9rKXsNCiAgICAgICAgICAgIGlmKHByb21pc2UuX2ggPT0gMilvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKTsNCiAgICAgICAgICAgIHByb21pc2UuX2ggPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihoYW5kbGVyID09PSB0cnVlKXJlc3VsdCA9IHZhbHVlOw0KICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5lbnRlcigpOw0KICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSk7DQogICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmV4aXQoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYocmVzdWx0ID09PSByZWFjdGlvbi5wcm9taXNlKXsNCiAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7DQogICAgICAgICAgfSBlbHNlIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpew0KICAgICAgICAgICAgdGhlbi5jYWxsKHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KTsNCiAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXN1bHQpOw0KICAgICAgICB9IGVsc2UgcmVqZWN0KHZhbHVlKTsNCiAgICAgIH0gY2F0Y2goZSl7DQogICAgICAgIHJlamVjdChlKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpcnVuKGNoYWluW2krK10pOyAvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaA0KICAgIHByb21pc2UuX2MgPSBbXTsNCiAgICBwcm9taXNlLl9uID0gZmFsc2U7DQogICAgaWYoaXNSZWplY3QgJiYgIXByb21pc2UuX2gpb25VbmhhbmRsZWQocHJvbWlzZSk7DQogIH0pOw0KfTsNCnZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upew0KICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpew0KICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YNCiAgICAgICwgYWJydXB0LCBoYW5kbGVyLCBjb25zb2xlOw0KICAgIGlmKGlzVW5oYW5kbGVkKHByb21pc2UpKXsNCiAgICAgIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsNCiAgICAgICAgaWYoaXNOb2RlKXsNCiAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3VuaGFuZGxlZFJlamVjdGlvbicsIHZhbHVlLCBwcm9taXNlKTsNCiAgICAgICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pew0KICAgICAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogdmFsdWV9KTsNCiAgICAgICAgfSBlbHNlIGlmKChjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGUpICYmIGNvbnNvbGUuZXJyb3Ipew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbicsIHZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICAvLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZA0KICAgICAgcHJvbWlzZS5faCA9IGlzTm9kZSB8fCBpc1VuaGFuZGxlZChwcm9taXNlKSA/IDIgOiAxOw0KICAgIH0gcHJvbWlzZS5fYSA9IHVuZGVmaW5lZDsNCiAgICBpZihhYnJ1cHQpdGhyb3cgYWJydXB0LmVycm9yOw0KICB9KTsNCn07DQp2YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsNCiAgaWYocHJvbWlzZS5faCA9PSAxKXJldHVybiBmYWxzZTsNCiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYSB8fCBwcm9taXNlLl9jDQogICAgLCBpICAgICA9IDANCiAgICAsIHJlYWN0aW9uOw0KICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXsNCiAgICByZWFjdGlvbiA9IGNoYWluW2krK107DQogICAgaWYocmVhY3Rpb24uZmFpbCB8fCAhaXNVbmhhbmRsZWQocmVhY3Rpb24ucHJvbWlzZSkpcmV0dXJuIGZhbHNlOw0KICB9IHJldHVybiB0cnVlOw0KfTsNCnZhciBvbkhhbmRsZVVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upew0KICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpew0KICAgIHZhciBoYW5kbGVyOw0KICAgIGlmKGlzTm9kZSl7DQogICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTsNCiAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnJlamVjdGlvbmhhbmRsZWQpew0KICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiBwcm9taXNlLl92fSk7DQogICAgfQ0KICB9KTsNCn07DQp2YXIgJHJlamVjdCA9IGZ1bmN0aW9uKHZhbHVlKXsNCiAgdmFyIHByb21pc2UgPSB0aGlzOw0KICBpZihwcm9taXNlLl9kKXJldHVybjsNCiAgcHJvbWlzZS5fZCA9IHRydWU7DQogIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcA0KICBwcm9taXNlLl92ID0gdmFsdWU7DQogIHByb21pc2UuX3MgPSAyOw0KICBpZighcHJvbWlzZS5fYSlwcm9taXNlLl9hID0gcHJvbWlzZS5fYy5zbGljZSgpOw0KICBub3RpZnkocHJvbWlzZSwgdHJ1ZSk7DQp9Ow0KdmFyICRyZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpew0KICB2YXIgcHJvbWlzZSA9IHRoaXMNCiAgICAsIHRoZW47DQogIGlmKHByb21pc2UuX2QpcmV0dXJuOw0KICBwcm9taXNlLl9kID0gdHJ1ZTsNCiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwDQogIHRyeSB7DQogICAgaWYocHJvbWlzZSA9PT0gdmFsdWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOw0KICAgIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHZhbHVlKSl7DQogICAgICBtaWNyb3Rhc2soZnVuY3Rpb24oKXsNCiAgICAgICAgdmFyIHdyYXBwZXIgPSB7X3c6IHByb21pc2UsIF9kOiBmYWxzZX07IC8vIHdyYXANCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGN0eCgkcmVzb2x2ZSwgd3JhcHBlciwgMSksIGN0eCgkcmVqZWN0LCB3cmFwcGVyLCAxKSk7DQogICAgICAgIH0gY2F0Y2goZSl7DQogICAgICAgICAgJHJlamVjdC5jYWxsKHdyYXBwZXIsIGUpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9IGVsc2Ugew0KICAgICAgcHJvbWlzZS5fdiA9IHZhbHVlOw0KICAgICAgcHJvbWlzZS5fcyA9IDE7DQogICAgICBub3RpZnkocHJvbWlzZSwgZmFsc2UpOw0KICAgIH0NCiAgfSBjYXRjaChlKXsNCiAgICAkcmVqZWN0LmNhbGwoe193OiBwcm9taXNlLCBfZDogZmFsc2V9LCBlKTsgLy8gd3JhcA0KICB9DQp9Ow0KDQovLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbA0KaWYoIVVTRV9OQVRJVkUpew0KICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQ0KICAkUHJvbWlzZSA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3Ipew0KICAgIGFuSW5zdGFuY2UodGhpcywgJFByb21pc2UsIFBST01JU0UsICdfaCcpOw0KICAgIGFGdW5jdGlvbihleGVjdXRvcik7DQogICAgSW50ZXJuYWwuY2FsbCh0aGlzKTsNCiAgICB0cnkgew0KICAgICAgZXhlY3V0b3IoY3R4KCRyZXNvbHZlLCB0aGlzLCAxKSwgY3R4KCRyZWplY3QsIHRoaXMsIDEpKTsNCiAgICB9IGNhdGNoKGVycil7DQogICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTsNCiAgICB9DQogIH07DQogIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7DQogICAgdGhpcy5fYyA9IFtdOyAgICAgICAgICAgICAvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMNCiAgICB0aGlzLl9hID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zDQogICAgdGhpcy5fcyA9IDA7ICAgICAgICAgICAgICAvLyA8LSBzdGF0ZQ0KICAgIHRoaXMuX2QgPSBmYWxzZTsgICAgICAgICAgLy8gPC0gZG9uZQ0KICAgIHRoaXMuX3YgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gdmFsdWUNCiAgICB0aGlzLl9oID0gMDsgICAgICAgICAgICAgIC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkDQogICAgdGhpcy5fbiA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBub3RpZnkNCiAgfTsNCiAgSW50ZXJuYWwucHJvdG90eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NikoJFByb21pc2UucHJvdG90eXBlLCB7DQogICAgLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkNCiAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKXsNCiAgICAgIHZhciByZWFjdGlvbiAgICA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkUHJvbWlzZSkpOw0KICAgICAgcmVhY3Rpb24ub2sgICAgID0gdHlwZW9mIG9uRnVsZmlsbGVkID09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IHRydWU7DQogICAgICByZWFjdGlvbi5mYWlsICAgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7DQogICAgICByZWFjdGlvbi5kb21haW4gPSBpc05vZGUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDsNCiAgICAgIHRoaXMuX2MucHVzaChyZWFjdGlvbik7DQogICAgICBpZih0aGlzLl9hKXRoaXMuX2EucHVzaChyZWFjdGlvbik7DQogICAgICBpZih0aGlzLl9zKW5vdGlmeSh0aGlzLCBmYWxzZSk7DQogICAgICByZXR1cm4gcmVhY3Rpb24ucHJvbWlzZTsNCiAgICB9LA0KICAgIC8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpDQogICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3RlZCl7DQogICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7DQogICAgfQ0KICB9KTsNCiAgUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbigpew0KICAgIHZhciBwcm9taXNlICA9IG5ldyBJbnRlcm5hbDsNCiAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlOw0KICAgIHRoaXMucmVzb2x2ZSA9IGN0eCgkcmVzb2x2ZSwgcHJvbWlzZSwgMSk7DQogICAgdGhpcy5yZWplY3QgID0gY3R4KCRyZWplY3QsIHByb21pc2UsIDEpOw0KICB9Ow0KfQ0KDQokZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7UHJvbWlzZTogJFByb21pc2V9KTsNCl9fd2VicGFja19yZXF1aXJlX18oMjEpKCRQcm9taXNlLCBQUk9NSVNFKTsNCl9fd2VicGFja19yZXF1aXJlX18oOTgpKFBST01JU0UpOw0KV3JhcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMClbUFJPTUlTRV07DQoNCi8vIHN0YXRpY3MNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIFBST01JU0UsIHsNCiAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocikNCiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocil7DQogICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKQ0KICAgICAgLCAkJHJlamVjdCAgID0gY2FwYWJpbGl0eS5yZWplY3Q7DQogICAgJCRyZWplY3Qocik7DQogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsNCiAgfQ0KfSk7DQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIChMSUJSQVJZIHx8ICFVU0VfTkFUSVZFKSwgUFJPTUlTRSwgew0KICAvLyAyNS40LjQuNiBQcm9taXNlLnJlc29sdmUoeCkNCiAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh4KXsNCiAgICAvLyBpbnN0YW5jZW9mIGluc3RlYWQgb2YgaW50ZXJuYWwgc2xvdCBjaGVjayBiZWNhdXNlIHdlIHNob3VsZCBmaXggaXQgd2l0aG91dCByZXBsYWNlbWVudCBuYXRpdmUgUHJvbWlzZSBjb3JlDQogICAgaWYoeCBpbnN0YW5jZW9mICRQcm9taXNlICYmIHNhbWVDb25zdHJ1Y3Rvcih4LmNvbnN0cnVjdG9yLCB0aGlzKSlyZXR1cm4geDsNCiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpDQogICAgICAsICQkcmVzb2x2ZSAgPSBjYXBhYmlsaXR5LnJlc29sdmU7DQogICAgJCRyZXNvbHZlKHgpOw0KICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7DQogIH0NCn0pOw0KJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKFVTRV9OQVRJVkUgJiYgX193ZWJwYWNrX3JlcXVpcmVfXyg5MikoZnVuY3Rpb24oaXRlcil7DQogICRQcm9taXNlLmFsbChpdGVyKVsnY2F0Y2gnXShlbXB0eSk7DQp9KSksIFBST01JU0UsIHsNCiAgLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpDQogIGFsbDogZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKXsNCiAgICB2YXIgQyAgICAgICAgICA9IHRoaXMNCiAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpDQogICAgICAsIHJlc29sdmUgICAgPSBjYXBhYmlsaXR5LnJlc29sdmUNCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0Ow0KICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7DQogICAgICB2YXIgdmFsdWVzICAgID0gW10NCiAgICAgICAgLCBpbmRleCAgICAgPSAwDQogICAgICAgICwgcmVtYWluaW5nID0gMTsNCiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7DQogICAgICAgIHZhciAkaW5kZXggICAgICAgID0gaW5kZXgrKw0KICAgICAgICAgICwgYWxyZWFkeUNhbGxlZCA9IGZhbHNlOw0KICAgICAgICB2YWx1ZXMucHVzaCh1bmRlZmluZWQpOw0KICAgICAgICByZW1haW5pbmcrKzsNCiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpew0KICAgICAgICAgIGlmKGFscmVhZHlDYWxsZWQpcmV0dXJuOw0KICAgICAgICAgIGFscmVhZHlDYWxsZWQgID0gdHJ1ZTsNCiAgICAgICAgICB2YWx1ZXNbJGluZGV4XSA9IHZhbHVlOw0KICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsNCiAgICAgICAgfSwgcmVqZWN0KTsNCiAgICAgIH0pOw0KICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOw0KICAgIH0pOw0KICAgIGlmKGFicnVwdClyZWplY3QoYWJydXB0LmVycm9yKTsNCiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOw0KICB9LA0KICAvLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpDQogIHJhY2U6IGZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpew0KICAgIHZhciBDICAgICAgICAgID0gdGhpcw0KICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykNCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0Ow0KICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7DQogICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2Upew0KICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7DQogICAgICB9KTsNCiAgICB9KTsNCiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7DQogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsNCiAgfQ0KfSk7DQoNCi8qKiovIH0pLA0KLyogMTA1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KLy8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbQ0KdmFyIGdsb2JhbCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikNCiAgLCBERVNDUklQVE9SUyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykNCiAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOCkNCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpDQogICwgTUVUQSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKS5LRVkNCiAgLCAkZmFpbHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpDQogICwgc2hhcmVkICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKQ0KICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkNCiAgLCB1aWQgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpDQogICwgd2tzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpDQogICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KQ0KICAsIHdrc0RlZmluZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkNCiAgLCBrZXlPZiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpDQogICwgZW51bUtleXMgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KQ0KICAsIGlzQXJyYXkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCkNCiAgLCBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCB0b0lPYmplY3QgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpDQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKQ0KICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikNCiAgLCBfY3JlYXRlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpDQogICwgZ09QTkV4dCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KQ0KICAsICRHT1BEICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NykNCiAgLCAkRFAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkNCiAgLCAka2V5cyAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpDQogICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mDQogICwgZFAgICAgICAgICAgICAgPSAkRFAuZg0KICAsIGdPUE4gICAgICAgICAgID0gZ09QTkV4dC5mDQogICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sDQogICwgJEpTT04gICAgICAgICAgPSBnbG9iYWwuSlNPTg0KICAsIF9zdHJpbmdpZnkgICAgID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5DQogICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJw0KICAsIEhJRERFTiAgICAgICAgID0gd2tzKCdfaGlkZGVuJykNCiAgLCBUT19QUklNSVRJVkUgICA9IHdrcygndG9QcmltaXRpdmUnKQ0KICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGUNCiAgLCBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5JykNCiAgLCBBbGxTeW1ib2xzICAgICA9IHNoYXJlZCgnc3ltYm9scycpDQogICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKQ0KICAsIE9iamVjdFByb3RvICAgID0gT2JqZWN0W1BST1RPVFlQRV0NCiAgLCBVU0VfTkFUSVZFICAgICA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbicNCiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0Ow0KLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczDQp2YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDsNCg0KLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3DQp2YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpew0KICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7DQogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9DQogIH0pKS5hICE9IDc7DQp9KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpew0KICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTsNCiAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldOw0KICBkUChpdCwga2V5LCBEKTsNCiAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpOw0KfSA6IGRQOw0KDQp2YXIgd3JhcCA9IGZ1bmN0aW9uKHRhZyl7DQogIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7DQogIHN5bS5fayA9IHRhZzsNCiAgcmV0dXJuIHN5bTsNCn07DQoNCnZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgdHlwZW9mICRTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbihpdCl7DQogIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7DQp9IDogZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sOw0KfTsNCg0KdmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpew0KICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTsNCiAgYW5PYmplY3QoaXQpOw0KICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOw0KICBhbk9iamVjdChEKTsNCiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpew0KICAgIGlmKCFELmVudW1lcmFibGUpew0KICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7DQogICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlOw0KICAgIH0gZWxzZSB7DQogICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlOw0KICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7DQogICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTsNCiAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7DQp9Ow0KdmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7DQogIGFuT2JqZWN0KGl0KTsNCiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKQ0KICAgICwgaSAgICA9IDANCiAgICAsIGwgPSBrZXlzLmxlbmd0aA0KICAgICwga2V5Ow0KICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTsNCiAgcmV0dXJuIGl0Ow0KfTsNCnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXsNCiAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApOw0KfTsNCnZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpew0KICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpOw0KICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7DQogIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTsNCn07DQp2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsNCiAgaXQgID0gdG9JT2JqZWN0KGl0KTsNCiAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTsNCiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjsNCiAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpOw0KICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTsNCiAgcmV0dXJuIEQ7DQp9Ow0KdmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7DQogIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpDQogICAgLCByZXN1bHQgPSBbXQ0KICAgICwgaSAgICAgID0gMA0KICAgICwga2V5Ow0KICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsNCiAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTsNCiAgfSByZXR1cm4gcmVzdWx0Ow0KfTsNCnZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXsNCiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90bw0KICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpDQogICAgLCByZXN1bHQgPSBbXQ0KICAgICwgaSAgICAgID0gMA0KICAgICwga2V5Ow0KICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsNCiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsNCiAgfSByZXR1cm4gcmVzdWx0Ow0KfTsNCg0KLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pDQppZighVVNFX05BVElWRSl7DQogICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXsNCiAgICBpZih0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCl0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTsNCiAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsNCiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXsNCiAgICAgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvKSRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTsNCiAgICAgIGlmKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTsNCiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7DQogICAgfTsNCiAgICBpZihERVNDUklQVE9SUyAmJiBzZXR0ZXIpc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7Y29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6ICRzZXR9KTsNCiAgICByZXR1cm4gd3JhcCh0YWcpOw0KICB9Ow0KICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7DQogICAgcmV0dXJuIHRoaXMuX2s7DQogIH0pOw0KDQogICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOw0KICAkRFAuZiAgID0gJGRlZmluZVByb3BlcnR5Ow0KICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KS5mID0gZ09QTkV4dC5mID0gJGdldE93blByb3BlcnR5TmFtZXM7DQogIF9fd2VicGFja19yZXF1aXJlX18oNDEpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlOw0KICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KS5mID0gJGdldE93blByb3BlcnR5U3ltYm9sczsNCg0KICBpZihERVNDUklQVE9SUyAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygyNSkpew0KICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpOw0KICB9DQoNCiAgd2tzRXh0LmYgPSBmdW5jdGlvbihuYW1lKXsNCiAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpOw0KICB9DQp9DQoNCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTsNCg0KZm9yKHZhciBzeW1ib2xzID0gKA0KICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNA0KICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnDQopLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTsNCg0KZm9yKHZhciBzeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrc0RlZmluZShzeW1ib2xzW2krK10pOw0KDQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywgew0KICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSkNCiAgJ2Zvcic6IGZ1bmN0aW9uKGtleSl7DQogICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKQ0KICAgICAgPyBTeW1ib2xSZWdpc3RyeVtrZXldDQogICAgICA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7DQogIH0sDQogIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQ0KICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihrZXkpew0KICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpOw0KICAgIHRocm93IFR5cGVFcnJvcihrZXkgKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTsNCiAgfSwNCiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LA0KICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCl7IHNldHRlciA9IGZhbHNlOyB9DQp9KTsNCg0KJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHsNCiAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQ0KICBjcmVhdGU6ICRjcmVhdGUsDQogIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQ0KICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LA0KICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQ0KICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcywNCiAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQ0KICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsDQogIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pDQogIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLA0KICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pDQogIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9scw0KfSk7DQoNCi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQ0KJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uKCl7DQogIHZhciBTID0gJFN5bWJvbCgpOw0KICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQ0KICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwNCiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMNCiAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHthOiBTfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9JzsNCn0pKSwgJ0pTT04nLCB7DQogIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsNCiAgICBpZihpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSlyZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQNCiAgICB2YXIgYXJncyA9IFtpdF0NCiAgICAgICwgaSAgICA9IDENCiAgICAgICwgcmVwbGFjZXIsICRyZXBsYWNlcjsNCiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOw0KICAgIHJlcGxhY2VyID0gYXJnc1sxXTsNCiAgICBpZih0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykkcmVwbGFjZXIgPSByZXBsYWNlcjsNCiAgICBpZigkcmVwbGFjZXIgfHwgIWlzQXJyYXkocmVwbGFjZXIpKXJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7DQogICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTsNCiAgICAgIGlmKCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlOw0KICAgIH07DQogICAgYXJnc1sxXSA9IHJlcGxhY2VyOw0KICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTsNCiAgfQ0KfSk7DQoNCi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludCkNCiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IF9fd2VicGFja19yZXF1aXJlX18oNikoJFN5bWJvbFtQUk9UT1RZUEVdLCBUT19QUklNSVRJVkUsICRTeW1ib2xbUFJPVE9UWVBFXS52YWx1ZU9mKTsNCi8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10NCnNldFRvU3RyaW5nVGFnKCRTeW1ib2wsICdTeW1ib2wnKTsNCi8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ10NCnNldFRvU3RyaW5nVGFnKE1hdGgsICdNYXRoJywgdHJ1ZSk7DQovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQ0Kc2V0VG9TdHJpbmdUYWcoZ2xvYmFsLkpTT04sICdKU09OJywgdHJ1ZSk7DQoNCi8qKiovIH0pLA0KLyogMTA2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdhc3luY0l0ZXJhdG9yJyk7DQoNCi8qKiovIH0pLA0KLyogMTA3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdvYnNlcnZhYmxlJyk7DQoNCi8qKiovIH0pLA0KLyogMTA4ICovLA0KLyogMTA5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9zdHJpbmdpZnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsNCg0KdmFyIF9zdHJpbmdpZnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RyaW5naWZ5KTsNCg0KdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7DQoNCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsNCg0KZXhwb3J0cy5kaXZpZGVVUkwgPSBkaXZpZGVVUkw7DQpleHBvcnRzLmRpdmlkZUVtYWlsID0gZGl2aWRlRW1haWw7DQpleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7DQpleHBvcnRzLmRlZXBDbG9uZSA9IGRlZXBDbG9uZTsNCmV4cG9ydHMuZ2V0VXNlclVSTEZyb21FbWFpbCA9IGdldFVzZXJVUkxGcm9tRW1haWw7DQpleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOw0KZXhwb3J0cy5jb252ZXJ0VG9Vc2VyVVJMID0gY29udmVydFRvVXNlclVSTDsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQovKioNCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwNCiAqIEBtb2R1bGUgdXRpbHMNCiAqLw0KDQovKioNCiAqIEB0eXBlZGVmIGRpdmlkZVVSTA0KICogQHR5cGUgT2JqZWN0DQogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwNCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwNCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMDQogKi8NCg0KLyoqDQogKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkNCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzDQogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMDQogKi8NCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsNCg0KICBpZiAoIXVybCkgdGhyb3cgRXJyb3IoJ1VSTCBpcyBuZWVkZWQgdG8gc3BsaXQnKTsNCg0KICBmdW5jdGlvbiByZWN1cnNlKHZhbHVlKSB7DQogICAgdmFyIHJlZ2V4ID0gLyhbYS16QS1aLV0qKSg6XC9cLyg/OlwuKT98OikoWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpOw0KICAgIHZhciBzdWJzdCA9ICckMSwkMywkNCc7DQogICAgdmFyIHBhcnRzID0gdmFsdWUucmVwbGFjZShyZWdleCwgc3Vic3QpLnNwbGl0KCcsJyk7DQogICAgcmV0dXJuIHBhcnRzOw0KICB9DQoNCiAgdmFyIHBhcnRzID0gcmVjdXJzZSh1cmwpOw0KDQogIC8vIElmIHRoZSB1cmwgaGFzIG5vIHNjaGVtZQ0KICBpZiAocGFydHNbMF0gPT09IHVybCAmJiAhcGFydHNbMF0uaW5jbHVkZXMoJ0AnKSkgew0KDQogICAgdmFyIF9yZXN1bHQgPSB7DQogICAgICB0eXBlOiAiIiwNCiAgICAgIGRvbWFpbjogdXJsLA0KICAgICAgaWRlbnRpdHk6ICIiDQogICAgfTsNCg0KICAgIGNvbnNvbGUuZXJyb3IoJ1tEaXZpZGVVUkxdIERpdmlkZVVSTCBkb25cJ3Qgc3VwcG9ydCB1cmwgd2l0aG91dCBzY2hlbWUuIFBsZWFzZSByZXZpZXcgeW91ciB1cmwgYWRkcmVzcycsIHVybCk7DQoNCiAgICByZXR1cm4gX3Jlc3VsdDsNCiAgfQ0KDQogIC8vIGNoZWNrIGlmIHRoZSB1cmwgaGFzIHRoZSBzY2hlbWUgYW5kIGluY2x1ZGVzIGFuIEANCiAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgcGFydHNbMF0uaW5jbHVkZXMoJ0AnKSkgew0KICAgIHZhciBzY2hlbWUgPSBwYXJ0c1swXSA9PT0gdXJsID8gJ3NtdHAnIDogcGFydHNbMF07DQogICAgcGFydHMgPSByZWN1cnNlKHNjaGVtZSArICc6Ly8nICsgcGFydHNbMF0pOw0KICB9DQoNCiAgLy8gaWYgdGhlIGRvbWFpbiBpbmNsdWRlcyBhbiBALCBkaXZpZGUgaXQgdG8gZG9tYWluIGFuZCBpZGVudGl0eSByZXNwZWN0aXZlbHkNCiAgaWYgKHBhcnRzWzFdLmluY2x1ZGVzKCdAJykpIHsNCiAgICBwYXJ0c1syXSA9IHBhcnRzWzBdICsgJzovLycgKyBwYXJ0c1sxXTsNCiAgICBwYXJ0c1sxXSA9IHBhcnRzWzFdLnN1YnN0cihwYXJ0c1sxXS5pbmRleE9mKCdAJykgKyAxKTsNCiAgfSAvKmVsc2UgaWYgKHBhcnRzWzJdLmluY2x1ZGVzKCcvJykpIHsNCiAgICBwYXJ0c1syXSA9IHBhcnRzWzJdLnN1YnN0cihwYXJ0c1syXS5sYXN0SW5kZXhPZignLycpKzEpOw0KICAgIH0qLw0KDQogIHZhciByZXN1bHQgPSB7DQogICAgdHlwZTogcGFydHNbMF0sDQogICAgZG9tYWluOiBwYXJ0c1sxXSwNCiAgICBpZGVudGl0eTogcGFydHNbMl0NCiAgfTsNCg0KICByZXR1cm4gcmVzdWx0Ow0KfQ0KDQpmdW5jdGlvbiBkaXZpZGVFbWFpbChlbWFpbCkgew0KICB2YXIgaW5kZXhPZkF0ID0gZW1haWwuaW5kZXhPZignQCcpOw0KDQogIHZhciByZXN1bHQgPSB7DQogICAgdXNlcm5hbWU6IGVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpLA0KICAgIGRvbWFpbjogZW1haWwuc3Vic3RyaW5nKGluZGV4T2ZBdCArIDEsIGVtYWlsLmxlbmd0aCkNCiAgfTsNCg0KICByZXR1cm4gcmVzdWx0Ow0KfQ0KDQovKioNCiAqIENoZWNrIGlmIGFuIE9iamVjdCBpcyBlbXB0eQ0KICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3QgT2JqZWN0IHRvIGJlIGNoZWNrZWQNCiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7DQogKi8NCmZ1bmN0aW9uIGVtcHR5T2JqZWN0KG9iamVjdCkgew0KICByZXR1cm4gKDAsIF9rZXlzMi5kZWZhdWx0KShvYmplY3QpLmxlbmd0aCA+IDAgPyBmYWxzZSA6IHRydWU7DQp9DQoNCi8qKg0KICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGENCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQNCiAqIEByZXR1cm4ge09iamVjdH0NCiAqLw0KZnVuY3Rpb24gZGVlcENsb25lKG9iaikgew0KICAvL1RPRE86IHNpbXBsZSBidXQgaW5lZmZpY2llbnQgSlNPTiBkZWVwIGNsb25lLi4uDQogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShvYmopKTsNCn0NCg0KLyoqDQogKiBPYnRhaW5zIHRoZSB1c2VyIFVSTCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gZW1haWwNCiAqIEBwYXJhbSAge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsDQogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTA0KICovDQpmdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKHVzZXJFbWFpbCkgew0KICB2YXIgaW5kZXhPZkF0ID0gdXNlckVtYWlsLmluZGV4T2YoJ0AnKTsNCiAgcmV0dXJuICd1c2VyOi8vJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgdXNlckVtYWlsLmxlbmd0aCkgKyAnLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCk7DQp9DQoNCi8qKg0KICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMDQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTA0KICogQHJldHVybiB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwNCiAqLw0KZnVuY3Rpb24gZ2V0VXNlckVtYWlsRnJvbVVSTCh1c2VyVVJMKSB7DQogIHZhciB1cmwgPSBkaXZpZGVVUkwodXNlclVSTCk7DQogIHJldHVybiB1cmwuaWRlbnRpdHkucmVwbGFjZSgnLycsICcnKSArICdAJyArIHVybC5kb21haW47IC8vIGlkZW50aXR5IGZpZWxkIGhhcyAnL2V4YW1wbGVJRCcgaW5zdGVhZCBvZiAnZXhhbXBsZUlEJw0KfQ0KDQovKioNCiAqIENoZWNrIGlmIHRoZSB1c2VyIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgVVJMIGZvcm1hdCwgaWYgbm90LCBjb252ZXJ0IHRvIFVSTCBmb3JtYXQNCiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXINCiAqIEByZXR1cm4ge3N0cmluZ30gICB1c2VyVVJMICAgIHRoZSB1c2VyIFVSTA0KICovDQpmdW5jdGlvbiBjb252ZXJ0VG9Vc2VyVVJMKGlkZW50aWZpZXIpIHsNCg0KICAvLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0DQogIGlmIChpZGVudGlmaWVyLnN1YnN0cmluZygwLCA3KSA9PT0gJ3VzZXI6Ly8nKSB7DQogICAgdmFyIGRpdmlkZWRVUkwgPSBkaXZpZGVVUkwoaWRlbnRpZmllcik7DQoNCiAgICAvL2NoZWNrIGlmIHRoZSB1cmwgaXMgd2VsbCBmb3JtYXRlZA0KICAgIGlmIChkaXZpZGVkVVJMLmRvbWFpbiAmJiBkaXZpZGVkVVJMLmlkZW50aXR5KSB7DQogICAgICByZXR1cm4gaWRlbnRpZmllcjsNCiAgICB9IGVsc2Ugew0KICAgICAgdGhyb3cgJ3VzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXQnOw0KICAgIH0NCg0KICAgIC8vaWYgbm90LCBjb252ZXJ0IHRoZSB1c2VyIGVtYWlsIHRvIFVSTCBmb3JtYXQNCiAgfSBlbHNlIHsNCiAgICByZXR1cm4gZ2V0VXNlclVSTEZyb21FbWFpbChpZGVudGlmaWVyKTsNCiAgfQ0KfQ0KDQovKioqLyB9KSwNCi8qIDExMCAqLywNCi8qIDExMSAqLywNCi8qIDExMiAqLywNCi8qIDExMyAqLywNCi8qIDExNCAqLywNCi8qIDExNSAqLywNCi8qIDExNiAqLywNCi8qIDExNyAqLywNCi8qIDExOCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOw0KDQp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7DQoNCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsNCg0KdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsNCg0KdmFyIF9nZXQyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpOw0KDQp2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsNCg0KdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsNCg0KdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOw0KDQp2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOw0KDQp2YXIgX0RhdGFPYmplY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdDIpOw0KDQp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsNCg0KdmFyIF9EYXRhT2JqZWN0Q2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdENoaWxkKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQoNCnZhciBGaWx0ZXJUeXBlID0geyBBTlk6ICdhbnknLCBTVEFSVDogJ3N0YXJ0JywgRVhBQ1Q6ICdleGFjdCcgfTsNCg0KLyoqDQogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgU3luY2hlciBzdWJzY3JpYmUgY2FsbC4NCiAqIFRvIGJlIHVzZWQgYXMgYW4gb2JzZXJ2YXRpb24gcG9pbnQgZnJvbSBhIERhdGFPYmplY3RSZXBvcnRlciBjaGFuZ2UuDQogKi8NCg0KdmFyIERhdGFPYmplY3RPYnNlcnZlciA9IGZ1bmN0aW9uIChfRGF0YU9iamVjdCkgew0KICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIsIF9EYXRhT2JqZWN0KTsNCg0KICAvKiBwcml2YXRlDQogIF9jaGFuZ2VMaXN0ZW5lcjogTXNnTGlzdGVuZXINCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0NCiAgX2ZpbHRlcnM6IHs8ZmlsdGVyPjoge3R5cGU6IDxzdGFydCwgZXhhY3Q+LCBjYWxsYmFjazogPGZ1bmN0aW9uPn0gfQ0KICAqLw0KDQogIC8qKg0KICAgKiBAaWdub3JlDQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyLnN1YnNjcmliZSBtZXRob2QNCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3RPYnNlcnZlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucywgaW5pdGlhbFZlcnNpb24pIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0T2JzZXJ2ZXIpOw0KDQogICAgdmFyIF90aGlzMiA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKERhdGFPYmplY3RPYnNlcnZlci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyKSkuY2FsbCh0aGlzLCBzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEuZGF0YSwgY2hpbGRyZW5zKSk7DQoNCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7DQoNCiAgICBfdGhpcy5fdmVyc2lvbiA9IGluaXRpYWxWZXJzaW9uOw0KICAgIF90aGlzLl9maWx0ZXJzID0ge307DQoNCiAgICBfdGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgX3RoaXMuX29uRmlsdGVyKGV2ZW50KTsNCiAgICB9KTsNCg0KICAgIC8vc2V0dXAgY2hpbGRyZW5zIGRhdGEgZnJvbSBzdWJzY3JpcHRpb24NCiAgICAoMCwgX2tleXMyLmRlZmF1bHQpKGluaXRpYWxEYXRhLmNoaWxkcmVucykuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRJZCkgew0KICAgICAgdmFyIGNoaWxkRGF0YSA9IGluaXRpYWxEYXRhLmNoaWxkcmVuc1tjaGlsZElkXTsNCiAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0gPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgY2hpbGRJZCwgY2hpbGREYXRhKTsNCiAgICB9KTsNCg0KICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOw0KICAgIHJldHVybiBfdGhpczI7DQogIH0NCg0KICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIsIFt7DQogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgew0KICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX2FsbG9jYXRlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCArICcvY2hhbmdlcycsIGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgaWYgKG1zZy50eXBlID09PSAndXBkYXRlJykgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0T2JzZXJ2ZXItJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTsNCiAgICAgICAgICBfdGhpcy5fY2hhbmdlT2JqZWN0KF90aGlzLl9zeW5jT2JqLCBtc2cpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgew0KICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOw0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkZWxldGUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fb2JzZXJ2ZXJzW190aGlzLl91cmxdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICd1bnN1YnNjcmliZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25Mb2NhbFVuU3Vic2NyaWJlDQogICAgICB2YXIgdW5TdWJzY3JpYmVNc2cgPSB7DQogICAgICAgIHR5cGU6ICd1bnN1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsDQogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQ0KICAgICAgfTsNCg0KICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh1blN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0T2JzZXJ2ZXItVU5TVUJTQ1JJQkU6ICcsIHJlcGx5KTsNCiAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX29ic2VydmVyc1tfdGhpcy5fdXJsXTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVnaXN0ZXIgdGhlIGNoYW5nZSBsaXN0ZW5lcnMgc2VudCBieSB0aGUgcmVwb3J0ZXINCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIC0gRmlsdGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgZmllbGQgKHNlcGFyYXRlZCBkb3QgcGF0aCkuIEFjY2VwdHMgKiBhdCB0aGUgZW5kIGZvciBhIG1vcmUgdW5yZXN0cmljdGVkIGZpbHRlcmluZy4NCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uQ2hhbmdlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoZmlsdGVyLCBjYWxsYmFjaykgew0KICAgICAgdmFyIGtleSA9IGZpbHRlcjsNCiAgICAgIHZhciBmaWx0ZXJPYmogPSB7DQogICAgICAgIHR5cGU6IEZpbHRlclR5cGUuRVhBQ1QsDQogICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjaw0KICAgICAgfTsNCg0KICAgICAgdmFyIGlkeCA9IGZpbHRlci5pbmRleE9mKCcqJyk7DQogICAgICBpZiAoaWR4ID09PSBmaWx0ZXIubGVuZ3RoIC0gMSkgew0KICAgICAgICBpZiAoaWR4ID09PSAwKSB7DQogICAgICAgICAgZmlsdGVyT2JqLnR5cGUgPSBGaWx0ZXJUeXBlLkFOWTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuU1RBUlQ7DQogICAgICAgICAga2V5ID0gZmlsdGVyLnN1YnN0cigwLCBmaWx0ZXIubGVuZ3RoIC0gMSk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fZmlsdGVyc1trZXldID0gZmlsdGVyT2JqOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19vbkZpbHRlcicsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZpbHRlcihldmVudCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7DQogICAgICAgIHZhciBmaWx0ZXIgPSBfdGhpcy5fZmlsdGVyc1trZXldOw0KICAgICAgICBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuQU5ZKSB7DQogICAgICAgICAgLy9tYXRjaCBhbnl0aGluZw0KICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7DQogICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuU1RBUlQpIHsNCiAgICAgICAgICAvL2lmIHN0YXJ0cyB3aXRoIGZpbHRlci4uLg0KICAgICAgICAgIGlmIChldmVudC5maWVsZC5pbmRleE9mKGtleSkgPT09IDApIHsNCiAgICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci50eXBlID09PSBGaWx0ZXJUeXBlLkVYQUNUKSB7DQogICAgICAgICAgLy9leGFjdCBtYXRjaA0KICAgICAgICAgIGlmIChldmVudC5maWVsZCA9PT0ga2V5KSB7DQogICAgICAgICAgICBmaWx0ZXIuY2FsbGJhY2soZXZlbnQpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhT2JqZWN0T2JzZXJ2ZXI7DQp9KF9EYXRhT2JqZWN0My5kZWZhdWx0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyk7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RPYnNlcnZlcjsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDExOSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOw0KDQp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7DQoNCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsNCg0KdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsNCg0KdmFyIF9nZXQyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpOw0KDQp2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsNCg0KdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsNCg0KdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOw0KDQp2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOw0KDQp2YXIgX0RhdGFPYmplY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdDIpOw0KDQp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIHRoZSBTeW5jaGVyIGNyZWF0ZSBjYWxsLg0KICogVG8gYmUgdXNlZCBhcyBhIHJlcG9ydGVyIHBvaW50LCBjaGFuZ2VzIHdpbGwgYmUgc3VibWl0ZWQgdG8gRGF0YU9iamVjdE9ic2VydmVyIGluc3RhbmNlcy4NCiAqLw0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQoNCnZhciBEYXRhT2JqZWN0UmVwb3J0ZXIgPSBmdW5jdGlvbiAoX0RhdGFPYmplY3QpIHsNCiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLCBfRGF0YU9iamVjdCk7DQoNCiAgLyogcHJpdmF0ZQ0KICBfc3Vic2NyaXB0aW9uczogPGh5cGVydHlVcmw6IHsgc3RhdHVzOiBzdHJpbmcgfSB9Pg0KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQ0KICBfb25TdWJzY3JpcHRpb25IYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgX29uUmVzcG9uc2VIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgX29uUmVhZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICAqLw0KDQogIC8qKg0KICAgKiBAaWdub3JlDQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyLmNyZWF0ZSBtZXRob2QNCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3RSZXBvcnRlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RSZXBvcnRlcik7DQoNCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdFJlcG9ydGVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIpKS5jYWxsKHRoaXMsIHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSk7DQoNCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7DQoNCiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9Ow0KDQogICAgX3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItJyArIHVybCArICctU0VORDogJywgZXZlbnQpOw0KICAgICAgX3RoaXMuX29uQ2hhbmdlKGV2ZW50KTsNCiAgICB9KTsNCg0KICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOw0KICAgIHJldHVybiBfdGhpczI7DQogIH0NCg0KICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsIFt7DQogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgew0KICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLCAnX2FsbG9jYXRlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdC0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOw0KICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7DQogICAgICAgICAgY2FzZSAncmVzcG9uc2UnOg0KICAgICAgICAgICAgX3RoaXMuX29uUmVzcG9uc2UobXNnKTticmVhazsNCiAgICAgICAgICBjYXNlICdyZWFkJzoNCiAgICAgICAgICAgIF90aGlzLl9vblJlYWQobXNnKTticmVhazsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsNCiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlKSwgJ19yZWxlYXNlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lci5yZW1vdmUoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZW5kIGludml0YXRpb25zIChjcmVhdGUgbWVzc2FnZXMpIHRvIGh5cGVydGllcywgb2JzZXJ2ZXJzIGxpc3QuDQogICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTFtdfSBvYnNlcnZlcnMgTGlzdCBvZiBIeXBlcnR5IFVSTCdzDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2ludml0ZU9ic2VydmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIGludml0ZU9ic2VydmVycyhvYnNlcnZlcnMpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlDQogICAgICB2YXIgaW52aXRlTXNnID0gew0KICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX3N5bmNoZXIuX293bmVyLCB0bzogX3RoaXMuX3N5bmNoZXIuX3N1YlVSTCwNCiAgICAgICAgYm9keTogeyByZXN1bWU6IGZhbHNlLCByZXNvdXJjZTogX3RoaXMuX3VybCwgc2NoZW1hOiBfdGhpcy5fc2NoZW1hLCB2YWx1ZTogX3RoaXMuX3N5bmNPYmouZGF0YSwgYXV0aG9yaXNlOiBvYnNlcnZlcnMgfQ0KICAgICAgfTsNCg0KICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShpbnZpdGVNc2cpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkZWxldGUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25EZWxldGUNCiAgICAgIHZhciBkZWxldGVNc2cgPSB7DQogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLA0KICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsIH0NCiAgICAgIH07DQoNCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoZGVsZXRlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICcsIHJlcGx5KTsNCiAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX3JlcG9ydGVyc1tfdGhpcy5fdXJsXTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU3Vic2NyaXB0aW9ucyByZXF1ZXN0ZWQgYW5kIGFjY2VwdGVkIHRvIHRoaXMgcmVwb3J0ZXINCiAgICAgKiBAdHlwZSB7T2JqZWN0PEh5cGVydHlVUkwsIFN5bmNTdWJzY3JpcHRpb24+fQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdvblN1YnNjcmlwdGlvbicsDQoNCg0KICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9ucw0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHMNCiAgICAgKi8NCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJzY3JpcHRpb24oY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZSdzDQogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGV2ZW50cw0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdvblJlc3BvbnNlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNwb25zZShjYWxsYmFjaykgew0KICAgICAgdGhpcy5fb25SZXNwb25zZUhhbmRsZXIgPSBjYWxsYmFjazsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZWFkIG5vdGlmaWNhdGlvbnMNCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uUmVhZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVhZChjYWxsYmFjaykgew0KICAgICAgdGhpcy5fb25SZWFkSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHBhcmVudCBTeW5jaGVyIC0+IF9vbkZvcndhcmQNCg0KICB9LCB7DQogICAga2V5OiAnX29uRm9yd2FyZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZvcndhcmQobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogJywgbXNnKTsNCiAgICAgIHN3aXRjaCAobXNnLmJvZHkudHlwZSkgew0KICAgICAgICBjYXNlICdzdWJzY3JpYmUnOg0KICAgICAgICAgIF90aGlzLl9vblN1YnNjcmliZShtc2cpO2JyZWFrOw0KICAgICAgICBjYXNlICd1bnN1YnNjcmliZSc6DQogICAgICAgICAgX3RoaXMuX29uVW5TdWJzY3JpYmUobXNnKTticmVhazsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBzdWJzY3JpYmUNCg0KICB9LCB7DQogICAga2V5OiAnX29uU3Vic2NyaWJlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3Vic2NyaWJlKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHZhciBoeXBlcnR5VXJsID0gbXNnLmJvZHkuZnJvbTsNCg0KICAgICAgdmFyIGV2ZW50ID0gew0KICAgICAgICB0eXBlOiBtc2cuYm9keS50eXBlLA0KICAgICAgICB1cmw6IGh5cGVydHlVcmwsDQoNCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LA0KDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgew0KICAgICAgICAgIC8vY3JlYXRlIG5ldyBzdWJzY3JpcHRpb24NCiAgICAgICAgICB2YXIgc3ViID0geyB1cmw6IGh5cGVydHlVcmwsIHN0YXR1czogJ29uJyB9Ow0KICAgICAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdID0gc3ViOw0KDQogICAgICAgICAgLy9wcm9jZXNzIGFuZCBzZW5kIGNoaWxkcmVucyBkYXRhDQogICAgICAgICAgdmFyIGNoaWxkcmVuVmFsdWVzID0ge307DQogICAgICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZElkKSB7DQogICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXS5kYXRhOw0KICAgICAgICAgICAgY2hpbGRyZW5WYWx1ZXNbY2hpbGRJZF0gPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoY2hpbGREYXRhKTsNCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIC8vc2VuZCBvayByZXNwb25zZSBtZXNzYWdlDQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCB2YWx1ZTogeyBkYXRhOiAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoX3RoaXMuZGF0YSksIGNoaWxkcmVuczogY2hpbGRyZW5WYWx1ZXMgfSB9DQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICByZXR1cm4gc3ViOw0KICAgICAgICB9LA0KDQogICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikgew0KICAgICAgICAgIC8vc2VuZCByZWplY3QgcmVzcG9uc2UgbWVzc2FnZQ0KICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwMywgZGVzYzogcmVhc29uIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ1NVQlNDUklQVElPTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgRGF0YU9iamVjdE9ic2VydmVyIC0+IHVuc3Vic2NyaWJlDQoNCiAgfSwgew0KICAgIGtleTogJ19vblVuU3Vic2NyaWJlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uVW5TdWJzY3JpYmUobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGh5cGVydHlVcmwgPSBtc2cuYm9keS5mcm9tOw0KDQogICAgICB2YXIgc3ViID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07DQogICAgICBkZWxldGUgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLmJvZHkudHlwZSwNCiAgICAgICAgdXJsOiBoeXBlcnR5VXJsLA0KICAgICAgICBvYmplY3Q6IHN1Yg0KICAgICAgfTsNCg0KICAgICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ1VOLVNVQlNDUklQVElPTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBSZXBvcnRlclVSTCBhZGRyZXNzOiBlbWl0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBfb25SZW1vdGVDcmVhdGUgLT4gZXZlbnQuYWNrDQoNCiAgfSwgew0KICAgIGtleTogJ19vblJlc3BvbnNlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICB2YXIgZXZlbnQgPSB7DQogICAgICAgIHR5cGU6IG1zZy50eXBlLA0KICAgICAgICB1cmw6IG1zZy5mcm9tLA0KICAgICAgICBjb2RlOiBtc2cuYm9keS5jb2RlDQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdSRVNQT05TRS1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIFJlcG9ydGVyVVJMIGFkZHJlc3M6IGVtaXRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IHJlYWQNCg0KICB9LCB7DQogICAga2V5OiAnX29uUmVhZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlYWQobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICB2YXIgZXZlbnQgPSB7DQogICAgICAgIHR5cGU6IG1zZy50eXBlLA0KICAgICAgICB1cmw6IG1zZy5mcm9tLA0KDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgew0KICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6ICgwLCBfdXRpbHMuZGVlcENsb25lKShfdGhpcy5kYXRhKSB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7DQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDAxLCBkZXNjOiByZWFzb24gfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uUmVhZEhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ1JFQUQtRVZFTlQ6ICcsIGV2ZW50KTsNCiAgICAgICAgX3RoaXMuX29uUmVhZEhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ3N1YnNjcmlwdGlvbnMnLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnM7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhT2JqZWN0UmVwb3J0ZXI7DQp9KF9EYXRhT2JqZWN0My5kZWZhdWx0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyk7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RSZXBvcnRlcjsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDEyMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfcHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOw0KDQp2YXIgX3Byb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvbWlzZSk7DQoNCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOw0KDQp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfUHJveHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7DQoNCnZhciBfUHJveHlPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJveHlPYmplY3QpOw0KDQp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsNCg0KdmFyIF9EYXRhT2JqZWN0Q2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdENoaWxkKTsNCg0KdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQogKiBNYWluIGV4dGVuc2lvbiBjbGFzcyBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuDQogKiBDaGlsZHJlbiBtYW5hZ2VtZW50IGlzIGNvbW1vbiBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMuDQogKi8NCnZhciBEYXRhT2JqZWN0ID0gZnVuY3Rpb24gKCkgew0KICAvKiBwcml2YXRlDQogIF92ZXJzaW9uOiBudW1iZXINCiAgIF9vd25lcjogSHlwZXJ0eVVSTA0KICBfdXJsOiBPYmplY3RVUkwNCiAgX3NjaGVtYTogU2NoZW1hDQogIF9idXM6IE1pbmlCdXMNCiAgX3N0YXR1czogb24gfCBwYXVzZWQNCiAgX3N5bmNPYmo6IFN5bmNEYXRhDQogICBfY2hpbGRyZW46IHsgaWQ6IERhdGFPYmplY3RDaGlsZCB9DQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQ0KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQ0KICBfb25BZGRDaGlsZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICAqLw0KDQogIC8qKg0KICAgKiBAaWdub3JlDQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyIGNyZWF0ZSBvciBzdWJzY3JpYmUgbWV0aG9kJ3MNCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3Qoc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMpIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0KTsNCg0KICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICBfdGhpcy5fc3luY2hlciA9IHN5bmNoZXI7DQogICAgX3RoaXMuX3VybCA9IHVybDsNCiAgICBfdGhpcy5fc2NoZW1hID0gc2NoZW1hOw0KICAgIF90aGlzLl9zdGF0dXMgPSBpbml0aWFsU3RhdHVzOw0KICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7DQogICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVuczsNCg0KICAgIF90aGlzLl92ZXJzaW9uID0gMDsNCiAgICBfdGhpcy5fY2hpbGRJZCA9IDA7DQogICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0cyA9IHt9Ow0KICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOw0KDQogICAgX3RoaXMuX293bmVyID0gc3luY2hlci5fb3duZXI7DQogICAgX3RoaXMuX2J1cyA9IHN5bmNoZXIuX2J1czsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3QsIFt7DQogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgew0KICAgICAgdmFyIF90aGlzMiA9IHRoaXM7DQoNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIHZhciBjaGlsZEJhc2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nOw0KICAgICAgY29uc29sZS5sb2coJ1tEYXRhIE9iamVjdCAtIEFsbG9jYXRlTGlzdGVuZXJzXSAtICcsIF90aGlzLl9jaGlsZHJlbnMpOw0KICAgICAgaWYgKF90aGlzLl9jaGlsZHJlbnMpIHsNCiAgICAgICAgX3RoaXMuX2NoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgew0KICAgICAgICAgIHZhciBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOw0KICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYNCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gX3RoaXMyLl9vd25lcikgew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdC1DaGlsZHJlbi1SQ1Y6ICcsIG1zZyk7DQogICAgICAgICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGUnOg0KICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2hpbGRDcmVhdGUobXNnKTticmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOg0KICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTticmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5nZUNoaWxkcmVuKG1zZyk7YnJlYWs7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgew0KICAgICAgICBsaXN0ZW5lci5yZW1vdmUoKTsNCiAgICAgIH0pOw0KDQogICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgew0KICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2tleV0uX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIE9iamVjdCBVUkwgb2YgcmVwb3J0ZXIgb3Igb2JzZXJ2ZXINCiAgICAgKiBAdHlwZSB7T2JqZWN0VVJMfQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdwYXVzZScsDQoNCg0KICAgIC8qKg0KICAgICAqIEBpZ25vcmUNCiAgICAgKi8NCiAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7DQogICAgICAvL1RPRE86IHRoaXMgZmVhdHVyZSBuZWVkcyBtb3JlIGFuYWxpc2UNCiAgICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBpZ25vcmUNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAncmVzdW1lJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lKCkgew0KICAgICAgLy9UT0RPOiB0aGlzIGZlYXR1cmUgbmVlZHMgbW9yZSBhbmFsaXNlDQogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAaWdub3JlDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3N0b3AnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgew0KICAgICAgLy9UT0RPOiBzaG91bGQgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gYW5kIHNlbmQgbWVzc2FnZSB1bnN1YnNjcmliZT8NCiAgICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgRGF0YU9iamVjdENoaWxkIHRvIGEgY2hpbGRyZW4gY29sbGVjdGlvbi4NCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hpbGRyZW4gLSBDaGlsZHJlbiBuYW1lIHdoZXJlIHRoZSBjaGlsZCBpcyBhZGRlZC4NCiAgICAgKiBAcGFyYW0ge0pTT059IGluaXRpYWxEYXRhIC0gSW5pdGlhbCBkYXRhIG9mIHRoZSBjaGlsZA0KICAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdENoaWxkPn0gLSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBEYXRhT2JqZWN0Q2hpbGQuDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2FkZENoaWxkJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2hpbGQoY2hpbGRyZW4sIGluaXRpYWxEYXRhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAvL2NyZWF0ZSBuZXcgY2hpbGQgdW5pcXVlIElELCBiYXNlZCBvbiBoeXBlcnR5VVJMDQogICAgICBfdGhpcy5fY2hpbGRJZCsrOw0KICAgICAgdmFyIG1zZ0NoaWxkSWQgPSBfdGhpcy5fb3duZXIgKyAnIycgKyBfdGhpcy5fY2hpbGRJZDsNCiAgICAgIHZhciBtc2dDaGlsZFBhdGggPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nICsgY2hpbGRyZW47DQoNCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgZGlyZWN0bHkgdG8gYSByZXNvdXJjZSBjaGlsZCBhZGRyZXNzOiBNZXNzYWdlQnVzDQogICAgICB2YXIgcmVxdWVzdE1zZyA9IHsNCiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IG1zZ0NoaWxkUGF0aCwNCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogbXNnQ2hpbGRJZCwgdmFsdWU6IGluaXRpYWxEYXRhIH0NCiAgICAgIH07DQoNCiAgICAgIC8vcmV0dXJucyBwcm9taXNlLCBpbiB0aGUgZnV0dXJlLCB0aGUgQVBJIG1heSBjaGFuZ2UgdG8gYXN5bmNocm9ub3VzIGNhbGwNCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUpIHsNCiAgICAgICAgdmFyIG1zZ0lkID0gX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnKTsNCg0KICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAnICsgX3RoaXMuX293bmVyICsgJyApOiAnLCByZXF1ZXN0TXNnKTsNCiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3IF9EYXRhT2JqZWN0Q2hpbGQyLmRlZmF1bHQoX3RoaXMsIG1zZ0NoaWxkSWQsIGluaXRpYWxEYXRhLCBfdGhpcy5fb3duZXIsIG1zZ0lkKTsNCiAgICAgICAgbmV3Q2hpbGQub25DaGFuZ2UoZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgX3RoaXMuX29uQ2hhbmdlKGV2ZW50LCB7IHBhdGg6IG1zZ0NoaWxkUGF0aCwgY2hpbGRJZDogbXNnQ2hpbGRJZCB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1ttc2dDaGlsZElkXSA9IG5ld0NoaWxkOw0KDQogICAgICAgIHJlc29sdmUobmV3Q2hpbGQpOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgb2YgY2hpbGRyZW5zLg0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnb25BZGRDaGlsZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkQ2hpbGQoY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyID0gY2FsbGJhY2s7DQogICAgfQ0KDQogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBhZGRDaGlsZA0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25DaGlsZENyZWF0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoaWxkQ3JlYXRlKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHZhciBtc2dDaGlsZElkID0gbXNnLmJvZHkucmVzb3VyY2U7DQoNCiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIG1zZyk7DQogICAgICB2YXIgbmV3Q2hpbGQgPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgbXNnQ2hpbGRJZCwgbXNnLmJvZHkudmFsdWUpOw0KICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1ttc2dDaGlsZElkXSA9IG5ld0NoaWxkOw0KDQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgLy9GTE9XLU9VVDogd2lsbCBmbG93IHRvIERhdGFPYmplY3RDaGlsZCAtPiBfb25SZXNwb25zZQ0KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgc291cmNlOiBfdGhpcy5fb3duZXIgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KDQogICAgICB2YXIgZXZlbnQgPSB7DQogICAgICAgIHR5cGU6IG1zZy50eXBlLA0KICAgICAgICBmcm9tOiBtc2cuZnJvbSwNCiAgICAgICAgdXJsOiBtc2cudG8sDQogICAgICAgIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwNCiAgICAgICAgY2hpbGRJZDogbXNnQ2hpbGRJZCwNCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5DQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdBREQtQ0hJTERSRU4tRVZFTlQ6ICcsIGV2ZW50KTsNCiAgICAgICAgX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL3NlbmQgZGVsdGEgbWVzc2FnZXMgdG8gc3Vic2NyaXB0aW9ucw0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25DaGFuZ2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGFuZ2UoZXZlbnQsIGNoaWxkSW5mbykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX3ZlcnNpb24rKzsNCg0KICAgICAgaWYgKF90aGlzLl9zdGF0dXMgPT09ICdvbicpIHsNCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byBhIHJlc291cmNlIGNoYW5nZXMgYWRkcmVzczogTWVzc2FnZUJ1cw0KICAgICAgICB2YXIgY2hhbmdlTXNnID0gew0KICAgICAgICAgIHR5cGU6ICd1cGRhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogX3RoaXMuX3VybCArICcvY2hhbmdlcycsDQogICAgICAgICAgYm9keTogeyB2ZXJzaW9uOiBfdGhpcy5fdmVyc2lvbiwgc291cmNlOiBfdGhpcy5fb3duZXIsIGF0dHJpYnV0ZTogZXZlbnQuZmllbGQgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnNvbGUubG9nKCdbRGF0YU9iamVjdCAtIF9vbkNoYW5nZV0gLSAnLCBldmVudCwgY2hpbGRJbmZvLCBjaGFuZ2VNc2cpOw0KDQogICAgICAgIGlmIChldmVudC5vVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuT0JKRUNUKSB7DQogICAgICAgICAgaWYgKGV2ZW50LmNUeXBlICE9PSBfUHJveHlPYmplY3QuQ2hhbmdlVHlwZS5SRU1PVkUpIHsNCiAgICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY2hhbmdlTXNnLmJvZHkuYXR0cmlidXRlVHlwZSA9IGV2ZW50Lm9UeXBlOw0KICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsNCiAgICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlVQREFURSkgew0KICAgICAgICAgICAgY2hhbmdlTXNnLmJvZHkub3BlcmF0aW9uID0gZXZlbnQuY1R5cGU7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy9jaGlsZEluZm8gbXVzdCBoYXZlIChwYXRoLCBjaGlsZElkKQ0KICAgICAgICBpZiAoY2hpbGRJbmZvKSB7DQogICAgICAgICAgY2hhbmdlTXNnLnRvID0gY2hpbGRJbmZvLnBhdGg7DQogICAgICAgICAgY2hhbmdlTXNnLmJvZHkucmVzb3VyY2UgPSBjaGlsZEluZm8uY2hpbGRJZDsNCiAgICAgICAgfQ0KDQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoY2hhbmdlTXNnKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IGRlbHRhIG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgb3IgRGF0YU9iamVjdENoaWxkIHdoZW4gY2hhbmdpbmcgZGF0YQ0KDQogIH0sIHsNCiAgICBrZXk6ICdfY2hhbmdlT2JqZWN0JywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoYW5nZU9iamVjdChzeW5jT2JqLCBtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vVE9ETzogdXBkYXRlIHZlcnNpb24gPw0KICAgICAgLy9ob3cgdG8gaGFuZGxlIGFuIGluY29ycmVjdCB2ZXJzaW9uID8gRXhhbXBsZTogcmVjZWl2ZSBhIHZlcnNpb24gMyB3aGVuIHRoZSBvYnNlcnZlciBpcyBpbiB2ZXJzaW9uIDEsIHdoZXJlIGlzIHRoZSB2ZXJzaW9uIDIgPw0KICAgICAgLy93aWxsIHdlIG5lZWQgdG8gY29uZmlybSB0aGUgcmVjZXB0aW9uID8NCiAgICAgIGlmIChfdGhpcy5fdmVyc2lvbiArIDEgPT09IG1zZy5ib2R5LnZlcnNpb24pIHsNCiAgICAgICAgX3RoaXMuX3ZlcnNpb24rKzsNCiAgICAgICAgdmFyIHBhdGggPSBtc2cuYm9keS5hdHRyaWJ1dGU7DQogICAgICAgIHZhciB2YWx1ZSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShtc2cuYm9keS52YWx1ZSk7DQogICAgICAgIHZhciBmaW5kUmVzdWx0ID0gc3luY09iai5maW5kQmVmb3JlKHBhdGgpOw0KDQogICAgICAgIGlmIChtc2cuYm9keS5hdHRyaWJ1dGVUeXBlID09PSBfUHJveHlPYmplY3QuT2JqZWN0VHlwZS5BUlJBWSkgew0KICAgICAgICAgIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLkFERCkgew0KICAgICAgICAgICAgdmFyIGFyciA9IGZpbmRSZXN1bHQub2JqOw0KICAgICAgICAgICAgdmFyIGluZGV4ID0gZmluZFJlc3VsdC5sYXN0Ow0KICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhcnIsIFtpbmRleCwgMF0uY29uY2F0KHZhbHVlKSk7DQogICAgICAgICAgfSBlbHNlIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlJFTU9WRSkgew0KICAgICAgICAgICAgdmFyIF9hcnIgPSBmaW5kUmVzdWx0Lm9iajsNCiAgICAgICAgICAgIHZhciBfaW5kZXggPSBmaW5kUmVzdWx0Lmxhc3Q7DQogICAgICAgICAgICBfYXJyLnNwbGljZShfaW5kZXgsIHZhbHVlKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKG1zZy5ib2R5LnZhbHVlKSB7DQogICAgICAgICAgICBmaW5kUmVzdWx0Lm9ialtmaW5kUmVzdWx0Lmxhc3RdID0gdmFsdWU7IC8vIFVQREFURSBvciBBREQNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZGVsZXRlIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF07IC8vIFJFTU9WRQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy9UT0RPOiBob3cgdG8gaGFuZGxlIHVuc3luY2hyb25pemVkIHZlcnNpb25zPw0KICAgICAgICBjb25zb2xlLmxvZygnVU5TWU5DSFJPTklaRUQgVkVSU0lPTjogKGRhdGEgPT4gJyArIF90aGlzLl92ZXJzaW9uICsgJywgbXNnID0+ICcgKyBtc2cuYm9keS52ZXJzaW9uICsgJyknKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhDQoNCiAgfSwgew0KICAgIGtleTogJ19jaGFuZ2VDaGlsZHJlbicsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGFuZ2VDaGlsZHJlbihtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICBjb25zb2xlLmxvZygnQ2hhbmdlIGNoaWxkcmVuOiAnLCBfdGhpcy5fb3duZXIsIG1zZyk7DQoNCiAgICAgIHZhciBjaGlsZElkID0gbXNnLmJvZHkucmVzb3VyY2U7DQogICAgICB2YXIgY2hpbGRyZW4gPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdOw0KDQogICAgICBpZiAoY2hpbGRyZW4pIHsNCiAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChjaGlsZHJlbi5fc3luY09iaiwgbXNnKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICcsIGNoaWxkSWQpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ3VybCcsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fdXJsOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIE9iamVjdCBzY2hlbWEgVVJMICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQ0KICAgICAqIEB0eXBlIHtTY2hlbWFVUkx9DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3NjaGVtYScsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fc2NoZW1hOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFN0YXR1cyBvZiB0aGUgcmVwb3J0ZXIgb3Igb2JzZXJ2ZXIgY29ubmVjdGlvbiAodGhpcyBmaWVsZCBpcyBub3QgeWV0IHN0YWJsZSwgYW5kIGlzIHN1YnNqZWN0IHRvIGNoYW5nZSkNCiAgICAgKiBAdHlwZSB7U3RhdHVzfSAtIEVudW0gb2Y6IG9uIHwgcGF1c2VkDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3N0YXR1cycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fc3RhdHVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIERhdGEgc3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4NCiAgICAgKiBAdHlwZSB7SlNPTn0gLSBKU09OIHN0cnVjdHVyZSB0aGF0IHNob3VsZCBmb2xsb3cgdGhlIGRlZmluZWQgc2NoZW1hLCBpZiBhbnkuDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RhdGEnLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBBbGwgY3JlYXRlZCBjaGlsZHJlbidzIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIGRvZXNuJ3QgY29udGFpbiBhbGwgY2hpbGRyZW4ncyBzaW5jZSByZXBvcnRlciBjcmVhdGlvbi4NCiAgICAgKiBAdHlwZSB7T2JqZWN0PENoaWxkSWQsIERhdGFPYmplY3RDaGlsZD59DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2NoaWxkcmVucycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzOw0KICAgIH0NCiAgfV0pOw0KICByZXR1cm4gRGF0YU9iamVjdDsNCn0oKTsgLyoqDQogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KICAgICAqDQogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICAgICAqDQogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAgICAgKg0KICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAgICAgKiovDQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3Q7DQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsNCg0KLyoqKi8gfSksDQovKiAxMjEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsNCg0KdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOw0KDQp2YXIgX1Byb3h5T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOw0KDQp2YXIgX1Byb3h5T2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb3h5T2JqZWN0KTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgRGF0YU9iamVjdCBhZGRDaGlsZHJlbiBjYWxsIG9yIGZyb20gb25BZGRDaGlsZHJlbiBpZiByZW1vdGVseSBjcmVhdGVkLg0KICogQ2hpbGRyZW4gb2JqZWN0IHN5bmNocm9uaXphdGlvbiBpcyBhIGEgZmFzdCBmb3J3YXJkIG1lY2hhbmlzbSwgbm8gbmVlZCBmb3IgZGlyZWN0IHN1YnNjcmlwdGlvbnMsIGl0IHVzZXMgdGhlIGFscmVhZHkgYXV0aG9yaXplZCBzdWJzY3JpcHRpb24gZnJvbSB0aGUgcGFyZW50IERhdGFPYmplY3QuDQogKi8NCnZhciBEYXRhT2JqZWN0Q2hpbGQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovID0gZnVuY3Rpb24gKCkgew0KICAvKiBwcml2YXRlDQogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9vblJlc3BvbnNlSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkDQogICovDQoNCiAgLyoqDQogICAqIEBpZ25vcmUNCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIERhdGFPYmplY3QuYWRkQ2hpbGRyZW4NCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3RDaGlsZChwYXJlbnQsIGNoaWxkSWQsIGluaXRpYWxEYXRhLCBvd25lciwgbXNnSWQpIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0Q2hpbGQpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7DQogICAgX3RoaXMuX2NoaWxkSWQgPSBjaGlsZElkOw0KICAgIF90aGlzLl9vd25lciA9IG93bmVyOw0KICAgIF90aGlzLl9tc2dJZCA9IG1zZ0lkOw0KDQogICAgX3RoaXMuX3N5bmNPYmogPSBuZXcgX1Byb3h5T2JqZWN0Mi5kZWZhdWx0KGluaXRpYWxEYXRhKTsNCg0KICAgIF90aGlzLl9idXMgPSBwYXJlbnQuX2J1czsNCiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RDaGlsZCwgW3sNCiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAvL3RoaXMgaXMgb25seSBuZWVkZWQgZm9yIGNoaWxkcmVuIHJlcG9ydGVycw0KICAgICAgaWYgKF90aGlzLl9vd25lcikgew0KICAgICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl9vd25lciwgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiBtc2cuaWQgPT09IF90aGlzLl9tc2dJZCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOicsIG1zZyk7DQogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIGlmIChfdGhpcy5fbGlzdGVuZXIpIHsNCiAgICAgICAgX3RoaXMuX2xpc3RlbmVyLnJlbW92ZSgpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkZWxldGUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX2NoaWxkcmVuW190aGlzLl9jaGlsZElkXTsNCg0KICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCg0KICAgICAgLy9UT0RPOiBzZW5kIGRlbGV0ZSBtZXNzYWdlID8NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBDaGlsZHJlbiBJRCBnZW5lcmF0ZWQgb24gYWRkQ2hpbGRyZW4uIFVuaXF1ZSBpZGVudGlmaWVyDQogICAgICogQHR5cGUge1VSTH0gLSBVUkwgb2YgdGhlIGZvcm1hdCA8SHlwZXJ0eVVSTD4jPG51bWVyaWMtc2VxdWVuY2U+DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uQ2hhbmdlJywNCg0KDQogICAgLyoqDQogICAgICogUmVnaXN0ZXIgdGhlIGNoYW5nZSBsaXN0ZW5lcnMgc2VudCBieSB0aGUgcmVwb3J0ZXIgY2hpbGQNCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIGNhbGxiYWNrKGV2ZW50KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZXMNCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uUmVzcG9uc2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9vblJlc3BvbnNlSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3QgLT4gX29uQ2hpbGRDcmVhdGUNCg0KICB9LCB7DQogICAga2V5OiAnX29uUmVzcG9uc2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZXNwb25zZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLnR5cGUsDQogICAgICAgIHVybDogbXNnLmJvZHkuc291cmNlLA0KICAgICAgICBjb2RlOiBtc2cuYm9keS5jb2RlDQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKSB7DQogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnY2hpbGRJZCcsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fY2hpbGRJZDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBEYXRhIFN0cnVjdHVyZSB0byBiZSBzeW5jaHJvbml6ZWQuDQogICAgICogQHR5cGUge0pTT059IC0gSlNPTiBzdHJ1Y3R1cmUgdGhhdCBzaG91bGQgZm9sbG93IHRoZSBkZWZpbmVkIHNjaGVtYSwgaWYgYW55Lg0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkYXRhJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9zeW5jT2JqLmRhdGE7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhT2JqZWN0Q2hpbGQ7DQp9KCk7IC8qKg0KICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQogICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQogICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQogICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCiAgICAgKg0KICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICAgKg0KICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogICAgICoNCiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgICoqLw0KDQpleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0Q2hpbGQ7DQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsNCg0KLyoqKi8gfSksDQovKiAxMjIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KZXhwb3J0cy5PYmplY3RUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0gdW5kZWZpbmVkOw0KDQp2YXIgX3N0cmluZ2lmeSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOw0KDQp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsNCg0KdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOw0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCi8qKg0KICogQGFjY2VzcyBwcml2YXRlDQogKiBNYWluIGNsYXNzIHRoYXQgbWFpbnRhaW5zIGEgSlNPTiBvYmplY3QsIGFuZCBvYnNlcnZlcyBjaGFuZ2VzIGluIHRoaXMgb2JqZWN0LCByZWN1cnNpdmVseS4NCiAqIEludGVybmFsIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgYWxzbyBvYnNlcnZlZC4NCiAqLw0KdmFyIFN5bmNPYmplY3QgPSBmdW5jdGlvbiAoKSB7DQogIGZ1bmN0aW9uIFN5bmNPYmplY3QoaW5pdGlhbERhdGEpIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTeW5jT2JqZWN0KTsNCg0KICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0gW107DQogICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsNCg0KICAgIHRoaXMuX2RhdGEgPSBpbml0aWFsRGF0YSB8fCB7fTsNCg0KICAgIHRoaXMuX2ludGVybmFsT2JzZXJ2ZSh0aGlzLl9kYXRhKTsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNPYmplY3QsIFt7DQogICAga2V5OiAnb2JzZXJ2ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmUoY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29ic2VydmVycy5wdXNoKGNhbGxiYWNrKTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdmaW5kJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZChwYXRoKSB7DQogICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsNCg0KICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQobGlzdCk7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnZmluZEJlZm9yZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRCZWZvcmUocGF0aCkgew0KICAgICAgdmFyIHJlc3VsdCA9IHt9Ow0KICAgICAgdmFyIGxpc3QgPSBwYXRoLnNwbGl0KCcuJyk7DQogICAgICByZXN1bHQubGFzdCA9IGxpc3QucG9wKCk7DQogICAgICByZXN1bHQub2JqID0gdGhpcy5fZmluZFdpdGhTcGxpdChsaXN0KTsNCg0KICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfZmluZFdpdGhTcGxpdCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5kV2l0aFNwbGl0KGxpc3QpIHsNCiAgICAgIHZhciBvYmogPSB0aGlzLl9kYXRhOw0KICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgICAgICBvYmogPSBvYmpbdmFsdWVdOw0KICAgICAgfSk7DQoNCiAgICAgIHJldHVybiBvYmo7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX2lzT2JzZXJ2YWJsZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9pc09ic2VydmFibGUob2JqKSB7DQogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19pbnRlcm5hbE9ic2VydmUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfaW50ZXJuYWxPYnNlcnZlKG9iamVjdCkgew0KICAgICAgdmFyIF90aGlzMiA9IHRoaXM7DQoNCiAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihjaGFuZ2VzZXQpIHsNCg0KICAgICAgICBjaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7DQogICAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSAmJiBjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHsNCiAgICAgICAgICAgIGlmIChjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHsNCiAgICAgICAgICAgICAgdmFyIG8gPSBPYmplY3QuZGVlcE9ic2VydmUoY2hhbmdlLm5ld1ZhbHVlLCBoYW5kbGVyKTsNCiAgICAgICAgICAgICAgb2JqZWN0W2NoYW5nZS5rZXlwYXRoXSA9IG87DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgICAgICAgICB2YXIgX28gPSBBcnJheS5vYnNlcnZlKGNoYW5nZS5uZXdWYWx1ZSwgaGFuZGxlcik7DQogICAgICAgICAgICAgIG9iamVjdFtjaGFuZ2Uua2V5cGF0aF0gPSBfbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIGNoYW5nZXNldC5ldmVyeShmdW5jdGlvbiAoY2hhbmdlKSB7DQogICAgICAgICAgX3RoaXMyLl9vbkNoYW5nZXMoY2hhbmdlKTsNCiAgICAgICAgfSk7DQogICAgICB9Ow0KDQogICAgICB0aGlzLl9kYXRhID0gT2JqZWN0LmRlZXBPYnNlcnZlKG9iamVjdCwgaGFuZGxlcik7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX2ZpcmVFdmVudCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9maXJlRXZlbnQoZXZlbnQpIHsNCiAgICAgIHRoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgICAgICBjYWxsYmFjayhldmVudCk7DQogICAgICB9KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfb25DaGFuZ2VzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2hhbmdlcyhjaGFuZ2UpIHsNCg0KICAgICAgdmFyIG9iaiA9IGNoYW5nZS5vYmplY3Q7DQogICAgICB2YXIgb2JqVHlwZSA9IHZvaWQgMDsNCg0KICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7DQogICAgICAgIG9ialR5cGUgPSBPYmplY3RUeXBlLk9CSkVDVDsNCiAgICAgIH0NCg0KICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHsNCiAgICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuQVJSQVk7DQogICAgICB9DQoNCiAgICAgIHZhciBmaWVsZFN0cmluZyA9IGNoYW5nZS5rZXlwYXRoOw0KDQogICAgICAvLyBjb25zb2xlLmxvZygnRmllbGQ6JywgZmllbGRTdHJpbmcpOw0KICAgICAgLy8gY29uc29sZS5sb2coJ3R5cGU6JywgY2hhbmdlLnR5cGUpOw0KDQogICAgICAvL2xldCBvbGRWYWx1ZSA9IGNoYW5nZS5vbGRWYWx1ZTsNCiAgICAgIHZhciBuZXdWYWx1ZSA9IG9ialtjaGFuZ2UubmFtZV07DQoNCiAgICAgIGNvbnNvbGUuaW5mbyhjaGFuZ2UudHlwZSArICcgfCBGaWVsZDogJyArIGZpZWxkU3RyaW5nICsgJyB8IE5ldyBWYWx1ZTonLCAoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkobmV3VmFsdWUpKTsNCg0KICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAndXBkYXRlJykgew0KICAgICAgICB0aGlzLl9maXJlRXZlbnQoew0KICAgICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLlVQREFURSwNCiAgICAgICAgICBvVHlwZTogb2JqVHlwZSwNCiAgICAgICAgICBmaWVsZDogZmllbGRTdHJpbmcsDQogICAgICAgICAgZGF0YTogbmV3VmFsdWUNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2FkZCcpIHsNCiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsNCiAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5BREQsDQogICAgICAgICAgb1R5cGU6IG9ialR5cGUsDQogICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nLA0KICAgICAgICAgIGRhdGE6IG5ld1ZhbHVlDQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICdkZWxldGUnKSB7DQogICAgICAgIHRoaXMuX2ZpcmVFdmVudCh7DQogICAgICAgICAgY1R5cGU6IENoYW5nZVR5cGUuUkVNT1ZFLA0KICAgICAgICAgIG9UeXBlOiBvYmpUeXBlLA0KICAgICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdkYXRhJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9kYXRhOw0KICAgIH0NCiAgfV0pOw0KICByZXR1cm4gU3luY09iamVjdDsNCn0oKTsNCg0KdmFyIENoYW5nZVR5cGUgPSBleHBvcnRzLkNoYW5nZVR5cGUgPSB7IFVQREFURTogJ3VwZGF0ZScsIEFERDogJ2FkZCcsIFJFTU9WRTogJ3JlbW92ZScgfTsNCnZhciBPYmplY3RUeXBlID0gZXhwb3J0cy5PYmplY3RUeXBlID0geyBPQkpFQ1Q6ICdvYmplY3QnLCBBUlJBWTogJ2FycmF5JyB9Ow0KZXhwb3J0cy5kZWZhdWx0ID0gU3luY09iamVjdDsNCg0KLyoqKi8gfSksDQovKiAxMjMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7DQoNCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7DQoNCnZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpOw0KDQp2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsNCiAgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOw0KICB2YXIgZGVzYyA9ICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMi5kZWZhdWx0KShvYmplY3QsIHByb3BlcnR5KTsNCg0KICBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7DQogICAgdmFyIHBhcmVudCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKG9iamVjdCk7DQoNCiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7DQogICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsNCiAgICB9DQogIH0gZWxzZSBpZiAoInZhbHVlIiBpbiBkZXNjKSB7DQogICAgcmV0dXJuIGRlc2MudmFsdWU7DQogIH0gZWxzZSB7DQogICAgdmFyIGdldHRlciA9IGRlc2MuZ2V0Ow0KDQogICAgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7DQogICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgIH0NCg0KICAgIHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7DQogIH0NCn07DQoNCi8qKiovIH0pLA0KLyogMTI0ICovLA0KLyogMTI1ICovLA0KLyogMTI2ICovLA0KLyogMTI3ICovLA0KLyogMTI4ICovLA0KLyogMTI5ICovLA0KLyogMTMwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7DQoNCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsNCg0KdmFyIF9hc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNik7DQoNCnZhciBfYXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Fzc2lnbik7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpOw0KDQp2YXIgX0RhdGFPYmplY3RSZXBvcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0UmVwb3J0ZXIpOw0KDQp2YXIgX0RhdGFPYmplY3RPYnNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsNCg0KdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdE9ic2VydmVyKTsNCg0KdmFyIF9EYXRhUHJvdmlzaW9uYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMyk7DQoNCnZhciBfRGF0YVByb3Zpc2lvbmFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFQcm92aXNpb25hbCk7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCi8qKg0KKiBUaGUgbWFpbiBjbGFzcyBmb3IgdGhlIHN5bmNoZXIgcGFja2FnZS4NCiogVGhlIFN5bmNoZXIgaXMgYSBzaW5nbGV0b24gY2xhc3MgcGVyIEh5cGVydHkvVVJMIGFuZCBpdCBpcyB0aGUgb3duZXIgb2YgYWxsIGNyZWF0ZWQgRGF0YSBTeW5jIE9iamVjdHMgYWNjb3JkaW5nIHRvIHRoZSBSZXBvcnRlciAtIE9ic2VydmVyIHBhdHRlcm4uDQoqIE1haW4gZnVuY3Rpb25hbGl0eSBpcyB0byBjcmVhdGUgcmVwb3J0ZXJzIGFuZCB0byBzdWJzY3JpYmUgdG8gZXhpc3Rpbmcgb25lcy4NCiovDQp2YXIgU3luY2hlciA9IGZ1bmN0aW9uICgpIHsNCiAgLyogcHJpdmF0ZQ0KICBfb3duZXI6IFVSTA0KICBfYnVzOiBNaW5pQnVzDQogICBfc3ViVVJMOiBVUkwNCiAgIF9yZXBvcnRlcnM6IDx1cmw6IERhdGFPYmplY3RSZXBvcnRlcj4NCiAgX29ic2VydmVyczogPHVybDogRGF0YU9iamVjdE9ic2VydmVyPg0KICBfcHJvdmlzaW9uYWxzOiA8dXJsOiBEYXRhUHJvdmlzaW9uYWw+DQogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICBfb25SZXN1bWU6IChldmVudCkgPT4gdm9pZA0KICAqLw0KDQogIC8qKg0KICAqIENvbnN0cnVjdG9yIHRoYXQgc2hvdWxkIGJlIHVzZWQgYnkgdGhlIEh5cGVydHkgb3duZXINCiAgKiBAcGFyYW0ge0h5cGVydHlVUkx9IG93bmVyIC0gSHlwZXJ0eSBVUkwgb3duZXIuIEFuIFVSTCBhbGxvY2F0ZWQgYnkgdGhlIHJ1bnRpbWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBIeXBlcnR5Lg0KICAqIEBwYXJhbSB7TWluaUJ1c30gYnVzIC0gQW4gaW5zdGFuY2Ugb2YgdGhlIE1pbmlCdXMgcHJvdmlkZWQgaW4gdGhlIHNhbmRib3guIFdoZW4gYW4gb2JqZWN0IChSZXBvcnRlciBvciBPYnNlcnZlZCkgaXMgY3JlYXRlZCwgdGhlIFN5bmNoZXJNYW5hZ2VyIHdpbGwgYWRkIGEgbGlzdGVuZXIgaW4gdGhlIE1pbmlCdXMgdG8gcmVjZWl2ZS9zZW5kIE1lc3NhZ2VzIG9mIHRoYXQgb2JqZWN0Lg0KICAqIEBwYXJhbSB7SlNPTn0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBkYXRhLiBUaGUgb25seSByZXF1aXJlZCBmaWVsZCBmb3Igbm93IGlzIHRoZSBydW50aW1lVVJMLg0KICAqLw0KICBmdW5jdGlvbiBTeW5jaGVyKG93bmVyLCBidXMsIGNvbmZpZykgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFN5bmNoZXIpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgIF90aGlzLl9vd25lciA9IG93bmVyOw0KICAgIF90aGlzLl9idXMgPSBidXM7DQoNCiAgICBfdGhpcy5fc3ViVVJMID0gY29uZmlnLnJ1bnRpbWVVUkwgKyAnL3NtJzsNCg0KICAgIF90aGlzLl9yZXBvcnRlcnMgPSB7fTsNCiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307DQogICAgX3RoaXMuX3Byb3Zpc2lvbmFscyA9IHt9Ow0KDQogICAgYnVzLmFkZExpc3RlbmVyKG93bmVyLCBmdW5jdGlvbiAobXNnKSB7DQogICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmDQogICAgICBpZiAobXNnLmZyb20gIT09IG93bmVyKSB7DQogICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIFN5bmNoZXItUkNWOiAnLCBtc2cpOw0KICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7DQogICAgICAgICAgY2FzZSAnZm9yd2FyZCc6DQogICAgICAgICAgICBfdGhpcy5fb25Gb3J3YXJkKG1zZyk7YnJlYWs7DQogICAgICAgICAgY2FzZSAnY3JlYXRlJzoNCiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZUNyZWF0ZShtc2cpO2JyZWFrOw0KICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6DQogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVEZWxldGUobXNnKTticmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0pOw0KICB9DQoNCiAgLyoqDQogICogVGhlIG93bmVyIG9mIHRoZSBTeW5jaGVyIGFuZCBhbGwgY3JlYXRlZCByZXBvcnRlcnMuDQogICogQHR5cGUge0h5cGVydHlVUkx9DQogICovDQoNCg0KICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShTeW5jaGVyLCBbew0KICAgIGtleTogJ2NyZWF0ZScsDQoNCg0KICAgIC8qKg0KICAgICogUmVxdWVzdCBhIERhdGFPYmplY3RSZXBvcnRlciBjcmVhdGlvbi4gVGhlIFVSTCB3aWxsIGJlIGJlIHJlcXVlc3RlZCBieSB0aGUgYWxsb2NhdGlvbiBtZWNoYW5pc20uDQogICAgKiBAcGFyYW0gIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQ0KICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTFtdfSBvYnNlcnZlcnMgLSBMaXN0IG9mIGh5cGVydGllcyB0aGF0IGFyZSBwcmUtYXV0aG9yaXplZCBmb3Igc3Vic2NyaXB0aW9uDQogICAgKiBAcGFyYW0gIHtKU09OfSBpbml0aWFsRGF0YSAtIEluaXRpYWwgZGF0YSBvZiB0aGUgcmVwb3J0ZXINCiAgICAqIEBwYXJhbSAge3N0cmluZ30gb2JqZWN0VVJMIC0gcmV1c2FibGUgZGF0YU9iamVjdCBVUkwNCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdFJlcG9ydGVyPn0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgUmVwb3J0ZXIuIFRoZSByZXBvcnRlciBjYW4gYmUgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQgYnkgdGhlIFBFUA0KICAgICovDQogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShzY2hlbWEsIG9ic2VydmVycywgaW5pdGlhbERhdGEpIHsNCiAgICAgIHZhciBzdG9yZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7DQogICAgICB2YXIgcDJwID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiBmYWxzZTsNCg0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHZhciBjcml0ZXJpYSA9IHt9Ow0KDQogICAgICBjcml0ZXJpYS5wMnAgPSBwMnA7DQogICAgICBjcml0ZXJpYS5zdG9yZSA9IHN0b3JlOw0KICAgICAgY3JpdGVyaWEuc2NoZW1hID0gc2NoZW1hOw0KICAgICAgY3JpdGVyaWEub2JzZXJ2ZXJzID0gb2JzZXJ2ZXJzOw0KICAgICAgY3JpdGVyaWEuaW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTsNCg0KICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBSZXBvcnRlciAtIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7DQoNCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IGZhbHNlIH0pOw0KDQogICAgICByZXR1cm4gX3RoaXMuX2NyZWF0ZShjcml0ZXJpYSk7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAncmVzdW1lUmVwb3J0ZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lUmVwb3J0ZXJzKGNyaXRlcmlhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBSZXBvcnRlciAtIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7DQoNCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IHRydWUgfSk7DQoNCiAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlKGNyaXRlcmlhKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFJlcXVlc3QgYSBzdWJzY3JpcHRpb24gdG8gYW4gZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0Lg0KICAgICogQHBhcmFtIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQ0KICAgICogQHBhcmFtIHtPYmplY3RVUkx9IG9ialVSTCAtIEFkZHJlc3Mgb2YgdGhlIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdCB0byBiZSBvYnNlcnZlZA0KICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0T2JzZXJ2ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBvYnNlcnZlci4gSXQncyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcG9ydGVyLg0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3N1YnNjcmliZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZShzY2hlbWEsIG9ialVSTCkgew0KICAgICAgdmFyIHN0b3JlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsNCiAgICAgIHZhciBwMnAgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOw0KDQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGNyaXRlcmlhID0ge307DQoNCiAgICAgIGNyaXRlcmlhLnAycCA9IHAycDsNCiAgICAgIGNyaXRlcmlhLnN0b3JlID0gc3RvcmU7DQogICAgICBjcml0ZXJpYS5zY2hlbWEgPSBzY2hlbWE7DQogICAgICBjcml0ZXJpYS5yZXNvdXJjZSA9IG9ialVSTDsNCg0KICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gc3Vic2NyaWJlXSAtIHN1YnNjcmliZSBjcml0ZXJpYTogJywgY3JpdGVyaWEpOw0KDQogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiBmYWxzZSB9KTsNCg0KICAgICAgcmV0dXJuIF90aGlzLl9zdWJzY3JpYmUoY3JpdGVyaWEpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogUmVxdWVzdCBhIHN1YnNjcmlwdGlvbiB0byBhbiBleGlzdGVudCByZXBvcnRlciBvYmplY3QuDQogICAgKiBAcGFyYW0ge2NyaXRlcmlhfSBjcml0ZXJpYSAtIEluZm9ybWF0aW9uIHRvIGRpc2NvdmVyeSB0aGUgb2JzZXJ2ZXIgb2JqZWN0DQogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RPYnNlcnZlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IG9ic2VydmVyLiBJdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVwb3J0ZXIuDQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAncmVzdW1lT2JzZXJ2ZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lT2JzZXJ2ZXJzKGNyaXRlcmlhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIF9jcml0ZXJpYSA9IGNyaXRlcmlhIHx8IHt9Ow0KDQogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoX2NyaXRlcmlhLCB7IHJlc3VtZTogdHJ1ZSB9KTsNCg0KICAgICAgcmV0dXJuIF90aGlzLl9zdWJzY3JpYmUoX2NyaXRlcmlhKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFJlcXVlc3QgYSByZWFkIGFjdGlvbiBvbiB0aGUgcmVwb3J0ZXIgb2JqZWN0DQogICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gVVJMIG9mIHRoZSByZXBvcnRlciBvYmplY3QgdG8gYmUgcmVhZA0KICAgICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q+fSBSZXR1cm4gUHJvbWlzZSB0byBsYXN0IGF2YWlsYWJsZSBkYXRhIG9mIHRoZSByZXBvcnRlcg0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3JlYWQnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkKG9ialVSTCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byByZXBvcnRlciBvYmplY3QgKG1heWJlIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGF2YWlsYWJsZSwgc28gaXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIE1lc3NhZ2VCdXMgLT4gcmVzb2x2ZSkNCiAgICAgIC8vd2lsbCByZWFjaCB0aGUgcmVtb3RlIG9iamVjdCBpbiBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gX29uUmVhZA0KICAgICAgdmFyIHJlYWRNc2cgPSB7DQogICAgICAgIHR5cGU6ICdyZWFkJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogb2JqVVJMDQogICAgICB9Ow0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZWFkTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygncmVhZC1yZXNwb25zZTogJywgcmVwbHkpOw0KICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LnZhbHVlKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgZXZlbnRzIG9mIHJlbW92ZSBSZXBvcnRlciBvYmplY3RzLg0KICAgICogVGhpcyBpcyByZWxlYXRlZCB0byB0aGUgbWVzc2FnZW5zIHNlbnQgYnkgY3JlYXRlIHRvIHRoZSBvYnNlcnZlcnMgSHlwZXJ0eSBhcnJheS4NCiAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdvbk5vdGlmaWNhdGlvbicsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTm90aWZpY2F0aW9uKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIgPSBjYWxsYmFjazsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfY3JlYXRlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZShjcml0ZXJpYSkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIHZhciByZXN1bWUgPSBjcml0ZXJpYS5yZXN1bWU7DQogICAgICAgIHZhciBpbml0aWFsRGF0YSA9IGNyaXRlcmlhLmluaXRpYWxEYXRhIHx8IHt9Ow0KICAgICAgICB2YXIgc2NoZW1hID0gdm9pZCAwOw0KDQogICAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlDQogICAgICAgIHZhciByZXF1ZXN0TXNnID0gew0KICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLA0KICAgICAgICAgIGJvZHk6IHsgcmVzdW1lOiByZXN1bWUgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV06ICcsIGNyaXRlcmlhLCByZXF1ZXN0TXNnKTsNCg0KICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUgPSBpbml0aWFsRGF0YTsNCiAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnZhbHVlLnJlcG9ydGVyID0gX3RoaXMuX293bmVyOw0KDQogICAgICAgIGlmIChjcml0ZXJpYS5zY2hlbWEpIHsNCiAgICAgICAgICBzY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7DQogICAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChjcml0ZXJpYS5wMnApIHJlcXVlc3RNc2cuYm9keS5wMnAgPSBjcml0ZXJpYS5wMnA7DQogICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgcmVxdWVzdE1zZy5ib2R5LnN0b3JlID0gY3JpdGVyaWEuc3RvcmU7DQogICAgICAgIGlmIChjcml0ZXJpYS5vYnNlcnZlcnMpIHJlcXVlc3RNc2cuYm9keS5hdXRob3Jpc2UgPSBjcml0ZXJpYS5vYnNlcnZlcnM7DQoNCiAgICAgICAgaWYgKHJlc3VtZSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSByZXN1bWUgbWVzc2FnZTogJywgcmVxdWVzdE1zZyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vcmVxdWVzdCBjcmVhdGUgdG8gdGhlIGFsbG9jYXRpb24gc3lzdGVtLiBDYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIFBvbGljeUVuZ2luZS4NCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlLXJlc3BvbnNlOiAnLCByZXBseSk7DQogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIGFjY2VwdGVkDQogICAgICAgICAgICB2YXIgb2JqVVJMID0gcmVwbHkuYm9keS5yZXNvdXJjZTsNCg0KICAgICAgICAgICAgaWYgKHJlc3VtZSkgew0KICAgICAgICAgICAgICBzY2hlbWEgPSByZXBseS5ib2R5LnNjaGVtYTsNCiAgICAgICAgICAgICAgaW5pdGlhbERhdGEgPSByZXBseS5ib2R5LnZhbHVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCBpbml0aWFsRGF0YSwgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcyk7DQogICAgICAgICAgICBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF0gPSBuZXdPYmo7DQoNCiAgICAgICAgICAgIHJlc29sdmUobmV3T2JqKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy9yZXBvcnRlciBjcmVhdGlvbiByZWplY3RlZA0KICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19zdWJzY3JpYmUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfc3Vic2NyaWJlKGNyaXRlcmlhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCg0KICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsU3Vic2NyaWJlDQogICAgICAgIHZhciBzdWJzY3JpYmVNc2cgPSB7DQogICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsDQogICAgICAgICAgYm9keToge30NCiAgICAgICAgfTsNCg0KICAgICAgICAvLyBIeXBlcnR5IHJlcXVlc3QgdG8gYmUgYW4gT2JzZXJ2ZXINCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjaHlwZXJ0eS1yZXF1ZXN0LXRvLWJlLWFuLW9ic2VydmVyDQoNCiAgICAgICAgLy8gUmVzdW1lIFN1YnNjcmlwdGlvbnMgZm9yIHRoZSBzYW1lIEh5cGVydHkgVVJMDQogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci10aGUtc2FtZS1oeXBlcnR5LXVybA0KDQogICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciBhIGNlcnRhaW4gdXNlciBhbmQgZGF0YSBzY2hlbWEgaW5kZXBlbmRlbnRseSBvZiB0aGUgSHlwZXJ0eSBVUkwuDQogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci1hLWNlcnRhaW4tdXNlci1hbmQtZGF0YS1zY2hlbWEtaW5kZXBlbmRlbnRseS1vZi10aGUtaHlwZXJ0eS11cmwNCiAgICAgICAgaWYgKGNyaXRlcmlhKSB7DQogICAgICAgICAgaWYgKGNyaXRlcmlhLnAycCkgc3Vic2NyaWJlTXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOw0KICAgICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgc3Vic2NyaWJlTXNnLmJvZHkuc3RvcmUgPSBjcml0ZXJpYS5zdG9yZTsNCiAgICAgICAgICBpZiAoY3JpdGVyaWEuc2NoZW1hKSBzdWJzY3JpYmVNc2cuYm9keS5zY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7DQogICAgICAgICAgaWYgKGNyaXRlcmlhLmlkZW50aXR5KSBzdWJzY3JpYmVNc2cuYm9keS5pZGVudGl0eSA9IGNyaXRlcmlhLmlkZW50aXR5Ow0KICAgICAgICAgIGlmIChjcml0ZXJpYS5yZXNvdXJjZSkgc3Vic2NyaWJlTXNnLmJvZHkucmVzb3VyY2UgPSBjcml0ZXJpYS5yZXNvdXJjZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN1YnNjcmliZU1zZy5ib2R5LnJlc3VtZSA9IGNyaXRlcmlhLnJlc3VtZTsNCg0KICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlIG1lc3NhZ2U6ICcsIGNyaXRlcmlhLCBzdWJzY3JpYmVNc2cpOw0KDQogICAgICAgIC8vcmVxdWVzdCBzdWJzY3JpcHRpb24NCiAgICAgICAgLy9Qcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uDQogICAgICAgIC8vZm9yIG1vcmUgaW5mbyBzZWUgdGhlIERhdGFQcm92aXNpb25hbCBjbGFzcyBkb2N1bWVudGF0aW9uLg0KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIHN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOw0KDQogICAgICAgICAgdmFyIHNjaGVtYSA9IHJlcGx5LmJvZHkuc2NoZW1hOw0KICAgICAgICAgIHZhciBvYmpVUkwgPSByZXBseS5ib2R5LnJlc291cmNlOw0KDQogICAgICAgICAgdmFyIG5ld1Byb3Zpc2lvbmFsID0gX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOw0KICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF07DQogICAgICAgICAgaWYgKG5ld1Byb3Zpc2lvbmFsKSBuZXdQcm92aXNpb25hbC5fcmVsZWFzZUxpc3RlbmVycygpOw0KDQogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA8IDIwMCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIG5ldyBEYXRhUHJvdmlzaW9uYWw6ICcsIHJlcGx5LmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMsIG9ialVSTCk7DQogICAgICAgICAgICBuZXdQcm92aXNpb25hbCA9IG5ldyBfRGF0YVByb3Zpc2lvbmFsMi5kZWZhdWx0KF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsNCiAgICAgICAgICAgIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXSA9IG5ld1Byb3Zpc2lvbmFsOw0KICAgICAgICAgIH0gZWxzZSBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBuZXcgRGF0YSBPYmplY3QgT2JzZXJ2ZXI6ICcsIHJlcGx5LCBfdGhpcy5fcHJvdmlzaW9uYWxzKTsNCg0KICAgICAgICAgICAgdmFyIG5ld09iaiA9IG5ldyBfRGF0YU9iamVjdE9ic2VydmVyMi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIHNjaGVtYSwgJ29uJywgcmVwbHkuYm9keS52YWx1ZSwgbmV3UHJvdmlzaW9uYWwuY2hpbGRyZW4sIHJlcGx5LmJvZHkudmVyc2lvbik7DQogICAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF0gPSBuZXdPYmo7DQoNCiAgICAgICAgICAgIHJlc29sdmUobmV3T2JqKTsNCiAgICAgICAgICAgIG5ld1Byb3Zpc2lvbmFsLmFwcGx5KG5ld09iaik7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIGxvY2FsIHJ1bnRpbWUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlU3Vic2NyaWJlDQoNCiAgfSwgew0KICAgIGtleTogJ19vbkZvcndhcmQnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Gb3J3YXJkKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgdmFyIHJlcG9ydGVyID0gX3RoaXMuX3JlcG9ydGVyc1ttc2cuYm9keS50b107DQogICAgICByZXBvcnRlci5fb25Gb3J3YXJkKG1zZyk7DQogICAgfQ0KDQogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgU3luY2hlciAtPiBjcmVhdGUgKHRoaXMgaXMgYWN0dWFsbHkgYW4gaW52aXRhdGlvbiB0byBzdWJzY3JpYmUpDQoNCiAgfSwgew0KICAgIGtleTogJ19vblJlbW90ZUNyZWF0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZUNyZWF0ZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vcmVtb3ZlICIvc3Vic2NyaXB0aW9uIiBmcm9tIHRoZSBVUkwNCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5mcm9tLnNsaWNlKDAsIC0xMyk7DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLnR5cGUsDQogICAgICAgIGZyb206IG1zZy5ib2R5LnNvdXJjZSwNCiAgICAgICAgdXJsOiByZXNvdXJjZSwNCiAgICAgICAgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEsDQogICAgICAgIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwNCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LA0KDQogICAgICAgIGFjazogZnVuY3Rpb24gYWNrKHR5cGUpIHsNCiAgICAgICAgICB2YXIgbFR5cGUgPSAyMDA7DQogICAgICAgICAgaWYgKHR5cGUpIHsNCiAgICAgICAgICAgIGxUeXBlID0gdHlwZTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UNCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLA0KICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH07DQoNCiAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7DQogICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIE5PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gZGVsZXRlDQoNCiAgfSwgew0KICAgIGtleTogJ19vblJlbW90ZURlbGV0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZURlbGV0ZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vcmVtb3ZlICIvc3Vic2NyaXB0aW9uIiBmcm9tIHRoZSBVUkwNCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5ib2R5LnJlc291cmNlOw0KDQogICAgICB2YXIgb2JqZWN0ID0gX3RoaXMuX29ic2VydmVyc1tyZXNvdXJjZV07DQogICAgICBpZiAob2JqZWN0KSB7DQogICAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgICB0eXBlOiBtc2cudHlwZSwNCiAgICAgICAgICB1cmw6IHJlc291cmNlLA0KICAgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwNCg0KICAgICAgICAgIGFjazogZnVuY3Rpb24gYWNrKHR5cGUpIHsNCiAgICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsNCiAgICAgICAgICAgIGlmICh0eXBlKSB7DQogICAgICAgICAgICAgIGxUeXBlID0gdHlwZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9UT0RPOiBhbnkgb3RoZXIgZGlmZmVyZW50IG9wdGlvbnMgZm9yIHRoZSByZWxlYXNlIHByb2Nlc3MsIGxpa2UgYWNjZXB0IGJ1dCBub3IgcmVsZWFzZSBsb2NhbD8NCiAgICAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgIG9iamVjdC5kZWxldGUoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9zZW5kIGFjayByZXNwb25zZSBtZXNzYWdlDQogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgICAgIGJvZHk6IHsgY29kZTogbFR5cGUsIHNvdXJjZTogX3RoaXMuX293bmVyIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdOT1RJRklDQVRJT04tRVZFTlQ6ICcsIGV2ZW50KTsNCiAgICAgICAgICBfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgYm9keTogeyBjb2RlOiA0MDQsIHNvdXJjZTogX3RoaXMuX293bmVyIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnb3duZXInLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX293bmVyOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQWxsIG93bmVkIHJlcG9ydGVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBjcmVhdGUNCiAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0UmVwb3J0ZXI+fQ0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3JlcG9ydGVycycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fcmVwb3J0ZXJzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQWxsIG93bmVkIG9ic2VydmVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBsb2NhbCBzdWJzY3JpcHRpb24NCiAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0T2JzZXJ2ZXI+fQ0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29ic2VydmVycycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzOw0KICAgIH0NCiAgfV0pOw0KICByZXR1cm4gU3luY2hlcjsNCn0oKTsgLyoqDQogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KICAgICAqDQogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICAgICAqDQogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAgICAgKg0KICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAgICAgKiovDQoNCmV4cG9ydHMuZGVmYXVsdCA9IFN5bmNoZXI7DQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsNCg0KLyoqKi8gfSksDQovKiAxMzEgKi8sDQovKiAxMzIgKi8sDQovKiAxMzMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsNCg0KdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8NCg0KLyoqDQogKiBAYWNjZXNzIHByaXZhdGUNCiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcgZGVsdGEgY2hhbmdlcyBpbiByZW1vdGUgb2JqZWN0cywgYmVmb3JlIHRoZSByZXNwb25zZSBvZiBzdWJzY3JpcHRpb24gcmVhY2ggdGhlIG9ic2VydmVyLg0KICogSXQncyB1c2VkIGluIFN5bmNoZXIgLT4gc3Vic2NyaWJlLiBUaGUgZmxvdyBpcyBkZWZpbmVkIGFzOg0KICogMS4gKG9ic2VydmVyKSAtLXN1YnNjcmliZS0tPiAocmVwb3J0ZXIpDQogKiAyLiAob2JzZXJ2ZXIpIDwtLWRlbHRhIHVwZGF0ZXMtLSAocmVwb3J0ZXIpDQogKiAzLiAob2JzZXJ2ZXIpIDwtLXN1YnNjcmliZSByZXNwb25zZS0tIChyZXBvcnRlcikNCiAqIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSBjb3VsZCBiZSBkZWx0YSB1cGRhdGVzIHRyYW5zZmVycmVkIGJlZm9yZSB0aGUgc3Vic2NyaXB0aW9uIGNvbmZpcm1hdGlvbi4NCiAqIFNpbmNlIHRoZXJlIGlzIG5vIERhdGFPYmplY3RPYnNlcnZlciBiZWZvcmUgdGhlIHVic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiwgdGhlcmUgc2hvdWxkIGJlIHNvbWUgb3RoZXIgb2JqZWN0IGNvbGxlY3RpbmcgdGhlIHVwZGF0ZXMuDQogKiBQcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uDQogKi8NCnZhciBEYXRhUHJvdmlzaW9uYWwgPSBmdW5jdGlvbiAoKSB7DQogIC8qIHByaXZhdGUNCiAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdDQogIF9saXN0ZW5lcjogTXNnTGlzdGVuZXINCiAgIF9jaGFuZ2VzOiBbXQ0KICAqLw0KDQogIGZ1bmN0aW9uIERhdGFQcm92aXNpb25hbChvd25lciwgdXJsLCBidXMsIGNoaWxkcmVuKSB7DQogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YVByb3Zpc2lvbmFsKTsNCg0KICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsNCiAgICBfdGhpcy5fdXJsID0gdXJsOw0KICAgIF90aGlzLl9idXMgPSBidXM7DQogICAgX3RoaXMuX2NoaWxkcmVuID0gY2hpbGRyZW47DQoNCiAgICBfdGhpcy5fY2hhbmdlcyA9IFtdOw0KICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOw0KICB9DQoNCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YVByb3Zpc2lvbmFsLCBbew0KICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9saXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICBjb25zb2xlLmxvZygnRGF0YVByb3Zpc2lvbmFsLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7DQogICAgICAgIF90aGlzLl9jaGFuZ2VzLnB1c2gobXNnKTsNCiAgICAgIH0pOw0KDQogICAgICAvKg0KICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzID0gW107DQogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVuKSB7DQogICAgICAgIGxldCBjaGlsZEJhc2VVUkwgPSB1cmwgKyAnL2NoaWxkcmVuLyc7DQogICAgICAgIF90aGlzLl9jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4gew0KICAgICAgICAgIGxldCBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOw0KICAgICAgICAgIGxldCBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIChtc2cpID0+IHsNCiAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYNCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9KTsNCiAgICAgIH0qLw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBfdGhpcy5fbGlzdGVuZXIucmVtb3ZlKCk7DQoNCiAgICAgIC8qX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7DQogICAgICAgIGxpc3RlbmVyLnJlbW92ZSgpOw0KICAgICAgfSk7Ki8NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdhcHBseScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KG9ic2VydmVyKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgX3RoaXMuX2NoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7DQogICAgICAgIG9ic2VydmVyLl9jaGFuZ2VPYmplY3Qob2JzZXJ2ZXIuX3N5bmNPYmosIGNoYW5nZSk7DQogICAgICB9KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdjaGlsZHJlbicsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhUHJvdmlzaW9uYWw7DQp9KCk7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFQcm92aXNpb25hbDsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDEzNCAqLywNCi8qIDEzNSAqLywNCi8qIDEzNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiAxMzcgKi8sDQovKiAxMzggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogMTM5ICovLA0KLyogMTQwICovLA0KLyogMTQxICovLA0KLyogMTQyICovLA0KLyogMTQzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTQ5KTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuYXNzaWduOw0KDQovKioqLyB9KSwNCi8qIDE0NCAqLywNCi8qIDE0NSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7DQp2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0Ow0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7DQogIHJldHVybiAkT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTQ2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKQ0KdmFyIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykNCiAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpDQogICwgcElFICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQ0KICAsIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikNCiAgLCBJT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpDQogICwgJGFzc2lnbiAgPSBPYmplY3QuYXNzaWduOw0KDQovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykNCm1vZHVsZS5leHBvcnRzID0gISRhc3NpZ24gfHwgX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsNCiAgdmFyIEEgPSB7fQ0KICAgICwgQiA9IHt9DQogICAgLCBTID0gU3ltYm9sKCkNCiAgICAsIEsgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnOw0KICBBW1NdID0gNzsNCiAgSy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbihrKXsgQltrXSA9IGs7IH0pOw0KICByZXR1cm4gJGFzc2lnbih7fSwgQSlbU10gIT0gNyB8fCBPYmplY3Qua2V5cygkYXNzaWduKHt9LCBCKSkuam9pbignJykgIT0gSzsNCn0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycw0KICB2YXIgVCAgICAgPSB0b09iamVjdCh0YXJnZXQpDQogICAgLCBhTGVuICA9IGFyZ3VtZW50cy5sZW5ndGgNCiAgICAsIGluZGV4ID0gMQ0KICAgICwgZ2V0U3ltYm9scyA9IGdPUFMuZg0KICAgICwgaXNFbnVtICAgICA9IHBJRS5mOw0KICB3aGlsZShhTGVuID4gaW5kZXgpew0KICAgIHZhciBTICAgICAgPSBJT2JqZWN0KGFyZ3VtZW50c1tpbmRleCsrXSkNCiAgICAgICwga2V5cyAgID0gZ2V0U3ltYm9scyA/IGdldEtleXMoUykuY29uY2F0KGdldFN5bWJvbHMoUykpIDogZ2V0S2V5cyhTKQ0KICAgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aA0KICAgICAgLCBqICAgICAgPSAwDQogICAgICAsIGtleTsNCiAgICB3aGlsZShsZW5ndGggPiBqKWlmKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpVFtrZXldID0gU1trZXldOw0KICB9IHJldHVybiBUOw0KfSA6ICRhc3NpZ247DQoNCi8qKiovIH0pLA0KLyogMTQ3ICovLA0KLyogMTQ4ICovLA0KLyogMTQ5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpDQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7DQoNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GLCAnT2JqZWN0Jywge2Fzc2lnbjogX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpfSk7DQoNCi8qKiovIH0pLA0KLyogMTUwICovLA0KLyogMTUxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkNCnZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NykuZjsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicsIGZ1bmN0aW9uKCl7DQogIHJldHVybiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7DQogICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodG9JT2JqZWN0KGl0KSwga2V5KTsNCiAgfTsNCn0pOw0KDQovKioqLyB9KSwNCi8qIDE1MiAqLywNCi8qIDE1MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyAgICAgcHJveHktb2JzZXJ2ZSB2MC4wLjE4DQovLyAgICAgQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE2IFNpbW9uIFkuIEJsYWNrd2VsbCwgQW55V2hpY2hXYXkNCi8vICAgICBNSVQgTGljZW5zZSAtIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHANCihmdW5jdGlvbigpIHsNCgkidXNlIHN0cmljdCI7DQoJLy8gQ3JlYXRlcyBhbmQgcmV0dXJucyBhIFByb3h5IHdyYXBwaW5nIGEgdGFyZ2V0IHNvIHRoYXQgYWxsIGNoYW5nZXMgY2FuIGJlIHRyYXBwZWQgYW5kIGZvcndhcmRlZCB0bw0KCS8vIGEgY2FsbGJhY2suIFRoZSBjYWxsYmFjayB0YWtlcyBhbiBhcnJheSBvZiBjaGFuZ2VzIGp1c3QgbGlrZSB0aGUgdHJhZGl0aW9uYWwgb3JpZ2luYWwgQ2hyb21lIE9iamVjdC5vYnNlcnZlDQoJLy8ge29iamVjdDo8b2JqZWN0IGNoYW5nZWQ+LG5hbWU6PGZpZWxkIGNoYW5nZWQ+LHR5cGU6YWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLG9sZFZhbHVlOjxvbGQgdmFsdWUgaWYgdXBkYXRlIHwgZGVsZXRlPn0NCgkvLyBUaGUgYWNjZXB0bGlzdCBjYW4gYmUgYWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLg0KCS8vIHYgMC4wLjEwIHRvIHN1cHBvcnQgcGF1c2luZyBhbmQgcmVzdGFydGluZyBvYnNlcnZhdGlvbiB0d28gYWRkaXRpb25hbCBjb25zdHJ1Y3RvciBhcmd1bWVudHMgYXJlIGF2YWlsYWJsZSB0byBPYmplY3Qub2JzZXJ2ZToNCgkvLyBwYXVzYWJsZSAtIGNyZWF0ZSB0aGUgT2JzZXJ2ZXIgc28gaXQgY2FuIGJlIHBhdXNlZA0KCS8vIHBhdXNlIC0gY3JlYXRlIG9ic2VydmVyIGluIHBhdXNlZCBzdGF0ZQ0KCS8vIGlmIHBhdXNhYmxlIGlzIHRydWUgdGhlbiBhbiBhZGRpdGlvbmFsIG1ldGhvZCBkZWxpdmVyKGlnbm9yZVByZXZpb3VzKSBpcyBhdmFpbGFibGUgdG8gc3RhcnQgZGVsaXZlcnkNCgkvLyB0byBwYXVzZSBkZWxpdmVyeSBzZXQgYSBwcm9wZXJ0eSBjYWxsZWQgcGF1c2Ugb24gdGhlIGZ1bmN0aW9uIGRlbGl2ZXIgdG8gdHJ1ZQ0KCS8vIHBhdXNhYmxlIGlzIG9wdGlvbmFsIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mIHNoYWRvd2luZyBhIHByb3BlcnR5IG9yIG1ldGhvZCBvbiBhbnkgZXhpc3RpbmcgY29kZSBjYWxsZWQgZGVsaXZlcg0KCWlmKCFPYmplY3Qub2JzZXJ2ZSAmJiB0eXBlb2YoUHJveHkpPT09ImZ1bmN0aW9uIikgew0KCQlmdW5jdGlvbiBPYnNlcnZlcih0YXJnZXQsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgew0KCSAgICAJdmFyIG1lID0gdGhpcywgcHJveHk7DQoJICAgIAlmdW5jdGlvbiBkZWxpdmVyKGlnbm9yZVByZXZpb3VzLGRlbGF5KSB7DQoJICAgIAkJZGVsaXZlci5kZWxheSA9IGRlbGF5Ow0KCSAgICAJCWlmKCFkZWxpdmVyLnBhdXNlKSB7DQoJICAgICAgICAJCWlmKG1lLmNoYW5nZXNldC5sZW5ndGg+MCkgew0KCSAgICAgICAgCQkJaWYoIWlnbm9yZVByZXZpb3VzKSB7DQoJCSAgICAJICAgIAkJdmFyIGNoYW5nZXMgPSBtZS5jaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGNoYW5nZSkgeyByZXR1cm4gIWFjY2VwdGxpc3QgfHwgYWNjZXB0bGlzdC5pbmRleE9mKGNoYW5nZS50eXBlKT49MDsgfSk7DQoJCSAgICAgICAgCQkJaWYoY2hhbmdlcy5sZW5ndGg+MCkgew0KCQkgICAgICAgIAkJCQljYWxsYmFjayhjaGFuZ2VzKTsNCgkJICAgICAgICAJCQl9DQoJICAgICAgICAJCQl9DQoJICAgICAgICAJCQltZS5jaGFuZ2VzZXQgPSBbXTsNCgkgICAgICAgIAkJfQ0KCSAgICAJCX0NCgkgICAgCX0NCgkgICAgCWRlbGl2ZXIucGF1c2UgPSBwYXVzZTsNCgkgICAgCWRlbGl2ZXIuZGVsYXkgPSBkZWxheTsNCgkJICAgIG1lLmdldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsNCgkJICAgIAlpZihwcm9wZXJ0eT09PSJfX29ic2VydmVyX18iKSB7DQoJCSAgICAJCXJldHVybiBtZTsNCgkJICAgIAl9DQoJCSAgICAJaWYocHJvcGVydHk9PT0idW5vYnNlcnZlIikgew0KCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oKSB7DQoJCSAgICAJCQlPYmplY3QudW5vYnNlcnZlKHRhcmdldCk7DQoJCSAgICAJCQlyZXR1cm4gdGFyZ2V0Ow0KCQkgICAgCQl9Ow0KCQkgICAgCX0NCgkJICAgIAlpZihwcm9wZXJ0eT09PSJkZWxpdmVyIikgew0KCQkgICAgCQlyZXR1cm4gZGVsaXZlcjsNCgkJICAgIAl9DQoJCSAgICAJcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07DQoJCSAgICB9DQoJICAgIAltZS50YXJnZXQgPSB0YXJnZXQ7DQoJICAgIAltZS5jaGFuZ2VzZXQgPSBbXTsNCgkgICAgCWlmKCFtZS50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19fKSB7DQoJICAgIAkJLy8gX19vYnNlcnZlckNhbGxiYWNrc19fIGlzIHVzZWQgYXMgYW4gaW5kZXggdG8gZ2V0IGF0IHRoZSBwcm94eSB3aGljaCBpcyB0aGUgb2JzZXJ2ZXIsIHNvIHdlIGNhbiB1bm9ic2VydmUNCgkgICAgCQlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCJfX29ic2VydmVyQ2FsbGJhY2tzX18iLHtlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOmZhbHNlLHZhbHVlOltdfSk7DQoJICAgIAkJT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwiX19vYnNlcnZlcnNfXyIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTsNCgkgICAgCX0NCgkgICAgCW1lLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaChjYWxsYmFjayk7DQoJICAgIAltZS50YXJnZXQuX19vYnNlcnZlcnNfXy5wdXNoKHRoaXMpOw0KCSAgICAJcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LG1lKTsNCgkgICAgCWRlbGl2ZXIoZmFsc2UsZGVsYXkpOw0KCSAgICAJcmV0dXJuIHByb3h5Ow0KCSAgICB9DQoJCU9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyID0gZnVuY3Rpb24oKSB7DQoJCQlyZXR1cm4gdGhpcy5nZXQobnVsbCwiZGVsaXZlciIpOw0KCQl9DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgeyAvLyAsIHJlY2VpdmVyDQoJICAgIAl2YXIgb2xkdmFsdWUgPSB0YXJnZXRbcHJvcGVydHldOw0KCSAgICAJdmFyIHR5cGUgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKTsNCgkgICAgCXRhcmdldFtwcm9wZXJ0eV0gPSB2YWx1ZTsNCgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgKCF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YodHlwZSk+PTApKSB7DQoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZTp0eXBlfSwNCgkgICAgICAgIAkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQoJICAgICAgICAJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkgICAgICAgIAlpZih0eXBlPT09InVwZGF0ZSIpIHsNCgkgICAgICAgIAkJY2hhbmdlLm9sZFZhbHVlID0gb2xkdmFsdWU7DQoJICAgICAgICAJfQ0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgICAgIAlpZihzdGFydCkgew0KCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAgICAgCX0NCgkgICAgCX0NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5KSB7DQoJICAgIAl2YXIgb2xkdmFsdWUgPSB0YXJnZXRbcHJvcGVydHldOw0KCSAgICAJLy9pZih0eXBlb2Yob2xkdmFsdWUpIT09InVuZGVmaW5lZCIpIHsNCgkJICAgIAlkZWxldGUgdGFyZ2V0W3Byb3BlcnR5XTsNCgkJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoImRlbGV0ZSIpPj0wKSB7DQoJCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6ImRlbGV0ZSIsb2xkVmFsdWU6b2xkdmFsdWV9LA0KCQkgICAgICAgIAkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQoJCSAgICAgICAgCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkJICAgICAgICAJaWYoc3RhcnQpIHsNCgkJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJCSAgICAgICAgCX0NCgkJICAgIAl9DQoJICAgIAkvL30NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKSB7DQoJICAgIAlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7DQoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInJlY29uZmlndXJlIik+PTApIHsNCgkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZTpwcm9wZXJ0eSx0eXBlOiJyZWNvbmZpZ3VyZSJ9LA0KICAgICAgICAJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCiAgICAgICAgCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgICAgIAlpZihzdGFydCkgew0KCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAgICAgCX0NCgkgICAgCX0NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbih0YXJnZXQsIHByb3RvdHlwZSkgew0KCSAgICAJdmFyIG9sZHZhbHVlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCk7DQoJICAgIAlPYmplY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90b3R5cGUpOw0KCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJzZXRQcm90b3R5cGUiKT49MCkgew0KCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOiJfX3Byb3RvX18iLHR5cGU6InNldFByb3RvdHlwZSIsb2xkVmFsdWU6b2xkdmFsdWV9LA0KICAgIAkJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCiAgICAJCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgICAgIAlpZihzdGFydCkgew0KCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAgICAgCX0NCgkgICAgCX0NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUucHJldmVudEV4dGVuc2lvbnMgPSBmdW5jdGlvbih0YXJnZXQpIHsNCgkgICAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpOw0KCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJwcmV2ZW50RXh0ZW5zaW9ucyIpPj0wKSB7DQoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LHR5cGU6InByZXZlbnRFeHRlbnNpb25zIn0sDQoJCQkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KCQkJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9iamVjdC5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsNCgkgICAgCXJldHVybiBuZXcgT2JzZXJ2ZXIob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpOw0KCSAgICB9Ow0KCSAgICBPYmplY3QudW5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKSB7DQoJICAgIAlpZihvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fKSB7DQoJICAgIAkJaWYoIWNhbGxiYWNrKSB7DQoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpOw0KCSAgICAJCQlvYmplY3QuX19vYnNlcnZlcnNfXy5zcGxpY2UoMCxvYmplY3QuX19vYnNlcnZlcnNfXy5sZW5ndGgpOw0KCSAgICAJCQlyZXR1cm47DQoJICAgIAkJfQ0KCSAgICAJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihvYnNlcnZlcmNhbGxiYWNrLGkpIHsNCgkgICAgCQkJaWYoY2FsbGJhY2s9PT1vYnNlcnZlcmNhbGxiYWNrKSB7DQoJICAgIAkJCQlvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShpLDEpOw0KCSAgICAJCQkJZGVsZXRlIG9iamVjdC5fX29ic2VydmVyc19fW2ldLmNhbGxiYWNrOw0KCSAgICAJCQkJb2JqZWN0Ll9fb2JzZXJ2ZXJzX18uc3BsaWNlKGksMSk7DQoJICAgIAkJCX0NCgkgICAgCQl9KTsNCgkgICAgCX0NCgkgICAgfTsNCgkgICAgQXJyYXkub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KSB7DQoJICAgIAlpZighKG9iamVjdCBpbnN0YW5jZW9mIEFycmF5KSAmJiAhQXJyYXkuaXNBcnJheShvYmplY3QpKSB7DQoJICAgIAkJdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7DQoJICAgIAl9DQoJICAgIAl2YXIgYXJyYXlwcm94eSA9IG5ldyBQcm94eShvYmplY3Qse2dldDogZnVuY3Rpb24odGFyZ2V0LHByb3BlcnR5KSB7DQoJICAgIAkJaWYocHJvcGVydHk9PT0idW5vYnNlcnZlIikgew0KCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHsNCgkJICAgIAkJCWlmKGNhbGxiYWNrKSB7DQoJCSAgICAJCQkJcmV0dXJuIE9iamVjdC51bm9ic2VydmUodGFyZ2V0LGNhbGxiYWNrKTsNCgkJICAgIAkJCX0NCgkJICAgIAkJCXJldHVybiB0YXJnZXQudW5vYnNlcnZlKCk7DQoJCSAgICAJCX07DQoJCSAgICAJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InNwbGljZSIpIHsNCgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LGVuZCkgew0KCSAgICAJCQkJaWYodHlwZW9mKHN0YXJ0KSE9PSJudW1iZXIiIHx8IHR5cGVvZihlbmQpIT09Im51bWJlciIpIHsNCgkgICAgCQkJCQl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCB0d28gYXJndW1lbnRzIHRvIEFycmF5IHNwbGljZSBhcmUgbm90IG51bWJlciwgbnVtYmVyIik7DQoJICAgIAkJCQl9DQoJICAgIAkgICAgCQl2YXIgcmVtb3ZlZCA9IHRoaXMuc2xpY2Uoc3RhcnQsc3RhcnQrZW5kKSwNCgkgICAgCSAgICAJCQlhZGRlZENvdW50ID0gKGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzLmxlbmd0aC0yIDogMCksDQoJICAgIAkgICAgCQkJY2hhbmdlID0gIHtvYmplY3Q6b2JqZWN0LHR5cGU6InNwbGljZSIsaW5kZXg6c3RhcnQscmVtb3ZlZDpyZW1vdmVkLGFkZGVkQ291bnQ6YWRkZWRDb3VudH07DQoJICAgIAkgICAgCQl0YXJnZXQuc3BsaWNlLmFwcGx5KHRhcmdldCxhcmd1bWVudHMpOw0KCSAgICAJICAgIAkJaWYoYWNjZXB0bGlzdC5pbmRleE9mKCJzcGxpY2UiKT49MCkgew0KCSAgICAJICAgIAkJCXZhciBzdGFydCA9IHByb3h5Ll9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KCSAgICAJICAgICAgICAJCQlkZWxpdmVyID0gcHJveHkuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTsNCgkgICAgCSAgICAJCQlwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgCSAgICAJCQlpZihzdGFydCkgew0KCSAgICAJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAJCSAgICAgICAgCX0NCgkgICAgCSAgICAJCX0NCgkgICAgCSAgICAJfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJwdXNoIikgew0KCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsNCgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGl0ZW0pOw0KCSAgICAJCSAgICB9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InBvcCIpIHsNCgkgICAgCQkJIHJldHVybiBmdW5jdGlvbigpIHsNCgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpOw0KCSAgICAJCSAgICB9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InVuc2hpZnQiKSB7DQoJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oaXRlbSkgew0KICAgIAkJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxpdGVtKTsNCiAgICAJCSAgICAJfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJzaGlmdCIpIHsNCgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKCkgew0KCSAgICAJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMSk7DQoJICAgIAkgICAgCX0NCgkgICAgCQl9DQoJICAgIAkJcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07DQoJICAgIAl9fSk7DQoJICAgIAl2YXIgcHJveHkgPSBPYmplY3Qub2JzZXJ2ZShhcnJheXByb3h5LGZ1bmN0aW9uKGNoYW5nZXNldCkgeyANCgkgICAgCQl2YXIgY2hhbmdlcyA9IGNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiBjaGFuZ2UubmFtZSE9PSJsZW5ndGgiICYmIGNoYW5nZS5uYW1lIT09ImFkZCIgJiYgKCFhY2NlcHRsaXN0IHx8IGFjY2VwdGxpc3QuaW5kZXhPZihjaGFuZ2UudHlwZSk+PTApOyB9KTsNCgkgICAgCQlpZihjaGFuZ2VzLmxlbmd0aD4wKSB7DQoJICAgIAkJCWNhbGxiYWNrKGNoYW5nZXMpOw0KCSAgICAJCX0NCgkgICAgCX0sYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7DQoJICAgIAlyZXR1cm4gcHJveHk7DQoJICAgIH07DQoJICAgIEFycmF5LnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjaykgew0KCQkgIHJldHVybiBvYmplY3QudW5vYnNlcnZlKGNhbGxiYWNrKTsNCgkgICAgfQ0KCX0NCglPYmplY3QuZGVlcE9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2sscGFydHMpIHsNCgkJcGFydHMgPSAocGFydHMgPyBwYXJ0cyA6IFtdKTsNCgkJdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOw0KCQlrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7DQoJCQlpZihvYmplY3Rba2V5XSBpbnN0YW5jZW9mIE9iamVjdCkgew0KCQkJCXZhciBuZXdwYXJ0cyA9IHBhcnRzLnNsaWNlKDApOw0KCQkJCW5ld3BhcnRzLnB1c2goa2V5KTsNCgkJCQlvYmplY3Rba2V5XSA9IE9iamVjdC5kZWVwT2JzZXJ2ZShvYmplY3Rba2V5XSxjYWxsYmFjayxuZXdwYXJ0cyk7DQoJCQl9DQoJCX0pOw0KCQl2YXIgb2JzZXJ2ZWQgPSBPYmplY3Qub2JzZXJ2ZShvYmplY3QsZnVuY3Rpb24oY2hhbmdlc2V0KSB7DQoJCQl2YXIgY2hhbmdlcyA9IFtdOw0KCQkJZnVuY3Rpb24gcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0LG5ld09iamVjdCxwYXRoKSB7DQoJCQkJaWYobmV3T2JqZWN0IGluc3RhbmNlb2YgT2JqZWN0KSB7DQoJCQkJCXZhciBuZXdrZXlzID0gT2JqZWN0LmtleXMobmV3T2JqZWN0KTsNCgkJCQkJbmV3a2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgew0KCQkJCQkJaWYoIW9sZE9iamVjdCB8fCAob2xkT2JqZWN0W2tleV0hPT1uZXdPYmplY3Rba2V5XSkpIHsNCgkJCQkJCQl2YXIgb2xkdmFsdWUgPSAob2xkT2JqZWN0ICYmIG9sZE9iamVjdFtrZXldIT09dW5kZWZpbmVkID8gb2xkT2JqZWN0W2tleV0gOiB1bmRlZmluZWQpLA0KCQkJCQkJCQljaGFuZ2UgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKSwNCgkJCQkJCQkJa2V5cGF0aCA9IHBhdGggKyAiLiIgKyBrZXk7DQoJCQkJCQkJY2hhbmdlcy5wdXNoKHtuYW1lOm5hbWUsb2JqZWN0OnJvb3RPYmplY3QsdHlwZTpjaGFuZ2Usb2xkVmFsdWU6b2xkdmFsdWUsbmV3VmFsdWU6bmV3T2JqZWN0W2tleV0sa2V5cGF0aDprZXlwYXRofSk7DQoJCQkJCQkJcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkdmFsdWUsbmV3T2JqZWN0W2tleV0sa2V5cGF0aCk7DQoJCQkJCQl9DQoJCQkJCX0pOw0KCQkJCX0gZWxzZSBpZihvbGRPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHsNCgkJCQkJdmFyIG9sZGtleXMgPSBPYmplY3Qua2V5cyhvbGRPYmplY3QpOw0KCQkJCQlvbGRrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7DQoJCQkJCQl2YXIgY2hhbmdlID0gKG5ld09iamVjdD09PW51bGwgPyAidXBkYXRlIiA6ICJkZWxldGUiKSwNCgkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsNCgkJCQkJCWNoYW5nZXMucHVzaCh7bmFtZTpuYW1lLG9iamVjdDpyb290T2JqZWN0LHR5cGU6Y2hhbmdlLG9sZFZhbHVlOm9sZE9iamVjdFtrZXldLG5ld1ZhbHVlOm5ld09iamVjdCxrZXlwYXRoOmtleXBhdGh9KTsNCgkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZE9iamVjdFtrZXldLHVuZGVmaW5lZCxrZXlwYXRoKTsNCgkJCQkJfSk7DQoJCQkJfQ0KCQkJfQ0KCQkJY2hhbmdlc2V0LmZvckVhY2goZnVuY3Rpb24oY2hhbmdlKSB7DQoJCQkJdmFyIGtleXBhdGggPSAocGFydHMubGVuZ3RoPjAgPyBwYXJ0cy5qb2luKCIuIikgKyAiLiIgOiAiIikgKyBjaGFuZ2UubmFtZTsNCgkJCQljaGFuZ2VzLnB1c2goe25hbWU6Y2hhbmdlLm5hbWUsb2JqZWN0OmNoYW5nZS5vYmplY3QsdHlwZTpjaGFuZ2UudHlwZSxvbGRWYWx1ZTpjaGFuZ2Uub2xkVmFsdWUsbmV3VmFsdWU6Y2hhbmdlLm9iamVjdFtjaGFuZ2UubmFtZV0sa2V5cGF0aDprZXlwYXRofSk7DQoJCQkJcmVjdXJzZShjaGFuZ2UubmFtZSxjaGFuZ2Uub2JqZWN0LGNoYW5nZS5vbGRWYWx1ZSxjaGFuZ2Uub2JqZWN0W2NoYW5nZS5uYW1lXSxrZXlwYXRoKTsNCgkJCX0pOw0KCQkJY2FsbGJhY2soY2hhbmdlcyk7DQoJCX0pOw0KCQlyZXR1cm4gb2JzZXJ2ZWQ7DQoJfTsNCn0pKCk7DQoNCi8qKiovIH0pLA0KLyogMTU0ICovLA0KLyogMTU1ICovLA0KLyogMTU2ICovLA0KLyogMTU3ICovLA0KLyogMTU4ICovLA0KLyogMTU5ICovLA0KLyogMTYwICovLA0KLyogMTYxICovLA0KLyogMTYyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCmV4cG9ydHMuRGF0YU9iamVjdE9ic2VydmVyID0gZXhwb3J0cy5EYXRhT2JqZWN0UmVwb3J0ZXIgPSBleHBvcnRzLlN5bmNoZXIgPSB1bmRlZmluZWQ7DQoNCnZhciBfU3luY2hlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKTsNCg0KdmFyIF9TeW5jaGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N5bmNoZXIpOw0KDQp2YXIgX0RhdGFPYmplY3RSZXBvcnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsNCg0KdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdFJlcG9ydGVyKTsNCg0KdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7DQoNCnZhciBfRGF0YU9iamVjdE9ic2VydmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RPYnNlcnZlcik7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCmV4cG9ydHMuU3luY2hlciA9IF9TeW5jaGVyMi5kZWZhdWx0Ow0KZXhwb3J0cy5EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfRGF0YU9iamVjdFJlcG9ydGVyMi5kZWZhdWx0Ow0KZXhwb3J0cy5EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfRGF0YU9iamVjdE9ic2VydmVyMi5kZWZhdWx0Ow0KDQovKioqLyB9KQ0KLyoqKioqKi8gXSk7DQp9KTsNCn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwoKJ3VzZSBzdHJpY3QnOwoKLy8gU2hpbW1pbmcgc3RhcnRzIGhlcmUuCihmdW5jdGlvbigpIHsKICAvLyBVdGlscy4KICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7CiAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7CiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuYnJvd3NlckRldGFpbHM7CiAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci4KICBtb2R1bGUuZXhwb3J0cy5icm93c2VyRGV0YWlscyA9IGJyb3dzZXJEZXRhaWxzOwogIG1vZHVsZS5leHBvcnRzLmV4dHJhY3RWZXJzaW9uID0gdXRpbHMuZXh0cmFjdFZlcnNpb247CiAgbW9kdWxlLmV4cG9ydHMuZGlzYWJsZUxvZyA9IHV0aWxzLmRpc2FibGVMb2c7CgogIC8vIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyBpZiB5b3Ugd2FudCBsb2dnaW5nIHRvIG9jY3VyLCBpbmNsdWRpbmcgbG9nZ2luZwogIC8vIGZvciB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdy4gQ2FuIGFsc28gYmUgdHVybmVkIG9uIGluIHRoZSBicm93c2VyIHZpYQogIC8vIGFkYXB0ZXIuZGlzYWJsZUxvZyhmYWxzZSksIGJ1dCB0aGVuIGxvZ2dpbmcgZnJvbSB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdwogIC8vIHdpbGwgbm90IGFwcGVhci4KICAvLyByZXF1aXJlKCcuL3V0aWxzJykuZGlzYWJsZUxvZyhmYWxzZSk7CgogIC8vIEJyb3dzZXIgc2hpbXMuCiAgdmFyIGNocm9tZVNoaW0gPSByZXF1aXJlKCcuL2Nocm9tZS9jaHJvbWVfc2hpbScpIHx8IG51bGw7CiAgdmFyIGVkZ2VTaGltID0gcmVxdWlyZSgnLi9lZGdlL2VkZ2Vfc2hpbScpIHx8IG51bGw7CiAgdmFyIGZpcmVmb3hTaGltID0gcmVxdWlyZSgnLi9maXJlZm94L2ZpcmVmb3hfc2hpbScpIHx8IG51bGw7CiAgdmFyIHNhZmFyaVNoaW0gPSByZXF1aXJlKCcuL3NhZmFyaS9zYWZhcmlfc2hpbScpIHx8IG51bGw7CgogIC8vIFNoaW0gYnJvd3NlciBpZiBmb3VuZC4KICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHsKICAgIGNhc2UgJ2Nocm9tZSc6CiAgICAgIGlmICghY2hyb21lU2hpbSB8fCAhY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGNocm9tZVNoaW07CgogICAgICBjaHJvbWVTaGltLnNoaW1HZXRVc2VyTWVkaWEoKTsKICAgICAgY2hyb21lU2hpbS5zaGltTWVkaWFTdHJlYW0oKTsKICAgICAgdXRpbHMuc2hpbUNyZWF0ZU9iamVjdFVSTCgpOwogICAgICBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QoKTsKICAgICAgY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgY2hyb21lU2hpbS5zaGltT25UcmFjaygpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2ZpcmVmb3gnOgogICAgICBpZiAoIWZpcmVmb3hTaGltIHx8ICFmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gZmlyZWZveFNoaW07CgogICAgICBmaXJlZm94U2hpbS5zaGltR2V0VXNlck1lZGlhKCk7CiAgICAgIHV0aWxzLnNoaW1DcmVhdGVPYmplY3RVUkwoKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbVNvdXJjZU9iamVjdCgpOwogICAgICBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbU9uVHJhY2soKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdlZGdlJzoKICAgICAgaWYgKCFlZGdlU2hpbSB8fCAhZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgbG9nZ2luZygnTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBlZGdlLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGVkZ2VTaGltOwoKICAgICAgZWRnZVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICB1dGlscy5zaGltQ3JlYXRlT2JqZWN0VVJMKCk7CiAgICAgIGVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbigpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3NhZmFyaSc6CiAgICAgIGlmICghc2FmYXJpU2hpbSkgewogICAgICAgIGxvZ2dpbmcoJ1NhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gc2FmYXJpU2hpbTsKCiAgICAgIHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGxvZ2dpbmcoJ1Vuc3VwcG9ydGVkIGJyb3dzZXIhJyk7CiAgfQp9KSgpOwoKfSx7Ii4vY2hyb21lL2Nocm9tZV9zaGltIjo0LCIuL2VkZ2UvZWRnZV9zaGltIjo2LCIuL2ZpcmVmb3gvZmlyZWZveF9zaGltIjo4LCIuL3NhZmFyaS9zYWZhcmlfc2hpbSI6MTAsIi4vdXRpbHMiOjExfV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CgovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzLmpzJykuYnJvd3NlckRldGFpbHM7Cgp2YXIgY2hyb21lU2hpbSA9IHsKICBzaGltTWVkaWFTdHJlYW06IGZ1bmN0aW9uKCkgewogICAgd2luZG93Lk1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtIHx8IHdpbmRvdy53ZWJraXRNZWRpYVN0cmVhbTsKICB9LAoKICBzaGltT25UcmFjazogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmICEoJ29udHJhY2snIGluCiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbnRyYWNrJywgewogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjazsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24oZikgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spOwogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAvLyBvbmFkZHN0cmVhbSBkb2VzIG5vdCBmaXJlIHdoZW4gYSB0cmFjayBpcyBhZGRlZCB0byBhbiBleGlzdGluZwogICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC4KICAgICAgICAgICAgZS5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCBmdW5jdGlvbih0ZSkgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRlLnRyYWNrOwogICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0ZS50cmFja307CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7CiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHt0cmFjazogdHJhY2t9OwogICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dOwogICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmCiAgICAgICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAgICAgLy8gU2hpbSB0aGUgc3JjT2JqZWN0IHByb3BlcnR5LCBvbmNlLCB3aGVuIEhUTUxNZWRpYUVsZW1lbnQgaXMgZm91bmQuCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcmNPYmplY3Q7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAvLyBVc2UgX3NyY09iamVjdCBhcyBhIHByaXZhdGUgcHJvcGVydHkgZm9yIHRoaXMgc2hpbQogICAgICAgICAgICB0aGlzLl9zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgICAgIGlmICh0aGlzLnNyYykgewogICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXN0cmVhbSkgewogICAgICAgICAgICAgIHRoaXMuc3JjID0gJyc7CiAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTsKICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZWNyZWF0ZSB0aGUgYmxvYiB1cmwgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIG9yCiAgICAgICAgICAgIC8vIHJlbW92ZWQuIERvaW5nIGl0IG1hbnVhbGx5IHNpbmNlIHdlIHdhbnQgdG8gYXZvaWQgYSByZWN1cnNpb24uCiAgICAgICAgICAgIHN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGlmIChzZWxmLnNyYykgewogICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChzZWxmLnNyYyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuc3JjKSB7CiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNlbGYuc3JjKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2VsZi5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsKICAgIC8vIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuCiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgIC8vIFRyYW5zbGF0ZSBpY2VUcmFuc3BvcnRQb2xpY3kgdG8gaWNlVHJhbnNwb3J0cywKICAgICAgICAvLyBzZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD00ODY5CiAgICAgICAgLy8gdGhpcyB3YXMgZml4ZWQgaW4gTTU2IGFsb25nIHdpdGggdW5wcmVmaXhpbmcgUlRDUGVlckNvbm5lY3Rpb24uCiAgICAgICAgbG9nZ2luZygnUGVlckNvbm5lY3Rpb24nKTsKICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7CiAgICAgICAgICBwY0NvbmZpZy5pY2VUcmFuc3BvcnRzID0gcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5ldyB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7CiAgICAgIH07CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CiAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgICAgIGlmICh3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIHZhciBvcmlnR2V0U3RhdHMgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7CiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3RvciwKICAgICAgICBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0CiAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgLy8gV2hlbiBzcGVjLXN0eWxlIGdldFN0YXRzIGlzIHN1cHBvcnRlZCwgcmV0dXJuIHRob3NlIHdoZW4gY2FsbGVkIHdpdGgKICAgICAgLy8gZWl0aGVyIG5vIGFyZ3VtZW50cyBvciB0aGUgc2VsZWN0b3IgYXJndW1lbnQgaXMgbnVsbC4KICAgICAgaWYgKG9yaWdHZXRTdGF0cy5sZW5ndGggPT09IDAgJiYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwKICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpKSB7CiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXSk7CiAgICAgIH0KCiAgICAgIHZhciBmaXhDaHJvbWVTdGF0c18gPSBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgIHZhciBzdGFuZGFyZFJlcG9ydCA9IHt9OwogICAgICAgIHZhciByZXBvcnRzID0gcmVzcG9uc2UucmVzdWx0KCk7CiAgICAgICAgcmVwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHJlcG9ydCkgewogICAgICAgICAgdmFyIHN0YW5kYXJkU3RhdHMgPSB7CiAgICAgICAgICAgIGlkOiByZXBvcnQuaWQsCiAgICAgICAgICAgIHRpbWVzdGFtcDogcmVwb3J0LnRpbWVzdGFtcCwKICAgICAgICAgICAgdHlwZTogewogICAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJywKICAgICAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgICAgICAgICB9W3JlcG9ydC50eXBlXSB8fCByZXBvcnQudHlwZQogICAgICAgICAgfTsKICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICBzdGFuZGFyZFN0YXRzW25hbWVdID0gcmVwb3J0LnN0YXQobmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0czsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0OwogICAgICB9OwoKICAgICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgICB2YXIgbWFrZU1hcFN0YXRzID0gZnVuY3Rpb24oc3RhdHMpIHsKICAgICAgICByZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhzdGF0cykubWFwKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgcmV0dXJuW2tleSwgc3RhdHNba2V5XV07CiAgICAgICAgfSkpOwogICAgICB9OwoKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBhcmdzWzFdKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8sCiAgICAgICAgICAgIGFyZ3VtZW50c1swXV0pOwogICAgICB9CgogICAgICAvLyBwcm9taXNlLXN1cHBvcnQKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIG9yaWdHZXRTdGF0cy5hcHBseShzZWxmLCBbCiAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICByZXNvbHZlKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgICB9LCByZWplY3RdKTsKICAgICAgfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spOwogICAgfTsKCiAgICAvLyBhZGQgcHJvbWlzZSBzdXBwb3J0IC0tIG5hdGl2ZWx5IGF2YWlsYWJsZSBpbiBDaHJvbWUgNTEKICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTEpIHsKICAgICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddCiAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFthcmdzWzBdLCByZXNvbHZlLCByZWplY3RdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgW10pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vIHByb21pc2Ugc3VwcG9ydCBmb3IgY3JlYXRlT2ZmZXIgYW5kIGNyZWF0ZUFuc3dlci4gQXZhaWxhYmxlICh3aXRob3V0CiAgICAvLyBidWdzKSBzaW5jZSBNNTI6IGNyYnVnLzYxOTI4OQogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1MikgewogICAgICBbJ2NyZWF0ZU9mZmVyJywgJ2NyZWF0ZUFuc3dlciddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYKICAgICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0JykpIHsKICAgICAgICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkOwogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFtyZXNvbHZlLCByZWplY3QsIG9wdHNdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gc2hpbSBpbXBsaWNpdCBjcmVhdGlvbiBvZiBSVENTZXNzaW9uRGVzY3JpcHRpb24vUlRDSWNlQ2FuZGlkYXRlCiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ10KICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID8KICAgICAgICAgICAgICAgIFJUQ0ljZUNhbmRpZGF0ZSA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpCiAgICB2YXIgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID0KICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlOwogICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIWFyZ3VtZW50c1swXSkgewogICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHsKICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfQp9OwoKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbU1lZGlhU3RyZWFtOiBjaHJvbWVTaGltLnNoaW1NZWRpYVN0cmVhbSwKICBzaGltT25UcmFjazogY2hyb21lU2hpbS5zaGltT25UcmFjaywKICBzaGltU291cmNlT2JqZWN0OiBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QsCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiwKICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpCn07Cgp9LHsiLi4vdXRpbHMuanMiOjExLCIuL2dldHVzZXJtZWRpYSI6NX1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIGNvbnN0cmFpbnRzVG9DaHJvbWVfID0gZnVuY3Rpb24oYykgewogICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7CiAgICAgIHJldHVybiBjOwogICAgfQogICAgdmFyIGNjID0ge307CiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07CiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7CiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgIH0KICAgICAgdmFyIG9sZG5hbWVfID0gZnVuY3Rpb24ocHJlZml4LCBuYW1lKSB7CiAgICAgICAgaWYgKHByZWZpeCkgewogICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKG5hbWUgPT09ICdkZXZpY2VJZCcpID8gJ3NvdXJjZUlkJyA6IG5hbWU7CiAgICAgIH07CiAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjYy5vcHRpb25hbCA9IGNjLm9wdGlvbmFsIHx8IFtdOwogICAgICAgIHZhciBvYyA9IHt9OwogICAgICAgIGlmICh0eXBlb2Ygci5pZGVhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCdtaW4nLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICAgIG9jID0ge307CiAgICAgICAgICBvY1tvbGRuYW1lXygnbWF4Jywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHsKICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgY2MubWFuZGF0b3J5W29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuZXhhY3Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgWydtaW4nLCAnbWF4J10uZm9yRWFjaChmdW5jdGlvbihtaXgpIHsKICAgICAgICAgIGlmIChyW21peF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgICAgIGNjLm1hbmRhdG9yeVtvbGRuYW1lXyhtaXgsIGtleSldID0gclttaXhdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGlmIChjLmFkdmFuY2VkKSB7CiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7CiAgICB9CiAgICByZXR1cm4gY2M7CiAgfTsKCiAgdmFyIHNoaW1Db25zdHJhaW50c18gPSBmdW5jdGlvbihjb25zdHJhaW50cywgZnVuYykgewogICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICBpZiAoY29uc3RyYWludHMgJiYgY29uc3RyYWludHMuYXVkaW8pIHsKICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7CiAgICB9CiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLnZpZGVvID09PSAnb2JqZWN0JykgewogICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSwgd2hlcmUgaXQgZGVmYXVsdHMgdG8gInVzZXIiLgogICAgICB2YXIgZmFjZSA9IGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgIGZhY2UgPSBmYWNlICYmICgodHlwZW9mIGZhY2UgPT09ICdvYmplY3QnKSA/IGZhY2UgOiB7aWRlYWw6IGZhY2V9KTsKCiAgICAgIGlmICgoZmFjZSAmJiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwKICAgICAgICAgICAgICAgICAgICBmYWNlLmlkZWFsID09PSAndXNlcicgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykpICYmCiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiYKICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGUpKSB7CiAgICAgICAgZGVsZXRlIGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykgewogICAgICAgICAgLy8gTG9vayBmb3IgImJhY2siIGluIGxhYmVsLCBvciB1c2UgbGFzdCBjYW0gKHR5cGljYWxseSBiYWNrIGNhbSkuCiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgZGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgYmFjayA9IGRldmljZXMuZmluZChmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdiYWNrJykgIT09IC0xOwogICAgICAgICAgICB9KSB8fCAoZGV2aWNlcy5sZW5ndGggJiYgZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgICAgaWYgKGJhY2spIHsKICAgICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5kZXZpY2VJZCA9IGZhY2UuZXhhY3QgPyB7ZXhhY3Q6IGJhY2suZGV2aWNlSWR9IDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aWRlYWw6IGJhY2suZGV2aWNlSWR9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMudmlkZW8pOwogICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7CiAgICB9CiAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpOwogIH07CgogIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogewogICAgICAgIFBlcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InCiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50TmFtZSwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlOwogICAgICB9CiAgICB9OwogIH07CgogIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgc2hpbUNvbnN0cmFpbnRzXyhjb25zdHJhaW50cywgZnVuY3Rpb24oYykgewogICAgICBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGMsIG9uU3VjY2VzcywgZnVuY3Rpb24oZSkgewogICAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV87CgogIC8vIFJldHVybnMgdGhlIHJlc3VsdCBvZiBnZXRVc2VyTWVkaWEgYXMgYSBQcm9taXNlLgogIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgICB9KTsKICB9OwoKICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7CiAgICAgIGdldFVzZXJNZWRpYTogZ2V0VXNlck1lZGlhUHJvbWlzZV8sCiAgICAgIGVudW1lcmF0ZURldmljZXM6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICB2YXIga2luZHMgPSB7YXVkaW86ICdhdWRpb2lucHV0JywgdmlkZW86ICd2aWRlb2lucHV0J307CiAgICAgICAgICByZXR1cm4gTWVkaWFTdHJlYW1UcmFjay5nZXRTb3VyY2VzKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgcmVzb2x2ZShkZXZpY2VzLm1hcChmdW5jdGlvbihkZXZpY2UpIHsKICAgICAgICAgICAgICByZXR1cm4ge2xhYmVsOiBkZXZpY2UubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICBraW5kOiBraW5kc1tkZXZpY2Uua2luZF0sCiAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogZGV2aWNlLmlkLAogICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogJyd9OwogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9CgogIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC4KICAvLyBUT0RPKEthcHRlbkphbnNzb24pIHJlbW92ZSBvbmNlIGltcGxlbWVudGVkIGluIENocm9tZSBzdGFibGUuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykgewogICAgICByZXR1cm4gZ2V0VXNlck1lZGlhUHJvbWlzZV8oY29uc3RyYWludHMpOwogICAgfTsKICB9IGVsc2UgewogICAgLy8gRXZlbiB0aG91Z2ggQ2hyb21lIDQ1IGhhcyBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIGFuZCBhIGdldFVzZXJNZWRpYQogICAgLy8gZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UsIGl0IGRvZXMgbm90IGFjY2VwdCBzcGVjLXN0eWxlCiAgICAvLyBjb25zdHJhaW50cy4KICAgIHZhciBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuCiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY3MpIHsKICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGZ1bmN0aW9uKGMpIHsKICAgICAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fAogICAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJycsICdOb3RGb3VuZEVycm9yJyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICAgIH0sIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9OwogIH0KCiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuCiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLgogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQp9OwoKfSx7Ii4uL3V0aWxzLmpzIjoxMX1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7Cgp2YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTsKdmFyIGJyb3dzZXJEZXRhaWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5icm93c2VyRGV0YWlsczsKCnZhciBlZGdlU2hpbSA9IHsKICBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uKCkgewogICAgaWYgKHdpbmRvdy5SVENJY2VHYXRoZXJlcikgewogICAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuCiAgICAgIC8vIE5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlLgogICAgICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUpIHsKICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykgewogICAgICAgICAgcmV0dXJuIGFyZ3M7CiAgICAgICAgfTsKICAgICAgfQogICAgICAvLyBPUlRDIGRvZXMgbm90IGhhdmUgYSBzZXNzaW9uIGRlc2NyaXB0aW9uIG9iamVjdCBidXQKICAgICAgLy8gb3RoZXIgYnJvd3NlcnMgKGkuZS4gQ2hyb21lKSB0aGF0IHdpbGwgc3VwcG9ydCBib3RoIFBDIGFuZCBPUlRDCiAgICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS4KICAgICAgaWYgKCF3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7CiAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHsKICAgICAgICAgIHJldHVybiBhcmdzOwogICAgICAgIH07CiAgICAgIH0KICAgICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHMKICAgICAgLy8gd2hlbiBhIHRyYWNrcyBlbmFibGVkIHByb3BlcnR5IHdhcyBjaGFuZ2VkLgogICAgICB2YXIgb3JpZ01TVEVuYWJsZWQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKAogICAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJyk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSwgJ2VuYWJsZWQnLCB7CiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgb3JpZ01TVEVuYWJsZWQuc2V0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgICAgdmFyIGV2ID0gbmV3IEV2ZW50KCdlbmFibGVkJyk7CiAgICAgICAgICBldi5lbmFibGVkID0gdmFsdWU7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24oY29uZmlnKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIHZhciBfZXZlbnRUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgIFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJywgJ2Rpc3BhdGNoRXZlbnQnXQogICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICAgIHNlbGZbbWV0aG9kXSA9IF9ldmVudFRhcmdldFttZXRob2RdLmJpbmQoX2V2ZW50VGFyZ2V0KTsKICAgICAgICAgIH0pOwoKICAgICAgdGhpcy5vbmljZWNhbmRpZGF0ZSA9IG51bGw7CiAgICAgIHRoaXMub25hZGRzdHJlYW0gPSBudWxsOwogICAgICB0aGlzLm9udHJhY2sgPSBudWxsOwogICAgICB0aGlzLm9ucmVtb3Zlc3RyZWFtID0gbnVsbDsKICAgICAgdGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIHRoaXMub25uZWdvdGlhdGlvbm5lZWRlZCA9IG51bGw7CiAgICAgIHRoaXMub25kYXRhY2hhbm5lbCA9IG51bGw7CgogICAgICB0aGlzLmxvY2FsU3RyZWFtcyA9IFtdOwogICAgICB0aGlzLnJlbW90ZVN0cmVhbXMgPSBbXTsKICAgICAgdGhpcy5nZXRMb2NhbFN0cmVhbXMgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gc2VsZi5sb2NhbFN0cmVhbXM7CiAgICAgIH07CiAgICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBzZWxmLnJlbW90ZVN0cmVhbXM7CiAgICAgIH07CgogICAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnJywKICAgICAgICBzZHA6ICcnCiAgICAgIH0pOwogICAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgc2RwOiAnJwogICAgICB9KTsKICAgICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9ICdzdGFibGUnOwogICAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9ICduZXcnOwogICAgICB0aGlzLmljZUdhdGhlcmluZ1N0YXRlID0gJ25ldyc7CgogICAgICB0aGlzLmljZU9wdGlvbnMgPSB7CiAgICAgICAgZ2F0aGVyUG9saWN5OiAnYWxsJywKICAgICAgICBpY2VTZXJ2ZXJzOiBbXQogICAgICB9OwogICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICBzd2l0Y2ggKGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICAgIGNhc2UgJ2FsbCc6CiAgICAgICAgICBjYXNlICdyZWxheSc6CiAgICAgICAgICAgIHRoaXMuaWNlT3B0aW9ucy5nYXRoZXJQb2xpY3kgPSBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ25vbmUnOgogICAgICAgICAgICAvLyBGSVhNRTogcmVtb3ZlIG9uY2UgaW1wbGVtZW50YXRpb24gYW5kIHNwZWMgaGF2ZSBhZGRlZCB0aGlzLgogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpY2VUcmFuc3BvcnRQb2xpY3kgIm5vbmUiIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIC8vIGRvbid0IHNldCBpY2VUcmFuc3BvcnRQb2xpY3kuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnVzaW5nQnVuZGxlID0gY29uZmlnICYmIGNvbmZpZy5idW5kbGVQb2xpY3kgPT09ICdtYXgtYnVuZGxlJzsKCiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAvLyBFZGdlIGRvZXMgbm90IGxpa2UKICAgICAgICAvLyAxKSBzdHVuOgogICAgICAgIC8vIDIpIHR1cm46IHRoYXQgZG9lcyBub3QgaGF2ZSBhbGwgb2YgdHVybjpob3N0OnBvcnQ/dHJhbnNwb3J0PXVkcAogICAgICAgIC8vIDMpIHR1cm46IHdpdGggaXB2NiBhZGRyZXNzZXMKICAgICAgICB2YXIgaWNlU2VydmVycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmljZVNlcnZlcnMpKTsKICAgICAgICB0aGlzLmljZU9wdGlvbnMuaWNlU2VydmVycyA9IGljZVNlcnZlcnMuZmlsdGVyKGZ1bmN0aW9uKHNlcnZlcikgewogICAgICAgICAgaWYgKHNlcnZlciAmJiBzZXJ2ZXIudXJscykgewogICAgICAgICAgICB2YXIgdXJscyA9IHNlcnZlci51cmxzOwogICAgICAgICAgICBpZiAodHlwZW9mIHVybHMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgdXJscyA9IFt1cmxzXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmxzID0gdXJscy5maWx0ZXIoZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgICAgcmV0dXJuICh1cmwuaW5kZXhPZigndHVybjonKSA9PT0gMCAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHJhbnNwb3J0PXVkcCcpICE9PSAtMSAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHVybjpbJykgPT09IC0xKSB8fAogICAgICAgICAgICAgICAgICAodXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDAgJiYKICAgICAgICAgICAgICAgICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDE0MzkzKTsKICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgIHJldHVybiAhIXVybHM7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnOwoKICAgICAgLy8gcGVyLXRyYWNrIGljZUdhdGhlcnMsIGljZVRyYW5zcG9ydHMsIGR0bHNUcmFuc3BvcnRzLCBydHBTZW5kZXJzLCAuLi4KICAgICAgLy8gZXZlcnl0aGluZyB0aGF0IGlzIG5lZWRlZCB0byBkZXNjcmliZSBhIFNEUCBtLWxpbmUuCiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gW107CgogICAgICAvLyBzaW5jZSB0aGUgaWNlR2F0aGVyZXIgaXMgY3VycmVudGx5IGNyZWF0ZWQgaW4gY3JlYXRlT2ZmZXIgYnV0IHdlCiAgICAgIC8vIG11c3Qgbm90IGVtaXQgY2FuZGlkYXRlcyB1bnRpbCBhZnRlciBzZXRMb2NhbERlc2NyaXB0aW9uIHdlIGJ1ZmZlcgogICAgICAvLyB0aGVtIGluIHRoaXMgYXJyYXkuCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlciA9IFtdOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwKTsKICAgICAgLy8gRklYTUU6IG5lZWQgdG8gYXBwbHkgaWNlIGNhbmRpZGF0ZXMgaW4gYSB3YXkgd2hpY2ggaXMgYXN5bmMgYnV0CiAgICAgIC8vIGluLW9yZGVyCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlci5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgdmFyIGVuZCA9ICFldmVudC5jYW5kaWRhdGUgfHwgT2JqZWN0LmtleXMoZXZlbnQuY2FuZGlkYXRlKS5sZW5ndGggPT09IDA7CiAgICAgICAgaWYgKGVuZCkgewogICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBzZWN0aW9ucy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAoc2VjdGlvbnNbal0uaW5kZXhPZignXHJcbmE9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJykgPT09IC0xKSB7CiAgICAgICAgICAgICAgc2VjdGlvbnNbal0gKz0gJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCArIDFdICs9CiAgICAgICAgICAgICAgJ2E9JyArIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgKyAnXHJcbic7CiAgICAgICAgfQogICAgICAgIHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICBzZWxmLm9uaWNlY2FuZGlkYXRlKGV2ZW50KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFldmVudC5jYW5kaWRhdGUgJiYgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSAhPT0gJ2NvbXBsZXRlJykgewogICAgICAgICAgdmFyIGNvbXBsZXRlID0gc2VsZi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChjb21wbGV0ZSkgewogICAgICAgICAgICBzZWxmLmljZUdhdGhlcmluZ1N0YXRlID0gJ2NvbXBsZXRlJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIgPSBbXTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWc7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHkKICAgICAgLy8gdG8gdHdvIGRpZmZlcmVudCBzZW5kZXJzIGRvZXMgbm90IHdvcmsgKGJ1aWxkIDEwNTQ3KS4KICAgICAgdmFyIGNsb25lZFN0cmVhbSA9IHN0cmVhbS5jbG9uZSgpOwogICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7CiAgICAgICAgdmFyIGNsb25lZFRyYWNrID0gY2xvbmVkU3RyZWFtLmdldFRyYWNrcygpW2lkeF07CiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5hYmxlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICBjbG9uZWRUcmFjay5lbmFibGVkID0gZXZlbnQuZW5hYmxlZDsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goY2xvbmVkU3RyZWFtKTsKICAgICAgdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgdmFyIGlkeCA9IHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKTsKICAgICAgaWYgKGlkeCA+IC0xKSB7CiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXMuc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKTsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIHJldHVybiAhIXRyYW5zY2VpdmVyLnJ0cFNlbmRlcjsKICAgICAgfSkKICAgICAgLm1hcChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5ydHBTZW5kZXI7CiAgICAgIH0pOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgIH0pCiAgICAgIC5tYXAoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBEZXRlcm1pbmVzIHRoZSBpbnRlcnNlY3Rpb24gb2YgbG9jYWwgYW5kIHJlbW90ZSBjYXBhYmlsaXRpZXMuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9nZXRDb21tb25DYXBhYmlsaXRpZXMgPQogICAgICAgIGZ1bmN0aW9uKGxvY2FsQ2FwYWJpbGl0aWVzLCByZW1vdGVDYXBhYmlsaXRpZXMpIHsKICAgICAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSB7CiAgICAgICAgICAgIGNvZGVjczogW10sCiAgICAgICAgICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLAogICAgICAgICAgICBmZWNNZWNoYW5pc21zOiBbXQogICAgICAgICAgfTsKICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGxDb2RlYykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgckNvZGVjID0gcmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjc1tpXTsKICAgICAgICAgICAgICBpZiAobENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gckNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSAmJgogICAgICAgICAgICAgICAgICBsQ29kZWMuY2xvY2tSYXRlID09PSByQ29kZWMuY2xvY2tSYXRlKSB7CiAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgY2hhbm5lbHMgaXMgdGhlIGhpZ2hlc3QgY29tbW9uIG51bWJlciBvZiBjaGFubmVscwogICAgICAgICAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzID0gTWF0aC5taW4obENvZGVjLm51bUNoYW5uZWxzLAogICAgICAgICAgICAgICAgICAgIHJDb2RlYy5udW1DaGFubmVscyk7CiAgICAgICAgICAgICAgICAvLyBwdXNoIHJDb2RlYyBzbyB3ZSByZXBseSB3aXRoIG9mZmVyZXIgcGF5bG9hZCB0eXBlCiAgICAgICAgICAgICAgICBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLnB1c2gockNvZGVjKTsKCiAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgY29tbW9uIGZlZWRiYWNrIG1lY2hhbmlzbXMKICAgICAgICAgICAgICAgIHJDb2RlYy5ydGNwRmVlZGJhY2sgPSByQ29kZWMucnRjcEZlZWRiYWNrLmZpbHRlcihmdW5jdGlvbihmYikgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxDb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAobENvZGVjLnJ0Y3BGZWVkYmFja1tqXS50eXBlID09PSBmYi50eXBlICYmCiAgICAgICAgICAgICAgICAgICAgICAgIGxDb2RlYy5ydGNwRmVlZGJhY2tbal0ucGFyYW1ldGVyID09PSBmYi5wYXJhbWV0ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBhbHNvIG5lZWQgdG8gZGV0ZXJtaW5lIC5wYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICAvLyAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVucGVlci9vcnRjL2lzc3Vlcy81NjkKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucwogICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGxIZWFkZXJFeHRlbnNpb24pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICBpKyspIHsKICAgICAgICAgICAgICAgICAgdmFyIHJIZWFkZXJFeHRlbnNpb24gPSByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9uc1tpXTsKICAgICAgICAgICAgICAgICAgaWYgKGxIZWFkZXJFeHRlbnNpb24udXJpID09PSBySGVhZGVyRXh0ZW5zaW9uLnVyaSkgewogICAgICAgICAgICAgICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLnB1c2gockhlYWRlckV4dGVuc2lvbik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyBGSVhNRTogZmVjTWVjaGFuaXNtcwogICAgICAgICAgcmV0dXJuIGNvbW1vbkNhcGFiaWxpdGllczsKICAgICAgICB9OwoKICAgIC8vIENyZWF0ZSBJQ0UgZ2F0aGVyZXIsIElDRSB0cmFuc3BvcnQgYW5kIERUTFMgdHJhbnNwb3J0LgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMgPQogICAgICAgIGZ1bmN0aW9uKG1pZCwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgdmFyIGljZUdhdGhlcmVyID0gbmV3IFJUQ0ljZUdhdGhlcmVyKHNlbGYuaWNlT3B0aW9ucyk7CiAgICAgICAgICB2YXIgaWNlVHJhbnNwb3J0ID0gbmV3IFJUQ0ljZVRyYW5zcG9ydChpY2VHYXRoZXJlcik7CiAgICAgICAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlID0gZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJyk7CiAgICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZSA9IHtzZHBNaWQ6IG1pZCwgc2RwTUxpbmVJbmRleDogc2RwTUxpbmVJbmRleH07CgogICAgICAgICAgICB2YXIgY2FuZCA9IGV2dC5jYW5kaWRhdGU7CiAgICAgICAgICAgIHZhciBlbmQgPSAhY2FuZCB8fCBPYmplY3Qua2V5cyhjYW5kKS5sZW5ndGggPT09IDA7CiAgICAgICAgICAgIC8vIEVkZ2UgZW1pdHMgYW4gZW1wdHkgb2JqZWN0IGZvciBSVENJY2VDYW5kaWRhdGVDb21wbGV0ZeKApQogICAgICAgICAgICBpZiAoZW5kKSB7CiAgICAgICAgICAgICAgLy8gcG9seWZpbGwgc2luY2UgUlRDSWNlR2F0aGVyZXIuc3RhdGUgaXMgbm90IGltcGxlbWVudGVkIGluCiAgICAgICAgICAgICAgLy8gRWRnZSAxMDU0NyB5ZXQuCiAgICAgICAgICAgICAgaWYgKGljZUdhdGhlcmVyLnN0YXRlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIFJUQ0ljZUNhbmRpZGF0ZSBkb2Vzbid0IGhhdmUgYSBjb21wb25lbnQsIG5lZWRzIHRvIGJlIGFkZGVkCiAgICAgICAgICAgICAgY2FuZC5jb21wb25lbnQgPSBpY2VUcmFuc3BvcnQuY29tcG9uZW50ID09PSAnUlRDUCcgPyAyIDogMTsKICAgICAgICAgICAgICBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhbCBkZXNjcmlwdGlvbi4KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwKTsKICAgICAgICAgICAgaWYgKCFlbmQpIHsKICAgICAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCArIDFdICs9CiAgICAgICAgICAgICAgICAgICdhPScgKyBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlICsgJ1xyXG4nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNlY3Rpb25zW2V2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4ICsgMV0gKz0KICAgICAgICAgICAgICAgICAgJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwID0gc2VjdGlvbnMuam9pbignJyk7CiAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlcnMgPSBzZWxmLl9wZW5kaW5nT2ZmZXIgPyBzZWxmLl9wZW5kaW5nT2ZmZXIgOgogICAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnM7CiAgICAgICAgICAgIHZhciBjb21wbGV0ZSA9IHRyYW5zY2VpdmVycy5ldmVyeShmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5pY2VHYXRoZXJlciAmJgogICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gRW1pdCBjYW5kaWRhdGUgaWYgbG9jYWxEZXNjcmlwdGlvbiBpcyBzZXQuCiAgICAgICAgICAgIC8vIEFsc28gZW1pdHMgbnVsbCBjYW5kaWRhdGUgd2hlbiBhbGwgZ2F0aGVyZXJzIGFyZSBjb21wbGV0ZS4KICAgICAgICAgICAgc3dpdGNoIChzZWxmLmljZUdhdGhlcmluZ1N0YXRlKSB7CiAgICAgICAgICAgICAgY2FzZSAnbmV3JzoKICAgICAgICAgICAgICAgIGlmICghZW5kKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlci5wdXNoKGV2ZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChlbmQgJiYgY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLnB1c2goCiAgICAgICAgICAgICAgICAgICAgICBuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ2dhdGhlcmluZyc6CiAgICAgICAgICAgICAgICBzZWxmLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzKCk7CiAgICAgICAgICAgICAgICBpZiAoIWVuZCkgewogICAgICAgICAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5vbmljZWNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub25pY2VjYW5kaWRhdGUoZXZlbnQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJykpOwogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5vbmljZWNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub25pY2VjYW5kaWRhdGUobmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdjb21wbGV0ZSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZSc6CiAgICAgICAgICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbi4uLiBjdXJyZW50bHkhCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBkZWZhdWx0OiAvLyBuby1vcC4KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gbmV3IFJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQub25kdGxzc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwogICAgICAgICAgZHRsc1RyYW5zcG9ydC5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIC8vIG9uZXJyb3IgZG9lcyBub3Qgc2V0IHN0YXRlIHRvIGZhaWxlZCBieSBpdHNlbGYuCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhdGUgPSAnZmFpbGVkJzsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyOiBpY2VHYXRoZXJlciwKICAgICAgICAgICAgaWNlVHJhbnNwb3J0OiBpY2VUcmFuc3BvcnQsCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IGR0bHNUcmFuc3BvcnQKICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAvLyBTdGFydCB0aGUgUlRQIFNlbmRlciBhbmQgUmVjZWl2ZXIgZm9yIGEgdHJhbnNjZWl2ZXIuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl90cmFuc2NlaXZlID0gZnVuY3Rpb24odHJhbnNjZWl2ZXIsCiAgICAgICAgc2VuZCwgcmVjdikgewogICAgICB2YXIgcGFyYW1zID0gdGhpcy5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTsKICAgICAgaWYgKHNlbmQgJiYgdHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgcGFyYW1zLnJ0Y3AgPSB7CiAgICAgICAgICBjbmFtZTogU0RQVXRpbHMubG9jYWxDTmFtZQogICAgICAgIH07CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7CiAgICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjOwogICAgICAgIH0KICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc2VuZChwYXJhbXMpOwogICAgICB9CiAgICAgIGlmIChyZWN2ICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgLy8gcmVtb3ZlIFJUWCBmaWVsZCBpbiBFZGdlIDE0OTQyCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycKICAgICAgICAgICAgJiYgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycwogICAgICAgICAgICAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgMTUwMTkpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaChmdW5jdGlvbihwKSB7CiAgICAgICAgICAgIGRlbGV0ZSBwLnJ0eDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICBwYXJhbXMucnRjcCA9IHsKICAgICAgICAgIGNuYW1lOiB0cmFuc2NlaXZlci5jbmFtZQogICAgICAgIH07CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7CiAgICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjOwogICAgICAgIH0KICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5yZWNlaXZlKHBhcmFtcyk7CiAgICAgIH0KICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uID0KICAgICAgICBmdW5jdGlvbihkZXNjcmlwdGlvbikgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgdmFyIHNlY3Rpb25zOwogICAgICAgICAgdmFyIHNlc3Npb25wYXJ0OwogICAgICAgICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHsKICAgICAgICAgICAgLy8gRklYTUU6IFdoYXQgd2FzIHRoZSBwdXJwb3NlIG9mIHRoaXMgZW1wdHkgaWYgc3RhdGVtZW50PwogICAgICAgICAgICAvLyBpZiAoIXRoaXMuX3BlbmRpbmdPZmZlcikgewogICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICBpZiAodGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgICAgICAgLy8gVkVSWSBsaW1pdGVkIHN1cHBvcnQgZm9yIFNEUCBtdW5naW5nLiBMaW1pdGVkIHRvOgogICAgICAgICAgICAgIC8vICogY2hhbmdpbmcgdGhlIG9yZGVyIG9mIGNvZGVjcwogICAgICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTsKICAgICAgICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGNhcHMgPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgICAgIHNlbGYuX3BlbmRpbmdPZmZlcltzZHBNTGluZUluZGV4XS5sb2NhbENhcGFiaWxpdGllcyA9IGNhcHM7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnMgPSB0aGlzLl9wZW5kaW5nT2ZmZXI7CiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3BlbmRpbmdPZmZlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJykgewogICAgICAgICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoc2VsZi5yZW1vdGVEZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgICBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCwKICAgICAgICAgICAgICAgICdhPWljZS1saXRlJykubGVuZ3RoID4gMDsKICAgICAgICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICAgICAgICB2YXIgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjsKICAgICAgICAgICAgICB2YXIgaWNlVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0OwogICAgICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDsKICAgICAgICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllczsKICAgICAgICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgICAgICB2YXIgcmVqZWN0ZWQgPSBtZWRpYVNlY3Rpb24uc3BsaXQoJ1xuJywgMSlbMF0KICAgICAgICAgICAgICAgICAgLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJzsKCiAgICAgICAgICAgICAgaWYgKCFyZWplY3RlZCAmJiAhdHJhbnNjZWl2ZXIuaXNEYXRhY2hhbm5lbCkgewogICAgICAgICAgICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKAogICAgICAgICAgICAgICAgICAgIG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0RHRsc1BhcmFtZXRlcnMoCiAgICAgICAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgICBpZiAoaXNJY2VMaXRlKSB7CiAgICAgICAgICAgICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnc2VydmVyJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIXNlbGYudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsCiAgICAgICAgICAgICAgICAgICAgICBpc0ljZUxpdGUgPyAnY29udHJvbGxpbmcnIDogJ2NvbnRyb2xsZWQnKTsKICAgICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuCiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VsZi5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgICAgIHJlbW90ZUNhcGFiaWxpdGllcyk7CgogICAgICAgICAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFNlbmRlci4gVGhlIFJUQ1J0cFJlY2VpdmVyIGZvciB0aGlzCiAgICAgICAgICAgICAgICAvLyB0cmFuc2NlaXZlciBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgaW4gc2V0UmVtb3RlRGVzY3JpcHRpb24uCiAgICAgICAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHRyYW5zY2VpdmVyLAogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5jb2RlY3MubGVuZ3RoID4gMCwKICAgICAgICAgICAgICAgICAgICBmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSB7CiAgICAgICAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsCiAgICAgICAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwCiAgICAgICAgICB9OwogICAgICAgICAgc3dpdGNoIChkZXNjcmlwdGlvbi50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ29mZmVyJzoKICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1sb2NhbC1vZmZlcicpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdhbnN3ZXInOgogICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdzdGFibGUnKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bnN1cHBvcnRlZCB0eXBlICInICsgZGVzY3JpcHRpb24udHlwZSArCiAgICAgICAgICAgICAgICAgICciJyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gSWYgYSBzdWNjZXNzIGNhbGxiYWNrIHdhcyBwcm92aWRlZCwgZW1pdCBJQ0UgY2FuZGlkYXRlcyBhZnRlciBpdAogICAgICAgICAgLy8gaGFzIGJlZW4gZXhlY3V0ZWQuIE90aGVyd2lzZSwgZW1pdCBjYWxsYmFjayBhZnRlciB0aGUgUHJvbWlzZSBpcwogICAgICAgICAgLy8gcmVzb2x2ZWQuCiAgICAgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJgogICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nOwogICAgICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBjYiA9IGFyZ3VtZW50c1sxXTsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgY2IoKTsKICAgICAgICAgICAgICBpZiAoc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ25ldycpIHsKICAgICAgICAgICAgICAgIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgPSAnZ2F0aGVyaW5nJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2VsZi5fZW1pdEJ1ZmZlcmVkQ2FuZGlkYXRlcygpOwogICAgICAgICAgICB9LCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICBwLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICghaGFzQ2FsbGJhY2spIHsKICAgICAgICAgICAgICBpZiAoc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ25ldycpIHsKICAgICAgICAgICAgICAgIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgPSAnZ2F0aGVyaW5nJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gVXN1YWxseSBjYW5kaWRhdGVzIHdpbGwgYmUgZW1pdHRlZCBlYXJsaWVyLgogICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHNlbGYuX2VtaXRCdWZmZXJlZENhbmRpZGF0ZXMuYmluZChzZWxmKSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gcDsKICAgICAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPQogICAgICAgIGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICB2YXIgc3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKCk7CiAgICAgICAgICB2YXIgcmVjZWl2ZXJMaXN0ID0gW107CiAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgICAgdmFyIGlzSWNlTGl0ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LAogICAgICAgICAgICAgICdhPWljZS1saXRlJykubGVuZ3RoID4gMDsKICAgICAgICAgIHRoaXMudXNpbmdCdW5kbGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCwKICAgICAgICAgICAgICAnYT1ncm91cDpCVU5ETEUgJykubGVuZ3RoID4gMDsKICAgICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgdmFyIG1saW5lID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIHZhciBraW5kID0gbWxpbmVbMF07CiAgICAgICAgICAgIHZhciByZWplY3RlZCA9IG1saW5lWzFdID09PSAnMCc7CiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBTRFBVdGlscy5nZXREaXJlY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CgogICAgICAgICAgICB2YXIgbWlkID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1taWQ6Jyk7CiAgICAgICAgICAgIGlmIChtaWQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgbWlkID0gbWlkWzBdLnN1YnN0cig2KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaWQgPSBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gUmVqZWN0IGRhdGFjaGFubmVscyB3aGljaCBhcmUgbm90IGltcGxlbWVudGVkIHlldC4KICAgICAgICAgICAgaWYgKGtpbmQgPT09ICdhcHBsaWNhdGlvbicgJiYgbWxpbmVbMl0gPT09ICdEVExTL1NDVFAnKSB7CiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICAgICAgICBtaWQ6IG1pZCwKICAgICAgICAgICAgICAgIGlzRGF0YWNoYW5uZWw6IHRydWUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHRyYW5zY2VpdmVyOwogICAgICAgICAgICB2YXIgaWNlR2F0aGVyZXI7CiAgICAgICAgICAgIHZhciBpY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0OwogICAgICAgICAgICB2YXIgcnRwU2VuZGVyOwogICAgICAgICAgICB2YXIgcnRwUmVjZWl2ZXI7CiAgICAgICAgICAgIHZhciBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOwogICAgICAgICAgICB2YXIgcmVjdkVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgICAgdmFyIHRyYWNrOwogICAgICAgICAgICAvLyBGSVhNRTogZW5zdXJlIHRoZSBtZWRpYVNlY3Rpb24gaGFzIHJ0Y3AtbXV4IHNldC4KICAgICAgICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICB2YXIgcmVtb3RlSWNlUGFyYW1ldGVyczsKICAgICAgICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzOwogICAgICAgICAgICBpZiAoIXJlamVjdGVkKSB7CiAgICAgICAgICAgICAgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMobWVkaWFTZWN0aW9uLAogICAgICAgICAgICAgICAgICBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sCiAgICAgICAgICAgICAgICAgIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycy5yb2xlID0gJ2NsaWVudCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVycyA9CiAgICAgICAgICAgICAgICBTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwoKICAgICAgICAgICAgdmFyIGNuYW1lOwogICAgICAgICAgICAvLyBHZXRzIHRoZSBmaXJzdCBTU1JDLiBOb3RlIHRoYXQgd2l0aCBSVFggdGhlcmUgbWlnaHQgYmUgbXVsdGlwbGUKICAgICAgICAgICAgLy8gU1NSQ3MuCiAgICAgICAgICAgIHZhciByZW1vdGVTc3JjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnOwogICAgICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgIGlmIChyZW1vdGVTc3JjKSB7CiAgICAgICAgICAgICAgY25hbWUgPSByZW1vdGVTc3JjLnZhbHVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgaXNDb21wbGV0ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICAgICdhPWVuZC1vZi1jYW5kaWRhdGVzJywgc2Vzc2lvbnBhcnQpLmxlbmd0aCA+IDA7CiAgICAgICAgICAgIHZhciBjYW5kcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9Y2FuZGlkYXRlOicpCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGNhbmQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oY2FuZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY2FuZC5jb21wb25lbnQgPT09ICcxJzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IFJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyhraW5kKTsKCiAgICAgICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZAogICAgICAgICAgICAvLyBpbiBhZGFwdGVyLmpzCiAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoCiAgICAgICAgICAgICAgICBmdW5jdGlvbihjb2RlYykgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGNvbW1vbkNvZGVjcyA9IHNlbGYuX2dldENvbW1vbkNhcGFiaWxpdGllcygKICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKS5jb2RlY3M7CiAgICAgICAgICAgIGNvbW1vbkNvZGVjcyA9IGNvbW1vbkNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHsKICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChjb21tb25Db2RlY3MubGVuZ3RoID09PSAwIHx8CiAgICAgICAgICAgICAgICAoY29tbW9uQ29kZWNzLmluZGV4T2YoJ0gyNjQnKSA9PT0gLTEgJiYKICAgICAgICAgICAgICAgIGNvbW1vbkNvZGVjcy5pbmRleE9mKCdWUDgnKSA9PT0gLTEpKSB7CiAgICAgICAgICAgICAgcmVqZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyAmJiAhcmVqZWN0ZWQpIHsKICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0cyA9IHNlbGYudXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDAgPyB7CiAgICAgICAgICAgICAgICBpY2VHYXRoZXJlcjogc2VsZi50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIsCiAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHNlbGYudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCwKICAgICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IHNlbGYudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQKICAgICAgICAgICAgICB9IDogc2VsZi5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMobWlkLCBzZHBNTGluZUluZGV4KTsKCiAgICAgICAgICAgICAgaWYgKGlzQ29tcGxldGUgJiYgKCFzZWxmLnVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7CiAgICAgICAgICAgICAgICB0cmFuc3BvcnRzLmljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKGNhbmRzKTsKICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gW3sKICAgICAgICAgICAgICAgIHNzcmM6ICgyICogc2RwTUxpbmVJbmRleCArIDIpICogMTAwMQogICAgICAgICAgICAgIH1dOwoKICAgICAgICAgICAgICBydHBSZWNlaXZlciA9IG5ldyBSVENSdHBSZWNlaXZlcih0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsIGtpbmQpOwoKICAgICAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrOwogICAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXJdKTsKICAgICAgICAgICAgICAvLyBGSVhNRTogbm90IGNvcnJlY3Qgd2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgc3RyZWFtcyBidXQgdGhhdCBpcwogICAgICAgICAgICAgIC8vIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluIHRoaXMgc2hpbS4KICAgICAgICAgICAgICBzdHJlYW0uYWRkVHJhY2sodHJhY2spOwoKICAgICAgICAgICAgICAvLyBGSVhNRTogbG9vayBhdCBkaXJlY3Rpb24uCiAgICAgICAgICAgICAgaWYgKHNlbGYubG9jYWxTdHJlYW1zLmxlbmd0aCA+IDAgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0VHJhY2tzKCkubGVuZ3RoID49IHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciBsb2NhbFRyYWNrOwogICAgICAgICAgICAgICAgaWYgKGtpbmQgPT09ICdhdWRpbycpIHsKICAgICAgICAgICAgICAgICAgbG9jYWxUcmFjayA9IHNlbGYubG9jYWxTdHJlYW1zWzBdLmdldEF1ZGlvVHJhY2tzKClbMF07CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtpbmQgPT09ICd2aWRlbycpIHsKICAgICAgICAgICAgICAgICAgbG9jYWxUcmFjayA9IHNlbGYubG9jYWxTdHJlYW1zWzBdLmdldFZpZGVvVHJhY2tzKClbMF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobG9jYWxUcmFjaykgewogICAgICAgICAgICAgICAgICBydHBTZW5kZXIgPSBuZXcgUlRDUnRwU2VuZGVyKGxvY2FsVHJhY2ssCiAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNwb3J0cy5pY2VHYXRoZXJlciwKICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydDogdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQsCiAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllczogbG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IHJlbW90ZUNhcGFiaWxpdGllcywKICAgICAgICAgICAgICAgIHJ0cFNlbmRlcjogcnRwU2VuZGVyLAogICAgICAgICAgICAgICAgcnRwUmVjZWl2ZXI6IHJ0cFJlY2VpdmVyLAogICAgICAgICAgICAgICAga2luZDoga2luZCwKICAgICAgICAgICAgICAgIG1pZDogbWlkLAogICAgICAgICAgICAgICAgY25hbWU6IGNuYW1lLAogICAgICAgICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVyczogc2VuZEVuY29kaW5nUGFyYW1ldGVycywKICAgICAgICAgICAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM6IHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBSZWNlaXZlciBub3cuIFRoZSBSVFBTZW5kZXIgaXMgc3RhcnRlZCBpbgogICAgICAgICAgICAgIC8vIHNldExvY2FsRGVzY3JpcHRpb24uCiAgICAgICAgICAgICAgc2VsZi5fdHJhbnNjZWl2ZShzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSwKICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInICYmICFyZWplY3RlZCkgewogICAgICAgICAgICAgIHRyYW5zY2VpdmVyID0gc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07CiAgICAgICAgICAgICAgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjsKICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgcnRwU2VuZGVyID0gdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICAgICAgICAgIHJ0cFJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllczsKCiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucmVjdkVuY29kaW5nUGFyYW1ldGVycyA9CiAgICAgICAgICAgICAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucmVtb3RlQ2FwYWJpbGl0aWVzID0KICAgICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzOwogICAgICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmNuYW1lID0gY25hbWU7CgogICAgICAgICAgICAgIGlmICgoaXNJY2VMaXRlIHx8IGlzQ29tcGxldGUpICYmIGNhbmRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0LnNldFJlbW90ZUNhbmRpZGF0ZXMoY2FuZHMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIXNlbGYudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0LnN0YXJ0KGljZUdhdGhlcmVyLCByZW1vdGVJY2VQYXJhbWV0ZXJzLAogICAgICAgICAgICAgICAgICAgICdjb250cm9sbGluZycpOwogICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHRyYW5zY2VpdmVyLAogICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAncmVjdm9ubHknLAogICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKTsKCiAgICAgICAgICAgICAgaWYgKHJ0cFJlY2VpdmVyICYmCiAgICAgICAgICAgICAgICAgIChkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKSkgewogICAgICAgICAgICAgICAgdHJhY2sgPSBydHBSZWNlaXZlci50cmFjazsKICAgICAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXJdKTsKICAgICAgICAgICAgICAgIHN0cmVhbS5hZGRUcmFjayh0cmFjayk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBhY3R1YWxseSB0aGUgcmVjZWl2ZXIgc2hvdWxkIGJlIGNyZWF0ZWQgbGF0ZXIuCiAgICAgICAgICAgICAgICBkZWxldGUgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uID0gewogICAgICAgICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLAogICAgICAgICAgICBzZHA6IGRlc2NyaXB0aW9uLnNkcAogICAgICAgICAgfTsKICAgICAgICAgIHN3aXRjaCAoZGVzY3JpcHRpb24udHlwZSkgewogICAgICAgICAgICBjYXNlICdvZmZlcic6CiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ2hhdmUtcmVtb3RlLW9mZmVyJyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2Fuc3dlcic6CiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ3N0YWJsZScpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGUgIicgKyBkZXNjcmlwdGlvbi50eXBlICsKICAgICAgICAgICAgICAgICAgJyInKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdHJlYW0uZ2V0VHJhY2tzKCkubGVuZ3RoKSB7CiAgICAgICAgICAgIHNlbGYucmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtOwogICAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgICAgaWYgKHNlbGYub25hZGRzdHJlYW0gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICBzZWxmLm9uYWRkc3RyZWFtKGV2ZW50KTsKICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgdmFyIHRyYWNrID0gaXRlbVswXTsKICAgICAgICAgICAgICAgIHZhciByZWNlaXZlciA9IGl0ZW1bMV07CiAgICAgICAgICAgICAgICB2YXIgdHJhY2tFdmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjsKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQuc3RyZWFtcyA9IFtzdHJlYW1dOwogICAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KHRyYWNrRXZlbnQpOwogICAgICAgICAgICAgICAgaWYgKHNlbGYub250cmFjayAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLm9udHJhY2sodHJhY2tFdmVudCk7CiAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1sxXSwgMCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAvKiBub3QgeWV0CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5jbG9zZSgpOwogICAgICAgIH0KICAgICAgICAqLwogICAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdG9wKCk7CiAgICAgICAgfQogICAgICAgIGlmICh0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0KSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5zdG9wKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gRklYTUU6IGNsZWFuIHVwIHRyYWNrcywgbG9jYWwgc3RyZWFtcywgcmVtb3RlIHN0cmVhbXMsIGV0YwogICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnY2xvc2VkJyk7CiAgICB9OwoKICAgIC8vIFVwZGF0ZSB0aGUgc2lnbmFsaW5nIHN0YXRlLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlU2lnbmFsaW5nU3RhdGUgPQogICAgICAgIGZ1bmN0aW9uKG5ld1N0YXRlKSB7CiAgICAgICAgICB0aGlzLnNpZ25hbGluZ1N0YXRlID0gbmV3U3RhdGU7CiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3NpZ25hbGluZ3N0YXRlY2hhbmdlJyk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgaWYgKHRoaXMub25zaWduYWxpbmdzdGF0ZWNoYW5nZSAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UoZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZmlyZSB0aGUgbmVnb3RpYXRpb25uZWVkZWQgZXZlbnQuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCA9CiAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAvLyBGaXJlIGF3YXkgKGZvciBub3cpLgogICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgIGlmICh0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQgIT09IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkKGV2ZW50KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbiBzdGF0ZS4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBuZXdTdGF0ZTsKICAgICAgdmFyIHN0YXRlcyA9IHsKICAgICAgICAnbmV3JzogMCwKICAgICAgICBjbG9zZWQ6IDAsCiAgICAgICAgY29ubmVjdGluZzogMCwKICAgICAgICBjaGVja2luZzogMCwKICAgICAgICBjb25uZWN0ZWQ6IDAsCiAgICAgICAgY29tcGxldGVkOiAwLAogICAgICAgIGZhaWxlZDogMAogICAgICB9OwogICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgfSk7CiAgICAgIC8vIElDRVRyYW5zcG9ydC5jb21wbGV0ZWQgYW5kIGNvbm5lY3RlZCBhcmUgdGhlIHNhbWUgZm9yIHRoaXMgcHVycG9zZS4KICAgICAgc3RhdGVzLmNvbm5lY3RlZCArPSBzdGF0ZXMuY29tcGxldGVkOwoKICAgICAgbmV3U3RhdGUgPSAnbmV3JzsKICAgICAgaWYgKHN0YXRlcy5mYWlsZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZmFpbGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGluZyA+IDAgfHwgc3RhdGVzLmNoZWNraW5nID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RpbmcnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5kaXNjb25uZWN0ZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMubmV3ID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ25ldyc7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RlZCA+IDAgfHwgc3RhdGVzLmNvbXBsZXRlZCA+IDApIHsKICAgICAgICBuZXdTdGF0ZSA9ICdjb25uZWN0ZWQnOwogICAgICB9CgogICAgICBpZiAobmV3U3RhdGUgIT09IHNlbGYuaWNlQ29ubmVjdGlvblN0YXRlKSB7CiAgICAgICAgc2VsZi5pY2VDb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScpOwogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgaWYgKHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoZXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgaWYgKHRoaXMuX3BlbmRpbmdPZmZlcikgewogICAgICAgIHRocm93IG5ldyBFcnJvcignY3JlYXRlT2ZmZXIgY2FsbGVkIHdoaWxlIHRoZXJlIGlzIGEgcGVuZGluZyBvZmZlci4nKTsKICAgICAgfQogICAgICB2YXIgb2ZmZXJPcHRpb25zOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgb2ZmZXJPcHRpb25zID0gYXJndW1lbnRzWzBdOwogICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHsKICAgICAgICBvZmZlck9wdGlvbnMgPSBhcmd1bWVudHNbMl07CiAgICAgIH0KCiAgICAgIHZhciB0cmFja3MgPSBbXTsKICAgICAgdmFyIG51bUF1ZGlvVHJhY2tzID0gMDsKICAgICAgdmFyIG51bVZpZGVvVHJhY2tzID0gMDsKICAgICAgLy8gRGVmYXVsdCB0byBzZW5kcmVjdi4KICAgICAgaWYgKHRoaXMubG9jYWxTdHJlYW1zLmxlbmd0aCkgewogICAgICAgIG51bUF1ZGlvVHJhY2tzID0gdGhpcy5sb2NhbFN0cmVhbXNbMF0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGg7CiAgICAgICAgbnVtVmlkZW9UcmFja3MgPSB0aGlzLmxvY2FsU3RyZWFtc1swXS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aDsKICAgICAgfQogICAgICAvLyBEZXRlcm1pbmUgbnVtYmVyIG9mIGF1ZGlvIGFuZCB2aWRlbyB0cmFja3Mgd2UgbmVlZCB0byBzZW5kL3JlY3YuCiAgICAgIGlmIChvZmZlck9wdGlvbnMpIHsKICAgICAgICAvLyBSZWplY3QgQ2hyb21lIGxlZ2FjeSBjb25zdHJhaW50cy4KICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm1hbmRhdG9yeSB8fCBvZmZlck9wdGlvbnMub3B0aW9uYWwpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAgICAgJ0xlZ2FjeSBtYW5kYXRvcnkvb3B0aW9uYWwgY29uc3RyYWludHMgbm90IHN1cHBvcnRlZC4nKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID0gb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW87CiAgICAgICAgfQogICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBudW1WaWRlb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5sb2NhbFN0cmVhbXMubGVuZ3RoKSB7CiAgICAgICAgLy8gUHVzaCBsb2NhbCBzdHJlYW1zLgogICAgICAgIHRoaXMubG9jYWxTdHJlYW1zWzBdLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgIHRyYWNrcy5wdXNoKHsKICAgICAgICAgICAga2luZDogdHJhY2sua2luZCwKICAgICAgICAgICAgdHJhY2s6IHRyYWNrLAogICAgICAgICAgICB3YW50UmVjZWl2ZTogdHJhY2sua2luZCA9PT0gJ2F1ZGlvJyA/CiAgICAgICAgICAgICAgICBudW1BdWRpb1RyYWNrcyA+IDAgOiBudW1WaWRlb1RyYWNrcyA+IDAKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHsKICAgICAgICAgICAgbnVtQXVkaW9UcmFja3MtLTsKICAgICAgICAgIH0gZWxzZSBpZiAodHJhY2sua2luZCA9PT0gJ3ZpZGVvJykgewogICAgICAgICAgICBudW1WaWRlb1RyYWNrcy0tOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIENyZWF0ZSBNLWxpbmVzIGZvciByZWN2b25seSBzdHJlYW1zLgogICAgICB3aGlsZSAobnVtQXVkaW9UcmFja3MgPiAwIHx8IG51bVZpZGVvVHJhY2tzID4gMCkgewogICAgICAgIGlmIChudW1BdWRpb1RyYWNrcyA+IDApIHsKICAgICAgICAgIHRyYWNrcy5wdXNoKHsKICAgICAgICAgICAga2luZDogJ2F1ZGlvJywKICAgICAgICAgICAgd2FudFJlY2VpdmU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgbnVtQXVkaW9UcmFja3MtLTsKICAgICAgICB9CiAgICAgICAgaWYgKG51bVZpZGVvVHJhY2tzID4gMCkgewogICAgICAgICAgdHJhY2tzLnB1c2goewogICAgICAgICAgICBraW5kOiAndmlkZW8nLAogICAgICAgICAgICB3YW50UmVjZWl2ZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBudW1WaWRlb1RyYWNrcy0tOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKCk7CiAgICAgIHZhciB0cmFuc2NlaXZlcnMgPSBbXTsKICAgICAgdHJhY2tzLmZvckVhY2goZnVuY3Rpb24obWxpbmUsIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAvLyBGb3IgZWFjaCB0cmFjaywgY3JlYXRlIGFuIGljZSBnYXRoZXJlciwgaWNlIHRyYW5zcG9ydCwKICAgICAgICAvLyBkdGxzIHRyYW5zcG9ydCwgcG90ZW50aWFsbHkgcnRwc2VuZGVyIGFuZCBydHByZWNlaXZlci4KICAgICAgICB2YXIgdHJhY2sgPSBtbGluZS50cmFjazsKICAgICAgICB2YXIga2luZCA9IG1saW5lLmtpbmQ7CiAgICAgICAgdmFyIG1pZCA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwoKICAgICAgICB2YXIgdHJhbnNwb3J0cyA9IHNlbGYudXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDAgPyB7CiAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyLAogICAgICAgICAgaWNlVHJhbnNwb3J0OiB0cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LAogICAgICAgICAgZHRsc1RyYW5zcG9ydDogdHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQKICAgICAgICB9IDogc2VsZi5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMobWlkLCBzZHBNTGluZUluZGV4KTsKCiAgICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzID0gUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhraW5kKTsKICAgICAgICAvLyBmaWx0ZXIgUlRYIHVudGlsIGFkZGl0aW9uYWwgc3R1ZmYgbmVlZGVkIGZvciBSVFggaXMgaW1wbGVtZW50ZWQKICAgICAgICAvLyBpbiBhZGFwdGVyLmpzCiAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzID0gbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcigKICAgICAgICAgICAgZnVuY3Rpb24oY29kZWMpIHsKICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7CiAgICAgICAgICAgIH0pOwogICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgICAgICAvLyB3b3JrIGFyb3VuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NjU1MgogICAgICAgICAgLy8gYnkgYWRkaW5nIGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTEKICAgICAgICAgIGlmIChjb2RlYy5uYW1lID09PSAnSDI2NCcgJiYKICAgICAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzWydsZXZlbC1hc3ltbWV0cnktYWxsb3dlZCddID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9ICcxJzsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgdmFyIHJ0cFNlbmRlcjsKICAgICAgICB2YXIgcnRwUmVjZWl2ZXI7CgogICAgICAgIC8vIGdlbmVyYXRlIGFuIHNzcmMgbm93LCB0byBiZSB1c2VkIGxhdGVyIGluIHJ0cFNlbmRlci5zZW5kCiAgICAgICAgdmFyIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSBbewogICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMSkgKiAxMDAxCiAgICAgICAgfV07CiAgICAgICAgaWYgKHRyYWNrKSB7CiAgICAgICAgICBydHBTZW5kZXIgPSBuZXcgUlRDUnRwU2VuZGVyKHRyYWNrLCB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1saW5lLndhbnRSZWNlaXZlKSB7CiAgICAgICAgICBydHBSZWNlaXZlciA9IG5ldyBSVENSdHBSZWNlaXZlcih0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsIGtpbmQpOwogICAgICAgIH0KCiAgICAgICAgdHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdID0gewogICAgICAgICAgaWNlR2F0aGVyZXI6IHRyYW5zcG9ydHMuaWNlR2F0aGVyZXIsCiAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0LAogICAgICAgICAgZHRsc1RyYW5zcG9ydDogdHJhbnNwb3J0cy5kdGxzVHJhbnNwb3J0LAogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXM6IGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzOiBudWxsLAogICAgICAgICAgcnRwU2VuZGVyOiBydHBTZW5kZXIsCiAgICAgICAgICBydHBSZWNlaXZlcjogcnRwUmVjZWl2ZXIsCiAgICAgICAgICBraW5kOiBraW5kLAogICAgICAgICAgbWlkOiBtaWQsCiAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOiBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLAogICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczogbnVsbAogICAgICAgIH07CiAgICAgIH0pOwogICAgICBpZiAodGhpcy51c2luZ0J1bmRsZSkgewogICAgICAgIHNkcCArPSAnYT1ncm91cDpCVU5ETEUgJyArIHRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24odCkgewogICAgICAgICAgcmV0dXJuIHQubWlkOwogICAgICAgIH0pLmpvaW4oJyAnKSArICdcclxuJzsKICAgICAgfQogICAgICB0cmFja3MuZm9yRWFjaChmdW5jdGlvbihtbGluZSwgc2RwTUxpbmVJbmRleCkgewogICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsCiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLCAnb2ZmZXInLCBzZWxmLmxvY2FsU3RyZWFtc1swXSk7CiAgICAgIH0pOwoKICAgICAgdGhpcy5fcGVuZGluZ09mZmVyID0gdHJhbnNjZWl2ZXJzOwogICAgICB2YXIgZGVzYyA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oewogICAgICAgIHR5cGU6ICdvZmZlcicsCiAgICAgICAgc2RwOiBzZHAKICAgICAgfSk7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChhcmd1bWVudHNbMF0sIDAsIGRlc2MpOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzYyk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSgpOwogICAgICBpZiAodGhpcy51c2luZ0J1bmRsZSkgewogICAgICAgIHNkcCArPSAnYT1ncm91cDpCVU5ETEUgJyArIHRoaXMudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbih0KSB7CiAgICAgICAgICByZXR1cm4gdC5taWQ7CiAgICAgICAgfSkuam9pbignICcpICsgJ1xyXG4nOwogICAgICB9CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaXNEYXRhY2hhbm5lbCkgewogICAgICAgICAgc2RwICs9ICdtPWFwcGxpY2F0aW9uIDAgRFRMUy9TQ1RQIDUwMDBcclxuJyArCiAgICAgICAgICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcclxuJyArCiAgICAgICAgICAgICAgJ2E9bWlkOicgKyB0cmFuc2NlaXZlci5taWQgKyAnXHJcbic7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLgogICAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSBzZWxmLl9nZXRDb21tb25DYXBhYmlsaXRpZXMoCiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpOwoKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNvbW1vbkNhcGFiaWxpdGllcywKICAgICAgICAgICAgJ2Fuc3dlcicsIHNlbGYubG9jYWxTdHJlYW1zWzBdKTsKICAgICAgfSk7CgogICAgICB2YXIgZGVzYyA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oewogICAgICAgIHR5cGU6ICdhbnN3ZXInLAogICAgICAgIHNkcDogc2RwCiAgICAgIH0pOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzBdLCAwLCBkZXNjKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2MpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkgewogICAgICBpZiAoIWNhbmRpZGF0ZSkgewogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW2pdLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pOwogICAgICAgICAgaWYgKHRoaXMudXNpbmdCdW5kbGUpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbUxpbmVJbmRleCA9IGNhbmRpZGF0ZS5zZHBNTGluZUluZGV4OwogICAgICAgIGlmIChjYW5kaWRhdGUuc2RwTWlkKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zY2VpdmVyc1tpXS5taWQgPT09IGNhbmRpZGF0ZS5zZHBNaWQpIHsKICAgICAgICAgICAgICBtTGluZUluZGV4ID0gaTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1ttTGluZUluZGV4XTsKICAgICAgICBpZiAodHJhbnNjZWl2ZXIpIHsKICAgICAgICAgIHZhciBjYW5kID0gT2JqZWN0LmtleXMoY2FuZGlkYXRlLmNhbmRpZGF0ZSkubGVuZ3RoID4gMCA/CiAgICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZGlkYXRlLmNhbmRpZGF0ZSkgOiB7fTsKICAgICAgICAgIC8vIElnbm9yZSBDaHJvbWUncyBpbnZhbGlkIGNhbmRpZGF0ZXMgc2luY2UgRWRnZSBkb2VzIG5vdCBsaWtlIHRoZW0uCiAgICAgICAgICBpZiAoY2FuZC5wcm90b2NvbCA9PT0gJ3RjcCcgJiYgKGNhbmQucG9ydCA9PT0gMCB8fCBjYW5kLnBvcnQgPT09IDkpKSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIElnbm9yZSBSVENQIGNhbmRpZGF0ZXMsIHdlIGFzc3VtZSBSVENQLU1VWC4KICAgICAgICAgIGlmIChjYW5kLmNvbXBvbmVudCAhPT0gJzEnKSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoY2FuZCk7CgogICAgICAgICAgLy8gdXBkYXRlIHRoZSByZW1vdGVEZXNjcmlwdGlvbi4KICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnModGhpcy5yZW1vdGVEZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgc2VjdGlvbnNbbUxpbmVJbmRleCArIDFdICs9IChjYW5kLnR5cGUgPyBjYW5kaWRhdGUuY2FuZGlkYXRlLnRyaW0oKQogICAgICAgICAgICAgIDogJ2E9ZW5kLW9mLWNhbmRpZGF0ZXMnKSArICdcclxuJzsKICAgICAgICAgIHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwID0gc2VjdGlvbnMuam9pbignJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzFdLCAwKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHByb21pc2VzID0gW107CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICBbJ3J0cFNlbmRlcicsICdydHBSZWNlaXZlcicsICdpY2VHYXRoZXJlcicsICdpY2VUcmFuc3BvcnQnLAogICAgICAgICAgICAnZHRsc1RyYW5zcG9ydCddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyW21ldGhvZF0pIHsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godHJhbnNjZWl2ZXJbbWV0aG9kXS5nZXRTdGF0cygpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICAgICAgYXJndW1lbnRzWzFdOwogICAgICB2YXIgZml4U3RhdHNUeXBlID0gZnVuY3Rpb24oc3RhdCkgewogICAgICAgIHN0YXQudHlwZSA9IHsKICAgICAgICAgIGluYm91bmRydHA6ICdpbmJvdW5kLXJ0cCcsCiAgICAgICAgICBvdXRib3VuZHJ0cDogJ291dGJvdW5kLXJ0cCcsCiAgICAgICAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLAogICAgICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLAogICAgICAgICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZScKICAgICAgICB9W3N0YXQudHlwZV0gfHwgc3RhdC50eXBlOwogICAgICAgIHJldHVybiBzdGF0OwogICAgICB9OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnQKICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBNYXAoKTsKICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihyZXMpIHsKICAgICAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgICAgICAgICByZXN1bHRbaWRdLnR5cGUgPSBmaXhTdGF0c1R5cGUocmVzdWx0W2lkXSk7CiAgICAgICAgICAgICAgcmVzdWx0cy5zZXQoaWQsIHJlc3VsdFtpZF0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNiLCAwLCByZXN1bHRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKICB9Cn07CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gewogIHNoaW1QZWVyQ29ubmVjdGlvbjogZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uLAogIHNoaW1HZXRVc2VyTWVkaWE6IHJlcXVpcmUoJy4vZ2V0dXNlcm1lZGlhJykKfTsKCn0seyIuLi91dGlscyI6MTEsIi4vZ2V0dXNlcm1lZGlhIjo3LCJzZHAiOjF9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCiAvKiBlc2xpbnQtZW52IG5vZGUgKi8KJ3VzZSBzdHJpY3QnOwoKLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgewogIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZToge1Blcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcid9W2UubmFtZV0gfHwgZS5uYW1lLAogICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsCiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWU7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgLy8gZ2V0VXNlck1lZGlhIGVycm9yIHNoaW0uCiAgdmFyIG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS4KICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBvcmlnR2V0VXNlck1lZGlhKGMpLmNhdGNoKGZ1bmN0aW9uKGUpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpOwogICAgfSk7CiAgfTsKfTsKCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7Cgp2YXIgYnJvd3NlckRldGFpbHMgPSByZXF1aXJlKCcuLi91dGlscycpLmJyb3dzZXJEZXRhaWxzOwoKdmFyIGZpcmVmb3hTaGltID0gewogIHNoaW1PblRyYWNrOiBmdW5jdGlvbigpIHsKICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnb250cmFjaycgaW4KICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29udHJhY2snLCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9vbnRyYWNrOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbihmKSB7CiAgICAgICAgICBpZiAodGhpcy5fb250cmFjaykgewogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayk7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2sgPSBmKTsKICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7CiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHt0cmFjazogdHJhY2t9OwogICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dOwogICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24oKSB7CiAgICAvLyBGaXJlZm94IGhhcyBzdXBwb3J0ZWQgbW96U3JjT2JqZWN0IHNpbmNlIEZGMjIsIHVucHJlZml4ZWQgaW4gNDIuCiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmCiAgICAgICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAgICAgLy8gU2hpbSB0aGUgc3JjT2JqZWN0IHByb3BlcnR5LCBvbmNlLCB3aGVuIEhUTUxNZWRpYUVsZW1lbnQgaXMgZm91bmQuCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm1velNyY09iamVjdDsKICAgICAgICAgIH0sCiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgICAgICB0aGlzLm1velNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCgogIHNoaW1QZWVyQ29ubmVjdGlvbjogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHwKICAgICAgICB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24pKSB7CiAgICAgIHJldHVybjsgLy8gcHJvYmFibHkgbWVkaWEucGVlcmNvbm5lY3Rpb24uZW5hYmxlZD1mYWxzZSBpbiBhYm91dDpjb25maWcKICAgIH0KICAgIC8vIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuCiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgMzgpIHsKICAgICAgICAgIC8vIC51cmxzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gRkYgPCAzOC4KICAgICAgICAgIC8vIGNyZWF0ZSBSVENJY2VTZXJ2ZXJzIHdpdGggYSBzaW5nbGUgdXJsLgogICAgICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAgICAgdmFyIG5ld0ljZVNlcnZlcnMgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07CiAgICAgICAgICAgICAgaWYgKHNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlcnZlci51cmxzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBuZXdTZXJ2ZXIgPSB7CiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIudXJsc1tqXQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBpZiAoc2VydmVyLnVybHNbal0uaW5kZXhPZigndHVybicpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3U2VydmVyLnVzZXJuYW1lID0gc2VydmVyLnVzZXJuYW1lOwogICAgICAgICAgICAgICAgICAgIG5ld1NlcnZlci5jcmVkZW50aWFsID0gc2VydmVyLmNyZWRlbnRpYWw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKG5ld1NlcnZlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGNDb25maWcuaWNlU2VydmVycyA9IG5ld0ljZVNlcnZlcnM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgbW96UlRDUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpOwogICAgICB9OwogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gbW96UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlOwoKICAgICAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS4KICAgICAgaWYgKG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBtb3pSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gbW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uOwogICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gbW96UlRDSWNlQ2FuZGlkYXRlOwogICAgfQoKICAgIC8vIHNoaW0gYXdheSBuZWVkIGZvciBvYnNvbGV0ZSBSVENJY2VDYW5kaWRhdGUvUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLgogICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddCiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICB2YXIgbmF0aXZlTWV0aG9kID0gUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07CiAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBuZXcgKChtZXRob2QgPT09ICdhZGRJY2VDYW5kaWRhdGUnKSA/CiAgICAgICAgICAgICAgICBSVENJY2VDYW5kaWRhdGUgOiBSVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7CiAgICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH07CiAgICAgICAgfSk7CgogICAgLy8gc3VwcG9ydCBmb3IgYWRkSWNlQ2FuZGlkYXRlKG51bGwgb3IgdW5kZWZpbmVkKQogICAgdmFyIG5hdGl2ZUFkZEljZUNhbmRpZGF0ZSA9CiAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTsKICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKCFhcmd1bWVudHNbMF0pIHsKICAgICAgICBpZiAoYXJndW1lbnRzWzFdKSB7CiAgICAgICAgICBhcmd1bWVudHNbMV0uYXBwbHkobnVsbCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgfQogICAgICByZXR1cm4gbmF0aXZlQWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwoKICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnQKICAgIHZhciBtYWtlTWFwU3RhdHMgPSBmdW5jdGlvbihzdGF0cykgewogICAgICB2YXIgbWFwID0gbmV3IE1hcCgpOwogICAgICBPYmplY3Qua2V5cyhzdGF0cykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgICBtYXAuc2V0KGtleSwgc3RhdHNba2V5XSk7CiAgICAgICAgbWFwW2tleV0gPSBzdGF0c1trZXldOwogICAgICB9KTsKICAgICAgcmV0dXJuIG1hcDsKICAgIH07CgogICAgdmFyIG1vZGVyblN0YXRzVHlwZXMgPSB7CiAgICAgIGluYm91bmRydHA6ICdpbmJvdW5kLXJ0cCcsCiAgICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJywKICAgICAgY2FuZGlkYXRlcGFpcjogJ2NhbmRpZGF0ZS1wYWlyJywKICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLAogICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgfTsKCiAgICB2YXIgbmF0aXZlR2V0U3RhdHMgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7CiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3Rvciwgb25TdWNjLCBvbkVycikgewogICAgICByZXR1cm4gbmF0aXZlR2V0U3RhdHMuYXBwbHkodGhpcywgW3NlbGVjdG9yIHx8IG51bGxdKQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHN0YXRzKSB7CiAgICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQ4KSB7CiAgICAgICAgICAgIHN0YXRzID0gbWFrZU1hcFN0YXRzKHN0YXRzKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTMgJiYgIW9uU3VjYykgewogICAgICAgICAgICAvLyBTaGltIG9ubHkgcHJvbWlzZSBnZXRTdGF0cyB3aXRoIHNwZWMtaHlwaGVucyBpbiB0eXBlIG5hbWVzCiAgICAgICAgICAgIC8vIExlYXZlIGNhbGxiYWNrIHZlcnNpb24gYWxvbmU7IG1pc2Mgb2xkIHVzZXMgb2YgZm9yRWFjaCBiZWZvcmUgTWFwCiAgICAgICAgICAgIHN0YXRzLmZvckVhY2goZnVuY3Rpb24oc3RhdCkgewogICAgICAgICAgICAgIHN0YXQudHlwZSA9IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN0YXRzOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4ob25TdWNjLCBvbkVycik7CiAgICB9OwogIH0KfTsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbU9uVHJhY2s6IGZpcmVmb3hTaGltLnNoaW1PblRyYWNrLAogIHNoaW1Tb3VyY2VPYmplY3Q6IGZpcmVmb3hTaGltLnNoaW1Tb3VyY2VPYmplY3QsCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24sCiAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKQp9OwoKfSx7Ii4uL3V0aWxzIjoxMSwiLi9nZXR1c2VybWVkaWEiOjl9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCiAvKiBlc2xpbnQtZW52IG5vZGUgKi8KJ3VzZSBzdHJpY3QnOwoKdmFyIGxvZ2dpbmcgPSByZXF1aXJlKCcuLi91dGlscycpLmxvZzsKdmFyIGJyb3dzZXJEZXRhaWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5icm93c2VyRGV0YWlsczsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsKICB2YXIgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IHsKICAgICAgICBTZWN1cml0eUVycm9yOiAnTm90QWxsb3dlZEVycm9yJywKICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InCiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IHsKICAgICAgICAnVGhlIG9wZXJhdGlvbiBpcyBpbnNlY3VyZS4nOiAnVGhlIHJlcXVlc3QgaXMgbm90IGFsbG93ZWQgYnkgdGhlICcgKwogICAgICAgICd1c2VyIGFnZW50IG9yIHRoZSBwbGF0Zm9ybSBpbiB0aGUgY3VycmVudCBjb250ZXh0LicKICAgICAgfVtlLm1lc3NhZ2VdIHx8IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LAogICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArICh0aGlzLm1lc3NhZ2UgJiYgJzogJykgKyB0aGlzLm1lc3NhZ2U7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgLy8gZ2V0VXNlck1lZGlhIGNvbnN0cmFpbnRzIHNoaW0uCiAgdmFyIGdldFVzZXJNZWRpYV8gPSBmdW5jdGlvbihjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7CiAgICB2YXIgY29uc3RyYWludHNUb0ZGMzdfID0gZnVuY3Rpb24oYykgewogICAgICBpZiAodHlwZW9mIGMgIT09ICdvYmplY3QnIHx8IGMucmVxdWlyZSkgewogICAgICAgIHJldHVybiBjOwogICAgICB9CiAgICAgIHZhciByZXF1aXJlID0gW107CiAgICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PT0gJ3JlcXVpcmUnIHx8IGtleSA9PT0gJ2FkdmFuY2VkJyB8fCBrZXkgPT09ICdtZWRpYVNvdXJjZScpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHIgPSBjW2tleV0gPSAodHlwZW9mIGNba2V5XSA9PT0gJ29iamVjdCcpID8KICAgICAgICAgICAgY1trZXldIDoge2lkZWFsOiBjW2tleV19OwogICAgICAgIGlmIChyLm1pbiAhPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgIHIubWF4ICE9PSB1bmRlZmluZWQgfHwgci5leGFjdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXF1aXJlLnB1c2goa2V5KTsKICAgICAgICB9CiAgICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaWYgKHR5cGVvZiByLmV4YWN0ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICByLiBtaW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjW2tleV0gPSByLmV4YWN0OwogICAgICAgICAgfQogICAgICAgICAgZGVsZXRlIHIuZXhhY3Q7CiAgICAgICAgfQogICAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGMuYWR2YW5jZWQgPSBjLmFkdmFuY2VkIHx8IFtdOwogICAgICAgICAgdmFyIG9jID0ge307CiAgICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIG9jW2tleV0gPSB7bWluOiByLmlkZWFsLCBtYXg6IHIuaWRlYWx9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2Nba2V5XSA9IHIuaWRlYWw7CiAgICAgICAgICB9CiAgICAgICAgICBjLmFkdmFuY2VkLnB1c2gob2MpOwogICAgICAgICAgZGVsZXRlIHIuaWRlYWw7CiAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHIpLmxlbmd0aCkgewogICAgICAgICAgICBkZWxldGUgY1trZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChyZXF1aXJlLmxlbmd0aCkgewogICAgICAgIGMucmVxdWlyZSA9IHJlcXVpcmU7CiAgICAgIH0KICAgICAgcmV0dXJuIGM7CiAgICB9OwogICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDM4KSB7CiAgICAgIGxvZ2dpbmcoJ3NwZWM6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICBpZiAoY29uc3RyYWludHMuYXVkaW8pIHsKICAgICAgICBjb25zdHJhaW50cy5hdWRpbyA9IGNvbnN0cmFpbnRzVG9GRjM3Xyhjb25zdHJhaW50cy5hdWRpbyk7CiAgICAgIH0KICAgICAgaWYgKGNvbnN0cmFpbnRzLnZpZGVvKSB7CiAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMudmlkZW8pOwogICAgICB9CiAgICAgIGxvZ2dpbmcoJ2ZmMzc6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgfQogICAgcmV0dXJuIG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIG9uU3VjY2VzcywgZnVuY3Rpb24oZSkgewogICAgICBvbkVycm9yKHNoaW1FcnJvcl8oZSkpOwogICAgfSk7CiAgfTsKCiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuCiAgdmFyIGdldFVzZXJNZWRpYVByb21pc2VfID0gZnVuY3Rpb24oY29uc3RyYWludHMpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTsKICAgIH0pOwogIH07CgogIC8vIFNoaW0gZm9yIG1lZGlhRGV2aWNlcyBvbiBvbGRlciB2ZXJzaW9ucy4KICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7Z2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXywKICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7IH0sCiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9CiAgICB9OwogIH0KICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgPQogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgfHwgZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgICAgIHZhciBpbmZvcyA9IFsKICAgICAgICAgICAge2tpbmQ6ICdhdWRpb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30sCiAgICAgICAgICAgIHtraW5kOiAndmlkZW9pbnB1dCcsIGRldmljZUlkOiAnZGVmYXVsdCcsIGxhYmVsOiAnJywgZ3JvdXBJZDogJyd9CiAgICAgICAgICBdOwogICAgICAgICAgcmVzb2x2ZShpbmZvcyk7CiAgICAgICAgfSk7CiAgICAgIH07CgogIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDEpIHsKICAgIC8vIFdvcmsgYXJvdW5kIGh0dHA6Ly9idWd6aWwubGEvMTE2OTY2NQogICAgdmFyIG9yZ0VudW1lcmF0ZURldmljZXMgPQogICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcy5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBvcmdFbnVtZXJhdGVEZXZpY2VzKCkudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoZS5uYW1lID09PSAnTm90Rm91bmRFcnJvcicpIHsKICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgZTsKICAgICAgfSk7CiAgICB9OwogIH0KICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQ5KSB7CiAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLgogICAgICAgIGJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHsKICAgICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgICAvLyBXb3JrIGFyb3VuZCBodHRwczovL2J1Z3ppbC5sYS84MDIzMjYKICAgICAgICBpZiAoYy5hdWRpbyAmJiAhc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoIHx8CiAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUaGUgb2JqZWN0IGNhbiBub3QgYmUgZm91bmQgaGVyZS4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm90Rm91bmRFcnJvcicpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICB9LCBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpOwogICAgICB9KTsKICAgIH07CiAgfQogIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7CiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQ0KSB7CiAgICAgIHJldHVybiBnZXRVc2VyTWVkaWFfKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpOwogICAgfQogICAgLy8gUmVwbGFjZSBGaXJlZm94IDQ0KydzIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2l0aCB1bnByZWZpeGVkIHZlcnNpb24uCiAgICBjb25zb2xlLndhcm4oJ25hdmlnYXRvci5nZXRVc2VyTWVkaWEgaGFzIGJlZW4gcmVwbGFjZWQgYnkgJyArCiAgICAgICAgICAgICAgICAgJ25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhJyk7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpOwogIH07Cn07Cgp9LHsiLi4vdXRpbHMiOjExfV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KJ3VzZSBzdHJpY3QnOwp2YXIgc2FmYXJpU2hpbSA9IHsKICAvLyBUT0RPOiBEckFsZXgsIHNob3VsZCBiZSBoZXJlLCBkb3VibGUgY2hlY2sgYWdhaW5zdCBMYXlvdXRUZXN0cwogIC8vIHNoaW1PblRyYWNrOiBmdW5jdGlvbigpIHsgfSwKCiAgLy8gVE9ETzogb25jZSB0aGUgYmFjay1lbmQgZm9yIHRoZSBtYWMgcG9ydCBpcyBkb25lLCBhZGQuCiAgLy8gVE9ETzogY2hlY2sgZm9yIHdlYmtpdEdUSysKICAvLyBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uKCkgeyB9LAoKICBzaGltR2V0VXNlck1lZGlhOiBmdW5jdGlvbigpIHsKICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhOwogIH0KfTsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbUdldFVzZXJNZWRpYTogc2FmYXJpU2hpbS5zaGltR2V0VXNlck1lZGlhCiAgLy8gVE9ETwogIC8vIHNoaW1PblRyYWNrOiBzYWZhcmlTaGltLnNoaW1PblRyYWNrLAogIC8vIHNoaW1QZWVyQ29ubmVjdGlvbjogc2FmYXJpU2hpbS5zaGltUGVlckNvbm5lY3Rpb24KfTsKCn0se31dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCiAvKiBlc2xpbnQtZW52IG5vZGUgKi8KJ3VzZSBzdHJpY3QnOwoKdmFyIGxvZ0Rpc2FibGVkXyA9IHRydWU7CgovLyBVdGlsaXR5IG1ldGhvZHMuCnZhciB1dGlscyA9IHsKICBkaXNhYmxlTG9nOiBmdW5jdGlvbihib29sKSB7CiAgICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykgewogICAgICByZXR1cm4gbmV3IEVycm9yKCdBcmd1bWVudCB0eXBlOiAnICsgdHlwZW9mIGJvb2wgKwogICAgICAgICAgJy4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uJyk7CiAgICB9CiAgICBsb2dEaXNhYmxlZF8gPSBib29sOwogICAgcmV0dXJuIChib29sKSA/ICdhZGFwdGVyLmpzIGxvZ2dpbmcgZGlzYWJsZWQnIDoKICAgICAgICAnYWRhcHRlci5qcyBsb2dnaW5nIGVuYWJsZWQnOwogIH0sCgogIGxvZzogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKGxvZ0Rpc2FibGVkXykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAgKiBFeHRyYWN0IGJyb3dzZXIgdmVyc2lvbiBvdXQgb2YgdGhlIHByb3ZpZGVkIHVzZXIgYWdlbnQgc3RyaW5nLgogICAqCiAgICogQHBhcmFtIHshc3RyaW5nfSB1YXN0cmluZyB1c2VyQWdlbnQgc3RyaW5nLgogICAqIEBwYXJhbSB7IXN0cmluZ30gZXhwciBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCBhcyBtYXRjaCBjcml0ZXJpYS4KICAgKiBAcGFyYW0geyFudW1iZXJ9IHBvcyBwb3NpdGlvbiBpbiB0aGUgdmVyc2lvbiBzdHJpbmcgdG8gYmUgcmV0dXJuZWQuCiAgICogQHJldHVybiB7IW51bWJlcn0gYnJvd3NlciB2ZXJzaW9uLgogICAqLwogIGV4dHJhY3RWZXJzaW9uOiBmdW5jdGlvbih1YXN0cmluZywgZXhwciwgcG9zKSB7CiAgICB2YXIgbWF0Y2ggPSB1YXN0cmluZy5tYXRjaChleHByKTsKICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaC5sZW5ndGggPj0gcG9zICYmIHBhcnNlSW50KG1hdGNoW3Bvc10sIDEwKTsKICB9LAoKICAvKioKICAgKiBCcm93c2VyIGRldGVjdG9yLgogICAqCiAgICogQHJldHVybiB7b2JqZWN0fSByZXN1bHQgY29udGFpbmluZyBicm93c2VyIGFuZCB2ZXJzaW9uCiAgICogICAgIHByb3BlcnRpZXMuCiAgICovCiAgZGV0ZWN0QnJvd3NlcjogZnVuY3Rpb24oKSB7CiAgICAvLyBSZXR1cm5lZCByZXN1bHQgb2JqZWN0LgogICAgdmFyIHJlc3VsdCA9IHt9OwogICAgcmVzdWx0LmJyb3dzZXIgPSBudWxsOwogICAgcmVzdWx0LnZlcnNpb24gPSBudWxsOwoKICAgIC8vIEZhaWwgZWFybHkgaWYgaXQncyBub3QgYSBicm93c2VyCiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IpIHsKICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnTm90IGEgYnJvd3Nlci4nOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8vIEZpcmVmb3guCiAgICBpZiAobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkgewogICAgICByZXN1bHQuYnJvd3NlciA9ICdmaXJlZm94JzsKICAgICAgcmVzdWx0LnZlcnNpb24gPSB0aGlzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgICAgICAvRmlyZWZveFwvKFswLTldKylcLi8sIDEpOwoKICAgIC8vIGFsbCB3ZWJraXQtYmFzZWQgYnJvd3NlcnMKICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSkgewogICAgICAvLyBDaHJvbWUsIENocm9taXVtLCBXZWJ2aWV3LCBPcGVyYSwgYWxsIHVzZSB0aGUgY2hyb21lIHNoaW0gZm9yIG5vdwogICAgICBpZiAod2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnY2hyb21lJzsKICAgICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgIC9DaHJvbShlfGl1bSlcLyhbMC05XSspXC4vLCAyKTsKCiAgICAgIC8vIFNhZmFyaSBvciB1bmtub3duIHdlYmtpdC1iYXNlZAogICAgICAvLyBmb3IgdGhlIHRpbWUgYmVpbmcgU2FmYXJpIGhhcyBzdXBwb3J0IGZvciBNZWRpYVN0cmVhbXMgYnV0IG5vdCB3ZWJSVEMKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBTYWZhcmkgVUEgc3Vic3RyaW5ncyBvZiBpbnRlcmVzdCBmb3IgcmVmZXJlbmNlOgogICAgICAgIC8vIC0gd2Via2l0IHZlcnNpb246ICAgICAgICAgICBBcHBsZVdlYktpdC82MDIuMS4yNSAoYWxzbyB1c2VkIGluIE9wLENyKQogICAgICAgIC8vIC0gc2FmYXJpIFVJIHZlcnNpb246ICAgICAgICBWZXJzaW9uLzkuMC4zICh1bmlxdWUgdG8gU2FmYXJpKQogICAgICAgIC8vIC0gc2FmYXJpIFVJIHdlYmtpdCB2ZXJzaW9uOiBTYWZhcmkvNjAxLjQuNCAoYWxzbyB1c2VkIGluIE9wLENyKQogICAgICAgIC8vCiAgICAgICAgLy8gaWYgdGhlIHdlYmtpdCB2ZXJzaW9uIGFuZCBzYWZhcmkgVUkgd2Via2l0IHZlcnNpb25zIGFyZSBlcXVhbHMsCiAgICAgICAgLy8gLi4uIHRoaXMgaXMgYSBzdGFibGUgdmVyc2lvbi4KICAgICAgICAvLwogICAgICAgIC8vIG9ubHkgdGhlIGludGVybmFsIHdlYmtpdCB2ZXJzaW9uIGlzIGltcG9ydGFudCB0b2RheSB0byBrbm93IGlmCiAgICAgICAgLy8gbWVkaWEgc3RyZWFtcyBhcmUgc3VwcG9ydGVkCiAgICAgICAgLy8KICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblwvKFxkKykuKFxkKykvKSkgewogICAgICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnc2FmYXJpJzsKICAgICAgICAgIHJlc3VsdC52ZXJzaW9uID0gdGhpcy5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LAogICAgICAgICAgICAvQXBwbGVXZWJLaXRcLyhbMC05XSspXC4vLCAxKTsKCiAgICAgICAgLy8gdW5rbm93biB3ZWJraXQtYmFzZWQgYnJvd3NlcgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQuYnJvd3NlciA9ICdVbnN1cHBvcnRlZCB3ZWJraXQtYmFzZWQgYnJvd3NlciAnICsKICAgICAgICAgICAgICAnd2l0aCBHVU0gc3VwcG9ydCBidXQgbm8gV2ViUlRDIHN1cHBvcnQuJzsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICB9CgogICAgLy8gRWRnZS4KICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJgogICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcLyhcZCspLihcZCspJC8pKSB7CiAgICAgIHJlc3VsdC5icm93c2VyID0gJ2VkZ2UnOwogICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgIC9FZGdlXC8oXGQrKS4oXGQrKSQvLCAyKTsKCiAgICAvLyBEZWZhdWx0IGZhbGx0aHJvdWdoOiBub3Qgc3VwcG9ydGVkLgogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuJzsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0sCgogIC8vIHNoaW1DcmVhdGVPYmplY3RVUkwgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1Tb3VyY2VPYmplY3QgdG8gYXZvaWQgbG9vcC4KCiAgc2hpbUNyZWF0ZU9iamVjdFVSTDogZnVuY3Rpb24oKSB7CiAgICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJgogICAgICAgICAgJ3NyY09iamVjdCcgaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlKSkgewogICAgICAvLyBPbmx5IHNoaW0gQ3JlYXRlT2JqZWN0VVJMIHVzaW5nIHNyY09iamVjdCBpZiBzcmNPYmplY3QgZXhpc3RzLgogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQoKICAgIHZhciBuYXRpdmVDcmVhdGVPYmplY3RVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMLmJpbmQoVVJMKTsKICAgIHZhciBuYXRpdmVSZXZva2VPYmplY3RVUkwgPSBVUkwucmV2b2tlT2JqZWN0VVJMLmJpbmQoVVJMKTsKICAgIHZhciBzdHJlYW1zID0gbmV3IE1hcCgpLCBuZXdJZCA9IDA7CgogICAgVVJMLmNyZWF0ZU9iamVjdFVSTCA9IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICBpZiAoJ2dldFRyYWNrcycgaW4gc3RyZWFtKSB7CiAgICAgICAgdmFyIHVybCA9ICdwb2x5YmxvYjonICsgKCsrbmV3SWQpOwogICAgICAgIHN0cmVhbXMuc2V0KHVybCwgc3RyZWFtKTsKICAgICAgICBjb25zb2xlLmxvZygnVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pIGlzIGRlcHJlY2F0ZWQhICcgKwogICAgICAgICAgICAgICAgICAgICdVc2UgZWxlbS5zcmNPYmplY3QgPSBzdHJlYW0gaW5zdGVhZCEnKTsKICAgICAgICByZXR1cm4gdXJsOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVDcmVhdGVPYmplY3RVUkwoc3RyZWFtKTsKICAgIH07CiAgICBVUkwucmV2b2tlT2JqZWN0VVJMID0gZnVuY3Rpb24odXJsKSB7CiAgICAgIG5hdGl2ZVJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICBzdHJlYW1zLmRlbGV0ZSh1cmwpOwogICAgfTsKCiAgICB2YXIgZHNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3JjJyk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjJywgewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBkc2MuZ2V0LmFwcGx5KHRoaXMpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKHVybCkgewogICAgICAgIHRoaXMuc3JjT2JqZWN0ID0gc3RyZWFtcy5nZXQodXJsKSB8fCBudWxsOwogICAgICAgIHJldHVybiBkc2Muc2V0LmFwcGx5KHRoaXMsIFt1cmxdKTsKICAgICAgfQogICAgfSk7CiAgfQp9OwoKLy8gRXhwb3J0Lgptb2R1bGUuZXhwb3J0cyA9IHsKICBsb2c6IHV0aWxzLmxvZywKICBkaXNhYmxlTG9nOiB1dGlscy5kaXNhYmxlTG9nLAogIGJyb3dzZXJEZXRhaWxzOiB1dGlscy5kZXRlY3RCcm93c2VyKCksCiAgZXh0cmFjdFZlcnNpb246IHV0aWxzLmV4dHJhY3RWZXJzaW9uLAogIHNoaW1DcmVhdGVPYmplY3RVUkw6IHV0aWxzLnNoaW1DcmVhdGVPYmplY3RVUkwKfTsKCn0se31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8qKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwoKcmVxdWlyZSgnd2VicnRjLWFkYXB0ZXInKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqDQogIFRoZSBDb25uZWN0aW9uQ29udHJvbGxlciBoYXMgYSBnZW5lcmljIGRlc2lnbiBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGluIGJvdGggc3R1YnMuDQogIEl0IG1hbmFnZXMgYSBzaW5nbGUgRGF0YUNoYW5uZWwsIGl0IGlzIG5vdCByZXF1ZXN0aW5nIGFjY2VzcyB0byBtZWRpYSBpbnB1dCwgaS5lLg0KICBkb2VzIG5vdCBoYXZlIGF1ZGlvL3ZpZGVvIHN0cmVhbXMuDQoqKi8KdmFyIENvbm5lY3Rpb25Db250cm9sbGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbm5lY3Rpb25Db250cm9sbGVyKG15VXJsLCBzeW5jaGVyLCBjb25maWd1cmF0aW9uLCBjYWxsZXIpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0aW9uQ29udHJvbGxlcik7CgogICAgaWYgKCFteVVybCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgb3duIHVybCAobXlVcmwpIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFzeW5jaGVyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzeW5jaGVyIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWd1cmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgIHRoaXMuX2RvbWFpbiA9IHRoaXMuX2RpdmlkZVVSTChteVVybClbImRvbWFpbiJdOwogICAgdGhpcy5fb2JqZWN0RGVzY1VSTCA9ICdoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4nICsgdGhpcy5fZG9tYWluICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0Nvbm5lY3Rpb24nOwoKICAgIHRoaXMuX215VXJsID0gbXlVcmw7CiAgICB0aGlzLl9zeW5jaGVyID0gc3luY2hlcjsKICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwogICAgdGhpcy5fY2FsbGVyID0gY2FsbGVyOwogICAgdGhpcy5fZGF0YU9iamVjdE9ic2VydmVyOwogICAgdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyOwogICAgdGhpcy5fcGVlclVybDsKICAgIHRoaXMuX2RhdGFDaGFubmVsOwogICAgdGhpcy5fb25TdGF0dXNVcGRhdGU7CgogICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSB0aGlzLl9jcmVhdGVQZWVyQ29ubmVjdGlvbigpOwogIH0KCiAgLy9jcmVhdGUgYSBwZWVyIGNvbm5lY3Rpb24gd2l0aCBpdHMgZXZlbnQgaGFuZGxlcnMKCgogIF9jcmVhdGVDbGFzcyhDb25uZWN0aW9uQ29udHJvbGxlciwgW3sKICAgIGtleTogJ19jcmVhdGVQZWVyQ29ubmVjdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZVBlZXJDb25uZWN0aW9uKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHBjID0gdGhpcy5fcGVlckNvbm5lY3Rpb247CiAgICAgIGlmICghcGMpIHsKICAgICAgICBwYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbih0aGlzLl9jb25maWd1cmF0aW9uKTsKICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IGNyZWF0ZWQgUGVlckNvbm5lY3Rpb24iKTsKCiAgICAgICAgLy8gYWRkIGhhbmRsZXIgZm9yIGRhdGFjaGFubmVsIGNyZWF0aW9uIGZyb20gcGVlciBzaWRlCiAgICAgICAgcGMub25kYXRhY2hhbm5lbCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiBvbmRhdGFjaGFubmVsIC0+IHJlbW90ZSBzaWRlIGhhcyBjcmVhdGVkIGEgZGF0YWNoYW5uZWwiKTsKICAgICAgICAgIF90aGlzLl9kYXRhQ2hhbm5lbCA9IGV2ZW50LmNoYW5uZWw7CiAgICAgICAgICBfdGhpcy5fYWRkRGF0YUNoYW5uZWxMaXN0ZW5lcnMoKTsKICAgICAgICB9OwoKICAgICAgICAvLyBldmVudCBoYW5kbGVyIGZvciBsb2NhbCBpY2UgY2FuZGlkYXRlcwogICAgICAgIHBjLm9uaWNlY2FuZGlkYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogaWNlY2FuZGlkYXRlZXZlbnQgb2NjdXJlZDogIiwgZSk7CiAgICAgICAgICBpZiAoIWUuY2FuZGlkYXRlKSByZXR1cm47CiAgICAgICAgICB2YXIgaWNlY2FuZGlkYXRlID0gewogICAgICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKICAgICAgICAgICAgY2FuZGlkYXRlOiBlLmNhbmRpZGF0ZS5jYW5kaWRhdGUsCiAgICAgICAgICAgIHNkcE1pZDogZS5jYW5kaWRhdGUuc2RwTWlkLAogICAgICAgICAgICBzZHBNTGluZUluZGV4OiBlLmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4CiAgICAgICAgICB9OwogICAgICAgICAgLy8gc2VuZCBjYW5kaWRhdGUgdG8gcmVtb3RlIHBlZXIgYnkgcHVzaGluZyBpdCB0byB0aGUgcmVwb3J0ZXIgb2JqZWN0CiAgICAgICAgICBfdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyLmRhdGEuaWNlQ2FuZGlkYXRlcy5wdXNoKGljZWNhbmRpZGF0ZSk7CiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gcGM7CiAgICB9CgogICAgLyoqDQogICAgUmVhY3QgdG8gdGhlIGdpdmVuIGludml0YXRpb24gZXZlbnQgYnkgc3Vic2NyaWJpbmcgdG8gdGhlIHByb3ZpZGVkIGludml0YXRpb25FdmVudC51cmwuDQogICAgKiovCgogIH0sIHsKICAgIGtleTogJ29ic2VydmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmUoaW52aXRhdGlvbkV2ZW50KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5fcGVlclVybCA9IGludml0YXRpb25FdmVudC5mcm9tOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgX3RoaXMyLl9zeW5jaGVyLnN1YnNjcmliZShfdGhpczIuX29iamVjdERlc2NVUkwsIGludml0YXRpb25FdmVudC51cmwpLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RPYnNlcnZlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCcrW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gZ290IERhdGEgT2JqZWN0IE9ic2VydmVyJywgZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgICAgIF90aGlzMi5fc2V0dXBPYnNlcnZlcihkYXRhT2JqZWN0T2JzZXJ2ZXIpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgICAgIHJlamVjdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICBDcmVhdGVzIGEgc3luY2hlciBvYmplY3QgYW5kIGludml0ZSB0aGUgZ2l2ZW4gcGVlclVybCB0byBzdWJzY3JpYmUgZm9yIGl0Lg0KICAgIEFsc28gY3JlYXRlcyB0aGUgbG9jYWwgb2ZmZXIsIHBlcmZvcm1zIHNldExvY2FsRGVzY3JpcHRpb24gYW5kIHB1Ymxpc2hlcyB0aGUgb2ZmZXIgdmlhIHRoZSByZXBvcnRlciBvYmplY3QuDQogICAgKiovCgogIH0sIHsKICAgIGtleTogJ3JlcG9ydCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwb3J0KHBlZXJVcmwsIG93blJ1bnRpbWVVcmwpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuX3BlZXJVcmwpIHRoaXMuX3BlZXJVcmwgPSBwZWVyVXJsOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvLyAgaWYgd2UgYXJlIHRoZSBjYWxsZXIgKGkuZS4gbm8gcmVwb3J0ZXIgb2JqZWN0IHByZXNlbnQgeWV0LCBpbml0YWxpemUgdGhlIGNyZWF0aW9uIG9mIHRoZSBEYXRhQ2hhbm5lbCkKICAgICAgICBpZiAoX3RoaXMzLl9jYWxsZXIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogd2UgYXJlIGluIGNhbGxlciByb2xlIC0tPiBjcmVhdGVEYXRhQ2hhbm5lbCAuLi4iKTsKICAgICAgICAgIF90aGlzMy5fZGF0YUNoYW5uZWwgPSBfdGhpczMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCJQMlBDaGFubmVsIiwgeyByZWxpYWJsZTogZmFsc2UgfSk7CiAgICAgICAgICBjb25zb2xlLmxvZygiUDJQOiBkYXRhY2hhbm5lbCBvYmplY3QiLCBfdGhpczMuX2RhdGFDaGFubmVsKTsKICAgICAgICAgIF90aGlzMy5fYWRkRGF0YUNoYW5uZWxMaXN0ZW5lcnMoKTsKICAgICAgICB9CgogICAgICAgIC8vIGluaXRpYWwgZGF0YSBmb3IgcmVwb3J0ZXIgc3luYyBvYmplY3QKICAgICAgICB2YXIgZGF0YU9iamVjdCA9IHsKICAgICAgICAgIG5hbWU6ICJQMlBDb25uZWN0aW9uIiwKICAgICAgICAgIHN0YXR1czogIiIsCiAgICAgICAgICBvd25lcjogX3RoaXMzLl9teVVybCwKICAgICAgICAgIHJ1bnRpbWVVUkw6IG93blJ1bnRpbWVVcmwsIC8vIHB1dCB0aGUgb3duIHJ1bnRpbWVVUkwgdG8gdGhlIGRhdGFPYmplY3QgKGFzIGRpc2N1c3NlZCB3aXRoIFBhdWxvKQogICAgICAgICAgY29ubmVjdGlvbkRlc2NyaXB0aW9uOiB7fSwKICAgICAgICAgIGljZUNhbmRpZGF0ZXM6IFtdCiAgICAgICAgfTsKICAgICAgICAvLyBlbnN1cmUgdGhpcyB0aGUgb2JqUmVwb3J0ZXIgb2JqZWN0IGlzIGNyZWF0ZWQgYmVmb3JlIHdlIGNyZWF0ZSB0aGUgb2ZmZXIKICAgICAgICBfdGhpczMuX3N5bmNoZXIuY3JlYXRlKF90aGlzMy5fb2JqZWN0RGVzY1VSTCwgW190aGlzMy5fcGVlclVybF0sIGRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKG9ialJlcG9ydGVyKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ1tQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIENyZWF0ZWQgV2ViUlRDIE9iamVjdCBSZXBvcnRlcicsIG9ialJlcG9ydGVyKTsKCiAgICAgICAgICBfdGhpczMuX2RhdGFPYmplY3RSZXBvcnRlciA9IG9ialJlcG9ydGVyOwogICAgICAgICAgX3RoaXMzLl9kYXRhT2JqZWN0UmVwb3J0ZXIub25TdWJzY3JpcHRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LmFjY2VwdCgpOyAvLyBhbGwgc3Vic2NyaXB0aW9uIHJlcXVlc3RlZCBhcmUgYWNjZXB0ZWQKICAgICAgICAgIH0pOwoKICAgICAgICAgIHZhciBjb25zdHJhaW50cyA9IHsKICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogZmFsc2UsCiAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlVmlkZW86IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgICAgLy8gZWl0aGVyIGludm9rZSBjcmVhdGVPZmZlciBvciBjcmVhdGVBbnN3ZXIsIGRlcGVuZGluZyBvbiB0aGUgcm9sZXMKICAgICAgICAgIHZhciBzZHBQcm9taXNlID0gX3RoaXMzLl9jYWxsZXIgPyBfdGhpczMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKGNvbnN0cmFpbnRzKSA6IF90aGlzMy5fcGVlckNvbm5lY3Rpb24uY3JlYXRlQW5zd2VyKCk7CiAgICAgICAgICBzZHBQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHNkcCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gU0RQIGNyZWF0ZWQiLCBzZHApOwogICAgICAgICAgICBfdGhpczMuX3BlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihzZHApLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSBsb2NhbERlc2NyaXB0aW9uIHNldCBzdWNjZXNzZnVsbHknKTsKICAgICAgICAgICAgICBfdGhpczMuX2RhdGFPYmplY3RSZXBvcnRlci5kYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbiA9IHNkcDsKICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmVqZWN0KCJzZXR0aW5nIG9mIGxvY2FsRGVzY3JpcHRpb24gZmFpbGVkOiAiLCBlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnb25NZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1lc3NhZ2UoY2FsbGJhY2spIHsKICAgICAgLy8gYWRkIHRoZSBtZXNzYWdlIGNhbGxiYWNrCiAgICAgIHRoaXMuX29uRGF0YUNoYW5uZWxNZXNzYWdlID0gY2FsbGJhY2s7CiAgICB9CiAgfSwgewogICAga2V5OiAnb25TdGF0dXNVcGRhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3RhdHVzVXBkYXRlKGNhbGxiYWNrKSB7CiAgICAgIC8vIGFkZCBhIGNvbm5lY3Rpb24gc3RhdHVzIHVwZGF0ZSBjYWxsYmFjawogICAgICB0aGlzLl9vblN0YXR1c1VwZGF0ZSA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ3NlbmRNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kTWVzc2FnZShtKSB7CiAgICAgIC8vIHRvZG86IG9ubHkgc2VuZCBpZiBkYXRhIGNoYW5uZWxkIGlzIGNvbm5lY3RlZAogICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gLS0+IG91dGdvaW5nIG1zZzogIiwgbSk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLnNlbmQobSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnY2xlYW51cCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RSZXBvcnRlcjsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RPYnNlcnZlcjsKICAgICAgaWYgKHRoaXMuX2RhdGFDaGFubmVsKSB0aGlzLl9kYXRhQ2hhbm5lbC5jbG9zZSgpOwogICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24pIHRoaXMuX3BlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsID0gbnVsbDsKICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogJ19hZGREYXRhQ2hhbm5lbExpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxPcGVuKCk7CiAgICAgIH07CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5fb25EYXRhQ2hhbm5lbEVycm9yKGUpOwogICAgICB9OwogICAgICB0aGlzLl9kYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobSkgewogICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSA8LS0gaW5jb21pbmcgbXNnOiAiLCBtKTsKICAgICAgICBpZiAoX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZSkgX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZShtKTsKICAgICAgfTsKICAgICAgdGhpcy5fZGF0YUNoYW5uZWwub25jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxDbG9zZSgpOwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZXR1cE9ic2VydmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBPYnNlcnZlcihkYXRhT2JqZWN0T2JzZXJ2ZXIpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CgogICAgICB2YXIgcGVlckRhdGEgPSB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIuZGF0YTsKICAgICAgY29uc29sZS5pbmZvKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogX3NldHVwT2JzZXJ2ZXIgUGVlciBEYXRhOiIsIHBlZXJEYXRhKTsKCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnY29ubmVjdGlvbkRlc2NyaXB0aW9uJykpIHsKICAgICAgICB0aGlzLl9wcm9jZXNzUGVlckluZm9ybWF0aW9uKHBlZXJEYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnaWNlQ2FuZGlkYXRlcycpKSB7CiAgICAgICAgcGVlckRhdGEuaWNlQ2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpY2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogaGFuZGxlT2JzZXJ2ZXJPYmplY3QgZm9yIGljZSIsIGljZSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oaWNlKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gc2V0dXAgbGlzdGVuZXIgZm9yIGZ1dHVyZSBjaGFuZ2VzIG9uIHRoZSBvYnNlcnZlZCBkYXRhIG9iamVjdAogICAgICBkYXRhT2JqZWN0T2JzZXJ2ZXIub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogT2JzZXJ2ZXIgb24gY2hhbmdlIG1lc3NhZ2U6ICcsIGV2ZW50KTsKICAgICAgICAvLyB3ZSBuZWVkIHRvIHByb2Nlc3MgdGhlIGFuc3dlciBmcm9tIGV2ZW50LmRhdGEgYW5kIHRoZSBjYW5kaWRhdGVzIHdoaWNoIG1pZ2h0IHRyaWNrbGUKICAgICAgICAvLyBmcm9tIGV2ZW50LmRhdGFbMF0KICAgICAgICBpZiAoZXZlbnQuZGF0YVswXSkgewogICAgICAgICAgLy8gWzBdIHRoaXMgZG9lcyB0aGUgdHJpY2sgd2hlbiBpY2UgY2FuZGlkYXRlcyBhcmUgdHJpY2tsaW5nIDspCiAgICAgICAgICBjb25zb2xlLmxvZygnPj5ldmVudC5kYXRhWzBdJywgZXZlbnQuZGF0YVswXSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oZXZlbnQuZGF0YVswXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogPj5ldmVudCcsIGV2ZW50KTsKICAgICAgICAgIF90aGlzNS5fcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihldmVudC5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19wcm9jZXNzUGVlckluZm9ybWF0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihkYXRhKSB7CiAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246ICIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgaWYgKCF0aGlzLl9wZWVyQ29ubmVjdGlvbikgewogICAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246IG5vIFBlZXJDb25uZWN0aW9uIGV4aXN0aW5nIC0tPiBtYXliZSBpbiBkaXNjb25uZWN0aW5nIHByb2Nlc3MuIC0tPiBpZ25vcmluZyB0aGlzIHVwZGF0ZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ29mZmVyJyB8fCBkYXRhLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogUHJvY2VzcyBDb25uZWN0aW9uIERlc2NyaXB0aW9uOiAnLCBkYXRhKTsKICAgICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogcmVtb3RlIHN1Y2Nlc3MiKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiByZW1vdGUgZXJyb3I6ICIsIGUpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoZGF0YS5jYW5kaWRhdGUpIHsKICAgICAgICBjb25zb2xlLmluZm8oJ1Byb2Nlc3MgSWNlIENhbmRpZGF0ZTogJywgZGF0YSk7CiAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUoewogICAgICAgICAgY2FuZGlkYXRlOiBkYXRhLmNhbmRpZGF0ZQogICAgICAgIH0pKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsT3BlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRGF0YUNoYW5uZWxPcGVuKCkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgb3BlbmVkJyk7CiAgICAgIGlmICh0aGlzLl9vblN0YXR1c1VwZGF0ZSkgdGhpcy5fb25TdGF0dXNVcGRhdGUoImxpdmUiKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25EYXRhQ2hhbm5lbEVycm9yJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25EYXRhQ2hhbm5lbEVycm9yKGUpIHsKICAgICAgY29uc29sZS5sb2coJ1tQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIERhdGFDaGFubmVsIGVycm9yOiAnLCBlKTsKICAgICAgaWYgKHRoaXMuX29uU3RhdHVzVXBkYXRlKSB0aGlzLl9vblN0YXR1c1VwZGF0ZSgiZGlzY29ubmVjdGVkIiwgIiIgKyBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25EYXRhQ2hhbm5lbENsb3NlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25EYXRhQ2hhbm5lbENsb3NlKCkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgY2xvc2VkOiAnKTsKICAgICAgaWYgKHRoaXMuX29uU3RhdHVzVXBkYXRlKSB0aGlzLl9vblN0YXR1c1VwZGF0ZSgiZGlzY29ubmVjdGVkIiwgImNsb3NlZCIpOwogICAgfQoKICAgIC8qKg0KICAgICAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQ0KICAgICAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzDQogICAgICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfZGl2aWRlVVJMJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGl2aWRlVVJMKHVybCkgewoKICAgICAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICAgICAgdmFyIHJlID0gLyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7CiAgICAgIHZhciBzdWJzdCA9ICckMSwkMiwkMyc7CiAgICAgIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgICAgIC8vIElmIHRoZSB1cmwgaGFzIG5vIHByb3RvY29sLCB0aGUgZGVmYXVsdCBwcm90b2NvbCBzZXQgaXMgaHR0cHMKICAgICAgaWYgKHBhcnRzWzBdID09PSB1cmwpIHsKICAgICAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICAgICAgcGFydHNbMV0gPSB1cmw7CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHQgPSB7CiAgICAgICAgdHlwZTogcGFydHNbMF0sCiAgICAgICAgZG9tYWluOiBwYXJ0c1sxXSwKICAgICAgICBpZGVudGl0eTogcGFydHNbMl0KICAgICAgfTsKCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ29ubmVjdGlvbkNvbnRyb2xsZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IENvbm5lY3Rpb25Db250cm9sbGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJ3ZWJydGMtYWRhcHRlciI6M31dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Ci8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLwoKLy8gVE9ETzogaW50ZWdyYXRlIHRoZSBzdGF0dXMgZXZlbnRpbmcKCmV4cG9ydHMuZGVmYXVsdCA9IGFjdGl2YXRlOwoKdmFyIF9TeW5jaGVyID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyJyk7Cgp2YXIgX0Nvbm5lY3Rpb25Db250cm9sbGVyID0gcmVxdWlyZSgnLi9Db25uZWN0aW9uQ29udHJvbGxlcicpOwoKdmFyIF9Db25uZWN0aW9uQ29udHJvbGxlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25uZWN0aW9uQ29udHJvbGxlcik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovKioNCiAqIFByb3RvU3R1YiBJbnRlcmZhY2UNCiAqLwp2YXIgUDJQSGFuZGxlclN0dWIgPSBmdW5jdGlvbiAoKSB7CgogIC8qKg0KICAgKiBJbml0aWFsaXNlIHRoZSBwcm90b2NvbCBzdHViIGluY2x1ZGluZyBhcyBpbnB1dCBwYXJhbWV0ZXJzIGl0cyBhbGxvY2F0ZWQNCiAgICogY29tcG9uZW50IHJ1bnRpbWUgdXJsLCB0aGUgcnVudGltZSBCVVMgcG9zdE1lc3NhZ2UgZnVuY3Rpb24gdG8gYmUgaW52b2tlZA0KICAgKiBvbiBtZXNzYWdlcyByZWNlaXZlZCBieSB0aGUgcHJvdG9jb2wgc3R1YiBhbmQgcmVxdWlyZWQgY29uZmlndXJhdGlvbiByZXRyaWV2ZWQgZnJvbSBwcm90b2NvbFN0dWIgZGVzY3JpcHRvci4NCiAgICogQHBhcmFtICB7VVJMLnJ1bnRpbWVQcm90b1N0dWJVUkx9ICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMDQogICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbg0KICAgKiBAcGFyYW0gIHtQcm90b1N0dWJEZXNjcmlwdG9yLkNvbmZpZ3VyYXRpb25EYXRhTGlzdH0gY29uZmlndXJhdGlvbiAgICAgIGNvbmZpZ3VyYXRpb24NCiAgICovCiAgZnVuY3Rpb24gUDJQSGFuZGxlclN0dWIocnVudGltZVByb3RvU3R1YlVSTCwgbWluaUJ1cywgY29uZmlndXJhdGlvbikgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUDJQSGFuZGxlclN0dWIpOwoKICAgIGlmICghcnVudGltZVByb3RvU3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgcnVudGltZVByb3RvU3R1YlVSTCBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFtaW5pQnVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBidXMgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghY29uZmlndXJhdGlvbikgdGhyb3cgbmV3IEVycm9yKCdUaGUgY29uZmlndXJhdGlvbiBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpOwoKICAgIHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgPSBydW50aW1lUHJvdG9TdHViVVJMOwogICAgdGhpcy5fcnVudGltZVVSTCA9IGNvbmZpZ3VyYXRpb24ucnVudGltZVVSTDsKICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwogICAgdGhpcy5fYnVzID0gbWluaUJ1czsKICAgIHRoaXMuX2J1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKCiAgICAgIF90aGlzLl9zZW5kQ2hhbm5lbE1zZyhtc2cpOwogICAgfSk7CgogICAgY29uc29sZS5sb2coJytbUDJQSGFuZGxlclN0dWJdIGRlcGxveWVkICcsIHJ1bnRpbWVQcm90b1N0dWJVUkwpOwogICAgdGhpcy5fc2VuZFN0YXR1cygiZGVwbG95ZWQiKTsKCiAgICB0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcnMgPSB7fTsKCiAgICB0aGlzLl9zeW5jaGVyID0gbmV3IF9TeW5jaGVyLlN5bmNoZXIocnVudGltZVByb3RvU3R1YlVSTCwgbWluaUJ1cywgY29uZmlndXJhdGlvbik7CiAgICB0aGlzLl9zeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uIChldmVudCkgewoKICAgICAgY29uc29sZS5sb2coJytbUDJQSGFuZGxlclN0dWJdIE9uIFN5bmNoZXIgTm90aWZpY2F0aW9uOiAnLCBldmVudCk7CiAgICAgIGV2ZW50LmFjaygyMDApOwoKICAgICAgc3dpdGNoIChldmVudC50eXBlKSB7CgogICAgICAgIGNhc2UgJ2NyZWF0ZSc6CiAgICAgICAgICAvLyBhcyBkaXNjdXNzZWQgd2l0aCBQYXVsbywgd2UgZXhwZWN0IHRoZSAicmVtb3RlUnVudGltZVVSTCIgYXMgZmllbGQgInJ1bnRpbWVVUkwiIGluIHRoZSBpbml0aWFsIGRhdGFPYmplY3QKICAgICAgICAgIC8vIGVtaXQgdGhlICJjcmVhdGUiIGV2ZW50IGFzIHJlcXVlc3RlZCBpbiBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9kZXYtcHJvdG9zdHVicy9pc3N1ZXMvNQogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoImNyZWF0ZSIsIHVuZGVmaW5lZCwgZXZlbnQucnVudGltZVVSTCk7CgogICAgICAgICAgX3RoaXMuX2NyZWF0ZUNvbm5lY3Rpb25Db250cm9sbGVyKGV2ZW50KS50aGVuKGZ1bmN0aW9uIChjb25uZWN0aW9uQ29udHJvbGxlcikgewogICAgICAgICAgICBfdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXJzW2V2ZW50LmZyb21dID0gY29ubmVjdGlvbkNvbnRyb2xsZXI7CiAgICAgICAgICAgIGNvbm5lY3Rpb25Db250cm9sbGVyLm9uU3RhdHVzVXBkYXRlKGZ1bmN0aW9uIChzdGF0dXMsIHJlYXNvbikgewogICAgICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKHN0YXR1cywgcmVhc29uKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbm5lY3Rpb25Db250cm9sbGVyLm9uTWVzc2FnZShmdW5jdGlvbiAobSkgewogICAgICAgICAgICAgIF90aGlzLl9kZWxpdmVyKG0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICAvLyBUT0RPOiBxdWVzdGlvbiBjb2RlIGluIENvbm5lY3RvciAtLT4gdGhlcmUgaXQgZGVsZXRlcyBhbGwgY29udHJvbGxlcnMgLS0+IHdoeT8KICAgICAgICAgIGNvbnNvbGUubG9nKCIrW1AyUEhhbmRsZXJTdHViXSBkZWxldGluZyBjb25uZWN0aW9uIGhhbmRsZXIgZm9yICIgKyBldmVudC5mcm9tKTsKICAgICAgICAgIHZhciBjb25uZWN0aW9uQ29udHJvbGxlciA9IF90aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcnNbZXZlbnQuZnJvbV07CgogICAgICAgICAgaWYgKGNvbm5lY3Rpb25Db250cm9sbGVyKSB7CiAgICAgICAgICAgIGNvbm5lY3Rpb25Db250cm9sbGVyLmNsZWFudXAoKTsKICAgICAgICAgICAgZGVsZXRlIF90aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcnNbZXZlbnQuZnJvbV07CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgfQogICAgfSk7CiAgfQoKICAvKioNCiAgICogVG8gZGlzY29ubmVjdCB0aGUgcHJvdG9jb2wgc3R1Yi4NCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoUDJQSGFuZGxlclN0dWIsIFt7CiAgICBrZXk6ICdkaXNjb25uZWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIGNsZWFudXAgQUxMIGNvbm5lY3Rpb25Db250cm9sbGVycwogICAgICBPYmplY3Qua2V5cyh0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF90aGlzMi5fY29udHJvbGxlcnNba2V5XS5jbGVhbnVwKCk7OwogICAgICAgIGRlbGV0ZSBfdGhpczIuX2NvbnRyb2xsZXJzW2tleV07CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19jcmVhdGVDb25uZWN0aW9uQ29udHJvbGxlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUNvbm5lY3Rpb25Db250cm9sbGVyKGludml0YXRpb25FdmVudCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGNvbm5lY3Rpb25Db250cm9sbGVyID0gbmV3IF9Db25uZWN0aW9uQ29udHJvbGxlcjIuZGVmYXVsdChfdGhpczMuX3J1bnRpbWVQcm90b1N0dWJVUkwsIF90aGlzMy5fc3luY2hlciwgX3RoaXMzLl9jb25maWd1cmF0aW9uLCBmYWxzZSk7CiAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIub2JzZXJ2ZShpbnZpdGF0aW9uRXZlbnQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gY3JlYXRlIHRoZSByZXBvcnRlciBhdXRvbWF0aWNhbGx5CiAgICAgICAgICBjb25uZWN0aW9uQ29udHJvbGxlci5yZXBvcnQoaW52aXRhdGlvbkV2ZW50LmZyb20sIF90aGlzMy5fcnVudGltZVVSTCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJlc29sdmUoY29ubmVjdGlvbkNvbnRyb2xsZXIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kQ2hhbm5lbE1zZycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRDaGFubmVsTXNnKG1zZykgewogICAgICBpZiAodGhpcy5fZmlsdGVyKG1zZykpIHsKICAgICAgICAvLyBUT0RPOiB2ZXJpZnk6IGlzIHRoaXMgc2VsZWN0aW9uIGNvcnJlY3Q/CiAgICAgICAgdmFyIGNvbm5lY3Rpb25Db250cm9sbGVyID0gdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXJzW21zZy50b107CiAgICAgICAgaWYgKGNvbm5lY3Rpb25Db250cm9sbGVyKSBjb25uZWN0aW9uQ29udHJvbGxlci5zZW5kTWVzc2FnZShKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kU3RhdHVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZFN0YXR1cyh2YWx1ZSwgcmVhc29uLCByZW1vdGVSdW50aW1lVVJMKSB7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgZnJvbTogdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICB0bzogdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCArICcvc3RhdHVzJywKICAgICAgICBib2R5OiB7CiAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmIChyZW1vdGVSdW50aW1lVVJMKSBtc2cuYm9keS5yZXNvdXJjZSA9IHJlbW90ZVJ1bnRpbWVVUkw7CgogICAgICBpZiAocmVhc29uKSB7CiAgICAgICAgbXNnLmJvZHkuZGVzYyA9IHJlYXNvbjsKICAgICAgfQogICAgICB0aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBGaWx0ZXIgbWV0aG9kIHRoYXQgc2hvdWxkIGJlIHVzZWQgZm9yIGV2ZXJ5IG1lc3NhZ2VzIGluIGRpcmVjdGlvbjogUHJvdG9zdHViIC0+IE1lc3NhZ2VOb2RlDQogICAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnIE9yaWdpbmFsIG1lc3NhZ2UgZnJvbSB0aGUgTWVzc2FnZUJ1cw0KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgaXQncyB0byBiZSBkZWxpdmVyIGluIHRoZSBNZXNzYWdlTm9kZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfZmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlsdGVyKG1zZykgewogICAgICAvLyB0b2RvOiBvbmx5IHRyeSB0byBzZW5kIHdoZW4gY29ubmVjdGVkIChsaXZlIHN0YXR1cykKCiAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgLyoqDQogICAgICogTWV0aG9kIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZGVsaXZlciB0aGUgbWVzc2FnZSBpbiBkaXJlY3Rpb246IFByb3Rvc3R1YiAtPiBNZXNzYWdlQnVzIChjb3JlKQ0KICAgICAqIEBwYXJhbSAge01lc3NhZ2V9IG1zZyBPcmlnaW5hbCBtZXNzYWdlIGZyb20gdGhlIE1lc3NhZ2VOb2RlDQogICAgICovCgogIH0sIHsKICAgIGtleTogJ19kZWxpdmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsaXZlcihtc2cpIHsKICAgICAgaWYgKCFtc2cuYm9keSkgbXNnLmJvZHkgPSB7fTsKCiAgICAgIG1zZy5ib2R5LnZpYSA9IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFAyUEhhbmRsZXJTdHViOwp9KCk7CgpmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdQMlBIYW5kbGVyU3R1YicsCiAgICBpbnN0YW5jZTogbmV3IFAyUEhhbmRsZXJTdHViKHVybCwgYnVzLCBjb25maWcpCiAgfTsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL0Nvbm5lY3Rpb25Db250cm9sbGVyIjoxMiwic2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyIjoyfV19LHt9LFsxM10pKDEzKQp9KTs=",
      "sourceCodeClassname": "P2PHandlerProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-aaf84b28-7f8b-b2e6-93d7-4784864cd37b2",
    "version": 0.6,
    "description": "Description of P2PHandlerProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "P2PHandlerProtoStub",
    "configuration": {
      "iceServers": [
        {
          "urls": "stun:stun.voiparound.com"
        },
        {
          "urls": "stun:stun.voipbuster.com"
        },
        {
          "urls": "stun:stun.voipstunt.com"
        },
        {
          "urls": "stun:stun.voxgratia.org"
        },
        {
          "urls": "stun:stun.ekiga.net"
        },
        {
          "urls": "stun:stun.schlund.de"
        },
        {
          "urls": "stun:stun.iptel.org"
        },
        {
          "urls": "stun:stun.l.google.com:19302"
        },
        {
          "urls": "stun:stun1.l.google.com:19302"
        },
        {
          "urls": "stun:stun.ideasip.com"
        },
        {
          "urls": "stun:stun4.l.google.com:19302"
        },
        {
          "urls": "stun:stun2.l.google.com:19302"
        },
        {
          "urls": "stun:stun3.l.google.com:19302"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=tcp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=udp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:numb.viagenie.ca",
          "credential": "muazkh",
          "username": "webrtc@live.com"
        }
      ]
    },
    "messageSchemas": "",
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": "",
    "interworking": false
  },
  "P2PRequesterProtoStub": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CgovLyBTRFAgaGVscGVycy4KdmFyIFNEUFV0aWxzID0ge307CgovLyBHZW5lcmF0ZSBhbiBhbHBoYW51bWVyaWMgaWRlbnRpZmllciBmb3IgY25hbWUgb3IgbWlkcy4KLy8gVE9ETzogdXNlIFVVSURzIGluc3RlYWQ/IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODMKU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7Cn07CgovLyBUaGUgUlRDUCBDTkFNRSB1c2VkIGJ5IGFsbCBwZWVyY29ubmVjdGlvbnMgZnJvbSB0aGUgc2FtZSBKUy4KU0RQVXRpbHMubG9jYWxDTmFtZSA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwoKLy8gU3BsaXRzIFNEUCBpbnRvIGxpbmVzLCBkZWFsaW5nIHdpdGggYm90aCBDUkxGIGFuZCBMRi4KU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKGJsb2IpIHsKICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHJldHVybiBsaW5lLnRyaW0oKTsKICB9KTsKfTsKLy8gU3BsaXRzIFNEUCBpbnRvIHNlc3Npb25wYXJ0IGFuZCBtZWRpYXNlY3Rpb25zLiBFbnN1cmVzIENSTEYuClNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7CiAgdmFyIHBhcnRzID0gYmxvYi5zcGxpdCgnXG5tPScpOwogIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHsKICAgIHJldHVybiAoaW5kZXggPiAwID8gJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXHJcbic7CiAgfSk7Cn07CgovLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgpTRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uKGJsb2IsIHByZWZpeCkgewogIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7CiAgfSk7Cn07CgovLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6Ci8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOAovLyBycG9ydCA1NTk5NiIKU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzOwogIC8vIFBhcnNlIGJvdGggdmFyaWFudHMuCiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgfSBlbHNlIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7CiAgfQoKICB2YXIgY2FuZGlkYXRlID0gewogICAgZm91bmRhdGlvbjogcGFydHNbMF0sCiAgICBjb21wb25lbnQ6IHBhcnRzWzFdLAogICAgcHJvdG9jb2w6IHBhcnRzWzJdLnRvTG93ZXJDYXNlKCksCiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSwKICAgIGlwOiBwYXJ0c1s0XSwKICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzVdLCAxMCksCiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnCiAgICB0eXBlOiBwYXJ0c1s3XQogIH07CgogIGZvciAodmFyIGkgPSA4OyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHN3aXRjaCAocGFydHNbaV0pIHsKICAgICAgY2FzZSAncmFkZHInOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncnBvcnQnOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCA9IHBhcnNlSW50KHBhcnRzW2kgKyAxXSwgMTApOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICd0Y3B0eXBlJzoKICAgICAgICBjYW5kaWRhdGUudGNwVHlwZSA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDogLy8gVW5rbm93biBleHRlbnNpb25zIGFyZSBzaWxlbnRseSBpZ25vcmVkLgogICAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gY2FuZGlkYXRlOwp9OwoKLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS4KU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHsKICB2YXIgc2RwID0gW107CiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5jb21wb25lbnQpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTsKICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5pcCk7CiAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpOwoKICB2YXIgdHlwZSA9IGNhbmRpZGF0ZS50eXBlOwogIHNkcC5wdXNoKCd0eXAnKTsKICBzZHAucHVzaCh0eXBlKTsKICBpZiAodHlwZSAhPT0gJ2hvc3QnICYmIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyAmJgogICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQpIHsKICAgIHNkcC5wdXNoKCdyYWRkcicpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzKTsgLy8gd2FzOiByZWxBZGRyCiAgICBzZHAucHVzaCgncnBvcnQnKTsKICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydAogIH0KICBpZiAoY2FuZGlkYXRlLnRjcFR5cGUgJiYgY2FuZGlkYXRlLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09ICd0Y3AnKSB7CiAgICBzZHAucHVzaCgndGNwdHlwZScpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpOwogIH0KICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTsKfTsKCi8vIFBhcnNlcyBhbiBydHBtYXAgbGluZSwgcmV0dXJucyBSVENSdHBDb2RkZWNQYXJhbWV0ZXJzLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzIKU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTsKICB2YXIgcGFyc2VkID0gewogICAgcGF5bG9hZFR5cGU6IHBhcnNlSW50KHBhcnRzLnNoaWZ0KCksIDEwKSAvLyB3YXM6IGlkCiAgfTsKCiAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpOwoKICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdOwogIHBhcnNlZC5jbG9ja1JhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOyAvLyB3YXM6IGNsb2NrcmF0ZQogIC8vIHdhczogY2hhbm5lbHMKICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTsKICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGUgYW4gYT1ydHBtYXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvcgovLyBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICsKICAgICAgKGNvZGVjLm51bUNoYW5uZWxzICE9PSAxID8gJy8nICsgY29kZWMubnVtQ2hhbm5lbHMgOiAnJykgKyAnXHJcbic7Cn07CgovLyBQYXJzZXMgYW4gYT1leHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldApTRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpOwogIHJldHVybiB7CiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSwKICAgIHVyaTogcGFydHNbMV0KICB9Owp9OwoKLy8gR2VuZXJhdGVzIGE9ZXh0bWFwIGxpbmUgZnJvbSBSVENSdHBIZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzIG9yCi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi4KU0RQVXRpbHMud3JpdGVFeHRtYXAgPSBmdW5jdGlvbihoZWFkZXJFeHRlbnNpb24pIHsKICByZXR1cm4gJ2E9ZXh0bWFwOicgKyAoaGVhZGVyRXh0ZW5zaW9uLmlkIHx8IGhlYWRlckV4dGVuc2lvbi5wcmVmZXJyZWRJZCkgKwogICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcclxuJzsKfTsKCi8vIFBhcnNlcyBhbiBmdG1wIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OgovLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vbgovLyBBbHNvIGRlYWxzIHdpdGggdmJyPW9uOyBjbmc9b24KU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkgewogIHZhciBwYXJzZWQgPSB7fTsKICB2YXIga3Y7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIobGluZS5pbmRleE9mKCcgJykgKyAxKS5zcGxpdCgnOycpOwogIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7CiAgICBwYXJzZWRba3ZbMF0udHJpbSgpXSA9IGt2WzFdOwogIH0KICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy4KU0RQVXRpbHMud3JpdGVGbXRwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZSA9ICcnOwogIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogIH0KICBpZiAoY29kZWMucGFyYW1ldGVycyAmJiBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5sZW5ndGgpIHsKICAgIHZhciBwYXJhbXMgPSBbXTsKICAgIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHsKICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7CiAgICB9KTsKICAgIGxpbmUgKz0gJ2E9Zm10cDonICsgcHQgKyAnICcgKyBwYXJhbXMuam9pbignOycpICsgJ1xyXG4nOwogIH0KICByZXR1cm4gbGluZTsKfTsKCi8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQpTRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgcmV0dXJuIHsKICAgIHR5cGU6IHBhcnRzLnNoaWZ0KCksCiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKQogIH07Cn07Ci8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZXMgPSAnJzsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7CiAgICAvLyBGSVhNRTogc3BlY2lhbCBoYW5kbGluZyBmb3IgdHJyLWludD8KICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7CiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArCiAgICAgIChmYi5wYXJhbWV0ZXIgJiYgZmIucGFyYW1ldGVyLmxlbmd0aCA/ICcgJyArIGZiLnBhcmFtZXRlciA6ICcnKSArCiAgICAgICAgICAnXHJcbic7CiAgICB9KTsKICB9CiAgcmV0dXJuIGxpbmVzOwp9OwoKLy8gUGFyc2VzIGFuIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9c3NyYzozNzM1OTI4NTU5IGNuYW1lOnNvbWV0aGluZwpTRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgc3AgPSBsaW5lLmluZGV4T2YoJyAnKTsKICB2YXIgcGFydHMgPSB7CiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMCkKICB9OwogIHZhciBjb2xvbiA9IGxpbmUuaW5kZXhPZignOicsIHNwKTsKICBpZiAoY29sb24gPiAtMSkgewogICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxLCBjb2xvbiAtIHNwIC0gMSk7CiAgICBwYXJ0cy52YWx1ZSA9IGxpbmUuc3Vic3RyKGNvbG9uICsgMSk7CiAgfSBlbHNlIHsKICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgfQogIHJldHVybiBwYXJ0czsKfTsKCi8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LgovLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHkKLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuClNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBmcExpbmUgPSBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkgewogICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1maW5nZXJwcmludDonKSA9PT0gMDsKICB9KVswXS5zdWJzdHIoMTQpOwogIC8vIE5vdGU6IGE9c2V0dXAgbGluZSBpcyBpZ25vcmVkIHNpbmNlIHdlIHVzZSB0aGUgJ2F1dG8nIHJvbGUuCiAgdmFyIGR0bHNQYXJhbWV0ZXJzID0gewogICAgcm9sZTogJ2F1dG8nLAogICAgZmluZ2VycHJpbnRzOiBbewogICAgICBhbGdvcml0aG06IGZwTGluZS5zcGxpdCgnICcpWzBdLAogICAgICB2YWx1ZTogZnBMaW5lLnNwbGl0KCcgJylbMV0KICAgIH1dCiAgfTsKICByZXR1cm4gZHRsc1BhcmFtZXRlcnM7Cn07CgovLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkgewogIHZhciBzZHAgPSAnYT1zZXR1cDonICsgc2V0dXBUeXBlICsgJ1xyXG4nOwogIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmdW5jdGlvbihmcCkgewogICAgc2RwICs9ICdhPWZpbmdlcnByaW50OicgKyBmcC5hbGdvcml0aG0gKyAnICcgKyBmcC52YWx1ZSArICdcclxuJzsKICB9KTsKICByZXR1cm4gc2RwOwp9OwovLyBQYXJzZXMgSUNFIGluZm9ybWF0aW9uIGZyb20gU0RQIG1lZGlhIHNlY3Rpb24gb3Igc2Vzc2lvbnBhcnQuCi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQovLyAgIGdldCB0aGUgaWNlLXVmcmFnIGFuZCBpY2UtcHdkIGxpbmVzIGFzIGlucHV0LgpTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBpY2VQYXJhbWV0ZXJzID0gewogICAgdXNlcm5hbWVGcmFnbWVudDogbGluZXMuZmlsdGVyKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtdWZyYWc6JykgPT09IDA7CiAgICB9KVswXS5zdWJzdHIoMTIpLAogICAgcGFzc3dvcmQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgIHJldHVybiBsaW5lLmluZGV4T2YoJ2E9aWNlLXB3ZDonKSA9PT0gMDsKICAgIH0pWzBdLnN1YnN0cigxMCkKICB9OwogIHJldHVybiBpY2VQYXJhbWV0ZXJzOwp9OwoKLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykgewogIHJldHVybiAnYT1pY2UtdWZyYWc6JyArIHBhcmFtcy51c2VybmFtZUZyYWdtZW50ICsgJ1xyXG4nICsKICAgICAgJ2E9aWNlLXB3ZDonICsgcGFyYW1zLnBhc3N3b3JkICsgJ1xyXG4nOwp9OwoKLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLgpTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgZGVzY3JpcHRpb24gPSB7CiAgICBjb2RlY3M6IFtdLAogICAgaGVhZGVyRXh0ZW5zaW9uczogW10sCiAgICBmZWNNZWNoYW5pc21zOiBbXSwKICAgIHJ0Y3A6IFtdCiAgfTsKICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTsKICBmb3IgKHZhciBpID0gMzsgaSA8IG1saW5lLmxlbmd0aDsgaSsrKSB7IC8vIGZpbmQgYWxsIGNvZGVjcyBmcm9tIG1saW5lWzMuLl0KICAgIHZhciBwdCA9IG1saW5lW2ldOwogICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICBtZWRpYVNlY3Rpb24sICdhPXJ0cG1hcDonICsgcHQgKyAnICcpWzBdOwogICAgaWYgKHJ0cG1hcGxpbmUpIHsKICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7CiAgICAgIHZhciBmbXRwcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1mbXRwOicgKyBwdCArICcgJyk7CiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuCiAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307CiAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjayA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJykKICAgICAgICAubWFwKFNEUFV0aWxzLnBhcnNlUnRjcEZiKTsKICAgICAgZGVzY3JpcHRpb24uY29kZWNzLnB1c2goY29kZWMpOwogICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy4KICAgICAgc3dpdGNoIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICBjYXNlICdSRUQnOgogICAgICAgIGNhc2UgJ1VMUEZFQyc6CiAgICAgICAgICBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLnB1c2goY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWV4dG1hcDonKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHsKICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7CiAgfSk7CiAgLy8gRklYTUU6IHBhcnNlIHJ0Y3AuCiAgcmV0dXJuIGRlc2NyaXB0aW9uOwp9OwoKLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgLwovLyBwYXJhbWV0ZXJzLgpTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24oa2luZCwgY2FwcykgewogIHZhciBzZHAgPSAnJzsKCiAgLy8gQnVpbGQgdGhlIG1saW5lLgogIHNkcCArPSAnbT0nICsga2luZCArICcgJzsKICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy4KICBzZHAgKz0gJyBVRFAvVExTL1JUUC9TQVZQRiAnOwogIHNkcCArPSBjYXBzLmNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICAgIH0KICAgIHJldHVybiBjb2RlYy5wYXlsb2FkVHlwZTsKICB9KS5qb2luKCcgJykgKyAnXHJcbic7CgogIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxyXG4nOwogIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuJzsKCiAgLy8gQWRkIGE9cnRwbWFwIGxpbmVzIGZvciBlYWNoIGNvZGVjLiBBbHNvIGZtdHAgYW5kIHJ0Y3AtZmIuCiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykgewogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTsKICAgIHNkcCArPSBTRFBVdGlscy53cml0ZUZtdHAoY29kZWMpOwogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRjcEZiKGNvZGVjKTsKICB9KTsKICBzZHAgKz0gJ2E9cnRjcC1tdXhcclxuJzsKCiAgY2Fwcy5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7CiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTsKICB9KTsKICAvLyBGSVhNRTogd3JpdGUgZmVjTWVjaGFuaXNtcy4KICByZXR1cm4gc2RwOwp9OwoKLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZgovLyBSVENSdHBFbmNvZGluZ1BhcmFtZXRlcnMuClNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7CiAgdmFyIGVuY29kaW5nUGFyYW1ldGVycyA9IFtdOwogIHZhciBkZXNjcmlwdGlvbiA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwogIHZhciBoYXNSZWQgPSBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLmluZGV4T2YoJ1JFRCcpICE9PSAtMTsKICB2YXIgaGFzVWxwZmVjID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdVTFBGRUMnKSAhPT0gLTE7CgogIC8vIGZpbHRlciBhPXNzcmM6Li4uIGNuYW1lOiwgaWdub3JlIFBsYW5CLW1zaWQKICB2YXIgc3NyY3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JykKICAubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTsKICB9KQogIC5maWx0ZXIoZnVuY3Rpb24ocGFydHMpIHsKICAgIHJldHVybiBwYXJ0cy5hdHRyaWJ1dGUgPT09ICdjbmFtZSc7CiAgfSk7CiAgdmFyIHByaW1hcnlTc3JjID0gc3NyY3MubGVuZ3RoID4gMCAmJiBzc3Jjc1swXS5zc3JjOwogIHZhciBzZWNvbmRhcnlTc3JjOwoKICB2YXIgZmxvd3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmMtZ3JvdXA6RklEJykKICAubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJyAnKTsKICAgIHBhcnRzLnNoaWZ0KCk7CiAgICByZXR1cm4gcGFydHMubWFwKGZ1bmN0aW9uKHBhcnQpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KHBhcnQsIDEwKTsKICAgIH0pOwogIH0pOwogIGlmIChmbG93cy5sZW5ndGggPiAwICYmIGZsb3dzWzBdLmxlbmd0aCA+IDEgJiYgZmxvd3NbMF1bMF0gPT09IHByaW1hcnlTc3JjKSB7CiAgICBzZWNvbmRhcnlTc3JjID0gZmxvd3NbMF1bMV07CiAgfQoKICBkZXNjcmlwdGlvbi5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykgewogICAgaWYgKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ1JUWCcgJiYgY29kZWMucGFyYW1ldGVycy5hcHQpIHsKICAgICAgdmFyIGVuY1BhcmFtID0gewogICAgICAgIHNzcmM6IHByaW1hcnlTc3JjLAogICAgICAgIGNvZGVjUGF5bG9hZFR5cGU6IHBhcnNlSW50KGNvZGVjLnBhcmFtZXRlcnMuYXB0LCAxMCksCiAgICAgICAgcnR4OiB7CiAgICAgICAgICBwYXlsb2FkVHlwZTogY29kZWMucGF5bG9hZFR5cGUsCiAgICAgICAgICBzc3JjOiBzZWNvbmRhcnlTc3JjCiAgICAgICAgfQogICAgICB9OwogICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7CiAgICAgIGlmIChoYXNSZWQpIHsKICAgICAgICBlbmNQYXJhbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZW5jUGFyYW0pKTsKICAgICAgICBlbmNQYXJhbS5mZWMgPSB7CiAgICAgICAgICBzc3JjOiBzZWNvbmRhcnlTc3JjLAogICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJwogICAgICAgIH07CiAgICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pOwogICAgICB9CiAgICB9CiAgfSk7CiAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHsKICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKHsKICAgICAgc3NyYzogcHJpbWFyeVNzcmMKICAgIH0pOwogIH0KCiAgLy8gd2Ugc3VwcG9ydCBib3RoIGI9QVMgYW5kIGI9VElBUyBidXQgaW50ZXJwcmV0IEFTIGFzIFRJQVMuCiAgdmFyIGJhbmR3aWR0aCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2I9Jyk7CiAgaWYgKGJhbmR3aWR0aC5sZW5ndGgpIHsKICAgIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1USUFTOicpID09PSAwKSB7CiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHIoNyksIDEwKTsKICAgIH0gZWxzZSBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9QVM6JykgPT09IDApIHsKICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig1KSwgMTApOwogICAgfQogICAgZW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgIHBhcmFtcy5tYXhCaXRyYXRlID0gYmFuZHdpZHRoOwogICAgfSk7CiAgfQogIHJldHVybiBlbmNvZGluZ1BhcmFtZXRlcnM7Cn07CgpTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSA9IGZ1bmN0aW9uKCkgewogIC8vIEZJWE1FOiBzZXNzLWlkIHNob3VsZCBiZSBhbiBOVFAgdGltZXN0YW1wLgogIHJldHVybiAndj0wXHJcbicgKwogICAgICAnbz10aGlzaXNhZGFwdGVyb3J0YyA4MTY5NjM5OTE1NjQ2OTQzMTM3IDIgSU4gSVA0IDEyNy4wLjAuMVxyXG4nICsKICAgICAgJ3M9LVxyXG4nICsKICAgICAgJ3Q9MCAwXHJcbic7Cn07CgpTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbiA9IGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBjYXBzLCB0eXBlLCBzdHJlYW0pIHsKICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVSdHBEZXNjcmlwdGlvbih0cmFuc2NlaXZlci5raW5kLCBjYXBzKTsKCiAgLy8gTWFwIElDRSBwYXJhbWV0ZXJzICh1ZnJhZywgcHdkKSB0byBTRFAuCiAgc2RwICs9IFNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycygKICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpOwoKICAvLyBNYXAgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC4KICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycygKICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSwKICAgICAgdHlwZSA9PT0gJ29mZmVyJyA/ICdhY3RwYXNzJyA6ICdhY3RpdmUnKTsKCiAgc2RwICs9ICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xyXG4nOwoKICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICBzZHAgKz0gJ2E9c2VuZHJlY3ZcclxuJzsKICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgc2RwICs9ICdhPXNlbmRvbmx5XHJcbic7CiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikgewogICAgc2RwICs9ICdhPXJlY3Zvbmx5XHJcbic7CiAgfSBlbHNlIHsKICAgIHNkcCArPSAnYT1pbmFjdGl2ZVxyXG4nOwogIH0KCiAgLy8gRklYTUU6IGZvciBSVFggdGhlcmUgbWlnaHQgYmUgbXVsdGlwbGUgU1NSQ3MuIE5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlIHlldC4KICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICB2YXIgbXNpZCA9ICdtc2lkOicgKyBzdHJlYW0uaWQgKyAnICcgKwogICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZCArICdcclxuJzsKICAgIHNkcCArPSAnYT0nICsgbXNpZDsKICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKwogICAgICAgICcgJyArIG1zaWQ7CiAgfQogIC8vIEZJWE1FOiB0aGlzIHNob3VsZCBiZSB3cml0dGVuIGJ5IHdyaXRlUnRwRGVzY3JpcHRpb24uCiAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArCiAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXHJcbic7CiAgcmV0dXJuIHNkcDsKfTsKCi8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LgpTRFBVdGlscy5nZXREaXJlY3Rpb24gPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuCiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKICAgIHN3aXRjaCAobGluZXNbaV0pIHsKICAgICAgY2FzZSAnYT1zZW5kcmVjdic6CiAgICAgIGNhc2UgJ2E9c2VuZG9ubHknOgogICAgICBjYXNlICdhPXJlY3Zvbmx5JzoKICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6CiAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cigyKTsKICAgICAgZGVmYXVsdDoKICAgICAgICAvLyBGSVhNRTogV2hhdCBzaG91bGQgaGFwcGVuIGhlcmU/CiAgICB9CiAgfQogIGlmIChzZXNzaW9ucGFydCkgewogICAgcmV0dXJuIFNEUFV0aWxzLmdldERpcmVjdGlvbihzZXNzaW9ucGFydCk7CiAgfQogIHJldHVybiAnc2VuZHJlY3YnOwp9OwoKLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgptb2R1bGUuZXhwb3J0cyA9IFNEUFV0aWxzOwoKfSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIHZlcnNpb246IDAuNS4xDQovLyBkYXRlOiBXZWQgRmViIDAxIDIwMTcgMTA6MTE6NDkgR01UKzAwMDAgKFdFVCkNCi8vIGxpY2VuY2U6IA0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQoNCg0KKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsNCglpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpDQoJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOw0KCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQ0KCQlkZWZpbmUoIlN5bmNoZXIiLCBbXSwgZmFjdG9yeSk7DQoJZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpDQoJCWV4cG9ydHNbIlN5bmNoZXIiXSA9IGZhY3RvcnkoKTsNCgllbHNlDQoJCXJvb3RbIiJdID0gcm9vdFsiIl0gfHwge30sIHJvb3RbIiJdWyJTeW5jaGVyIl0gPSBmYWN0b3J5KCk7DQp9KSh0aGlzLCBmdW5jdGlvbigpIHsNCnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwDQovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQ0KLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307DQovKioqKioqLw0KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uDQovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgew0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlDQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQ0KLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQ0KLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7DQovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwNCi8qKioqKiovIAkJCWw6IGZhbHNlLA0KLyoqKioqKi8gCQkJZXhwb3J0czoge30NCi8qKioqKiovIAkJfTsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbg0KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQNCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOw0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUNCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOw0KLyoqKioqKi8gCX0NCi8qKioqKiovDQovKioqKioqLw0KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsNCi8qKioqKiovDQovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOw0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0DQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHsNCi8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgew0KLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsNCi8qKioqKiovIAkJCQljb25maWd1cmFibGU6IGZhbHNlLA0KLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsDQovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXINCi8qKioqKiovIAkJCX0pOw0KLyoqKioqKi8gCQl9DQovKioqKioqLyAJfTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsNCi8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/DQovKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOg0KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsNCi8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOw0KLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOw0KLyoqKioqKi8gCX07DQovKioqKioqLw0KLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbA0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18NCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsNCi8qKioqKiovDQovKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzDQovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTYyKTsNCi8qKioqKiovIH0pDQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KLyoqKioqKi8gKFsNCi8qIDAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KdmFyIGNvcmUgPSBtb2R1bGUuZXhwb3J0cyA9IHt2ZXJzaW9uOiAnMi40LjAnfTsNCmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZg0KDQovKioqLyB9KSwNCi8qIDEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgNCnZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aA0KICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZiA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7DQppZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZg0KDQovKioqLyB9KSwNCi8qIDIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIHN0b3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgnd2tzJykNCiAgLCB1aWQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykNCiAgLCBTeW1ib2wgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5TeW1ib2wNCiAgLCBVU0VfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PSAnZnVuY3Rpb24nOw0KDQp2YXIgJGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpew0KICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID0NCiAgICBVU0VfU1lNQk9MICYmIFN5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IFN5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpOw0KfTsNCg0KJGV4cG9ydHMuc3RvcmUgPSBzdG9yZTsNCg0KLyoqKi8gfSksDQovKiAzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkNCm1vZHVsZS5leHBvcnRzID0gIV9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7DQogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7DQp9KTsNCg0KLyoqKi8gfSksDQovKiA0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCBJRThfRE9NX0RFRklORSA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpDQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKQ0KICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5Ow0KDQpleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7DQogIGFuT2JqZWN0KE8pOw0KICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7DQogIGFuT2JqZWN0KEF0dHJpYnV0ZXMpOw0KICBpZihJRThfRE9NX0RFRklORSl0cnkgew0KICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsNCiAgaWYoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKU9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlOw0KICByZXR1cm4gTzsNCn07DQoNCi8qKiovIH0pLA0KLyogNSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpOw0KICByZXR1cm4gaXQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGRQICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpDQogICwgY3JlYXRlRGVzYyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsNCiAgcmV0dXJuIGRQLmYob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsNCn0gOiBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpew0KICBvYmplY3Rba2V5XSA9IHZhbHVlOw0KICByZXR1cm4gb2JqZWN0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nOw0KfTsNCg0KLyoqKi8gfSksDQovKiA4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgY29yZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQ0KICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgaGlkZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KQ0KICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnOw0KDQp2YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7DQogIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GDQogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HDQogICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TDQogICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QDQogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CDQogICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XDQogICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KQ0KICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdDQogICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdDQogICAgLCBrZXksIG93biwgb3V0Ow0KICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsNCiAgZm9yKGtleSBpbiBzb3VyY2Upew0KICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZQ0KICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7DQogICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlOw0KICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkDQogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsNCiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMNCiAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XQ0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0DQogICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbCkNCiAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeQ0KICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7DQogICAgICB2YXIgRiA9IGZ1bmN0aW9uKGEsIGIsIGMpew0KICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgQyl7DQogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpew0KICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEM7DQogICAgICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgQyhhKTsNCiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOw0KICAgICAgICAgIH0gcmV0dXJuIG5ldyBDKGEsIGIsIGMpOw0KICAgICAgICB9IHJldHVybiBDLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICB9Ow0KICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdOw0KICAgICAgcmV0dXJuIEY7DQogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzDQogICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0Ow0KICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5tZXRob2RzLiVOQU1FJQ0KICAgIGlmKElTX1BST1RPKXsNCiAgICAgIChleHBvcnRzLnZpcnR1YWwgfHwgKGV4cG9ydHMudmlydHVhbCA9IHt9KSlba2V5XSA9IG91dDsNCiAgICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5wcm90b3R5cGUuJU5BTUUlDQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsNCiAgICB9DQogIH0NCn07DQovLyB0eXBlIGJpdG1hcA0KJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWQNCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsDQokZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpYw0KJGV4cG9ydC5QID0gODsgICAvLyBwcm90bw0KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kDQokZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXANCiRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZQ0KJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIA0KbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0Ow0KDQovKioqLyB9KSwNCi8qIDkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsNCiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsNCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsNCiAgfQ0KfTsNCg0KLyoqKi8gfSksDQovKiAxMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF9kZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOw0KDQp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkgew0KICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7DQogICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOw0KICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOw0KICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOw0KICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7DQogICAgICAoMCwgX2RlZmluZVByb3BlcnR5Mi5kZWZhdWx0KSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsNCiAgICB9DQogIH0NCg0KICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgew0KICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7DQogICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7DQogICAgcmV0dXJuIENvbnN0cnVjdG9yOw0KICB9Ow0KfSgpOw0KDQovKioqLyB9KSwNCi8qIDExICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYyl7DQogIHRyeSB7DQogICAgcmV0dXJuICEhZXhlYygpOw0KICB9IGNhdGNoKGUpew0KICAgIHJldHVybiB0cnVlOw0KICB9DQp9Ow0KDQovKioqLyB9KSwNCi8qIDEyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCnZhciBoYXNPd25Qcm9wZXJ0eSA9IHt9Lmhhc093blByb3BlcnR5Ow0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwga2V5KXsNCiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDEzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIHRvIGluZGV4ZWQgb2JqZWN0LCB0b09iamVjdCB3aXRoIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgc3RyaW5ncw0KdmFyIElPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KQ0KICAsIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZw0KdmFyIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXsNCiAgYUZ1bmN0aW9uKGZuKTsNCiAgaWYodGhhdCA9PT0gdW5kZWZpbmVkKXJldHVybiBmbjsNCiAgc3dpdGNoKGxlbmd0aCl7DQogICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7DQogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhKTsNCiAgICB9Ow0KICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpew0KICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYik7DQogICAgfTsNCiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXsNCiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIsIGMpOw0KICAgIH07DQogIH0NCiAgcmV0dXJuIGZ1bmN0aW9uKC8qIC4uLmFyZ3MgKi8pew0KICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpOw0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiAxNSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHt9Ow0KDQovKioqLyB9KSwNCi8qIDE2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYml0bWFwLCB2YWx1ZSl7DQogIHJldHVybiB7DQogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLA0KICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSwNCiAgICB3cml0YWJsZSAgICA6ICEoYml0bWFwICYgNCksDQogICAgdmFsdWUgICAgICAgOiB2YWx1ZQ0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiAxNyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuMTQgLyAxNS4yLjMuMTQgT2JqZWN0LmtleXMoTykNCnZhciAka2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpDQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pew0KICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAxOCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQp2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZzsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiB0b1N0cmluZy5jYWxsKGl0KS5zbGljZSg4LCAtMSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykNCiAgLCBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQNCiAgLy8gaW4gb2xkIElFIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnDQogICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTsNCn07DQoNCi8qKiovIH0pLA0KLyogMjAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7DQogIHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogMjEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGRlZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZg0KICAsIGhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgdGFnLCBzdGF0KXsNCiAgaWYoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSlkZWYoaXQsIFRBRywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRhZ30pOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7DQovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQ0KLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpew0KICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDsNCiAgdmFyIGZuLCB2YWw7DQogIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsNCiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOw0KICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOw0KICB0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyMyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQp2YXIgaWQgPSAwDQogICwgcHggPSBNYXRoLnJhbmRvbSgpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpew0KICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyNCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQ0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiICsgaXQpOw0KICByZXR1cm4gaXQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDI1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gdHJ1ZTsNCg0KLyoqKi8gfSksDQovKiAyNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgc2hhcmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkoJ2tleXMnKQ0KICAsIHVpZCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpew0KICByZXR1cm4gc2hhcmVkW2tleV0gfHwgKHNoYXJlZFtrZXldID0gdWlkKGtleSkpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyNyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyA3LjEuNCBUb0ludGVnZXINCnZhciBjZWlsICA9IE1hdGguY2VpbA0KICAsIGZsb29yID0gTWF0aC5mbG9vcjsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMjggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KLy8gSUUgOC0gZG9uJ3QgZW51bSBidWcga2V5cw0KbW9kdWxlLmV4cG9ydHMgPSAoDQogICdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YnDQopLnNwbGl0KCcsJyk7DQoNCi8qKiovIH0pLA0KLyogMjkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygzKSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsNCiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSgnZGl2JyksICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7DQp9KTsNCg0KLyoqKi8gfSksDQovKiAzMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nDQogICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpew0KICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMzEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg3OSksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiAzMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpDQp2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAzMyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF9zZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOw0KDQp2YXIgX3NldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldFByb3RvdHlwZU9mKTsNCg0KdmFyIF9jcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsNCg0KdmFyIF9jcmVhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlKTsNCg0KdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7DQoNCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsNCiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSAiZnVuY3Rpb24iICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsNCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoc3VwZXJDbGFzcykpKTsNCiAgfQ0KDQogIHN1YkNsYXNzLnByb3RvdHlwZSA9ICgwLCBfY3JlYXRlMi5kZWZhdWx0KShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7DQogICAgY29uc3RydWN0b3I6IHsNCiAgICAgIHZhbHVlOiBzdWJDbGFzcywNCiAgICAgIGVudW1lcmFibGU6IGZhbHNlLA0KICAgICAgd3JpdGFibGU6IHRydWUsDQogICAgICBjb25maWd1cmFibGU6IHRydWUNCiAgICB9DQogIH0pOw0KICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mMi5kZWZhdWx0ID8gKDAsIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsNCn07DQoNCi8qKiovIH0pLA0KLyogMzQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7DQoNCnZhciBfdHlwZW9mMiA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpOw0KDQp2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHsNCiAgaWYgKCFzZWxmKSB7DQogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsNCiAgfQ0KDQogIHJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoY2FsbCkpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsNCn07DQoNCi8qKiovIH0pLA0KLyogMzUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pDQp2YXIgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpDQogICwgZFBzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KQ0KICAsIGVudW1CdWdLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkNCiAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpDQogICwgRW1wdHkgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9DQogICwgUFJPVE9UWVBFICAgPSAncHJvdG90eXBlJzsNCg0KLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZQ0KdmFyIGNyZWF0ZURpY3QgPSBmdW5jdGlvbigpew0KICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1Zw0KICB2YXIgaWZyYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkoJ2lmcmFtZScpDQogICAgLCBpICAgICAgPSBlbnVtQnVnS2V5cy5sZW5ndGgNCiAgICAsIGx0ICAgICA9ICc8Jw0KICAgICwgZ3QgICAgID0gJz4nDQogICAgLCBpZnJhbWVEb2N1bWVudDsNCiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogIF9fd2VicGFja19yZXF1aXJlX18oNDIpLmFwcGVuZENoaWxkKGlmcmFtZSk7DQogIGlmcmFtZS5zcmMgPSAnamF2YXNjcmlwdDonOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNjcmlwdC11cmwNCiAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsNCiAgLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOw0KICBpZnJhbWVEb2N1bWVudCA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50Ow0KICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7DQogIGlmcmFtZURvY3VtZW50LndyaXRlKGx0ICsgJ3NjcmlwdCcgKyBndCArICdkb2N1bWVudC5GPU9iamVjdCcgKyBsdCArICcvc2NyaXB0JyArIGd0KTsNCiAgaWZyYW1lRG9jdW1lbnQuY2xvc2UoKTsNCiAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7DQogIHdoaWxlKGktLSlkZWxldGUgY3JlYXRlRGljdFtQUk9UT1RZUEVdW2VudW1CdWdLZXlzW2ldXTsNCiAgcmV0dXJuIGNyZWF0ZURpY3QoKTsNCn07DQoNCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcyl7DQogIHZhciByZXN1bHQ7DQogIGlmKE8gIT09IG51bGwpew0KICAgIEVtcHR5W1BST1RPVFlQRV0gPSBhbk9iamVjdChPKTsNCiAgICByZXN1bHQgPSBuZXcgRW1wdHk7DQogICAgRW1wdHlbUFJPVE9UWVBFXSA9IG51bGw7DQogICAgLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwNCiAgICByZXN1bHRbSUVfUFJPVE9dID0gTzsNCiAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTsNCiAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpOw0KfTsNCg0KDQovKioqLyB9KSwNCi8qIDM2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMzcpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogMzcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7DQp2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0Ow0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXsNCiAgcmV0dXJuICRPYmplY3QuZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDM4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkNCiAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOCkNCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpDQogICwgaGlkZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpDQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIEl0ZXJhdG9ycyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCAkaXRlckNyZWF0ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpDQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQ0KICAsIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MykNCiAgLCBJVEVSQVRPUiAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykNCiAgLCBCVUdHWSAgICAgICAgICA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKSAvLyBTYWZhcmkgaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgDQogICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcicNCiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJw0KICAsIFZBTFVFUyAgICAgICAgID0gJ3ZhbHVlcyc7DQoNCnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXsNCiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpOw0KICB2YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24oa2luZCl7DQogICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdOw0KICAgIHN3aXRjaChraW5kKXsNCiAgICAgIGNhc2UgS0VZUzogcmV0dXJuIGZ1bmN0aW9uIGtleXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTsNCiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07DQogICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9Ow0KICB9Ow0KICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJw0KICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTDQogICAgLCBWQUxVRVNfQlVHID0gZmFsc2UNCiAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZQ0KICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXQ0KICAgICwgJGRlZmF1bHQgICA9ICRuYXRpdmUgfHwgZ2V0TWV0aG9kKERFRkFVTFQpDQogICAgLCAkZW50cmllcyAgID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZA0KICAgICwgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmUNCiAgICAsIG1ldGhvZHMsIGtleSwgSXRlcmF0b3JQcm90b3R5cGU7DQogIC8vIEZpeCBuYXRpdmUNCiAgaWYoJGFueU5hdGl2ZSl7DQogICAgSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UpKTsNCiAgICBpZihJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSl7DQogICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzDQogICAgICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvclByb3RvdHlwZSwgVEFHLCB0cnVlKTsNCiAgICAgIC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lcw0KICAgICAgaWYoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTsNCiAgICB9DQogIH0NCiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRg0KICBpZihERUZfVkFMVUVTICYmICRuYXRpdmUgJiYgJG5hdGl2ZS5uYW1lICE9PSBWQUxVRVMpew0KICAgIFZBTFVFU19CVUcgPSB0cnVlOw0KICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07DQogIH0NCiAgLy8gRGVmaW5lIGl0ZXJhdG9yDQogIGlmKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKXsNCiAgICBoaWRlKHByb3RvLCBJVEVSQVRPUiwgJGRlZmF1bHQpOw0KICB9DQogIC8vIFBsdWcgZm9yIGxpYnJhcnkNCiAgSXRlcmF0b3JzW05BTUVdID0gJGRlZmF1bHQ7DQogIEl0ZXJhdG9yc1tUQUddICA9IHJldHVyblRoaXM7DQogIGlmKERFRkFVTFQpew0KICAgIG1ldGhvZHMgPSB7DQogICAgICB2YWx1ZXM6ICBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSwNCiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSwNCiAgICAgIGVudHJpZXM6ICRlbnRyaWVzDQogICAgfTsNCiAgICBpZihGT1JDRUQpZm9yKGtleSBpbiBtZXRob2RzKXsNCiAgICAgIGlmKCEoa2V5IGluIHByb3RvKSlyZWRlZmluZShwcm90bywga2V5LCBtZXRob2RzW2tleV0pOw0KICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7DQogIH0NCiAgcmV0dXJuIG1ldGhvZHM7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDM5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsNCi8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpDQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLCAnT2JqZWN0Jywge2RlZmluZVByb3BlcnR5OiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmZ9KTsNCg0KLyoqKi8gfSksDQovKiA0MCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDQxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCmV4cG9ydHMuZiA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlOw0KDQovKioqLyB9KSwNCi8qIDQyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7DQoNCi8qKiovIH0pLA0KLyogNDMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykNCnZhciBoYXMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgdG9PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQ0KICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikoJ0lFX1BST1RPJykNCiAgLCBPYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7DQoNCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pew0KICBPID0gdG9PYmplY3QoTyk7DQogIGlmKGhhcyhPLCBJRV9QUk9UTykpcmV0dXJuIE9bSUVfUFJPVE9dOw0KICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXsNCiAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7DQogIH0gcmV0dXJuIE8gaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90byA6IG51bGw7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBoYXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIHRvSU9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpDQogICwgYXJyYXlJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSkoZmFsc2UpDQogICwgSUVfUFJPVE8gICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikoJ0lFX1BST1RPJyk7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBuYW1lcyl7DQogIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQ0KICAgICwgaSAgICAgID0gMA0KICAgICwgcmVzdWx0ID0gW10NCiAgICAsIGtleTsNCiAgZm9yKGtleSBpbiBPKWlmKGtleSAhPSBJRV9QUk9UTyloYXMoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpOw0KICAvLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzDQogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpaWYoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKXsNCiAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpOw0KICB9DQogIHJldHVybiByZXN1bHQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlcw0KdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpDQogICwgY29yZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkNCiAgLCBmYWlscyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSwgZXhlYyl7DQogIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV0NCiAgICAsIGV4cCA9IHt9Ow0KICBleHBbS0VZXSA9IGV4ZWMoZm4pOw0KICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsNCg0KLyoqKi8gfSksDQovKiA0NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjEuMTUgVG9MZW5ndGgNCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQ0KICAsIG1pbiAgICAgICA9IE1hdGgubWluOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxDQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkNCiAgLCBjb3JlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkNCiAgLCBMSUJSQVJZICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpDQogICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KQ0KICAsIGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXsNCiAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTsNCiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQ5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7DQoNCi8qKiovIH0pLA0KLyogNTAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgJGF0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpKHRydWUpOw0KDQovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7DQogIHRoaXMuX3QgPSBTdHJpbmcoaXRlcmF0ZWQpOyAvLyB0YXJnZXQNCiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgNCi8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkNCn0sIGZ1bmN0aW9uKCl7DQogIHZhciBPICAgICA9IHRoaXMuX3QNCiAgICAsIGluZGV4ID0gdGhpcy5faQ0KICAgICwgcG9pbnQ7DQogIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07DQogIHBvaW50ID0gJGF0KE8sIGluZGV4KTsNCiAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7DQogIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07DQp9KTsNCg0KLyoqKi8gfSksDQovKiA1MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTsNCnZhciBnbG9iYWwgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGhpZGUgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpDQogICwgSXRlcmF0b3JzICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpDQogICwgVE9fU1RSSU5HX1RBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7DQoNCmZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspew0KICB2YXIgTkFNRSAgICAgICA9IGNvbGxlY3Rpb25zW2ldDQogICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdDQogICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTsNCiAgaWYocHJvdG8gJiYgIXByb3RvW1RPX1NUUklOR19UQUddKWhpZGUocHJvdG8sIFRPX1NUUklOR19UQUcsIE5BTUUpOw0KICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7DQp9DQoNCi8qKiovIH0pLA0KLyogNTIgKi8sDQovKiA1MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgY29yZSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApDQogICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMNCiAgcmV0dXJuICRKU09OLnN0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJndW1lbnRzKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNTQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KDQoNCi8qKiovIH0pLA0KLyogNTUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkNCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQ0KICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJykNCiAgLy8gRVMzIHdyb25nIGhlcmUNCiAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJzsNCg0KLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3INCnZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXsNCiAgdHJ5IHsNCiAgICByZXR1cm4gaXRba2V5XTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KfTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHZhciBPLCBULCBCOw0KICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCcNCiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2UNCiAgICA6IHR5cGVvZiAoVCA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVEFHKSkgPT0gJ3N0cmluZycgPyBUDQogICAgLy8gYnVpbHRpblRhZyBjYXNlDQogICAgOiBBUkcgPyBjb2YoTykNCiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrDQogICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDU2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzDQp2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7DQptb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpew0KICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDU3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBwSUUgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpDQogICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQ0KICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpDQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkNCiAgLCBnT1BEICAgICAgICAgICA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7DQoNCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBnT1BEIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApew0KICBPID0gdG9JT2JqZWN0KE8pOw0KICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7DQogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7DQogICAgcmV0dXJuIGdPUEQoTywgUCk7DQogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0NCiAgaWYoaGFzKE8sIFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sIFApLCBPW1BdKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNTggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsNCg0KLyoqKi8gfSksDQovKiA1OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF9pdGVyYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOw0KDQp2YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTsNCg0KdmFyIF9zeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTsNCg0KdmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTsNCg0KdmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgX2l0ZXJhdG9yMi5kZWZhdWx0ID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCmV4cG9ydHMuZGVmYXVsdCA9IHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YoX2l0ZXJhdG9yMi5kZWZhdWx0KSA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7DQogIHJldHVybiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOw0KfSA6IGZ1bmN0aW9uIChvYmopIHsNCiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyLmRlZmF1bHQgJiYgb2JqICE9PSBfc3ltYm9sMi5kZWZhdWx0LnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9Ow0KDQovKioqLyB9KSwNCi8qIDYxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2YNCi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzDQp2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCB0b0xlbmd0aCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KQ0KICAsIHRvSW5kZXggICA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7DQogIHJldHVybiBmdW5jdGlvbigkdGhpcywgZWwsIGZyb21JbmRleCl7DQogICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCgkdGhpcykNCiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpDQogICAgICAsIGluZGV4ICA9IHRvSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpDQogICAgICAsIHZhbHVlOw0KICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0NCiAgICBpZihJU19JTkNMVURFUyAmJiBlbCAhPSBlbCl3aGlsZShsZW5ndGggPiBpbmRleCl7DQogICAgICB2YWx1ZSA9IE9baW5kZXgrK107DQogICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTsNCiAgICAvLyBBcnJheSN0b0luZGV4IGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90DQogICAgfSBlbHNlIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTyl7DQogICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7DQogICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xOw0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA2MiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCnZhciBjcmVhdGUgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpDQogICwgZGVzY3JpcHRvciAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQ0KICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkNCiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9Ow0KDQovLyAyNS4xLjIuMS4xICVJdGVyYXRvclByb3RvdHlwZSVbQEBpdGVyYXRvcl0oKQ0KX193ZWJwYWNrX3JlcXVpcmVfXyg2KShJdGVyYXRvclByb3RvdHlwZSwgX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKENvbnN0cnVjdG9yLCBOQU1FLCBuZXh0KXsNCiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pOw0KICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkb25lLCB2YWx1ZSl7DQogIHJldHVybiB7dmFsdWU6IHZhbHVlLCBkb25lOiAhIWRvbmV9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA2NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZFAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpDQogICwgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpDQogICwgZ2V0S2V5cyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpew0KICBhbk9iamVjdChPKTsNCiAgdmFyIGtleXMgICA9IGdldEtleXMoUHJvcGVydGllcykNCiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoDQogICAgLCBpID0gMA0KICAgICwgUDsNCiAgd2hpbGUobGVuZ3RoID4gaSlkUC5mKE8sIFAgPSBrZXlzW2krK10sIFByb3BlcnRpZXNbUF0pOw0KICByZXR1cm4gTzsNCn07DQoNCi8qKiovIH0pLA0KLyogNjUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQ0KdmFyICRrZXlzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KQ0KICAsIGhpZGRlbktleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTsNCg0KZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgfHwgZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhPKXsNCiAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA2NiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykNCiAgLCBkZWZpbmVkICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsNCi8vIHRydWUgIC0+IFN0cmluZyNhdA0KLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRPX1NUUklORyl7DQogIHJldHVybiBmdW5jdGlvbih0aGF0LCBwb3Mpew0KICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpDQogICAgICAsIGkgPSB0b0ludGVnZXIocG9zKQ0KICAgICAgLCBsID0gcy5sZW5ndGgNCiAgICAgICwgYSwgYjsNCiAgICBpZihpIDwgMCB8fCBpID49IGwpcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkOw0KICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7DQogICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmYNCiAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhDQogICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDsNCiAgfTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGN0eCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgaW52b2tlICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCkNCiAgLCBodG1sICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKQ0KICAsIGNlbCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpDQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzDQogICwgc2V0VGFzayAgICAgICAgICAgID0gZ2xvYmFsLnNldEltbWVkaWF0ZQ0KICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZQ0KICAsIE1lc3NhZ2VDaGFubmVsICAgICA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbA0KICAsIGNvdW50ZXIgICAgICAgICAgICA9IDANCiAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fQ0KICAsIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnDQogICwgZGVmZXIsIGNoYW5uZWwsIHBvcnQ7DQp2YXIgcnVuID0gZnVuY3Rpb24oKXsNCiAgdmFyIGlkID0gK3RoaXM7DQogIGlmKHF1ZXVlLmhhc093blByb3BlcnR5KGlkKSl7DQogICAgdmFyIGZuID0gcXVldWVbaWRdOw0KICAgIGRlbGV0ZSBxdWV1ZVtpZF07DQogICAgZm4oKTsNCiAgfQ0KfTsNCnZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KXsNCiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7DQp9Ow0KLy8gTm9kZS5qcyAwLjkrICYgSUUxMCsgaGFzIHNldEltbWVkaWF0ZSwgb3RoZXJ3aXNlOg0KaWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7DQogIHNldFRhc2sgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pew0KICAgIHZhciBhcmdzID0gW10sIGkgPSAxOw0KICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7DQogICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uKCl7DQogICAgICBpbnZva2UodHlwZW9mIGZuID09ICdmdW5jdGlvbicgPyBmbiA6IEZ1bmN0aW9uKGZuKSwgYXJncyk7DQogICAgfTsNCiAgICBkZWZlcihjb3VudGVyKTsNCiAgICByZXR1cm4gY291bnRlcjsNCiAgfTsNCiAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpew0KICAgIGRlbGV0ZSBxdWV1ZVtpZF07DQogIH07DQogIC8vIE5vZGUuanMgMC44LQ0KICBpZihfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KShwcm9jZXNzKSA9PSAncHJvY2Vzcycpew0KICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpew0KICAgICAgcHJvY2Vzcy5uZXh0VGljayhjdHgocnVuLCBpZCwgMSkpOw0KICAgIH07DQogIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnMNCiAgfSBlbHNlIGlmKE1lc3NhZ2VDaGFubmVsKXsNCiAgICBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsOw0KICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyOw0KICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdGVuZXI7DQogICAgZGVmZXIgPSBjdHgocG9ydC5wb3N0TWVzc2FnZSwgcG9ydCwgMSk7DQogIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2Vycw0KICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0Jw0KICB9IGVsc2UgaWYoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIgJiYgdHlwZW9mIHBvc3RNZXNzYWdlID09ICdmdW5jdGlvbicgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKXsNCiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsNCiAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShpZCArICcnLCAnKicpOw0KICAgIH07DQogICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpOw0KICAvLyBJRTgtDQogIH0gZWxzZSBpZihPTlJFQURZU1RBVEVDSEFOR0UgaW4gY2VsKCdzY3JpcHQnKSl7DQogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7DQogICAgICBodG1sLmFwcGVuZENoaWxkKGNlbCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbigpew0KICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHRoaXMpOw0KICAgICAgICBydW4uY2FsbChpZCk7DQogICAgICB9Ow0KICAgIH07DQogIC8vIFJlc3Qgb2xkIGJyb3dzZXJzDQogIH0gZWxzZSB7DQogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7DQogICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7DQogICAgfTsNCiAgfQ0KfQ0KbW9kdWxlLmV4cG9ydHMgPSB7DQogIHNldDogICBzZXRUYXNrLA0KICBjbGVhcjogY2xlYXJUYXNrDQp9Ow0KDQovKioqLyB9KSwNCi8qIDY4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQ0KICAsIG1heCAgICAgICA9IE1hdGgubWF4DQogICwgbWluICAgICAgID0gTWF0aC5taW47DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluZGV4LCBsZW5ndGgpew0KICBpbmRleCA9IHRvSW50ZWdlcihpbmRleCk7DQogIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA2OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCnZhciBhZGRUb1Vuc2NvcGFibGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkNCiAgLCBzdGVwICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MykNCiAgLCBJdGVyYXRvcnMgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCB0b0lPYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7DQoNCi8vIDIyLjEuMy40IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzKCkNCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpDQovLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpDQovLyAyMi4xLjMuMzAgQXJyYXkucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCkoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXsNCiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldA0KICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleA0KICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZA0KLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpDQp9LCBmdW5jdGlvbigpew0KICB2YXIgTyAgICAgPSB0aGlzLl90DQogICAgLCBraW5kICA9IHRoaXMuX2sNCiAgICAsIGluZGV4ID0gdGhpcy5faSsrOw0KICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7DQogICAgdGhpcy5fdCA9IHVuZGVmaW5lZDsNCiAgICByZXR1cm4gc3RlcCgxKTsNCiAgfQ0KICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTsNCiAgaWYoa2luZCA9PSAndmFsdWVzJylyZXR1cm4gc3RlcCgwLCBPW2luZGV4XSk7DQogIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTsNCn0sICd2YWx1ZXMnKTsNCg0KLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQ0KSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTsNCg0KYWRkVG9VbnNjb3BhYmxlcygna2V5cycpOw0KYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7DQphZGRUb1Vuc2NvcGFibGVzKCdlbnRyaWVzJyk7DQoNCi8qKiovIH0pLA0KLyogNzAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MCksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiA3MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDcyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBNRVRBICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpKCdtZXRhJykNCiAgLCBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykNCiAgLCBoYXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgc2V0RGVzYyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmYNCiAgLCBpZCAgICAgICA9IDA7DQp2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpew0KICByZXR1cm4gdHJ1ZTsNCn07DQp2YXIgRlJFRVpFID0gIV9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7DQogIHJldHVybiBpc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSk7DQp9KTsNCnZhciBzZXRNZXRhID0gZnVuY3Rpb24oaXQpew0KICBzZXREZXNjKGl0LCBNRVRBLCB7dmFsdWU6IHsNCiAgICBpOiAnTycgKyArK2lkLCAvLyBvYmplY3QgSUQNCiAgICB3OiB7fSAgICAgICAgICAvLyB3ZWFrIGNvbGxlY3Rpb25zIElEcw0KICB9fSk7DQp9Ow0KdmFyIGZhc3RLZXkgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsNCiAgLy8gcmV0dXJuIHByaW1pdGl2ZSB3aXRoIHByZWZpeA0KICBpZighaXNPYmplY3QoaXQpKXJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7DQogIGlmKCFoYXMoaXQsIE1FVEEpKXsNCiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdA0KICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiAnRic7DQogICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGENCiAgICBpZighY3JlYXRlKXJldHVybiAnRSc7DQogICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGENCiAgICBzZXRNZXRhKGl0KTsNCiAgLy8gcmV0dXJuIG9iamVjdCBJRA0KICB9IHJldHVybiBpdFtNRVRBXS5pOw0KfTsNCnZhciBnZXRXZWFrID0gZnVuY3Rpb24oaXQsIGNyZWF0ZSl7DQogIGlmKCFoYXMoaXQsIE1FVEEpKXsNCiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdA0KICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiB0cnVlOw0KICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhDQogICAgaWYoIWNyZWF0ZSlyZXR1cm4gZmFsc2U7DQogICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGENCiAgICBzZXRNZXRhKGl0KTsNCiAgLy8gcmV0dXJuIGhhc2ggd2VhayBjb2xsZWN0aW9ucyBJRHMNCiAgfSByZXR1cm4gaXRbTUVUQV0udzsNCn07DQovLyBhZGQgbWV0YWRhdGEgb24gZnJlZXplLWZhbWlseSBtZXRob2RzIGNhbGxpbmcNCnZhciBvbkZyZWV6ZSA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKXNldE1ldGEoaXQpOw0KICByZXR1cm4gaXQ7DQp9Ow0KdmFyIG1ldGEgPSBtb2R1bGUuZXhwb3J0cyA9IHsNCiAgS0VZOiAgICAgIE1FVEEsDQogIE5FRUQ6ICAgICBmYWxzZSwNCiAgZmFzdEtleTogIGZhc3RLZXksDQogIGdldFdlYWs6ICBnZXRXZWFrLA0KICBvbkZyZWV6ZTogb25GcmVlemUNCn07DQoNCi8qKiovIH0pLA0KLyogNzMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGNsYXNzb2YgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpDQogICwgSVRFUkFUT1IgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQ0KICAsIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpew0KICBpZihpdCAhPSB1bmRlZmluZWQpcmV0dXJuIGl0W0lURVJBVE9SXQ0KICAgIHx8IGl0WydAQGl0ZXJhdG9yJ10NCiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldOw0KfTsNCg0KLyoqKi8gfSksDQovKiA3NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDc1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODEpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNzYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MyksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiA3NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDc4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTAwKTsNCnZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Q7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZShQLCBEKXsNCiAgcmV0dXJuICRPYmplY3QuY3JlYXRlKFAsIEQpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA3OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmdldFByb3RvdHlwZU9mOw0KDQovKioqLyB9KSwNCi8qIDgwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTAyKTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Qua2V5czsNCg0KLyoqKi8gfSksDQovKiA4MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LnNldFByb3RvdHlwZU9mOw0KDQovKioqLyB9KSwNCi8qIDgyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNTQpOw0KX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTsNCl9fd2VicGFja19yZXF1aXJlX18oMTA0KTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5Qcm9taXNlOw0KDQovKioqLyB9KSwNCi8qIDgzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTA1KTsNCl9fd2VicGFja19yZXF1aXJlX18oNTQpOw0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpOw0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlN5bWJvbDsNCg0KLyoqKi8gfSksDQovKiA4NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsNCl9fd2VicGFja19yZXF1aXJlX18oNTEpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KS5mKCdpdGVyYXRvcicpOw0KDQovKioqLyB9KSwNCi8qIDg1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCl7DQogIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgKGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpKXsNCiAgICB0aHJvdyBUeXBlRXJyb3IobmFtZSArICc6IGluY29ycmVjdCBpbnZvY2F0aW9uIScpOw0KICB9IHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogODYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHMNCnZhciBnZXRLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykNCiAgLCBnT1BTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkNCiAgLCBwSUUgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgdmFyIHJlc3VsdCAgICAgPSBnZXRLZXlzKGl0KQ0KICAgICwgZ2V0U3ltYm9scyA9IGdPUFMuZjsNCiAgaWYoZ2V0U3ltYm9scyl7DQogICAgdmFyIHN5bWJvbHMgPSBnZXRTeW1ib2xzKGl0KQ0KICAgICAgLCBpc0VudW0gID0gcElFLmYNCiAgICAgICwgaSAgICAgICA9IDANCiAgICAgICwga2V5Ow0KICAgIHdoaWxlKHN5bWJvbHMubGVuZ3RoID4gaSlpZihpc0VudW0uY2FsbChpdCwga2V5ID0gc3ltYm9sc1tpKytdKSlyZXN1bHQucHVzaChrZXkpOw0KICB9IHJldHVybiByZXN1bHQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDg3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBjdHggICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgY2FsbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKQ0KICAsIGlzQXJyYXlJdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSkNCiAgLCBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCB0b0xlbmd0aCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpDQogICwgZ2V0SXRlckZuICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKQ0KICAsIEJSRUFLICAgICAgID0ge30NCiAgLCBSRVRVUk4gICAgICA9IHt9Ow0KdmFyIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhYmxlLCBlbnRyaWVzLCBmbiwgdGhhdCwgSVRFUkFUT1Ipew0KICB2YXIgaXRlckZuID0gSVRFUkFUT1IgPyBmdW5jdGlvbigpeyByZXR1cm4gaXRlcmFibGU7IH0gOiBnZXRJdGVyRm4oaXRlcmFibGUpDQogICAgLCBmICAgICAgPSBjdHgoZm4sIHRoYXQsIGVudHJpZXMgPyAyIDogMSkNCiAgICAsIGluZGV4ICA9IDANCiAgICAsIGxlbmd0aCwgc3RlcCwgaXRlcmF0b3IsIHJlc3VsdDsNCiAgaWYodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdGVyYWJsZSArICcgaXMgbm90IGl0ZXJhYmxlIScpOw0KICAvLyBmYXN0IGNhc2UgZm9yIGFycmF5cyB3aXRoIGRlZmF1bHQgaXRlcmF0b3INCiAgaWYoaXNBcnJheUl0ZXIoaXRlckZuKSlmb3IobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4Kyspew0KICAgIHJlc3VsdCA9IGVudHJpZXMgPyBmKGFuT2JqZWN0KHN0ZXAgPSBpdGVyYWJsZVtpbmRleF0pWzBdLCBzdGVwWzFdKSA6IGYoaXRlcmFibGVbaW5kZXhdKTsNCiAgICBpZihyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKXJldHVybiByZXN1bHQ7DQogIH0gZWxzZSBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgKXsNCiAgICByZXN1bHQgPSBjYWxsKGl0ZXJhdG9yLCBmLCBzdGVwLnZhbHVlLCBlbnRyaWVzKTsNCiAgICBpZihyZXN1bHQgPT09IEJSRUFLIHx8IHJlc3VsdCA9PT0gUkVUVVJOKXJldHVybiByZXN1bHQ7DQogIH0NCn07DQpleHBvcnRzLkJSRUFLICA9IEJSRUFLOw0KZXhwb3J0cy5SRVRVUk4gPSBSRVRVUk47DQoNCi8qKiovIH0pLA0KLyogODggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCBhcmdzLCB0aGF0KXsNCiAgdmFyIHVuID0gdGhhdCA9PT0gdW5kZWZpbmVkOw0KICBzd2l0Y2goYXJncy5sZW5ndGgpew0KICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKQ0KICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0KTsNCiAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pDQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pOw0KICAgIGNhc2UgMjogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSkNCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7DQogICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKQ0KICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsNCiAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pDQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOw0KICB9IHJldHVybiAgICAgICAgICAgICAgZm4uYXBwbHkodGhhdCwgYXJncyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDg5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3INCnZhciBJdGVyYXRvcnMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCBJVEVSQVRPUiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQ0KICAsIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA5MCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQ0KdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOw0KbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKXsNCiAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDkxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGNhbGwgc29tZXRoaW5nIG9uIGl0ZXJhdG9yIHN0ZXAgd2l0aCBzYWZlIGNsb3Npbmcgb24gZXJyb3INCnZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpew0KICB0cnkgew0KICAgIHJldHVybiBlbnRyaWVzID8gZm4oYW5PYmplY3QodmFsdWUpWzBdLCB2YWx1ZVsxXSkgOiBmbih2YWx1ZSk7DQogIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pDQogIH0gY2F0Y2goZSl7DQogICAgdmFyIHJldCA9IGl0ZXJhdG9yWydyZXR1cm4nXTsNCiAgICBpZihyZXQgIT09IHVuZGVmaW5lZClhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpOw0KICAgIHRocm93IGU7DQogIH0NCn07DQoNCi8qKiovIH0pLA0KLyogOTIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIElURVJBVE9SICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykNCiAgLCBTQUZFX0NMT1NJTkcgPSBmYWxzZTsNCg0KdHJ5IHsNCiAgdmFyIHJpdGVyID0gWzddW0lURVJBVE9SXSgpOw0KICByaXRlclsncmV0dXJuJ10gPSBmdW5jdGlvbigpeyBTQUZFX0NMT1NJTkcgPSB0cnVlOyB9Ow0KICBBcnJheS5mcm9tKHJpdGVyLCBmdW5jdGlvbigpeyB0aHJvdyAyOyB9KTsNCn0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0NCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjLCBza2lwQ2xvc2luZyl7DQogIGlmKCFza2lwQ2xvc2luZyAmJiAhU0FGRV9DTE9TSU5HKXJldHVybiBmYWxzZTsNCiAgdmFyIHNhZmUgPSBmYWxzZTsNCiAgdHJ5IHsNCiAgICB2YXIgYXJyICA9IFs3XQ0KICAgICAgLCBpdGVyID0gYXJyW0lURVJBVE9SXSgpOw0KICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uKCl7IHJldHVybiB7ZG9uZTogc2FmZSA9IHRydWV9OyB9Ow0KICAgIGFycltJVEVSQVRPUl0gPSBmdW5jdGlvbigpeyByZXR1cm4gaXRlcjsgfTsNCiAgICBleGVjKGFycik7DQogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0NCiAgcmV0dXJuIHNhZmU7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDkzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnZXRLZXlzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQ0KICAsIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIGVsKXsNCiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpDQogICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pDQogICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aA0KICAgICwgaW5kZXggID0gMA0KICAgICwga2V5Ow0KICB3aGlsZShsZW5ndGggPiBpbmRleClpZihPW2tleSA9IGtleXNbaW5kZXgrK11dID09PSBlbClyZXR1cm4ga2V5Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA5NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZ2xvYmFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIG1hY3JvdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpLnNldA0KICAsIE9ic2VydmVyICA9IGdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyDQogICwgcHJvY2VzcyAgID0gZ2xvYmFsLnByb2Nlc3MNCiAgLCBQcm9taXNlICAgPSBnbG9iYWwuUHJvbWlzZQ0KICAsIGlzTm9kZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJzsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpew0KICB2YXIgaGVhZCwgbGFzdCwgbm90aWZ5Ow0KDQogIHZhciBmbHVzaCA9IGZ1bmN0aW9uKCl7DQogICAgdmFyIHBhcmVudCwgZm47DQogICAgaWYoaXNOb2RlICYmIChwYXJlbnQgPSBwcm9jZXNzLmRvbWFpbikpcGFyZW50LmV4aXQoKTsNCiAgICB3aGlsZShoZWFkKXsNCiAgICAgIGZuICAgPSBoZWFkLmZuOw0KICAgICAgaGVhZCA9IGhlYWQubmV4dDsNCiAgICAgIHRyeSB7DQogICAgICAgIGZuKCk7DQogICAgICB9IGNhdGNoKGUpew0KICAgICAgICBpZihoZWFkKW5vdGlmeSgpOw0KICAgICAgICBlbHNlIGxhc3QgPSB1bmRlZmluZWQ7DQogICAgICAgIHRocm93IGU7DQogICAgICB9DQogICAgfSBsYXN0ID0gdW5kZWZpbmVkOw0KICAgIGlmKHBhcmVudClwYXJlbnQuZW50ZXIoKTsNCiAgfTsNCg0KICAvLyBOb2RlLmpzDQogIGlmKGlzTm9kZSl7DQogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsNCiAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOw0KICAgIH07DQogIC8vIGJyb3dzZXJzIHdpdGggTXV0YXRpb25PYnNlcnZlcg0KICB9IGVsc2UgaWYoT2JzZXJ2ZXIpew0KICAgIHZhciB0b2dnbGUgPSB0cnVlDQogICAgICAsIG5vZGUgICA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTsNCiAgICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcNCiAgICBub3RpZnkgPSBmdW5jdGlvbigpew0KICAgICAgbm9kZS5kYXRhID0gdG9nZ2xlID0gIXRvZ2dsZTsNCiAgICB9Ow0KICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZQ0KICB9IGVsc2UgaWYoUHJvbWlzZSAmJiBQcm9taXNlLnJlc29sdmUpew0KICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7DQogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsNCiAgICAgIHByb21pc2UudGhlbihmbHVzaCk7DQogICAgfTsNCiAgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjoNCiAgLy8gLSBzZXRJbW1lZGlhdGUNCiAgLy8gLSBNZXNzYWdlQ2hhbm5lbA0KICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnDQogIC8vIC0gb25yZWFkeXN0YXRlY2hhbmdlDQogIC8vIC0gc2V0VGltZW91dA0KICB9IGVsc2Ugew0KICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7DQogICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpDQogICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTsNCiAgICB9Ow0KICB9DQoNCiAgcmV0dXJuIGZ1bmN0aW9uKGZuKXsNCiAgICB2YXIgdGFzayA9IHtmbjogZm4sIG5leHQ6IHVuZGVmaW5lZH07DQogICAgaWYobGFzdClsYXN0Lm5leHQgPSB0YXNrOw0KICAgIGlmKCFoZWFkKXsNCiAgICAgIGhlYWQgPSB0YXNrOw0KICAgICAgbm90aWZ5KCk7DQogICAgfSBsYXN0ID0gdGFzazsNCiAgfTsNCn07DQoNCi8qKiovIH0pLA0KLyogOTUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdw0KdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpDQogICwgZ09QTiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZg0KICAsIHRvU3RyaW5nICA9IHt9LnRvU3RyaW5nOw0KDQp2YXIgd2luZG93TmFtZXMgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcw0KICA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTsNCg0KdmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24oaXQpew0KICB0cnkgew0KICAgIHJldHVybiBnT1BOKGl0KTsNCiAgfSBjYXRjaChlKXsNCiAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTsNCiAgfQ0KfTsNCg0KbW9kdWxlLmV4cG9ydHMuZiA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpew0KICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpOw0KfTsNCg0KDQovKioqLyB9KSwNCi8qIDk2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMsIHNhZmUpew0KICBmb3IodmFyIGtleSBpbiBzcmMpew0KICAgIGlmKHNhZmUgJiYgdGFyZ2V0W2tleV0pdGFyZ2V0W2tleV0gPSBzcmNba2V5XTsNCiAgICBlbHNlIGhpZGUodGFyZ2V0LCBrZXksIHNyY1trZXldKTsNCiAgfSByZXR1cm4gdGFyZ2V0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA5NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBXb3JrcyB3aXRoIF9fcHJvdG9fXyBvbmx5LiBPbGQgdjggY2FuJ3Qgd29yayB3aXRoIG51bGwgcHJvdG8gb2JqZWN0cy4NCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovDQp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpDQogICwgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOw0KdmFyIGNoZWNrID0gZnVuY3Rpb24oTywgcHJvdG8pew0KICBhbk9iamVjdChPKTsNCiAgaWYoIWlzT2JqZWN0KHByb3RvKSAmJiBwcm90byAhPT0gbnVsbCl0aHJvdyBUeXBlRXJyb3IocHJvdG8gKyAiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlISIpOw0KfTsNCm1vZHVsZS5leHBvcnRzID0gew0KICBzZXQ6IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoJ19fcHJvdG9fXycgaW4ge30gPyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lDQogICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7DQogICAgICB0cnkgew0KICAgICAgICBzZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KShGdW5jdGlvbi5jYWxsLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KS5mKE9iamVjdC5wcm90b3R5cGUsICdfX3Byb3RvX18nKS5zZXQsIDIpOw0KICAgICAgICBzZXQodGVzdCwgW10pOw0KICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTsNCiAgICAgIH0gY2F0Y2goZSl7IGJ1Z2d5ID0gdHJ1ZTsgfQ0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKXsNCiAgICAgICAgY2hlY2soTywgcHJvdG8pOw0KICAgICAgICBpZihidWdneSlPLl9fcHJvdG9fXyA9IHByb3RvOw0KICAgICAgICBlbHNlIHNldChPLCBwcm90byk7DQogICAgICAgIHJldHVybiBPOw0KICAgICAgfTsNCiAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLA0KICBjaGVjazogY2hlY2sNCn07DQoNCi8qKiovIH0pLA0KLyogOTggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgZ2xvYmFsICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgY29yZSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApDQogICwgZFAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpDQogICwgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpDQogICwgU1BFQ0lFUyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdzcGVjaWVzJyk7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZKXsNCiAgdmFyIEMgPSB0eXBlb2YgY29yZVtLRVldID09ICdmdW5jdGlvbicgPyBjb3JlW0tFWV0gOiBnbG9iYWxbS0VZXTsNCiAgaWYoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSlkUC5mKEMsIFNQRUNJRVMsIHsNCiAgICBjb25maWd1cmFibGU6IHRydWUsDQogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfQ0KICB9KTsNCn07DQoNCi8qKiovIH0pLA0KLyogOTkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpDQp2YXIgYW5PYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQ0KICAsIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApDQogICwgU1BFQ0lFUyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihPLCBEKXsNCiAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvciwgUzsNCiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAxMDAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpDQovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkNCiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge2NyZWF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXygzNSl9KTsNCg0KLyoqKi8gfSksDQovKiAxMDEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pDQp2YXIgdG9PYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikNCiAgLCAkZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2dldFByb3RvdHlwZU9mJywgZnVuY3Rpb24oKXsNCiAgcmV0dXJuIGZ1bmN0aW9uIGdldFByb3RvdHlwZU9mKGl0KXsNCiAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7DQogIH07DQp9KTsNCg0KLyoqKi8gfSksDQovKiAxMDIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pDQp2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQ0KICAsICRrZXlzICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNDUpKCdrZXlzJywgZnVuY3Rpb24oKXsNCiAgcmV0dXJuIGZ1bmN0aW9uIGtleXMoaXQpew0KICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpOw0KICB9Ow0KfSk7DQoNCi8qKiovIH0pLA0KLyogMTAzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMy4xOSBPYmplY3Quc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pDQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7DQokZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXyg5Nykuc2V0fSk7DQoNCi8qKiovIH0pLA0KLyogMTA0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIExJQlJBUlkgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpDQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGN0eCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgY2xhc3NvZiAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSkNCiAgLCAkZXhwb3J0ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpDQogICwgaXNPYmplY3QgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQ0KICAsIGFGdW5jdGlvbiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjApDQogICwgYW5JbnN0YW5jZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkNCiAgLCBmb3JPZiAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KQ0KICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpDQogICwgdGFzayAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0DQogICwgbWljcm90YXNrICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCkoKQ0KICAsIFBST01JU0UgICAgICAgICAgICA9ICdQcm9taXNlJw0KICAsIFR5cGVFcnJvciAgICAgICAgICA9IGdsb2JhbC5UeXBlRXJyb3INCiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzcw0KICAsICRQcm9taXNlICAgICAgICAgICA9IGdsb2JhbFtQUk9NSVNFXQ0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzDQogICwgaXNOb2RlICAgICAgICAgICAgID0gY2xhc3NvZihwcm9jZXNzKSA9PSAncHJvY2VzcycNCiAgLCBlbXB0eSAgICAgICAgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9DQogICwgSW50ZXJuYWwsIEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSwgV3JhcHBlcjsNCg0KdmFyIFVTRV9OQVRJVkUgPSAhIWZ1bmN0aW9uKCl7DQogIHRyeSB7DQogICAgLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0DQogICAgdmFyIHByb21pc2UgICAgID0gJFByb21pc2UucmVzb2x2ZSgxKQ0KICAgICAgLCBGYWtlUHJvbWlzZSA9IChwcm9taXNlLmNvbnN0cnVjdG9yID0ge30pW19fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKV0gPSBmdW5jdGlvbihleGVjKXsgZXhlYyhlbXB0eSwgZW1wdHkpOyB9Ow0KICAgIC8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3QNCiAgICByZXR1cm4gKGlzTm9kZSB8fCB0eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50ID09ICdmdW5jdGlvbicpICYmIHByb21pc2UudGhlbihlbXB0eSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KfSgpOw0KDQovLyBoZWxwZXJzDQp2YXIgc2FtZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24oYSwgYil7DQogIC8vIHdpdGggbGlicmFyeSB3cmFwcGVyIHNwZWNpYWwgY2FzZQ0KICByZXR1cm4gYSA9PT0gYiB8fCBhID09PSAkUHJvbWlzZSAmJiBiID09PSBXcmFwcGVyOw0KfTsNCnZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24oaXQpew0KICB2YXIgdGhlbjsNCiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiB0eXBlb2YgKHRoZW4gPSBpdC50aGVuKSA9PSAnZnVuY3Rpb24nID8gdGhlbiA6IGZhbHNlOw0KfTsNCnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpew0KICByZXR1cm4gc2FtZUNvbnN0cnVjdG9yKCRQcm9taXNlLCBDKQ0KICAgID8gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpDQogICAgOiBuZXcgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpOw0KfTsNCnZhciBQcm9taXNlQ2FwYWJpbGl0eSA9IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpew0KICB2YXIgcmVzb2x2ZSwgcmVqZWN0Ow0KICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbigkJHJlc29sdmUsICQkcmVqZWN0KXsNCiAgICBpZihyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKCdCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvcicpOw0KICAgIHJlc29sdmUgPSAkJHJlc29sdmU7DQogICAgcmVqZWN0ICA9ICQkcmVqZWN0Ow0KICB9KTsNCiAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpOw0KICB0aGlzLnJlamVjdCAgPSBhRnVuY3Rpb24ocmVqZWN0KTsNCn07DQp2YXIgcGVyZm9ybSA9IGZ1bmN0aW9uKGV4ZWMpew0KICB0cnkgew0KICAgIGV4ZWMoKTsNCiAgfSBjYXRjaChlKXsNCiAgICByZXR1cm4ge2Vycm9yOiBlfTsNCiAgfQ0KfTsNCnZhciBub3RpZnkgPSBmdW5jdGlvbihwcm9taXNlLCBpc1JlamVjdCl7DQogIGlmKHByb21pc2UuX24pcmV0dXJuOw0KICBwcm9taXNlLl9uID0gdHJ1ZTsNCiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYzsNCiAgbWljcm90YXNrKGZ1bmN0aW9uKCl7DQogICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdg0KICAgICAgLCBvayAgICA9IHByb21pc2UuX3MgPT0gMQ0KICAgICAgLCBpICAgICA9IDA7DQogICAgdmFyIHJ1biA9IGZ1bmN0aW9uKHJlYWN0aW9uKXsNCiAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWwNCiAgICAgICAgLCByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZQ0KICAgICAgICAsIHJlamVjdCAgPSByZWFjdGlvbi5yZWplY3QNCiAgICAgICAgLCBkb21haW4gID0gcmVhY3Rpb24uZG9tYWluDQogICAgICAgICwgcmVzdWx0LCB0aGVuOw0KICAgICAgdHJ5IHsNCiAgICAgICAgaWYoaGFuZGxlcil7DQogICAgICAgICAgaWYoIW9rKXsNCiAgICAgICAgICAgIGlmKHByb21pc2UuX2ggPT0gMilvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKTsNCiAgICAgICAgICAgIHByb21pc2UuX2ggPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihoYW5kbGVyID09PSB0cnVlKXJlc3VsdCA9IHZhbHVlOw0KICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5lbnRlcigpOw0KICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSk7DQogICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmV4aXQoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYocmVzdWx0ID09PSByZWFjdGlvbi5wcm9taXNlKXsNCiAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7DQogICAgICAgICAgfSBlbHNlIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpew0KICAgICAgICAgICAgdGhlbi5jYWxsKHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KTsNCiAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXN1bHQpOw0KICAgICAgICB9IGVsc2UgcmVqZWN0KHZhbHVlKTsNCiAgICAgIH0gY2F0Y2goZSl7DQogICAgICAgIHJlamVjdChlKTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpcnVuKGNoYWluW2krK10pOyAvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaA0KICAgIHByb21pc2UuX2MgPSBbXTsNCiAgICBwcm9taXNlLl9uID0gZmFsc2U7DQogICAgaWYoaXNSZWplY3QgJiYgIXByb21pc2UuX2gpb25VbmhhbmRsZWQocHJvbWlzZSk7DQogIH0pOw0KfTsNCnZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upew0KICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpew0KICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YNCiAgICAgICwgYWJydXB0LCBoYW5kbGVyLCBjb25zb2xlOw0KICAgIGlmKGlzVW5oYW5kbGVkKHByb21pc2UpKXsNCiAgICAgIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsNCiAgICAgICAgaWYoaXNOb2RlKXsNCiAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3VuaGFuZGxlZFJlamVjdGlvbicsIHZhbHVlLCBwcm9taXNlKTsNCiAgICAgICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pew0KICAgICAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogdmFsdWV9KTsNCiAgICAgICAgfSBlbHNlIGlmKChjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGUpICYmIGNvbnNvbGUuZXJyb3Ipew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbicsIHZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICAvLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZA0KICAgICAgcHJvbWlzZS5faCA9IGlzTm9kZSB8fCBpc1VuaGFuZGxlZChwcm9taXNlKSA/IDIgOiAxOw0KICAgIH0gcHJvbWlzZS5fYSA9IHVuZGVmaW5lZDsNCiAgICBpZihhYnJ1cHQpdGhyb3cgYWJydXB0LmVycm9yOw0KICB9KTsNCn07DQp2YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsNCiAgaWYocHJvbWlzZS5faCA9PSAxKXJldHVybiBmYWxzZTsNCiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYSB8fCBwcm9taXNlLl9jDQogICAgLCBpICAgICA9IDANCiAgICAsIHJlYWN0aW9uOw0KICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXsNCiAgICByZWFjdGlvbiA9IGNoYWluW2krK107DQogICAgaWYocmVhY3Rpb24uZmFpbCB8fCAhaXNVbmhhbmRsZWQocmVhY3Rpb24ucHJvbWlzZSkpcmV0dXJuIGZhbHNlOw0KICB9IHJldHVybiB0cnVlOw0KfTsNCnZhciBvbkhhbmRsZVVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upew0KICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpew0KICAgIHZhciBoYW5kbGVyOw0KICAgIGlmKGlzTm9kZSl7DQogICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTsNCiAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnJlamVjdGlvbmhhbmRsZWQpew0KICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiBwcm9taXNlLl92fSk7DQogICAgfQ0KICB9KTsNCn07DQp2YXIgJHJlamVjdCA9IGZ1bmN0aW9uKHZhbHVlKXsNCiAgdmFyIHByb21pc2UgPSB0aGlzOw0KICBpZihwcm9taXNlLl9kKXJldHVybjsNCiAgcHJvbWlzZS5fZCA9IHRydWU7DQogIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcA0KICBwcm9taXNlLl92ID0gdmFsdWU7DQogIHByb21pc2UuX3MgPSAyOw0KICBpZighcHJvbWlzZS5fYSlwcm9taXNlLl9hID0gcHJvbWlzZS5fYy5zbGljZSgpOw0KICBub3RpZnkocHJvbWlzZSwgdHJ1ZSk7DQp9Ow0KdmFyICRyZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpew0KICB2YXIgcHJvbWlzZSA9IHRoaXMNCiAgICAsIHRoZW47DQogIGlmKHByb21pc2UuX2QpcmV0dXJuOw0KICBwcm9taXNlLl9kID0gdHJ1ZTsNCiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwDQogIHRyeSB7DQogICAgaWYocHJvbWlzZSA9PT0gdmFsdWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOw0KICAgIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHZhbHVlKSl7DQogICAgICBtaWNyb3Rhc2soZnVuY3Rpb24oKXsNCiAgICAgICAgdmFyIHdyYXBwZXIgPSB7X3c6IHByb21pc2UsIF9kOiBmYWxzZX07IC8vIHdyYXANCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGN0eCgkcmVzb2x2ZSwgd3JhcHBlciwgMSksIGN0eCgkcmVqZWN0LCB3cmFwcGVyLCAxKSk7DQogICAgICAgIH0gY2F0Y2goZSl7DQogICAgICAgICAgJHJlamVjdC5jYWxsKHdyYXBwZXIsIGUpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9IGVsc2Ugew0KICAgICAgcHJvbWlzZS5fdiA9IHZhbHVlOw0KICAgICAgcHJvbWlzZS5fcyA9IDE7DQogICAgICBub3RpZnkocHJvbWlzZSwgZmFsc2UpOw0KICAgIH0NCiAgfSBjYXRjaChlKXsNCiAgICAkcmVqZWN0LmNhbGwoe193OiBwcm9taXNlLCBfZDogZmFsc2V9LCBlKTsgLy8gd3JhcA0KICB9DQp9Ow0KDQovLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbA0KaWYoIVVTRV9OQVRJVkUpew0KICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQ0KICAkUHJvbWlzZSA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3Ipew0KICAgIGFuSW5zdGFuY2UodGhpcywgJFByb21pc2UsIFBST01JU0UsICdfaCcpOw0KICAgIGFGdW5jdGlvbihleGVjdXRvcik7DQogICAgSW50ZXJuYWwuY2FsbCh0aGlzKTsNCiAgICB0cnkgew0KICAgICAgZXhlY3V0b3IoY3R4KCRyZXNvbHZlLCB0aGlzLCAxKSwgY3R4KCRyZWplY3QsIHRoaXMsIDEpKTsNCiAgICB9IGNhdGNoKGVycil7DQogICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTsNCiAgICB9DQogIH07DQogIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7DQogICAgdGhpcy5fYyA9IFtdOyAgICAgICAgICAgICAvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMNCiAgICB0aGlzLl9hID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zDQogICAgdGhpcy5fcyA9IDA7ICAgICAgICAgICAgICAvLyA8LSBzdGF0ZQ0KICAgIHRoaXMuX2QgPSBmYWxzZTsgICAgICAgICAgLy8gPC0gZG9uZQ0KICAgIHRoaXMuX3YgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gdmFsdWUNCiAgICB0aGlzLl9oID0gMDsgICAgICAgICAgICAgIC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkDQogICAgdGhpcy5fbiA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBub3RpZnkNCiAgfTsNCiAgSW50ZXJuYWwucHJvdG90eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NikoJFByb21pc2UucHJvdG90eXBlLCB7DQogICAgLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkNCiAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKXsNCiAgICAgIHZhciByZWFjdGlvbiAgICA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkUHJvbWlzZSkpOw0KICAgICAgcmVhY3Rpb24ub2sgICAgID0gdHlwZW9mIG9uRnVsZmlsbGVkID09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IHRydWU7DQogICAgICByZWFjdGlvbi5mYWlsICAgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7DQogICAgICByZWFjdGlvbi5kb21haW4gPSBpc05vZGUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDsNCiAgICAgIHRoaXMuX2MucHVzaChyZWFjdGlvbik7DQogICAgICBpZih0aGlzLl9hKXRoaXMuX2EucHVzaChyZWFjdGlvbik7DQogICAgICBpZih0aGlzLl9zKW5vdGlmeSh0aGlzLCBmYWxzZSk7DQogICAgICByZXR1cm4gcmVhY3Rpb24ucHJvbWlzZTsNCiAgICB9LA0KICAgIC8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpDQogICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3RlZCl7DQogICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7DQogICAgfQ0KICB9KTsNCiAgUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbigpew0KICAgIHZhciBwcm9taXNlICA9IG5ldyBJbnRlcm5hbDsNCiAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlOw0KICAgIHRoaXMucmVzb2x2ZSA9IGN0eCgkcmVzb2x2ZSwgcHJvbWlzZSwgMSk7DQogICAgdGhpcy5yZWplY3QgID0gY3R4KCRyZWplY3QsIHByb21pc2UsIDEpOw0KICB9Ow0KfQ0KDQokZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7UHJvbWlzZTogJFByb21pc2V9KTsNCl9fd2VicGFja19yZXF1aXJlX18oMjEpKCRQcm9taXNlLCBQUk9NSVNFKTsNCl9fd2VicGFja19yZXF1aXJlX18oOTgpKFBST01JU0UpOw0KV3JhcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMClbUFJPTUlTRV07DQoNCi8vIHN0YXRpY3MNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIFBST01JU0UsIHsNCiAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocikNCiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocil7DQogICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKQ0KICAgICAgLCAkJHJlamVjdCAgID0gY2FwYWJpbGl0eS5yZWplY3Q7DQogICAgJCRyZWplY3Qocik7DQogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsNCiAgfQ0KfSk7DQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIChMSUJSQVJZIHx8ICFVU0VfTkFUSVZFKSwgUFJPTUlTRSwgew0KICAvLyAyNS40LjQuNiBQcm9taXNlLnJlc29sdmUoeCkNCiAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh4KXsNCiAgICAvLyBpbnN0YW5jZW9mIGluc3RlYWQgb2YgaW50ZXJuYWwgc2xvdCBjaGVjayBiZWNhdXNlIHdlIHNob3VsZCBmaXggaXQgd2l0aG91dCByZXBsYWNlbWVudCBuYXRpdmUgUHJvbWlzZSBjb3JlDQogICAgaWYoeCBpbnN0YW5jZW9mICRQcm9taXNlICYmIHNhbWVDb25zdHJ1Y3Rvcih4LmNvbnN0cnVjdG9yLCB0aGlzKSlyZXR1cm4geDsNCiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpDQogICAgICAsICQkcmVzb2x2ZSAgPSBjYXBhYmlsaXR5LnJlc29sdmU7DQogICAgJCRyZXNvbHZlKHgpOw0KICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7DQogIH0NCn0pOw0KJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKFVTRV9OQVRJVkUgJiYgX193ZWJwYWNrX3JlcXVpcmVfXyg5MikoZnVuY3Rpb24oaXRlcil7DQogICRQcm9taXNlLmFsbChpdGVyKVsnY2F0Y2gnXShlbXB0eSk7DQp9KSksIFBST01JU0UsIHsNCiAgLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpDQogIGFsbDogZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKXsNCiAgICB2YXIgQyAgICAgICAgICA9IHRoaXMNCiAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpDQogICAgICAsIHJlc29sdmUgICAgPSBjYXBhYmlsaXR5LnJlc29sdmUNCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0Ow0KICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7DQogICAgICB2YXIgdmFsdWVzICAgID0gW10NCiAgICAgICAgLCBpbmRleCAgICAgPSAwDQogICAgICAgICwgcmVtYWluaW5nID0gMTsNCiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7DQogICAgICAgIHZhciAkaW5kZXggICAgICAgID0gaW5kZXgrKw0KICAgICAgICAgICwgYWxyZWFkeUNhbGxlZCA9IGZhbHNlOw0KICAgICAgICB2YWx1ZXMucHVzaCh1bmRlZmluZWQpOw0KICAgICAgICByZW1haW5pbmcrKzsNCiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpew0KICAgICAgICAgIGlmKGFscmVhZHlDYWxsZWQpcmV0dXJuOw0KICAgICAgICAgIGFscmVhZHlDYWxsZWQgID0gdHJ1ZTsNCiAgICAgICAgICB2YWx1ZXNbJGluZGV4XSA9IHZhbHVlOw0KICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsNCiAgICAgICAgfSwgcmVqZWN0KTsNCiAgICAgIH0pOw0KICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOw0KICAgIH0pOw0KICAgIGlmKGFicnVwdClyZWplY3QoYWJydXB0LmVycm9yKTsNCiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOw0KICB9LA0KICAvLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpDQogIHJhY2U6IGZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpew0KICAgIHZhciBDICAgICAgICAgID0gdGhpcw0KICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykNCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0Ow0KICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7DQogICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2Upew0KICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7DQogICAgICB9KTsNCiAgICB9KTsNCiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7DQogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsNCiAgfQ0KfSk7DQoNCi8qKiovIH0pLA0KLyogMTA1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KLy8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbQ0KdmFyIGdsb2JhbCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikNCiAgLCBERVNDUklQVE9SUyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykNCiAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOCkNCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpDQogICwgTUVUQSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKS5LRVkNCiAgLCAkZmFpbHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpDQogICwgc2hhcmVkICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKQ0KICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkNCiAgLCB1aWQgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpDQogICwgd2tzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpDQogICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KQ0KICAsIHdrc0RlZmluZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkNCiAgLCBrZXlPZiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpDQogICwgZW51bUtleXMgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KQ0KICAsIGlzQXJyYXkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCkNCiAgLCBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCB0b0lPYmplY3QgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpDQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKQ0KICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikNCiAgLCBfY3JlYXRlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpDQogICwgZ09QTkV4dCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KQ0KICAsICRHT1BEICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NykNCiAgLCAkRFAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkNCiAgLCAka2V5cyAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpDQogICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mDQogICwgZFAgICAgICAgICAgICAgPSAkRFAuZg0KICAsIGdPUE4gICAgICAgICAgID0gZ09QTkV4dC5mDQogICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sDQogICwgJEpTT04gICAgICAgICAgPSBnbG9iYWwuSlNPTg0KICAsIF9zdHJpbmdpZnkgICAgID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5DQogICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJw0KICAsIEhJRERFTiAgICAgICAgID0gd2tzKCdfaGlkZGVuJykNCiAgLCBUT19QUklNSVRJVkUgICA9IHdrcygndG9QcmltaXRpdmUnKQ0KICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGUNCiAgLCBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5JykNCiAgLCBBbGxTeW1ib2xzICAgICA9IHNoYXJlZCgnc3ltYm9scycpDQogICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKQ0KICAsIE9iamVjdFByb3RvICAgID0gT2JqZWN0W1BST1RPVFlQRV0NCiAgLCBVU0VfTkFUSVZFICAgICA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbicNCiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0Ow0KLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczDQp2YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDsNCg0KLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3DQp2YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpew0KICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7DQogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9DQogIH0pKS5hICE9IDc7DQp9KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpew0KICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTsNCiAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldOw0KICBkUChpdCwga2V5LCBEKTsNCiAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpOw0KfSA6IGRQOw0KDQp2YXIgd3JhcCA9IGZ1bmN0aW9uKHRhZyl7DQogIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7DQogIHN5bS5fayA9IHRhZzsNCiAgcmV0dXJuIHN5bTsNCn07DQoNCnZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgdHlwZW9mICRTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbihpdCl7DQogIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7DQp9IDogZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sOw0KfTsNCg0KdmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpew0KICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTsNCiAgYW5PYmplY3QoaXQpOw0KICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOw0KICBhbk9iamVjdChEKTsNCiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpew0KICAgIGlmKCFELmVudW1lcmFibGUpew0KICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7DQogICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlOw0KICAgIH0gZWxzZSB7DQogICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlOw0KICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7DQogICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTsNCiAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7DQp9Ow0KdmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7DQogIGFuT2JqZWN0KGl0KTsNCiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKQ0KICAgICwgaSAgICA9IDANCiAgICAsIGwgPSBrZXlzLmxlbmd0aA0KICAgICwga2V5Ow0KICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTsNCiAgcmV0dXJuIGl0Ow0KfTsNCnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXsNCiAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApOw0KfTsNCnZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpew0KICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpOw0KICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7DQogIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTsNCn07DQp2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsNCiAgaXQgID0gdG9JT2JqZWN0KGl0KTsNCiAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTsNCiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjsNCiAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpOw0KICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTsNCiAgcmV0dXJuIEQ7DQp9Ow0KdmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7DQogIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpDQogICAgLCByZXN1bHQgPSBbXQ0KICAgICwgaSAgICAgID0gMA0KICAgICwga2V5Ow0KICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsNCiAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTsNCiAgfSByZXR1cm4gcmVzdWx0Ow0KfTsNCnZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXsNCiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90bw0KICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpDQogICAgLCByZXN1bHQgPSBbXQ0KICAgICwgaSAgICAgID0gMA0KICAgICwga2V5Ow0KICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsNCiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsNCiAgfSByZXR1cm4gcmVzdWx0Ow0KfTsNCg0KLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pDQppZighVVNFX05BVElWRSl7DQogICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXsNCiAgICBpZih0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCl0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTsNCiAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsNCiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXsNCiAgICAgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvKSRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTsNCiAgICAgIGlmKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTsNCiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7DQogICAgfTsNCiAgICBpZihERVNDUklQVE9SUyAmJiBzZXR0ZXIpc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7Y29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6ICRzZXR9KTsNCiAgICByZXR1cm4gd3JhcCh0YWcpOw0KICB9Ow0KICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7DQogICAgcmV0dXJuIHRoaXMuX2s7DQogIH0pOw0KDQogICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOw0KICAkRFAuZiAgID0gJGRlZmluZVByb3BlcnR5Ow0KICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KS5mID0gZ09QTkV4dC5mID0gJGdldE93blByb3BlcnR5TmFtZXM7DQogIF9fd2VicGFja19yZXF1aXJlX18oNDEpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlOw0KICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KS5mID0gJGdldE93blByb3BlcnR5U3ltYm9sczsNCg0KICBpZihERVNDUklQVE9SUyAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygyNSkpew0KICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpOw0KICB9DQoNCiAgd2tzRXh0LmYgPSBmdW5jdGlvbihuYW1lKXsNCiAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpOw0KICB9DQp9DQoNCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTsNCg0KZm9yKHZhciBzeW1ib2xzID0gKA0KICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNA0KICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnDQopLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTsNCg0KZm9yKHZhciBzeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrc0RlZmluZShzeW1ib2xzW2krK10pOw0KDQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywgew0KICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSkNCiAgJ2Zvcic6IGZ1bmN0aW9uKGtleSl7DQogICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKQ0KICAgICAgPyBTeW1ib2xSZWdpc3RyeVtrZXldDQogICAgICA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7DQogIH0sDQogIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQ0KICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihrZXkpew0KICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpOw0KICAgIHRocm93IFR5cGVFcnJvcihrZXkgKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTsNCiAgfSwNCiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LA0KICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCl7IHNldHRlciA9IGZhbHNlOyB9DQp9KTsNCg0KJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHsNCiAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQ0KICBjcmVhdGU6ICRjcmVhdGUsDQogIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQ0KICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LA0KICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQ0KICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcywNCiAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQ0KICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsDQogIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pDQogIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLA0KICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pDQogIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9scw0KfSk7DQoNCi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQ0KJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uKCl7DQogIHZhciBTID0gJFN5bWJvbCgpOw0KICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQ0KICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwNCiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMNCiAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHthOiBTfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9JzsNCn0pKSwgJ0pTT04nLCB7DQogIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsNCiAgICBpZihpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSlyZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQNCiAgICB2YXIgYXJncyA9IFtpdF0NCiAgICAgICwgaSAgICA9IDENCiAgICAgICwgcmVwbGFjZXIsICRyZXBsYWNlcjsNCiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOw0KICAgIHJlcGxhY2VyID0gYXJnc1sxXTsNCiAgICBpZih0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykkcmVwbGFjZXIgPSByZXBsYWNlcjsNCiAgICBpZigkcmVwbGFjZXIgfHwgIWlzQXJyYXkocmVwbGFjZXIpKXJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7DQogICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTsNCiAgICAgIGlmKCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlOw0KICAgIH07DQogICAgYXJnc1sxXSA9IHJlcGxhY2VyOw0KICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTsNCiAgfQ0KfSk7DQoNCi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludCkNCiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IF9fd2VicGFja19yZXF1aXJlX18oNikoJFN5bWJvbFtQUk9UT1RZUEVdLCBUT19QUklNSVRJVkUsICRTeW1ib2xbUFJPVE9UWVBFXS52YWx1ZU9mKTsNCi8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10NCnNldFRvU3RyaW5nVGFnKCRTeW1ib2wsICdTeW1ib2wnKTsNCi8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ10NCnNldFRvU3RyaW5nVGFnKE1hdGgsICdNYXRoJywgdHJ1ZSk7DQovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQ0Kc2V0VG9TdHJpbmdUYWcoZ2xvYmFsLkpTT04sICdKU09OJywgdHJ1ZSk7DQoNCi8qKiovIH0pLA0KLyogMTA2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdhc3luY0l0ZXJhdG9yJyk7DQoNCi8qKiovIH0pLA0KLyogMTA3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdvYnNlcnZhYmxlJyk7DQoNCi8qKiovIH0pLA0KLyogMTA4ICovLA0KLyogMTA5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9zdHJpbmdpZnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsNCg0KdmFyIF9zdHJpbmdpZnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RyaW5naWZ5KTsNCg0KdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7DQoNCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsNCg0KZXhwb3J0cy5kaXZpZGVVUkwgPSBkaXZpZGVVUkw7DQpleHBvcnRzLmRpdmlkZUVtYWlsID0gZGl2aWRlRW1haWw7DQpleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7DQpleHBvcnRzLmRlZXBDbG9uZSA9IGRlZXBDbG9uZTsNCmV4cG9ydHMuZ2V0VXNlclVSTEZyb21FbWFpbCA9IGdldFVzZXJVUkxGcm9tRW1haWw7DQpleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOw0KZXhwb3J0cy5jb252ZXJ0VG9Vc2VyVVJMID0gY29udmVydFRvVXNlclVSTDsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQovKioNCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwNCiAqIEBtb2R1bGUgdXRpbHMNCiAqLw0KDQovKioNCiAqIEB0eXBlZGVmIGRpdmlkZVVSTA0KICogQHR5cGUgT2JqZWN0DQogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwNCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwNCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMDQogKi8NCg0KLyoqDQogKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkNCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzDQogKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMDQogKi8NCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsNCg0KICBpZiAoIXVybCkgdGhyb3cgRXJyb3IoJ1VSTCBpcyBuZWVkZWQgdG8gc3BsaXQnKTsNCg0KICBmdW5jdGlvbiByZWN1cnNlKHZhbHVlKSB7DQogICAgdmFyIHJlZ2V4ID0gLyhbYS16QS1aLV0qKSg6XC9cLyg/OlwuKT98OikoWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpOw0KICAgIHZhciBzdWJzdCA9ICckMSwkMywkNCc7DQogICAgdmFyIHBhcnRzID0gdmFsdWUucmVwbGFjZShyZWdleCwgc3Vic3QpLnNwbGl0KCcsJyk7DQogICAgcmV0dXJuIHBhcnRzOw0KICB9DQoNCiAgdmFyIHBhcnRzID0gcmVjdXJzZSh1cmwpOw0KDQogIC8vIElmIHRoZSB1cmwgaGFzIG5vIHNjaGVtZQ0KICBpZiAocGFydHNbMF0gPT09IHVybCAmJiAhcGFydHNbMF0uaW5jbHVkZXMoJ0AnKSkgew0KDQogICAgdmFyIF9yZXN1bHQgPSB7DQogICAgICB0eXBlOiAiIiwNCiAgICAgIGRvbWFpbjogdXJsLA0KICAgICAgaWRlbnRpdHk6ICIiDQogICAgfTsNCg0KICAgIGNvbnNvbGUuZXJyb3IoJ1tEaXZpZGVVUkxdIERpdmlkZVVSTCBkb25cJ3Qgc3VwcG9ydCB1cmwgd2l0aG91dCBzY2hlbWUuIFBsZWFzZSByZXZpZXcgeW91ciB1cmwgYWRkcmVzcycsIHVybCk7DQoNCiAgICByZXR1cm4gX3Jlc3VsdDsNCiAgfQ0KDQogIC8vIGNoZWNrIGlmIHRoZSB1cmwgaGFzIHRoZSBzY2hlbWUgYW5kIGluY2x1ZGVzIGFuIEANCiAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgcGFydHNbMF0uaW5jbHVkZXMoJ0AnKSkgew0KICAgIHZhciBzY2hlbWUgPSBwYXJ0c1swXSA9PT0gdXJsID8gJ3NtdHAnIDogcGFydHNbMF07DQogICAgcGFydHMgPSByZWN1cnNlKHNjaGVtZSArICc6Ly8nICsgcGFydHNbMF0pOw0KICB9DQoNCiAgLy8gaWYgdGhlIGRvbWFpbiBpbmNsdWRlcyBhbiBALCBkaXZpZGUgaXQgdG8gZG9tYWluIGFuZCBpZGVudGl0eSByZXNwZWN0aXZlbHkNCiAgaWYgKHBhcnRzWzFdLmluY2x1ZGVzKCdAJykpIHsNCiAgICBwYXJ0c1syXSA9IHBhcnRzWzBdICsgJzovLycgKyBwYXJ0c1sxXTsNCiAgICBwYXJ0c1sxXSA9IHBhcnRzWzFdLnN1YnN0cihwYXJ0c1sxXS5pbmRleE9mKCdAJykgKyAxKTsNCiAgfSAvKmVsc2UgaWYgKHBhcnRzWzJdLmluY2x1ZGVzKCcvJykpIHsNCiAgICBwYXJ0c1syXSA9IHBhcnRzWzJdLnN1YnN0cihwYXJ0c1syXS5sYXN0SW5kZXhPZignLycpKzEpOw0KICAgIH0qLw0KDQogIHZhciByZXN1bHQgPSB7DQogICAgdHlwZTogcGFydHNbMF0sDQogICAgZG9tYWluOiBwYXJ0c1sxXSwNCiAgICBpZGVudGl0eTogcGFydHNbMl0NCiAgfTsNCg0KICByZXR1cm4gcmVzdWx0Ow0KfQ0KDQpmdW5jdGlvbiBkaXZpZGVFbWFpbChlbWFpbCkgew0KICB2YXIgaW5kZXhPZkF0ID0gZW1haWwuaW5kZXhPZignQCcpOw0KDQogIHZhciByZXN1bHQgPSB7DQogICAgdXNlcm5hbWU6IGVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpLA0KICAgIGRvbWFpbjogZW1haWwuc3Vic3RyaW5nKGluZGV4T2ZBdCArIDEsIGVtYWlsLmxlbmd0aCkNCiAgfTsNCg0KICByZXR1cm4gcmVzdWx0Ow0KfQ0KDQovKioNCiAqIENoZWNrIGlmIGFuIE9iamVjdCBpcyBlbXB0eQ0KICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3QgT2JqZWN0IHRvIGJlIGNoZWNrZWQNCiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgIHN0YXR1cyBvZiBPYmplY3QsIGVtcHR5IG9yIG5vdCAodHJ1ZXxmYWxzZSk7DQogKi8NCmZ1bmN0aW9uIGVtcHR5T2JqZWN0KG9iamVjdCkgew0KICByZXR1cm4gKDAsIF9rZXlzMi5kZWZhdWx0KShvYmplY3QpLmxlbmd0aCA+IDAgPyBmYWxzZSA6IHRydWU7DQp9DQoNCi8qKg0KICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGENCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQNCiAqIEByZXR1cm4ge09iamVjdH0NCiAqLw0KZnVuY3Rpb24gZGVlcENsb25lKG9iaikgew0KICAvL1RPRE86IHNpbXBsZSBidXQgaW5lZmZpY2llbnQgSlNPTiBkZWVwIGNsb25lLi4uDQogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShvYmopKTsNCn0NCg0KLyoqDQogKiBPYnRhaW5zIHRoZSB1c2VyIFVSTCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gZW1haWwNCiAqIEBwYXJhbSAge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsDQogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTA0KICovDQpmdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKHVzZXJFbWFpbCkgew0KICB2YXIgaW5kZXhPZkF0ID0gdXNlckVtYWlsLmluZGV4T2YoJ0AnKTsNCiAgcmV0dXJuICd1c2VyOi8vJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgdXNlckVtYWlsLmxlbmd0aCkgKyAnLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCk7DQp9DQoNCi8qKg0KICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMDQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTA0KICogQHJldHVybiB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwNCiAqLw0KZnVuY3Rpb24gZ2V0VXNlckVtYWlsRnJvbVVSTCh1c2VyVVJMKSB7DQogIHZhciB1cmwgPSBkaXZpZGVVUkwodXNlclVSTCk7DQogIHJldHVybiB1cmwuaWRlbnRpdHkucmVwbGFjZSgnLycsICcnKSArICdAJyArIHVybC5kb21haW47IC8vIGlkZW50aXR5IGZpZWxkIGhhcyAnL2V4YW1wbGVJRCcgaW5zdGVhZCBvZiAnZXhhbXBsZUlEJw0KfQ0KDQovKioNCiAqIENoZWNrIGlmIHRoZSB1c2VyIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgVVJMIGZvcm1hdCwgaWYgbm90LCBjb252ZXJ0IHRvIFVSTCBmb3JtYXQNCiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXINCiAqIEByZXR1cm4ge3N0cmluZ30gICB1c2VyVVJMICAgIHRoZSB1c2VyIFVSTA0KICovDQpmdW5jdGlvbiBjb252ZXJ0VG9Vc2VyVVJMKGlkZW50aWZpZXIpIHsNCg0KICAvLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0DQogIGlmIChpZGVudGlmaWVyLnN1YnN0cmluZygwLCA3KSA9PT0gJ3VzZXI6Ly8nKSB7DQogICAgdmFyIGRpdmlkZWRVUkwgPSBkaXZpZGVVUkwoaWRlbnRpZmllcik7DQoNCiAgICAvL2NoZWNrIGlmIHRoZSB1cmwgaXMgd2VsbCBmb3JtYXRlZA0KICAgIGlmIChkaXZpZGVkVVJMLmRvbWFpbiAmJiBkaXZpZGVkVVJMLmlkZW50aXR5KSB7DQogICAgICByZXR1cm4gaWRlbnRpZmllcjsNCiAgICB9IGVsc2Ugew0KICAgICAgdGhyb3cgJ3VzZXJVUkwgd2l0aCB3cm9uZyBmb3JtYXQnOw0KICAgIH0NCg0KICAgIC8vaWYgbm90LCBjb252ZXJ0IHRoZSB1c2VyIGVtYWlsIHRvIFVSTCBmb3JtYXQNCiAgfSBlbHNlIHsNCiAgICByZXR1cm4gZ2V0VXNlclVSTEZyb21FbWFpbChpZGVudGlmaWVyKTsNCiAgfQ0KfQ0KDQovKioqLyB9KSwNCi8qIDExMCAqLywNCi8qIDExMSAqLywNCi8qIDExMiAqLywNCi8qIDExMyAqLywNCi8qIDExNCAqLywNCi8qIDExNSAqLywNCi8qIDExNiAqLywNCi8qIDExNyAqLywNCi8qIDExOCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOw0KDQp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7DQoNCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsNCg0KdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsNCg0KdmFyIF9nZXQyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpOw0KDQp2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsNCg0KdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsNCg0KdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOw0KDQp2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOw0KDQp2YXIgX0RhdGFPYmplY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdDIpOw0KDQp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsNCg0KdmFyIF9EYXRhT2JqZWN0Q2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdENoaWxkKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQoNCnZhciBGaWx0ZXJUeXBlID0geyBBTlk6ICdhbnknLCBTVEFSVDogJ3N0YXJ0JywgRVhBQ1Q6ICdleGFjdCcgfTsNCg0KLyoqDQogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgU3luY2hlciBzdWJzY3JpYmUgY2FsbC4NCiAqIFRvIGJlIHVzZWQgYXMgYW4gb2JzZXJ2YXRpb24gcG9pbnQgZnJvbSBhIERhdGFPYmplY3RSZXBvcnRlciBjaGFuZ2UuDQogKi8NCg0KdmFyIERhdGFPYmplY3RPYnNlcnZlciA9IGZ1bmN0aW9uIChfRGF0YU9iamVjdCkgew0KICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIsIF9EYXRhT2JqZWN0KTsNCg0KICAvKiBwcml2YXRlDQogIF9jaGFuZ2VMaXN0ZW5lcjogTXNnTGlzdGVuZXINCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0NCiAgX2ZpbHRlcnM6IHs8ZmlsdGVyPjoge3R5cGU6IDxzdGFydCwgZXhhY3Q+LCBjYWxsYmFjazogPGZ1bmN0aW9uPn0gfQ0KICAqLw0KDQogIC8qKg0KICAgKiBAaWdub3JlDQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyLnN1YnNjcmliZSBtZXRob2QNCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3RPYnNlcnZlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucywgaW5pdGlhbFZlcnNpb24pIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0T2JzZXJ2ZXIpOw0KDQogICAgdmFyIF90aGlzMiA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKERhdGFPYmplY3RPYnNlcnZlci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyKSkuY2FsbCh0aGlzLCBzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEuZGF0YSwgY2hpbGRyZW5zKSk7DQoNCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7DQoNCiAgICBfdGhpcy5fdmVyc2lvbiA9IGluaXRpYWxWZXJzaW9uOw0KICAgIF90aGlzLl9maWx0ZXJzID0ge307DQoNCiAgICBfdGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgX3RoaXMuX29uRmlsdGVyKGV2ZW50KTsNCiAgICB9KTsNCg0KICAgIC8vc2V0dXAgY2hpbGRyZW5zIGRhdGEgZnJvbSBzdWJzY3JpcHRpb24NCiAgICAoMCwgX2tleXMyLmRlZmF1bHQpKGluaXRpYWxEYXRhLmNoaWxkcmVucykuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRJZCkgew0KICAgICAgdmFyIGNoaWxkRGF0YSA9IGluaXRpYWxEYXRhLmNoaWxkcmVuc1tjaGlsZElkXTsNCiAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0gPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgY2hpbGRJZCwgY2hpbGREYXRhKTsNCiAgICB9KTsNCg0KICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOw0KICAgIHJldHVybiBfdGhpczI7DQogIH0NCg0KICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIsIFt7DQogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgew0KICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX2FsbG9jYXRlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCArICcvY2hhbmdlcycsIGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgaWYgKG1zZy50eXBlID09PSAndXBkYXRlJykgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0T2JzZXJ2ZXItJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTsNCiAgICAgICAgICBfdGhpcy5fY2hhbmdlT2JqZWN0KF90aGlzLl9zeW5jT2JqLCBtc2cpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgew0KICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOw0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkZWxldGUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fb2JzZXJ2ZXJzW190aGlzLl91cmxdOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICd1bnN1YnNjcmliZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25Mb2NhbFVuU3Vic2NyaWJlDQogICAgICB2YXIgdW5TdWJzY3JpYmVNc2cgPSB7DQogICAgICAgIHR5cGU6ICd1bnN1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsDQogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQ0KICAgICAgfTsNCg0KICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh1blN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0T2JzZXJ2ZXItVU5TVUJTQ1JJQkU6ICcsIHJlcGx5KTsNCiAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX29ic2VydmVyc1tfdGhpcy5fdXJsXTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVnaXN0ZXIgdGhlIGNoYW5nZSBsaXN0ZW5lcnMgc2VudCBieSB0aGUgcmVwb3J0ZXINCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIC0gRmlsdGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgZmllbGQgKHNlcGFyYXRlZCBkb3QgcGF0aCkuIEFjY2VwdHMgKiBhdCB0aGUgZW5kIGZvciBhIG1vcmUgdW5yZXN0cmljdGVkIGZpbHRlcmluZy4NCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uQ2hhbmdlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoZmlsdGVyLCBjYWxsYmFjaykgew0KICAgICAgdmFyIGtleSA9IGZpbHRlcjsNCiAgICAgIHZhciBmaWx0ZXJPYmogPSB7DQogICAgICAgIHR5cGU6IEZpbHRlclR5cGUuRVhBQ1QsDQogICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjaw0KICAgICAgfTsNCg0KICAgICAgdmFyIGlkeCA9IGZpbHRlci5pbmRleE9mKCcqJyk7DQogICAgICBpZiAoaWR4ID09PSBmaWx0ZXIubGVuZ3RoIC0gMSkgew0KICAgICAgICBpZiAoaWR4ID09PSAwKSB7DQogICAgICAgICAgZmlsdGVyT2JqLnR5cGUgPSBGaWx0ZXJUeXBlLkFOWTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuU1RBUlQ7DQogICAgICAgICAga2V5ID0gZmlsdGVyLnN1YnN0cigwLCBmaWx0ZXIubGVuZ3RoIC0gMSk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgdGhpcy5fZmlsdGVyc1trZXldID0gZmlsdGVyT2JqOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19vbkZpbHRlcicsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZpbHRlcihldmVudCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7DQogICAgICAgIHZhciBmaWx0ZXIgPSBfdGhpcy5fZmlsdGVyc1trZXldOw0KICAgICAgICBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuQU5ZKSB7DQogICAgICAgICAgLy9tYXRjaCBhbnl0aGluZw0KICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7DQogICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuU1RBUlQpIHsNCiAgICAgICAgICAvL2lmIHN0YXJ0cyB3aXRoIGZpbHRlci4uLg0KICAgICAgICAgIGlmIChldmVudC5maWVsZC5pbmRleE9mKGtleSkgPT09IDApIHsNCiAgICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci50eXBlID09PSBGaWx0ZXJUeXBlLkVYQUNUKSB7DQogICAgICAgICAgLy9leGFjdCBtYXRjaA0KICAgICAgICAgIGlmIChldmVudC5maWVsZCA9PT0ga2V5KSB7DQogICAgICAgICAgICBmaWx0ZXIuY2FsbGJhY2soZXZlbnQpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhT2JqZWN0T2JzZXJ2ZXI7DQp9KF9EYXRhT2JqZWN0My5kZWZhdWx0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyk7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RPYnNlcnZlcjsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDExOSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOw0KDQp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7DQoNCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsNCg0KdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsNCg0KdmFyIF9nZXQyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjMpOw0KDQp2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsNCg0KdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsNCg0KdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOw0KDQp2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOw0KDQp2YXIgX0RhdGFPYmplY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdDIpOw0KDQp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIHRoZSBTeW5jaGVyIGNyZWF0ZSBjYWxsLg0KICogVG8gYmUgdXNlZCBhcyBhIHJlcG9ydGVyIHBvaW50LCBjaGFuZ2VzIHdpbGwgYmUgc3VibWl0ZWQgdG8gRGF0YU9iamVjdE9ic2VydmVyIGluc3RhbmNlcy4NCiAqLw0KLyoqDQoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQoqDQoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KKg0KKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KKg0KKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KKiovDQoNCnZhciBEYXRhT2JqZWN0UmVwb3J0ZXIgPSBmdW5jdGlvbiAoX0RhdGFPYmplY3QpIHsNCiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLCBfRGF0YU9iamVjdCk7DQoNCiAgLyogcHJpdmF0ZQ0KICBfc3Vic2NyaXB0aW9uczogPGh5cGVydHlVcmw6IHsgc3RhdHVzOiBzdHJpbmcgfSB9Pg0KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQ0KICBfb25TdWJzY3JpcHRpb25IYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgX29uUmVzcG9uc2VIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgX29uUmVhZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICAqLw0KDQogIC8qKg0KICAgKiBAaWdub3JlDQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyLmNyZWF0ZSBtZXRob2QNCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3RSZXBvcnRlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RSZXBvcnRlcik7DQoNCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdFJlcG9ydGVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIpKS5jYWxsKHRoaXMsIHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSk7DQoNCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7DQoNCiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9Ow0KDQogICAgX3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItJyArIHVybCArICctU0VORDogJywgZXZlbnQpOw0KICAgICAgX3RoaXMuX29uQ2hhbmdlKGV2ZW50KTsNCiAgICB9KTsNCg0KICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOw0KICAgIHJldHVybiBfdGhpczI7DQogIH0NCg0KICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsIFt7DQogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgew0KICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLCAnX2FsbG9jYXRlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdC0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOw0KICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7DQogICAgICAgICAgY2FzZSAncmVzcG9uc2UnOg0KICAgICAgICAgICAgX3RoaXMuX29uUmVzcG9uc2UobXNnKTticmVhazsNCiAgICAgICAgICBjYXNlICdyZWFkJzoNCiAgICAgICAgICAgIF90aGlzLl9vblJlYWQobXNnKTticmVhazsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsNCiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlKSwgJ19yZWxlYXNlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lci5yZW1vdmUoKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZW5kIGludml0YXRpb25zIChjcmVhdGUgbWVzc2FnZXMpIHRvIGh5cGVydGllcywgb2JzZXJ2ZXJzIGxpc3QuDQogICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTFtdfSBvYnNlcnZlcnMgTGlzdCBvZiBIeXBlcnR5IFVSTCdzDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2ludml0ZU9ic2VydmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIGludml0ZU9ic2VydmVycyhvYnNlcnZlcnMpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlDQogICAgICB2YXIgaW52aXRlTXNnID0gew0KICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX3N5bmNoZXIuX293bmVyLCB0bzogX3RoaXMuX3N5bmNoZXIuX3N1YlVSTCwNCiAgICAgICAgYm9keTogeyByZXN1bWU6IGZhbHNlLCByZXNvdXJjZTogX3RoaXMuX3VybCwgc2NoZW1hOiBfdGhpcy5fc2NoZW1hLCB2YWx1ZTogX3RoaXMuX3N5bmNPYmouZGF0YSwgYXV0aG9yaXNlOiBvYnNlcnZlcnMgfQ0KICAgICAgfTsNCg0KICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShpbnZpdGVNc2cpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkZWxldGUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25EZWxldGUNCiAgICAgIHZhciBkZWxldGVNc2cgPSB7DQogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLA0KICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsIH0NCiAgICAgIH07DQoNCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoZGVsZXRlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICcsIHJlcGx5KTsNCiAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX3JlcG9ydGVyc1tfdGhpcy5fdXJsXTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU3Vic2NyaXB0aW9ucyByZXF1ZXN0ZWQgYW5kIGFjY2VwdGVkIHRvIHRoaXMgcmVwb3J0ZXINCiAgICAgKiBAdHlwZSB7T2JqZWN0PEh5cGVydHlVUkwsIFN5bmNTdWJzY3JpcHRpb24+fQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdvblN1YnNjcmlwdGlvbicsDQoNCg0KICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9ucw0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHMNCiAgICAgKi8NCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJzY3JpcHRpb24oY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZSdzDQogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGV2ZW50cw0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdvblJlc3BvbnNlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNwb25zZShjYWxsYmFjaykgew0KICAgICAgdGhpcy5fb25SZXNwb25zZUhhbmRsZXIgPSBjYWxsYmFjazsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZWFkIG5vdGlmaWNhdGlvbnMNCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uUmVhZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVhZChjYWxsYmFjaykgew0KICAgICAgdGhpcy5fb25SZWFkSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHBhcmVudCBTeW5jaGVyIC0+IF9vbkZvcndhcmQNCg0KICB9LCB7DQogICAga2V5OiAnX29uRm9yd2FyZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZvcndhcmQobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogJywgbXNnKTsNCiAgICAgIHN3aXRjaCAobXNnLmJvZHkudHlwZSkgew0KICAgICAgICBjYXNlICdzdWJzY3JpYmUnOg0KICAgICAgICAgIF90aGlzLl9vblN1YnNjcmliZShtc2cpO2JyZWFrOw0KICAgICAgICBjYXNlICd1bnN1YnNjcmliZSc6DQogICAgICAgICAgX3RoaXMuX29uVW5TdWJzY3JpYmUobXNnKTticmVhazsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBzdWJzY3JpYmUNCg0KICB9LCB7DQogICAga2V5OiAnX29uU3Vic2NyaWJlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3Vic2NyaWJlKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHZhciBoeXBlcnR5VXJsID0gbXNnLmJvZHkuZnJvbTsNCg0KICAgICAgdmFyIGV2ZW50ID0gew0KICAgICAgICB0eXBlOiBtc2cuYm9keS50eXBlLA0KICAgICAgICB1cmw6IGh5cGVydHlVcmwsDQoNCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LA0KDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgew0KICAgICAgICAgIC8vY3JlYXRlIG5ldyBzdWJzY3JpcHRpb24NCiAgICAgICAgICB2YXIgc3ViID0geyB1cmw6IGh5cGVydHlVcmwsIHN0YXR1czogJ29uJyB9Ow0KICAgICAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdID0gc3ViOw0KDQogICAgICAgICAgLy9wcm9jZXNzIGFuZCBzZW5kIGNoaWxkcmVucyBkYXRhDQogICAgICAgICAgdmFyIGNoaWxkcmVuVmFsdWVzID0ge307DQogICAgICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZElkKSB7DQogICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXS5kYXRhOw0KICAgICAgICAgICAgY2hpbGRyZW5WYWx1ZXNbY2hpbGRJZF0gPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoY2hpbGREYXRhKTsNCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIC8vc2VuZCBvayByZXNwb25zZSBtZXNzYWdlDQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCB2YWx1ZTogeyBkYXRhOiAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoX3RoaXMuZGF0YSksIGNoaWxkcmVuczogY2hpbGRyZW5WYWx1ZXMgfSB9DQogICAgICAgICAgfSk7DQoNCiAgICAgICAgICByZXR1cm4gc3ViOw0KICAgICAgICB9LA0KDQogICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikgew0KICAgICAgICAgIC8vc2VuZCByZWplY3QgcmVzcG9uc2UgbWVzc2FnZQ0KICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwMywgZGVzYzogcmVhc29uIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ1NVQlNDUklQVElPTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgRGF0YU9iamVjdE9ic2VydmVyIC0+IHVuc3Vic2NyaWJlDQoNCiAgfSwgew0KICAgIGtleTogJ19vblVuU3Vic2NyaWJlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uVW5TdWJzY3JpYmUobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGh5cGVydHlVcmwgPSBtc2cuYm9keS5mcm9tOw0KDQogICAgICB2YXIgc3ViID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07DQogICAgICBkZWxldGUgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLmJvZHkudHlwZSwNCiAgICAgICAgdXJsOiBoeXBlcnR5VXJsLA0KICAgICAgICBvYmplY3Q6IHN1Yg0KICAgICAgfTsNCg0KICAgICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ1VOLVNVQlNDUklQVElPTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBSZXBvcnRlclVSTCBhZGRyZXNzOiBlbWl0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBfb25SZW1vdGVDcmVhdGUgLT4gZXZlbnQuYWNrDQoNCiAgfSwgew0KICAgIGtleTogJ19vblJlc3BvbnNlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICB2YXIgZXZlbnQgPSB7DQogICAgICAgIHR5cGU6IG1zZy50eXBlLA0KICAgICAgICB1cmw6IG1zZy5mcm9tLA0KICAgICAgICBjb2RlOiBtc2cuYm9keS5jb2RlDQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdSRVNQT05TRS1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIFJlcG9ydGVyVVJMIGFkZHJlc3M6IGVtaXRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IHJlYWQNCg0KICB9LCB7DQogICAga2V5OiAnX29uUmVhZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlYWQobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICB2YXIgZXZlbnQgPSB7DQogICAgICAgIHR5cGU6IG1zZy50eXBlLA0KICAgICAgICB1cmw6IG1zZy5mcm9tLA0KDQogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgew0KICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6ICgwLCBfdXRpbHMuZGVlcENsb25lKShfdGhpcy5kYXRhKSB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7DQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDAxLCBkZXNjOiByZWFzb24gfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uUmVhZEhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ1JFQUQtRVZFTlQ6ICcsIGV2ZW50KTsNCiAgICAgICAgX3RoaXMuX29uUmVhZEhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ3N1YnNjcmlwdGlvbnMnLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnM7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhT2JqZWN0UmVwb3J0ZXI7DQp9KF9EYXRhT2JqZWN0My5kZWZhdWx0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyk7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RSZXBvcnRlcjsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDEyMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfcHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOw0KDQp2YXIgX3Byb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvbWlzZSk7DQoNCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOw0KDQp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfUHJveHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7DQoNCnZhciBfUHJveHlPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJveHlPYmplY3QpOw0KDQp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsNCg0KdmFyIF9EYXRhT2JqZWN0Q2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdENoaWxkKTsNCg0KdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQogKiBNYWluIGV4dGVuc2lvbiBjbGFzcyBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuDQogKiBDaGlsZHJlbiBtYW5hZ2VtZW50IGlzIGNvbW1vbiBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMuDQogKi8NCnZhciBEYXRhT2JqZWN0ID0gZnVuY3Rpb24gKCkgew0KICAvKiBwcml2YXRlDQogIF92ZXJzaW9uOiBudW1iZXINCiAgIF9vd25lcjogSHlwZXJ0eVVSTA0KICBfdXJsOiBPYmplY3RVUkwNCiAgX3NjaGVtYTogU2NoZW1hDQogIF9idXM6IE1pbmlCdXMNCiAgX3N0YXR1czogb24gfCBwYXVzZWQNCiAgX3N5bmNPYmo6IFN5bmNEYXRhDQogICBfY2hpbGRyZW46IHsgaWQ6IERhdGFPYmplY3RDaGlsZCB9DQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQ0KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQ0KICBfb25BZGRDaGlsZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICAqLw0KDQogIC8qKg0KICAgKiBAaWdub3JlDQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyIGNyZWF0ZSBvciBzdWJzY3JpYmUgbWV0aG9kJ3MNCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3Qoc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMpIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0KTsNCg0KICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICBfdGhpcy5fc3luY2hlciA9IHN5bmNoZXI7DQogICAgX3RoaXMuX3VybCA9IHVybDsNCiAgICBfdGhpcy5fc2NoZW1hID0gc2NoZW1hOw0KICAgIF90aGlzLl9zdGF0dXMgPSBpbml0aWFsU3RhdHVzOw0KICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7DQogICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVuczsNCg0KICAgIF90aGlzLl92ZXJzaW9uID0gMDsNCiAgICBfdGhpcy5fY2hpbGRJZCA9IDA7DQogICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0cyA9IHt9Ow0KICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOw0KDQogICAgX3RoaXMuX293bmVyID0gc3luY2hlci5fb3duZXI7DQogICAgX3RoaXMuX2J1cyA9IHN5bmNoZXIuX2J1czsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3QsIFt7DQogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgew0KICAgICAgdmFyIF90aGlzMiA9IHRoaXM7DQoNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIHZhciBjaGlsZEJhc2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nOw0KICAgICAgY29uc29sZS5sb2coJ1tEYXRhIE9iamVjdCAtIEFsbG9jYXRlTGlzdGVuZXJzXSAtICcsIF90aGlzLl9jaGlsZHJlbnMpOw0KICAgICAgaWYgKF90aGlzLl9jaGlsZHJlbnMpIHsNCiAgICAgICAgX3RoaXMuX2NoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgew0KICAgICAgICAgIHZhciBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOw0KICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYNCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gX3RoaXMyLl9vd25lcikgew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdC1DaGlsZHJlbi1SQ1Y6ICcsIG1zZyk7DQogICAgICAgICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGUnOg0KICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2hpbGRDcmVhdGUobXNnKTticmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOg0KICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTticmVhazsNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5nZUNoaWxkcmVuKG1zZyk7YnJlYWs7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgew0KICAgICAgICBsaXN0ZW5lci5yZW1vdmUoKTsNCiAgICAgIH0pOw0KDQogICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgew0KICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2tleV0uX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIE9iamVjdCBVUkwgb2YgcmVwb3J0ZXIgb3Igb2JzZXJ2ZXINCiAgICAgKiBAdHlwZSB7T2JqZWN0VVJMfQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdwYXVzZScsDQoNCg0KICAgIC8qKg0KICAgICAqIEBpZ25vcmUNCiAgICAgKi8NCiAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7DQogICAgICAvL1RPRE86IHRoaXMgZmVhdHVyZSBuZWVkcyBtb3JlIGFuYWxpc2UNCiAgICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBpZ25vcmUNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAncmVzdW1lJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lKCkgew0KICAgICAgLy9UT0RPOiB0aGlzIGZlYXR1cmUgbmVlZHMgbW9yZSBhbmFsaXNlDQogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBAaWdub3JlDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3N0b3AnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgew0KICAgICAgLy9UT0RPOiBzaG91bGQgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gYW5kIHNlbmQgbWVzc2FnZSB1bnN1YnNjcmliZT8NCiAgICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgRGF0YU9iamVjdENoaWxkIHRvIGEgY2hpbGRyZW4gY29sbGVjdGlvbi4NCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hpbGRyZW4gLSBDaGlsZHJlbiBuYW1lIHdoZXJlIHRoZSBjaGlsZCBpcyBhZGRlZC4NCiAgICAgKiBAcGFyYW0ge0pTT059IGluaXRpYWxEYXRhIC0gSW5pdGlhbCBkYXRhIG9mIHRoZSBjaGlsZA0KICAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdENoaWxkPn0gLSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBEYXRhT2JqZWN0Q2hpbGQuDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2FkZENoaWxkJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2hpbGQoY2hpbGRyZW4sIGluaXRpYWxEYXRhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAvL2NyZWF0ZSBuZXcgY2hpbGQgdW5pcXVlIElELCBiYXNlZCBvbiBoeXBlcnR5VVJMDQogICAgICBfdGhpcy5fY2hpbGRJZCsrOw0KICAgICAgdmFyIG1zZ0NoaWxkSWQgPSBfdGhpcy5fb3duZXIgKyAnIycgKyBfdGhpcy5fY2hpbGRJZDsNCiAgICAgIHZhciBtc2dDaGlsZFBhdGggPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nICsgY2hpbGRyZW47DQoNCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgZGlyZWN0bHkgdG8gYSByZXNvdXJjZSBjaGlsZCBhZGRyZXNzOiBNZXNzYWdlQnVzDQogICAgICB2YXIgcmVxdWVzdE1zZyA9IHsNCiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IG1zZ0NoaWxkUGF0aCwNCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogbXNnQ2hpbGRJZCwgdmFsdWU6IGluaXRpYWxEYXRhIH0NCiAgICAgIH07DQoNCiAgICAgIC8vcmV0dXJucyBwcm9taXNlLCBpbiB0aGUgZnV0dXJlLCB0aGUgQVBJIG1heSBjaGFuZ2UgdG8gYXN5bmNocm9ub3VzIGNhbGwNCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUpIHsNCiAgICAgICAgdmFyIG1zZ0lkID0gX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnKTsNCg0KICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRlLXJlcG9ydGVyLWNoaWxkKCAnICsgX3RoaXMuX293bmVyICsgJyApOiAnLCByZXF1ZXN0TXNnKTsNCiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3IF9EYXRhT2JqZWN0Q2hpbGQyLmRlZmF1bHQoX3RoaXMsIG1zZ0NoaWxkSWQsIGluaXRpYWxEYXRhLCBfdGhpcy5fb3duZXIsIG1zZ0lkKTsNCiAgICAgICAgbmV3Q2hpbGQub25DaGFuZ2UoZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgX3RoaXMuX29uQ2hhbmdlKGV2ZW50LCB7IHBhdGg6IG1zZ0NoaWxkUGF0aCwgY2hpbGRJZDogbXNnQ2hpbGRJZCB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1ttc2dDaGlsZElkXSA9IG5ld0NoaWxkOw0KDQogICAgICAgIHJlc29sdmUobmV3Q2hpbGQpOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgb2YgY2hpbGRyZW5zLg0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnb25BZGRDaGlsZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkQ2hpbGQoY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyID0gY2FsbGJhY2s7DQogICAgfQ0KDQogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBhZGRDaGlsZA0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25DaGlsZENyZWF0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoaWxkQ3JlYXRlKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHZhciBtc2dDaGlsZElkID0gbXNnLmJvZHkucmVzb3VyY2U7DQoNCiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIG1zZyk7DQogICAgICB2YXIgbmV3Q2hpbGQgPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgbXNnQ2hpbGRJZCwgbXNnLmJvZHkudmFsdWUpOw0KICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1ttc2dDaGlsZElkXSA9IG5ld0NoaWxkOw0KDQogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsNCiAgICAgICAgLy9GTE9XLU9VVDogd2lsbCBmbG93IHRvIERhdGFPYmplY3RDaGlsZCAtPiBfb25SZXNwb25zZQ0KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgc291cmNlOiBfdGhpcy5fb3duZXIgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KDQogICAgICB2YXIgZXZlbnQgPSB7DQogICAgICAgIHR5cGU6IG1zZy50eXBlLA0KICAgICAgICBmcm9tOiBtc2cuZnJvbSwNCiAgICAgICAgdXJsOiBtc2cudG8sDQogICAgICAgIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwNCiAgICAgICAgY2hpbGRJZDogbXNnQ2hpbGRJZCwNCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5DQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdBREQtQ0hJTERSRU4tRVZFTlQ6ICcsIGV2ZW50KTsNCiAgICAgICAgX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL3NlbmQgZGVsdGEgbWVzc2FnZXMgdG8gc3Vic2NyaXB0aW9ucw0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25DaGFuZ2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGFuZ2UoZXZlbnQsIGNoaWxkSW5mbykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX3ZlcnNpb24rKzsNCg0KICAgICAgaWYgKF90aGlzLl9zdGF0dXMgPT09ICdvbicpIHsNCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byBhIHJlc291cmNlIGNoYW5nZXMgYWRkcmVzczogTWVzc2FnZUJ1cw0KICAgICAgICB2YXIgY2hhbmdlTXNnID0gew0KICAgICAgICAgIHR5cGU6ICd1cGRhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogX3RoaXMuX3VybCArICcvY2hhbmdlcycsDQogICAgICAgICAgYm9keTogeyB2ZXJzaW9uOiBfdGhpcy5fdmVyc2lvbiwgc291cmNlOiBfdGhpcy5fb3duZXIsIGF0dHJpYnV0ZTogZXZlbnQuZmllbGQgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnNvbGUubG9nKCdbRGF0YU9iamVjdCAtIF9vbkNoYW5nZV0gLSAnLCBldmVudCwgY2hpbGRJbmZvLCBjaGFuZ2VNc2cpOw0KDQogICAgICAgIGlmIChldmVudC5vVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuT0JKRUNUKSB7DQogICAgICAgICAgaWYgKGV2ZW50LmNUeXBlICE9PSBfUHJveHlPYmplY3QuQ2hhbmdlVHlwZS5SRU1PVkUpIHsNCiAgICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY2hhbmdlTXNnLmJvZHkuYXR0cmlidXRlVHlwZSA9IGV2ZW50Lm9UeXBlOw0KICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsNCiAgICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlVQREFURSkgew0KICAgICAgICAgICAgY2hhbmdlTXNnLmJvZHkub3BlcmF0aW9uID0gZXZlbnQuY1R5cGU7DQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLy9jaGlsZEluZm8gbXVzdCBoYXZlIChwYXRoLCBjaGlsZElkKQ0KICAgICAgICBpZiAoY2hpbGRJbmZvKSB7DQogICAgICAgICAgY2hhbmdlTXNnLnRvID0gY2hpbGRJbmZvLnBhdGg7DQogICAgICAgICAgY2hhbmdlTXNnLmJvZHkucmVzb3VyY2UgPSBjaGlsZEluZm8uY2hpbGRJZDsNCiAgICAgICAgfQ0KDQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoY2hhbmdlTXNnKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IGRlbHRhIG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgb3IgRGF0YU9iamVjdENoaWxkIHdoZW4gY2hhbmdpbmcgZGF0YQ0KDQogIH0sIHsNCiAgICBrZXk6ICdfY2hhbmdlT2JqZWN0JywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoYW5nZU9iamVjdChzeW5jT2JqLCBtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vVE9ETzogdXBkYXRlIHZlcnNpb24gPw0KICAgICAgLy9ob3cgdG8gaGFuZGxlIGFuIGluY29ycmVjdCB2ZXJzaW9uID8gRXhhbXBsZTogcmVjZWl2ZSBhIHZlcnNpb24gMyB3aGVuIHRoZSBvYnNlcnZlciBpcyBpbiB2ZXJzaW9uIDEsIHdoZXJlIGlzIHRoZSB2ZXJzaW9uIDIgPw0KICAgICAgLy93aWxsIHdlIG5lZWQgdG8gY29uZmlybSB0aGUgcmVjZXB0aW9uID8NCiAgICAgIGlmIChfdGhpcy5fdmVyc2lvbiArIDEgPT09IG1zZy5ib2R5LnZlcnNpb24pIHsNCiAgICAgICAgX3RoaXMuX3ZlcnNpb24rKzsNCiAgICAgICAgdmFyIHBhdGggPSBtc2cuYm9keS5hdHRyaWJ1dGU7DQogICAgICAgIHZhciB2YWx1ZSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShtc2cuYm9keS52YWx1ZSk7DQogICAgICAgIHZhciBmaW5kUmVzdWx0ID0gc3luY09iai5maW5kQmVmb3JlKHBhdGgpOw0KDQogICAgICAgIGlmIChtc2cuYm9keS5hdHRyaWJ1dGVUeXBlID09PSBfUHJveHlPYmplY3QuT2JqZWN0VHlwZS5BUlJBWSkgew0KICAgICAgICAgIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLkFERCkgew0KICAgICAgICAgICAgdmFyIGFyciA9IGZpbmRSZXN1bHQub2JqOw0KICAgICAgICAgICAgdmFyIGluZGV4ID0gZmluZFJlc3VsdC5sYXN0Ow0KICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhcnIsIFtpbmRleCwgMF0uY29uY2F0KHZhbHVlKSk7DQogICAgICAgICAgfSBlbHNlIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlJFTU9WRSkgew0KICAgICAgICAgICAgdmFyIF9hcnIgPSBmaW5kUmVzdWx0Lm9iajsNCiAgICAgICAgICAgIHZhciBfaW5kZXggPSBmaW5kUmVzdWx0Lmxhc3Q7DQogICAgICAgICAgICBfYXJyLnNwbGljZShfaW5kZXgsIHZhbHVlKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKG1zZy5ib2R5LnZhbHVlKSB7DQogICAgICAgICAgICBmaW5kUmVzdWx0Lm9ialtmaW5kUmVzdWx0Lmxhc3RdID0gdmFsdWU7IC8vIFVQREFURSBvciBBREQNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZGVsZXRlIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF07IC8vIFJFTU9WRQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy9UT0RPOiBob3cgdG8gaGFuZGxlIHVuc3luY2hyb25pemVkIHZlcnNpb25zPw0KICAgICAgICBjb25zb2xlLmxvZygnVU5TWU5DSFJPTklaRUQgVkVSU0lPTjogKGRhdGEgPT4gJyArIF90aGlzLl92ZXJzaW9uICsgJywgbXNnID0+ICcgKyBtc2cuYm9keS52ZXJzaW9uICsgJyknKTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhDQoNCiAgfSwgew0KICAgIGtleTogJ19jaGFuZ2VDaGlsZHJlbicsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGFuZ2VDaGlsZHJlbihtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICBjb25zb2xlLmxvZygnQ2hhbmdlIGNoaWxkcmVuOiAnLCBfdGhpcy5fb3duZXIsIG1zZyk7DQoNCiAgICAgIHZhciBjaGlsZElkID0gbXNnLmJvZHkucmVzb3VyY2U7DQogICAgICB2YXIgY2hpbGRyZW4gPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdOw0KDQogICAgICBpZiAoY2hpbGRyZW4pIHsNCiAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChjaGlsZHJlbi5fc3luY09iaiwgbXNnKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICcsIGNoaWxkSWQpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ3VybCcsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fdXJsOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIE9iamVjdCBzY2hlbWEgVVJMICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQ0KICAgICAqIEB0eXBlIHtTY2hlbWFVUkx9DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3NjaGVtYScsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fc2NoZW1hOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFN0YXR1cyBvZiB0aGUgcmVwb3J0ZXIgb3Igb2JzZXJ2ZXIgY29ubmVjdGlvbiAodGhpcyBmaWVsZCBpcyBub3QgeWV0IHN0YWJsZSwgYW5kIGlzIHN1YnNqZWN0IHRvIGNoYW5nZSkNCiAgICAgKiBAdHlwZSB7U3RhdHVzfSAtIEVudW0gb2Y6IG9uIHwgcGF1c2VkDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3N0YXR1cycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fc3RhdHVzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIERhdGEgc3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4NCiAgICAgKiBAdHlwZSB7SlNPTn0gLSBKU09OIHN0cnVjdHVyZSB0aGF0IHNob3VsZCBmb2xsb3cgdGhlIGRlZmluZWQgc2NoZW1hLCBpZiBhbnkuDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RhdGEnLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBBbGwgY3JlYXRlZCBjaGlsZHJlbidzIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIGRvZXNuJ3QgY29udGFpbiBhbGwgY2hpbGRyZW4ncyBzaW5jZSByZXBvcnRlciBjcmVhdGlvbi4NCiAgICAgKiBAdHlwZSB7T2JqZWN0PENoaWxkSWQsIERhdGFPYmplY3RDaGlsZD59DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2NoaWxkcmVucycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzOw0KICAgIH0NCiAgfV0pOw0KICByZXR1cm4gRGF0YU9iamVjdDsNCn0oKTsgLyoqDQogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KICAgICAqDQogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICAgICAqDQogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAgICAgKg0KICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAgICAgKiovDQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3Q7DQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsNCg0KLyoqKi8gfSksDQovKiAxMjEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsNCg0KdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOw0KDQp2YXIgX1Byb3h5T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOw0KDQp2YXIgX1Byb3h5T2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb3h5T2JqZWN0KTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgRGF0YU9iamVjdCBhZGRDaGlsZHJlbiBjYWxsIG9yIGZyb20gb25BZGRDaGlsZHJlbiBpZiByZW1vdGVseSBjcmVhdGVkLg0KICogQ2hpbGRyZW4gb2JqZWN0IHN5bmNocm9uaXphdGlvbiBpcyBhIGEgZmFzdCBmb3J3YXJkIG1lY2hhbmlzbSwgbm8gbmVlZCBmb3IgZGlyZWN0IHN1YnNjcmlwdGlvbnMsIGl0IHVzZXMgdGhlIGFscmVhZHkgYXV0aG9yaXplZCBzdWJzY3JpcHRpb24gZnJvbSB0aGUgcGFyZW50IERhdGFPYmplY3QuDQogKi8NCnZhciBEYXRhT2JqZWN0Q2hpbGQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovID0gZnVuY3Rpb24gKCkgew0KICAvKiBwcml2YXRlDQogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9vblJlc3BvbnNlSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkDQogICovDQoNCiAgLyoqDQogICAqIEBpZ25vcmUNCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIERhdGFPYmplY3QuYWRkQ2hpbGRyZW4NCiAgICovDQogIGZ1bmN0aW9uIERhdGFPYmplY3RDaGlsZChwYXJlbnQsIGNoaWxkSWQsIGluaXRpYWxEYXRhLCBvd25lciwgbXNnSWQpIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0Q2hpbGQpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7DQogICAgX3RoaXMuX2NoaWxkSWQgPSBjaGlsZElkOw0KICAgIF90aGlzLl9vd25lciA9IG93bmVyOw0KICAgIF90aGlzLl9tc2dJZCA9IG1zZ0lkOw0KDQogICAgX3RoaXMuX3N5bmNPYmogPSBuZXcgX1Byb3h5T2JqZWN0Mi5kZWZhdWx0KGluaXRpYWxEYXRhKTsNCg0KICAgIF90aGlzLl9idXMgPSBwYXJlbnQuX2J1czsNCiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RDaGlsZCwgW3sNCiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAvL3RoaXMgaXMgb25seSBuZWVkZWQgZm9yIGNoaWxkcmVuIHJlcG9ydGVycw0KICAgICAgaWYgKF90aGlzLl9vd25lcikgew0KICAgICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl9vd25lciwgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiBtc2cuaWQgPT09IF90aGlzLl9tc2dJZCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RDaGlsZC5vblJlc3BvbnNlOicsIG1zZyk7DQogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIGlmIChfdGhpcy5fbGlzdGVuZXIpIHsNCiAgICAgICAgX3RoaXMuX2xpc3RlbmVyLnJlbW92ZSgpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkZWxldGUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX2NoaWxkcmVuW190aGlzLl9jaGlsZElkXTsNCg0KICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsNCg0KICAgICAgLy9UT0RPOiBzZW5kIGRlbGV0ZSBtZXNzYWdlID8NCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBDaGlsZHJlbiBJRCBnZW5lcmF0ZWQgb24gYWRkQ2hpbGRyZW4uIFVuaXF1ZSBpZGVudGlmaWVyDQogICAgICogQHR5cGUge1VSTH0gLSBVUkwgb2YgdGhlIGZvcm1hdCA8SHlwZXJ0eVVSTD4jPG51bWVyaWMtc2VxdWVuY2U+DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uQ2hhbmdlJywNCg0KDQogICAgLyoqDQogICAgICogUmVnaXN0ZXIgdGhlIGNoYW5nZSBsaXN0ZW5lcnMgc2VudCBieSB0aGUgcmVwb3J0ZXIgY2hpbGQNCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgIGNhbGxiYWNrKGV2ZW50KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZXMNCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uUmVzcG9uc2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9vblJlc3BvbnNlSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3QgLT4gX29uQ2hpbGRDcmVhdGUNCg0KICB9LCB7DQogICAga2V5OiAnX29uUmVzcG9uc2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZXNwb25zZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLnR5cGUsDQogICAgICAgIHVybDogbXNnLmJvZHkuc291cmNlLA0KICAgICAgICBjb2RlOiBtc2cuYm9keS5jb2RlDQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKSB7DQogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnY2hpbGRJZCcsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fY2hpbGRJZDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBEYXRhIFN0cnVjdHVyZSB0byBiZSBzeW5jaHJvbml6ZWQuDQogICAgICogQHR5cGUge0pTT059IC0gSlNPTiBzdHJ1Y3R1cmUgdGhhdCBzaG91bGQgZm9sbG93IHRoZSBkZWZpbmVkIHNjaGVtYSwgaWYgYW55Lg0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkYXRhJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9zeW5jT2JqLmRhdGE7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhT2JqZWN0Q2hpbGQ7DQp9KCk7IC8qKg0KICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQogICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQogICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQogICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCiAgICAgKg0KICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICAgKg0KICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogICAgICoNCiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgICoqLw0KDQpleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0Q2hpbGQ7DQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsNCg0KLyoqKi8gfSksDQovKiAxMjIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KZXhwb3J0cy5PYmplY3RUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0gdW5kZWZpbmVkOw0KDQp2YXIgX3N0cmluZ2lmeSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOw0KDQp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsNCg0KdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOw0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCi8qKg0KICogQGFjY2VzcyBwcml2YXRlDQogKiBNYWluIGNsYXNzIHRoYXQgbWFpbnRhaW5zIGEgSlNPTiBvYmplY3QsIGFuZCBvYnNlcnZlcyBjaGFuZ2VzIGluIHRoaXMgb2JqZWN0LCByZWN1cnNpdmVseS4NCiAqIEludGVybmFsIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgYWxzbyBvYnNlcnZlZC4NCiAqLw0KdmFyIFN5bmNPYmplY3QgPSBmdW5jdGlvbiAoKSB7DQogIGZ1bmN0aW9uIFN5bmNPYmplY3QoaW5pdGlhbERhdGEpIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTeW5jT2JqZWN0KTsNCg0KICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0gW107DQogICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsNCg0KICAgIHRoaXMuX2RhdGEgPSBpbml0aWFsRGF0YSB8fCB7fTsNCg0KICAgIHRoaXMuX2ludGVybmFsT2JzZXJ2ZSh0aGlzLl9kYXRhKTsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNPYmplY3QsIFt7DQogICAga2V5OiAnb2JzZXJ2ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmUoY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29ic2VydmVycy5wdXNoKGNhbGxiYWNrKTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdmaW5kJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZChwYXRoKSB7DQogICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsNCg0KICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQobGlzdCk7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnZmluZEJlZm9yZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRCZWZvcmUocGF0aCkgew0KICAgICAgdmFyIHJlc3VsdCA9IHt9Ow0KICAgICAgdmFyIGxpc3QgPSBwYXRoLnNwbGl0KCcuJyk7DQogICAgICByZXN1bHQubGFzdCA9IGxpc3QucG9wKCk7DQogICAgICByZXN1bHQub2JqID0gdGhpcy5fZmluZFdpdGhTcGxpdChsaXN0KTsNCg0KICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfZmluZFdpdGhTcGxpdCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5kV2l0aFNwbGl0KGxpc3QpIHsNCiAgICAgIHZhciBvYmogPSB0aGlzLl9kYXRhOw0KICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgew0KICAgICAgICBvYmogPSBvYmpbdmFsdWVdOw0KICAgICAgfSk7DQoNCiAgICAgIHJldHVybiBvYmo7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX2lzT2JzZXJ2YWJsZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9pc09ic2VydmFibGUob2JqKSB7DQogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19pbnRlcm5hbE9ic2VydmUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfaW50ZXJuYWxPYnNlcnZlKG9iamVjdCkgew0KICAgICAgdmFyIF90aGlzMiA9IHRoaXM7DQoNCiAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihjaGFuZ2VzZXQpIHsNCg0KICAgICAgICBjaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7DQogICAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSAmJiBjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHsNCiAgICAgICAgICAgIGlmIChjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHsNCiAgICAgICAgICAgICAgdmFyIG8gPSBPYmplY3QuZGVlcE9ic2VydmUoY2hhbmdlLm5ld1ZhbHVlLCBoYW5kbGVyKTsNCiAgICAgICAgICAgICAgb2JqZWN0W2NoYW5nZS5rZXlwYXRoXSA9IG87DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBBcnJheSkgew0KICAgICAgICAgICAgICB2YXIgX28gPSBBcnJheS5vYnNlcnZlKGNoYW5nZS5uZXdWYWx1ZSwgaGFuZGxlcik7DQogICAgICAgICAgICAgIG9iamVjdFtjaGFuZ2Uua2V5cGF0aF0gPSBfbzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KDQogICAgICAgIGNoYW5nZXNldC5ldmVyeShmdW5jdGlvbiAoY2hhbmdlKSB7DQogICAgICAgICAgX3RoaXMyLl9vbkNoYW5nZXMoY2hhbmdlKTsNCiAgICAgICAgfSk7DQogICAgICB9Ow0KDQogICAgICB0aGlzLl9kYXRhID0gT2JqZWN0LmRlZXBPYnNlcnZlKG9iamVjdCwgaGFuZGxlcik7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX2ZpcmVFdmVudCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9maXJlRXZlbnQoZXZlbnQpIHsNCiAgICAgIHRoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgICAgICBjYWxsYmFjayhldmVudCk7DQogICAgICB9KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfb25DaGFuZ2VzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2hhbmdlcyhjaGFuZ2UpIHsNCg0KICAgICAgdmFyIG9iaiA9IGNoYW5nZS5vYmplY3Q7DQogICAgICB2YXIgb2JqVHlwZSA9IHZvaWQgMDsNCg0KICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7DQogICAgICAgIG9ialR5cGUgPSBPYmplY3RUeXBlLk9CSkVDVDsNCiAgICAgIH0NCg0KICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHsNCiAgICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuQVJSQVk7DQogICAgICB9DQoNCiAgICAgIHZhciBmaWVsZFN0cmluZyA9IGNoYW5nZS5rZXlwYXRoOw0KDQogICAgICAvLyBjb25zb2xlLmxvZygnRmllbGQ6JywgZmllbGRTdHJpbmcpOw0KICAgICAgLy8gY29uc29sZS5sb2coJ3R5cGU6JywgY2hhbmdlLnR5cGUpOw0KDQogICAgICAvL2xldCBvbGRWYWx1ZSA9IGNoYW5nZS5vbGRWYWx1ZTsNCiAgICAgIHZhciBuZXdWYWx1ZSA9IG9ialtjaGFuZ2UubmFtZV07DQoNCiAgICAgIGNvbnNvbGUuaW5mbyhjaGFuZ2UudHlwZSArICcgfCBGaWVsZDogJyArIGZpZWxkU3RyaW5nICsgJyB8IE5ldyBWYWx1ZTonLCAoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkobmV3VmFsdWUpKTsNCg0KICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAndXBkYXRlJykgew0KICAgICAgICB0aGlzLl9maXJlRXZlbnQoew0KICAgICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLlVQREFURSwNCiAgICAgICAgICBvVHlwZTogb2JqVHlwZSwNCiAgICAgICAgICBmaWVsZDogZmllbGRTdHJpbmcsDQogICAgICAgICAgZGF0YTogbmV3VmFsdWUNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2FkZCcpIHsNCiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsNCiAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5BREQsDQogICAgICAgICAgb1R5cGU6IG9ialR5cGUsDQogICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nLA0KICAgICAgICAgIGRhdGE6IG5ld1ZhbHVlDQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICdkZWxldGUnKSB7DQogICAgICAgIHRoaXMuX2ZpcmVFdmVudCh7DQogICAgICAgICAgY1R5cGU6IENoYW5nZVR5cGUuUkVNT1ZFLA0KICAgICAgICAgIG9UeXBlOiBvYmpUeXBlLA0KICAgICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdkYXRhJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9kYXRhOw0KICAgIH0NCiAgfV0pOw0KICByZXR1cm4gU3luY09iamVjdDsNCn0oKTsNCg0KdmFyIENoYW5nZVR5cGUgPSBleHBvcnRzLkNoYW5nZVR5cGUgPSB7IFVQREFURTogJ3VwZGF0ZScsIEFERDogJ2FkZCcsIFJFTU9WRTogJ3JlbW92ZScgfTsNCnZhciBPYmplY3RUeXBlID0gZXhwb3J0cy5PYmplY3RUeXBlID0geyBPQkpFQ1Q6ICdvYmplY3QnLCBBUlJBWTogJ2FycmF5JyB9Ow0KZXhwb3J0cy5kZWZhdWx0ID0gU3luY09iamVjdDsNCg0KLyoqKi8gfSksDQovKiAxMjMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7DQoNCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7DQoNCnZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpOw0KDQp2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsNCiAgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOw0KICB2YXIgZGVzYyA9ICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMi5kZWZhdWx0KShvYmplY3QsIHByb3BlcnR5KTsNCg0KICBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7DQogICAgdmFyIHBhcmVudCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKG9iamVjdCk7DQoNCiAgICBpZiAocGFyZW50ID09PSBudWxsKSB7DQogICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsNCiAgICB9DQogIH0gZWxzZSBpZiAoInZhbHVlIiBpbiBkZXNjKSB7DQogICAgcmV0dXJuIGRlc2MudmFsdWU7DQogIH0gZWxzZSB7DQogICAgdmFyIGdldHRlciA9IGRlc2MuZ2V0Ow0KDQogICAgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7DQogICAgICByZXR1cm4gdW5kZWZpbmVkOw0KICAgIH0NCg0KICAgIHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7DQogIH0NCn07DQoNCi8qKiovIH0pLA0KLyogMTI0ICovLA0KLyogMTI1ICovLA0KLyogMTI2ICovLA0KLyogMTI3ICovLA0KLyogMTI4ICovLA0KLyogMTI5ICovLA0KLyogMTMwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7DQoNCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsNCg0KdmFyIF9hc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNik7DQoNCnZhciBfYXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Fzc2lnbik7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpOw0KDQp2YXIgX0RhdGFPYmplY3RSZXBvcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0UmVwb3J0ZXIpOw0KDQp2YXIgX0RhdGFPYmplY3RPYnNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsNCg0KdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdE9ic2VydmVyKTsNCg0KdmFyIF9EYXRhUHJvdmlzaW9uYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMyk7DQoNCnZhciBfRGF0YVByb3Zpc2lvbmFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFQcm92aXNpb25hbCk7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCi8qKg0KKiBUaGUgbWFpbiBjbGFzcyBmb3IgdGhlIHN5bmNoZXIgcGFja2FnZS4NCiogVGhlIFN5bmNoZXIgaXMgYSBzaW5nbGV0b24gY2xhc3MgcGVyIEh5cGVydHkvVVJMIGFuZCBpdCBpcyB0aGUgb3duZXIgb2YgYWxsIGNyZWF0ZWQgRGF0YSBTeW5jIE9iamVjdHMgYWNjb3JkaW5nIHRvIHRoZSBSZXBvcnRlciAtIE9ic2VydmVyIHBhdHRlcm4uDQoqIE1haW4gZnVuY3Rpb25hbGl0eSBpcyB0byBjcmVhdGUgcmVwb3J0ZXJzIGFuZCB0byBzdWJzY3JpYmUgdG8gZXhpc3Rpbmcgb25lcy4NCiovDQp2YXIgU3luY2hlciA9IGZ1bmN0aW9uICgpIHsNCiAgLyogcHJpdmF0ZQ0KICBfb3duZXI6IFVSTA0KICBfYnVzOiBNaW5pQnVzDQogICBfc3ViVVJMOiBVUkwNCiAgIF9yZXBvcnRlcnM6IDx1cmw6IERhdGFPYmplY3RSZXBvcnRlcj4NCiAgX29ic2VydmVyczogPHVybDogRGF0YU9iamVjdE9ic2VydmVyPg0KICBfcHJvdmlzaW9uYWxzOiA8dXJsOiBEYXRhUHJvdmlzaW9uYWw+DQogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICBfb25SZXN1bWU6IChldmVudCkgPT4gdm9pZA0KICAqLw0KDQogIC8qKg0KICAqIENvbnN0cnVjdG9yIHRoYXQgc2hvdWxkIGJlIHVzZWQgYnkgdGhlIEh5cGVydHkgb3duZXINCiAgKiBAcGFyYW0ge0h5cGVydHlVUkx9IG93bmVyIC0gSHlwZXJ0eSBVUkwgb3duZXIuIEFuIFVSTCBhbGxvY2F0ZWQgYnkgdGhlIHJ1bnRpbWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBIeXBlcnR5Lg0KICAqIEBwYXJhbSB7TWluaUJ1c30gYnVzIC0gQW4gaW5zdGFuY2Ugb2YgdGhlIE1pbmlCdXMgcHJvdmlkZWQgaW4gdGhlIHNhbmRib3guIFdoZW4gYW4gb2JqZWN0IChSZXBvcnRlciBvciBPYnNlcnZlZCkgaXMgY3JlYXRlZCwgdGhlIFN5bmNoZXJNYW5hZ2VyIHdpbGwgYWRkIGEgbGlzdGVuZXIgaW4gdGhlIE1pbmlCdXMgdG8gcmVjZWl2ZS9zZW5kIE1lc3NhZ2VzIG9mIHRoYXQgb2JqZWN0Lg0KICAqIEBwYXJhbSB7SlNPTn0gY29uZmlnIC0gQ29uZmlndXJhdGlvbiBkYXRhLiBUaGUgb25seSByZXF1aXJlZCBmaWVsZCBmb3Igbm93IGlzIHRoZSBydW50aW1lVVJMLg0KICAqLw0KICBmdW5jdGlvbiBTeW5jaGVyKG93bmVyLCBidXMsIGNvbmZpZykgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFN5bmNoZXIpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgIF90aGlzLl9vd25lciA9IG93bmVyOw0KICAgIF90aGlzLl9idXMgPSBidXM7DQoNCiAgICBfdGhpcy5fc3ViVVJMID0gY29uZmlnLnJ1bnRpbWVVUkwgKyAnL3NtJzsNCg0KICAgIF90aGlzLl9yZXBvcnRlcnMgPSB7fTsNCiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307DQogICAgX3RoaXMuX3Byb3Zpc2lvbmFscyA9IHt9Ow0KDQogICAgYnVzLmFkZExpc3RlbmVyKG93bmVyLCBmdW5jdGlvbiAobXNnKSB7DQogICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmDQogICAgICBpZiAobXNnLmZyb20gIT09IG93bmVyKSB7DQogICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIFN5bmNoZXItUkNWOiAnLCBtc2cpOw0KICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7DQogICAgICAgICAgY2FzZSAnZm9yd2FyZCc6DQogICAgICAgICAgICBfdGhpcy5fb25Gb3J3YXJkKG1zZyk7YnJlYWs7DQogICAgICAgICAgY2FzZSAnY3JlYXRlJzoNCiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZUNyZWF0ZShtc2cpO2JyZWFrOw0KICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6DQogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVEZWxldGUobXNnKTticmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0pOw0KICB9DQoNCiAgLyoqDQogICogVGhlIG93bmVyIG9mIHRoZSBTeW5jaGVyIGFuZCBhbGwgY3JlYXRlZCByZXBvcnRlcnMuDQogICogQHR5cGUge0h5cGVydHlVUkx9DQogICovDQoNCg0KICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShTeW5jaGVyLCBbew0KICAgIGtleTogJ2NyZWF0ZScsDQoNCg0KICAgIC8qKg0KICAgICogUmVxdWVzdCBhIERhdGFPYmplY3RSZXBvcnRlciBjcmVhdGlvbi4gVGhlIFVSTCB3aWxsIGJlIGJlIHJlcXVlc3RlZCBieSB0aGUgYWxsb2NhdGlvbiBtZWNoYW5pc20uDQogICAgKiBAcGFyYW0gIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQ0KICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTFtdfSBvYnNlcnZlcnMgLSBMaXN0IG9mIGh5cGVydGllcyB0aGF0IGFyZSBwcmUtYXV0aG9yaXplZCBmb3Igc3Vic2NyaXB0aW9uDQogICAgKiBAcGFyYW0gIHtKU09OfSBpbml0aWFsRGF0YSAtIEluaXRpYWwgZGF0YSBvZiB0aGUgcmVwb3J0ZXINCiAgICAqIEBwYXJhbSAge3N0cmluZ30gb2JqZWN0VVJMIC0gcmV1c2FibGUgZGF0YU9iamVjdCBVUkwNCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdFJlcG9ydGVyPn0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgUmVwb3J0ZXIuIFRoZSByZXBvcnRlciBjYW4gYmUgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQgYnkgdGhlIFBFUA0KICAgICovDQogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShzY2hlbWEsIG9ic2VydmVycywgaW5pdGlhbERhdGEpIHsNCiAgICAgIHZhciBzdG9yZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7DQogICAgICB2YXIgcDJwID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiBmYWxzZTsNCg0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHZhciBjcml0ZXJpYSA9IHt9Ow0KDQogICAgICBjcml0ZXJpYS5wMnAgPSBwMnA7DQogICAgICBjcml0ZXJpYS5zdG9yZSA9IHN0b3JlOw0KICAgICAgY3JpdGVyaWEuc2NoZW1hID0gc2NoZW1hOw0KICAgICAgY3JpdGVyaWEub2JzZXJ2ZXJzID0gb2JzZXJ2ZXJzOw0KICAgICAgY3JpdGVyaWEuaW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTsNCg0KICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBSZXBvcnRlciAtIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7DQoNCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IGZhbHNlIH0pOw0KDQogICAgICByZXR1cm4gX3RoaXMuX2NyZWF0ZShjcml0ZXJpYSk7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAncmVzdW1lUmVwb3J0ZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lUmVwb3J0ZXJzKGNyaXRlcmlhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBSZXBvcnRlciAtIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7DQoNCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IHRydWUgfSk7DQoNCiAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlKGNyaXRlcmlhKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFJlcXVlc3QgYSBzdWJzY3JpcHRpb24gdG8gYW4gZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0Lg0KICAgICogQHBhcmFtIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQ0KICAgICogQHBhcmFtIHtPYmplY3RVUkx9IG9ialVSTCAtIEFkZHJlc3Mgb2YgdGhlIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdCB0byBiZSBvYnNlcnZlZA0KICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0T2JzZXJ2ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBvYnNlcnZlci4gSXQncyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcG9ydGVyLg0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3N1YnNjcmliZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZShzY2hlbWEsIG9ialVSTCkgew0KICAgICAgdmFyIHN0b3JlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsNCiAgICAgIHZhciBwMnAgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOw0KDQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGNyaXRlcmlhID0ge307DQoNCiAgICAgIGNyaXRlcmlhLnAycCA9IHAycDsNCiAgICAgIGNyaXRlcmlhLnN0b3JlID0gc3RvcmU7DQogICAgICBjcml0ZXJpYS5zY2hlbWEgPSBzY2hlbWE7DQogICAgICBjcml0ZXJpYS5yZXNvdXJjZSA9IG9ialVSTDsNCg0KICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gc3Vic2NyaWJlXSAtIHN1YnNjcmliZSBjcml0ZXJpYTogJywgY3JpdGVyaWEpOw0KDQogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiBmYWxzZSB9KTsNCg0KICAgICAgcmV0dXJuIF90aGlzLl9zdWJzY3JpYmUoY3JpdGVyaWEpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogUmVxdWVzdCBhIHN1YnNjcmlwdGlvbiB0byBhbiBleGlzdGVudCByZXBvcnRlciBvYmplY3QuDQogICAgKiBAcGFyYW0ge2NyaXRlcmlhfSBjcml0ZXJpYSAtIEluZm9ybWF0aW9uIHRvIGRpc2NvdmVyeSB0aGUgb2JzZXJ2ZXIgb2JqZWN0DQogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RPYnNlcnZlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IG9ic2VydmVyLiBJdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVwb3J0ZXIuDQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAncmVzdW1lT2JzZXJ2ZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lT2JzZXJ2ZXJzKGNyaXRlcmlhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIF9jcml0ZXJpYSA9IGNyaXRlcmlhIHx8IHt9Ow0KDQogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoX2NyaXRlcmlhLCB7IHJlc3VtZTogdHJ1ZSB9KTsNCg0KICAgICAgcmV0dXJuIF90aGlzLl9zdWJzY3JpYmUoX2NyaXRlcmlhKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIFJlcXVlc3QgYSByZWFkIGFjdGlvbiBvbiB0aGUgcmVwb3J0ZXIgb2JqZWN0DQogICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gVVJMIG9mIHRoZSByZXBvcnRlciBvYmplY3QgdG8gYmUgcmVhZA0KICAgICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q+fSBSZXR1cm4gUHJvbWlzZSB0byBsYXN0IGF2YWlsYWJsZSBkYXRhIG9mIHRoZSByZXBvcnRlcg0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3JlYWQnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkKG9ialVSTCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byByZXBvcnRlciBvYmplY3QgKG1heWJlIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGF2YWlsYWJsZSwgc28gaXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIE1lc3NhZ2VCdXMgLT4gcmVzb2x2ZSkNCiAgICAgIC8vd2lsbCByZWFjaCB0aGUgcmVtb3RlIG9iamVjdCBpbiBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gX29uUmVhZA0KICAgICAgdmFyIHJlYWRNc2cgPSB7DQogICAgICAgIHR5cGU6ICdyZWFkJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogb2JqVVJMDQogICAgICB9Ow0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZWFkTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygncmVhZC1yZXNwb25zZTogJywgcmVwbHkpOw0KICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LnZhbHVlKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgZXZlbnRzIG9mIHJlbW92ZSBSZXBvcnRlciBvYmplY3RzLg0KICAgICogVGhpcyBpcyByZWxlYXRlZCB0byB0aGUgbWVzc2FnZW5zIHNlbnQgYnkgY3JlYXRlIHRvIHRoZSBvYnNlcnZlcnMgSHlwZXJ0eSBhcnJheS4NCiAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdvbk5vdGlmaWNhdGlvbicsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTm90aWZpY2F0aW9uKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIgPSBjYWxsYmFjazsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfY3JlYXRlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZShjcml0ZXJpYSkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgIHZhciByZXN1bWUgPSBjcml0ZXJpYS5yZXN1bWU7DQogICAgICAgIHZhciBpbml0aWFsRGF0YSA9IGNyaXRlcmlhLmluaXRpYWxEYXRhIHx8IHt9Ow0KICAgICAgICB2YXIgc2NoZW1hID0gdm9pZCAwOw0KDQogICAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlDQogICAgICAgIHZhciByZXF1ZXN0TXNnID0gew0KICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLA0KICAgICAgICAgIGJvZHk6IHsgcmVzdW1lOiByZXN1bWUgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV06ICcsIGNyaXRlcmlhLCByZXF1ZXN0TXNnKTsNCg0KICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUgPSBpbml0aWFsRGF0YTsNCiAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnZhbHVlLnJlcG9ydGVyID0gX3RoaXMuX293bmVyOw0KDQogICAgICAgIGlmIChjcml0ZXJpYS5zY2hlbWEpIHsNCiAgICAgICAgICBzY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7DQogICAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChjcml0ZXJpYS5wMnApIHJlcXVlc3RNc2cuYm9keS5wMnAgPSBjcml0ZXJpYS5wMnA7DQogICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgcmVxdWVzdE1zZy5ib2R5LnN0b3JlID0gY3JpdGVyaWEuc3RvcmU7DQogICAgICAgIGlmIChjcml0ZXJpYS5vYnNlcnZlcnMpIHJlcXVlc3RNc2cuYm9keS5hdXRob3Jpc2UgPSBjcml0ZXJpYS5vYnNlcnZlcnM7DQoNCiAgICAgICAgaWYgKHJlc3VtZSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSByZXN1bWUgbWVzc2FnZTogJywgcmVxdWVzdE1zZyk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vcmVxdWVzdCBjcmVhdGUgdG8gdGhlIGFsbG9jYXRpb24gc3lzdGVtLiBDYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIFBvbGljeUVuZ2luZS4NCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlLXJlc3BvbnNlOiAnLCByZXBseSk7DQogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIGFjY2VwdGVkDQogICAgICAgICAgICB2YXIgb2JqVVJMID0gcmVwbHkuYm9keS5yZXNvdXJjZTsNCg0KICAgICAgICAgICAgaWYgKHJlc3VtZSkgew0KICAgICAgICAgICAgICBzY2hlbWEgPSByZXBseS5ib2R5LnNjaGVtYTsNCiAgICAgICAgICAgICAgaW5pdGlhbERhdGEgPSByZXBseS5ib2R5LnZhbHVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCBpbml0aWFsRGF0YSwgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcyk7DQogICAgICAgICAgICBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF0gPSBuZXdPYmo7DQoNCiAgICAgICAgICAgIHJlc29sdmUobmV3T2JqKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy9yZXBvcnRlciBjcmVhdGlvbiByZWplY3RlZA0KICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19zdWJzY3JpYmUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfc3Vic2NyaWJlKGNyaXRlcmlhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCg0KICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsU3Vic2NyaWJlDQogICAgICAgIHZhciBzdWJzY3JpYmVNc2cgPSB7DQogICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsDQogICAgICAgICAgYm9keToge30NCiAgICAgICAgfTsNCg0KICAgICAgICAvLyBIeXBlcnR5IHJlcXVlc3QgdG8gYmUgYW4gT2JzZXJ2ZXINCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjaHlwZXJ0eS1yZXF1ZXN0LXRvLWJlLWFuLW9ic2VydmVyDQoNCiAgICAgICAgLy8gUmVzdW1lIFN1YnNjcmlwdGlvbnMgZm9yIHRoZSBzYW1lIEh5cGVydHkgVVJMDQogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci10aGUtc2FtZS1oeXBlcnR5LXVybA0KDQogICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciBhIGNlcnRhaW4gdXNlciBhbmQgZGF0YSBzY2hlbWEgaW5kZXBlbmRlbnRseSBvZiB0aGUgSHlwZXJ0eSBVUkwuDQogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci1hLWNlcnRhaW4tdXNlci1hbmQtZGF0YS1zY2hlbWEtaW5kZXBlbmRlbnRseS1vZi10aGUtaHlwZXJ0eS11cmwNCiAgICAgICAgaWYgKGNyaXRlcmlhKSB7DQogICAgICAgICAgaWYgKGNyaXRlcmlhLnAycCkgc3Vic2NyaWJlTXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOw0KICAgICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgc3Vic2NyaWJlTXNnLmJvZHkuc3RvcmUgPSBjcml0ZXJpYS5zdG9yZTsNCiAgICAgICAgICBpZiAoY3JpdGVyaWEuc2NoZW1hKSBzdWJzY3JpYmVNc2cuYm9keS5zY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7DQogICAgICAgICAgaWYgKGNyaXRlcmlhLmlkZW50aXR5KSBzdWJzY3JpYmVNc2cuYm9keS5pZGVudGl0eSA9IGNyaXRlcmlhLmlkZW50aXR5Ow0KICAgICAgICAgIGlmIChjcml0ZXJpYS5yZXNvdXJjZSkgc3Vic2NyaWJlTXNnLmJvZHkucmVzb3VyY2UgPSBjcml0ZXJpYS5yZXNvdXJjZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHN1YnNjcmliZU1zZy5ib2R5LnJlc3VtZSA9IGNyaXRlcmlhLnJlc3VtZTsNCg0KICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlIG1lc3NhZ2U6ICcsIGNyaXRlcmlhLCBzdWJzY3JpYmVNc2cpOw0KDQogICAgICAgIC8vcmVxdWVzdCBzdWJzY3JpcHRpb24NCiAgICAgICAgLy9Qcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uDQogICAgICAgIC8vZm9yIG1vcmUgaW5mbyBzZWUgdGhlIERhdGFQcm92aXNpb25hbCBjbGFzcyBkb2N1bWVudGF0aW9uLg0KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIHN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOw0KDQogICAgICAgICAgdmFyIHNjaGVtYSA9IHJlcGx5LmJvZHkuc2NoZW1hOw0KICAgICAgICAgIHZhciBvYmpVUkwgPSByZXBseS5ib2R5LnJlc291cmNlOw0KDQogICAgICAgICAgdmFyIG5ld1Byb3Zpc2lvbmFsID0gX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOw0KICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF07DQogICAgICAgICAgaWYgKG5ld1Byb3Zpc2lvbmFsKSBuZXdQcm92aXNpb25hbC5fcmVsZWFzZUxpc3RlbmVycygpOw0KDQogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA8IDIwMCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIG5ldyBEYXRhUHJvdmlzaW9uYWw6ICcsIHJlcGx5LmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMsIG9ialVSTCk7DQogICAgICAgICAgICBuZXdQcm92aXNpb25hbCA9IG5ldyBfRGF0YVByb3Zpc2lvbmFsMi5kZWZhdWx0KF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsNCiAgICAgICAgICAgIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXSA9IG5ld1Byb3Zpc2lvbmFsOw0KICAgICAgICAgIH0gZWxzZSBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBuZXcgRGF0YSBPYmplY3QgT2JzZXJ2ZXI6ICcsIHJlcGx5LCBfdGhpcy5fcHJvdmlzaW9uYWxzKTsNCg0KICAgICAgICAgICAgdmFyIG5ld09iaiA9IG5ldyBfRGF0YU9iamVjdE9ic2VydmVyMi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIHNjaGVtYSwgJ29uJywgcmVwbHkuYm9keS52YWx1ZSwgbmV3UHJvdmlzaW9uYWwuY2hpbGRyZW4sIHJlcGx5LmJvZHkudmVyc2lvbik7DQogICAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF0gPSBuZXdPYmo7DQoNCiAgICAgICAgICAgIHJlc29sdmUobmV3T2JqKTsNCiAgICAgICAgICAgIG5ld1Byb3Zpc2lvbmFsLmFwcGx5KG5ld09iaik7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIGxvY2FsIHJ1bnRpbWUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlU3Vic2NyaWJlDQoNCiAgfSwgew0KICAgIGtleTogJ19vbkZvcndhcmQnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Gb3J3YXJkKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgdmFyIHJlcG9ydGVyID0gX3RoaXMuX3JlcG9ydGVyc1ttc2cuYm9keS50b107DQogICAgICByZXBvcnRlci5fb25Gb3J3YXJkKG1zZyk7DQogICAgfQ0KDQogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgU3luY2hlciAtPiBjcmVhdGUgKHRoaXMgaXMgYWN0dWFsbHkgYW4gaW52aXRhdGlvbiB0byBzdWJzY3JpYmUpDQoNCiAgfSwgew0KICAgIGtleTogJ19vblJlbW90ZUNyZWF0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZUNyZWF0ZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vcmVtb3ZlICIvc3Vic2NyaXB0aW9uIiBmcm9tIHRoZSBVUkwNCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5mcm9tLnNsaWNlKDAsIC0xMyk7DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLnR5cGUsDQogICAgICAgIGZyb206IG1zZy5ib2R5LnNvdXJjZSwNCiAgICAgICAgdXJsOiByZXNvdXJjZSwNCiAgICAgICAgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEsDQogICAgICAgIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwNCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LA0KDQogICAgICAgIGFjazogZnVuY3Rpb24gYWNrKHR5cGUpIHsNCiAgICAgICAgICB2YXIgbFR5cGUgPSAyMDA7DQogICAgICAgICAgaWYgKHR5cGUpIHsNCiAgICAgICAgICAgIGxUeXBlID0gdHlwZTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UNCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLA0KICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH07DQoNCiAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7DQogICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIE5PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gZGVsZXRlDQoNCiAgfSwgew0KICAgIGtleTogJ19vblJlbW90ZURlbGV0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlbW90ZURlbGV0ZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vcmVtb3ZlICIvc3Vic2NyaXB0aW9uIiBmcm9tIHRoZSBVUkwNCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5ib2R5LnJlc291cmNlOw0KDQogICAgICB2YXIgb2JqZWN0ID0gX3RoaXMuX29ic2VydmVyc1tyZXNvdXJjZV07DQogICAgICBpZiAob2JqZWN0KSB7DQogICAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgICB0eXBlOiBtc2cudHlwZSwNCiAgICAgICAgICB1cmw6IHJlc291cmNlLA0KICAgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwNCg0KICAgICAgICAgIGFjazogZnVuY3Rpb24gYWNrKHR5cGUpIHsNCiAgICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsNCiAgICAgICAgICAgIGlmICh0eXBlKSB7DQogICAgICAgICAgICAgIGxUeXBlID0gdHlwZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9UT0RPOiBhbnkgb3RoZXIgZGlmZmVyZW50IG9wdGlvbnMgZm9yIHRoZSByZWxlYXNlIHByb2Nlc3MsIGxpa2UgYWNjZXB0IGJ1dCBub3IgcmVsZWFzZSBsb2NhbD8NCiAgICAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgIG9iamVjdC5kZWxldGUoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9zZW5kIGFjayByZXNwb25zZSBtZXNzYWdlDQogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgICAgIGJvZHk6IHsgY29kZTogbFR5cGUsIHNvdXJjZTogX3RoaXMuX293bmVyIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdOT1RJRklDQVRJT04tRVZFTlQ6ICcsIGV2ZW50KTsNCiAgICAgICAgICBfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGV2ZW50KTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgYm9keTogeyBjb2RlOiA0MDQsIHNvdXJjZTogX3RoaXMuX293bmVyIH0NCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnb3duZXInLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX293bmVyOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQWxsIG93bmVkIHJlcG9ydGVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBjcmVhdGUNCiAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0UmVwb3J0ZXI+fQ0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3JlcG9ydGVycycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fcmVwb3J0ZXJzOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogQWxsIG93bmVkIG9ic2VydmVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBsb2NhbCBzdWJzY3JpcHRpb24NCiAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0T2JzZXJ2ZXI+fQ0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29ic2VydmVycycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzOw0KICAgIH0NCiAgfV0pOw0KICByZXR1cm4gU3luY2hlcjsNCn0oKTsgLyoqDQogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KICAgICAqDQogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICAgICAqDQogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAgICAgKg0KICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAgICAgKiovDQoNCmV4cG9ydHMuZGVmYXVsdCA9IFN5bmNoZXI7DQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsNCg0KLyoqKi8gfSksDQovKiAxMzEgKi8sDQovKiAxMzIgKi8sDQovKiAxMzMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsNCg0KdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8NCg0KLyoqDQogKiBAYWNjZXNzIHByaXZhdGUNCiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcgZGVsdGEgY2hhbmdlcyBpbiByZW1vdGUgb2JqZWN0cywgYmVmb3JlIHRoZSByZXNwb25zZSBvZiBzdWJzY3JpcHRpb24gcmVhY2ggdGhlIG9ic2VydmVyLg0KICogSXQncyB1c2VkIGluIFN5bmNoZXIgLT4gc3Vic2NyaWJlLiBUaGUgZmxvdyBpcyBkZWZpbmVkIGFzOg0KICogMS4gKG9ic2VydmVyKSAtLXN1YnNjcmliZS0tPiAocmVwb3J0ZXIpDQogKiAyLiAob2JzZXJ2ZXIpIDwtLWRlbHRhIHVwZGF0ZXMtLSAocmVwb3J0ZXIpDQogKiAzLiAob2JzZXJ2ZXIpIDwtLXN1YnNjcmliZSByZXNwb25zZS0tIChyZXBvcnRlcikNCiAqIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSBjb3VsZCBiZSBkZWx0YSB1cGRhdGVzIHRyYW5zZmVycmVkIGJlZm9yZSB0aGUgc3Vic2NyaXB0aW9uIGNvbmZpcm1hdGlvbi4NCiAqIFNpbmNlIHRoZXJlIGlzIG5vIERhdGFPYmplY3RPYnNlcnZlciBiZWZvcmUgdGhlIHVic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiwgdGhlcmUgc2hvdWxkIGJlIHNvbWUgb3RoZXIgb2JqZWN0IGNvbGxlY3RpbmcgdGhlIHVwZGF0ZXMuDQogKiBQcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uDQogKi8NCnZhciBEYXRhUHJvdmlzaW9uYWwgPSBmdW5jdGlvbiAoKSB7DQogIC8qIHByaXZhdGUNCiAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdDQogIF9saXN0ZW5lcjogTXNnTGlzdGVuZXINCiAgIF9jaGFuZ2VzOiBbXQ0KICAqLw0KDQogIGZ1bmN0aW9uIERhdGFQcm92aXNpb25hbChvd25lciwgdXJsLCBidXMsIGNoaWxkcmVuKSB7DQogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YVByb3Zpc2lvbmFsKTsNCg0KICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsNCiAgICBfdGhpcy5fdXJsID0gdXJsOw0KICAgIF90aGlzLl9idXMgPSBidXM7DQogICAgX3RoaXMuX2NoaWxkcmVuID0gY2hpbGRyZW47DQoNCiAgICBfdGhpcy5fY2hhbmdlcyA9IFtdOw0KICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOw0KICB9DQoNCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YVByb3Zpc2lvbmFsLCBbew0KICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9saXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICBjb25zb2xlLmxvZygnRGF0YVByb3Zpc2lvbmFsLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7DQogICAgICAgIF90aGlzLl9jaGFuZ2VzLnB1c2gobXNnKTsNCiAgICAgIH0pOw0KDQogICAgICAvKg0KICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzID0gW107DQogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVuKSB7DQogICAgICAgIGxldCBjaGlsZEJhc2VVUkwgPSB1cmwgKyAnL2NoaWxkcmVuLyc7DQogICAgICAgIF90aGlzLl9jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4gew0KICAgICAgICAgIGxldCBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOw0KICAgICAgICAgIGxldCBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIChtc2cpID0+IHsNCiAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYNCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9KTsNCiAgICAgIH0qLw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBfdGhpcy5fbGlzdGVuZXIucmVtb3ZlKCk7DQoNCiAgICAgIC8qX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7DQogICAgICAgIGxpc3RlbmVyLnJlbW92ZSgpOw0KICAgICAgfSk7Ki8NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdhcHBseScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KG9ic2VydmVyKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgX3RoaXMuX2NoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7DQogICAgICAgIG9ic2VydmVyLl9jaGFuZ2VPYmplY3Qob2JzZXJ2ZXIuX3N5bmNPYmosIGNoYW5nZSk7DQogICAgICB9KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdjaGlsZHJlbicsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhUHJvdmlzaW9uYWw7DQp9KCk7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFQcm92aXNpb25hbDsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDEzNCAqLywNCi8qIDEzNSAqLywNCi8qIDEzNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiAxMzcgKi8sDQovKiAxMzggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogMTM5ICovLA0KLyogMTQwICovLA0KLyogMTQxICovLA0KLyogMTQyICovLA0KLyogMTQzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTQ5KTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuYXNzaWduOw0KDQovKioqLyB9KSwNCi8qIDE0NCAqLywNCi8qIDE0NSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7DQp2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0Ow0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7DQogIHJldHVybiAkT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTQ2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKQ0KdmFyIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykNCiAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpDQogICwgcElFICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQ0KICAsIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikNCiAgLCBJT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpDQogICwgJGFzc2lnbiAgPSBPYmplY3QuYXNzaWduOw0KDQovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykNCm1vZHVsZS5leHBvcnRzID0gISRhc3NpZ24gfHwgX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsNCiAgdmFyIEEgPSB7fQ0KICAgICwgQiA9IHt9DQogICAgLCBTID0gU3ltYm9sKCkNCiAgICAsIEsgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnOw0KICBBW1NdID0gNzsNCiAgSy5zcGxpdCgnJykuZm9yRWFjaChmdW5jdGlvbihrKXsgQltrXSA9IGs7IH0pOw0KICByZXR1cm4gJGFzc2lnbih7fSwgQSlbU10gIT0gNyB8fCBPYmplY3Qua2V5cygkYXNzaWduKHt9LCBCKSkuam9pbignJykgIT0gSzsNCn0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycw0KICB2YXIgVCAgICAgPSB0b09iamVjdCh0YXJnZXQpDQogICAgLCBhTGVuICA9IGFyZ3VtZW50cy5sZW5ndGgNCiAgICAsIGluZGV4ID0gMQ0KICAgICwgZ2V0U3ltYm9scyA9IGdPUFMuZg0KICAgICwgaXNFbnVtICAgICA9IHBJRS5mOw0KICB3aGlsZShhTGVuID4gaW5kZXgpew0KICAgIHZhciBTICAgICAgPSBJT2JqZWN0KGFyZ3VtZW50c1tpbmRleCsrXSkNCiAgICAgICwga2V5cyAgID0gZ2V0U3ltYm9scyA/IGdldEtleXMoUykuY29uY2F0KGdldFN5bWJvbHMoUykpIDogZ2V0S2V5cyhTKQ0KICAgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aA0KICAgICAgLCBqICAgICAgPSAwDQogICAgICAsIGtleTsNCiAgICB3aGlsZShsZW5ndGggPiBqKWlmKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpVFtrZXldID0gU1trZXldOw0KICB9IHJldHVybiBUOw0KfSA6ICRhc3NpZ247DQoNCi8qKiovIH0pLA0KLyogMTQ3ICovLA0KLyogMTQ4ICovLA0KLyogMTQ5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpDQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7DQoNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GLCAnT2JqZWN0Jywge2Fzc2lnbjogX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpfSk7DQoNCi8qKiovIH0pLA0KLyogMTUwICovLA0KLyogMTUxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkNCnZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NykuZjsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicsIGZ1bmN0aW9uKCl7DQogIHJldHVybiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7DQogICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodG9JT2JqZWN0KGl0KSwga2V5KTsNCiAgfTsNCn0pOw0KDQovKioqLyB9KSwNCi8qIDE1MiAqLywNCi8qIDE1MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyAgICAgcHJveHktb2JzZXJ2ZSB2MC4wLjE4DQovLyAgICAgQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE2IFNpbW9uIFkuIEJsYWNrd2VsbCwgQW55V2hpY2hXYXkNCi8vICAgICBNSVQgTGljZW5zZSAtIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHANCihmdW5jdGlvbigpIHsNCgkidXNlIHN0cmljdCI7DQoJLy8gQ3JlYXRlcyBhbmQgcmV0dXJucyBhIFByb3h5IHdyYXBwaW5nIGEgdGFyZ2V0IHNvIHRoYXQgYWxsIGNoYW5nZXMgY2FuIGJlIHRyYXBwZWQgYW5kIGZvcndhcmRlZCB0bw0KCS8vIGEgY2FsbGJhY2suIFRoZSBjYWxsYmFjayB0YWtlcyBhbiBhcnJheSBvZiBjaGFuZ2VzIGp1c3QgbGlrZSB0aGUgdHJhZGl0aW9uYWwgb3JpZ2luYWwgQ2hyb21lIE9iamVjdC5vYnNlcnZlDQoJLy8ge29iamVjdDo8b2JqZWN0IGNoYW5nZWQ+LG5hbWU6PGZpZWxkIGNoYW5nZWQ+LHR5cGU6YWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLG9sZFZhbHVlOjxvbGQgdmFsdWUgaWYgdXBkYXRlIHwgZGVsZXRlPn0NCgkvLyBUaGUgYWNjZXB0bGlzdCBjYW4gYmUgYWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLg0KCS8vIHYgMC4wLjEwIHRvIHN1cHBvcnQgcGF1c2luZyBhbmQgcmVzdGFydGluZyBvYnNlcnZhdGlvbiB0d28gYWRkaXRpb25hbCBjb25zdHJ1Y3RvciBhcmd1bWVudHMgYXJlIGF2YWlsYWJsZSB0byBPYmplY3Qub2JzZXJ2ZToNCgkvLyBwYXVzYWJsZSAtIGNyZWF0ZSB0aGUgT2JzZXJ2ZXIgc28gaXQgY2FuIGJlIHBhdXNlZA0KCS8vIHBhdXNlIC0gY3JlYXRlIG9ic2VydmVyIGluIHBhdXNlZCBzdGF0ZQ0KCS8vIGlmIHBhdXNhYmxlIGlzIHRydWUgdGhlbiBhbiBhZGRpdGlvbmFsIG1ldGhvZCBkZWxpdmVyKGlnbm9yZVByZXZpb3VzKSBpcyBhdmFpbGFibGUgdG8gc3RhcnQgZGVsaXZlcnkNCgkvLyB0byBwYXVzZSBkZWxpdmVyeSBzZXQgYSBwcm9wZXJ0eSBjYWxsZWQgcGF1c2Ugb24gdGhlIGZ1bmN0aW9uIGRlbGl2ZXIgdG8gdHJ1ZQ0KCS8vIHBhdXNhYmxlIGlzIG9wdGlvbmFsIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mIHNoYWRvd2luZyBhIHByb3BlcnR5IG9yIG1ldGhvZCBvbiBhbnkgZXhpc3RpbmcgY29kZSBjYWxsZWQgZGVsaXZlcg0KCWlmKCFPYmplY3Qub2JzZXJ2ZSAmJiB0eXBlb2YoUHJveHkpPT09ImZ1bmN0aW9uIikgew0KCQlmdW5jdGlvbiBPYnNlcnZlcih0YXJnZXQsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgew0KCSAgICAJdmFyIG1lID0gdGhpcywgcHJveHk7DQoJICAgIAlmdW5jdGlvbiBkZWxpdmVyKGlnbm9yZVByZXZpb3VzLGRlbGF5KSB7DQoJICAgIAkJZGVsaXZlci5kZWxheSA9IGRlbGF5Ow0KCSAgICAJCWlmKCFkZWxpdmVyLnBhdXNlKSB7DQoJICAgICAgICAJCWlmKG1lLmNoYW5nZXNldC5sZW5ndGg+MCkgew0KCSAgICAgICAgCQkJaWYoIWlnbm9yZVByZXZpb3VzKSB7DQoJCSAgICAJICAgIAkJdmFyIGNoYW5nZXMgPSBtZS5jaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGNoYW5nZSkgeyByZXR1cm4gIWFjY2VwdGxpc3QgfHwgYWNjZXB0bGlzdC5pbmRleE9mKGNoYW5nZS50eXBlKT49MDsgfSk7DQoJCSAgICAgICAgCQkJaWYoY2hhbmdlcy5sZW5ndGg+MCkgew0KCQkgICAgICAgIAkJCQljYWxsYmFjayhjaGFuZ2VzKTsNCgkJICAgICAgICAJCQl9DQoJICAgICAgICAJCQl9DQoJICAgICAgICAJCQltZS5jaGFuZ2VzZXQgPSBbXTsNCgkgICAgICAgIAkJfQ0KCSAgICAJCX0NCgkgICAgCX0NCgkgICAgCWRlbGl2ZXIucGF1c2UgPSBwYXVzZTsNCgkgICAgCWRlbGl2ZXIuZGVsYXkgPSBkZWxheTsNCgkJICAgIG1lLmdldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsNCgkJICAgIAlpZihwcm9wZXJ0eT09PSJfX29ic2VydmVyX18iKSB7DQoJCSAgICAJCXJldHVybiBtZTsNCgkJICAgIAl9DQoJCSAgICAJaWYocHJvcGVydHk9PT0idW5vYnNlcnZlIikgew0KCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oKSB7DQoJCSAgICAJCQlPYmplY3QudW5vYnNlcnZlKHRhcmdldCk7DQoJCSAgICAJCQlyZXR1cm4gdGFyZ2V0Ow0KCQkgICAgCQl9Ow0KCQkgICAgCX0NCgkJICAgIAlpZihwcm9wZXJ0eT09PSJkZWxpdmVyIikgew0KCQkgICAgCQlyZXR1cm4gZGVsaXZlcjsNCgkJICAgIAl9DQoJCSAgICAJcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07DQoJCSAgICB9DQoJICAgIAltZS50YXJnZXQgPSB0YXJnZXQ7DQoJICAgIAltZS5jaGFuZ2VzZXQgPSBbXTsNCgkgICAgCWlmKCFtZS50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19fKSB7DQoJICAgIAkJLy8gX19vYnNlcnZlckNhbGxiYWNrc19fIGlzIHVzZWQgYXMgYW4gaW5kZXggdG8gZ2V0IGF0IHRoZSBwcm94eSB3aGljaCBpcyB0aGUgb2JzZXJ2ZXIsIHNvIHdlIGNhbiB1bm9ic2VydmUNCgkgICAgCQlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCJfX29ic2VydmVyQ2FsbGJhY2tzX18iLHtlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOmZhbHNlLHZhbHVlOltdfSk7DQoJICAgIAkJT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwiX19vYnNlcnZlcnNfXyIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTsNCgkgICAgCX0NCgkgICAgCW1lLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaChjYWxsYmFjayk7DQoJICAgIAltZS50YXJnZXQuX19vYnNlcnZlcnNfXy5wdXNoKHRoaXMpOw0KCSAgICAJcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LG1lKTsNCgkgICAgCWRlbGl2ZXIoZmFsc2UsZGVsYXkpOw0KCSAgICAJcmV0dXJuIHByb3h5Ow0KCSAgICB9DQoJCU9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyID0gZnVuY3Rpb24oKSB7DQoJCQlyZXR1cm4gdGhpcy5nZXQobnVsbCwiZGVsaXZlciIpOw0KCQl9DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgeyAvLyAsIHJlY2VpdmVyDQoJICAgIAl2YXIgb2xkdmFsdWUgPSB0YXJnZXRbcHJvcGVydHldOw0KCSAgICAJdmFyIHR5cGUgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKTsNCgkgICAgCXRhcmdldFtwcm9wZXJ0eV0gPSB2YWx1ZTsNCgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgKCF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YodHlwZSk+PTApKSB7DQoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZTp0eXBlfSwNCgkgICAgICAgIAkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQoJICAgICAgICAJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkgICAgICAgIAlpZih0eXBlPT09InVwZGF0ZSIpIHsNCgkgICAgICAgIAkJY2hhbmdlLm9sZFZhbHVlID0gb2xkdmFsdWU7DQoJICAgICAgICAJfQ0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgICAgIAlpZihzdGFydCkgew0KCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAgICAgCX0NCgkgICAgCX0NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5KSB7DQoJICAgIAl2YXIgb2xkdmFsdWUgPSB0YXJnZXRbcHJvcGVydHldOw0KCSAgICAJLy9pZih0eXBlb2Yob2xkdmFsdWUpIT09InVuZGVmaW5lZCIpIHsNCgkJICAgIAlkZWxldGUgdGFyZ2V0W3Byb3BlcnR5XTsNCgkJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoImRlbGV0ZSIpPj0wKSB7DQoJCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6ImRlbGV0ZSIsb2xkVmFsdWU6b2xkdmFsdWV9LA0KCQkgICAgICAgIAkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQoJCSAgICAgICAgCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkJICAgICAgICAJaWYoc3RhcnQpIHsNCgkJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJCSAgICAgICAgCX0NCgkJICAgIAl9DQoJICAgIAkvL30NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKSB7DQoJICAgIAlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7DQoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInJlY29uZmlndXJlIik+PTApIHsNCgkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZTpwcm9wZXJ0eSx0eXBlOiJyZWNvbmZpZ3VyZSJ9LA0KICAgICAgICAJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCiAgICAgICAgCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgICAgIAlpZihzdGFydCkgew0KCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAgICAgCX0NCgkgICAgCX0NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbih0YXJnZXQsIHByb3RvdHlwZSkgew0KCSAgICAJdmFyIG9sZHZhbHVlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCk7DQoJICAgIAlPYmplY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90b3R5cGUpOw0KCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJzZXRQcm90b3R5cGUiKT49MCkgew0KCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOiJfX3Byb3RvX18iLHR5cGU6InNldFByb3RvdHlwZSIsb2xkVmFsdWU6b2xkdmFsdWV9LA0KICAgIAkJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCiAgICAJCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgICAgIAlpZihzdGFydCkgew0KCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAgICAgCX0NCgkgICAgCX0NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUucHJldmVudEV4dGVuc2lvbnMgPSBmdW5jdGlvbih0YXJnZXQpIHsNCgkgICAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpOw0KCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJwcmV2ZW50RXh0ZW5zaW9ucyIpPj0wKSB7DQoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LHR5cGU6InByZXZlbnRFeHRlbnNpb25zIn0sDQoJCQkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KCQkJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9iamVjdC5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsNCgkgICAgCXJldHVybiBuZXcgT2JzZXJ2ZXIob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpOw0KCSAgICB9Ow0KCSAgICBPYmplY3QudW5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKSB7DQoJICAgIAlpZihvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fKSB7DQoJICAgIAkJaWYoIWNhbGxiYWNrKSB7DQoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpOw0KCSAgICAJCQlvYmplY3QuX19vYnNlcnZlcnNfXy5zcGxpY2UoMCxvYmplY3QuX19vYnNlcnZlcnNfXy5sZW5ndGgpOw0KCSAgICAJCQlyZXR1cm47DQoJICAgIAkJfQ0KCSAgICAJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihvYnNlcnZlcmNhbGxiYWNrLGkpIHsNCgkgICAgCQkJaWYoY2FsbGJhY2s9PT1vYnNlcnZlcmNhbGxiYWNrKSB7DQoJICAgIAkJCQlvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShpLDEpOw0KCSAgICAJCQkJZGVsZXRlIG9iamVjdC5fX29ic2VydmVyc19fW2ldLmNhbGxiYWNrOw0KCSAgICAJCQkJb2JqZWN0Ll9fb2JzZXJ2ZXJzX18uc3BsaWNlKGksMSk7DQoJICAgIAkJCX0NCgkgICAgCQl9KTsNCgkgICAgCX0NCgkgICAgfTsNCgkgICAgQXJyYXkub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KSB7DQoJICAgIAlpZighKG9iamVjdCBpbnN0YW5jZW9mIEFycmF5KSAmJiAhQXJyYXkuaXNBcnJheShvYmplY3QpKSB7DQoJICAgIAkJdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7DQoJICAgIAl9DQoJICAgIAl2YXIgYXJyYXlwcm94eSA9IG5ldyBQcm94eShvYmplY3Qse2dldDogZnVuY3Rpb24odGFyZ2V0LHByb3BlcnR5KSB7DQoJICAgIAkJaWYocHJvcGVydHk9PT0idW5vYnNlcnZlIikgew0KCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHsNCgkJICAgIAkJCWlmKGNhbGxiYWNrKSB7DQoJCSAgICAJCQkJcmV0dXJuIE9iamVjdC51bm9ic2VydmUodGFyZ2V0LGNhbGxiYWNrKTsNCgkJICAgIAkJCX0NCgkJICAgIAkJCXJldHVybiB0YXJnZXQudW5vYnNlcnZlKCk7DQoJCSAgICAJCX07DQoJCSAgICAJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InNwbGljZSIpIHsNCgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LGVuZCkgew0KCSAgICAJCQkJaWYodHlwZW9mKHN0YXJ0KSE9PSJudW1iZXIiIHx8IHR5cGVvZihlbmQpIT09Im51bWJlciIpIHsNCgkgICAgCQkJCQl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCB0d28gYXJndW1lbnRzIHRvIEFycmF5IHNwbGljZSBhcmUgbm90IG51bWJlciwgbnVtYmVyIik7DQoJICAgIAkJCQl9DQoJICAgIAkgICAgCQl2YXIgcmVtb3ZlZCA9IHRoaXMuc2xpY2Uoc3RhcnQsc3RhcnQrZW5kKSwNCgkgICAgCSAgICAJCQlhZGRlZENvdW50ID0gKGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzLmxlbmd0aC0yIDogMCksDQoJICAgIAkgICAgCQkJY2hhbmdlID0gIHtvYmplY3Q6b2JqZWN0LHR5cGU6InNwbGljZSIsaW5kZXg6c3RhcnQscmVtb3ZlZDpyZW1vdmVkLGFkZGVkQ291bnQ6YWRkZWRDb3VudH07DQoJICAgIAkgICAgCQl0YXJnZXQuc3BsaWNlLmFwcGx5KHRhcmdldCxhcmd1bWVudHMpOw0KCSAgICAJICAgIAkJaWYoYWNjZXB0bGlzdC5pbmRleE9mKCJzcGxpY2UiKT49MCkgew0KCSAgICAJICAgIAkJCXZhciBzdGFydCA9IHByb3h5Ll9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KCSAgICAJICAgICAgICAJCQlkZWxpdmVyID0gcHJveHkuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTsNCgkgICAgCSAgICAJCQlwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgCSAgICAJCQlpZihzdGFydCkgew0KCSAgICAJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAJCSAgICAgICAgCX0NCgkgICAgCSAgICAJCX0NCgkgICAgCSAgICAJfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJwdXNoIikgew0KCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsNCgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGl0ZW0pOw0KCSAgICAJCSAgICB9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InBvcCIpIHsNCgkgICAgCQkJIHJldHVybiBmdW5jdGlvbigpIHsNCgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpOw0KCSAgICAJCSAgICB9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InVuc2hpZnQiKSB7DQoJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oaXRlbSkgew0KICAgIAkJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxpdGVtKTsNCiAgICAJCSAgICAJfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJzaGlmdCIpIHsNCgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKCkgew0KCSAgICAJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMSk7DQoJICAgIAkgICAgCX0NCgkgICAgCQl9DQoJICAgIAkJcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07DQoJICAgIAl9fSk7DQoJICAgIAl2YXIgcHJveHkgPSBPYmplY3Qub2JzZXJ2ZShhcnJheXByb3h5LGZ1bmN0aW9uKGNoYW5nZXNldCkgeyANCgkgICAgCQl2YXIgY2hhbmdlcyA9IGNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiBjaGFuZ2UubmFtZSE9PSJsZW5ndGgiICYmIGNoYW5nZS5uYW1lIT09ImFkZCIgJiYgKCFhY2NlcHRsaXN0IHx8IGFjY2VwdGxpc3QuaW5kZXhPZihjaGFuZ2UudHlwZSk+PTApOyB9KTsNCgkgICAgCQlpZihjaGFuZ2VzLmxlbmd0aD4wKSB7DQoJICAgIAkJCWNhbGxiYWNrKGNoYW5nZXMpOw0KCSAgICAJCX0NCgkgICAgCX0sYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7DQoJICAgIAlyZXR1cm4gcHJveHk7DQoJICAgIH07DQoJICAgIEFycmF5LnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjaykgew0KCQkgIHJldHVybiBvYmplY3QudW5vYnNlcnZlKGNhbGxiYWNrKTsNCgkgICAgfQ0KCX0NCglPYmplY3QuZGVlcE9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2sscGFydHMpIHsNCgkJcGFydHMgPSAocGFydHMgPyBwYXJ0cyA6IFtdKTsNCgkJdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOw0KCQlrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7DQoJCQlpZihvYmplY3Rba2V5XSBpbnN0YW5jZW9mIE9iamVjdCkgew0KCQkJCXZhciBuZXdwYXJ0cyA9IHBhcnRzLnNsaWNlKDApOw0KCQkJCW5ld3BhcnRzLnB1c2goa2V5KTsNCgkJCQlvYmplY3Rba2V5XSA9IE9iamVjdC5kZWVwT2JzZXJ2ZShvYmplY3Rba2V5XSxjYWxsYmFjayxuZXdwYXJ0cyk7DQoJCQl9DQoJCX0pOw0KCQl2YXIgb2JzZXJ2ZWQgPSBPYmplY3Qub2JzZXJ2ZShvYmplY3QsZnVuY3Rpb24oY2hhbmdlc2V0KSB7DQoJCQl2YXIgY2hhbmdlcyA9IFtdOw0KCQkJZnVuY3Rpb24gcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0LG5ld09iamVjdCxwYXRoKSB7DQoJCQkJaWYobmV3T2JqZWN0IGluc3RhbmNlb2YgT2JqZWN0KSB7DQoJCQkJCXZhciBuZXdrZXlzID0gT2JqZWN0LmtleXMobmV3T2JqZWN0KTsNCgkJCQkJbmV3a2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgew0KCQkJCQkJaWYoIW9sZE9iamVjdCB8fCAob2xkT2JqZWN0W2tleV0hPT1uZXdPYmplY3Rba2V5XSkpIHsNCgkJCQkJCQl2YXIgb2xkdmFsdWUgPSAob2xkT2JqZWN0ICYmIG9sZE9iamVjdFtrZXldIT09dW5kZWZpbmVkID8gb2xkT2JqZWN0W2tleV0gOiB1bmRlZmluZWQpLA0KCQkJCQkJCQljaGFuZ2UgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKSwNCgkJCQkJCQkJa2V5cGF0aCA9IHBhdGggKyAiLiIgKyBrZXk7DQoJCQkJCQkJY2hhbmdlcy5wdXNoKHtuYW1lOm5hbWUsb2JqZWN0OnJvb3RPYmplY3QsdHlwZTpjaGFuZ2Usb2xkVmFsdWU6b2xkdmFsdWUsbmV3VmFsdWU6bmV3T2JqZWN0W2tleV0sa2V5cGF0aDprZXlwYXRofSk7DQoJCQkJCQkJcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkdmFsdWUsbmV3T2JqZWN0W2tleV0sa2V5cGF0aCk7DQoJCQkJCQl9DQoJCQkJCX0pOw0KCQkJCX0gZWxzZSBpZihvbGRPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHsNCgkJCQkJdmFyIG9sZGtleXMgPSBPYmplY3Qua2V5cyhvbGRPYmplY3QpOw0KCQkJCQlvbGRrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7DQoJCQkJCQl2YXIgY2hhbmdlID0gKG5ld09iamVjdD09PW51bGwgPyAidXBkYXRlIiA6ICJkZWxldGUiKSwNCgkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsNCgkJCQkJCWNoYW5nZXMucHVzaCh7bmFtZTpuYW1lLG9iamVjdDpyb290T2JqZWN0LHR5cGU6Y2hhbmdlLG9sZFZhbHVlOm9sZE9iamVjdFtrZXldLG5ld1ZhbHVlOm5ld09iamVjdCxrZXlwYXRoOmtleXBhdGh9KTsNCgkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZE9iamVjdFtrZXldLHVuZGVmaW5lZCxrZXlwYXRoKTsNCgkJCQkJfSk7DQoJCQkJfQ0KCQkJfQ0KCQkJY2hhbmdlc2V0LmZvckVhY2goZnVuY3Rpb24oY2hhbmdlKSB7DQoJCQkJdmFyIGtleXBhdGggPSAocGFydHMubGVuZ3RoPjAgPyBwYXJ0cy5qb2luKCIuIikgKyAiLiIgOiAiIikgKyBjaGFuZ2UubmFtZTsNCgkJCQljaGFuZ2VzLnB1c2goe25hbWU6Y2hhbmdlLm5hbWUsb2JqZWN0OmNoYW5nZS5vYmplY3QsdHlwZTpjaGFuZ2UudHlwZSxvbGRWYWx1ZTpjaGFuZ2Uub2xkVmFsdWUsbmV3VmFsdWU6Y2hhbmdlLm9iamVjdFtjaGFuZ2UubmFtZV0sa2V5cGF0aDprZXlwYXRofSk7DQoJCQkJcmVjdXJzZShjaGFuZ2UubmFtZSxjaGFuZ2Uub2JqZWN0LGNoYW5nZS5vbGRWYWx1ZSxjaGFuZ2Uub2JqZWN0W2NoYW5nZS5uYW1lXSxrZXlwYXRoKTsNCgkJCX0pOw0KCQkJY2FsbGJhY2soY2hhbmdlcyk7DQoJCX0pOw0KCQlyZXR1cm4gb2JzZXJ2ZWQ7DQoJfTsNCn0pKCk7DQoNCi8qKiovIH0pLA0KLyogMTU0ICovLA0KLyogMTU1ICovLA0KLyogMTU2ICovLA0KLyogMTU3ICovLA0KLyogMTU4ICovLA0KLyogMTU5ICovLA0KLyogMTYwICovLA0KLyogMTYxICovLA0KLyogMTYyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCmV4cG9ydHMuRGF0YU9iamVjdE9ic2VydmVyID0gZXhwb3J0cy5EYXRhT2JqZWN0UmVwb3J0ZXIgPSBleHBvcnRzLlN5bmNoZXIgPSB1bmRlZmluZWQ7DQoNCnZhciBfU3luY2hlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKTsNCg0KdmFyIF9TeW5jaGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N5bmNoZXIpOw0KDQp2YXIgX0RhdGFPYmplY3RSZXBvcnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsNCg0KdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdFJlcG9ydGVyKTsNCg0KdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7DQoNCnZhciBfRGF0YU9iamVjdE9ic2VydmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RPYnNlcnZlcik7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCmV4cG9ydHMuU3luY2hlciA9IF9TeW5jaGVyMi5kZWZhdWx0Ow0KZXhwb3J0cy5EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfRGF0YU9iamVjdFJlcG9ydGVyMi5kZWZhdWx0Ow0KZXhwb3J0cy5EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfRGF0YU9iamVjdE9ic2VydmVyMi5kZWZhdWx0Ow0KDQovKioqLyB9KQ0KLyoqKioqKi8gXSk7DQp9KTsNCn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwoKJ3VzZSBzdHJpY3QnOwoKLy8gU2hpbW1pbmcgc3RhcnRzIGhlcmUuCihmdW5jdGlvbigpIHsKICAvLyBVdGlscy4KICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7CiAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7CiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuYnJvd3NlckRldGFpbHM7CiAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci4KICBtb2R1bGUuZXhwb3J0cy5icm93c2VyRGV0YWlscyA9IGJyb3dzZXJEZXRhaWxzOwogIG1vZHVsZS5leHBvcnRzLmV4dHJhY3RWZXJzaW9uID0gdXRpbHMuZXh0cmFjdFZlcnNpb247CiAgbW9kdWxlLmV4cG9ydHMuZGlzYWJsZUxvZyA9IHV0aWxzLmRpc2FibGVMb2c7CgogIC8vIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyBpZiB5b3Ugd2FudCBsb2dnaW5nIHRvIG9jY3VyLCBpbmNsdWRpbmcgbG9nZ2luZwogIC8vIGZvciB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdy4gQ2FuIGFsc28gYmUgdHVybmVkIG9uIGluIHRoZSBicm93c2VyIHZpYQogIC8vIGFkYXB0ZXIuZGlzYWJsZUxvZyhmYWxzZSksIGJ1dCB0aGVuIGxvZ2dpbmcgZnJvbSB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdwogIC8vIHdpbGwgbm90IGFwcGVhci4KICAvLyByZXF1aXJlKCcuL3V0aWxzJykuZGlzYWJsZUxvZyhmYWxzZSk7CgogIC8vIEJyb3dzZXIgc2hpbXMuCiAgdmFyIGNocm9tZVNoaW0gPSByZXF1aXJlKCcuL2Nocm9tZS9jaHJvbWVfc2hpbScpIHx8IG51bGw7CiAgdmFyIGVkZ2VTaGltID0gcmVxdWlyZSgnLi9lZGdlL2VkZ2Vfc2hpbScpIHx8IG51bGw7CiAgdmFyIGZpcmVmb3hTaGltID0gcmVxdWlyZSgnLi9maXJlZm94L2ZpcmVmb3hfc2hpbScpIHx8IG51bGw7CiAgdmFyIHNhZmFyaVNoaW0gPSByZXF1aXJlKCcuL3NhZmFyaS9zYWZhcmlfc2hpbScpIHx8IG51bGw7CgogIC8vIFNoaW0gYnJvd3NlciBpZiBmb3VuZC4KICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHsKICAgIGNhc2UgJ2Nocm9tZSc6CiAgICAgIGlmICghY2hyb21lU2hpbSB8fCAhY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGNocm9tZVNoaW07CgogICAgICBjaHJvbWVTaGltLnNoaW1HZXRVc2VyTWVkaWEoKTsKICAgICAgY2hyb21lU2hpbS5zaGltTWVkaWFTdHJlYW0oKTsKICAgICAgdXRpbHMuc2hpbUNyZWF0ZU9iamVjdFVSTCgpOwogICAgICBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QoKTsKICAgICAgY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgY2hyb21lU2hpbS5zaGltT25UcmFjaygpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2ZpcmVmb3gnOgogICAgICBpZiAoIWZpcmVmb3hTaGltIHx8ICFmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gZmlyZWZveFNoaW07CgogICAgICBmaXJlZm94U2hpbS5zaGltR2V0VXNlck1lZGlhKCk7CiAgICAgIHV0aWxzLnNoaW1DcmVhdGVPYmplY3RVUkwoKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbVNvdXJjZU9iamVjdCgpOwogICAgICBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbU9uVHJhY2soKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdlZGdlJzoKICAgICAgaWYgKCFlZGdlU2hpbSB8fCAhZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgbG9nZ2luZygnTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBlZGdlLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGVkZ2VTaGltOwoKICAgICAgZWRnZVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICB1dGlscy5zaGltQ3JlYXRlT2JqZWN0VVJMKCk7CiAgICAgIGVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbigpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3NhZmFyaSc6CiAgICAgIGlmICghc2FmYXJpU2hpbSkgewogICAgICAgIGxvZ2dpbmcoJ1NhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gc2FmYXJpU2hpbTsKCiAgICAgIHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGxvZ2dpbmcoJ1Vuc3VwcG9ydGVkIGJyb3dzZXIhJyk7CiAgfQp9KSgpOwoKfSx7Ii4vY2hyb21lL2Nocm9tZV9zaGltIjo0LCIuL2VkZ2UvZWRnZV9zaGltIjo2LCIuL2ZpcmVmb3gvZmlyZWZveF9zaGltIjo4LCIuL3NhZmFyaS9zYWZhcmlfc2hpbSI6MTAsIi4vdXRpbHMiOjExfV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CgovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzLmpzJykuYnJvd3NlckRldGFpbHM7Cgp2YXIgY2hyb21lU2hpbSA9IHsKICBzaGltTWVkaWFTdHJlYW06IGZ1bmN0aW9uKCkgewogICAgd2luZG93Lk1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtIHx8IHdpbmRvdy53ZWJraXRNZWRpYVN0cmVhbTsKICB9LAoKICBzaGltT25UcmFjazogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmICEoJ29udHJhY2snIGluCiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbnRyYWNrJywgewogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjazsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24oZikgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spOwogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAvLyBvbmFkZHN0cmVhbSBkb2VzIG5vdCBmaXJlIHdoZW4gYSB0cmFjayBpcyBhZGRlZCB0byBhbiBleGlzdGluZwogICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC4KICAgICAgICAgICAgZS5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCBmdW5jdGlvbih0ZSkgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRlLnRyYWNrOwogICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0ZS50cmFja307CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7CiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHt0cmFjazogdHJhY2t9OwogICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dOwogICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmCiAgICAgICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAgICAgLy8gU2hpbSB0aGUgc3JjT2JqZWN0IHByb3BlcnR5LCBvbmNlLCB3aGVuIEhUTUxNZWRpYUVsZW1lbnQgaXMgZm91bmQuCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcmNPYmplY3Q7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAvLyBVc2UgX3NyY09iamVjdCBhcyBhIHByaXZhdGUgcHJvcGVydHkgZm9yIHRoaXMgc2hpbQogICAgICAgICAgICB0aGlzLl9zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgICAgIGlmICh0aGlzLnNyYykgewogICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXN0cmVhbSkgewogICAgICAgICAgICAgIHRoaXMuc3JjID0gJyc7CiAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTsKICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZWNyZWF0ZSB0aGUgYmxvYiB1cmwgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIG9yCiAgICAgICAgICAgIC8vIHJlbW92ZWQuIERvaW5nIGl0IG1hbnVhbGx5IHNpbmNlIHdlIHdhbnQgdG8gYXZvaWQgYSByZWN1cnNpb24uCiAgICAgICAgICAgIHN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGlmIChzZWxmLnNyYykgewogICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChzZWxmLnNyYyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuc3JjKSB7CiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNlbGYuc3JjKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2VsZi5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsKICAgIC8vIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuCiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgIC8vIFRyYW5zbGF0ZSBpY2VUcmFuc3BvcnRQb2xpY3kgdG8gaWNlVHJhbnNwb3J0cywKICAgICAgICAvLyBzZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD00ODY5CiAgICAgICAgLy8gdGhpcyB3YXMgZml4ZWQgaW4gTTU2IGFsb25nIHdpdGggdW5wcmVmaXhpbmcgUlRDUGVlckNvbm5lY3Rpb24uCiAgICAgICAgbG9nZ2luZygnUGVlckNvbm5lY3Rpb24nKTsKICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7CiAgICAgICAgICBwY0NvbmZpZy5pY2VUcmFuc3BvcnRzID0gcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5ldyB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7CiAgICAgIH07CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CiAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgICAgIGlmICh3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIHZhciBvcmlnR2V0U3RhdHMgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7CiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3RvciwKICAgICAgICBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0CiAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgLy8gV2hlbiBzcGVjLXN0eWxlIGdldFN0YXRzIGlzIHN1cHBvcnRlZCwgcmV0dXJuIHRob3NlIHdoZW4gY2FsbGVkIHdpdGgKICAgICAgLy8gZWl0aGVyIG5vIGFyZ3VtZW50cyBvciB0aGUgc2VsZWN0b3IgYXJndW1lbnQgaXMgbnVsbC4KICAgICAgaWYgKG9yaWdHZXRTdGF0cy5sZW5ndGggPT09IDAgJiYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwKICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpKSB7CiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXSk7CiAgICAgIH0KCiAgICAgIHZhciBmaXhDaHJvbWVTdGF0c18gPSBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgIHZhciBzdGFuZGFyZFJlcG9ydCA9IHt9OwogICAgICAgIHZhciByZXBvcnRzID0gcmVzcG9uc2UucmVzdWx0KCk7CiAgICAgICAgcmVwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHJlcG9ydCkgewogICAgICAgICAgdmFyIHN0YW5kYXJkU3RhdHMgPSB7CiAgICAgICAgICAgIGlkOiByZXBvcnQuaWQsCiAgICAgICAgICAgIHRpbWVzdGFtcDogcmVwb3J0LnRpbWVzdGFtcCwKICAgICAgICAgICAgdHlwZTogewogICAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJywKICAgICAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgICAgICAgICB9W3JlcG9ydC50eXBlXSB8fCByZXBvcnQudHlwZQogICAgICAgICAgfTsKICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICBzdGFuZGFyZFN0YXRzW25hbWVdID0gcmVwb3J0LnN0YXQobmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0czsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0OwogICAgICB9OwoKICAgICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgICB2YXIgbWFrZU1hcFN0YXRzID0gZnVuY3Rpb24oc3RhdHMpIHsKICAgICAgICByZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhzdGF0cykubWFwKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgcmV0dXJuW2tleSwgc3RhdHNba2V5XV07CiAgICAgICAgfSkpOwogICAgICB9OwoKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBhcmdzWzFdKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8sCiAgICAgICAgICAgIGFyZ3VtZW50c1swXV0pOwogICAgICB9CgogICAgICAvLyBwcm9taXNlLXN1cHBvcnQKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIG9yaWdHZXRTdGF0cy5hcHBseShzZWxmLCBbCiAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICByZXNvbHZlKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgICB9LCByZWplY3RdKTsKICAgICAgfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spOwogICAgfTsKCiAgICAvLyBhZGQgcHJvbWlzZSBzdXBwb3J0IC0tIG5hdGl2ZWx5IGF2YWlsYWJsZSBpbiBDaHJvbWUgNTEKICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTEpIHsKICAgICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddCiAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFthcmdzWzBdLCByZXNvbHZlLCByZWplY3RdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgW10pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vIHByb21pc2Ugc3VwcG9ydCBmb3IgY3JlYXRlT2ZmZXIgYW5kIGNyZWF0ZUFuc3dlci4gQXZhaWxhYmxlICh3aXRob3V0CiAgICAvLyBidWdzKSBzaW5jZSBNNTI6IGNyYnVnLzYxOTI4OQogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1MikgewogICAgICBbJ2NyZWF0ZU9mZmVyJywgJ2NyZWF0ZUFuc3dlciddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYKICAgICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0JykpIHsKICAgICAgICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkOwogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFtyZXNvbHZlLCByZWplY3QsIG9wdHNdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gc2hpbSBpbXBsaWNpdCBjcmVhdGlvbiBvZiBSVENTZXNzaW9uRGVzY3JpcHRpb24vUlRDSWNlQ2FuZGlkYXRlCiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ10KICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID8KICAgICAgICAgICAgICAgIFJUQ0ljZUNhbmRpZGF0ZSA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpCiAgICB2YXIgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID0KICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlOwogICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIWFyZ3VtZW50c1swXSkgewogICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHsKICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfQp9OwoKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbU1lZGlhU3RyZWFtOiBjaHJvbWVTaGltLnNoaW1NZWRpYVN0cmVhbSwKICBzaGltT25UcmFjazogY2hyb21lU2hpbS5zaGltT25UcmFjaywKICBzaGltU291cmNlT2JqZWN0OiBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QsCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiwKICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpCn07Cgp9LHsiLi4vdXRpbHMuanMiOjExLCIuL2dldHVzZXJtZWRpYSI6NX1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIGNvbnN0cmFpbnRzVG9DaHJvbWVfID0gZnVuY3Rpb24oYykgewogICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7CiAgICAgIHJldHVybiBjOwogICAgfQogICAgdmFyIGNjID0ge307CiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07CiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7CiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgIH0KICAgICAgdmFyIG9sZG5hbWVfID0gZnVuY3Rpb24ocHJlZml4LCBuYW1lKSB7CiAgICAgICAgaWYgKHByZWZpeCkgewogICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKG5hbWUgPT09ICdkZXZpY2VJZCcpID8gJ3NvdXJjZUlkJyA6IG5hbWU7CiAgICAgIH07CiAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjYy5vcHRpb25hbCA9IGNjLm9wdGlvbmFsIHx8IFtdOwogICAgICAgIHZhciBvYyA9IHt9OwogICAgICAgIGlmICh0eXBlb2Ygci5pZGVhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCdtaW4nLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICAgIG9jID0ge307CiAgICAgICAgICBvY1tvbGRuYW1lXygnbWF4Jywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHsKICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgY2MubWFuZGF0b3J5W29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuZXhhY3Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgWydtaW4nLCAnbWF4J10uZm9yRWFjaChmdW5jdGlvbihtaXgpIHsKICAgICAgICAgIGlmIChyW21peF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgICAgIGNjLm1hbmRhdG9yeVtvbGRuYW1lXyhtaXgsIGtleSldID0gclttaXhdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGlmIChjLmFkdmFuY2VkKSB7CiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7CiAgICB9CiAgICByZXR1cm4gY2M7CiAgfTsKCiAgdmFyIHNoaW1Db25zdHJhaW50c18gPSBmdW5jdGlvbihjb25zdHJhaW50cywgZnVuYykgewogICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICBpZiAoY29uc3RyYWludHMgJiYgY29uc3RyYWludHMuYXVkaW8pIHsKICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7CiAgICB9CiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLnZpZGVvID09PSAnb2JqZWN0JykgewogICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSwgd2hlcmUgaXQgZGVmYXVsdHMgdG8gInVzZXIiLgogICAgICB2YXIgZmFjZSA9IGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgIGZhY2UgPSBmYWNlICYmICgodHlwZW9mIGZhY2UgPT09ICdvYmplY3QnKSA/IGZhY2UgOiB7aWRlYWw6IGZhY2V9KTsKCiAgICAgIGlmICgoZmFjZSAmJiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwKICAgICAgICAgICAgICAgICAgICBmYWNlLmlkZWFsID09PSAndXNlcicgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykpICYmCiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiYKICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGUpKSB7CiAgICAgICAgZGVsZXRlIGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykgewogICAgICAgICAgLy8gTG9vayBmb3IgImJhY2siIGluIGxhYmVsLCBvciB1c2UgbGFzdCBjYW0gKHR5cGljYWxseSBiYWNrIGNhbSkuCiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgZGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgYmFjayA9IGRldmljZXMuZmluZChmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdiYWNrJykgIT09IC0xOwogICAgICAgICAgICB9KSB8fCAoZGV2aWNlcy5sZW5ndGggJiYgZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgICAgaWYgKGJhY2spIHsKICAgICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5kZXZpY2VJZCA9IGZhY2UuZXhhY3QgPyB7ZXhhY3Q6IGJhY2suZGV2aWNlSWR9IDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aWRlYWw6IGJhY2suZGV2aWNlSWR9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMudmlkZW8pOwogICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7CiAgICB9CiAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpOwogIH07CgogIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogewogICAgICAgIFBlcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InCiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50TmFtZSwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlOwogICAgICB9CiAgICB9OwogIH07CgogIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgc2hpbUNvbnN0cmFpbnRzXyhjb25zdHJhaW50cywgZnVuY3Rpb24oYykgewogICAgICBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGMsIG9uU3VjY2VzcywgZnVuY3Rpb24oZSkgewogICAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV87CgogIC8vIFJldHVybnMgdGhlIHJlc3VsdCBvZiBnZXRVc2VyTWVkaWEgYXMgYSBQcm9taXNlLgogIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgICB9KTsKICB9OwoKICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7CiAgICAgIGdldFVzZXJNZWRpYTogZ2V0VXNlck1lZGlhUHJvbWlzZV8sCiAgICAgIGVudW1lcmF0ZURldmljZXM6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICB2YXIga2luZHMgPSB7YXVkaW86ICdhdWRpb2lucHV0JywgdmlkZW86ICd2aWRlb2lucHV0J307CiAgICAgICAgICByZXR1cm4gTWVkaWFTdHJlYW1UcmFjay5nZXRTb3VyY2VzKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgcmVzb2x2ZShkZXZpY2VzLm1hcChmdW5jdGlvbihkZXZpY2UpIHsKICAgICAgICAgICAgICByZXR1cm4ge2xhYmVsOiBkZXZpY2UubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICBraW5kOiBraW5kc1tkZXZpY2Uua2luZF0sCiAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogZGV2aWNlLmlkLAogICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogJyd9OwogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9CgogIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC4KICAvLyBUT0RPKEthcHRlbkphbnNzb24pIHJlbW92ZSBvbmNlIGltcGxlbWVudGVkIGluIENocm9tZSBzdGFibGUuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykgewogICAgICByZXR1cm4gZ2V0VXNlck1lZGlhUHJvbWlzZV8oY29uc3RyYWludHMpOwogICAgfTsKICB9IGVsc2UgewogICAgLy8gRXZlbiB0aG91Z2ggQ2hyb21lIDQ1IGhhcyBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIGFuZCBhIGdldFVzZXJNZWRpYQogICAgLy8gZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UsIGl0IGRvZXMgbm90IGFjY2VwdCBzcGVjLXN0eWxlCiAgICAvLyBjb25zdHJhaW50cy4KICAgIHZhciBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuCiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY3MpIHsKICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGZ1bmN0aW9uKGMpIHsKICAgICAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fAogICAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJycsICdOb3RGb3VuZEVycm9yJyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICAgIH0sIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9OwogIH0KCiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuCiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLgogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQp9OwoKfSx7Ii4uL3V0aWxzLmpzIjoxMX1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7Cgp2YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTsKdmFyIGJyb3dzZXJEZXRhaWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5icm93c2VyRGV0YWlsczsKCnZhciBlZGdlU2hpbSA9IHsKICBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uKCkgewogICAgaWYgKHdpbmRvdy5SVENJY2VHYXRoZXJlcikgewogICAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuCiAgICAgIC8vIE5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlLgogICAgICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUpIHsKICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykgewogICAgICAgICAgcmV0dXJuIGFyZ3M7CiAgICAgICAgfTsKICAgICAgfQogICAgICAvLyBPUlRDIGRvZXMgbm90IGhhdmUgYSBzZXNzaW9uIGRlc2NyaXB0aW9uIG9iamVjdCBidXQKICAgICAgLy8gb3RoZXIgYnJvd3NlcnMgKGkuZS4gQ2hyb21lKSB0aGF0IHdpbGwgc3VwcG9ydCBib3RoIFBDIGFuZCBPUlRDCiAgICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS4KICAgICAgaWYgKCF3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7CiAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHsKICAgICAgICAgIHJldHVybiBhcmdzOwogICAgICAgIH07CiAgICAgIH0KICAgICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHMKICAgICAgLy8gd2hlbiBhIHRyYWNrcyBlbmFibGVkIHByb3BlcnR5IHdhcyBjaGFuZ2VkLgogICAgICB2YXIgb3JpZ01TVEVuYWJsZWQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKAogICAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJyk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSwgJ2VuYWJsZWQnLCB7CiAgICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgb3JpZ01TVEVuYWJsZWQuc2V0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgICAgdmFyIGV2ID0gbmV3IEV2ZW50KCdlbmFibGVkJyk7CiAgICAgICAgICBldi5lbmFibGVkID0gdmFsdWU7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24oY29uZmlnKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIHZhciBfZXZlbnRUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgIFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJywgJ2Rpc3BhdGNoRXZlbnQnXQogICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICAgIHNlbGZbbWV0aG9kXSA9IF9ldmVudFRhcmdldFttZXRob2RdLmJpbmQoX2V2ZW50VGFyZ2V0KTsKICAgICAgICAgIH0pOwoKICAgICAgdGhpcy5vbmljZWNhbmRpZGF0ZSA9IG51bGw7CiAgICAgIHRoaXMub25hZGRzdHJlYW0gPSBudWxsOwogICAgICB0aGlzLm9udHJhY2sgPSBudWxsOwogICAgICB0aGlzLm9ucmVtb3Zlc3RyZWFtID0gbnVsbDsKICAgICAgdGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIHRoaXMub25uZWdvdGlhdGlvbm5lZWRlZCA9IG51bGw7CiAgICAgIHRoaXMub25kYXRhY2hhbm5lbCA9IG51bGw7CgogICAgICB0aGlzLmxvY2FsU3RyZWFtcyA9IFtdOwogICAgICB0aGlzLnJlbW90ZVN0cmVhbXMgPSBbXTsKICAgICAgdGhpcy5nZXRMb2NhbFN0cmVhbXMgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gc2VsZi5sb2NhbFN0cmVhbXM7CiAgICAgIH07CiAgICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBzZWxmLnJlbW90ZVN0cmVhbXM7CiAgICAgIH07CgogICAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnJywKICAgICAgICBzZHA6ICcnCiAgICAgIH0pOwogICAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgc2RwOiAnJwogICAgICB9KTsKICAgICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9ICdzdGFibGUnOwogICAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9ICduZXcnOwogICAgICB0aGlzLmljZUdhdGhlcmluZ1N0YXRlID0gJ25ldyc7CgogICAgICB0aGlzLmljZU9wdGlvbnMgPSB7CiAgICAgICAgZ2F0aGVyUG9saWN5OiAnYWxsJywKICAgICAgICBpY2VTZXJ2ZXJzOiBbXQogICAgICB9OwogICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICBzd2l0Y2ggKGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICAgIGNhc2UgJ2FsbCc6CiAgICAgICAgICBjYXNlICdyZWxheSc6CiAgICAgICAgICAgIHRoaXMuaWNlT3B0aW9ucy5nYXRoZXJQb2xpY3kgPSBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ25vbmUnOgogICAgICAgICAgICAvLyBGSVhNRTogcmVtb3ZlIG9uY2UgaW1wbGVtZW50YXRpb24gYW5kIHNwZWMgaGF2ZSBhZGRlZCB0aGlzLgogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpY2VUcmFuc3BvcnRQb2xpY3kgIm5vbmUiIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIC8vIGRvbid0IHNldCBpY2VUcmFuc3BvcnRQb2xpY3kuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnVzaW5nQnVuZGxlID0gY29uZmlnICYmIGNvbmZpZy5idW5kbGVQb2xpY3kgPT09ICdtYXgtYnVuZGxlJzsKCiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAvLyBFZGdlIGRvZXMgbm90IGxpa2UKICAgICAgICAvLyAxKSBzdHVuOgogICAgICAgIC8vIDIpIHR1cm46IHRoYXQgZG9lcyBub3QgaGF2ZSBhbGwgb2YgdHVybjpob3N0OnBvcnQ/dHJhbnNwb3J0PXVkcAogICAgICAgIC8vIDMpIHR1cm46IHdpdGggaXB2NiBhZGRyZXNzZXMKICAgICAgICB2YXIgaWNlU2VydmVycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmljZVNlcnZlcnMpKTsKICAgICAgICB0aGlzLmljZU9wdGlvbnMuaWNlU2VydmVycyA9IGljZVNlcnZlcnMuZmlsdGVyKGZ1bmN0aW9uKHNlcnZlcikgewogICAgICAgICAgaWYgKHNlcnZlciAmJiBzZXJ2ZXIudXJscykgewogICAgICAgICAgICB2YXIgdXJscyA9IHNlcnZlci51cmxzOwogICAgICAgICAgICBpZiAodHlwZW9mIHVybHMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgdXJscyA9IFt1cmxzXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmxzID0gdXJscy5maWx0ZXIoZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgICAgcmV0dXJuICh1cmwuaW5kZXhPZigndHVybjonKSA9PT0gMCAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHJhbnNwb3J0PXVkcCcpICE9PSAtMSAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHVybjpbJykgPT09IC0xKSB8fAogICAgICAgICAgICAgICAgICAodXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDAgJiYKICAgICAgICAgICAgICAgICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDE0MzkzKTsKICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgIHJldHVybiAhIXVybHM7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnOwoKICAgICAgLy8gcGVyLXRyYWNrIGljZUdhdGhlcnMsIGljZVRyYW5zcG9ydHMsIGR0bHNUcmFuc3BvcnRzLCBydHBTZW5kZXJzLCAuLi4KICAgICAgLy8gZXZlcnl0aGluZyB0aGF0IGlzIG5lZWRlZCB0byBkZXNjcmliZSBhIFNEUCBtLWxpbmUuCiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gW107CgogICAgICAvLyBzaW5jZSB0aGUgaWNlR2F0aGVyZXIgaXMgY3VycmVudGx5IGNyZWF0ZWQgaW4gY3JlYXRlT2ZmZXIgYnV0IHdlCiAgICAgIC8vIG11c3Qgbm90IGVtaXQgY2FuZGlkYXRlcyB1bnRpbCBhZnRlciBzZXRMb2NhbERlc2NyaXB0aW9uIHdlIGJ1ZmZlcgogICAgICAvLyB0aGVtIGluIHRoaXMgYXJyYXkuCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlciA9IFtdOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwKTsKICAgICAgLy8gRklYTUU6IG5lZWQgdG8gYXBwbHkgaWNlIGNhbmRpZGF0ZXMgaW4gYSB3YXkgd2hpY2ggaXMgYXN5bmMgYnV0CiAgICAgIC8vIGluLW9yZGVyCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlci5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgdmFyIGVuZCA9ICFldmVudC5jYW5kaWRhdGUgfHwgT2JqZWN0LmtleXMoZXZlbnQuY2FuZGlkYXRlKS5sZW5ndGggPT09IDA7CiAgICAgICAgaWYgKGVuZCkgewogICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBzZWN0aW9ucy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAoc2VjdGlvbnNbal0uaW5kZXhPZignXHJcbmE9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJykgPT09IC0xKSB7CiAgICAgICAgICAgICAgc2VjdGlvbnNbal0gKz0gJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCArIDFdICs9CiAgICAgICAgICAgICAgJ2E9JyArIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgKyAnXHJcbic7CiAgICAgICAgfQogICAgICAgIHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICBzZWxmLm9uaWNlY2FuZGlkYXRlKGV2ZW50KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFldmVudC5jYW5kaWRhdGUgJiYgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSAhPT0gJ2NvbXBsZXRlJykgewogICAgICAgICAgdmFyIGNvbXBsZXRlID0gc2VsZi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChjb21wbGV0ZSkgewogICAgICAgICAgICBzZWxmLmljZUdhdGhlcmluZ1N0YXRlID0gJ2NvbXBsZXRlJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIgPSBbXTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWc7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHkKICAgICAgLy8gdG8gdHdvIGRpZmZlcmVudCBzZW5kZXJzIGRvZXMgbm90IHdvcmsgKGJ1aWxkIDEwNTQ3KS4KICAgICAgdmFyIGNsb25lZFN0cmVhbSA9IHN0cmVhbS5jbG9uZSgpOwogICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7CiAgICAgICAgdmFyIGNsb25lZFRyYWNrID0gY2xvbmVkU3RyZWFtLmdldFRyYWNrcygpW2lkeF07CiAgICAgICAgdHJhY2suYWRkRXZlbnRMaXN0ZW5lcignZW5hYmxlZCcsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICBjbG9uZWRUcmFjay5lbmFibGVkID0gZXZlbnQuZW5hYmxlZDsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goY2xvbmVkU3RyZWFtKTsKICAgICAgdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgdmFyIGlkeCA9IHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKTsKICAgICAgaWYgKGlkeCA+IC0xKSB7CiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXMuc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgdGhpcy5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQoKTsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIHJldHVybiAhIXRyYW5zY2VpdmVyLnJ0cFNlbmRlcjsKICAgICAgfSkKICAgICAgLm1hcChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5ydHBTZW5kZXI7CiAgICAgIH0pOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgIH0pCiAgICAgIC5tYXAoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgIH0pOwogICAgfTsKCiAgICAvLyBEZXRlcm1pbmVzIHRoZSBpbnRlcnNlY3Rpb24gb2YgbG9jYWwgYW5kIHJlbW90ZSBjYXBhYmlsaXRpZXMuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9nZXRDb21tb25DYXBhYmlsaXRpZXMgPQogICAgICAgIGZ1bmN0aW9uKGxvY2FsQ2FwYWJpbGl0aWVzLCByZW1vdGVDYXBhYmlsaXRpZXMpIHsKICAgICAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSB7CiAgICAgICAgICAgIGNvZGVjczogW10sCiAgICAgICAgICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLAogICAgICAgICAgICBmZWNNZWNoYW5pc21zOiBbXQogICAgICAgICAgfTsKICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGxDb2RlYykgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgckNvZGVjID0gcmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjc1tpXTsKICAgICAgICAgICAgICBpZiAobENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gckNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSAmJgogICAgICAgICAgICAgICAgICBsQ29kZWMuY2xvY2tSYXRlID09PSByQ29kZWMuY2xvY2tSYXRlKSB7CiAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgY2hhbm5lbHMgaXMgdGhlIGhpZ2hlc3QgY29tbW9uIG51bWJlciBvZiBjaGFubmVscwogICAgICAgICAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzID0gTWF0aC5taW4obENvZGVjLm51bUNoYW5uZWxzLAogICAgICAgICAgICAgICAgICAgIHJDb2RlYy5udW1DaGFubmVscyk7CiAgICAgICAgICAgICAgICAvLyBwdXNoIHJDb2RlYyBzbyB3ZSByZXBseSB3aXRoIG9mZmVyZXIgcGF5bG9hZCB0eXBlCiAgICAgICAgICAgICAgICBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLnB1c2gockNvZGVjKTsKCiAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgY29tbW9uIGZlZWRiYWNrIG1lY2hhbmlzbXMKICAgICAgICAgICAgICAgIHJDb2RlYy5ydGNwRmVlZGJhY2sgPSByQ29kZWMucnRjcEZlZWRiYWNrLmZpbHRlcihmdW5jdGlvbihmYikgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxDb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAobENvZGVjLnJ0Y3BGZWVkYmFja1tqXS50eXBlID09PSBmYi50eXBlICYmCiAgICAgICAgICAgICAgICAgICAgICAgIGxDb2RlYy5ydGNwRmVlZGJhY2tbal0ucGFyYW1ldGVyID09PSBmYi5wYXJhbWV0ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBhbHNvIG5lZWQgdG8gZGV0ZXJtaW5lIC5wYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICAvLyAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVucGVlci9vcnRjL2lzc3Vlcy81NjkKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucwogICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uKGxIZWFkZXJFeHRlbnNpb24pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICBpKyspIHsKICAgICAgICAgICAgICAgICAgdmFyIHJIZWFkZXJFeHRlbnNpb24gPSByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9uc1tpXTsKICAgICAgICAgICAgICAgICAgaWYgKGxIZWFkZXJFeHRlbnNpb24udXJpID09PSBySGVhZGVyRXh0ZW5zaW9uLnVyaSkgewogICAgICAgICAgICAgICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLnB1c2gockhlYWRlckV4dGVuc2lvbik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyBGSVhNRTogZmVjTWVjaGFuaXNtcwogICAgICAgICAgcmV0dXJuIGNvbW1vbkNhcGFiaWxpdGllczsKICAgICAgICB9OwoKICAgIC8vIENyZWF0ZSBJQ0UgZ2F0aGVyZXIsIElDRSB0cmFuc3BvcnQgYW5kIERUTFMgdHJhbnNwb3J0LgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMgPQogICAgICAgIGZ1bmN0aW9uKG1pZCwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgdmFyIGljZUdhdGhlcmVyID0gbmV3IFJUQ0ljZUdhdGhlcmVyKHNlbGYuaWNlT3B0aW9ucyk7CiAgICAgICAgICB2YXIgaWNlVHJhbnNwb3J0ID0gbmV3IFJUQ0ljZVRyYW5zcG9ydChpY2VHYXRoZXJlcik7CiAgICAgICAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlID0gZnVuY3Rpb24oZXZ0KSB7CiAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJyk7CiAgICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZSA9IHtzZHBNaWQ6IG1pZCwgc2RwTUxpbmVJbmRleDogc2RwTUxpbmVJbmRleH07CgogICAgICAgICAgICB2YXIgY2FuZCA9IGV2dC5jYW5kaWRhdGU7CiAgICAgICAgICAgIHZhciBlbmQgPSAhY2FuZCB8fCBPYmplY3Qua2V5cyhjYW5kKS5sZW5ndGggPT09IDA7CiAgICAgICAgICAgIC8vIEVkZ2UgZW1pdHMgYW4gZW1wdHkgb2JqZWN0IGZvciBSVENJY2VDYW5kaWRhdGVDb21wbGV0ZeKApQogICAgICAgICAgICBpZiAoZW5kKSB7CiAgICAgICAgICAgICAgLy8gcG9seWZpbGwgc2luY2UgUlRDSWNlR2F0aGVyZXIuc3RhdGUgaXMgbm90IGltcGxlbWVudGVkIGluCiAgICAgICAgICAgICAgLy8gRWRnZSAxMDU0NyB5ZXQuCiAgICAgICAgICAgICAgaWYgKGljZUdhdGhlcmVyLnN0YXRlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIFJUQ0ljZUNhbmRpZGF0ZSBkb2Vzbid0IGhhdmUgYSBjb21wb25lbnQsIG5lZWRzIHRvIGJlIGFkZGVkCiAgICAgICAgICAgICAgY2FuZC5jb21wb25lbnQgPSBpY2VUcmFuc3BvcnQuY29tcG9uZW50ID09PSAnUlRDUCcgPyAyIDogMTsKICAgICAgICAgICAgICBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIHVwZGF0ZSBsb2NhbCBkZXNjcmlwdGlvbi4KICAgICAgICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwKTsKICAgICAgICAgICAgaWYgKCFlbmQpIHsKICAgICAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCArIDFdICs9CiAgICAgICAgICAgICAgICAgICdhPScgKyBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlICsgJ1xyXG4nOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNlY3Rpb25zW2V2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4ICsgMV0gKz0KICAgICAgICAgICAgICAgICAgJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwID0gc2VjdGlvbnMuam9pbignJyk7CiAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlcnMgPSBzZWxmLl9wZW5kaW5nT2ZmZXIgPyBzZWxmLl9wZW5kaW5nT2ZmZXIgOgogICAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnM7CiAgICAgICAgICAgIHZhciBjb21wbGV0ZSA9IHRyYW5zY2VpdmVycy5ldmVyeShmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5pY2VHYXRoZXJlciAmJgogICAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gRW1pdCBjYW5kaWRhdGUgaWYgbG9jYWxEZXNjcmlwdGlvbiBpcyBzZXQuCiAgICAgICAgICAgIC8vIEFsc28gZW1pdHMgbnVsbCBjYW5kaWRhdGUgd2hlbiBhbGwgZ2F0aGVyZXJzIGFyZSBjb21wbGV0ZS4KICAgICAgICAgICAgc3dpdGNoIChzZWxmLmljZUdhdGhlcmluZ1N0YXRlKSB7CiAgICAgICAgICAgICAgY2FzZSAnbmV3JzoKICAgICAgICAgICAgICAgIGlmICghZW5kKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlci5wdXNoKGV2ZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChlbmQgJiYgY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLnB1c2goCiAgICAgICAgICAgICAgICAgICAgICBuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ2dhdGhlcmluZyc6CiAgICAgICAgICAgICAgICBzZWxmLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzKCk7CiAgICAgICAgICAgICAgICBpZiAoIWVuZCkgewogICAgICAgICAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5vbmljZWNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub25pY2VjYW5kaWRhdGUoZXZlbnQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29tcGxldGUpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJykpOwogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5vbmljZWNhbmRpZGF0ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub25pY2VjYW5kaWRhdGUobmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdjb21wbGV0ZSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZSc6CiAgICAgICAgICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbi4uLiBjdXJyZW50bHkhCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBkZWZhdWx0OiAvLyBuby1vcC4KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gbmV3IFJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQub25kdGxzc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwogICAgICAgICAgZHRsc1RyYW5zcG9ydC5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIC8vIG9uZXJyb3IgZG9lcyBub3Qgc2V0IHN0YXRlIHRvIGZhaWxlZCBieSBpdHNlbGYuCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhdGUgPSAnZmFpbGVkJzsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyOiBpY2VHYXRoZXJlciwKICAgICAgICAgICAgaWNlVHJhbnNwb3J0OiBpY2VUcmFuc3BvcnQsCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IGR0bHNUcmFuc3BvcnQKICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAvLyBTdGFydCB0aGUgUlRQIFNlbmRlciBhbmQgUmVjZWl2ZXIgZm9yIGEgdHJhbnNjZWl2ZXIuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl90cmFuc2NlaXZlID0gZnVuY3Rpb24odHJhbnNjZWl2ZXIsCiAgICAgICAgc2VuZCwgcmVjdikgewogICAgICB2YXIgcGFyYW1zID0gdGhpcy5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTsKICAgICAgaWYgKHNlbmQgJiYgdHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgcGFyYW1zLnJ0Y3AgPSB7CiAgICAgICAgICBjbmFtZTogU0RQVXRpbHMubG9jYWxDTmFtZQogICAgICAgIH07CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7CiAgICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjOwogICAgICAgIH0KICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc2VuZChwYXJhbXMpOwogICAgICB9CiAgICAgIGlmIChyZWN2ICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgLy8gcmVtb3ZlIFJUWCBmaWVsZCBpbiBFZGdlIDE0OTQyCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycKICAgICAgICAgICAgJiYgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycwogICAgICAgICAgICAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgMTUwMTkpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaChmdW5jdGlvbihwKSB7CiAgICAgICAgICAgIGRlbGV0ZSBwLnJ0eDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBwYXJhbXMuZW5jb2RpbmdzID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICBwYXJhbXMucnRjcCA9IHsKICAgICAgICAgIGNuYW1lOiB0cmFuc2NlaXZlci5jbmFtZQogICAgICAgIH07CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7CiAgICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjOwogICAgICAgIH0KICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5yZWNlaXZlKHBhcmFtcyk7CiAgICAgIH0KICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uID0KICAgICAgICBmdW5jdGlvbihkZXNjcmlwdGlvbikgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgdmFyIHNlY3Rpb25zOwogICAgICAgICAgdmFyIHNlc3Npb25wYXJ0OwogICAgICAgICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicpIHsKICAgICAgICAgICAgLy8gRklYTUU6IFdoYXQgd2FzIHRoZSBwdXJwb3NlIG9mIHRoaXMgZW1wdHkgaWYgc3RhdGVtZW50PwogICAgICAgICAgICAvLyBpZiAoIXRoaXMuX3BlbmRpbmdPZmZlcikgewogICAgICAgICAgICAvLyB9IGVsc2UgewogICAgICAgICAgICBpZiAodGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgICAgICAgLy8gVkVSWSBsaW1pdGVkIHN1cHBvcnQgZm9yIFNEUCBtdW5naW5nLiBMaW1pdGVkIHRvOgogICAgICAgICAgICAgIC8vICogY2hhbmdpbmcgdGhlIG9yZGVyIG9mIGNvZGVjcwogICAgICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhkZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTsKICAgICAgICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGNhcHMgPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgICAgIHNlbGYuX3BlbmRpbmdPZmZlcltzZHBNTGluZUluZGV4XS5sb2NhbENhcGFiaWxpdGllcyA9IGNhcHM7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnMgPSB0aGlzLl9wZW5kaW5nT2ZmZXI7CiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3BlbmRpbmdPZmZlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJykgewogICAgICAgICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoc2VsZi5yZW1vdGVEZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgICBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCwKICAgICAgICAgICAgICAgICdhPWljZS1saXRlJykubGVuZ3RoID4gMDsKICAgICAgICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICAgICAgICB2YXIgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjsKICAgICAgICAgICAgICB2YXIgaWNlVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0OwogICAgICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDsKICAgICAgICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllczsKICAgICAgICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgICAgICB2YXIgcmVqZWN0ZWQgPSBtZWRpYVNlY3Rpb24uc3BsaXQoJ1xuJywgMSlbMF0KICAgICAgICAgICAgICAgICAgLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJzsKCiAgICAgICAgICAgICAgaWYgKCFyZWplY3RlZCAmJiAhdHJhbnNjZWl2ZXIuaXNEYXRhY2hhbm5lbCkgewogICAgICAgICAgICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKAogICAgICAgICAgICAgICAgICAgIG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0RHRsc1BhcmFtZXRlcnMoCiAgICAgICAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgICBpZiAoaXNJY2VMaXRlKSB7CiAgICAgICAgICAgICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnc2VydmVyJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIXNlbGYudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsCiAgICAgICAgICAgICAgICAgICAgICBpc0ljZUxpdGUgPyAnY29udHJvbGxpbmcnIDogJ2NvbnRyb2xsZWQnKTsKICAgICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuCiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VsZi5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgICAgIHJlbW90ZUNhcGFiaWxpdGllcyk7CgogICAgICAgICAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFNlbmRlci4gVGhlIFJUQ1J0cFJlY2VpdmVyIGZvciB0aGlzCiAgICAgICAgICAgICAgICAvLyB0cmFuc2NlaXZlciBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgaW4gc2V0UmVtb3RlRGVzY3JpcHRpb24uCiAgICAgICAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHRyYW5zY2VpdmVyLAogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5jb2RlY3MubGVuZ3RoID4gMCwKICAgICAgICAgICAgICAgICAgICBmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSB7CiAgICAgICAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsCiAgICAgICAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwCiAgICAgICAgICB9OwogICAgICAgICAgc3dpdGNoIChkZXNjcmlwdGlvbi50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ29mZmVyJzoKICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1sb2NhbC1vZmZlcicpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdhbnN3ZXInOgogICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdzdGFibGUnKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bnN1cHBvcnRlZCB0eXBlICInICsgZGVzY3JpcHRpb24udHlwZSArCiAgICAgICAgICAgICAgICAgICciJyk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gSWYgYSBzdWNjZXNzIGNhbGxiYWNrIHdhcyBwcm92aWRlZCwgZW1pdCBJQ0UgY2FuZGlkYXRlcyBhZnRlciBpdAogICAgICAgICAgLy8gaGFzIGJlZW4gZXhlY3V0ZWQuIE90aGVyd2lzZSwgZW1pdCBjYWxsYmFjayBhZnRlciB0aGUgUHJvbWlzZSBpcwogICAgICAgICAgLy8gcmVzb2x2ZWQuCiAgICAgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJgogICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nOwogICAgICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7CiAgICAgICAgICAgIHZhciBjYiA9IGFyZ3VtZW50c1sxXTsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgY2IoKTsKICAgICAgICAgICAgICBpZiAoc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ25ldycpIHsKICAgICAgICAgICAgICAgIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgPSAnZ2F0aGVyaW5nJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2VsZi5fZW1pdEJ1ZmZlcmVkQ2FuZGlkYXRlcygpOwogICAgICAgICAgICB9LCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICBwLnRoZW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICghaGFzQ2FsbGJhY2spIHsKICAgICAgICAgICAgICBpZiAoc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ25ldycpIHsKICAgICAgICAgICAgICAgIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgPSAnZ2F0aGVyaW5nJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gVXN1YWxseSBjYW5kaWRhdGVzIHdpbGwgYmUgZW1pdHRlZCBlYXJsaWVyLgogICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHNlbGYuX2VtaXRCdWZmZXJlZENhbmRpZGF0ZXMuYmluZChzZWxmKSwgNTAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gcDsKICAgICAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPQogICAgICAgIGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICB2YXIgc3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKCk7CiAgICAgICAgICB2YXIgcmVjZWl2ZXJMaXN0ID0gW107CiAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgICAgdmFyIGlzSWNlTGl0ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LAogICAgICAgICAgICAgICdhPWljZS1saXRlJykubGVuZ3RoID4gMDsKICAgICAgICAgIHRoaXMudXNpbmdCdW5kbGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCwKICAgICAgICAgICAgICAnYT1ncm91cDpCVU5ETEUgJykubGVuZ3RoID4gMDsKICAgICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAgICAgICAgICAgdmFyIG1saW5lID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIHZhciBraW5kID0gbWxpbmVbMF07CiAgICAgICAgICAgIHZhciByZWplY3RlZCA9IG1saW5lWzFdID09PSAnMCc7CiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBTRFBVdGlscy5nZXREaXJlY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CgogICAgICAgICAgICB2YXIgbWlkID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1taWQ6Jyk7CiAgICAgICAgICAgIGlmIChtaWQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgbWlkID0gbWlkWzBdLnN1YnN0cig2KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtaWQgPSBTRFBVdGlscy5nZW5lcmF0ZUlkZW50aWZpZXIoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gUmVqZWN0IGRhdGFjaGFubmVscyB3aGljaCBhcmUgbm90IGltcGxlbWVudGVkIHlldC4KICAgICAgICAgICAgaWYgKGtpbmQgPT09ICdhcHBsaWNhdGlvbicgJiYgbWxpbmVbMl0gPT09ICdEVExTL1NDVFAnKSB7CiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICAgICAgICBtaWQ6IG1pZCwKICAgICAgICAgICAgICAgIGlzRGF0YWNoYW5uZWw6IHRydWUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHRyYW5zY2VpdmVyOwogICAgICAgICAgICB2YXIgaWNlR2F0aGVyZXI7CiAgICAgICAgICAgIHZhciBpY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0OwogICAgICAgICAgICB2YXIgcnRwU2VuZGVyOwogICAgICAgICAgICB2YXIgcnRwUmVjZWl2ZXI7CiAgICAgICAgICAgIHZhciBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOwogICAgICAgICAgICB2YXIgcmVjdkVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgICAgdmFyIHRyYWNrOwogICAgICAgICAgICAvLyBGSVhNRTogZW5zdXJlIHRoZSBtZWRpYVNlY3Rpb24gaGFzIHJ0Y3AtbXV4IHNldC4KICAgICAgICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICB2YXIgcmVtb3RlSWNlUGFyYW1ldGVyczsKICAgICAgICAgICAgdmFyIHJlbW90ZUR0bHNQYXJhbWV0ZXJzOwogICAgICAgICAgICBpZiAoIXJlamVjdGVkKSB7CiAgICAgICAgICAgICAgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMobWVkaWFTZWN0aW9uLAogICAgICAgICAgICAgICAgICBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sCiAgICAgICAgICAgICAgICAgIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycy5yb2xlID0gJ2NsaWVudCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVycyA9CiAgICAgICAgICAgICAgICBTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwoKICAgICAgICAgICAgdmFyIGNuYW1lOwogICAgICAgICAgICAvLyBHZXRzIHRoZSBmaXJzdCBTU1JDLiBOb3RlIHRoYXQgd2l0aCBSVFggdGhlcmUgbWlnaHQgYmUgbXVsdGlwbGUKICAgICAgICAgICAgLy8gU1NSQ3MuCiAgICAgICAgICAgIHZhciByZW1vdGVTc3JjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24ob2JqKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBvYmouYXR0cmlidXRlID09PSAnY25hbWUnOwogICAgICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgIGlmIChyZW1vdGVTc3JjKSB7CiAgICAgICAgICAgICAgY25hbWUgPSByZW1vdGVTc3JjLnZhbHVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgaXNDb21wbGV0ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICAgICdhPWVuZC1vZi1jYW5kaWRhdGVzJywgc2Vzc2lvbnBhcnQpLmxlbmd0aCA+IDA7CiAgICAgICAgICAgIHZhciBjYW5kcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9Y2FuZGlkYXRlOicpCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKGNhbmQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGNhbmQpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oY2FuZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY2FuZC5jb21wb25lbnQgPT09ICcxJzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IFJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyhraW5kKTsKCiAgICAgICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZAogICAgICAgICAgICAvLyBpbiBhZGFwdGVyLmpzCiAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoCiAgICAgICAgICAgICAgICBmdW5jdGlvbihjb2RlYykgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGNvbW1vbkNvZGVjcyA9IHNlbGYuX2dldENvbW1vbkNhcGFiaWxpdGllcygKICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKS5jb2RlY3M7CiAgICAgICAgICAgIGNvbW1vbkNvZGVjcyA9IGNvbW1vbkNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHsKICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChjb21tb25Db2RlY3MubGVuZ3RoID09PSAwIHx8CiAgICAgICAgICAgICAgICAoY29tbW9uQ29kZWNzLmluZGV4T2YoJ0gyNjQnKSA9PT0gLTEgJiYKICAgICAgICAgICAgICAgIGNvbW1vbkNvZGVjcy5pbmRleE9mKCdWUDgnKSA9PT0gLTEpKSB7CiAgICAgICAgICAgICAgcmVqZWN0ZWQgPSB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyAmJiAhcmVqZWN0ZWQpIHsKICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0cyA9IHNlbGYudXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDAgPyB7CiAgICAgICAgICAgICAgICBpY2VHYXRoZXJlcjogc2VsZi50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIsCiAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHNlbGYudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCwKICAgICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IHNlbGYudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQKICAgICAgICAgICAgICB9IDogc2VsZi5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMobWlkLCBzZHBNTGluZUluZGV4KTsKCiAgICAgICAgICAgICAgaWYgKGlzQ29tcGxldGUgJiYgKCFzZWxmLnVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7CiAgICAgICAgICAgICAgICB0cmFuc3BvcnRzLmljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKGNhbmRzKTsKICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gW3sKICAgICAgICAgICAgICAgIHNzcmM6ICgyICogc2RwTUxpbmVJbmRleCArIDIpICogMTAwMQogICAgICAgICAgICAgIH1dOwoKICAgICAgICAgICAgICBydHBSZWNlaXZlciA9IG5ldyBSVENSdHBSZWNlaXZlcih0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsIGtpbmQpOwoKICAgICAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrOwogICAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXJdKTsKICAgICAgICAgICAgICAvLyBGSVhNRTogbm90IGNvcnJlY3Qgd2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgc3RyZWFtcyBidXQgdGhhdCBpcwogICAgICAgICAgICAgIC8vIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluIHRoaXMgc2hpbS4KICAgICAgICAgICAgICBzdHJlYW0uYWRkVHJhY2sodHJhY2spOwoKICAgICAgICAgICAgICAvLyBGSVhNRTogbG9vayBhdCBkaXJlY3Rpb24uCiAgICAgICAgICAgICAgaWYgKHNlbGYubG9jYWxTdHJlYW1zLmxlbmd0aCA+IDAgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0VHJhY2tzKCkubGVuZ3RoID49IHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciBsb2NhbFRyYWNrOwogICAgICAgICAgICAgICAgaWYgKGtpbmQgPT09ICdhdWRpbycpIHsKICAgICAgICAgICAgICAgICAgbG9jYWxUcmFjayA9IHNlbGYubG9jYWxTdHJlYW1zWzBdLmdldEF1ZGlvVHJhY2tzKClbMF07CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtpbmQgPT09ICd2aWRlbycpIHsKICAgICAgICAgICAgICAgICAgbG9jYWxUcmFjayA9IHNlbGYubG9jYWxTdHJlYW1zWzBdLmdldFZpZGVvVHJhY2tzKClbMF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobG9jYWxUcmFjaykgewogICAgICAgICAgICAgICAgICBydHBTZW5kZXIgPSBuZXcgUlRDUnRwU2VuZGVyKGxvY2FsVHJhY2ssCiAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNwb3J0cy5pY2VHYXRoZXJlciwKICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydDogdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQsCiAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllczogbG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IHJlbW90ZUNhcGFiaWxpdGllcywKICAgICAgICAgICAgICAgIHJ0cFNlbmRlcjogcnRwU2VuZGVyLAogICAgICAgICAgICAgICAgcnRwUmVjZWl2ZXI6IHJ0cFJlY2VpdmVyLAogICAgICAgICAgICAgICAga2luZDoga2luZCwKICAgICAgICAgICAgICAgIG1pZDogbWlkLAogICAgICAgICAgICAgICAgY25hbWU6IGNuYW1lLAogICAgICAgICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVyczogc2VuZEVuY29kaW5nUGFyYW1ldGVycywKICAgICAgICAgICAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM6IHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBSZWNlaXZlciBub3cuIFRoZSBSVFBTZW5kZXIgaXMgc3RhcnRlZCBpbgogICAgICAgICAgICAgIC8vIHNldExvY2FsRGVzY3JpcHRpb24uCiAgICAgICAgICAgICAgc2VsZi5fdHJhbnNjZWl2ZShzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSwKICAgICAgICAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInICYmICFyZWplY3RlZCkgewogICAgICAgICAgICAgIHRyYW5zY2VpdmVyID0gc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF07CiAgICAgICAgICAgICAgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjsKICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgcnRwU2VuZGVyID0gdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICAgICAgICAgIHJ0cFJlY2VpdmVyID0gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgICAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllczsKCiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucmVjdkVuY29kaW5nUGFyYW1ldGVycyA9CiAgICAgICAgICAgICAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucmVtb3RlQ2FwYWJpbGl0aWVzID0KICAgICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzOwogICAgICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmNuYW1lID0gY25hbWU7CgogICAgICAgICAgICAgIGlmICgoaXNJY2VMaXRlIHx8IGlzQ29tcGxldGUpICYmIGNhbmRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0LnNldFJlbW90ZUNhbmRpZGF0ZXMoY2FuZHMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIXNlbGYudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0LnN0YXJ0KGljZUdhdGhlcmVyLCByZW1vdGVJY2VQYXJhbWV0ZXJzLAogICAgICAgICAgICAgICAgICAgICdjb250cm9sbGluZycpOwogICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHRyYW5zY2VpdmVyLAogICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAncmVjdm9ubHknLAogICAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKTsKCiAgICAgICAgICAgICAgaWYgKHJ0cFJlY2VpdmVyICYmCiAgICAgICAgICAgICAgICAgIChkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKSkgewogICAgICAgICAgICAgICAgdHJhY2sgPSBydHBSZWNlaXZlci50cmFjazsKICAgICAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXJdKTsKICAgICAgICAgICAgICAgIHN0cmVhbS5hZGRUcmFjayh0cmFjayk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBhY3R1YWxseSB0aGUgcmVjZWl2ZXIgc2hvdWxkIGJlIGNyZWF0ZWQgbGF0ZXIuCiAgICAgICAgICAgICAgICBkZWxldGUgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uID0gewogICAgICAgICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLAogICAgICAgICAgICBzZHA6IGRlc2NyaXB0aW9uLnNkcAogICAgICAgICAgfTsKICAgICAgICAgIHN3aXRjaCAoZGVzY3JpcHRpb24udHlwZSkgewogICAgICAgICAgICBjYXNlICdvZmZlcic6CiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ2hhdmUtcmVtb3RlLW9mZmVyJyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2Fuc3dlcic6CiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ3N0YWJsZScpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGUgIicgKyBkZXNjcmlwdGlvbi50eXBlICsKICAgICAgICAgICAgICAgICAgJyInKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdHJlYW0uZ2V0VHJhY2tzKCkubGVuZ3RoKSB7CiAgICAgICAgICAgIHNlbGYucmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtOwogICAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgICAgaWYgKHNlbGYub25hZGRzdHJlYW0gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICBzZWxmLm9uYWRkc3RyZWFtKGV2ZW50KTsKICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewogICAgICAgICAgICAgICAgdmFyIHRyYWNrID0gaXRlbVswXTsKICAgICAgICAgICAgICAgIHZhciByZWNlaXZlciA9IGl0ZW1bMV07CiAgICAgICAgICAgICAgICB2YXIgdHJhY2tFdmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjsKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQuc3RyZWFtcyA9IFtzdHJlYW1dOwogICAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KHRyYWNrRXZlbnQpOwogICAgICAgICAgICAgICAgaWYgKHNlbGYub250cmFjayAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBzZWxmLm9udHJhY2sodHJhY2tFdmVudCk7CiAgICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1sxXSwgMCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAvKiBub3QgeWV0CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5jbG9zZSgpOwogICAgICAgIH0KICAgICAgICAqLwogICAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdG9wKCk7CiAgICAgICAgfQogICAgICAgIGlmICh0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0KSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5zdG9wKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gRklYTUU6IGNsZWFuIHVwIHRyYWNrcywgbG9jYWwgc3RyZWFtcywgcmVtb3RlIHN0cmVhbXMsIGV0YwogICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnY2xvc2VkJyk7CiAgICB9OwoKICAgIC8vIFVwZGF0ZSB0aGUgc2lnbmFsaW5nIHN0YXRlLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlU2lnbmFsaW5nU3RhdGUgPQogICAgICAgIGZ1bmN0aW9uKG5ld1N0YXRlKSB7CiAgICAgICAgICB0aGlzLnNpZ25hbGluZ1N0YXRlID0gbmV3U3RhdGU7CiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3NpZ25hbGluZ3N0YXRlY2hhbmdlJyk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgaWYgKHRoaXMub25zaWduYWxpbmdzdGF0ZWNoYW5nZSAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UoZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdG8gZmlyZSB0aGUgbmVnb3RpYXRpb25uZWVkZWQgZXZlbnQuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCA9CiAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAvLyBGaXJlIGF3YXkgKGZvciBub3cpLgogICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgIGlmICh0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQgIT09IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkKGV2ZW50KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbiBzdGF0ZS4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBuZXdTdGF0ZTsKICAgICAgdmFyIHN0YXRlcyA9IHsKICAgICAgICAnbmV3JzogMCwKICAgICAgICBjbG9zZWQ6IDAsCiAgICAgICAgY29ubmVjdGluZzogMCwKICAgICAgICBjaGVja2luZzogMCwKICAgICAgICBjb25uZWN0ZWQ6IDAsCiAgICAgICAgY29tcGxldGVkOiAwLAogICAgICAgIGZhaWxlZDogMAogICAgICB9OwogICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgc3RhdGVzW3RyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKzsKICAgICAgfSk7CiAgICAgIC8vIElDRVRyYW5zcG9ydC5jb21wbGV0ZWQgYW5kIGNvbm5lY3RlZCBhcmUgdGhlIHNhbWUgZm9yIHRoaXMgcHVycG9zZS4KICAgICAgc3RhdGVzLmNvbm5lY3RlZCArPSBzdGF0ZXMuY29tcGxldGVkOwoKICAgICAgbmV3U3RhdGUgPSAnbmV3JzsKICAgICAgaWYgKHN0YXRlcy5mYWlsZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZmFpbGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGluZyA+IDAgfHwgc3RhdGVzLmNoZWNraW5nID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RpbmcnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5kaXNjb25uZWN0ZWQgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMubmV3ID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ25ldyc7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RlZCA+IDAgfHwgc3RhdGVzLmNvbXBsZXRlZCA+IDApIHsKICAgICAgICBuZXdTdGF0ZSA9ICdjb25uZWN0ZWQnOwogICAgICB9CgogICAgICBpZiAobmV3U3RhdGUgIT09IHNlbGYuaWNlQ29ubmVjdGlvblN0YXRlKSB7CiAgICAgICAgc2VsZi5pY2VDb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScpOwogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgaWYgKHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoZXZlbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgaWYgKHRoaXMuX3BlbmRpbmdPZmZlcikgewogICAgICAgIHRocm93IG5ldyBFcnJvcignY3JlYXRlT2ZmZXIgY2FsbGVkIHdoaWxlIHRoZXJlIGlzIGEgcGVuZGluZyBvZmZlci4nKTsKICAgICAgfQogICAgICB2YXIgb2ZmZXJPcHRpb25zOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgb2ZmZXJPcHRpb25zID0gYXJndW1lbnRzWzBdOwogICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHsKICAgICAgICBvZmZlck9wdGlvbnMgPSBhcmd1bWVudHNbMl07CiAgICAgIH0KCiAgICAgIHZhciB0cmFja3MgPSBbXTsKICAgICAgdmFyIG51bUF1ZGlvVHJhY2tzID0gMDsKICAgICAgdmFyIG51bVZpZGVvVHJhY2tzID0gMDsKICAgICAgLy8gRGVmYXVsdCB0byBzZW5kcmVjdi4KICAgICAgaWYgKHRoaXMubG9jYWxTdHJlYW1zLmxlbmd0aCkgewogICAgICAgIG51bUF1ZGlvVHJhY2tzID0gdGhpcy5sb2NhbFN0cmVhbXNbMF0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGg7CiAgICAgICAgbnVtVmlkZW9UcmFja3MgPSB0aGlzLmxvY2FsU3RyZWFtc1swXS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aDsKICAgICAgfQogICAgICAvLyBEZXRlcm1pbmUgbnVtYmVyIG9mIGF1ZGlvIGFuZCB2aWRlbyB0cmFja3Mgd2UgbmVlZCB0byBzZW5kL3JlY3YuCiAgICAgIGlmIChvZmZlck9wdGlvbnMpIHsKICAgICAgICAvLyBSZWplY3QgQ2hyb21lIGxlZ2FjeSBjb25zdHJhaW50cy4KICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm1hbmRhdG9yeSB8fCBvZmZlck9wdGlvbnMub3B0aW9uYWwpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAgICAgJ0xlZ2FjeSBtYW5kYXRvcnkvb3B0aW9uYWwgY29uc3RyYWludHMgbm90IHN1cHBvcnRlZC4nKTsKICAgICAgICB9CiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID0gb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW87CiAgICAgICAgfQogICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVWaWRlbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBudW1WaWRlb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5sb2NhbFN0cmVhbXMubGVuZ3RoKSB7CiAgICAgICAgLy8gUHVzaCBsb2NhbCBzdHJlYW1zLgogICAgICAgIHRoaXMubG9jYWxTdHJlYW1zWzBdLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgIHRyYWNrcy5wdXNoKHsKICAgICAgICAgICAga2luZDogdHJhY2sua2luZCwKICAgICAgICAgICAgdHJhY2s6IHRyYWNrLAogICAgICAgICAgICB3YW50UmVjZWl2ZTogdHJhY2sua2luZCA9PT0gJ2F1ZGlvJyA/CiAgICAgICAgICAgICAgICBudW1BdWRpb1RyYWNrcyA+IDAgOiBudW1WaWRlb1RyYWNrcyA+IDAKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHsKICAgICAgICAgICAgbnVtQXVkaW9UcmFja3MtLTsKICAgICAgICAgIH0gZWxzZSBpZiAodHJhY2sua2luZCA9PT0gJ3ZpZGVvJykgewogICAgICAgICAgICBudW1WaWRlb1RyYWNrcy0tOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vIENyZWF0ZSBNLWxpbmVzIGZvciByZWN2b25seSBzdHJlYW1zLgogICAgICB3aGlsZSAobnVtQXVkaW9UcmFja3MgPiAwIHx8IG51bVZpZGVvVHJhY2tzID4gMCkgewogICAgICAgIGlmIChudW1BdWRpb1RyYWNrcyA+IDApIHsKICAgICAgICAgIHRyYWNrcy5wdXNoKHsKICAgICAgICAgICAga2luZDogJ2F1ZGlvJywKICAgICAgICAgICAgd2FudFJlY2VpdmU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgbnVtQXVkaW9UcmFja3MtLTsKICAgICAgICB9CiAgICAgICAgaWYgKG51bVZpZGVvVHJhY2tzID4gMCkgewogICAgICAgICAgdHJhY2tzLnB1c2goewogICAgICAgICAgICBraW5kOiAndmlkZW8nLAogICAgICAgICAgICB3YW50UmVjZWl2ZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBudW1WaWRlb1RyYWNrcy0tOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKCk7CiAgICAgIHZhciB0cmFuc2NlaXZlcnMgPSBbXTsKICAgICAgdHJhY2tzLmZvckVhY2goZnVuY3Rpb24obWxpbmUsIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAvLyBGb3IgZWFjaCB0cmFjaywgY3JlYXRlIGFuIGljZSBnYXRoZXJlciwgaWNlIHRyYW5zcG9ydCwKICAgICAgICAvLyBkdGxzIHRyYW5zcG9ydCwgcG90ZW50aWFsbHkgcnRwc2VuZGVyIGFuZCBydHByZWNlaXZlci4KICAgICAgICB2YXIgdHJhY2sgPSBtbGluZS50cmFjazsKICAgICAgICB2YXIga2luZCA9IG1saW5lLmtpbmQ7CiAgICAgICAgdmFyIG1pZCA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwoKICAgICAgICB2YXIgdHJhbnNwb3J0cyA9IHNlbGYudXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDAgPyB7CiAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyLAogICAgICAgICAgaWNlVHJhbnNwb3J0OiB0cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LAogICAgICAgICAgZHRsc1RyYW5zcG9ydDogdHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQKICAgICAgICB9IDogc2VsZi5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMobWlkLCBzZHBNTGluZUluZGV4KTsKCiAgICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzID0gUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhraW5kKTsKICAgICAgICAvLyBmaWx0ZXIgUlRYIHVudGlsIGFkZGl0aW9uYWwgc3R1ZmYgbmVlZGVkIGZvciBSVFggaXMgaW1wbGVtZW50ZWQKICAgICAgICAvLyBpbiBhZGFwdGVyLmpzCiAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzID0gbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcigKICAgICAgICAgICAgZnVuY3Rpb24oY29kZWMpIHsKICAgICAgICAgICAgICByZXR1cm4gY29kZWMubmFtZSAhPT0gJ3J0eCc7CiAgICAgICAgICAgIH0pOwogICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7CiAgICAgICAgICAvLyB3b3JrIGFyb3VuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3Avd2VicnRjL2lzc3Vlcy9kZXRhaWw/aWQ9NjU1MgogICAgICAgICAgLy8gYnkgYWRkaW5nIGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTEKICAgICAgICAgIGlmIChjb2RlYy5uYW1lID09PSAnSDI2NCcgJiYKICAgICAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzWydsZXZlbC1hc3ltbWV0cnktYWxsb3dlZCddID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9ICcxJzsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgdmFyIHJ0cFNlbmRlcjsKICAgICAgICB2YXIgcnRwUmVjZWl2ZXI7CgogICAgICAgIC8vIGdlbmVyYXRlIGFuIHNzcmMgbm93LCB0byBiZSB1c2VkIGxhdGVyIGluIHJ0cFNlbmRlci5zZW5kCiAgICAgICAgdmFyIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSBbewogICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMSkgKiAxMDAxCiAgICAgICAgfV07CiAgICAgICAgaWYgKHRyYWNrKSB7CiAgICAgICAgICBydHBTZW5kZXIgPSBuZXcgUlRDUnRwU2VuZGVyKHRyYWNrLCB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1saW5lLndhbnRSZWNlaXZlKSB7CiAgICAgICAgICBydHBSZWNlaXZlciA9IG5ldyBSVENSdHBSZWNlaXZlcih0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsIGtpbmQpOwogICAgICAgIH0KCiAgICAgICAgdHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdID0gewogICAgICAgICAgaWNlR2F0aGVyZXI6IHRyYW5zcG9ydHMuaWNlR2F0aGVyZXIsCiAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0LAogICAgICAgICAgZHRsc1RyYW5zcG9ydDogdHJhbnNwb3J0cy5kdGxzVHJhbnNwb3J0LAogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXM6IGxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzOiBudWxsLAogICAgICAgICAgcnRwU2VuZGVyOiBydHBTZW5kZXIsCiAgICAgICAgICBydHBSZWNlaXZlcjogcnRwUmVjZWl2ZXIsCiAgICAgICAgICBraW5kOiBraW5kLAogICAgICAgICAgbWlkOiBtaWQsCiAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOiBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLAogICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczogbnVsbAogICAgICAgIH07CiAgICAgIH0pOwogICAgICBpZiAodGhpcy51c2luZ0J1bmRsZSkgewogICAgICAgIHNkcCArPSAnYT1ncm91cDpCVU5ETEUgJyArIHRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24odCkgewogICAgICAgICAgcmV0dXJuIHQubWlkOwogICAgICAgIH0pLmpvaW4oJyAnKSArICdcclxuJzsKICAgICAgfQogICAgICB0cmFja3MuZm9yRWFjaChmdW5jdGlvbihtbGluZSwgc2RwTUxpbmVJbmRleCkgewogICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsCiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLCAnb2ZmZXInLCBzZWxmLmxvY2FsU3RyZWFtc1swXSk7CiAgICAgIH0pOwoKICAgICAgdGhpcy5fcGVuZGluZ09mZmVyID0gdHJhbnNjZWl2ZXJzOwogICAgICB2YXIgZGVzYyA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oewogICAgICAgIHR5cGU6ICdvZmZlcicsCiAgICAgICAgc2RwOiBzZHAKICAgICAgfSk7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChhcmd1bWVudHNbMF0sIDAsIGRlc2MpOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzYyk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZSgpOwogICAgICBpZiAodGhpcy51c2luZ0J1bmRsZSkgewogICAgICAgIHNkcCArPSAnYT1ncm91cDpCVU5ETEUgJyArIHRoaXMudHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbih0KSB7CiAgICAgICAgICByZXR1cm4gdC5taWQ7CiAgICAgICAgfSkuam9pbignICcpICsgJ1xyXG4nOwogICAgICB9CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaXNEYXRhY2hhbm5lbCkgewogICAgICAgICAgc2RwICs9ICdtPWFwcGxpY2F0aW9uIDAgRFRMUy9TQ1RQIDUwMDBcclxuJyArCiAgICAgICAgICAgICAgJ2M9SU4gSVA0IDAuMC4wLjBcclxuJyArCiAgICAgICAgICAgICAgJ2E9bWlkOicgKyB0cmFuc2NlaXZlci5taWQgKyAnXHJcbic7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLgogICAgICAgIHZhciBjb21tb25DYXBhYmlsaXRpZXMgPSBzZWxmLl9nZXRDb21tb25DYXBhYmlsaXRpZXMoCiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpOwoKICAgICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNvbW1vbkNhcGFiaWxpdGllcywKICAgICAgICAgICAgJ2Fuc3dlcicsIHNlbGYubG9jYWxTdHJlYW1zWzBdKTsKICAgICAgfSk7CgogICAgICB2YXIgZGVzYyA9IG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oewogICAgICAgIHR5cGU6ICdhbnN3ZXInLAogICAgICAgIHNkcDogc2RwCiAgICAgIH0pOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzBdLCAwLCBkZXNjKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRlc2MpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSkgewogICAgICBpZiAoIWNhbmRpZGF0ZSkgewogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW2pdLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pOwogICAgICAgICAgaWYgKHRoaXMudXNpbmdCdW5kbGUpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbUxpbmVJbmRleCA9IGNhbmRpZGF0ZS5zZHBNTGluZUluZGV4OwogICAgICAgIGlmIChjYW5kaWRhdGUuc2RwTWlkKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnRyYW5zY2VpdmVyc1tpXS5taWQgPT09IGNhbmRpZGF0ZS5zZHBNaWQpIHsKICAgICAgICAgICAgICBtTGluZUluZGV4ID0gaTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1ttTGluZUluZGV4XTsKICAgICAgICBpZiAodHJhbnNjZWl2ZXIpIHsKICAgICAgICAgIHZhciBjYW5kID0gT2JqZWN0LmtleXMoY2FuZGlkYXRlLmNhbmRpZGF0ZSkubGVuZ3RoID4gMCA/CiAgICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZGlkYXRlLmNhbmRpZGF0ZSkgOiB7fTsKICAgICAgICAgIC8vIElnbm9yZSBDaHJvbWUncyBpbnZhbGlkIGNhbmRpZGF0ZXMgc2luY2UgRWRnZSBkb2VzIG5vdCBsaWtlIHRoZW0uCiAgICAgICAgICBpZiAoY2FuZC5wcm90b2NvbCA9PT0gJ3RjcCcgJiYgKGNhbmQucG9ydCA9PT0gMCB8fCBjYW5kLnBvcnQgPT09IDkpKSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vIElnbm9yZSBSVENQIGNhbmRpZGF0ZXMsIHdlIGFzc3VtZSBSVENQLU1VWC4KICAgICAgICAgIGlmIChjYW5kLmNvbXBvbmVudCAhPT0gJzEnKSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoY2FuZCk7CgogICAgICAgICAgLy8gdXBkYXRlIHRoZSByZW1vdGVEZXNjcmlwdGlvbi4KICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnModGhpcy5yZW1vdGVEZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgc2VjdGlvbnNbbUxpbmVJbmRleCArIDFdICs9IChjYW5kLnR5cGUgPyBjYW5kaWRhdGUuY2FuZGlkYXRlLnRyaW0oKQogICAgICAgICAgICAgIDogJ2E9ZW5kLW9mLWNhbmRpZGF0ZXMnKSArICdcclxuJzsKICAgICAgICAgIHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwID0gc2VjdGlvbnMuam9pbignJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzFdLCAwKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHByb21pc2VzID0gW107CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICBbJ3J0cFNlbmRlcicsICdydHBSZWNlaXZlcicsICdpY2VHYXRoZXJlcicsICdpY2VUcmFuc3BvcnQnLAogICAgICAgICAgICAnZHRsc1RyYW5zcG9ydCddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICAgICAgaWYgKHRyYW5zY2VpdmVyW21ldGhvZF0pIHsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godHJhbnNjZWl2ZXJbbWV0aG9kXS5nZXRTdGF0cygpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgICAgICAgYXJndW1lbnRzWzFdOwogICAgICB2YXIgZml4U3RhdHNUeXBlID0gZnVuY3Rpb24oc3RhdCkgewogICAgICAgIHN0YXQudHlwZSA9IHsKICAgICAgICAgIGluYm91bmRydHA6ICdpbmJvdW5kLXJ0cCcsCiAgICAgICAgICBvdXRib3VuZHJ0cDogJ291dGJvdW5kLXJ0cCcsCiAgICAgICAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLAogICAgICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLAogICAgICAgICAgcmVtb3RlY2FuZGlkYXRlOiAncmVtb3RlLWNhbmRpZGF0ZScKICAgICAgICB9W3N0YXQudHlwZV0gfHwgc3RhdC50eXBlOwogICAgICAgIHJldHVybiBzdGF0OwogICAgICB9OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkgewogICAgICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnQKICAgICAgICB2YXIgcmVzdWx0cyA9IG5ldyBNYXAoKTsKICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihyZXMpIHsKICAgICAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc3VsdCkgewogICAgICAgICAgICBPYmplY3Qua2V5cyhyZXN1bHQpLmZvckVhY2goZnVuY3Rpb24oaWQpIHsKICAgICAgICAgICAgICByZXN1bHRbaWRdLnR5cGUgPSBmaXhTdGF0c1R5cGUocmVzdWx0W2lkXSk7CiAgICAgICAgICAgICAgcmVzdWx0cy5zZXQoaWQsIHJlc3VsdFtpZF0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGNiKSB7CiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNiLCAwLCByZXN1bHRzKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlc29sdmUocmVzdWx0cyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKICB9Cn07CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gewogIHNoaW1QZWVyQ29ubmVjdGlvbjogZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uLAogIHNoaW1HZXRVc2VyTWVkaWE6IHJlcXVpcmUoJy4vZ2V0dXNlcm1lZGlhJykKfTsKCn0seyIuLi91dGlscyI6MTEsIi4vZ2V0dXNlcm1lZGlhIjo3LCJzZHAiOjF9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCiAvKiBlc2xpbnQtZW52IG5vZGUgKi8KJ3VzZSBzdHJpY3QnOwoKLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgewogIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZToge1Blcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcid9W2UubmFtZV0gfHwgZS5uYW1lLAogICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsCiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWU7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgLy8gZ2V0VXNlck1lZGlhIGVycm9yIHNoaW0uCiAgdmFyIG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS4KICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHsKICAgIHJldHVybiBvcmlnR2V0VXNlck1lZGlhKGMpLmNhdGNoKGZ1bmN0aW9uKGUpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpOwogICAgfSk7CiAgfTsKfTsKCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7Cgp2YXIgYnJvd3NlckRldGFpbHMgPSByZXF1aXJlKCcuLi91dGlscycpLmJyb3dzZXJEZXRhaWxzOwoKdmFyIGZpcmVmb3hTaGltID0gewogIHNoaW1PblRyYWNrOiBmdW5jdGlvbigpIHsKICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnb250cmFjaycgaW4KICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29udHJhY2snLCB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9vbnRyYWNrOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbihmKSB7CiAgICAgICAgICBpZiAodGhpcy5fb250cmFjaykgewogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayk7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2sgPSBmKTsKICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7CiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHt0cmFjazogdHJhY2t9OwogICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dOwogICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24oKSB7CiAgICAvLyBGaXJlZm94IGhhcyBzdXBwb3J0ZWQgbW96U3JjT2JqZWN0IHNpbmNlIEZGMjIsIHVucHJlZml4ZWQgaW4gNDIuCiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmCiAgICAgICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAgICAgLy8gU2hpbSB0aGUgc3JjT2JqZWN0IHByb3BlcnR5LCBvbmNlLCB3aGVuIEhUTUxNZWRpYUVsZW1lbnQgaXMgZm91bmQuCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm1velNyY09iamVjdDsKICAgICAgICAgIH0sCiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgICAgICB0aGlzLm1velNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCgogIHNoaW1QZWVyQ29ubmVjdGlvbjogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHwKICAgICAgICB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24pKSB7CiAgICAgIHJldHVybjsgLy8gcHJvYmFibHkgbWVkaWEucGVlcmNvbm5lY3Rpb24uZW5hYmxlZD1mYWxzZSBpbiBhYm91dDpjb25maWcKICAgIH0KICAgIC8vIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuCiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgMzgpIHsKICAgICAgICAgIC8vIC51cmxzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gRkYgPCAzOC4KICAgICAgICAgIC8vIGNyZWF0ZSBSVENJY2VTZXJ2ZXJzIHdpdGggYSBzaW5nbGUgdXJsLgogICAgICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAgICAgdmFyIG5ld0ljZVNlcnZlcnMgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwY0NvbmZpZy5pY2VTZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07CiAgICAgICAgICAgICAgaWYgKHNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlcnZlci51cmxzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBuZXdTZXJ2ZXIgPSB7CiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIudXJsc1tqXQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICBpZiAoc2VydmVyLnVybHNbal0uaW5kZXhPZigndHVybicpID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgbmV3U2VydmVyLnVzZXJuYW1lID0gc2VydmVyLnVzZXJuYW1lOwogICAgICAgICAgICAgICAgICAgIG5ld1NlcnZlci5jcmVkZW50aWFsID0gc2VydmVyLmNyZWRlbnRpYWw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKG5ld1NlcnZlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGNDb25maWcuaWNlU2VydmVycyA9IG5ld0ljZVNlcnZlcnM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgbW96UlRDUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpOwogICAgICB9OwogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gbW96UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlOwoKICAgICAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS4KICAgICAgaWYgKG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGUpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBtb3pSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gbW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uOwogICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gbW96UlRDSWNlQ2FuZGlkYXRlOwogICAgfQoKICAgIC8vIHNoaW0gYXdheSBuZWVkIGZvciBvYnNvbGV0ZSBSVENJY2VDYW5kaWRhdGUvUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLgogICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddCiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICB2YXIgbmF0aXZlTWV0aG9kID0gUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07CiAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBuZXcgKChtZXRob2QgPT09ICdhZGRJY2VDYW5kaWRhdGUnKSA/CiAgICAgICAgICAgICAgICBSVENJY2VDYW5kaWRhdGUgOiBSVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7CiAgICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH07CiAgICAgICAgfSk7CgogICAgLy8gc3VwcG9ydCBmb3IgYWRkSWNlQ2FuZGlkYXRlKG51bGwgb3IgdW5kZWZpbmVkKQogICAgdmFyIG5hdGl2ZUFkZEljZUNhbmRpZGF0ZSA9CiAgICAgICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTsKICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPSBmdW5jdGlvbigpIHsKICAgICAgaWYgKCFhcmd1bWVudHNbMF0pIHsKICAgICAgICBpZiAoYXJndW1lbnRzWzFdKSB7CiAgICAgICAgICBhcmd1bWVudHNbMV0uYXBwbHkobnVsbCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgfQogICAgICByZXR1cm4gbmF0aXZlQWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwoKICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnQKICAgIHZhciBtYWtlTWFwU3RhdHMgPSBmdW5jdGlvbihzdGF0cykgewogICAgICB2YXIgbWFwID0gbmV3IE1hcCgpOwogICAgICBPYmplY3Qua2V5cyhzdGF0cykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgICBtYXAuc2V0KGtleSwgc3RhdHNba2V5XSk7CiAgICAgICAgbWFwW2tleV0gPSBzdGF0c1trZXldOwogICAgICB9KTsKICAgICAgcmV0dXJuIG1hcDsKICAgIH07CgogICAgdmFyIG1vZGVyblN0YXRzVHlwZXMgPSB7CiAgICAgIGluYm91bmRydHA6ICdpbmJvdW5kLXJ0cCcsCiAgICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJywKICAgICAgY2FuZGlkYXRlcGFpcjogJ2NhbmRpZGF0ZS1wYWlyJywKICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLAogICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgfTsKCiAgICB2YXIgbmF0aXZlR2V0U3RhdHMgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7CiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3Rvciwgb25TdWNjLCBvbkVycikgewogICAgICByZXR1cm4gbmF0aXZlR2V0U3RhdHMuYXBwbHkodGhpcywgW3NlbGVjdG9yIHx8IG51bGxdKQogICAgICAgIC50aGVuKGZ1bmN0aW9uKHN0YXRzKSB7CiAgICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQ4KSB7CiAgICAgICAgICAgIHN0YXRzID0gbWFrZU1hcFN0YXRzKHN0YXRzKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTMgJiYgIW9uU3VjYykgewogICAgICAgICAgICAvLyBTaGltIG9ubHkgcHJvbWlzZSBnZXRTdGF0cyB3aXRoIHNwZWMtaHlwaGVucyBpbiB0eXBlIG5hbWVzCiAgICAgICAgICAgIC8vIExlYXZlIGNhbGxiYWNrIHZlcnNpb24gYWxvbmU7IG1pc2Mgb2xkIHVzZXMgb2YgZm9yRWFjaCBiZWZvcmUgTWFwCiAgICAgICAgICAgIHN0YXRzLmZvckVhY2goZnVuY3Rpb24oc3RhdCkgewogICAgICAgICAgICAgIHN0YXQudHlwZSA9IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN0YXRzOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4ob25TdWNjLCBvbkVycik7CiAgICB9OwogIH0KfTsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbU9uVHJhY2s6IGZpcmVmb3hTaGltLnNoaW1PblRyYWNrLAogIHNoaW1Tb3VyY2VPYmplY3Q6IGZpcmVmb3hTaGltLnNoaW1Tb3VyY2VPYmplY3QsCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24sCiAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKQp9OwoKfSx7Ii4uL3V0aWxzIjoxMSwiLi9nZXR1c2VybWVkaWEiOjl9XSw5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCiAvKiBlc2xpbnQtZW52IG5vZGUgKi8KJ3VzZSBzdHJpY3QnOwoKdmFyIGxvZ2dpbmcgPSByZXF1aXJlKCcuLi91dGlscycpLmxvZzsKdmFyIGJyb3dzZXJEZXRhaWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5icm93c2VyRGV0YWlsczsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsKICB2YXIgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IHsKICAgICAgICBTZWN1cml0eUVycm9yOiAnTm90QWxsb3dlZEVycm9yJywKICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InCiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IHsKICAgICAgICAnVGhlIG9wZXJhdGlvbiBpcyBpbnNlY3VyZS4nOiAnVGhlIHJlcXVlc3QgaXMgbm90IGFsbG93ZWQgYnkgdGhlICcgKwogICAgICAgICd1c2VyIGFnZW50IG9yIHRoZSBwbGF0Zm9ybSBpbiB0aGUgY3VycmVudCBjb250ZXh0LicKICAgICAgfVtlLm1lc3NhZ2VdIHx8IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LAogICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArICh0aGlzLm1lc3NhZ2UgJiYgJzogJykgKyB0aGlzLm1lc3NhZ2U7CiAgICAgIH0KICAgIH07CiAgfTsKCiAgLy8gZ2V0VXNlck1lZGlhIGNvbnN0cmFpbnRzIHNoaW0uCiAgdmFyIGdldFVzZXJNZWRpYV8gPSBmdW5jdGlvbihjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7CiAgICB2YXIgY29uc3RyYWludHNUb0ZGMzdfID0gZnVuY3Rpb24oYykgewogICAgICBpZiAodHlwZW9mIGMgIT09ICdvYmplY3QnIHx8IGMucmVxdWlyZSkgewogICAgICAgIHJldHVybiBjOwogICAgICB9CiAgICAgIHZhciByZXF1aXJlID0gW107CiAgICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgaWYgKGtleSA9PT0gJ3JlcXVpcmUnIHx8IGtleSA9PT0gJ2FkdmFuY2VkJyB8fCBrZXkgPT09ICdtZWRpYVNvdXJjZScpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdmFyIHIgPSBjW2tleV0gPSAodHlwZW9mIGNba2V5XSA9PT0gJ29iamVjdCcpID8KICAgICAgICAgICAgY1trZXldIDoge2lkZWFsOiBjW2tleV19OwogICAgICAgIGlmIChyLm1pbiAhPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgIHIubWF4ICE9PSB1bmRlZmluZWQgfHwgci5leGFjdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXF1aXJlLnB1c2goa2V5KTsKICAgICAgICB9CiAgICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgaWYgKHR5cGVvZiByLmV4YWN0ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICByLiBtaW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjW2tleV0gPSByLmV4YWN0OwogICAgICAgICAgfQogICAgICAgICAgZGVsZXRlIHIuZXhhY3Q7CiAgICAgICAgfQogICAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGMuYWR2YW5jZWQgPSBjLmFkdmFuY2VkIHx8IFtdOwogICAgICAgICAgdmFyIG9jID0ge307CiAgICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7CiAgICAgICAgICAgIG9jW2tleV0gPSB7bWluOiByLmlkZWFsLCBtYXg6IHIuaWRlYWx9OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2Nba2V5XSA9IHIuaWRlYWw7CiAgICAgICAgICB9CiAgICAgICAgICBjLmFkdmFuY2VkLnB1c2gob2MpOwogICAgICAgICAgZGVsZXRlIHIuaWRlYWw7CiAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHIpLmxlbmd0aCkgewogICAgICAgICAgICBkZWxldGUgY1trZXldOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGlmIChyZXF1aXJlLmxlbmd0aCkgewogICAgICAgIGMucmVxdWlyZSA9IHJlcXVpcmU7CiAgICAgIH0KICAgICAgcmV0dXJuIGM7CiAgICB9OwogICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDM4KSB7CiAgICAgIGxvZ2dpbmcoJ3NwZWM6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICBpZiAoY29uc3RyYWludHMuYXVkaW8pIHsKICAgICAgICBjb25zdHJhaW50cy5hdWRpbyA9IGNvbnN0cmFpbnRzVG9GRjM3Xyhjb25zdHJhaW50cy5hdWRpbyk7CiAgICAgIH0KICAgICAgaWYgKGNvbnN0cmFpbnRzLnZpZGVvKSB7CiAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMudmlkZW8pOwogICAgICB9CiAgICAgIGxvZ2dpbmcoJ2ZmMzc6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgfQogICAgcmV0dXJuIG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIG9uU3VjY2VzcywgZnVuY3Rpb24oZSkgewogICAgICBvbkVycm9yKHNoaW1FcnJvcl8oZSkpOwogICAgfSk7CiAgfTsKCiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuCiAgdmFyIGdldFVzZXJNZWRpYVByb21pc2VfID0gZnVuY3Rpb24oY29uc3RyYWludHMpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTsKICAgIH0pOwogIH07CgogIC8vIFNoaW0gZm9yIG1lZGlhRGV2aWNlcyBvbiBvbGRlciB2ZXJzaW9ucy4KICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7Z2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXywKICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7IH0sCiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9CiAgICB9OwogIH0KICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgPQogICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgfHwgZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHsKICAgICAgICAgIHZhciBpbmZvcyA9IFsKICAgICAgICAgICAge2tpbmQ6ICdhdWRpb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30sCiAgICAgICAgICAgIHtraW5kOiAndmlkZW9pbnB1dCcsIGRldmljZUlkOiAnZGVmYXVsdCcsIGxhYmVsOiAnJywgZ3JvdXBJZDogJyd9CiAgICAgICAgICBdOwogICAgICAgICAgcmVzb2x2ZShpbmZvcyk7CiAgICAgICAgfSk7CiAgICAgIH07CgogIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDEpIHsKICAgIC8vIFdvcmsgYXJvdW5kIGh0dHA6Ly9idWd6aWwubGEvMTE2OTY2NQogICAgdmFyIG9yZ0VudW1lcmF0ZURldmljZXMgPQogICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcy5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBvcmdFbnVtZXJhdGVEZXZpY2VzKCkudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoZS5uYW1lID09PSAnTm90Rm91bmRFcnJvcicpIHsKICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgZTsKICAgICAgfSk7CiAgICB9OwogIH0KICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQ5KSB7CiAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLgogICAgICAgIGJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHsKICAgICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgICAvLyBXb3JrIGFyb3VuZCBodHRwczovL2J1Z3ppbC5sYS84MDIzMjYKICAgICAgICBpZiAoYy5hdWRpbyAmJiAhc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoIHx8CiAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgICAgfSk7CiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUaGUgb2JqZWN0IGNhbiBub3QgYmUgZm91bmQgaGVyZS4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm90Rm91bmRFcnJvcicpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICB9LCBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpOwogICAgICB9KTsKICAgIH07CiAgfQogIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7CiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQ0KSB7CiAgICAgIHJldHVybiBnZXRVc2VyTWVkaWFfKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpOwogICAgfQogICAgLy8gUmVwbGFjZSBGaXJlZm94IDQ0KydzIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2l0aCB1bnByZWZpeGVkIHZlcnNpb24uCiAgICBjb25zb2xlLndhcm4oJ25hdmlnYXRvci5nZXRVc2VyTWVkaWEgaGFzIGJlZW4gcmVwbGFjZWQgYnkgJyArCiAgICAgICAgICAgICAgICAgJ25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhJyk7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihvblN1Y2Nlc3MsIG9uRXJyb3IpOwogIH07Cn07Cgp9LHsiLi4vdXRpbHMiOjExfV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KJ3VzZSBzdHJpY3QnOwp2YXIgc2FmYXJpU2hpbSA9IHsKICAvLyBUT0RPOiBEckFsZXgsIHNob3VsZCBiZSBoZXJlLCBkb3VibGUgY2hlY2sgYWdhaW5zdCBMYXlvdXRUZXN0cwogIC8vIHNoaW1PblRyYWNrOiBmdW5jdGlvbigpIHsgfSwKCiAgLy8gVE9ETzogb25jZSB0aGUgYmFjay1lbmQgZm9yIHRoZSBtYWMgcG9ydCBpcyBkb25lLCBhZGQuCiAgLy8gVE9ETzogY2hlY2sgZm9yIHdlYmtpdEdUSysKICAvLyBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uKCkgeyB9LAoKICBzaGltR2V0VXNlck1lZGlhOiBmdW5jdGlvbigpIHsKICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhOwogIH0KfTsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbUdldFVzZXJNZWRpYTogc2FmYXJpU2hpbS5zaGltR2V0VXNlck1lZGlhCiAgLy8gVE9ETwogIC8vIHNoaW1PblRyYWNrOiBzYWZhcmlTaGltLnNoaW1PblRyYWNrLAogIC8vIHNoaW1QZWVyQ29ubmVjdGlvbjogc2FmYXJpU2hpbS5zaGltUGVlckNvbm5lY3Rpb24KfTsKCn0se31dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCiAvKiBlc2xpbnQtZW52IG5vZGUgKi8KJ3VzZSBzdHJpY3QnOwoKdmFyIGxvZ0Rpc2FibGVkXyA9IHRydWU7CgovLyBVdGlsaXR5IG1ldGhvZHMuCnZhciB1dGlscyA9IHsKICBkaXNhYmxlTG9nOiBmdW5jdGlvbihib29sKSB7CiAgICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykgewogICAgICByZXR1cm4gbmV3IEVycm9yKCdBcmd1bWVudCB0eXBlOiAnICsgdHlwZW9mIGJvb2wgKwogICAgICAgICAgJy4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uJyk7CiAgICB9CiAgICBsb2dEaXNhYmxlZF8gPSBib29sOwogICAgcmV0dXJuIChib29sKSA/ICdhZGFwdGVyLmpzIGxvZ2dpbmcgZGlzYWJsZWQnIDoKICAgICAgICAnYWRhcHRlci5qcyBsb2dnaW5nIGVuYWJsZWQnOwogIH0sCgogIGxvZzogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKGxvZ0Rpc2FibGVkXykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmxvZyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAgKiBFeHRyYWN0IGJyb3dzZXIgdmVyc2lvbiBvdXQgb2YgdGhlIHByb3ZpZGVkIHVzZXIgYWdlbnQgc3RyaW5nLgogICAqCiAgICogQHBhcmFtIHshc3RyaW5nfSB1YXN0cmluZyB1c2VyQWdlbnQgc3RyaW5nLgogICAqIEBwYXJhbSB7IXN0cmluZ30gZXhwciBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCBhcyBtYXRjaCBjcml0ZXJpYS4KICAgKiBAcGFyYW0geyFudW1iZXJ9IHBvcyBwb3NpdGlvbiBpbiB0aGUgdmVyc2lvbiBzdHJpbmcgdG8gYmUgcmV0dXJuZWQuCiAgICogQHJldHVybiB7IW51bWJlcn0gYnJvd3NlciB2ZXJzaW9uLgogICAqLwogIGV4dHJhY3RWZXJzaW9uOiBmdW5jdGlvbih1YXN0cmluZywgZXhwciwgcG9zKSB7CiAgICB2YXIgbWF0Y2ggPSB1YXN0cmluZy5tYXRjaChleHByKTsKICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaC5sZW5ndGggPj0gcG9zICYmIHBhcnNlSW50KG1hdGNoW3Bvc10sIDEwKTsKICB9LAoKICAvKioKICAgKiBCcm93c2VyIGRldGVjdG9yLgogICAqCiAgICogQHJldHVybiB7b2JqZWN0fSByZXN1bHQgY29udGFpbmluZyBicm93c2VyIGFuZCB2ZXJzaW9uCiAgICogICAgIHByb3BlcnRpZXMuCiAgICovCiAgZGV0ZWN0QnJvd3NlcjogZnVuY3Rpb24oKSB7CiAgICAvLyBSZXR1cm5lZCByZXN1bHQgb2JqZWN0LgogICAgdmFyIHJlc3VsdCA9IHt9OwogICAgcmVzdWx0LmJyb3dzZXIgPSBudWxsOwogICAgcmVzdWx0LnZlcnNpb24gPSBudWxsOwoKICAgIC8vIEZhaWwgZWFybHkgaWYgaXQncyBub3QgYSBicm93c2VyCiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IpIHsKICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnTm90IGEgYnJvd3Nlci4nOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICAgIC8vIEZpcmVmb3guCiAgICBpZiAobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSkgewogICAgICByZXN1bHQuYnJvd3NlciA9ICdmaXJlZm94JzsKICAgICAgcmVzdWx0LnZlcnNpb24gPSB0aGlzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgICAgICAvRmlyZWZveFwvKFswLTldKylcLi8sIDEpOwoKICAgIC8vIGFsbCB3ZWJraXQtYmFzZWQgYnJvd3NlcnMKICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSkgewogICAgICAvLyBDaHJvbWUsIENocm9taXVtLCBXZWJ2aWV3LCBPcGVyYSwgYWxsIHVzZSB0aGUgY2hyb21lIHNoaW0gZm9yIG5vdwogICAgICBpZiAod2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnY2hyb21lJzsKICAgICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgIC9DaHJvbShlfGl1bSlcLyhbMC05XSspXC4vLCAyKTsKCiAgICAgIC8vIFNhZmFyaSBvciB1bmtub3duIHdlYmtpdC1iYXNlZAogICAgICAvLyBmb3IgdGhlIHRpbWUgYmVpbmcgU2FmYXJpIGhhcyBzdXBwb3J0IGZvciBNZWRpYVN0cmVhbXMgYnV0IG5vdCB3ZWJSVEMKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBTYWZhcmkgVUEgc3Vic3RyaW5ncyBvZiBpbnRlcmVzdCBmb3IgcmVmZXJlbmNlOgogICAgICAgIC8vIC0gd2Via2l0IHZlcnNpb246ICAgICAgICAgICBBcHBsZVdlYktpdC82MDIuMS4yNSAoYWxzbyB1c2VkIGluIE9wLENyKQogICAgICAgIC8vIC0gc2FmYXJpIFVJIHZlcnNpb246ICAgICAgICBWZXJzaW9uLzkuMC4zICh1bmlxdWUgdG8gU2FmYXJpKQogICAgICAgIC8vIC0gc2FmYXJpIFVJIHdlYmtpdCB2ZXJzaW9uOiBTYWZhcmkvNjAxLjQuNCAoYWxzbyB1c2VkIGluIE9wLENyKQogICAgICAgIC8vCiAgICAgICAgLy8gaWYgdGhlIHdlYmtpdCB2ZXJzaW9uIGFuZCBzYWZhcmkgVUkgd2Via2l0IHZlcnNpb25zIGFyZSBlcXVhbHMsCiAgICAgICAgLy8gLi4uIHRoaXMgaXMgYSBzdGFibGUgdmVyc2lvbi4KICAgICAgICAvLwogICAgICAgIC8vIG9ubHkgdGhlIGludGVybmFsIHdlYmtpdCB2ZXJzaW9uIGlzIGltcG9ydGFudCB0b2RheSB0byBrbm93IGlmCiAgICAgICAgLy8gbWVkaWEgc3RyZWFtcyBhcmUgc3VwcG9ydGVkCiAgICAgICAgLy8KICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblwvKFxkKykuKFxkKykvKSkgewogICAgICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnc2FmYXJpJzsKICAgICAgICAgIHJlc3VsdC52ZXJzaW9uID0gdGhpcy5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LAogICAgICAgICAgICAvQXBwbGVXZWJLaXRcLyhbMC05XSspXC4vLCAxKTsKCiAgICAgICAgLy8gdW5rbm93biB3ZWJraXQtYmFzZWQgYnJvd3NlcgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXN1bHQuYnJvd3NlciA9ICdVbnN1cHBvcnRlZCB3ZWJraXQtYmFzZWQgYnJvd3NlciAnICsKICAgICAgICAgICAgICAnd2l0aCBHVU0gc3VwcG9ydCBidXQgbm8gV2ViUlRDIHN1cHBvcnQuJzsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICB9CgogICAgLy8gRWRnZS4KICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJgogICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcLyhcZCspLihcZCspJC8pKSB7CiAgICAgIHJlc3VsdC5icm93c2VyID0gJ2VkZ2UnOwogICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgIC9FZGdlXC8oXGQrKS4oXGQrKSQvLCAyKTsKCiAgICAvLyBEZWZhdWx0IGZhbGx0aHJvdWdoOiBub3Qgc3VwcG9ydGVkLgogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnTm90IGEgc3VwcG9ydGVkIGJyb3dzZXIuJzsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0sCgogIC8vIHNoaW1DcmVhdGVPYmplY3RVUkwgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1Tb3VyY2VPYmplY3QgdG8gYXZvaWQgbG9vcC4KCiAgc2hpbUNyZWF0ZU9iamVjdFVSTDogZnVuY3Rpb24oKSB7CiAgICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJgogICAgICAgICAgJ3NyY09iamVjdCcgaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlKSkgewogICAgICAvLyBPbmx5IHNoaW0gQ3JlYXRlT2JqZWN0VVJMIHVzaW5nIHNyY09iamVjdCBpZiBzcmNPYmplY3QgZXhpc3RzLgogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQoKICAgIHZhciBuYXRpdmVDcmVhdGVPYmplY3RVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMLmJpbmQoVVJMKTsKICAgIHZhciBuYXRpdmVSZXZva2VPYmplY3RVUkwgPSBVUkwucmV2b2tlT2JqZWN0VVJMLmJpbmQoVVJMKTsKICAgIHZhciBzdHJlYW1zID0gbmV3IE1hcCgpLCBuZXdJZCA9IDA7CgogICAgVVJMLmNyZWF0ZU9iamVjdFVSTCA9IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICBpZiAoJ2dldFRyYWNrcycgaW4gc3RyZWFtKSB7CiAgICAgICAgdmFyIHVybCA9ICdwb2x5YmxvYjonICsgKCsrbmV3SWQpOwogICAgICAgIHN0cmVhbXMuc2V0KHVybCwgc3RyZWFtKTsKICAgICAgICBjb25zb2xlLmxvZygnVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pIGlzIGRlcHJlY2F0ZWQhICcgKwogICAgICAgICAgICAgICAgICAgICdVc2UgZWxlbS5zcmNPYmplY3QgPSBzdHJlYW0gaW5zdGVhZCEnKTsKICAgICAgICByZXR1cm4gdXJsOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVDcmVhdGVPYmplY3RVUkwoc3RyZWFtKTsKICAgIH07CiAgICBVUkwucmV2b2tlT2JqZWN0VVJMID0gZnVuY3Rpb24odXJsKSB7CiAgICAgIG5hdGl2ZVJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICBzdHJlYW1zLmRlbGV0ZSh1cmwpOwogICAgfTsKCiAgICB2YXIgZHNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3JjJyk7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjJywgewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBkc2MuZ2V0LmFwcGx5KHRoaXMpOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKHVybCkgewogICAgICAgIHRoaXMuc3JjT2JqZWN0ID0gc3RyZWFtcy5nZXQodXJsKSB8fCBudWxsOwogICAgICAgIHJldHVybiBkc2Muc2V0LmFwcGx5KHRoaXMsIFt1cmxdKTsKICAgICAgfQogICAgfSk7CiAgfQp9OwoKLy8gRXhwb3J0Lgptb2R1bGUuZXhwb3J0cyA9IHsKICBsb2c6IHV0aWxzLmxvZywKICBkaXNhYmxlTG9nOiB1dGlscy5kaXNhYmxlTG9nLAogIGJyb3dzZXJEZXRhaWxzOiB1dGlscy5kZXRlY3RCcm93c2VyKCksCiAgZXh0cmFjdFZlcnNpb246IHV0aWxzLmV4dHJhY3RWZXJzaW9uLAogIHNoaW1DcmVhdGVPYmplY3RVUkw6IHV0aWxzLnNoaW1DcmVhdGVPYmplY3RVUkwKfTsKCn0se31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8qKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwoKcmVxdWlyZSgnd2VicnRjLWFkYXB0ZXInKTsKCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqDQogIFRoZSBDb25uZWN0aW9uQ29udHJvbGxlciBoYXMgYSBnZW5lcmljIGRlc2lnbiBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGluIGJvdGggc3R1YnMuDQogIEl0IG1hbmFnZXMgYSBzaW5nbGUgRGF0YUNoYW5uZWwsIGl0IGlzIG5vdCByZXF1ZXN0aW5nIGFjY2VzcyB0byBtZWRpYSBpbnB1dCwgaS5lLg0KICBkb2VzIG5vdCBoYXZlIGF1ZGlvL3ZpZGVvIHN0cmVhbXMuDQoqKi8KdmFyIENvbm5lY3Rpb25Db250cm9sbGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbm5lY3Rpb25Db250cm9sbGVyKG15VXJsLCBzeW5jaGVyLCBjb25maWd1cmF0aW9uLCBjYWxsZXIpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0aW9uQ29udHJvbGxlcik7CgogICAgaWYgKCFteVVybCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgb3duIHVybCAobXlVcmwpIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFzeW5jaGVyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzeW5jaGVyIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWd1cmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgIHRoaXMuX2RvbWFpbiA9IHRoaXMuX2RpdmlkZVVSTChteVVybClbImRvbWFpbiJdOwogICAgdGhpcy5fb2JqZWN0RGVzY1VSTCA9ICdoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4nICsgdGhpcy5fZG9tYWluICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0Nvbm5lY3Rpb24nOwoKICAgIHRoaXMuX215VXJsID0gbXlVcmw7CiAgICB0aGlzLl9zeW5jaGVyID0gc3luY2hlcjsKICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwogICAgdGhpcy5fY2FsbGVyID0gY2FsbGVyOwogICAgdGhpcy5fZGF0YU9iamVjdE9ic2VydmVyOwogICAgdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyOwogICAgdGhpcy5fcGVlclVybDsKICAgIHRoaXMuX2RhdGFDaGFubmVsOwogICAgdGhpcy5fb25TdGF0dXNVcGRhdGU7CgogICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSB0aGlzLl9jcmVhdGVQZWVyQ29ubmVjdGlvbigpOwogIH0KCiAgLy9jcmVhdGUgYSBwZWVyIGNvbm5lY3Rpb24gd2l0aCBpdHMgZXZlbnQgaGFuZGxlcnMKCgogIF9jcmVhdGVDbGFzcyhDb25uZWN0aW9uQ29udHJvbGxlciwgW3sKICAgIGtleTogJ19jcmVhdGVQZWVyQ29ubmVjdGlvbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZVBlZXJDb25uZWN0aW9uKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHBjID0gdGhpcy5fcGVlckNvbm5lY3Rpb247CiAgICAgIGlmICghcGMpIHsKICAgICAgICBwYyA9IG5ldyBSVENQZWVyQ29ubmVjdGlvbih0aGlzLl9jb25maWd1cmF0aW9uKTsKICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IGNyZWF0ZWQgUGVlckNvbm5lY3Rpb24iKTsKCiAgICAgICAgLy8gYWRkIGhhbmRsZXIgZm9yIGRhdGFjaGFubmVsIGNyZWF0aW9uIGZyb20gcGVlciBzaWRlCiAgICAgICAgcGMub25kYXRhY2hhbm5lbCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiBvbmRhdGFjaGFubmVsIC0+IHJlbW90ZSBzaWRlIGhhcyBjcmVhdGVkIGEgZGF0YWNoYW5uZWwiKTsKICAgICAgICAgIF90aGlzLl9kYXRhQ2hhbm5lbCA9IGV2ZW50LmNoYW5uZWw7CiAgICAgICAgICBfdGhpcy5fYWRkRGF0YUNoYW5uZWxMaXN0ZW5lcnMoKTsKICAgICAgICB9OwoKICAgICAgICAvLyBldmVudCBoYW5kbGVyIGZvciBsb2NhbCBpY2UgY2FuZGlkYXRlcwogICAgICAgIHBjLm9uaWNlY2FuZGlkYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogaWNlY2FuZGlkYXRlZXZlbnQgb2NjdXJlZDogIiwgZSk7CiAgICAgICAgICBpZiAoIWUuY2FuZGlkYXRlKSByZXR1cm47CiAgICAgICAgICB2YXIgaWNlY2FuZGlkYXRlID0gewogICAgICAgICAgICB0eXBlOiAnY2FuZGlkYXRlJywKICAgICAgICAgICAgY2FuZGlkYXRlOiBlLmNhbmRpZGF0ZS5jYW5kaWRhdGUsCiAgICAgICAgICAgIHNkcE1pZDogZS5jYW5kaWRhdGUuc2RwTWlkLAogICAgICAgICAgICBzZHBNTGluZUluZGV4OiBlLmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4CiAgICAgICAgICB9OwogICAgICAgICAgLy8gc2VuZCBjYW5kaWRhdGUgdG8gcmVtb3RlIHBlZXIgYnkgcHVzaGluZyBpdCB0byB0aGUgcmVwb3J0ZXIgb2JqZWN0CiAgICAgICAgICBfdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyLmRhdGEuaWNlQ2FuZGlkYXRlcy5wdXNoKGljZWNhbmRpZGF0ZSk7CiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gcGM7CiAgICB9CgogICAgLyoqDQogICAgUmVhY3QgdG8gdGhlIGdpdmVuIGludml0YXRpb24gZXZlbnQgYnkgc3Vic2NyaWJpbmcgdG8gdGhlIHByb3ZpZGVkIGludml0YXRpb25FdmVudC51cmwuDQogICAgKiovCgogIH0sIHsKICAgIGtleTogJ29ic2VydmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmUoaW52aXRhdGlvbkV2ZW50KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5fcGVlclVybCA9IGludml0YXRpb25FdmVudC5mcm9tOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgX3RoaXMyLl9zeW5jaGVyLnN1YnNjcmliZShfdGhpczIuX29iamVjdERlc2NVUkwsIGludml0YXRpb25FdmVudC51cmwpLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RPYnNlcnZlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCcrW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gZ290IERhdGEgT2JqZWN0IE9ic2VydmVyJywgZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgICAgIF90aGlzMi5fc2V0dXBPYnNlcnZlcihkYXRhT2JqZWN0T2JzZXJ2ZXIpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZWFzb24pIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgICAgIHJlamVjdCgpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICBDcmVhdGVzIGEgc3luY2hlciBvYmplY3QgYW5kIGludml0ZSB0aGUgZ2l2ZW4gcGVlclVybCB0byBzdWJzY3JpYmUgZm9yIGl0Lg0KICAgIEFsc28gY3JlYXRlcyB0aGUgbG9jYWwgb2ZmZXIsIHBlcmZvcm1zIHNldExvY2FsRGVzY3JpcHRpb24gYW5kIHB1Ymxpc2hlcyB0aGUgb2ZmZXIgdmlhIHRoZSByZXBvcnRlciBvYmplY3QuDQogICAgKiovCgogIH0sIHsKICAgIGtleTogJ3JlcG9ydCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwb3J0KHBlZXJVcmwsIG93blJ1bnRpbWVVcmwpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuX3BlZXJVcmwpIHRoaXMuX3BlZXJVcmwgPSBwZWVyVXJsOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvLyAgaWYgd2UgYXJlIHRoZSBjYWxsZXIgKGkuZS4gbm8gcmVwb3J0ZXIgb2JqZWN0IHByZXNlbnQgeWV0LCBpbml0YWxpemUgdGhlIGNyZWF0aW9uIG9mIHRoZSBEYXRhQ2hhbm5lbCkKICAgICAgICBpZiAoX3RoaXMzLl9jYWxsZXIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogd2UgYXJlIGluIGNhbGxlciByb2xlIC0tPiBjcmVhdGVEYXRhQ2hhbm5lbCAuLi4iKTsKICAgICAgICAgIF90aGlzMy5fZGF0YUNoYW5uZWwgPSBfdGhpczMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCJQMlBDaGFubmVsIiwgeyByZWxpYWJsZTogZmFsc2UgfSk7CiAgICAgICAgICBjb25zb2xlLmxvZygiUDJQOiBkYXRhY2hhbm5lbCBvYmplY3QiLCBfdGhpczMuX2RhdGFDaGFubmVsKTsKICAgICAgICAgIF90aGlzMy5fYWRkRGF0YUNoYW5uZWxMaXN0ZW5lcnMoKTsKICAgICAgICB9CgogICAgICAgIC8vIGluaXRpYWwgZGF0YSBmb3IgcmVwb3J0ZXIgc3luYyBvYmplY3QKICAgICAgICB2YXIgZGF0YU9iamVjdCA9IHsKICAgICAgICAgIG5hbWU6ICJQMlBDb25uZWN0aW9uIiwKICAgICAgICAgIHN0YXR1czogIiIsCiAgICAgICAgICBvd25lcjogX3RoaXMzLl9teVVybCwKICAgICAgICAgIHJ1bnRpbWVVUkw6IG93blJ1bnRpbWVVcmwsIC8vIHB1dCB0aGUgb3duIHJ1bnRpbWVVUkwgdG8gdGhlIGRhdGFPYmplY3QgKGFzIGRpc2N1c3NlZCB3aXRoIFBhdWxvKQogICAgICAgICAgY29ubmVjdGlvbkRlc2NyaXB0aW9uOiB7fSwKICAgICAgICAgIGljZUNhbmRpZGF0ZXM6IFtdCiAgICAgICAgfTsKICAgICAgICAvLyBlbnN1cmUgdGhpcyB0aGUgb2JqUmVwb3J0ZXIgb2JqZWN0IGlzIGNyZWF0ZWQgYmVmb3JlIHdlIGNyZWF0ZSB0aGUgb2ZmZXIKICAgICAgICBfdGhpczMuX3N5bmNoZXIuY3JlYXRlKF90aGlzMy5fb2JqZWN0RGVzY1VSTCwgW190aGlzMy5fcGVlclVybF0sIGRhdGFPYmplY3QpLnRoZW4oZnVuY3Rpb24gKG9ialJlcG9ydGVyKSB7CiAgICAgICAgICBjb25zb2xlLmluZm8oJ1tQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIENyZWF0ZWQgV2ViUlRDIE9iamVjdCBSZXBvcnRlcicsIG9ialJlcG9ydGVyKTsKCiAgICAgICAgICBfdGhpczMuX2RhdGFPYmplY3RSZXBvcnRlciA9IG9ialJlcG9ydGVyOwogICAgICAgICAgX3RoaXMzLl9kYXRhT2JqZWN0UmVwb3J0ZXIub25TdWJzY3JpcHRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIGV2ZW50LmFjY2VwdCgpOyAvLyBhbGwgc3Vic2NyaXB0aW9uIHJlcXVlc3RlZCBhcmUgYWNjZXB0ZWQKICAgICAgICAgIH0pOwoKICAgICAgICAgIHZhciBjb25zdHJhaW50cyA9IHsKICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogZmFsc2UsCiAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlVmlkZW86IGZhbHNlCiAgICAgICAgICB9OwogICAgICAgICAgLy8gZWl0aGVyIGludm9rZSBjcmVhdGVPZmZlciBvciBjcmVhdGVBbnN3ZXIsIGRlcGVuZGluZyBvbiB0aGUgcm9sZXMKICAgICAgICAgIHZhciBzZHBQcm9taXNlID0gX3RoaXMzLl9jYWxsZXIgPyBfdGhpczMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKGNvbnN0cmFpbnRzKSA6IF90aGlzMy5fcGVlckNvbm5lY3Rpb24uY3JlYXRlQW5zd2VyKCk7CiAgICAgICAgICBzZHBQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHNkcCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gU0RQIGNyZWF0ZWQiLCBzZHApOwogICAgICAgICAgICBfdGhpczMuX3BlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihzZHApLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSBsb2NhbERlc2NyaXB0aW9uIHNldCBzdWNjZXNzZnVsbHknKTsKICAgICAgICAgICAgICBfdGhpczMuX2RhdGFPYmplY3RSZXBvcnRlci5kYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbiA9IHNkcDsKICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmVqZWN0KCJzZXR0aW5nIG9mIGxvY2FsRGVzY3JpcHRpb24gZmFpbGVkOiAiLCBlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTsKICAgICAgICAgICAgcmVqZWN0KHJlYXNvbik7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnb25NZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbk1lc3NhZ2UoY2FsbGJhY2spIHsKICAgICAgLy8gYWRkIHRoZSBtZXNzYWdlIGNhbGxiYWNrCiAgICAgIHRoaXMuX29uRGF0YUNoYW5uZWxNZXNzYWdlID0gY2FsbGJhY2s7CiAgICB9CiAgfSwgewogICAga2V5OiAnb25TdGF0dXNVcGRhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3RhdHVzVXBkYXRlKGNhbGxiYWNrKSB7CiAgICAgIC8vIGFkZCBhIGNvbm5lY3Rpb24gc3RhdHVzIHVwZGF0ZSBjYWxsYmFjawogICAgICB0aGlzLl9vblN0YXR1c1VwZGF0ZSA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ3NlbmRNZXNzYWdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kTWVzc2FnZShtKSB7CiAgICAgIC8vIHRvZG86IG9ubHkgc2VuZCBpZiBkYXRhIGNoYW5uZWxkIGlzIGNvbm5lY3RlZAogICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gLS0+IG91dGdvaW5nIG1zZzogIiwgbSk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLnNlbmQobSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnY2xlYW51cCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RSZXBvcnRlcjsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RPYnNlcnZlcjsKICAgICAgaWYgKHRoaXMuX2RhdGFDaGFubmVsKSB0aGlzLl9kYXRhQ2hhbm5lbC5jbG9zZSgpOwogICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24pIHRoaXMuX3BlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsID0gbnVsbDsKICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogJ19hZGREYXRhQ2hhbm5lbExpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxPcGVuKCk7CiAgICAgIH07CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5fb25EYXRhQ2hhbm5lbEVycm9yKGUpOwogICAgICB9OwogICAgICB0aGlzLl9kYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobSkgewogICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSA8LS0gaW5jb21pbmcgbXNnOiAiLCBtKTsKICAgICAgICBpZiAoX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZSkgX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZShtKTsKICAgICAgfTsKICAgICAgdGhpcy5fZGF0YUNoYW5uZWwub25jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxDbG9zZSgpOwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZXR1cE9ic2VydmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBPYnNlcnZlcihkYXRhT2JqZWN0T2JzZXJ2ZXIpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CgogICAgICB2YXIgcGVlckRhdGEgPSB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIuZGF0YTsKICAgICAgY29uc29sZS5pbmZvKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogX3NldHVwT2JzZXJ2ZXIgUGVlciBEYXRhOiIsIHBlZXJEYXRhKTsKCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnY29ubmVjdGlvbkRlc2NyaXB0aW9uJykpIHsKICAgICAgICB0aGlzLl9wcm9jZXNzUGVlckluZm9ybWF0aW9uKHBlZXJEYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnaWNlQ2FuZGlkYXRlcycpKSB7CiAgICAgICAgcGVlckRhdGEuaWNlQ2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpY2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogaGFuZGxlT2JzZXJ2ZXJPYmplY3QgZm9yIGljZSIsIGljZSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oaWNlKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gc2V0dXAgbGlzdGVuZXIgZm9yIGZ1dHVyZSBjaGFuZ2VzIG9uIHRoZSBvYnNlcnZlZCBkYXRhIG9iamVjdAogICAgICBkYXRhT2JqZWN0T2JzZXJ2ZXIub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogT2JzZXJ2ZXIgb24gY2hhbmdlIG1lc3NhZ2U6ICcsIGV2ZW50KTsKICAgICAgICAvLyB3ZSBuZWVkIHRvIHByb2Nlc3MgdGhlIGFuc3dlciBmcm9tIGV2ZW50LmRhdGEgYW5kIHRoZSBjYW5kaWRhdGVzIHdoaWNoIG1pZ2h0IHRyaWNrbGUKICAgICAgICAvLyBmcm9tIGV2ZW50LmRhdGFbMF0KICAgICAgICBpZiAoZXZlbnQuZGF0YVswXSkgewogICAgICAgICAgLy8gWzBdIHRoaXMgZG9lcyB0aGUgdHJpY2sgd2hlbiBpY2UgY2FuZGlkYXRlcyBhcmUgdHJpY2tsaW5nIDspCiAgICAgICAgICBjb25zb2xlLmxvZygnPj5ldmVudC5kYXRhWzBdJywgZXZlbnQuZGF0YVswXSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oZXZlbnQuZGF0YVswXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogPj5ldmVudCcsIGV2ZW50KTsKICAgICAgICAgIF90aGlzNS5fcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihldmVudC5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19wcm9jZXNzUGVlckluZm9ybWF0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihkYXRhKSB7CiAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246ICIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgaWYgKCF0aGlzLl9wZWVyQ29ubmVjdGlvbikgewogICAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246IG5vIFBlZXJDb25uZWN0aW9uIGV4aXN0aW5nIC0tPiBtYXliZSBpbiBkaXNjb25uZWN0aW5nIHByb2Nlc3MuIC0tPiBpZ25vcmluZyB0aGlzIHVwZGF0ZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ29mZmVyJyB8fCBkYXRhLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogUHJvY2VzcyBDb25uZWN0aW9uIERlc2NyaXB0aW9uOiAnLCBkYXRhKTsKICAgICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogcmVtb3RlIHN1Y2Nlc3MiKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiByZW1vdGUgZXJyb3I6ICIsIGUpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoZGF0YS5jYW5kaWRhdGUpIHsKICAgICAgICBjb25zb2xlLmluZm8oJ1Byb2Nlc3MgSWNlIENhbmRpZGF0ZTogJywgZGF0YSk7CiAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUoewogICAgICAgICAgY2FuZGlkYXRlOiBkYXRhLmNhbmRpZGF0ZQogICAgICAgIH0pKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsT3BlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRGF0YUNoYW5uZWxPcGVuKCkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgb3BlbmVkJyk7CiAgICAgIGlmICh0aGlzLl9vblN0YXR1c1VwZGF0ZSkgdGhpcy5fb25TdGF0dXNVcGRhdGUoImxpdmUiKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25EYXRhQ2hhbm5lbEVycm9yJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25EYXRhQ2hhbm5lbEVycm9yKGUpIHsKICAgICAgY29uc29sZS5sb2coJ1tQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIERhdGFDaGFubmVsIGVycm9yOiAnLCBlKTsKICAgICAgaWYgKHRoaXMuX29uU3RhdHVzVXBkYXRlKSB0aGlzLl9vblN0YXR1c1VwZGF0ZSgiZGlzY29ubmVjdGVkIiwgIiIgKyBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25EYXRhQ2hhbm5lbENsb3NlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25EYXRhQ2hhbm5lbENsb3NlKCkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgY2xvc2VkOiAnKTsKICAgICAgaWYgKHRoaXMuX29uU3RhdHVzVXBkYXRlKSB0aGlzLl9vblN0YXR1c1VwZGF0ZSgiZGlzY29ubmVjdGVkIiwgImNsb3NlZCIpOwogICAgfQoKICAgIC8qKg0KICAgICAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQ0KICAgICAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzDQogICAgICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfZGl2aWRlVVJMJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGl2aWRlVVJMKHVybCkgewoKICAgICAgLy8gbGV0IHJlID0gLyhbYS16QS1aLV0qKT86XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn1cLlthLXpdezIsNn1cYikqKFwvW1wvXGRcd1wuLV0qKSooPzpbXD9dKSooLispKi9naTsKICAgICAgdmFyIHJlID0gLyhbYS16QS1aLV0qKTpcL1wvKD86XC4pPyhbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7CiAgICAgIHZhciBzdWJzdCA9ICckMSwkMiwkMyc7CiAgICAgIHZhciBwYXJ0cyA9IHVybC5yZXBsYWNlKHJlLCBzdWJzdCkuc3BsaXQoJywnKTsKCiAgICAgIC8vIElmIHRoZSB1cmwgaGFzIG5vIHByb3RvY29sLCB0aGUgZGVmYXVsdCBwcm90b2NvbCBzZXQgaXMgaHR0cHMKICAgICAgaWYgKHBhcnRzWzBdID09PSB1cmwpIHsKICAgICAgICBwYXJ0c1swXSA9ICdodHRwcyc7CiAgICAgICAgcGFydHNbMV0gPSB1cmw7CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHQgPSB7CiAgICAgICAgdHlwZTogcGFydHNbMF0sCiAgICAgICAgZG9tYWluOiBwYXJ0c1sxXSwKICAgICAgICBpZGVudGl0eTogcGFydHNbMl0KICAgICAgfTsKCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQ29ubmVjdGlvbkNvbnRyb2xsZXI7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IENvbm5lY3Rpb25Db250cm9sbGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyJ3ZWJydGMtYWRhcHRlciI6M31dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7Ci8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLwoKZXhwb3J0cy5kZWZhdWx0ID0gYWN0aXZhdGU7Cgp2YXIgX1N5bmNoZXIgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXInKTsKCnZhciBfQ29ubmVjdGlvbkNvbnRyb2xsZXIgPSByZXF1aXJlKCcuL0Nvbm5lY3Rpb25Db250cm9sbGVyJyk7Cgp2YXIgX0Nvbm5lY3Rpb25Db250cm9sbGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Nvbm5lY3Rpb25Db250cm9sbGVyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8vIFRPRE86IGludGVncmF0ZSB0aGUgc3RhdHVzIGV2ZW50aW5nCgovKioNCiAqIFByb3RvU3R1YiBJbnRlcmZhY2UNCiAqLwp2YXIgUDJQUmVxdWVzdGVyU3R1YiA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqDQogICAqIEluaXRpYWxpc2UgdGhlIHByb3RvY29sIHN0dWIgaW5jbHVkaW5nIGFzIGlucHV0IHBhcmFtZXRlcnMgaXRzIGFsbG9jYXRlZA0KICAgKiBjb21wb25lbnQgcnVudGltZSB1cmwsIHRoZSBydW50aW1lIEJVUyBwb3N0TWVzc2FnZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkDQogICAqIG9uIG1lc3NhZ2VzIHJlY2VpdmVkIGJ5IHRoZSBwcm90b2NvbCBzdHViIGFuZCByZXF1aXJlZCBjb25maWd1cmF0aW9uIHJldHJpZXZlZCBmcm9tIHByb3RvY29sU3R1YiBkZXNjcmlwdG9yLg0KICAgKiBAcGFyYW0gIHtVUkwucnVudGltZVByb3RvU3R1YlVSTH0gICAgICAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCBydW50aW1lUHJvdG9TdWJVUkwNCiAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uDQogICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbg0KICAgKi8KICBmdW5jdGlvbiBQMlBSZXF1ZXN0ZXJTdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIG1pbmlCdXMsIGNvbmZpZ3VyYXRpb24pIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFAyUFJlcXVlc3RlclN0dWIpOwoKICAgIGlmICghcnVudGltZVByb3RvU3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgcnVudGltZVByb3RvU3R1YlVSTCBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFtaW5pQnVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBidXMgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghY29uZmlndXJhdGlvbikgdGhyb3cgbmV3IEVycm9yKCdUaGUgY29uZmlndXJhdGlvbiBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpOwogICAgLy8gaWYgKCFjb25maWd1cmF0aW9uLnAycEhhbmRsZXIpIHRocm93IG5ldyBFcnJvcignVGhlIHAycEhhbmRsZXIgaXMgYSByZXF1aXJlZCBhdHRyaWJ1dGUgaW4gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyJyk7CgogICAgY29uc29sZS5sb2coJytbUDJQUmVxdWVzdGVyU3R1Yl0gZGVwbG95ZWQgJywgcnVudGltZVByb3RvU3R1YlVSTCk7CgogICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICB0aGlzLl9ydW50aW1lVVJMID0gY29uZmlndXJhdGlvbi5ydW50aW1lVVJMOwogICAgdGhpcy5fY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247CiAgICB0aGlzLl9idXMgPSBtaW5pQnVzOwogICAgdGhpcy5fYnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICBfdGhpcy5fc2VuZENoYW5uZWxNc2cobXNnKTsKICAgIH0pOwoKICAgIHRoaXMuX3N5bmNoZXIgPSBuZXcgX1N5bmNoZXIuU3luY2hlcihydW50aW1lUHJvdG9TdHViVVJMLCBtaW5pQnVzLCBjb25maWd1cmF0aW9uKTsKICAgIHRoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyID0gbmV3IF9Db25uZWN0aW9uQ29udHJvbGxlcjIuZGVmYXVsdCh0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMLCB0aGlzLl9zeW5jaGVyLCB0aGlzLl9jb25maWd1cmF0aW9uLCB0cnVlKTsKICAgIHRoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyLm9uU3RhdHVzVXBkYXRlKGZ1bmN0aW9uIChzdGF0dXMsIHJlYXNvbikgewogICAgICBfdGhpcy5fc2VuZFN0YXR1cyhzdGF0dXMsIHJlYXNvbik7CiAgICB9KTsKCiAgICB0aGlzLl9zeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnK1tQMlBSZXF1ZXN0ZXJTdHViXSBPbiBTeW5jaGVyIE5vdGlmaWNhdGlvbjogJywgZXZlbnQpOwogICAgICBldmVudC5hY2soMjAwKTsKCiAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkgewoKICAgICAgICBjYXNlICdjcmVhdGUnOgogICAgICAgICAgLy8gaW5jb21pbmcgb2JzZXJ2ZSBpbnZpdGF0aW9uIGZyb20gcGVlcgogICAgICAgICAgaWYgKF90aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcikgewogICAgICAgICAgICBfdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXIub2JzZXJ2ZShldmVudCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIitbUDJQUmVxdWVzdGVyU3R1Yl0gb2JzZXJ2ZXIgY3JlYXRlZCAiKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnZGVsZXRlJzoKICAgICAgICAgIC8vIFRPRE86IHF1ZXN0aW9uIHJlZ2FyZGluZyBjb2RlIGluIENvbm5lY3RvcjogLS0+IHRoZXJlIGl0IGRlbGV0ZXMgYWxsIGNvbnRyb2xsZXJzIC0tPiB3aHk/CiAgICAgICAgICBjb25zb2xlLmxvZygiK1tQMlBSZXF1ZXN0ZXJTdHViXSBkZWxldGluZyBjb25uZWN0aW9uIGhhbmRsZXIgZm9yICIgKyBldmVudC5mcm9tKTsKCiAgICAgICAgICBkaXNjb25uZWN0KCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgfQogICAgfSk7CgogICAgLy8gdGhlIHRhcmdldCBoYW5kbGVyIHN0dWIgdXJsIG11c3QgYmUgcHJlc2VudCBpbiB0aGUgY29uZmlndXJhdGlvbiBhcyAicDJwSGFuZGxlciIgYXR0cmlidXRlCiAgICBpZiAodGhpcy5fY29uZmlndXJhdGlvbi5wMnBIYW5kbGVyKSB0aGlzLmNvbm5lY3QodGhpcy5fY29uZmlndXJhdGlvbi5wMnBIYW5kbGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhQMlBSZXF1ZXN0ZXJTdHViLCBbewogICAga2V5OiAnY29ubmVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdChoYW5kbGVyVVJMKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXIucmVwb3J0KGhhbmRsZXJVUkwsIHRoaXMuX3J1bnRpbWVVUkwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5fY29ubmVjdGlvbkNvbnRyb2xsZXIub25NZXNzYWdlKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICBfdGhpczIuX2RlbGl2ZXIobSk7CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coIitbUDJQUmVxdWVzdGVyU3R1Yl0gc2V0dXAgcmVwb3J0ZXIgb2JqZWN0IHN1Y2Nlc3NmdWxseSIpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBUbyBkaXNjb25uZWN0IHRoZSBwcm90b2NvbCBzdHViLg0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkaXNjb25uZWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0KCkgewogICAgICBpZiAodGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXIpIHsKICAgICAgICB0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlci5jbGVhbnVwKCk7CiAgICAgICAgdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXIgPSBudWxsOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRDaGFubmVsTXNnJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZENoYW5uZWxNc2cobXNnKSB7CiAgICAgIGlmICh0aGlzLl9maWx0ZXIobXNnKSkgewogICAgICAgIGlmICh0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcikgewogICAgICAgICAgdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXIuc2VuZE1lc3NhZ2UoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRTdGF0dXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAndXBkYXRlJywKICAgICAgICBmcm9tOiB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMLAogICAgICAgIHRvOiB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLAogICAgICAgIGJvZHk6IHsKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKHJlYXNvbikgewogICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CiAgICAgIH0KICAgICAgdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CgogICAgLyoqDQogICAgICogRmlsdGVyIG1ldGhvZCB0aGF0IHNob3VsZCBiZSB1c2VkIGZvciBldmVyeSBtZXNzYWdlcyBpbiBkaXJlY3Rpb246IFByb3Rvc3R1YiAtPiBNZXNzYWdlTm9kZQ0KICAgICAqIEBwYXJhbSAge01lc3NhZ2V9IG1zZyBPcmlnaW5hbCBtZXNzYWdlIGZyb20gdGhlIE1lc3NhZ2VCdXMNCiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIGl0J3MgdG8gYmUgZGVsaXZlciBpbiB0aGUgTWVzc2FnZU5vZGUNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX2ZpbHRlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbHRlcihtc2cpIHsKICAgICAgaWYgKG1zZy5ib2R5ICYmIG1zZy5ib2R5LnZpYSA9PT0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBNZXRob2QgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBkZWxpdmVyIHRoZSBtZXNzYWdlIGluIGRpcmVjdGlvbjogUHJvdG9zdHViIC0+IE1lc3NhZ2VCdXMgKGNvcmUpDQogICAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnIE9yaWdpbmFsIG1lc3NhZ2UgZnJvbSB0aGUgTWVzc2FnZU5vZGUNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX2RlbGl2ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxpdmVyKG1zZykgewogICAgICBpZiAoIW1zZy5ib2R5KSBtc2cuYm9keSA9IHt9OwoKICAgICAgbXNnLmJvZHkudmlhID0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUDJQUmVxdWVzdGVyU3R1YjsKfSgpOwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnUDJQUmVxdWVzdGVyU3R1YicsCiAgICBpbnN0YW5jZTogbmV3IFAyUFJlcXVlc3RlclN0dWIodXJsLCBidXMsIGNvbmZpZykKICB9Owp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vQ29ubmVjdGlvbkNvbnRyb2xsZXIiOjEyLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjJ9XX0se30sWzEzXSkoMTMpCn0pOw==",
      "sourceCodeClassname": "P2PRequesterProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-aaf84b28-7f8b-b2e6-93d7-4784864cd37b3",
    "version": 0.6,
    "description": "Description of P2PRequesterProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "P2PRequesterProtoStub",
    "configuration": {
      "iceServers": [
        {
          "urls": "stun:stun.voiparound.com"
        },
        {
          "urls": "stun:stun.voipbuster.com"
        },
        {
          "urls": "stun:stun.voipstunt.com"
        },
        {
          "urls": "stun:stun.voxgratia.org"
        },
        {
          "urls": "stun:stun.ekiga.net"
        },
        {
          "urls": "stun:stun.schlund.de"
        },
        {
          "urls": "stun:stun.iptel.org"
        },
        {
          "urls": "stun:stun.l.google.com:19302"
        },
        {
          "urls": "stun:stun1.l.google.com:19302"
        },
        {
          "urls": "stun:stun.ideasip.com"
        },
        {
          "urls": "stun:stun4.l.google.com:19302"
        },
        {
          "urls": "stun:stun2.l.google.com:19302"
        },
        {
          "urls": "stun:stun3.l.google.com:19302"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=tcp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=udp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:numb.viagenie.ca",
          "credential": "muazkh",
          "username": "webrtc@live.com"
        }
      ]
    },
    "messageSchemas": "",
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": "",
    "interworking": false
  },
  "slack.slack.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiYWN0aXZhdGUiLCBbXSwgZmFjdG9yeSk7CgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQlleHBvcnRzWyJhY3RpdmF0ZSJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbImFjdGl2YXRlIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewoKLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CgovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlleHBvcnRzOiB7fSwKLyoqKioqKi8gCQkJaWQ6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsb2FkZWQ6IGZhbHNlCi8qKioqKiovIAkJfTsKCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CgovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKLyoqKioqKi8gCQltb2R1bGUubG9hZGVkID0gdHJ1ZTsKCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9CgoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoKLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCglleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCgl2YXIgX3NsYWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCgl2YXIgX3NsYWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NsYWNrKTsKCgl2YXIgX1N5bmNoZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OCk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCgl2YXIgU2xhY2tQcm90b1N0dWIgPSBmdW5jdGlvbiAoKSB7CgkgIGZ1bmN0aW9uIFNsYWNrUHJvdG9TdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnKSB7CgkgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsYWNrUHJvdG9TdHViKTsKCgkgICAgaWYgKCFydW50aW1lUHJvdG9TdHViVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBydW50aW1lUHJvdG9TdHViVVJMIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoJICAgIGlmICghYnVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBidXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgkgICAgaWYgKCFjb25maWcpIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCgkgICAgY29uc29sZS5sb2coJ09OIFBST1RPU1RVQjogQ29uc3RydWN0b3IgTG9hZGVkJyk7CgoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgIHRoaXMuX3N1YnNjcmliZWRMaXN0ID0gW107CgkgICAgdGhpcy5fdXNlcnNMaXN0ID0gW107CgkgICAgdGhpcy5fZ3JvdXBzTGlzdCA9IFtdOwoJICAgIHRoaXMuX2NoYW5uZWxzTGlzdCA9IFtdOwoJICAgIHRoaXMuX2ltc0xpc3QgPSBbXTsKCSAgICB0aGlzLl9vYnNlcnZlcjsKCSAgICB0aGlzLl9jaGFubmVsSUQgPSAnJzsKCSAgICB0aGlzLl9pZCA9IDA7CgkgICAgdGhpcy5fY29udGludW91c09wZW4gPSB0cnVlOwoJICAgIHRoaXMuX3Rva2VuID0gJyc7CgoJICAgIHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgPSBydW50aW1lUHJvdG9TdHViVVJMOwoJICAgIHRoaXMuX2J1cyA9IGJ1czsKCSAgICB0aGlzLl9jb25maWcgPSBjb25maWc7CgoJICAgIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gY29uZmlnLnJ1bnRpbWVVUkw7CgkgICAgdGhpcy5fcmVPcGVuID0gZmFsc2U7CgkgICAgdGhpcy5fc2xhY2sgPSBfc2xhY2syLmRlZmF1bHQ7CgkgICAgY29uc29sZS5sb2coJ09OIFBST1RPU1RVQiAtICBpbnN0YXRpYXRlIHN5bmNoZXIgd2l0aCB1cmwnLCBydW50aW1lUHJvdG9TdHViVVJMKTsKCSAgICB0aGlzLl9zeW5jaGVyID0gbmV3IF9TeW5jaGVyLlN5bmNoZXIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpOwoKCSAgICB0aGlzLl9zeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uIChldmVudCkgewoJICAgICAgY29uc29sZS5sb2coJ09OIFBST1RPU1RVQiAtIE9uIFN5bmNoZXIgTm90aWZpY2F0aW9uOiAnLCBldmVudCk7CgkgICAgfSk7CgoJICAgIGJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKCSAgICAgIGNvbnNvbGUubG9nKCdPTiBQUk9UT1NUVUIgLT4nLCBtc2cpOwoJICAgICAgaWYgKG1zZy5ib2R5LmlkZW50aXR5KSB7CgkgICAgICAgIChmdW5jdGlvbiAoKSB7CgoJICAgICAgICAgIHZhciB0b2tlbiA9IG1zZy5ib2R5LmlkZW50aXR5OwoJICAgICAgICAgIF90aGlzLl9vcGVuKG1zZy5ib2R5LmlkZW50aXR5LCBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAoX3RoaXMuX2ZpbHRlcihtc2cpKSB7CgkgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPTiBQUk9UT1NUVUIgLSBBRlRFUiBGSUxURVItPicsIG1zZyk7CgkgICAgICAgICAgICAgIHZhciBzY2hlbWFVcmwgPSBtc2cuYm9keS5zY2hlbWE7CgkgICAgICAgICAgICAgIGlmIChzY2hlbWFVcmwgJiYgbXNnLmJvZHkudmFsdWUubmFtZSkgewoKCSAgICAgICAgICAgICAgICB2YXIgc2NoZW1hU3BsaXR0ZWQgPSBzY2hlbWFVcmwuc3BsaXQoJy8nKTsKCgkgICAgICAgICAgICAgICAgaWYgKHNjaGVtYVNwbGl0dGVkW3NjaGVtYVNwbGl0dGVkLmxlbmd0aCAtIDFdID09PSAnQ29tbXVuaWNhdGlvbicpIHsKCSAgICAgICAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmUoc2NoZW1hVXJsLCBtc2cuZnJvbSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CgkgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPTiBQUk9UT1NUVUIgLSBJUyBJVCBzdWJzY3JpYmVkLT4nLCByZXN1bHQpOwoJICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3Rva2VuID0gdG9rZW47CgoJICAgICAgICAgICAgICAgICAgICAgIHZhciBVUkxVc2Vyc0xpc3QgPSAnaHR0cHM6Ly9zbGFjay5jb20vYXBpL3VzZXJzLmxpc3Q/dG9rZW49JyArIF90aGlzLl90b2tlbjsKCSAgICAgICAgICAgICAgICAgICAgICB2YXIgVVJMR3JvdXBzTGlzdCA9ICdodHRwczovL3NsYWNrLmNvbS9hcGkvZ3JvdXBzLmxpc3Q/dG9rZW49JyArIF90aGlzLl90b2tlbjsKCSAgICAgICAgICAgICAgICAgICAgICB2YXIgVVJMQ2hhbm5lbHNMaXN0ID0gJ2h0dHBzOi8vc2xhY2suY29tL2FwaS9jaGFubmVscy5saXN0P3Rva2VuPScgKyBfdGhpcy5fdG9rZW47CgkgICAgICAgICAgICAgICAgICAgICAgdmFyIFVSTEltc0xpc3QgPSAnaHR0cHM6Ly9zbGFjay5jb20vYXBpL2ltLmxpc3Q/dG9rZW49JyArIF90aGlzLl90b2tlbjsKCgkgICAgICAgICAgICAgICAgICAgICAgdmFyIFVzZXJzTGlzdFByb21pc2UgPSBfdGhpcy5fc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBVUkxVc2Vyc0xpc3QpOwoJICAgICAgICAgICAgICAgICAgICAgIHZhciBHcm91cHNMaXN0UHJvbWlzZSA9IF90aGlzLl9zZW5kSFRUUFJlcXVlc3QoJ0dFVCcsIFVSTEdyb3Vwc0xpc3QpOwoJICAgICAgICAgICAgICAgICAgICAgIHZhciBDaGFubmVsc0xpc3RQcm9taXNlID0gX3RoaXMuX3NlbmRIVFRQUmVxdWVzdCgnR0VUJywgVVJMQ2hhbm5lbHNMaXN0KTsKCSAgICAgICAgICAgICAgICAgICAgICB2YXIgSW1zTGlzdFByb21pc2UgPSBfdGhpcy5fc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBVUkxJbXNMaXN0KTsKCgkgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1VzZXJzTGlzdFByb21pc2UsIEdyb3Vwc0xpc3RQcm9taXNlLCBDaGFubmVsc0xpc3RQcm9taXNlLCBJbXNMaXN0UHJvbWlzZV0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3VzZXJzTGlzdCA9IHJlc3VsdFswXS5tZW1iZXJzOwoJICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2dyb3Vwc0xpc3QgPSByZXN1bHRbMV0uZ3JvdXBzOwoJICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5uZWxzTGlzdCA9IHJlc3VsdFsyXS5jaGFubmVsczsKCSAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9pbXNMaXN0ID0gcmVzdWx0WzNdLmltczsKCgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbEFscmVhZHlVUCA9IF90aGlzLl9jaGFubmVsc0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5uYW1lID09PSBtc2cuYm9keS52YWx1ZS5uYW1lOwoJICAgICAgICAgICAgICAgICAgICAgICAgfSlbMF07CgoJICAgICAgICAgICAgICAgICAgICAgICAgLy9nZXQgdXNlcklEIHRvIGludml0ZQoKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b1NwbGl0dGVkID0gbXNnLnRvLnNwbGl0KCc6Ly8nKVsxXTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VyID0gdG9TcGxpdHRlZC5zcGxpdCgnQCcpWzBdOwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJJRCA9IF90aGlzLl91c2Vyc0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5uYW1lID09PSB1c2VyOwoJICAgICAgICAgICAgICAgICAgICAgICAgfSlbMF0uaWQ7CgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2hhbm5lbCBleGlzdCwgaW52aXRlIHVzZXIsIGVsc2UgY2hhbm5lbCBuZWVkIHRvIGJlIGNyZWF0ZWQgYW5kIHRoZW4gaW52aXRlIHVzZXIKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFubmVsQWxyZWFkeVVQKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPTiBQUk9UT1NUVUIgLSBjaGFubmVsIGV4aXN0JywgY2hhbm5lbEFscmVhZHlVUCk7CgoJICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhbm5lbE1lbWJlcnMgPSBfdGhpcy5fY2hhbm5lbHNMaXN0LmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGtleSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5uYW1lID09PSBtc2cuYm9keS52YWx1ZS5uYW1lOwoJICAgICAgICAgICAgICAgICAgICAgICAgICB9KVswXS5tZW1iZXJzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxyZWFkeU9uQ2hhbm5lbCA9IGZhbHNlOwoKCSAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbE1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbiAocykgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID09PSB1c2VySUQpIGFscmVhZHlPbkNoYW5uZWwgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09OIFBST1RPU1RVQiAtIGNoYW5uZWwgbWVtYmVycycsIGNoYW5uZWxNZW1iZXJzLCAnICAgLT4nLCBhbHJlYWR5T25DaGFubmVsKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5T25DaGFubmVsKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvSW52aXRlID0geyB0b2tlbjogdG9rZW4sIGNoYW5uZWw6IGNoYW5uZWxBbHJlYWR5VVAuaWQsIHVzZXI6IHVzZXJJRCB9OwoKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc2xhY2suY2hhbm5lbHMuaW52aXRlKHRvSW52aXRlLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyKCdlcnJvcicsIGVycik7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fY2hhbm5lbElEID0gY2hhbm5lbEFscmVhZHlVUC5pZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09OIFBST1RPU1RVQiAtIHVzZXIgaW52aXRlZCB3aXRoIHN1Y2VzcycsIGRhdGEpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9jaGFubmVsSUQgPSBjaGFubmVsQWxyZWFkeVVQLmlkOwoJICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9DcmVhdGUgPSB7IHRva2VuOiB0b2tlbiwgbmFtZTogbXNnLmJvZHkudmFsdWUubmFtZSB9OwoJICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fc2xhY2suY2hhbm5lbHMuY3JlYXRlKHRvQ3JlYXRlLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnIoJ2Vycm9yJywgZXJyKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEub2spIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5uZWxJRCA9IGRhdGEuY2hhbm5lbC5pZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5uZWxJRCA9IGNoYW5uZWxJRDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF90b0ludml0ZSA9IHsgdG9rZW46IHRva2VuLCBjaGFubmVsOiBjaGFubmVsSUQsIHVzZXI6IHVzZXJJRCB9OwoKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3NsYWNrLmNoYW5uZWxzLmludml0ZShfdG9JbnZpdGUsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycignZXJyb3InLCBlcnIpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnT04gUFJPVE9TVFVCIC0gdXNlciBpbnZpdGVkIHdpdGggc3VjZXNzJywgZGF0YSk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewoJICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnIoZXJyb3IpOwoJICAgICAgICAgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICB9KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9KTsKCSAgICAgICAgfSkoKTsKCSAgICAgIH0KCSAgICB9KTsKCSAgfQoKCSAgX2NyZWF0ZUNsYXNzKFNsYWNrUHJvdG9TdHViLCBbewoJICAgIGtleTogJ19maWx0ZXInLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlsdGVyKG1zZykgewoJICAgICAgaWYgKG1zZy5ib2R5ICYmIG1zZy5ib2R5LnZpYSA9PT0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCkgcmV0dXJuIGZhbHNlOwoJICAgICAgcmV0dXJuIHRydWU7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX29wZW4nLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfb3Blbih0b2tlbiwgY2FsbGJhY2spIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgaWYgKCFfdGhpcy5fc2Vzc2lvbikgewoJICAgICAgICBjb25zb2xlLmxvZygnT04gUFJPVE9TVFVCIC0gbmV3IFNlc3Npb24gZm9yIHRva2VuOicsIHRva2VuKTsKCSAgICAgICAgX3RoaXMuX3Nlc3Npb24gPSBfdGhpcy5fc2xhY2sucnRtLmNsaWVudCgpOwoKCSAgICAgICAgX3RoaXMuX3Nlc3Npb24ubGlzdGVuKHsgdG9rZW46IHRva2VuIH0pOwoKCSAgICAgICAgX3RoaXMuX3Nlc3Npb24ubWVzc2FnZShmdW5jdGlvbiAobWVzc2FnZSkgewoJICAgICAgICAgIGNvbnNvbGUubG9nKCdPTiBQUk9UT1NUVUIgLSBuZXcgbWVzc2FnZSBvbiBzZXNzaW9uJywgbWVzc2FnZSk7CgkgICAgICAgICAgaWYgKG1lc3NhZ2UuY2hhbm5lbCkgewoJICAgICAgICAgICAgaWYgKG1lc3NhZ2UuY2hhbm5lbCA9PT0gX3RoaXMuX2NoYW5uZWxJRCkgewoJICAgICAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXIuYWRkQ2hpbGQoJ2NoYXRtZXNzYWdlcycsIHsgbWVzc2FnZTogbWVzc2FnZS50ZXh0IH0pOwoJICAgICAgICAgICAgfQoJICAgICAgICAgIH0KCSAgICAgICAgfSk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBjb25zb2xlLmxvZygnT04gUFJPVE9TVFVCIC0gc2Vzc2lvbiBhbHJlYWR5IGV4aXN0Jyk7CgkgICAgICB9CgkgICAgICBjYWxsYmFjaygpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ19zdWJzY3JpYmUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfc3Vic2NyaWJlKHNjaGVtYSwgdXJsRGF0YU9iaikgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKCgkgICAgICAgIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsKCSAgICAgICAgICBpZiAob2JqLnVybERhdGFPYmogPT09IHVybERhdGFPYmogJiYgb2JqLnN1YnNjcmliZWQpIHJlc29sdmUodHJ1ZSk7CgkgICAgICAgIH0pOwoKCSAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHsgdXJsRGF0YU9iajogdXJsRGF0YU9iaiwgc2NoZW1hOiBzY2hlbWEsIHN1YnNjcmliZWQ6IHRydWUgfTsKCgkgICAgICAgIHZhciBvYmplY3REZXNjVVJMID0gc2NoZW1hOwoJICAgICAgICB2YXIgZGF0YU9iamVjdFVybCA9IHVybERhdGFPYmouc3Vic3RyaW5nKDAsIHVybERhdGFPYmoubGFzdEluZGV4T2YoJy8nKSk7CgoJICAgICAgICBjb25zb2xlLmxvZygnT04gUFJPVE9TVFVCIC0gbmV3IHN1YnNjcmlwdGlvbiBmb3Igc2NoZW1hOicsIG9iamVjdERlc2NVUkwsICcgYW5kIGRhdGFPYmplY3Q6JywgZGF0YU9iamVjdFVybCk7CgoJICAgICAgICByZXR1cm4gX3RoaXMuX3N5bmNoZXIuc3Vic2NyaWJlKG9iamVjdERlc2NVUkwsIGRhdGFPYmplY3RVcmwpLnRoZW4oZnVuY3Rpb24gKG9ic2VydmVyKSB7CgkgICAgICAgICAgX3RoaXMuX29ic2VydmVyID0gb2JzZXJ2ZXI7CgkgICAgICAgICAgX3RoaXMuX3N1YnNjcmliZWRMaXN0LnB1c2goc3Vic2NyaXB0aW9uKTsKCSAgICAgICAgICBjb25zb2xlLmxvZygnT04gUFJPVE9TVFVCIC0gc3Vic2NyaWJlZCcsIGRhdGFPYmplY3RVcmwpOwoJICAgICAgICAgIGNvbnNvbGUubG9nKCdPTiBQUk9UT1NUVUIgLSBPYnNlcnZlcicsIG9ic2VydmVyKTsKCSAgICAgICAgICBvYnNlcnZlci5vbkFkZENoaWxkKGZ1bmN0aW9uIChjaGlsZCkgewoJICAgICAgICAgICAgY29uc29sZS5pbmZvKCdPTiBQUk9UT1NUVUIgLSBPYnNlcnZlciAtIEFkZCBDaGlsZDogJywgY2hpbGQpOwoJICAgICAgICAgICAgaWYgKF90aGlzLl9jaGFubmVsSUQgIT09ICcnICYmIGNoaWxkLnZhbHVlLm1lc3NhZ2UpIHsKCSAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuJywgX3RoaXMuX3Rva2VuLCAnY2hhbm5lbCcsIF90aGlzLl9jaGFubmVsSUQsICd0ZXh0JywgY2hpbGQudmFsdWUubWVzc2FnZSk7CgkgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0geyBhc191c2VyOiB0cnVlLCB0b2tlbjogX3RoaXMuX3Rva2VuLCBjaGFubmVsOiBfdGhpcy5fY2hhbm5lbElELCB0ZXh0OiBjaGlsZC52YWx1ZS5tZXNzYWdlIH07CgoJICAgICAgICAgICAgICBfdGhpcy5fc2xhY2suY2hhdC5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7CgkgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVyciwgJyBkYXRhICcsIGRhdGEpOwoJICAgICAgICAgICAgICAgIGlmIChlcnIpIHRocm93IEVycm9yKGVycik7CgkgICAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgfQoJICAgICAgICAgIH0pOwoKCSAgICAgICAgICBvYnNlcnZlci5vbkNoYW5nZSgnKicsIGZ1bmN0aW9uIChldmVudCkgewoJICAgICAgICAgICAgY29uc29sZS5sb2coJ09OIFBST1RPU1RVQiAtIE9ic2VydmVyIC0gb25DaGFuZ2U6ICcsIGV2ZW50KTsKCSAgICAgICAgICB9KTsKCSAgICAgICAgICByZXNvbHZlKHRydWUpOwoJICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKCSAgICAgICAgICBjb25zb2xlLmxvZygnT04gUFJPVE9TVFVCIC0gT2JzZXJ2ZXIgLSBFUlJPUicsIGVycm9yKTsKCSAgICAgICAgICByZXNvbHZlKGZhbHNlKTsKCSAgICAgICAgfSk7CgkgICAgICB9KTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdfc2VuZEhUVFBSZXF1ZXN0JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRIVFRQUmVxdWVzdChtZXRob2QsIHVybCkgewoKCSAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCSAgICAgICAgaWYgKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikgewoJICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTsKCSAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgWERvbWFpblJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBYRG9tYWluUmVxdWVzdC4KCSAgICAgICAgICAvLyBYRG9tYWluUmVxdWVzdCBvbmx5IGV4aXN0cyBpbiBJRSwgYW5kIGlzIElFJ3Mgd2F5IG9mIG1ha2luZyBDT1JTIHJlcXVlc3RzLgoJICAgICAgICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpOwoJICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAvLyBPdGhlcndpc2UsIENPUlMgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4KCSAgICAgICAgICB4aHIgPSBudWxsOwoJICAgICAgICB9CgkgICAgICAgIGlmICh4aHIpIHsKCSAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCSAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkgewoJICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7CgkgICAgICAgICAgICAgICAgdmFyIGluZm8gPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpOwoJICAgICAgICAgICAgICAgIHJlc29sdmUoaW5mbyk7CgkgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeGhyLnN0YXR1cyA9PT0gNDAwKSB7CgkgICAgICAgICAgICAgICAgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdG9rZW4nKTsKCSAgICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgICByZWplY3QoJ3NvbWV0aGluZyBlbHNlIG90aGVyIHRoYW4gMjAwIHdhcyByZXR1cm5lZCcpOwoJICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfTsKCSAgICAgICAgICB4aHIuc2VuZCgpOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIHJlamVjdCgnQ09SUyBub3Qgc3VwcG9ydGVkJyk7CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2NvbmZpZycsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fY29uZmlnOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ3J1bnRpbWVTZXNzaW9uJywKCSAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICAgIHJldHVybiB0aGlzLl9ydW50aW1lU2Vzc2lvblVSTDsKCSAgICB9CgkgIH1dKTsKCgkgIHJldHVybiBTbGFja1Byb3RvU3R1YjsKCX0oKTsKCglmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CgkgIHJldHVybiB7CgkgICAgbmFtZTogJ1NsYWNrUHJvdG9TdHViJywKCSAgICBpbnN0YW5jZTogbmV3IFNsYWNrUHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcpCgkgIH07Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfYXBpID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKCgl2YXIgX2FwaTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hcGkpOwoKCXZhciBfYXBpMyA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpOwoKCXZhciBfYXBpNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwaTMpOwoKCXZhciBfYm90cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU5KTsKCgl2YXIgX2JvdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYm90cyk7CgoJdmFyIF9hdXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Myk7CgoJdmFyIF9hdXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dGgpOwoKCXZhciBfY2hhbm5lbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MCk7CgoJdmFyIF9jaGFubmVsczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGFubmVscyk7CgoJdmFyIF9jaGF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpOwoKCXZhciBfY2hhdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGF0KTsKCgl2YXIgX2RuZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYyKTsKCgl2YXIgX2RuZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kbmQpOwoKCXZhciBfZW1vamkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTsKCgl2YXIgX2Vtb2ppMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vtb2ppKTsKCgl2YXIgX2ZpbGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjMpOwoKCXZhciBfZmlsZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXMpOwoKCXZhciBfZ3JvdXBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjQpOwoKCXZhciBfZ3JvdXBzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3Vwcyk7CgoJdmFyIF9pbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTY1KTsKCgl2YXIgX2ltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltKTsKCgl2YXIgX21waW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nik7CgoJdmFyIF9tcGltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21waW0pOwoKCXZhciBfb2F1dGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nyk7CgoJdmFyIF9vYXV0aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYXV0aCk7CgoJdmFyIF9yZWFjdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OCk7CgoJdmFyIF9yZWFjdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3Rpb25zKTsKCgl2YXIgX3JlbWluZGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY5KTsKCgl2YXIgX3JlbWluZGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW1pbmRlcnMpOwoKCXZhciBfcGlucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcwKTsKCgl2YXIgX3BpbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGlucyk7CgoJdmFyIF9ydG0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3MSk7CgoJdmFyIF9ydG0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnRtKTsKCgl2YXIgX3J0bTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMCk7CgoJdmFyIF9ydG00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnRtMyk7CgoJdmFyIF9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Myk7CgoJdmFyIF9zZWFyY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoKTsKCgl2YXIgX3N0YXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzQpOwoKCXZhciBfc3RhcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RhcnMpOwoKCXZhciBfdGVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTc1KTsKCgl2YXIgX3RlYW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGVhbSk7CgoJdmFyIF91c2VyZ3JvdXBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzYpOwoKCXZhciBfdXNlcmdyb3VwczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyZ3JvdXBzKTsKCgl2YXIgX3VzZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpOwoKCXZhciBfdXNlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcnMpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJdmFyIGRlc2NyaWJlID0gJ1xuICBzbGFja1xuICAgIGFwaS5jbGllbnQodG9rZW4pXG4gICAgYXBpLnRlc3QocGFyYW1zLCAoZXJyLCBkYXRhKT0+KVxuICAgIGF1dGgudGVzdCh0b2tlbiwgKGVyciwgZGF0YSk9PilcbiAgICBib3RzLmluZm9cbiAgICBjaGFubmVscy5hcmNoaXZlKHt0b2tlbiwgY2hhbm5lbH0sIChlcnIsIGRhdGEpPT4pXG4gICAgY2hhbm5lbHMuY3JlYXRlKHt0b2tlbiwgbmFtZX0sIChlcnIsIGRhdGEpPT4pXG4gICAgY2hhbm5lbHMuaGlzdG9yeSh7dG9rZW4sIGNoYW5uZWx9LCAoZXJyLCBkYXRhKT0+KVxuICAgIGNoYW5uZWxzLmluZm9cbiAgICBjaGFubmVscy5pbnZpdGVcbiAgICBjaGFubmVscy5qb2luXG4gICAgY2hhbm5lbHMua2lja1xuICAgIGNoYW5uZWxzLmxlYXZlXG4gICAgY2hhbm5lbHMubGlzdCh7dG9rZW4sIGV4Y2x1ZGVfYXJjaGl2ZWR9LCAoZXJyLCBkYXRhKT0+KVxuICAgIGNoYW5uZWxzLm1hcmtcbiAgICBjaGFubmVscy5yZW5hbWVcbiAgICBjaGFubmVscy5zZXRQdXJwb3NlXG4gICAgY2hhbm5lbHMuc2V0VG9waWNcbiAgICBjaGFubmVscy51bmFyY2hpdmVcbiAgICBjaGF0LmRlbGV0ZVxuICAgIGNoYXQucG9zdE1lc3NhZ2Uoe3Rva2VuLCB0ZXh0LCBjaGFubmVsfSwgKGVyciwgZGF0YSk9PilcbiAgICBjaGF0LnVwZGF0ZVxuICAgIGVtb2ppLmxpc3RcbiAgICBmaWxlcy5kZWxldGVcbiAgICBmaWxlcy5pbmZvXG4gICAgZmlsZXMubGlzdFxuICAgIGZpbGVzLnVwbG9hZFxuICAgIGdyb3Vwcy5hcmNoaXZlXG4gICAgZ3JvdXBzLmNsb3NlXG4gICAgZ3JvdXBzLmNyZWF0ZVxuICAgIGdyb3Vwcy5jcmVhdGVDaGlsZFxuICAgIGdyb3Vwcy5oaXN0b3J5XG4gICAgZ3JvdXBzLmluZm9cbiAgICBncm91cHMuaW52aXRlXG4gICAgZ3JvdXBzLmtpY2tcbiAgICBncm91cHMubGVhdmVcbiAgICBncm91cHMubGlzdFxuICAgIGdyb3Vwcy5tYXJrXG4gICAgZ3JvdXBzLm9wZW5cbiAgICBncm91cHMucmVuYW1lXG4gICAgZ3JvdXBzLnNldFB1cnBvc2VcbiAgICBncm91cHMuc2V0VG9waWNcbiAgICBncm91cHMudW5hcmNoaXZlXG4gICAgaW0uY2xvc2VcbiAgICBpbS5oaXN0b3J5XG4gICAgaW0ubGlzdFxuICAgIGltLm1hcmtcbiAgICBpbS5vcGVuXG4gICAgbXBpbS5jbG9zZVxuICAgIG1waW0uaGlzdG9yeVxuICAgIG1waW0ubGlzdFxuICAgIG1waW0ubWFya1xuICAgIG1waW0ub3BlblxuICAgIG9hdXRoLmFjY2Vzcyh7Y2xpZW50X2lkLCBjbGllbnRfc2VjcmV0LCBjb2RlfSwgKGVyciwgZGF0YSk9PilcbiAgICBwaW5zLmFkZFxuICAgIHBpbnMubGlzdFxuICAgIHBpbnMucmVtb3ZlXG4gICAgcmVhY3Rpb25zLmFkZFxuICAgIHJlYWN0aW9ucy5nZXRcbiAgICByZWFjdGlvbnMubGlzdFxuICAgIHJlYWN0aW9ucy5yZW1vdmVcbiAgICByZW1pbmRlcnMuYWRkXG4gICAgcmVtaW5kZXJzLmNvbXBsZXRlXG4gICAgcmVtaW5kZXJzLmRlbGV0ZVxuICAgIHJlbWluZGVycy5pbmZvXG4gICAgcmVtaW5kZXJzLmxpc3RcbiAgICBydG0uY2xpZW50KClcbiAgICBydG0uc3RhcnQoe3Rva2VufSwgKGVyciwgZGF0YSk9PilcbiAgICBzZWFyY2guYWxsXG4gICAgc2VhcmNoLmZpbGVzXG4gICAgc2VhcmNoLm1lc3NhZ2VzXG4gICAgc3RhcnMuYWRkXG4gICAgc3RhcnMubGlzdFxuICAgIHN0YXJzLnJlbW92ZVxuICAgIHRlYW0uYWNjY2Vzc0xvZ3NcbiAgICB0ZWFtLmJpbGxhYmxlSW5mb1xuICAgIHRlYW0uaW5mbyh0b2tlbiwgKGVyciwgZGF0YSk9PilcbiAgICB0ZWFtLmludGVncmF0aW9uTG9nc1xuICAgIHRlYW0ucHJvZmlsZS5nZXRcbiAgICB1c2VyZ3JvdXBzLmNyZWF0ZVxuICAgIHVzZXJncm91cHMuZGlzYWJsZVxuICAgIHVzZXJncm91cHMuZW5hYmxlXG4gICAgdXNlcmdyb3Vwcy5saXN0XG4gICAgdXNlcmdyb3Vwcy51cGRhdGVcbiAgICB1c2VyZ3JvdXBzLnVzZXJzLmxpc3RcbiAgICB1c2VyZ3JvdXBzLnVzZXJzLnVwZGF0ZVxuICAgIHVzZXJzLmdldFByZXNlbmNlXG4gICAgdXNlcnMuaWRlbnRpdHlcbiAgICB1c2Vycy5pbmZvXG4gICAgdXNlcnMubGlzdCh0b2tlbiwgKGVyciwgZGF0YSk9PilcbiAgICB1c2Vycy5zZXRBY3RpdmVcbiAgICB1c2Vycy5zZXRQcmVzZW5jZVxuJzsKCglleHBvcnRzLmRlZmF1bHQgPSB7CgkgIGRlc2NyaWJlOiBkZXNjcmliZSwKCSAgYXBpOiB7IHRlc3Q6IF9hcGkyLmRlZmF1bHQsIGNsaWVudDogX2FwaTQuZGVmYXVsdCB9LAoJICBhdXRoOiB7IHRlc3Q6IF9hdXRoMi5kZWZhdWx0IH0sCgkgIGJvdHM6IF9ib3RzMi5kZWZhdWx0LAoJICBjaGFubmVsczogX2NoYW5uZWxzMi5kZWZhdWx0LAoJICBjaGF0OiBfY2hhdDIuZGVmYXVsdCwKCSAgZG5kOiBfZG5kMi5kZWZhdWx0LAoJICBlbW9qaTogeyBsaXN0OiBfZW1vamkyLmRlZmF1bHQgfSwKCSAgZmlsZXM6IF9maWxlczIuZGVmYXVsdCwKCSAgZ3JvdXBzOiBfZ3JvdXBzMi5kZWZhdWx0LAoJICBpbTogX2ltMi5kZWZhdWx0LAoJICBtcGltOiBfbXBpbTIuZGVmYXVsdCwKCSAgb2F1dGg6IHsgYWNjZXNzOiBfb2F1dGgyLmRlZmF1bHQgfSwKCSAgcmVhY3Rpb25zOiBfcmVhY3Rpb25zMi5kZWZhdWx0LAoJICByZW1pbmRlcnM6IF9yZW1pbmRlcnMyLmRlZmF1bHQsCgkgIHBpbnM6IF9waW5zMi5kZWZhdWx0LAoJICBydG06IHsgY2xpZW50OiBfcnRtMi5kZWZhdWx0LCBzdGFydDogX3J0bTQuZGVmYXVsdCB9LAoJICBzZWFyY2g6IF9zZWFyY2gyLmRlZmF1bHQsCgkgIHN0YXJzOiBfc3RhcnMyLmRlZmF1bHQsCgkgIHRlYW06IF90ZWFtMi5kZWZhdWx0LAoJICB1c2VyZ3JvdXBzOiBfdXNlcmdyb3VwczIuZGVmYXVsdCwKCSAgdXNlcnM6IF91c2VyczIuZGVmYXVsdAoJfTsKCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBhcGl0ZXN0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBhcGl0ZXN0KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2FwaS50ZXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAzICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKCWV4cG9ydHMuZGVmYXVsdCA9IGV4ZWM7CgoJdmFyIF90aW55SnNvbkh0dHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKCXZhciBfdGlueUpzb25IdHRwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RpbnlKc29uSHR0cCk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglmdW5jdGlvbiBleGVjKHVybCwgZm9ybSwgY2FsbGJhY2spIHsKCgkgIC8vIHN0cmluZ2lmeSBhbnkgb2JqZWN0cyB1bmRlciBrZXlzIHNpbmNlIGZvcm0gaXMgcG9zdGVkIGFzIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZAoJICBPYmplY3Qua2V5cyhmb3JtKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKCSAgICBpZiAoX3R5cGVvZihmb3JtW2tleV0pID09PSAnb2JqZWN0JykgewoJICAgICAgZm9ybVtrZXldID0gSlNPTi5zdHJpbmdpZnkoZm9ybVtrZXldKTsKCSAgICB9CgkgIH0pOwoKCSAgLy8gYWx3YXlzIHBvc3QKCSAgX3RpbnlKc29uSHR0cDIuZGVmYXVsdC5wb3N0KHsKCSAgICB1cmw6ICdodHRwczovL3NsYWNrLmNvbS9hcGkvJyArIHVybCwKCSAgICBoZWFkZXJzOiB7CgkgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKCSAgICB9LAoJICAgIGRhdGE6IGZvcm0KCSAgfSwgZnVuY3Rpb24gX3JlcyhlcnIsIHJlcykgewoJICAgIC8vIHZhciByYXRlTGltaXQgPSAnWW91IGFyZSBzZW5kaW5nIHRvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2UgcmVsYXguJwoJICAgIGlmIChyZXMpIHJlcyA9IEpTT04ucGFyc2UocmVzKTsKCSAgICBpZiAoZXJyKSB7CgkgICAgICAvLyBpZiByZXF1ZXN0IGZhaWxlZCBidWJibGUgdGhlIGVycm9yCgkgICAgICBjYWxsYmFjayhlcnIpOwoJICAgIH0gZWxzZSBpZiAocmVzLmVycm9yKSB7CgkgICAgICBjYWxsYmFjayhFcnJvcihyZXMuZXJyb3IpKTsKCSAgICB9IGVsc2UgewoJICAgICAgY2FsbGJhY2sobnVsbCwgcmVzKTsKCSAgICB9CgkgIH0pOwoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA0ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBfZ2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQoJdmFyIF9wb3N0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkKCgltb2R1bGUuZXhwb3J0cyA9IHsKCSAgZ2V0OiBfZ2V0LAoJICBwb3N0OiBfcG9zdCwKCX0KCgovKioqLyB9LAovKiA1ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBodHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KQoJdmFyIGh0dHBzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkKCXZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gR0VUKG9wdGlvbnMsIGNhbGxiYWNrKSB7CgoJICAvLyByZXF1aXJlIG9wdGlvbnMudXJsIG9yIGZhaWwgbm9pc2lseSAKCSAgaWYgKCFvcHRpb25zLnVybCkgewoJICAgIHRocm93IEVycm9yKCdvcHRpb25zLnVybCByZXF1aXJlZCcpCgkgIH0KCgkgIC8vIHBhcnNlIG91dCB0aGUgb3B0aW9ucyBmcm9tIG9wdGlvbnMudXJsCgkgIHZhciBvcHRzID0gdXJsLnBhcnNlKG9wdGlvbnMudXJsKQoJICB2YXIgbWV0aG9kID0gb3B0cy5wcm90b2NvbCA9PT0gJ2h0dHBzOic/IGh0dHBzLmdldCA6IGh0dHAuZ2V0CgoJICBvcHRzLnJlamVjdFVuYXV0aG9yaXplZCA9IGZhbHNlCgkgIG9wdHMuYWdlbnQgPSBmYWxzZQoJICBvcHRzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge30KCSAgb3B0cy5oZWFkZXJzWydVc2VyLUFnZW50J10gPSBvcHRzLmhlYWRlcnNbJ1VzZXItQWdlbnQnXSB8fCAndGlueS1odHRwJwoJICBvcHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gb3B0cy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSB8fCAnYXBwbGljYXRpb24vanNvbicKCSAgCgkgIC8vIG1ha2UgYSByZXF1ZXN0CgkgIG1ldGhvZChvcHRzLCBmdW5jdGlvbiBfX3JlcyhyZXMpIHsKCSAgIAoJICAgIHZhciByYXdEYXRhID0gJycKCSAgICB2YXIgc3RhdHVzQ29kZSA9IHJlcy5zdGF0dXNDb2RlCgkgICAgdmFyIGNvbnRlbnRUeXBlID0gcmVzLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddCgkgICAgdmFyIGlzSlNPTiA9IGNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoJ2FwcGxpY2F0aW9uL2pzb24nKQoKCSAgICBpZiAoc3RhdHVzQ29kZSAhPT0gMjAwKSB7CgkgICAgICBjYWxsYmFjayhFcnJvcignR0VUIGZhaWxlZCB3aXRoOiAnICsgc3RhdHVzQ29kZSkpCgkgICAgICByZXMucmVzdW1lKCkKCSAgICAgIHJldHVybgoJICAgIH0KCSAKCSAgICByZXMuc2V0RW5jb2RpbmcoJ3V0ZjgnKQoJICAgIHJlcy5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKSB7cmF3RGF0YSArPSBjaHVua30pCgkgICAgcmVzLm9uKCdlbmQnLCBmdW5jdGlvbih4KSB7CgkgICAgICB0cnkgewoJICAgICAgICB2YXIgcGFyc2VkRGF0YSA9IGlzSlNPTj8gSlNPTi5wYXJzZShyYXdEYXRhKSA6IHJhd0RhdGEKCSAgICAgICAgY2FsbGJhY2sobnVsbCwgcGFyc2VkRGF0YSkKCSAgICAgIH0gCgkgICAgICBjYXRjaCAoZSkgewoJICAgICAgICBjYWxsYmFjayhlLm1lc3NhZ2UpCgkgICAgICB9CgkgICAgfSkKCSAgfSkub24oJ2Vycm9yJywgZnVuY3Rpb24oZSkgeyBjYWxsYmFjayhFcnJvcihlLm1lc3NhZ2UpKSB9ICkKCX0KCgovKioqLyB9LAovKiA2ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgQ2xpZW50UmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykKCXZhciBleHRlbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KQoJdmFyIHN0YXR1c0NvZGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCkKCXZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQoKCXZhciBodHRwID0gZXhwb3J0cwoKCWh0dHAucmVxdWVzdCA9IGZ1bmN0aW9uIChvcHRzLCBjYikgewoJCWlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpCgkJCW9wdHMgPSB1cmwucGFyc2Uob3B0cykKCQllbHNlCgkJCW9wdHMgPSBleHRlbmQob3B0cykKCgkJLy8gTm9ybWFsbHksIHRoZSBwYWdlIGlzIGxvYWRlZCBmcm9tIGh0dHAgb3IgaHR0cHMsIHNvIG5vdCBzcGVjaWZ5aW5nIGEgcHJvdG9jb2wKCQkvLyB3aWxsIHJlc3VsdCBpbiBhICh2YWxpZCkgcHJvdG9jb2wtcmVsYXRpdmUgdXJsLiBIb3dldmVyLCB0aGlzIHdvbid0IHdvcmsgaWYKCQkvLyB0aGUgcHJvdG9jb2wgaXMgc29tZXRoaW5nIGVsc2UsIGxpa2UgJ2ZpbGU6JwoJCXZhciBkZWZhdWx0UHJvdG9jb2wgPSBnbG9iYWwubG9jYXRpb24ucHJvdG9jb2wuc2VhcmNoKC9eaHR0cHM/OiQvKSA9PT0gLTEgPyAnaHR0cDonIDogJycKCgkJdmFyIHByb3RvY29sID0gb3B0cy5wcm90b2NvbCB8fCBkZWZhdWx0UHJvdG9jb2wKCQl2YXIgaG9zdCA9IG9wdHMuaG9zdG5hbWUgfHwgb3B0cy5ob3N0CgkJdmFyIHBvcnQgPSBvcHRzLnBvcnQKCQl2YXIgcGF0aCA9IG9wdHMucGF0aCB8fCAnLycKCgkJLy8gTmVjZXNzYXJ5IGZvciBJUHY2IGFkZHJlc3NlcwoJCWlmIChob3N0ICYmIGhvc3QuaW5kZXhPZignOicpICE9PSAtMSkKCQkJaG9zdCA9ICdbJyArIGhvc3QgKyAnXScKCgkJLy8gVGhpcyBtYXkgYmUgYSByZWxhdGl2ZSB1cmwuIFRoZSBicm93c2VyIHNob3VsZCBhbHdheXMgYmUgYWJsZSB0byBpbnRlcnByZXQgaXQgY29ycmVjdGx5LgoJCW9wdHMudXJsID0gKGhvc3QgPyAocHJvdG9jb2wgKyAnLy8nICsgaG9zdCkgOiAnJykgKyAocG9ydCA/ICc6JyArIHBvcnQgOiAnJykgKyBwYXRoCgkJb3B0cy5tZXRob2QgPSAob3B0cy5tZXRob2QgfHwgJ0dFVCcpLnRvVXBwZXJDYXNlKCkKCQlvcHRzLmhlYWRlcnMgPSBvcHRzLmhlYWRlcnMgfHwge30KCgkJLy8gQWxzbyB2YWxpZCBvcHRzLmF1dGgsIG9wdHMubW9kZQoKCQl2YXIgcmVxID0gbmV3IENsaWVudFJlcXVlc3Qob3B0cykKCQlpZiAoY2IpCgkJCXJlcS5vbigncmVzcG9uc2UnLCBjYikKCQlyZXR1cm4gcmVxCgl9CgoJaHR0cC5nZXQgPSBmdW5jdGlvbiBnZXQgKG9wdHMsIGNiKSB7CgkJdmFyIHJlcSA9IGh0dHAucmVxdWVzdChvcHRzLCBjYikKCQlyZXEuZW5kKCkKCQlyZXR1cm4gcmVxCgl9CgoJaHR0cC5BZ2VudCA9IGZ1bmN0aW9uICgpIHt9CglodHRwLkFnZW50LmRlZmF1bHRNYXhTb2NrZXRzID0gNAoKCWh0dHAuU1RBVFVTX0NPREVTID0gc3RhdHVzQ29kZXMKCglodHRwLk1FVEhPRFMgPSBbCgkJJ0NIRUNLT1VUJywKCQknQ09OTkVDVCcsCgkJJ0NPUFknLAoJCSdERUxFVEUnLAoJCSdHRVQnLAoJCSdIRUFEJywKCQknTE9DSycsCgkJJ00tU0VBUkNIJywKCQknTUVSR0UnLAoJCSdNS0FDVElWSVRZJywKCQknTUtDT0wnLAoJCSdNT1ZFJywKCQknTk9USUZZJywKCQknT1BUSU9OUycsCgkJJ1BBVENIJywKCQknUE9TVCcsCgkJJ1BST1BGSU5EJywKCQknUFJPUFBBVENIJywKCQknUFVSR0UnLAoJCSdQVVQnLAoJCSdSRVBPUlQnLAoJCSdTRUFSQ0gnLAoJCSdTVUJTQ1JJQkUnLAoJCSdUUkFDRScsCgkJJ1VOTE9DSycsCgkJJ1VOU1VCU0NSSUJFJwoJXQoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKQoKLyoqKi8gfSwKLyogNyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oQnVmZmVyLCBnbG9iYWwsIHByb2Nlc3MpIHt2YXIgY2FwYWJpbGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpCgl2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQoJdmFyIHJlc3BvbnNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkKCXZhciBzdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQoJdmFyIHRvQXJyYXlCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KQoKCXZhciBJbmNvbWluZ01lc3NhZ2UgPSByZXNwb25zZS5JbmNvbWluZ01lc3NhZ2UKCXZhciByU3RhdGVzID0gcmVzcG9uc2UucmVhZHlTdGF0ZXMKCglmdW5jdGlvbiBkZWNpZGVNb2RlIChwcmVmZXJCaW5hcnksIHVzZUZldGNoKSB7CgkJaWYgKGNhcGFiaWxpdHkuZmV0Y2ggJiYgdXNlRmV0Y2gpIHsKCQkJcmV0dXJuICdmZXRjaCcKCQl9IGVsc2UgaWYgKGNhcGFiaWxpdHkubW96Y2h1bmtlZGFycmF5YnVmZmVyKSB7CgkJCXJldHVybiAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInCgkJfSBlbHNlIGlmIChjYXBhYmlsaXR5Lm1zc3RyZWFtKSB7CgkJCXJldHVybiAnbXMtc3RyZWFtJwoJCX0gZWxzZSBpZiAoY2FwYWJpbGl0eS5hcnJheWJ1ZmZlciAmJiBwcmVmZXJCaW5hcnkpIHsKCQkJcmV0dXJuICdhcnJheWJ1ZmZlcicKCQl9IGVsc2UgaWYgKGNhcGFiaWxpdHkudmJBcnJheSAmJiBwcmVmZXJCaW5hcnkpIHsKCQkJcmV0dXJuICd0ZXh0OnZiYXJyYXknCgkJfSBlbHNlIHsKCQkJcmV0dXJuICd0ZXh0JwoJCX0KCX0KCgl2YXIgQ2xpZW50UmVxdWVzdCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9wdHMpIHsKCQl2YXIgc2VsZiA9IHRoaXMKCQlzdHJlYW0uV3JpdGFibGUuY2FsbChzZWxmKQoKCQlzZWxmLl9vcHRzID0gb3B0cwoJCXNlbGYuX2JvZHkgPSBbXQoJCXNlbGYuX2hlYWRlcnMgPSB7fQoJCWlmIChvcHRzLmF1dGgpCgkJCXNlbGYuc2V0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgKyBuZXcgQnVmZmVyKG9wdHMuYXV0aCkudG9TdHJpbmcoJ2Jhc2U2NCcpKQoJCU9iamVjdC5rZXlzKG9wdHMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewoJCQlzZWxmLnNldEhlYWRlcihuYW1lLCBvcHRzLmhlYWRlcnNbbmFtZV0pCgkJfSkKCgkJdmFyIHByZWZlckJpbmFyeQoJCXZhciB1c2VGZXRjaCA9IHRydWUKCQlpZiAob3B0cy5tb2RlID09PSAnZGlzYWJsZS1mZXRjaCcgfHwgJ3RpbWVvdXQnIGluIG9wdHMpIHsKCQkJLy8gSWYgdGhlIHVzZSBvZiBYSFIgc2hvdWxkIGJlIHByZWZlcnJlZCBhbmQgaW5jbHVkZXMgcHJlc2VydmluZyB0aGUgJ2NvbnRlbnQtdHlwZScgaGVhZGVyLgoJCQkvLyBGb3JjZSBYSFIgdG8gYmUgdXNlZCBzaW5jZSB0aGUgRmV0Y2ggQVBJIGRvZXMgbm90IHlldCBzdXBwb3J0IHRpbWVvdXRzLgoJCQl1c2VGZXRjaCA9IGZhbHNlCgkJCXByZWZlckJpbmFyeSA9IHRydWUKCQl9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gJ3ByZWZlci1zdHJlYW1pbmcnKSB7CgkJCS8vIElmIHN0cmVhbWluZyBpcyBhIGhpZ2ggcHJpb3JpdHkgYnV0IGJpbmFyeSBjb21wYXRpYmlsaXR5IGFuZAoJCQkvLyB0aGUgYWNjdXJhY3kgb2YgdGhlICdjb250ZW50LXR5cGUnIGhlYWRlciBhcmVuJ3QKCQkJcHJlZmVyQmluYXJ5ID0gZmFsc2UKCQl9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gJ2FsbG93LXdyb25nLWNvbnRlbnQtdHlwZScpIHsKCQkJLy8gSWYgc3RyZWFtaW5nIGlzIG1vcmUgaW1wb3J0YW50IHRoYW4gcHJlc2VydmluZyB0aGUgJ2NvbnRlbnQtdHlwZScgaGVhZGVyCgkJCXByZWZlckJpbmFyeSA9ICFjYXBhYmlsaXR5Lm92ZXJyaWRlTWltZVR5cGUKCQl9IGVsc2UgaWYgKCFvcHRzLm1vZGUgfHwgb3B0cy5tb2RlID09PSAnZGVmYXVsdCcgfHwgb3B0cy5tb2RlID09PSAncHJlZmVyLWZhc3QnKSB7CgkJCS8vIFVzZSBiaW5hcnkgaWYgdGV4dCBzdHJlYW1pbmcgbWF5IGNvcnJ1cHQgZGF0YSBvciB0aGUgY29udGVudC10eXBlIGhlYWRlciwgb3IgZm9yIHNwZWVkCgkJCXByZWZlckJpbmFyeSA9IHRydWUKCQl9IGVsc2UgewoJCQl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgZm9yIG9wdHMubW9kZScpCgkJfQoJCXNlbGYuX21vZGUgPSBkZWNpZGVNb2RlKHByZWZlckJpbmFyeSwgdXNlRmV0Y2gpCgoJCXNlbGYub24oJ2ZpbmlzaCcsIGZ1bmN0aW9uICgpIHsKCQkJc2VsZi5fb25GaW5pc2goKQoJCX0pCgl9CgoJaW5oZXJpdHMoQ2xpZW50UmVxdWVzdCwgc3RyZWFtLldyaXRhYmxlKQoKCUNsaWVudFJlcXVlc3QucHJvdG90eXBlLnNldEhlYWRlciA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewoJCXZhciBzZWxmID0gdGhpcwoJCXZhciBsb3dlck5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCkKCQkvLyBUaGlzIGNoZWNrIGlzIG5vdCBuZWNlc3NhcnksIGJ1dCBpdCBwcmV2ZW50cyB3YXJuaW5ncyBmcm9tIGJyb3dzZXJzIGFib3V0IHNldHRpbmcgdW5zYWZlCgkJLy8gaGVhZGVycy4gVG8gYmUgaG9uZXN0IEknbSBub3QgZW50aXJlbHkgc3VyZSBoaWRpbmcgdGhlc2Ugd2FybmluZ3MgaXMgYSBnb29kIHRoaW5nLCBidXQKCQkvLyBodHRwLWJyb3dzZXJpZnkgZGlkIGl0LCBzbyBJIHdpbGwgdG9vLgoJCWlmICh1bnNhZmVIZWFkZXJzLmluZGV4T2YobG93ZXJOYW1lKSAhPT0gLTEpCgkJCXJldHVybgoKCQlzZWxmLl9oZWFkZXJzW2xvd2VyTmFtZV0gPSB7CgkJCW5hbWU6IG5hbWUsCgkJCXZhbHVlOiB2YWx1ZQoJCX0KCX0KCglDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5nZXRIZWFkZXIgPSBmdW5jdGlvbiAobmFtZSkgewoJCXZhciBzZWxmID0gdGhpcwoJCXJldHVybiBzZWxmLl9oZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0udmFsdWUKCX0KCglDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5yZW1vdmVIZWFkZXIgPSBmdW5jdGlvbiAobmFtZSkgewoJCXZhciBzZWxmID0gdGhpcwoJCWRlbGV0ZSBzZWxmLl9oZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0KCX0KCglDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5fb25GaW5pc2ggPSBmdW5jdGlvbiAoKSB7CgkJdmFyIHNlbGYgPSB0aGlzCgoJCWlmIChzZWxmLl9kZXN0cm95ZWQpCgkJCXJldHVybgoJCXZhciBvcHRzID0gc2VsZi5fb3B0cwoKCQl2YXIgaGVhZGVyc09iaiA9IHNlbGYuX2hlYWRlcnMKCQl2YXIgYm9keSA9IG51bGwKCQlpZiAob3B0cy5tZXRob2QgPT09ICdQT1NUJyB8fCBvcHRzLm1ldGhvZCA9PT0gJ1BVVCcgfHwgb3B0cy5tZXRob2QgPT09ICdQQVRDSCcgfHwgb3B0cy5tZXRob2QgPT09ICdNRVJHRScpIHsKCQkJaWYgKGNhcGFiaWxpdHkuYmxvYkNvbnN0cnVjdG9yKSB7CgkJCQlib2R5ID0gbmV3IGdsb2JhbC5CbG9iKHNlbGYuX2JvZHkubWFwKGZ1bmN0aW9uIChidWZmZXIpIHsKCQkJCQlyZXR1cm4gdG9BcnJheUJ1ZmZlcihidWZmZXIpCgkJCQl9KSwgewoJCQkJCXR5cGU6IChoZWFkZXJzT2JqWydjb250ZW50LXR5cGUnXSB8fCB7fSkudmFsdWUgfHwgJycKCQkJCX0pCgkJCX0gZWxzZSB7CgkJCQkvLyBnZXQgdXRmOCBzdHJpbmcKCQkJCWJvZHkgPSBCdWZmZXIuY29uY2F0KHNlbGYuX2JvZHkpLnRvU3RyaW5nKCkKCQkJfQoJCX0KCgkJaWYgKHNlbGYuX21vZGUgPT09ICdmZXRjaCcpIHsKCQkJdmFyIGhlYWRlcnMgPSBPYmplY3Qua2V5cyhoZWFkZXJzT2JqKS5tYXAoZnVuY3Rpb24gKG5hbWUpIHsKCQkJCXJldHVybiBbaGVhZGVyc09ialtuYW1lXS5uYW1lLCBoZWFkZXJzT2JqW25hbWVdLnZhbHVlXQoJCQl9KQoKCQkJZ2xvYmFsLmZldGNoKHNlbGYuX29wdHMudXJsLCB7CgkJCQltZXRob2Q6IHNlbGYuX29wdHMubWV0aG9kLAoJCQkJaGVhZGVyczogaGVhZGVycywKCQkJCWJvZHk6IGJvZHkgfHwgdW5kZWZpbmVkLAoJCQkJbW9kZTogJ2NvcnMnLAoJCQkJY3JlZGVudGlhbHM6IG9wdHMud2l0aENyZWRlbnRpYWxzID8gJ2luY2x1ZGUnIDogJ3NhbWUtb3JpZ2luJwoJCQl9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewoJCQkJc2VsZi5fZmV0Y2hSZXNwb25zZSA9IHJlc3BvbnNlCgkJCQlzZWxmLl9jb25uZWN0KCkKCQkJfSwgZnVuY3Rpb24gKHJlYXNvbikgewoJCQkJc2VsZi5lbWl0KCdlcnJvcicsIHJlYXNvbikKCQkJfSkKCQl9IGVsc2UgewoJCQl2YXIgeGhyID0gc2VsZi5feGhyID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpCgkJCXRyeSB7CgkJCQl4aHIub3BlbihzZWxmLl9vcHRzLm1ldGhvZCwgc2VsZi5fb3B0cy51cmwsIHRydWUpCgkJCX0gY2F0Y2ggKGVycikgewoJCQkJcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7CgkJCQkJc2VsZi5lbWl0KCdlcnJvcicsIGVycikKCQkJCX0pCgkJCQlyZXR1cm4KCQkJfQoKCQkJLy8gQ2FuJ3Qgc2V0IHJlc3BvbnNlVHlwZSBvbiByZWFsbHkgb2xkIGJyb3dzZXJzCgkJCWlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIpCgkJCQl4aHIucmVzcG9uc2VUeXBlID0gc2VsZi5fbW9kZS5zcGxpdCgnOicpWzBdCgoJCQlpZiAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKQoJCQkJeGhyLndpdGhDcmVkZW50aWFscyA9ICEhb3B0cy53aXRoQ3JlZGVudGlhbHMKCgkJCWlmIChzZWxmLl9tb2RlID09PSAndGV4dCcgJiYgJ292ZXJyaWRlTWltZVR5cGUnIGluIHhocikKCQkJCXhoci5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkJykKCgkJCWlmICgndGltZW91dCcgaW4gb3B0cykgewoJCQkJeGhyLnRpbWVvdXQgPSBvcHRzLnRpbWVvdXQKCQkJCXhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7CgkJCQkJc2VsZi5lbWl0KCd0aW1lb3V0JykKCQkJCX0KCQkJfQoKCQkJT2JqZWN0LmtleXMoaGVhZGVyc09iaikuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewoJCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyc09ialtuYW1lXS5uYW1lLCBoZWFkZXJzT2JqW25hbWVdLnZhbHVlKQoJCQl9KQoKCQkJc2VsZi5fcmVzcG9uc2UgPSBudWxsCgkJCXhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CgkJCQlzd2l0Y2ggKHhoci5yZWFkeVN0YXRlKSB7CgkJCQkJY2FzZSByU3RhdGVzLkxPQURJTkc6CgkJCQkJY2FzZSByU3RhdGVzLkRPTkU6CgkJCQkJCXNlbGYuX29uWEhSUHJvZ3Jlc3MoKQoJCQkJCQlicmVhawoJCQkJfQoJCQl9CgkJCS8vIE5lY2Vzc2FyeSBmb3Igc3RyZWFtaW5nIGluIEZpcmVmb3gsIHNpbmNlIHhoci5yZXNwb25zZSBpcyBPTkxZIGRlZmluZWQKCQkJLy8gaW4gb25wcm9ncmVzcywgbm90IGluIG9ucmVhZHlzdGF0ZWNoYW5nZSB3aXRoIHhoci5yZWFkeVN0YXRlID0gMwoJCQlpZiAoc2VsZi5fbW9kZSA9PT0gJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJykgewoJCQkJeGhyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7CgkJCQkJc2VsZi5fb25YSFJQcm9ncmVzcygpCgkJCQl9CgkJCX0KCgkJCXhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkgewoJCQkJaWYgKHNlbGYuX2Rlc3Ryb3llZCkKCQkJCQlyZXR1cm4KCQkJCXNlbGYuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ1hIUiBlcnJvcicpKQoJCQl9CgoJCQl0cnkgewoJCQkJeGhyLnNlbmQoYm9keSkKCQkJfSBjYXRjaCAoZXJyKSB7CgkJCQlwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKCQkJCQlzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKQoJCQkJfSkKCQkJCXJldHVybgoJCQl9CgkJfQoJfQoKCS8qKgoJICogQ2hlY2tzIGlmIHhoci5zdGF0dXMgaXMgcmVhZGFibGUgYW5kIG5vbi16ZXJvLCBpbmRpY2F0aW5nIG5vIGVycm9yLgoJICogRXZlbiB0aG91Z2ggdGhlIHNwZWMgc2F5cyBpdCBzaG91bGQgYmUgYXZhaWxhYmxlIGluIHJlYWR5U3RhdGUgMywKCSAqIGFjY2Vzc2luZyBpdCB0aHJvd3MgYW4gZXhjZXB0aW9uIGluIElFOAoJICovCglmdW5jdGlvbiBzdGF0dXNWYWxpZCAoeGhyKSB7CgkJdHJ5IHsKCQkJdmFyIHN0YXR1cyA9IHhoci5zdGF0dXMKCQkJcmV0dXJuIChzdGF0dXMgIT09IG51bGwgJiYgc3RhdHVzICE9PSAwKQoJCX0gY2F0Y2ggKGUpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJfQoKCUNsaWVudFJlcXVlc3QucHJvdG90eXBlLl9vblhIUlByb2dyZXNzID0gZnVuY3Rpb24gKCkgewoJCXZhciBzZWxmID0gdGhpcwoKCQlpZiAoIXN0YXR1c1ZhbGlkKHNlbGYuX3hocikgfHwgc2VsZi5fZGVzdHJveWVkKQoJCQlyZXR1cm4KCgkJaWYgKCFzZWxmLl9yZXNwb25zZSkKCQkJc2VsZi5fY29ubmVjdCgpCgoJCXNlbGYuX3Jlc3BvbnNlLl9vblhIUlByb2dyZXNzKCkKCX0KCglDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5fY29ubmVjdCA9IGZ1bmN0aW9uICgpIHsKCQl2YXIgc2VsZiA9IHRoaXMKCgkJaWYgKHNlbGYuX2Rlc3Ryb3llZCkKCQkJcmV0dXJuCgoJCXNlbGYuX3Jlc3BvbnNlID0gbmV3IEluY29taW5nTWVzc2FnZShzZWxmLl94aHIsIHNlbGYuX2ZldGNoUmVzcG9uc2UsIHNlbGYuX21vZGUpCgkJc2VsZi5fcmVzcG9uc2Uub24oJ2Vycm9yJywgZnVuY3Rpb24oZXJyKSB7CgkJCXNlbGYuZW1pdCgnZXJyb3InLCBlcnIpCgkJfSkKCgkJc2VsZi5lbWl0KCdyZXNwb25zZScsIHNlbGYuX3Jlc3BvbnNlKQoJfQoKCUNsaWVudFJlcXVlc3QucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CgkJdmFyIHNlbGYgPSB0aGlzCgoJCXNlbGYuX2JvZHkucHVzaChjaHVuaykKCQljYigpCgl9CgoJQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuYWJvcnQgPSBDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgewoJCXZhciBzZWxmID0gdGhpcwoJCXNlbGYuX2Rlc3Ryb3llZCA9IHRydWUKCQlpZiAoc2VsZi5fcmVzcG9uc2UpCgkJCXNlbGYuX3Jlc3BvbnNlLl9kZXN0cm95ZWQgPSB0cnVlCgkJaWYgKHNlbGYuX3hocikKCQkJc2VsZi5feGhyLmFib3J0KCkKCQkvLyBDdXJyZW50bHksIHRoZXJlIGlzbid0IGEgd2F5IHRvIHRydWx5IGFib3J0IGEgZmV0Y2guCgkJLy8gSWYgeW91IGxpa2UgYmlrZXNoZWRkaW5nLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy9mZXRjaC9pc3N1ZXMvMjcKCX0KCglDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoZGF0YSwgZW5jb2RpbmcsIGNiKSB7CgkJdmFyIHNlbGYgPSB0aGlzCgkJaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7CgkJCWNiID0gZGF0YQoJCQlkYXRhID0gdW5kZWZpbmVkCgkJfQoKCQlzdHJlYW0uV3JpdGFibGUucHJvdG90eXBlLmVuZC5jYWxsKHNlbGYsIGRhdGEsIGVuY29kaW5nLCBjYikKCX0KCglDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5mbHVzaEhlYWRlcnMgPSBmdW5jdGlvbiAoKSB7fQoJQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHt9CglDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXROb0RlbGF5ID0gZnVuY3Rpb24gKCkge30KCUNsaWVudFJlcXVlc3QucHJvdG90eXBlLnNldFNvY2tldEtlZXBBbGl2ZSA9IGZ1bmN0aW9uICgpIHt9CgoJLy8gVGFrZW4gZnJvbSBodHRwOi8vd3d3LnczLm9yZy9UUi9YTUxIdHRwUmVxdWVzdC8jdGhlLXNldHJlcXVlc3RoZWFkZXIlMjglMjktbWV0aG9kCgl2YXIgdW5zYWZlSGVhZGVycyA9IFsKCQknYWNjZXB0LWNoYXJzZXQnLAoJCSdhY2NlcHQtZW5jb2RpbmcnLAoJCSdhY2Nlc3MtY29udHJvbC1yZXF1ZXN0LWhlYWRlcnMnLAoJCSdhY2Nlc3MtY29udHJvbC1yZXF1ZXN0LW1ldGhvZCcsCgkJJ2Nvbm5lY3Rpb24nLAoJCSdjb250ZW50LWxlbmd0aCcsCgkJJ2Nvb2tpZScsCgkJJ2Nvb2tpZTInLAoJCSdkYXRlJywKCQknZG50JywKCQknZXhwZWN0JywKCQknaG9zdCcsCgkJJ2tlZXAtYWxpdmUnLAoJCSdvcmlnaW4nLAoJCSdyZWZlcmVyJywKCQkndGUnLAoJCSd0cmFpbGVyJywKCQkndHJhbnNmZXItZW5jb2RpbmcnLAoJCSd1cGdyYWRlJywKCQkndXNlci1hZ2VudCcsCgkJJ3ZpYScKCV0KCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4KS5CdWZmZXIsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMTIpKSkKCi8qKiovIH0sCi8qIDggKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qIQoJICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuCgkgKgoJICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+CgkgKiBAbGljZW5zZSAgTUlUCgkgKi8KCS8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCgoJJ3VzZSBzdHJpY3QnCgoJdmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oOSkKCXZhciBpZWVlNzU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCkKCXZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSkKCglleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlcgoJZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcgoJZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwCgoJLyoqCgkgKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOgoJICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdCkKCSAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNikKCSAqCgkgKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssCgkgKiBPcGVyYSAxMS42KywgaU9TIDQuMisuCgkgKgoJICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlbgoJICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuCgkgKgoJICogTm90ZToKCSAqCgkgKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLAoJICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LgoJICoKCSAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLgoJICoKCSAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mCgkgKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuCgoJICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXkKCSAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LgoJICovCglCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWQKCSAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVAoJICA6IHR5cGVkQXJyYXlTdXBwb3J0KCkKCgkvKgoJICogRXhwb3J0IGtNYXhMZW5ndGggYWZ0ZXIgdHlwZWQgYXJyYXkgc3VwcG9ydCBpcyBkZXRlcm1pbmVkLgoJICovCglleHBvcnRzLmtNYXhMZW5ndGggPSBrTWF4TGVuZ3RoKCkKCglmdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7CgkgIHRyeSB7CgkgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpCgkgICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19CgkgICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQKCSAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWAKCSAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWAKCSAgfSBjYXRjaCAoZSkgewoJICAgIHJldHVybiBmYWxzZQoJICB9Cgl9CgoJZnVuY3Rpb24ga01heExlbmd0aCAoKSB7CgkgIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVAoJICAgID8gMHg3ZmZmZmZmZgoJICAgIDogMHgzZmZmZmZmZgoJfQoKCWZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7CgkgIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKQoJICB9CgkgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewoJICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZQoJICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpCgkgICAgdGhhdC5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCgkgIH0gZWxzZSB7CgkgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzcwoJICAgIGlmICh0aGF0ID09PSBudWxsKSB7CgkgICAgICB0aGF0ID0gbmV3IEJ1ZmZlcihsZW5ndGgpCgkgICAgfQoJICAgIHRoYXQubGVuZ3RoID0gbGVuZ3RoCgkgIH0KCgkgIHJldHVybiB0aGF0Cgl9CgoJLyoqCgkgKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXIKCSAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2YKCSAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHMKCSAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0CgkgKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LgoJICoKCSAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC4KCSAqLwoKCWZ1bmN0aW9uIEJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7CgkgICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpCgkgIH0KCgkgIC8vIENvbW1vbiBjYXNlLgoJICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHsKCSAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgICB0aHJvdyBuZXcgRXJyb3IoCgkgICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZycKCSAgICAgICkKCSAgICB9CgkgICAgcmV0dXJuIGFsbG9jVW5zYWZlKHRoaXMsIGFyZykKCSAgfQoJICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCX0KCglCdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb24KCgkvLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi4KCUJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIChhcnIpIHsKCSAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKCSAgcmV0dXJuIGFycgoJfQoKCWZ1bmN0aW9uIGZyb20gKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJykKCSAgfQoKCSAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewoJICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCSAgfQoKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKCSAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCkKCSAgfQoKCSAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpCgl9CgoJLyoqCgkgKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvcgoJICogaWYgdmFsdWUgaXMgYSBudW1iZXIuCgkgKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pCgkgKiBCdWZmZXIuZnJvbShhcnJheSkKCSAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcikKCSAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKQoJICoqLwoJQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gZnJvbShudWxsLCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQoJfQoKCWlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewoJICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlCgkgIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5CgkgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJgoJICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7CgkgICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTcKCSAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywgewoJICAgICAgdmFsdWU6IG51bGwsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KQoJICB9Cgl9CgoJZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkgewoJICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQoJICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpCgkgIH0KCX0KCglmdW5jdGlvbiBhbGxvYyAodGhhdCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKCSAgYXNzZXJ0U2l6ZShzaXplKQoJICBpZiAoc2l6ZSA8PSAwKSB7CgkgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKQoJICB9CgkgIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHsKCSAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpcwoJICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGQKCSAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuCgkgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpCgkgICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpCgkgIH0KCSAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKQoJfQoKCS8qKgoJICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLgoJICogYWxsb2Moc2l6ZVssIGZpbGxbLCBlbmNvZGluZ11dKQoJICoqLwoJQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CgkgIHJldHVybiBhbGxvYyhudWxsLCBzaXplLCBmaWxsLCBlbmNvZGluZykKCX0KCglmdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkgewoJICBhc3NlcnRTaXplKHNpemUpCgkgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApCgkgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkgewoJICAgICAgdGhhdFtpXSA9IDAKCSAgICB9CgkgIH0KCSAgcmV0dXJuIHRoYXQKCX0KCgkvKioKCSAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuCgkgKiAqLwoJQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHsKCSAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpCgl9CgkvKioKCSAqIEVxdWl2YWxlbnQgdG8gU2xvd0J1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLgoJICovCglCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHsKCSAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpCgl9CgoJZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykgewoJICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHsKCSAgICBlbmNvZGluZyA9ICd1dGY4JwoJICB9CgoJICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJlbmNvZGluZyIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpCgkgIH0KCgkgIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMAoJICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aCkKCgkgIHZhciBhY3R1YWwgPSB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpCgoJICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHsKCSAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGwKCSAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLgoJICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKQoJICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbCkKCSAgfQoKCSAgcmV0dXJuIHRoYXQKCX0KCglmdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkgewoJICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwCgkgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKQoJICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7CgkgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1CgkgIH0KCSAgcmV0dXJuIHRoYXQKCX0KCglmdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHsKCSAgYXJyYXkuYnl0ZUxlbmd0aCAvLyB0aGlzIHRocm93cyBpZiBgYXJyYXlgIGlzIG5vdCBhIHZhbGlkIEFycmF5QnVmZmVyCgoJICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCdvZmZzZXRcJyBpcyBvdXQgb2YgYm91bmRzJykKCSAgfQoKCSAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ2xlbmd0aFwnIGlzIG91dCBvZiBib3VuZHMnKQoJICB9CgoJICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSkKCSAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpCgkgIH0gZWxzZSB7CgkgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKQoJICB9CgoJICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2UKCSAgICB0aGF0ID0gYXJyYXkKCSAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKCSAgfSBlbHNlIHsKCSAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzCgkgICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpCgkgIH0KCSAgcmV0dXJuIHRoYXQKCX0KCglmdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHsKCSAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7CgkgICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwCgkgICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW4pCgoJICAgIGlmICh0aGF0Lmxlbmd0aCA9PT0gMCkgewoJICAgICAgcmV0dXJuIHRoYXQKCSAgICB9CgoJICAgIG9iai5jb3B5KHRoYXQsIDAsIDAsIGxlbikKCSAgICByZXR1cm4gdGhhdAoJICB9CgoJICBpZiAob2JqKSB7CgkgICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmCgkgICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7CgkgICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IGlzbmFuKG9iai5sZW5ndGgpKSB7CgkgICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMCkKCSAgICAgIH0KCSAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iaikKCSAgICB9CgoJICAgIGlmIChvYmoudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmouZGF0YSkpIHsKCSAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKQoJICAgIH0KCSAgfQoKCSAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpCgl9CgoJZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7CgkgIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGgoKWAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlbgoJICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLikKCSAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICsKCSAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKQoJICB9CgkgIHJldHVybiBsZW5ndGggfCAwCgl9CgoJZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7CgkgIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcQoJICAgIGxlbmd0aCA9IDAKCSAgfQoJICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpCgl9CgoJQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHsKCSAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcikKCX0KCglCdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHsKCSAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKQoJICB9CgoJICBpZiAoYSA9PT0gYikgcmV0dXJuIDAKCgkgIHZhciB4ID0gYS5sZW5ndGgKCSAgdmFyIHkgPSBiLmxlbmd0aAoKCSAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IE1hdGgubWluKHgsIHkpOyBpIDwgbGVuOyArK2kpIHsKCSAgICBpZiAoYVtpXSAhPT0gYltpXSkgewoJICAgICAgeCA9IGFbaV0KCSAgICAgIHkgPSBiW2ldCgkgICAgICBicmVhawoJICAgIH0KCSAgfQoKCSAgaWYgKHggPCB5KSByZXR1cm4gLTEKCSAgaWYgKHkgPCB4KSByZXR1cm4gMQoJICByZXR1cm4gMAoJfQoKCUJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHsKCSAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHsKCSAgICBjYXNlICdoZXgnOgoJICAgIGNhc2UgJ3V0ZjgnOgoJICAgIGNhc2UgJ3V0Zi04JzoKCSAgICBjYXNlICdhc2NpaSc6CgkgICAgY2FzZSAnbGF0aW4xJzoKCSAgICBjYXNlICdiaW5hcnknOgoJICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgY2FzZSAndWNzMic6CgkgICAgY2FzZSAndWNzLTInOgoJICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgIGNhc2UgJ3V0Zi0xNmxlJzoKCSAgICAgIHJldHVybiB0cnVlCgkgICAgZGVmYXVsdDoKCSAgICAgIHJldHVybiBmYWxzZQoJICB9Cgl9CgoJQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7CgkgIGlmICghaXNBcnJheShsaXN0KSkgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKQoJICB9CgoJICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKCSAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApCgkgIH0KCgkgIHZhciBpCgkgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGxlbmd0aCA9IDAKCSAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7ICsraSkgewoJICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoCgkgICAgfQoJICB9CgoJICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aCkKCSAgdmFyIHBvcyA9IDAKCSAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKCSAgICB2YXIgYnVmID0gbGlzdFtpXQoJICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHsKCSAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKQoJICAgIH0KCSAgICBidWYuY29weShidWZmZXIsIHBvcykKCSAgICBwb3MgKz0gYnVmLmxlbmd0aAoJICB9CgkgIHJldHVybiBidWZmZXIKCX0KCglmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7CgkgIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkgewoJICAgIHJldHVybiBzdHJpbmcubGVuZ3RoCgkgIH0KCSAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJgoJICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkgewoJICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aAoJICB9CgkgIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgewoJICAgIHN0cmluZyA9ICcnICsgc3RyaW5nCgkgIH0KCgkgIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoCgkgIGlmIChsZW4gPT09IDApIHJldHVybiAwCgoJICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb24KCSAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2UKCSAgZm9yICg7OykgewoJICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKCSAgICAgIGNhc2UgJ2FzY2lpJzoKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gbGVuCgkgICAgICBjYXNlICd1dGY4JzoKCSAgICAgIGNhc2UgJ3V0Zi04JzoKCSAgICAgIGNhc2UgdW5kZWZpbmVkOgoJICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKCSAgICAgIGNhc2UgJ3VjczInOgoJICAgICAgY2FzZSAndWNzLTInOgoJICAgICAgY2FzZSAndXRmMTZsZSc6CgkgICAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICAgIHJldHVybiBsZW4gKiAyCgkgICAgICBjYXNlICdoZXgnOgoJICAgICAgICByZXR1cm4gbGVuID4+PiAxCgkgICAgICBjYXNlICdiYXNlNjQnOgoJICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aAoJICAgICAgZGVmYXVsdDoKCSAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjgKCSAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKQoJICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKCSAgICB9CgkgIH0KCX0KCUJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aAoKCWZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHsKCSAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2UKCgkgIC8vIE5vIG5lZWQgdG8gdmVyaWZ5IHRoYXQgInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzIiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHkKCSAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS4KCgkgIC8vIFRoaXMgYmVoYXZlcyBuZWl0aGVyIGxpa2UgU3RyaW5nIG5vciBVaW50OEFycmF5IGluIHRoYXQgd2Ugc2V0IHN0YXJ0L2VuZAoJICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuCgkgIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sCgkgIC8vIFNlY3Rpb24gMTMuMy4zLjcgUnVudGltZSBTZW1hbnRpY3M6IEtleWVkQmluZGluZ0luaXRpYWxpemF0aW9uLgoJICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHsKCSAgICBzdGFydCA9IDAKCSAgfQoJICAvLyBSZXR1cm4gZWFybHkgaWYgc3RhcnQgPiB0aGlzLmxlbmd0aC4gRG9uZSBoZXJlIHRvIHByZXZlbnQgcG90ZW50aWFsIHVpbnQzMgoJICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LgoJICBpZiAoc3RhcnQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHJldHVybiAnJwoJICB9CgoJICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHsKCSAgICBlbmQgPSB0aGlzLmxlbmd0aAoJICB9CgoJICBpZiAoZW5kIDw9IDApIHsKCSAgICByZXR1cm4gJycKCSAgfQoKCSAgLy8gRm9yY2UgY29lcnNpb24gdG8gdWludDMyLiBUaGlzIHdpbGwgYWxzbyBjb2VyY2UgZmFsc2V5L05hTiB2YWx1ZXMgdG8gMC4KCSAgZW5kID4+Pj0gMAoJICBzdGFydCA+Pj49IDAKCgkgIGlmIChlbmQgPD0gc3RhcnQpIHsKCSAgICByZXR1cm4gJycKCSAgfQoKCSAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCcKCgkgIHdoaWxlICh0cnVlKSB7CgkgICAgc3dpdGNoIChlbmNvZGluZykgewoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgY2FzZSAndXRmOCc6CgkgICAgICBjYXNlICd1dGYtOCc6CgkgICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBjYXNlICdhc2NpaSc6CgkgICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgY2FzZSAnbGF0aW4xJzoKCSAgICAgIGNhc2UgJ2JpbmFyeSc6CgkgICAgICAgIHJldHVybiBsYXRpbjFTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ3VjczInOgoJICAgICAgY2FzZSAndWNzLTInOgoJICAgICAgY2FzZSAndXRmMTZsZSc6CgkgICAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBkZWZhdWx0OgoJICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKQoJICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKCSAgICB9CgkgIH0KCX0KCgkvLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdAoJLy8gQnVmZmVyIGluc3RhbmNlcy4KCUJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZQoKCWZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHsKCSAgdmFyIGkgPSBiW25dCgkgIGJbbl0gPSBiW21dCgkgIGJbbV0gPSBpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkgewoJICB2YXIgbGVuID0gdGhpcy5sZW5ndGgKCSAgaWYgKGxlbiAlIDIgIT09IDApIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKQoJICB9CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDIpIHsKCSAgICBzd2FwKHRoaXMsIGksIGkgKyAxKQoJICB9CgkgIHJldHVybiB0aGlzCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkgewoJICB2YXIgbGVuID0gdGhpcy5sZW5ndGgKCSAgaWYgKGxlbiAlIDQgIT09IDApIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKQoJICB9CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHsKCSAgICBzd2FwKHRoaXMsIGksIGkgKyAzKQoJICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKQoJICB9CgkgIHJldHVybiB0aGlzCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkgewoJICB2YXIgbGVuID0gdGhpcy5sZW5ndGgKCSAgaWYgKGxlbiAlIDggIT09IDApIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKQoJICB9CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHsKCSAgICBzd2FwKHRoaXMsIGksIGkgKyA3KQoJICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KQoJICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KQoJICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KQoJICB9CgkgIHJldHVybiB0aGlzCgl9CgoJQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHsKCSAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMAoJICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJycKCSAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKQoJICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKCX0KCglCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikgewoJICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCgkgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZQoJICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDAKCX0KCglCdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHsKCSAgdmFyIHN0ciA9ICcnCgkgIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTCgkgIGlmICh0aGlzLmxlbmd0aCA+IDApIHsKCSAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKQoJICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICcKCSAgfQoJICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+JwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKCSAgfQoKCSAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHsKCSAgICBzdGFydCA9IDAKCSAgfQoJICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHsKCSAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMAoJICB9CgkgIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkgewoJICAgIHRoaXNTdGFydCA9IDAKCSAgfQoJICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoCgkgIH0KCgkgIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKQoJICB9CgoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDAKCSAgfQoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHsKCSAgICByZXR1cm4gLTEKCSAgfQoJICBpZiAoc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDEKCSAgfQoKCSAgc3RhcnQgPj4+PSAwCgkgIGVuZCA+Pj49IDAKCSAgdGhpc1N0YXJ0ID4+Pj0gMAoJICB0aGlzRW5kID4+Pj0gMAoKCSAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDAKCgkgIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydAoJICB2YXIgeSA9IGVuZCAtIHN0YXJ0CgkgIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KQoKCSAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpCgkgIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpCgoJICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7CgkgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7CgkgICAgICB4ID0gdGhpc0NvcHlbaV0KCSAgICAgIHkgPSB0YXJnZXRDb3B5W2ldCgkgICAgICBicmVhawoJICAgIH0KCSAgfQoKCSAgaWYgKHggPCB5KSByZXR1cm4gLTEKCSAgaWYgKHkgPCB4KSByZXR1cm4gMQoJICByZXR1cm4gMAoJfQoKCS8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCwKCS8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuCgkvLwoJLy8gQXJndW1lbnRzOgoJLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2gKCS8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyCgkvLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzIKCS8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nCgkvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZgoJZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7CgkgIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaAoJICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xCgoJICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldAoJICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0CgkgICAgYnl0ZU9mZnNldCA9IDAKCSAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikgewoJICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmCgkgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7CgkgICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwCgkgIH0KCSAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLgoJICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHsKCSAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCAiZm9vIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyCgkgICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpCgkgIH0KCgkgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyCgkgIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0CgkgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHsKCSAgICBpZiAoZGlyKSByZXR1cm4gLTEKCSAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMQoJICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7CgkgICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDAKCSAgICBlbHNlIHJldHVybiAtMQoJICB9CgoJICAvLyBOb3JtYWxpemUgdmFsCgkgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewoJICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpCgkgIH0KCgkgIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mCgkgIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkgewoJICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHMKCSAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgewoJICAgICAgcmV0dXJuIC0xCgkgICAgfQoJICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpCgkgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKCSAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV0KCSAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYKCSAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHsKCSAgICAgIGlmIChkaXIpIHsKCSAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCkKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KQoJICAgICAgfQoJICAgIH0KCSAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikKCSAgfQoKCSAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJykKCX0KCglmdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7CgkgIHZhciBpbmRleFNpemUgPSAxCgkgIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoCgkgIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoCgoJICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkgewoJICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpCgkgICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHwKCSAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykgewoJICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7CgkgICAgICAgIHJldHVybiAtMQoJICAgICAgfQoJICAgICAgaW5kZXhTaXplID0gMgoJICAgICAgYXJyTGVuZ3RoIC89IDIKCSAgICAgIHZhbExlbmd0aCAvPSAyCgkgICAgICBieXRlT2Zmc2V0IC89IDIKCSAgICB9CgkgIH0KCgkgIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkgewoJICAgIGlmIChpbmRleFNpemUgPT09IDEpIHsKCSAgICAgIHJldHVybiBidWZbaV0KCSAgICB9IGVsc2UgewoJICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSkKCSAgICB9CgkgIH0KCgkgIHZhciBpCgkgIGlmIChkaXIpIHsKCSAgICB2YXIgZm91bmRJbmRleCA9IC0xCgkgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7CgkgICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7CgkgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGkKCSAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4CgkgICAgICAgIGZvdW5kSW5kZXggPSAtMQoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aAoJICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7CgkgICAgICB2YXIgZm91bmQgPSB0cnVlCgkgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7CgkgICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHsKCSAgICAgICAgICBmb3VuZCA9IGZhbHNlCgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaQoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIC0xCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CgkgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgewoJICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSkKCX0KCglCdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKCSAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKQoJfQoKCWZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMAoJICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldAoJICBpZiAoIWxlbmd0aCkgewoJICAgIGxlbmd0aCA9IHJlbWFpbmluZwoJICB9IGVsc2UgewoJICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpCgkgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewoJICAgICAgbGVuZ3RoID0gcmVtYWluaW5nCgkgICAgfQoJICB9CgoJICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0cwoJICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aAoJICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJykKCgkgIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7CgkgICAgbGVuZ3RoID0gc3RyTGVuIC8gMgoJICB9CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKCSAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KQoJICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaQoJICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZAoJICB9CgkgIHJldHVybiBpCgl9CgoJZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglmdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCgl9CgoJZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgl9CgoJZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCgl9CgoJZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7CgkgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpCgkgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkgewoJICAgIGVuY29kaW5nID0gJ3V0ZjgnCgkgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGgKCSAgICBvZmZzZXQgPSAwCgkgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKQoJICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgZW5jb2RpbmcgPSBvZmZzZXQKCSAgICBsZW5ndGggPSB0aGlzLmxlbmd0aAoJICAgIG9mZnNldCA9IDAKCSAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSkKCSAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7CgkgICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAoJICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7CgkgICAgICBsZW5ndGggPSBsZW5ndGggfCAwCgkgICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCcKCSAgICB9IGVsc2UgewoJICAgICAgZW5jb2RpbmcgPSBsZW5ndGgKCSAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZAoJICAgIH0KCSAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xMwoJICB9IGVsc2UgewoJICAgIHRocm93IG5ldyBFcnJvcigKCSAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCcKCSAgICApCgkgIH0KCgkgIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldAoJICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmcKCgkgIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJykKCSAgfQoKCSAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCcKCgkgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCgkgIGZvciAoOzspIHsKCSAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CgkgICAgICBjYXNlICdoZXgnOgoJICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBjYXNlICd1dGY4JzoKCSAgICAgIGNhc2UgJ3V0Zi04JzoKCSAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ2FzY2lpJzoKCSAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBjYXNlICdsYXRpbjEnOgoJICAgICAgY2FzZSAnYmluYXJ5JzoKCSAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgoJICAgICAgY2FzZSAnYmFzZTY0JzoKCSAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGUKCSAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgoJICAgICAgY2FzZSAndWNzMic6CgkgICAgICBjYXNlICd1Y3MtMic6CgkgICAgICBjYXNlICd1dGYxNmxlJzoKCSAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKCSAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGRlZmF1bHQ6CgkgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKQoJICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpCgkgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZQoJICAgIH0KCSAgfQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHsKCSAgcmV0dXJuIHsKCSAgICB0eXBlOiAnQnVmZmVyJywKCSAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMCkKCSAgfQoJfQoKCWZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKCSAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkgewoJICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpCgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSkKCSAgfQoJfQoKCWZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCkKCSAgdmFyIHJlcyA9IFtdCgoJICB2YXIgaSA9IHN0YXJ0CgkgIHdoaWxlIChpIDwgZW5kKSB7CgkgICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXQoJICAgIHZhciBjb2RlUG9pbnQgPSBudWxsCgkgICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0CgkgICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDMKCSAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMgoJICAgICAgOiAxCgoJICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHsKCSAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnQKCgkgICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHsKCSAgICAgICAgY2FzZSAxOgoJICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7CgkgICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGUKCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgY2FzZSAyOgoJICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCgkgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKCSAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKQoJICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7CgkgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgY2FzZSAzOgoJICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCgkgICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXQoJICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkgewoJICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpCgkgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7CgkgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgY2FzZSA0OgoJICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCgkgICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXQoJICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdCgkgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKCSAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKQoJICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7CgkgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICB9CgkgICAgfQoKCSAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CgkgICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhCgkgICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlCgkgICAgICBjb2RlUG9pbnQgPSAweEZGRkQKCSAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxCgkgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHsKCSAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpCgkgICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMAoJICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKQoJICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkYKCSAgICB9CgoJICAgIHJlcy5wdXNoKGNvZGVQb2ludCkKCSAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2UKCSAgfQoKCSAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpCgl9CgoJLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoCgkvLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuCgkvLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5Cgl2YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDAKCglmdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHsKCSAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoCgkgIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHsKCSAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKCkKCSAgfQoKCSAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCAiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkIi4KCSAgdmFyIHJlcyA9ICcnCgkgIHZhciBpID0gMAoJICB3aGlsZSAoaSA8IGxlbikgewoJICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KAoJICAgICAgU3RyaW5nLAoJICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKQoJICAgICkKCSAgfQoJICByZXR1cm4gcmVzCgl9CgoJZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIHZhciByZXQgPSAnJwoJICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCgoJICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewoJICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpCgkgIH0KCSAgcmV0dXJuIHJldAoJfQoKCWZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKCSAgdmFyIHJldCA9ICcnCgkgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCkKCgkgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7CgkgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKQoJICB9CgkgIHJldHVybiByZXQKCX0KCglmdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIHZhciBsZW4gPSBidWYubGVuZ3RoCgoJICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwCgkgIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW4KCgkgIHZhciBvdXQgPSAnJwoJICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewoJICAgIG91dCArPSB0b0hleChidWZbaV0pCgkgIH0KCSAgcmV0dXJuIG91dAoJfQoKCWZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKQoJICB2YXIgcmVzID0gJycKCSAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikgewoJICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KQoJICB9CgkgIHJldHVybiByZXMKCX0KCglCdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHsKCSAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoCgkgIHN0YXJ0ID0gfn5zdGFydAoJICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kCgoJICBpZiAoc3RhcnQgPCAwKSB7CgkgICAgc3RhcnQgKz0gbGVuCgkgICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwCgkgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHsKCSAgICBzdGFydCA9IGxlbgoJICB9CgoJICBpZiAoZW5kIDwgMCkgewoJICAgIGVuZCArPSBsZW4KCSAgICBpZiAoZW5kIDwgMCkgZW5kID0gMAoJICB9IGVsc2UgaWYgKGVuZCA+IGxlbikgewoJICAgIGVuZCA9IGxlbgoJICB9CgoJICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0CgoJICB2YXIgbmV3QnVmCgkgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewoJICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkKCSAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZQoJICB9IGVsc2UgewoJICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0CgkgICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKQoJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkgewoJICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdCgkgICAgfQoJICB9CgoJICByZXR1cm4gbmV3QnVmCgl9CgoJLyoKCSAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLgoJICovCglmdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkgewoJICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKQoJICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgfCAwCgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKQoKCSAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XQoJICB2YXIgbXVsID0gMQoJICB2YXIgaSA9IDAKCSAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAoJICB9CgoJICByZXR1cm4gdmFsCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgfCAwCgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCSAgfQoKCSAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXQoJICB2YXIgbXVsID0gMQoJICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsCgkgIH0KCgkgIHJldHVybiB2YWwKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKQoJICByZXR1cm4gdGhpc1tvZmZzZXRdCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKCSAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKCSAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCgkgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfAoJICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfAoJICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArCgkgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMCkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQoKCSAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICsKCSAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8CgkgICAgdGhpc1tvZmZzZXQgKyAzXSkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgfCAwCgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKQoKCSAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XQoJICB2YXIgbXVsID0gMQoJICB2YXIgaSA9IDAKCSAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAoJICB9CgkgIG11bCAqPSAweDgwCgoJICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKCSAgcmV0dXJuIHZhbAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgoJICB2YXIgaSA9IGJ5dGVMZW5ndGgKCSAgdmFyIG11bCA9IDEKCSAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXQoJICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsCgkgIH0KCSAgbXVsICo9IDB4ODAKCgkgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpCgoJICByZXR1cm4gdmFsCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpCgkgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSkKCSAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCgkgIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQoJICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCgkgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KQoJICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgoJICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfAoJICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfAoJICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQoKCSAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAoJICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAzXSkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQoJICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpCgkgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOCkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKQoJICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KQoJfQoKCWZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKCSAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignImJ1ZmZlciIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpCgkgIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpCgkgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJykKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxCgkgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApCgkgIH0KCgkgIHZhciBtdWwgPSAxCgkgIHZhciBpID0gMAoJICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkYKCSAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkYKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwCgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxCgkgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApCgkgIH0KCgkgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKCSAgdmFyIG11bCA9IDEKCSAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRgoJICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkYKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgfCAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApCgkgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSkKCSAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKCSAgcmV0dXJuIG9mZnNldCArIDEKCX0KCglmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHsKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDEKCSAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCAyKTsgaSA8IGo7ICsraSkgewoJICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+CgkgICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDgKCSAgfQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKQoJICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQoJICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCgkgIH0gZWxzZSB7CgkgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKCSAgfQoJICByZXR1cm4gb2Zmc2V0ICsgMgoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKQoJICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpCgkgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIH0gZWxzZSB7CgkgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCgkgIH0KCSAgcmV0dXJuIG9mZnNldCArIDIKCX0KCglmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHsKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxCgkgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyArK2kpIHsKCSAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmCgkgIH0KCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgfCAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApCgkgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewoJICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQoJICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KQoJICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCgkgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKCSAgfSBlbHNlIHsKCSAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQoJICB9CgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgdmFsdWUgPSArdmFsdWUKCSAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKQoJICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KQoJICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KQoJICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpCgkgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIH0gZWxzZSB7CgkgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCgkgIH0KCSAgcmV0dXJuIG9mZnNldCArIDQKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgfCAwCgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpCgoJICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KQoJICB9CgoJICB2YXIgaSA9IDAKCSAgdmFyIG11bCA9IDEKCSAgdmFyIHN1YiA9IDAKCSAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGCgkgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CgkgICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHsKCSAgICAgIHN1YiA9IDEKCSAgICB9CgkgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRgoJICB9CgoJICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkKCgkgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpCgkgIH0KCgkgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKCSAgdmFyIG11bCA9IDEKCSAgdmFyIHN1YiA9IDAKCSAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRgoJICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkgewoJICAgICAgc3ViID0gMQoJICAgIH0KCSAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGCgkgIH0KCgkgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApCgkgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSkKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxCgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIHJldHVybiBvZmZzZXQgKyAxCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKQoJICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQoJICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCgkgIH0gZWxzZSB7CgkgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSkKCSAgfQoJICByZXR1cm4gb2Zmc2V0ICsgMgoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgfCAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCkKCSAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CgkgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KQoJICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKQoJICB9IGVsc2UgewoJICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKQoJICB9CgkgIHJldHVybiBvZmZzZXQgKyAyCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApCgkgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewoJICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCgkgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKCSAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNikKCSAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNCkKCSAgfSBlbHNlIHsKCSAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKQoJICB9CgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCB8IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApCgkgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMQoJICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KQoJICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KQoJICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpCgkgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIH0gZWxzZSB7CgkgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCgkgIH0KCSAgcmV0dXJuIG9mZnNldCArIDQKCX0KCglmdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikgewoJICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCgkgIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJykKCX0KCglmdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KQoJICB9CgkgIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KQoJICByZXR1cm4gb2Zmc2V0ICsgNAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCkKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KQoJfQoKCWZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpCgkgIH0KCSAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpCgkgIHJldHVybiBvZmZzZXQgKyA4Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCgl9CgoJLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKQoJQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewoJICBpZiAoIXN0YXJ0KSBzdGFydCA9IDAKCSAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aAoJICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoCgkgIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMAoJICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQKCgkgIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZQoJICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDAKCSAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwCgoJICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zCgkgIGlmICh0YXJnZXRTdGFydCA8IDApIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpCgkgIH0KCSAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKQoJICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJykKCgkgIC8vIEFyZSB3ZSBvb2I/CgkgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGgKCSAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7CgkgICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnQKCSAgfQoKCSAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0CgkgIHZhciBpCgoJICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHsKCSAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmQKCSAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkgewoJICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF0KCSAgICB9CgkgIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0CgkgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7CgkgICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCgKCSAgICAgIHRhcmdldCwKCSAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwKCSAgICAgIHRhcmdldFN0YXJ0CgkgICAgKQoJICB9CgoJICByZXR1cm4gbGVuCgl9CgoJLy8gVXNhZ2U6CgkvLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSkKCS8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKQoJLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pCglCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7CgkgIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6CgkgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewoJICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7CgkgICAgICBlbmNvZGluZyA9IHN0YXJ0CgkgICAgICBzdGFydCA9IDAKCSAgICAgIGVuZCA9IHRoaXMubGVuZ3RoCgkgICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykgewoJICAgICAgZW5jb2RpbmcgPSBlbmQKCSAgICAgIGVuZCA9IHRoaXMubGVuZ3RoCgkgICAgfQoJICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7CgkgICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApCgkgICAgICBpZiAoY29kZSA8IDI1NikgewoJICAgICAgICB2YWwgPSBjb2RlCgkgICAgICB9CgkgICAgfQoJICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHsKCSAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKQoJICAgIH0KCSAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7CgkgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCgkgICAgfQoJICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CgkgICAgdmFsID0gdmFsICYgMjU1CgkgIH0KCgkgIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LgoJICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4JykKCSAgfQoKCSAgaWYgKGVuZCA8PSBzdGFydCkgewoJICAgIHJldHVybiB0aGlzCgkgIH0KCgkgIHN0YXJ0ID0gc3RhcnQgPj4+IDAKCSAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyB0aGlzLmxlbmd0aCA6IGVuZCA+Pj4gMAoKCSAgaWYgKCF2YWwpIHZhbCA9IDAKCgkgIHZhciBpCgkgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewoJICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKCSAgICAgIHRoaXNbaV0gPSB2YWwKCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbCkKCSAgICAgID8gdmFsCgkgICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSkKCSAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoCgkgICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHsKCSAgICAgIHRoaXNbaSArIHN0YXJ0XSA9IGJ5dGVzW2kgJSBsZW5dCgkgICAgfQoJICB9CgoJICByZXR1cm4gdGhpcwoJfQoKCS8vIEhFTFBFUiBGVU5DVElPTlMKCS8vID09PT09PT09PT09PT09PT0KCgl2YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXC8wLTlBLVphLXotX10vZwoKCWZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHsKCSAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxuIGFuZCBcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdAoJICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpCgkgIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJycKCSAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJycKCSAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90CgkgIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkgewoJICAgIHN0ciA9IHN0ciArICc9JwoJICB9CgkgIHJldHVybiBzdHIKCX0KCglmdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHsKCSAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKQoJICByZXR1cm4gc3RyLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAnJykKCX0KCglmdW5jdGlvbiB0b0hleCAobikgewoJICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNikKCSAgcmV0dXJuIG4udG9TdHJpbmcoMTYpCgl9CgoJZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHsKCSAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eQoJICB2YXIgY29kZVBvaW50CgkgIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoCgkgIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbAoJICB2YXIgYnl0ZXMgPSBbXQoKCSAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewoJICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpCgoJICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnQKCSAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkgewoJICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWQKCSAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkgewoJICAgICAgICAvLyBubyBsZWFkIHlldAoJICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7CgkgICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbAoJICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKQoJICAgICAgICAgIGNvbnRpbnVlCgkgICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkgewoJICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWQKCSAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKCSAgICAgICAgICBjb250aW51ZQoJICAgICAgICB9CgoJICAgICAgICAvLyB2YWxpZCBsZWFkCgkgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQKCgkgICAgICAgIGNvbnRpbnVlCgkgICAgICB9CgoJICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvdwoJICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkgewoJICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKCSAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludAoJICAgICAgICBjb250aW51ZQoJICAgICAgfQoKCSAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyCgkgICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwCgkgICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7CgkgICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkCgkgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKCSAgICB9CgoJICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsCgoJICAgIC8vIGVuY29kZSB1dGY4CgkgICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHsKCSAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVhawoJICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpCgkgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkgewoJICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCgkgICAgICBieXRlcy5wdXNoKAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCwKCSAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKCSAgICAgICkKCSAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHsKCSAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVhawoJICAgICAgYnl0ZXMucHVzaCgKCSAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsCgkgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCwKCSAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKCSAgICAgICkKCSAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7CgkgICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWsKCSAgICAgIGJ5dGVzLnB1c2goCgkgICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCwKCSAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCgkgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCgkgICAgICApCgkgICAgfSBlbHNlIHsKCSAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JykKCSAgICB9CgkgIH0KCgkgIHJldHVybiBieXRlcwoJfQoKCWZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7CgkgIHZhciBieXRlQXJyYXkgPSBbXQoJICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkgewoJICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLgoJICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRikKCSAgfQoJICByZXR1cm4gYnl0ZUFycmF5Cgl9CgoJZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHsKCSAgdmFyIGMsIGhpLCBsbwoJICB2YXIgYnl0ZUFycmF5ID0gW10KCSAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKCSAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWsKCgkgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpCgkgICAgaGkgPSBjID4+IDgKCSAgICBsbyA9IGMgJSAyNTYKCSAgICBieXRlQXJyYXkucHVzaChsbykKCSAgICBieXRlQXJyYXkucHVzaChoaSkKCSAgfQoKCSAgcmV0dXJuIGJ5dGVBcnJheQoJfQoKCWZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikgewoJICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpCgl9CgoJZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKCSAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrCgkgICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldCgkgIH0KCSAgcmV0dXJuIGkKCX0KCglmdW5jdGlvbiBpc25hbiAodmFsKSB7CgkgIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZQoJfQoKCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSkKCi8qKiovIH0sCi8qIDkgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJJ3VzZSBzdHJpY3QnCgoJZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aAoJZXhwb3J0cy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5CglleHBvcnRzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5CgoJdmFyIGxvb2t1cCA9IFtdCgl2YXIgcmV2TG9va3VwID0gW10KCXZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXkKCgl2YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJwoJZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKCSAgbG9va3VwW2ldID0gY29kZVtpXQoJICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGkKCX0KCglyZXZMb29rdXBbJy0nLmNoYXJDb2RlQXQoMCldID0gNjIKCXJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2MwoKCWZ1bmN0aW9uIHBsYWNlSG9sZGVyc0NvdW50IChiNjQpIHsKCSAgdmFyIGxlbiA9IGI2NC5sZW5ndGgKCSAgaWYgKGxlbiAlIDQgPiAwKSB7CgkgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JykKCSAgfQoKCSAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycykKCSAgLy8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdAoJICAvLyByZXByZXNlbnQgb25lIGJ5dGUKCSAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzCgkgIC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2UKCSAgcmV0dXJuIGI2NFtsZW4gLSAyXSA9PT0gJz0nID8gMiA6IGI2NFtsZW4gLSAxXSA9PT0gJz0nID8gMSA6IDAKCX0KCglmdW5jdGlvbiBieXRlTGVuZ3RoIChiNjQpIHsKCSAgLy8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhCgkgIHJldHVybiBiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnNDb3VudChiNjQpCgl9CgoJZnVuY3Rpb24gdG9CeXRlQXJyYXkgKGI2NCkgewoJICB2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFycgoJICB2YXIgbGVuID0gYjY0Lmxlbmd0aAoJICBwbGFjZUhvbGRlcnMgPSBwbGFjZUhvbGRlcnNDb3VudChiNjQpCgoJICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKQoKCSAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFycwoJICBsID0gcGxhY2VIb2xkZXJzID4gMCA/IGxlbiAtIDQgOiBsZW4KCgkgIHZhciBMID0gMAoKCSAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykgewoJICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCAxMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXQoJICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGCgkgICAgYXJyW0wrK10gPSAodG1wID4+IDgpICYgMHhGRgoJICAgIGFycltMKytdID0gdG1wICYgMHhGRgoJICB9CgoJICBpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7CgkgICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNCkKCSAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKCSAgfSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHsKCSAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxMCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMikKCSAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCgkgICAgYXJyW0wrK10gPSB0bXAgJiAweEZGCgkgIH0KCgkgIHJldHVybiBhcnIKCX0KCglmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkgewoJICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl0KCX0KCglmdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHsKCSAgdmFyIHRtcAoJICB2YXIgb3V0cHV0ID0gW10KCSAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHsKCSAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pCgkgICAgb3V0cHV0LnB1c2godHJpcGxldFRvQmFzZTY0KHRtcCkpCgkgIH0KCSAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQoJfQoKCWZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7CgkgIHZhciB0bXAKCSAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aAoJICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXMKCSAgdmFyIG91dHB1dCA9ICcnCgkgIHZhciBwYXJ0cyA9IFtdCgkgIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzIC8vIG11c3QgYmUgbXVsdGlwbGUgb2YgMwoKCSAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlcgoJICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7CgkgICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaSwgKGkgKyBtYXhDaHVua0xlbmd0aCkgPiBsZW4yID8gbGVuMiA6IChpICsgbWF4Q2h1bmtMZW5ndGgpKSkKCSAgfQoKCSAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlcwoJICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkgewoJICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdCgkgICAgb3V0cHV0ICs9IGxvb2t1cFt0bXAgPj4gMl0KCSAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXQoJICAgIG91dHB1dCArPSAnPT0nCgkgIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikgewoJICAgIHRtcCA9ICh1aW50OFtsZW4gLSAyXSA8PCA4KSArICh1aW50OFtsZW4gLSAxXSkKCSAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF0KCSAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPj4gNCkgJiAweDNGXQoJICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA8PCAyKSAmIDB4M0ZdCgkgICAgb3V0cHV0ICs9ICc9JwoJICB9CgoJICBwYXJ0cy5wdXNoKG91dHB1dCkKCgkgIHJldHVybiBwYXJ0cy5qb2luKCcnKQoJfQoKCi8qKiovIH0sCi8qIDEwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCWV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CgkgIHZhciBlLCBtCgkgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxCgkgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxCgkgIHZhciBlQmlhcyA9IGVNYXggPj4gMQoJICB2YXIgbkJpdHMgPSAtNwoJICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwCgkgIHZhciBkID0gaXNMRSA/IC0xIDogMQoJICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXQoKCSAgaSArPSBkCgoJICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKQoJICBzID4+PSAoLW5CaXRzKQoJICBuQml0cyArPSBlTGVuCgkgIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgoJICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKQoJICBlID4+PSAoLW5CaXRzKQoJICBuQml0cyArPSBtTGVuCgkgIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgoJICBpZiAoZSA9PT0gMCkgewoJICAgIGUgPSAxIC0gZUJpYXMKCSAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7CgkgICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpCgkgIH0gZWxzZSB7CgkgICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKQoJICAgIGUgPSBlIC0gZUJpYXMKCSAgfQoJICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKQoJfQoKCWV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKCSAgdmFyIGUsIG0sIGMKCSAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEKCSAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEKCSAgdmFyIGVCaWFzID0gZU1heCA+PiAxCgkgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMCkKCSAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKQoJICB2YXIgZCA9IGlzTEUgPyAxIDogLTEKCSAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDAKCgkgIHZhbHVlID0gTWF0aC5hYnModmFsdWUpCgoJICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkgewoJICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMAoJICAgIGUgPSBlTWF4CgkgIH0gZWxzZSB7CgkgICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpCgkgICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkgewoJICAgICAgZS0tCgkgICAgICBjICo9IDIKCSAgICB9CgkgICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7CgkgICAgICB2YWx1ZSArPSBydCAvIGMKCSAgICB9IGVsc2UgewoJICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpCgkgICAgfQoJICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewoJICAgICAgZSsrCgkgICAgICBjIC89IDIKCSAgICB9CgoJICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkgewoJICAgICAgbSA9IDAKCSAgICAgIGUgPSBlTWF4CgkgICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkgewoJICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pCgkgICAgICBlID0gZSArIGVCaWFzCgkgICAgfSBlbHNlIHsKCSAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKQoJICAgICAgZSA9IDAKCSAgICB9CgkgIH0KCgkgIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9CgoJICBlID0gKGUgPDwgbUxlbikgfCBtCgkgIGVMZW4gKz0gbUxlbgoJICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgoJICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjgKCX0KCgovKioqLyB9LAovKiAxMSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgl2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZzsKCgltb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikgewoJICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7Cgl9OwoKCi8qKiovIH0sCi8qIDEyICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCS8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlcgoJdmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9OwoKCS8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdAoJLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzCgkvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhCgkvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLgoKCXZhciBjYWNoZWRTZXRUaW1lb3V0OwoJdmFyIGNhY2hlZENsZWFyVGltZW91dDsKCglmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkgewoJICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpOwoJfQoJZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7CgkgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTsKCX0KCShmdW5jdGlvbiAoKSB7CgkgICAgdHJ5IHsKCSAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7CgkgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0OwoJICAgICAgICB9CgkgICAgfSBjYXRjaCAoZSkgewoJICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDsKCSAgICB9CgkgICAgdHJ5IHsKCSAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHsKCSAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7CgkgICAgICAgIH0KCSAgICB9IGNhdGNoIChlKSB7CgkgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7CgkgICAgfQoJfSAoKSkKCWZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7CgkgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHsKCSAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zCgkgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7CgkgICAgfQoJICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkCgkgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7CgkgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0OwoJICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApOwoJICAgIH0KCSAgICB0cnkgewoJICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzCgkgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7CgkgICAgfSBjYXRjaChlKXsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseQoJICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApOwoJICAgICAgICB9IGNhdGNoKGUpewoJICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IKCSAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTsKCSAgICAgICAgfQoJICAgIH0KCgoJfQoJZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikgewoJICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkgewoJICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnMKCSAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpOwoJICAgIH0KCSAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkCgkgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7CgkgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDsKCSAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpOwoJICAgIH0KCSAgICB0cnkgewoJICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzCgkgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTsKCSAgICB9IGNhdGNoIChlKXsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHkKCSAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpOwoJICAgICAgICB9IGNhdGNoIChlKXsKCSAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLgoJICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dAoJICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7CgkgICAgICAgIH0KCSAgICB9CgoKCgl9Cgl2YXIgcXVldWUgPSBbXTsKCXZhciBkcmFpbmluZyA9IGZhbHNlOwoJdmFyIGN1cnJlbnRRdWV1ZTsKCXZhciBxdWV1ZUluZGV4ID0gLTE7CgoJZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkgewoJICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkgewoJICAgICAgICByZXR1cm47CgkgICAgfQoJICAgIGRyYWluaW5nID0gZmFsc2U7CgkgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHsKCSAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTsKCSAgICB9IGVsc2UgewoJICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CgkgICAgfQoJICAgIGlmIChxdWV1ZS5sZW5ndGgpIHsKCSAgICAgICAgZHJhaW5RdWV1ZSgpOwoJICAgIH0KCX0KCglmdW5jdGlvbiBkcmFpblF1ZXVlKCkgewoJICAgIGlmIChkcmFpbmluZykgewoJICAgICAgICByZXR1cm47CgkgICAgfQoJICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spOwoJICAgIGRyYWluaW5nID0gdHJ1ZTsKCgkgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDsKCSAgICB3aGlsZShsZW4pIHsKCSAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7CgkgICAgICAgIHF1ZXVlID0gW107CgkgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHsKCSAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHsKCSAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcXVldWVJbmRleCA9IC0xOwoJICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7CgkgICAgfQoJICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7CgkgICAgZHJhaW5pbmcgPSBmYWxzZTsKCSAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7Cgl9CgoJcHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHsKCSAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CgkgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsKCSAgICAgICAgfQoJICAgIH0KCSAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpOwoJICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7CgkgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7CgkgICAgfQoJfTsKCgkvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzCglmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHsKCSAgICB0aGlzLmZ1biA9IGZ1bjsKCSAgICB0aGlzLmFycmF5ID0gYXJyYXk7Cgl9CglJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7CgkgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7Cgl9OwoJcHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJzsKCXByb2Nlc3MuYnJvd3NlciA9IHRydWU7Cglwcm9jZXNzLmVudiA9IHt9OwoJcHJvY2Vzcy5hcmd2ID0gW107Cglwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXMKCXByb2Nlc3MudmVyc2lvbnMgPSB7fTsKCglmdW5jdGlvbiBub29wKCkge30KCglwcm9jZXNzLm9uID0gbm9vcDsKCXByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wOwoJcHJvY2Vzcy5vbmNlID0gbm9vcDsKCXByb2Nlc3Mub2ZmID0gbm9vcDsKCXByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wOwoJcHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wOwoJcHJvY2Vzcy5lbWl0ID0gbm9vcDsKCglwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTsKCX07CgoJcHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTsKCXByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7CgkgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTsKCX07Cglwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9OwoKCi8qKiovIH0sCi8qIDEzICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtleHBvcnRzLmZldGNoID0gaXNGdW5jdGlvbihnbG9iYWwuZmV0Y2gpICYmIGlzRnVuY3Rpb24oZ2xvYmFsLlJlYWRhYmxlU3RyZWFtKQoKCWV4cG9ydHMuYmxvYkNvbnN0cnVjdG9yID0gZmFsc2UKCXRyeSB7CgkJbmV3IEJsb2IoW25ldyBBcnJheUJ1ZmZlcigxKV0pCgkJZXhwb3J0cy5ibG9iQ29uc3RydWN0b3IgPSB0cnVlCgl9IGNhdGNoIChlKSB7fQoKCS8vIFRoZSB4aHIgcmVxdWVzdCB0byBleGFtcGxlLmNvbSBtYXkgdmlvbGF0ZSBzb21lIHJlc3RyaWN0aXZlIENTUCBjb25maWd1cmF0aW9ucywKCS8vIHNvIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBicm93c2VyIHRoYXQgc3VwcG9ydHMgYGZldGNoYCwgYXZvaWQgY2FsbGluZyBnZXRYSFIoKQoJLy8gYW5kIGFzc3VtZSBzdXBwb3J0IGZvciBjZXJ0YWluIGZlYXR1cmVzIGJlbG93LgoJdmFyIHhocgoJZnVuY3Rpb24gZ2V0WEhSICgpIHsKCQkvLyBDYWNoZSB0aGUgeGhyIHZhbHVlCgkJaWYgKHhociAhPT0gdW5kZWZpbmVkKSByZXR1cm4geGhyCgoJCWlmIChnbG9iYWwuWE1MSHR0cFJlcXVlc3QpIHsKCQkJeGhyID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpCgkJCS8vIElmIFhEb21haW5SZXF1ZXN0IGlzIGF2YWlsYWJsZSAoaWUgb25seSwgd2hlcmUgeGhyIG1pZ2h0IG5vdCB3b3JrCgkJCS8vIGNyb3NzIGRvbWFpbiksIHVzZSB0aGUgcGFnZSBsb2NhdGlvbi4gT3RoZXJ3aXNlIHVzZSBleGFtcGxlLmNvbQoJCQkvLyBOb3RlOiB0aGlzIGRvZXNuJ3QgYWN0dWFsbHkgbWFrZSBhbiBodHRwIHJlcXVlc3QuCgkJCXRyeSB7CgkJCQl4aHIub3BlbignR0VUJywgZ2xvYmFsLlhEb21haW5SZXF1ZXN0ID8gJy8nIDogJ2h0dHBzOi8vZXhhbXBsZS5jb20nKQoJCQl9IGNhdGNoKGUpIHsKCQkJCXhociA9IG51bGwKCQkJfQoJCX0gZWxzZSB7CgkJCS8vIFNlcnZpY2Ugd29ya2VycyBkb24ndCBoYXZlIFhIUgoJCQl4aHIgPSBudWxsCgkJfQoJCXJldHVybiB4aHIKCX0KCglmdW5jdGlvbiBjaGVja1R5cGVTdXBwb3J0ICh0eXBlKSB7CgkJdmFyIHhociA9IGdldFhIUigpCgkJaWYgKCF4aHIpIHJldHVybiBmYWxzZQoJCXRyeSB7CgkJCXhoci5yZXNwb25zZVR5cGUgPSB0eXBlCgkJCXJldHVybiB4aHIucmVzcG9uc2VUeXBlID09PSB0eXBlCgkJfSBjYXRjaCAoZSkge30KCQlyZXR1cm4gZmFsc2UKCX0KCgkvLyBGb3Igc29tZSBzdHJhbmdlIHJlYXNvbiwgU2FmYXJpIDcuMCByZXBvcnRzIHR5cGVvZiBnbG9iYWwuQXJyYXlCdWZmZXIgPT09ICdvYmplY3QnLgoJLy8gU2FmYXJpIDcuMSBhcHBlYXJzIHRvIGhhdmUgZml4ZWQgdGhpcyBidWcuCgl2YXIgaGF2ZUFycmF5QnVmZmVyID0gdHlwZW9mIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcKCXZhciBoYXZlU2xpY2UgPSBoYXZlQXJyYXlCdWZmZXIgJiYgaXNGdW5jdGlvbihnbG9iYWwuQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlKQoKCS8vIElmIGZldGNoIGlzIHN1cHBvcnRlZCwgdGhlbiBhcnJheWJ1ZmZlciB3aWxsIGJlIHN1cHBvcnRlZCB0b28uIFNraXAgY2FsbGluZwoJLy8gY2hlY2tUeXBlU3VwcG9ydCgpLCBzaW5jZSB0aGF0IGNhbGxzIGdldFhIUigpLgoJZXhwb3J0cy5hcnJheWJ1ZmZlciA9IGV4cG9ydHMuZmV0Y2ggfHwgKGhhdmVBcnJheUJ1ZmZlciAmJiBjaGVja1R5cGVTdXBwb3J0KCdhcnJheWJ1ZmZlcicpKQoKCS8vIFRoZXNlIG5leHQgdHdvIHRlc3RzIHVuYXZvaWRhYmx5IHNob3cgd2FybmluZ3MgaW4gQ2hyb21lLiBTaW5jZSBmZXRjaCB3aWxsIGFsd2F5cwoJLy8gYmUgdXNlZCBpZiBpdCdzIGF2YWlsYWJsZSwganVzdCByZXR1cm4gZmFsc2UgZm9yIHRoZXNlIHRvIGF2b2lkIHRoZSB3YXJuaW5ncy4KCWV4cG9ydHMubXNzdHJlYW0gPSAhZXhwb3J0cy5mZXRjaCAmJiBoYXZlU2xpY2UgJiYgY2hlY2tUeXBlU3VwcG9ydCgnbXMtc3RyZWFtJykKCWV4cG9ydHMubW96Y2h1bmtlZGFycmF5YnVmZmVyID0gIWV4cG9ydHMuZmV0Y2ggJiYgaGF2ZUFycmF5QnVmZmVyICYmCgkJY2hlY2tUeXBlU3VwcG9ydCgnbW96LWNodW5rZWQtYXJyYXlidWZmZXInKQoKCS8vIElmIGZldGNoIGlzIHN1cHBvcnRlZCwgdGhlbiBvdmVycmlkZU1pbWVUeXBlIHdpbGwgYmUgc3VwcG9ydGVkIHRvby4gU2tpcCBjYWxsaW5nCgkvLyBnZXRYSFIoKS4KCWV4cG9ydHMub3ZlcnJpZGVNaW1lVHlwZSA9IGV4cG9ydHMuZmV0Y2ggfHwgKGdldFhIUigpID8gaXNGdW5jdGlvbihnZXRYSFIoKS5vdmVycmlkZU1pbWVUeXBlKSA6IGZhbHNlKQoKCWV4cG9ydHMudmJBcnJheSA9IGlzRnVuY3Rpb24oZ2xvYmFsLlZCQXJyYXkpCgoJZnVuY3Rpb24gaXNGdW5jdGlvbiAodmFsdWUpIHsKCQlyZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nCgl9CgoJeGhyID0gbnVsbCAvLyBIZWxwIGdjCgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKQoKLyoqKi8gfSwKLyogMTQgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7CgkgIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlCgkgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7CgkgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3IKCSAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwgewoJICAgICAgY29uc3RydWN0b3I6IHsKCSAgICAgICAgdmFsdWU6IGN0b3IsCgkgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAoJICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCgkgICAgICB9CgkgICAgfSk7CgkgIH07Cgl9IGVsc2UgewoJICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2VycwoJICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3RvcikgewoJICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yCgkgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge30KCSAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlCgkgICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKQoJICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvcgoJICB9Cgl9CgoKLyoqKi8gfSwKLyogMTUgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIEJ1ZmZlciwgZ2xvYmFsKSB7dmFyIGNhcGFiaWxpdHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQoJdmFyIGluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKCXZhciBzdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQoKCXZhciByU3RhdGVzID0gZXhwb3J0cy5yZWFkeVN0YXRlcyA9IHsKCQlVTlNFTlQ6IDAsCgkJT1BFTkVEOiAxLAoJCUhFQURFUlNfUkVDRUlWRUQ6IDIsCgkJTE9BRElORzogMywKCQlET05FOiA0Cgl9CgoJdmFyIEluY29taW5nTWVzc2FnZSA9IGV4cG9ydHMuSW5jb21pbmdNZXNzYWdlID0gZnVuY3Rpb24gKHhociwgcmVzcG9uc2UsIG1vZGUpIHsKCQl2YXIgc2VsZiA9IHRoaXMKCQlzdHJlYW0uUmVhZGFibGUuY2FsbChzZWxmKQoKCQlzZWxmLl9tb2RlID0gbW9kZQoJCXNlbGYuaGVhZGVycyA9IHt9CgkJc2VsZi5yYXdIZWFkZXJzID0gW10KCQlzZWxmLnRyYWlsZXJzID0ge30KCQlzZWxmLnJhd1RyYWlsZXJzID0gW10KCgkJLy8gRmFrZSB0aGUgJ2Nsb3NlJyBldmVudCwgYnV0IG9ubHkgb25jZSAnZW5kJyBmaXJlcwoJCXNlbGYub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHsKCQkJLy8gVGhlIG5leHRUaWNrIGlzIG5lY2Vzc2FyeSB0byBwcmV2ZW50IHRoZSAncmVxdWVzdCcgbW9kdWxlIGZyb20gY2F1c2luZyBhbiBpbmZpbml0ZSBsb29wCgkJCXByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgewoJCQkJc2VsZi5lbWl0KCdjbG9zZScpCgkJCX0pCgkJfSkKCgkJaWYgKG1vZGUgPT09ICdmZXRjaCcpIHsKCQkJc2VsZi5fZmV0Y2hSZXNwb25zZSA9IHJlc3BvbnNlCgoJCQlzZWxmLnVybCA9IHJlc3BvbnNlLnVybAoJCQlzZWxmLnN0YXR1c0NvZGUgPSByZXNwb25zZS5zdGF0dXMKCQkJc2VsZi5zdGF0dXNNZXNzYWdlID0gcmVzcG9uc2Uuc3RhdHVzVGV4dAoJCQkKCQkJcmVzcG9uc2UuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlciwga2V5KXsKCQkJCXNlbGYuaGVhZGVyc1trZXkudG9Mb3dlckNhc2UoKV0gPSBoZWFkZXIKCQkJCXNlbGYucmF3SGVhZGVycy5wdXNoKGtleSwgaGVhZGVyKQoJCQl9KQoKCgkJCS8vIFRPRE86IHRoaXMgZG9lc24ndCByZXNwZWN0IGJhY2twcmVzc3VyZS4gT25jZSBXcml0YWJsZVN0cmVhbSBpcyBhdmFpbGFibGUsIHRoaXMgY2FuIGJlIGZpeGVkCgkJCXZhciByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpCgkJCWZ1bmN0aW9uIHJlYWQgKCkgewoJCQkJcmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKCQkJCQlpZiAoc2VsZi5fZGVzdHJveWVkKQoJCQkJCQlyZXR1cm4KCQkJCQlpZiAocmVzdWx0LmRvbmUpIHsKCQkJCQkJc2VsZi5wdXNoKG51bGwpCgkJCQkJCXJldHVybgoJCQkJCX0KCQkJCQlzZWxmLnB1c2gobmV3IEJ1ZmZlcihyZXN1bHQudmFsdWUpKQoJCQkJCXJlYWQoKQoJCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7CgkJCQkJc2VsZi5lbWl0KCdlcnJvcicsIGVycikKCQkJCX0pCgkJCX0KCQkJcmVhZCgpCgoJCX0gZWxzZSB7CgkJCXNlbGYuX3hociA9IHhocgoJCQlzZWxmLl9wb3MgPSAwCgoJCQlzZWxmLnVybCA9IHhoci5yZXNwb25zZVVSTAoJCQlzZWxmLnN0YXR1c0NvZGUgPSB4aHIuc3RhdHVzCgkJCXNlbGYuc3RhdHVzTWVzc2FnZSA9IHhoci5zdGF0dXNUZXh0CgkJCXZhciBoZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KC9ccj9cbi8pCgkJCWhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7CgkJCQl2YXIgbWF0Y2hlcyA9IGhlYWRlci5tYXRjaCgvXihbXjpdKyk6XHMqKC4qKS8pCgkJCQlpZiAobWF0Y2hlcykgewoJCQkJCXZhciBrZXkgPSBtYXRjaGVzWzFdLnRvTG93ZXJDYXNlKCkKCQkJCQlpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHsKCQkJCQkJaWYgKHNlbGYuaGVhZGVyc1trZXldID09PSB1bmRlZmluZWQpIHsKCQkJCQkJCXNlbGYuaGVhZGVyc1trZXldID0gW10KCQkJCQkJfQoJCQkJCQlzZWxmLmhlYWRlcnNba2V5XS5wdXNoKG1hdGNoZXNbMl0pCgkJCQkJfSBlbHNlIGlmIChzZWxmLmhlYWRlcnNba2V5XSAhPT0gdW5kZWZpbmVkKSB7CgkJCQkJCXNlbGYuaGVhZGVyc1trZXldICs9ICcsICcgKyBtYXRjaGVzWzJdCgkJCQkJfSBlbHNlIHsKCQkJCQkJc2VsZi5oZWFkZXJzW2tleV0gPSBtYXRjaGVzWzJdCgkJCQkJfQoJCQkJCXNlbGYucmF3SGVhZGVycy5wdXNoKG1hdGNoZXNbMV0sIG1hdGNoZXNbMl0pCgkJCQl9CgkJCX0pCgoJCQlzZWxmLl9jaGFyc2V0ID0gJ3gtdXNlci1kZWZpbmVkJwoJCQlpZiAoIWNhcGFiaWxpdHkub3ZlcnJpZGVNaW1lVHlwZSkgewoJCQkJdmFyIG1pbWVUeXBlID0gc2VsZi5yYXdIZWFkZXJzWydtaW1lLXR5cGUnXQoJCQkJaWYgKG1pbWVUeXBlKSB7CgkJCQkJdmFyIGNoYXJzZXRNYXRjaCA9IG1pbWVUeXBlLm1hdGNoKC87XHMqY2hhcnNldD0oW147XSkoO3wkKS8pCgkJCQkJaWYgKGNoYXJzZXRNYXRjaCkgewoJCQkJCQlzZWxmLl9jaGFyc2V0ID0gY2hhcnNldE1hdGNoWzFdLnRvTG93ZXJDYXNlKCkKCQkJCQl9CgkJCQl9CgkJCQlpZiAoIXNlbGYuX2NoYXJzZXQpCgkJCQkJc2VsZi5fY2hhcnNldCA9ICd1dGYtOCcgLy8gYmVzdCBndWVzcwoJCQl9CgkJfQoJfQoKCWluaGVyaXRzKEluY29taW5nTWVzc2FnZSwgc3RyZWFtLlJlYWRhYmxlKQoKCUluY29taW5nTWVzc2FnZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAoKSB7fQoKCUluY29taW5nTWVzc2FnZS5wcm90b3R5cGUuX29uWEhSUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7CgkJdmFyIHNlbGYgPSB0aGlzCgoJCXZhciB4aHIgPSBzZWxmLl94aHIKCgkJdmFyIHJlc3BvbnNlID0gbnVsbAoJCXN3aXRjaCAoc2VsZi5fbW9kZSkgewoJCQljYXNlICd0ZXh0OnZiYXJyYXknOiAvLyBGb3IgSUU5CgkJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT09IHJTdGF0ZXMuRE9ORSkKCQkJCQlicmVhawoJCQkJdHJ5IHsKCQkJCQkvLyBUaGlzIGZhaWxzIGluIElFOAoJCQkJCXJlc3BvbnNlID0gbmV3IGdsb2JhbC5WQkFycmF5KHhoci5yZXNwb25zZUJvZHkpLnRvQXJyYXkoKQoJCQkJfSBjYXRjaCAoZSkge30KCQkJCWlmIChyZXNwb25zZSAhPT0gbnVsbCkgewoJCQkJCXNlbGYucHVzaChuZXcgQnVmZmVyKHJlc3BvbnNlKSkKCQkJCQlicmVhawoJCQkJfQoJCQkJLy8gRmFsbHMgdGhyb3VnaCBpbiBJRTgJCgkJCWNhc2UgJ3RleHQnOgoJCQkJdHJ5IHsgLy8gVGhpcyB3aWxsIGZhaWwgd2hlbiByZWFkeVN0YXRlID0gMyBpbiBJRTkuIFN3aXRjaCBtb2RlIGFuZCB3YWl0IGZvciByZWFkeVN0YXRlID0gNAoJCQkJCXJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dAoJCQkJfSBjYXRjaCAoZSkgewoJCQkJCXNlbGYuX21vZGUgPSAndGV4dDp2YmFycmF5JwoJCQkJCWJyZWFrCgkJCQl9CgkJCQlpZiAocmVzcG9uc2UubGVuZ3RoID4gc2VsZi5fcG9zKSB7CgkJCQkJdmFyIG5ld0RhdGEgPSByZXNwb25zZS5zdWJzdHIoc2VsZi5fcG9zKQoJCQkJCWlmIChzZWxmLl9jaGFyc2V0ID09PSAneC11c2VyLWRlZmluZWQnKSB7CgkJCQkJCXZhciBidWZmZXIgPSBuZXcgQnVmZmVyKG5ld0RhdGEubGVuZ3RoKQoJCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IG5ld0RhdGEubGVuZ3RoOyBpKyspCgkJCQkJCQlidWZmZXJbaV0gPSBuZXdEYXRhLmNoYXJDb2RlQXQoaSkgJiAweGZmCgoJCQkJCQlzZWxmLnB1c2goYnVmZmVyKQoJCQkJCX0gZWxzZSB7CgkJCQkJCXNlbGYucHVzaChuZXdEYXRhLCBzZWxmLl9jaGFyc2V0KQoJCQkJCX0KCQkJCQlzZWxmLl9wb3MgPSByZXNwb25zZS5sZW5ndGgKCQkJCX0KCQkJCWJyZWFrCgkJCWNhc2UgJ2FycmF5YnVmZmVyJzoKCQkJCWlmICh4aHIucmVhZHlTdGF0ZSAhPT0gclN0YXRlcy5ET05FIHx8ICF4aHIucmVzcG9uc2UpCgkJCQkJYnJlYWsKCQkJCXJlc3BvbnNlID0geGhyLnJlc3BvbnNlCgkJCQlzZWxmLnB1c2gobmV3IEJ1ZmZlcihuZXcgVWludDhBcnJheShyZXNwb25zZSkpKQoJCQkJYnJlYWsKCQkJY2FzZSAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInOiAvLyB0YWtlIHdob2xlCgkJCQlyZXNwb25zZSA9IHhoci5yZXNwb25zZQoJCQkJaWYgKHhoci5yZWFkeVN0YXRlICE9PSByU3RhdGVzLkxPQURJTkcgfHwgIXJlc3BvbnNlKQoJCQkJCWJyZWFrCgkJCQlzZWxmLnB1c2gobmV3IEJ1ZmZlcihuZXcgVWludDhBcnJheShyZXNwb25zZSkpKQoJCQkJYnJlYWsKCQkJY2FzZSAnbXMtc3RyZWFtJzoKCQkJCXJlc3BvbnNlID0geGhyLnJlc3BvbnNlCgkJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT09IHJTdGF0ZXMuTE9BRElORykKCQkJCQlicmVhawoJCQkJdmFyIHJlYWRlciA9IG5ldyBnbG9iYWwuTVNTdHJlYW1SZWFkZXIoKQoJCQkJcmVhZGVyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7CgkJCQkJaWYgKHJlYWRlci5yZXN1bHQuYnl0ZUxlbmd0aCA+IHNlbGYuX3BvcykgewoJCQkJCQlzZWxmLnB1c2gobmV3IEJ1ZmZlcihuZXcgVWludDhBcnJheShyZWFkZXIucmVzdWx0LnNsaWNlKHNlbGYuX3BvcykpKSkKCQkJCQkJc2VsZi5fcG9zID0gcmVhZGVyLnJlc3VsdC5ieXRlTGVuZ3RoCgkJCQkJfQoJCQkJfQoJCQkJcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKCQkJCQlzZWxmLnB1c2gobnVsbCkKCQkJCX0KCQkJCS8vIHJlYWRlci5vbmVycm9yID0gPz8/IC8vIFRPRE86IHRoaXMKCQkJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihyZXNwb25zZSkKCQkJCWJyZWFrCgkJfQoKCQkvLyBUaGUgbXMtc3RyZWFtIGNhc2UgaGFuZGxlcyBlbmQgc2VwYXJhdGVseSBpbiByZWFkZXIub25sb2FkKCkKCQlpZiAoc2VsZi5feGhyLnJlYWR5U3RhdGUgPT09IHJTdGF0ZXMuRE9ORSAmJiBzZWxmLl9tb2RlICE9PSAnbXMtc3RyZWFtJykgewoJCQlzZWxmLnB1c2gobnVsbCkKCQl9Cgl9CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTIpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLkJ1ZmZlciwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpCgovKioqLyB9LAovKiAxNiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykge3ZhciBTdHJlYW0gPSAoZnVuY3Rpb24gKCl7CgkgIHRyeSB7CgkgICAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMTcpOyAvLyBoYWNrIHRvIGZpeCBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgaXNzdWUgd2hlbiB1c2VkIHdpdGggYnJvd3NlcmlmeQoJICB9IGNhdGNoKF8pe30KCX0oKSk7CglleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTsKCWV4cG9ydHMuU3RyZWFtID0gU3RyZWFtIHx8IGV4cG9ydHM7CglleHBvcnRzLlJlYWRhYmxlID0gZXhwb3J0czsKCWV4cG9ydHMuV3JpdGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCWV4cG9ydHMuRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7CglleHBvcnRzLlRyYW5zZm9ybSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwoJZXhwb3J0cy5QYXNzVGhyb3VnaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpOwoKCWlmICghcHJvY2Vzcy5icm93c2VyICYmIHByb2Nlc3MuZW52LlJFQURBQkxFX1NUUkVBTSA9PT0gJ2Rpc2FibGUnICYmIFN0cmVhbSkgewoJICBtb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTsKCX0KCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxMikpKQoKLyoqKi8gfSwKLyogMTcgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCgkvLwoJLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKCS8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKCS8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKCS8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKCS8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKCS8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQoJLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6CgkvLwoJLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKCS8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoJLy8KCS8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCgkvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCgkvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCgkvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKCS8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgoJLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQoJLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCgltb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTsKCgl2YXIgRUUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KS5FdmVudEVtaXR0ZXI7Cgl2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCglpbmhlcml0cyhTdHJlYW0sIEVFKTsKCVN0cmVhbS5SZWFkYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwoJU3RyZWFtLldyaXRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7CglTdHJlYW0uRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7CglTdHJlYW0uVHJhbnNmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7CglTdHJlYW0uUGFzc1Rocm91Z2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTsKCgkvLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjQueAoJU3RyZWFtLlN0cmVhbSA9IFN0cmVhbTsKCgoKCS8vIG9sZC1zdHlsZSBzdHJlYW1zLiAgTm90ZSB0aGF0IHRoZSBwaXBlIG1ldGhvZCAodGhlIG9ubHkgcmVsZXZhbnQKCS8vIHBhcnQgb2YgdGhpcyBjbGFzcykgaXMgb3ZlcnJpZGRlbiBpbiB0aGUgUmVhZGFibGUgY2xhc3MuCgoJZnVuY3Rpb24gU3RyZWFtKCkgewoJICBFRS5jYWxsKHRoaXMpOwoJfQoKCVN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHsKCSAgdmFyIHNvdXJjZSA9IHRoaXM7CgoJICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHsKCSAgICBpZiAoZGVzdC53cml0YWJsZSkgewoJICAgICAgaWYgKGZhbHNlID09PSBkZXN0LndyaXRlKGNodW5rKSAmJiBzb3VyY2UucGF1c2UpIHsKCSAgICAgICAgc291cmNlLnBhdXNlKCk7CgkgICAgICB9CgkgICAgfQoJICB9CgoJICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpOwoKCSAgZnVuY3Rpb24gb25kcmFpbigpIHsKCSAgICBpZiAoc291cmNlLnJlYWRhYmxlICYmIHNvdXJjZS5yZXN1bWUpIHsKCSAgICAgIHNvdXJjZS5yZXN1bWUoKTsKCSAgICB9CgkgIH0KCgkgIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7CgoJICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuCgkgIC8vIHNvdXJjZSBnZXRzIHRoZSAnZW5kJyBvciAnY2xvc2UnIGV2ZW50cy4gIE9ubHkgZGVzdC5lbmQoKSBvbmNlLgoJICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHsKCSAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTsKCSAgICBzb3VyY2Uub24oJ2Nsb3NlJywgb25jbG9zZSk7CgkgIH0KCgkgIHZhciBkaWRPbkVuZCA9IGZhbHNlOwoJICBmdW5jdGlvbiBvbmVuZCgpIHsKCSAgICBpZiAoZGlkT25FbmQpIHJldHVybjsKCSAgICBkaWRPbkVuZCA9IHRydWU7CgoJICAgIGRlc3QuZW5kKCk7CgkgIH0KCgoJICBmdW5jdGlvbiBvbmNsb3NlKCkgewoJICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuOwoJICAgIGRpZE9uRW5kID0gdHJ1ZTsKCgkgICAgaWYgKHR5cGVvZiBkZXN0LmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIGRlc3QuZGVzdHJveSgpOwoJICB9CgoJICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuCgkgIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHsKCSAgICBjbGVhbnVwKCk7CgkgICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHsKCSAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuCgkgICAgfQoJICB9CgoJICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7CgkgIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7CgoJICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFkZGVkLgoJICBmdW5jdGlvbiBjbGVhbnVwKCkgewoJICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7CgkgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTsKCgkgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7CgkgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwoKCSAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CgkgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKCgkgICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTsKCSAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7CgoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7CgkgIH0KCgkgIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7CgkgIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTsKCgkgIGRlc3Qub24oJ2Nsb3NlJywgY2xlYW51cCk7CgoJICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpOwoKCSAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQykKCSAgcmV0dXJuIGRlc3Q7Cgl9OwoKCi8qKiovIH0sCi8qIDE4ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCS8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgoJLy8KCS8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCgkvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCgkvLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCgkvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCgkvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0CgkvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKCS8vIGZvbGxvd2luZyBjb25kaXRpb25zOgoJLy8KCS8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCgkvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCS8vCgkvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwoJLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgoJLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgoJLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCgkvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKCS8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKCS8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgoJZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkgewoJICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307CgkgIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjsKCgkvLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLngKCUV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkOwoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkOwoKCS8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZQoJLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy4KCUV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7CgoJLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzCgkvLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC4KCUV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikgewoJICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKQoJICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7CgkgIHRoaXMuX21heExpc3RlbmVycyA9IG47CgkgIHJldHVybiB0aGlzOwoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7CgkgIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7CgoJICBpZiAoIXRoaXMuX2V2ZW50cykKCSAgICB0aGlzLl9ldmVudHMgPSB7fTsKCgkgIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy4KCSAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHsKCSAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fAoJICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHsKCSAgICAgIGVyID0gYXJndW1lbnRzWzFdOwoJICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHsKCSAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50CgkgICAgICB9IGVsc2UgewoJICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyCgkgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCAiZXJyb3IiIGV2ZW50LiAoJyArIGVyICsgJyknKTsKCSAgICAgICAgZXJyLmNvbnRleHQgPSBlcjsKCSAgICAgICAgdGhyb3cgZXJyOwoJICAgICAgfQoJICAgIH0KCSAgfQoKCSAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCgkgIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSkKCSAgICByZXR1cm4gZmFsc2U7CgoJICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkgewoJICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkgewoJICAgICAgLy8gZmFzdCBjYXNlcwoJICAgICAgY2FzZSAxOgoJICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7CgkgICAgICAgIGJyZWFrOwoJICAgICAgY2FzZSAyOgoJICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTsKCSAgICAgICAgYnJlYWs7CgkgICAgICBjYXNlIDM6CgkgICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7CgkgICAgICAgIGJyZWFrOwoJICAgICAgLy8gc2xvd2VyCgkgICAgICBkZWZhdWx0OgoJICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKCSAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICB9CgkgIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHsKCSAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKCSAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7CgkgICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDsKCSAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspCgkgICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7CgkgIH0KCgkgIHJldHVybiB0cnVlOwoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKCSAgdmFyIG07CgoJICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKQoJICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgoJICBpZiAoIXRoaXMuX2V2ZW50cykKCSAgICB0aGlzLl9ldmVudHMgPSB7fTsKCgkgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09ICJuZXdMaXN0ZW5lciIhIEJlZm9yZQoJICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCAibmV3TGlzdGVuZXIiLgoJICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKQoJICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLAoJICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/CgkgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpOwoKCSAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pCgkgICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuCgkgICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7CgkgIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpCgkgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLgoJICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKCSAgZWxzZQoJICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LgoJICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTsKCgkgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrCgkgIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7CgkgICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7CgkgICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzOwoJICAgIH0gZWxzZSB7CgkgICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7CgkgICAgfQoKCSAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkgewoJICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7CgkgICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICsKCSAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArCgkgICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLAoJICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTsKCSAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykgewoJICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwCgkgICAgICAgIGNvbnNvbGUudHJhY2UoKTsKCSAgICAgIH0KCSAgICB9CgkgIH0KCgkgIHJldHVybiB0aGlzOwoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewoJICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKQoJICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgoJICB2YXIgZmlyZWQgPSBmYWxzZTsKCgkgIGZ1bmN0aW9uIGcoKSB7CgkgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTsKCgkgICAgaWYgKCFmaXJlZCkgewoJICAgICAgZmlyZWQgPSB0cnVlOwoJICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCSAgICB9CgkgIH0KCgkgIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjsKCSAgdGhpcy5vbih0eXBlLCBnKTsKCgkgIHJldHVybiB0aGlzOwoJfTsKCgkvLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZAoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CgkgIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpOwoKCSAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKCSAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKCSAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSkKCSAgICByZXR1cm4gdGhpczsKCgkgIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07CgkgIGxlbmd0aCA9IGxpc3QubGVuZ3RoOwoJICBwb3NpdGlvbiA9IC0xOwoKCSAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8CgkgICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHsKCSAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwoJICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpCgkgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpOwoKCSAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkgewoJICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHsKCSAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fAoJICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkgewoJICAgICAgICBwb3NpdGlvbiA9IGk7CgkgICAgICAgIGJyZWFrOwoJICAgICAgfQoJICAgIH0KCgkgICAgaWYgKHBvc2l0aW9uIDwgMCkKCSAgICAgIHJldHVybiB0aGlzOwoKCSAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHsKCSAgICAgIGxpc3QubGVuZ3RoID0gMDsKCSAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CgkgICAgfSBlbHNlIHsKCSAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTsKCSAgICB9CgoJICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpCgkgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpOwoJICB9CgoJICByZXR1cm4gdGhpczsKCX07CgoJRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7CgkgIHZhciBrZXksIGxpc3RlbmVyczsKCgkgIGlmICghdGhpcy5fZXZlbnRzKQoJICAgIHJldHVybiB0aGlzOwoKCSAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdAoJICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikgewoJICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKQoJICAgICAgdGhpcy5fZXZlbnRzID0ge307CgkgICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKQoJICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKCSAgICByZXR1cm4gdGhpczsKCSAgfQoKCSAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzCgkgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CgkgICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7CgkgICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTsKCSAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7CgkgICAgfQoJICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpOwoJICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoJICAgIHJldHVybiB0aGlzOwoJICB9CgoJICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07CgoJICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7CgkgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpOwoJICB9IGVsc2UgaWYgKGxpc3RlbmVycykgewoJICAgIC8vIExJRk8gb3JkZXIKCSAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aCkKCSAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7CgkgIH0KCSAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKCgkgIHJldHVybiB0aGlzOwoJfTsKCglFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHsKCSAgdmFyIHJldDsKCSAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSkKCSAgICByZXQgPSBbXTsKCSAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKQoJICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dOwoJICBlbHNlCgkgICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7CgkgIHJldHVybiByZXQ7Cgl9OwoKCUV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHsKCSAgaWYgKHRoaXMuX2V2ZW50cykgewoJICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKCSAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSkKCSAgICAgIHJldHVybiAxOwoJICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpCgkgICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7CgkgIH0KCSAgcmV0dXJuIDA7Cgl9OwoKCUV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkgewoJICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpOwoJfTsKCglmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewoJICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKCX0KCglmdW5jdGlvbiBpc051bWJlcihhcmcpIHsKCSAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwoJfQoKCWZ1bmN0aW9uIGlzT2JqZWN0KGFyZykgewoJICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwoJfQoKCWZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewoJICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cgl9CgoKLyoqKi8gfSwKLyogMTkgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQoKCi8qKiovIH0sCi8qIDIwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBzZXRJbW1lZGlhdGUpIHsvLyBBIGJpdCBzaW1wbGVyIHRoYW4gcmVhZGFibGUgc3RyZWFtcy4KCS8vIEltcGxlbWVudCBhbiBhc3luYyAuX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbAoJLy8gdGhlIGRyYWluIGV2ZW50IGVtaXNzaW9uIGFuZCBidWZmZXJpbmcuCgoJJ3VzZSBzdHJpY3QnOwoKCW1vZHVsZS5leHBvcnRzID0gV3JpdGFibGU7CgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCXZhciBwcm9jZXNzTmV4dFRpY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgYXN5bmNXcml0ZSA9ICFwcm9jZXNzLmJyb3dzZXIgJiYgWyd2MC4xMCcsICd2MC45LiddLmluZGV4T2YocHJvY2Vzcy52ZXJzaW9uLnNsaWNlKDAsIDUpKSA+IC0xID8gc2V0SW1tZWRpYXRlIDogcHJvY2Vzc05leHRUaWNrOwoJLyo8L3JlcGxhY2VtZW50PiovCgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCXZhciBEdXBsZXg7CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCglXcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTsKCgkvKjxyZXBsYWNlbWVudD4qLwoJdmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCXV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgaW50ZXJuYWxVdGlsID0gewoJICBkZXByZWNhdGU6IF9fd2VicGFja19yZXF1aXJlX18oMjUpCgl9OwoJLyo8L3JlcGxhY2VtZW50PiovCgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCXZhciBTdHJlYW07CgkoZnVuY3Rpb24gKCkgewoJICB0cnkgewoJICAgIFN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOwoJICB9IGNhdGNoIChfKSB7fSBmaW5hbGx5IHsKCSAgICBpZiAoIVN0cmVhbSkgU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCkuRXZlbnRFbWl0dGVyOwoJICB9Cgl9KSgpOwoJLyo8L3JlcGxhY2VtZW50PiovCgoJdmFyIEJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpLkJ1ZmZlcjsKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgYnVmZmVyU2hpbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpOwoJLyo8L3JlcGxhY2VtZW50PiovCgoJdXRpbC5pbmhlcml0cyhXcml0YWJsZSwgU3RyZWFtKTsKCglmdW5jdGlvbiBub3AoKSB7fQoKCWZ1bmN0aW9uIFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpIHsKCSAgdGhpcy5jaHVuayA9IGNodW5rOwoJICB0aGlzLmVuY29kaW5nID0gZW5jb2Rpbmc7CgkgIHRoaXMuY2FsbGJhY2sgPSBjYjsKCSAgdGhpcy5uZXh0ID0gbnVsbDsKCX0KCglmdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkgewoJICBEdXBsZXggPSBEdXBsZXggfHwgX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7CgoJICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCgkgIC8vIG9iamVjdCBzdHJlYW0gZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGlzIHN0cmVhbQoJICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuCgkgIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlOwoKCSAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7CgoJICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlCgkgIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmCgkgIC8vIHRoZSBlbnRpcmUgYnVmZmVyIGlzIG5vdCBmbHVzaGVkIGltbWVkaWF0ZWx5IG9uIHdyaXRlKCkKCSAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyazsKCSAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKCSAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gaHdtIHx8IGh3bSA9PT0gMCA/IGh3bSA6IGRlZmF1bHRId207CgoJICAvLyBjYXN0IHRvIGludHMuCgkgIHRoaXMuaGlnaFdhdGVyTWFyayA9IH4gfnRoaXMuaGlnaFdhdGVyTWFyazsKCgkgIC8vIGRyYWluIGV2ZW50IGZsYWcuCgkgIHRoaXMubmVlZERyYWluID0gZmFsc2U7CgkgIC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpCgkgIHRoaXMuZW5kaW5nID0gZmFsc2U7CgkgIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWQKCSAgdGhpcy5lbmRlZCA9IGZhbHNlOwoJICAvLyB3aGVuICdmaW5pc2gnIGlzIGVtaXR0ZWQKCSAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOwoKCSAgLy8gc2hvdWxkIHdlIGRlY29kZSBzdHJpbmdzIGludG8gYnVmZmVycyBiZWZvcmUgcGFzc2luZyB0byBfd3JpdGU/CgkgIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZwoJICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLgoJICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlOwoJICB0aGlzLmRlY29kZVN0cmluZ3MgPSAhbm9EZWNvZGU7CgoJICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCgkgIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS4KCSAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLgoJICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsKCgkgIC8vIG5vdCBhbiBhY3R1YWwgYnVmZmVyIHdlIGtlZXAgdHJhY2sgb2YsIGJ1dCBhIG1lYXN1cmVtZW50CgkgIC8vIG9mIGhvdyBtdWNoIHdlJ3JlIHdhaXRpbmcgdG8gZ2V0IHB1c2hlZCB0byBzb21lIHVuZGVybHlpbmcKCSAgLy8gc29ja2V0IG9yIGZpbGUuCgkgIHRoaXMubGVuZ3RoID0gMDsKCgkgIC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuCgkgIHRoaXMud3JpdGluZyA9IGZhbHNlOwoKCSAgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbAoJICB0aGlzLmNvcmtlZCA9IDA7CgoJICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwKCSAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnkKCSAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgImxhdGVyIiBzaG91bGQgZ2VuZXJhbGx5IGFsc28KCSAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuCgkgIHRoaXMuc3luYyA9IHRydWU7CgoJICAvLyBhIGZsYWcgdG8ga25vdyBpZiB3ZSdyZSBwcm9jZXNzaW5nIHByZXZpb3VzbHkgYnVmZmVyZWQgaXRlbXMsIHdoaWNoCgkgIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0CgkgIC8vIGVuZCB1cCBpbiBhbiBvdmVybGFwcGVkIG9ud3JpdGUgc2l0dWF0aW9uLgoJICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTsKCgkgIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYikKCSAgdGhpcy5vbndyaXRlID0gZnVuY3Rpb24gKGVyKSB7CgkgICAgb253cml0ZShzdHJlYW0sIGVyKTsKCSAgfTsKCgkgIC8vIHRoZSBjYWxsYmFjayB0aGF0IHRoZSB1c2VyIHN1cHBsaWVzIHRvIHdyaXRlKGNodW5rLGVuY29kaW5nLGNiKQoJICB0aGlzLndyaXRlY2IgPSBudWxsOwoKCSAgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLgoJICB0aGlzLndyaXRlbGVuID0gMDsKCgkgIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKCSAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKCgkgIC8vIG51bWJlciBvZiBwZW5kaW5nIHVzZXItc3VwcGxpZWQgd3JpdGUgY2FsbGJhY2tzCgkgIC8vIHRoaXMgbXVzdCBiZSAwIGJlZm9yZSAnZmluaXNoJyBjYW4gYmUgZW1pdHRlZAoJICB0aGlzLnBlbmRpbmdjYiA9IDA7CgoJICAvLyBlbWl0IHByZWZpbmlzaCBpZiB0aGUgb25seSB0aGluZyB3ZSdyZSB3YWl0aW5nIGZvciBpcyBfd3JpdGUgY2JzCgkgIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zCgkgIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTsKCgkgIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluCgkgIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7CgoJICAvLyBjb3VudCBidWZmZXJlZCByZXF1ZXN0cwoJICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDsKCgkgIC8vIGFsbG9jYXRlIHRoZSBmaXJzdCBDb3JrZWRSZXF1ZXN0LCB0aGVyZSBpcyBhbHdheXMKCSAgLy8gb25lIGFsbG9jYXRlZCBhbmQgZnJlZSB0byB1c2UsIGFuZCB3ZSBtYWludGFpbiBhdCBtb3N0IHR3bwoJICB0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHRoaXMpOwoJfQoKCVdyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHsKCSAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDsKCSAgdmFyIG91dCA9IFtdOwoJICB3aGlsZSAoY3VycmVudCkgewoJICAgIG91dC5wdXNoKGN1cnJlbnQpOwoJICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7CgkgIH0KCSAgcmV0dXJuIG91dDsKCX07CgoJKGZ1bmN0aW9uICgpIHsKCSAgdHJ5IHsKCSAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUsICdidWZmZXInLCB7CgkgICAgICBnZXQ6IGludGVybmFsVXRpbC5kZXByZWNhdGUoZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5nZXRCdWZmZXIoKTsKCSAgICAgIH0sICdfd3JpdGFibGVTdGF0ZS5idWZmZXIgaXMgZGVwcmVjYXRlZC4gVXNlIF93cml0YWJsZVN0YXRlLmdldEJ1ZmZlciAnICsgJ2luc3RlYWQuJykKCSAgICB9KTsKCSAgfSBjYXRjaCAoXykge30KCX0pKCk7CgoJLy8gVGVzdCBfd3JpdGFibGVTdGF0ZSBmb3IgaW5oZXJpdGFuY2UgdG8gYWNjb3VudCBmb3IgRHVwbGV4IHN0cmVhbXMsCgkvLyB3aG9zZSBwcm90b3R5cGUgY2hhaW4gb25seSBwb2ludHMgdG8gUmVhZGFibGUuCgl2YXIgcmVhbEhhc0luc3RhbmNlOwoJaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmhhc0luc3RhbmNlICYmIHR5cGVvZiBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXSA9PT0gJ2Z1bmN0aW9uJykgewoJICByZWFsSGFzSW5zdGFuY2UgPSBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXTsKCSAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLCBTeW1ib2wuaGFzSW5zdGFuY2UsIHsKCSAgICB2YWx1ZTogZnVuY3Rpb24gKG9iamVjdCkgewoJICAgICAgaWYgKHJlYWxIYXNJbnN0YW5jZS5jYWxsKHRoaXMsIG9iamVjdCkpIHJldHVybiB0cnVlOwoKCSAgICAgIHJldHVybiBvYmplY3QgJiYgb2JqZWN0Ll93cml0YWJsZVN0YXRlIGluc3RhbmNlb2YgV3JpdGFibGVTdGF0ZTsKCSAgICB9CgkgIH0pOwoJfSBlbHNlIHsKCSAgcmVhbEhhc0luc3RhbmNlID0gZnVuY3Rpb24gKG9iamVjdCkgewoJICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiB0aGlzOwoJICB9OwoJfQoKCWZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHsKCSAgRHVwbGV4ID0gRHVwbGV4IHx8IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKCSAgLy8gV3JpdGFibGUgY3RvciBpcyBhcHBsaWVkIHRvIER1cGxleGVzLCB0b28uCgkgIC8vIGByZWFsSGFzSW5zdGFuY2VgIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHVzaW5nIHBsYWluIGBpbnN0YW5jZW9mYAoJICAvLyB3b3VsZCByZXR1cm4gZmFsc2UsIGFzIG5vIGBfd3JpdGFibGVTdGF0ZWAgcHJvcGVydHkgaXMgYXR0YWNoZWQuCgoJICAvLyBUcnlpbmcgdG8gdXNlIHRoZSBjdXN0b20gYGluc3RhbmNlb2ZgIGZvciBXcml0YWJsZSBoZXJlIHdpbGwgYWxzbyBicmVhayB0aGUKCSAgLy8gTm9kZS5qcyBMYXp5VHJhbnNmb3JtIGltcGxlbWVudGF0aW9uLCB3aGljaCBoYXMgYSBub24tdHJpdmlhbCBnZXR0ZXIgZm9yCgkgIC8vIGBfd3JpdGFibGVTdGF0ZWAgdGhhdCB3b3VsZCBsZWFkIHRvIGluZmluaXRlIHJlY3Vyc2lvbi4KCSAgaWYgKCFyZWFsSGFzSW5zdGFuY2UuY2FsbChXcml0YWJsZSwgdGhpcykgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgewoJICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7CgkgIH0KCgkgIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTsKCgkgIC8vIGxlZ2FjeS4KCSAgdGhpcy53cml0YWJsZSA9IHRydWU7CgoJICBpZiAob3B0aW9ucykgewoJICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGUgPSBvcHRpb25zLndyaXRlOwoKCSAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjsKCSAgfQoKCSAgU3RyZWFtLmNhbGwodGhpcyk7Cgl9CgoJLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLgoJV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7CgkgIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLCBub3QgcmVhZGFibGUnKSk7Cgl9OwoKCWZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikgewoJICB2YXIgZXIgPSBuZXcgRXJyb3IoJ3dyaXRlIGFmdGVyIGVuZCcpOwoJICAvLyBUT0RPOiBkZWZlciBlcnJvciBldmVudHMgY29uc2lzdGVudGx5IGV2ZXJ5d2hlcmUsIG5vdCBqdXN0IHRoZSBjYgoJICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CgkgIHByb2Nlc3NOZXh0VGljayhjYiwgZXIpOwoJfQoKCS8vIElmIHdlIGdldCBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBidWZmZXIsIHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkLAoJLy8gYW5kIHdlJ3JlIG5vdCBpbiBvYmplY3RNb2RlLCB0aGVuIHRoYXQncyBhbiBlcnJvci4KCS8vIE90aGVyd2lzZSBzdHJlYW0gY2h1bmtzIGFyZSBhbGwgY29uc2lkZXJlZCB0byBiZSBvZiBsZW5ndGg9MSwgYW5kIHRoZQoJLy8gd2F0ZXJtYXJrcyBkZXRlcm1pbmUgaG93IG1hbnkgb2JqZWN0cyB0byBrZWVwIGluIHRoZSBidWZmZXIsIHJhdGhlciB0aGFuCgkvLyBob3cgbWFueSBieXRlcyBvciBjaGFyYWN0ZXJzLgoJZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHsKCSAgdmFyIHZhbGlkID0gdHJ1ZTsKCSAgdmFyIGVyID0gZmFsc2U7CgkgIC8vIEFsd2F5cyB0aHJvdyBlcnJvciBpZiBhIG51bGwgaXMgd3JpdHRlbgoJICAvLyBpZiB3ZSBhcmUgbm90IGluIG9iamVjdCBtb2RlIHRoZW4gdGhyb3cKCSAgLy8gaWYgaXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG9yIHVuZGVmaW5lZC4KCSAgaWYgKGNodW5rID09PSBudWxsKSB7CgkgICAgZXIgPSBuZXcgVHlwZUVycm9yKCdNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbScpOwoJICB9IGVsc2UgaWYgKCFCdWZmZXIuaXNCdWZmZXIoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkgewoJICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpOwoJICB9CgkgIGlmIChlcikgewoJICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTsKCSAgICBwcm9jZXNzTmV4dFRpY2soY2IsIGVyKTsKCSAgICB2YWxpZCA9IGZhbHNlOwoJICB9CgkgIHJldHVybiB2YWxpZDsKCX0KCglXcml0YWJsZS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoJICB2YXIgcmV0ID0gZmFsc2U7CgoJICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7CgkgICAgY2IgPSBlbmNvZGluZzsKCSAgICBlbmNvZGluZyA9IG51bGw7CgkgIH0KCgkgIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CgoJICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKSBjYiA9IG5vcDsKCgkgIGlmIChzdGF0ZS5lbmRlZCkgd3JpdGVBZnRlckVuZCh0aGlzLCBjYik7ZWxzZSBpZiAodmFsaWRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGNiKSkgewoJICAgIHN0YXRlLnBlbmRpbmdjYisrOwoJICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgY2IpOwoJICB9CgoJICByZXR1cm4gcmV0OwoJfTsKCglXcml0YWJsZS5wcm90b3R5cGUuY29yayA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKCgkgIHN0YXRlLmNvcmtlZCsrOwoJfTsKCglXcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKCSAgaWYgKHN0YXRlLmNvcmtlZCkgewoJICAgIHN0YXRlLmNvcmtlZC0tOwoKCSAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7CgkgIH0KCX07CgoJV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykgewoJICAvLyBub2RlOjpQYXJzZUVuY29kaW5nKCkgcmVxdWlyZXMgbG93ZXIgY2FzZS4KCSAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpIGVuY29kaW5nID0gZW5jb2RpbmcudG9Mb3dlckNhc2UoKTsKCSAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywgJ3VjczInLCAndWNzLTInLCAndXRmMTZsZScsICd1dGYtMTZsZScsICdyYXcnXS5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTsKCSAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZzsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHsKCSAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHsKCSAgICBjaHVuayA9IGJ1ZmZlclNoaW0uZnJvbShjaHVuaywgZW5jb2RpbmcpOwoJICB9CgkgIHJldHVybiBjaHVuazsKCX0KCgkvLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXMKCS8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlCgkvLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLgoJZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CgkgIGNodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7CgoJICBpZiAoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgZW5jb2RpbmcgPSAnYnVmZmVyJzsKCSAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoKCSAgc3RhdGUubGVuZ3RoICs9IGxlbjsKCgkgIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOwoJICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS4KCSAgaWYgKCFyZXQpIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7CgoJICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHsKCSAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CgkgICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG5ldyBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKTsKCSAgICBpZiAobGFzdCkgewoJICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKCSAgICB9IGVsc2UgewoJICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKCSAgICB9CgkgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTsKCSAgfSBlbHNlIHsKCSAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpOwoJICB9CgoJICByZXR1cm4gcmV0OwoJfQoKCWZ1bmN0aW9uIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgd3JpdGV2LCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpIHsKCSAgc3RhdGUud3JpdGVsZW4gPSBsZW47CgkgIHN0YXRlLndyaXRlY2IgPSBjYjsKCSAgc3RhdGUud3JpdGluZyA9IHRydWU7CgkgIHN0YXRlLnN5bmMgPSB0cnVlOwoJICBpZiAod3JpdGV2KSBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7ZWxzZSBzdHJlYW0uX3dyaXRlKGNodW5rLCBlbmNvZGluZywgc3RhdGUub253cml0ZSk7CgkgIHN0YXRlLnN5bmMgPSBmYWxzZTsKCX0KCglmdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7CgkgIC0tc3RhdGUucGVuZGluZ2NiOwoJICBpZiAoc3luYykgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7ZWxzZSBjYihlcik7CgoJICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKCSAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwoJfQoKCWZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkgewoJICBzdGF0ZS53cml0aW5nID0gZmFsc2U7CgkgIHN0YXRlLndyaXRlY2IgPSBudWxsOwoJICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47CgkgIHN0YXRlLndyaXRlbGVuID0gMDsKCX0KCglmdW5jdGlvbiBvbndyaXRlKHN0cmVhbSwgZXIpIHsKCSAgdmFyIHN0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlOwoJICB2YXIgc3luYyA9IHN0YXRlLnN5bmM7CgkgIHZhciBjYiA9IHN0YXRlLndyaXRlY2I7CgoJICBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpOwoKCSAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHsKCSAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldAoJICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpOwoKCSAgICBpZiAoIWZpbmlzaGVkICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSB7CgkgICAgICBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKTsKCSAgICB9CgoJICAgIGlmIChzeW5jKSB7CgkgICAgICAvKjxyZXBsYWNlbWVudD4qLwoJICAgICAgYXN5bmNXcml0ZShhZnRlcldyaXRlLCBzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpOwoJICAgICAgLyo8L3JlcGxhY2VtZW50PiovCgkgICAgfSBlbHNlIHsKCSAgICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpOwoJICAgICAgfQoJICB9Cgl9CgoJZnVuY3Rpb24gYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpIHsKCSAgaWYgKCFmaW5pc2hlZCkgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpOwoJICBzdGF0ZS5wZW5kaW5nY2ItLTsKCSAgY2IoKTsKCSAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7Cgl9CgoJLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3QKCS8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm4KCS8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuCglmdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkgewoJICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikgewoJICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlOwoJICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpOwoJICB9Cgl9CgoJLy8gaWYgdGhlcmUncyBzb21ldGhpbmcgaW4gdGhlIGJ1ZmZlciB3YWl0aW5nLCB0aGVuIHByb2Nlc3MgaXQKCWZ1bmN0aW9uIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpIHsKCSAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IHRydWU7CgkgIHZhciBlbnRyeSA9IHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdDsKCgkgIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7CgkgICAgLy8gRmFzdCBjYXNlLCB3cml0ZSBldmVyeXRoaW5nIHVzaW5nIF93cml0ZXYoKQoJICAgIHZhciBsID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQ7CgkgICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheShsKTsKCSAgICB2YXIgaG9sZGVyID0gc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlOwoJICAgIGhvbGRlci5lbnRyeSA9IGVudHJ5OwoKCSAgICB2YXIgY291bnQgPSAwOwoJICAgIHdoaWxlIChlbnRyeSkgewoJICAgICAgYnVmZmVyW2NvdW50XSA9IGVudHJ5OwoJICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwoJICAgICAgY291bnQgKz0gMTsKCSAgICB9CgoJICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBob2xkZXIuZmluaXNoKTsKCgkgICAgLy8gZG9Xcml0ZSBpcyBhbG1vc3QgYWx3YXlzIGFzeW5jLCBkZWZlciB0aGVzZSB0byBzYXZlIGEgYml0IG9mIHRpbWUKCSAgICAvLyBhcyB0aGUgaG90IHBhdGggZW5kcyB3aXRoIGRvV3JpdGUKCSAgICBzdGF0ZS5wZW5kaW5nY2IrKzsKCSAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKCSAgICBpZiAoaG9sZGVyLm5leHQpIHsKCSAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IGhvbGRlci5uZXh0OwoJICAgICAgaG9sZGVyLm5leHQgPSBudWxsOwoJICAgIH0gZWxzZSB7CgkgICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZSk7CgkgICAgfQoJICB9IGVsc2UgewoJICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmUKCSAgICB3aGlsZSAoZW50cnkpIHsKCSAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rOwoJICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7CgkgICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjazsKCSAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKCgkgICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpOwoJICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwoJICAgICAgLy8gaWYgd2UgZGlkbid0IGNhbGwgdGhlIG9ud3JpdGUgaW1tZWRpYXRlbHksIHRoZW4KCSAgICAgIC8vIGl0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byB3YWl0IHVudGlsIGl0IGRvZXMuCgkgICAgICAvLyBhbHNvLCB0aGF0IG1lYW5zIHRoYXQgdGhlIGNodW5rIGFuZCBjYiBhcmUgY3VycmVudGx5CgkgICAgICAvLyBiZWluZyBwcm9jZXNzZWQsIHNvIG1vdmUgdGhlIGJ1ZmZlciBjb3VudGVyIHBhc3QgdGhlbS4KCSAgICAgIGlmIChzdGF0ZS53cml0aW5nKSB7CgkgICAgICAgIGJyZWFrOwoJICAgICAgfQoJICAgIH0KCgkgICAgaWYgKGVudHJ5ID09PSBudWxsKSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKCSAgfQoKCSAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwOwoJICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBlbnRyeTsKCSAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOwoJfQoKCVdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICBjYihuZXcgRXJyb3IoJ193cml0ZSgpIGlzIG5vdCBpbXBsZW1lbnRlZCcpKTsKCX07CgoJV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsOwoKCVdyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKCSAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ2Z1bmN0aW9uJykgewoJICAgIGNiID0gY2h1bms7CgkgICAgY2h1bmsgPSBudWxsOwoJICAgIGVuY29kaW5nID0gbnVsbDsKCSAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHsKCSAgICBjYiA9IGVuY29kaW5nOwoJICAgIGVuY29kaW5nID0gbnVsbDsKCSAgfQoKCSAgaWYgKGNodW5rICE9PSBudWxsICYmIGNodW5rICE9PSB1bmRlZmluZWQpIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTsKCgkgIC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzCgkgIGlmIChzdGF0ZS5jb3JrZWQpIHsKCSAgICBzdGF0ZS5jb3JrZWQgPSAxOwoJICAgIHRoaXMudW5jb3JrKCk7CgkgIH0KCgkgIC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy4KCSAgaWYgKCFzdGF0ZS5lbmRpbmcgJiYgIXN0YXRlLmZpbmlzaGVkKSBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpOwoJfTsKCglmdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7CgkgIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7Cgl9CgoJZnVuY3Rpb24gcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpIHsKCSAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCkgewoJICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTsKCSAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7CgkgIH0KCX0KCglmdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7CgkgIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7CgkgIGlmIChuZWVkKSB7CgkgICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkgewoJICAgICAgcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpOwoJICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlOwoJICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpOwoJICAgIH0gZWxzZSB7CgkgICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7CgkgICAgfQoJICB9CgkgIHJldHVybiBuZWVkOwoJfQoKCWZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7CgkgIHN0YXRlLmVuZGluZyA9IHRydWU7CgkgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpOwoJICBpZiAoY2IpIHsKCSAgICBpZiAoc3RhdGUuZmluaXNoZWQpIHByb2Nlc3NOZXh0VGljayhjYik7ZWxzZSBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpOwoJICB9CgkgIHN0YXRlLmVuZGVkID0gdHJ1ZTsKCSAgc3RyZWFtLndyaXRhYmxlID0gZmFsc2U7Cgl9CgoJLy8gSXQgc2VlbXMgYSBsaW5rZWQgbGlzdCBidXQgaXQgaXMgbm90CgkvLyB0aGVyZSB3aWxsIGJlIG9ubHkgMiBvZiB0aGVzZSBmb3IgZWFjaCBzdHJlYW0KCWZ1bmN0aW9uIENvcmtlZFJlcXVlc3Qoc3RhdGUpIHsKCSAgdmFyIF90aGlzID0gdGhpczsKCgkgIHRoaXMubmV4dCA9IG51bGw7CgkgIHRoaXMuZW50cnkgPSBudWxsOwoKCSAgdGhpcy5maW5pc2ggPSBmdW5jdGlvbiAoZXJyKSB7CgkgICAgdmFyIGVudHJ5ID0gX3RoaXMuZW50cnk7CgkgICAgX3RoaXMuZW50cnkgPSBudWxsOwoJICAgIHdoaWxlIChlbnRyeSkgewoJICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7CgkgICAgICBzdGF0ZS5wZW5kaW5nY2ItLTsKCSAgICAgIGNiKGVycik7CgkgICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7CgkgICAgfQoJICAgIGlmIChzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUpIHsKCSAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gX3RoaXM7CgkgICAgfSBlbHNlIHsKCSAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IF90aGlzOwoJICAgIH0KCSAgfTsKCX0KCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSwgX193ZWJwYWNrX3JlcXVpcmVfXygyMSkuc2V0SW1tZWRpYXRlKSkKCi8qKiovIH0sCi8qIDIxICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTsKCgkvLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzcwoKCWV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkgewoJICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7Cgl9OwoJZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkgewoJICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTsKCX07CglleHBvcnRzLmNsZWFyVGltZW91dCA9CglleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7CgkgIGlmICh0aW1lb3V0KSB7CgkgICAgdGltZW91dC5jbG9zZSgpOwoJICB9Cgl9OwoKCWZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHsKCSAgdGhpcy5faWQgPSBpZDsKCSAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47Cgl9CglUaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307CglUaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkgewoJICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7Cgl9OwoKCS8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLgoJZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2VjcykgewoJICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7CgkgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7Cgl9OwoKCWV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7CgkgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTsKCSAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTsKCX07CgoJZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHsKCSAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpOwoKCSAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7CgkgIGlmIChtc2VjcyA+PSAwKSB7CgkgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkgewoJICAgICAgaWYgKGl0ZW0uX29uVGltZW91dCkKCSAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7CgkgICAgfSwgbXNlY3MpOwoJICB9Cgl9OwoKCS8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3QKCV9fd2VicGFja19yZXF1aXJlX18oMjIpOwoJZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7CglleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7CgoKLyoqKi8gfSwKLyogMjIgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2VzcykgeyhmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHsKCSAgICAidXNlIHN0cmljdCI7CgoJICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7CgkgICAgICAgIHJldHVybjsKCSAgICB9CgoJICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvCgkgICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTsKCSAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7CgkgICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDsKCSAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7CgoJICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykgewoJICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nCgkgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAiZnVuY3Rpb24iKSB7CgkgICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKCIiICsgY2FsbGJhY2spOwoJICAgICAgfQoJICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHMKCSAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTsKCSAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykgewoJICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdOwoJICAgICAgfQoJICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrCgkgICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07CgkgICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzazsKCSAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpOwoJICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKzsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkgewoJICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdOwoJICAgIH0KCgkgICAgZnVuY3Rpb24gcnVuKHRhc2spIHsKCSAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjazsKCSAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7CgkgICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHsKCSAgICAgICAgY2FzZSAwOgoJICAgICAgICAgICAgY2FsbGJhY2soKTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICBjYXNlIDE6CgkgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICBjYXNlIDI6CgkgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICBjYXNlIDM6CgkgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsKCSAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICB9CgkgICAgfQoKCSAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7CgkgICAgICAgIC8vIEZyb20gdGhlIHNwZWM6ICJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC4iCgkgICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uCgkgICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHsKCSAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhCgkgICAgICAgICAgICAvLyAidG9vIG11Y2ggcmVjdXJzaW9uIiBlcnJvci4KCSAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07CgkgICAgICAgICAgICBpZiAodGFzaykgewoJICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spOwoJICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CgkgICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7CgkgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCgkgICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7CgkgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7CgkgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pOwoJICAgICAgICB9OwoJICAgIH0KCgkgICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7CgkgICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlciwKCSAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuCgkgICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7CgkgICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7CgkgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTsKCSAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHsKCSAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7CgkgICAgICAgICAgICB9OwoJICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKCIiLCAiKiIpOwoJICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTsKCSAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzOwoJICAgICAgICB9CgkgICAgfQoKCSAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHsKCSAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlCgkgICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZQoJICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzCgoJICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9ICJzZXRJbW1lZGlhdGUkIiArIE1hdGgucmFuZG9tKCkgKyAiJCI7CgkgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgewoJICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmCgkgICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09ICJzdHJpbmciICYmCgkgICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH07CgoJICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHsKCSAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoIm9ubWVzc2FnZSIsIG9uR2xvYmFsTWVzc2FnZSk7CgkgICAgICAgIH0KCgkgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7CgkgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgIioiKTsKCSAgICAgICAgfTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkgewoJICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpOwoJICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkgICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTsKCSAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpOwoJICAgICAgICB9OwoKCSAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHsKCSAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTsKCSAgICAgICAgfTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7CgkgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDsKCSAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHsKCSAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZAoJICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC4KCSAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CgkgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpOwoJICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsOwoJICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTsKCSAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsOwoJICAgICAgICAgICAgfTsKCSAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKCSAgICAgICAgfTsKCSAgICB9CgoJICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7CgkgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7CgkgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTsKCSAgICAgICAgfTsKCSAgICB9CgoJICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLgoJICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTsKCSAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDsKCgkgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLgoJICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gIltvYmplY3QgcHJvY2Vzc10iKSB7CgkgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjkKCSAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTsKCgkgICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7CgkgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnMKCSAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTsKCgkgICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHsKCSAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWQKCSAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTsKCgkgICAgfSBlbHNlIGlmIChkb2MgJiYgIm9ucmVhZHlzdGF0ZWNoYW5nZSIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpKSB7CgkgICAgICAgIC8vIEZvciBJRSA24oCTOAoJICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7CgoJICAgIH0gZWxzZSB7CgkgICAgICAgIC8vIEZvciBvbGRlciBicm93c2VycwoJICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7CgkgICAgfQoKCSAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7CgkgICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTsKCX0odHlwZW9mIHNlbGYgPT09ICJ1bmRlZmluZWQiID8gdHlwZW9mIGdsb2JhbCA9PT0gInVuZGVmaW5lZCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpOwoKCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSkpCgovKioqLyB9LAovKiAyMyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0JzsKCglpZiAoIXByb2Nlc3MudmVyc2lvbiB8fAoJICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MC4nKSA9PT0gMCB8fAoJICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MS4nKSA9PT0gMCAmJiBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuOC4nKSAhPT0gMCkgewoJICBtb2R1bGUuZXhwb3J0cyA9IG5leHRUaWNrOwoJfSBlbHNlIHsKCSAgbW9kdWxlLmV4cG9ydHMgPSBwcm9jZXNzLm5leHRUaWNrOwoJfQoKCWZ1bmN0aW9uIG5leHRUaWNrKGZuLCBhcmcxLCBhcmcyLCBhcmczKSB7CgkgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCciY2FsbGJhY2siIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpOwoJICB9CgkgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwoJICB2YXIgYXJncywgaTsKCSAgc3dpdGNoIChsZW4pIHsKCSAgY2FzZSAwOgoJICBjYXNlIDE6CgkgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZm4pOwoJICBjYXNlIDI6CgkgICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrT25lKCkgewoJICAgICAgZm4uY2FsbChudWxsLCBhcmcxKTsKCSAgICB9KTsKCSAgY2FzZSAzOgoJICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGlja1R3bygpIHsKCSAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSwgYXJnMik7CgkgICAgfSk7CgkgIGNhc2UgNDoKCSAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUaHJlZSgpIHsKCSAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSwgYXJnMiwgYXJnMyk7CgkgICAgfSk7CgkgIGRlZmF1bHQ6CgkgICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTsKCSAgICBpID0gMDsKCSAgICB3aGlsZSAoaSA8IGFyZ3MubGVuZ3RoKSB7CgkgICAgICBhcmdzW2krK10gPSBhcmd1bWVudHNbaV07CgkgICAgfQoJICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGljaygpIHsKCSAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpOwoJICAgIH0pOwoJICB9Cgl9CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTIpKSkKCi8qKiovIH0sCi8qIDI0ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIpIHsvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KCS8vCgkvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQoJLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQoJLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwoJLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAoJLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAoJLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCgkvLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKCS8vCgkvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAoJLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgkvLwoJLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKCS8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKCS8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KCS8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAoJLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCgkvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCgkvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKCS8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYAoJLy8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuCgoJZnVuY3Rpb24gaXNBcnJheShhcmcpIHsKCSAgaWYgKEFycmF5LmlzQXJyYXkpIHsKCSAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpOwoJICB9CgkgIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nOwoJfQoJZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTsKCglmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7CgkgIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7Cgl9CglleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjsKCglmdW5jdGlvbiBpc051bGwoYXJnKSB7CgkgIHJldHVybiBhcmcgPT09IG51bGw7Cgl9CglleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDsKCglmdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHsKCSAgcmV0dXJuIGFyZyA9PSBudWxsOwoJfQoJZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkOwoKCWZ1bmN0aW9uIGlzTnVtYmVyKGFyZykgewoJICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7Cgl9CglleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7CgoJZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7CgkgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJzsKCX0KCWV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZzsKCglmdW5jdGlvbiBpc1N5bWJvbChhcmcpIHsKCSAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnOwoJfQoJZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sOwoKCWZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewoJICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cgl9CglleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7CgoJZnVuY3Rpb24gaXNSZWdFeHAocmUpIHsKCSAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7Cgl9CglleHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7CgoJZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7CgkgIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7Cgl9CglleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7CgoJZnVuY3Rpb24gaXNEYXRlKGQpIHsKCSAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7Cgl9CglleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTsKCglmdW5jdGlvbiBpc0Vycm9yKGUpIHsKCSAgcmV0dXJuIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpOwoJfQoJZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjsKCglmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykgewoJICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKCX0KCWV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247CgoJZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7CgkgIHJldHVybiBhcmcgPT09IG51bGwgfHwKCSAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fAoJICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwKCSAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8CgkgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbAoJICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7Cgl9CglleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7CgoJZXhwb3J0cy5pc0J1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcjsKCglmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7CgkgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7Cgl9CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOCkuQnVmZmVyKSkKCi8qKiovIH0sCi8qIDI1ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCS8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsKCS8qKgoJICogTW9kdWxlIGV4cG9ydHMuCgkgKi8KCgltb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZTsKCgkvKioKCSAqIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuCgkgKiBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LgoJICoKCSAqIElmIGBsb2NhbFN0b3JhZ2Uubm9EZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLgoJICoKCSAqIElmIGBsb2NhbFN0b3JhZ2UudGhyb3dEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9ucwoJICogd2lsbCB0aHJvdyBhbiBFcnJvciB3aGVuIGludm9rZWQuCgkgKgoJICogSWYgYGxvY2FsU3RvcmFnZS50cmFjZURlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zCgkgKiB3aWxsIGludm9rZSBgY29uc29sZS50cmFjZSgpYCBpbnN0ZWFkIG9mIGBjb25zb2xlLmVycm9yKClgLgoJICoKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gdGhlIGZ1bmN0aW9uIHRvIGRlcHJlY2F0ZQoJICogQHBhcmFtIHtTdHJpbmd9IG1zZyAtIHRoZSBzdHJpbmcgdG8gcHJpbnQgdG8gdGhlIGNvbnNvbGUgd2hlbiBgZm5gIGlzIGludm9rZWQKCSAqIEByZXR1cm5zIHtGdW5jdGlvbn0gYSBuZXcgImRlcHJlY2F0ZWQiIHZlcnNpb24gb2YgYGZuYAoJICogQGFwaSBwdWJsaWMKCSAqLwoKCWZ1bmN0aW9uIGRlcHJlY2F0ZSAoZm4sIG1zZykgewoJICBpZiAoY29uZmlnKCdub0RlcHJlY2F0aW9uJykpIHsKCSAgICByZXR1cm4gZm47CgkgIH0KCgkgIHZhciB3YXJuZWQgPSBmYWxzZTsKCSAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHsKCSAgICBpZiAoIXdhcm5lZCkgewoJICAgICAgaWYgKGNvbmZpZygndGhyb3dEZXByZWNhdGlvbicpKSB7CgkgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwoJICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkgewoJICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBjb25zb2xlLndhcm4obXNnKTsKCSAgICAgIH0KCSAgICAgIHdhcm5lZCA9IHRydWU7CgkgICAgfQoJICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJICB9CgoJICByZXR1cm4gZGVwcmVjYXRlZDsKCX0KCgkvKioKCSAqIENoZWNrcyBgbG9jYWxTdG9yYWdlYCBmb3IgYm9vbGVhbiB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBgbmFtZWAuCgkgKgoJICogQHBhcmFtIHtTdHJpbmd9IG5hbWUKCSAqIEByZXR1cm5zIHtCb29sZWFufQoJICogQGFwaSBwcml2YXRlCgkgKi8KCglmdW5jdGlvbiBjb25maWcgKG5hbWUpIHsKCSAgLy8gYWNjZXNzaW5nIGdsb2JhbC5sb2NhbFN0b3JhZ2UgY2FuIHRyaWdnZXIgYSBET01FeGNlcHRpb24gaW4gc2FuZGJveGVkIGlmcmFtZXMKCSAgdHJ5IHsKCSAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTsKCSAgfSBjYXRjaCAoXykgewoJICAgIHJldHVybiBmYWxzZTsKCSAgfQoJICB2YXIgdmFsID0gZ2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTsKCSAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7CgkgIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7Cgl9CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKQoKLyoqKi8gfSwKLyogMjYgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikgey8qIQoJICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuCgkgKgoJICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+CgkgKiBAbGljZW5zZSAgTUlUCgkgKi8KCS8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCgoJJ3VzZSBzdHJpY3QnCgoJdmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oOSkKCXZhciBpZWVlNzU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCkKCglleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlcgoJZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcgoJZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwCgoJdmFyIEtfTUFYX0xFTkdUSCA9IDB4N2ZmZmZmZmYKCWV4cG9ydHMua01heExlbmd0aCA9IEtfTUFYX0xFTkdUSAoKCS8qKgoJICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDoKCSAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpCgkgKiAgID09PSBmYWxzZSAgIFByaW50IHdhcm5pbmcgYW5kIHJlY29tbWVuZCB1c2luZyBgYnVmZmVyYCB2NC54IHdoaWNoIGhhcyBhbiBPYmplY3QKCSAqICAgICAgICAgICAgICAgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpCgkgKgoJICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLAoJICogT3BlcmEgMTEuNissIGlPUyA0LjIrLgoJICoKCSAqIFdlIHJlcG9ydCB0aGF0IHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGlmIHRoZSBhcmUgbm90IHN1YmNsYXNzYWJsZQoJICogdXNpbmcgX19wcm90b19fLiBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YAoJICogKFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4KS4gSUUgMTAgbGFja3Mgc3VwcG9ydAoJICogZm9yIF9fcHJvdG9fXyBhbmQgaGFzIGEgYnVnZ3kgdHlwZWQgYXJyYXkgaW1wbGVtZW50YXRpb24uCgkgKi8KCUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gdHlwZWRBcnJheVN1cHBvcnQoKQoKCWlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKCSAgY29uc29sZS5lcnJvcigKCSAgICAnVGhpcyBicm93c2VyIGxhY2tzIHR5cGVkIGFycmF5IChVaW50OEFycmF5KSBzdXBwb3J0IHdoaWNoIGlzIHJlcXVpcmVkIGJ5ICcgKwoJICAgICdgYnVmZmVyYCB2NS54LiBVc2UgYGJ1ZmZlcmAgdjQueCBpZiB5b3UgcmVxdWlyZSBvbGQgYnJvd3NlciBzdXBwb3J0LicpCgl9CgoJZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkgewoJICAvLyBDYW4gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQ/CgkgIHRyeSB7CgkgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpCgkgICAgYXJyLl9fcHJvdG9fXyA9IHtfX3Byb3RvX186IFVpbnQ4QXJyYXkucHJvdG90eXBlLCBmb286IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH19CgkgICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIKCSAgfSBjYXRjaCAoZSkgewoJICAgIHJldHVybiBmYWxzZQoJICB9Cgl9CgoJZnVuY3Rpb24gY3JlYXRlQnVmZmVyIChsZW5ndGgpIHsKCSAgaWYgKGxlbmd0aCA+IEtfTUFYX0xFTkdUSCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHR5cGVkIGFycmF5IGxlbmd0aCcpCgkgIH0KCSAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UKCSAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCkKCSAgYnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKCSAgcmV0dXJuIGJ1ZgoJfQoKCS8qKgoJICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyCgkgKiBwcm90b3R5cGUgY2hhbmdlZCB0byBgQnVmZmVyLnByb3RvdHlwZWAuIEZ1cnRoZXJtb3JlLCBgQnVmZmVyYCBpcyBhIHN1YmNsYXNzIG9mCgkgKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzCgkgKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdAoJICogcmV0dXJucyBhIHNpbmdsZSBvY3RldC4KCSAqCgkgKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuCgkgKi8KCglmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CgkgIC8vIENvbW1vbiBjYXNlLgoJICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHsKCSAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgICB0aHJvdyBuZXcgRXJyb3IoCgkgICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZycKCSAgICAgICkKCSAgICB9CgkgICAgcmV0dXJuIGFsbG9jVW5zYWZlKGFyZykKCSAgfQoJICByZXR1cm4gZnJvbShhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCX0KCgkvLyBGaXggc3ViYXJyYXkoKSBpbiBFUzIwMTYuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvcHVsbC85NwoJaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmCgkgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7CgkgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7CgkgICAgdmFsdWU6IG51bGwsCgkgICAgY29uZmlndXJhYmxlOiB0cnVlLAoJICAgIGVudW1lcmFibGU6IGZhbHNlLAoJICAgIHdyaXRhYmxlOiBmYWxzZQoJICB9KQoJfQoKCUJ1ZmZlci5wb29sU2l6ZSA9IDgxOTIgLy8gbm90IHVzZWQgYnkgdGhpcyBpbXBsZW1lbnRhdGlvbgoKCWZ1bmN0aW9uIGZyb20gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJykKCSAgfQoKCSAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewoJICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKCSAgfQoKCSAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKCSAgICByZXR1cm4gZnJvbVN0cmluZyh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCkKCSAgfQoKCSAgcmV0dXJuIGZyb21PYmplY3QodmFsdWUpCgl9CgoJLyoqCgkgKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvcgoJICogaWYgdmFsdWUgaXMgYSBudW1iZXIuCgkgKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pCgkgKiBCdWZmZXIuZnJvbShhcnJheSkKCSAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcikKCSAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKQoJICoqLwoJQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gZnJvbSh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQoJfQoKCS8vIE5vdGU6IENoYW5nZSBwcm90b3R5cGUgKmFmdGVyKiBCdWZmZXIuZnJvbSBpcyBkZWZpbmVkIHRvIHdvcmthcm91bmQgQ2hyb21lIGJ1ZzoKCS8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvMTQ4CglCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlCglCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheQoKCWZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHsKCSAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJykKCSAgfSBlbHNlIGlmIChzaXplIDwgMCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKQoJICB9Cgl9CgoJZnVuY3Rpb24gYWxsb2MgKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CgkgIGFzc2VydFNpemUoc2l6ZSkKCSAgaWYgKHNpemUgPD0gMCkgewoJICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSkKCSAgfQoJICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7CgkgICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXMKCSAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkCgkgICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LgoJICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnCgkgICAgICA/IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKQoJICAgICAgOiBjcmVhdGVCdWZmZXIoc2l6ZSkuZmlsbChmaWxsKQoJICB9CgkgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSkKCX0KCgkvKioKCSAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KCSAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSkKCSAqKi8KCUJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykgewoJICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpCgl9CgoJZnVuY3Rpb24gYWxsb2NVbnNhZmUgKHNpemUpIHsKCSAgYXNzZXJ0U2l6ZShzaXplKQoJICByZXR1cm4gY3JlYXRlQnVmZmVyKHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKQoJfQoKCS8qKgoJICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KCSAqICovCglCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkgewoJICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSkKCX0KCS8qKgoJICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuCgkgKi8KCUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewoJICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSkKCX0KCglmdW5jdGlvbiBmcm9tU3RyaW5nIChzdHJpbmcsIGVuY29kaW5nKSB7CgkgIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykgewoJICAgIGVuY29kaW5nID0gJ3V0ZjgnCgkgIH0KCgkgIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImVuY29kaW5nIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJykKCSAgfQoKCSAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwCgkgIHZhciBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKQoKCSAgdmFyIGFjdHVhbCA9IGJ1Zi53cml0ZShzdHJpbmcsIGVuY29kaW5nKQoKCSAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7CgkgICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsCgkgICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy4KCSAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJykKCSAgICBidWYgPSBidWYuc2xpY2UoMCwgYWN0dWFsKQoJICB9CgoJICByZXR1cm4gYnVmCgl9CgoJZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAoYXJyYXkpIHsKCSAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMAoJICB2YXIgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aCkKCSAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgewoJICAgIGJ1ZltpXSA9IGFycmF5W2ldICYgMjU1CgkgIH0KCSAgcmV0dXJuIGJ1ZgoJfQoKCWZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkgewoJICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXIKCgkgIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ29mZnNldFwnIGlzIG91dCBvZiBib3VuZHMnKQoJICB9CgoJICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wnbGVuZ3RoXCcgaXMgb3V0IG9mIGJvdW5kcycpCgkgIH0KCgkgIHZhciBidWYKCSAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkgewoJICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5KQoJICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQpCgkgIH0gZWxzZSB7CgkgICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkKCSAgfQoKCSAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UKCSAgYnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKCSAgcmV0dXJuIGJ1ZgoJfQoKCWZ1bmN0aW9uIGZyb21PYmplY3QgKG9iaikgewoJICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHsKCSAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDAKCSAgICB2YXIgYnVmID0gY3JlYXRlQnVmZmVyKGxlbikKCgkgICAgaWYgKGJ1Zi5sZW5ndGggPT09IDApIHsKCSAgICAgIHJldHVybiBidWYKCSAgICB9CgoJICAgIG9iai5jb3B5KGJ1ZiwgMCwgMCwgbGVuKQoJICAgIHJldHVybiBidWYKCSAgfQoKCSAgaWYgKG9iaikgewoJICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgoJICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikgewoJICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkgewoJICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKDApCgkgICAgICB9CgkgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmopCgkgICAgfQoKCSAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7CgkgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmouZGF0YSkKCSAgICB9CgkgIH0KCgkgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKQoJfQoKCWZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkgewoJICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBLX01BWF9MRU5HVEhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW4KCSAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pCgkgIGlmIChsZW5ndGggPj0gS19NQVhfTEVOR1RIKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArCgkgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIEtfTUFYX0xFTkdUSC50b1N0cmluZygxNikgKyAnIGJ5dGVzJykKCSAgfQoJICByZXR1cm4gbGVuZ3RoIHwgMAoJfQoKCWZ1bmN0aW9uIFNsb3dCdWZmZXIgKGxlbmd0aCkgewoJICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXEKCSAgICBsZW5ndGggPSAwCgkgIH0KCSAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKQoJfQoKCUJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7CgkgIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpCgl9CgoJQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJykKCSAgfQoKCSAgaWYgKGEgPT09IGIpIHJldHVybiAwCgoJICB2YXIgeCA9IGEubGVuZ3RoCgkgIHZhciB5ID0gYi5sZW5ndGgKCgkgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7CgkgICAgaWYgKGFbaV0gIT09IGJbaV0pIHsKCSAgICAgIHggPSBhW2ldCgkgICAgICB5ID0gYltpXQoJICAgICAgYnJlYWsKCSAgICB9CgkgIH0KCgkgIGlmICh4IDwgeSkgcmV0dXJuIC0xCgkgIGlmICh5IDwgeCkgcmV0dXJuIDEKCSAgcmV0dXJuIDAKCX0KCglCdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7CgkgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CgkgICAgY2FzZSAnaGV4JzoKCSAgICBjYXNlICd1dGY4JzoKCSAgICBjYXNlICd1dGYtOCc6CgkgICAgY2FzZSAnYXNjaWknOgoJICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgY2FzZSAnYmluYXJ5JzoKCSAgICBjYXNlICdiYXNlNjQnOgoJICAgIGNhc2UgJ3VjczInOgoJICAgIGNhc2UgJ3Vjcy0yJzoKCSAgICBjYXNlICd1dGYxNmxlJzoKCSAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICByZXR1cm4gdHJ1ZQoJICAgIGRlZmF1bHQ6CgkgICAgICByZXR1cm4gZmFsc2UKCSAgfQoJfQoKCUJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkgewoJICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdCkpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJykKCSAgfQoKCSAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7CgkgICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKQoJICB9CgoJICB2YXIgaQoJICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHsKCSAgICBsZW5ndGggPSAwCgkgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKCSAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aAoJICAgIH0KCSAgfQoKCSAgdmFyIGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW5ndGgpCgkgIHZhciBwb3MgPSAwCgkgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7CgkgICAgdmFyIGJ1ZiA9IGxpc3RbaV0KCSAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7CgkgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJykKCSAgICB9CgkgICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpCgkgICAgcG9zICs9IGJ1Zi5sZW5ndGgKCSAgfQoJICByZXR1cm4gYnVmZmVyCgl9CgoJZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykgewoJICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHsKCSAgICByZXR1cm4gc3RyaW5nLmxlbmd0aAoJICB9CgkgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiYKCSAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHsKCSAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGgKCSAgfQoJICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHsKCSAgICBzdHJpbmcgPSAnJyArIHN0cmluZwoJICB9CgoJICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aAoJICBpZiAobGVuID09PSAwKSByZXR1cm4gMAoKCSAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uCgkgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCgkgIGZvciAoOzspIHsKCSAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CgkgICAgICBjYXNlICdhc2NpaSc6CgkgICAgICBjYXNlICdsYXRpbjEnOgoJICAgICAgY2FzZSAnYmluYXJ5JzoKCSAgICAgICAgcmV0dXJuIGxlbgoJICAgICAgY2FzZSAndXRmOCc6CgkgICAgICBjYXNlICd1dGYtOCc6CgkgICAgICBjYXNlIHVuZGVmaW5lZDoKCSAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoCgkgICAgICBjYXNlICd1Y3MyJzoKCSAgICAgIGNhc2UgJ3Vjcy0yJzoKCSAgICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgICAgY2FzZSAndXRmLTE2bGUnOgoJICAgICAgICByZXR1cm4gbGVuICogMgoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMQoJICAgICAgY2FzZSAnYmFzZTY0JzoKCSAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKCSAgICAgIGRlZmF1bHQ6CgkgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4CgkgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlCgkgICAgfQoJICB9Cgl9CglCdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGgKCglmdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7CgkgIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCgoJICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0ICJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5CgkgIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuCgoJICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmQKCSAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLgoJICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLAoJICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi4KCSAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7CgkgICAgc3RhcnQgPSAwCgkgIH0KCSAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzIKCSAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy4KCSAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHsKCSAgICByZXR1cm4gJycKCSAgfQoKCSAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7CgkgICAgZW5kID0gdGhpcy5sZW5ndGgKCSAgfQoKCSAgaWYgKGVuZCA8PSAwKSB7CgkgICAgcmV0dXJuICcnCgkgIH0KCgkgIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuCgkgIGVuZCA+Pj49IDAKCSAgc3RhcnQgPj4+PSAwCgoJICBpZiAoZW5kIDw9IHN0YXJ0KSB7CgkgICAgcmV0dXJuICcnCgkgIH0KCgkgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnCgoJICB3aGlsZSAodHJ1ZSkgewoJICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKCSAgICAgIGNhc2UgJ2hleCc6CgkgICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ3V0ZjgnOgoJICAgICAgY2FzZSAndXRmLTgnOgoJICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgY2FzZSAnYXNjaWknOgoJICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKCSAgICAgIGNhc2UgJ2xhdGluMSc6CgkgICAgICBjYXNlICdiaW5hcnknOgoJICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBjYXNlICdiYXNlNjQnOgoJICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCgkgICAgICBjYXNlICd1Y3MyJzoKCSAgICAgIGNhc2UgJ3Vjcy0yJzoKCSAgICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgICAgY2FzZSAndXRmLTE2bGUnOgoJICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgoJICAgICAgZGVmYXVsdDoKCSAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCgkgICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKCkKCSAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlCgkgICAgfQoJICB9Cgl9CgoJLy8gVGhlIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgYW5kIGBpcy1idWZmZXJgIChpbiBTYWZhcmkgNS03KSB0byBkZXRlY3QKCS8vIEJ1ZmZlciBpbnN0YW5jZXMuCglCdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWUKCglmdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7CgkgIHZhciBpID0gYltuXQoJICBiW25dID0gYlttXQoJICBiW21dID0gaQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHsKCSAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoCgkgIGlmIChsZW4gJSAyICE9PSAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJykKCSAgfQoJICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7CgkgICAgc3dhcCh0aGlzLCBpLCBpICsgMSkKCSAgfQoJICByZXR1cm4gdGhpcwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuc3dhcDMyID0gZnVuY3Rpb24gc3dhcDMyICgpIHsKCSAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoCgkgIGlmIChsZW4gJSA0ICE9PSAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJykKCSAgfQoJICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CgkgICAgc3dhcCh0aGlzLCBpLCBpICsgMykKCSAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMikKCSAgfQoJICByZXR1cm4gdGhpcwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHsKCSAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoCgkgIGlmIChsZW4gJSA4ICE9PSAwKSB7CgkgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJykKCSAgfQoJICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7CgkgICAgc3dhcCh0aGlzLCBpLCBpICsgNykKCSAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNikKCSAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSkKCSAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNCkKCSAgfQoJICByZXR1cm4gdGhpcwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7CgkgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aAoJICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJycKCSAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKQoJICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKCX0KCglCdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikgewoJICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCgkgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZQoJICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDAKCX0KCglCdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHsKCSAgdmFyIHN0ciA9ICcnCgkgIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTCgkgIGlmICh0aGlzLmxlbmd0aCA+IDApIHsKCSAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKQoJICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICcKCSAgfQoJICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+JwoJfQoKCUJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKCSAgfQoKCSAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQpIHsKCSAgICBzdGFydCA9IDAKCSAgfQoJICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHsKCSAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMAoJICB9CgkgIGlmICh0aGlzU3RhcnQgPT09IHVuZGVmaW5lZCkgewoJICAgIHRoaXNTdGFydCA9IDAKCSAgfQoJICBpZiAodGhpc0VuZCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgdGhpc0VuZCA9IHRoaXMubGVuZ3RoCgkgIH0KCgkgIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKQoJICB9CgoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDAKCSAgfQoJICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHsKCSAgICByZXR1cm4gLTEKCSAgfQoJICBpZiAoc3RhcnQgPj0gZW5kKSB7CgkgICAgcmV0dXJuIDEKCSAgfQoKCSAgc3RhcnQgPj4+PSAwCgkgIGVuZCA+Pj49IDAKCSAgdGhpc1N0YXJ0ID4+Pj0gMAoJICB0aGlzRW5kID4+Pj0gMAoKCSAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDAKCgkgIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydAoJICB2YXIgeSA9IGVuZCAtIHN0YXJ0CgkgIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KQoKCSAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpCgkgIHZhciB0YXJnZXRDb3B5ID0gdGFyZ2V0LnNsaWNlKHN0YXJ0LCBlbmQpCgoJICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7CgkgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7CgkgICAgICB4ID0gdGhpc0NvcHlbaV0KCSAgICAgIHkgPSB0YXJnZXRDb3B5W2ldCgkgICAgICBicmVhawoJICAgIH0KCSAgfQoKCSAgaWYgKHggPCB5KSByZXR1cm4gLTEKCSAgaWYgKHkgPCB4KSByZXR1cm4gMQoJICByZXR1cm4gMAoJfQoKCS8vIEZpbmRzIGVpdGhlciB0aGUgZmlyc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0ID49IGBieXRlT2Zmc2V0YCwKCS8vIE9SIHRoZSBsYXN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA8PSBgYnl0ZU9mZnNldGAuCgkvLwoJLy8gQXJndW1lbnRzOgoJLy8gLSBidWZmZXIgLSBhIEJ1ZmZlciB0byBzZWFyY2gKCS8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyCgkvLyAtIGJ5dGVPZmZzZXQgLSBhbiBpbmRleCBpbnRvIGBidWZmZXJgOyB3aWxsIGJlIGNsYW1wZWQgdG8gYW4gaW50MzIKCS8vIC0gZW5jb2RpbmcgLSBhbiBvcHRpb25hbCBlbmNvZGluZywgcmVsZXZhbnQgaXMgdmFsIGlzIGEgc3RyaW5nCgkvLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZgoJZnVuY3Rpb24gYmlkaXJlY3Rpb25hbEluZGV4T2YgKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7CgkgIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaAoJICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xCgoJICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldAoJICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0CgkgICAgYnl0ZU9mZnNldCA9IDAKCSAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikgewoJICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmCgkgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7CgkgICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwCgkgIH0KCSAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLgoJICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHsKCSAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCAiZm9vIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyCgkgICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpCgkgIH0KCgkgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyCgkgIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0CgkgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHsKCSAgICBpZiAoZGlyKSByZXR1cm4gLTEKCSAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMQoJICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7CgkgICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDAKCSAgICBlbHNlIHJldHVybiAtMQoJICB9CgoJICAvLyBOb3JtYWxpemUgdmFsCgkgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewoJICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpCgkgIH0KCgkgIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mCgkgIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkgewoJICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHMKCSAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgewoJICAgICAgcmV0dXJuIC0xCgkgICAgfQoJICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpCgkgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKCSAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV0KCSAgICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHsKCSAgICAgIGlmIChkaXIpIHsKCSAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCkKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KQoJICAgICAgfQoJICAgIH0KCSAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikKCSAgfQoKCSAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJykKCX0KCglmdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7CgkgIHZhciBpbmRleFNpemUgPSAxCgkgIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoCgkgIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoCgoJICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkgewoJICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpCgkgICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHwKCSAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykgewoJICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7CgkgICAgICAgIHJldHVybiAtMQoJICAgICAgfQoJICAgICAgaW5kZXhTaXplID0gMgoJICAgICAgYXJyTGVuZ3RoIC89IDIKCSAgICAgIHZhbExlbmd0aCAvPSAyCgkgICAgICBieXRlT2Zmc2V0IC89IDIKCSAgICB9CgkgIH0KCgkgIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkgewoJICAgIGlmIChpbmRleFNpemUgPT09IDEpIHsKCSAgICAgIHJldHVybiBidWZbaV0KCSAgICB9IGVsc2UgewoJICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSkKCSAgICB9CgkgIH0KCgkgIHZhciBpCgkgIGlmIChkaXIpIHsKCSAgICB2YXIgZm91bmRJbmRleCA9IC0xCgkgICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA8IGFyckxlbmd0aDsgaSsrKSB7CgkgICAgICBpZiAocmVhZChhcnIsIGkpID09PSByZWFkKHZhbCwgZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXgpKSB7CgkgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGkKCSAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4CgkgICAgICAgIGZvdW5kSW5kZXggPSAtMQoJICAgICAgfQoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICBpZiAoYnl0ZU9mZnNldCArIHZhbExlbmd0aCA+IGFyckxlbmd0aCkgYnl0ZU9mZnNldCA9IGFyckxlbmd0aCAtIHZhbExlbmd0aAoJICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7CgkgICAgICB2YXIgZm91bmQgPSB0cnVlCgkgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbExlbmd0aDsgaisrKSB7CgkgICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHsKCSAgICAgICAgICBmb3VuZCA9IGZhbHNlCgkgICAgICAgICAgYnJlYWsKCSAgICAgICAgfQoJICAgICAgfQoJICAgICAgaWYgKGZvdW5kKSByZXR1cm4gaQoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIC0xCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CgkgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgewoJICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgdHJ1ZSkKCX0KCglCdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKCSAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKQoJfQoKCWZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMAoJICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldAoJICBpZiAoIWxlbmd0aCkgewoJICAgIGxlbmd0aCA9IHJlbWFpbmluZwoJICB9IGVsc2UgewoJICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpCgkgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewoJICAgICAgbGVuZ3RoID0gcmVtYWluaW5nCgkgICAgfQoJICB9CgoJICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0cwoJICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aAoJICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJykKCgkgIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7CgkgICAgbGVuZ3RoID0gc3RyTGVuIC8gMgoJICB9CgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKCSAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KQoJICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaQoJICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZAoJICB9CgkgIHJldHVybiBpCgl9CgoJZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglmdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCgl9CgoJZnVuY3Rpb24gbGF0aW4xV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgl9CgoJZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewoJICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCgl9CgoJZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKCSAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCkKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7CgkgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpCgkgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkgewoJICAgIGVuY29kaW5nID0gJ3V0ZjgnCgkgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGgKCSAgICBvZmZzZXQgPSAwCgkgIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKQoJICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7CgkgICAgZW5jb2RpbmcgPSBvZmZzZXQKCSAgICBsZW5ndGggPSB0aGlzLmxlbmd0aAoJICAgIG9mZnNldCA9IDAKCSAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSkKCSAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7CgkgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHsKCSAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMAoJICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnCgkgICAgfSBlbHNlIHsKCSAgICAgIGVuY29kaW5nID0gbGVuZ3RoCgkgICAgICBsZW5ndGggPSB1bmRlZmluZWQKCSAgICB9CgkgIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTMKCSAgfSBlbHNlIHsKCSAgICB0aHJvdyBuZXcgRXJyb3IoCgkgICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnCgkgICAgKQoJICB9CgoJICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXQKCSAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nCgoJICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpCgkgIH0KCgkgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnCgoJICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZQoJICBmb3IgKDs7KSB7CgkgICAgc3dpdGNoIChlbmNvZGluZykgewoJICAgICAgY2FzZSAnaGV4JzoKCSAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgoJICAgICAgY2FzZSAndXRmOCc6CgkgICAgICBjYXNlICd1dGYtOCc6CgkgICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBjYXNlICdhc2NpaSc6CgkgICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgoJICAgICAgY2FzZSAnbGF0aW4xJzoKCSAgICAgIGNhc2UgJ2JpbmFyeSc6CgkgICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ2Jhc2U2NCc6CgkgICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlCgkgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKCSAgICAgIGNhc2UgJ3VjczInOgoJICAgICAgY2FzZSAndWNzLTInOgoJICAgICAgY2FzZSAndXRmMTZsZSc6CgkgICAgICBjYXNlICd1dGYtMTZsZSc6CgkgICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCgkgICAgICBkZWZhdWx0OgoJICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKQoJICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKCSAgICB9CgkgIH0KCX0KCglCdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7CgkgIHJldHVybiB7CgkgICAgdHlwZTogJ0J1ZmZlcicsCgkgICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApCgkgIH0KCX0KCglmdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHsKCSAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKQoJICB9IGVsc2UgewoJICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpCgkgIH0KCX0KCglmdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCgkgIHZhciByZXMgPSBbXQoKCSAgdmFyIGkgPSBzdGFydAoJICB3aGlsZSAoaSA8IGVuZCkgewoJICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV0KCSAgICB2YXIgY29kZVBvaW50ID0gbnVsbAoJICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNAoJICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzCgkgICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDIKCSAgICAgIDogMQoKCSAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7CgkgICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50CgoJICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7CgkgICAgICAgIGNhc2UgMToKCSAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkgewoJICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlCgkgICAgICAgICAgfQoJICAgICAgICAgIGJyZWFrCgkgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXQoJICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRikKCSAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RikgewoJICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgICAgIGJyZWFrCgkgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXQoJICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl0KCSAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKCSAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKQoJICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkgewoJICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgICAgIGJyZWFrCgkgICAgICAgIGNhc2UgNDoKCSAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXQoJICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl0KCSAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXQoJICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRikKCSAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkgewoJICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfQoJICAgICAgfQoJICAgIH0KCgkgICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkgewoJICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYQoJICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZQoJICAgICAgY29kZVBvaW50ID0gMHhGRkZECgkgICAgICBieXRlc1BlclNlcXVlbmNlID0gMQoJICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7CgkgICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKQoJICAgICAgY29kZVBvaW50IC09IDB4MTAwMDAKCSAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCkKCSAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGCgkgICAgfQoKCSAgICByZXMucHVzaChjb2RlUG9pbnQpCgkgICAgaSArPSBieXRlc1BlclNlcXVlbmNlCgkgIH0KCgkgIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKQoJfQoKCS8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aAoJLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLgoJLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eQoJdmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwCgoJZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7CgkgIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aAoJICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7CgkgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpCgkgIH0KCgkgIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZCIuCgkgIHZhciByZXMgPSAnJwoJICB2YXIgaSA9IDAKCSAgd2hpbGUgKGkgPCBsZW4pIHsKCSAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseSgKCSAgICAgIFN0cmluZywKCSAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkKCSAgICApCgkgIH0KCSAgcmV0dXJuIHJlcwoJfQoKCWZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICB2YXIgcmV0ID0gJycKCSAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQoKCSAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKCSAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKQoJICB9CgkgIHJldHVybiByZXQKCX0KCglmdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CgkgIHZhciByZXQgPSAnJwoJICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpCgoJICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewoJICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSkKCSAgfQoJICByZXR1cm4gcmV0Cgl9CgoJZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICB2YXIgbGVuID0gYnVmLmxlbmd0aAoKCSAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMAoJICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuCgoJICB2YXIgb3V0ID0gJycKCSAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKCSAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKQoJICB9CgkgIHJldHVybiBvdXQKCX0KCglmdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewoJICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZCkKCSAgdmFyIHJlcyA9ICcnCgkgIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHsKCSAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NikKCSAgfQoJICByZXR1cm4gcmVzCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7CgkgIHZhciBsZW4gPSB0aGlzLmxlbmd0aAoJICBzdGFydCA9IH5+c3RhcnQKCSAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZAoKCSAgaWYgKHN0YXJ0IDwgMCkgewoJICAgIHN0YXJ0ICs9IGxlbgoJICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMAoJICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7CgkgICAgc3RhcnQgPSBsZW4KCSAgfQoKCSAgaWYgKGVuZCA8IDApIHsKCSAgICBlbmQgKz0gbGVuCgkgICAgaWYgKGVuZCA8IDApIGVuZCA9IDAKCSAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHsKCSAgICBlbmQgPSBsZW4KCSAgfQoKCSAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydAoKCSAgdmFyIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkKCSAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UKCSAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKCSAgcmV0dXJuIG5ld0J1ZgoJfQoKCS8qCgkgKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy4KCSAqLwoJZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHsKCSAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JykKCSAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgoJICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdCgkgIHZhciBtdWwgPSAxCgkgIHZhciBpID0gMAoJICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsCgkgIH0KCgkgIHJldHVybiB2YWwKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aCkKCSAgfQoKCSAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXQoJICB2YXIgbXVsID0gMQoJICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsCgkgIH0KCgkgIHJldHVybiB2YWwKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCkKCSAgcmV0dXJuIHRoaXNbb2Zmc2V0XQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQoJICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKCSAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgoJICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHwKCSAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKCSAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgKwoJICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgoJICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgKwoJICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAoJICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKCSAgICB0aGlzW29mZnNldCArIDNdKQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKQoKCSAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XQoJICB2YXIgbXVsID0gMQoJICB2YXIgaSA9IDAKCSAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAoJICB9CgkgIG11bCAqPSAweDgwCgoJICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKCSAgcmV0dXJuIHZhbAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKQoKCSAgdmFyIGkgPSBieXRlTGVuZ3RoCgkgIHZhciBtdWwgPSAxCgkgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV0KCSAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7CgkgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bAoJICB9CgkgIG11bCAqPSAweDgwCgoJICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKCSAgcmV0dXJuIHZhbAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aCkKCSAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKQoJICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCgkgIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQoJICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQoJICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOCkKCSAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCgkgIHJldHVybiAodGhpc1tvZmZzZXRdKSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfAoJICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8CgkgICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQoKCSAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAoJICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKCSAgICAodGhpc1tvZmZzZXQgKyAzXSkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgkgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNCkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgkgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpCgkgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOCkKCX0KCglCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkgewoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCkKCSAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOCkKCX0KCglmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKQoJICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKQoJICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDEKCSAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMCkKCSAgfQoKCSAgdmFyIG11bCA9IDEKCSAgdmFyIGkgPSAwCgkgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRgoJICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRgoJICB9CgoJICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKCSAgdmFsdWUgPSArdmFsdWUKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIHsKCSAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxCgkgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApCgkgIH0KCgkgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKCSAgdmFyIG11bCA9IDEKCSAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRgoJICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkYKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMCkKCSAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKCSAgcmV0dXJuIG9mZnNldCArIDEKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKQoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KQoJICByZXR1cm4gb2Zmc2V0ICsgMgoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApCgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCkKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIHJldHVybiBvZmZzZXQgKyAyCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgdmFsdWUgPSArdmFsdWUKCSAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwCgkgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApCgkgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQoJICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNikKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKCSAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKCSAgcmV0dXJuIG9mZnNldCArIDQKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCkKCSAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNCkKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpCgkgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpCgkgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKQoJICByZXR1cm4gb2Zmc2V0ICsgNAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKQoKCSAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCkKCSAgfQoKCSAgdmFyIGkgPSAwCgkgIHZhciBtdWwgPSAxCgkgIHZhciBzdWIgPSAwCgkgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRgoJICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkgewoJICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7CgkgICAgICBzdWIgPSAxCgkgICAgfQoJICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkYKCSAgfQoKCSAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKCX0KCglCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkKCgkgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpCgkgIH0KCgkgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKCSAgdmFyIG11bCA9IDEKCSAgdmFyIHN1YiA9IDAKCSAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRgoJICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKCSAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkgewoJICAgICAgc3ViID0gMQoJICAgIH0KCSAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGCgkgIH0KCgkgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MCkKCSAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxCgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIHJldHVybiBvZmZzZXQgKyAxCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApCgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCgkgIHJldHVybiBvZmZzZXQgKyAyCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApCgkgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCkKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIHJldHVybiBvZmZzZXQgKyAyCgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMCkKCSAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKCSAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKCSAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpCgkgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KQoJICByZXR1cm4gb2Zmc2V0ICsgNAoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApCgkgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMQoJICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KQoJICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNikKCSAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCkKCSAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpCgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9CgoJZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKCSAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQoJICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCgl9CgoJZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7CgkgIHZhbHVlID0gK3ZhbHVlCgkgIG9mZnNldCA9IG9mZnNldCA+Pj4gMAoJICBpZiAoIW5vQXNzZXJ0KSB7CgkgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpCgkgIH0KCSAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpCgkgIHJldHVybiBvZmZzZXQgKyA0Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewoJICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCgl9CgoJZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewoJICB2YWx1ZSA9ICt2YWx1ZQoJICBvZmZzZXQgPSBvZmZzZXQgPj4+IDAKCSAgaWYgKCFub0Fzc2VydCkgewoJICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpCgkgIH0KCSAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpCgkgIHJldHVybiBvZmZzZXQgKyA4Cgl9CgoJQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKCSAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQoJfQoKCUJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CgkgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCgl9CgoJLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKQoJQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewoJICBpZiAoIXN0YXJ0KSBzdGFydCA9IDAKCSAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aAoJICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoCgkgIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMAoJICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQKCgkgIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZQoJICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDAKCSAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwCgoJICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zCgkgIGlmICh0YXJnZXRTdGFydCA8IDApIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpCgkgIH0KCSAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKQoJICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJykKCgkgIC8vIEFyZSB3ZSBvb2I/CgkgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGgKCSAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7CgkgICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnQKCSAgfQoKCSAgdmFyIGxlbiA9IGVuZCAtIHN0YXJ0CgkgIHZhciBpCgoJICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHsKCSAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmQKCSAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkgewoJICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF0KCSAgICB9CgkgIH0gZWxzZSBpZiAobGVuIDwgMTAwMCkgewoJICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnQKCSAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyArK2kpIHsKCSAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdCgkgICAgfQoJICB9IGVsc2UgewoJICAgIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKAoJICAgICAgdGFyZ2V0LAoJICAgICAgdGhpcy5zdWJhcnJheShzdGFydCwgc3RhcnQgKyBsZW4pLAoJICAgICAgdGFyZ2V0U3RhcnQKCSAgICApCgkgIH0KCgkgIHJldHVybiBsZW4KCX0KCgkvLyBVc2FnZToKCS8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKQoJLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pCgkvLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSkKCUJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHsKCSAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczoKCSAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CgkgICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHsKCSAgICAgIGVuY29kaW5nID0gc3RhcnQKCSAgICAgIHN0YXJ0ID0gMAoJICAgICAgZW5kID0gdGhpcy5sZW5ndGgKCSAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7CgkgICAgICBlbmNvZGluZyA9IGVuZAoJICAgICAgZW5kID0gdGhpcy5sZW5ndGgKCSAgICB9CgkgICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHsKCSAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMCkKCSAgICAgIGlmIChjb2RlIDwgMjU2KSB7CgkgICAgICAgIHZhbCA9IGNvZGUKCSAgICAgIH0KCSAgICB9CgkgICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykgewoJICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpCgkgICAgfQoJICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKCSAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKCSAgICB9CgkgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHsKCSAgICB2YWwgPSB2YWwgJiAyNTUKCSAgfQoKCSAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuCgkgIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKQoJICB9CgoJICBpZiAoZW5kIDw9IHN0YXJ0KSB7CgkgICAgcmV0dXJuIHRoaXMKCSAgfQoKCSAgc3RhcnQgPSBzdGFydCA+Pj4gMAoJICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwCgoJICBpZiAoIXZhbCkgdmFsID0gMAoKCSAgdmFyIGkKCSAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CgkgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkgewoJICAgICAgdGhpc1tpXSA9IHZhbAoJICAgIH0KCSAgfSBlbHNlIHsKCSAgICB2YXIgYnl0ZXMgPSBCdWZmZXIuaXNCdWZmZXIodmFsKQoJICAgICAgPyB2YWwKCSAgICAgIDogbmV3IEJ1ZmZlcih2YWwsIGVuY29kaW5nKQoJICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGgKCSAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkgewoJICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl0KCSAgICB9CgkgIH0KCgkgIHJldHVybiB0aGlzCgl9CgoJLy8gSEVMUEVSIEZVTkNUSU9OUwoJLy8gPT09PT09PT09PT09PT09PQoKCXZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXisvMC05QS1aYS16LV9dL2cKCglmdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7CgkgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcbiBhbmQgXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3QKCSAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKQoJICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnCgkgIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnCgkgIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdAoJICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHsKCSAgICBzdHIgPSBzdHIgKyAnPScKCSAgfQoJICByZXR1cm4gc3RyCgl9CgoJZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7CgkgIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKCkKCSAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMrfFxzKyQvZywgJycpCgl9CgoJZnVuY3Rpb24gdG9IZXggKG4pIHsKCSAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpCgkgIHJldHVybiBuLnRvU3RyaW5nKDE2KQoJfQoKCWZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7CgkgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHkKCSAgdmFyIGNvZGVQb2ludAoJICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aAoJICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGwKCSAgdmFyIGJ5dGVzID0gW10KCgkgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKCSAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKQoKCSAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50CgkgICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHsKCSAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkCgkgICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHsKCSAgICAgICAgLy8gbm8gbGVhZCB5ZXQKCSAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikgewoJICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWwKCSAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKCSAgICAgICAgICBjb250aW51ZQoJICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkCgkgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCgkgICAgICAgICAgY29udGludWUKCSAgICAgICAgfQoKCSAgICAgICAgLy8gdmFsaWQgbGVhZAoJICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50CgoJICAgICAgICBjb250aW51ZQoJICAgICAgfQoKCSAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3cKCSAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHsKCSAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCgkgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnQKCSAgICAgICAgY29udGludWUKCSAgICAgIH0KCgkgICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpcgoJICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMAoJICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkgewoJICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZAoJICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCgkgICAgfQoKCSAgICBsZWFkU3Vycm9nYXRlID0gbnVsbAoKCSAgICAvLyBlbmNvZGUgdXRmOAoJICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7CgkgICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWsKCSAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KQoJICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHsKCSAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVhawoJICAgICAgYnl0ZXMucHVzaCgKCSAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsCgkgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCgkgICAgICApCgkgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7CgkgICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWsKCSAgICAgIGJ5dGVzLnB1c2goCgkgICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCgkgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCgkgICAgICApCgkgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkgewoJICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrCgkgICAgICBieXRlcy5wdXNoKAoJICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsCgkgICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCwKCSAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAoJICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAoJICAgICAgKQoJICAgIH0gZWxzZSB7CgkgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpCgkgICAgfQoJICB9CgoJICByZXR1cm4gYnl0ZXMKCX0KCglmdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikgewoJICB2YXIgYnl0ZUFycmF5ID0gW10KCSAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKCSAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi4KCSAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpCgkgIH0KCSAgcmV0dXJuIGJ5dGVBcnJheQoJfQoKCWZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7CgkgIHZhciBjLCBoaSwgbG8KCSAgdmFyIGJ5dGVBcnJheSA9IFtdCgkgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7CgkgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrCgoJICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKQoJICAgIGhpID0gYyA+PiA4CgkgICAgbG8gPSBjICUgMjU2CgkgICAgYnl0ZUFycmF5LnB1c2gobG8pCgkgICAgYnl0ZUFycmF5LnB1c2goaGkpCgkgIH0KCgkgIHJldHVybiBieXRlQXJyYXkKCX0KCglmdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHsKCSAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKQoJfQoKCWZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkgewoJICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7CgkgICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVhawoJICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXQoJICB9CgkgIHJldHVybiBpCgl9CgoJZnVuY3Rpb24gaXNuYW4gKHZhbCkgewoJICByZXR1cm4gdmFsICE9PSB2YWwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmUKCX0KCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4KS5CdWZmZXIpKQoKLyoqKi8gfSwKLyogMjcgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0JzsKCgl2YXIgYnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7Cgl2YXIgQnVmZmVyID0gYnVmZmVyLkJ1ZmZlcjsKCXZhciBTbG93QnVmZmVyID0gYnVmZmVyLlNsb3dCdWZmZXI7Cgl2YXIgTUFYX0xFTiA9IGJ1ZmZlci5rTWF4TGVuZ3RoIHx8IDIxNDc0ODM2NDc7CglleHBvcnRzLmFsbG9jID0gZnVuY3Rpb24gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKCSAgaWYgKHR5cGVvZiBCdWZmZXIuYWxsb2MgPT09ICdmdW5jdGlvbicpIHsKCSAgICByZXR1cm4gQnVmZmVyLmFsbG9jKHNpemUsIGZpbGwsIGVuY29kaW5nKTsKCSAgfQoJICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3Qgbm90IGJlIG51bWJlcicpOwoJICB9CgkgIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzaXplIG11c3QgYmUgYSBudW1iZXInKTsKCSAgfQoJICBpZiAoc2l6ZSA+IE1BWF9MRU4pIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc2l6ZSBpcyB0b28gbGFyZ2UnKTsKCSAgfQoJICB2YXIgZW5jID0gZW5jb2Rpbmc7CgkgIHZhciBfZmlsbCA9IGZpbGw7CgkgIGlmIChfZmlsbCA9PT0gdW5kZWZpbmVkKSB7CgkgICAgZW5jID0gdW5kZWZpbmVkOwoJICAgIF9maWxsID0gMDsKCSAgfQoJICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzaXplKTsKCSAgaWYgKHR5cGVvZiBfZmlsbCA9PT0gJ3N0cmluZycpIHsKCSAgICB2YXIgZmlsbEJ1ZiA9IG5ldyBCdWZmZXIoX2ZpbGwsIGVuYyk7CgkgICAgdmFyIGZsZW4gPSBmaWxsQnVmLmxlbmd0aDsKCSAgICB2YXIgaSA9IC0xOwoJICAgIHdoaWxlICgrK2kgPCBzaXplKSB7CgkgICAgICBidWZbaV0gPSBmaWxsQnVmW2kgJSBmbGVuXTsKCSAgICB9CgkgIH0gZWxzZSB7CgkgICAgYnVmLmZpbGwoX2ZpbGwpOwoJICB9CgkgIHJldHVybiBidWY7Cgl9CglleHBvcnRzLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gYWxsb2NVbnNhZmUoc2l6ZSkgewoJICBpZiAodHlwZW9mIEJ1ZmZlci5hbGxvY1Vuc2FmZSA9PT0gJ2Z1bmN0aW9uJykgewoJICAgIHJldHVybiBCdWZmZXIuYWxsb2NVbnNhZmUoc2l6ZSk7CgkgIH0KCSAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NpemUgbXVzdCBiZSBhIG51bWJlcicpOwoJICB9CgkgIGlmIChzaXplID4gTUFYX0xFTikgewoJICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdzaXplIGlzIHRvbyBsYXJnZScpOwoJICB9CgkgIHJldHVybiBuZXcgQnVmZmVyKHNpemUpOwoJfQoJZXhwb3J0cy5mcm9tID0gZnVuY3Rpb24gZnJvbSh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CgkgIGlmICh0eXBlb2YgQnVmZmVyLmZyb20gPT09ICdmdW5jdGlvbicgJiYgKCFnbG9iYWwuVWludDhBcnJheSB8fCBVaW50OEFycmF5LmZyb20gIT09IEJ1ZmZlci5mcm9tKSkgewoJICAgIHJldHVybiBCdWZmZXIuZnJvbSh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKTsKCSAgfQoJICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKTsKCSAgfQoJICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewoJICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KTsKCSAgfQoJICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CgkgICAgdmFyIG9mZnNldCA9IGVuY29kaW5nT3JPZmZzZXQ7CgkgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHsKCSAgICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlKTsKCSAgICB9CgkgICAgaWYgKHR5cGVvZiBvZmZzZXQgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICBvZmZzZXQgPSAwOwoJICAgIH0KCSAgICB2YXIgbGVuID0gbGVuZ3RoOwoJICAgIGlmICh0eXBlb2YgbGVuID09PSAndW5kZWZpbmVkJykgewoJICAgICAgbGVuID0gdmFsdWUuYnl0ZUxlbmd0aCAtIG9mZnNldDsKCSAgICB9CgkgICAgaWYgKG9mZnNldCA+PSB2YWx1ZS5ieXRlTGVuZ3RoKSB7CgkgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCdvZmZzZXRcJyBpcyBvdXQgb2YgYm91bmRzJyk7CgkgICAgfQoJICAgIGlmIChsZW4gPiB2YWx1ZS5ieXRlTGVuZ3RoIC0gb2Zmc2V0KSB7CgkgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCdsZW5ndGhcJyBpcyBvdXQgb2YgYm91bmRzJyk7CgkgICAgfQoJICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbGVuKSk7CgkgIH0KCSAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWx1ZSkpIHsKCSAgICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcih2YWx1ZS5sZW5ndGgpOwoJICAgIHZhbHVlLmNvcHkob3V0LCAwLCAwLCB2YWx1ZS5sZW5ndGgpOwoJICAgIHJldHVybiBvdXQ7CgkgIH0KCSAgaWYgKHZhbHVlKSB7CgkgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpIHx8ICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiB2YWx1ZSkgewoJICAgICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUpOwoJICAgIH0KCSAgICBpZiAodmFsdWUudHlwZSA9PT0gJ0J1ZmZlcicgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZS5kYXRhKSkgewoJICAgICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUuZGF0YSk7CgkgICAgfQoJICB9CgoJICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsICcgKyAnQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKTsKCX0KCWV4cG9ydHMuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gYWxsb2NVbnNhZmVTbG93KHNpemUpIHsKCSAgaWYgKHR5cGVvZiBCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID09PSAnZnVuY3Rpb24nKSB7CgkgICAgcmV0dXJuIEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3coc2l6ZSk7CgkgIH0KCSAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NpemUgbXVzdCBiZSBhIG51bWJlcicpOwoJICB9CgkgIGlmIChzaXplID49IE1BWF9MRU4pIHsKCSAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc2l6ZSBpcyB0b28gbGFyZ2UnKTsKCSAgfQoJICByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc2l6ZSk7Cgl9CgoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKQoKLyoqKi8gfSwKLyogMjggKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gYSBkdXBsZXggc3RyZWFtIGlzIGp1c3QgYSBzdHJlYW0gdGhhdCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS4KCS8vIFNpbmNlIEpTIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB0aGlzIGNsYXNzCgkvLyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBSZWFkYWJsZSwgYW5kIHRoZW4gcGFyYXNpdGljYWxseSBmcm9tCgkvLyBXcml0YWJsZS4KCgkndXNlIHN0cmljdCc7CgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCgl2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHsKCSAgdmFyIGtleXMgPSBbXTsKCSAgZm9yICh2YXIga2V5IGluIG9iaikgewoJICAgIGtleXMucHVzaChrZXkpOwoJICB9cmV0dXJuIGtleXM7Cgl9OwoJLyo8L3JlcGxhY2VtZW50PiovCgoJbW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7CgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCXZhciBwcm9jZXNzTmV4dFRpY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwoJdXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpOwoJLyo8L3JlcGxhY2VtZW50PiovCgoJdmFyIFJlYWRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7Cgl2YXIgV3JpdGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKCgl1dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpOwoKCXZhciBrZXlzID0gb2JqZWN0S2V5cyhXcml0YWJsZS5wcm90b3R5cGUpOwoJZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7CgkgIHZhciBtZXRob2QgPSBrZXlzW3ZdOwoJICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07Cgl9CgoJZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHsKCSAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpOwoKCSAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKCSAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKCgkgIGlmIChvcHRpb25zICYmIG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKSB0aGlzLnJlYWRhYmxlID0gZmFsc2U7CgoJICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkgdGhpcy53cml0YWJsZSA9IGZhbHNlOwoKCSAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTsKCSAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7CgoJICB0aGlzLm9uY2UoJ2VuZCcsIG9uZW5kKTsKCX0KCgkvLyB0aGUgbm8taGFsZi1vcGVuIGVuZm9yY2VyCglmdW5jdGlvbiBvbmVuZCgpIHsKCSAgLy8gaWYgd2UgYWxsb3cgaGFsZi1vcGVuIHN0YXRlLCBvciBpZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCwKCSAgLy8gdGhlbiB3ZSdyZSBvay4KCSAgaWYgKHRoaXMuYWxsb3dIYWxmT3BlbiB8fCB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKSByZXR1cm47CgoJICAvLyBubyBtb3JlIGRhdGEgY2FuIGJlIHdyaXR0ZW4uCgkgIC8vIEJ1dCBhbGxvdyBtb3JlIHdyaXRlcyB0byBoYXBwZW4gaW4gdGhpcyB0aWNrLgoJICBwcm9jZXNzTmV4dFRpY2sob25FbmROVCwgdGhpcyk7Cgl9CgoJZnVuY3Rpb24gb25FbmROVChzZWxmKSB7CgkgIHNlbGYuZW5kKCk7Cgl9CgoJZnVuY3Rpb24gZm9yRWFjaCh4cywgZikgewoJICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJICAgIGYoeHNbaV0sIGkpOwoJICB9Cgl9CgovKioqLyB9LAovKiAyOSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0JzsKCgltb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlOwoKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgcHJvY2Vzc05leHRUaWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgkvKjxyZXBsYWNlbWVudD4qLwoJdmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgRHVwbGV4OwoJLyo8L3JlcGxhY2VtZW50PiovCgoJUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7CgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCXZhciBFRSA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpLkV2ZW50RW1pdHRlcjsKCgl2YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gKGVtaXR0ZXIsIHR5cGUpIHsKCSAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDsKCX07CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgkvKjxyZXBsYWNlbWVudD4qLwoJdmFyIFN0cmVhbTsKCShmdW5jdGlvbiAoKSB7CgkgIHRyeSB7CgkgICAgU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgkgIH0gY2F0Y2ggKF8pIHt9IGZpbmFsbHkgewoJICAgIGlmICghU3RyZWFtKSBTdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KS5FdmVudEVtaXR0ZXI7CgkgIH0KCX0pKCk7CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgl2YXIgQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikuQnVmZmVyOwoJLyo8cmVwbGFjZW1lbnQ+Ki8KCXZhciBidWZmZXJTaGltID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgkvKjxyZXBsYWNlbWVudD4qLwoJdmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCXV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgZGVidWdVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7Cgl2YXIgZGVidWcgPSB2b2lkIDA7CglpZiAoZGVidWdVdGlsICYmIGRlYnVnVXRpbC5kZWJ1Z2xvZykgewoJICBkZWJ1ZyA9IGRlYnVnVXRpbC5kZWJ1Z2xvZygnc3RyZWFtJyk7Cgl9IGVsc2UgewoJICBkZWJ1ZyA9IGZ1bmN0aW9uICgpIHt9OwoJfQoJLyo8L3JlcGxhY2VtZW50PiovCgoJdmFyIEJ1ZmZlckxpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCXZhciBTdHJpbmdEZWNvZGVyOwoKCXV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7CgoJZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBmbikgewoJICAvLyBTYWRseSB0aGlzIGlzIG5vdCBjYWNoZWFibGUgYXMgc29tZSBsaWJyYXJpZXMgYnVuZGxlIHRoZWlyIG93bgoJICAvLyBldmVudCBlbWl0dGVyIGltcGxlbWVudGF0aW9uIHdpdGggdGhlbS4KCSAgaWYgKHR5cGVvZiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgewoJICAgIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pOwoJICB9IGVsc2UgewoJICAgIC8vIFRoaXMgaXMgYSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnkKCSAgICAvLyB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy4gVGhpcyBpcyBoZXJlIG9ubHkgYmVjYXVzZSB0aGlzIGNvZGUgbmVlZHMKCSAgICAvLyB0byBjb250aW51ZSB0byB3b3JrIHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgTm9kZS5qcyB0aGF0IGRvIG5vdCBpbmNsdWRlCgkgICAgLy8gdGhlIHByZXBlbmRMaXN0ZW5lcigpIG1ldGhvZC4gVGhlIGdvYWwgaXMgdG8gZXZlbnR1YWxseSByZW1vdmUgdGhpcyBoYWNrLgoJICAgIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSBlbWl0dGVyLm9uKGV2ZW50LCBmbik7ZWxzZSBpZiAoaXNBcnJheShlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSkgZW1pdHRlci5fZXZlbnRzW2V2ZW50XS51bnNoaWZ0KGZuKTtlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0gPSBbZm4sIGVtaXR0ZXIuX2V2ZW50c1tldmVudF1dOwoJICB9Cgl9CgoJZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHsKCSAgRHVwbGV4ID0gRHVwbGV4IHx8IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKCSAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgoJICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0bwoJICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheQoJICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTsKCgkgIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlOwoKCSAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIGl0IHN0b3BzIGNhbGxpbmcgX3JlYWQoKSB0byBmaWxsIHRoZSBidWZmZXIKCSAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyAiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlciIKCSAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyazsKCSAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKCSAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gaHdtIHx8IGh3bSA9PT0gMCA/IGh3bSA6IGRlZmF1bHRId207CgoJICAvLyBjYXN0IHRvIGludHMuCgkgIHRoaXMuaGlnaFdhdGVyTWFyayA9IH4gfnRoaXMuaGlnaFdhdGVyTWFyazsKCgkgIC8vIEEgbGlua2VkIGxpc3QgaXMgdXNlZCB0byBzdG9yZSBkYXRhIGNodW5rcyBpbnN0ZWFkIG9mIGFuIGFycmF5IGJlY2F1c2UgdGhlCgkgIC8vIGxpbmtlZCBsaXN0IGNhbiByZW1vdmUgZWxlbWVudHMgZnJvbSB0aGUgYmVnaW5uaW5nIGZhc3RlciB0aGFuCgkgIC8vIGFycmF5LnNoaWZ0KCkKCSAgdGhpcy5idWZmZXIgPSBuZXcgQnVmZmVyTGlzdCgpOwoJICB0aGlzLmxlbmd0aCA9IDA7CgkgIHRoaXMucGlwZXMgPSBudWxsOwoJICB0aGlzLnBpcGVzQ291bnQgPSAwOwoJICB0aGlzLmZsb3dpbmcgPSBudWxsOwoJICB0aGlzLmVuZGVkID0gZmFsc2U7CgkgIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlOwoJICB0aGlzLnJlYWRpbmcgPSBmYWxzZTsKCgkgIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LAoJICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueQoJICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCAibGF0ZXIiIHNob3VsZCBnZW5lcmFsbHkgYWxzbwoJICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC4KCSAgdGhpcy5zeW5jID0gdHJ1ZTsKCgkgIC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5CgkgIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLgoJICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwoJICB0aGlzLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwoJICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7CgkgIHRoaXMucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7CgoJICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCgkgIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS4KCSAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLgoJICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsKCgkgIC8vIHdoZW4gcGlwaW5nLCB3ZSBvbmx5IGNhcmUgYWJvdXQgJ3JlYWRhYmxlJyBldmVudHMgdGhhdCBoYXBwZW4KCSAgLy8gYWZ0ZXIgcmVhZCgpaW5nIGFsbCB0aGUgYnl0ZXMgYW5kIG5vdCBnZXR0aW5nIGFueSBwdXNoYmFjay4KCSAgdGhpcy5yYW5PdXQgPSBmYWxzZTsKCgkgIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzCgkgIHRoaXMuYXdhaXREcmFpbiA9IDA7CgoJICAvLyBpZiB0cnVlLCBhIG1heWJlUmVhZE1vcmUgaGFzIGJlZW4gc2NoZWR1bGVkCgkgIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTsKCgkgIHRoaXMuZGVjb2RlciA9IG51bGw7CgkgIHRoaXMuZW5jb2RpbmcgPSBudWxsOwoJICBpZiAob3B0aW9ucy5lbmNvZGluZykgewoJICAgIGlmICghU3RyaW5nRGVjb2RlcikgU3RyaW5nRGVjb2RlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpLlN0cmluZ0RlY29kZXI7CgkgICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7CgkgICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7CgkgIH0KCX0KCglmdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7CgkgIER1cGxleCA9IER1cGxleCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTsKCgkgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7CgoJICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7CgoJICAvLyBsZWdhY3kKCSAgdGhpcy5yZWFkYWJsZSA9IHRydWU7CgoJICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKSB0aGlzLl9yZWFkID0gb3B0aW9ucy5yZWFkOwoKCSAgU3RyZWFtLmNhbGwodGhpcyk7Cgl9CgoJLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuCgkvLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCwKCS8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGQKCS8vIHdyaXRlKCkgc29tZSBtb3JlLgoJUmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nKSB7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgoJICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewoJICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nOwoJICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUuZW5jb2RpbmcpIHsKCSAgICAgIGNodW5rID0gYnVmZmVyU2hpbS5mcm9tKGNodW5rLCBlbmNvZGluZyk7CgkgICAgICBlbmNvZGluZyA9ICcnOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgZmFsc2UpOwoJfTsKCgkvLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKQoJUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiAoY2h1bmspIHsKCSAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCSAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCAnJywgdHJ1ZSk7Cgl9OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5pc1BhdXNlZCA9IGZ1bmN0aW9uICgpIHsKCSAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9PT0gZmFsc2U7Cgl9OwoKCWZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250KSB7CgkgIHZhciBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspOwoJICBpZiAoZXIpIHsKCSAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CgkgIH0gZWxzZSBpZiAoY2h1bmsgPT09IG51bGwpIHsKCSAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7CgkgICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTsKCSAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHsKCSAgICBpZiAoc3RhdGUuZW5kZWQgJiYgIWFkZFRvRnJvbnQpIHsKCSAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpOwoJICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7CgkgICAgfSBlbHNlIGlmIChzdGF0ZS5lbmRFbWl0dGVkICYmIGFkZFRvRnJvbnQpIHsKCSAgICAgIHZhciBfZSA9IG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTsKCSAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIF9lKTsKCSAgICB9IGVsc2UgewoJICAgICAgdmFyIHNraXBBZGQ7CgkgICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhYWRkVG9Gcm9udCAmJiAhZW5jb2RpbmcpIHsKCSAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTsKCSAgICAgICAgc2tpcEFkZCA9ICFzdGF0ZS5vYmplY3RNb2RlICYmIGNodW5rLmxlbmd0aCA9PT0gMDsKCSAgICAgIH0KCgkgICAgICBpZiAoIWFkZFRvRnJvbnQpIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKCgkgICAgICAvLyBEb24ndCBhZGQgdG8gdGhlIGJ1ZmZlciBpZiB3ZSd2ZSBkZWNvZGVkIHRvIGFuIGVtcHR5IHN0cmluZyBjaHVuayBhbmQKCSAgICAgIC8vIHdlJ3JlIG5vdCBpbiBvYmplY3QgbW9kZQoJICAgICAgaWYgKCFza2lwQWRkKSB7CgkgICAgICAgIC8vIGlmIHdlIHdhbnQgdGhlIGRhdGEgbm93LCBqdXN0IGVtaXQgaXQuCgkgICAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykgewoJICAgICAgICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspOwoJICAgICAgICAgIHN0cmVhbS5yZWFkKDApOwoJICAgICAgICB9IGVsc2UgewoJICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uCgkgICAgICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoJICAgICAgICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7CgoJICAgICAgICAgIGlmIChzdGF0ZS5uZWVkUmVhZGFibGUpIGVtaXRSZWFkYWJsZShzdHJlYW0pOwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTsKCSAgICB9CgkgIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHsKCSAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7CgkgIH0KCgkgIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpOwoJfQoKCS8vIGlmIGl0J3MgcGFzdCB0aGUgaGlnaCB3YXRlciBtYXJrLCB3ZSBjYW4gcHVzaCBpbiBzb21lIG1vcmUuCgkvLyBBbHNvLCBpZiB3ZSBoYXZlIG5vIGRhdGEgeWV0LCB3ZSBjYW4gc3RhbmQgc29tZQoJLy8gbW9yZSBieXRlcy4gIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsCgkvLyBzdWNoIGFzIHRoZSByZXBsLiAgQWxzbywgaWYgdGhlIHB1c2goKSB0cmlnZ2VyZWQgYQoJLy8gcmVhZGFibGUgZXZlbnQsIGFuZCB0aGUgdXNlciBjYWxsZWQgcmVhZChsYXJnZU51bWJlcikgc3VjaCB0aGF0CgkvLyBuZWVkUmVhZGFibGUgd2FzIHNldCwgdGhlbiB3ZSBvdWdodCB0byBwdXNoIG1vcmUsIHNvIHRoYXQgYW5vdGhlcgoJLy8gJ3JlYWRhYmxlJyBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC4KCWZ1bmN0aW9uIG5lZWRNb3JlRGF0YShzdGF0ZSkgewoJICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5uZWVkUmVhZGFibGUgfHwgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5sZW5ndGggPT09IDApOwoJfQoKCS8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgoJUmVhZGFibGUucHJvdG90eXBlLnNldEVuY29kaW5nID0gZnVuY3Rpb24gKGVuYykgewoJICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKS5TdHJpbmdEZWNvZGVyOwoJICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpOwoJICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jOwoJICByZXR1cm4gdGhpczsKCX07CgoJLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQgoJdmFyIE1BWF9IV00gPSAweDgwMDAwMDsKCWZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHsKCSAgaWYgKG4gPj0gTUFYX0hXTSkgewoJICAgIG4gPSBNQVhfSFdNOwoJICB9IGVsc2UgewoJICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpbgoJICAgIC8vIHRpbnkgYW1vdW50cwoJICAgIG4tLTsKCSAgICBuIHw9IG4gPj4+IDE7CgkgICAgbiB8PSBuID4+PiAyOwoJICAgIG4gfD0gbiA+Pj4gNDsKCSAgICBuIHw9IG4gPj4+IDg7CgkgICAgbiB8PSBuID4+PiAxNjsKCSAgICBuKys7CgkgIH0KCSAgcmV0dXJuIG47Cgl9CgoJLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmcKCS8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuCglmdW5jdGlvbiBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKSB7CgkgIGlmIChuIDw9IDAgfHwgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSByZXR1cm4gMDsKCSAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldHVybiAxOwoJICBpZiAobiAhPT0gbikgewoJICAgIC8vIE9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZQoJICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCkgcmV0dXJuIHN0YXRlLmJ1ZmZlci5oZWFkLmRhdGEubGVuZ3RoO2Vsc2UgcmV0dXJuIHN0YXRlLmxlbmd0aDsKCSAgfQoJICAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgY3VycmVudCBod20sIHRoZW4gcmFpc2UgdGhlIGh3bS4KCSAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSBzdGF0ZS5oaWdoV2F0ZXJNYXJrID0gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobik7CgkgIGlmIChuIDw9IHN0YXRlLmxlbmd0aCkgcmV0dXJuIG47CgkgIC8vIERvbid0IGhhdmUgZW5vdWdoCgkgIGlmICghc3RhdGUuZW5kZWQpIHsKCSAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlOwoJICAgIHJldHVybiAwOwoJICB9CgkgIHJldHVybiBzdGF0ZS5sZW5ndGg7Cgl9CgoJLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy4KCVJlYWRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKG4pIHsKCSAgZGVidWcoJ3JlYWQnLCBuKTsKCSAgbiA9IHBhcnNlSW50KG4sIDEwKTsKCSAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCSAgdmFyIG5PcmlnID0gbjsKCgkgIGlmIChuICE9PSAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKCgkgIC8vIGlmIHdlJ3JlIGRvaW5nIHJlYWQoMCkgdG8gdHJpZ2dlciBhIHJlYWRhYmxlIGV2ZW50LCBidXQgd2UKCSAgLy8gYWxyZWFkeSBoYXZlIGEgYnVuY2ggb2YgZGF0YSBpbiB0aGUgYnVmZmVyLCB0aGVuIGp1c3QgdHJpZ2dlcgoJICAvLyB0aGUgJ3JlYWRhYmxlJyBldmVudCBhbmQgbW92ZSBvbi4KCSAgaWYgKG4gPT09IDAgJiYgc3RhdGUubmVlZFJlYWRhYmxlICYmIChzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5lbmRlZCkpIHsKCSAgICBkZWJ1ZygncmVhZDogZW1pdFJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5lbmRlZCk7CgkgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7ZWxzZSBlbWl0UmVhZGFibGUodGhpcyk7CgkgICAgcmV0dXJuIG51bGw7CgkgIH0KCgkgIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTsKCgkgIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC4KCSAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHsKCSAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBlbmRSZWFkYWJsZSh0aGlzKTsKCSAgICByZXR1cm4gbnVsbDsKCSAgfQoKCSAgLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZQoJICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW4KCSAgLy8gc3ludGhldGljIHN0cmVhbSBjYXNlcywgc3VjaCBhcyBwYXNzdGhyb3VnaCBzdHJlYW1zLCBfcmVhZAoJICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlCgkgIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuCgkgIC8vIGJlZm9yZSB0aGVyZSB3YXMgKm5vdCogZW5vdWdoLgoJICAvLwoJICAvLyBTbywgdGhlIHN0ZXBzIGFyZToKCSAgLy8gMS4gRmlndXJlIG91dCB3aGF0IHRoZSBzdGF0ZSBvZiB0aGluZ3Mgd2lsbCBiZSBhZnRlciB3ZSBkbwoJICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLgoJICAvLwoJICAvLyAyLiBJZiB0aGF0IHJlc3VsdGluZyBzdGF0ZSB3aWxsIHRyaWdnZXIgYSBfcmVhZCwgdGhlbiBjYWxsIF9yZWFkLgoJICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXMKCSAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuCgkgIC8vIHRoYXQgdGhlIFJlYWRhYmxlIGNsYXNzIHNob3VsZCBiZWhhdmUgaW1wcm9wZXJseSwgYXMgc3RyZWFtcyBhcmUKCSAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy4KCSAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsCgkgIC8vIGhhcyByZXR1cm5lZCB5ZXQpLCBzbyB0aGF0IHdlIGtub3cgd2hldGhlciBvciBub3QgaXQncyBzYWZlIHRvIGVtaXQKCSAgLy8gJ3JlYWRhYmxlJyBldGMuCgkgIC8vCgkgIC8vIDMuIEFjdHVhbGx5IHB1bGwgdGhlIHJlcXVlc3RlZCBjaHVua3Mgb3V0IG9mIHRoZSBidWZmZXIgYW5kIHJldHVybi4KCgkgIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy4KCSAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTsKCSAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpOwoKCSAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lCgkgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHsKCSAgICBkb1JlYWQgPSB0cnVlOwoJICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7CgkgIH0KCgkgIC8vIGhvd2V2ZXIsIGlmIHdlJ3ZlIGVuZGVkLCB0aGVuIHRoZXJlJ3Mgbm8gcG9pbnQsIGFuZCBpZiB3ZSdyZSBhbHJlYWR5CgkgIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS4KCSAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHsKCSAgICBkb1JlYWQgPSBmYWxzZTsKCSAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7CgkgIH0gZWxzZSBpZiAoZG9SZWFkKSB7CgkgICAgZGVidWcoJ2RvIHJlYWQnKTsKCSAgICBzdGF0ZS5yZWFkaW5nID0gdHJ1ZTsKCSAgICBzdGF0ZS5zeW5jID0gdHJ1ZTsKCSAgICAvLyBpZiB0aGUgbGVuZ3RoIGlzIGN1cnJlbnRseSB6ZXJvLCB0aGVuIHdlICpuZWVkKiBhIHJlYWRhYmxlIGV2ZW50LgoJICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CgkgICAgLy8gY2FsbCBpbnRlcm5hbCByZWFkIG1ldGhvZAoJICAgIHRoaXMuX3JlYWQoc3RhdGUuaGlnaFdhdGVyTWFyayk7CgkgICAgc3RhdGUuc3luYyA9IGZhbHNlOwoJICAgIC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsCgkgICAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLgoJICAgIGlmICghc3RhdGUucmVhZGluZykgbiA9IGhvd011Y2hUb1JlYWQobk9yaWcsIHN0YXRlKTsKCSAgfQoKCSAgdmFyIHJldDsKCSAgaWYgKG4gPiAwKSByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7ZWxzZSByZXQgPSBudWxsOwoKCSAgaWYgKHJldCA9PT0gbnVsbCkgewoJICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CgkgICAgbiA9IDA7CgkgIH0gZWxzZSB7CgkgICAgc3RhdGUubGVuZ3RoIC09IG47CgkgIH0KCgkgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsKCSAgICAvLyBJZiB3ZSBoYXZlIG5vdGhpbmcgaW4gdGhlIGJ1ZmZlciwgdGhlbiB3ZSB3YW50IHRvIGtub3cKCSAgICAvLyBhcyBzb29uIGFzIHdlICpkbyogZ2V0IHNvbWV0aGluZyBpbnRvIHRoZSBidWZmZXIuCgkgICAgaWYgKCFzdGF0ZS5lbmRlZCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCgkgICAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLgoJICAgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7CgkgIH0KCgkgIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7CgoJICByZXR1cm4gcmV0OwoJfTsKCglmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7CgkgIHZhciBlciA9IG51bGw7CgkgIGlmICghQnVmZmVyLmlzQnVmZmVyKGNodW5rKSAmJiB0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmIGNodW5rICE9PSBudWxsICYmIGNodW5rICE9PSB1bmRlZmluZWQgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHsKCSAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTsKCSAgfQoJICByZXR1cm4gZXI7Cgl9CgoJZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7CgkgIGlmIChzdGF0ZS5lbmRlZCkgcmV0dXJuOwoJICBpZiAoc3RhdGUuZGVjb2RlcikgewoJICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7CgkgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgewoJICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspOwoJICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoJICAgIH0KCSAgfQoJICBzdGF0ZS5lbmRlZCA9IHRydWU7CgoJICAvLyBlbWl0ICdyZWFkYWJsZScgbm93IHRvIG1ha2Ugc3VyZSBpdCBnZXRzIHBpY2tlZCB1cC4KCSAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7Cgl9CgoJLy8gRG9uJ3QgZW1pdCByZWFkYWJsZSByaWdodCBhd2F5IGluIHN5bmMgbW9kZSwgYmVjYXVzZSB0aGlzIGNhbiB0cmlnZ2VyCgkvLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXIKCS8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC4KCWZ1bmN0aW9uIGVtaXRSZWFkYWJsZShzdHJlYW0pIHsKCSAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwoJICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTsKCSAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHsKCSAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7CgkgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICBpZiAoc3RhdGUuc3luYykgcHJvY2Vzc05leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7ZWxzZSBlbWl0UmVhZGFibGVfKHN0cmVhbSk7CgkgIH0KCX0KCglmdW5jdGlvbiBlbWl0UmVhZGFibGVfKHN0cmVhbSkgewoJICBkZWJ1ZygnZW1pdCByZWFkYWJsZScpOwoJICBzdHJlYW0uZW1pdCgncmVhZGFibGUnKTsKCSAgZmxvdyhzdHJlYW0pOwoJfQoKCS8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsCgkvLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkCgkvLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZgoJLy8gaXQncyBpbiBwcm9ncmVzcy4KCS8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sCgkvLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LgoJZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7CgkgIGlmICghc3RhdGUucmVhZGluZ01vcmUpIHsKCSAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7CgkgICAgcHJvY2Vzc05leHRUaWNrKG1heWJlUmVhZE1vcmVfLCBzdHJlYW0sIHN0YXRlKTsKCSAgfQoJfQoKCWZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHsKCSAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDsKCSAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7CgkgICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7CgkgICAgc3RyZWFtLnJlYWQoMCk7CgkgICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKQoJICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy4KCSAgICAgIGJyZWFrO2Vsc2UgbGVuID0gc3RhdGUubGVuZ3RoOwoJICB9CgkgIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7Cgl9CgoJLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgoJLy8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC4KCS8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCAibGVuZ3RoIiBpcyBzb21ld2hhdAoJLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLgoJUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHsKCSAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignX3JlYWQoKSBpcyBub3QgaW1wbGVtZW50ZWQnKSk7Cgl9OwoKCVJlYWRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKGRlc3QsIHBpcGVPcHRzKSB7CgkgIHZhciBzcmMgPSB0aGlzOwoJICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoKCSAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7CgkgICAgY2FzZSAwOgoJICAgICAgc3RhdGUucGlwZXMgPSBkZXN0OwoJICAgICAgYnJlYWs7CgkgICAgY2FzZSAxOgoJICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdOwoJICAgICAgYnJlYWs7CgkgICAgZGVmYXVsdDoKCSAgICAgIHN0YXRlLnBpcGVzLnB1c2goZGVzdCk7CgkgICAgICBicmVhazsKCSAgfQoJICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7CgkgIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7CgoJICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyOwoKCSAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IGNsZWFudXA7CgkgIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBwcm9jZXNzTmV4dFRpY2soZW5kRm4pO2Vsc2Ugc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTsKCgkgIGRlc3Qub24oJ3VucGlwZScsIG9udW5waXBlKTsKCSAgZnVuY3Rpb24gb251bnBpcGUocmVhZGFibGUpIHsKCSAgICBkZWJ1Zygnb251bnBpcGUnKTsKCSAgICBpZiAocmVhZGFibGUgPT09IHNyYykgewoJICAgICAgY2xlYW51cCgpOwoJICAgIH0KCSAgfQoKCSAgZnVuY3Rpb24gb25lbmQoKSB7CgkgICAgZGVidWcoJ29uZW5kJyk7CgkgICAgZGVzdC5lbmQoKTsKCSAgfQoKCSAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlcgoJICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKCkKCSAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXMKCSAgLy8gdG9vIHNsb3cuCgkgIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTsKCSAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTsKCgkgIHZhciBjbGVhbmVkVXAgPSBmYWxzZTsKCSAgZnVuY3Rpb24gY2xlYW51cCgpIHsKCSAgICBkZWJ1ZygnY2xlYW51cCcpOwoJICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW4KCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pOwoJICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CgkgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpOwoJICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpOwoJICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7CgkgICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTsKCgkgICAgY2xlYW5lZFVwID0gdHJ1ZTsKCgkgICAgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpcwoJICAgIC8vIHNwZWNpZmljIHdyaXRlciwgdGhlbiBpdCB3b3VsZCBjYXVzZSBpdCB0byBuZXZlciBzdGFydAoJICAgIC8vIGZsb3dpbmcgYWdhaW4uCgkgICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LgoJICAgIC8vIElmIHdlIGRvbid0IGtub3csIHRoZW4gYXNzdW1lIHRoYXQgd2UgYXJlIHdhaXRpbmcgZm9yIG9uZS4KCSAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiAmJiAoIWRlc3QuX3dyaXRhYmxlU3RhdGUgfHwgZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKSBvbmRyYWluKCk7CgkgIH0KCgkgIC8vIElmIHRoZSB1c2VyIHB1c2hlcyBtb3JlIGRhdGEgd2hpbGUgd2UncmUgd3JpdGluZyB0byBkZXN0IHRoZW4gd2UnbGwgZW5kIHVwCgkgIC8vIGluIG9uZGF0YSBhZ2Fpbi4gSG93ZXZlciwgd2Ugb25seSB3YW50IHRvIGluY3JlYXNlIGF3YWl0RHJhaW4gb25jZSBiZWNhdXNlCgkgIC8vIGRlc3Qgd2lsbCBvbmx5IGVtaXQgb25lICdkcmFpbicgZXZlbnQgZm9yIHRoZSBtdWx0aXBsZSB3cml0ZXMuCgkgIC8vID0+IEludHJvZHVjZSBhIGd1YXJkIG9uIGluY3JlYXNpbmcgYXdhaXREcmFpbi4KCSAgdmFyIGluY3JlYXNlZEF3YWl0RHJhaW4gPSBmYWxzZTsKCSAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTsKCSAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CgkgICAgZGVidWcoJ29uZGF0YScpOwoJICAgIGluY3JlYXNlZEF3YWl0RHJhaW4gPSBmYWxzZTsKCSAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7CgkgICAgaWYgKGZhbHNlID09PSByZXQgJiYgIWluY3JlYXNlZEF3YWl0RHJhaW4pIHsKCSAgICAgIC8vIElmIHRoZSB1c2VyIHVucGlwZWQgZHVyaW5nIGBkZXN0LndyaXRlKClgLCBpdCBpcyBwb3NzaWJsZQoJICAgICAgLy8gdG8gZ2V0IHN0dWNrIGluIGEgcGVybWFuZW50bHkgcGF1c2VkIHN0YXRlIGlmIHRoYXQgd3JpdGUKCSAgICAgIC8vIGFsc28gcmV0dXJuZWQgZmFsc2UuCgkgICAgICAvLyA9PiBDaGVjayB3aGV0aGVyIGBkZXN0YCBpcyBzdGlsbCBhIHBpcGluZyBkZXN0aW5hdGlvbi4KCSAgICAgIGlmICgoc3RhdGUucGlwZXNDb3VudCA9PT0gMSAmJiBzdGF0ZS5waXBlcyA9PT0gZGVzdCB8fCBzdGF0ZS5waXBlc0NvdW50ID4gMSAmJiBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KSAhPT0gLTEpICYmICFjbGVhbmVkVXApIHsKCSAgICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKTsKCSAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKzsKCSAgICAgICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IHRydWU7CgkgICAgICB9CgkgICAgICBzcmMucGF1c2UoKTsKCSAgICB9CgkgIH0KCgkgIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LgoJICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuCgkgIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHsKCSAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTsKCSAgICB1bnBpcGUoKTsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwoJICAgIGlmIChFRWxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApIGRlc3QuZW1pdCgnZXJyb3InLCBlcik7CgkgIH0KCgkgIC8vIE1ha2Ugc3VyZSBvdXIgZXJyb3IgaGFuZGxlciBpcyBhdHRhY2hlZCBiZWZvcmUgdXNlcmxhbmQgb25lcy4KCSAgcHJlcGVuZExpc3RlbmVyKGRlc3QsICdlcnJvcicsIG9uZXJyb3IpOwoKCSAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS4KCSAgZnVuY3Rpb24gb25jbG9zZSgpIHsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7CgkgICAgdW5waXBlKCk7CgkgIH0KCSAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpOwoJICBmdW5jdGlvbiBvbmZpbmlzaCgpIHsKCSAgICBkZWJ1Zygnb25maW5pc2gnKTsKCSAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpOwoJICAgIHVucGlwZSgpOwoJICB9CgkgIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpOwoKCSAgZnVuY3Rpb24gdW5waXBlKCkgewoJICAgIGRlYnVnKCd1bnBpcGUnKTsKCSAgICBzcmMudW5waXBlKGRlc3QpOwoJICB9CgoJICAvLyB0ZWxsIHRoZSBkZXN0IHRoYXQgaXQncyBiZWluZyBwaXBlZCB0bwoJICBkZXN0LmVtaXQoJ3BpcGUnLCBzcmMpOwoKCSAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LgoJICBpZiAoIXN0YXRlLmZsb3dpbmcpIHsKCSAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTsKCSAgICBzcmMucmVzdW1lKCk7CgkgIH0KCgkgIHJldHVybiBkZXN0OwoJfTsKCglmdW5jdGlvbiBwaXBlT25EcmFpbihzcmMpIHsKCSAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgc3RhdGUgPSBzcmMuX3JlYWRhYmxlU3RhdGU7CgkgICAgZGVidWcoJ3BpcGVPbkRyYWluJywgc3RhdGUuYXdhaXREcmFpbik7CgkgICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4pIHN0YXRlLmF3YWl0RHJhaW4tLTsKCSAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRWxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7CgkgICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTsKCSAgICAgIGZsb3coc3JjKTsKCSAgICB9CgkgIH07Cgl9CgoJUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgoJICAvLyBpZiB3ZSdyZSBub3QgcGlwaW5nIGFueXdoZXJlLCB0aGVuIGRvIG5vdGhpbmcuCgkgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKSByZXR1cm4gdGhpczsKCgkgIC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS4KCSAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHsKCSAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS4KCSAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcykgcmV0dXJuIHRoaXM7CgoJICAgIGlmICghZGVzdCkgZGVzdCA9IHN0YXRlLnBpcGVzOwoKCSAgICAvLyBnb3QgYSBtYXRjaC4KCSAgICBzdGF0ZS5waXBlcyA9IG51bGw7CgkgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CgkgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoJICAgIGlmIChkZXN0KSBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpOwoJICAgIHJldHVybiB0aGlzOwoJICB9CgoJICAvLyBzbG93IGNhc2UuIG11bHRpcGxlIHBpcGUgZGVzdGluYXRpb25zLgoKCSAgaWYgKCFkZXN0KSB7CgkgICAgLy8gcmVtb3ZlIGFsbC4KCSAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlczsKCSAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDsKCSAgICBzdGF0ZS5waXBlcyA9IG51bGw7CgkgICAgc3RhdGUucGlwZXNDb3VudCA9IDA7CgkgICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwoKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CgkgICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzKTsKCSAgICB9cmV0dXJuIHRoaXM7CgkgIH0KCgkgIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuCgkgIHZhciBpbmRleCA9IGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpOwoJICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gdGhpczsKCgkgIHN0YXRlLnBpcGVzLnNwbGljZShpbmRleCwgMSk7CgkgIHN0YXRlLnBpcGVzQ291bnQgLT0gMTsKCSAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07CgoJICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpOwoKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCS8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3IKCS8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nCglSZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGZuKSB7CgkgIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTsKCgkgIGlmIChldiA9PT0gJ2RhdGEnKSB7CgkgICAgLy8gU3RhcnQgZmxvd2luZyBvbiBuZXh0IHRpY2sgaWYgc3RyZWFtIGlzbid0IGV4cGxpY2l0bHkgcGF1c2VkCgkgICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyAhPT0gZmFsc2UpIHRoaXMucmVzdW1lKCk7CgkgIH0gZWxzZSBpZiAoZXYgPT09ICdyZWFkYWJsZScpIHsKCSAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoJICAgIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiAhc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHsKCSAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKCSAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwoJICAgICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7CgkgICAgICAgIHByb2Nlc3NOZXh0VGljayhuUmVhZGluZ05leHRUaWNrLCB0aGlzKTsKCSAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGVuZ3RoKSB7CgkgICAgICAgIGVtaXRSZWFkYWJsZSh0aGlzLCBzdGF0ZSk7CgkgICAgICB9CgkgICAgfQoJICB9CgoJICByZXR1cm4gcmVzOwoJfTsKCVJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjsKCglmdW5jdGlvbiBuUmVhZGluZ05leHRUaWNrKHNlbGYpIHsKCSAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpOwoJICBzZWxmLnJlYWQoMCk7Cgl9CgoJLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSQoJLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLgoJUmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCSAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7CgkgICAgZGVidWcoJ3Jlc3VtZScpOwoJICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlOwoJICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7CgkgIH0KCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCWZ1bmN0aW9uIHJlc3VtZShzdHJlYW0sIHN0YXRlKSB7CgkgIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7CgkgICAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTsKCSAgICBwcm9jZXNzTmV4dFRpY2socmVzdW1lXywgc3RyZWFtLCBzdGF0ZSk7CgkgIH0KCX0KCglmdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHsKCSAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7CgkgICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTsKCSAgICBzdHJlYW0ucmVhZCgwKTsKCSAgfQoKCSAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7CgkgIHN0YXRlLmF3YWl0RHJhaW4gPSAwOwoJICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7CgkgIGZsb3coc3RyZWFtKTsKCSAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpIHN0cmVhbS5yZWFkKDApOwoJfQoKCVJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHsKCSAgZGVidWcoJ2NhbGwgcGF1c2UgZmxvd2luZz0laicsIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7CgkgIGlmIChmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7CgkgICAgZGVidWcoJ3BhdXNlJyk7CgkgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gZmFsc2U7CgkgICAgdGhpcy5lbWl0KCdwYXVzZScpOwoJICB9CgkgIHJldHVybiB0aGlzOwoJfTsKCglmdW5jdGlvbiBmbG93KHN0cmVhbSkgewoJICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgkgIGRlYnVnKCdmbG93Jywgc3RhdGUuZmxvd2luZyk7CgkgIHdoaWxlIChzdGF0ZS5mbG93aW5nICYmIHN0cmVhbS5yZWFkKCkgIT09IG51bGwpIHt9Cgl9CgoJLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS4KCS8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS4KCS8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LgoJUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoc3RyZWFtKSB7CgkgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CgkgIHZhciBwYXVzZWQgPSBmYWxzZTsKCgkgIHZhciBzZWxmID0gdGhpczsKCSAgc3RyZWFtLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7CgkgICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7CgkgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7CgkgICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpOwoJICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgc2VsZi5wdXNoKGNodW5rKTsKCSAgICB9CgoJICAgIHNlbGYucHVzaChudWxsKTsKCSAgfSk7CgoJICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHsKCSAgICBkZWJ1Zygnd3JhcHBlZCBkYXRhJyk7CgkgICAgaWYgKHN0YXRlLmRlY29kZXIpIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7CgoJICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZQoJICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuO2Vsc2UgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmICghY2h1bmsgfHwgIWNodW5rLmxlbmd0aCkpIHJldHVybjsKCgkgICAgdmFyIHJldCA9IHNlbGYucHVzaChjaHVuayk7CgkgICAgaWYgKCFyZXQpIHsKCSAgICAgIHBhdXNlZCA9IHRydWU7CgkgICAgICBzdHJlYW0ucGF1c2UoKTsKCSAgICB9CgkgIH0pOwoKCSAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLgoJICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy4KCSAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHsKCSAgICBpZiAodGhpc1tpXSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdHJlYW1baV0gPT09ICdmdW5jdGlvbicpIHsKCSAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbiAobWV0aG9kKSB7CgkgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTsKCSAgICAgICAgfTsKCSAgICAgIH0oaSk7CgkgICAgfQoJICB9CgoJICAvLyBwcm94eSBjZXJ0YWluIGltcG9ydGFudCBldmVudHMuCgkgIHZhciBldmVudHMgPSBbJ2Vycm9yJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knLCAncGF1c2UnLCAncmVzdW1lJ107CgkgIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbiAoZXYpIHsKCSAgICBzdHJlYW0ub24oZXYsIHNlbGYuZW1pdC5iaW5kKHNlbGYsIGV2KSk7CgkgIH0pOwoKCSAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZQoJICAvLyB1bmRlcmx5aW5nIHN0cmVhbS4KCSAgc2VsZi5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTsKCSAgICBpZiAocGF1c2VkKSB7CgkgICAgICBwYXVzZWQgPSBmYWxzZTsKCSAgICAgIHN0cmVhbS5yZXN1bWUoKTsKCSAgICB9CgkgIH07CgoJICByZXR1cm4gc2VsZjsKCX07CgoJLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LgoJUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7CgoJLy8gUGx1Y2sgb2ZmIG4gYnl0ZXMgZnJvbSBhbiBhcnJheSBvZiBidWZmZXJzLgoJLy8gTGVuZ3RoIGlzIHRoZSBjb21iaW5lZCBsZW5ndGhzIG9mIGFsbCB0aGUgYnVmZmVycyBpbiB0aGUgbGlzdC4KCS8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nCgkvLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LgoJZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHsKCSAgLy8gbm90aGluZyBidWZmZXJlZAoJICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKCgkgIHZhciByZXQ7CgkgIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXQgPSBzdGF0ZS5idWZmZXIuc2hpZnQoKTtlbHNlIGlmICghbiB8fCBuID49IHN0YXRlLmxlbmd0aCkgewoJICAgIC8vIHJlYWQgaXQgYWxsLCB0cnVuY2F0ZSB0aGUgbGlzdAoJICAgIGlmIChzdGF0ZS5kZWNvZGVyKSByZXQgPSBzdGF0ZS5idWZmZXIuam9pbignJyk7ZWxzZSBpZiAoc3RhdGUuYnVmZmVyLmxlbmd0aCA9PT0gMSkgcmV0ID0gc3RhdGUuYnVmZmVyLmhlYWQuZGF0YTtlbHNlIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25jYXQoc3RhdGUubGVuZ3RoKTsKCSAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTsKCSAgfSBlbHNlIHsKCSAgICAvLyByZWFkIHBhcnQgb2YgbGlzdAoJICAgIHJldCA9IGZyb21MaXN0UGFydGlhbChuLCBzdGF0ZS5idWZmZXIsIHN0YXRlLmRlY29kZXIpOwoJICB9CgoJICByZXR1cm4gcmV0OwoJfQoKCS8vIEV4dHJhY3RzIG9ubHkgZW5vdWdoIGJ1ZmZlcmVkIGRhdGEgdG8gc2F0aXNmeSB0aGUgYW1vdW50IHJlcXVlc3RlZC4KCS8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nCgkvLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LgoJZnVuY3Rpb24gZnJvbUxpc3RQYXJ0aWFsKG4sIGxpc3QsIGhhc1N0cmluZ3MpIHsKCSAgdmFyIHJldDsKCSAgaWYgKG4gPCBsaXN0LmhlYWQuZGF0YS5sZW5ndGgpIHsKCSAgICAvLyBzbGljZSBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncwoJICAgIHJldCA9IGxpc3QuaGVhZC5kYXRhLnNsaWNlKDAsIG4pOwoJICAgIGxpc3QuaGVhZC5kYXRhID0gbGlzdC5oZWFkLmRhdGEuc2xpY2Uobik7CgkgIH0gZWxzZSBpZiAobiA9PT0gbGlzdC5oZWFkLmRhdGEubGVuZ3RoKSB7CgkgICAgLy8gZmlyc3QgY2h1bmsgaXMgYSBwZXJmZWN0IG1hdGNoCgkgICAgcmV0ID0gbGlzdC5zaGlmdCgpOwoJICB9IGVsc2UgewoJICAgIC8vIHJlc3VsdCBzcGFucyBtb3JlIHRoYW4gb25lIGJ1ZmZlcgoJICAgIHJldCA9IGhhc1N0cmluZ3MgPyBjb3B5RnJvbUJ1ZmZlclN0cmluZyhuLCBsaXN0KSA6IGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpOwoJICB9CgkgIHJldHVybiByZXQ7Cgl9CgoJLy8gQ29waWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBjaGFyYWN0ZXJzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YQoJLy8gY2h1bmtzLgoJLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmcKCS8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuCglmdW5jdGlvbiBjb3B5RnJvbUJ1ZmZlclN0cmluZyhuLCBsaXN0KSB7CgkgIHZhciBwID0gbGlzdC5oZWFkOwoJICB2YXIgYyA9IDE7CgkgIHZhciByZXQgPSBwLmRhdGE7CgkgIG4gLT0gcmV0Lmxlbmd0aDsKCSAgd2hpbGUgKHAgPSBwLm5leHQpIHsKCSAgICB2YXIgc3RyID0gcC5kYXRhOwoJICAgIHZhciBuYiA9IG4gPiBzdHIubGVuZ3RoID8gc3RyLmxlbmd0aCA6IG47CgkgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSByZXQgKz0gc3RyO2Vsc2UgcmV0ICs9IHN0ci5zbGljZSgwLCBuKTsKCSAgICBuIC09IG5iOwoJICAgIGlmIChuID09PSAwKSB7CgkgICAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHsKCSAgICAgICAgKytjOwoJICAgICAgICBpZiAocC5uZXh0KSBsaXN0LmhlYWQgPSBwLm5leHQ7ZWxzZSBsaXN0LmhlYWQgPSBsaXN0LnRhaWwgPSBudWxsOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgbGlzdC5oZWFkID0gcDsKCSAgICAgICAgcC5kYXRhID0gc3RyLnNsaWNlKG5iKTsKCSAgICAgIH0KCSAgICAgIGJyZWFrOwoJICAgIH0KCSAgICArK2M7CgkgIH0KCSAgbGlzdC5sZW5ndGggLT0gYzsKCSAgcmV0dXJuIHJldDsKCX0KCgkvLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YSBjaHVua3MuCgkvLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZwoJLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS4KCWZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpIHsKCSAgdmFyIHJldCA9IGJ1ZmZlclNoaW0uYWxsb2NVbnNhZmUobik7CgkgIHZhciBwID0gbGlzdC5oZWFkOwoJICB2YXIgYyA9IDE7CgkgIHAuZGF0YS5jb3B5KHJldCk7CgkgIG4gLT0gcC5kYXRhLmxlbmd0aDsKCSAgd2hpbGUgKHAgPSBwLm5leHQpIHsKCSAgICB2YXIgYnVmID0gcC5kYXRhOwoJICAgIHZhciBuYiA9IG4gPiBidWYubGVuZ3RoID8gYnVmLmxlbmd0aCA6IG47CgkgICAgYnVmLmNvcHkocmV0LCByZXQubGVuZ3RoIC0gbiwgMCwgbmIpOwoJICAgIG4gLT0gbmI7CgkgICAgaWYgKG4gPT09IDApIHsKCSAgICAgIGlmIChuYiA9PT0gYnVmLmxlbmd0aCkgewoJICAgICAgICArK2M7CgkgICAgICAgIGlmIChwLm5leHQpIGxpc3QuaGVhZCA9IHAubmV4dDtlbHNlIGxpc3QuaGVhZCA9IGxpc3QudGFpbCA9IG51bGw7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBsaXN0LmhlYWQgPSBwOwoJICAgICAgICBwLmRhdGEgPSBidWYuc2xpY2UobmIpOwoJICAgICAgfQoJICAgICAgYnJlYWs7CgkgICAgfQoJICAgICsrYzsKCSAgfQoJICBsaXN0Lmxlbmd0aCAtPSBjOwoJICByZXR1cm4gcmV0OwoJfQoKCWZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkgewoJICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgoJICAvLyBJZiB3ZSBnZXQgaGVyZSBiZWZvcmUgY29uc3VtaW5nIGFsbCB0aGUgYnl0ZXMsIHRoZW4gdGhhdCBpcyBhCgkgIC8vIGJ1ZyBpbiBub2RlLiAgU2hvdWxkIG5ldmVyIGhhcHBlbi4KCSAgaWYgKHN0YXRlLmxlbmd0aCA+IDApIHRocm93IG5ldyBFcnJvcignImVuZFJlYWRhYmxlKCkiIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7CgoJICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHsKCSAgICBzdGF0ZS5lbmRlZCA9IHRydWU7CgkgICAgcHJvY2Vzc05leHRUaWNrKGVuZFJlYWRhYmxlTlQsIHN0YXRlLCBzdHJlYW0pOwoJICB9Cgl9CgoJZnVuY3Rpb24gZW5kUmVhZGFibGVOVChzdGF0ZSwgc3RyZWFtKSB7CgkgIC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LgoJICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKSB7CgkgICAgc3RhdGUuZW5kRW1pdHRlZCA9IHRydWU7CgkgICAgc3RyZWFtLnJlYWRhYmxlID0gZmFsc2U7CgkgICAgc3RyZWFtLmVtaXQoJ2VuZCcpOwoJICB9Cgl9CgoJZnVuY3Rpb24gZm9yRWFjaCh4cywgZikgewoJICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJICAgIGYoeHNbaV0sIGkpOwoJICB9Cgl9CgoJZnVuY3Rpb24gaW5kZXhPZih4cywgeCkgewoJICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewoJICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7CgkgIH0KCSAgcmV0dXJuIC0xOwoJfQoJLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTIpKSkKCi8qKiovIH0sCi8qIDMwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCS8qIChpZ25vcmVkKSAqLwoKLyoqKi8gfSwKLyogMzEgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCXZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KS5CdWZmZXI7CgkvKjxyZXBsYWNlbWVudD4qLwoJdmFyIGJ1ZmZlclNoaW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTsKCS8qPC9yZXBsYWNlbWVudD4qLwoKCW1vZHVsZS5leHBvcnRzID0gQnVmZmVyTGlzdDsKCglmdW5jdGlvbiBCdWZmZXJMaXN0KCkgewoJICB0aGlzLmhlYWQgPSBudWxsOwoJICB0aGlzLnRhaWwgPSBudWxsOwoJICB0aGlzLmxlbmd0aCA9IDA7Cgl9CgoJQnVmZmVyTGlzdC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uICh2KSB7CgkgIHZhciBlbnRyeSA9IHsgZGF0YTogdiwgbmV4dDogbnVsbCB9OwoJICBpZiAodGhpcy5sZW5ndGggPiAwKSB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O2Vsc2UgdGhpcy5oZWFkID0gZW50cnk7CgkgIHRoaXMudGFpbCA9IGVudHJ5OwoJICArK3RoaXMubGVuZ3RoOwoJfTsKCglCdWZmZXJMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gKHYpIHsKCSAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiB0aGlzLmhlYWQgfTsKCSAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB0aGlzLnRhaWwgPSBlbnRyeTsKCSAgdGhpcy5oZWFkID0gZW50cnk7CgkgICsrdGhpcy5sZW5ndGg7Cgl9OwoKCUJ1ZmZlckxpc3QucHJvdG90eXBlLnNoaWZ0ID0gZnVuY3Rpb24gKCkgewoJICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjsKCSAgdmFyIHJldCA9IHRoaXMuaGVhZC5kYXRhOwoJICBpZiAodGhpcy5sZW5ndGggPT09IDEpIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7ZWxzZSB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV4dDsKCSAgLS10aGlzLmxlbmd0aDsKCSAgcmV0dXJuIHJldDsKCX07CgoJQnVmZmVyTGlzdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7CgkgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CgkgIHRoaXMubGVuZ3RoID0gMDsKCX07CgoJQnVmZmVyTGlzdC5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIChzKSB7CgkgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnOwoJICB2YXIgcCA9IHRoaXMuaGVhZDsKCSAgdmFyIHJldCA9ICcnICsgcC5kYXRhOwoJICB3aGlsZSAocCA9IHAubmV4dCkgewoJICAgIHJldCArPSBzICsgcC5kYXRhOwoJICB9cmV0dXJuIHJldDsKCX07CgoJQnVmZmVyTGlzdC5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKG4pIHsKCSAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gYnVmZmVyU2hpbS5hbGxvYygwKTsKCSAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5oZWFkLmRhdGE7CgkgIHZhciByZXQgPSBidWZmZXJTaGltLmFsbG9jVW5zYWZlKG4gPj4+IDApOwoJICB2YXIgcCA9IHRoaXMuaGVhZDsKCSAgdmFyIGkgPSAwOwoJICB3aGlsZSAocCkgewoJICAgIHAuZGF0YS5jb3B5KHJldCwgaSk7CgkgICAgaSArPSBwLmRhdGEubGVuZ3RoOwoJICAgIHAgPSBwLm5leHQ7CgkgIH0KCSAgcmV0dXJuIHJldDsKCX07CgovKioqLyB9LAovKiAzMiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KCS8vCgkvLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQoJLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQoJLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwoJLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAoJLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAoJLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCgkvLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKCS8vCgkvLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAoJLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgkvLwoJLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKCS8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKCS8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KCS8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAoJLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCgkvLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCgkvLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKCXZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KS5CdWZmZXI7CgoJdmFyIGlzQnVmZmVyRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZwoJICB8fCBmdW5jdGlvbihlbmNvZGluZykgewoJICAgICAgIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkgewoJICAgICAgICAgY2FzZSAnaGV4JzogY2FzZSAndXRmOCc6IGNhc2UgJ3V0Zi04JzogY2FzZSAnYXNjaWknOiBjYXNlICdiaW5hcnknOiBjYXNlICdiYXNlNjQnOiBjYXNlICd1Y3MyJzogY2FzZSAndWNzLTInOiBjYXNlICd1dGYxNmxlJzogY2FzZSAndXRmLTE2bGUnOiBjYXNlICdyYXcnOiByZXR1cm4gdHJ1ZTsKCSAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTsKCSAgICAgICB9CgkgICAgIH0KCgoJZnVuY3Rpb24gYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpIHsKCSAgaWYgKGVuY29kaW5nICYmICFpc0J1ZmZlckVuY29kaW5nKGVuY29kaW5nKSkgewoJICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTsKCSAgfQoJfQoKCS8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2YKCS8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZQoJLy8gY2hhcmFjdGVycy4gQ0VTVS04IGlzIGhhbmRsZWQgYXMgcGFydCBvZiB0aGUgVVRGLTggZW5jb2RpbmcuCgkvLwoJLy8gQFRPRE8gSGFuZGxpbmcgYWxsIGVuY29kaW5ncyBpbnNpZGUgYSBzaW5nbGUgb2JqZWN0IG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0CgkvLyB0byByZWFzb24gYWJvdXQgdGhpcyBjb2RlLCBzbyBpdCBzaG91bGQgYmUgc3BsaXQgdXAgaW4gdGhlIGZ1dHVyZS4KCS8vIEBUT0RPIFRoZXJlIHNob3VsZCBiZSBhIHV0Zjgtc3RyaWN0IGVuY29kaW5nIHRoYXQgcmVqZWN0cyBpbnZhbGlkIFVURi04IGNvZGUKCS8vIHBvaW50cyBhcyB1c2VkIGJ5IENFU1UtOC4KCXZhciBTdHJpbmdEZWNvZGVyID0gZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gZnVuY3Rpb24oZW5jb2RpbmcpIHsKCSAgdGhpcy5lbmNvZGluZyA9IChlbmNvZGluZyB8fCAndXRmOCcpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sICcnKTsKCSAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpOwoJICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHsKCSAgICBjYXNlICd1dGY4JzoKCSAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlcwoJICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMzsKCSAgICAgIGJyZWFrOwoJICAgIGNhc2UgJ3VjczInOgoJICAgIGNhc2UgJ3V0ZjE2bGUnOgoJICAgICAgLy8gVVRGLTE2IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAyLWJ5dGVzCgkgICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyOwoJICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7CgkgICAgICBicmVhazsKCSAgICBjYXNlICdiYXNlNjQnOgoJICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLgoJICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMzsKCSAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjsKCSAgICAgIGJyZWFrOwoJICAgIGRlZmF1bHQ6CgkgICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTsKCSAgICAgIHJldHVybjsKCSAgfQoKCSAgLy8gRW5vdWdoIHNwYWNlIHRvIHN0b3JlIGFsbCBieXRlcyBvZiBhIHNpbmdsZSBjaGFyYWN0ZXIuIFVURi04IG5lZWRzIDQKCSAgLy8gYnl0ZXMsIGJ1dCBDRVNVLTggbWF5IHJlcXVpcmUgdXAgdG8gNiAoMyBieXRlcyBwZXIgc3Vycm9nYXRlKS4KCSAgdGhpcy5jaGFyQnVmZmVyID0gbmV3IEJ1ZmZlcig2KTsKCSAgLy8gTnVtYmVyIG9mIGJ5dGVzIHJlY2VpdmVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLgoJICB0aGlzLmNoYXJSZWNlaXZlZCA9IDA7CgkgIC8vIE51bWJlciBvZiBieXRlcyBleHBlY3RlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci4KCSAgdGhpcy5jaGFyTGVuZ3RoID0gMDsKCX07CgoKCS8vIHdyaXRlIGRlY29kZXMgdGhlIGdpdmVuIGJ1ZmZlciBhbmQgcmV0dXJucyBpdCBhcyBKUyBzdHJpbmcgdGhhdCBpcwoJLy8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsCgkvLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZQoJLy8gcmV0dXJuZWQgd2hlbiBjYWxsaW5nIHdyaXRlIGFnYWluIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcy4KCS8vCgkvLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZwoJLy8gY3VycmVudGx5IHdvcmtzLCBidXQgY29udmVydGluZyBhIFN0cmluZyB0byBhIEJ1ZmZlciAodmlhIGBuZXcgQnVmZmVyYCwgb3IKCS8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlCgkvLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLgoJU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHsKCSAgdmFyIGNoYXJTdHIgPSAnJzsKCSAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXIKCSAgd2hpbGUgKHRoaXMuY2hhckxlbmd0aCkgewoJICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXIKCSAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID8KCSAgICAgICAgdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQgOgoJICAgICAgICBidWZmZXIubGVuZ3RoOwoKCSAgICAvLyBhZGQgdGhlIG5ldyBieXRlcyB0byB0aGUgY2hhciBidWZmZXIKCSAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHRoaXMuY2hhclJlY2VpdmVkLCAwLCBhdmFpbGFibGUpOwoJICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IGF2YWlsYWJsZTsKCgkgICAgaWYgKHRoaXMuY2hhclJlY2VpdmVkIDwgdGhpcy5jaGFyTGVuZ3RoKSB7CgkgICAgICAvLyBzdGlsbCBub3QgZW5vdWdoIGNoYXJzIGluIHRoaXMgYnVmZmVyPyB3YWl0IGZvciBtb3JlIC4uLgoJICAgICAgcmV0dXJuICcnOwoJICAgIH0KCgkgICAgLy8gcmVtb3ZlIGJ5dGVzIGJlbG9uZ2luZyB0byB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZnJvbSB0aGUgYnVmZmVyCgkgICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7CgoJICAgIC8vIGdldCB0aGUgY2hhcmFjdGVyIHRoYXQgd2FzIHNwbGl0CgkgICAgY2hhclN0ciA9IHRoaXMuY2hhckJ1ZmZlci5zbGljZSgwLCB0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwoKCSAgICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyCgkgICAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGNoYXJTdHIubGVuZ3RoIC0gMSk7CgkgICAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHsKCSAgICAgIHRoaXMuY2hhckxlbmd0aCArPSB0aGlzLnN1cnJvZ2F0ZVNpemU7CgkgICAgICBjaGFyU3RyID0gJyc7CgkgICAgICBjb250aW51ZTsKCSAgICB9CgkgICAgdGhpcy5jaGFyUmVjZWl2ZWQgPSB0aGlzLmNoYXJMZW5ndGggPSAwOwoKCSAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSBieXRlcyBpbiB0aGlzIGJ1ZmZlciwganVzdCBlbWl0IG91ciBjaGFyCgkgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHsKCSAgICAgIHJldHVybiBjaGFyU3RyOwoJICAgIH0KCSAgICBicmVhazsKCSAgfQoKCSAgLy8gZGV0ZXJtaW5lIGFuZCBzZXQgY2hhckxlbmd0aCAvIGNoYXJSZWNlaXZlZAoJICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcik7CgoJICB2YXIgZW5kID0gYnVmZmVyLmxlbmd0aDsKCSAgaWYgKHRoaXMuY2hhckxlbmd0aCkgewoJICAgIC8vIGJ1ZmZlciB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIgYnl0ZXMgd2UgZ290CgkgICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCBidWZmZXIubGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQsIGVuZCk7CgkgICAgZW5kIC09IHRoaXMuY2hhclJlY2VpdmVkOwoJICB9CgoJICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpOwoKCSAgdmFyIGVuZCA9IGNoYXJTdHIubGVuZ3RoIC0gMTsKCSAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGVuZCk7CgkgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIKCSAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHsKCSAgICB2YXIgc2l6ZSA9IHRoaXMuc3Vycm9nYXRlU2l6ZTsKCSAgICB0aGlzLmNoYXJMZW5ndGggKz0gc2l6ZTsKCSAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBzaXplOwoJICAgIHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgc2l6ZSwgMCwgc2l6ZSk7CgkgICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCAwLCBzaXplKTsKCSAgICByZXR1cm4gY2hhclN0ci5zdWJzdHJpbmcoMCwgZW5kKTsKCSAgfQoKCSAgLy8gb3IganVzdCBlbWl0IHRoZSBjaGFyU3RyCgkgIHJldHVybiBjaGFyU3RyOwoJfTsKCgkvLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0CgkvLyB0aGUgZW5kIG9mIHRoZSBnaXZlbiBidWZmZXIuIElmIHNvLCBpdCBzZXRzIHRoaXMuY2hhckxlbmd0aCB0byB0aGUgYnl0ZQoJLy8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzCgkvLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLgoJU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBmdW5jdGlvbihidWZmZXIpIHsKCSAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlcgoJICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7CgoJICAvLyBGaWd1cmUgb3V0IGlmIG9uZSBvZiB0aGUgbGFzdCBpIGJ5dGVzIG9mIG91ciBidWZmZXIgYW5ub3VuY2VzIGFuCgkgIC8vIGluY29tcGxldGUgY2hhci4KCSAgZm9yICg7IGkgPiAwOyBpLS0pIHsKCSAgICB2YXIgYyA9IGJ1ZmZlcltidWZmZXIubGVuZ3RoIC0gaV07CgoJICAgIC8vIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi04I0Rlc2NyaXB0aW9uCgoJICAgIC8vIDExMFhYWFhYCgkgICAgaWYgKGkgPT0gMSAmJiBjID4+IDUgPT0gMHgwNikgewoJICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjsKCSAgICAgIGJyZWFrOwoJICAgIH0KCgkgICAgLy8gMTExMFhYWFgKCSAgICBpZiAoaSA8PSAyICYmIGMgPj4gNCA9PSAweDBFKSB7CgkgICAgICB0aGlzLmNoYXJMZW5ndGggPSAzOwoJICAgICAgYnJlYWs7CgkgICAgfQoKCSAgICAvLyAxMTExMFhYWAoJICAgIGlmIChpIDw9IDMgJiYgYyA+PiAzID09IDB4MUUpIHsKCSAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDQ7CgkgICAgICBicmVhazsKCSAgICB9CgkgIH0KCSAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBpOwoJfTsKCglTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHsKCSAgdmFyIHJlcyA9ICcnOwoJICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpCgkgICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpOwoKCSAgaWYgKHRoaXMuY2hhclJlY2VpdmVkKSB7CgkgICAgdmFyIGNyID0gdGhpcy5jaGFyUmVjZWl2ZWQ7CgkgICAgdmFyIGJ1ZiA9IHRoaXMuY2hhckJ1ZmZlcjsKCSAgICB2YXIgZW5jID0gdGhpcy5lbmNvZGluZzsKCSAgICByZXMgKz0gYnVmLnNsaWNlKDAsIGNyKS50b1N0cmluZyhlbmMpOwoJICB9CgoJICByZXR1cm4gcmVzOwoJfTsKCglmdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikgewoJICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwoJfQoKCWZ1bmN0aW9uIHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7CgkgIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDI7CgkgIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMiA6IDA7Cgl9CgoJZnVuY3Rpb24gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7CgkgIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDM7CgkgIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMyA6IDA7Cgl9CgoKLyoqKi8gfSwKLyogMzMgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KQoKCi8qKiovIH0sCi8qIDM0ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCW1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSkKCgovKioqLyB9LAovKiAzNSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvCgkvLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhICJmaWx0ZXIiLAoJLy8gYnV0IHRoYXQncyBub3QgYSBncmVhdCBuYW1lIGZvciBpdCwgc2luY2UgdGhhdCBpbXBsaWVzIGEgdGhpbmcgd2hlcmUKCS8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGQKCS8vIGJlIGEgdmFsaWQgZXhhbXBsZSBvZiBhIHRyYW5zZm9ybSwgb2YgY291cnNlLikKCS8vCgkvLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhCgkvLyBuZWNlc3NhcmlseSBzeW1tZXRyaWMgb3Igc3luY2hyb25vdXMgdHJhbnNmb3JtYXRpb24uICBGb3IgZXhhbXBsZSwKCS8vIGEgemxpYiBzdHJlYW0gbWlnaHQgdGFrZSBtdWx0aXBsZSBwbGFpbi10ZXh0IHdyaXRlcygpLCBhbmQgdGhlbgoJLy8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLgoJLy8KCS8vIEhlcmUncyBob3cgdGhpcyB3b3JrczoKCS8vCgkvLyBUaGUgVHJhbnNmb3JtIHN0cmVhbSBoYXMgYWxsIHRoZSBhc3BlY3RzIG9mIHRoZSByZWFkYWJsZSBhbmQgd3JpdGFibGUKCS8vIHN0cmVhbSBjbGFzc2VzLiAgV2hlbiB5b3Ugd3JpdGUoY2h1bmspLCB0aGF0IGNhbGxzIF93cml0ZShjaHVuayxjYikKCS8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXMKCS8vIGJ1ZmZlcmVkIHVwLiAgV2hlbiB5b3UgY2FsbCByZWFkKCksIHRoYXQgY2FsbHMgX3JlYWQobikgdW50aWwKCS8vIHRoZXJlJ3MgZW5vdWdoIHBlbmRpbmcgcmVhZGFibGUgZGF0YSBidWZmZXJlZCB1cC4KCS8vCgkvLyBJbiBhIHRyYW5zZm9ybSBzdHJlYW0sIHRoZSB3cml0dGVuIGRhdGEgaXMgcGxhY2VkIGluIGEgYnVmZmVyLiAgV2hlbgoJLy8gX3JlYWQobikgaXMgY2FsbGVkLCBpdCB0cmFuc2Zvcm1zIHRoZSBxdWV1ZWQgdXAgZGF0YSwgY2FsbGluZyB0aGUKCS8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZQoJLy8gd3JpdHRlbiBjaHVuayB3b3VsZCByZXN1bHQgaW4gbXVsdGlwbGUgb3V0cHV0IGNodW5rcywgdGhlbiB0aGUgZmlyc3QKCS8vIG91dHB1dHRlZCBiaXQgY2FsbHMgdGhlIHJlYWRjYiwgYW5kIHN1YnNlcXVlbnQgY2h1bmtzIGp1c3QgZ28gaW50bwoJLy8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LgoJLy8KCS8vIFRoaXMgd2F5LCBiYWNrLXByZXNzdXJlIGlzIGFjdHVhbGx5IGRldGVybWluZWQgYnkgdGhlIHJlYWRpbmcgc2lkZSwKCS8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsCgkvLyBhIHBhdGhvbG9naWNhbCBpbmZsYXRlIHR5cGUgb2YgdHJhbnNmb3JtIGNhbiBjYXVzZSBleGNlc3NpdmUgYnVmZmVyaW5nCgkvLyBoZXJlLiAgRm9yIGV4YW1wbGUsIGltYWdpbmUgYSBzdHJlYW0gd2hlcmUgZXZlcnkgYnl0ZSBvZiBpbnB1dCBpcwoJLy8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueQoJLy8gYnl0ZXMgb2Ygb3V0cHV0LiAgV3JpdGluZyB0aGUgNCBieXRlcyB7ZmYsZmYsZmYsZmZ9IHdvdWxkIHJlc3VsdCBpbgoJLy8gMWtiIG9mIGRhdGEgYmVpbmcgb3V0cHV0LiAgSW4gdGhpcyBjYXNlLCB5b3UgY291bGQgd3JpdGUgYSB2ZXJ5IHNtYWxsCgkvLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluCgkvLyBzdWNoIGEgcGF0aG9sb2dpY2FsIGluZmxhdGluZyBtZWNoYW5pc20sIHRoZXJlJ2QgYmUgbm8gd2F5IHRvIHRlbGwKCS8vIHRoZSBzeXN0ZW0gdG8gc3RvcCBkb2luZyB0aGUgdHJhbnNmb3JtLiAgQSBzaW5nbGUgNE1CIHdyaXRlIGNvdWxkCgkvLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LgoJLy8KCS8vIEhvd2V2ZXIsIGV2ZW4gaW4gc3VjaCBhIHBhdGhvbG9naWNhbCBjYXNlLCBvbmx5IGEgc2luZ2xlIHdyaXR0ZW4gY2h1bmsKCS8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWwKCS8vIHRoZSByZXN1bHRzIG9mIHRoZSBwcmV2aW91cyB0cmFuc2Zvcm1lZCBjaHVuayB3ZXJlIGNvbnN1bWVkLgoKCSd1c2Ugc3RyaWN0JzsKCgltb2R1bGUuZXhwb3J0cyA9IFRyYW5zZm9ybTsKCgl2YXIgRHVwbGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7CgoJLyo8cmVwbGFjZW1lbnQ+Ki8KCXZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Cgl1dGlsLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7CgkvKjwvcmVwbGFjZW1lbnQ+Ki8KCgl1dGlsLmluaGVyaXRzKFRyYW5zZm9ybSwgRHVwbGV4KTsKCglmdW5jdGlvbiBUcmFuc2Zvcm1TdGF0ZShzdHJlYW0pIHsKCSAgdGhpcy5hZnRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIChlciwgZGF0YSkgewoJICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTsKCSAgfTsKCgkgIHRoaXMubmVlZFRyYW5zZm9ybSA9IGZhbHNlOwoJICB0aGlzLnRyYW5zZm9ybWluZyA9IGZhbHNlOwoJICB0aGlzLndyaXRlY2IgPSBudWxsOwoJICB0aGlzLndyaXRlY2h1bmsgPSBudWxsOwoJICB0aGlzLndyaXRlZW5jb2RpbmcgPSBudWxsOwoJfQoKCWZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpIHsKCSAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTsKCSAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7CgoJICB2YXIgY2IgPSB0cy53cml0ZWNiOwoKCSAgaWYgKCFjYikgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3MnKSk7CgoJICB0cy53cml0ZWNodW5rID0gbnVsbDsKCSAgdHMud3JpdGVjYiA9IG51bGw7CgoJICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB1bmRlZmluZWQpIHN0cmVhbS5wdXNoKGRhdGEpOwoKCSAgY2IoZXIpOwoKCSAgdmFyIHJzID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwoJICBycy5yZWFkaW5nID0gZmFsc2U7CgkgIGlmIChycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykgewoJICAgIHN0cmVhbS5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTsKCSAgfQoJfQoKCWZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7CgkgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0pKSByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTsKCgkgIER1cGxleC5jYWxsKHRoaXMsIG9wdGlvbnMpOwoKCSAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSBuZXcgVHJhbnNmb3JtU3RhdGUodGhpcyk7CgoJICB2YXIgc3RyZWFtID0gdGhpczsKCgkgIC8vIHN0YXJ0IG91dCBhc2tpbmcgZm9yIGEgcmVhZGFibGUgZXZlbnQgb25jZSBkYXRhIGlzIHRyYW5zZm9ybWVkLgoJICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CgoJICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3MKCSAgLy8gdGhhdCBSZWFkYWJsZSB3YW50cyBiZWZvcmUgdGhlIGZpcnN0IF9yZWFkIGNhbGwsIHNvIHVuc2V0IHRoZQoJICAvLyBzeW5jIGd1YXJkIGZsYWcuCgkgIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlOwoKCSAgaWYgKG9wdGlvbnMpIHsKCSAgICBpZiAodHlwZW9mIG9wdGlvbnMudHJhbnNmb3JtID09PSAnZnVuY3Rpb24nKSB0aGlzLl90cmFuc2Zvcm0gPSBvcHRpb25zLnRyYW5zZm9ybTsKCgkgICAgaWYgKHR5cGVvZiBvcHRpb25zLmZsdXNoID09PSAnZnVuY3Rpb24nKSB0aGlzLl9mbHVzaCA9IG9wdGlvbnMuZmx1c2g7CgkgIH0KCgkgIC8vIFdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy4KCSAgdGhpcy5vbmNlKCdwcmVmaW5pc2gnLCBmdW5jdGlvbiAoKSB7CgkgICAgaWYgKHR5cGVvZiB0aGlzLl9mbHVzaCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmx1c2goZnVuY3Rpb24gKGVyLCBkYXRhKSB7CgkgICAgICBkb25lKHN0cmVhbSwgZXIsIGRhdGEpOwoJICAgIH0pO2Vsc2UgZG9uZShzdHJlYW0pOwoJICB9KTsKCX0KCglUcmFuc2Zvcm0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nKSB7CgkgIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTsKCSAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7Cgl9OwoKCS8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIQoJLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgoJLy8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay4KCS8vCgkvLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXQKCS8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuCgkvLwoJLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3MKCS8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3UKCS8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuCglUcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICB0aHJvdyBuZXcgRXJyb3IoJ190cmFuc2Zvcm0oKSBpcyBub3QgaW1wbGVtZW50ZWQnKTsKCX07CgoJVHJhbnNmb3JtLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewoJICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTsKCSAgdHMud3JpdGVjYiA9IGNiOwoJICB0cy53cml0ZWNodW5rID0gY2h1bms7CgkgIHRzLndyaXRlZW5jb2RpbmcgPSBlbmNvZGluZzsKCSAgaWYgKCF0cy50cmFuc2Zvcm1pbmcpIHsKCSAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoJICAgIGlmICh0cy5uZWVkVHJhbnNmb3JtIHx8IHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspOwoJICB9Cgl9OwoKCS8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuCgkvLyBfdHJhbnNmb3JtIGRvZXMgYWxsIHRoZSB3b3JrLgoJLy8gVGhhdCB3ZSBnb3QgaGVyZSBtZWFucyB0aGF0IHRoZSByZWFkYWJsZSBzaWRlIHdhbnRzIG1vcmUgZGF0YS4KCVRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikgewoJICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTsKCgkgIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykgewoJICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7CgkgICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTsKCSAgfSBlbHNlIHsKCSAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluCgkgICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuCgkgICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7CgkgIH0KCX07CgoJZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyLCBkYXRhKSB7CgkgIGlmIChlcikgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTsKCgkgIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZCkgc3RyZWFtLnB1c2goZGF0YSk7CgoJICAvLyBpZiB0aGVyZSdzIG5vdGhpbmcgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhlbiB0aGF0IG1lYW5zCgkgIC8vIHRoYXQgbm90aGluZyBtb3JlIHdpbGwgZXZlciBiZSBwcm92aWRlZAoJICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CgkgIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7CgoJICBpZiAod3MubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpOwoKCSAgaWYgKHRzLnRyYW5zZm9ybWluZykgdGhyb3cgbmV3IEVycm9yKCdDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nJyk7CgoJICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7Cgl9CgovKioqLyB9LAovKiAzNiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgltb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpCgoKLyoqKi8gfSwKLyogMzcgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uCgkvLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS4KCS8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuCgoJJ3VzZSBzdHJpY3QnOwoKCW1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7CgoJdmFyIFRyYW5zZm9ybSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwoKCS8qPHJlcGxhY2VtZW50PiovCgl2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwoJdXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpOwoJLyo8L3JlcGxhY2VtZW50PiovCgoJdXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTsKCglmdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7CgkgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7CgoJICBUcmFuc2Zvcm0uY2FsbCh0aGlzLCBvcHRpb25zKTsKCX0KCglQYXNzVGhyb3VnaC5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CgkgIGNiKG51bGwsIGNodW5rKTsKCX07CgovKioqLyB9LAovKiAzOCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikuQnVmZmVyCgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYnVmKSB7CgkJLy8gSWYgdGhlIGJ1ZmZlciBpcyBiYWNrZWQgYnkgYSBVaW50OEFycmF5LCBhIGZhc3RlciB2ZXJzaW9uIHdpbGwgd29yawoJCWlmIChidWYgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7CgkJCS8vIElmIHRoZSBidWZmZXIgaXNuJ3QgYSBzdWJhcnJheSwgcmV0dXJuIHRoZSB1bmRlcmx5aW5nIEFycmF5QnVmZmVyCgkJCWlmIChidWYuYnl0ZU9mZnNldCA9PT0gMCAmJiBidWYuYnl0ZUxlbmd0aCA9PT0gYnVmLmJ1ZmZlci5ieXRlTGVuZ3RoKSB7CgkJCQlyZXR1cm4gYnVmLmJ1ZmZlcgoJCQl9IGVsc2UgaWYgKHR5cGVvZiBidWYuYnVmZmVyLnNsaWNlID09PSAnZnVuY3Rpb24nKSB7CgkJCQkvLyBPdGhlcndpc2Ugd2UgbmVlZCB0byBnZXQgYSBwcm9wZXIgY29weQoJCQkJcmV0dXJuIGJ1Zi5idWZmZXIuc2xpY2UoYnVmLmJ5dGVPZmZzZXQsIGJ1Zi5ieXRlT2Zmc2V0ICsgYnVmLmJ5dGVMZW5ndGgpCgkJCX0KCQl9CgoJCWlmIChCdWZmZXIuaXNCdWZmZXIoYnVmKSkgewoJCQkvLyBUaGlzIGlzIHRoZSBzbG93IHZlcnNpb24gdGhhdCB3aWxsIHdvcmsgd2l0aCBhbnkgQnVmZmVyCgkJCS8vIGltcGxlbWVudGF0aW9uIChldmVuIGluIG9sZCBicm93c2VycykKCQkJdmFyIGFycmF5Q29weSA9IG5ldyBVaW50OEFycmF5KGJ1Zi5sZW5ndGgpCgkJCXZhciBsZW4gPSBidWYubGVuZ3RoCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKCQkJCWFycmF5Q29weVtpXSA9IGJ1ZltpXQoJCQl9CgkJCXJldHVybiBhcnJheUNvcHkuYnVmZmVyCgkJfSBlbHNlIHsKCQkJdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKCQl9Cgl9CgoKLyoqKi8gfSwKLyogMzkgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSBleHRlbmQKCgl2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKCWZ1bmN0aW9uIGV4dGVuZCgpIHsKCSAgICB2YXIgdGFyZ2V0ID0ge30KCgkgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXQoKCSAgICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewoJICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CgkgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfQoKCSAgICByZXR1cm4gdGFyZ2V0Cgl9CgoKLyoqKi8gfSwKLyogNDAgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7CgkgICIxMDAiOiAiQ29udGludWUiLAoJICAiMTAxIjogIlN3aXRjaGluZyBQcm90b2NvbHMiLAoJICAiMTAyIjogIlByb2Nlc3NpbmciLAoJICAiMjAwIjogIk9LIiwKCSAgIjIwMSI6ICJDcmVhdGVkIiwKCSAgIjIwMiI6ICJBY2NlcHRlZCIsCgkgICIyMDMiOiAiTm9uLUF1dGhvcml0YXRpdmUgSW5mb3JtYXRpb24iLAoJICAiMjA0IjogIk5vIENvbnRlbnQiLAoJICAiMjA1IjogIlJlc2V0IENvbnRlbnQiLAoJICAiMjA2IjogIlBhcnRpYWwgQ29udGVudCIsCgkgICIyMDciOiAiTXVsdGktU3RhdHVzIiwKCSAgIjIwOCI6ICJBbHJlYWR5IFJlcG9ydGVkIiwKCSAgIjIyNiI6ICJJTSBVc2VkIiwKCSAgIjMwMCI6ICJNdWx0aXBsZSBDaG9pY2VzIiwKCSAgIjMwMSI6ICJNb3ZlZCBQZXJtYW5lbnRseSIsCgkgICIzMDIiOiAiRm91bmQiLAoJICAiMzAzIjogIlNlZSBPdGhlciIsCgkgICIzMDQiOiAiTm90IE1vZGlmaWVkIiwKCSAgIjMwNSI6ICJVc2UgUHJveHkiLAoJICAiMzA3IjogIlRlbXBvcmFyeSBSZWRpcmVjdCIsCgkgICIzMDgiOiAiUGVybWFuZW50IFJlZGlyZWN0IiwKCSAgIjQwMCI6ICJCYWQgUmVxdWVzdCIsCgkgICI0MDEiOiAiVW5hdXRob3JpemVkIiwKCSAgIjQwMiI6ICJQYXltZW50IFJlcXVpcmVkIiwKCSAgIjQwMyI6ICJGb3JiaWRkZW4iLAoJICAiNDA0IjogIk5vdCBGb3VuZCIsCgkgICI0MDUiOiAiTWV0aG9kIE5vdCBBbGxvd2VkIiwKCSAgIjQwNiI6ICJOb3QgQWNjZXB0YWJsZSIsCgkgICI0MDciOiAiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQiLAoJICAiNDA4IjogIlJlcXVlc3QgVGltZW91dCIsCgkgICI0MDkiOiAiQ29uZmxpY3QiLAoJICAiNDEwIjogIkdvbmUiLAoJICAiNDExIjogIkxlbmd0aCBSZXF1aXJlZCIsCgkgICI0MTIiOiAiUHJlY29uZGl0aW9uIEZhaWxlZCIsCgkgICI0MTMiOiAiUGF5bG9hZCBUb28gTGFyZ2UiLAoJICAiNDE0IjogIlVSSSBUb28gTG9uZyIsCgkgICI0MTUiOiAiVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZSIsCgkgICI0MTYiOiAiUmFuZ2UgTm90IFNhdGlzZmlhYmxlIiwKCSAgIjQxNyI6ICJFeHBlY3RhdGlvbiBGYWlsZWQiLAoJICAiNDE4IjogIkknbSBhIHRlYXBvdCIsCgkgICI0MjEiOiAiTWlzZGlyZWN0ZWQgUmVxdWVzdCIsCgkgICI0MjIiOiAiVW5wcm9jZXNzYWJsZSBFbnRpdHkiLAoJICAiNDIzIjogIkxvY2tlZCIsCgkgICI0MjQiOiAiRmFpbGVkIERlcGVuZGVuY3kiLAoJICAiNDI1IjogIlVub3JkZXJlZCBDb2xsZWN0aW9uIiwKCSAgIjQyNiI6ICJVcGdyYWRlIFJlcXVpcmVkIiwKCSAgIjQyOCI6ICJQcmVjb25kaXRpb24gUmVxdWlyZWQiLAoJICAiNDI5IjogIlRvbyBNYW55IFJlcXVlc3RzIiwKCSAgIjQzMSI6ICJSZXF1ZXN0IEhlYWRlciBGaWVsZHMgVG9vIExhcmdlIiwKCSAgIjQ1MSI6ICJVbmF2YWlsYWJsZSBGb3IgTGVnYWwgUmVhc29ucyIsCgkgICI1MDAiOiAiSW50ZXJuYWwgU2VydmVyIEVycm9yIiwKCSAgIjUwMSI6ICJOb3QgSW1wbGVtZW50ZWQiLAoJICAiNTAyIjogIkJhZCBHYXRld2F5IiwKCSAgIjUwMyI6ICJTZXJ2aWNlIFVuYXZhaWxhYmxlIiwKCSAgIjUwNCI6ICJHYXRld2F5IFRpbWVvdXQiLAoJICAiNTA1IjogIkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkIiwKCSAgIjUwNiI6ICJWYXJpYW50IEFsc28gTmVnb3RpYXRlcyIsCgkgICI1MDciOiAiSW5zdWZmaWNpZW50IFN0b3JhZ2UiLAoJICAiNTA4IjogIkxvb3AgRGV0ZWN0ZWQiLAoJICAiNTA5IjogIkJhbmR3aWR0aCBMaW1pdCBFeGNlZWRlZCIsCgkgICI1MTAiOiAiTm90IEV4dGVuZGVkIiwKCSAgIjUxMSI6ICJOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkIgoJfQoKCi8qKiovIH0sCi8qIDQxICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgoJLy8KCS8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCgkvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCgkvLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCgkvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCgkvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0CgkvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKCS8vIGZvbGxvd2luZyBjb25kaXRpb25zOgoJLy8KCS8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCgkvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCS8vCgkvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwoJLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgoJLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgoJLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCgkvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKCS8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKCS8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgoJJ3VzZSBzdHJpY3QnOwoKCXZhciBwdW55Y29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpOwoJdmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTsKCglleHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7CglleHBvcnRzLnJlc29sdmUgPSB1cmxSZXNvbHZlOwoJZXhwb3J0cy5yZXNvbHZlT2JqZWN0ID0gdXJsUmVzb2x2ZU9iamVjdDsKCWV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0OwoKCWV4cG9ydHMuVXJsID0gVXJsOwoKCWZ1bmN0aW9uIFVybCgpIHsKCSAgdGhpcy5wcm90b2NvbCA9IG51bGw7CgkgIHRoaXMuc2xhc2hlcyA9IG51bGw7CgkgIHRoaXMuYXV0aCA9IG51bGw7CgkgIHRoaXMuaG9zdCA9IG51bGw7CgkgIHRoaXMucG9ydCA9IG51bGw7CgkgIHRoaXMuaG9zdG5hbWUgPSBudWxsOwoJICB0aGlzLmhhc2ggPSBudWxsOwoJICB0aGlzLnNlYXJjaCA9IG51bGw7CgkgIHRoaXMucXVlcnkgPSBudWxsOwoJICB0aGlzLnBhdGhuYW1lID0gbnVsbDsKCSAgdGhpcy5wYXRoID0gbnVsbDsKCSAgdGhpcy5ocmVmID0gbnVsbDsKCX0KCgkvLyBSZWZlcmVuY2U6IFJGQyAzOTg2LCBSRkMgMTgwOCwgUkZDIDIzOTYKCgkvLyBkZWZpbmUgdGhlc2UgaGVyZSBzbyBhdCBsZWFzdCB0aGV5IG9ubHkgaGF2ZSB0byBiZQoJLy8gY29tcGlsZWQgb25jZSBvbiB0aGUgZmlyc3QgbW9kdWxlIGxvYWQuCgl2YXIgcHJvdG9jb2xQYXR0ZXJuID0gL14oW2EtejAtOS4rLV0rOikvaSwKCSAgICBwb3J0UGF0dGVybiA9IC86WzAtOV0qJC8sCgoJICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgYSBzaW1wbGUgcGF0aCBVUkwKCSAgICBzaW1wbGVQYXRoUGF0dGVybiA9IC9eKFwvXC8/KD8hXC8pW15cP1xzXSopKFw/W15cc10qKT8kLywKCgkgICAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgcmVzZXJ2ZWQgZm9yIGRlbGltaXRpbmcgVVJMcy4KCSAgICAvLyBXZSBhY3R1YWxseSBqdXN0IGF1dG8tZXNjYXBlIHRoZXNlLgoJICAgIGRlbGltcyA9IFsnPCcsICc+JywgJyInLCAnYCcsICcgJywgJ1xyJywgJ1xuJywgJ1x0J10sCgoJICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIG5vdCBhbGxvd2VkIGZvciB2YXJpb3VzIHJlYXNvbnMuCgkgICAgdW53aXNlID0gWyd7JywgJ30nLCAnfCcsICdcXCcsICdeJywgJ2AnXS5jb25jYXQoZGVsaW1zKSwKCgkgICAgLy8gQWxsb3dlZCBieSBSRkNzLCBidXQgY2F1c2Ugb2YgWFNTIGF0dGFja3MuICBBbHdheXMgZXNjYXBlIHRoZXNlLgoJICAgIGF1dG9Fc2NhcGUgPSBbJ1wnJ10uY29uY2F0KHVud2lzZSksCgkgICAgLy8gQ2hhcmFjdGVycyB0aGF0IGFyZSBuZXZlciBldmVyIGFsbG93ZWQgaW4gYSBob3N0bmFtZS4KCSAgICAvLyBOb3RlIHRoYXQgYW55IGludmFsaWQgY2hhcnMgYXJlIGFsc28gaGFuZGxlZCwgYnV0IHRoZXNlCgkgICAgLy8gYXJlIHRoZSBvbmVzIHRoYXQgYXJlICpleHBlY3RlZCogdG8gYmUgc2Vlbiwgc28gd2UgZmFzdC1wYXRoCgkgICAgLy8gdGhlbS4KCSAgICBub25Ib3N0Q2hhcnMgPSBbJyUnLCAnLycsICc/JywgJzsnLCAnIyddLmNvbmNhdChhdXRvRXNjYXBlKSwKCSAgICBob3N0RW5kaW5nQ2hhcnMgPSBbJy8nLCAnPycsICcjJ10sCgkgICAgaG9zdG5hbWVNYXhMZW4gPSAyNTUsCgkgICAgaG9zdG5hbWVQYXJ0UGF0dGVybiA9IC9eWythLXowLTlBLVpfLV17MCw2M30kLywKCSAgICBob3N0bmFtZVBhcnRTdGFydCA9IC9eKFsrYS16MC05QS1aXy1dezAsNjN9KSguKikkLywKCSAgICAvLyBwcm90b2NvbHMgdGhhdCBjYW4gYWxsb3cgInVuc2FmZSIgYW5kICJ1bndpc2UiIGNoYXJzLgoJICAgIHVuc2FmZVByb3RvY29sID0gewoJICAgICAgJ2phdmFzY3JpcHQnOiB0cnVlLAoJICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZQoJICAgIH0sCgkgICAgLy8gcHJvdG9jb2xzIHRoYXQgbmV2ZXIgaGF2ZSBhIGhvc3RuYW1lLgoJICAgIGhvc3RsZXNzUHJvdG9jb2wgPSB7CgkgICAgICAnamF2YXNjcmlwdCc6IHRydWUsCgkgICAgICAnamF2YXNjcmlwdDonOiB0cnVlCgkgICAgfSwKCSAgICAvLyBwcm90b2NvbHMgdGhhdCBhbHdheXMgY29udGFpbiBhIC8vIGJpdC4KCSAgICBzbGFzaGVkUHJvdG9jb2wgPSB7CgkgICAgICAnaHR0cCc6IHRydWUsCgkgICAgICAnaHR0cHMnOiB0cnVlLAoJICAgICAgJ2Z0cCc6IHRydWUsCgkgICAgICAnZ29waGVyJzogdHJ1ZSwKCSAgICAgICdmaWxlJzogdHJ1ZSwKCSAgICAgICdodHRwOic6IHRydWUsCgkgICAgICAnaHR0cHM6JzogdHJ1ZSwKCSAgICAgICdmdHA6JzogdHJ1ZSwKCSAgICAgICdnb3BoZXI6JzogdHJ1ZSwKCSAgICAgICdmaWxlOic6IHRydWUKCSAgICB9LAoJICAgIHF1ZXJ5c3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7CgoJZnVuY3Rpb24gdXJsUGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkgewoJICBpZiAodXJsICYmIHV0aWwuaXNPYmplY3QodXJsKSAmJiB1cmwgaW5zdGFuY2VvZiBVcmwpIHJldHVybiB1cmw7CgoJICB2YXIgdSA9IG5ldyBVcmw7CgkgIHUucGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCk7CgkgIHJldHVybiB1OwoJfQoKCVVybC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbih1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KSB7CgkgIGlmICghdXRpbC5pc1N0cmluZyh1cmwpKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCAiICsgdHlwZW9mIHVybCk7CgkgIH0KCgkgIC8vIENvcHkgY2hyb21lLCBJRSwgb3BlcmEgYmFja3NsYXNoLWhhbmRsaW5nIGJlaGF2aW9yLgoJICAvLyBCYWNrIHNsYXNoZXMgYmVmb3JlIHRoZSBxdWVyeSBzdHJpbmcgZ2V0IGNvbnZlcnRlZCB0byBmb3J3YXJkIHNsYXNoZXMKCSAgLy8gU2VlOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjU5MTYKCSAgdmFyIHF1ZXJ5SW5kZXggPSB1cmwuaW5kZXhPZignPycpLAoJICAgICAgc3BsaXR0ZXIgPQoJICAgICAgICAgIChxdWVyeUluZGV4ICE9PSAtMSAmJiBxdWVyeUluZGV4IDwgdXJsLmluZGV4T2YoJyMnKSkgPyAnPycgOiAnIycsCgkgICAgICB1U3BsaXQgPSB1cmwuc3BsaXQoc3BsaXR0ZXIpLAoJICAgICAgc2xhc2hSZWdleCA9IC9cXC9nOwoJICB1U3BsaXRbMF0gPSB1U3BsaXRbMF0ucmVwbGFjZShzbGFzaFJlZ2V4LCAnLycpOwoJICB1cmwgPSB1U3BsaXQuam9pbihzcGxpdHRlcik7CgoJICB2YXIgcmVzdCA9IHVybDsKCgkgIC8vIHRyaW0gYmVmb3JlIHByb2NlZWRpbmcuCgkgIC8vIFRoaXMgaXMgdG8gc3VwcG9ydCBwYXJzZSBzdHVmZiBsaWtlICIgIGh0dHA6Ly9mb28uY29tICBcbiIKCSAgcmVzdCA9IHJlc3QudHJpbSgpOwoKCSAgaWYgKCFzbGFzaGVzRGVub3RlSG9zdCAmJiB1cmwuc3BsaXQoJyMnKS5sZW5ndGggPT09IDEpIHsKCSAgICAvLyBUcnkgZmFzdCBwYXRoIHJlZ2V4cAoJICAgIHZhciBzaW1wbGVQYXRoID0gc2ltcGxlUGF0aFBhdHRlcm4uZXhlYyhyZXN0KTsKCSAgICBpZiAoc2ltcGxlUGF0aCkgewoJICAgICAgdGhpcy5wYXRoID0gcmVzdDsKCSAgICAgIHRoaXMuaHJlZiA9IHJlc3Q7CgkgICAgICB0aGlzLnBhdGhuYW1lID0gc2ltcGxlUGF0aFsxXTsKCSAgICAgIGlmIChzaW1wbGVQYXRoWzJdKSB7CgkgICAgICAgIHRoaXMuc2VhcmNoID0gc2ltcGxlUGF0aFsyXTsKCSAgICAgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHsKCSAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5zZWFyY2guc3Vic3RyKDEpKTsKCSAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5zZWFyY2guc3Vic3RyKDEpOwoJICAgICAgICB9CgkgICAgICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHsKCSAgICAgICAgdGhpcy5zZWFyY2ggPSAnJzsKCSAgICAgICAgdGhpcy5xdWVyeSA9IHt9OwoJICAgICAgfQoJICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfQoJICB9CgoJICB2YXIgcHJvdG8gPSBwcm90b2NvbFBhdHRlcm4uZXhlYyhyZXN0KTsKCSAgaWYgKHByb3RvKSB7CgkgICAgcHJvdG8gPSBwcm90b1swXTsKCSAgICB2YXIgbG93ZXJQcm90byA9IHByb3RvLnRvTG93ZXJDYXNlKCk7CgkgICAgdGhpcy5wcm90b2NvbCA9IGxvd2VyUHJvdG87CgkgICAgcmVzdCA9IHJlc3Quc3Vic3RyKHByb3RvLmxlbmd0aCk7CgkgIH0KCgkgIC8vIGZpZ3VyZSBvdXQgaWYgaXQncyBnb3QgYSBob3N0CgkgIC8vIHVzZXJAc2VydmVyIGlzICphbHdheXMqIGludGVycHJldGVkIGFzIGEgaG9zdG5hbWUsIGFuZCB1cmwKCSAgLy8gcmVzb2x1dGlvbiB3aWxsIHRyZWF0IC8vZm9vL2JhciBhcyBob3N0PWZvbyxwYXRoPWJhciBiZWNhdXNlIHRoYXQncwoJICAvLyBob3cgdGhlIGJyb3dzZXIgcmVzb2x2ZXMgcmVsYXRpdmUgVVJMcy4KCSAgaWYgKHNsYXNoZXNEZW5vdGVIb3N0IHx8IHByb3RvIHx8IHJlc3QubWF0Y2goL15cL1wvW15AXC9dK0BbXkBcL10rLykpIHsKCSAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nOwoJICAgIGlmIChzbGFzaGVzICYmICEocHJvdG8gJiYgaG9zdGxlc3NQcm90b2NvbFtwcm90b10pKSB7CgkgICAgICByZXN0ID0gcmVzdC5zdWJzdHIoMik7CgkgICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlOwoJICAgIH0KCSAgfQoKCSAgaWYgKCFob3N0bGVzc1Byb3RvY29sW3Byb3RvXSAmJgoJICAgICAgKHNsYXNoZXMgfHwgKHByb3RvICYmICFzbGFzaGVkUHJvdG9jb2xbcHJvdG9dKSkpIHsKCgkgICAgLy8gdGhlcmUncyBhIGhvc3RuYW1lLgoJICAgIC8vIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuCgkgICAgLy8KCSAgICAvLyBJZiB0aGVyZSBpcyBhbiBAIGluIHRoZSBob3N0bmFtZSwgdGhlbiBub24taG9zdCBjaGFycyAqYXJlKiBhbGxvd2VkCgkgICAgLy8gdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXIKCSAgICAvLyBjb21lcyAqYmVmb3JlKiB0aGUgQC1zaWduLgoJICAgIC8vIFVSTHMgYXJlIG9ibm94aW91cy4KCSAgICAvLwoJICAgIC8vIGV4OgoJICAgIC8vIGh0dHA6Ly9hQGJAYy8gPT4gdXNlcjphQGIgaG9zdDpjCgkgICAgLy8gaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AYwoKCSAgICAvLyB2MC4xMiBUT0RPKGlzYWFjcyk6IFRoaXMgaXMgbm90IHF1aXRlIGhvdyBDaHJvbWUgZG9lcyB0aGluZ3MuCgkgICAgLy8gUmV2aWV3IG91ciB0ZXN0IGNhc2UgYWdhaW5zdCBicm93c2VycyBtb3JlIGNvbXByZWhlbnNpdmVseS4KCgkgICAgLy8gZmluZCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgYW55IGhvc3RFbmRpbmdDaGFycwoJICAgIHZhciBob3N0RW5kID0gLTE7CgkgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob3N0RW5kaW5nQ2hhcnMubGVuZ3RoOyBpKyspIHsKCSAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2YoaG9zdEVuZGluZ0NoYXJzW2ldKTsKCSAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSkKCSAgICAgICAgaG9zdEVuZCA9IGhlYzsKCSAgICB9CgoJICAgIC8vIGF0IHRoaXMgcG9pbnQsIGVpdGhlciB3ZSBoYXZlIGFuIGV4cGxpY2l0IHBvaW50IHdoZXJlIHRoZQoJICAgIC8vIGF1dGggcG9ydGlvbiBjYW5ub3QgZ28gcGFzdCwgb3IgdGhlIGxhc3QgQCBjaGFyIGlzIHRoZSBkZWNpZGVyLgoJICAgIHZhciBhdXRoLCBhdFNpZ247CgkgICAgaWYgKGhvc3RFbmQgPT09IC0xKSB7CgkgICAgICAvLyBhdFNpZ24gY2FuIGJlIGFueXdoZXJlLgoJICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcpOwoJICAgIH0gZWxzZSB7CgkgICAgICAvLyBhdFNpZ24gbXVzdCBiZSBpbiBhdXRoIHBvcnRpb24uCgkgICAgICAvLyBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZAoJICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcsIGhvc3RFbmQpOwoJICAgIH0KCgkgICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguCgkgICAgLy8gUHVsbCB0aGF0IG9mZi4KCSAgICBpZiAoYXRTaWduICE9PSAtMSkgewoJICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTsKCSAgICAgIHJlc3QgPSByZXN0LnNsaWNlKGF0U2lnbiArIDEpOwoJICAgICAgdGhpcy5hdXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KGF1dGgpOwoJICAgIH0KCgkgICAgLy8gdGhlIGhvc3QgaXMgdGhlIHJlbWFpbmluZyB0byB0aGUgbGVmdCBvZiB0aGUgZmlyc3Qgbm9uLWhvc3QgY2hhcgoJICAgIGhvc3RFbmQgPSAtMTsKCSAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vbkhvc3RDaGFycy5sZW5ndGg7IGkrKykgewoJICAgICAgdmFyIGhlYyA9IHJlc3QuaW5kZXhPZihub25Ib3N0Q2hhcnNbaV0pOwoJICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKQoJICAgICAgICBob3N0RW5kID0gaGVjOwoJICAgIH0KCSAgICAvLyBpZiB3ZSBzdGlsbCBoYXZlIG5vdCBoaXQgaXQsIHRoZW4gdGhlIGVudGlyZSB0aGluZyBpcyBhIGhvc3QuCgkgICAgaWYgKGhvc3RFbmQgPT09IC0xKQoJICAgICAgaG9zdEVuZCA9IHJlc3QubGVuZ3RoOwoKCSAgICB0aGlzLmhvc3QgPSByZXN0LnNsaWNlKDAsIGhvc3RFbmQpOwoJICAgIHJlc3QgPSByZXN0LnNsaWNlKGhvc3RFbmQpOwoKCSAgICAvLyBwdWxsIG91dCBwb3J0LgoJICAgIHRoaXMucGFyc2VIb3N0KCk7CgoJICAgIC8vIHdlJ3ZlIGluZGljYXRlZCB0aGF0IHRoZXJlIGlzIGEgaG9zdG5hbWUsCgkgICAgLy8gc28gZXZlbiBpZiBpdCdzIGVtcHR5LCBpdCBoYXMgdG8gYmUgcHJlc2VudC4KCSAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZSB8fCAnJzsKCgkgICAgLy8gaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF0KCSAgICAvLyBhc3N1bWUgdGhhdCBpdCdzIGFuIElQdjYgYWRkcmVzcy4KCSAgICB2YXIgaXB2Nkhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZVswXSA9PT0gJ1snICYmCgkgICAgICAgIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nOwoKCSAgICAvLyB2YWxpZGF0ZSBhIGxpdHRsZS4KCSAgICBpZiAoIWlwdjZIb3N0bmFtZSkgewoJICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1wuLyk7CgkgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGhvc3RwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKCSAgICAgICAgdmFyIHBhcnQgPSBob3N0cGFydHNbaV07CgkgICAgICAgIGlmICghcGFydCkgY29udGludWU7CgkgICAgICAgIGlmICghcGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkgewoJICAgICAgICAgIHZhciBuZXdwYXJ0ID0gJyc7CgkgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGsgPSBwYXJ0Lmxlbmd0aDsgaiA8IGs7IGorKykgewoJICAgICAgICAgICAgaWYgKHBhcnQuY2hhckNvZGVBdChqKSA+IDEyNykgewoJICAgICAgICAgICAgICAvLyB3ZSByZXBsYWNlIG5vbi1BU0NJSSBjaGFyIHdpdGggYSB0ZW1wb3JhcnkgcGxhY2Vob2xkZXIKCSAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0aGlzIHRvIG1ha2Ugc3VyZSBzaXplIG9mIGhvc3RuYW1lIGlzIG5vdAoJICAgICAgICAgICAgICAvLyBicm9rZW4gYnkgcmVwbGFjaW5nIG5vbi1BU0NJSSBieSBub3RoaW5nCgkgICAgICAgICAgICAgIG5ld3BhcnQgKz0gJ3gnOwoJICAgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgICAgbmV3cGFydCArPSBwYXJ0W2pdOwoJICAgICAgICAgICAgfQoJICAgICAgICAgIH0KCSAgICAgICAgICAvLyB3ZSB0ZXN0IGFnYWluIHdpdGggQVNDSUkgY2hhciBvbmx5CgkgICAgICAgICAgaWYgKCFuZXdwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFBhdHRlcm4pKSB7CgkgICAgICAgICAgICB2YXIgdmFsaWRQYXJ0cyA9IGhvc3RwYXJ0cy5zbGljZSgwLCBpKTsKCSAgICAgICAgICAgIHZhciBub3RIb3N0ID0gaG9zdHBhcnRzLnNsaWNlKGkgKyAxKTsKCSAgICAgICAgICAgIHZhciBiaXQgPSBwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFN0YXJ0KTsKCSAgICAgICAgICAgIGlmIChiaXQpIHsKCSAgICAgICAgICAgICAgdmFsaWRQYXJ0cy5wdXNoKGJpdFsxXSk7CgkgICAgICAgICAgICAgIG5vdEhvc3QudW5zaGlmdChiaXRbMl0pOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKG5vdEhvc3QubGVuZ3RoKSB7CgkgICAgICAgICAgICAgIHJlc3QgPSAnLycgKyBub3RIb3N0LmpvaW4oJy4nKSArIHJlc3Q7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aGlzLmhvc3RuYW1lID0gdmFsaWRQYXJ0cy5qb2luKCcuJyk7CgkgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH0KCSAgICB9CgoJICAgIGlmICh0aGlzLmhvc3RuYW1lLmxlbmd0aCA+IGhvc3RuYW1lTWF4TGVuKSB7CgkgICAgICB0aGlzLmhvc3RuYW1lID0gJyc7CgkgICAgfSBlbHNlIHsKCSAgICAgIC8vIGhvc3RuYW1lcyBhcmUgYWx3YXlzIGxvd2VyIGNhc2UuCgkgICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpOwoJICAgIH0KCgkgICAgaWYgKCFpcHY2SG9zdG5hbWUpIHsKCSAgICAgIC8vIElETkEgU3VwcG9ydDogUmV0dXJucyBhIHB1bnljb2RlZCByZXByZXNlbnRhdGlvbiBvZiAiZG9tYWluIi4KCSAgICAgIC8vIEl0IG9ubHkgY29udmVydHMgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHRoYXQKCSAgICAgIC8vIGhhdmUgbm9uLUFTQ0lJIGNoYXJhY3RlcnMsIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYKCSAgICAgIC8vIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCBhbHJlYWR5IGlzIEFTQ0lJLW9ubHkuCgkgICAgICB0aGlzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLmhvc3RuYW1lKTsKCSAgICB9CgoJICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7CgkgICAgdmFyIGggPSB0aGlzLmhvc3RuYW1lIHx8ICcnOwoJICAgIHRoaXMuaG9zdCA9IGggKyBwOwoJICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7CgoJICAgIC8vIHN0cmlwIFsgYW5kIF0gZnJvbSB0aGUgaG9zdG5hbWUKCSAgICAvLyB0aGUgaG9zdCBmaWVsZCBzdGlsbCByZXRhaW5zIHRoZW0sIHRob3VnaAoJICAgIGlmIChpcHY2SG9zdG5hbWUpIHsKCSAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnN1YnN0cigxLCB0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDIpOwoJICAgICAgaWYgKHJlc3RbMF0gIT09ICcvJykgewoJICAgICAgICByZXN0ID0gJy8nICsgcmVzdDsKCSAgICAgIH0KCSAgICB9CgkgIH0KCgkgIC8vIG5vdyByZXN0IGlzIHNldCB0byB0aGUgcG9zdC1ob3N0IHN0dWZmLgoJICAvLyBjaG9wIG9mZiBhbnkgZGVsaW0gY2hhcnMuCgkgIGlmICghdW5zYWZlUHJvdG9jb2xbbG93ZXJQcm90b10pIHsKCgkgICAgLy8gRmlyc3QsIG1ha2UgMTAwJSBzdXJlIHRoYXQgYW55ICJhdXRvRXNjYXBlIiBjaGFycyBnZXQKCSAgICAvLyBlc2NhcGVkLCBldmVuIGlmIGVuY29kZVVSSUNvbXBvbmVudCBkb2Vzbid0IHRoaW5rIHRoZXkKCSAgICAvLyBuZWVkIHRvIGJlLgoJICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXV0b0VzY2FwZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKCSAgICAgIHZhciBhZSA9IGF1dG9Fc2NhcGVbaV07CgkgICAgICBpZiAocmVzdC5pbmRleE9mKGFlKSA9PT0gLTEpCgkgICAgICAgIGNvbnRpbnVlOwoJICAgICAgdmFyIGVzYyA9IGVuY29kZVVSSUNvbXBvbmVudChhZSk7CgkgICAgICBpZiAoZXNjID09PSBhZSkgewoJICAgICAgICBlc2MgPSBlc2NhcGUoYWUpOwoJICAgICAgfQoJICAgICAgcmVzdCA9IHJlc3Quc3BsaXQoYWUpLmpvaW4oZXNjKTsKCSAgICB9CgkgIH0KCgoJICAvLyBjaG9wIG9mZiBmcm9tIHRoZSB0YWlsIGZpcnN0LgoJICB2YXIgaGFzaCA9IHJlc3QuaW5kZXhPZignIycpOwoJICBpZiAoaGFzaCAhPT0gLTEpIHsKCSAgICAvLyBnb3QgYSBmcmFnbWVudCBzdHJpbmcuCgkgICAgdGhpcy5oYXNoID0gcmVzdC5zdWJzdHIoaGFzaCk7CgkgICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgaGFzaCk7CgkgIH0KCSAgdmFyIHFtID0gcmVzdC5pbmRleE9mKCc/Jyk7CgkgIGlmIChxbSAhPT0gLTEpIHsKCSAgICB0aGlzLnNlYXJjaCA9IHJlc3Quc3Vic3RyKHFtKTsKCSAgICB0aGlzLnF1ZXJ5ID0gcmVzdC5zdWJzdHIocW0gKyAxKTsKCSAgICBpZiAocGFyc2VRdWVyeVN0cmluZykgewoJICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMucXVlcnkpOwoJICAgIH0KCSAgICByZXN0ID0gcmVzdC5zbGljZSgwLCBxbSk7CgkgIH0gZWxzZSBpZiAocGFyc2VRdWVyeVN0cmluZykgewoJICAgIC8vIG5vIHF1ZXJ5IHN0cmluZywgYnV0IHBhcnNlUXVlcnlTdHJpbmcgc3RpbGwgcmVxdWVzdGVkCgkgICAgdGhpcy5zZWFyY2ggPSAnJzsKCSAgICB0aGlzLnF1ZXJ5ID0ge307CgkgIH0KCSAgaWYgKHJlc3QpIHRoaXMucGF0aG5hbWUgPSByZXN0OwoJICBpZiAoc2xhc2hlZFByb3RvY29sW2xvd2VyUHJvdG9dICYmCgkgICAgICB0aGlzLmhvc3RuYW1lICYmICF0aGlzLnBhdGhuYW1lKSB7CgkgICAgdGhpcy5wYXRobmFtZSA9ICcvJzsKCSAgfQoKCSAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdAoJICBpZiAodGhpcy5wYXRobmFtZSB8fCB0aGlzLnNlYXJjaCkgewoJICAgIHZhciBwID0gdGhpcy5wYXRobmFtZSB8fCAnJzsKCSAgICB2YXIgcyA9IHRoaXMuc2VhcmNoIHx8ICcnOwoJICAgIHRoaXMucGF0aCA9IHAgKyBzOwoJICB9CgoJICAvLyBmaW5hbGx5LCByZWNvbnN0cnVjdCB0aGUgaHJlZiBiYXNlZCBvbiB3aGF0IGhhcyBiZWVuIHZhbGlkYXRlZC4KCSAgdGhpcy5ocmVmID0gdGhpcy5mb3JtYXQoKTsKCSAgcmV0dXJuIHRoaXM7Cgl9OwoKCS8vIGZvcm1hdCBhIHBhcnNlZCBvYmplY3QgaW50byBhIHVybCBzdHJpbmcKCWZ1bmN0aW9uIHVybEZvcm1hdChvYmopIHsKCSAgLy8gZW5zdXJlIGl0J3MgYW4gb2JqZWN0LCBhbmQgbm90IGEgc3RyaW5nIHVybC4KCSAgLy8gSWYgaXQncyBhbiBvYmosIHRoaXMgaXMgYSBuby1vcC4KCSAgLy8gdGhpcyB3YXksIHlvdSBjYW4gY2FsbCB1cmxfZm9ybWF0KCkgb24gc3RyaW5ncwoJICAvLyB0byBjbGVhbiB1cCBwb3RlbnRpYWxseSB3b25reSB1cmxzLgoJICBpZiAodXRpbC5pc1N0cmluZyhvYmopKSBvYmogPSB1cmxQYXJzZShvYmopOwoJICBpZiAoIShvYmogaW5zdGFuY2VvZiBVcmwpKSByZXR1cm4gVXJsLnByb3RvdHlwZS5mb3JtYXQuY2FsbChvYmopOwoJICByZXR1cm4gb2JqLmZvcm1hdCgpOwoJfQoKCVVybC5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24oKSB7CgkgIHZhciBhdXRoID0gdGhpcy5hdXRoIHx8ICcnOwoJICBpZiAoYXV0aCkgewoJICAgIGF1dGggPSBlbmNvZGVVUklDb21wb25lbnQoYXV0aCk7CgkgICAgYXV0aCA9IGF1dGgucmVwbGFjZSgvJTNBL2ksICc6Jyk7CgkgICAgYXV0aCArPSAnQCc7CgkgIH0KCgkgIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsCgkgICAgICBwYXRobmFtZSA9IHRoaXMucGF0aG5hbWUgfHwgJycsCgkgICAgICBoYXNoID0gdGhpcy5oYXNoIHx8ICcnLAoJICAgICAgaG9zdCA9IGZhbHNlLAoJICAgICAgcXVlcnkgPSAnJzsKCgkgIGlmICh0aGlzLmhvc3QpIHsKCSAgICBob3N0ID0gYXV0aCArIHRoaXMuaG9zdDsKCSAgfSBlbHNlIGlmICh0aGlzLmhvc3RuYW1lKSB7CgkgICAgaG9zdCA9IGF1dGggKyAodGhpcy5ob3N0bmFtZS5pbmRleE9mKCc6JykgPT09IC0xID8KCSAgICAgICAgdGhpcy5ob3N0bmFtZSA6CgkgICAgICAgICdbJyArIHRoaXMuaG9zdG5hbWUgKyAnXScpOwoJICAgIGlmICh0aGlzLnBvcnQpIHsKCSAgICAgIGhvc3QgKz0gJzonICsgdGhpcy5wb3J0OwoJICAgIH0KCSAgfQoKCSAgaWYgKHRoaXMucXVlcnkgJiYKCSAgICAgIHV0aWwuaXNPYmplY3QodGhpcy5xdWVyeSkgJiYKCSAgICAgIE9iamVjdC5rZXlzKHRoaXMucXVlcnkpLmxlbmd0aCkgewoJICAgIHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHRoaXMucXVlcnkpOwoJICB9CgoJICB2YXIgc2VhcmNoID0gdGhpcy5zZWFyY2ggfHwgKHF1ZXJ5ICYmICgnPycgKyBxdWVyeSkpIHx8ICcnOwoKCSAgaWYgKHByb3RvY29sICYmIHByb3RvY29sLnN1YnN0cigtMSkgIT09ICc6JykgcHJvdG9jb2wgKz0gJzonOwoKCSAgLy8gb25seSB0aGUgc2xhc2hlZFByb3RvY29scyBnZXQgdGhlIC8vLiAgTm90IG1haWx0bzosIHhtcHA6LCBldGMuCgkgIC8vIHVubGVzcyB0aGV5IGhhZCB0aGVtIHRvIGJlZ2luIHdpdGguCgkgIGlmICh0aGlzLnNsYXNoZXMgfHwKCSAgICAgICghcHJvdG9jb2wgfHwgc2xhc2hlZFByb3RvY29sW3Byb3RvY29sXSkgJiYgaG9zdCAhPT0gZmFsc2UpIHsKCSAgICBob3N0ID0gJy8vJyArIChob3N0IHx8ICcnKTsKCSAgICBpZiAocGF0aG5hbWUgJiYgcGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHBhdGhuYW1lID0gJy8nICsgcGF0aG5hbWU7CgkgIH0gZWxzZSBpZiAoIWhvc3QpIHsKCSAgICBob3N0ID0gJyc7CgkgIH0KCgkgIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIGhhc2ggPSAnIycgKyBoYXNoOwoJICBpZiAoc2VhcmNoICYmIHNlYXJjaC5jaGFyQXQoMCkgIT09ICc/Jykgc2VhcmNoID0gJz8nICsgc2VhcmNoOwoKCSAgcGF0aG5hbWUgPSBwYXRobmFtZS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uKG1hdGNoKSB7CgkgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChtYXRjaCk7CgkgIH0pOwoJICBzZWFyY2ggPSBzZWFyY2gucmVwbGFjZSgnIycsICclMjMnKTsKCgkgIHJldHVybiBwcm90b2NvbCArIGhvc3QgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7Cgl9OwoKCWZ1bmN0aW9uIHVybFJlc29sdmUoc291cmNlLCByZWxhdGl2ZSkgewoJICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZShyZWxhdGl2ZSk7Cgl9CgoJVXJsLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24ocmVsYXRpdmUpIHsKCSAgcmV0dXJuIHRoaXMucmVzb2x2ZU9iamVjdCh1cmxQYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpKS5mb3JtYXQoKTsKCX07CgoJZnVuY3Rpb24gdXJsUmVzb2x2ZU9iamVjdChzb3VyY2UsIHJlbGF0aXZlKSB7CgkgIGlmICghc291cmNlKSByZXR1cm4gcmVsYXRpdmU7CgkgIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlT2JqZWN0KHJlbGF0aXZlKTsKCX0KCglVcmwucHJvdG90eXBlLnJlc29sdmVPYmplY3QgPSBmdW5jdGlvbihyZWxhdGl2ZSkgewoJICBpZiAodXRpbC5pc1N0cmluZyhyZWxhdGl2ZSkpIHsKCSAgICB2YXIgcmVsID0gbmV3IFVybCgpOwoJICAgIHJlbC5wYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpOwoJICAgIHJlbGF0aXZlID0gcmVsOwoJICB9CgoJICB2YXIgcmVzdWx0ID0gbmV3IFVybCgpOwoJICB2YXIgdGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKTsKCSAgZm9yICh2YXIgdGsgPSAwOyB0ayA8IHRrZXlzLmxlbmd0aDsgdGsrKykgewoJICAgIHZhciB0a2V5ID0gdGtleXNbdGtdOwoJICAgIHJlc3VsdFt0a2V5XSA9IHRoaXNbdGtleV07CgkgIH0KCgkgIC8vIGhhc2ggaXMgYWx3YXlzIG92ZXJyaWRkZW4sIG5vIG1hdHRlciB3aGF0LgoJICAvLyBldmVuIGhyZWY9IiIgd2lsbCByZW1vdmUgaXQuCgkgIHJlc3VsdC5oYXNoID0gcmVsYXRpdmUuaGFzaDsKCgkgIC8vIGlmIHRoZSByZWxhdGl2ZSB1cmwgaXMgZW1wdHksIHRoZW4gdGhlcmUncyBub3RoaW5nIGxlZnQgdG8gZG8gaGVyZS4KCSAgaWYgKHJlbGF0aXZlLmhyZWYgPT09ICcnKSB7CgkgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CgkgICAgcmV0dXJuIHJlc3VsdDsKCSAgfQoKCSAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuCgkgIGlmIChyZWxhdGl2ZS5zbGFzaGVzICYmICFyZWxhdGl2ZS5wcm90b2NvbCkgewoJICAgIC8vIHRha2UgZXZlcnl0aGluZyBleGNlcHQgdGhlIHByb3RvY29sIGZyb20gcmVsYXRpdmUKCSAgICB2YXIgcmtleXMgPSBPYmplY3Qua2V5cyhyZWxhdGl2ZSk7CgkgICAgZm9yICh2YXIgcmsgPSAwOyByayA8IHJrZXlzLmxlbmd0aDsgcmsrKykgewoJICAgICAgdmFyIHJrZXkgPSBya2V5c1tya107CgkgICAgICBpZiAocmtleSAhPT0gJ3Byb3RvY29sJykKCSAgICAgICAgcmVzdWx0W3JrZXldID0gcmVsYXRpdmVbcmtleV07CgkgICAgfQoKCSAgICAvL3VybFBhcnNlIGFwcGVuZHMgdHJhaWxpbmcgLyB0byB1cmxzIGxpa2UgaHR0cDovL3d3dy5leGFtcGxlLmNvbQoJICAgIGlmIChzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXSAmJgoJICAgICAgICByZXN1bHQuaG9zdG5hbWUgJiYgIXJlc3VsdC5wYXRobmFtZSkgewoJICAgICAgcmVzdWx0LnBhdGggPSByZXN1bHQucGF0aG5hbWUgPSAnLyc7CgkgICAgfQoKCSAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTsKCSAgICByZXR1cm4gcmVzdWx0OwoJICB9CgoJICBpZiAocmVsYXRpdmUucHJvdG9jb2wgJiYgcmVsYXRpdmUucHJvdG9jb2wgIT09IHJlc3VsdC5wcm90b2NvbCkgewoJICAgIC8vIGlmIGl0J3MgYSBrbm93biB1cmwgcHJvdG9jb2wsIHRoZW4gY2hhbmdpbmcKCSAgICAvLyB0aGUgcHJvdG9jb2wgZG9lcyB3ZWlyZCB0aGluZ3MKCSAgICAvLyBmaXJzdCwgaWYgaXQncyBub3QgZmlsZTosIHRoZW4gd2UgTVVTVCBoYXZlIGEgaG9zdCwKCSAgICAvLyBhbmQgaWYgdGhlcmUgd2FzIGEgcGF0aAoJICAgIC8vIHRvIGJlZ2luIHdpdGgsIHRoZW4gd2UgTVVTVCBoYXZlIGEgcGF0aC4KCSAgICAvLyBpZiBpdCBpcyBmaWxlOiwgdGhlbiB0aGUgaG9zdCBpcyBkcm9wcGVkLAoJICAgIC8vIGJlY2F1c2UgdGhhdCdzIGtub3duIHRvIGJlIGhvc3RsZXNzLgoJICAgIC8vIGFueXRoaW5nIGVsc2UgaXMgYXNzdW1lZCB0byBiZSBhYnNvbHV0ZS4KCSAgICBpZiAoIXNsYXNoZWRQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHsKCSAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpOwoJICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7CgkgICAgICAgIHZhciBrID0ga2V5c1t2XTsKCSAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107CgkgICAgICB9CgkgICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTsKCSAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfQoKCSAgICByZXN1bHQucHJvdG9jb2wgPSByZWxhdGl2ZS5wcm90b2NvbDsKCSAgICBpZiAoIXJlbGF0aXZlLmhvc3QgJiYgIWhvc3RsZXNzUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKSB7CgkgICAgICB2YXIgcmVsUGF0aCA9IChyZWxhdGl2ZS5wYXRobmFtZSB8fCAnJykuc3BsaXQoJy8nKTsKCSAgICAgIHdoaWxlIChyZWxQYXRoLmxlbmd0aCAmJiAhKHJlbGF0aXZlLmhvc3QgPSByZWxQYXRoLnNoaWZ0KCkpKTsKCSAgICAgIGlmICghcmVsYXRpdmUuaG9zdCkgcmVsYXRpdmUuaG9zdCA9ICcnOwoJICAgICAgaWYgKCFyZWxhdGl2ZS5ob3N0bmFtZSkgcmVsYXRpdmUuaG9zdG5hbWUgPSAnJzsKCSAgICAgIGlmIChyZWxQYXRoWzBdICE9PSAnJykgcmVsUGF0aC51bnNoaWZ0KCcnKTsKCSAgICAgIGlmIChyZWxQYXRoLmxlbmd0aCA8IDIpIHJlbFBhdGgudW5zaGlmdCgnJyk7CgkgICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxQYXRoLmpvaW4oJy8nKTsKCSAgICB9IGVsc2UgewoJICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsYXRpdmUucGF0aG5hbWU7CgkgICAgfQoJICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7CgkgICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7CgkgICAgcmVzdWx0Lmhvc3QgPSByZWxhdGl2ZS5ob3N0IHx8ICcnOwoJICAgIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aDsKCSAgICByZXN1bHQuaG9zdG5hbWUgPSByZWxhdGl2ZS5ob3N0bmFtZSB8fCByZWxhdGl2ZS5ob3N0OwoJICAgIHJlc3VsdC5wb3J0ID0gcmVsYXRpdmUucG9ydDsKCSAgICAvLyB0byBzdXBwb3J0IGh0dHAucmVxdWVzdAoJICAgIGlmIChyZXN1bHQucGF0aG5hbWUgfHwgcmVzdWx0LnNlYXJjaCkgewoJICAgICAgdmFyIHAgPSByZXN1bHQucGF0aG5hbWUgfHwgJyc7CgkgICAgICB2YXIgcyA9IHJlc3VsdC5zZWFyY2ggfHwgJyc7CgkgICAgICByZXN1bHQucGF0aCA9IHAgKyBzOwoJICAgIH0KCSAgICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7CgkgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CgkgICAgcmV0dXJuIHJlc3VsdDsKCSAgfQoKCSAgdmFyIGlzU291cmNlQWJzID0gKHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpLAoJICAgICAgaXNSZWxBYnMgPSAoCgkgICAgICAgICAgcmVsYXRpdmUuaG9zdCB8fAoJICAgICAgICAgIHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nCgkgICAgICApLAoJICAgICAgbXVzdEVuZEFicyA9IChpc1JlbEFicyB8fCBpc1NvdXJjZUFicyB8fAoJICAgICAgICAgICAgICAgICAgICAocmVzdWx0Lmhvc3QgJiYgcmVsYXRpdmUucGF0aG5hbWUpKSwKCSAgICAgIHJlbW92ZUFsbERvdHMgPSBtdXN0RW5kQWJzLAoJICAgICAgc3JjUGF0aCA9IHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSwKCSAgICAgIHJlbFBhdGggPSByZWxhdGl2ZS5wYXRobmFtZSAmJiByZWxhdGl2ZS5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLAoJICAgICAgcHN5Y2hvdGljID0gcmVzdWx0LnByb3RvY29sICYmICFzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXTsKCgkgIC8vIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmUKCSAgLy8gbGlua3MgbGlrZSAuLi8uLiBzaG91bGQgYmUgYWJsZQoJICAvLyB0byBjcmF3bCB1cCB0byB0aGUgaG9zdG5hbWUsIGFzIHdlbGwuICBUaGlzIGlzIHN0cmFuZ2UuCgkgIC8vIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuCgkgIC8vIExhdGVyIG9uLCBwdXQgdGhlIGZpcnN0IHBhdGggcGFydCBpbnRvIHRoZSBob3N0IGZpZWxkLgoJICBpZiAocHN5Y2hvdGljKSB7CgkgICAgcmVzdWx0Lmhvc3RuYW1lID0gJyc7CgkgICAgcmVzdWx0LnBvcnQgPSBudWxsOwoJICAgIGlmIChyZXN1bHQuaG9zdCkgewoJICAgICAgaWYgKHNyY1BhdGhbMF0gPT09ICcnKSBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7CgkgICAgICBlbHNlIHNyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCk7CgkgICAgfQoJICAgIHJlc3VsdC5ob3N0ID0gJyc7CgkgICAgaWYgKHJlbGF0aXZlLnByb3RvY29sKSB7CgkgICAgICByZWxhdGl2ZS5ob3N0bmFtZSA9IG51bGw7CgkgICAgICByZWxhdGl2ZS5wb3J0ID0gbnVsbDsKCSAgICAgIGlmIChyZWxhdGl2ZS5ob3N0KSB7CgkgICAgICAgIGlmIChyZWxQYXRoWzBdID09PSAnJykgcmVsUGF0aFswXSA9IHJlbGF0aXZlLmhvc3Q7CgkgICAgICAgIGVsc2UgcmVsUGF0aC51bnNoaWZ0KHJlbGF0aXZlLmhvc3QpOwoJICAgICAgfQoJICAgICAgcmVsYXRpdmUuaG9zdCA9IG51bGw7CgkgICAgfQoJICAgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzICYmIChyZWxQYXRoWzBdID09PSAnJyB8fCBzcmNQYXRoWzBdID09PSAnJyk7CgkgIH0KCgkgIGlmIChpc1JlbEFicykgewoJICAgIC8vIGl0J3MgYWJzb2x1dGUuCgkgICAgcmVzdWx0Lmhvc3QgPSAocmVsYXRpdmUuaG9zdCB8fCByZWxhdGl2ZS5ob3N0ID09PSAnJykgPwoJICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdCA6IHJlc3VsdC5ob3N0OwoJICAgIHJlc3VsdC5ob3N0bmFtZSA9IChyZWxhdGl2ZS5ob3N0bmFtZSB8fCByZWxhdGl2ZS5ob3N0bmFtZSA9PT0gJycpID8KCSAgICAgICAgICAgICAgICAgICAgICByZWxhdGl2ZS5ob3N0bmFtZSA6IHJlc3VsdC5ob3N0bmFtZTsKCSAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoOwoJICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5OwoJICAgIHNyY1BhdGggPSByZWxQYXRoOwoJICAgIC8vIGZhbGwgdGhyb3VnaCB0byB0aGUgZG90LWhhbmRsaW5nIGJlbG93LgoJICB9IGVsc2UgaWYgKHJlbFBhdGgubGVuZ3RoKSB7CgkgICAgLy8gaXQncyByZWxhdGl2ZQoJICAgIC8vIHRocm93IGF3YXkgdGhlIGV4aXN0aW5nIGZpbGUsIGFuZCB0YWtlIHRoZSBuZXcgcGF0aCBpbnN0ZWFkLgoJICAgIGlmICghc3JjUGF0aCkgc3JjUGF0aCA9IFtdOwoJICAgIHNyY1BhdGgucG9wKCk7CgkgICAgc3JjUGF0aCA9IHNyY1BhdGguY29uY2F0KHJlbFBhdGgpOwoJICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7CgkgICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7CgkgIH0gZWxzZSBpZiAoIXV0aWwuaXNOdWxsT3JVbmRlZmluZWQocmVsYXRpdmUuc2VhcmNoKSkgewoJICAgIC8vIGp1c3QgcHVsbCBvdXQgdGhlIHNlYXJjaC4KCSAgICAvLyBsaWtlIGhyZWY9Jz9mb28nLgoJICAgIC8vIFB1dCB0aGlzIGFmdGVyIHRoZSBvdGhlciB0d28gY2FzZXMgYmVjYXVzZSBpdCBzaW1wbGlmaWVzIHRoZSBib29sZWFucwoJICAgIGlmIChwc3ljaG90aWMpIHsKCSAgICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlc3VsdC5ob3N0ID0gc3JjUGF0aC5zaGlmdCgpOwoJICAgICAgLy9vY2NhdGlvbmFseSB0aGUgYXV0aCBjYW4gZ2V0IHN0dWNrIG9ubHkgaW4gaG9zdAoJICAgICAgLy90aGlzIGVzcGVjaWFsbHkgaGFwcGVucyBpbiBjYXNlcyBsaWtlCgkgICAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKQoJICAgICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID8KCSAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmhvc3Quc3BsaXQoJ0AnKSA6IGZhbHNlOwoJICAgICAgaWYgKGF1dGhJbkhvc3QpIHsKCSAgICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7CgkgICAgICAgIHJlc3VsdC5ob3N0ID0gcmVzdWx0Lmhvc3RuYW1lID0gYXV0aEluSG9zdC5zaGlmdCgpOwoJICAgICAgfQoJICAgIH0KCSAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoOwoJICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5OwoJICAgIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3QKCSAgICBpZiAoIXV0aWwuaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIXV0aWwuaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7CgkgICAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgKwoJICAgICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7CgkgICAgfQoJICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpOwoJICAgIHJldHVybiByZXN1bHQ7CgkgIH0KCgkgIGlmICghc3JjUGF0aC5sZW5ndGgpIHsKCSAgICAvLyBubyBwYXRoIGF0IGFsbC4gIGVhc3kuCgkgICAgLy8gd2UndmUgYWxyZWFkeSBoYW5kbGVkIHRoZSBvdGhlciBzdHVmZiBhYm92ZS4KCSAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsOwoJICAgIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3QKCSAgICBpZiAocmVzdWx0LnNlYXJjaCkgewoJICAgICAgcmVzdWx0LnBhdGggPSAnLycgKyByZXN1bHQuc2VhcmNoOwoJICAgIH0gZWxzZSB7CgkgICAgICByZXN1bHQucGF0aCA9IG51bGw7CgkgICAgfQoJICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpOwoJICAgIHJldHVybiByZXN1bHQ7CgkgIH0KCgkgIC8vIGlmIGEgdXJsIEVORHMgaW4gLiBvciAuLiwgdGhlbiBpdCBtdXN0IGdldCBhIHRyYWlsaW5nIHNsYXNoLgoJICAvLyBob3dldmVyLCBpZiBpdCBlbmRzIGluIGFueXRoaW5nIGVsc2Ugbm9uLXNsYXNoeSwKCSAgLy8gdGhlbiBpdCBtdXN0IE5PVCBnZXQgYSB0cmFpbGluZyBzbGFzaC4KCSAgdmFyIGxhc3QgPSBzcmNQYXRoLnNsaWNlKC0xKVswXTsKCSAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSAoCgkgICAgICAocmVzdWx0Lmhvc3QgfHwgcmVsYXRpdmUuaG9zdCB8fCBzcmNQYXRoLmxlbmd0aCA+IDEpICYmCgkgICAgICAobGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicpIHx8IGxhc3QgPT09ICcnKTsKCgkgIC8vIHN0cmlwIHNpbmdsZSBkb3RzLCByZXNvbHZlIGRvdWJsZSBkb3RzIHRvIHBhcmVudCBkaXIKCSAgLy8gaWYgdGhlIHBhdGggdHJpZXMgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIGB1cGAgZW5kcyB1cCA+IDAKCSAgdmFyIHVwID0gMDsKCSAgZm9yICh2YXIgaSA9IHNyY1BhdGgubGVuZ3RoOyBpID49IDA7IGktLSkgewoJICAgIGxhc3QgPSBzcmNQYXRoW2ldOwoJICAgIGlmIChsYXN0ID09PSAnLicpIHsKCSAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpOwoJICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykgewoJICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7CgkgICAgICB1cCsrOwoJICAgIH0gZWxzZSBpZiAodXApIHsKCSAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpOwoJICAgICAgdXAtLTsKCSAgICB9CgkgIH0KCgkgIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnMKCSAgaWYgKCFtdXN0RW5kQWJzICYmICFyZW1vdmVBbGxEb3RzKSB7CgkgICAgZm9yICg7IHVwLS07IHVwKSB7CgkgICAgICBzcmNQYXRoLnVuc2hpZnQoJy4uJyk7CgkgICAgfQoJICB9CgoJICBpZiAobXVzdEVuZEFicyAmJiBzcmNQYXRoWzBdICE9PSAnJyAmJgoJICAgICAgKCFzcmNQYXRoWzBdIHx8IHNyY1BhdGhbMF0uY2hhckF0KDApICE9PSAnLycpKSB7CgkgICAgc3JjUGF0aC51bnNoaWZ0KCcnKTsKCSAgfQoKCSAgaWYgKGhhc1RyYWlsaW5nU2xhc2ggJiYgKHNyY1BhdGguam9pbignLycpLnN1YnN0cigtMSkgIT09ICcvJykpIHsKCSAgICBzcmNQYXRoLnB1c2goJycpOwoJICB9CgoJICB2YXIgaXNBYnNvbHV0ZSA9IHNyY1BhdGhbMF0gPT09ICcnIHx8CgkgICAgICAoc3JjUGF0aFswXSAmJiBzcmNQYXRoWzBdLmNoYXJBdCgwKSA9PT0gJy8nKTsKCgkgIC8vIHB1dCB0aGUgaG9zdCBiYWNrCgkgIGlmIChwc3ljaG90aWMpIHsKCSAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IGlzQWJzb2x1dGUgPyAnJyA6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNQYXRoLmxlbmd0aCA/IHNyY1BhdGguc2hpZnQoKSA6ICcnOwoJICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3QKCSAgICAvL3RoaXMgZXNwZWNpYWxseSBoYXBwZW5zIGluIGNhc2VzIGxpa2UKCSAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKQoJICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/CgkgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7CgkgICAgaWYgKGF1dGhJbkhvc3QpIHsKCSAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpOwoJICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7CgkgICAgfQoJICB9CgoJICBtdXN0RW5kQWJzID0gbXVzdEVuZEFicyB8fCAocmVzdWx0Lmhvc3QgJiYgc3JjUGF0aC5sZW5ndGgpOwoKCSAgaWYgKG11c3RFbmRBYnMgJiYgIWlzQWJzb2x1dGUpIHsKCSAgICBzcmNQYXRoLnVuc2hpZnQoJycpOwoJICB9CgoJICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7CgkgICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDsKCSAgICByZXN1bHQucGF0aCA9IG51bGw7CgkgIH0gZWxzZSB7CgkgICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7CgkgIH0KCgkgIC8vdG8gc3VwcG9ydCByZXF1ZXN0Lmh0dHAKCSAgaWYgKCF1dGlsLmlzTnVsbChyZXN1bHQucGF0aG5hbWUpIHx8ICF1dGlsLmlzTnVsbChyZXN1bHQuc2VhcmNoKSkgewoJICAgIHJlc3VsdC5wYXRoID0gKHJlc3VsdC5wYXRobmFtZSA/IHJlc3VsdC5wYXRobmFtZSA6ICcnKSArCgkgICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7CgkgIH0KCSAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoIHx8IHJlc3VsdC5hdXRoOwoJICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7CgkgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpOwoJICByZXR1cm4gcmVzdWx0OwoJfTsKCglVcmwucHJvdG90eXBlLnBhcnNlSG9zdCA9IGZ1bmN0aW9uKCkgewoJICB2YXIgaG9zdCA9IHRoaXMuaG9zdDsKCSAgdmFyIHBvcnQgPSBwb3J0UGF0dGVybi5leGVjKGhvc3QpOwoJICBpZiAocG9ydCkgewoJICAgIHBvcnQgPSBwb3J0WzBdOwoJICAgIGlmIChwb3J0ICE9PSAnOicpIHsKCSAgICAgIHRoaXMucG9ydCA9IHBvcnQuc3Vic3RyKDEpOwoJICAgIH0KCSAgICBob3N0ID0gaG9zdC5zdWJzdHIoMCwgaG9zdC5sZW5ndGggLSBwb3J0Lmxlbmd0aCk7CgkgIH0KCSAgaWYgKGhvc3QpIHRoaXMuaG9zdG5hbWUgPSBob3N0OwoJfTsKCgovKioqLyB9LAovKiA0MiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKG1vZHVsZSwgZ2xvYmFsKSB7LyohIGh0dHBzOi8vbXRocy5iZS9wdW55Y29kZSB2MS4zLjIgYnkgQG1hdGhpYXMgKi8KCTsoZnVuY3Rpb24ocm9vdCkgewoKCQkvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGVzICovCgkJdmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJgoJCQkhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzOwoJCXZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYKCQkJIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7CgkJdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDsKCQlpZiAoCgkJCWZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8CgkJCWZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8CgkJCWZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbAoJCSkgewoJCQlyb290ID0gZnJlZUdsb2JhbDsKCQl9CgoJCS8qKgoJCSAqIFRoZSBgcHVueWNvZGVgIG9iamVjdC4KCQkgKiBAbmFtZSBwdW55Y29kZQoJCSAqIEB0eXBlIE9iamVjdAoJCSAqLwoJCXZhciBwdW55Y29kZSwKCgkJLyoqIEhpZ2hlc3QgcG9zaXRpdmUgc2lnbmVkIDMyLWJpdCBmbG9hdCB2YWx1ZSAqLwoJCW1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTEKCgkJLyoqIEJvb3RzdHJpbmcgcGFyYW1ldGVycyAqLwoJCWJhc2UgPSAzNiwKCQl0TWluID0gMSwKCQl0TWF4ID0gMjYsCgkJc2tldyA9IDM4LAoJCWRhbXAgPSA3MDAsCgkJaW5pdGlhbEJpYXMgPSA3MiwKCQlpbml0aWFsTiA9IDEyOCwgLy8gMHg4MAoJCWRlbGltaXRlciA9ICctJywgLy8gJ1x4MkQnCgoJCS8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovCgkJcmVnZXhQdW55Y29kZSA9IC9eeG4tLS8sCgkJcmVnZXhOb25BU0NJSSA9IC9bXlx4MjAtXHg3RV0vLCAvLyB1bnByaW50YWJsZSBBU0NJSSBjaGFycyArIG5vbi1BU0NJSSBjaGFycwoJCXJlZ2V4U2VwYXJhdG9ycyA9IC9bXHgyRVx1MzAwMlx1RkYwRVx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9ycwoKCQkvKiogRXJyb3IgbWVzc2FnZXMgKi8KCQllcnJvcnMgPSB7CgkJCSdvdmVyZmxvdyc6ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcycsCgkJCSdub3QtYmFzaWMnOiAnSWxsZWdhbCBpbnB1dCA+PSAweDgwIChub3QgYSBiYXNpYyBjb2RlIHBvaW50KScsCgkJCSdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnCgkJfSwKCgkJLyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqLwoJCWJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbiwKCQlmbG9vciA9IE1hdGguZmxvb3IsCgkJc3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSwKCgkJLyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqLwoJCWtleTsKCgkJLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgoJCS8qKgoJCSAqIEEgZ2VuZXJpYyBlcnJvciB1dGlsaXR5IGZ1bmN0aW9uLgoJCSAqIEBwcml2YXRlCgkJICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuCgkJICogQHJldHVybnMge0Vycm9yfSBUaHJvd3MgYSBgUmFuZ2VFcnJvcmAgd2l0aCB0aGUgYXBwbGljYWJsZSBlcnJvciBtZXNzYWdlLgoJCSAqLwoJCWZ1bmN0aW9uIGVycm9yKHR5cGUpIHsKCQkJdGhyb3cgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pOwoJCX0KCgkJLyoqCgkJICogQSBnZW5lcmljIGBBcnJheSNtYXBgIHV0aWxpdHkgZnVuY3Rpb24uCgkJICogQHByaXZhdGUKCQkgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLgoJCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0aGF0IGdldHMgY2FsbGVkIGZvciBldmVyeSBhcnJheQoJCSAqIGl0ZW0uCgkJICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLgoJCSAqLwoJCWZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHsKCQkJdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsKCQkJdmFyIHJlc3VsdCA9IFtdOwoJCQl3aGlsZSAobGVuZ3RoLS0pIHsKCQkJCXJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7CgkJCX0KCQkJcmV0dXJuIHJlc3VsdDsKCQl9CgoJCS8qKgoJCSAqIEEgc2ltcGxlIGBBcnJheSNtYXBgLWxpa2Ugd3JhcHBlciB0byB3b3JrIHdpdGggZG9tYWluIG5hbWUgc3RyaW5ncyBvciBlbWFpbAoJCSAqIGFkZHJlc3Nlcy4KCQkgKiBAcHJpdmF0ZQoJCSAqIEBwYXJhbSB7U3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MuCgkJICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5CgkJICogY2hhcmFjdGVyLgoJCSAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgc3RyaW5nIG9mIGNoYXJhY3RlcnMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrCgkJICogZnVuY3Rpb24uCgkJICovCgkJZnVuY3Rpb24gbWFwRG9tYWluKHN0cmluZywgZm4pIHsKCQkJdmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7CgkJCXZhciByZXN1bHQgPSAnJzsKCQkJaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHsKCQkJCS8vIEluIGVtYWlsIGFkZHJlc3Nlcywgb25seSB0aGUgZG9tYWluIG5hbWUgc2hvdWxkIGJlIHB1bnljb2RlZC4gTGVhdmUKCQkJCS8vIHRoZSBsb2NhbCBwYXJ0IChpLmUuIGV2ZXJ5dGhpbmcgdXAgdG8gYEBgKSBpbnRhY3QuCgkJCQlyZXN1bHQgPSBwYXJ0c1swXSArICdAJzsKCQkJCXN0cmluZyA9IHBhcnRzWzFdOwoJCQl9CgkJCS8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy4KCQkJc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocmVnZXhTZXBhcmF0b3JzLCAnXHgyRScpOwoJCQl2YXIgbGFiZWxzID0gc3RyaW5nLnNwbGl0KCcuJyk7CgkJCXZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTsKCQkJcmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7CgkJfQoKCQkvKioKCQkgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG51bWVyaWMgY29kZSBwb2ludHMgb2YgZWFjaCBVbmljb2RlCgkJICogY2hhcmFjdGVyIGluIHRoZSBzdHJpbmcuIFdoaWxlIEphdmFTY3JpcHQgdXNlcyBVQ1MtMiBpbnRlcm5hbGx5LAoJCSAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoCgkJICogVUNTLTIgZXhwb3NlcyBhcyBzZXBhcmF0ZSBjaGFyYWN0ZXJzKSBpbnRvIGEgc2luZ2xlIGNvZGUgcG9pbnQsCgkJICogbWF0Y2hpbmcgVVRGLTE2LgoJCSAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYAoJCSAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPgoJCSAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyCgkJICogQG5hbWUgZGVjb2RlCgkJICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUgVW5pY29kZSBpbnB1dCBzdHJpbmcgKFVDUy0yKS4KCQkgKiBAcmV0dXJucyB7QXJyYXl9IFRoZSBuZXcgYXJyYXkgb2YgY29kZSBwb2ludHMuCgkJICovCgkJZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpIHsKCQkJdmFyIG91dHB1dCA9IFtdLAoJCQkgICAgY291bnRlciA9IDAsCgkJCSAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoLAoJCQkgICAgdmFsdWUsCgkJCSAgICBleHRyYTsKCQkJd2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHsKCQkJCXZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTsKCQkJCWlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHsKCQkJCQkvLyBoaWdoIHN1cnJvZ2F0ZSwgYW5kIHRoZXJlIGlzIGEgbmV4dCBjaGFyYWN0ZXIKCQkJCQlleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7CgkJCQkJaWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGUKCQkJCQkJb3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTsKCQkJCQl9IGVsc2UgewoJCQkJCQkvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dAoJCQkJCQkvLyBjb2RlIHVuaXQgaXMgdGhlIGhpZ2ggc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIKCQkJCQkJb3V0cHV0LnB1c2godmFsdWUpOwoJCQkJCQljb3VudGVyLS07CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlvdXRwdXQucHVzaCh2YWx1ZSk7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIG91dHB1dDsKCQl9CgoJCS8qKgoJCSAqIENyZWF0ZXMgYSBzdHJpbmcgYmFzZWQgb24gYW4gYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy4KCQkgKiBAc2VlIGBwdW55Y29kZS51Y3MyLmRlY29kZWAKCQkgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMgoJCSAqIEBuYW1lIGVuY29kZQoJCSAqIEBwYXJhbSB7QXJyYXl9IGNvZGVQb2ludHMgVGhlIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuCgkJICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLgoJCSAqLwoJCWZ1bmN0aW9uIHVjczJlbmNvZGUoYXJyYXkpIHsKCQkJcmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJCXZhciBvdXRwdXQgPSAnJzsKCQkJCWlmICh2YWx1ZSA+IDB4RkZGRikgewoJCQkJCXZhbHVlIC09IDB4MTAwMDA7CgkJCQkJb3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7CgkJCQkJdmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGOwoJCQkJfQoJCQkJb3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSk7CgkJCQlyZXR1cm4gb3V0cHV0OwoJCQl9KS5qb2luKCcnKTsKCQl9CgoJCS8qKgoJCSAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci4KCQkgKiBAc2VlIGBkaWdpdFRvQmFzaWMoKWAKCQkgKiBAcHJpdmF0ZQoJCSAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS4KCQkgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQgKGZvciB1c2UgaW4KCQkgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmCgkJICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuCgkJICovCgkJZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkgewoJCQlpZiAoY29kZVBvaW50IC0gNDggPCAxMCkgewoJCQkJcmV0dXJuIGNvZGVQb2ludCAtIDIyOwoJCQl9CgkJCWlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7CgkJCQlyZXR1cm4gY29kZVBvaW50IC0gNjU7CgkJCX0KCQkJaWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHsKCQkJCXJldHVybiBjb2RlUG9pbnQgLSA5NzsKCQkJfQoJCQlyZXR1cm4gYmFzZTsKCQl9CgoJCS8qKgoJCSAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC4KCQkgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWAKCQkgKiBAcHJpdmF0ZQoJCSAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuCgkJICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3IKCQkgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGlzIGBkaWdpdGAsIHdoaWNoIG5lZWRzIHRvIGJlIGluIHRoZSByYW5nZQoJCSAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpcwoJCSAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkCgkJICogaWYgYGZsYWdgIGlzIG5vbi16ZXJvIGFuZCBgZGlnaXRgIGhhcyBubyB1cHBlcmNhc2UgZm9ybS4KCQkgKi8KCQlmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHsKCQkJLy8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLloKCQkJLy8gMjYuLjM1IG1hcCB0byBBU0NJSSAwLi45CgkJCXJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7CgkJfQoKCQkvKioKCQkgKiBCaWFzIGFkYXB0YXRpb24gZnVuY3Rpb24gYXMgcGVyIHNlY3Rpb24gMy40IG9mIFJGQyAzNDkyLgoJCSAqIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjQKCQkgKiBAcHJpdmF0ZQoJCSAqLwoJCWZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkgewoJCQl2YXIgayA9IDA7CgkJCWRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7CgkJCWRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTsKCQkJZm9yICgvKiBubyBpbml0aWFsaXphdGlvbiAqLzsgZGVsdGEgPiBiYXNlTWludXNUTWluICogdE1heCA+PiAxOyBrICs9IGJhc2UpIHsKCQkJCWRlbHRhID0gZmxvb3IoZGVsdGEgLyBiYXNlTWludXNUTWluKTsKCQkJfQoJCQlyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTsKCQl9CgoJCS8qKgoJCSAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scyB0byBhIHN0cmluZyBvZiBVbmljb2RlCgkJICogc3ltYm9scy4KCQkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCQkgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuCgkJICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLgoJCSAqLwoJCWZ1bmN0aW9uIGRlY29kZShpbnB1dCkgewoJCQkvLyBEb24ndCB1c2UgVUNTLTIKCQkJdmFyIG91dHB1dCA9IFtdLAoJCQkgICAgaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsCgkJCSAgICBvdXQsCgkJCSAgICBpID0gMCwKCQkJICAgIG4gPSBpbml0aWFsTiwKCQkJICAgIGJpYXMgPSBpbml0aWFsQmlhcywKCQkJICAgIGJhc2ljLAoJCQkgICAgaiwKCQkJICAgIGluZGV4LAoJCQkgICAgb2xkaSwKCQkJICAgIHcsCgkJCSAgICBrLAoJCQkgICAgZGlnaXQsCgkJCSAgICB0LAoJCQkgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovCgkJCSAgICBiYXNlTWludXNUOwoKCQkJLy8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50czogbGV0IGBiYXNpY2AgYmUgdGhlIG51bWJlciBvZiBpbnB1dCBjb2RlCgkJCS8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5CgkJCS8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LgoKCQkJYmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpOwoJCQlpZiAoYmFzaWMgPCAwKSB7CgkJCQliYXNpYyA9IDA7CgkJCX0KCgkJCWZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7CgkJCQkvLyBpZiBpdCdzIG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQKCQkJCWlmIChpbnB1dC5jaGFyQ29kZUF0KGopID49IDB4ODApIHsKCQkJCQllcnJvcignbm90LWJhc2ljJyk7CgkJCQl9CgkJCQlvdXRwdXQucHVzaChpbnB1dC5jaGFyQ29kZUF0KGopKTsKCQkJfQoKCQkJLy8gTWFpbiBkZWNvZGluZyBsb29wOiBzdGFydCBqdXN0IGFmdGVyIHRoZSBsYXN0IGRlbGltaXRlciBpZiBhbnkgYmFzaWMgY29kZQoJCQkvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLgoKCQkJZm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHsKCgkJCQkvLyBgaW5kZXhgIGlzIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXIgdG8gYmUgY29uc3VtZWQuCgkJCQkvLyBEZWNvZGUgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlciBpbnRvIGBkZWx0YWAsCgkJCQkvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llcgoJCQkJLy8gaWYgd2UgaW5jcmVhc2UgYGlgIGFzIHdlIGdvLCB0aGVuIHN1YnRyYWN0IG9mZiBpdHMgc3RhcnRpbmcKCQkJCS8vIHZhbHVlIGF0IHRoZSBlbmQgdG8gb2J0YWluIGBkZWx0YWAuCgkJCQlmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7CgoJCQkJCWlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkgewoJCQkJCQllcnJvcignaW52YWxpZC1pbnB1dCcpOwoJCQkJCX0KCgkJCQkJZGlnaXQgPSBiYXNpY1RvRGlnaXQoaW5wdXQuY2hhckNvZGVBdChpbmRleCsrKSk7CgoJCQkJCWlmIChkaWdpdCA+PSBiYXNlIHx8IGRpZ2l0ID4gZmxvb3IoKG1heEludCAtIGkpIC8gdykpIHsKCQkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQkJfQoKCQkJCQlpICs9IGRpZ2l0ICogdzsKCQkJCQl0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTsKCgkJCQkJaWYgKGRpZ2l0IDwgdCkgewoJCQkJCQlicmVhazsKCQkJCQl9CgoJCQkJCWJhc2VNaW51c1QgPSBiYXNlIC0gdDsKCQkJCQlpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7CgkJCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQkJCX0KCgkJCQkJdyAqPSBiYXNlTWludXNUOwoKCQkJCX0KCgkJCQlvdXQgPSBvdXRwdXQubGVuZ3RoICsgMTsKCQkJCWJpYXMgPSBhZGFwdChpIC0gb2xkaSwgb3V0LCBvbGRpID09IDApOwoKCQkJCS8vIGBpYCB3YXMgc3VwcG9zZWQgdG8gd3JhcCBhcm91bmQgZnJvbSBgb3V0YCB0byBgMGAsCgkJCQkvLyBpbmNyZW1lbnRpbmcgYG5gIGVhY2ggdGltZSwgc28gd2UnbGwgZml4IHRoYXQgbm93OgoJCQkJaWYgKGZsb29yKGkgLyBvdXQpID4gbWF4SW50IC0gbikgewoJCQkJCWVycm9yKCdvdmVyZmxvdycpOwoJCQkJfQoKCQkJCW4gKz0gZmxvb3IoaSAvIG91dCk7CgkJCQlpICU9IG91dDsKCgkJCQkvLyBJbnNlcnQgYG5gIGF0IHBvc2l0aW9uIGBpYCBvZiB0aGUgb3V0cHV0CgkJCQlvdXRwdXQuc3BsaWNlKGkrKywgMCwgbik7CgoJCQl9CgoJCQlyZXR1cm4gdWNzMmVuY29kZShvdXRwdXQpOwoJCX0KCgkJLyoqCgkJICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGEKCQkgKiBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJCSAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy4KCQkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuCgkJICovCgkJZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7CgkJCXZhciBuLAoJCQkgICAgZGVsdGEsCgkJCSAgICBoYW5kbGVkQ1BDb3VudCwKCQkJICAgIGJhc2ljTGVuZ3RoLAoJCQkgICAgYmlhcywKCQkJICAgIGosCgkJCSAgICBtLAoJCQkgICAgcSwKCQkJICAgIGssCgkJCSAgICB0LAoJCQkgICAgY3VycmVudFZhbHVlLAoJCQkgICAgb3V0cHV0ID0gW10sCgkJCSAgICAvKiogYGlucHV0TGVuZ3RoYCB3aWxsIGhvbGQgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyBpbiBgaW5wdXRgLiAqLwoJCQkgICAgaW5wdXRMZW5ndGgsCgkJCSAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi8KCQkJICAgIGhhbmRsZWRDUENvdW50UGx1c09uZSwKCQkJICAgIGJhc2VNaW51c1QsCgkJCSAgICBxTWludXNUOwoKCQkJLy8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZQoJCQlpbnB1dCA9IHVjczJkZWNvZGUoaW5wdXQpOwoKCQkJLy8gQ2FjaGUgdGhlIGxlbmd0aAoJCQlpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDsKCgkJCS8vIEluaXRpYWxpemUgdGhlIHN0YXRlCgkJCW4gPSBpbml0aWFsTjsKCQkJZGVsdGEgPSAwOwoJCQliaWFzID0gaW5pdGlhbEJpYXM7CgoJCQkvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzCgkJCWZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCQljdXJyZW50VmFsdWUgPSBpbnB1dFtqXTsKCQkJCWlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7CgkJCQkJb3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGN1cnJlbnRWYWx1ZSkpOwoJCQkJfQoJCQl9CgoJCQloYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDsKCgkJCS8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkOwoJCQkvLyBgYmFzaWNMZW5ndGhgIGlzIHRoZSBudW1iZXIgb2YgYmFzaWMgY29kZSBwb2ludHMuCgoJCQkvLyBGaW5pc2ggdGhlIGJhc2ljIHN0cmluZyAtIGlmIGl0IGlzIG5vdCBlbXB0eSAtIHdpdGggYSBkZWxpbWl0ZXIKCQkJaWYgKGJhc2ljTGVuZ3RoKSB7CgkJCQlvdXRwdXQucHVzaChkZWxpbWl0ZXIpOwoJCQl9CgoJCQkvLyBNYWluIGVuY29kaW5nIGxvb3A6CgkJCXdoaWxlIChoYW5kbGVkQ1BDb3VudCA8IGlucHV0TGVuZ3RoKSB7CgoJCQkJLy8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dAoJCQkJLy8gbGFyZ2VyIG9uZToKCQkJCWZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCQkJY3VycmVudFZhbHVlID0gaW5wdXRbal07CgkJCQkJaWYgKGN1cnJlbnRWYWx1ZSA+PSBuICYmIGN1cnJlbnRWYWx1ZSA8IG0pIHsKCQkJCQkJbSA9IGN1cnJlbnRWYWx1ZTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LAoJCQkJLy8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3cKCQkJCWhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTsKCQkJCWlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJZGVsdGEgKz0gKG0gLSBuKSAqIGhhbmRsZWRDUENvdW50UGx1c09uZTsKCQkJCW4gPSBtOwoKCQkJCWZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCQkJY3VycmVudFZhbHVlID0gaW5wdXRbal07CgoJCQkJCWlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHsKCQkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQkJfQoKCQkJCQlpZiAoY3VycmVudFZhbHVlID09IG4pIHsKCQkJCQkJLy8gUmVwcmVzZW50IGRlbHRhIGFzIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIKCQkJCQkJZm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkgewoJCQkJCQkJdCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7CgkJCQkJCQlpZiAocSA8IHQpIHsKCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJCXFNaW51c1QgPSBxIC0gdDsKCQkJCQkJCWJhc2VNaW51c1QgPSBiYXNlIC0gdDsKCQkJCQkJCW91dHB1dC5wdXNoKAoJCQkJCQkJCXN0cmluZ0Zyb21DaGFyQ29kZShkaWdpdFRvQmFzaWModCArIHFNaW51c1QgJSBiYXNlTWludXNULCAwKSkKCQkJCQkJCSk7CgkJCQkJCQlxID0gZmxvb3IocU1pbnVzVCAvIGJhc2VNaW51c1QpOwoJCQkJCQl9CgoJCQkJCQlvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHEsIDApKSk7CgkJCQkJCWJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7CgkJCQkJCWRlbHRhID0gMDsKCQkJCQkJKytoYW5kbGVkQ1BDb3VudDsKCQkJCQl9CgkJCQl9CgoJCQkJKytkZWx0YTsKCQkJCSsrbjsKCgkJCX0KCQkJcmV0dXJuIG91dHB1dC5qb2luKCcnKTsKCQl9CgoJCS8qKgoJCSAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MKCQkgKiB0byBVbmljb2RlLiBPbmx5IHRoZSBQdW55Y29kZWQgcGFydHMgb2YgdGhlIGlucHV0IHdpbGwgYmUgY29udmVydGVkLCBpLmUuCgkJICogaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgb24gYSBzdHJpbmcgdGhhdCBoYXMgYWxyZWFkeSBiZWVuCgkJICogY29udmVydGVkIHRvIFVuaWNvZGUuCgkJICogQG1lbWJlck9mIHB1bnljb2RlCgkJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZWQgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0bwoJCSAqIGNvbnZlcnQgdG8gVW5pY29kZS4KCQkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgVW5pY29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gUHVueWNvZGUKCQkgKiBzdHJpbmcuCgkJICovCgkJZnVuY3Rpb24gdG9Vbmljb2RlKGlucHV0KSB7CgkJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQkJcmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpCgkJCQkJPyBkZWNvZGUoc3RyaW5nLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpCgkJCQkJOiBzdHJpbmc7CgkJCX0pOwoJCX0KCgkJLyoqCgkJICogQ29udmVydHMgYSBVbmljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzIHRvCgkJICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsCgkJICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluCgkJICogQVNDSUkuCgkJICogQG1lbWJlck9mIHB1bnljb2RlCgkJICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGEKCQkgKiBVbmljb2RlIHN0cmluZy4KCQkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yCgkJICogZW1haWwgYWRkcmVzcy4KCQkgKi8KCQlmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7CgkJCXJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykgewoJCQkJcmV0dXJuIHJlZ2V4Tm9uQVNDSUkudGVzdChzdHJpbmcpCgkJCQkJPyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKQoJCQkJCTogc3RyaW5nOwoJCQl9KTsKCQl9CgoJCS8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCQkvKiogRGVmaW5lIHRoZSBwdWJsaWMgQVBJICovCgkJcHVueWNvZGUgPSB7CgkJCS8qKgoJCQkgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgUHVueWNvZGUuanMgdmVyc2lvbiBudW1iZXIuCgkJCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJCQkgKiBAdHlwZSBTdHJpbmcKCQkJICovCgkJCSd2ZXJzaW9uJzogJzEuMy4yJywKCQkJLyoqCgkJCSAqIEFuIG9iamVjdCBvZiBtZXRob2RzIHRvIGNvbnZlcnQgZnJvbSBKYXZhU2NyaXB0J3MgaW50ZXJuYWwgY2hhcmFjdGVyCgkJCSAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suCgkJCSAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPgoJCQkgKiBAbWVtYmVyT2YgcHVueWNvZGUKCQkJICogQHR5cGUgT2JqZWN0CgkJCSAqLwoJCQkndWNzMic6IHsKCQkJCSdkZWNvZGUnOiB1Y3MyZGVjb2RlLAoJCQkJJ2VuY29kZSc6IHVjczJlbmNvZGUKCQkJfSwKCQkJJ2RlY29kZSc6IGRlY29kZSwKCQkJJ2VuY29kZSc6IGVuY29kZSwKCQkJJ3RvQVNDSUknOiB0b0FTQ0lJLAoJCQkndG9Vbmljb2RlJzogdG9Vbmljb2RlCgkJfTsKCgkJLyoqIEV4cG9zZSBgcHVueWNvZGVgICovCgkJLy8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zCgkJLy8gbGlrZSB0aGUgZm9sbG93aW5nOgoJCWlmICgKCQkJdHJ1ZQoJCSkgewoJCQkhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gcHVueWNvZGU7CgkJCX0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7CgkJfSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7CgkJCWlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykgeyAvLyBpbiBOb2RlLmpzIG9yIFJpbmdvSlMgdjAuOC4wKwoJCQkJZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7CgkJCX0gZWxzZSB7IC8vIGluIE5hcndoYWwgb3IgUmluZ29KUyB2MC43LjAtCgkJCQlmb3IgKGtleSBpbiBwdW55Y29kZSkgewoJCQkJCXB1bnljb2RlLmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBwdW55Y29kZVtrZXldKTsKCQkJCX0KCQkJfQoJCX0gZWxzZSB7IC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXIKCQkJcm9vdC5wdW55Y29kZSA9IHB1bnljb2RlOwoJCX0KCgl9KHRoaXMpKTsKCgkvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg0MykobW9kdWxlKSwgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpCgovKioqLyB9LAovKiA0MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkgew0KCQlpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkgew0KCQkJbW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307DQoJCQltb2R1bGUucGF0aHMgPSBbXTsNCgkJCS8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdA0KCQkJbW9kdWxlLmNoaWxkcmVuID0gW107DQoJCQltb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTsNCgkJfQ0KCQlyZXR1cm4gbW9kdWxlOw0KCX0NCgoKLyoqKi8gfSwKLyogNDQgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCW1vZHVsZS5leHBvcnRzID0gewoJICBpc1N0cmluZzogZnVuY3Rpb24oYXJnKSB7CgkgICAgcmV0dXJuIHR5cGVvZihhcmcpID09PSAnc3RyaW5nJzsKCSAgfSwKCSAgaXNPYmplY3Q6IGZ1bmN0aW9uKGFyZykgewoJICAgIHJldHVybiB0eXBlb2YoYXJnKSA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwoJICB9LAoJICBpc051bGw6IGZ1bmN0aW9uKGFyZykgewoJICAgIHJldHVybiBhcmcgPT09IG51bGw7CgkgIH0sCgkgIGlzTnVsbE9yVW5kZWZpbmVkOiBmdW5jdGlvbihhcmcpIHsKCSAgICByZXR1cm4gYXJnID09IG51bGw7CgkgIH0KCX07CgoKLyoqKi8gfSwKLyogNDUgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCWV4cG9ydHMuZGVjb2RlID0gZXhwb3J0cy5wYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwoJZXhwb3J0cy5lbmNvZGUgPSBleHBvcnRzLnN0cmluZ2lmeSA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpOwoKCi8qKiovIH0sCi8qIDQ2ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCS8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgoJLy8KCS8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCgkvLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCgkvLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCgkvLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCgkvLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0CgkvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKCS8vIGZvbGxvd2luZyBjb25kaXRpb25zOgoJLy8KCS8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCgkvLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KCS8vCgkvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwoJLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgoJLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgoJLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCgkvLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKCS8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKCS8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgoJJ3VzZSBzdHJpY3QnOwoKCS8vIElmIG9iai5oYXNPd25Qcm9wZXJ0eSBoYXMgYmVlbiBvdmVycmlkZGVuLCB0aGVuIGNhbGxpbmcKCS8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLgoJLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MDcKCWZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkgewoJICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7Cgl9CgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihxcywgc2VwLCBlcSwgb3B0aW9ucykgewoJICBzZXAgPSBzZXAgfHwgJyYnOwoJICBlcSA9IGVxIHx8ICc9JzsKCSAgdmFyIG9iaiA9IHt9OwoKCSAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7CgkgICAgcmV0dXJuIG9iajsKCSAgfQoKCSAgdmFyIHJlZ2V4cCA9IC9cKy9nOwoJICBxcyA9IHFzLnNwbGl0KHNlcCk7CgoJICB2YXIgbWF4S2V5cyA9IDEwMDA7CgkgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLm1heEtleXMgPT09ICdudW1iZXInKSB7CgkgICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5czsKCSAgfQoKCSAgdmFyIGxlbiA9IHFzLmxlbmd0aDsKCSAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50CgkgIGlmIChtYXhLZXlzID4gMCAmJiBsZW4gPiBtYXhLZXlzKSB7CgkgICAgbGVuID0gbWF4S2V5czsKCSAgfQoKCSAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkgewoJICAgIHZhciB4ID0gcXNbaV0ucmVwbGFjZShyZWdleHAsICclMjAnKSwKCSAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSwKCSAgICAgICAga3N0ciwgdnN0ciwgaywgdjsKCgkgICAgaWYgKGlkeCA+PSAwKSB7CgkgICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTsKCSAgICAgIHZzdHIgPSB4LnN1YnN0cihpZHggKyAxKTsKCSAgICB9IGVsc2UgewoJICAgICAga3N0ciA9IHg7CgkgICAgICB2c3RyID0gJyc7CgkgICAgfQoKCSAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpOwoJICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodnN0cik7CgoJICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkgewoJICAgICAgb2JqW2tdID0gdjsKCSAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqW2tdKSkgewoJICAgICAgb2JqW2tdLnB1c2godik7CgkgICAgfSBlbHNlIHsKCSAgICAgIG9ialtrXSA9IFtvYmpba10sIHZdOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIG9iajsKCX07CgoKLyoqKi8gfSwKLyogNDcgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCgkvLwoJLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKCS8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKCS8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKCS8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKCS8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKCS8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQoJLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6CgkvLwoJLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKCS8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgoJLy8KCS8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCgkvLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCgkvLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCgkvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKCS8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgoJLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQoJLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCgkndXNlIHN0cmljdCc7CgoJdmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHsKCSAgc3dpdGNoICh0eXBlb2YgdikgewoJICAgIGNhc2UgJ3N0cmluZyc6CgkgICAgICByZXR1cm4gdjsKCgkgICAgY2FzZSAnYm9vbGVhbic6CgkgICAgICByZXR1cm4gdiA/ICd0cnVlJyA6ICdmYWxzZSc7CgoJICAgIGNhc2UgJ251bWJlcic6CgkgICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7CgoJICAgIGRlZmF1bHQ6CgkgICAgICByZXR1cm4gJyc7CgkgIH0KCX07CgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIHNlcCwgZXEsIG5hbWUpIHsKCSAgc2VwID0gc2VwIHx8ICcmJzsKCSAgZXEgPSBlcSB8fCAnPSc7CgkgIGlmIChvYmogPT09IG51bGwpIHsKCSAgICBvYmogPSB1bmRlZmluZWQ7CgkgIH0KCgkgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JykgewoJICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLm1hcChmdW5jdGlvbihrKSB7CgkgICAgICB2YXIga3MgPSBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKGspKSArIGVxOwoJICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqW2tdKSkgewoJICAgICAgICByZXR1cm4gb2JqW2tdLm1hcChmdW5jdGlvbih2KSB7CgkgICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7CgkgICAgICAgIH0pLmpvaW4oc2VwKTsKCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7CgkgICAgICB9CgkgICAgfSkuam9pbihzZXApOwoKCSAgfQoKCSAgaWYgKCFuYW1lKSByZXR1cm4gJyc7CgkgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG5hbWUpKSArIGVxICsKCSAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqKSk7Cgl9OwoKCi8qKiovIH0sCi8qIDQ4ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBodHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCgl2YXIgaHR0cHMgPSBtb2R1bGUuZXhwb3J0czsKCglmb3IgKHZhciBrZXkgaW4gaHR0cCkgewoJICAgIGlmIChodHRwLmhhc093blByb3BlcnR5KGtleSkpIGh0dHBzW2tleV0gPSBodHRwW2tleV07Cgl9OwoKCWh0dHBzLnJlcXVlc3QgPSBmdW5jdGlvbiAocGFyYW1zLCBjYikgewoJICAgIGlmICghcGFyYW1zKSBwYXJhbXMgPSB7fTsKCSAgICBwYXJhbXMuc2NoZW1lID0gJ2h0dHBzJzsKCSAgICBwYXJhbXMucHJvdG9jb2wgPSAnaHR0cHM6JzsKCSAgICByZXR1cm4gaHR0cC5yZXF1ZXN0LmNhbGwodGhpcywgcGFyYW1zLCBjYik7Cgl9CgoKLyoqKi8gfSwKLyogNDkgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIHFzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkKCXZhciBodHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KQoJdmFyIGh0dHBzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkKCXZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gUE9TVChvcHRpb25zLCBjYWxsYmFjaykgewoKCSAgLy8gcmVxdWlyZSBvcHRpb25zLnVybCBvciBmYWlsIG5vaXNpbHkgCgkgIGlmICghb3B0aW9ucy51cmwpIHsKCSAgICB0aHJvdyBFcnJvcignb3B0aW9ucy51cmwgcmVxdWlyZWQnKQoJICB9CgoJICAvLyBwYXJzZSBvdXQgdGhlIG9wdGlvbnMgZnJvbSBvcHRpb25zLnVybAoJICB2YXIgb3B0cyA9IHVybC5wYXJzZShvcHRpb25zLnVybCkKCSAgdmFyIG1ldGhvZCA9IG9wdHMucHJvdG9jb2wgPT09ICdodHRwczonPyBodHRwcy5yZXF1ZXN0IDogaHR0cC5yZXF1ZXN0CgkgIHZhciBkZWZhdWx0Q29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcKCgkgIG9wdHMubWV0aG9kID0gJ1BPU1QnCgkgIG9wdHMucmVqZWN0VW5hdXRob3JpemVkID0gZmFsc2UKCSAgb3B0cy5hZ2VudCA9IGZhbHNlCgkgIG9wdHMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fQoJICBvcHRzLmhlYWRlcnNbJ1VzZXItQWdlbnQnXSA9IG9wdHMuaGVhZGVyc1snVXNlci1BZ2VudCddIHx8ICd0aW55LWh0dHAnCgkgIG9wdHMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSBvcHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddIHx8IGRlZmF1bHRDb250ZW50VHlwZQoJICAvLyBvcHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKCSAgdmFyIHJlcUpTT04gPSBvcHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddLnN0YXJ0c1dpdGgoJ2FwcGxpY2F0aW9uL2pzb24nKQoJICB2YXIgcG9zdERhdGEgPSByZXFKU09OPyBKU09OLnN0cmluZ2lmeShvcHRpb25zLmRhdGEgfHwge30pIDogcXMuc3RyaW5naWZ5KG9wdGlvbnMuZGF0YSB8fCB7fSkKCgkgIC8vIG1ha2UgYSBQT1NUIHJlcXVlc3QKCSAgdmFyIHJlcSA9IG1ldGhvZChvcHRzLCBmdW5jdGlvbihyZXMpIHsKCSAgIAoJICAgIHZhciByYXdEYXRhID0gJycKCSAgICB2YXIgc3RhdHVzQ29kZSA9IHJlcy5zdGF0dXNDb2RlCgkgICAgdmFyIGNvbnRlbnRUeXBlID0gcmVzLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddCgkgICAgdmFyIGlzSlNPTiA9IGNvbnRlbnRUeXBlID09PSAnYXBwbGljYXRpb24vanNvbicKCgkgICAgaWYgKHN0YXR1c0NvZGUgIT09IDIwMCkgewoJICAgICAgY2FsbGJhY2soRXJyb3IoJ0dFVCBmYWlsZWQgd2l0aDogJyArIHN0YXR1c0NvZGUpKQoJICAgICAgcmVzLnJlc3VtZSgpCgkgICAgICByZXR1cm4KCSAgICB9CgkgCgkgICAgcmVzLnNldEVuY29kaW5nKCd1dGY4JykKCSAgICByZXMub24oJ2RhdGEnLCBmdW5jdGlvbihjaHVuaykgeyByYXdEYXRhICs9IGNodW5rIH0pCgkgICAgcmVzLm9uKCdlbmQnLCBmdW5jdGlvbih4KSB7CgkgICAgICB0cnkgewoJICAgICAgICB2YXIgcGFyc2VkRGF0YSA9IGlzSlNPTj8gSlNPTi5wYXJzZShyYXdEYXRhKSA6IHJhd0RhdGEKCSAgICAgICAgY2FsbGJhY2sobnVsbCwgcGFyc2VkRGF0YSkKCSAgICAgIH0gCgkgICAgICBjYXRjaCAoZSkgewoJICAgICAgICBjYWxsYmFjayhlLm1lc3NhZ2UpCgkgICAgICB9CgkgICAgfSkKCSAgfSkKCgkgIHJlcS5vbignZXJyb3InLCBmdW5jdGlvbihlKSB7IGNhbGxiYWNrKEVycm9yKGUubWVzc2FnZSkpIH0pCgoJICByZXEud3JpdGUocG9zdERhdGEpCgkgCgkgIHJlcS5lbmQoKQoJfQoKCi8qKiovIH0sCi8qIDUwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHZhbGlkYXRlOwoKCXZhciBfYXBpID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7CgoJdmFyIF9hcGkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBpKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWZ1bmN0aW9uIHZhbGlkYXRlKG1ldGhvZCwgcGFyYW1zKSB7CgkgIC8vIGdldCBhbGwgdGhlIHJlcXVyaWVkIHBhcmFtcyBmb3IgdGhpcyBtZXRob2QKCSAgdmFyIHJlcXVpcmVkID0gX2FwaTIuZGVmYXVsdFttZXRob2RdLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsKCSAgICByZXR1cm4gcGFyYW0ucmVxdWlyZWQgPT09ICdSZXF1aXJlZCc7CgkgIH0pOwoJICAvLyBjb2xsZWN0IGFueSBtaXNzaW5nIHBhcmFtcwoJICB2YXIgbWlzc2luZyA9IHJlcXVpcmVkLmZpbHRlcihmdW5jdGlvbiAocGFyYW0pIHsKCSAgICByZXR1cm4gdHlwZW9mIHBhcmFtc1twYXJhbS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCc7CgkgIH0pOwoJICAvLyBvcHRpbWlzaXRjYWxseSBhc3N1bWUgdGhlIGJlc3QKCSAgdmFyIGVyciA9IGZhbHNlOwoJICAvLyBidXQgaGF2ZSBhIHBsYW4gZm9yIHRoZSB3b3JzdAoJICBpZiAobWlzc2luZy5sZW5ndGgpIHsKCSAgICB2YXIgYnVsbGV0cyA9IG1pc3NpbmcubWFwKGZ1bmN0aW9uIChwYXJhbSkgewoJICAgICAgcmV0dXJuICctICcgKyBwYXJhbS5uYW1lICsgJyAuLi4gJyArIHBhcmFtLmRlc2NyaXB0aW9uOwoJICAgIH0pOwoJICAgIHZhciBtc2cgPSBtZXRob2QgKyAnIG1pc3NpbmcgcGFyYW1zOlxuJyArIGJ1bGxldHMuam9pbignXG4nKTsKCSAgICBlcnIgPSBFcnJvcihtc2cpOwoJICB9CgkgIHJldHVybiBlcnI7Cgl9IC8vCgkvLyB2YWxpZGF0ZSByZXR1cm5zIGFuIGVycm9yIG9iamVjdCBpZiBhbnkgcmVxdWlyZWQgcGFyYW1zIGFyZSBtaXNzaW5nCgkvLwoJLy8gZXhhbXBsZSB1c2FnZToKCS8vIAoJLy8gICAvLyB0b2tlbiBhbmQgaWQgYXJlIHJlcXVpcmVkIHBhcmFtcwoJLy8gICBmdW5jdGlvbiBhcGlDYWxsKHBhcmFtcywgY2FsbGJhY2spIHsgCgkvLyAgICAgbGV0IGVyciA9IHZhbGlkYXRlKCdhcGkuc2lnbmF0dXJlJywgcGFyYW1zKQoJLy8gICAgIGlmIChlcnIpIHsKCS8vICAgICAgIGNhbGxiYWNrKGVycikKCS8vICAgICB9CgkvLyAgICAgZWxzZSB7CgkvLyAgICAgICAvLyBkbyBhcGkgY2FsbAoJLy8gICAgIH0KCS8vICAgfQoJLy8KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogNTEgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7CgkJImFwaS50ZXN0IjogWwoJCQl7CgkJCQkibmFtZSI6ICJlcnJvciIsCgkJCQkiZXhhbXBsZSI6ICJteV9lcnJvciIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkVycm9yIHJlc3BvbnNlIHRvIHJldHVyblxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmb28iLAoJCQkJImV4YW1wbGUiOiAiYmFyIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiZXhhbXBsZSBwcm9wZXJ0eSB0byByZXR1cm5cbiIKCQkJfQoJCV0sCgkJImF1dGgucmV2b2tlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRlc3QiLAoJCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlNldHRpbmcgdGhpcyBwYXJhbWV0ZXIgdG8gMSB0cmlnZ2VycyBhIHRlc3RpbmcgbW9kZSB3aGVyZSB0aGUgc3BlY2lmaWVkIHRva2VuIHdpbGwgbm90IGFjdHVhbGx5IGJlIHJldm9rZWQuXG4iCgkJCX0KCQldLAoJCSJhdXRoLnRlc3QiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBpZGVudGlmeVxuIgoJCQl9CgkJXSwKCQkiYm90cy5pbmZvIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcnM6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJib3QiLAoJCQkJImV4YW1wbGUiOiAiQjEyMzQ1Njc4IiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQm90IHVzZXIgdG8gZ2V0IGluZm8gb25cbiIKCQkJfQoJCV0sCgkJImNoYW5uZWxzLmFyY2hpdmUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBhcmNoaXZlXG4iCgkJCX0KCQldLAoJCSJjaGFubmVscy5jcmVhdGUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJuYW1lIiwKCQkJCSJleGFtcGxlIjogIm15Y2hhbm5lbCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIk5hbWUgb2YgY2hhbm5lbCB0byBjcmVhdGVcbiIKCQkJfQoJCV0sCgkJImNoYW5uZWxzLmhpc3RvcnkiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczpoaXN0b3J5XG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIGZldGNoIGhpc3RvcnkgZm9yLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJsYXRlc3QiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PW5vdyIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRW5kIG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJvbGRlc3QiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkJImRlc2NyaXB0aW9uIjogIlN0YXJ0IG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJpbmNsdXNpdmUiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSBtZXNzYWdlcyB3aXRoIGxhdGVzdCBvciBvbGRlc3QgdGltZXN0YW1wIGluIHJlc3VsdHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNvdW50IiwKCQkJCSJleGFtcGxlIjogIjEwMCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MTAwIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgbWVzc2FnZXMgdG8gcmV0dXJuLCBiZXR3ZWVuIDEgYW5kIDEwMDAuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVucmVhZHMiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSB1bnJlYWRfY291bnRfZGlzcGxheSBpbiB0aGUgb3V0cHV0P1xuIgoJCQl9CgkJXSwKCQkiY2hhbm5lbHMuaW5mbyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOnJlYWRcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gZ2V0IGluZm8gb25cbiIKCQkJfQoJCV0sCgkJImNoYW5uZWxzLmludml0ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIGludml0ZSB1c2VyIHRvLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1c2VyIiwKCQkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVXNlciB0byBpbnZpdGUgdG8gY2hhbm5lbC5cbiIKCQkJfQoJCV0sCgkJImNoYW5uZWxzLmpvaW4iOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJuYW1lIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiTmFtZSBvZiBjaGFubmVsIHRvIGpvaW5cbiIKCQkJfQoJCV0sCgkJImNoYW5uZWxzLmtpY2siOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byByZW1vdmUgdXNlciBmcm9tLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1c2VyIiwKCQkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVXNlciB0byByZW1vdmUgZnJvbSBjaGFubmVsLlxuIgoJCQl9CgkJXSwKCQkiY2hhbm5lbHMubGVhdmUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBsZWF2ZVxuIgoJCQl9CgkJXSwKCQkiY2hhbm5lbHMubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOnJlYWRcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZXhjbHVkZV9hcmNoaXZlZCIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJEb24ndCByZXR1cm4gYXJjaGl2ZWQgY2hhbm5lbHMuXG4iCgkJCX0KCQldLAoJCSJjaGFubmVscy5tYXJrIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhbm5lbHM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gc2V0IHJlYWRpbmcgY3Vyc29yIGluLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0cyIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbW9zdCByZWNlbnRseSBzZWVuIG1lc3NhZ2UuXG4iCgkJCX0KCQldLAoJCSJjaGFubmVscy5yZW5hbWUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byByZW5hbWVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAibmFtZSIsCgkJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIk5ldyBuYW1lIGZvciBjaGFubmVsLlxuIgoJCQl9CgkJXSwKCQkiY2hhbm5lbHMucmVwbGllcyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOmhpc3RvcnlcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gZmV0Y2ggdGhyZWFkIGZyb21cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidGhyZWFkX3RzIiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVW5pcXVlIGlkZW50aWZpZXIgb2YgYSB0aHJlYWQncyBwYXJlbnQgbWVzc2FnZVxuIgoJCQl9CgkJXSwKCQkiY2hhbm5lbHMuc2V0UHVycG9zZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIHNldCB0aGUgcHVycG9zZSBvZlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJwdXJwb3NlIiwKCQkJCSJleGFtcGxlIjogIk15IFB1cnBvc2UiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgbmV3IHB1cnBvc2VcbiIKCQkJfQoJCV0sCgkJImNoYW5uZWxzLnNldFRvcGljIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhbm5lbHM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gc2V0IHRoZSB0b3BpYyBvZlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0b3BpYyIsCgkJCQkiZXhhbXBsZSI6ICJNeSBUb3BpYyIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoZSBuZXcgdG9waWNcbiIKCQkJfQoJCV0sCgkJImNoYW5uZWxzLnVuYXJjaGl2ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIHVuYXJjaGl2ZVxuIgoJCQl9CgkJXSwKCQkiY2hhdC5kZWxldGUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGF0OndyaXRlOmJvdCBvciBjaGF0OndyaXRlOnVzZXJcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidHMiLAoJCQkJImV4YW1wbGUiOiAiMTQwNTg5NDMyMi4wMDI3NjgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgZGVsZXRlZC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgY29udGFpbmluZyB0aGUgbWVzc2FnZSB0byBiZSBkZWxldGVkLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJhc191c2VyIiwKCQkJCSJleGFtcGxlIjogInRydWUiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJQYXNzIHRydWUgdG8gZGVsZXRlIHRoZSBtZXNzYWdlIGFzIHRoZSBhdXRoZWQgdXNlci4gQm90IHVzZXJzIGluIHRoaXMgY29udGV4dCBhcmUgY29uc2lkZXJlZCBhdXRoZWQgdXNlcnMuXG4iCgkJCX0KCQldLAoJCSJjaGF0Lm1lTWVzc2FnZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYXQ6d3JpdGU6dXNlclxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBzZW5kIG1lc3NhZ2UgdG8uIENhbiBiZSBhIHB1YmxpYyBjaGFubmVsLCBwcml2YXRlIGdyb3VwIG9yIElNIGNoYW5uZWwuIENhbiBiZSBhbiBlbmNvZGVkIElELCBvciBhIG5hbWUuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRleHQiLAoJCQkJImV4YW1wbGUiOiAiSGVsbG8gd29ybGQiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUZXh0IG9mIHRoZSBtZXNzYWdlIHRvIHNlbmQuXG4iCgkJCX0KCQldLAoJCSJjaGF0LnBvc3RNZXNzYWdlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhdDp3cml0ZTpib3Qgb3IgY2hhdDp3cml0ZTp1c2VyXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsLCBwcml2YXRlIGdyb3VwLCBvciBJTSBjaGFubmVsIHRvIHNlbmQgbWVzc2FnZSB0by4gQ2FuIGJlIGFuIGVuY29kZWQgSUQsIG9yIGEgbmFtZS4gU2VlIGJlbG93IGZvciBtb3JlIGRldGFpbHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRleHQiLAoJCQkJImV4YW1wbGUiOiAiSGVsbG8gd29ybGQiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUZXh0IG9mIHRoZSBtZXNzYWdlIHRvIHNlbmQuIFNlZSBiZWxvdyBmb3IgYW4gZXhwbGFuYXRpb24gb2YgZm9ybWF0dGluZy4gVGhpcyBmaWVsZCBpcyB1c3VhbGx5IHJlcXVpcmVkLCB1bmxlc3MgeW91J3JlIHByb3ZpZGluZyBvbmx5IGF0dGFjaG1lbnRzIGluc3RlYWQuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInBhcnNlIiwKCQkJCSJleGFtcGxlIjogImZ1bGwiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFuZ2UgaG93IG1lc3NhZ2VzIGFyZSB0cmVhdGVkLiBEZWZhdWx0cyB0byBub25lLiBTZWUgYmVsb3cuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImxpbmtfbmFtZXMiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbmQgYW5kIGxpbmsgY2hhbm5lbCBuYW1lcyBhbmQgdXNlcm5hbWVzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJhdHRhY2htZW50cyIsCgkJCQkiZXhhbXBsZSI6ICJbe1wicHJldGV4dFwiOiBcInByZS1oZWxsb1wiLCBcInRleHRcIjogXCJ0ZXh0LXdvcmxkXCJ9XSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlN0cnVjdHVyZWQgbWVzc2FnZSBhdHRhY2htZW50cy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidW5mdXJsX2xpbmtzIiwKCQkJCSJleGFtcGxlIjogInRydWUiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJQYXNzIHRydWUgdG8gZW5hYmxlIHVuZnVybGluZyBvZiBwcmltYXJpbHkgdGV4dC1iYXNlZCBjb250ZW50LlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1bmZ1cmxfbWVkaWEiLAoJCQkJImV4YW1wbGUiOiAiZmFsc2UiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJQYXNzIGZhbHNlIHRvIGRpc2FibGUgdW5mdXJsaW5nIG9mIG1lZGlhIGNvbnRlbnQuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXJuYW1lIiwKCQkJCSJleGFtcGxlIjogIk15IEJvdCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlNldCB5b3VyIGJvdCdzIHVzZXIgbmFtZS4gTXVzdCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYXNfdXNlciBzZXQgdG8gZmFsc2UsIG90aGVyd2lzZSBpZ25vcmVkLiBTZWUgYXV0aG9yc2hpcCBiZWxvdy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiYXNfdXNlciIsCgkJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUGFzcyB0cnVlIHRvIHBvc3QgdGhlIG1lc3NhZ2UgYXMgdGhlIGF1dGhlZCB1c2VyLCBpbnN0ZWFkIG9mIGFzIGEgYm90LiBEZWZhdWx0cyB0byBmYWxzZS4gU2VlIGF1dGhvcnNoaXAgYmVsb3cuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImljb25fdXJsIiwKCQkJCSJleGFtcGxlIjogImh0dHA6Ly9sb3JlbXBpeGVsLmNvbS80OC80OCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlVSTCB0byBhbiBpbWFnZSB0byB1c2UgYXMgdGhlIGljb24gZm9yIHRoaXMgbWVzc2FnZS4gTXVzdCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYXNfdXNlciBzZXQgdG8gZmFsc2UsIG90aGVyd2lzZSBpZ25vcmVkLiBTZWUgYXV0aG9yc2hpcCBiZWxvdy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiaWNvbl9lbW9qaSIsCgkJCQkiZXhhbXBsZSI6ICI6Y2hhcnRfd2l0aF91cHdhcmRzX3RyZW5kOiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkVtb2ppIHRvIHVzZSBhcyB0aGUgaWNvbiBmb3IgdGhpcyBtZXNzYWdlLiBPdmVycmlkZXMgaWNvbl91cmwuIE11c3QgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGFzX3VzZXIgc2V0IHRvIGZhbHNlLCBvdGhlcndpc2UgaWdub3JlZC4gU2VlIGF1dGhvcnNoaXAgYmVsb3cuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRocmVhZF90cyIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlByb3ZpZGUgYW5vdGhlciBtZXNzYWdlJ3MgdHMgdmFsdWUgdG8gbWFrZSB0aGlzIG1lc3NhZ2UgYSByZXBseS4gQXZvaWQgdXNpbmcgYSByZXBseSdzIHRzIHZhbHVlOyB1c2UgaXRzIHBhcmVudCBpbnN0ZWFkLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJyZXBseV9icm9hZGNhc3QiLAoJCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aHJlYWRfdHMgYW5kIGluZGljYXRlcyB3aGV0aGVyIHJlcGx5IHNob3VsZCBiZSBtYWRlIHZpc2libGUgdG8gZXZlcnlvbmUgaW4gdGhlIGNoYW5uZWwgb3IgY29udmVyc2F0aW9uLiBEZWZhdWx0cyB0byBmYWxzZS5cbiIKCQkJfQoJCV0sCgkJImNoYXQudXBkYXRlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhdDp3cml0ZTpib3Qgb3IgY2hhdDp3cml0ZTp1c2VyXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRzIiwKCQkJCSJleGFtcGxlIjogIjE0MDU4OTQzMjIuMDAyNzY4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtZXNzYWdlIHRvIGJlIHVwZGF0ZWQuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIGNvbnRhaW5pbmcgdGhlIG1lc3NhZ2UgdG8gYmUgdXBkYXRlZC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidGV4dCIsCgkJCQkiZXhhbXBsZSI6ICJIZWxsbyB3b3JsZCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIk5ldyB0ZXh0IGZvciB0aGUgbWVzc2FnZSwgdXNpbmcgdGhlIGRlZmF1bHQgZm9ybWF0dGluZyBydWxlcy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiYXR0YWNobWVudHMiLAoJCQkJImV4YW1wbGUiOiAiW3tcInByZXRleHRcIjogXCJwcmUtaGVsbG9cIiwgXCJ0ZXh0XCI6IFwidGV4dC13b3JsZFwifV0iLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJTdHJ1Y3R1cmVkIG1lc3NhZ2UgYXR0YWNobWVudHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInBhcnNlIiwKCQkJCSJleGFtcGxlIjogIm5vbmUiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFuZ2UgaG93IG1lc3NhZ2VzIGFyZSB0cmVhdGVkLiBEZWZhdWx0cyB0byBjbGllbnQsIHVubGlrZSBjaGF0LnBvc3RNZXNzYWdlLiBTZWUgYmVsb3cuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImxpbmtfbmFtZXMiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbmQgYW5kIGxpbmsgY2hhbm5lbCBuYW1lcyBhbmQgdXNlcm5hbWVzLiBEZWZhdWx0cyB0byBub25lLiBUaGlzIHBhcmFtZXRlciBzaG91bGQgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHBhcnNlLiBUbyBzZXQgbGlua19uYW1lcyB0byAxLCBzcGVjaWZ5IGEgcGFyc2UgbW9kZSBvZiBmdWxsLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJhc191c2VyIiwKCQkJCSJleGFtcGxlIjogInRydWUiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJQYXNzIHRydWUgdG8gdXBkYXRlIHRoZSBtZXNzYWdlIGFzIHRoZSBhdXRoZWQgdXNlci4gQm90IHVzZXJzIGluIHRoaXMgY29udGV4dCBhcmUgY29uc2lkZXJlZCBhdXRoZWQgdXNlcnMuXG4iCgkJCX0KCQldLAoJCSJkbmQuZW5kRG5kIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZG5kOndyaXRlXG4iCgkJCX0KCQldLAoJCSJkbmQuZW5kU25vb3plIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZG5kOndyaXRlXG4iCgkJCX0KCQldLAoJCSJkbmQuaW5mbyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGRuZDpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIGZldGNoIHN0YXR1cyBmb3IgKGRlZmF1bHRzIHRvIGN1cnJlbnQgdXNlcilcbiIKCQkJfQoJCV0sCgkJImRuZC5zZXRTbm9vemUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBkbmQ6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAibnVtX21pbnV0ZXMiLAoJCQkJImV4YW1wbGUiOiAiNjAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgbWludXRlcywgZnJvbSBub3csIHRvIHNub296ZSB1bnRpbC5cbiIKCQkJfQoJCV0sCgkJImRuZC50ZWFtSW5mbyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGRuZDpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXJzIiwKCQkJCSJleGFtcGxlIjogIlUxMjM0LFU0NTY3IiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgdXNlcnMgdG8gZmV0Y2ggRG8gTm90IERpc3R1cmIgc3RhdHVzIGZvclxuIgoJCQl9CgkJXSwKCQkiZW1vamkubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGVtb2ppOnJlYWRcbiIKCQkJfQoJCV0sCgkJImZpbGVzLmNvbW1lbnRzLmFkZCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGZpbGVzOndyaXRlOnVzZXJcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZSIsCgkJCQkiZXhhbXBsZSI6ICJGMTIzNDQ2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gYWRkIGEgY29tbWVudCB0by5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY29tbWVudCIsCgkJCQkiZXhhbXBsZSI6ICJFdmVyeW9uZSBzaG91bGQgdGFrZSBhIG1vbWVudCB0byByZWFkIHRoaXMgZmlsZS4iLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUZXh0IG9mIHRoZSBjb21tZW50IHRvIGFkZC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDQ2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgaWQgKGVuY29kZWQpIG9mIHdoaWNoIGxvY2F0aW9uIHRvIGFzc29jaWF0ZSB3aXRoIHRoZSBuZXcgY29tbWVudC5cbiIKCQkJfQoJCV0sCgkJImZpbGVzLmNvbW1lbnRzLmRlbGV0ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGZpbGVzOndyaXRlOnVzZXJcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZSIsCgkJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gZGVsZXRlIGEgY29tbWVudCBmcm9tLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJpZCIsCgkJCQkiZXhhbXBsZSI6ICJGYzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgY29tbWVudCB0byBkZWxldGUuXG4iCgkJCX0KCQldLAoJCSJmaWxlcy5jb21tZW50cy5lZGl0IjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZmlsZXM6d3JpdGU6dXNlclxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmaWxlIiwKCQkJCSJleGFtcGxlIjogIkYxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSBjb250YWluaW5nIHRoZSBjb21tZW50IHRvIGVkaXQuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImlkIiwKCQkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoZSBjb21tZW50IHRvIGVkaXQuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNvbW1lbnQiLAoJCQkJImV4YW1wbGUiOiAiRXZlcnlvbmUgc2hvdWxkIHRha2UgYSBtb21lbnQgdG8gcmVhZCB0aGlzIGZpbGUsIHNlcmlvdXNseS4iLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUZXh0IG9mIHRoZSBjb21tZW50IHRvIGVkaXQuXG4iCgkJCX0KCQldLAoJCSJmaWxlcy5kZWxldGUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczp3cml0ZTp1c2VyXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZpbGUiLAoJCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJRCBvZiBmaWxlIHRvIGRlbGV0ZS5cbiIKCQkJfQoJCV0sCgkJImZpbGVzLmluZm8iOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZpbGUiLAoJCQkJImV4YW1wbGUiOiAiRjIxNDc0ODM4NjIiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJTcGVjaWZ5IGEgZmlsZSBieSBwcm92aWRpbmcgaXRzIElELlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MTAwIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuIHBlciBwYWdlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJwYWdlIiwKCQkJCSJleGFtcGxlIjogIjIiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEiLAoJCQkJImRlc2NyaXB0aW9uIjogIlBhZ2UgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuIgoJCQl9CgkJXSwKCQkiZmlsZXMubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGZpbGVzOnJlYWRcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidXNlciIsCgkJCQkiZXhhbXBsZSI6ICJVMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbHRlciBmaWxlcyBjcmVhdGVkIGJ5IGEgc2luZ2xlIHVzZXIuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgZmlsZXMgYXBwZWFyaW5nIGluIGEgc3BlY2lmaWMgY2hhbm5lbCwgaW5kaWNhdGVkIGJ5IGl0cyBJRC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidHNfZnJvbSIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbHRlciBmaWxlcyBjcmVhdGVkIGFmdGVyIHRoaXMgdGltZXN0YW1wIChpbmNsdXNpdmUpLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0c190byIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PW5vdyIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsdGVyIGZpbGVzIGNyZWF0ZWQgYmVmb3JlIHRoaXMgdGltZXN0YW1wIChpbmNsdXNpdmUpLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0eXBlcyIsCgkJCQkiZXhhbXBsZSI6ICJpbWFnZXMiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PWFsbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsdGVyIGZpbGVzIGJ5IHR5cGU6XG5cblxuYWxsIC0gQWxsIGZpbGVzXG5zcGFjZXMgLSBQb3N0c1xuc25pcHBldHMgLSBTbmlwcGV0c1xuaW1hZ2VzIC0gSW1hZ2UgZmlsZXNcbmdkb2NzIC0gR29vZ2xlIGRvY3NcbnppcHMgLSBaaXAgZmlsZXNcbnBkZnMgLSBQREYgZmlsZXNcblxuXG5Zb3UgY2FuIHBhc3MgbXVsdGlwbGUgdmFsdWVzIGluIHRoZSB0eXBlcyBhcmd1bWVudCwgbGlrZSB0eXBlcz1zcGFjZXMsc25pcHBldHMuVGhlIGRlZmF1bHQgdmFsdWUgaXMgYWxsLCB3aGljaCBkb2VzIG5vdCBmaWx0ZXIgdGhlIGxpc3QuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNvdW50IiwKCQkJCSJleGFtcGxlIjogIjIwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkJImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBpdGVtcyB0byByZXR1cm4gcGVyIHBhZ2UuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInBhZ2UiLAoJCQkJImV4YW1wbGUiOiAiMiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUGFnZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4iCgkJCX0KCQldLAoJCSJmaWxlcy5yZXZva2VQdWJsaWNVUkwiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczp3cml0ZTp1c2VyXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZpbGUiLAoJCQkJImV4YW1wbGUiOiAiRjEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIHJldm9rZVxuIgoJCQl9CgkJXSwKCQkiZmlsZXMuc2hhcmVkUHVibGljVVJMIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZmlsZXM6d3JpdGU6dXNlclxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmaWxlIiwKCQkJCSJleGFtcGxlIjogIkYxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSB0byBzaGFyZVxuIgoJCQl9CgkJXSwKCQkiZmlsZXMudXBsb2FkIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZmlsZXM6d3JpdGU6dXNlclxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmaWxlIiwKCQkJCSJleGFtcGxlIjogIi4uLiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29udGVudHMgdmlhIG11bHRpcGFydC9mb3JtLWRhdGEuIElmIG9taXR0aW5nIHRoaXMgcGFyYW1ldGVyLCB5b3UgbXVzdCBzdWJtaXQgY29udGVudC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY29udGVudCIsCgkJCQkiZXhhbXBsZSI6ICIuLi4iLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIGNvbnRlbnRzIHZpYSBhIFBPU1QgdmFyaWFibGUuIElmIG9taXR0aW5nIHRoaXMgcGFyYW1ldGVyLCB5b3UgbXVzdCBwcm92aWRlIGEgZmlsZS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZXR5cGUiLAoJCQkJImV4YW1wbGUiOiAicGhwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQSBmaWxlIHR5cGUgaWRlbnRpZmllci5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZW5hbWUiLAoJCQkJImV4YW1wbGUiOiAiZm9vLnR4dCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGVuYW1lIG9mIGZpbGUuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRpdGxlIiwKCQkJCSJleGFtcGxlIjogIk15IEZpbGUiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaXRsZSBvZiBmaWxlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJpbml0aWFsX2NvbW1lbnQiLAoJCQkJImV4YW1wbGUiOiAiQmVzdCEiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJbml0aWFsIGNvbW1lbnQgdG8gYWRkIHRvIGZpbGUuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWxzIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgY2hhbm5lbCBuYW1lcyBvciBJRHMgd2hlcmUgdGhlIGZpbGUgd2lsbCBiZSBzaGFyZWQuXG4iCgkJCX0KCQldLAoJCSJncm91cHMuYXJjaGl2ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIGFyY2hpdmVcbiIKCQkJfQoJCV0sCgkJImdyb3Vwcy5jbG9zZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIGNsb3NlLlxuIgoJCQl9CgkJXSwKCQkiZ3JvdXBzLmNyZWF0ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJuYW1lIiwKCQkJCSJleGFtcGxlIjogIsKgIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiTmFtZSBvZiBwcml2YXRlIGNoYW5uZWwgdG8gY3JlYXRlXG4iCgkJCX0KCQldLAoJCSJncm91cHMuY3JlYXRlQ2hpbGQiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBjbG9uZSBhbmQgYXJjaGl2ZS5cbiIKCQkJfQoJCV0sCgkJImdyb3Vwcy5oaXN0b3J5IjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOmhpc3RvcnlcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBmZXRjaCBoaXN0b3J5IGZvci5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAibGF0ZXN0IiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1ub3ciLAoJCQkJImRlc2NyaXB0aW9uIjogIkVuZCBvZiB0aW1lIHJhbmdlIG9mIG1lc3NhZ2VzIHRvIGluY2x1ZGUgaW4gcmVzdWx0cy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAib2xkZXN0IiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJTdGFydCBvZiB0aW1lIHJhbmdlIG9mIG1lc3NhZ2VzIHRvIGluY2x1ZGUgaW4gcmVzdWx0cy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiaW5jbHVzaXZlIiwKCQkJCSJleGFtcGxlIjogIjEiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgbWVzc2FnZXMgd2l0aCBsYXRlc3Qgb3Igb2xkZXN0IHRpbWVzdGFtcCBpbiByZXN1bHRzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIxMDAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEwMCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIG1lc3NhZ2VzIHRvIHJldHVybiwgYmV0d2VlbiAxIGFuZCAxMDAwLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1bnJlYWRzIiwKCQkJCSJleGFtcGxlIjogIjEiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdW5yZWFkX2NvdW50X2Rpc3BsYXkgaW4gdGhlIG91dHB1dD9cbiIKCQkJfQoJCV0sCgkJImdyb3Vwcy5pbmZvIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOnJlYWRcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBnZXQgaW5mbyBvblxuIgoJCQl9CgkJXSwKCQkiZ3JvdXBzLmludml0ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIGludml0ZSB1c2VyIHRvLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1c2VyIiwKCQkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVXNlciB0byBpbnZpdGUuXG4iCgkJCX0KCQldLAoJCSJncm91cHMua2ljayI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIHJlbW92ZSB1c2VyIGZyb20uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIHJlbW92ZSBmcm9tIHByaXZhdGUgY2hhbm5lbC5cbiIKCQkJfQoJCV0sCgkJImdyb3Vwcy5sZWF2ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIGxlYXZlXG4iCgkJCX0KCQldLAoJCSJncm91cHMubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3VwczpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImV4Y2x1ZGVfYXJjaGl2ZWQiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRG9uJ3QgcmV0dXJuIGFyY2hpdmVkIHByaXZhdGUgY2hhbm5lbHMuXG4iCgkJCX0KCQldLAoJCSJncm91cHMubWFyayI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIHNldCByZWFkaW5nIGN1cnNvciBpbi5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidHMiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1vc3QgcmVjZW50bHkgc2VlbiBtZXNzYWdlLlxuIgoJCQl9CgkJXSwKCQkiZ3JvdXBzLm9wZW4iOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBvcGVuLlxuIgoJCQl9CgkJXSwKCQkiZ3JvdXBzLnJlbmFtZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIHJlbmFtZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJuYW1lIiwKCQkJCSJleGFtcGxlIjogIsKgIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiTmV3IG5hbWUgZm9yIHByaXZhdGUgY2hhbm5lbC5cbiIKCQkJfQoJCV0sCgkJImdyb3Vwcy5yZXBsaWVzIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOmhpc3RvcnlcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBmZXRjaCB0aHJlYWQgZnJvbVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0aHJlYWRfdHMiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJVbmlxdWUgaWRlbnRpZmllciBvZiBhIHRocmVhZCdzIHBhcmVudCBtZXNzYWdlXG4iCgkJCX0KCQldLAoJCSJncm91cHMuc2V0UHVycG9zZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIHNldCB0aGUgcHVycG9zZSBvZlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJwdXJwb3NlIiwKCQkJCSJleGFtcGxlIjogIk15IFB1cnBvc2UiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgbmV3IHB1cnBvc2VcbiIKCQkJfQoJCV0sCgkJImdyb3Vwcy5zZXRUb3BpYyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIHNldCB0aGUgdG9waWMgb2ZcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidG9waWMiLAoJCQkJImV4YW1wbGUiOiAiTXkgVG9waWMiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgbmV3IHRvcGljXG4iCgkJCX0KCQldLAoJCSJncm91cHMudW5hcmNoaXZlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiRzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJQcml2YXRlIGNoYW5uZWwgdG8gdW5hcmNoaXZlXG4iCgkJCX0KCQldLAoJCSJpbS5jbG9zZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGltOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiRDEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJEaXJlY3QgbWVzc2FnZSBjaGFubmVsIHRvIGNsb3NlLlxuIgoJCQl9CgkJXSwKCQkiaW0uaGlzdG9yeSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGltOmhpc3RvcnlcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJEMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkRpcmVjdCBtZXNzYWdlIGNoYW5uZWwgdG8gZmV0Y2ggaGlzdG9yeSBmb3IuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImxhdGVzdCIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9bm93IiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJFbmQgb2YgdGltZSByYW5nZSBvZiBtZXNzYWdlcyB0byBpbmNsdWRlIGluIHJlc3VsdHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogIm9sZGVzdCIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiU3RhcnQgb2YgdGltZSByYW5nZSBvZiBtZXNzYWdlcyB0byBpbmNsdWRlIGluIHJlc3VsdHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1c2l2ZSIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIG1lc3NhZ2VzIHdpdGggbGF0ZXN0IG9yIG9sZGVzdCB0aW1lc3RhbXAgaW4gcmVzdWx0cy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY291bnQiLAoJCQkJImV4YW1wbGUiOiAiMTAwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkJImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBtZXNzYWdlcyB0byByZXR1cm4sIGJldHdlZW4gMSBhbmQgMTAwMC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidW5yZWFkcyIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIHVucmVhZF9jb3VudF9kaXNwbGF5IGluIHRoZSBvdXRwdXQ/XG4iCgkJCX0KCQldLAoJCSJpbS5saXN0IjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogaW06cmVhZFxuIgoJCQl9CgkJXSwKCQkiaW0ubWFyayI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGltOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiRDEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJEaXJlY3QgbWVzc2FnZSBjaGFubmVsIHRvIHNldCByZWFkaW5nIGN1cnNvciBpbi5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidHMiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1vc3QgcmVjZW50bHkgc2VlbiBtZXNzYWdlLlxuIgoJCQl9CgkJXSwKCQkiaW0ub3BlbiI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGltOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIG9wZW4gYSBkaXJlY3QgbWVzc2FnZSBjaGFubmVsIHdpdGguXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInJldHVybl9pbSIsCgkJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkJvb2xlYW4sIGluZGljYXRlcyB5b3Ugd2FudCB0aGUgZnVsbCBJTSBjaGFubmVsIGRlZmluaXRpb24gaW4gdGhlIHJlc3BvbnNlLlxuIgoJCQl9CgkJXSwKCQkiaW0ucmVwbGllcyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGltOmhpc3RvcnlcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkRpcmVjdCBtZXNzYWdlIGNoYW5uZWwgdG8gZmV0Y2ggdGhyZWFkIGZyb21cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidGhyZWFkX3RzIiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVW5pcXVlIGlkZW50aWZpZXIgb2YgYSB0aHJlYWQncyBwYXJlbnQgbWVzc2FnZVxuIgoJCQl9CgkJXSwKCQkibXBpbS5jbG9zZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IG1waW06d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIk1QSU0gdG8gY2xvc2UuXG4iCgkJCX0KCQldLAoJCSJtcGltLmhpc3RvcnkiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBtcGltOmhpc3RvcnlcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIk11bHRpcGFydHkgZGlyZWN0IG1lc3NhZ2UgdG8gZmV0Y2ggaGlzdG9yeSBmb3IuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImxhdGVzdCIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9bm93IiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJFbmQgb2YgdGltZSByYW5nZSBvZiBtZXNzYWdlcyB0byBpbmNsdWRlIGluIHJlc3VsdHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogIm9sZGVzdCIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiU3RhcnQgb2YgdGltZSByYW5nZSBvZiBtZXNzYWdlcyB0byBpbmNsdWRlIGluIHJlc3VsdHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1c2l2ZSIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIG1lc3NhZ2VzIHdpdGggbGF0ZXN0IG9yIG9sZGVzdCB0aW1lc3RhbXAgaW4gcmVzdWx0cy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY291bnQiLAoJCQkJImV4YW1wbGUiOiAiMTAwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkJImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBtZXNzYWdlcyB0byByZXR1cm4sIGJldHdlZW4gMSBhbmQgMTAwMC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidW5yZWFkcyIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIHVucmVhZF9jb3VudF9kaXNwbGF5IGluIHRoZSBvdXRwdXQ/XG4iCgkJCX0KCQldLAoJCSJtcGltLmxpc3QiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBtcGltOnJlYWRcbiIKCQkJfQoJCV0sCgkJIm1waW0ubWFyayI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IG1waW06d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIm11bHRpcGFydHkgZGlyZWN0IG1lc3NhZ2UgY2hhbm5lbCB0byBzZXQgcmVhZGluZyBjdXJzb3IgaW4uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRzIiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtb3N0IHJlY2VudGx5IHNlZW4gbWVzc2FnZS5cbiIKCQkJfQoJCV0sCgkJIm1waW0ub3BlbiI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IG1waW06d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidXNlcnMiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAsVTIzNDU2Nzg5MDEsVTM0NTY3ODkwMTIiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDb21tYSBzZXBhcmF0ZWQgbGlzdHMgb2YgdXNlcnMuICBUaGUgb3JkZXJpbmcgb2YgdGhlIHVzZXJzIGlzIHByZXNlcnZlZCB3aGVuZXZlciBhIE1QSU0gZ3JvdXAgaXMgcmV0dXJuZWQuXG4iCgkJCX0KCQldLAoJCSJtcGltLnJlcGxpZXMiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBtcGltOmhpc3RvcnlcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIk11bHRpcGFydHkgZGlyZWN0IG1lc3NhZ2UgY2hhbm5lbCB0byBmZXRjaCB0aHJlYWQgZnJvbS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidGhyZWFkX3RzIiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVW5pcXVlIGlkZW50aWZpZXIgb2YgYSB0aHJlYWQncyBwYXJlbnQgbWVzc2FnZS5cbiIKCQkJfQoJCV0sCgkJIm9hdXRoLmFjY2VzcyI6IFsKCQkJewoJCQkJIm5hbWUiOiAiY2xpZW50X2lkIiwKCQkJCSJleGFtcGxlIjogIjRiMzllOS03NTJjNCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIklzc3VlZCB3aGVuIHlvdSBjcmVhdGVkIHlvdXIgYXBwbGljYXRpb24uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNsaWVudF9zZWNyZXQiLAoJCQkJImV4YW1wbGUiOiAiMzNmZWEwMTEzZjViMSIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIklzc3VlZCB3aGVuIHlvdSBjcmVhdGVkIHlvdXIgYXBwbGljYXRpb24uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNvZGUiLAoJCQkJImV4YW1wbGUiOiAiY2NkYWE3MmFkIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVGhlIGNvZGUgcGFyYW0gcmV0dXJuZWQgdmlhIHRoZSBPQXV0aCBjYWxsYmFjay5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAicmVkaXJlY3RfdXJpIiwKCQkJCSJleGFtcGxlIjogImh0dHA6Ly9leGFtcGxlLmNvbSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoaXMgbXVzdCBtYXRjaCB0aGUgb3JpZ2luYWxseSBzdWJtaXR0ZWQgVVJJIChpZiBvbmUgd2FzIHNlbnQpLlxuIgoJCQl9CgkJXSwKCQkicGlucy5hZGQiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBwaW5zOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIHBpbiB0aGUgaXRlbSBpbi5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZSIsCgkJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gcGluLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmaWxlX2NvbW1lbnQiLAoJCQkJImV4YW1wbGUiOiAiRmMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSBjb21tZW50IHRvIHBpbi5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidGltZXN0YW1wIiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtZXNzYWdlIHRvIHBpbi5cbiIKCQkJfQoJCV0sCgkJInBpbnMubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHBpbnM6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBnZXQgcGlubmVkIGl0ZW1zIGZvci5cbiIKCQkJfQoJCV0sCgkJInBpbnMucmVtb3ZlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcGluczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB3aGVyZSB0aGUgaXRlbSBpcyBwaW5uZWQgdG8uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZpbGUiLAoJCQkJImV4YW1wbGUiOiAiRjEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIHVuLXBpbi5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZV9jb21tZW50IiwKCQkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29tbWVudCB0byB1bi1waW4uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRpbWVzdGFtcCIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbWVzc2FnZSB0byB1bi1waW4uXG4iCgkJCX0KCQldLAoJCSJyZWFjdGlvbnMuYWRkIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcmVhY3Rpb25zOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogIm5hbWUiLAoJCQkJImV4YW1wbGUiOiAidGh1bWJzdXAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJSZWFjdGlvbiAoZW1vamkpIG5hbWUuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZpbGUiLAoJCQkJImV4YW1wbGUiOiAiRjEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIGFkZCByZWFjdGlvbiB0by5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZV9jb21tZW50IiwKCQkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29tbWVudCB0byBhZGQgcmVhY3Rpb24gdG8uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHdoZXJlIHRoZSBtZXNzYWdlIHRvIGFkZCByZWFjdGlvbiB0byB3YXMgcG9zdGVkLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0aW1lc3RhbXAiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1lc3NhZ2UgdG8gYWRkIHJlYWN0aW9uIHRvLlxuIgoJCQl9CgkJXSwKCQkicmVhY3Rpb25zLmdldCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlYWN0aW9uczpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZpbGUiLAoJCQkJImV4YW1wbGUiOiAiRjEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIGdldCByZWFjdGlvbnMgZm9yLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmaWxlX2NvbW1lbnQiLAoJCQkJImV4YW1wbGUiOiAiRmMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSBjb21tZW50IHRvIGdldCByZWFjdGlvbnMgZm9yLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB3aGVyZSB0aGUgbWVzc2FnZSB0byBnZXQgcmVhY3Rpb25zIGZvciB3YXMgcG9zdGVkLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0aW1lc3RhbXAiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1lc3NhZ2UgdG8gZ2V0IHJlYWN0aW9ucyBmb3IuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZ1bGwiLAoJCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJZiB0cnVlIGFsd2F5cyByZXR1cm4gdGhlIGNvbXBsZXRlIHJlYWN0aW9uIGxpc3QuXG4iCgkJCX0KCQldLAoJCSJyZWFjdGlvbnMubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlYWN0aW9uczpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJTaG93IHJlYWN0aW9ucyBtYWRlIGJ5IHRoaXMgdXNlci4gRGVmYXVsdHMgdG8gdGhlIGF1dGhlZCB1c2VyLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmdWxsIiwKCQkJCSJleGFtcGxlIjogIsKgIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiSWYgdHJ1ZSBhbHdheXMgcmV0dXJuIHRoZSBjb21wbGV0ZSByZWFjdGlvbiBsaXN0LlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MTAwIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuIHBlciBwYWdlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJwYWdlIiwKCQkJCSJleGFtcGxlIjogIjIiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEiLAoJCQkJImRlc2NyaXB0aW9uIjogIlBhZ2UgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuIgoJCQl9CgkJXSwKCQkicmVhY3Rpb25zLnJlbW92ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlYWN0aW9uczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJuYW1lIiwKCQkJCSJleGFtcGxlIjogInRodW1ic3VwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUmVhY3Rpb24gKGVtb2ppKSBuYW1lLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJmaWxlIiwKCQkJCSJleGFtcGxlIjogIkYxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSB0byByZW1vdmUgcmVhY3Rpb24gZnJvbS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZV9jb21tZW50IiwKCQkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29tbWVudCB0byByZW1vdmUgcmVhY3Rpb24gZnJvbS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgd2hlcmUgdGhlIG1lc3NhZ2UgdG8gcmVtb3ZlIHJlYWN0aW9uIGZyb20gd2FzIHBvc3RlZC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidGltZXN0YW1wIiwKCQkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtZXNzYWdlIHRvIHJlbW92ZSByZWFjdGlvbiBmcm9tLlxuIgoJCQl9CgkJXSwKCQkicmVtaW5kZXJzLmFkZCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlbWluZGVyczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0ZXh0IiwKCQkJCSJleGFtcGxlIjogImVhdCBhIGJhbmFuYSIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoZSBjb250ZW50IG9mIHRoZSByZW1pbmRlclxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0aW1lIiwKCQkJCSJleGFtcGxlIjogIjE2MDIyODgwMDAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJXaGVuIHRoaXMgcmVtaW5kZXIgc2hvdWxkIGhhcHBlbjogdGhlIFVuaXggdGltZXN0YW1wICh1cCB0byBmaXZlIHllYXJzIGZyb20gbm93KSwgdGhlIG51bWJlciBvZiBzZWNvbmRzIHVudGlsIHRoZSByZW1pbmRlciAoaWYgd2l0aGluIDI0IGhvdXJzKSwgb3IgYSBuYXR1cmFsIGxhbmd1YWdlIGRlc2NyaXB0aW9uIChFeC4gXCJpbiAxNSBtaW51dGVzLFwiIG9yIFwiZXZlcnkgVGh1cnNkYXlcIilcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidXNlciIsCgkJCQkiZXhhbXBsZSI6ICJVMTg4ODg4ODgiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgdXNlciB3aG8gd2lsbCByZWNlaXZlIHRoZSByZW1pbmRlci4gSWYgbm8gdXNlciBpcyBzcGVjaWZpZWQsIHRoZSByZW1pbmRlciB3aWxsIGdvIHRvIHVzZXIgd2hvIGNyZWF0ZWQgaXQuXG4iCgkJCX0KCQldLAoJCSJyZW1pbmRlcnMuY29tcGxldGUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiByZW1pbmRlcnM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAicmVtaW5kZXIiLAoJCQkJImV4YW1wbGUiOiAiUm0xMjM0NTY3OCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoZSBJRCBvZiB0aGUgcmVtaW5kZXIgdG8gYmUgbWFya2VkIGFzIGNvbXBsZXRlXG4iCgkJCX0KCQldLAoJCSJyZW1pbmRlcnMuZGVsZXRlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcmVtaW5kZXJzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInJlbWluZGVyIiwKCQkJCSJleGFtcGxlIjogIlJtMTIzNDU2NzgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgSUQgb2YgdGhlIHJlbWluZGVyXG4iCgkJCX0KCQldLAoJCSJyZW1pbmRlcnMuaW5mbyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlbWluZGVyczpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInJlbWluZGVyIiwKCQkJCSJleGFtcGxlIjogIlJtMjM0NTY3ODkiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgSUQgb2YgdGhlIHJlbWluZGVyXG4iCgkJCX0KCQldLAoJCSJyZW1pbmRlcnMubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlbWluZGVyczpyZWFkXG4iCgkJCX0KCQldLAoJCSJydG0uc3RhcnQiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjbGllbnRcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAic2ltcGxlX2xhdGVzdCIsCgkJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlJldHVybiB0aW1lc3RhbXAgb25seSBmb3IgbGF0ZXN0IG1lc3NhZ2Ugb2JqZWN0IG9mIGVhY2ggY2hhbm5lbCAoaW1wcm92ZXMgcGVyZm9ybWFuY2UpLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJub191bnJlYWRzIiwKCQkJCSJleGFtcGxlIjogIsKgIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiU2tpcCB1bnJlYWQgY291bnRzIGZvciBlYWNoIGNoYW5uZWwgKGltcHJvdmVzIHBlcmZvcm1hbmNlKS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAibXBpbV9hd2FyZSIsCgkJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlJldHVybnMgTVBJTXMgdG8gdGhlIGNsaWVudCBpbiB0aGUgQVBJIHJlc3BvbnNlLlxuIgoJCQl9CgkJXSwKCQkic2VhcmNoLmFsbCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHNlYXJjaDpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInF1ZXJ5IiwKCQkJCSJleGFtcGxlIjogInBpY2tsZWZhY2UiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJTZWFyY2ggcXVlcnkuIE1heSBjb250YWlucyBib29sZWFucywgZXRjLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJzb3J0IiwKCQkJCSJleGFtcGxlIjogInRpbWVzdGFtcCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9c2NvcmUiLAoJCQkJImRlc2NyaXB0aW9uIjogIlJldHVybiBtYXRjaGVzIHNvcnRlZCBieSBlaXRoZXIgc2NvcmUgb3IgdGltZXN0YW1wLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJzb3J0X2RpciIsCgkJCQkiZXhhbXBsZSI6ICJhc2MiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PWRlc2MiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5nZSBzb3J0IGRpcmVjdGlvbiB0byBhc2NlbmRpbmcgKGFzYykgb3IgZGVzY2VuZGluZyAoZGVzYykuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImhpZ2hsaWdodCIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUGFzcyBhIHZhbHVlIG9mIDEgdG8gZW5hYmxlIHF1ZXJ5IGhpZ2hsaWdodCBtYXJrZXJzIChzZWUgYmVsb3cpLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MjAiLAoJCQkJImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBpdGVtcyB0byByZXR1cm4gcGVyIHBhZ2UuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInBhZ2UiLAoJCQkJImV4YW1wbGUiOiAiMiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUGFnZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4iCgkJCX0KCQldLAoJCSJzZWFyY2guZmlsZXMiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBzZWFyY2g6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJxdWVyeSIsCgkJCQkiZXhhbXBsZSI6ICJwaWNrbGVmYWNlIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiU2VhcmNoIHF1ZXJ5LiBNYXkgY29udGFpbiBib29sZWFucywgZXRjLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJzb3J0IiwKCQkJCSJleGFtcGxlIjogInRpbWVzdGFtcCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9c2NvcmUiLAoJCQkJImRlc2NyaXB0aW9uIjogIlJldHVybiBtYXRjaGVzIHNvcnRlZCBieSBlaXRoZXIgc2NvcmUgb3IgdGltZXN0YW1wLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJzb3J0X2RpciIsCgkJCQkiZXhhbXBsZSI6ICJhc2MiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PWRlc2MiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNoYW5nZSBzb3J0IGRpcmVjdGlvbiB0byBhc2NlbmRpbmcgKGFzYykgb3IgZGVzY2VuZGluZyAoZGVzYykuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImhpZ2hsaWdodCIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUGFzcyBhIHZhbHVlIG9mIDEgdG8gZW5hYmxlIHF1ZXJ5IGhpZ2hsaWdodCBtYXJrZXJzIChzZWUgYmVsb3cpLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MjAiLAoJCQkJImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBpdGVtcyB0byByZXR1cm4gcGVyIHBhZ2UuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInBhZ2UiLAoJCQkJImV4YW1wbGUiOiAiMiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCQkiZGVzY3JpcHRpb24iOiAiUGFnZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4iCgkJCX0KCQldLAoJCSJzZWFyY2gubWVzc2FnZXMiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBzZWFyY2g6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJxdWVyeSIsCgkJCQkiZXhhbXBsZSI6ICJwaWNrbGVmYWNlIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiU2VhcmNoIHF1ZXJ5LiBNYXkgY29udGFpbnMgYm9vbGVhbnMsIGV0Yy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAic29ydCIsCgkJCQkiZXhhbXBsZSI6ICJ0aW1lc3RhbXAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PXNjb3JlIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJSZXR1cm4gbWF0Y2hlcyBzb3J0ZWQgYnkgZWl0aGVyIHNjb3JlIG9yIHRpbWVzdGFtcC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAic29ydF9kaXIiLAoJCQkJImV4YW1wbGUiOiAiYXNjIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1kZXNjIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFuZ2Ugc29ydCBkaXJlY3Rpb24gdG8gYXNjZW5kaW5nIChhc2MpIG9yIGRlc2NlbmRpbmcgKGRlc2MpLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJoaWdobGlnaHQiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlBhc3MgYSB2YWx1ZSBvZiAxIHRvIGVuYWJsZSBxdWVyeSBoaWdobGlnaHQgbWFya2VycyAoc2VlIGJlbG93KS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY291bnQiLAoJCQkJImV4YW1wbGUiOiAiMjAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTIwIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuIHBlciBwYWdlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJwYWdlIiwKCQkJCSJleGFtcGxlIjogIjIiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEiLAoJCQkJImRlc2NyaXB0aW9uIjogIlBhZ2UgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuIgoJCQl9CgkJXSwKCQkic3RhcnMuYWRkIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogc3RhcnM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZSIsCgkJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gYWRkIHN0YXIgdG8uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImZpbGVfY29tbWVudCIsCgkJCQkiZXhhbXBsZSI6ICJGYzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIGNvbW1lbnQgdG8gYWRkIHN0YXIgdG8uXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIGFkZCBzdGFyIHRvLCBvciBjaGFubmVsIHdoZXJlIHRoZSBtZXNzYWdlIHRvIGFkZCBzdGFyIHRvIHdhcyBwb3N0ZWQgKHVzZWQgd2l0aCB0aW1lc3RhbXApLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ0aW1lc3RhbXAiLAoJCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1lc3NhZ2UgdG8gYWRkIHN0YXIgdG8uXG4iCgkJCX0KCQldLAoJCSJzdGFycy5saXN0IjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogc3RhcnM6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MTAwIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuIHBlciBwYWdlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJwYWdlIiwKCQkJCSJleGFtcGxlIjogIjIiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEiLAoJCQkJImRlc2NyaXB0aW9uIjogIlBhZ2UgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuIgoJCQl9CgkJXSwKCQkic3RhcnMucmVtb3ZlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogc3RhcnM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZSIsCgkJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gcmVtb3ZlIHN0YXIgZnJvbS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiZmlsZV9jb21tZW50IiwKCQkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29tbWVudCB0byByZW1vdmUgc3RhciBmcm9tLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byByZW1vdmUgc3RhciBmcm9tLCBvciBjaGFubmVsIHdoZXJlIHRoZSBtZXNzYWdlIHRvIHJlbW92ZSBzdGFyIGZyb20gd2FzIHBvc3RlZCAodXNlZCB3aXRoIHRpbWVzdGFtcCkuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInRpbWVzdGFtcCIsCgkJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbWVzc2FnZSB0byByZW1vdmUgc3RhciBmcm9tLlxuIgoJCQl9CgkJXSwKCQkidGVhbS5hY2Nlc3NMb2dzIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogYWRtaW5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY291bnQiLAoJCQkJImV4YW1wbGUiOiAiMjAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEwMCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybiBwZXIgcGFnZS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAicGFnZSIsCgkJCQkiZXhhbXBsZSI6ICIyIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJQYWdlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiYmVmb3JlIiwKCQkJCSJleGFtcGxlIjogIjE0NTc5ODkxNjYiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PW5vdyIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRW5kIG9mIHRpbWUgcmFuZ2Ugb2YgbG9ncyB0byBpbmNsdWRlIGluIHJlc3VsdHMgKGluY2x1c2l2ZSkuXG4iCgkJCX0KCQldLAoJCSJ0ZWFtLmJpbGxhYmxlSW5mbyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGFkbWluXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBIHVzZXIgdG8gcmV0cmlldmUgdGhlIGJpbGxhYmxlIGluZm9ybWF0aW9uIGZvci4gRGVmYXVsdHMgdG8gYWxsIHVzZXJzLlxuIgoJCQl9CgkJXSwKCQkidGVhbS5pbmZvIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdGVhbTpyZWFkXG4iCgkJCX0KCQldLAoJCSJ0ZWFtLmludGVncmF0aW9uTG9ncyI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGFkbWluXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInNlcnZpY2VfaWQiLAoJCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyB0byB0aGlzIHNlcnZpY2UuIERlZmF1bHRzIHRvIGFsbCBsb2dzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJhcHBfaWQiLAoJCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyB0byB0aGlzIFNsYWNrIGFwcC4gRGVmYXVsdHMgdG8gYWxsIGxvZ3MuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyBnZW5lcmF0ZWQgYnkgdGhpcyB1c2Vy4oCZcyBhY3Rpb25zLiBEZWZhdWx0cyB0byBhbGwgbG9ncy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbmdlX3R5cGUiLAoJCQkJImV4YW1wbGUiOiAiYWRkZWQiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyB3aXRoIHRoaXMgY2hhbmdlIHR5cGUuIERlZmF1bHRzIHRvIGFsbCBsb2dzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MTAwIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuIHBlciBwYWdlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJwYWdlIiwKCQkJCSJleGFtcGxlIjogIjIiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEiLAoJCQkJImRlc2NyaXB0aW9uIjogIlBhZ2UgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuIgoJCQl9CgkJXSwKCQkidGVhbS5wcm9maWxlLmdldCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzLnByb2ZpbGU6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ2aXNpYmlsaXR5IiwKCQkJCSJleGFtcGxlIjogImFsbCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkZpbHRlciBieSB2aXNpYmlsaXR5LlxuIgoJCQl9CgkJXSwKCQkidXNlcmdyb3Vwcy5jcmVhdGUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyZ3JvdXBzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogIm5hbWUiLAoJCQkJImV4YW1wbGUiOiAiTXkgVGVzdCBUZWFtIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQSBuYW1lIGZvciB0aGUgVXNlciBHcm91cC4gTXVzdCBiZSB1bmlxdWUgYW1vbmcgVXNlciBHcm91cHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImhhbmRsZSIsCgkJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkEgbWVudGlvbiBoYW5kbGUuIE11c3QgYmUgdW5pcXVlIGFtb25nIGNoYW5uZWxzLCB1c2VycyBhbmQgVXNlciBHcm91cHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImRlc2NyaXB0aW9uIiwKCQkJCSJleGFtcGxlIjogIsKgIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQSBzaG9ydCBkZXNjcmlwdGlvbiBvZiB0aGUgVXNlciBHcm91cC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY2hhbm5lbHMiLAoJCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBIGNvbW1hIHNlcGFyYXRlZCBzdHJpbmcgb2YgZW5jb2RlZCBjaGFubmVsIElEcyBmb3Igd2hpY2ggdGhlIFVzZXIgR3JvdXAgdXNlcyBhcyBhIGRlZmF1bHQuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1ZGVfY291bnQiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIG51bWJlciBvZiB1c2VycyBpbiBlYWNoIFVzZXIgR3JvdXAuXG4iCgkJCX0KCQldLAoJCSJ1c2VyZ3JvdXBzLmRpc2FibGUiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyZ3JvdXBzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXJncm91cCIsCgkJCQkiZXhhbXBsZSI6ICJTMDYwNFFTSkMiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgZW5jb2RlZCBJRCBvZiB0aGUgVXNlciBHcm91cCB0byBkaXNhYmxlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJpbmNsdWRlX2NvdW50IiwKCQkJCSJleGFtcGxlIjogIjEiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIHRoZSBudW1iZXIgb2YgdXNlcnMgaW4gdGhlIFVzZXIgR3JvdXAuXG4iCgkJCX0KCQldLAoJCSJ1c2VyZ3JvdXBzLmVuYWJsZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJncm91cHM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidXNlcmdyb3VwIiwKCQkJCSJleGFtcGxlIjogIlMwNjA0UVNKQyIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoZSBlbmNvZGVkIElEIG9mIHRoZSBVc2VyIEdyb3VwIHRvIGVuYWJsZS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiaW5jbHVkZV9jb3VudCIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSB0aGUgbnVtYmVyIG9mIHVzZXJzIGluIHRoZSBVc2VyIEdyb3VwLlxuIgoJCQl9CgkJXSwKCQkidXNlcmdyb3Vwcy5saXN0IjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcmdyb3VwczpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1ZGVfZGlzYWJsZWQiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgZGlzYWJsZWQgVXNlciBHcm91cHMuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1ZGVfY291bnQiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIG51bWJlciBvZiB1c2VycyBpbiBlYWNoIFVzZXIgR3JvdXAuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1ZGVfdXNlcnMiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIGxpc3Qgb2YgdXNlcnMgZm9yIGVhY2ggVXNlciBHcm91cC5cbiIKCQkJfQoJCV0sCgkJInVzZXJncm91cHMudXBkYXRlIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcmdyb3Vwczp3cml0ZVxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1c2VyZ3JvdXAiLAoJCQkJImV4YW1wbGUiOiAiUzA2MDRRU0pDIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVGhlIGVuY29kZWQgSUQgb2YgdGhlIFVzZXIgR3JvdXAgdG8gdXBkYXRlLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJuYW1lIiwKCQkJCSJleGFtcGxlIjogIk15IFRlc3QgVGVhbSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkEgbmFtZSBmb3IgdGhlIFVzZXIgR3JvdXAuIE11c3QgYmUgdW5pcXVlIGFtb25nIFVzZXIgR3JvdXBzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJoYW5kbGUiLAoJCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBIG1lbnRpb24gaGFuZGxlLiBNdXN0IGJlIHVuaXF1ZSBhbW9uZyBjaGFubmVscywgdXNlcnMgYW5kIFVzZXIgR3JvdXBzLlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJkZXNjcmlwdGlvbiIsCgkJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkEgc2hvcnQgZGVzY3JpcHRpb24gb2YgdGhlIFVzZXIgR3JvdXAuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNoYW5uZWxzIiwKCQkJCSJleGFtcGxlIjogIsKgIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQSBjb21tYSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGVuY29kZWQgY2hhbm5lbCBJRHMgZm9yIHdoaWNoIHRoZSBVc2VyIEdyb3VwIHVzZXMgYXMgYSBkZWZhdWx0LlxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJpbmNsdWRlX2NvdW50IiwKCQkJCSJleGFtcGxlIjogIjEiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIHRoZSBudW1iZXIgb2YgdXNlcnMgaW4gdGhlIFVzZXIgR3JvdXAuXG4iCgkJCX0KCQldLAoJCSJ1c2VyZ3JvdXBzLnVzZXJzLmxpc3QiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyZ3JvdXBzOnJlYWRcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidXNlcmdyb3VwIiwKCQkJCSJleGFtcGxlIjogIlMwNjA0UVNKQyIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoZSBlbmNvZGVkIElEIG9mIHRoZSBVc2VyIEdyb3VwIHRvIHVwZGF0ZS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiaW5jbHVkZV9kaXNhYmxlZCIsCgkJCQkiZXhhbXBsZSI6ICIxIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQWxsb3cgcmVzdWx0cyB0aGF0IGludm9sdmUgZGlzYWJsZWQgVXNlciBHcm91cHMuXG4iCgkJCX0KCQldLAoJCSJ1c2VyZ3JvdXBzLnVzZXJzLnVwZGF0ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJncm91cHM6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidXNlcmdyb3VwIiwKCQkJCSJleGFtcGxlIjogIlMwNjA0UVNKQyIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIlRoZSBlbmNvZGVkIElEIG9mIHRoZSBVc2VyIEdyb3VwIHRvIHVwZGF0ZS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAidXNlcnMiLAoJCQkJImV4YW1wbGUiOiAiVTA2MFI0Qko0LFUwNjBSTlJDWiIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkEgY29tbWEgc2VwYXJhdGVkIHN0cmluZyBvZiBlbmNvZGVkIHVzZXIgSURzIHRoYXQgcmVwcmVzZW50IHRoZSBlbnRpcmUgbGlzdCBvZiB1c2VycyBmb3IgdGhlIFVzZXIgR3JvdXAuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1ZGVfY291bnQiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIG51bWJlciBvZiB1c2VycyBpbiB0aGUgVXNlciBHcm91cC5cbiIKCQkJfQoJCV0sCgkJInVzZXJzLmRlbGV0ZVBob3RvIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcnMucHJvZmlsZTp3cml0ZVxuIgoJCQl9CgkJXSwKCQkidXNlcnMuZ2V0UHJlc2VuY2UiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyczpyZWFkXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIGdldCBwcmVzZW5jZSBpbmZvIG9uLiBEZWZhdWx0cyB0byB0aGUgYXV0aGVkIHVzZXIuXG4iCgkJCX0KCQldLAoJCSJ1c2Vycy5pZGVudGl0eSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGlkZW50aXR5LmJhc2ljXG4iCgkJCX0KCQldLAoJCSJ1c2Vycy5pbmZvIjogWwoJCQl7CgkJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcnM6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1c2VyIiwKCQkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVXNlciB0byBnZXQgaW5mbyBvblxuIgoJCQl9CgkJXSwKCQkidXNlcnMubGlzdCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzOnJlYWRcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAicHJlc2VuY2UiLAoJCQkJImV4YW1wbGUiOiAiMSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIldoZXRoZXIgdG8gaW5jbHVkZSBwcmVzZW5jZSBkYXRhIGluIHRoZSBvdXRwdXRcbiIKCQkJfQoJCV0sCgkJInVzZXJzLnNldEFjdGl2ZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzOndyaXRlXG4iCgkJCX0KCQldLAoJCSJ1c2Vycy5zZXRQaG90byI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzLnByb2ZpbGU6d3JpdGVcbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiaW1hZ2UiLAoJCQkJImV4YW1wbGUiOiAiLi4uIiwKCQkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSBjb250ZW50cyB2aWEgbXVsdGlwYXJ0L2Zvcm0tZGF0YS5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAiY3JvcF94IiwKCQkJCSJleGFtcGxlIjogIjEwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiWCBjb29yZGluYXRlIG9mIHRvcC1sZWZ0IGNvcm5lciBvZiBjcm9wIGJveFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJjcm9wX3kiLAoJCQkJImV4YW1wbGUiOiAiMTUiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJZIGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQgY29ybmVyIG9mIGNyb3AgYm94XG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImNyb3BfdyIsCgkJCQkiZXhhbXBsZSI6ICIxMDAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJXaWR0aC9oZWlnaHQgb2YgY3JvcCBib3ggKGFsd2F5cyBzcXVhcmUpXG4iCgkJCX0KCQldLAoJCSJ1c2Vycy5zZXRQcmVzZW5jZSI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInByZXNlbmNlIiwKCQkJCSJleGFtcGxlIjogImF3YXkiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJFaXRoZXIgYXV0byBvciBhd2F5XG4iCgkJCX0KCQldLAoJCSJ1c2Vycy5wcm9maWxlLmdldCI6IFsKCQkJewoJCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzLnByb2ZpbGU6cmVhZFxuIgoJCQl9LAoJCQl7CgkJCQkibmFtZSI6ICJ1c2VyIiwKCQkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiVXNlciB0byByZXRyaWV2ZSBwcm9maWxlIGluZm8gZm9yXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogImluY2x1ZGVfbGFiZWxzIiwKCQkJCSJleGFtcGxlIjogIjEiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgbGFiZWxzIGZvciBlYWNoIElEIGluIGN1c3RvbSBwcm9maWxlIGZpZWxkc1xuIgoJCQl9CgkJXSwKCQkidXNlcnMucHJvZmlsZS5zZXQiOiBbCgkJCXsKCQkJCSJuYW1lIjogInRva2VuIiwKCQkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2Vycy5wcm9maWxlOndyaXRlXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInVzZXIiLAoJCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJJRCBvZiB1c2VyIHRvIGNoYW5nZS4gVGhpcyBhcmd1bWVudCBtYXkgb25seSBiZSBzcGVjaWZpZWQgYnkgdGVhbSBhZG1pbnMgb24gcGFpZCB0ZWFtcy5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAicHJvZmlsZSIsCgkJCQkiZXhhbXBsZSI6ICJ7IGZpcnN0X25hbWU6IFwiSm9oblwiLCAuLi4gfSIsCgkJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkJImRlc2NyaXB0aW9uIjogIkNvbGxlY3Rpb24gb2Yga2V5OnZhbHVlIHBhaXJzIHByZXNlbnRlZCBhcyBhIFVSTC1lbmNvZGVkIEpTT04gaGFzaC5cbiIKCQkJfSwKCQkJewoJCQkJIm5hbWUiOiAibmFtZSIsCgkJCQkiZXhhbXBsZSI6ICJmaXJzdF9uYW1lIiwKCQkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCQkiZGVzY3JpcHRpb24iOiAiTmFtZSBvZiBhIHNpbmdsZSBrZXkgdG8gc2V0LiBVc2FibGUgb25seSBpZiBwcm9maWxlIGlzIG5vdCBwYXNzZWQuXG4iCgkJCX0sCgkJCXsKCQkJCSJuYW1lIjogInZhbHVlIiwKCQkJCSJleGFtcGxlIjogIkpvaG4iLAoJCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJCSJkZXNjcmlwdGlvbiI6ICJWYWx1ZSB0byBzZXQgYSBzaW5nbGUga2V5IHRvLiBVc2FibGUgb25seSBpZiBwcm9maWxlIGlzIG5vdCBwYXNzZWQuXG4iCgkJCX0KCQldCgl9OwoKLyoqKi8gfSwKLyogNTIgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gY2xpZW50OwoKCS8vIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtc3RhdGVmdWwtY2xpZW50CglmdW5jdGlvbiBjbGllbnQodG9rZW4pIHsKCSAgdmFyIGFwcGxpZWQgPSB7CgkgICAgYXV0aDogewoJICAgICAgdGVzdDoge30KCSAgICB9LAoJICAgIGJvdHM6IHsKCSAgICAgIGluZm86IHt9CgkgICAgfSwKCSAgICBjaGFubmVsczogewoJICAgICAgYXJjaGl2ZToge30sCgkgICAgICBjcmVhdGU6IHt9LAoJICAgICAgaGlzdG9yeToge30sCgkgICAgICBpbmZvOiB7fSwKCSAgICAgIGludml0ZToge30sCgkgICAgICBqb2luOiB7fSwKCSAgICAgIGtpY2s6IHt9LAoJICAgICAgbGVhdmU6IHt9LAoJICAgICAgbGlzdDoge30sCgkgICAgICBtYXJrOiB7fSwKCSAgICAgIHJlbmFtZToge30sCgkgICAgICByZXBsaWVzOiB7fSwKCSAgICAgIHNldFB1cnBvc2U6IHt9LAoJICAgICAgc2V0VG9waWM6IHt9LAoJICAgICAgdW5hcmNoaXZlOiB7fQoJICAgIH0sCgkgICAgY2hhdDogewoJICAgICAgZGVsZXRlOiB7fSwKCSAgICAgIG1lTWVzc2FnZToge30sCgkgICAgICBwb3N0TWVzc2FnZToge30sCgkgICAgICB1cGRhdGU6IHt9CgkgICAgfSwKCSAgICBkbmQ6IHsKCSAgICAgIGVuZERuZDoge30sCgkgICAgICBlbmRTbm9vemU6IHt9LAoJICAgICAgaW5mbzoge30sCgkgICAgICBzZXRTbm9vemU6IHt9LAoJICAgICAgdGVhbUluZm86IHt9CgkgICAgfSwKCSAgICBlbW9qaTogewoJICAgICAgbGlzdDoge30KCSAgICB9LAoJICAgIGZpbGVzOiB7CgkgICAgICBjb21tZW50czogewoJICAgICAgICBhZGQ6IHt9LAoJICAgICAgICBkZWxldGU6IHt9LAoJICAgICAgICBlZGl0OiB7fQoJICAgICAgfSwKCSAgICAgIGRlbGV0ZToge30sCgkgICAgICBpbmZvOiB7fSwKCSAgICAgIGxpc3Q6IHt9LAoJICAgICAgcmV2b2tlUHVibGljVVJMOiB7fSwKCSAgICAgIHNoYXJlZFB1YmxpY1VSTDoge30sCgkgICAgICB1cGxvYWQ6IHt9CgkgICAgfSwKCSAgICBncm91cHM6IHsKCSAgICAgIGFyY2hpdmU6IHt9LAoJICAgICAgY2xvc2U6IHt9LAoJICAgICAgY3JlYXRlOiB7fSwKCSAgICAgIGNyZWF0ZUNoaWxkOiB7fSwKCSAgICAgIGhpc3Rvcnk6IHt9LAoJICAgICAgaW5mbzoge30sCgkgICAgICBpbnZpdGU6IHt9LAoJICAgICAga2ljazoge30sCgkgICAgICBsZWF2ZToge30sCgkgICAgICBsaXN0OiB7fSwKCSAgICAgIG1hcms6IHt9LAoJICAgICAgb3Blbjoge30sCgkgICAgICByZW5hbWU6IHt9LAoJICAgICAgcmVwbGllczoge30sCgkgICAgICBzZXRQdXJwb3NlOiB7fSwKCSAgICAgIHNldFRvcGljOiB7fSwKCSAgICAgIHVuYXJjaGl2ZToge30KCSAgICB9LAoJICAgIGltOiB7CgkgICAgICBjbG9zZToge30sCgkgICAgICBoaXN0b3J5OiB7fSwKCSAgICAgIGxpc3Q6IHt9LAoJICAgICAgbWFyazoge30sCgkgICAgICBvcGVuOiB7fSwKCSAgICAgIHJlcGxpZXM6IHt9CgkgICAgfSwKCSAgICBtcGltOiB7CgkgICAgICBjbG9zZToge30sCgkgICAgICBoaXN0b3J5OiB7fSwKCSAgICAgIGxpc3Q6IHt9LAoJICAgICAgbWFyazoge30sCgkgICAgICBvcGVuOiB7fSwKCSAgICAgIHJlcGxpZXM6IHt9CgkgICAgfSwKCSAgICBwaW5zOiB7CgkgICAgICBhZGQ6IHt9LAoJICAgICAgbGlzdDoge30sCgkgICAgICByZW1vdmU6IHt9CgkgICAgfSwKCSAgICByZWFjdGlvbnM6IHsKCSAgICAgIGFkZDoge30sCgkgICAgICBnZXQ6IHt9LAoJICAgICAgbGlzdDoge30sCgkgICAgICByZW1vdmU6IHt9CgkgICAgfSwKCSAgICByZW1pbmRlcnM6IHsKCSAgICAgIGFkZDoge30sCgkgICAgICBjb21wbGV0ZToge30sCgkgICAgICBkZWxldGU6IHt9LAoJICAgICAgaW5mbzoge30sCgkgICAgICBsaXN0OiB7fQoJICAgIH0sCgkgICAgcnRtOiB7CgkgICAgICBzdGFydDoge30KCSAgICB9LAoJICAgIHNlYXJjaDogewoJICAgICAgYWxsOiB7fSwKCSAgICAgIGZpbGVzOiB7fSwKCSAgICAgIG1lc3NhZ2VzOiB7fQoJICAgIH0sCgkgICAgc3RhcnM6IHsKCSAgICAgIGFkZDoge30sCgkgICAgICBsaXN0OiB7fSwKCSAgICAgIHJlbW92ZToge30KCSAgICB9LAoJICAgIHRlYW06IHsKCSAgICAgIGFjY2Vzc0xvZ3M6IHt9LAoJICAgICAgYmlsbGFibGVJbmZvOiB7fSwKCSAgICAgIGluZm86IHt9LAoJICAgICAgaW50ZWdyYXRpb25Mb2dzOiB7fSwKCSAgICAgIHByb2ZpbGU6IHsKCSAgICAgICAgZ2V0OiB7fQoJICAgICAgfQoJICAgIH0sCgkgICAgdXNlcmdyb3VwczogewoJICAgICAgY3JlYXRlOiB7fSwKCSAgICAgIGRpc2FibGU6IHt9LAoJICAgICAgZW5hYmxlOiB7fSwKCSAgICAgIGxpc3Q6IHt9LAoJICAgICAgdXBkYXRlOiB7fSwKCSAgICAgIHVzZXJzOiB7CgkgICAgICAgIGxpc3Q6IHt9LAoJICAgICAgICB1cGRhdGU6IHt9CgkgICAgICB9CgkgICAgfSwKCSAgICB1c2VyczogewoJICAgICAgZGVsZXRlUGhvdG86IHt9LAoJICAgICAgZ2V0UHJlc2VuY2U6IHt9LAoJICAgICAgaWRlbnRpdHk6IHt9LAoJICAgICAgaW5mbzoge30sCgkgICAgICBsaXN0OiB7fSwKCSAgICAgIHByb2ZpbGU6IHsKCSAgICAgICAgZ2V0OiB7fSwKCSAgICAgICAgc2V0OiB7fQoJICAgICAgfSwKCSAgICAgIHNldEFjdGl2ZToge30sCgkgICAgICBzZXRQaG90bzoge30sCgkgICAgICBzZXRQcmVzZW5jZToge30KCSAgICB9CgkgIH07CgoJICBhcHBsaWVkLmF1dGgudGVzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1MykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuYm90cy5pbmZvID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5jaGFubmVscy5hcmNoaXZlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5jaGFubmVscy5jcmVhdGUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNTYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYW5uZWxzLmhpc3RvcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNTcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYW5uZWxzLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNTgpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYW5uZWxzLmludml0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1OSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuY2hhbm5lbHMuam9pbiA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuY2hhbm5lbHMua2ljayA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2MSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuY2hhbm5lbHMubGVhdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNjIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYW5uZWxzLmxpc3QgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNjMpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYW5uZWxzLm1hcmsgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNjQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYW5uZWxzLnJlbmFtZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuY2hhbm5lbHMucmVwbGllcyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuY2hhbm5lbHMuc2V0UHVycG9zZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuY2hhbm5lbHMuc2V0VG9waWMgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNjgpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYW5uZWxzLnVuYXJjaGl2ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2OSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuY2hhdC5kZWxldGUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNzApLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmNoYXQubWVNZXNzYWdlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5jaGF0LnBvc3RNZXNzYWdlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5jaGF0LnVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg3MykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZG5kLmVuZERuZCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg3NCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZG5kLmVuZFNub296ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg3NSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZG5kLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNzYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmRuZC5zZXRTbm9vemUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oNzcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmRuZC50ZWFtSW5mbyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg3OCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZW1vamkubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg3OSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZmlsZXMuY29tbWVudHMuYWRkID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5maWxlcy5jb21tZW50cy5kZWxldGUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oODEpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmZpbGVzLmNvbW1lbnRzLmVkaXQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oODIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmZpbGVzLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4MykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZmlsZXMuaW5mbyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4NCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZmlsZXMubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZmlsZXMucmV2b2tlUHVibGljVVJMID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5maWxlcy5zaGFyZWRQdWJsaWNVUkwgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oODcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmZpbGVzLnVwbG9hZCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4OCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZ3JvdXBzLmFyY2hpdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oODkpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmdyb3Vwcy5jbG9zZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5MCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZ3JvdXBzLmNyZWF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5MSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZ3JvdXBzLmNyZWF0ZUNoaWxkID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5ncm91cHMuaGlzdG9yeSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5MykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZ3JvdXBzLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oOTQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmdyb3Vwcy5pbnZpdGUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oOTUpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmdyb3Vwcy5raWNrID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5ncm91cHMubGVhdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oOTcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmdyb3Vwcy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5ncm91cHMubWFyayA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5OSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZ3JvdXBzLm9wZW4gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTAwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5ncm91cHMucmVuYW1lID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuZ3JvdXBzLnJlcGxpZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTAyKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5ncm91cHMuc2V0UHVycG9zZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDMpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmdyb3Vwcy5zZXRUb3BpYyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmdyb3Vwcy51bmFyY2hpdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTA1KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5pbS5jbG9zZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmltLmhpc3RvcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTA3KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5pbS5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuaW0ubWFyayA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLmltLm9wZW4gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTEwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5pbS5yZXBsaWVzID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQubXBpbS5jbG9zZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLm1waW0uaGlzdG9yeSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLm1waW0ubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLm1waW0ubWFyayA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLm1waW0ub3BlbiA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLm1waW0ucmVwbGllcyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnBpbnMuYWRkID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQucGlucy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQucGlucy5yZW1vdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTIwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5yZWFjdGlvbnMuYWRkID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQucmVhY3Rpb25zLmdldCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnJlYWN0aW9ucy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQucmVhY3Rpb25zLnJlbW92ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnJlbWluZGVycy5hZGQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTI1KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5yZW1pbmRlcnMuY29tcGxldGUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTI2KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5yZW1pbmRlcnMuZGVsZXRlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQucmVtaW5kZXJzLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTI4KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5yZW1pbmRlcnMubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjkpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnJ0bS5zdGFydCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMzApLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnNlYXJjaC5hbGwgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTMxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5zZWFyY2guZmlsZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTMyKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5zZWFyY2gubWVzc2FnZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTMzKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5zdGFycy5hZGQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTM0KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC5zdGFycy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQuc3RhcnMucmVtb3ZlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQudGVhbS5hY2Nlc3NMb2dzID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQudGVhbS5iaWxsYWJsZUluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTM4KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC50ZWFtLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTM5KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC50ZWFtLmludGVncmF0aW9uTG9ncyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDApLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnRlYW0ucHJvZmlsZS5nZXQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTQxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC51c2VyZ3JvdXBzLmNyZWF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnVzZXJncm91cHMuZGlzYWJsZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnVzZXJncm91cHMuZW5hYmxlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQudXNlcmdyb3Vwcy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQudXNlcmdyb3Vwcy51cGRhdGUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTQ2KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC51c2VyZ3JvdXBzLnVzZXJzLmxpc3QgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTQ3KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC51c2VyZ3JvdXBzLnVzZXJzLnVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNDgpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnVzZXJzLmRlbGV0ZVBob3RvID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQudXNlcnMuZ2V0UHJlc2VuY2UgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTUwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC51c2Vycy5pZGVudGl0eSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNTEpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnVzZXJzLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTUyKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC51c2Vycy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQudXNlcnMucHJvZmlsZS5nZXQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTU0KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCSAgYXBwbGllZC51c2Vycy5wcm9maWxlLnNldCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNTUpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnVzZXJzLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgcGFyYW1zLnRva2VuID0gdG9rZW47CgkgICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNTYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwoJICB9OwoJICBhcHBsaWVkLnVzZXJzLnNldFBob3RvID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKCSAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH07CgkgIGFwcGxpZWQudXNlcnMuc2V0UHJlc2VuY2UgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewoJICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwoJICAgIF9fd2VicGFja19yZXF1aXJlX18oMTU4KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfTsKCgkgIHJldHVybiBhcHBsaWVkOwoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA1MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBhdXRodGVzdDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gYXV0aHRlc3QocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnYXV0aC50ZXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA1NCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBib3RzaW5mbzsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gYm90c2luZm8ocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnYm90cy5pbmZvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA1NSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2FyY2hpdmU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzYXJjaGl2ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5hcmNoaXZlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA1NiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2NyZWF0ZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gY2hhbm5lbHNjcmVhdGUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnY2hhbm5lbHMuY3JlYXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA1NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2hpc3Rvcnk7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzaGlzdG9yeShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5oaXN0b3J5JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA1OCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2luZm87CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzaW5mbyhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5pbmZvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA1OSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2ludml0ZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gY2hhbm5lbHNpbnZpdGUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnY2hhbm5lbHMuaW52aXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2MCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2pvaW47CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzam9pbihwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5qb2luJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2MSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2tpY2s7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxza2ljayhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5raWNrJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2MiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2xlYXZlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBjaGFubmVsc2xlYXZlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2NoYW5uZWxzLmxlYXZlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2xpc3Q7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2NCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc21hcms7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzbWFyayhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5tYXJrJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2NSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc3JlbmFtZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gY2hhbm5lbHNyZW5hbWUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnY2hhbm5lbHMucmVuYW1lJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2NiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc3JlcGxpZXM7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzcmVwbGllcyhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5yZXBsaWVzJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc3NldFB1cnBvc2U7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYW5uZWxzc2V0UHVycG9zZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGFubmVscy5zZXRQdXJwb3NlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2OCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc3NldFRvcGljOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBjaGFubmVsc3NldFRvcGljKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2NoYW5uZWxzLnNldFRvcGljJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA2OSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc3VuYXJjaGl2ZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gY2hhbm5lbHN1bmFyY2hpdmUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnY2hhbm5lbHMudW5hcmNoaXZlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3MCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGF0ZGVsZXRlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBjaGF0ZGVsZXRlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2NoYXQuZGVsZXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3MSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGF0bWVNZXNzYWdlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBjaGF0bWVNZXNzYWdlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2NoYXQubWVNZXNzYWdlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3MiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGF0cG9zdE1lc3NhZ2U7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGNoYXRwb3N0TWVzc2FnZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdjaGF0LnBvc3RNZXNzYWdlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjaGF0dXBkYXRlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBjaGF0dXBkYXRlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2NoYXQudXBkYXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3NCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBkbmRlbmREbmQ7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGRuZGVuZERuZChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdkbmQuZW5kRG5kJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3NSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBkbmRlbmRTbm9vemU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGRuZGVuZFNub296ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdkbmQuZW5kU25vb3plJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3NiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBkbmRpbmZvOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBkbmRpbmZvKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2RuZC5pbmZvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBkbmRzZXRTbm9vemU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGRuZHNldFNub296ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdkbmQuc2V0U25vb3plJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3OCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBkbmR0ZWFtSW5mbzsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZG5kdGVhbUluZm8ocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZG5kLnRlYW1JbmZvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA3OSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBlbW9qaWxpc3Q7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGVtb2ppbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdlbW9qaS5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4MCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2NvbW1lbnRzYWRkOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBmaWxlc2NvbW1lbnRzYWRkKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2ZpbGVzLmNvbW1lbnRzLmFkZCc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogODEgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gZmlsZXNjb21tZW50c2RlbGV0ZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZmlsZXNjb21tZW50c2RlbGV0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdmaWxlcy5jb21tZW50cy5kZWxldGUnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDgyICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IGZpbGVzY29tbWVudHNlZGl0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBmaWxlc2NvbW1lbnRzZWRpdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdmaWxlcy5jb21tZW50cy5lZGl0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2RlbGV0ZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZmlsZXNkZWxldGUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZmlsZXMuZGVsZXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4NCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2luZm87CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGZpbGVzaW5mbyhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdmaWxlcy5pbmZvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4NSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2xpc3Q7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGZpbGVzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdmaWxlcy5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4NiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBmaWxlc3Jldm9rZVB1YmxpY1VSTDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZmlsZXNyZXZva2VQdWJsaWNVUkwocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZmlsZXMucmV2b2tlUHVibGljVVJMJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBmaWxlc3NoYXJlZFB1YmxpY1VSTDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZmlsZXNzaGFyZWRQdWJsaWNVUkwocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZmlsZXMuc2hhcmVkUHVibGljVVJMJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4OCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBmaWxlc3VwbG9hZDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZmlsZXN1cGxvYWQocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZmlsZXMudXBsb2FkJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA4OSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNhcmNoaXZlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNhcmNoaXZlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5hcmNoaXZlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5MCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNjbG9zZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZ3JvdXBzY2xvc2UocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZ3JvdXBzLmNsb3NlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5MSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNjcmVhdGU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGdyb3Vwc2NyZWF0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdncm91cHMuY3JlYXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5MiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNjcmVhdGVDaGlsZDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZ3JvdXBzY3JlYXRlQ2hpbGQocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZ3JvdXBzLmNyZWF0ZUNoaWxkJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNoaXN0b3J5OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNoaXN0b3J5KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5oaXN0b3J5JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5NCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNpbmZvOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNpbmZvKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5pbmZvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5NSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNpbnZpdGU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGdyb3Vwc2ludml0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdncm91cHMuaW52aXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5NiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNraWNrOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNraWNrKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5raWNrJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNsZWF2ZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZ3JvdXBzbGVhdmUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnZ3JvdXBzLmxlYXZlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5OCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNsaXN0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiA5OSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNtYXJrOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNtYXJrKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5tYXJrJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMDAgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzb3BlbjsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZ3JvdXBzb3BlbihwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdncm91cHMub3Blbic7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTAxICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IGdyb3Vwc3JlbmFtZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZ3JvdXBzcmVuYW1lKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5yZW5hbWUnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEwMiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHNyZXBsaWVzOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNyZXBsaWVzKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2dyb3Vwcy5yZXBsaWVzJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMDMgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzc2V0UHVycG9zZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gZ3JvdXBzc2V0UHVycG9zZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdncm91cHMuc2V0UHVycG9zZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTA0ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IGdyb3Vwc3NldFRvcGljOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBncm91cHNzZXRUb3BpYyhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdncm91cHMuc2V0VG9waWMnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEwNSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBncm91cHN1bmFyY2hpdmU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGdyb3Vwc3VuYXJjaGl2ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdncm91cHMudW5hcmNoaXZlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMDYgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gaW1jbG9zZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gaW1jbG9zZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdpbS5jbG9zZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTA3ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IGltaGlzdG9yeTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gaW1oaXN0b3J5KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2ltLmhpc3RvcnknOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEwOCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBpbWxpc3Q7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGltbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdpbS5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMDkgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gaW1tYXJrOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBpbW1hcmsocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnaW0ubWFyayc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTEwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IGltb3BlbjsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gaW1vcGVuKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ2ltLm9wZW4nOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDExMSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBpbXJlcGxpZXM7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIGltcmVwbGllcyhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdpbS5yZXBsaWVzJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMTIgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gbXBpbWNsb3NlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBtcGltY2xvc2UocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnbXBpbS5jbG9zZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTEzICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IG1waW1oaXN0b3J5OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBtcGltaGlzdG9yeShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdtcGltLmhpc3RvcnknOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDExNCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBtcGltbGlzdDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gbXBpbWxpc3QocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnbXBpbS5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMTUgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gbXBpbW1hcms7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIG1waW1tYXJrKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ21waW0ubWFyayc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTE2ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IG1waW1vcGVuOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBtcGltb3BlbihwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdtcGltLm9wZW4nOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDExNyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBtcGltcmVwbGllczsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gbXBpbXJlcGxpZXMocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnbXBpbS5yZXBsaWVzJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMTggKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gcGluc2FkZDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gcGluc2FkZChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdwaW5zLmFkZCc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTE5ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHBpbnNsaXN0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBwaW5zbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdwaW5zLmxpc3QnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEyMCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBwaW5zcmVtb3ZlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBwaW5zcmVtb3ZlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3BpbnMucmVtb3ZlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMjEgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gcmVhY3Rpb25zYWRkOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiByZWFjdGlvbnNhZGQocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAncmVhY3Rpb25zLmFkZCc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTIyICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHJlYWN0aW9uc2dldDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gcmVhY3Rpb25zZ2V0KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3JlYWN0aW9ucy5nZXQnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEyMyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSByZWFjdGlvbnNsaXN0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiByZWFjdGlvbnNsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3JlYWN0aW9ucy5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMjQgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gcmVhY3Rpb25zcmVtb3ZlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiByZWFjdGlvbnNyZW1vdmUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAncmVhY3Rpb25zLnJlbW92ZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTI1ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHJlbWluZGVyc2FkZDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gcmVtaW5kZXJzYWRkKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3JlbWluZGVycy5hZGQnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEyNiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSByZW1pbmRlcnNjb21wbGV0ZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gcmVtaW5kZXJzY29tcGxldGUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAncmVtaW5kZXJzLmNvbXBsZXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMjcgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gcmVtaW5kZXJzZGVsZXRlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiByZW1pbmRlcnNkZWxldGUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAncmVtaW5kZXJzLmRlbGV0ZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTI4ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHJlbWluZGVyc2luZm87CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHJlbWluZGVyc2luZm8ocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAncmVtaW5kZXJzLmluZm8nOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEyOSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSByZW1pbmRlcnNsaXN0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiByZW1pbmRlcnNsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3JlbWluZGVycy5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMzAgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gcnRtc3RhcnQ7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHJ0bXN0YXJ0KHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3J0bS5zdGFydCc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTMxICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHNlYXJjaGFsbDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gc2VhcmNoYWxsKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3NlYXJjaC5hbGwnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEzMiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBzZWFyY2hmaWxlczsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gc2VhcmNoZmlsZXMocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnc2VhcmNoLmZpbGVzJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMzMgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gc2VhcmNobWVzc2FnZXM7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHNlYXJjaG1lc3NhZ2VzKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3NlYXJjaC5tZXNzYWdlcyc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTM0ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHN0YXJzYWRkOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiBzdGFyc2FkZChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdzdGFycy5hZGQnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEzNSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBzdGFyc2xpc3Q7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHN0YXJzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICdzdGFycy5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMzYgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gc3RhcnNyZW1vdmU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHN0YXJzcmVtb3ZlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3N0YXJzLnJlbW92ZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTM3ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHRlYW1hY2Nlc3NMb2dzOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB0ZWFtYWNjZXNzTG9ncyhwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd0ZWFtLmFjY2Vzc0xvZ3MnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDEzOCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB0ZWFtYmlsbGFibGVJbmZvOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB0ZWFtYmlsbGFibGVJbmZvKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3RlYW0uYmlsbGFibGVJbmZvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxMzkgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gdGVhbWluZm87CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHRlYW1pbmZvKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3RlYW0uaW5mbyc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTQwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHRlYW1pbnRlZ3JhdGlvbkxvZ3M7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHRlYW1pbnRlZ3JhdGlvbkxvZ3MocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAndGVhbS5pbnRlZ3JhdGlvbkxvZ3MnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE0MSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB0ZWFtcHJvZmlsZWdldDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gdGVhbXByb2ZpbGVnZXQocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAndGVhbS5wcm9maWxlLmdldCc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTQyICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHVzZXJncm91cHNjcmVhdGU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHVzZXJncm91cHNjcmVhdGUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAndXNlcmdyb3Vwcy5jcmVhdGUnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE0MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB1c2VyZ3JvdXBzZGlzYWJsZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gdXNlcmdyb3Vwc2Rpc2FibGUocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAndXNlcmdyb3Vwcy5kaXNhYmxlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNDQgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc2VuYWJsZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gdXNlcmdyb3Vwc2VuYWJsZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2VyZ3JvdXBzLmVuYWJsZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTQ1ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHVzZXJncm91cHNsaXN0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB1c2VyZ3JvdXBzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2VyZ3JvdXBzLmxpc3QnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE0NiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB1c2VyZ3JvdXBzdXBkYXRlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB1c2VyZ3JvdXBzdXBkYXRlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3VzZXJncm91cHMudXBkYXRlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNDcgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc3VzZXJzbGlzdDsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gdXNlcmdyb3Vwc3VzZXJzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2VyZ3JvdXBzLnVzZXJzLmxpc3QnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE0OCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB1c2VyZ3JvdXBzdXNlcnN1cGRhdGU7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHVzZXJncm91cHN1c2Vyc3VwZGF0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2VyZ3JvdXBzLnVzZXJzLnVwZGF0ZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTQ5ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHVzZXJzZGVsZXRlUGhvdG87CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHVzZXJzZGVsZXRlUGhvdG8ocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAndXNlcnMuZGVsZXRlUGhvdG8nOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE1MCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc2dldFByZXNlbmNlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB1c2Vyc2dldFByZXNlbmNlKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3VzZXJzLmdldFByZXNlbmNlJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNTEgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gdXNlcnNpZGVudGl0eTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gdXNlcnNpZGVudGl0eShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2Vycy5pZGVudGl0eSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTUyICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHVzZXJzaW5mbzsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gdXNlcnNpbmZvKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3VzZXJzLmluZm8nOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE1MyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc2xpc3Q7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHVzZXJzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2Vycy5saXN0JzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNTQgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gdXNlcnNwcm9maWxlZ2V0OwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB1c2Vyc3Byb2ZpbGVnZXQocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAndXNlcnMucHJvZmlsZS5nZXQnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE1NSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc3Byb2ZpbGVzZXQ7CgoJdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTsKCgl2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7CgoJdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTApOwoKCXZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKCWZ1bmN0aW9uIHVzZXJzcHJvZmlsZXNldChwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2Vycy5wcm9maWxlLnNldCc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTU2ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCWV4cG9ydHMuZGVmYXVsdCA9IHVzZXJzc2V0QWN0aXZlOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB1c2Vyc3NldEFjdGl2ZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2Vycy5zZXRBY3RpdmUnOwoJICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CgkgIGlmIChlcnIpIHsKCSAgICBjYWxsYmFjayhlcnIpOwoJICB9IGVsc2UgewoJICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwoJICB9Cgl9Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE1NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc3NldFBob3RvOwoKCXZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7CgoJdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKCXZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKCgl2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCglmdW5jdGlvbiB1c2Vyc3NldFBob3RvKHBhcmFtcywgY2FsbGJhY2spIHsKCSAgdmFyIG5zID0gJ3VzZXJzLnNldFBob3RvJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNTggKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5kZWZhdWx0ID0gdXNlcnNzZXRQcmVzZW5jZTsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gdXNlcnNzZXRQcmVzZW5jZShwYXJhbXMsIGNhbGxiYWNrKSB7CgkgIHZhciBucyA9ICd1c2Vycy5zZXRQcmVzZW5jZSc7CgkgIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKCSAgaWYgKGVycikgewoJICAgIGNhbGxiYWNrKGVycik7CgkgIH0gZWxzZSB7CgkgICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTU5ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2JvdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKCgl2YXIgX2JvdHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYm90cyk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSB7CgkgIGluZm86IF9ib3RzMi5kZWZhdWx0Cgl9OwoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNjAgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfY2hhbm5lbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTsKCgl2YXIgX2NoYW5uZWxzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzKTsKCgl2YXIgX2NoYW5uZWxzMyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpOwoKCXZhciBfY2hhbm5lbHM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMzKTsKCgl2YXIgX2NoYW5uZWxzNSA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpOwoKCXZhciBfY2hhbm5lbHM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHM1KTsKCgl2YXIgX2NoYW5uZWxzNyA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpOwoKCXZhciBfY2hhbm5lbHM4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHM3KTsKCgl2YXIgX2NoYW5uZWxzOSA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpOwoKCXZhciBfY2hhbm5lbHMxMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzOSk7CgoJdmFyIF9jaGFubmVsczExID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7CgoJdmFyIF9jaGFubmVsczEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMxMSk7CgoJdmFyIF9jaGFubmVsczEzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7CgoJdmFyIF9jaGFubmVsczE0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMxMyk7CgoJdmFyIF9jaGFubmVsczE1ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7CgoJdmFyIF9jaGFubmVsczE2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMxNSk7CgoJdmFyIF9jaGFubmVsczE3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Myk7CgoJdmFyIF9jaGFubmVsczE4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMxNyk7CgoJdmFyIF9jaGFubmVsczE5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7CgoJdmFyIF9jaGFubmVsczIwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMxOSk7CgoJdmFyIF9jaGFubmVsczIxID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSk7CgoJdmFyIF9jaGFubmVsczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMyMSk7CgoJdmFyIF9jaGFubmVsczIzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nyk7CgoJdmFyIF9jaGFubmVsczI0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMyMyk7CgoJdmFyIF9jaGFubmVsczI1ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7CgoJdmFyIF9jaGFubmVsczI2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMyNSk7CgoJdmFyIF9jaGFubmVsczI3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7CgoJdmFyIF9jaGFubmVsczI4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMyNyk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSB7CgkgIGFyY2hpdmU6IF9jaGFubmVsczIuZGVmYXVsdCwKCSAgY3JlYXRlOiBfY2hhbm5lbHM0LmRlZmF1bHQsCgkgIGhpc3Rvcnk6IF9jaGFubmVsczYuZGVmYXVsdCwKCSAgaW5mbzogX2NoYW5uZWxzOC5kZWZhdWx0LAoJICBpbnZpdGU6IF9jaGFubmVsczEwLmRlZmF1bHQsCgkgIGpvaW46IF9jaGFubmVsczEyLmRlZmF1bHQsCgkgIGtpY2s6IF9jaGFubmVsczE0LmRlZmF1bHQsCgkgIGxlYXZlOiBfY2hhbm5lbHMxNi5kZWZhdWx0LAoJICBsaXN0OiBfY2hhbm5lbHMxOC5kZWZhdWx0LAoJICBtYXJrOiBfY2hhbm5lbHMyMC5kZWZhdWx0LAoJICByZW5hbWU6IF9jaGFubmVsczIyLmRlZmF1bHQsCgkgIHNldFB1cnBvc2U6IF9jaGFubmVsczI0LmRlZmF1bHQsCgkgIHNldFRvcGljOiBfY2hhbm5lbHMyNi5kZWZhdWx0LAoJICB1bmFyY2hpdmU6IF9jaGFubmVsczI4LmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE2MSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9jaGF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7CgoJdmFyIF9jaGF0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYXQpOwoKCXZhciBfY2hhdDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTsKCgl2YXIgX2NoYXQ0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhdDMpOwoKCXZhciBfY2hhdDUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTsKCgl2YXIgX2NoYXQ2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhdDUpOwoKCXZhciBfY2hhdDcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCgl2YXIgX2NoYXQ4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhdDcpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZXhwb3J0cy5kZWZhdWx0ID0gewoJICBwb3N0TWVzc2FnZTogX2NoYXQ0LmRlZmF1bHQsIGRlbGV0ZTogX2NoYXQyLmRlZmF1bHQsIHVwZGF0ZTogX2NoYXQ2LmRlZmF1bHQsIG1lTWVzc2FnZTogX2NoYXQ4LmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE2MiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9kbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTsKCgl2YXIgX2RuZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kbmQpOwoKCXZhciBfZG5kMyA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpOwoKCXZhciBfZG5kNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RuZDMpOwoKCXZhciBfZG5kNSA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOwoKCXZhciBfZG5kNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RuZDUpOwoKCXZhciBfZG5kNyA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOwoKCXZhciBfZG5kOCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RuZDcpOwoKCXZhciBfZG5kOSA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpOwoKCXZhciBfZG5kMTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kbmQ5KTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWV4cG9ydHMuZGVmYXVsdCA9IHsKCSAgaW5mbzogX2RuZDIuZGVmYXVsdCwgZW5kRG5kOiBfZG5kNC5kZWZhdWx0LCBlbmRTbm9vemU6IF9kbmQ2LmRlZmF1bHQsIHNldFNub296ZTogX2RuZDguZGVmYXVsdCwgdGVhbUluZm86IF9kbmQxMC5kZWZhdWx0Cgl9OwoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNjMgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfZmlsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKTsKCgl2YXIgX2ZpbGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbGVzKTsKCgl2YXIgX2ZpbGVzMyA9IF9fd2VicGFja19yZXF1aXJlX18oODQpOwoKCXZhciBfZmlsZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXMzKTsKCgl2YXIgX2ZpbGVzNSA9IF9fd2VicGFja19yZXF1aXJlX18oODUpOwoKCXZhciBfZmlsZXM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXM1KTsKCgl2YXIgX2ZpbGVzNyA9IF9fd2VicGFja19yZXF1aXJlX18oODgpOwoKCXZhciBfZmlsZXM4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXM3KTsKCgl2YXIgX2ZpbGVzQ29tbWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTsKCgl2YXIgX2ZpbGVzQ29tbWVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXNDb21tZW50cyk7CgoJdmFyIF9maWxlc0NvbW1lbnRzMyA9IF9fd2VicGFja19yZXF1aXJlX18oODEpOwoKCXZhciBfZmlsZXNDb21tZW50czQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlc0NvbW1lbnRzMyk7CgoJdmFyIF9maWxlc0NvbW1lbnRzNSA9IF9fd2VicGFja19yZXF1aXJlX18oODIpOwoKCXZhciBfZmlsZXNDb21tZW50czYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlc0NvbW1lbnRzNSk7CgoJdmFyIF9maWxlczkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KTsKCgl2YXIgX2ZpbGVzMTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlczkpOwoKCXZhciBfZmlsZXMxMSA9IF9fd2VicGFja19yZXF1aXJlX18oODcpOwoKCXZhciBfZmlsZXMxMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbGVzMTEpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZXhwb3J0cy5kZWZhdWx0ID0gewoJICBkZWxldGU6IF9maWxlczIuZGVmYXVsdCwKCSAgaW5mbzogX2ZpbGVzNC5kZWZhdWx0LAoJICBsaXN0OiBfZmlsZXM2LmRlZmF1bHQsCgkgIHVwbG9hZDogX2ZpbGVzOC5kZWZhdWx0LAoJICBjb21tZW50czogewoJICAgIGFkZDogX2ZpbGVzQ29tbWVudHMyLmRlZmF1bHQsCgkgICAgZGVsZXRlOiBfZmlsZXNDb21tZW50czQuZGVmYXVsdCwKCSAgICBlZGl0OiBfZmlsZXNDb21tZW50czYuZGVmYXVsdAoJICB9LAoJICByZXZva2VQdWJsaWNVUkw6IF9maWxlczEwLmRlZmF1bHQsCgkgIHNoYXJlZFB1YmxpY1VSTDogX2ZpbGVzMTIuZGVmYXVsdAoJfTsKCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTY0ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2dyb3VwcyA9IF9fd2VicGFja19yZXF1aXJlX18oODkpOwoKCXZhciBfZ3JvdXBzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3Vwcyk7CgoJdmFyIF9ncm91cHMzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCk7CgoJdmFyIF9ncm91cHM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMyk7CgoJdmFyIF9ncm91cHM1ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSk7CgoJdmFyIF9ncm91cHM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzNSk7CgoJdmFyIF9ncm91cHM3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mik7CgoJdmFyIF9ncm91cHM4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzNyk7CgoJdmFyIF9ncm91cHM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7CgoJdmFyIF9ncm91cHMxMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczkpOwoKCXZhciBfZ3JvdXBzMTEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KTsKCgl2YXIgX2dyb3VwczEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMTEpOwoKCXZhciBfZ3JvdXBzMTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTsKCgl2YXIgX2dyb3VwczE0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMTMpOwoKCXZhciBfZ3JvdXBzMTUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KTsKCgl2YXIgX2dyb3VwczE2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMTUpOwoKCXZhciBfZ3JvdXBzMTcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KTsKCgl2YXIgX2dyb3VwczE4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMTcpOwoKCXZhciBfZ3JvdXBzMTkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKCgl2YXIgX2dyb3VwczIwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMTkpOwoKCXZhciBfZ3JvdXBzMjEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKCgl2YXIgX2dyb3VwczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMjEpOwoKCXZhciBfZ3JvdXBzMjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCk7CgoJdmFyIF9ncm91cHMyNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczIzKTsKCgl2YXIgX2dyb3VwczI1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpOwoKCXZhciBfZ3JvdXBzMjYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ncm91cHMyNSk7CgoJdmFyIF9ncm91cHMyNyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKTsKCgl2YXIgX2dyb3VwczI4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMjcpOwoKCXZhciBfZ3JvdXBzMjkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCk7CgoJdmFyIF9ncm91cHMzMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczI5KTsKCgl2YXIgX2dyb3VwczMxID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpOwoKCXZhciBfZ3JvdXBzMzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ncm91cHMzMSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSB7CgkgIGFyY2hpdmU6IF9ncm91cHMyLmRlZmF1bHQsCgkgIGNsb3NlOiBfZ3JvdXBzNC5kZWZhdWx0LAoJICBjcmVhdGU6IF9ncm91cHM2LmRlZmF1bHQsCgkgIGNyZWF0ZUNoaWxkOiBfZ3JvdXBzOC5kZWZhdWx0LAoJICBoaXN0b3J5OiBfZ3JvdXBzMTAuZGVmYXVsdCwKCSAgaW5mbzogX2dyb3VwczEyLmRlZmF1bHQsCgkgIGludml0ZTogX2dyb3VwczE0LmRlZmF1bHQsCgkgIGtpY2s6IF9ncm91cHMxNi5kZWZhdWx0LAoJICBsZWF2ZTogX2dyb3VwczE4LmRlZmF1bHQsCgkgIGxpc3Q6IF9ncm91cHMyMC5kZWZhdWx0LAoJICBtYXJrOiBfZ3JvdXBzMjIuZGVmYXVsdCwKCSAgb3BlbjogX2dyb3VwczI0LmRlZmF1bHQsCgkgIHJlbmFtZTogX2dyb3VwczI2LmRlZmF1bHQsCgkgIHNldFB1cnBvc2U6IF9ncm91cHMyOC5kZWZhdWx0LAoJICBzZXRUb3BpYzogX2dyb3VwczMwLmRlZmF1bHQsCgkgIHVuYXJjaGl2ZTogX2dyb3VwczMyLmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE2NSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9pbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2KTsKCgl2YXIgX2ltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltKTsKCgl2YXIgX2ltMyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKCgl2YXIgX2ltNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltMyk7CgoJdmFyIF9pbTUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7CgoJdmFyIF9pbTYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbTUpOwoKCXZhciBfaW03ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOwoKCXZhciBfaW04ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW03KTsKCgl2YXIgX2ltOSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEwKTsKCgl2YXIgX2ltMTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbTkpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZXhwb3J0cy5kZWZhdWx0ID0gewoJICBjbG9zZTogX2ltMi5kZWZhdWx0LCBoaXN0b3J5OiBfaW00LmRlZmF1bHQsIGxpc3Q6IF9pbTYuZGVmYXVsdCwgbWFyazogX2ltOC5kZWZhdWx0LCBvcGVuOiBfaW0xMC5kZWZhdWx0Cgl9OwoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNjYgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfbXBpbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKTsKCgl2YXIgX21waW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbXBpbSk7CgoJdmFyIF9tcGltMyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEzKTsKCgl2YXIgX21waW00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbXBpbTMpOwoKCXZhciBfbXBpbTUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNCk7CgoJdmFyIF9tcGltNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21waW01KTsKCgl2YXIgX21waW03ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpOwoKCXZhciBfbXBpbTggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tcGltNyk7CgoJdmFyIF9tcGltOSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE2KTsKCgl2YXIgX21waW0xMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21waW05KTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWV4cG9ydHMuZGVmYXVsdCA9IHsKCSAgY2xvc2U6IF9tcGltMi5kZWZhdWx0LAoJICBoaXN0b3J5OiBfbXBpbTQuZGVmYXVsdCwKCSAgbGlzdDogX21waW02LmRlZmF1bHQsCgkgIG1hcms6IF9tcGltOC5kZWZhdWx0LAoJICBvcGVuOiBfbXBpbTEwLmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE2NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBvYXV0aGFjY2VzczsKCgl2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKCXZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCgl2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CgoJdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQoJZnVuY3Rpb24gb2F1dGhhY2Nlc3MocGFyYW1zLCBjYWxsYmFjaykgewoJICB2YXIgbnMgPSAnb2F1dGguYWNjZXNzJzsKCSAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwoJICBpZiAoZXJyKSB7CgkgICAgY2FsbGJhY2soZXJyKTsKCSAgfSBlbHNlIHsKCSAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKCSAgfQoJfQoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNjggKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfcmVhY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOwoKCXZhciBfcmVhY3Rpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0aW9ucyk7CgoJdmFyIF9yZWFjdGlvbnMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOwoKCXZhciBfcmVhY3Rpb25zNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0aW9uczMpOwoKCXZhciBfcmVhY3Rpb25zNSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCgl2YXIgX3JlYWN0aW9uczYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdGlvbnM1KTsKCgl2YXIgX3JlYWN0aW9uczcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNCk7CgoJdmFyIF9yZWFjdGlvbnM4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3Rpb25zNyk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSB7CgkgIGFkZDogX3JlYWN0aW9uczIuZGVmYXVsdCwgZ2V0OiBfcmVhY3Rpb25zNC5kZWZhdWx0LCBsaXN0OiBfcmVhY3Rpb25zNi5kZWZhdWx0LCByZW1vdmU6IF9yZWFjdGlvbnM4LmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE2OSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9yZW1pbmRlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7CgoJdmFyIF9yZW1pbmRlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtaW5kZXJzKTsKCgl2YXIgX3JlbWluZGVyczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNik7CgoJdmFyIF9yZW1pbmRlcnM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtaW5kZXJzMyk7CgoJdmFyIF9yZW1pbmRlcnM1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjcpOwoKCXZhciBfcmVtaW5kZXJzNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbWluZGVyczUpOwoKCXZhciBfcmVtaW5kZXJzNyA9IF9fd2VicGFja19yZXF1aXJlX18oMTI4KTsKCgl2YXIgX3JlbWluZGVyczggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW1pbmRlcnM3KTsKCgl2YXIgX3JlbWluZGVyczkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOSk7CgoJdmFyIF9yZW1pbmRlcnMxMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbWluZGVyczkpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZXhwb3J0cy5kZWZhdWx0ID0gewoJICBhZGQ6IF9yZW1pbmRlcnMyLmRlZmF1bHQsIGNvbXBsZXRlOiBfcmVtaW5kZXJzNC5kZWZhdWx0LCBkZWxldGU6IF9yZW1pbmRlcnM2LmRlZmF1bHQsIGluZm86IF9yZW1pbmRlcnM4LmRlZmF1bHQsIGxpc3Q6IF9yZW1pbmRlcnMxMC5kZWZhdWx0Cgl9OwoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNzAgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfcGlucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKCgl2YXIgX3BpbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGlucyk7CgoJdmFyIF9waW5zMyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsKCgl2YXIgX3BpbnM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGluczMpOwoKCXZhciBfcGluczUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7CgoJdmFyIF9waW5zNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BpbnM1KTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWV4cG9ydHMuZGVmYXVsdCA9IHsKCSAgYWRkOiBfcGluczIuZGVmYXVsdCwgbGlzdDogX3BpbnM0LmRlZmF1bHQsIHJlbW92ZTogX3BpbnM2LmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE3MSAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLmRlZmF1bHQgPSBjbGllbnQ7CgoJdmFyIF9ydG0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMCk7CgoJdmFyIF9ydG0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnRtKTsKCgl2YXIgX3J0bTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Mik7CgoJdmFyIF9ydG00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnRtMyk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvLyBzb2NrZXQgZmFjdG9yeQoJZnVuY3Rpb24gY2xpZW50KCkgewoKCSAgLy8gYnVpbGQgYSBuZXcgYm90IGV2ZXJ5IHRpbWUKCSAgdmFyIGJvdCA9IHsKCSAgICBoYW5kbGVyczogewoJICAgICAgc3RhcnRlZDogW10KCSAgICB9CgkgIH07CgoJICAvLyBhZGQgdW5kb2N1bWVudGVkIHBpbmcgZXZlbnQKCSAgX3J0bTQuZGVmYXVsdC5wdXNoKCdwb25nJyk7CgoJICAvLyBnZW5lcmF0ZSBldmVudCBoYW5kbGVyIHJlZ2lzdHJhdGlvbiBtZXRob2RzCgkgIF9ydG00LmRlZmF1bHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewoJICAgIGJvdC5oYW5kbGVyc1tlXSA9IFtdOwoJICAgIGJvdFtlXSA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7CgkgICAgICBib3QuaGFuZGxlcnNbZV0ucHVzaChoYW5kbGVyKTsKCSAgICB9OwoJICB9KTsKCgkgIGJvdC5zdGFydGVkID0gZnVuY3Rpb24gKGhhbmRsZXIpIHsKCSAgICBib3QuaGFuZGxlcnNbJ3N0YXJ0ZWQnXS5wdXNoKGhhbmRsZXIpOwoJICB9OwoKCSAgLy8ga2lja3MgdXAgYSB3ZWIgc29ja2V0IGNvbm5lY3Rpb24KCSAgYm90Lmxpc3RlbiA9IGZ1bmN0aW9uIGJvdExpc3RlbihwYXJhbXMsIGNhbGxiYWNrKSB7CgkgICAgKDAsIF9ydG0yLmRlZmF1bHQpKHBhcmFtcywgZnVuY3Rpb24gKGVyciwgZGF0YSkgewoJICAgICAgaWYgKGVycikgewoJICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVycik7ZWxzZSB0aHJvdyBlcnI7CgkgICAgICB9IGVsc2UgewoJICAgICAgICAvLyBncmFiIGEgaGFuZGxlIG9uIHRoZSBzb2NrZXQKCSAgICAgICAgYm90LndzID0gbmV3IFdlYlNvY2tldChkYXRhLnVybCk7CgkgICAgICAgIC8vIGRlbGVnYXRlIGV2ZXJ5dGhpbmcKCSAgICAgICAgYm90LndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIG1lc3NhZ2UoZSkgewoJICAgICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShlLmRhdGEpOwoJICAgICAgICAgIGJvdC5oYW5kbGVyc1tqc29uLnR5cGVdLmZvckVhY2goZnVuY3Rpb24gKG0pIHsKCSAgICAgICAgICAgIHJldHVybiBtLmNhbGwoe30sIGpzb24pOwoJICAgICAgICAgIH0pOwoJICAgICAgICB9OwoJICAgICAgICAvLyBjYWxsIHN0YXJ0ZWQgY2FsbGJhY2tzCgkgICAgICAgIGJvdC5oYW5kbGVyc1snc3RhcnRlZCddLmZvckVhY2goZnVuY3Rpb24gKG0pIHsKCSAgICAgICAgICByZXR1cm4gbS5jYWxsKHt9LCBkYXRhKTsKCSAgICAgICAgfSk7CgkgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2sobnVsbCwgZGF0YSk7CgkgICAgICB9CgkgICAgfSk7CgkgIH07CgoJICAvLyBjbG9zZXMgdGhlIHNvY2tldAoJICBib3QuY2xvc2UgPSBmdW5jdGlvbiBib3RDbG9zZSgpIHsKCSAgICBib3Qud3MuY2xvc2UoKTsKCSAgfTsKCgkgIC8vLy8vLy8vLy8KCSAgcmV0dXJuIGJvdDsKCX0KCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTcyICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgkvLyBnZW5lcmF0ZWQgdXNpbmcgLi9zY3JpcHRzL2dlbmVyYXRlLWFsbAoJdmFyIGV2ZW50cyA9IFsnYWNjb3VudHNfY2hhbmdlZCcsICdib3RfYWRkZWQnLCAnYm90X2NoYW5nZWQnLCAnY2hhbm5lbF9hcmNoaXZlJywgJ2NoYW5uZWxfY3JlYXRlZCcsICdjaGFubmVsX2RlbGV0ZWQnLCAnY2hhbm5lbF9oaXN0b3J5X2NoYW5nZWQnLCAnY2hhbm5lbF9qb2luZWQnLCAnY2hhbm5lbF9sZWZ0JywgJ2NoYW5uZWxfbWFya2VkJywgJ2NoYW5uZWxfcmVuYW1lJywgJ2NoYW5uZWxfdW5hcmNoaXZlJywgJ2NvbW1hbmRzX2NoYW5nZWQnLCAnZG5kX3VwZGF0ZWQnLCAnZG5kX3VwZGF0ZWRfdXNlcicsICdlbWFpbF9kb21haW5fY2hhbmdlZCcsICdlbW9qaV9jaGFuZ2VkJywgJ2ZpbGVfY2hhbmdlJywgJ2ZpbGVfY29tbWVudF9hZGRlZCcsICdmaWxlX2NvbW1lbnRfZGVsZXRlZCcsICdmaWxlX2NvbW1lbnRfZWRpdGVkJywgJ2ZpbGVfY3JlYXRlZCcsICdmaWxlX2RlbGV0ZWQnLCAnZmlsZV9wdWJsaWMnLCAnZmlsZV9zaGFyZWQnLCAnZmlsZV91bnNoYXJlZCcsICdnb29kYnllJywgJ2dyb3VwX2FyY2hpdmUnLCAnZ3JvdXBfY2xvc2UnLCAnZ3JvdXBfaGlzdG9yeV9jaGFuZ2VkJywgJ2dyb3VwX2pvaW5lZCcsICdncm91cF9sZWZ0JywgJ2dyb3VwX21hcmtlZCcsICdncm91cF9vcGVuJywgJ2dyb3VwX3JlbmFtZScsICdncm91cF91bmFyY2hpdmUnLCAnaGVsbG8nLCAnaW1fY2xvc2UnLCAnaW1fY3JlYXRlZCcsICdpbV9oaXN0b3J5X2NoYW5nZWQnLCAnaW1fbWFya2VkJywgJ2ltX29wZW4nLCAnbWFudWFsX3ByZXNlbmNlX2NoYW5nZScsICdtZXNzYWdlJywgJ21lc3NhZ2UuY2hhbm5lbHMnLCAnbWVzc2FnZS5ncm91cHMnLCAnbWVzc2FnZS5pbScsICdtZXNzYWdlLm1waW0nLCAncGluX2FkZGVkJywgJ3Bpbl9yZW1vdmVkJywgJ3BvbmcnLCAncHJlZl9jaGFuZ2UnLCAncHJlc2VuY2VfY2hhbmdlJywgJ3JlYWN0aW9uX2FkZGVkJywgJ3JlYWN0aW9uX3JlbW92ZWQnLCAncmVjb25uZWN0X3VybCcsICdzdGFyX2FkZGVkJywgJ3N0YXJfcmVtb3ZlZCcsICdzdWJ0ZWFtX2NyZWF0ZWQnLCAnc3VidGVhbV9zZWxmX2FkZGVkJywgJ3N1YnRlYW1fc2VsZl9yZW1vdmVkJywgJ3N1YnRlYW1fdXBkYXRlZCcsICd0ZWFtX2RvbWFpbl9jaGFuZ2UnLCAndGVhbV9qb2luJywgJ3RlYW1fbWlncmF0aW9uX3N0YXJ0ZWQnLCAndGVhbV9wbGFuX2NoYW5nZScsICd0ZWFtX3ByZWZfY2hhbmdlJywgJ3RlYW1fcHJvZmlsZV9jaGFuZ2UnLCAndGVhbV9wcm9maWxlX2RlbGV0ZScsICd0ZWFtX3Byb2ZpbGVfcmVvcmRlcicsICd0ZWFtX3JlbmFtZScsICd1cmxfdmVyaWZpY2F0aW9uJywgJ3VzZXJfY2hhbmdlJywgJ3VzZXJfdHlwaW5nJ107CgoJZXhwb3J0cy5kZWZhdWx0ID0gZXZlbnRzOwoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9LAovKiAxNzMgKi8KLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJJ3VzZSBzdHJpY3QnOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfc2VhcmNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzEpOwoKCXZhciBfc2VhcmNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaCk7CgoJdmFyIF9zZWFyY2gzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzIpOwoKCXZhciBfc2VhcmNoNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaDMpOwoKCXZhciBfc2VhcmNoNSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTsKCgl2YXIgX3NlYXJjaDYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2g1KTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWV4cG9ydHMuZGVmYXVsdCA9IHsKCSAgYWxsOiBfc2VhcmNoMi5kZWZhdWx0LCBmaWxlczogX3NlYXJjaDQuZGVmYXVsdCwgbWVzc2FnZXM6IF9zZWFyY2g2LmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE3NCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9zdGFycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM0KTsKCgl2YXIgX3N0YXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXJzKTsKCgl2YXIgX3N0YXJzMyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM1KTsKCgl2YXIgX3N0YXJzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXJzMyk7CgoJdmFyIF9zdGFyczUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNik7CgoJdmFyIF9zdGFyczYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdGFyczUpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZXhwb3J0cy5kZWZhdWx0ID0gewoJICBhZGQ6IF9zdGFyczIuZGVmYXVsdCwgbGlzdDogX3N0YXJzNC5kZWZhdWx0LCByZW1vdmU6IF9zdGFyczYuZGVmYXVsdAoJfTsKCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSwKLyogMTc1ICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX3RlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNyk7CgoJdmFyIF90ZWFtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RlYW0pOwoKCXZhciBfdGVhbTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7CgoJdmFyIF90ZWFtNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RlYW0zKTsKCgl2YXIgX3RlYW01ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzkpOwoKCXZhciBfdGVhbTYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZWFtNSk7CgoJdmFyIF90ZWFtNyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTsKCgl2YXIgX3RlYW04ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGVhbTcpOwoKCXZhciBfdGVhbVByb2ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MSk7CgoJdmFyIF90ZWFtUHJvZmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZWFtUHJvZmlsZSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSB7CgkgIGFjY2Vzc0xvZ3M6IF90ZWFtMi5kZWZhdWx0LAoJICBiaWxsYWJsZUluZm86IF90ZWFtNC5kZWZhdWx0LAoJICBpbmZvOiBfdGVhbTYuZGVmYXVsdCwKCSAgaW50ZWdyYXRpb25Mb2dzOiBfdGVhbTguZGVmYXVsdCwKCSAgcHJvZmlsZTogewoJICAgIGdldDogX3RlYW1Qcm9maWxlMi5kZWZhdWx0CgkgIH0KCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE3NiAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF91c2VyZ3JvdXBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpOwoKCXZhciBfdXNlcmdyb3VwczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyZ3JvdXBzKTsKCgl2YXIgX3VzZXJncm91cHMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpOwoKCXZhciBfdXNlcmdyb3VwczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyZ3JvdXBzMyk7CgoJdmFyIF91c2VyZ3JvdXBzNSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ0KTsKCgl2YXIgX3VzZXJncm91cHM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcmdyb3VwczUpOwoKCXZhciBfdXNlcmdyb3VwczcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSk7CgoJdmFyIF91c2VyZ3JvdXBzOCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJncm91cHM3KTsKCgl2YXIgX3VzZXJncm91cHM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpOwoKCXZhciBfdXNlcmdyb3VwczEwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcmdyb3VwczkpOwoKCXZhciBfdXNlcmdyb3Vwc1VzZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDcpOwoKCXZhciBfdXNlcmdyb3Vwc1VzZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJncm91cHNVc2Vycyk7CgoJdmFyIF91c2VyZ3JvdXBzVXNlcnMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDgpOwoKCXZhciBfdXNlcmdyb3Vwc1VzZXJzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJncm91cHNVc2VyczMpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJZXhwb3J0cy5kZWZhdWx0ID0gewoJICBjcmVhdGU6IF91c2VyZ3JvdXBzMi5kZWZhdWx0LAoJICBkaXNhYmxlOiBfdXNlcmdyb3VwczQuZGVmYXVsdCwKCSAgZW5hYmxlOiBfdXNlcmdyb3VwczYuZGVmYXVsdCwKCSAgbGlzdDogX3VzZXJncm91cHM4LmRlZmF1bHQsCgkgIHVwZGF0ZTogX3VzZXJncm91cHMxMC5kZWZhdWx0LAoJICB1c2VyczogewoJICAgIGxpc3Q6IF91c2VyZ3JvdXBzVXNlcnMyLmRlZmF1bHQsCgkgICAgdXBkYXRlOiBfdXNlcmdyb3Vwc1VzZXJzNC5kZWZhdWx0CgkgIH0KCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE3NyAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkndXNlIHN0cmljdCc7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF91c2VycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUwKTsKCgl2YXIgX3VzZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJzKTsKCgl2YXIgX3VzZXJzUHJvZmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KTsKCgl2YXIgX3VzZXJzUHJvZmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2Vyc1Byb2ZpbGUpOwoKCXZhciBfdXNlcnMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTEpOwoKCXZhciBfdXNlcnM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcnMzKTsKCgl2YXIgX3VzZXJzNSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKTsKCgl2YXIgX3VzZXJzNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJzNSk7CgoJdmFyIF91c2VyczcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7CgoJdmFyIF91c2VyczggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyczcpOwoKCXZhciBfdXNlcnM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTYpOwoKCXZhciBfdXNlcnMxMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJzOSk7CgoJdmFyIF91c2VyczExID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTgpOwoKCXZhciBfdXNlcnMxMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJzMTEpOwoKCXZhciBfdXNlcnNQcm9maWxlMyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU1KTsKCgl2YXIgX3VzZXJzUHJvZmlsZTQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2Vyc1Byb2ZpbGUzKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWV4cG9ydHMuZGVmYXVsdCA9IHsKCSAgZ2V0UHJlc2VuY2U6IF91c2VyczIuZGVmYXVsdCwKCSAgaWRlbnRpdHk6IF91c2VyczQuZGVmYXVsdCwKCSAgaW5mbzogX3VzZXJzNi5kZWZhdWx0LAoJICBsaXN0OiBfdXNlcnM4LmRlZmF1bHQsCgkgIHByb2ZpbGU6IHsKCSAgICBnZXQ6IF91c2Vyc1Byb2ZpbGUyLmRlZmF1bHQsCgkgICAgc2V0OiBfdXNlcnNQcm9maWxlNC5kZWZhdWx0CgkgIH0sCgkgIHNldEFjdGl2ZTogX3VzZXJzMTAuZGVmYXVsdCwKCSAgc2V0UHJlc2VuY2U6IF91c2VyczEyLmRlZmF1bHQKCX07Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0sCi8qIDE3OCAqLwovKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyB2ZXJzaW9uOiAwLjUuMQoJLy8gZGF0ZTogRnJpIEZlYiAwMyAyMDE3IDE0OjI2OjE1IEdNVCswMDAwIChXRVQpCgkvLyBsaWNlbmNlOiAKCS8qKgoJKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKCSogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKCSogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCgkqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCgkqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoJKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCgkqIENvcHlyaWdodCAyMDE2IEFwaXplZQoJKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoJKgoJKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSoKCSogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSoKCSogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSoqLwoKCgkoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkgewoJCWlmKHRydWUpCgkJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCQlkZWZpbmUoIlN5bmNoZXIiLCBbXSwgZmFjdG9yeSk7CgkJZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpCgkJCWV4cG9ydHNbIlN5bmNoZXIiXSA9IGZhY3RvcnkoKTsKCQllbHNlCgkJCXJvb3RbIiJdID0gcm9vdFsiIl0gfHwge30sIHJvb3RbIiJdWyJTeW5jaGVyIl0gPSBmYWN0b3J5KCk7Cgl9KSh0aGlzLCBmdW5jdGlvbigpIHsKCXJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwCgkvKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQoJLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307CgkvKioqKioqLwoJLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCgkvKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewoJLyoqKioqKi8KCS8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCgkvKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQoJLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CgkvKioqKioqLwoJLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQoJLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7CgkvKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKCS8qKioqKiovIAkJCWw6IGZhbHNlLAoJLyoqKioqKi8gCQkJZXhwb3J0czoge30KCS8qKioqKiovIAkJfTsKCS8qKioqKiovCgkvKioqKioqLyAJCS8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgoJLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKCS8qKioqKiovCgkvKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKCS8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwoJLyoqKioqKi8KCS8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKCS8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwoJLyoqKioqKi8gCX0KCS8qKioqKiovCgkvKioqKioqLwoJLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCgkvKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsKCS8qKioqKiovCgkvKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKCS8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoJLyoqKioqKi8KCS8qKioqKiovIAkvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0CgkvKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9OwoJLyoqKioqKi8KCS8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKCS8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHsKCS8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewoJLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKCS8qKioqKiovIAkJCQljb25maWd1cmFibGU6IGZhbHNlLAoJLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsCgkvKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXIKCS8qKioqKiovIAkJCX0pOwoJLyoqKioqKi8gCQl9CgkvKioqKioqLyAJfTsKCS8qKioqKiovCgkvKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKCS8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsKCS8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/CgkvKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOgoJLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsKCS8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOwoJLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOwoJLyoqKioqKi8gCX07CgkvKioqKioqLwoJLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAoJLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsKCS8qKioqKiovCgkvKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KCS8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKCS8qKioqKiovCgkvKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCgkvKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTYyKTsKCS8qKioqKiovIH0pCgkvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoJLyoqKioqKi8gKFsKCS8qIDAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgl2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcyLjQuMCd9OwoJaWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmCgoJLyoqKi8gfSksCgkvKiAxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKCXZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aAoJICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZiA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CglpZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKCS8qKiovIH0pLAoJLyogMiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBzdG9yZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkoJ3drcycpCgkgICwgdWlkICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpCgkgICwgU3ltYm9sICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuU3ltYm9sCgkgICwgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJzsKCgl2YXIgJGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpewoJICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID0KCSAgICBVU0VfU1lNQk9MICYmIFN5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IFN5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpOwoJfTsKCgkkZXhwb3J0cy5zdG9yZSA9IHN0b3JlOwoKCS8qKiovIH0pLAoJLyogMyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkKCW1vZHVsZS5leHBvcnRzID0gIV9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7CgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7Cgl9KTsKCgkvKioqLyB9KSwKCS8qIDQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgYW5PYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCgkgICwgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KQoJICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKCSAgLCBkUCAgICAgICAgICAgICA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKCglleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7CgkgIGFuT2JqZWN0KE8pOwoJICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7CgkgIGFuT2JqZWN0KEF0dHJpYnV0ZXMpOwoJICBpZihJRThfRE9NX0RFRklORSl0cnkgewoJICAgIHJldHVybiBkUChPLCBQLCBBdHRyaWJ1dGVzKTsKCSAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQoJICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsKCSAgaWYoJ3ZhbHVlJyBpbiBBdHRyaWJ1dGVzKU9bUF0gPSBBdHRyaWJ1dGVzLnZhbHVlOwoJICByZXR1cm4gTzsKCX07CgoJLyoqKi8gfSksCgkvKiA1ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJICBpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTsKCSAgcmV0dXJuIGl0OwoJfTsKCgkvKioqLyB9KSwKCS8qIDYgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKCSAgLCBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7Cgltb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpewoJICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwoJfSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7CgkgIG9iamVjdFtrZXldID0gdmFsdWU7CgkgIHJldHVybiBvYmplY3Q7Cgl9OwoKCS8qKiovIH0pLAoJLyogNyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nOwoJfTsKCgkvKioqLyB9KSwKCS8qIDggKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgZ2xvYmFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQoJICAsIGNvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKCSAgLCBjdHggICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQoJICAsIGhpZGUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikKCSAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCgl2YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7CgkgIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GCgkgICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCgkgICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TCgkgICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QCgkgICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCgkgICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XCgkgICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KQoJICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdCgkgICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdCgkgICAgLCBrZXksIG93biwgb3V0OwoJICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsKCSAgZm9yKGtleSBpbiBzb3VyY2UpewoJICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZQoJICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7CgkgICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlOwoJICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkCgkgICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsKCSAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMKCSAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XQoJICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CgkgICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbCkKCSAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeQoJICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7CgkgICAgICB2YXIgRiA9IGZ1bmN0aW9uKGEsIGIsIGMpewoJICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgQyl7CgkgICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpewoJICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEM7CgkgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgQyhhKTsKCSAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOwoJICAgICAgICAgIH0gcmV0dXJuIG5ldyBDKGEsIGIsIGMpOwoJICAgICAgICB9IHJldHVybiBDLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkgICAgICB9OwoJICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdOwoJICAgICAgcmV0dXJuIEY7CgkgICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCgkgICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0OwoJICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5tZXRob2RzLiVOQU1FJQoJICAgIGlmKElTX1BST1RPKXsKCSAgICAgIChleHBvcnRzLnZpcnR1YWwgfHwgKGV4cG9ydHMudmlydHVhbCA9IHt9KSlba2V5XSA9IG91dDsKCSAgICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5wcm90b3R5cGUuJU5BTUUlCgkgICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsKCSAgICB9CgkgIH0KCX07CgkvLyB0eXBlIGJpdG1hcAoJJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWQKCSRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsCgkkZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpYwoJJGV4cG9ydC5QID0gODsgICAvLyBwcm90bwoJJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kCgkkZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXAKCSRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZQoJJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIAoJbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0OwoKCS8qKiovIH0pLAoJLyogOSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCgoJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCglleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CgkgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CgkgIH0KCX07CgoJLyoqKi8gfSksCgkvKiAxMCAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCgoJZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCgl2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7CgoJdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7CgkgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewoJICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKCSAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CgkgICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CgkgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CgkgICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKCSAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwoJICAgIH0KCSAgfQoKCSAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKCSAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwoJICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwoJICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKCSAgfTsKCX0oKTsKCgkvKioqLyB9KSwKCS8qIDExICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjKXsKCSAgdHJ5IHsKCSAgICByZXR1cm4gISFleGVjKCk7CgkgIH0gY2F0Y2goZSl7CgkgICAgcmV0dXJuIHRydWU7CgkgIH0KCX07CgoJLyoqKi8gfSksCgkvKiAxMiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCXZhciBoYXNPd25Qcm9wZXJ0eSA9IHt9Lmhhc093blByb3BlcnR5OwoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwga2V5KXsKCSAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7Cgl9OwoKCS8qKiovIH0pLAoJLyogMTMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3MKCXZhciBJT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NikKCSAgLCBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKCSAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpOwoJfTsKCgkvKioqLyB9KSwKCS8qIDE0ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCgl2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpewoJICBhRnVuY3Rpb24oZm4pOwoJICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuOwoJICBzd2l0Y2gobGVuZ3RoKXsKCSAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXsKCSAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpOwoJICAgIH07CgkgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7CgkgICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTsKCSAgICB9OwoJICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpewoJICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7CgkgICAgfTsKCSAgfQoJICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7CgkgICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7CgkgIH07Cgl9OwoKCS8qKiovIH0pLAoJLyogMTUgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgltb2R1bGUuZXhwb3J0cyA9IHt9OwoKCS8qKiovIH0pLAoJLyogMTYgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGJpdG1hcCwgdmFsdWUpewoJICByZXR1cm4gewoJICAgIGVudW1lcmFibGUgIDogIShiaXRtYXAgJiAxKSwKCSAgICBjb25maWd1cmFibGU6ICEoYml0bWFwICYgMiksCgkgICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLAoJICAgIHZhbHVlICAgICAgIDogdmFsdWUKCSAgfTsKCX07CgoJLyoqKi8gfSksCgkvKiAxNyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIDE5LjEuMi4xNCAvIDE1LjIuMy4xNCBPYmplY3Qua2V5cyhPKQoJdmFyICRrZXlzICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCkKCSAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKCW1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKXsKCSAgcmV0dXJuICRrZXlzKE8sIGVudW1CdWdLZXlzKTsKCX07CgoJLyoqKi8gfSksCgkvKiAxOCAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCXZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJICByZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwgLTEpOwoJfTsKCgkvKioqLyB9KSwKCS8qIDE5ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQoJICAsIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudAoJICAvLyBpbiBvbGQgSUUgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCcKCSAgLCBpcyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9OwoJfTsKCgkvKioqLyB9KSwKCS8qIDIwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CgkgIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7CgkgIHJldHVybiBpdDsKCX07CgoJLyoqKi8gfSksCgkvKiAyMSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBkZWYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmYKCSAgLCBoYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQoJICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7CgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgdGFnLCBzdGF0KXsKCSAgaWYoaXQgJiYgIWhhcyhpdCA9IHN0YXQgPyBpdCA6IGl0LnByb3RvdHlwZSwgVEFHKSlkZWYoaXQsIFRBRywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgdmFsdWU6IHRhZ30pOwoJfTsKCgkvKioqLyB9KSwKCS8qIDIyICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gNy4xLjEgVG9QcmltaXRpdmUoaW5wdXQgWywgUHJlZmVycmVkVHlwZV0pCgl2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoJLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2UKCS8vIGFuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IC0gZmxhZyAtIHByZWZlcnJlZCB0eXBlIGlzIGEgc3RyaW5nCgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBTKXsKCSAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7CgkgIHZhciBmbiwgdmFsOwoJICBpZihTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7CgkgIGlmKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsKCSAgaWYoIVMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsKCSAgdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKTsKCX07CgoJLyoqKi8gfSksCgkvKiAyMyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCXZhciBpZCA9IDAKCSAgLCBweCA9IE1hdGgucmFuZG9tKCk7Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CgkgIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7Cgl9OwoKCS8qKiovIH0pLAoJLyogMjQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CgkgIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiICsgaXQpOwoJICByZXR1cm4gaXQ7Cgl9OwoKCS8qKiovIH0pLAoJLyogMjUgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgltb2R1bGUuZXhwb3J0cyA9IHRydWU7CgoJLyoqKi8gfSksCgkvKiAyNiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBzaGFyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgna2V5cycpCgkgICwgdWlkICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CgkgIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7Cgl9OwoKCS8qKiovIH0pLAoJLyogMjcgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkvLyA3LjEuNCBUb0ludGVnZXIKCXZhciBjZWlsICA9IE1hdGguY2VpbAoJICAsIGZsb29yID0gTWF0aC5mbG9vcjsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTsKCX07CgoJLyoqKi8gfSksCgkvKiAyOCAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCS8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXMKCW1vZHVsZS5leHBvcnRzID0gKAoJICAnY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mJwoJKS5zcGxpdCgnLCcpOwoKCS8qKiovIH0pLAoJLyogMjkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgltb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDMpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewoJICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19yZXF1aXJlX18oMTkpKCdkaXYnKSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNzsKCX0pOwoKCS8qKiovIH0pLAoJLyogMzAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQoJICAsIFNIQVJFRCA9ICdfX2NvcmUtanNfc2hhcmVkX18nCgkgICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pOwoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpewoJICByZXR1cm4gc3RvcmVba2V5XSB8fCAoc3RvcmVba2V5XSA9IHt9KTsKCX07CgoJLyoqKi8gfSksCgkvKiAzMSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCW1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNzkpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgoJLyoqKi8gfSksCgkvKiAzMiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudCkKCXZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKCSAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7Cgl9OwoKCS8qKiovIH0pLAoJLyogMzMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoKCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJdmFyIF9zZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOwoKCXZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpOwoKCXZhciBfY3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7CgoJdmFyIF9jcmVhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlKTsKCgl2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsKCgl2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgewoJICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShzdXBlckNsYXNzKSkpOwoJICB9CgoJICBzdWJDbGFzcy5wcm90b3R5cGUgPSAoMCwgX2NyZWF0ZTIuZGVmYXVsdCkoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewoJICAgIGNvbnN0cnVjdG9yOiB7CgkgICAgICB2YWx1ZTogc3ViQ2xhc3MsCgkgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKCSAgICAgIHdyaXRhYmxlOiB0cnVlLAoJICAgICAgY29uZmlndXJhYmxlOiB0cnVlCgkgICAgfQoJICB9KTsKCSAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCA/ICgwLCBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7Cgl9OwoKCS8qKiovIH0pLAoJLyogMzQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoKCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7CgoJdmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkgewoJICBpZiAoIXNlbGYpIHsKCSAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwoJICB9CgoJICByZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKGNhbGwpKSA9PT0gIm9iamVjdCIgfHwgdHlwZW9mIGNhbGwgPT09ICJmdW5jdGlvbiIpID8gY2FsbCA6IHNlbGY7Cgl9OwoKCS8qKiovIH0pLAoJLyogMzUgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKCXZhciBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKCSAgLCBkUHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpCgkgICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KQoJICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikoJ0lFX1BST1RPJykKCSAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH0KCSAgLCBQUk9UT1RZUEUgICA9ICdwcm90b3R5cGUnOwoKCS8vIENyZWF0ZSBvYmplY3Qgd2l0aCBmYWtlIGBudWxsYCBwcm90b3R5cGU6IHVzZSBpZnJhbWUgT2JqZWN0IHdpdGggY2xlYXJlZCBwcm90b3R5cGUKCXZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24oKXsKCSAgLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWcKCSAgdmFyIGlmcmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpKCdpZnJhbWUnKQoJICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoCgkgICAgLCBsdCAgICAgPSAnPCcKCSAgICAsIGd0ICAgICA9ICc+JwoJICAgICwgaWZyYW1lRG9jdW1lbnQ7CgkgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoJICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKS5hcHBlbmRDaGlsZChpZnJhbWUpOwoJICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsCgkgIC8vIGNyZWF0ZURpY3QgPSBpZnJhbWUuY29udGVudFdpbmRvdy5PYmplY3Q7CgkgIC8vIGh0bWwucmVtb3ZlQ2hpbGQoaWZyYW1lKTsKCSAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDsKCSAgaWZyYW1lRG9jdW1lbnQub3BlbigpOwoJICBpZnJhbWVEb2N1bWVudC53cml0ZShsdCArICdzY3JpcHQnICsgZ3QgKyAnZG9jdW1lbnQuRj1PYmplY3QnICsgbHQgKyAnL3NjcmlwdCcgKyBndCk7CgkgIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7CgkgIGNyZWF0ZURpY3QgPSBpZnJhbWVEb2N1bWVudC5GOwoJICB3aGlsZShpLS0pZGVsZXRlIGNyZWF0ZURpY3RbUFJPVE9UWVBFXVtlbnVtQnVnS2V5c1tpXV07CgkgIHJldHVybiBjcmVhdGVEaWN0KCk7Cgl9OwoKCW1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiBjcmVhdGUoTywgUHJvcGVydGllcyl7CgkgIHZhciByZXN1bHQ7CgkgIGlmKE8gIT09IG51bGwpewoJICAgIEVtcHR5W1BST1RPVFlQRV0gPSBhbk9iamVjdChPKTsKCSAgICByZXN1bHQgPSBuZXcgRW1wdHk7CgkgICAgRW1wdHlbUFJPVE9UWVBFXSA9IG51bGw7CgkgICAgLy8gYWRkICJfX3Byb3RvX18iIGZvciBPYmplY3QuZ2V0UHJvdG90eXBlT2YgcG9seWZpbGwKCSAgICByZXN1bHRbSUVfUFJPVE9dID0gTzsKCSAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTsKCSAgcmV0dXJuIFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IGRQcyhyZXN1bHQsIFByb3BlcnRpZXMpOwoJfTsKCgoJLyoqKi8gfSksCgkvKiAzNiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCW1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMzcpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgoJLyoqKi8gfSksCgkvKiAzNyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCV9fd2VicGFja19yZXF1aXJlX18oMzkpOwoJdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7CgkgIHJldHVybiAkT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2MpOwoJfTsKCgkvKioqLyB9KSwKCS8qIDM4ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCXZhciBMSUJSQVJZICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpCgkgICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCgkgICwgcmVkZWZpbmUgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KQoJICAsIGhpZGUgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KQoJICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKCSAgLCBJdGVyYXRvcnMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpCgkgICwgJGl0ZXJDcmVhdGUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKQoJICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkKCSAgLCBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpCgkgICwgSVRFUkFUT1IgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpCgkgICwgQlVHR1kgICAgICAgICAgPSAhKFtdLmtleXMgJiYgJ25leHQnIGluIFtdLmtleXMoKSkgLy8gU2FmYXJpIGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YAoJICAsIEZGX0lURVJBVE9SICAgID0gJ0BAaXRlcmF0b3InCgkgICwgS0VZUyAgICAgICAgICAgPSAna2V5cycKCSAgLCBWQUxVRVMgICAgICAgICA9ICd2YWx1ZXMnOwoKCXZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07CgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihCYXNlLCBOQU1FLCBDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpewoJICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7CgkgIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXsKCSAgICBpZighQlVHR1kgJiYga2luZCBpbiBwcm90bylyZXR1cm4gcHJvdG9ba2luZF07CgkgICAgc3dpdGNoKGtpbmQpewoJICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwoJICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTsKCSAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07CgkgIH07CgkgIHZhciBUQUcgICAgICAgID0gTkFNRSArICcgSXRlcmF0b3InCgkgICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVMKCSAgICAsIFZBTFVFU19CVUcgPSBmYWxzZQoJICAgICwgcHJvdG8gICAgICA9IEJhc2UucHJvdG90eXBlCgkgICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdCgkgICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVCkKCSAgICAsICRlbnRyaWVzICAgPSBERUZBVUxUID8gIURFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZCgnZW50cmllcycpIDogdW5kZWZpbmVkCgkgICAgLCAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZQoJICAgICwgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTsKCSAgLy8gRml4IG5hdGl2ZQoJICBpZigkYW55TmF0aXZlKXsKCSAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSkpOwoJICAgIGlmKEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlKXsKCSAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKCSAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpOwoJICAgICAgLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzCgkgICAgICBpZighTElCUkFSWSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpOwoJICAgIH0KCSAgfQoJICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGCgkgIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7CgkgICAgVkFMVUVTX0JVRyA9IHRydWU7CgkgICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsgfTsKCSAgfQoJICAvLyBEZWZpbmUgaXRlcmF0b3IKCSAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpewoJICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7CgkgIH0KCSAgLy8gUGx1ZyBmb3IgbGlicmFyeQoJICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDsKCSAgSXRlcmF0b3JzW1RBR10gID0gcmV0dXJuVGhpczsKCSAgaWYoREVGQVVMVCl7CgkgICAgbWV0aG9kcyA9IHsKCSAgICAgIHZhbHVlczogIERFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLAoJICAgICAga2V5czogICAgSVNfU0VUICAgICA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLAoJICAgICAgZW50cmllczogJGVudHJpZXMKCSAgICB9OwoJICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpewoJICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7CgkgICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTsKCSAgfQoJICByZXR1cm4gbWV0aG9kczsKCX07CgoJLyoqKi8gfSksCgkvKiAzOSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCS8vIDE5LjEuMi40IC8gMTUuMi4zLjYgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCgkkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLCAnT2JqZWN0Jywge2RlZmluZVByb3BlcnR5OiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmZ9KTsKCgkvKioqLyB9KSwKCS8qIDQwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg1MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDQxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJZXhwb3J0cy5mID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7CgoJLyoqKi8gfSksCgkvKiA0MiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCW1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgoJLyoqKi8gfSksCgkvKiA0MyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCgl2YXIgaGFzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQoJICAsIHRvT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikKCSAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpCgkgICwgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlOwoKCW1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pewoJICBPID0gdG9PYmplY3QoTyk7CgkgIGlmKGhhcyhPLCBJRV9QUk9UTykpcmV0dXJuIE9bSUVfUFJPVE9dOwoJICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXsKCSAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7CgkgIH0gcmV0dXJuIE8gaW5zdGFuY2VvZiBPYmplY3QgPyBPYmplY3RQcm90byA6IG51bGw7Cgl9OwoKCS8qKiovIH0pLAoJLyogNDQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgaGFzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKCSAgLCB0b0lPYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQoJICAsIGFycmF5SW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpKGZhbHNlKQoJICAsIElFX1BST1RPICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpOwoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBuYW1lcyl7CgkgIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQoJICAgICwgaSAgICAgID0gMAoJICAgICwgcmVzdWx0ID0gW10KCSAgICAsIGtleTsKCSAgZm9yKGtleSBpbiBPKWlmKGtleSAhPSBJRV9QUk9UTyloYXMoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpOwoJICAvLyBEb24ndCBlbnVtIGJ1ZyAmIGhpZGRlbiBrZXlzCgkgIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpaWYoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKXsKCSAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpOwoJICB9CgkgIHJldHVybiByZXN1bHQ7Cgl9OwoKCS8qKiovIH0pLAoJLyogNDUgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMKCXZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KQoJICAsIGNvcmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApCgkgICwgZmFpbHMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGV4ZWMpewoJICB2YXIgZm4gID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldCgkgICAgLCBleHAgPSB7fTsKCSAgZXhwW0tFWV0gPSBleGVjKGZuKTsKCSAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbigpeyBmbigxKTsgfSksICdPYmplY3QnLCBleHApOwoJfTsKCgkvKioqLyB9KSwKCS8qIDQ2ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKCS8qKiovIH0pLAoJLyogNDcgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyA3LjEuMTUgVG9MZW5ndGgKCXZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQoJICAsIG1pbiAgICAgICA9IE1hdGgubWluOwoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CgkgIHJldHVybiBpdCA+IDAgPyBtaW4odG9JbnRlZ2VyKGl0KSwgMHgxZmZmZmZmZmZmZmZmZikgOiAwOyAvLyBwb3coMiwgNTMpIC0gMSA9PSA5MDA3MTk5MjU0NzQwOTkxCgl9OwoKCS8qKiovIH0pLAoJLyogNDggKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCgkgICwgY29yZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApCgkgICwgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQoJICAsIHdrc0V4dCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkKCSAgLCBkZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZjsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7CgkgIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7CgkgIGlmKG5hbWUuY2hhckF0KDApICE9ICdfJyAmJiAhKG5hbWUgaW4gJFN5bWJvbCkpZGVmaW5lUHJvcGVydHkoJFN5bWJvbCwgbmFtZSwge3ZhbHVlOiB3a3NFeHQuZihuYW1lKX0pOwoJfTsKCgkvKioqLyB9KSwKCS8qIDQ5ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKCgkvKioqLyB9KSwKCS8qIDUwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCXZhciAkYXQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NikodHJ1ZSk7CgoJLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQoJX193ZWJwYWNrX3JlcXVpcmVfXygzOCkoU3RyaW5nLCAnU3RyaW5nJywgZnVuY3Rpb24oaXRlcmF0ZWQpewoJICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0CgkgIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4CgkvLyAyMS4xLjUuMi4xICVTdHJpbmdJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpCgl9LCBmdW5jdGlvbigpewoJICB2YXIgTyAgICAgPSB0aGlzLl90CgkgICAgLCBpbmRleCA9IHRoaXMuX2kKCSAgICAsIHBvaW50OwoJICBpZihpbmRleCA+PSBPLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9OwoJICBwb2ludCA9ICRhdChPLCBpbmRleCk7CgkgIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoOwoJICByZXR1cm4ge3ZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2V9OwoJfSk7CgoJLyoqKi8gfSksCgkvKiA1MSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCV9fd2VicGFja19yZXF1aXJlX18oNjkpOwoJdmFyIGdsb2JhbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCgkgICwgaGlkZSAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikKCSAgLCBJdGVyYXRvcnMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkKCSAgLCBUT19TVFJJTkdfVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsKCglmb3IodmFyIGNvbGxlY3Rpb25zID0gWydOb2RlTGlzdCcsICdET01Ub2tlbkxpc3QnLCAnTWVkaWFMaXN0JywgJ1N0eWxlU2hlZXRMaXN0JywgJ0NTU1J1bGVMaXN0J10sIGkgPSAwOyBpIDwgNTsgaSsrKXsKCSAgdmFyIE5BTUUgICAgICAgPSBjb2xsZWN0aW9uc1tpXQoJICAgICwgQ29sbGVjdGlvbiA9IGdsb2JhbFtOQU1FXQoJICAgICwgcHJvdG8gICAgICA9IENvbGxlY3Rpb24gJiYgQ29sbGVjdGlvbi5wcm90b3R5cGU7CgkgIGlmKHByb3RvICYmICFwcm90b1tUT19TVFJJTkdfVEFHXSloaWRlKHByb3RvLCBUT19TVFJJTkdfVEFHLCBOQU1FKTsKCSAgSXRlcmF0b3JzW05BTUVdID0gSXRlcmF0b3JzLkFycmF5OwoJfQoKCS8qKiovIH0pLAoJLyogNTIgKi8sCgkvKiA1MyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBjb3JlICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKCSAgLCAkSlNPTiA9IGNvcmUuSlNPTiB8fCAoY29yZS5KU09OID0ge3N0cmluZ2lmeTogSlNPTi5zdHJpbmdpZnl9KTsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwoJICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpOwoJfTsKCgkvKioqLyB9KSwKCS8qIDU0ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoKCgkvKioqLyB9KSwKCS8qIDU1ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKCXZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQoJICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJykKCSAgLy8gRVMzIHdyb25nIGhlcmUKCSAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJzsKCgkvLyBmYWxsYmFjayBmb3IgSUUxMSBTY3JpcHQgQWNjZXNzIERlbmllZCBlcnJvcgoJdmFyIHRyeUdldCA9IGZ1bmN0aW9uKGl0LCBrZXkpewoJICB0cnkgewoJICAgIHJldHVybiBpdFtrZXldOwoJICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9Cgl9OwoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJICB2YXIgTywgVCwgQjsKCSAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnCgkgICAgLy8gQEB0b1N0cmluZ1RhZyBjYXNlCgkgICAgOiB0eXBlb2YgKFQgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRBRykpID09ICdzdHJpbmcnID8gVAoJICAgIC8vIGJ1aWx0aW5UYWcgY2FzZQoJICAgIDogQVJHID8gY29mKE8pCgkgICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFjawoJICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCOwoJfTsKCgkvKioqLyB9KSwKCS8qIDU2ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3MKCXZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCW1vZHVsZS5leHBvcnRzID0gT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCkgPyBPYmplY3QgOiBmdW5jdGlvbihpdCl7CgkgIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTsKCX07CgoJLyoqKi8gfSksCgkvKiA1NyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBwSUUgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpCgkgICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQoJICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKCSAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpCgkgICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQoJICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkKCSAgLCBnT1BEICAgICAgICAgICA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CgoJZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSA/IGdPUEQgOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCl7CgkgIE8gPSB0b0lPYmplY3QoTyk7CgkgIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKCSAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHsKCSAgICByZXR1cm4gZ09QRChPLCBQKTsKCSAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQoJICBpZihoYXMoTywgUCkpcmV0dXJuIGNyZWF0ZURlc2MoIXBJRS5mLmNhbGwoTywgUCksIE9bUF0pOwoJfTsKCgkvKioqLyB9KSwKCS8qIDU4ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJZXhwb3J0cy5mID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczsKCgkvKioqLyB9KSwKCS8qIDU5ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCglleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKCXZhciBfaXRlcmF0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTsKCgl2YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTsKCgl2YXIgX3N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpOwoKCXZhciBfc3ltYm9sMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N5bWJvbCk7CgoJdmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgX2l0ZXJhdG9yMi5kZWZhdWx0ID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mKF9pdGVyYXRvcjIuZGVmYXVsdCkgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewoJICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsKCX0gOiBmdW5jdGlvbiAob2JqKSB7CgkgIHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmogPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKG9iaik7Cgl9OwoKCS8qKiovIH0pLAoJLyogNjAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH07CgoJLyoqKi8gfSksCgkvKiA2MSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIGZhbHNlIC0+IEFycmF5I2luZGV4T2YKCS8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzCgl2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKCSAgLCB0b0xlbmd0aCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KQoJICAsIHRvSW5kZXggICA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpOwoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7CgkgIHJldHVybiBmdW5jdGlvbigkdGhpcywgZWwsIGZyb21JbmRleCl7CgkgICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCgkdGhpcykKCSAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpCgkgICAgICAsIGluZGV4ICA9IHRvSW5kZXgoZnJvbUluZGV4LCBsZW5ndGgpCgkgICAgICAsIHZhbHVlOwoJICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KCSAgICBpZihJU19JTkNMVURFUyAmJiBlbCAhPSBlbCl3aGlsZShsZW5ndGggPiBpbmRleCl7CgkgICAgICB2YWx1ZSA9IE9baW5kZXgrK107CgkgICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTsKCSAgICAvLyBBcnJheSN0b0luZGV4IGlnbm9yZXMgaG9sZXMsIEFycmF5I2luY2x1ZGVzIC0gbm90CgkgICAgfSBlbHNlIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTyl7CgkgICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7CgkgICAgfSByZXR1cm4gIUlTX0lOQ0xVREVTICYmIC0xOwoJICB9OwoJfTsKCgkvKioqLyB9KSwKCS8qIDYyICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCXZhciBjcmVhdGUgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpCgkgICwgZGVzY3JpcHRvciAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQoJICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkKCSAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9OwoKCS8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpCglfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKEl0ZXJhdG9yUHJvdG90eXBlLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpLCBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfSk7CgoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCl7CgkgIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwge25leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCl9KTsKCSAgc2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsIE5BTUUgKyAnIEl0ZXJhdG9yJyk7Cgl9OwoKCS8qKiovIH0pLAoJLyogNjMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXsKCSAgcmV0dXJuIHt2YWx1ZTogdmFsdWUsIGRvbmU6ICEhZG9uZX07Cgl9OwoKCS8qKiovIH0pLAoJLyogNjQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgZFAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCgkgICwgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCgkgICwgZ2V0S2V5cyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCgltb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcyl7CgkgIGFuT2JqZWN0KE8pOwoJICB2YXIga2V5cyAgID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKQoJICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgKCSAgICAsIGkgPSAwCgkgICAgLCBQOwoJICB3aGlsZShsZW5ndGggPiBpKWRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7CgkgIHJldHVybiBPOwoJfTsKCgkvKioqLyB9KSwKCS8qIDY1ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQoJdmFyICRrZXlzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KQoJICAsIGhpZGRlbktleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTsKCglleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pewoJICByZXR1cm4gJGtleXMoTywgaGlkZGVuS2V5cyk7Cgl9OwoKCS8qKiovIH0pLAoJLyogNjYgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykKCSAgLCBkZWZpbmVkICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKCS8vIHRydWUgIC0+IFN0cmluZyNhdAoJLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKFRPX1NUUklORyl7CgkgIHJldHVybiBmdW5jdGlvbih0aGF0LCBwb3MpewoJICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpCgkgICAgICAsIGkgPSB0b0ludGVnZXIocG9zKQoJICAgICAgLCBsID0gcy5sZW5ndGgKCSAgICAgICwgYSwgYjsKCSAgICBpZihpIDwgMCB8fCBpID49IGwpcmV0dXJuIFRPX1NUUklORyA/ICcnIDogdW5kZWZpbmVkOwoJICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7CgkgICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmYKCSAgICAgID8gVE9fU1RSSU5HID8gcy5jaGFyQXQoaSkgOiBhCgkgICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDsKCSAgfTsKCX07CgoJLyoqKi8gfSksCgkvKiA2NyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBjdHggICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQoJICAsIGludm9rZSAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpCgkgICwgaHRtbCAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MikKCSAgLCBjZWwgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KQoJICAsIGdsb2JhbCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKCSAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2VzcwoJICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGUKCSAgLCBjbGVhclRhc2sgICAgICAgICAgPSBnbG9iYWwuY2xlYXJJbW1lZGlhdGUKCSAgLCBNZXNzYWdlQ2hhbm5lbCAgICAgPSBnbG9iYWwuTWVzc2FnZUNoYW5uZWwKCSAgLCBjb3VudGVyICAgICAgICAgICAgPSAwCgkgICwgcXVldWUgICAgICAgICAgICAgID0ge30KCSAgLCBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJwoJICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0OwoJdmFyIHJ1biA9IGZ1bmN0aW9uKCl7CgkgIHZhciBpZCA9ICt0aGlzOwoJICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpewoJICAgIHZhciBmbiA9IHF1ZXVlW2lkXTsKCSAgICBkZWxldGUgcXVldWVbaWRdOwoJICAgIGZuKCk7CgkgIH0KCX07Cgl2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7CgkgIHJ1bi5jYWxsKGV2ZW50LmRhdGEpOwoJfTsKCS8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToKCWlmKCFzZXRUYXNrIHx8ICFjbGVhclRhc2spewoJICBzZXRUYXNrID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGZuKXsKCSAgICB2YXIgYXJncyA9IFtdLCBpID0gMTsKCSAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOwoJICAgIHF1ZXVlWysrY291bnRlcl0gPSBmdW5jdGlvbigpewoJICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpOwoJICAgIH07CgkgICAgZGVmZXIoY291bnRlcik7CgkgICAgcmV0dXJuIGNvdW50ZXI7CgkgIH07CgkgIGNsZWFyVGFzayA9IGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGlkKXsKCSAgICBkZWxldGUgcXVldWVbaWRdOwoJICB9OwoJICAvLyBOb2RlLmpzIDAuOC0KCSAgaWYoX193ZWJwYWNrX3JlcXVpcmVfXygxOCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXsKCSAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKCSAgICAgIHByb2Nlc3MubmV4dFRpY2soY3R4KHJ1biwgaWQsIDEpKTsKCSAgICB9OwoJICAvLyBCcm93c2VycyB3aXRoIE1lc3NhZ2VDaGFubmVsLCBpbmNsdWRlcyBXZWJXb3JrZXJzCgkgIH0gZWxzZSBpZihNZXNzYWdlQ2hhbm5lbCl7CgkgICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDsKCSAgICBwb3J0ICAgID0gY2hhbm5lbC5wb3J0MjsKCSAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpc3RlbmVyOwoJICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpOwoJICAvLyBCcm93c2VycyB3aXRoIHBvc3RNZXNzYWdlLCBza2lwIFdlYldvcmtlcnMKCSAgLy8gSUU4IGhhcyBwb3N0TWVzc2FnZSwgYnV0IGl0J3Mgc3luYyAmIHR5cGVvZiBpdHMgcG9zdE1lc3NhZ2UgaXMgJ29iamVjdCcKCSAgfSBlbHNlIGlmKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyl7CgkgICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7CgkgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoaWQgKyAnJywgJyonKTsKCSAgICB9OwoJICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIsIGZhbHNlKTsKCSAgLy8gSUU4LQoJICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0JykpewoJICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewoJICAgICAgaHRtbC5hcHBlbmRDaGlsZChjZWwoJ3NjcmlwdCcpKVtPTlJFQURZU1RBVEVDSEFOR0VdID0gZnVuY3Rpb24oKXsKCSAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTsKCSAgICAgICAgcnVuLmNhbGwoaWQpOwoJICAgICAgfTsKCSAgICB9OwoJICAvLyBSZXN0IG9sZCBicm93c2VycwoJICB9IGVsc2UgewoJICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewoJICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApOwoJICAgIH07CgkgIH0KCX0KCW1vZHVsZS5leHBvcnRzID0gewoJICBzZXQ6ICAgc2V0VGFzaywKCSAgY2xlYXI6IGNsZWFyVGFzawoJfTsKCgkvKioqLyB9KSwKCS8qIDY4ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpCgkgICwgbWF4ICAgICAgID0gTWF0aC5tYXgKCSAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5kZXgsIGxlbmd0aCl7CgkgIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTsKCSAgcmV0dXJuIGluZGV4IDwgMCA/IG1heChpbmRleCArIGxlbmd0aCwgMCkgOiBtaW4oaW5kZXgsIGxlbmd0aCk7Cgl9OwoKCS8qKiovIH0pLAoJLyogNjkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoJdmFyIGFkZFRvVW5zY29wYWJsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKQoJICAsIHN0ZXAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKQoJICAsIEl0ZXJhdG9ycyAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQoJICAsIHRvSU9iamVjdCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKCgkvLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCgkvLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKQoJLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKQoJLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCgltb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7CgkgIHRoaXMuX3QgPSB0b0lPYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXQKCSAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgKCSAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmQKCS8vIDIyLjEuNS4yLjEgJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKQoJfSwgZnVuY3Rpb24oKXsKCSAgdmFyIE8gICAgID0gdGhpcy5fdAoJICAgICwga2luZCAgPSB0aGlzLl9rCgkgICAgLCBpbmRleCA9IHRoaXMuX2krKzsKCSAgaWYoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpewoJICAgIHRoaXMuX3QgPSB1bmRlZmluZWQ7CgkgICAgcmV0dXJuIHN0ZXAoMSk7CgkgIH0KCSAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBpbmRleCk7CgkgIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pOwoJICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7Cgl9LCAndmFsdWVzJyk7CgoJLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQoJSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTsKCglhZGRUb1Vuc2NvcGFibGVzKCdrZXlzJyk7CglhZGRUb1Vuc2NvcGFibGVzKCd2YWx1ZXMnKTsKCWFkZFRvVW5zY29wYWJsZXMoJ2VudHJpZXMnKTsKCgkvKioqLyB9KSwKCS8qIDcwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MCksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDcxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MiksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDcyICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIE1FVEEgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykoJ21ldGEnKQoJICAsIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQoJICAsIGhhcyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKCSAgLCBzZXREZXNjICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZgoJICAsIGlkICAgICAgID0gMDsKCXZhciBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGZ1bmN0aW9uKCl7CgkgIHJldHVybiB0cnVlOwoJfTsKCXZhciBGUkVFWkUgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsKCSAgcmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKTsKCX0pOwoJdmFyIHNldE1ldGEgPSBmdW5jdGlvbihpdCl7CgkgIHNldERlc2MoaXQsIE1FVEEsIHt2YWx1ZTogewoJICAgIGk6ICdPJyArICsraWQsIC8vIG9iamVjdCBJRAoJICAgIHc6IHt9ICAgICAgICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgSURzCgkgIH19KTsKCX07Cgl2YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpewoJICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CgkgIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJyA/IGl0IDogKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyA/ICdTJyA6ICdQJykgKyBpdDsKCSAgaWYoIWhhcyhpdCwgTUVUQSkpewoJICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CgkgICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuICdGJzsKCSAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQoJICAgIGlmKCFjcmVhdGUpcmV0dXJuICdFJzsKCSAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQoJICAgIHNldE1ldGEoaXQpOwoJICAvLyByZXR1cm4gb2JqZWN0IElECgkgIH0gcmV0dXJuIGl0W01FVEFdLmk7Cgl9OwoJdmFyIGdldFdlYWsgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsKCSAgaWYoIWhhcyhpdCwgTUVUQSkpewoJICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CgkgICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuIHRydWU7CgkgICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKCSAgICBpZighY3JlYXRlKXJldHVybiBmYWxzZTsKCSAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQoJICAgIHNldE1ldGEoaXQpOwoJICAvLyByZXR1cm4gaGFzaCB3ZWFrIGNvbGxlY3Rpb25zIElEcwoJICB9IHJldHVybiBpdFtNRVRBXS53OwoJfTsKCS8vIGFkZCBtZXRhZGF0YSBvbiBmcmVlemUtZmFtaWx5IG1ldGhvZHMgY2FsbGluZwoJdmFyIG9uRnJlZXplID0gZnVuY3Rpb24oaXQpewoJICBpZihGUkVFWkUgJiYgbWV0YS5ORUVEICYmIGlzRXh0ZW5zaWJsZShpdCkgJiYgIWhhcyhpdCwgTUVUQSkpc2V0TWV0YShpdCk7CgkgIHJldHVybiBpdDsKCX07Cgl2YXIgbWV0YSA9IG1vZHVsZS5leHBvcnRzID0gewoJICBLRVk6ICAgICAgTUVUQSwKCSAgTkVFRDogICAgIGZhbHNlLAoJICBmYXN0S2V5OiAgZmFzdEtleSwKCSAgZ2V0V2VhazogIGdldFdlYWssCgkgIG9uRnJlZXplOiBvbkZyZWV6ZQoJfTsKCgkvKioqLyB9KSwKCS8qIDczICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIGNsYXNzb2YgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpCgkgICwgSVRFUkFUT1IgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQoJICAsIEl0ZXJhdG9ycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoJbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpewoJICBpZihpdCAhPSB1bmRlZmluZWQpcmV0dXJuIGl0W0lURVJBVE9SXQoJICAgIHx8IGl0WydAQGl0ZXJhdG9yJ10KCSAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldOwoJfTsKCgkvKioqLyB9KSwKCS8qIDc0ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg3OCksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDc1ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MSksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDc2ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDc3ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4NCksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDc4ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJX193ZWJwYWNrX3JlcXVpcmVfXygxMDApOwoJdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlKFAsIEQpewoJICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7Cgl9OwoKCS8qKiovIH0pLAoJLyogNzkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSk7Cgltb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmdldFByb3RvdHlwZU9mOwoKCS8qKiovIH0pLAoJLyogODAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7Cgltb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmtleXM7CgoJLyoqKi8gfSksCgkvKiA4MSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCV9fd2VicGFja19yZXF1aXJlX18oMTAzKTsKCW1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Quc2V0UHJvdG90eXBlT2Y7CgoJLyoqKi8gfSksCgkvKiA4MiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCV9fd2VicGFja19yZXF1aXJlX18oNTQpOwoJX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7CglfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTsKCV9fd2VicGFja19yZXF1aXJlX18oMTA0KTsKCW1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5Qcm9taXNlOwoKCS8qKiovIH0pLAoJLyogODMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSk7CglfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKCV9fd2VicGFja19yZXF1aXJlX18oMTA2KTsKCV9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKCW1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5TeW1ib2w7CgoJLyoqKi8gfSksCgkvKiA4NCAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCV9fd2VicGFja19yZXF1aXJlX18oNTApOwoJX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7Cgltb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpLmYoJ2l0ZXJhdG9yJyk7CgoJLyoqKi8gfSksCgkvKiA4NSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCl7CgkgIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgKGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpKXsKCSAgICB0aHJvdyBUeXBlRXJyb3IobmFtZSArICc6IGluY29ycmVjdCBpbnZvY2F0aW9uIScpOwoJICB9IHJldHVybiBpdDsKCX07CgoJLyoqKi8gfSksCgkvKiA4NiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIGFsbCBlbnVtZXJhYmxlIG9iamVjdCBrZXlzLCBpbmNsdWRlcyBzeW1ib2xzCgl2YXIgZ2V0S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpCgkgICwgZ09QUyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpCgkgICwgcElFICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CgkgIHZhciByZXN1bHQgICAgID0gZ2V0S2V5cyhpdCkKCSAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmY7CgkgIGlmKGdldFN5bWJvbHMpewoJICAgIHZhciBzeW1ib2xzID0gZ2V0U3ltYm9scyhpdCkKCSAgICAgICwgaXNFbnVtICA9IHBJRS5mCgkgICAgICAsIGkgICAgICAgPSAwCgkgICAgICAsIGtleTsKCSAgICB3aGlsZShzeW1ib2xzLmxlbmd0aCA+IGkpaWYoaXNFbnVtLmNhbGwoaXQsIGtleSA9IHN5bWJvbHNbaSsrXSkpcmVzdWx0LnB1c2goa2V5KTsKCSAgfSByZXR1cm4gcmVzdWx0OwoJfTsKCgkvKioqLyB9KSwKCS8qIDg3ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIGN0eCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKCSAgLCBjYWxsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpCgkgICwgaXNBcnJheUl0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KQoJICAsIGFuT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQoJICAsIHRvTGVuZ3RoICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykKCSAgLCBnZXRJdGVyRm4gICA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpCgkgICwgQlJFQUsgICAgICAgPSB7fQoJICAsIFJFVFVSTiAgICAgID0ge307Cgl2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmFibGUsIGVudHJpZXMsIGZuLCB0aGF0LCBJVEVSQVRPUil7CgkgIHZhciBpdGVyRm4gPSBJVEVSQVRPUiA/IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyYWJsZTsgfSA6IGdldEl0ZXJGbihpdGVyYWJsZSkKCSAgICAsIGYgICAgICA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKQoJICAgICwgaW5kZXggID0gMAoJICAgICwgbGVuZ3RoLCBzdGVwLCBpdGVyYXRvciwgcmVzdWx0OwoJICBpZih0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ZXJhYmxlICsgJyBpcyBub3QgaXRlcmFibGUhJyk7CgkgIC8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvcgoJICBpZihpc0FycmF5SXRlcihpdGVyRm4pKWZvcihsZW5ndGggPSB0b0xlbmd0aChpdGVyYWJsZS5sZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKyl7CgkgICAgcmVzdWx0ID0gZW50cmllcyA/IGYoYW5PYmplY3Qoc3RlcCA9IGl0ZXJhYmxlW2luZGV4XSlbMF0sIHN0ZXBbMV0pIDogZihpdGVyYWJsZVtpbmRleF0pOwoJICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsKCSAgfSBlbHNlIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyApewoJICAgIHJlc3VsdCA9IGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpOwoJICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsKCSAgfQoJfTsKCWV4cG9ydHMuQlJFQUsgID0gQlJFQUs7CglleHBvcnRzLlJFVFVSTiA9IFJFVFVSTjsKCgkvKioqLyB9KSwKCS8qIDg4ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgoJLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCBhcmdzLCB0aGF0KXsKCSAgdmFyIHVuID0gdGhhdCA9PT0gdW5kZWZpbmVkOwoJICBzd2l0Y2goYXJncy5sZW5ndGgpewoJICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKQoJICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0KTsKCSAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pCgkgICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pOwoJICAgIGNhc2UgMjogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSkKCSAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7CgkgICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKQoJICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsKCSAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pCgkgICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOwoJICB9IHJldHVybiAgICAgICAgICAgICAgZm4uYXBwbHkodGhhdCwgYXJncyk7Cgl9OwoKCS8qKiovIH0pLAoJLyogODkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkvLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yCgl2YXIgSXRlcmF0b3JzICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpCgkgICwgSVRFUkFUT1IgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykKCSAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewoJICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpOwoJfTsKCgkvKioqLyB9KSwKCS8qIDkwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gNy4yLjIgSXNBcnJheShhcmd1bWVudCkKCXZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCW1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZyl7CgkgIHJldHVybiBjb2YoYXJnKSA9PSAnQXJyYXknOwoJfTsKCgkvKioqLyB9KSwKCS8qIDkxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcgoJdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmF0b3IsIGZuLCB2YWx1ZSwgZW50cmllcyl7CgkgIHRyeSB7CgkgICAgcmV0dXJuIGVudHJpZXMgPyBmbihhbk9iamVjdCh2YWx1ZSlbMF0sIHZhbHVlWzFdKSA6IGZuKHZhbHVlKTsKCSAgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbikKCSAgfSBjYXRjaChlKXsKCSAgICB2YXIgcmV0ID0gaXRlcmF0b3JbJ3JldHVybiddOwoJICAgIGlmKHJldCAhPT0gdW5kZWZpbmVkKWFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7CgkgICAgdGhyb3cgZTsKCSAgfQoJfTsKCgkvKioqLyB9KSwKCS8qIDkyICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIElURVJBVE9SICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykKCSAgLCBTQUZFX0NMT1NJTkcgPSBmYWxzZTsKCgl0cnkgewoJICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7CgkgIHJpdGVyWydyZXR1cm4nXSA9IGZ1bmN0aW9uKCl7IFNBRkVfQ0xPU0lORyA9IHRydWU7IH07CgkgIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pOwoJfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYywgc2tpcENsb3NpbmcpewoJICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7CgkgIHZhciBzYWZlID0gZmFsc2U7CgkgIHRyeSB7CgkgICAgdmFyIGFyciAgPSBbN10KCSAgICAgICwgaXRlciA9IGFycltJVEVSQVRPUl0oKTsKCSAgICBpdGVyLm5leHQgPSBmdW5jdGlvbigpeyByZXR1cm4ge2RvbmU6IHNhZmUgPSB0cnVlfTsgfTsKCSAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07CgkgICAgZXhlYyhhcnIpOwoJICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9CgkgIHJldHVybiBzYWZlOwoJfTsKCgkvKioqLyB9KSwKCS8qIDkzICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJdmFyIGdldEtleXMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpCgkgICwgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7Cgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgZWwpewoJICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdCkKCSAgICAsIGtleXMgICA9IGdldEtleXMoTykKCSAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoCgkgICAgLCBpbmRleCAgPSAwCgkgICAgLCBrZXk7CgkgIHdoaWxlKGxlbmd0aCA+IGluZGV4KWlmKE9ba2V5ID0ga2V5c1tpbmRleCsrXV0gPT09IGVsKXJldHVybiBrZXk7Cgl9OwoKCS8qKiovIH0pLAoJLyogOTQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgZ2xvYmFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQoJICAsIG1hY3JvdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpLnNldAoJICAsIE9ic2VydmVyICA9IGdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyCgkgICwgcHJvY2VzcyAgID0gZ2xvYmFsLnByb2Nlc3MKCSAgLCBQcm9taXNlICAgPSBnbG9iYWwuUHJvbWlzZQoJICAsIGlzTm9kZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJzsKCgltb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7CgkgIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7CgoJICB2YXIgZmx1c2ggPSBmdW5jdGlvbigpewoJICAgIHZhciBwYXJlbnQsIGZuOwoJICAgIGlmKGlzTm9kZSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKXBhcmVudC5leGl0KCk7CgkgICAgd2hpbGUoaGVhZCl7CgkgICAgICBmbiAgID0gaGVhZC5mbjsKCSAgICAgIGhlYWQgPSBoZWFkLm5leHQ7CgkgICAgICB0cnkgewoJICAgICAgICBmbigpOwoJICAgICAgfSBjYXRjaChlKXsKCSAgICAgICAgaWYoaGVhZClub3RpZnkoKTsKCSAgICAgICAgZWxzZSBsYXN0ID0gdW5kZWZpbmVkOwoJICAgICAgICB0aHJvdyBlOwoJICAgICAgfQoJICAgIH0gbGFzdCA9IHVuZGVmaW5lZDsKCSAgICBpZihwYXJlbnQpcGFyZW50LmVudGVyKCk7CgkgIH07CgoJICAvLyBOb2RlLmpzCgkgIGlmKGlzTm9kZSl7CgkgICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsKCSAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOwoJICAgIH07CgkgIC8vIGJyb3dzZXJzIHdpdGggTXV0YXRpb25PYnNlcnZlcgoJICB9IGVsc2UgaWYoT2JzZXJ2ZXIpewoJICAgIHZhciB0b2dnbGUgPSB0cnVlCgkgICAgICAsIG5vZGUgICA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTsKCSAgICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKCSAgICBub3RpZnkgPSBmdW5jdGlvbigpewoJICAgICAgbm9kZS5kYXRhID0gdG9nZ2xlID0gIXRvZ2dsZTsKCSAgICB9OwoJICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZQoJICB9IGVsc2UgaWYoUHJvbWlzZSAmJiBQcm9taXNlLnJlc29sdmUpewoJICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7CgkgICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsKCSAgICAgIHByb21pc2UudGhlbihmbHVzaCk7CgkgICAgfTsKCSAgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjoKCSAgLy8gLSBzZXRJbW1lZGlhdGUKCSAgLy8gLSBNZXNzYWdlQ2hhbm5lbAoJICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnCgkgIC8vIC0gb25yZWFkeXN0YXRlY2hhbmdlCgkgIC8vIC0gc2V0VGltZW91dAoJICB9IGVsc2UgewoJICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7CgkgICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpCgkgICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTsKCSAgICB9OwoJICB9CgoJICByZXR1cm4gZnVuY3Rpb24oZm4pewoJICAgIHZhciB0YXNrID0ge2ZuOiBmbiwgbmV4dDogdW5kZWZpbmVkfTsKCSAgICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7CgkgICAgaWYoIWhlYWQpewoJICAgICAgaGVhZCA9IHRhc2s7CgkgICAgICBub3RpZnkoKTsKCSAgICB9IGxhc3QgPSB0YXNrOwoJICB9OwoJfTsKCgkvKioqLyB9KSwKCS8qIDk1ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdwoJdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpCgkgICwgZ09QTiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZgoJICAsIHRvU3RyaW5nICA9IHt9LnRvU3RyaW5nOwoKCXZhciB3aW5kb3dOYW1lcyA9IHR5cGVvZiB3aW5kb3cgPT0gJ29iamVjdCcgJiYgd2luZG93ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzCgkgID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdOwoKCXZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uKGl0KXsKCSAgdHJ5IHsKCSAgICByZXR1cm4gZ09QTihpdCk7CgkgIH0gY2F0Y2goZSl7CgkgICAgcmV0dXJuIHdpbmRvd05hbWVzLnNsaWNlKCk7CgkgIH0KCX07CgoJbW9kdWxlLmV4cG9ydHMuZiA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpewoJICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpOwoJfTsKCgoJLyoqKi8gfSksCgkvKiA5NiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCXZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMsIHNhZmUpewoJICBmb3IodmFyIGtleSBpbiBzcmMpewoJICAgIGlmKHNhZmUgJiYgdGFyZ2V0W2tleV0pdGFyZ2V0W2tleV0gPSBzcmNba2V5XTsKCSAgICBlbHNlIGhpZGUodGFyZ2V0LCBrZXksIHNyY1trZXldKTsKCSAgfSByZXR1cm4gdGFyZ2V0OwoJfTsKCgkvKioqLyB9KSwKCS8qIDk3ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuCgkvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwoJdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQoJICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKCXZhciBjaGVjayA9IGZ1bmN0aW9uKE8sIHByb3RvKXsKCSAgYW5PYmplY3QoTyk7CgkgIGlmKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpdGhyb3cgVHlwZUVycm9yKHByb3RvICsgIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKTsKCX07Cgltb2R1bGUuZXhwb3J0cyA9IHsKCSAgc2V0OiBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gLy8gZXNsaW50LWRpc2FibGUtbGluZQoJICAgIGZ1bmN0aW9uKHRlc3QsIGJ1Z2d5LCBzZXQpewoJICAgICAgdHJ5IHsKCSAgICAgICAgc2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoRnVuY3Rpb24uY2FsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyg1NykuZihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0LCAyKTsKCSAgICAgICAgc2V0KHRlc3QsIFtdKTsKCSAgICAgICAgYnVnZ3kgPSAhKHRlc3QgaW5zdGFuY2VvZiBBcnJheSk7CgkgICAgICB9IGNhdGNoKGUpeyBidWdneSA9IHRydWU7IH0KCSAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90byl7CgkgICAgICAgIGNoZWNrKE8sIHByb3RvKTsKCSAgICAgICAgaWYoYnVnZ3kpTy5fX3Byb3RvX18gPSBwcm90bzsKCSAgICAgICAgZWxzZSBzZXQoTywgcHJvdG8pOwoJICAgICAgICByZXR1cm4gTzsKCSAgICAgIH07CgkgICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSwKCSAgY2hlY2s6IGNoZWNrCgl9OwoKCS8qKiovIH0pLAoJLyogOTggKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoJdmFyIGdsb2JhbCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQoJICAsIGNvcmUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQoJICAsIGRQICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQoJICAsIERFU0NSSVBUT1JTID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKQoJICAsIFNQRUNJRVMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpOwoKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZKXsKCSAgdmFyIEMgPSB0eXBlb2YgY29yZVtLRVldID09ICdmdW5jdGlvbicgPyBjb3JlW0tFWV0gOiBnbG9iYWxbS0VZXTsKCSAgaWYoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSlkUC5mKEMsIFNQRUNJRVMsIHsKCSAgICBjb25maWd1cmFibGU6IHRydWUsCgkgICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfQoJICB9KTsKCX07CgoJLyoqKi8gfSksCgkvKiA5OSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIDcuMy4yMCBTcGVjaWVzQ29uc3RydWN0b3IoTywgZGVmYXVsdENvbnN0cnVjdG9yKQoJdmFyIGFuT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKCSAgLCBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQoJICAsIFNQRUNJRVMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKTsKCW1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTywgRCl7CgkgIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3IsIFM7CgkgIHJldHVybiBDID09PSB1bmRlZmluZWQgfHwgKFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXSkgPT0gdW5kZWZpbmVkID8gRCA6IGFGdW5jdGlvbihTKTsKCX07CgoJLyoqKi8gfSksCgkvKiAxMDAgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgl2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCkKCS8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQoJJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7Y3JlYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KX0pOwoKCS8qKiovIH0pLAoJLyogMTAxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCgl2YXIgdG9PYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikKCSAgLCAkZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0UHJvdG90eXBlT2YnLCBmdW5jdGlvbigpewoJICByZXR1cm4gZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YoaXQpewoJICAgIHJldHVybiAkZ2V0UHJvdG90eXBlT2YodG9PYmplY3QoaXQpKTsKCSAgfTsKCX0pOwoKCS8qKiovIH0pLAoJLyogMTAyICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pCgl2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQoJICAsICRrZXlzICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7CgoJX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2tleXMnLCBmdW5jdGlvbigpewoJICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7CgkgICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7CgkgIH07Cgl9KTsKCgkvKioqLyB9KSwKCS8qIDEwMyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIDE5LjEuMy4xOSBPYmplY3Quc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pCgl2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7CgkkZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXyg5Nykuc2V0fSk7CgoJLyoqKi8gfSksCgkvKiAxMDQgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoJdmFyIExJQlJBUlkgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpCgkgICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQoJICAsIGN0eCAgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpCgkgICwgY2xhc3NvZiAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSkKCSAgLCAkZXhwb3J0ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCgkgICwgaXNPYmplY3QgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQoJICAsIGFGdW5jdGlvbiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjApCgkgICwgYW5JbnN0YW5jZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkKCSAgLCBmb3JPZiAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KQoJICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpCgkgICwgdGFzayAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0CgkgICwgbWljcm90YXNrICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCkoKQoJICAsIFBST01JU0UgICAgICAgICAgICA9ICdQcm9taXNlJwoJICAsIFR5cGVFcnJvciAgICAgICAgICA9IGdsb2JhbC5UeXBlRXJyb3IKCSAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2VzcwoJICAsICRQcm9taXNlICAgICAgICAgICA9IGdsb2JhbFtQUk9NSVNFXQoJICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCgkgICwgaXNOb2RlICAgICAgICAgICAgID0gY2xhc3NvZihwcm9jZXNzKSA9PSAncHJvY2VzcycKCSAgLCBlbXB0eSAgICAgICAgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9CgkgICwgSW50ZXJuYWwsIEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSwgV3JhcHBlcjsKCgl2YXIgVVNFX05BVElWRSA9ICEhZnVuY3Rpb24oKXsKCSAgdHJ5IHsKCSAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQKCSAgICB2YXIgcHJvbWlzZSAgICAgPSAkUHJvbWlzZS5yZXNvbHZlKDEpCgkgICAgICAsIEZha2VQcm9taXNlID0gKHByb21pc2UuY29uc3RydWN0b3IgPSB7fSlbX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpXSA9IGZ1bmN0aW9uKGV4ZWMpeyBleGVjKGVtcHR5LCBlbXB0eSk7IH07CgkgICAgLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdAoJICAgIHJldHVybiAoaXNOb2RlIHx8IHR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQgPT0gJ2Z1bmN0aW9uJykgJiYgcHJvbWlzZS50aGVuKGVtcHR5KSBpbnN0YW5jZW9mIEZha2VQcm9taXNlOwoJICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9Cgl9KCk7CgoJLy8gaGVscGVycwoJdmFyIHNhbWVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGEsIGIpewoJICAvLyB3aXRoIGxpYnJhcnkgd3JhcHBlciBzcGVjaWFsIGNhc2UKCSAgcmV0dXJuIGEgPT09IGIgfHwgYSA9PT0gJFByb21pc2UgJiYgYiA9PT0gV3JhcHBlcjsKCX07Cgl2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uKGl0KXsKCSAgdmFyIHRoZW47CgkgIHJldHVybiBpc09iamVjdChpdCkgJiYgdHlwZW9mICh0aGVuID0gaXQudGhlbikgPT0gJ2Z1bmN0aW9uJyA/IHRoZW4gOiBmYWxzZTsKCX07Cgl2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsKCSAgcmV0dXJuIHNhbWVDb25zdHJ1Y3RvcigkUHJvbWlzZSwgQykKCSAgICA/IG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKQoJICAgIDogbmV3IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eShDKTsKCX07Cgl2YXIgUHJvbWlzZUNhcGFiaWxpdHkgPSBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsKCSAgdmFyIHJlc29sdmUsIHJlamVjdDsKCSAgdGhpcy5wcm9taXNlID0gbmV3IEMoZnVuY3Rpb24oJCRyZXNvbHZlLCAkJHJlamVjdCl7CgkgICAgaWYocmVzb2x2ZSAhPT0gdW5kZWZpbmVkIHx8IHJlamVjdCAhPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTsKCSAgICByZXNvbHZlID0gJCRyZXNvbHZlOwoJICAgIHJlamVjdCAgPSAkJHJlamVjdDsKCSAgfSk7CgkgIHRoaXMucmVzb2x2ZSA9IGFGdW5jdGlvbihyZXNvbHZlKTsKCSAgdGhpcy5yZWplY3QgID0gYUZ1bmN0aW9uKHJlamVjdCk7Cgl9OwoJdmFyIHBlcmZvcm0gPSBmdW5jdGlvbihleGVjKXsKCSAgdHJ5IHsKCSAgICBleGVjKCk7CgkgIH0gY2F0Y2goZSl7CgkgICAgcmV0dXJuIHtlcnJvcjogZX07CgkgIH0KCX07Cgl2YXIgbm90aWZ5ID0gZnVuY3Rpb24ocHJvbWlzZSwgaXNSZWplY3QpewoJICBpZihwcm9taXNlLl9uKXJldHVybjsKCSAgcHJvbWlzZS5fbiA9IHRydWU7CgkgIHZhciBjaGFpbiA9IHByb21pc2UuX2M7CgkgIG1pY3JvdGFzayhmdW5jdGlvbigpewoJICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YKCSAgICAgICwgb2sgICAgPSBwcm9taXNlLl9zID09IDEKCSAgICAgICwgaSAgICAgPSAwOwoJICAgIHZhciBydW4gPSBmdW5jdGlvbihyZWFjdGlvbil7CgkgICAgICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsCgkgICAgICAgICwgcmVzb2x2ZSA9IHJlYWN0aW9uLnJlc29sdmUKCSAgICAgICAgLCByZWplY3QgID0gcmVhY3Rpb24ucmVqZWN0CgkgICAgICAgICwgZG9tYWluICA9IHJlYWN0aW9uLmRvbWFpbgoJICAgICAgICAsIHJlc3VsdCwgdGhlbjsKCSAgICAgIHRyeSB7CgkgICAgICAgIGlmKGhhbmRsZXIpewoJICAgICAgICAgIGlmKCFvayl7CgkgICAgICAgICAgICBpZihwcm9taXNlLl9oID09IDIpb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSk7CgkgICAgICAgICAgICBwcm9taXNlLl9oID0gMTsKCSAgICAgICAgICB9CgkgICAgICAgICAgaWYoaGFuZGxlciA9PT0gdHJ1ZSlyZXN1bHQgPSB2YWx1ZTsKCSAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZW50ZXIoKTsKCSAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpOwoJICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5leGl0KCk7CgkgICAgICAgICAgfQoJICAgICAgICAgIGlmKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSl7CgkgICAgICAgICAgICByZWplY3QoVHlwZUVycm9yKCdQcm9taXNlLWNoYWluIGN5Y2xlJykpOwoJICAgICAgICAgIH0gZWxzZSBpZih0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKXsKCSAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7CgkgICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTsKCSAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7CgkgICAgICB9IGNhdGNoKGUpewoJICAgICAgICByZWplY3QoZSk7CgkgICAgICB9CgkgICAgfTsKCSAgICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXJ1bihjaGFpbltpKytdKTsgLy8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2gKCSAgICBwcm9taXNlLl9jID0gW107CgkgICAgcHJvbWlzZS5fbiA9IGZhbHNlOwoJICAgIGlmKGlzUmVqZWN0ICYmICFwcm9taXNlLl9oKW9uVW5oYW5kbGVkKHByb21pc2UpOwoJICB9KTsKCX07Cgl2YXIgb25VbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsKCSAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsKCSAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92CgkgICAgICAsIGFicnVwdCwgaGFuZGxlciwgY29uc29sZTsKCSAgICBpZihpc1VuaGFuZGxlZChwcm9taXNlKSl7CgkgICAgICBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7CgkgICAgICAgIGlmKGlzTm9kZSl7CgkgICAgICAgICAgcHJvY2Vzcy5lbWl0KCd1bmhhbmRsZWRSZWplY3Rpb24nLCB2YWx1ZSwgcHJvbWlzZSk7CgkgICAgICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKXsKCSAgICAgICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHZhbHVlfSk7CgkgICAgICAgIH0gZWxzZSBpZigoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKXsKCSAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCB2YWx1ZSk7CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgICAgLy8gQnJvd3NlcnMgc2hvdWxkIG5vdCB0cmlnZ2VyIGByZWplY3Rpb25IYW5kbGVkYCBldmVudCBpZiBpdCB3YXMgaGFuZGxlZCBoZXJlLCBOb2RlSlMgLSBzaG91bGQKCSAgICAgIHByb21pc2UuX2ggPSBpc05vZGUgfHwgaXNVbmhhbmRsZWQocHJvbWlzZSkgPyAyIDogMTsKCSAgICB9IHByb21pc2UuX2EgPSB1bmRlZmluZWQ7CgkgICAgaWYoYWJydXB0KXRocm93IGFicnVwdC5lcnJvcjsKCSAgfSk7Cgl9OwoJdmFyIGlzVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7CgkgIGlmKHByb21pc2UuX2ggPT0gMSlyZXR1cm4gZmFsc2U7CgkgIHZhciBjaGFpbiA9IHByb21pc2UuX2EgfHwgcHJvbWlzZS5fYwoJICAgICwgaSAgICAgPSAwCgkgICAgLCByZWFjdGlvbjsKCSAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSl7CgkgICAgcmVhY3Rpb24gPSBjaGFpbltpKytdOwoJICAgIGlmKHJlYWN0aW9uLmZhaWwgfHwgIWlzVW5oYW5kbGVkKHJlYWN0aW9uLnByb21pc2UpKXJldHVybiBmYWxzZTsKCSAgfSByZXR1cm4gdHJ1ZTsKCX07Cgl2YXIgb25IYW5kbGVVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsKCSAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsKCSAgICB2YXIgaGFuZGxlcjsKCSAgICBpZihpc05vZGUpewoJICAgICAgcHJvY2Vzcy5lbWl0KCdyZWplY3Rpb25IYW5kbGVkJywgcHJvbWlzZSk7CgkgICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub25yZWplY3Rpb25oYW5kbGVkKXsKCSAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogcHJvbWlzZS5fdn0pOwoJICAgIH0KCSAgfSk7Cgl9OwoJdmFyICRyZWplY3QgPSBmdW5jdGlvbih2YWx1ZSl7CgkgIHZhciBwcm9taXNlID0gdGhpczsKCSAgaWYocHJvbWlzZS5fZClyZXR1cm47CgkgIHByb21pc2UuX2QgPSB0cnVlOwoJICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXAKCSAgcHJvbWlzZS5fdiA9IHZhbHVlOwoJICBwcm9taXNlLl9zID0gMjsKCSAgaWYoIXByb21pc2UuX2EpcHJvbWlzZS5fYSA9IHByb21pc2UuX2Muc2xpY2UoKTsKCSAgbm90aWZ5KHByb21pc2UsIHRydWUpOwoJfTsKCXZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKXsKCSAgdmFyIHByb21pc2UgPSB0aGlzCgkgICAgLCB0aGVuOwoJICBpZihwcm9taXNlLl9kKXJldHVybjsKCSAgcHJvbWlzZS5fZCA9IHRydWU7CgkgIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcAoJICB0cnkgewoJICAgIGlmKHByb21pc2UgPT09IHZhbHVlKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsKCSAgICBpZih0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpewoJICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7CgkgICAgICAgIHZhciB3cmFwcGVyID0ge193OiBwcm9taXNlLCBfZDogZmFsc2V9OyAvLyB3cmFwCgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpOwoJICAgICAgICB9IGNhdGNoKGUpewoJICAgICAgICAgICRyZWplY3QuY2FsbCh3cmFwcGVyLCBlKTsKCSAgICAgICAgfQoJICAgICAgfSk7CgkgICAgfSBlbHNlIHsKCSAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTsKCSAgICAgIHByb21pc2UuX3MgPSAxOwoJICAgICAgbm90aWZ5KHByb21pc2UsIGZhbHNlKTsKCSAgICB9CgkgIH0gY2F0Y2goZSl7CgkgICAgJHJlamVjdC5jYWxsKHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfSwgZSk7IC8vIHdyYXAKCSAgfQoJfTsKCgkvLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbAoJaWYoIVVTRV9OQVRJVkUpewoJICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQoJICAkUHJvbWlzZSA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpewoJICAgIGFuSW5zdGFuY2UodGhpcywgJFByb21pc2UsIFBST01JU0UsICdfaCcpOwoJICAgIGFGdW5jdGlvbihleGVjdXRvcik7CgkgICAgSW50ZXJuYWwuY2FsbCh0aGlzKTsKCSAgICB0cnkgewoJICAgICAgZXhlY3V0b3IoY3R4KCRyZXNvbHZlLCB0aGlzLCAxKSwgY3R4KCRyZWplY3QsIHRoaXMsIDEpKTsKCSAgICB9IGNhdGNoKGVycil7CgkgICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTsKCSAgICB9CgkgIH07CgkgIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7CgkgICAgdGhpcy5fYyA9IFtdOyAgICAgICAgICAgICAvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMKCSAgICB0aGlzLl9hID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zCgkgICAgdGhpcy5fcyA9IDA7ICAgICAgICAgICAgICAvLyA8LSBzdGF0ZQoJICAgIHRoaXMuX2QgPSBmYWxzZTsgICAgICAgICAgLy8gPC0gZG9uZQoJICAgIHRoaXMuX3YgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gdmFsdWUKCSAgICB0aGlzLl9oID0gMDsgICAgICAgICAgICAgIC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkCgkgICAgdGhpcy5fbiA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBub3RpZnkKCSAgfTsKCSAgSW50ZXJuYWwucHJvdG90eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NikoJFByb21pc2UucHJvdG90eXBlLCB7CgkgICAgLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkKCSAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKXsKCSAgICAgIHZhciByZWFjdGlvbiAgICA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkUHJvbWlzZSkpOwoJICAgICAgcmVhY3Rpb24ub2sgICAgID0gdHlwZW9mIG9uRnVsZmlsbGVkID09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IHRydWU7CgkgICAgICByZWFjdGlvbi5mYWlsICAgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7CgkgICAgICByZWFjdGlvbi5kb21haW4gPSBpc05vZGUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDsKCSAgICAgIHRoaXMuX2MucHVzaChyZWFjdGlvbik7CgkgICAgICBpZih0aGlzLl9hKXRoaXMuX2EucHVzaChyZWFjdGlvbik7CgkgICAgICBpZih0aGlzLl9zKW5vdGlmeSh0aGlzLCBmYWxzZSk7CgkgICAgICByZXR1cm4gcmVhY3Rpb24ucHJvbWlzZTsKCSAgICB9LAoJICAgIC8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpCgkgICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3RlZCl7CgkgICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7CgkgICAgfQoJICB9KTsKCSAgUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbigpewoJICAgIHZhciBwcm9taXNlICA9IG5ldyBJbnRlcm5hbDsKCSAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlOwoJICAgIHRoaXMucmVzb2x2ZSA9IGN0eCgkcmVzb2x2ZSwgcHJvbWlzZSwgMSk7CgkgICAgdGhpcy5yZWplY3QgID0gY3R4KCRyZWplY3QsIHByb21pc2UsIDEpOwoJICB9OwoJfQoKCSRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtQcm9taXNlOiAkUHJvbWlzZX0pOwoJX193ZWJwYWNrX3JlcXVpcmVfXygyMSkoJFByb21pc2UsIFBST01JU0UpOwoJX193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoUFJPTUlTRSk7CglXcmFwcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVtQUk9NSVNFXTsKCgkvLyBzdGF0aWNzCgkkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCBQUk9NSVNFLCB7CgkgIC8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCgkgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHIpewoJICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcykKCSAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0OwoJICAgICQkcmVqZWN0KHIpOwoJICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CgkgIH0KCX0pOwoJJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTElCUkFSWSB8fCAhVVNFX05BVElWRSksIFBST01JU0UsIHsKCSAgLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCgkgIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUoeCl7CgkgICAgLy8gaW5zdGFuY2VvZiBpbnN0ZWFkIG9mIGludGVybmFsIHNsb3QgY2hlY2sgYmVjYXVzZSB3ZSBzaG91bGQgZml4IGl0IHdpdGhvdXQgcmVwbGFjZW1lbnQgbmF0aXZlIFByb21pc2UgY29yZQoJICAgIGlmKHggaW5zdGFuY2VvZiAkUHJvbWlzZSAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7CgkgICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKQoJICAgICAgLCAkJHJlc29sdmUgID0gY2FwYWJpbGl0eS5yZXNvbHZlOwoJICAgICQkcmVzb2x2ZSh4KTsKCSAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwoJICB9Cgl9KTsKCSRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIShVU0VfTkFUSVZFICYmIF9fd2VicGFja19yZXF1aXJlX18oOTIpKGZ1bmN0aW9uKGl0ZXIpewoJICAkUHJvbWlzZS5hbGwoaXRlcilbJ2NhdGNoJ10oZW1wdHkpOwoJfSkpLCBQUk9NSVNFLCB7CgkgIC8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKQoJICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSl7CgkgICAgdmFyIEMgICAgICAgICAgPSB0aGlzCgkgICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKQoJICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlCgkgICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsKCSAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpewoJICAgICAgdmFyIHZhbHVlcyAgICA9IFtdCgkgICAgICAgICwgaW5kZXggICAgID0gMAoJICAgICAgICAsIHJlbWFpbmluZyA9IDE7CgkgICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2UpewoJICAgICAgICB2YXIgJGluZGV4ICAgICAgICA9IGluZGV4KysKCSAgICAgICAgICAsIGFscmVhZHlDYWxsZWQgPSBmYWxzZTsKCSAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTsKCSAgICAgICAgcmVtYWluaW5nKys7CgkgICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKCSAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjsKCSAgICAgICAgICBhbHJlYWR5Q2FsbGVkICA9IHRydWU7CgkgICAgICAgICAgdmFsdWVzWyRpbmRleF0gPSB2YWx1ZTsKCSAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CgkgICAgICAgIH0sIHJlamVjdCk7CgkgICAgICB9KTsKCSAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKCSAgICB9KTsKCSAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7CgkgICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKCSAgfSwKCSAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKQoJICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXsKCSAgICB2YXIgQyAgICAgICAgICA9IHRoaXMKCSAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpCgkgICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsKCSAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpewoJICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbihwcm9taXNlKXsKCSAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpOwoJICAgICAgfSk7CgkgICAgfSk7CgkgICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOwoJICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CgkgIH0KCX0pOwoKCS8qKiovIH0pLAoJLyogMTA1ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCS8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW0KCXZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKCSAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCgkgICwgREVTQ1JJUFRPUlMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpCgkgICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCgkgICwgcmVkZWZpbmUgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KQoJICAsIE1FVEEgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MikuS0VZCgkgICwgJGZhaWxzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKQoJICAsIHNoYXJlZCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkKCSAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpCgkgICwgdWlkICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKQoJICAsIHdrcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKQoJICAsIHdrc0V4dCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkKCSAgLCB3a3NEZWZpbmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpCgkgICwga2V5T2YgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKQoJICAsIGVudW1LZXlzICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NikKCSAgLCBpc0FycmF5ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTApCgkgICwgYW5PYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCgkgICwgdG9JT2JqZWN0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQoJICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKCSAgLCBjcmVhdGVEZXNjICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpCgkgICwgX2NyZWF0ZSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KQoJICAsIGdPUE5FeHQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSkKCSAgLCAkR09QRCAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpCgkgICwgJERQICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCgkgICwgJGtleXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQoJICAsIGdPUEQgICAgICAgICAgID0gJEdPUEQuZgoJICAsIGRQICAgICAgICAgICAgID0gJERQLmYKCSAgLCBnT1BOICAgICAgICAgICA9IGdPUE5FeHQuZgoJICAsICRTeW1ib2wgICAgICAgID0gZ2xvYmFsLlN5bWJvbAoJICAsICRKU09OICAgICAgICAgID0gZ2xvYmFsLkpTT04KCSAgLCBfc3RyaW5naWZ5ICAgICA9ICRKU09OICYmICRKU09OLnN0cmluZ2lmeQoJICAsIFBST1RPVFlQRSAgICAgID0gJ3Byb3RvdHlwZScKCSAgLCBISURERU4gICAgICAgICA9IHdrcygnX2hpZGRlbicpCgkgICwgVE9fUFJJTUlUSVZFICAgPSB3a3MoJ3RvUHJpbWl0aXZlJykKCSAgLCBpc0VudW0gICAgICAgICA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlCgkgICwgU3ltYm9sUmVnaXN0cnkgPSBzaGFyZWQoJ3N5bWJvbC1yZWdpc3RyeScpCgkgICwgQWxsU3ltYm9scyAgICAgPSBzaGFyZWQoJ3N5bWJvbHMnKQoJICAsIE9QU3ltYm9scyAgICAgID0gc2hhcmVkKCdvcC1zeW1ib2xzJykKCSAgLCBPYmplY3RQcm90byAgICA9IE9iamVjdFtQUk9UT1RZUEVdCgkgICwgVVNFX05BVElWRSAgICAgPSB0eXBlb2YgJFN5bWJvbCA9PSAnZnVuY3Rpb24nCgkgICwgUU9iamVjdCAgICAgICAgPSBnbG9iYWwuUU9iamVjdDsKCS8vIERvbid0IHVzZSBzZXR0ZXJzIGluIFF0IFNjcmlwdCwgaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzE3MwoJdmFyIHNldHRlciA9ICFRT2JqZWN0IHx8ICFRT2JqZWN0W1BST1RPVFlQRV0gfHwgIVFPYmplY3RbUFJPVE9UWVBFXS5maW5kQ2hpbGQ7CgoJLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3Cgl2YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpewoJICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7CgkgICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9CgkgIH0pKS5hICE9IDc7Cgl9KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpewoJICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTsKCSAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldOwoJICBkUChpdCwga2V5LCBEKTsKCSAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpOwoJfSA6IGRQOwoKCXZhciB3cmFwID0gZnVuY3Rpb24odGFnKXsKCSAgdmFyIHN5bSA9IEFsbFN5bWJvbHNbdGFnXSA9IF9jcmVhdGUoJFN5bWJvbFtQUk9UT1RZUEVdKTsKCSAgc3ltLl9rID0gdGFnOwoJICByZXR1cm4gc3ltOwoJfTsKCgl2YXIgaXNTeW1ib2wgPSBVU0VfTkFUSVZFICYmIHR5cGVvZiAkU3ltYm9sLml0ZXJhdG9yID09ICdzeW1ib2wnID8gZnVuY3Rpb24oaXQpewoJICByZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnOwoJfSA6IGZ1bmN0aW9uKGl0KXsKCSAgcmV0dXJuIGl0IGluc3RhbmNlb2YgJFN5bWJvbDsKCX07CgoJdmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpewoJICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTsKCSAgYW5PYmplY3QoaXQpOwoJICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOwoJICBhbk9iamVjdChEKTsKCSAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpewoJICAgIGlmKCFELmVudW1lcmFibGUpewoJICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7CgkgICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlOwoJICAgIH0gZWxzZSB7CgkgICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlOwoJICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7CgkgICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTsKCSAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7Cgl9OwoJdmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7CgkgIGFuT2JqZWN0KGl0KTsKCSAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKQoJICAgICwgaSAgICA9IDAKCSAgICAsIGwgPSBrZXlzLmxlbmd0aAoJICAgICwga2V5OwoJICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTsKCSAgcmV0dXJuIGl0OwoJfTsKCXZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXsKCSAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApOwoJfTsKCXZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpewoJICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpOwoJICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7CgkgIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTsKCX07Cgl2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKCSAgaXQgID0gdG9JT2JqZWN0KGl0KTsKCSAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTsKCSAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjsKCSAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpOwoJICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTsKCSAgcmV0dXJuIEQ7Cgl9OwoJdmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7CgkgIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpCgkgICAgLCByZXN1bHQgPSBbXQoJICAgICwgaSAgICAgID0gMAoJICAgICwga2V5OwoJICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsKCSAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTsKCSAgfSByZXR1cm4gcmVzdWx0OwoJfTsKCXZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXsKCSAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90bwoJICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpCgkgICAgLCByZXN1bHQgPSBbXQoJICAgICwgaSAgICAgID0gMAoJICAgICwga2V5OwoJICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsKCSAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsKCSAgfSByZXR1cm4gcmVzdWx0OwoJfTsKCgkvLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKCWlmKCFVU0VfTkFUSVZFKXsKCSAgJFN5bWJvbCA9IGZ1bmN0aW9uIFN5bWJvbCgpewoJICAgIGlmKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKXRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpOwoJICAgIHZhciB0YWcgPSB1aWQoYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOwoJICAgIHZhciAkc2V0ID0gZnVuY3Rpb24odmFsdWUpewoJICAgICAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8pJHNldC5jYWxsKE9QU3ltYm9scywgdmFsdWUpOwoJICAgICAgaWYoaGFzKHRoaXMsIEhJRERFTikgJiYgaGFzKHRoaXNbSElEREVOXSwgdGFnKSl0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlOwoJICAgICAgc2V0U3ltYm9sRGVzYyh0aGlzLCB0YWcsIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsKCSAgICB9OwoJICAgIGlmKERFU0NSSVBUT1JTICYmIHNldHRlcilzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLCB0YWcsIHtjb25maWd1cmFibGU6IHRydWUsIHNldDogJHNldH0pOwoJICAgIHJldHVybiB3cmFwKHRhZyk7CgkgIH07CgkgIHJlZGVmaW5lKCRTeW1ib2xbUFJPVE9UWVBFXSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKXsKCSAgICByZXR1cm4gdGhpcy5fazsKCSAgfSk7CgoJICAkR09QRC5mID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKCSAgJERQLmYgICA9ICRkZWZpbmVQcm9wZXJ0eTsKCSAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZiA9IGdPUE5FeHQuZiA9ICRnZXRPd25Qcm9wZXJ0eU5hbWVzOwoJICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKS5mICA9ICRwcm9wZXJ0eUlzRW51bWVyYWJsZTsKCSAgX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkuZiA9ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CgoJICBpZihERVNDUklQVE9SUyAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygyNSkpewoJICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpOwoJICB9CgoJICB3a3NFeHQuZiA9IGZ1bmN0aW9uKG5hbWUpewoJICAgIHJldHVybiB3cmFwKHdrcyhuYW1lKSk7CgkgIH0KCX0KCgkkZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7U3ltYm9sOiAkU3ltYm9sfSk7CgoJZm9yKHZhciBzeW1ib2xzID0gKAoJICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNAoJICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnCgkpLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTsKCglmb3IodmFyIHN5bWJvbHMgPSAka2V5cyh3a3Muc3RvcmUpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzRGVmaW5lKHN5bWJvbHNbaSsrXSk7CgoJJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ1N5bWJvbCcsIHsKCSAgLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpCgkgICdmb3InOiBmdW5jdGlvbihrZXkpewoJICAgIHJldHVybiBoYXMoU3ltYm9sUmVnaXN0cnksIGtleSArPSAnJykKCSAgICAgID8gU3ltYm9sUmVnaXN0cnlba2V5XQoJICAgICAgOiBTeW1ib2xSZWdpc3RyeVtrZXldID0gJFN5bWJvbChrZXkpOwoJICB9LAoJICAvLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSkKCSAga2V5Rm9yOiBmdW5jdGlvbiBrZXlGb3Ioa2V5KXsKCSAgICBpZihpc1N5bWJvbChrZXkpKXJldHVybiBrZXlPZihTeW1ib2xSZWdpc3RyeSwga2V5KTsKCSAgICB0aHJvdyBUeXBlRXJyb3Ioa2V5ICsgJyBpcyBub3QgYSBzeW1ib2whJyk7CgkgIH0sCgkgIHVzZVNldHRlcjogZnVuY3Rpb24oKXsgc2V0dGVyID0gdHJ1ZTsgfSwKCSAgdXNlU2ltcGxlOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSBmYWxzZTsgfQoJfSk7CgoJJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHsKCSAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQoJICBjcmVhdGU6ICRjcmVhdGUsCgkgIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQoJICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LAoJICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQoJICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcywKCSAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQoJICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsCgkgIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCgkgIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLAoJICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCgkgIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9scwoJfSk7CgoJLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pCgkkSlNPTiAmJiAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghVVNFX05BVElWRSB8fCAkZmFpbHMoZnVuY3Rpb24oKXsKCSAgdmFyIFMgPSAkU3ltYm9sKCk7CgkgIC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9CgkgIC8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbAoJICAvLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9scwoJICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoe2E6IFN9KSAhPSAne30nIHx8IF9zdHJpbmdpZnkoT2JqZWN0KFMpKSAhPSAne30nOwoJfSkpLCAnSlNPTicsIHsKCSAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpewoJICAgIGlmKGl0ID09PSB1bmRlZmluZWQgfHwgaXNTeW1ib2woaXQpKXJldHVybjsgLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZAoJICAgIHZhciBhcmdzID0gW2l0XQoJICAgICAgLCBpICAgID0gMQoJICAgICAgLCByZXBsYWNlciwgJHJlcGxhY2VyOwoJICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7CgkgICAgcmVwbGFjZXIgPSBhcmdzWzFdOwoJICAgIGlmKHR5cGVvZiByZXBsYWNlciA9PSAnZnVuY3Rpb24nKSRyZXBsYWNlciA9IHJlcGxhY2VyOwoJICAgIGlmKCRyZXBsYWNlciB8fCAhaXNBcnJheShyZXBsYWNlcikpcmVwbGFjZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKXsKCSAgICAgIGlmKCRyZXBsYWNlcil2YWx1ZSA9ICRyZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpOwoJICAgICAgaWYoIWlzU3ltYm9sKHZhbHVlKSlyZXR1cm4gdmFsdWU7CgkgICAgfTsKCSAgICBhcmdzWzFdID0gcmVwbGFjZXI7CgkgICAgcmV0dXJuIF9zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3MpOwoJICB9Cgl9KTsKCgkvLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpCgkkU3ltYm9sW1BST1RPVFlQRV1bVE9fUFJJTUlUSVZFXSB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKCRTeW1ib2xbUFJPVE9UWVBFXSwgVE9fUFJJTUlUSVZFLCAkU3ltYm9sW1BST1RPVFlQRV0udmFsdWVPZik7CgkvLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddCglzZXRUb1N0cmluZ1RhZygkU3ltYm9sLCAnU3ltYm9sJyk7CgkvLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddCglzZXRUb1N0cmluZ1RhZyhNYXRoLCAnTWF0aCcsIHRydWUpOwoJLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ10KCXNldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLCAnSlNPTicsIHRydWUpOwoKCS8qKiovIH0pLAoJLyogMTA2ICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkoJ2FzeW5jSXRlcmF0b3InKTsKCgkvKioqLyB9KSwKCS8qIDEwNyAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCV9fd2VicGFja19yZXF1aXJlX18oNDgpKCdvYnNlcnZhYmxlJyk7CgoJLyoqKi8gfSksCgkvKiAxMDggKi8sCgkvKiAxMDkgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoKCXZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7CgoJdmFyIF9zdHJpbmdpZnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RyaW5naWZ5KTsKCgl2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCgl2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7CgoJZXhwb3J0cy5kaXZpZGVVUkwgPSBkaXZpZGVVUkw7CglleHBvcnRzLmRpdmlkZUVtYWlsID0gZGl2aWRlRW1haWw7CglleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7CglleHBvcnRzLmRlZXBDbG9uZSA9IGRlZXBDbG9uZTsKCWV4cG9ydHMuZ2V0VXNlclVSTEZyb21FbWFpbCA9IGdldFVzZXJVUkxGcm9tRW1haWw7CglleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOwoJZXhwb3J0cy5jb252ZXJ0VG9Vc2VyVVJMID0gY29udmVydFRvVXNlclVSTDsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8qKgoJKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKCSogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKCSogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCgkqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCgkqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoJKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCgkqIENvcHlyaWdodCAyMDE2IEFwaXplZQoJKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoJKgoJKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSoKCSogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSoKCSogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSoqLwoJLyoqCgkgKiBTdXBwb3J0IG1vZHVsZSB3aXRoIHNvbWUgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZnVsCgkgKiBAbW9kdWxlIHV0aWxzCgkgKi8KCgkvKioKCSAqIEB0eXBlZGVmIGRpdmlkZVVSTAoJICogQHR5cGUgT2JqZWN0CgkgKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKCSAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKCSAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZGVudGl0eSBUaGUgaWRlbnRpdHkgb2YgVVJMCgkgKi8KCgkvKioKCSAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQoJICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MKCSAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKCSAqLwoJZnVuY3Rpb24gZGl2aWRlVVJMKHVybCkgewoKCSAgaWYgKCF1cmwpIHRocm93IEVycm9yKCdVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Jyk7CgoJICBmdW5jdGlvbiByZWN1cnNlKHZhbHVlKSB7CgkgICAgdmFyIHJlZ2V4ID0gLyhbYS16QS1aLV0qKSg6XC9cLyg/OlwuKT98OikoWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpOwoJICAgIHZhciBzdWJzdCA9ICckMSwkMywkNCc7CgkgICAgdmFyIHBhcnRzID0gdmFsdWUucmVwbGFjZShyZWdleCwgc3Vic3QpLnNwbGl0KCcsJyk7CgkgICAgcmV0dXJuIHBhcnRzOwoJICB9CgoJICB2YXIgcGFydHMgPSByZWN1cnNlKHVybCk7CgoJICAvLyBJZiB0aGUgdXJsIGhhcyBubyBzY2hlbWUKCSAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgIXBhcnRzWzBdLmluY2x1ZGVzKCdAJykpIHsKCgkgICAgdmFyIF9yZXN1bHQgPSB7CgkgICAgICB0eXBlOiAiIiwKCSAgICAgIGRvbWFpbjogdXJsLAoJICAgICAgaWRlbnRpdHk6ICIiCgkgICAgfTsKCgkgICAgY29uc29sZS5lcnJvcignW0RpdmlkZVVSTF0gRGl2aWRlVVJMIGRvblwndCBzdXBwb3J0IHVybCB3aXRob3V0IHNjaGVtZS4gUGxlYXNlIHJldmlldyB5b3VyIHVybCBhZGRyZXNzJywgdXJsKTsKCgkgICAgcmV0dXJuIF9yZXN1bHQ7CgkgIH0KCgkgIC8vIGNoZWNrIGlmIHRoZSB1cmwgaGFzIHRoZSBzY2hlbWUgYW5kIGluY2x1ZGVzIGFuIEAKCSAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgcGFydHNbMF0uaW5jbHVkZXMoJ0AnKSkgewoJICAgIHZhciBzY2hlbWUgPSBwYXJ0c1swXSA9PT0gdXJsID8gJ3NtdHAnIDogcGFydHNbMF07CgkgICAgcGFydHMgPSByZWN1cnNlKHNjaGVtZSArICc6Ly8nICsgcGFydHNbMF0pOwoJICB9CgoJICAvLyBpZiB0aGUgZG9tYWluIGluY2x1ZGVzIGFuIEAsIGRpdmlkZSBpdCB0byBkb21haW4gYW5kIGlkZW50aXR5IHJlc3BlY3RpdmVseQoJICBpZiAocGFydHNbMV0uaW5jbHVkZXMoJ0AnKSkgewoJICAgIHBhcnRzWzJdID0gcGFydHNbMF0gKyAnOi8vJyArIHBhcnRzWzFdOwoJICAgIHBhcnRzWzFdID0gcGFydHNbMV0uc3Vic3RyKHBhcnRzWzFdLmluZGV4T2YoJ0AnKSArIDEpOwoJICB9IC8qZWxzZSBpZiAocGFydHNbMl0uaW5jbHVkZXMoJy8nKSkgewoJICAgIHBhcnRzWzJdID0gcGFydHNbMl0uc3Vic3RyKHBhcnRzWzJdLmxhc3RJbmRleE9mKCcvJykrMSk7CgkgICAgfSovCgoJICB2YXIgcmVzdWx0ID0gewoJICAgIHR5cGU6IHBhcnRzWzBdLAoJICAgIGRvbWFpbjogcGFydHNbMV0sCgkgICAgaWRlbnRpdHk6IHBhcnRzWzJdCgkgIH07CgoJICByZXR1cm4gcmVzdWx0OwoJfQoKCWZ1bmN0aW9uIGRpdmlkZUVtYWlsKGVtYWlsKSB7CgkgIHZhciBpbmRleE9mQXQgPSBlbWFpbC5pbmRleE9mKCdAJyk7CgoJICB2YXIgcmVzdWx0ID0gewoJICAgIHVzZXJuYW1lOiBlbWFpbC5zdWJzdHJpbmcoMCwgaW5kZXhPZkF0KSwKCSAgICBkb21haW46IGVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCBlbWFpbC5sZW5ndGgpCgkgIH07CgoJICByZXR1cm4gcmVzdWx0OwoJfQoKCS8qKgoJICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5CgkgKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdCBPYmplY3QgdG8gYmUgY2hlY2tlZAoJICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgc3RhdHVzIG9mIE9iamVjdCwgZW1wdHkgb3Igbm90ICh0cnVlfGZhbHNlKTsKCSAqLwoJZnVuY3Rpb24gZW1wdHlPYmplY3Qob2JqZWN0KSB7CgkgIHJldHVybiAoMCwgX2tleXMyLmRlZmF1bHQpKG9iamVjdCkubGVuZ3RoID4gMCA/IGZhbHNlIDogdHJ1ZTsKCX0KCgkvKioKCSAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCgkgKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkCgkgKiBAcmV0dXJuIHtPYmplY3R9CgkgKi8KCWZ1bmN0aW9uIGRlZXBDbG9uZShvYmopIHsKCSAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgoJICBpZiAob2JqKSByZXR1cm4gSlNPTi5wYXJzZSgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkob2JqKSk7Cgl9CgoJLyoqCgkgKiBPYnRhaW5zIHRoZSB1c2VyIFVSTCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gZW1haWwKCSAqIEBwYXJhbSAge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsCgkgKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAoJICovCglmdW5jdGlvbiBnZXRVc2VyVVJMRnJvbUVtYWlsKHVzZXJFbWFpbCkgewoJICB2YXIgaW5kZXhPZkF0ID0gdXNlckVtYWlsLmluZGV4T2YoJ0AnKTsKCSAgcmV0dXJuICd1c2VyOi8vJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgdXNlckVtYWlsLmxlbmd0aCkgKyAnLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCk7Cgl9CgoJLyoqCgkgKiBPYnRhaW5zIHRoZSB1c2VyIGVtYWlsIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBVUkwKCSAqIEBwYXJhbSAge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMCgkgKiBAcmV0dXJuIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAoJICovCglmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKHVzZXJVUkwpIHsKCSAgdmFyIHVybCA9IGRpdmlkZVVSTCh1c2VyVVJMKTsKCSAgcmV0dXJuIHVybC5pZGVudGl0eS5yZXBsYWNlKCcvJywgJycpICsgJ0AnICsgdXJsLmRvbWFpbjsgLy8gaWRlbnRpdHkgZmllbGQgaGFzICcvZXhhbXBsZUlEJyBpbnN0ZWFkIG9mICdleGFtcGxlSUQnCgl9CgoJLyoqCgkgKiBDaGVjayBpZiB0aGUgdXNlciBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIFVSTCBmb3JtYXQsIGlmIG5vdCwgY29udmVydCB0byBVUkwgZm9ybWF0CgkgKiBAcGFyYW0gIHtzdHJpbmd9ICAgaWRlbnRpZmllciAgdXNlciBpZGVudGlmaWVyCgkgKiBAcmV0dXJuIHtzdHJpbmd9ICAgdXNlclVSTCAgICB0aGUgdXNlciBVUkwKCSAqLwoJZnVuY3Rpb24gY29udmVydFRvVXNlclVSTChpZGVudGlmaWVyKSB7CgoJICAvLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0CgkgIGlmIChpZGVudGlmaWVyLnN1YnN0cmluZygwLCA3KSA9PT0gJ3VzZXI6Ly8nKSB7CgkgICAgdmFyIGRpdmlkZWRVUkwgPSBkaXZpZGVVUkwoaWRlbnRpZmllcik7CgoJICAgIC8vY2hlY2sgaWYgdGhlIHVybCBpcyB3ZWxsIGZvcm1hdGVkCgkgICAgaWYgKGRpdmlkZWRVUkwuZG9tYWluICYmIGRpdmlkZWRVUkwuaWRlbnRpdHkpIHsKCSAgICAgIHJldHVybiBpZGVudGlmaWVyOwoJICAgIH0gZWxzZSB7CgkgICAgICB0aHJvdyAndXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCc7CgkgICAgfQoKCSAgICAvL2lmIG5vdCwgY29udmVydCB0aGUgdXNlciBlbWFpbCB0byBVUkwgZm9ybWF0CgkgIH0gZWxzZSB7CgkgICAgcmV0dXJuIGdldFVzZXJVUkxGcm9tRW1haWwoaWRlbnRpZmllcik7CgkgIH0KCX0KCgkvKioqLyB9KSwKCS8qIDExMCAqLywKCS8qIDExMSAqLywKCS8qIDExMiAqLywKCS8qIDExMyAqLywKCS8qIDExNCAqLywKCS8qIDExNSAqLywKCS8qIDExNiAqLywKCS8qIDExNyAqLywKCS8qIDExOCAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7CgoJdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKCXZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCgl2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsKCgl2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CgoJdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKCXZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgoJdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKCXZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCgl2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOwoKCXZhciBfZ2V0MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCgl2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsKCgl2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOwoKCXZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTsKCgl2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOwoKCXZhciBfRGF0YU9iamVjdDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Mik7CgoJdmFyIF9EYXRhT2JqZWN0Q2hpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMSk7CgoJdmFyIF9EYXRhT2JqZWN0Q2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdENoaWxkKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8qKgoJKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKCSogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKCSogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCgkqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCgkqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoJKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCgkqIENvcHlyaWdodCAyMDE2IEFwaXplZQoJKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoJKgoJKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSoKCSogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSoKCSogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSoqLwoKCXZhciBGaWx0ZXJUeXBlID0geyBBTlk6ICdhbnknLCBTVEFSVDogJ3N0YXJ0JywgRVhBQ1Q6ICdleGFjdCcgfTsKCgkvKioKCSAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIHRoZSBTeW5jaGVyIHN1YnNjcmliZSBjYWxsLgoJICogVG8gYmUgdXNlZCBhcyBhbiBvYnNlcnZhdGlvbiBwb2ludCBmcm9tIGEgRGF0YU9iamVjdFJlcG9ydGVyIGNoYW5nZS4KCSAqLwoKCXZhciBEYXRhT2JqZWN0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAoX0RhdGFPYmplY3QpIHsKCSAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLCBfRGF0YU9iamVjdCk7CgoJICAvKiBwcml2YXRlCgkgIF9jaGFuZ2VMaXN0ZW5lcjogTXNnTGlzdGVuZXIKCSAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KCSAgX2ZpbHRlcnM6IHs8ZmlsdGVyPjoge3R5cGU6IDxzdGFydCwgZXhhY3Q+LCBjYWxsYmFjazogPGZ1bmN0aW9uPn0gfQoJICAqLwoKCSAgLyoqCgkgICAqIEBpZ25vcmUKCSAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuc3Vic2NyaWJlIG1ldGhvZAoJICAgKi8KCSAgZnVuY3Rpb24gRGF0YU9iamVjdE9ic2VydmVyKHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zLCBpbml0aWFsVmVyc2lvbikgewoJICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RPYnNlcnZlcik7CgoJICAgIHZhciBfdGhpczIgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChEYXRhT2JqZWN0T2JzZXJ2ZXIuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlcikpLmNhbGwodGhpcywgc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLmRhdGEsIGNoaWxkcmVucykpOwoKCSAgICB2YXIgX3RoaXMgPSBfdGhpczI7CgoJICAgIF90aGlzLl92ZXJzaW9uID0gaW5pdGlhbFZlcnNpb247CgkgICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsKCgkgICAgX3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsKCSAgICAgIF90aGlzLl9vbkZpbHRlcihldmVudCk7CgkgICAgfSk7CgoJICAgIC8vc2V0dXAgY2hpbGRyZW5zIGRhdGEgZnJvbSBzdWJzY3JpcHRpb24KCSAgICAoMCwgX2tleXMyLmRlZmF1bHQpKGluaXRpYWxEYXRhLmNoaWxkcmVucykuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRJZCkgewoJICAgICAgdmFyIGNoaWxkRGF0YSA9IGluaXRpYWxEYXRhLmNoaWxkcmVuc1tjaGlsZElkXTsKCSAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0gPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgY2hpbGRJZCwgY2hpbGREYXRhKTsKCSAgICB9KTsKCgkgICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CgkgICAgcmV0dXJuIF90aGlzMjsKCSAgfQoKCSAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLCBbewoJICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKCSAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlKSwgJ19hbGxvY2F0ZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCArICcvY2hhbmdlcycsIGZ1bmN0aW9uIChtc2cpIHsKCSAgICAgICAgaWYgKG1zZy50eXBlID09PSAndXBkYXRlJykgewoJICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0T2JzZXJ2ZXItJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTsKCSAgICAgICAgICBfdGhpcy5fY2hhbmdlT2JqZWN0KF90aGlzLl9zeW5jT2JqLCBtc2cpOwoJICAgICAgICB9CgkgICAgICB9KTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewoJICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCk7CgkgICAgfQoKCSAgICAvKioKCSAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGEKCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdkZWxldGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwoJICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9vYnNlcnZlcnNbX3RoaXMuX3VybF07CgkgICAgfQoKCSAgICAvKioKCSAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGEKCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICd1bnN1YnNjcmliZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsVW5TdWJzY3JpYmUKCSAgICAgIHZhciB1blN1YnNjcmliZU1zZyA9IHsKCSAgICAgICAgdHlwZTogJ3Vuc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogX3RoaXMuX3N5bmNoZXIuX3N1YlVSTCwKCSAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9CgkgICAgICB9OwoKCSAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UodW5TdWJzY3JpYmVNc2csIGZ1bmN0aW9uIChyZXBseSkgewoJICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAnLCByZXBseSk7CgkgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoJICAgICAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CgkgICAgICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9vYnNlcnZlcnNbX3RoaXMuX3VybF07CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogUmVnaXN0ZXIgdGhlIGNoYW5nZSBsaXN0ZW5lcnMgc2VudCBieSB0aGUgcmVwb3J0ZXIKCSAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIC0gRmlsdGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgZmllbGQgKHNlcGFyYXRlZCBkb3QgcGF0aCkuIEFjY2VwdHMgKiBhdCB0aGUgZW5kIGZvciBhIG1vcmUgdW5yZXN0cmljdGVkIGZpbHRlcmluZy4KCSAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnb25DaGFuZ2UnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShmaWx0ZXIsIGNhbGxiYWNrKSB7CgkgICAgICB2YXIga2V5ID0gZmlsdGVyOwoJICAgICAgdmFyIGZpbHRlck9iaiA9IHsKCSAgICAgICAgdHlwZTogRmlsdGVyVHlwZS5FWEFDVCwKCSAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrCgkgICAgICB9OwoKCSAgICAgIHZhciBpZHggPSBmaWx0ZXIuaW5kZXhPZignKicpOwoJICAgICAgaWYgKGlkeCA9PT0gZmlsdGVyLmxlbmd0aCAtIDEpIHsKCSAgICAgICAgaWYgKGlkeCA9PT0gMCkgewoJICAgICAgICAgIGZpbHRlck9iai50eXBlID0gRmlsdGVyVHlwZS5BTlk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgZmlsdGVyT2JqLnR5cGUgPSBGaWx0ZXJUeXBlLlNUQVJUOwoJICAgICAgICAgIGtleSA9IGZpbHRlci5zdWJzdHIoMCwgZmlsdGVyLmxlbmd0aCAtIDEpOwoJICAgICAgICB9CgkgICAgICB9CgoJICAgICAgdGhpcy5fZmlsdGVyc1trZXldID0gZmlsdGVyT2JqOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ19vbkZpbHRlcicsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZpbHRlcihldmVudCkgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKCSAgICAgICAgdmFyIGZpbHRlciA9IF90aGlzLl9maWx0ZXJzW2tleV07CgkgICAgICAgIGlmIChmaWx0ZXIudHlwZSA9PT0gRmlsdGVyVHlwZS5BTlkpIHsKCSAgICAgICAgICAvL21hdGNoIGFueXRoaW5nCgkgICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsKCSAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXIudHlwZSA9PT0gRmlsdGVyVHlwZS5TVEFSVCkgewoJICAgICAgICAgIC8vaWYgc3RhcnRzIHdpdGggZmlsdGVyLi4uCgkgICAgICAgICAgaWYgKGV2ZW50LmZpZWxkLmluZGV4T2Yoa2V5KSA9PT0gMCkgewoJICAgICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsKCSAgICAgICAgICB9CgkgICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuRVhBQ1QpIHsKCSAgICAgICAgICAvL2V4YWN0IG1hdGNoCgkgICAgICAgICAgaWYgKGV2ZW50LmZpZWxkID09PSBrZXkpIHsKCSAgICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7CgkgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICB9KTsKCSAgICB9CgkgIH1dKTsKCSAgcmV0dXJuIERhdGFPYmplY3RPYnNlcnZlcjsKCX0oX0RhdGFPYmplY3QzLmRlZmF1bHQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovKTsKCglleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0T2JzZXJ2ZXI7Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCgkvKioqLyB9KSwKCS8qIDExOSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7CgoJdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKCXZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCgl2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsKCgl2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CgoJdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKCXZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgoJdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKCXZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCgl2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOwoKCXZhciBfZ2V0MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCgl2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsKCgl2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOwoKCXZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTsKCgl2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOwoKCXZhciBfRGF0YU9iamVjdDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Mik7CgoJdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8qKgoJICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIFN5bmNoZXIgY3JlYXRlIGNhbGwuCgkgKiBUbyBiZSB1c2VkIGFzIGEgcmVwb3J0ZXIgcG9pbnQsIGNoYW5nZXMgd2lsbCBiZSBzdWJtaXRlZCB0byBEYXRhT2JqZWN0T2JzZXJ2ZXIgaW5zdGFuY2VzLgoJICovCgkvKioKCSogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCgkqIENvcHlyaWdodCAyMDE2IElORVNDLUlECgkqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoJKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoJKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKCSogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoJKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKCSogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KCSoKCSogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkqCgkqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkqCgkqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkqKi8KCgl2YXIgRGF0YU9iamVjdFJlcG9ydGVyID0gZnVuY3Rpb24gKF9EYXRhT2JqZWN0KSB7CgkgICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlciwgX0RhdGFPYmplY3QpOwoKCSAgLyogcHJpdmF0ZQoJICBfc3Vic2NyaXB0aW9uczogPGh5cGVydHlVcmw6IHsgc3RhdHVzOiBzdHJpbmcgfSB9PgoJICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQoJICBfb25TdWJzY3JpcHRpb25IYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKCSAgX29uUmVzcG9uc2VIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKCSAgX29uUmVhZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZAoJICAqLwoKCSAgLyoqCgkgICAqIEBpZ25vcmUKCSAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuY3JlYXRlIG1ldGhvZAoJICAgKi8KCSAgZnVuY3Rpb24gRGF0YU9iamVjdFJlcG9ydGVyKHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSB7CgkgICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdFJlcG9ydGVyKTsKCgkgICAgdmFyIF90aGlzMiA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKERhdGFPYmplY3RSZXBvcnRlci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyKSkuY2FsbCh0aGlzLCBzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykpOwoKCSAgICB2YXIgX3RoaXMgPSBfdGhpczI7CgoJICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307CgoJICAgIF90aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7CgkgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLScgKyB1cmwgKyAnLVNFTkQ6ICcsIGV2ZW50KTsKCSAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCk7CgkgICAgfSk7CgoJICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwoJICAgIHJldHVybiBfdGhpczI7CgkgIH0KCgkgICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlciwgW3sKCSAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CgkgICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksICdfYWxsb2NhdGVMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBfdGhpcy5fb2JqZWN0TGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwsIGZ1bmN0aW9uIChtc2cpIHsKCSAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3QtJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTsKCSAgICAgICAgc3dpdGNoIChtc2cudHlwZSkgewoJICAgICAgICAgIGNhc2UgJ3Jlc3BvbnNlJzoKCSAgICAgICAgICAgIF90aGlzLl9vblJlc3BvbnNlKG1zZyk7YnJlYWs7CgkgICAgICAgICAgY2FzZSAncmVhZCc6CgkgICAgICAgICAgICBfdGhpcy5fb25SZWFkKG1zZyk7YnJlYWs7CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CgkgICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksICdfcmVsZWFzZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lci5yZW1vdmUoKTsKCSAgICB9CgoJICAgIC8qKgoJICAgICAqIFNlbmQgaW52aXRhdGlvbnMgKGNyZWF0ZSBtZXNzYWdlcykgdG8gaHlwZXJ0aWVzLCBvYnNlcnZlcnMgbGlzdC4KCSAgICAgKiBAcGFyYW0gIHtIeXBlcnR5VVJMW119IG9ic2VydmVycyBMaXN0IG9mIEh5cGVydHkgVVJMJ3MKCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdpbnZpdGVPYnNlcnZlcnMnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBpbnZpdGVPYnNlcnZlcnMob2JzZXJ2ZXJzKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlCgkgICAgICB2YXIgaW52aXRlTXNnID0gewoJICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX3N5bmNoZXIuX293bmVyLCB0bzogX3RoaXMuX3N5bmNoZXIuX3N1YlVSTCwKCSAgICAgICAgYm9keTogeyByZXN1bWU6IGZhbHNlLCByZXNvdXJjZTogX3RoaXMuX3VybCwgc2NoZW1hOiBfdGhpcy5fc2NoZW1hLCB2YWx1ZTogX3RoaXMuX3N5bmNPYmouZGF0YSwgYXV0aG9yaXNlOiBvYnNlcnZlcnMgfQoJICAgICAgfTsKCgkgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGludml0ZU1zZyk7CgkgICAgfQoKCSAgICAvKioKCSAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGEKCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdkZWxldGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkRlbGV0ZQoJICAgICAgdmFyIGRlbGV0ZU1zZyA9IHsKCSAgICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsCgkgICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQoJICAgICAgfTsKCgkgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGRlbGV0ZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CgkgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAnLCByZXBseSk7CgkgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoJICAgICAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CgkgICAgICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9yZXBvcnRlcnNbX3RoaXMuX3VybF07CgkgICAgICAgIH0KCSAgICAgIH0pOwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogU3Vic2NyaXB0aW9ucyByZXF1ZXN0ZWQgYW5kIGFjY2VwdGVkIHRvIHRoaXMgcmVwb3J0ZXIKCSAgICAgKiBAdHlwZSB7T2JqZWN0PEh5cGVydHlVUkwsIFN5bmNTdWJzY3JpcHRpb24+fQoJICAgICAqLwoKCSAgfSwgewoJICAgIGtleTogJ29uU3Vic2NyaXB0aW9uJywKCgoJICAgIC8qKgoJICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9ucwoJICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHMKCSAgICAgKi8KCSAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJzY3JpcHRpb24oY2FsbGJhY2spIHsKCSAgICAgIHRoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlciA9IGNhbGxiYWNrOwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgcmVzcG9uc2Ugbm90aWZpY2F0aW9ucyBvZiB0aGUgY3JlYXRlJ3MKCSAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlY2VpdmUgZXZlbnRzCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnb25SZXNwb25zZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzcG9uc2UoY2FsbGJhY2spIHsKCSAgICAgIHRoaXMuX29uUmVzcG9uc2VIYW5kbGVyID0gY2FsbGJhY2s7CgkgICAgfQoKCSAgICAvKioKCSAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZWFkIG5vdGlmaWNhdGlvbnMKCSAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnb25SZWFkJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gb25SZWFkKGNhbGxiYWNrKSB7CgkgICAgICB0aGlzLl9vblJlYWRIYW5kbGVyID0gY2FsbGJhY2s7CgkgICAgfQoKCSAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBwYXJlbnQgU3luY2hlciAtPiBfb25Gb3J3YXJkCgoJICB9LCB7CgkgICAga2V5OiAnX29uRm9yd2FyZCcsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZvcndhcmQobXNnKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAnLCBtc2cpOwoJICAgICAgc3dpdGNoIChtc2cuYm9keS50eXBlKSB7CgkgICAgICAgIGNhc2UgJ3N1YnNjcmliZSc6CgkgICAgICAgICAgX3RoaXMuX29uU3Vic2NyaWJlKG1zZyk7YnJlYWs7CgkgICAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKCSAgICAgICAgICBfdGhpcy5fb25VblN1YnNjcmliZShtc2cpO2JyZWFrOwoJICAgICAgfQoJICAgIH0KCgkgICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gdGhpcyAtPiBfb25Gb3J3YXJkOiBlbWl0dGVkIGJ5IGEgcmVtb3RlIFN5bmNoZXIgLT4gc3Vic2NyaWJlCgoJICB9LCB7CgkgICAga2V5OiAnX29uU3Vic2NyaWJlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3Vic2NyaWJlKG1zZykgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCSAgICAgIHZhciBoeXBlcnR5VXJsID0gbXNnLmJvZHkuZnJvbTsKCgkgICAgICB2YXIgZXZlbnQgPSB7CgkgICAgICAgIHR5cGU6IG1zZy5ib2R5LnR5cGUsCgkgICAgICAgIHVybDogaHlwZXJ0eVVybCwKCgkgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCgkgICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgewoJICAgICAgICAgIC8vY3JlYXRlIG5ldyBzdWJzY3JpcHRpb24KCSAgICAgICAgICB2YXIgc3ViID0geyB1cmw6IGh5cGVydHlVcmwsIHN0YXR1czogJ29uJyB9OwoJICAgICAgICAgIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdID0gc3ViOwoKCSAgICAgICAgICAvL3Byb2Nlc3MgYW5kIHNlbmQgY2hpbGRyZW5zIGRhdGEKCSAgICAgICAgICB2YXIgY2hpbGRyZW5WYWx1ZXMgPSB7fTsKCSAgICAgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkSWQpIHsKCSAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdLmRhdGE7CgkgICAgICAgICAgICBjaGlsZHJlblZhbHVlc1tjaGlsZElkXSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShjaGlsZERhdGEpOwoJICAgICAgICAgIH0pOwoKCSAgICAgICAgICAvL3NlbmQgb2sgcmVzcG9uc2UgbWVzc2FnZQoJICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewoJICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCgkgICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgc2NoZW1hOiBfdGhpcy5fc2NoZW1hLCB2ZXJzaW9uOiBfdGhpcy5fdmVyc2lvbiwgdmFsdWU6IHsgZGF0YTogKDAsIF91dGlscy5kZWVwQ2xvbmUpKF90aGlzLmRhdGEpLCBjaGlsZHJlbnM6IGNoaWxkcmVuVmFsdWVzIH0gfQoJICAgICAgICAgIH0pOwoKCSAgICAgICAgICByZXR1cm4gc3ViOwoJICAgICAgICB9LAoKCSAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7CgkgICAgICAgICAgLy9zZW5kIHJlamVjdCByZXNwb25zZSBtZXNzYWdlCgkgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CgkgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKCSAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDAzLCBkZXNjOiByZWFzb24gfQoJICAgICAgICAgIH0pOwoJICAgICAgICB9CgkgICAgICB9OwoKCSAgICAgIGlmIChfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKSB7CgkgICAgICAgIGNvbnNvbGUubG9nKCdTVUJTQ1JJUFRJT04tRVZFTlQ6ICcsIGV2ZW50KTsKCSAgICAgICAgX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihldmVudCk7CgkgICAgICB9CgkgICAgfQoKCSAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgRGF0YU9iamVjdE9ic2VydmVyIC0+IHVuc3Vic2NyaWJlCgoJICB9LCB7CgkgICAga2V5OiAnX29uVW5TdWJzY3JpYmUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfb25VblN1YnNjcmliZShtc2cpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgkgICAgICB2YXIgaHlwZXJ0eVVybCA9IG1zZy5ib2R5LmZyb207CgoJICAgICAgdmFyIHN1YiA9IF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdOwoJICAgICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdOwoKCSAgICAgIHZhciBldmVudCA9IHsKCSAgICAgICAgdHlwZTogbXNnLmJvZHkudHlwZSwKCSAgICAgICAgdXJsOiBoeXBlcnR5VXJsLAoJICAgICAgICBvYmplY3Q6IHN1YgoJICAgICAgfTsKCgkgICAgICBpZiAoX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcikgewoJICAgICAgICBjb25zb2xlLmxvZygnVU4tU1VCU0NSSVBUSU9OLUVWRU5UOiAnLCBldmVudCk7CgkgICAgICAgIF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIoZXZlbnQpOwoJICAgICAgfQoJICAgIH0KCgkgICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gUmVwb3J0ZXJVUkwgYWRkcmVzczogZW1pdGVkIGJ5IGEgcmVtb3RlIFN5bmNoZXIgLT4gX29uUmVtb3RlQ3JlYXRlIC0+IGV2ZW50LmFjawoKCSAgfSwgewoJICAgIGtleTogJ19vblJlc3BvbnNlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIHZhciBldmVudCA9IHsKCSAgICAgICAgdHlwZTogbXNnLnR5cGUsCgkgICAgICAgIHVybDogbXNnLmZyb20sCgkgICAgICAgIGNvZGU6IG1zZy5ib2R5LmNvZGUKCSAgICAgIH07CgoJICAgICAgaWYgKF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcikgewoJICAgICAgICBjb25zb2xlLmxvZygnUkVTUE9OU0UtRVZFTlQ6ICcsIGV2ZW50KTsKCSAgICAgICAgX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKGV2ZW50KTsKCSAgICAgIH0KCSAgICB9CgoJICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIFJlcG9ydGVyVVJMIGFkZHJlc3M6IGVtaXRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IHJlYWQKCgkgIH0sIHsKCSAgICBrZXk6ICdfb25SZWFkJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVhZChtc2cpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgdmFyIGV2ZW50ID0gewoJICAgICAgICB0eXBlOiBtc2cudHlwZSwKCSAgICAgICAgdXJsOiBtc2cuZnJvbSwKCgkgICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgewoJICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewoJICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCgkgICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6ICgwLCBfdXRpbHMuZGVlcENsb25lKShfdGhpcy5kYXRhKSB9CgkgICAgICAgICAgfSk7CgkgICAgICAgIH0sCgoJICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHsKCSAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKCSAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAoJICAgICAgICAgICAgYm9keTogeyBjb2RlOiA0MDEsIGRlc2M6IHJlYXNvbiB9CgkgICAgICAgICAgfSk7CgkgICAgICAgIH0KCSAgICAgIH07CgoJICAgICAgaWYgKF90aGlzLl9vblJlYWRIYW5kbGVyKSB7CgkgICAgICAgIGNvbnNvbGUubG9nKCdSRUFELUVWRU5UOiAnLCBldmVudCk7CgkgICAgICAgIF90aGlzLl9vblJlYWRIYW5kbGVyKGV2ZW50KTsKCSAgICAgIH0KCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdzdWJzY3JpcHRpb25zJywKCSAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zOwoJICAgIH0KCSAgfV0pOwoJICByZXR1cm4gRGF0YU9iamVjdFJlcG9ydGVyOwoJfShfRGF0YU9iamVjdDMuZGVmYXVsdCAvKiBpbXBsZW1lbnRzIFN5bmNTdGF0dXMgKi8pOwoKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RSZXBvcnRlcjsKCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTIwICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX3Byb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCgl2YXIgX3Byb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvbWlzZSk7CgoJdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7CgoJdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKCXZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCgl2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7CgoJdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCgl2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgoJdmFyIF9Qcm94eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTsKCgl2YXIgX1Byb3h5T2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb3h5T2JqZWN0KTsKCgl2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsKCgl2YXIgX0RhdGFPYmplY3RDaGlsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Q2hpbGQpOwoKCXZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvKioKCSAqIE1haW4gZXh0ZW5zaW9uIGNsYXNzIGZvciBvYnNlcnZlcnMgYW5kIHJlcG9ydGVycywgd2l0aCBjb21tb24gcHJvcGVydGllcyBhbmQgbWV0aG9kcy4KCSAqIENoaWxkcmVuIG1hbmFnZW1lbnQgaXMgY29tbW9uIGZvciBvYnNlcnZlcnMgYW5kIHJlcG9ydGVycy4KCSAqLwoJdmFyIERhdGFPYmplY3QgPSBmdW5jdGlvbiAoKSB7CgkgIC8qIHByaXZhdGUKCSAgX3ZlcnNpb246IG51bWJlcgoJICAgX293bmVyOiBIeXBlcnR5VVJMCgkgIF91cmw6IE9iamVjdFVSTAoJICBfc2NoZW1hOiBTY2hlbWEKCSAgX2J1czogTWluaUJ1cwoJICBfc3RhdHVzOiBvbiB8IHBhdXNlZAoJICBfc3luY09iajogU3luY0RhdGEKCSAgIF9jaGlsZHJlbjogeyBpZDogRGF0YU9iamVjdENoaWxkIH0KCSAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdCgkgICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tCgkgIF9vbkFkZENoaWxkSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkCgkgICovCgoJICAvKioKCSAgICogQGlnbm9yZQoJICAgKiBTaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkgYnkgSHlwZXJ0aWVzLiBJdCdzIGNhbGxlZCBieSB0aGUgU3luY2hlciBjcmVhdGUgb3Igc3Vic2NyaWJlIG1ldGhvZCdzCgkgICAqLwoJICBmdW5jdGlvbiBEYXRhT2JqZWN0KHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSB7CgkgICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdCk7CgoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgIF90aGlzLl9zeW5jaGVyID0gc3luY2hlcjsKCSAgICBfdGhpcy5fdXJsID0gdXJsOwoJICAgIF90aGlzLl9zY2hlbWEgPSBzY2hlbWE7CgkgICAgX3RoaXMuX3N0YXR1cyA9IGluaXRpYWxTdGF0dXM7CgkgICAgX3RoaXMuX3N5bmNPYmogPSBuZXcgX1Byb3h5T2JqZWN0Mi5kZWZhdWx0KGluaXRpYWxEYXRhKTsKCSAgICBfdGhpcy5fY2hpbGRyZW5zID0gY2hpbGRyZW5zOwoKCSAgICBfdGhpcy5fdmVyc2lvbiA9IDA7CgkgICAgX3RoaXMuX2NoaWxkSWQgPSAwOwoJICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHMgPSB7fTsKCSAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKCgkgICAgX3RoaXMuX293bmVyID0gc3luY2hlci5fb3duZXI7CgkgICAgX3RoaXMuX2J1cyA9IHN5bmNoZXIuX2J1czsKCSAgfQoKCSAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdCwgW3sKCSAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CgkgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIHZhciBjaGlsZEJhc2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nOwoJICAgICAgY29uc29sZS5sb2coJ1tEYXRhIE9iamVjdCAtIEFsbG9jYXRlTGlzdGVuZXJzXSAtICcsIF90aGlzLl9jaGlsZHJlbnMpOwoJICAgICAgaWYgKF90aGlzLl9jaGlsZHJlbnMpIHsKCSAgICAgICAgX3RoaXMuX2NoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewoJICAgICAgICAgIHZhciBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwoJICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIGZ1bmN0aW9uIChtc2cpIHsKCSAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYKCSAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gX3RoaXMyLl9vd25lcikgewoJICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdC1DaGlsZHJlbi1SQ1Y6ICcsIG1zZyk7CgkgICAgICAgICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKCSAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGUnOgoJICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2hpbGRDcmVhdGUobXNnKTticmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOgoJICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTticmVhazsKCSAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5nZUNoaWxkcmVuKG1zZyk7YnJlYWs7CgkgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9KTsKCgkgICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwoJICAgICAgICB9KTsKCSAgICAgIH0KCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsKCSAgICAgICAgbGlzdGVuZXIucmVtb3ZlKCk7CgkgICAgICB9KTsKCgkgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewoJICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2tleV0uX3JlbGVhc2VMaXN0ZW5lcnMoKTsKCSAgICAgIH0pOwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogT2JqZWN0IFVSTCBvZiByZXBvcnRlciBvciBvYnNlcnZlcgoJICAgICAqIEB0eXBlIHtPYmplY3RVUkx9CgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAncGF1c2UnLAoKCgkgICAgLyoqCgkgICAgICogQGlnbm9yZQoJICAgICAqLwoJICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHsKCSAgICAgIC8vVE9ETzogdGhpcyBmZWF0dXJlIG5lZWRzIG1vcmUgYW5hbGlzZQoJICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7CgkgICAgfQoKCSAgICAvKioKCSAgICAgKiBAaWdub3JlCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAncmVzdW1lJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lKCkgewoJICAgICAgLy9UT0RPOiB0aGlzIGZlYXR1cmUgbmVlZHMgbW9yZSBhbmFsaXNlCgkgICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKCSAgICB9CgoJICAgIC8qKgoJICAgICAqIEBpZ25vcmUKCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdzdG9wJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHsKCSAgICAgIC8vVE9ETzogc2hvdWxkIHJlbW92ZSB0aGUgc3Vic2NyaXB0aW9uIGFuZCBzZW5kIG1lc3NhZ2UgdW5zdWJzY3JpYmU/CgkgICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKCSAgICB9CgoJICAgIC8qKgoJICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgRGF0YU9iamVjdENoaWxkIHRvIGEgY2hpbGRyZW4gY29sbGVjdGlvbi4KCSAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hpbGRyZW4gLSBDaGlsZHJlbiBuYW1lIHdoZXJlIHRoZSBjaGlsZCBpcyBhZGRlZC4KCSAgICAgKiBAcGFyYW0ge0pTT059IGluaXRpYWxEYXRhIC0gSW5pdGlhbCBkYXRhIG9mIHRoZSBjaGlsZAoJICAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdENoaWxkPn0gLSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBEYXRhT2JqZWN0Q2hpbGQuCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnYWRkQ2hpbGQnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDaGlsZChjaGlsZHJlbiwgaW5pdGlhbERhdGEpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgLy9jcmVhdGUgbmV3IGNoaWxkIHVuaXF1ZSBJRCwgYmFzZWQgb24gaHlwZXJ0eVVSTAoJICAgICAgX3RoaXMuX2NoaWxkSWQrKzsKCSAgICAgIHZhciBtc2dDaGlsZElkID0gX3RoaXMuX293bmVyICsgJyMnICsgX3RoaXMuX2NoaWxkSWQ7CgkgICAgICB2YXIgbXNnQ2hpbGRQYXRoID0gX3RoaXMuX3VybCArICcvY2hpbGRyZW4vJyArIGNoaWxkcmVuOwoKCSAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgZGlyZWN0bHkgdG8gYSByZXNvdXJjZSBjaGlsZCBhZGRyZXNzOiBNZXNzYWdlQnVzCgkgICAgICB2YXIgcmVxdWVzdE1zZyA9IHsKCSAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IG1zZ0NoaWxkUGF0aCwKCSAgICAgICAgYm9keTogeyByZXNvdXJjZTogbXNnQ2hpbGRJZCwgdmFsdWU6IGluaXRpYWxEYXRhIH0KCSAgICAgIH07CgoJICAgICAgLy9yZXR1cm5zIHByb21pc2UsIGluIHRoZSBmdXR1cmUsIHRoZSBBUEkgbWF5IGNoYW5nZSB0byBhc3luY2hyb25vdXMgY2FsbAoJICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSkgewoJICAgICAgICB2YXIgbXNnSWQgPSBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2cpOwoKCSAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZS1yZXBvcnRlci1jaGlsZCggJyArIF90aGlzLl9vd25lciArICcgKTogJywgcmVxdWVzdE1zZyk7CgkgICAgICAgIHZhciBuZXdDaGlsZCA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBtc2dDaGlsZElkLCBpbml0aWFsRGF0YSwgX3RoaXMuX293bmVyLCBtc2dJZCk7CgkgICAgICAgIG5ld0NoaWxkLm9uQ2hhbmdlKGZ1bmN0aW9uIChldmVudCkgewoJICAgICAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCwgeyBwYXRoOiBtc2dDaGlsZFBhdGgsIGNoaWxkSWQ6IG1zZ0NoaWxkSWQgfSk7CgkgICAgICAgIH0pOwoKCSAgICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1ttc2dDaGlsZElkXSA9IG5ld0NoaWxkOwoKCSAgICAgICAgcmVzb2x2ZShuZXdDaGlsZCk7CgkgICAgICB9KTsKCSAgICB9CgoJICAgIC8qKgoJICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIGNyZWF0ZSBhbmQgZGVsZXRlIG9mIGNoaWxkcmVucy4KCSAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnb25BZGRDaGlsZCcsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkQ2hpbGQoY2FsbGJhY2spIHsKCSAgICAgIHRoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyID0gY2FsbGJhY2s7CgkgICAgfQoKCSAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0IC0+IGFkZENoaWxkCgoJICB9LCB7CgkgICAga2V5OiAnX29uQ2hpbGRDcmVhdGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGlsZENyZWF0ZShtc2cpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgkgICAgICB2YXIgbXNnQ2hpbGRJZCA9IG1zZy5ib2R5LnJlc291cmNlOwoKCSAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIG1zZyk7CgkgICAgICB2YXIgbmV3Q2hpbGQgPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgbXNnQ2hpbGRJZCwgbXNnLmJvZHkudmFsdWUpOwoJICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1ttc2dDaGlsZElkXSA9IG5ld0NoaWxkOwoKCSAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewoJICAgICAgICAvL0ZMT1ctT1VUOiB3aWxsIGZsb3cgdG8gRGF0YU9iamVjdENoaWxkIC0+IF9vblJlc3BvbnNlCgkgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewoJICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAoJICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCBzb3VyY2U6IF90aGlzLl9vd25lciB9CgkgICAgICAgIH0pOwoJICAgICAgfSk7CgoJICAgICAgdmFyIGV2ZW50ID0gewoJICAgICAgICB0eXBlOiBtc2cudHlwZSwKCSAgICAgICAgZnJvbTogbXNnLmZyb20sCgkgICAgICAgIHVybDogbXNnLnRvLAoJICAgICAgICB2YWx1ZTogbXNnLmJvZHkudmFsdWUsCgkgICAgICAgIGNoaWxkSWQ6IG1zZ0NoaWxkSWQsCgkgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eQoJICAgICAgfTsKCgkgICAgICBpZiAoX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKSB7CgkgICAgICAgIGNvbnNvbGUubG9nKCdBREQtQ0hJTERSRU4tRVZFTlQ6ICcsIGV2ZW50KTsKCSAgICAgICAgX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKGV2ZW50KTsKCSAgICAgIH0KCSAgICB9CgoJICAgIC8vc2VuZCBkZWx0YSBtZXNzYWdlcyB0byBzdWJzY3JpcHRpb25zCgoJICB9LCB7CgkgICAga2V5OiAnX29uQ2hhbmdlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2hhbmdlKGV2ZW50LCBjaGlsZEluZm8pIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgX3RoaXMuX3ZlcnNpb24rKzsKCgkgICAgICBpZiAoX3RoaXMuX3N0YXR1cyA9PT0gJ29uJykgewoJICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIGEgcmVzb3VyY2UgY2hhbmdlcyBhZGRyZXNzOiBNZXNzYWdlQnVzCgkgICAgICAgIHZhciBjaGFuZ2VNc2cgPSB7CgkgICAgICAgICAgdHlwZTogJ3VwZGF0ZScsIGZyb206IF90aGlzLl91cmwsIHRvOiBfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJywKCSAgICAgICAgICBib2R5OiB7IHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCBzb3VyY2U6IF90aGlzLl9vd25lciwgYXR0cmlidXRlOiBldmVudC5maWVsZCB9CgkgICAgICAgIH07CgoJICAgICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3QgLSBfb25DaGFuZ2VdIC0gJywgZXZlbnQsIGNoaWxkSW5mbywgY2hhbmdlTXNnKTsKCgkgICAgICAgIGlmIChldmVudC5vVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuT0JKRUNUKSB7CgkgICAgICAgICAgaWYgKGV2ZW50LmNUeXBlICE9PSBfUHJveHlPYmplY3QuQ2hhbmdlVHlwZS5SRU1PVkUpIHsKCSAgICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsKCSAgICAgICAgICB9CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgY2hhbmdlTXNnLmJvZHkuYXR0cmlidXRlVHlwZSA9IGV2ZW50Lm9UeXBlOwoJICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsKCSAgICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlVQREFURSkgewoJICAgICAgICAgICAgY2hhbmdlTXNnLmJvZHkub3BlcmF0aW9uID0gZXZlbnQuY1R5cGU7CgkgICAgICAgICAgfQoJICAgICAgICB9CgoJICAgICAgICAvL2NoaWxkSW5mbyBtdXN0IGhhdmUgKHBhdGgsIGNoaWxkSWQpCgkgICAgICAgIGlmIChjaGlsZEluZm8pIHsKCSAgICAgICAgICBjaGFuZ2VNc2cudG8gPSBjaGlsZEluZm8ucGF0aDsKCSAgICAgICAgICBjaGFuZ2VNc2cuYm9keS5yZXNvdXJjZSA9IGNoaWxkSW5mby5jaGlsZElkOwoJICAgICAgICB9CgoJICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGNoYW5nZU1zZyk7CgkgICAgICB9CgkgICAgfQoKCSAgICAvL0ZMT1ctSU46IGRlbHRhIG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgb3IgRGF0YU9iamVjdENoaWxkIHdoZW4gY2hhbmdpbmcgZGF0YQoKCSAgfSwgewoJICAgIGtleTogJ19jaGFuZ2VPYmplY3QnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfY2hhbmdlT2JqZWN0KHN5bmNPYmosIG1zZykgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICAvL1RPRE86IHVwZGF0ZSB2ZXJzaW9uID8KCSAgICAgIC8vaG93IHRvIGhhbmRsZSBhbiBpbmNvcnJlY3QgdmVyc2lvbiA/IEV4YW1wbGU6IHJlY2VpdmUgYSB2ZXJzaW9uIDMgd2hlbiB0aGUgb2JzZXJ2ZXIgaXMgaW4gdmVyc2lvbiAxLCB3aGVyZSBpcyB0aGUgdmVyc2lvbiAyID8KCSAgICAgIC8vd2lsbCB3ZSBuZWVkIHRvIGNvbmZpcm0gdGhlIHJlY2VwdGlvbiA/CgkgICAgICBpZiAoX3RoaXMuX3ZlcnNpb24gKyAxID09PSBtc2cuYm9keS52ZXJzaW9uKSB7CgkgICAgICAgIF90aGlzLl92ZXJzaW9uKys7CgkgICAgICAgIHZhciBwYXRoID0gbXNnLmJvZHkuYXR0cmlidXRlOwoJICAgICAgICB2YXIgdmFsdWUgPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkobXNnLmJvZHkudmFsdWUpOwoJICAgICAgICB2YXIgZmluZFJlc3VsdCA9IHN5bmNPYmouZmluZEJlZm9yZShwYXRoKTsKCgkgICAgICAgIGlmIChtc2cuYm9keS5hdHRyaWJ1dGVUeXBlID09PSBfUHJveHlPYmplY3QuT2JqZWN0VHlwZS5BUlJBWSkgewoJICAgICAgICAgIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLkFERCkgewoJICAgICAgICAgICAgdmFyIGFyciA9IGZpbmRSZXN1bHQub2JqOwoJICAgICAgICAgICAgdmFyIGluZGV4ID0gZmluZFJlc3VsdC5sYXN0OwoJICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhcnIsIFtpbmRleCwgMF0uY29uY2F0KHZhbHVlKSk7CgkgICAgICAgICAgfSBlbHNlIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlJFTU9WRSkgewoJICAgICAgICAgICAgdmFyIF9hcnIgPSBmaW5kUmVzdWx0Lm9iajsKCSAgICAgICAgICAgIHZhciBfaW5kZXggPSBmaW5kUmVzdWx0Lmxhc3Q7CgkgICAgICAgICAgICBfYXJyLnNwbGljZShfaW5kZXgsIHZhbHVlKTsKCSAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUKCSAgICAgICAgICB9CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgaWYgKG1zZy5ib2R5LnZhbHVlKSB7CgkgICAgICAgICAgICBmaW5kUmVzdWx0Lm9ialtmaW5kUmVzdWx0Lmxhc3RdID0gdmFsdWU7IC8vIFVQREFURSBvciBBREQKCSAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgZGVsZXRlIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF07IC8vIFJFTU9WRQoJICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgLy9UT0RPOiBob3cgdG8gaGFuZGxlIHVuc3luY2hyb25pemVkIHZlcnNpb25zPwoJICAgICAgICBjb25zb2xlLmxvZygnVU5TWU5DSFJPTklaRUQgVkVSU0lPTjogKGRhdGEgPT4gJyArIF90aGlzLl92ZXJzaW9uICsgJywgbXNnID0+ICcgKyBtc2cuYm9keS52ZXJzaW9uICsgJyknKTsKCSAgICAgIH0KCSAgICB9CgoJICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RDaGlsZCB3aGVuIGNoYW5naW5nIGRhdGEKCgkgIH0sIHsKCSAgICBrZXk6ICdfY2hhbmdlQ2hpbGRyZW4nLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfY2hhbmdlQ2hpbGRyZW4obXNnKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoJICAgICAgY29uc29sZS5sb2coJ0NoYW5nZSBjaGlsZHJlbjogJywgX3RoaXMuX293bmVyLCBtc2cpOwoKCSAgICAgIHZhciBjaGlsZElkID0gbXNnLmJvZHkucmVzb3VyY2U7CgkgICAgICB2YXIgY2hpbGRyZW4gPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdOwoKCSAgICAgIGlmIChjaGlsZHJlbikgewoJICAgICAgICBfdGhpcy5fY2hhbmdlT2JqZWN0KGNoaWxkcmVuLl9zeW5jT2JqLCBtc2cpOwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgY29uc29sZS5sb2coJ05vIGNoaWxkcmVuIGZvdW5kIGZvcjogJywgY2hpbGRJZCk7CgkgICAgICB9CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAndXJsJywKCSAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICAgIHJldHVybiB0aGlzLl91cmw7CgkgICAgfQoKCSAgICAvKioKCSAgICAgKiBPYmplY3Qgc2NoZW1hIFVSTCAodGhpcyBmaWVsZCBpcyBub3QgeWV0IHN0YWJsZSwgYW5kIGlzIHN1YnNqZWN0IHRvIGNoYW5nZSkKCSAgICAgKiBAdHlwZSB7U2NoZW1hVVJMfQoJICAgICAqLwoKCSAgfSwgewoJICAgIGtleTogJ3NjaGVtYScsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fc2NoZW1hOwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogU3RhdHVzIG9mIHRoZSByZXBvcnRlciBvciBvYnNlcnZlciBjb25uZWN0aW9uICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQoJICAgICAqIEB0eXBlIHtTdGF0dXN9IC0gRW51bSBvZjogb24gfCBwYXVzZWQKCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdzdGF0dXMnLAoJICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1czsKCSAgICB9CgoJICAgIC8qKgoJICAgICAqIERhdGEgc3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4KCSAgICAgKiBAdHlwZSB7SlNPTn0gLSBKU09OIHN0cnVjdHVyZSB0aGF0IHNob3VsZCBmb2xsb3cgdGhlIGRlZmluZWQgc2NoZW1hLCBpZiBhbnkuCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnZGF0YScsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fc3luY09iai5kYXRhOwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogQWxsIGNyZWF0ZWQgY2hpbGRyZW4ncyBzaW5jZSB0aGUgc3Vic2NyaXB0aW9uLCBkb2Vzbid0IGNvbnRhaW4gYWxsIGNoaWxkcmVuJ3Mgc2luY2UgcmVwb3J0ZXIgY3JlYXRpb24uCgkgICAgICogQHR5cGUge09iamVjdDxDaGlsZElkLCBEYXRhT2JqZWN0Q2hpbGQ+fQoJICAgICAqLwoKCSAgfSwgewoJICAgIGtleTogJ2NoaWxkcmVucycsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW5PYmplY3RzOwoJICAgIH0KCSAgfV0pOwoJICByZXR1cm4gRGF0YU9iamVjdDsKCX0oKTsgLyoqCgkgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCgkgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoJICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoJICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoJICAgICAqCgkgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICAgICAqCgkgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAgICAgKgoJICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAgICAgKiovCgoJZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdDsKCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTIxICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CgoJdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKCXZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgoJdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKCXZhciBfUHJveHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7CgoJdmFyIF9Qcm94eU9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm94eU9iamVjdCk7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCgkvKioKCSAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIHRoZSBEYXRhT2JqZWN0IGFkZENoaWxkcmVuIGNhbGwgb3IgZnJvbSBvbkFkZENoaWxkcmVuIGlmIHJlbW90ZWx5IGNyZWF0ZWQuCgkgKiBDaGlsZHJlbiBvYmplY3Qgc3luY2hyb25pemF0aW9uIGlzIGEgYSBmYXN0IGZvcndhcmQgbWVjaGFuaXNtLCBubyBuZWVkIGZvciBkaXJlY3Qgc3Vic2NyaXB0aW9ucywgaXQgdXNlcyB0aGUgYWxyZWFkeSBhdXRob3JpemVkIHN1YnNjcmlwdGlvbiBmcm9tIHRoZSBwYXJlbnQgRGF0YU9iamVjdC4KCSAqLwoJdmFyIERhdGFPYmplY3RDaGlsZCAvKiBpbXBsZW1lbnRzIFN5bmNTdGF0dXMgKi8gPSBmdW5jdGlvbiAoKSB7CgkgIC8qIHByaXZhdGUKCSAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KCSAgX29uUmVzcG9uc2VIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKCSAgKi8KCgkgIC8qKgoJICAgKiBAaWdub3JlCgkgICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBEYXRhT2JqZWN0LmFkZENoaWxkcmVuCgkgICAqLwoJICBmdW5jdGlvbiBEYXRhT2JqZWN0Q2hpbGQocGFyZW50LCBjaGlsZElkLCBpbml0aWFsRGF0YSwgb3duZXIsIG1zZ0lkKSB7CgkgICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdENoaWxkKTsKCgkgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgX3RoaXMuX3BhcmVudCA9IHBhcmVudDsKCSAgICBfdGhpcy5fY2hpbGRJZCA9IGNoaWxkSWQ7CgkgICAgX3RoaXMuX293bmVyID0gb3duZXI7CgkgICAgX3RoaXMuX21zZ0lkID0gbXNnSWQ7CgoJICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7CgoJICAgIF90aGlzLl9idXMgPSBwYXJlbnQuX2J1czsKCSAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsKCSAgfQoKCSAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdENoaWxkLCBbewoJICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgLy90aGlzIGlzIG9ubHkgbmVlZGVkIGZvciBjaGlsZHJlbiByZXBvcnRlcnMKCSAgICAgIGlmIChfdGhpcy5fb3duZXIpIHsKCSAgICAgICAgX3RoaXMuX2xpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fb3duZXIsIGZ1bmN0aW9uIChtc2cpIHsKCSAgICAgICAgICBpZiAobXNnLnR5cGUgPT09ICdyZXNwb25zZScgJiYgbXNnLmlkID09PSBfdGhpcy5fbXNnSWQpIHsKCSAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0Q2hpbGQub25SZXNwb25zZTonLCBtc2cpOwoJICAgICAgICAgICAgX3RoaXMuX29uUmVzcG9uc2UobXNnKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgICAgfQoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIGlmIChfdGhpcy5fbGlzdGVuZXIpIHsKCSAgICAgICAgX3RoaXMuX2xpc3RlbmVyLnJlbW92ZSgpOwoJICAgICAgfQoJICAgIH0KCgkgICAgLyoqCgkgICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnZGVsZXRlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZSgpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX2NoaWxkcmVuW190aGlzLl9jaGlsZElkXTsKCgkgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwoKCSAgICAgIC8vVE9ETzogc2VuZCBkZWxldGUgbWVzc2FnZSA/CgkgICAgfQoKCSAgICAvKioKCSAgICAgKiBDaGlsZHJlbiBJRCBnZW5lcmF0ZWQgb24gYWRkQ2hpbGRyZW4uIFVuaXF1ZSBpZGVudGlmaWVyCgkgICAgICogQHR5cGUge1VSTH0gLSBVUkwgb2YgdGhlIGZvcm1hdCA8SHlwZXJ0eVVSTD4jPG51bWVyaWMtc2VxdWVuY2U+CgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnb25DaGFuZ2UnLAoKCgkgICAgLyoqCgkgICAgICogUmVnaXN0ZXIgdGhlIGNoYW5nZSBsaXN0ZW5lcnMgc2VudCBieSB0aGUgcmVwb3J0ZXIgY2hpbGQKCSAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCgkgICAgICovCgkgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGNhbGxiYWNrKSB7CgkgICAgICB0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7CgkgICAgICAgIGNhbGxiYWNrKGV2ZW50KTsKCSAgICAgIH0pOwoJICAgIH0KCgkgICAgLyoqCgkgICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgcmVzcG9uc2Ugbm90aWZpY2F0aW9ucyBvZiB0aGUgY3JlYXRlcwoJICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdvblJlc3BvbnNlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNwb25zZShjYWxsYmFjaykgewoJICAgICAgdGhpcy5fb25SZXNwb25zZUhhbmRsZXIgPSBjYWxsYmFjazsKCSAgICB9CgoJICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3QgLT4gX29uQ2hpbGRDcmVhdGUKCgkgIH0sIHsKCSAgICBrZXk6ICdfb25SZXNwb25zZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlc3BvbnNlKG1zZykgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICB2YXIgZXZlbnQgPSB7CgkgICAgICAgIHR5cGU6IG1zZy50eXBlLAoJICAgICAgICB1cmw6IG1zZy5ib2R5LnNvdXJjZSwKCSAgICAgICAgY29kZTogbXNnLmJvZHkuY29kZQoJICAgICAgfTsKCgkgICAgICBpZiAoX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKSB7CgkgICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7CgkgICAgICB9CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnY2hpbGRJZCcsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fY2hpbGRJZDsKCSAgICB9CgoJICAgIC8qKgoJICAgICAqIERhdGEgU3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4KCSAgICAgKiBAdHlwZSB7SlNPTn0gLSBKU09OIHN0cnVjdHVyZSB0aGF0IHNob3VsZCBmb2xsb3cgdGhlIGRlZmluZWQgc2NoZW1hLCBpZiBhbnkuCgkgICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnZGF0YScsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fc3luY09iai5kYXRhOwoJICAgIH0KCSAgfV0pOwoJICByZXR1cm4gRGF0YU9iamVjdENoaWxkOwoJfSgpOyAvKioKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoJICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoJICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCgkgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCgkgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoJICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQoJICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCgkgICAgICoKCSAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgICAgICoKCSAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICAgICAqCgkgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICAgICAqKi8KCglleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0Q2hpbGQ7Cgltb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCgkvKioqLyB9KSwKCS8qIDEyMiAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CglleHBvcnRzLk9iamVjdFR5cGUgPSBleHBvcnRzLkNoYW5nZVR5cGUgPSB1bmRlZmluZWQ7CgoJdmFyIF9zdHJpbmdpZnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKCgl2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOwoKCXZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCgl2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7CgoJdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCgl2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgoJX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLyoqCgkgKiBAYWNjZXNzIHByaXZhdGUKCSAqIE1haW4gY2xhc3MgdGhhdCBtYWludGFpbnMgYSBKU09OIG9iamVjdCwgYW5kIG9ic2VydmVzIGNoYW5nZXMgaW4gdGhpcyBvYmplY3QsIHJlY3Vyc2l2ZWx5LgoJICogSW50ZXJuYWwgb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBhbHNvIG9ic2VydmVkLgoJICovCgl2YXIgU3luY09iamVjdCA9IGZ1bmN0aW9uICgpIHsKCSAgZnVuY3Rpb24gU3luY09iamVjdChpbml0aWFsRGF0YSkgewoJICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFN5bmNPYmplY3QpOwoKCSAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICBfdGhpcy5fb2JzZXJ2ZXJzID0gW107CgkgICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsKCgkgICAgdGhpcy5fZGF0YSA9IGluaXRpYWxEYXRhIHx8IHt9OwoKCSAgICB0aGlzLl9pbnRlcm5hbE9ic2VydmUodGhpcy5fZGF0YSk7CgkgIH0KCgkgICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNPYmplY3QsIFt7CgkgICAga2V5OiAnb2JzZXJ2ZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmUoY2FsbGJhY2spIHsKCSAgICAgIHRoaXMuX29ic2VydmVycy5wdXNoKGNhbGxiYWNrKTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdmaW5kJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gZmluZChwYXRoKSB7CgkgICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsKCgkgICAgICByZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdChsaXN0KTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdmaW5kQmVmb3JlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gZmluZEJlZm9yZShwYXRoKSB7CgkgICAgICB2YXIgcmVzdWx0ID0ge307CgkgICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsKCSAgICAgIHJlc3VsdC5sYXN0ID0gbGlzdC5wb3AoKTsKCSAgICAgIHJlc3VsdC5vYmogPSB0aGlzLl9maW5kV2l0aFNwbGl0KGxpc3QpOwoKCSAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX2ZpbmRXaXRoU3BsaXQnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfZmluZFdpdGhTcGxpdChsaXN0KSB7CgkgICAgICB2YXIgb2JqID0gdGhpcy5fZGF0YTsKCSAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKCSAgICAgICAgb2JqID0gb2JqW3ZhbHVlXTsKCSAgICAgIH0pOwoKCSAgICAgIHJldHVybiBvYmo7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX2lzT2JzZXJ2YWJsZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc09ic2VydmFibGUob2JqKSB7CgkgICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgewoJICAgICAgICByZXR1cm4gdHJ1ZTsKCSAgICAgIH0KCgkgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX2ludGVybmFsT2JzZXJ2ZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9pbnRlcm5hbE9ic2VydmUob2JqZWN0KSB7CgkgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCgkgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoY2hhbmdlc2V0KSB7CgoJICAgICAgICBjaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7CgkgICAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSAmJiBjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHsKCSAgICAgICAgICAgIGlmIChjaGFuZ2UubmV3VmFsdWUgaW5zdGFuY2VvZiBPYmplY3QpIHsKCSAgICAgICAgICAgICAgdmFyIG8gPSBPYmplY3QuZGVlcE9ic2VydmUoY2hhbmdlLm5ld1ZhbHVlLCBoYW5kbGVyKTsKCSAgICAgICAgICAgICAgb2JqZWN0W2NoYW5nZS5rZXlwYXRoXSA9IG87CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7CgkgICAgICAgICAgICAgIHZhciBfbyA9IEFycmF5Lm9ic2VydmUoY2hhbmdlLm5ld1ZhbHVlLCBoYW5kbGVyKTsKCSAgICAgICAgICAgICAgb2JqZWN0W2NoYW5nZS5rZXlwYXRoXSA9IF9vOwoJICAgICAgICAgICAgfQoJICAgICAgICAgIH0KCSAgICAgICAgfSk7CgoJICAgICAgICBjaGFuZ2VzZXQuZXZlcnkoZnVuY3Rpb24gKGNoYW5nZSkgewoJICAgICAgICAgIF90aGlzMi5fb25DaGFuZ2VzKGNoYW5nZSk7CgkgICAgICAgIH0pOwoJICAgICAgfTsKCgkgICAgICB0aGlzLl9kYXRhID0gT2JqZWN0LmRlZXBPYnNlcnZlKG9iamVjdCwgaGFuZGxlcik7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX2ZpcmVFdmVudCcsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9maXJlRXZlbnQoZXZlbnQpIHsKCSAgICAgIHRoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykgewoJICAgICAgICBjYWxsYmFjayhldmVudCk7CgkgICAgICB9KTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdfb25DaGFuZ2VzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2hhbmdlcyhjaGFuZ2UpIHsKCgkgICAgICB2YXIgb2JqID0gY2hhbmdlLm9iamVjdDsKCSAgICAgIHZhciBvYmpUeXBlID0gdm9pZCAwOwoKCSAgICAgIGlmIChvYmouY29uc3RydWN0b3IgPT09IE9iamVjdCkgewoJICAgICAgICBvYmpUeXBlID0gT2JqZWN0VHlwZS5PQkpFQ1Q7CgkgICAgICB9CgoJICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHsKCSAgICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuQVJSQVk7CgkgICAgICB9CgoJICAgICAgdmFyIGZpZWxkU3RyaW5nID0gY2hhbmdlLmtleXBhdGg7CgoJICAgICAgLy8gY29uc29sZS5sb2coJ0ZpZWxkOicsIGZpZWxkU3RyaW5nKTsKCSAgICAgIC8vIGNvbnNvbGUubG9nKCd0eXBlOicsIGNoYW5nZS50eXBlKTsKCgkgICAgICAvL2xldCBvbGRWYWx1ZSA9IGNoYW5nZS5vbGRWYWx1ZTsKCSAgICAgIHZhciBuZXdWYWx1ZSA9IG9ialtjaGFuZ2UubmFtZV07CgoJICAgICAgY29uc29sZS5pbmZvKGNoYW5nZS50eXBlICsgJyB8IEZpZWxkOiAnICsgZmllbGRTdHJpbmcgKyAnIHwgTmV3IFZhbHVlOicsICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShuZXdWYWx1ZSkpOwoKCSAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ3VwZGF0ZScpIHsKCSAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsKCSAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5VUERBVEUsCgkgICAgICAgICAgb1R5cGU6IG9ialR5cGUsCgkgICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nLAoJICAgICAgICAgIGRhdGE6IG5ld1ZhbHVlCgkgICAgICAgIH0pOwoJICAgICAgfQoKCSAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2FkZCcpIHsKCSAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsKCSAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5BREQsCgkgICAgICAgICAgb1R5cGU6IG9ialR5cGUsCgkgICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nLAoJICAgICAgICAgIGRhdGE6IG5ld1ZhbHVlCgkgICAgICAgIH0pOwoJICAgICAgfQoKCSAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2RlbGV0ZScpIHsKCSAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsKCSAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5SRU1PVkUsCgkgICAgICAgICAgb1R5cGU6IG9ialR5cGUsCgkgICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nCgkgICAgICAgIH0pOwoJICAgICAgfQoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ2RhdGEnLAoJICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7CgkgICAgfQoJICB9XSk7CgkgIHJldHVybiBTeW5jT2JqZWN0OwoJfSgpOwoKCXZhciBDaGFuZ2VUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0geyBVUERBVEU6ICd1cGRhdGUnLCBBREQ6ICdhZGQnLCBSRU1PVkU6ICdyZW1vdmUnIH07Cgl2YXIgT2JqZWN0VHlwZSA9IGV4cG9ydHMuT2JqZWN0VHlwZSA9IHsgT0JKRUNUOiAnb2JqZWN0JywgQVJSQVk6ICdhcnJheScgfTsKCWV4cG9ydHMuZGVmYXVsdCA9IFN5bmNPYmplY3Q7CgoJLyoqKi8gfSksCgkvKiAxMjMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoKCWV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgoJdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOwoKCXZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKCXZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpOwoKCXZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldE93blByb3BlcnR5RGVzY3JpcHRvcik7CgoJZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCglleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsKCSAgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOwoJICB2YXIgZGVzYyA9ICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMi5kZWZhdWx0KShvYmplY3QsIHByb3BlcnR5KTsKCgkgIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsKCSAgICB2YXIgcGFyZW50ID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkob2JqZWN0KTsKCgkgICAgaWYgKHBhcmVudCA9PT0gbnVsbCkgewoJICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKCSAgICB9IGVsc2UgewoJICAgICAgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7CgkgICAgfQoJICB9IGVsc2UgaWYgKCJ2YWx1ZSIgaW4gZGVzYykgewoJICAgIHJldHVybiBkZXNjLnZhbHVlOwoJICB9IGVsc2UgewoJICAgIHZhciBnZXR0ZXIgPSBkZXNjLmdldDsKCgkgICAgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7CgkgICAgICByZXR1cm4gdW5kZWZpbmVkOwoJICAgIH0KCgkgICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsKCSAgfQoJfTsKCgkvKioqLyB9KSwKCS8qIDEyNCAqLywKCS8qIDEyNSAqLywKCS8qIDEyNiAqLywKCS8qIDEyNyAqLywKCS8qIDEyOCAqLywKCS8qIDEyOSAqLywKCS8qIDEzMCAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCSJ1c2Ugc3RyaWN0IjsKCgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJICB2YWx1ZTogdHJ1ZQoJfSk7CgoJdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7CgoJdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKCXZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzYpOwoKCXZhciBfYXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Fzc2lnbik7CgoJdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwoKCXZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCgl2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKCXZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCgl2YXIgX0RhdGFPYmplY3RSZXBvcnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsKCgl2YXIgX0RhdGFPYmplY3RSZXBvcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0UmVwb3J0ZXIpOwoKCXZhciBfRGF0YU9iamVjdE9ic2VydmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTgpOwoKCXZhciBfRGF0YU9iamVjdE9ic2VydmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RPYnNlcnZlcik7CgoJdmFyIF9EYXRhUHJvdmlzaW9uYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMyk7CgoJdmFyIF9EYXRhUHJvdmlzaW9uYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YVByb3Zpc2lvbmFsKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCS8qKgoJKiBUaGUgbWFpbiBjbGFzcyBmb3IgdGhlIHN5bmNoZXIgcGFja2FnZS4KCSogVGhlIFN5bmNoZXIgaXMgYSBzaW5nbGV0b24gY2xhc3MgcGVyIEh5cGVydHkvVVJMIGFuZCBpdCBpcyB0aGUgb3duZXIgb2YgYWxsIGNyZWF0ZWQgRGF0YSBTeW5jIE9iamVjdHMgYWNjb3JkaW5nIHRvIHRoZSBSZXBvcnRlciAtIE9ic2VydmVyIHBhdHRlcm4uCgkqIE1haW4gZnVuY3Rpb25hbGl0eSBpcyB0byBjcmVhdGUgcmVwb3J0ZXJzIGFuZCB0byBzdWJzY3JpYmUgdG8gZXhpc3Rpbmcgb25lcy4KCSovCgl2YXIgU3luY2hlciA9IGZ1bmN0aW9uICgpIHsKCSAgLyogcHJpdmF0ZQoJICBfb3duZXI6IFVSTAoJICBfYnVzOiBNaW5pQnVzCgkgICBfc3ViVVJMOiBVUkwKCSAgIF9yZXBvcnRlcnM6IDx1cmw6IERhdGFPYmplY3RSZXBvcnRlcj4KCSAgX29ic2VydmVyczogPHVybDogRGF0YU9iamVjdE9ic2VydmVyPgoJICBfcHJvdmlzaW9uYWxzOiA8dXJsOiBEYXRhUHJvdmlzaW9uYWw+CgkgICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tCgkgIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZAoJICBfb25SZXN1bWU6IChldmVudCkgPT4gdm9pZAoJICAqLwoKCSAgLyoqCgkgICogQ29uc3RydWN0b3IgdGhhdCBzaG91bGQgYmUgdXNlZCBieSB0aGUgSHlwZXJ0eSBvd25lcgoJICAqIEBwYXJhbSB7SHlwZXJ0eVVSTH0gb3duZXIgLSBIeXBlcnR5IFVSTCBvd25lci4gQW4gVVJMIGFsbG9jYXRlZCBieSB0aGUgcnVudGltZSB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhlIEh5cGVydHkuCgkgICogQHBhcmFtIHtNaW5pQnVzfSBidXMgLSBBbiBpbnN0YW5jZSBvZiB0aGUgTWluaUJ1cyBwcm92aWRlZCBpbiB0aGUgc2FuZGJveC4gV2hlbiBhbiBvYmplY3QgKFJlcG9ydGVyIG9yIE9ic2VydmVkKSBpcyBjcmVhdGVkLCB0aGUgU3luY2hlck1hbmFnZXIgd2lsbCBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgTWluaUJ1cyB0byByZWNlaXZlL3NlbmQgTWVzc2FnZXMgb2YgdGhhdCBvYmplY3QuCgkgICogQHBhcmFtIHtKU09OfSBjb25maWcgLSBDb25maWd1cmF0aW9uIGRhdGEuIFRoZSBvbmx5IHJlcXVpcmVkIGZpZWxkIGZvciBub3cgaXMgdGhlIHJ1bnRpbWVVUkwuCgkgICovCgkgIGZ1bmN0aW9uIFN5bmNoZXIob3duZXIsIGJ1cywgY29uZmlnKSB7CgkgICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgU3luY2hlcik7CgoJICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgIF90aGlzLl9vd25lciA9IG93bmVyOwoJICAgIF90aGlzLl9idXMgPSBidXM7CgoJICAgIF90aGlzLl9zdWJVUkwgPSBjb25maWcucnVudGltZVVSTCArICcvc20nOwoKCSAgICBfdGhpcy5fcmVwb3J0ZXJzID0ge307CgkgICAgX3RoaXMuX29ic2VydmVycyA9IHt9OwoJICAgIF90aGlzLl9wcm92aXNpb25hbHMgPSB7fTsKCgkgICAgYnVzLmFkZExpc3RlbmVyKG93bmVyLCBmdW5jdGlvbiAobXNnKSB7CgkgICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmCgkgICAgICBpZiAobXNnLmZyb20gIT09IG93bmVyKSB7CgkgICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIFN5bmNoZXItUkNWOiAnLCBtc2cpOwoJICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CgkgICAgICAgICAgY2FzZSAnZm9yd2FyZCc6CgkgICAgICAgICAgICBfdGhpcy5fb25Gb3J3YXJkKG1zZyk7YnJlYWs7CgkgICAgICAgICAgY2FzZSAnY3JlYXRlJzoKCSAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZUNyZWF0ZShtc2cpO2JyZWFrOwoJICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6CgkgICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVEZWxldGUobXNnKTticmVhazsKCSAgICAgICAgfQoJICAgICAgfQoJICAgIH0pOwoJICB9CgoJICAvKioKCSAgKiBUaGUgb3duZXIgb2YgdGhlIFN5bmNoZXIgYW5kIGFsbCBjcmVhdGVkIHJlcG9ydGVycy4KCSAgKiBAdHlwZSB7SHlwZXJ0eVVSTH0KCSAgKi8KCgoJICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShTeW5jaGVyLCBbewoJICAgIGtleTogJ2NyZWF0ZScsCgoKCSAgICAvKioKCSAgICAqIFJlcXVlc3QgYSBEYXRhT2JqZWN0UmVwb3J0ZXIgY3JlYXRpb24uIFRoZSBVUkwgd2lsbCBiZSBiZSByZXF1ZXN0ZWQgYnkgdGhlIGFsbG9jYXRpb24gbWVjaGFuaXNtLgoJICAgICogQHBhcmFtICB7U2NoZW1hVVJMfSBzY2hlbWEgLSBIeXBlcnR5IENhdGFsb2d1ZSBVUkwgYWRkcmVzcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBKU09OLVNjaGVtYSBkZXNjcmliaW5nIHRoZSBEYXRhIE9iamVjdCBzY2hlbWEKCSAgICAqIEBwYXJhbSAge0h5cGVydHlVUkxbXX0gb2JzZXJ2ZXJzIC0gTGlzdCBvZiBoeXBlcnRpZXMgdGhhdCBhcmUgcHJlLWF1dGhvcml6ZWQgZm9yIHN1YnNjcmlwdGlvbgoJICAgICogQHBhcmFtICB7SlNPTn0gaW5pdGlhbERhdGEgLSBJbml0aWFsIGRhdGEgb2YgdGhlIHJlcG9ydGVyCgkgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG9iamVjdFVSTCAtIHJldXNhYmxlIGRhdGFPYmplY3QgVVJMCgkgICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RSZXBvcnRlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IFJlcG9ydGVyLiBUaGUgcmVwb3J0ZXIgY2FuIGJlIGFjY2VwdGVkIG9yIHJlamVjdGVkIGJ5IHRoZSBQRVAKCSAgICAqLwoJICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoc2NoZW1hLCBvYnNlcnZlcnMsIGluaXRpYWxEYXRhKSB7CgkgICAgICB2YXIgc3RvcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwoJICAgICAgdmFyIHAycCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZmFsc2U7CgoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCSAgICAgIHZhciBjcml0ZXJpYSA9IHt9OwoKCSAgICAgIGNyaXRlcmlhLnAycCA9IHAycDsKCSAgICAgIGNyaXRlcmlhLnN0b3JlID0gc3RvcmU7CgkgICAgICBjcml0ZXJpYS5zY2hlbWEgPSBzY2hlbWE7CgkgICAgICBjcml0ZXJpYS5vYnNlcnZlcnMgPSBvYnNlcnZlcnM7CgkgICAgICBjcml0ZXJpYS5pbml0aWFsRGF0YSA9IGluaXRpYWxEYXRhOwoKCSAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUgUmVwb3J0ZXIgLSBjcml0ZXJpYTogJywgY3JpdGVyaWEpOwoKCSAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IGZhbHNlIH0pOwoKCSAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlKGNyaXRlcmlhKTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdyZXN1bWVSZXBvcnRlcnMnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVSZXBvcnRlcnMoY3JpdGVyaWEpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgkgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gcmVzdW1lIFJlcG9ydGVyIC0gY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsKCgkgICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiB0cnVlIH0pOwoKCSAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlKGNyaXRlcmlhKTsKCSAgICB9CgoJICAgIC8qKgoJICAgICogUmVxdWVzdCBhIHN1YnNjcmlwdGlvbiB0byBhbiBleGlzdGVudCByZXBvcnRlciBvYmplY3QuCgkgICAgKiBAcGFyYW0ge1NjaGVtYVVSTH0gc2NoZW1hIC0gSHlwZXJ0eSBDYXRhbG9ndWUgVVJMIGFkZHJlc3MgdGhhdCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgSlNPTi1TY2hlbWEgZGVzY3JpYmluZyB0aGUgRGF0YSBPYmplY3Qgc2NoZW1hCgkgICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gQWRkcmVzcyBvZiB0aGUgZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0IHRvIGJlIG9ic2VydmVkCgkgICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RPYnNlcnZlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IG9ic2VydmVyLiBJdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVwb3J0ZXIuCgkgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdzdWJzY3JpYmUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJzY3JpYmUoc2NoZW1hLCBvYmpVUkwpIHsKCSAgICAgIHZhciBzdG9yZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CgkgICAgICB2YXIgcDJwID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKCgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoJICAgICAgdmFyIGNyaXRlcmlhID0ge307CgoJICAgICAgY3JpdGVyaWEucDJwID0gcDJwOwoJICAgICAgY3JpdGVyaWEuc3RvcmUgPSBzdG9yZTsKCSAgICAgIGNyaXRlcmlhLnNjaGVtYSA9IHNjaGVtYTsKCSAgICAgIGNyaXRlcmlhLnJlc291cmNlID0gb2JqVVJMOwoKCSAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIHN1YnNjcmliZV0gLSBzdWJzY3JpYmUgY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsKCgkgICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiBmYWxzZSB9KTsKCgkgICAgICByZXR1cm4gX3RoaXMuX3N1YnNjcmliZShjcml0ZXJpYSk7CgkgICAgfQoKCSAgICAvKioKCSAgICAqIFJlcXVlc3QgYSBzdWJzY3JpcHRpb24gdG8gYW4gZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0LgoJICAgICogQHBhcmFtIHtjcml0ZXJpYX0gY3JpdGVyaWEgLSBJbmZvcm1hdGlvbiB0byBkaXNjb3ZlcnkgdGhlIG9ic2VydmVyIG9iamVjdAoJICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0T2JzZXJ2ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBvYnNlcnZlci4gSXQncyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcG9ydGVyLgoJICAgICovCgoJICB9LCB7CgkgICAga2V5OiAncmVzdW1lT2JzZXJ2ZXJzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lT2JzZXJ2ZXJzKGNyaXRlcmlhKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoJICAgICAgdmFyIF9jcml0ZXJpYSA9IGNyaXRlcmlhIHx8IHt9OwoKCSAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShfY3JpdGVyaWEsIHsgcmVzdW1lOiB0cnVlIH0pOwoKCSAgICAgIHJldHVybiBfdGhpcy5fc3Vic2NyaWJlKF9jcml0ZXJpYSk7CgkgICAgfQoKCSAgICAvKioKCSAgICAqIFJlcXVlc3QgYSByZWFkIGFjdGlvbiBvbiB0aGUgcmVwb3J0ZXIgb2JqZWN0CgkgICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gVVJMIG9mIHRoZSByZXBvcnRlciBvYmplY3QgdG8gYmUgcmVhZAoJICAgICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q+fSBSZXR1cm4gUHJvbWlzZSB0byBsYXN0IGF2YWlsYWJsZSBkYXRhIG9mIHRoZSByZXBvcnRlcgoJICAgICovCgoJICB9LCB7CgkgICAga2V5OiAncmVhZCcsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWQob2JqVVJMKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgZGlyZWN0bHkgdG8gcmVwb3J0ZXIgb2JqZWN0IChtYXliZSB0aGVyZSBpcyBubyBsaXN0ZW5lciBhdmFpbGFibGUsIHNvIGl0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBNZXNzYWdlQnVzIC0+IHJlc29sdmUpCgkgICAgICAvL3dpbGwgcmVhY2ggdGhlIHJlbW90ZSBvYmplY3QgaW4gRGF0YU9iamVjdFJlcG9ydGVyIC0+IF9vblJlYWQKCSAgICAgIHZhciByZWFkTXNnID0gewoJICAgICAgICB0eXBlOiAncmVhZCcsIGZyb206IF90aGlzLl9vd25lciwgdG86IG9ialVSTAoJICAgICAgfTsKCgkgICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCSAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZWFkTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKCSAgICAgICAgICBjb25zb2xlLmxvZygncmVhZC1yZXNwb25zZTogJywgcmVwbHkpOwoJICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoJICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LnZhbHVlKTsKCSAgICAgICAgICB9IGVsc2UgewoJICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7CgkgICAgICAgICAgfQoJICAgICAgICB9KTsKCSAgICAgIH0pOwoJICAgIH0KCgkgICAgLyoqCgkgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyBjcmVhdGUgYW5kIGRlbGV0ZSBldmVudHMgb2YgcmVtb3ZlIFJlcG9ydGVyIG9iamVjdHMuCgkgICAgKiBUaGlzIGlzIHJlbGVhdGVkIHRvIHRoZSBtZXNzYWdlbnMgc2VudCBieSBjcmVhdGUgdG8gdGhlIG9ic2VydmVycyBIeXBlcnR5IGFycmF5LgoJICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawoJICAgICovCgoJICB9LCB7CgkgICAga2V5OiAnb25Ob3RpZmljYXRpb24nLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBvbk5vdGlmaWNhdGlvbihjYWxsYmFjaykgewoJICAgICAgdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyID0gY2FsbGJhY2s7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX2NyZWF0ZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGUoY3JpdGVyaWEpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgkgICAgICAgIHZhciByZXN1bWUgPSBjcml0ZXJpYS5yZXN1bWU7CgkgICAgICAgIHZhciBpbml0aWFsRGF0YSA9IGNyaXRlcmlhLmluaXRpYWxEYXRhIHx8IHt9OwoJICAgICAgICB2YXIgc2NoZW1hID0gdm9pZCAwOwoKCSAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGUKCSAgICAgICAgdmFyIHJlcXVlc3RNc2cgPSB7CgkgICAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsCgkgICAgICAgICAgYm9keTogeyByZXN1bWU6IHJlc3VtZSB9CgkgICAgICAgIH07CgoJICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdOiAnLCBjcml0ZXJpYSwgcmVxdWVzdE1zZyk7CgoJICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUgPSBpbml0aWFsRGF0YTsKCSAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnZhbHVlLnJlcG9ydGVyID0gX3RoaXMuX293bmVyOwoKCSAgICAgICAgaWYgKGNyaXRlcmlhLnNjaGVtYSkgewoJICAgICAgICAgIHNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsKCSAgICAgICAgICByZXF1ZXN0TXNnLmJvZHkuc2NoZW1hID0gY3JpdGVyaWEuc2NoZW1hOwoJICAgICAgICB9CgoJICAgICAgICBpZiAoY3JpdGVyaWEucDJwKSByZXF1ZXN0TXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwoJICAgICAgICBpZiAoY3JpdGVyaWEuc3RvcmUpIHJlcXVlc3RNc2cuYm9keS5zdG9yZSA9IGNyaXRlcmlhLnN0b3JlOwoJICAgICAgICBpZiAoY3JpdGVyaWEub2JzZXJ2ZXJzKSByZXF1ZXN0TXNnLmJvZHkuYXV0aG9yaXNlID0gY3JpdGVyaWEub2JzZXJ2ZXJzOwoKCSAgICAgICAgaWYgKHJlc3VtZSkgewoJICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSByZXN1bWUgbWVzc2FnZTogJywgcmVxdWVzdE1zZyk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsKCSAgICAgICAgfQoKCSAgICAgICAgLy9yZXF1ZXN0IGNyZWF0ZSB0byB0aGUgYWxsb2NhdGlvbiBzeXN0ZW0uIENhbiBiZSByZWplY3RlZCBieSB0aGUgUG9saWN5RW5naW5lLgoJICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2csIGZ1bmN0aW9uIChyZXBseSkgewoJICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUtcmVzcG9uc2U6ICcsIHJlcGx5KTsKCSAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKCSAgICAgICAgICAgIC8vcmVwb3J0ZXIgY3JlYXRpb24gYWNjZXB0ZWQKCSAgICAgICAgICAgIHZhciBvYmpVUkwgPSByZXBseS5ib2R5LnJlc291cmNlOwoKCSAgICAgICAgICAgIGlmIChyZXN1bWUpIHsKCSAgICAgICAgICAgICAgc2NoZW1hID0gcmVwbHkuYm9keS5zY2hlbWE7CgkgICAgICAgICAgICAgIGluaXRpYWxEYXRhID0gcmVwbHkuYm9keS52YWx1ZTsKCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCBpbml0aWFsRGF0YSwgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcyk7CgkgICAgICAgICAgICBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF0gPSBuZXdPYmo7CgoJICAgICAgICAgICAgcmVzb2x2ZShuZXdPYmopOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIHJlamVjdGVkCgkgICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgICAgfSk7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX3N1YnNjcmliZScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9zdWJzY3JpYmUoY3JpdGVyaWEpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgoJICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsU3Vic2NyaWJlCgkgICAgICAgIHZhciBzdWJzY3JpYmVNc2cgPSB7CgkgICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsCgkgICAgICAgICAgYm9keToge30KCSAgICAgICAgfTsKCgkgICAgICAgIC8vIEh5cGVydHkgcmVxdWVzdCB0byBiZSBhbiBPYnNlcnZlcgoJICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNoeXBlcnR5LXJlcXVlc3QtdG8tYmUtYW4tb2JzZXJ2ZXIKCgkgICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciB0aGUgc2FtZSBIeXBlcnR5IFVSTAoJICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNyZXN1bWUtc3Vic2NyaXB0aW9ucy1mb3ItdGhlLXNhbWUtaHlwZXJ0eS11cmwKCgkgICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciBhIGNlcnRhaW4gdXNlciBhbmQgZGF0YSBzY2hlbWEgaW5kZXBlbmRlbnRseSBvZiB0aGUgSHlwZXJ0eSBVUkwuCgkgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci1hLWNlcnRhaW4tdXNlci1hbmQtZGF0YS1zY2hlbWEtaW5kZXBlbmRlbnRseS1vZi10aGUtaHlwZXJ0eS11cmwKCSAgICAgICAgaWYgKGNyaXRlcmlhKSB7CgkgICAgICAgICAgaWYgKGNyaXRlcmlhLnAycCkgc3Vic2NyaWJlTXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwoJICAgICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgc3Vic2NyaWJlTXNnLmJvZHkuc3RvcmUgPSBjcml0ZXJpYS5zdG9yZTsKCSAgICAgICAgICBpZiAoY3JpdGVyaWEuc2NoZW1hKSBzdWJzY3JpYmVNc2cuYm9keS5zY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7CgkgICAgICAgICAgaWYgKGNyaXRlcmlhLmlkZW50aXR5KSBzdWJzY3JpYmVNc2cuYm9keS5pZGVudGl0eSA9IGNyaXRlcmlhLmlkZW50aXR5OwoJICAgICAgICAgIGlmIChjcml0ZXJpYS5yZXNvdXJjZSkgc3Vic2NyaWJlTXNnLmJvZHkucmVzb3VyY2UgPSBjcml0ZXJpYS5yZXNvdXJjZTsKCSAgICAgICAgfQoKCSAgICAgICAgc3Vic2NyaWJlTXNnLmJvZHkucmVzdW1lID0gY3JpdGVyaWEucmVzdW1lOwoKCSAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIHN1YnNjcmliZSBtZXNzYWdlOiAnLCBjcml0ZXJpYSwgc3Vic2NyaWJlTXNnKTsKCgkgICAgICAgIC8vcmVxdWVzdCBzdWJzY3JpcHRpb24KCSAgICAgICAgLy9Qcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uCgkgICAgICAgIC8vZm9yIG1vcmUgaW5mbyBzZWUgdGhlIERhdGFQcm92aXNpb25hbCBjbGFzcyBkb2N1bWVudGF0aW9uLgoJICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CgkgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIHN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOwoKCSAgICAgICAgICB2YXIgc2NoZW1hID0gcmVwbHkuYm9keS5zY2hlbWE7CgkgICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7CgoJICAgICAgICAgIHZhciBuZXdQcm92aXNpb25hbCA9IF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXTsKCSAgICAgICAgICBkZWxldGUgX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOwoJICAgICAgICAgIGlmIChuZXdQcm92aXNpb25hbCkgbmV3UHJvdmlzaW9uYWwuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKCgkgICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA8IDIwMCkgewoJICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIG5ldyBEYXRhUHJvdmlzaW9uYWw6ICcsIHJlcGx5LmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMsIG9ialVSTCk7CgkgICAgICAgICAgICBuZXdQcm92aXNpb25hbCA9IG5ldyBfRGF0YVByb3Zpc2lvbmFsMi5kZWZhdWx0KF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsKCSAgICAgICAgICAgIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXSA9IG5ld1Byb3Zpc2lvbmFsOwoJICAgICAgICAgIH0gZWxzZSBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKCSAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBuZXcgRGF0YSBPYmplY3QgT2JzZXJ2ZXI6ICcsIHJlcGx5LCBfdGhpcy5fcHJvdmlzaW9uYWxzKTsKCgkgICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0T2JzZXJ2ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCByZXBseS5ib2R5LnZhbHVlLCBuZXdQcm92aXNpb25hbC5jaGlsZHJlbiwgcmVwbHkuYm9keS52ZXJzaW9uKTsKCSAgICAgICAgICAgIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXSA9IG5ld09iajsKCgkgICAgICAgICAgICByZXNvbHZlKG5ld09iaik7CgkgICAgICAgICAgICBuZXdQcm92aXNpb25hbC5hcHBseShuZXdPYmopOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0pOwoJICAgICAgfSk7CgkgICAgfQoKCSAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIGxvY2FsIHJ1bnRpbWUgUmVwb3J0ZXJPYmplY3QgLT4gX29uUmVtb3RlU3Vic2NyaWJlCgoJICB9LCB7CgkgICAga2V5OiAnX29uRm9yd2FyZCcsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZvcndhcmQobXNnKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIHZhciByZXBvcnRlciA9IF90aGlzLl9yZXBvcnRlcnNbbXNnLmJvZHkudG9dOwoJICAgICAgcmVwb3J0ZXIuX29uRm9yd2FyZChtc2cpOwoJICAgIH0KCgkgICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgU3luY2hlciAtPiBjcmVhdGUgKHRoaXMgaXMgYWN0dWFsbHkgYW4gaW52aXRhdGlvbiB0byBzdWJzY3JpYmUpCgoJICB9LCB7CgkgICAga2V5OiAnX29uUmVtb3RlQ3JlYXRlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlQ3JlYXRlKG1zZykgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICAvL3JlbW92ZSAiL3N1YnNjcmlwdGlvbiIgZnJvbSB0aGUgVVJMCgkgICAgICB2YXIgcmVzb3VyY2UgPSBtc2cuZnJvbS5zbGljZSgwLCAtMTMpOwoKCSAgICAgIHZhciBldmVudCA9IHsKCSAgICAgICAgdHlwZTogbXNnLnR5cGUsCgkgICAgICAgIGZyb206IG1zZy5ib2R5LnNvdXJjZSwKCSAgICAgICAgdXJsOiByZXNvdXJjZSwKCSAgICAgICAgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEsCgkgICAgICAgIHZhbHVlOiBtc2cuYm9keS52YWx1ZSwKCSAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LAoKCSAgICAgICAgYWNrOiBmdW5jdGlvbiBhY2sodHlwZSkgewoJICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsKCSAgICAgICAgICBpZiAodHlwZSkgewoJICAgICAgICAgICAgbFR5cGUgPSB0eXBlOwoJICAgICAgICAgIH0KCgkgICAgICAgICAgLy9zZW5kIGFjayByZXNwb25zZSBtZXNzYWdlCgkgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CgkgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKCSAgICAgICAgICAgIGJvZHk6IHsgY29kZTogbFR5cGUgfQoJICAgICAgICAgIH0pOwoJICAgICAgICB9CgkgICAgICB9OwoKCSAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7CgkgICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIE5PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOwoJICAgICAgICBfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKGV2ZW50KTsKCSAgICAgIH0KCSAgICB9CgoJICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RSZXBvcnRlciAtPiBkZWxldGUKCgkgIH0sIHsKCSAgICBrZXk6ICdfb25SZW1vdGVEZWxldGUnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVEZWxldGUobXNnKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIC8vcmVtb3ZlICIvc3Vic2NyaXB0aW9uIiBmcm9tIHRoZSBVUkwKCSAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5ib2R5LnJlc291cmNlOwoKCSAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fb2JzZXJ2ZXJzW3Jlc291cmNlXTsKCSAgICAgIGlmIChvYmplY3QpIHsKCSAgICAgICAgdmFyIGV2ZW50ID0gewoJICAgICAgICAgIHR5cGU6IG1zZy50eXBlLAoJICAgICAgICAgIHVybDogcmVzb3VyY2UsCgkgICAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LAoKCSAgICAgICAgICBhY2s6IGZ1bmN0aW9uIGFjayh0eXBlKSB7CgkgICAgICAgICAgICB2YXIgbFR5cGUgPSAyMDA7CgkgICAgICAgICAgICBpZiAodHlwZSkgewoJICAgICAgICAgICAgICBsVHlwZSA9IHR5cGU7CgkgICAgICAgICAgICB9CgoJICAgICAgICAgICAgLy9UT0RPOiBhbnkgb3RoZXIgZGlmZmVyZW50IG9wdGlvbnMgZm9yIHRoZSByZWxlYXNlIHByb2Nlc3MsIGxpa2UgYWNjZXB0IGJ1dCBub3IgcmVsZWFzZSBsb2NhbD8KCSAgICAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7CgkgICAgICAgICAgICAgIG9iamVjdC5kZWxldGUoKTsKCSAgICAgICAgICAgIH0KCgkgICAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UKCSAgICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewoJICAgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKCSAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSwgc291cmNlOiBfdGhpcy5fb3duZXIgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgfQoJICAgICAgICB9OwoKCSAgICAgICAgaWYgKF90aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIpIHsKCSAgICAgICAgICBjb25zb2xlLmxvZygnTk9USUZJQ0FUSU9OLUVWRU5UOiAnLCBldmVudCk7CgkgICAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CgkgICAgICAgIH0KCSAgICAgIH0gZWxzZSB7CgkgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewoJICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAoJICAgICAgICAgIGJvZHk6IHsgY29kZTogNDA0LCBzb3VyY2U6IF90aGlzLl9vd25lciB9CgkgICAgICAgIH0pOwoJICAgICAgfQoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ293bmVyJywKCSAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICAgIHJldHVybiB0aGlzLl9vd25lcjsKCSAgICB9CgoJICAgIC8qKgoJICAgICogQWxsIG93bmVkIHJlcG9ydGVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBjcmVhdGUKCSAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0UmVwb3J0ZXI+fQoJICAgICovCgoJICB9LCB7CgkgICAga2V5OiAncmVwb3J0ZXJzJywKCSAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICAgIHJldHVybiB0aGlzLl9yZXBvcnRlcnM7CgkgICAgfQoKCSAgICAvKioKCSAgICAqIEFsbCBvd25lZCBvYnNlcnZlcnMsIHRoZSBvbmVzIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IGEgbG9jYWwgc3Vic2NyaXB0aW9uCgkgICAgKiBAdHlwZSB7T2JqZWN0PFVSTCwgRGF0YU9iamVjdE9ic2VydmVyPn0KCSAgICAqLwoKCSAgfSwgewoJICAgIGtleTogJ29ic2VydmVycycsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzOwoJICAgIH0KCSAgfV0pOwoJICByZXR1cm4gU3luY2hlcjsKCX0oKTsgLyoqCgkgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCgkgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoJICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoJICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKCSAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoJICAgICAqCgkgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICAgICAqCgkgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAgICAgKgoJICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAgICAgKiovCgoJZXhwb3J0cy5kZWZhdWx0ID0gU3luY2hlcjsKCW1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKCS8qKiovIH0pLAoJLyogMTMxICovLAoJLyogMTMyICovLAoJLyogMTMzICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJInVzZSBzdHJpY3QiOwoKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CgoJdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKCXZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7CgoJdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKCWZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgoJLyoqCgkqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoJKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoJKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKCSogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKCSogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCgkqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKCSogQ29weXJpZ2h0IDIwMTYgQXBpemVlCgkqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCgkqCgkqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJKgoJKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJKgoJKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJKiovCgoJLyoqCgkgKiBAYWNjZXNzIHByaXZhdGUKCSAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcgZGVsdGEgY2hhbmdlcyBpbiByZW1vdGUgb2JqZWN0cywgYmVmb3JlIHRoZSByZXNwb25zZSBvZiBzdWJzY3JpcHRpb24gcmVhY2ggdGhlIG9ic2VydmVyLgoJICogSXQncyB1c2VkIGluIFN5bmNoZXIgLT4gc3Vic2NyaWJlLiBUaGUgZmxvdyBpcyBkZWZpbmVkIGFzOgoJICogMS4gKG9ic2VydmVyKSAtLXN1YnNjcmliZS0tPiAocmVwb3J0ZXIpCgkgKiAyLiAob2JzZXJ2ZXIpIDwtLWRlbHRhIHVwZGF0ZXMtLSAocmVwb3J0ZXIpCgkgKiAzLiAob2JzZXJ2ZXIpIDwtLXN1YnNjcmliZSByZXNwb25zZS0tIChyZXBvcnRlcikKCSAqIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSBjb3VsZCBiZSBkZWx0YSB1cGRhdGVzIHRyYW5zZmVycmVkIGJlZm9yZSB0aGUgc3Vic2NyaXB0aW9uIGNvbmZpcm1hdGlvbi4KCSAqIFNpbmNlIHRoZXJlIGlzIG5vIERhdGFPYmplY3RPYnNlcnZlciBiZWZvcmUgdGhlIHVic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiwgdGhlcmUgc2hvdWxkIGJlIHNvbWUgb3RoZXIgb2JqZWN0IGNvbGxlY3RpbmcgdGhlIHVwZGF0ZXMuCgkgKiBQcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uCgkgKi8KCXZhciBEYXRhUHJvdmlzaW9uYWwgPSBmdW5jdGlvbiAoKSB7CgkgIC8qIHByaXZhdGUKCSAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdCgkgIF9saXN0ZW5lcjogTXNnTGlzdGVuZXIKCSAgIF9jaGFuZ2VzOiBbXQoJICAqLwoKCSAgZnVuY3Rpb24gRGF0YVByb3Zpc2lvbmFsKG93bmVyLCB1cmwsIGJ1cywgY2hpbGRyZW4pIHsKCSAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhUHJvdmlzaW9uYWwpOwoKCSAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKCSAgICBfdGhpcy5fdXJsID0gdXJsOwoJICAgIF90aGlzLl9idXMgPSBidXM7CgkgICAgX3RoaXMuX2NoaWxkcmVuID0gY2hpbGRyZW47CgoJICAgIF90aGlzLl9jaGFuZ2VzID0gW107CgkgICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CgkgIH0KCgkgICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFQcm92aXNpb25hbCwgW3sKCSAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIF90aGlzLl9saXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgewoJICAgICAgICBjb25zb2xlLmxvZygnRGF0YVByb3Zpc2lvbmFsLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7CgkgICAgICAgIF90aGlzLl9jaGFuZ2VzLnB1c2gobXNnKTsKCSAgICAgIH0pOwoKCSAgICAgIC8qCgkgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKCSAgICAgIGlmIChfdGhpcy5fY2hpbGRyZW4pIHsKCSAgICAgICAgbGV0IGNoaWxkQmFzZVVSTCA9IHVybCArICcvY2hpbGRyZW4vJzsKCSAgICAgICAgX3RoaXMuX2NoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7CgkgICAgICAgICAgbGV0IGNoaWxkVVJMID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CgkgICAgICAgICAgbGV0IGxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgKG1zZykgPT4gewoJICAgICAgICAgICAgLy9pZ25vcmUgbXNnIHNlbnQgYnkgaGltc2VsZgoJICAgICAgICAgICAgaWYgKG1zZy5mcm9tICE9PSBvd25lcikgewoJICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgIH0pOwoJICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CgkgICAgICAgIH0pOwoJICAgICAgfSovCgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgX3RoaXMuX2xpc3RlbmVyLnJlbW92ZSgpOwoKCSAgICAgIC8qX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7CgkgICAgICAgIGxpc3RlbmVyLnJlbW92ZSgpOwoJICAgICAgfSk7Ki8KCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdhcHBseScsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KG9ic2VydmVyKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoJICAgICAgX3RoaXMuX2NoYW5nZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbmdlKSB7CgkgICAgICAgIG9ic2VydmVyLl9jaGFuZ2VPYmplY3Qob2JzZXJ2ZXIuX3N5bmNPYmosIGNoYW5nZSk7CgkgICAgICB9KTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdjaGlsZHJlbicsCgkgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CgkgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47CgkgICAgfQoJICB9XSk7CgkgIHJldHVybiBEYXRhUHJvdmlzaW9uYWw7Cgl9KCk7CgoJZXhwb3J0cy5kZWZhdWx0ID0gRGF0YVByb3Zpc2lvbmFsOwoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgoJLyoqKi8gfSksCgkvKiAxMzQgKi8sCgkvKiAxMzUgKi8sCgkvKiAxMzYgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgltb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCgkvKioqLyB9KSwKCS8qIDEzNyAqLywKCS8qIDEzOCAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCW1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTQ1KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKCS8qKiovIH0pLAoJLyogMTM5ICovLAoJLyogMTQwICovLAoJLyogMTQxICovLAoJLyogMTQyICovLAoJLyogMTQzICovCgkvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoJX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpOwoJbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5hc3NpZ247CgoJLyoqKi8gfSksCgkvKiAxNDQgKi8sCgkvKiAxNDUgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7Cgl2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0OwoJbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7CgkgIHJldHVybiAkT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KTsKCX07CgoJLyoqKi8gfSksCgkvKiAxNDYgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoJLy8gMTkuMS4yLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSwgLi4uKQoJdmFyIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykKCSAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpCgkgICwgcElFICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQoJICAsIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikKCSAgLCBJT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpCgkgICwgJGFzc2lnbiAgPSBPYmplY3QuYXNzaWduOwoKCS8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKQoJbW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewoJICB2YXIgQSA9IHt9CgkgICAgLCBCID0ge30KCSAgICAsIFMgPSBTeW1ib2woKQoJICAgICwgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7CgkgIEFbU10gPSA3OwoJICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7CgkgIHJldHVybiAkYXNzaWduKHt9LCBBKVtTXSAhPSA3IHx8IE9iamVjdC5rZXlzKCRhc3NpZ24oe30sIEIpKS5qb2luKCcnKSAhPSBLOwoJfSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCgkgIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldCkKCSAgICAsIGFMZW4gID0gYXJndW1lbnRzLmxlbmd0aAoJICAgICwgaW5kZXggPSAxCgkgICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mCgkgICAgLCBpc0VudW0gICAgID0gcElFLmY7CgkgIHdoaWxlKGFMZW4gPiBpbmRleCl7CgkgICAgdmFyIFMgICAgICA9IElPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKQoJICAgICAgLCBrZXlzICAgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpCgkgICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoCgkgICAgICAsIGogICAgICA9IDAKCSAgICAgICwga2V5OwoJICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07CgkgIH0gcmV0dXJuIFQ7Cgl9IDogJGFzc2lnbjsKCgkvKioqLyB9KSwKCS8qIDE0NyAqLywKCS8qIDE0OCAqLywKCS8qIDE0OSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIDE5LjEuMy4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpCgl2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7CgoJJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nil9KTsKCgkvKioqLyB9KSwKCS8qIDE1MCAqLywKCS8qIDE1MSAqLwoJLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKCS8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKCXZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKCSAgLCAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NykuZjsKCglfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJywgZnVuY3Rpb24oKXsKCSAgcmV0dXJuIGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKCSAgICByZXR1cm4gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0b0lPYmplY3QoaXQpLCBrZXkpOwoJICB9OwoJfSk7CgoJLyoqKi8gfSksCgkvKiAxNTIgKi8sCgkvKiAxNTMgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgkvLyAgICAgcHJveHktb2JzZXJ2ZSB2MC4wLjE4CgkvLyAgICAgQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE2IFNpbW9uIFkuIEJsYWNrd2VsbCwgQW55V2hpY2hXYXkKCS8vICAgICBNSVQgTGljZW5zZSAtIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAKCShmdW5jdGlvbigpIHsKCQkidXNlIHN0cmljdCI7CgkJLy8gQ3JlYXRlcyBhbmQgcmV0dXJucyBhIFByb3h5IHdyYXBwaW5nIGEgdGFyZ2V0IHNvIHRoYXQgYWxsIGNoYW5nZXMgY2FuIGJlIHRyYXBwZWQgYW5kIGZvcndhcmRlZCB0bwoJCS8vIGEgY2FsbGJhY2suIFRoZSBjYWxsYmFjayB0YWtlcyBhbiBhcnJheSBvZiBjaGFuZ2VzIGp1c3QgbGlrZSB0aGUgdHJhZGl0aW9uYWwgb3JpZ2luYWwgQ2hyb21lIE9iamVjdC5vYnNlcnZlCgkJLy8ge29iamVjdDo8b2JqZWN0IGNoYW5nZWQ+LG5hbWU6PGZpZWxkIGNoYW5nZWQ+LHR5cGU6YWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLG9sZFZhbHVlOjxvbGQgdmFsdWUgaWYgdXBkYXRlIHwgZGVsZXRlPn0KCQkvLyBUaGUgYWNjZXB0bGlzdCBjYW4gYmUgYWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLgoJCS8vIHYgMC4wLjEwIHRvIHN1cHBvcnQgcGF1c2luZyBhbmQgcmVzdGFydGluZyBvYnNlcnZhdGlvbiB0d28gYWRkaXRpb25hbCBjb25zdHJ1Y3RvciBhcmd1bWVudHMgYXJlIGF2YWlsYWJsZSB0byBPYmplY3Qub2JzZXJ2ZToKCQkvLyBwYXVzYWJsZSAtIGNyZWF0ZSB0aGUgT2JzZXJ2ZXIgc28gaXQgY2FuIGJlIHBhdXNlZAoJCS8vIHBhdXNlIC0gY3JlYXRlIG9ic2VydmVyIGluIHBhdXNlZCBzdGF0ZQoJCS8vIGlmIHBhdXNhYmxlIGlzIHRydWUgdGhlbiBhbiBhZGRpdGlvbmFsIG1ldGhvZCBkZWxpdmVyKGlnbm9yZVByZXZpb3VzKSBpcyBhdmFpbGFibGUgdG8gc3RhcnQgZGVsaXZlcnkKCQkvLyB0byBwYXVzZSBkZWxpdmVyeSBzZXQgYSBwcm9wZXJ0eSBjYWxsZWQgcGF1c2Ugb24gdGhlIGZ1bmN0aW9uIGRlbGl2ZXIgdG8gdHJ1ZQoJCS8vIHBhdXNhYmxlIGlzIG9wdGlvbmFsIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mIHNoYWRvd2luZyBhIHByb3BlcnR5IG9yIG1ldGhvZCBvbiBhbnkgZXhpc3RpbmcgY29kZSBjYWxsZWQgZGVsaXZlcgoJCWlmKCFPYmplY3Qub2JzZXJ2ZSAmJiB0eXBlb2YoUHJveHkpPT09ImZ1bmN0aW9uIikgewoJCQlmdW5jdGlvbiBPYnNlcnZlcih0YXJnZXQsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgewoJCSAgICAJdmFyIG1lID0gdGhpcywgcHJveHk7CgkJICAgIAlmdW5jdGlvbiBkZWxpdmVyKGlnbm9yZVByZXZpb3VzLGRlbGF5KSB7CgkJICAgIAkJZGVsaXZlci5kZWxheSA9IGRlbGF5OwoJCSAgICAJCWlmKCFkZWxpdmVyLnBhdXNlKSB7CgkJICAgICAgICAJCWlmKG1lLmNoYW5nZXNldC5sZW5ndGg+MCkgewoJCSAgICAgICAgCQkJaWYoIWlnbm9yZVByZXZpb3VzKSB7CgkJCSAgICAJICAgIAkJdmFyIGNoYW5nZXMgPSBtZS5jaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGNoYW5nZSkgeyByZXR1cm4gIWFjY2VwdGxpc3QgfHwgYWNjZXB0bGlzdC5pbmRleE9mKGNoYW5nZS50eXBlKT49MDsgfSk7CgkJCSAgICAgICAgCQkJaWYoY2hhbmdlcy5sZW5ndGg+MCkgewoJCQkgICAgICAgIAkJCQljYWxsYmFjayhjaGFuZ2VzKTsKCQkJICAgICAgICAJCQl9CgkJICAgICAgICAJCQl9CgkJICAgICAgICAJCQltZS5jaGFuZ2VzZXQgPSBbXTsKCQkgICAgICAgIAkJfQoJCSAgICAJCX0KCQkgICAgCX0KCQkgICAgCWRlbGl2ZXIucGF1c2UgPSBwYXVzZTsKCQkgICAgCWRlbGl2ZXIuZGVsYXkgPSBkZWxheTsKCQkJICAgIG1lLmdldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsKCQkJICAgIAlpZihwcm9wZXJ0eT09PSJfX29ic2VydmVyX18iKSB7CgkJCSAgICAJCXJldHVybiBtZTsKCQkJICAgIAl9CgkJCSAgICAJaWYocHJvcGVydHk9PT0idW5vYnNlcnZlIikgewoJCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oKSB7CgkJCSAgICAJCQlPYmplY3QudW5vYnNlcnZlKHRhcmdldCk7CgkJCSAgICAJCQlyZXR1cm4gdGFyZ2V0OwoJCQkgICAgCQl9OwoJCQkgICAgCX0KCQkJICAgIAlpZihwcm9wZXJ0eT09PSJkZWxpdmVyIikgewoJCQkgICAgCQlyZXR1cm4gZGVsaXZlcjsKCQkJICAgIAl9CgkJCSAgICAJcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07CgkJCSAgICB9CgkJICAgIAltZS50YXJnZXQgPSB0YXJnZXQ7CgkJICAgIAltZS5jaGFuZ2VzZXQgPSBbXTsKCQkgICAgCWlmKCFtZS50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19fKSB7CgkJICAgIAkJLy8gX19vYnNlcnZlckNhbGxiYWNrc19fIGlzIHVzZWQgYXMgYW4gaW5kZXggdG8gZ2V0IGF0IHRoZSBwcm94eSB3aGljaCBpcyB0aGUgb2JzZXJ2ZXIsIHNvIHdlIGNhbiB1bm9ic2VydmUKCQkgICAgCQlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCJfX29ic2VydmVyQ2FsbGJhY2tzX18iLHtlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOmZhbHNlLHZhbHVlOltdfSk7CgkJICAgIAkJT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwiX19vYnNlcnZlcnNfXyIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTsKCQkgICAgCX0KCQkgICAgCW1lLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18ucHVzaChjYWxsYmFjayk7CgkJICAgIAltZS50YXJnZXQuX19vYnNlcnZlcnNfXy5wdXNoKHRoaXMpOwoJCSAgICAJcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LG1lKTsKCQkgICAgCWRlbGl2ZXIoZmFsc2UsZGVsYXkpOwoJCSAgICAJcmV0dXJuIHByb3h5OwoJCSAgICB9CgkJCU9ic2VydmVyLnByb3RvdHlwZS5kZWxpdmVyID0gZnVuY3Rpb24oKSB7CgkJCQlyZXR1cm4gdGhpcy5nZXQobnVsbCwiZGVsaXZlciIpOwoJCQl9CgkJICAgIE9ic2VydmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSkgeyAvLyAsIHJlY2VpdmVyCgkJICAgIAl2YXIgb2xkdmFsdWUgPSB0YXJnZXRbcHJvcGVydHldOwoJCSAgICAJdmFyIHR5cGUgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKTsKCQkgICAgCXRhcmdldFtwcm9wZXJ0eV0gPSB2YWx1ZTsKCQkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgKCF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YodHlwZSk+PTApKSB7CgkJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZTp0eXBlfSwKCQkgICAgICAgIAkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsCgkJICAgICAgICAJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsKCQkgICAgICAgIAlpZih0eXBlPT09InVwZGF0ZSIpIHsKCQkgICAgICAgIAkJY2hhbmdlLm9sZFZhbHVlID0gb2xkdmFsdWU7CgkJICAgICAgICAJfQoJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCQkgICAgICAgIAlpZihzdGFydCkgewoJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJCSAgICAgICAgCX0KCQkgICAgCX0KCQkgICAgCXJldHVybiB0cnVlOwoJCSAgICB9OwoJCSAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVsZXRlUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5KSB7CgkJICAgIAl2YXIgb2xkdmFsdWUgPSB0YXJnZXRbcHJvcGVydHldOwoJCSAgICAJLy9pZih0eXBlb2Yob2xkdmFsdWUpIT09InVuZGVmaW5lZCIpIHsKCQkJICAgIAlkZWxldGUgdGFyZ2V0W3Byb3BlcnR5XTsKCQkJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoImRlbGV0ZSIpPj0wKSB7CgkJCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6ImRlbGV0ZSIsb2xkVmFsdWU6b2xkdmFsdWV9LAoJCQkgICAgICAgIAkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsCgkJCSAgICAgICAgCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7CgkJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCQkJICAgICAgICAJaWYoc3RhcnQpIHsKCQkJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7CgkJCSAgICAgICAgCX0KCQkJICAgIAl9CgkJICAgIAkvL30KCQkgICAgCXJldHVybiB0cnVlOwoJCSAgICB9OwoJCSAgICBPYnNlcnZlci5wcm90b3R5cGUuZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKSB7CgkJICAgIAlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7CgkJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInJlY29uZmlndXJlIik+PTApIHsKCQkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZTpwcm9wZXJ0eSx0eXBlOiJyZWNvbmZpZ3VyZSJ9LAoJICAgICAgICAJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCSAgICAgICAgCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOwoJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCQkgICAgICAgIAlpZihzdGFydCkgewoJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJCSAgICAgICAgCX0KCQkgICAgCX0KCQkgICAgCXJldHVybiB0cnVlOwoJCSAgICB9OwoJCSAgICBPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbih0YXJnZXQsIHByb3RvdHlwZSkgewoJCSAgICAJdmFyIG9sZHZhbHVlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRhcmdldCk7CgkJICAgIAlPYmplY3Quc2V0UHJvdG90eXBlT2YodGFyZ2V0LCBwcm90b3R5cGUpOwoJCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJzZXRQcm90b3R5cGUiKT49MCkgewoJCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOiJfX3Byb3RvX18iLHR5cGU6InNldFByb3RvdHlwZSIsb2xkVmFsdWU6b2xkdmFsdWV9LAoJICAgIAkJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCSAgICAJCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOwoJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCQkgICAgICAgIAlpZihzdGFydCkgewoJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJCSAgICAgICAgCX0KCQkgICAgCX0KCQkgICAgCXJldHVybiB0cnVlOwoJCSAgICB9OwoJCSAgICBPYnNlcnZlci5wcm90b3R5cGUucHJldmVudEV4dGVuc2lvbnMgPSBmdW5jdGlvbih0YXJnZXQpIHsKCQkgICAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpOwoJCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJwcmV2ZW50RXh0ZW5zaW9ucyIpPj0wKSB7CgkJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LHR5cGU6InByZXZlbnRFeHRlbnNpb25zIn0sCgkJCQkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLAoJCQkJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7CgkJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOwoJCSAgICAgICAgCWlmKHN0YXJ0KSB7CgkJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7CgkJICAgICAgICAJfQoJCSAgICAJfQoJCSAgICAJcmV0dXJuIHRydWU7CgkJICAgIH07CgkJICAgIE9iamVjdC5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsKCQkgICAgCXJldHVybiBuZXcgT2JzZXJ2ZXIob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpOwoJCSAgICB9OwoJCSAgICBPYmplY3QudW5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKSB7CgkJICAgIAlpZihvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fKSB7CgkJICAgIAkJaWYoIWNhbGxiYWNrKSB7CgkJICAgIAkJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpOwoJCSAgICAJCQlvYmplY3QuX19vYnNlcnZlcnNfXy5zcGxpY2UoMCxvYmplY3QuX19vYnNlcnZlcnNfXy5sZW5ndGgpOwoJCSAgICAJCQlyZXR1cm47CgkJICAgIAkJfQoJCSAgICAJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uZm9yRWFjaChmdW5jdGlvbihvYnNlcnZlcmNhbGxiYWNrLGkpIHsKCQkgICAgCQkJaWYoY2FsbGJhY2s9PT1vYnNlcnZlcmNhbGxiYWNrKSB7CgkJICAgIAkJCQlvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShpLDEpOwoJCSAgICAJCQkJZGVsZXRlIG9iamVjdC5fX29ic2VydmVyc19fW2ldLmNhbGxiYWNrOwoJCSAgICAJCQkJb2JqZWN0Ll9fb2JzZXJ2ZXJzX18uc3BsaWNlKGksMSk7CgkJICAgIAkJCX0KCQkgICAgCQl9KTsKCQkgICAgCX0KCQkgICAgfTsKCQkgICAgQXJyYXkub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KSB7CgkJICAgIAlpZighKG9iamVjdCBpbnN0YW5jZW9mIEFycmF5KSAmJiAhQXJyYXkuaXNBcnJheShvYmplY3QpKSB7CgkJICAgIAkJdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7CgkJICAgIAl9CgkJICAgIAl2YXIgYXJyYXlwcm94eSA9IG5ldyBQcm94eShvYmplY3Qse2dldDogZnVuY3Rpb24odGFyZ2V0LHByb3BlcnR5KSB7CgkJICAgIAkJaWYocHJvcGVydHk9PT0idW5vYnNlcnZlIikgewoJCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHsKCQkJICAgIAkJCWlmKGNhbGxiYWNrKSB7CgkJCSAgICAJCQkJcmV0dXJuIE9iamVjdC51bm9ic2VydmUodGFyZ2V0LGNhbGxiYWNrKTsKCQkJICAgIAkJCX0KCQkJICAgIAkJCXJldHVybiB0YXJnZXQudW5vYnNlcnZlKCk7CgkJCSAgICAJCX07CgkJCSAgICAJfQoJCSAgICAJCWlmKHByb3BlcnR5PT09InNwbGljZSIpIHsKCQkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LGVuZCkgewoJCSAgICAJCQkJaWYodHlwZW9mKHN0YXJ0KSE9PSJudW1iZXIiIHx8IHR5cGVvZihlbmQpIT09Im51bWJlciIpIHsKCQkgICAgCQkJCQl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCB0d28gYXJndW1lbnRzIHRvIEFycmF5IHNwbGljZSBhcmUgbm90IG51bWJlciwgbnVtYmVyIik7CgkJICAgIAkJCQl9CgkJICAgIAkgICAgCQl2YXIgcmVtb3ZlZCA9IHRoaXMuc2xpY2Uoc3RhcnQsc3RhcnQrZW5kKSwKCQkgICAgCSAgICAJCQlhZGRlZENvdW50ID0gKGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzLmxlbmd0aC0yIDogMCksCgkJICAgIAkgICAgCQkJY2hhbmdlID0gIHtvYmplY3Q6b2JqZWN0LHR5cGU6InNwbGljZSIsaW5kZXg6c3RhcnQscmVtb3ZlZDpyZW1vdmVkLGFkZGVkQ291bnQ6YWRkZWRDb3VudH07CgkJICAgIAkgICAgCQl0YXJnZXQuc3BsaWNlLmFwcGx5KHRhcmdldCxhcmd1bWVudHMpOwoJCSAgICAJICAgIAkJaWYoYWNjZXB0bGlzdC5pbmRleE9mKCJzcGxpY2UiKT49MCkgewoJCSAgICAJICAgIAkJCXZhciBzdGFydCA9IHByb3h5Ll9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLAoJCSAgICAJICAgICAgICAJCQlkZWxpdmVyID0gcHJveHkuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTsKCQkgICAgCSAgICAJCQlwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCQkgICAgCSAgICAJCQlpZihzdGFydCkgewoJCSAgICAJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJCSAgICAJCSAgICAgICAgCX0KCQkgICAgCSAgICAJCX0KCQkgICAgCSAgICAJfQoJCSAgICAJCX0KCQkgICAgCQlpZihwcm9wZXJ0eT09PSJwdXNoIikgewoJCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsKCQkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGl0ZW0pOwoJCSAgICAJCSAgICB9CgkJICAgIAkJfQoJCSAgICAJCWlmKHByb3BlcnR5PT09InBvcCIpIHsKCQkgICAgCQkJIHJldHVybiBmdW5jdGlvbigpIHsKCQkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpOwoJCSAgICAJCSAgICB9CgkJICAgIAkJfQoJCSAgICAJCWlmKHByb3BlcnR5PT09InVuc2hpZnQiKSB7CgkJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oaXRlbSkgewoJICAgIAkJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxpdGVtKTsKCSAgICAJCSAgICAJfQoJCSAgICAJCX0KCQkgICAgCQlpZihwcm9wZXJ0eT09PSJzaGlmdCIpIHsKCQkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCSAgICAJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMSk7CgkJICAgIAkgICAgCX0KCQkgICAgCQl9CgkJICAgIAkJcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07CgkJICAgIAl9fSk7CgkJICAgIAl2YXIgcHJveHkgPSBPYmplY3Qub2JzZXJ2ZShhcnJheXByb3h5LGZ1bmN0aW9uKGNoYW5nZXNldCkgeyAKCQkgICAgCQl2YXIgY2hhbmdlcyA9IGNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiBjaGFuZ2UubmFtZSE9PSJsZW5ndGgiICYmIGNoYW5nZS5uYW1lIT09ImFkZCIgJiYgKCFhY2NlcHRsaXN0IHx8IGFjY2VwdGxpc3QuaW5kZXhPZihjaGFuZ2UudHlwZSk+PTApOyB9KTsKCQkgICAgCQlpZihjaGFuZ2VzLmxlbmd0aD4wKSB7CgkJICAgIAkJCWNhbGxiYWNrKGNoYW5nZXMpOwoJCSAgICAJCX0KCQkgICAgCX0sYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7CgkJICAgIAlyZXR1cm4gcHJveHk7CgkJICAgIH07CgkJICAgIEFycmF5LnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjaykgewoJCQkgIHJldHVybiBvYmplY3QudW5vYnNlcnZlKGNhbGxiYWNrKTsKCQkgICAgfQoJCX0KCQlPYmplY3QuZGVlcE9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2sscGFydHMpIHsKCQkJcGFydHMgPSAocGFydHMgPyBwYXJ0cyA6IFtdKTsKCQkJdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoJCQlrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CgkJCQlpZihvYmplY3Rba2V5XSBpbnN0YW5jZW9mIE9iamVjdCkgewoJCQkJCXZhciBuZXdwYXJ0cyA9IHBhcnRzLnNsaWNlKDApOwoJCQkJCW5ld3BhcnRzLnB1c2goa2V5KTsKCQkJCQlvYmplY3Rba2V5XSA9IE9iamVjdC5kZWVwT2JzZXJ2ZShvYmplY3Rba2V5XSxjYWxsYmFjayxuZXdwYXJ0cyk7CgkJCQl9CgkJCX0pOwoJCQl2YXIgb2JzZXJ2ZWQgPSBPYmplY3Qub2JzZXJ2ZShvYmplY3QsZnVuY3Rpb24oY2hhbmdlc2V0KSB7CgkJCQl2YXIgY2hhbmdlcyA9IFtdOwoJCQkJZnVuY3Rpb24gcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0LG5ld09iamVjdCxwYXRoKSB7CgkJCQkJaWYobmV3T2JqZWN0IGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJCQkJCXZhciBuZXdrZXlzID0gT2JqZWN0LmtleXMobmV3T2JqZWN0KTsKCQkJCQkJbmV3a2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewoJCQkJCQkJaWYoIW9sZE9iamVjdCB8fCAob2xkT2JqZWN0W2tleV0hPT1uZXdPYmplY3Rba2V5XSkpIHsKCQkJCQkJCQl2YXIgb2xkdmFsdWUgPSAob2xkT2JqZWN0ICYmIG9sZE9iamVjdFtrZXldIT09dW5kZWZpbmVkID8gb2xkT2JqZWN0W2tleV0gOiB1bmRlZmluZWQpLAoJCQkJCQkJCQljaGFuZ2UgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKSwKCQkJCQkJCQkJa2V5cGF0aCA9IHBhdGggKyAiLiIgKyBrZXk7CgkJCQkJCQkJY2hhbmdlcy5wdXNoKHtuYW1lOm5hbWUsb2JqZWN0OnJvb3RPYmplY3QsdHlwZTpjaGFuZ2Usb2xkVmFsdWU6b2xkdmFsdWUsbmV3VmFsdWU6bmV3T2JqZWN0W2tleV0sa2V5cGF0aDprZXlwYXRofSk7CgkJCQkJCQkJcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkdmFsdWUsbmV3T2JqZWN0W2tleV0sa2V5cGF0aCk7CgkJCQkJCQl9CgkJCQkJCX0pOwoJCQkJCX0gZWxzZSBpZihvbGRPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHsKCQkJCQkJdmFyIG9sZGtleXMgPSBPYmplY3Qua2V5cyhvbGRPYmplY3QpOwoJCQkJCQlvbGRrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CgkJCQkJCQl2YXIgY2hhbmdlID0gKG5ld09iamVjdD09PW51bGwgPyAidXBkYXRlIiA6ICJkZWxldGUiKSwKCQkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsKCQkJCQkJCWNoYW5nZXMucHVzaCh7bmFtZTpuYW1lLG9iamVjdDpyb290T2JqZWN0LHR5cGU6Y2hhbmdlLG9sZFZhbHVlOm9sZE9iamVjdFtrZXldLG5ld1ZhbHVlOm5ld09iamVjdCxrZXlwYXRoOmtleXBhdGh9KTsKCQkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZE9iamVjdFtrZXldLHVuZGVmaW5lZCxrZXlwYXRoKTsKCQkJCQkJfSk7CgkJCQkJfQoJCQkJfQoJCQkJY2hhbmdlc2V0LmZvckVhY2goZnVuY3Rpb24oY2hhbmdlKSB7CgkJCQkJdmFyIGtleXBhdGggPSAocGFydHMubGVuZ3RoPjAgPyBwYXJ0cy5qb2luKCIuIikgKyAiLiIgOiAiIikgKyBjaGFuZ2UubmFtZTsKCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6Y2hhbmdlLm5hbWUsb2JqZWN0OmNoYW5nZS5vYmplY3QsdHlwZTpjaGFuZ2UudHlwZSxvbGRWYWx1ZTpjaGFuZ2Uub2xkVmFsdWUsbmV3VmFsdWU6Y2hhbmdlLm9iamVjdFtjaGFuZ2UubmFtZV0sa2V5cGF0aDprZXlwYXRofSk7CgkJCQkJcmVjdXJzZShjaGFuZ2UubmFtZSxjaGFuZ2Uub2JqZWN0LGNoYW5nZS5vbGRWYWx1ZSxjaGFuZ2Uub2JqZWN0W2NoYW5nZS5uYW1lXSxrZXlwYXRoKTsKCQkJCX0pOwoJCQkJY2FsbGJhY2soY2hhbmdlcyk7CgkJCX0pOwoJCQlyZXR1cm4gb2JzZXJ2ZWQ7CgkJfTsKCX0pKCk7CgoJLyoqKi8gfSksCgkvKiAxNTQgKi8sCgkvKiAxNTUgKi8sCgkvKiAxNTYgKi8sCgkvKiAxNTcgKi8sCgkvKiAxNTggKi8sCgkvKiAxNTkgKi8sCgkvKiAxNjAgKi8sCgkvKiAxNjEgKi8sCgkvKiAxNjIgKi8KCS8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCgkidXNlIHN0cmljdCI7CgoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKCSAgdmFsdWU6IHRydWUKCX0pOwoJZXhwb3J0cy5EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBleHBvcnRzLkRhdGFPYmplY3RSZXBvcnRlciA9IGV4cG9ydHMuU3luY2hlciA9IHVuZGVmaW5lZDsKCgl2YXIgX1N5bmNoZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMCk7CgoJdmFyIF9TeW5jaGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N5bmNoZXIpOwoKCXZhciBfRGF0YU9iamVjdFJlcG9ydGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpOwoKCXZhciBfRGF0YU9iamVjdFJlcG9ydGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RSZXBvcnRlcik7CgoJdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7CgoJdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdE9ic2VydmVyKTsKCglmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKCWV4cG9ydHMuU3luY2hlciA9IF9TeW5jaGVyMi5kZWZhdWx0OwoJZXhwb3J0cy5EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfRGF0YU9iamVjdFJlcG9ydGVyMi5kZWZhdWx0OwoJZXhwb3J0cy5EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfRGF0YU9iamVjdE9ic2VydmVyMi5kZWZhdWx0OwoKCS8qKiovIH0pCgkvKioqKioqLyBdKTsKCX0pOwoJLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW5kbFluQmhZMnM2THk4dmQyVmljR0ZqYXk5MWJtbDJaWEp6WVd4TmIyUjFiR1ZFWldacGJtbDBhVzl1SWl3aWQyVmljR0ZqYXpvdkx5OTNaV0p3WVdOckwySnZiM1J6ZEhKaGNDQmtOakZoTVRsbU5qTXlPVEl3WmpWbVpHWTFaQ0lzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWpiM0psTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJkc2IySmhiQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTkzYTNNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZlpHVnpZM0pwY0hSdmNuTXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZiMkpxWldOMExXUndMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMkZ1TFc5aWFtVmpkQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlvYVdSbExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgybHpMVzlpYW1WamRDNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWxlSEJ2Y25RdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJobGJIQmxjbk12WTJ4aGMzTkRZV3hzUTJobFkyc3Vhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyaGxiSEJsY25NdlkzSmxZWFJsUTJ4aGMzTXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZabUZwYkhNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFHRnpMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM1J2TFdsdlltcGxZM1F1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWTNSNExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgybDBaWEpoZEc5eWN5NXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXdjbTl3WlhKMGVTMWtaWE5qTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzFyWlhsekxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyTnZaaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlrYjIwdFkzSmxZWFJsTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJFdFpuVnVZM1JwYjI0dWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMyVjBMWFJ2TFhOMGNtbHVaeTEwWVdjdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmRHOHRjSEpwYldsMGFYWmxMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM1ZwWkM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5a1pXWnBibVZrTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJ4cFluSmhjbmt1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYzJoaGNtVmtMV3RsZVM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5MGJ5MXBiblJsWjJWeUxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyVnVkVzB0WW5WbkxXdGxlWE11YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYVdVNExXUnZiUzFrWldacGJtVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZjMmhoY21Wa0xtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5amIzSmxMV3B6TDI5aWFtVmpkQzluWlhRdGNISnZkRzkwZVhCbExXOW1MbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM1J2TFc5aWFtVmpkQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJKaFltVnNMWEoxYm5ScGJXVXZhR1ZzY0dWeWN5OXBibWhsY21sMGN5NXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMkpoWW1Wc0xYSjFiblJwYldVdmFHVnNjR1Z5Y3k5d2IzTnphV0pzWlVOdmJuTjBjblZqZEc5eVVtVjBkWEp1TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzFqY21WaGRHVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyTnZjbVV0YW5NdmIySnFaV04wTDJSbFptbHVaUzF3Y205d1pYSjBlUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzltYmk5dlltcGxZM1F2WkdWbWFXNWxMWEJ5YjNCbGNuUjVMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMmwwWlhJdFpHVm1hVzVsTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WlhNMkxtOWlhbVZqZEM1a1pXWnBibVV0Y0hKdmNHVnlkSGt1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMk52Y21VdGFuTXZhbk52Ymk5emRISnBibWRwWm5rdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFhCcFpTNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOW9kRzFzTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzFuY0c4dWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFd0bGVYTXRhVzUwWlhKdVlXd3Vhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZiMkpxWldOMExYTmhjQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl5WldSbFptbHVaUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTkwYnkxc1pXNW5kR2d1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmZDJ0ekxXUmxabWx1WlM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5M2EzTXRaWGgwTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WlhNMkxuTjBjbWx1Wnk1cGRHVnlZWFJ2Y2k1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDNkbFlpNWtiMjB1YVhSbGNtRmliR1V1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Wm00dmFuTnZiaTl6ZEhKcGJtZHBabmt1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWTJ4aGMzTnZaaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlwYjJKcVpXTjBMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjlpYW1WamRDMW5iM0JrTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzFuYjNCekxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5b1pXeHdaWEp6TDNSNWNHVnZaaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTloWkdRdGRHOHRkVzV6WTI5d1lXSnNaWE11YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWVhKeVlYa3RhVzVqYkhWa1pYTXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhWFJsY2kxamNtVmhkR1V1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYVhSbGNpMXpkR1Z3TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzFrY0hNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFdkdmNHNHVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZjM1J5YVc1bkxXRjBMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM1JoYzJzdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmRHOHRhVzVrWlhndWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5bGN6WXVZWEp5WVhrdWFYUmxjbUYwYjNJdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJOdmNtVXRhbk12YjJKcVpXTjBMMnRsZVhNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJOdmNtVXRhbk12Y0hKdmJXbHpaUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl0WlhSaExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlkyOXlaUzVuWlhRdGFYUmxjbUYwYjNJdGJXVjBhRzlrTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlqYjNKbExXcHpMMjlpYW1WamRDOWpjbVZoZEdVdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJOdmNtVXRhbk12YjJKcVpXTjBMM05sZEMxd2NtOTBiM1I1Y0dVdGIyWXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyTnZjbVV0YW5NdmMzbHRZbTlzTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlqYjNKbExXcHpMM041YldKdmJDOXBkR1Z5WVhSdmNpNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl2WW1wbFkzUXZZM0psWVhSbExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMMjlpYW1WamRDOW5aWFF0Y0hKdmRHOTBlWEJsTFc5bUxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMMjlpYW1WamRDOXJaWGx6TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwyOWlhbVZqZEM5elpYUXRjSEp2ZEc5MGVYQmxMVzltTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwzQnliMjFwYzJVdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdlptNHZjM2x0WW05c0wybHVaR1Y0TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwzTjViV0p2YkM5cGRHVnlZWFJ2Y2k1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5aGJpMXBibk4wWVc1alpTNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWxiblZ0TFd0bGVYTXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZabTl5TFc5bUxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgybHVkbTlyWlM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5cGN5MWhjbkpoZVMxcGRHVnlMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMmx6TFdGeWNtRjVMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMmwwWlhJdFkyRnNiQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlwZEdWeUxXUmxkR1ZqZEM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5clpYbHZaaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl0YVdOeWIzUmhjMnN1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMV2R2Y0c0dFpYaDBMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM0psWkdWbWFXNWxMV0ZzYkM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5elpYUXRjSEp2ZEc4dWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMyVjBMWE53WldOcFpYTXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZjM0JsWTJsbGN5MWpiMjV6ZEhKMVkzUnZjaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMlZ6Tmk1dlltcGxZM1F1WTNKbFlYUmxMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZaWE0yTG05aWFtVmpkQzVuWlhRdGNISnZkRzkwZVhCbExXOW1MbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZaWE0yTG05aWFtVmpkQzVyWlhsekxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbTlpYW1WamRDNXpaWFF0Y0hKdmRHOTBlWEJsTFc5bUxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbkJ5YjIxcGMyVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWxjell1YzNsdFltOXNMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZaWE0zTG5ONWJXSnZiQzVoYzNsdVl5MXBkR1Z5WVhSdmNpNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwyVnpOeTV6ZVcxaWIyd3ViMkp6WlhKMllXSnNaUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTl6Y21NdmRYUnBiSE12ZFhScGJITXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZjM0pqTDNONWJtTm9aWEl2UkdGMFlVOWlhbVZqZEU5aWMyVnlkbVZ5TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDNOeVl5OXplVzVqYUdWeUwwUmhkR0ZQWW1wbFkzUlNaWEJ2Y25SbGNpNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOXpjbU12YzNsdVkyaGxjaTlFWVhSaFQySnFaV04wTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDNOeVl5OXplVzVqYUdWeUwwUmhkR0ZQWW1wbFkzUkRhR2xzWkM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5emNtTXZjM2x1WTJobGNpOVFjbTk0ZVU5aWFtVmpkQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJKaFltVnNMWEoxYm5ScGJXVXZhR1ZzY0dWeWN5OW5aWFF1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2YzNKakwzTjVibU5vWlhJdlUzbHVZMmhsY2k1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5emNtTXZjM2x1WTJobGNpOUVZWFJoVUhKdmRtbHphVzl1WVd3dWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJOdmNtVXRhbk12YjJKcVpXTjBMMkZ6YzJsbmJpNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMkpoWW1Wc0xYSjFiblJwYldVdlkyOXlaUzFxY3k5dlltcGxZM1F2WjJWMExXOTNiaTF3Y205d1pYSjBlUzFrWlhOamNtbHdkRzl5TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwyOWlhbVZqZEM5aGMzTnBaMjR1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Wm00dmIySnFaV04wTDJkbGRDMXZkMjR0Y0hKdmNHVnlkSGt0WkdWelkzSnBjSFJ2Y2k1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5dlltcGxZM1F0WVhOemFXZHVMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZaWE0yTG05aWFtVmpkQzVoYzNOcFoyNHVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWxjell1YjJKcVpXTjBMbWRsZEMxdmQyNHRjSEp2Y0dWeWRIa3RaR1Z6WTNKcGNIUnZjaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDNCeWIzaDVMVzlpYzJWeWRtVXZhVzVrWlhndWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmMzSmpMMU41Ym1Ob1pYSXVhbk1pWFN3aWJtRnRaWE1pT2xzaVpHbDJhV1JsVlZKTUlpd2laR2wyYVdSbFJXMWhhV3dpTENKbGJYQjBlVTlpYW1WamRDSXNJbVJsWlhCRGJHOXVaU0lzSW1kbGRGVnpaWEpWVWt4R2NtOXRSVzFoYVd3aUxDSm5aWFJWYzJWeVJXMWhhV3hHY205dFZWSk1JaXdpWTI5dWRtVnlkRlJ2VlhObGNsVlNUQ0lzSW5WeWJDSXNJa1Z5Y205eUlpd2ljbVZqZFhKelpTSXNJblpoYkhWbElpd2ljbVZuWlhnaUxDSnpkV0p6ZENJc0luQmhjblJ6SWl3aWNtVndiR0ZqWlNJc0luTndiR2wwSWl3aWFXNWpiSFZrWlhNaUxDSnlaWE4xYkhRaUxDSjBlWEJsSWl3aVpHOXRZV2x1SWl3aWFXUmxiblJwZEhraUxDSmpiMjV6YjJ4bElpd2laWEp5YjNJaUxDSnpZMmhsYldVaUxDSnpkV0p6ZEhJaUxDSnBibVJsZUU5bUlpd2laVzFoYVd3aUxDSnBibVJsZUU5bVFYUWlMQ0oxYzJWeWJtRnRaU0lzSW5OMVluTjBjbWx1WnlJc0lteGxibWQwYUNJc0ltOWlhbVZqZENJc0ltOWlhaUlzSWtwVFQwNGlMQ0p3WVhKelpTSXNJblZ6WlhKRmJXRnBiQ0lzSW5WelpYSlZVa3dpTENKcFpHVnVkR2xtYVdWeUlpd2laR2wyYVdSbFpGVlNUQ0lzSWtacGJIUmxjbFI1Y0dVaUxDSkJUbGtpTENKVFZFRlNWQ0lzSWtWWVFVTlVJaXdpUkdGMFlVOWlhbVZqZEU5aWMyVnlkbVZ5SWl3aWMzbHVZMmhsY2lJc0luTmphR1Z0WVNJc0ltbHVhWFJwWVd4VGRHRjBkWE1pTENKcGJtbDBhV0ZzUkdGMFlTSXNJbU5vYVd4a2NtVnVjeUlzSW1sdWFYUnBZV3hXWlhKemFXOXVJaXdpWkdGMFlTSXNJbDkwYUdseklpd2lYM1psY25OcGIyNGlMQ0pmWm1sc2RHVnljeUlzSWw5emVXNWpUMkpxSWl3aWIySnpaWEoyWlNJc0ltVjJaVzUwSWl3aVgyOXVSbWxzZEdWeUlpd2labTl5UldGamFDSXNJbU5vYVd4a1NXUWlMQ0pqYUdsc1pFUmhkR0VpTENKZlkyaHBiR1J5Wlc1UFltcGxZM1J6SWl3aVgyRnNiRzlqWVhSbFRHbHpkR1Z1WlhKeklpd2lYMk5vWVc1blpVeHBjM1JsYm1WeUlpd2lYMkoxY3lJc0ltRmtaRXhwYzNSbGJtVnlJaXdpWDNWeWJDSXNJbTF6WnlJc0lteHZaeUlzSWw5amFHRnVaMlZQWW1wbFkzUWlMQ0p5WlcxdmRtVWlMQ0pmY21Wc1pXRnpaVXhwYzNSbGJtVnljeUlzSWw5emVXNWphR1Z5SWl3aVgyOWljMlZ5ZG1WeWN5SXNJblZ1VTNWaWMyTnlhV0psVFhObklpd2labkp2YlNJc0lsOXZkMjVsY2lJc0luUnZJaXdpWDNOMVlsVlNUQ0lzSW1KdlpIa2lMQ0p5WlhOdmRYSmpaU0lzSW5CdmMzUk5aWE56WVdkbElpd2ljbVZ3YkhraUxDSmpiMlJsSWl3aVptbHNkR1Z5SWl3aVkyRnNiR0poWTJzaUxDSnJaWGtpTENKbWFXeDBaWEpQWW1vaUxDSnBaSGdpTENKbWFXVnNaQ0lzSWtSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2lJc0lsOXpkV0p6WTNKcGNIUnBiMjV6SWl3aVgyOXVRMmhoYm1kbElpd2lYMjlpYW1WamRFeHBjM1JsYm1WeUlpd2lYMjl1VW1WemNHOXVjMlVpTENKZmIyNVNaV0ZrSWl3aWIySnpaWEoyWlhKeklpd2lhVzUyYVhSbFRYTm5JaXdpY21WemRXMWxJaXdpWDNOamFHVnRZU0lzSW1GMWRHaHZjbWx6WlNJc0ltUmxiR1YwWlUxelp5SXNJbDl5WlhCdmNuUmxjbk1pTENKZmIyNVRkV0p6WTNKcGNIUnBiMjVJWVc1a2JHVnlJaXdpWDI5dVVtVnpjRzl1YzJWSVlXNWtiR1Z5SWl3aVgyOXVVbVZoWkVoaGJtUnNaWElpTENKZmIyNVRkV0p6WTNKcFltVWlMQ0pmYjI1VmJsTjFZbk5qY21saVpTSXNJbWg1Y0dWeWRIbFZjbXdpTENKaFkyTmxjSFFpTENKemRXSWlMQ0p6ZEdGMGRYTWlMQ0pqYUdsc1pISmxibFpoYkhWbGN5SXNJbWxrSWl3aWRtVnljMmx2YmlJc0luSmxhbVZqZENJc0luSmxZWE52YmlJc0ltUmxjMk1pTENKRVlYUmhUMkpxWldOMElpd2lYM04wWVhSMWN5SXNJbDlqYUdsc1pISmxibk1pTENKZlkyaHBiR1JKWkNJc0lsOWphR2xzWkhKbGJreHBjM1JsYm1WeWN5SXNJbU5vYVd4a1FtRnpaVlZTVENJc0ltTm9hV3hrSWl3aVkyaHBiR1JWVWt3aUxDSnNhWE4wWlc1bGNpSXNJbDl2YmtOb2FXeGtRM0psWVhSbElpd2lYMk5vWVc1blpVTm9hV3hrY21WdUlpd2ljSFZ6YUNJc0ltTm9hV3hrY21WdUlpd2liWE5uUTJocGJHUkpaQ0lzSW0xelowTm9hV3hrVUdGMGFDSXNJbkpsY1hWbGMzUk5jMmNpTENKeVpYTnZiSFpsSWl3aWJYTm5TV1FpTENKdVpYZERhR2xzWkNJc0ltOXVRMmhoYm1kbElpd2ljR0YwYUNJc0lsOXZia0ZrWkVOb2FXeGtjbVZ1U0dGdVpHeGxjaUlzSW5ObGRGUnBiV1Z2ZFhRaUxDSnpiM1Z5WTJVaUxDSmphR2xzWkVsdVptOGlMQ0pqYUdGdVoyVk5jMmNpTENKaGRIUnlhV0oxZEdVaUxDSnZWSGx3WlNJc0lrOUNTa1ZEVkNJc0ltTlVlWEJsSWl3aVVrVk5UMVpGSWl3aVlYUjBjbWxpZFhSbFZIbHdaU0lzSWxWUVJFRlVSU0lzSW05d1pYSmhkR2x2YmlJc0luTjVibU5QWW1vaUxDSm1hVzVrVW1WemRXeDBJaXdpWm1sdVpFSmxabTl5WlNJc0lrRlNVa0ZaSWl3aVFVUkVJaXdpWVhKeUlpd2lhVzVrWlhnaUxDSnNZWE4wSWl3aVFYSnlZWGtpTENKd2NtOTBiM1I1Y0dVaUxDSnpjR3hwWTJVaUxDSmhjSEJzZVNJc0ltTnZibU5oZENJc0lrUmhkR0ZQWW1wbFkzUkRhR2xzWkNJc0luQmhjbVZ1ZENJc0ltOTNibVZ5SWl3aVgzQmhjbVZ1ZENJc0lsOXRjMmRKWkNJc0lsOXNhWE4wWlc1bGNpSXNJbDlqYUdsc1pISmxiaUlzSWxONWJtTlBZbXBsWTNRaUxDSmZaR0YwWVNJc0lsOXBiblJsY201aGJFOWljMlZ5ZG1VaUxDSnNhWE4wSWl3aVgyWnBibVJYYVhSb1UzQnNhWFFpTENKd2IzQWlMQ0pqYjI1emRISjFZM1J2Y2lJc0lrOWlhbVZqZENJc0ltaGhibVJzWlhJaUxDSmphR0Z1WjJWelpYUWlMQ0pqYUdGdVoyVWlMQ0p1WlhkV1lXeDFaU0lzSW04aUxDSmtaV1Z3VDJKelpYSjJaU0lzSW10bGVYQmhkR2dpTENKbGRtVnllU0lzSWw5dmJrTm9ZVzVuWlhNaUxDSnZZbXBVZVhCbElpd2lUMkpxWldOMFZIbHdaU0lzSW1acFpXeGtVM1J5YVc1bklpd2libUZ0WlNJc0ltbHVabThpTENKZlptbHlaVVYyWlc1MElpd2lRMmhoYm1kbFZIbHdaU0lzSWxONWJtTm9aWElpTENKaWRYTWlMQ0pqYjI1bWFXY2lMQ0p5ZFc1MGFXMWxWVkpNSWl3aVgzQnliM1pwYzJsdmJtRnNjeUlzSWw5dmJrWnZjbmRoY21RaUxDSmZiMjVTWlcxdmRHVkRjbVZoZEdVaUxDSmZiMjVTWlcxdmRHVkVaV3hsZEdVaUxDSnpkRzl5WlNJc0luQXljQ0lzSW1OeWFYUmxjbWxoSWl3aVgyTnlaV0YwWlNJc0ltOWlhbFZTVENJc0lsOXpkV0p6WTNKcFltVWlMQ0pmWTNKcGRHVnlhV0VpTENKeVpXRmtUWE5uSWl3aVgyOXVUbTkwYVdacFkyRjBhVzl1U0dGdVpHeGxjaUlzSW5KbGNHOXlkR1Z5SWl3aWJtVjNUMkpxSWl3aVkyaHBiR1J5Wlc1U1pYTnZkWEpqWlhNaUxDSnpkV0p6WTNKcFltVk5jMmNpTENKdVpYZFFjbTkyYVhOcGIyNWhiQ0lzSW5Oc2FXTmxJaXdpWVdOcklpd2liRlI1Y0dVaUxDSmtaV3hsZEdVaUxDSkVZWFJoVUhKdmRtbHphVzl1WVd3aUxDSmZZMmhoYm1kbGN5SXNJbTlpYzJWeWRtVnlJbDBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc01rSkJRVEpDTzBGQlF6TkNMRU5CUVVNN1FVRkRSQ3hQTzBGRFZrRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHM3UVVGRlFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHM3TzBGQlIwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk96dEJRVVZCTzBGQlEwRXNiVVJCUVRKRExHTkJRV003TzBGQlJYcEVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNZVUZCU3p0QlFVTk1PMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRXNiVU5CUVRKQ0xEQkNRVUV3UWl4RlFVRkZPMEZCUTNaRUxIbERRVUZwUXl4bFFVRmxPMEZCUTJoRU8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJMRGhFUVVGelJDd3JSRUZCSzBRN08wRkJSWEpJTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHM3T3pzN096dEJRMmhGUVN3MlFrRkJOa0k3UVVGRE4wSXNjVU5CUVhGRExHZERPenM3T3pzN1FVTkVja003UVVGRFFUdEJRVU5CTzBGQlEwRXNkVU5CUVhWRExHZERPenM3T3pzN1FVTklka003UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3TzBGQlJVRXNkVUk3T3pzN096dEJRMVpCTzBGQlEwRTdRVUZEUVN4cFEwRkJhVU1zVVVGQlVTeG5Ra0ZCWjBJc1ZVRkJWU3hIUVVGSE8wRkJRM1JGTEVOQlFVTXNSVHM3T3pzN08wRkRTRVE3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnl4VlFVRlZPMEZCUTJJN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEWmtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTktRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVOQlFVTTdRVUZEUkR0QlFVTkJPMEZCUTBFc1JUczdPenM3TzBGRFVFRTdRVUZEUVR0QlFVTkJMRVU3T3pzN096dEJRMFpCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3h0UlVGQmJVVTdRVUZEYmtVN1FVRkRRU3h4UmtGQmNVWTdRVUZEY2tZN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxGZEJRVmM3UVVGRFdDeFRRVUZUTzBGQlExUTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hMUVVGTE8wRkJRMHc3UVVGRFFUdEJRVU5CTEN0RFFVRXJRenRCUVVNdlF6dEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hqUVVGak8wRkJRMlFzWTBGQll6dEJRVU5rTEdOQlFXTTdRVUZEWkN4alFVRmpPMEZCUTJRc1pVRkJaVHRCUVVObUxHVkJRV1U3UVVGRFppeGxRVUZsTzBGQlEyWXNaMEpCUVdkQ08wRkJRMmhDTEhsQ096czdPenM3TzBGRE5VUkJPenRCUVVWQk96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1JUczdPenM3T3p0QlExSkJPenRCUVVWQk96dEJRVVZCT3p0QlFVVkJPenRCUVVWQkxITkRRVUZ6UXl4MVEwRkJkVU1zWjBKQlFXZENPenRCUVVVM1JqdEJRVU5CTzBGQlEwRXNiVUpCUVcxQ0xHdENRVUZyUWp0QlFVTnlRenRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNRMEZCUXl4SE96czdPenM3UVVNeFFrUTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTk9RU3gxUWtGQmRVSTdRVUZEZGtJN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEwaEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTk1RVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEyNUNRU3h2UWpzN096czdPMEZEUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3UVVOUVFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEwNUJMR2xDUVVGcFFqczdRVUZGYWtJN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEwcEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTA1Qk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTBoQk8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJMR3RGUVVGclJTd3JRa0ZCSzBJN1FVRkRha2NzUlRzN096czdPMEZEVGtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlExaEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEU2tFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTktRU3h6UWpzN096czdPMEZEUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTktRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSVHM3T3pzN08wRkRURUU3UVVGRFFUdEJRVU5CTzBGQlEwRXNZVHM3T3pzN08wRkRTRUU3UVVGRFFTeHhSVUZCYzBVc1owSkJRV2RDTEZWQlFWVXNSMEZCUnp0QlFVTnVSeXhEUVVGRExFVTdPenM3T3p0QlEwWkVPMEZCUTBFN1FVRkRRU3h0UkVGQmJVUTdRVUZEYmtRN1FVRkRRU3gxUTBGQmRVTTdRVUZEZGtNc1JUczdPenM3TzBGRFRFRXNhMEpCUVd0Q0xIZEVPenM3T3pzN1FVTkJiRUk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3TzBGRFNrRTdPMEZCUlVFN08wRkJSVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUVzYzBOQlFYTkRMSFZEUVVGMVF5eG5Ra0ZCWjBJN08wRkJSVGRHTzBGQlEwRTdRVUZEUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEVzUlRzN096czdPenRCUTJoRFFUczdRVUZGUVRzN1FVRkZRVHM3UVVGRlFUczdRVUZGUVN4elEwRkJjME1zZFVOQlFYVkRMR2RDUVVGblFqczdRVUZGTjBZN1FVRkRRVHRCUVVOQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVN4Rk96czdPenM3UVVOb1FrRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxEWkNRVUUyUWp0QlFVTTNRanM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTERaQ1FVRTJRanRCUVVNM1FqdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN096czdPenM3UVVONFEwRXNhMEpCUVd0Q0xIZEVPenM3T3pzN1FVTkJiRUk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3TzBGRFNrRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk96dEJRVVZCTERSQ1FVRTBRaXhoUVVGaE96dEJRVVY2UXp0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzZDBOQlFYZERMRzlEUVVGdlF6dEJRVU0xUlN3MFEwRkJORU1zYjBOQlFXOURPMEZCUTJoR0xFdEJRVXNzTWtKQlFUSkNMRzlEUVVGdlF6dEJRVU53UlR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1owSkJRV2RDTEcxQ1FVRnRRanRCUVVOdVF6dEJRVU5CTzBGQlEwRXNhVU5CUVdsRExESkNRVUV5UWp0QlFVTTFSRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRXRCUVVzN1FVRkRURHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEY2tWQk8wRkJRMEU3UVVGRFFTeHZSVUZCZFVVc2VVTkJRVEJETEVVN096czdPenRCUTBacVNDeHJRa0ZCYTBJc2QwUTdPenM3T3p0QlEwRnNRaXhqUVVGakxITkNPenM3T3pzN1FVTkJaQ3cyUlRzN096czdPMEZEUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTEVVN096czdPenRCUTFwQk8wRkJRMEU3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hGT3pzN096czdRVU5vUWtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTERoQ1FVRTRRanRCUVVNNVFqdEJRVU5CTzBGQlEwRXNiVVJCUVcxRUxFOUJRVThzUlVGQlJUdEJRVU0xUkN4Rk96czdPenM3UVVOVVFTeDNRenM3T3pzN08wRkRRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN3eVJFRkJNa1E3UVVGRE0wUXNSVHM3T3pzN08wRkRURUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc01FUkJRVEJFTEhOQ1FVRnpRanRCUVVOb1JpeG5Sa0ZCWjBZc2MwSkJRWE5DTzBGQlEzUkhMRVU3T3pzN096dEJRMUpCTEcxRE96czdPenM3TzBGRFFVRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEVzTmtKQlFUWkNPMEZCUXpkQ0xHTkJRV003UVVGRFpEdEJRVU5CTEVOQlFVTTdRVUZEUkR0QlFVTkJPMEZCUTBFN1FVRkRRU3dyUWtGQkswSTdRVUZETDBJN1FVRkRRVHRCUVVOQkxGVkJRVlU3UVVGRFZpeERRVUZETEVVN096czdPenRCUTJoQ1JEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPenRCUVVWQkxIZEhRVUYzUnl4UFFVRlBPMEZCUXk5SE8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4RE96czdPenM3TzBGRFdrRTdRVUZEUVN4MVEwRkJkVU1zTUVKQlFUQkNPMEZCUTJwRkxIZERRVUYzUXp0QlFVTjRRenRCUVVOQkxFVTdPenM3T3pzN096czdPenRCUTBwQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNlVUpCUVhsQ0xHdENRVUZyUWl4RlFVRkZPenRCUVVVM1F6dEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRWRCUVVjc1ZVRkJWVHRCUVVOaU96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTNSQ1FUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRVU3T3pzN096dEJRMHBCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hIUVVGSExGVkJRVlU3UVVGRFlqdEJRVU5CTEVVN096czdPenRCUTJaQkxIbERPenM3T3pzN08wRkRRVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUVzYVVoQlFXbElMRzFDUVVGdFFpeEZRVUZGTEcxQ1FVRnRRaXcwU2tGQk5FbzdPMEZCUlhKVUxITkRRVUZ6UXl4MVEwRkJkVU1zWjBKQlFXZENPenRCUVVVM1JqdEJRVU5CTzBGQlEwRXNRMEZCUXp0QlFVTkVPMEZCUTBFc1JUczdPenM3TzBGRGNFSkJMRFJDUVVFMFFpeGxPenM3T3pzN1FVTkJOVUk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hMUVVGTExGZEJRVmNzWlVGQlpUdEJRVU12UWp0QlFVTkJMRXRCUVVzN1FVRkRURHRCUVVOQkxFVTdPenM3T3pzN1FVTndRa0U3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQkxIbEdRVUZuUml4aFFVRmhMRVZCUVVVN08wRkJSUzlHTzBGQlEwRXNjVVJCUVhGRUxEQkNRVUV3UWp0QlFVTXZSVHRCUVVOQkxFVTdPenM3T3p0QlExcEJPMEZCUTBFc1ZVRkJWVHRCUVVOV0xFVTdPenM3T3p0QlEwWkJPMEZCUTBFN1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEV2tFN1FVRkRRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3UVVOT1FUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEyaENRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRWRCUVVjN1FVRkRTRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3UVVNeFJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPenRCUTA1Qk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEdkRFFVRm5RenRCUVVOb1F5eGpRVUZqTzBGQlEyUXNhVUpCUVdsQ08wRkJRMnBDTzBGQlEwRXNRMEZCUXp0QlFVTkVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1EwRkJRenM3UVVGRlJEdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRU3cwUWpzN096czdPMEZEYWtOQkxHdENRVUZyUWl4M1JEczdPenM3TzBGRFFXeENMR3RDUVVGclFpeDNSRHM3T3pzN08wRkRRV3hDTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEdsRVFVRnBSRHRCUVVOcVJDeERRVUZETzBGQlEwUTdRVUZEUVN4eFFrRkJjVUk3UVVGRGNrSTdRVUZEUVN4VFFVRlRPMEZCUTFRc1NVRkJTVHRCUVVOS08wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVkQlFVYzdRVUZEU0R0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRWRCUVVjN1FVRkRTRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTndSRUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hGT3pzN096czdRVU5RUVN4clFrRkJhMElzZDBRN096czdPenRCUTBGc1FpeHJRa0ZCYTBJc2QwUTdPenM3T3p0QlEwRnNRaXhyUWtGQmEwSXNkMFE3T3pzN096dEJRMEZzUWl4clFrRkJhMElzZDBRN096czdPenRCUTBGc1FqdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRVU3T3pzN096dEJRMHBCTzBGQlEwRXNPRVE3T3pzN096dEJRMFJCTzBGQlEwRXNiMFE3T3pzN096dEJRMFJCTzBGQlEwRXNPRVE3T3pzN096dEJRMFJCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1owUTdPenM3T3p0QlEwcEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzSzBNN096czdPenRCUTBwQk8wRkJRMEU3UVVGRFFTeDFSRHM3T3pzN08wRkRSa0U3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklMRVU3T3pzN096dEJRMHBCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSUxFVTdPenM3T3p0QlEyUkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMSEZEUVVGeFF5eHBRa0ZCYVVJc1JVRkJSVHRCUVVONFJEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1owVkJRV2RGTEdkQ1FVRm5RanRCUVVOb1JqdEJRVU5CTzBGQlEwRXNSMEZCUnl3eVEwRkJNa01zWjBOQlFXZERPMEZCUXpsRk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4M1FqczdPenM3TzBGRGVFSkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEhRVUZITzBGQlEwZ3NSVHM3T3pzN08wRkRaa0U3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlExQkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEU2tFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEV0VFN1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRXNLMEpCUVN0Q0xIRkNRVUZ4UWp0QlFVTndSQ3dyUWtGQkswSXNVMEZCVXl4RlFVRkZPMEZCUXpGRExFTkJRVU1zVlVGQlZUczdRVUZGV0R0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTd3lRa0ZCTWtJc1UwRkJVeXh0UWtGQmJVSTdRVUZEZGtRc0swSkJRU3RDTEdGQlFXRTdRVUZETlVNN1FVRkRRU3hIUVVGSExGVkJRVlU3UVVGRFlqdEJRVU5CTEVVN096czdPenRCUTNCQ1FUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTlVRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzVDBGQlR6dEJRVU5RTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1MwRkJTenRCUVVOTU8wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTzBGQlEwRTdRVUZEUVN4MVEwRkJkVU1zYjBKQlFXOUNMRVZCUVVVN1FVRkROMFE3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4SFFVRkhPMEZCUTBnN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hIUVVGSE8wRkJRMGc3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQkxHZENRVUZuUWp0QlFVTm9RanRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEV0QlFVczdRVUZEVER0QlFVTkJMRVU3T3pzN096dEJRMjVGUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hyUWtGQmEwSTdPMEZCUld4Q08wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN096czdPenM3UVVOc1FrRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFZEJRVWM3UVVGRFNDeEZPenM3T3pzN1FVTk9RVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hyUkVGQmEwUTdRVUZEYkVRN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEU5QlFVOHNWVUZCVlN4alFVRmpPMEZCUXk5Q08wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRXRCUVVzc1IwRkJSenRCUVVOU08wRkJRMEVzUlRzN096czdPenRCUTNoQ1FUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4dlFrRkJiMElzWVVGQllUdEJRVU5xUXl4SFFVRkhPMEZCUTBnc1JUczdPenM3TzBGRFlrRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTlFRVHRCUVVOQk8wRkJRMEVzT0VKQlFUaENMR2REUVVGdlF5eEZPenM3T3pzN1FVTkdiRVU3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUTBGQlF5eEZPenM3T3pzN1FVTlNSRHRCUVVOQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hEUVVGRExFVTdPenM3T3p0QlExSkVPMEZCUTBFN1FVRkRRU3c0UWtGQk9FSXNORU5CUVRSRExFVTdPenM3T3pzN1FVTkdNVVU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeHZRMEZCYjBNN1FVRkRjRU03TzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3dyUTBGQkswTXNjMFJCUVdsRUxHOUNRVUZ2UWp0QlFVTndTRHRCUVVOQk8wRkJRMEVzUjBGQlJ5eFZRVUZWTzBGQlEySXNRMEZCUXpzN1FVRkZSRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFZEJRVWM3UVVGRFNDeFpRVUZaTzBGQlExbzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1YwRkJWenRCUVVOWU8wRkJRMEVzVjBGQlZ6dEJRVU5ZTEZOQlFWTTdRVUZEVkN4UFFVRlBPMEZCUTFBN1FVRkRRVHRCUVVOQk8wRkJRMEVzTWtOQlFUSkRPMEZCUXpORE8wRkJRMEU3UVVGRFFUdEJRVU5CTEVkQlFVYzdRVUZEU0R0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4VFFVRlRPMEZCUTFRc2JVSkJRVzFDTEdkRFFVRm5RenRCUVVOdVJDeFRRVUZUTzBGQlExUTdRVUZEUVR0QlFVTkJMRTlCUVU4N1FVRkRVRHRCUVVOQk8wRkJRMEVzUzBGQlN6dEJRVU5NTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRWRCUVVjN1FVRkRTRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4TFFVRkxPMEZCUTB3c1pVRkJaU3h4UTBGQmNVTTdRVUZEY0VRN1FVRkRRU3hIUVVGSE8wRkJRMGc3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMR3REUVVGclF6dEJRVU5zUXp0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMR3REUVVGclF6dEJRVU5zUXp0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxIVkNRVUYxUWl4M1FrRkJkMEk3UVVGREwwTTdRVUZEUVR0QlFVTkJMRk5CUVZNN1FVRkRWRHRCUVVOQk8wRkJRMEVzVDBGQlR6dEJRVU5RTEV0QlFVczdRVUZEVER0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFZEJRVWM3UVVGRFNDeHJRa0ZCYTBJc2RVSkJRWFZDTEV0QlFVczdRVUZET1VNN1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeExRVUZMTzBGQlEwdzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hwUWtGQmFVSTdRVUZEYWtJc2QwSkJRWGRDTzBGQlEzaENMR2RDUVVGblFqdEJRVU5vUWl4dlFrRkJiMEk3UVVGRGNFSXNkMEpCUVhkQ08wRkJRM2hDTEdkQ1FVRm5RanRCUVVOb1FpeHZRa0ZCYjBJN1FVRkRjRUk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNTMEZCU3p0QlFVTk1PMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk96dEJRVVZCTERCRVFVRXdSQ3hyUWtGQmEwSTdRVUZETlVVN1FVRkRRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVOQlFVTTdRVUZEUkR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRU5CUVVNN1FVRkRSRHRCUVVOQk8wRkJRMEVzUTBGQlF6dEJRVU5FTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4VFFVRlRPMEZCUTFRc1QwRkJUenRCUVVOUU8wRkJRMEVzUzBGQlN6dEJRVU5NTzBGQlEwRTdRVUZEUVN4SFFVRkhPMEZCUTBnN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRTlCUVU4N1FVRkRVQ3hMUVVGTE8wRkJRMHc3UVVGRFFUdEJRVU5CTzBGQlEwRXNRMEZCUXl4Rk96czdPenM3TzBGRE1WTkVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMSFZDUVVGMVFqdEJRVU4yUWp0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRU3h6UWtGQmMwSTdRVUZEZEVJc2IwSkJRVzlDTEhWQ1FVRjFRaXhUUVVGVExFbEJRVWs3UVVGRGVFUXNSMEZCUnp0QlFVTklMRU5CUVVNN1FVRkRSRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVOQlFVTTdPMEZCUlVRN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFc1EwRkJRenRCUVVORU8wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeDVSRUZCZVVRN1FVRkRla1E3UVVGRFFTeExRVUZMTzBGQlEwdzdRVUZEUVN4elFrRkJjMElzYVVOQlFXbERPMEZCUTNaRUxFdEJRVXM3UVVGRFRDeEhRVUZITzBGQlEwZzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVkQlFVYzdRVUZEU0RzN1FVRkZRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxEaEVRVUU0UkN3NFFrRkJPRUk3UVVGRE5VWTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hIUVVGSE96dEJRVVZJTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk96dEJRVVZCTERCRVFVRXdSQ3huUWtGQlowSTdPMEZCUlRGRk8wRkJRMEU3UVVGRFFUdEJRVU5CTEc5Q1FVRnZRaXh2UWtGQmIwSTdPMEZCUlhoRExEQkRRVUV3UXl4dlFrRkJiMEk3TzBGQlJUbEVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVkQlFVYzdRVUZEU0R0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFZEJRVWM3UVVGRFNDeDNRa0ZCZDBJc1pVRkJaU3hGUVVGRk8wRkJRM3BETEhkQ1FVRjNRaXhuUWtGQlowSTdRVUZEZUVNc1EwRkJRenM3UVVGRlJEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRU5CUVVNN08wRkJSVVE3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc2IwUkJRVzlFTEV0QlFVc3NVVUZCVVN4cFEwRkJhVU03UVVGRGJFY3NRMEZCUXp0QlFVTkVPMEZCUTBFc0swTkJRU3RETzBGQlF5OURPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUTBGQlF6czdRVUZGUkR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTERCRE96czdPenM3UVVNeFQwRXNlVU03T3pzN096dEJRMEZCTEhORE96czdPenM3T3pzN096czdPenM3T3pzN096czdPMUZEZDBOblFrRXNVeXhIUVVGQlFTeFRPMUZCYTBSQlF5eFhMRWRCUVVGQkxGYzdVVUZuUWtGRExGY3NSMEZCUVVFc1Z6dFJRVk5CUXl4VExFZEJRVUZCTEZNN1VVRlZRVU1zYlVJc1IwRkJRVUVzYlVJN1VVRlZRVU1zYlVJc1IwRkJRVUVzYlVJN1VVRlhRVU1zWjBJc1IwRkJRVUVzWjBJN096czdRVUZzU21oQ096czdPenM3T3pzN096czdPenM3T3pzN096czdPMEZCYzBKQk96czdPenRCUVV0Qk96czdPenM3T3p0QlFWRkJPenM3T3p0QlFVdFBMRk5CUVZOT0xGTkJRVlFzUTBGQmJVSlBMRWRCUVc1Q0xFVkJRWGRDT3p0QlFVVTNRaXhOUVVGSkxFTkJRVU5CTEVkQlFVd3NSVUZCVlN4TlFVRk5ReXhOUVVGTkxIZENRVUZPTEVOQlFVNDdPMEZCUlZnc1YwRkJVME1zVDBGQlZDeERRVUZwUWtNc1MwRkJha0lzUlVGQmQwSTdRVUZEZGtJc1VVRkJUVU1zVVVGQlVTd3dSa0ZCWkR0QlFVTkZMRkZCUVUxRExGRkJRVkVzVlVGQlpEdEJRVU5FTEZGQlFVbERMRkZCUVZGSUxFMUJRVTFKTEU5QlFVNHNRMEZCWTBnc1MwRkJaQ3hGUVVGeFFrTXNTMEZCY2tJc1JVRkJORUpITEV0QlFUVkNMRU5CUVd0RExFZEJRV3hETEVOQlFWbzdRVUZEUkN4WFFVRlBSaXhMUVVGUU8wRkJRMEU3TzBGQlJVUXNUVUZCU1VFc1VVRkJVVW9zVVVGQlVVWXNSMEZCVWl4RFFVRmFPenRCUVVWRE8wRkJRMEVzVFVGQlNVMHNUVUZCVFN4RFFVRk9MRTFCUVdGT0xFZEJRV0lzU1VGQmIwSXNRMEZCUTAwc1RVRkJUU3hEUVVGT0xFVkJRVk5ITEZGQlFWUXNRMEZCYTBJc1IwRkJiRUlzUTBGQmVrSXNSVUZCYVVRN08wRkJSUzlETEZGQlFVbERMRlZCUVZNN1FVRkRXRU1zV1VGQlRTeEZRVVJMTzBGQlJWaERMR05CUVZGYUxFZEJSa2M3UVVGSFdHRXNaMEpCUVZVN1FVRklReXhMUVVGaU96dEJRVTFCUXl4WlFVRlJReXhMUVVGU0xFTkJRV01zZVVaQlFXUXNSVUZCZVVkbUxFZEJRWHBIT3p0QlFVVkJMRmRCUVU5VkxFOUJRVkE3UVVGRFJEczdRVUZGUmp0QlFVTkJMRTFCUVVsS0xFMUJRVTBzUTBGQlRpeE5RVUZoVGl4SFFVRmlMRWxCUVc5Q1RTeE5RVUZOTEVOQlFVNHNSVUZCVTBjc1VVRkJWQ3hEUVVGclFpeEhRVUZzUWl4RFFVRjRRaXhGUVVGblJEdEJRVU12UXl4UlFVRkpUeXhUUVVGVFZpeE5RVUZOTEVOQlFVNHNUVUZCWVU0c1IwRkJZaXhIUVVGdFFpeE5RVUZ1UWl4SFFVRTBRazBzVFVGQlRTeERRVUZPTEVOQlFYcERPMEZCUTBGQkxGbEJRVkZLTEZGQlFWRmpMRk5CUVZNc1MwRkJWQ3hIUVVGcFFsWXNUVUZCVFN4RFFVRk9MRU5CUVhwQ0xFTkJRVkk3UVVGRFFUczdRVUZGUkR0QlFVTkJMRTFCUVVsQkxFMUJRVTBzUTBGQlRpeEZRVUZUUnl4UlFVRlVMRU5CUVd0Q0xFZEJRV3hDTEVOQlFVb3NSVUZCTkVJN1FVRkRNMEpJTEZWQlFVMHNRMEZCVGl4SlFVRlhRU3hOUVVGTkxFTkJRVTRzU1VGQlZ5eExRVUZZTEVkQlFXMUNRU3hOUVVGTkxFTkJRVTRzUTBGQk9VSTdRVUZEUVVFc1ZVRkJUU3hEUVVGT0xFbEJRVmRCTEUxQlFVMHNRMEZCVGl4RlFVRlRWeXhOUVVGVUxFTkJRV2RDV0N4TlFVRk5MRU5CUVU0c1JVRkJVMWtzVDBGQlZDeERRVUZwUWl4SFFVRnFRaXhKUVVGM1FpeERRVUY0UXl4RFFVRllPMEZCUTBjc1IwRnlRekJDTEVOQmNVTjRRanM3T3p0QlFVbE1MRTFCUVVsU0xGTkJRVk03UVVGRFdFTXNWVUZCVFV3c1RVRkJUU3hEUVVGT0xFTkJSRXM3UVVGRldFMHNXVUZCVVU0c1RVRkJUU3hEUVVGT0xFTkJSa2M3UVVGSFdFOHNZMEZCVlZBc1RVRkJUU3hEUVVGT08wRkJTRU1zUjBGQllqczdRVUZOUVN4VFFVRlBTU3hOUVVGUU8wRkJRMFE3TzBGQlJVMHNVMEZCVTJoQ0xGZEJRVlFzUTBGQmNVSjVRaXhMUVVGeVFpeEZRVUUwUWp0QlFVTnFReXhOUVVGSlF5eFpRVUZaUkN4TlFVRk5SQ3hQUVVGT0xFTkJRV01zUjBGQlpDeERRVUZvUWpzN1FVRkZRU3hOUVVGSlVpeFRRVUZUTzBGQlExaFhMR05CUVZWR0xFMUJRVTFITEZOQlFVNHNRMEZCWjBJc1EwRkJhRUlzUlVGQmJVSkdMRk5CUVc1Q0xFTkJSRU03UVVGRldGSXNXVUZCVVU4c1RVRkJUVWNzVTBGQlRpeERRVUZuUWtZc1dVRkJXU3hEUVVFMVFpeEZRVUVyUWtRc1RVRkJUVWtzVFVGQmNrTTdRVUZHUnl4SFFVRmlPenRCUVV0QkxGTkJRVTlpTEUxQlFWQTdRVUZEUkRzN1FVRkZSRHM3T3pzN1FVRkxUeXhUUVVGVFppeFhRVUZVTEVOQlFYRkNOa0lzVFVGQmNrSXNSVUZCTmtJN1FVRkRiRU1zVTBGQlR5eHZRa0ZCV1VFc1RVRkJXaXhGUVVGdlFrUXNUVUZCY0VJc1IwRkJOa0lzUTBGQk4wSXNSMEZCYVVNc1MwRkJha01zUjBGQmVVTXNTVUZCYUVRN1FVRkRSRHM3UVVGRlJEczdPenM3UVVGTFR5eFRRVUZUTTBJc1UwRkJWQ3hEUVVGdFFqWkNMRWRCUVc1Q0xFVkJRWGRDTzBGQlF6ZENPMEZCUTBFc1RVRkJTVUVzUjBGQlNpeEZRVUZUTEU5QlFVOURMRXRCUVV0RExFdEJRVXdzUTBGQlZ5eDVRa0ZCWlVZc1IwRkJaaXhEUVVGWUxFTkJRVkE3UVVGRFZqczdRVUZGUkRzN096czdRVUZMVHl4VFFVRlROVUlzYlVKQlFWUXNRMEZCTmtJclFpeFRRVUUzUWl4RlFVRjNRenRCUVVNM1F5eE5RVUZKVWl4WlFVRlpVU3hWUVVGVlZpeFBRVUZXTEVOQlFXdENMRWRCUVd4Q0xFTkJRV2hDTzBGQlEwRXNVMEZCVHl4WlFVRlpWU3hWUVVGVlRpeFRRVUZXTEVOQlFXOUNSaXhaUVVGWkxFTkJRV2hETEVWQlFXMURVU3hWUVVGVlRDeE5RVUUzUXl4RFFVRmFMRWRCUVcxRkxFZEJRVzVGTEVkQlFYbEZTeXhWUVVGVlRpeFRRVUZXTEVOQlFXOUNMRU5CUVhCQ0xFVkJRWFZDUml4VFFVRjJRaXhEUVVGb1JqdEJRVU5FT3p0QlFVVkVPenM3T3p0QlFVdFBMRk5CUVZOMFFpeHRRa0ZCVkN4RFFVRTJRaXRDTEU5QlFUZENMRVZCUVhORE8wRkJRek5ETEUxQlFVazNRaXhOUVVGTlVDeFZRVUZWYjBNc1QwRkJWaXhEUVVGV08wRkJRMEVzVTBGQlR6ZENMRWxCUVVsaExGRkJRVW9zUTBGQllVNHNUMEZCWWl4RFFVRnhRaXhIUVVGeVFpeEZRVUV3UWl4RlFVRXhRaXhKUVVGblF5eEhRVUZvUXl4SFFVRnpRMUFzU1VGQlNWa3NUVUZCYWtRc1EwRkdNa01zUTBGRll6dEJRVU14UkRzN1FVRkhSRHM3T3pzN1FVRkxUeXhUUVVGVFlpeG5Ra0ZCVkN4RFFVRXdRaXRDTEZWQlFURkNMRVZCUVhORE96dEJRVVV6UXp0QlFVTkJMRTFCUVVsQkxGZEJRVmRTTEZOQlFWZ3NRMEZCY1VJc1EwRkJja0lzUlVGQmQwSXNRMEZCZUVJc1RVRkJLMElzVTBGQmJrTXNSVUZCT0VNN1FVRkROVU1zVVVGQlNWTXNZVUZCWVhSRExGVkJRVlZ4UXl4VlFVRldMRU5CUVdwQ096dEJRVVZCTzBGQlEwRXNVVUZCU1VNc1YwRkJWMjVDTEUxQlFWZ3NTVUZCY1VKdFFpeFhRVUZYYkVJc1VVRkJjRU1zUlVGQk9FTTdRVUZETlVNc1lVRkJUMmxDTEZWQlFWQTdRVUZEUkN4TFFVWkVMRTFCUlU4N1FVRkRUQ3haUVVGTkxESkNRVUZPTzBGQlEwUTdPMEZCUlVnN1FVRkRReXhIUVZoRUxFMUJWMDg3UVVGRFRDeFhRVUZQYWtNc2IwSkJRVzlDYVVNc1ZVRkJjRUlzUTBGQlVEdEJRVU5FTzBGQlEwWXNRenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3p0QlF6VkpSRHM3T3p0QlFVTkJPenM3T3pzN1FVRjRRa0U3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN08wRkJNRUpCTEVsQlFVbEZMR0ZCUVdFc1JVRkJRME1zUzBGQlN5eExRVUZPTEVWQlFXRkRMRTlCUVU4c1QwRkJjRUlzUlVGQk5rSkRMRTlCUVU4c1QwRkJjRU1zUlVGQmFrSTdPMEZCUlVFN096czdPMGxCU1UxRExHdENPenM3UVVGRFNqczdPenM3TzBGQlQwRTdPenM3UVVGSlFTdzRRa0ZCV1VNc1QwRkJXaXhGUVVGeFFuSkRMRWRCUVhKQ0xFVkJRVEJDYzBNc1RVRkJNVUlzUlVGQmEwTkRMR0ZCUVd4RExFVkJRV2xFUXl4WFFVRnFSQ3hGUVVFNFJFTXNVMEZCT1VRc1JVRkJlVVZETEdOQlFYcEZMRVZCUVhsR08wRkJRVUU3TzBGQlFVRXNLMHBCUTJwR1RDeFBRVVJwUml4RlFVTjRSWEpETEVkQlJIZEZMRVZCUTI1RmMwTXNUVUZFYlVVc1JVRkRNMFJETEdGQlJESkVMRVZCUXpWRFF5eFpRVUZaUnl4SlFVUm5ReXhGUVVNeFFrWXNVMEZFTUVJN08wRkJSWFpHTEZGQlFVbEhMR05CUVVvN08wRkJSVUZCTEZWQlFVMURMRkZCUVU0c1IwRkJhVUpJTEdOQlFXcENPMEZCUTBGRkxGVkJRVTFGTEZGQlFVNHNSMEZCYVVJc1JVRkJha0k3TzBGQlJVRkdMRlZCUVUxSExGRkJRVTRzUTBGQlpVTXNUMEZCWml4RFFVRjFRaXhWUVVGRFF5eExRVUZFTEVWQlFWYzdRVUZEYUVOTUxGbEJRVTFOTEZOQlFVNHNRMEZCWjBKRUxFdEJRV2hDTzBGQlEwUXNTMEZHUkRzN1FVRkpRVHRCUVVOQkxIZENRVUZaVkN4WlFVRlpReXhUUVVGNFFpeEZRVUZ0UTFVc1QwRkJia01zUTBGQk1rTXNWVUZCUTBNc1QwRkJSQ3hGUVVGaE8wRkJRM1JFTEZWQlFVbERMRmxCUVZsaUxGbEJRVmxETEZOQlFWb3NRMEZCYzBKWExFOUJRWFJDTEVOQlFXaENPMEZCUTBGU0xGbEJRVTFWTEdkQ1FVRk9MRU5CUVhWQ1JpeFBRVUYyUWl4SlFVRnJReXc0UWtGQmIwSlNMRXRCUVhCQ0xFVkJRVEpDVVN4UFFVRXpRaXhGUVVGdlEwTXNVMEZCY0VNc1EwRkJiRU03UVVGRFJDeExRVWhFT3p0QlFVdEJWQ3hWUVVGTlZ5eHJRa0ZCVGp0QlFXcENkVVk3UVVGclFuaEdPenM3TzNsRFFVVnZRanRCUVVOdVFqdEJRVU5CTEZWQlFVbFlMRkZCUVZFc1NVRkJXanM3UVVGRlFVRXNXVUZCVFZrc1pVRkJUaXhIUVVGM1Fsb3NUVUZCVFdFc1NVRkJUaXhEUVVGWFF5eFhRVUZZTEVOQlFYVkNaQ3hOUVVGTlpTeEpRVUZPTEVkQlFXRXNWVUZCY0VNc1JVRkJaMFFzVlVGQlEwTXNSMEZCUkN4RlFVRlRPMEZCUXk5RkxGbEJRVWxCTEVsQlFVbHFSQ3hKUVVGS0xFdEJRV0VzVVVGQmFrSXNSVUZCTWtJN1FVRkRla0pITEd0Q1FVRlJLME1zUjBGQlVpeERRVUZaTEhkQ1FVRjNRbXBDTEUxQlFVMWxMRWxCUVRsQ0xFZEJRWEZETEZGQlFXcEVMRVZCUVRKRVF5eEhRVUV6UkR0QlFVTkJhRUlzWjBKQlFVMXJRaXhoUVVGT0xFTkJRVzlDYkVJc1RVRkJUVWNzVVVGQk1VSXNSVUZCYjBOaExFZEJRWEJETzBGQlEwUTdRVUZEUml4UFFVeDFRaXhEUVVGNFFqdEJRVTFFT3pzN2QwTkJSVzFDTzBGQlEyeENPMEZCUTBFc1ZVRkJTV2hDTEZGQlFWRXNTVUZCV2pzN1FVRkZRVUVzV1VGQlRWa3NaVUZCVGl4RFFVRnpRazhzVFVGQmRFSTdRVUZEUkRzN1FVRkZSRHM3T3pzN096aENRVWRUTzBGQlExQXNWVUZCU1c1Q0xGRkJRVkVzU1VGQldqczdRVUZGUVVFc1dVRkJUVzlDTEdsQ1FVRk9PMEZCUTBFc1lVRkJUM0JDTEUxQlFVMXhRaXhSUVVGT0xFTkJRV1ZETEZWQlFXWXNRMEZCTUVKMFFpeE5RVUZOWlN4SlFVRm9ReXhEUVVGUU8wRkJRMFE3TzBGQlJVUTdPenM3T3p0clEwRkhZenRCUVVOYUxGVkJRVWxtTEZGQlFWRXNTVUZCV2pzN1FVRkZRVHRCUVVOQkxGVkJRVWwxUWl4cFFrRkJhVUk3UVVGRGJrSjRSQ3hqUVVGTkxHRkJSR0VzUlVGRFJYbEVMRTFCUVUxNFFpeE5RVUZOZVVJc1RVRkVaQ3hGUVVOelFrTXNTVUZCU1RGQ0xFMUJRVTF4UWl4UlFVRk9MRU5CUVdWTkxFOUJSSHBETzBGQlJXNUNReXhqUVVGTkxFVkJRVVZETEZWQlFWVTNRaXhOUVVGTlpTeEpRVUZzUWp0QlFVWmhMRTlCUVhKQ096dEJRVXRCWml4WlFVRk5ZU3hKUVVGT0xFTkJRVmRwUWl4WFFVRllMRU5CUVhWQ1VDeGpRVUYyUWl4RlFVRjFReXhWUVVGRFVTeExRVUZFTEVWQlFWYzdRVUZEYUVRM1JDeG5Ra0ZCVVN0RExFZEJRVklzUTBGQldTeHJRMEZCV2l4RlFVRm5SR01zUzBGQmFFUTdRVUZEUVN4WlFVRkpRU3hOUVVGTlNDeEpRVUZPTEVOQlFWZEpMRWxCUVZnc1MwRkJiMElzUjBGQmVFSXNSVUZCTmtJN1FVRkRNMEpvUXl4blFrRkJUVzlDTEdsQ1FVRk9PMEZCUTBFc2FVSkJRVTl3UWl4TlFVRk5jVUlzVVVGQlRpeERRVUZsUXl4VlFVRm1MRU5CUVRCQ2RFSXNUVUZCVFdVc1NVRkJhRU1zUTBGQlVEdEJRVU5FTzBGQlEwWXNUMEZPUkR0QlFVOUVPenRCUVVWRU96czdPenM3T3pzMlFrRkxVMnRDTEUwc1JVRkJVVU1zVVN4RlFVRlZPMEZCUTNwQ0xGVkJRVWxETEUxQlFVMUdMRTFCUVZZN1FVRkRRU3hWUVVGSlJ5eFpRVUZaTzBGQlEyUnlSU3hqUVVGTmNVSXNWMEZCVjBjc1MwRkVTRHRCUVVWa01rTXNhMEpCUVZWQk8wRkJSa2tzVDBGQmFFSTdPMEZCUzBFc1ZVRkJTVWNzVFVGQlRVb3NUMEZCVHpORUxFOUJRVkFzUTBGQlpTeEhRVUZtTEVOQlFWWTdRVUZEUVN4VlFVRkpLMFFzVVVGQlVVb3NUMEZCVDNSRUxFMUJRVkFzUjBGQlowSXNRMEZCTlVJc1JVRkJLMEk3UVVGRE4wSXNXVUZCU1RCRUxGRkJRVkVzUTBGQldpeEZRVUZsTzBGQlEySkVMRzlDUVVGVmNrVXNTVUZCVml4SFFVRnBRbkZDTEZkQlFWZERMRWRCUVRWQ08wRkJRMFFzVTBGR1JDeE5RVVZQTzBGQlEwd3JReXh2UWtGQlZYSkZMRWxCUVZZc1IwRkJhVUp4UWl4WFFVRlhSU3hMUVVFMVFqdEJRVU5CTmtNc1owSkJRVTFHTEU5QlFVODFSQ3hOUVVGUUxFTkJRV01zUTBGQlpDeEZRVUZwUWpSRUxFOUJRVTkwUkN4TlFVRlFMRWRCUVdkQ0xFTkJRV3BETEVOQlFVNDdRVUZEUkR0QlFVTkdPenRCUVVWRUxGZEJRVXQxUWl4UlFVRk1MRU5CUVdOcFF5eEhRVUZrTEVsQlFYRkNReXhUUVVGeVFqdEJRVU5FT3pzN09FSkJSVk12UWl4TExFVkJRVTg3UVVGRFppeFZRVUZKVEN4UlFVRlJMRWxCUVZvN08wRkJSVUVzTUVKQlFWbEJMRTFCUVUxRkxGRkJRV3hDTEVWQlFUUkNTeXhQUVVFMVFpeERRVUZ2UXl4VlFVRkRORUlzUjBGQlJDeEZRVUZUTzBGQlF6TkRMRmxCUVVsR0xGTkJRVk5xUXl4TlFVRk5SU3hSUVVGT0xFTkJRV1ZwUXl4SFFVRm1MRU5CUVdJN1FVRkRRU3haUVVGSlJpeFBRVUZQYkVVc1NVRkJVQ3hMUVVGblFuRkNMRmRCUVZkRExFZEJRUzlDTEVWQlFXOURPMEZCUTJ4RE8wRkJRMEUwUXl4cFFrRkJUME1zVVVGQlVDeERRVUZuUWpkQ0xFdEJRV2hDTzBGQlEwUXNVMEZJUkN4TlFVZFBMRWxCUVVrMFFpeFBRVUZQYkVVc1NVRkJVQ3hMUVVGblFuRkNMRmRCUVZkRkxFdEJRUzlDTEVWQlFYTkRPMEZCUXpORE8wRkJRMEVzWTBGQlNXVXNUVUZCVFdsRExFdEJRVTRzUTBGQldXaEZMRTlCUVZvc1EwRkJiMEkyUkN4SFFVRndRaXhOUVVFMlFpeERRVUZxUXl4RlFVRnZRenRCUVVOc1EwWXNiVUpCUVU5RExGRkJRVkFzUTBGQlowSTNRaXhMUVVGb1FqdEJRVU5FTzBGQlEwWXNVMEZNVFN4TlFVdEJMRWxCUVVrMFFpeFBRVUZQYkVVc1NVRkJVQ3hMUVVGblFuRkNMRmRCUVZkSExFdEJRUzlDTEVWQlFYTkRPMEZCUXpORE8wRkJRMEVzWTBGQlNXTXNUVUZCVFdsRExFdEJRVTRzUzBGQlowSklMRWRCUVhCQ0xFVkJRWGxDTzBGQlEzWkNSaXh0UWtGQlQwTXNVVUZCVUN4RFFVRm5RamRDTEV0QlFXaENPMEZCUTBRN1FVRkRSanRCUVVOR0xFOUJhRUpFTzBGQmFVSkVPenM3ZFVKQkwwaDVReXd5UWpzN2EwSkJhMGszUW1Jc2EwSTdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3p0QlF6TkpaanM3T3p0QlFVTkJPenM3TzBGQlJVRTdPenM3UVVFeFFrRTdPenM3T3pzN096czdPenM3T3pzN096czdPenM3TzBsQk9FSk5LME1zYTBJN096dEJRVU5LT3pzN096czdPenRCUVZOQk96czdPMEZCU1VFc09FSkJRVms1UXl4UFFVRmFMRVZCUVhGQ2NrTXNSMEZCY2tJc1JVRkJNRUp6UXl4TlFVRXhRaXhGUVVGclEwTXNZVUZCYkVNc1JVRkJhVVJETEZkQlFXcEVMRVZCUVRoRVF5eFRRVUU1UkN4RlFVRjVSVHRCUVVGQk96dEJRVUZCTEN0S1FVTnFSVW9zVDBGRWFVVXNSVUZEZUVSeVF5eEhRVVIzUkN4RlFVTnVSSE5ETEUxQlJHMUVMRVZCUXpORFF5eGhRVVF5UXl4RlFVTTFRa01zVjBGRU5FSXNSVUZEWmtNc1UwRkVaVHM3UVVGRmRrVXNVVUZCU1Vjc1kwRkJTanM3UVVGRlFVRXNWVUZCVFhkRExHTkJRVTRzUjBGQmRVSXNSVUZCZGtJN08wRkJSVUY0UXl4VlFVRk5SeXhSUVVGT0xFTkJRV1ZETEU5QlFXWXNRMEZCZFVJc1ZVRkJRME1zUzBGQlJDeEZRVUZYTzBGQlEyaERia01zWTBGQlVTdERMRWRCUVZJc1EwRkJXU3gzUWtGQmQwSTNSQ3hIUVVGNFFpeEhRVUU0UWl4VFFVRXhReXhGUVVGeFJHbEVMRXRCUVhKRU8wRkJRMEZNTEZsQlFVMTVReXhUUVVGT0xFTkJRV2RDY0VNc1MwRkJhRUk3UVVGRFJDeExRVWhFT3p0QlFVdEJUQ3hWUVVGTlZ5eHJRa0ZCVGp0QlFWaDFSVHRCUVZsNFJUczdPenQ1UTBGRmIwSTdRVUZEYmtJN1FVRkRRU3hWUVVGSldDeFJRVUZSTEVsQlFWbzdPMEZCUlVGQkxGbEJRVTB3UXl4bFFVRk9MRWRCUVhkQ01VTXNUVUZCVFdFc1NVRkJUaXhEUVVGWFF5eFhRVUZZTEVOQlFYVkNaQ3hOUVVGTlpTeEpRVUUzUWl4RlFVRnRReXhWUVVGRFF5eEhRVUZFTEVWQlFWTTdRVUZEYkVVNVF5eG5Ra0ZCVVN0RExFZEJRVklzUTBGQldTeG5Ra0ZCWjBKcVFpeE5RVUZOWlN4SlFVRjBRaXhIUVVFMlFpeFJRVUY2UXl4RlFVRnRSRU1zUjBGQmJrUTdRVUZEUVN4blFrRkJVVUVzU1VGQlNXcEVMRWxCUVZvN1FVRkRSU3hsUVVGTExGVkJRVXc3UVVGQmFVSnBReXhyUWtGQlRUSkRMRmRCUVU0c1EwRkJhMEl6UWl4SFFVRnNRaXhGUVVGM1FqdEJRVU42UXl4bFFVRkxMRTFCUVV3N1FVRkJZV2hDTEd0Q1FVRk5ORU1zVDBGQlRpeERRVUZqTlVJc1IwRkJaQ3hGUVVGdlFqdEJRVVp1UXp0QlFVbEVMRTlCVG5WQ0xFTkJRWGhDTzBGQlQwUTdPenQzUTBGRmJVSTdRVUZEYkVJN1FVRkRRU3hWUVVGSmFFSXNVVUZCVVN4SlFVRmFPenRCUVVWQlFTeFpRVUZOTUVNc1pVRkJUaXhEUVVGelFuWkNMRTFCUVhSQ08wRkJRMFE3TzBGQlJVUTdPenM3T3pzN2IwTkJTV2RDTUVJc1V5eEZRVUZYTzBGQlEzcENMRlZCUVVrM1F5eFJRVUZSTEVsQlFWbzdPMEZCUlVFN1FVRkRRU3hWUVVGSk9FTXNXVUZCV1R0QlFVTmtMMFVzWTBGQlRTeFJRVVJSTEVWQlEwVjVSQ3hOUVVGTmVFSXNUVUZCVFhGQ0xGRkJRVTRzUTBGQlpVa3NUVUZFZGtJc1JVRkRLMEpETEVsQlFVa3hRaXhOUVVGTmNVSXNVVUZCVGl4RFFVRmxUU3hQUVVSc1JEdEJRVVZrUXl4alFVRk5MRVZCUVVWdFFpeFJRVUZSTEV0QlFWWXNSVUZCYVVKc1FpeFZRVUZWTjBJc1RVRkJUV1VzU1VGQmFrTXNSVUZCZFVOeVFpeFJRVUZSVFN4TlFVRk5aMFFzVDBGQmNrUXNSVUZCT0VSNlJpeFBRVUZQZVVNc1RVRkJUVWNzVVVGQlRpeERRVUZsU2l4SlFVRndSaXhGUVVFd1JtdEVMRmRCUVZkS0xGTkJRWEpITzBGQlJsRXNUMEZCYUVJN08wRkJTMEUzUXl4WlFVRk5ZU3hKUVVGT0xFTkJRVmRwUWl4WFFVRllMRU5CUVhWQ1owSXNVMEZCZGtJN1FVRkRSRHM3UVVGRlJEczdPenM3T3poQ1FVZFRPMEZCUTFBc1ZVRkJTVGxETEZGQlFWRXNTVUZCV2pzN1FVRkZRVHRCUVVOQkxGVkJRVWxyUkN4WlFVRlpPMEZCUTJSdVJpeGpRVUZOTEZGQlJGRXNSVUZEUlhsRUxFMUJRVTE0UWl4TlFVRk5lVUlzVFVGRVpDeEZRVU56UWtNc1NVRkJTVEZDTEUxQlFVMXhRaXhSUVVGT0xFTkJRV1ZOTEU5QlJIcERPMEZCUldSRExHTkJRVTBzUlVGQlJVTXNWVUZCVlRkQ0xFMUJRVTFsTEVsQlFXeENPMEZCUmxFc1QwRkJhRUk3TzBGQlMwRm1MRmxCUVUxaExFbEJRVTRzUTBGQlYybENMRmRCUVZnc1EwRkJkVUp2UWl4VFFVRjJRaXhGUVVGclF5eFZRVUZEYmtJc1MwRkJSQ3hGUVVGWE8wRkJRek5ETjBRc1owSkJRVkVyUXl4SFFVRlNMRU5CUVZrc05rSkJRVm9zUlVGQk1rTmpMRXRCUVRORE8wRkJRMEVzV1VGQlNVRXNUVUZCVFVnc1NVRkJUaXhEUVVGWFNTeEpRVUZZTEV0QlFXOUNMRWRCUVhoQ0xFVkJRVFpDTzBGQlF6TkNhRU1zWjBKQlFVMXZRaXhwUWtGQlRqdEJRVU5CTEdsQ1FVRlBjRUlzVFVGQlRYRkNMRkZCUVU0c1EwRkJaVGhDTEZWQlFXWXNRMEZCTUVKdVJDeE5RVUZOWlN4SlFVRm9ReXhEUVVGUU8wRkJRMFE3UVVGRFJpeFBRVTVFTzBGQlQwUTdPMEZCUlVRN096czdPenM3T3p0QlFVMUJPenM3TzIxRFFVbGxiVUlzVVN4RlFVRlZPMEZCUTNaQ0xGZEJRVXRyUWl4elFrRkJUQ3hIUVVFNFFteENMRkZCUVRsQ08wRkJRMFE3TzBGQlJVUTdPenM3T3pzN0swSkJTVmRCTEZFc1JVRkJWVHRCUVVOdVFpeFhRVUZMYlVJc2EwSkJRVXdzUjBGQk1FSnVRaXhSUVVFeFFqdEJRVU5FT3p0QlFVVkVPenM3T3pzN096SkNRVWxQUVN4UkxFVkJRVlU3UVVGRFppeFhRVUZMYjBJc1kwRkJUQ3hIUVVGelFuQkNMRkZCUVhSQ08wRkJRMFE3TzBGQlJVUTdPenM3SzBKQlExZHNRaXhITEVWQlFVczdRVUZEWkN4VlFVRkphRUlzVVVGQlVTeEpRVUZhT3p0QlFVVkJPVUlzWTBGQlVTdERMRWRCUVZJc1EwRkJXU3d3UWtGQldpeEZRVUYzUTBRc1IwRkJlRU03UVVGRFFTeGpRVUZSUVN4SlFVRkpXU3hKUVVGS0xFTkJRVk0zUkN4SlFVRnFRanRCUVVORkxHRkJRVXNzVjBGQlREdEJRVUZyUW1sRExHZENRVUZOZFVRc1dVRkJUaXhEUVVGdFFuWkRMRWRCUVc1Q0xFVkJRWGxDTzBGQlF6TkRMR0ZCUVVzc1lVRkJURHRCUVVGdlFtaENMR2RDUVVGTmQwUXNZMEZCVGl4RFFVRnhRbmhETEVkQlFYSkNMRVZCUVRKQ08wRkJSbXBFTzBGQlNVUTdPMEZCUlVRN096czdhVU5CUTJGQkxFY3NSVUZCU3p0QlFVTm9RaXhWUVVGSmFFSXNVVUZCVVN4SlFVRmFPMEZCUTBFc1ZVRkJTWGxFTEdGQlFXRjZReXhKUVVGSldTeEpRVUZLTEVOQlFWTktMRWxCUVRGQ096dEJRVVZCTEZWQlFVbHVRaXhSUVVGUk8wRkJRMVowUXl4alFVRk5hVVFzU1VGQlNWa3NTVUZCU2l4RFFVRlROMFFzU1VGRVREdEJRVVZXV0N4aFFVRkxjVWNzVlVGR1N6czdRVUZKVm5oR0xHdENRVUZWSzBNc1NVRkJTVmtzU1VGQlNpeERRVUZUTTBRc1VVRktWRHM3UVVGTlZubEdMR2RDUVVGUkxHdENRVUZOTzBGQlExbzdRVUZEUVN4alFVRkpReXhOUVVGTkxFVkJRVVYyUnl4TFFVRkxjVWNzVlVGQlVDeEZRVUZ0UWtjc1VVRkJVU3hKUVVFelFpeEZRVUZXTzBGQlEwRTFSQ3huUWtGQlRYZERMR05CUVU0c1EwRkJjVUpwUWl4VlFVRnlRaXhKUVVGdFEwVXNSMEZCYmtNN08wRkJSVUU3UVVGRFFTeGpRVUZKUlN4cFFrRkJhVUlzUlVGQmNrSTdRVUZEUVN3NFFrRkJXVGRFTEUxQlFVMVZMR2RDUVVGc1FpeEZRVUZ2UTBnc1QwRkJjRU1zUTBGQk5FTXNWVUZCUTBNc1QwRkJSQ3hGUVVGaE8wRkJRM1pFTEdkQ1FVRkpReXhaUVVGWlZDeE5RVUZOVlN4blFrRkJUaXhEUVVGMVFrWXNUMEZCZGtJc1JVRkJaME5VTEVsQlFXaEVPMEZCUTBFNFJDd3lRa0ZCWlhKRUxFOUJRV1lzU1VGQk1FSXNjMEpCUVZWRExGTkJRVllzUTBGQk1VSTdRVUZEUkN4WFFVaEVPenRCUVV0Qk8wRkJRMEZVTEdkQ1FVRk5ZU3hKUVVGT0xFTkJRVmRwUWl4WFFVRllMRU5CUVhWQ08wRkJRM0pDWjBNc1owSkJRVWs1UXl4SlFVRkpPRU1zUlVGRVlTeEZRVU5VTDBZc1RVRkJUU3hWUVVSSExFVkJRMU41UkN4TlFVRk5VaXhKUVVGSlZTeEZRVVJ1UWl4RlFVTjFRa0VzU1VGQlNWWXNTVUZCU1ZFc1NVRkVMMEk3UVVGRmNrSkpMR3RDUVVGTkxFVkJRVVZKTEUxQlFVMHNSMEZCVWl4RlFVRmhkRU1zVVVGQlVVMHNUVUZCVFdkRUxFOUJRVE5DTEVWQlFXOURaU3hUUVVGVEwwUXNUVUZCVFVNc1VVRkJia1FzUlVGQk5rUXhReXhQUVVGUExFVkJRVVYzUXl4TlFVRk5MSE5DUVVGVlF5eE5RVUZOUkN4SlFVRm9RaXhEUVVGU0xFVkJRU3RDUml4WFFVRlhaMFVzWTBGQk1VTXNSVUZCY0VVN1FVRkdaU3hYUVVGMlFqczdRVUZMUVN4cFFrRkJUMFlzUjBGQlVEdEJRVU5FTEZOQmVrSlRPenRCUVRKQ1Zrc3NaMEpCUVZFc1owSkJRVU5ETEUxQlFVUXNSVUZCV1R0QlFVTnNRanRCUVVOQmFrVXNaMEpCUVUxaExFbEJRVTRzUTBGQlYybENMRmRCUVZnc1EwRkJkVUk3UVVGRGNrSm5ReXhuUWtGQlNUbERMRWxCUVVrNFF5eEZRVVJoTEVWQlExUXZSaXhOUVVGTkxGVkJSRWNzUlVGRFUzbEVMRTFCUVUxU0xFbEJRVWxWTEVWQlJHNUNMRVZCUTNWQ1FTeEpRVUZKVml4SlFVRkpVU3hKUVVRdlFqdEJRVVZ5UWtrc2EwSkJRVTBzUlVGQlJVa3NUVUZCVFN4SFFVRlNMRVZCUVdGclF5eE5RVUZOUkN4TlFVRnVRanRCUVVabExGZEJRWFpDTzBGQlNVUTdRVUZxUTFNc1QwRkJXanM3UVVGdlEwRXNWVUZCU1dwRkxFMUJRVTF2UkN4elFrRkJWaXhGUVVGclF6dEJRVU5vUTJ4R0xHZENRVUZSSzBNc1IwRkJVaXhEUVVGWkxITkNRVUZhTEVWQlFXOURXaXhMUVVGd1F6dEJRVU5CVEN4alFVRk5iMFFzYzBKQlFVNHNRMEZCTmtJdlF5eExRVUUzUWp0QlFVTkVPMEZCUTBZN08wRkJSVVE3T3pzN2JVTkJRMlZYTEVjc1JVRkJTenRCUVVOc1FpeFZRVUZKYUVJc1VVRkJVU3hKUVVGYU8wRkJRMEVzVlVGQlNYbEVMR0ZCUVdGNlF5eEpRVUZKV1N4SlFVRktMRU5CUVZOS0xFbEJRVEZDT3p0QlFVVkJMRlZCUVVsdFF5eE5RVUZOTTBRc1RVRkJUWGRETEdOQlFVNHNRMEZCY1VKcFFpeFZRVUZ5UWl4RFFVRldPMEZCUTBFc1lVRkJUM3BFTEUxQlFVMTNReXhqUVVGT0xFTkJRWEZDYVVJc1ZVRkJja0lzUTBGQlVEczdRVUZGUVN4VlFVRkpjRVFzVVVGQlVUdEJRVU5XZEVNc1kwRkJUV2xFTEVsQlFVbFpMRWxCUVVvc1EwRkJVemRFTEVsQlJFdzdRVUZGVmxnc1lVRkJTM0ZITEZWQlJrczdRVUZIVmpkRkxHZENRVUZSSzBVN1FVRklSU3hQUVVGYU96dEJRVTFCTEZWQlFVa3pSQ3hOUVVGTmIwUXNjMEpCUVZZc1JVRkJhME03UVVGRGFFTnNSaXhuUWtGQlVTdERMRWRCUVZJc1EwRkJXU3g1UWtGQldpeEZRVUYxUTFvc1MwRkJka003UVVGRFFVd3NZMEZCVFc5RUxITkNRVUZPTEVOQlFUWkNMME1zUzBGQk4wSTdRVUZEUkR0QlFVTkdPenRCUVVWRU96czdPMmREUVVOWlZ5eEhMRVZCUVVzN1FVRkRaaXhWUVVGSmFFSXNVVUZCVVN4SlFVRmFPenRCUVVWQkxGVkJRVWxMTEZGQlFWRTdRVUZEVm5SRExHTkJRVTFwUkN4SlFVRkpha1FzU1VGRVFUdEJRVVZXV0N4aFFVRkxORVFzU1VGQlNWRXNTVUZHUXp0QlFVZFdVU3hqUVVGTmFFSXNTVUZCU1Zrc1NVRkJTaXhEUVVGVFNUdEJRVWhNTEU5QlFWbzdPMEZCVFVFc1ZVRkJTV2hETEUxQlFVMXhSQ3hyUWtGQlZpeEZRVUU0UWp0QlFVTTFRbTVHTEdkQ1FVRlJLME1zUjBGQlVpeERRVUZaTEd0Q1FVRmFMRVZCUVdkRFdpeExRVUZvUXp0QlFVTkJUQ3hqUVVGTmNVUXNhMEpCUVU0c1EwRkJlVUpvUkN4TFFVRjZRanRCUVVORU8wRkJRMFk3TzBGQlJVUTdPenM3TkVKQlExRlhMRWNzUlVGQlN6dEJRVU5ZTEZWQlFVbG9RaXhSUVVGUkxFbEJRVm83TzBGQlJVRXNWVUZCU1Vzc1VVRkJVVHRCUVVOV2RFTXNZMEZCVFdsRUxFbEJRVWxxUkN4SlFVUkJPMEZCUlZaWUxHRkJRVXMwUkN4SlFVRkpVU3hKUVVaRE96dEJRVWxXYTBNc1owSkJRVkVzYTBKQlFVMDdRVUZEV2pGRUxHZENRVUZOWVN4SlFVRk9MRU5CUVZkcFFpeFhRVUZZTEVOQlFYVkNPMEZCUTNKQ1owTXNaMEpCUVVrNVF5eEpRVUZKT0VNc1JVRkVZU3hGUVVOVUwwWXNUVUZCVFN4VlFVUkhMRVZCUTFONVJDeE5RVUZOVWl4SlFVRkpWU3hGUVVSdVFpeEZRVU4xUWtFc1NVRkJTVllzU1VGQlNWRXNTVUZFTDBJN1FVRkZja0pKTEd0Q1FVRk5MRVZCUVVWSkxFMUJRVTBzUjBGQlVpeEZRVUZoZWtVc1QwRkJUeXh6UWtGQlZYbERMRTFCUVUxRUxFbEJRV2hDTEVOQlFYQkNPMEZCUm1Vc1YwRkJka0k3UVVGSlJDeFRRVlJUT3p0QlFWZFdhVVVzWjBKQlFWRXNaMEpCUVVORExFMUJRVVFzUlVGQldUdEJRVU5zUW1wRkxHZENRVUZOWVN4SlFVRk9MRU5CUVZkcFFpeFhRVUZZTEVOQlFYVkNPMEZCUTNKQ1owTXNaMEpCUVVrNVF5eEpRVUZKT0VNc1JVRkVZU3hGUVVOVUwwWXNUVUZCVFN4VlFVUkhMRVZCUTFONVJDeE5RVUZOVWl4SlFVRkpWU3hGUVVSdVFpeEZRVU4xUWtFc1NVRkJTVllzU1VGQlNWRXNTVUZFTDBJN1FVRkZja0pKTEd0Q1FVRk5MRVZCUVVWSkxFMUJRVTBzUjBGQlVpeEZRVUZoYTBNc1RVRkJUVVFzVFVGQmJrSTdRVUZHWlN4WFFVRjJRanRCUVVsRU8wRkJhRUpUTEU5QlFWbzdPMEZCYlVKQkxGVkJRVWxxUlN4TlFVRk5jMFFzWTBGQlZpeEZRVUV3UWp0QlFVTjRRbkJHTEdkQ1FVRlJLME1zUjBGQlVpeERRVUZaTEdOQlFWb3NSVUZCTkVKYUxFdEJRVFZDTzBGQlEwRk1MR05CUVUxelJDeGpRVUZPTEVOQlFYRkNha1FzUzBGQmNrSTdRVUZEUkR0QlFVTkdPenM3ZDBKQmJrcHRRanRCUVVGRkxHRkJRVThzUzBGQlMyMURMR05CUVZvN1FVRkJOa0k3T3p0MVFrRjZSbFFzTWtJN08ydENRV2RRTjBKRUxHdENPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3UVVOMlVHWTdPenM3UVVGRFFUczdPenRCUVVOQk96czdPMEZCUlVFN096czdTVUZKVFRSQ0xGVTdRVUZEU2pzN096czdPenM3T3pzN096czdRVUZwUWtFN096czdRVUZKUVN4elFrRkJXVEZGTEU5QlFWb3NSVUZCY1VKeVF5eEhRVUZ5UWl4RlFVRXdRbk5ETEUxQlFURkNMRVZCUVd0RFF5eGhRVUZzUXl4RlFVRnBSRU1zVjBGQmFrUXNSVUZCT0VSRExGTkJRVGxFTEVWQlFYbEZPMEZCUVVFN08wRkJRM1pGTEZGQlFVbEhMRkZCUVZFc1NVRkJXanM3UVVGRlFVRXNWVUZCVFhGQ0xGRkJRVTRzUjBGQmFVSTFRaXhQUVVGcVFqdEJRVU5CVHl4VlFVRk5aU3hKUVVGT0xFZEJRV0V6UkN4SFFVRmlPMEZCUTBFMFF5eFZRVUZOWjBRc1QwRkJUaXhIUVVGblFuUkVMRTFCUVdoQ08wRkJRMEZOTEZWQlFVMXZSU3hQUVVGT0xFZEJRV2RDZWtVc1lVRkJhRUk3UVVGRFFVc3NWVUZCVFVjc1VVRkJUaXhIUVVGcFFpd3dRa0ZCWlZBc1YwRkJaaXhEUVVGcVFqdEJRVU5CU1N4VlFVRk5jVVVzVlVGQlRpeEhRVUZ0UW5oRkxGTkJRVzVDT3p0QlFVVkJSeXhWUVVGTlF5eFJRVUZPTEVkQlFXbENMRU5CUVdwQ08wRkJRMEZFTEZWQlFVMXpSU3hSUVVGT0xFZEJRV2xDTEVOQlFXcENPMEZCUTBGMFJTeFZRVUZOVlN4blFrRkJUaXhIUVVGNVFpeEZRVUY2UWp0QlFVTkJWaXhWUVVGTmRVVXNhMEpCUVU0c1IwRkJNa0lzUlVGQk0wSTdPMEZCUlVGMlJTeFZRVUZOZVVJc1RVRkJUaXhIUVVGbGFFTXNVVUZCVVdkRExFMUJRWFpDTzBGQlEwRjZRaXhWUVVGTllTeEpRVUZPTEVkQlFXRndRaXhSUVVGUmIwSXNTVUZCY2tJN1FVRkRSRHM3T3p0NVEwRkZiMEk3UVVGQlFUczdRVUZEYmtJc1ZVRkJTV0lzVVVGQlVTeEpRVUZhT3p0QlFVVkJMRlZCUVVsM1JTeGxRVUZsZUVVc1RVRkJUV1VzU1VGQlRpeEhRVUZoTEZsQlFXaERPMEZCUTBFM1F5eGpRVUZSSzBNc1IwRkJVaXhEUVVGWkxITkRRVUZhTEVWQlFXOUVha0lzVFVGQlRYRkZMRlZCUVRGRU8wRkJRMEVzVlVGQlNYSkZMRTFCUVUxeFJTeFZRVUZXTEVWQlFYTkNPMEZCUTNCQ2NrVXNZMEZCVFhGRkxGVkJRVTRzUTBGQmFVSTVSQ3hQUVVGcVFpeERRVUY1UWl4VlFVRkRhMFVzUzBGQlJDeEZRVUZYTzBGQlEyeERMR05CUVVsRExGZEJRVmRHTEdWQlFXVkRMRXRCUVRsQ08wRkJRMEVzWTBGQlNVVXNWMEZCVnpORkxFMUJRVTFoTEVsQlFVNHNRMEZCVjBNc1YwRkJXQ3hEUVVGMVFqUkVMRkZCUVhaQ0xFVkJRV2xETEZWQlFVTXhSQ3hIUVVGRUxFVkJRVk03UVVGRGRrUTdRVUZEUVN4blFrRkJTVUVzU1VGQlNWRXNTVUZCU2l4TFFVRmhMRTlCUVV0RExFMUJRWFJDTEVWQlFUaENPMEZCUXpWQ2RrUXNjMEpCUVZFclF5eEhRVUZTTEVOQlFWa3NNa0pCUVZvc1JVRkJlVU5FTEVkQlFYcERPMEZCUTBFc2MwSkJRVkZCTEVsQlFVbHFSQ3hKUVVGYU8wRkJRMFVzY1VKQlFVc3NVVUZCVER0QlFVRmxhVU1zZDBKQlFVMDBSU3hqUVVGT0xFTkJRWEZDTlVRc1IwRkJja0lzUlVGQk1rSTdRVUZETVVNc2NVSkJRVXNzVVVGQlREdEJRVUZsT1VNc01FSkJRVkVyUXl4SFFVRlNMRU5CUVZsRUxFZEJRVm9zUlVGQmEwSTdRVUZEYWtNN1FVRkJVMmhDTEhkQ1FVRk5Oa1VzWlVGQlRpeERRVUZ6UWpkRUxFZEJRWFJDTEVWQlFUUkNPMEZCU0haRE8wRkJTMFE3UVVGRFJpeFhRVlpqTEVOQlFXWTdPMEZCV1VGb1FpeG5Ra0ZCVFhWRkxHdENRVUZPTEVOQlFYbENUeXhKUVVGNlFpeERRVUU0UWtnc1VVRkJPVUk3UVVGRFJDeFRRV1pFTzBGQlowSkVPMEZCUTBZN096dDNRMEZGYlVJN1FVRkRiRUlzVlVGQlNUTkZMRkZCUVZFc1NVRkJXanM3UVVGRlFVRXNXVUZCVFhWRkxHdENRVUZPTEVOQlFYbENhRVVzVDBGQmVrSXNRMEZCYVVNc1ZVRkJRMjlGTEZGQlFVUXNSVUZCWXp0QlFVTTNRMEVzYVVKQlFWTjRSQ3hOUVVGVU8wRkJRMFFzVDBGR1JEczdRVUZKUVN3d1FrRkJXVzVDTEUxQlFVMVZMR2RDUVVGc1FpeEZRVUZ2UTBnc1QwRkJjRU1zUTBGQk5FTXNWVUZCUXpSQ0xFZEJRVVFzUlVGQlV6dEJRVU51Ukc1RExHTkJRVTFWTEdkQ1FVRk9MRU5CUVhWQ2VVSXNSMEZCZGtJc1JVRkJORUptTEdsQ1FVRTFRanRCUVVORUxFOUJSa1E3UVVGSFJEczdRVUZGUkRzN096czdPenM3TzBGQk9FSkJPenM3TkVKQlIxRTdRVUZEVGp0QlFVTkJMRmxCUVUwc2FVSkJRVTQ3UVVGRFJEczdRVUZGUkRzN096czdPelpDUVVkVE8wRkJRMUE3UVVGRFFTeFpRVUZOTEdsQ1FVRk9PMEZCUTBRN08wRkJSVVE3T3pzN096c3lRa0ZIVHp0QlFVTk1PMEZCUTBFc1dVRkJUU3hwUWtGQlRqdEJRVU5FT3p0QlFVVkVPenM3T3pzN096czdOa0pCVFZNeVJDeFJMRVZCUVZWdVJpeFhMRVZCUVdFN1FVRkRPVUlzVlVGQlNVa3NVVUZCVVN4SlFVRmFPenRCUVVWQk8wRkJRMEZCTEZsQlFVMXpSU3hSUVVGT08wRkJRMEVzVlVGQlNWVXNZVUZCWVdoR0xFMUJRVTE1UWl4TlFVRk9MRWRCUVdVc1IwRkJaaXhIUVVGeFFucENMRTFCUVUxelJTeFJRVUUxUXp0QlFVTkJMRlZCUVVsWExHVkJRV1ZxUml4TlFVRk5aU3hKUVVGT0xFZEJRV0VzV1VGQllpeEhRVUUwUW1kRkxGRkJRUzlET3p0QlFVVkJPMEZCUTBFc1ZVRkJTVWNzWVVGQllUdEJRVU5tYmtnc1kwRkJUU3hSUVVSVExFVkJRME41UkN4TlFVRk5lRUlzVFVGQlRYbENMRTFCUkdJc1JVRkRjVUpETEVsQlFVbDFSQ3haUVVSNlFqdEJRVVZtY2tRc1kwRkJUU3hGUVVGRlF5eFZRVUZWYlVRc1ZVRkJXaXhGUVVGM1FucElMRTlCUVU5eFF5eFhRVUV2UWp0QlFVWlRMRTlCUVdwQ096dEJRVXRCTzBGQlEwRXNZVUZCVHl4elFrRkJXU3hWUVVGRGRVWXNUMEZCUkN4RlFVRmhPMEZCUXpsQ0xGbEJRVWxETEZGQlFWRndSaXhOUVVGTllTeEpRVUZPTEVOQlFWZHBRaXhYUVVGWUxFTkJRWFZDYjBRc1ZVRkJka0lzUTBGQldqczdRVUZGUVdoSUxHZENRVUZSSzBNc1IwRkJVaXhEUVVGWkxEUkNRVUUwUW1wQ0xFMUJRVTE1UWl4TlFVRnNReXhIUVVFeVF5eE5RVUYyUkN4RlFVRXJSSGxFTEZWQlFTOUVPMEZCUTBFc1dVRkJTVWNzVjBGQlZ5dzRRa0ZCYjBKeVJpeExRVUZ3UWl4RlFVRXlRbWRHTEZWQlFUTkNMRVZCUVhWRGNFWXNWMEZCZGtNc1JVRkJiMFJKTEUxQlFVMTVRaXhOUVVFeFJDeEZRVUZyUlRKRUxFdEJRV3hGTEVOQlFXWTdRVUZEUVVNc2FVSkJRVk5ETEZGQlFWUXNRMEZCYTBJc1ZVRkJRMnBHTEV0QlFVUXNSVUZCVnp0QlFVTXpRa3dzWjBKQlFVMTVReXhUUVVGT0xFTkJRV2RDY0VNc1MwRkJhRUlzUlVGQmRVSXNSVUZCUld0R0xFMUJRVTFPTEZsQlFWSXNSVUZCYzBKNlJTeFRRVUZUZDBVc1ZVRkJMMElzUlVGQmRrSTdRVUZEUkN4VFFVWkVPenRCUVVsQmFFWXNZMEZCVFZVc1owSkJRVTRzUTBGQmRVSnpSU3hWUVVGMlFpeEpRVUZ4UTBzc1VVRkJja003TzBGQlJVRkdMR2RDUVVGUlJTeFJRVUZTTzBGQlEwUXNUMEZhVFN4RFFVRlFPMEZCWVVRN08wRkJSVVE3T3pzN096czdLMEpCU1ZkdVJDeFJMRVZCUVZVN1FVRkRia0lzVjBGQlMzTkVMSEZDUVVGTUxFZEJRVFpDZEVRc1VVRkJOMEk3UVVGRFJEczdRVUZGUkRzN096dHRRMEZEWld4Q0xFY3NSVUZCU3p0QlFVTnNRaXhWUVVGSmFFSXNVVUZCVVN4SlFVRmFPMEZCUTBFc1ZVRkJTV2RHTEdGQlFXRm9SU3hKUVVGSldTeEpRVUZLTEVOQlFWTkRMRkZCUVRGQ096dEJRVVZCTTBRc1kwRkJVU3RETEVkQlFWSXNRMEZCV1N3MFFrRkJORUpxUWl4TlFVRk5lVUlzVFVGQmJFTXNSMEZCTWtNc1RVRkJka1FzUlVGQkswUlVMRWRCUVM5RU8wRkJRMEVzVlVGQlNYRkZMRmRCUVZjc09FSkJRVzlDY2tZc1MwRkJjRUlzUlVGQk1rSm5SaXhWUVVFelFpeEZRVUYxUTJoRkxFbEJRVWxaTEVsQlFVb3NRMEZCVTNKRkxFdEJRV2hFTEVOQlFXWTdRVUZEUVhsRExGbEJRVTFWTEdkQ1FVRk9MRU5CUVhWQ2MwVXNWVUZCZGtJc1NVRkJjVU5MTEZGQlFYSkRPenRCUVVWQlNTeHBRa0ZCVnl4WlFVRk5PMEZCUTJZN1FVRkRRWHBHTEdOQlFVMWhMRWxCUVU0c1EwRkJWMmxDTEZkQlFWZ3NRMEZCZFVJN1FVRkRja0puUXl4alFVRkpPVU1zU1VGQlNUaERMRVZCUkdFc1JVRkRWQzlHTEUxQlFVMHNWVUZFUnl4RlFVTlRlVVFzVFVGQlRWSXNTVUZCU1ZVc1JVRkVia0lzUlVGRGRVSkJMRWxCUVVsV0xFbEJRVWxSTEVsQlJDOUNPMEZCUlhKQ1NTeG5Ra0ZCVFN4RlFVRkZTU3hOUVVGTkxFZEJRVklzUlVGQllUQkVMRkZCUVZFeFJpeE5RVUZOZVVJc1RVRkJNMEk3UVVGR1pTeFRRVUYyUWp0QlFVbEVMRTlCVGtRN08wRkJVVUVzVlVGQlNYQkNMRkZCUVZFN1FVRkRWblJETEdOQlFVMXBSQ3hKUVVGSmFrUXNTVUZFUVR0QlFVVldlVVFzWTBGQlRWSXNTVUZCU1ZFc1NVRkdRVHRCUVVkV2NFVXNZVUZCU3pSRUxFbEJRVWxWTEVWQlNFTTdRVUZKVm01RkxHVkJRVTk1UkN4SlFVRkpXU3hKUVVGS0xFTkJRVk55UlN4TFFVcE9PMEZCUzFacFJDeHBRa0ZCVTNkRkxGVkJURU03UVVGTlZpOUhMR3RDUVVGVkswTXNTVUZCU1Zrc1NVRkJTaXhEUVVGVE0wUTdRVUZPVkN4UFFVRmFPenRCUVZOQkxGVkJRVWtyUWl4TlFVRk5kMFlzY1VKQlFWWXNSVUZCYVVNN1FVRkRMMEowU0N4blFrRkJVU3RETEVkQlFWSXNRMEZCV1N4elFrRkJXaXhGUVVGdlExb3NTMEZCY0VNN1FVRkRRVXdzWTBGQlRYZEdMSEZDUVVGT0xFTkJRVFJDYmtZc1MwRkJOVUk3UVVGRFJEdEJRVU5HT3p0QlFVVkVPenM3T3poQ1FVTlZRU3hMTEVWQlFVOXpSaXhUTEVWQlFWYzdRVUZETVVJc1ZVRkJTVE5HTEZGQlFWRXNTVUZCV2pzN1FVRkZRVUVzV1VGQlRVTXNVVUZCVGpzN1FVRkZRU3hWUVVGSlJDeE5RVUZOYjBVc1QwRkJUaXhMUVVGclFpeEpRVUYwUWl4RlFVRTBRanRCUVVNeFFqdEJRVU5CTEZsQlFVbDNRaXhaUVVGWk8wRkJRMlEzU0N4blFrRkJUU3hSUVVSUkxFVkJRMFY1UkN4TlFVRk5lRUlzVFVGQlRXVXNTVUZFWkN4RlFVTnZRbGNzU1VGQlNURkNMRTFCUVUxbExFbEJRVTRzUjBGQllTeFZRVVJ5UXp0QlFVVmtZU3huUWtGQlRTeEZRVUZGYlVNc1UwRkJVeTlFTEUxQlFVMURMRkZCUVdwQ0xFVkJRVEpDZVVZc1VVRkJVVEZHTEUxQlFVMTVRaXhOUVVGNlF5eEZRVUZwUkc5RkxGZEJRVmQ0Uml4TlFVRk5hVU1zUzBGQmJFVTdRVUZHVVN4VFFVRm9RanM3UVVGTFFYQkZMR2RDUVVGUkswTXNSMEZCVWl4RFFVRlpMRFpDUVVGYUxFVkJRVEpEV2l4TFFVRXpReXhGUVVGclJITkdMRk5CUVd4RUxFVkJRVFpFUXl4VFFVRTNSRHM3UVVGRlFTeFpRVUZKZGtZc1RVRkJUWGxHTEV0QlFVNHNTMEZCWjBJc2QwSkJRVmRETEUxQlFTOUNMRVZCUVhWRE8wRkJRM0pETEdOQlFVa3hSaXhOUVVGTk1rWXNTMEZCVGl4TFFVRm5RaXgzUWtGQlYwTXNUVUZCTDBJc1JVRkJkVU03UVVGRGNrTk1MSE5DUVVGVmFFVXNTVUZCVml4RFFVRmxja1VzUzBGQlppeEhRVUYxUWpoRExFMUJRVTFPTEVsQlFUZENPMEZCUTBRN1FVRkRSaXhUUVVwRUxFMUJTVTg3UVVGRFREWkdMRzlDUVVGVmFFVXNTVUZCVml4RFFVRmxjMFVzWVVGQlppeEhRVUVyUWpkR0xFMUJRVTE1Uml4TFFVRnlRenRCUVVOQlJpeHZRa0ZCVldoRkxFbEJRVllzUTBGQlpYSkZMRXRCUVdZc1IwRkJkVUk0UXl4TlFVRk5UaXhKUVVFM1FqdEJRVU5CTEdOQlFVbE5MRTFCUVUweVJpeExRVUZPTEV0QlFXZENMSGRDUVVGWFJ5eE5RVUV2UWl4RlFVRjFRenRCUVVOeVExQXNjMEpCUVZWb1JTeEpRVUZXTEVOQlFXVjNSU3hUUVVGbUxFZEJRVEpDTDBZc1RVRkJUVEpHTEV0QlFXcERPMEZCUTBRN1FVRkRSanM3UVVGRlJEdEJRVU5CTEZsQlFVbE1MRk5CUVVvc1JVRkJaVHRCUVVOaVF5eHZRa0ZCVld4RkxFVkJRVllzUjBGQlpXbEZMRlZCUVZWS0xFbEJRWHBDTzBGQlEwRkxMRzlDUVVGVmFFVXNTVUZCVml4RFFVRmxReXhSUVVGbUxFZEJRVEJDT0VRc1ZVRkJWVzVHTEU5QlFYQkRPMEZCUTBRN08wRkJSVVJTTEdOQlFVMWhMRWxCUVU0c1EwRkJWMmxDTEZkQlFWZ3NRMEZCZFVJNFJDeFRRVUYyUWp0QlFVTkVPMEZCUTBZN08wRkJSVVE3T3pzN2EwTkJRMk5UTEU4c1JVRkJVM0pHTEVjc1JVRkJTenRCUVVNeFFpeFZRVUZKYUVJc1VVRkJVU3hKUVVGYU96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJMRlZCUVVsQkxFMUJRVTFETEZGQlFVNHNSMEZCYVVJc1EwRkJha0lzUzBGQmRVSmxMRWxCUVVsWkxFbEJRVW9zUTBGQlUyMURMRTlCUVhCRExFVkJRVFpETzBGQlF6TkRMMFFzWTBGQlRVTXNVVUZCVGp0QlFVTkJMRmxCUVVselJpeFBRVUZQZGtVc1NVRkJTVmtzU1VGQlNpeERRVUZUYVVVc1UwRkJjRUk3UVVGRFFTeFpRVUZKZEVrc1VVRkJVU3h6UWtGQlZYbEVMRWxCUVVsWkxFbEJRVW9zUTBGQlUzSkZMRXRCUVc1Q0xFTkJRVm83UVVGRFFTeFpRVUZKSzBrc1lVRkJZVVFzVVVGQlVVVXNWVUZCVWl4RFFVRnRRbWhDTEVsQlFXNUNMRU5CUVdwQ096dEJRVVZCTEZsQlFVbDJSU3hKUVVGSldTeEpRVUZLTEVOQlFWTnpSU3hoUVVGVUxFdEJRVEpDTEhkQ1FVRlhUU3hMUVVFeFF5eEZRVUZwUkR0QlFVTXZReXhqUVVGSmVFWXNTVUZCU1Zrc1NVRkJTaXhEUVVGVGQwVXNVMEZCVkN4TFFVRjFRaXgzUWtGQlYwc3NSMEZCZEVNc1JVRkJNa003UVVGRGVrTXNaMEpCUVVsRExFMUJRVTFLTEZkQlFWZDZTQ3hIUVVGeVFqdEJRVU5CTEdkQ1FVRkpPRWdzVVVGQlVVd3NWMEZCVjAwc1NVRkJka0k3UVVGRFFVTXNhMEpCUVUxRExGTkJRVTRzUTBGQlowSkRMRTFCUVdoQ0xFTkJRWFZDUXl4TFFVRjJRaXhEUVVFMlFrNHNSMEZCTjBJc1JVRkJhME1zUTBGQlEwTXNTMEZCUkN4RlFVRlJMRU5CUVZJc1JVRkJWMDBzVFVGQldDeERRVUZyUWpGS0xFdEJRV3hDTEVOQlFXeERPMEZCUTBRc1YwRktSQ3hOUVVsUExFbEJRVWw1UkN4SlFVRkpXU3hKUVVGS0xFTkJRVk4zUlN4VFFVRlVMRXRCUVhWQ0xIZENRVUZYU0N4TlFVRjBReXhGUVVFNFF6dEJRVU51UkN4blFrRkJTVk1zVDBGQlRVb3NWMEZCVjNwSUxFZEJRWEpDTzBGQlEwRXNaMEpCUVVrNFNDeFRRVUZSVEN4WFFVRlhUU3hKUVVGMlFqdEJRVU5CUml4cFFrRkJTVXNzVFVGQlNpeERRVUZYU2l4TlFVRllMRVZCUVd0Q2NFb3NTMEZCYkVJN1FVRkRSQ3hYUVVwTkxFMUJTVUU3UVVGRFRDdEpMSFZDUVVGWGVrZ3NSMEZCV0N4RFFVRmxlVWdzVjBGQlYwMHNTVUZCTVVJc1NVRkJhME55U2l4TFFVRnNReXhEUVVSTExFTkJRMjlETzBGQlF6RkRPMEZCUTBZc1UwRmFSQ3hOUVZsUE8wRkJRMHdzWTBGQlNYbEVMRWxCUVVsWkxFbEJRVW9zUTBGQlUzSkZMRXRCUVdJc1JVRkJiMEk3UVVGRGJFSXJTU3gxUWtGQlYzcElMRWRCUVZnc1EwRkJaWGxJTEZkQlFWZE5MRWxCUVRGQ0xFbEJRV3REY2tvc1MwRkJiRU1zUTBGRWEwSXNRMEZEZFVJN1FVRkRNVU1zVjBGR1JDeE5RVVZQTzBGQlEwd3NiVUpCUVU4clNTeFhRVUZYZWtnc1IwRkJXQ3hEUVVGbGVVZ3NWMEZCVjAwc1NVRkJNVUlzUTBGQlVDeERRVVJMTEVOQlEyMURPMEZCUTNwRE8wRkJRMFk3UVVGRFJpeFBRWHBDUkN4TlFYbENUenRCUVVOTU8wRkJRMEV4U1N4blFrRkJVU3RETEVkQlFWSXNRMEZCV1N4elEwRkJjME5xUWl4TlFVRk5ReXhSUVVFMVF5eEhRVUYxUkN4WFFVRjJSQ3hIUVVGeFJXVXNTVUZCU1Zrc1NVRkJTaXhEUVVGVGJVTXNUMEZCT1VVc1IwRkJkMFlzUjBGQmNFYzdRVUZEUkR0QlFVTkdPenRCUVVWRU96czdPMjlEUVVOblFpOURMRWNzUlVGQlN6dEJRVU51UWl4VlFVRkphRUlzVVVGQlVTeEpRVUZhTzBGQlEwRTVRaXhqUVVGUkswTXNSMEZCVWl4RFFVRlpMRzFDUVVGYUxFVkJRV2xEYWtJc1RVRkJUWGxDTEUxQlFYWkRMRVZCUVN0RFZDeEhRVUV2UXpzN1FVRkZRU3hWUVVGSlVpeFZRVUZWVVN4SlFVRkpXU3hKUVVGS0xFTkJRVk5ETEZGQlFYWkNPMEZCUTBFc1ZVRkJTV3RFTEZkQlFWY3ZSU3hOUVVGTlZTeG5Ra0ZCVGl4RFFVRjFRa1lzVDBGQmRrSXNRMEZCWmpzN1FVRkZRU3hWUVVGSmRVVXNVVUZCU2l4RlFVRmpPMEZCUTFvdlJTeGpRVUZOYTBJc1lVRkJUaXhEUVVGdlFqWkVMRk5CUVZNMVJTeFJRVUUzUWl4RlFVRjFRMkVzUjBGQmRrTTdRVUZEUkN4UFFVWkVMRTFCUlU4N1FVRkRURGxETEdkQ1FVRlJLME1zUjBGQlVpeERRVUZaTEhsQ1FVRmFMRVZCUVhWRFZDeFBRVUYyUXp0QlFVTkVPMEZCUTBZN096dDNRa0YwVGxNN1FVRkJSU3hoUVVGUExFdEJRVXRQTEVsQlFWbzdRVUZCYlVJN08wRkJSUzlDT3pzN096czdPM2RDUVVsaE8wRkJRVVVzWVVGQlR5eExRVUZMYVVNc1QwRkJXanRCUVVGelFqczdRVUZGY2tNN096czdPenM3ZDBKQlNXRTdRVUZCUlN4aFFVRlBMRXRCUVV0dlFpeFBRVUZhTzBGQlFYTkNPenRCUVVWeVF6czdPenM3T3p0M1FrRkpWenRCUVVGRkxHRkJRVThzUzBGQlMycEZMRkZCUVV3c1EwRkJZMG9zU1VGQmNrSTdRVUZCTkVJN08wRkJSWHBET3pzN096czdPM2RDUVVsblFqdEJRVUZGTEdGQlFVOHNTMEZCUzFjc1owSkJRVm83UVVGQkswSTdPenRMUVhwSmJrUTdPenM3T3pzN096czdPenM3T3pzN096czdPenM3TzJ0Q1FUSlZaWGxFTEZVN096czdPenM3T3pzN096czdPenM3T3pzN096czdRVU53VkdZN096czdPenRCUVVWQk96czdPMGxCU1UwclF5eGxMRU5CUVdkQ0xESkNPMEZCUTNCQ096czdPenRCUVUxQk96czdPMEZCU1VFc01rSkJRVmxETEUxQlFWb3NSVUZCYjBJelJ5eFBRVUZ3UWl4RlFVRTJRbG9zVjBGQk4wSXNSVUZCTUVOM1NDeExRVUV4UXl4RlFVRnBSR2hETEV0QlFXcEVMRVZCUVhkRU8wRkJRVUU3TzBGQlEzUkVMRkZCUVVsd1JpeFJRVUZSTEVsQlFWbzdPMEZCUlVGQkxGVkJRVTF4U0N4UFFVRk9MRWRCUVdkQ1JpeE5RVUZvUWp0QlFVTkJia2dzVlVGQlRYTkZMRkZCUVU0c1IwRkJhVUk1UkN4UFFVRnFRanRCUVVOQlVpeFZRVUZOZVVJc1RVRkJUaXhIUVVGbE1rWXNTMEZCWmp0QlFVTkJjRWdzVlVGQlRYTklMRTFCUVU0c1IwRkJaV3hETEV0QlFXWTdPMEZCUlVGd1JpeFZRVUZOUnl4UlFVRk9MRWRCUVdsQ0xEQkNRVUZsVUN4WFFVRm1MRU5CUVdwQ096dEJRVVZCU1N4VlFVRk5ZU3hKUVVGT0xFZEJRV0Z6Unl4UFFVRlBkRWNzU1VGQmNFSTdRVUZEUVdJc1ZVRkJUVmNzYTBKQlFVNDdRVUZEUkRzN096dDVRMEZGYjBJN1FVRkRia0lzVlVGQlNWZ3NVVUZCVVN4SlFVRmFPenRCUVVWQk8wRkJRMEVzVlVGQlNVRXNUVUZCVFhsQ0xFMUJRVllzUlVGQmEwSTdRVUZEYUVKNlFpeGpRVUZOZFVnc1UwRkJUaXhIUVVGclFuWklMRTFCUVUxaExFbEJRVTRzUTBGQlYwTXNWMEZCV0N4RFFVRjFRbVFzVFVGQlRYbENMRTFCUVRkQ0xFVkJRWEZETEZWQlFVTlVMRWRCUVVRc1JVRkJVenRCUVVNNVJDeGpRVUZKUVN4SlFVRkpha1FzU1VGQlNpeExRVUZoTEZWQlFXSXNTVUZCTWtKcFJDeEpRVUZKT0VNc1JVRkJTaXhMUVVGWE9VUXNUVUZCVFhOSUxFMUJRV2hFTEVWQlFYZEVPMEZCUTNSRWNFb3NiMEpCUVZFclF5eEhRVUZTTEVOQlFWa3NOa0pCUVZvc1JVRkJNa05FTEVkQlFUTkRPMEZCUTBGb1FpeHJRa0ZCVFRKRExGZEJRVTRzUTBGQmEwSXpRaXhIUVVGc1FqdEJRVU5FTzBGQlEwWXNVMEZNYVVJc1EwRkJiRUk3UVVGTlJEdEJRVU5HT3pzN2QwTkJSVzFDTzBGQlEyeENMRlZCUVVsb1FpeFJRVUZSTEVsQlFWbzdPMEZCUlVFc1ZVRkJTVUVzVFVGQlRYVklMRk5CUVZZc1JVRkJjVUk3UVVGRGJrSjJTQ3hqUVVGTmRVZ3NVMEZCVGl4RFFVRm5RbkJITEUxQlFXaENPMEZCUTBRN1FVRkRSanM3UVVGRlJEczdPenM3T3poQ1FVZFRPMEZCUTFBc1ZVRkJTVzVDTEZGQlFWRXNTVUZCV2pzN1FVRkZRU3hoUVVGUFFTeE5RVUZOY1Vnc1QwRkJUaXhEUVVGalJ5eFRRVUZrTEVOQlFYZENlRWdzVFVGQlRYTkZMRkZCUVRsQ0xFTkJRVkE3TzBGQlJVRjBSU3haUVVGTmIwSXNhVUpCUVU0N08wRkJSVUU3UVVGRFJEczdRVUZGUkRzN096czdPenM3TzBGQldVRTdPenM3TmtKQlNWTmpMRkVzUlVGQlZUdEJRVU5xUWl4WFFVRkxMMElzVVVGQlRDeERRVUZqUXl4UFFVRmtMRU5CUVhOQ0xGVkJRVU5ETEV0QlFVUXNSVUZCVnp0QlFVTXZRalpDTEdsQ1FVRlROMElzUzBGQlZEdEJRVU5FTEU5QlJrUTdRVUZIUkRzN1FVRkZSRHM3T3pzN096c3JRa0ZKVnpaQ0xGRXNSVUZCVlR0QlFVTnVRaXhYUVVGTGJVSXNhMEpCUVV3c1IwRkJNRUp1UWl4UlFVRXhRanRCUVVORU96dEJRVVZFT3pzN08yZERRVU5aYkVJc1J5eEZRVUZMTzBGQlEyWXNWVUZCU1doQ0xGRkJRVkVzU1VGQldqczdRVUZGUVN4VlFVRkpTeXhSUVVGUk8wRkJRMVowUXl4alFVRk5hVVFzU1VGQlNXcEVMRWxCUkVFN1FVRkZWbGdzWVVGQlN6UkVMRWxCUVVsWkxFbEJRVW9zUTBGQlV6aEVMRTFCUmtvN1FVRkhWakZFTEdOQlFVMW9RaXhKUVVGSldTeEpRVUZLTEVOQlFWTkpPMEZCU0V3c1QwRkJXanM3UVVGTlFTeFZRVUZKYUVNc1RVRkJUWEZFTEd0Q1FVRldMRVZCUVRoQ08wRkJRelZDY2tRc1kwRkJUWEZFTEd0Q1FVRk9MRU5CUVhsQ2FFUXNTMEZCZWtJN1FVRkRSRHRCUVVOR096czdkMEpCZGtOaE8wRkJRVVVzWVVGQlR5eExRVUZMYVVVc1VVRkJXanRCUVVGMVFqczdRVUZGZGtNN096czdPenM3ZDBKQlNWYzdRVUZCUlN4aFFVRlBMRXRCUVV0dVJTeFJRVUZNTEVOQlFXTktMRWxCUVhKQ08wRkJRVFJDT3pzN1MwRnVSek5ET3pzN096czdPenM3T3pzN096czdPenM3T3pzN096dHJRa0YzU1dWdFNDeGxPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdRVU40U1dZN096czdRVUZGUVRzN096czdTVUZMVFU4c1ZUdEJRVVZLTEhOQ1FVRlpOMGdzVjBGQldpeEZRVUY1UWp0QlFVRkJPenRCUVVOMlFpeFJRVUZKU1N4UlFVRlJMRWxCUVZvN08wRkJSVUZCTEZWQlFVMXpRaXhWUVVGT0xFZEJRVzFDTEVWQlFXNUNPMEZCUTBGMFFpeFZRVUZOUlN4UlFVRk9MRWRCUVdsQ0xFVkJRV3BDT3p0QlFVVkJMRk5CUVV0M1NDeExRVUZNTEVkQlFXRTVTQ3hsUVVGbExFVkJRVFZDT3p0QlFVVkJMRk5CUVVzclNDeG5Ra0ZCVEN4RFFVRnpRaXhMUVVGTFJDeExRVUV6UWp0QlFVTkVPenM3T3pSQ1FVbFBlRVlzVVN4RlFVRlZPMEZCUTJoQ0xGZEJRVXRhTEZWQlFVd3NRMEZCWjBKM1JDeEpRVUZvUWl4RFFVRnhRalZETEZGQlFYSkNPMEZCUTBRN096dDVRa0ZGU1hGRUxFa3NSVUZCVFR0QlFVTlVMRlZCUVVseFF5eFBRVUZQY2tNc1MwRkJTek5JTEV0QlFVd3NRMEZCVnl4SFFVRllMRU5CUVZnN08wRkJSVUVzWVVGQlR5eExRVUZMYVVzc1kwRkJUQ3hEUVVGdlFrUXNTVUZCY0VJc1EwRkJVRHRCUVVORU96czdLMEpCUlZWeVF5eEpMRVZCUVUwN1FVRkRaaXhWUVVGSmVrZ3NVMEZCVXl4RlFVRmlPMEZCUTBFc1ZVRkJTVGhLTEU5QlFVOXlReXhMUVVGTE0wZ3NTMEZCVEN4RFFVRlhMRWRCUVZnc1EwRkJXRHRCUVVOQlJTeGhRVUZQT0Vrc1NVRkJVQ3hIUVVGalowSXNTMEZCUzBVc1IwRkJUQ3hGUVVGa08wRkJRMEZvU3l4aFFVRlBaU3hIUVVGUUxFZEJRV0VzUzBGQlMyZEtMR05CUVV3c1EwRkJiMEpFTEVsQlFYQkNMRU5CUVdJN08wRkJSVUVzWVVGQlR6bEtMRTFCUVZBN1FVRkRSRHM3TzIxRFFVVmpPRW9zU1N4RlFVRk5PMEZCUTI1Q0xGVkJRVWt2U1N4TlFVRk5MRXRCUVVzMlNTeExRVUZtTzBGQlEwRkZMRmRCUVV0eVNDeFBRVUZNTEVOQlFXRXNWVUZCUTJoRUxFdEJRVVFzUlVGQlZ6dEJRVU4wUW5OQ0xHTkJRVTFCTEVsQlFVbDBRaXhMUVVGS0xFTkJRVTQ3UVVGRFJDeFBRVVpFT3p0QlFVbEJMR0ZCUVU5elFpeEhRVUZRTzBGQlEwUTdPenRyUTBGRllVRXNSeXhGUVVGTE8wRkJRMnBDTEZWQlFVbEJMRWxCUVVsclNpeFhRVUZLTEV0QlFXOUNReXhOUVVGd1FpeEpRVUU0UW01S0xFbEJRVWxyU2l4WFFVRktMRXRCUVc5Q2JFSXNTMEZCZEVRc1JVRkJOa1E3UVVGRE0wUXNaVUZCVHl4SlFVRlFPMEZCUTBRN08wRkJSVVFzWVVGQlR5eExRVUZRTzBGQlEwUTdPenR4UTBGSFowSnFTU3hOTEVWQlFWRTdRVUZCUVRzN1FVRkZka0lzVlVGQlNYRktMRlZCUVZVc1UwRkJWa0VzVDBGQlZTeERRVUZEUXl4VFFVRkVMRVZCUVdVN08wRkJSVE5DUVN4clFrRkJWVE5JTEU5QlFWWXNRMEZCYTBJc1ZVRkJRelJJTEUxQlFVUXNSVUZCV1R0QlFVTTFRaXhqUVVGSlFTeFBRVUZQUXl4UlFVRlFMRWxCUVcxQ1JDeFBRVUZQUXl4UlFVRlFMRmxCUVRKQ1NpeE5RVUZzUkN4RlFVRXdSRHRCUVVONFJDeG5Ra0ZCU1Vjc1QwRkJUME1zVVVGQlVDeFpRVUV5UWtvc1RVRkJMMElzUlVGQmRVTTdRVUZEY2tNc2EwSkJRVWxMTEVsQlFVbE1MRTlCUVU5TkxGZEJRVkFzUTBGQmJVSklMRTlCUVU5RExGRkJRVEZDTEVWQlFXOURTQ3hQUVVGd1F5eERRVUZTTzBGQlEwRnlTaXh4UWtGQlQzVktMRTlCUVU5SkxFOUJRV1FzU1VGQmVVSkdMRU5CUVhwQ08wRkJRMFE3TzBGQlJVUXNaMEpCUVVsR0xFOUJRVTlETEZGQlFWQXNXVUZCTWtKMlFpeExRVUV2UWl4RlFVRnpRenRCUVVOd1F5eHJRa0ZCU1hkQ0xFdEJRVWw0UWl4TlFVRk5la2NzVDBGQlRpeERRVUZqSzBnc1QwRkJUME1zVVVGQmNrSXNSVUZCSzBKSUxFOUJRUzlDTEVOQlFWSTdRVUZEUVhKS0xIRkNRVUZQZFVvc1QwRkJUMGtzVDBGQlpDeEpRVUY1UWtZc1JVRkJla0k3UVVGRFJEdEJRVU5HTzBGQlEwWXNVMEZhUkRzN1FVRmpRVWdzYTBKQlFWVk5MRXRCUVZZc1EwRkJaMElzVlVGQlEwd3NUVUZCUkN4RlFVRlpPMEZCUXpGQ0xHbENRVUZMVFN4VlFVRk1MRU5CUVdkQ1RpeE5RVUZvUWp0QlFVTkVMRk5CUmtRN1FVRkpSQ3hQUVhCQ1JEczdRVUZ6UWtFc1YwRkJTMVFzUzBGQlRDeEhRVUZoVFN4UFFVRlBUU3hYUVVGUUxFTkJRVzFDTVVvc1RVRkJia0lzUlVGQk1rSnhTaXhQUVVFelFpeERRVUZpTzBGQlJVUTdPenNyUWtGRlZUVklMRXNzUlVGQlR6dEJRVU5vUWl4WFFVRkxhVUlzVlVGQlRDeERRVUZuUW1Zc1QwRkJhRUlzUTBGQmQwSXNWVUZCUXpKQ0xGRkJRVVFzUlVGQll6dEJRVU53UTBFc2FVSkJRVk0zUWl4TFFVRlVPMEZCUTBRc1QwRkdSRHRCUVVkRU96czdLMEpCUlZVNFNDeE5MRVZCUVZFN08wRkJSV3BDTEZWQlFVbDBTaXhOUVVGTmMwb3NUMEZCVDNaS0xFMUJRV3BDTzBGQlEwRXNWVUZCU1RoS0xHZENRVUZLT3p0QlFVVkJMRlZCUVVrM1NpeEpRVUZKYTBvc1YwRkJTaXhMUVVGdlFrTXNUVUZCZUVJc1JVRkJaME03UVVGRE9VSlZMR3RDUVVGVlF5eFhRVUZYTlVNc1RVRkJja0k3UVVGRFJEczdRVUZGUkN4VlFVRkpiRWdzU1VGQlNXdEtMRmRCUVVvc1MwRkJiMEpzUWl4TFFVRjRRaXhGUVVFclFqdEJRVU0zUWpaQ0xHdENRVUZWUXl4WFFVRlhia01zUzBGQmNrSTdRVUZEUkRzN1FVRkZSQ3hWUVVGSmIwTXNZMEZCWTFRc1QwRkJUMGtzVDBGQmVrSTdPMEZCUlVFN1FVRkRRVHM3UVVGRlFUdEJRVU5CTEZWQlFVbElMRmRCUVZkMlNpeEpRVUZKYzBvc1QwRkJUMVVzU1VGQldDeERRVUZtT3p0QlFVVkJNMHNzWTBGQlVUUkxMRWxCUVZJc1EwRkJZVmdzVDBGQlQzQkxMRWxCUVZBc1IwRkJZeXhaUVVGa0xFZEJRVFpDTmtzc1YwRkJOMElzUjBGQk1rTXNaVUZCZUVRc1JVRkJlVVVzZVVKQlFXVlNMRkZCUVdZc1EwRkJla1U3TzBGQlJVRXNWVUZCU1VRc1QwRkJUM0JMTEVsQlFWQXNTMEZCWjBJc1VVRkJjRUlzUlVGQk9FSTdRVUZETlVJc1lVRkJTMmRNTEZWQlFVd3NRMEZCWjBJN1FVRkRaQzlETEdsQ1FVRlBaMFFzVjBGQlZ6ZERMRTFCUkVvN1FVRkZaRXdzYVVKQlFVODBReXhQUVVaUE8wRkJSMlJ3Unl4cFFrRkJUM05ITEZkQlNFODdRVUZKWkRkSkxHZENRVUZOY1VrN1FVRktVU3hUUVVGb1FqdEJRVTFFT3p0QlFVVkVMRlZCUVVsRUxFOUJRVTl3U3l4SlFVRlFMRXRCUVdkQ0xFdEJRWEJDTEVWQlFUSkNPMEZCUTNwQ0xHRkJRVXRuVEN4VlFVRk1MRU5CUVdkQ08wRkJRMlF2UXl4cFFrRkJUMmRFTEZkQlFWZDJReXhIUVVSS08wRkJSV1JZTEdsQ1FVRlBORU1zVDBGR1R6dEJRVWRrY0Vjc2FVSkJRVTl6Unl4WFFVaFBPMEZCU1dRM1NTeG5Ra0ZCVFhGSk8wRkJTbEVzVTBGQmFFSTdRVUZOUkRzN1FVRkZSQ3hWUVVGSlJDeFBRVUZQY0Vzc1NVRkJVQ3hMUVVGblFpeFJRVUZ3UWl4RlFVRTRRanRCUVVNMVFpeGhRVUZMWjB3c1ZVRkJUQ3hEUVVGblFqdEJRVU5rTDBNc2FVSkJRVTluUkN4WFFVRlhMME1zVFVGRVNqdEJRVVZrU0N4cFFrRkJUelJETEU5QlJrODdRVUZIWkhCSExHbENRVUZQYzBjN1FVRklUeXhUUVVGb1FqdEJRVXRFTzBGQlEwWTdPenQzUWtGNlNGVTdRVUZCUlN4aFFVRlBMRXRCUVV0c1FpeExRVUZhTzBGQlFXOUNPenM3T3p0QlFUWklOVUlzU1VGQlNYTkNMR3REUVVGaExFVkJRVU0zUXl4UlFVRlJMRkZCUVZRc1JVRkJiVUpOTEV0QlFVc3NTMEZCZUVJc1JVRkJLMEpTTEZGQlFWRXNVVUZCZGtNc1JVRkJha0k3UVVGRFFTeEpRVUZKTUVNc2EwTkJRV0VzUlVGQlF6VkRMRkZCUVZFc1VVRkJWQ3hGUVVGdFFsTXNUMEZCVHl4UFFVRXhRaXhGUVVGcVFqdHJRa0ZEVVdsQ0xGVTdPenM3T3pzN1FVTnVTbVk3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUVzYzBOQlFYTkRMSFZEUVVGMVF5eG5Ra0ZCWjBJN08wRkJSVGRHTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVN4TFFVRkxPMEZCUTB3N1FVRkRRVHRCUVVOQkxFZEJRVWM3UVVGRFNEdEJRVU5CTEVkQlFVYzdRVUZEU0RzN1FVRkZRVHRCUVVOQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJMRVU3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPMEZEWkVFN096czdRVUZEUVRzN096dEJRVU5CT3pzN096czdRVUZGUVRzN096czdTVUZMVFhkQ0xFODdRVUZEU2pzN096czdPenM3T3pzN08wRkJaVUU3T3pzN096dEJRVTFCTEcxQ1FVRlpOMElzUzBGQldpeEZRVUZ0UWpoQ0xFZEJRVzVDTEVWQlFYZENReXhOUVVGNFFpeEZRVUZuUXp0QlFVRkJPenRCUVVNNVFpeFJRVUZKYmtvc1VVRkJVU3hKUVVGYU96dEJRVVZCUVN4VlFVRk5lVUlzVFVGQlRpeEhRVUZsTWtZc1MwRkJaanRCUVVOQmNFZ3NWVUZCVFdFc1NVRkJUaXhIUVVGaGNVa3NSMEZCWWpzN1FVRkZRV3hLTEZWQlFVMHlRaXhQUVVGT0xFZEJRV2RDZDBnc1QwRkJUME1zVlVGQlVDeEhRVUZ2UWl4TFFVRndRenM3UVVGRlFYQktMRlZCUVUxdFJDeFZRVUZPTEVkQlFXMUNMRVZCUVc1Q08wRkJRMEZ1UkN4VlFVRk5jMElzVlVGQlRpeEhRVUZ0UWl4RlFVRnVRanRCUVVOQmRFSXNWVUZCVFhGS0xHRkJRVTRzUjBGQmMwSXNSVUZCZEVJN08wRkJSVUZJTEZGQlFVbHdTU3hYUVVGS0xFTkJRV2RDYzBjc1MwRkJhRUlzUlVGQmRVSXNWVUZCUTNCSExFZEJRVVFzUlVGQlV6dEJRVU01UWp0QlFVTkJMRlZCUVVsQkxFbEJRVWxSTEVsQlFVb3NTMEZCWVRSR0xFdEJRV3BDTEVWQlFYZENPMEZCUTNSQ2JFb3NaMEpCUVZFMFN5eEpRVUZTTEVOQlFXRXNlVUpCUVdJc1JVRkJkME01U0N4SFFVRjRRenRCUVVOQkxHZENRVUZSUVN4SlFVRkpha1FzU1VGQldqdEJRVU5GTEdWQlFVc3NVMEZCVER0QlFVRm5RbWxETEd0Q1FVRk5jMG9zVlVGQlRpeERRVUZwUW5SSkxFZEJRV3BDTEVWQlFYVkNPMEZCUTNaRExHVkJRVXNzVVVGQlREdEJRVUZsYUVJc2EwSkJRVTExU2l4bFFVRk9MRU5CUVhOQ2Rra3NSMEZCZEVJc1JVRkJORUk3UVVGRE0wTXNaVUZCU3l4UlFVRk1PMEZCUVdWb1FpeHJRa0ZCVFhkS0xHVkJRVTRzUTBGQmMwSjRTU3hIUVVGMFFpeEZRVUUwUWp0QlFVZzNRenRCUVV0RU8wRkJRMFlzUzBGV1JEdEJRVmRFT3p0QlFVVkVPenM3T3pzN096czdPMEZCYTBKQk96czdPenM3T3pzeVFrRlJUM1JDTEUwc1JVRkJVVzFFTEZNc1JVRkJWMnBFTEZjc1JVRkJlVU03UVVGQlFTeFZRVUUxUWpaS0xFdEJRVFJDTEhWRlFVRndRaXhMUVVGdlFqdEJRVUZCTEZWQlFXSkRMRWRCUVdFc2RVVkJRVkFzUzBGQlR6czdRVUZEYWtVc1ZVRkJTVEZLTEZGQlFWRXNTVUZCV2p0QlFVTkJMRlZCUVVreVNpeFhRVUZYTEVWQlFXWTdPMEZCUlVGQkxHVkJRVk5FTEVkQlFWUXNSMEZCWlVFc1IwRkJaanRCUVVOQlF5eGxRVUZUUml4TFFVRlVMRWRCUVdsQ1FTeExRVUZxUWp0QlFVTkJSU3hsUVVGVGFrc3NUVUZCVkN4SFFVRnJRa0VzVFVGQmJFSTdRVUZEUVdsTExHVkJRVk01Unl4VFFVRlVMRWRCUVhGQ1FTeFRRVUZ5UWp0QlFVTkJPRWNzWlVGQlV5OUtMRmRCUVZRc1IwRkJkVUpCTEZkQlFYWkNPenRCUVVWQk1VSXNZMEZCVVN0RExFZEJRVklzUTBGQldTeHRSRUZCV2l4RlFVRnBSVEJKTEZGQlFXcEZPenRCUVVWQkxEUkNRVUZqUVN4UlFVRmtMRVZCUVhkQ0xFVkJRVU0xUnl4UlFVRlJMRXRCUVZRc1JVRkJlRUk3TzBGQlJVRXNZVUZCVHk5RExFMUJRVTAwU2l4UFFVRk9MRU5CUVdORUxGRkJRV1FzUTBGQlVEdEJRVU5FT3pzN2IwTkJSV1ZCTEZFc1JVRkJWVHRCUVVONFFpeFZRVUZKTTBvc1VVRkJVU3hKUVVGYU8wRkJRMEU1UWl4alFVRlJLME1zUjBGQlVpeERRVUZaTEcxRVFVRmFMRVZCUVdsRk1Fa3NVVUZCYWtVN08wRkJSVUVzTkVKQlFXTkJMRkZCUVdRc1JVRkJkMElzUlVGQlF6VkhMRkZCUVZFc1NVRkJWQ3hGUVVGNFFqczdRVUZGUVN4aFFVRlBMME1zVFVGQlRUUktMRTlCUVU0c1EwRkJZMFFzVVVGQlpDeERRVUZRTzBGQlEwUTdPMEZCUlVRN096czdPenM3T3pzNFFrRk5WV3BMTEUwc1JVRkJVVzFMTEUwc1JVRkJiME03UVVGQlFTeFZRVUUxUWtvc1MwRkJORUlzZFVWQlFYQkNMRXRCUVc5Q08wRkJRVUVzVlVGQllrTXNSMEZCWVN4MVJVRkJVQ3hMUVVGUE96dEJRVU53UkN4VlFVRkpNVW9zVVVGQlVTeEpRVUZhTzBGQlEwRXNWVUZCU1RKS0xGZEJRVmNzUlVGQlpqczdRVUZGUVVFc1pVRkJVMFFzUjBGQlZDeEhRVUZsUVN4SFFVRm1PMEZCUTBGRExHVkJRVk5HTEV0QlFWUXNSMEZCYVVKQkxFdEJRV3BDTzBGQlEwRkZMR1ZCUVZOcVN5eE5RVUZVTEVkQlFXdENRU3hOUVVGc1FqdEJRVU5CYVVzc1pVRkJVemxJTEZGQlFWUXNSMEZCYjBKblNTeE5RVUZ3UWpzN1FVRkZRVE5NTEdOQlFWRXJReXhIUVVGU0xFTkJRVmtzT0VOQlFWb3NSVUZCTkVRd1NTeFJRVUUxUkRzN1FVRkZRU3cwUWtGQlkwRXNVVUZCWkN4RlFVRjNRaXhGUVVGRE5VY3NVVUZCVVN4TFFVRlVMRVZCUVhoQ096dEJRVVZCTEdGQlFVOHZReXhOUVVGTk9Fb3NWVUZCVGl4RFFVRnBRa2dzVVVGQmFrSXNRMEZCVUR0QlFVTkVPenRCUVVWRU96czdPenM3T3p0dlEwRkxaMEpCTEZFc1JVRkJWVHRCUVVONFFpeFZRVUZKTTBvc1VVRkJVU3hKUVVGYU8wRkJRMEVzVlVGQlNTdEtMRmxCUVZsS0xGbEJRVmtzUlVGQk5VSTdPMEZCUlVFc05FSkJRV05KTEZOQlFXUXNSVUZCZVVJc1JVRkJRMmhJTEZGQlFWRXNTVUZCVkN4RlFVRjZRanM3UVVGRlFTeGhRVUZQTDBNc1RVRkJUVGhLTEZWQlFVNHNRMEZCYVVKRExGTkJRV3BDTEVOQlFWQTdRVUZEUkRzN1FVRkZSRHM3T3pzN096czdlVUpCUzB0R0xFMHNSVUZCVVR0QlFVTllMRlZCUVVrM1NpeFJRVUZSTEVsQlFWbzdPMEZCUlVFN1FVRkRRVHRCUVVOQkxGVkJRVWxuU3l4VlFVRlZPMEZCUTFwcVRTeGpRVUZOTEUxQlJFMHNSVUZEUlhsRUxFMUJRVTE0UWl4TlFVRk5lVUlzVFVGRVpDeEZRVU56UWtNc1NVRkJTVzFKTzBGQlJERkNMRTlCUVdRN08wRkJTVUVzWVVGQlR5eHpRa0ZCV1N4VlFVRkRNVVVzVDBGQlJDeEZRVUZWYmtJc1RVRkJWaXhGUVVGeFFqdEJRVU4wUTJoRkxHTkJRVTFoTEVsQlFVNHNRMEZCVjJsQ0xGZEJRVmdzUTBGQmRVSnJTU3hQUVVGMlFpeEZRVUZuUXl4VlFVRkRha2tzUzBGQlJDeEZRVUZYTzBGQlEzcEROMFFzYTBKQlFWRXJReXhIUVVGU0xFTkJRVmtzYVVKQlFWb3NSVUZCSzBKakxFdEJRUzlDTzBGQlEwRXNZMEZCU1VFc1RVRkJUVWdzU1VGQlRpeERRVUZYU1N4SlFVRllMRXRCUVc5Q0xFZEJRWGhDTEVWQlFUWkNPMEZCUXpOQ2JVUXNiMEpCUVZGd1JDeE5RVUZOU0N4SlFVRk9MRU5CUVZkeVJTeExRVUZ1UWp0QlFVTkVMRmRCUmtRc1RVRkZUenRCUVVOTWVVY3NiVUpCUVU5cVF5eE5RVUZOU0N4SlFVRk9MRU5CUVZkelF5eEpRVUZzUWp0QlFVTkVPMEZCUTBZc1UwRlFSRHRCUVZGRUxFOUJWRTBzUTBGQlVEdEJRVlZFT3p0QlFVVkVPenM3T3pzN096dHRRMEZMWldoRExGRXNSVUZCVlR0QlFVTjJRaXhYUVVGTEswZ3NjMEpCUVV3c1IwRkJPRUl2U0N4UlFVRTVRanRCUVVORU96czdORUpCUlU5NVNDeFJMRVZCUVZVN1FVRkRhRUlzVlVGQlNUTktMRkZCUVZFc1NVRkJXanM3UVVGRlFTeGhRVUZQTEhOQ1FVRlpMRlZCUVVOdFJpeFBRVUZFTEVWQlFWVnVRaXhOUVVGV0xFVkJRWEZDTzBGQlEzUkRMRmxCUVVscVFpeFRRVUZUTkVjc1UwRkJVelZITEUxQlFYUkNPMEZCUTBFc1dVRkJTVzVFTEdOQlFXTXJTaXhUUVVGVEwwb3NWMEZCVkN4SlFVRjNRaXhGUVVFeFF6dEJRVU5CTEZsQlFVbEdMR1ZCUVVvN08wRkJSVUU3UVVGRFFTeFpRVUZKZDBZc1lVRkJZVHRCUVVObWJrZ3NaMEpCUVUwc1VVRkVVeXhGUVVORGVVUXNUVUZCVFhoQ0xFMUJRVTE1UWl4TlFVUmlMRVZCUTNGQ1F5eEpRVUZKTVVJc1RVRkJUVEpDTEU5QlJDOUNPMEZCUldaRExHZENRVUZOTEVWQlFVVnRRaXhSUVVGUlFTeE5RVUZXTzBGQlJsTXNVMEZCYWtJN08wRkJTMEUzUlN4blFrRkJVU3RETEVkQlFWSXNRMEZCV1N4elFrRkJXaXhGUVVGdlF6QkpMRkZCUVhCRExFVkJRVGhEZWtVc1ZVRkJPVU03TzBGQlJVRkJMRzFDUVVGWGRFUXNTVUZCV0N4RFFVRm5RbkpGTEV0QlFXaENMRWRCUVhkQ2NVTXNWMEZCZUVJN1FVRkRRWE5HTEcxQ1FVRlhkRVFzU1VGQldDeERRVUZuUW5KRkxFdEJRV2hDTEVOQlFYTkNNazBzVVVGQmRFSXNSMEZCYVVOc1N5eE5RVUZOZVVJc1RVRkJka003TzBGQlJVRXNXVUZCU1d0SkxGTkJRVk5xU3l4TlFVRmlMRVZCUVhGQ08wRkJRMjVDUVN4dFFrRkJVMmxMTEZOQlFWTnFTeXhOUVVGc1FqdEJRVU5CZDBZc2NVSkJRVmQwUkN4SlFVRllMRU5CUVdkQ2JFTXNUVUZCYUVJc1IwRkJlVUpwU3l4VFFVRlRha3NzVFVGQmJFTTdRVUZEUkRzN1FVRkZSQ3haUVVGSmFVc3NVMEZCVTBRc1IwRkJZaXhGUVVGclFuaEZMRmRCUVZkMFJDeEpRVUZZTEVOQlFXZENPRWdzUjBGQmFFSXNSMEZCYzBKRExGTkJRVk5FTEVkQlFTOUNPMEZCUTJ4Q0xGbEJRVWxETEZOQlFWTkdMRXRCUVdJc1JVRkJiMEoyUlN4WFFVRlhkRVFzU1VGQldDeERRVUZuUWpaSUxFdEJRV2hDTEVkQlFYZENSU3hUUVVGVFJpeExRVUZxUXp0QlFVTndRaXhaUVVGSlJTeFRRVUZUT1Vjc1UwRkJZaXhGUVVGM1FuRkRMRmRCUVZkMFJDeEpRVUZZTEVOQlFXZENjVUlzVTBGQmFFSXNSMEZCTkVJd1J5eFRRVUZUT1Vjc1UwRkJja003TzBGQlJYaENMRmxCUVVsRkxFMUJRVW9zUlVGQldUdEJRVU5XTjBVc2EwSkJRVkVyUXl4SFFVRlNMRU5CUVZrc2RVTkJRVm9zUlVGQmNVUnBSU3hWUVVGeVJEdEJRVU5FTEZOQlJrUXNUVUZGVHp0QlFVTk1hRWdzYTBKQlFWRXJReXhIUVVGU0xFTkJRVmtzZFVOQlFWb3NSVUZCY1VScFJTeFZRVUZ5UkR0QlFVTkVPenRCUVVWRU8wRkJRMEZzUml4alFVRk5ZU3hKUVVGT0xFTkJRVmRwUWl4WFFVRllMRU5CUVhWQ2IwUXNWVUZCZGtJc1JVRkJiVU1zVlVGQlEyNUVMRXRCUVVRc1JVRkJWenRCUVVNMVF6ZEVMR3RDUVVGUkswTXNSMEZCVWl4RFFVRlpMSGREUVVGYUxFVkJRWE5FWXl4TFFVRjBSRHRCUVVOQkxHTkJRVWxCTEUxQlFVMUlMRWxCUVU0c1EwRkJWMGtzU1VGQldDeExRVUZ2UWl4SFFVRjRRaXhGUVVFMlFqdEJRVU16UWp0QlFVTkJMR2RDUVVGSk5rZ3NVMEZCVXpsSUxFMUJRVTFJTEVsQlFVNHNRMEZCVjBNc1VVRkJlRUk3TzBGQlJVRXNaMEpCUVVsclFpeE5RVUZLTEVWQlFWazdRVUZEVm5KRUxIVkNRVUZUY1VNc1RVRkJUVWdzU1VGQlRpeERRVUZYYkVNc1RVRkJjRUk3UVVGRFFVVXNORUpCUVdOdFF5eE5RVUZOU0N4SlFVRk9MRU5CUVZkeVJTeExRVUY2UWp0QlFVTkVPenRCUVVWRUxHZENRVUZKTkUwc1UwRkJVeXhwUTBGQmRVSnVTeXhMUVVGMlFpeEZRVUU0UWpaS0xFMUJRVGxDTEVWQlFYTkRia3NzVFVGQmRFTXNSVUZCT0VNc1NVRkJPVU1zUlVGQmIwUkZMRmRCUVhCRUxFVkJRV2xGYlVNc1RVRkJUVWdzU1VGQlRpeERRVUZYZDBrc2FVSkJRVFZGTEVOQlFXSTdRVUZEUVhCTExHdENRVUZOYlVRc1ZVRkJUaXhEUVVGcFFqQkhMRTFCUVdwQ0xFbEJRVEpDVFN4TlFVRXpRanM3UVVGRlFXaEdMRzlDUVVGUlowWXNUVUZCVWp0QlFVTkVMRmRCWWtRc1RVRmhUenRCUVVOTU8wRkJRMEZ1Unl4dFFrRkJUMnBETEUxQlFVMUlMRWxCUVU0c1EwRkJWM05ETEVsQlFXeENPMEZCUTBRN1FVRkRSaXhUUVc1Q1JEdEJRVzlDUkN4UFFYQkVUU3hEUVVGUU8wRkJjMFJFT3pzN0swSkJSVlY1Uml4UkxFVkJRVlU3UVVGRGJrSXNWVUZCU1ROS0xGRkJRVkVzU1VGQldqczdRVUZGUVN4aFFVRlBMSE5DUVVGWkxGVkJRVU50Uml4UFFVRkVMRVZCUVZWdVFpeE5RVUZXTEVWQlFYRkNPenRCUVVWMFF6dEJRVU5CTEZsQlFVbHhSeXhsUVVGbE8wRkJRMnBDZEUwc1owSkJRVTBzVjBGRVZ5eEZRVU5GZVVRc1RVRkJUWGhDTEUxQlFVMTVRaXhOUVVSa0xFVkJRM05DUXl4SlFVRkpNVUlzVFVGQlRUSkNMRTlCUkdoRE8wRkJSV3BDUXl4blFrRkJUVHRCUVVaWExGTkJRVzVDT3p0QlFVdEJPMEZCUTBFN08wRkJSVUU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFc1dVRkJTU3RJTEZGQlFVb3NSVUZCWXp0QlFVTmFMR05CUVVsQkxGTkJRVk5FTEVkQlFXSXNSVUZCYTBKWExHRkJRV0Y2U1N4SlFVRmlMRU5CUVd0Q09FZ3NSMEZCYkVJc1IwRkJkMEpETEZOQlFWTkVMRWRCUVdwRE8wRkJRMnhDTEdOQlFVbERMRk5CUVZOR0xFdEJRV0lzUlVGQmIwSlpMR0ZCUVdGNlNTeEpRVUZpTEVOQlFXdENOa2dzUzBGQmJFSXNSMEZCTUVKRkxGTkJRVk5HTEV0QlFXNURPMEZCUTNCQ0xHTkJRVWxGTEZOQlFWTnFTeXhOUVVGaUxFVkJRWEZDTWtzc1lVRkJZWHBKTEVsQlFXSXNRMEZCYTBKc1F5eE5RVUZzUWl4SFFVRXlRbWxMTEZOQlFWTnFTeXhOUVVGd1F6dEJRVU55UWl4alFVRkphVXNzVTBGQlV6Rk1MRkZCUVdJc1JVRkJkVUp2VFN4aFFVRmhla2tzU1VGQllpeERRVUZyUWpORUxGRkJRV3hDTEVkQlFUWkNNRXdzVTBGQlV6Rk1MRkZCUVhSRE8wRkJRM1pDTEdOQlFVa3dUQ3hUUVVGVE9VZ3NVVUZCWWl4RlFVRjFRbmRKTEdGQlFXRjZTU3hKUVVGaUxFTkJRV3RDUXl4UlFVRnNRaXhIUVVFMlFqaElMRk5CUVZNNVNDeFJRVUYwUXp0QlFVTjRRanM3UVVGRlJIZEpMSEZDUVVGaGVra3NTVUZCWWl4RFFVRnJRbTFDTEUxQlFXeENMRWRCUVRKQ05FY3NVMEZCVXpWSExFMUJRWEJET3p0QlFVVkJOMFVzWjBKQlFWRXJReXhIUVVGU0xFTkJRVmtzYVVOQlFWb3NSVUZCSzBNd1NTeFJRVUV2UXl4RlFVRjVSRlVzV1VGQmVrUTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEZ5U3l4alFVRk5ZU3hKUVVGT0xFTkJRVmRwUWl4WFFVRllMRU5CUVhWQ2RVa3NXVUZCZGtJc1JVRkJjVU1zVlVGQlEzUkpMRXRCUVVRc1JVRkJWenRCUVVNNVF6ZEVMR3RDUVVGUkswTXNSMEZCVWl4RFFVRlpMR3REUVVGYUxFVkJRV2RFWXl4TFFVRm9SRHM3UVVGRlFTeGpRVUZKY2tNc1UwRkJVM0ZETEUxQlFVMUlMRWxCUVU0c1EwRkJWMnhETEUxQlFYaENPMEZCUTBFc1kwRkJTVzFMTEZOQlFWTTVTQ3hOUVVGTlNDeEpRVUZPTEVOQlFWZERMRkZCUVhoQ096dEJRVVZCTEdOQlFVbDVTU3hwUWtGQmFVSjBTeXhOUVVGTmNVb3NZVUZCVGl4RFFVRnZRbEVzVFVGQmNFSXNRMEZCY2tJN1FVRkRRU3hwUWtGQlR6ZEtMRTFCUVUxeFNpeGhRVUZPTEVOQlFXOUNVU3hOUVVGd1FpeERRVUZRTzBGQlEwRXNZMEZCU1ZNc1kwRkJTaXhGUVVGdlFrRXNaVUZCWld4S0xHbENRVUZtT3p0QlFVVndRaXhqUVVGSlZ5eE5RVUZOU0N4SlFVRk9MRU5CUVZkSkxFbEJRVmdzUjBGQmEwSXNSMEZCZEVJc1JVRkJNa0k3UVVGRGVrSTVSQ3h2UWtGQlVTdERMRWRCUVZJc1EwRkJXU3h0UTBGQldpeEZRVUZwUkdNc1RVRkJUVWdzU1VGQlRpeERRVUZYZDBrc2FVSkJRVFZFTEVWQlFTdEZVQ3hOUVVFdlJUdEJRVU5CVXl3MlFrRkJhVUlzT0VKQlFXOUNkRXNzVFVGQlRYbENMRTFCUVRGQ0xFVkJRV3REYjBrc1RVRkJiRU1zUlVGQk1FTTNTaXhOUVVGTllTeEpRVUZvUkN4RlFVRnpSR3RDTEUxQlFVMUlMRWxCUVU0c1EwRkJWM2RKTEdsQ1FVRnFSU3hEUVVGcVFqdEJRVU5CY0Vzc2EwSkJRVTF4U2l4aFFVRk9MRU5CUVc5Q1VTeE5RVUZ3UWl4SlFVRTRRbE1zWTBGQk9VSTdRVUZEUkN4WFFVcEVMRTFCU1U4c1NVRkJTWFpKTEUxQlFVMUlMRWxCUVU0c1EwRkJWMGtzU1VGQldDeExRVUZ2UWl4SFFVRjRRaXhGUVVFMlFqdEJRVU5zUXpsRUxHOUNRVUZSSzBNc1IwRkJVaXhEUVVGWkxIZERRVUZhTEVWQlFYTkVZeXhMUVVGMFJDeEZRVUUyUkM5Q0xFMUJRVTF4U2l4aFFVRnVSVHM3UVVGRlFTeG5Ra0ZCU1dNc1UwRkJVeXhwUTBGQmRVSnVTeXhMUVVGMlFpeEZRVUU0UWpaS0xFMUJRVGxDTEVWQlFYTkRia3NzVFVGQmRFTXNSVUZCT0VNc1NVRkJPVU1zUlVGQmIwUnhReXhOUVVGTlNDeEpRVUZPTEVOQlFWZHlSU3hMUVVFdlJDeEZRVUZ6UlN0TkxHVkJRV1YyUml4UlFVRnlSaXhGUVVFclJtaEVMRTFCUVUxSUxFbEJRVTRzUTBGQlYyMURMRTlCUVRGSExFTkJRV0k3UVVGRFFTOUVMR3RDUVVGTmMwSXNWVUZCVGl4RFFVRnBRblZKTEUxQlFXcENMRWxCUVRKQ1RTeE5RVUV6UWpzN1FVRkZRV2hHTEc5Q1FVRlJaMFlzVFVGQlVqdEJRVU5CUnl3eVFrRkJaWFJFTEV0QlFXWXNRMEZCY1VKdFJDeE5RVUZ5UWp0QlFVTkVMRmRCVWswc1RVRlJRVHRCUVVOTWJrY3NiVUpCUVU5cVF5eE5RVUZOU0N4SlFVRk9MRU5CUVZkelF5eEpRVUZzUWp0QlFVTkVPMEZCUTBZc1UwRjZRa1E3UVVFd1FrUXNUMEY2UkUwc1EwRkJVRHRCUVRKRVJEczdRVUZGUkRzN096c3JRa0ZEVjJ4RUxFY3NSVUZCU3p0QlFVTmtMRlZCUVVsb1FpeFJRVUZSTEVsQlFWbzdPMEZCUlVFc1ZVRkJTV3RMTEZkQlFWZHNTeXhOUVVGTmJVUXNWVUZCVGl4RFFVRnBRbTVETEVsQlFVbFpMRWxCUVVvc1EwRkJVMFlzUlVGQk1VSXNRMEZCWmp0QlFVTkJkMGtzWlVGQlUxb3NWVUZCVkN4RFFVRnZRblJKTEVkQlFYQkNPMEZCUTBRN08wRkJSVVE3T3pzN2IwTkJRMmRDUVN4SExFVkJRVXM3UVVGRGJrSXNWVUZCU1doQ0xGRkJRVkVzU1VGQldqczdRVUZGUkR0QlFVTkJMRlZCUVVrMlFpeFhRVUZYWWl4SlFVRkpVU3hKUVVGS0xFTkJRVk1yU1N4TFFVRlVMRU5CUVdVc1EwRkJaaXhGUVVGclFpeERRVUZETEVWQlFXNUNMRU5CUVdZN08wRkJSVUVzVlVGQlNXeExMRkZCUVZFN1FVRkRWblJETEdOQlFVMXBSQ3hKUVVGSmFrUXNTVUZFUVR0QlFVVldlVVFzWTBGQlRWSXNTVUZCU1Zrc1NVRkJTaXhEUVVGVE9FUXNUVUZHVER0QlFVZFdkRWtzWVVGQlMzbEZMRkZCU0VzN1FVRkpWbTVETEdkQ1FVRlJjMElzU1VGQlNWa3NTVUZCU2l4RFFVRlRiRU1zVFVGS1VEdEJRVXRXYmtNc1pVRkJUM2xFTEVsQlFVbFpMRWxCUVVvc1EwRkJVM0pGTEV0QlRFNDdRVUZOVmxVc2EwSkJRVlVyUXl4SlFVRkpXU3hKUVVGS0xFTkJRVk16UkN4UlFVNVVPenRCUVZGV2RVMHNZVUZCU3l4aFFVRkRlazBzU1VGQlJDeEZRVUZWTzBGQlEySXNZMEZCU1RCTkxGRkJRVkVzUjBGQldqdEJRVU5CTEdOQlFVa3hUU3hKUVVGS0xFVkJRVlU3UVVGRFVqQk5MRzlDUVVGUk1VMHNTVUZCVWp0QlFVTkVPenRCUVVWRU8wRkJRMEZwUXl4blFrRkJUV0VzU1VGQlRpeERRVUZYYVVJc1YwRkJXQ3hEUVVGMVFqdEJRVU55UW1kRExHZENRVUZKT1VNc1NVRkJTVGhETEVWQlJHRXNSVUZEVkM5R0xFMUJRVTBzVlVGRVJ5eEZRVU5UZVVRc1RVRkJUVklzU1VGQlNWVXNSVUZFYmtJc1JVRkRkVUpCTEVsQlFVbFdMRWxCUVVsUkxFbEJSQzlDTzBGQlJYSkNTU3hyUWtGQlRTeEZRVUZGU1N4TlFVRk5lVWtzUzBGQlVqdEJRVVpsTEZkQlFYWkNPMEZCU1VRN1FVRnVRbE1zVDBGQldqczdRVUZ6UWtFc1ZVRkJTWHBMTEUxQlFVMXBTeXh6UWtGQlZpeEZRVUZyUXp0QlFVTm9ReTlNTEdkQ1FVRlJORXNzU1VGQlVpeERRVUZoTEdkRFFVRmlMRVZCUVN0RGVra3NTMEZCTDBNN1FVRkRRVXdzWTBGQlRXbExMSE5DUVVGT0xFTkJRVFpDTlVvc1MwRkJOMEk3UVVGRFJEdEJRVU5FT3p0QlFVVkVPenM3TzI5RFFVTm5RbGNzUnl4RlFVRkxPMEZCUTI1Q0xGVkJRVWxvUWl4UlFVRlJMRWxCUVZvN08wRkJSVVE3UVVGRFFTeFZRVUZKTmtJc1YwRkJWMklzU1VGQlNWa3NTVUZCU2l4RFFVRlRReXhSUVVGNFFqczdRVUZGUVN4VlFVRkpha1FzVTBGQlUyOUNMRTFCUVUxelFpeFZRVUZPTEVOQlFXbENUeXhSUVVGcVFpeERRVUZpTzBGQlEwRXNWVUZCU1dwRUxFMUJRVW9zUlVGQldUdEJRVU5XTEZsQlFVbDVRaXhSUVVGUk8wRkJRMVowUXl4blFrRkJUV2xFTEVsQlFVbHFSQ3hKUVVSQk8wRkJSVlpZTEdWQlFVdDVSU3hSUVVaTE8wRkJSMVkxUkN4dlFrRkJWU3RETEVsQlFVbFpMRWxCUVVvc1EwRkJVek5FTEZGQlNGUTdPMEZCUzFaMVRTeGxRVUZMTEdGQlFVTjZUU3hKUVVGRUxFVkJRVlU3UVVGRFlpeG5Ra0ZCU1RCTkxGRkJRVkVzUjBGQldqdEJRVU5CTEdkQ1FVRkpNVTBzU1VGQlNpeEZRVUZWTzBGQlExSXdUU3h6UWtGQlVURk5MRWxCUVZJN1FVRkRSRHM3UVVGRlJEdEJRVU5CTEdkQ1FVRkpNRTBzVlVGQlZTeEhRVUZrTEVWQlFXMUNPMEZCUTJwQ04wd3NjVUpCUVU4NFRDeE5RVUZRTzBGQlEwUTdPMEZCUlVFN1FVRkRRVEZMTEd0Q1FVRk5ZU3hKUVVGT0xFTkJRVmRwUWl4WFFVRllMRU5CUVhWQ08wRkJRM0pDWjBNc2EwSkJRVWs1UXl4SlFVRkpPRU1zUlVGRVlTeEZRVU5VTDBZc1RVRkJUU3hWUVVSSExFVkJRMU41UkN4TlFVRk5VaXhKUVVGSlZTeEZRVVJ1UWl4RlFVTjFRa0VzU1VGQlNWWXNTVUZCU1ZFc1NVRkVMMEk3UVVGRmNrSkpMRzlDUVVGTkxFVkJRVVZKTEUxQlFVMTVTU3hMUVVGU0xFVkJRV1V2UlN4UlFVRlJNVVlzVFVGQlRYbENMRTFCUVRkQ08wRkJSbVVzWVVGQmRrSTdRVUZKUkR0QlFYSkNVU3hUUVVGYU96dEJRWGRDUXl4WlFVRkpla0lzVFVGQlRXbExMSE5DUVVGV0xFVkJRV3RETzBGQlEyaERMMHdzYTBKQlFWRXJReXhIUVVGU0xFTkJRVmtzYzBKQlFWb3NSVUZCYjBOYUxFdEJRWEJETzBGQlEwRk1MR2RDUVVGTmFVc3NjMEpCUVU0c1EwRkJOa0kxU2l4TFFVRTNRanRCUVVORU8wRkJRMFlzVDBFM1FrWXNUVUUyUWxFN1FVRkRURXdzWTBGQlRXRXNTVUZCVGl4RFFVRlhhVUlzVjBGQldDeERRVUYxUWp0QlFVTnlRbWRETEdOQlFVazVReXhKUVVGSk9FTXNSVUZFWVN4RlFVTlVMMFlzVFVGQlRTeFZRVVJITEVWQlExTjVSQ3hOUVVGTlVpeEpRVUZKVlN4RlFVUnVRaXhGUVVOMVFrRXNTVUZCU1ZZc1NVRkJTVkVzU1VGRUwwSTdRVUZGY2tKSkxHZENRVUZOTEVWQlFVVkpMRTFCUVUwc1IwRkJVaXhGUVVGaE1FUXNVVUZCVVRGR0xFMUJRVTE1UWl4TlFVRXpRanRCUVVabExGTkJRWFpDTzBGQlNVUTdRVUZEUmpzN08zZENRWGhWVnp0QlFVRkZMR0ZCUVU4c1MwRkJTMEVzVFVGQldqdEJRVUZ4UWpzN1FVRkZia003T3pzN096czdkMEpCU1dkQ08wRkJRVVVzWVVGQlR5eExRVUZMTUVJc1ZVRkJXanRCUVVGNVFqczdRVUZGTTBNN096czdPenM3ZDBKQlNXZENPMEZCUVVVc1lVRkJUeXhMUVVGTE4wSXNWVUZCV2p0QlFVRjVRanM3TzB0QkwwWTNRenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN2EwSkJLMXBsTWtnc1R6czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN1FVTXZXbVk3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN08wRkJkVUpCT3pzN096czdPenM3T3p0SlFWZE5NRUlzWlR0QlFVTktPenM3T3pzN1FVRlBRU3d5UWtGQldYWkVMRXRCUVZvc1JVRkJiVUpvU3l4SFFVRnVRaXhGUVVGM1FqaE1MRWRCUVhoQ0xFVkJRVFpDYmtVc1VVRkJOMElzUlVGQmRVTTdRVUZCUVRzN1FVRkRja01zVVVGQlNTOUZMRkZCUVZFc1NVRkJXanM3UVVGRlFVRXNWVUZCVFhsQ0xFMUJRVTRzUjBGQlpUSkdMRXRCUVdZN1FVRkRRWEJJTEZWQlFVMWxMRWxCUVU0c1IwRkJZVE5FTEVkQlFXSTdRVUZEUVRSRExGVkJRVTFoTEVsQlFVNHNSMEZCWVhGSkxFZEJRV0k3UVVGRFFXeEtMRlZCUVUxM1NDeFRRVUZPTEVkQlFXdENla01zVVVGQmJFSTdPMEZCUlVFdlJTeFZRVUZOTkVzc1VVRkJUaXhIUVVGcFFpeEZRVUZxUWp0QlFVTkJOVXNzVlVGQlRWY3NhMEpCUVU0N1FVRkRSRHM3T3p0NVEwRkZiMEk3UVVGRGJrSXNWVUZCU1Znc1VVRkJVU3hKUVVGYU96dEJRVVZCUVN4WlFVRk5kVWdzVTBGQlRpeEhRVUZyUW5aSUxFMUJRVTFoTEVsQlFVNHNRMEZCVjBNc1YwRkJXQ3hEUVVGMVFtUXNUVUZCVFdVc1NVRkJOMElzUlVGQmJVTXNWVUZCUTBNc1IwRkJSQ3hGUVVGVE8wRkJRelZFT1VNc1owSkJRVkVyUXl4SFFVRlNMRU5CUVZrc2NVSkJRWEZDYWtJc1RVRkJUV1VzU1VGQk0wSXNSMEZCYTBNc1VVRkJPVU1zUlVGQmQwUkRMRWRCUVhoRU8wRkJRMEZvUWl4alFVRk5ORXNzVVVGQlRpeERRVUZsT1VZc1NVRkJaaXhEUVVGdlFqbEVMRWRCUVhCQ08wRkJRMFFzVDBGSWFVSXNRMEZCYkVJN08wRkJTMEU3T3pzN096czdPenM3T3pzN096dEJRV2RDUkRzN08zZERRVVZ0UWp0QlFVTnNRaXhWUVVGSmFFSXNVVUZCVVN4SlFVRmFPenRCUVVWQlFTeFpRVUZOZFVnc1UwRkJUaXhEUVVGblFuQkhMRTFCUVdoQ096dEJRVVZCT3pzN1FVRkhSRHM3T3pCQ1FVbExNRW9zVVN4RlFVRlZPMEZCUTJRc1ZVRkJTVGRMTEZGQlFWRXNTVUZCV2p0QlFVTkJRU3haUVVGTk5Fc3NVVUZCVGl4RFFVRmxja3NzVDBGQlppeERRVUYxUWl4VlFVRkRORWdzVFVGQlJDeEZRVUZaTzBGQlEycERNRU1zYVVKQlFWTXpTaXhoUVVGVUxFTkJRWFZDTWtvc1UwRkJVekZMTEZGQlFXaERMRVZCUVRCRFowa3NUVUZCTVVNN1FVRkRSQ3hQUVVaRU8wRkJSMFE3T3p0M1FrRlFZenRCUVVGRkxHRkJRVThzUzBGQlMxZ3NVMEZCV2p0QlFVRjNRanM3T3pzN2EwSkJWVFZDYlVRc1pUczdPenM3T3pzN08wRkRjRWRtTEd0Q1FVRnJRaXg1UkRzN096czdPenRCUTBGc1FpeHJRa0ZCYTBJc2VVUTdPenM3T3pzN096czdRVU5CYkVJN1FVRkRRU3h6UkRzN096czdPenRCUTBSQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSVHM3T3pzN096dEJRMHBCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeHJRMEZCYTBNc1ZVRkJWU3hGUVVGRk8wRkJRemxETEcxQ1FVRnRRaXh6UTBGQmMwTTdRVUZEZWtRc1EwRkJReXh2UTBGQmIwTTdRVUZEY2tNN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTEVOQlFVTXNWenM3T3pzN096czdRVU5vUTBRN1FVRkRRVHM3UVVGRlFTd3dRMEZCTUVNc2FVTkJRVzlETEVVN096czdPenM3UVVOSU9VVTdRVUZEUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNRMEZCUXl4Rk96czdPenM3TzBGRFVrUTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeExRVUZMTzBGQlEwdzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzYVVWQlFXbEZMREJFUVVFd1JDeEZRVUZGTzBGQlF6ZElPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3cyUkVGQk5rUXNNa1JCUVRKRU8wRkJRM2hJTEhGRVFVRnhSQ3d5UkVGQk1rUTdRVUZEYUVnN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hwUlVGQmFVVTdRVUZEYWtVN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeDNRa0ZCZDBJc2MwTkJRWE5ETzBGQlF6bEVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4NVFrRkJlVUlzTkVSQlFUUkVPMEZCUTNKR08wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNkMEpCUVhkQ0xDdERRVUVyUXp0QlFVTjJSVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEhkQ1FVRjNRaXh4UlVGQmNVVTdRVUZETjBZN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzZDBKQlFYZENMSFZEUVVGMVF6dEJRVU12UkR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEZGQlFWRTdRVUZEVWp0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeDVRMEZCZVVNN1FVRkRla003UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc2QwSkJRWGRDTzBGQlEzaENPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeFJRVUZSTzBGQlExSXNhVVU3UVVGRFFTeDNSRUZCZDBRc05rZEJRVFpITEVWQlFVVTdRVUZEZGtzN1FVRkRRVHRCUVVOQk8wRkJRMEVzVDBGQlR6dEJRVU5RTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFZEJRVWM3UVVGRFNEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEhGQ1FVRnhRaXhyUjBGQmEwYzdRVUZEZGtnN1FVRkRRVHRCUVVOQkxFMUJRVTA3UVVGRFRpeExRVUZMTzBGQlEwdzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3h2UWtGQmIwSXNiVWRCUVcxSE8wRkJRM1pJTzBGQlEwRXNUVUZCVFR0QlFVTk9PMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzYTBKQlFXdENMRzlKUVVGdlNUdEJRVU4wU2p0QlFVTkJMRWxCUVVrN1FVRkRTanRCUVVOQkxFZEJRVWM3UVVGRFNEdEJRVU5CTzBGQlEwRXNRMEZCUXl4Sk96czdPenM3T3pzN096czdPenM3T3pzN096czdPMEZETTFGRU96czdPMEZCUTBFN096czdRVUZEUVRzN096czdPMUZCUlZFeFFpeFBPMUZCUVZNeFJ5eHJRanRSUVVGdlFpOURMR3RDSWl3aVptbHNaU0k2SWxONWJtTm9aWEl1YW5NaUxDSnpiM1Z5WTJWelEyOXVkR1Z1ZENJNld5SW9ablZ1WTNScGIyNGdkMlZpY0dGamExVnVhWFpsY25OaGJFMXZaSFZzWlVSbFptbHVhWFJwYjI0b2NtOXZkQ3dnWm1GamRHOXllU2tnZTF4dVhIUnBaaWgwZVhCbGIyWWdaWGh3YjNKMGN5QTlQVDBnSjI5aWFtVmpkQ2NnSmlZZ2RIbHdaVzltSUcxdlpIVnNaU0E5UFQwZ0oyOWlhbVZqZENjcFhHNWNkRngwYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtWVdOMGIzSjVLQ2s3WEc1Y2RHVnNjMlVnYVdZb2RIbHdaVzltSUdSbFptbHVaU0E5UFQwZ0oyWjFibU4wYVc5dUp5QW1KaUJrWldacGJtVXVZVzFrS1Z4dVhIUmNkR1JsWm1sdVpTaGNJbE41Ym1Ob1pYSmNJaXdnVzEwc0lHWmhZM1J2Y25rcE8xeHVYSFJsYkhObElHbG1LSFI1Y0dWdlppQmxlSEJ2Y25SeklEMDlQU0FuYjJKcVpXTjBKeWxjYmx4MFhIUmxlSEJ2Y25Selcxd2lVM2x1WTJobGNsd2lYU0E5SUdaaFkzUnZjbmtvS1R0Y2JseDBaV3h6WlZ4dVhIUmNkSEp2YjNSYlhDSmNJbDBnUFNCeWIyOTBXMXdpWENKZElIeDhJSHQ5TENCeWIyOTBXMXdpWENKZFcxd2lVM2x1WTJobGNsd2lYU0E5SUdaaFkzUnZjbmtvS1R0Y2JuMHBLSFJvYVhNc0lHWjFibU4wYVc5dUtDa2dlMXh1Y21WMGRYSnVJRnh1WEc1Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU0lDOHZYRzR2THlCM1pXSndZV05yTDNWdWFYWmxjbk5oYkUxdlpIVnNaVVJsWm1sdWFYUnBiMjRpTENJZ1hIUXZMeUJVYUdVZ2JXOWtkV3hsSUdOaFkyaGxYRzRnWEhSMllYSWdhVzV6ZEdGc2JHVmtUVzlrZFd4bGN5QTlJSHQ5TzF4dVhHNGdYSFF2THlCVWFHVWdjbVZ4ZFdseVpTQm1kVzVqZEdsdmJseHVJRngwWm5WdVkzUnBiMjRnWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHlodGIyUjFiR1ZKWkNrZ2UxeHVYRzRnWEhSY2RDOHZJRU5vWldOcklHbG1JRzF2WkhWc1pTQnBjeUJwYmlCallXTm9aVnh1SUZ4MFhIUnBaaWhwYm5OMFlXeHNaV1JOYjJSMWJHVnpXMjF2WkhWc1pVbGtYU2xjYmlCY2RGeDBYSFJ5WlhSMWNtNGdhVzV6ZEdGc2JHVmtUVzlrZFd4bGMxdHRiMlIxYkdWSlpGMHVaWGh3YjNKMGN6dGNibHh1SUZ4MFhIUXZMeUJEY21WaGRHVWdZU0J1WlhjZ2JXOWtkV3hsSUNoaGJtUWdjSFYwSUdsMElHbHVkRzhnZEdobElHTmhZMmhsS1Z4dUlGeDBYSFIyWVhJZ2JXOWtkV3hsSUQwZ2FXNXpkR0ZzYkdWa1RXOWtkV3hsYzF0dGIyUjFiR1ZKWkYwZ1BTQjdYRzRnWEhSY2RGeDBhVG9nYlc5a2RXeGxTV1FzWEc0Z1hIUmNkRngwYkRvZ1ptRnNjMlVzWEc0Z1hIUmNkRngwWlhod2IzSjBjem9nZTMxY2JpQmNkRngwZlR0Y2JseHVJRngwWEhRdkx5QkZlR1ZqZFhSbElIUm9aU0J0YjJSMWJHVWdablZ1WTNScGIyNWNiaUJjZEZ4MGJXOWtkV3hsYzF0dGIyUjFiR1ZKWkYwdVkyRnNiQ2h0YjJSMWJHVXVaWGh3YjNKMGN5d2diVzlrZFd4bExDQnRiMlIxYkdVdVpYaHdiM0owY3l3Z1gxOTNaV0p3WVdOclgzSmxjWFZwY21WZlh5azdYRzVjYmlCY2RGeDBMeThnUm14aFp5QjBhR1VnYlc5a2RXeGxJR0Z6SUd4dllXUmxaRnh1SUZ4MFhIUnRiMlIxYkdVdWJDQTlJSFJ5ZFdVN1hHNWNiaUJjZEZ4MEx5OGdVbVYwZFhKdUlIUm9aU0JsZUhCdmNuUnpJRzltSUhSb1pTQnRiMlIxYkdWY2JpQmNkRngwY21WMGRYSnVJRzF2WkhWc1pTNWxlSEJ2Y25Sek8xeHVJRngwZlZ4dVhHNWNiaUJjZEM4dklHVjRjRzl6WlNCMGFHVWdiVzlrZFd4bGN5QnZZbXBsWTNRZ0tGOWZkMlZpY0dGamExOXRiMlIxYkdWelgxOHBYRzRnWEhSZlgzZGxZbkJoWTJ0ZmNtVnhkV2x5WlY5ZkxtMGdQU0J0YjJSMWJHVnpPMXh1WEc0Z1hIUXZMeUJsZUhCdmMyVWdkR2hsSUcxdlpIVnNaU0JqWVdOb1pWeHVJRngwWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHk1aklEMGdhVzV6ZEdGc2JHVmtUVzlrZFd4bGN6dGNibHh1SUZ4MEx5OGdhV1JsYm5ScGRIa2dablZ1WTNScGIyNGdabTl5SUdOaGJHeHBibWNnYUdGeWJXOXVlU0JwYlhCdmNuUnpJSGRwZEdnZ2RHaGxJR052Y25KbFkzUWdZMjl1ZEdWNGRGeHVJRngwWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHk1cElEMGdablZ1WTNScGIyNG9kbUZzZFdVcElIc2djbVYwZFhKdUlIWmhiSFZsT3lCOU8xeHVYRzRnWEhRdkx5QmtaV1pwYm1VZ1oyVjBkR1Z5SUdaMWJtTjBhVzl1SUdadmNpQm9ZWEp0YjI1NUlHVjRjRzl5ZEhOY2JpQmNkRjlmZDJWaWNHRmphMTl5WlhGMWFYSmxYMTh1WkNBOUlHWjFibU4wYVc5dUtHVjRjRzl5ZEhNc0lHNWhiV1VzSUdkbGRIUmxjaWtnZTF4dUlGeDBYSFJwWmlnaFgxOTNaV0p3WVdOclgzSmxjWFZwY21WZlh5NXZLR1Y0Y0c5eWRITXNJRzVoYldVcEtTQjdYRzRnWEhSY2RGeDBUMkpxWldOMExtUmxabWx1WlZCeWIzQmxjblI1S0dWNGNHOXlkSE1zSUc1aGJXVXNJSHRjYmlCY2RGeDBYSFJjZEdOdmJtWnBaM1Z5WVdKc1pUb2dabUZzYzJVc1hHNGdYSFJjZEZ4MFhIUmxiblZ0WlhKaFlteGxPaUIwY25WbExGeHVJRngwWEhSY2RGeDBaMlYwT2lCblpYUjBaWEpjYmlCY2RGeDBYSFI5S1R0Y2JpQmNkRngwZlZ4dUlGeDBmVHRjYmx4dUlGeDBMeThnWjJWMFJHVm1ZWFZzZEVWNGNHOXlkQ0JtZFc1amRHbHZiaUJtYjNJZ1kyOXRjR0YwYVdKcGJHbDBlU0IzYVhSb0lHNXZiaTFvWVhKdGIyNTVJRzF2WkhWc1pYTmNiaUJjZEY5ZmQyVmljR0ZqYTE5eVpYRjFhWEpsWDE4dWJpQTlJR1oxYm1OMGFXOXVLRzF2WkhWc1pTa2dlMXh1SUZ4MFhIUjJZWElnWjJWMGRHVnlJRDBnYlc5a2RXeGxJQ1ltSUcxdlpIVnNaUzVmWDJWelRXOWtkV3hsSUQ5Y2JpQmNkRngwWEhSbWRXNWpkR2x2YmlCblpYUkVaV1poZFd4MEtDa2dleUJ5WlhSMWNtNGdiVzlrZFd4bFd5ZGtaV1poZFd4MEoxMDdJSDBnT2x4dUlGeDBYSFJjZEdaMWJtTjBhVzl1SUdkbGRFMXZaSFZzWlVWNGNHOXlkSE1vS1NCN0lISmxkSFZ5YmlCdGIyUjFiR1U3SUgwN1hHNGdYSFJjZEY5ZmQyVmljR0ZqYTE5eVpYRjFhWEpsWDE4dVpDaG5aWFIwWlhJc0lDZGhKeXdnWjJWMGRHVnlLVHRjYmlCY2RGeDBjbVYwZFhKdUlHZGxkSFJsY2p0Y2JpQmNkSDA3WEc1Y2JpQmNkQzh2SUU5aWFtVmpkQzV3Y205MGIzUjVjR1V1YUdGelQzZHVVSEp2Y0dWeWRIa3VZMkZzYkZ4dUlGeDBYMTkzWldKd1lXTnJYM0psY1hWcGNtVmZYeTV2SUQwZ1puVnVZM1JwYjI0b2IySnFaV04wTENCd2NtOXdaWEowZVNrZ2V5QnlaWFIxY200Z1QySnFaV04wTG5CeWIzUnZkSGx3WlM1b1lYTlBkMjVRY205d1pYSjBlUzVqWVd4c0tHOWlhbVZqZEN3Z2NISnZjR1Z5ZEhrcE95QjlPMXh1WEc0Z1hIUXZMeUJmWDNkbFluQmhZMnRmY0hWaWJHbGpYM0JoZEdoZlgxeHVJRngwWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHk1d0lEMGdYQ0pjSWp0Y2JseHVJRngwTHk4Z1RHOWhaQ0JsYm5SeWVTQnRiMlIxYkdVZ1lXNWtJSEpsZEhWeWJpQmxlSEJ2Y25SelhHNGdYSFJ5WlhSMWNtNGdYMTkzWldKd1lXTnJYM0psY1hWcGNtVmZYeWhmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmTG5NZ1BTQXhOaklwTzF4dVhHNWNibHh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVklnTHk5Y2JpOHZJSGRsWW5CaFkyc3ZZbTl2ZEhOMGNtRndJR1EyTVdFeE9XWTJNekk1TWpCbU5XWmtaalZrSWl3aWRtRnlJR052Y21VZ1BTQnRiMlIxYkdVdVpYaHdiM0owY3lBOUlIdDJaWEp6YVc5dU9pQW5NaTQwTGpBbmZUdGNibWxtS0hSNWNHVnZaaUJmWDJVZ1BUMGdKMjUxYldKbGNpY3BYMTlsSUQwZ1kyOXlaVHNnTHk4Z1pYTnNhVzUwTFdScGMyRmliR1V0YkdsdVpTQnVieTExYm1SbFpseHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWTI5eVpTNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNRnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlEWWdOeUE0SWl3aUx5OGdhSFIwY0hNNkx5OW5hWFJvZFdJdVkyOXRMM3BzYjJseWIyTnJMMk52Y21VdGFuTXZhWE56ZFdWekx6ZzJJMmx6YzNWbFkyOXRiV1Z1ZEMweE1UVTNOVGt3TWpoY2JuWmhjaUJuYkc5aVlXd2dQU0J0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSFI1Y0dWdlppQjNhVzVrYjNjZ0lUMGdKM1Z1WkdWbWFXNWxaQ2NnSmlZZ2QybHVaRzkzTGsxaGRHZ2dQVDBnVFdGMGFGeHVJQ0EvSUhkcGJtUnZkeUE2SUhSNWNHVnZaaUJ6Wld4bUlDRTlJQ2QxYm1SbFptbHVaV1FuSUNZbUlITmxiR1l1VFdGMGFDQTlQU0JOWVhSb0lEOGdjMlZzWmlBNklFWjFibU4wYVc5dUtDZHlaWFIxY200Z2RHaHBjeWNwS0NrN1hHNXBaaWgwZVhCbGIyWWdYMTluSUQwOUlDZHVkVzFpWlhJbktWOWZaeUE5SUdkc2IySmhiRHNnTHk4Z1pYTnNhVzUwTFdScGMyRmliR1V0YkdsdVpTQnVieTExYm1SbFpseHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWjJ4dlltRnNMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F4WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnaUxDSjJZWElnYzNSdmNtVWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYM05vWVhKbFpDY3BLQ2QzYTNNbktWeHVJQ0FzSUhWcFpDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkxYVdRbktWeHVJQ0FzSUZONWJXSnZiQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTluYkc5aVlXd25LUzVUZVcxaWIyeGNiaUFnTENCVlUwVmZVMWxOUWs5TUlEMGdkSGx3Wlc5bUlGTjViV0p2YkNBOVBTQW5ablZ1WTNScGIyNG5PMXh1WEc1MllYSWdKR1Y0Y0c5eWRITWdQU0J0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLRzVoYldVcGUxeHVJQ0J5WlhSMWNtNGdjM1J2Y21WYmJtRnRaVjBnZkh3Z0tITjBiM0psVzI1aGJXVmRJRDFjYmlBZ0lDQlZVMFZmVTFsTlFrOU1JQ1ltSUZONWJXSnZiRnR1WVcxbFhTQjhmQ0FvVlZORlgxTlpUVUpQVENBL0lGTjViV0p2YkNBNklIVnBaQ2tvSjFONWJXSnZiQzRuSUNzZ2JtRnRaU2twTzF4dWZUdGNibHh1SkdWNGNHOXlkSE11YzNSdmNtVWdQU0J6ZEc5eVpUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNkcmN5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNbHh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lMeThnVkdoaGJtc25jeUJKUlRnZ1ptOXlJR2hwY3lCbWRXNXVlU0JrWldacGJtVlFjbTl3WlhKMGVWeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQWhjbVZ4ZFdseVpTZ25MaTlmWm1GcGJITW5LU2htZFc1amRHbHZiaWdwZTF4dUlDQnlaWFIxY200Z1QySnFaV04wTG1SbFptbHVaVkJ5YjNCbGNuUjVLSHQ5TENBbllTY3NJSHRuWlhRNklHWjFibU4wYVc5dUtDbDdJSEpsZEhWeWJpQTNPeUI5ZlNrdVlTQWhQU0EzTzF4dWZTazdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5a1pYTmpjbWx3ZEc5eWN5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNMXh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlEWWdOeUE0SWl3aWRtRnlJR0Z1VDJKcVpXTjBJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWVc0dGIySnFaV04wSnlsY2JpQWdMQ0JKUlRoZlJFOU5YMFJGUmtsT1JTQTlJSEpsY1hWcGNtVW9KeTR2WDJsbE9DMWtiMjB0WkdWbWFXNWxKeWxjYmlBZ0xDQjBiMUJ5YVcxcGRHbDJaU0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYM1J2TFhCeWFXMXBkR2wyWlNjcFhHNGdJQ3dnWkZBZ0lDQWdJQ0FnSUNBZ0lDQWdQU0JQWW1wbFkzUXVaR1ZtYVc1bFVISnZjR1Z5ZEhrN1hHNWNibVY0Y0c5eWRITXVaaUE5SUhKbGNYVnBjbVVvSnk0dlgyUmxjMk55YVhCMGIzSnpKeWtnUHlCUFltcGxZM1F1WkdWbWFXNWxVSEp2Y0dWeWRIa2dPaUJtZFc1amRHbHZiaUJrWldacGJtVlFjbTl3WlhKMGVTaFBMQ0JRTENCQmRIUnlhV0oxZEdWektYdGNiaUFnWVc1UFltcGxZM1FvVHlrN1hHNGdJRkFnUFNCMGIxQnlhVzFwZEdsMlpTaFFMQ0IwY25WbEtUdGNiaUFnWVc1UFltcGxZM1FvUVhSMGNtbGlkWFJsY3lrN1hHNGdJR2xtS0VsRk9GOUVUMDFmUkVWR1NVNUZLWFJ5ZVNCN1hHNGdJQ0FnY21WMGRYSnVJR1JRS0U4c0lGQXNJRUYwZEhKcFluVjBaWE1wTzF4dUlDQjlJR05oZEdOb0tHVXBleUF2S2lCbGJYQjBlU0FxTHlCOVhHNGdJR2xtS0NkblpYUW5JR2x1SUVGMGRISnBZblYwWlhNZ2ZId2dKM05sZENjZ2FXNGdRWFIwY21saWRYUmxjeWwwYUhKdmR5QlVlWEJsUlhKeWIzSW9KMEZqWTJWemMyOXljeUJ1YjNRZ2MzVndjRzl5ZEdWa0lTY3BPMXh1SUNCcFppZ25kbUZzZFdVbklHbHVJRUYwZEhKcFluVjBaWE1wVDF0UVhTQTlJRUYwZEhKcFluVjBaWE11ZG1Gc2RXVTdYRzRnSUhKbGRIVnliaUJQTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzFrY0M1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSURZZ055QTRJaXdpZG1GeUlHbHpUMkpxWldOMElEMGdjbVZ4ZFdseVpTZ25MaTlmYVhNdGIySnFaV04wSnlrN1hHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlHWjFibU4wYVc5dUtHbDBLWHRjYmlBZ2FXWW9JV2x6VDJKcVpXTjBLR2wwS1NsMGFISnZkeUJVZVhCbFJYSnliM0lvYVhRZ0t5QW5JR2x6SUc1dmRDQmhiaUJ2WW1wbFkzUWhKeWs3WEc0Z0lISmxkSFZ5YmlCcGREdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWhiaTF2WW1wbFkzUXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRFZjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TQTJJRGNnT0NJc0luWmhjaUJrVUNBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXUndKeWxjYmlBZ0xDQmpjbVZoZEdWRVpYTmpJRDBnY21WeGRXbHlaU2duTGk5ZmNISnZjR1Z5ZEhrdFpHVnpZeWNwTzF4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCeVpYRjFhWEpsS0NjdUwxOWtaWE5qY21sd2RHOXljeWNwSUQ4Z1puVnVZM1JwYjI0b2IySnFaV04wTENCclpYa3NJSFpoYkhWbEtYdGNiaUFnY21WMGRYSnVJR1JRTG1Zb2IySnFaV04wTENCclpYa3NJR055WldGMFpVUmxjMk1vTVN3Z2RtRnNkV1VwS1R0Y2JuMGdPaUJtZFc1amRHbHZiaWh2WW1wbFkzUXNJR3RsZVN3Z2RtRnNkV1VwZTF4dUlDQnZZbXBsWTNSYmEyVjVYU0E5SUhaaGJIVmxPMXh1SUNCeVpYUjFjbTRnYjJKcVpXTjBPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMmhwWkdVdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEWmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNBMklEY2dPQ0lzSW0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYVhRcGUxeHVJQ0J5WlhSMWNtNGdkSGx3Wlc5bUlHbDBJRDA5UFNBbmIySnFaV04wSnlBL0lHbDBJQ0U5UFNCdWRXeHNJRG9nZEhsd1pXOW1JR2wwSUQwOVBTQW5ablZ1WTNScGIyNG5PMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMmx6TFc5aWFtVmpkQzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTjF4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJRFlnTnlBNElpd2lkbUZ5SUdkc2IySmhiQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMmRzYjJKaGJDY3BYRzRnSUN3Z1kyOXlaU0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWTI5eVpTY3BYRzRnSUN3Z1kzUjRJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWTNSNEp5bGNiaUFnTENCb2FXUmxJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlvYVdSbEp5bGNiaUFnTENCUVVrOVVUMVJaVUVVZ1BTQW5jSEp2ZEc5MGVYQmxKenRjYmx4dWRtRnlJQ1JsZUhCdmNuUWdQU0JtZFc1amRHbHZiaWgwZVhCbExDQnVZVzFsTENCemIzVnlZMlVwZTF4dUlDQjJZWElnU1ZOZlJrOVNRMFZFSUQwZ2RIbHdaU0FtSUNSbGVIQnZjblF1Umx4dUlDQWdJQ3dnU1ZOZlIweFBRa0ZNSUQwZ2RIbHdaU0FtSUNSbGVIQnZjblF1UjF4dUlDQWdJQ3dnU1ZOZlUxUkJWRWxESUQwZ2RIbHdaU0FtSUNSbGVIQnZjblF1VTF4dUlDQWdJQ3dnU1ZOZlVGSlBWRThnSUQwZ2RIbHdaU0FtSUNSbGVIQnZjblF1VUZ4dUlDQWdJQ3dnU1ZOZlFrbE9SQ0FnSUQwZ2RIbHdaU0FtSUNSbGVIQnZjblF1UWx4dUlDQWdJQ3dnU1ZOZlYxSkJVQ0FnSUQwZ2RIbHdaU0FtSUNSbGVIQnZjblF1VjF4dUlDQWdJQ3dnWlhod2IzSjBjeUFnSUQwZ1NWTmZSMHhQUWtGTUlEOGdZMjl5WlNBNklHTnZjbVZiYm1GdFpWMGdmSHdnS0dOdmNtVmJibUZ0WlYwZ1BTQjdmU2xjYmlBZ0lDQXNJR1Y0Y0ZCeWIzUnZJQ0E5SUdWNGNHOXlkSE5iVUZKUFZFOVVXVkJGWFZ4dUlDQWdJQ3dnZEdGeVoyVjBJQ0FnSUQwZ1NWTmZSMHhQUWtGTUlEOGdaMnh2WW1Gc0lEb2dTVk5mVTFSQlZFbERJRDhnWjJ4dlltRnNXMjVoYldWZElEb2dLR2RzYjJKaGJGdHVZVzFsWFNCOGZDQjdmU2xiVUZKUFZFOVVXVkJGWFZ4dUlDQWdJQ3dnYTJWNUxDQnZkMjRzSUc5MWREdGNiaUFnYVdZb1NWTmZSMHhQUWtGTUtYTnZkWEpqWlNBOUlHNWhiV1U3WEc0Z0lHWnZjaWhyWlhrZ2FXNGdjMjkxY21ObEtYdGNiaUFnSUNBdkx5QmpiMjUwWVdsdWN5QnBiaUJ1WVhScGRtVmNiaUFnSUNCdmQyNGdQU0FoU1ZOZlJrOVNRMFZFSUNZbUlIUmhjbWRsZENBbUppQjBZWEpuWlhSYmEyVjVYU0FoUFQwZ2RXNWtaV1pwYm1Wa08xeHVJQ0FnSUdsbUtHOTNiaUFtSmlCclpYa2dhVzRnWlhod2IzSjBjeWxqYjI1MGFXNTFaVHRjYmlBZ0lDQXZMeUJsZUhCdmNuUWdibUYwYVhabElHOXlJSEJoYzNObFpGeHVJQ0FnSUc5MWRDQTlJRzkzYmlBL0lIUmhjbWRsZEZ0clpYbGRJRG9nYzI5MWNtTmxXMnRsZVYwN1hHNGdJQ0FnTHk4Z2NISmxkbVZ1ZENCbmJHOWlZV3dnY0c5c2JIVjBhVzl1SUdadmNpQnVZVzFsYzNCaFkyVnpYRzRnSUNBZ1pYaHdiM0owYzF0clpYbGRJRDBnU1ZOZlIweFBRa0ZNSUNZbUlIUjVjR1Z2WmlCMFlYSm5aWFJiYTJWNVhTQWhQU0FuWm5WdVkzUnBiMjRuSUQ4Z2MyOTFjbU5sVzJ0bGVWMWNiaUFnSUNBdkx5QmlhVzVrSUhScGJXVnljeUIwYnlCbmJHOWlZV3dnWm05eUlHTmhiR3dnWm5KdmJTQmxlSEJ2Y25RZ1kyOXVkR1Y0ZEZ4dUlDQWdJRG9nU1ZOZlFrbE9SQ0FtSmlCdmQyNGdQeUJqZEhnb2IzVjBMQ0JuYkc5aVlXd3BYRzRnSUNBZ0x5OGdkM0poY0NCbmJHOWlZV3dnWTI5dWMzUnlkV04wYjNKeklHWnZjaUJ3Y21WMlpXNTBJR05vWVc1blpTQjBhR1Z0SUdsdUlHeHBZbkpoY25sY2JpQWdJQ0E2SUVsVFgxZFNRVkFnSmlZZ2RHRnlaMlYwVzJ0bGVWMGdQVDBnYjNWMElEOGdLR1oxYm1OMGFXOXVLRU1wZTF4dUlDQWdJQ0FnZG1GeUlFWWdQU0JtZFc1amRHbHZiaWhoTENCaUxDQmpLWHRjYmlBZ0lDQWdJQ0FnYVdZb2RHaHBjeUJwYm5OMFlXNWpaVzltSUVNcGUxeHVJQ0FnSUNBZ0lDQWdJSE4zYVhSamFDaGhjbWQxYldWdWRITXViR1Z1WjNSb0tYdGNiaUFnSUNBZ0lDQWdJQ0FnSUdOaGMyVWdNRG9nY21WMGRYSnVJRzVsZHlCRE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnWTJGelpTQXhPaUJ5WlhSMWNtNGdibVYzSUVNb1lTazdYRzRnSUNBZ0lDQWdJQ0FnSUNCallYTmxJREk2SUhKbGRIVnliaUJ1WlhjZ1F5aGhMQ0JpS1R0Y2JpQWdJQ0FnSUNBZ0lDQjlJSEpsZEhWeWJpQnVaWGNnUXloaExDQmlMQ0JqS1R0Y2JpQWdJQ0FnSUNBZ2ZTQnlaWFIxY200Z1F5NWhjSEJzZVNoMGFHbHpMQ0JoY21kMWJXVnVkSE1wTzF4dUlDQWdJQ0FnZlR0Y2JpQWdJQ0FnSUVaYlVGSlBWRTlVV1ZCRlhTQTlJRU5iVUZKUFZFOVVXVkJGWFR0Y2JpQWdJQ0FnSUhKbGRIVnliaUJHTzF4dUlDQWdJQzh2SUcxaGEyVWdjM1JoZEdsaklIWmxjbk5wYjI1eklHWnZjaUJ3Y205MGIzUjVjR1VnYldWMGFHOWtjMXh1SUNBZ0lIMHBLRzkxZENrZ09pQkpVMTlRVWs5VVR5QW1KaUIwZVhCbGIyWWdiM1YwSUQwOUlDZG1kVzVqZEdsdmJpY2dQeUJqZEhnb1JuVnVZM1JwYjI0dVkyRnNiQ3dnYjNWMEtTQTZJRzkxZER0Y2JpQWdJQ0F2THlCbGVIQnZjblFnY0hKdmRHOGdiV1YwYUc5a2N5QjBieUJqYjNKbExpVkRUMDVUVkZKVlExUlBVaVV1YldWMGFHOWtjeTRsVGtGTlJTVmNiaUFnSUNCcFppaEpVMTlRVWs5VVR5bDdYRzRnSUNBZ0lDQW9aWGh3YjNKMGN5NTJhWEowZFdGc0lIeDhJQ2hsZUhCdmNuUnpMblpwY25SMVlXd2dQU0I3ZlNrcFcydGxlVjBnUFNCdmRYUTdYRzRnSUNBZ0lDQXZMeUJsZUhCdmNuUWdjSEp2ZEc4Z2JXVjBhRzlrY3lCMGJ5QmpiM0psTGlWRFQwNVRWRkpWUTFSUFVpVXVjSEp2ZEc5MGVYQmxMaVZPUVUxRkpWeHVJQ0FnSUNBZ2FXWW9kSGx3WlNBbUlDUmxlSEJ2Y25RdVVpQW1KaUJsZUhCUWNtOTBieUFtSmlBaFpYaHdVSEp2ZEc5YmEyVjVYU2xvYVdSbEtHVjRjRkJ5YjNSdkxDQnJaWGtzSUc5MWRDazdYRzRnSUNBZ2ZWeHVJQ0I5WEc1OU8xeHVMeThnZEhsd1pTQmlhWFJ0WVhCY2JpUmxlSEJ2Y25RdVJpQTlJREU3SUNBZ0x5OGdabTl5WTJWa1hHNGtaWGh3YjNKMExrY2dQU0F5T3lBZ0lDOHZJR2RzYjJKaGJGeHVKR1Y0Y0c5eWRDNVRJRDBnTkRzZ0lDQXZMeUJ6ZEdGMGFXTmNiaVJsZUhCdmNuUXVVQ0E5SURnN0lDQWdMeThnY0hKdmRHOWNiaVJsZUhCdmNuUXVRaUE5SURFMk95QWdMeThnWW1sdVpGeHVKR1Y0Y0c5eWRDNVhJRDBnTXpJN0lDQXZMeUIzY21Gd1hHNGtaWGh3YjNKMExsVWdQU0EyTkRzZ0lDOHZJSE5oWm1WY2JpUmxlSEJ2Y25RdVVpQTlJREV5T0RzZ0x5OGdjbVZoYkNCd2NtOTBieUJ0WlhSb2IyUWdabTl5SUdCc2FXSnlZWEo1WUNCY2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ0pHVjRjRzl5ZER0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMlY0Y0c5eWRDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdPRnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlEWWdOeUE0SWl3aVhDSjFjMlVnYzNSeWFXTjBYQ0k3WEc1Y2JtVjRjRzl5ZEhNdVgxOWxjMDF2WkhWc1pTQTlJSFJ5ZFdVN1hHNWNibVY0Y0c5eWRITXVaR1ZtWVhWc2RDQTlJR1oxYm1OMGFXOXVJQ2hwYm5OMFlXNWpaU3dnUTI5dWMzUnlkV04wYjNJcElIdGNiaUFnYVdZZ0tDRW9hVzV6ZEdGdVkyVWdhVzV6ZEdGdVkyVnZaaUJEYjI1emRISjFZM1J2Y2lrcElIdGNiaUFnSUNCMGFISnZkeUJ1WlhjZ1ZIbHdaVVZ5Y205eUtGd2lRMkZ1Ym05MElHTmhiR3dnWVNCamJHRnpjeUJoY3lCaElHWjFibU4wYVc5dVhDSXBPMXh1SUNCOVhHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJobGJIQmxjbk12WTJ4aGMzTkRZV3hzUTJobFkyc3Vhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGxjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TQTJJRGNnT0NJc0lsd2lkWE5sSUhOMGNtbGpkRndpTzF4dVhHNWxlSEJ2Y25SekxsOWZaWE5OYjJSMWJHVWdQU0IwY25WbE8xeHVYRzUyWVhJZ1gyUmxabWx1WlZCeWIzQmxjblI1SUQwZ2NtVnhkV2x5WlNoY0lpNHVMMk52Y21VdGFuTXZiMkpxWldOMEwyUmxabWx1WlMxd2NtOXdaWEowZVZ3aUtUdGNibHh1ZG1GeUlGOWtaV1pwYm1WUWNtOXdaWEowZVRJZ1BTQmZhVzUwWlhKdmNGSmxjWFZwY21WRVpXWmhkV3gwS0Y5a1pXWnBibVZRY205d1pYSjBlU2s3WEc1Y2JtWjFibU4wYVc5dUlGOXBiblJsY205d1VtVnhkV2x5WlVSbFptRjFiSFFvYjJKcUtTQjdJSEpsZEhWeWJpQnZZbW9nSmlZZ2IySnFMbDlmWlhOTmIyUjFiR1VnUHlCdlltb2dPaUI3SUdSbFptRjFiSFE2SUc5aWFpQjlPeUI5WEc1Y2JtVjRjRzl5ZEhNdVpHVm1ZWFZzZENBOUlHWjFibU4wYVc5dUlDZ3BJSHRjYmlBZ1puVnVZM1JwYjI0Z1pHVm1hVzVsVUhKdmNHVnlkR2xsY3loMFlYSm5aWFFzSUhCeWIzQnpLU0I3WEc0Z0lDQWdabTl5SUNoMllYSWdhU0E5SURBN0lHa2dQQ0J3Y205d2N5NXNaVzVuZEdnN0lHa3JLeWtnZTF4dUlDQWdJQ0FnZG1GeUlHUmxjMk55YVhCMGIzSWdQU0J3Y205d2MxdHBYVHRjYmlBZ0lDQWdJR1JsYzJOeWFYQjBiM0l1Wlc1MWJXVnlZV0pzWlNBOUlHUmxjMk55YVhCMGIzSXVaVzUxYldWeVlXSnNaU0I4ZkNCbVlXeHpaVHRjYmlBZ0lDQWdJR1JsYzJOeWFYQjBiM0l1WTI5dVptbG5kWEpoWW14bElEMGdkSEoxWlR0Y2JpQWdJQ0FnSUdsbUlDaGNJblpoYkhWbFhDSWdhVzRnWkdWelkzSnBjSFJ2Y2lrZ1pHVnpZM0pwY0hSdmNpNTNjbWwwWVdKc1pTQTlJSFJ5ZFdVN1hHNGdJQ0FnSUNBb01Dd2dYMlJsWm1sdVpWQnliM0JsY25SNU1pNWtaV1poZFd4MEtTaDBZWEpuWlhRc0lHUmxjMk55YVhCMGIzSXVhMlY1TENCa1pYTmpjbWx3ZEc5eUtUdGNiaUFnSUNCOVhHNGdJSDFjYmx4dUlDQnlaWFIxY200Z1puVnVZM1JwYjI0Z0tFTnZibk4wY25WamRHOXlMQ0J3Y205MGIxQnliM0J6TENCemRHRjBhV05RY205d2N5a2dlMXh1SUNBZ0lHbG1JQ2h3Y205MGIxQnliM0J6S1NCa1pXWnBibVZRY205d1pYSjBhV1Z6S0VOdmJuTjBjblZqZEc5eUxuQnliM1J2ZEhsd1pTd2djSEp2ZEc5UWNtOXdjeWs3WEc0Z0lDQWdhV1lnS0hOMFlYUnBZMUJ5YjNCektTQmtaV1pwYm1WUWNtOXdaWEowYVdWektFTnZibk4wY25WamRHOXlMQ0J6ZEdGMGFXTlFjbTl3Y3lrN1hHNGdJQ0FnY21WMGRYSnVJRU52Ym5OMGNuVmpkRzl5TzF4dUlDQjlPMXh1ZlNncE8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMmhsYkhCbGNuTXZZM0psWVhSbFEyeGhjM011YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURFd1hHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVnTmlBM0lEZ2lMQ0p0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLR1Y0WldNcGUxeHVJQ0IwY25rZ2UxeHVJQ0FnSUhKbGRIVnliaUFoSVdWNFpXTW9LVHRjYmlBZ2ZTQmpZWFJqYUNobEtYdGNiaUFnSUNCeVpYUjFjbTRnZEhKMVpUdGNiaUFnZlZ4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJaaGFXeHpMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F4TVZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJRFlnTnlBNElpd2lkbUZ5SUdoaGMwOTNibEJ5YjNCbGNuUjVJRDBnZTMwdWFHRnpUM2R1VUhKdmNHVnlkSGs3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0dsMExDQnJaWGtwZTF4dUlDQnlaWFIxY200Z2FHRnpUM2R1VUhKdmNHVnlkSGt1WTJGc2JDaHBkQ3dnYTJWNUtUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOW9ZWE11YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURFeVhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVpTENJdkx5QjBieUJwYm1SbGVHVmtJRzlpYW1WamRDd2dkRzlQWW1wbFkzUWdkMmwwYUNCbVlXeHNZbUZqYXlCbWIzSWdibTl1TFdGeWNtRjVMV3hwYTJVZ1JWTXpJSE4wY21sdVozTmNiblpoY2lCSlQySnFaV04wSUQwZ2NtVnhkV2x5WlNnbkxpOWZhVzlpYW1WamRDY3BYRzRnSUN3Z1pHVm1hVzVsWkNBOUlISmxjWFZwY21Vb0p5NHZYMlJsWm1sdVpXUW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYVhRcGUxeHVJQ0J5WlhSMWNtNGdTVTlpYW1WamRDaGtaV1pwYm1Wa0tHbDBLU2s3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmZEc4dGFXOWlhbVZqZEM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01UTmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNJc0lpOHZJRzl3ZEdsdmJtRnNJQzhnYzJsdGNHeGxJR052Ym5SbGVIUWdZbWx1WkdsdVoxeHVkbUZ5SUdGR2RXNWpkR2x2YmlBOUlISmxjWFZwY21Vb0p5NHZYMkV0Wm5WdVkzUnBiMjRuS1R0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b1ptNHNJSFJvWVhRc0lHeGxibWQwYUNsN1hHNGdJR0ZHZFc1amRHbHZiaWhtYmlrN1hHNGdJR2xtS0hSb1lYUWdQVDA5SUhWdVpHVm1hVzVsWkNseVpYUjFjbTRnWm00N1hHNGdJSE4zYVhSamFDaHNaVzVuZEdncGUxeHVJQ0FnSUdOaGMyVWdNVG9nY21WMGRYSnVJR1oxYm1OMGFXOXVLR0VwZTF4dUlDQWdJQ0FnY21WMGRYSnVJR1p1TG1OaGJHd29kR2hoZEN3Z1lTazdYRzRnSUNBZ2ZUdGNiaUFnSUNCallYTmxJREk2SUhKbGRIVnliaUJtZFc1amRHbHZiaWhoTENCaUtYdGNiaUFnSUNBZ0lISmxkSFZ5YmlCbWJpNWpZV3hzS0hSb1lYUXNJR0VzSUdJcE8xeHVJQ0FnSUgwN1hHNGdJQ0FnWTJGelpTQXpPaUJ5WlhSMWNtNGdablZ1WTNScGIyNG9ZU3dnWWl3Z1l5bDdYRzRnSUNBZ0lDQnlaWFIxY200Z1ptNHVZMkZzYkNoMGFHRjBMQ0JoTENCaUxDQmpLVHRjYmlBZ0lDQjlPMXh1SUNCOVhHNGdJSEpsZEhWeWJpQm1kVzVqZEdsdmJpZ3ZLaUF1TGk1aGNtZHpJQ292S1h0Y2JpQWdJQ0J5WlhSMWNtNGdabTR1WVhCd2JIa29kR2hoZEN3Z1lYSm5kVzFsYm5SektUdGNiaUFnZlR0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5amRIZ3Vhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREUwWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnaUxDSnRiMlIxYkdVdVpYaHdiM0owY3lBOUlIdDlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjbUYwYjNKekxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXhOVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2liVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaGlhWFJ0WVhBc0lIWmhiSFZsS1h0Y2JpQWdjbVYwZFhKdUlIdGNiaUFnSUNCbGJuVnRaWEpoWW14bElDQTZJQ0VvWW1sMGJXRndJQ1lnTVNrc1hHNGdJQ0FnWTI5dVptbG5kWEpoWW14bE9pQWhLR0pwZEcxaGNDQW1JRElwTEZ4dUlDQWdJSGR5YVhSaFlteGxJQ0FnSURvZ0lTaGlhWFJ0WVhBZ0ppQTBLU3hjYmlBZ0lDQjJZV3gxWlNBZ0lDQWdJQ0E2SUhaaGJIVmxYRzRnSUgwN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmNISnZjR1Z5ZEhrdFpHVnpZeTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTVRaY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklEUWdOU0EySURjZ09DSXNJaTh2SURFNUxqRXVNaTR4TkNBdklERTFMakl1TXk0eE5DQlBZbXBsWTNRdWEyVjVjeWhQS1Z4dWRtRnlJQ1JyWlhseklDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXdGxlWE10YVc1MFpYSnVZV3duS1Z4dUlDQXNJR1Z1ZFcxQ2RXZExaWGx6SUQwZ2NtVnhkV2x5WlNnbkxpOWZaVzUxYlMxaWRXY3RhMlY1Y3ljcE8xeHVYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJRTlpYW1WamRDNXJaWGx6SUh4OElHWjFibU4wYVc5dUlHdGxlWE1vVHlsN1hHNGdJSEpsZEhWeWJpQWthMlY1Y3loUExDQmxiblZ0UW5WblMyVjVjeWs3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMV3RsZVhNdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlERTNYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVaUxDSjJZWElnZEc5VGRISnBibWNnUFNCN2ZTNTBiMU4wY21sdVp6dGNibHh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZENsN1hHNGdJSEpsZEhWeWJpQjBiMU4wY21sdVp5NWpZV3hzS0dsMEtTNXpiR2xqWlNnNExDQXRNU2s3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWTI5bUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXhPRnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lkbUZ5SUdselQySnFaV04wSUQwZ2NtVnhkV2x5WlNnbkxpOWZhWE10YjJKcVpXTjBKeWxjYmlBZ0xDQmtiMk4xYldWdWRDQTlJSEpsY1hWcGNtVW9KeTR2WDJkc2IySmhiQ2NwTG1SdlkzVnRaVzUwWEc0Z0lDOHZJR2x1SUc5c1pDQkpSU0IwZVhCbGIyWWdaRzlqZFcxbGJuUXVZM0psWVhSbFJXeGxiV1Z1ZENCcGN5QW5iMkpxWldOMEoxeHVJQ0FzSUdseklEMGdhWE5QWW1wbFkzUW9aRzlqZFcxbGJuUXBJQ1ltSUdselQySnFaV04wS0dSdlkzVnRaVzUwTG1OeVpXRjBaVVZzWlcxbGJuUXBPMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZENsN1hHNGdJSEpsZEhWeWJpQnBjeUEvSUdSdlkzVnRaVzUwTG1OeVpXRjBaVVZzWlcxbGJuUW9hWFFwSURvZ2UzMDdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZaRzl0TFdOeVpXRjBaUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTVRsY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklEUWdOU0EySURjZ09DSXNJbTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdablZ1WTNScGIyNG9hWFFwZTF4dUlDQnBaaWgwZVhCbGIyWWdhWFFnSVQwZ0oyWjFibU4wYVc5dUp5bDBhSEp2ZHlCVWVYQmxSWEp5YjNJb2FYUWdLeUFuSUdseklHNXZkQ0JoSUdaMWJtTjBhVzl1SVNjcE8xeHVJQ0J5WlhSMWNtNGdhWFE3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWVMxbWRXNWpkR2x2Ymk1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01qQmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNBMklEY2dPQ0lzSW5aaGNpQmtaV1lnUFNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdFpIQW5LUzVtWEc0Z0lDd2dhR0Z6SUQwZ2NtVnhkV2x5WlNnbkxpOWZhR0Z6SnlsY2JpQWdMQ0JVUVVjZ1BTQnlaWEYxYVhKbEtDY3VMMTkzYTNNbktTZ25kRzlUZEhKcGJtZFVZV2NuS1R0Y2JseHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaHBkQ3dnZEdGbkxDQnpkR0YwS1h0Y2JpQWdhV1lvYVhRZ0ppWWdJV2hoY3locGRDQTlJSE4wWVhRZ1B5QnBkQ0E2SUdsMExuQnliM1J2ZEhsd1pTd2dWRUZIS1Nsa1pXWW9hWFFzSUZSQlJ5d2dlMk52Ym1acFozVnlZV0pzWlRvZ2RISjFaU3dnZG1Gc2RXVTZJSFJoWjMwcE8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzTmxkQzEwYnkxemRISnBibWN0ZEdGbkxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXlNVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lMeThnTnk0eExqRWdWRzlRY21sdGFYUnBkbVVvYVc1d2RYUWdXeXdnVUhKbFptVnljbVZrVkhsd1pWMHBYRzUyWVhJZ2FYTlBZbXBsWTNRZ1BTQnlaWEYxYVhKbEtDY3VMMTlwY3kxdlltcGxZM1FuS1R0Y2JpOHZJR2x1YzNSbFlXUWdiMllnZEdobElFVlROaUJ6Y0dWaklIWmxjbk5wYjI0c0lIZGxJR1JwWkc0bmRDQnBiWEJzWlcxbGJuUWdRRUIwYjFCeWFXMXBkR2wyWlNCallYTmxYRzR2THlCaGJtUWdkR2hsSUhObFkyOXVaQ0JoY21kMWJXVnVkQ0F0SUdac1lXY2dMU0J3Y21WbVpYSnlaV1FnZEhsd1pTQnBjeUJoSUhOMGNtbHVaMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZEN3Z1V5bDdYRzRnSUdsbUtDRnBjMDlpYW1WamRDaHBkQ2twY21WMGRYSnVJR2wwTzF4dUlDQjJZWElnWm00c0lIWmhiRHRjYmlBZ2FXWW9VeUFtSmlCMGVYQmxiMllnS0dadUlEMGdhWFF1ZEc5VGRISnBibWNwSUQwOUlDZG1kVzVqZEdsdmJpY2dKaVlnSVdselQySnFaV04wS0haaGJDQTlJR1p1TG1OaGJHd29hWFFwS1NseVpYUjFjbTRnZG1Gc08xeHVJQ0JwWmloMGVYQmxiMllnS0dadUlEMGdhWFF1ZG1Gc2RXVlBaaWtnUFQwZ0oyWjFibU4wYVc5dUp5QW1KaUFoYVhOUFltcGxZM1FvZG1Gc0lEMGdabTR1WTJGc2JDaHBkQ2twS1hKbGRIVnliaUIyWVd3N1hHNGdJR2xtS0NGVElDWW1JSFI1Y0dWdlppQW9abTRnUFNCcGRDNTBiMU4wY21sdVp5a2dQVDBnSjJaMWJtTjBhVzl1SnlBbUppQWhhWE5QWW1wbFkzUW9kbUZzSUQwZ1ptNHVZMkZzYkNocGRDa3BLWEpsZEhWeWJpQjJZV3c3WEc0Z0lIUm9jbTkzSUZSNWNHVkZjbkp2Y2loY0lrTmhiaWQwSUdOdmJuWmxjblFnYjJKcVpXTjBJSFJ2SUhCeWFXMXBkR2wyWlNCMllXeDFaVndpS1R0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5MGJ5MXdjbWx0YVhScGRtVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREl5WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnaUxDSjJZWElnYVdRZ1BTQXdYRzRnSUN3Z2NIZ2dQU0JOWVhSb0xuSmhibVJ2YlNncE8xeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaHJaWGtwZTF4dUlDQnlaWFIxY200Z0oxTjViV0p2YkNnbkxtTnZibU5oZENoclpYa2dQVDA5SUhWdVpHVm1hVzVsWkNBL0lDY25JRG9nYTJWNUxDQW5LVjhuTENBb0t5dHBaQ0FySUhCNEtTNTBiMU4wY21sdVp5Z3pOaWtwTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNWcFpDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNak5jYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJaTh2SURjdU1pNHhJRkpsY1hWcGNtVlBZbXBsWTNSRGIyVnlZMmxpYkdVb1lYSm5kVzFsYm5RcFhHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlHWjFibU4wYVc5dUtHbDBLWHRjYmlBZ2FXWW9hWFFnUFQwZ2RXNWtaV1pwYm1Wa0tYUm9jbTkzSUZSNWNHVkZjbkp2Y2loY0lrTmhiaWQwSUdOaGJHd2diV1YwYUc5a0lHOXVJQ0JjSWlBcklHbDBLVHRjYmlBZ2NtVjBkWEp1SUdsME8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyUmxabWx1WldRdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlESTBYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVaUxDSnRiMlIxYkdVdVpYaHdiM0owY3lBOUlIUnlkV1U3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXNhV0p5WVhKNUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXlOVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lkbUZ5SUhOb1lYSmxaQ0E5SUhKbGNYVnBjbVVvSnk0dlgzTm9ZWEpsWkNjcEtDZHJaWGx6SnlsY2JpQWdMQ0IxYVdRZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5MWFXUW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYTJWNUtYdGNiaUFnY21WMGRYSnVJSE5vWVhKbFpGdHJaWGxkSUh4OElDaHphR0Z5WldSYmEyVjVYU0E5SUhWcFpDaHJaWGtwS1R0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5emFHRnlaV1F0YTJWNUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXlObHh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lMeThnTnk0eExqUWdWRzlKYm5SbFoyVnlYRzUyWVhJZ1kyVnBiQ0FnUFNCTllYUm9MbU5sYVd4Y2JpQWdMQ0JtYkc5dmNpQTlJRTFoZEdndVpteHZiM0k3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0dsMEtYdGNiaUFnY21WMGRYSnVJR2x6VG1GT0tHbDBJRDBnSzJsMEtTQS9JREFnT2lBb2FYUWdQaUF3SUQ4Z1pteHZiM0lnT2lCalpXbHNLU2hwZENrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmRHOHRhVzUwWldkbGNpNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNamRjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJaTh2SUVsRklEZ3RJR1J2YmlkMElHVnVkVzBnWW5WbklHdGxlWE5jYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnS0Z4dUlDQW5ZMjl1YzNSeWRXTjBiM0lzYUdGelQzZHVVSEp2Y0dWeWRIa3NhWE5RY205MGIzUjVjR1ZQWml4d2NtOXdaWEowZVVselJXNTFiV1Z5WVdKc1pTeDBiMHh2WTJGc1pWTjBjbWx1Wnl4MGIxTjBjbWx1Wnl4MllXeDFaVTltSjF4dUtTNXpjR3hwZENnbkxDY3BPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZlpXNTFiUzFpZFdjdGEyVjVjeTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTWpoY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklEUWdOU0lzSW0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnSVhKbGNYVnBjbVVvSnk0dlgyUmxjMk55YVhCMGIzSnpKeWtnSmlZZ0lYSmxjWFZwY21Vb0p5NHZYMlpoYVd4ekp5a29ablZ1WTNScGIyNG9LWHRjYmlBZ2NtVjBkWEp1SUU5aWFtVmpkQzVrWldacGJtVlFjbTl3WlhKMGVTaHlaWEYxYVhKbEtDY3VMMTlrYjIwdFkzSmxZWFJsSnlrb0oyUnBkaWNwTENBbllTY3NJSHRuWlhRNklHWjFibU4wYVc5dUtDbDdJSEpsZEhWeWJpQTNPeUI5ZlNrdVlTQWhQU0EzTzF4dWZTazdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5cFpUZ3RaRzl0TFdSbFptbHVaUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTWpsY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklEUWdOU0EySURjZ09DSXNJblpoY2lCbmJHOWlZV3dnUFNCeVpYRjFhWEpsS0NjdUwxOW5iRzlpWVd3bktWeHVJQ0FzSUZOSVFWSkZSQ0E5SUNkZlgyTnZjbVV0YW5OZmMyaGhjbVZrWDE4blhHNGdJQ3dnYzNSdmNtVWdJRDBnWjJ4dlltRnNXMU5JUVZKRlJGMGdmSHdnS0dkc2IySmhiRnRUU0VGU1JVUmRJRDBnZTMwcE8xeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaHJaWGtwZTF4dUlDQnlaWFIxY200Z2MzUnZjbVZiYTJWNVhTQjhmQ0FvYzNSdmNtVmJhMlY1WFNBOUlIdDlLVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl6YUdGeVpXUXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRE13WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0p0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSHNnWENKa1pXWmhkV3gwWENJNklISmxjWFZwY21Vb1hDSmpiM0psTFdwekwyeHBZbkpoY25rdlptNHZiMkpxWldOMEwyZGxkQzF3Y205MGIzUjVjR1V0YjJaY0lpa3NJRjlmWlhOTmIyUjFiR1U2SUhSeWRXVWdmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5amIzSmxMV3B6TDI5aWFtVmpkQzluWlhRdGNISnZkRzkwZVhCbExXOW1MbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F6TVZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSXZMeUEzTGpFdU1UTWdWRzlQWW1wbFkzUW9ZWEpuZFcxbGJuUXBYRzUyWVhJZ1pHVm1hVzVsWkNBOUlISmxjWFZwY21Vb0p5NHZYMlJsWm1sdVpXUW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYVhRcGUxeHVJQ0J5WlhSMWNtNGdUMkpxWldOMEtHUmxabWx1WldRb2FYUXBLVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTkwYnkxdlltcGxZM1F1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURNeVhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVpTENKY0luVnpaU0J6ZEhKcFkzUmNJanRjYmx4dVpYaHdiM0owY3k1ZlgyVnpUVzlrZFd4bElEMGdkSEoxWlR0Y2JseHVkbUZ5SUY5elpYUlFjbTkwYjNSNWNHVlBaaUE5SUhKbGNYVnBjbVVvWENJdUxpOWpiM0psTFdwekwyOWlhbVZqZEM5elpYUXRjSEp2ZEc5MGVYQmxMVzltWENJcE8xeHVYRzUyWVhJZ1gzTmxkRkJ5YjNSdmRIbHdaVTltTWlBOUlGOXBiblJsY205d1VtVnhkV2x5WlVSbFptRjFiSFFvWDNObGRGQnliM1J2ZEhsd1pVOW1LVHRjYmx4dWRtRnlJRjlqY21WaGRHVWdQU0J5WlhGMWFYSmxLRndpTGk0dlkyOXlaUzFxY3k5dlltcGxZM1F2WTNKbFlYUmxYQ0lwTzF4dVhHNTJZWElnWDJOeVpXRjBaVElnUFNCZmFXNTBaWEp2Y0ZKbGNYVnBjbVZFWldaaGRXeDBLRjlqY21WaGRHVXBPMXh1WEc1MllYSWdYM1I1Y0dWdlpqSWdQU0J5WlhGMWFYSmxLRndpTGk0dmFHVnNjR1Z5Y3k5MGVYQmxiMlpjSWlrN1hHNWNiblpoY2lCZmRIbHdaVzltTXlBOUlGOXBiblJsY205d1VtVnhkV2x5WlVSbFptRjFiSFFvWDNSNWNHVnZaaklwTzF4dVhHNW1kVzVqZEdsdmJpQmZhVzUwWlhKdmNGSmxjWFZwY21WRVpXWmhkV3gwS0c5aWFpa2dleUJ5WlhSMWNtNGdiMkpxSUNZbUlHOWlhaTVmWDJWelRXOWtkV3hsSUQ4Z2IySnFJRG9nZXlCa1pXWmhkV3gwT2lCdlltb2dmVHNnZlZ4dVhHNWxlSEJ2Y25SekxtUmxabUYxYkhRZ1BTQm1kVzVqZEdsdmJpQW9jM1ZpUTJ4aGMzTXNJSE4xY0dWeVEyeGhjM01wSUh0Y2JpQWdhV1lnS0hSNWNHVnZaaUJ6ZFhCbGNrTnNZWE56SUNFOVBTQmNJbVoxYm1OMGFXOXVYQ0lnSmlZZ2MzVndaWEpEYkdGemN5QWhQVDBnYm5Wc2JDa2dlMXh1SUNBZ0lIUm9jbTkzSUc1bGR5QlVlWEJsUlhKeWIzSW9YQ0pUZFhCbGNpQmxlSEJ5WlhOemFXOXVJRzExYzNRZ1pXbDBhR1Z5SUdKbElHNTFiR3dnYjNJZ1lTQm1kVzVqZEdsdmJpd2dibTkwSUZ3aUlDc2dLSFI1Y0dWdlppQnpkWEJsY2tOc1lYTnpJRDA5UFNCY0luVnVaR1ZtYVc1bFpGd2lJRDhnWENKMWJtUmxabWx1WldSY0lpQTZJQ2d3TENCZmRIbHdaVzltTXk1a1pXWmhkV3gwS1NoemRYQmxja05zWVhOektTa3BPMXh1SUNCOVhHNWNiaUFnYzNWaVEyeGhjM011Y0hKdmRHOTBlWEJsSUQwZ0tEQXNJRjlqY21WaGRHVXlMbVJsWm1GMWJIUXBLSE4xY0dWeVEyeGhjM01nSmlZZ2MzVndaWEpEYkdGemN5NXdjbTkwYjNSNWNHVXNJSHRjYmlBZ0lDQmpiMjV6ZEhKMVkzUnZjam9nZTF4dUlDQWdJQ0FnZG1Gc2RXVTZJSE4xWWtOc1lYTnpMRnh1SUNBZ0lDQWdaVzUxYldWeVlXSnNaVG9nWm1Gc2MyVXNYRzRnSUNBZ0lDQjNjbWwwWVdKc1pUb2dkSEoxWlN4Y2JpQWdJQ0FnSUdOdmJtWnBaM1Z5WVdKc1pUb2dkSEoxWlZ4dUlDQWdJSDFjYmlBZ2ZTazdYRzRnSUdsbUlDaHpkWEJsY2tOc1lYTnpLU0JmYzJWMFVISnZkRzkwZVhCbFQyWXlMbVJsWm1GMWJIUWdQeUFvTUN3Z1gzTmxkRkJ5YjNSdmRIbHdaVTltTWk1a1pXWmhkV3gwS1NoemRXSkRiR0Z6Y3l3Z2MzVndaWEpEYkdGemN5a2dPaUJ6ZFdKRGJHRnpjeTVmWDNCeWIzUnZYMThnUFNCemRYQmxja05zWVhOek8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5b1pXeHdaWEp6TDJsdWFHVnlhWFJ6TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBek0xeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWlMQ0pjSW5WelpTQnpkSEpwWTNSY0lqdGNibHh1Wlhod2IzSjBjeTVmWDJWelRXOWtkV3hsSUQwZ2RISjFaVHRjYmx4dWRtRnlJRjkwZVhCbGIyWXlJRDBnY21WeGRXbHlaU2hjSWk0dUwyaGxiSEJsY25NdmRIbHdaVzltWENJcE8xeHVYRzUyWVhJZ1gzUjVjR1Z2WmpNZ1BTQmZhVzUwWlhKdmNGSmxjWFZwY21WRVpXWmhkV3gwS0Y5MGVYQmxiMll5S1R0Y2JseHVablZ1WTNScGIyNGdYMmx1ZEdWeWIzQlNaWEYxYVhKbFJHVm1ZWFZzZENodlltb3BJSHNnY21WMGRYSnVJRzlpYWlBbUppQnZZbW91WDE5bGMwMXZaSFZzWlNBL0lHOWlhaUE2SUhzZ1pHVm1ZWFZzZERvZ2IySnFJSDA3SUgxY2JseHVaWGh3YjNKMGN5NWtaV1poZFd4MElEMGdablZ1WTNScGIyNGdLSE5sYkdZc0lHTmhiR3dwSUh0Y2JpQWdhV1lnS0NGelpXeG1LU0I3WEc0Z0lDQWdkR2h5YjNjZ2JtVjNJRkpsWm1WeVpXNWpaVVZ5Y205eUtGd2lkR2hwY3lCb1lYTnVKM1FnWW1WbGJpQnBibWwwYVdGc2FYTmxaQ0F0SUhOMWNHVnlLQ2tnYUdGemJpZDBJR0psWlc0Z1kyRnNiR1ZrWENJcE8xeHVJQ0I5WEc1Y2JpQWdjbVYwZFhKdUlHTmhiR3dnSmlZZ0tDaDBlWEJsYjJZZ1kyRnNiQ0E5UFQwZ1hDSjFibVJsWm1sdVpXUmNJaUEvSUZ3aWRXNWtaV1pwYm1Wa1hDSWdPaUFvTUN3Z1gzUjVjR1Z2WmpNdVpHVm1ZWFZzZENrb1kyRnNiQ2twSUQwOVBTQmNJbTlpYW1WamRGd2lJSHg4SUhSNWNHVnZaaUJqWVd4c0lEMDlQU0JjSW1aMWJtTjBhVzl1WENJcElEOGdZMkZzYkNBNklITmxiR1k3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMmhsYkhCbGNuTXZjRzl6YzJsaWJHVkRiMjV6ZEhKMVkzUnZjbEpsZEhWeWJpNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNelJjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aUx5OGdNVGt1TVM0eUxqSWdMeUF4TlM0eUxqTXVOU0JQWW1wbFkzUXVZM0psWVhSbEtFOGdXeXdnVUhKdmNHVnlkR2xsYzEwcFhHNTJZWElnWVc1UFltcGxZM1FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTloYmkxdlltcGxZM1FuS1Z4dUlDQXNJR1JRY3lBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXUndjeWNwWEc0Z0lDd2daVzUxYlVKMVowdGxlWE1nUFNCeVpYRjFhWEpsS0NjdUwxOWxiblZ0TFdKMVp5MXJaWGx6SnlsY2JpQWdMQ0JKUlY5UVVrOVVUeUFnSUNBOUlISmxjWFZwY21Vb0p5NHZYM05vWVhKbFpDMXJaWGtuS1NnblNVVmZVRkpQVkU4bktWeHVJQ0FzSUVWdGNIUjVJQ0FnSUNBZ0lEMGdablZ1WTNScGIyNG9LWHNnTHlvZ1pXMXdkSGtnS2k4Z2ZWeHVJQ0FzSUZCU1QxUlBWRmxRUlNBZ0lEMGdKM0J5YjNSdmRIbHdaU2M3WEc1Y2JpOHZJRU55WldGMFpTQnZZbXBsWTNRZ2QybDBhQ0JtWVd0bElHQnVkV3hzWUNCd2NtOTBiM1I1Y0dVNklIVnpaU0JwWm5KaGJXVWdUMkpxWldOMElIZHBkR2dnWTJ4bFlYSmxaQ0J3Y205MGIzUjVjR1ZjYm5aaGNpQmpjbVZoZEdWRWFXTjBJRDBnWm5WdVkzUnBiMjRvS1h0Y2JpQWdMeThnVkdoeVlYTm9MQ0IzWVhOMFpTQmhibVFnYzI5a2IyMTVPaUJKUlNCSFF5QmlkV2RjYmlBZ2RtRnlJR2xtY21GdFpTQTlJSEpsY1hWcGNtVW9KeTR2WDJSdmJTMWpjbVZoZEdVbktTZ25hV1p5WVcxbEp5bGNiaUFnSUNBc0lHa2dJQ0FnSUNBOUlHVnVkVzFDZFdkTFpYbHpMbXhsYm1kMGFGeHVJQ0FnSUN3Z2JIUWdJQ0FnSUQwZ0p6d25YRzRnSUNBZ0xDQm5kQ0FnSUNBZ1BTQW5QaWRjYmlBZ0lDQXNJR2xtY21GdFpVUnZZM1Z0Wlc1ME8xeHVJQ0JwWm5KaGJXVXVjM1I1YkdVdVpHbHpjR3hoZVNBOUlDZHViMjVsSnp0Y2JpQWdjbVZ4ZFdseVpTZ25MaTlmYUhSdGJDY3BMbUZ3Y0dWdVpFTm9hV3hrS0dsbWNtRnRaU2s3WEc0Z0lHbG1jbUZ0WlM1emNtTWdQU0FuYW1GMllYTmpjbWx3ZERvbk95QXZMeUJsYzJ4cGJuUXRaR2x6WVdKc1pTMXNhVzVsSUc1dkxYTmpjbWx3ZEMxMWNteGNiaUFnTHk4Z1kzSmxZWFJsUkdsamRDQTlJR2xtY21GdFpTNWpiMjUwWlc1MFYybHVaRzkzTGs5aWFtVmpkRHRjYmlBZ0x5OGdhSFJ0YkM1eVpXMXZkbVZEYUdsc1pDaHBabkpoYldVcE8xeHVJQ0JwWm5KaGJXVkViMk4xYldWdWRDQTlJR2xtY21GdFpTNWpiMjUwWlc1MFYybHVaRzkzTG1SdlkzVnRaVzUwTzF4dUlDQnBabkpoYldWRWIyTjFiV1Z1ZEM1dmNHVnVLQ2s3WEc0Z0lHbG1jbUZ0WlVSdlkzVnRaVzUwTG5keWFYUmxLR3gwSUNzZ0ozTmpjbWx3ZENjZ0t5Qm5kQ0FySUNka2IyTjFiV1Z1ZEM1R1BVOWlhbVZqZENjZ0t5QnNkQ0FySUNjdmMyTnlhWEIwSnlBcklHZDBLVHRjYmlBZ2FXWnlZVzFsUkc5amRXMWxiblF1WTJ4dmMyVW9LVHRjYmlBZ1kzSmxZWFJsUkdsamRDQTlJR2xtY21GdFpVUnZZM1Z0Wlc1MExrWTdYRzRnSUhkb2FXeGxLR2t0TFNsa1pXeGxkR1VnWTNKbFlYUmxSR2xqZEZ0UVVrOVVUMVJaVUVWZFcyVnVkVzFDZFdkTFpYbHpXMmxkWFR0Y2JpQWdjbVYwZFhKdUlHTnlaV0YwWlVScFkzUW9LVHRjYm4wN1hHNWNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdUMkpxWldOMExtTnlaV0YwWlNCOGZDQm1kVzVqZEdsdmJpQmpjbVZoZEdVb1R5d2dVSEp2Y0dWeWRHbGxjeWw3WEc0Z0lIWmhjaUJ5WlhOMWJIUTdYRzRnSUdsbUtFOGdJVDA5SUc1MWJHd3BlMXh1SUNBZ0lFVnRjSFI1VzFCU1QxUlBWRmxRUlYwZ1BTQmhiazlpYW1WamRDaFBLVHRjYmlBZ0lDQnlaWE4xYkhRZ1BTQnVaWGNnUlcxd2RIazdYRzRnSUNBZ1JXMXdkSGxiVUZKUFZFOVVXVkJGWFNBOUlHNTFiR3c3WEc0Z0lDQWdMeThnWVdSa0lGd2lYMTl3Y205MGIxOWZYQ0lnWm05eUlFOWlhbVZqZEM1blpYUlFjbTkwYjNSNWNHVlBaaUJ3YjJ4NVptbHNiRnh1SUNBZ0lISmxjM1ZzZEZ0SlJWOVFVazlVVDEwZ1BTQlBPMXh1SUNCOUlHVnNjMlVnY21WemRXeDBJRDBnWTNKbFlYUmxSR2xqZENncE8xeHVJQ0J5WlhSMWNtNGdVSEp2Y0dWeWRHbGxjeUE5UFQwZ2RXNWtaV1pwYm1Wa0lEOGdjbVZ6ZFd4MElEb2daRkJ6S0hKbGMzVnNkQ3dnVUhKdmNHVnlkR2xsY3lrN1hHNTlPMXh1WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXZZbXBsWTNRdFkzSmxZWFJsTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBek5WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCN0lGd2laR1ZtWVhWc2RGd2lPaUJ5WlhGMWFYSmxLRndpWTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzlrWldacGJtVXRjSEp2Y0dWeWRIbGNJaWtzSUY5ZlpYTk5iMlIxYkdVNklIUnlkV1VnZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WW1GaVpXd3RjblZ1ZEdsdFpTOWpiM0psTFdwekwyOWlhbVZqZEM5a1pXWnBibVV0Y0hKdmNHVnlkSGt1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURNMlhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVnTmlBM0lEZ2lMQ0p5WlhGMWFYSmxLQ2N1TGk4dUxpOXRiMlIxYkdWekwyVnpOaTV2WW1wbFkzUXVaR1ZtYVc1bExYQnliM0JsY25SNUp5azdYRzUyWVhJZ0pFOWlhbVZqZENBOUlISmxjWFZwY21Vb0p5NHVMeTR1TDIxdlpIVnNaWE12WDJOdmNtVW5LUzVQWW1wbFkzUTdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVJR1JsWm1sdVpWQnliM0JsY25SNUtHbDBMQ0JyWlhrc0lHUmxjMk1wZTF4dUlDQnlaWFIxY200Z0pFOWlhbVZqZEM1a1pXWnBibVZRY205d1pYSjBlU2hwZEN3Z2EyVjVMQ0JrWlhOaktUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl2WW1wbFkzUXZaR1ZtYVc1bExYQnliM0JsY25SNUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXpOMXh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlEWWdOeUE0SWl3aUozVnpaU0J6ZEhKcFkzUW5PMXh1ZG1GeUlFeEpRbEpCVWxrZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiR2xpY21GeWVTY3BYRzRnSUN3Z0pHVjRjRzl5ZENBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWxlSEJ2Y25RbktWeHVJQ0FzSUhKbFpHVm1hVzVsSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmNtVmtaV1pwYm1VbktWeHVJQ0FzSUdocFpHVWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFHbGtaU2NwWEc0Z0lDd2dhR0Z6SUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlvWVhNbktWeHVJQ0FzSUVsMFpYSmhkRzl5Y3lBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFYUmxjbUYwYjNKekp5bGNiaUFnTENBa2FYUmxja055WldGMFpTQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgybDBaWEl0WTNKbFlYUmxKeWxjYmlBZ0xDQnpaWFJVYjFOMGNtbHVaMVJoWnlBOUlISmxjWFZwY21Vb0p5NHZYM05sZEMxMGJ5MXpkSEpwYm1jdGRHRm5KeWxjYmlBZ0xDQm5aWFJRY205MGIzUjVjR1ZQWmlBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMW5jRzhuS1Z4dUlDQXNJRWxVUlZKQlZFOVNJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmZDJ0ekp5a29KMmwwWlhKaGRHOXlKeWxjYmlBZ0xDQkNWVWRIV1NBZ0lDQWdJQ0FnSUNBOUlDRW9XMTB1YTJWNWN5QW1KaUFuYm1WNGRDY2dhVzRnVzEwdWEyVjVjeWdwS1NBdkx5QlRZV1poY21rZ2FHRnpJR0oxWjJkNUlHbDBaWEpoZEc5eWN5QjNMMjhnWUc1bGVIUmdYRzRnSUN3Z1JrWmZTVlJGVWtGVVQxSWdJQ0FnUFNBblFFQnBkR1Z5WVhSdmNpZGNiaUFnTENCTFJWbFRJQ0FnSUNBZ0lDQWdJQ0E5SUNkclpYbHpKMXh1SUNBc0lGWkJURlZGVXlBZ0lDQWdJQ0FnSUQwZ0ozWmhiSFZsY3ljN1hHNWNiblpoY2lCeVpYUjFjbTVVYUdseklEMGdablZ1WTNScGIyNG9LWHNnY21WMGRYSnVJSFJvYVhNN0lIMDdYRzVjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvUW1GelpTd2dUa0ZOUlN3Z1EyOXVjM1J5ZFdOMGIzSXNJRzVsZUhRc0lFUkZSa0ZWVEZRc0lFbFRYMU5GVkN3Z1JrOVNRMFZFS1h0Y2JpQWdKR2wwWlhKRGNtVmhkR1VvUTI5dWMzUnlkV04wYjNJc0lFNUJUVVVzSUc1bGVIUXBPMXh1SUNCMllYSWdaMlYwVFdWMGFHOWtJRDBnWm5WdVkzUnBiMjRvYTJsdVpDbDdYRzRnSUNBZ2FXWW9JVUpWUjBkWklDWW1JR3RwYm1RZ2FXNGdjSEp2ZEc4cGNtVjBkWEp1SUhCeWIzUnZXMnRwYm1SZE8xeHVJQ0FnSUhOM2FYUmphQ2hyYVc1a0tYdGNiaUFnSUNBZ0lHTmhjMlVnUzBWWlV6b2djbVYwZFhKdUlHWjFibU4wYVc5dUlHdGxlWE1vS1hzZ2NtVjBkWEp1SUc1bGR5QkRiMjV6ZEhKMVkzUnZjaWgwYUdsekxDQnJhVzVrS1RzZ2ZUdGNiaUFnSUNBZ0lHTmhjMlVnVmtGTVZVVlRPaUJ5WlhSMWNtNGdablZ1WTNScGIyNGdkbUZzZFdWektDbDdJSEpsZEhWeWJpQnVaWGNnUTI5dWMzUnlkV04wYjNJb2RHaHBjeXdnYTJsdVpDazdJSDA3WEc0Z0lDQWdmU0J5WlhSMWNtNGdablZ1WTNScGIyNGdaVzUwY21sbGN5Z3BleUJ5WlhSMWNtNGdibVYzSUVOdmJuTjBjblZqZEc5eUtIUm9hWE1zSUd0cGJtUXBPeUI5TzF4dUlDQjlPMXh1SUNCMllYSWdWRUZISUNBZ0lDQWdJQ0E5SUU1QlRVVWdLeUFuSUVsMFpYSmhkRzl5SjF4dUlDQWdJQ3dnUkVWR1gxWkJURlZGVXlBOUlFUkZSa0ZWVEZRZ1BUMGdWa0ZNVlVWVFhHNGdJQ0FnTENCV1FVeFZSVk5mUWxWSElEMGdabUZzYzJWY2JpQWdJQ0FzSUhCeWIzUnZJQ0FnSUNBZ1BTQkNZWE5sTG5CeWIzUnZkSGx3WlZ4dUlDQWdJQ3dnSkc1aGRHbDJaU0FnSUNBOUlIQnliM1J2VzBsVVJWSkJWRTlTWFNCOGZDQndjbTkwYjF0R1JsOUpWRVZTUVZSUFVsMGdmSHdnUkVWR1FWVk1WQ0FtSmlCd2NtOTBiMXRFUlVaQlZVeFVYVnh1SUNBZ0lDd2dKR1JsWm1GMWJIUWdJQ0E5SUNSdVlYUnBkbVVnZkh3Z1oyVjBUV1YwYUc5a0tFUkZSa0ZWVEZRcFhHNGdJQ0FnTENBa1pXNTBjbWxsY3lBZ0lEMGdSRVZHUVZWTVZDQS9JQ0ZFUlVaZlZrRk1WVVZUSUQ4Z0pHUmxabUYxYkhRZ09pQm5aWFJOWlhSb2IyUW9KMlZ1ZEhKcFpYTW5LU0E2SUhWdVpHVm1hVzVsWkZ4dUlDQWdJQ3dnSkdGdWVVNWhkR2wyWlNBOUlFNUJUVVVnUFQwZ0owRnljbUY1SnlBL0lIQnliM1J2TG1WdWRISnBaWE1nZkh3Z0pHNWhkR2wyWlNBNklDUnVZWFJwZG1WY2JpQWdJQ0FzSUcxbGRHaHZaSE1zSUd0bGVTd2dTWFJsY21GMGIzSlFjbTkwYjNSNWNHVTdYRzRnSUM4dklFWnBlQ0J1WVhScGRtVmNiaUFnYVdZb0pHRnVlVTVoZEdsMlpTbDdYRzRnSUNBZ1NYUmxjbUYwYjNKUWNtOTBiM1I1Y0dVZ1BTQm5aWFJRY205MGIzUjVjR1ZQWmlna1lXNTVUbUYwYVhabExtTmhiR3dvYm1WM0lFSmhjMlVwS1R0Y2JpQWdJQ0JwWmloSmRHVnlZWFJ2Y2xCeWIzUnZkSGx3WlNBaFBUMGdUMkpxWldOMExuQnliM1J2ZEhsd1pTbDdYRzRnSUNBZ0lDQXZMeUJUWlhRZ1FFQjBiMU4wY21sdVoxUmhaeUIwYnlCdVlYUnBkbVVnYVhSbGNtRjBiM0p6WEc0Z0lDQWdJQ0J6WlhSVWIxTjBjbWx1WjFSaFp5aEpkR1Z5WVhSdmNsQnliM1J2ZEhsd1pTd2dWRUZITENCMGNuVmxLVHRjYmlBZ0lDQWdJQzh2SUdacGVDQm1iM0lnYzI5dFpTQnZiR1FnWlc1bmFXNWxjMXh1SUNBZ0lDQWdhV1lvSVV4SlFsSkJVbGtnSmlZZ0lXaGhjeWhKZEdWeVlYUnZjbEJ5YjNSdmRIbHdaU3dnU1ZSRlVrRlVUMUlwS1docFpHVW9TWFJsY21GMGIzSlFjbTkwYjNSNWNHVXNJRWxVUlZKQlZFOVNMQ0J5WlhSMWNtNVVhR2x6S1R0Y2JpQWdJQ0I5WEc0Z0lIMWNiaUFnTHk4Z1ptbDRJRUZ5Y21GNUkzdDJZV3gxWlhNc0lFQkFhWFJsY21GMGIzSjlMbTVoYldVZ2FXNGdWamdnTHlCR1JseHVJQ0JwWmloRVJVWmZWa0ZNVlVWVElDWW1JQ1J1WVhScGRtVWdKaVlnSkc1aGRHbDJaUzV1WVcxbElDRTlQU0JXUVV4VlJWTXBlMXh1SUNBZ0lGWkJURlZGVTE5Q1ZVY2dQU0IwY25WbE8xeHVJQ0FnSUNSa1pXWmhkV3gwSUQwZ1puVnVZM1JwYjI0Z2RtRnNkV1Z6S0NsN0lISmxkSFZ5YmlBa2JtRjBhWFpsTG1OaGJHd29kR2hwY3lrN0lIMDdYRzRnSUgxY2JpQWdMeThnUkdWbWFXNWxJR2wwWlhKaGRHOXlYRzRnSUdsbUtDZ2hURWxDVWtGU1dTQjhmQ0JHVDFKRFJVUXBJQ1ltSUNoQ1ZVZEhXU0I4ZkNCV1FVeFZSVk5mUWxWSElIeDhJQ0Z3Y205MGIxdEpWRVZTUVZSUFVsMHBLWHRjYmlBZ0lDQm9hV1JsS0hCeWIzUnZMQ0JKVkVWU1FWUlBVaXdnSkdSbFptRjFiSFFwTzF4dUlDQjlYRzRnSUM4dklGQnNkV2NnWm05eUlHeHBZbkpoY25sY2JpQWdTWFJsY21GMGIzSnpXMDVCVFVWZElEMGdKR1JsWm1GMWJIUTdYRzRnSUVsMFpYSmhkRzl5YzF0VVFVZGRJQ0E5SUhKbGRIVnlibFJvYVhNN1hHNGdJR2xtS0VSRlJrRlZURlFwZTF4dUlDQWdJRzFsZEdodlpITWdQU0I3WEc0Z0lDQWdJQ0IyWVd4MVpYTTZJQ0JFUlVaZlZrRk1WVVZUSUQ4Z0pHUmxabUYxYkhRZ09pQm5aWFJOWlhSb2IyUW9Wa0ZNVlVWVEtTeGNiaUFnSUNBZ0lHdGxlWE02SUNBZ0lFbFRYMU5GVkNBZ0lDQWdQeUFrWkdWbVlYVnNkQ0E2SUdkbGRFMWxkR2h2WkNoTFJWbFRLU3hjYmlBZ0lDQWdJR1Z1ZEhKcFpYTTZJQ1JsYm5SeWFXVnpYRzRnSUNBZ2ZUdGNiaUFnSUNCcFppaEdUMUpEUlVRcFptOXlLR3RsZVNCcGJpQnRaWFJvYjJSektYdGNiaUFnSUNBZ0lHbG1LQ0VvYTJWNUlHbHVJSEJ5YjNSdktTbHlaV1JsWm1sdVpTaHdjbTkwYnl3Z2EyVjVMQ0J0WlhSb2IyUnpXMnRsZVYwcE8xeHVJQ0FnSUgwZ1pXeHpaU0FrWlhod2IzSjBLQ1JsZUhCdmNuUXVVQ0FySUNSbGVIQnZjblF1UmlBcUlDaENWVWRIV1NCOGZDQldRVXhWUlZOZlFsVkhLU3dnVGtGTlJTd2diV1YwYUc5a2N5azdYRzRnSUgxY2JpQWdjbVYwZFhKdUlHMWxkR2h2WkhNN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTFrWldacGJtVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRE00WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0oyWVhJZ0pHVjRjRzl5ZENBOUlISmxjWFZwY21Vb0p5NHZYMlY0Y0c5eWRDY3BPMXh1THk4Z01Ua3VNUzR5TGpRZ0x5QXhOUzR5TGpNdU5pQlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvVHl3Z1VDd2dRWFIwY21saWRYUmxjeWxjYmlSbGVIQnZjblFvSkdWNGNHOXlkQzVUSUNzZ0pHVjRjRzl5ZEM1R0lDb2dJWEpsY1hWcGNtVW9KeTR2WDJSbGMyTnlhWEIwYjNKekp5a3NJQ2RQWW1wbFkzUW5MQ0I3WkdWbWFXNWxVSEp2Y0dWeWRIazZJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFrY0NjcExtWjlLVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbTlpYW1WamRDNWtaV1pwYm1VdGNISnZjR1Z5ZEhrdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlETTVYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVZ05pQTNJRGdpTENKdGIyUjFiR1V1Wlhod2IzSjBjeUE5SUhzZ1hDSmtaV1poZFd4MFhDSTZJSEpsY1hWcGNtVW9YQ0pqYjNKbExXcHpMMnhwWW5KaGNua3ZabTR2YW5OdmJpOXpkSEpwYm1kcFpubGNJaWtzSUY5ZlpYTk5iMlIxYkdVNklIUnlkV1VnZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WW1GaVpXd3RjblZ1ZEdsdFpTOWpiM0psTFdwekwycHpiMjR2YzNSeWFXNW5hV1o1TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBME1GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSURZaUxDSmxlSEJ2Y25SekxtWWdQU0I3ZlM1d2NtOXdaWEowZVVselJXNTFiV1Z5WVdKc1pUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzF3YVdVdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEUXhYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSW0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnY21WeGRXbHlaU2duTGk5ZloyeHZZbUZzSnlrdVpHOWpkVzFsYm5RZ0ppWWdaRzlqZFcxbGJuUXVaRzlqZFcxbGJuUkZiR1Z0Wlc1ME8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYUhSdGJDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdOREpjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJaTh2SURFNUxqRXVNaTQ1SUM4Z01UVXVNaTR6TGpJZ1QySnFaV04wTG1kbGRGQnliM1J2ZEhsd1pVOW1LRThwWEc1MllYSWdhR0Z6SUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOW9ZWE1uS1Z4dUlDQXNJSFJ2VDJKcVpXTjBJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkRzh0YjJKcVpXTjBKeWxjYmlBZ0xDQkpSVjlRVWs5VVR5QWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgzTm9ZWEpsWkMxclpYa25LU2duU1VWZlVGSlBWRThuS1Z4dUlDQXNJRTlpYW1WamRGQnliM1J2SUQwZ1QySnFaV04wTG5CeWIzUnZkSGx3WlR0Y2JseHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQlBZbXBsWTNRdVoyVjBVSEp2ZEc5MGVYQmxUMllnZkh3Z1puVnVZM1JwYjI0b1R5bDdYRzRnSUU4Z1BTQjBiMDlpYW1WamRDaFBLVHRjYmlBZ2FXWW9hR0Z6S0U4c0lFbEZYMUJTVDFSUEtTbHlaWFIxY200Z1QxdEpSVjlRVWs5VVQxMDdYRzRnSUdsbUtIUjVjR1Z2WmlCUExtTnZibk4wY25WamRHOXlJRDA5SUNkbWRXNWpkR2x2YmljZ0ppWWdUeUJwYm5OMFlXNWpaVzltSUU4dVkyOXVjM1J5ZFdOMGIzSXBlMXh1SUNBZ0lISmxkSFZ5YmlCUExtTnZibk4wY25WamRHOXlMbkJ5YjNSdmRIbHdaVHRjYmlBZ2ZTQnlaWFIxY200Z1R5QnBibk4wWVc1alpXOW1JRTlpYW1WamRDQS9JRTlpYW1WamRGQnliM1J2SURvZ2JuVnNiRHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl2WW1wbFkzUXRaM0J2TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBME0xeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWRtRnlJR2hoY3lBZ0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMmhoY3ljcFhHNGdJQ3dnZEc5SlQySnFaV04wSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmZEc4dGFXOWlhbVZqZENjcFhHNGdJQ3dnWVhKeVlYbEpibVJsZUU5bUlEMGdjbVZ4ZFdseVpTZ25MaTlmWVhKeVlYa3RhVzVqYkhWa1pYTW5LU2htWVd4elpTbGNiaUFnTENCSlJWOVFVazlVVHlBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5emFHRnlaV1F0YTJWNUp5a29KMGxGWDFCU1QxUlBKeWs3WEc1Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b2IySnFaV04wTENCdVlXMWxjeWw3WEc0Z0lIWmhjaUJQSUNBZ0lDQWdQU0IwYjBsUFltcGxZM1FvYjJKcVpXTjBLVnh1SUNBZ0lDd2dhU0FnSUNBZ0lEMGdNRnh1SUNBZ0lDd2djbVZ6ZFd4MElEMGdXMTFjYmlBZ0lDQXNJR3RsZVR0Y2JpQWdabTl5S0d0bGVTQnBiaUJQS1dsbUtHdGxlU0FoUFNCSlJWOVFVazlVVHlsb1lYTW9UeXdnYTJWNUtTQW1KaUJ5WlhOMWJIUXVjSFZ6YUNoclpYa3BPMXh1SUNBdkx5QkViMjRuZENCbGJuVnRJR0oxWnlBbUlHaHBaR1JsYmlCclpYbHpYRzRnSUhkb2FXeGxLRzVoYldWekxteGxibWQwYUNBK0lHa3BhV1lvYUdGektFOHNJR3RsZVNBOUlHNWhiV1Z6VzJrcksxMHBLWHRjYmlBZ0lDQitZWEp5WVhsSmJtUmxlRTltS0hKbGMzVnNkQ3dnYTJWNUtTQjhmQ0J5WlhOMWJIUXVjSFZ6YUNoclpYa3BPMXh1SUNCOVhHNGdJSEpsZEhWeWJpQnlaWE4xYkhRN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFd0bGVYTXRhVzUwWlhKdVlXd3Vhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRFEwWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0l2THlCdGIzTjBJRTlpYW1WamRDQnRaWFJvYjJSeklHSjVJRVZUTmlCemFHOTFiR1FnWVdOalpYQjBJSEJ5YVcxcGRHbDJaWE5jYm5aaGNpQWtaWGh3YjNKMElEMGdjbVZ4ZFdseVpTZ25MaTlmWlhod2IzSjBKeWxjYmlBZ0xDQmpiM0psSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWTI5eVpTY3BYRzRnSUN3Z1ptRnBiSE1nSUNBOUlISmxjWFZwY21Vb0p5NHZYMlpoYVd4ekp5azdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLRXRGV1N3Z1pYaGxZeWw3WEc0Z0lIWmhjaUJtYmlBZ1BTQW9ZMjl5WlM1UFltcGxZM1FnZkh3Z2UzMHBXMHRGV1YwZ2ZId2dUMkpxWldOMFcwdEZXVjFjYmlBZ0lDQXNJR1Y0Y0NBOUlIdDlPMXh1SUNCbGVIQmJTMFZaWFNBOUlHVjRaV01vWm00cE8xeHVJQ0FrWlhod2IzSjBLQ1JsZUhCdmNuUXVVeUFySUNSbGVIQnZjblF1UmlBcUlHWmhhV3h6S0daMWJtTjBhVzl1S0NsN0lHWnVLREVwT3lCOUtTd2dKMDlpYW1WamRDY3NJR1Y0Y0NrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFhOaGNDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdORFZjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJbTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdjbVZ4ZFdseVpTZ25MaTlmYUdsa1pTY3BPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmNtVmtaV1pwYm1VdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEUTJYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVaUxDSXZMeUEzTGpFdU1UVWdWRzlNWlc1bmRHaGNiblpoY2lCMGIwbHVkR1ZuWlhJZ1BTQnlaWEYxYVhKbEtDY3VMMTkwYnkxcGJuUmxaMlZ5SnlsY2JpQWdMQ0J0YVc0Z0lDQWdJQ0FnUFNCTllYUm9MbTFwYmp0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCeVpYUjFjbTRnYVhRZ1BpQXdJRDhnYldsdUtIUnZTVzUwWldkbGNpaHBkQ2tzSURCNE1XWm1abVptWm1abVptWm1abVlwSURvZ01Ec2dMeThnY0c5M0tESXNJRFV6S1NBdElERWdQVDBnT1RBd056RTVPVEkxTkRjME1EazVNVnh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM1J2TFd4bGJtZDBhQzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTkRkY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklEUWdOU0lzSW5aaGNpQm5iRzlpWVd3Z0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMmRzYjJKaGJDY3BYRzRnSUN3Z1kyOXlaU0FnSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWpiM0psSnlsY2JpQWdMQ0JNU1VKU1FWSlpJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJ4cFluSmhjbmtuS1Z4dUlDQXNJSGRyYzBWNGRDQWdJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmZDJ0ekxXVjRkQ2NwWEc0Z0lDd2daR1ZtYVc1bFVISnZjR1Z5ZEhrZ1BTQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRaSEFuS1M1bU8xeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaHVZVzFsS1h0Y2JpQWdkbUZ5SUNSVGVXMWliMndnUFNCamIzSmxMbE41YldKdmJDQjhmQ0FvWTI5eVpTNVRlVzFpYjJ3Z1BTQk1TVUpTUVZKWklEOGdlMzBnT2lCbmJHOWlZV3d1VTNsdFltOXNJSHg4SUh0OUtUdGNiaUFnYVdZb2JtRnRaUzVqYUdGeVFYUW9NQ2tnSVQwZ0oxOG5JQ1ltSUNFb2JtRnRaU0JwYmlBa1UzbHRZbTlzS1Nsa1pXWnBibVZRY205d1pYSjBlU2drVTNsdFltOXNMQ0J1WVcxbExDQjdkbUZzZFdVNklIZHJjMFY0ZEM1bUtHNWhiV1VwZlNrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmQydHpMV1JsWm1sdVpTNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdORGhjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aVpYaHdiM0owY3k1bUlEMGdjbVZ4ZFdseVpTZ25MaTlmZDJ0ekp5azdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5M2EzTXRaWGgwTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBME9WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWlMQ0luZFhObElITjBjbWxqZENjN1hHNTJZWElnSkdGMElDQTlJSEpsY1hWcGNtVW9KeTR2WDNOMGNtbHVaeTFoZENjcEtIUnlkV1VwTzF4dVhHNHZMeUF5TVM0eExqTXVNamNnVTNSeWFXNW5MbkJ5YjNSdmRIbHdaVnRBUUdsMFpYSmhkRzl5WFNncFhHNXlaWEYxYVhKbEtDY3VMMTlwZEdWeUxXUmxabWx1WlNjcEtGTjBjbWx1Wnl3Z0oxTjBjbWx1Wnljc0lHWjFibU4wYVc5dUtHbDBaWEpoZEdWa0tYdGNiaUFnZEdocGN5NWZkQ0E5SUZOMGNtbHVaeWhwZEdWeVlYUmxaQ2s3SUM4dklIUmhjbWRsZEZ4dUlDQjBhR2x6TGw5cElEMGdNRHNnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdMeThnYm1WNGRDQnBibVJsZUZ4dUx5OGdNakV1TVM0MUxqSXVNU0FsVTNSeWFXNW5TWFJsY21GMGIzSlFjbTkwYjNSNWNHVWxMbTVsZUhRb0tWeHVmU3dnWm5WdVkzUnBiMjRvS1h0Y2JpQWdkbUZ5SUU4Z0lDQWdJRDBnZEdocGN5NWZkRnh1SUNBZ0lDd2dhVzVrWlhnZ1BTQjBhR2x6TGw5cFhHNGdJQ0FnTENCd2IybHVkRHRjYmlBZ2FXWW9hVzVrWlhnZ1BqMGdUeTVzWlc1bmRHZ3BjbVYwZFhKdUlIdDJZV3gxWlRvZ2RXNWtaV1pwYm1Wa0xDQmtiMjVsT2lCMGNuVmxmVHRjYmlBZ2NHOXBiblFnUFNBa1lYUW9UeXdnYVc1a1pYZ3BPMXh1SUNCMGFHbHpMbDlwSUNzOUlIQnZhVzUwTG14bGJtZDBhRHRjYmlBZ2NtVjBkWEp1SUh0MllXeDFaVG9nY0c5cGJuUXNJR1J2Ym1VNklHWmhiSE5sZlR0Y2JuMHBPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5bGN6WXVjM1J5YVc1bkxtbDBaWEpoZEc5eUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTFNRnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2ljbVZ4ZFdseVpTZ25MaTlsY3pZdVlYSnlZWGt1YVhSbGNtRjBiM0luS1R0Y2JuWmhjaUJuYkc5aVlXd2dJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWjJ4dlltRnNKeWxjYmlBZ0xDQm9hV1JsSUNBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZhR2xrWlNjcFhHNGdJQ3dnU1hSbGNtRjBiM0p6SUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJsMFpYSmhkRzl5Y3ljcFhHNGdJQ3dnVkU5ZlUxUlNTVTVIWDFSQlJ5QTlJSEpsY1hWcGNtVW9KeTR2WDNkcmN5Y3BLQ2QwYjFOMGNtbHVaMVJoWnljcE8xeHVYRzVtYjNJb2RtRnlJR052Ykd4bFkzUnBiMjV6SUQwZ1d5ZE9iMlJsVEdsemRDY3NJQ2RFVDAxVWIydGxia3hwYzNRbkxDQW5UV1ZrYVdGTWFYTjBKeXdnSjFOMGVXeGxVMmhsWlhSTWFYTjBKeXdnSjBOVFUxSjFiR1ZNYVhOMEoxMHNJR2tnUFNBd095QnBJRHdnTlRzZ2FTc3JLWHRjYmlBZ2RtRnlJRTVCVFVVZ0lDQWdJQ0FnUFNCamIyeHNaV04wYVc5dWMxdHBYVnh1SUNBZ0lDd2dRMjlzYkdWamRHbHZiaUE5SUdkc2IySmhiRnRPUVUxRlhWeHVJQ0FnSUN3Z2NISnZkRzhnSUNBZ0lDQTlJRU52Ykd4bFkzUnBiMjRnSmlZZ1EyOXNiR1ZqZEdsdmJpNXdjbTkwYjNSNWNHVTdYRzRnSUdsbUtIQnliM1J2SUNZbUlDRndjbTkwYjF0VVQxOVRWRkpKVGtkZlZFRkhYU2xvYVdSbEtIQnliM1J2TENCVVQxOVRWRkpKVGtkZlZFRkhMQ0JPUVUxRktUdGNiaUFnU1hSbGNtRjBiM0p6VzA1QlRVVmRJRDBnU1hSbGNtRjBiM0p6TGtGeWNtRjVPMXh1ZlZ4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OTNaV0l1Wkc5dExtbDBaWEpoWW14bExtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTFNVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lkbUZ5SUdOdmNtVWdJRDBnY21WeGRXbHlaU2duTGk0dkxpNHZiVzlrZFd4bGN5OWZZMjl5WlNjcFhHNGdJQ3dnSkVwVFQwNGdQU0JqYjNKbExrcFRUMDRnZkh3Z0tHTnZjbVV1U2xOUFRpQTlJSHR6ZEhKcGJtZHBabms2SUVwVFQwNHVjM1J5YVc1bmFXWjVmU2s3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1SUhOMGNtbHVaMmxtZVNocGRDbDdJQzh2SUdWemJHbHVkQzFrYVhOaFlteGxMV3hwYm1VZ2JtOHRkVzUxYzJWa0xYWmhjbk5jYmlBZ2NtVjBkWEp1SUNSS1UwOU9Mbk4wY21sdVoybG1lUzVoY0hCc2VTZ2tTbE5QVGl3Z1lYSm5kVzFsYm5SektUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTlxYzI5dUwzTjBjbWx1WjJsbWVTNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdOVE5jYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TQTJJaXdpTHk4Z1oyVjBkR2x1WnlCMFlXY2dabkp2YlNBeE9TNHhMak11TmlCUFltcGxZM1F1Y0hKdmRHOTBlWEJsTG5SdlUzUnlhVzVuS0NsY2JuWmhjaUJqYjJZZ1BTQnlaWEYxYVhKbEtDY3VMMTlqYjJZbktWeHVJQ0FzSUZSQlJ5QTlJSEpsY1hWcGNtVW9KeTR2WDNkcmN5Y3BLQ2QwYjFOMGNtbHVaMVJoWnljcFhHNGdJQzh2SUVWVE15QjNjbTl1WnlCb1pYSmxYRzRnSUN3Z1FWSkhJRDBnWTI5bUtHWjFibU4wYVc5dUtDbDdJSEpsZEhWeWJpQmhjbWQxYldWdWRITTdJSDBvS1NrZ1BUMGdKMEZ5WjNWdFpXNTBjeWM3WEc1Y2JpOHZJR1poYkd4aVlXTnJJR1p2Y2lCSlJURXhJRk5qY21sd2RDQkJZMk5sYzNNZ1JHVnVhV1ZrSUdWeWNtOXlYRzUyWVhJZ2RISjVSMlYwSUQwZ1puVnVZM1JwYjI0b2FYUXNJR3RsZVNsN1hHNGdJSFJ5ZVNCN1hHNGdJQ0FnY21WMGRYSnVJR2wwVzJ0bGVWMDdYRzRnSUgwZ1kyRjBZMmdvWlNsN0lDOHFJR1Z0Y0hSNUlDb3ZJSDFjYm4wN1hHNWNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdablZ1WTNScGIyNG9hWFFwZTF4dUlDQjJZWElnVHl3Z1ZDd2dRanRjYmlBZ2NtVjBkWEp1SUdsMElEMDlQU0IxYm1SbFptbHVaV1FnUHlBblZXNWtaV1pwYm1Wa0p5QTZJR2wwSUQwOVBTQnVkV3hzSUQ4Z0owNTFiR3duWEc0Z0lDQWdMeThnUUVCMGIxTjBjbWx1WjFSaFp5QmpZWE5sWEc0Z0lDQWdPaUIwZVhCbGIyWWdLRlFnUFNCMGNubEhaWFFvVHlBOUlFOWlhbVZqZENocGRDa3NJRlJCUnlrcElEMDlJQ2R6ZEhKcGJtY25JRDhnVkZ4dUlDQWdJQzh2SUdKMWFXeDBhVzVVWVdjZ1kyRnpaVnh1SUNBZ0lEb2dRVkpISUQ4Z1kyOW1LRThwWEc0Z0lDQWdMeThnUlZNeklHRnlaM1Z0Wlc1MGN5Qm1ZV3hzWW1GamExeHVJQ0FnSURvZ0tFSWdQU0JqYjJZb1R5a3BJRDA5SUNkUFltcGxZM1FuSUNZbUlIUjVjR1Z2WmlCUExtTmhiR3hsWlNBOVBTQW5ablZ1WTNScGIyNG5JRDhnSjBGeVozVnRaVzUwY3ljZ09pQkNPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMk5zWVhOemIyWXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRFUxWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRFFnTlNJc0lpOHZJR1poYkd4aVlXTnJJR1p2Y2lCdWIyNHRZWEp5WVhrdGJHbHJaU0JGVXpNZ1lXNWtJRzV2YmkxbGJuVnRaWEpoWW14bElHOXNaQ0JXT0NCemRISnBibWR6WEc1MllYSWdZMjltSUQwZ2NtVnhkV2x5WlNnbkxpOWZZMjltSnlrN1hHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlFOWlhbVZqZENnbmVpY3BMbkJ5YjNCbGNuUjVTWE5GYm5WdFpYSmhZbXhsS0RBcElEOGdUMkpxWldOMElEb2dablZ1WTNScGIyNG9hWFFwZTF4dUlDQnlaWFIxY200Z1kyOW1LR2wwS1NBOVBTQW5VM1J5YVc1bkp5QS9JR2wwTG5Od2JHbDBLQ2NuS1NBNklFOWlhbVZqZENocGRDazdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhVzlpYW1WamRDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdOVFpjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJblpoY2lCd1NVVWdJQ0FnSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxd2FXVW5LVnh1SUNBc0lHTnlaV0YwWlVSbGMyTWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZjSEp2Y0dWeWRIa3RaR1Z6WXljcFhHNGdJQ3dnZEc5SlQySnFaV04wSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5MGJ5MXBiMkpxWldOMEp5bGNiaUFnTENCMGIxQnlhVzFwZEdsMlpTQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgzUnZMWEJ5YVcxcGRHbDJaU2NwWEc0Z0lDd2dhR0Z6SUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlvWVhNbktWeHVJQ0FzSUVsRk9GOUVUMDFmUkVWR1NVNUZJRDBnY21WeGRXbHlaU2duTGk5ZmFXVTRMV1J2YlMxa1pXWnBibVVuS1Z4dUlDQXNJR2RQVUVRZ0lDQWdJQ0FnSUNBZ0lEMGdUMkpxWldOMExtZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2p0Y2JseHVaWGh3YjNKMGN5NW1JRDBnY21WeGRXbHlaU2duTGk5ZlpHVnpZM0pwY0hSdmNuTW5LU0EvSUdkUFVFUWdPaUJtZFc1amRHbHZiaUJuWlhSUGQyNVFjbTl3WlhKMGVVUmxjMk55YVhCMGIzSW9UeXdnVUNsN1hHNGdJRThnUFNCMGIwbFBZbXBsWTNRb1R5azdYRzRnSUZBZ1BTQjBiMUJ5YVcxcGRHbDJaU2hRTENCMGNuVmxLVHRjYmlBZ2FXWW9TVVU0WDBSUFRWOUVSVVpKVGtVcGRISjVJSHRjYmlBZ0lDQnlaWFIxY200Z1owOVFSQ2hQTENCUUtUdGNiaUFnZlNCallYUmphQ2hsS1hzZ0x5b2daVzF3ZEhrZ0tpOGdmVnh1SUNCcFppaG9ZWE1vVHl3Z1VDa3BjbVYwZFhKdUlHTnlaV0YwWlVSbGMyTW9JWEJKUlM1bUxtTmhiR3dvVHl3Z1VDa3NJRTliVUYwcE8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyOWlhbVZqZEMxbmIzQmtMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0ExTjF4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSmxlSEJ2Y25SekxtWWdQU0JQWW1wbFkzUXVaMlYwVDNkdVVISnZjR1Z5ZEhsVGVXMWliMnh6TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZiMkpxWldOMExXZHZjSE11YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURVNFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015SXNJbHdpZFhObElITjBjbWxqZEZ3aU8xeHVYRzVsZUhCdmNuUnpMbDlmWlhOTmIyUjFiR1VnUFNCMGNuVmxPMXh1WEc1MllYSWdYMmwwWlhKaGRHOXlJRDBnY21WeGRXbHlaU2hjSWk0dUwyTnZjbVV0YW5NdmMzbHRZbTlzTDJsMFpYSmhkRzl5WENJcE8xeHVYRzUyWVhJZ1gybDBaWEpoZEc5eU1pQTlJRjlwYm5SbGNtOXdVbVZ4ZFdseVpVUmxabUYxYkhRb1gybDBaWEpoZEc5eUtUdGNibHh1ZG1GeUlGOXplVzFpYjJ3Z1BTQnlaWEYxYVhKbEtGd2lMaTR2WTI5eVpTMXFjeTl6ZVcxaWIyeGNJaWs3WEc1Y2JuWmhjaUJmYzNsdFltOXNNaUE5SUY5cGJuUmxjbTl3VW1WeGRXbHlaVVJsWm1GMWJIUW9YM041YldKdmJDazdYRzVjYm5aaGNpQmZkSGx3Wlc5bUlEMGdkSGx3Wlc5bUlGOXplVzFpYjJ3eUxtUmxabUYxYkhRZ1BUMDlJRndpWm5WdVkzUnBiMjVjSWlBbUppQjBlWEJsYjJZZ1gybDBaWEpoZEc5eU1pNWtaV1poZFd4MElEMDlQU0JjSW5ONWJXSnZiRndpSUQ4Z1puVnVZM1JwYjI0Z0tHOWlhaWtnZXlCeVpYUjFjbTRnZEhsd1pXOW1JRzlpYWpzZ2ZTQTZJR1oxYm1OMGFXOXVJQ2h2WW1vcElIc2djbVYwZFhKdUlHOWlhaUFtSmlCMGVYQmxiMllnWDNONWJXSnZiREl1WkdWbVlYVnNkQ0E5UFQwZ1hDSm1kVzVqZEdsdmJsd2lJQ1ltSUc5aWFpNWpiMjV6ZEhKMVkzUnZjaUE5UFQwZ1gzTjViV0p2YkRJdVpHVm1ZWFZzZENBbUppQnZZbW9nSVQwOUlGOXplVzFpYjJ3eUxtUmxabUYxYkhRdWNISnZkRzkwZVhCbElEOGdYQ0p6ZVcxaWIyeGNJaUE2SUhSNWNHVnZaaUJ2WW1vN0lIMDdYRzVjYm1aMWJtTjBhVzl1SUY5cGJuUmxjbTl3VW1WeGRXbHlaVVJsWm1GMWJIUW9iMkpxS1NCN0lISmxkSFZ5YmlCdlltb2dKaVlnYjJKcUxsOWZaWE5OYjJSMWJHVWdQeUJ2WW1vZ09pQjdJR1JsWm1GMWJIUTZJRzlpYWlCOU95QjlYRzVjYm1WNGNHOXlkSE11WkdWbVlYVnNkQ0E5SUhSNWNHVnZaaUJmYzNsdFltOXNNaTVrWldaaGRXeDBJRDA5UFNCY0ltWjFibU4wYVc5dVhDSWdKaVlnWDNSNWNHVnZaaWhmYVhSbGNtRjBiM0l5TG1SbFptRjFiSFFwSUQwOVBTQmNJbk41YldKdmJGd2lJRDhnWm5WdVkzUnBiMjRnS0c5aWFpa2dlMXh1SUNCeVpYUjFjbTRnZEhsd1pXOW1JRzlpYWlBOVBUMGdYQ0oxYm1SbFptbHVaV1JjSWlBL0lGd2lkVzVrWldacGJtVmtYQ0lnT2lCZmRIbHdaVzltS0c5aWFpazdYRzU5SURvZ1puVnVZM1JwYjI0Z0tHOWlhaWtnZTF4dUlDQnlaWFIxY200Z2IySnFJQ1ltSUhSNWNHVnZaaUJmYzNsdFltOXNNaTVrWldaaGRXeDBJRDA5UFNCY0ltWjFibU4wYVc5dVhDSWdKaVlnYjJKcUxtTnZibk4wY25WamRHOXlJRDA5UFNCZmMzbHRZbTlzTWk1a1pXWmhkV3gwSUNZbUlHOWlhaUFoUFQwZ1gzTjViV0p2YkRJdVpHVm1ZWFZzZEM1d2NtOTBiM1I1Y0dVZ1B5QmNJbk41YldKdmJGd2lJRG9nZEhsd1pXOW1JRzlpYWlBOVBUMGdYQ0oxYm1SbFptbHVaV1JjSWlBL0lGd2lkVzVrWldacGJtVmtYQ0lnT2lCZmRIbHdaVzltS0c5aWFpazdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyaGxiSEJsY25NdmRIbHdaVzltTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBMU9WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWlMQ0p0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLQ2w3SUM4cUlHVnRjSFI1SUNvdklIMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5aFpHUXRkRzh0ZFc1elkyOXdZV0pzWlhNdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEWXdYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVaUxDSXZMeUJtWVd4elpTQXRQaUJCY25KaGVTTnBibVJsZUU5bVhHNHZMeUIwY25WbElDQXRQaUJCY25KaGVTTnBibU5zZFdSbGMxeHVkbUZ5SUhSdlNVOWlhbVZqZENBOUlISmxjWFZwY21Vb0p5NHZYM1J2TFdsdlltcGxZM1FuS1Z4dUlDQXNJSFJ2VEdWdVozUm9JQ0E5SUhKbGNYVnBjbVVvSnk0dlgzUnZMV3hsYm1kMGFDY3BYRzRnSUN3Z2RHOUpibVJsZUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmZEc4dGFXNWtaWGduS1R0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b1NWTmZTVTVEVEZWRVJWTXBlMXh1SUNCeVpYUjFjbTRnWm5WdVkzUnBiMjRvSkhSb2FYTXNJR1ZzTENCbWNtOXRTVzVrWlhncGUxeHVJQ0FnSUhaaGNpQlBJQ0FnSUNBZ1BTQjBiMGxQWW1wbFkzUW9KSFJvYVhNcFhHNGdJQ0FnSUNBc0lHeGxibWQwYUNBOUlIUnZUR1Z1WjNSb0tFOHViR1Z1WjNSb0tWeHVJQ0FnSUNBZ0xDQnBibVJsZUNBZ1BTQjBiMGx1WkdWNEtHWnliMjFKYm1SbGVDd2diR1Z1WjNSb0tWeHVJQ0FnSUNBZ0xDQjJZV3gxWlR0Y2JpQWdJQ0F2THlCQmNuSmhlU05wYm1Oc2RXUmxjeUIxYzJWeklGTmhiV1ZXWVd4MVpWcGxjbThnWlhGMVlXeHBkSGtnWVd4bmIzSnBkR2h0WEc0Z0lDQWdhV1lvU1ZOZlNVNURURlZFUlZNZ0ppWWdaV3dnSVQwZ1pXd3BkMmhwYkdVb2JHVnVaM1JvSUQ0Z2FXNWtaWGdwZTF4dUlDQWdJQ0FnZG1Gc2RXVWdQU0JQVzJsdVpHVjRLeXRkTzF4dUlDQWdJQ0FnYVdZb2RtRnNkV1VnSVQwZ2RtRnNkV1VwY21WMGRYSnVJSFJ5ZFdVN1hHNGdJQ0FnTHk4Z1FYSnlZWGtqZEc5SmJtUmxlQ0JwWjI1dmNtVnpJR2h2YkdWekxDQkJjbkpoZVNOcGJtTnNkV1JsY3lBdElHNXZkRnh1SUNBZ0lIMGdaV3h6WlNCbWIzSW9PMnhsYm1kMGFDQStJR2x1WkdWNE95QnBibVJsZUNzcktXbG1LRWxUWDBsT1EweFZSRVZUSUh4OElHbHVaR1Y0SUdsdUlFOHBlMXh1SUNBZ0lDQWdhV1lvVDF0cGJtUmxlRjBnUFQwOUlHVnNLWEpsZEhWeWJpQkpVMTlKVGtOTVZVUkZVeUI4ZkNCcGJtUmxlQ0I4ZkNBd08xeHVJQ0FnSUgwZ2NtVjBkWEp1SUNGSlUxOUpUa05NVlVSRlV5QW1KaUF0TVR0Y2JpQWdmVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTloY25KaGVTMXBibU5zZFdSbGN5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdOakZjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJaWQxYzJVZ2MzUnlhV04wSnp0Y2JuWmhjaUJqY21WaGRHVWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFqY21WaGRHVW5LVnh1SUNBc0lHUmxjMk55YVhCMGIzSWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZjSEp2Y0dWeWRIa3RaR1Z6WXljcFhHNGdJQ3dnYzJWMFZHOVRkSEpwYm1kVVlXY2dQU0J5WlhGMWFYSmxLQ2N1TDE5elpYUXRkRzh0YzNSeWFXNW5MWFJoWnljcFhHNGdJQ3dnU1hSbGNtRjBiM0pRY205MGIzUjVjR1VnUFNCN2ZUdGNibHh1THk4Z01qVXVNUzR5TGpFdU1TQWxTWFJsY21GMGIzSlFjbTkwYjNSNWNHVWxXMEJBYVhSbGNtRjBiM0pkS0NsY2JuSmxjWFZwY21Vb0p5NHZYMmhwWkdVbktTaEpkR1Z5WVhSdmNsQnliM1J2ZEhsd1pTd2djbVZ4ZFdseVpTZ25MaTlmZDJ0ekp5a29KMmwwWlhKaGRHOXlKeWtzSUdaMWJtTjBhVzl1S0NsN0lISmxkSFZ5YmlCMGFHbHpPeUI5S1R0Y2JseHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaERiMjV6ZEhKMVkzUnZjaXdnVGtGTlJTd2dibVY0ZENsN1hHNGdJRU52Ym5OMGNuVmpkRzl5TG5CeWIzUnZkSGx3WlNBOUlHTnlaV0YwWlNoSmRHVnlZWFJ2Y2xCeWIzUnZkSGx3WlN3Z2UyNWxlSFE2SUdSbGMyTnlhWEIwYjNJb01Td2dibVY0ZENsOUtUdGNiaUFnYzJWMFZHOVRkSEpwYm1kVVlXY29RMjl1YzNSeWRXTjBiM0lzSUU1QlRVVWdLeUFuSUVsMFpYSmhkRzl5SnlrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTFqY21WaGRHVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRFl5WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0p0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLR1J2Ym1Vc0lIWmhiSFZsS1h0Y2JpQWdjbVYwZFhKdUlIdDJZV3gxWlRvZ2RtRnNkV1VzSUdSdmJtVTZJQ0VoWkc5dVpYMDdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhWFJsY2kxemRHVndMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0EyTTF4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJaXdpZG1GeUlHUlFJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYjJKcVpXTjBMV1J3SnlsY2JpQWdMQ0JoYms5aWFtVmpkQ0E5SUhKbGNYVnBjbVVvSnk0dlgyRnVMVzlpYW1WamRDY3BYRzRnSUN3Z1oyVjBTMlY1Y3lBZ1BTQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRhMlY1Y3ljcE8xeHVYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSEpsY1hWcGNtVW9KeTR2WDJSbGMyTnlhWEIwYjNKekp5a2dQeUJQWW1wbFkzUXVaR1ZtYVc1bFVISnZjR1Z5ZEdsbGN5QTZJR1oxYm1OMGFXOXVJR1JsWm1sdVpWQnliM0JsY25ScFpYTW9UeXdnVUhKdmNHVnlkR2xsY3lsN1hHNGdJR0Z1VDJKcVpXTjBLRThwTzF4dUlDQjJZWElnYTJWNWN5QWdJRDBnWjJWMFMyVjVjeWhRY205d1pYSjBhV1Z6S1Z4dUlDQWdJQ3dnYkdWdVozUm9JRDBnYTJWNWN5NXNaVzVuZEdoY2JpQWdJQ0FzSUdrZ1BTQXdYRzRnSUNBZ0xDQlFPMXh1SUNCM2FHbHNaU2hzWlc1bmRHZ2dQaUJwS1dSUUxtWW9UeXdnVUNBOUlHdGxlWE5iYVNzclhTd2dVSEp2Y0dWeWRHbGxjMXRRWFNrN1hHNGdJSEpsZEhWeWJpQlBPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjlpYW1WamRDMWtjSE11YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURZMFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVpTENJdkx5QXhPUzR4TGpJdU55QXZJREUxTGpJdU15NDBJRTlpYW1WamRDNW5aWFJQZDI1UWNtOXdaWEowZVU1aGJXVnpLRThwWEc1MllYSWdKR3RsZVhNZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxclpYbHpMV2x1ZEdWeWJtRnNKeWxjYmlBZ0xDQm9hV1JrWlc1TFpYbHpJRDBnY21WeGRXbHlaU2duTGk5ZlpXNTFiUzFpZFdjdGEyVjVjeWNwTG1OdmJtTmhkQ2duYkdWdVozUm9KeXdnSjNCeWIzUnZkSGx3WlNjcE8xeHVYRzVsZUhCdmNuUnpMbVlnUFNCUFltcGxZM1F1WjJWMFQzZHVVSEp2Y0dWeWRIbE9ZVzFsY3lCOGZDQm1kVzVqZEdsdmJpQm5aWFJQZDI1UWNtOXdaWEowZVU1aGJXVnpLRThwZTF4dUlDQnlaWFIxY200Z0pHdGxlWE1vVHl3Z2FHbGtaR1Z1UzJWNWN5azdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZiMkpxWldOMExXZHZjRzR1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURZMVhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015SXNJblpoY2lCMGIwbHVkR1ZuWlhJZ1BTQnlaWEYxYVhKbEtDY3VMMTkwYnkxcGJuUmxaMlZ5SnlsY2JpQWdMQ0JrWldacGJtVmtJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWtaV1pwYm1Wa0p5azdYRzR2THlCMGNuVmxJQ0F0UGlCVGRISnBibWNqWVhSY2JpOHZJR1poYkhObElDMCtJRk4wY21sdVp5TmpiMlJsVUc5cGJuUkJkRnh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhVVDE5VFZGSkpUa2NwZTF4dUlDQnlaWFIxY200Z1puVnVZM1JwYjI0b2RHaGhkQ3dnY0c5ektYdGNiaUFnSUNCMllYSWdjeUE5SUZOMGNtbHVaeWhrWldacGJtVmtLSFJvWVhRcEtWeHVJQ0FnSUNBZ0xDQnBJRDBnZEc5SmJuUmxaMlZ5S0hCdmN5bGNiaUFnSUNBZ0lDd2diQ0E5SUhNdWJHVnVaM1JvWEc0Z0lDQWdJQ0FzSUdFc0lHSTdYRzRnSUNBZ2FXWW9hU0E4SURBZ2ZId2dhU0ErUFNCc0tYSmxkSFZ5YmlCVVQxOVRWRkpKVGtjZ1B5QW5KeUE2SUhWdVpHVm1hVzVsWkR0Y2JpQWdJQ0JoSUQwZ2N5NWphR0Z5UTI5a1pVRjBLR2twTzF4dUlDQWdJSEpsZEhWeWJpQmhJRHdnTUhoa09EQXdJSHg4SUdFZ1BpQXdlR1JpWm1ZZ2ZId2dhU0FySURFZ1BUMDlJR3dnZkh3Z0tHSWdQU0J6TG1Ob1lYSkRiMlJsUVhRb2FTQXJJREVwS1NBOElEQjRaR013TUNCOGZDQmlJRDRnTUhoa1ptWm1YRzRnSUNBZ0lDQS9JRlJQWDFOVVVrbE9SeUEvSUhNdVkyaGhja0YwS0drcElEb2dZVnh1SUNBZ0lDQWdPaUJVVDE5VFZGSkpUa2NnUHlCekxuTnNhV05sS0drc0lHa2dLeUF5S1NBNklDaGhJQzBnTUhoa09EQXdJRHc4SURFd0tTQXJJQ2hpSUMwZ01IaGtZekF3S1NBcklEQjRNVEF3TURBN1hHNGdJSDA3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYzNSeWFXNW5MV0YwTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBMk5seHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWRtRnlJR04wZUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyTjBlQ2NwWEc0Z0lDd2dhVzUyYjJ0bElDQWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFXNTJiMnRsSnlsY2JpQWdMQ0JvZEcxc0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOW9kRzFzSnlsY2JpQWdMQ0JqWld3Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWtiMjB0WTNKbFlYUmxKeWxjYmlBZ0xDQm5iRzlpWVd3Z0lDQWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5bmJHOWlZV3duS1Z4dUlDQXNJSEJ5YjJObGMzTWdJQ0FnSUNBZ0lDQWdJQ0E5SUdkc2IySmhiQzV3Y205alpYTnpYRzRnSUN3Z2MyVjBWR0Z6YXlBZ0lDQWdJQ0FnSUNBZ0lEMGdaMnh2WW1Gc0xuTmxkRWx0YldWa2FXRjBaVnh1SUNBc0lHTnNaV0Z5VkdGemF5QWdJQ0FnSUNBZ0lDQTlJR2RzYjJKaGJDNWpiR1ZoY2tsdGJXVmthV0YwWlZ4dUlDQXNJRTFsYzNOaFoyVkRhR0Z1Ym1Wc0lDQWdJQ0E5SUdkc2IySmhiQzVOWlhOellXZGxRMmhoYm01bGJGeHVJQ0FzSUdOdmRXNTBaWElnSUNBZ0lDQWdJQ0FnSUNBOUlEQmNiaUFnTENCeGRXVjFaU0FnSUNBZ0lDQWdJQ0FnSUNBZ1BTQjdmVnh1SUNBc0lFOU9Va1ZCUkZsVFZFRlVSVU5JUVU1SFJTQTlJQ2R2Ym5KbFlXUjVjM1JoZEdWamFHRnVaMlVuWEc0Z0lDd2daR1ZtWlhJc0lHTm9ZVzV1Wld3c0lIQnZjblE3WEc1MllYSWdjblZ1SUQwZ1puVnVZM1JwYjI0b0tYdGNiaUFnZG1GeUlHbGtJRDBnSzNSb2FYTTdYRzRnSUdsbUtIRjFaWFZsTG1oaGMwOTNibEJ5YjNCbGNuUjVLR2xrS1NsN1hHNGdJQ0FnZG1GeUlHWnVJRDBnY1hWbGRXVmJhV1JkTzF4dUlDQWdJR1JsYkdWMFpTQnhkV1YxWlZ0cFpGMDdYRzRnSUNBZ1ptNG9LVHRjYmlBZ2ZWeHVmVHRjYm5aaGNpQnNhWE4wWlc1bGNpQTlJR1oxYm1OMGFXOXVLR1YyWlc1MEtYdGNiaUFnY25WdUxtTmhiR3dvWlhabGJuUXVaR0YwWVNrN1hHNTlPMXh1THk4Z1RtOWtaUzVxY3lBd0xqa3JJQ1lnU1VVeE1Dc2dhR0Z6SUhObGRFbHRiV1ZrYVdGMFpTd2diM1JvWlhKM2FYTmxPbHh1YVdZb0lYTmxkRlJoYzJzZ2ZId2dJV05zWldGeVZHRnpheWw3WEc0Z0lITmxkRlJoYzJzZ1BTQm1kVzVqZEdsdmJpQnpaWFJKYlcxbFpHbGhkR1VvWm00cGUxeHVJQ0FnSUhaaGNpQmhjbWR6SUQwZ1cxMHNJR2tnUFNBeE8xeHVJQ0FnSUhkb2FXeGxLR0Z5WjNWdFpXNTBjeTVzWlc1bmRHZ2dQaUJwS1dGeVozTXVjSFZ6YUNoaGNtZDFiV1Z1ZEhOYmFTc3JYU2s3WEc0Z0lDQWdjWFZsZFdWYkt5dGpiM1Z1ZEdWeVhTQTlJR1oxYm1OMGFXOXVLQ2w3WEc0Z0lDQWdJQ0JwYm5admEyVW9kSGx3Wlc5bUlHWnVJRDA5SUNkbWRXNWpkR2x2YmljZ1B5Qm1iaUE2SUVaMWJtTjBhVzl1S0dadUtTd2dZWEpuY3lrN1hHNGdJQ0FnZlR0Y2JpQWdJQ0JrWldabGNpaGpiM1Z1ZEdWeUtUdGNiaUFnSUNCeVpYUjFjbTRnWTI5MWJuUmxjanRjYmlBZ2ZUdGNiaUFnWTJ4bFlYSlVZWE5ySUQwZ1puVnVZM1JwYjI0Z1kyeGxZWEpKYlcxbFpHbGhkR1VvYVdRcGUxeHVJQ0FnSUdSbGJHVjBaU0J4ZFdWMVpWdHBaRjA3WEc0Z0lIMDdYRzRnSUM4dklFNXZaR1V1YW5NZ01DNDRMVnh1SUNCcFppaHlaWEYxYVhKbEtDY3VMMTlqYjJZbktTaHdjbTlqWlhOektTQTlQU0FuY0hKdlkyVnpjeWNwZTF4dUlDQWdJR1JsWm1WeUlEMGdablZ1WTNScGIyNG9hV1FwZTF4dUlDQWdJQ0FnY0hKdlkyVnpjeTV1WlhoMFZHbGpheWhqZEhnb2NuVnVMQ0JwWkN3Z01Ta3BPMXh1SUNBZ0lIMDdYRzRnSUM4dklFSnliM2R6WlhKeklIZHBkR2dnVFdWemMyRm5aVU5vWVc1dVpXd3NJR2x1WTJ4MVpHVnpJRmRsWWxkdmNtdGxjbk5jYmlBZ2ZTQmxiSE5sSUdsbUtFMWxjM05oWjJWRGFHRnVibVZzS1h0Y2JpQWdJQ0JqYUdGdWJtVnNJRDBnYm1WM0lFMWxjM05oWjJWRGFHRnVibVZzTzF4dUlDQWdJSEJ2Y25RZ0lDQWdQU0JqYUdGdWJtVnNMbkJ2Y25ReU8xeHVJQ0FnSUdOb1lXNXVaV3d1Y0c5eWRERXViMjV0WlhOellXZGxJRDBnYkdsemRHVnVaWEk3WEc0Z0lDQWdaR1ZtWlhJZ1BTQmpkSGdvY0c5eWRDNXdiM04wVFdWemMyRm5aU3dnY0c5eWRDd2dNU2s3WEc0Z0lDOHZJRUp5YjNkelpYSnpJSGRwZEdnZ2NHOXpkRTFsYzNOaFoyVXNJSE5yYVhBZ1YyVmlWMjl5YTJWeWMxeHVJQ0F2THlCSlJUZ2dhR0Z6SUhCdmMzUk5aWE56WVdkbExDQmlkWFFnYVhRbmN5QnplVzVqSUNZZ2RIbHdaVzltSUdsMGN5QndiM04wVFdWemMyRm5aU0JwY3lBbmIySnFaV04wSjF4dUlDQjlJR1ZzYzJVZ2FXWW9aMnh2WW1Gc0xtRmtaRVYyWlc1MFRHbHpkR1Z1WlhJZ0ppWWdkSGx3Wlc5bUlIQnZjM1JOWlhOellXZGxJRDA5SUNkbWRXNWpkR2x2YmljZ0ppWWdJV2RzYjJKaGJDNXBiWEJ2Y25SVFkzSnBjSFJ6S1h0Y2JpQWdJQ0JrWldabGNpQTlJR1oxYm1OMGFXOXVLR2xrS1h0Y2JpQWdJQ0FnSUdkc2IySmhiQzV3YjNOMFRXVnpjMkZuWlNocFpDQXJJQ2NuTENBbktpY3BPMXh1SUNBZ0lIMDdYRzRnSUNBZ1oyeHZZbUZzTG1Ga1pFVjJaVzUwVEdsemRHVnVaWElvSjIxbGMzTmhaMlVuTENCc2FYTjBaVzVsY2l3Z1ptRnNjMlVwTzF4dUlDQXZMeUJKUlRndFhHNGdJSDBnWld4elpTQnBaaWhQVGxKRlFVUlpVMVJCVkVWRFNFRk9SMFVnYVc0Z1kyVnNLQ2R6WTNKcGNIUW5LU2w3WEc0Z0lDQWdaR1ZtWlhJZ1BTQm1kVzVqZEdsdmJpaHBaQ2w3WEc0Z0lDQWdJQ0JvZEcxc0xtRndjR1Z1WkVOb2FXeGtLR05sYkNnbmMyTnlhWEIwSnlrcFcwOU9Va1ZCUkZsVFZFRlVSVU5JUVU1SFJWMGdQU0JtZFc1amRHbHZiaWdwZTF4dUlDQWdJQ0FnSUNCb2RHMXNMbkpsYlc5MlpVTm9hV3hrS0hSb2FYTXBPMXh1SUNBZ0lDQWdJQ0J5ZFc0dVkyRnNiQ2hwWkNrN1hHNGdJQ0FnSUNCOU8xeHVJQ0FnSUgwN1hHNGdJQzh2SUZKbGMzUWdiMnhrSUdKeWIzZHpaWEp6WEc0Z0lIMGdaV3h6WlNCN1hHNGdJQ0FnWkdWbVpYSWdQU0JtZFc1amRHbHZiaWhwWkNsN1hHNGdJQ0FnSUNCelpYUlVhVzFsYjNWMEtHTjBlQ2h5ZFc0c0lHbGtMQ0F4S1N3Z01DazdYRzRnSUNBZ2ZUdGNiaUFnZlZ4dWZWeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQjdYRzRnSUhObGREb2dJQ0J6WlhSVVlYTnJMRnh1SUNCamJHVmhjam9nWTJ4bFlYSlVZWE5yWEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmZEdGemF5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdOamRjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdOQ0ExSWl3aWRtRnlJSFJ2U1c1MFpXZGxjaUE5SUhKbGNYVnBjbVVvSnk0dlgzUnZMV2x1ZEdWblpYSW5LVnh1SUNBc0lHMWhlQ0FnSUNBZ0lDQTlJRTFoZEdndWJXRjRYRzRnSUN3Z2JXbHVJQ0FnSUNBZ0lEMGdUV0YwYUM1dGFXNDdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLR2x1WkdWNExDQnNaVzVuZEdncGUxeHVJQ0JwYm1SbGVDQTlJSFJ2U1c1MFpXZGxjaWhwYm1SbGVDazdYRzRnSUhKbGRIVnliaUJwYm1SbGVDQThJREFnUHlCdFlYZ29hVzVrWlhnZ0t5QnNaVzVuZEdnc0lEQXBJRG9nYldsdUtHbHVaR1Y0TENCc1pXNW5kR2dwTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNSdkxXbHVaR1Y0TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBMk9GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aUozVnpaU0J6ZEhKcFkzUW5PMXh1ZG1GeUlHRmtaRlJ2Vlc1elkyOXdZV0pzWlhNZ1BTQnlaWEYxYVhKbEtDY3VMMTloWkdRdGRHOHRkVzV6WTI5d1lXSnNaWE1uS1Z4dUlDQXNJSE4wWlhBZ0lDQWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5cGRHVnlMWE4wWlhBbktWeHVJQ0FzSUVsMFpYSmhkRzl5Y3lBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOXBkR1Z5WVhSdmNuTW5LVnh1SUNBc0lIUnZTVTlpYW1WamRDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkwYnkxcGIySnFaV04wSnlrN1hHNWNiaTh2SURJeUxqRXVNeTQwSUVGeWNtRjVMbkJ5YjNSdmRIbHdaUzVsYm5SeWFXVnpLQ2xjYmk4dklESXlMakV1TXk0eE15QkJjbkpoZVM1d2NtOTBiM1I1Y0dVdWEyVjVjeWdwWEc0dkx5QXlNaTR4TGpNdU1qa2dRWEp5WVhrdWNISnZkRzkwZVhCbExuWmhiSFZsY3lncFhHNHZMeUF5TWk0eExqTXVNekFnUVhKeVlYa3VjSEp2ZEc5MGVYQmxXMEJBYVhSbGNtRjBiM0pkS0NsY2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2NtVnhkV2x5WlNnbkxpOWZhWFJsY2kxa1pXWnBibVVuS1NoQmNuSmhlU3dnSjBGeWNtRjVKeXdnWm5WdVkzUnBiMjRvYVhSbGNtRjBaV1FzSUd0cGJtUXBlMXh1SUNCMGFHbHpMbDkwSUQwZ2RHOUpUMkpxWldOMEtHbDBaWEpoZEdWa0tUc2dMeThnZEdGeVoyVjBYRzRnSUhSb2FYTXVYMmtnUFNBd095QWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQXZMeUJ1WlhoMElHbHVaR1Y0WEc0Z0lIUm9hWE11WDJzZ1BTQnJhVzVrT3lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0F2THlCcmFXNWtYRzR2THlBeU1pNHhMalV1TWk0eElDVkJjbkpoZVVsMFpYSmhkRzl5VUhKdmRHOTBlWEJsSlM1dVpYaDBLQ2xjYm4wc0lHWjFibU4wYVc5dUtDbDdYRzRnSUhaaGNpQlBJQ0FnSUNBOUlIUm9hWE11WDNSY2JpQWdJQ0FzSUd0cGJtUWdJRDBnZEdocGN5NWZhMXh1SUNBZ0lDd2dhVzVrWlhnZ1BTQjBhR2x6TGw5cEt5czdYRzRnSUdsbUtDRlBJSHg4SUdsdVpHVjRJRDQ5SUU4dWJHVnVaM1JvS1h0Y2JpQWdJQ0IwYUdsekxsOTBJRDBnZFc1a1pXWnBibVZrTzF4dUlDQWdJSEpsZEhWeWJpQnpkR1Z3S0RFcE8xeHVJQ0I5WEc0Z0lHbG1LR3RwYm1RZ1BUMGdKMnRsZVhNbklDQXBjbVYwZFhKdUlITjBaWEFvTUN3Z2FXNWtaWGdwTzF4dUlDQnBaaWhyYVc1a0lEMDlJQ2QyWVd4MVpYTW5LWEpsZEhWeWJpQnpkR1Z3S0RBc0lFOWJhVzVrWlhoZEtUdGNiaUFnY21WMGRYSnVJSE4wWlhBb01Dd2dXMmx1WkdWNExDQlBXMmx1WkdWNFhWMHBPMXh1ZlN3Z0ozWmhiSFZsY3ljcE8xeHVYRzR2THlCaGNtZDFiV1Z1ZEhOTWFYTjBXMEJBYVhSbGNtRjBiM0pkSUdseklDVkJjbkpoZVZCeWIzUnZYM1poYkhWbGN5VWdLRGt1TkM0MExqWXNJRGt1TkM0MExqY3BYRzVKZEdWeVlYUnZjbk11UVhKbmRXMWxiblJ6SUQwZ1NYUmxjbUYwYjNKekxrRnljbUY1TzF4dVhHNWhaR1JVYjFWdWMyTnZjR0ZpYkdWektDZHJaWGx6SnlrN1hHNWhaR1JVYjFWdWMyTnZjR0ZpYkdWektDZDJZV3gxWlhNbktUdGNibUZrWkZSdlZXNXpZMjl3WVdKc1pYTW9KMlZ1ZEhKcFpYTW5LVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbUZ5Y21GNUxtbDBaWEpoZEc5eUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTJPVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2liVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQjdJRndpWkdWbVlYVnNkRndpT2lCeVpYRjFhWEpsS0Z3aVkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwyOWlhbVZqZEM5clpYbHpYQ0lwTENCZlgyVnpUVzlrZFd4bE9pQjBjblZsSUgwN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJKaFltVnNMWEoxYm5ScGJXVXZZMjl5WlMxcWN5OXZZbXBsWTNRdmEyVjVjeTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTnpCY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJRElnTkNBMUlpd2liVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQjdJRndpWkdWbVlYVnNkRndpT2lCeVpYRjFhWEpsS0Z3aVkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwzQnliMjFwYzJWY0lpa3NJRjlmWlhOTmIyUjFiR1U2SUhSeWRXVWdmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5amIzSmxMV3B6TDNCeWIyMXBjMlV1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURjeFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURRZ05TSXNJblpoY2lCTlJWUkJJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYM1ZwWkNjcEtDZHRaWFJoSnlsY2JpQWdMQ0JwYzA5aWFtVmpkQ0E5SUhKbGNYVnBjbVVvSnk0dlgybHpMVzlpYW1WamRDY3BYRzRnSUN3Z2FHRnpJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlvWVhNbktWeHVJQ0FzSUhObGRFUmxjMk1nSUQwZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXUndKeWt1Wmx4dUlDQXNJR2xrSUNBZ0lDQWdJRDBnTUR0Y2JuWmhjaUJwYzBWNGRHVnVjMmxpYkdVZ1BTQlBZbXBsWTNRdWFYTkZlSFJsYm5OcFlteGxJSHg4SUdaMWJtTjBhVzl1S0NsN1hHNGdJSEpsZEhWeWJpQjBjblZsTzF4dWZUdGNiblpoY2lCR1VrVkZXa1VnUFNBaGNtVnhkV2x5WlNnbkxpOWZabUZwYkhNbktTaG1kVzVqZEdsdmJpZ3BlMXh1SUNCeVpYUjFjbTRnYVhORmVIUmxibk5wWW14bEtFOWlhbVZqZEM1d2NtVjJaVzUwUlhoMFpXNXphVzl1Y3loN2ZTa3BPMXh1ZlNrN1hHNTJZWElnYzJWMFRXVjBZU0E5SUdaMWJtTjBhVzl1S0dsMEtYdGNiaUFnYzJWMFJHVnpZeWhwZEN3Z1RVVlVRU3dnZTNaaGJIVmxPaUI3WEc0Z0lDQWdhVG9nSjA4bklDc2dLeXRwWkN3Z0x5OGdiMkpxWldOMElFbEVYRzRnSUNBZ2R6b2dlMzBnSUNBZ0lDQWdJQ0FnTHk4Z2QyVmhheUJqYjJ4c1pXTjBhVzl1Y3lCSlJITmNiaUFnZlgwcE8xeHVmVHRjYm5aaGNpQm1ZWE4wUzJWNUlEMGdablZ1WTNScGIyNG9hWFFzSUdOeVpXRjBaU2w3WEc0Z0lDOHZJSEpsZEhWeWJpQndjbWx0YVhScGRtVWdkMmwwYUNCd2NtVm1hWGhjYmlBZ2FXWW9JV2x6VDJKcVpXTjBLR2wwS1NseVpYUjFjbTRnZEhsd1pXOW1JR2wwSUQwOUlDZHplVzFpYjJ3bklEOGdhWFFnT2lBb2RIbHdaVzltSUdsMElEMDlJQ2R6ZEhKcGJtY25JRDhnSjFNbklEb2dKMUFuS1NBcklHbDBPMXh1SUNCcFppZ2hhR0Z6S0dsMExDQk5SVlJCS1NsN1hHNGdJQ0FnTHk4Z1kyRnVKM1FnYzJWMElHMWxkR0ZrWVhSaElIUnZJSFZ1WTJGMVoyaDBJR1p5YjNwbGJpQnZZbXBsWTNSY2JpQWdJQ0JwWmlnaGFYTkZlSFJsYm5OcFlteGxLR2wwS1NseVpYUjFjbTRnSjBZbk8xeHVJQ0FnSUM4dklHNXZkQ0J1WldObGMzTmhjbmtnZEc4Z1lXUmtJRzFsZEdGa1lYUmhYRzRnSUNBZ2FXWW9JV055WldGMFpTbHlaWFIxY200Z0owVW5PMXh1SUNBZ0lDOHZJR0ZrWkNCdGFYTnphVzVuSUcxbGRHRmtZWFJoWEc0Z0lDQWdjMlYwVFdWMFlTaHBkQ2s3WEc0Z0lDOHZJSEpsZEhWeWJpQnZZbXBsWTNRZ1NVUmNiaUFnZlNCeVpYUjFjbTRnYVhSYlRVVlVRVjB1YVR0Y2JuMDdYRzUyWVhJZ1oyVjBWMlZoYXlBOUlHWjFibU4wYVc5dUtHbDBMQ0JqY21WaGRHVXBlMXh1SUNCcFppZ2hhR0Z6S0dsMExDQk5SVlJCS1NsN1hHNGdJQ0FnTHk4Z1kyRnVKM1FnYzJWMElHMWxkR0ZrWVhSaElIUnZJSFZ1WTJGMVoyaDBJR1p5YjNwbGJpQnZZbXBsWTNSY2JpQWdJQ0JwWmlnaGFYTkZlSFJsYm5OcFlteGxLR2wwS1NseVpYUjFjbTRnZEhKMVpUdGNiaUFnSUNBdkx5QnViM1FnYm1WalpYTnpZWEo1SUhSdklHRmtaQ0J0WlhSaFpHRjBZVnh1SUNBZ0lHbG1LQ0ZqY21WaGRHVXBjbVYwZFhKdUlHWmhiSE5sTzF4dUlDQWdJQzh2SUdGa1pDQnRhWE56YVc1bklHMWxkR0ZrWVhSaFhHNGdJQ0FnYzJWMFRXVjBZU2hwZENrN1hHNGdJQzh2SUhKbGRIVnliaUJvWVhOb0lIZGxZV3NnWTI5c2JHVmpkR2x2Ym5NZ1NVUnpYRzRnSUgwZ2NtVjBkWEp1SUdsMFcwMUZWRUZkTG5jN1hHNTlPMXh1THk4Z1lXUmtJRzFsZEdGa1lYUmhJRzl1SUdaeVpXVjZaUzFtWVcxcGJIa2diV1YwYUc5a2N5QmpZV3hzYVc1blhHNTJZWElnYjI1R2NtVmxlbVVnUFNCbWRXNWpkR2x2YmlocGRDbDdYRzRnSUdsbUtFWlNSVVZhUlNBbUppQnRaWFJoTGs1RlJVUWdKaVlnYVhORmVIUmxibk5wWW14bEtHbDBLU0FtSmlBaGFHRnpLR2wwTENCTlJWUkJLU2x6WlhSTlpYUmhLR2wwS1R0Y2JpQWdjbVYwZFhKdUlHbDBPMXh1ZlR0Y2JuWmhjaUJ0WlhSaElEMGdiVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQjdYRzRnSUV0RldUb2dJQ0FnSUNCTlJWUkJMRnh1SUNCT1JVVkVPaUFnSUNBZ1ptRnNjMlVzWEc0Z0lHWmhjM1JMWlhrNklDQm1ZWE4wUzJWNUxGeHVJQ0JuWlhSWFpXRnJPaUFnWjJWMFYyVmhheXhjYmlBZ2IyNUdjbVZsZW1VNklHOXVSbkpsWlhwbFhHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmJXVjBZUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTnpKY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2lkbUZ5SUdOc1lYTnpiMllnSUNBOUlISmxjWFZwY21Vb0p5NHZYMk5zWVhOemIyWW5LVnh1SUNBc0lFbFVSVkpCVkU5U0lDQTlJSEpsY1hWcGNtVW9KeTR2WDNkcmN5Y3BLQ2RwZEdWeVlYUnZjaWNwWEc0Z0lDd2dTWFJsY21GMGIzSnpJRDBnY21WeGRXbHlaU2duTGk5ZmFYUmxjbUYwYjNKekp5azdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSEpsY1hWcGNtVW9KeTR2WDJOdmNtVW5LUzVuWlhSSmRHVnlZWFJ2Y2sxbGRHaHZaQ0E5SUdaMWJtTjBhVzl1S0dsMEtYdGNiaUFnYVdZb2FYUWdJVDBnZFc1a1pXWnBibVZrS1hKbGRIVnliaUJwZEZ0SlZFVlNRVlJQVWwxY2JpQWdJQ0I4ZkNCcGRGc25RRUJwZEdWeVlYUnZjaWRkWEc0Z0lDQWdmSHdnU1hSbGNtRjBiM0p6VzJOc1lYTnpiMllvYVhRcFhUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwyTnZjbVV1WjJWMExXbDBaWEpoZEc5eUxXMWxkR2h2WkM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ056TmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ05DQTFJaXdpYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0I3SUZ3aVpHVm1ZWFZzZEZ3aU9pQnlaWEYxYVhKbEtGd2lZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMMjlpYW1WamRDOWpjbVZoZEdWY0lpa3NJRjlmWlhOTmIyUjFiR1U2SUhSeWRXVWdmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5amIzSmxMV3B6TDI5aWFtVmpkQzlqY21WaGRHVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGMwWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0ltMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2V5QmNJbVJsWm1GMWJIUmNJam9nY21WeGRXbHlaU2hjSW1OdmNtVXRhbk12YkdsaWNtRnllUzltYmk5dlltcGxZM1F2YzJWMExYQnliM1J2ZEhsd1pTMXZabHdpS1N3Z1gxOWxjMDF2WkhWc1pUb2dkSEoxWlNCOU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMk52Y21VdGFuTXZiMkpxWldOMEwzTmxkQzF3Y205MGIzUjVjR1V0YjJZdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEYzFYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSW0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnZXlCY0ltUmxabUYxYkhSY0lqb2djbVZ4ZFdseVpTaGNJbU52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl6ZVcxaWIyeGNJaWtzSUY5ZlpYTk5iMlIxYkdVNklIUnlkV1VnZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WW1GaVpXd3RjblZ1ZEdsdFpTOWpiM0psTFdwekwzTjViV0p2YkM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ056WmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJaXdpYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0I3SUZ3aVpHVm1ZWFZzZEZ3aU9pQnlaWEYxYVhKbEtGd2lZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMM041YldKdmJDOXBkR1Z5WVhSdmNsd2lLU3dnWDE5bGMwMXZaSFZzWlRvZ2RISjFaU0I5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyTnZjbVV0YW5NdmMzbHRZbTlzTDJsMFpYSmhkRzl5TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBM04xeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWlMQ0p5WlhGMWFYSmxLQ2N1TGk4dUxpOXRiMlIxYkdWekwyVnpOaTV2WW1wbFkzUXVZM0psWVhSbEp5azdYRzUyWVhJZ0pFOWlhbVZqZENBOUlISmxjWFZwY21Vb0p5NHVMeTR1TDIxdlpIVnNaWE12WDJOdmNtVW5LUzVQWW1wbFkzUTdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVJR055WldGMFpTaFFMQ0JFS1h0Y2JpQWdjbVYwZFhKdUlDUlBZbXBsWTNRdVkzSmxZWFJsS0ZBc0lFUXBPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzlqY21WaGRHVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGM0WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0luSmxjWFZwY21Vb0p5NHVMeTR1TDIxdlpIVnNaWE12WlhNMkxtOWlhbVZqZEM1blpYUXRjSEp2ZEc5MGVYQmxMVzltSnlrN1hHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlISmxjWFZwY21Vb0p5NHVMeTR1TDIxdlpIVnNaWE12WDJOdmNtVW5LUzVQWW1wbFkzUXVaMlYwVUhKdmRHOTBlWEJsVDJZN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzltYmk5dlltcGxZM1F2WjJWMExYQnliM1J2ZEhsd1pTMXZaaTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTnpsY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2ljbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5bGN6WXViMkpxWldOMExtdGxlWE1uS1R0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2NtVnhkV2x5WlNnbkxpNHZMaTR2Ylc5a2RXeGxjeTlmWTI5eVpTY3BMazlpYW1WamRDNXJaWGx6TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZabTR2YjJKcVpXTjBMMnRsZVhNdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEZ3dYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeUlEUWdOU0lzSW5KbGNYVnBjbVVvSnk0dUx5NHVMMjF2WkhWc1pYTXZaWE0yTG05aWFtVmpkQzV6WlhRdGNISnZkRzkwZVhCbExXOW1KeWs3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUhKbGNYVnBjbVVvSnk0dUx5NHVMMjF2WkhWc1pYTXZYMk52Y21VbktTNVBZbXBsWTNRdWMyVjBVSEp2ZEc5MGVYQmxUMlk3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl2WW1wbFkzUXZjMlYwTFhCeWIzUnZkSGx3WlMxdlppNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdPREZjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aWNtVnhkV2x5WlNnbkxpNHZiVzlrZFd4bGN5OWxjell1YjJKcVpXTjBMblJ2TFhOMGNtbHVaeWNwTzF4dWNtVnhkV2x5WlNnbkxpNHZiVzlrZFd4bGN5OWxjell1YzNSeWFXNW5MbWwwWlhKaGRHOXlKeWs3WEc1eVpYRjFhWEpsS0NjdUxpOXRiMlIxYkdWekwzZGxZaTVrYjIwdWFYUmxjbUZpYkdVbktUdGNibkpsY1hWcGNtVW9KeTR1TDIxdlpIVnNaWE12WlhNMkxuQnliMjFwYzJVbktUdGNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdjbVZ4ZFdseVpTZ25MaTR2Ylc5a2RXeGxjeTlmWTI5eVpTY3BMbEJ5YjIxcGMyVTdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5bWJpOXdjbTl0YVhObExtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTRNbHh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQTBJRFVpTENKeVpYRjFhWEpsS0NjdUxpOHVMaTl0YjJSMWJHVnpMMlZ6Tmk1emVXMWliMnduS1R0Y2JuSmxjWFZwY21Vb0p5NHVMeTR1TDIxdlpIVnNaWE12WlhNMkxtOWlhbVZqZEM1MGJ5MXpkSEpwYm1jbktUdGNibkpsY1hWcGNtVW9KeTR1THk0dUwyMXZaSFZzWlhNdlpYTTNMbk41YldKdmJDNWhjM2x1WXkxcGRHVnlZWFJ2Y2ljcE8xeHVjbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5bGN6Y3VjM2x0WW05c0xtOWljMlZ5ZG1GaWJHVW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnY21WeGRXbHlaU2duTGk0dkxpNHZiVzlrZFd4bGN5OWZZMjl5WlNjcExsTjViV0p2YkR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDNONWJXSnZiQzlwYm1SbGVDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdPRE5jYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aWNtVnhkV2x5WlNnbkxpNHZMaTR2Ylc5a2RXeGxjeTlsY3pZdWMzUnlhVzVuTG1sMFpYSmhkRzl5SnlrN1hHNXlaWEYxYVhKbEtDY3VMaTh1TGk5dGIyUjFiR1Z6TDNkbFlpNWtiMjB1YVhSbGNtRmliR1VuS1R0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2NtVnhkV2x5WlNnbkxpNHZMaTR2Ylc5a2RXeGxjeTlmZDJ0ekxXVjRkQ2NwTG1Zb0oybDBaWEpoZEc5eUp5azdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5bWJpOXplVzFpYjJ3dmFYUmxjbUYwYjNJdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEZzBYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSW0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYVhRc0lFTnZibk4wY25WamRHOXlMQ0J1WVcxbExDQm1iM0ppYVdSa1pXNUdhV1ZzWkNsN1hHNGdJR2xtS0NFb2FYUWdhVzV6ZEdGdVkyVnZaaUJEYjI1emRISjFZM1J2Y2lrZ2ZId2dLR1p2Y21KcFpHUmxia1pwWld4a0lDRTlQU0IxYm1SbFptbHVaV1FnSmlZZ1ptOXlZbWxrWkdWdVJtbGxiR1FnYVc0Z2FYUXBLWHRjYmlBZ0lDQjBhSEp2ZHlCVWVYQmxSWEp5YjNJb2JtRnRaU0FySUNjNklHbHVZMjl5Y21WamRDQnBiblp2WTJGMGFXOXVJU2NwTzF4dUlDQjlJSEpsZEhWeWJpQnBkRHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTloYmkxcGJuTjBZVzVqWlM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ09EVmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ05DQTFJaXdpTHk4Z1lXeHNJR1Z1ZFcxbGNtRmliR1VnYjJKcVpXTjBJR3RsZVhNc0lHbHVZMngxWkdWeklITjViV0p2YkhOY2JuWmhjaUJuWlhSTFpYbHpJRDBnY21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFd0bGVYTW5LVnh1SUNBc0lHZFBVRk1nSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRaMjl3Y3ljcFhHNGdJQ3dnY0VsRklDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxd2FXVW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYVhRcGUxeHVJQ0IyWVhJZ2NtVnpkV3gwSUNBZ0lDQTlJR2RsZEV0bGVYTW9hWFFwWEc0Z0lDQWdMQ0JuWlhSVGVXMWliMnh6SUQwZ1owOVFVeTVtTzF4dUlDQnBaaWhuWlhSVGVXMWliMnh6S1h0Y2JpQWdJQ0IyWVhJZ2MzbHRZbTlzY3lBOUlHZGxkRk41YldKdmJITW9hWFFwWEc0Z0lDQWdJQ0FzSUdselJXNTFiU0FnUFNCd1NVVXVabHh1SUNBZ0lDQWdMQ0JwSUNBZ0lDQWdJRDBnTUZ4dUlDQWdJQ0FnTENCclpYazdYRzRnSUNBZ2QyaHBiR1VvYzNsdFltOXNjeTVzWlc1bmRHZ2dQaUJwS1dsbUtHbHpSVzUxYlM1allXeHNLR2wwTENCclpYa2dQU0J6ZVcxaWIyeHpXMmtySzEwcEtYSmxjM1ZzZEM1d2RYTm9LR3RsZVNrN1hHNGdJSDBnY21WMGRYSnVJSEpsYzNWc2REdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWxiblZ0TFd0bGVYTXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGcyWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0luWmhjaUJqZEhnZ0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMk4wZUNjcFhHNGdJQ3dnWTJGc2JDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlwZEdWeUxXTmhiR3duS1Z4dUlDQXNJR2x6UVhKeVlYbEpkR1Z5SUQwZ2NtVnhkV2x5WlNnbkxpOWZhWE10WVhKeVlYa3RhWFJsY2ljcFhHNGdJQ3dnWVc1UFltcGxZM1FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTloYmkxdlltcGxZM1FuS1Z4dUlDQXNJSFJ2VEdWdVozUm9JQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkRzh0YkdWdVozUm9KeWxjYmlBZ0xDQm5aWFJKZEdWeVJtNGdJQ0E5SUhKbGNYVnBjbVVvSnk0dlkyOXlaUzVuWlhRdGFYUmxjbUYwYjNJdGJXVjBhRzlrSnlsY2JpQWdMQ0JDVWtWQlN5QWdJQ0FnSUNBOUlIdDlYRzRnSUN3Z1VrVlVWVkpPSUNBZ0lDQWdQU0I3ZlR0Y2JuWmhjaUJsZUhCdmNuUnpJRDBnYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZEdWeVlXSnNaU3dnWlc1MGNtbGxjeXdnWm00c0lIUm9ZWFFzSUVsVVJWSkJWRTlTS1h0Y2JpQWdkbUZ5SUdsMFpYSkdiaUE5SUVsVVJWSkJWRTlTSUQ4Z1puVnVZM1JwYjI0b0tYc2djbVYwZFhKdUlHbDBaWEpoWW14bE95QjlJRG9nWjJWMFNYUmxja1p1S0dsMFpYSmhZbXhsS1Z4dUlDQWdJQ3dnWmlBZ0lDQWdJRDBnWTNSNEtHWnVMQ0IwYUdGMExDQmxiblJ5YVdWeklEOGdNaUE2SURFcFhHNGdJQ0FnTENCcGJtUmxlQ0FnUFNBd1hHNGdJQ0FnTENCc1pXNW5kR2dzSUhOMFpYQXNJR2wwWlhKaGRHOXlMQ0J5WlhOMWJIUTdYRzRnSUdsbUtIUjVjR1Z2WmlCcGRHVnlSbTRnSVQwZ0oyWjFibU4wYVc5dUp5bDBhSEp2ZHlCVWVYQmxSWEp5YjNJb2FYUmxjbUZpYkdVZ0t5QW5JR2x6SUc1dmRDQnBkR1Z5WVdKc1pTRW5LVHRjYmlBZ0x5OGdabUZ6ZENCallYTmxJR1p2Y2lCaGNuSmhlWE1nZDJsMGFDQmtaV1poZFd4MElHbDBaWEpoZEc5eVhHNGdJR2xtS0dselFYSnlZWGxKZEdWeUtHbDBaWEpHYmlrcFptOXlLR3hsYm1kMGFDQTlJSFJ2VEdWdVozUm9LR2wwWlhKaFlteGxMbXhsYm1kMGFDazdJR3hsYm1kMGFDQStJR2x1WkdWNE95QnBibVJsZUNzcktYdGNiaUFnSUNCeVpYTjFiSFFnUFNCbGJuUnlhV1Z6SUQ4Z1ppaGhiazlpYW1WamRDaHpkR1Z3SUQwZ2FYUmxjbUZpYkdWYmFXNWtaWGhkS1Zzd1hTd2djM1JsY0ZzeFhTa2dPaUJtS0dsMFpYSmhZbXhsVzJsdVpHVjRYU2s3WEc0Z0lDQWdhV1lvY21WemRXeDBJRDA5UFNCQ1VrVkJTeUI4ZkNCeVpYTjFiSFFnUFQwOUlGSkZWRlZTVGlseVpYUjFjbTRnY21WemRXeDBPMXh1SUNCOUlHVnNjMlVnWm05eUtHbDBaWEpoZEc5eUlEMGdhWFJsY2tadUxtTmhiR3dvYVhSbGNtRmliR1VwT3lBaEtITjBaWEFnUFNCcGRHVnlZWFJ2Y2k1dVpYaDBLQ2twTG1SdmJtVTdJQ2w3WEc0Z0lDQWdjbVZ6ZFd4MElEMGdZMkZzYkNocGRHVnlZWFJ2Y2l3Z1ppd2djM1JsY0M1MllXeDFaU3dnWlc1MGNtbGxjeWs3WEc0Z0lDQWdhV1lvY21WemRXeDBJRDA5UFNCQ1VrVkJTeUI4ZkNCeVpYTjFiSFFnUFQwOUlGSkZWRlZTVGlseVpYUjFjbTRnY21WemRXeDBPMXh1SUNCOVhHNTlPMXh1Wlhod2IzSjBjeTVDVWtWQlN5QWdQU0JDVWtWQlN6dGNibVY0Y0c5eWRITXVVa1ZVVlZKT0lEMGdVa1ZVVlZKT08xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWm05eUxXOW1MbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0E0TjF4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0EwSURVaUxDSXZMeUJtWVhOMElHRndjR3g1TENCb2RIUndPaTh2YW5Od1pYSm1MbXh1YTJsMExtTnZiUzltWVhOMExXRndjR3g1THpWY2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b1ptNHNJR0Z5WjNNc0lIUm9ZWFFwZTF4dUlDQjJZWElnZFc0Z1BTQjBhR0YwSUQwOVBTQjFibVJsWm1sdVpXUTdYRzRnSUhOM2FYUmphQ2hoY21kekxteGxibWQwYUNsN1hHNGdJQ0FnWTJGelpTQXdPaUJ5WlhSMWNtNGdkVzRnUHlCbWJpZ3BYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ09pQm1iaTVqWVd4c0tIUm9ZWFFwTzF4dUlDQWdJR05oYzJVZ01Ub2djbVYwZFhKdUlIVnVJRDhnWm00b1lYSm5jMXN3WFNsY2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E2SUdadUxtTmhiR3dvZEdoaGRDd2dZWEpuYzFzd1hTazdYRzRnSUNBZ1kyRnpaU0F5T2lCeVpYUjFjbTRnZFc0Z1B5Qm1iaWhoY21keld6QmRMQ0JoY21keld6RmRLVnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEb2dabTR1WTJGc2JDaDBhR0YwTENCaGNtZHpXekJkTENCaGNtZHpXekZkS1R0Y2JpQWdJQ0JqWVhObElETTZJSEpsZEhWeWJpQjFiaUEvSUdadUtHRnlaM05iTUYwc0lHRnlaM05iTVYwc0lHRnlaM05iTWwwcFhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnT2lCbWJpNWpZV3hzS0hSb1lYUXNJR0Z5WjNOYk1GMHNJR0Z5WjNOYk1WMHNJR0Z5WjNOYk1sMHBPMXh1SUNBZ0lHTmhjMlVnTkRvZ2NtVjBkWEp1SUhWdUlEOGdabTRvWVhKbmMxc3dYU3dnWVhKbmMxc3hYU3dnWVhKbmMxc3lYU3dnWVhKbmMxc3pYU2xjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQTZJR1p1TG1OaGJHd29kR2hoZEN3Z1lYSm5jMXN3WFN3Z1lYSm5jMXN4WFN3Z1lYSm5jMXN5WFN3Z1lYSm5jMXN6WFNrN1hHNGdJSDBnY21WMGRYSnVJQ0FnSUNBZ0lDQWdJQ0FnSUNCbWJpNWhjSEJzZVNoMGFHRjBMQ0JoY21kektUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXBiblp2YTJVdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEZzRYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElEUWdOU0lzSWk4dklHTm9aV05ySUc5dUlHUmxabUYxYkhRZ1FYSnlZWGtnYVhSbGNtRjBiM0pjYm5aaGNpQkpkR1Z5WVhSdmNuTWdJRDBnY21WeGRXbHlaU2duTGk5ZmFYUmxjbUYwYjNKekp5bGNiaUFnTENCSlZFVlNRVlJQVWlBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmZDJ0ekp5a29KMmwwWlhKaGRHOXlKeWxjYmlBZ0xDQkJjbkpoZVZCeWIzUnZJRDBnUVhKeVlYa3VjSEp2ZEc5MGVYQmxPMXh1WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0dsMEtYdGNiaUFnY21WMGRYSnVJR2wwSUNFOVBTQjFibVJsWm1sdVpXUWdKaVlnS0VsMFpYSmhkRzl5Y3k1QmNuSmhlU0E5UFQwZ2FYUWdmSHdnUVhKeVlYbFFjbTkwYjF0SlZFVlNRVlJQVWwwZ1BUMDlJR2wwS1R0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5cGN5MWhjbkpoZVMxcGRHVnlMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0E0T1Z4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0EwSURVaUxDSXZMeUEzTGpJdU1pQkpjMEZ5Y21GNUtHRnlaM1Z0Wlc1MEtWeHVkbUZ5SUdOdlppQTlJSEpsY1hWcGNtVW9KeTR2WDJOdlppY3BPMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JCY25KaGVTNXBjMEZ5Y21GNUlIeDhJR1oxYm1OMGFXOXVJR2x6UVhKeVlYa29ZWEpuS1h0Y2JpQWdjbVYwZFhKdUlHTnZaaWhoY21jcElEMDlJQ2RCY25KaGVTYzdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhWE10WVhKeVlYa3Vhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGt3WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0lpOHZJR05oYkd3Z2MyOXRaWFJvYVc1bklHOXVJR2wwWlhKaGRHOXlJSE4wWlhBZ2QybDBhQ0J6WVdabElHTnNiM05wYm1jZ2IyNGdaWEp5YjNKY2JuWmhjaUJoYms5aWFtVmpkQ0E5SUhKbGNYVnBjbVVvSnk0dlgyRnVMVzlpYW1WamRDY3BPMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZEdWeVlYUnZjaXdnWm00c0lIWmhiSFZsTENCbGJuUnlhV1Z6S1h0Y2JpQWdkSEo1SUh0Y2JpQWdJQ0J5WlhSMWNtNGdaVzUwY21sbGN5QS9JR1p1S0dGdVQySnFaV04wS0haaGJIVmxLVnN3WFN3Z2RtRnNkV1ZiTVYwcElEb2dabTRvZG1Gc2RXVXBPMXh1SUNBdkx5QTNMalF1TmlCSmRHVnlZWFJ2Y2tOc2IzTmxLR2wwWlhKaGRHOXlMQ0JqYjIxd2JHVjBhVzl1S1Z4dUlDQjlJR05oZEdOb0tHVXBlMXh1SUNBZ0lIWmhjaUJ5WlhRZ1BTQnBkR1Z5WVhSdmNsc25jbVYwZFhKdUoxMDdYRzRnSUNBZ2FXWW9jbVYwSUNFOVBTQjFibVJsWm1sdVpXUXBZVzVQWW1wbFkzUW9jbVYwTG1OaGJHd29hWFJsY21GMGIzSXBLVHRjYmlBZ0lDQjBhSEp2ZHlCbE8xeHVJQ0I5WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYVhSbGNpMWpZV3hzTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBNU1WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBMElEVWlMQ0oyWVhJZ1NWUkZVa0ZVVDFJZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmQydHpKeWtvSjJsMFpYSmhkRzl5SnlsY2JpQWdMQ0JUUVVaRlgwTk1UMU5KVGtjZ1BTQm1ZV3h6WlR0Y2JseHVkSEo1SUh0Y2JpQWdkbUZ5SUhKcGRHVnlJRDBnV3pkZFcwbFVSVkpCVkU5U1hTZ3BPMXh1SUNCeWFYUmxjbHNuY21WMGRYSnVKMTBnUFNCbWRXNWpkR2x2YmlncGV5QlRRVVpGWDBOTVQxTkpUa2NnUFNCMGNuVmxPeUI5TzF4dUlDQkJjbkpoZVM1bWNtOXRLSEpwZEdWeUxDQm1kVzVqZEdsdmJpZ3BleUIwYUhKdmR5QXlPeUI5S1R0Y2JuMGdZMkYwWTJnb1pTbDdJQzhxSUdWdGNIUjVJQ292SUgxY2JseHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaGxlR1ZqTENCemEybHdRMnh2YzJsdVp5bDdYRzRnSUdsbUtDRnphMmx3UTJ4dmMybHVaeUFtSmlBaFUwRkdSVjlEVEU5VFNVNUhLWEpsZEhWeWJpQm1ZV3h6WlR0Y2JpQWdkbUZ5SUhOaFptVWdQU0JtWVd4elpUdGNiaUFnZEhKNUlIdGNiaUFnSUNCMllYSWdZWEp5SUNBOUlGczNYVnh1SUNBZ0lDQWdMQ0JwZEdWeUlEMGdZWEp5VzBsVVJWSkJWRTlTWFNncE8xeHVJQ0FnSUdsMFpYSXVibVY0ZENBOUlHWjFibU4wYVc5dUtDbDdJSEpsZEhWeWJpQjdaRzl1WlRvZ2MyRm1aU0E5SUhSeWRXVjlPeUI5TzF4dUlDQWdJR0Z5Y2x0SlZFVlNRVlJQVWwwZ1BTQm1kVzVqZEdsdmJpZ3BleUJ5WlhSMWNtNGdhWFJsY2pzZ2ZUdGNiaUFnSUNCbGVHVmpLR0Z5Y2lrN1hHNGdJSDBnWTJGMFkyZ29aU2w3SUM4cUlHVnRjSFI1SUNvdklIMWNiaUFnY21WMGRYSnVJSE5oWm1VN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTFrWlhSbFkzUXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGt5WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRFFnTlNJc0luWmhjaUJuWlhSTFpYbHpJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdGEyVjVjeWNwWEc0Z0lDd2dkRzlKVDJKcVpXTjBJRDBnY21WeGRXbHlaU2duTGk5ZmRHOHRhVzlpYW1WamRDY3BPMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWh2WW1wbFkzUXNJR1ZzS1h0Y2JpQWdkbUZ5SUU4Z0lDQWdJQ0E5SUhSdlNVOWlhbVZqZENodlltcGxZM1FwWEc0Z0lDQWdMQ0JyWlhseklDQWdQU0JuWlhSTFpYbHpLRThwWEc0Z0lDQWdMQ0JzWlc1bmRHZ2dQU0JyWlhsekxteGxibWQwYUZ4dUlDQWdJQ3dnYVc1a1pYZ2dJRDBnTUZ4dUlDQWdJQ3dnYTJWNU8xeHVJQ0IzYUdsc1pTaHNaVzVuZEdnZ1BpQnBibVJsZUNscFppaFBXMnRsZVNBOUlHdGxlWE5iYVc1a1pYZ3JLMTFkSUQwOVBTQmxiQ2x5WlhSMWNtNGdhMlY1TzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJ0bGVXOW1MbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0E1TTF4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSjJZWElnWjJ4dlltRnNJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZaMnh2WW1Gc0p5bGNiaUFnTENCdFlXTnliM1JoYzJzZ1BTQnlaWEYxYVhKbEtDY3VMMTkwWVhOckp5a3VjMlYwWEc0Z0lDd2dUMkp6WlhKMlpYSWdJRDBnWjJ4dlltRnNMazExZEdGMGFXOXVUMkp6WlhKMlpYSWdmSHdnWjJ4dlltRnNMbGRsWWt0cGRFMTFkR0YwYVc5dVQySnpaWEoyWlhKY2JpQWdMQ0J3Y205alpYTnpJQ0FnUFNCbmJHOWlZV3d1Y0hKdlkyVnpjMXh1SUNBc0lGQnliMjFwYzJVZ0lDQTlJR2RzYjJKaGJDNVFjbTl0YVhObFhHNGdJQ3dnYVhOT2IyUmxJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZZMjltSnlrb2NISnZZMlZ6Y3lrZ1BUMGdKM0J5YjJObGMzTW5PMXh1WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0NsN1hHNGdJSFpoY2lCb1pXRmtMQ0JzWVhOMExDQnViM1JwWm5rN1hHNWNiaUFnZG1GeUlHWnNkWE5vSUQwZ1puVnVZM1JwYjI0b0tYdGNiaUFnSUNCMllYSWdjR0Z5Wlc1MExDQm1ianRjYmlBZ0lDQnBaaWhwYzA1dlpHVWdKaVlnS0hCaGNtVnVkQ0E5SUhCeWIyTmxjM011Wkc5dFlXbHVLU2x3WVhKbGJuUXVaWGhwZENncE8xeHVJQ0FnSUhkb2FXeGxLR2hsWVdRcGUxeHVJQ0FnSUNBZ1ptNGdJQ0E5SUdobFlXUXVabTQ3WEc0Z0lDQWdJQ0JvWldGa0lEMGdhR1ZoWkM1dVpYaDBPMXh1SUNBZ0lDQWdkSEo1SUh0Y2JpQWdJQ0FnSUNBZ1ptNG9LVHRjYmlBZ0lDQWdJSDBnWTJGMFkyZ29aU2w3WEc0Z0lDQWdJQ0FnSUdsbUtHaGxZV1FwYm05MGFXWjVLQ2s3WEc0Z0lDQWdJQ0FnSUdWc2MyVWdiR0Z6ZENBOUlIVnVaR1ZtYVc1bFpEdGNiaUFnSUNBZ0lDQWdkR2h5YjNjZ1pUdGNiaUFnSUNBZ0lIMWNiaUFnSUNCOUlHeGhjM1FnUFNCMWJtUmxabWx1WldRN1hHNGdJQ0FnYVdZb2NHRnlaVzUwS1hCaGNtVnVkQzVsYm5SbGNpZ3BPMXh1SUNCOU8xeHVYRzRnSUM4dklFNXZaR1V1YW5OY2JpQWdhV1lvYVhOT2IyUmxLWHRjYmlBZ0lDQnViM1JwWm5rZ1BTQm1kVzVqZEdsdmJpZ3BlMXh1SUNBZ0lDQWdjSEp2WTJWemN5NXVaWGgwVkdsamF5aG1iSFZ6YUNrN1hHNGdJQ0FnZlR0Y2JpQWdMeThnWW5KdmQzTmxjbk1nZDJsMGFDQk5kWFJoZEdsdmJrOWljMlZ5ZG1WeVhHNGdJSDBnWld4elpTQnBaaWhQWW5ObGNuWmxjaWw3WEc0Z0lDQWdkbUZ5SUhSdloyZHNaU0E5SUhSeWRXVmNiaUFnSUNBZ0lDd2dibTlrWlNBZ0lEMGdaRzlqZFcxbGJuUXVZM0psWVhSbFZHVjRkRTV2WkdVb0p5Y3BPMXh1SUNBZ0lHNWxkeUJQWW5ObGNuWmxjaWhtYkhWemFDa3ViMkp6WlhKMlpTaHViMlJsTENCN1kyaGhjbUZqZEdWeVJHRjBZVG9nZEhKMVpYMHBPeUF2THlCbGMyeHBiblF0WkdsellXSnNaUzFzYVc1bElHNXZMVzVsZDF4dUlDQWdJRzV2ZEdsbWVTQTlJR1oxYm1OMGFXOXVLQ2w3WEc0Z0lDQWdJQ0J1YjJSbExtUmhkR0VnUFNCMGIyZG5iR1VnUFNBaGRHOW5aMnhsTzF4dUlDQWdJSDA3WEc0Z0lDOHZJR1Z1ZG1seWIyNXRaVzUwY3lCM2FYUm9JRzFoZVdKbElHNXZiaTFqYjIxd2JHVjBaV3g1SUdOdmNuSmxZM1FzSUdKMWRDQmxlR2x6ZEdWdWRDQlFjbTl0YVhObFhHNGdJSDBnWld4elpTQnBaaWhRY205dGFYTmxJQ1ltSUZCeWIyMXBjMlV1Y21WemIyeDJaU2w3WEc0Z0lDQWdkbUZ5SUhCeWIyMXBjMlVnUFNCUWNtOXRhWE5sTG5KbGMyOXNkbVVvS1R0Y2JpQWdJQ0J1YjNScFpua2dQU0JtZFc1amRHbHZiaWdwZTF4dUlDQWdJQ0FnY0hKdmJXbHpaUzUwYUdWdUtHWnNkWE5vS1R0Y2JpQWdJQ0I5TzF4dUlDQXZMeUJtYjNJZ2IzUm9aWElnWlc1MmFYSnZibTFsYm5SeklDMGdiV0ZqY205MFlYTnJJR0poYzJWa0lHOXVPbHh1SUNBdkx5QXRJSE5sZEVsdGJXVmthV0YwWlZ4dUlDQXZMeUF0SUUxbGMzTmhaMlZEYUdGdWJtVnNYRzRnSUM4dklDMGdkMmx1Wkc5M0xuQnZjM1JOWlhOellXZGNiaUFnTHk4Z0xTQnZibkpsWVdSNWMzUmhkR1ZqYUdGdVoyVmNiaUFnTHk4Z0xTQnpaWFJVYVcxbGIzVjBYRzRnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdibTkwYVdaNUlEMGdablZ1WTNScGIyNG9LWHRjYmlBZ0lDQWdJQzh2SUhOMGNtRnVaMlVnU1VVZ0t5QjNaV0p3WVdOcklHUmxkaUJ6WlhKMlpYSWdZblZuSUMwZ2RYTmxJQzVqWVd4c0tHZHNiMkpoYkNsY2JpQWdJQ0FnSUcxaFkzSnZkR0Z6YXk1allXeHNLR2RzYjJKaGJDd2dabXgxYzJncE8xeHVJQ0FnSUgwN1hHNGdJSDFjYmx4dUlDQnlaWFIxY200Z1puVnVZM1JwYjI0b1ptNHBlMXh1SUNBZ0lIWmhjaUIwWVhOcklEMGdlMlp1T2lCbWJpd2dibVY0ZERvZ2RXNWtaV1pwYm1Wa2ZUdGNiaUFnSUNCcFppaHNZWE4wS1d4aGMzUXVibVY0ZENBOUlIUmhjMnM3WEc0Z0lDQWdhV1lvSVdobFlXUXBlMXh1SUNBZ0lDQWdhR1ZoWkNBOUlIUmhjMnM3WEc0Z0lDQWdJQ0J1YjNScFpua29LVHRjYmlBZ0lDQjlJR3hoYzNRZ1BTQjBZWE5yTzF4dUlDQjlPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjFwWTNKdmRHRnpheTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnT1RSY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTkNBMUlpd2lMeThnWm1Gc2JHSmhZMnNnWm05eUlFbEZNVEVnWW5Wbloza2dUMkpxWldOMExtZGxkRTkzYmxCeWIzQmxjblI1VG1GdFpYTWdkMmwwYUNCcFpuSmhiV1VnWVc1a0lIZHBibVJ2ZDF4dWRtRnlJSFJ2U1U5aWFtVmpkQ0E5SUhKbGNYVnBjbVVvSnk0dlgzUnZMV2x2WW1wbFkzUW5LVnh1SUNBc0lHZFBVRTRnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFuYjNCdUp5a3VabHh1SUNBc0lIUnZVM1J5YVc1bklDQTlJSHQ5TG5SdlUzUnlhVzVuTzF4dVhHNTJZWElnZDJsdVpHOTNUbUZ0WlhNZ1BTQjBlWEJsYjJZZ2QybHVaRzkzSUQwOUlDZHZZbXBsWTNRbklDWW1JSGRwYm1SdmR5QW1KaUJQWW1wbFkzUXVaMlYwVDNkdVVISnZjR1Z5ZEhsT1lXMWxjMXh1SUNBL0lFOWlhbVZqZEM1blpYUlBkMjVRY205d1pYSjBlVTVoYldWektIZHBibVJ2ZHlrZ09pQmJYVHRjYmx4dWRtRnlJR2RsZEZkcGJtUnZkMDVoYldWeklEMGdablZ1WTNScGIyNG9hWFFwZTF4dUlDQjBjbmtnZTF4dUlDQWdJSEpsZEhWeWJpQm5UMUJPS0dsMEtUdGNiaUFnZlNCallYUmphQ2hsS1h0Y2JpQWdJQ0J5WlhSMWNtNGdkMmx1Wkc5M1RtRnRaWE11YzJ4cFkyVW9LVHRjYmlBZ2ZWeHVmVHRjYmx4dWJXOWtkV3hsTG1WNGNHOXlkSE11WmlBOUlHWjFibU4wYVc5dUlHZGxkRTkzYmxCeWIzQmxjblI1VG1GdFpYTW9hWFFwZTF4dUlDQnlaWFIxY200Z2QybHVaRzkzVG1GdFpYTWdKaVlnZEc5VGRISnBibWN1WTJGc2JDaHBkQ2tnUFQwZ0oxdHZZbXBsWTNRZ1YybHVaRzkzWFNjZ1B5Qm5aWFJYYVc1a2IzZE9ZVzFsY3locGRDa2dPaUJuVDFCT0tIUnZTVTlpYW1WamRDaHBkQ2twTzF4dWZUdGNibHh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFdkdmNHNHRaWGgwTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBNU5WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWlMQ0oyWVhJZ2FHbGtaU0E5SUhKbGNYVnBjbVVvSnk0dlgyaHBaR1VuS1R0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b2RHRnlaMlYwTENCemNtTXNJSE5oWm1VcGUxeHVJQ0JtYjNJb2RtRnlJR3RsZVNCcGJpQnpjbU1wZTF4dUlDQWdJR2xtS0hOaFptVWdKaVlnZEdGeVoyVjBXMnRsZVYwcGRHRnlaMlYwVzJ0bGVWMGdQU0J6Y21OYmEyVjVYVHRjYmlBZ0lDQmxiSE5sSUdocFpHVW9kR0Z5WjJWMExDQnJaWGtzSUhOeVkxdHJaWGxkS1R0Y2JpQWdmU0J5WlhSMWNtNGdkR0Z5WjJWME8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzSmxaR1ZtYVc1bExXRnNiQzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnT1RaY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTkNBMUlpd2lMeThnVjI5eWEzTWdkMmwwYUNCZlgzQnliM1J2WDE4Z2IyNXNlUzRnVDJ4a0lIWTRJR05oYmlkMElIZHZjbXNnZDJsMGFDQnVkV3hzSUhCeWIzUnZJRzlpYW1WamRITXVYRzR2S2lCbGMyeHBiblF0WkdsellXSnNaU0J1Ynkxd2NtOTBieUFxTDF4dWRtRnlJR2x6VDJKcVpXTjBJRDBnY21WeGRXbHlaU2duTGk5ZmFYTXRiMkpxWldOMEp5bGNiaUFnTENCaGJrOWlhbVZqZENBOUlISmxjWFZwY21Vb0p5NHZYMkZ1TFc5aWFtVmpkQ2NwTzF4dWRtRnlJR05vWldOcklEMGdablZ1WTNScGIyNG9UeXdnY0hKdmRHOHBlMXh1SUNCaGJrOWlhbVZqZENoUEtUdGNiaUFnYVdZb0lXbHpUMkpxWldOMEtIQnliM1J2S1NBbUppQndjbTkwYnlBaFBUMGdiblZzYkNsMGFISnZkeUJVZVhCbFJYSnliM0lvY0hKdmRHOGdLeUJjSWpvZ1kyRnVKM1FnYzJWMElHRnpJSEJ5YjNSdmRIbHdaU0ZjSWlrN1hHNTlPMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0I3WEc0Z0lITmxkRG9nVDJKcVpXTjBMbk5sZEZCeWIzUnZkSGx3WlU5bUlIeDhJQ2duWDE5d2NtOTBiMTlmSnlCcGJpQjdmU0EvSUM4dklHVnpiR2x1ZEMxa2FYTmhZbXhsTFd4cGJtVmNiaUFnSUNCbWRXNWpkR2x2YmloMFpYTjBMQ0JpZFdkbmVTd2djMlYwS1h0Y2JpQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJSE5sZENBOUlISmxjWFZwY21Vb0p5NHZYMk4wZUNjcEtFWjFibU4wYVc5dUxtTmhiR3dzSUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxbmIzQmtKeWt1WmloUFltcGxZM1F1Y0hKdmRHOTBlWEJsTENBblgxOXdjbTkwYjE5Zkp5a3VjMlYwTENBeUtUdGNiaUFnSUNBZ0lDQWdjMlYwS0hSbGMzUXNJRnRkS1R0Y2JpQWdJQ0FnSUNBZ1luVm5aM2tnUFNBaEtIUmxjM1FnYVc1emRHRnVZMlZ2WmlCQmNuSmhlU2s3WEc0Z0lDQWdJQ0I5SUdOaGRHTm9LR1VwZXlCaWRXZG5lU0E5SUhSeWRXVTdJSDFjYmlBZ0lDQWdJSEpsZEhWeWJpQm1kVzVqZEdsdmJpQnpaWFJRY205MGIzUjVjR1ZQWmloUExDQndjbTkwYnlsN1hHNGdJQ0FnSUNBZ0lHTm9aV05yS0U4c0lIQnliM1J2S1R0Y2JpQWdJQ0FnSUNBZ2FXWW9ZblZuWjNrcFR5NWZYM0J5YjNSdlgxOGdQU0J3Y205MGJ6dGNiaUFnSUNBZ0lDQWdaV3h6WlNCelpYUW9UeXdnY0hKdmRHOHBPMXh1SUNBZ0lDQWdJQ0J5WlhSMWNtNGdUenRjYmlBZ0lDQWdJSDA3WEc0Z0lDQWdmU2g3ZlN3Z1ptRnNjMlVwSURvZ2RXNWtaV1pwYm1Wa0tTeGNiaUFnWTJobFkyczZJR05vWldOclhHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMyVjBMWEJ5YjNSdkxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTVOMXh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1pTENJbmRYTmxJSE4wY21samRDYzdYRzUyWVhJZ1oyeHZZbUZzSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5bmJHOWlZV3duS1Z4dUlDQXNJR052Y21VZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZZMjl5WlNjcFhHNGdJQ3dnWkZBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRaSEFuS1Z4dUlDQXNJRVJGVTBOU1NWQlVUMUpUSUQwZ2NtVnhkV2x5WlNnbkxpOWZaR1Z6WTNKcGNIUnZjbk1uS1Z4dUlDQXNJRk5RUlVOSlJWTWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkMnR6Snlrb0ozTndaV05wWlhNbktUdGNibHh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhMUlZrcGUxeHVJQ0IyWVhJZ1F5QTlJSFI1Y0dWdlppQmpiM0psVzB0RldWMGdQVDBnSjJaMWJtTjBhVzl1SnlBL0lHTnZjbVZiUzBWWlhTQTZJR2RzYjJKaGJGdExSVmxkTzF4dUlDQnBaaWhFUlZORFVrbFFWRTlTVXlBbUppQkRJQ1ltSUNGRFcxTlFSVU5KUlZOZEtXUlFMbVlvUXl3Z1UxQkZRMGxGVXl3Z2UxeHVJQ0FnSUdOdmJtWnBaM1Z5WVdKc1pUb2dkSEoxWlN4Y2JpQWdJQ0JuWlhRNklHWjFibU4wYVc5dUtDbDdJSEpsZEhWeWJpQjBhR2x6T3lCOVhHNGdJSDBwTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNObGRDMXpjR1ZqYVdWekxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTVPRnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQTBJRFVpTENJdkx5QTNMak11TWpBZ1UzQmxZMmxsYzBOdmJuTjBjblZqZEc5eUtFOHNJR1JsWm1GMWJIUkRiMjV6ZEhKMVkzUnZjaWxjYm5aaGNpQmhiazlpYW1WamRDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5aGJpMXZZbXBsWTNRbktWeHVJQ0FzSUdGR2RXNWpkR2x2YmlBOUlISmxjWFZwY21Vb0p5NHZYMkV0Wm5WdVkzUnBiMjRuS1Z4dUlDQXNJRk5RUlVOSlJWTWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgzZHJjeWNwS0NkemNHVmphV1Z6SnlrN1hHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlHWjFibU4wYVc5dUtFOHNJRVFwZTF4dUlDQjJZWElnUXlBOUlHRnVUMkpxWldOMEtFOHBMbU52Ym5OMGNuVmpkRzl5TENCVE8xeHVJQ0J5WlhSMWNtNGdReUE5UFQwZ2RXNWtaV1pwYm1Wa0lIeDhJQ2hUSUQwZ1lXNVBZbXBsWTNRb1F5bGJVMUJGUTBsRlUxMHBJRDA5SUhWdVpHVm1hVzVsWkNBL0lFUWdPaUJoUm5WdVkzUnBiMjRvVXlrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMzQmxZMmxsY3kxamIyNXpkSEoxWTNSdmNpNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdPVGxjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdOQ0ExSWl3aWRtRnlJQ1JsZUhCdmNuUWdQU0J5WlhGMWFYSmxLQ2N1TDE5bGVIQnZjblFuS1Z4dUx5OGdNVGt1TVM0eUxqSWdMeUF4TlM0eUxqTXVOU0JQWW1wbFkzUXVZM0psWVhSbEtFOGdXeXdnVUhKdmNHVnlkR2xsYzEwcFhHNGtaWGh3YjNKMEtDUmxlSEJ2Y25RdVV5d2dKMDlpYW1WamRDY3NJSHRqY21WaGRHVTZJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFqY21WaGRHVW5LWDBwTzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWxjell1YjJKcVpXTjBMbU55WldGMFpTNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVEF3WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0lpOHZJREU1TGpFdU1pNDVJRTlpYW1WamRDNW5aWFJRY205MGIzUjVjR1ZQWmloUEtWeHVkbUZ5SUhSdlQySnFaV04wSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgzUnZMVzlpYW1WamRDY3BYRzRnSUN3Z0pHZGxkRkJ5YjNSdmRIbHdaVTltSUQwZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXZHdieWNwTzF4dVhHNXlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRjMkZ3Snlrb0oyZGxkRkJ5YjNSdmRIbHdaVTltSnl3Z1puVnVZM1JwYjI0b0tYdGNiaUFnY21WMGRYSnVJR1oxYm1OMGFXOXVJR2RsZEZCeWIzUnZkSGx3WlU5bUtHbDBLWHRjYmlBZ0lDQnlaWFIxY200Z0pHZGxkRkJ5YjNSdmRIbHdaVTltS0hSdlQySnFaV04wS0dsMEtTazdYRzRnSUgwN1hHNTlLVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbTlpYW1WamRDNW5aWFF0Y0hKdmRHOTBlWEJsTFc5bUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXhNREZjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aUx5OGdNVGt1TVM0eUxqRTBJRTlpYW1WamRDNXJaWGx6S0U4cFhHNTJZWElnZEc5UFltcGxZM1FnUFNCeVpYRjFhWEpsS0NjdUwxOTBieTF2WW1wbFkzUW5LVnh1SUNBc0lDUnJaWGx6SUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYjJKcVpXTjBMV3RsZVhNbktUdGNibHh1Y21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFhOaGNDY3BLQ2RyWlhsekp5d2dablZ1WTNScGIyNG9LWHRjYmlBZ2NtVjBkWEp1SUdaMWJtTjBhVzl1SUd0bGVYTW9hWFFwZTF4dUlDQWdJSEpsZEhWeWJpQWthMlY1Y3loMGIwOWlhbVZqZENocGRDa3BPMXh1SUNCOU8xeHVmU2s3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwyVnpOaTV2WW1wbFkzUXVhMlY1Y3k1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01UQXlYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeUlEUWdOU0lzSWk4dklERTVMakV1TXk0eE9TQlBZbXBsWTNRdWMyVjBVSEp2ZEc5MGVYQmxUMllvVHl3Z2NISnZkRzhwWEc1MllYSWdKR1Y0Y0c5eWRDQTlJSEpsY1hWcGNtVW9KeTR2WDJWNGNHOXlkQ2NwTzF4dUpHVjRjRzl5ZENna1pYaHdiM0owTGxNc0lDZFBZbXBsWTNRbkxDQjdjMlYwVUhKdmRHOTBlWEJsVDJZNklISmxjWFZwY21Vb0p5NHZYM05sZEMxd2NtOTBieWNwTG5ObGRIMHBPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5bGN6WXViMkpxWldOMExuTmxkQzF3Y205MGIzUjVjR1V0YjJZdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlERXdNMXh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1pTENJbmRYTmxJSE4wY21samRDYzdYRzUyWVhJZ1RFbENVa0ZTV1NBZ0lDQWdJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYkdsaWNtRnllU2NwWEc0Z0lDd2daMnh2WW1Gc0lDQWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZloyeHZZbUZzSnlsY2JpQWdMQ0JqZEhnZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWpkSGduS1Z4dUlDQXNJR05zWVhOemIyWWdJQ0FnSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyTnNZWE56YjJZbktWeHVJQ0FzSUNSbGVIQnZjblFnSUNBZ0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMlY0Y0c5eWRDY3BYRzRnSUN3Z2FYTlBZbXBsWTNRZ0lDQWdJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYVhNdGIySnFaV04wSnlsY2JpQWdMQ0JoUm5WdVkzUnBiMjRnSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWhMV1oxYm1OMGFXOXVKeWxjYmlBZ0xDQmhia2x1YzNSaGJtTmxJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5aGJpMXBibk4wWVc1alpTY3BYRzRnSUN3Z1ptOXlUMllnSUNBZ0lDQWdJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWm05eUxXOW1KeWxjYmlBZ0xDQnpjR1ZqYVdWelEyOXVjM1J5ZFdOMGIzSWdQU0J5WlhGMWFYSmxLQ2N1TDE5emNHVmphV1Z6TFdOdmJuTjBjblZqZEc5eUp5bGNiaUFnTENCMFlYTnJJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkwWVhOckp5a3VjMlYwWEc0Z0lDd2diV2xqY205MFlYTnJJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmJXbGpjbTkwWVhOckp5a29LVnh1SUNBc0lGQlNUMDFKVTBVZ0lDQWdJQ0FnSUNBZ0lDQTlJQ2RRY205dGFYTmxKMXh1SUNBc0lGUjVjR1ZGY25KdmNpQWdJQ0FnSUNBZ0lDQTlJR2RzYjJKaGJDNVVlWEJsUlhKeWIzSmNiaUFnTENCd2NtOWpaWE56SUNBZ0lDQWdJQ0FnSUNBZ1BTQm5iRzlpWVd3dWNISnZZMlZ6YzF4dUlDQXNJQ1JRY205dGFYTmxJQ0FnSUNBZ0lDQWdJQ0E5SUdkc2IySmhiRnRRVWs5TlNWTkZYVnh1SUNBc0lIQnliMk5sYzNNZ0lDQWdJQ0FnSUNBZ0lDQTlJR2RzYjJKaGJDNXdjbTlqWlhOelhHNGdJQ3dnYVhOT2IyUmxJQ0FnSUNBZ0lDQWdJQ0FnSUQwZ1kyeGhjM052Wmlod2NtOWpaWE56S1NBOVBTQW5jSEp2WTJWemN5ZGNiaUFnTENCbGJYQjBlU0FnSUNBZ0lDQWdJQ0FnSUNBZ1BTQm1kVzVqZEdsdmJpZ3BleUF2S2lCbGJYQjBlU0FxTHlCOVhHNGdJQ3dnU1c1MFpYSnVZV3dzSUVkbGJtVnlhV05RY205dGFYTmxRMkZ3WVdKcGJHbDBlU3dnVjNKaGNIQmxjanRjYmx4dWRtRnlJRlZUUlY5T1FWUkpWa1VnUFNBaElXWjFibU4wYVc5dUtDbDdYRzRnSUhSeWVTQjdYRzRnSUNBZ0x5OGdZMjl5Y21WamRDQnpkV0pqYkdGemMybHVaeUIzYVhSb0lFQkFjM0JsWTJsbGN5QnpkWEJ3YjNKMFhHNGdJQ0FnZG1GeUlIQnliMjFwYzJVZ0lDQWdJRDBnSkZCeWIyMXBjMlV1Y21WemIyeDJaU2d4S1Z4dUlDQWdJQ0FnTENCR1lXdGxVSEp2YldselpTQTlJQ2h3Y205dGFYTmxMbU52Ym5OMGNuVmpkRzl5SUQwZ2UzMHBXM0psY1hWcGNtVW9KeTR2WDNkcmN5Y3BLQ2R6Y0dWamFXVnpKeWxkSUQwZ1puVnVZM1JwYjI0b1pYaGxZeWw3SUdWNFpXTW9aVzF3ZEhrc0lHVnRjSFI1S1RzZ2ZUdGNiaUFnSUNBdkx5QjFibWhoYm1Sc1pXUWdjbVZxWldOMGFXOXVjeUIwY21GamEybHVaeUJ6ZFhCd2IzSjBMQ0JPYjJSbFNsTWdVSEp2YldselpTQjNhWFJvYjNWMElHbDBJR1poYVd4eklFQkFjM0JsWTJsbGN5QjBaWE4wWEc0Z0lDQWdjbVYwZFhKdUlDaHBjMDV2WkdVZ2ZId2dkSGx3Wlc5bUlGQnliMjFwYzJWU1pXcGxZM1JwYjI1RmRtVnVkQ0E5UFNBblpuVnVZM1JwYjI0bktTQW1KaUJ3Y205dGFYTmxMblJvWlc0b1pXMXdkSGtwSUdsdWMzUmhibU5sYjJZZ1JtRnJaVkJ5YjIxcGMyVTdYRzRnSUgwZ1kyRjBZMmdvWlNsN0lDOHFJR1Z0Y0hSNUlDb3ZJSDFjYm4wb0tUdGNibHh1THk4Z2FHVnNjR1Z5YzF4dWRtRnlJSE5oYldWRGIyNXpkSEoxWTNSdmNpQTlJR1oxYm1OMGFXOXVLR0VzSUdJcGUxeHVJQ0F2THlCM2FYUm9JR3hwWW5KaGNua2dkM0poY0hCbGNpQnpjR1ZqYVdGc0lHTmhjMlZjYmlBZ2NtVjBkWEp1SUdFZ1BUMDlJR0lnZkh3Z1lTQTlQVDBnSkZCeWIyMXBjMlVnSmlZZ1lpQTlQVDBnVjNKaGNIQmxjanRjYm4wN1hHNTJZWElnYVhOVWFHVnVZV0pzWlNBOUlHWjFibU4wYVc5dUtHbDBLWHRjYmlBZ2RtRnlJSFJvWlc0N1hHNGdJSEpsZEhWeWJpQnBjMDlpYW1WamRDaHBkQ2tnSmlZZ2RIbHdaVzltSUNoMGFHVnVJRDBnYVhRdWRHaGxiaWtnUFQwZ0oyWjFibU4wYVc5dUp5QS9JSFJvWlc0Z09pQm1ZV3h6WlR0Y2JuMDdYRzUyWVhJZ2JtVjNVSEp2YldselpVTmhjR0ZpYVd4cGRIa2dQU0JtZFc1amRHbHZiaWhES1h0Y2JpQWdjbVYwZFhKdUlITmhiV1ZEYjI1emRISjFZM1J2Y2lna1VISnZiV2x6WlN3Z1F5bGNiaUFnSUNBL0lHNWxkeUJRY205dGFYTmxRMkZ3WVdKcGJHbDBlU2hES1Z4dUlDQWdJRG9nYm1WM0lFZGxibVZ5YVdOUWNtOXRhWE5sUTJGd1lXSnBiR2wwZVNoREtUdGNibjA3WEc1MllYSWdVSEp2YldselpVTmhjR0ZpYVd4cGRIa2dQU0JIWlc1bGNtbGpVSEp2YldselpVTmhjR0ZpYVd4cGRIa2dQU0JtZFc1amRHbHZiaWhES1h0Y2JpQWdkbUZ5SUhKbGMyOXNkbVVzSUhKbGFtVmpkRHRjYmlBZ2RHaHBjeTV3Y205dGFYTmxJRDBnYm1WM0lFTW9ablZ1WTNScGIyNG9KQ1J5WlhOdmJIWmxMQ0FrSkhKbGFtVmpkQ2w3WEc0Z0lDQWdhV1lvY21WemIyeDJaU0FoUFQwZ2RXNWtaV1pwYm1Wa0lIeDhJSEpsYW1WamRDQWhQVDBnZFc1a1pXWnBibVZrS1hSb2NtOTNJRlI1Y0dWRmNuSnZjaWduUW1Ga0lGQnliMjFwYzJVZ1kyOXVjM1J5ZFdOMGIzSW5LVHRjYmlBZ0lDQnlaWE52YkhabElEMGdKQ1J5WlhOdmJIWmxPMXh1SUNBZ0lISmxhbVZqZENBZ1BTQWtKSEpsYW1WamREdGNiaUFnZlNrN1hHNGdJSFJvYVhNdWNtVnpiMngyWlNBOUlHRkdkVzVqZEdsdmJpaHlaWE52YkhabEtUdGNiaUFnZEdocGN5NXlaV3BsWTNRZ0lEMGdZVVoxYm1OMGFXOXVLSEpsYW1WamRDazdYRzU5TzF4dWRtRnlJSEJsY21admNtMGdQU0JtZFc1amRHbHZiaWhsZUdWaktYdGNiaUFnZEhKNUlIdGNiaUFnSUNCbGVHVmpLQ2s3WEc0Z0lIMGdZMkYwWTJnb1pTbDdYRzRnSUNBZ2NtVjBkWEp1SUh0bGNuSnZjam9nWlgwN1hHNGdJSDFjYm4wN1hHNTJZWElnYm05MGFXWjVJRDBnWm5WdVkzUnBiMjRvY0hKdmJXbHpaU3dnYVhOU1pXcGxZM1FwZTF4dUlDQnBaaWh3Y205dGFYTmxMbDl1S1hKbGRIVnlianRjYmlBZ2NISnZiV2x6WlM1ZmJpQTlJSFJ5ZFdVN1hHNGdJSFpoY2lCamFHRnBiaUE5SUhCeWIyMXBjMlV1WDJNN1hHNGdJRzFwWTNKdmRHRnpheWhtZFc1amRHbHZiaWdwZTF4dUlDQWdJSFpoY2lCMllXeDFaU0E5SUhCeWIyMXBjMlV1WDNaY2JpQWdJQ0FnSUN3Z2Iyc2dJQ0FnUFNCd2NtOXRhWE5sTGw5eklEMDlJREZjYmlBZ0lDQWdJQ3dnYVNBZ0lDQWdQU0F3TzF4dUlDQWdJSFpoY2lCeWRXNGdQU0JtZFc1amRHbHZiaWh5WldGamRHbHZiaWw3WEc0Z0lDQWdJQ0IyWVhJZ2FHRnVaR3hsY2lBOUlHOXJJRDhnY21WaFkzUnBiMjR1YjJzZ09pQnlaV0ZqZEdsdmJpNW1ZV2xzWEc0Z0lDQWdJQ0FnSUN3Z2NtVnpiMngyWlNBOUlISmxZV04wYVc5dUxuSmxjMjlzZG1WY2JpQWdJQ0FnSUNBZ0xDQnlaV3BsWTNRZ0lEMGdjbVZoWTNScGIyNHVjbVZxWldOMFhHNGdJQ0FnSUNBZ0lDd2daRzl0WVdsdUlDQTlJSEpsWVdOMGFXOXVMbVJ2YldGcGJseHVJQ0FnSUNBZ0lDQXNJSEpsYzNWc2RDd2dkR2hsYmp0Y2JpQWdJQ0FnSUhSeWVTQjdYRzRnSUNBZ0lDQWdJR2xtS0doaGJtUnNaWElwZTF4dUlDQWdJQ0FnSUNBZ0lHbG1LQ0Z2YXlsN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JwWmlod2NtOXRhWE5sTGw5b0lEMDlJRElwYjI1SVlXNWtiR1ZWYm1oaGJtUnNaV1FvY0hKdmJXbHpaU2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQndjbTl0YVhObExsOW9JRDBnTVR0Y2JpQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJQ0FnYVdZb2FHRnVaR3hsY2lBOVBUMGdkSEoxWlNseVpYTjFiSFFnUFNCMllXeDFaVHRjYmlBZ0lDQWdJQ0FnSUNCbGJITmxJSHRjYmlBZ0lDQWdJQ0FnSUNBZ0lHbG1LR1J2YldGcGJpbGtiMjFoYVc0dVpXNTBaWElvS1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJSEpsYzNWc2RDQTlJR2hoYm1Sc1pYSW9kbUZzZFdVcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnYVdZb1pHOXRZV2x1S1dSdmJXRnBiaTVsZUdsMEtDazdYRzRnSUNBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnSUNBZ0lHbG1LSEpsYzNWc2RDQTlQVDBnY21WaFkzUnBiMjR1Y0hKdmJXbHpaU2w3WEc0Z0lDQWdJQ0FnSUNBZ0lDQnlaV3BsWTNRb1ZIbHdaVVZ5Y205eUtDZFFjbTl0YVhObExXTm9ZV2x1SUdONVkyeGxKeWtwTzF4dUlDQWdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppaDBhR1Z1SUQwZ2FYTlVhR1Z1WVdKc1pTaHlaWE4xYkhRcEtYdGNiaUFnSUNBZ0lDQWdJQ0FnSUhSb1pXNHVZMkZzYkNoeVpYTjFiSFFzSUhKbGMyOXNkbVVzSUhKbGFtVmpkQ2s3WEc0Z0lDQWdJQ0FnSUNBZ2ZTQmxiSE5sSUhKbGMyOXNkbVVvY21WemRXeDBLVHRjYmlBZ0lDQWdJQ0FnZlNCbGJITmxJSEpsYW1WamRDaDJZV3gxWlNrN1hHNGdJQ0FnSUNCOUlHTmhkR05vS0dVcGUxeHVJQ0FnSUNBZ0lDQnlaV3BsWTNRb1pTazdYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZUdGNiaUFnSUNCM2FHbHNaU2hqYUdGcGJpNXNaVzVuZEdnZ1BpQnBLWEoxYmloamFHRnBibHRwS3l0ZEtUc2dMeThnZG1GeWFXRmliR1VnYkdWdVozUm9JQzBnWTJGdUozUWdkWE5sSUdadmNrVmhZMmhjYmlBZ0lDQndjbTl0YVhObExsOWpJRDBnVzEwN1hHNGdJQ0FnY0hKdmJXbHpaUzVmYmlBOUlHWmhiSE5sTzF4dUlDQWdJR2xtS0dselVtVnFaV04wSUNZbUlDRndjbTl0YVhObExsOW9LVzl1Vlc1b1lXNWtiR1ZrS0hCeWIyMXBjMlVwTzF4dUlDQjlLVHRjYm4wN1hHNTJZWElnYjI1VmJtaGhibVJzWldRZ1BTQm1kVzVqZEdsdmJpaHdjbTl0YVhObEtYdGNiaUFnZEdGemF5NWpZV3hzS0dkc2IySmhiQ3dnWm5WdVkzUnBiMjRvS1h0Y2JpQWdJQ0IyWVhJZ2RtRnNkV1VnUFNCd2NtOXRhWE5sTGw5MlhHNGdJQ0FnSUNBc0lHRmljblZ3ZEN3Z2FHRnVaR3hsY2l3Z1kyOXVjMjlzWlR0Y2JpQWdJQ0JwWmlocGMxVnVhR0Z1Wkd4bFpDaHdjbTl0YVhObEtTbDdYRzRnSUNBZ0lDQmhZbkoxY0hRZ1BTQndaWEptYjNKdEtHWjFibU4wYVc5dUtDbDdYRzRnSUNBZ0lDQWdJR2xtS0dselRtOWtaU2w3WEc0Z0lDQWdJQ0FnSUNBZ2NISnZZMlZ6Y3k1bGJXbDBLQ2QxYm1oaGJtUnNaV1JTWldwbFkzUnBiMjRuTENCMllXeDFaU3dnY0hKdmJXbHpaU2s3WEc0Z0lDQWdJQ0FnSUgwZ1pXeHpaU0JwWmlob1lXNWtiR1Z5SUQwZ1oyeHZZbUZzTG05dWRXNW9ZVzVrYkdWa2NtVnFaV04wYVc5dUtYdGNiaUFnSUNBZ0lDQWdJQ0JvWVc1a2JHVnlLSHR3Y205dGFYTmxPaUJ3Y205dGFYTmxMQ0J5WldGemIyNDZJSFpoYkhWbGZTazdYRzRnSUNBZ0lDQWdJSDBnWld4elpTQnBaaWdvWTI5dWMyOXNaU0E5SUdkc2IySmhiQzVqYjI1emIyeGxLU0FtSmlCamIyNXpiMnhsTG1WeWNtOXlLWHRjYmlBZ0lDQWdJQ0FnSUNCamIyNXpiMnhsTG1WeWNtOXlLQ2RWYm1oaGJtUnNaV1FnY0hKdmJXbHpaU0J5WldwbFkzUnBiMjRuTENCMllXeDFaU2s3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgwcE8xeHVJQ0FnSUNBZ0x5OGdRbkp2ZDNObGNuTWdjMmh2ZFd4a0lHNXZkQ0IwY21sbloyVnlJR0J5WldwbFkzUnBiMjVJWVc1a2JHVmtZQ0JsZG1WdWRDQnBaaUJwZENCM1lYTWdhR0Z1Wkd4bFpDQm9aWEpsTENCT2IyUmxTbE1nTFNCemFHOTFiR1JjYmlBZ0lDQWdJSEJ5YjIxcGMyVXVYMmdnUFNCcGMwNXZaR1VnZkh3Z2FYTlZibWhoYm1Sc1pXUW9jSEp2YldselpTa2dQeUF5SURvZ01UdGNiaUFnSUNCOUlIQnliMjFwYzJVdVgyRWdQU0IxYm1SbFptbHVaV1E3WEc0Z0lDQWdhV1lvWVdKeWRYQjBLWFJvY205M0lHRmljblZ3ZEM1bGNuSnZjanRjYmlBZ2ZTazdYRzU5TzF4dWRtRnlJR2x6Vlc1b1lXNWtiR1ZrSUQwZ1puVnVZM1JwYjI0b2NISnZiV2x6WlNsN1hHNGdJR2xtS0hCeWIyMXBjMlV1WDJnZ1BUMGdNU2x5WlhSMWNtNGdabUZzYzJVN1hHNGdJSFpoY2lCamFHRnBiaUE5SUhCeWIyMXBjMlV1WDJFZ2ZId2djSEp2YldselpTNWZZMXh1SUNBZ0lDd2dhU0FnSUNBZ1BTQXdYRzRnSUNBZ0xDQnlaV0ZqZEdsdmJqdGNiaUFnZDJocGJHVW9ZMmhoYVc0dWJHVnVaM1JvSUQ0Z2FTbDdYRzRnSUNBZ2NtVmhZM1JwYjI0Z1BTQmphR0ZwYmx0cEt5dGRPMXh1SUNBZ0lHbG1LSEpsWVdOMGFXOXVMbVpoYVd3Z2ZId2dJV2x6Vlc1b1lXNWtiR1ZrS0hKbFlXTjBhVzl1TG5CeWIyMXBjMlVwS1hKbGRIVnliaUJtWVd4elpUdGNiaUFnZlNCeVpYUjFjbTRnZEhKMVpUdGNibjA3WEc1MllYSWdiMjVJWVc1a2JHVlZibWhoYm1Sc1pXUWdQU0JtZFc1amRHbHZiaWh3Y205dGFYTmxLWHRjYmlBZ2RHRnpheTVqWVd4c0tHZHNiMkpoYkN3Z1puVnVZM1JwYjI0b0tYdGNiaUFnSUNCMllYSWdhR0Z1Wkd4bGNqdGNiaUFnSUNCcFppaHBjMDV2WkdVcGUxeHVJQ0FnSUNBZ2NISnZZMlZ6Y3k1bGJXbDBLQ2R5WldwbFkzUnBiMjVJWVc1a2JHVmtKeXdnY0hKdmJXbHpaU2s3WEc0Z0lDQWdmU0JsYkhObElHbG1LR2hoYm1Sc1pYSWdQU0JuYkc5aVlXd3ViMjV5WldwbFkzUnBiMjVvWVc1a2JHVmtLWHRjYmlBZ0lDQWdJR2hoYm1Sc1pYSW9lM0J5YjIxcGMyVTZJSEJ5YjIxcGMyVXNJSEpsWVhOdmJqb2djSEp2YldselpTNWZkbjBwTzF4dUlDQWdJSDFjYmlBZ2ZTazdYRzU5TzF4dWRtRnlJQ1J5WldwbFkzUWdQU0JtZFc1amRHbHZiaWgyWVd4MVpTbDdYRzRnSUhaaGNpQndjbTl0YVhObElEMGdkR2hwY3p0Y2JpQWdhV1lvY0hKdmJXbHpaUzVmWkNseVpYUjFjbTQ3WEc0Z0lIQnliMjFwYzJVdVgyUWdQU0IwY25WbE8xeHVJQ0J3Y205dGFYTmxJRDBnY0hKdmJXbHpaUzVmZHlCOGZDQndjbTl0YVhObE95QXZMeUIxYm5keVlYQmNiaUFnY0hKdmJXbHpaUzVmZGlBOUlIWmhiSFZsTzF4dUlDQndjbTl0YVhObExsOXpJRDBnTWp0Y2JpQWdhV1lvSVhCeWIyMXBjMlV1WDJFcGNISnZiV2x6WlM1ZllTQTlJSEJ5YjIxcGMyVXVYMk11YzJ4cFkyVW9LVHRjYmlBZ2JtOTBhV1o1S0hCeWIyMXBjMlVzSUhSeWRXVXBPMXh1ZlR0Y2JuWmhjaUFrY21WemIyeDJaU0E5SUdaMWJtTjBhVzl1S0haaGJIVmxLWHRjYmlBZ2RtRnlJSEJ5YjIxcGMyVWdQU0IwYUdselhHNGdJQ0FnTENCMGFHVnVPMXh1SUNCcFppaHdjbTl0YVhObExsOWtLWEpsZEhWeWJqdGNiaUFnY0hKdmJXbHpaUzVmWkNBOUlIUnlkV1U3WEc0Z0lIQnliMjFwYzJVZ1BTQndjbTl0YVhObExsOTNJSHg4SUhCeWIyMXBjMlU3SUM4dklIVnVkM0poY0Z4dUlDQjBjbmtnZTF4dUlDQWdJR2xtS0hCeWIyMXBjMlVnUFQwOUlIWmhiSFZsS1hSb2NtOTNJRlI1Y0dWRmNuSnZjaWhjSWxCeWIyMXBjMlVnWTJGdUozUWdZbVVnY21WemIyeDJaV1FnYVhSelpXeG1YQ0lwTzF4dUlDQWdJR2xtS0hSb1pXNGdQU0JwYzFSb1pXNWhZbXhsS0haaGJIVmxLU2w3WEc0Z0lDQWdJQ0J0YVdOeWIzUmhjMnNvWm5WdVkzUnBiMjRvS1h0Y2JpQWdJQ0FnSUNBZ2RtRnlJSGR5WVhCd1pYSWdQU0I3WDNjNklIQnliMjFwYzJVc0lGOWtPaUJtWVd4elpYMDdJQzh2SUhkeVlYQmNiaUFnSUNBZ0lDQWdkSEo1SUh0Y2JpQWdJQ0FnSUNBZ0lDQjBhR1Z1TG1OaGJHd29kbUZzZFdVc0lHTjBlQ2drY21WemIyeDJaU3dnZDNKaGNIQmxjaXdnTVNrc0lHTjBlQ2drY21WcVpXTjBMQ0IzY21Gd2NHVnlMQ0F4S1NrN1hHNGdJQ0FnSUNBZ0lIMGdZMkYwWTJnb1pTbDdYRzRnSUNBZ0lDQWdJQ0FnSkhKbGFtVmpkQzVqWVd4c0tIZHlZWEJ3WlhJc0lHVXBPMXh1SUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0I5S1R0Y2JpQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdjSEp2YldselpTNWZkaUE5SUhaaGJIVmxPMXh1SUNBZ0lDQWdjSEp2YldselpTNWZjeUE5SURFN1hHNGdJQ0FnSUNCdWIzUnBabmtvY0hKdmJXbHpaU3dnWm1Gc2MyVXBPMXh1SUNBZ0lIMWNiaUFnZlNCallYUmphQ2hsS1h0Y2JpQWdJQ0FrY21WcVpXTjBMbU5oYkd3b2UxOTNPaUJ3Y205dGFYTmxMQ0JmWkRvZ1ptRnNjMlY5TENCbEtUc2dMeThnZDNKaGNGeHVJQ0I5WEc1OU8xeHVYRzR2THlCamIyNXpkSEoxWTNSdmNpQndiMng1Wm1sc2JGeHVhV1lvSVZWVFJWOU9RVlJKVmtVcGUxeHVJQ0F2THlBeU5TNDBMak11TVNCUWNtOXRhWE5sS0dWNFpXTjFkRzl5S1Z4dUlDQWtVSEp2YldselpTQTlJR1oxYm1OMGFXOXVJRkJ5YjIxcGMyVW9aWGhsWTNWMGIzSXBlMXh1SUNBZ0lHRnVTVzV6ZEdGdVkyVW9kR2hwY3l3Z0pGQnliMjFwYzJVc0lGQlNUMDFKVTBVc0lDZGZhQ2NwTzF4dUlDQWdJR0ZHZFc1amRHbHZiaWhsZUdWamRYUnZjaWs3WEc0Z0lDQWdTVzUwWlhKdVlXd3VZMkZzYkNoMGFHbHpLVHRjYmlBZ0lDQjBjbmtnZTF4dUlDQWdJQ0FnWlhobFkzVjBiM0lvWTNSNEtDUnlaWE52YkhabExDQjBhR2x6TENBeEtTd2dZM1I0S0NSeVpXcGxZM1FzSUhSb2FYTXNJREVwS1R0Y2JpQWdJQ0I5SUdOaGRHTm9LR1Z5Y2lsN1hHNGdJQ0FnSUNBa2NtVnFaV04wTG1OaGJHd29kR2hwY3l3Z1pYSnlLVHRjYmlBZ0lDQjlYRzRnSUgwN1hHNGdJRWx1ZEdWeWJtRnNJRDBnWm5WdVkzUnBiMjRnVUhKdmJXbHpaU2hsZUdWamRYUnZjaWw3WEc0Z0lDQWdkR2hwY3k1Zll5QTlJRnRkT3lBZ0lDQWdJQ0FnSUNBZ0lDQXZMeUE4TFNCaGQyRnBkR2x1WnlCeVpXRmpkR2x2Ym5OY2JpQWdJQ0IwYUdsekxsOWhJRDBnZFc1a1pXWnBibVZrT3lBZ0lDQWdJQzh2SUR3dElHTm9aV05yWldRZ2FXNGdhWE5WYm1oaGJtUnNaV1FnY21WaFkzUnBiMjV6WEc0Z0lDQWdkR2hwY3k1ZmN5QTlJREE3SUNBZ0lDQWdJQ0FnSUNBZ0lDQXZMeUE4TFNCemRHRjBaVnh1SUNBZ0lIUm9hWE11WDJRZ1BTQm1ZV3h6WlRzZ0lDQWdJQ0FnSUNBZ0x5OGdQQzBnWkc5dVpWeHVJQ0FnSUhSb2FYTXVYM1lnUFNCMWJtUmxabWx1WldRN0lDQWdJQ0FnTHk4Z1BDMGdkbUZzZFdWY2JpQWdJQ0IwYUdsekxsOW9JRDBnTURzZ0lDQWdJQ0FnSUNBZ0lDQWdJQzh2SUR3dElISmxhbVZqZEdsdmJpQnpkR0YwWlN3Z01DQXRJR1JsWm1GMWJIUXNJREVnTFNCb1lXNWtiR1ZrTENBeUlDMGdkVzVvWVc1a2JHVmtYRzRnSUNBZ2RHaHBjeTVmYmlBOUlHWmhiSE5sT3lBZ0lDQWdJQ0FnSUNBdkx5QThMU0J1YjNScFpubGNiaUFnZlR0Y2JpQWdTVzUwWlhKdVlXd3VjSEp2ZEc5MGVYQmxJRDBnY21WeGRXbHlaU2duTGk5ZmNtVmtaV1pwYm1VdFlXeHNKeWtvSkZCeWIyMXBjMlV1Y0hKdmRHOTBlWEJsTENCN1hHNGdJQ0FnTHk4Z01qVXVOQzQxTGpNZ1VISnZiV2x6WlM1d2NtOTBiM1I1Y0dVdWRHaGxiaWh2YmtaMWJHWnBiR3hsWkN3Z2IyNVNaV3BsWTNSbFpDbGNiaUFnSUNCMGFHVnVPaUJtZFc1amRHbHZiaUIwYUdWdUtHOXVSblZzWm1sc2JHVmtMQ0J2YmxKbGFtVmpkR1ZrS1h0Y2JpQWdJQ0FnSUhaaGNpQnlaV0ZqZEdsdmJpQWdJQ0E5SUc1bGQxQnliMjFwYzJWRFlYQmhZbWxzYVhSNUtITndaV05wWlhORGIyNXpkSEoxWTNSdmNpaDBhR2x6TENBa1VISnZiV2x6WlNrcE8xeHVJQ0FnSUNBZ2NtVmhZM1JwYjI0dWIyc2dJQ0FnSUQwZ2RIbHdaVzltSUc5dVJuVnNabWxzYkdWa0lEMDlJQ2RtZFc1amRHbHZiaWNnUHlCdmJrWjFiR1pwYkd4bFpDQTZJSFJ5ZFdVN1hHNGdJQ0FnSUNCeVpXRmpkR2x2Ymk1bVlXbHNJQ0FnUFNCMGVYQmxiMllnYjI1U1pXcGxZM1JsWkNBOVBTQW5ablZ1WTNScGIyNG5JQ1ltSUc5dVVtVnFaV04wWldRN1hHNGdJQ0FnSUNCeVpXRmpkR2x2Ymk1a2IyMWhhVzRnUFNCcGMwNXZaR1VnUHlCd2NtOWpaWE56TG1SdmJXRnBiaUE2SUhWdVpHVm1hVzVsWkR0Y2JpQWdJQ0FnSUhSb2FYTXVYMk11Y0hWemFDaHlaV0ZqZEdsdmJpazdYRzRnSUNBZ0lDQnBaaWgwYUdsekxsOWhLWFJvYVhNdVgyRXVjSFZ6YUNoeVpXRmpkR2x2YmlrN1hHNGdJQ0FnSUNCcFppaDBhR2x6TGw5ektXNXZkR2xtZVNoMGFHbHpMQ0JtWVd4elpTazdYRzRnSUNBZ0lDQnlaWFIxY200Z2NtVmhZM1JwYjI0dWNISnZiV2x6WlR0Y2JpQWdJQ0I5TEZ4dUlDQWdJQzh2SURJMUxqUXVOUzR4SUZCeWIyMXBjMlV1Y0hKdmRHOTBlWEJsTG1OaGRHTm9LRzl1VW1WcVpXTjBaV1FwWEc0Z0lDQWdKMk5oZEdOb0p6b2dablZ1WTNScGIyNG9iMjVTWldwbFkzUmxaQ2w3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdkR2hwY3k1MGFHVnVLSFZ1WkdWbWFXNWxaQ3dnYjI1U1pXcGxZM1JsWkNrN1hHNGdJQ0FnZlZ4dUlDQjlLVHRjYmlBZ1VISnZiV2x6WlVOaGNHRmlhV3hwZEhrZ1BTQm1kVzVqZEdsdmJpZ3BlMXh1SUNBZ0lIWmhjaUJ3Y205dGFYTmxJQ0E5SUc1bGR5QkpiblJsY201aGJEdGNiaUFnSUNCMGFHbHpMbkJ5YjIxcGMyVWdQU0J3Y205dGFYTmxPMXh1SUNBZ0lIUm9hWE11Y21WemIyeDJaU0E5SUdOMGVDZ2tjbVZ6YjJ4MlpTd2djSEp2YldselpTd2dNU2s3WEc0Z0lDQWdkR2hwY3k1eVpXcGxZM1FnSUQwZ1kzUjRLQ1J5WldwbFkzUXNJSEJ5YjIxcGMyVXNJREVwTzF4dUlDQjlPMXh1ZlZ4dVhHNGtaWGh3YjNKMEtDUmxlSEJ2Y25RdVJ5QXJJQ1JsZUhCdmNuUXVWeUFySUNSbGVIQnZjblF1UmlBcUlDRlZVMFZmVGtGVVNWWkZMQ0I3VUhKdmJXbHpaVG9nSkZCeWIyMXBjMlY5S1R0Y2JuSmxjWFZwY21Vb0p5NHZYM05sZEMxMGJ5MXpkSEpwYm1jdGRHRm5KeWtvSkZCeWIyMXBjMlVzSUZCU1QwMUpVMFVwTzF4dWNtVnhkV2x5WlNnbkxpOWZjMlYwTFhOd1pXTnBaWE1uS1NoUVVrOU5TVk5GS1R0Y2JsZHlZWEJ3WlhJZ1BTQnlaWEYxYVhKbEtDY3VMMTlqYjNKbEp5bGJVRkpQVFVsVFJWMDdYRzVjYmk4dklITjBZWFJwWTNOY2JpUmxlSEJ2Y25Rb0pHVjRjRzl5ZEM1VElDc2dKR1Y0Y0c5eWRDNUdJQ29nSVZWVFJWOU9RVlJKVmtVc0lGQlNUMDFKVTBVc0lIdGNiaUFnTHk4Z01qVXVOQzQwTGpVZ1VISnZiV2x6WlM1eVpXcGxZM1FvY2lsY2JpQWdjbVZxWldOME9pQm1kVzVqZEdsdmJpQnlaV3BsWTNRb2NpbDdYRzRnSUNBZ2RtRnlJR05oY0dGaWFXeHBkSGtnUFNCdVpYZFFjbTl0YVhObFEyRndZV0pwYkdsMGVTaDBhR2x6S1Z4dUlDQWdJQ0FnTENBa0pISmxhbVZqZENBZ0lEMGdZMkZ3WVdKcGJHbDBlUzV5WldwbFkzUTdYRzRnSUNBZ0pDUnlaV3BsWTNRb2NpazdYRzRnSUNBZ2NtVjBkWEp1SUdOaGNHRmlhV3hwZEhrdWNISnZiV2x6WlR0Y2JpQWdmVnh1ZlNrN1hHNGtaWGh3YjNKMEtDUmxlSEJ2Y25RdVV5QXJJQ1JsZUhCdmNuUXVSaUFxSUNoTVNVSlNRVkpaSUh4OElDRlZVMFZmVGtGVVNWWkZLU3dnVUZKUFRVbFRSU3dnZTF4dUlDQXZMeUF5TlM0MExqUXVOaUJRY205dGFYTmxMbkpsYzI5c2RtVW9lQ2xjYmlBZ2NtVnpiMngyWlRvZ1puVnVZM1JwYjI0Z2NtVnpiMngyWlNoNEtYdGNiaUFnSUNBdkx5QnBibk4wWVc1alpXOW1JR2x1YzNSbFlXUWdiMllnYVc1MFpYSnVZV3dnYzJ4dmRDQmphR1ZqYXlCaVpXTmhkWE5sSUhkbElITm9iM1ZzWkNCbWFYZ2dhWFFnZDJsMGFHOTFkQ0J5WlhCc1lXTmxiV1Z1ZENCdVlYUnBkbVVnVUhKdmJXbHpaU0JqYjNKbFhHNGdJQ0FnYVdZb2VDQnBibk4wWVc1alpXOW1JQ1JRY205dGFYTmxJQ1ltSUhOaGJXVkRiMjV6ZEhKMVkzUnZjaWg0TG1OdmJuTjBjblZqZEc5eUxDQjBhR2x6S1NseVpYUjFjbTRnZUR0Y2JpQWdJQ0IyWVhJZ1kyRndZV0pwYkdsMGVTQTlJRzVsZDFCeWIyMXBjMlZEWVhCaFltbHNhWFI1S0hSb2FYTXBYRzRnSUNBZ0lDQXNJQ1FrY21WemIyeDJaU0FnUFNCallYQmhZbWxzYVhSNUxuSmxjMjlzZG1VN1hHNGdJQ0FnSkNSeVpYTnZiSFpsS0hncE8xeHVJQ0FnSUhKbGRIVnliaUJqWVhCaFltbHNhWFI1TG5CeWIyMXBjMlU3WEc0Z0lIMWNibjBwTzF4dUpHVjRjRzl5ZENna1pYaHdiM0owTGxNZ0t5QWtaWGh3YjNKMExrWWdLaUFoS0ZWVFJWOU9RVlJKVmtVZ0ppWWdjbVZ4ZFdseVpTZ25MaTlmYVhSbGNpMWtaWFJsWTNRbktTaG1kVzVqZEdsdmJpaHBkR1Z5S1h0Y2JpQWdKRkJ5YjIxcGMyVXVZV3hzS0dsMFpYSXBXeWRqWVhSamFDZGRLR1Z0Y0hSNUtUdGNibjBwS1N3Z1VGSlBUVWxUUlN3Z2UxeHVJQ0F2THlBeU5TNDBMalF1TVNCUWNtOXRhWE5sTG1Gc2JDaHBkR1Z5WVdKc1pTbGNiaUFnWVd4c09pQm1kVzVqZEdsdmJpQmhiR3dvYVhSbGNtRmliR1VwZTF4dUlDQWdJSFpoY2lCRElDQWdJQ0FnSUNBZ0lEMGdkR2hwYzF4dUlDQWdJQ0FnTENCallYQmhZbWxzYVhSNUlEMGdibVYzVUhKdmJXbHpaVU5oY0dGaWFXeHBkSGtvUXlsY2JpQWdJQ0FnSUN3Z2NtVnpiMngyWlNBZ0lDQTlJR05oY0dGaWFXeHBkSGt1Y21WemIyeDJaVnh1SUNBZ0lDQWdMQ0J5WldwbFkzUWdJQ0FnSUQwZ1kyRndZV0pwYkdsMGVTNXlaV3BsWTNRN1hHNGdJQ0FnZG1GeUlHRmljblZ3ZENBOUlIQmxjbVp2Y20wb1puVnVZM1JwYjI0b0tYdGNiaUFnSUNBZ0lIWmhjaUIyWVd4MVpYTWdJQ0FnUFNCYlhWeHVJQ0FnSUNBZ0lDQXNJR2x1WkdWNElDQWdJQ0E5SURCY2JpQWdJQ0FnSUNBZ0xDQnlaVzFoYVc1cGJtY2dQU0F4TzF4dUlDQWdJQ0FnWm05eVQyWW9hWFJsY21GaWJHVXNJR1poYkhObExDQm1kVzVqZEdsdmJpaHdjbTl0YVhObEtYdGNiaUFnSUNBZ0lDQWdkbUZ5SUNScGJtUmxlQ0FnSUNBZ0lDQWdQU0JwYm1SbGVDc3JYRzRnSUNBZ0lDQWdJQ0FnTENCaGJISmxZV1I1UTJGc2JHVmtJRDBnWm1Gc2MyVTdYRzRnSUNBZ0lDQWdJSFpoYkhWbGN5NXdkWE5vS0hWdVpHVm1hVzVsWkNrN1hHNGdJQ0FnSUNBZ0lISmxiV0ZwYm1sdVp5c3JPMXh1SUNBZ0lDQWdJQ0JETG5KbGMyOXNkbVVvY0hKdmJXbHpaU2t1ZEdobGJpaG1kVzVqZEdsdmJpaDJZV3gxWlNsN1hHNGdJQ0FnSUNBZ0lDQWdhV1lvWVd4eVpXRmtlVU5oYkd4bFpDbHlaWFIxY200N1hHNGdJQ0FnSUNBZ0lDQWdZV3h5WldGa2VVTmhiR3hsWkNBZ1BTQjBjblZsTzF4dUlDQWdJQ0FnSUNBZ0lIWmhiSFZsYzFza2FXNWtaWGhkSUQwZ2RtRnNkV1U3WEc0Z0lDQWdJQ0FnSUNBZ0xTMXlaVzFoYVc1cGJtY2dmSHdnY21WemIyeDJaU2gyWVd4MVpYTXBPMXh1SUNBZ0lDQWdJQ0I5TENCeVpXcGxZM1FwTzF4dUlDQWdJQ0FnZlNrN1hHNGdJQ0FnSUNBdExYSmxiV0ZwYm1sdVp5QjhmQ0J5WlhOdmJIWmxLSFpoYkhWbGN5azdYRzRnSUNBZ2ZTazdYRzRnSUNBZ2FXWW9ZV0p5ZFhCMEtYSmxhbVZqZENoaFluSjFjSFF1WlhKeWIzSXBPMXh1SUNBZ0lISmxkSFZ5YmlCallYQmhZbWxzYVhSNUxuQnliMjFwYzJVN1hHNGdJSDBzWEc0Z0lDOHZJREkxTGpRdU5DNDBJRkJ5YjIxcGMyVXVjbUZqWlNocGRHVnlZV0pzWlNsY2JpQWdjbUZqWlRvZ1puVnVZM1JwYjI0Z2NtRmpaU2hwZEdWeVlXSnNaU2w3WEc0Z0lDQWdkbUZ5SUVNZ0lDQWdJQ0FnSUNBZ1BTQjBhR2x6WEc0Z0lDQWdJQ0FzSUdOaGNHRmlhV3hwZEhrZ1BTQnVaWGRRY205dGFYTmxRMkZ3WVdKcGJHbDBlU2hES1Z4dUlDQWdJQ0FnTENCeVpXcGxZM1FnSUNBZ0lEMGdZMkZ3WVdKcGJHbDBlUzV5WldwbFkzUTdYRzRnSUNBZ2RtRnlJR0ZpY25Wd2RDQTlJSEJsY21admNtMG9ablZ1WTNScGIyNG9LWHRjYmlBZ0lDQWdJR1p2Y2s5bUtHbDBaWEpoWW14bExDQm1ZV3h6WlN3Z1puVnVZM1JwYjI0b2NISnZiV2x6WlNsN1hHNGdJQ0FnSUNBZ0lFTXVjbVZ6YjJ4MlpTaHdjbTl0YVhObEtTNTBhR1Z1S0dOaGNHRmlhV3hwZEhrdWNtVnpiMngyWlN3Z2NtVnFaV04wS1R0Y2JpQWdJQ0FnSUgwcE8xeHVJQ0FnSUgwcE8xeHVJQ0FnSUdsbUtHRmljblZ3ZENseVpXcGxZM1FvWVdKeWRYQjBMbVZ5Y205eUtUdGNiaUFnSUNCeVpYUjFjbTRnWTJGd1lXSnBiR2wwZVM1d2NtOXRhWE5sTzF4dUlDQjlYRzU5S1R0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZaWE0yTG5CeWIyMXBjMlV1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURFd05GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBMElEVWlMQ0luZFhObElITjBjbWxqZENjN1hHNHZMeUJGUTAxQlUyTnlhWEIwSURZZ2MzbHRZbTlzY3lCemFHbHRYRzUyWVhJZ1oyeHZZbUZzSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOW5iRzlpWVd3bktWeHVJQ0FzSUdoaGN5QWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFHRnpKeWxjYmlBZ0xDQkVSVk5EVWtsUVZFOVNVeUFnSUNBOUlISmxjWFZwY21Vb0p5NHZYMlJsYzJOeWFYQjBiM0p6SnlsY2JpQWdMQ0FrWlhod2IzSjBJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJWNGNHOXlkQ2NwWEc0Z0lDd2djbVZrWldacGJtVWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl5WldSbFptbHVaU2NwWEc0Z0lDd2dUVVZVUVNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl0WlhSaEp5a3VTMFZaWEc0Z0lDd2dKR1poYVd4eklDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTltWVdsc2N5Y3BYRzRnSUN3Z2MyaGhjbVZrSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOXphR0Z5WldRbktWeHVJQ0FzSUhObGRGUnZVM1J5YVc1blZHRm5JRDBnY21WeGRXbHlaU2duTGk5ZmMyVjBMWFJ2TFhOMGNtbHVaeTEwWVdjbktWeHVJQ0FzSUhWcFpDQWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmRXbGtKeWxjYmlBZ0xDQjNhM01nSUNBZ0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYM2RyY3ljcFhHNGdJQ3dnZDJ0elJYaDBJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5M2EzTXRaWGgwSnlsY2JpQWdMQ0IzYTNORVpXWnBibVVnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDNkcmN5MWtaV1pwYm1VbktWeHVJQ0FzSUd0bGVVOW1JQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmEyVjViMlluS1Z4dUlDQXNJR1Z1ZFcxTFpYbHpJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWlc1MWJTMXJaWGx6SnlsY2JpQWdMQ0JwYzBGeWNtRjVJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJsekxXRnljbUY1SnlsY2JpQWdMQ0JoYms5aWFtVmpkQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJGdUxXOWlhbVZqZENjcFhHNGdJQ3dnZEc5SlQySnFaV04wSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5MGJ5MXBiMkpxWldOMEp5bGNiaUFnTENCMGIxQnlhVzFwZEdsMlpTQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgzUnZMWEJ5YVcxcGRHbDJaU2NwWEc0Z0lDd2dZM0psWVhSbFJHVnpZeUFnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl3Y205d1pYSjBlUzFrWlhOakp5bGNiaUFnTENCZlkzSmxZWFJsSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxamNtVmhkR1VuS1Z4dUlDQXNJR2RQVUU1RmVIUWdJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYjJKcVpXTjBMV2R2Y0c0dFpYaDBKeWxjYmlBZ0xDQWtSMDlRUkNBZ0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMW5iM0JrSnlsY2JpQWdMQ0FrUkZBZ0lDQWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFrY0NjcFhHNGdJQ3dnSkd0bGVYTWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5dlltcGxZM1F0YTJWNWN5Y3BYRzRnSUN3Z1owOVFSQ0FnSUNBZ0lDQWdJQ0FnUFNBa1IwOVFSQzVtWEc0Z0lDd2daRkFnSUNBZ0lDQWdJQ0FnSUNBZ1BTQWtSRkF1Wmx4dUlDQXNJR2RQVUU0Z0lDQWdJQ0FnSUNBZ0lEMGdaMDlRVGtWNGRDNW1YRzRnSUN3Z0pGTjViV0p2YkNBZ0lDQWdJQ0FnUFNCbmJHOWlZV3d1VTNsdFltOXNYRzRnSUN3Z0pFcFRUMDRnSUNBZ0lDQWdJQ0FnUFNCbmJHOWlZV3d1U2xOUFRseHVJQ0FzSUY5emRISnBibWRwWm5rZ0lDQWdJRDBnSkVwVFQwNGdKaVlnSkVwVFQwNHVjM1J5YVc1bmFXWjVYRzRnSUN3Z1VGSlBWRTlVV1ZCRklDQWdJQ0FnUFNBbmNISnZkRzkwZVhCbEoxeHVJQ0FzSUVoSlJFUkZUaUFnSUNBZ0lDQWdJRDBnZDJ0ektDZGZhR2xrWkdWdUp5bGNiaUFnTENCVVQxOVFVa2xOU1ZSSlZrVWdJQ0E5SUhkcmN5Z25kRzlRY21sdGFYUnBkbVVuS1Z4dUlDQXNJR2x6Ulc1MWJTQWdJQ0FnSUNBZ0lEMGdlMzB1Y0hKdmNHVnlkSGxKYzBWdWRXMWxjbUZpYkdWY2JpQWdMQ0JUZVcxaWIyeFNaV2RwYzNSeWVTQTlJSE5vWVhKbFpDZ25jM2x0WW05c0xYSmxaMmx6ZEhKNUp5bGNiaUFnTENCQmJHeFRlVzFpYjJ4eklDQWdJQ0E5SUhOb1lYSmxaQ2duYzNsdFltOXNjeWNwWEc0Z0lDd2dUMUJUZVcxaWIyeHpJQ0FnSUNBZ1BTQnphR0Z5WldRb0oyOXdMWE41YldKdmJITW5LVnh1SUNBc0lFOWlhbVZqZEZCeWIzUnZJQ0FnSUQwZ1QySnFaV04wVzFCU1QxUlBWRmxRUlYxY2JpQWdMQ0JWVTBWZlRrRlVTVlpGSUNBZ0lDQTlJSFI1Y0dWdlppQWtVM2x0WW05c0lEMDlJQ2RtZFc1amRHbHZiaWRjYmlBZ0xDQlJUMkpxWldOMElDQWdJQ0FnSUNBOUlHZHNiMkpoYkM1UlQySnFaV04wTzF4dUx5OGdSRzl1SjNRZ2RYTmxJSE5sZEhSbGNuTWdhVzRnVVhRZ1UyTnlhWEIwTENCb2RIUndjem92TDJkcGRHaDFZaTVqYjIwdmVteHZhWEp2WTJzdlkyOXlaUzFxY3k5cGMzTjFaWE12TVRjelhHNTJZWElnYzJWMGRHVnlJRDBnSVZGUFltcGxZM1FnZkh3Z0lWRlBZbXBsWTNSYlVGSlBWRTlVV1ZCRlhTQjhmQ0FoVVU5aWFtVmpkRnRRVWs5VVQxUlpVRVZkTG1acGJtUkRhR2xzWkR0Y2JseHVMeThnWm1Gc2JHSmhZMnNnWm05eUlHOXNaQ0JCYm1SeWIybGtMQ0JvZEhSd2N6b3ZMMk52WkdVdVoyOXZaMnhsTG1OdmJTOXdMM1k0TDJsemMzVmxjeTlrWlhSaGFXdy9hV1E5TmpnM1hHNTJZWElnYzJWMFUzbHRZbTlzUkdWell5QTlJRVJGVTBOU1NWQlVUMUpUSUNZbUlDUm1ZV2xzY3lobWRXNWpkR2x2YmlncGUxeHVJQ0J5WlhSMWNtNGdYMk55WldGMFpTaGtVQ2g3ZlN3Z0oyRW5MQ0I3WEc0Z0lDQWdaMlYwT2lCbWRXNWpkR2x2YmlncGV5QnlaWFIxY200Z1pGQW9kR2hwY3l3Z0oyRW5MQ0I3ZG1Gc2RXVTZJRGQ5S1M1aE95QjlYRzRnSUgwcEtTNWhJQ0U5SURjN1hHNTlLU0EvSUdaMWJtTjBhVzl1S0dsMExDQnJaWGtzSUVRcGUxeHVJQ0IyWVhJZ2NISnZkRzlFWlhOaklEMGdaMDlRUkNoUFltcGxZM1JRY205MGJ5d2dhMlY1S1R0Y2JpQWdhV1lvY0hKdmRHOUVaWE5qS1dSbGJHVjBaU0JQWW1wbFkzUlFjbTkwYjF0clpYbGRPMXh1SUNCa1VDaHBkQ3dnYTJWNUxDQkVLVHRjYmlBZ2FXWW9jSEp2ZEc5RVpYTmpJQ1ltSUdsMElDRTlQU0JQWW1wbFkzUlFjbTkwYnlsa1VDaFBZbXBsWTNSUWNtOTBieXdnYTJWNUxDQndjbTkwYjBSbGMyTXBPMXh1ZlNBNklHUlFPMXh1WEc1MllYSWdkM0poY0NBOUlHWjFibU4wYVc5dUtIUmhaeWw3WEc0Z0lIWmhjaUJ6ZVcwZ1BTQkJiR3hUZVcxaWIyeHpXM1JoWjEwZ1BTQmZZM0psWVhSbEtDUlRlVzFpYjJ4YlVGSlBWRTlVV1ZCRlhTazdYRzRnSUhONWJTNWZheUE5SUhSaFp6dGNiaUFnY21WMGRYSnVJSE41YlR0Y2JuMDdYRzVjYm5aaGNpQnBjMU41YldKdmJDQTlJRlZUUlY5T1FWUkpWa1VnSmlZZ2RIbHdaVzltSUNSVGVXMWliMnd1YVhSbGNtRjBiM0lnUFQwZ0ozTjViV0p2YkNjZ1B5Qm1kVzVqZEdsdmJpaHBkQ2w3WEc0Z0lISmxkSFZ5YmlCMGVYQmxiMllnYVhRZ1BUMGdKM041YldKdmJDYzdYRzU5SURvZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCeVpYUjFjbTRnYVhRZ2FXNXpkR0Z1WTJWdlppQWtVM2x0WW05c08xeHVmVHRjYmx4dWRtRnlJQ1JrWldacGJtVlFjbTl3WlhKMGVTQTlJR1oxYm1OMGFXOXVJR1JsWm1sdVpWQnliM0JsY25SNUtHbDBMQ0JyWlhrc0lFUXBlMXh1SUNCcFppaHBkQ0E5UFQwZ1QySnFaV04wVUhKdmRHOHBKR1JsWm1sdVpWQnliM0JsY25SNUtFOVFVM2x0WW05c2N5d2dhMlY1TENCRUtUdGNiaUFnWVc1UFltcGxZM1FvYVhRcE8xeHVJQ0JyWlhrZ1BTQjBiMUJ5YVcxcGRHbDJaU2hyWlhrc0lIUnlkV1VwTzF4dUlDQmhiazlpYW1WamRDaEVLVHRjYmlBZ2FXWW9hR0Z6S0VGc2JGTjViV0p2YkhNc0lHdGxlU2twZTF4dUlDQWdJR2xtS0NGRUxtVnVkVzFsY21GaWJHVXBlMXh1SUNBZ0lDQWdhV1lvSVdoaGN5aHBkQ3dnU0VsRVJFVk9LU2xrVUNocGRDd2dTRWxFUkVWT0xDQmpjbVZoZEdWRVpYTmpLREVzSUh0OUtTazdYRzRnSUNBZ0lDQnBkRnRJU1VSRVJVNWRXMnRsZVYwZ1BTQjBjblZsTzF4dUlDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQnBaaWhvWVhNb2FYUXNJRWhKUkVSRlRpa2dKaVlnYVhSYlNFbEVSRVZPWFZ0clpYbGRLV2wwVzBoSlJFUkZUbDFiYTJWNVhTQTlJR1poYkhObE8xeHVJQ0FnSUNBZ1JDQTlJRjlqY21WaGRHVW9SQ3dnZTJWdWRXMWxjbUZpYkdVNklHTnlaV0YwWlVSbGMyTW9NQ3dnWm1Gc2MyVXBmU2s3WEc0Z0lDQWdmU0J5WlhSMWNtNGdjMlYwVTNsdFltOXNSR1Z6WXlocGRDd2dhMlY1TENCRUtUdGNiaUFnZlNCeVpYUjFjbTRnWkZBb2FYUXNJR3RsZVN3Z1JDazdYRzU5TzF4dWRtRnlJQ1JrWldacGJtVlFjbTl3WlhKMGFXVnpJRDBnWm5WdVkzUnBiMjRnWkdWbWFXNWxVSEp2Y0dWeWRHbGxjeWhwZEN3Z1VDbDdYRzRnSUdGdVQySnFaV04wS0dsMEtUdGNiaUFnZG1GeUlHdGxlWE1nUFNCbGJuVnRTMlY1Y3loUUlEMGdkRzlKVDJKcVpXTjBLRkFwS1Z4dUlDQWdJQ3dnYVNBZ0lDQTlJREJjYmlBZ0lDQXNJR3dnUFNCclpYbHpMbXhsYm1kMGFGeHVJQ0FnSUN3Z2EyVjVPMXh1SUNCM2FHbHNaU2hzSUQ0Z2FTa2taR1ZtYVc1bFVISnZjR1Z5ZEhrb2FYUXNJR3RsZVNBOUlHdGxlWE5iYVNzclhTd2dVRnRyWlhsZEtUdGNiaUFnY21WMGRYSnVJR2wwTzF4dWZUdGNiblpoY2lBa1kzSmxZWFJsSUQwZ1puVnVZM1JwYjI0Z1kzSmxZWFJsS0dsMExDQlFLWHRjYmlBZ2NtVjBkWEp1SUZBZ1BUMDlJSFZ1WkdWbWFXNWxaQ0EvSUY5amNtVmhkR1VvYVhRcElEb2dKR1JsWm1sdVpWQnliM0JsY25ScFpYTW9YMk55WldGMFpTaHBkQ2tzSUZBcE8xeHVmVHRjYm5aaGNpQWtjSEp2Y0dWeWRIbEpjMFZ1ZFcxbGNtRmliR1VnUFNCbWRXNWpkR2x2YmlCd2NtOXdaWEowZVVselJXNTFiV1Z5WVdKc1pTaHJaWGtwZTF4dUlDQjJZWElnUlNBOUlHbHpSVzUxYlM1allXeHNLSFJvYVhNc0lHdGxlU0E5SUhSdlVISnBiV2wwYVhabEtHdGxlU3dnZEhKMVpTa3BPMXh1SUNCcFppaDBhR2x6SUQwOVBTQlBZbXBsWTNSUWNtOTBieUFtSmlCb1lYTW9RV3hzVTNsdFltOXNjeXdnYTJWNUtTQW1KaUFoYUdGektFOVFVM2x0WW05c2N5d2dhMlY1S1NseVpYUjFjbTRnWm1Gc2MyVTdYRzRnSUhKbGRIVnliaUJGSUh4OElDRm9ZWE1vZEdocGN5d2dhMlY1S1NCOGZDQWhhR0Z6S0VGc2JGTjViV0p2YkhNc0lHdGxlU2tnZkh3Z2FHRnpLSFJvYVhNc0lFaEpSRVJGVGlrZ0ppWWdkR2hwYzF0SVNVUkVSVTVkVzJ0bGVWMGdQeUJGSURvZ2RISjFaVHRjYm4wN1hHNTJZWElnSkdkbGRFOTNibEJ5YjNCbGNuUjVSR1Z6WTNKcGNIUnZjaUE5SUdaMWJtTjBhVzl1SUdkbGRFOTNibEJ5YjNCbGNuUjVSR1Z6WTNKcGNIUnZjaWhwZEN3Z2EyVjVLWHRjYmlBZ2FYUWdJRDBnZEc5SlQySnFaV04wS0dsMEtUdGNiaUFnYTJWNUlEMGdkRzlRY21sdGFYUnBkbVVvYTJWNUxDQjBjblZsS1R0Y2JpQWdhV1lvYVhRZ1BUMDlJRTlpYW1WamRGQnliM1J2SUNZbUlHaGhjeWhCYkd4VGVXMWliMnh6TENCclpYa3BJQ1ltSUNGb1lYTW9UMUJUZVcxaWIyeHpMQ0JyWlhrcEtYSmxkSFZ5Ymp0Y2JpQWdkbUZ5SUVRZ1BTQm5UMUJFS0dsMExDQnJaWGtwTzF4dUlDQnBaaWhFSUNZbUlHaGhjeWhCYkd4VGVXMWliMnh6TENCclpYa3BJQ1ltSUNFb2FHRnpLR2wwTENCSVNVUkVSVTRwSUNZbUlHbDBXMGhKUkVSRlRsMWJhMlY1WFNrcFJDNWxiblZ0WlhKaFlteGxJRDBnZEhKMVpUdGNiaUFnY21WMGRYSnVJRVE3WEc1OU8xeHVkbUZ5SUNSblpYUlBkMjVRY205d1pYSjBlVTVoYldWeklEMGdablZ1WTNScGIyNGdaMlYwVDNkdVVISnZjR1Z5ZEhsT1lXMWxjeWhwZENsN1hHNGdJSFpoY2lCdVlXMWxjeUFnUFNCblQxQk9LSFJ2U1U5aWFtVmpkQ2hwZENrcFhHNGdJQ0FnTENCeVpYTjFiSFFnUFNCYlhWeHVJQ0FnSUN3Z2FTQWdJQ0FnSUQwZ01GeHVJQ0FnSUN3Z2EyVjVPMXh1SUNCM2FHbHNaU2h1WVcxbGN5NXNaVzVuZEdnZ1BpQnBLWHRjYmlBZ0lDQnBaaWdoYUdGektFRnNiRk41YldKdmJITXNJR3RsZVNBOUlHNWhiV1Z6VzJrcksxMHBJQ1ltSUd0bGVTQWhQU0JJU1VSRVJVNGdKaVlnYTJWNUlDRTlJRTFGVkVFcGNtVnpkV3gwTG5CMWMyZ29hMlY1S1R0Y2JpQWdmU0J5WlhSMWNtNGdjbVZ6ZFd4ME8xeHVmVHRjYm5aaGNpQWtaMlYwVDNkdVVISnZjR1Z5ZEhsVGVXMWliMnh6SUQwZ1puVnVZM1JwYjI0Z1oyVjBUM2R1VUhKdmNHVnlkSGxUZVcxaWIyeHpLR2wwS1h0Y2JpQWdkbUZ5SUVsVFgwOVFJQ0E5SUdsMElEMDlQU0JQWW1wbFkzUlFjbTkwYjF4dUlDQWdJQ3dnYm1GdFpYTWdJRDBnWjA5UVRpaEpVMTlQVUNBL0lFOVFVM2x0WW05c2N5QTZJSFJ2U1U5aWFtVmpkQ2hwZENrcFhHNGdJQ0FnTENCeVpYTjFiSFFnUFNCYlhWeHVJQ0FnSUN3Z2FTQWdJQ0FnSUQwZ01GeHVJQ0FnSUN3Z2EyVjVPMXh1SUNCM2FHbHNaU2h1WVcxbGN5NXNaVzVuZEdnZ1BpQnBLWHRjYmlBZ0lDQnBaaWhvWVhNb1FXeHNVM2x0WW05c2N5d2dhMlY1SUQwZ2JtRnRaWE5iYVNzclhTa2dKaVlnS0VsVFgwOVFJRDhnYUdGektFOWlhbVZqZEZCeWIzUnZMQ0JyWlhrcElEb2dkSEoxWlNrcGNtVnpkV3gwTG5CMWMyZ29RV3hzVTNsdFltOXNjMXRyWlhsZEtUdGNiaUFnZlNCeVpYUjFjbTRnY21WemRXeDBPMXh1ZlR0Y2JseHVMeThnTVRrdU5DNHhMakVnVTNsdFltOXNLRnRrWlhOamNtbHdkR2x2YmwwcFhHNXBaaWdoVlZORlgwNUJWRWxXUlNsN1hHNGdJQ1JUZVcxaWIyd2dQU0JtZFc1amRHbHZiaUJUZVcxaWIyd29LWHRjYmlBZ0lDQnBaaWgwYUdseklHbHVjM1JoYm1ObGIyWWdKRk41YldKdmJDbDBhSEp2ZHlCVWVYQmxSWEp5YjNJb0oxTjViV0p2YkNCcGN5QnViM1FnWVNCamIyNXpkSEoxWTNSdmNpRW5LVHRjYmlBZ0lDQjJZWElnZEdGbklEMGdkV2xrS0dGeVozVnRaVzUwY3k1c1pXNW5kR2dnUGlBd0lEOGdZWEpuZFcxbGJuUnpXekJkSURvZ2RXNWtaV1pwYm1Wa0tUdGNiaUFnSUNCMllYSWdKSE5sZENBOUlHWjFibU4wYVc5dUtIWmhiSFZsS1h0Y2JpQWdJQ0FnSUdsbUtIUm9hWE1nUFQwOUlFOWlhbVZqZEZCeWIzUnZLU1J6WlhRdVkyRnNiQ2hQVUZONWJXSnZiSE1zSUhaaGJIVmxLVHRjYmlBZ0lDQWdJR2xtS0doaGN5aDBhR2x6TENCSVNVUkVSVTRwSUNZbUlHaGhjeWgwYUdselcwaEpSRVJGVGwwc0lIUmhaeWtwZEdocGMxdElTVVJFUlU1ZFczUmhaMTBnUFNCbVlXeHpaVHRjYmlBZ0lDQWdJSE5sZEZONWJXSnZiRVJsYzJNb2RHaHBjeXdnZEdGbkxDQmpjbVZoZEdWRVpYTmpLREVzSUhaaGJIVmxLU2s3WEc0Z0lDQWdmVHRjYmlBZ0lDQnBaaWhFUlZORFVrbFFWRTlTVXlBbUppQnpaWFIwWlhJcGMyVjBVM2x0WW05c1JHVnpZeWhQWW1wbFkzUlFjbTkwYnl3Z2RHRm5MQ0I3WTI5dVptbG5kWEpoWW14bE9pQjBjblZsTENCelpYUTZJQ1J6WlhSOUtUdGNiaUFnSUNCeVpYUjFjbTRnZDNKaGNDaDBZV2NwTzF4dUlDQjlPMXh1SUNCeVpXUmxabWx1WlNna1UzbHRZbTlzVzFCU1QxUlBWRmxRUlYwc0lDZDBiMU4wY21sdVp5Y3NJR1oxYm1OMGFXOXVJSFJ2VTNSeWFXNW5LQ2w3WEc0Z0lDQWdjbVYwZFhKdUlIUm9hWE11WDJzN1hHNGdJSDBwTzF4dVhHNGdJQ1JIVDFCRUxtWWdQU0FrWjJWMFQzZHVVSEp2Y0dWeWRIbEVaWE5qY21sd2RHOXlPMXh1SUNBa1JGQXVaaUFnSUQwZ0pHUmxabWx1WlZCeWIzQmxjblI1TzF4dUlDQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRaMjl3YmljcExtWWdQU0JuVDFCT1JYaDBMbVlnUFNBa1oyVjBUM2R1VUhKdmNHVnlkSGxPWVcxbGN6dGNiaUFnY21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFhCcFpTY3BMbVlnSUQwZ0pIQnliM0JsY25SNVNYTkZiblZ0WlhKaFlteGxPMXh1SUNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdFoyOXdjeWNwTG1ZZ1BTQWtaMlYwVDNkdVVISnZjR1Z5ZEhsVGVXMWliMnh6TzF4dVhHNGdJR2xtS0VSRlUwTlNTVkJVVDFKVElDWW1JQ0Z5WlhGMWFYSmxLQ2N1TDE5c2FXSnlZWEo1SnlrcGUxeHVJQ0FnSUhKbFpHVm1hVzVsS0U5aWFtVmpkRkJ5YjNSdkxDQW5jSEp2Y0dWeWRIbEpjMFZ1ZFcxbGNtRmliR1VuTENBa2NISnZjR1Z5ZEhsSmMwVnVkVzFsY21GaWJHVXNJSFJ5ZFdVcE8xeHVJQ0I5WEc1Y2JpQWdkMnR6UlhoMExtWWdQU0JtZFc1amRHbHZiaWh1WVcxbEtYdGNiaUFnSUNCeVpYUjFjbTRnZDNKaGNDaDNhM01vYm1GdFpTa3BPMXh1SUNCOVhHNTlYRzVjYmlSbGVIQnZjblFvSkdWNGNHOXlkQzVISUNzZ0pHVjRjRzl5ZEM1WElDc2dKR1Y0Y0c5eWRDNUdJQ29nSVZWVFJWOU9RVlJKVmtVc0lIdFRlVzFpYjJ3NklDUlRlVzFpYjJ4OUtUdGNibHh1Wm05eUtIWmhjaUJ6ZVcxaWIyeHpJRDBnS0Z4dUlDQXZMeUF4T1M0MExqSXVNaXdnTVRrdU5DNHlMak1zSURFNUxqUXVNaTQwTENBeE9TNDBMakl1Tml3Z01Ua3VOQzR5TGpnc0lERTVMalF1TWk0NUxDQXhPUzQwTGpJdU1UQXNJREU1TGpRdU1pNHhNU3dnTVRrdU5DNHlMakV5TENBeE9TNDBMakl1TVRNc0lERTVMalF1TWk0eE5GeHVJQ0FuYUdGelNXNXpkR0Z1WTJVc2FYTkRiMjVqWVhSVGNISmxZV1JoWW14bExHbDBaWEpoZEc5eUxHMWhkR05vTEhKbGNHeGhZMlVzYzJWaGNtTm9MSE53WldOcFpYTXNjM0JzYVhRc2RHOVFjbWx0YVhScGRtVXNkRzlUZEhKcGJtZFVZV2NzZFc1elkyOXdZV0pzWlhNblhHNHBMbk53YkdsMEtDY3NKeWtzSUdrZ1BTQXdPeUJ6ZVcxaWIyeHpMbXhsYm1kMGFDQStJR2s3SUNsM2EzTW9jM2x0WW05c2MxdHBLeXRkS1R0Y2JseHVabTl5S0haaGNpQnplVzFpYjJ4eklEMGdKR3RsZVhNb2QydHpMbk4wYjNKbEtTd2dhU0E5SURBN0lITjViV0p2YkhNdWJHVnVaM1JvSUQ0Z2FUc2dLWGRyYzBSbFptbHVaU2h6ZVcxaWIyeHpXMmtySzEwcE8xeHVYRzRrWlhod2IzSjBLQ1JsZUhCdmNuUXVVeUFySUNSbGVIQnZjblF1UmlBcUlDRlZVMFZmVGtGVVNWWkZMQ0FuVTNsdFltOXNKeXdnZTF4dUlDQXZMeUF4T1M0MExqSXVNU0JUZVcxaWIyd3VabTl5S0d0bGVTbGNiaUFnSjJadmNpYzZJR1oxYm1OMGFXOXVLR3RsZVNsN1hHNGdJQ0FnY21WMGRYSnVJR2hoY3loVGVXMWliMnhTWldkcGMzUnllU3dnYTJWNUlDczlJQ2NuS1Z4dUlDQWdJQ0FnUHlCVGVXMWliMnhTWldkcGMzUnllVnRyWlhsZFhHNGdJQ0FnSUNBNklGTjViV0p2YkZKbFoybHpkSEo1VzJ0bGVWMGdQU0FrVTNsdFltOXNLR3RsZVNrN1hHNGdJSDBzWEc0Z0lDOHZJREU1TGpRdU1pNDFJRk41YldKdmJDNXJaWGxHYjNJb2MzbHRLVnh1SUNCclpYbEdiM0k2SUdaMWJtTjBhVzl1SUd0bGVVWnZjaWhyWlhrcGUxeHVJQ0FnSUdsbUtHbHpVM2x0WW05c0tHdGxlU2twY21WMGRYSnVJR3RsZVU5bUtGTjViV0p2YkZKbFoybHpkSEo1TENCclpYa3BPMXh1SUNBZ0lIUm9jbTkzSUZSNWNHVkZjbkp2Y2loclpYa2dLeUFuSUdseklHNXZkQ0JoSUhONWJXSnZiQ0VuS1R0Y2JpQWdmU3hjYmlBZ2RYTmxVMlYwZEdWeU9pQm1kVzVqZEdsdmJpZ3BleUJ6WlhSMFpYSWdQU0IwY25WbE95QjlMRnh1SUNCMWMyVlRhVzF3YkdVNklHWjFibU4wYVc5dUtDbDdJSE5sZEhSbGNpQTlJR1poYkhObE95QjlYRzU5S1R0Y2JseHVKR1Y0Y0c5eWRDZ2taWGh3YjNKMExsTWdLeUFrWlhod2IzSjBMa1lnS2lBaFZWTkZYMDVCVkVsV1JTd2dKMDlpYW1WamRDY3NJSHRjYmlBZ0x5OGdNVGt1TVM0eUxqSWdUMkpxWldOMExtTnlaV0YwWlNoUElGc3NJRkJ5YjNCbGNuUnBaWE5kS1Z4dUlDQmpjbVZoZEdVNklDUmpjbVZoZEdVc1hHNGdJQzh2SURFNUxqRXVNaTQwSUU5aWFtVmpkQzVrWldacGJtVlFjbTl3WlhKMGVTaFBMQ0JRTENCQmRIUnlhV0oxZEdWektWeHVJQ0JrWldacGJtVlFjbTl3WlhKMGVUb2dKR1JsWm1sdVpWQnliM0JsY25SNUxGeHVJQ0F2THlBeE9TNHhMakl1TXlCUFltcGxZM1F1WkdWbWFXNWxVSEp2Y0dWeWRHbGxjeWhQTENCUWNtOXdaWEowYVdWektWeHVJQ0JrWldacGJtVlFjbTl3WlhKMGFXVnpPaUFrWkdWbWFXNWxVSEp2Y0dWeWRHbGxjeXhjYmlBZ0x5OGdNVGt1TVM0eUxqWWdUMkpxWldOMExtZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2loUExDQlFLVnh1SUNCblpYUlBkMjVRY205d1pYSjBlVVJsYzJOeWFYQjBiM0k2SUNSblpYUlBkMjVRY205d1pYSjBlVVJsYzJOeWFYQjBiM0lzWEc0Z0lDOHZJREU1TGpFdU1pNDNJRTlpYW1WamRDNW5aWFJQZDI1UWNtOXdaWEowZVU1aGJXVnpLRThwWEc0Z0lHZGxkRTkzYmxCeWIzQmxjblI1VG1GdFpYTTZJQ1JuWlhSUGQyNVFjbTl3WlhKMGVVNWhiV1Z6TEZ4dUlDQXZMeUF4T1M0eExqSXVPQ0JQWW1wbFkzUXVaMlYwVDNkdVVISnZjR1Z5ZEhsVGVXMWliMnh6S0U4cFhHNGdJR2RsZEU5M2JsQnliM0JsY25SNVUzbHRZbTlzY3pvZ0pHZGxkRTkzYmxCeWIzQmxjblI1VTNsdFltOXNjMXh1ZlNrN1hHNWNiaTh2SURJMExqTXVNaUJLVTA5T0xuTjBjbWx1WjJsbWVTaDJZV3gxWlNCYkxDQnlaWEJzWVdObGNpQmJMQ0J6Y0dGalpWMWRLVnh1SkVwVFQwNGdKaVlnSkdWNGNHOXlkQ2drWlhod2IzSjBMbE1nS3lBa1pYaHdiM0owTGtZZ0tpQW9JVlZUUlY5T1FWUkpWa1VnZkh3Z0pHWmhhV3h6S0daMWJtTjBhVzl1S0NsN1hHNGdJSFpoY2lCVElEMGdKRk41YldKdmJDZ3BPMXh1SUNBdkx5Qk5VeUJGWkdkbElHTnZiblpsY25SeklITjViV0p2YkNCMllXeDFaWE1nZEc4Z1NsTlBUaUJoY3lCN2ZWeHVJQ0F2THlCWFpXSkxhWFFnWTI5dWRtVnlkSE1nYzNsdFltOXNJSFpoYkhWbGN5QjBieUJLVTA5T0lHRnpJRzUxYkd4Y2JpQWdMeThnVmpnZ2RHaHliM2R6SUc5dUlHSnZlR1ZrSUhONWJXSnZiSE5jYmlBZ2NtVjBkWEp1SUY5emRISnBibWRwWm5rb1cxTmRLU0FoUFNBblcyNTFiR3hkSnlCOGZDQmZjM1J5YVc1bmFXWjVLSHRoT2lCVGZTa2dJVDBnSjN0OUp5QjhmQ0JmYzNSeWFXNW5hV1o1S0U5aWFtVmpkQ2hUS1NrZ0lUMGdKM3Q5Snp0Y2JuMHBLU3dnSjBwVFQwNG5MQ0I3WEc0Z0lITjBjbWx1WjJsbWVUb2dablZ1WTNScGIyNGdjM1J5YVc1bmFXWjVLR2wwS1h0Y2JpQWdJQ0JwWmlocGRDQTlQVDBnZFc1a1pXWnBibVZrSUh4OElHbHpVM2x0WW05c0tHbDBLU2x5WlhSMWNtNDdJQzh2SUVsRk9DQnlaWFIxY201eklITjBjbWx1WnlCdmJpQjFibVJsWm1sdVpXUmNiaUFnSUNCMllYSWdZWEpuY3lBOUlGdHBkRjFjYmlBZ0lDQWdJQ3dnYVNBZ0lDQTlJREZjYmlBZ0lDQWdJQ3dnY21Wd2JHRmpaWElzSUNSeVpYQnNZV05sY2p0Y2JpQWdJQ0IzYUdsc1pTaGhjbWQxYldWdWRITXViR1Z1WjNSb0lENGdhU2xoY21kekxuQjFjMmdvWVhKbmRXMWxiblJ6VzJrcksxMHBPMXh1SUNBZ0lISmxjR3hoWTJWeUlEMGdZWEpuYzFzeFhUdGNiaUFnSUNCcFppaDBlWEJsYjJZZ2NtVndiR0ZqWlhJZ1BUMGdKMloxYm1OMGFXOXVKeWtrY21Wd2JHRmpaWElnUFNCeVpYQnNZV05sY2p0Y2JpQWdJQ0JwWmlna2NtVndiR0ZqWlhJZ2ZId2dJV2x6UVhKeVlYa29jbVZ3YkdGalpYSXBLWEpsY0d4aFkyVnlJRDBnWm5WdVkzUnBiMjRvYTJWNUxDQjJZV3gxWlNsN1hHNGdJQ0FnSUNCcFppZ2tjbVZ3YkdGalpYSXBkbUZzZFdVZ1BTQWtjbVZ3YkdGalpYSXVZMkZzYkNoMGFHbHpMQ0JyWlhrc0lIWmhiSFZsS1R0Y2JpQWdJQ0FnSUdsbUtDRnBjMU41YldKdmJDaDJZV3gxWlNrcGNtVjBkWEp1SUhaaGJIVmxPMXh1SUNBZ0lIMDdYRzRnSUNBZ1lYSm5jMXN4WFNBOUlISmxjR3hoWTJWeU8xeHVJQ0FnSUhKbGRIVnliaUJmYzNSeWFXNW5hV1o1TG1Gd2NHeDVLQ1JLVTA5T0xDQmhjbWR6S1R0Y2JpQWdmVnh1ZlNrN1hHNWNiaTh2SURFNUxqUXVNeTQwSUZONWJXSnZiQzV3Y205MGIzUjVjR1ZiUUVCMGIxQnlhVzFwZEdsMlpWMG9hR2x1ZENsY2JpUlRlVzFpYjJ4YlVGSlBWRTlVV1ZCRlhWdFVUMTlRVWtsTlNWUkpWa1ZkSUh4OElISmxjWFZwY21Vb0p5NHZYMmhwWkdVbktTZ2tVM2x0WW05c1cxQlNUMVJQVkZsUVJWMHNJRlJQWDFCU1NVMUpWRWxXUlN3Z0pGTjViV0p2YkZ0UVVrOVVUMVJaVUVWZExuWmhiSFZsVDJZcE8xeHVMeThnTVRrdU5DNHpMalVnVTNsdFltOXNMbkJ5YjNSdmRIbHdaVnRBUUhSdlUzUnlhVzVuVkdGblhWeHVjMlYwVkc5VGRISnBibWRVWVdjb0pGTjViV0p2YkN3Z0oxTjViV0p2YkNjcE8xeHVMeThnTWpBdU1pNHhMamtnVFdGMGFGdEFRSFJ2VTNSeWFXNW5WR0ZuWFZ4dWMyVjBWRzlUZEhKcGJtZFVZV2NvVFdGMGFDd2dKMDFoZEdnbkxDQjBjblZsS1R0Y2JpOHZJREkwTGpNdU15QktVMDlPVzBCQWRHOVRkSEpwYm1kVVlXZGRYRzV6WlhSVWIxTjBjbWx1WjFSaFp5aG5iRzlpWVd3dVNsTlBUaXdnSjBwVFQwNG5MQ0IwY25WbEtUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WlhNMkxuTjViV0p2YkM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01UQTFYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSW5KbGNYVnBjbVVvSnk0dlgzZHJjeTFrWldacGJtVW5LU2duWVhONWJtTkpkR1Z5WVhSdmNpY3BPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5bGN6Y3VjM2x0WW05c0xtRnplVzVqTFdsMFpYSmhkRzl5TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeE1EWmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJaXdpY21WeGRXbHlaU2duTGk5ZmQydHpMV1JsWm1sdVpTY3BLQ2R2WW5ObGNuWmhZbXhsSnlrN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMlZ6Tnk1emVXMWliMnd1YjJKelpYSjJZV0pzWlM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01UQTNYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSWk4cUtseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQlFWQ0JKYm05MlljT253Nk52SUdVZ1UybHpkR1Z0WVhNZ1UwRmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdTVTVGVTBNdFNVUmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdVVlZQUWtsVElFNUZWRmRQVWt0VElGTk1YRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRVpTUVZWT1NFOUdSVkl0UjBWVFJVeE1VME5JUVVaVUlGcFZVaUJHVDBWU1JFVlNWVTVISUVSRlVpQkJUa2RGVjBGT1JGUkZUaUJHVDFKVFEwaFZUa2NnUlM1V1hHNHFJRU52Y0hseWFXZG9kQ0F5TURFMklFOVNRVTVIUlNCVFFWeHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQkVaWFYwYzJOb1pTQlVaV3hsYTI5dElFRkhYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRUZ3YVhwbFpWeHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQlVSVU5JVGtsVFEwaEZJRlZPU1ZaRlVsTkpWRUZVSUVKRlVreEpUbHh1S2x4dUtpQk1hV05sYm5ObFpDQjFibVJsY2lCMGFHVWdRWEJoWTJobElFeHBZMlZ1YzJVc0lGWmxjbk5wYjI0Z01pNHdJQ2gwYUdVZ1hDSk1hV05sYm5ObFhDSXBPMXh1S2lCNWIzVWdiV0Y1SUc1dmRDQjFjMlVnZEdocGN5Qm1hV3hsSUdWNFkyVndkQ0JwYmlCamIyMXdiR2xoYm1ObElIZHBkR2dnZEdobElFeHBZMlZ1YzJVdVhHNHFJRmx2ZFNCdFlYa2diMkowWVdsdUlHRWdZMjl3ZVNCdlppQjBhR1VnVEdsalpXNXpaU0JoZEZ4dUtseHVLaUFnSUdoMGRIQTZMeTkzZDNjdVlYQmhZMmhsTG05eVp5OXNhV05sYm5ObGN5OU1TVU5GVGxORkxUSXVNRnh1S2x4dUtpQlZibXhsYzNNZ2NtVnhkV2x5WldRZ1lua2dZWEJ3YkdsallXSnNaU0JzWVhjZ2IzSWdZV2R5WldWa0lIUnZJR2x1SUhkeWFYUnBibWNzSUhOdlpuUjNZWEpsWEc0cUlHUnBjM1J5YVdKMWRHVmtJSFZ1WkdWeUlIUm9aU0JNYVdObGJuTmxJR2x6SUdScGMzUnlhV0oxZEdWa0lHOXVJR0Z1SUZ3aVFWTWdTVk5jSWlCQ1FWTkpVeXhjYmlvZ1YwbFVTRTlWVkNCWFFWSlNRVTVVU1VWVElFOVNJRU5QVGtSSlZFbFBUbE1nVDBZZ1FVNVpJRXRKVGtRc0lHVnBkR2hsY2lCbGVIQnlaWE56SUc5eUlHbHRjR3hwWldRdVhHNHFJRk5sWlNCMGFHVWdUR2xqWlc1elpTQm1iM0lnZEdobElITndaV05wWm1saklHeGhibWQxWVdkbElHZHZkbVZ5Ym1sdVp5QndaWEp0YVhOemFXOXVjeUJoYm1SY2Jpb2diR2x0YVhSaGRHbHZibk1nZFc1a1pYSWdkR2hsSUV4cFkyVnVjMlV1WEc0cUtpOWNiaThxS2x4dUlDb2dVM1Z3Y0c5eWRDQnRiMlIxYkdVZ2QybDBhQ0J6YjIxbElHWjFibU4wYVc5dWN5QjNhV3hzSUdKbElIVnpaV1oxYkZ4dUlDb2dRRzF2WkhWc1pTQjFkR2xzYzF4dUlDb3ZYRzVjYmk4cUtseHVJQ29nUUhSNWNHVmtaV1lnWkdsMmFXUmxWVkpNWEc0Z0tpQkFkSGx3WlNCUFltcGxZM1JjYmlBcUlFQndjbTl3WlhKMGVTQjdjM1J5YVc1bmZTQjBlWEJsSUZSb1pTQjBlWEJsSUc5bUlGVlNURnh1SUNvZ1FIQnliM0JsY25SNUlIdHpkSEpwYm1kOUlHUnZiV0ZwYmlCVWFHVWdaRzl0WVdsdUlHOW1JRlZTVEZ4dUlDb2dRSEJ5YjNCbGNuUjVJSHR6ZEhKcGJtZDlJR2xrWlc1MGFYUjVJRlJvWlNCcFpHVnVkR2wwZVNCdlppQlZVa3hjYmlBcUwxeHVYRzR2S2lwY2JpQXFJRVJwZG1sa1pTQmhiaUIxY213Z2FXNGdkSGx3WlN3Z1pHOXRZV2x1SUdGdVpDQnBaR1Z1ZEdsMGVWeHVJQ29nUUhCaGNtRnRJQ0I3VlZKTUxsVlNUSDBnZFhKc0lDMGdkWEpzSUdGa1pISmxjM05jYmlBcUlFQnlaWFIxY200Z2UyUnBkbWxrWlZWU1RIMGdkR2hsSUhKbGMzVnNkQ0J2WmlCa2FYWnBaR1ZWVWt4Y2JpQXFMMXh1Wlhod2IzSjBJR1oxYm1OMGFXOXVJR1JwZG1sa1pWVlNUQ2gxY213cElIdGNibHh1SUNCcFppQW9JWFZ5YkNrZ2RHaHliM2NnUlhKeWIzSW9KMVZTVENCcGN5QnVaV1ZrWldRZ2RHOGdjM0JzYVhRbktUdGNibHh1WEhSbWRXNWpkR2x2YmlCeVpXTjFjbk5sS0haaGJIVmxLU0I3WEc1Y2RGeDBZMjl1YzNRZ2NtVm5aWGdnUFNBdktGdGhMWHBCTFZvdFhTb3BLRHBjWEM5Y1hDOG9QenBjWEM0cFAzdzZLU2hiTFdFdGVrRXRXakF0T1VBNkpTNWZYRndyZmlNOVhYc3lMREkxTm4wcEtGc3RZUzE2UVMxYU1DMDVRRG9sTGw5Y1hDdCtJejFjWEM5ZEtpa3ZaMms3WEc0Z0lDQWdZMjl1YzNRZ2MzVmljM1FnUFNBbkpERXNKRE1zSkRRbk8xeHVYSFFnSUd4bGRDQndZWEowY3lBOUlIWmhiSFZsTG5KbGNHeGhZMlVvY21WblpYZ3NJSE4xWW5OMEtTNXpjR3hwZENnbkxDY3BPMXh1WEhSY2RISmxkSFZ5YmlCd1lYSjBjenRjYmx4MGZWeHVYRzVjZEd4bGRDQndZWEowY3lBOUlISmxZM1Z5YzJVb2RYSnNLVHRjYmx4dUlDQXZMeUJKWmlCMGFHVWdkWEpzSUdoaGN5QnVieUJ6WTJobGJXVmNiaUFnYVdZZ0tIQmhjblJ6V3pCZElEMDlQU0IxY213Z0ppWWdJWEJoY25Seld6QmRMbWx1WTJ4MVpHVnpLQ2RBSnlrcElIdGNibHh1SUNBZ0lHeGxkQ0J5WlhOMWJIUWdQU0I3WEc0Z0lDQWdJQ0IwZVhCbE9pQmNJbHdpTEZ4dUlDQWdJQ0FnWkc5dFlXbHVPaUIxY213c1hHNGdJQ0FnSUNCcFpHVnVkR2wwZVRvZ1hDSmNJbHh1SUNBZ0lIMDdYRzVjYmlBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0NkYlJHbDJhV1JsVlZKTVhTQkVhWFpwWkdWVlVrd2daRzl1WEZ3bmRDQnpkWEJ3YjNKMElIVnliQ0IzYVhSb2IzVjBJSE5qYUdWdFpTNGdVR3hsWVhObElISmxkbWxsZHlCNWIzVnlJSFZ5YkNCaFpHUnlaWE56Snl3Z2RYSnNLVHRjYmx4dUlDQWdJSEpsZEhWeWJpQnlaWE4xYkhRN1hHNGdJSDFjYmx4dVhIUXZMeUJqYUdWamF5QnBaaUIwYUdVZ2RYSnNJR2hoY3lCMGFHVWdjMk5vWlcxbElHRnVaQ0JwYm1Oc2RXUmxjeUJoYmlCQVhHNWNkR2xtSUNod1lYSjBjMXN3WFNBOVBUMGdkWEpzSUNZbUlIQmhjblJ6V3pCZExtbHVZMngxWkdWektDZEFKeWtwSUh0Y2JseDBYSFJzWlhRZ2MyTm9aVzFsSUQwZ2NHRnlkSE5iTUYwZ1BUMDlJSFZ5YkNBL0lDZHpiWFJ3SnlBNklIQmhjblJ6V3pCZE8xeHVYSFJjZEhCaGNuUnpJRDBnY21WamRYSnpaU2h6WTJobGJXVWdLeUFuT2k4dkp5QXJJSEJoY25Seld6QmRLVHRjYmx4MGZWeHVYRzVjZEM4dklHbG1JSFJvWlNCa2IyMWhhVzRnYVc1amJIVmtaWE1nWVc0Z1FDd2daR2wyYVdSbElHbDBJSFJ2SUdSdmJXRnBiaUJoYm1RZ2FXUmxiblJwZEhrZ2NtVnpjR1ZqZEdsMlpXeDVYRzVjZEdsbUlDaHdZWEowYzFzeFhTNXBibU5zZFdSbGN5Z25RQ2NwS1NCN1hHNWNkRngwY0dGeWRITmJNbDBnUFNCd1lYSjBjMXN3WFNBcklDYzZMeThuSUNzZ2NHRnlkSE5iTVYwN1hHNWNkRngwY0dGeWRITmJNVjBnUFNCd1lYSjBjMXN4WFM1emRXSnpkSElvY0dGeWRITmJNVjB1YVc1a1pYaFBaaWduUUNjcElDc2dNU2xjYmlBZ0lDQjlJRngwTHlwbGJITmxJR2xtSUNod1lYSjBjMXN5WFM1cGJtTnNkV1JsY3lnbkx5Y3BLU0I3WEc0Z0lDQWdjR0Z5ZEhOYk1sMGdQU0J3WVhKMGMxc3lYUzV6ZFdKemRISW9jR0Z5ZEhOYk1sMHViR0Z6ZEVsdVpHVjRUMllvSnk4bktTc3hLVHRjYmlBZ2ZTb3ZYRzVjYmlBZ2JHVjBJSEpsYzNWc2RDQTlJSHRjYmlBZ0lDQjBlWEJsT2lCd1lYSjBjMXN3WFN4Y2JpQWdJQ0JrYjIxaGFXNDZJSEJoY25Seld6RmRMRnh1SUNBZ0lHbGtaVzUwYVhSNU9pQndZWEowYzFzeVhWeHVJQ0I5TzF4dVhHNGdJSEpsZEhWeWJpQnlaWE4xYkhRN1hHNTlYRzVjYm1WNGNHOXlkQ0JtZFc1amRHbHZiaUJrYVhacFpHVkZiV0ZwYkNobGJXRnBiQ2tnZTF4dUlDQnNaWFFnYVc1a1pYaFBaa0YwSUQwZ1pXMWhhV3d1YVc1a1pYaFBaaWduUUNjcE8xeHVYRzRnSUd4bGRDQnlaWE4xYkhRZ1BTQjdYRzRnSUNBZ2RYTmxjbTVoYldVNklHVnRZV2xzTG5OMVluTjBjbWx1Wnlnd0xDQnBibVJsZUU5bVFYUXBMRnh1SUNBZ0lHUnZiV0ZwYmpvZ1pXMWhhV3d1YzNWaWMzUnlhVzVuS0dsdVpHVjRUMlpCZENBcklERXNJR1Z0WVdsc0xteGxibWQwYUNsY2JpQWdmVHRjYmx4dUlDQnlaWFIxY200Z2NtVnpkV3gwTzF4dWZWeHVYRzR2S2lwY2JpQXFJRU5vWldOcklHbG1JR0Z1SUU5aWFtVmpkQ0JwY3lCbGJYQjBlVnh1SUNvZ1FIQmhjbUZ0SUNCN1QySnFaV04wZlNCdlltcGxZM1FnVDJKcVpXTjBJSFJ2SUdKbElHTm9aV05yWldSY2JpQXFJRUJ5WlhSMWNtNGdlMEp2YjJ4bFlXNTlJQ0FnSUNBZ0lITjBZWFIxY3lCdlppQlBZbXBsWTNRc0lHVnRjSFI1SUc5eUlHNXZkQ0FvZEhKMVpYeG1ZV3h6WlNrN1hHNGdLaTljYm1WNGNHOXlkQ0JtZFc1amRHbHZiaUJsYlhCMGVVOWlhbVZqZENodlltcGxZM1FwSUh0Y2JpQWdjbVYwZFhKdUlFOWlhbVZqZEM1clpYbHpLRzlpYW1WamRDa3ViR1Z1WjNSb0lENGdNQ0EvSUdaaGJITmxJRG9nZEhKMVpUdGNibjFjYmx4dUx5b3FYRzRnS2lCTllXdGxJR0VnUTA5UVdTQnZaaUIwYUdVZ2IzSnBaMmx1WVd3Z1pHRjBZVnh1SUNvZ1FIQmhjbUZ0SUNCN1QySnFaV04wZlNBZ2IySnFJQzBnYjJKcVpXTjBJSFJ2SUdKbElHTnNiMjVsWkZ4dUlDb2dRSEpsZEhWeWJpQjdUMkpxWldOMGZWeHVJQ292WEc1bGVIQnZjblFnWm5WdVkzUnBiMjRnWkdWbGNFTnNiMjVsS0c5aWFpa2dlMXh1SUNBdkwxUlBSRTg2SUhOcGJYQnNaU0JpZFhRZ2FXNWxabVpwWTJsbGJuUWdTbE5QVGlCa1pXVndJR05zYjI1bExpNHVYRzRnSUdsbUlDaHZZbW9wSUhKbGRIVnliaUJLVTA5T0xuQmhjbk5sS0VwVFQwNHVjM1J5YVc1bmFXWjVLRzlpYWlrcE8xeHVmVnh1WEc0dktpcGNiaUFxSUU5aWRHRnBibk1nZEdobElIVnpaWElnVlZKTUlIUm9ZWFFnWTI5eWNtVnpjRzl1WkhNZ2RHOGdZU0JuYVhabGJpQmxiV0ZwYkZ4dUlDb2dRSEJoY21GdElDQjdjM1J5YVc1bmZTQjFjMlZ5UlcxaGFXd2dWR2hsSUhWelpYSWdaVzFoYVd4Y2JpQXFJRUJ5WlhSMWNtNGdlMVZTVEM1VlVreDlJSFZ6WlhKVlVrd2dWR2hsSUhWelpYSWdWVkpNWEc0Z0tpOWNibVY0Y0c5eWRDQm1kVzVqZEdsdmJpQm5aWFJWYzJWeVZWSk1Sbkp2YlVWdFlXbHNLSFZ6WlhKRmJXRnBiQ2tnZTF4dUlDQnNaWFFnYVc1a1pYaFBaa0YwSUQwZ2RYTmxja1Z0WVdsc0xtbHVaR1Y0VDJZb0owQW5LVHRjYmlBZ2NtVjBkWEp1SUNkMWMyVnlPaTh2SnlBcklIVnpaWEpGYldGcGJDNXpkV0p6ZEhKcGJtY29hVzVrWlhoUFprRjBJQ3NnTVN3Z2RYTmxja1Z0WVdsc0xteGxibWQwYUNrZ0t5QW5MeWNnS3lCMWMyVnlSVzFoYVd3dWMzVmljM1J5YVc1bktEQXNJR2x1WkdWNFQyWkJkQ2s3WEc1OVhHNWNiaThxS2x4dUlDb2dUMkowWVdsdWN5QjBhR1VnZFhObGNpQmxiV0ZwYkNCMGFHRjBJR052Y25KbGMzQnZibVJ6SUhSdklHRWdaMmwyWlc0Z1ZWSk1YRzRnS2lCQWNHRnlZVzBnSUh0VlVrd3VWVkpNZlNCMWMyVnlWVkpNSUZSb1pTQjFjMlZ5SUZWU1RGeHVJQ29nUUhKbGRIVnliaUI3YzNSeWFXNW5mU0IxYzJWeVJXMWhhV3dnVkdobElIVnpaWElnWlcxaGFXeGNiaUFxTDF4dVpYaHdiM0owSUdaMWJtTjBhVzl1SUdkbGRGVnpaWEpGYldGcGJFWnliMjFWVWt3b2RYTmxjbFZTVENrZ2UxeHVJQ0JzWlhRZ2RYSnNJRDBnWkdsMmFXUmxWVkpNS0hWelpYSlZVa3dwTzF4dUlDQnlaWFIxY200Z2RYSnNMbWxrWlc1MGFYUjVMbkpsY0d4aFkyVW9KeThuTENBbkp5a2dLeUFuUUNjZ0t5QjFjbXd1Wkc5dFlXbHVPeUF2THlCcFpHVnVkR2wwZVNCbWFXVnNaQ0JvWVhNZ0p5OWxlR0Z0Y0d4bFNVUW5JR2x1YzNSbFlXUWdiMllnSjJWNFlXMXdiR1ZKUkNkY2JuMWNibHh1WEc0dktpcGNiaUFxSUVOb1pXTnJJR2xtSUhSb1pTQjFjMlZ5SUdsa1pXNTBhV1pwWlhJZ2FYTWdZV3h5WldGa2VTQnBiaUIwYUdVZ1ZWSk1JR1p2Y20xaGRDd2dhV1lnYm05MExDQmpiMjUyWlhKMElIUnZJRlZTVENCbWIzSnRZWFJjYmlBcUlFQndZWEpoYlNBZ2UzTjBjbWx1WjMwZ0lDQnBaR1Z1ZEdsbWFXVnlJQ0IxYzJWeUlHbGtaVzUwYVdacFpYSmNiaUFxSUVCeVpYUjFjbTRnZTNOMGNtbHVaMzBnSUNCMWMyVnlWVkpNSUNBZ0lIUm9aU0IxYzJWeUlGVlNURnh1SUNvdlhHNWxlSEJ2Y25RZ1puVnVZM1JwYjI0Z1kyOXVkbVZ5ZEZSdlZYTmxjbFZTVENocFpHVnVkR2xtYVdWeUtTQjdYRzVjYmlBZ0x5OGdZMmhsWTJzZ2FXWWdkR2hsSUdsa1pXNTBhV1pwWlhJZ2FYTWdZV3h5WldGa2VTQnBiaUIwYUdVZ2RYSnNJR1p2Y20xaGRGeHVJQ0JwWmlBb2FXUmxiblJwWm1sbGNpNXpkV0p6ZEhKcGJtY29NQ3dnTnlrZ1BUMDlJQ2QxYzJWeU9pOHZKeWtnZTF4dUlDQWdJR3hsZENCa2FYWnBaR1ZrVlZKTUlEMGdaR2wyYVdSbFZWSk1LR2xrWlc1MGFXWnBaWElwTzF4dVhHNGdJQ0FnTHk5amFHVmpheUJwWmlCMGFHVWdkWEpzSUdseklIZGxiR3dnWm05eWJXRjBaV1JjYmlBZ0lDQnBaaUFvWkdsMmFXUmxaRlZTVEM1a2IyMWhhVzRnSmlZZ1pHbDJhV1JsWkZWU1RDNXBaR1Z1ZEdsMGVTa2dlMXh1SUNBZ0lDQWdjbVYwZFhKdUlHbGtaVzUwYVdacFpYSTdYRzRnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUhSb2NtOTNJQ2QxYzJWeVZWSk1JSGRwZEdnZ2QzSnZibWNnWm05eWJXRjBKenRjYmlBZ0lDQjlYRzVjYmlBZ0x5OXBaaUJ1YjNRc0lHTnZiblpsY25RZ2RHaGxJSFZ6WlhJZ1pXMWhhV3dnZEc4Z1ZWSk1JR1p2Y20xaGRGeHVJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lISmxkSFZ5YmlCblpYUlZjMlZ5VlZKTVJuSnZiVVZ0WVdsc0tHbGtaVzUwYVdacFpYSXBPMXh1SUNCOVhHNTlYRzVjYmx4dVhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVpQXZMMXh1THk4Z0xpOXpjbU12ZFhScGJITXZkWFJwYkhNdWFuTWlMQ0l2S2lwY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1VGUWdTVzV2ZG1IRHA4T2pieUJsSUZOcGMzUmxiV0Z6SUZOQlhHNHFJRU52Y0hseWFXZG9kQ0F5TURFMklFbE9SVk5ETFVsRVhHNHFJRU52Y0hseWFXZG9kQ0F5TURFMklGRlZUMEpKVXlCT1JWUlhUMUpMVXlCVFRGeHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQkdVa0ZWVGtoUFJrVlNMVWRGVTBWTVRGTkRTRUZHVkNCYVZWSWdSazlGVWtSRlVsVk9SeUJFUlZJZ1FVNUhSVmRCVGtSVVJVNGdSazlTVTBOSVZVNUhJRVV1Vmx4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCUFVrRk9SMFVnVTBGY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1JHVjFkSE5qYUdVZ1ZHVnNaV3R2YlNCQlIxeHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQkJjR2w2WldWY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1ZFVkRTRTVKVTBOSVJTQlZUa2xXUlZKVFNWUkJWQ0JDUlZKTVNVNWNiaXBjYmlvZ1RHbGpaVzV6WldRZ2RXNWtaWElnZEdobElFRndZV05vWlNCTWFXTmxibk5sTENCV1pYSnphVzl1SURJdU1DQW9kR2hsSUZ3aVRHbGpaVzV6WlZ3aUtUdGNiaW9nZVc5MUlHMWhlU0J1YjNRZ2RYTmxJSFJvYVhNZ1ptbHNaU0JsZUdObGNIUWdhVzRnWTI5dGNHeHBZVzVqWlNCM2FYUm9JSFJvWlNCTWFXTmxibk5sTGx4dUtpQlpiM1VnYldGNUlHOWlkR0ZwYmlCaElHTnZjSGtnYjJZZ2RHaGxJRXhwWTJWdWMyVWdZWFJjYmlwY2Jpb2dJQ0JvZEhSd09pOHZkM2QzTG1Gd1lXTm9aUzV2Y21jdmJHbGpaVzV6WlhNdlRFbERSVTVUUlMweUxqQmNiaXBjYmlvZ1ZXNXNaWE56SUhKbGNYVnBjbVZrSUdKNUlHRndjR3hwWTJGaWJHVWdiR0YzSUc5eUlHRm5jbVZsWkNCMGJ5QnBiaUIzY21sMGFXNW5MQ0J6YjJaMGQyRnlaVnh1S2lCa2FYTjBjbWxpZFhSbFpDQjFibVJsY2lCMGFHVWdUR2xqWlc1elpTQnBjeUJrYVhOMGNtbGlkWFJsWkNCdmJpQmhiaUJjSWtGVElFbFRYQ0lnUWtGVFNWTXNYRzRxSUZkSlZFaFBWVlFnVjBGU1VrRk9WRWxGVXlCUFVpQkRUMDVFU1ZSSlQwNVRJRTlHSUVGT1dTQkxTVTVFTENCbGFYUm9aWElnWlhod2NtVnpjeUJ2Y2lCcGJYQnNhV1ZrTGx4dUtpQlRaV1VnZEdobElFeHBZMlZ1YzJVZ1ptOXlJSFJvWlNCemNHVmphV1pwWXlCc1lXNW5kV0ZuWlNCbmIzWmxjbTVwYm1jZ2NHVnliV2x6YzJsdmJuTWdZVzVrWEc0cUlHeHBiV2wwWVhScGIyNXpJSFZ1WkdWeUlIUm9aU0JNYVdObGJuTmxMbHh1S2lvdlhHNWNibWx0Y0c5eWRDQkVZWFJoVDJKcVpXTjBJR1p5YjIwZ0p5NHZSR0YwWVU5aWFtVmpkQ2M3WEc1cGJYQnZjblFnUkdGMFlVOWlhbVZqZEVOb2FXeGtJR1p5YjIwZ0p5NHZSR0YwWVU5aWFtVmpkRU5vYVd4a0p6dGNibHh1YkdWMElFWnBiSFJsY2xSNWNHVWdQU0I3UVU1Wk9pQW5ZVzU1Snl3Z1UxUkJVbFE2SUNkemRHRnlkQ2NzSUVWWVFVTlVPaUFuWlhoaFkzUW5mVHRjYmx4dUx5b3FYRzRnS2lCVWFHVWdZMnhoYzNNZ2NtVjBkWEp1WldRZ1puSnZiU0IwYUdVZ1UzbHVZMmhsY2lCemRXSnpZM0pwWW1VZ1kyRnNiQzVjYmlBcUlGUnZJR0psSUhWelpXUWdZWE1nWVc0Z2IySnpaWEoyWVhScGIyNGdjRzlwYm5RZ1puSnZiU0JoSUVSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2lCamFHRnVaMlV1WEc0Z0tpOWNibU5zWVhOeklFUmhkR0ZQWW1wbFkzUlBZbk5sY25abGNpQmxlSFJsYm1SeklFUmhkR0ZQWW1wbFkzUWdMeW9nYVcxd2JHVnRaVzUwY3lCVGVXNWpVM1JoZEhWeklDb3ZJSHRjYmlBZ0x5b2djSEpwZG1GMFpWeHVJQ0JmWTJoaGJtZGxUR2x6ZEdWdVpYSTZJRTF6WjB4cGMzUmxibVZ5WEc1Y2JpQWdMUzB0TFdWMlpXNTBJR2hoYm1Sc1pYSnpMUzB0TFZ4dUlDQmZabWxzZEdWeWN6b2dlenhtYVd4MFpYSStPaUI3ZEhsd1pUb2dQSE4wWVhKMExDQmxlR0ZqZEQ0c0lHTmhiR3hpWVdOck9pQThablZ1WTNScGIyNCtmU0I5WEc0Z0lDb3ZYRzVjYmlBZ0x5b3FYRzRnSUNBcUlFQnBaMjV2Y21WY2JpQWdJQ29nVTJodmRXeGtJRzV2ZENCaVpTQjFjMlZrSUdScGNtVmpkR3g1SUdKNUlFaDVjR1Z5ZEdsbGN5NGdTWFFuY3lCallXeHNaV1FnWW5rZ2RHaGxJRk41Ym1Ob1pYSXVjM1ZpYzJOeWFXSmxJRzFsZEdodlpGeHVJQ0FnS2k5Y2JpQWdZMjl1YzNSeWRXTjBiM0lvYzNsdVkyaGxjaXdnZFhKc0xDQnpZMmhsYldFc0lHbHVhWFJwWVd4VGRHRjBkWE1zSUdsdWFYUnBZV3hFWVhSaExDQmphR2xzWkhKbGJuTXNJR2x1YVhScFlXeFdaWEp6YVc5dUtTQjdYRzRnSUNBZ2MzVndaWElvYzNsdVkyaGxjaXdnZFhKc0xDQnpZMmhsYldFc0lHbHVhWFJwWVd4VGRHRjBkWE1zSUdsdWFYUnBZV3hFWVhSaExtUmhkR0VzSUdOb2FXeGtjbVZ1Y3lrN1hHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjYmx4dUlDQWdJRjkwYUdsekxsOTJaWEp6YVc5dUlEMGdhVzVwZEdsaGJGWmxjbk5wYjI0N1hHNGdJQ0FnWDNSb2FYTXVYMlpwYkhSbGNuTWdQU0I3ZlR0Y2JseHVJQ0FnSUY5MGFHbHpMbDl6ZVc1alQySnFMbTlpYzJWeWRtVW9LR1YyWlc1MEtTQTlQaUI3WEc0Z0lDQWdJQ0JmZEdocGN5NWZiMjVHYVd4MFpYSW9aWFpsYm5RcE8xeHVJQ0FnSUgwcE8xeHVYRzRnSUNBZ0x5OXpaWFIxY0NCamFHbHNaSEpsYm5NZ1pHRjBZU0JtY205dElITjFZbk5qY21sd2RHbHZibHh1SUNBZ0lFOWlhbVZqZEM1clpYbHpLR2x1YVhScFlXeEVZWFJoTG1Ob2FXeGtjbVZ1Y3lrdVptOXlSV0ZqYUNnb1kyaHBiR1JKWkNrZ1BUNGdlMXh1SUNBZ0lDQWdiR1YwSUdOb2FXeGtSR0YwWVNBOUlHbHVhWFJwWVd4RVlYUmhMbU5vYVd4a2NtVnVjMXRqYUdsc1pFbGtYVHRjYmlBZ0lDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJrOWlhbVZqZEhOYlkyaHBiR1JKWkYwZ1BTQnVaWGNnUkdGMFlVOWlhbVZqZEVOb2FXeGtLRjkwYUdsekxDQmphR2xzWkVsa0xDQmphR2xzWkVSaGRHRXBPMXh1SUNBZ0lIMHBPMXh1WEc0Z0lDQWdYM1JvYVhNdVgyRnNiRzlqWVhSbFRHbHpkR1Z1WlhKektDazdYRzRnSUgxY2JseHVJQ0JmWVd4c2IyTmhkR1ZNYVhOMFpXNWxjbk1vS1NCN1hHNGdJQ0FnYzNWd1pYSXVYMkZzYkc5allYUmxUR2x6ZEdWdVpYSnpLQ2s3WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNibHh1SUNBZ0lGOTBhR2x6TGw5amFHRnVaMlZNYVhOMFpXNWxjaUE5SUY5MGFHbHpMbDlpZFhNdVlXUmtUR2x6ZEdWdVpYSW9YM1JvYVhNdVgzVnliQ0FySUNjdlkyaGhibWRsY3ljc0lDaHRjMmNwSUQwK0lIdGNiaUFnSUNBZ0lHbG1JQ2h0YzJjdWRIbHdaU0E5UFQwZ0ozVndaR0YwWlNjcElIdGNiaUFnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjBSaGRHRlBZbXBsWTNSUFluTmxjblpsY2kwbklDc2dYM1JvYVhNdVgzVnliQ0FySUNjdFVrTldPaUFuTENCdGMyY3BPMXh1SUNBZ0lDQWdJQ0JmZEdocGN5NWZZMmhoYm1kbFQySnFaV04wS0Y5MGFHbHpMbDl6ZVc1alQySnFMQ0J0YzJjcE8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgwcE8xeHVJQ0I5WEc1Y2JpQWdYM0psYkdWaGMyVk1hWE4wWlc1bGNuTW9LU0I3WEc0Z0lDQWdjM1Z3WlhJdVgzSmxiR1ZoYzJWTWFYTjBaVzVsY25Nb0tUdGNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4dVhHNGdJQ0FnWDNSb2FYTXVYMk5vWVc1blpVeHBjM1JsYm1WeUxuSmxiVzkyWlNncE8xeHVJQ0I5WEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRkpsYkdWaGMyVWdZVzVrSUdSbGJHVjBaU0J2WW1wbFkzUWdaR0YwWVZ4dUlDQWdLaTljYmlBZ1pHVnNaWFJsS0NrZ2UxeHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEc1Y2JpQWdJQ0JmZEdocGN5NWZjbVZzWldGelpVeHBjM1JsYm1WeWN5Z3BPMXh1SUNBZ0lHUmxiR1YwWlNCZmRHaHBjeTVmYzNsdVkyaGxjaTVmYjJKelpYSjJaWEp6VzE5MGFHbHpMbDkxY214ZE8xeHVJQ0I5WEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRkpsYkdWaGMyVWdZVzVrSUdSbGJHVjBaU0J2WW1wbFkzUWdaR0YwWVZ4dUlDQWdLaTljYmlBZ2RXNXpkV0p6WTNKcFltVW9LU0I3WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNibHh1SUNBZ0lDOHZSa3hQVnkxUFZWUTZJSFJvYVhNZ2JXVnpjMkZuWlNCM2FXeHNJR0psSUhObGJuUWdkRzhnZEdobElISjFiblJwYldVZ2FXNXpkR0Z1WTJVZ2IyWWdVM2x1WTJobGNrMWhibUZuWlhJZ0xUNGdYMjl1VEc5allXeFZibE4xWW5OamNtbGlaVnh1SUNBZ0lHeGxkQ0IxYmxOMVluTmpjbWxpWlUxelp5QTlJSHRjYmlBZ0lDQWdJSFI1Y0dVNklDZDFibk4xWW5OamNtbGlaU2NzSUdaeWIyMDZJRjkwYUdsekxsOXZkMjVsY2l3Z2RHODZJRjkwYUdsekxsOXplVzVqYUdWeUxsOXpkV0pWVWt3c1hHNGdJQ0FnSUNCaWIyUjVPaUI3SUhKbGMyOTFjbU5sT2lCZmRHaHBjeTVmZFhKc0lIMWNiaUFnSUNCOU8xeHVYRzRnSUNBZ1gzUm9hWE11WDJKMWN5NXdiM04wVFdWemMyRm5aU2gxYmxOMVluTmpjbWxpWlUxelp5d2dLSEpsY0d4NUtTQTlQaUI3WEc0Z0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblJHRjBZVTlpYW1WamRFOWljMlZ5ZG1WeUxWVk9VMVZDVTBOU1NVSkZPaUFuTENCeVpYQnNlU2s3WEc0Z0lDQWdJQ0JwWmlBb2NtVndiSGt1WW05a2VTNWpiMlJsSUQwOVBTQXlNREFwSUh0Y2JpQWdJQ0FnSUNBZ1gzUm9hWE11WDNKbGJHVmhjMlZNYVhOMFpXNWxjbk1vS1R0Y2JpQWdJQ0FnSUNBZ1pHVnNaWFJsSUY5MGFHbHpMbDl6ZVc1amFHVnlMbDl2WW5ObGNuWmxjbk5iWDNSb2FYTXVYM1Z5YkYwN1hHNGdJQ0FnSUNCOVhHNGdJQ0FnZlNrN1hHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dVbVZuYVhOMFpYSWdkR2hsSUdOb1lXNW5aU0JzYVhOMFpXNWxjbk1nYzJWdWRDQmllU0IwYUdVZ2NtVndiM0owWlhKY2JpQWdJQ29nUUhCaGNtRnRJSHR6ZEhKcGJtZDlJR1pwYkhSbGNpQXRJRVpwYkhSbGNpQjBhR0YwSUdsa1pXNTBhV1pwWlhNZ2RHaGxJR1pwWld4a0lDaHpaWEJoY21GMFpXUWdaRzkwSUhCaGRHZ3BMaUJCWTJObGNIUnpJQ29nWVhRZ2RHaGxJR1Z1WkNCbWIzSWdZU0J0YjNKbElIVnVjbVZ6ZEhKcFkzUmxaQ0JtYVd4MFpYSnBibWN1WEc0Z0lDQXFJRUJ3WVhKaGJTQjdablZ1WTNScGIyNG9aWFpsYm5RNklFMXpaMFYyWlc1MEtYMGdZMkZzYkdKaFkydGNiaUFnSUNvdlhHNGdJRzl1UTJoaGJtZGxLR1pwYkhSbGNpd2dZMkZzYkdKaFkyc3BJSHRjYmlBZ0lDQnNaWFFnYTJWNUlEMGdabWxzZEdWeU8xeHVJQ0FnSUd4bGRDQm1hV3gwWlhKUFltb2dQU0I3WEc0Z0lDQWdJQ0IwZVhCbE9pQkdhV3gwWlhKVWVYQmxMa1ZZUVVOVUxGeHVJQ0FnSUNBZ1kyRnNiR0poWTJzNklHTmhiR3hpWVdOclhHNGdJQ0FnZlR0Y2JseHVJQ0FnSUd4bGRDQnBaSGdnUFNCbWFXeDBaWEl1YVc1a1pYaFBaaWduS2ljcE8xeHVJQ0FnSUdsbUlDaHBaSGdnUFQwOUlHWnBiSFJsY2k1c1pXNW5kR2dnTFNBeEtTQjdYRzRnSUNBZ0lDQnBaaUFvYVdSNElEMDlQU0F3S1NCN1hHNGdJQ0FnSUNBZ0lHWnBiSFJsY2s5aWFpNTBlWEJsSUQwZ1JtbHNkR1Z5Vkhsd1pTNUJUbGs3WEc0Z0lDQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdJQ0JtYVd4MFpYSlBZbW91ZEhsd1pTQTlJRVpwYkhSbGNsUjVjR1V1VTFSQlVsUTdYRzRnSUNBZ0lDQWdJR3RsZVNBOUlHWnBiSFJsY2k1emRXSnpkSElvTUN3Z1ptbHNkR1Z5TG14bGJtZDBhQ0F0SURFcE8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgxY2JseHVJQ0FnSUhSb2FYTXVYMlpwYkhSbGNuTmJhMlY1WFNBOUlHWnBiSFJsY2s5aWFqdGNiaUFnZlZ4dVhHNGdJRjl2YmtacGJIUmxjaWhsZG1WdWRDa2dlMXh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hHNWNiaUFnSUNCUFltcGxZM1F1YTJWNWN5aGZkR2hwY3k1ZlptbHNkR1Z5Y3lrdVptOXlSV0ZqYUNnb2EyVjVLU0E5UGlCN1hHNGdJQ0FnSUNCc1pYUWdabWxzZEdWeUlEMGdYM1JvYVhNdVgyWnBiSFJsY25OYmEyVjVYVHRjYmlBZ0lDQWdJR2xtSUNobWFXeDBaWEl1ZEhsd1pTQTlQVDBnUm1sc2RHVnlWSGx3WlM1QlRsa3BJSHRjYmlBZ0lDQWdJQ0FnTHk5dFlYUmphQ0JoYm5sMGFHbHVaMXh1SUNBZ0lDQWdJQ0JtYVd4MFpYSXVZMkZzYkdKaFkyc29aWFpsYm5RcE8xeHVJQ0FnSUNBZ2ZTQmxiSE5sSUdsbUlDaG1hV3gwWlhJdWRIbHdaU0E5UFQwZ1JtbHNkR1Z5Vkhsd1pTNVRWRUZTVkNrZ2UxeHVJQ0FnSUNBZ0lDQXZMMmxtSUhOMFlYSjBjeUIzYVhSb0lHWnBiSFJsY2k0dUxseHVJQ0FnSUNBZ0lDQnBaaUFvWlhabGJuUXVabWxsYkdRdWFXNWtaWGhQWmloclpYa3BJRDA5UFNBd0tTQjdYRzRnSUNBZ0lDQWdJQ0FnWm1sc2RHVnlMbU5oYkd4aVlXTnJLR1YyWlc1MEtUdGNiaUFnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdmU0JsYkhObElHbG1JQ2htYVd4MFpYSXVkSGx3WlNBOVBUMGdSbWxzZEdWeVZIbHdaUzVGV0VGRFZDa2dlMXh1SUNBZ0lDQWdJQ0F2TDJWNFlXTjBJRzFoZEdOb1hHNGdJQ0FnSUNBZ0lHbG1JQ2hsZG1WdWRDNW1hV1ZzWkNBOVBUMGdhMlY1S1NCN1hHNGdJQ0FnSUNBZ0lDQWdabWxzZEdWeUxtTmhiR3hpWVdOcktHVjJaVzUwS1R0Y2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgwcE8xeHVJQ0I5WEc1OVhHNWNibVY0Y0c5eWRDQmtaV1poZFd4MElFUmhkR0ZQWW1wbFkzUlBZbk5sY25abGNqdGNibHh1WEc1Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU0lDOHZYRzR2THlBdUwzTnlZeTl6ZVc1amFHVnlMMFJoZEdGUFltcGxZM1JQWW5ObGNuWmxjaTVxY3lJc0lpOHFLbHh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJRVkNCSmJtOTJZY09udzZOdklHVWdVMmx6ZEdWdFlYTWdVMEZjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnU1U1RlUwTXRTVVJjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVVZWUFFrbFRJRTVGVkZkUFVrdFRJRk5NWEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUVaU1FWVk9TRTlHUlZJdFIwVlRSVXhNVTBOSVFVWlVJRnBWVWlCR1QwVlNSRVZTVlU1SElFUkZVaUJCVGtkRlYwRk9SRlJGVGlCR1QxSlRRMGhWVGtjZ1JTNVdYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRTlTUVU1SFJTQlRRVnh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJFWlhWMGMyTm9aU0JVWld4bGEyOXRJRUZIWEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUVGd2FYcGxaVnh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJVUlVOSVRrbFRRMGhGSUZWT1NWWkZVbE5KVkVGVUlFSkZVa3hKVGx4dUtseHVLaUJNYVdObGJuTmxaQ0IxYm1SbGNpQjBhR1VnUVhCaFkyaGxJRXhwWTJWdWMyVXNJRlpsY25OcGIyNGdNaTR3SUNoMGFHVWdYQ0pNYVdObGJuTmxYQ0lwTzF4dUtpQjViM1VnYldGNUlHNXZkQ0IxYzJVZ2RHaHBjeUJtYVd4bElHVjRZMlZ3ZENCcGJpQmpiMjF3YkdsaGJtTmxJSGRwZEdnZ2RHaGxJRXhwWTJWdWMyVXVYRzRxSUZsdmRTQnRZWGtnYjJKMFlXbHVJR0VnWTI5d2VTQnZaaUIwYUdVZ1RHbGpaVzV6WlNCaGRGeHVLbHh1S2lBZ0lHaDBkSEE2THk5M2QzY3VZWEJoWTJobExtOXlaeTlzYVdObGJuTmxjeTlNU1VORlRsTkZMVEl1TUZ4dUtseHVLaUJWYm14bGMzTWdjbVZ4ZFdseVpXUWdZbmtnWVhCd2JHbGpZV0pzWlNCc1lYY2diM0lnWVdkeVpXVmtJSFJ2SUdsdUlIZHlhWFJwYm1jc0lITnZablIzWVhKbFhHNHFJR1JwYzNSeWFXSjFkR1ZrSUhWdVpHVnlJSFJvWlNCTWFXTmxibk5sSUdseklHUnBjM1J5YVdKMWRHVmtJRzl1SUdGdUlGd2lRVk1nU1ZOY0lpQkNRVk5KVXl4Y2Jpb2dWMGxVU0U5VlZDQlhRVkpTUVU1VVNVVlRJRTlTSUVOUFRrUkpWRWxQVGxNZ1QwWWdRVTVaSUV0SlRrUXNJR1ZwZEdobGNpQmxlSEJ5WlhOeklHOXlJR2x0Y0d4cFpXUXVYRzRxSUZObFpTQjBhR1VnVEdsalpXNXpaU0JtYjNJZ2RHaGxJSE53WldOcFptbGpJR3hoYm1kMVlXZGxJR2R2ZG1WeWJtbHVaeUJ3WlhKdGFYTnphVzl1Y3lCaGJtUmNiaW9nYkdsdGFYUmhkR2x2Ym5NZ2RXNWtaWElnZEdobElFeHBZMlZ1YzJVdVhHNHFLaTljYmx4dWFXMXdiM0owSUVSaGRHRlBZbXBsWTNRZ1puSnZiU0FuTGk5RVlYUmhUMkpxWldOMEp6dGNibWx0Y0c5eWRDQjdJR1JsWlhCRGJHOXVaU0I5SUdaeWIyMGdKeTR1TDNWMGFXeHpMM1YwYVd4ekxtcHpKenRjYmx4dUx5b3FYRzRnS2lCVWFHVWdZMnhoYzNNZ2NtVjBkWEp1WldRZ1puSnZiU0IwYUdVZ1UzbHVZMmhsY2lCamNtVmhkR1VnWTJGc2JDNWNiaUFxSUZSdklHSmxJSFZ6WldRZ1lYTWdZU0J5WlhCdmNuUmxjaUJ3YjJsdWRDd2dZMmhoYm1kbGN5QjNhV3hzSUdKbElITjFZbTFwZEdWa0lIUnZJRVJoZEdGUFltcGxZM1JQWW5ObGNuWmxjaUJwYm5OMFlXNWpaWE11WEc0Z0tpOWNibU5zWVhOeklFUmhkR0ZQWW1wbFkzUlNaWEJ2Y25SbGNpQmxlSFJsYm1SeklFUmhkR0ZQWW1wbFkzUWdMeW9nYVcxd2JHVnRaVzUwY3lCVGVXNWpVM1JoZEhWeklDb3ZJSHRjYmlBZ0x5b2djSEpwZG1GMFpWeHVJQ0JmYzNWaWMyTnlhWEIwYVc5dWN6b2dQR2g1Y0dWeWRIbFZjbXc2SUhzZ2MzUmhkSFZ6T2lCemRISnBibWNnZlNCOVBseHVYRzRnSUMwdExTMWxkbVZ1ZENCb1lXNWtiR1Z5Y3kwdExTMWNiaUFnWDI5dVUzVmljMk55YVhCMGFXOXVTR0Z1Wkd4bGNqb2dLR1YyWlc1MEtTQTlQaUIyYjJsa1hHNGdJRjl2YmxKbGMzQnZibk5sU0dGdVpHeGxjam9nS0dWMlpXNTBLU0E5UGlCMmIybGtYRzRnSUY5dmJsSmxZV1JJWVc1a2JHVnlPaUFvWlhabGJuUXBJRDArSUhadmFXUmNiaUFnS2k5Y2JseHVJQ0F2S2lwY2JpQWdJQ29nUUdsbmJtOXlaVnh1SUNBZ0tpQlRhRzkxYkdRZ2JtOTBJR0psSUhWelpXUWdaR2x5WldOMGJIa2dZbmtnU0hsd1pYSjBhV1Z6TGlCSmRDZHpJR05oYkd4bFpDQmllU0IwYUdVZ1UzbHVZMmhsY2k1amNtVmhkR1VnYldWMGFHOWtYRzRnSUNBcUwxeHVJQ0JqYjI1emRISjFZM1J2Y2loemVXNWphR1Z5TENCMWNtd3NJSE5qYUdWdFlTd2dhVzVwZEdsaGJGTjBZWFIxY3l3Z2FXNXBkR2xoYkVSaGRHRXNJR05vYVd4a2NtVnVjeWtnZTF4dUlDQWdJSE4xY0dWeUtITjVibU5vWlhJc0lIVnliQ3dnYzJOb1pXMWhMQ0JwYm1sMGFXRnNVM1JoZEhWekxDQnBibWwwYVdGc1JHRjBZU3dnWTJocGJHUnlaVzV6S1R0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1WEc0Z0lDQWdYM1JvYVhNdVgzTjFZbk5qY21sd2RHbHZibk1nUFNCN2ZUdGNibHh1SUNBZ0lGOTBhR2x6TGw5emVXNWpUMkpxTG05aWMyVnlkbVVvS0dWMlpXNTBLU0E5UGlCN1hHNGdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25SR0YwWVU5aWFtVmpkRkpsY0c5eWRHVnlMU2NnS3lCMWNtd2dLeUFuTFZORlRrUTZJQ2NzSUdWMlpXNTBLVHRjYmlBZ0lDQWdJRjkwYUdsekxsOXZia05vWVc1blpTaGxkbVZ1ZENrN1hHNGdJQ0FnZlNrN1hHNWNiaUFnSUNCZmRHaHBjeTVmWVd4c2IyTmhkR1ZNYVhOMFpXNWxjbk1vS1R0Y2JpQWdmVnh1WEc0Z0lGOWhiR3h2WTJGMFpVeHBjM1JsYm1WeWN5Z3BJSHRjYmlBZ0lDQnpkWEJsY2k1ZllXeHNiMk5oZEdWTWFYTjBaVzVsY25Nb0tUdGNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4dVhHNGdJQ0FnWDNSb2FYTXVYMjlpYW1WamRFeHBjM1JsYm1WeUlEMGdYM1JvYVhNdVgySjFjeTVoWkdSTWFYTjBaVzVsY2loZmRHaHBjeTVmZFhKc0xDQW9iWE5uS1NBOVBpQjdYRzRnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduUkdGMFlVOWlhbVZqZEMwbklDc2dYM1JvYVhNdVgzVnliQ0FySUNjdFVrTldPaUFuTENCdGMyY3BPMXh1SUNBZ0lDQWdjM2RwZEdOb0lDaHRjMmN1ZEhsd1pTa2dlMXh1SUNBZ0lDQWdJQ0JqWVhObElDZHlaWE53YjI1elpTYzZJRjkwYUdsekxsOXZibEpsYzNCdmJuTmxLRzF6WnlrN0lHSnlaV0ZyTzF4dUlDQWdJQ0FnSUNCallYTmxJQ2R5WldGa0p6b2dYM1JvYVhNdVgyOXVVbVZoWkNodGMyY3BPeUJpY21WaGF6dGNiaUFnSUNBZ0lIMWNiaUFnSUNCOUtUdGNiaUFnZlZ4dVhHNGdJRjl5Wld4bFlYTmxUR2x6ZEdWdVpYSnpLQ2tnZTF4dUlDQWdJSE4xY0dWeUxsOXlaV3hsWVhObFRHbHpkR1Z1WlhKektDazdYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2JseHVJQ0FnSUY5MGFHbHpMbDl2WW1wbFkzUk1hWE4wWlc1bGNpNXlaVzF2ZG1Vb0tUdGNiaUFnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJUWlc1a0lHbHVkbWwwWVhScGIyNXpJQ2hqY21WaGRHVWdiV1Z6YzJGblpYTXBJSFJ2SUdoNWNHVnlkR2xsY3l3Z2IySnpaWEoyWlhKeklHeHBjM1F1WEc0Z0lDQXFJRUJ3WVhKaGJTQWdlMGg1Y0dWeWRIbFZVa3hiWFgwZ2IySnpaWEoyWlhKeklFeHBjM1FnYjJZZ1NIbHdaWEowZVNCVlVrd25jMXh1SUNBZ0tpOWNiaUFnYVc1MmFYUmxUMkp6WlhKMlpYSnpLRzlpYzJWeWRtVnljeWtnZTF4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYRzVjYmlBZ0lDQXZMMFpNVDFjdFQxVlVPaUIwYUdseklHMWxjM05oWjJVZ2QybHNiQ0JpWlNCelpXNTBJSFJ2SUhSb1pTQnlkVzUwYVcxbElHbHVjM1JoYm1ObElHOW1JRk41Ym1Ob1pYSk5ZVzVoWjJWeUlDMCtJRjl2YmtOeVpXRjBaVnh1SUNBZ0lHeGxkQ0JwYm5acGRHVk5jMmNnUFNCN1hHNGdJQ0FnSUNCMGVYQmxPaUFuWTNKbFlYUmxKeXdnWm5KdmJUb2dYM1JvYVhNdVgzTjVibU5vWlhJdVgyOTNibVZ5TENCMGJ6b2dYM1JvYVhNdVgzTjVibU5vWlhJdVgzTjFZbFZTVEN4Y2JpQWdJQ0FnSUdKdlpIazZJSHNnY21WemRXMWxPaUJtWVd4elpTd2djbVZ6YjNWeVkyVTZJRjkwYUdsekxsOTFjbXdzSUhOamFHVnRZVG9nWDNSb2FYTXVYM05qYUdWdFlTd2dkbUZzZFdVNklGOTBhR2x6TGw5emVXNWpUMkpxTG1SaGRHRXNJR0YxZEdodmNtbHpaVG9nYjJKelpYSjJaWEp6SUgxY2JpQWdJQ0I5TzF4dVhHNGdJQ0FnWDNSb2FYTXVYMkoxY3k1d2IzTjBUV1Z6YzJGblpTaHBiblpwZEdWTmMyY3BPMXh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZKbGJHVmhjMlVnWVc1a0lHUmxiR1YwWlNCdlltcGxZM1FnWkdGMFlWeHVJQ0FnS2k5Y2JpQWdaR1ZzWlhSbEtDa2dlMXh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hHNWNiaUFnSUNBdkwwWk1UMWN0VDFWVU9pQjBhR2x6SUcxbGMzTmhaMlVnZDJsc2JDQmlaU0J6Wlc1MElIUnZJSFJvWlNCeWRXNTBhVzFsSUdsdWMzUmhibU5sSUc5bUlGTjVibU5vWlhKTllXNWhaMlZ5SUMwK0lGOXZia1JsYkdWMFpWeHVJQ0FnSUd4bGRDQmtaV3hsZEdWTmMyY2dQU0I3WEc0Z0lDQWdJQ0IwZVhCbE9pQW5aR1ZzWlhSbEp5d2dabkp2YlRvZ1gzUm9hWE11WDI5M2JtVnlMQ0IwYnpvZ1gzUm9hWE11WDNONWJtTm9aWEl1WDNOMVlsVlNUQ3hjYmlBZ0lDQWdJR0p2WkhrNklIc2djbVZ6YjNWeVkyVTZJRjkwYUdsekxsOTFjbXdnZlZ4dUlDQWdJSDA3WEc1Y2JpQWdJQ0JmZEdocGN5NWZZblZ6TG5CdmMzUk5aWE56WVdkbEtHUmxiR1YwWlUxelp5d2dLSEpsY0d4NUtTQTlQaUI3WEc0Z0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblJHRjBZVTlpYW1WamRGSmxjRzl5ZEdWeUxVUkZURVZVUlRvZ0p5d2djbVZ3YkhrcE8xeHVJQ0FnSUNBZ2FXWWdLSEpsY0d4NUxtSnZaSGt1WTI5a1pTQTlQVDBnTWpBd0tTQjdYRzRnSUNBZ0lDQWdJRjkwYUdsekxsOXlaV3hsWVhObFRHbHpkR1Z1WlhKektDazdYRzRnSUNBZ0lDQWdJR1JsYkdWMFpTQmZkR2hwY3k1ZmMzbHVZMmhsY2k1ZmNtVndiM0owWlhKelcxOTBhR2x6TGw5MWNteGRPMXh1SUNBZ0lDQWdmVnh1SUNBZ0lIMHBPMXh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZOMVluTmpjbWx3ZEdsdmJuTWdjbVZ4ZFdWemRHVmtJR0Z1WkNCaFkyTmxjSFJsWkNCMGJ5QjBhR2x6SUhKbGNHOXlkR1Z5WEc0Z0lDQXFJRUIwZVhCbElIdFBZbXBsWTNROFNIbHdaWEowZVZWU1RDd2dVM2x1WTFOMVluTmpjbWx3ZEdsdmJqNTlYRzRnSUNBcUwxeHVJQ0JuWlhRZ2MzVmljMk55YVhCMGFXOXVjeWdwSUhzZ2NtVjBkWEp1SUhSb2FYTXVYM04xWW5OamNtbHdkR2x2Ym5NN0lIMWNibHh1SUNBdktpcGNiaUFnSUNvZ1UyVjBkWEFnZEdobElHTmhiR3hpWVdOcklIUnZJSEJ5YjJObGMzTWdjM1ZpYzJOeWFXSmxJR0Z1WkNCMWJuTjFZbk5qY21saVpTQnViM1JwWm1sallYUnBiMjV6WEc0Z0lDQXFJRUJ3WVhKaGJTQjdablZ1WTNScGIyNG9aWFpsYm5RNklFMXpaMFYyWlc1MEtYMGdZMkZzYkdKaFkyc2dablZ1WTNScGIyNGdkRzhnY21WalpXbDJaU0JsZG1WdWRITmNiaUFnSUNvdlhHNGdJRzl1VTNWaWMyTnlhWEIwYVc5dUtHTmhiR3hpWVdOcktTQjdYRzRnSUNBZ2RHaHBjeTVmYjI1VGRXSnpZM0pwY0hScGIyNUlZVzVrYkdWeUlEMGdZMkZzYkdKaFkyczdYRzRnSUgxY2JseHVJQ0F2S2lwY2JpQWdJQ29nVTJWMGRYQWdkR2hsSUdOaGJHeGlZV05ySUhSdklIQnliMk5sYzNNZ2NtVnpjRzl1YzJVZ2JtOTBhV1pwWTJGMGFXOXVjeUJ2WmlCMGFHVWdZM0psWVhSbEozTmNiaUFnSUNvZ1FIQmhjbUZ0SUh0bWRXNWpkR2x2YmlobGRtVnVkRG9nVFhOblJYWmxiblFwZlNCallXeHNZbUZqYXlCbWRXNWpkR2x2YmlCMGJ5QnlaV05sYVhabElHVjJaVzUwYzF4dUlDQWdLaTljYmlBZ2IyNVNaWE53YjI1elpTaGpZV3hzWW1GamF5a2dlMXh1SUNBZ0lIUm9hWE11WDI5dVVtVnpjRzl1YzJWSVlXNWtiR1Z5SUQwZ1kyRnNiR0poWTJzN1hHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dVMlYwZFhBZ2RHaGxJR05oYkd4aVlXTnJJSFJ2SUhCeWIyTmxjM01nY21WaFpDQnViM1JwWm1sallYUnBiMjV6WEc0Z0lDQXFJRUJ3WVhKaGJTQjdablZ1WTNScGIyNG9aWFpsYm5RNklFMXpaMFYyWlc1MEtYMGdZMkZzYkdKaFkydGNiaUFnSUNvdlhHNGdJRzl1VW1WaFpDaGpZV3hzWW1GamF5a2dlMXh1SUNBZ0lIUm9hWE11WDI5dVVtVmhaRWhoYm1Sc1pYSWdQU0JqWVd4c1ltRmphenRjYmlBZ2ZWeHVYRzRnSUM4dlJreFBWeTFKVGpvZ2JXVnpjMkZuWlNCeVpXTmxhWFpsWkNCbWNtOXRJSEJoY21WdWRDQlRlVzVqYUdWeUlDMCtJRjl2YmtadmNuZGhjbVJjYmlBZ1gyOXVSbTl5ZDJGeVpDaHRjMmNwSUh0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1WEc0Z0lDQWdZMjl1YzI5c1pTNXNiMmNvSjBSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2kxU1ExWTZJQ2NzSUcxelp5azdYRzRnSUNBZ2MzZHBkR05vSUNodGMyY3VZbTlrZVM1MGVYQmxLU0I3WEc0Z0lDQWdJQ0JqWVhObElDZHpkV0p6WTNKcFltVW5PaUJmZEdocGN5NWZiMjVUZFdKelkzSnBZbVVvYlhObktUc2dZbkpsWVdzN1hHNGdJQ0FnSUNCallYTmxJQ2QxYm5OMVluTmpjbWxpWlNjNklGOTBhR2x6TGw5dmJsVnVVM1ZpYzJOeWFXSmxLRzF6WnlrN0lHSnlaV0ZyTzF4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUM4dlJreFBWeTFKVGpvZ2JXVnpjMkZuWlNCeVpXTmxhWFpsWkNCbWNtOXRJSFJvYVhNZ0xUNGdYMjl1Um05eWQyRnlaRG9nWlcxcGRIUmxaQ0JpZVNCaElISmxiVzkwWlNCVGVXNWphR1Z5SUMwK0lITjFZbk5qY21saVpWeHVJQ0JmYjI1VGRXSnpZM0pwWW1Vb2JYTm5LU0I3WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNiaUFnSUNCc1pYUWdhSGx3WlhKMGVWVnliQ0E5SUcxelp5NWliMlI1TG1aeWIyMDdYRzVjYmlBZ0lDQnNaWFFnWlhabGJuUWdQU0I3WEc0Z0lDQWdJQ0IwZVhCbE9pQnRjMmN1WW05a2VTNTBlWEJsTEZ4dUlDQWdJQ0FnZFhKc09pQm9lWEJsY25SNVZYSnNMRnh1WEc0Z0lDQWdJQ0JwWkdWdWRHbDBlVG9nYlhObkxtSnZaSGt1YVdSbGJuUnBkSGtzWEc1Y2JpQWdJQ0FnSUdGalkyVndkRG9nS0NrZ1BUNGdlMXh1SUNBZ0lDQWdJQ0F2TDJOeVpXRjBaU0J1WlhjZ2MzVmljMk55YVhCMGFXOXVYRzRnSUNBZ0lDQWdJR3hsZENCemRXSWdQU0I3SUhWeWJEb2dhSGx3WlhKMGVWVnliQ3dnYzNSaGRIVnpPaUFuYjI0bklIMDdYRzRnSUNBZ0lDQWdJRjkwYUdsekxsOXpkV0p6WTNKcGNIUnBiMjV6VzJoNWNHVnlkSGxWY214ZElEMGdjM1ZpTzF4dVhHNGdJQ0FnSUNBZ0lDOHZjSEp2WTJWemN5QmhibVFnYzJWdVpDQmphR2xzWkhKbGJuTWdaR0YwWVZ4dUlDQWdJQ0FnSUNCc1pYUWdZMmhwYkdSeVpXNVdZV3gxWlhNZ1BTQjdmVHRjYmlBZ0lDQWdJQ0FnVDJKcVpXTjBMbXRsZVhNb1gzUm9hWE11WDJOb2FXeGtjbVZ1VDJKcVpXTjBjeWt1Wm05eVJXRmphQ2dvWTJocGJHUkpaQ2tnUFQ0Z2UxeHVJQ0FnSUNBZ0lDQWdJR3hsZENCamFHbHNaRVJoZEdFZ1BTQmZkR2hwY3k1ZlkyaHBiR1J5Wlc1UFltcGxZM1J6VzJOb2FXeGtTV1JkTG1SaGRHRTdYRzRnSUNBZ0lDQWdJQ0FnWTJocGJHUnlaVzVXWVd4MVpYTmJZMmhwYkdSSlpGMGdQU0JrWldWd1EyeHZibVVvWTJocGJHUkVZWFJoS1R0Y2JpQWdJQ0FnSUNBZ2ZTazdYRzVjYmlBZ0lDQWdJQ0FnTHk5elpXNWtJRzlySUhKbGMzQnZibk5sSUcxbGMzTmhaMlZjYmlBZ0lDQWdJQ0FnWDNSb2FYTXVYMkoxY3k1d2IzTjBUV1Z6YzJGblpTaDdYRzRnSUNBZ0lDQWdJQ0FnYVdRNklHMXpaeTVwWkN3Z2RIbHdaVG9nSjNKbGMzQnZibk5sSnl3Z1puSnZiVG9nYlhObkxuUnZMQ0IwYnpvZ2JYTm5MbVp5YjIwc1hHNGdJQ0FnSUNBZ0lDQWdZbTlrZVRvZ2V5QmpiMlJsT2lBeU1EQXNJSE5qYUdWdFlUb2dYM1JvYVhNdVgzTmphR1Z0WVN3Z2RtVnljMmx2YmpvZ1gzUm9hWE11WDNabGNuTnBiMjRzSUhaaGJIVmxPaUI3SUdSaGRHRTZJR1JsWlhCRGJHOXVaU2hmZEdocGN5NWtZWFJoS1N3Z1kyaHBiR1J5Wlc1ek9pQmphR2xzWkhKbGJsWmhiSFZsY3lCOUlIMWNiaUFnSUNBZ0lDQWdmU2s3WEc1Y2JpQWdJQ0FnSUNBZ2NtVjBkWEp1SUhOMVlqdGNiaUFnSUNBZ0lIMHNYRzVjYmlBZ0lDQWdJSEpsYW1WamREb2dLSEpsWVhOdmJpa2dQVDRnZTF4dUlDQWdJQ0FnSUNBdkwzTmxibVFnY21WcVpXTjBJSEpsYzNCdmJuTmxJRzFsYzNOaFoyVmNiaUFnSUNBZ0lDQWdYM1JvYVhNdVgySjFjeTV3YjNOMFRXVnpjMkZuWlNoN1hHNGdJQ0FnSUNBZ0lDQWdhV1E2SUcxelp5NXBaQ3dnZEhsd1pUb2dKM0psYzNCdmJuTmxKeXdnWm5KdmJUb2diWE5uTG5SdkxDQjBiem9nYlhObkxtWnliMjBzWEc0Z0lDQWdJQ0FnSUNBZ1ltOWtlVG9nZXlCamIyUmxPaUEwTURNc0lHUmxjMk02SUhKbFlYTnZiaUI5WEc0Z0lDQWdJQ0FnSUgwcE8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUgwN1hHNWNiaUFnSUNCcFppQW9YM1JvYVhNdVgyOXVVM1ZpYzJOeWFYQjBhVzl1U0dGdVpHeGxjaWtnZTF4dUlDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0oxTlZRbE5EVWtsUVZFbFBUaTFGVmtWT1ZEb2dKeXdnWlhabGJuUXBPMXh1SUNBZ0lDQWdYM1JvYVhNdVgyOXVVM1ZpYzJOeWFYQjBhVzl1U0dGdVpHeGxjaWhsZG1WdWRDazdYRzRnSUNBZ2ZWeHVJQ0I5WEc1Y2JpQWdMeTlHVEU5WExVbE9PaUJ0WlhOellXZGxJSEpsWTJWcGRtVmtJR1p5YjIwZ2RHaHBjeUF0UGlCZmIyNUdiM0ozWVhKa09pQmxiV2wwZEdWa0lHSjVJR0VnY21WdGIzUmxJRVJoZEdGUFltcGxZM1JQWW5ObGNuWmxjaUF0UGlCMWJuTjFZbk5qY21saVpWeHVJQ0JmYjI1VmJsTjFZbk5qY21saVpTaHRjMmNwSUh0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1SUNBZ0lHeGxkQ0JvZVhCbGNuUjVWWEpzSUQwZ2JYTm5MbUp2WkhrdVpuSnZiVHRjYmx4dUlDQWdJR3hsZENCemRXSWdQU0JmZEdocGN5NWZjM1ZpYzJOeWFYQjBhVzl1YzF0b2VYQmxjblI1VlhKc1hUdGNiaUFnSUNCa1pXeGxkR1VnWDNSb2FYTXVYM04xWW5OamNtbHdkR2x2Ym5OYmFIbHdaWEowZVZWeWJGMDdYRzVjYmlBZ0lDQnNaWFFnWlhabGJuUWdQU0I3WEc0Z0lDQWdJQ0IwZVhCbE9pQnRjMmN1WW05a2VTNTBlWEJsTEZ4dUlDQWdJQ0FnZFhKc09pQm9lWEJsY25SNVZYSnNMRnh1SUNBZ0lDQWdiMkpxWldOME9pQnpkV0pjYmlBZ0lDQjlPMXh1WEc0Z0lDQWdhV1lnS0Y5MGFHbHpMbDl2YmxOMVluTmpjbWx3ZEdsdmJraGhibVJzWlhJcElIdGNiaUFnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RWVGkxVFZVSlRRMUpKVUZSSlQwNHRSVlpGVGxRNklDY3NJR1YyWlc1MEtUdGNiaUFnSUNBZ0lGOTBhR2x6TGw5dmJsTjFZbk5qY21sd2RHbHZia2hoYm1Sc1pYSW9aWFpsYm5RcE8xeHVJQ0FnSUgxY2JpQWdmVnh1WEc0Z0lDOHZSa3hQVnkxSlRqb2diV1Z6YzJGblpTQnlaV05sYVhabFpDQm1jbTl0SUZKbGNHOXlkR1Z5VlZKTUlHRmtaSEpsYzNNNklHVnRhWFJsWkNCaWVTQmhJSEpsYlc5MFpTQlRlVzVqYUdWeUlDMCtJRjl2YmxKbGJXOTBaVU55WldGMFpTQXRQaUJsZG1WdWRDNWhZMnRjYmlBZ1gyOXVVbVZ6Y0c5dWMyVW9iWE5uS1NCN1hHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjYmx4dUlDQWdJR3hsZENCbGRtVnVkQ0E5SUh0Y2JpQWdJQ0FnSUhSNWNHVTZJRzF6Wnk1MGVYQmxMRnh1SUNBZ0lDQWdkWEpzT2lCdGMyY3Vabkp2YlN4Y2JpQWdJQ0FnSUdOdlpHVTZJRzF6Wnk1aWIyUjVMbU52WkdWY2JpQWdJQ0I5TzF4dVhHNGdJQ0FnYVdZZ0tGOTBhR2x6TGw5dmJsSmxjM0J2Ym5ObFNHRnVaR3hsY2lrZ2UxeHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMUpGVTFCUFRsTkZMVVZXUlU1VU9pQW5MQ0JsZG1WdWRDazdYRzRnSUNBZ0lDQmZkR2hwY3k1ZmIyNVNaWE53YjI1elpVaGhibVJzWlhJb1pYWmxiblFwTzF4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUM4dlJreFBWeTFKVGpvZ2JXVnpjMkZuWlNCeVpXTmxhWFpsWkNCbWNtOXRJRkpsY0c5eWRHVnlWVkpNSUdGa1pISmxjM002SUdWdGFYUmxaQ0JpZVNCaElISmxiVzkwWlNCVGVXNWphR1Z5SUMwK0lISmxZV1JjYmlBZ1gyOXVVbVZoWkNodGMyY3BJSHRjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHVYRzRnSUNBZ2JHVjBJR1YyWlc1MElEMGdlMXh1SUNBZ0lDQWdkSGx3WlRvZ2JYTm5MblI1Y0dVc1hHNGdJQ0FnSUNCMWNtdzZJRzF6Wnk1bWNtOXRMRnh1WEc0Z0lDQWdJQ0JoWTJObGNIUTZJQ2dwSUQwK0lIdGNiaUFnSUNBZ0lDQWdYM1JvYVhNdVgySjFjeTV3YjNOMFRXVnpjMkZuWlNoN1hHNGdJQ0FnSUNBZ0lDQWdhV1E2SUcxelp5NXBaQ3dnZEhsd1pUb2dKM0psYzNCdmJuTmxKeXdnWm5KdmJUb2diWE5uTG5SdkxDQjBiem9nYlhObkxtWnliMjBzWEc0Z0lDQWdJQ0FnSUNBZ1ltOWtlVG9nZXlCamIyUmxPaUF5TURBc0lIWmhiSFZsT2lCa1pXVndRMnh2Ym1Vb1gzUm9hWE11WkdGMFlTa2dmVnh1SUNBZ0lDQWdJQ0I5S1R0Y2JpQWdJQ0FnSUgwc1hHNWNiaUFnSUNBZ0lISmxhbVZqZERvZ0tISmxZWE52YmlrZ1BUNGdlMXh1SUNBZ0lDQWdJQ0JmZEdocGN5NWZZblZ6TG5CdmMzUk5aWE56WVdkbEtIdGNiaUFnSUNBZ0lDQWdJQ0JwWkRvZ2JYTm5MbWxrTENCMGVYQmxPaUFuY21WemNHOXVjMlVuTENCbWNtOXRPaUJ0YzJjdWRHOHNJSFJ2T2lCdGMyY3Vabkp2YlN4Y2JpQWdJQ0FnSUNBZ0lDQmliMlI1T2lCN0lHTnZaR1U2SURRd01Td2daR1Z6WXpvZ2NtVmhjMjl1SUgxY2JpQWdJQ0FnSUNBZ2ZTazdYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZUdGNibHh1SUNBZ0lHbG1JQ2hmZEdocGN5NWZiMjVTWldGa1NHRnVaR3hsY2lrZ2UxeHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMUpGUVVRdFJWWkZUbFE2SUNjc0lHVjJaVzUwS1R0Y2JpQWdJQ0FnSUY5MGFHbHpMbDl2YmxKbFlXUklZVzVrYkdWeUtHVjJaVzUwS1R0Y2JpQWdJQ0I5WEc0Z0lIMWNibHh1ZlZ4dVhHNWxlSEJ2Y25RZ1pHVm1ZWFZzZENCRVlYUmhUMkpxWldOMFVtVndiM0owWlhJN1hHNWNibHh1WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWlBdkwxeHVMeThnTGk5emNtTXZjM2x1WTJobGNpOUVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSXVhbk1pTENJdktpcGNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdVRlFnU1c1dmRtSERwOE9qYnlCbElGTnBjM1JsYldGeklGTkJYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRWxPUlZORExVbEVYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRkZWVDBKSlV5Qk9SVlJYVDFKTFV5QlRURnh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJHVWtGVlRraFBSa1ZTTFVkRlUwVk1URk5EU0VGR1ZDQmFWVklnUms5RlVrUkZVbFZPUnlCRVJWSWdRVTVIUlZkQlRrUlVSVTRnUms5U1UwTklWVTVISUVVdVZseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQlBVa0ZPUjBVZ1UwRmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdSR1YxZEhOamFHVWdWR1ZzWld0dmJTQkJSMXh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJCY0dsNlpXVmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdWRVZEU0U1SlUwTklSU0JWVGtsV1JWSlRTVlJCVkNCQ1JWSk1TVTVjYmlwY2Jpb2dUR2xqWlc1elpXUWdkVzVrWlhJZ2RHaGxJRUZ3WVdOb1pTQk1hV05sYm5ObExDQldaWEp6YVc5dUlESXVNQ0FvZEdobElGd2lUR2xqWlc1elpWd2lLVHRjYmlvZ2VXOTFJRzFoZVNCdWIzUWdkWE5sSUhSb2FYTWdabWxzWlNCbGVHTmxjSFFnYVc0Z1kyOXRjR3hwWVc1alpTQjNhWFJvSUhSb1pTQk1hV05sYm5ObExseHVLaUJaYjNVZ2JXRjVJRzlpZEdGcGJpQmhJR052Y0hrZ2IyWWdkR2hsSUV4cFkyVnVjMlVnWVhSY2JpcGNiaW9nSUNCb2RIUndPaTh2ZDNkM0xtRndZV05vWlM1dmNtY3ZiR2xqWlc1elpYTXZURWxEUlU1VFJTMHlMakJjYmlwY2Jpb2dWVzVzWlhOeklISmxjWFZwY21Wa0lHSjVJR0Z3Y0d4cFkyRmliR1VnYkdGM0lHOXlJR0ZuY21WbFpDQjBieUJwYmlCM2NtbDBhVzVuTENCemIyWjBkMkZ5WlZ4dUtpQmthWE4wY21saWRYUmxaQ0IxYm1SbGNpQjBhR1VnVEdsalpXNXpaU0JwY3lCa2FYTjBjbWxpZFhSbFpDQnZiaUJoYmlCY0lrRlRJRWxUWENJZ1FrRlRTVk1zWEc0cUlGZEpWRWhQVlZRZ1YwRlNVa0ZPVkVsRlV5QlBVaUJEVDA1RVNWUkpUMDVUSUU5R0lFRk9XU0JMU1U1RUxDQmxhWFJvWlhJZ1pYaHdjbVZ6Y3lCdmNpQnBiWEJzYVdWa0xseHVLaUJUWldVZ2RHaGxJRXhwWTJWdWMyVWdabTl5SUhSb1pTQnpjR1ZqYVdacFl5QnNZVzVuZFdGblpTQm5iM1psY201cGJtY2djR1Z5YldsemMybHZibk1nWVc1a1hHNHFJR3hwYldsMFlYUnBiMjV6SUhWdVpHVnlJSFJvWlNCTWFXTmxibk5sTGx4dUtpb3ZYRzVjYm1sdGNHOXlkQ0JUZVc1alQySnFaV04wTENCN1EyaGhibWRsVkhsd1pTd2dUMkpxWldOMFZIbHdaWDBnWm5KdmJTQW5MaTlRY205NGVVOWlhbVZqZENjN1hHNXBiWEJ2Y25RZ1JHRjBZVTlpYW1WamRFTm9hV3hrSUdaeWIyMGdKeTR2UkdGMFlVOWlhbVZqZEVOb2FXeGtKenRjYm1sdGNHOXlkQ0I3WkdWbGNFTnNiMjVsZlNCbWNtOXRJQ2N1TGk5MWRHbHNjeTkxZEdsc2N5NXFjeWM3WEc1Y2JpOHFLbHh1SUNvZ1RXRnBiaUJsZUhSbGJuTnBiMjRnWTJ4aGMzTWdabTl5SUc5aWMyVnlkbVZ5Y3lCaGJtUWdjbVZ3YjNKMFpYSnpMQ0IzYVhSb0lHTnZiVzF2YmlCd2NtOXdaWEowYVdWeklHRnVaQ0J0WlhSb2IyUnpMbHh1SUNvZ1EyaHBiR1J5Wlc0Z2JXRnVZV2RsYldWdWRDQnBjeUJqYjIxdGIyNGdabTl5SUc5aWMyVnlkbVZ5Y3lCaGJtUWdjbVZ3YjNKMFpYSnpMbHh1SUNvdlhHNWpiR0Z6Y3lCRVlYUmhUMkpxWldOMElIdGNiaUFnTHlvZ2NISnBkbUYwWlZ4dUlDQmZkbVZ5YzJsdmJqb2diblZ0WW1WeVhHNWNiaUFnWDI5M2JtVnlPaUJJZVhCbGNuUjVWVkpNWEc0Z0lGOTFjbXc2SUU5aWFtVmpkRlZTVEZ4dUlDQmZjMk5vWlcxaE9pQlRZMmhsYldGY2JpQWdYMkoxY3pvZ1RXbHVhVUoxYzF4dUlDQmZjM1JoZEhWek9pQnZiaUI4SUhCaGRYTmxaRnh1SUNCZmMzbHVZMDlpYWpvZ1UzbHVZMFJoZEdGY2JseHVJQ0JmWTJocGJHUnlaVzQ2SUhzZ2FXUTZJRVJoZEdGUFltcGxZM1JEYUdsc1pDQjlYRzRnSUY5amFHbHNaSEpsYmt4cGMzUmxibVZ5Y3pvZ1cwMXpaMHhwYzNSbGJtVnlYVnh1WEc0Z0lDMHRMUzFsZG1WdWRDQm9ZVzVrYkdWeWN5MHRMUzFjYmlBZ1gyOXVRV1JrUTJocGJHUklZVzVrYkdWeU9pQW9aWFpsYm5RcElEMCtJSFp2YVdSY2JpQWdLaTljYmx4dUlDQXZLaXBjYmlBZ0lDb2dRR2xuYm05eVpWeHVJQ0FnS2lCVGFHOTFiR1FnYm05MElHSmxJSFZ6WldRZ1pHbHlaV04wYkhrZ1lua2dTSGx3WlhKMGFXVnpMaUJKZENkeklHTmhiR3hsWkNCaWVTQjBhR1VnVTNsdVkyaGxjaUJqY21WaGRHVWdiM0lnYzNWaWMyTnlhV0psSUcxbGRHaHZaQ2R6WEc0Z0lDQXFMMXh1SUNCamIyNXpkSEoxWTNSdmNpaHplVzVqYUdWeUxDQjFjbXdzSUhOamFHVnRZU3dnYVc1cGRHbGhiRk4wWVhSMWN5d2dhVzVwZEdsaGJFUmhkR0VzSUdOb2FXeGtjbVZ1Y3lrZ2UxeHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEc1Y2JpQWdJQ0JmZEdocGN5NWZjM2x1WTJobGNpQTlJSE41Ym1Ob1pYSTdYRzRnSUNBZ1gzUm9hWE11WDNWeWJDQTlJSFZ5YkR0Y2JpQWdJQ0JmZEdocGN5NWZjMk5vWlcxaElEMGdjMk5vWlcxaE8xeHVJQ0FnSUY5MGFHbHpMbDl6ZEdGMGRYTWdQU0JwYm1sMGFXRnNVM1JoZEhWek8xeHVJQ0FnSUY5MGFHbHpMbDl6ZVc1alQySnFJRDBnYm1WM0lGTjVibU5QWW1wbFkzUW9hVzVwZEdsaGJFUmhkR0VwTzF4dUlDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJuTWdQU0JqYUdsc1pISmxibk03WEc1Y2JpQWdJQ0JmZEdocGN5NWZkbVZ5YzJsdmJpQTlJREE3WEc0Z0lDQWdYM1JvYVhNdVgyTm9hV3hrU1dRZ1BTQXdPMXh1SUNBZ0lGOTBhR2x6TGw5amFHbHNaSEpsYms5aWFtVmpkSE1nUFNCN2ZUdGNiaUFnSUNCZmRHaHBjeTVmWTJocGJHUnlaVzVNYVhOMFpXNWxjbk1nUFNCYlhUdGNibHh1SUNBZ0lGOTBhR2x6TGw5dmQyNWxjaUE5SUhONWJtTm9aWEl1WDI5M2JtVnlPMXh1SUNBZ0lGOTBhR2x6TGw5aWRYTWdQU0J6ZVc1amFHVnlMbDlpZFhNN1hHNGdJSDFjYmx4dUlDQmZZV3hzYjJOaGRHVk1hWE4wWlc1bGNuTW9LU0I3WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNibHh1SUNBZ0lHeGxkQ0JqYUdsc1pFSmhjMlZWVWt3Z1BTQmZkR2hwY3k1ZmRYSnNJQ3NnSnk5amFHbHNaSEpsYmk4bk8xeHVJQ0FnSUdOdmJuTnZiR1V1Ykc5bktDZGJSR0YwWVNCUFltcGxZM1FnTFNCQmJHeHZZMkYwWlV4cGMzUmxibVZ5YzEwZ0xTQW5MQ0JmZEdocGN5NWZZMmhwYkdSeVpXNXpLVHRjYmlBZ0lDQnBaaUFvWDNSb2FYTXVYMk5vYVd4a2NtVnVjeWtnZTF4dUlDQWdJQ0FnWDNSb2FYTXVYMk5vYVd4a2NtVnVjeTVtYjNKRllXTm9LQ2hqYUdsc1pDa2dQVDRnZTF4dUlDQWdJQ0FnSUNCc1pYUWdZMmhwYkdSVlVrd2dQU0JqYUdsc1pFSmhjMlZWVWt3Z0t5QmphR2xzWkR0Y2JpQWdJQ0FnSUNBZ2JHVjBJR3hwYzNSbGJtVnlJRDBnWDNSb2FYTXVYMkoxY3k1aFpHUk1hWE4wWlc1bGNpaGphR2xzWkZWU1RDd2dLRzF6WnlrZ1BUNGdlMXh1SUNBZ0lDQWdJQ0FnSUM4dmFXZHViM0psSUcxelp5QnpaVzUwSUdKNUlHaHBiWE5sYkdaY2JpQWdJQ0FnSUNBZ0lDQnBaaUFvYlhObkxtWnliMjBnSVQwOUlIUm9hWE11WDI5M2JtVnlLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduUkdGMFlVOWlhbVZqZEMxRGFHbHNaSEpsYmkxU1ExWTZJQ2NzSUcxelp5azdYRzRnSUNBZ0lDQWdJQ0FnSUNCemQybDBZMmdnS0cxelp5NTBlWEJsS1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUdOaGMyVWdKMk55WldGMFpTYzZJRjkwYUdsekxsOXZia05vYVd4a1EzSmxZWFJsS0cxelp5azdJR0p5WldGck8xeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNCallYTmxJQ2RrWld4bGRHVW5PaUJqYjI1emIyeGxMbXh2WnlodGMyY3BPeUJpY21WaGF6dGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ1pHVm1ZWFZzZERvZ1gzUm9hWE11WDJOb1lXNW5aVU5vYVd4a2NtVnVLRzF6WnlrN0lHSnlaV0ZyTzF4dUlDQWdJQ0FnSUNBZ0lDQWdmVnh1SUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ2ZTazdYRzVjYmlBZ0lDQWdJQ0FnWDNSb2FYTXVYMk5vYVd4a2NtVnVUR2x6ZEdWdVpYSnpMbkIxYzJnb2JHbHpkR1Z1WlhJcE8xeHVJQ0FnSUNBZ2ZTazdYRzRnSUNBZ2ZWeHVJQ0I5WEc1Y2JpQWdYM0psYkdWaGMyVk1hWE4wWlc1bGNuTW9LU0I3WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNibHh1SUNBZ0lGOTBhR2x6TGw5amFHbHNaSEpsYmt4cGMzUmxibVZ5Y3k1bWIzSkZZV05vS0Noc2FYTjBaVzVsY2lrZ1BUNGdlMXh1SUNBZ0lDQWdiR2x6ZEdWdVpYSXVjbVZ0YjNabEtDazdYRzRnSUNBZ2ZTazdYRzVjYmlBZ0lDQlBZbXBsWTNRdWEyVjVjeWhmZEdocGN5NWZZMmhwYkdSeVpXNVBZbXBsWTNSektTNW1iM0pGWVdOb0tDaHJaWGtwSUQwK0lIdGNiaUFnSUNBZ0lGOTBhR2x6TGw5amFHbHNaSEpsYms5aWFtVmpkSE5iYTJWNVhTNWZjbVZzWldGelpVeHBjM1JsYm1WeWN5Z3BPMXh1SUNBZ0lIMHBPMXh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUU5aWFtVmpkQ0JWVWt3Z2IyWWdjbVZ3YjNKMFpYSWdiM0lnYjJKelpYSjJaWEpjYmlBZ0lDb2dRSFI1Y0dVZ2UwOWlhbVZqZEZWU1RIMWNiaUFnSUNvdlhHNGdJR2RsZENCMWNtd29LU0I3SUhKbGRIVnliaUIwYUdsekxsOTFjbXc3SUgxY2JseHVJQ0F2S2lwY2JpQWdJQ29nVDJKcVpXTjBJSE5qYUdWdFlTQlZVa3dnS0hSb2FYTWdabWxsYkdRZ2FYTWdibTkwSUhsbGRDQnpkR0ZpYkdVc0lHRnVaQ0JwY3lCemRXSnphbVZqZENCMGJ5QmphR0Z1WjJVcFhHNGdJQ0FxSUVCMGVYQmxJSHRUWTJobGJXRlZVa3g5WEc0Z0lDQXFMMXh1SUNCblpYUWdjMk5vWlcxaEtDa2dleUJ5WlhSMWNtNGdkR2hwY3k1ZmMyTm9aVzFoT3lCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZOMFlYUjFjeUJ2WmlCMGFHVWdjbVZ3YjNKMFpYSWdiM0lnYjJKelpYSjJaWElnWTI5dWJtVmpkR2x2YmlBb2RHaHBjeUJtYVdWc1pDQnBjeUJ1YjNRZ2VXVjBJSE4wWVdKc1pTd2dZVzVrSUdseklITjFZbk5xWldOMElIUnZJR05vWVc1blpTbGNiaUFnSUNvZ1FIUjVjR1VnZTFOMFlYUjFjMzBnTFNCRmJuVnRJRzltT2lCdmJpQjhJSEJoZFhObFpGeHVJQ0FnS2k5Y2JpQWdaMlYwSUhOMFlYUjFjeWdwSUhzZ2NtVjBkWEp1SUhSb2FYTXVYM04wWVhSMWN6c2dmVnh1WEc0Z0lDOHFLbHh1SUNBZ0tpQkVZWFJoSUhOMGNuVmpkSFZ5WlNCMGJ5QmlaU0J6ZVc1amFISnZibWw2WldRdVhHNGdJQ0FxSUVCMGVYQmxJSHRLVTA5T2ZTQXRJRXBUVDA0Z2MzUnlkV04wZFhKbElIUm9ZWFFnYzJodmRXeGtJR1p2Ykd4dmR5QjBhR1VnWkdWbWFXNWxaQ0J6WTJobGJXRXNJR2xtSUdGdWVTNWNiaUFnSUNvdlhHNGdJR2RsZENCa1lYUmhLQ2tnZXlCeVpYUjFjbTRnZEdocGN5NWZjM2x1WTA5aWFpNWtZWFJoT3lCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUVGc2JDQmpjbVZoZEdWa0lHTm9hV3hrY21WdUozTWdjMmx1WTJVZ2RHaGxJSE4xWW5OamNtbHdkR2x2Yml3Z1pHOWxjMjRuZENCamIyNTBZV2x1SUdGc2JDQmphR2xzWkhKbGJpZHpJSE5wYm1ObElISmxjRzl5ZEdWeUlHTnlaV0YwYVc5dUxseHVJQ0FnS2lCQWRIbHdaU0I3VDJKcVpXTjBQRU5vYVd4a1NXUXNJRVJoZEdGUFltcGxZM1JEYUdsc1pENTlYRzRnSUNBcUwxeHVJQ0JuWlhRZ1kyaHBiR1J5Wlc1ektDa2dleUJ5WlhSMWNtNGdkR2hwY3k1ZlkyaHBiR1J5Wlc1UFltcGxZM1J6T3lCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUVCcFoyNXZjbVZjYmlBZ0lDb3ZYRzRnSUhCaGRYTmxLQ2tnZTF4dUlDQWdJQzh2VkU5RVR6b2dkR2hwY3lCbVpXRjBkWEpsSUc1bFpXUnpJRzF2Y21VZ1lXNWhiR2x6WlZ4dUlDQWdJSFJvY205M0lDZE9iM1FnYVcxd2JHVnRaVzUwWldRbk8xeHVJQ0I5WEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRUJwWjI1dmNtVmNiaUFnSUNvdlhHNGdJSEpsYzNWdFpTZ3BJSHRjYmlBZ0lDQXZMMVJQUkU4NklIUm9hWE1nWm1WaGRIVnlaU0J1WldWa2N5QnRiM0psSUdGdVlXeHBjMlZjYmlBZ0lDQjBhSEp2ZHlBblRtOTBJR2x0Y0d4bGJXVnVkR1ZrSnp0Y2JpQWdmVnh1WEc0Z0lDOHFLbHh1SUNBZ0tpQkFhV2R1YjNKbFhHNGdJQ0FxTDF4dUlDQnpkRzl3S0NrZ2UxeHVJQ0FnSUM4dlZFOUVUem9nYzJodmRXeGtJSEpsYlc5MlpTQjBhR1VnYzNWaWMyTnlhWEIwYVc5dUlHRnVaQ0J6Wlc1a0lHMWxjM05oWjJVZ2RXNXpkV0p6WTNKcFltVS9YRzRnSUNBZ2RHaHliM2NnSjA1dmRDQnBiWEJzWlcxbGJuUmxaQ2M3WEc0Z0lIMWNibHh1SUNBdktpcGNiaUFnSUNvZ1EzSmxZWFJsSUdGdVpDQmhaR1FnWVNCRVlYUmhUMkpxWldOMFEyaHBiR1FnZEc4Z1lTQmphR2xzWkhKbGJpQmpiMnhzWldOMGFXOXVMbHh1SUNBZ0tpQkFjR0Z5WVcwZ2UxTjBjbWx1WjMwZ1kyaHBiR1J5Wlc0Z0xTQkRhR2xzWkhKbGJpQnVZVzFsSUhkb1pYSmxJSFJvWlNCamFHbHNaQ0JwY3lCaFpHUmxaQzVjYmlBZ0lDb2dRSEJoY21GdElIdEtVMDlPZlNCcGJtbDBhV0ZzUkdGMFlTQXRJRWx1YVhScFlXd2daR0YwWVNCdlppQjBhR1VnWTJocGJHUmNiaUFnSUNvZ1FISmxkSFZ5YmlCN1VISnZiV2x6WlR4RVlYUmhUMkpxWldOMFEyaHBiR1ErZlNBdElGSmxkSFZ5YmlCUWNtOXRhWE5sSUhSdklHRWdibVYzSUVSaGRHRlBZbXBsWTNSRGFHbHNaQzVjYmlBZ0lDb3ZYRzRnSUdGa1pFTm9hV3hrS0dOb2FXeGtjbVZ1TENCcGJtbDBhV0ZzUkdGMFlTa2dlMXh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hHNWNiaUFnSUNBdkwyTnlaV0YwWlNCdVpYY2dZMmhwYkdRZ2RXNXBjWFZsSUVsRUxDQmlZWE5sWkNCdmJpQm9lWEJsY25SNVZWSk1YRzRnSUNBZ1gzUm9hWE11WDJOb2FXeGtTV1FyS3p0Y2JpQWdJQ0JzWlhRZ2JYTm5RMmhwYkdSSlpDQTlJRjkwYUdsekxsOXZkMjVsY2lBcklDY2pKeUFySUY5MGFHbHpMbDlqYUdsc1pFbGtPMXh1SUNBZ0lHeGxkQ0J0YzJkRGFHbHNaRkJoZEdnZ1BTQmZkR2hwY3k1ZmRYSnNJQ3NnSnk5amFHbHNaSEpsYmk4bklDc2dZMmhwYkdSeVpXNDdYRzVjYmlBZ0lDQXZMMFpNVDFjdFQxVlVPaUIwYUdseklHMWxjM05oWjJVZ2QybHNiQ0JpWlNCelpXNTBJR1JwY21WamRHeDVJSFJ2SUdFZ2NtVnpiM1Z5WTJVZ1kyaHBiR1FnWVdSa2NtVnpjem9nVFdWemMyRm5aVUoxYzF4dUlDQWdJR3hsZENCeVpYRjFaWE4wVFhObklEMGdlMXh1SUNBZ0lDQWdkSGx3WlRvZ0oyTnlaV0YwWlNjc0lHWnliMjA2SUY5MGFHbHpMbDl2ZDI1bGNpd2dkRzg2SUcxelowTm9hV3hrVUdGMGFDeGNiaUFnSUNBZ0lHSnZaSGs2SUhzZ2NtVnpiM1Z5WTJVNklHMXpaME5vYVd4a1NXUXNJSFpoYkhWbE9pQnBibWwwYVdGc1JHRjBZU0I5WEc0Z0lDQWdmVHRjYmx4dUlDQWdJQzh2Y21WMGRYSnVjeUJ3Y205dGFYTmxMQ0JwYmlCMGFHVWdablYwZFhKbExDQjBhR1VnUVZCSklHMWhlU0JqYUdGdVoyVWdkRzhnWVhONWJtTm9jbTl1YjNWeklHTmhiR3hjYmlBZ0lDQnlaWFIxY200Z2JtVjNJRkJ5YjIxcGMyVW9LSEpsYzI5c2RtVXBJRDArSUh0Y2JpQWdJQ0FnSUd4bGRDQnRjMmRKWkNBOUlGOTBhR2x6TGw5aWRYTXVjRzl6ZEUxbGMzTmhaMlVvY21WeGRXVnpkRTF6WnlrN1hHNWNiaUFnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RqY21WaGRHVXRjbVZ3YjNKMFpYSXRZMmhwYkdRb0lDY2dLeUJmZEdocGN5NWZiM2R1WlhJZ0t5QW5JQ2s2SUNjc0lISmxjWFZsYzNSTmMyY3BPMXh1SUNBZ0lDQWdiR1YwSUc1bGQwTm9hV3hrSUQwZ2JtVjNJRVJoZEdGUFltcGxZM1JEYUdsc1pDaGZkR2hwY3l3Z2JYTm5RMmhwYkdSSlpDd2dhVzVwZEdsaGJFUmhkR0VzSUY5MGFHbHpMbDl2ZDI1bGNpd2diWE5uU1dRcE8xeHVJQ0FnSUNBZ2JtVjNRMmhwYkdRdWIyNURhR0Z1WjJVb0tHVjJaVzUwS1NBOVBpQjdYRzRnSUNBZ0lDQWdJRjkwYUdsekxsOXZia05vWVc1blpTaGxkbVZ1ZEN3Z2V5QndZWFJvT2lCdGMyZERhR2xzWkZCaGRHZ3NJR05vYVd4a1NXUTZJRzF6WjBOb2FXeGtTV1FnZlNrN1hHNGdJQ0FnSUNCOUtUdGNibHh1SUNBZ0lDQWdYM1JvYVhNdVgyTm9hV3hrY21WdVQySnFaV04wYzF0dGMyZERhR2xzWkVsa1hTQTlJRzVsZDBOb2FXeGtPMXh1WEc0Z0lDQWdJQ0J5WlhOdmJIWmxLRzVsZDBOb2FXeGtLVHRjYmlBZ0lDQjlLVHRjYmlBZ2ZWeHVYRzRnSUM4cUtseHVJQ0FnS2lCVFpYUjFjQ0IwYUdVZ1kyRnNiR0poWTJzZ2RHOGdjSEp2WTJWemN5QmpjbVZoZEdVZ1lXNWtJR1JsYkdWMFpTQnZaaUJqYUdsc1pISmxibk11WEc0Z0lDQXFJRUJ3WVhKaGJTQjdablZ1WTNScGIyNG9aWFpsYm5RNklFMXpaMFYyWlc1MEtYMGdZMkZzYkdKaFkydGNiaUFnSUNvdlhHNGdJRzl1UVdSa1EyaHBiR1FvWTJGc2JHSmhZMnNwSUh0Y2JpQWdJQ0IwYUdsekxsOXZia0ZrWkVOb2FXeGtjbVZ1U0dGdVpHeGxjaUE5SUdOaGJHeGlZV05yTzF4dUlDQjlYRzVjYmlBZ0x5OUdURTlYTFVsT09pQnRaWE56WVdkbElISmxZMlZwZG1Wa0lHWnliMjBnWVNCeVpXMXZkR1VnUkdGMFlVOWlhbVZqZENBdFBpQmhaR1JEYUdsc1pGeHVJQ0JmYjI1RGFHbHNaRU55WldGMFpTaHRjMmNwSUh0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1SUNBZ0lHeGxkQ0J0YzJkRGFHbHNaRWxrSUQwZ2JYTm5MbUp2WkhrdWNtVnpiM1Z5WTJVN1hHNWNiaUFnSUNCamIyNXpiMnhsTG14dlp5Z25ZM0psWVhSbExXOWljMlZ5ZG1WeUxXTm9hV3hrS0NBbklDc2dYM1JvYVhNdVgyOTNibVZ5SUNzZ0p5QXBPaUFuTENCdGMyY3BPMXh1SUNBZ0lHeGxkQ0J1WlhkRGFHbHNaQ0E5SUc1bGR5QkVZWFJoVDJKcVpXTjBRMmhwYkdRb1gzUm9hWE1zSUcxelowTm9hV3hrU1dRc0lHMXpaeTVpYjJSNUxuWmhiSFZsS1R0Y2JpQWdJQ0JmZEdocGN5NWZZMmhwYkdSeVpXNVBZbXBsWTNSelcyMXpaME5vYVd4a1NXUmRJRDBnYm1WM1EyaHBiR1E3WEc1Y2JpQWdJQ0J6WlhSVWFXMWxiM1YwS0NncElEMCtJSHRjYmlBZ0lDQWdJQzh2Umt4UFZ5MVBWVlE2SUhkcGJHd2dabXh2ZHlCMGJ5QkVZWFJoVDJKcVpXTjBRMmhwYkdRZ0xUNGdYMjl1VW1WemNHOXVjMlZjYmlBZ0lDQWdJRjkwYUdsekxsOWlkWE11Y0c5emRFMWxjM05oWjJVb2UxeHVJQ0FnSUNBZ0lDQnBaRG9nYlhObkxtbGtMQ0IwZVhCbE9pQW5jbVZ6Y0c5dWMyVW5MQ0JtY205dE9pQnRjMmN1ZEc4c0lIUnZPaUJ0YzJjdVpuSnZiU3hjYmlBZ0lDQWdJQ0FnWW05a2VUb2dleUJqYjJSbE9pQXlNREFzSUhOdmRYSmpaVG9nWDNSb2FYTXVYMjkzYm1WeUlIMWNiaUFnSUNBZ0lIMHBPMXh1SUNBZ0lIMHBPMXh1WEc0Z0lDQWdiR1YwSUdWMlpXNTBJRDBnZTF4dUlDQWdJQ0FnZEhsd1pUb2diWE5uTG5SNWNHVXNYRzRnSUNBZ0lDQm1jbTl0T2lCdGMyY3Vabkp2YlN4Y2JpQWdJQ0FnSUhWeWJEb2diWE5uTG5SdkxGeHVJQ0FnSUNBZ2RtRnNkV1U2SUcxelp5NWliMlI1TG5aaGJIVmxMRnh1SUNBZ0lDQWdZMmhwYkdSSlpEb2diWE5uUTJocGJHUkpaQ3hjYmlBZ0lDQWdJR2xrWlc1MGFYUjVPaUJ0YzJjdVltOWtlUzVwWkdWdWRHbDBlVnh1SUNBZ0lIMDdYRzVjYmlBZ0lDQnBaaUFvWDNSb2FYTXVYMjl1UVdSa1EyaHBiR1J5Wlc1SVlXNWtiR1Z5S1NCN1hHNGdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25RVVJFTFVOSVNVeEVVa1ZPTFVWV1JVNVVPaUFuTENCbGRtVnVkQ2s3WEc0Z0lDQWdJQ0JmZEdocGN5NWZiMjVCWkdSRGFHbHNaSEpsYmtoaGJtUnNaWElvWlhabGJuUXBPMXh1SUNBZ0lIMWNiaUFnZlZ4dVhHNGdJQzh2YzJWdVpDQmtaV3gwWVNCdFpYTnpZV2RsY3lCMGJ5QnpkV0p6WTNKcGNIUnBiMjV6WEc0Z0lGOXZia05vWVc1blpTaGxkbVZ1ZEN3Z1kyaHBiR1JKYm1adktTQjdYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2JseHVJQ0FnSUY5MGFHbHpMbDkyWlhKemFXOXVLeXM3WEc1Y2JpQWdJQ0JwWmlBb1gzUm9hWE11WDNOMFlYUjFjeUE5UFQwZ0oyOXVKeWtnZTF4dUlDQWdJQ0FnTHk5R1RFOVhMVTlWVkRvZ2RHaHBjeUJ0WlhOellXZGxJSGRwYkd3Z1ltVWdjMlZ1ZENCa2FYSmxZM1JzZVNCMGJ5QmhJSEpsYzI5MWNtTmxJR05vWVc1blpYTWdZV1JrY21WemN6b2dUV1Z6YzJGblpVSjFjMXh1SUNBZ0lDQWdiR1YwSUdOb1lXNW5aVTF6WnlBOUlIdGNiaUFnSUNBZ0lDQWdkSGx3WlRvZ0ozVndaR0YwWlNjc0lHWnliMjA2SUY5MGFHbHpMbDkxY213c0lIUnZPaUJmZEdocGN5NWZkWEpzSUNzZ0p5OWphR0Z1WjJWekp5eGNiaUFnSUNBZ0lDQWdZbTlrZVRvZ2V5QjJaWEp6YVc5dU9pQmZkR2hwY3k1ZmRtVnljMmx2Yml3Z2MyOTFjbU5sT2lCZmRHaHBjeTVmYjNkdVpYSXNJR0YwZEhKcFluVjBaVG9nWlhabGJuUXVabWxsYkdRZ2ZWeHVJQ0FnSUNBZ2ZUdGNibHh1SUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjF0RVlYUmhUMkpxWldOMElDMGdYMjl1UTJoaGJtZGxYU0F0SUNjc0lHVjJaVzUwTENCamFHbHNaRWx1Wm04c0lHTm9ZVzVuWlUxelp5azdYRzVjYmlBZ0lDQWdJR2xtSUNobGRtVnVkQzV2Vkhsd1pTQTlQVDBnVDJKcVpXTjBWSGx3WlM1UFFrcEZRMVFwSUh0Y2JpQWdJQ0FnSUNBZ2FXWWdLR1YyWlc1MExtTlVlWEJsSUNFOVBTQkRhR0Z1WjJWVWVYQmxMbEpGVFU5V1JTa2dlMXh1SUNBZ0lDQWdJQ0FnSUdOb1lXNW5aVTF6Wnk1aWIyUjVMblpoYkhWbElEMGdaWFpsYm5RdVpHRjBZVHRjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJQ0FnWTJoaGJtZGxUWE5uTG1KdlpIa3VZWFIwY21saWRYUmxWSGx3WlNBOUlHVjJaVzUwTG05VWVYQmxPMXh1SUNBZ0lDQWdJQ0JqYUdGdVoyVk5jMmN1WW05a2VTNTJZV3gxWlNBOUlHVjJaVzUwTG1SaGRHRTdYRzRnSUNBZ0lDQWdJR2xtSUNobGRtVnVkQzVqVkhsd1pTQWhQVDBnUTJoaGJtZGxWSGx3WlM1VlVFUkJWRVVwSUh0Y2JpQWdJQ0FnSUNBZ0lDQmphR0Z1WjJWTmMyY3VZbTlrZVM1dmNHVnlZWFJwYjI0Z1BTQmxkbVZ1ZEM1alZIbHdaVHRjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnZlZ4dVhHNGdJQ0FnSUNBdkwyTm9hV3hrU1c1bWJ5QnRkWE4wSUdoaGRtVWdLSEJoZEdnc0lHTm9hV3hrU1dRcFhHNGdJQ0FnSUNCcFppQW9ZMmhwYkdSSmJtWnZLU0I3WEc0Z0lDQWdJQ0FnSUdOb1lXNW5aVTF6Wnk1MGJ5QTlJR05vYVd4a1NXNW1ieTV3WVhSb08xeHVJQ0FnSUNBZ0lDQmphR0Z1WjJWTmMyY3VZbTlrZVM1eVpYTnZkWEpqWlNBOUlHTm9hV3hrU1c1bWJ5NWphR2xzWkVsa08xeHVJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQmZkR2hwY3k1ZlluVnpMbkJ2YzNSTlpYTnpZV2RsS0dOb1lXNW5aVTF6WnlrN1hHNGdJQ0FnZlZ4dUlDQjlYRzVjYmlBZ0x5OUdURTlYTFVsT09pQmtaV3gwWVNCdFpYTnpZV2RsSUhKbFkyVnBkbVZrSUdaeWIyMGdZU0J5WlcxdmRHVWdSR0YwWVU5aWFtVmpkRkpsY0c5eWRHVnlJRzl5SUVSaGRHRlBZbXBsWTNSRGFHbHNaQ0IzYUdWdUlHTm9ZVzVuYVc1bklHUmhkR0ZjYmlBZ1gyTm9ZVzVuWlU5aWFtVmpkQ2h6ZVc1alQySnFMQ0J0YzJjcElIdGNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4dVhHNGdJQ0FnTHk5VVQwUlBPaUIxY0dSaGRHVWdkbVZ5YzJsdmJpQS9YRzRnSUNBZ0x5OW9iM2NnZEc4Z2FHRnVaR3hsSUdGdUlHbHVZMjl5Y21WamRDQjJaWEp6YVc5dUlEOGdSWGhoYlhCc1pUb2djbVZqWldsMlpTQmhJSFpsY25OcGIyNGdNeUIzYUdWdUlIUm9aU0J2WW5ObGNuWmxjaUJwY3lCcGJpQjJaWEp6YVc5dUlERXNJSGRvWlhKbElHbHpJSFJvWlNCMlpYSnphVzl1SURJZ1AxeHVJQ0FnSUM4dmQybHNiQ0IzWlNCdVpXVmtJSFJ2SUdOdmJtWnBjbTBnZEdobElISmxZMlZ3ZEdsdmJpQS9YRzRnSUNBZ2FXWWdLRjkwYUdsekxsOTJaWEp6YVc5dUlDc2dNU0E5UFQwZ2JYTm5MbUp2WkhrdWRtVnljMmx2YmlrZ2UxeHVJQ0FnSUNBZ1gzUm9hWE11WDNabGNuTnBiMjRyS3p0Y2JpQWdJQ0FnSUd4bGRDQndZWFJvSUQwZ2JYTm5MbUp2WkhrdVlYUjBjbWxpZFhSbE8xeHVJQ0FnSUNBZ2JHVjBJSFpoYkhWbElEMGdaR1ZsY0VOc2IyNWxLRzF6Wnk1aWIyUjVMblpoYkhWbEtUdGNiaUFnSUNBZ0lHeGxkQ0JtYVc1a1VtVnpkV3gwSUQwZ2MzbHVZMDlpYWk1bWFXNWtRbVZtYjNKbEtIQmhkR2dwTzF4dVhHNGdJQ0FnSUNCcFppQW9iWE5uTG1KdlpIa3VZWFIwY21saWRYUmxWSGx3WlNBOVBUMGdUMkpxWldOMFZIbHdaUzVCVWxKQldTa2dlMXh1SUNBZ0lDQWdJQ0JwWmlBb2JYTm5MbUp2WkhrdWIzQmxjbUYwYVc5dUlEMDlQU0JEYUdGdVoyVlVlWEJsTGtGRVJDa2dlMXh1SUNBZ0lDQWdJQ0FnSUd4bGRDQmhjbklnUFNCbWFXNWtVbVZ6ZFd4MExtOWlhanRjYmlBZ0lDQWdJQ0FnSUNCc1pYUWdhVzVrWlhnZ1BTQm1hVzVrVW1WemRXeDBMbXhoYzNRN1hHNGdJQ0FnSUNBZ0lDQWdRWEp5WVhrdWNISnZkRzkwZVhCbExuTndiR2xqWlM1aGNIQnNlU2hoY25Jc0lGdHBibVJsZUN3Z01GMHVZMjl1WTJGMEtIWmhiSFZsS1NrN1hHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppQW9iWE5uTG1KdlpIa3ViM0JsY21GMGFXOXVJRDA5UFNCRGFHRnVaMlZVZVhCbExsSkZUVTlXUlNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR3hsZENCaGNuSWdQU0JtYVc1a1VtVnpkV3gwTG05aWFqdGNiaUFnSUNBZ0lDQWdJQ0JzWlhRZ2FXNWtaWGdnUFNCbWFXNWtVbVZ6ZFd4MExteGhjM1E3WEc0Z0lDQWdJQ0FnSUNBZ1lYSnlMbk53YkdsalpTaHBibVJsZUN3Z2RtRnNkV1VwTzF4dUlDQWdJQ0FnSUNCOUlHVnNjMlVnZTF4dUlDQWdJQ0FnSUNBZ0lHWnBibVJTWlhOMWJIUXViMkpxVzJacGJtUlNaWE4xYkhRdWJHRnpkRjBnUFNCMllXeDFaVHNnTHk4Z1ZWQkVRVlJGWEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0FnSUdsbUlDaHRjMmN1WW05a2VTNTJZV3gxWlNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR1pwYm1SU1pYTjFiSFF1YjJKcVcyWnBibVJTWlhOMWJIUXViR0Z6ZEYwZ1BTQjJZV3gxWlRzZ0x5OGdWVkJFUVZSRklHOXlJRUZFUkZ4dUlDQWdJQ0FnSUNCOUlHVnNjMlVnZTF4dUlDQWdJQ0FnSUNBZ0lHUmxiR1YwWlNCbWFXNWtVbVZ6ZFd4MExtOWlhbHRtYVc1a1VtVnpkV3gwTG14aGMzUmRPeUF2THlCU1JVMVBWa1ZjYmlBZ0lDQWdJQ0FnZlZ4dUlDQWdJQ0FnZlZ4dUlDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQXZMMVJQUkU4NklHaHZkeUIwYnlCb1lXNWtiR1VnZFc1emVXNWphSEp2Ym1sNlpXUWdkbVZ5YzJsdmJuTS9YRzRnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduVlU1VFdVNURTRkpQVGtsYVJVUWdWa1ZTVTBsUFRqb2dLR1JoZEdFZ1BUNGdKeUFySUY5MGFHbHpMbDkyWlhKemFXOXVJQ3NnSnl3Z2JYTm5JRDArSUNjZ0t5QnRjMmN1WW05a2VTNTJaWEp6YVc5dUlDc2dKeWtuS1R0Y2JpQWdJQ0I5WEc0Z0lIMWNibHh1SUNBdkwwWk1UMWN0U1U0NklHMWxjM05oWjJVZ2NtVmpaV2wyWldRZ1puSnZiU0JoSUhKbGJXOTBaU0JFWVhSaFQySnFaV04wUTJocGJHUWdkMmhsYmlCamFHRnVaMmx1WnlCa1lYUmhYRzRnSUY5amFHRnVaMlZEYUdsc1pISmxiaWh0YzJjcElIdGNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4dUlDQWdJR052Ym5OdmJHVXViRzluS0NkRGFHRnVaMlVnWTJocGJHUnlaVzQ2SUNjc0lGOTBhR2x6TGw5dmQyNWxjaXdnYlhObktUdGNibHh1SUNBZ0lHeGxkQ0JqYUdsc1pFbGtJRDBnYlhObkxtSnZaSGt1Y21WemIzVnlZMlU3WEc0Z0lDQWdiR1YwSUdOb2FXeGtjbVZ1SUQwZ1gzUm9hWE11WDJOb2FXeGtjbVZ1VDJKcVpXTjBjMXRqYUdsc1pFbGtYVHRjYmx4dUlDQWdJR2xtSUNoamFHbHNaSEpsYmlrZ2UxeHVJQ0FnSUNBZ1gzUm9hWE11WDJOb1lXNW5aVTlpYW1WamRDaGphR2xzWkhKbGJpNWZjM2x1WTA5aWFpd2diWE5uS1R0Y2JpQWdJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjA1dklHTm9hV3hrY21WdUlHWnZkVzVrSUdadmNqb2dKeXdnWTJocGJHUkpaQ2s3WEc0Z0lDQWdmVnh1SUNCOVhHNWNibjFjYmx4dVpYaHdiM0owSUdSbFptRjFiSFFnUkdGMFlVOWlhbVZqZER0Y2JseHVYRzVjYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTSUM4dlhHNHZMeUF1TDNOeVl5OXplVzVqYUdWeUwwUmhkR0ZQWW1wbFkzUXVhbk1pTENJdktpcGNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdVRlFnU1c1dmRtSERwOE9qYnlCbElGTnBjM1JsYldGeklGTkJYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRWxPUlZORExVbEVYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRkZWVDBKSlV5Qk9SVlJYVDFKTFV5QlRURnh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJHVWtGVlRraFBSa1ZTTFVkRlUwVk1URk5EU0VGR1ZDQmFWVklnUms5RlVrUkZVbFZPUnlCRVJWSWdRVTVIUlZkQlRrUlVSVTRnUms5U1UwTklWVTVISUVVdVZseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQlBVa0ZPUjBVZ1UwRmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdSR1YxZEhOamFHVWdWR1ZzWld0dmJTQkJSMXh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJCY0dsNlpXVmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdWRVZEU0U1SlUwTklSU0JWVGtsV1JWSlRTVlJCVkNCQ1JWSk1TVTVjYmlwY2Jpb2dUR2xqWlc1elpXUWdkVzVrWlhJZ2RHaGxJRUZ3WVdOb1pTQk1hV05sYm5ObExDQldaWEp6YVc5dUlESXVNQ0FvZEdobElGd2lUR2xqWlc1elpWd2lLVHRjYmlvZ2VXOTFJRzFoZVNCdWIzUWdkWE5sSUhSb2FYTWdabWxzWlNCbGVHTmxjSFFnYVc0Z1kyOXRjR3hwWVc1alpTQjNhWFJvSUhSb1pTQk1hV05sYm5ObExseHVLaUJaYjNVZ2JXRjVJRzlpZEdGcGJpQmhJR052Y0hrZ2IyWWdkR2hsSUV4cFkyVnVjMlVnWVhSY2JpcGNiaW9nSUNCb2RIUndPaTh2ZDNkM0xtRndZV05vWlM1dmNtY3ZiR2xqWlc1elpYTXZURWxEUlU1VFJTMHlMakJjYmlwY2Jpb2dWVzVzWlhOeklISmxjWFZwY21Wa0lHSjVJR0Z3Y0d4cFkyRmliR1VnYkdGM0lHOXlJR0ZuY21WbFpDQjBieUJwYmlCM2NtbDBhVzVuTENCemIyWjBkMkZ5WlZ4dUtpQmthWE4wY21saWRYUmxaQ0IxYm1SbGNpQjBhR1VnVEdsalpXNXpaU0JwY3lCa2FYTjBjbWxpZFhSbFpDQnZiaUJoYmlCY0lrRlRJRWxUWENJZ1FrRlRTVk1zWEc0cUlGZEpWRWhQVlZRZ1YwRlNVa0ZPVkVsRlV5QlBVaUJEVDA1RVNWUkpUMDVUSUU5R0lFRk9XU0JMU1U1RUxDQmxhWFJvWlhJZ1pYaHdjbVZ6Y3lCdmNpQnBiWEJzYVdWa0xseHVLaUJUWldVZ2RHaGxJRXhwWTJWdWMyVWdabTl5SUhSb1pTQnpjR1ZqYVdacFl5QnNZVzVuZFdGblpTQm5iM1psY201cGJtY2djR1Z5YldsemMybHZibk1nWVc1a1hHNHFJR3hwYldsMFlYUnBiMjV6SUhWdVpHVnlJSFJvWlNCTWFXTmxibk5sTGx4dUtpb3ZYRzVjYm1sdGNHOXlkQ0JUZVc1alQySnFaV04wSUdaeWIyMGdKeTR2VUhKdmVIbFBZbXBsWTNRbk8xeHVYRzR2S2lwY2JpQXFJRlJvWlNCamJHRnpjeUJ5WlhSMWNtNWxaQ0JtY205dElIUm9aU0JFWVhSaFQySnFaV04wSUdGa1pFTm9hV3hrY21WdUlHTmhiR3dnYjNJZ1puSnZiU0J2YmtGa1pFTm9hV3hrY21WdUlHbG1JSEpsYlc5MFpXeDVJR055WldGMFpXUXVYRzRnS2lCRGFHbHNaSEpsYmlCdlltcGxZM1FnYzNsdVkyaHliMjVwZW1GMGFXOXVJR2x6SUdFZ1lTQm1ZWE4wSUdadmNuZGhjbVFnYldWamFHRnVhWE50TENCdWJ5QnVaV1ZrSUdadmNpQmthWEpsWTNRZ2MzVmljMk55YVhCMGFXOXVjeXdnYVhRZ2RYTmxjeUIwYUdVZ1lXeHlaV0ZrZVNCaGRYUm9iM0pwZW1Wa0lITjFZbk5qY21sd2RHbHZiaUJtY205dElIUm9aU0J3WVhKbGJuUWdSR0YwWVU5aWFtVmpkQzVjYmlBcUwxeHVZMnhoYzNNZ1JHRjBZVTlpYW1WamRFTm9hV3hrSUM4cUlHbHRjR3hsYldWdWRITWdVM2x1WTFOMFlYUjFjeUFxTHlCN1hHNGdJQzhxSUhCeWFYWmhkR1ZjYmx4dUlDQXRMUzB0WlhabGJuUWdhR0Z1Wkd4bGNuTXRMUzB0WEc0Z0lGOXZibEpsYzNCdmJuTmxTR0Z1Wkd4bGNqb2dLR1YyWlc1MEtTQTlQaUIyYjJsa1hHNGdJQ292WEc1Y2JpQWdMeW9xWEc0Z0lDQXFJRUJwWjI1dmNtVmNiaUFnSUNvZ1UyaHZkV3hrSUc1dmRDQmlaU0IxYzJWa0lHUnBjbVZqZEd4NUlHSjVJRWg1Y0dWeWRHbGxjeTRnU1hRbmN5QmpZV3hzWldRZ1lua2dkR2hsSUVSaGRHRlBZbXBsWTNRdVlXUmtRMmhwYkdSeVpXNWNiaUFnSUNvdlhHNGdJR052Ym5OMGNuVmpkRzl5S0hCaGNtVnVkQ3dnWTJocGJHUkpaQ3dnYVc1cGRHbGhiRVJoZEdFc0lHOTNibVZ5TENCdGMyZEpaQ2tnZTF4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYRzVjYmlBZ0lDQmZkR2hwY3k1ZmNHRnlaVzUwSUQwZ2NHRnlaVzUwTzF4dUlDQWdJRjkwYUdsekxsOWphR2xzWkVsa0lEMGdZMmhwYkdSSlpEdGNiaUFnSUNCZmRHaHBjeTVmYjNkdVpYSWdQU0J2ZDI1bGNqdGNiaUFnSUNCZmRHaHBjeTVmYlhOblNXUWdQU0J0YzJkSlpEdGNibHh1SUNBZ0lGOTBhR2x6TGw5emVXNWpUMkpxSUQwZ2JtVjNJRk41Ym1OUFltcGxZM1FvYVc1cGRHbGhiRVJoZEdFcE8xeHVYRzRnSUNBZ1gzUm9hWE11WDJKMWN5QTlJSEJoY21WdWRDNWZZblZ6TzF4dUlDQWdJRjkwYUdsekxsOWhiR3h2WTJGMFpVeHBjM1JsYm1WeWN5Z3BPMXh1SUNCOVhHNWNiaUFnWDJGc2JHOWpZWFJsVEdsemRHVnVaWEp6S0NrZ2UxeHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEc1Y2JpQWdJQ0F2TDNSb2FYTWdhWE1nYjI1c2VTQnVaV1ZrWldRZ1ptOXlJR05vYVd4a2NtVnVJSEpsY0c5eWRHVnljMXh1SUNBZ0lHbG1JQ2hmZEdocGN5NWZiM2R1WlhJcElIdGNiaUFnSUNBZ0lGOTBhR2x6TGw5c2FYTjBaVzVsY2lBOUlGOTBhR2x6TGw5aWRYTXVZV1JrVEdsemRHVnVaWElvWDNSb2FYTXVYMjkzYm1WeUxDQW9iWE5uS1NBOVBpQjdYRzRnSUNBZ0lDQWdJR2xtSUNodGMyY3VkSGx3WlNBOVBUMGdKM0psYzNCdmJuTmxKeUFtSmlCdGMyY3VhV1FnUFQwOUlGOTBhR2x6TGw5dGMyZEpaQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RFWVhSaFQySnFaV04wUTJocGJHUXViMjVTWlhOd2IyNXpaVG9uTENCdGMyY3BPMXh1SUNBZ0lDQWdJQ0FnSUY5MGFHbHpMbDl2YmxKbGMzQnZibk5sS0cxelp5azdYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDBwTzF4dUlDQWdJSDFjYmlBZ2ZWeHVYRzRnSUY5eVpXeGxZWE5sVEdsemRHVnVaWEp6S0NrZ2UxeHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEc1Y2JpQWdJQ0JwWmlBb1gzUm9hWE11WDJ4cGMzUmxibVZ5S1NCN1hHNGdJQ0FnSUNCZmRHaHBjeTVmYkdsemRHVnVaWEl1Y21WdGIzWmxLQ2s3WEc0Z0lDQWdmVnh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZKbGJHVmhjMlVnWVc1a0lHUmxiR1YwWlNCdlltcGxZM1FnWkdGMFlWeHVJQ0FnS2k5Y2JpQWdaR1ZzWlhSbEtDa2dlMXh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hHNWNiaUFnSUNCa1pXeGxkR1VnWDNSb2FYTXVYM0JoY21WdWRDNWZZMmhwYkdSeVpXNWJYM1JvYVhNdVgyTm9hV3hrU1dSZE8xeHVYRzRnSUNBZ1gzUm9hWE11WDNKbGJHVmhjMlZNYVhOMFpXNWxjbk1vS1R0Y2JseHVJQ0FnSUM4dlZFOUVUem9nYzJWdVpDQmtaV3hsZEdVZ2JXVnpjMkZuWlNBL1hHNGdJSDFjYmx4dUlDQXZLaXBjYmlBZ0lDb2dRMmhwYkdSeVpXNGdTVVFnWjJWdVpYSmhkR1ZrSUc5dUlHRmtaRU5vYVd4a2NtVnVMaUJWYm1seGRXVWdhV1JsYm5ScFptbGxjbHh1SUNBZ0tpQkFkSGx3WlNCN1ZWSk1mU0F0SUZWU1RDQnZaaUIwYUdVZ1ptOXliV0YwSUR4SWVYQmxjblI1VlZKTVBpTThiblZ0WlhKcFl5MXpaWEYxWlc1alpUNWNiaUFnSUNvdlhHNGdJR2RsZENCamFHbHNaRWxrS0NrZ2V5QnlaWFIxY200Z2RHaHBjeTVmWTJocGJHUkpaRHNnZlZ4dVhHNGdJQzhxS2x4dUlDQWdLaUJFWVhSaElGTjBjblZqZEhWeVpTQjBieUJpWlNCemVXNWphSEp2Ym1sNlpXUXVYRzRnSUNBcUlFQjBlWEJsSUh0S1UwOU9mU0F0SUVwVFQwNGdjM1J5ZFdOMGRYSmxJSFJvWVhRZ2MyaHZkV3hrSUdadmJHeHZkeUIwYUdVZ1pHVm1hVzVsWkNCelkyaGxiV0VzSUdsbUlHRnVlUzVjYmlBZ0lDb3ZYRzRnSUdkbGRDQmtZWFJoS0NrZ2V5QnlaWFIxY200Z2RHaHBjeTVmYzNsdVkwOWlhaTVrWVhSaE95QjlYRzVjYmlBZ0x5b3FYRzRnSUNBcUlGSmxaMmx6ZEdWeUlIUm9aU0JqYUdGdVoyVWdiR2x6ZEdWdVpYSnpJSE5sYm5RZ1lua2dkR2hsSUhKbGNHOXlkR1Z5SUdOb2FXeGtYRzRnSUNBcUlFQndZWEpoYlNCN1puVnVZM1JwYjI0b1pYWmxiblE2SUUxelowVjJaVzUwS1gwZ1kyRnNiR0poWTJ0Y2JpQWdJQ292WEc0Z0lHOXVRMmhoYm1kbEtHTmhiR3hpWVdOcktTQjdYRzRnSUNBZ2RHaHBjeTVmYzNsdVkwOWlhaTV2WW5ObGNuWmxLQ2hsZG1WdWRDa2dQVDRnZTF4dUlDQWdJQ0FnWTJGc2JHSmhZMnNvWlhabGJuUXBPMXh1SUNBZ0lIMHBPMXh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ0FxSUZObGRIVndJSFJvWlNCallXeHNZbUZqYXlCMGJ5QndjbTlqWlhOeklISmxjM0J2Ym5ObElHNXZkR2xtYVdOaGRHbHZibk1nYjJZZ2RHaGxJR055WldGMFpYTmNiaUFnSUNvZ1FIQmhjbUZ0SUh0bWRXNWpkR2x2YmlobGRtVnVkRG9nVFhOblJYWmxiblFwZlNCallXeHNZbUZqYTF4dUlDQWdLaTljYmlBZ2IyNVNaWE53YjI1elpTaGpZV3hzWW1GamF5a2dlMXh1SUNBZ0lIUm9hWE11WDI5dVVtVnpjRzl1YzJWSVlXNWtiR1Z5SUQwZ1kyRnNiR0poWTJzN1hHNGdJSDFjYmx4dUlDQXZMMFpNVDFjdFNVNDZJRzFsYzNOaFoyVWdjbVZqWldsMlpXUWdabkp2YlNCaElISmxiVzkwWlNCRVlYUmhUMkpxWldOMElDMCtJRjl2YmtOb2FXeGtRM0psWVhSbFhHNGdJRjl2YmxKbGMzQnZibk5sS0cxelp5a2dlMXh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hHNWNiaUFnSUNCc1pYUWdaWFpsYm5RZ1BTQjdYRzRnSUNBZ0lDQjBlWEJsT2lCdGMyY3VkSGx3WlN4Y2JpQWdJQ0FnSUhWeWJEb2diWE5uTG1KdlpIa3VjMjkxY21ObExGeHVJQ0FnSUNBZ1kyOWtaVG9nYlhObkxtSnZaSGt1WTI5a1pWeHVJQ0FnSUgwN1hHNWNiaUFnSUNCcFppQW9YM1JvYVhNdVgyOXVVbVZ6Y0c5dWMyVklZVzVrYkdWeUtTQjdYRzRnSUNBZ0lDQmZkR2hwY3k1ZmIyNVNaWE53YjI1elpVaGhibVJzWlhJb1pYWmxiblFwTzF4dUlDQWdJSDFjYmlBZ2ZWeHVYRzU5WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUVSaGRHRlBZbXBsWTNSRGFHbHNaRHRjYmx4dVhHNWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNJQzh2WEc0dkx5QXVMM055WXk5emVXNWphR1Z5TDBSaGRHRlBZbXBsWTNSRGFHbHNaQzVxY3lJc0ltbHRjRzl5ZENBbmNISnZlSGt0YjJKelpYSjJaU2M3WEc1Y2JpOHFLbHh1SUNvZ1FHRmpZMlZ6Y3lCd2NtbDJZWFJsWEc0Z0tpQk5ZV2x1SUdOc1lYTnpJSFJvWVhRZ2JXRnBiblJoYVc1eklHRWdTbE5QVGlCdlltcGxZM1FzSUdGdVpDQnZZbk5sY25abGN5QmphR0Z1WjJWeklHbHVJSFJvYVhNZ2IySnFaV04wTENCeVpXTjFjbk5wZG1Wc2VTNWNiaUFxSUVsdWRHVnlibUZzSUc5aWFtVmpkSE1nWVc1a0lHRnljbUY1Y3lCaGNtVWdZV3h6YnlCdlluTmxjblpsWkM1Y2JpQXFMMXh1WTJ4aGMzTWdVM2x1WTA5aWFtVmpkQ0I3WEc1Y2JpQWdZMjl1YzNSeWRXTjBiM0lvYVc1cGRHbGhiRVJoZEdFcElIdGNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4dVhHNGdJQ0FnWDNSb2FYTXVYMjlpYzJWeWRtVnljeUE5SUZ0ZE8xeHVJQ0FnSUY5MGFHbHpMbDltYVd4MFpYSnpJRDBnZTMwN1hHNWNiaUFnSUNCMGFHbHpMbDlrWVhSaElEMGdhVzVwZEdsaGJFUmhkR0VnZkh3Z2UzMDdYRzVjYmlBZ0lDQjBhR2x6TGw5cGJuUmxjbTVoYkU5aWMyVnlkbVVvZEdocGN5NWZaR0YwWVNrN1hHNGdJSDFjYmx4dUlDQm5aWFFnWkdGMFlTZ3BJSHNnY21WMGRYSnVJSFJvYVhNdVgyUmhkR0U3SUgxY2JseHVJQ0J2WW5ObGNuWmxLR05oYkd4aVlXTnJLU0I3WEc0Z0lDQWdkR2hwY3k1ZmIySnpaWEoyWlhKekxuQjFjMmdvWTJGc2JHSmhZMnNwTzF4dUlDQjlYRzVjYmlBZ1ptbHVaQ2h3WVhSb0tTQjdYRzRnSUNBZ2JHVjBJR3hwYzNRZ1BTQndZWFJvTG5Od2JHbDBLQ2N1SnlrN1hHNWNiaUFnSUNCeVpYUjFjbTRnZEdocGN5NWZabWx1WkZkcGRHaFRjR3hwZENoc2FYTjBLVHRjYmlBZ2ZWeHVYRzRnSUdacGJtUkNaV1p2Y21Vb2NHRjBhQ2tnZTF4dUlDQWdJR3hsZENCeVpYTjFiSFFnUFNCN2ZUdGNiaUFnSUNCc1pYUWdiR2x6ZENBOUlIQmhkR2d1YzNCc2FYUW9KeTRuS1R0Y2JpQWdJQ0J5WlhOMWJIUXViR0Z6ZENBOUlHeHBjM1F1Y0c5d0tDazdYRzRnSUNBZ2NtVnpkV3gwTG05aWFpQTlJSFJvYVhNdVgyWnBibVJYYVhSb1UzQnNhWFFvYkdsemRDazdYRzVjYmlBZ0lDQnlaWFIxY200Z2NtVnpkV3gwTzF4dUlDQjlYRzVjYmlBZ1gyWnBibVJYYVhSb1UzQnNhWFFvYkdsemRDa2dlMXh1SUNBZ0lHeGxkQ0J2WW1vZ1BTQjBhR2x6TGw5a1lYUmhPMXh1SUNBZ0lHeHBjM1F1Wm05eVJXRmphQ2dvZG1Gc2RXVXBJRDArSUh0Y2JpQWdJQ0FnSUc5aWFpQTlJRzlpYWx0MllXeDFaVjA3WEc0Z0lDQWdmU2s3WEc1Y2JpQWdJQ0J5WlhSMWNtNGdiMkpxTzF4dUlDQjlYRzVjYmlBZ1gybHpUMkp6WlhKMllXSnNaU2h2WW1vcElIdGNiaUFnSUNCcFppQW9iMkpxTG1OdmJuTjBjblZqZEc5eUlEMDlQU0JQWW1wbFkzUWdmSHdnYjJKcUxtTnZibk4wY25WamRHOXlJRDA5UFNCQmNuSmhlU2tnZTF4dUlDQWdJQ0FnY21WMGRYSnVJSFJ5ZFdVN1hHNGdJQ0FnZlZ4dVhHNGdJQ0FnY21WMGRYSnVJR1poYkhObE8xeHVJQ0I5WEc1Y2JseHVJQ0JmYVc1MFpYSnVZV3hQWW5ObGNuWmxLRzlpYW1WamRDa2dlMXh1WEc0Z0lDQWdiR1YwSUdoaGJtUnNaWElnUFNBb1kyaGhibWRsYzJWMEtTQTlQaUI3WEc1Y2JpQWdJQ0FnSUdOb1lXNW5aWE5sZEM1bWIzSkZZV05vS0NoamFHRnVaMlVwSUQwK0lIdGNiaUFnSUNBZ0lDQWdhV1lnS0dOb1lXNW5aUzV1WlhkV1lXeDFaU0FtSmlCamFHRnVaMlV1Ym1WM1ZtRnNkV1VnYVc1emRHRnVZMlZ2WmlCUFltcGxZM1FwSUh0Y2JpQWdJQ0FnSUNBZ0lDQnBaaUFvWTJoaGJtZGxMbTVsZDFaaGJIVmxJR2x1YzNSaGJtTmxiMllnVDJKcVpXTjBLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQnNaWFFnYnlBOUlFOWlhbVZqZEM1a1pXVndUMkp6WlhKMlpTaGphR0Z1WjJVdWJtVjNWbUZzZFdVc0lHaGhibVJzWlhJcE8xeHVJQ0FnSUNBZ0lDQWdJQ0FnYjJKcVpXTjBXMk5vWVc1blpTNXJaWGx3WVhSb1hTQTlJRzg3WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVYRzRnSUNBZ0lDQWdJQ0FnYVdZZ0tHTm9ZVzVuWlM1dVpYZFdZV3gxWlNCcGJuTjBZVzVqWlc5bUlFRnljbUY1S1NCN1hHNGdJQ0FnSUNBZ0lDQWdJQ0JzWlhRZ2J5QTlJRUZ5Y21GNUxtOWljMlZ5ZG1Vb1kyaGhibWRsTG01bGQxWmhiSFZsTENCb1lXNWtiR1Z5S1R0Y2JpQWdJQ0FnSUNBZ0lDQWdJRzlpYW1WamRGdGphR0Z1WjJVdWEyVjVjR0YwYUYwZ1BTQnZPMXh1SUNBZ0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ2ZTazdYRzVjYmlBZ0lDQWdJR05vWVc1blpYTmxkQzVsZG1WeWVTZ29ZMmhoYm1kbEtTQTlQaUI3WEc0Z0lDQWdJQ0FnSUhSb2FYTXVYMjl1UTJoaGJtZGxjeWhqYUdGdVoyVXBPMXh1SUNBZ0lDQWdmU2s3WEc1Y2JpQWdJQ0I5TzF4dVhHNGdJQ0FnZEdocGN5NWZaR0YwWVNBOUlFOWlhbVZqZEM1a1pXVndUMkp6WlhKMlpTaHZZbXBsWTNRc0lHaGhibVJzWlhJcE8xeHVYRzRnSUgxY2JseHVJQ0JmWm1seVpVVjJaVzUwS0dWMlpXNTBLU0I3WEc0Z0lDQWdkR2hwY3k1ZmIySnpaWEoyWlhKekxtWnZja1ZoWTJnb0tHTmhiR3hpWVdOcktTQTlQaUI3WEc0Z0lDQWdJQ0JqWVd4c1ltRmpheWhsZG1WdWRDazdYRzRnSUNBZ2ZTazdYRzRnSUgxY2JseHVJQ0JmYjI1RGFHRnVaMlZ6S0dOb1lXNW5aU2tnZTF4dVhHNGdJQ0FnYkdWMElHOWlhaUE5SUdOb1lXNW5aUzV2WW1wbFkzUTdYRzRnSUNBZ2JHVjBJRzlpYWxSNWNHVTdYRzVjYmlBZ0lDQnBaaUFvYjJKcUxtTnZibk4wY25WamRHOXlJRDA5UFNCUFltcGxZM1FwSUh0Y2JpQWdJQ0FnSUc5aWFsUjVjR1VnUFNCUFltcGxZM1JVZVhCbExrOUNTa1ZEVkR0Y2JpQWdJQ0I5WEc1Y2JpQWdJQ0JwWmlBb2IySnFMbU52Ym5OMGNuVmpkRzl5SUQwOVBTQkJjbkpoZVNrZ2UxeHVJQ0FnSUNBZ2IySnFWSGx3WlNBOUlFOWlhbVZqZEZSNWNHVXVRVkpTUVZrN1hHNGdJQ0FnZlZ4dVhHNGdJQ0FnYkdWMElHWnBaV3hrVTNSeWFXNW5JRDBnWTJoaGJtZGxMbXRsZVhCaGRHZzdYRzVjYmlBZ0lDQXZMeUJqYjI1emIyeGxMbXh2WnlnblJtbGxiR1E2Snl3Z1ptbGxiR1JUZEhKcGJtY3BPMXh1SUNBZ0lDOHZJR052Ym5OdmJHVXViRzluS0NkMGVYQmxPaWNzSUdOb1lXNW5aUzUwZVhCbEtUdGNibHh1SUNBZ0lDOHZiR1YwSUc5c1pGWmhiSFZsSUQwZ1kyaGhibWRsTG05c1pGWmhiSFZsTzF4dUlDQWdJR3hsZENCdVpYZFdZV3gxWlNBOUlHOWlhbHRqYUdGdVoyVXVibUZ0WlYwN1hHNWNiaUFnSUNCamIyNXpiMnhsTG1sdVptOG9ZMmhoYm1kbExuUjVjR1VnS3lBbklId2dSbWxsYkdRNklDY2dLeUJtYVdWc1pGTjBjbWx1WnlBcklDY2dmQ0JPWlhjZ1ZtRnNkV1U2Snl3Z1NsTlBUaTV6ZEhKcGJtZHBabmtvYm1WM1ZtRnNkV1VwS1R0Y2JseHVJQ0FnSUdsbUlDaGphR0Z1WjJVdWRIbHdaU0E5UFQwZ0ozVndaR0YwWlNjcElIdGNiaUFnSUNBZ0lIUm9hWE11WDJacGNtVkZkbVZ1ZENoN1hHNGdJQ0FnSUNBZ0lHTlVlWEJsT2lCRGFHRnVaMlZVZVhCbExsVlFSRUZVUlN4Y2JpQWdJQ0FnSUNBZ2IxUjVjR1U2SUc5aWFsUjVjR1VzWEc0Z0lDQWdJQ0FnSUdacFpXeGtPaUJtYVdWc1pGTjBjbWx1Wnl4Y2JpQWdJQ0FnSUNBZ1pHRjBZVG9nYm1WM1ZtRnNkV1ZjYmlBZ0lDQWdJSDBwTzF4dUlDQWdJSDFjYmx4dUlDQWdJR2xtSUNoamFHRnVaMlV1ZEhsd1pTQTlQVDBnSjJGa1pDY3BJSHRjYmlBZ0lDQWdJSFJvYVhNdVgyWnBjbVZGZG1WdWRDaDdYRzRnSUNBZ0lDQWdJR05VZVhCbE9pQkRhR0Z1WjJWVWVYQmxMa0ZFUkN4Y2JpQWdJQ0FnSUNBZ2IxUjVjR1U2SUc5aWFsUjVjR1VzWEc0Z0lDQWdJQ0FnSUdacFpXeGtPaUJtYVdWc1pGTjBjbWx1Wnl4Y2JpQWdJQ0FnSUNBZ1pHRjBZVG9nYm1WM1ZtRnNkV1ZjYmlBZ0lDQWdJSDBwTzF4dUlDQWdJSDFjYmx4dUlDQWdJR2xtSUNoamFHRnVaMlV1ZEhsd1pTQTlQVDBnSjJSbGJHVjBaU2NwSUh0Y2JpQWdJQ0FnSUhSb2FYTXVYMlpwY21WRmRtVnVkQ2g3WEc0Z0lDQWdJQ0FnSUdOVWVYQmxPaUJEYUdGdVoyVlVlWEJsTGxKRlRVOVdSU3hjYmlBZ0lDQWdJQ0FnYjFSNWNHVTZJRzlpYWxSNWNHVXNYRzRnSUNBZ0lDQWdJR1pwWld4a09pQm1hV1ZzWkZOMGNtbHVaMXh1SUNBZ0lDQWdmU2s3WEc0Z0lDQWdmVnh1SUNCOVhHNWNibjFjYmx4dVpYaHdiM0owSUd4bGRDQkRhR0Z1WjJWVWVYQmxJRDBnZTFWUVJFRlVSVG9nSjNWd1pHRjBaU2NzSUVGRVJEb2dKMkZrWkNjc0lGSkZUVTlXUlRvZ0ozSmxiVzkyWlNkOU8xeHVaWGh3YjNKMElHeGxkQ0JQWW1wbFkzUlVlWEJsSUQwZ2UwOUNTa1ZEVkRvZ0oyOWlhbVZqZENjc0lFRlNVa0ZaT2lBbllYSnlZWGtuZlR0Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUZONWJtTlBZbXBsWTNRN1hHNWNibHh1WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWlBdkwxeHVMeThnTGk5emNtTXZjM2x1WTJobGNpOVFjbTk0ZVU5aWFtVmpkQzVxY3lJc0lsd2lkWE5sSUhOMGNtbGpkRndpTzF4dVhHNWxlSEJ2Y25SekxsOWZaWE5OYjJSMWJHVWdQU0IwY25WbE8xeHVYRzUyWVhJZ1gyZGxkRkJ5YjNSdmRIbHdaVTltSUQwZ2NtVnhkV2x5WlNoY0lpNHVMMk52Y21VdGFuTXZiMkpxWldOMEwyZGxkQzF3Y205MGIzUjVjR1V0YjJaY0lpazdYRzVjYm5aaGNpQmZaMlYwVUhKdmRHOTBlWEJsVDJZeUlEMGdYMmx1ZEdWeWIzQlNaWEYxYVhKbFJHVm1ZWFZzZENoZloyVjBVSEp2ZEc5MGVYQmxUMllwTzF4dVhHNTJZWElnWDJkbGRFOTNibEJ5YjNCbGNuUjVSR1Z6WTNKcGNIUnZjaUE5SUhKbGNYVnBjbVVvWENJdUxpOWpiM0psTFdwekwyOWlhbVZqZEM5blpYUXRiM2R1TFhCeWIzQmxjblI1TFdSbGMyTnlhWEIwYjNKY0lpazdYRzVjYm5aaGNpQmZaMlYwVDNkdVVISnZjR1Z5ZEhsRVpYTmpjbWx3ZEc5eU1pQTlJRjlwYm5SbGNtOXdVbVZ4ZFdseVpVUmxabUYxYkhRb1gyZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2lrN1hHNWNibVoxYm1OMGFXOXVJRjlwYm5SbGNtOXdVbVZ4ZFdseVpVUmxabUYxYkhRb2IySnFLU0I3SUhKbGRIVnliaUJ2WW1vZ0ppWWdiMkpxTGw5ZlpYTk5iMlIxYkdVZ1B5QnZZbW9nT2lCN0lHUmxabUYxYkhRNklHOWlhaUI5T3lCOVhHNWNibVY0Y0c5eWRITXVaR1ZtWVhWc2RDQTlJR1oxYm1OMGFXOXVJR2RsZENodlltcGxZM1FzSUhCeWIzQmxjblI1TENCeVpXTmxhWFpsY2lrZ2UxeHVJQ0JwWmlBb2IySnFaV04wSUQwOVBTQnVkV3hzS1NCdlltcGxZM1FnUFNCR2RXNWpkR2x2Ymk1d2NtOTBiM1I1Y0dVN1hHNGdJSFpoY2lCa1pYTmpJRDBnS0RBc0lGOW5aWFJQZDI1UWNtOXdaWEowZVVSbGMyTnlhWEIwYjNJeUxtUmxabUYxYkhRcEtHOWlhbVZqZEN3Z2NISnZjR1Z5ZEhrcE8xeHVYRzRnSUdsbUlDaGtaWE5qSUQwOVBTQjFibVJsWm1sdVpXUXBJSHRjYmlBZ0lDQjJZWElnY0dGeVpXNTBJRDBnS0RBc0lGOW5aWFJRY205MGIzUjVjR1ZQWmpJdVpHVm1ZWFZzZENrb2IySnFaV04wS1R0Y2JseHVJQ0FnSUdsbUlDaHdZWEpsYm5RZ1BUMDlJRzUxYkd3cElIdGNiaUFnSUNBZ0lISmxkSFZ5YmlCMWJtUmxabWx1WldRN1hHNGdJQ0FnZlNCbGJITmxJSHRjYmlBZ0lDQWdJSEpsZEhWeWJpQm5aWFFvY0dGeVpXNTBMQ0J3Y205d1pYSjBlU3dnY21WalpXbDJaWElwTzF4dUlDQWdJSDFjYmlBZ2ZTQmxiSE5sSUdsbUlDaGNJblpoYkhWbFhDSWdhVzRnWkdWell5a2dlMXh1SUNBZ0lISmxkSFZ5YmlCa1pYTmpMblpoYkhWbE8xeHVJQ0I5SUdWc2MyVWdlMXh1SUNBZ0lIWmhjaUJuWlhSMFpYSWdQU0JrWlhOakxtZGxkRHRjYmx4dUlDQWdJR2xtSUNoblpYUjBaWElnUFQwOUlIVnVaR1ZtYVc1bFpDa2dlMXh1SUNBZ0lDQWdjbVYwZFhKdUlIVnVaR1ZtYVc1bFpEdGNiaUFnSUNCOVhHNWNiaUFnSUNCeVpYUjFjbTRnWjJWMGRHVnlMbU5oYkd3b2NtVmpaV2wyWlhJcE8xeHVJQ0I5WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMmhsYkhCbGNuTXZaMlYwTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeE1qTmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SWl3aUx5b3FYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRkJVSUVsdWIzWmh3NmZEbzI4Z1pTQlRhWE4wWlcxaGN5QlRRVnh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJKVGtWVFF5MUpSRnh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJSVlU5Q1NWTWdUa1ZVVjA5U1MxTWdVMHhjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnUmxKQlZVNUlUMFpGVWkxSFJWTkZURXhUUTBoQlJsUWdXbFZTSUVaUFJWSkVSVkpWVGtjZ1JFVlNJRUZPUjBWWFFVNUVWRVZPSUVaUFVsTkRTRlZPUnlCRkxsWmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdUMUpCVGtkRklGTkJYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRVJsZFhSelkyaGxJRlJsYkdWcmIyMGdRVWRjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnUVhCcGVtVmxYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRlJGUTBoT1NWTkRTRVVnVlU1SlZrVlNVMGxVUVZRZ1FrVlNURWxPWEc0cVhHNHFJRXhwWTJWdWMyVmtJSFZ1WkdWeUlIUm9aU0JCY0dGamFHVWdUR2xqWlc1elpTd2dWbVZ5YzJsdmJpQXlMakFnS0hSb1pTQmNJa3hwWTJWdWMyVmNJaWs3WEc0cUlIbHZkU0J0WVhrZ2JtOTBJSFZ6WlNCMGFHbHpJR1pwYkdVZ1pYaGpaWEIwSUdsdUlHTnZiWEJzYVdGdVkyVWdkMmwwYUNCMGFHVWdUR2xqWlc1elpTNWNiaW9nV1c5MUlHMWhlU0J2WW5SaGFXNGdZU0JqYjNCNUlHOW1JSFJvWlNCTWFXTmxibk5sSUdGMFhHNHFYRzRxSUNBZ2FIUjBjRG92TDNkM2R5NWhjR0ZqYUdVdWIzSm5MMnhwWTJWdWMyVnpMMHhKUTBWT1UwVXRNaTR3WEc0cVhHNHFJRlZ1YkdWemN5QnlaWEYxYVhKbFpDQmllU0JoY0hCc2FXTmhZbXhsSUd4aGR5QnZjaUJoWjNKbFpXUWdkRzhnYVc0Z2QzSnBkR2x1Wnl3Z2MyOW1kSGRoY21WY2Jpb2daR2x6ZEhKcFluVjBaV1FnZFc1a1pYSWdkR2hsSUV4cFkyVnVjMlVnYVhNZ1pHbHpkSEpwWW5WMFpXUWdiMjRnWVc0Z1hDSkJVeUJKVTF3aUlFSkJVMGxUTEZ4dUtpQlhTVlJJVDFWVUlGZEJVbEpCVGxSSlJWTWdUMUlnUTA5T1JFbFVTVTlPVXlCUFJpQkJUbGtnUzBsT1JDd2daV2wwYUdWeUlHVjRjSEpsYzNNZ2IzSWdhVzF3YkdsbFpDNWNiaW9nVTJWbElIUm9aU0JNYVdObGJuTmxJR1p2Y2lCMGFHVWdjM0JsWTJsbWFXTWdiR0Z1WjNWaFoyVWdaMjkyWlhKdWFXNW5JSEJsY20xcGMzTnBiMjV6SUdGdVpGeHVLaUJzYVcxcGRHRjBhVzl1Y3lCMWJtUmxjaUIwYUdVZ1RHbGpaVzV6WlM1Y2Jpb3FMMXh1WEc1cGJYQnZjblFnUkdGMFlVOWlhbVZqZEZKbGNHOXlkR1Z5SUdaeWIyMGdKeTR2UkdGMFlVOWlhbVZqZEZKbGNHOXlkR1Z5Snp0Y2JtbHRjRzl5ZENCRVlYUmhUMkpxWldOMFQySnpaWEoyWlhJZ1puSnZiU0FuTGk5RVlYUmhUMkpxWldOMFQySnpaWEoyWlhJbk8xeHVhVzF3YjNKMElFUmhkR0ZRY205MmFYTnBiMjVoYkNCbWNtOXRJQ2N1TDBSaGRHRlFjbTkyYVhOcGIyNWhiQ2M3WEc1Y2JpOHFLbHh1S2lCVWFHVWdiV0ZwYmlCamJHRnpjeUJtYjNJZ2RHaGxJSE41Ym1Ob1pYSWdjR0ZqYTJGblpTNWNiaW9nVkdobElGTjVibU5vWlhJZ2FYTWdZU0J6YVc1bmJHVjBiMjRnWTJ4aGMzTWdjR1Z5SUVoNWNHVnlkSGt2VlZKTUlHRnVaQ0JwZENCcGN5QjBhR1VnYjNkdVpYSWdiMllnWVd4c0lHTnlaV0YwWldRZ1JHRjBZU0JUZVc1aklFOWlhbVZqZEhNZ1lXTmpiM0prYVc1bklIUnZJSFJvWlNCU1pYQnZjblJsY2lBdElFOWljMlZ5ZG1WeUlIQmhkSFJsY200dVhHNHFJRTFoYVc0Z1puVnVZM1JwYjI1aGJHbDBlU0JwY3lCMGJ5QmpjbVZoZEdVZ2NtVndiM0owWlhKeklHRnVaQ0IwYnlCemRXSnpZM0pwWW1VZ2RHOGdaWGhwYzNScGJtY2diMjVsY3k1Y2Jpb3ZYRzVqYkdGemN5QlRlVzVqYUdWeUlIdGNiaUFnTHlvZ2NISnBkbUYwWlZ4dUlDQmZiM2R1WlhJNklGVlNURnh1SUNCZlluVnpPaUJOYVc1cFFuVnpYRzVjYmlBZ1gzTjFZbFZTVERvZ1ZWSk1YRzVjYmlBZ1gzSmxjRzl5ZEdWeWN6b2dQSFZ5YkRvZ1JHRjBZVTlpYW1WamRGSmxjRzl5ZEdWeVBseHVJQ0JmYjJKelpYSjJaWEp6T2lBOGRYSnNPaUJFWVhSaFQySnFaV04wVDJKelpYSjJaWEkrWEc0Z0lGOXdjbTkyYVhOcGIyNWhiSE02SUR4MWNtdzZJRVJoZEdGUWNtOTJhWE5wYjI1aGJENWNibHh1SUNBdExTMHRaWFpsYm5RZ2FHRnVaR3hsY25NdExTMHRYRzRnSUY5dmJrNXZkR2xtYVdOaGRHbHZia2hoYm1Sc1pYSTZJQ2hsZG1WdWRDa2dQVDRnZG05cFpGeHVJQ0JmYjI1U1pYTjFiV1U2SUNobGRtVnVkQ2tnUFQ0Z2RtOXBaRnh1SUNBcUwxeHVYRzRnSUM4cUtseHVJQ0FxSUVOdmJuTjBjblZqZEc5eUlIUm9ZWFFnYzJodmRXeGtJR0psSUhWelpXUWdZbmtnZEdobElFaDVjR1Z5ZEhrZ2IzZHVaWEpjYmlBZ0tpQkFjR0Z5WVcwZ2UwaDVjR1Z5ZEhsVlVreDlJRzkzYm1WeUlDMGdTSGx3WlhKMGVTQlZVa3dnYjNkdVpYSXVJRUZ1SUZWU1RDQmhiR3h2WTJGMFpXUWdZbmtnZEdobElISjFiblJwYldVZ2RHaGhkQ0IxYm1seGRXVnNlU0JwWkdWdWRHbG1hV1Z6SUhSb1pTQkllWEJsY25SNUxseHVJQ0FxSUVCd1lYSmhiU0I3VFdsdWFVSjFjMzBnWW5WeklDMGdRVzRnYVc1emRHRnVZMlVnYjJZZ2RHaGxJRTFwYm1sQ2RYTWdjSEp2ZG1sa1pXUWdhVzRnZEdobElITmhibVJpYjNndUlGZG9aVzRnWVc0Z2IySnFaV04wSUNoU1pYQnZjblJsY2lCdmNpQlBZbk5sY25abFpDa2dhWE1nWTNKbFlYUmxaQ3dnZEdobElGTjVibU5vWlhKTllXNWhaMlZ5SUhkcGJHd2dZV1JrSUdFZ2JHbHpkR1Z1WlhJZ2FXNGdkR2hsSUUxcGJtbENkWE1nZEc4Z2NtVmpaV2wyWlM5elpXNWtJRTFsYzNOaFoyVnpJRzltSUhSb1lYUWdiMkpxWldOMExseHVJQ0FxSUVCd1lYSmhiU0I3U2xOUFRuMGdZMjl1Wm1sbklDMGdRMjl1Wm1sbmRYSmhkR2x2YmlCa1lYUmhMaUJVYUdVZ2IyNXNlU0J5WlhGMWFYSmxaQ0JtYVdWc1pDQm1iM0lnYm05M0lHbHpJSFJvWlNCeWRXNTBhVzFsVlZKTUxseHVJQ0FxTDF4dUlDQmpiMjV6ZEhKMVkzUnZjaWh2ZDI1bGNpd2dZblZ6TENCamIyNW1hV2NwSUh0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1WEc0Z0lDQWdYM1JvYVhNdVgyOTNibVZ5SUQwZ2IzZHVaWEk3WEc0Z0lDQWdYM1JvYVhNdVgySjFjeUE5SUdKMWN6dGNibHh1SUNBZ0lGOTBhR2x6TGw5emRXSlZVa3dnUFNCamIyNW1hV2N1Y25WdWRHbHRaVlZTVENBcklDY3ZjMjBuTzF4dVhHNGdJQ0FnWDNSb2FYTXVYM0psY0c5eWRHVnljeUE5SUh0OU8xeHVJQ0FnSUY5MGFHbHpMbDl2WW5ObGNuWmxjbk1nUFNCN2ZUdGNiaUFnSUNCZmRHaHBjeTVmY0hKdmRtbHphVzl1WVd4eklEMGdlMzA3WEc1Y2JpQWdJQ0JpZFhNdVlXUmtUR2x6ZEdWdVpYSW9iM2R1WlhJc0lDaHRjMmNwSUQwK0lIdGNiaUFnSUNBZ0lDOHZhV2R1YjNKbElHMXpaeUJ6Wlc1MElHSjVJR2hwYlhObGJHWmNiaUFnSUNBZ0lHbG1JQ2h0YzJjdVpuSnZiU0FoUFQwZ2IzZHVaWElwSUh0Y2JpQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1cGJtWnZLQ2RiVTNsdVkyaGxjbDBnVTNsdVkyaGxjaTFTUTFZNklDY3NJRzF6WnlrN1hHNGdJQ0FnSUNBZ0lITjNhWFJqYUNBb2JYTm5MblI1Y0dVcElIdGNiaUFnSUNBZ0lDQWdJQ0JqWVhObElDZG1iM0ozWVhKa0p6b2dYM1JvYVhNdVgyOXVSbTl5ZDJGeVpDaHRjMmNwT3lCaWNtVmhhenRjYmlBZ0lDQWdJQ0FnSUNCallYTmxJQ2RqY21WaGRHVW5PaUJmZEdocGN5NWZiMjVTWlcxdmRHVkRjbVZoZEdVb2JYTm5LVHNnWW5KbFlXczdYRzRnSUNBZ0lDQWdJQ0FnWTJGelpTQW5aR1ZzWlhSbEp6b2dYM1JvYVhNdVgyOXVVbVZ0YjNSbFJHVnNaWFJsS0cxelp5azdJR0p5WldGck8xeHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZTazdYRzRnSUgxY2JseHVJQ0F2S2lwY2JpQWdLaUJVYUdVZ2IzZHVaWElnYjJZZ2RHaGxJRk41Ym1Ob1pYSWdZVzVrSUdGc2JDQmpjbVZoZEdWa0lISmxjRzl5ZEdWeWN5NWNiaUFnS2lCQWRIbHdaU0I3U0hsd1pYSjBlVlZTVEgxY2JpQWdLaTljYmlBZ1oyVjBJRzkzYm1WeUtDa2dleUJ5WlhSMWNtNGdkR2hwY3k1ZmIzZHVaWEk3SUgxY2JseHVJQ0F2S2lwY2JpQWdLaUJCYkd3Z2IzZHVaV1FnY21Wd2IzSjBaWEp6TENCMGFHVWdiMjVsY3lCMGFHRjBJSGRsY21VZ1kzSmxZWFJsWkNCaWVTQmhJR055WldGMFpWeHVJQ0FxSUVCMGVYQmxJSHRQWW1wbFkzUThWVkpNTENCRVlYUmhUMkpxWldOMFVtVndiM0owWlhJK2ZWeHVJQ0FxTDF4dUlDQm5aWFFnY21Wd2IzSjBaWEp6S0NrZ2V5QnlaWFIxY200Z2RHaHBjeTVmY21Wd2IzSjBaWEp6T3lCOVhHNWNiaUFnTHlvcVhHNGdJQ29nUVd4c0lHOTNibVZrSUc5aWMyVnlkbVZ5Y3l3Z2RHaGxJRzl1WlhNZ2RHaGhkQ0IzWlhKbElHTnlaV0YwWldRZ1lua2dZU0JzYjJOaGJDQnpkV0p6WTNKcGNIUnBiMjVjYmlBZ0tpQkFkSGx3WlNCN1QySnFaV04wUEZWU1RDd2dSR0YwWVU5aWFtVmpkRTlpYzJWeWRtVnlQbjFjYmlBZ0tpOWNiaUFnWjJWMElHOWljMlZ5ZG1WeWN5Z3BJSHNnY21WMGRYSnVJSFJvYVhNdVgyOWljMlZ5ZG1WeWN6c2dmVnh1WEc0Z0lDOHFLbHh1SUNBcUlGSmxjWFZsYzNRZ1lTQkVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSWdZM0psWVhScGIyNHVJRlJvWlNCVlVrd2dkMmxzYkNCaVpTQmlaU0J5WlhGMVpYTjBaV1FnWW5rZ2RHaGxJR0ZzYkc5allYUnBiMjRnYldWamFHRnVhWE50TGx4dUlDQXFJRUJ3WVhKaGJTQWdlMU5qYUdWdFlWVlNUSDBnYzJOb1pXMWhJQzBnU0hsd1pYSjBlU0JEWVhSaGJHOW5kV1VnVlZKTUlHRmtaSEpsYzNNZ2RHaGhkQ0JqWVc0Z1ltVWdkWE5sWkNCMGJ5QnlaWFJ5YVdWMlpTQjBhR1VnU2xOUFRpMVRZMmhsYldFZ1pHVnpZM0pwWW1sdVp5QjBhR1VnUkdGMFlTQlBZbXBsWTNRZ2MyTm9aVzFoWEc0Z0lDb2dRSEJoY21GdElDQjdTSGx3WlhKMGVWVlNURnRkZlNCdlluTmxjblpsY25NZ0xTQk1hWE4wSUc5bUlHaDVjR1Z5ZEdsbGN5QjBhR0YwSUdGeVpTQndjbVV0WVhWMGFHOXlhWHBsWkNCbWIzSWdjM1ZpYzJOeWFYQjBhVzl1WEc0Z0lDb2dRSEJoY21GdElDQjdTbE5QVG4wZ2FXNXBkR2xoYkVSaGRHRWdMU0JKYm1sMGFXRnNJR1JoZEdFZ2IyWWdkR2hsSUhKbGNHOXlkR1Z5WEc0Z0lDb2dRSEJoY21GdElDQjdjM1J5YVc1bmZTQnZZbXBsWTNSVlVrd2dMU0J5WlhWellXSnNaU0JrWVhSaFQySnFaV04wSUZWU1RGeHVJQ0FxSUVCeVpYUjFjbTRnZTFCeWIyMXBjMlU4UkdGMFlVOWlhbVZqZEZKbGNHOXlkR1Z5UG4wZ1VtVjBkWEp1SUZCeWIyMXBjMlVnZEc4Z1lTQnVaWGNnVW1Wd2IzSjBaWEl1SUZSb1pTQnlaWEJ2Y25SbGNpQmpZVzRnWW1VZ1lXTmpaWEIwWldRZ2IzSWdjbVZxWldOMFpXUWdZbmtnZEdobElGQkZVRnh1SUNBcUwxeHVJQ0JqY21WaGRHVW9jMk5vWlcxaExDQnZZbk5sY25abGNuTXNJR2x1YVhScFlXeEVZWFJoTENCemRHOXlaU0E5SUdaaGJITmxMQ0J3TW5BZ1BTQm1ZV3h6WlNrZ2UxeHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEc0Z0lDQWdiR1YwSUdOeWFYUmxjbWxoSUQwZ2UzMDdYRzVjYmlBZ0lDQmpjbWwwWlhKcFlTNXdNbkFnUFNCd01uQTdYRzRnSUNBZ1kzSnBkR1Z5YVdFdWMzUnZjbVVnUFNCemRHOXlaVHRjYmlBZ0lDQmpjbWwwWlhKcFlTNXpZMmhsYldFZ1BTQnpZMmhsYldFN1hHNGdJQ0FnWTNKcGRHVnlhV0V1YjJKelpYSjJaWEp6SUQwZ2IySnpaWEoyWlhKek8xeHVJQ0FnSUdOeWFYUmxjbWxoTG1sdWFYUnBZV3hFWVhSaElEMGdhVzVwZEdsaGJFUmhkR0U3WEc1Y2JpQWdJQ0JqYjI1emIyeGxMbXh2WnlnblczTjVibU5vWlhJZ0xTQmpjbVZoZEdWZElDMGdZM0psWVhSbElGSmxjRzl5ZEdWeUlDMGdZM0pwZEdWeWFXRTZJQ2NzSUdOeWFYUmxjbWxoS1R0Y2JseHVJQ0FnSUU5aWFtVmpkQzVoYzNOcFoyNG9ZM0pwZEdWeWFXRXNJSHR5WlhOMWJXVTZJR1poYkhObGZTazdYRzVjYmlBZ0lDQnlaWFIxY200Z1gzUm9hWE11WDJOeVpXRjBaU2hqY21sMFpYSnBZU2s3WEc0Z0lIMWNibHh1SUNCeVpYTjFiV1ZTWlhCdmNuUmxjbk1vWTNKcGRHVnlhV0VwSUh0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1SUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiYzNsdVkyaGxjaUF0SUdOeVpXRjBaVjBnTFNCeVpYTjFiV1VnVW1Wd2IzSjBaWElnTFNCamNtbDBaWEpwWVRvZ0p5d2dZM0pwZEdWeWFXRXBPMXh1WEc0Z0lDQWdUMkpxWldOMExtRnpjMmxuYmloamNtbDBaWEpwWVN3Z2UzSmxjM1Z0WlRvZ2RISjFaWDBwTzF4dVhHNGdJQ0FnY21WMGRYSnVJRjkwYUdsekxsOWpjbVZoZEdVb1kzSnBkR1Z5YVdFcE8xeHVJQ0I5WEc1Y2JpQWdMeW9xWEc0Z0lDb2dVbVZ4ZFdWemRDQmhJSE4xWW5OamNtbHdkR2x2YmlCMGJ5QmhiaUJsZUdsemRHVnVkQ0J5WlhCdmNuUmxjaUJ2WW1wbFkzUXVYRzRnSUNvZ1FIQmhjbUZ0SUh0VFkyaGxiV0ZWVWt4OUlITmphR1Z0WVNBdElFaDVjR1Z5ZEhrZ1EyRjBZV3h2WjNWbElGVlNUQ0JoWkdSeVpYTnpJSFJvWVhRZ1kyRnVJR0psSUhWelpXUWdkRzhnY21WMGNtbGxkbVVnZEdobElFcFRUMDR0VTJOb1pXMWhJR1JsYzJOeWFXSnBibWNnZEdobElFUmhkR0VnVDJKcVpXTjBJSE5qYUdWdFlWeHVJQ0FxSUVCd1lYSmhiU0I3VDJKcVpXTjBWVkpNZlNCdlltcFZVa3dnTFNCQlpHUnlaWE56SUc5bUlIUm9aU0JsZUdsemRHVnVkQ0J5WlhCdmNuUmxjaUJ2WW1wbFkzUWdkRzhnWW1VZ2IySnpaWEoyWldSY2JpQWdLaUJBY21WMGRYSnVJSHRRY205dGFYTmxQRVJoZEdGUFltcGxZM1JQWW5ObGNuWmxjajU5SUZKbGRIVnliaUJRY205dGFYTmxJSFJ2SUdFZ2JtVjNJRzlpYzJWeWRtVnlMaUJKZENkeklHRnpjMjlqYVdGMFpXUWdkMmwwYUNCMGFHVWdjbVZ3YjNKMFpYSXVYRzRnSUNvdlhHNGdJSE4xWW5OamNtbGlaU2h6WTJobGJXRXNJRzlpYWxWU1RDd2djM1J2Y21VZ1BTQm1ZV3h6WlN3Z2NESndJRDBnWm1Gc2MyVXBJSHRjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHVJQ0FnSUd4bGRDQmpjbWwwWlhKcFlTQTlJSHQ5TzF4dVhHNGdJQ0FnWTNKcGRHVnlhV0V1Y0RKd0lEMGdjREp3TzF4dUlDQWdJR055YVhSbGNtbGhMbk4wYjNKbElEMGdjM1J2Y21VN1hHNGdJQ0FnWTNKcGRHVnlhV0V1YzJOb1pXMWhJRDBnYzJOb1pXMWhPMXh1SUNBZ0lHTnlhWFJsY21saExuSmxjMjkxY21ObElEMGdiMkpxVlZKTU8xeHVYRzRnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMXR6ZVc1amFHVnlJQzBnYzNWaWMyTnlhV0psWFNBdElITjFZbk5qY21saVpTQmpjbWwwWlhKcFlUb2dKeXdnWTNKcGRHVnlhV0VwTzF4dVhHNGdJQ0FnVDJKcVpXTjBMbUZ6YzJsbmJpaGpjbWwwWlhKcFlTd2dlM0psYzNWdFpUb2dabUZzYzJWOUtUdGNibHh1SUNBZ0lISmxkSFZ5YmlCZmRHaHBjeTVmYzNWaWMyTnlhV0psS0dOeWFYUmxjbWxoS1R0Y2JpQWdmVnh1WEc0Z0lDOHFLbHh1SUNBcUlGSmxjWFZsYzNRZ1lTQnpkV0p6WTNKcGNIUnBiMjRnZEc4Z1lXNGdaWGhwYzNSbGJuUWdjbVZ3YjNKMFpYSWdiMkpxWldOMExseHVJQ0FxSUVCd1lYSmhiU0I3WTNKcGRHVnlhV0Y5SUdOeWFYUmxjbWxoSUMwZ1NXNW1iM0p0WVhScGIyNGdkRzhnWkdselkyOTJaWEo1SUhSb1pTQnZZbk5sY25abGNpQnZZbXBsWTNSY2JpQWdLaUJBY21WMGRYSnVJSHRRY205dGFYTmxQRVJoZEdGUFltcGxZM1JQWW5ObGNuWmxjajU5SUZKbGRIVnliaUJRY205dGFYTmxJSFJ2SUdFZ2JtVjNJRzlpYzJWeWRtVnlMaUJKZENkeklHRnpjMjlqYVdGMFpXUWdkMmwwYUNCMGFHVWdjbVZ3YjNKMFpYSXVYRzRnSUNvdlhHNGdJSEpsYzNWdFpVOWljMlZ5ZG1WeWN5aGpjbWwwWlhKcFlTa2dlMXh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hHNGdJQ0FnYkdWMElGOWpjbWwwWlhKcFlTQTlJR055YVhSbGNtbGhJSHg4SUh0OU8xeHVYRzRnSUNBZ1QySnFaV04wTG1GemMybG5iaWhmWTNKcGRHVnlhV0VzSUh0eVpYTjFiV1U2SUhSeWRXVjlLVHRjYmx4dUlDQWdJSEpsZEhWeWJpQmZkR2hwY3k1ZmMzVmljMk55YVdKbEtGOWpjbWwwWlhKcFlTazdYRzRnSUgxY2JseHVJQ0F2S2lwY2JpQWdLaUJTWlhGMVpYTjBJR0VnY21WaFpDQmhZM1JwYjI0Z2IyNGdkR2hsSUhKbGNHOXlkR1Z5SUc5aWFtVmpkRnh1SUNBcUlFQndZWEpoYlNCN1QySnFaV04wVlZKTWZTQnZZbXBWVWt3Z0xTQlZVa3dnYjJZZ2RHaGxJSEpsY0c5eWRHVnlJRzlpYW1WamRDQjBieUJpWlNCeVpXRmtYRzRnSUNvZ1FISmxkSFZ5YmlCN1VISnZiV2x6WlR4UFltcGxZM1ErZlNCU1pYUjFjbTRnVUhKdmJXbHpaU0IwYnlCc1lYTjBJR0YyWVdsc1lXSnNaU0JrWVhSaElHOW1JSFJvWlNCeVpYQnZjblJsY2x4dUlDQXFMMXh1SUNCeVpXRmtLRzlpYWxWU1RDa2dlMXh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hHNWNiaUFnSUNBdkwwWk1UMWN0VDFWVU9pQjBhR2x6SUcxbGMzTmhaMlVnZDJsc2JDQmlaU0J6Wlc1MElHUnBjbVZqZEd4NUlIUnZJSEpsY0c5eWRHVnlJRzlpYW1WamRDQW9iV0Y1WW1VZ2RHaGxjbVVnYVhNZ2JtOGdiR2x6ZEdWdVpYSWdZWFpoYVd4aFlteGxMQ0J6YnlCcGRDQjNhV3hzSUdKbElISmxjMjlzZG1Wa0lIZHBkR2dnVFdWemMyRm5aVUoxY3lBdFBpQnlaWE52YkhabEtWeHVJQ0FnSUM4dmQybHNiQ0J5WldGamFDQjBhR1VnY21WdGIzUmxJRzlpYW1WamRDQnBiaUJFWVhSaFQySnFaV04wVW1Wd2IzSjBaWElnTFQ0Z1gyOXVVbVZoWkZ4dUlDQWdJR3hsZENCeVpXRmtUWE5uSUQwZ2UxeHVJQ0FnSUNBZ2RIbHdaVG9nSjNKbFlXUW5MQ0JtY205dE9pQmZkR2hwY3k1ZmIzZHVaWElzSUhSdk9pQnZZbXBWVWt4Y2JpQWdJQ0I5TzF4dVhHNGdJQ0FnY21WMGRYSnVJRzVsZHlCUWNtOXRhWE5sS0NoeVpYTnZiSFpsTENCeVpXcGxZM1FwSUQwK0lIdGNiaUFnSUNBZ0lGOTBhR2x6TGw5aWRYTXVjRzl6ZEUxbGMzTmhaMlVvY21WaFpFMXpaeXdnS0hKbGNHeDVLU0E5UGlCN1hHNGdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2R5WldGa0xYSmxjM0J2Ym5ObE9pQW5MQ0J5WlhCc2VTazdYRzRnSUNBZ0lDQWdJR2xtSUNoeVpYQnNlUzVpYjJSNUxtTnZaR1VnUFQwOUlESXdNQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lISmxjMjlzZG1Vb2NtVndiSGt1WW05a2VTNTJZV3gxWlNrN1hHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNBZ0lDQWdjbVZxWldOMEtISmxjR3g1TG1KdlpIa3VaR1Z6WXlrN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMHBPMXh1SUNBZ0lIMHBPMXh1SUNCOVhHNWNiaUFnTHlvcVhHNGdJQ29nVTJWMGRYQWdkR2hsSUdOaGJHeGlZV05ySUhSdklIQnliMk5sYzNNZ1kzSmxZWFJsSUdGdVpDQmtaV3hsZEdVZ1pYWmxiblJ6SUc5bUlISmxiVzkyWlNCU1pYQnZjblJsY2lCdlltcGxZM1J6TGx4dUlDQXFJRlJvYVhNZ2FYTWdjbVZzWldGMFpXUWdkRzhnZEdobElHMWxjM05oWjJWdWN5QnpaVzUwSUdKNUlHTnlaV0YwWlNCMGJ5QjBhR1VnYjJKelpYSjJaWEp6SUVoNWNHVnlkSGtnWVhKeVlYa3VYRzRnSUNvZ1FIQmhjbUZ0SUh0bWRXNWpkR2x2YmlobGRtVnVkRG9nVFhOblJYWmxiblFwZlNCallXeHNZbUZqYTF4dUlDQXFMMXh1SUNCdmJrNXZkR2xtYVdOaGRHbHZiaWhqWVd4c1ltRmpheWtnZTF4dUlDQWdJSFJvYVhNdVgyOXVUbTkwYVdacFkyRjBhVzl1U0dGdVpHeGxjaUE5SUdOaGJHeGlZV05yTzF4dUlDQjlYRzVjYmlBZ1gyTnlaV0YwWlNoamNtbDBaWEpwWVNrZ2UxeHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEc1Y2JpQWdJQ0J5WlhSMWNtNGdibVYzSUZCeWIyMXBjMlVvS0hKbGMyOXNkbVVzSUhKbGFtVmpkQ2tnUFQ0Z2UxeHVJQ0FnSUNBZ2JHVjBJSEpsYzNWdFpTQTlJR055YVhSbGNtbGhMbkpsYzNWdFpUdGNiaUFnSUNBZ0lHeGxkQ0JwYm1sMGFXRnNSR0YwWVNBOUlHTnlhWFJsY21saExtbHVhWFJwWVd4RVlYUmhJSHg4SUh0OU8xeHVJQ0FnSUNBZ2JHVjBJSE5qYUdWdFlUdGNibHh1SUNBZ0lDQWdMeTlHVEU5WExVOVZWRG9nZEdocGN5QnRaWE56WVdkbElIZHBiR3dnWW1VZ2MyVnVkQ0IwYnlCMGFHVWdjblZ1ZEdsdFpTQnBibk4wWVc1alpTQnZaaUJUZVc1amFHVnlUV0Z1WVdkbGNpQXRQaUJmYjI1RGNtVmhkR1ZjYmlBZ0lDQWdJR3hsZENCeVpYRjFaWE4wVFhObklEMGdlMXh1SUNBZ0lDQWdJQ0IwZVhCbE9pQW5ZM0psWVhSbEp5d2dabkp2YlRvZ1gzUm9hWE11WDI5M2JtVnlMQ0IwYnpvZ1gzUm9hWE11WDNOMVlsVlNUQ3hjYmlBZ0lDQWdJQ0FnWW05a2VUb2dleUJ5WlhOMWJXVTZJSEpsYzNWdFpTQjlYRzRnSUNBZ0lDQjlPMXh1WEc0Z0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblczTjVibU5vWlhJZ0xTQmpjbVZoZEdWZE9pQW5MQ0JqY21sMFpYSnBZU3dnY21WeGRXVnpkRTF6WnlrN1hHNWNiaUFnSUNBZ0lISmxjWFZsYzNSTmMyY3VZbTlrZVM1MllXeDFaU0E5SUdsdWFYUnBZV3hFWVhSaE8xeHVJQ0FnSUNBZ2NtVnhkV1Z6ZEUxelp5NWliMlI1TG5aaGJIVmxMbkpsY0c5eWRHVnlJRDBnWDNSb2FYTXVYMjkzYm1WeU8xeHVYRzRnSUNBZ0lDQnBaaUFvWTNKcGRHVnlhV0V1YzJOb1pXMWhLU0I3WEc0Z0lDQWdJQ0FnSUhOamFHVnRZU0E5SUdOeWFYUmxjbWxoTG5OamFHVnRZVHRjYmlBZ0lDQWdJQ0FnY21WeGRXVnpkRTF6Wnk1aWIyUjVMbk5qYUdWdFlTQTlJR055YVhSbGNtbGhMbk5qYUdWdFlUdGNiaUFnSUNBZ0lIMWNibHh1SUNBZ0lDQWdhV1lnS0dOeWFYUmxjbWxoTG5BeWNDa2djbVZ4ZFdWemRFMXpaeTVpYjJSNUxuQXljQ0E5SUdOeWFYUmxjbWxoTG5BeWNEdGNiaUFnSUNBZ0lHbG1JQ2hqY21sMFpYSnBZUzV6ZEc5eVpTa2djbVZ4ZFdWemRFMXpaeTVpYjJSNUxuTjBiM0psSUQwZ1kzSnBkR1Z5YVdFdWMzUnZjbVU3WEc0Z0lDQWdJQ0JwWmlBb1kzSnBkR1Z5YVdFdWIySnpaWEoyWlhKektTQnlaWEYxWlhOMFRYTm5MbUp2WkhrdVlYVjBhRzl5YVhObElEMGdZM0pwZEdWeWFXRXViMkp6WlhKMlpYSnpPMXh1WEc0Z0lDQWdJQ0JwWmlBb2NtVnpkVzFsS1NCN1hHNGdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiYzNsdVkyaGxjaUF0SUdOeVpXRjBaVjBnTFNCeVpYTjFiV1VnYldWemMyRm5aVG9nSnl3Z2NtVnhkV1Z6ZEUxelp5azdYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduVzNONWJtTm9aWElnTFNCamNtVmhkR1ZkSUMwZ1kzSmxZWFJsSUcxbGMzTmhaMlU2SUNjc0lISmxjWFZsYzNSTmMyY3BPMXh1SUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0F2TDNKbGNYVmxjM1FnWTNKbFlYUmxJSFJ2SUhSb1pTQmhiR3h2WTJGMGFXOXVJSE41YzNSbGJTNGdRMkZ1SUdKbElISmxhbVZqZEdWa0lHSjVJSFJvWlNCUWIyeHBZM2xGYm1kcGJtVXVYRzRnSUNBZ0lDQmZkR2hwY3k1ZlluVnpMbkJ2YzNSTlpYTnpZV2RsS0hKbGNYVmxjM1JOYzJjc0lDaHlaWEJzZVNrZ1BUNGdlMXh1SUNBZ0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblczTjVibU5vWlhJZ0xTQmpjbVZoZEdWZElDMGdZM0psWVhSbExYSmxjM0J2Ym5ObE9pQW5MQ0J5WlhCc2VTazdYRzRnSUNBZ0lDQWdJR2xtSUNoeVpYQnNlUzVpYjJSNUxtTnZaR1VnUFQwOUlESXdNQ2tnZTF4dUlDQWdJQ0FnSUNBZ0lDOHZjbVZ3YjNKMFpYSWdZM0psWVhScGIyNGdZV05qWlhCMFpXUmNiaUFnSUNBZ0lDQWdJQ0JzWlhRZ2IySnFWVkpNSUQwZ2NtVndiSGt1WW05a2VTNXlaWE52ZFhKalpUdGNibHh1SUNBZ0lDQWdJQ0FnSUdsbUlDaHlaWE4xYldVcElIdGNiaUFnSUNBZ0lDQWdJQ0FnSUhOamFHVnRZU0E5SUhKbGNHeDVMbUp2WkhrdWMyTm9aVzFoTzF4dUlDQWdJQ0FnSUNBZ0lDQWdhVzVwZEdsaGJFUmhkR0VnUFNCeVpYQnNlUzVpYjJSNUxuWmhiSFZsTzF4dUlDQWdJQ0FnSUNBZ0lIMWNibHh1SUNBZ0lDQWdJQ0FnSUd4bGRDQnVaWGRQWW1vZ1BTQnVaWGNnUkdGMFlVOWlhbVZqZEZKbGNHOXlkR1Z5S0Y5MGFHbHpMQ0J2WW1wVlVrd3NJSE5qYUdWdFlTd2dKMjl1Snl3Z2FXNXBkR2xoYkVSaGRHRXNJSEpsY0d4NUxtSnZaSGt1WTJocGJHUnlaVzVTWlhOdmRYSmpaWE1wTzF4dUlDQWdJQ0FnSUNBZ0lGOTBhR2x6TGw5eVpYQnZjblJsY25OYmIySnFWVkpNWFNBOUlHNWxkMDlpYWp0Y2JseHVJQ0FnSUNBZ0lDQWdJSEpsYzI5c2RtVW9ibVYzVDJKcUtUdGNiaUFnSUNBZ0lDQWdmU0JsYkhObElIdGNiaUFnSUNBZ0lDQWdJQ0F2TDNKbGNHOXlkR1Z5SUdOeVpXRjBhVzl1SUhKbGFtVmpkR1ZrWEc0Z0lDQWdJQ0FnSUNBZ2NtVnFaV04wS0hKbGNHeDVMbUp2WkhrdVpHVnpZeWs3WEc0Z0lDQWdJQ0FnSUgxY2JpQWdJQ0FnSUgwcE8xeHVJQ0FnSUgwcE8xeHVYRzRnSUgxY2JseHVJQ0JmYzNWaWMyTnlhV0psS0dOeWFYUmxjbWxoS1NCN1hHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjYmx4dUlDQWdJSEpsZEhWeWJpQnVaWGNnVUhKdmJXbHpaU2dvY21WemIyeDJaU3dnY21WcVpXTjBLU0E5UGlCN1hHNWNiaUFnSUNBZ0lDOHZSa3hQVnkxUFZWUTZJSFJvYVhNZ2JXVnpjMkZuWlNCM2FXeHNJR0psSUhObGJuUWdkRzhnZEdobElISjFiblJwYldVZ2FXNXpkR0Z1WTJVZ2IyWWdVM2x1WTJobGNrMWhibUZuWlhJZ0xUNGdYMjl1VEc5allXeFRkV0p6WTNKcFltVmNiaUFnSUNBZ0lHeGxkQ0J6ZFdKelkzSnBZbVZOYzJjZ1BTQjdYRzRnSUNBZ0lDQWdJSFI1Y0dVNklDZHpkV0p6WTNKcFltVW5MQ0JtY205dE9pQmZkR2hwY3k1ZmIzZHVaWElzSUhSdk9pQmZkR2hwY3k1ZmMzVmlWVkpNTEZ4dUlDQWdJQ0FnSUNCaWIyUjVPaUI3ZlZ4dUlDQWdJQ0FnZlR0Y2JseHVJQ0FnSUNBZ0x5OGdTSGx3WlhKMGVTQnlaWEYxWlhOMElIUnZJR0psSUdGdUlFOWljMlZ5ZG1WeVhHNGdJQ0FnSUNBdkx5Qm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZjbVZVU0VsT1N5MXdjbTlxWldOMEwzTndaV056TDJKc2IySXZiV0Z6ZEdWeUwyMWxjM05oWjJWekwyUmhkR0V0YzNsdVl5MXRaWE56WVdkbGN5NXRaQ05vZVhCbGNuUjVMWEpsY1hWbGMzUXRkRzh0WW1VdFlXNHRiMkp6WlhKMlpYSmNibHh1SUNBZ0lDQWdMeThnVW1WemRXMWxJRk4xWW5OamNtbHdkR2x2Ym5NZ1ptOXlJSFJvWlNCellXMWxJRWg1Y0dWeWRIa2dWVkpNWEc0Z0lDQWdJQ0F2THlCb2RIUndjem92TDJkcGRHaDFZaTVqYjIwdmNtVlVTRWxPU3kxd2NtOXFaV04wTDNOd1pXTnpMMkpzYjJJdmJXRnpkR1Z5TDIxbGMzTmhaMlZ6TDJSaGRHRXRjM2x1WXkxdFpYTnpZV2RsY3k1dFpDTnlaWE4xYldVdGMzVmljMk55YVhCMGFXOXVjeTFtYjNJdGRHaGxMWE5oYldVdGFIbHdaWEowZVMxMWNteGNibHh1SUNBZ0lDQWdMeThnVW1WemRXMWxJRk4xWW5OamNtbHdkR2x2Ym5NZ1ptOXlJR0VnWTJWeWRHRnBiaUIxYzJWeUlHRnVaQ0JrWVhSaElITmphR1Z0WVNCcGJtUmxjR1Z1WkdWdWRHeDVJRzltSUhSb1pTQkllWEJsY25SNUlGVlNUQzVjYmlBZ0lDQWdJQzh2SUdoMGRIQnpPaTh2WjJsMGFIVmlMbU52YlM5eVpWUklTVTVMTFhCeWIycGxZM1F2YzNCbFkzTXZZbXh2WWk5dFlYTjBaWEl2YldWemMyRm5aWE12WkdGMFlTMXplVzVqTFcxbGMzTmhaMlZ6TG0xa0kzSmxjM1Z0WlMxemRXSnpZM0pwY0hScGIyNXpMV1p2Y2kxaExXTmxjblJoYVc0dGRYTmxjaTFoYm1RdFpHRjBZUzF6WTJobGJXRXRhVzVrWlhCbGJtUmxiblJzZVMxdlppMTBhR1V0YUhsd1pYSjBlUzExY214Y2JpQWdJQ0FnSUdsbUlDaGpjbWwwWlhKcFlTa2dlMXh1SUNBZ0lDQWdJQ0JwWmlBb1kzSnBkR1Z5YVdFdWNESndLU0J6ZFdKelkzSnBZbVZOYzJjdVltOWtlUzV3TW5BZ1BTQmpjbWwwWlhKcFlTNXdNbkE3WEc0Z0lDQWdJQ0FnSUdsbUlDaGpjbWwwWlhKcFlTNXpkRzl5WlNrZ2MzVmljMk55YVdKbFRYTm5MbUp2WkhrdWMzUnZjbVVnUFNCamNtbDBaWEpwWVM1emRHOXlaVHRjYmlBZ0lDQWdJQ0FnYVdZZ0tHTnlhWFJsY21saExuTmphR1Z0WVNrZ2MzVmljMk55YVdKbFRYTm5MbUp2WkhrdWMyTm9aVzFoSUQwZ1kzSnBkR1Z5YVdFdWMyTm9aVzFoTzF4dUlDQWdJQ0FnSUNCcFppQW9ZM0pwZEdWeWFXRXVhV1JsYm5ScGRIa3BJSE4xWW5OamNtbGlaVTF6Wnk1aWIyUjVMbWxrWlc1MGFYUjVJRDBnWTNKcGRHVnlhV0V1YVdSbGJuUnBkSGs3WEc0Z0lDQWdJQ0FnSUdsbUlDaGpjbWwwWlhKcFlTNXlaWE52ZFhKalpTa2djM1ZpYzJOeWFXSmxUWE5uTG1KdlpIa3VjbVZ6YjNWeVkyVWdQU0JqY21sMFpYSnBZUzV5WlhOdmRYSmpaVHRjYmlBZ0lDQWdJSDFjYmx4dUlDQWdJQ0FnYzNWaWMyTnlhV0psVFhObkxtSnZaSGt1Y21WemRXMWxJRDBnWTNKcGRHVnlhV0V1Y21WemRXMWxPMXh1WEc0Z0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblczTjVibU5vWlhKZElDMGdjM1ZpYzJOeWFXSmxJRzFsYzNOaFoyVTZJQ2NzSUdOeWFYUmxjbWxoTENCemRXSnpZM0pwWW1WTmMyY3BPMXh1WEc0Z0lDQWdJQ0F2TDNKbGNYVmxjM1FnYzNWaWMyTnlhWEIwYVc5dVhHNGdJQ0FnSUNBdkwxQnliM1pwYzJsdmJtRnNJR1JoZEdFZ2FYTWdZWEJ3YkdsbFpDQjBieUIwYUdVZ1JHRjBZVTlpYW1WamRFOWljMlZ5ZG1WeUlHRm1kR1Z5SUdOdmJtWnBjbTFoZEdsdmJpNGdUM0lnWkdselkyRnlaR1ZrSUdsbUlIUm9aWEpsSUdseklHNXZJR052Ym1acGNtMWhkR2x2Ymk1Y2JpQWdJQ0FnSUM4dlptOXlJRzF2Y21VZ2FXNW1ieUJ6WldVZ2RHaGxJRVJoZEdGUWNtOTJhWE5wYjI1aGJDQmpiR0Z6Y3lCa2IyTjFiV1Z1ZEdGMGFXOXVMbHh1SUNBZ0lDQWdYM1JvYVhNdVgySjFjeTV3YjNOMFRXVnpjMkZuWlNoemRXSnpZM0pwWW1WTmMyY3NJQ2h5WlhCc2VTa2dQVDRnZTF4dUlDQWdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25XM041Ym1Ob1pYSmRJQzBnYzNWaWMyTnlhV0psTFhKbGMzQnZibk5sT2lBbkxDQnlaWEJzZVNrN1hHNWNiaUFnSUNBZ0lDQWdiR1YwSUhOamFHVnRZU0E5SUhKbGNHeDVMbUp2WkhrdWMyTm9aVzFoTzF4dUlDQWdJQ0FnSUNCc1pYUWdiMkpxVlZKTUlEMGdjbVZ3YkhrdVltOWtlUzV5WlhOdmRYSmpaVHRjYmx4dUlDQWdJQ0FnSUNCc1pYUWdibVYzVUhKdmRtbHphVzl1WVd3Z1BTQmZkR2hwY3k1ZmNISnZkbWx6YVc5dVlXeHpXMjlpYWxWU1RGMDdYRzRnSUNBZ0lDQWdJR1JsYkdWMFpTQmZkR2hwY3k1ZmNISnZkbWx6YVc5dVlXeHpXMjlpYWxWU1RGMDdYRzRnSUNBZ0lDQWdJR2xtSUNodVpYZFFjbTkyYVhOcGIyNWhiQ2tnYm1WM1VISnZkbWx6YVc5dVlXd3VYM0psYkdWaGMyVk1hWE4wWlc1bGNuTW9LVHRjYmx4dUlDQWdJQ0FnSUNCcFppQW9jbVZ3YkhrdVltOWtlUzVqYjJSbElEd2dNakF3S1NCN1hHNGdJQ0FnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjF0emVXNWphR1Z5WFNBdElHNWxkeUJFWVhSaFVISnZkbWx6YVc5dVlXdzZJQ2NzSUhKbGNHeDVMbUp2WkhrdVkyaHBiR1J5Wlc1U1pYTnZkWEpqWlhNc0lHOWlhbFZTVENrN1hHNGdJQ0FnSUNBZ0lDQWdibVYzVUhKdmRtbHphVzl1WVd3Z1BTQnVaWGNnUkdGMFlWQnliM1pwYzJsdmJtRnNLRjkwYUdsekxsOXZkMjVsY2l3Z2IySnFWVkpNTENCZmRHaHBjeTVmWW5WekxDQnlaWEJzZVM1aWIyUjVMbU5vYVd4a2NtVnVVbVZ6YjNWeVkyVnpLVHRjYmlBZ0lDQWdJQ0FnSUNCZmRHaHBjeTVmY0hKdmRtbHphVzl1WVd4elcyOWlhbFZTVEYwZ1BTQnVaWGRRY205MmFYTnBiMjVoYkR0Y2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUdsbUlDaHlaWEJzZVM1aWIyUjVMbU52WkdVZ1BUMDlJREl3TUNrZ2UxeHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkYmMzbHVZMmhsY2wwZ0xTQnVaWGNnUkdGMFlTQlBZbXBsWTNRZ1QySnpaWEoyWlhJNklDY3NJSEpsY0d4NUxDQmZkR2hwY3k1ZmNISnZkbWx6YVc5dVlXeHpLVHRjYmx4dUlDQWdJQ0FnSUNBZ0lHeGxkQ0J1WlhkUFltb2dQU0J1WlhjZ1JHRjBZVTlpYW1WamRFOWljMlZ5ZG1WeUtGOTBhR2x6TENCdlltcFZVa3dzSUhOamFHVnRZU3dnSjI5dUp5d2djbVZ3YkhrdVltOWtlUzUyWVd4MVpTd2dibVYzVUhKdmRtbHphVzl1WVd3dVkyaHBiR1J5Wlc0c0lISmxjR3g1TG1KdlpIa3VkbVZ5YzJsdmJpazdYRzRnSUNBZ0lDQWdJQ0FnWDNSb2FYTXVYMjlpYzJWeWRtVnljMXR2WW1wVlVreGRJRDBnYm1WM1QySnFPMXh1WEc0Z0lDQWdJQ0FnSUNBZ2NtVnpiMngyWlNodVpYZFBZbW9wTzF4dUlDQWdJQ0FnSUNBZ0lHNWxkMUJ5YjNacGMybHZibUZzTG1Gd2NHeDVLRzVsZDA5aWFpazdYRzRnSUNBZ0lDQWdJSDBnWld4elpTQjdYRzRnSUNBZ0lDQWdJQ0FnY21WcVpXTjBLSEpsY0d4NUxtSnZaSGt1WkdWell5azdYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJSDBwTzF4dUlDQWdJSDBwTzF4dVhHNGdJSDFjYmx4dUlDQXZMMFpNVDFjdFNVNDZJRzFsYzNOaFoyVWdjbVZqWldsMlpXUWdabkp2YlNCaElHeHZZMkZzSUhKMWJuUnBiV1VnVW1Wd2IzSjBaWEpQWW1wbFkzUWdMVDRnWDI5dVVtVnRiM1JsVTNWaWMyTnlhV0psWEc0Z0lGOXZia1p2Y25kaGNtUW9iWE5uS1NCN1hHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjYmx4dUlDQWdJR3hsZENCeVpYQnZjblJsY2lBOUlGOTBhR2x6TGw5eVpYQnZjblJsY25OYmJYTm5MbUp2WkhrdWRHOWRPMXh1SUNBZ0lISmxjRzl5ZEdWeUxsOXZia1p2Y25kaGNtUW9iWE5uS1R0Y2JpQWdmVnh1WEc0Z0lDOHZSa3hQVnkxSlRqb2diV1Z6YzJGblpTQnlaV05sYVhabFpDQm1jbTl0SUdFZ2NtVnRiM1JsSUZONWJtTm9aWElnTFQ0Z1kzSmxZWFJsSUNoMGFHbHpJR2x6SUdGamRIVmhiR3g1SUdGdUlHbHVkbWwwWVhScGIyNGdkRzhnYzNWaWMyTnlhV0psS1Z4dUlDQmZiMjVTWlcxdmRHVkRjbVZoZEdVb2JYTm5LU0I3WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNibHh1SUNBZ0x5OXlaVzF2ZG1VZ1hDSXZjM1ZpYzJOeWFYQjBhVzl1WENJZ1puSnZiU0IwYUdVZ1ZWSk1YRzRnSUNCc1pYUWdjbVZ6YjNWeVkyVWdQU0J0YzJjdVpuSnZiUzV6YkdsalpTZ3dMQ0F0TVRNcE8xeHVYRzRnSUNCc1pYUWdaWFpsYm5RZ1BTQjdYRzRnSUNBZ0lIUjVjR1U2SUcxelp5NTBlWEJsTEZ4dUlDQWdJQ0JtY205dE9pQnRjMmN1WW05a2VTNXpiM1Z5WTJVc1hHNGdJQ0FnSUhWeWJEb2djbVZ6YjNWeVkyVXNYRzRnSUNBZ0lITmphR1Z0WVRvZ2JYTm5MbUp2WkhrdWMyTm9aVzFoTEZ4dUlDQWdJQ0IyWVd4MVpUb2diWE5uTG1KdlpIa3VkbUZzZFdVc1hHNGdJQ0FnSUdsa1pXNTBhWFI1T2lCdGMyY3VZbTlrZVM1cFpHVnVkR2wwZVN4Y2JseHVJQ0FnSUNCaFkyczZJQ2gwZVhCbEtTQTlQaUI3WEc0Z0lDQWdJQ0FnYkdWMElHeFVlWEJsSUQwZ01qQXdPMXh1SUNBZ0lDQWdJR2xtSUNoMGVYQmxLU0I3WEc0Z0lDQWdJQ0FnSUNCc1ZIbHdaU0E5SUhSNWNHVTdYRzRnSUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0FnTHk5elpXNWtJR0ZqYXlCeVpYTndiMjV6WlNCdFpYTnpZV2RsWEc0Z0lDQWdJQ0FnWDNSb2FYTXVYMkoxY3k1d2IzTjBUV1Z6YzJGblpTaDdYRzRnSUNBZ0lDQWdJQ0JwWkRvZ2JYTm5MbWxrTENCMGVYQmxPaUFuY21WemNHOXVjMlVuTENCbWNtOXRPaUJ0YzJjdWRHOHNJSFJ2T2lCdGMyY3Vabkp2YlN4Y2JpQWdJQ0FnSUNBZ0lHSnZaSGs2SUhzZ1kyOWtaVG9nYkZSNWNHVWdmVnh1SUNBZ0lDQWdJSDBwTzF4dUlDQWdJQ0I5WEc0Z0lDQjlPMXh1WEc0Z0lDQnBaaUFvWDNSb2FYTXVYMjl1VG05MGFXWnBZMkYwYVc5dVNHRnVaR3hsY2lrZ2UxeHVJQ0FnSUNCamIyNXpiMnhsTG1sdVptOG9KMXRUZVc1amFHVnlYU0JPVDFSSlJrbERRVlJKVDA0dFJWWkZUbFE2SUNjc0lHVjJaVzUwS1R0Y2JpQWdJQ0FnWDNSb2FYTXVYMjl1VG05MGFXWnBZMkYwYVc5dVNHRnVaR3hsY2lobGRtVnVkQ2s3WEc0Z0lDQjlYRzRnSUgxY2JseHVJQ0F2TDBaTVQxY3RTVTQ2SUcxbGMzTmhaMlVnY21WalpXbDJaV1FnWm5KdmJTQmhJSEpsYlc5MFpTQkVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSWdMVDRnWkdWc1pYUmxYRzRnSUY5dmJsSmxiVzkwWlVSbGJHVjBaU2h0YzJjcElIdGNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4dVhHNGdJQ0F2TDNKbGJXOTJaU0JjSWk5emRXSnpZM0pwY0hScGIyNWNJaUJtY205dElIUm9aU0JWVWt4Y2JpQWdJR3hsZENCeVpYTnZkWEpqWlNBOUlHMXpaeTVpYjJSNUxuSmxjMjkxY21ObE8xeHVYRzRnSUNCc1pYUWdiMkpxWldOMElEMGdYM1JvYVhNdVgyOWljMlZ5ZG1WeWMxdHlaWE52ZFhKalpWMDdYRzRnSUNCcFppQW9iMkpxWldOMEtTQjdYRzRnSUNBZ0lHeGxkQ0JsZG1WdWRDQTlJSHRjYmlBZ0lDQWdJQ0IwZVhCbE9pQnRjMmN1ZEhsd1pTeGNiaUFnSUNBZ0lDQjFjbXc2SUhKbGMyOTFjbU5sTEZ4dUlDQWdJQ0FnSUdsa1pXNTBhWFI1T2lCdGMyY3VZbTlrZVM1cFpHVnVkR2wwZVN4Y2JseHVJQ0FnSUNBZ0lHRmphem9nS0hSNWNHVXBJRDArSUh0Y2JpQWdJQ0FnSUNBZ0lHeGxkQ0JzVkhsd1pTQTlJREl3TUR0Y2JpQWdJQ0FnSUNBZ0lHbG1JQ2gwZVhCbEtTQjdYRzRnSUNBZ0lDQWdJQ0FnSUd4VWVYQmxJRDBnZEhsd1pUdGNiaUFnSUNBZ0lDQWdJSDFjYmx4dUlDQWdJQ0FnSUNBZ0x5OVVUMFJQT2lCaGJua2diM1JvWlhJZ1pHbG1abVZ5Wlc1MElHOXdkR2x2Ym5NZ1ptOXlJSFJvWlNCeVpXeGxZWE5sSUhCeWIyTmxjM01zSUd4cGEyVWdZV05qWlhCMElHSjFkQ0J1YjNJZ2NtVnNaV0Z6WlNCc2IyTmhiRDljYmlBZ0lDQWdJQ0FnSUdsbUlDaHNWSGx3WlNBOVBUMGdNakF3S1NCN1hHNGdJQ0FnSUNBZ0lDQWdJRzlpYW1WamRDNWtaV3hsZEdVb0tUdGNiaUFnSUNBZ0lDQWdJSDFjYmx4dUlDQWdJQ0FnSUNBZ0lDOHZjMlZ1WkNCaFkyc2djbVZ6Y0c5dWMyVWdiV1Z6YzJGblpWeHVJQ0FnSUNBZ0lDQWdJRjkwYUdsekxsOWlkWE11Y0c5emRFMWxjM05oWjJVb2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnYVdRNklHMXpaeTVwWkN3Z2RIbHdaVG9nSjNKbGMzQnZibk5sSnl3Z1puSnZiVG9nYlhObkxuUnZMQ0IwYnpvZ2JYTm5MbVp5YjIwc1hHNGdJQ0FnSUNBZ0lDQWdJQ0JpYjJSNU9pQjdJR052WkdVNklHeFVlWEJsTENCemIzVnlZMlU2SUY5MGFHbHpMbDl2ZDI1bGNpQjlYRzRnSUNBZ0lDQWdJQ0FnZlNrN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMDdYRzVjYmlBZ0lDQWdJR2xtSUNoZmRHaHBjeTVmYjI1T2IzUnBabWxqWVhScGIyNUlZVzVrYkdWeUtTQjdYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkT1QxUkpSa2xEUVZSSlQwNHRSVlpGVGxRNklDY3NJR1YyWlc1MEtUdGNiaUFnSUNBZ0lDQWdYM1JvYVhNdVgyOXVUbTkwYVdacFkyRjBhVzl1U0dGdVpHeGxjaWhsZG1WdWRDazdYRzRnSUNBZ0lDQjlYRzRnSUNBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0FnSUY5MGFHbHpMbDlpZFhNdWNHOXpkRTFsYzNOaFoyVW9lMXh1SUNBZ0lDQWdJQ0JwWkRvZ2JYTm5MbWxrTENCMGVYQmxPaUFuY21WemNHOXVjMlVuTENCbWNtOXRPaUJ0YzJjdWRHOHNJSFJ2T2lCdGMyY3Vabkp2YlN4Y2JpQWdJQ0FnSUNBZ1ltOWtlVG9nZXlCamIyUmxPaUEwTURRc0lITnZkWEpqWlRvZ1gzUm9hWE11WDI5M2JtVnlJSDFjYmlBZ0lDQWdJSDBwTzF4dUlDQWdJSDFjYmlBZ2ZWeHVYRzU5WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUZONWJtTm9aWEk3WEc1Y2JseHVYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVaUF2TDF4dUx5OGdMaTl6Y21NdmMzbHVZMmhsY2k5VGVXNWphR1Z5TG1weklpd2lMeW9xWEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUZCVUlFbHViM1podzZmRG8yOGdaU0JUYVhOMFpXMWhjeUJUUVZ4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCSlRrVlRReTFKUkZ4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCUlZVOUNTVk1nVGtWVVYwOVNTMU1nVTB4Y2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1JsSkJWVTVJVDBaRlVpMUhSVk5GVEV4VFEwaEJSbFFnV2xWU0lFWlBSVkpFUlZKVlRrY2dSRVZTSUVGT1IwVlhRVTVFVkVWT0lFWlBVbE5EU0ZWT1J5QkZMbFpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVDFKQlRrZEZJRk5CWEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUVSbGRYUnpZMmhsSUZSbGJHVnJiMjBnUVVkY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1FYQnBlbVZsWEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUZSRlEwaE9TVk5EU0VVZ1ZVNUpWa1ZTVTBsVVFWUWdRa1ZTVEVsT1hHNHFYRzRxSUV4cFkyVnVjMlZrSUhWdVpHVnlJSFJvWlNCQmNHRmphR1VnVEdsalpXNXpaU3dnVm1WeWMybHZiaUF5TGpBZ0tIUm9aU0JjSWt4cFkyVnVjMlZjSWlrN1hHNHFJSGx2ZFNCdFlYa2dibTkwSUhWelpTQjBhR2x6SUdacGJHVWdaWGhqWlhCMElHbHVJR052YlhCc2FXRnVZMlVnZDJsMGFDQjBhR1VnVEdsalpXNXpaUzVjYmlvZ1dXOTFJRzFoZVNCdlluUmhhVzRnWVNCamIzQjVJRzltSUhSb1pTQk1hV05sYm5ObElHRjBYRzRxWEc0cUlDQWdhSFIwY0RvdkwzZDNkeTVoY0dGamFHVXViM0puTDJ4cFkyVnVjMlZ6TDB4SlEwVk9VMFV0TWk0d1hHNHFYRzRxSUZWdWJHVnpjeUJ5WlhGMWFYSmxaQ0JpZVNCaGNIQnNhV05oWW14bElHeGhkeUJ2Y2lCaFozSmxaV1FnZEc4Z2FXNGdkM0pwZEdsdVp5d2djMjltZEhkaGNtVmNiaW9nWkdsemRISnBZblYwWldRZ2RXNWtaWElnZEdobElFeHBZMlZ1YzJVZ2FYTWdaR2x6ZEhKcFluVjBaV1FnYjI0Z1lXNGdYQ0pCVXlCSlUxd2lJRUpCVTBsVExGeHVLaUJYU1ZSSVQxVlVJRmRCVWxKQlRsUkpSVk1nVDFJZ1EwOU9SRWxVU1U5T1V5QlBSaUJCVGxrZ1MwbE9SQ3dnWldsMGFHVnlJR1Y0Y0hKbGMzTWdiM0lnYVcxd2JHbGxaQzVjYmlvZ1UyVmxJSFJvWlNCTWFXTmxibk5sSUdadmNpQjBhR1VnYzNCbFkybG1hV01nYkdGdVozVmhaMlVnWjI5MlpYSnVhVzVuSUhCbGNtMXBjM05wYjI1eklHRnVaRnh1S2lCc2FXMXBkR0YwYVc5dWN5QjFibVJsY2lCMGFHVWdUR2xqWlc1elpTNWNiaW9xTDF4dVhHNHZLaXBjYmlBcUlFQmhZMk5sYzNNZ2NISnBkbUYwWlZ4dUlDb2dWR2hwY3lCamJHRnpjeUJwY3lCeVpYTndiMjV6YVdKc1pTQm1iM0lnWTI5c2JHVmpkR2x1WnlCa1pXeDBZU0JqYUdGdVoyVnpJR2x1SUhKbGJXOTBaU0J2WW1wbFkzUnpMQ0JpWldadmNtVWdkR2hsSUhKbGMzQnZibk5sSUc5bUlITjFZbk5qY21sd2RHbHZiaUJ5WldGamFDQjBhR1VnYjJKelpYSjJaWEl1WEc0Z0tpQkpkQ2R6SUhWelpXUWdhVzRnVTNsdVkyaGxjaUF0UGlCemRXSnpZM0pwWW1VdUlGUm9aU0JtYkc5M0lHbHpJR1JsWm1sdVpXUWdZWE02WEc0Z0tpQXhMaUFvYjJKelpYSjJaWElwSUMwdGMzVmljMk55YVdKbExTMCtJQ2h5WlhCdmNuUmxjaWxjYmlBcUlESXVJQ2h2WW5ObGNuWmxjaWtnUEMwdFpHVnNkR0VnZFhCa1lYUmxjeTB0SUNoeVpYQnZjblJsY2lsY2JpQXFJRE11SUNodlluTmxjblpsY2lrZ1BDMHRjM1ZpYzJOeWFXSmxJSEpsYzNCdmJuTmxMUzBnS0hKbGNHOXlkR1Z5S1Z4dUlDb2dWR2hwY3lCdFpXRnVjeUIwYUdGMElIUm9aWEpsSUdOdmRXeGtJR0psSUdSbGJIUmhJSFZ3WkdGMFpYTWdkSEpoYm5ObVpYSnlaV1FnWW1WbWIzSmxJSFJvWlNCemRXSnpZM0pwY0hScGIyNGdZMjl1Wm1seWJXRjBhVzl1TGx4dUlDb2dVMmx1WTJVZ2RHaGxjbVVnYVhNZ2JtOGdSR0YwWVU5aWFtVmpkRTlpYzJWeWRtVnlJR0psWm05eVpTQjBhR1VnZFdKelkzSnBjSFJwYjI0Z1kyOXVabWx5YldGMGFXOXVMQ0IwYUdWeVpTQnphRzkxYkdRZ1ltVWdjMjl0WlNCdmRHaGxjaUJ2WW1wbFkzUWdZMjlzYkdWamRHbHVaeUIwYUdVZ2RYQmtZWFJsY3k1Y2JpQXFJRkJ5YjNacGMybHZibUZzSUdSaGRHRWdhWE1nWVhCd2JHbGxaQ0IwYnlCMGFHVWdSR0YwWVU5aWFtVmpkRTlpYzJWeWRtVnlJR0ZtZEdWeUlHTnZibVpwY20xaGRHbHZiaTRnVDNJZ1pHbHpZMkZ5WkdWa0lHbG1JSFJvWlhKbElHbHpJRzV2SUdOdmJtWnBjbTFoZEdsdmJpNWNiaUFxTDF4dVkyeGhjM01nUkdGMFlWQnliM1pwYzJsdmJtRnNJSHRjYmlBZ0x5b2djSEpwZG1GMFpWeHVJQ0JmWTJocGJHUnlaVzVNYVhOMFpXNWxjbk02SUZ0TmMyZE1hWE4wWlc1bGNsMWNiaUFnWDJ4cGMzUmxibVZ5T2lCTmMyZE1hWE4wWlc1bGNseHVYRzRnSUY5amFHRnVaMlZ6T2lCYlhWeHVJQ0FxTDF4dVhHNGdJR052Ym5OMGNuVmpkRzl5S0c5M2JtVnlMQ0IxY213c0lHSjFjeXdnWTJocGJHUnlaVzRwSUh0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1WEc0Z0lDQWdYM1JvYVhNdVgyOTNibVZ5SUQwZ2IzZHVaWEk3WEc0Z0lDQWdYM1JvYVhNdVgzVnliQ0E5SUhWeWJEdGNiaUFnSUNCZmRHaHBjeTVmWW5WeklEMGdZblZ6TzF4dUlDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJpQTlJR05vYVd4a2NtVnVPMXh1WEc0Z0lDQWdYM1JvYVhNdVgyTm9ZVzVuWlhNZ1BTQmJYVHRjYmlBZ0lDQmZkR2hwY3k1ZllXeHNiMk5oZEdWTWFYTjBaVzVsY25Nb0tUdGNiaUFnZlZ4dVhHNGdJRjloYkd4dlkyRjBaVXhwYzNSbGJtVnljeWdwSUh0Y2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh1WEc0Z0lDQWdYM1JvYVhNdVgyeHBjM1JsYm1WeUlEMGdYM1JvYVhNdVgySjFjeTVoWkdSTWFYTjBaVzVsY2loZmRHaHBjeTVmZFhKc0xDQW9iWE5uS1NBOVBpQjdYRzRnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduUkdGMFlWQnliM1pwYzJsdmJtRnNMU2NnS3lCZmRHaHBjeTVmZFhKc0lDc2dKeTFTUTFZNklDY3NJRzF6WnlrN1hHNGdJQ0FnSUNCZmRHaHBjeTVmWTJoaGJtZGxjeTV3ZFhOb0tHMXpaeWs3WEc0Z0lDQWdmU2s3WEc1Y2JpQWdJQ0F2S2x4dUlDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJreHBjM1JsYm1WeWN5QTlJRnRkTzF4dUlDQWdJR2xtSUNoZmRHaHBjeTVmWTJocGJHUnlaVzRwSUh0Y2JpQWdJQ0FnSUd4bGRDQmphR2xzWkVKaGMyVlZVa3dnUFNCMWNtd2dLeUFuTDJOb2FXeGtjbVZ1THljN1hHNGdJQ0FnSUNCZmRHaHBjeTVmWTJocGJHUnlaVzR1Wm05eVJXRmphQ2dvWTJocGJHUXBJRDArSUh0Y2JpQWdJQ0FnSUNBZ2JHVjBJR05vYVd4a1ZWSk1JRDBnWTJocGJHUkNZWE5sVlZKTUlDc2dZMmhwYkdRN1hHNGdJQ0FnSUNBZ0lHeGxkQ0JzYVhOMFpXNWxjaUE5SUY5MGFHbHpMbDlpZFhNdVlXUmtUR2x6ZEdWdVpYSW9ZMmhwYkdSVlVrd3NJQ2h0YzJjcElEMCtJSHRjYmlBZ0lDQWdJQ0FnSUNBdkwybG5ibTl5WlNCdGMyY2djMlZ1ZENCaWVTQm9hVzF6Wld4bVhHNGdJQ0FnSUNBZ0lDQWdhV1lnS0cxelp5NW1jbTl0SUNFOVBTQnZkMjVsY2lrZ2UxeHVJQ0FnSUNBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb2JYTm5LVHRjYmlBZ0lDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNBZ0lIMHBPMXh1WEc0Z0lDQWdJQ0FnSUY5MGFHbHpMbDlqYUdsc1pISmxia3hwYzNSbGJtVnljeTV3ZFhOb0tHeHBjM1JsYm1WeUtUdGNiaUFnSUNBZ0lIMHBPMXh1SUNBZ0lIMHFMMXh1SUNCOVhHNWNiaUFnWDNKbGJHVmhjMlZNYVhOMFpXNWxjbk1vS1NCN1hHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjYmx4dUlDQWdJRjkwYUdsekxsOXNhWE4wWlc1bGNpNXlaVzF2ZG1Vb0tUdGNibHh1SUNBZ0lDOHFYM1JvYVhNdVgyTm9hV3hrY21WdVRHbHpkR1Z1WlhKekxtWnZja1ZoWTJnb0tHeHBjM1JsYm1WeUtTQTlQaUI3WEc0Z0lDQWdJQ0JzYVhOMFpXNWxjaTV5WlcxdmRtVW9LVHRjYmlBZ0lDQjlLVHNxTDF4dUlDQjlYRzVjYmlBZ1oyVjBJR05vYVd4a2NtVnVLQ2tnZXlCeVpYUjFjbTRnZEdocGN5NWZZMmhwYkdSeVpXNDdJSDFjYmx4dUlDQmhjSEJzZVNodlluTmxjblpsY2lrZ2UxeHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEc0Z0lDQWdYM1JvYVhNdVgyTm9ZVzVuWlhNdVptOXlSV0ZqYUNnb1kyaGhibWRsS1NBOVBpQjdYRzRnSUNBZ0lDQnZZbk5sY25abGNpNWZZMmhoYm1kbFQySnFaV04wS0c5aWMyVnlkbVZ5TGw5emVXNWpUMkpxTENCamFHRnVaMlVwTzF4dUlDQWdJSDBwTzF4dUlDQjlYRzU5WEc1Y2JtVjRjRzl5ZENCa1pXWmhkV3gwSUVSaGRHRlFjbTkyYVhOcGIyNWhiRHRjYmx4dVhHNWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNJQzh2WEc0dkx5QXVMM055WXk5emVXNWphR1Z5TDBSaGRHRlFjbTkyYVhOcGIyNWhiQzVxY3lJc0ltMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2V5QmNJbVJsWm1GMWJIUmNJam9nY21WeGRXbHlaU2hjSW1OdmNtVXRhbk12YkdsaWNtRnllUzltYmk5dlltcGxZM1F2WVhOemFXZHVYQ0lwTENCZlgyVnpUVzlrZFd4bE9pQjBjblZsSUgwN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJKaFltVnNMWEoxYm5ScGJXVXZZMjl5WlMxcWN5OXZZbXBsWTNRdllYTnphV2R1TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeE16WmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SWl3aWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCN0lGd2laR1ZtWVhWc2RGd2lPaUJ5WlhGMWFYSmxLRndpWTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzluWlhRdGIzZHVMWEJ5YjNCbGNuUjVMV1JsYzJOeWFYQjBiM0pjSWlrc0lGOWZaWE5OYjJSMWJHVTZJSFJ5ZFdVZ2ZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlqYjNKbExXcHpMMjlpYW1WamRDOW5aWFF0YjNkdUxYQnliM0JsY25SNUxXUmxjMk55YVhCMGIzSXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREV6T0Z4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWlMQ0p5WlhGMWFYSmxLQ2N1TGk4dUxpOXRiMlIxYkdWekwyVnpOaTV2WW1wbFkzUXVZWE56YVdkdUp5azdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSEpsY1hWcGNtVW9KeTR1THk0dUwyMXZaSFZzWlhNdlgyTnZjbVVuS1M1UFltcGxZM1F1WVhOemFXZHVPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdlptNHZiMkpxWldOMEwyRnpjMmxuYmk1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01UUXpYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNJc0luSmxjWFZwY21Vb0p5NHVMeTR1TDIxdlpIVnNaWE12WlhNMkxtOWlhbVZqZEM1blpYUXRiM2R1TFhCeWIzQmxjblI1TFdSbGMyTnlhWEIwYjNJbktUdGNiblpoY2lBa1QySnFaV04wSUQwZ2NtVnhkV2x5WlNnbkxpNHZMaTR2Ylc5a2RXeGxjeTlmWTI5eVpTY3BMazlpYW1WamREdGNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdablZ1WTNScGIyNGdaMlYwVDNkdVVISnZjR1Z5ZEhsRVpYTmpjbWx3ZEc5eUtHbDBMQ0JyWlhrcGUxeHVJQ0J5WlhSMWNtNGdKRTlpYW1WamRDNW5aWFJQZDI1UWNtOXdaWEowZVVSbGMyTnlhWEIwYjNJb2FYUXNJR3RsZVNrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdlptNHZiMkpxWldOMEwyZGxkQzF2ZDI0dGNISnZjR1Z5ZEhrdFpHVnpZM0pwY0hSdmNpNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVFExWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DSXNJaWQxYzJVZ2MzUnlhV04wSnp0Y2JpOHZJREU1TGpFdU1pNHhJRTlpYW1WamRDNWhjM05wWjI0b2RHRnlaMlYwTENCemIzVnlZMlVzSUM0dUxpbGNiblpoY2lCblpYUkxaWGx6SUNBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMXJaWGx6SnlsY2JpQWdMQ0JuVDFCVElDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxbmIzQnpKeWxjYmlBZ0xDQndTVVVnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzF3YVdVbktWeHVJQ0FzSUhSdlQySnFaV04wSUQwZ2NtVnhkV2x5WlNnbkxpOWZkRzh0YjJKcVpXTjBKeWxjYmlBZ0xDQkpUMkpxWldOMElDQTlJSEpsY1hWcGNtVW9KeTR2WDJsdlltcGxZM1FuS1Z4dUlDQXNJQ1JoYzNOcFoyNGdJRDBnVDJKcVpXTjBMbUZ6YzJsbmJqdGNibHh1THk4Z2MyaHZkV3hrSUhkdmNtc2dkMmwwYUNCemVXMWliMnh6SUdGdVpDQnphRzkxYkdRZ2FHRjJaU0JrWlhSbGNtMXBibWx6ZEdsaklIQnliM0JsY25SNUlHOXlaR1Z5SUNoV09DQmlkV2NwWEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUNFa1lYTnphV2R1SUh4OElISmxjWFZwY21Vb0p5NHZYMlpoYVd4ekp5a29ablZ1WTNScGIyNG9LWHRjYmlBZ2RtRnlJRUVnUFNCN2ZWeHVJQ0FnSUN3Z1FpQTlJSHQ5WEc0Z0lDQWdMQ0JUSUQwZ1UzbHRZbTlzS0NsY2JpQWdJQ0FzSUVzZ1BTQW5ZV0pqWkdWbVoyaHBhbXRzYlc1dmNIRnljM1FuTzF4dUlDQkJXMU5kSUQwZ056dGNiaUFnU3k1emNHeHBkQ2duSnlrdVptOXlSV0ZqYUNobWRXNWpkR2x2YmlocktYc2dRbHRyWFNBOUlHczdJSDBwTzF4dUlDQnlaWFIxY200Z0pHRnpjMmxuYmloN2ZTd2dRU2xiVTEwZ0lUMGdOeUI4ZkNCUFltcGxZM1F1YTJWNWN5Z2tZWE56YVdkdUtIdDlMQ0JDS1NrdWFtOXBiaWduSnlrZ0lUMGdTenRjYm4wcElEOGdablZ1WTNScGIyNGdZWE56YVdkdUtIUmhjbWRsZEN3Z2MyOTFjbU5sS1hzZ0x5OGdaWE5zYVc1MExXUnBjMkZpYkdVdGJHbHVaU0J1YnkxMWJuVnpaV1F0ZG1GeWMxeHVJQ0IyWVhJZ1ZDQWdJQ0FnUFNCMGIwOWlhbVZqZENoMFlYSm5aWFFwWEc0Z0lDQWdMQ0JoVEdWdUlDQTlJR0Z5WjNWdFpXNTBjeTVzWlc1bmRHaGNiaUFnSUNBc0lHbHVaR1Y0SUQwZ01WeHVJQ0FnSUN3Z1oyVjBVM2x0WW05c2N5QTlJR2RQVUZNdVpseHVJQ0FnSUN3Z2FYTkZiblZ0SUNBZ0lDQTlJSEJKUlM1bU8xeHVJQ0IzYUdsc1pTaGhUR1Z1SUQ0Z2FXNWtaWGdwZTF4dUlDQWdJSFpoY2lCVElDQWdJQ0FnUFNCSlQySnFaV04wS0dGeVozVnRaVzUwYzF0cGJtUmxlQ3NyWFNsY2JpQWdJQ0FnSUN3Z2EyVjVjeUFnSUQwZ1oyVjBVM2x0WW05c2N5QS9JR2RsZEV0bGVYTW9VeWt1WTI5dVkyRjBLR2RsZEZONWJXSnZiSE1vVXlrcElEb2daMlYwUzJWNWN5aFRLVnh1SUNBZ0lDQWdMQ0JzWlc1bmRHZ2dQU0JyWlhsekxteGxibWQwYUZ4dUlDQWdJQ0FnTENCcUlDQWdJQ0FnUFNBd1hHNGdJQ0FnSUNBc0lHdGxlVHRjYmlBZ0lDQjNhR2xzWlNoc1pXNW5kR2dnUGlCcUtXbG1LR2x6Ulc1MWJTNWpZV3hzS0ZNc0lHdGxlU0E5SUd0bGVYTmJhaXNyWFNrcFZGdHJaWGxkSUQwZ1UxdHJaWGxkTzF4dUlDQjlJSEpsZEhWeWJpQlVPMXh1ZlNBNklDUmhjM05wWjI0N1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl2WW1wbFkzUXRZWE56YVdkdUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXhORFpjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lpd2lMeThnTVRrdU1TNHpMakVnVDJKcVpXTjBMbUZ6YzJsbmJpaDBZWEpuWlhRc0lITnZkWEpqWlNsY2JuWmhjaUFrWlhod2IzSjBJRDBnY21WeGRXbHlaU2duTGk5ZlpYaHdiM0owSnlrN1hHNWNiaVJsZUhCdmNuUW9KR1Y0Y0c5eWRDNVRJQ3NnSkdWNGNHOXlkQzVHTENBblQySnFaV04wSnl3Z2UyRnpjMmxuYmpvZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXRnpjMmxuYmljcGZTazdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDJWek5pNXZZbXBsWTNRdVlYTnphV2R1TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeE5EbGNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SWl3aUx5OGdNVGt1TVM0eUxqWWdUMkpxWldOMExtZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2loUExDQlFLVnh1ZG1GeUlIUnZTVTlpYW1WamRDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkwYnkxcGIySnFaV04wSnlsY2JpQWdMQ0FrWjJWMFQzZHVVSEp2Y0dWeWRIbEVaWE5qY21sd2RHOXlJRDBnY21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFdkdmNHUW5LUzVtTzF4dVhHNXlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRjMkZ3Snlrb0oyZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2ljc0lHWjFibU4wYVc5dUtDbDdYRzRnSUhKbGRIVnliaUJtZFc1amRHbHZiaUJuWlhSUGQyNVFjbTl3WlhKMGVVUmxjMk55YVhCMGIzSW9hWFFzSUd0bGVTbDdYRzRnSUNBZ2NtVjBkWEp1SUNSblpYUlBkMjVRY205d1pYSjBlVVJsYzJOeWFYQjBiM0lvZEc5SlQySnFaV04wS0dsMEtTd2dhMlY1S1R0Y2JpQWdmVHRjYm4wcE8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlsY3pZdWIySnFaV04wTG1kbGRDMXZkMjR0Y0hKdmNHVnlkSGt0WkdWelkzSnBjSFJ2Y2k1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01UVXhYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNJc0lpOHZJQ0FnSUNCd2NtOTRlUzF2WW5ObGNuWmxJSFl3TGpBdU1UaGNiaTh2SUNBZ0lDQkRiM0I1Y21sbmFIUWdLR01wSURJd01UVXNJREl3TVRZZ1UybHRiMjRnV1M0Z1FteGhZMnQzWld4c0xDQkJibmxYYUdsamFGZGhlVnh1THk4Z0lDQWdJRTFKVkNCTWFXTmxibk5sSUMwZ2FIUjBjRG92TDI5d1pXNXpiM1Z5WTJVdWIzSm5MMnhwWTJWdWMyVnpMMjFwZEMxc2FXTmxibk5sTG5Cb2NGeHVLR1oxYm1OMGFXOXVLQ2tnZTF4dVhIUmNJblZ6WlNCemRISnBZM1JjSWp0Y2JseDBMeThnUTNKbFlYUmxjeUJoYm1RZ2NtVjBkWEp1Y3lCaElGQnliM2g1SUhkeVlYQndhVzVuSUdFZ2RHRnlaMlYwSUhOdklIUm9ZWFFnWVd4c0lHTm9ZVzVuWlhNZ1kyRnVJR0psSUhSeVlYQndaV1FnWVc1a0lHWnZjbmRoY21SbFpDQjBiMXh1WEhRdkx5QmhJR05oYkd4aVlXTnJMaUJVYUdVZ1kyRnNiR0poWTJzZ2RHRnJaWE1nWVc0Z1lYSnlZWGtnYjJZZ1kyaGhibWRsY3lCcWRYTjBJR3hwYTJVZ2RHaGxJSFJ5WVdScGRHbHZibUZzSUc5eWFXZHBibUZzSUVOb2NtOXRaU0JQWW1wbFkzUXViMkp6WlhKMlpWeHVYSFF2THlCN2IySnFaV04wT2p4dlltcGxZM1FnWTJoaGJtZGxaRDRzYm1GdFpUbzhabWxsYkdRZ1kyaGhibWRsWkQ0c2RIbHdaVHBoWkdSOGRYQmtZWFJsZkdSbGJHVjBaWHh5WldOdmJtWnBaM1Z5Wlh4d2NtVjJaVzUwUlhoMFpXNXphVzl1YzN4elpYUlFjbTkwYjNSNWNHVXNiMnhrVm1Gc2RXVTZQRzlzWkNCMllXeDFaU0JwWmlCMWNHUmhkR1VnZkNCa1pXeGxkR1UrZlZ4dVhIUXZMeUJVYUdVZ1lXTmpaWEIwYkdsemRDQmpZVzRnWW1VZ1lXUmtmSFZ3WkdGMFpYeGtaV3hsZEdWOGNtVmpiMjVtYVdkMWNtVjhjSEpsZG1WdWRFVjRkR1Z1YzJsdmJuTjhjMlYwVUhKdmRHOTBlWEJsTGx4dVhIUXZMeUIySURBdU1DNHhNQ0IwYnlCemRYQndiM0owSUhCaGRYTnBibWNnWVc1a0lISmxjM1JoY25ScGJtY2diMkp6WlhKMllYUnBiMjRnZEhkdklHRmtaR2wwYVc5dVlXd2dZMjl1YzNSeWRXTjBiM0lnWVhKbmRXMWxiblJ6SUdGeVpTQmhkbUZwYkdGaWJHVWdkRzhnVDJKcVpXTjBMbTlpYzJWeWRtVTZYRzVjZEM4dklIQmhkWE5oWW14bElDMGdZM0psWVhSbElIUm9aU0JQWW5ObGNuWmxjaUJ6YnlCcGRDQmpZVzRnWW1VZ2NHRjFjMlZrWEc1Y2RDOHZJSEJoZFhObElDMGdZM0psWVhSbElHOWljMlZ5ZG1WeUlHbHVJSEJoZFhObFpDQnpkR0YwWlZ4dVhIUXZMeUJwWmlCd1lYVnpZV0pzWlNCcGN5QjBjblZsSUhSb1pXNGdZVzRnWVdSa2FYUnBiMjVoYkNCdFpYUm9iMlFnWkdWc2FYWmxjaWhwWjI1dmNtVlFjbVYyYVc5MWN5a2dhWE1nWVhaaGFXeGhZbXhsSUhSdklITjBZWEowSUdSbGJHbDJaWEo1WEc1Y2RDOHZJSFJ2SUhCaGRYTmxJR1JsYkdsMlpYSjVJSE5sZENCaElIQnliM0JsY25SNUlHTmhiR3hsWkNCd1lYVnpaU0J2YmlCMGFHVWdablZ1WTNScGIyNGdaR1ZzYVhabGNpQjBieUIwY25WbFhHNWNkQzh2SUhCaGRYTmhZbXhsSUdseklHOXdkR2x2Ym1Gc0lIUnZJSEpsWkhWalpTQjBhR1VnWTJoaGJtTmxJRzltSUhOb1lXUnZkMmx1WnlCaElIQnliM0JsY25SNUlHOXlJRzFsZEdodlpDQnZiaUJoYm5rZ1pYaHBjM1JwYm1jZ1kyOWtaU0JqWVd4c1pXUWdaR1ZzYVhabGNseHVYSFJwWmlnaFQySnFaV04wTG05aWMyVnlkbVVnSmlZZ2RIbHdaVzltS0ZCeWIzaDVLVDA5UFZ3aVpuVnVZM1JwYjI1Y0lpa2dlMXh1WEhSY2RHWjFibU4wYVc5dUlFOWljMlZ5ZG1WeUtIUmhjbWRsZEN4allXeHNZbUZqYXl4aFkyTmxjSFJzYVhOMExIQmhkWE5oWW14bExIQmhkWE5sTEdSbGJHRjVLU0I3WEc1Y2RDQWdJQ0JjZEhaaGNpQnRaU0E5SUhSb2FYTXNJSEJ5YjNoNU8xeHVYSFFnSUNBZ1hIUm1kVzVqZEdsdmJpQmtaV3hwZG1WeUtHbG5ibTl5WlZCeVpYWnBiM1Z6TEdSbGJHRjVLU0I3WEc1Y2RDQWdJQ0JjZEZ4MFpHVnNhWFpsY2k1a1pXeGhlU0E5SUdSbGJHRjVPMXh1WEhRZ0lDQWdYSFJjZEdsbUtDRmtaV3hwZG1WeUxuQmhkWE5sS1NCN1hHNWNkQ0FnSUNBZ0lDQWdYSFJjZEdsbUtHMWxMbU5vWVc1blpYTmxkQzVzWlc1bmRHZytNQ2tnZTF4dVhIUWdJQ0FnSUNBZ0lGeDBYSFJjZEdsbUtDRnBaMjV2Y21WUWNtVjJhVzkxY3lrZ2UxeHVYSFJjZENBZ0lDQmNkQ0FnSUNCY2RGeDBkbUZ5SUdOb1lXNW5aWE1nUFNCdFpTNWphR0Z1WjJWelpYUXVabWxzZEdWeUtHWjFibU4wYVc5dUtHTm9ZVzVuWlNrZ2V5QnlaWFIxY200Z0lXRmpZMlZ3ZEd4cGMzUWdmSHdnWVdOalpYQjBiR2x6ZEM1cGJtUmxlRTltS0dOb1lXNW5aUzUwZVhCbEtUNDlNRHNnZlNrN1hHNWNkRngwSUNBZ0lDQWdJQ0JjZEZ4MFhIUnBaaWhqYUdGdVoyVnpMbXhsYm1kMGFENHdLU0I3WEc1Y2RGeDBJQ0FnSUNBZ0lDQmNkRngwWEhSY2RHTmhiR3hpWVdOcktHTm9ZVzVuWlhNcE8xeHVYSFJjZENBZ0lDQWdJQ0FnWEhSY2RGeDBmVnh1WEhRZ0lDQWdJQ0FnSUZ4MFhIUmNkSDFjYmx4MElDQWdJQ0FnSUNCY2RGeDBYSFJ0WlM1amFHRnVaMlZ6WlhRZ1BTQmJYVHRjYmx4MElDQWdJQ0FnSUNCY2RGeDBmVnh1WEhRZ0lDQWdYSFJjZEgxY2JseDBJQ0FnSUZ4MGZWeHVYSFFnSUNBZ1hIUmtaV3hwZG1WeUxuQmhkWE5sSUQwZ2NHRjFjMlU3WEc1Y2RDQWdJQ0JjZEdSbGJHbDJaWEl1WkdWc1lYa2dQU0JrWld4aGVUdGNibHgwWEhRZ0lDQWdiV1V1WjJWMElEMGdablZ1WTNScGIyNG9kR0Z5WjJWMExDQndjbTl3WlhKMGVTa2dlMXh1WEhSY2RDQWdJQ0JjZEdsbUtIQnliM0JsY25SNVBUMDlYQ0pmWDI5aWMyVnlkbVZ5WDE5Y0lpa2dlMXh1WEhSY2RDQWdJQ0JjZEZ4MGNtVjBkWEp1SUcxbE8xeHVYSFJjZENBZ0lDQmNkSDFjYmx4MFhIUWdJQ0FnWEhScFppaHdjbTl3WlhKMGVUMDlQVndpZFc1dlluTmxjblpsWENJcElIdGNibHgwWEhRZ0lDQWdYSFJjZEhKbGRIVnliaUJtZFc1amRHbHZiaWdwSUh0Y2JseDBYSFFnSUNBZ1hIUmNkRngwVDJKcVpXTjBMblZ1YjJKelpYSjJaU2gwWVhKblpYUXBPMXh1WEhSY2RDQWdJQ0JjZEZ4MFhIUnlaWFIxY200Z2RHRnlaMlYwTzF4dVhIUmNkQ0FnSUNCY2RGeDBmVHRjYmx4MFhIUWdJQ0FnWEhSOVhHNWNkRngwSUNBZ0lGeDBhV1lvY0hKdmNHVnlkSGs5UFQxY0ltUmxiR2wyWlhKY0lpa2dlMXh1WEhSY2RDQWdJQ0JjZEZ4MGNtVjBkWEp1SUdSbGJHbDJaWEk3WEc1Y2RGeDBJQ0FnSUZ4MGZWeHVYSFJjZENBZ0lDQmNkSEpsZEhWeWJpQjBZWEpuWlhSYmNISnZjR1Z5ZEhsZE8xeHVYSFJjZENBZ0lDQjlYRzVjZENBZ0lDQmNkRzFsTG5SaGNtZGxkQ0E5SUhSaGNtZGxkRHRjYmx4MElDQWdJRngwYldVdVkyaGhibWRsYzJWMElEMGdXMTA3WEc1Y2RDQWdJQ0JjZEdsbUtDRnRaUzUwWVhKblpYUXVYMTl2WW5ObGNuWmxja05oYkd4aVlXTnJjMTlmS1NCN1hHNWNkQ0FnSUNCY2RGeDBMeThnWDE5dlluTmxjblpsY2tOaGJHeGlZV05yYzE5ZklHbHpJSFZ6WldRZ1lYTWdZVzRnYVc1a1pYZ2dkRzhnWjJWMElHRjBJSFJvWlNCd2NtOTRlU0IzYUdsamFDQnBjeUIwYUdVZ2IySnpaWEoyWlhJc0lITnZJSGRsSUdOaGJpQjFibTlpYzJWeWRtVmNibHgwSUNBZ0lGeDBYSFJQWW1wbFkzUXVaR1ZtYVc1bFVISnZjR1Z5ZEhrb2RHRnlaMlYwTEZ3aVgxOXZZbk5sY25abGNrTmhiR3hpWVdOcmMxOWZYQ0lzZTJWdWRXMWxjbUZpYkdVNlptRnNjMlVzWTI5dVptbG5kWEpoWW14bE9uUnlkV1VzZDNKcGRHRmliR1U2Wm1Gc2MyVXNkbUZzZFdVNlcxMTlLVHRjYmx4MElDQWdJRngwWEhSUFltcGxZM1F1WkdWbWFXNWxVSEp2Y0dWeWRIa29kR0Z5WjJWMExGd2lYMTl2WW5ObGNuWmxjbk5mWDF3aUxIdGxiblZ0WlhKaFlteGxPbVpoYkhObExHTnZibVpwWjNWeVlXSnNaVHAwY25WbExIZHlhWFJoWW14bE9tWmhiSE5sTEhaaGJIVmxPbHRkZlNrN1hHNWNkQ0FnSUNCY2RIMWNibHgwSUNBZ0lGeDBiV1V1ZEdGeVoyVjBMbDlmYjJKelpYSjJaWEpEWVd4c1ltRmphM05mWHk1d2RYTm9LR05oYkd4aVlXTnJLVHRjYmx4MElDQWdJRngwYldVdWRHRnlaMlYwTGw5ZmIySnpaWEoyWlhKelgxOHVjSFZ6YUNoMGFHbHpLVHRjYmx4MElDQWdJRngwY0hKdmVIa2dQU0J1WlhjZ1VISnZlSGtvZEdGeVoyVjBMRzFsS1R0Y2JseDBJQ0FnSUZ4MFpHVnNhWFpsY2lobVlXeHpaU3hrWld4aGVTazdYRzVjZENBZ0lDQmNkSEpsZEhWeWJpQndjbTk0ZVR0Y2JseDBJQ0FnSUgxY2JseDBYSFJQWW5ObGNuWmxjaTV3Y205MGIzUjVjR1V1WkdWc2FYWmxjaUE5SUdaMWJtTjBhVzl1S0NrZ2UxeHVYSFJjZEZ4MGNtVjBkWEp1SUhSb2FYTXVaMlYwS0c1MWJHd3NYQ0prWld4cGRtVnlYQ0lwTzF4dVhIUmNkSDFjYmx4MElDQWdJRTlpYzJWeWRtVnlMbkJ5YjNSdmRIbHdaUzV6WlhRZ1BTQm1kVzVqZEdsdmJpaDBZWEpuWlhRc0lIQnliM0JsY25SNUxDQjJZV3gxWlNrZ2V5QXZMeUFzSUhKbFkyVnBkbVZ5WEc1Y2RDQWdJQ0JjZEhaaGNpQnZiR1IyWVd4MVpTQTlJSFJoY21kbGRGdHdjbTl3WlhKMGVWMDdYRzVjZENBZ0lDQmNkSFpoY2lCMGVYQmxJRDBnS0c5c1pIWmhiSFZsUFQwOWRXNWtaV1pwYm1Wa0lEOGdYQ0poWkdSY0lpQTZJRndpZFhCa1lYUmxYQ0lwTzF4dVhIUWdJQ0FnWEhSMFlYSm5aWFJiY0hKdmNHVnlkSGxkSUQwZ2RtRnNkV1U3WEc1Y2RDQWdJQ0JjZEdsbUtIUmhjbWRsZEM1ZlgyOWljMlZ5ZG1WeWMxOWZMbWx1WkdWNFQyWW9kR2hwY3lrK1BUQWdKaVlnS0NGMGFHbHpMbUZqWTJWd2RHeHBjM1FnZkh3Z2RHaHBjeTVoWTJObGNIUnNhWE4wTG1sdVpHVjRUMllvZEhsd1pTaytQVEFwS1NCN1hHNWNkQ0FnSUNBZ0lDQWdYSFIyWVhJZ1kyaGhibWRsSUQwZ2UyOWlhbVZqZERwMFlYSm5aWFFzYm1GdFpUcHdjbTl3WlhKMGVTeDBlWEJsT25SNWNHVjlMRnh1WEhRZ0lDQWdJQ0FnSUZ4MFhIUnpkR0Z5ZENBOUlIUm9hWE11WTJoaGJtZGxjMlYwTG14bGJtZDBhQ0E5UFQwZ01DeGNibHgwSUNBZ0lDQWdJQ0JjZEZ4MFpHVnNhWFpsY2lBOUlIUm9hWE11WkdWc2FYWmxjaWdwTzF4dVhIUWdJQ0FnSUNBZ0lGeDBhV1lvZEhsd1pUMDlQVndpZFhCa1lYUmxYQ0lwSUh0Y2JseDBJQ0FnSUNBZ0lDQmNkRngwWTJoaGJtZGxMbTlzWkZaaGJIVmxJRDBnYjJ4a2RtRnNkV1U3WEc1Y2RDQWdJQ0FnSUNBZ1hIUjlYRzVjZENBZ0lDQWdJQ0FnWEhSMGFHbHpMbU5vWVc1blpYTmxkQzV3ZFhOb0tHTm9ZVzVuWlNrN1hHNWNkQ0FnSUNBZ0lDQWdYSFJwWmloemRHRnlkQ2tnZTF4dVhIUWdJQ0FnSUNBZ0lGeDBYSFJrWld4cGRtVnlLR1poYkhObExDaDBlWEJsYjJZb1pHVnNhWFpsY2k1a1pXeGhlU2s5UFQxY0ltNTFiV0psY2x3aUlEOGdaR1ZzYVhabGNpNWtaV3hoZVNBNklERXdLU2s3WEc1Y2RDQWdJQ0FnSUNBZ1hIUjlYRzVjZENBZ0lDQmNkSDFjYmx4MElDQWdJRngwY21WMGRYSnVJSFJ5ZFdVN1hHNWNkQ0FnSUNCOU8xeHVYSFFnSUNBZ1QySnpaWEoyWlhJdWNISnZkRzkwZVhCbExtUmxiR1YwWlZCeWIzQmxjblI1SUQwZ1puVnVZM1JwYjI0b2RHRnlaMlYwTENCd2NtOXdaWEowZVNrZ2UxeHVYSFFnSUNBZ1hIUjJZWElnYjJ4a2RtRnNkV1VnUFNCMFlYSm5aWFJiY0hKdmNHVnlkSGxkTzF4dVhIUWdJQ0FnWEhRdkwybG1LSFI1Y0dWdlppaHZiR1IyWVd4MVpTa2hQVDFjSW5WdVpHVm1hVzVsWkZ3aUtTQjdYRzVjZEZ4MElDQWdJRngwWkdWc1pYUmxJSFJoY21kbGRGdHdjbTl3WlhKMGVWMDdYRzVjZEZ4MElDQWdJRngwYVdZb2RHRnlaMlYwTGw5ZmIySnpaWEoyWlhKelgxOHVhVzVrWlhoUFppaDBhR2x6S1Q0OU1DQW1KaUFoZEdocGN5NWhZMk5sY0hSc2FYTjBJSHg4SUhSb2FYTXVZV05qWlhCMGJHbHpkQzVwYm1SbGVFOW1LRndpWkdWc1pYUmxYQ0lwUGowd0tTQjdYRzVjZEZ4MElDQWdJQ0FnSUNCY2RIWmhjaUJqYUdGdVoyVWdQU0I3YjJKcVpXTjBPblJoY21kbGRDeHVZVzFsT25CeWIzQmxjblI1TEhSNWNHVTZYQ0prWld4bGRHVmNJaXh2YkdSV1lXeDFaVHB2YkdSMllXeDFaWDBzWEc1Y2RGeDBJQ0FnSUNBZ0lDQmNkRngwYzNSaGNuUWdQU0IwYUdsekxtTm9ZVzVuWlhObGRDNXNaVzVuZEdnZ1BUMDlJREFzWEc1Y2RGeDBJQ0FnSUNBZ0lDQmNkRngwWkdWc2FYWmxjaUE5SUhSb2FYTXVaR1ZzYVhabGNpZ3BPMXh1WEhSY2RDQWdJQ0FnSUNBZ1hIUjBhR2x6TG1Ob1lXNW5aWE5sZEM1d2RYTm9LR05vWVc1blpTazdYRzVjZEZ4MElDQWdJQ0FnSUNCY2RHbG1LSE4wWVhKMEtTQjdYRzVjZEZ4MElDQWdJQ0FnSUNCY2RGeDBaR1ZzYVhabGNpaG1ZV3h6WlN3b2RIbHdaVzltS0dSbGJHbDJaWEl1WkdWc1lYa3BQVDA5WENKdWRXMWlaWEpjSWlBL0lHUmxiR2wyWlhJdVpHVnNZWGtnT2lBeE1Da3BPMXh1WEhSY2RDQWdJQ0FnSUNBZ1hIUjlYRzVjZEZ4MElDQWdJRngwZlZ4dVhIUWdJQ0FnWEhRdkwzMWNibHgwSUNBZ0lGeDBjbVYwZFhKdUlIUnlkV1U3WEc1Y2RDQWdJQ0I5TzF4dVhIUWdJQ0FnVDJKelpYSjJaWEl1Y0hKdmRHOTBlWEJsTG1SbFptbHVaVkJ5YjNCbGNuUjVJRDBnWm5WdVkzUnBiMjRvZEdGeVoyVjBMQ0J3Y205d1pYSjBlU3dnWkdWelkzSnBjSFJ2Y2lrZ2UxeHVYSFFnSUNBZ1hIUlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvZEdGeVoyVjBMQ0J3Y205d1pYSjBlU3dnWkdWelkzSnBjSFJ2Y2lrN1hHNWNkQ0FnSUNCY2RHbG1LSFJoY21kbGRDNWZYMjlpYzJWeWRtVnljMTlmTG1sdVpHVjRUMllvZEdocGN5aytQVEFnSmlZZ0lYUm9hWE11WVdOalpYQjBiR2x6ZENCOGZDQjBhR2x6TG1GalkyVndkR3hwYzNRdWFXNWtaWGhQWmloY0luSmxZMjl1Wm1sbmRYSmxYQ0lwUGowd0tTQjdYRzVjZENBZ0lDQWdJQ0FnWEhSMllYSWdZMmhoYm1kbElEMGdlMjlpYW1WamREcDBZWEpuWlhRc2JtRnRaVHB3Y205d1pYSjBlU3gwZVhCbE9sd2ljbVZqYjI1bWFXZDFjbVZjSW4wc1hHNGdJQ0FnSUNBZ0lGeDBYSFJjZEhOMFlYSjBJRDBnZEdocGN5NWphR0Z1WjJWelpYUXViR1Z1WjNSb0lEMDlQU0F3TEZ4dUlDQWdJQ0FnSUNCY2RGeDBYSFJrWld4cGRtVnlJRDBnZEdocGN5NWtaV3hwZG1WeUtDazdYRzVjZENBZ0lDQWdJQ0FnWEhSMGFHbHpMbU5vWVc1blpYTmxkQzV3ZFhOb0tHTm9ZVzVuWlNrN1hHNWNkQ0FnSUNBZ0lDQWdYSFJwWmloemRHRnlkQ2tnZTF4dVhIUWdJQ0FnSUNBZ0lGeDBYSFJrWld4cGRtVnlLR1poYkhObExDaDBlWEJsYjJZb1pHVnNhWFpsY2k1a1pXeGhlU2s5UFQxY0ltNTFiV0psY2x3aUlEOGdaR1ZzYVhabGNpNWtaV3hoZVNBNklERXdLU2s3WEc1Y2RDQWdJQ0FnSUNBZ1hIUjlYRzVjZENBZ0lDQmNkSDFjYmx4MElDQWdJRngwY21WMGRYSnVJSFJ5ZFdVN1hHNWNkQ0FnSUNCOU8xeHVYSFFnSUNBZ1QySnpaWEoyWlhJdWNISnZkRzkwZVhCbExuTmxkRkJ5YjNSdmRIbHdaVTltSUQwZ1puVnVZM1JwYjI0b2RHRnlaMlYwTENCd2NtOTBiM1I1Y0dVcElIdGNibHgwSUNBZ0lGeDBkbUZ5SUc5c1pIWmhiSFZsSUQwZ1QySnFaV04wTG1kbGRGQnliM1J2ZEhsd1pVOW1LSFJoY21kbGRDazdYRzVjZENBZ0lDQmNkRTlpYW1WamRDNXpaWFJRY205MGIzUjVjR1ZQWmloMFlYSm5aWFFzSUhCeWIzUnZkSGx3WlNrN1hHNWNkQ0FnSUNCY2RHbG1LSFJoY21kbGRDNWZYMjlpYzJWeWRtVnljMTlmTG1sdVpHVjRUMllvZEdocGN5aytQVEFnSmlZZ0lYUm9hWE11WVdOalpYQjBiR2x6ZENCOGZDQjBhR2x6TG1GalkyVndkR3hwYzNRdWFXNWtaWGhQWmloY0luTmxkRkJ5YjNSdmRIbHdaVndpS1Q0OU1Da2dlMXh1WEhRZ0lDQWdJQ0FnSUZ4MGRtRnlJR05vWVc1blpTQTlJSHR2WW1wbFkzUTZkR0Z5WjJWMExHNWhiV1U2WENKZlgzQnliM1J2WDE5Y0lpeDBlWEJsT2x3aWMyVjBVSEp2ZEc5MGVYQmxYQ0lzYjJ4a1ZtRnNkV1U2YjJ4a2RtRnNkV1Y5TEZ4dUlDQWdJRngwWEhSY2RGeDBjM1JoY25RZ1BTQjBhR2x6TG1Ob1lXNW5aWE5sZEM1c1pXNW5kR2dnUFQwOUlEQXNYRzRnSUNBZ1hIUmNkRngwWEhSa1pXeHBkbVZ5SUQwZ2RHaHBjeTVrWld4cGRtVnlLQ2s3WEc1Y2RDQWdJQ0FnSUNBZ1hIUjBhR2x6TG1Ob1lXNW5aWE5sZEM1d2RYTm9LR05vWVc1blpTazdYRzVjZENBZ0lDQWdJQ0FnWEhScFppaHpkR0Z5ZENrZ2UxeHVYSFFnSUNBZ0lDQWdJRngwWEhSa1pXeHBkbVZ5S0daaGJITmxMQ2gwZVhCbGIyWW9aR1ZzYVhabGNpNWtaV3hoZVNrOVBUMWNJbTUxYldKbGNsd2lJRDhnWkdWc2FYWmxjaTVrWld4aGVTQTZJREV3S1NrN1hHNWNkQ0FnSUNBZ0lDQWdYSFI5WEc1Y2RDQWdJQ0JjZEgxY2JseDBJQ0FnSUZ4MGNtVjBkWEp1SUhSeWRXVTdYRzVjZENBZ0lDQjlPMXh1WEhRZ0lDQWdUMkp6WlhKMlpYSXVjSEp2ZEc5MGVYQmxMbkJ5WlhabGJuUkZlSFJsYm5OcGIyNXpJRDBnWm5WdVkzUnBiMjRvZEdGeVoyVjBLU0I3WEc1Y2RDQWdJQ0FnSUNBZ1QySnFaV04wTG5CeVpYWmxiblJGZUhSbGJuTnBiMjV6S0hSaGNtZGxkQ2s3WEc1Y2RDQWdJQ0JjZEdsbUtIUmhjbWRsZEM1ZlgyOWljMlZ5ZG1WeWMxOWZMbWx1WkdWNFQyWW9kR2hwY3lrK1BUQWdKaVlnSVhSb2FYTXVZV05qWlhCMGJHbHpkQ0I4ZkNCMGFHbHpMbUZqWTJWd2RHeHBjM1F1YVc1a1pYaFBaaWhjSW5CeVpYWmxiblJGZUhSbGJuTnBiMjV6WENJcFBqMHdLU0I3WEc1Y2RDQWdJQ0FnSUNBZ1hIUjJZWElnWTJoaGJtZGxJRDBnZTI5aWFtVmpkRHAwWVhKblpYUXNkSGx3WlRwY0luQnlaWFpsYm5SRmVIUmxibk5wYjI1elhDSjlMRnh1WEhSY2RGeDBYSFJjZEhOMFlYSjBJRDBnZEdocGN5NWphR0Z1WjJWelpYUXViR1Z1WjNSb0lEMDlQU0F3TEZ4dVhIUmNkRngwWEhSY2RHUmxiR2wyWlhJZ1BTQjBhR2x6TG1SbGJHbDJaWElvS1R0Y2JseDBJQ0FnSUNBZ0lDQmNkSFJvYVhNdVkyaGhibWRsYzJWMExuQjFjMmdvWTJoaGJtZGxLVHRjYmx4MElDQWdJQ0FnSUNCY2RHbG1LSE4wWVhKMEtTQjdYRzVjZENBZ0lDQWdJQ0FnWEhSY2RHUmxiR2wyWlhJb1ptRnNjMlVzS0hSNWNHVnZaaWhrWld4cGRtVnlMbVJsYkdGNUtUMDlQVndpYm5WdFltVnlYQ0lnUHlCa1pXeHBkbVZ5TG1SbGJHRjVJRG9nTVRBcEtUdGNibHgwSUNBZ0lDQWdJQ0JjZEgxY2JseDBJQ0FnSUZ4MGZWeHVYSFFnSUNBZ1hIUnlaWFIxY200Z2RISjFaVHRjYmx4MElDQWdJSDA3WEc1Y2RDQWdJQ0JQWW1wbFkzUXViMkp6WlhKMlpTQTlJR1oxYm1OMGFXOXVLRzlpYW1WamRDeGpZV3hzWW1GamF5eGhZMk5sY0hSc2FYTjBMSEJoZFhOaFlteGxMSEJoZFhObExHUmxiR0Y1S1NCN1hHNWNkQ0FnSUNCY2RISmxkSFZ5YmlCdVpYY2dUMkp6WlhKMlpYSW9iMkpxWldOMExHTmhiR3hpWVdOckxHRmpZMlZ3ZEd4cGMzUXNjR0YxYzJGaWJHVXNjR0YxYzJVc1pHVnNZWGtwTzF4dVhIUWdJQ0FnZlR0Y2JseDBJQ0FnSUU5aWFtVmpkQzUxYm05aWMyVnlkbVVnUFNCbWRXNWpkR2x2YmlodlltcGxZM1FzWTJGc2JHSmhZMnNwSUh0Y2JseDBJQ0FnSUZ4MGFXWW9iMkpxWldOMExsOWZiMkp6WlhKMlpYSkRZV3hzWW1GamEzTmZYeWtnZTF4dVhIUWdJQ0FnWEhSY2RHbG1LQ0ZqWVd4c1ltRmpheWtnZTF4dVhIUWdJQ0FnWEhSY2RGeDBiMkpxWldOMExsOWZiMkp6WlhKMlpYSkRZV3hzWW1GamEzTmZYeTV6Y0d4cFkyVW9NQ3h2WW1wbFkzUXVYMTl2WW5ObGNuWmxja05oYkd4aVlXTnJjMTlmTG14bGJtZDBhQ2s3WEc1Y2RDQWdJQ0JjZEZ4MFhIUnZZbXBsWTNRdVgxOXZZbk5sY25abGNuTmZYeTV6Y0d4cFkyVW9NQ3h2WW1wbFkzUXVYMTl2WW5ObGNuWmxjbk5mWHk1c1pXNW5kR2dwTzF4dVhIUWdJQ0FnWEhSY2RGeDBjbVYwZFhKdU8xeHVYSFFnSUNBZ1hIUmNkSDFjYmx4MElDQWdJRngwWEhSdlltcGxZM1F1WDE5dlluTmxjblpsY2tOaGJHeGlZV05yYzE5ZkxtWnZja1ZoWTJnb1puVnVZM1JwYjI0b2IySnpaWEoyWlhKallXeHNZbUZqYXl4cEtTQjdYRzVjZENBZ0lDQmNkRngwWEhScFppaGpZV3hzWW1GamF6MDlQVzlpYzJWeWRtVnlZMkZzYkdKaFkyc3BJSHRjYmx4MElDQWdJRngwWEhSY2RGeDBiMkpxWldOMExsOWZiMkp6WlhKMlpYSkRZV3hzWW1GamEzTmZYeTV6Y0d4cFkyVW9hU3d4S1R0Y2JseDBJQ0FnSUZ4MFhIUmNkRngwWkdWc1pYUmxJRzlpYW1WamRDNWZYMjlpYzJWeWRtVnljMTlmVzJsZExtTmhiR3hpWVdOck8xeHVYSFFnSUNBZ1hIUmNkRngwWEhSdlltcGxZM1F1WDE5dlluTmxjblpsY25OZlh5NXpjR3hwWTJVb2FTd3hLVHRjYmx4MElDQWdJRngwWEhSY2RIMWNibHgwSUNBZ0lGeDBYSFI5S1R0Y2JseDBJQ0FnSUZ4MGZWeHVYSFFnSUNBZ2ZUdGNibHgwSUNBZ0lFRnljbUY1TG05aWMyVnlkbVVnUFNCbWRXNWpkR2x2YmlodlltcGxZM1FzWTJGc2JHSmhZMnNzWVdOalpYQjBiR2x6ZEN4d1lYVnpZV0pzWlN4d1lYVnpaU3hrWld4aGVTa2dlMXh1WEhRZ0lDQWdYSFJwWmlnaEtHOWlhbVZqZENCcGJuTjBZVzVqWlc5bUlFRnljbUY1S1NBbUppQWhRWEp5WVhrdWFYTkJjbkpoZVNodlltcGxZM1FwS1NCN1hHNWNkQ0FnSUNCY2RGeDBkR2h5YjNjZ2JtVjNJRlI1Y0dWRmNuSnZjaWhjSWtacGNuTjBJR0Z5WjNWdFpXNTBJSFJ2SUVGeWNtRjVMbTlpYzJWeWRtVnlJR2x6SUc1dmRDQmhiaUJCY25KaGVWd2lLVHRjYmx4MElDQWdJRngwZlZ4dVhIUWdJQ0FnWEhSMllYSWdZWEp5WVhsd2NtOTRlU0E5SUc1bGR5QlFjbTk0ZVNodlltcGxZM1FzZTJkbGREb2dablZ1WTNScGIyNG9kR0Z5WjJWMExIQnliM0JsY25SNUtTQjdYRzVjZENBZ0lDQmNkRngwYVdZb2NISnZjR1Z5ZEhrOVBUMWNJblZ1YjJKelpYSjJaVndpS1NCN1hHNWNkRngwSUNBZ0lGeDBYSFJ5WlhSMWNtNGdablZ1WTNScGIyNG9ZMkZzYkdKaFkyc3BJSHRjYmx4MFhIUWdJQ0FnWEhSY2RGeDBhV1lvWTJGc2JHSmhZMnNwSUh0Y2JseDBYSFFnSUNBZ1hIUmNkRngwWEhSeVpYUjFjbTRnVDJKcVpXTjBMblZ1YjJKelpYSjJaU2gwWVhKblpYUXNZMkZzYkdKaFkyc3BPMXh1WEhSY2RDQWdJQ0JjZEZ4MFhIUjlYRzVjZEZ4MElDQWdJRngwWEhSY2RISmxkSFZ5YmlCMFlYSm5aWFF1ZFc1dlluTmxjblpsS0NrN1hHNWNkRngwSUNBZ0lGeDBYSFI5TzF4dVhIUmNkQ0FnSUNCY2RIMWNibHgwSUNBZ0lGeDBYSFJwWmlod2NtOXdaWEowZVQwOVBWd2ljM0JzYVdObFhDSXBJSHRjYmx4MElDQWdJRngwWEhSY2RISmxkSFZ5YmlCbWRXNWpkR2x2YmloemRHRnlkQ3hsYm1RcElIdGNibHgwSUNBZ0lGeDBYSFJjZEZ4MGFXWW9kSGx3Wlc5bUtITjBZWEowS1NFOVBWd2liblZ0WW1WeVhDSWdmSHdnZEhsd1pXOW1LR1Z1WkNraFBUMWNJbTUxYldKbGNsd2lLU0I3WEc1Y2RDQWdJQ0JjZEZ4MFhIUmNkRngwZEdoeWIzY2dibVYzSUZSNWNHVkZjbkp2Y2loY0lrWnBjbk4wSUhSM2J5QmhjbWQxYldWdWRITWdkRzhnUVhKeVlYa2djM0JzYVdObElHRnlaU0J1YjNRZ2JuVnRZbVZ5TENCdWRXMWlaWEpjSWlrN1hHNWNkQ0FnSUNCY2RGeDBYSFJjZEgxY2JseDBJQ0FnSUZ4MElDQWdJRngwWEhSMllYSWdjbVZ0YjNabFpDQTlJSFJvYVhNdWMyeHBZMlVvYzNSaGNuUXNjM1JoY25RclpXNWtLU3hjYmx4MElDQWdJRngwSUNBZ0lGeDBYSFJjZEdGa1pHVmtRMjkxYm5RZ1BTQW9ZWEpuZFcxbGJuUnpMbXhsYm1kMGFDQStJREVnUHlCaGNtZDFiV1Z1ZEhNdWJHVnVaM1JvTFRJZ09pQXdLU3hjYmx4MElDQWdJRngwSUNBZ0lGeDBYSFJjZEdOb1lXNW5aU0E5SUNCN2IySnFaV04wT205aWFtVmpkQ3gwZVhCbE9sd2ljM0JzYVdObFhDSXNhVzVrWlhnNmMzUmhjblFzY21WdGIzWmxaRHB5WlcxdmRtVmtMR0ZrWkdWa1EyOTFiblE2WVdSa1pXUkRiM1Z1ZEgwN1hHNWNkQ0FnSUNCY2RDQWdJQ0JjZEZ4MGRHRnlaMlYwTG5Od2JHbGpaUzVoY0hCc2VTaDBZWEpuWlhRc1lYSm5kVzFsYm5SektUdGNibHgwSUNBZ0lGeDBJQ0FnSUZ4MFhIUnBaaWhoWTJObGNIUnNhWE4wTG1sdVpHVjRUMllvWENKemNHeHBZMlZjSWlrK1BUQXBJSHRjYmx4MElDQWdJRngwSUNBZ0lGeDBYSFJjZEhaaGNpQnpkR0Z5ZENBOUlIQnliM2g1TGw5ZmIySnpaWEoyWlhKZlh5NWphR0Z1WjJWelpYUXViR1Z1WjNSb0lEMDlQU0F3TEZ4dVhIUWdJQ0FnWEhRZ0lDQWdJQ0FnSUZ4MFhIUmNkR1JsYkdsMlpYSWdQU0J3Y205NGVTNWZYMjlpYzJWeWRtVnlYMTh1WkdWc2FYWmxjaWdwTzF4dVhIUWdJQ0FnWEhRZ0lDQWdYSFJjZEZ4MGNISnZlSGt1WDE5dlluTmxjblpsY2w5ZkxtTm9ZVzVuWlhObGRDNXdkWE5vS0dOb1lXNW5aU2s3WEc1Y2RDQWdJQ0JjZENBZ0lDQmNkRngwWEhScFppaHpkR0Z5ZENrZ2UxeHVYSFFnSUNBZ1hIUmNkQ0FnSUNBZ0lDQWdYSFJjZEdSbGJHbDJaWElvWm1Gc2MyVXNLSFI1Y0dWdlppaGtaV3hwZG1WeUxtUmxiR0Y1S1QwOVBWd2liblZ0WW1WeVhDSWdQeUJrWld4cGRtVnlMbVJsYkdGNUlEb2dNVEFwS1R0Y2JseDBJQ0FnSUZ4MFhIUWdJQ0FnSUNBZ0lGeDBmVnh1WEhRZ0lDQWdYSFFnSUNBZ1hIUmNkSDFjYmx4MElDQWdJRngwSUNBZ0lGeDBmVnh1WEhRZ0lDQWdYSFJjZEgxY2JseDBJQ0FnSUZ4MFhIUnBaaWh3Y205d1pYSjBlVDA5UFZ3aWNIVnphRndpS1NCN1hHNWNkQ0FnSUNCY2RGeDBYSFFnY21WMGRYSnVJR1oxYm1OMGFXOXVLR2wwWlcwcElIdGNibHgwSUNBZ0lGeDBYSFFnSUNBZ1hIUnlaWFIxY200Z2RHaHBjeTV6Y0d4cFkyVW9kR2hwY3k1c1pXNW5kR2dzTUN4cGRHVnRLVHRjYmx4MElDQWdJRngwWEhRZ0lDQWdmVnh1WEhRZ0lDQWdYSFJjZEgxY2JseDBJQ0FnSUZ4MFhIUnBaaWh3Y205d1pYSjBlVDA5UFZ3aWNHOXdYQ0lwSUh0Y2JseDBJQ0FnSUZ4MFhIUmNkQ0J5WlhSMWNtNGdablZ1WTNScGIyNG9LU0I3WEc1Y2RDQWdJQ0JjZEZ4MElDQWdJRngwY21WMGRYSnVJSFJvYVhNdWMzQnNhV05sS0hSb2FYTXViR1Z1WjNSb0xURXNNU2s3WEc1Y2RDQWdJQ0JjZEZ4MElDQWdJSDFjYmx4MElDQWdJRngwWEhSOVhHNWNkQ0FnSUNCY2RGeDBhV1lvY0hKdmNHVnlkSGs5UFQxY0luVnVjMmhwWm5SY0lpa2dlMXh1WEhRZ0lDQWdYSFJjZEZ4MElISmxkSFZ5YmlCbWRXNWpkR2x2YmlocGRHVnRLU0I3WEc0Z0lDQWdYSFJjZENBZ0lDQmNkRngwY21WMGRYSnVJSFJvYVhNdWMzQnNhV05sS0RBc01DeHBkR1Z0S1R0Y2JpQWdJQ0JjZEZ4MElDQWdJRngwZlZ4dVhIUWdJQ0FnWEhSY2RIMWNibHgwSUNBZ0lGeDBYSFJwWmlod2NtOXdaWEowZVQwOVBWd2ljMmhwWm5SY0lpa2dlMXh1WEhRZ0lDQWdYSFJjZEZ4MGNtVjBkWEp1SUdaMWJtTjBhVzl1S0NrZ2UxeHVYSFFnSUNBZ1hIUWdJQ0FnWEhSY2RISmxkSFZ5YmlCMGFHbHpMbk53YkdsalpTZ3dMREVwTzF4dVhIUWdJQ0FnWEhRZ0lDQWdYSFI5WEc1Y2RDQWdJQ0JjZEZ4MGZWeHVYSFFnSUNBZ1hIUmNkSEpsZEhWeWJpQjBZWEpuWlhSYmNISnZjR1Z5ZEhsZE8xeHVYSFFnSUNBZ1hIUjlmU2s3WEc1Y2RDQWdJQ0JjZEhaaGNpQndjbTk0ZVNBOUlFOWlhbVZqZEM1dlluTmxjblpsS0dGeWNtRjVjSEp2ZUhrc1puVnVZM1JwYjI0b1kyaGhibWRsYzJWMEtTQjdJRnh1WEhRZ0lDQWdYSFJjZEhaaGNpQmphR0Z1WjJWeklEMGdZMmhoYm1kbGMyVjBMbVpwYkhSbGNpaG1kVzVqZEdsdmJpaGphR0Z1WjJVcElIc2djbVYwZFhKdUlHTm9ZVzVuWlM1dVlXMWxJVDA5WENKc1pXNW5kR2hjSWlBbUppQmphR0Z1WjJVdWJtRnRaU0U5UFZ3aVlXUmtYQ0lnSmlZZ0tDRmhZMk5sY0hSc2FYTjBJSHg4SUdGalkyVndkR3hwYzNRdWFXNWtaWGhQWmloamFHRnVaMlV1ZEhsd1pTaytQVEFwT3lCOUtUdGNibHgwSUNBZ0lGeDBYSFJwWmloamFHRnVaMlZ6TG14bGJtZDBhRDR3S1NCN1hHNWNkQ0FnSUNCY2RGeDBYSFJqWVd4c1ltRmpheWhqYUdGdVoyVnpLVHRjYmx4MElDQWdJRngwWEhSOVhHNWNkQ0FnSUNCY2RIMHNZV05qWlhCMGJHbHpkQ3h3WVhWellXSnNaU3h3WVhWelpTeGtaV3hoZVNrN1hHNWNkQ0FnSUNCY2RISmxkSFZ5YmlCd2NtOTRlVHRjYmx4MElDQWdJSDA3WEc1Y2RDQWdJQ0JCY25KaGVTNTFibTlpYzJWeWRtVWdQU0JtZFc1amRHbHZiaWh2WW1wbFkzUXNZMkZzYkdKaFkyc3BJSHRjYmx4MFhIUWdJSEpsZEhWeWJpQnZZbXBsWTNRdWRXNXZZbk5sY25abEtHTmhiR3hpWVdOcktUdGNibHgwSUNBZ0lIMWNibHgwZlZ4dVhIUlBZbXBsWTNRdVpHVmxjRTlpYzJWeWRtVWdQU0JtZFc1amRHbHZiaWh2WW1wbFkzUXNZMkZzYkdKaFkyc3NjR0Z5ZEhNcElIdGNibHgwWEhSd1lYSjBjeUE5SUNod1lYSjBjeUEvSUhCaGNuUnpJRG9nVzEwcE8xeHVYSFJjZEhaaGNpQnJaWGx6SUQwZ1QySnFaV04wTG10bGVYTW9iMkpxWldOMEtUdGNibHgwWEhSclpYbHpMbVp2Y2tWaFkyZ29ablZ1WTNScGIyNG9hMlY1S1NCN1hHNWNkRngwWEhScFppaHZZbXBsWTNSYmEyVjVYU0JwYm5OMFlXNWpaVzltSUU5aWFtVmpkQ2tnZTF4dVhIUmNkRngwWEhSMllYSWdibVYzY0dGeWRITWdQU0J3WVhKMGN5NXpiR2xqWlNnd0tUdGNibHgwWEhSY2RGeDBibVYzY0dGeWRITXVjSFZ6YUNoclpYa3BPMXh1WEhSY2RGeDBYSFJ2WW1wbFkzUmJhMlY1WFNBOUlFOWlhbVZqZEM1a1pXVndUMkp6WlhKMlpTaHZZbXBsWTNSYmEyVjVYU3hqWVd4c1ltRmpheXh1Wlhkd1lYSjBjeWs3WEc1Y2RGeDBYSFI5WEc1Y2RGeDBmU2s3WEc1Y2RGeDBkbUZ5SUc5aWMyVnlkbVZrSUQwZ1QySnFaV04wTG05aWMyVnlkbVVvYjJKcVpXTjBMR1oxYm1OMGFXOXVLR05vWVc1blpYTmxkQ2tnZTF4dVhIUmNkRngwZG1GeUlHTm9ZVzVuWlhNZ1BTQmJYVHRjYmx4MFhIUmNkR1oxYm1OMGFXOXVJSEpsWTNWeWMyVW9ibUZ0WlN4eWIyOTBUMkpxWldOMExHOXNaRTlpYW1WamRDeHVaWGRQWW1wbFkzUXNjR0YwYUNrZ2UxeHVYSFJjZEZ4MFhIUnBaaWh1WlhkUFltcGxZM1FnYVc1emRHRnVZMlZ2WmlCUFltcGxZM1FwSUh0Y2JseDBYSFJjZEZ4MFhIUjJZWElnYm1WM2EyVjVjeUE5SUU5aWFtVmpkQzVyWlhsektHNWxkMDlpYW1WamRDazdYRzVjZEZ4MFhIUmNkRngwYm1WM2EyVjVjeTVtYjNKRllXTm9LR1oxYm1OMGFXOXVLR3RsZVNrZ2UxeHVYSFJjZEZ4MFhIUmNkRngwYVdZb0lXOXNaRTlpYW1WamRDQjhmQ0FvYjJ4a1QySnFaV04wVzJ0bGVWMGhQVDF1WlhkUFltcGxZM1JiYTJWNVhTa3BJSHRjYmx4MFhIUmNkRngwWEhSY2RGeDBkbUZ5SUc5c1pIWmhiSFZsSUQwZ0tHOXNaRTlpYW1WamRDQW1KaUJ2YkdSUFltcGxZM1JiYTJWNVhTRTlQWFZ1WkdWbWFXNWxaQ0EvSUc5c1pFOWlhbVZqZEZ0clpYbGRJRG9nZFc1a1pXWnBibVZrS1N4Y2JseDBYSFJjZEZ4MFhIUmNkRngwWEhSamFHRnVaMlVnUFNBb2IyeGtkbUZzZFdVOVBUMTFibVJsWm1sdVpXUWdQeUJjSW1Ga1pGd2lJRG9nWENKMWNHUmhkR1ZjSWlrc1hHNWNkRngwWEhSY2RGeDBYSFJjZEZ4MGEyVjVjR0YwYUNBOUlIQmhkR2dnS3lCY0lpNWNJaUFySUd0bGVUdGNibHgwWEhSY2RGeDBYSFJjZEZ4MFkyaGhibWRsY3k1d2RYTm9LSHR1WVcxbE9tNWhiV1VzYjJKcVpXTjBPbkp2YjNSUFltcGxZM1FzZEhsd1pUcGphR0Z1WjJVc2IyeGtWbUZzZFdVNmIyeGtkbUZzZFdVc2JtVjNWbUZzZFdVNmJtVjNUMkpxWldOMFcydGxlVjBzYTJWNWNHRjBhRHByWlhsd1lYUm9mU2s3WEc1Y2RGeDBYSFJjZEZ4MFhIUmNkSEpsWTNWeWMyVW9ibUZ0WlN4eWIyOTBUMkpxWldOMExHOXNaSFpoYkhWbExHNWxkMDlpYW1WamRGdHJaWGxkTEd0bGVYQmhkR2dwTzF4dVhIUmNkRngwWEhSY2RGeDBmVnh1WEhSY2RGeDBYSFJjZEgwcE8xeHVYSFJjZEZ4MFhIUjlJR1ZzYzJVZ2FXWW9iMnhrVDJKcVpXTjBJR2x1YzNSaGJtTmxiMllnVDJKcVpXTjBLU0I3WEc1Y2RGeDBYSFJjZEZ4MGRtRnlJRzlzWkd0bGVYTWdQU0JQWW1wbFkzUXVhMlY1Y3lodmJHUlBZbXBsWTNRcE8xeHVYSFJjZEZ4MFhIUmNkRzlzWkd0bGVYTXVabTl5UldGamFDaG1kVzVqZEdsdmJpaHJaWGtwSUh0Y2JseDBYSFJjZEZ4MFhIUmNkSFpoY2lCamFHRnVaMlVnUFNBb2JtVjNUMkpxWldOMFBUMDliblZzYkNBL0lGd2lkWEJrWVhSbFhDSWdPaUJjSW1SbGJHVjBaVndpS1N4Y2JseDBYSFJjZEZ4MFhIUmNkRngwYTJWNWNHRjBhQ0E5SUhCaGRHZ2dLeUJjSWk1Y0lpQXJJR3RsZVR0Y2JseDBYSFJjZEZ4MFhIUmNkR05vWVc1blpYTXVjSFZ6YUNoN2JtRnRaVHB1WVcxbExHOWlhbVZqZERweWIyOTBUMkpxWldOMExIUjVjR1U2WTJoaGJtZGxMRzlzWkZaaGJIVmxPbTlzWkU5aWFtVmpkRnRyWlhsZExHNWxkMVpoYkhWbE9tNWxkMDlpYW1WamRDeHJaWGx3WVhSb09tdGxlWEJoZEdoOUtUdGNibHgwWEhSY2RGeDBYSFJjZEhKbFkzVnljMlVvYm1GdFpTeHliMjkwVDJKcVpXTjBMRzlzWkU5aWFtVmpkRnRyWlhsZExIVnVaR1ZtYVc1bFpDeHJaWGx3WVhSb0tUdGNibHgwWEhSY2RGeDBYSFI5S1R0Y2JseDBYSFJjZEZ4MGZWeHVYSFJjZEZ4MGZWeHVYSFJjZEZ4MFkyaGhibWRsYzJWMExtWnZja1ZoWTJnb1puVnVZM1JwYjI0b1kyaGhibWRsS1NCN1hHNWNkRngwWEhSY2RIWmhjaUJyWlhsd1lYUm9JRDBnS0hCaGNuUnpMbXhsYm1kMGFENHdJRDhnY0dGeWRITXVhbTlwYmloY0lpNWNJaWtnS3lCY0lpNWNJaUE2SUZ3aVhDSXBJQ3NnWTJoaGJtZGxMbTVoYldVN1hHNWNkRngwWEhSY2RHTm9ZVzVuWlhNdWNIVnphQ2g3Ym1GdFpUcGphR0Z1WjJVdWJtRnRaU3h2WW1wbFkzUTZZMmhoYm1kbExtOWlhbVZqZEN4MGVYQmxPbU5vWVc1blpTNTBlWEJsTEc5c1pGWmhiSFZsT21Ob1lXNW5aUzV2YkdSV1lXeDFaU3h1WlhkV1lXeDFaVHBqYUdGdVoyVXViMkpxWldOMFcyTm9ZVzVuWlM1dVlXMWxYU3hyWlhsd1lYUm9PbXRsZVhCaGRHaDlLVHRjYmx4MFhIUmNkRngwY21WamRYSnpaU2hqYUdGdVoyVXVibUZ0WlN4amFHRnVaMlV1YjJKcVpXTjBMR05vWVc1blpTNXZiR1JXWVd4MVpTeGphR0Z1WjJVdWIySnFaV04wVzJOb1lXNW5aUzV1WVcxbFhTeHJaWGx3WVhSb0tUdGNibHgwWEhSY2RIMHBPMXh1WEhSY2RGeDBZMkZzYkdKaFkyc29ZMmhoYm1kbGN5azdYRzVjZEZ4MGZTazdYRzVjZEZ4MGNtVjBkWEp1SUc5aWMyVnlkbVZrTzF4dVhIUjlPMXh1ZlNrb0tUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dmNISnZlSGt0YjJKelpYSjJaUzlwYm1SbGVDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVFV6WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DSXNJbWx0Y0c5eWRDQlRlVzVqYUdWeUlHWnliMjBnSnk0dmMzbHVZMmhsY2k5VGVXNWphR1Z5Snp0Y2JtbHRjRzl5ZENCRVlYUmhUMkpxWldOMFVtVndiM0owWlhJZ1puSnZiU0FuTGk5emVXNWphR1Z5TDBSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2ljN1hHNXBiWEJ2Y25RZ1JHRjBZVTlpYW1WamRFOWljMlZ5ZG1WeUlHWnliMjBnSnk0dmMzbHVZMmhsY2k5RVlYUmhUMkpxWldOMFQySnpaWEoyWlhJbk8xeHVYRzVsZUhCdmNuUWdlMU41Ym1Ob1pYSXNJRVJoZEdGUFltcGxZM1JTWlhCdmNuUmxjaXdnUkdGMFlVOWlhbVZqZEU5aWMyVnlkbVZ5ZlR0Y2JseHVYRzVjYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTSUM4dlhHNHZMeUF1TDNOeVl5OVRlVzVqYUdWeUxtcHpJbDBzSW5OdmRYSmpaVkp2YjNRaU9pSWlmUT09CgovKioqLyB9Ci8qKioqKiovIF0pCn0pOwo7",
      "sourceCodeClassname": "SlackProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-aaf84b28-7f8b-b2e6-93d7-4784864cd37b4",
    "version": 1.2,
    "description": "Description of SlackProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "SlackProtoStub",
    "configuration": {},
    "messageSchemas": "",
    "signature": "",
    "interworking": true,
    "accessControlPolicy": "somePolicy",
    "constraints": "",
    "dataObjects": []
  },
  "sip.quobis.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGdyYW1tYXIgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICB2OiBbewogICAgICBuYW1lOiAndmVyc2lvbicsCiAgICAgIHJlZzogL14oXGQqKSQvCiAgfV0sCiAgbzogW3sgLy9vPS0gMjA1MTggMCBJTiBJUDQgMjAzLjAuMTEzLjEKICAgIC8vIE5COiBzZXNzaW9uSWQgd2lsbCBiZSBhIFN0cmluZyBpbiBtb3N0IGNhc2VzIGJlY2F1c2UgaXQgaXMgaHVnZQogICAgbmFtZTogJ29yaWdpbicsCiAgICByZWc6IC9eKFxTKikgKFxkKikgKFxkKikgKFxTKikgSVAoXGQpIChcUyopLywKICAgIG5hbWVzOiBbJ3VzZXJuYW1lJywgJ3Nlc3Npb25JZCcsICdzZXNzaW9uVmVyc2lvbicsICduZXRUeXBlJywgJ2lwVmVyJywgJ2FkZHJlc3MnXSwKICAgIGZvcm1hdDogIiVzICVzICVkICVzIElQJWQgJXMiCiAgfV0sCiAgLy8gZGVmYXVsdCBwYXJzaW5nIG9mIHRoZXNlIG9ubHkgKHRob3VnaCBzb21lIG9mIHRoZXNlIGZlZWwgb3V0ZGF0ZWQpCiAgczogW3sgbmFtZTogJ25hbWUnIH1dLAogIGk6IFt7IG5hbWU6ICdkZXNjcmlwdGlvbicgfV0sCiAgdTogW3sgbmFtZTogJ3VyaScgfV0sCiAgZTogW3sgbmFtZTogJ2VtYWlsJyB9XSwKICBwOiBbeyBuYW1lOiAncGhvbmUnIH1dLAogIHo6IFt7IG5hbWU6ICd0aW1lem9uZXMnIH1dLCAvLyBUT0RPOiB0aGlzIG9uZSBjYW4gYWN0dWFsbHkgYmUgcGFyc2VkIHByb3Blcmx5Li4KICByOiBbeyBuYW1lOiAncmVwZWF0cycgfV0sICAgLy8gVE9ETzogdGhpcyBvbmUgY2FuIGFsc28gYmUgcGFyc2VkIHByb3Blcmx5CiAgLy9rOiBbe31dLCAvLyBvdXRkYXRlZCB0aGluZyBpZ25vcmVkCiAgdDogW3sgLy90PTAgMAogICAgbmFtZTogJ3RpbWluZycsCiAgICByZWc6IC9eKFxkKikgKFxkKikvLAogICAgbmFtZXM6IFsnc3RhcnQnLCAnc3RvcCddLAogICAgZm9ybWF0OiAiJWQgJWQiCiAgfV0sCiAgYzogW3sgLy9jPUlOIElQNCAxMC40Ny4xOTcuMjYKICAgICAgbmFtZTogJ2Nvbm5lY3Rpb24nLAogICAgICByZWc6IC9eSU4gSVAoXGQpIChcUyopLywKICAgICAgbmFtZXM6IFsndmVyc2lvbicsICdpcCddLAogICAgICBmb3JtYXQ6ICJJTiBJUCVkICVzIgogIH1dLAogIGI6IFt7IC8vYj1BUzo0MDAwCiAgICAgIHB1c2g6ICdiYW5kd2lkdGgnLAogICAgICByZWc6IC9eKFRJQVN8QVN8Q1R8UlJ8UlMpOihcZCopLywKICAgICAgbmFtZXM6IFsndHlwZScsICdsaW1pdCddLAogICAgICBmb3JtYXQ6ICIlczolcyIKICB9XSwKICBtOiBbeyAvL209dmlkZW8gNTE3NDQgUlRQL0FWUCAxMjYgOTcgOTggMzQgMzEKICAgICAgLy8gTkI6IHNwZWNpYWwgLSBwdXNoZXMgdG8gc2Vzc2lvbgogICAgICAvLyBUT0RPOiBydHAvZm10cCBzaG91bGQgYmUgZmlsdGVyZWQgYnkgdGhlIHBheWxvYWRzIGZvdW5kIGhlcmU/CiAgICAgIHJlZzogL14oXHcqKSAoXGQqKSAoW1x3XC9dKikoPzogKC4qKSk/LywKICAgICAgbmFtZXM6IFsndHlwZScsICdwb3J0JywgJ3Byb3RvY29sJywgJ3BheWxvYWRzJ10sCiAgICAgIGZvcm1hdDogIiVzICVkICVzICVzIgogIH1dLAogIGE6IFsKICAgIHsgLy9hPXJ0cG1hcDoxMTAgb3B1cy80ODAwMC8yCiAgICAgIHB1c2g6ICdydHAnLAogICAgICByZWc6IC9ecnRwbWFwOihcZCopIChbXHdcLVwuXSopKD86XHMqXC8oXGQqKSg/OlxzKlwvKFxTKikpPyk/LywKICAgICAgbmFtZXM6IFsncGF5bG9hZCcsICdjb2RlYycsICdyYXRlJywgJ2VuY29kaW5nJ10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICByZXR1cm4gKG8uZW5jb2RpbmcpID8KICAgICAgICAgICJydHBtYXA6JWQgJXMvJXMvJXMiOgogICAgICAgICAgby5yYXRlID8KICAgICAgICAgICJydHBtYXA6JWQgJXMvJXMiOgogICAgICAgICAgInJ0cG1hcDolZCAlcyI7CiAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgIC8vYT1mbXRwOjEwOCBwcm9maWxlLWxldmVsLWlkPTI0O29iamVjdD0yMztiaXRyYXRlPTY0MDAwCiAgICAgIC8vYT1mbXRwOjExMSBtaW5wdGltZT0xMDsgdXNlaW5iYW5kZmVjPTEKICAgICAgcHVzaDogJ2ZtdHAnLAogICAgICByZWc6IC9eZm10cDooXGQqKSAoW1xTfCBdKikvLAogICAgICBuYW1lczogWydwYXlsb2FkJywgJ2NvbmZpZyddLAogICAgICBmb3JtYXQ6ICJmbXRwOiVkICVzIgogICAgfSwKICAgIHsgLy9hPWNvbnRyb2w6c3RyZWFtaWQ9MAogICAgICAgIG5hbWU6ICdjb250cm9sJywKICAgICAgICByZWc6IC9eY29udHJvbDooLiopLywKICAgICAgICBmb3JtYXQ6ICJjb250cm9sOiVzIgogICAgfSwKICAgIHsgLy9hPXJ0Y3A6NjUxNzkgSU4gSVA0IDE5My44NC43Ny4xOTQKICAgICAgbmFtZTogJ3J0Y3AnLAogICAgICByZWc6IC9ecnRjcDooXGQqKSg/OiAoXFMqKSBJUChcZCkgKFxTKikpPy8sCiAgICAgIG5hbWVzOiBbJ3BvcnQnLCAnbmV0VHlwZScsICdpcFZlcicsICdhZGRyZXNzJ10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICByZXR1cm4gKG8uYWRkcmVzcyAhPSBudWxsKSA/CiAgICAgICAgICAicnRjcDolZCAlcyBJUCVkICVzIjoKICAgICAgICAgICJydGNwOiVkIjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPXJ0Y3AtZmI6OTggdHJyLWludCAxMDAKICAgICAgcHVzaDogJ3J0Y3BGYlRyckludCcsCiAgICAgIHJlZzogL15ydGNwLWZiOihcKnxcZCopIHRyci1pbnQgKFxkKikvLAogICAgICBuYW1lczogWydwYXlsb2FkJywgJ3ZhbHVlJ10sCiAgICAgIGZvcm1hdDogInJ0Y3AtZmI6JWQgdHJyLWludCAlZCIKICAgIH0sCiAgICB7IC8vYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQogICAgICBwdXNoOiAncnRjcEZiJywKICAgICAgcmVnOiAvXnJ0Y3AtZmI6KFwqfFxkKikgKFtcdy1fXSopKD86IChbXHctX10qKSk/LywKICAgICAgbmFtZXM6IFsncGF5bG9hZCcsICd0eXBlJywgJ3N1YnR5cGUnXSwKICAgICAgZm9ybWF0OiBmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiAoby5zdWJ0eXBlICE9IG51bGwpID8KICAgICAgICAgICJydGNwLWZiOiVzICVzICVzIjoKICAgICAgICAgICJydGNwLWZiOiVzICVzIjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPWV4dG1hcDoyIHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnRvZmZzZXQKICAgICAgLy9hPWV4dG1hcDoxL3JlY3Zvbmx5IFVSSS1ncHMtc3RyaW5nCiAgICAgIHB1c2g6ICdleHQnLAogICAgICByZWc6IC9eZXh0bWFwOihbXHdfXC9dKikgKFxTKikoPzogKFxTKikpPy8sCiAgICAgIG5hbWVzOiBbJ3ZhbHVlJywgJ3VyaScsICdjb25maWcnXSwgLy8gdmFsdWUgbWF5IGluY2x1ZGUgIi9kaXJlY3Rpb24iIHN1ZmZpeAogICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIChvLmNvbmZpZyAhPSBudWxsKSA/CiAgICAgICAgICAiZXh0bWFwOiVzICVzICVzIjoKICAgICAgICAgICJleHRtYXA6JXMgJXMiOwogICAgICB9CiAgICB9LAogICAgewogICAgICAvL2E9Y3J5cHRvOjEgQUVTX0NNXzEyOF9ITUFDX1NIQTFfODAgaW5saW5lOlBTMXVRQ1ZlZUNGQ2FuVm1jamtwUHl3ak5XaGNZRDBtWFh0eGFWQlJ8Ml4yMHwxOjMyCiAgICAgIHB1c2g6ICdjcnlwdG8nLAogICAgICByZWc6IC9eY3J5cHRvOihcZCopIChbXHdfXSopIChcUyopKD86IChcUyopKT8vLAogICAgICBuYW1lczogWydpZCcsICdzdWl0ZScsICdjb25maWcnLCAnc2Vzc2lvbkNvbmZpZyddLAogICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIChvLnNlc3Npb25Db25maWcgIT0gbnVsbCkgPwogICAgICAgICAgImNyeXB0bzolZCAlcyAlcyAlcyI6CiAgICAgICAgICAiY3J5cHRvOiVkICVzICVzIjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPXNldHVwOmFjdHBhc3MKICAgICAgbmFtZTogJ3NldHVwJywKICAgICAgcmVnOiAvXnNldHVwOihcdyopLywKICAgICAgZm9ybWF0OiAic2V0dXA6JXMiCiAgICB9LAogICAgeyAvL2E9bWlkOjEKICAgICAgbmFtZTogJ21pZCcsCiAgICAgIHJlZzogL15taWQ6KFteXHNdKikvLAogICAgICBmb3JtYXQ6ICJtaWQ6JXMiCiAgICB9LAogICAgeyAvL2E9bXNpZDowYzhiMDY0ZC1kODA3LTQzYjQtYjQzNC1mOTJhODg5ZDg1ODcgOTgxNzg2ODUtZDQwOS00NmUwLThlMTYtN2VmMGRiMGRiNjRhCiAgICAgIG5hbWU6ICdtc2lkJywKICAgICAgcmVnOiAvXm1zaWQ6KC4qKS8sCiAgICAgIGZvcm1hdDogIm1zaWQ6JXMiCiAgICB9LAogICAgeyAvL2E9cHRpbWU6MjAKICAgICAgbmFtZTogJ3B0aW1lJywKICAgICAgcmVnOiAvXnB0aW1lOihcZCopLywKICAgICAgZm9ybWF0OiAicHRpbWU6JWQiCiAgICB9LAogICAgeyAvL2E9bWF4cHRpbWU6NjAKICAgICAgbmFtZTogJ21heHB0aW1lJywKICAgICAgcmVnOiAvXm1heHB0aW1lOihcZCopLywKICAgICAgZm9ybWF0OiAibWF4cHRpbWU6JWQiCiAgICB9LAogICAgeyAvL2E9c2VuZHJlY3YKICAgICAgbmFtZTogJ2RpcmVjdGlvbicsCiAgICAgIHJlZzogL14oc2VuZHJlY3Z8cmVjdm9ubHl8c2VuZG9ubHl8aW5hY3RpdmUpLwogICAgfSwKICAgIHsgLy9hPWljZS1saXRlCiAgICAgIG5hbWU6ICdpY2VsaXRlJywKICAgICAgcmVnOiAvXihpY2UtbGl0ZSkvCiAgICB9LAogICAgeyAvL2E9aWNlLXVmcmFnOkY3Z0kKICAgICAgbmFtZTogJ2ljZVVmcmFnJywKICAgICAgcmVnOiAvXmljZS11ZnJhZzooXFMqKS8sCiAgICAgIGZvcm1hdDogImljZS11ZnJhZzolcyIKICAgIH0sCiAgICB7IC8vYT1pY2UtcHdkOng5Y21sL1l6aWNoVjIrWGxoaU11OGcKICAgICAgbmFtZTogJ2ljZVB3ZCcsCiAgICAgIHJlZzogL15pY2UtcHdkOihcUyopLywKICAgICAgZm9ybWF0OiAiaWNlLXB3ZDolcyIKICAgIH0sCiAgICB7IC8vYT1maW5nZXJwcmludDpTSEEtMSAwMDoxMToyMjozMzo0NDo1NTo2Njo3Nzo4ODo5OTpBQTpCQjpDQzpERDpFRTpGRjowMDoxMToyMjozMwogICAgICBuYW1lOiAnZmluZ2VycHJpbnQnLAogICAgICByZWc6IC9eZmluZ2VycHJpbnQ6KFxTKikgKFxTKikvLAogICAgICBuYW1lczogWyd0eXBlJywgJ2hhc2gnXSwKICAgICAgZm9ybWF0OiAiZmluZ2VycHJpbnQ6JXMgJXMiCiAgICB9LAogICAgewogICAgICAvL2E9Y2FuZGlkYXRlOjAgMSBVRFAgMjExMzY2NzMyNyAyMDMuMC4xMTMuMSA1NDQwMCB0eXAgaG9zdAogICAgICAvL2E9Y2FuZGlkYXRlOjExNjI4NzUwODEgMSB1ZHAgMjExMzkzNzE1MSAxOTIuMTY4LjM0Ljc1IDYwMDE3IHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDMgbmV0d29yay1jb3N0IDEwCiAgICAgIC8vYT1jYW5kaWRhdGU6MzI4OTkxMjk1NyAyIHVkcCAxODQ1NTAxNjk1IDE5My44NC43Ny4xOTQgNjAwMTcgdHlwIHNyZmx4IHJhZGRyIDE5Mi4xNjguMzQuNzUgcnBvcnQgNjAwMTcgZ2VuZXJhdGlvbiAwIG5ldHdvcmstaWQgMyBuZXR3b3JrLWNvc3QgMTAKICAgICAgLy9hPWNhbmRpZGF0ZToyMjk4MTU2MjAgMSB0Y3AgMTUxODI4MDQ0NyAxOTIuMTY4LjE1MC4xOSA2MDAxNyB0eXAgaG9zdCB0Y3B0eXBlIGFjdGl2ZSBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAzIG5ldHdvcmstY29zdCAxMAogICAgICAvL2E9Y2FuZGlkYXRlOjMyODk5MTI5NTcgMiB0Y3AgMTg0NTUwMTY5NSAxOTMuODQuNzcuMTk0IDYwMDE3IHR5cCBzcmZseCByYWRkciAxOTIuMTY4LjM0Ljc1IHJwb3J0IDYwMDE3IHRjcHR5cGUgcGFzc2l2ZSBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAzIG5ldHdvcmstY29zdCAxMAogICAgICBwdXNoOidjYW5kaWRhdGVzJywKICAgICAgcmVnOiAvXmNhbmRpZGF0ZTooXFMqKSAoXGQqKSAoXFMqKSAoXGQqKSAoXFMqKSAoXGQqKSB0eXAgKFxTKikoPzogcmFkZHIgKFxTKikgcnBvcnQgKFxkKikpPyg/OiB0Y3B0eXBlIChcUyopKT8oPzogZ2VuZXJhdGlvbiAoXGQqKSk/KD86IG5ldHdvcmstaWQgKFxkKikpPyg/OiBuZXR3b3JrLWNvc3QgKFxkKikpPy8sCiAgICAgIG5hbWVzOiBbJ2ZvdW5kYXRpb24nLCAnY29tcG9uZW50JywgJ3RyYW5zcG9ydCcsICdwcmlvcml0eScsICdpcCcsICdwb3J0JywgJ3R5cGUnLCAncmFkZHInLCAncnBvcnQnLCAndGNwdHlwZScsICdnZW5lcmF0aW9uJywgJ25ldHdvcmstaWQnLCAnbmV0d29yay1jb3N0J10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICB2YXIgc3RyID0gImNhbmRpZGF0ZTolcyAlZCAlcyAlZCAlcyAlZCB0eXAgJXMiOwoKICAgICAgICBzdHIgKz0gKG8ucmFkZHIgIT0gbnVsbCkgPyAiIHJhZGRyICVzIHJwb3J0ICVkIiA6ICIldiV2IjsKCiAgICAgICAgLy8gTkI6IGNhbmRpZGF0ZSBoYXMgdGhyZWUgb3B0aW9uYWwgY2h1bmtzLCBzbyAldm9pZCBtaWRkbGVzIG9uZSBpZiBpdCdzIG1pc3NpbmcKICAgICAgICBzdHIgKz0gKG8udGNwdHlwZSAhPSBudWxsKSA/ICIgdGNwdHlwZSAlcyIgOiAiJXYiOwoKICAgICAgICBpZiAoby5nZW5lcmF0aW9uICE9IG51bGwpIHsKICAgICAgICAgIHN0ciArPSAiIGdlbmVyYXRpb24gJWQiOwogICAgICAgIH0KCiAgICAgICAgc3RyICs9IChvWyduZXR3b3JrLWlkJ10gIT0gbnVsbCkgPyAiIG5ldHdvcmstaWQgJWQiIDogIiV2IjsKICAgICAgICBzdHIgKz0gKG9bJ25ldHdvcmstY29zdCddICE9IG51bGwpID8gIiBuZXR3b3JrLWNvc3QgJWQiIDogIiV2IjsKICAgICAgICByZXR1cm4gc3RyOwogICAgICB9CiAgICB9LAogICAgeyAvL2E9ZW5kLW9mLWNhbmRpZGF0ZXMgKGtlZXAgYWZ0ZXIgdGhlIGNhbmRpZGF0ZXMgbGluZSBmb3IgcmVhZGFiaWxpdHkpCiAgICAgIG5hbWU6ICdlbmRPZkNhbmRpZGF0ZXMnLAogICAgICByZWc6IC9eKGVuZC1vZi1jYW5kaWRhdGVzKS8KICAgIH0sCiAgICB7IC8vYT1yZW1vdGUtY2FuZGlkYXRlczoxIDIwMy4wLjExMy4xIDU0NDAwIDIgMjAzLjAuMTEzLjEgNTQ0MDEgLi4uCiAgICAgIG5hbWU6ICdyZW1vdGVDYW5kaWRhdGVzJywKICAgICAgcmVnOiAvXnJlbW90ZS1jYW5kaWRhdGVzOiguKikvLAogICAgICBmb3JtYXQ6ICJyZW1vdGUtY2FuZGlkYXRlczolcyIKICAgIH0sCiAgICB7IC8vYT1pY2Utb3B0aW9uczpnb29nbGUtaWNlCiAgICAgIG5hbWU6ICdpY2VPcHRpb25zJywKICAgICAgcmVnOiAvXmljZS1vcHRpb25zOihcUyopLywKICAgICAgZm9ybWF0OiAiaWNlLW9wdGlvbnM6JXMiCiAgICB9LAogICAgeyAvL2E9c3NyYzoyNTY2MTA3NTY5IGNuYW1lOnQ5WVU4TTFVeFRGOFkxQTEKICAgICAgcHVzaDogInNzcmNzIiwKICAgICAgcmVnOiAvXnNzcmM6KFxkKikgKFtcd19dKikoPzo6KC4qKSk/LywKICAgICAgbmFtZXM6IFsnaWQnLCAnYXR0cmlidXRlJywgJ3ZhbHVlJ10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICB2YXIgc3RyID0gInNzcmM6JWQiOwogICAgICAgIGlmIChvLmF0dHJpYnV0ZSAhPSBudWxsKSB7CiAgICAgICAgICBzdHIgKz0gIiAlcyI7CiAgICAgICAgICBpZiAoby52YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgICAgIHN0ciArPSAiOiVzIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPXNzcmMtZ3JvdXA6RkVDIDEgMgogICAgICBwdXNoOiAic3NyY0dyb3VwcyIsCiAgICAgIHJlZzogL15zc3JjLWdyb3VwOihcdyopICguKikvLAogICAgICBuYW1lczogWydzZW1hbnRpY3MnLCAnc3NyY3MnXSwKICAgICAgZm9ybWF0OiAic3NyYy1ncm91cDolcyAlcyIKICAgIH0sCiAgICB7IC8vYT1tc2lkLXNlbWFudGljOiBXTVMgSnZsYW01WDNTWDFPUDZwbjIweldvZ3ZhS0p6NUhqZjlPbmxWCiAgICAgIG5hbWU6ICJtc2lkU2VtYW50aWMiLAogICAgICByZWc6IC9ebXNpZC1zZW1hbnRpYzpccz8oXHcqKSAoXFMqKS8sCiAgICAgIG5hbWVzOiBbJ3NlbWFudGljJywgJ3Rva2VuJ10sCiAgICAgIGZvcm1hdDogIm1zaWQtc2VtYW50aWM6ICVzICVzIiAvLyBzcGFjZSBhZnRlciAiOiIgaXMgbm90IGFjY2lkZW50YWwKICAgIH0sCiAgICB7IC8vYT1ncm91cDpCVU5ETEUgYXVkaW8gdmlkZW8KICAgICAgcHVzaDogJ2dyb3VwcycsCiAgICAgIHJlZzogL15ncm91cDooXHcqKSAoLiopLywKICAgICAgbmFtZXM6IFsndHlwZScsICdtaWRzJ10sCiAgICAgIGZvcm1hdDogImdyb3VwOiVzICVzIgogICAgfSwKICAgIHsgLy9hPXJ0Y3AtbXV4CiAgICAgIG5hbWU6ICdydGNwTXV4JywKICAgICAgcmVnOiAvXihydGNwLW11eCkvCiAgICB9LAogICAgeyAvL2E9cnRjcC1yc2l6ZQogICAgICBuYW1lOiAncnRjcFJzaXplJywKICAgICAgcmVnOiAvXihydGNwLXJzaXplKS8KICAgIH0sCiAgICB7IC8vYT1zY3RwbWFwOjUwMDAgd2VicnRjLWRhdGFjaGFubmVsIDEwMjQKICAgICAgbmFtZTogJ3NjdHBtYXAnLAogICAgICByZWc6IC9ec2N0cG1hcDooW1x3X1wvXSopIChcUyopKD86IChcUyopKT8vLAogICAgICBuYW1lczogWydzY3RwbWFwTnVtYmVyJywgJ2FwcCcsICdtYXhNZXNzYWdlU2l6ZSddLAogICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIChvLm1heE1lc3NhZ2VTaXplICE9IG51bGwpID8KICAgICAgICAgICJzY3RwbWFwOiVzICVzICVzIiA6CiAgICAgICAgICAic2N0cG1hcDolcyAlcyI7CiAgICAgIH0KICAgIH0sCiAgICB7IC8vIGFueSBhPSB0aGF0IHdlIGRvbid0IHVuZGVyc3RhbmQgaXMga2VwdHMgdmVyYmF0aW0gb24gbWVkaWEuaW52YWxpZAogICAgICBwdXNoOiAnaW52YWxpZCcsCiAgICAgIG5hbWVzOiBbInZhbHVlIl0KICAgIH0KICBdCn07CgovLyBzZXQgc2Vuc2libGUgZGVmYXVsdHMgdG8gYXZvaWQgcG9sbHV0aW5nIHRoZSBncmFtbWFyIHdpdGggYm9yaW5nIGRldGFpbHMKT2JqZWN0LmtleXMoZ3JhbW1hcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgdmFyIG9ianMgPSBncmFtbWFyW2tleV07CiAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsKICAgIGlmICghb2JqLnJlZykgewogICAgICBvYmoucmVnID0gLyguKikvOwogICAgfQogICAgaWYgKCFvYmouZm9ybWF0KSB7CiAgICAgIG9iai5mb3JtYXQgPSAiJXMiOwogICAgfQogIH0pOwp9KTsKCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgcGFyc2VyID0gcmVxdWlyZSgnLi9wYXJzZXInKTsKdmFyIHdyaXRlciA9IHJlcXVpcmUoJy4vd3JpdGVyJyk7CgpleHBvcnRzLndyaXRlID0gd3JpdGVyOwpleHBvcnRzLnBhcnNlID0gcGFyc2VyLnBhcnNlOwpleHBvcnRzLnBhcnNlRm10cENvbmZpZyA9IHBhcnNlci5wYXJzZUZtdHBDb25maWc7CmV4cG9ydHMucGFyc2VQYXlsb2FkcyA9IHBhcnNlci5wYXJzZVBheWxvYWRzOwpleHBvcnRzLnBhcnNlUmVtb3RlQ2FuZGlkYXRlcyA9IHBhcnNlci5wYXJzZVJlbW90ZUNhbmRpZGF0ZXM7Cgp9LHsiLi9wYXJzZXIiOjMsIi4vd3JpdGVyIjo0fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB0b0ludElmSW50ID0gZnVuY3Rpb24gKHYpIHsKICByZXR1cm4gU3RyaW5nKE51bWJlcih2KSkgPT09IHYgPyBOdW1iZXIodikgOiB2Owp9OwoKdmFyIGF0dGFjaFByb3BlcnRpZXMgPSBmdW5jdGlvbiAobWF0Y2gsIGxvY2F0aW9uLCBuYW1lcywgcmF3TmFtZSkgewogIGlmIChyYXdOYW1lICYmICFuYW1lcykgewogICAgbG9jYXRpb25bcmF3TmFtZV0gPSB0b0ludElmSW50KG1hdGNoWzFdKTsKICB9CiAgZWxzZSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGlmIChtYXRjaFtpKzFdICE9IG51bGwpIHsKICAgICAgICBsb2NhdGlvbltuYW1lc1tpXV0gPSB0b0ludElmSW50KG1hdGNoW2krMV0pOwogICAgICB9CiAgICB9CiAgfQp9OwoKdmFyIHBhcnNlUmVnID0gZnVuY3Rpb24gKG9iaiwgbG9jYXRpb24sIGNvbnRlbnQpIHsKICB2YXIgbmVlZHNCbGFuayA9IG9iai5uYW1lICYmIG9iai5uYW1lczsKICBpZiAob2JqLnB1c2ggJiYgIWxvY2F0aW9uW29iai5wdXNoXSkgewogICAgbG9jYXRpb25bb2JqLnB1c2hdID0gW107CiAgfQogIGVsc2UgaWYgKG5lZWRzQmxhbmsgJiYgIWxvY2F0aW9uW29iai5uYW1lXSkgewogICAgbG9jYXRpb25bb2JqLm5hbWVdID0ge307CiAgfQogIHZhciBrZXlMb2NhdGlvbiA9IG9iai5wdXNoID8KICAgIHt9IDogIC8vIGJsYW5rIG9iamVjdCB0aGF0IHdpbGwgYmUgcHVzaGVkCiAgICBuZWVkc0JsYW5rID8gbG9jYXRpb25bb2JqLm5hbWVdIDogbG9jYXRpb247IC8vIG90aGVyd2lzZSwgbmFtZWQgbG9jYXRpb24gb3Igcm9vdAoKICBhdHRhY2hQcm9wZXJ0aWVzKGNvbnRlbnQubWF0Y2gob2JqLnJlZyksIGtleUxvY2F0aW9uLCBvYmoubmFtZXMsIG9iai5uYW1lKTsKCiAgaWYgKG9iai5wdXNoKSB7CiAgICBsb2NhdGlvbltvYmoucHVzaF0ucHVzaChrZXlMb2NhdGlvbik7CiAgfQp9OwoKdmFyIGdyYW1tYXIgPSByZXF1aXJlKCcuL2dyYW1tYXInKTsKdmFyIHZhbGlkTGluZSA9IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKFthLXpdKT0oLiopLyk7CgpleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHNkcCkgewogIHZhciBzZXNzaW9uID0ge30KICAgICwgbWVkaWEgPSBbXQogICAgLCBsb2NhdGlvbiA9IHNlc3Npb247IC8vIHBvaW50cyBhdCB3aGVyZSBwcm9wZXJ0aWVzIGdvIHVuZGVyIChvbmUgb2YgdGhlIGFib3ZlKQoKICAvLyBwYXJzZSBsaW5lcyB3ZSB1bmRlcnN0YW5kCiAgc2RwLnNwbGl0KC8oXHJcbnxccnxcbikvKS5maWx0ZXIodmFsaWRMaW5lKS5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7CiAgICB2YXIgdHlwZSA9IGxbMF07CiAgICB2YXIgY29udGVudCA9IGwuc2xpY2UoMik7CiAgICBpZiAodHlwZSA9PT0gJ20nKSB7CiAgICAgIG1lZGlhLnB1c2goe3J0cDogW10sIGZtdHA6IFtdfSk7CiAgICAgIGxvY2F0aW9uID0gbWVkaWFbbWVkaWEubGVuZ3RoLTFdOyAvLyBwb2ludCBhdCBsYXRlc3QgbWVkaWEgbGluZQogICAgfQoKICAgIGZvciAodmFyIGogPSAwOyBqIDwgKGdyYW1tYXJbdHlwZV0gfHwgW10pLmxlbmd0aDsgaiArPSAxKSB7CiAgICAgIHZhciBvYmogPSBncmFtbWFyW3R5cGVdW2pdOwogICAgICBpZiAob2JqLnJlZy50ZXN0KGNvbnRlbnQpKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlUmVnKG9iaiwgbG9jYXRpb24sIGNvbnRlbnQpOwogICAgICB9CiAgICB9CiAgfSk7CgogIHNlc3Npb24ubWVkaWEgPSBtZWRpYTsgLy8gbGluayBpdCB1cAogIHJldHVybiBzZXNzaW9uOwp9OwoKdmFyIGZtdHBSZWR1Y2VyID0gZnVuY3Rpb24gKGFjYywgZXhwcikgewogIHZhciBzID0gZXhwci5zcGxpdCgvPSguKykvLCAyKTsKICBpZiAocy5sZW5ndGggPT09IDIpIHsKICAgIGFjY1tzWzBdXSA9IHRvSW50SWZJbnQoc1sxXSk7CiAgfQogIHJldHVybiBhY2M7Cn07CgpleHBvcnRzLnBhcnNlRm10cENvbmZpZyA9IGZ1bmN0aW9uIChzdHIpIHsKICByZXR1cm4gc3RyLnNwbGl0KC9cO1xzPy8pLnJlZHVjZShmbXRwUmVkdWNlciwge30pOwp9OwoKZXhwb3J0cy5wYXJzZVBheWxvYWRzID0gZnVuY3Rpb24gKHN0cikgewogIHJldHVybiBzdHIuc3BsaXQoJyAnKS5tYXAoTnVtYmVyKTsKfTsKCmV4cG9ydHMucGFyc2VSZW1vdGVDYW5kaWRhdGVzID0gZnVuY3Rpb24gKHN0cikgewogIHZhciBjYW5kaWRhdGVzID0gW107CiAgdmFyIHBhcnRzID0gc3RyLnNwbGl0KCcgJykubWFwKHRvSW50SWZJbnQpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDMpIHsKICAgIGNhbmRpZGF0ZXMucHVzaCh7CiAgICAgIGNvbXBvbmVudDogcGFydHNbaV0sCiAgICAgIGlwOiBwYXJ0c1tpICsgMV0sCiAgICAgIHBvcnQ6IHBhcnRzW2kgKyAyXQogICAgfSk7CiAgfQogIHJldHVybiBjYW5kaWRhdGVzOwp9OwoKfSx7Ii4vZ3JhbW1hciI6MX1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZ3JhbW1hciA9IHJlcXVpcmUoJy4vZ3JhbW1hcicpOwoKLy8gY3VzdG9taXplZCB1dGlsLmZvcm1hdCAtIGRpc2NhcmRzIGV4Y2VzcyBhcmd1bWVudHMgYW5kIGNhbiB2b2lkIG1pZGRsZSBvbmVzCnZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZHYlXS9nOwp2YXIgZm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdFN0cikgewogIHZhciBpID0gMTsKICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICB2YXIgbGVuID0gYXJncy5sZW5ndGg7CiAgcmV0dXJuIGZvcm1hdFN0ci5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24gKHgpIHsKICAgIGlmIChpID49IGxlbikgewogICAgICByZXR1cm4geDsgLy8gbWlzc2luZyBhcmd1bWVudAogICAgfQogICAgdmFyIGFyZyA9IGFyZ3NbaV07CiAgICBpICs9IDE7CiAgICBzd2l0Y2ggKHgpIHsKICAgICAgY2FzZSAnJSUnOgogICAgICAgIHJldHVybiAnJSc7CiAgICAgIGNhc2UgJyVzJzoKICAgICAgICByZXR1cm4gU3RyaW5nKGFyZyk7CiAgICAgIGNhc2UgJyVkJzoKICAgICAgICByZXR1cm4gTnVtYmVyKGFyZyk7CiAgICAgIGNhc2UgJyV2JzoKICAgICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSk7CiAgLy8gTkI6IHdlIGRpc2NhcmQgZXhjZXNzIGFyZ3VtZW50cyAtIHRoZXkgYXJlIHR5cGljYWxseSB1bmRlZmluZWQgZnJvbSBtYWtlTGluZQp9OwoKdmFyIG1ha2VMaW5lID0gZnVuY3Rpb24gKHR5cGUsIG9iaiwgbG9jYXRpb24pIHsKICB2YXIgc3RyID0gb2JqLmZvcm1hdCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8KICAgIChvYmouZm9ybWF0KG9iai5wdXNoID8gbG9jYXRpb24gOiBsb2NhdGlvbltvYmoubmFtZV0pKSA6CiAgICBvYmouZm9ybWF0OwoKICB2YXIgYXJncyA9IFt0eXBlICsgJz0nICsgc3RyXTsKICBpZiAob2JqLm5hbWVzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5uYW1lcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICB2YXIgbiA9IG9iai5uYW1lc1tpXTsKICAgICAgaWYgKG9iai5uYW1lKSB7CiAgICAgICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lXVtuXSk7CiAgICAgIH0KICAgICAgZWxzZSB7IC8vIGZvciBtTGluZSBhbmQgcHVzaCBhdHRyaWJ1dGVzCiAgICAgICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lc1tpXV0pOwogICAgICB9CiAgICB9CiAgfQogIGVsc2UgewogICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lXSk7CiAgfQogIHJldHVybiBmb3JtYXQuYXBwbHkobnVsbCwgYXJncyk7Cn07CgovLyBSRkMgc3BlY2lmaWVkIG9yZGVyCi8vIFRPRE86IGV4dGVuZCB0aGlzIHdpdGggYWxsIHRoZSByZXN0CnZhciBkZWZhdWx0T3V0ZXJPcmRlciA9IFsKICAndicsICdvJywgJ3MnLCAnaScsCiAgJ3UnLCAnZScsICdwJywgJ2MnLAogICdiJywgJ3QnLCAncicsICd6JywgJ2EnCl07CnZhciBkZWZhdWx0SW5uZXJPcmRlciA9IFsnaScsICdjJywgJ2InLCAnYSddOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlc3Npb24sIG9wdHMpIHsKICBvcHRzID0gb3B0cyB8fCB7fTsKICAvLyBlbnN1cmUgY2VydGFpbiBwcm9wZXJ0aWVzIGV4aXN0CiAgaWYgKHNlc3Npb24udmVyc2lvbiA9PSBudWxsKSB7CiAgICBzZXNzaW9uLnZlcnNpb24gPSAwOyAvLyAidj0wIiBtdXN0IGJlIHRoZXJlIChvbmx5IGRlZmluZWQgdmVyc2lvbiBhdG0pCiAgfQogIGlmIChzZXNzaW9uLm5hbWUgPT0gbnVsbCkgewogICAgc2Vzc2lvbi5uYW1lID0gIiAiOyAvLyAicz0gIiBtdXN0IGJlIHRoZXJlIGlmIG5vIG1lYW5pbmdmdWwgbmFtZSBzZXQKICB9CiAgc2Vzc2lvbi5tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChtTGluZSkgewogICAgaWYgKG1MaW5lLnBheWxvYWRzID09IG51bGwpIHsKICAgICAgbUxpbmUucGF5bG9hZHMgPSAiIjsKICAgIH0KICB9KTsKCiAgdmFyIG91dGVyT3JkZXIgPSBvcHRzLm91dGVyT3JkZXIgfHwgZGVmYXVsdE91dGVyT3JkZXI7CiAgdmFyIGlubmVyT3JkZXIgPSBvcHRzLmlubmVyT3JkZXIgfHwgZGVmYXVsdElubmVyT3JkZXI7CiAgdmFyIHNkcCA9IFtdOwoKICAvLyBsb29wIHRocm91Z2ggb3V0ZXJPcmRlciBmb3IgbWF0Y2hpbmcgcHJvcGVydGllcyBvbiBzZXNzaW9uCiAgb3V0ZXJPcmRlci5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICBncmFtbWFyW3R5cGVdLmZvckVhY2goZnVuY3Rpb24gKG9iaikgewogICAgICBpZiAob2JqLm5hbWUgaW4gc2Vzc2lvbiAmJiBzZXNzaW9uW29iai5uYW1lXSAhPSBudWxsKSB7CiAgICAgICAgc2RwLnB1c2gobWFrZUxpbmUodHlwZSwgb2JqLCBzZXNzaW9uKSk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAob2JqLnB1c2ggaW4gc2Vzc2lvbiAmJiBzZXNzaW9uW29iai5wdXNoXSAhPSBudWxsKSB7CiAgICAgICAgc2Vzc2lvbltvYmoucHVzaF0uZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHNkcC5wdXNoKG1ha2VMaW5lKHR5cGUsIG9iaiwgZWwpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfSk7CgogIC8vIHRoZW4gZm9yIGVhY2ggbWVkaWEgbGluZSwgZm9sbG93IHRoZSBpbm5lck9yZGVyCiAgc2Vzc2lvbi5tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChtTGluZSkgewogICAgc2RwLnB1c2gobWFrZUxpbmUoJ20nLCBncmFtbWFyLm1bMF0sIG1MaW5lKSk7CgogICAgaW5uZXJPcmRlci5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgIGdyYW1tYXJbdHlwZV0uZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgaWYgKG9iai5uYW1lIGluIG1MaW5lICYmIG1MaW5lW29iai5uYW1lXSAhPSBudWxsKSB7CiAgICAgICAgICBzZHAucHVzaChtYWtlTGluZSh0eXBlLCBvYmosIG1MaW5lKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG9iai5wdXNoIGluIG1MaW5lICYmIG1MaW5lW29iai5wdXNoXSAhPSBudWxsKSB7CiAgICAgICAgICBtTGluZVtvYmoucHVzaF0uZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgc2RwLnB1c2gobWFrZUxpbmUodHlwZSwgb2JqLCBlbCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0pOwoKICByZXR1cm4gc2RwLmpvaW4oJ1xyXG4nKSArICdcclxuJzsKfTsKCn0seyIuL2dyYW1tYXIiOjF9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gdmVyc2lvbjogMC41LjENCi8vIGRhdGU6IEZyaSBGZWIgMDMgMjAxNyAxNDoyNjoxNSBHTVQrMDAwMCAoV0VUKQ0KLy8gbGljZW5jZTogDQovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8NCg0KDQooZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkgew0KCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykNCgkJbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7DQoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpDQoJCWRlZmluZSgiU3luY2hlciIsIFtdLCBmYWN0b3J5KTsNCgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykNCgkJZXhwb3J0c1siU3luY2hlciJdID0gZmFjdG9yeSgpOw0KCWVsc2UNCgkJcm9vdFsiIl0gPSByb290WyIiXSB8fCB7fSwgcm9vdFsiIl1bIlN5bmNoZXIiXSA9IGZhY3RvcnkoKTsNCn0pKHRoaXMsIGZ1bmN0aW9uKCkgew0KcmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXANCi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlDQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24NCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUNCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pDQovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpDQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsNCi8qKioqKiovIAkJCWk6IG1vZHVsZUlkLA0KLyoqKioqKi8gCQkJbDogZmFsc2UsDQovKioqKioqLyAJCQlleHBvcnRzOiB7fQ0KLyoqKioqKi8gCQl9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uDQovKioqKioqLyAJCW1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pOw0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZA0KLyoqKioqKi8gCQltb2R1bGUubCA9IHRydWU7DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQ0KLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7DQovKioqKioqLyAJfQ0KLyoqKioqKi8NCi8qKioqKiovDQovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOw0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQ0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7DQovKioqKioqLw0KLyoqKioqKi8gCS8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHQNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07DQovKioqKioqLw0KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cw0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgew0KLyoqKioqKi8gCQlpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7DQovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgew0KLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsDQovKioqKioqLyAJCQkJZW51bWVyYWJsZTogdHJ1ZSwNCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcg0KLyoqKioqKi8gCQkJfSk7DQovKioqKioqLyAJCX0NCi8qKioqKiovIAl9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcw0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgew0KLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8NCi8qKioqKiovIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6DQovKioqKioqLyAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9Ow0KLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7DQovKioqKioqLyAJCXJldHVybiBnZXR0ZXI7DQovKioqKioqLyAJfTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXw0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOw0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMNCi8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNjIpOw0KLyoqKioqKi8gfSkNCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQovKioqKioqLyAoWw0KLyogMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQp2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcyLjQuMCd9Ow0KaWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmDQoNCi8qKiovIH0pLA0KLyogMSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOA0KdmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoDQogID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTsNCmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmDQoNCi8qKiovIH0pLA0KLyogMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgc3RvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzApKCd3a3MnKQ0KICAsIHVpZCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKQ0KICAsIFN5bWJvbCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLlN5bWJvbA0KICAsIFVTRV9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09ICdmdW5jdGlvbic7DQoNCnZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7DQogIHJldHVybiBzdG9yZVtuYW1lXSB8fCAoc3RvcmVbbmFtZV0gPQ0KICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7DQp9Ow0KDQokZXhwb3J0cy5zdG9yZSA9IHN0b3JlOw0KDQovKioqLyB9KSwNCi8qIDMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eQ0KbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsNCiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNzsNCn0pOw0KDQovKioqLyB9KSwNCi8qIDQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQ0KICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkNCiAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpDQogICwgZFAgICAgICAgICAgICAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7DQoNCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKXsNCiAgYW5PYmplY3QoTyk7DQogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsNCiAgYW5PYmplY3QoQXR0cmlidXRlcyk7DQogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7DQogICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpOw0KICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9DQogIGlmKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcyl0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIScpOw0KICBpZigndmFsdWUnIGluIEF0dHJpYnV0ZXMpT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7DQogIHJldHVybiBPOw0KfTsNCg0KLyoqKi8gfSksDQovKiA1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYoIWlzT2JqZWN0KGl0KSl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7DQogIHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkNCiAgLCBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpew0KICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOw0KfSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7DQogIG9iamVjdFtrZXldID0gdmFsdWU7DQogIHJldHVybiBvYmplY3Q7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkNCiAgLCBjb3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApDQogICwgY3R4ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkNCiAgLCBoaWRlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpDQogICwgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7DQoNCnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXsNCiAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkYNCiAgICAsIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0LkcNCiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlMNCiAgICAsIElTX1BST1RPICA9IHR5cGUgJiAkZXhwb3J0LlANCiAgICAsIElTX0JJTkQgICA9IHR5cGUgJiAkZXhwb3J0LkINCiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LlcNCiAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pDQogICAgLCBleHBQcm90byAgPSBleHBvcnRzW1BST1RPVFlQRV0NCiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV0NCiAgICAsIGtleSwgb3duLCBvdXQ7DQogIGlmKElTX0dMT0JBTClzb3VyY2UgPSBuYW1lOw0KICBmb3Ioa2V5IGluIHNvdXJjZSl7DQogICAgLy8gY29udGFpbnMgaW4gbmF0aXZlDQogICAgb3duID0gIUlTX0ZPUkNFRCAmJiB0YXJnZXQgJiYgdGFyZ2V0W2tleV0gIT09IHVuZGVmaW5lZDsNCiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7DQogICAgLy8gZXhwb3J0IG5hdGl2ZSBvciBwYXNzZWQNCiAgICBvdXQgPSBvd24gPyB0YXJnZXRba2V5XSA6IHNvdXJjZVtrZXldOw0KICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcw0KICAgIGV4cG9ydHNba2V5XSA9IElTX0dMT0JBTCAmJiB0eXBlb2YgdGFyZ2V0W2tleV0gIT0gJ2Z1bmN0aW9uJyA/IHNvdXJjZVtrZXldDQogICAgLy8gYmluZCB0aW1lcnMgdG8gZ2xvYmFsIGZvciBjYWxsIGZyb20gZXhwb3J0IGNvbnRleHQNCiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKQ0KICAgIC8vIHdyYXAgZ2xvYmFsIGNvbnN0cnVjdG9ycyBmb3IgcHJldmVudCBjaGFuZ2UgdGhlbSBpbiBsaWJyYXJ5DQogICAgOiBJU19XUkFQICYmIHRhcmdldFtrZXldID09IG91dCA/IChmdW5jdGlvbihDKXsNCiAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7DQogICAgICAgIGlmKHRoaXMgaW5zdGFuY2VvZiBDKXsNCiAgICAgICAgICBzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7DQogICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQzsNCiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIG5ldyBDKGEpOw0KICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IEMoYSwgYik7DQogICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7DQogICAgICAgIH0gcmV0dXJuIEMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgIH07DQogICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07DQogICAgICByZXR1cm4gRjsNCiAgICAvLyBtYWtlIHN0YXRpYyB2ZXJzaW9ucyBmb3IgcHJvdG90eXBlIG1ldGhvZHMNCiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7DQogICAgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLm1ldGhvZHMuJU5BTUUlDQogICAgaWYoSVNfUFJPVE8pew0KICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0Ow0KICAgICAgLy8gZXhwb3J0IHByb3RvIG1ldGhvZHMgdG8gY29yZS4lQ09OU1RSVUNUT1IlLnByb3RvdHlwZS4lTkFNRSUNCiAgICAgIGlmKHR5cGUgJiAkZXhwb3J0LlIgJiYgZXhwUHJvdG8gJiYgIWV4cFByb3RvW2tleV0paGlkZShleHBQcm90bywga2V5LCBvdXQpOw0KICAgIH0NCiAgfQ0KfTsNCi8vIHR5cGUgYml0bWFwDQokZXhwb3J0LkYgPSAxOyAgIC8vIGZvcmNlZA0KJGV4cG9ydC5HID0gMjsgICAvLyBnbG9iYWwNCiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljDQokZXhwb3J0LlAgPSA4OyAgIC8vIHByb3RvDQokZXhwb3J0LkIgPSAxNjsgIC8vIGJpbmQNCiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcA0KJGV4cG9ydC5VID0gNjQ7ICAvLyBzYWZlDQokZXhwb3J0LlIgPSAxMjg7IC8vIHJlYWwgcHJvdG8gbWV0aG9kIGZvciBgbGlicmFyeWAgDQptb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7DQoNCi8qKiovIH0pLA0KLyogOSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikgew0KICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgew0KICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOw0KICB9DQp9Ow0KDQovKioqLyB9KSwNCi8qIDEwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOw0KDQp2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7DQoNCnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7DQogIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07DQogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7DQogICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7DQogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsNCiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOw0KICAgIH0NCiAgfQ0KDQogIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7DQogICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsNCiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsNCiAgICByZXR1cm4gQ29uc3RydWN0b3I7DQogIH07DQp9KCk7DQoNCi8qKiovIH0pLA0KLyogMTEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjKXsNCiAgdHJ5IHsNCiAgICByZXR1cm4gISFleGVjKCk7DQogIH0gY2F0Y2goZSl7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCn07DQoNCi8qKiovIH0pLA0KLyogMTIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KdmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBrZXkpew0KICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzDQp2YXIgSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpDQogICwgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBJT2JqZWN0KGRlZmluZWQoaXQpKTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nDQp2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpew0KICBhRnVuY3Rpb24oZm4pOw0KICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuOw0KICBzd2l0Y2gobGVuZ3RoKXsNCiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXsNCiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpOw0KICAgIH07DQogICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7DQogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTsNCiAgICB9Ow0KICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpew0KICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7DQogICAgfTsNCiAgfQ0KICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7DQogICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7DQogIH07DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0ge307DQoNCi8qKiovIH0pLA0KLyogMTYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXsNCiAgcmV0dXJuIHsNCiAgICBlbnVtZXJhYmxlICA6ICEoYml0bWFwICYgMSksDQogICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLA0KICAgIHdyaXRhYmxlICAgIDogIShiaXRtYXAgJiA0KSwNCiAgICB2YWx1ZSAgICAgICA6IHZhbHVlDQogIH07DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMi4xNCAvIDE1LjIuMy4xNCBPYmplY3Qua2V5cyhPKQ0KdmFyICRrZXlzICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCkNCiAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOw0KDQptb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMoTyl7DQogIHJldHVybiAka2V5cyhPLCBlbnVtQnVnS2V5cyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQ0KICAsIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudA0KICAvLyBpbiBvbGQgSUUgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCcNCiAgLCBpcyA9IGlzT2JqZWN0KGRvY3VtZW50KSAmJiBpc09iamVjdChkb2N1bWVudC5jcmVhdGVFbGVtZW50KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiAyMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTsNCiAgcmV0dXJuIGl0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiAyMSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZGVmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mDQogICwgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikNCiAgLCBUQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCd0b1N0cmluZ1RhZycpOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpew0KICBpZihpdCAmJiAhaGFzKGl0ID0gc3RhdCA/IGl0IDogaXQucHJvdG90eXBlLCBUQUcpKWRlZihpdCwgVEFHLCB7Y29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogdGFnfSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDIyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKQ0KdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsNCi8vIGluc3RlYWQgb2YgdGhlIEVTNiBzcGVjIHZlcnNpb24sIHdlIGRpZG4ndCBpbXBsZW1lbnQgQEB0b1ByaW1pdGl2ZSBjYXNlDQovLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgUyl7DQogIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIGl0Ow0KICB2YXIgZm4sIHZhbDsNCiAgaWYoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOw0KICBpZih0eXBlb2YgKGZuID0gaXQudmFsdWVPZikgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7DQogIGlmKCFTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7DQogIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDIzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCnZhciBpZCA9IDANCiAgLCBweCA9IE1hdGgucmFuZG9tKCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7DQogIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDI0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIgKyBpdCk7DQogIHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogMjUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB0cnVlOw0KDQovKioqLyB9KSwNCi8qIDI2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBzaGFyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgna2V5cycpDQogICwgdWlkICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7DQogIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDI3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCi8vIDcuMS40IFRvSW50ZWdlcg0KdmFyIGNlaWwgID0gTWF0aC5jZWlsDQogICwgZmxvb3IgPSBNYXRoLmZsb29yOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBpc05hTihpdCA9ICtpdCkgPyAwIDogKGl0ID4gMCA/IGZsb29yIDogY2VpbCkoaXQpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyOCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzDQptb2R1bGUuZXhwb3J0cyA9ICgNCiAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZicNCikuc3BsaXQoJywnKTsNCg0KLyoqKi8gfSksDQovKiAyOSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDMpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpew0KICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KF9fd2VicGFja19yZXF1aXJlX18oMTkpKCdkaXYnKSwgJ2EnLCB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gNzsgfX0pLmEgIT0gNzsNCn0pOw0KDQovKioqLyB9KSwNCi8qIDMwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXycNCiAgLCBzdG9yZSAgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7DQogIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pOw0KfTsNCg0KLyoqKi8gfSksDQovKiAzMSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDMyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudCkNCnZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDMzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOw0KDQp2YXIgX3NldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7DQoNCnZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpOw0KDQp2YXIgX2NyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpOw0KDQp2YXIgX2NyZWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGUpOw0KDQp2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsNCg0KdmFyIF90eXBlb2YzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdHlwZW9mMik7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgew0KICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgew0KICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShzdXBlckNsYXNzKSkpOw0KICB9DQoNCiAgc3ViQ2xhc3MucHJvdG90eXBlID0gKDAsIF9jcmVhdGUyLmRlZmF1bHQpKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsNCiAgICBjb25zdHJ1Y3Rvcjogew0KICAgICAgdmFsdWU6IHN1YkNsYXNzLA0KICAgICAgZW51bWVyYWJsZTogZmFsc2UsDQogICAgICB3cml0YWJsZTogdHJ1ZSwNCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQ0KICAgIH0NCiAgfSk7DQogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQgPyAoMCwgX3NldFByb3RvdHlwZU9mMi5kZWZhdWx0KShzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOw0KfTsNCg0KLyoqKi8gfSksDQovKiAzNCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7DQoNCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkgew0KICBpZiAoIXNlbGYpIHsNCiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOw0KICB9DQoNCiAgcmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShjYWxsKSkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOw0KfTsNCg0KLyoqKi8gfSksDQovKiAzNSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkNCnZhciBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCBkUHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpDQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KQ0KICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikoJ0lFX1BST1RPJykNCiAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH0NCiAgLCBQUk9UT1RZUEUgICA9ICdwcm90b3R5cGUnOw0KDQovLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlDQp2YXIgY3JlYXRlRGljdCA9IGZ1bmN0aW9uKCl7DQogIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnDQogIHZhciBpZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSgnaWZyYW1lJykNCiAgICAsIGkgICAgICA9IGVudW1CdWdLZXlzLmxlbmd0aA0KICAgICwgbHQgICAgID0gJzwnDQogICAgLCBndCAgICAgPSAnPicNCiAgICAsIGlmcmFtZURvY3VtZW50Ow0KICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgX193ZWJwYWNrX3JlcXVpcmVfXyg0MikuYXBwZW5kQ2hpbGQoaWZyYW1lKTsNCiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybA0KICAvLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0Ow0KICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7DQogIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7DQogIGlmcmFtZURvY3VtZW50Lm9wZW4oKTsNCiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpOw0KICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpOw0KICBjcmVhdGVEaWN0ID0gaWZyYW1lRG9jdW1lbnQuRjsNCiAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dOw0KICByZXR1cm4gY3JlYXRlRGljdCgpOw0KfTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKXsNCiAgdmFyIHJlc3VsdDsNCiAgaWYoTyAhPT0gbnVsbCl7DQogICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pOw0KICAgIHJlc3VsdCA9IG5ldyBFbXB0eTsNCiAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDsNCiAgICAvLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbA0KICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPOw0KICB9IGVsc2UgcmVzdWx0ID0gY3JlYXRlRGljdCgpOw0KICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZFBzKHJlc3VsdCwgUHJvcGVydGllcyk7DQp9Ow0KDQoNCi8qKiovIH0pLA0KLyogMzYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygzNyksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiAzNyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsNCnZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Q7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2Mpew0KICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTsNCn07DQoNCi8qKiovIH0pLA0KLyogMzggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQ0KICAsICRleHBvcnQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KQ0KICAsIHJlZGVmaW5lICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NikNCiAgLCBoaWRlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikNCiAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgSXRlcmF0b3JzICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQ0KICAsICRpdGVyQ3JlYXRlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MikNCiAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpDQogICwgZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKQ0KICAsIElURVJBVE9SICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQ0KICAsIEJVR0dZICAgICAgICAgID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpIC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGANCiAgLCBGRl9JVEVSQVRPUiAgICA9ICdAQGl0ZXJhdG9yJw0KICAsIEtFWVMgICAgICAgICAgID0gJ2tleXMnDQogICwgVkFMVUVTICAgICAgICAgPSAndmFsdWVzJzsNCg0KdmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihCYXNlLCBOQU1FLCBDb25zdHJ1Y3RvciwgbmV4dCwgREVGQVVMVCwgSVNfU0VULCBGT1JDRUQpew0KICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7DQogIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXsNCiAgICBpZighQlVHR1kgJiYga2luZCBpbiBwcm90bylyZXR1cm4gcHJvdG9ba2luZF07DQogICAgc3dpdGNoKGtpbmQpew0KICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9Ow0KICAgICAgY2FzZSBWQUxVRVM6IHJldHVybiBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTsNCiAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07DQogIH07DQogIHZhciBUQUcgICAgICAgID0gTkFNRSArICcgSXRlcmF0b3InDQogICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVMNCiAgICAsIFZBTFVFU19CVUcgPSBmYWxzZQ0KICAgICwgcHJvdG8gICAgICA9IEJhc2UucHJvdG90eXBlDQogICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdDQogICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVCkNCiAgICAsICRlbnRyaWVzICAgPSBERUZBVUxUID8gIURFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZCgnZW50cmllcycpIDogdW5kZWZpbmVkDQogICAgLCAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZQ0KICAgICwgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTsNCiAgLy8gRml4IG5hdGl2ZQ0KICBpZigkYW55TmF0aXZlKXsNCiAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSkpOw0KICAgIGlmKEl0ZXJhdG9yUHJvdG90eXBlICE9PSBPYmplY3QucHJvdG90eXBlKXsNCiAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMNCiAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpOw0KICAgICAgLy8gZml4IGZvciBzb21lIG9sZCBlbmdpbmVzDQogICAgICBpZighTElCUkFSWSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpOw0KICAgIH0NCiAgfQ0KICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGDQogIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7DQogICAgVkFMVUVTX0JVRyA9IHRydWU7DQogICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsgfTsNCiAgfQ0KICAvLyBEZWZpbmUgaXRlcmF0b3INCiAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpew0KICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7DQogIH0NCiAgLy8gUGx1ZyBmb3IgbGlicmFyeQ0KICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDsNCiAgSXRlcmF0b3JzW1RBR10gID0gcmV0dXJuVGhpczsNCiAgaWYoREVGQVVMVCl7DQogICAgbWV0aG9kcyA9IHsNCiAgICAgIHZhbHVlczogIERFRl9WQUxVRVMgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChWQUxVRVMpLA0KICAgICAga2V5czogICAgSVNfU0VUICAgICA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLA0KICAgICAgZW50cmllczogJGVudHJpZXMNCiAgICB9Ow0KICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpew0KICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7DQogICAgfSBlbHNlICRleHBvcnQoJGV4cG9ydC5QICsgJGV4cG9ydC5GICogKEJVR0dZIHx8IFZBTFVFU19CVUcpLCBOQU1FLCBtZXRob2RzKTsNCiAgfQ0KICByZXR1cm4gbWV0aG9kczsNCn07DQoNCi8qKiovIH0pLA0KLyogMzkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOw0KLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oMyksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydHk6IF9fd2VicGFja19yZXF1aXJlX18oNCkuZn0pOw0KDQovKioqLyB9KSwNCi8qIDQwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNTMpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNDEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KZXhwb3J0cy5mID0ge30ucHJvcGVydHlJc0VudW1lcmFibGU7DQoNCi8qKiovIH0pLA0KLyogNDIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLmRvY3VtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsNCg0KLyoqKi8gfSksDQovKiA0MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuOSAvIDE1LjIuMy4yIE9iamVjdC5nZXRQcm90b3R5cGVPZihPKQ0KdmFyIGhhcyAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikNCiAgLCB0b09iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpDQogICwgSUVfUFJPVE8gICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KSgnSUVfUFJPVE8nKQ0KICAsIE9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24oTyl7DQogIE8gPSB0b09iamVjdChPKTsNCiAgaWYoaGFzKE8sIElFX1BST1RPKSlyZXR1cm4gT1tJRV9QUk9UT107DQogIGlmKHR5cGVvZiBPLmNvbnN0cnVjdG9yID09ICdmdW5jdGlvbicgJiYgTyBpbnN0YW5jZW9mIE8uY29uc3RydWN0b3Ipew0KICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTsNCiAgfSByZXR1cm4gTyBpbnN0YW5jZW9mIE9iamVjdCA/IE9iamVjdFByb3RvIDogbnVsbDsNCn07DQoNCi8qKiovIH0pLA0KLyogNDQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGhhcyAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgdG9JT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCBhcnJheUluZGV4T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKShmYWxzZSkNCiAgLCBJRV9QUk9UTyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KSgnSUVfUFJPVE8nKTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIG5hbWVzKXsNCiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpDQogICAgLCBpICAgICAgPSAwDQogICAgLCByZXN1bHQgPSBbXQ0KICAgICwga2V5Ow0KICBmb3Ioa2V5IGluIE8paWYoa2V5ICE9IElFX1BST1RPKWhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7DQogIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXMNCiAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSlpZihoYXMoTywga2V5ID0gbmFtZXNbaSsrXSkpew0KICAgIH5hcnJheUluZGV4T2YocmVzdWx0LCBrZXkpIHx8IHJlc3VsdC5wdXNoKGtleSk7DQogIH0NCiAgcmV0dXJuIHJlc3VsdDsNCn07DQoNCi8qKiovIH0pLA0KLyogNDUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzDQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCkNCiAgLCBjb3JlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQ0KICAsIGZhaWxzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXsNCiAgdmFyIGZuICA9IChjb3JlLk9iamVjdCB8fCB7fSlbS0VZXSB8fCBPYmplY3RbS0VZXQ0KICAgICwgZXhwID0ge307DQogIGV4cFtLRVldID0gZXhlYyhmbik7DQogICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXsgZm4oMSk7IH0pLCAnT2JqZWN0JywgZXhwKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNDYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOw0KDQovKioqLyB9KSwNCi8qIDQ3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDcuMS4xNSBUb0xlbmd0aA0KdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpDQogICwgbWluICAgICAgID0gTWF0aC5taW47DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTENCn07DQoNCi8qKiovIH0pLA0KLyogNDggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGdsb2JhbCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGNvcmUgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQ0KICAsIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkNCiAgLCB3a3NFeHQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpDQogICwgZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmY7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpew0KICB2YXIgJFN5bWJvbCA9IGNvcmUuU3ltYm9sIHx8IChjb3JlLlN5bWJvbCA9IExJQlJBUlkgPyB7fSA6IGdsb2JhbC5TeW1ib2wgfHwge30pOw0KICBpZihuYW1lLmNoYXJBdCgwKSAhPSAnXycgJiYgIShuYW1lIGluICRTeW1ib2wpKWRlZmluZVByb3BlcnR5KCRTeW1ib2wsIG5hbWUsIHt2YWx1ZTogd2tzRXh0LmYobmFtZSl9KTsNCn07DQoNCi8qKiovIH0pLA0KLyogNDkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsNCg0KLyoqKi8gfSksDQovKiA1MCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCnZhciAkYXQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NikodHJ1ZSk7DQoNCi8vIDIxLjEuMy4yNyBTdHJpbmcucHJvdG90eXBlW0BAaXRlcmF0b3JdKCkNCl9fd2VicGFja19yZXF1aXJlX18oMzgpKFN0cmluZywgJ1N0cmluZycsIGZ1bmN0aW9uKGl0ZXJhdGVkKXsNCiAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldA0KICB0aGlzLl9pID0gMDsgICAgICAgICAgICAgICAgLy8gbmV4dCBpbmRleA0KLy8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKQ0KfSwgZnVuY3Rpb24oKXsNCiAgdmFyIE8gICAgID0gdGhpcy5fdA0KICAgICwgaW5kZXggPSB0aGlzLl9pDQogICAgLCBwb2ludDsNCiAgaWYoaW5kZXggPj0gTy5sZW5ndGgpcmV0dXJuIHt2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlfTsNCiAgcG9pbnQgPSAkYXQoTywgaW5kZXgpOw0KICB0aGlzLl9pICs9IHBvaW50Lmxlbmd0aDsNCiAgcmV0dXJuIHt2YWx1ZTogcG9pbnQsIGRvbmU6IGZhbHNlfTsNCn0pOw0KDQovKioqLyB9KSwNCi8qIDUxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNjkpOw0KdmFyIGdsb2JhbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgaGlkZSAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikNCiAgLCBJdGVyYXRvcnMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCBUT19TVFJJTkdfVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsNCg0KZm9yKHZhciBjb2xsZWN0aW9ucyA9IFsnTm9kZUxpc3QnLCAnRE9NVG9rZW5MaXN0JywgJ01lZGlhTGlzdCcsICdTdHlsZVNoZWV0TGlzdCcsICdDU1NSdWxlTGlzdCddLCBpID0gMDsgaSA8IDU7IGkrKyl7DQogIHZhciBOQU1FICAgICAgID0gY29sbGVjdGlvbnNbaV0NCiAgICAsIENvbGxlY3Rpb24gPSBnbG9iYWxbTkFNRV0NCiAgICAsIHByb3RvICAgICAgPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlOw0KICBpZihwcm90byAmJiAhcHJvdG9bVE9fU1RSSU5HX1RBR10paGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7DQogIEl0ZXJhdG9yc1tOQU1FXSA9IEl0ZXJhdG9ycy5BcnJheTsNCn0NCg0KLyoqKi8gfSksDQovKiA1MiAqLywNCi8qIDUzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBjb3JlICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkNCiAgLCAkSlNPTiA9IGNvcmUuSlNPTiB8fCAoY29yZS5KU09OID0ge3N0cmluZ2lmeTogSlNPTi5zdHJpbmdpZnl9KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycw0KICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA1NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQoNCg0KLyoqKi8gfSksDQovKiA1NSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBnZXR0aW5nIHRhZyBmcm9tIDE5LjEuMy42IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcoKQ0KdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpDQogICwgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKQ0KICAvLyBFUzMgd3JvbmcgaGVyZQ0KICAsIEFSRyA9IGNvZihmdW5jdGlvbigpeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnOw0KDQovLyBmYWxsYmFjayBmb3IgSUUxMSBTY3JpcHQgQWNjZXNzIERlbmllZCBlcnJvcg0KdmFyIHRyeUdldCA9IGZ1bmN0aW9uKGl0LCBrZXkpew0KICB0cnkgew0KICAgIHJldHVybiBpdFtrZXldOw0KICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9DQp9Ow0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgdmFyIE8sIFQsIEI7DQogIHJldHVybiBpdCA9PT0gdW5kZWZpbmVkID8gJ1VuZGVmaW5lZCcgOiBpdCA9PT0gbnVsbCA/ICdOdWxsJw0KICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZQ0KICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFQNCiAgICAvLyBidWlsdGluVGFnIGNhc2UNCiAgICA6IEFSRyA/IGNvZihPKQ0KICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2sNCiAgICA6IChCID0gY29mKE8pKSA9PSAnT2JqZWN0JyAmJiB0eXBlb2YgTy5jYWxsZWUgPT0gJ2Z1bmN0aW9uJyA/ICdBcmd1bWVudHMnIDogQjsNCn07DQoNCi8qKiovIH0pLA0KLyogNTYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3MNCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsNCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0KCd6JykucHJvcGVydHlJc0VudW1lcmFibGUoMCkgPyBPYmplY3QgOiBmdW5jdGlvbihpdCl7DQogIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTsNCn07DQoNCi8qKiovIH0pLA0KLyogNTcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIHBJRSAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSkNCiAgLCBjcmVhdGVEZXNjICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpDQogICwgdG9JT2JqZWN0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQ0KICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikNCiAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpDQogICwgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KQ0KICAsIGdPUEQgICAgICAgICAgID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsNCg0KZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSA/IGdPUEQgOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCl7DQogIE8gPSB0b0lPYmplY3QoTyk7DQogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsNCiAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHsNCiAgICByZXR1cm4gZ09QRChPLCBQKTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KICBpZihoYXMoTywgUCkpcmV0dXJuIGNyZWF0ZURlc2MoIXBJRS5mLmNhbGwoTywgUCksIE9bUF0pOw0KfTsNCg0KLyoqKi8gfSksDQovKiA1OCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQpleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOw0KDQovKioqLyB9KSwNCi8qIDU5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOw0KDQp2YXIgX2l0ZXJhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7DQoNCnZhciBfaXRlcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXRlcmF0b3IpOw0KDQp2YXIgX3N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpOw0KDQp2YXIgX3N5bWJvbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zeW1ib2wpOw0KDQp2YXIgX3R5cGVvZiA9IHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBfaXRlcmF0b3IyLmRlZmF1bHQgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyLmRlZmF1bHQgJiYgb2JqICE9PSBfc3ltYm9sMi5kZWZhdWx0LnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KZXhwb3J0cy5kZWZhdWx0ID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZihfaXRlcmF0b3IyLmRlZmF1bHQpID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsNCiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKG9iaik7DQp9IDogZnVuY3Rpb24gKG9iaikgew0KICByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDIuZGVmYXVsdCAmJiBvYmogIT09IF9zeW1ib2wyLmRlZmF1bHQucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOw0KfTsNCg0KLyoqKi8gfSksDQovKiA2MCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH07DQoNCi8qKiovIH0pLA0KLyogNjEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZg0KLy8gdHJ1ZSAgLT4gQXJyYXkjaW5jbHVkZXMNCnZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQ0KICAsIHRvTGVuZ3RoICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpDQogICwgdG9JbmRleCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKElTX0lOQ0xVREVTKXsNCiAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBlbCwgZnJvbUluZGV4KXsNCiAgICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KCR0aGlzKQ0KICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCkNCiAgICAgICwgaW5kZXggID0gdG9JbmRleChmcm9tSW5kZXgsIGxlbmd0aCkNCiAgICAgICwgdmFsdWU7DQogICAgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobQ0KICAgIGlmKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKXdoaWxlKGxlbmd0aCA+IGluZGV4KXsNCiAgICAgIHZhbHVlID0gT1tpbmRleCsrXTsNCiAgICAgIGlmKHZhbHVlICE9IHZhbHVlKXJldHVybiB0cnVlOw0KICAgIC8vIEFycmF5I3RvSW5kZXggaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3QNCiAgICB9IGVsc2UgZm9yKDtsZW5ndGggPiBpbmRleDsgaW5kZXgrKylpZihJU19JTkNMVURFUyB8fCBpbmRleCBpbiBPKXsNCiAgICAgIGlmKE9baW5kZXhdID09PSBlbClyZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDsNCiAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7DQogIH07DQp9Ow0KDQovKioqLyB9KSwNCi8qIDYyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIGNyZWF0ZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSkNCiAgLCBkZXNjcmlwdG9yICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpDQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQ0KICAsIEl0ZXJhdG9yUHJvdG90eXBlID0ge307DQoNCi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKEl0ZXJhdG9yUHJvdG90eXBlLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpLCBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfSk7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpew0KICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBjcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUsIHtuZXh0OiBkZXNjcmlwdG9yKDEsIG5leHQpfSk7DQogIHNldFRvU3RyaW5nVGFnKENvbnN0cnVjdG9yLCBOQU1FICsgJyBJdGVyYXRvcicpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA2MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXsNCiAgcmV0dXJuIHt2YWx1ZTogdmFsdWUsIGRvbmU6ICEhZG9uZX07DQp9Ow0KDQovKioqLyB9KSwNCi8qIDY0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBkUCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkNCiAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCBnZXRLZXlzICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpOw0KDQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcyl7DQogIGFuT2JqZWN0KE8pOw0KICB2YXIga2V5cyAgID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKQ0KICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgNCiAgICAsIGkgPSAwDQogICAgLCBQOw0KICB3aGlsZShsZW5ndGggPiBpKWRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7DQogIHJldHVybiBPOw0KfTsNCg0KLyoqKi8gfSksDQovKiA2NSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pDQp2YXIgJGtleXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpDQogICwgaGlkZGVuS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpLmNvbmNhdCgnbGVuZ3RoJywgJ3Byb3RvdHlwZScpOw0KDQpleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pew0KICByZXR1cm4gJGtleXMoTywgaGlkZGVuS2V5cyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDY2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQ0KICAsIGRlZmluZWQgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOw0KLy8gdHJ1ZSAgLT4gU3RyaW5nI2F0DQovLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXQNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oVE9fU1RSSU5HKXsNCiAgcmV0dXJuIGZ1bmN0aW9uKHRoYXQsIHBvcyl7DQogICAgdmFyIHMgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSkNCiAgICAgICwgaSA9IHRvSW50ZWdlcihwb3MpDQogICAgICAsIGwgPSBzLmxlbmd0aA0KICAgICAgLCBhLCBiOw0KICAgIGlmKGkgPCAwIHx8IGkgPj0gbClyZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7DQogICAgYSA9IHMuY2hhckNvZGVBdChpKTsNCiAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZg0KICAgICAgPyBUT19TVFJJTkcgPyBzLmNoYXJBdChpKSA6IGENCiAgICAgIDogVE9fU1RSSU5HID8gcy5zbGljZShpLCBpICsgMikgOiAoYSAtIDB4ZDgwMCA8PCAxMCkgKyAoYiAtIDB4ZGMwMCkgKyAweDEwMDAwOw0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA2NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkNCiAgLCBpbnZva2UgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KQ0KICAsIGh0bWwgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpDQogICwgY2VsICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkNCiAgLCBnbG9iYWwgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MNCiAgLCBzZXRUYXNrICAgICAgICAgICAgPSBnbG9iYWwuc2V0SW1tZWRpYXRlDQogICwgY2xlYXJUYXNrICAgICAgICAgID0gZ2xvYmFsLmNsZWFySW1tZWRpYXRlDQogICwgTWVzc2FnZUNoYW5uZWwgICAgID0gZ2xvYmFsLk1lc3NhZ2VDaGFubmVsDQogICwgY291bnRlciAgICAgICAgICAgID0gMA0KICAsIHF1ZXVlICAgICAgICAgICAgICA9IHt9DQogICwgT05SRUFEWVNUQVRFQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZScNCiAgLCBkZWZlciwgY2hhbm5lbCwgcG9ydDsNCnZhciBydW4gPSBmdW5jdGlvbigpew0KICB2YXIgaWQgPSArdGhpczsNCiAgaWYocXVldWUuaGFzT3duUHJvcGVydHkoaWQpKXsNCiAgICB2YXIgZm4gPSBxdWV1ZVtpZF07DQogICAgZGVsZXRlIHF1ZXVlW2lkXTsNCiAgICBmbigpOw0KICB9DQp9Ow0KdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpew0KICBydW4uY2FsbChldmVudC5kYXRhKTsNCn07DQovLyBOb2RlLmpzIDAuOSsgJiBJRTEwKyBoYXMgc2V0SW1tZWRpYXRlLCBvdGhlcndpc2U6DQppZighc2V0VGFzayB8fCAhY2xlYXJUYXNrKXsNCiAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbil7DQogICAgdmFyIGFyZ3MgPSBbXSwgaSA9IDE7DQogICAgd2hpbGUoYXJndW1lbnRzLmxlbmd0aCA+IGkpYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTsNCiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24oKXsNCiAgICAgIGludm9rZSh0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJyA/IGZuIDogRnVuY3Rpb24oZm4pLCBhcmdzKTsNCiAgICB9Ow0KICAgIGRlZmVyKGNvdW50ZXIpOw0KICAgIHJldHVybiBjb3VudGVyOw0KICB9Ow0KICBjbGVhclRhc2sgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCl7DQogICAgZGVsZXRlIHF1ZXVlW2lkXTsNCiAgfTsNCiAgLy8gTm9kZS5qcyAwLjgtDQogIGlmKF9fd2VicGFja19yZXF1aXJlX18oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJyl7DQogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7DQogICAgICBwcm9jZXNzLm5leHRUaWNrKGN0eChydW4sIGlkLCAxKSk7DQogICAgfTsNCiAgLy8gQnJvd3NlcnMgd2l0aCBNZXNzYWdlQ2hhbm5lbCwgaW5jbHVkZXMgV2ViV29ya2Vycw0KICB9IGVsc2UgaWYoTWVzc2FnZUNoYW5uZWwpew0KICAgIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWw7DQogICAgcG9ydCAgICA9IGNoYW5uZWwucG9ydDI7DQogICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjsNCiAgICBkZWZlciA9IGN0eChwb3J0LnBvc3RNZXNzYWdlLCBwb3J0LCAxKTsNCiAgLy8gQnJvd3NlcnMgd2l0aCBwb3N0TWVzc2FnZSwgc2tpcCBXZWJXb3JrZXJzDQogIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnDQogIH0gZWxzZSBpZihnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAmJiB0eXBlb2YgcG9zdE1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJyAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpew0KICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpew0KICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7DQogICAgfTsNCiAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxpc3RlbmVyLCBmYWxzZSk7DQogIC8vIElFOC0NCiAgfSBlbHNlIGlmKE9OUkVBRFlTVEFURUNIQU5HRSBpbiBjZWwoJ3NjcmlwdCcpKXsNCiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsNCiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2VsKCdzY3JpcHQnKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uKCl7DQogICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQodGhpcyk7DQogICAgICAgIHJ1bi5jYWxsKGlkKTsNCiAgICAgIH07DQogICAgfTsNCiAgLy8gUmVzdCBvbGQgYnJvd3NlcnMNCiAgfSBlbHNlIHsNCiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsNCiAgICAgIHNldFRpbWVvdXQoY3R4KHJ1biwgaWQsIDEpLCAwKTsNCiAgICB9Ow0KICB9DQp9DQptb2R1bGUuZXhwb3J0cyA9IHsNCiAgc2V0OiAgIHNldFRhc2ssDQogIGNsZWFyOiBjbGVhclRhc2sNCn07DQoNCi8qKiovIH0pLA0KLyogNjggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpDQogICwgbWF4ICAgICAgID0gTWF0aC5tYXgNCiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5kZXgsIGxlbmd0aCl7DQogIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTsNCiAgcmV0dXJuIGluZGV4IDwgMCA/IG1heChpbmRleCArIGxlbmd0aCwgMCkgOiBtaW4oaW5kZXgsIGxlbmd0aCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDY5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIGFkZFRvVW5zY29wYWJsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKQ0KICAsIHN0ZXAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKQ0KICAsIEl0ZXJhdG9ycyAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQ0KICAsIHRvSU9iamVjdCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsNCg0KLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKQ0KLy8gMjIuMS4zLjEzIEFycmF5LnByb3RvdHlwZS5rZXlzKCkNCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkNCi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQ0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KShBcnJheSwgJ0FycmF5JywgZnVuY3Rpb24oaXRlcmF0ZWQsIGtpbmQpew0KICB0aGlzLl90ID0gdG9JT2JqZWN0KGl0ZXJhdGVkKTsgLy8gdGFyZ2V0DQogIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4DQogIHRoaXMuX2sgPSBraW5kOyAgICAgICAgICAgICAgICAvLyBraW5kDQovLyAyMi4xLjUuMi4xICVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkNCn0sIGZ1bmN0aW9uKCl7DQogIHZhciBPICAgICA9IHRoaXMuX3QNCiAgICAsIGtpbmQgID0gdGhpcy5faw0KICAgICwgaW5kZXggPSB0aGlzLl9pKys7DQogIGlmKCFPIHx8IGluZGV4ID49IE8ubGVuZ3RoKXsNCiAgICB0aGlzLl90ID0gdW5kZWZpbmVkOw0KICAgIHJldHVybiBzdGVwKDEpOw0KICB9DQogIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgaW5kZXgpOw0KICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIE9baW5kZXhdKTsNCiAgcmV0dXJuIHN0ZXAoMCwgW2luZGV4LCBPW2luZGV4XV0pOw0KfSwgJ3ZhbHVlcycpOw0KDQovLyBhcmd1bWVudHNMaXN0W0BAaXRlcmF0b3JdIGlzICVBcnJheVByb3RvX3ZhbHVlcyUgKDkuNC40LjYsIDkuNC40LjcpDQpJdGVyYXRvcnMuQXJndW1lbnRzID0gSXRlcmF0b3JzLkFycmF5Ow0KDQphZGRUb1Vuc2NvcGFibGVzKCdrZXlzJyk7DQphZGRUb1Vuc2NvcGFibGVzKCd2YWx1ZXMnKTsNCmFkZFRvVW5zY29wYWJsZXMoJ2VudHJpZXMnKTsNCg0KLyoqKi8gfSksDQovKiA3MCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDcxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODIpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNzIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIE1FVEEgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykoJ21ldGEnKQ0KICAsIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQ0KICAsIGhhcyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikNCiAgLCBzZXREZXNjICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZg0KICAsIGlkICAgICAgID0gMDsNCnZhciBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGZ1bmN0aW9uKCl7DQogIHJldHVybiB0cnVlOw0KfTsNCnZhciBGUkVFWkUgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsNCiAgcmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKTsNCn0pOw0KdmFyIHNldE1ldGEgPSBmdW5jdGlvbihpdCl7DQogIHNldERlc2MoaXQsIE1FVEEsIHt2YWx1ZTogew0KICAgIGk6ICdPJyArICsraWQsIC8vIG9iamVjdCBJRA0KICAgIHc6IHt9ICAgICAgICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgSURzDQogIH19KTsNCn07DQp2YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpew0KICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4DQogIGlmKCFpc09iamVjdChpdCkpcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJyA/IGl0IDogKHR5cGVvZiBpdCA9PSAnc3RyaW5nJyA/ICdTJyA6ICdQJykgKyBpdDsNCiAgaWYoIWhhcyhpdCwgTUVUQSkpew0KICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0DQogICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuICdGJzsNCiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQ0KICAgIGlmKCFjcmVhdGUpcmV0dXJuICdFJzsNCiAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQ0KICAgIHNldE1ldGEoaXQpOw0KICAvLyByZXR1cm4gb2JqZWN0IElEDQogIH0gcmV0dXJuIGl0W01FVEFdLmk7DQp9Ow0KdmFyIGdldFdlYWsgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsNCiAgaWYoIWhhcyhpdCwgTUVUQSkpew0KICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0DQogICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuIHRydWU7DQogICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGENCiAgICBpZighY3JlYXRlKXJldHVybiBmYWxzZTsNCiAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQ0KICAgIHNldE1ldGEoaXQpOw0KICAvLyByZXR1cm4gaGFzaCB3ZWFrIGNvbGxlY3Rpb25zIElEcw0KICB9IHJldHVybiBpdFtNRVRBXS53Ow0KfTsNCi8vIGFkZCBtZXRhZGF0YSBvbiBmcmVlemUtZmFtaWx5IG1ldGhvZHMgY2FsbGluZw0KdmFyIG9uRnJlZXplID0gZnVuY3Rpb24oaXQpew0KICBpZihGUkVFWkUgJiYgbWV0YS5ORUVEICYmIGlzRXh0ZW5zaWJsZShpdCkgJiYgIWhhcyhpdCwgTUVUQSkpc2V0TWV0YShpdCk7DQogIHJldHVybiBpdDsNCn07DQp2YXIgbWV0YSA9IG1vZHVsZS5leHBvcnRzID0gew0KICBLRVk6ICAgICAgTUVUQSwNCiAgTkVFRDogICAgIGZhbHNlLA0KICBmYXN0S2V5OiAgZmFzdEtleSwNCiAgZ2V0V2VhazogIGdldFdlYWssDQogIG9uRnJlZXplOiBvbkZyZWV6ZQ0KfTsNCg0KLyoqKi8gfSksDQovKiA3MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgY2xhc3NvZiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSkNCiAgLCBJVEVSQVRPUiAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpDQogICwgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuZ2V0SXRlcmF0b3JNZXRob2QgPSBmdW5jdGlvbihpdCl7DQogIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdDQogICAgfHwgaXRbJ0BAaXRlcmF0b3InXQ0KICAgIHx8IEl0ZXJhdG9yc1tjbGFzc29mKGl0KV07DQp9Ow0KDQovKioqLyB9KSwNCi8qIDc0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNzgpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNzUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MSksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiA3NiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDc3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODQpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNzggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDApOw0KdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlKFAsIEQpew0KICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDc5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTAxKTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuZ2V0UHJvdG90eXBlT2Y7DQoNCi8qKiovIH0pLA0KLyogODAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5rZXlzOw0KDQovKioqLyB9KSwNCi8qIDgxICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTAzKTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Quc2V0UHJvdG90eXBlT2Y7DQoNCi8qKiovIH0pLA0KLyogODIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsNCl9fd2VicGFja19yZXF1aXJlX18oNTEpOw0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlByb21pc2U7DQoNCi8qKiovIH0pLA0KLyogODMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpOw0KX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNik7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNyk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuU3ltYm9sOw0KDQovKioqLyB9KSwNCi8qIDg0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oNTApOw0KX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpLmYoJ2l0ZXJhdG9yJyk7DQoNCi8qKiovIH0pLA0KLyogODUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgQ29uc3RydWN0b3IsIG5hbWUsIGZvcmJpZGRlbkZpZWxkKXsNCiAgaWYoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSB8fCAoZm9yYmlkZGVuRmllbGQgIT09IHVuZGVmaW5lZCAmJiBmb3JiaWRkZW5GaWVsZCBpbiBpdCkpew0KICAgIHRocm93IFR5cGVFcnJvcihuYW1lICsgJzogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7DQogIH0gcmV0dXJuIGl0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA4NiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scw0KdmFyIGdldEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQ0KICAsIGdPUFMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KQ0KICAsIHBJRSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICB2YXIgcmVzdWx0ICAgICA9IGdldEtleXMoaXQpDQogICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mOw0KICBpZihnZXRTeW1ib2xzKXsNCiAgICB2YXIgc3ltYm9scyA9IGdldFN5bWJvbHMoaXQpDQogICAgICAsIGlzRW51bSAgPSBwSUUuZg0KICAgICAgLCBpICAgICAgID0gMA0KICAgICAgLCBrZXk7DQogICAgd2hpbGUoc3ltYm9scy5sZW5ndGggPiBpKWlmKGlzRW51bS5jYWxsKGl0LCBrZXkgPSBzeW1ib2xzW2krK10pKXJlc3VsdC5wdXNoKGtleSk7DQogIH0gcmV0dXJuIHJlc3VsdDsNCn07DQoNCi8qKiovIH0pLA0KLyogODcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGN0eCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkNCiAgLCBjYWxsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpDQogICwgaXNBcnJheUl0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KQ0KICAsIGFuT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQ0KICAsIHRvTGVuZ3RoICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykNCiAgLCBnZXRJdGVyRm4gICA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpDQogICwgQlJFQUsgICAgICAgPSB7fQ0KICAsIFJFVFVSTiAgICAgID0ge307DQp2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmFibGUsIGVudHJpZXMsIGZuLCB0aGF0LCBJVEVSQVRPUil7DQogIHZhciBpdGVyRm4gPSBJVEVSQVRPUiA/IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyYWJsZTsgfSA6IGdldEl0ZXJGbihpdGVyYWJsZSkNCiAgICAsIGYgICAgICA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKQ0KICAgICwgaW5kZXggID0gMA0KICAgICwgbGVuZ3RoLCBzdGVwLCBpdGVyYXRvciwgcmVzdWx0Ow0KICBpZih0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ZXJhYmxlICsgJyBpcyBub3QgaXRlcmFibGUhJyk7DQogIC8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvcg0KICBpZihpc0FycmF5SXRlcihpdGVyRm4pKWZvcihsZW5ndGggPSB0b0xlbmd0aChpdGVyYWJsZS5sZW5ndGgpOyBsZW5ndGggPiBpbmRleDsgaW5kZXgrKyl7DQogICAgcmVzdWx0ID0gZW50cmllcyA/IGYoYW5PYmplY3Qoc3RlcCA9IGl0ZXJhYmxlW2luZGV4XSlbMF0sIHN0ZXBbMV0pIDogZihpdGVyYWJsZVtpbmRleF0pOw0KICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsNCiAgfSBlbHNlIGZvcihpdGVyYXRvciA9IGl0ZXJGbi5jYWxsKGl0ZXJhYmxlKTsgIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lOyApew0KICAgIHJlc3VsdCA9IGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpOw0KICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsNCiAgfQ0KfTsNCmV4cG9ydHMuQlJFQUsgID0gQlJFQUs7DQpleHBvcnRzLlJFVFVSTiA9IFJFVFVSTjsNCg0KLyoqKi8gfSksDQovKiA4OCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyBmYXN0IGFwcGx5LCBodHRwOi8vanNwZXJmLmxua2l0LmNvbS9mYXN0LWFwcGx5LzUNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIGFyZ3MsIHRoYXQpew0KICB2YXIgdW4gPSB0aGF0ID09PSB1bmRlZmluZWQ7DQogIHN3aXRjaChhcmdzLmxlbmd0aCl7DQogICAgY2FzZSAwOiByZXR1cm4gdW4gPyBmbigpDQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQpOw0KICAgIGNhc2UgMTogcmV0dXJuIHVuID8gZm4oYXJnc1swXSkNCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSk7DQogICAgY2FzZSAyOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdKQ0KICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdKTsNCiAgICBjYXNlIDM6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pDQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pOw0KICAgIGNhc2UgNDogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSkNCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7DQogIH0gcmV0dXJuICAgICAgICAgICAgICBmbi5hcHBseSh0aGF0LCBhcmdzKTsNCn07DQoNCi8qKiovIH0pLA0KLyogODkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gY2hlY2sgb24gZGVmYXVsdCBBcnJheSBpdGVyYXRvcg0KdmFyIEl0ZXJhdG9ycyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQ0KICAsIElURVJBVE9SICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpDQogICwgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBpdCAhPT0gdW5kZWZpbmVkICYmIChJdGVyYXRvcnMuQXJyYXkgPT09IGl0IHx8IEFycmF5UHJvdG9bSVRFUkFUT1JdID09PSBpdCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDkwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpDQp2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7DQptb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gaXNBcnJheShhcmcpew0KICByZXR1cm4gY29mKGFyZykgPT0gJ0FycmF5JzsNCn07DQoNCi8qKiovIH0pLA0KLyogOTEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcg0KdmFyIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmF0b3IsIGZuLCB2YWx1ZSwgZW50cmllcyl7DQogIHRyeSB7DQogICAgcmV0dXJuIGVudHJpZXMgPyBmbihhbk9iamVjdCh2YWx1ZSlbMF0sIHZhbHVlWzFdKSA6IGZuKHZhbHVlKTsNCiAgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbikNCiAgfSBjYXRjaChlKXsNCiAgICB2YXIgcmV0ID0gaXRlcmF0b3JbJ3JldHVybiddOw0KICAgIGlmKHJldCAhPT0gdW5kZWZpbmVkKWFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7DQogICAgdGhyb3cgZTsNCiAgfQ0KfTsNCg0KLyoqKi8gfSksDQovKiA5MiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgSVRFUkFUT1IgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQ0KICAsIFNBRkVfQ0xPU0lORyA9IGZhbHNlOw0KDQp0cnkgew0KICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7DQogIHJpdGVyWydyZXR1cm4nXSA9IGZ1bmN0aW9uKCl7IFNBRkVfQ0xPU0lORyA9IHRydWU7IH07DQogIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pOw0KfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXsNCiAgaWYoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpcmV0dXJuIGZhbHNlOw0KICB2YXIgc2FmZSA9IGZhbHNlOw0KICB0cnkgew0KICAgIHZhciBhcnIgID0gWzddDQogICAgICAsIGl0ZXIgPSBhcnJbSVRFUkFUT1JdKCk7DQogICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07DQogICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyOyB9Ow0KICAgIGV4ZWMoYXJyKTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KICByZXR1cm4gc2FmZTsNCn07DQoNCi8qKiovIH0pLA0KLyogOTMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGdldEtleXMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpDQogICwgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgZWwpew0KICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdCkNCiAgICAsIGtleXMgICA9IGdldEtleXMoTykNCiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoDQogICAgLCBpbmRleCAgPSAwDQogICAgLCBrZXk7DQogIHdoaWxlKGxlbmd0aCA+IGluZGV4KWlmKE9ba2V5ID0ga2V5c1tpbmRleCsrXV0gPT09IGVsKXJldHVybiBrZXk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDk0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgbWFjcm90YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0DQogICwgT2JzZXJ2ZXIgID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXINCiAgLCBwcm9jZXNzICAgPSBnbG9iYWwucHJvY2Vzcw0KICAsIFByb21pc2UgICA9IGdsb2JhbC5Qcm9taXNlDQogICwgaXNOb2RlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7DQogIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7DQoNCiAgdmFyIGZsdXNoID0gZnVuY3Rpb24oKXsNCiAgICB2YXIgcGFyZW50LCBmbjsNCiAgICBpZihpc05vZGUgJiYgKHBhcmVudCA9IHByb2Nlc3MuZG9tYWluKSlwYXJlbnQuZXhpdCgpOw0KICAgIHdoaWxlKGhlYWQpew0KICAgICAgZm4gICA9IGhlYWQuZm47DQogICAgICBoZWFkID0gaGVhZC5uZXh0Ow0KICAgICAgdHJ5IHsNCiAgICAgICAgZm4oKTsNCiAgICAgIH0gY2F0Y2goZSl7DQogICAgICAgIGlmKGhlYWQpbm90aWZ5KCk7DQogICAgICAgIGVsc2UgbGFzdCA9IHVuZGVmaW5lZDsNCiAgICAgICAgdGhyb3cgZTsNCiAgICAgIH0NCiAgICB9IGxhc3QgPSB1bmRlZmluZWQ7DQogICAgaWYocGFyZW50KXBhcmVudC5lbnRlcigpOw0KICB9Ow0KDQogIC8vIE5vZGUuanMNCiAgaWYoaXNOb2RlKXsNCiAgICBub3RpZnkgPSBmdW5jdGlvbigpew0KICAgICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7DQogICAgfTsNCiAgLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyDQogIH0gZWxzZSBpZihPYnNlcnZlcil7DQogICAgdmFyIHRvZ2dsZSA9IHRydWUNCiAgICAgICwgbm9kZSAgID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpOw0KICAgIG5ldyBPYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7Y2hhcmFjdGVyRGF0YTogdHJ1ZX0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldw0KICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7DQogICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlOw0KICAgIH07DQogIC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlDQogIH0gZWxzZSBpZihQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSl7DQogICAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTsNCiAgICBub3RpZnkgPSBmdW5jdGlvbigpew0KICAgICAgcHJvbWlzZS50aGVuKGZsdXNoKTsNCiAgICB9Ow0KICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOg0KICAvLyAtIHNldEltbWVkaWF0ZQ0KICAvLyAtIE1lc3NhZ2VDaGFubmVsDQogIC8vIC0gd2luZG93LnBvc3RNZXNzYWcNCiAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2UNCiAgLy8gLSBzZXRUaW1lb3V0DQogIH0gZWxzZSB7DQogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsNCiAgICAgIC8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkNCiAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpOw0KICAgIH07DQogIH0NCg0KICByZXR1cm4gZnVuY3Rpb24oZm4pew0KICAgIHZhciB0YXNrID0ge2ZuOiBmbiwgbmV4dDogdW5kZWZpbmVkfTsNCiAgICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7DQogICAgaWYoIWhlYWQpew0KICAgICAgaGVhZCA9IHRhc2s7DQogICAgICBub3RpZnkoKTsNCiAgICB9IGxhc3QgPSB0YXNrOw0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA5NSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93DQp2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCBnT1BOICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KS5mDQogICwgdG9TdHJpbmcgID0ge30udG9TdHJpbmc7DQoNCnZhciB3aW5kb3dOYW1lcyA9IHR5cGVvZiB3aW5kb3cgPT0gJ29iamVjdCcgJiYgd2luZG93ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzDQogID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdOw0KDQp2YXIgZ2V0V2luZG93TmFtZXMgPSBmdW5jdGlvbihpdCl7DQogIHRyeSB7DQogICAgcmV0dXJuIGdPUE4oaXQpOw0KICB9IGNhdGNoKGUpew0KICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpOw0KICB9DQp9Ow0KDQptb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7DQogIHJldHVybiB3aW5kb3dOYW1lcyAmJiB0b1N0cmluZy5jYWxsKGl0KSA9PSAnW29iamVjdCBXaW5kb3ddJyA/IGdldFdpbmRvd05hbWVzKGl0KSA6IGdPUE4odG9JT2JqZWN0KGl0KSk7DQp9Ow0KDQoNCi8qKiovIH0pLA0KLyogOTYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGhpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQsIHNyYywgc2FmZSl7DQogIGZvcih2YXIga2V5IGluIHNyYyl7DQogICAgaWYoc2FmZSAmJiB0YXJnZXRba2V5XSl0YXJnZXRba2V5XSA9IHNyY1trZXldOw0KICAgIGVsc2UgaGlkZSh0YXJnZXQsIGtleSwgc3JjW2tleV0pOw0KICB9IHJldHVybiB0YXJnZXQ7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDk3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLg0KLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi8NCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykNCiAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7DQp2YXIgY2hlY2sgPSBmdW5jdGlvbihPLCBwcm90byl7DQogIGFuT2JqZWN0KE8pOw0KICBpZighaXNPYmplY3QocHJvdG8pICYmIHByb3RvICE9PSBudWxsKXRocm93IFR5cGVFcnJvcihwcm90byArICI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIik7DQp9Ow0KbW9kdWxlLmV4cG9ydHMgPSB7DQogIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmUNCiAgICBmdW5jdGlvbih0ZXN0LCBidWdneSwgc2V0KXsNCiAgICAgIHRyeSB7DQogICAgICAgIHNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpKEZ1bmN0aW9uLmNhbGwsIF9fd2VicGFja19yZXF1aXJlX18oNTcpLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7DQogICAgICAgIHNldCh0ZXN0LCBbXSk7DQogICAgICAgIGJ1Z2d5ID0gISh0ZXN0IGluc3RhbmNlb2YgQXJyYXkpOw0KICAgICAgfSBjYXRjaChlKXsgYnVnZ3kgPSB0cnVlOyB9DQogICAgICByZXR1cm4gZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoTywgcHJvdG8pew0KICAgICAgICBjaGVjayhPLCBwcm90byk7DQogICAgICAgIGlmKGJ1Z2d5KU8uX19wcm90b19fID0gcHJvdG87DQogICAgICAgIGVsc2Ugc2V0KE8sIHByb3RvKTsNCiAgICAgICAgcmV0dXJuIE87DQogICAgICB9Ow0KICAgIH0oe30sIGZhbHNlKSA6IHVuZGVmaW5lZCksDQogIGNoZWNrOiBjaGVjaw0KfTsNCg0KLyoqKi8gfSksDQovKiA5OCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCnZhciBnbG9iYWwgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkNCiAgLCBjb3JlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkNCiAgLCBkUCAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkNCiAgLCBERVNDUklQVE9SUyA9IF9fd2VicGFja19yZXF1aXJlX18oMykNCiAgLCBTUEVDSUVTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVkpew0KICB2YXIgQyA9IHR5cGVvZiBjb3JlW0tFWV0gPT0gJ2Z1bmN0aW9uJyA/IGNvcmVbS0VZXSA6IGdsb2JhbFtLRVldOw0KICBpZihERVNDUklQVE9SUyAmJiBDICYmICFDW1NQRUNJRVNdKWRQLmYoQywgU1BFQ0lFUywgew0KICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwNCiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9DQogIH0pOw0KfTsNCg0KLyoqKi8gfSksDQovKiA5OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikNCnZhciBhbk9iamVjdCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpDQogICwgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCkNCiAgLCBTUEVDSUVTICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdzcGVjaWVzJyk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE8sIEQpew0KICB2YXIgQyA9IGFuT2JqZWN0KE8pLmNvbnN0cnVjdG9yLCBTOw0KICByZXR1cm4gQyA9PT0gdW5kZWZpbmVkIHx8IChTID0gYW5PYmplY3QoQylbU1BFQ0lFU10pID09IHVuZGVmaW5lZCA/IEQgOiBhRnVuY3Rpb24oUyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDEwMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCkNCi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQ0KJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7Y3JlYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KX0pOw0KDQovKioqLyB9KSwNCi8qIDEwMSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykNCnZhciB0b09iamVjdCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQ0KICAsICRnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpOw0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0UHJvdG90eXBlT2YnLCBmdW5jdGlvbigpew0KICByZXR1cm4gZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YoaXQpew0KICAgIHJldHVybiAkZ2V0UHJvdG90eXBlT2YodG9PYmplY3QoaXQpKTsNCiAgfTsNCn0pOw0KDQovKioqLyB9KSwNCi8qIDEwMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuMTQgT2JqZWN0LmtleXMoTykNCnZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpDQogICwgJGtleXMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2tleXMnLCBmdW5jdGlvbigpew0KICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7DQogICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7DQogIH07DQp9KTsNCg0KLyoqKi8gfSksDQovKiAxMDMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykNCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsNCiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge3NldFByb3RvdHlwZU9mOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KS5zZXR9KTsNCg0KLyoqKi8gfSksDQovKiAxMDQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgTElCUkFSWSAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkNCiAgLCBnbG9iYWwgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkNCiAgLCBjbGFzc29mICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KQ0KICAsICRleHBvcnQgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOCkNCiAgLCBpc09iamVjdCAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpDQogICwgYUZ1bmN0aW9uICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCkNCiAgLCBhbkluc3RhbmNlICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KQ0KICAsIGZvck9mICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODcpDQogICwgc3BlY2llc0NvbnN0cnVjdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OSkNCiAgLCB0YXNrICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KS5zZXQNCiAgLCBtaWNyb3Rhc2sgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KSgpDQogICwgUFJPTUlTRSAgICAgICAgICAgID0gJ1Byb21pc2UnDQogICwgVHlwZUVycm9yICAgICAgICAgID0gZ2xvYmFsLlR5cGVFcnJvcg0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzDQogICwgJFByb21pc2UgICAgICAgICAgID0gZ2xvYmFsW1BST01JU0VdDQogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MNCiAgLCBpc05vZGUgICAgICAgICAgICAgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJw0KICAsIGVtcHR5ICAgICAgICAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH0NCiAgLCBJbnRlcm5hbCwgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5LCBXcmFwcGVyOw0KDQp2YXIgVVNFX05BVElWRSA9ICEhZnVuY3Rpb24oKXsNCiAgdHJ5IHsNCiAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQNCiAgICB2YXIgcHJvbWlzZSAgICAgPSAkUHJvbWlzZS5yZXNvbHZlKDEpDQogICAgICAsIEZha2VQcm9taXNlID0gKHByb21pc2UuY29uc3RydWN0b3IgPSB7fSlbX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpXSA9IGZ1bmN0aW9uKGV4ZWMpeyBleGVjKGVtcHR5LCBlbXB0eSk7IH07DQogICAgLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdA0KICAgIHJldHVybiAoaXNOb2RlIHx8IHR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQgPT0gJ2Z1bmN0aW9uJykgJiYgcHJvbWlzZS50aGVuKGVtcHR5KSBpbnN0YW5jZW9mIEZha2VQcm9taXNlOw0KICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9DQp9KCk7DQoNCi8vIGhlbHBlcnMNCnZhciBzYW1lQ29uc3RydWN0b3IgPSBmdW5jdGlvbihhLCBiKXsNCiAgLy8gd2l0aCBsaWJyYXJ5IHdyYXBwZXIgc3BlY2lhbCBjYXNlDQogIHJldHVybiBhID09PSBiIHx8IGEgPT09ICRQcm9taXNlICYmIGIgPT09IFdyYXBwZXI7DQp9Ow0KdmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbihpdCl7DQogIHZhciB0aGVuOw0KICByZXR1cm4gaXNPYmplY3QoaXQpICYmIHR5cGVvZiAodGhlbiA9IGl0LnRoZW4pID09ICdmdW5jdGlvbicgPyB0aGVuIDogZmFsc2U7DQp9Ow0KdmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7DQogIHJldHVybiBzYW1lQ29uc3RydWN0b3IoJFByb21pc2UsIEMpDQogICAgPyBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoQykNCiAgICA6IG5ldyBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyk7DQp9Ow0KdmFyIFByb21pc2VDYXBhYmlsaXR5ID0gR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7DQogIHZhciByZXNvbHZlLCByZWplY3Q7DQogIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uKCQkcmVzb2x2ZSwgJCRyZWplY3Qpew0KICAgIGlmKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoJ0JhZCBQcm9taXNlIGNvbnN0cnVjdG9yJyk7DQogICAgcmVzb2x2ZSA9ICQkcmVzb2x2ZTsNCiAgICByZWplY3QgID0gJCRyZWplY3Q7DQogIH0pOw0KICB0aGlzLnJlc29sdmUgPSBhRnVuY3Rpb24ocmVzb2x2ZSk7DQogIHRoaXMucmVqZWN0ICA9IGFGdW5jdGlvbihyZWplY3QpOw0KfTsNCnZhciBwZXJmb3JtID0gZnVuY3Rpb24oZXhlYyl7DQogIHRyeSB7DQogICAgZXhlYygpOw0KICB9IGNhdGNoKGUpew0KICAgIHJldHVybiB7ZXJyb3I6IGV9Ow0KICB9DQp9Ow0KdmFyIG5vdGlmeSA9IGZ1bmN0aW9uKHByb21pc2UsIGlzUmVqZWN0KXsNCiAgaWYocHJvbWlzZS5fbilyZXR1cm47DQogIHByb21pc2UuX24gPSB0cnVlOw0KICB2YXIgY2hhaW4gPSBwcm9taXNlLl9jOw0KICBtaWNyb3Rhc2soZnVuY3Rpb24oKXsNCiAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92DQogICAgICAsIG9rICAgID0gcHJvbWlzZS5fcyA9PSAxDQogICAgICAsIGkgICAgID0gMDsNCiAgICB2YXIgcnVuID0gZnVuY3Rpb24ocmVhY3Rpb24pew0KICAgICAgdmFyIGhhbmRsZXIgPSBvayA/IHJlYWN0aW9uLm9rIDogcmVhY3Rpb24uZmFpbA0KICAgICAgICAsIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlDQogICAgICAgICwgcmVqZWN0ICA9IHJlYWN0aW9uLnJlamVjdA0KICAgICAgICAsIGRvbWFpbiAgPSByZWFjdGlvbi5kb21haW4NCiAgICAgICAgLCByZXN1bHQsIHRoZW47DQogICAgICB0cnkgew0KICAgICAgICBpZihoYW5kbGVyKXsNCiAgICAgICAgICBpZighb2spew0KICAgICAgICAgICAgaWYocHJvbWlzZS5faCA9PSAyKW9uSGFuZGxlVW5oYW5kbGVkKHByb21pc2UpOw0KICAgICAgICAgICAgcHJvbWlzZS5faCA9IDE7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKGhhbmRsZXIgPT09IHRydWUpcmVzdWx0ID0gdmFsdWU7DQogICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmVudGVyKCk7DQogICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKHZhbHVlKTsNCiAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZXhpdCgpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZihyZXN1bHQgPT09IHJlYWN0aW9uLnByb21pc2Upew0KICAgICAgICAgICAgcmVqZWN0KFR5cGVFcnJvcignUHJvbWlzZS1jaGFpbiBjeWNsZScpKTsNCiAgICAgICAgICB9IGVsc2UgaWYodGhlbiA9IGlzVGhlbmFibGUocmVzdWx0KSl7DQogICAgICAgICAgICB0aGVuLmNhbGwocmVzdWx0LCByZXNvbHZlLCByZWplY3QpOw0KICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJlc3VsdCk7DQogICAgICAgIH0gZWxzZSByZWplY3QodmFsdWUpOw0KICAgICAgfSBjYXRjaChlKXsNCiAgICAgICAgcmVqZWN0KGUpOw0KICAgICAgfQ0KICAgIH07DQogICAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSlydW4oY2hhaW5baSsrXSk7IC8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoDQogICAgcHJvbWlzZS5fYyA9IFtdOw0KICAgIHByb21pc2UuX24gPSBmYWxzZTsNCiAgICBpZihpc1JlamVjdCAmJiAhcHJvbWlzZS5faClvblVuaGFuZGxlZChwcm9taXNlKTsNCiAgfSk7DQp9Ow0KdmFyIG9uVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7DQogIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7DQogICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdg0KICAgICAgLCBhYnJ1cHQsIGhhbmRsZXIsIGNvbnNvbGU7DQogICAgaWYoaXNVbmhhbmRsZWQocHJvbWlzZSkpew0KICAgICAgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpew0KICAgICAgICBpZihpc05vZGUpew0KICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpOw0KICAgICAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbil7DQogICAgICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiB2YWx1ZX0pOw0KICAgICAgICB9IGVsc2UgaWYoKGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZSkgJiYgY29uc29sZS5lcnJvcil7DQogICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgdmFsdWUpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkDQogICAgICBwcm9taXNlLl9oID0gaXNOb2RlIHx8IGlzVW5oYW5kbGVkKHByb21pc2UpID8gMiA6IDE7DQogICAgfSBwcm9taXNlLl9hID0gdW5kZWZpbmVkOw0KICAgIGlmKGFicnVwdCl0aHJvdyBhYnJ1cHQuZXJyb3I7DQogIH0pOw0KfTsNCnZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2Upew0KICBpZihwcm9taXNlLl9oID09IDEpcmV0dXJuIGZhbHNlOw0KICB2YXIgY2hhaW4gPSBwcm9taXNlLl9hIHx8IHByb21pc2UuX2MNCiAgICAsIGkgICAgID0gMA0KICAgICwgcmVhY3Rpb247DQogIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpew0KICAgIHJlYWN0aW9uID0gY2hhaW5baSsrXTsNCiAgICBpZihyZWFjdGlvbi5mYWlsIHx8ICFpc1VuaGFuZGxlZChyZWFjdGlvbi5wcm9taXNlKSlyZXR1cm4gZmFsc2U7DQogIH0gcmV0dXJuIHRydWU7DQp9Ow0KdmFyIG9uSGFuZGxlVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7DQogIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7DQogICAgdmFyIGhhbmRsZXI7DQogICAgaWYoaXNOb2RlKXsNCiAgICAgIHByb2Nlc3MuZW1pdCgncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UpOw0KICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9ucmVqZWN0aW9uaGFuZGxlZCl7DQogICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHByb21pc2UuX3Z9KTsNCiAgICB9DQogIH0pOw0KfTsNCnZhciAkcmVqZWN0ID0gZnVuY3Rpb24odmFsdWUpew0KICB2YXIgcHJvbWlzZSA9IHRoaXM7DQogIGlmKHByb21pc2UuX2QpcmV0dXJuOw0KICBwcm9taXNlLl9kID0gdHJ1ZTsNCiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwDQogIHByb21pc2UuX3YgPSB2YWx1ZTsNCiAgcHJvbWlzZS5fcyA9IDI7DQogIGlmKCFwcm9taXNlLl9hKXByb21pc2UuX2EgPSBwcm9taXNlLl9jLnNsaWNlKCk7DQogIG5vdGlmeShwcm9taXNlLCB0cnVlKTsNCn07DQp2YXIgJHJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSl7DQogIHZhciBwcm9taXNlID0gdGhpcw0KICAgICwgdGhlbjsNCiAgaWYocHJvbWlzZS5fZClyZXR1cm47DQogIHByb21pc2UuX2QgPSB0cnVlOw0KICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXANCiAgdHJ5IHsNCiAgICBpZihwcm9taXNlID09PSB2YWx1ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7DQogICAgaWYodGhlbiA9IGlzVGhlbmFibGUodmFsdWUpKXsNCiAgICAgIG1pY3JvdGFzayhmdW5jdGlvbigpew0KICAgICAgICB2YXIgd3JhcHBlciA9IHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfTsgLy8gd3JhcA0KICAgICAgICB0cnkgew0KICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgY3R4KCRyZXNvbHZlLCB3cmFwcGVyLCAxKSwgY3R4KCRyZWplY3QsIHdyYXBwZXIsIDEpKTsNCiAgICAgICAgfSBjYXRjaChlKXsNCiAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0gZWxzZSB7DQogICAgICBwcm9taXNlLl92ID0gdmFsdWU7DQogICAgICBwcm9taXNlLl9zID0gMTsNCiAgICAgIG5vdGlmeShwcm9taXNlLCBmYWxzZSk7DQogICAgfQ0KICB9IGNhdGNoKGUpew0KICAgICRyZWplY3QuY2FsbCh7X3c6IHByb21pc2UsIF9kOiBmYWxzZX0sIGUpOyAvLyB3cmFwDQogIH0NCn07DQoNCi8vIGNvbnN0cnVjdG9yIHBvbHlmaWxsDQppZighVVNFX05BVElWRSl7DQogIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpDQogICRQcm9taXNlID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7DQogICAgYW5JbnN0YW5jZSh0aGlzLCAkUHJvbWlzZSwgUFJPTUlTRSwgJ19oJyk7DQogICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTsNCiAgICBJbnRlcm5hbC5jYWxsKHRoaXMpOw0KICAgIHRyeSB7DQogICAgICBleGVjdXRvcihjdHgoJHJlc29sdmUsIHRoaXMsIDEpLCBjdHgoJHJlamVjdCwgdGhpcywgMSkpOw0KICAgIH0gY2F0Y2goZXJyKXsNCiAgICAgICRyZWplY3QuY2FsbCh0aGlzLCBlcnIpOw0KICAgIH0NCiAgfTsNCiAgSW50ZXJuYWwgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXsNCiAgICB0aGlzLl9jID0gW107ICAgICAgICAgICAgIC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9ucw0KICAgIHRoaXMuX2EgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnMNCiAgICB0aGlzLl9zID0gMDsgICAgICAgICAgICAgIC8vIDwtIHN0YXRlDQogICAgdGhpcy5fZCA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBkb25lDQogICAgdGhpcy5fdiA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSB2YWx1ZQ0KICAgIHRoaXMuX2ggPSAwOyAgICAgICAgICAgICAgLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWQNCiAgICB0aGlzLl9uID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIG5vdGlmeQ0KICB9Ow0KICBJbnRlcm5hbC5wcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSgkUHJvbWlzZS5wcm90b3R5cGUsIHsNCiAgICAvLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKQ0KICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpew0KICAgICAgdmFyIHJlYWN0aW9uICAgID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsICRQcm9taXNlKSk7DQogICAgICByZWFjdGlvbi5vayAgICAgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTsNCiAgICAgIHJlYWN0aW9uLmZhaWwgICA9IHR5cGVvZiBvblJlamVjdGVkID09ICdmdW5jdGlvbicgJiYgb25SZWplY3RlZDsNCiAgICAgIHJlYWN0aW9uLmRvbWFpbiA9IGlzTm9kZSA/IHByb2Nlc3MuZG9tYWluIDogdW5kZWZpbmVkOw0KICAgICAgdGhpcy5fYy5wdXNoKHJlYWN0aW9uKTsNCiAgICAgIGlmKHRoaXMuX2EpdGhpcy5fYS5wdXNoKHJlYWN0aW9uKTsNCiAgICAgIGlmKHRoaXMuX3Mpbm90aWZ5KHRoaXMsIGZhbHNlKTsNCiAgICAgIHJldHVybiByZWFjdGlvbi5wcm9taXNlOw0KICAgIH0sDQogICAgLy8gMjUuNC41LjEgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2gob25SZWplY3RlZCkNCiAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGVkKXsNCiAgICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBvblJlamVjdGVkKTsNCiAgICB9DQogIH0pOw0KICBQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKCl7DQogICAgdmFyIHByb21pc2UgID0gbmV3IEludGVybmFsOw0KICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7DQogICAgdGhpcy5yZXNvbHZlID0gY3R4KCRyZXNvbHZlLCBwcm9taXNlLCAxKTsNCiAgICB0aGlzLnJlamVjdCAgPSBjdHgoJHJlamVjdCwgcHJvbWlzZSwgMSk7DQogIH07DQp9DQoNCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtQcm9taXNlOiAkUHJvbWlzZX0pOw0KX193ZWJwYWNrX3JlcXVpcmVfXygyMSkoJFByb21pc2UsIFBST01JU0UpOw0KX193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoUFJPTUlTRSk7DQpXcmFwcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVtQUk9NSVNFXTsNCg0KLy8gc3RhdGljcw0KJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgUFJPTUlTRSwgew0KICAvLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKQ0KICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyKXsNCiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpDQogICAgICAsICQkcmVqZWN0ICAgPSBjYXBhYmlsaXR5LnJlamVjdDsNCiAgICAkJHJlamVjdChyKTsNCiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOw0KICB9DQp9KTsNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKExJQlJBUlkgfHwgIVVTRV9OQVRJVkUpLCBQUk9NSVNFLCB7DQogIC8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KQ0KICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpew0KICAgIC8vIGluc3RhbmNlb2YgaW5zdGVhZCBvZiBpbnRlcm5hbCBzbG90IGNoZWNrIGJlY2F1c2Ugd2Ugc2hvdWxkIGZpeCBpdCB3aXRob3V0IHJlcGxhY2VtZW50IG5hdGl2ZSBQcm9taXNlIGNvcmUNCiAgICBpZih4IGluc3RhbmNlb2YgJFByb21pc2UgJiYgc2FtZUNvbnN0cnVjdG9yKHguY29uc3RydWN0b3IsIHRoaXMpKXJldHVybiB4Ow0KICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcykNCiAgICAgICwgJCRyZXNvbHZlICA9IGNhcGFiaWxpdHkucmVzb2x2ZTsNCiAgICAkJHJlc29sdmUoeCk7DQogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsNCiAgfQ0KfSk7DQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoVVNFX05BVElWRSAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKShmdW5jdGlvbihpdGVyKXsNCiAgJFByb21pc2UuYWxsKGl0ZXIpWydjYXRjaCddKGVtcHR5KTsNCn0pKSwgUFJPTUlTRSwgew0KICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkNCiAgYWxsOiBmdW5jdGlvbiBhbGwoaXRlcmFibGUpew0KICAgIHZhciBDICAgICAgICAgID0gdGhpcw0KICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykNCiAgICAgICwgcmVzb2x2ZSAgICA9IGNhcGFiaWxpdHkucmVzb2x2ZQ0KICAgICAgLCByZWplY3QgICAgID0gY2FwYWJpbGl0eS5yZWplY3Q7DQogICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsNCiAgICAgIHZhciB2YWx1ZXMgICAgPSBbXQ0KICAgICAgICAsIGluZGV4ICAgICA9IDANCiAgICAgICAgLCByZW1haW5pbmcgPSAxOw0KICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbihwcm9taXNlKXsNCiAgICAgICAgdmFyICRpbmRleCAgICAgICAgPSBpbmRleCsrDQogICAgICAgICAgLCBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7DQogICAgICAgIHZhbHVlcy5wdXNoKHVuZGVmaW5lZCk7DQogICAgICAgIHJlbWFpbmluZysrOw0KICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7DQogICAgICAgICAgaWYoYWxyZWFkeUNhbGxlZClyZXR1cm47DQogICAgICAgICAgYWxyZWFkeUNhbGxlZCAgPSB0cnVlOw0KICAgICAgICAgIHZhbHVlc1skaW5kZXhdID0gdmFsdWU7DQogICAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOw0KICAgICAgICB9LCByZWplY3QpOw0KICAgICAgfSk7DQogICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7DQogICAgfSk7DQogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOw0KICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7DQogIH0sDQogIC8vIDI1LjQuNC40IFByb21pc2UucmFjZShpdGVyYWJsZSkNCiAgcmFjZTogZnVuY3Rpb24gcmFjZShpdGVyYWJsZSl7DQogICAgdmFyIEMgICAgICAgICAgPSB0aGlzDQogICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKQ0KICAgICAgLCByZWplY3QgICAgID0gY2FwYWJpbGl0eS5yZWplY3Q7DQogICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsNCiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7DQogICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGNhcGFiaWxpdHkucmVzb2x2ZSwgcmVqZWN0KTsNCiAgICAgIH0pOw0KICAgIH0pOw0KICAgIGlmKGFicnVwdClyZWplY3QoYWJydXB0LmVycm9yKTsNCiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOw0KICB9DQp9KTsNCg0KLyoqKi8gfSksDQovKiAxMDUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQovLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltDQp2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIERFU0NSSVBUT1JTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKQ0KICAsICRleHBvcnQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KQ0KICAsIHJlZGVmaW5lICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NikNCiAgLCBNRVRBICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpLktFWQ0KICAsICRmYWlscyAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSkNCiAgLCBzaGFyZWQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzApDQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQ0KICAsIHVpZCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykNCiAgLCB3a3MgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikNCiAgLCB3a3NFeHQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpDQogICwgd2tzRGVmaW5lICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KQ0KICAsIGtleU9mICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MykNCiAgLCBlbnVtS2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODYpDQogICwgaXNBcnJheSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKQ0KICAsIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQ0KICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykNCiAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpDQogICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQ0KICAsIF9jcmVhdGUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSkNCiAgLCBnT1BORXh0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpDQogICwgJEdPUEQgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KQ0KICAsICREUCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQ0KICAsICRrZXlzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykNCiAgLCBnT1BEICAgICAgICAgICA9ICRHT1BELmYNCiAgLCBkUCAgICAgICAgICAgICA9ICREUC5mDQogICwgZ09QTiAgICAgICAgICAgPSBnT1BORXh0LmYNCiAgLCAkU3ltYm9sICAgICAgICA9IGdsb2JhbC5TeW1ib2wNCiAgLCAkSlNPTiAgICAgICAgICA9IGdsb2JhbC5KU09ODQogICwgX3N0cmluZ2lmeSAgICAgPSAkSlNPTiAmJiAkSlNPTi5zdHJpbmdpZnkNCiAgLCBQUk9UT1RZUEUgICAgICA9ICdwcm90b3R5cGUnDQogICwgSElEREVOICAgICAgICAgPSB3a3MoJ19oaWRkZW4nKQ0KICAsIFRPX1BSSU1JVElWRSAgID0gd2tzKCd0b1ByaW1pdGl2ZScpDQogICwgaXNFbnVtICAgICAgICAgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZQ0KICAsIFN5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzeW1ib2wtcmVnaXN0cnknKQ0KICAsIEFsbFN5bWJvbHMgICAgID0gc2hhcmVkKCdzeW1ib2xzJykNCiAgLCBPUFN5bWJvbHMgICAgICA9IHNoYXJlZCgnb3Atc3ltYm9scycpDQogICwgT2JqZWN0UHJvdG8gICAgPSBPYmplY3RbUFJPVE9UWVBFXQ0KICAsIFVTRV9OQVRJVkUgICAgID0gdHlwZW9mICRTeW1ib2wgPT0gJ2Z1bmN0aW9uJw0KICAsIFFPYmplY3QgICAgICAgID0gZ2xvYmFsLlFPYmplY3Q7DQovLyBEb24ndCB1c2Ugc2V0dGVycyBpbiBRdCBTY3JpcHQsIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xNzMNCnZhciBzZXR0ZXIgPSAhUU9iamVjdCB8fCAhUU9iamVjdFtQUk9UT1RZUEVdIHx8ICFRT2JqZWN0W1BST1RPVFlQRV0uZmluZENoaWxkOw0KDQovLyBmYWxsYmFjayBmb3Igb2xkIEFuZHJvaWQsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD02ODcNCnZhciBzZXRTeW1ib2xEZXNjID0gREVTQ1JJUFRPUlMgJiYgJGZhaWxzKGZ1bmN0aW9uKCl7DQogIHJldHVybiBfY3JlYXRlKGRQKHt9LCAnYScsIHsNCiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiBkUCh0aGlzLCAnYScsIHt2YWx1ZTogN30pLmE7IH0NCiAgfSkpLmEgIT0gNzsNCn0pID8gZnVuY3Rpb24oaXQsIGtleSwgRCl7DQogIHZhciBwcm90b0Rlc2MgPSBnT1BEKE9iamVjdFByb3RvLCBrZXkpOw0KICBpZihwcm90b0Rlc2MpZGVsZXRlIE9iamVjdFByb3RvW2tleV07DQogIGRQKGl0LCBrZXksIEQpOw0KICBpZihwcm90b0Rlc2MgJiYgaXQgIT09IE9iamVjdFByb3RvKWRQKE9iamVjdFByb3RvLCBrZXksIHByb3RvRGVzYyk7DQp9IDogZFA7DQoNCnZhciB3cmFwID0gZnVuY3Rpb24odGFnKXsNCiAgdmFyIHN5bSA9IEFsbFN5bWJvbHNbdGFnXSA9IF9jcmVhdGUoJFN5bWJvbFtQUk9UT1RZUEVdKTsNCiAgc3ltLl9rID0gdGFnOw0KICByZXR1cm4gc3ltOw0KfTsNCg0KdmFyIGlzU3ltYm9sID0gVVNFX05BVElWRSAmJiB0eXBlb2YgJFN5bWJvbC5pdGVyYXRvciA9PSAnc3ltYm9sJyA/IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJzsNCn0gOiBmdW5jdGlvbihpdCl7DQogIHJldHVybiBpdCBpbnN0YW5jZW9mICRTeW1ib2w7DQp9Ow0KDQp2YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgRCl7DQogIGlmKGl0ID09PSBPYmplY3RQcm90bykkZGVmaW5lUHJvcGVydHkoT1BTeW1ib2xzLCBrZXksIEQpOw0KICBhbk9iamVjdChpdCk7DQogIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7DQogIGFuT2JqZWN0KEQpOw0KICBpZihoYXMoQWxsU3ltYm9scywga2V5KSl7DQogICAgaWYoIUQuZW51bWVyYWJsZSl7DQogICAgICBpZighaGFzKGl0LCBISURERU4pKWRQKGl0LCBISURERU4sIGNyZWF0ZURlc2MoMSwge30pKTsNCiAgICAgIGl0W0hJRERFTl1ba2V5XSA9IHRydWU7DQogICAgfSBlbHNlIHsNCiAgICAgIGlmKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0paXRbSElEREVOXVtrZXldID0gZmFsc2U7DQogICAgICBEID0gX2NyZWF0ZShELCB7ZW51bWVyYWJsZTogY3JlYXRlRGVzYygwLCBmYWxzZSl9KTsNCiAgICB9IHJldHVybiBzZXRTeW1ib2xEZXNjKGl0LCBrZXksIEQpOw0KICB9IHJldHVybiBkUChpdCwga2V5LCBEKTsNCn07DQp2YXIgJGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKGl0LCBQKXsNCiAgYW5PYmplY3QoaXQpOw0KICB2YXIga2V5cyA9IGVudW1LZXlzKFAgPSB0b0lPYmplY3QoUCkpDQogICAgLCBpICAgID0gMA0KICAgICwgbCA9IGtleXMubGVuZ3RoDQogICAgLCBrZXk7DQogIHdoaWxlKGwgPiBpKSRkZWZpbmVQcm9wZXJ0eShpdCwga2V5ID0ga2V5c1tpKytdLCBQW2tleV0pOw0KICByZXR1cm4gaXQ7DQp9Ow0KdmFyICRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaXQsIFApew0KICByZXR1cm4gUCA9PT0gdW5kZWZpbmVkID8gX2NyZWF0ZShpdCkgOiAkZGVmaW5lUHJvcGVydGllcyhfY3JlYXRlKGl0KSwgUCk7DQp9Ow0KdmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uIHByb3BlcnR5SXNFbnVtZXJhYmxlKGtleSl7DQogIHZhciBFID0gaXNFbnVtLmNhbGwodGhpcywga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSk7DQogIGlmKHRoaXMgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybiBmYWxzZTsNCiAgcmV0dXJuIEUgfHwgIWhhcyh0aGlzLCBrZXkpIHx8ICFoYXMoQWxsU3ltYm9scywga2V5KSB8fCBoYXModGhpcywgSElEREVOKSAmJiB0aGlzW0hJRERFTl1ba2V5XSA/IEUgOiB0cnVlOw0KfTsNCnZhciAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpew0KICBpdCAgPSB0b0lPYmplY3QoaXQpOw0KICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOw0KICBpZihpdCA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpcmV0dXJuOw0KICB2YXIgRCA9IGdPUEQoaXQsIGtleSk7DQogIGlmKEQgJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIShoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSlELmVudW1lcmFibGUgPSB0cnVlOw0KICByZXR1cm4gRDsNCn07DQp2YXIgJGdldE93blByb3BlcnR5TmFtZXMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXsNCiAgdmFyIG5hbWVzICA9IGdPUE4odG9JT2JqZWN0KGl0KSkNCiAgICAsIHJlc3VsdCA9IFtdDQogICAgLCBpICAgICAgPSAwDQogICAgLCBrZXk7DQogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpew0KICAgIGlmKCFoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYga2V5ICE9IEhJRERFTiAmJiBrZXkgIT0gTUVUQSlyZXN1bHQucHVzaChrZXkpOw0KICB9IHJldHVybiByZXN1bHQ7DQp9Ow0KdmFyICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpew0KICB2YXIgSVNfT1AgID0gaXQgPT09IE9iamVjdFByb3RvDQogICAgLCBuYW1lcyAgPSBnT1BOKElTX09QID8gT1BTeW1ib2xzIDogdG9JT2JqZWN0KGl0KSkNCiAgICAsIHJlc3VsdCA9IFtdDQogICAgLCBpICAgICAgPSAwDQogICAgLCBrZXk7DQogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpew0KICAgIGlmKGhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiAoSVNfT1AgPyBoYXMoT2JqZWN0UHJvdG8sIGtleSkgOiB0cnVlKSlyZXN1bHQucHVzaChBbGxTeW1ib2xzW2tleV0pOw0KICB9IHJldHVybiByZXN1bHQ7DQp9Ow0KDQovLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkNCmlmKCFVU0VfTkFUSVZFKXsNCiAgJFN5bWJvbCA9IGZ1bmN0aW9uIFN5bWJvbCgpew0KICAgIGlmKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKXRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpOw0KICAgIHZhciB0YWcgPSB1aWQoYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOw0KICAgIHZhciAkc2V0ID0gZnVuY3Rpb24odmFsdWUpew0KICAgICAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8pJHNldC5jYWxsKE9QU3ltYm9scywgdmFsdWUpOw0KICAgICAgaWYoaGFzKHRoaXMsIEhJRERFTikgJiYgaGFzKHRoaXNbSElEREVOXSwgdGFnKSl0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlOw0KICAgICAgc2V0U3ltYm9sRGVzYyh0aGlzLCB0YWcsIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsNCiAgICB9Ow0KICAgIGlmKERFU0NSSVBUT1JTICYmIHNldHRlcilzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLCB0YWcsIHtjb25maWd1cmFibGU6IHRydWUsIHNldDogJHNldH0pOw0KICAgIHJldHVybiB3cmFwKHRhZyk7DQogIH07DQogIHJlZGVmaW5lKCRTeW1ib2xbUFJPVE9UWVBFXSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKXsNCiAgICByZXR1cm4gdGhpcy5fazsNCiAgfSk7DQoNCiAgJEdPUEQuZiA9ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7DQogICREUC5mICAgPSAkZGVmaW5lUHJvcGVydHk7DQogIF9fd2VicGFja19yZXF1aXJlX18oNjUpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lczsNCiAgX193ZWJwYWNrX3JlcXVpcmVfXyg0MSkuZiAgPSAkcHJvcGVydHlJc0VudW1lcmFibGU7DQogIF9fd2VicGFja19yZXF1aXJlX18oNTgpLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzOw0KDQogIGlmKERFU0NSSVBUT1JTICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KSl7DQogICAgcmVkZWZpbmUoT2JqZWN0UHJvdG8sICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICRwcm9wZXJ0eUlzRW51bWVyYWJsZSwgdHJ1ZSk7DQogIH0NCg0KICB3a3NFeHQuZiA9IGZ1bmN0aW9uKG5hbWUpew0KICAgIHJldHVybiB3cmFwKHdrcyhuYW1lKSk7DQogIH0NCn0NCg0KJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1N5bWJvbDogJFN5bWJvbH0pOw0KDQpmb3IodmFyIHN5bWJvbHMgPSAoDQogIC8vIDE5LjQuMi4yLCAxOS40LjIuMywgMTkuNC4yLjQsIDE5LjQuMi42LCAxOS40LjIuOCwgMTkuNC4yLjksIDE5LjQuMi4xMCwgMTkuNC4yLjExLCAxOS40LjIuMTIsIDE5LjQuMi4xMywgMTkuNC4yLjE0DQogICdoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcycNCikuc3BsaXQoJywnKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrcyhzeW1ib2xzW2krK10pOw0KDQpmb3IodmFyIHN5bWJvbHMgPSAka2V5cyh3a3Muc3RvcmUpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzRGVmaW5lKHN5bWJvbHNbaSsrXSk7DQoNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdTeW1ib2wnLCB7DQogIC8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KQ0KICAnZm9yJzogZnVuY3Rpb24oa2V5KXsNCiAgICByZXR1cm4gaGFzKFN5bWJvbFJlZ2lzdHJ5LCBrZXkgKz0gJycpDQogICAgICA/IFN5bWJvbFJlZ2lzdHJ5W2tleV0NCiAgICAgIDogU3ltYm9sUmVnaXN0cnlba2V5XSA9ICRTeW1ib2woa2V5KTsNCiAgfSwNCiAgLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pDQogIGtleUZvcjogZnVuY3Rpb24ga2V5Rm9yKGtleSl7DQogICAgaWYoaXNTeW1ib2woa2V5KSlyZXR1cm4ga2V5T2YoU3ltYm9sUmVnaXN0cnksIGtleSk7DQogICAgdGhyb3cgVHlwZUVycm9yKGtleSArICcgaXMgbm90IGEgc3ltYm9sIScpOw0KICB9LA0KICB1c2VTZXR0ZXI6IGZ1bmN0aW9uKCl7IHNldHRlciA9IHRydWU7IH0sDQogIHVzZVNpbXBsZTogZnVuY3Rpb24oKXsgc2V0dGVyID0gZmFsc2U7IH0NCn0pOw0KDQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnT2JqZWN0Jywgew0KICAvLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pDQogIGNyZWF0ZTogJGNyZWF0ZSwNCiAgLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpDQogIGRlZmluZVByb3BlcnR5OiAkZGVmaW5lUHJvcGVydHksDQogIC8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpDQogIGRlZmluZVByb3BlcnRpZXM6ICRkZWZpbmVQcm9wZXJ0aWVzLA0KICAvLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApDQogIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogJGdldE93blByb3BlcnR5RGVzY3JpcHRvciwNCiAgLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykNCiAgZ2V0T3duUHJvcGVydHlOYW1lczogJGdldE93blByb3BlcnR5TmFtZXMsDQogIC8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTykNCiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiAkZ2V0T3duUHJvcGVydHlTeW1ib2xzDQp9KTsNCg0KLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pDQokSlNPTiAmJiAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghVVNFX05BVElWRSB8fCAkZmFpbHMoZnVuY3Rpb24oKXsNCiAgdmFyIFMgPSAkU3ltYm9sKCk7DQogIC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9DQogIC8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbA0KICAvLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9scw0KICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoe2E6IFN9KSAhPSAne30nIHx8IF9zdHJpbmdpZnkoT2JqZWN0KFMpKSAhPSAne30nOw0KfSkpLCAnSlNPTicsIHsNCiAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpew0KICAgIGlmKGl0ID09PSB1bmRlZmluZWQgfHwgaXNTeW1ib2woaXQpKXJldHVybjsgLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZA0KICAgIHZhciBhcmdzID0gW2l0XQ0KICAgICAgLCBpICAgID0gMQ0KICAgICAgLCByZXBsYWNlciwgJHJlcGxhY2VyOw0KICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7DQogICAgcmVwbGFjZXIgPSBhcmdzWzFdOw0KICAgIGlmKHR5cGVvZiByZXBsYWNlciA9PSAnZnVuY3Rpb24nKSRyZXBsYWNlciA9IHJlcGxhY2VyOw0KICAgIGlmKCRyZXBsYWNlciB8fCAhaXNBcnJheShyZXBsYWNlcikpcmVwbGFjZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKXsNCiAgICAgIGlmKCRyZXBsYWNlcil2YWx1ZSA9ICRyZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpOw0KICAgICAgaWYoIWlzU3ltYm9sKHZhbHVlKSlyZXR1cm4gdmFsdWU7DQogICAgfTsNCiAgICBhcmdzWzFdID0gcmVwbGFjZXI7DQogICAgcmV0dXJuIF9zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3MpOw0KICB9DQp9KTsNCg0KLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KQ0KJFN5bWJvbFtQUk9UT1RZUEVdW1RPX1BSSU1JVElWRV0gfHwgX193ZWJwYWNrX3JlcXVpcmVfXyg2KSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpOw0KLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQ0Kc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwgJ1N5bWJvbCcpOw0KLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXQ0Kc2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTsNCi8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddDQpzZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTsNCg0KLyoqKi8gfSksDQovKiAxMDYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkoJ2FzeW5jSXRlcmF0b3InKTsNCg0KLyoqKi8gfSksDQovKiAxMDcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkoJ29ic2VydmFibGUnKTsNCg0KLyoqKi8gfSksDQovKiAxMDggKi8sDQovKiAxMDkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX3N0cmluZ2lmeSA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOw0KDQp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOw0KDQp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsNCg0KdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOw0KDQpleHBvcnRzLmRpdmlkZVVSTCA9IGRpdmlkZVVSTDsNCmV4cG9ydHMuZGl2aWRlRW1haWwgPSBkaXZpZGVFbWFpbDsNCmV4cG9ydHMuZW1wdHlPYmplY3QgPSBlbXB0eU9iamVjdDsNCmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOw0KZXhwb3J0cy5nZXRVc2VyVVJMRnJvbUVtYWlsID0gZ2V0VXNlclVSTEZyb21FbWFpbDsNCmV4cG9ydHMuZ2V0VXNlckVtYWlsRnJvbVVSTCA9IGdldFVzZXJFbWFpbEZyb21VUkw7DQpleHBvcnRzLmNvbnZlcnRUb1VzZXJVUkwgPSBjb252ZXJ0VG9Vc2VyVVJMOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8NCi8qKg0KICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bA0KICogQG1vZHVsZSB1dGlscw0KICovDQoNCi8qKg0KICogQHR5cGVkZWYgZGl2aWRlVVJMDQogKiBAdHlwZSBPYmplY3QNCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIFVSTA0KICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTA0KICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwNCiAqLw0KDQovKioNCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQ0KICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MNCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwNCiAqLw0KZnVuY3Rpb24gZGl2aWRlVVJMKHVybCkgew0KDQogIGlmICghdXJsKSB0aHJvdyBFcnJvcignVVJMIGlzIG5lZWRlZCB0byBzcGxpdCcpOw0KDQogIGZ1bmN0aW9uIHJlY3Vyc2UodmFsdWUpIHsNCiAgICB2YXIgcmVnZXggPSAvKFthLXpBLVotXSopKDpcL1wvKD86XC4pP3w6KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7DQogICAgdmFyIHN1YnN0ID0gJyQxLCQzLCQ0JzsNCiAgICB2YXIgcGFydHMgPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4LCBzdWJzdCkuc3BsaXQoJywnKTsNCiAgICByZXR1cm4gcGFydHM7DQogIH0NCg0KICB2YXIgcGFydHMgPSByZWN1cnNlKHVybCk7DQoNCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gc2NoZW1lDQogIGlmIChwYXJ0c1swXSA9PT0gdXJsICYmICFwYXJ0c1swXS5pbmNsdWRlcygnQCcpKSB7DQoNCiAgICB2YXIgX3Jlc3VsdCA9IHsNCiAgICAgIHR5cGU6ICIiLA0KICAgICAgZG9tYWluOiB1cmwsDQogICAgICBpZGVudGl0eTogIiINCiAgICB9Ow0KDQogICAgY29uc29sZS5lcnJvcignW0RpdmlkZVVSTF0gRGl2aWRlVVJMIGRvblwndCBzdXBwb3J0IHVybCB3aXRob3V0IHNjaGVtZS4gUGxlYXNlIHJldmlldyB5b3VyIHVybCBhZGRyZXNzJywgdXJsKTsNCg0KICAgIHJldHVybiBfcmVzdWx0Ow0KICB9DQoNCiAgLy8gY2hlY2sgaWYgdGhlIHVybCBoYXMgdGhlIHNjaGVtZSBhbmQgaW5jbHVkZXMgYW4gQA0KICBpZiAocGFydHNbMF0gPT09IHVybCAmJiBwYXJ0c1swXS5pbmNsdWRlcygnQCcpKSB7DQogICAgdmFyIHNjaGVtZSA9IHBhcnRzWzBdID09PSB1cmwgPyAnc210cCcgOiBwYXJ0c1swXTsNCiAgICBwYXJ0cyA9IHJlY3Vyc2Uoc2NoZW1lICsgJzovLycgKyBwYXJ0c1swXSk7DQogIH0NCg0KICAvLyBpZiB0aGUgZG9tYWluIGluY2x1ZGVzIGFuIEAsIGRpdmlkZSBpdCB0byBkb21haW4gYW5kIGlkZW50aXR5IHJlc3BlY3RpdmVseQ0KICBpZiAocGFydHNbMV0uaW5jbHVkZXMoJ0AnKSkgew0KICAgIHBhcnRzWzJdID0gcGFydHNbMF0gKyAnOi8vJyArIHBhcnRzWzFdOw0KICAgIHBhcnRzWzFdID0gcGFydHNbMV0uc3Vic3RyKHBhcnRzWzFdLmluZGV4T2YoJ0AnKSArIDEpOw0KICB9IC8qZWxzZSBpZiAocGFydHNbMl0uaW5jbHVkZXMoJy8nKSkgew0KICAgIHBhcnRzWzJdID0gcGFydHNbMl0uc3Vic3RyKHBhcnRzWzJdLmxhc3RJbmRleE9mKCcvJykrMSk7DQogICAgfSovDQoNCiAgdmFyIHJlc3VsdCA9IHsNCiAgICB0eXBlOiBwYXJ0c1swXSwNCiAgICBkb21haW46IHBhcnRzWzFdLA0KICAgIGlkZW50aXR5OiBwYXJ0c1syXQ0KICB9Ow0KDQogIHJldHVybiByZXN1bHQ7DQp9DQoNCmZ1bmN0aW9uIGRpdmlkZUVtYWlsKGVtYWlsKSB7DQogIHZhciBpbmRleE9mQXQgPSBlbWFpbC5pbmRleE9mKCdAJyk7DQoNCiAgdmFyIHJlc3VsdCA9IHsNCiAgICB1c2VybmFtZTogZW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCksDQogICAgZG9tYWluOiBlbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgZW1haWwubGVuZ3RoKQ0KICB9Ow0KDQogIHJldHVybiByZXN1bHQ7DQp9DQoNCi8qKg0KICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5DQogKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdCBPYmplY3QgdG8gYmUgY2hlY2tlZA0KICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgc3RhdHVzIG9mIE9iamVjdCwgZW1wdHkgb3Igbm90ICh0cnVlfGZhbHNlKTsNCiAqLw0KZnVuY3Rpb24gZW1wdHlPYmplY3Qob2JqZWN0KSB7DQogIHJldHVybiAoMCwgX2tleXMyLmRlZmF1bHQpKG9iamVjdCkubGVuZ3RoID4gMCA/IGZhbHNlIDogdHJ1ZTsNCn0NCg0KLyoqDQogKiBNYWtlIGEgQ09QWSBvZiB0aGUgb3JpZ2luYWwgZGF0YQ0KICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZA0KICogQHJldHVybiB7T2JqZWN0fQ0KICovDQpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7DQogIC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4NCiAgaWYgKG9iaikgcmV0dXJuIEpTT04ucGFyc2UoKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKG9iaikpOw0KfQ0KDQovKioNCiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbA0KICogQHBhcmFtICB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwNCiAqIEByZXR1cm4ge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMDQogKi8NCmZ1bmN0aW9uIGdldFVzZXJVUkxGcm9tRW1haWwodXNlckVtYWlsKSB7DQogIHZhciBpbmRleE9mQXQgPSB1c2VyRW1haWwuaW5kZXhPZignQCcpOw0KICByZXR1cm4gJ3VzZXI6Ly8nICsgdXNlckVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCB1c2VyRW1haWwubGVuZ3RoKSArICcvJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoMCwgaW5kZXhPZkF0KTsNCn0NCg0KLyoqDQogKiBPYnRhaW5zIHRoZSB1c2VyIGVtYWlsIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBVUkwNCiAqIEBwYXJhbSAge1VSTC5VUkx9IHVzZXJVUkwgVGhlIHVzZXIgVVJMDQogKiBAcmV0dXJuIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbA0KICovDQpmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKHVzZXJVUkwpIHsNCiAgdmFyIHVybCA9IGRpdmlkZVVSTCh1c2VyVVJMKTsNCiAgcmV0dXJuIHVybC5pZGVudGl0eS5yZXBsYWNlKCcvJywgJycpICsgJ0AnICsgdXJsLmRvbWFpbjsgLy8gaWRlbnRpdHkgZmllbGQgaGFzICcvZXhhbXBsZUlEJyBpbnN0ZWFkIG9mICdleGFtcGxlSUQnDQp9DQoNCi8qKg0KICogQ2hlY2sgaWYgdGhlIHVzZXIgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSBVUkwgZm9ybWF0LCBpZiBub3QsIGNvbnZlcnQgdG8gVVJMIGZvcm1hdA0KICogQHBhcmFtICB7c3RyaW5nfSAgIGlkZW50aWZpZXIgIHVzZXIgaWRlbnRpZmllcg0KICogQHJldHVybiB7c3RyaW5nfSAgIHVzZXJVUkwgICAgdGhlIHVzZXIgVVJMDQogKi8NCmZ1bmN0aW9uIGNvbnZlcnRUb1VzZXJVUkwoaWRlbnRpZmllcikgew0KDQogIC8vIGNoZWNrIGlmIHRoZSBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIHVybCBmb3JtYXQNCiAgaWYgKGlkZW50aWZpZXIuc3Vic3RyaW5nKDAsIDcpID09PSAndXNlcjovLycpIHsNCiAgICB2YXIgZGl2aWRlZFVSTCA9IGRpdmlkZVVSTChpZGVudGlmaWVyKTsNCg0KICAgIC8vY2hlY2sgaWYgdGhlIHVybCBpcyB3ZWxsIGZvcm1hdGVkDQogICAgaWYgKGRpdmlkZWRVUkwuZG9tYWluICYmIGRpdmlkZWRVUkwuaWRlbnRpdHkpIHsNCiAgICAgIHJldHVybiBpZGVudGlmaWVyOw0KICAgIH0gZWxzZSB7DQogICAgICB0aHJvdyAndXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCc7DQogICAgfQ0KDQogICAgLy9pZiBub3QsIGNvbnZlcnQgdGhlIHVzZXIgZW1haWwgdG8gVVJMIGZvcm1hdA0KICB9IGVsc2Ugew0KICAgIHJldHVybiBnZXRVc2VyVVJMRnJvbUVtYWlsKGlkZW50aWZpZXIpOw0KICB9DQp9DQoNCi8qKiovIH0pLA0KLyogMTEwICovLA0KLyogMTExICovLA0KLyogMTEyICovLA0KLyogMTEzICovLA0KLyogMTE0ICovLA0KLyogMTE1ICovLA0KLyogMTE2ICovLA0KLyogMTE3ICovLA0KLyogMTE4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7DQoNCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOw0KDQp2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7DQoNCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7DQoNCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsNCg0KdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOw0KDQp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOw0KDQp2YXIgX2dldDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyk7DQoNCnZhciBfZ2V0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldDIpOw0KDQp2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOw0KDQp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7DQoNCnZhciBfRGF0YU9iamVjdDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7DQoNCnZhciBfRGF0YU9iamVjdDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Mik7DQoNCnZhciBfRGF0YU9iamVjdENoaWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOw0KDQp2YXIgX0RhdGFPYmplY3RDaGlsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Q2hpbGQpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8NCg0KdmFyIEZpbHRlclR5cGUgPSB7IEFOWTogJ2FueScsIFNUQVJUOiAnc3RhcnQnLCBFWEFDVDogJ2V4YWN0JyB9Ow0KDQovKioNCiAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIHRoZSBTeW5jaGVyIHN1YnNjcmliZSBjYWxsLg0KICogVG8gYmUgdXNlZCBhcyBhbiBvYnNlcnZhdGlvbiBwb2ludCBmcm9tIGEgRGF0YU9iamVjdFJlcG9ydGVyIGNoYW5nZS4NCiAqLw0KDQp2YXIgRGF0YU9iamVjdE9ic2VydmVyID0gZnVuY3Rpb24gKF9EYXRhT2JqZWN0KSB7DQogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlciwgX0RhdGFPYmplY3QpOw0KDQogIC8qIHByaXZhdGUNCiAgX2NoYW5nZUxpc3RlbmVyOiBNc2dMaXN0ZW5lcg0KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQ0KICBfZmlsdGVyczogezxmaWx0ZXI+OiB7dHlwZTogPHN0YXJ0LCBleGFjdD4sIGNhbGxiYWNrOiA8ZnVuY3Rpb24+fSB9DQogICovDQoNCiAgLyoqDQogICAqIEBpZ25vcmUNCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuc3Vic2NyaWJlIG1ldGhvZA0KICAgKi8NCiAgZnVuY3Rpb24gRGF0YU9iamVjdE9ic2VydmVyKHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zLCBpbml0aWFsVmVyc2lvbikgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RPYnNlcnZlcik7DQoNCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdE9ic2VydmVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIpKS5jYWxsKHRoaXMsIHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YS5kYXRhLCBjaGlsZHJlbnMpKTsNCg0KICAgIHZhciBfdGhpcyA9IF90aGlzMjsNCg0KICAgIF90aGlzLl92ZXJzaW9uID0gaW5pdGlhbFZlcnNpb247DQogICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsNCg0KICAgIF90aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICBfdGhpcy5fb25GaWx0ZXIoZXZlbnQpOw0KICAgIH0pOw0KDQogICAgLy9zZXR1cCBjaGlsZHJlbnMgZGF0YSBmcm9tIHN1YnNjcmlwdGlvbg0KICAgICgwLCBfa2V5czIuZGVmYXVsdCkoaW5pdGlhbERhdGEuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZElkKSB7DQogICAgICB2YXIgY2hpbGREYXRhID0gaW5pdGlhbERhdGEuY2hpbGRyZW5zW2NoaWxkSWRdOw0KICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXSA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBjaGlsZElkLCBjaGlsZERhdGEpOw0KICAgIH0pOw0KDQogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7DQogICAgcmV0dXJuIF90aGlzMjsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlciwgW3sNCiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7DQogICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZSksICdfYWxsb2NhdGVMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOw0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJywgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICBpZiAobXNnLnR5cGUgPT09ICd1cGRhdGUnKSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOw0KICAgICAgICAgIF90aGlzLl9jaGFuZ2VPYmplY3QoX3RoaXMuX3N5bmNPYmosIG1zZyk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7DQogICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZSksICdfcmVsZWFzZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIucmVtb3ZlKCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RlbGV0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOw0KICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9vYnNlcnZlcnNbX3RoaXMuX3VybF07DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3Vuc3Vic2NyaWJlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsVW5TdWJzY3JpYmUNCiAgICAgIHZhciB1blN1YnNjcmliZU1zZyA9IHsNCiAgICAgICAgdHlwZTogJ3Vuc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogX3RoaXMuX3N5bmNoZXIuX3N1YlVSTCwNCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9DQogICAgICB9Ow0KDQogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHVuU3Vic2NyaWJlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogJywgcmVwbHkpOw0KICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOw0KICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fb2JzZXJ2ZXJzW190aGlzLl91cmxdOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBSZWdpc3RlciB0aGUgY2hhbmdlIGxpc3RlbmVycyBzZW50IGJ5IHRoZSByZXBvcnRlcg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXIgLSBGaWx0ZXIgdGhhdCBpZGVudGlmaWVzIHRoZSBmaWVsZCAoc2VwYXJhdGVkIGRvdCBwYXRoKS4gQWNjZXB0cyAqIGF0IHRoZSBlbmQgZm9yIGEgbW9yZSB1bnJlc3RyaWN0ZWQgZmlsdGVyaW5nLg0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnb25DaGFuZ2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShmaWx0ZXIsIGNhbGxiYWNrKSB7DQogICAgICB2YXIga2V5ID0gZmlsdGVyOw0KICAgICAgdmFyIGZpbHRlck9iaiA9IHsNCiAgICAgICAgdHlwZTogRmlsdGVyVHlwZS5FWEFDVCwNCiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrDQogICAgICB9Ow0KDQogICAgICB2YXIgaWR4ID0gZmlsdGVyLmluZGV4T2YoJyonKTsNCiAgICAgIGlmIChpZHggPT09IGZpbHRlci5sZW5ndGggLSAxKSB7DQogICAgICAgIGlmIChpZHggPT09IDApIHsNCiAgICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuQU5ZOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZpbHRlck9iai50eXBlID0gRmlsdGVyVHlwZS5TVEFSVDsNCiAgICAgICAgICBrZXkgPSBmaWx0ZXIuc3Vic3RyKDAsIGZpbHRlci5sZW5ndGggLSAxKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB0aGlzLl9maWx0ZXJzW2tleV0gPSBmaWx0ZXJPYmo7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX29uRmlsdGVyJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRmlsdGVyKGV2ZW50KSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsNCiAgICAgICAgdmFyIGZpbHRlciA9IF90aGlzLl9maWx0ZXJzW2tleV07DQogICAgICAgIGlmIChmaWx0ZXIudHlwZSA9PT0gRmlsdGVyVHlwZS5BTlkpIHsNCiAgICAgICAgICAvL21hdGNoIGFueXRoaW5nDQogICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsNCiAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXIudHlwZSA9PT0gRmlsdGVyVHlwZS5TVEFSVCkgew0KICAgICAgICAgIC8vaWYgc3RhcnRzIHdpdGggZmlsdGVyLi4uDQogICAgICAgICAgaWYgKGV2ZW50LmZpZWxkLmluZGV4T2Yoa2V5KSA9PT0gMCkgew0KICAgICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuRVhBQ1QpIHsNCiAgICAgICAgICAvL2V4YWN0IG1hdGNoDQogICAgICAgICAgaWYgKGV2ZW50LmZpZWxkID09PSBrZXkpIHsNCiAgICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH1dKTsNCiAgcmV0dXJuIERhdGFPYmplY3RPYnNlcnZlcjsNCn0oX0RhdGFPYmplY3QzLmRlZmF1bHQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovKTsNCg0KZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdE9ic2VydmVyOw0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107DQoNCi8qKiovIH0pLA0KLyogMTE5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7DQoNCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOw0KDQp2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7DQoNCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7DQoNCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsNCg0KdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOw0KDQp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOw0KDQp2YXIgX2dldDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyk7DQoNCnZhciBfZ2V0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldDIpOw0KDQp2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpOw0KDQp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7DQoNCnZhciBfRGF0YU9iamVjdDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7DQoNCnZhciBfRGF0YU9iamVjdDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Mik7DQoNCnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCi8qKg0KICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIFN5bmNoZXIgY3JlYXRlIGNhbGwuDQogKiBUbyBiZSB1c2VkIGFzIGEgcmVwb3J0ZXIgcG9pbnQsIGNoYW5nZXMgd2lsbCBiZSBzdWJtaXRlZCB0byBEYXRhT2JqZWN0T2JzZXJ2ZXIgaW5zdGFuY2VzLg0KICovDQovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8NCg0KdmFyIERhdGFPYmplY3RSZXBvcnRlciA9IGZ1bmN0aW9uIChfRGF0YU9iamVjdCkgew0KICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsIF9EYXRhT2JqZWN0KTsNCg0KICAvKiBwcml2YXRlDQogIF9zdWJzY3JpcHRpb25zOiA8aHlwZXJ0eVVybDogeyBzdGF0dXM6IHN0cmluZyB9IH0+DQogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9vblN1YnNjcmlwdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICBfb25SZXNwb25zZUhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICBfb25SZWFkSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkDQogICovDQoNCiAgLyoqDQogICAqIEBpZ25vcmUNCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuY3JlYXRlIG1ldGhvZA0KICAgKi8NCiAgZnVuY3Rpb24gRGF0YU9iamVjdFJlcG9ydGVyKHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSB7DQogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdFJlcG9ydGVyKTsNCg0KICAgIHZhciBfdGhpczIgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChEYXRhT2JqZWN0UmVwb3J0ZXIuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlcikpLmNhbGwodGhpcywgc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMpKTsNCg0KICAgIHZhciBfdGhpcyA9IF90aGlzMjsNCg0KICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307DQoNCiAgICBfdGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci0nICsgdXJsICsgJy1TRU5EOiAnLCBldmVudCk7DQogICAgICBfdGhpcy5fb25DaGFuZ2UoZXZlbnQpOw0KICAgIH0pOw0KDQogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7DQogICAgcmV0dXJuIF90aGlzMjsNCiAgfQ0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlciwgW3sNCiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7DQogICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksICdfYWxsb2NhdGVMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOw0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX29iamVjdExpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsLCBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0LScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7DQogICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsNCiAgICAgICAgICBjYXNlICdyZXNwb25zZSc6DQogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpO2JyZWFrOw0KICAgICAgICAgIGNhc2UgJ3JlYWQnOg0KICAgICAgICAgICAgX3RoaXMuX29uUmVhZChtc2cpO2JyZWFrOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgew0KICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOw0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNlbmQgaW52aXRhdGlvbnMgKGNyZWF0ZSBtZXNzYWdlcykgdG8gaHlwZXJ0aWVzLCBvYnNlcnZlcnMgbGlzdC4NCiAgICAgKiBAcGFyYW0gIHtIeXBlcnR5VVJMW119IG9ic2VydmVycyBMaXN0IG9mIEh5cGVydHkgVVJMJ3MNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnaW52aXRlT2JzZXJ2ZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gaW52aXRlT2JzZXJ2ZXJzKG9ic2VydmVycykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGUNCiAgICAgIHZhciBpbnZpdGVNc2cgPSB7DQogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fc3luY2hlci5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLA0KICAgICAgICBib2R5OiB7IHJlc3VtZTogZmFsc2UsIHJlc291cmNlOiBfdGhpcy5fdXJsLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZhbHVlOiBfdGhpcy5fc3luY09iai5kYXRhLCBhdXRob3Jpc2U6IG9ic2VydmVycyB9DQogICAgICB9Ow0KDQogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGludml0ZU1zZyk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RlbGV0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkRlbGV0ZQ0KICAgICAgdmFyIGRlbGV0ZU1zZyA9IHsNCiAgICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsDQogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQ0KICAgICAgfTsNCg0KICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShkZWxldGVNc2csIGZ1bmN0aW9uIChyZXBseSkgew0KICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogJywgcmVwbHkpOw0KICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOw0KICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fcmVwb3J0ZXJzW190aGlzLl91cmxdOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTdWJzY3JpcHRpb25zIHJlcXVlc3RlZCBhbmQgYWNjZXB0ZWQgdG8gdGhpcyByZXBvcnRlcg0KICAgICAqIEB0eXBlIHtPYmplY3Q8SHlwZXJ0eVVSTCwgU3luY1N1YnNjcmlwdGlvbj59DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uU3Vic2NyaXB0aW9uJywNCg0KDQogICAgLyoqDQogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3Mgc3Vic2NyaWJlIGFuZCB1bnN1YnNjcmliZSBub3RpZmljYXRpb25zDQogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGV2ZW50cw0KICAgICAqLw0KICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1YnNjcmlwdGlvbihjYWxsYmFjaykgew0KICAgICAgdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyID0gY2FsbGJhY2s7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgcmVzcG9uc2Ugbm90aWZpY2F0aW9ucyBvZiB0aGUgY3JlYXRlJ3MNCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlY2VpdmUgZXZlbnRzDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uUmVzcG9uc2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9vblJlc3BvbnNlSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlYWQgbm90aWZpY2F0aW9ucw0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnb25SZWFkJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZWFkKGNhbGxiYWNrKSB7DQogICAgICB0aGlzLl9vblJlYWRIYW5kbGVyID0gY2FsbGJhY2s7DQogICAgfQ0KDQogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gcGFyZW50IFN5bmNoZXIgLT4gX29uRm9yd2FyZA0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25Gb3J3YXJkJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRm9yd2FyZChtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAnLCBtc2cpOw0KICAgICAgc3dpdGNoIChtc2cuYm9keS50eXBlKSB7DQogICAgICAgIGNhc2UgJ3N1YnNjcmliZSc6DQogICAgICAgICAgX3RoaXMuX29uU3Vic2NyaWJlKG1zZyk7YnJlYWs7DQogICAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoNCiAgICAgICAgICBfdGhpcy5fb25VblN1YnNjcmliZShtc2cpO2JyZWFrOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoaXMgLT4gX29uRm9yd2FyZDogZW1pdHRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IHN1YnNjcmliZQ0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25TdWJzY3JpYmUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25TdWJzY3JpYmUobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGh5cGVydHlVcmwgPSBtc2cuYm9keS5mcm9tOw0KDQogICAgICB2YXIgZXZlbnQgPSB7DQogICAgICAgIHR5cGU6IG1zZy5ib2R5LnR5cGUsDQogICAgICAgIHVybDogaHlwZXJ0eVVybCwNCg0KICAgICAgICBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHksDQoNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQoKSB7DQogICAgICAgICAgLy9jcmVhdGUgbmV3IHN1YnNjcmlwdGlvbg0KICAgICAgICAgIHZhciBzdWIgPSB7IHVybDogaHlwZXJ0eVVybCwgc3RhdHVzOiAnb24nIH07DQogICAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF0gPSBzdWI7DQoNCiAgICAgICAgICAvL3Byb2Nlc3MgYW5kIHNlbmQgY2hpbGRyZW5zIGRhdGENCiAgICAgICAgICB2YXIgY2hpbGRyZW5WYWx1ZXMgPSB7fTsNCiAgICAgICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkSWQpIHsNCiAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdLmRhdGE7DQogICAgICAgICAgICBjaGlsZHJlblZhbHVlc1tjaGlsZElkXSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShjaGlsZERhdGEpOw0KICAgICAgICAgIH0pOw0KDQogICAgICAgICAgLy9zZW5kIG9rIHJlc3BvbnNlIG1lc3NhZ2UNCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLA0KICAgICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHNjaGVtYTogX3RoaXMuX3NjaGVtYSwgdmVyc2lvbjogX3RoaXMuX3ZlcnNpb24sIHZhbHVlOiB7IGRhdGE6ICgwLCBfdXRpbHMuZGVlcENsb25lKShfdGhpcy5kYXRhKSwgY2hpbGRyZW5zOiBjaGlsZHJlblZhbHVlcyB9IH0NCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIHJldHVybiBzdWI7DQogICAgICAgIH0sDQoNCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7DQogICAgICAgICAgLy9zZW5kIHJlamVjdCByZXNwb25zZSBtZXNzYWdlDQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDAzLCBkZXNjOiByZWFzb24gfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcikgew0KICAgICAgICBjb25zb2xlLmxvZygnU1VCU0NSSVBUSU9OLUVWRU5UOiAnLCBldmVudCk7DQogICAgICAgIF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoaXMgLT4gX29uRm9yd2FyZDogZW1pdHRlZCBieSBhIHJlbW90ZSBEYXRhT2JqZWN0T2JzZXJ2ZXIgLT4gdW5zdWJzY3JpYmUNCg0KICB9LCB7DQogICAga2V5OiAnX29uVW5TdWJzY3JpYmUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25VblN1YnNjcmliZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgaHlwZXJ0eVVybCA9IG1zZy5ib2R5LmZyb207DQoNCiAgICAgIHZhciBzdWIgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXTsNCiAgICAgIGRlbGV0ZSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXTsNCg0KICAgICAgdmFyIGV2ZW50ID0gew0KICAgICAgICB0eXBlOiBtc2cuYm9keS50eXBlLA0KICAgICAgICB1cmw6IGh5cGVydHlVcmwsDQogICAgICAgIG9iamVjdDogc3ViDQogICAgICB9Ow0KDQogICAgICBpZiAoX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcikgew0KICAgICAgICBjb25zb2xlLmxvZygnVU4tU1VCU0NSSVBUSU9OLUVWRU5UOiAnLCBldmVudCk7DQogICAgICAgIF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIFJlcG9ydGVyVVJMIGFkZHJlc3M6IGVtaXRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IF9vblJlbW90ZUNyZWF0ZSAtPiBldmVudC5hY2sNCg0KICB9LCB7DQogICAga2V5OiAnX29uUmVzcG9uc2UnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZXNwb25zZShtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLnR5cGUsDQogICAgICAgIHVybDogbXNnLmZyb20sDQogICAgICAgIGNvZGU6IG1zZy5ib2R5LmNvZGUNCiAgICAgIH07DQoNCiAgICAgIGlmIChfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ1JFU1BPTlNFLUVWRU5UOiAnLCBldmVudCk7DQogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7DQogICAgICB9DQogICAgfQ0KDQogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gUmVwb3J0ZXJVUkwgYWRkcmVzczogZW1pdGVkIGJ5IGEgcmVtb3RlIFN5bmNoZXIgLT4gcmVhZA0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25SZWFkJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVhZChtc2cpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLnR5cGUsDQogICAgICAgIHVybDogbXNnLmZyb20sDQoNCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQoKSB7DQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCB2YWx1ZTogKDAsIF91dGlscy5kZWVwQ2xvbmUpKF90aGlzLmRhdGEpIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCg0KICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHsNCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLA0KICAgICAgICAgICAgYm9keTogeyBjb2RlOiA0MDEsIGRlc2M6IHJlYXNvbiB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH07DQoNCiAgICAgIGlmIChfdGhpcy5fb25SZWFkSGFuZGxlcikgew0KICAgICAgICBjb25zb2xlLmxvZygnUkVBRC1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25SZWFkSGFuZGxlcihldmVudCk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnc3Vic2NyaXB0aW9ucycsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uczsNCiAgICB9DQogIH1dKTsNCiAgcmV0dXJuIERhdGFPYmplY3RSZXBvcnRlcjsNCn0oX0RhdGFPYmplY3QzLmRlZmF1bHQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovKTsNCg0KZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdFJlcG9ydGVyOw0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107DQoNCi8qKiovIH0pLA0KLyogMTIwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7DQoNCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsNCg0KdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7DQoNCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7DQoNCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7DQoNCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsNCg0KdmFyIF9Qcm94eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTsNCg0KdmFyIF9Qcm94eU9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm94eU9iamVjdCk7DQoNCnZhciBfRGF0YU9iamVjdENoaWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOw0KDQp2YXIgX0RhdGFPYmplY3RDaGlsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Q2hpbGQpOw0KDQp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiAqIE1haW4gZXh0ZW5zaW9uIGNsYXNzIGZvciBvYnNlcnZlcnMgYW5kIHJlcG9ydGVycywgd2l0aCBjb21tb24gcHJvcGVydGllcyBhbmQgbWV0aG9kcy4NCiAqIENoaWxkcmVuIG1hbmFnZW1lbnQgaXMgY29tbW9uIGZvciBvYnNlcnZlcnMgYW5kIHJlcG9ydGVycy4NCiAqLw0KdmFyIERhdGFPYmplY3QgPSBmdW5jdGlvbiAoKSB7DQogIC8qIHByaXZhdGUNCiAgX3ZlcnNpb246IG51bWJlcg0KICAgX293bmVyOiBIeXBlcnR5VVJMDQogIF91cmw6IE9iamVjdFVSTA0KICBfc2NoZW1hOiBTY2hlbWENCiAgX2J1czogTWluaUJ1cw0KICBfc3RhdHVzOiBvbiB8IHBhdXNlZA0KICBfc3luY09iajogU3luY0RhdGENCiAgIF9jaGlsZHJlbjogeyBpZDogRGF0YU9iamVjdENoaWxkIH0NCiAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdDQogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9vbkFkZENoaWxkSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkDQogICovDQoNCiAgLyoqDQogICAqIEBpZ25vcmUNCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIgY3JlYXRlIG9yIHN1YnNjcmliZSBtZXRob2Qncw0KICAgKi8NCiAgZnVuY3Rpb24gRGF0YU9iamVjdChzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3QpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgIF90aGlzLl9zeW5jaGVyID0gc3luY2hlcjsNCiAgICBfdGhpcy5fdXJsID0gdXJsOw0KICAgIF90aGlzLl9zY2hlbWEgPSBzY2hlbWE7DQogICAgX3RoaXMuX3N0YXR1cyA9IGluaXRpYWxTdGF0dXM7DQogICAgX3RoaXMuX3N5bmNPYmogPSBuZXcgX1Byb3h5T2JqZWN0Mi5kZWZhdWx0KGluaXRpYWxEYXRhKTsNCiAgICBfdGhpcy5fY2hpbGRyZW5zID0gY2hpbGRyZW5zOw0KDQogICAgX3RoaXMuX3ZlcnNpb24gPSAwOw0KICAgIF90aGlzLl9jaGlsZElkID0gMDsNCiAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzID0ge307DQogICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzID0gW107DQoNCiAgICBfdGhpcy5fb3duZXIgPSBzeW5jaGVyLl9vd25lcjsNCiAgICBfdGhpcy5fYnVzID0gc3luY2hlci5fYnVzOw0KICB9DQoNCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdCwgW3sNCiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7DQogICAgICB2YXIgX3RoaXMyID0gdGhpczsNCg0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgdmFyIGNoaWxkQmFzZVVSTCA9IF90aGlzLl91cmwgKyAnL2NoaWxkcmVuLyc7DQogICAgICBjb25zb2xlLmxvZygnW0RhdGEgT2JqZWN0IC0gQWxsb2NhdGVMaXN0ZW5lcnNdIC0gJywgX3RoaXMuX2NoaWxkcmVucyk7DQogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVucykgew0KICAgICAgICBfdGhpcy5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7DQogICAgICAgICAgdmFyIGNoaWxkVVJMID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7DQogICAgICAgICAgdmFyIGxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgZnVuY3Rpb24gKG1zZykgew0KICAgICAgICAgICAgLy9pZ25vcmUgbXNnIHNlbnQgYnkgaGltc2VsZg0KICAgICAgICAgICAgaWYgKG1zZy5mcm9tICE9PSBfdGhpczIuX293bmVyKSB7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogJywgbXNnKTsNCiAgICAgICAgICAgICAgc3dpdGNoIChtc2cudHlwZSkgew0KICAgICAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZSc6DQogICAgICAgICAgICAgICAgICBfdGhpcy5fb25DaGlsZENyZWF0ZShtc2cpO2JyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6DQogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO2JyZWFrOw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICBfdGhpcy5fY2hhbmdlQ2hpbGRyZW4obXNnKTticmVhazsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KDQogICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7DQogICAgICAgIGxpc3RlbmVyLnJlbW92ZSgpOw0KICAgICAgfSk7DQoNCiAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoX3RoaXMuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7DQogICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNba2V5XS5fcmVsZWFzZUxpc3RlbmVycygpOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogT2JqZWN0IFVSTCBvZiByZXBvcnRlciBvciBvYnNlcnZlcg0KICAgICAqIEB0eXBlIHtPYmplY3RVUkx9DQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ3BhdXNlJywNCg0KDQogICAgLyoqDQogICAgICogQGlnbm9yZQ0KICAgICAqLw0KICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHsNCiAgICAgIC8vVE9ETzogdGhpcyBmZWF0dXJlIG5lZWRzIG1vcmUgYW5hbGlzZQ0KICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQGlnbm9yZQ0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdyZXN1bWUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWUoKSB7DQogICAgICAvL1RPRE86IHRoaXMgZmVhdHVyZSBuZWVkcyBtb3JlIGFuYWxpc2UNCiAgICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEBpZ25vcmUNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnc3RvcCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7DQogICAgICAvL1RPRE86IHNob3VsZCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBhbmQgc2VuZCBtZXNzYWdlIHVuc3Vic2NyaWJlPw0KICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogQ3JlYXRlIGFuZCBhZGQgYSBEYXRhT2JqZWN0Q2hpbGQgdG8gYSBjaGlsZHJlbiBjb2xsZWN0aW9uLg0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjaGlsZHJlbiAtIENoaWxkcmVuIG5hbWUgd2hlcmUgdGhlIGNoaWxkIGlzIGFkZGVkLg0KICAgICAqIEBwYXJhbSB7SlNPTn0gaW5pdGlhbERhdGEgLSBJbml0aWFsIGRhdGEgb2YgdGhlIGNoaWxkDQogICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0Q2hpbGQ+fSAtIFJldHVybiBQcm9taXNlIHRvIGEgbmV3IERhdGFPYmplY3RDaGlsZC4NCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnYWRkQ2hpbGQnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDaGlsZChjaGlsZHJlbiwgaW5pdGlhbERhdGEpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vY3JlYXRlIG5ldyBjaGlsZCB1bmlxdWUgSUQsIGJhc2VkIG9uIGh5cGVydHlVUkwNCiAgICAgIF90aGlzLl9jaGlsZElkKys7DQogICAgICB2YXIgbXNnQ2hpbGRJZCA9IF90aGlzLl9vd25lciArICcjJyArIF90aGlzLl9jaGlsZElkOw0KICAgICAgdmFyIG1zZ0NoaWxkUGF0aCA9IF90aGlzLl91cmwgKyAnL2NoaWxkcmVuLycgKyBjaGlsZHJlbjsNCg0KICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byBhIHJlc291cmNlIGNoaWxkIGFkZHJlc3M6IE1lc3NhZ2VCdXMNCiAgICAgIHZhciByZXF1ZXN0TXNnID0gew0KICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogbXNnQ2hpbGRQYXRoLA0KICAgICAgICBib2R5OiB7IHJlc291cmNlOiBtc2dDaGlsZElkLCB2YWx1ZTogaW5pdGlhbERhdGEgfQ0KICAgICAgfTsNCg0KICAgICAgLy9yZXR1cm5zIHByb21pc2UsIGluIHRoZSBmdXR1cmUsIHRoZSBBUEkgbWF5IGNoYW5nZSB0byBhc3luY2hyb25vdXMgY2FsbA0KICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSkgew0KICAgICAgICB2YXIgbXNnSWQgPSBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2cpOw0KDQogICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtcmVwb3J0ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIHJlcXVlc3RNc2cpOw0KICAgICAgICB2YXIgbmV3Q2hpbGQgPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgbXNnQ2hpbGRJZCwgaW5pdGlhbERhdGEsIF90aGlzLl9vd25lciwgbXNnSWQpOw0KICAgICAgICBuZXdDaGlsZC5vbkNoYW5nZShmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgICBfdGhpcy5fb25DaGFuZ2UoZXZlbnQsIHsgcGF0aDogbXNnQ2hpbGRQYXRoLCBjaGlsZElkOiBtc2dDaGlsZElkIH0pOw0KICAgICAgICB9KTsNCg0KICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW21zZ0NoaWxkSWRdID0gbmV3Q2hpbGQ7DQoNCiAgICAgICAgcmVzb2x2ZShuZXdDaGlsZCk7DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyBjcmVhdGUgYW5kIGRlbGV0ZSBvZiBjaGlsZHJlbnMuDQogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjaw0KICAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdvbkFkZENoaWxkJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb25BZGRDaGlsZChjYWxsYmFjaykgew0KICAgICAgdGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXIgPSBjYWxsYmFjazsNCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0IC0+IGFkZENoaWxkDQoNCiAgfSwgew0KICAgIGtleTogJ19vbkNoaWxkQ3JlYXRlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2hpbGRDcmVhdGUobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIG1zZ0NoaWxkSWQgPSBtc2cuYm9keS5yZXNvdXJjZTsNCg0KICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZS1vYnNlcnZlci1jaGlsZCggJyArIF90aGlzLl9vd25lciArICcgKTogJywgbXNnKTsNCiAgICAgIHZhciBuZXdDaGlsZCA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBtc2dDaGlsZElkLCBtc2cuYm9keS52YWx1ZSk7DQogICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW21zZ0NoaWxkSWRdID0gbmV3Q2hpbGQ7DQoNCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAvL0ZMT1ctT1VUOiB3aWxsIGZsb3cgdG8gRGF0YU9iamVjdENoaWxkIC0+IF9vblJlc3BvbnNlDQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLA0KICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCBzb3VyY2U6IF90aGlzLl9vd25lciB9DQogICAgICAgIH0pOw0KICAgICAgfSk7DQoNCiAgICAgIHZhciBldmVudCA9IHsNCiAgICAgICAgdHlwZTogbXNnLnR5cGUsDQogICAgICAgIGZyb206IG1zZy5mcm9tLA0KICAgICAgICB1cmw6IG1zZy50bywNCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLA0KICAgICAgICBjaGlsZElkOiBtc2dDaGlsZElkLA0KICAgICAgICBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHkNCiAgICAgIH07DQoNCiAgICAgIGlmIChfdGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5sb2coJ0FERC1DSElMRFJFTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICBfdGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vc2VuZCBkZWx0YSBtZXNzYWdlcyB0byBzdWJzY3JpcHRpb25zDQoNCiAgfSwgew0KICAgIGtleTogJ19vbkNoYW5nZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoYW5nZShldmVudCwgY2hpbGRJbmZvKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBfdGhpcy5fdmVyc2lvbisrOw0KDQogICAgICBpZiAoX3RoaXMuX3N0YXR1cyA9PT0gJ29uJykgew0KICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIGEgcmVzb3VyY2UgY2hhbmdlcyBhZGRyZXNzOiBNZXNzYWdlQnVzDQogICAgICAgIHZhciBjaGFuZ2VNc2cgPSB7DQogICAgICAgICAgdHlwZTogJ3VwZGF0ZScsIGZyb206IF90aGlzLl91cmwsIHRvOiBfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJywNCiAgICAgICAgICBib2R5OiB7IHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCBzb3VyY2U6IF90aGlzLl9vd25lciwgYXR0cmlidXRlOiBldmVudC5maWVsZCB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0IC0gX29uQ2hhbmdlXSAtICcsIGV2ZW50LCBjaGlsZEluZm8sIGNoYW5nZU1zZyk7DQoNCiAgICAgICAgaWYgKGV2ZW50Lm9UeXBlID09PSBfUHJveHlPYmplY3QuT2JqZWN0VHlwZS5PQkpFQ1QpIHsNCiAgICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlJFTU9WRSkgew0KICAgICAgICAgICAgY2hhbmdlTXNnLmJvZHkudmFsdWUgPSBldmVudC5kYXRhOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjaGFuZ2VNc2cuYm9keS5hdHRyaWJ1dGVUeXBlID0gZXZlbnQub1R5cGU7DQogICAgICAgICAgY2hhbmdlTXNnLmJvZHkudmFsdWUgPSBldmVudC5kYXRhOw0KICAgICAgICAgIGlmIChldmVudC5jVHlwZSAhPT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuVVBEQVRFKSB7DQogICAgICAgICAgICBjaGFuZ2VNc2cuYm9keS5vcGVyYXRpb24gPSBldmVudC5jVHlwZTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvL2NoaWxkSW5mbyBtdXN0IGhhdmUgKHBhdGgsIGNoaWxkSWQpDQogICAgICAgIGlmIChjaGlsZEluZm8pIHsNCiAgICAgICAgICBjaGFuZ2VNc2cudG8gPSBjaGlsZEluZm8ucGF0aDsNCiAgICAgICAgICBjaGFuZ2VNc2cuYm9keS5yZXNvdXJjZSA9IGNoaWxkSW5mby5jaGlsZElkOw0KICAgICAgICB9DQoNCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShjaGFuZ2VNc2cpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogZGVsdGEgbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RSZXBvcnRlciBvciBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhDQoNCiAgfSwgew0KICAgIGtleTogJ19jaGFuZ2VPYmplY3QnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfY2hhbmdlT2JqZWN0KHN5bmNPYmosIG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9UT0RPOiB1cGRhdGUgdmVyc2lvbiA/DQogICAgICAvL2hvdyB0byBoYW5kbGUgYW4gaW5jb3JyZWN0IHZlcnNpb24gPyBFeGFtcGxlOiByZWNlaXZlIGEgdmVyc2lvbiAzIHdoZW4gdGhlIG9ic2VydmVyIGlzIGluIHZlcnNpb24gMSwgd2hlcmUgaXMgdGhlIHZlcnNpb24gMiA/DQogICAgICAvL3dpbGwgd2UgbmVlZCB0byBjb25maXJtIHRoZSByZWNlcHRpb24gPw0KICAgICAgaWYgKF90aGlzLl92ZXJzaW9uICsgMSA9PT0gbXNnLmJvZHkudmVyc2lvbikgew0KICAgICAgICBfdGhpcy5fdmVyc2lvbisrOw0KICAgICAgICB2YXIgcGF0aCA9IG1zZy5ib2R5LmF0dHJpYnV0ZTsNCiAgICAgICAgdmFyIHZhbHVlID0gKDAsIF91dGlscy5kZWVwQ2xvbmUpKG1zZy5ib2R5LnZhbHVlKTsNCiAgICAgICAgdmFyIGZpbmRSZXN1bHQgPSBzeW5jT2JqLmZpbmRCZWZvcmUocGF0aCk7DQoNCiAgICAgICAgaWYgKG1zZy5ib2R5LmF0dHJpYnV0ZVR5cGUgPT09IF9Qcm94eU9iamVjdC5PYmplY3RUeXBlLkFSUkFZKSB7DQogICAgICAgICAgaWYgKG1zZy5ib2R5Lm9wZXJhdGlvbiA9PT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuQUREKSB7DQogICAgICAgICAgICB2YXIgYXJyID0gZmluZFJlc3VsdC5vYmo7DQogICAgICAgICAgICB2YXIgaW5kZXggPSBmaW5kUmVzdWx0Lmxhc3Q7DQogICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGFyciwgW2luZGV4LCAwXS5jb25jYXQodmFsdWUpKTsNCiAgICAgICAgICB9IGVsc2UgaWYgKG1zZy5ib2R5Lm9wZXJhdGlvbiA9PT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuUkVNT1ZFKSB7DQogICAgICAgICAgICB2YXIgX2FyciA9IGZpbmRSZXN1bHQub2JqOw0KICAgICAgICAgICAgdmFyIF9pbmRleCA9IGZpbmRSZXN1bHQubGFzdDsNCiAgICAgICAgICAgIF9hcnIuc3BsaWNlKF9pbmRleCwgdmFsdWUpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBmaW5kUmVzdWx0Lm9ialtmaW5kUmVzdWx0Lmxhc3RdID0gdmFsdWU7IC8vIFVQREFURQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAobXNnLmJvZHkudmFsdWUpIHsNCiAgICAgICAgICAgIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF0gPSB2YWx1ZTsgLy8gVVBEQVRFIG9yIEFERA0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBkZWxldGUgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XTsgLy8gUkVNT1ZFDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICAvL1RPRE86IGhvdyB0byBoYW5kbGUgdW5zeW5jaHJvbml6ZWQgdmVyc2lvbnM/DQogICAgICAgIGNvbnNvbGUubG9nKCdVTlNZTkNIUk9OSVpFRCBWRVJTSU9OOiAoZGF0YSA9PiAnICsgX3RoaXMuX3ZlcnNpb24gKyAnLCBtc2cgPT4gJyArIG1zZy5ib2R5LnZlcnNpb24gKyAnKScpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RDaGlsZCB3aGVuIGNoYW5naW5nIGRhdGENCg0KICB9LCB7DQogICAga2V5OiAnX2NoYW5nZUNoaWxkcmVuJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoYW5nZUNoaWxkcmVuKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIGNvbnNvbGUubG9nKCdDaGFuZ2UgY2hpbGRyZW46ICcsIF90aGlzLl9vd25lciwgbXNnKTsNCg0KICAgICAgdmFyIGNoaWxkSWQgPSBtc2cuYm9keS5yZXNvdXJjZTsNCiAgICAgIHZhciBjaGlsZHJlbiA9IF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF07DQoNCiAgICAgIGlmIChjaGlsZHJlbikgew0KICAgICAgICBfdGhpcy5fY2hhbmdlT2JqZWN0KGNoaWxkcmVuLl9zeW5jT2JqLCBtc2cpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29uc29sZS5sb2coJ05vIGNoaWxkcmVuIGZvdW5kIGZvcjogJywgY2hpbGRJZCk7DQogICAgICB9DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAndXJsJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl91cmw7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogT2JqZWN0IHNjaGVtYSBVUkwgKHRoaXMgZmllbGQgaXMgbm90IHlldCBzdGFibGUsIGFuZCBpcyBzdWJzamVjdCB0byBjaGFuZ2UpDQogICAgICogQHR5cGUge1NjaGVtYVVSTH0NCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnc2NoZW1hJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9zY2hlbWE7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU3RhdHVzIG9mIHRoZSByZXBvcnRlciBvciBvYnNlcnZlciBjb25uZWN0aW9uICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQ0KICAgICAqIEB0eXBlIHtTdGF0dXN9IC0gRW51bSBvZjogb24gfCBwYXVzZWQNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnc3RhdHVzJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogRGF0YSBzdHJ1Y3R1cmUgdG8gYmUgc3luY2hyb25pemVkLg0KICAgICAqIEB0eXBlIHtKU09OfSAtIEpTT04gc3RydWN0dXJlIHRoYXQgc2hvdWxkIGZvbGxvdyB0aGUgZGVmaW5lZCBzY2hlbWEsIGlmIGFueS4NCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnZGF0YScsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fc3luY09iai5kYXRhOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIEFsbCBjcmVhdGVkIGNoaWxkcmVuJ3Mgc2luY2UgdGhlIHN1YnNjcmlwdGlvbiwgZG9lc24ndCBjb250YWluIGFsbCBjaGlsZHJlbidzIHNpbmNlIHJlcG9ydGVyIGNyZWF0aW9uLg0KICAgICAqIEB0eXBlIHtPYmplY3Q8Q2hpbGRJZCwgRGF0YU9iamVjdENoaWxkPn0NCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnY2hpbGRyZW5zJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHM7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEYXRhT2JqZWN0Ow0KfSgpOyAvKioNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQogICAgICoNCiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogICAgICoNCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICAgICAqDQogICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICAgICAqKi8NCg0KZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdDsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDEyMSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCnZhciBfUHJveHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7DQoNCnZhciBfUHJveHlPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJveHlPYmplY3QpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIHRoZSBEYXRhT2JqZWN0IGFkZENoaWxkcmVuIGNhbGwgb3IgZnJvbSBvbkFkZENoaWxkcmVuIGlmIHJlbW90ZWx5IGNyZWF0ZWQuDQogKiBDaGlsZHJlbiBvYmplY3Qgc3luY2hyb25pemF0aW9uIGlzIGEgYSBmYXN0IGZvcndhcmQgbWVjaGFuaXNtLCBubyBuZWVkIGZvciBkaXJlY3Qgc3Vic2NyaXB0aW9ucywgaXQgdXNlcyB0aGUgYWxyZWFkeSBhdXRob3JpemVkIHN1YnNjcmlwdGlvbiBmcm9tIHRoZSBwYXJlbnQgRGF0YU9iamVjdC4NCiAqLw0KdmFyIERhdGFPYmplY3RDaGlsZCAvKiBpbXBsZW1lbnRzIFN5bmNTdGF0dXMgKi8gPSBmdW5jdGlvbiAoKSB7DQogIC8qIHByaXZhdGUNCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0NCiAgX29uUmVzcG9uc2VIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgKi8NCg0KICAvKioNCiAgICogQGlnbm9yZQ0KICAgKiBTaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkgYnkgSHlwZXJ0aWVzLiBJdCdzIGNhbGxlZCBieSB0aGUgRGF0YU9iamVjdC5hZGRDaGlsZHJlbg0KICAgKi8NCiAgZnVuY3Rpb24gRGF0YU9iamVjdENoaWxkKHBhcmVudCwgY2hpbGRJZCwgaW5pdGlhbERhdGEsIG93bmVyLCBtc2dJZCkgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RDaGlsZCk7DQoNCiAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgX3RoaXMuX3BhcmVudCA9IHBhcmVudDsNCiAgICBfdGhpcy5fY2hpbGRJZCA9IGNoaWxkSWQ7DQogICAgX3RoaXMuX293bmVyID0gb3duZXI7DQogICAgX3RoaXMuX21zZ0lkID0gbXNnSWQ7DQoNCiAgICBfdGhpcy5fc3luY09iaiA9IG5ldyBfUHJveHlPYmplY3QyLmRlZmF1bHQoaW5pdGlhbERhdGEpOw0KDQogICAgX3RoaXMuX2J1cyA9IHBhcmVudC5fYnVzOw0KICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOw0KICB9DQoNCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdENoaWxkLCBbew0KICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIC8vdGhpcyBpcyBvbmx5IG5lZWRlZCBmb3IgY2hpbGRyZW4gcmVwb3J0ZXJzDQogICAgICBpZiAoX3RoaXMuX293bmVyKSB7DQogICAgICAgIF90aGlzLl9saXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX293bmVyLCBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgICAgaWYgKG1zZy50eXBlID09PSAncmVzcG9uc2UnICYmIG1zZy5pZCA9PT0gX3RoaXMuX21zZ0lkKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6JywgbXNnKTsNCiAgICAgICAgICAgIF90aGlzLl9vblJlc3BvbnNlKG1zZyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgaWYgKF90aGlzLl9saXN0ZW5lcikgew0KICAgICAgICBfdGhpcy5fbGlzdGVuZXIucmVtb3ZlKCk7DQogICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RlbGV0ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICBkZWxldGUgX3RoaXMuX3BhcmVudC5fY2hpbGRyZW5bX3RoaXMuX2NoaWxkSWRdOw0KDQogICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOw0KDQogICAgICAvL1RPRE86IHNlbmQgZGVsZXRlIG1lc3NhZ2UgPw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIENoaWxkcmVuIElEIGdlbmVyYXRlZCBvbiBhZGRDaGlsZHJlbi4gVW5pcXVlIGlkZW50aWZpZXINCiAgICAgKiBAdHlwZSB7VVJMfSAtIFVSTCBvZiB0aGUgZm9ybWF0IDxIeXBlcnR5VVJMPiM8bnVtZXJpYy1zZXF1ZW5jZT4NCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnb25DaGFuZ2UnLA0KDQoNCiAgICAvKioNCiAgICAgKiBSZWdpc3RlciB0aGUgY2hhbmdlIGxpc3RlbmVycyBzZW50IGJ5IHRoZSByZXBvcnRlciBjaGlsZA0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8NCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsNCiAgICAgICAgY2FsbGJhY2soZXZlbnQpOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgcmVzcG9uc2Ugbm90aWZpY2F0aW9ucyBvZiB0aGUgY3JlYXRlcw0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnb25SZXNwb25zZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzcG9uc2UoY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29uUmVzcG9uc2VIYW5kbGVyID0gY2FsbGJhY2s7DQogICAgfQ0KDQogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBfb25DaGlsZENyZWF0ZQ0KDQogIH0sIHsNCiAgICBrZXk6ICdfb25SZXNwb25zZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlc3BvbnNlKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgdmFyIGV2ZW50ID0gew0KICAgICAgICB0eXBlOiBtc2cudHlwZSwNCiAgICAgICAgdXJsOiBtc2cuYm9keS5zb3VyY2UsDQogICAgICAgIGNvZGU6IG1zZy5ib2R5LmNvZGUNCiAgICAgIH07DQoNCiAgICAgIGlmIChfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIpIHsNCiAgICAgICAgX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKGV2ZW50KTsNCiAgICAgIH0NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdjaGlsZElkJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9jaGlsZElkOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIERhdGEgU3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4NCiAgICAgKiBAdHlwZSB7SlNPTn0gLSBKU09OIHN0cnVjdHVyZSB0aGF0IHNob3VsZCBmb2xsb3cgdGhlIGRlZmluZWQgc2NoZW1hLCBpZiBhbnkuDQogICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RhdGEnLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YTsNCiAgICB9DQogIH1dKTsNCiAgcmV0dXJuIERhdGFPYmplY3RDaGlsZDsNCn0oKTsgLyoqDQogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KICAgICAqDQogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICAgICAqDQogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAgICAgKg0KICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAgICAgKiovDQoNCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RDaGlsZDsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDEyMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQpleHBvcnRzLk9iamVjdFR5cGUgPSBleHBvcnRzLkNoYW5nZVR5cGUgPSB1bmRlZmluZWQ7DQoNCnZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7DQoNCnZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTUzKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQogKiBAYWNjZXNzIHByaXZhdGUNCiAqIE1haW4gY2xhc3MgdGhhdCBtYWludGFpbnMgYSBKU09OIG9iamVjdCwgYW5kIG9ic2VydmVzIGNoYW5nZXMgaW4gdGhpcyBvYmplY3QsIHJlY3Vyc2l2ZWx5Lg0KICogSW50ZXJuYWwgb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBhbHNvIG9ic2VydmVkLg0KICovDQp2YXIgU3luY09iamVjdCA9IGZ1bmN0aW9uICgpIHsNCiAgZnVuY3Rpb24gU3luY09iamVjdChpbml0aWFsRGF0YSkgew0KICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFN5bmNPYmplY3QpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgIF90aGlzLl9vYnNlcnZlcnMgPSBbXTsNCiAgICBfdGhpcy5fZmlsdGVycyA9IHt9Ow0KDQogICAgdGhpcy5fZGF0YSA9IGluaXRpYWxEYXRhIHx8IHt9Ow0KDQogICAgdGhpcy5faW50ZXJuYWxPYnNlcnZlKHRoaXMuX2RhdGEpOw0KICB9DQoNCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoU3luY09iamVjdCwgW3sNCiAgICBrZXk6ICdvYnNlcnZlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb2JzZXJ2ZShjYWxsYmFjaykgew0KICAgICAgdGhpcy5fb2JzZXJ2ZXJzLnB1c2goY2FsbGJhY2spOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ2ZpbmQnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kKHBhdGgpIHsNCiAgICAgIHZhciBsaXN0ID0gcGF0aC5zcGxpdCgnLicpOw0KDQogICAgICByZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdChsaXN0KTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdmaW5kQmVmb3JlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZEJlZm9yZShwYXRoKSB7DQogICAgICB2YXIgcmVzdWx0ID0ge307DQogICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsNCiAgICAgIHJlc3VsdC5sYXN0ID0gbGlzdC5wb3AoKTsNCiAgICAgIHJlc3VsdC5vYmogPSB0aGlzLl9maW5kV2l0aFNwbGl0KGxpc3QpOw0KDQogICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19maW5kV2l0aFNwbGl0JywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRXaXRoU3BsaXQobGlzdCkgew0KICAgICAgdmFyIG9iaiA9IHRoaXMuX2RhdGE7DQogICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7DQogICAgICAgIG9iaiA9IG9ialt2YWx1ZV07DQogICAgICB9KTsNCg0KICAgICAgcmV0dXJuIG9iajsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfaXNPYnNlcnZhYmxlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2lzT2JzZXJ2YWJsZShvYmopIHsNCiAgICAgIGlmIChvYmouY29uc3RydWN0b3IgPT09IE9iamVjdCB8fCBvYmouY29uc3RydWN0b3IgPT09IEFycmF5KSB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX2ludGVybmFsT2JzZXJ2ZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9pbnRlcm5hbE9ic2VydmUob2JqZWN0KSB7DQogICAgICB2YXIgX3RoaXMyID0gdGhpczsNCg0KICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGNoYW5nZXNldCkgew0KDQogICAgICAgIGNoYW5nZXNldC5mb3JFYWNoKGZ1bmN0aW9uIChjaGFuZ2UpIHsNCiAgICAgICAgICBpZiAoY2hhbmdlLm5ld1ZhbHVlICYmIGNoYW5nZS5uZXdWYWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkgew0KICAgICAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSBpbnN0YW5jZW9mIE9iamVjdCkgew0KICAgICAgICAgICAgICB2YXIgbyA9IE9iamVjdC5kZWVwT2JzZXJ2ZShjaGFuZ2UubmV3VmFsdWUsIGhhbmRsZXIpOw0KICAgICAgICAgICAgICBvYmplY3RbY2hhbmdlLmtleXBhdGhdID0gbzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGNoYW5nZS5uZXdWYWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7DQogICAgICAgICAgICAgIHZhciBfbyA9IEFycmF5Lm9ic2VydmUoY2hhbmdlLm5ld1ZhbHVlLCBoYW5kbGVyKTsNCiAgICAgICAgICAgICAgb2JqZWN0W2NoYW5nZS5rZXlwYXRoXSA9IF9vOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgY2hhbmdlc2V0LmV2ZXJ5KGZ1bmN0aW9uIChjaGFuZ2UpIHsNCiAgICAgICAgICBfdGhpczIuX29uQ2hhbmdlcyhjaGFuZ2UpOw0KICAgICAgICB9KTsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuX2RhdGEgPSBPYmplY3QuZGVlcE9ic2VydmUob2JqZWN0LCBoYW5kbGVyKTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdfZmlyZUV2ZW50JywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpcmVFdmVudChldmVudCkgew0KICAgICAgdGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7DQogICAgICAgIGNhbGxiYWNrKGV2ZW50KTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19vbkNoYW5nZXMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGFuZ2VzKGNoYW5nZSkgew0KDQogICAgICB2YXIgb2JqID0gY2hhbmdlLm9iamVjdDsNCiAgICAgIHZhciBvYmpUeXBlID0gdm9pZCAwOw0KDQogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHsNCiAgICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuT0JKRUNUOw0KICAgICAgfQ0KDQogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgew0KICAgICAgICBvYmpUeXBlID0gT2JqZWN0VHlwZS5BUlJBWTsNCiAgICAgIH0NCg0KICAgICAgdmFyIGZpZWxkU3RyaW5nID0gY2hhbmdlLmtleXBhdGg7DQoNCiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaWVsZDonLCBmaWVsZFN0cmluZyk7DQogICAgICAvLyBjb25zb2xlLmxvZygndHlwZTonLCBjaGFuZ2UudHlwZSk7DQoNCiAgICAgIC8vbGV0IG9sZFZhbHVlID0gY2hhbmdlLm9sZFZhbHVlOw0KICAgICAgdmFyIG5ld1ZhbHVlID0gb2JqW2NoYW5nZS5uYW1lXTsNCg0KICAgICAgY29uc29sZS5pbmZvKGNoYW5nZS50eXBlICsgJyB8IEZpZWxkOiAnICsgZmllbGRTdHJpbmcgKyAnIHwgTmV3IFZhbHVlOicsICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShuZXdWYWx1ZSkpOw0KDQogICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICd1cGRhdGUnKSB7DQogICAgICAgIHRoaXMuX2ZpcmVFdmVudCh7DQogICAgICAgICAgY1R5cGU6IENoYW5nZVR5cGUuVVBEQVRFLA0KICAgICAgICAgIG9UeXBlOiBvYmpUeXBlLA0KICAgICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZywNCiAgICAgICAgICBkYXRhOiBuZXdWYWx1ZQ0KICAgICAgICB9KTsNCiAgICAgIH0NCg0KICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAnYWRkJykgew0KICAgICAgICB0aGlzLl9maXJlRXZlbnQoew0KICAgICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLkFERCwNCiAgICAgICAgICBvVHlwZTogb2JqVHlwZSwNCiAgICAgICAgICBmaWVsZDogZmllbGRTdHJpbmcsDQogICAgICAgICAgZGF0YTogbmV3VmFsdWUNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2RlbGV0ZScpIHsNCiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsNCiAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5SRU1PVkUsDQogICAgICAgICAgb1R5cGU6IG9ialR5cGUsDQogICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ2RhdGEnLA0KICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBTeW5jT2JqZWN0Ow0KfSgpOw0KDQp2YXIgQ2hhbmdlVHlwZSA9IGV4cG9ydHMuQ2hhbmdlVHlwZSA9IHsgVVBEQVRFOiAndXBkYXRlJywgQUREOiAnYWRkJywgUkVNT1ZFOiAncmVtb3ZlJyB9Ow0KdmFyIE9iamVjdFR5cGUgPSBleHBvcnRzLk9iamVjdFR5cGUgPSB7IE9CSkVDVDogJ29iamVjdCcsIEFSUkFZOiAnYXJyYXknIH07DQpleHBvcnRzLmRlZmF1bHQgPSBTeW5jT2JqZWN0Ow0KDQovKioqLyB9KSwNCi8qIDEyMyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsNCg0KdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOw0KDQp2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsNCg0KdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7DQoNCnZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldE93blByb3BlcnR5RGVzY3JpcHRvcik7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgew0KICBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7DQogIHZhciBkZXNjID0gKDAsIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IyLmRlZmF1bHQpKG9iamVjdCwgcHJvcGVydHkpOw0KDQogIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsNCiAgICB2YXIgcGFyZW50ID0gKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkob2JqZWN0KTsNCg0KICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHsNCiAgICAgIHJldHVybiB1bmRlZmluZWQ7DQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOw0KICAgIH0NCiAgfSBlbHNlIGlmICgidmFsdWUiIGluIGRlc2MpIHsNCiAgICByZXR1cm4gZGVzYy52YWx1ZTsNCiAgfSBlbHNlIHsNCiAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7DQoNCiAgICBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsNCiAgICAgIHJldHVybiB1bmRlZmluZWQ7DQogICAgfQ0KDQogICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsNCiAgfQ0KfTsNCg0KLyoqKi8gfSksDQovKiAxMjQgKi8sDQovKiAxMjUgKi8sDQovKiAxMjYgKi8sDQovKiAxMjcgKi8sDQovKiAxMjggKi8sDQovKiAxMjkgKi8sDQovKiAxMzAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX3Byb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsNCg0KdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOw0KDQp2YXIgX2Fzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTsNCg0KdmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7DQoNCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7DQoNCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsNCg0KdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7DQoNCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RSZXBvcnRlcik7DQoNCnZhciBfRGF0YU9iamVjdE9ic2VydmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTgpOw0KDQp2YXIgX0RhdGFPYmplY3RPYnNlcnZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0T2JzZXJ2ZXIpOw0KDQp2YXIgX0RhdGFQcm92aXNpb25hbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTsNCg0KdmFyIF9EYXRhUHJvdmlzaW9uYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YVByb3Zpc2lvbmFsKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQoqIFRoZSBtYWluIGNsYXNzIGZvciB0aGUgc3luY2hlciBwYWNrYWdlLg0KKiBUaGUgU3luY2hlciBpcyBhIHNpbmdsZXRvbiBjbGFzcyBwZXIgSHlwZXJ0eS9VUkwgYW5kIGl0IGlzIHRoZSBvd25lciBvZiBhbGwgY3JlYXRlZCBEYXRhIFN5bmMgT2JqZWN0cyBhY2NvcmRpbmcgdG8gdGhlIFJlcG9ydGVyIC0gT2JzZXJ2ZXIgcGF0dGVybi4NCiogTWFpbiBmdW5jdGlvbmFsaXR5IGlzIHRvIGNyZWF0ZSByZXBvcnRlcnMgYW5kIHRvIHN1YnNjcmliZSB0byBleGlzdGluZyBvbmVzLg0KKi8NCnZhciBTeW5jaGVyID0gZnVuY3Rpb24gKCkgew0KICAvKiBwcml2YXRlDQogIF9vd25lcjogVVJMDQogIF9idXM6IE1pbmlCdXMNCiAgIF9zdWJVUkw6IFVSTA0KICAgX3JlcG9ydGVyczogPHVybDogRGF0YU9iamVjdFJlcG9ydGVyPg0KICBfb2JzZXJ2ZXJzOiA8dXJsOiBEYXRhT2JqZWN0T2JzZXJ2ZXI+DQogIF9wcm92aXNpb25hbHM6IDx1cmw6IERhdGFQcm92aXNpb25hbD4NCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0NCiAgX29uTm90aWZpY2F0aW9uSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkDQogIF9vblJlc3VtZTogKGV2ZW50KSA9PiB2b2lkDQogICovDQoNCiAgLyoqDQogICogQ29uc3RydWN0b3IgdGhhdCBzaG91bGQgYmUgdXNlZCBieSB0aGUgSHlwZXJ0eSBvd25lcg0KICAqIEBwYXJhbSB7SHlwZXJ0eVVSTH0gb3duZXIgLSBIeXBlcnR5IFVSTCBvd25lci4gQW4gVVJMIGFsbG9jYXRlZCBieSB0aGUgcnVudGltZSB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhlIEh5cGVydHkuDQogICogQHBhcmFtIHtNaW5pQnVzfSBidXMgLSBBbiBpbnN0YW5jZSBvZiB0aGUgTWluaUJ1cyBwcm92aWRlZCBpbiB0aGUgc2FuZGJveC4gV2hlbiBhbiBvYmplY3QgKFJlcG9ydGVyIG9yIE9ic2VydmVkKSBpcyBjcmVhdGVkLCB0aGUgU3luY2hlck1hbmFnZXIgd2lsbCBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgTWluaUJ1cyB0byByZWNlaXZlL3NlbmQgTWVzc2FnZXMgb2YgdGhhdCBvYmplY3QuDQogICogQHBhcmFtIHtKU09OfSBjb25maWcgLSBDb25maWd1cmF0aW9uIGRhdGEuIFRoZSBvbmx5IHJlcXVpcmVkIGZpZWxkIGZvciBub3cgaXMgdGhlIHJ1bnRpbWVVUkwuDQogICovDQogIGZ1bmN0aW9uIFN5bmNoZXIob3duZXIsIGJ1cywgY29uZmlnKSB7DQogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgU3luY2hlcik7DQoNCiAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgX3RoaXMuX293bmVyID0gb3duZXI7DQogICAgX3RoaXMuX2J1cyA9IGJ1czsNCg0KICAgIF90aGlzLl9zdWJVUkwgPSBjb25maWcucnVudGltZVVSTCArICcvc20nOw0KDQogICAgX3RoaXMuX3JlcG9ydGVycyA9IHt9Ow0KICAgIF90aGlzLl9vYnNlcnZlcnMgPSB7fTsNCiAgICBfdGhpcy5fcHJvdmlzaW9uYWxzID0ge307DQoNCiAgICBidXMuYWRkTGlzdGVuZXIob3duZXIsIGZ1bmN0aW9uIChtc2cpIHsNCiAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYNCiAgICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHsNCiAgICAgICAgY29uc29sZS5pbmZvKCdbU3luY2hlcl0gU3luY2hlci1SQ1Y6ICcsIG1zZyk7DQogICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsNCiAgICAgICAgICBjYXNlICdmb3J3YXJkJzoNCiAgICAgICAgICAgIF90aGlzLl9vbkZvcndhcmQobXNnKTticmVhazsNCiAgICAgICAgICBjYXNlICdjcmVhdGUnOg0KICAgICAgICAgICAgX3RoaXMuX29uUmVtb3RlQ3JlYXRlKG1zZyk7YnJlYWs7DQogICAgICAgICAgY2FzZSAnZGVsZXRlJzoNCiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZURlbGV0ZShtc2cpO2JyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSk7DQogIH0NCg0KICAvKioNCiAgKiBUaGUgb3duZXIgb2YgdGhlIFN5bmNoZXIgYW5kIGFsbCBjcmVhdGVkIHJlcG9ydGVycy4NCiAgKiBAdHlwZSB7SHlwZXJ0eVVSTH0NCiAgKi8NCg0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNoZXIsIFt7DQogICAga2V5OiAnY3JlYXRlJywNCg0KDQogICAgLyoqDQogICAgKiBSZXF1ZXN0IGEgRGF0YU9iamVjdFJlcG9ydGVyIGNyZWF0aW9uLiBUaGUgVVJMIHdpbGwgYmUgYmUgcmVxdWVzdGVkIGJ5IHRoZSBhbGxvY2F0aW9uIG1lY2hhbmlzbS4NCiAgICAqIEBwYXJhbSAge1NjaGVtYVVSTH0gc2NoZW1hIC0gSHlwZXJ0eSBDYXRhbG9ndWUgVVJMIGFkZHJlc3MgdGhhdCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgSlNPTi1TY2hlbWEgZGVzY3JpYmluZyB0aGUgRGF0YSBPYmplY3Qgc2NoZW1hDQogICAgKiBAcGFyYW0gIHtIeXBlcnR5VVJMW119IG9ic2VydmVycyAtIExpc3Qgb2YgaHlwZXJ0aWVzIHRoYXQgYXJlIHByZS1hdXRob3JpemVkIGZvciBzdWJzY3JpcHRpb24NCiAgICAqIEBwYXJhbSAge0pTT059IGluaXRpYWxEYXRhIC0gSW5pdGlhbCBkYXRhIG9mIHRoZSByZXBvcnRlcg0KICAgICogQHBhcmFtICB7c3RyaW5nfSBvYmplY3RVUkwgLSByZXVzYWJsZSBkYXRhT2JqZWN0IFVSTA0KICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0UmVwb3J0ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBSZXBvcnRlci4gVGhlIHJlcG9ydGVyIGNhbiBiZSBhY2NlcHRlZCBvciByZWplY3RlZCBieSB0aGUgUEVQDQogICAgKi8NCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKHNjaGVtYSwgb2JzZXJ2ZXJzLCBpbml0aWFsRGF0YSkgew0KICAgICAgdmFyIHN0b3JlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsNCiAgICAgIHZhciBwMnAgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlOw0KDQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGNyaXRlcmlhID0ge307DQoNCiAgICAgIGNyaXRlcmlhLnAycCA9IHAycDsNCiAgICAgIGNyaXRlcmlhLnN0b3JlID0gc3RvcmU7DQogICAgICBjcml0ZXJpYS5zY2hlbWEgPSBzY2hlbWE7DQogICAgICBjcml0ZXJpYS5vYnNlcnZlcnMgPSBvYnNlcnZlcnM7DQogICAgICBjcml0ZXJpYS5pbml0aWFsRGF0YSA9IGluaXRpYWxEYXRhOw0KDQogICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlIFJlcG9ydGVyIC0gY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsNCg0KICAgICAgKDAsIF9hc3NpZ24yLmRlZmF1bHQpKGNyaXRlcmlhLCB7IHJlc3VtZTogZmFsc2UgfSk7DQoNCiAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlKGNyaXRlcmlhKTsNCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdyZXN1bWVSZXBvcnRlcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVSZXBvcnRlcnMoY3JpdGVyaWEpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gcmVzdW1lIFJlcG9ydGVyIC0gY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsNCg0KICAgICAgKDAsIF9hc3NpZ24yLmRlZmF1bHQpKGNyaXRlcmlhLCB7IHJlc3VtZTogdHJ1ZSB9KTsNCg0KICAgICAgcmV0dXJuIF90aGlzLl9jcmVhdGUoY3JpdGVyaWEpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogUmVxdWVzdCBhIHN1YnNjcmlwdGlvbiB0byBhbiBleGlzdGVudCByZXBvcnRlciBvYmplY3QuDQogICAgKiBAcGFyYW0ge1NjaGVtYVVSTH0gc2NoZW1hIC0gSHlwZXJ0eSBDYXRhbG9ndWUgVVJMIGFkZHJlc3MgdGhhdCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgSlNPTi1TY2hlbWEgZGVzY3JpYmluZyB0aGUgRGF0YSBPYmplY3Qgc2NoZW1hDQogICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gQWRkcmVzcyBvZiB0aGUgZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0IHRvIGJlIG9ic2VydmVkDQogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RPYnNlcnZlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IG9ic2VydmVyLiBJdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVwb3J0ZXIuDQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnc3Vic2NyaWJlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlKHNjaGVtYSwgb2JqVVJMKSB7DQogICAgICB2YXIgc3RvcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOw0KICAgICAgdmFyIHAycCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7DQoNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgY3JpdGVyaWEgPSB7fTsNCg0KICAgICAgY3JpdGVyaWEucDJwID0gcDJwOw0KICAgICAgY3JpdGVyaWEuc3RvcmUgPSBzdG9yZTsNCiAgICAgIGNyaXRlcmlhLnNjaGVtYSA9IHNjaGVtYTsNCiAgICAgIGNyaXRlcmlhLnJlc291cmNlID0gb2JqVVJMOw0KDQogICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBzdWJzY3JpYmVdIC0gc3Vic2NyaWJlIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7DQoNCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IGZhbHNlIH0pOw0KDQogICAgICByZXR1cm4gX3RoaXMuX3N1YnNjcmliZShjcml0ZXJpYSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBSZXF1ZXN0IGEgc3Vic2NyaXB0aW9uIHRvIGFuIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdC4NCiAgICAqIEBwYXJhbSB7Y3JpdGVyaWF9IGNyaXRlcmlhIC0gSW5mb3JtYXRpb24gdG8gZGlzY292ZXJ5IHRoZSBvYnNlcnZlciBvYmplY3QNCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdE9ic2VydmVyPn0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgb2JzZXJ2ZXIuIEl0J3MgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXBvcnRlci4NCiAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdyZXN1bWVPYnNlcnZlcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVPYnNlcnZlcnMoY3JpdGVyaWEpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgX2NyaXRlcmlhID0gY3JpdGVyaWEgfHwge307DQoNCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShfY3JpdGVyaWEsIHsgcmVzdW1lOiB0cnVlIH0pOw0KDQogICAgICByZXR1cm4gX3RoaXMuX3N1YnNjcmliZShfY3JpdGVyaWEpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogUmVxdWVzdCBhIHJlYWQgYWN0aW9uIG9uIHRoZSByZXBvcnRlciBvYmplY3QNCiAgICAqIEBwYXJhbSB7T2JqZWN0VVJMfSBvYmpVUkwgLSBVUkwgb2YgdGhlIHJlcG9ydGVyIG9iamVjdCB0byBiZSByZWFkDQogICAgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdD59IFJldHVybiBQcm9taXNlIHRvIGxhc3QgYXZhaWxhYmxlIGRhdGEgb2YgdGhlIHJlcG9ydGVyDQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAncmVhZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWQob2JqVVJMKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIHJlcG9ydGVyIG9iamVjdCAobWF5YmUgdGhlcmUgaXMgbm8gbGlzdGVuZXIgYXZhaWxhYmxlLCBzbyBpdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggTWVzc2FnZUJ1cyAtPiByZXNvbHZlKQ0KICAgICAgLy93aWxsIHJlYWNoIHRoZSByZW1vdGUgb2JqZWN0IGluIERhdGFPYmplY3RSZXBvcnRlciAtPiBfb25SZWFkDQogICAgICB2YXIgcmVhZE1zZyA9IHsNCiAgICAgICAgdHlwZTogJ3JlYWQnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBvYmpVUkwNCiAgICAgIH07DQoNCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlYWRNc2csIGZ1bmN0aW9uIChyZXBseSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWFkLXJlc3BvbnNlOiAnLCByZXBseSk7DQogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICByZXNvbHZlKHJlcGx5LmJvZHkudmFsdWUpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyBjcmVhdGUgYW5kIGRlbGV0ZSBldmVudHMgb2YgcmVtb3ZlIFJlcG9ydGVyIG9iamVjdHMuDQogICAgKiBUaGlzIGlzIHJlbGVhdGVkIHRvIHRoZSBtZXNzYWdlbnMgc2VudCBieSBjcmVhdGUgdG8gdGhlIG9ic2VydmVycyBIeXBlcnR5IGFycmF5Lg0KICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjaw0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ29uTm90aWZpY2F0aW9uJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gb25Ob3RpZmljYXRpb24oY2FsbGJhY2spIHsNCiAgICAgIHRoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlciA9IGNhbGxiYWNrOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ19jcmVhdGUnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlKGNyaXRlcmlhKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgdmFyIHJlc3VtZSA9IGNyaXRlcmlhLnJlc3VtZTsNCiAgICAgICAgdmFyIGluaXRpYWxEYXRhID0gY3JpdGVyaWEuaW5pdGlhbERhdGEgfHwge307DQogICAgICAgIHZhciBzY2hlbWEgPSB2b2lkIDA7DQoNCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGUNCiAgICAgICAgdmFyIHJlcXVlc3RNc2cgPSB7DQogICAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsDQogICAgICAgICAgYm9keTogeyByZXN1bWU6IHJlc3VtZSB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXTogJywgY3JpdGVyaWEsIHJlcXVlc3RNc2cpOw0KDQogICAgICAgIHJlcXVlc3RNc2cuYm9keS52YWx1ZSA9IGluaXRpYWxEYXRhOw0KICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUucmVwb3J0ZXIgPSBfdGhpcy5fb3duZXI7DQoNCiAgICAgICAgaWYgKGNyaXRlcmlhLnNjaGVtYSkgew0KICAgICAgICAgIHNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsNCiAgICAgICAgICByZXF1ZXN0TXNnLmJvZHkuc2NoZW1hID0gY3JpdGVyaWEuc2NoZW1hOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGNyaXRlcmlhLnAycCkgcmVxdWVzdE1zZy5ib2R5LnAycCA9IGNyaXRlcmlhLnAycDsNCiAgICAgICAgaWYgKGNyaXRlcmlhLnN0b3JlKSByZXF1ZXN0TXNnLmJvZHkuc3RvcmUgPSBjcml0ZXJpYS5zdG9yZTsNCiAgICAgICAgaWYgKGNyaXRlcmlhLm9ic2VydmVycykgcmVxdWVzdE1zZy5ib2R5LmF1dGhvcmlzZSA9IGNyaXRlcmlhLm9ic2VydmVyczsNCg0KICAgICAgICBpZiAocmVzdW1lKSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlIG1lc3NhZ2U6ICcsIHJlcXVlc3RNc2cpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy9yZXF1ZXN0IGNyZWF0ZSB0byB0aGUgYWxsb2NhdGlvbiBzeXN0ZW0uIENhbiBiZSByZWplY3RlZCBieSB0aGUgUG9saWN5RW5naW5lLg0KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2csIGZ1bmN0aW9uIChyZXBseSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUtcmVzcG9uc2U6ICcsIHJlcGx5KTsNCiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICAgIC8vcmVwb3J0ZXIgY3JlYXRpb24gYWNjZXB0ZWQNCiAgICAgICAgICAgIHZhciBvYmpVUkwgPSByZXBseS5ib2R5LnJlc291cmNlOw0KDQogICAgICAgICAgICBpZiAocmVzdW1lKSB7DQogICAgICAgICAgICAgIHNjaGVtYSA9IHJlcGx5LmJvZHkuc2NoZW1hOw0KICAgICAgICAgICAgICBpbml0aWFsRGF0YSA9IHJlcGx5LmJvZHkudmFsdWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBuZXdPYmogPSBuZXcgX0RhdGFPYmplY3RSZXBvcnRlcjIuZGVmYXVsdChfdGhpcywgb2JqVVJMLCBzY2hlbWEsICdvbicsIGluaXRpYWxEYXRhLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsNCiAgICAgICAgICAgIF90aGlzLl9yZXBvcnRlcnNbb2JqVVJMXSA9IG5ld09iajsNCg0KICAgICAgICAgICAgcmVzb2x2ZShuZXdPYmopOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIHJlamVjdGVkDQogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3N1YnNjcmliZScsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9zdWJzY3JpYmUoY3JpdGVyaWEpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KDQogICAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uTG9jYWxTdWJzY3JpYmUNCiAgICAgICAgdmFyIHN1YnNjcmliZU1zZyA9IHsNCiAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogX3RoaXMuX3N1YlVSTCwNCiAgICAgICAgICBib2R5OiB7fQ0KICAgICAgICB9Ow0KDQogICAgICAgIC8vIEh5cGVydHkgcmVxdWVzdCB0byBiZSBhbiBPYnNlcnZlcg0KICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNoeXBlcnR5LXJlcXVlc3QtdG8tYmUtYW4tb2JzZXJ2ZXINCg0KICAgICAgICAvLyBSZXN1bWUgU3Vic2NyaXB0aW9ucyBmb3IgdGhlIHNhbWUgSHlwZXJ0eSBVUkwNCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLXRoZS1zYW1lLWh5cGVydHktdXJsDQoNCiAgICAgICAgLy8gUmVzdW1lIFN1YnNjcmlwdGlvbnMgZm9yIGEgY2VydGFpbiB1c2VyIGFuZCBkYXRhIHNjaGVtYSBpbmRlcGVuZGVudGx5IG9mIHRoZSBIeXBlcnR5IFVSTC4NCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLWEtY2VydGFpbi11c2VyLWFuZC1kYXRhLXNjaGVtYS1pbmRlcGVuZGVudGx5LW9mLXRoZS1oeXBlcnR5LXVybA0KICAgICAgICBpZiAoY3JpdGVyaWEpIHsNCiAgICAgICAgICBpZiAoY3JpdGVyaWEucDJwKSBzdWJzY3JpYmVNc2cuYm9keS5wMnAgPSBjcml0ZXJpYS5wMnA7DQogICAgICAgICAgaWYgKGNyaXRlcmlhLnN0b3JlKSBzdWJzY3JpYmVNc2cuYm9keS5zdG9yZSA9IGNyaXRlcmlhLnN0b3JlOw0KICAgICAgICAgIGlmIChjcml0ZXJpYS5zY2hlbWEpIHN1YnNjcmliZU1zZy5ib2R5LnNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsNCiAgICAgICAgICBpZiAoY3JpdGVyaWEuaWRlbnRpdHkpIHN1YnNjcmliZU1zZy5ib2R5LmlkZW50aXR5ID0gY3JpdGVyaWEuaWRlbnRpdHk7DQogICAgICAgICAgaWYgKGNyaXRlcmlhLnJlc291cmNlKSBzdWJzY3JpYmVNc2cuYm9keS5yZXNvdXJjZSA9IGNyaXRlcmlhLnJlc291cmNlOw0KICAgICAgICB9DQoNCiAgICAgICAgc3Vic2NyaWJlTXNnLmJvZHkucmVzdW1lID0gY3JpdGVyaWEucmVzdW1lOw0KDQogICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBzdWJzY3JpYmUgbWVzc2FnZTogJywgY3JpdGVyaWEsIHN1YnNjcmliZU1zZyk7DQoNCiAgICAgICAgLy9yZXF1ZXN0IHN1YnNjcmlwdGlvbg0KICAgICAgICAvL1Byb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4NCiAgICAgICAgLy9mb3IgbW9yZSBpbmZvIHNlZSB0aGUgRGF0YVByb3Zpc2lvbmFsIGNsYXNzIGRvY3VtZW50YXRpb24uDQogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoc3Vic2NyaWJlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlLXJlc3BvbnNlOiAnLCByZXBseSk7DQoNCiAgICAgICAgICB2YXIgc2NoZW1hID0gcmVwbHkuYm9keS5zY2hlbWE7DQogICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7DQoNCiAgICAgICAgICB2YXIgbmV3UHJvdmlzaW9uYWwgPSBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF07DQogICAgICAgICAgZGVsZXRlIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXTsNCiAgICAgICAgICBpZiAobmV3UHJvdmlzaW9uYWwpIG5ld1Byb3Zpc2lvbmFsLl9yZWxlYXNlTGlzdGVuZXJzKCk7DQoNCiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlIDwgMjAwKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gbmV3IERhdGFQcm92aXNpb25hbDogJywgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcywgb2JqVVJMKTsNCiAgICAgICAgICAgIG5ld1Byb3Zpc2lvbmFsID0gbmV3IF9EYXRhUHJvdmlzaW9uYWwyLmRlZmF1bHQoX3RoaXMuX293bmVyLCBvYmpVUkwsIF90aGlzLl9idXMsIHJlcGx5LmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpOw0KICAgICAgICAgICAgX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdID0gbmV3UHJvdmlzaW9uYWw7DQogICAgICAgICAgfSBlbHNlIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIG5ldyBEYXRhIE9iamVjdCBPYnNlcnZlcjogJywgcmVwbHksIF90aGlzLl9wcm92aXNpb25hbHMpOw0KDQogICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0T2JzZXJ2ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCByZXBseS5ib2R5LnZhbHVlLCBuZXdQcm92aXNpb25hbC5jaGlsZHJlbiwgcmVwbHkuYm9keS52ZXJzaW9uKTsNCiAgICAgICAgICAgIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXSA9IG5ld09iajsNCg0KICAgICAgICAgICAgcmVzb2x2ZShuZXdPYmopOw0KICAgICAgICAgICAgbmV3UHJvdmlzaW9uYWwuYXBwbHkobmV3T2JqKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgbG9jYWwgcnVudGltZSBSZXBvcnRlck9iamVjdCAtPiBfb25SZW1vdGVTdWJzY3JpYmUNCg0KICB9LCB7DQogICAga2V5OiAnX29uRm9yd2FyZCcsDQogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZvcndhcmQobXNnKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICB2YXIgcmVwb3J0ZXIgPSBfdGhpcy5fcmVwb3J0ZXJzW21zZy5ib2R5LnRvXTsNCiAgICAgIHJlcG9ydGVyLl9vbkZvcndhcmQobXNnKTsNCiAgICB9DQoNCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBTeW5jaGVyIC0+IGNyZWF0ZSAodGhpcyBpcyBhY3R1YWxseSBhbiBpbnZpdGF0aW9uIHRvIHN1YnNjcmliZSkNCg0KICB9LCB7DQogICAga2V5OiAnX29uUmVtb3RlQ3JlYXRlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlQ3JlYXRlKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9yZW1vdmUgIi9zdWJzY3JpcHRpb24iIGZyb20gdGhlIFVSTA0KICAgICAgdmFyIHJlc291cmNlID0gbXNnLmZyb20uc2xpY2UoMCwgLTEzKTsNCg0KICAgICAgdmFyIGV2ZW50ID0gew0KICAgICAgICB0eXBlOiBtc2cudHlwZSwNCiAgICAgICAgZnJvbTogbXNnLmJvZHkuc291cmNlLA0KICAgICAgICB1cmw6IHJlc291cmNlLA0KICAgICAgICBzY2hlbWE6IG1zZy5ib2R5LnNjaGVtYSwNCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLA0KICAgICAgICBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHksDQoNCiAgICAgICAgYWNrOiBmdW5jdGlvbiBhY2sodHlwZSkgew0KICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsNCiAgICAgICAgICBpZiAodHlwZSkgew0KICAgICAgICAgICAgbFR5cGUgPSB0eXBlOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vc2VuZCBhY2sgcmVzcG9uc2UgbWVzc2FnZQ0KICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sDQogICAgICAgICAgICBib2R5OiB7IGNvZGU6IGxUeXBlIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgaWYgKF90aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIpIHsNCiAgICAgICAgY29uc29sZS5pbmZvKCdbU3luY2hlcl0gTk9USUZJQ0FUSU9OLUVWRU5UOiAnLCBldmVudCk7DQogICAgICAgIF90aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIoZXZlbnQpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RSZXBvcnRlciAtPiBkZWxldGUNCg0KICB9LCB7DQogICAga2V5OiAnX29uUmVtb3RlRGVsZXRlJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlRGVsZXRlKG1zZykgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgLy9yZW1vdmUgIi9zdWJzY3JpcHRpb24iIGZyb20gdGhlIFVSTA0KICAgICAgdmFyIHJlc291cmNlID0gbXNnLmJvZHkucmVzb3VyY2U7DQoNCiAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fb2JzZXJ2ZXJzW3Jlc291cmNlXTsNCiAgICAgIGlmIChvYmplY3QpIHsNCiAgICAgICAgdmFyIGV2ZW50ID0gew0KICAgICAgICAgIHR5cGU6IG1zZy50eXBlLA0KICAgICAgICAgIHVybDogcmVzb3VyY2UsDQogICAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LA0KDQogICAgICAgICAgYWNrOiBmdW5jdGlvbiBhY2sodHlwZSkgew0KICAgICAgICAgICAgdmFyIGxUeXBlID0gMjAwOw0KICAgICAgICAgICAgaWYgKHR5cGUpIHsNCiAgICAgICAgICAgICAgbFR5cGUgPSB0eXBlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL1RPRE86IGFueSBvdGhlciBkaWZmZXJlbnQgb3B0aW9ucyBmb3IgdGhlIHJlbGVhc2UgcHJvY2VzcywgbGlrZSBhY2NlcHQgYnV0IG5vciByZWxlYXNlIGxvY2FsPw0KICAgICAgICAgICAgaWYgKGxUeXBlID09PSAyMDApIHsNCiAgICAgICAgICAgICAgb2JqZWN0LmRlbGV0ZSgpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UNCiAgICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSwgc291cmNlOiBfdGhpcy5fb3duZXIgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7DQogICAgICAgICAgY29uc29sZS5sb2coJ05PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOw0KICAgICAgICAgIF90aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIoZXZlbnQpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwNCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwNCwgc291cmNlOiBfdGhpcy5fb3duZXIgfQ0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9DQogIH0sIHsNCiAgICBrZXk6ICdvd25lcicsDQogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7DQogICAgICByZXR1cm4gdGhpcy5fb3duZXI7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBBbGwgb3duZWQgcmVwb3J0ZXJzLCB0aGUgb25lcyB0aGF0IHdlcmUgY3JlYXRlZCBieSBhIGNyZWF0ZQ0KICAgICogQHR5cGUge09iamVjdDxVUkwsIERhdGFPYmplY3RSZXBvcnRlcj59DQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAncmVwb3J0ZXJzJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9yZXBvcnRlcnM7DQogICAgfQ0KDQogICAgLyoqDQogICAgKiBBbGwgb3duZWQgb2JzZXJ2ZXJzLCB0aGUgb25lcyB0aGF0IHdlcmUgY3JlYXRlZCBieSBhIGxvY2FsIHN1YnNjcmlwdGlvbg0KICAgICogQHR5cGUge09iamVjdDxVUkwsIERhdGFPYmplY3RPYnNlcnZlcj59DQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnb2JzZXJ2ZXJzJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9vYnNlcnZlcnM7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBTeW5jaGVyOw0KfSgpOyAvKioNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQogICAgICoNCiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogICAgICoNCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICAgICAqDQogICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICAgICAqKi8NCg0KZXhwb3J0cy5kZWZhdWx0ID0gU3luY2hlcjsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCi8qIDEzMSAqLywNCi8qIDEzMiAqLywNCi8qIDEzMyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOw0KDQp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCi8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLw0KDQovKioNCiAqIEBhY2Nlc3MgcHJpdmF0ZQ0KICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgY29sbGVjdGluZyBkZWx0YSBjaGFuZ2VzIGluIHJlbW90ZSBvYmplY3RzLCBiZWZvcmUgdGhlIHJlc3BvbnNlIG9mIHN1YnNjcmlwdGlvbiByZWFjaCB0aGUgb2JzZXJ2ZXIuDQogKiBJdCdzIHVzZWQgaW4gU3luY2hlciAtPiBzdWJzY3JpYmUuIFRoZSBmbG93IGlzIGRlZmluZWQgYXM6DQogKiAxLiAob2JzZXJ2ZXIpIC0tc3Vic2NyaWJlLS0+IChyZXBvcnRlcikNCiAqIDIuIChvYnNlcnZlcikgPC0tZGVsdGEgdXBkYXRlcy0tIChyZXBvcnRlcikNCiAqIDMuIChvYnNlcnZlcikgPC0tc3Vic2NyaWJlIHJlc3BvbnNlLS0gKHJlcG9ydGVyKQ0KICogVGhpcyBtZWFucyB0aGF0IHRoZXJlIGNvdWxkIGJlIGRlbHRhIHVwZGF0ZXMgdHJhbnNmZXJyZWQgYmVmb3JlIHRoZSBzdWJzY3JpcHRpb24gY29uZmlybWF0aW9uLg0KICogU2luY2UgdGhlcmUgaXMgbm8gRGF0YU9iamVjdE9ic2VydmVyIGJlZm9yZSB0aGUgdWJzY3JpcHRpb24gY29uZmlybWF0aW9uLCB0aGVyZSBzaG91bGQgYmUgc29tZSBvdGhlciBvYmplY3QgY29sbGVjdGluZyB0aGUgdXBkYXRlcy4NCiAqIFByb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4NCiAqLw0KdmFyIERhdGFQcm92aXNpb25hbCA9IGZ1bmN0aW9uICgpIHsNCiAgLyogcHJpdmF0ZQ0KICBfY2hpbGRyZW5MaXN0ZW5lcnM6IFtNc2dMaXN0ZW5lcl0NCiAgX2xpc3RlbmVyOiBNc2dMaXN0ZW5lcg0KICAgX2NoYW5nZXM6IFtdDQogICovDQoNCiAgZnVuY3Rpb24gRGF0YVByb3Zpc2lvbmFsKG93bmVyLCB1cmwsIGJ1cywgY2hpbGRyZW4pIHsNCiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhUHJvdmlzaW9uYWwpOw0KDQogICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgIF90aGlzLl9vd25lciA9IG93bmVyOw0KICAgIF90aGlzLl91cmwgPSB1cmw7DQogICAgX3RoaXMuX2J1cyA9IGJ1czsNCiAgICBfdGhpcy5fY2hpbGRyZW4gPSBjaGlsZHJlbjsNCg0KICAgIF90aGlzLl9jaGFuZ2VzID0gW107DQogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7DQogIH0NCg0KICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhUHJvdmlzaW9uYWwsIFt7DQogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCg0KICAgICAgX3RoaXMuX2xpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsLCBmdW5jdGlvbiAobXNnKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCdEYXRhUHJvdmlzaW9uYWwtJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTsNCiAgICAgICAgX3RoaXMuX2NoYW5nZXMucHVzaChtc2cpOw0KICAgICAgfSk7DQoNCiAgICAgIC8qDQogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsNCiAgICAgIGlmIChfdGhpcy5fY2hpbGRyZW4pIHsNCiAgICAgICAgbGV0IGNoaWxkQmFzZVVSTCA9IHVybCArICcvY2hpbGRyZW4vJzsNCiAgICAgICAgX3RoaXMuX2NoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7DQogICAgICAgICAgbGV0IGNoaWxkVVJMID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7DQogICAgICAgICAgbGV0IGxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgKG1zZykgPT4gew0KICAgICAgICAgICAgLy9pZ25vcmUgbXNnIHNlbnQgYnkgaGltc2VsZg0KICAgICAgICAgICAgaWYgKG1zZy5mcm9tICE9PSBvd25lcikgew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7DQogICAgICAgIH0pOw0KICAgICAgfSovDQogICAgfQ0KICB9LCB7DQogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQoNCiAgICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTsNCg0KICAgICAgLypfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHsNCiAgICAgICAgbGlzdGVuZXIucmVtb3ZlKCk7DQogICAgICB9KTsqLw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ2FwcGx5JywNCiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwbHkob2JzZXJ2ZXIpIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICBfdGhpcy5fY2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChjaGFuZ2UpIHsNCiAgICAgICAgb2JzZXJ2ZXIuX2NoYW5nZU9iamVjdChvYnNlcnZlci5fc3luY09iaiwgY2hhbmdlKTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwgew0KICAgIGtleTogJ2NoaWxkcmVuJywNCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbjsNCiAgICB9DQogIH1dKTsNCiAgcmV0dXJuIERhdGFQcm92aXNpb25hbDsNCn0oKTsNCg0KZXhwb3J0cy5kZWZhdWx0ID0gRGF0YVByb3Zpc2lvbmFsOw0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107DQoNCi8qKiovIH0pLA0KLyogMTM0ICovLA0KLyogMTM1ICovLA0KLyogMTM2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTQzKSwgX19lc01vZHVsZTogdHJ1ZSB9Ow0KDQovKioqLyB9KSwNCi8qIDEzNyAqLywNCi8qIDEzOCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiAxMzkgKi8sDQovKiAxNDAgKi8sDQovKiAxNDEgKi8sDQovKiAxNDIgKi8sDQovKiAxNDMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5hc3NpZ247DQoNCi8qKiovIH0pLA0KLyogMTQ0ICovLA0KLyogMTQ1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMTUxKTsNCnZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Q7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsNCiAgcmV0dXJuICRPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAxNDYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQovLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pDQp2YXIgZ2V0S2V5cyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQ0KICAsIGdPUFMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkNCiAgLCBwSUUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpDQogICwgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQ0KICAsIElPYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NikNCiAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247DQoNCi8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKQ0KbW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpew0KICB2YXIgQSA9IHt9DQogICAgLCBCID0ge30NCiAgICAsIFMgPSBTeW1ib2woKQ0KICAgICwgSyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdCc7DQogIEFbU10gPSA3Ow0KICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7DQogIHJldHVybiAkYXNzaWduKHt9LCBBKVtTXSAhPSA3IHx8IE9iamVjdC5rZXlzKCRhc3NpZ24oe30sIEIpKS5qb2luKCcnKSAhPSBLOw0KfSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzDQogIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldCkNCiAgICAsIGFMZW4gID0gYXJndW1lbnRzLmxlbmd0aA0KICAgICwgaW5kZXggPSAxDQogICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mDQogICAgLCBpc0VudW0gICAgID0gcElFLmY7DQogIHdoaWxlKGFMZW4gPiBpbmRleCl7DQogICAgdmFyIFMgICAgICA9IElPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKQ0KICAgICAgLCBrZXlzICAgPSBnZXRTeW1ib2xzID8gZ2V0S2V5cyhTKS5jb25jYXQoZ2V0U3ltYm9scyhTKSkgOiBnZXRLZXlzKFMpDQogICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoDQogICAgICAsIGogICAgICA9IDANCiAgICAgICwga2V5Ow0KICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07DQogIH0gcmV0dXJuIFQ7DQp9IDogJGFzc2lnbjsNCg0KLyoqKi8gfSksDQovKiAxNDcgKi8sDQovKiAxNDggKi8sDQovKiAxNDkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSkNCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsNCg0KJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nil9KTsNCg0KLyoqKi8gfSksDQovKiAxNTAgKi8sDQovKiAxNTEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQ0KdmFyIHRvSU9iamVjdCAgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQ0KICAsICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KS5mOw0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJywgZnVuY3Rpb24oKXsNCiAgcmV0dXJuIGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsNCiAgICByZXR1cm4gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcih0b0lPYmplY3QoaXQpLCBrZXkpOw0KICB9Ow0KfSk7DQoNCi8qKiovIH0pLA0KLyogMTUyICovLA0KLyogMTUzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCi8vICAgICBwcm94eS1vYnNlcnZlIHYwLjAuMTgNCi8vICAgICBDb3B5cmlnaHQgKGMpIDIwMTUsIDIwMTYgU2ltb24gWS4gQmxhY2t3ZWxsLCBBbnlXaGljaFdheQ0KLy8gICAgIE1JVCBMaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocA0KKGZ1bmN0aW9uKCkgew0KCSJ1c2Ugc3RyaWN0IjsNCgkvLyBDcmVhdGVzIGFuZCByZXR1cm5zIGEgUHJveHkgd3JhcHBpbmcgYSB0YXJnZXQgc28gdGhhdCBhbGwgY2hhbmdlcyBjYW4gYmUgdHJhcHBlZCBhbmQgZm9yd2FyZGVkIHRvDQoJLy8gYSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHRha2VzIGFuIGFycmF5IG9mIGNoYW5nZXMganVzdCBsaWtlIHRoZSB0cmFkaXRpb25hbCBvcmlnaW5hbCBDaHJvbWUgT2JqZWN0Lm9ic2VydmUNCgkvLyB7b2JqZWN0OjxvYmplY3QgY2hhbmdlZD4sbmFtZTo8ZmllbGQgY2hhbmdlZD4sdHlwZTphZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUsb2xkVmFsdWU6PG9sZCB2YWx1ZSBpZiB1cGRhdGUgfCBkZWxldGU+fQ0KCS8vIFRoZSBhY2NlcHRsaXN0IGNhbiBiZSBhZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUuDQoJLy8gdiAwLjAuMTAgdG8gc3VwcG9ydCBwYXVzaW5nIGFuZCByZXN0YXJ0aW5nIG9ic2VydmF0aW9uIHR3byBhZGRpdGlvbmFsIGNvbnN0cnVjdG9yIGFyZ3VtZW50cyBhcmUgYXZhaWxhYmxlIHRvIE9iamVjdC5vYnNlcnZlOg0KCS8vIHBhdXNhYmxlIC0gY3JlYXRlIHRoZSBPYnNlcnZlciBzbyBpdCBjYW4gYmUgcGF1c2VkDQoJLy8gcGF1c2UgLSBjcmVhdGUgb2JzZXJ2ZXIgaW4gcGF1c2VkIHN0YXRlDQoJLy8gaWYgcGF1c2FibGUgaXMgdHJ1ZSB0aGVuIGFuIGFkZGl0aW9uYWwgbWV0aG9kIGRlbGl2ZXIoaWdub3JlUHJldmlvdXMpIGlzIGF2YWlsYWJsZSB0byBzdGFydCBkZWxpdmVyeQ0KCS8vIHRvIHBhdXNlIGRlbGl2ZXJ5IHNldCBhIHByb3BlcnR5IGNhbGxlZCBwYXVzZSBvbiB0aGUgZnVuY3Rpb24gZGVsaXZlciB0byB0cnVlDQoJLy8gcGF1c2FibGUgaXMgb3B0aW9uYWwgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2Ygc2hhZG93aW5nIGEgcHJvcGVydHkgb3IgbWV0aG9kIG9uIGFueSBleGlzdGluZyBjb2RlIGNhbGxlZCBkZWxpdmVyDQoJaWYoIU9iamVjdC5vYnNlcnZlICYmIHR5cGVvZihQcm94eSk9PT0iZnVuY3Rpb24iKSB7DQoJCWZ1bmN0aW9uIE9ic2VydmVyKHRhcmdldCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KSB7DQoJICAgIAl2YXIgbWUgPSB0aGlzLCBwcm94eTsNCgkgICAgCWZ1bmN0aW9uIGRlbGl2ZXIoaWdub3JlUHJldmlvdXMsZGVsYXkpIHsNCgkgICAgCQlkZWxpdmVyLmRlbGF5ID0gZGVsYXk7DQoJICAgIAkJaWYoIWRlbGl2ZXIucGF1c2UpIHsNCgkgICAgICAgIAkJaWYobWUuY2hhbmdlc2V0Lmxlbmd0aD4wKSB7DQoJICAgICAgICAJCQlpZighaWdub3JlUHJldmlvdXMpIHsNCgkJICAgIAkgICAgCQl2YXIgY2hhbmdlcyA9IG1lLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiAhYWNjZXB0bGlzdCB8fCBhY2NlcHRsaXN0LmluZGV4T2YoY2hhbmdlLnR5cGUpPj0wOyB9KTsNCgkJICAgICAgICAJCQlpZihjaGFuZ2VzLmxlbmd0aD4wKSB7DQoJCSAgICAgICAgCQkJCWNhbGxiYWNrKGNoYW5nZXMpOw0KCQkgICAgICAgIAkJCX0NCgkgICAgICAgIAkJCX0NCgkgICAgICAgIAkJCW1lLmNoYW5nZXNldCA9IFtdOw0KCSAgICAgICAgCQl9DQoJICAgIAkJfQ0KCSAgICAJfQ0KCSAgICAJZGVsaXZlci5wYXVzZSA9IHBhdXNlOw0KCSAgICAJZGVsaXZlci5kZWxheSA9IGRlbGF5Ow0KCQkgICAgbWUuZ2V0ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eSkgew0KCQkgICAgCWlmKHByb3BlcnR5PT09Il9fb2JzZXJ2ZXJfXyIpIHsNCgkJICAgIAkJcmV0dXJuIG1lOw0KCQkgICAgCX0NCgkJICAgIAlpZihwcm9wZXJ0eT09PSJ1bm9ic2VydmUiKSB7DQoJCSAgICAJCXJldHVybiBmdW5jdGlvbigpIHsNCgkJICAgIAkJCU9iamVjdC51bm9ic2VydmUodGFyZ2V0KTsNCgkJICAgIAkJCXJldHVybiB0YXJnZXQ7DQoJCSAgICAJCX07DQoJCSAgICAJfQ0KCQkgICAgCWlmKHByb3BlcnR5PT09ImRlbGl2ZXIiKSB7DQoJCSAgICAJCXJldHVybiBkZWxpdmVyOw0KCQkgICAgCX0NCgkJICAgIAlyZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTsNCgkJICAgIH0NCgkgICAgCW1lLnRhcmdldCA9IHRhcmdldDsNCgkgICAgCW1lLmNoYW5nZXNldCA9IFtdOw0KCSAgICAJaWYoIW1lLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18pIHsNCgkgICAgCQkvLyBfX29ic2VydmVyQ2FsbGJhY2tzX18gaXMgdXNlZCBhcyBhbiBpbmRleCB0byBnZXQgYXQgdGhlIHByb3h5IHdoaWNoIGlzIHRoZSBvYnNlcnZlciwgc28gd2UgY2FuIHVub2JzZXJ2ZQ0KCSAgICAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTsNCgkgICAgCQlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCJfX29ic2VydmVyc19fIix7ZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTpmYWxzZSx2YWx1ZTpbXX0pOw0KCSAgICAJfQ0KCSAgICAJbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKGNhbGxiYWNrKTsNCgkgICAgCW1lLnRhcmdldC5fX29ic2VydmVyc19fLnB1c2godGhpcyk7DQoJICAgIAlwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsbWUpOw0KCSAgICAJZGVsaXZlcihmYWxzZSxkZWxheSk7DQoJICAgIAlyZXR1cm4gcHJveHk7DQoJICAgIH0NCgkJT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGl2ZXIgPSBmdW5jdGlvbigpIHsNCgkJCXJldHVybiB0aGlzLmdldChudWxsLCJkZWxpdmVyIik7DQoJCX0NCgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7IC8vICwgcmVjZWl2ZXINCgkgICAgCXZhciBvbGR2YWx1ZSA9IHRhcmdldFtwcm9wZXJ0eV07DQoJICAgIAl2YXIgdHlwZSA9IChvbGR2YWx1ZT09PXVuZGVmaW5lZCA/ICJhZGQiIDogInVwZGF0ZSIpOw0KCSAgICAJdGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlOw0KCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAoIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZih0eXBlKT49MCkpIHsNCgkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZTpwcm9wZXJ0eSx0eXBlOnR5cGV9LA0KCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCgkgICAgICAgIAkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCSAgICAgICAgCWlmKHR5cGU9PT0idXBkYXRlIikgew0KCSAgICAgICAgCQljaGFuZ2Uub2xkVmFsdWUgPSBvbGR2YWx1ZTsNCgkgICAgICAgIAl9DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsNCgkgICAgCXZhciBvbGR2YWx1ZSA9IHRhcmdldFtwcm9wZXJ0eV07DQoJICAgIAkvL2lmKHR5cGVvZihvbGR2YWx1ZSkhPT0idW5kZWZpbmVkIikgew0KCQkgICAgCWRlbGV0ZSB0YXJnZXRbcHJvcGVydHldOw0KCQkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigiZGVsZXRlIik+PTApIHsNCgkJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZToiZGVsZXRlIixvbGRWYWx1ZTpvbGR2YWx1ZX0sDQoJCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCgkJICAgICAgICAJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCQkgICAgICAgIAlpZihzdGFydCkgew0KCQkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkJICAgICAgICAJfQ0KCQkgICAgCX0NCgkgICAgCS8vfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5kZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpIHsNCgkgICAgCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTsNCgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicmVjb25maWd1cmUiKT49MCkgew0KCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6InJlY29uZmlndXJlIn0sDQogICAgICAgIAkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KICAgICAgICAJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5zZXRQcm90b3R5cGVPZiA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvdG90eXBlKSB7DQoJICAgIAl2YXIgb2xkdmFsdWUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KTsNCgkgICAgCU9iamVjdC5zZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSk7DQoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInNldFByb3RvdHlwZSIpPj0wKSB7DQoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6Il9fcHJvdG9fXyIsdHlwZToic2V0UHJvdG90eXBlIixvbGRWYWx1ZTpvbGR2YWx1ZX0sDQogICAgCQkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KICAgIAkJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5wcmV2ZW50RXh0ZW5zaW9ucyA9IGZ1bmN0aW9uKHRhcmdldCkgew0KCSAgICAgICAgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHRhcmdldCk7DQoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApIHsNCgkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsdHlwZToicHJldmVudEV4dGVuc2lvbnMifSwNCgkJCQkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQoJCQkJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7DQoJICAgICAgICAJaWYoc3RhcnQpIHsNCgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkgICAgICAgIAl9DQoJICAgIAl9DQoJICAgIAlyZXR1cm4gdHJ1ZTsNCgkgICAgfTsNCgkgICAgT2JqZWN0Lm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgew0KCSAgICAJcmV0dXJuIG5ldyBPYnNlcnZlcihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7DQoJICAgIH07DQoJICAgIE9iamVjdC51bm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2spIHsNCgkgICAgCWlmKG9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18pIHsNCgkgICAgCQlpZighY2FsbGJhY2spIHsNCgkgICAgCQkJb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UoMCxvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLmxlbmd0aCk7DQoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZSgwLG9iamVjdC5fX29ic2VydmVyc19fLmxlbmd0aCk7DQoJICAgIAkJCXJldHVybjsNCgkgICAgCQl9DQoJICAgIAkJb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKG9ic2VydmVyY2FsbGJhY2ssaSkgew0KCSAgICAJCQlpZihjYWxsYmFjaz09PW9ic2VydmVyY2FsbGJhY2spIHsNCgkgICAgCQkJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKGksMSk7DQoJICAgIAkJCQlkZWxldGUgb2JqZWN0Ll9fb2JzZXJ2ZXJzX19baV0uY2FsbGJhY2s7DQoJICAgIAkJCQlvYmplY3QuX19vYnNlcnZlcnNfXy5zcGxpY2UoaSwxKTsNCgkgICAgCQkJfQ0KCSAgICAJCX0pOw0KCSAgICAJfQ0KCSAgICB9Ow0KCSAgICBBcnJheS5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsNCgkgICAgCWlmKCEob2JqZWN0IGluc3RhbmNlb2YgQXJyYXkpICYmICFBcnJheS5pc0FycmF5KG9iamVjdCkpIHsNCgkgICAgCQl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCBhcmd1bWVudCB0byBBcnJheS5vYnNlcnZlciBpcyBub3QgYW4gQXJyYXkiKTsNCgkgICAgCX0NCgkgICAgCXZhciBhcnJheXByb3h5ID0gbmV3IFByb3h5KG9iamVjdCx7Z2V0OiBmdW5jdGlvbih0YXJnZXQscHJvcGVydHkpIHsNCgkgICAgCQlpZihwcm9wZXJ0eT09PSJ1bm9ic2VydmUiKSB7DQoJCSAgICAJCXJldHVybiBmdW5jdGlvbihjYWxsYmFjaykgew0KCQkgICAgCQkJaWYoY2FsbGJhY2spIHsNCgkJICAgIAkJCQlyZXR1cm4gT2JqZWN0LnVub2JzZXJ2ZSh0YXJnZXQsY2FsbGJhY2spOw0KCQkgICAgCQkJfQ0KCQkgICAgCQkJcmV0dXJuIHRhcmdldC51bm9ic2VydmUoKTsNCgkJICAgIAkJfTsNCgkJICAgIAl9DQoJICAgIAkJaWYocHJvcGVydHk9PT0ic3BsaWNlIikgew0KCSAgICAJCQlyZXR1cm4gZnVuY3Rpb24oc3RhcnQsZW5kKSB7DQoJICAgIAkJCQlpZih0eXBlb2Yoc3RhcnQpIT09Im51bWJlciIgfHwgdHlwZW9mKGVuZCkhPT0ibnVtYmVyIikgew0KCSAgICAJCQkJCXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IHR3byBhcmd1bWVudHMgdG8gQXJyYXkgc3BsaWNlIGFyZSBub3QgbnVtYmVyLCBudW1iZXIiKTsNCgkgICAgCQkJCX0NCgkgICAgCSAgICAJCXZhciByZW1vdmVkID0gdGhpcy5zbGljZShzdGFydCxzdGFydCtlbmQpLA0KCSAgICAJICAgIAkJCWFkZGVkQ291bnQgPSAoYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHMubGVuZ3RoLTIgOiAwKSwNCgkgICAgCSAgICAJCQljaGFuZ2UgPSAge29iamVjdDpvYmplY3QsdHlwZToic3BsaWNlIixpbmRleDpzdGFydCxyZW1vdmVkOnJlbW92ZWQsYWRkZWRDb3VudDphZGRlZENvdW50fTsNCgkgICAgCSAgICAJCXRhcmdldC5zcGxpY2UuYXBwbHkodGFyZ2V0LGFyZ3VtZW50cyk7DQoJICAgIAkgICAgCQlpZihhY2NlcHRsaXN0LmluZGV4T2YoInNwbGljZSIpPj0wKSB7DQoJICAgIAkgICAgCQkJdmFyIHN0YXJ0ID0gcHJveHkuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQoJICAgIAkgICAgICAgIAkJCWRlbGl2ZXIgPSBwcm94eS5fX29ic2VydmVyX18uZGVsaXZlcigpOw0KCSAgICAJICAgIAkJCXByb3h5Ll9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAJICAgIAkJCWlmKHN0YXJ0KSB7DQoJICAgIAkJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgIAkJICAgICAgICAJfQ0KCSAgICAJICAgIAkJfQ0KCSAgICAJICAgIAl9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InB1c2giKSB7DQoJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oaXRlbSkgew0KCSAgICAJCSAgICAJcmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLDAsaXRlbSk7DQoJICAgIAkJICAgIH0NCgkgICAgCQl9DQoJICAgIAkJaWYocHJvcGVydHk9PT0icG9wIikgew0KCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKCkgew0KCSAgICAJCSAgICAJcmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLTEsMSk7DQoJICAgIAkJICAgIH0NCgkgICAgCQl9DQoJICAgIAkJaWYocHJvcGVydHk9PT0idW5zaGlmdCIpIHsNCgkgICAgCQkJIHJldHVybiBmdW5jdGlvbihpdGVtKSB7DQogICAgCQkgICAgCQlyZXR1cm4gdGhpcy5zcGxpY2UoMCwwLGl0ZW0pOw0KICAgIAkJICAgIAl9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InNoaWZ0Iikgew0KCSAgICAJCQlyZXR1cm4gZnVuY3Rpb24oKSB7DQoJICAgIAkgICAgCQlyZXR1cm4gdGhpcy5zcGxpY2UoMCwxKTsNCgkgICAgCSAgICAJfQ0KCSAgICAJCX0NCgkgICAgCQlyZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTsNCgkgICAgCX19KTsNCgkgICAgCXZhciBwcm94eSA9IE9iamVjdC5vYnNlcnZlKGFycmF5cHJveHksZnVuY3Rpb24oY2hhbmdlc2V0KSB7IA0KCSAgICAJCXZhciBjaGFuZ2VzID0gY2hhbmdlc2V0LmZpbHRlcihmdW5jdGlvbihjaGFuZ2UpIHsgcmV0dXJuIGNoYW5nZS5uYW1lIT09Imxlbmd0aCIgJiYgY2hhbmdlLm5hbWUhPT0iYWRkIiAmJiAoIWFjY2VwdGxpc3QgfHwgYWNjZXB0bGlzdC5pbmRleE9mKGNoYW5nZS50eXBlKT49MCk7IH0pOw0KCSAgICAJCWlmKGNoYW5nZXMubGVuZ3RoPjApIHsNCgkgICAgCQkJY2FsbGJhY2soY2hhbmdlcyk7DQoJICAgIAkJfQ0KCSAgICAJfSxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KTsNCgkgICAgCXJldHVybiBwcm94eTsNCgkgICAgfTsNCgkgICAgQXJyYXkudW5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKSB7DQoJCSAgcmV0dXJuIG9iamVjdC51bm9ic2VydmUoY2FsbGJhY2spOw0KCSAgICB9DQoJfQ0KCU9iamVjdC5kZWVwT2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayxwYXJ0cykgew0KCQlwYXJ0cyA9IChwYXJ0cyA/IHBhcnRzIDogW10pOw0KCQl2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7DQoJCWtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsNCgkJCWlmKG9iamVjdFtrZXldIGluc3RhbmNlb2YgT2JqZWN0KSB7DQoJCQkJdmFyIG5ld3BhcnRzID0gcGFydHMuc2xpY2UoMCk7DQoJCQkJbmV3cGFydHMucHVzaChrZXkpOw0KCQkJCW9iamVjdFtrZXldID0gT2JqZWN0LmRlZXBPYnNlcnZlKG9iamVjdFtrZXldLGNhbGxiYWNrLG5ld3BhcnRzKTsNCgkJCX0NCgkJfSk7DQoJCXZhciBvYnNlcnZlZCA9IE9iamVjdC5vYnNlcnZlKG9iamVjdCxmdW5jdGlvbihjaGFuZ2VzZXQpIHsNCgkJCXZhciBjaGFuZ2VzID0gW107DQoJCQlmdW5jdGlvbiByZWN1cnNlKG5hbWUscm9vdE9iamVjdCxvbGRPYmplY3QsbmV3T2JqZWN0LHBhdGgpIHsNCgkJCQlpZihuZXdPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHsNCgkJCQkJdmFyIG5ld2tleXMgPSBPYmplY3Qua2V5cyhuZXdPYmplY3QpOw0KCQkJCQluZXdrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7DQoJCQkJCQlpZighb2xkT2JqZWN0IHx8IChvbGRPYmplY3Rba2V5XSE9PW5ld09iamVjdFtrZXldKSkgew0KCQkJCQkJCXZhciBvbGR2YWx1ZSA9IChvbGRPYmplY3QgJiYgb2xkT2JqZWN0W2tleV0hPT11bmRlZmluZWQgPyBvbGRPYmplY3Rba2V5XSA6IHVuZGVmaW5lZCksDQoJCQkJCQkJCWNoYW5nZSA9IChvbGR2YWx1ZT09PXVuZGVmaW5lZCA/ICJhZGQiIDogInVwZGF0ZSIpLA0KCQkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsNCgkJCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGR2YWx1ZSxuZXdWYWx1ZTpuZXdPYmplY3Rba2V5XSxrZXlwYXRoOmtleXBhdGh9KTsNCgkJCQkJCQlyZWN1cnNlKG5hbWUscm9vdE9iamVjdCxvbGR2YWx1ZSxuZXdPYmplY3Rba2V5XSxrZXlwYXRoKTsNCgkJCQkJCX0NCgkJCQkJfSk7DQoJCQkJfSBlbHNlIGlmKG9sZE9iamVjdCBpbnN0YW5jZW9mIE9iamVjdCkgew0KCQkJCQl2YXIgb2xka2V5cyA9IE9iamVjdC5rZXlzKG9sZE9iamVjdCk7DQoJCQkJCW9sZGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsNCgkJCQkJCXZhciBjaGFuZ2UgPSAobmV3T2JqZWN0PT09bnVsbCA/ICJ1cGRhdGUiIDogImRlbGV0ZSIpLA0KCQkJCQkJCWtleXBhdGggPSBwYXRoICsgIi4iICsga2V5Ow0KCQkJCQkJY2hhbmdlcy5wdXNoKHtuYW1lOm5hbWUsb2JqZWN0OnJvb3RPYmplY3QsdHlwZTpjaGFuZ2Usb2xkVmFsdWU6b2xkT2JqZWN0W2tleV0sbmV3VmFsdWU6bmV3T2JqZWN0LGtleXBhdGg6a2V5cGF0aH0pOw0KCQkJCQkJcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0W2tleV0sdW5kZWZpbmVkLGtleXBhdGgpOw0KCQkJCQl9KTsNCgkJCQl9DQoJCQl9DQoJCQljaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbihjaGFuZ2UpIHsNCgkJCQl2YXIga2V5cGF0aCA9IChwYXJ0cy5sZW5ndGg+MCA/IHBhcnRzLmpvaW4oIi4iKSArICIuIiA6ICIiKSArIGNoYW5nZS5uYW1lOw0KCQkJCWNoYW5nZXMucHVzaCh7bmFtZTpjaGFuZ2UubmFtZSxvYmplY3Q6Y2hhbmdlLm9iamVjdCx0eXBlOmNoYW5nZS50eXBlLG9sZFZhbHVlOmNoYW5nZS5vbGRWYWx1ZSxuZXdWYWx1ZTpjaGFuZ2Uub2JqZWN0W2NoYW5nZS5uYW1lXSxrZXlwYXRoOmtleXBhdGh9KTsNCgkJCQlyZWN1cnNlKGNoYW5nZS5uYW1lLGNoYW5nZS5vYmplY3QsY2hhbmdlLm9sZFZhbHVlLGNoYW5nZS5vYmplY3RbY2hhbmdlLm5hbWVdLGtleXBhdGgpOw0KCQkJfSk7DQoJCQljYWxsYmFjayhjaGFuZ2VzKTsNCgkJfSk7DQoJCXJldHVybiBvYnNlcnZlZDsNCgl9Ow0KfSkoKTsNCg0KLyoqKi8gfSksDQovKiAxNTQgKi8sDQovKiAxNTUgKi8sDQovKiAxNTYgKi8sDQovKiAxNTcgKi8sDQovKiAxNTggKi8sDQovKiAxNTkgKi8sDQovKiAxNjAgKi8sDQovKiAxNjEgKi8sDQovKiAxNjIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KZXhwb3J0cy5EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBleHBvcnRzLkRhdGFPYmplY3RSZXBvcnRlciA9IGV4cG9ydHMuU3luY2hlciA9IHVuZGVmaW5lZDsNCg0KdmFyIF9TeW5jaGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApOw0KDQp2YXIgX1N5bmNoZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfU3luY2hlcik7DQoNCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpOw0KDQp2YXIgX0RhdGFPYmplY3RSZXBvcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0UmVwb3J0ZXIpOw0KDQp2YXIgX0RhdGFPYmplY3RPYnNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsNCg0KdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdE9ic2VydmVyKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KZXhwb3J0cy5TeW5jaGVyID0gX1N5bmNoZXIyLmRlZmF1bHQ7DQpleHBvcnRzLkRhdGFPYmplY3RSZXBvcnRlciA9IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQ7DQpleHBvcnRzLkRhdGFPYmplY3RPYnNlcnZlciA9IF9EYXRhT2JqZWN0T2JzZXJ2ZXIyLmRlZmF1bHQ7DQoNCi8qKiovIH0pDQovKioqKioqLyBdKTsNCn0pOw0KfSx7fV0sNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzPXsKICAiX2FyZ3MiOiBbCiAgICBbCiAgICAgICJzaXAuanNAMC43LjUiLAogICAgICAiQzpcXFByb2plY3Rvc1xccmVUSElOS1xcV1AzXFxnaXRcXGRldi1wcm90b3N0dWJzXFxzcmNcXHByb3Rvc3R1YlxcaW1zX2l3IgogICAgXQogIF0sCiAgIl9mcm9tIjogInNpcC5qc0AwLjcuNSIsCiAgIl9pZCI6ICJzaXAuanNAMC43LjUiLAogICJfaW5DYWNoZSI6IHRydWUsCiAgIl9pbnN0YWxsYWJsZSI6IHRydWUsCiAgIl9sb2NhdGlvbiI6ICIvc2lwLmpzIiwKICAiX25vZGVWZXJzaW9uIjogIjQuNC4zIiwKICAiX25wbU9wZXJhdGlvbmFsSW50ZXJuYWwiOiB7CiAgICAiaG9zdCI6ICJwYWNrYWdlcy0xMi13ZXN0LmludGVybmFsLm5wbWpzLmNvbSIsCiAgICAidG1wIjogInRtcC9zaXAuanMtMC43LjUudGd6XzE0NjE1OTQ0MTg2OTBfMC41ODM5OTMzMTI0MzcwODczIgogIH0sCiAgIl9ucG1Vc2VyIjogewogICAgImVtYWlsIjogIjEyMTJqdHJhY2V1ckBnbWFpbC5jb20iLAogICAgIm5hbWUiOiAiam9zZXBoZnJhemllciIKICB9LAogICJfbnBtVmVyc2lvbiI6ICIyLjE1LjEiLAogICJfcGhhbnRvbUNoaWxkcmVuIjoge30sCiAgIl9yZXF1ZXN0ZWQiOiB7CiAgICAibmFtZSI6ICJzaXAuanMiLAogICAgInJhdyI6ICJzaXAuanNAMC43LjUiLAogICAgInJhd1NwZWMiOiAiMC43LjUiLAogICAgInNjb3BlIjogbnVsbCwKICAgICJzcGVjIjogIjAuNy41IiwKICAgICJ0eXBlIjogInZlcnNpb24iCiAgfSwKICAiX3JlcXVpcmVkQnkiOiBbCiAgICAiLyIKICBdLAogICJfcmVzb2x2ZWQiOiAiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvc2lwLmpzLy0vc2lwLmpzLTAuNy41LnRneiIsCiAgIl9zaGFzdW0iOiAiODZhY2U3MDUxNTk0ZjkxYjQ1NTFiZGI4MTIwYTE2YzQ0OTYyZDNhMiIsCiAgIl9zaHJpbmt3cmFwIjogbnVsbCwKICAiX3NwZWMiOiAic2lwLmpzQDAuNy41IiwKICAiX3doZXJlIjogIkM6XFxQcm9qZWN0b3NcXHJlVEhJTktcXFdQM1xcZ2l0XFxkZXYtcHJvdG9zdHVic1xcc3JjXFxwcm90b3N0dWJcXGltc19pdyIsCiAgImF1dGhvciI6IHsKICAgICJlbWFpbCI6ICJkZXZlbG9wZXJAb25zaXAuY29tIiwKICAgICJuYW1lIjogIk9uU0lQIiwKICAgICJ1cmwiOiAiaHR0cDovL3NpcGpzLmNvbS9hdXRob3JzLyIKICB9LAogICJicm93c2VyIjogewogICAgIi4vc3JjL2Vudmlyb25tZW50LmpzIjogIi4vc3JjL2Vudmlyb25tZW50X2Jyb3dzZXIuanMiCiAgfSwKICAiYnVncyI6IHsKICAgICJ1cmwiOiAiaHR0cHM6Ly9naXRodWIuY29tL29uc2lwL1NJUC5qcy9pc3N1ZXMiCiAgfSwKICAiY29udHJpYnV0b3JzIjogWwogICAgewogICAgICAidXJsIjogImh0dHBzOi8vZ2l0aHViLmNvbS9vbnNpcC9TSVAuanMvYmxvYi9tYXN0ZXIvVEhBTktTLm1kIgogICAgfQogIF0sCiAgImRlcGVuZGVuY2llcyI6IHsKICAgICJwcm9taXNjdW91cyI6ICJeMC42LjAiLAogICAgIndzIjogIl4wLjYuNCIKICB9LAogICJkZXNjcmlwdGlvbiI6ICJBIHNpbXBsZSwgaW50dWl0aXZlLCBhbmQgcG93ZXJmdWwgSmF2YVNjcmlwdCBzaWduYWxpbmcgbGlicmFyeSIsCiAgImRldkRlcGVuZGVuY2llcyI6IHsKICAgICJiZWVmeSI6ICJeMi4xLjUiLAogICAgImJyb3dzZXJpZnkiOiAiXjQuMS44IiwKICAgICJncnVudCI6ICJ+MC40LjAiLAogICAgImdydW50LWJyb3dzZXJpZnkiOiAiXjQuMC4xIiwKICAgICJncnVudC1jbGkiOiAifjAuMS42IiwKICAgICJncnVudC1jb250cmliLWNvcHkiOiAiXjAuNS4wIiwKICAgICJncnVudC1jb250cmliLWphc21pbmUiOiAiXjAuOS4yIiwKICAgICJncnVudC1jb250cmliLWpzaGludCI6ICI+MC41LjAiLAogICAgImdydW50LWNvbnRyaWItdWdsaWZ5IjogIn4wLjIuMCIsCiAgICAiZ3J1bnQtcGVnIjogIn4xLjMuMSIsCiAgICAiZ3J1bnQtdHJpbXRyYWlsaW5nc3BhY2VzIjogIl4wLjQuMCIsCiAgICAicGVnanMiOiAiXjAuOC4wIgogIH0sCiAgImRpcmVjdG9yaWVzIjoge30sCiAgImRpc3QiOiB7CiAgICAic2hhc3VtIjogIjg2YWNlNzA1MTU5NGY5MWI0NTUxYmRiODEyMGExNmM0NDk2MmQzYTIiLAogICAgInRhcmJhbGwiOiAiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvc2lwLmpzLy0vc2lwLmpzLTAuNy41LnRneiIKICB9LAogICJlbmdpbmVzIjogewogICAgIm5vZGUiOiAiPj0wLjgiCiAgfSwKICAiZ2l0SGVhZCI6ICJiYWU0NGJkMDM1OWY0ZDcwZGVkMzA5YTMyMzYxZjA0YTA0ZTc4ZDZlIiwKICAiaG9tZXBhZ2UiOiAiaHR0cDovL3NpcGpzLmNvbSIsCiAgImtleXdvcmRzIjogWwogICAgImphdmFzY3JpcHQiLAogICAgImxpYnJhcnkiLAogICAgInNpcCIsCiAgICAid2VicnRjIiwKICAgICJ3ZWJzb2NrZXQiCiAgXSwKICAibGljZW5zZSI6ICJNSVQiLAogICJtYWluIjogInNyYy9pbmRleC5qcyIsCiAgIm1haW50YWluZXJzIjogWwogICAgewogICAgICAibmFtZSI6ICJlZ3JlZW5fb25zaXAiLAogICAgICAiZW1haWwiOiAiZXJpYy5ncmVlbkBvbnNpcC5jb20iCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJqYW1lcy1jcmlzY3VvbG8iLAogICAgICAiZW1haWwiOiAiamFtZXNAb25zaXAuY29tIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiam9zZXBoZnJhemllciIsCiAgICAgICJlbWFpbCI6ICIxMjEyanRyYWNldXJAZ21haWwuY29tIgogICAgfQogIF0sCiAgIm5hbWUiOiAic2lwLmpzIiwKICAib3B0aW9uYWxEZXBlbmRlbmNpZXMiOiB7CiAgICAicHJvbWlzY3VvdXMiOiAiXjAuNi4wIgogIH0sCiAgInJlYWRtZSI6ICJFUlJPUjogTm8gUkVBRE1FIGRhdGEgZm91bmQhIiwKICAicmVwb3NpdG9yeSI6IHsKICAgICJ0eXBlIjogImdpdCIsCiAgICAidXJsIjogImdpdCtodHRwczovL2dpdGh1Yi5jb20vb25zaXAvU0lQLmpzLmdpdCIKICB9LAogICJzY3JpcHRzIjogewogICAgImJ1aWxkIjogImdydW50IGJ1aWxkIiwKICAgICJwcmVwdWJsaXNoIjogImNkIHNyYy9HcmFtbWFyICYmIG1rZGlyIC1wIGRpc3QgJiYgcGVnanMgLS1leHRyYS1vcHRpb25zLWZpbGUgcGVnLmpzb24gc3JjL0dyYW1tYXIucGVnanMgZGlzdC9HcmFtbWFyLmpzIiwKICAgICJyZXBsIjogImJlZWZ5IHRlc3QvcmVwbC5qcyAtLW9wZW4iLAogICAgInRlc3QiOiAiZ3J1bnQgdHJhdmlzIC0tdmVyYm9zZSIKICB9LAogICJ0aXRsZSI6ICJTSVAuanMiLAogICJ2ZXJzaW9uIjogIjAuNy41Igp9Cgp9LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyIENsaWVudENvbnRleHQ7CgpDbGllbnRDb250ZXh0ID0gZnVuY3Rpb24gKHVhLCBtZXRob2QsIHRhcmdldCwgb3B0aW9ucykgewogIHZhciBvcmlnaW5hbFRhcmdldCA9IHRhcmdldDsKCiAgLy8gVmFsaWRhdGUgYXJndW1lbnRzCiAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgZW5vdWdoIGFyZ3VtZW50cycpOwogIH0KCiAgdGhpcy51YSA9IHVhOwogIHRoaXMubG9nZ2VyID0gdWEuZ2V0TG9nZ2VyKCdzaXAuY2xpZW50Y29udGV4dCcpOwogIHRoaXMubWV0aG9kID0gbWV0aG9kOwogIHRhcmdldCA9IHVhLm5vcm1hbGl6ZVRhcmdldCh0YXJnZXQpOwogIGlmICghdGFyZ2V0KSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRhcmdldDogJyArIG9yaWdpbmFsVGFyZ2V0KTsKICB9CgogIC8qIE9wdGlvbnMKICAgKiAtIGV4dHJhSGVhZGVycwogICAqIC0gcGFyYW1zCiAgICogLSBjb250ZW50VHlwZQogICAqIC0gYm9keQogICAqLwogIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG9wdGlvbnMgfHwgT2JqZWN0LnByb3RvdHlwZSk7CiAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CgogIGlmIChvcHRpb25zLmNvbnRlbnRUeXBlKSB7CiAgICB0aGlzLmNvbnRlbnRUeXBlID0gb3B0aW9ucy5jb250ZW50VHlwZTsKICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRlbnQtVHlwZTogJyArIHRoaXMuY29udGVudFR5cGUpOwogIH0KCiAgLy8gQnVpbGQgdGhlIHJlcXVlc3QKICB0aGlzLnJlcXVlc3QgPSBuZXcgU0lQLk91dGdvaW5nUmVxdWVzdCh0aGlzLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51YSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnBhcmFtcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyk7CiAgaWYgKG9wdGlvbnMuYm9keSkgewogICAgdGhpcy5ib2R5ID0gb3B0aW9ucy5ib2R5OwogICAgdGhpcy5yZXF1ZXN0LmJvZHkgPSB0aGlzLmJvZHk7CiAgfQoKICAvKiBTZXQgb3RoZXIgcHJvcGVydGllcyBmcm9tIHRoZSByZXF1ZXN0ICovCiAgdGhpcy5sb2NhbElkZW50aXR5ID0gdGhpcy5yZXF1ZXN0LmZyb207CiAgdGhpcy5yZW1vdGVJZGVudGl0eSA9IHRoaXMucmVxdWVzdC50bzsKCiAgdGhpcy5kYXRhID0ge307Cn07CkNsaWVudENvbnRleHQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgpDbGllbnRDb250ZXh0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKCkgewogIChuZXcgU0lQLlJlcXVlc3RTZW5kZXIodGhpcywgdGhpcy51YSkpLnNlbmQoKTsKICByZXR1cm4gdGhpczsKfTsKCkNsaWVudENvbnRleHQucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHZhciBjYW5jZWxfcmVhc29uID0gU0lQLlV0aWxzLmdldENhbmNlbFJlYXNvbihvcHRpb25zLnN0YXR1c19jb2RlLCBvcHRpb25zLnJlYXNvbl9waHJhc2UpOwogIHRoaXMucmVxdWVzdC5jYW5jZWwoY2FuY2VsX3JlYXNvbik7CgogIHRoaXMuZW1pdCgnY2FuY2VsJyk7Cn07CgpDbGllbnRDb250ZXh0LnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2UgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICB2YXIgY2F1c2UgPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHJlc3BvbnNlLnN0YXR1c19jb2RlKTsKCiAgc3dpdGNoKHRydWUpIHsKICAgIGNhc2UgL14xWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKToKICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgL14yWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKToKICAgICAgaWYodGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdKSB7CiAgICAgICAgZGVsZXRlIHRoaXMudWEuYXBwbGljYW50c1t0aGlzXTsKICAgICAgfQogICAgICB0aGlzLmVtaXQoJ2FjY2VwdGVkJywgcmVzcG9uc2UsIGNhdXNlKTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgaWYodGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdKSB7CiAgICAgICAgZGVsZXRlIHRoaXMudWEuYXBwbGljYW50c1t0aGlzXTsKICAgICAgfQogICAgICB0aGlzLmVtaXQoJ3JlamVjdGVkJywgcmVzcG9uc2UsIGNhdXNlKTsKICAgICAgdGhpcy5lbWl0KCdmYWlsZWQnLCByZXNwb25zZSwgY2F1c2UpOwogICAgICBicmVhazsKICB9Cgp9OwoKQ2xpZW50Q29udGV4dC5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwp9OwoKQ2xpZW50Q29udGV4dC5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvciA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIG51bGwsIFNJUC5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKTsKfTsKClNJUC5DbGllbnRDb250ZXh0ID0gQ2xpZW50Q29udGV4dDsKfTsKCn0se31dLDg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAZmlsZW92ZXJ2aWV3IFNJUCBDb25zdGFudHMKICovCgovKioKICogU0lQIENvbnN0YW50cy4KICogQGF1Z21lbnRzIFNJUAogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUsIHZlcnNpb24pIHsKcmV0dXJuIHsKICBVU0VSX0FHRU5UOiBuYW1lICsnLycrIHZlcnNpb24sCgogIC8vIFNJUCBzY2hlbWUKICBTSVA6ICAnc2lwJywKICBTSVBTOiAnc2lwcycsCgogIC8vIEVuZCBhbmQgRmFpbHVyZSBjYXVzZXMKICBjYXVzZXM6IHsKICAgIC8vIEdlbmVyaWMgZXJyb3IgY2F1c2VzCiAgICBDT05ORUNUSU9OX0VSUk9SOiAgICAgICAgICdDb25uZWN0aW9uIEVycm9yJywKICAgIFJFUVVFU1RfVElNRU9VVDogICAgICAgICAgJ1JlcXVlc3QgVGltZW91dCcsCiAgICBTSVBfRkFJTFVSRV9DT0RFOiAgICAgICAgICdTSVAgRmFpbHVyZSBDb2RlJywKICAgIElOVEVSTkFMX0VSUk9SOiAgICAgICAgICAgJ0ludGVybmFsIEVycm9yJywKCiAgICAvLyBTSVAgZXJyb3IgY2F1c2VzCiAgICBCVVNZOiAgICAgICAgICAgICAgICAgICAgICdCdXN5JywKICAgIFJFSkVDVEVEOiAgICAgICAgICAgICAgICAgJ1JlamVjdGVkJywKICAgIFJFRElSRUNURUQ6ICAgICAgICAgICAgICAgJ1JlZGlyZWN0ZWQnLAogICAgVU5BVkFJTEFCTEU6ICAgICAgICAgICAgICAnVW5hdmFpbGFibGUnLAogICAgTk9UX0ZPVU5EOiAgICAgICAgICAgICAgICAnTm90IEZvdW5kJywKICAgIEFERFJFU1NfSU5DT01QTEVURTogICAgICAgJ0FkZHJlc3MgSW5jb21wbGV0ZScsCiAgICBJTkNPTVBBVElCTEVfU0RQOiAgICAgICAgICdJbmNvbXBhdGlibGUgU0RQJywKICAgIEFVVEhFTlRJQ0FUSU9OX0VSUk9SOiAgICAgJ0F1dGhlbnRpY2F0aW9uIEVycm9yJywKICAgIERJQUxPR19FUlJPUjogICAgICAgICAgICAgJ0RpYWxvZyBFcnJvcicsCgogICAgLy8gU2Vzc2lvbiBlcnJvciBjYXVzZXMKICAgIFdFQlJUQ19OT1RfU1VQUE9SVEVEOiAgICAgJ1dlYlJUQyBOb3QgU3VwcG9ydGVkJywKICAgIFdFQlJUQ19FUlJPUjogICAgICAgICAgICAgJ1dlYlJUQyBFcnJvcicsCiAgICBDQU5DRUxFRDogICAgICAgICAgICAgICAgICdDYW5jZWxlZCcsCiAgICBOT19BTlNXRVI6ICAgICAgICAgICAgICAgICdObyBBbnN3ZXInLAogICAgRVhQSVJFUzogICAgICAgICAgICAgICAgICAnRXhwaXJlcycsCiAgICBOT19BQ0s6ICAgICAgICAgICAgICAgICAgICdObyBBQ0snLAogICAgTk9fUFJBQ0s6ICAgICAgICAgICAgICAgICAnTm8gUFJBQ0snLAogICAgVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTOiAnVXNlciBEZW5pZWQgTWVkaWEgQWNjZXNzJywKICAgIEJBRF9NRURJQV9ERVNDUklQVElPTjogICAgJ0JhZCBNZWRpYSBEZXNjcmlwdGlvbicsCiAgICBSVFBfVElNRU9VVDogICAgICAgICAgICAgICdSVFAgVGltZW91dCcKICB9LAoKICBzdXBwb3J0ZWQ6IHsKICAgIFVOU1VQUE9SVEVEOiAgICAgICAgJ25vbmUnLAogICAgU1VQUE9SVEVEOiAgICAgICAgICAnc3VwcG9ydGVkJywKICAgIFJFUVVJUkVEOiAgICAgICAgICAgJ3JlcXVpcmVkJwogIH0sCgogIFNJUF9FUlJPUl9DQVVTRVM6IHsKICAgIFJFRElSRUNURUQ6IFszMDAsMzAxLDMwMiwzMDUsMzgwXSwKICAgIEJVU1k6IFs0ODYsNjAwXSwKICAgIFJFSkVDVEVEOiBbNDAzLDYwM10sCiAgICBOT1RfRk9VTkQ6IFs0MDQsNjA0XSwKICAgIFVOQVZBSUxBQkxFOiBbNDgwLDQxMCw0MDgsNDMwXSwKICAgIEFERFJFU1NfSU5DT01QTEVURTogWzQ4NF0sCiAgICBJTkNPTVBBVElCTEVfU0RQOiBbNDg4LDYwNl0sCiAgICBBVVRIRU5USUNBVElPTl9FUlJPUjpbNDAxLDQwN10KICB9LAoKICAvLyBTSVAgTWV0aG9kcwogIEFDSzogICAgICAgICdBQ0snLAogIEJZRTogICAgICAgICdCWUUnLAogIENBTkNFTDogICAgICdDQU5DRUwnLAogIElORk86ICAgICAgICdJTkZPJywKICBJTlZJVEU6ICAgICAnSU5WSVRFJywKICBNRVNTQUdFOiAgICAnTUVTU0FHRScsCiAgTk9USUZZOiAgICAgJ05PVElGWScsCiAgT1BUSU9OUzogICAgJ09QVElPTlMnLAogIFJFR0lTVEVSOiAgICdSRUdJU1RFUicsCiAgVVBEQVRFOiAgICAgJ1VQREFURScsCiAgU1VCU0NSSUJFOiAgJ1NVQlNDUklCRScsCiAgUkVGRVI6ICAgICAgJ1JFRkVSJywKICBQUkFDSzogICAgICAnUFJBQ0snLAoKICAvKiBTSVAgUmVzcG9uc2UgUmVhc29ucwogICAqIERPQzogaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9zaXAtcGFyYW1ldGVycwogICAqIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJzYXRpY2EvT3ZlclNJUC9ibG9iL21hc3Rlci9saWIvb3ZlcnNpcC9zaXAvY29uc3RhbnRzLnJiI0w3CiAgICovCiAgUkVBU09OX1BIUkFTRTogewogICAgMTAwOiAnVHJ5aW5nJywKICAgIDE4MDogJ1JpbmdpbmcnLAogICAgMTgxOiAnQ2FsbCBJcyBCZWluZyBGb3J3YXJkZWQnLAogICAgMTgyOiAnUXVldWVkJywKICAgIDE4MzogJ1Nlc3Npb24gUHJvZ3Jlc3MnLAogICAgMTk5OiAnRWFybHkgRGlhbG9nIFRlcm1pbmF0ZWQnLCAgLy8gZHJhZnQtaWV0Zi1zaXBjb3JlLTE5OQogICAgMjAwOiAnT0snLAogICAgMjAyOiAnQWNjZXB0ZWQnLCAgLy8gUkZDIDMyNjUKICAgIDIwNDogJ05vIE5vdGlmaWNhdGlvbicsICAvL1JGQyA1ODM5CiAgICAzMDA6ICdNdWx0aXBsZSBDaG9pY2VzJywKICAgIDMwMTogJ01vdmVkIFBlcm1hbmVudGx5JywKICAgIDMwMjogJ01vdmVkIFRlbXBvcmFyaWx5JywKICAgIDMwNTogJ1VzZSBQcm94eScsCiAgICAzODA6ICdBbHRlcm5hdGl2ZSBTZXJ2aWNlJywKICAgIDQwMDogJ0JhZCBSZXF1ZXN0JywKICAgIDQwMTogJ1VuYXV0aG9yaXplZCcsCiAgICA0MDI6ICdQYXltZW50IFJlcXVpcmVkJywKICAgIDQwMzogJ0ZvcmJpZGRlbicsCiAgICA0MDQ6ICdOb3QgRm91bmQnLAogICAgNDA1OiAnTWV0aG9kIE5vdCBBbGxvd2VkJywKICAgIDQwNjogJ05vdCBBY2NlcHRhYmxlJywKICAgIDQwNzogJ1Byb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkJywKICAgIDQwODogJ1JlcXVlc3QgVGltZW91dCcsCiAgICA0MTA6ICdHb25lJywKICAgIDQxMjogJ0NvbmRpdGlvbmFsIFJlcXVlc3QgRmFpbGVkJywgIC8vIFJGQyAzOTAzCiAgICA0MTM6ICdSZXF1ZXN0IEVudGl0eSBUb28gTGFyZ2UnLAogICAgNDE0OiAnUmVxdWVzdC1VUkkgVG9vIExvbmcnLAogICAgNDE1OiAnVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZScsCiAgICA0MTY6ICdVbnN1cHBvcnRlZCBVUkkgU2NoZW1lJywKICAgIDQxNzogJ1Vua25vd24gUmVzb3VyY2UtUHJpb3JpdHknLCAgLy8gUkZDIDQ0MTIKICAgIDQyMDogJ0JhZCBFeHRlbnNpb24nLAogICAgNDIxOiAnRXh0ZW5zaW9uIFJlcXVpcmVkJywKICAgIDQyMjogJ1Nlc3Npb24gSW50ZXJ2YWwgVG9vIFNtYWxsJywgIC8vIFJGQyA0MDI4CiAgICA0MjM6ICdJbnRlcnZhbCBUb28gQnJpZWYnLAogICAgNDI4OiAnVXNlIElkZW50aXR5IEhlYWRlcicsICAvLyBSRkMgNDQ3NAogICAgNDI5OiAnUHJvdmlkZSBSZWZlcnJlciBJZGVudGl0eScsICAvLyBSRkMgMzg5MgogICAgNDMwOiAnRmxvdyBGYWlsZWQnLCAgLy8gUkZDIDU2MjYKICAgIDQzMzogJ0Fub255bWl0eSBEaXNhbGxvd2VkJywgIC8vIFJGQyA1MDc5CiAgICA0MzY6ICdCYWQgSWRlbnRpdHktSW5mbycsICAvLyBSRkMgNDQ3NAogICAgNDM3OiAnVW5zdXBwb3J0ZWQgQ2VydGlmaWNhdGUnLCAgLy8gUkZDIDQ3NDQKICAgIDQzODogJ0ludmFsaWQgSWRlbnRpdHkgSGVhZGVyJywgIC8vIFJGQyA0NzQ0CiAgICA0Mzk6ICdGaXJzdCBIb3AgTGFja3MgT3V0Ym91bmQgU3VwcG9ydCcsICAvLyBSRkMgNTYyNgogICAgNDQwOiAnTWF4LUJyZWFkdGggRXhjZWVkZWQnLCAgLy8gUkZDIDUzOTMKICAgIDQ2OTogJ0JhZCBJbmZvIFBhY2thZ2UnLCAgLy8gZHJhZnQtaWV0Zi1zaXBjb3JlLWluZm8tZXZlbnRzCiAgICA0NzA6ICdDb25zZW50IE5lZWRlZCcsICAvLyBSRkMgNTM2MAogICAgNDc4OiAnVW5yZXNvbHZhYmxlIERlc3RpbmF0aW9uJywgIC8vIEN1c3RvbSBjb2RlIGNvcGllZCBmcm9tIEthbWFpbGlvLgogICAgNDgwOiAnVGVtcG9yYXJpbHkgVW5hdmFpbGFibGUnLAogICAgNDgxOiAnQ2FsbC9UcmFuc2FjdGlvbiBEb2VzIE5vdCBFeGlzdCcsCiAgICA0ODI6ICdMb29wIERldGVjdGVkJywKICAgIDQ4MzogJ1RvbyBNYW55IEhvcHMnLAogICAgNDg0OiAnQWRkcmVzcyBJbmNvbXBsZXRlJywKICAgIDQ4NTogJ0FtYmlndW91cycsCiAgICA0ODY6ICdCdXN5IEhlcmUnLAogICAgNDg3OiAnUmVxdWVzdCBUZXJtaW5hdGVkJywKICAgIDQ4ODogJ05vdCBBY2NlcHRhYmxlIEhlcmUnLAogICAgNDg5OiAnQmFkIEV2ZW50JywgIC8vIFJGQyAzMjY1CiAgICA0OTE6ICdSZXF1ZXN0IFBlbmRpbmcnLAogICAgNDkzOiAnVW5kZWNpcGhlcmFibGUnLAogICAgNDk0OiAnU2VjdXJpdHkgQWdyZWVtZW50IFJlcXVpcmVkJywgIC8vIFJGQyAzMzI5CiAgICA1MDA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InLAogICAgNTAxOiAnTm90IEltcGxlbWVudGVkJywKICAgIDUwMjogJ0JhZCBHYXRld2F5JywKICAgIDUwMzogJ1NlcnZpY2UgVW5hdmFpbGFibGUnLAogICAgNTA0OiAnU2VydmVyIFRpbWUtb3V0JywKICAgIDUwNTogJ1ZlcnNpb24gTm90IFN1cHBvcnRlZCcsCiAgICA1MTM6ICdNZXNzYWdlIFRvbyBMYXJnZScsCiAgICA1ODA6ICdQcmVjb25kaXRpb24gRmFpbHVyZScsICAvLyBSRkMgMzMxMgogICAgNjAwOiAnQnVzeSBFdmVyeXdoZXJlJywKICAgIDYwMzogJ0RlY2xpbmUnLAogICAgNjA0OiAnRG9lcyBOb3QgRXhpc3QgQW55d2hlcmUnLAogICAgNjA2OiAnTm90IEFjY2VwdGFibGUnCiAgfSwKCiAgLyogU0lQIE9wdGlvbiBUYWdzCiAgICogRE9DOiBodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL3NpcC1wYXJhbWV0ZXJzL3NpcC1wYXJhbWV0ZXJzLnhodG1sI3NpcC1wYXJhbWV0ZXJzLTQKICAgKi8KICBPUFRJT05fVEFHUzogewogICAgJzEwMHJlbCc6ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzI2MgogICAgMTk5OiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNjIyOAogICAgYW5zd2VybW9kZTogICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTM3MwogICAgJ2Vhcmx5LXNlc3Npb24nOiAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzk1OQogICAgZXZlbnRsaXN0OiAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDY2MgogICAgZXhwbGljaXRzdWI6ICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMtaWV0Zi1zaXBjb3JlLXJlZmVyLWV4cGxpY2l0LXN1YnNjcmlwdGlvbi0wMwogICAgJ2Zyb20tY2hhbmdlJzogICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDkxNgogICAgJ2dlb2xvY2F0aW9uLWh0dHAnOiAgICAgICAgIHRydWUsICAvLyBSRkMgNjQ0MgogICAgJ2dlb2xvY2F0aW9uLXNpcCc6ICAgICAgICAgIHRydWUsICAvLyBSRkMgNjQ0MgogICAgZ2luOiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNjE0MAogICAgZ3J1dTogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTYyNwogICAgaGlzdGluZm86ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNzA0NAogICAgaWNlOiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTc2OAogICAgam9pbjogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzkxMQogICAgJ211bHRpcGxlLXJlZmVyJzogICAgICAgICAgIHRydWUsICAvLyBSRkMgNTM2OAogICAgbm9yZWZlcnN1YjogICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDQ4OAogICAgbm9zdWI6ICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMtaWV0Zi1zaXBjb3JlLXJlZmVyLWV4cGxpY2l0LXN1YnNjcmlwdGlvbi0wMwogICAgb3V0Ym91bmQ6ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTYyNgogICAgcGF0aDogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMyNwogICAgcG9saWN5OiAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNjc5NAogICAgcHJlY29uZGl0aW9uOiAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMxMgogICAgcHJlZjogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzg0MAogICAgcHJpdmFjeTogICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMyMwogICAgJ3JlY2lwaWVudC1saXN0LWludml0ZSc6ICAgIHRydWUsICAvLyBSRkMgNTM2NgogICAgJ3JlY2lwaWVudC1saXN0LW1lc3NhZ2UnOiAgIHRydWUsICAvLyBSRkMgNTM2NQogICAgJ3JlY2lwaWVudC1saXN0LXN1YnNjcmliZSc6IHRydWUsICAvLyBSRkMgNTM2NwogICAgcmVwbGFjZXM6ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzg5MQogICAgJ3Jlc291cmNlLXByaW9yaXR5JzogICAgICAgIHRydWUsICAvLyBSRkMgNDQxMgogICAgJ3NkcC1hbmF0JzogICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDA5MgogICAgJ3NlYy1hZ3JlZSc6ICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMyOQogICAgdGRpYWxvZzogICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDUzOAogICAgdGltZXI6ICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDAyOAogICAgdXVpOiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUgICAvLyBSRkMgNzQzMwogIH0KfTsKfTsKCn0se31dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgovKioKICogQGZpbGVvdmVydmlldyBJbi1EaWFsb2cgUmVxdWVzdCBTZW5kZXIKICovCgovKioKICogQGF1Z21lbnRzIFNJUC5EaWFsb2cKICogQGNsYXNzIENsYXNzIGNyZWF0aW5nIGFuIEluLWRpYWxvZyByZXF1ZXN0IHNlbmRlci4KICogQHBhcmFtIHtTSVAuRGlhbG9nfSBkaWFsb2cKICogQHBhcmFtIHtPYmplY3R9IGFwcGxpY2FudAogKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKICovCi8qKgogKiBAZmlsZW92ZXJ2aWV3IGluLURpYWxvZyBSZXF1ZXN0IFNlbmRlcgogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewp2YXIgUmVxdWVzdFNlbmRlcjsKClJlcXVlc3RTZW5kZXIgPSBmdW5jdGlvbihkaWFsb2csIGFwcGxpY2FudCwgcmVxdWVzdCkgewoKICB0aGlzLmRpYWxvZyA9IGRpYWxvZzsKICB0aGlzLmFwcGxpY2FudCA9IGFwcGxpY2FudDsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwoKICAvLyBSRkMzMjYxIDE0LjEgTW9kaWZ5aW5nIGFuIEV4aXN0aW5nIFNlc3Npb24uIFVBQyBCZWhhdmlvci4KICB0aGlzLnJlYXR0ZW1wdCA9IGZhbHNlOwogIHRoaXMucmVhdHRlbXB0VGltZXIgPSBudWxsOwp9OwoKUmVxdWVzdFNlbmRlci5wcm90b3R5cGUgPSB7CiAgc2VuZDogZnVuY3Rpb24oKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgIHJlcXVlc3Rfc2VuZGVyID0gbmV3IFNJUC5SZXF1ZXN0U2VuZGVyKHRoaXMsIHRoaXMuZGlhbG9nLm93bmVyLnVhKTsKCiAgICAgIHJlcXVlc3Rfc2VuZGVyLnNlbmQoKTsKCiAgICAvLyBSRkMzMjYxIDE0LjIgTW9kaWZ5aW5nIGFuIEV4aXN0aW5nIFNlc3Npb24gLVVBQyBCRUhBVklPUi0KICAgIGlmICh0aGlzLnJlcXVlc3QubWV0aG9kID09PSBTSVAuQy5JTlZJVEUgJiYgcmVxdWVzdF9zZW5kZXIuY2xpZW50VHJhbnNhY3Rpb24uc3RhdGUgIT09IFNJUC5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmRpYWxvZy51YWNfcGVuZGluZ19yZXBseSA9IHRydWU7CiAgICAgIHJlcXVlc3Rfc2VuZGVyLmNsaWVudFRyYW5zYWN0aW9uLm9uKCdzdGF0ZUNoYW5nZWQnLCBmdW5jdGlvbiBzdGF0ZUNoYW5nZWQoKXsKICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU0lQLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19BQ0NFUFRFRCB8fAogICAgICAgICAgICB0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX0NPTVBMRVRFRCB8fAogICAgICAgICAgICB0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQpIHsKCiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdzdGF0ZUNoYW5nZWQnLCBzdGF0ZUNoYW5nZWQpOwogICAgICAgICAgc2VsZi5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHkgPSBmYWxzZTsKCiAgICAgICAgICBpZiAoc2VsZi5kaWFsb2cudWFzX3BlbmRpbmdfcmVwbHkgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHNlbGYuZGlhbG9nLm93bmVyLm9uUmVhZHlUb1JlaW52aXRlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAoKICBvblJlcXVlc3RUaW1lb3V0OiBmdW5jdGlvbigpIHsKICAgIHRoaXMuYXBwbGljYW50Lm9uUmVxdWVzdFRpbWVvdXQoKTsKICB9LAoKICBvblRyYW5zcG9ydEVycm9yOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuYXBwbGljYW50Lm9uVHJhbnNwb3J0RXJyb3IoKTsKICB9LAoKICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgLy8gUkZDMzI2MSAxMi4yLjEuMiA0MDggb3IgNDgxIGlzIHJlY2VpdmVkIGZvciBhIHJlcXVlc3Qgd2l0aGluIGEgZGlhbG9nLgogICAgaWYgKHJlc3BvbnNlLnN0YXR1c19jb2RlID09PSA0MDggfHwgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT09IDQ4MSkgewogICAgICB0aGlzLmFwcGxpY2FudC5vbkRpYWxvZ0Vycm9yKHJlc3BvbnNlKTsKICAgIH0gZWxzZSBpZiAocmVzcG9uc2UubWV0aG9kID09PSBTSVAuQy5JTlZJVEUgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT09IDQ5MSkgewogICAgICBpZiAodGhpcy5yZWF0dGVtcHQpIHsKICAgICAgICB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVxdWVzdC5jc2VxLnZhbHVlID0gdGhpcy5kaWFsb2cubG9jYWxfc2VxbnVtICs9IDE7CiAgICAgICAgdGhpcy5yZWF0dGVtcHRUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCgKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoc2VsZi5hcHBsaWNhbnQub3duZXIuc3RhdHVzICE9PSBTSVAuU2Vzc2lvbi5DLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICAgICAgc2VsZi5yZWF0dGVtcHQgPSB0cnVlOwogICAgICAgICAgICAgIHNlbGYucmVxdWVzdF9zZW5kZXIuc2VuZCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgdGhpcy5nZXRSZWF0dGVtcHRUaW1lb3V0KCkKICAgICAgICApOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpOwogICAgfQogIH0KfTsKCnJldHVybiBSZXF1ZXN0U2VuZGVyOwp9OwoKfSx7fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAZmlsZW92ZXJ2aWV3IFNJUCBEaWFsb2cKICovCgovKioKICogQGF1Z21lbnRzIFNJUAogKiBAY2xhc3MgQ2xhc3MgY3JlYXRpbmcgYSBTSVAgZGlhbG9nLgogKiBAcGFyYW0ge1NJUC5SVENTZXNzaW9ufSBvd25lcgogKiBAcGFyYW0ge1NJUC5JbmNvbWluZ1JlcXVlc3R8U0lQLkluY29taW5nUmVzcG9uc2V9IG1lc3NhZ2UKICogQHBhcmFtIHtFbnVtfSB0eXBlIFVBQyAvIFVBUwogKiBAcGFyYW0ge0VudW19IHN0YXRlIFNJUC5EaWFsb2cuQy5TVEFUVVNfRUFSTFkgLyBTSVAuRGlhbG9nLkMuU1RBVFVTX0NPTkZJUk1FRAogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7Cgp2YXIgUmVxdWVzdFNlbmRlciA9IHJlcXVpcmUoJy4vRGlhbG9nL1JlcXVlc3RTZW5kZXInKShTSVApOwoKdmFyIERpYWxvZywKICBDID0gewogICAgLy8gRGlhbG9nIHN0YXRlcwogICAgU1RBVFVTX0VBUkxZOiAgICAgICAxLAogICAgU1RBVFVTX0NPTkZJUk1FRDogICAyCiAgfTsKCi8vIFJGQyAzMjYxIDEyLjEKRGlhbG9nID0gZnVuY3Rpb24ob3duZXIsIG1lc3NhZ2UsIHR5cGUsIHN0YXRlKSB7CiAgdmFyIGNvbnRhY3Q7CgogIHRoaXMudWFjX3BlbmRpbmdfcmVwbHkgPSBmYWxzZTsKICB0aGlzLnVhc19wZW5kaW5nX3JlcGx5ID0gZmFsc2U7CgogIGlmKCFtZXNzYWdlLmhhc0hlYWRlcignY29udGFjdCcpKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcjogJ3VuYWJsZSB0byBjcmVhdGUgYSBEaWFsb2cgd2l0aG91dCBDb250YWN0IGhlYWRlciBmaWVsZCcKICAgIH07CiAgfQoKICBpZihtZXNzYWdlIGluc3RhbmNlb2YgU0lQLkluY29taW5nUmVzcG9uc2UpIHsKICAgIHN0YXRlID0gKG1lc3NhZ2Uuc3RhdHVzX2NvZGUgPCAyMDApID8gQy5TVEFUVVNfRUFSTFkgOiBDLlNUQVRVU19DT05GSVJNRUQ7CiAgfSBlbHNlIHsKICAgIC8vIENyZWF0ZSBjb25maXJtZWQgZGlhbG9nIGlmIHN0YXRlIGlzIG5vdCBkZWZpbmVkCiAgICBzdGF0ZSA9IHN0YXRlIHx8IEMuU1RBVFVTX0NPTkZJUk1FRDsKICB9CgogIGNvbnRhY3QgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCdjb250YWN0Jyk7CgogIC8vIFJGQyAzMjYxIDEyLjEuMQogIGlmKHR5cGUgPT09ICdVQVMnKSB7CiAgICB0aGlzLmlkID0gewogICAgICBjYWxsX2lkOiBtZXNzYWdlLmNhbGxfaWQsCiAgICAgIGxvY2FsX3RhZzogbWVzc2FnZS50b190YWcsCiAgICAgIHJlbW90ZV90YWc6IG1lc3NhZ2UuZnJvbV90YWcsCiAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5jYWxsX2lkICsgdGhpcy5sb2NhbF90YWcgKyB0aGlzLnJlbW90ZV90YWc7CiAgICAgIH0KICAgIH07CiAgICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgICB0aGlzLnJlbW90ZV9zZXFudW0gPSBtZXNzYWdlLmNzZXE7CiAgICB0aGlzLmxvY2FsX3VyaSA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ3RvJykudXJpOwogICAgdGhpcy5yZW1vdGVfdXJpID0gbWVzc2FnZS5wYXJzZUhlYWRlcignZnJvbScpLnVyaTsKICAgIHRoaXMucmVtb3RlX3RhcmdldCA9IGNvbnRhY3QudXJpOwogICAgdGhpcy5yb3V0ZV9zZXQgPSBtZXNzYWdlLmdldEhlYWRlcnMoJ3JlY29yZC1yb3V0ZScpOwogICAgdGhpcy5pbnZpdGVfc2VxbnVtID0gbWVzc2FnZS5jc2VxOwogICAgdGhpcy5sb2NhbF9zZXFudW0gPSBtZXNzYWdlLmNzZXE7CiAgfQogIC8vIFJGQyAzMjYxIDEyLjEuMgogIGVsc2UgaWYodHlwZSA9PT0gJ1VBQycpIHsKICAgIHRoaXMuaWQgPSB7CiAgICAgIGNhbGxfaWQ6IG1lc3NhZ2UuY2FsbF9pZCwKICAgICAgbG9jYWxfdGFnOiBtZXNzYWdlLmZyb21fdGFnLAogICAgICByZW1vdGVfdGFnOiBtZXNzYWdlLnRvX3RhZywKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmNhbGxfaWQgKyB0aGlzLmxvY2FsX3RhZyArIHRoaXMucmVtb3RlX3RhZzsKICAgICAgfQogICAgfTsKICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICAgIHRoaXMuaW52aXRlX3NlcW51bSA9IG1lc3NhZ2UuY3NlcTsKICAgIHRoaXMubG9jYWxfc2VxbnVtID0gbWVzc2FnZS5jc2VxOwogICAgdGhpcy5sb2NhbF91cmkgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCdmcm9tJykudXJpOwogICAgdGhpcy5wcmFja2VkID0gW107CiAgICB0aGlzLnJlbW90ZV91cmkgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCd0bycpLnVyaTsKICAgIHRoaXMucmVtb3RlX3RhcmdldCA9IGNvbnRhY3QudXJpOwogICAgdGhpcy5yb3V0ZV9zZXQgPSBtZXNzYWdlLmdldEhlYWRlcnMoJ3JlY29yZC1yb3V0ZScpLnJldmVyc2UoKTsKCiAgICAvL1JFTkRFUkJPRFkKICAgIGlmICh0aGlzLnN0YXRlID09PSBDLlNUQVRVU19FQVJMWSAmJiAoIW93bmVyLmhhc09mZmVyKSkgewogICAgICB0aGlzLm1lZGlhSGFuZGxlciA9IG93bmVyLm1lZGlhSGFuZGxlckZhY3Rvcnkob3duZXIpOwogICAgfQogIH0KCiAgdGhpcy5sb2dnZXIgPSBvd25lci51YS5nZXRMb2dnZXIoJ3NpcC5kaWFsb2cnLCB0aGlzLmlkLnRvU3RyaW5nKCkpOwogIHRoaXMub3duZXIgPSBvd25lcjsKICBvd25lci51YS5kaWFsb2dzW3RoaXMuaWQudG9TdHJpbmcoKV0gPSB0aGlzOwogIHRoaXMubG9nZ2VyLmxvZygnbmV3ICcgKyB0eXBlICsgJyBkaWFsb2cgY3JlYXRlZCB3aXRoIHN0YXR1cyAnICsgKHRoaXMuc3RhdGUgPT09IEMuU1RBVFVTX0VBUkxZID8gJ0VBUkxZJzogJ0NPTkZJUk1FRCcpKTsKICBvd25lci5lbWl0KCdkaWFsb2cnLCB0aGlzKTsKfTsKCkRpYWxvZy5wcm90b3R5cGUgPSB7CiAgLyoqCiAgICogQHBhcmFtIHtTSVAuSW5jb21pbmdNZXNzYWdlfSBtZXNzYWdlCiAgICogQHBhcmFtIHtFbnVtfSBVQUMvVUFTCiAgICovCiAgdXBkYXRlOiBmdW5jdGlvbihtZXNzYWdlLCB0eXBlKSB7CiAgICB0aGlzLnN0YXRlID0gQy5TVEFUVVNfQ09ORklSTUVEOwoKICAgIHRoaXMubG9nZ2VyLmxvZygnZGlhbG9nICcrIHRoaXMuaWQudG9TdHJpbmcoKSArJyAgY2hhbmdlZCB0byBDT05GSVJNRUQgc3RhdGUnKTsKCiAgICBpZih0eXBlID09PSAnVUFDJykgewogICAgICAvLyBSRkMgMzI2MSAxMy4yLjIuNAogICAgICB0aGlzLnJvdXRlX3NldCA9IG1lc3NhZ2UuZ2V0SGVhZGVycygncmVjb3JkLXJvdXRlJykucmV2ZXJzZSgpOwogICAgfQogIH0sCgogIHRlcm1pbmF0ZTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmxvZ2dlci5sb2coJ2RpYWxvZyAnICsgdGhpcy5pZC50b1N0cmluZygpICsgJyBkZWxldGVkJyk7CiAgICBpZiAodGhpcy5tZWRpYUhhbmRsZXIgJiYgdGhpcy5zdGF0ZSAhPT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnBlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICB9CiAgICBkZWxldGUgdGhpcy5vd25lci51YS5kaWFsb2dzW3RoaXMuaWQudG9TdHJpbmcoKV07CiAgfSwKCiAgLyoqCiAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIHJlcXVlc3QgbWV0aG9kCiAgKiBAcGFyYW0ge09iamVjdH0gZXh0cmFIZWFkZXJzIGV4dHJhIGhlYWRlcnMKICAqIEByZXR1cm5zIHtTSVAuT3V0Z29pbmdSZXF1ZXN0fQogICovCgogIC8vIFJGQyAzMjYxIDEyLjIuMS4xCiAgY3JlYXRlUmVxdWVzdDogZnVuY3Rpb24obWV0aG9kLCBleHRyYUhlYWRlcnMsIGJvZHkpIHsKICAgIHZhciBjc2VxLCByZXF1ZXN0OwogICAgZXh0cmFIZWFkZXJzID0gKGV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKCiAgICBpZighdGhpcy5sb2NhbF9zZXFudW0pIHsgdGhpcy5sb2NhbF9zZXFudW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7IH0KCiAgICBjc2VxID0gKG1ldGhvZCA9PT0gU0lQLkMuQ0FOQ0VMIHx8IG1ldGhvZCA9PT0gU0lQLkMuQUNLKSA/IHRoaXMuaW52aXRlX3NlcW51bSA6IHRoaXMubG9jYWxfc2VxbnVtICs9IDE7CgogICAgcmVxdWVzdCA9IG5ldyBTSVAuT3V0Z29pbmdSZXF1ZXN0KAogICAgICBtZXRob2QsCiAgICAgIHRoaXMucmVtb3RlX3RhcmdldCwKICAgICAgdGhpcy5vd25lci51YSwgewogICAgICAgICdjc2VxJzogY3NlcSwKICAgICAgICAnY2FsbF9pZCc6IHRoaXMuaWQuY2FsbF9pZCwKICAgICAgICAnZnJvbV91cmknOiB0aGlzLmxvY2FsX3VyaSwKICAgICAgICAnZnJvbV90YWcnOiB0aGlzLmlkLmxvY2FsX3RhZywKICAgICAgICAndG9fdXJpJzogdGhpcy5yZW1vdGVfdXJpLAogICAgICAgICd0b190YWcnOiB0aGlzLmlkLnJlbW90ZV90YWcsCiAgICAgICAgJ3JvdXRlX3NldCc6IHRoaXMucm91dGVfc2V0CiAgICAgIH0sIGV4dHJhSGVhZGVycywgYm9keSk7CgogICAgcmVxdWVzdC5kaWFsb2cgPSB0aGlzOwoKICAgIHJldHVybiByZXF1ZXN0OwogIH0sCgogIC8qKgogICogQHBhcmFtIHtTSVAuSW5jb21pbmdSZXF1ZXN0fSByZXF1ZXN0CiAgKiBAcmV0dXJucyB7Qm9vbGVhbn0KICAqLwoKICAvLyBSRkMgMzI2MSAxMi4yLjIKICBjaGVja0luRGlhbG9nUmVxdWVzdDogZnVuY3Rpb24ocmVxdWVzdCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIGlmKCF0aGlzLnJlbW90ZV9zZXFudW0pIHsKICAgICAgdGhpcy5yZW1vdGVfc2VxbnVtID0gcmVxdWVzdC5jc2VxOwogICAgfSBlbHNlIGlmKHJlcXVlc3QuY3NlcSA8IHRoaXMucmVtb3RlX3NlcW51bSkgewogICAgICAgIC8vRG8gbm90IHRyeSB0byByZXBseSB0byBhbiBBQ0sgcmVxdWVzdC4KICAgICAgICBpZiAocmVxdWVzdC5tZXRob2QgIT09IFNJUC5DLkFDSykgewogICAgICAgICAgcmVxdWVzdC5yZXBseSg1MDApOwogICAgICAgIH0KICAgICAgICBpZiAocmVxdWVzdC5jc2VxID09PSB0aGlzLmludml0ZV9zZXFudW0pIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGVsc2UgaWYocmVxdWVzdC5jc2VxID4gdGhpcy5yZW1vdGVfc2VxbnVtKSB7CiAgICAgIHRoaXMucmVtb3RlX3NlcW51bSA9IHJlcXVlc3QuY3NlcTsKICAgIH0KCiAgICBzd2l0Y2gocmVxdWVzdC5tZXRob2QpIHsKICAgICAgLy8gUkZDMzI2MSAxNC4yIE1vZGlmeWluZyBhbiBFeGlzdGluZyBTZXNzaW9uIC1VQVMgQkVIQVZJT1ItCiAgICAgIGNhc2UgU0lQLkMuSU5WSVRFOgogICAgICAgIGlmICh0aGlzLnVhY19wZW5kaW5nX3JlcGx5ID09PSB0cnVlKSB7CiAgICAgICAgICByZXF1ZXN0LnJlcGx5KDQ5MSk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnVhc19wZW5kaW5nX3JlcGx5ID09PSB0cnVlKSB7CiAgICAgICAgICB2YXIgcmV0cnlBZnRlciA9IChNYXRoLnJhbmRvbSgpICogMTAgfCAwKSArIDE7CiAgICAgICAgICByZXF1ZXN0LnJlcGx5KDUwMCwgbnVsbCwgWydSZXRyeS1BZnRlcjonICsgcmV0cnlBZnRlcl0pOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnVhc19wZW5kaW5nX3JlcGx5ID0gdHJ1ZTsKICAgICAgICAgIHJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLm9uKCdzdGF0ZUNoYW5nZWQnLCBmdW5jdGlvbiBzdGF0ZUNoYW5nZWQoKXsKICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNJUC5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQUNDRVBURUQgfHwKICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPT09IFNJUC5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQ09NUExFVEVEIHx8CiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQpIHsKCiAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcignc3RhdGVDaGFuZ2VkJywgc3RhdGVDaGFuZ2VkKTsKICAgICAgICAgICAgICBzZWxmLnVhc19wZW5kaW5nX3JlcGx5ID0gZmFsc2U7CgogICAgICAgICAgICAgIGlmIChzZWxmLnVhY19wZW5kaW5nX3JlcGx5ID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgc2VsZi5vd25lci5vblJlYWR5VG9SZWludml0ZSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBSRkMzMjYxIDEyLjIuMiBSZXBsYWNlIHRoZSBkaWFsb2dgcyByZW1vdGUgdGFyZ2V0IFVSSSBpZiB0aGUgcmVxdWVzdCBpcyBhY2NlcHRlZAogICAgICAgIGlmKHJlcXVlc3QuaGFzSGVhZGVyKCdjb250YWN0JykpIHsKICAgICAgICAgIHJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLm9uKCdzdGF0ZUNoYW5nZWQnLCBmdW5jdGlvbigpewogICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU0lQLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19BQ0NFUFRFRCkgewogICAgICAgICAgICAgIHNlbGYucmVtb3RlX3RhcmdldCA9IHJlcXVlc3QucGFyc2VIZWFkZXIoJ2NvbnRhY3QnKS51cmk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBTSVAuQy5OT1RJRlk6CiAgICAgICAgLy8gUkZDNjY2NSAzLjIgUmVwbGFjZSB0aGUgZGlhbG9nYHMgcmVtb3RlIHRhcmdldCBVUkkgaWYgdGhlIHJlcXVlc3QgaXMgYWNjZXB0ZWQKICAgICAgICBpZihyZXF1ZXN0Lmhhc0hlYWRlcignY29udGFjdCcpKSB7CiAgICAgICAgICByZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbi5vbignc3RhdGVDaGFuZ2VkJywgZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNJUC5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQ09NUExFVEVEKSB7CiAgICAgICAgICAgICAgc2VsZi5yZW1vdGVfdGFyZ2V0ID0gcmVxdWVzdC5wYXJzZUhlYWRlcignY29udGFjdCcpLnVyaTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0sCgogIHNlbmRSZXF1ZXN0OiBmdW5jdGlvbihhcHBsaWNhbnQsIG1ldGhvZCwgb3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogICAgdmFyCiAgICAgIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKSwKICAgICAgYm9keSA9IG9wdGlvbnMuYm9keSB8fCBudWxsLAogICAgICByZXF1ZXN0ID0gdGhpcy5jcmVhdGVSZXF1ZXN0KG1ldGhvZCwgZXh0cmFIZWFkZXJzLCBib2R5KSwKICAgICAgcmVxdWVzdF9zZW5kZXIgPSBuZXcgUmVxdWVzdFNlbmRlcih0aGlzLCBhcHBsaWNhbnQsIHJlcXVlc3QpOwoKICAgIHJlcXVlc3Rfc2VuZGVyLnNlbmQoKTsKCiAgICByZXR1cm4gcmVxdWVzdDsKICB9LAoKICAvKioKICAqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdAogICovCiAgcmVjZWl2ZVJlcXVlc3Q6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIC8vQ2hlY2sgaW4tZGlhbG9nIHJlcXVlc3QKICAgIGlmKCF0aGlzLmNoZWNrSW5EaWFsb2dSZXF1ZXN0KHJlcXVlc3QpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLm93bmVyLnJlY2VpdmVSZXF1ZXN0KHJlcXVlc3QpOwogIH0KfTsKCkRpYWxvZy5DID0gQzsKU0lQLkRpYWxvZyA9IERpYWxvZzsKfTsKCn0seyIuL0RpYWxvZy9SZXF1ZXN0U2VuZGVyIjo5fV0sMTE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgovKioKICogQGZpbGVvdmVydmlldyBTSVAgRGlnZXN0IEF1dGhlbnRpY2F0aW9uCiAqLwoKLyoqCiAqIFNJUCBEaWdlc3QgQXV0aGVudGljYXRpb24uCiAqIEBhdWdtZW50cyBTSVAuCiAqIEBmdW5jdGlvbiBEaWdlc3QgQXV0aGVudGljYXRpb24KICogQHBhcmFtIHtTSVAuVUF9IHVhCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChVdGlscykgewp2YXIgRGlnZXN0QXV0aGVudGljYXRpb247CgpEaWdlc3RBdXRoZW50aWNhdGlvbiA9IGZ1bmN0aW9uKHVhKSB7CiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcGpzLmRpZ2VzdGF1dGhlbnRpY2F0aW9uJyk7CiAgdGhpcy51c2VybmFtZSA9IHVhLmNvbmZpZ3VyYXRpb24uYXV0aG9yaXphdGlvblVzZXI7CiAgdGhpcy5wYXNzd29yZCA9IHVhLmNvbmZpZ3VyYXRpb24ucGFzc3dvcmQ7CiAgdGhpcy5jbm9uY2UgPSBudWxsOwogIHRoaXMubmMgPSAwOwogIHRoaXMubmNIZXggPSAnMDAwMDAwMDAnOwogIHRoaXMucmVzcG9uc2UgPSBudWxsOwp9OwoKCi8qKgoqIFBlcmZvcm1zIERpZ2VzdCBhdXRoZW50aWNhdGlvbiBnaXZlbiBhIFNJUCByZXF1ZXN0IGFuZCB0aGUgY2hhbGxlbmdlCiogcmVjZWl2ZWQgaW4gYSByZXNwb25zZSB0byB0aGF0IHJlcXVlc3QuCiogUmV0dXJucyB0cnVlIGlmIGNyZWRlbnRpYWxzIHdlcmUgc3VjY2Vzc2Z1bGx5IGdlbmVyYXRlZCwgZmFsc2Ugb3RoZXJ3aXNlLgoqCiogQHBhcmFtIHtTSVAuT3V0Z29pbmdSZXF1ZXN0fSByZXF1ZXN0CiogQHBhcmFtIHtPYmplY3R9IGNoYWxsZW5nZQoqLwpEaWdlc3RBdXRoZW50aWNhdGlvbi5wcm90b3R5cGUuYXV0aGVudGljYXRlID0gZnVuY3Rpb24ocmVxdWVzdCwgY2hhbGxlbmdlKSB7CiAgLy8gSW5zcGVjdCBhbmQgdmFsaWRhdGUgdGhlIGNoYWxsZW5nZS4KCiAgdGhpcy5hbGdvcml0aG0gPSBjaGFsbGVuZ2UuYWxnb3JpdGhtOwogIHRoaXMucmVhbG0gPSBjaGFsbGVuZ2UucmVhbG07CiAgdGhpcy5ub25jZSA9IGNoYWxsZW5nZS5ub25jZTsKICB0aGlzLm9wYXF1ZSA9IGNoYWxsZW5nZS5vcGFxdWU7CiAgdGhpcy5zdGFsZSA9IGNoYWxsZW5nZS5zdGFsZTsKCiAgaWYgKHRoaXMuYWxnb3JpdGhtKSB7CiAgICBpZiAodGhpcy5hbGdvcml0aG0gIT09ICdNRDUnKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2NoYWxsZW5nZSB3aXRoIERpZ2VzdCBhbGdvcml0aG0gZGlmZmVyZW50IHRoYW4gIk1ENSIsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQnKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0gZWxzZSB7CiAgICB0aGlzLmFsZ29yaXRobSA9ICdNRDUnOwogIH0KCiAgaWYgKCEgdGhpcy5yZWFsbSkgewogICAgdGhpcy5sb2dnZXIud2FybignY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IHJlYWxtLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkJyk7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoISB0aGlzLm5vbmNlKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCdjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3Qgbm9uY2UsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQnKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8vICdxb3AnIGNhbiBjb250YWluIGEgbGlzdCBvZiB2YWx1ZXMgKEFycmF5KS4gTGV0J3MgY2hvb3NlIGp1c3Qgb25lLgogIGlmIChjaGFsbGVuZ2UucW9wKSB7CiAgICBpZiAoY2hhbGxlbmdlLnFvcC5pbmRleE9mKCdhdXRoJykgPiAtMSkgewogICAgICB0aGlzLnFvcCA9ICdhdXRoJzsKICAgIH0gZWxzZSBpZiAoY2hhbGxlbmdlLnFvcC5pbmRleE9mKCdhdXRoLWludCcpID4gLTEpIHsKICAgICAgdGhpcy5xb3AgPSAnYXV0aC1pbnQnOwogICAgfSBlbHNlIHsKICAgICAgLy8gT3RoZXJ3aXNlICdxb3AnIGlzIHByZXNlbnQgYnV0IGRvZXMgbm90IGNvbnRhaW4gJ2F1dGgnIG9yICdhdXRoLWludCcsIHNvIGFib3J0IGhlcmUuCiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2NoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCBxb3AgZGlmZmVyZW50IHRoYW4gImF1dGgiIG9yICJhdXRoLWludCIsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQnKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0gZWxzZSB7CiAgICB0aGlzLnFvcCA9IG51bGw7CiAgfQoKICAvLyBGaWxsIG90aGVyIGF0dHJpYnV0ZXMuCgogIHRoaXMubWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7CiAgdGhpcy51cmkgPSByZXF1ZXN0LnJ1cmk7CiAgdGhpcy5jbm9uY2UgPSBVdGlscy5jcmVhdGVSYW5kb21Ub2tlbigxMik7CiAgdGhpcy5uYyArPSAxOwogIHRoaXMudXBkYXRlTmNIZXgoKTsKCiAgLy8gbmMtdmFsdWUgPSA4TEhFWC4gTWF4IHZhbHVlID0gJ0ZGRkZGRkZGJy4KICBpZiAodGhpcy5uYyA9PT0gNDI5NDk2NzI5NikgewogICAgdGhpcy5uYyA9IDE7CiAgICB0aGlzLm5jSGV4ID0gJzAwMDAwMDAxJzsKICB9CgogIC8vIENhbGN1bGF0ZSB0aGUgRGlnZXN0ICJyZXNwb25zZSIgdmFsdWUuCiAgdGhpcy5jYWxjdWxhdGVSZXNwb25zZSgpOwoKICByZXR1cm4gdHJ1ZTsKfTsKCgovKioKKiBHZW5lcmF0ZSBEaWdlc3QgJ3Jlc3BvbnNlJyB2YWx1ZS4KKiBAcHJpdmF0ZQoqLwpEaWdlc3RBdXRoZW50aWNhdGlvbi5wcm90b3R5cGUuY2FsY3VsYXRlUmVzcG9uc2UgPSBmdW5jdGlvbigpIHsKICB2YXIgaGExLCBoYTI7CgogIC8vIEhBMSA9IE1ENShBMSkgPSBNRDUodXNlcm5hbWU6cmVhbG06cGFzc3dvcmQpCiAgaGExID0gVXRpbHMuY2FsY3VsYXRlTUQ1KHRoaXMudXNlcm5hbWUgKyAiOiIgKyB0aGlzLnJlYWxtICsgIjoiICsgdGhpcy5wYXNzd29yZCk7CgogIGlmICh0aGlzLnFvcCA9PT0gJ2F1dGgnKSB7CiAgICAvLyBIQTIgPSBNRDUoQTIpID0gTUQ1KG1ldGhvZDpkaWdlc3RVUkkpCiAgICBoYTIgPSBVdGlscy5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QgKyAiOiIgKyB0aGlzLnVyaSk7CiAgICAvLyByZXNwb25zZSA9IE1ENShIQTE6bm9uY2U6bm9uY2VDb3VudDpjcmVkZW50aWFsc05vbmNlOnFvcDpIQTIpCiAgICB0aGlzLnJlc3BvbnNlID0gVXRpbHMuY2FsY3VsYXRlTUQ1KGhhMSArICI6IiArIHRoaXMubm9uY2UgKyAiOiIgKyB0aGlzLm5jSGV4ICsgIjoiICsgdGhpcy5jbm9uY2UgKyAiOmF1dGg6IiArIGhhMik7CgogIH0gZWxzZSBpZiAodGhpcy5xb3AgPT09ICdhdXRoLWludCcpIHsKICAgIC8vIEhBMiA9IE1ENShBMikgPSBNRDUobWV0aG9kOmRpZ2VzdFVSSTpNRDUoZW50aXR5Qm9keSkpCiAgICBoYTIgPSBVdGlscy5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QgKyAiOiIgKyB0aGlzLnVyaSArICI6IiArIFV0aWxzLmNhbGN1bGF0ZU1ENSh0aGlzLmJvZHkgPyB0aGlzLmJvZHkgOiAiIikpOwogICAgLy8gcmVzcG9uc2UgPSBNRDUoSEExOm5vbmNlOm5vbmNlQ291bnQ6Y3JlZGVudGlhbHNOb25jZTpxb3A6SEEyKQogICAgdGhpcy5yZXNwb25zZSA9IFV0aWxzLmNhbGN1bGF0ZU1ENShoYTEgKyAiOiIgKyB0aGlzLm5vbmNlICsgIjoiICsgdGhpcy5uY0hleCArICI6IiArIHRoaXMuY25vbmNlICsgIjphdXRoLWludDoiICsgaGEyKTsKCiAgfSBlbHNlIGlmICh0aGlzLnFvcCA9PT0gbnVsbCkgewogICAgLy8gSEEyID0gTUQ1KEEyKSA9IE1ENShtZXRob2Q6ZGlnZXN0VVJJKQogICAgaGEyID0gVXRpbHMuY2FsY3VsYXRlTUQ1KHRoaXMubWV0aG9kICsgIjoiICsgdGhpcy51cmkpOwogICAgLy8gcmVzcG9uc2UgPSBNRDUoSEExOm5vbmNlOkhBMikKICAgIHRoaXMucmVzcG9uc2UgPSBVdGlscy5jYWxjdWxhdGVNRDUoaGExICsgIjoiICsgdGhpcy5ub25jZSArICI6IiArIGhhMik7CiAgfQp9OwoKCi8qKgoqIFJldHVybiB0aGUgUHJveHktQXV0aG9yaXphdGlvbiBvciBXV1ctQXV0aG9yaXphdGlvbiBoZWFkZXIgdmFsdWUuCiovCkRpZ2VzdEF1dGhlbnRpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgewogIHZhciBhdXRoX3BhcmFtcyA9IFtdOwoKICBpZiAoISB0aGlzLnJlc3BvbnNlKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Jlc3BvbnNlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCBjYW5ub3QgZ2VuZXJhdGUgQXV0aG9yaXphdGlvbiBoZWFkZXInKTsKICB9CgogIGF1dGhfcGFyYW1zLnB1c2goJ2FsZ29yaXRobT0nICsgdGhpcy5hbGdvcml0aG0pOwogIGF1dGhfcGFyYW1zLnB1c2goJ3VzZXJuYW1lPSInICsgdGhpcy51c2VybmFtZSArICciJyk7CiAgYXV0aF9wYXJhbXMucHVzaCgncmVhbG09IicgKyB0aGlzLnJlYWxtICsgJyInKTsKICBhdXRoX3BhcmFtcy5wdXNoKCdub25jZT0iJyArIHRoaXMubm9uY2UgKyAnIicpOwogIGF1dGhfcGFyYW1zLnB1c2goJ3VyaT0iJyArIHRoaXMudXJpICsgJyInKTsKICBhdXRoX3BhcmFtcy5wdXNoKCdyZXNwb25zZT0iJyArIHRoaXMucmVzcG9uc2UgKyAnIicpOwogIGlmICh0aGlzLm9wYXF1ZSkgewogICAgYXV0aF9wYXJhbXMucHVzaCgnb3BhcXVlPSInICsgdGhpcy5vcGFxdWUgKyAnIicpOwogIH0KICBpZiAodGhpcy5xb3ApIHsKICAgIGF1dGhfcGFyYW1zLnB1c2goJ3FvcD0nICsgdGhpcy5xb3ApOwogICAgYXV0aF9wYXJhbXMucHVzaCgnY25vbmNlPSInICsgdGhpcy5jbm9uY2UgKyAnIicpOwogICAgYXV0aF9wYXJhbXMucHVzaCgnbmM9JyArIHRoaXMubmNIZXgpOwogIH0KCiAgcmV0dXJuICdEaWdlc3QgJyArIGF1dGhfcGFyYW1zLmpvaW4oJywgJyk7Cn07CgoKLyoqCiogR2VuZXJhdGUgdGhlICduYycgdmFsdWUgYXMgcmVxdWlyZWQgYnkgRGlnZXN0IGluIHRoaXMubmNIZXggYnkgcmVhZGluZyB0aGlzLm5jLgoqIEBwcml2YXRlCiovCkRpZ2VzdEF1dGhlbnRpY2F0aW9uLnByb3RvdHlwZS51cGRhdGVOY0hleCA9IGZ1bmN0aW9uKCkgewogIHZhciBoZXggPSBOdW1iZXIodGhpcy5uYykudG9TdHJpbmcoMTYpOwogIHRoaXMubmNIZXggPSAnMDAwMDAwMDAnLnN1YnN0cigwLCA4LWhleC5sZW5ndGgpICsgaGV4Owp9OwoKcmV0dXJuIERpZ2VzdEF1dGhlbnRpY2F0aW9uOwp9OwoKfSx7fV0sMTI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CnZhciBOb2RlRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29uc29sZSkgewoKLy8gRG9uJ3QgdXNlIGBuZXcgU0lQLkV2ZW50RW1pdHRlcigpYCBmb3IgaW5oZXJpdGluZy4KLy8gVXNlIE9iamVjdC5jcmVhdGUoU0lQLkV2ZW50RW1pdHRlci5wcm90b3RveXBlKTsKZnVuY3Rpb24gRXZlbnRFbWl0dGVyICgpIHsKICBOb2RlRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7Cn0KCkV2ZW50RW1pdHRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKE5vZGVFdmVudEVtaXR0ZXIucHJvdG90eXBlLCB7CiAgY29uc3RydWN0b3I6IHsKICAgIHZhbHVlOiBFdmVudEVtaXR0ZXIsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfQp9KTsKCkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gb2ZmIChldmVudE5hbWUsIGxpc3RlbmVyKSB7CiAgdmFyIHdhcm5pbmcgPSAnJzsKICB3YXJuaW5nICs9ICdTSVAuRXZlbnRFbWl0dGVyI29mZiBpcyBkZXByZWNhdGVkIGFuZCBtYXkgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgU0lQLmpzIHZlcnNpb25zLlxuJzsKICB3YXJuaW5nICs9ICdQbGVhc2UgdXNlIHJlbW92ZUxpc3RlbmVyIG9yIHJlbW92ZUFsbExpc3RlbmVycyBpbnN0ZWFkLlxuJzsKICB3YXJuaW5nICs9ICdTZWUgaGVyZSBmb3IgbW9yZSBkZXRhaWxzOlxuJzsKICB3YXJuaW5nICs9ICdodHRwOi8vbm9kZWpzLm9yZy9hcGkvZXZlbnRzLmh0bWwjZXZlbnRzX2VtaXR0ZXJfcmVtb3ZlbGlzdGVuZXJfZXZlbnRfbGlzdGVuZXInOwogIGNvbnNvbGUud2Fybih3YXJuaW5nKTsKCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICByZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcik7CiAgfQp9OwoKcmV0dXJuIEV2ZW50RW1pdHRlcjsKCn07Cgp9LHsiZXZlbnRzIjo0NH1dLDEzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBFeGNlcHRpb25zCiAqLwoKLyoqCiAqIFNJUCBFeGNlcHRpb25zLgogKiBAYXVnbWVudHMgU0lQCiAqLwptb2R1bGUuZXhwb3J0cyA9IHsKICBDb25maWd1cmF0aW9uRXJyb3I6IChmdW5jdGlvbigpewogICAgdmFyIGV4Y2VwdGlvbiA9IGZ1bmN0aW9uKHBhcmFtZXRlciwgdmFsdWUpIHsKICAgICAgdGhpcy5jb2RlID0gMTsKICAgICAgdGhpcy5uYW1lID0gJ0NPTkZJR1VSQVRJT05fRVJST1InOwogICAgICB0aGlzLnBhcmFtZXRlciA9IHBhcmFtZXRlcjsKICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOwogICAgICB0aGlzLm1lc3NhZ2UgPSAoIXRoaXMudmFsdWUpPyAnTWlzc2luZyBwYXJhbWV0ZXI6ICcrIHRoaXMucGFyYW1ldGVyIDogJ0ludmFsaWQgdmFsdWUgJysgSlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZSkgKycgZm9yIHBhcmFtZXRlciAiJysgdGhpcy5wYXJhbWV0ZXIgKyciJzsKICAgIH07CiAgICBleGNlcHRpb24ucHJvdG90eXBlID0gbmV3IEVycm9yKCk7CiAgICByZXR1cm4gZXhjZXB0aW9uOwogIH0oKSksCgogIEludmFsaWRTdGF0ZUVycm9yOiAoZnVuY3Rpb24oKXsKICAgIHZhciBleGNlcHRpb24gPSBmdW5jdGlvbihzdGF0dXMpIHsKICAgICAgdGhpcy5jb2RlID0gMjsKICAgICAgdGhpcy5uYW1lID0gJ0lOVkFMSURfU1RBVEVfRVJST1InOwogICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1czsKICAgICAgdGhpcy5tZXNzYWdlID0gJ0ludmFsaWQgc3RhdHVzOiAnICsgc3RhdHVzOwogICAgfTsKICAgIGV4Y2VwdGlvbi5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTsKICAgIHJldHVybiBleGNlcHRpb247CiAgfSgpKSwKCiAgTm90U3VwcG9ydGVkRXJyb3I6IChmdW5jdGlvbigpewogICAgdmFyIGV4Y2VwdGlvbiA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5jb2RlID0gMzsKICAgICAgdGhpcy5uYW1lID0gJ05PVF9TVVBQT1JURURfRVJST1InOwogICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgfTsKICAgIGV4Y2VwdGlvbi5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTsKICAgIHJldHVybiBleGNlcHRpb247CiAgfSgpKSwKCiAgR2V0RGVzY3JpcHRpb25FcnJvcjogKGZ1bmN0aW9uKCl7CiAgICB2YXIgZXhjZXB0aW9uID0gZnVuY3Rpb24obWVzc2FnZSkgewogICAgICB0aGlzLmNvZGUgPSA0OwogICAgICB0aGlzLm5hbWUgPSAnR0VUX0RFU0NSSVBUSU9OX0VSUk9SJzsKICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgIH07CiAgICBleGNlcHRpb24ucHJvdG90eXBlID0gbmV3IEVycm9yKCk7CiAgICByZXR1cm4gZXhjZXB0aW9uOwogIH0oKSkKfTsKCn0se31dLDE0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwp2YXIgR3JhbW1hciA9IHJlcXVpcmUoJy4vR3JhbW1hci9kaXN0L0dyYW1tYXInKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewoKcmV0dXJuIHsKICBwYXJzZTogZnVuY3Rpb24gcGFyc2VDdXN0b20gKGlucHV0LCBzdGFydFJ1bGUpIHsKICAgIHZhciBvcHRpb25zID0ge3N0YXJ0UnVsZTogc3RhcnRSdWxlLCBTSVA6IFNJUH07CiAgICB0cnkgewogICAgICBHcmFtbWFyLnBhcnNlKGlucHV0LCBvcHRpb25zKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgb3B0aW9ucy5kYXRhID0gLTE7CiAgICB9CiAgICByZXR1cm4gb3B0aW9ucy5kYXRhOwogIH0KfTsKCn07Cgp9LHsiLi9HcmFtbWFyL2Rpc3QvR3JhbW1hciI6MTV9XSwxNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCkgewogIC8qCiAgICogR2VuZXJhdGVkIGJ5IFBFRy5qcyAwLjguMC4KICAgKgogICAqIGh0dHA6Ly9wZWdqcy5tYWpkYS5jei8KICAgKi8KCiAgZnVuY3Rpb24gcGVnJHN1YmNsYXNzKGNoaWxkLCBwYXJlbnQpIHsKICAgIGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfQogICAgY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOwogICAgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsKICB9CgogIGZ1bmN0aW9uIFN5bnRheEVycm9yKG1lc3NhZ2UsIGV4cGVjdGVkLCBmb3VuZCwgb2Zmc2V0LCBsaW5lLCBjb2x1bW4pIHsKICAgIHRoaXMubWVzc2FnZSAgPSBtZXNzYWdlOwogICAgdGhpcy5leHBlY3RlZCA9IGV4cGVjdGVkOwogICAgdGhpcy5mb3VuZCAgICA9IGZvdW5kOwogICAgdGhpcy5vZmZzZXQgICA9IG9mZnNldDsKICAgIHRoaXMubGluZSAgICAgPSBsaW5lOwogICAgdGhpcy5jb2x1bW4gICA9IGNvbHVtbjsKCiAgICB0aGlzLm5hbWUgICAgID0gIlN5bnRheEVycm9yIjsKICB9CgogIHBlZyRzdWJjbGFzcyhTeW50YXhFcnJvciwgRXJyb3IpOwoKICBmdW5jdGlvbiBwYXJzZShpbnB1dCkgewogICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHt9LAoKICAgICAgICBwZWckRkFJTEVEID0ge30sCgogICAgICAgIHBlZyRzdGFydFJ1bGVJbmRpY2VzID0geyBDb250YWN0OiAxMTgsIE5hbWVfQWRkcl9IZWFkZXI6IDE1NSwgUmVjb3JkX1JvdXRlOiAxNzUsIFJlcXVlc3RfUmVzcG9uc2U6IDgxLCBTSVBfVVJJOiA0NSwgU3Vic2NyaXB0aW9uX1N0YXRlOiAxODUsIFN1cHBvcnRlZDogMTkwLCBSZXF1aXJlOiAxODEsIFZpYTogMTkzLCBhYnNvbHV0ZVVSSTogODQsIENhbGxfSUQ6IDExNywgQ29udGVudF9EaXNwb3NpdGlvbjogMTI5LCBDb250ZW50X0xlbmd0aDogMTM0LCBDb250ZW50X1R5cGU6IDEzNSwgQ1NlcTogMTQ1LCBkaXNwbGF5TmFtZTogMTIxLCBFdmVudDogMTQ4LCBGcm9tOiAxNTAsIGhvc3Q6IDUyLCBNYXhfRm9yd2FyZHM6IDE1MywgTWluX1NFOiAyMTIsIFByb3h5X0F1dGhlbnRpY2F0ZTogMTU2LCBxdW90ZWRfc3RyaW5nOiA0MCwgUmVmZXJfVG86IDE3NywgUmVwbGFjZXM6IDE3OCwgU2Vzc2lvbl9FeHBpcmVzOiAyMDksIHN0dW5fVVJJOiAyMTYsIFRvOiAxOTEsIHR1cm5fVVJJOiAyMjMsIHV1aWQ6IDIyNiwgV1dXX0F1dGhlbnRpY2F0ZTogMjA4LCBjaGFsbGVuZ2U6IDE1NyB9LAogICAgICAgIHBlZyRzdGFydFJ1bGVJbmRleCAgID0gMTE4LAoKICAgICAgICBwZWckY29uc3RzID0gWwogICAgICAgICAgIlxyXG4iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXHJcbiIsIGRlc2NyaXB0aW9uOiAiXCJcXHJcXG5cIiIgfSwKICAgICAgICAgIC9eWzAtOV0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlswLTldIiwgZGVzY3JpcHRpb246ICJbMC05XSIgfSwKICAgICAgICAgIC9eW2EtekEtWl0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlthLXpBLVpdIiwgZGVzY3JpcHRpb246ICJbYS16QS1aXSIgfSwKICAgICAgICAgIC9eWzAtOWEtZkEtRl0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlswLTlhLWZBLUZdIiwgZGVzY3JpcHRpb246ICJbMC05YS1mQS1GXSIgfSwKICAgICAgICAgIC9eW1wwLVx4RkZdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXFwwLVxceEZGXSIsIGRlc2NyaXB0aW9uOiAiW1xcMC1cXHhGRl0iIH0sCiAgICAgICAgICAvXlsiXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiW1wiXSIsIGRlc2NyaXB0aW9uOiAiW1wiXSIgfSwKICAgICAgICAgICIgIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIiAiLCBkZXNjcmlwdGlvbjogIlwiIFwiIiB9LAogICAgICAgICAgIlx0IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlx0IiwgZGVzY3JpcHRpb246ICJcIlxcdFwiIiB9LAogICAgICAgICAgL15bYS16QS1aMC05XS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiW2EtekEtWjAtOV0iLCBkZXNjcmlwdGlvbjogIlthLXpBLVowLTldIiB9LAogICAgICAgICAgIjsiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiOyIsIGRlc2NyaXB0aW9uOiAiXCI7XCIiIH0sCiAgICAgICAgICAiLyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIvIiwgZGVzY3JpcHRpb246ICJcIi9cIiIgfSwKICAgICAgICAgICI/IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIj8iLCBkZXNjcmlwdGlvbjogIlwiP1wiIiB9LAogICAgICAgICAgIjoiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiOiIsIGRlc2NyaXB0aW9uOiAiXCI6XCIiIH0sCiAgICAgICAgICAiQCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJAIiwgZGVzY3JpcHRpb246ICJcIkBcIiIgfSwKICAgICAgICAgICImIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIiYiLCBkZXNjcmlwdGlvbjogIlwiJlwiIiB9LAogICAgICAgICAgIj0iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiPSIsIGRlc2NyaXB0aW9uOiAiXCI9XCIiIH0sCiAgICAgICAgICAiKyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIrIiwgZGVzY3JpcHRpb246ICJcIitcIiIgfSwKICAgICAgICAgICIkIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIiQiLCBkZXNjcmlwdGlvbjogIlwiJFwiIiB9LAogICAgICAgICAgIiwiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiLCIsIGRlc2NyaXB0aW9uOiAiXCIsXCIiIH0sCiAgICAgICAgICAiLSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICItIiwgZGVzY3JpcHRpb246ICJcIi1cIiIgfSwKICAgICAgICAgICJfIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIl8iLCBkZXNjcmlwdGlvbjogIlwiX1wiIiB9LAogICAgICAgICAgIi4iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiLiIsIGRlc2NyaXB0aW9uOiAiXCIuXCIiIH0sCiAgICAgICAgICAiISIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIhIiwgZGVzY3JpcHRpb246ICJcIiFcIiIgfSwKICAgICAgICAgICJ+IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIn4iLCBkZXNjcmlwdGlvbjogIlwiflwiIiB9LAogICAgICAgICAgIioiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiKiIsIGRlc2NyaXB0aW9uOiAiXCIqXCIiIH0sCiAgICAgICAgICAiJyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICInIiwgZGVzY3JpcHRpb246ICJcIidcIiIgfSwKICAgICAgICAgICIoIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIigiLCBkZXNjcmlwdGlvbjogIlwiKFwiIiB9LAogICAgICAgICAgIikiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiKSIsIGRlc2NyaXB0aW9uOiAiXCIpXCIiIH0sCiAgICAgICAgICBwZWckRkFJTEVELAogICAgICAgICAgIiUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiJSIsIGRlc2NyaXB0aW9uOiAiXCIlXCIiIH0sCiAgICAgICAgICBudWxsLAogICAgICAgICAgW10sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIiAiOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICc6JzsgfSwKICAgICAgICAgIC9eWyEtfl0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlshLX5dIiwgZGVzY3JpcHRpb246ICJbIS1+XSIgfSwKICAgICAgICAgIC9eW1x4ODAtXHVGRkZGXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiW1xceDgwLVxcdUZGRkZdIiwgZGVzY3JpcHRpb246ICJbXFx4ODAtXFx1RkZGRl0iIH0sCiAgICAgICAgICAvXltceDgwLVx4QkZdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXFx4ODAtXFx4QkZdIiwgZGVzY3JpcHRpb246ICJbXFx4ODAtXFx4QkZdIiB9LAogICAgICAgICAgL15bYS1mXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiW2EtZl0iLCBkZXNjcmlwdGlvbjogIlthLWZdIiB9LAogICAgICAgICAgImAiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiYCIsIGRlc2NyaXB0aW9uOiAiXCJgXCIiIH0sCiAgICAgICAgICAiPCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICI8IiwgZGVzY3JpcHRpb246ICJcIjxcIiIgfSwKICAgICAgICAgICI+IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIj4iLCBkZXNjcmlwdGlvbjogIlwiPlwiIiB9LAogICAgICAgICAgIlxcIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlxcIiwgZGVzY3JpcHRpb246ICJcIlxcXFxcIiIgfSwKICAgICAgICAgICJbIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlsiLCBkZXNjcmlwdGlvbjogIlwiW1wiIiB9LAogICAgICAgICAgIl0iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXSIsIGRlc2NyaXB0aW9uOiAiXCJdXCIiIH0sCiAgICAgICAgICAieyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ7IiwgZGVzY3JpcHRpb246ICJcIntcIiIgfSwKICAgICAgICAgICJ9IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIn0iLCBkZXNjcmlwdGlvbjogIlwifVwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICIqIjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiLyI7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIj0iOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICIoIjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiKSI7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIj4iOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICI8IjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiLCI7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIjsiOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICI6IjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiXCIiOyB9LAogICAgICAgICAgL15bIS0nXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWyEtJ10iLCBkZXNjcmlwdGlvbjogIlshLSddIiB9LAogICAgICAgICAgL15bKi1bXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWyotW10iLCBkZXNjcmlwdGlvbjogIlsqLVtdIiB9LAogICAgICAgICAgL15bXF0tfl0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIltcXF0tfl0iLCBkZXNjcmlwdGlvbjogIltcXF0tfl0iIH0sCiAgICAgICAgICBmdW5jdGlvbihjb250ZW50cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRzOyB9LAogICAgICAgICAgL15bIy1bXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWyMtW10iLCBkZXNjcmlwdGlvbjogIlsjLVtdIiB9LAogICAgICAgICAgL15bXDAtXHRdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXFwwLVxcdF0iLCBkZXNjcmlwdGlvbjogIltcXDAtXFx0XSIgfSwKICAgICAgICAgIC9eW1x4MEItXGZdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXFx4MEItXFxmXSIsIGRlc2NyaXB0aW9uOiAiW1xceDBCLVxcZl0iIH0sCiAgICAgICAgICAvXltceDBFLX9dLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXFx4MEUtf10iLCBkZXNjcmlwdGlvbjogIltcXHgwRS1/XSIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaSA9IG5ldyBvcHRpb25zLlNJUC5VUkkob3B0aW9ucy5kYXRhLnNjaGVtZSwgb3B0aW9ucy5kYXRhLnVzZXIsIG9wdGlvbnMuZGF0YS5ob3N0LCBvcHRpb25zLmRhdGEucG9ydCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnNjaGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXNlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuaG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuaG9zdF90eXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5wb3J0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmkgPSBuZXcgb3B0aW9ucy5TSVAuVVJJKG9wdGlvbnMuZGF0YS5zY2hlbWUsIG9wdGlvbnMuZGF0YS51c2VyLCBvcHRpb25zLmRhdGEuaG9zdCwgb3B0aW9ucy5kYXRhLnBvcnQsIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zLCBvcHRpb25zLmRhdGEudXJpX2hlYWRlcnMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5zY2hlbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnVzZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLmhvc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLmhvc3RfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEucG9ydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXJpX3BhcmFtczsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgPT09ICdTSVBfVVJJJykgeyBvcHRpb25zLmRhdGEgPSBvcHRpb25zLmRhdGEudXJpO30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgInNpcHMiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAic2lwcyIsIGRlc2NyaXB0aW9uOiAiXCJzaXBzXCIiIH0sCiAgICAgICAgICAic2lwIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInNpcCIsIGRlc2NyaXB0aW9uOiAiXCJzaXBcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHVyaV9zY2hlbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnNjaGVtZSA9IHVyaV9zY2hlbWU7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVzZXIgPSBkZWNvZGVVUklDb21wb25lbnQodGV4dCgpLnNsaWNlKDAsIC0xKSk7fSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucGFzc3dvcmQgPSB0ZXh0KCk7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3QgPSB0ZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmRhdGEuaG9zdDsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3RfdHlwZSA9ICdkb21haW4nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHQoKTsgfSwKICAgICAgICAgIC9eW2EtekEtWjAtOV9cLV0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlthLXpBLVowLTlfXFwtXSIsIGRlc2NyaXB0aW9uOiAiW2EtekEtWjAtOV9cXC1dIiB9LAogICAgICAgICAgL15bYS16QS1aMC05XC1dLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbYS16QS1aMC05XFwtXSIsIGRlc2NyaXB0aW9uOiAiW2EtekEtWjAtOVxcLV0iIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3RfdHlwZSA9ICdJUHY2JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHQoKTsgfSwKICAgICAgICAgICI6OiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICI6OiIsIGRlc2NyaXB0aW9uOiAiXCI6OlwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuaG9zdF90eXBlID0gJ0lQdjYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHQoKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuaG9zdF90eXBlID0gJ0lQdjQnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dCgpOyB9LAogICAgICAgICAgIjI1IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIjI1IiwgZGVzY3JpcHRpb246ICJcIjI1XCIiIH0sCiAgICAgICAgICAvXlswLTVdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbMC01XSIsIGRlc2NyaXB0aW9uOiAiWzAtNV0iIH0sCiAgICAgICAgICAiMiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIyIiwgZGVzY3JpcHRpb246ICJcIjJcIiIgfSwKICAgICAgICAgIC9eWzAtNF0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlswLTRdIiwgZGVzY3JpcHRpb246ICJbMC00XSIgfSwKICAgICAgICAgICIxIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIjEiLCBkZXNjcmlwdGlvbjogIlwiMVwiIiB9LAogICAgICAgICAgL15bMS05XS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWzEtOV0iLCBkZXNjcmlwdGlvbjogIlsxLTldIiB9LAogICAgICAgICAgZnVuY3Rpb24ocG9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3J0ID0gcGFyc2VJbnQocG9ydC5qb2luKCcnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wb3J0ID0gcG9ydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvcnQ7IH0sCiAgICAgICAgICAidHJhbnNwb3J0PSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0cmFuc3BvcnQ9IiwgZGVzY3JpcHRpb246ICJcInRyYW5zcG9ydD1cIiIgfSwKICAgICAgICAgICJ1ZHAiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidWRwIiwgZGVzY3JpcHRpb246ICJcInVkcFwiIiB9LAogICAgICAgICAgInRjcCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0Y3AiLCBkZXNjcmlwdGlvbjogIlwidGNwXCIiIH0sCiAgICAgICAgICAic2N0cCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJzY3RwIiwgZGVzY3JpcHRpb246ICJcInNjdHBcIiIgfSwKICAgICAgICAgICJ0bHMiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidGxzIiwgZGVzY3JpcHRpb246ICJcInRsc1wiIiB9LAogICAgICAgICAgZnVuY3Rpb24odHJhbnNwb3J0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9wdGlvbnMuZGF0YS51cmlfcGFyYW1zKSBvcHRpb25zLmRhdGEudXJpX3BhcmFtcz17fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX3BhcmFtc1sndHJhbnNwb3J0J10gPSB0cmFuc3BvcnQudG9Mb3dlckNhc2UoKTsgfSwKICAgICAgICAgICJ1c2VyPSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ1c2VyPSIsIGRlc2NyaXB0aW9uOiAiXCJ1c2VyPVwiIiB9LAogICAgICAgICAgInBob25lIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInBob25lIiwgZGVzY3JpcHRpb246ICJcInBob25lXCIiIH0sCiAgICAgICAgICAiaXAiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiaXAiLCBkZXNjcmlwdGlvbjogIlwiaXBcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMpIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zPXt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zWyd1c2VyJ10gPSB1c2VyLnRvTG93ZXJDYXNlKCk7IH0sCiAgICAgICAgICAibWV0aG9kPSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJtZXRob2Q9IiwgZGVzY3JpcHRpb246ICJcIm1ldGhvZD1cIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEudXJpX3BhcmFtcykgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXM9e307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXNbJ21ldGhvZCddID0gbWV0aG9kOyB9LAogICAgICAgICAgInR0bD0iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidHRsPSIsIGRlc2NyaXB0aW9uOiAiXCJ0dGw9XCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih0dGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnBhcmFtcykgb3B0aW9ucy5kYXRhLnBhcmFtcz17fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucGFyYW1zWyd0dGwnXSA9IHR0bDsgfSwKICAgICAgICAgICJtYWRkcj0iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAibWFkZHI9IiwgZGVzY3JpcHRpb246ICJcIm1hZGRyPVwiIiB9LAogICAgICAgICAgZnVuY3Rpb24obWFkZHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMpIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zPXt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zWydtYWRkciddID0gbWFkZHI7IH0sCiAgICAgICAgICAibHIiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAibHIiLCBkZXNjcmlwdGlvbjogIlwibHJcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEudXJpX3BhcmFtcykgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXM9e307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXNbJ2xyJ10gPSB1bmRlZmluZWQ7IH0sCiAgICAgICAgICBmdW5jdGlvbihwYXJhbSwgdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMpIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVbMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zW3BhcmFtLnRvTG93ZXJDYXNlKCldID0gdmFsdWUgJiYgdmFsdWUudG9Mb3dlckNhc2UoKTt9LAogICAgICAgICAgZnVuY3Rpb24oaG5hbWUsIGh2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhuYW1lID0gaG5hbWUuam9pbignJykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodmFsdWUgPSBodmFsdWUuam9pbignJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9wdGlvbnMuZGF0YS51cmlfaGVhZGVycykgb3B0aW9ucy5kYXRhLnVyaV9oZWFkZXJzID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRhdGEudXJpX2hlYWRlcnNbaG5hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX2hlYWRlcnNbaG5hbWVdID0gW2h2YWx1ZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfaGVhZGVyc1tobmFtZV0ucHVzaChodmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG90cyBvZiB0ZXN0cyBmYWlsIGlmIHRoaXMgaXNuJ3QgZ3VhcmRlZC4uLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ1JlZmVyX1RvJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaSA9IG5ldyBvcHRpb25zLlNJUC5VUkkob3B0aW9ucy5kYXRhLnNjaGVtZSwgb3B0aW9ucy5kYXRhLnVzZXIsIG9wdGlvbnMuZGF0YS5ob3N0LCBvcHRpb25zLmRhdGEucG9ydCwgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMsIG9wdGlvbnMuZGF0YS51cmlfaGVhZGVycyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnNjaGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXNlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuaG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuaG9zdF90eXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5wb3J0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICIvLyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIvLyIsIGRlc2NyaXB0aW9uOiAiXCIvL1wiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5zY2hlbWU9IHRleHQoKTsgfSwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlNJUCIsIGRlc2NyaXB0aW9uOiAiXCJTSVBcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuc2lwX3ZlcnNpb24gPSB0ZXh0KCk7IH0sCiAgICAgICAgICAiSU5WSVRFIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIklOVklURSIsIGRlc2NyaXB0aW9uOiAiXCJJTlZJVEVcIiIgfSwKICAgICAgICAgICJBQ0siLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiQUNLIiwgZGVzY3JpcHRpb246ICJcIkFDS1wiIiB9LAogICAgICAgICAgIlZYQUNIIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlZYQUNIIiwgZGVzY3JpcHRpb246ICJcIlZYQUNIXCIiIH0sCiAgICAgICAgICAiT1BUSU9OUyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJPUFRJT05TIiwgZGVzY3JpcHRpb246ICJcIk9QVElPTlNcIiIgfSwKICAgICAgICAgICJCWUUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiQllFIiwgZGVzY3JpcHRpb246ICJcIkJZRVwiIiB9LAogICAgICAgICAgIkNBTkNFTCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJDQU5DRUwiLCBkZXNjcmlwdGlvbjogIlwiQ0FOQ0VMXCIiIH0sCiAgICAgICAgICAiUkVHSVNURVIiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiUkVHSVNURVIiLCBkZXNjcmlwdGlvbjogIlwiUkVHSVNURVJcIiIgfSwKICAgICAgICAgICJTVUJTQ1JJQkUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiU1VCU0NSSUJFIiwgZGVzY3JpcHRpb246ICJcIlNVQlNDUklCRVwiIiB9LAogICAgICAgICAgIk5PVElGWSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJOT1RJRlkiLCBkZXNjcmlwdGlvbjogIlwiTk9USUZZXCIiIH0sCiAgICAgICAgICAiUkVGRVIiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiUkVGRVIiLCBkZXNjcmlwdGlvbjogIlwiUkVGRVJcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLm1ldGhvZCA9IHRleHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZGF0YS5tZXRob2Q7IH0sCiAgICAgICAgICBmdW5jdGlvbihzdGF0dXNfY29kZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnN0YXR1c19jb2RlID0gcGFyc2VJbnQoc3RhdHVzX2NvZGUuam9pbignJykpOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucmVhc29uX3BocmFzZSA9IHRleHQoKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB0ZXh0KCk7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHgsIGxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyW2lkeF0ucGFyc2VkID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyKSBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIgPSBuZXcgb3B0aW9ucy5TSVAuTmFtZUFkZHJIZWFkZXIob3B0aW9ucy5kYXRhLnVyaSwgb3B0aW9ucy5kYXRhLmRpc3BsYXlOYW1lLCBvcHRpb25zLmRhdGEucGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS51cmk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEucGFyYW1zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyLnB1c2goIHsgJ3Bvc2l0aW9uJzogcGVnJGN1cnJQb3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvZmZzZXQnOiBvZmZzZXQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BhcnNlZCc6IGhlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7fSwKICAgICAgICAgIGZ1bmN0aW9uKGRpc3BsYXlOYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZSA9IHRleHQoKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzcGxheU5hbWVbMF0gPT09ICdcIicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZS5zdWJzdHJpbmcoMSwgZGlzcGxheU5hbWUubGVuZ3RoLTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWU7IH0sCiAgICAgICAgICAicSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJxIiwgZGVzY3JpcHRpb246ICJcInFcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEucGFyYW1zKSBvcHRpb25zLmRhdGEucGFyYW1zID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucGFyYW1zWydxJ10gPSBxOyB9LAogICAgICAgICAgImV4cGlyZXMiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiZXhwaXJlcyIsIGRlc2NyaXB0aW9uOiAiXCJleHBpcmVzXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihleHBpcmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnBhcmFtcykgb3B0aW9ucy5kYXRhLnBhcmFtcyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnBhcmFtc1snZXhwaXJlcyddID0gZXhwaXJlczsgfSwKICAgICAgICAgIGZ1bmN0aW9uKGRlbHRhX3NlY29uZHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludChkZWx0YV9zZWNvbmRzLmpvaW4oJycpKTsgfSwKICAgICAgICAgICIwIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIjAiLCBkZXNjcmlwdGlvbjogIlwiMFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh0ZXh0KCkpOyB9LAogICAgICAgICAgZnVuY3Rpb24ocGFyYW0sIHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnBhcmFtcykgb3B0aW9ucy5kYXRhLnBhcmFtcyA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXJhbXNbcGFyYW0udG9Mb3dlckNhc2UoKV0gPSB2YWx1ZTt9LAogICAgICAgICAgInJlbmRlciIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJyZW5kZXIiLCBkZXNjcmlwdGlvbjogIlwicmVuZGVyXCIiIH0sCiAgICAgICAgICAic2Vzc2lvbiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJzZXNzaW9uIiwgZGVzY3JpcHRpb246ICJcInNlc3Npb25cIiIgfSwKICAgICAgICAgICJpY29uIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImljb24iLCBkZXNjcmlwdGlvbjogIlwiaWNvblwiIiB9LAogICAgICAgICAgImFsZXJ0IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImFsZXJ0IiwgZGVzY3JpcHRpb246ICJcImFsZXJ0XCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgPT09ICdDb250ZW50X0Rpc3Bvc2l0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnR5cGUgPSB0ZXh0KCkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAiaGFuZGxpbmciLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiaGFuZGxpbmciLCBkZXNjcmlwdGlvbjogIlwiaGFuZGxpbmdcIiIgfSwKICAgICAgICAgICJvcHRpb25hbCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJvcHRpb25hbCIsIGRlc2NyaXB0aW9uOiAiXCJvcHRpb25hbFwiIiB9LAogICAgICAgICAgInJlcXVpcmVkIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInJlcXVpcmVkIiwgZGVzY3JpcHRpb246ICJcInJlcXVpcmVkXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihsZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHBhcnNlSW50KGxlbmd0aC5qb2luKCcnKSk7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHRleHQoKTsgfSwKICAgICAgICAgICJ0ZXh0IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRleHQiLCBkZXNjcmlwdGlvbjogIlwidGV4dFwiIiB9LAogICAgICAgICAgImltYWdlIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImltYWdlIiwgZGVzY3JpcHRpb246ICJcImltYWdlXCIiIH0sCiAgICAgICAgICAiYXVkaW8iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiYXVkaW8iLCBkZXNjcmlwdGlvbjogIlwiYXVkaW9cIiIgfSwKICAgICAgICAgICJ2aWRlbyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ2aWRlbyIsIGRlc2NyaXB0aW9uOiAiXCJ2aWRlb1wiIiB9LAogICAgICAgICAgImFwcGxpY2F0aW9uIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImFwcGxpY2F0aW9uIiwgZGVzY3JpcHRpb246ICJcImFwcGxpY2F0aW9uXCIiIH0sCiAgICAgICAgICAibWVzc2FnZSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJtZXNzYWdlIiwgZGVzY3JpcHRpb246ICJcIm1lc3NhZ2VcIiIgfSwKICAgICAgICAgICJtdWx0aXBhcnQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAibXVsdGlwYXJ0IiwgZGVzY3JpcHRpb246ICJcIm11bHRpcGFydFwiIiB9LAogICAgICAgICAgIngtIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIngtIiwgZGVzY3JpcHRpb246ICJcIngtXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihjc2VxX3ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudmFsdWU9cGFyc2VJbnQoY3NlcV92YWx1ZS5qb2luKCcnKSk7IH0sCiAgICAgICAgICBmdW5jdGlvbihleHBpcmVzKSB7b3B0aW9ucy5kYXRhID0gZXhwaXJlczsgfSwKICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50X3R5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmV2ZW50ID0gZXZlbnRfdHlwZS50b0xvd2VyQ2FzZSgpOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IG9wdGlvbnMuZGF0YS50YWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBuZXcgb3B0aW9ucy5TSVAuTmFtZUFkZHJIZWFkZXIob3B0aW9ucy5kYXRhLnVyaSwgb3B0aW9ucy5kYXRhLmRpc3BsYXlOYW1lLCBvcHRpb25zLmRhdGEucGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWcpIHtvcHRpb25zLmRhdGEuc2V0UGFyYW0oJ3RhZycsdGFnKX0KICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgInRhZyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0YWciLCBkZXNjcmlwdGlvbjogIlwidGFnXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih0YWcpIHtvcHRpb25zLmRhdGEudGFnID0gdGFnOyB9LAogICAgICAgICAgZnVuY3Rpb24oZm9yd2FyZHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHBhcnNlSW50KGZvcndhcmRzLmpvaW4oJycpKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKG1pbl9leHBpcmVzKSB7b3B0aW9ucy5kYXRhID0gbWluX2V4cGlyZXM7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG5ldyBvcHRpb25zLlNJUC5OYW1lQWRkckhlYWRlcihvcHRpb25zLmRhdGEudXJpLCBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUsIG9wdGlvbnMuZGF0YS5wYXJhbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAiZGlnZXN0IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIkRpZ2VzdCIsIGRlc2NyaXB0aW9uOiAiXCJEaWdlc3RcIiIgfSwKICAgICAgICAgICJyZWFsbSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJyZWFsbSIsIGRlc2NyaXB0aW9uOiAiXCJyZWFsbVwiIiB9LAogICAgICAgICAgZnVuY3Rpb24ocmVhbG0pIHsgb3B0aW9ucy5kYXRhLnJlYWxtID0gcmVhbG07IH0sCiAgICAgICAgICAiZG9tYWluIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImRvbWFpbiIsIGRlc2NyaXB0aW9uOiAiXCJkb21haW5cIiIgfSwKICAgICAgICAgICJub25jZSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJub25jZSIsIGRlc2NyaXB0aW9uOiAiXCJub25jZVwiIiB9LAogICAgICAgICAgZnVuY3Rpb24obm9uY2UpIHsgb3B0aW9ucy5kYXRhLm5vbmNlPW5vbmNlOyB9LAogICAgICAgICAgIm9wYXF1ZSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJvcGFxdWUiLCBkZXNjcmlwdGlvbjogIlwib3BhcXVlXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihvcGFxdWUpIHsgb3B0aW9ucy5kYXRhLm9wYXF1ZT1vcGFxdWU7IH0sCiAgICAgICAgICAic3RhbGUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAic3RhbGUiLCBkZXNjcmlwdGlvbjogIlwic3RhbGVcIiIgfSwKICAgICAgICAgICJ0cnVlIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRydWUiLCBkZXNjcmlwdGlvbjogIlwidHJ1ZVwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7IG9wdGlvbnMuZGF0YS5zdGFsZT10cnVlOyB9LAogICAgICAgICAgImZhbHNlIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImZhbHNlIiwgZGVzY3JpcHRpb246ICJcImZhbHNlXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsgb3B0aW9ucy5kYXRhLnN0YWxlPWZhbHNlOyB9LAogICAgICAgICAgImFsZ29yaXRobSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJhbGdvcml0aG0iLCBkZXNjcmlwdGlvbjogIlwiYWxnb3JpdGhtXCIiIH0sCiAgICAgICAgICAibWQ1IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIk1ENSIsIGRlc2NyaXB0aW9uOiAiXCJNRDVcIiIgfSwKICAgICAgICAgICJtZDUtc2VzcyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJNRDUtc2VzcyIsIGRlc2NyaXB0aW9uOiAiXCJNRDUtc2Vzc1wiIiB9LAogICAgICAgICAgZnVuY3Rpb24oYWxnb3JpdGhtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmFsZ29yaXRobT1hbGdvcml0aG0udG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICJxb3AiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAicW9wIiwgZGVzY3JpcHRpb246ICJcInFvcFwiIiB9LAogICAgICAgICAgImF1dGgtaW50IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImF1dGgtaW50IiwgZGVzY3JpcHRpb246ICJcImF1dGgtaW50XCIiIH0sCiAgICAgICAgICAiYXV0aCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJhdXRoIiwgZGVzY3JpcHRpb246ICJcImF1dGhcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHFvcF92YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnFvcCB8fCAob3B0aW9ucy5kYXRhLnFvcD1bXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucW9wLnB1c2gocW9wX3ZhbHVlLnRvTG93ZXJDYXNlKCkpOyB9LAogICAgICAgICAgZnVuY3Rpb24ocmFja192YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnZhbHVlPXBhcnNlSW50KHJhY2tfdmFsdWUuam9pbignJykpOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4LCBsZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlcltpZHhdLnBhcnNlZCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRhdGEgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gb3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlcikgb3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlciA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyID0gbmV3IG9wdGlvbnMuU0lQLk5hbWVBZGRySGVhZGVyKG9wdGlvbnMuZGF0YS51cmksIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZSwgb3B0aW9ucy5kYXRhLnBhcmFtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXJpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLmRpc3BsYXlOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnBhcmFtczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlci5wdXNoKCB7ICdwb3NpdGlvbic6IHBlZyRjdXJyUG9zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb2Zmc2V0Jzogb2Zmc2V0KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXJzZWQnOiBoZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO30sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbmV3IG9wdGlvbnMuU0lQLk5hbWVBZGRySGVhZGVyKG9wdGlvbnMuZGF0YS51cmksIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZSwgb3B0aW9ucy5kYXRhLnBhcmFtcyk7CiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEob3B0aW9ucy5kYXRhLnJlcGxhY2VzX2Zyb21fdGFnICYmIG9wdGlvbnMuZGF0YS5yZXBsYWNlc190b190YWcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsX2lkOiBvcHRpb25zLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgImZyb20tdGFnIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImZyb20tdGFnIiwgZGVzY3JpcHRpb246ICJcImZyb20tdGFnXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihmcm9tX3RhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5yZXBsYWNlc19mcm9tX3RhZyA9IGZyb21fdGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgInRvLXRhZyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0by10YWciLCBkZXNjcmlwdGlvbjogIlwidG8tdGFnXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih0b190YWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucmVwbGFjZXNfdG9fdGFnID0gdG9fdGFnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgImVhcmx5LW9ubHkiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiZWFybHktb25seSIsIGRlc2NyaXB0aW9uOiAiXCJlYXJseS1vbmx5XCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuZWFybHlfb25seSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbihyKSB7cmV0dXJuIHI7fSwKICAgICAgICAgIGZ1bmN0aW9uKGZpcnN0LCByZXN0KSB7IHJldHVybiBsaXN0KGZpcnN0LCByZXN0KTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnUmVxdWlyZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHZhbHVlIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgIGZ1bmN0aW9uKHJzZXFfdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS52YWx1ZT1wYXJzZUludChyc2VxX3ZhbHVlLmpvaW4oJycpKTsgfSwKICAgICAgICAgICJhY3RpdmUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiYWN0aXZlIiwgZGVzY3JpcHRpb246ICJcImFjdGl2ZVwiIiB9LAogICAgICAgICAgInBlbmRpbmciLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAicGVuZGluZyIsIGRlc2NyaXB0aW9uOiAiXCJwZW5kaW5nXCIiIH0sCiAgICAgICAgICAidGVybWluYXRlZCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0ZXJtaW5hdGVkIiwgZGVzY3JpcHRpb246ICJcInRlcm1pbmF0ZWRcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnN0YXRlID0gdGV4dCgpOyB9LAogICAgICAgICAgInJlYXNvbiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJyZWFzb24iLCBkZXNjcmlwdGlvbjogIlwicmVhc29uXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihyZWFzb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVhc29uICE9PSAndW5kZWZpbmVkJykgb3B0aW9ucy5kYXRhLnJlYXNvbiA9IHJlYXNvbjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKGV4cGlyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhwaXJlcyAhPT0gJ3VuZGVmaW5lZCcpIG9wdGlvbnMuZGF0YS5leHBpcmVzID0gZXhwaXJlczsgfSwKICAgICAgICAgICJyZXRyeV9hZnRlciIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJyZXRyeV9hZnRlciIsIGRlc2NyaXB0aW9uOiAiXCJyZXRyeV9hZnRlclwiIiB9LAogICAgICAgICAgZnVuY3Rpb24ocmV0cnlfYWZ0ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmV0cnlfYWZ0ZXIgIT09ICd1bmRlZmluZWQnKSBvcHRpb25zLmRhdGEucmV0cnlfYWZ0ZXIgPSByZXRyeV9hZnRlcjsgfSwKICAgICAgICAgICJkZWFjdGl2YXRlZCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJkZWFjdGl2YXRlZCIsIGRlc2NyaXB0aW9uOiAiXCJkZWFjdGl2YXRlZFwiIiB9LAogICAgICAgICAgInByb2JhdGlvbiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJwcm9iYXRpb24iLCBkZXNjcmlwdGlvbjogIlwicHJvYmF0aW9uXCIiIH0sCiAgICAgICAgICAicmVqZWN0ZWQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAicmVqZWN0ZWQiLCBkZXNjcmlwdGlvbjogIlwicmVqZWN0ZWRcIiIgfSwKICAgICAgICAgICJ0aW1lb3V0IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRpbWVvdXQiLCBkZXNjcmlwdGlvbjogIlwidGltZW91dFwiIiB9LAogICAgICAgICAgImdpdmV1cCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJnaXZldXAiLCBkZXNjcmlwdGlvbjogIlwiZ2l2ZXVwXCIiIH0sCiAgICAgICAgICAibm9yZXNvdXJjZSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJub3Jlc291cmNlIiwgZGVzY3JpcHRpb246ICJcIm5vcmVzb3VyY2VcIiIgfSwKICAgICAgICAgICJpbnZhcmlhbnQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiaW52YXJpYW50IiwgZGVzY3JpcHRpb246ICJcImludmFyaWFudFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgPT09ICdTdXBwb3J0ZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSB2YWx1ZSB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhZyA9IG9wdGlvbnMuZGF0YS50YWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbmV3IG9wdGlvbnMuU0lQLk5hbWVBZGRySGVhZGVyKG9wdGlvbnMuZGF0YS51cmksIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZSwgb3B0aW9ucy5kYXRhLnBhcmFtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZykge29wdGlvbnMuZGF0YS5zZXRQYXJhbSgndGFnJyx0YWcpfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgInR0bCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0dGwiLCBkZXNjcmlwdGlvbjogIlwidHRsXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih2aWFfdHRsX3ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnR0bCA9IHZpYV90dGxfdmFsdWU7IH0sCiAgICAgICAgICAibWFkZHIiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAibWFkZHIiLCBkZXNjcmlwdGlvbjogIlwibWFkZHJcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHZpYV9tYWRkcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5tYWRkciA9IHZpYV9tYWRkcjsgfSwKICAgICAgICAgICJyZWNlaXZlZCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJyZWNlaXZlZCIsIGRlc2NyaXB0aW9uOiAiXCJyZWNlaXZlZFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24odmlhX3JlY2VpdmVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnJlY2VpdmVkID0gdmlhX3JlY2VpdmVkOyB9LAogICAgICAgICAgImJyYW5jaCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJicmFuY2giLCBkZXNjcmlwdGlvbjogIlwiYnJhbmNoXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih2aWFfYnJhbmNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmJyYW5jaCA9IHZpYV9icmFuY2g7IH0sCiAgICAgICAgICAicnBvcnQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAicnBvcnQiLCBkZXNjcmlwdGlvbjogIlwicnBvcnRcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiByZXNwb25zZV9wb3J0ICE9PSAndW5kZWZpbmVkJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ycG9ydCA9IHJlc3BvbnNlX3BvcnQuam9pbignJyk7IH0sCiAgICAgICAgICBmdW5jdGlvbih2aWFfcHJvdG9jb2wpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucHJvdG9jb2wgPSB2aWFfcHJvdG9jb2w7IH0sCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJVRFAiLCBkZXNjcmlwdGlvbjogIlwiVURQXCIiIH0sCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJUQ1AiLCBkZXNjcmlwdGlvbjogIlwiVENQXCIiIH0sCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJUTFMiLCBkZXNjcmlwdGlvbjogIlwiVExTXCIiIH0sCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJTQ1RQIiwgZGVzY3JpcHRpb246ICJcIlNDVFBcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHZpYV90cmFuc3BvcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudHJhbnNwb3J0ID0gdmlhX3RyYW5zcG9ydDsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ob3N0ID0gdGV4dCgpOyB9LAogICAgICAgICAgZnVuY3Rpb24odmlhX3NlbnRfYnlfcG9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wb3J0ID0gcGFyc2VJbnQodmlhX3NlbnRfYnlfcG9ydC5qb2luKCcnKSk7IH0sCiAgICAgICAgICBmdW5jdGlvbih0dGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodHRsLmpvaW4oJycpKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKGRlbHRhU2Vjb25kcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ1Nlc3Npb25fRXhwaXJlcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5kZWx0YVNlY29uZHMgPSBkZWx0YVNlY29uZHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgInJlZnJlc2hlciIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJyZWZyZXNoZXIiLCBkZXNjcmlwdGlvbjogIlwicmVmcmVzaGVyXCIiIH0sCiAgICAgICAgICAidWFzIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInVhcyIsIGRlc2NyaXB0aW9uOiAiXCJ1YXNcIiIgfSwKICAgICAgICAgICJ1YWMiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidWFjIiwgZGVzY3JpcHRpb246ICJcInVhY1wiIiB9LAogICAgICAgICAgZnVuY3Rpb24oZW5kcG9pbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgPT09ICdTZXNzaW9uX0V4cGlyZXMnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucmVmcmVzaGVyID0gZW5kcG9pbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24oZGVsdGFTZWNvbmRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnTWluX1NFJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gZGVsdGFTZWNvbmRzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICJzdHVucyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJzdHVucyIsIGRlc2NyaXB0aW9uOiAiXCJzdHVuc1wiIiB9LAogICAgICAgICAgInN0dW4iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAic3R1biIsIGRlc2NyaXB0aW9uOiAiXCJzdHVuXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihzY2hlbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuc2NoZW1lID0gc2NoZW1lOyB9LAogICAgICAgICAgZnVuY3Rpb24oaG9zdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ob3N0ID0gaG9zdDsgfSwKICAgICAgICAgICI/dHJhbnNwb3J0PSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICI/dHJhbnNwb3J0PSIsIGRlc2NyaXB0aW9uOiAiXCI/dHJhbnNwb3J0PVwiIiB9LAogICAgICAgICAgInR1cm5zIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInR1cm5zIiwgZGVzY3JpcHRpb246ICJcInR1cm5zXCIiIH0sCiAgICAgICAgICAidHVybiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0dXJuIiwgZGVzY3JpcHRpb246ICJcInR1cm5cIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHRleHQoKTsgfQogICAgICAgIF0sCgogICAgICAgIHBlZyRieXRlY29kZSA9IFsKICAgICAgICAgIHBlZyRkZWNvZGUoIi4gXCJcIjIgMyEiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjBcIlwiXCIxITMjIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIwJFwiXCIxITMlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIwJlwiXCIxITMnIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3JyojIFwiNygiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjAoXCJcIjEhMykiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjAqXCJcIjEhMysiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi4sXCJcIjIsMy0iKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi4uXCJcIjIuMy8iKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjAwXCJcIjEhMzEiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi4yXCJcIjIyMzMqXHg4OSBcIi40XCJcIjI0MzUqfSBcIi42XCJcIjI2MzcqcSBcIi44XCJcIjI4MzkqZSBcIi46XCJcIjI6MzsqWSBcIi48XCJcIjI8Mz0qTSBcIi4+XCJcIjI+Mz8qQSBcIi5AXCJcIjJAM0EqNSBcIi5CXCJcIjJCM0MqKSBcIi5EXCJcIjJEM0UiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjcpKiMgXCI3LCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLkZcIlwiMkYzRyp9IFwiLkhcIlwiMkgzSSpxIFwiLkpcIlwiMkozSyplIFwiLkxcIlwiMkwzTSpZIFwiLk5cIlwiMk4zTypNIFwiLlBcIlwiMlAzUSpBIFwiLlJcIlwiMlIzUyo1IFwiLlRcIlwiMlQzVSopIFwiLlZcIlwiMlYzVyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISEuWVwiXCIyWTNaKzckNyMrLSU3IysjJScjJSQjIyBYJFwiIyBYXCIjIFgrISAoJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISEgXFw3JCwjJjckXCIrLSQ3ICsjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrQCQgXFw3JCsmJCwjJjckXCJcIlwiIFgrJyU0XCI2XVwiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNy4qIyBcIiBbIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNycqIyBcIjcoLCkmNycqIyBcIjcoXCIrQSQuOFwiXCIyODM5KzElNy8rJyU0IzZeIyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISEgXFw3MismJCwjJjcyXCJcIlwiIFgrbyQgXFwhIFxcNy4sIyY3LlwiKy0kNzIrIyUnXCIlJFwiIyBYXCIjIFgsQCYhIFxcNy4sIyY3LlwiKy0kNzIrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCshICglIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIwX1wiXCIxITNgKiMgXCI3MyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiMGFcIlwiMSEzYiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiMGNcIlwiMSEzZCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNyEqKSBcIjBlXCJcIjEhM2YiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3KSpceDk1IFwiLkZcIlwiMkYzRypceDg5IFwiLkpcIlwiMkozSyp9IFwiLkxcIlwiMkwzTSpxIFwiLllcIlwiMlkzWiplIFwiLlBcIlwiMlAzUSpZIFwiLkhcIlwiMkgzSSpNIFwiLkBcIlwiMkAzQSpBIFwiLmdcIlwiMmczaCo1IFwiLlJcIlwiMlIzUyopIFwiLk5cIlwiMk4zTytceDlFJCxceDlCJjcpKlx4OTUgXCIuRlwiXCIyRjNHKlx4ODkgXCIuSlwiXCIySjNLKn0gXCIuTFwiXCIyTDNNKnEgXCIuWVwiXCIyWTNaKmUgXCIuUFwiXCIyUDNRKlkgXCIuSFwiXCIySDNJKk0gXCIuQFwiXCIyQDNBKkEgXCIuZ1wiXCIyZzNoKjUgXCIuUlwiXCIyUjNTKikgXCIuTlwiXCIyTjNPXCJcIlwiIFgrISAoJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDcpKlx4ODkgXCIuRlwiXCIyRjNHKn0gXCIuTFwiXCIyTDNNKnEgXCIuWVwiXCIyWTNaKmUgXCIuUFwiXCIyUDNRKlkgXCIuSFwiXCIySDNJKk0gXCIuQFwiXCIyQDNBKkEgXCIuZ1wiXCIyZzNoKjUgXCIuUlwiXCIyUjNTKikgXCIuTlwiXCIyTjNPK1x4OTIkLFx4OEYmNykqXHg4OSBcIi5GXCJcIjJGM0cqfSBcIi5MXCJcIjJMM00qcSBcIi5ZXCJcIjJZM1oqZSBcIi5QXCJcIjJQM1EqWSBcIi5IXCJcIjJIM0kqTSBcIi5AXCJcIjJAM0EqQSBcIi5nXCJcIjJnM2gqNSBcIi5SXCJcIjJSM1MqKSBcIi5OXCJcIjJOM09cIlwiXCIgWCshICglIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuVFwiXCIyVDNVKlx4RTMgXCIuVlwiXCIyVjNXKlx4RDcgXCIuaVwiXCIyaTNqKlx4Q0IgXCIua1wiXCIyazNsKlx4QkYgXCIuOlwiXCIyOjM7Klx4QjMgXCIuRFwiXCIyRDNFKlx4QTcgXCIuMlwiXCIyMjMzKlx4OUIgXCIuOFwiXCIyODM5Klx4OEYgXCIubVwiXCIybTNuKlx4ODMgXCI3Jip9IFwiLjRcIlwiMjQzNSpxIFwiLm9cIlwiMm8zcCplIFwiLnFcIlwiMnEzcipZIFwiLjZcIlwiMjYzNypNIFwiLj5cIlwiMj4zPypBIFwiLnNcIlwiMnMzdCo1IFwiLnVcIlwiMnUzdiopIFwiNycqIyBcIjcoIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNykqXHUwMTJCIFwiLkZcIlwiMkYzRypcdTAxMUYgXCIuSlwiXCIySjNLKlx1MDExMyBcIi5MXCJcIjJMM00qXHUwMTA3IFwiLllcIlwiMlkzWipceEZCIFwiLlBcIlwiMlAzUSpceEVGIFwiLkhcIlwiMkgzSSpceEUzIFwiLkBcIlwiMkAzQSpceEQ3IFwiLmdcIlwiMmczaCpceENCIFwiLlJcIlwiMlIzUypceEJGIFwiLk5cIlwiMk4zTypceEIzIFwiLlRcIlwiMlQzVSpceEE3IFwiLlZcIlwiMlYzVypceDlCIFwiLmlcIlwiMmkzaipceDhGIFwiLmtcIlwiMmszbCpceDgzIFwiLjhcIlwiMjgzOSp3IFwiLm1cIlwiMm0zbiprIFwiNyYqZSBcIi40XCJcIjI0MzUqWSBcIi5vXCJcIjJvM3AqTSBcIi5xXCJcIjJxM3IqQSBcIi42XCJcIjI2MzcqNSBcIi5zXCJcIjJzM3QqKSBcIi51XCJcIjJ1M3YrXHUwMTM0JCxcdTAxMzEmNykqXHUwMTJCIFwiLkZcIlwiMkYzRypcdTAxMUYgXCIuSlwiXCIySjNLKlx1MDExMyBcIi5MXCJcIjJMM00qXHUwMTA3IFwiLllcIlwiMlkzWipceEZCIFwiLlBcIlwiMlAzUSpceEVGIFwiLkhcIlwiMkgzSSpceEUzIFwiLkBcIlwiMkAzQSpceEQ3IFwiLmdcIlwiMmczaCpceENCIFwiLlJcIlwiMlIzUypceEJGIFwiLk5cIlwiMk4zTypceEIzIFwiLlRcIlwiMlQzVSpceEE3IFwiLlZcIlwiMlYzVypceDlCIFwiLmlcIlwiMmkzaipceDhGIFwiLmtcIlwiMmszbCpceDgzIFwiLjhcIlwiMjgzOSp3IFwiLm1cIlwiMm0zbiprIFwiNyYqZSBcIi40XCJcIjI0MzUqWSBcIi5vXCJcIjJvM3AqTSBcIi5xXCJcIjJxM3IqQSBcIi42XCJcIjI2MzcqNSBcIi5zXCJcIjJzM3QqKSBcIi51XCJcIjJ1M3ZcIlwiXCIgWCshICglIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rQSQuUFwiXCIyUDNRKzElNy8rJyU0IzZ3IyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcvK0EkLjRcIlwiMjQzNSsxJTcvKyclNCM2eCMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3LytBJC4+XCJcIjI+Mz8rMSU3LysnJTQjNnkjICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rQSQuVFwiXCIyVDNVKzElNy8rJyU0IzZ6IyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcvK0EkLlZcIlwiMlYzVysxJTcvKyclNCM2eyMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEua1wiXCIyazNsKzEkNy8rJyU0XCI2fFwiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcvKzckLmlcIlwiMmkzaisnJTRcIjZ9XCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rQSQuRFwiXCIyRDNFKzElNy8rJyU0IzZ+IyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcvK0EkLjJcIlwiMjIzMysxJTcvKyclNCM2fyMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3LytBJC44XCJcIjI4MzkrMSU3LysnJTQjNlx4ODAjICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rMSQ3JisnJTRcIjZceDgxXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNyYrMSQ3LysnJTRcIjZceDgxXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNz0rVyQgXFw3RyopIFwiN0sqIyBcIjdGLC8mN0cqKSBcIjdLKiMgXCI3RlwiKy0lNz4rIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIwXHg4MlwiXCIxITNceDgzKkEgXCIwXHg4NFwiXCIxITNceDg1KjUgXCIwXHg4NlwiXCIxITNceDg3KikgXCI3MyojIFwiNy4iKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhNy8rVSQ3JitLJSBcXDdKKiMgXCI3SywpJjdKKiMgXCI3S1wiKy0lNyYrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgrISAoJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcvK2AkNyYrViUhIFxcN0oqIyBcIjdLLCkmN0oqIyBcIjdLXCIrISAoJSsyJTcmKyglNCQ2XHg4OCQhISUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjcuKkcgXCIuTFwiXCIyTDNNKjsgXCIwXHg4OVwiXCIxITNceDhBKi8gXCIwXHg4NlwiXCIxITNceDg3KiMgXCI3MyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS5tXCJcIjJtM24rSyQwXHg4QlwiXCIxITNceDhDKjUgXCIwXHg4RFwiXCIxITNceDhFKikgXCIwXHg4RlwiXCIxITNceDkwKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN04rUSQuOFwiXCIyODM5K0ElN08qIyBcIiBbKzElN1MrJyU0JDZceDkxJCAlJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN04rayQuOFwiXCIyODM5K1slN08qIyBcIiBbK0slN1MrQSU3Xys3JTdsKiMgXCIgWysnJTQmNlx4OTImICUkJiMgWCQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4OTNcIlwiMSQzXHg5NCopIFwiL1x4OTVcIlwiMSMzXHg5NisnIDQhNlx4OTchISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1ArYiQhLjhcIlwiMjgzOSstJDdSKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWys3JS46XCJcIjI6MzsrJyU0IzZceDk4IyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcNysqKSBcIjctKiMgXCI3USsyJCwvJjcrKikgXCI3LSojIFwiN1FcIlwiXCIgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLjxcIlwiMjwzPSpxIFwiLj5cIlwiMj4zPyplIFwiLkBcIlwiMkAzQSpZIFwiLkJcIlwiMkIzQypNIFwiLkRcIlwiMkQzRSpBIFwiLjJcIlwiMjIzMyo1IFwiLjZcIlwiMjYzNyopIFwiLjRcIlwiMjQzNSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDcrKl8gXCI3LSpZIFwiLjxcIlwiMjwzPSpNIFwiLj5cIlwiMj4zPypBIFwiLkBcIlwiMkAzQSo1IFwiLkJcIlwiMkIzQyopIFwiLkRcIlwiMkQzRSxlJjcrKl8gXCI3LSpZIFwiLjxcIlwiMjwzPSpNIFwiLj5cIlwiMj4zPypBIFwiLkBcIlwiMkAzQSo1IFwiLkJcIlwiMkIzQyopIFwiLkRcIlwiMkQzRVwiKyYgNCE2XHg5OSEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdUK04kIS44XCJcIjI4MzkrLSQ3XisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3VSopIFwiN1xcKiMgXCI3WCsmIDQhNlx4OUEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFwhN1YrMyQuSlwiXCIySjNLKyMlJ1wiJSRcIiMgWFwiIyBYLD4mITdWKzMkLkpcIlwiMkozSysjJSdcIiUkXCIjIFhcIiMgWFwiK0ckN1crPSUuSlwiXCIySjNLKiMgXCIgWysnJTQjNlx4OUIjICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFwwXHg5Q1wiXCIxITNceDlEKywkLCkmMFx4OUNcIlwiMSEzXHg5RFwiXCJcIiBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhMCRcIlwiMSEzJStBJCBcXDBceDlFXCJcIjEhM1x4OUYsKSYwXHg5RVwiXCIxITNceDlGXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEub1wiXCIybzNwK0EkN1krNyUucVwiXCIycTNyKyclNCM2XHhBMCMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhN1orXHhCRiQuOFwiXCIyODM5K1x4QUYlN1orXHhBNSUuOFwiXCIyODM5K1x4OTUlN1orXHg4QiUuOFwiXCIyODM5K3slN1orcSUuOFwiXCIyODM5K2ElN1orVyUuOFwiXCIyODM5K0clN1orPSUuOFwiXCIyODM5Ky0lN1srIyUnLSUkLSMgWCQsIyBYJCsjIFgkKiMgWCQpIyBYJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwODM4IFwiIS5ceEExXCJcIjJceEExM1x4QTIrXHhBRiQ3WitceEE1JS44XCJcIjI4MzkrXHg5NSU3WitceDhCJS44XCJcIjI4MzkreyU3WitxJS44XCJcIjI4MzkrYSU3WitXJS44XCJcIjI4MzkrRyU3Wis9JS44XCJcIjI4MzkrLSU3WysjJScsJSQsIyBYJCsjIFgkKiMgWCQpIyBYJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwNzk1IFwiIS5ceEExXCJcIjJceEExM1x4QTIrXHg5NSQ3WitceDhCJS44XCJcIjI4MzkreyU3WitxJS44XCJcIjI4MzkrYSU3WitXJS44XCJcIjI4MzkrRyU3Wis9JS44XCJcIjI4MzkrLSU3WysjJScqJSQqIyBYJCkjIFgkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA3MEMgXCIhLlx4QTFcIlwiMlx4QTEzXHhBMit7JDdaK3ElLjhcIlwiMjgzOSthJTdaK1clLjhcIlwiMjgzOStHJTdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJyglJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwNjlEIFwiIS5ceEExXCJcIjJceEExM1x4QTIrYSQ3WitXJS44XCJcIjI4MzkrRyU3Wis9JS44XCJcIjI4MzkrLSU3WysjJScmJSQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwNjQ4IFwiIS5ceEExXCJcIjJceEExM1x4QTIrRyQ3Wis9JS44XCJcIjI4MzkrLSU3WysjJSckJSQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA2MEQgXCIhLlx4QTFcIlwiMlx4QTEzXHhBMistJDdbKyMlJ1wiJSRcIiMgWFwiIyBYKlx1MDVFQyBcIiEuXHhBMVwiXCIyXHhBMTNceEEyKy0kN1orIyUnXCIlJFwiIyBYXCIjIFgqXHUwNUNCIFwiITdaK1x4QTUkLlx4QTFcIlwiMlx4QTEzXHhBMitceDk1JTdaK1x4OEIlLjhcIlwiMjgzOSt7JTdaK3ElLjhcIlwiMjgzOSthJTdaK1clLjhcIlwiMjgzOStHJTdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJyslJCsjIFgkKiMgWCQpIyBYJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwNTM4IFwiITdaK1x4QjYkIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHg4QiUuXHhBMVwiXCIyXHhBMTNceEEyK3slN1orcSUuOFwiXCIyODM5K2ElN1orVyUuOFwiXCIyODM5K0clN1orPSUuOFwiXCIyODM5Ky0lN1srIyUnKiUkKiMgWCQpIyBYJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwNDk0IFwiITdaK1x4QzckIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHg5QyUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytxJS5ceEExXCJcIjJceEExM1x4QTIrYSU3WitXJS44XCJcIjI4MzkrRyU3Wis9JS44XCJcIjI4MzkrLSU3WysjJScpJSQpIyBYJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwM0RGIFwiITdaK1x4RDgkIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHhBRCUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceDgyJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1clLlx4QTFcIlwiMlx4QTEzXHhBMitHJTdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJyglJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwMzE5IFwiITdaK1x4RTkkIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHhCRSUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceDkzJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK2glIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrPSUuXHhBMVwiXCIyXHhBMTNceEEyKy0lN1srIyUnJyUkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwMjQyIFwiITdaK1x1MDExNCQhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceEU5JSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1x4QkUlIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHg5MyUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytoJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKz0lLlx4QTFcIlwiMlx4QTEzXHhBMistJTdaKyMlJyglJCgjIFgkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgqXHUwMTQwIFwiITdaK1x1MDEzNSQhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytcdTAxMEElIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHhERiUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceEI0JSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1x4ODklIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXiUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWyszJS5ceEExXCJcIjJceEExM1x4QTIrIyUnKCUkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCsmIDQhNlx4QTMhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3IytTJDcjKiMgXCIgWytDJTcjKiMgXCIgWyszJTcjKiMgXCIgWysjJSckJSQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdaKz0kLjhcIlwiMjgzOSstJTdaKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCojIFwiN1xcIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN10rdSQuSlwiXCIySjNLK2UlN10rWyUuSlwiXCIySjNLK0slN10rQSUuSlwiXCIySjNLKzElN10rJyU0JzZceEE0JyAlJCcjIFgkJiMgWCQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhLlx4QTVcIlwiMlx4QTUzXHhBNiszJDBceEE3XCJcIjEhM1x4QTgrIyUnXCIlJFwiIyBYXCIjIFgqXHhBMCBcIiEuXHhBOVwiXCIyXHhBOTNceEFBKz0kMFx4QUJcIlwiMSEzXHhBQystJTchKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCpvIFwiIS5ceEFEXCJcIjJceEFEM1x4QUUrNyQ3ISstJTchKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCpEIFwiITBceEFGXCJcIjEhM1x4QjArLSQ3ISsjJSdcIiUkXCIjIFhcIiMgWCojIFwiNyEiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhNyEqIyBcIiBbK2MkNyEqIyBcIiBbK1MlNyEqIyBcIiBbK0MlNyEqIyBcIiBbKzMlNyEqIyBcIiBbKyMlJyUlJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgrJyA0ITZceEIxISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcIS4yXCJcIjIyMzMrLSQ3YCsjJSdcIiUkXCIjIFhcIiMgWCw+JiEuMlwiXCIyMjMzKy0kN2ArIyUnXCIlJFwiIyBYXCIjIFhcIiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN2EqQSBcIjdiKjsgXCI3Yyo1IFwiN2QqLyBcIjdlKikgXCI3ZiojIFwiN2ciKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhCMlwiXCIxKjNceEIzK2IkL1x4QjRcIlwiMSMzXHhCNSpHIFwiL1x4QjZcIlwiMSMzXHhCNyo7IFwiL1x4QjhcIlwiMSQzXHhCOSovIFwiL1x4QkFcIlwiMSMzXHhCQiojIFwiNzYrKCU0XCI2XHhCQ1wiISAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhCRFwiXCIxJTNceEJFK0okL1x4QkZcIlwiMSUzXHhDMCovIFwiL1x4QzFcIlwiMVwiM1x4QzIqIyBcIjc2KyglNFwiNlx4QzNcIiEgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4QzRcIlwiMSczXHhDNSsyJDdceDhGKyglNFwiNlx4QzZcIiEgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4QzdcIlwiMSQzXHhDOCsyJDdceEVGKyglNFwiNlx4QzlcIiEgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4Q0FcIlwiMSYzXHhDQisyJDdUKyglNFwiNlx4Q0NcIiEgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4Q0RcIlwiMVwiM1x4Q0UrUiQhLj5cIlwiMj4zPystJDc2KyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWysnJTRcIjZceENGXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN2grVCQhLj5cIlwiMj4zPystJDdpKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWyspJTRcIjZceEQwXCJcIiEgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcN2orJiQsIyY3alwiXCJcIiBYKyEgKCUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3aismJCwjJjdqXCJcIlwiIFgrISAoJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN2sqKSBcIjcrKiMgXCI3LSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLm9cIlwiMm8zcCplIFwiLnFcIlwiMnEzcipZIFwiLjRcIlwiMjQzNSpNIFwiLjhcIlwiMjgzOSpBIFwiLjxcIlwiMjwzPSo1IFwiLkBcIlwiMkAzQSopIFwiLkJcIlwiMkIzQyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS42XCJcIjI2MzcrdSQ3bStrJSBcXCEuPFwiXCIyPDM9Ky0kN20rIyUnXCIlJFwiIyBYXCIjIFgsPiYhLjxcIlwiMjwzPSstJDdtKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN24rQyQuPlwiXCIyPjM/KzMlN28rKSU0IzZceEQxI1wiXCIgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiBcXDdwKikgXCI3KyojIFwiNy0rMiQsLyY3cCopIFwiNysqIyBcIjctXCJcIlwiIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiBcXDdwKikgXCI3KyojIFwiNy0sLyY3cCopIFwiNysqIyBcIjctXCIiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5vXCJcIjJvM3AqZSBcIi5xXCJcIjJxM3IqWSBcIi40XCJcIjI0MzUqTSBcIi42XCJcIjI2MzcqQSBcIi44XCJcIjI4MzkqNSBcIi5AXCJcIjJAM0EqKSBcIi5CXCJcIjJCM0MiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceDkwKiMgXCI3ciIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceDhGK0skNycrQSU3cys3JTcnKy0lN1x4ODQrIyUnJSUkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN00qIyBcIjd0IiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN38rRyQuOFwiXCIyODM5KzclN3UqIyBcIjd4KyclNCM2XHhEMiMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3diojIFwiN3crTiQhLjZcIlwiMjYzNystJDdceDgzKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWysjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS5ceEQzXCJcIjJceEQzM1x4RDQrPSQ3XHg4MCszJTd3KiMgXCIgWysjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEuNFwiXCIyNDM1Ky0kN3srIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3eis1JCBcXDd5LCMmN3lcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNyoqKSBcIjcrKiMgXCI3LSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNysqXHg4RiBcIjctKlx4ODkgXCIuMlwiXCIyMjMzKn0gXCIuNlwiXCIyNjM3KnEgXCIuOFwiXCIyODM5KmUgXCIuOlwiXCIyOjM7KlkgXCIuPFwiXCIyPDM9Kk0gXCIuPlwiXCIyPjM/KkEgXCIuQFwiXCIyQDNBKjUgXCIuQlwiXCIyQjNDKikgXCIuRFwiXCIyRDNFIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN3wrayQgXFwhLjRcIlwiMjQzNSstJDd8KyMlJ1wiJSRcIiMgWFwiIyBYLD4mIS40XCJcIjI0MzUrLSQ3fCsjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcN34sIyY3flwiK2skIFxcIS4yXCJcIjIyMzMrLSQ3fSsjJSdcIiUkXCIjIFhcIiMgWCw+JiEuMlwiXCIyMjMzKy0kN30rIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcN34sIyY3flwiIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3Kyp3IFwiNy0qcSBcIi44XCJcIjI4MzkqZSBcIi46XCJcIjI6MzsqWSBcIi48XCJcIjI8Mz0qTSBcIi4+XCJcIjI+Mz8qQSBcIi5AXCJcIjJAM0EqNSBcIi5CXCJcIjJCM0MqKSBcIi5EXCJcIjJEM0UiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XCIrXHg4RCQgXFw3XCIqRyBcIjchKkEgXCIuQFwiXCIyQDNBKjUgXCIuRlwiXCIyRjNHKikgXCIuSlwiXCIySjNLLE0mN1wiKkcgXCI3ISpBIFwiLkBcIlwiMkAzQSo1IFwiLkZcIlwiMkYzRyopIFwiLkpcIlwiMkozS1wiKyclNFwiNlx4RDVcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceDgxKiMgXCI3XHg4MiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3TyszJC46XCJcIjI6MzsrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKy0kN1MrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFw3KypceDgzIFwiNy0qfSBcIi5CXCJcIjJCM0MqcSBcIi5EXCJcIjJEM0UqZSBcIi4yXCJcIjIyMzMqWSBcIi44XCJcIjI4MzkqTSBcIi46XCJcIjI6MzsqQSBcIi48XCJcIjI8Mz0qNSBcIi4+XCJcIjI+Mz8qKSBcIi5AXCJcIjJAM0ErXHg4QyQsXHg4OSY3KypceDgzIFwiNy0qfSBcIi5CXCJcIjJCM0MqcSBcIi5EXCJcIjJEM0UqZSBcIi4yXCJcIjIyMzMqWSBcIi44XCJcIjI4MzkqTSBcIi46XCJcIjI6MzsqQSBcIi48XCJcIjI8Mz0qNSBcIi4+XCJcIjI+Mz8qKSBcIi5AXCJcIjJAM0FcIlwiXCIgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcN3ksIyY3eVwiIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4OTVcIlwiMSMzXHhENit5JC40XCJcIjI0MzUraSUgXFw3ISsmJCwjJjchXCJcIlwiIFgrUCUuSlwiXCIySjNLK0AlIFxcNyErJiQsIyY3IVwiXCJcIiBYKyclNCU2XHhENyUgJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhEOFwiXCIyXHhEODNceEQ5IiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhEQVwiXCIyXHhEQTNceERCIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhEQ1wiXCIyXHhEQzNceEREIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhERVwiXCIyXHhERTNceERGIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhFMFwiXCIyXHhFMDNceEUxIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhFMlwiXCIyXHhFMjNceEUzIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhFNFwiXCIyXHhFNDNceEU1IiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhFNlwiXCIyXHhFNjNceEU3IiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhFOFwiXCIyXHhFODNceEU5IiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuXHhFQVwiXCIyXHhFQTNceEVCIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4ODUqUyBcIjdceDg2Kk0gXCI3XHg4OCpHIFwiN1x4ODkqQSBcIjdceDhBKjsgXCI3XHg4Qio1IFwiN1x4OEMqLyBcIjdceDhEKikgXCI3XHg4RSojIFwiNzYrJiA0ITZceEVDISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4ODQrSyQ3JytBJTdceDkxKzclNycrLSU3XHg5MysjJSclJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4OTIrJyA0ITZceEVEISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITchKzckNyErLSU3ISsjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3KipBIFwiNysqOyBcIjctKjUgXCI3MyovIFwiNzQqKSBcIjcnKiMgXCI3KCxHJjcqKkEgXCI3Kyo7IFwiNy0qNSBcIjczKi8gXCI3NCopIFwiNycqIyBcIjcoXCIrJiA0ITZceEVFISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4QjUrXyQgXFwhN0ErLSQ3XHhCNSsjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QSstJDdceEI1KyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3OStSJCEuOlwiXCIyOjM7Ky0kNzkrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKyclNFwiNlx4RUZcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3OipqIFwiITdceDk3K18kIFxcITdBKy0kN1x4OTcrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0ErLSQ3XHg5NysjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYKyYgNCE2XHhGMCEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdMKiMgXCI3XHg5OCtjJCBcXCE3QistJDdceDlBKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4OUErIyUnXCIlJFwiIyBYXCIjIFhcIisnJTRcIjZceEYxXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4OTkqIyBcIiBbK0EkN0ArNyU3TSstJTc/KyMlJyQlJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhITc2K18kIFxcITcuKy0kNzYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhNy4rLSQ3NisjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCI3SCsnIDQhNlx4RjIhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHg5QiopIFwiN1x4OUMqIyBcIjdceDlGIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4RjNcIlwiMSEzXHhGNCs8JDc8KzIlN1x4OUUrKCU0IzZceEY1IyEgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhGNlwiXCIxJzNceEY3KzwkNzwrMiU3XHg5RCsoJTQjNlx4RjgjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDchKyYkLCMmNyFcIlwiXCIgWCsnIDQhNlx4RjkhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhLlx4RkFcIlwiMlx4RkEzXHhGQit4JCEuSlwiXCIySjNLK1MkNyEqIyBcIiBbK0MlNyEqIyBcIiBbKzMlNyEqIyBcIiBbKyMlJyQlJCQjIFgkIyMgWCRcIiMgWFwiIyBYKiMgXCIgWysnJTRcIjZceEZDXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNzYrTiQhNzwrLSQ3XHhBMCsjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrKSU0XCI2XHhGRFwiXCIhICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNzYqKSBcIjdUKiMgXCI3SCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEEyK18kIFxcITdCKy0kN1x4QTMrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHhBMysjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4RkVcIlwiMSYzXHhGRipHIFwiL1x1MDEwMFwiXCIxJzNcdTAxMDEqOyBcIi9cdTAxMDJcIlwiMSQzXHUwMTAzKi8gXCIvXHUwMTA0XCJcIjElM1x1MDEwNSojIFwiNzYrJiA0ITZcdTAxMDYhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceEE0KiMgXCI3XHg5RiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMDdcIlwiMSgzXHUwMTA4K08kNzwrRSUvXHUwMTA5XCJcIjEoM1x1MDEwQSovIFwiL1x1MDEwQlwiXCIxKDNcdTAxMEMqIyBcIjc2KyMlJyMlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITc2K18kIFxcITdBKy0kNzYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0ErLSQ3NisjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNyErJiQsIyY3IVwiXCJcIiBYKycgNCE2XHUwMTBEISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEE4KyYgNCE2XHUwMTBFISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4QTkrcyQ3OytpJTdceEFFK18lIFxcITdCKy0kN1x4QUYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHhBRisjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJyQlJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHhBQSojIFwiN1x4QUIiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi9cdTAxMEZcIlwiMSQzXHUwMTEwKlMgXCIvXHUwMTExXCJcIjElM1x1MDExMipHIFwiL1x1MDExM1wiXCIxJTNcdTAxMTQqOyBcIi9cdTAxMTVcIlwiMSUzXHUwMTE2Ki8gXCIvXHUwMTE3XCJcIjErM1x1MDExOCojIFwiN1x4QUMiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi9cdTAxMTlcIlwiMSczXHUwMTFBKi8gXCIvXHUwMTFCXCJcIjEpM1x1MDExQyojIFwiN1x4QUMiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjc2KiMgXCI3XHhBRCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMURcIlwiMVwiM1x1MDExRSstJDc2KyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHhBQyojIFwiNzYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3Nis3JDc8Ky0lN1x4QjArIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3NiojIFwiN0giKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhCMis3JDcuKy0lN1x4OEYrIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNyErJiQsIyY3IVwiXCJcIiBYKycgNCE2XHUwMTFGISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceDlEKycgNCE2XHUwMTIwISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEI1K2QkIFxcITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHg5RisjJSdcIiUkXCIjIFhcIiMgWFwiKyglNFwiNlx1MDEyMVwiISElJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhNzcrayQgXFwhLkpcIlwiMkozSystJDc3KyMlJ1wiJSRcIiMgWFwiIyBYLD4mIS5KXCJcIjJKM0srLSQ3NysjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYKyEgKCUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3TCojIFwiN1x4OTgrYyQgXFwhN0IrLSQ3XHhCNysjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceEI3KyMlJ1wiJSRcIiMgWFwiIyBYXCIrJyU0XCI2XHUwMTIyXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHhCOCojIFwiN1x4OUYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTIzXCJcIjEjM1x1MDEyNCs8JDc8KzIlNzYrKCU0IzZcdTAxMjUjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDchKyYkLCMmNyFcIlwiXCIgWCsnIDQhNlx1MDEyNiEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5RCsnIDQhNlx1MDEyNyEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3XHg5OSwjJjdceDk5XCIrXHg4MSQ3QCt3JTdNK20lNz8rYyUgXFwhN0IrLSQ3XHg5RisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYXCIrJyU0JTZcdTAxMjglICUkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4QkQiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTI5XCJcIjEmM1x1MDEyQStzJDcuK2klN1x4QzArXyUgXFwhN0ErLSQ3XHhDMCsjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QSstJDdceEMwKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgqIyBcIjdceEJFIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNzYrcyQ3LitpJTdceEJGK18lIFxcITdBKy0kN1x4QkYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0ErLSQ3XHhCRisjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJyQlJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNzYrPSQ3PCszJTc2KiMgXCI3SCsjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceEMxKkcgXCI3XHhDMypBIFwiN1x4QzUqOyBcIjdceEM3KjUgXCI3XHhDOCovIFwiN1x4QzkqKSBcIjdceENBKiMgXCI3XHhCRiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMkJcIlwiMSUzXHUwMTJDKzckNzwrLSU3XHhDMisjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3SSsnIDQhNlx1MDEyRCEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTJFXCJcIjEmM1x1MDEyRitceEE1JDc8K1x4OUIlN0QrXHg5MSU3XHhDNCtceDg3JSBcXCEgXFw3JysmJCwjJjcnXCJcIlwiIFgrLSQ3XHhDNCsjJSdcIiUkXCIjIFhcIiMgWCxHJiEgXFw3JysmJCwjJjcnXCJcIlwiIFgrLSQ3XHhDNCsjJSdcIiUkXCIjIFhcIiMgWFwiKy0lN0UrIyUnJiUkJiMgWCQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3dCojIFwiN3ciKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTMwXCJcIjElM1x1MDEzMSs3JDc8Ky0lN1x4QzYrIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN0krJyA0ITZcdTAxMzIhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDEzM1wiXCIxJjNcdTAxMzQrPCQ3PCsyJTdJKyglNCM2XHUwMTM1IyEgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTM2XCJcIjElM1x1MDEzNytfJDc8K1UlIS9cdTAxMzhcIlwiMSQzXHUwMTM5KyYgNCE2XHUwMTNBISAlKjQgXCIhL1x1MDEzQlwiXCIxJTNcdTAxM0MrJiA0ITZcdTAxM0QhICUrIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDEzRVwiXCIxKTNcdTAxM0YrVCQ3PCtKJS9cdTAxNDBcIlwiMSMzXHUwMTQxKi8gXCIvXHUwMTQyXCJcIjEoM1x1MDE0MyojIFwiNzYrKCU0IzZcdTAxNDQjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxNDVcIlwiMSMzXHUwMTQ2K1x4OUUkNzwrXHg5NCU3RCtceDhBJSE3XHhDQitrJCBcXCEuRFwiXCIyRDNFKy0kN1x4Q0IrIyUnXCIlJFwiIyBYXCIjIFgsPiYhLkRcIlwiMkQzRSstJDdceENCKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgrLSU3RSsjJSclJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE0N1wiXCIxKDNcdTAxNDgqLyBcIi9cdTAxNDlcIlwiMSQzXHUwMTRBKiMgXCI3NisnIDQhNlx1MDE0QiEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3NitfJCBcXCE3QSstJDc2KyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdBKy0kNzYrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceENFK0skNy4rQSU3XHhDRSs3JTcuKy0lN1x4OEYrIyUnJSUkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDchKyYkLCMmNyFcIlwiXCIgWCsnIDQhNlx1MDE0QyEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhEMCtjJCBcXCE3QSstJDdceEQwKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdBKy0kN1x4RDArIyUnXCIlJFwiIyBYXCIjIFhcIisnJTRcIjZcdTAxNERcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5OCtjJCBcXCE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFhcIisnJTRcIjZcdTAxNEVcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3TCpUIFwiN1x4OTgqTiBcIiE3QCojIFwiIFsrPSQ3dCszJTc/KiMgXCIgWysjJScjJSQjIyBYJFwiIyBYXCIjIFgrYyQgXFwhN0IrLSQ3XHg5RisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYXCIrJyU0XCI2XHUwMTRGXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RDMrYyQgXFwhN0IrLSQ3XHhENCsjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceEQ0KyMlJ1wiJSRcIiMgWFwiIyBYXCIrJyU0XCI2XHUwMTUwXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4OTUrJiA0ITZcdTAxNTEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTUyXCJcIjEoM1x1MDE1Mys8JDc8KzIlNzYrKCU0IzZcdTAxNTQjISAlJCMjIFgkXCIjIFhcIiMgWCpqIFwiIS9cdTAxNTVcIlwiMSYzXHUwMTU2KzwkNzwrMiU3NisoJTQjNlx1MDE1NyMhICUkIyMgWCRcIiMgWFwiIyBYKjogXCIhL1x1MDE1OFwiXCIxKjNcdTAxNTkrJiA0ITZcdTAxNUEhICUqIyBcIjdceDlGIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhITc2K28kIFxcITdBKzIkNzYrKCU0XCI2XHUwMTVCXCIhICUkXCIjIFhcIiMgWCw9JiE3QSsyJDc2KyglNFwiNlx1MDE1QlwiISAlJFwiIyBYXCIjIFhcIispJTRcIjZcdTAxNUNcIlwiISAlJFwiIyBYXCIjIFgqIyBcIiBbKycgNCE2XHUwMTVEISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEQ3K18kIFxcITdBKy0kN1x4RDcrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0ErLSQ3XHhENysjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4OTgrXyQgXFwhN0IrLSQ3XHg5RisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3ISsmJCwjJjchXCJcIlwiIFgrJyA0ITZcdTAxNUUhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4REErXyQgXFwhN0IrLSQ3XHhEQisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceERCKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTVGXCJcIjEmM1x1MDE2MCo7IFwiL1x1MDE2MVwiXCIxJzNcdTAxNjIqLyBcIi9cdTAxNjNcIlwiMSozXHUwMTY0KiMgXCI3NismIDQhNlx1MDE2NSEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxNjZcIlwiMSYzXHUwMTY3KzwkNzwrMiU3XHhEQysoJTQjNlx1MDE2OCMhICUkIyMgWCRcIiMgWFwiIyBYKlx4ODMgXCIhL1x4RjZcIlwiMSczXHhGNys8JDc8KzIlN1x4OUQrKCU0IzZcdTAxNjkjISAlJCMjIFgkXCIjIFhcIiMgWCpTIFwiIS9cdTAxNkFcIlwiMSszXHUwMTZCKzwkNzwrMiU3XHg5RCsoJTQjNlx1MDE2QyMhICUkIyMgWCRcIiMgWFwiIyBYKiMgXCI3XHg5RiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiL1x1MDE2RFwiXCIxKzNcdTAxNkUqayBcIi9cdTAxNkZcIlwiMSkzXHUwMTcwKl8gXCIvXHUwMTcxXCJcIjEoM1x1MDE3MipTIFwiL1x1MDE3M1wiXCIxJzNcdTAxNzQqRyBcIi9cdTAxNzVcIlwiMSYzXHUwMTc2KjsgXCIvXHUwMTc3XCJcIjEqM1x1MDE3OCovIFwiL1x1MDE3OVwiXCIxKTNcdTAxN0EqIyBcIjc2IiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3MSojIFwiIFsiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhNzYrbyQgXFwhN0ErMiQ3NisoJTRcIjZcdTAxNUJcIiEgJSRcIiMgWFwiIyBYLD0mITdBKzIkNzYrKCU0XCI2XHUwMTVCXCIhICUkXCIjIFhcIiMgWFwiKyklNFwiNlx1MDE1Q1wiXCIhICUkXCIjIFhcIiMgWCojIFwiIFsrJyA0ITZcdTAxN0IhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN0wqIyBcIjdceDk4K2MkIFxcITdCKy0kN1x4RTArIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHhFMCsjJSdcIiUkXCIjIFhcIiMgWFwiKyclNFwiNlx1MDE3Q1wiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4QjgqIyBcIjdceDlGIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RTIrXyQgXFwhN0ErLSQ3XHhFMisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QSstJDdceEUyKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhFOStzJDcuK2klN1x4RUMrXyUgXFwhN0IrLSQ3XHhFMysjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceEUzKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceEU0KjsgXCI3XHhFNSo1IFwiN1x4RTYqLyBcIjdceEU3KikgXCI3XHhFOCojIFwiN1x4OUYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTdEXCJcIjEjM1x1MDE3RSs8JDc8KzIlN1x4RUYrKCU0IzZcdTAxN0YjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxODBcIlwiMSUzXHUwMTgxKzwkNzwrMiU3VCsoJTQjNlx1MDE4MiMhICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE4M1wiXCIxKDNcdTAxODQrQiQ3PCs4JTdcXCojIFwiN1krKCU0IzZcdTAxODUjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxODZcIlwiMSYzXHUwMTg3KzwkNzwrMiU3NisoJTQjNlx1MDE4OCMhICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE4OVwiXCIxJTNcdTAxOEErVCQhNzwrNSQgXFw3ISwjJjchXCIrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKyclNFwiNlx1MDE4QlwiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEVBK0skNzsrQSU3Nis3JTc7Ky0lN1x4RUIrIyUnJSUkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9ceDk1XCJcIjEjM1x4RDYqIyBcIjc2KycgNCE2XHUwMThDISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9ceEI0XCJcIjEjM1x1MDE4RCpHIFwiL1x4QjZcIlwiMSMzXHUwMThFKjsgXCIvXHhCQVwiXCIxIzNcdTAxOEYqLyBcIi9ceEI4XCJcIjEkM1x1MDE5MCojIFwiNzYrJyA0ITZcdTAxOTEhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RUQrSCQhN0MrLSQ3XHhFRSsjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3VSopIFwiN1xcKiMgXCI3WCsmIDQhNlx1MDE5MiEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3ISojIFwiIFsrYyQ3ISojIFwiIFsrUyU3ISojIFwiIFsrQyU3ISojIFwiIFsrMyU3ISojIFwiIFsrIyUnJSUkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCsnIDQhNlx1MDE5MyEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhNyErQyQ3ISojIFwiIFsrMyU3ISojIFwiIFsrIyUnIyUkIyMgWCRcIiMgWFwiIyBYKycgNCE2XHUwMTk0ISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4QkQiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5RCtkJCBcXCE3QistJDdceEYyKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4RjIrIyUnXCIlJFwiIyBYXCIjIFhcIisoJTRcIjZcdTAxOTVcIiEhJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHhGMyojIFwiN1x4OUYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEuXHUwMTk2XCJcIjJcdTAxOTYzXHUwMTk3K04kNzwrRCUuXHUwMTk4XCJcIjJcdTAxOTgzXHUwMTk5KikgXCIuXHUwMTlBXCJcIjJcdTAxOUEzXHUwMTlCKyglNCM2XHUwMTlDIyEgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5RCtkJCBcXCE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFhcIisoJTRcIjZcdTAxOURcIiEhJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNzYrNyQ3MCstJTdceEY2KyMlJyMlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcNzIqKSBcIjc0KiMgXCI3LiwvJjcyKikgXCI3NCojIFwiNy5cIiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcNyUsIyY3JVwiIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RjkrPSQuOFwiXCIyODM5Ky0lN1x4RkErIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE5RVwiXCIxJTNcdTAxOUYqKSBcIi9cdTAxQTBcIlwiMSQzXHUwMUExKycgNCE2XHUwMUEyISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEZCK04kIS44XCJcIjI4MzkrLSQ3XisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XFwqKSBcIjdYKiMgXCI3XHg4MisnIDQhNlx1MDFBMyEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3XHhGRCopIFwiNy0qIyBcIjdceEZFLC8mN1x4RkQqKSBcIjctKiMgXCI3XHhGRVwiKyEgKCUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdcIipTIFwiNyEqTSBcIi5GXCJcIjJGM0cqQSBcIi5KXCJcIjJKM0sqNSBcIi5IXCJcIjJIM0kqKSBcIi5OXCJcIjJOM08iKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5MXCJcIjJMM00qXHg5NSBcIi5CXCJcIjJCM0MqXHg4OSBcIi48XCJcIjI8Mz0qfSBcIi5SXCJcIjJSM1MqcSBcIi5UXCJcIjJUM1UqZSBcIi5WXCJcIjJWM1cqWSBcIi5QXCJcIjJQM1EqTSBcIi5AXCJcIjJAM0EqQSBcIi5EXCJcIjJEM0UqNSBcIi4yXCJcIjIyMzMqKSBcIi4+XCJcIjI+Mz8iKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHUwMTAwK2gkLjhcIlwiMjgzOStYJTdceEZBK04lIS5cdTAxQTRcIlwiMlx1MDFBNDNcdTAxQTUrLSQ3XHhFQisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMUE2XCJcIjElM1x1MDFBNyopIFwiL1x1MDFBOFwiXCIxJDNcdTAxQTkrJyA0ITZcdTAxQTIhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RUIrUSQvXHhCNFwiXCIxIzNceEI1KjcgXCIvXHhCNlwiXCIxIzNceEI3KisgXCIgXFw3KywjJjcrXCIrJyU0XCI2XHUwMUFBXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x1MDEwNCtceDhGJC5GXCJcIjJGM0crfyU3XHUwMTAzK3UlLkZcIlwiMkYzRytlJTdcdTAxMDMrWyUuRlwiXCIyRjNHK0slN1x1MDEwMytBJS5GXCJcIjJGM0crMSU3XHUwMTA1KyclNCk2XHUwMUFCKSAlJCkjIFgkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcjK0EkNyMrNyU3IystJTcjKyMlJyQlJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x1MDEwMystJDdcdTAxMDMrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHUwMTAzKzckN1x1MDEwMystJTdcdTAxMDMrIyUnIyUkIyMgWCRcIiMgWFwiIyBYIikKICAgICAgICBdLAoKICAgICAgICBwZWckY3VyclBvcyAgICAgICAgICA9IDAsCiAgICAgICAgcGVnJHJlcG9ydGVkUG9zICAgICAgPSAwLAogICAgICAgIHBlZyRjYWNoZWRQb3MgICAgICAgID0gMCwKICAgICAgICBwZWckY2FjaGVkUG9zRGV0YWlscyA9IHsgbGluZTogMSwgY29sdW1uOiAxLCBzZWVuQ1I6IGZhbHNlIH0sCiAgICAgICAgcGVnJG1heEZhaWxQb3MgICAgICAgPSAwLAogICAgICAgIHBlZyRtYXhGYWlsRXhwZWN0ZWQgID0gW10sCiAgICAgICAgcGVnJHNpbGVudEZhaWxzICAgICAgPSAwLAoKICAgICAgICBwZWckcmVzdWx0OwoKICAgIGlmICgic3RhcnRSdWxlIiBpbiBvcHRpb25zKSB7CiAgICAgIGlmICghKG9wdGlvbnMuc3RhcnRSdWxlIGluIHBlZyRzdGFydFJ1bGVJbmRpY2VzKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2FuJ3Qgc3RhcnQgcGFyc2luZyBmcm9tIHJ1bGUgXCIiICsgb3B0aW9ucy5zdGFydFJ1bGUgKyAiXCIuIik7CiAgICAgIH0KCiAgICAgIHBlZyRzdGFydFJ1bGVJbmRleCA9IHBlZyRzdGFydFJ1bGVJbmRpY2VzW29wdGlvbnMuc3RhcnRSdWxlXTsKICAgIH0KCiAgICBmdW5jdGlvbiB0ZXh0KCkgewogICAgICByZXR1cm4gaW5wdXQuc3Vic3RyaW5nKHBlZyRyZXBvcnRlZFBvcywgcGVnJGN1cnJQb3MpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9mZnNldCgpIHsKICAgICAgcmV0dXJuIHBlZyRyZXBvcnRlZFBvczsKICAgIH0KCiAgICBmdW5jdGlvbiBsaW5lKCkgewogICAgICByZXR1cm4gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKHBlZyRyZXBvcnRlZFBvcykubGluZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb2x1bW4oKSB7CiAgICAgIHJldHVybiBwZWckY29tcHV0ZVBvc0RldGFpbHMocGVnJHJlcG9ydGVkUG9zKS5jb2x1bW47CiAgICB9CgogICAgZnVuY3Rpb24gZXhwZWN0ZWQoZGVzY3JpcHRpb24pIHsKICAgICAgdGhyb3cgcGVnJGJ1aWxkRXhjZXB0aW9uKAogICAgICAgIG51bGwsCiAgICAgICAgW3sgdHlwZTogIm90aGVyIiwgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uIH1dLAogICAgICAgIHBlZyRyZXBvcnRlZFBvcwogICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2UpIHsKICAgICAgdGhyb3cgcGVnJGJ1aWxkRXhjZXB0aW9uKG1lc3NhZ2UsIG51bGwsIHBlZyRyZXBvcnRlZFBvcyk7CiAgICB9CgogICAgZnVuY3Rpb24gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKHBvcykgewogICAgICBmdW5jdGlvbiBhZHZhbmNlKGRldGFpbHMsIHN0YXJ0UG9zLCBlbmRQb3MpIHsKICAgICAgICB2YXIgcCwgY2g7CgogICAgICAgIGZvciAocCA9IHN0YXJ0UG9zOyBwIDwgZW5kUG9zOyBwKyspIHsKICAgICAgICAgIGNoID0gaW5wdXQuY2hhckF0KHApOwogICAgICAgICAgaWYgKGNoID09PSAiXG4iKSB7CiAgICAgICAgICAgIGlmICghZGV0YWlscy5zZWVuQ1IpIHsgZGV0YWlscy5saW5lKys7IH0KICAgICAgICAgICAgZGV0YWlscy5jb2x1bW4gPSAxOwogICAgICAgICAgICBkZXRhaWxzLnNlZW5DUiA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIGlmIChjaCA9PT0gIlxyIiB8fCBjaCA9PT0gIlx1MjAyOCIgfHwgY2ggPT09ICJcdTIwMjkiKSB7CiAgICAgICAgICAgIGRldGFpbHMubGluZSsrOwogICAgICAgICAgICBkZXRhaWxzLmNvbHVtbiA9IDE7CiAgICAgICAgICAgIGRldGFpbHMuc2VlbkNSID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRldGFpbHMuY29sdW1uKys7CiAgICAgICAgICAgIGRldGFpbHMuc2VlbkNSID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAocGVnJGNhY2hlZFBvcyAhPT0gcG9zKSB7CiAgICAgICAgaWYgKHBlZyRjYWNoZWRQb3MgPiBwb3MpIHsKICAgICAgICAgIHBlZyRjYWNoZWRQb3MgPSAwOwogICAgICAgICAgcGVnJGNhY2hlZFBvc0RldGFpbHMgPSB7IGxpbmU6IDEsIGNvbHVtbjogMSwgc2VlbkNSOiBmYWxzZSB9OwogICAgICAgIH0KICAgICAgICBhZHZhbmNlKHBlZyRjYWNoZWRQb3NEZXRhaWxzLCBwZWckY2FjaGVkUG9zLCBwb3MpOwogICAgICAgIHBlZyRjYWNoZWRQb3MgPSBwb3M7CiAgICAgIH0KCiAgICAgIHJldHVybiBwZWckY2FjaGVkUG9zRGV0YWlsczsKICAgIH0KCiAgICBmdW5jdGlvbiBwZWckZmFpbChleHBlY3RlZCkgewogICAgICBpZiAocGVnJGN1cnJQb3MgPCBwZWckbWF4RmFpbFBvcykgeyByZXR1cm47IH0KCiAgICAgIGlmIChwZWckY3VyclBvcyA+IHBlZyRtYXhGYWlsUG9zKSB7CiAgICAgICAgcGVnJG1heEZhaWxQb3MgPSBwZWckY3VyclBvczsKICAgICAgICBwZWckbWF4RmFpbEV4cGVjdGVkID0gW107CiAgICAgIH0KCiAgICAgIHBlZyRtYXhGYWlsRXhwZWN0ZWQucHVzaChleHBlY3RlZCk7CiAgICB9CgogICAgZnVuY3Rpb24gcGVnJGJ1aWxkRXhjZXB0aW9uKG1lc3NhZ2UsIGV4cGVjdGVkLCBwb3MpIHsKICAgICAgZnVuY3Rpb24gY2xlYW51cEV4cGVjdGVkKGV4cGVjdGVkKSB7CiAgICAgICAgdmFyIGkgPSAxOwoKICAgICAgICBleHBlY3RlZC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsKICAgICAgICAgIGlmIChhLmRlc2NyaXB0aW9uIDwgYi5kZXNjcmlwdGlvbikgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgICB9IGVsc2UgaWYgKGEuZGVzY3JpcHRpb24gPiBiLmRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHdoaWxlIChpIDwgZXhwZWN0ZWQubGVuZ3RoKSB7CiAgICAgICAgICBpZiAoZXhwZWN0ZWRbaSAtIDFdID09PSBleHBlY3RlZFtpXSkgewogICAgICAgICAgICBleHBlY3RlZC5zcGxpY2UoaSwgMSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpKys7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiBidWlsZE1lc3NhZ2UoZXhwZWN0ZWQsIGZvdW5kKSB7CiAgICAgICAgZnVuY3Rpb24gc3RyaW5nRXNjYXBlKHMpIHsKICAgICAgICAgIGZ1bmN0aW9uIGhleChjaCkgeyByZXR1cm4gY2guY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTsgfQoKICAgICAgICAgIHJldHVybiBzCiAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9nLCAgICdcXFxcJykKICAgICAgICAgICAgLnJlcGxhY2UoLyIvZywgICAgJ1xcIicpCiAgICAgICAgICAgIC5yZXBsYWNlKC9ceDA4L2csICdcXGInKQogICAgICAgICAgICAucmVwbGFjZSgvXHQvZywgICAnXFx0JykKICAgICAgICAgICAgLnJlcGxhY2UoL1xuL2csICAgJ1xcbicpCiAgICAgICAgICAgIC5yZXBsYWNlKC9cZi9nLCAgICdcXGYnKQogICAgICAgICAgICAucmVwbGFjZSgvXHIvZywgICAnXFxyJykKICAgICAgICAgICAgLnJlcGxhY2UoL1tceDAwLVx4MDdceDBCXHgwRVx4MEZdL2csIGZ1bmN0aW9uKGNoKSB7IHJldHVybiAnXFx4MCcgKyBoZXgoY2gpOyB9KQogICAgICAgICAgICAucmVwbGFjZSgvW1x4MTAtXHgxRlx4ODAtXHhGRl0vZywgICAgZnVuY3Rpb24oY2gpIHsgcmV0dXJuICdcXHgnICArIGhleChjaCk7IH0pCiAgICAgICAgICAgIC5yZXBsYWNlKC9bXHUwMTgwLVx1MEZGRl0vZywgICAgICAgICBmdW5jdGlvbihjaCkgeyByZXR1cm4gJ1xcdTAnICsgaGV4KGNoKTsgfSkKICAgICAgICAgICAgLnJlcGxhY2UoL1tcdTEwODAtXHVGRkZGXS9nLCAgICAgICAgIGZ1bmN0aW9uKGNoKSB7IHJldHVybiAnXFx1JyAgKyBoZXgoY2gpOyB9KTsKICAgICAgICB9CgogICAgICAgIHZhciBleHBlY3RlZERlc2NzID0gbmV3IEFycmF5KGV4cGVjdGVkLmxlbmd0aCksCiAgICAgICAgICAgIGV4cGVjdGVkRGVzYywgZm91bmREZXNjLCBpOwoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZXhwZWN0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGV4cGVjdGVkRGVzY3NbaV0gPSBleHBlY3RlZFtpXS5kZXNjcmlwdGlvbjsKICAgICAgICB9CgogICAgICAgIGV4cGVjdGVkRGVzYyA9IGV4cGVjdGVkLmxlbmd0aCA+IDEKICAgICAgICAgID8gZXhwZWN0ZWREZXNjcy5zbGljZSgwLCAtMSkuam9pbigiLCAiKQogICAgICAgICAgICAgICsgIiBvciAiCiAgICAgICAgICAgICAgKyBleHBlY3RlZERlc2NzW2V4cGVjdGVkLmxlbmd0aCAtIDFdCiAgICAgICAgICA6IGV4cGVjdGVkRGVzY3NbMF07CgogICAgICAgIGZvdW5kRGVzYyA9IGZvdW5kID8gIlwiIiArIHN0cmluZ0VzY2FwZShmb3VuZCkgKyAiXCIiIDogImVuZCBvZiBpbnB1dCI7CgogICAgICAgIHJldHVybiAiRXhwZWN0ZWQgIiArIGV4cGVjdGVkRGVzYyArICIgYnV0ICIgKyBmb3VuZERlc2MgKyAiIGZvdW5kLiI7CiAgICAgIH0KCiAgICAgIHZhciBwb3NEZXRhaWxzID0gcGVnJGNvbXB1dGVQb3NEZXRhaWxzKHBvcyksCiAgICAgICAgICBmb3VuZCAgICAgID0gcG9zIDwgaW5wdXQubGVuZ3RoID8gaW5wdXQuY2hhckF0KHBvcykgOiBudWxsOwoKICAgICAgaWYgKGV4cGVjdGVkICE9PSBudWxsKSB7CiAgICAgICAgY2xlYW51cEV4cGVjdGVkKGV4cGVjdGVkKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBTeW50YXhFcnJvcigKICAgICAgICBtZXNzYWdlICE9PSBudWxsID8gbWVzc2FnZSA6IGJ1aWxkTWVzc2FnZShleHBlY3RlZCwgZm91bmQpLAogICAgICAgIGV4cGVjdGVkLAogICAgICAgIGZvdW5kLAogICAgICAgIHBvcywKICAgICAgICBwb3NEZXRhaWxzLmxpbmUsCiAgICAgICAgcG9zRGV0YWlscy5jb2x1bW4KICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwZWckZGVjb2RlKHMpIHsKICAgICAgdmFyIGJjID0gbmV3IEFycmF5KHMubGVuZ3RoKSwgaTsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYmNbaV0gPSBzLmNoYXJDb2RlQXQoaSkgLSAzMjsKICAgICAgfQoKICAgICAgcmV0dXJuIGJjOwogICAgfQoKICAgIGZ1bmN0aW9uIHBlZyRwYXJzZVJ1bGUoaW5kZXgpIHsKICAgICAgdmFyIGJjICAgID0gcGVnJGJ5dGVjb2RlW2luZGV4XSwKICAgICAgICAgIGlwICAgID0gMCwKICAgICAgICAgIGlwcyAgID0gW10sCiAgICAgICAgICBlbmQgICA9IGJjLmxlbmd0aCwKICAgICAgICAgIGVuZHMgID0gW10sCiAgICAgICAgICBzdGFjayA9IFtdLAogICAgICAgICAgcGFyYW1zLCBpOwoKICAgICAgZnVuY3Rpb24gcHJvdGVjdChvYmplY3QpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShvYmplY3QpID09PSAiW29iamVjdCBBcnJheV0iID8gW10gOiBvYmplY3Q7CiAgICAgIH0KCiAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgd2hpbGUgKGlwIDwgZW5kKSB7CiAgICAgICAgICBzd2l0Y2ggKGJjW2lwXSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc3RhY2sucHVzaChwcm90ZWN0KHBlZyRjb25zdHNbYmNbaXAgKyAxXV0pKTsKICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIHN0YWNrLnB1c2gocGVnJGN1cnJQb3MpOwogICAgICAgICAgICAgIGlwKys7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgc3RhY2sucG9wKCk7CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBwZWckY3VyclBvcyA9IHN0YWNrLnBvcCgpOwogICAgICAgICAgICAgIGlwKys7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgc3RhY2subGVuZ3RoIC09IGJjW2lwICsgMV07CiAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBzdGFjay5zcGxpY2UoLTIsIDEpOwogICAgICAgICAgICAgIGlwKys7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgc3RhY2tbc3RhY2subGVuZ3RoIC0gMl0ucHVzaChzdGFjay5wb3AoKSk7CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBzdGFjay5wdXNoKHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSBiY1tpcCArIDFdLCBiY1tpcCArIDFdKSk7CiAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBzdGFjay5wb3AoKTsKICAgICAgICAgICAgICBzdGFjay5wdXNoKGlucHV0LnN1YnN0cmluZyhzdGFja1tzdGFjay5sZW5ndGggLSAxXSwgcGVnJGN1cnJQb3MpKTsKICAgICAgICAgICAgICBpcCsrOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGVuZHMucHVzaChlbmQpOwogICAgICAgICAgICAgIGlwcy5wdXNoKGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdKTsKCiAgICAgICAgICAgICAgaWYgKHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdKSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDMgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgICAgaXAgKz0gMzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl07CiAgICAgICAgICAgICAgICBpcCArPSAzICsgYmNbaXAgKyAxXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTsKICAgICAgICAgICAgICBpcHMucHVzaChpcCArIDMgKyBiY1tpcCArIDFdICsgYmNbaXAgKyAyXSk7CgogICAgICAgICAgICAgIGlmIChzdGFja1tzdGFjay5sZW5ndGggLSAxXSA9PT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyAzICsgYmNbaXAgKyAxXTsKICAgICAgICAgICAgICAgIGlwICs9IDM7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdOwogICAgICAgICAgICAgICAgaXAgKz0gMyArIGJjW2lwICsgMV07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZCk7CiAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl0pOwoKICAgICAgICAgICAgICBpZiAoc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gIT09IHBlZyRGQUlMRUQpIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV07CiAgICAgICAgICAgICAgICBpcCArPSAzOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDMgKyBiY1tpcCArIDFdICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICAgIGlwICs9IDMgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGlmIChzdGFja1tzdGFjay5sZW5ndGggLSAxXSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZCk7CiAgICAgICAgICAgICAgICBpcHMucHVzaChpcCk7CgogICAgICAgICAgICAgICAgZW5kID0gaXAgKyAyICsgYmNbaXAgKyAxXTsKICAgICAgICAgICAgICAgIGlwICs9IDI7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlwICs9IDIgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGVuZHMucHVzaChlbmQpOwogICAgICAgICAgICAgIGlwcy5wdXNoKGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdKTsKCiAgICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA+IHBlZyRjdXJyUG9zKSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDMgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgICAgaXAgKz0gMzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl07CiAgICAgICAgICAgICAgICBpcCArPSAzICsgYmNbaXAgKyAxXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTsKICAgICAgICAgICAgICBpcHMucHVzaChpcCArIDQgKyBiY1tpcCArIDJdICsgYmNbaXAgKyAzXSk7CgogICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIHBlZyRjb25zdHNbYmNbaXAgKyAxXV0ubGVuZ3RoKSA9PT0gcGVnJGNvbnN0c1tiY1tpcCArIDFdXSkgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICAgIGlwICs9IDQ7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgNCArIGJjW2lwICsgMl0gKyBiY1tpcCArIDNdOwogICAgICAgICAgICAgICAgaXAgKz0gNCArIGJjW2lwICsgMl07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZCk7CiAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM10pOwoKICAgICAgICAgICAgICBpZiAoaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCBwZWckY29uc3RzW2JjW2lwICsgMV1dLmxlbmd0aCkudG9Mb3dlckNhc2UoKSA9PT0gcGVnJGNvbnN0c1tiY1tpcCArIDFdXSkgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICAgIGlwICs9IDQ7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgNCArIGJjW2lwICsgMl0gKyBiY1tpcCArIDNdOwogICAgICAgICAgICAgICAgaXAgKz0gNCArIGJjW2lwICsgMl07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZCk7CiAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM10pOwoKICAgICAgICAgICAgICBpZiAocGVnJGNvbnN0c1tiY1tpcCArIDFdXS50ZXN0KGlucHV0LmNoYXJBdChwZWckY3VyclBvcykpKSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDQgKyBiY1tpcCArIDJdOwogICAgICAgICAgICAgICAgaXAgKz0gNDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM107CiAgICAgICAgICAgICAgICBpcCArPSA0ICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBzdGFjay5wdXNoKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgYmNbaXAgKyAxXSkpOwogICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IGJjW2lwICsgMV07CiAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgc3RhY2sucHVzaChwZWckY29uc3RzW2JjW2lwICsgMV1dKTsKICAgICAgICAgICAgICBwZWckY3VyclBvcyArPSBwZWckY29uc3RzW2JjW2lwICsgMV1dLmxlbmd0aDsKICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBzdGFjay5wdXNoKHBlZyRGQUlMRUQpOwogICAgICAgICAgICAgIGlmIChwZWckc2lsZW50RmFpbHMgPT09IDApIHsKICAgICAgICAgICAgICAgIHBlZyRmYWlsKHBlZyRjb25zdHNbYmNbaXAgKyAxXV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxIC0gYmNbaXAgKyAxXV07CiAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgcGVnJHJlcG9ydGVkUG9zID0gcGVnJGN1cnJQb3M7CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgcGFyYW1zID0gYmMuc2xpY2UoaXAgKyA0LCBpcCArIDQgKyBiY1tpcCArIDNdKTsKICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYmNbaXAgKyAzXTsgaSsrKSB7CiAgICAgICAgICAgICAgICBwYXJhbXNbaV0gPSBzdGFja1tzdGFjay5sZW5ndGggLSAxIC0gcGFyYW1zW2ldXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHN0YWNrLnNwbGljZSgKICAgICAgICAgICAgICAgIHN0YWNrLmxlbmd0aCAtIGJjW2lwICsgMl0sCiAgICAgICAgICAgICAgICBiY1tpcCArIDJdLAogICAgICAgICAgICAgICAgcGVnJGNvbnN0c1tiY1tpcCArIDFdXS5hcHBseShudWxsLCBwYXJhbXMpCiAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgaXAgKz0gNCArIGJjW2lwICsgM107CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIHN0YWNrLnB1c2gocGVnJHBhcnNlUnVsZShiY1tpcCArIDFdKSk7CiAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzKys7CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgcGVnJHNpbGVudEZhaWxzLS07CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIG9wY29kZTogIiArIGJjW2lwXSArICIuIik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZW5kcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBlbmQgPSBlbmRzLnBvcCgpOwogICAgICAgICAgaXAgPSBpcHMucG9wKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHN0YWNrWzBdOwogICAgfQoKCiAgICAgIG9wdGlvbnMuZGF0YSA9IHt9OyAvLyBPYmplY3QgdG8gd2hpY2ggaGVhZGVyIGF0dHJpYnV0ZXMgd2lsbCBiZSBhc3NpZ25lZCBkdXJpbmcgcGFyc2luZwoKICAgICAgZnVuY3Rpb24gbGlzdCAoZmlyc3QsIHJlc3QpIHsKICAgICAgICByZXR1cm4gW2ZpcnN0XS5jb25jYXQocmVzdCk7CiAgICAgIH0KCgogICAgcGVnJHJlc3VsdCA9IHBlZyRwYXJzZVJ1bGUocGVnJHN0YXJ0UnVsZUluZGV4KTsKCiAgICBpZiAocGVnJHJlc3VsdCAhPT0gcGVnJEZBSUxFRCAmJiBwZWckY3VyclBvcyA9PT0gaW5wdXQubGVuZ3RoKSB7CiAgICAgIHJldHVybiBwZWckcmVzdWx0OwogICAgfSBlbHNlIHsKICAgICAgaWYgKHBlZyRyZXN1bHQgIT09IHBlZyRGQUlMRUQgJiYgcGVnJGN1cnJQb3MgPCBpbnB1dC5sZW5ndGgpIHsKICAgICAgICBwZWckZmFpbCh7IHR5cGU6ICJlbmQiLCBkZXNjcmlwdGlvbjogImVuZCBvZiBpbnB1dCIgfSk7CiAgICAgIH0KCiAgICAgIHRocm93IHBlZyRidWlsZEV4Y2VwdGlvbihudWxsLCBwZWckbWF4RmFpbEV4cGVjdGVkLCBwZWckbWF4RmFpbFBvcyk7CiAgICB9CiAgfQoKICByZXR1cm4gewogICAgU3ludGF4RXJyb3I6IFN5bnRheEVycm9yLAogICAgcGFyc2U6ICAgICAgIHBhcnNlCiAgfTsKfSkoKTsKCn0se31dLDE2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBIYWNrcyAtIFRoaXMgZmlsZSBjb250YWlucyBhbGwgb2YgdGhlIHRoaW5ncyB3ZQogKiB3aXNoIHdlIGRpZG4ndCBoYXZlIHRvIGRvLCBqdXN0IGZvciBpbnRlcm9wLiAgSXQgaXMgc2ltaWxhciB0bwogKiBVdGlscywgd2hpY2ggcHJvdmlkZXMgYWN0dWFsbHkgdXNlZnVsIGFuZCByZWxldmFudCBmdW5jdGlvbnMgZm9yCiAqIGEgU0lQIGxpYnJhcnkuIE1ldGhvZHMgaW4gdGhpcyBmaWxlIGFyZSBncm91cGVkIGJ5IHZlbmRvciwgc28KICogYXMgdG8gbW9zdCBlYXNpbHkgdHJhY2sgd2hlbiBwYXJ0aWN1bGFyIGhhY2tzIG1heSBub3QgYmUgbmVjZXNzYXJ5IGFueW1vcmUuCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CgovL2tlZXAgdG8gcXVpZXQganNoaW50LCBhbmQgcmVtYWluIGNvbnNpc3RlbnQgd2l0aCBvdGhlciBmaWxlcwpTSVAgPSBTSVA7Cgp2YXIgSGFja3MgPSB7CiAgQWxsQnJvd3NlcnM6IHsKICAgIG1hc2tEdGxzOiBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICBpZiAobWVzc2FnZS5ib2R5KSB7CiAgICAgICAgbWVzc2FnZS5ib2R5ID0gbWVzc2FnZS5ib2R5LnJlcGxhY2UoLyBVRFBcL1RMU1wvUlRQXC9TQVZQL2dtaSwgIiBSVFAvU0FWUCIpOwogICAgICB9CiAgICB9LAogICAgdW5tYXNrRHRsczogZnVuY3Rpb24gKHNkcCkgewogICAgICAvKioKICAgICAgICogQ2hyb21lIGRvZXMgbm90IGhhbmRsZSBEVExTIGNvcnJlY3RseSAoQ2FuYXJheSBkb2VzLCBidXQgbm90IHByb2R1Y3Rpb24pCiAgICAgICAqIGtlZXBpbmcgQ2hyb21lIGFzIFNERVMgdW50aWwgRFRMUyBpcyBmaXhlZCAoY29tbWVudCBvdXQgJ2lzX29wZXJhJyBjb25kaXRpb24pCiAgICAgICAqCiAgICAgICAqIFVQREFURTogTWF5IDIxLCAyMDE0CiAgICAgICAqIENocm9tZSAzNSBub3cgcHJvcGVybHkgZGVmYXVsdHMgdG8gRFRMUy4gIE9ubHkgT3BlcmEgcmVtYWlucyB1c2luZyBTREVTCiAgICAgICAqCiAgICAgICAqIFVQREFURTogMjAxNC0wOS0yNAogICAgICAgKiBPcGVyYSBub3cgc3VwcG9ydHMgRFRMUyBieSBkZWZhdWx0IGFzIHdlbGwuCiAgICAgICAqCiAgICAgICAqKi8KICAgICAgcmV0dXJuIHNkcC5yZXBsYWNlKC8gUlRQXC9TQVZQL2dtaSwgIiBVRFAvVExTL1JUUC9TQVZQIik7CiAgICB9CiAgfSwKICBGaXJlZm94OiB7CiAgICAvKiBDb25kaXRpb24gdG8gZGV0ZWN0IGlmIGhhY2tzIGFyZSBhcHBsaWNhYmxlICovCiAgICBpc0ZpcmVmb3g6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHR5cGVvZiBtb3pSVENQZWVyQ29ubmVjdGlvbiAhPT0gJ3VuZGVmaW5lZCc7CiAgICB9LAoKICAgIGNhbm5vdEhhbmRsZUV4dHJhV2hpdGVzcGFjZTogZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgaWYgKHRoaXMuaXNGaXJlZm94KCkgJiYgbWVzc2FnZS5ib2R5KSB7CiAgICAgICAgbWVzc2FnZS5ib2R5ID0gbWVzc2FnZS5ib2R5LnJlcGxhY2UoLyBcclxuL2csICJcclxuIik7CiAgICAgIH0KICAgIH0sCgogICAgaGFzTWlzc2luZ0NMaW5lSW5TRFA6IGZ1bmN0aW9uIChzZHApIHsKICAgICAgLyoKICAgICAgICogVGhpcyBpcyBhIEZpcmVmb3ggaGFjayB0byBpbnNlcnQgdmFsaWQgc2RwIHdoZW4gZ2V0RGVzY3JpcHRpb24gaXMKICAgICAgICogY2FsbGVkIHdpdGggdGhlIGNvbnN0cmFpbnQgb2ZmZXJUb1JlY2VpdmVWaWRlbyA9IGZhbHNlLgogICAgICAgKiBXZSBzZWFyY2ggZm9yIGVpdGhlciBhIGMtbGluZSBhdCB0aGUgdG9wIG9mIHRoZSBzZHAgYWJvdmUgYWxsCiAgICAgICAqIG0tbGluZXMuIElmIHRoYXQgZG9lcyBub3QgZXhpc3QgdGhlbiB3ZSBzZWFyY2ggZm9yIGEgYy1saW5lCiAgICAgICAqIGJlbmVhdGggZWFjaCBtLWxpbmUuIElmIGl0IGlzIG1pc3NpbmcgYSBjLWxpbmUsIHdlIGluc2VydAogICAgICAgKiBhIGZha2UgYy1saW5lIHdpdGggdGhlIGlwIGFkZHJlc3MgMC4wLjAuMC4gVGhpcyBpcyB0aGVuIHZhbGlkCiAgICAgICAqIHNkcCBhbmQgbm8gbWVkaWEgd2lsbCBiZSBzZW50IGZvciB0aGF0IG0tbGluZS4KICAgICAgICoKICAgICAgICogVmFsaWQgU0RQIGlzOgogICAgICAgKiBtPQogICAgICAgKiBpPQogICAgICAgKiBjPQogICAgICAgKi8KICAgICAgdmFyIGluc2VydEF0LCBtbGluZXM7CiAgICAgIGlmIChzZHAuaW5kZXhPZignYz0nKSA+IHNkcC5pbmRleE9mKCdtPScpKSB7CgogICAgICAgIC8vIEZpbmQgYWxsIG09IGxpbmVzCiAgICAgICAgbWxpbmVzID0gc2RwLm1hdGNoKC9tPS4qXHJcbi4qL2cpOwogICAgICAgIGZvciAodmFyIGk9MDsgaTxtbGluZXMubGVuZ3RoOyBpKyspIHsKCiAgICAgICAgICAvLyBJZiBpdCBoYXMgYW4gaT0gbGluZSwgY2hlY2sgaWYgdGhlIG5leHQgbGluZSBpcyB0aGUgYz0gbGluZQogICAgICAgICAgaWYgKG1saW5lc1tpXS50b1N0cmluZygpLnNlYXJjaCgvaT0uKi8pID49IDApIHsKICAgICAgICAgICAgaW5zZXJ0QXQgPSBzZHAuaW5kZXhPZihtbGluZXNbaV0udG9TdHJpbmcoKSkrbWxpbmVzW2ldLnRvU3RyaW5nKCkubGVuZ3RoOwogICAgICAgICAgICBpZiAoc2RwLnN1YnN0cihpbnNlcnRBdCwyKSE9PSdjPScpIHsKICAgICAgICAgICAgICBzZHAgPSBzZHAuc3Vic3RyKDAsaW5zZXJ0QXQpICsgJ1xyXG5jPUlOIElQNCAwLjAuMC4wJyArIHNkcC5zdWJzdHIoaW5zZXJ0QXQpOwogICAgICAgICAgICB9CgogICAgICAgICAgLy8gZWxzZSBhZGQgdGhlIEMgbGluZSBpZiBpdCdzIG1pc3NpbmcKICAgICAgICAgIH0gZWxzZSBpZiAobWxpbmVzW2ldLnRvU3RyaW5nKCkuc2VhcmNoKC9jPS4qLykgPCAwKSB7CiAgICAgICAgICAgIGluc2VydEF0ID0gc2RwLmluZGV4T2YobWxpbmVzW2ldLnRvU3RyaW5nKCkubWF0Y2goLy4qLykpK21saW5lc1tpXS50b1N0cmluZygpLm1hdGNoKC8uKi8pLnRvU3RyaW5nKCkubGVuZ3RoOwogICAgICAgICAgICBzZHAgPSBzZHAuc3Vic3RyKDAsaW5zZXJ0QXQpICsgJ1xyXG5jPUlOIElQNCAwLjAuMC4wJyArIHNkcC5zdWJzdHIoaW5zZXJ0QXQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc2RwOwogICAgfSwKICB9LAoKICBDaHJvbWU6IHsKICAgIG5lZWRzRXhwbGljaXRseUluYWN0aXZlU0RQOiBmdW5jdGlvbiAoc2RwKSB7CiAgICAgIHZhciBzdWIsIGluZGV4OwoKICAgICAgaWYgKEhhY2tzLkZpcmVmb3guaXNGaXJlZm94KCkpIHsgLy8gRml4IHRoaXMgaW4gRmlyZWZveCBiZWZvcmUgc2VuZGluZwogICAgICAgIGluZGV4ID0gc2RwLmluZGV4T2YoJ209dmlkZW8gMCcpOwogICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICAgIHN1YiA9IHNkcC5zdWJzdHIoaW5kZXgpOwogICAgICAgICAgc3ViID0gc3ViLnJlcGxhY2UoL1xyXG5jPUlOIElQNC4qXHJcbiQvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1xyXG5jPUlOIElQNCAwLjAuMC4wXHJcbmE9aW5hY3RpdmVcclxuJyk7CiAgICAgICAgICByZXR1cm4gc2RwLnN1YnN0cigwLCBpbmRleCkgKyBzdWI7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBzZHA7CiAgICB9LAoKICAgIGdldHNDb25mdXNlZEFib3V0R1VNOiBmdW5jdGlvbiAoc2Vzc2lvbikgewogICAgICBpZiAoc2Vzc2lvbi5tZWRpYUhhbmRsZXIpIHsKICAgICAgICBzZXNzaW9uLm1lZGlhSGFuZGxlci5jbG9zZSgpOwogICAgICB9CiAgICB9CiAgfQp9OwpyZXR1cm4gSGFja3M7Cn07Cn0se31dLDE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwp2YXIgbGV2ZWxzID0gewogICdlcnJvcic6IDAsCiAgJ3dhcm4nOiAxLAogICdsb2cnOiAyLAogICdkZWJ1Zyc6IDMKfTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNvbnNvbGUpIHsKCnZhciBMb2dnZXJGYWN0b3J5ID0gZnVuY3Rpb24gKCkgewogIHZhciBsb2dnZXIsCiAgICBsZXZlbCA9IDIsCiAgICBidWlsdGluRW5hYmxlZCA9IHRydWUsCiAgICBjb25uZWN0b3IgPSBudWxsOwoKICAgIHRoaXMubG9nZ2VycyA9IHt9OwoKICAgIGxvZ2dlciA9IHRoaXMuZ2V0TG9nZ2VyKCdzaXAubG9nZ2VyZmFjdG9yeScpOwoKCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgewogICAgYnVpbHRpbkVuYWJsZWQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gYnVpbHRpbkVuYWJsZWQ7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpewogICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykgewogICAgICAgICAgYnVpbHRpbkVuYWJsZWQgPSB2YWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbG9nZ2VyLmVycm9yKCdpbnZhbGlkICJidWlsdGluRW5hYmxlZCIgcGFyYW1ldGVyIHZhbHVlOiAnKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBsZXZlbDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkge3JldHVybiBsZXZlbDsgfSwKICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSA+PSAwICYmIHZhbHVlIDw9MykgewogICAgICAgICAgbGV2ZWwgPSB2YWx1ZTsKICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID4gMykgewogICAgICAgICAgbGV2ZWwgPSAzOwogICAgICAgIH0gZWxzZSBpZiAobGV2ZWxzLmhhc093blByb3BlcnR5KHZhbHVlKSkgewogICAgICAgICAgbGV2ZWwgPSBsZXZlbHNbdmFsdWVdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ2ludmFsaWQgImxldmVsIiBwYXJhbWV0ZXIgdmFsdWU6ICcrIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGNvbm5lY3RvcjogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkge3JldHVybiBjb25uZWN0b3I7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpewogICAgICAgIGlmKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAiIiB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBjb25uZWN0b3IgPSBudWxsOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBjb25uZWN0b3IgPSB2YWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbG9nZ2VyLmVycm9yKCdpbnZhbGlkICJjb25uZWN0b3IiIHBhcmFtZXRlciB2YWx1ZTogJysgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KTsKfTsKCkxvZ2dlckZhY3RvcnkucHJvdG90eXBlLnByaW50ID0gZnVuY3Rpb24odGFyZ2V0LCBjYXRlZ29yeSwgbGFiZWwsIGNvbnRlbnQpIHsKICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7CiAgICB2YXIgcHJlZml4ID0gW25ldyBEYXRlKCksIGNhdGVnb3J5XTsKICAgIGlmIChsYWJlbCkgewogICAgICBwcmVmaXgucHVzaChsYWJlbCk7CiAgICB9CiAgICBjb250ZW50ID0gcHJlZml4LmNvbmNhdChjb250ZW50KS5qb2luKCcgfCAnKTsKICB9CiAgdGFyZ2V0LmNhbGwoY29uc29sZSwgY29udGVudCk7Cn07CgpmdW5jdGlvbiBMb2dnZXIgKGxvZ2dlciwgY2F0ZWdvcnksIGxhYmVsKSB7CiAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7CiAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5OwogIHRoaXMubGFiZWwgPSBsYWJlbDsKfQoKT2JqZWN0LmtleXMobGV2ZWxzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YXJnZXROYW1lKSB7CiAgTG9nZ2VyLnByb3RvdHlwZVt0YXJnZXROYW1lXSA9IGZ1bmN0aW9uIChjb250ZW50KSB7CiAgICB0aGlzLmxvZ2dlclt0YXJnZXROYW1lXSh0aGlzLmNhdGVnb3J5LCB0aGlzLmxhYmVsLCBjb250ZW50KTsKICB9OwoKICBMb2dnZXJGYWN0b3J5LnByb3RvdHlwZVt0YXJnZXROYW1lXSA9IGZ1bmN0aW9uIChjYXRlZ29yeSwgbGFiZWwsIGNvbnRlbnQpIHsKICAgIGlmICh0aGlzLmxldmVsID49IGxldmVsc1t0YXJnZXROYW1lXSkgewogICAgICBpZiAodGhpcy5idWlsdGluRW5hYmxlZCkgewogICAgICAgIHRoaXMucHJpbnQoY29uc29sZVt0YXJnZXROYW1lXSwgY2F0ZWdvcnksIGxhYmVsLCBjb250ZW50KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuY29ubmVjdG9yKSB7CiAgICAgICAgdGhpcy5jb25uZWN0b3IodGFyZ2V0TmFtZSwgY2F0ZWdvcnksIGxhYmVsLCBjb250ZW50KTsKICAgICAgfQogICAgfQogIH07Cn0pOwoKTG9nZ2VyRmFjdG9yeS5wcm90b3R5cGUuZ2V0TG9nZ2VyID0gZnVuY3Rpb24oY2F0ZWdvcnksIGxhYmVsKSB7CiAgdmFyIGxvZ2dlcjsKCiAgaWYgKGxhYmVsICYmIHRoaXMubGV2ZWwgPT09IDMpIHsKICAgIHJldHVybiBuZXcgTG9nZ2VyKHRoaXMsIGNhdGVnb3J5LCBsYWJlbCk7CiAgfSBlbHNlIGlmICh0aGlzLmxvZ2dlcnNbY2F0ZWdvcnldKSB7CiAgICByZXR1cm4gdGhpcy5sb2dnZXJzW2NhdGVnb3J5XTsKICB9IGVsc2UgewogICAgbG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzLCBjYXRlZ29yeSk7CiAgICB0aGlzLmxvZ2dlcnNbY2F0ZWdvcnldID0gbG9nZ2VyOwogICAgcmV0dXJuIGxvZ2dlcjsKICB9Cn07CgpyZXR1cm4gTG9nZ2VyRmFjdG9yeTsKfTsKCn0se31dLDE4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBNZWRpYUhhbmRsZXIKICovCgovKiBNZWRpYUhhbmRsZXIKICogQGNsYXNzIFBlZXJDb25uZWN0aW9uIGhlbHBlciBDbGFzcy4KICogQHBhcmFtIHtTSVAuU2Vzc2lvbn0gc2Vzc2lvbgogKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChFdmVudEVtaXR0ZXIpIHsKdmFyIE1lZGlhSGFuZGxlciA9IGZ1bmN0aW9uKHNlc3Npb24sIG9wdGlvbnMpIHsKICAvLyBrZWVwIGpzaGludCBoYXBweQogIHNlc3Npb24gPSBzZXNzaW9uOwogIG9wdGlvbnMgPSBvcHRpb25zOwp9OwoKTWVkaWFIYW5kbGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXZlbnRFbWl0dGVyLnByb3RvdHlwZSwgewogIGlzUmVhZHk6IHt2YWx1ZTogZnVuY3Rpb24gaXNSZWFkeSAoKSB7fX0sCgogIGNsb3NlOiB7dmFsdWU6IGZ1bmN0aW9uIGNsb3NlICgpIHt9fSwKCiAgLyoqCiAgICogQHBhcmFtIHtPYmplY3R9IFttZWRpYUhpbnRdIEEgY3VzdG9tIG9iamVjdCBkZXNjcmliaW5nIHRoZSBtZWRpYSB0byBiZSB1c2VkIGR1cmluZyB0aGlzIHNlc3Npb24uCiAgICovCiAgZ2V0RGVzY3JpcHRpb246IHt2YWx1ZTogZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24gKG1lZGlhSGludCkgewogICAgLy8ga2VlcCBqc2hpbnQgaGFwcHkKICAgIG1lZGlhSGludCA9IG1lZGlhSGludDsKICB9fSwKCiAgLyoqCiAgKiBNZXNzYWdlIHJlY2VwdGlvbi4KICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAgKiBAcGFyYW0ge1N0cmluZ30gZGVzY3JpcHRpb24KICAqLwogIHNldERlc2NyaXB0aW9uOiB7dmFsdWU6IGZ1bmN0aW9uIHNldERlc2NyaXB0aW9uIChkZXNjcmlwdGlvbikgewogICAgLy8ga2VlcCBqc2hpbnQgaGFwcHkKICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247CiAgfX0KfSk7CgpyZXR1cm4gTWVkaWFIYW5kbGVyOwp9OwoKfSx7fV0sMTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAZmlsZW92ZXJ2aWV3IFNJUCBOYW1lQWRkckhlYWRlcgogKi8KCi8qKgogKiBAYXVnbWVudHMgU0lQCiAqIEBjbGFzcyBDbGFzcyBjcmVhdGluZyBhIE5hbWUgQWRkcmVzcyBTSVAgaGVhZGVyLgogKgogKiBAcGFyYW0ge1NJUC5VUkl9IHVyaQogKiBAcGFyYW0ge1N0cmluZ30gW2Rpc3BsYXlOYW1lXQogKiBAcGFyYW0ge09iamVjdH0gW3BhcmFtZXRlcnNdCiAqCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyIE5hbWVBZGRySGVhZGVyOwoKTmFtZUFkZHJIZWFkZXIgPSBmdW5jdGlvbih1cmksIGRpc3BsYXlOYW1lLCBwYXJhbWV0ZXJzKSB7CiAgdmFyIHBhcmFtOwoKICAvLyBDaGVja3MKICBpZighdXJpIHx8ICEodXJpIGluc3RhbmNlb2YgU0lQLlVSSSkpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21pc3Npbmcgb3IgaW52YWxpZCAidXJpIiBwYXJhbWV0ZXInKTsKICB9CgogIC8vIEluaXRpYWxpemUgcGFyYW1ldGVycwogIHRoaXMudXJpID0gdXJpOwogIHRoaXMucGFyYW1ldGVycyA9IHt9OwoKICBmb3IgKHBhcmFtIGluIHBhcmFtZXRlcnMpIHsKICAgIHRoaXMuc2V0UGFyYW0ocGFyYW0sIHBhcmFtZXRlcnNbcGFyYW1dKTsKICB9CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsKICAgIGZyaWVuZGx5TmFtZTogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5kaXNwbGF5TmFtZSB8fCB1cmkuYW9yOyB9CiAgICB9LAoKICAgIGRpc3BsYXlOYW1lOiB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBkaXNwbGF5TmFtZTsgfSwKICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgIGRpc3BsYXlOYW1lID0gKHZhbHVlID09PSAwKSA/ICcwJyA6IHZhbHVlOwogICAgICB9CiAgICB9CiAgfSk7Cn07Ck5hbWVBZGRySGVhZGVyLnByb3RvdHlwZSA9IHsKICBzZXRQYXJhbTogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsKICAgIGlmKGtleSkgewogICAgICB0aGlzLnBhcmFtZXRlcnNba2V5LnRvTG93ZXJDYXNlKCldID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUgPT09IG51bGwpID8gbnVsbCA6IHZhbHVlLnRvU3RyaW5nKCk7CiAgICB9CiAgfSwKICBnZXRQYXJhbTogU0lQLlVSSS5wcm90b3R5cGUuZ2V0UGFyYW0sCiAgaGFzUGFyYW06IFNJUC5VUkkucHJvdG90eXBlLmhhc1BhcmFtLAogIGRlbGV0ZVBhcmFtOiBTSVAuVVJJLnByb3RvdHlwZS5kZWxldGVQYXJhbSwKICBjbGVhclBhcmFtczogU0lQLlVSSS5wcm90b3R5cGUuY2xlYXJQYXJhbXMsCgogIGNsb25lOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBuZXcgTmFtZUFkZHJIZWFkZXIoCiAgICAgIHRoaXMudXJpLmNsb25lKCksCiAgICAgIHRoaXMuZGlzcGxheU5hbWUsCiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbWV0ZXJzKSkpOwogIH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHZhciBib2R5LCBwYXJhbWV0ZXI7CgogICAgYm9keSAgPSAodGhpcy5kaXNwbGF5TmFtZSB8fCB0aGlzLmRpc3BsYXlOYW1lID09PSAwKSA/ICciJyArIHRoaXMuZGlzcGxheU5hbWUgKyAnIiAnIDogJyc7CiAgICBib2R5ICs9ICc8JyArIHRoaXMudXJpLnRvU3RyaW5nKCkgKyAnPic7CgogICAgZm9yIChwYXJhbWV0ZXIgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7CiAgICAgIGJvZHkgKz0gJzsnICsgcGFyYW1ldGVyOwoKICAgICAgaWYgKHRoaXMucGFyYW1ldGVyc1twYXJhbWV0ZXJdICE9PSBudWxsKSB7CiAgICAgICAgYm9keSArPSAnPScrIHRoaXMucGFyYW1ldGVyc1twYXJhbWV0ZXJdOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGJvZHk7CiAgfQp9OwoKCi8qKgogICogUGFyc2UgdGhlIGdpdmVuIHN0cmluZyBhbmQgcmV0dXJucyBhIFNJUC5OYW1lQWRkckhlYWRlciBpbnN0YW5jZSBvciB1bmRlZmluZWQgaWYKICAqIGl0IGlzIGFuIGludmFsaWQgTmFtZUFkZHJIZWFkZXIuCiAgKiBAcHVibGljCiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZV9hZGRyX2hlYWRlcgogICovCk5hbWVBZGRySGVhZGVyLnBhcnNlID0gZnVuY3Rpb24obmFtZV9hZGRyX2hlYWRlcikgewogIG5hbWVfYWRkcl9oZWFkZXIgPSBTSVAuR3JhbW1hci5wYXJzZShuYW1lX2FkZHJfaGVhZGVyLCdOYW1lX0FkZHJfSGVhZGVyJyk7CgogIGlmIChuYW1lX2FkZHJfaGVhZGVyICE9PSAtMSkgewogICAgcmV0dXJuIG5hbWVfYWRkcl9oZWFkZXI7CiAgfSBlbHNlIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQp9OwoKU0lQLk5hbWVBZGRySGVhZGVyID0gTmFtZUFkZHJIZWFkZXI7Cn07Cgp9LHt9XSwyMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgU0lQIE1lc3NhZ2UgUGFyc2VyCiAqLwoKLyoqCiAqIEV4dHJhY3QgYW5kIHBhcnNlIGV2ZXJ5IGhlYWRlciBvZiBhIFNJUCBtZXNzYWdlLgogKiBAYXVnbWVudHMgU0lQCiAqIEBuYW1lc3BhY2UKICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewp2YXIgUGFyc2VyOwoKZnVuY3Rpb24gZ2V0SGVhZGVyKGRhdGEsIGhlYWRlclN0YXJ0KSB7CiAgdmFyCiAgICAvLyAnc3RhcnQnIHBvc2l0aW9uIG9mIHRoZSBoZWFkZXIuCiAgICBzdGFydCA9IGhlYWRlclN0YXJ0LAogICAgLy8gJ2VuZCcgcG9zaXRpb24gb2YgdGhlIGhlYWRlci4KICAgIGVuZCA9IDAsCiAgICAvLyAncGFydGlhbCBlbmQnIHBvc2l0aW9uIG9mIHRoZSBoZWFkZXIuCiAgICBwYXJ0aWFsRW5kID0gMDsKCiAgLy9FbmQgb2YgbWVzc2FnZS4KICBpZiAoZGF0YS5zdWJzdHJpbmcoc3RhcnQsIHN0YXJ0ICsgMikubWF0Y2goLyheXHJcbikvKSkgewogICAgcmV0dXJuIC0yOwogIH0KCiAgd2hpbGUoZW5kID09PSAwKSB7CiAgICAvLyBQYXJ0aWFsIEVuZCBvZiBIZWFkZXIuCiAgICBwYXJ0aWFsRW5kID0gZGF0YS5pbmRleE9mKCdcclxuJywgc3RhcnQpOwoKICAgIC8vICdpbmRleE9mJyByZXR1cm5zIC0xIGlmIHRoZSB2YWx1ZSB0byBiZSBmb3VuZCBuZXZlciBvY2N1cnMuCiAgICBpZiAocGFydGlhbEVuZCA9PT0gLTEpIHsKICAgICAgcmV0dXJuIHBhcnRpYWxFbmQ7CiAgICB9CgogICAgaWYoIWRhdGEuc3Vic3RyaW5nKHBhcnRpYWxFbmQgKyAyLCBwYXJ0aWFsRW5kICsgNCkubWF0Y2goLyheXHJcbikvKSAmJiBkYXRhLmNoYXJBdChwYXJ0aWFsRW5kICsgMikubWF0Y2goLyheXHMrKS8pKSB7CiAgICAgIC8vIE5vdCB0aGUgZW5kIG9mIHRoZSBtZXNzYWdlLiBDb250aW51ZSBmcm9tIHRoZSBuZXh0IHBvc2l0aW9uLgogICAgICBzdGFydCA9IHBhcnRpYWxFbmQgKyAyOwogICAgfSBlbHNlIHsKICAgICAgZW5kID0gcGFydGlhbEVuZDsKICAgIH0KICB9CgogIHJldHVybiBlbmQ7Cn0KCmZ1bmN0aW9uIHBhcnNlSGVhZGVyKG1lc3NhZ2UsIGRhdGEsIGhlYWRlclN0YXJ0LCBoZWFkZXJFbmQpIHsKICB2YXIgaGVhZGVyLCBpZHgsIGxlbmd0aCwgcGFyc2VkLAogICAgaGNvbG9uSW5kZXggPSBkYXRhLmluZGV4T2YoJzonLCBoZWFkZXJTdGFydCksCiAgICBoZWFkZXJOYW1lID0gZGF0YS5zdWJzdHJpbmcoaGVhZGVyU3RhcnQsIGhjb2xvbkluZGV4KS50cmltKCksCiAgICBoZWFkZXJWYWx1ZSA9IGRhdGEuc3Vic3RyaW5nKGhjb2xvbkluZGV4ICsgMSwgaGVhZGVyRW5kKS50cmltKCk7CgogIC8vIElmIGhlYWRlci1maWVsZCBpcyB3ZWxsLWtub3duLCBwYXJzZSBpdC4KICBzd2l0Y2goaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpKSB7CiAgICBjYXNlICd2aWEnOgogICAgY2FzZSAndic6CiAgICAgIG1lc3NhZ2UuYWRkSGVhZGVyKCd2aWEnLCBoZWFkZXJWYWx1ZSk7CiAgICAgIGlmKG1lc3NhZ2UuZ2V0SGVhZGVycygndmlhJykubGVuZ3RoID09PSAxKSB7CiAgICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcignVmlhJyk7CiAgICAgICAgaWYocGFyc2VkKSB7CiAgICAgICAgICBtZXNzYWdlLnZpYSA9IHBhcnNlZDsKICAgICAgICAgIG1lc3NhZ2UudmlhX2JyYW5jaCA9IHBhcnNlZC5icmFuY2g7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHBhcnNlZCA9IDA7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlICdmcm9tJzoKICAgIGNhc2UgJ2YnOgogICAgICBtZXNzYWdlLnNldEhlYWRlcignZnJvbScsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcignZnJvbScpOwogICAgICBpZihwYXJzZWQpIHsKICAgICAgICBtZXNzYWdlLmZyb20gPSBwYXJzZWQ7CiAgICAgICAgbWVzc2FnZS5mcm9tX3RhZyA9IHBhcnNlZC5nZXRQYXJhbSgndGFnJyk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlICd0byc6CiAgICBjYXNlICd0JzoKICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoJ3RvJywgaGVhZGVyVmFsdWUpOwogICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCd0bycpOwogICAgICBpZihwYXJzZWQpIHsKICAgICAgICBtZXNzYWdlLnRvID0gcGFyc2VkOwogICAgICAgIG1lc3NhZ2UudG9fdGFnID0gcGFyc2VkLmdldFBhcmFtKCd0YWcnKTsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJ3JlY29yZC1yb3V0ZSc6CiAgICAgIHBhcnNlZCA9IFNJUC5HcmFtbWFyLnBhcnNlKGhlYWRlclZhbHVlLCAnUmVjb3JkX1JvdXRlJyk7CgogICAgICBpZiAocGFyc2VkID09PSAtMSkgewogICAgICAgIHBhcnNlZCA9IHVuZGVmaW5lZDsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgbGVuZ3RoID0gcGFyc2VkLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaGVhZGVyID0gcGFyc2VkW2lkeF07CiAgICAgICAgbWVzc2FnZS5hZGRIZWFkZXIoJ3JlY29yZC1yb3V0ZScsIGhlYWRlclZhbHVlLnN1YnN0cmluZyhoZWFkZXIucG9zaXRpb24sIGhlYWRlci5vZmZzZXQpKTsKICAgICAgICBtZXNzYWdlLmhlYWRlcnNbJ1JlY29yZC1Sb3V0ZSddW21lc3NhZ2UuZ2V0SGVhZGVycygncmVjb3JkLXJvdXRlJykubGVuZ3RoIC0gMV0ucGFyc2VkID0gaGVhZGVyLnBhcnNlZDsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJ2NhbGwtaWQnOgogICAgY2FzZSAnaSc6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCdjYWxsLWlkJywgaGVhZGVyVmFsdWUpOwogICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCdjYWxsLWlkJyk7CiAgICAgIGlmKHBhcnNlZCkgewogICAgICAgIG1lc3NhZ2UuY2FsbF9pZCA9IGhlYWRlclZhbHVlOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSAnY29udGFjdCc6CiAgICBjYXNlICdtJzoKICAgICAgcGFyc2VkID0gU0lQLkdyYW1tYXIucGFyc2UoaGVhZGVyVmFsdWUsICdDb250YWN0Jyk7CgogICAgICBpZiAocGFyc2VkID09PSAtMSkgewogICAgICAgIHBhcnNlZCA9IHVuZGVmaW5lZDsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgbGVuZ3RoID0gcGFyc2VkLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaGVhZGVyID0gcGFyc2VkW2lkeF07CiAgICAgICAgbWVzc2FnZS5hZGRIZWFkZXIoJ2NvbnRhY3QnLCBoZWFkZXJWYWx1ZS5zdWJzdHJpbmcoaGVhZGVyLnBvc2l0aW9uLCBoZWFkZXIub2Zmc2V0KSk7CiAgICAgICAgbWVzc2FnZS5oZWFkZXJzWydDb250YWN0J11bbWVzc2FnZS5nZXRIZWFkZXJzKCdjb250YWN0JykubGVuZ3RoIC0gMV0ucGFyc2VkID0gaGVhZGVyLnBhcnNlZDsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJ2NvbnRlbnQtbGVuZ3RoJzoKICAgIGNhc2UgJ2wnOgogICAgICBtZXNzYWdlLnNldEhlYWRlcignY29udGVudC1sZW5ndGgnLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ2NvbnRlbnQtbGVuZ3RoJyk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnY29udGVudC10eXBlJzoKICAgIGNhc2UgJ2MnOgogICAgICBtZXNzYWdlLnNldEhlYWRlcignY29udGVudC10eXBlJywgaGVhZGVyVmFsdWUpOwogICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCdjb250ZW50LXR5cGUnKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdjc2VxJzoKICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoJ2NzZXEnLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ2NzZXEnKTsKICAgICAgaWYocGFyc2VkKSB7CiAgICAgICAgbWVzc2FnZS5jc2VxID0gcGFyc2VkLnZhbHVlOwogICAgICB9CiAgICAgIGlmKG1lc3NhZ2UgaW5zdGFuY2VvZiBTSVAuSW5jb21pbmdSZXNwb25zZSkgewogICAgICAgIG1lc3NhZ2UubWV0aG9kID0gcGFyc2VkLm1ldGhvZDsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJ21heC1mb3J3YXJkcyc6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCdtYXgtZm9yd2FyZHMnLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ21heC1mb3J3YXJkcycpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3d3dy1hdXRoZW50aWNhdGUnOgogICAgICBtZXNzYWdlLnNldEhlYWRlcignd3d3LWF1dGhlbnRpY2F0ZScsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcignd3d3LWF1dGhlbnRpY2F0ZScpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3Byb3h5LWF1dGhlbnRpY2F0ZSc6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCdwcm94eS1hdXRoZW50aWNhdGUnLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ3Byb3h5LWF1dGhlbnRpY2F0ZScpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3JlZmVyLXRvJzoKICAgIGNhc2UgJ3InOgogICAgICBtZXNzYWdlLnNldEhlYWRlcigncmVmZXItdG8nLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ3JlZmVyLXRvJyk7CiAgICAgIGlmIChwYXJzZWQpIHsKICAgICAgICBtZXNzYWdlLnJlZmVyX3RvID0gcGFyc2VkOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgLy8gRG8gbm90IHBhcnNlIHRoaXMgaGVhZGVyLgogICAgICBtZXNzYWdlLnNldEhlYWRlcihoZWFkZXJOYW1lLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IDA7CiAgfQoKICBpZiAocGFyc2VkID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yOiAnZXJyb3IgcGFyc2luZyBoZWFkZXIgIicrIGhlYWRlck5hbWUgKyciJwogICAgfTsKICB9IGVsc2UgewogICAgcmV0dXJuIHRydWU7CiAgfQp9CgovKiogUGFyc2UgU0lQIE1lc3NhZ2UKICogQGZ1bmN0aW9uCiAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIFNJUCBtZXNzYWdlLgogKiBAcGFyYW0ge09iamVjdH0gbG9nZ2VyIG9iamVjdC4KICogQHJldHVybnMge1NJUC5JbmNvbWluZ1JlcXVlc3R8U0lQLkluY29taW5nUmVzcG9uc2V8dW5kZWZpbmVkfQogKi8KUGFyc2VyID0ge307ClBhcnNlci5wYXJzZU1lc3NhZ2UgPSBmdW5jdGlvbihkYXRhLCB1YSkgewogIHZhciBtZXNzYWdlLCBmaXJzdExpbmUsIGNvbnRlbnRMZW5ndGgsIGJvZHlTdGFydCwgcGFyc2VkLAogICAgaGVhZGVyU3RhcnQgPSAwLAogICAgaGVhZGVyRW5kID0gZGF0YS5pbmRleE9mKCdcclxuJyksCiAgICBsb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5wYXJzZXInKTsKCiAgaWYoaGVhZGVyRW5kID09PSAtMSkgewogICAgbG9nZ2VyLndhcm4oJ25vIENSTEYgZm91bmQsIG5vdCBhIFNJUCBtZXNzYWdlLCBkaXNjYXJkZWQnKTsKICAgIHJldHVybjsKICB9CgogIC8vIFBhcnNlIGZpcnN0IGxpbmUuIENoZWNrIGlmIGl0IGlzIGEgUmVxdWVzdCBvciBhIFJlcGx5LgogIGZpcnN0TGluZSA9IGRhdGEuc3Vic3RyaW5nKDAsIGhlYWRlckVuZCk7CiAgcGFyc2VkID0gU0lQLkdyYW1tYXIucGFyc2UoZmlyc3RMaW5lLCAnUmVxdWVzdF9SZXNwb25zZScpOwoKICBpZihwYXJzZWQgPT09IC0xKSB7CiAgICBsb2dnZXIud2FybignZXJyb3IgcGFyc2luZyBmaXJzdCBsaW5lIG9mIFNJUCBtZXNzYWdlOiAiJyArIGZpcnN0TGluZSArICciJyk7CiAgICByZXR1cm47CiAgfSBlbHNlIGlmKCFwYXJzZWQuc3RhdHVzX2NvZGUpIHsKICAgIG1lc3NhZ2UgPSBuZXcgU0lQLkluY29taW5nUmVxdWVzdCh1YSk7CiAgICBtZXNzYWdlLm1ldGhvZCA9IHBhcnNlZC5tZXRob2Q7CiAgICBtZXNzYWdlLnJ1cmkgPSBwYXJzZWQudXJpOwogIH0gZWxzZSB7CiAgICBtZXNzYWdlID0gbmV3IFNJUC5JbmNvbWluZ1Jlc3BvbnNlKHVhKTsKICAgIG1lc3NhZ2Uuc3RhdHVzX2NvZGUgPSBwYXJzZWQuc3RhdHVzX2NvZGU7CiAgICBtZXNzYWdlLnJlYXNvbl9waHJhc2UgPSBwYXJzZWQucmVhc29uX3BocmFzZTsKICB9CgogIG1lc3NhZ2UuZGF0YSA9IGRhdGE7CiAgaGVhZGVyU3RhcnQgPSBoZWFkZXJFbmQgKyAyOwoKICAvKiBMb29wIG92ZXIgZXZlcnkgbGluZSBpbiBkYXRhLiBEZXRlY3QgdGhlIGVuZCBvZiBlYWNoIGhlYWRlciBhbmQgcGFyc2UKICAqIGl0IG9yIHNpbXBseSBhZGQgdG8gdGhlIGhlYWRlcnMgY29sbGVjdGlvbi4KICAqLwogIHdoaWxlKHRydWUpIHsKICAgIGhlYWRlckVuZCA9IGdldEhlYWRlcihkYXRhLCBoZWFkZXJTdGFydCk7CgogICAgLy8gVGhlIFNJUCBtZXNzYWdlIGhhcyBub3JtYWxseSBmaW5pc2hlZC4KICAgIGlmKGhlYWRlckVuZCA9PT0gLTIpIHsKICAgICAgYm9keVN0YXJ0ID0gaGVhZGVyU3RhcnQgKyAyOwogICAgICBicmVhazsKICAgIH0KICAgIC8vIGRhdGEuaW5kZXhPZiByZXR1cm5lZCAtMSBkdWUgdG8gYSBtYWxmb3JtZWQgbWVzc2FnZS4KICAgIGVsc2UgaWYoaGVhZGVyRW5kID09PSAtMSkgewogICAgICBsb2dnZXIuZXJyb3IoJ21hbGZvcm1lZCBtZXNzYWdlJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBwYXJzZWQgPSBwYXJzZUhlYWRlcihtZXNzYWdlLCBkYXRhLCBoZWFkZXJTdGFydCwgaGVhZGVyRW5kKTsKCiAgICBpZihwYXJzZWQgIT09IHRydWUpIHsKICAgICAgbG9nZ2VyLmVycm9yKHBhcnNlZC5lcnJvcik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBoZWFkZXJTdGFydCA9IGhlYWRlckVuZCArIDI7CiAgfQoKICAvKiBSRkMzMjYxIDE4LjMuCiAgICogSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgYnl0ZXMgaW4gdGhlIHRyYW5zcG9ydCBwYWNrZXQKICAgKiBiZXlvbmQgdGhlIGVuZCBvZiB0aGUgYm9keSwgdGhleSBNVVNUIGJlIGRpc2NhcmRlZC4KICAgKi8KICBpZihtZXNzYWdlLmhhc0hlYWRlcignY29udGVudC1sZW5ndGgnKSkgewogICAgY29udGVudExlbmd0aCA9IG1lc3NhZ2UuZ2V0SGVhZGVyKCdjb250ZW50LWxlbmd0aCcpOwogICAgbWVzc2FnZS5ib2R5ID0gZGF0YS5zdWJzdHIoYm9keVN0YXJ0LCBjb250ZW50TGVuZ3RoKTsKICB9IGVsc2UgewogICAgbWVzc2FnZS5ib2R5ID0gZGF0YS5zdWJzdHJpbmcoYm9keVN0YXJ0KTsKICB9CgogIHJldHVybiBtZXNzYWdlOwp9OwoKU0lQLlBhcnNlciA9IFBhcnNlcjsKfTsKCn0se31dLDIxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKCnZhciBSZWdpc3RlckNvbnRleHQ7CgpSZWdpc3RlckNvbnRleHQgPSBmdW5jdGlvbiAodWEpIHsKICB2YXIgcGFyYW1zID0ge30sCiAgICAgIHJlZ0lkID0gMTsKCiAgdGhpcy5yZWdpc3RyYXIgPSB1YS5jb25maWd1cmF0aW9uLnJlZ2lzdHJhclNlcnZlcjsKICB0aGlzLmV4cGlyZXMgPSB1YS5jb25maWd1cmF0aW9uLnJlZ2lzdGVyRXhwaXJlczsKCgogIC8vIENvbnRhY3QgaGVhZGVyCiAgdGhpcy5jb250YWN0ID0gdWEuY29udGFjdC50b1N0cmluZygpOwoKICBpZihyZWdJZCkgewogICAgdGhpcy5jb250YWN0ICs9ICc7cmVnLWlkPScrIHJlZ0lkOwogICAgdGhpcy5jb250YWN0ICs9ICc7K3NpcC5pbnN0YW5jZT0iPHVybjp1dWlkOicrIHVhLmNvbmZpZ3VyYXRpb24uaW5zdGFuY2VJZCsnPiInOwogIH0KCiAgLy8gQ2FsbC1JRCBhbmQgQ1NlcSB2YWx1ZXMgUkZDMzI2MSAxMC4yCiAgdGhpcy5jYWxsX2lkID0gU0lQLlV0aWxzLmNyZWF0ZVJhbmRvbVRva2VuKDIyKTsKICB0aGlzLmNzZXEgPSA4MDsKCiAgdGhpcy50b191cmkgPSB1YS5jb25maWd1cmF0aW9uLnVyaTsKCiAgcGFyYW1zLnRvX3VyaSA9IHRoaXMudG9fdXJpOwogIHBhcmFtcy50b19kaXNwbGF5TmFtZSA9IHVhLmNvbmZpZ3VyYXRpb24uZGlzcGxheU5hbWU7CiAgcGFyYW1zLmNhbGxfaWQgPSB0aGlzLmNhbGxfaWQ7CiAgcGFyYW1zLmNzZXEgPSB0aGlzLmNzZXE7CgogIC8vIEV4dGVuZHMgQ2xpZW50Q29udGV4dAogIFNJUC5VdGlscy5hdWdtZW50KHRoaXMsIFNJUC5DbGllbnRDb250ZXh0LCBbdWEsICdSRUdJU1RFUicsIHRoaXMucmVnaXN0cmFyLCB7cGFyYW1zOiBwYXJhbXN9XSk7CgogIHRoaXMucmVnaXN0cmF0aW9uVGltZXIgPSBudWxsOwogIHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyID0gbnVsbDsKCiAgLy8gU2V0IHN0YXR1cwogIHRoaXMucmVnaXN0ZXJlZCA9IGZhbHNlOwoKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnJlZ2lzdGVyY29udGV4dCcpOwp9OwoKUmVnaXN0ZXJDb250ZXh0LnByb3RvdHlwZSA9IHsKICByZWdpc3RlcjogZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgIHZhciBzZWxmID0gdGhpcywgZXh0cmFIZWFkZXJzOwoKICAgIC8vIEhhbmRsZSBPcHRpb25zCiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgZXh0cmFIZWFkZXJzID0gKHRoaXMub3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGFjdDogJyArIHRoaXMuY29udGFjdCArICc7ZXhwaXJlcz0nICsgdGhpcy5leHBpcmVzKTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdBbGxvdzogJyArIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKCiAgICAvLyBTYXZlIG9yaWdpbmFsIGV4dHJhSGVhZGVycyB0byBiZSB1c2VkIGluIC5jbG9zZQogICAgdGhpcy5jbG9zZUhlYWRlcnMgPSB0aGlzLm9wdGlvbnMuY2xvc2VXaXRoSGVhZGVycyA/CiAgICAgICh0aGlzLm9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpIDogW107CgogICAgdGhpcy5yZWNlaXZlUmVzcG9uc2UgPSBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICB2YXIgY29udGFjdCwgZXhwaXJlcywKICAgICAgICBjb250YWN0cyA9IHJlc3BvbnNlLmdldEhlYWRlcnMoJ2NvbnRhY3QnKS5sZW5ndGgsCiAgICAgICAgY2F1c2U7CgogICAgICAvLyBEaXNjYXJkIHJlc3BvbnNlcyB0byBvbGRlciBSRUdJU1RFUi91bi1SRUdJU1RFUiByZXF1ZXN0cy4KICAgICAgaWYocmVzcG9uc2UuY3NlcSAhPT0gdGhpcy5jc2VxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyBDbGVhciByZWdpc3RyYXRpb24gdGltZXIKICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uVGltZXIgIT09IG51bGwpIHsKICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyKTsKICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblRpbWVyID0gbnVsbDsKICAgICAgfQoKICAgICAgc3dpdGNoKHRydWUpIHsKICAgICAgICBjYXNlIC9eMVswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAvXjJbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgICAgdGhpcy5lbWl0KCdhY2NlcHRlZCcsIHJlc3BvbnNlKTsKCiAgICAgICAgICBpZihyZXNwb25zZS5oYXNIZWFkZXIoJ2V4cGlyZXMnKSkgewogICAgICAgICAgICBleHBpcmVzID0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdleHBpcmVzJyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyICE9PSBudWxsKSB7CiAgICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyKTsKICAgICAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgPSBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFNlYXJjaCB0aGUgQ29udGFjdCBwb2ludGluZyB0byB1cyBhbmQgdXBkYXRlIHRoZSBleHBpcmVzIHZhbHVlIGFjY29yZGluZ2x5LgogICAgICAgICAgaWYgKCFjb250YWN0cykgewogICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdubyBDb250YWN0IGhlYWRlciBpbiByZXNwb25zZSB0byBSRUdJU1RFUiwgcmVzcG9uc2UgaWdub3JlZCcpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB3aGlsZShjb250YWN0cy0tKSB7CiAgICAgICAgICAgIGNvbnRhY3QgPSByZXNwb25zZS5wYXJzZUhlYWRlcignY29udGFjdCcsIGNvbnRhY3RzKTsKICAgICAgICAgICAgaWYoY29udGFjdC51cmkudXNlciA9PT0gdGhpcy51YS5jb250YWN0LnVyaS51c2VyKSB7CiAgICAgICAgICAgICAgZXhwaXJlcyA9IGNvbnRhY3QuZ2V0UGFyYW0oJ2V4cGlyZXMnKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb250YWN0ID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICghY29udGFjdCkgewogICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdubyBDb250YWN0IGhlYWRlciBwb2ludGluZyB0byB1cywgcmVzcG9uc2UgaWdub3JlZCcpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZighZXhwaXJlcykgewogICAgICAgICAgICBleHBpcmVzID0gdGhpcy5leHBpcmVzOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIFJlLVJlZ2lzdGVyIGJlZm9yZSB0aGUgZXhwaXJhdGlvbiBpbnRlcnZhbCBoYXMgZWxhcHNlZC4KICAgICAgICAgIC8vIEZvciB0aGF0LCBkZWNyZWFzZSB0aGUgZXhwaXJlcyB2YWx1ZS4gaWU6IDMgc2Vjb25kcwogICAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25UaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5yZWdpc3RyYXRpb25UaW1lciA9IG51bGw7CiAgICAgICAgICAgIHNlbGYucmVnaXN0ZXIoc2VsZi5vcHRpb25zKTsKICAgICAgICAgIH0sIChleHBpcmVzICogMTAwMCkgLSAzMDAwKTsKICAgICAgICAgIHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgc2VsZi5sb2dnZXIud2FybigncmVnaXN0cmF0aW9uIGV4cGlyZWQnKTsKICAgICAgICAgICAgaWYgKHNlbGYucmVnaXN0ZXJlZCkgewogICAgICAgICAgICAgIHNlbGYudW5yZWdpc3RlcmVkKG51bGwsIFNJUC5DLmNhdXNlcy5FWFBJUkVTKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwgZXhwaXJlcyAqIDEwMDApOwoKICAgICAgICAgIC8vU2F2ZSBncnV1IHZhbHVlcwogICAgICAgICAgaWYgKGNvbnRhY3QuaGFzUGFyYW0oJ3RlbXAtZ3J1dScpKSB7CiAgICAgICAgICAgIHRoaXMudWEuY29udGFjdC50ZW1wX2dydXUgPSBTSVAuVVJJLnBhcnNlKGNvbnRhY3QuZ2V0UGFyYW0oJ3RlbXAtZ3J1dScpLnJlcGxhY2UoLyIvZywnJykpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbnRhY3QuaGFzUGFyYW0oJ3B1Yi1ncnV1JykpIHsKICAgICAgICAgICAgdGhpcy51YS5jb250YWN0LnB1Yl9ncnV1ID0gU0lQLlVSSS5wYXJzZShjb250YWN0LmdldFBhcmFtKCdwdWItZ3J1dScpLnJlcGxhY2UoLyIvZywnJykpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLmVtaXQoJ3JlZ2lzdGVyZWQnLCByZXNwb25zZSB8fCBudWxsKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIC8vIEludGVydmFsIHRvbyBicmllZiBSRkMzMjYxIDEwLjIuOAogICAgICAgIGNhc2UgL140MjMkLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKToKICAgICAgICAgIGlmKHJlc3BvbnNlLmhhc0hlYWRlcignbWluLWV4cGlyZXMnKSkgewogICAgICAgICAgICAvLyBJbmNyZWFzZSBvdXIgcmVnaXN0cmF0aW9uIGludGVydmFsIHRvIHRoZSBzdWdnZXN0ZWQgbWluaW11bQogICAgICAgICAgICB0aGlzLmV4cGlyZXMgPSByZXNwb25zZS5nZXRIZWFkZXIoJ21pbi1leHBpcmVzJyk7CiAgICAgICAgICAgIC8vIEF0dGVtcHQgdGhlIHJlZ2lzdHJhdGlvbiBhZ2FpbiBpbW1lZGlhdGVseQogICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub3B0aW9ucyk7CiAgICAgICAgICB9IGVsc2UgeyAvL1RoaXMgcmVzcG9uc2UgTVVTVCBjb250YWluIGEgTWluLUV4cGlyZXMgaGVhZGVyIGZpZWxkCiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJzQyMyByZXNwb25zZSByZWNlaXZlZCBmb3IgUkVHSVNURVIgd2l0aG91dCBNaW4tRXhwaXJlcycpOwogICAgICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5TSVBfRkFJTFVSRV9DT0RFKTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBjYXVzZSA9IFNJUC5VdGlscy5zaXBFcnJvckNhdXNlKHJlc3BvbnNlLnN0YXR1c19jb2RlKTsKICAgICAgICAgIHRoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShyZXNwb25zZSwgY2F1c2UpOwogICAgICB9CiAgICB9OwoKICAgIHRoaXMub25SZXF1ZXN0VGltZW91dCA9IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUobnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9OwoKICAgIHRoaXMub25UcmFuc3BvcnRFcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUobnVsbCwgU0lQLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogICAgfTsKCiAgICB0aGlzLmNzZXErKzsKICAgIHRoaXMucmVxdWVzdC5jc2VxID0gdGhpcy5jc2VxOwogICAgdGhpcy5yZXF1ZXN0LnNldEhlYWRlcignY3NlcScsIHRoaXMuY3NlcSArICcgUkVHSVNURVInKTsKICAgIHRoaXMucmVxdWVzdC5leHRyYUhlYWRlcnMgPSBleHRyYUhlYWRlcnM7CiAgICB0aGlzLnNlbmQoKTsKICB9LAoKICByZWdpc3RyYXRpb25GYWlsdXJlOiBmdW5jdGlvbiAocmVzcG9uc2UsIGNhdXNlKSB7CiAgICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlIHx8IG51bGwsIGNhdXNlIHx8IG51bGwpOwogIH0sCgogIG9uVHJhbnNwb3J0Q2xvc2VkOiBmdW5jdGlvbigpIHsKICAgIHRoaXMucmVnaXN0ZXJlZF9iZWZvcmUgPSB0aGlzLnJlZ2lzdGVyZWQ7CiAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25UaW1lciAhPT0gbnVsbCkgewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyKTsKICAgICAgdGhpcy5yZWdpc3RyYXRpb25UaW1lciA9IG51bGw7CiAgICB9CgogICAgaWYgKHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyICE9PSBudWxsKSB7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyKTsKICAgICAgdGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgPSBudWxsOwogICAgfQoKICAgIGlmKHRoaXMucmVnaXN0ZXJlZCkgewogICAgICB0aGlzLnVucmVnaXN0ZXJlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICB9CiAgfSwKCiAgb25UcmFuc3BvcnRDb25uZWN0ZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5yZWdpc3Rlcih0aGlzLm9wdGlvbnMpOwogIH0sCgogIGNsb3NlOiBmdW5jdGlvbigpIHsKICAgIHZhciBvcHRpb25zID0gewogICAgICBhbGw6IGZhbHNlLAogICAgICBleHRyYUhlYWRlcnM6IHRoaXMuY2xvc2VIZWFkZXJzCiAgICB9OwoKICAgIHRoaXMucmVnaXN0ZXJlZF9iZWZvcmUgPSB0aGlzLnJlZ2lzdGVyZWQ7CiAgICB0aGlzLnVucmVnaXN0ZXIob3B0aW9ucyk7CiAgfSwKCiAgdW5yZWdpc3RlcjogZnVuY3Rpb24ob3B0aW9ucykgewogICAgdmFyIGV4dHJhSGVhZGVyczsKCiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICBpZighdGhpcy5yZWdpc3RlcmVkICYmICFvcHRpb25zLmFsbCkgewogICAgICB0aGlzLmxvZ2dlci53YXJuKCdhbHJlYWR5IHVucmVnaXN0ZXJlZCcpOwogICAgICByZXR1cm47CiAgICB9CgogICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpOwoKICAgIHRoaXMucmVnaXN0ZXJlZCA9IGZhbHNlOwoKICAgIC8vIENsZWFyIHRoZSByZWdpc3RyYXRpb24gdGltZXIuCiAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25UaW1lciAhPT0gbnVsbCkgewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyKTsKICAgICAgdGhpcy5yZWdpc3RyYXRpb25UaW1lciA9IG51bGw7CiAgICB9CgogICAgaWYob3B0aW9ucy5hbGwpIHsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6IConKTsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0V4cGlyZXM6IDAnKTsKICAgIH0gZWxzZSB7CiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250YWN0OiAnKyB0aGlzLmNvbnRhY3QgKyAnO2V4cGlyZXM9MCcpOwogICAgfQoKCiAgICB0aGlzLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgIHZhciBjYXVzZTsKCiAgICAgIHN3aXRjaCh0cnVlKSB7CiAgICAgICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgL14yWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKToKICAgICAgICAgIHRoaXMuZW1pdCgnYWNjZXB0ZWQnLCByZXNwb25zZSk7CiAgICAgICAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgIT09IG51bGwpIHsKICAgICAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIpOwogICAgICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJlZChyZXNwb25zZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgY2F1c2UgPSBTSVAuVXRpbHMuc2lwRXJyb3JDYXVzZShyZXNwb25zZS5zdGF0dXNfY29kZSk7CiAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJlZChyZXNwb25zZSxjYXVzZSk7CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5vblJlcXVlc3RUaW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIC8vIE5vdCBhY3R1YWxseSB1bnJlZ2lzdGVyZWQuLi4KICAgICAgLy90aGlzLnVucmVnaXN0ZXJlZChudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH07CgogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgIC8vIE5vdCBhY3R1YWxseSB1bnJlZ2lzdGVyZWQuLi4KICAgICAgLy90aGlzLnVucmVnaXN0ZXJlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICB9OwoKICAgIHRoaXMuY3NlcSsrOwogICAgdGhpcy5yZXF1ZXN0LmNzZXEgPSB0aGlzLmNzZXE7CiAgICB0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKCdjc2VxJywgdGhpcy5jc2VxICsgJyBSRUdJU1RFUicpOwogICAgdGhpcy5yZXF1ZXN0LmV4dHJhSGVhZGVycyA9IGV4dHJhSGVhZGVyczsKCiAgICB0aGlzLnNlbmQoKTsKICB9LAoKICB1bnJlZ2lzdGVyZWQ6IGZ1bmN0aW9uKHJlc3BvbnNlLCBjYXVzZSkgewogICAgdGhpcy5yZWdpc3RlcmVkID0gZmFsc2U7CiAgICB0aGlzLmVtaXQoJ3VucmVnaXN0ZXJlZCcsIHJlc3BvbnNlIHx8IG51bGwsIGNhdXNlIHx8IG51bGwpOwogIH0KCn07CgoKU0lQLlJlZ2lzdGVyQ29udGV4dCA9IFJlZ2lzdGVyQ29udGV4dDsKfTsKCn0se31dLDIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgUmVxdWVzdCBTZW5kZXIKICovCgovKioKICogQGF1Z21lbnRzIFNJUAogKiBAY2xhc3MgQ2xhc3MgY3JlYXRpbmcgYSByZXF1ZXN0IHNlbmRlci4KICogQHBhcmFtIHtPYmplY3R9IGFwcGxpY2FudAogKiBAcGFyYW0ge1NJUC5VQX0gdWEKICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewp2YXIgUmVxdWVzdFNlbmRlcjsKClJlcXVlc3RTZW5kZXIgPSBmdW5jdGlvbihhcHBsaWNhbnQsIHVhKSB7CiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5yZXF1ZXN0c2VuZGVyJyk7CiAgdGhpcy51YSA9IHVhOwogIHRoaXMuYXBwbGljYW50ID0gYXBwbGljYW50OwogIHRoaXMubWV0aG9kID0gYXBwbGljYW50LnJlcXVlc3QubWV0aG9kOwogIHRoaXMucmVxdWVzdCA9IGFwcGxpY2FudC5yZXF1ZXN0OwogIHRoaXMuY3JlZGVudGlhbHMgPSBudWxsOwogIHRoaXMuY2hhbGxlbmdlZCA9IGZhbHNlOwogIHRoaXMuc3RhbGVkID0gZmFsc2U7CgogIC8vIElmIHVhIGlzIGluIGNsb3NpbmcgcHJvY2VzcyBvciBldmVuIGNsb3NlZCBqdXN0IGFsbG93IHNlbmRpbmcgQnllIGFuZCBBQ0sKICBpZiAodWEuc3RhdHVzID09PSBTSVAuVUEuQy5TVEFUVVNfVVNFUl9DTE9TRUQgJiYgKHRoaXMubWV0aG9kICE9PSBTSVAuQy5CWUUgfHwgdGhpcy5tZXRob2QgIT09IFNJUC5DLkFDSykpIHsKICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogIH0KfTsKCi8qKgoqIENyZWF0ZSB0aGUgY2xpZW50IHRyYW5zYWN0aW9uIGFuZCBzZW5kIHRoZSBtZXNzYWdlLgoqLwpSZXF1ZXN0U2VuZGVyLnByb3RvdHlwZSA9IHsKICBzZW5kOiBmdW5jdGlvbigpIHsKICAgIHN3aXRjaCh0aGlzLm1ldGhvZCkgewogICAgICBjYXNlICJJTlZJVEUiOgogICAgICAgIHRoaXMuY2xpZW50VHJhbnNhY3Rpb24gPSBuZXcgU0lQLlRyYW5zYWN0aW9ucy5JbnZpdGVDbGllbnRUcmFuc2FjdGlvbih0aGlzLCB0aGlzLnJlcXVlc3QsIHRoaXMudWEudHJhbnNwb3J0KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAiQUNLIjoKICAgICAgICB0aGlzLmNsaWVudFRyYW5zYWN0aW9uID0gbmV3IFNJUC5UcmFuc2FjdGlvbnMuQWNrQ2xpZW50VHJhbnNhY3Rpb24odGhpcywgdGhpcy5yZXF1ZXN0LCB0aGlzLnVhLnRyYW5zcG9ydCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhpcy5jbGllbnRUcmFuc2FjdGlvbiA9IG5ldyBTSVAuVHJhbnNhY3Rpb25zLk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uKHRoaXMsIHRoaXMucmVxdWVzdCwgdGhpcy51YS50cmFuc3BvcnQpOwogICAgfQogICAgdGhpcy5jbGllbnRUcmFuc2FjdGlvbi5zZW5kKCk7CgogICAgcmV0dXJuIHRoaXMuY2xpZW50VHJhbnNhY3Rpb247CiAgfSwKCiAgLyoqCiAgKiBDYWxsYmFjayBmaXJlZCB3aGVuIHJlY2VpdmluZyBhIHJlcXVlc3QgdGltZW91dCBlcnJvciBmcm9tIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24uCiAgKiBUbyBiZSByZS1kZWZpbmVkIGJ5IHRoZSBhcHBsaWNhbnQuCiAgKiBAZXZlbnQKICAqLwogIG9uUmVxdWVzdFRpbWVvdXQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5hcHBsaWNhbnQub25SZXF1ZXN0VGltZW91dCgpOwogIH0sCgogIC8qKgogICogQ2FsbGJhY2sgZmlyZWQgd2hlbiByZWNlaXZpbmcgYSB0cmFuc3BvcnQgZXJyb3IgZnJvbSB0aGUgY2xpZW50IHRyYW5zYWN0aW9uLgogICogVG8gYmUgcmUtZGVmaW5lZCBieSB0aGUgYXBwbGljYW50LgogICogQGV2ZW50CiAgKi8KICBvblRyYW5zcG9ydEVycm9yOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuYXBwbGljYW50Lm9uVHJhbnNwb3J0RXJyb3IoKTsKICB9LAoKICAvKioKICAqIENhbGxlZCBmcm9tIGNsaWVudCB0cmFuc2FjdGlvbiB3aGVuIHJlY2VpdmluZyBhIGNvcnJlY3QgcmVzcG9uc2UgdG8gdGhlIHJlcXVlc3QuCiAgKiBBdXRoZW50aWNhdGUgcmVxdWVzdCBpZiBuZWVkZWQgb3IgcGFzcyB0aGUgcmVzcG9uc2UgYmFjayB0byB0aGUgYXBwbGljYW50LgogICogQHBhcmFtIHtTSVAuSW5jb21pbmdSZXNwb25zZX0gcmVzcG9uc2UKICAqLwogIHJlY2VpdmVSZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIHZhciBjc2VxLCBjaGFsbGVuZ2UsIGF1dGhvcml6YXRpb25faGVhZGVyX25hbWUsCiAgICAgIHN0YXR1c19jb2RlID0gcmVzcG9uc2Uuc3RhdHVzX2NvZGU7CgogICAgLyoKICAgICogQXV0aGVudGljYXRpb24KICAgICogQXV0aGVudGljYXRlIG9uY2UuIF9jaGFsbGVuZ2VkXyBmbGFnIHVzZWQgdG8gYXZvaWQgaW5maW5pdGUgYXV0aGVudGljYXRpb25zLgogICAgKi8KICAgIGlmIChzdGF0dXNfY29kZSA9PT0gNDAxIHx8IHN0YXR1c19jb2RlID09PSA0MDcpIHsKCiAgICAgIC8vIEdldCBhbmQgcGFyc2UgdGhlIGFwcHJvcHJpYXRlIFdXVy1BdXRoZW50aWNhdGUgb3IgUHJveHktQXV0aGVudGljYXRlIGhlYWRlci4KICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c19jb2RlID09PSA0MDEpIHsKICAgICAgICBjaGFsbGVuZ2UgPSByZXNwb25zZS5wYXJzZUhlYWRlcignd3d3LWF1dGhlbnRpY2F0ZScpOwogICAgICAgIGF1dGhvcml6YXRpb25faGVhZGVyX25hbWUgPSAnYXV0aG9yaXphdGlvbic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hhbGxlbmdlID0gcmVzcG9uc2UucGFyc2VIZWFkZXIoJ3Byb3h5LWF1dGhlbnRpY2F0ZScpOwogICAgICAgIGF1dGhvcml6YXRpb25faGVhZGVyX25hbWUgPSAncHJveHktYXV0aG9yaXphdGlvbic7CiAgICAgIH0KCiAgICAgIC8vIFZlcmlmeSBpdCBzZWVtcyBhIHZhbGlkIGNoYWxsZW5nZS4KICAgICAgaWYgKCEgY2hhbGxlbmdlKSB7CiAgICAgICAgdGhpcy5sb2dnZXIud2FybihyZXNwb25zZS5zdGF0dXNfY29kZSArICcgd2l0aCB3cm9uZyBvciBtaXNzaW5nIGNoYWxsZW5nZSwgY2Fubm90IGF1dGhlbnRpY2F0ZScpOwogICAgICAgIHRoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuY2hhbGxlbmdlZCB8fCAoIXRoaXMuc3RhbGVkICYmIGNoYWxsZW5nZS5zdGFsZSA9PT0gdHJ1ZSkpIHsKICAgICAgICBpZiAoIXRoaXMuY3JlZGVudGlhbHMpIHsKICAgICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSB0aGlzLnVhLmNvbmZpZ3VyYXRpb24uYXV0aGVudGljYXRpb25GYWN0b3J5KHRoaXMudWEpOwogICAgICAgIH0KCiAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlIGNoYWxsZW5nZSBpcyByZWFsbHkgdmFsaWQuCiAgICAgICAgaWYgKCF0aGlzLmNyZWRlbnRpYWxzLmF1dGhlbnRpY2F0ZSh0aGlzLnJlcXVlc3QsIGNoYWxsZW5nZSkpIHsKICAgICAgICAgIHRoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuY2hhbGxlbmdlZCA9IHRydWU7CgogICAgICAgIGlmIChjaGFsbGVuZ2Uuc3RhbGUpIHsKICAgICAgICAgIHRoaXMuc3RhbGVkID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGlmIChyZXNwb25zZS5tZXRob2QgPT09IFNJUC5DLlJFR0lTVEVSKSB7CiAgICAgICAgICBjc2VxID0gdGhpcy5hcHBsaWNhbnQuY3NlcSArPSAxOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXF1ZXN0LmRpYWxvZyl7CiAgICAgICAgICBjc2VxID0gdGhpcy5yZXF1ZXN0LmRpYWxvZy5sb2NhbF9zZXFudW0gKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3NlcSA9IHRoaXMucmVxdWVzdC5jc2VxICsgMTsKICAgICAgICAgIHRoaXMucmVxdWVzdC5jc2VxID0gY3NlcTsKICAgICAgICB9CiAgICAgICAgdGhpcy5yZXF1ZXN0LnNldEhlYWRlcignY3NlcScsIGNzZXEgKycgJysgdGhpcy5tZXRob2QpOwoKICAgICAgICB0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKGF1dGhvcml6YXRpb25faGVhZGVyX25hbWUsIHRoaXMuY3JlZGVudGlhbHMudG9TdHJpbmcoKSk7CiAgICAgICAgdGhpcy5zZW5kKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgIH0KICB9Cn07CgpTSVAuUmVxdWVzdFNlbmRlciA9IFJlcXVlc3RTZW5kZXI7Cn07Cgp9LHt9XSwyMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qKgogKiBAbmFtZSBTSVAKICogQG5hbWVzcGFjZQogKi8KInVzZSBzdHJpY3QiOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZW52aXJvbm1lbnQpIHsKCnZhciBwa2cgPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKTsKCnZhciBTSVAgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSwgewogIHZlcnNpb246IHsKICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHBrZy52ZXJzaW9uOyB9CiAgfSwKICBuYW1lOiB7CiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiBwa2cudGl0bGU7IH0KICB9Cn0pOwoKcmVxdWlyZSgnLi9VdGlscycpKFNJUCwgZW52aXJvbm1lbnQpOwpTSVAuTG9nZ2VyRmFjdG9yeSA9IHJlcXVpcmUoJy4vTG9nZ2VyRmFjdG9yeScpKGVudmlyb25tZW50LmNvbnNvbGUpOwpTSVAuRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnLi9FdmVudEVtaXR0ZXInKShlbnZpcm9ubWVudC5jb25zb2xlKTsKU0lQLkMgPSByZXF1aXJlKCcuL0NvbnN0YW50cycpKFNJUC5uYW1lLCBTSVAudmVyc2lvbik7ClNJUC5FeGNlcHRpb25zID0gcmVxdWlyZSgnLi9FeGNlcHRpb25zJyk7ClNJUC5UaW1lcnMgPSByZXF1aXJlKCcuL1RpbWVycycpKGVudmlyb25tZW50LnRpbWVycyk7ClNJUC5UcmFuc3BvcnQgPSBlbnZpcm9ubWVudC5UcmFuc3BvcnQoU0lQLCBlbnZpcm9ubWVudC5XZWJTb2NrZXQpOwpyZXF1aXJlKCcuL1BhcnNlcicpKFNJUCk7CnJlcXVpcmUoJy4vU0lQTWVzc2FnZScpKFNJUCk7CnJlcXVpcmUoJy4vVVJJJykoU0lQKTsKcmVxdWlyZSgnLi9OYW1lQWRkckhlYWRlcicpKFNJUCk7CnJlcXVpcmUoJy4vVHJhbnNhY3Rpb25zJykoU0lQKTsKcmVxdWlyZSgnLi9EaWFsb2dzJykoU0lQKTsKcmVxdWlyZSgnLi9SZXF1ZXN0U2VuZGVyJykoU0lQKTsKcmVxdWlyZSgnLi9SZWdpc3RlckNvbnRleHQnKShTSVApOwpTSVAuTWVkaWFIYW5kbGVyID0gcmVxdWlyZSgnLi9NZWRpYUhhbmRsZXInKShTSVAuRXZlbnRFbWl0dGVyKTsKcmVxdWlyZSgnLi9DbGllbnRDb250ZXh0JykoU0lQKTsKcmVxdWlyZSgnLi9TZXJ2ZXJDb250ZXh0JykoU0lQKTsKcmVxdWlyZSgnLi9TZXNzaW9uJykoU0lQLCBlbnZpcm9ubWVudCk7CnJlcXVpcmUoJy4vU3Vic2NyaXB0aW9uJykoU0lQKTsKU0lQLldlYlJUQyA9IHJlcXVpcmUoJy4vV2ViUlRDJykoU0lQLCBlbnZpcm9ubWVudCk7CnJlcXVpcmUoJy4vVUEnKShTSVAsIGVudmlyb25tZW50KTsKU0lQLkhhY2tzID0gcmVxdWlyZSgnLi9IYWNrcycpKFNJUCk7CnJlcXVpcmUoJy4vU2FuaXR5Q2hlY2snKShTSVApOwpTSVAuRGlnZXN0QXV0aGVudGljYXRpb24gPSByZXF1aXJlKCcuL0RpZ2VzdEF1dGhlbnRpY2F0aW9uJykoU0lQLlV0aWxzKTsKU0lQLkdyYW1tYXIgPSByZXF1aXJlKCcuL0dyYW1tYXInKShTSVApOwoKcmV0dXJuIFNJUDsKfTsKCn0seyIuLi9wYWNrYWdlLmpzb24iOjYsIi4vQ2xpZW50Q29udGV4dCI6NywiLi9Db25zdGFudHMiOjgsIi4vRGlhbG9ncyI6MTAsIi4vRGlnZXN0QXV0aGVudGljYXRpb24iOjExLCIuL0V2ZW50RW1pdHRlciI6MTIsIi4vRXhjZXB0aW9ucyI6MTMsIi4vR3JhbW1hciI6MTQsIi4vSGFja3MiOjE2LCIuL0xvZ2dlckZhY3RvcnkiOjE3LCIuL01lZGlhSGFuZGxlciI6MTgsIi4vTmFtZUFkZHJIZWFkZXIiOjE5LCIuL1BhcnNlciI6MjAsIi4vUmVnaXN0ZXJDb250ZXh0IjoyMSwiLi9SZXF1ZXN0U2VuZGVyIjoyMiwiLi9TSVBNZXNzYWdlIjoyNCwiLi9TYW5pdHlDaGVjayI6MjUsIi4vU2VydmVyQ29udGV4dCI6MjYsIi4vU2Vzc2lvbiI6MjcsIi4vU3Vic2NyaXB0aW9uIjoyOSwiLi9UaW1lcnMiOjMwLCIuL1RyYW5zYWN0aW9ucyI6MzEsIi4vVUEiOjMzLCIuL1VSSSI6MzQsIi4vVXRpbHMiOjM1LCIuL1dlYlJUQyI6MzZ9XSwyNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgU0lQIE1lc3NhZ2UKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyCiAgT3V0Z29pbmdSZXF1ZXN0LAogIEluY29taW5nTWVzc2FnZSwKICBJbmNvbWluZ1JlcXVlc3QsCiAgSW5jb21pbmdSZXNwb25zZTsKCmZ1bmN0aW9uIGdldFN1cHBvcnRlZEhlYWRlciAocmVxdWVzdCkgewogIHZhciBhbGxvd1VucmVnaXN0ZXJlZCA9IHJlcXVlc3QudWEuY29uZmlndXJhdGlvbi5oYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzOwogIHZhciBvcHRpb25UYWdzID0gW107CiAgdmFyIG9wdGlvblRhZ1NldCA9IHt9OwoKICBpZiAocmVxdWVzdC5tZXRob2QgPT09IFNJUC5DLlJFR0lTVEVSKSB7CiAgICBvcHRpb25UYWdzLnB1c2goJ3BhdGgnLCAnZ3J1dScpOwogIH0gZWxzZSBpZiAocmVxdWVzdC5tZXRob2QgPT09IFNJUC5DLklOVklURSAmJgogICAgICAgICAgICAgKHJlcXVlc3QudWEuY29udGFjdC5wdWJfZ3J1dSB8fCByZXF1ZXN0LnVhLmNvbnRhY3QudGVtcF9ncnV1KSkgewogICAgb3B0aW9uVGFncy5wdXNoKCdncnV1Jyk7CiAgfQoKICBpZiAocmVxdWVzdC51YS5jb25maWd1cmF0aW9uLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlNVUFBPUlRFRCkgewogICAgb3B0aW9uVGFncy5wdXNoKCcxMDByZWwnKTsKICB9CiAgaWYgKHJlcXVlc3QudWEuY29uZmlndXJhdGlvbi5yZXBsYWNlcyA9PT0gU0lQLkMuc3VwcG9ydGVkLlNVUFBPUlRFRCkgewogICAgb3B0aW9uVGFncy5wdXNoKCdyZXBsYWNlcycpOwogIH0KCiAgb3B0aW9uVGFncy5wdXNoKCdvdXRib3VuZCcpOwoKICBvcHRpb25UYWdzID0gb3B0aW9uVGFncy5jb25jYXQocmVxdWVzdC51YS5jb25maWd1cmF0aW9uLmV4dHJhU3VwcG9ydGVkKTsKCiAgb3B0aW9uVGFncyA9IG9wdGlvblRhZ3MuZmlsdGVyKGZ1bmN0aW9uKG9wdGlvblRhZykgewogICAgdmFyIHJlZ2lzdGVyZWQgPSBTSVAuQy5PUFRJT05fVEFHU1tvcHRpb25UYWddOwogICAgdmFyIHVuaXF1ZSA9ICFvcHRpb25UYWdTZXRbb3B0aW9uVGFnXTsKICAgIG9wdGlvblRhZ1NldFtvcHRpb25UYWddID0gdHJ1ZTsKICAgIHJldHVybiAocmVnaXN0ZXJlZCB8fCBhbGxvd1VucmVnaXN0ZXJlZCkgJiYgdW5pcXVlOwogIH0pOwoKICByZXR1cm4gJ1N1cHBvcnRlZDogJyArIG9wdGlvblRhZ3Muam9pbignLCAnKSArICdcclxuJzsKfQoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICogQGNsYXNzIENsYXNzIGZvciBvdXRnb2luZyBTSVAgcmVxdWVzdC4KICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCByZXF1ZXN0IG1ldGhvZAogKiBAcGFyYW0ge1N0cmluZ30gcnVyaSByZXF1ZXN0IHVyaQogKiBAcGFyYW0ge1NJUC5VQX0gdWEKICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBwYXJhbWV0ZXJzIHRoYXQgd2lsbCBoYXZlIHByaW9yaXR5IG92ZXIgdWEuY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzOgogKiA8YnI+CiAqICAtIGNzZXEsIGNhbGxfaWQsIGZyb21fdGFnLCBmcm9tX3VyaSwgZnJvbV9kaXNwbGF5TmFtZSwgdG9fdXJpLCB0b190YWcsIHJvdXRlX3NldAogKiBAcGFyYW0ge09iamVjdH0gW2hlYWRlcnNdIGV4dHJhIGhlYWRlcnMKICogQHBhcmFtIHtTdHJpbmd9IFtib2R5XQogKi8KT3V0Z29pbmdSZXF1ZXN0ID0gZnVuY3Rpb24obWV0aG9kLCBydXJpLCB1YSwgcGFyYW1zLCBleHRyYUhlYWRlcnMsIGJvZHkpIHsKICB2YXIKICAgIHRvLAogICAgZnJvbSwKICAgIGNhbGxfaWQsCiAgICBjc2VxLAogICAgdG9fdXJpLAogICAgZnJvbV91cmk7CgogIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTsKCiAgLy8gTWFuZGF0b3J5IHBhcmFtZXRlcnMgY2hlY2sKICBpZighbWV0aG9kIHx8ICFydXJpIHx8ICF1YSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNpcG1lc3NhZ2UnKTsKICB0aGlzLnVhID0gdWE7CiAgdGhpcy5oZWFkZXJzID0ge307CiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7CiAgdGhpcy5ydXJpID0gcnVyaTsKICB0aGlzLmJvZHkgPSBib2R5OwogIHRoaXMuZXh0cmFIZWFkZXJzID0gKGV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKICB0aGlzLnN0YXR1c0NvZGUgPSBwYXJhbXMuc3RhdHVzX2NvZGU7CiAgdGhpcy5yZWFzb25QaHJhc2UgPSBwYXJhbXMucmVhc29uX3BocmFzZTsKCiAgLy8gRmlsbCB0aGUgQ29tbW9uIFNJUCBSZXF1ZXN0IEhlYWRlcnMKCiAgLy8gUm91dGUKICBpZiAocGFyYW1zLnJvdXRlX3NldCkgewogICAgdGhpcy5zZXRIZWFkZXIoJ3JvdXRlJywgcGFyYW1zLnJvdXRlX3NldCk7CiAgfSBlbHNlIGlmICh1YS5jb25maWd1cmF0aW9uLnVzZVByZWxvYWRlZFJvdXRlKXsKICAgIHRoaXMuc2V0SGVhZGVyKCdyb3V0ZScsIHVhLnRyYW5zcG9ydC5zZXJ2ZXIuc2lwX3VyaSk7CiAgfQoKICAvLyBWaWEKICAvLyBFbXB0eSBWaWEgaGVhZGVyLiBXaWxsIGJlIGZpbGxlZCBieSB0aGUgY2xpZW50IHRyYW5zYWN0aW9uLgogIHRoaXMuc2V0SGVhZGVyKCd2aWEnLCAnJyk7CgogIC8vIE1heC1Gb3J3YXJkcwogIHRoaXMuc2V0SGVhZGVyKCdtYXgtZm9yd2FyZHMnLCBTSVAuVUEuQy5NQVhfRk9SV0FSRFMpOwoKICAvLyBUbwogIHRvX3VyaSA9IHBhcmFtcy50b191cmkgfHwgcnVyaTsKICB0byA9IChwYXJhbXMudG9fZGlzcGxheU5hbWUgfHwgcGFyYW1zLnRvX2Rpc3BsYXlOYW1lID09PSAwKSA/ICciJyArIHBhcmFtcy50b19kaXNwbGF5TmFtZSArICciICcgOiAnJzsKICB0byArPSAnPCcgKyAodG9fdXJpICYmIHRvX3VyaS50b1JhdyA/IHRvX3VyaS50b1JhdygpIDogdG9fdXJpKSArICc+JzsKICB0byArPSBwYXJhbXMudG9fdGFnID8gJzt0YWc9JyArIHBhcmFtcy50b190YWcgOiAnJzsKICB0aGlzLnRvID0gbmV3IFNJUC5OYW1lQWRkckhlYWRlci5wYXJzZSh0byk7CiAgdGhpcy5zZXRIZWFkZXIoJ3RvJywgdG8pOwoKICAvLyBGcm9tCiAgZnJvbV91cmkgPSBwYXJhbXMuZnJvbV91cmkgfHwgdWEuY29uZmlndXJhdGlvbi51cmk7CiAgaWYgKHBhcmFtcy5mcm9tX2Rpc3BsYXlOYW1lIHx8IHBhcmFtcy5mcm9tX2Rpc3BsYXlOYW1lID09PSAwKSB7CiAgICBmcm9tID0gJyInICsgcGFyYW1zLmZyb21fZGlzcGxheU5hbWUgKyAnIiAnOwogIH0gZWxzZSBpZiAodWEuY29uZmlndXJhdGlvbi5kaXNwbGF5TmFtZSkgewogICAgZnJvbSA9ICciJyArIHVhLmNvbmZpZ3VyYXRpb24uZGlzcGxheU5hbWUgKyAnIiAnOwogIH0gZWxzZSB7CiAgICBmcm9tID0gJyc7CiAgfQogIGZyb20gKz0gJzwnICsgKGZyb21fdXJpICYmIGZyb21fdXJpLnRvUmF3ID8gZnJvbV91cmkudG9SYXcoKSA6IGZyb21fdXJpKSArICc+O3RhZz0nOwogIGZyb20gKz0gcGFyYW1zLmZyb21fdGFnIHx8IFNJUC5VdGlscy5uZXdUYWcoKTsKICB0aGlzLmZyb20gPSBuZXcgU0lQLk5hbWVBZGRySGVhZGVyLnBhcnNlKGZyb20pOwogIHRoaXMuc2V0SGVhZGVyKCdmcm9tJywgZnJvbSk7CgogIC8vIENhbGwtSUQKICBjYWxsX2lkID0gcGFyYW1zLmNhbGxfaWQgfHwgKHVhLmNvbmZpZ3VyYXRpb24uc2lwanNJZCArIFNJUC5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbigxNSkpOwogIHRoaXMuY2FsbF9pZCA9IGNhbGxfaWQ7CiAgdGhpcy5zZXRIZWFkZXIoJ2NhbGwtaWQnLCBjYWxsX2lkKTsKCiAgLy8gQ1NlcQogIGNzZXEgPSBwYXJhbXMuY3NlcSB8fCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7CiAgdGhpcy5jc2VxID0gY3NlcTsKICB0aGlzLnNldEhlYWRlcignY3NlcScsIGNzZXEgKyAnICcgKyBtZXRob2QpOwp9OwoKT3V0Z29pbmdSZXF1ZXN0LnByb3RvdHlwZSA9IHsKICAvKioKICAgKiBSZXBsYWNlIHRoZSB0aGUgZ2l2ZW4gaGVhZGVyIGJ5IHRoZSBnaXZlbiB2YWx1ZS4KICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHZhbHVlIGhlYWRlciB2YWx1ZQogICAqLwogIHNldEhlYWRlcjogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgIHRoaXMuaGVhZGVyc1tTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpXSA9ICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSA/IHZhbHVlIDogW3ZhbHVlXTsKICB9LAoKICAvKioKICAgKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBoZWFkZXIgbmFtZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7U3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUgc3BlY2lmaWVkIGhlYWRlciwgdW5kZWZpbmVkIGlmIGhlYWRlciBkb2Vzbid0IGV4aXN0LgogICAqLwogIGdldEhlYWRlcjogZnVuY3Rpb24obmFtZSkgewogICAgdmFyIHJlZ2V4cCwgaWR4LAogICAgICBsZW5ndGggPSB0aGlzLmV4dHJhSGVhZGVycy5sZW5ndGgsCiAgICAgIGhlYWRlciA9IHRoaXMuaGVhZGVyc1tTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpXTsKCiAgICBpZihoZWFkZXIpIHsKICAgICAgaWYoaGVhZGVyWzBdKSB7CiAgICAgICAgcmV0dXJuIGhlYWRlclswXTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmVnZXhwID0gbmV3IFJlZ0V4cCgnXlxccyonICsgbmFtZSArICdcXHMqOicsJ2knKTsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaGVhZGVyID0gdGhpcy5leHRyYUhlYWRlcnNbaWR4XTsKICAgICAgICBpZiAocmVnZXhwLnRlc3QoaGVhZGVyKSkgewogICAgICAgICAgcmV0dXJuIGhlYWRlci5zdWJzdHJpbmcoaGVhZGVyLmluZGV4T2YoJzonKSsxKS50cmltKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuOwogIH0sCgogIC8qKgogICAqIEdldCB0aGUgaGVhZGVyL3Mgb2YgdGhlIGdpdmVuIG5hbWUuCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IHdpdGggYWxsIHRoZSBoZWFkZXJzIG9mIHRoZSBzcGVjaWZpZWQgbmFtZS4KICAgKi8KICBnZXRIZWFkZXJzOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgaWR4LCBsZW5ndGgsIHJlZ2V4cCwKICAgICAgaGVhZGVyID0gdGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldLAogICAgICByZXN1bHQgPSBbXTsKCiAgICBpZihoZWFkZXIpIHsKICAgICAgbGVuZ3RoID0gaGVhZGVyLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgcmVzdWx0LnB1c2goaGVhZGVyW2lkeF0pOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9IGVsc2UgewogICAgICBsZW5ndGggPSB0aGlzLmV4dHJhSGVhZGVycy5sZW5ndGg7CiAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAoJ15cXHMqJyArIG5hbWUgKyAnXFxzKjonLCdpJyk7CiAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICAgIGhlYWRlciA9IHRoaXMuZXh0cmFIZWFkZXJzW2lkeF07CiAgICAgICAgaWYgKHJlZ2V4cC50ZXN0KGhlYWRlcikpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGhlYWRlci5zdWJzdHJpbmcoaGVhZGVyLmluZGV4T2YoJzonKSsxKS50cmltKCkpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sCgogIC8qKgogICAqIFZlcmlmeSB0aGUgZXhpc3RlbmNlIG9mIHRoZSBnaXZlbiBoZWFkZXIuCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBoZWFkZXIgd2l0aCBnaXZlbiBuYW1lIGV4aXN0cywgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgaGFzSGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgcmVnZXhwLCBpZHgsCiAgICAgIGxlbmd0aCA9IHRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aDsKCiAgICBpZiAodGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgcmVnZXhwID0gbmV3IFJlZ0V4cCgnXlxccyonICsgbmFtZSArICdcXHMqOicsJ2knKTsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaWYgKHJlZ2V4cC50ZXN0KHRoaXMuZXh0cmFIZWFkZXJzW2lkeF0pKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgdmFyIG1zZyA9ICcnLCBoZWFkZXIsIGxlbmd0aCwgaWR4OwoKICAgIG1zZyArPSB0aGlzLm1ldGhvZCArICcgJyArICh0aGlzLnJ1cmkudG9SYXcgPyB0aGlzLnJ1cmkudG9SYXcoKSA6IHRoaXMucnVyaSkgKyAnIFNJUC8yLjBcclxuJzsKCiAgICBmb3IgKGhlYWRlciBpbiB0aGlzLmhlYWRlcnMpIHsKICAgICAgbGVuZ3RoID0gdGhpcy5oZWFkZXJzW2hlYWRlcl0ubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBtc2cgKz0gaGVhZGVyICsgJzogJyArIHRoaXMuaGVhZGVyc1toZWFkZXJdW2lkeF0gKyAnXHJcbic7CiAgICAgIH0KICAgIH0KCiAgICBsZW5ndGggPSB0aGlzLmV4dHJhSGVhZGVycy5sZW5ndGg7CiAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgbXNnICs9IHRoaXMuZXh0cmFIZWFkZXJzW2lkeF0udHJpbSgpICsnXHJcbic7CiAgICB9CgogICAgbXNnICs9IGdldFN1cHBvcnRlZEhlYWRlcih0aGlzKTsKICAgIG1zZyArPSAnVXNlci1BZ2VudDogJyArIHRoaXMudWEuY29uZmlndXJhdGlvbi51c2VyQWdlbnRTdHJpbmcgKydcclxuJzsKCiAgICBpZih0aGlzLmJvZHkpIHsKICAgICAgbGVuZ3RoID0gU0lQLlV0aWxzLnN0cl91dGY4X2xlbmd0aCh0aGlzLmJvZHkpOwogICAgICBtc2cgKz0gJ0NvbnRlbnQtTGVuZ3RoOiAnICsgbGVuZ3RoICsgJ1xyXG5cclxuJzsKICAgICAgbXNnICs9IHRoaXMuYm9keTsKICAgIH0gZWxzZSB7CiAgICAgIG1zZyArPSAnQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbic7CiAgICB9CgogICAgcmV0dXJuIG1zZzsKICB9Cn07CgovKioKICogQGF1Z21lbnRzIFNJUAogKiBAY2xhc3MgQ2xhc3MgZm9yIGluY29taW5nIFNJUCBtZXNzYWdlLgogKi8KSW5jb21pbmdNZXNzYWdlID0gZnVuY3Rpb24oKXsKICB0aGlzLmRhdGEgPSBudWxsOwogIHRoaXMuaGVhZGVycyA9IG51bGw7CiAgdGhpcy5tZXRob2QgPSAgbnVsbDsKICB0aGlzLnZpYSA9IG51bGw7CiAgdGhpcy52aWFfYnJhbmNoID0gbnVsbDsKICB0aGlzLmNhbGxfaWQgPSBudWxsOwogIHRoaXMuY3NlcSA9IG51bGw7CiAgdGhpcy5mcm9tID0gbnVsbDsKICB0aGlzLmZyb21fdGFnID0gbnVsbDsKICB0aGlzLnRvID0gbnVsbDsKICB0aGlzLnRvX3RhZyA9IG51bGw7CiAgdGhpcy5ib2R5ID0gbnVsbDsKfTsKCkluY29taW5nTWVzc2FnZS5wcm90b3R5cGUgPSB7CiAgLyoqCiAgKiBJbnNlcnQgYSBoZWFkZXIgb2YgdGhlIGdpdmVuIG5hbWUgYW5kIHZhbHVlIGludG8gdGhlIGxhc3QgcG9zaXRpb24gb2YgdGhlCiAgKiBoZWFkZXIgYXJyYXkuCiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIGhlYWRlciB2YWx1ZQogICovCiAgYWRkSGVhZGVyOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgdmFyIGhlYWRlciA9IHsgcmF3OiB2YWx1ZSB9OwoKICAgIG5hbWUgPSBTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpOwoKICAgIGlmKHRoaXMuaGVhZGVyc1tuYW1lXSkgewogICAgICB0aGlzLmhlYWRlcnNbbmFtZV0ucHVzaChoZWFkZXIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5oZWFkZXJzW25hbWVdID0gW2hlYWRlcl07CiAgICB9CiAgfSwKCiAgLyoqCiAgICogR2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gaGVhZGVyIG5hbWUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLgogICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIGhlYWRlciBuYW1lCiAgICogQHJldHVybnMge1N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIHNwZWNpZmllZCBoZWFkZXIsIG51bGwgaWYgaGVhZGVyIGRvZXNuJ3QgZXhpc3QuCiAgICovCiAgZ2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgaGVhZGVyID0gdGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldOwoKICAgIGlmKGhlYWRlcikgewogICAgICBpZihoZWFkZXJbMF0pIHsKICAgICAgICByZXR1cm4gaGVhZGVyWzBdLnJhdzsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0sCgogIC8qKgogICAqIEdldCB0aGUgaGVhZGVyL3Mgb2YgdGhlIGdpdmVuIG5hbWUuCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IHdpdGggYWxsIHRoZSBoZWFkZXJzIG9mIHRoZSBzcGVjaWZpZWQgbmFtZS4KICAgKi8KICBnZXRIZWFkZXJzOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgaWR4LCBsZW5ndGgsCiAgICAgIGhlYWRlciA9IHRoaXMuaGVhZGVyc1tTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpXSwKICAgICAgcmVzdWx0ID0gW107CgogICAgaWYoIWhlYWRlcikgewogICAgICByZXR1cm4gW107CiAgICB9CgogICAgbGVuZ3RoID0gaGVhZGVyLmxlbmd0aDsKICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICByZXN1bHQucHVzaChoZWFkZXJbaWR4XS5yYXcpOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfSwKCiAgLyoqCiAgICogVmVyaWZ5IHRoZSBleGlzdGVuY2Ugb2YgdGhlIGdpdmVuIGhlYWRlci4KICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGhlYWRlciB3aXRoIGdpdmVuIG5hbWUgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBoYXNIZWFkZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHJldHVybih0aGlzLmhlYWRlcnNbU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKV0pID8gdHJ1ZSA6IGZhbHNlOwogIH0sCgogIC8qKgogICogUGFyc2UgdGhlIGdpdmVuIGhlYWRlciBvbiB0aGUgZ2l2ZW4gaW5kZXguCiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICogQHBhcmFtIHtOdW1iZXJ9IFtpZHg9MF0gaGVhZGVyIGluZGV4CiAgKiBAcmV0dXJucyB7T2JqZWN0fHVuZGVmaW5lZH0gUGFyc2VkIGhlYWRlciBvYmplY3QsIHVuZGVmaW5lZCBpZiB0aGUgaGVhZGVyIGlzIG5vdCBwcmVzZW50IG9yIGluIGNhc2Ugb2YgYSBwYXJzaW5nIGVycm9yLgogICovCiAgcGFyc2VIZWFkZXI6IGZ1bmN0aW9uKG5hbWUsIGlkeCkgewogICAgdmFyIGhlYWRlciwgdmFsdWUsIHBhcnNlZDsKCiAgICBuYW1lID0gU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKTsKCiAgICBpZHggPSBpZHggfHwgMDsKCiAgICBpZighdGhpcy5oZWFkZXJzW25hbWVdKSB7CiAgICAgIHRoaXMubG9nZ2VyLmxvZygnaGVhZGVyICInICsgbmFtZSArICciIG5vdCBwcmVzZW50Jyk7CiAgICAgIHJldHVybjsKICAgIH0gZWxzZSBpZihpZHggPj0gdGhpcy5oZWFkZXJzW25hbWVdLmxlbmd0aCkgewogICAgICB0aGlzLmxvZ2dlci5sb2coJ25vdCBzbyBtYW55ICInICsgbmFtZSArICciIGhlYWRlcnMgcHJlc2VudCcpOwogICAgICByZXR1cm47CiAgICB9CgogICAgaGVhZGVyID0gdGhpcy5oZWFkZXJzW25hbWVdW2lkeF07CiAgICB2YWx1ZSA9IGhlYWRlci5yYXc7CgogICAgaWYoaGVhZGVyLnBhcnNlZCkgewogICAgICByZXR1cm4gaGVhZGVyLnBhcnNlZDsKICAgIH0KCiAgICAvL3N1YnN0aXR1dGUgJy0nIGJ5ICdfJyBmb3IgZ3JhbW1hciBydWxlIG1hdGNoaW5nLgogICAgcGFyc2VkID0gU0lQLkdyYW1tYXIucGFyc2UodmFsdWUsIG5hbWUucmVwbGFjZSgvLS9nLCAnXycpKTsKCiAgICBpZihwYXJzZWQgPT09IC0xKSB7CiAgICAgIHRoaXMuaGVhZGVyc1tuYW1lXS5zcGxpY2UoaWR4LCAxKTsgLy9kZWxldGUgZnJvbSBoZWFkZXJzCiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2Vycm9yIHBhcnNpbmcgIicgKyBuYW1lICsgJyIgaGVhZGVyIGZpZWxkIHdpdGggdmFsdWUgIicgKyB2YWx1ZSArICciJyk7CiAgICAgIHJldHVybjsKICAgIH0gZWxzZSB7CiAgICAgIGhlYWRlci5wYXJzZWQgPSBwYXJzZWQ7CiAgICAgIHJldHVybiBwYXJzZWQ7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogTWVzc2FnZSBIZWFkZXIgYXR0cmlidXRlIHNlbGVjdG9yLiBBbGlhcyBvZiBwYXJzZUhlYWRlci4KICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICAqIEBwYXJhbSB7TnVtYmVyfSBbaWR4PTBdIGhlYWRlciBpbmRleAogICAqIEByZXR1cm5zIHtPYmplY3R8dW5kZWZpbmVkfSBQYXJzZWQgaGVhZGVyIG9iamVjdCwgdW5kZWZpbmVkIGlmIHRoZSBoZWFkZXIgaXMgbm90IHByZXNlbnQgb3IgaW4gY2FzZSBvZiBhIHBhcnNpbmcgZXJyb3IuCiAgICoKICAgKiBAZXhhbXBsZQogICAqIG1lc3NhZ2UucygndmlhJywzKS5wb3J0CiAgICovCiAgczogZnVuY3Rpb24obmFtZSwgaWR4KSB7CiAgICByZXR1cm4gdGhpcy5wYXJzZUhlYWRlcihuYW1lLCBpZHgpOwogIH0sCgogIC8qKgogICogUmVwbGFjZSB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGhlYWRlciBieSB0aGUgdmFsdWUuCiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIGhlYWRlciB2YWx1ZQogICovCiAgc2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgdmFyIGhlYWRlciA9IHsgcmF3OiB2YWx1ZSB9OwogICAgdGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldID0gW2hlYWRlcl07CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZGF0YTsKICB9Cn07CgovKioKICogQGF1Z21lbnRzIEluY29taW5nTWVzc2FnZQogKiBAY2xhc3MgQ2xhc3MgZm9yIGluY29taW5nIFNJUCByZXF1ZXN0LgogKi8KSW5jb21pbmdSZXF1ZXN0ID0gZnVuY3Rpb24odWEpIHsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNpcG1lc3NhZ2UnKTsKICB0aGlzLnVhID0gdWE7CiAgdGhpcy5oZWFkZXJzID0ge307CiAgdGhpcy5ydXJpID0gbnVsbDsKICB0aGlzLnRyYW5zcG9ydCA9IG51bGw7CiAgdGhpcy5zZXJ2ZXJfdHJhbnNhY3Rpb24gPSBudWxsOwp9OwpJbmNvbWluZ1JlcXVlc3QucHJvdG90eXBlID0gbmV3IEluY29taW5nTWVzc2FnZSgpOwoKLyoqCiogU3RhdGVmdWwgcmVwbHkuCiogQHBhcmFtIHtOdW1iZXJ9IGNvZGUgc3RhdHVzIGNvZGUKKiBAcGFyYW0ge1N0cmluZ30gcmVhc29uIHJlYXNvbiBwaHJhc2UKKiBAcGFyYW0ge09iamVjdH0gaGVhZGVycyBleHRyYSBoZWFkZXJzCiogQHBhcmFtIHtTdHJpbmd9IGJvZHkgYm9keQoqIEBwYXJhbSB7RnVuY3Rpb259IFtvblN1Y2Nlc3NdIG9uU3VjY2VzcyBjYWxsYmFjawoqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkZhaWx1cmVdIG9uRmFpbHVyZSBjYWxsYmFjawoqLwpJbmNvbWluZ1JlcXVlc3QucHJvdG90eXBlLnJlcGx5ID0gZnVuY3Rpb24oY29kZSwgcmVhc29uLCBleHRyYUhlYWRlcnMsIGJvZHksIG9uU3VjY2Vzcywgb25GYWlsdXJlKSB7CiAgdmFyIHJyLCB2aWFzLCBsZW5ndGgsIGlkeCwgcmVzcG9uc2UsCiAgICB0byA9IHRoaXMuZ2V0SGVhZGVyKCdUbycpLAogICAgciA9IDAsCiAgICB2ID0gMDsKCiAgcmVzcG9uc2UgPSBTSVAuVXRpbHMuYnVpbGRTdGF0dXNMaW5lKGNvZGUsIHJlYXNvbik7CiAgZXh0cmFIZWFkZXJzID0gKGV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKCiAgaWYodGhpcy5tZXRob2QgPT09IFNJUC5DLklOVklURSAmJiBjb2RlID4gMTAwICYmIGNvZGUgPD0gMjAwKSB7CiAgICByciA9IHRoaXMuZ2V0SGVhZGVycygncmVjb3JkLXJvdXRlJyk7CiAgICBsZW5ndGggPSByci5sZW5ndGg7CgogICAgZm9yKHI7IHIgPCBsZW5ndGg7IHIrKykgewogICAgICByZXNwb25zZSArPSAnUmVjb3JkLVJvdXRlOiAnICsgcnJbcl0gKyAnXHJcbic7CiAgICB9CiAgfQoKICB2aWFzID0gdGhpcy5nZXRIZWFkZXJzKCd2aWEnKTsKICBsZW5ndGggPSB2aWFzLmxlbmd0aDsKCiAgZm9yKHY7IHYgPCBsZW5ndGg7IHYrKykgewogICAgcmVzcG9uc2UgKz0gJ1ZpYTogJyArIHZpYXNbdl0gKyAnXHJcbic7CiAgfQoKICBpZighdGhpcy50b190YWcgJiYgY29kZSA+IDEwMCkgewogICAgdG8gKz0gJzt0YWc9JyArIFNJUC5VdGlscy5uZXdUYWcoKTsKICB9IGVsc2UgaWYodGhpcy50b190YWcgJiYgIXRoaXMucygndG8nKS5oYXNQYXJhbSgndGFnJykpIHsKICAgIHRvICs9ICc7dGFnPScgKyB0aGlzLnRvX3RhZzsKICB9CgogIHJlc3BvbnNlICs9ICdUbzogJyArIHRvICsgJ1xyXG4nOwogIHJlc3BvbnNlICs9ICdGcm9tOiAnICsgdGhpcy5nZXRIZWFkZXIoJ0Zyb20nKSArICdcclxuJzsKICByZXNwb25zZSArPSAnQ2FsbC1JRDogJyArIHRoaXMuY2FsbF9pZCArICdcclxuJzsKICByZXNwb25zZSArPSAnQ1NlcTogJyArIHRoaXMuY3NlcSArICcgJyArIHRoaXMubWV0aG9kICsgJ1xyXG4nOwoKICBsZW5ndGggPSBleHRyYUhlYWRlcnMubGVuZ3RoOwogIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgcmVzcG9uc2UgKz0gZXh0cmFIZWFkZXJzW2lkeF0udHJpbSgpICsnXHJcbic7CiAgfQoKICByZXNwb25zZSArPSBnZXRTdXBwb3J0ZWRIZWFkZXIodGhpcyk7CiAgcmVzcG9uc2UgKz0gJ1VzZXItQWdlbnQ6ICcgKyB0aGlzLnVhLmNvbmZpZ3VyYXRpb24udXNlckFnZW50U3RyaW5nICsnXHJcbic7CgogIGlmKGJvZHkpIHsKICAgIGxlbmd0aCA9IFNJUC5VdGlscy5zdHJfdXRmOF9sZW5ndGgoYm9keSk7CiAgICByZXNwb25zZSArPSAnQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHBcclxuJzsKICAgIHJlc3BvbnNlICs9ICdDb250ZW50LUxlbmd0aDogJyArIGxlbmd0aCArICdcclxuXHJcbic7CiAgICByZXNwb25zZSArPSBib2R5OwogIH0gZWxzZSB7CiAgICByZXNwb25zZSArPSAnQ29udGVudC1MZW5ndGg6ICcgKyAwICsgJ1xyXG5cclxuJzsKICB9CgogIHRoaXMuc2VydmVyX3RyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShjb2RlLCByZXNwb25zZSkudGhlbihvblN1Y2Nlc3MsIG9uRmFpbHVyZSk7CgogIHJldHVybiByZXNwb25zZTsKfTsKCi8qKgoqIFN0YXRlbGVzcyByZXBseS4KKiBAcGFyYW0ge051bWJlcn0gY29kZSBzdGF0dXMgY29kZQoqIEBwYXJhbSB7U3RyaW5nfSByZWFzb24gcmVhc29uIHBocmFzZQoqLwpJbmNvbWluZ1JlcXVlc3QucHJvdG90eXBlLnJlcGx5X3NsID0gZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7CiAgdmFyIHRvLCByZXNwb25zZSwKICAgIHYgPSAwLAogICAgdmlhcyA9IHRoaXMuZ2V0SGVhZGVycygndmlhJyksCiAgICBsZW5ndGggPSB2aWFzLmxlbmd0aDsKCiAgcmVzcG9uc2UgPSBTSVAuVXRpbHMuYnVpbGRTdGF0dXNMaW5lKGNvZGUsIHJlYXNvbik7CgogIGZvcih2OyB2IDwgbGVuZ3RoOyB2KyspIHsKICAgIHJlc3BvbnNlICs9ICdWaWE6ICcgKyB2aWFzW3ZdICsgJ1xyXG4nOwogIH0KCiAgdG8gPSB0aGlzLmdldEhlYWRlcignVG8nKTsKCiAgaWYoIXRoaXMudG9fdGFnICYmIGNvZGUgPiAxMDApIHsKICAgIHRvICs9ICc7dGFnPScgKyBTSVAuVXRpbHMubmV3VGFnKCk7CiAgfSBlbHNlIGlmKHRoaXMudG9fdGFnICYmICF0aGlzLnMoJ3RvJykuaGFzUGFyYW0oJ3RhZycpKSB7CiAgICB0byArPSAnO3RhZz0nICsgdGhpcy50b190YWc7CiAgfQoKICByZXNwb25zZSArPSAnVG86ICcgKyB0byArICdcclxuJzsKICByZXNwb25zZSArPSAnRnJvbTogJyArIHRoaXMuZ2V0SGVhZGVyKCdGcm9tJykgKyAnXHJcbic7CiAgcmVzcG9uc2UgKz0gJ0NhbGwtSUQ6ICcgKyB0aGlzLmNhbGxfaWQgKyAnXHJcbic7CiAgcmVzcG9uc2UgKz0gJ0NTZXE6ICcgKyB0aGlzLmNzZXEgKyAnICcgKyB0aGlzLm1ldGhvZCArICdcclxuJzsKICByZXNwb25zZSArPSAnVXNlci1BZ2VudDogJyArIHRoaXMudWEuY29uZmlndXJhdGlvbi51c2VyQWdlbnRTdHJpbmcgKydcclxuJzsKICByZXNwb25zZSArPSAnQ29udGVudC1MZW5ndGg6ICcgKyAwICsgJ1xyXG5cclxuJzsKCiAgdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSk7Cn07CgoKLyoqCiAqIEBhdWdtZW50cyBJbmNvbWluZ01lc3NhZ2UKICogQGNsYXNzIENsYXNzIGZvciBpbmNvbWluZyBTSVAgcmVzcG9uc2UuCiAqLwpJbmNvbWluZ1Jlc3BvbnNlID0gZnVuY3Rpb24odWEpIHsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNpcG1lc3NhZ2UnKTsKICB0aGlzLmhlYWRlcnMgPSB7fTsKICB0aGlzLnN0YXR1c19jb2RlID0gbnVsbDsKICB0aGlzLnJlYXNvbl9waHJhc2UgPSBudWxsOwp9OwpJbmNvbWluZ1Jlc3BvbnNlLnByb3RvdHlwZSA9IG5ldyBJbmNvbWluZ01lc3NhZ2UoKTsKClNJUC5PdXRnb2luZ1JlcXVlc3QgPSBPdXRnb2luZ1JlcXVlc3Q7ClNJUC5JbmNvbWluZ1JlcXVlc3QgPSBJbmNvbWluZ1JlcXVlc3Q7ClNJUC5JbmNvbWluZ1Jlc3BvbnNlID0gSW5jb21pbmdSZXNwb25zZTsKfTsKCn0se31dLDI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBJbmNvbWluZyBTSVAgTWVzc2FnZSBTYW5pdHkgQ2hlY2sKICovCgovKioKICogU0lQIG1lc3NhZ2Ugc2FuaXR5IGNoZWNrLgogKiBAYXVnbWVudHMgU0lQCiAqIEBmdW5jdGlvbgogKiBAcGFyYW0ge1NJUC5JbmNvbWluZ01lc3NhZ2V9IG1lc3NhZ2UKICogQHBhcmFtIHtTSVAuVUF9IHVhCiAqIEBwYXJhbSB7U0lQLlRyYW5zcG9ydH0gdHJhbnNwb3J0CiAqIEByZXR1cm5zIHtCb29sZWFufQogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CnZhciBzYW5pdHlDaGVjaywKIGxvZ2dlciwKIG1lc3NhZ2UsIHVhLCB0cmFuc3BvcnQsCiByZXF1ZXN0cyA9IFtdLAogcmVzcG9uc2VzID0gW10sCiBhbGwgPSBbXTsKCi8vIFJlcGx5CmZ1bmN0aW9uIHJlcGx5KHN0YXR1c19jb2RlKSB7CiAgdmFyIHRvLAogICAgcmVzcG9uc2UgPSBTSVAuVXRpbHMuYnVpbGRTdGF0dXNMaW5lKHN0YXR1c19jb2RlKSwKICAgIHZpYXMgPSBtZXNzYWdlLmdldEhlYWRlcnMoJ3ZpYScpLAogICAgbGVuZ3RoID0gdmlhcy5sZW5ndGgsCiAgICBpZHggPSAwOwoKICBmb3IoaWR4OyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICByZXNwb25zZSArPSAiVmlhOiAiICsgdmlhc1tpZHhdICsgIlxyXG4iOwogIH0KCiAgdG8gPSBtZXNzYWdlLmdldEhlYWRlcignVG8nKTsKCiAgaWYoIW1lc3NhZ2UudG9fdGFnKSB7CiAgICB0byArPSAnO3RhZz0nICsgU0lQLlV0aWxzLm5ld1RhZygpOwogIH0KCiAgcmVzcG9uc2UgKz0gIlRvOiAiICsgdG8gKyAiXHJcbiI7CiAgcmVzcG9uc2UgKz0gIkZyb206ICIgKyBtZXNzYWdlLmdldEhlYWRlcignRnJvbScpICsgIlxyXG4iOwogIHJlc3BvbnNlICs9ICJDYWxsLUlEOiAiICsgbWVzc2FnZS5jYWxsX2lkICsgIlxyXG4iOwogIHJlc3BvbnNlICs9ICJDU2VxOiAiICsgbWVzc2FnZS5jc2VxICsgIiAiICsgbWVzc2FnZS5tZXRob2QgKyAiXHJcbiI7CiAgcmVzcG9uc2UgKz0gIlxyXG4iOwoKICB0cmFuc3BvcnQuc2VuZChyZXNwb25zZSk7Cn0KCi8qCiAqIFNhbml0eSBDaGVjayBmb3IgaW5jb21pbmcgTWVzc2FnZXMKICoKICogUmVxdWVzdHM6CiAqICAtIF9yZmMzMjYxXzhfMl8yXzFfIFJlY2VpdmUgYSBSZXF1ZXN0IHdpdGggYSBub24gc3VwcG9ydGVkIFVSSSBzY2hlbWUKICogIC0gX3JmYzMyNjFfMTZfM180XyBSZWNlaXZlIGEgUmVxdWVzdCBhbHJlYWR5IHNlbnQgYnkgdXMKICogICBEb2VzIG5vdCBsb29rIGF0IHZpYSBzZW50LWJ5IGJ1dCBhdCBzaXBqc0lkLCB3aGljaCBpcyBpbnNlcnRlZCBhcwogKiAgIGEgcHJlZml4IGluIGFsbCBpbml0aWFsIHJlcXVlc3RzIGdlbmVyYXRlZCBieSB0aGUgdWEKICogIC0gX3JmYzMyNjFfMThfM19yZXF1ZXN0XyBCb2R5IENvbnRlbnQtTGVuZ3RoCiAqICAtIF9yZmMzMjYxXzhfMl8yXzJfIE1lcmdlZCBSZXF1ZXN0cwogKgogKiBSZXNwb25zZXM6CiAqICAtIF9yZmMzMjYxXzhfMV8zXzNfIE11bHRpcGxlIFZpYSBoZWFkZXJzCiAqICAtIF9yZmMzMjYxXzE4XzFfMl8gc2VudC1ieSBtaXNtYXRjaAogKiAgLSBfcmZjMzI2MV8xOF8zX3Jlc3BvbnNlXyBCb2R5IENvbnRlbnQtTGVuZ3RoCiAqCiAqIEFsbDoKICogIC0gTWluaW11bSBoZWFkZXJzIGluIGEgU0lQIG1lc3NhZ2UKICovCgovLyBTYW5pdHkgQ2hlY2sgZnVuY3Rpb25zIGZvciByZXF1ZXN0cwpmdW5jdGlvbiByZmMzMjYxXzhfMl8yXzEoKSB7CiAgaWYoIW1lc3NhZ2UucnVyaSB8fCBtZXNzYWdlLnJ1cmkuc2NoZW1lICE9PSAnc2lwJykgewogICAgcmVwbHkoNDE2KTsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMTZfM180KCkgewogIGlmKCFtZXNzYWdlLnRvX3RhZykgewogICAgaWYobWVzc2FnZS5jYWxsX2lkLnN1YnN0cigwLCA1KSA9PT0gdWEuY29uZmlndXJhdGlvbi5zaXBqc0lkKSB7CiAgICAgIHJlcGx5KDQ4Mik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMThfM19yZXF1ZXN0KCkgewogIHZhciBsZW4gPSBTSVAuVXRpbHMuc3RyX3V0ZjhfbGVuZ3RoKG1lc3NhZ2UuYm9keSksCiAgY29udGVudExlbmd0aCA9IG1lc3NhZ2UuZ2V0SGVhZGVyKCdjb250ZW50LWxlbmd0aCcpOwoKICBpZihsZW4gPCBjb250ZW50TGVuZ3RoKSB7CiAgICByZXBseSg0MDApOwogICAgcmV0dXJuIGZhbHNlOwogIH0KfQoKZnVuY3Rpb24gcmZjMzI2MV84XzJfMl8yKCkgewogIHZhciB0ciwgaWR4LAogICAgZnJvbVRhZyA9IG1lc3NhZ2UuZnJvbV90YWcsCiAgICBjYWxsX2lkID0gbWVzc2FnZS5jYWxsX2lkLAogICAgY3NlcSA9IG1lc3NhZ2UuY3NlcTsKCiAgaWYoIW1lc3NhZ2UudG9fdGFnKSB7CiAgICBpZihtZXNzYWdlLm1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFKSB7CiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLmlzdFttZXNzYWdlLnZpYV9icmFuY2hdOwogICAgICBpZih0cikgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IoaWR4IGluIHVhLnRyYW5zYWN0aW9ucy5pc3QpIHsKICAgICAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLmlzdFtpZHhdOwogICAgICAgICAgaWYodHIucmVxdWVzdC5mcm9tX3RhZyA9PT0gZnJvbVRhZyAmJiB0ci5yZXF1ZXN0LmNhbGxfaWQgPT09IGNhbGxfaWQgJiYgdHIucmVxdWVzdC5jc2VxID09PSBjc2VxKSB7CiAgICAgICAgICAgIHJlcGx5KDQ4Mik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLm5pc3RbbWVzc2FnZS52aWFfYnJhbmNoXTsKICAgICAgaWYodHIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yKGlkeCBpbiB1YS50cmFuc2FjdGlvbnMubmlzdCkgewogICAgICAgICAgdHIgPSB1YS50cmFuc2FjdGlvbnMubmlzdFtpZHhdOwogICAgICAgICAgaWYodHIucmVxdWVzdC5mcm9tX3RhZyA9PT0gZnJvbVRhZyAmJiB0ci5yZXF1ZXN0LmNhbGxfaWQgPT09IGNhbGxfaWQgJiYgdHIucmVxdWVzdC5jc2VxID09PSBjc2VxKSB7CiAgICAgICAgICAgIHJlcGx5KDQ4Mik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0KCi8vIFNhbml0eSBDaGVjayBmdW5jdGlvbnMgZm9yIHJlc3BvbnNlcwpmdW5jdGlvbiByZmMzMjYxXzhfMV8zXzMoKSB7CiAgaWYobWVzc2FnZS5nZXRIZWFkZXJzKCd2aWEnKS5sZW5ndGggPiAxKSB7CiAgICBsb2dnZXIud2FybignTW9yZSB0aGFuIG9uZSBWaWEgaGVhZGVyIGZpZWxkIHByZXNlbnQgaW4gdGhlIHJlc3BvbnNlLiBEcm9wcGluZyB0aGUgcmVzcG9uc2UnKTsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMThfMV8yKCkgewogIHZhciB2aWFIb3N0ID0gdWEuY29uZmlndXJhdGlvbi52aWFIb3N0OwogIGlmKG1lc3NhZ2UudmlhLmhvc3QgIT09IHZpYUhvc3QgfHwgbWVzc2FnZS52aWEucG9ydCAhPT0gdW5kZWZpbmVkKSB7CiAgICBsb2dnZXIud2FybignVmlhIHNlbnQtYnkgaW4gdGhlIHJlc3BvbnNlIGRvZXMgbm90IG1hdGNoIFVBIFZpYSBob3N0IHZhbHVlLiBEcm9wcGluZyB0aGUgcmVzcG9uc2UnKTsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMThfM19yZXNwb25zZSgpIHsKICB2YXIKICAgIGxlbiA9IFNJUC5VdGlscy5zdHJfdXRmOF9sZW5ndGgobWVzc2FnZS5ib2R5KSwKICAgIGNvbnRlbnRMZW5ndGggPSBtZXNzYWdlLmdldEhlYWRlcignY29udGVudC1sZW5ndGgnKTsKCiAgICBpZihsZW4gPCBjb250ZW50TGVuZ3RoKSB7CiAgICAgIGxvZ2dlci53YXJuKCdNZXNzYWdlIGJvZHkgbGVuZ3RoIGlzIGxvd2VyIHRoYW4gdGhlIHZhbHVlIGluIENvbnRlbnQtTGVuZ3RoIGhlYWRlciBmaWVsZC4gRHJvcHBpbmcgdGhlIHJlc3BvbnNlJyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQoKLy8gU2FuaXR5IENoZWNrIGZ1bmN0aW9ucyBmb3IgcmVxdWVzdHMgYW5kIHJlc3BvbnNlcwpmdW5jdGlvbiBtaW5pbXVtSGVhZGVycygpIHsKICB2YXIKICAgIG1hbmRhdG9yeUhlYWRlcnMgPSBbJ2Zyb20nLCAndG8nLCAnY2FsbF9pZCcsICdjc2VxJywgJ3ZpYSddLAogICAgaWR4ID0gbWFuZGF0b3J5SGVhZGVycy5sZW5ndGg7CgogIHdoaWxlKGlkeC0tKSB7CiAgICBpZighbWVzc2FnZS5oYXNIZWFkZXIobWFuZGF0b3J5SGVhZGVyc1tpZHhdKSkgewogICAgICBsb2dnZXIud2FybignTWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkIDogJysgbWFuZGF0b3J5SGVhZGVyc1tpZHhdICsnLiBEcm9wcGluZyB0aGUgcmVzcG9uc2UnKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfQoKcmVxdWVzdHMucHVzaChyZmMzMjYxXzhfMl8yXzEpOwpyZXF1ZXN0cy5wdXNoKHJmYzMyNjFfMTZfM180KTsKcmVxdWVzdHMucHVzaChyZmMzMjYxXzE4XzNfcmVxdWVzdCk7CnJlcXVlc3RzLnB1c2gocmZjMzI2MV84XzJfMl8yKTsKCnJlc3BvbnNlcy5wdXNoKHJmYzMyNjFfOF8xXzNfMyk7CnJlc3BvbnNlcy5wdXNoKHJmYzMyNjFfMThfMV8yKTsKcmVzcG9uc2VzLnB1c2gocmZjMzI2MV8xOF8zX3Jlc3BvbnNlKTsKCmFsbC5wdXNoKG1pbmltdW1IZWFkZXJzKTsKCnNhbml0eUNoZWNrID0gZnVuY3Rpb24obSwgdSwgdCkgewogIHZhciBsZW4sIHBhc3M7CgogIG1lc3NhZ2UgPSBtOwogIHVhID0gdTsKICB0cmFuc3BvcnQgPSB0OwoKICBsb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5zYW5pdHljaGVjaycpOwoKICBsZW4gPSBhbGwubGVuZ3RoOwogIHdoaWxlKGxlbi0tKSB7CiAgICBwYXNzID0gYWxsW2xlbl0obWVzc2FnZSk7CiAgICBpZihwYXNzID09PSBmYWxzZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBpZihtZXNzYWdlIGluc3RhbmNlb2YgU0lQLkluY29taW5nUmVxdWVzdCkgewogICAgbGVuID0gcmVxdWVzdHMubGVuZ3RoOwogICAgd2hpbGUobGVuLS0pIHsKICAgICAgcGFzcyA9IHJlcXVlc3RzW2xlbl0obWVzc2FnZSk7CiAgICAgIGlmKHBhc3MgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfQoKICBlbHNlIGlmKG1lc3NhZ2UgaW5zdGFuY2VvZiBTSVAuSW5jb21pbmdSZXNwb25zZSkgewogICAgbGVuID0gcmVzcG9uc2VzLmxlbmd0aDsKICAgIHdoaWxlKGxlbi0tKSB7CiAgICAgIHBhc3MgPSByZXNwb25zZXNbbGVuXShtZXNzYWdlKTsKICAgICAgaWYocGFzcyA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9CgogIC8vRXZlcnl0aGluZyBpcyBPSwogIHJldHVybiB0cnVlOwp9OwoKU0lQLnNhbml0eUNoZWNrID0gc2FuaXR5Q2hlY2s7Cn07Cgp9LHt9XSwyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CnZhciBTZXJ2ZXJDb250ZXh0OwoKU2VydmVyQ29udGV4dCA9IGZ1bmN0aW9uICh1YSwgcmVxdWVzdCkgewogIHRoaXMudWEgPSB1YTsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNlcnZlcmNvbnRleHQnKTsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFKSB7CiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFNJUC5UcmFuc2FjdGlvbnMuSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ocmVxdWVzdCwgdWEpOwogIH0gZWxzZSB7CiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFNJUC5UcmFuc2FjdGlvbnMuTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ocmVxdWVzdCwgdWEpOwogIH0KCiAgaWYgKHJlcXVlc3QuYm9keSkgewogICAgdGhpcy5ib2R5ID0gcmVxdWVzdC5ib2R5OwogIH0KICBpZiAocmVxdWVzdC5oYXNIZWFkZXIoJ0NvbnRlbnQtVHlwZScpKSB7CiAgICB0aGlzLmNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpOwogIH0KICB0aGlzLm1ldGhvZCA9IHJlcXVlc3QubWV0aG9kOwoKICB0aGlzLmRhdGEgPSB7fTsKCiAgdGhpcy5sb2NhbElkZW50aXR5ID0gcmVxdWVzdC50bzsKICB0aGlzLnJlbW90ZUlkZW50aXR5ID0gcmVxdWVzdC5mcm9tOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKTsKClNlcnZlckNvbnRleHQucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAob3B0aW9ucy5zdGF0dXNDb2RlID0gMTgwKTsKICBvcHRpb25zLm1pbkNvZGUgPSAxMDA7CiAgb3B0aW9ucy5tYXhDb2RlID0gMTk5OwogIG9wdGlvbnMuZXZlbnRzID0gWydwcm9ncmVzcyddOwogIHJldHVybiB0aGlzLnJlcGx5KG9wdGlvbnMpOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAob3B0aW9ucy5zdGF0dXNDb2RlID0gMjAwKTsKICBvcHRpb25zLm1pbkNvZGUgPSAyMDA7CiAgb3B0aW9ucy5tYXhDb2RlID0gMjk5OwogIG9wdGlvbnMuZXZlbnRzID0gWydhY2NlcHRlZCddOwogIHJldHVybiB0aGlzLnJlcGx5KG9wdGlvbnMpOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUucmVqZWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAob3B0aW9ucy5zdGF0dXNDb2RlID0gNDgwKTsKICBvcHRpb25zLm1pbkNvZGUgPSAzMDA7CiAgb3B0aW9ucy5tYXhDb2RlID0gNjk5OwogIG9wdGlvbnMuZXZlbnRzID0gWydyZWplY3RlZCcsICdmYWlsZWQnXTsKICByZXR1cm4gdGhpcy5yZXBseShvcHRpb25zKTsKfTsKClNlcnZlckNvbnRleHQucHJvdG90eXBlLnJlcGx5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gVGhpcyBpcyBva2F5LCBzbyBsb25nIGFzIHdlIHRyZWF0IG9wdGlvbnMgYXMgcmVhZC1vbmx5IGluIHRoaXMgbWV0aG9kCiAgdmFyCiAgICBzdGF0dXNDb2RlID0gb3B0aW9ucy5zdGF0dXNDb2RlIHx8IDEwMCwKICAgIG1pbkNvZGUgPSBvcHRpb25zLm1pbkNvZGUgfHwgMTAwLAogICAgbWF4Q29kZSA9IG9wdGlvbnMubWF4Q29kZSB8fCA2OTksCiAgICByZWFzb25QaHJhc2UgPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHN0YXR1c0NvZGUsIG9wdGlvbnMucmVhc29uUGhyYXNlKSwKICAgIGV4dHJhSGVhZGVycyA9IG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdLAogICAgYm9keSA9IG9wdGlvbnMuYm9keSwKICAgIGV2ZW50cyA9IG9wdGlvbnMuZXZlbnRzIHx8IFtdLAogICAgcmVzcG9uc2U7CgogIGlmIChzdGF0dXNDb2RlIDwgbWluQ29kZSB8fCBzdGF0dXNDb2RlID4gbWF4Q29kZSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdGF0dXNDb2RlOiAnICsgc3RhdHVzQ29kZSk7CiAgfQogIHJlc3BvbnNlID0gdGhpcy5yZXF1ZXN0LnJlcGx5KHN0YXR1c0NvZGUsIHJlYXNvblBocmFzZSwgZXh0cmFIZWFkZXJzLCBib2R5KTsKICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHRoaXMuZW1pdChldmVudCwgcmVzcG9uc2UsIHJlYXNvblBocmFzZSk7CiAgfSwgdGhpcyk7CgogIHJldHVybiB0aGlzOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvciA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIG51bGwsIFNJUC5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKTsKfTsKClNJUC5TZXJ2ZXJDb250ZXh0ID0gU2VydmVyQ29udGV4dDsKfTsKCn0se31dLDI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7Cgp2YXIgRFRNRiA9IHJlcXVpcmUoJy4vU2Vzc2lvbi9EVE1GJykoU0lQKTsKCnZhciBTZXNzaW9uLCBJbnZpdGVTZXJ2ZXJDb250ZXh0LCBJbnZpdGVDbGllbnRDb250ZXh0LAogQyA9IHsKICAgIC8vU2Vzc2lvbiBzdGF0ZXMKICAgIFNUQVRVU19OVUxMOiAgICAgICAgICAgICAgICAgICAgICAgIDAsCiAgICBTVEFUVVNfSU5WSVRFX1NFTlQ6ICAgICAgICAgICAgICAgICAxLAogICAgU1RBVFVTXzFYWF9SRUNFSVZFRDogICAgICAgICAgICAgICAgMiwKICAgIFNUQVRVU19JTlZJVEVfUkVDRUlWRUQ6ICAgICAgICAgICAgIDMsCiAgICBTVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSOiAgICAgICAgICA0LAogICAgU1RBVFVTX0FOU1dFUkVEOiAgICAgICAgICAgICAgICAgICAgNSwKICAgIFNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSzogICAgICAgICAgIDYsCiAgICBTVEFUVVNfV0FJVElOR19GT1JfQUNLOiAgICAgICAgICAgICA3LAogICAgU1RBVFVTX0NBTkNFTEVEOiAgICAgICAgICAgICAgICAgICAgOCwKICAgIFNUQVRVU19URVJNSU5BVEVEOiAgICAgICAgICAgICAgICAgIDksCiAgICBTVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0s6IDEwLAogICAgU1RBVFVTX0VBUkxZX01FRElBOiAgICAgICAgICAgICAgICAxMSwKICAgIFNUQVRVU19DT05GSVJNRUQ6ICAgICAgICAgICAgICAgICAgMTIKICB9OwoKLyoKICogQHBhcmFtIHtmdW5jdGlvbiByZXR1cm5pbmcgU0lQLk1lZGlhSGFuZGxlcn0gW21lZGlhSGFuZGxlckZhY3RvcnldCiAqICAgICAgICAoU2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgbWVkaWFIYW5kbGVyRmFjdG9yeSBhcmd1bWVudCBvZiB0aGUgVUEgY29uc3RydWN0b3IuKQogKi8KU2Vzc2lvbiA9IGZ1bmN0aW9uIChtZWRpYUhhbmRsZXJGYWN0b3J5KSB7CiAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19OVUxMOwogIHRoaXMuZGlhbG9nID0gbnVsbDsKICB0aGlzLmVhcmx5RGlhbG9ncyA9IHt9OwogIHRoaXMubWVkaWFIYW5kbGVyRmFjdG9yeSA9IG1lZGlhSGFuZGxlckZhY3RvcnkgfHwgU0lQLldlYlJUQy5NZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3Rvcnk7CiAgLy8gdGhpcy5tZWRpYUhhbmRsZXIgZ2V0cyBzZXQgYnkgSUNDL0lTQyBjb25zdHJ1Y3RvcnMKICB0aGlzLmhhc09mZmVyID0gZmFsc2U7CiAgdGhpcy5oYXNBbnN3ZXIgPSBmYWxzZTsKCiAgLy8gU2Vzc2lvbiBUaW1lcnMKICB0aGlzLnRpbWVycyA9IHsKICAgIGFja1RpbWVyOiBudWxsLAogICAgZXhwaXJlc1RpbWVyOiBudWxsLAogICAgaW52aXRlMnh4VGltZXI6IG51bGwsCiAgICB1c2VyTm9BbnN3ZXJUaW1lcjogbnVsbCwKICAgIHJlbDF4eFRpbWVyOiBudWxsLAogICAgcHJhY2tUaW1lcjogbnVsbAogIH07CgogIC8vIFNlc3Npb24gaW5mbwogIHRoaXMuc3RhcnRUaW1lID0gbnVsbDsKICB0aGlzLmVuZFRpbWUgPSBudWxsOwogIHRoaXMudG9uZXMgPSBudWxsOwoKICAvLyBNdXRlL0hvbGQgc3RhdGUKICB0aGlzLmxvY2FsX2hvbGQgPSBmYWxzZTsKICB0aGlzLnJlbW90ZV9ob2xkID0gZmFsc2U7CgogIHRoaXMucGVuZGluZ19hY3Rpb25zID0gewogICAgYWN0aW9uczogW10sCgogICAgbGVuZ3RoOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucy5sZW5ndGg7CiAgICB9LAoKICAgIGlzUGVuZGluZzogZnVuY3Rpb24obmFtZSl7CiAgICAgIHZhcgogICAgICBpZHggPSAwLAogICAgICBsZW5ndGggPSB0aGlzLmFjdGlvbnMubGVuZ3RoOwoKICAgICAgZm9yIChpZHg7IGlkeDxsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaWYgKHRoaXMuYWN0aW9uc1tpZHhdLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIHNoaWZ0OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucy5zaGlmdCgpOwogICAgfSwKCiAgICBwdXNoOiBmdW5jdGlvbihuYW1lKSB7CiAgICAgIHRoaXMuYWN0aW9ucy5wdXNoKHsKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH0pOwogICAgfSwKCiAgICBwb3A6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgdmFyCiAgICAgIGlkeCA9IDAsCiAgICAgIGxlbmd0aCA9IHRoaXMuYWN0aW9ucy5sZW5ndGg7CgogICAgICBmb3IgKGlkeDsgaWR4PGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBpZiAodGhpcy5hY3Rpb25zW2lkeF0ubmFtZSA9PT0gbmFtZSkgewogICAgICAgICAgdGhpcy5hY3Rpb25zLnNwbGljZShpZHgsMSk7CiAgICAgICAgICBsZW5ndGggLS07CiAgICAgICAgICBpZHgtLTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgfTsKCiAgdGhpcy5lYXJseV9zZHAgPSBudWxsOwogIHRoaXMucmVsMTAwID0gU0lQLkMuc3VwcG9ydGVkLlVOU1VQUE9SVEVEOwp9OwoKU2Vzc2lvbi5wcm90b3R5cGUgPSB7CiAgZHRtZjogZnVuY3Rpb24odG9uZXMsIG9wdGlvbnMpIHsKICAgIHZhciB0b25lLCBkdG1mcyA9IFtdLAogICAgICAgIHNlbGYgPSB0aGlzOwoKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIGlmICh0b25lcyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggYXJndW1lbnRzJyk7CiAgICB9CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICAvLyBDaGVjayB0b25lcwogICAgaWYgKCh0eXBlb2YgdG9uZXMgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB0b25lcyAhPT0gJ251bWJlcicpIHx8ICF0b25lcy50b1N0cmluZygpLm1hdGNoKC9eWzAtOUEtRCMqLF0rJC9pKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRvbmVzOiAnKyB0b25lcyk7CiAgICB9CgogICAgdG9uZXMgPSB0b25lcy50b1N0cmluZygpLnNwbGl0KCcnKTsKCiAgICB3aGlsZSAodG9uZXMubGVuZ3RoID4gMCkgeyBkdG1mcy5wdXNoKG5ldyBEVE1GKHRoaXMsIHRvbmVzLnNoaWZ0KCksIG9wdGlvbnMpKTsgfQoKICAgIGlmICh0aGlzLnRvbmVzKSB7CiAgICAgIC8vIFRvbmVzIGFyZSBhbHJlYWR5IHF1ZXVlZCwganVzdCBhZGQgdG8gdGhlIHF1ZXVlCiAgICAgIHRoaXMudG9uZXMgPSAgdGhpcy50b25lcy5jb25jYXQoZHRtZnMpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICB2YXIgc2VuZERUTUYgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkdG1mLCB0aW1lb3V0OwoKICAgICAgaWYgKHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEIHx8ICFzZWxmLnRvbmVzIHx8IHNlbGYudG9uZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgLy8gU3RvcCBzZW5kaW5nIERUTUYKICAgICAgICBzZWxmLnRvbmVzID0gbnVsbDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgZHRtZiA9IHNlbGYudG9uZXMuc2hpZnQoKTsKCiAgICAgIGlmICh0b25lID09PSAnLCcpIHsKICAgICAgICB0aW1lb3V0ID0gMjAwMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBkdG1mLm9uKCdmYWlsZWQnLCBmdW5jdGlvbigpe3NlbGYudG9uZXMgPSBudWxsO30pOwogICAgICAgIGR0bWYuc2VuZChvcHRpb25zKTsKICAgICAgICB0aW1lb3V0ID0gZHRtZi5kdXJhdGlvbiArIGR0bWYuaW50ZXJUb25lR2FwOwogICAgICB9CgogICAgICAvLyBTZXQgdGltZW91dCBmb3IgdGhlIG5leHQgdG9uZQogICAgICBTSVAuVGltZXJzLnNldFRpbWVvdXQoc2VuZERUTUYsIHRpbWVvdXQpOwogICAgfTsKCiAgICB0aGlzLnRvbmVzID0gZHRtZnM7CiAgICBzZW5kRFRNRigpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgYnllOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogICAgdmFyIHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGU7CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmxvZ2dlci5lcnJvcignRXJyb3I6IEF0dGVtcHRlZCB0byBzZW5kIEJZRSBpbiBhIHRlcm1pbmF0ZWQgc2Vzc2lvbi4nKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgdGhpcy5sb2dnZXIubG9nKCd0ZXJtaW5hdGluZyBTZXNzaW9uJyk7CgogICAgaWYgKHN0YXR1c0NvZGUgJiYgKHN0YXR1c0NvZGUgPCAyMDAgfHwgc3RhdHVzQ29kZSA+PSA3MDApKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgc3RhdHVzQ29kZTogJysgc3RhdHVzQ29kZSk7CiAgICB9CgogICAgb3B0aW9ucy5yZWNlaXZlUmVzcG9uc2UgPSBmdW5jdGlvbiAoKSB7fTsKCiAgICByZXR1cm4gdGhpcy4KICAgICAgc2VuZFJlcXVlc3QoU0lQLkMuQllFLCBvcHRpb25zKS4KICAgICAgdGVybWluYXRlZCgpOwogIH0sCgogIHJlZmVyOiBmdW5jdGlvbih0YXJnZXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgdmFyIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKSwKICAgICAgICB3aXRoUmVwbGFjZXMgPQogICAgICAgICAgdGFyZ2V0IGluc3RhbmNlb2YgU0lQLkludml0ZVNlcnZlckNvbnRleHQgfHwKICAgICAgICAgIHRhcmdldCBpbnN0YW5jZW9mIFNJUC5JbnZpdGVDbGllbnRDb250ZXh0LAogICAgICAgIG9yaWdpbmFsVGFyZ2V0ID0gdGFyZ2V0OwoKICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgZW5vdWdoIGFyZ3VtZW50cycpOwogICAgfQoKICAgIC8vIENoZWNrIFNlc3Npb24gU3RhdHVzCiAgICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogICAgfQoKICAgIC8vIHRyYW5zZm9ybSBgdGFyZ2V0YCBzbyB0aGF0IGl0IGNhbiBiZSBhIFJlZmVyLVRvIGhlYWRlciB2YWx1ZQogICAgaWYgKHdpdGhSZXBsYWNlcykgewogICAgICAvL0F0dGVuZGVkIFRyYW5zZmVyCiAgICAgIC8vIEIudHJhbnNmZXIoQykKICAgICAgdGFyZ2V0ID0gJyInICsgdGFyZ2V0LnJlbW90ZUlkZW50aXR5LmZyaWVuZGx5TmFtZSArICciICcgKwogICAgICAgICc8JyArIHRhcmdldC5kaWFsb2cucmVtb3RlX3RhcmdldC50b1N0cmluZygpICsKICAgICAgICAnP1JlcGxhY2VzPScgKyB0YXJnZXQuZGlhbG9nLmlkLmNhbGxfaWQgKwogICAgICAgICclM0J0by10YWclM0QnICsgdGFyZ2V0LmRpYWxvZy5pZC5yZW1vdGVfdGFnICsKICAgICAgICAnJTNCZnJvbS10YWclM0QnICsgdGFyZ2V0LmRpYWxvZy5pZC5sb2NhbF90YWcgKyAnPic7CiAgICB9IGVsc2UgewogICAgICAvL0JsaW5kIFRyYW5zZmVyCiAgICAgIC8vIG5vcm1hbGl6ZVRhcmdldCBhbGxvd3MgaW5zdGFuY2VzIG9mIFNJUC5VUkkgdG8gcGFzcyB0aHJvdWdoIHVuYWx0ZXJlZCwKICAgICAgLy8gc28gdHJ5IHRvIG1ha2Ugb25lIGFoZWFkIG9mIHRpbWUKICAgICAgdHJ5IHsKICAgICAgICB0YXJnZXQgPSBTSVAuR3JhbW1hci5wYXJzZSh0YXJnZXQsICdSZWZlcl9UbycpLnVyaSB8fCB0YXJnZXQ7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZygiLnJlZmVyKCkgY2Fubm90IHBhcnNlIFJlZmVyX1RvIGZyb20iLCB0YXJnZXQpOwogICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKCIuLi5mYWxsaW5nIHRocm91Z2ggdG8gbm9ybWFsaXplVGFyZ2V0KCkiKTsKICAgICAgfQoKICAgICAgLy8gQ2hlY2sgdGFyZ2V0IHZhbGlkaXR5CiAgICAgIHRhcmdldCA9IHRoaXMudWEubm9ybWFsaXplVGFyZ2V0KHRhcmdldCk7CiAgICAgIGlmICghdGFyZ2V0KSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0YXJnZXQ6ICcgKyBvcmlnaW5hbFRhcmdldCk7CiAgICAgIH0KICAgIH0KCiAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGFjdDogJysgdGhpcy5jb250YWN0KTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdBbGxvdzogJysgU0lQLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpOwogICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JlZmVyLVRvOiAnKyB0YXJnZXQpOwoKICAgIC8vIFNlbmQgdGhlIHJlcXVlc3QKICAgIHRoaXMuc2VuZFJlcXVlc3QoU0lQLkMuUkVGRVIsIHsKICAgICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICAgIGJvZHk6IG9wdGlvbnMuYm9keSwKICAgICAgcmVjZWl2ZVJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAoICEgL14yWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKSApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gaGFuZyB1cCBvbmx5IGlmIHdlIHRyYW5zZmVycmVkIHRvIGEgU0lQIGFkZHJlc3MKICAgICAgICBpZiAod2l0aFJlcGxhY2VzIHx8ICh0YXJnZXQuc2NoZW1lICYmIHRhcmdldC5zY2hlbWUubWF0Y2goIl5zaXBzPyQiKSkpIHsKICAgICAgICAgIHRoaXMudGVybWluYXRlKCk7CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcykKICAgIH0pOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgZm9sbG93UmVmZXI6IGZ1bmN0aW9uIGZvbGxvd1JlZmVyIChjYWxsYmFjaykgewogICAgcmV0dXJuIGZ1bmN0aW9uIHJlZmVyTGlzdGVuZXIgKGNhbGxiYWNrLCByZXF1ZXN0KSB7CiAgICAgIC8vIG9wZW4gbm9uLVNJUCBVUklzIGlmIHBvc3NpYmxlIGFuZCBrZWVwIHNlc3Npb24gb3BlbgogICAgICB2YXIgcmVmZXJUbyA9IHJlcXVlc3QucGFyc2VIZWFkZXIoJ3JlZmVyLXRvJyk7CiAgICAgIHZhciB0YXJnZXQgPSByZWZlclRvLnVyaTsKICAgICAgaWYgKCF0YXJnZXQuc2NoZW1lLm1hdGNoKCJec2lwcz8kIikpIHsKICAgICAgICB2YXIgdGFyZ2V0U3RyaW5nID0gdGFyZ2V0LnRvU3RyaW5nKCk7CiAgICAgICAgaWYgKHR5cGVvZiBlbnZpcm9ubWVudC5vcGVuID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBlbnZpcm9ubWVudC5vcGVuKHRhcmdldFN0cmluZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oInJlZmVycmVkIHRvIG5vbi1TSVAgVVJJIGJ1dCBgb3BlbmAgaXNuJ3QgaW4gdGhlIGVudmlyb25tZW50OiAiICsgdGFyZ2V0U3RyaW5nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZXh0cmFIZWFkZXJzID0gW107CgogICAgICAvKiBDb3B5IHRoZSBSZXBsYWNlcyBxdWVyeSBpbnRvIGEgUmVwbGFjZXMgaGVhZGVyICovCiAgICAgIC8qIFRPRE8gLSBtYWtlIHN1cmUgd2UgZG9uJ3QgY29weSBhIHBvb3JseSBmb3JtYXR0ZWQgaGVhZGVyPyAqLwogICAgICB2YXIgcmVwbGFjZXMgPSB0YXJnZXQuZ2V0SGVhZGVyKCdSZXBsYWNlcycpOwogICAgICBpZiAocmVwbGFjZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXBsYWNlczogJyArIGRlY29kZVVSSUNvbXBvbmVudChyZXBsYWNlcykpOwogICAgICB9CgogICAgICAvLyBkb24ndCBlbWJlZCBoZWFkZXJzIGludG8gUmVxdWVzdC1VUkkgb2YgSU5WSVRFCiAgICAgIHRhcmdldC5jbGVhckhlYWRlcnMoKTsKCiAgICAgIC8qCiAgICAgICAgSGFybWxlc3MgcmFjZSBjb25kaXRpb24uICBCb3RoIHNpZGVzIG9mIFJFRkVSCiAgICAgICAgbWF5IHNlbmQgYSBCWUUsIGJ1dCBpbiB0aGUgZW5kIHRoZSBkaWFsb2dzIGFyZSBkZXN0cm95ZWQuCiAgICAgICovCiAgICAgIHZhciBnZXRSZWZlck1lZGlhID0gdGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVmZXJNZWRpYTsKICAgICAgdmFyIG1lZGlhSGludCA9IGdldFJlZmVyTWVkaWEgPyBnZXRSZWZlck1lZGlhLmNhbGwodGhpcy5tZWRpYUhhbmRsZXIpIDogdGhpcy5tZWRpYUhpbnQ7CgogICAgICBTSVAuSGFja3MuQ2hyb21lLmdldHNDb25mdXNlZEFib3V0R1VNKHRoaXMpOwoKICAgICAgdmFyIHJlZmVyU2Vzc2lvbiA9IHRoaXMudWEuaW52aXRlKHRhcmdldCwgewogICAgICAgIG1lZGlhOiBtZWRpYUhpbnQsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICB0b19kaXNwbGF5TmFtZTogcmVmZXJUby5mcmllbmRseU5hbWUKICAgICAgICB9LAogICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzCiAgICAgIH0pOwoKICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCByZXF1ZXN0LCByZWZlclNlc3Npb24pOwoKICAgICAgdGhpcy50ZXJtaW5hdGUoKTsKICAgIH0uYmluZCh0aGlzLCBjYWxsYmFjayk7CiAgfSwKCiAgc2VuZFJlcXVlc3Q6IGZ1bmN0aW9uKG1ldGhvZCxvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgcmVxdWVzdCA9IG5ldyBTSVAuT3V0Z29pbmdSZXF1ZXN0KAogICAgICBtZXRob2QsCiAgICAgIHRoaXMuZGlhbG9nLnJlbW90ZV90YXJnZXQsCiAgICAgIHRoaXMudWEsCiAgICAgIHsKICAgICAgICBjc2VxOiBvcHRpb25zLmNzZXEgfHwgKHRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSArPSAxKSwKICAgICAgICBjYWxsX2lkOiB0aGlzLmRpYWxvZy5pZC5jYWxsX2lkLAogICAgICAgIGZyb21fdXJpOiB0aGlzLmRpYWxvZy5sb2NhbF91cmksCiAgICAgICAgZnJvbV90YWc6IHRoaXMuZGlhbG9nLmlkLmxvY2FsX3RhZywKICAgICAgICB0b191cmk6IHRoaXMuZGlhbG9nLnJlbW90ZV91cmksCiAgICAgICAgdG9fdGFnOiB0aGlzLmRpYWxvZy5pZC5yZW1vdGVfdGFnLAogICAgICAgIHJvdXRlX3NldDogdGhpcy5kaWFsb2cucm91dGVfc2V0LAogICAgICAgIHN0YXR1c0NvZGU6IG9wdGlvbnMuc3RhdHVzQ29kZSwKICAgICAgICByZWFzb25QaHJhc2U6IG9wdGlvbnMucmVhc29uUGhyYXNlCiAgICAgIH0sCiAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdLAogICAgICBvcHRpb25zLmJvZHkKICAgICk7CgogICAgbmV3IFNJUC5SZXF1ZXN0U2VuZGVyKHsKICAgICAgcmVxdWVzdDogcmVxdWVzdCwKICAgICAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICAgICAgc2VsZi5vblJlcXVlc3RUaW1lb3V0KCk7CiAgICAgIH0sCiAgICAgIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgIHNlbGYub25UcmFuc3BvcnRFcnJvcigpOwogICAgICB9LAogICAgICByZWNlaXZlUmVzcG9uc2U6IG9wdGlvbnMucmVjZWl2ZVJlc3BvbnNlIHx8IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgc2VsZi5yZWNlaXZlTm9uSW52aXRlUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICB9CiAgICB9LCB0aGlzLnVhKS5zZW5kKCk7CgogICAgLy8gRW1pdCB0aGUgcmVxdWVzdCBldmVudAogICAgdGhpcy5lbWl0KG1ldGhvZC50b0xvd2VyQ2FzZSgpLCByZXF1ZXN0KTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICBjbG9zZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgaWR4OwoKICAgIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHRoaXMubG9nZ2VyLmxvZygnY2xvc2luZyBJTlZJVEUgc2Vzc2lvbiAnICsgdGhpcy5pZCk7CgogICAgLy8gMXN0IFN0ZXAuIFRlcm1pbmF0ZSBtZWRpYS4KICAgIGlmICh0aGlzLm1lZGlhSGFuZGxlcil7CiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLmNsb3NlKCk7CiAgICB9CgogICAgLy8gMm5kIFN0ZXAuIFRlcm1pbmF0ZSBzaWduYWxpbmcuCgogICAgLy8gQ2xlYXIgc2Vzc2lvbiB0aW1lcnMKICAgIGZvcihpZHggaW4gdGhpcy50aW1lcnMpIHsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnNbaWR4XSk7CiAgICB9CgogICAgLy8gVGVybWluYXRlIGRpYWxvZ3MKCiAgICAvLyBUZXJtaW5hdGUgY29uZmlybWVkIGRpYWxvZwogICAgaWYodGhpcy5kaWFsb2cpIHsKICAgICAgdGhpcy5kaWFsb2cudGVybWluYXRlKCk7CiAgICAgIGRlbGV0ZSB0aGlzLmRpYWxvZzsKICAgIH0KCiAgICAvLyBUZXJtaW5hdGUgZWFybHkgZGlhbG9ncwogICAgZm9yKGlkeCBpbiB0aGlzLmVhcmx5RGlhbG9ncykgewogICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZHhdLnRlcm1pbmF0ZSgpOwogICAgICBkZWxldGUgdGhpcy5lYXJseURpYWxvZ3NbaWR4XTsKICAgIH0KCiAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX1RFUk1JTkFURUQ7CgogICAgZGVsZXRlIHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF07CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBjcmVhdGVEaWFsb2c6IGZ1bmN0aW9uKG1lc3NhZ2UsIHR5cGUsIGVhcmx5KSB7CiAgICB2YXIgZGlhbG9nLCBlYXJseV9kaWFsb2csCiAgICAgIGxvY2FsX3RhZyA9IG1lc3NhZ2VbKHR5cGUgPT09ICdVQVMnKSA/ICd0b190YWcnIDogJ2Zyb21fdGFnJ10sCiAgICAgIHJlbW90ZV90YWcgPSBtZXNzYWdlWyh0eXBlID09PSAnVUFTJykgPyAnZnJvbV90YWcnIDogJ3RvX3RhZyddLAogICAgICBpZCA9IG1lc3NhZ2UuY2FsbF9pZCArIGxvY2FsX3RhZyArIHJlbW90ZV90YWc7CgogICAgZWFybHlfZGlhbG9nID0gdGhpcy5lYXJseURpYWxvZ3NbaWRdOwoKICAgIC8vIEVhcmx5IERpYWxvZwogICAgaWYgKGVhcmx5KSB7CiAgICAgIGlmIChlYXJseV9kaWFsb2cpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlYXJseV9kaWFsb2cgPSBuZXcgU0lQLkRpYWxvZyh0aGlzLCBtZXNzYWdlLCB0eXBlLCBTSVAuRGlhbG9nLkMuU1RBVFVTX0VBUkxZKTsKCiAgICAgICAgLy8gRGlhbG9nIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBjcmVhdGVkLgogICAgICAgIGlmKGVhcmx5X2RpYWxvZy5lcnJvcikgewogICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZWFybHlfZGlhbG9nLmVycm9yKTsKICAgICAgICAgIHRoaXMuZmFpbGVkKG1lc3NhZ2UsIFNJUC5DLmNhdXNlcy5JTlRFUk5BTF9FUlJPUik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXSA9IGVhcmx5X2RpYWxvZzsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLy8gQ29uZmlybWVkIERpYWxvZwogICAgZWxzZSB7CiAgICAgIC8vIEluIGNhc2UgdGhlIGRpYWxvZyBpcyBpbiBfZWFybHlfIHN0YXRlLCB1cGRhdGUgaXQKICAgICAgaWYgKGVhcmx5X2RpYWxvZykgewogICAgICAgIGVhcmx5X2RpYWxvZy51cGRhdGUobWVzc2FnZSwgdHlwZSk7CiAgICAgICAgdGhpcy5kaWFsb2cgPSBlYXJseV9kaWFsb2c7CiAgICAgICAgZGVsZXRlIHRoaXMuZWFybHlEaWFsb2dzW2lkXTsKICAgICAgICBmb3IgKHZhciBkaWEgaW4gdGhpcy5lYXJseURpYWxvZ3MpIHsKICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2RpYV0udGVybWluYXRlKCk7CiAgICAgICAgICBkZWxldGUgdGhpcy5lYXJseURpYWxvZ3NbZGlhXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIC8vIE90aGVyd2lzZSwgY3JlYXRlIGEgX2NvbmZpcm1lZF8gZGlhbG9nCiAgICAgIGRpYWxvZyA9IG5ldyBTSVAuRGlhbG9nKHRoaXMsIG1lc3NhZ2UsIHR5cGUpOwoKICAgICAgaWYoZGlhbG9nLmVycm9yKSB7CiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZGlhbG9nLmVycm9yKTsKICAgICAgICB0aGlzLmZhaWxlZChtZXNzYWdlLCBTSVAuQy5jYXVzZXMuSU5URVJOQUxfRVJST1IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRvX3RhZyA9IG1lc3NhZ2UudG9fdGFnOwogICAgICAgIHRoaXMuZGlhbG9nID0gZGlhbG9nOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAgKiBDaGVjayBpZiBTZXNzaW9uIGlzIHJlYWR5IGZvciBhIHJlLUlOVklURQogICoKICAqIEByZXR1cm5zIHtCb29sZWFufQogICovCiAgaXNSZWFkeVRvUmVpbnZpdGU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubWVkaWFIYW5kbGVyLmlzUmVhZHkoKSAmJgogICAgICAhdGhpcy5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHkgJiYKICAgICAgIXRoaXMuZGlhbG9nLnVhc19wZW5kaW5nX3JlcGx5OwogIH0sCgogIC8qKgogICAqIE11dGUKICAgKi8KICBtdXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICB2YXIgcmV0ID0gdGhpcy5tZWRpYUhhbmRsZXIubXV0ZShvcHRpb25zKTsKICAgIGlmIChyZXQpIHsKICAgICAgdGhpcy5vbm11dGUocmV0KTsKICAgIH0KICB9LAoKICAvKioKICAgKiBVbm11dGUKICAgKi8KICB1bm11dGU6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIHZhciByZXQgPSB0aGlzLm1lZGlhSGFuZGxlci51bm11dGUob3B0aW9ucyk7CiAgICBpZiAocmV0KSB7CiAgICAgIHRoaXMub251bm11dGUocmV0KTsKICAgIH0KICB9LAoKICAvKioKICAgKiBIb2xkCiAgICovCiAgaG9sZDogZnVuY3Rpb24ob3B0aW9ucykgewoKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICB0aGlzLm1lZGlhSGFuZGxlci5ob2xkKCk7CgogICAgLy8gQ2hlY2sgaWYgUlRDU2Vzc2lvbiBpcyByZWFkeSB0byBzZW5kIGEgcmVJTlZJVEUKICAgIGlmICghdGhpcy5pc1JlYWR5VG9SZWludml0ZSgpKSB7CiAgICAgIC8qIElmIHRoZXJlIGlzIGEgcGVuZGluZyAndW5ob2xkJyBhY3Rpb24sIGNhbmNlbCBpdCBhbmQgZG9uJ3QgcXVldWUgdGhpcyBvbmUKICAgICAgICogRWxzZSwgaWYgdGhlcmUgaXNuJ3QgYW55ICdob2xkJyBhY3Rpb24sIGFkZCB0aGlzIG9uZSB0byB0aGUgcXVldWUKICAgICAgICogRWxzZSwgaWYgdGhlcmUgaXMgYWxyZWFkeSBhICdob2xkJyBhY3Rpb24sIHNraXAKICAgICAgICovCiAgICAgIGlmICh0aGlzLnBlbmRpbmdfYWN0aW9ucy5pc1BlbmRpbmcoJ3VuaG9sZCcpKSB7CiAgICAgICAgdGhpcy5wZW5kaW5nX2FjdGlvbnMucG9wKCd1bmhvbGQnKTsKICAgICAgfSBlbHNlIGlmICghdGhpcy5wZW5kaW5nX2FjdGlvbnMuaXNQZW5kaW5nKCdob2xkJykpIHsKICAgICAgICB0aGlzLnBlbmRpbmdfYWN0aW9ucy5wdXNoKCdob2xkJyk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfSBlbHNlIGlmICh0aGlzLmxvY2FsX2hvbGQgPT09IHRydWUpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5vbmhvbGQoJ2xvY2FsJyk7CgogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBvcHRpb25zLm1hbmdsZSA9IGZ1bmN0aW9uKGJvZHkpewoKICAgICAgLy8gRG9uJ3QgcmVjZWl2ZSBtZWRpYQogICAgICAvLyBUT0RPIC0gVGhpcyB3aWxsIGJyZWFrIGZvciBtZWRpYSBzdHJlYW1zIHdpdGggZGlmZmVyZW50IGRpcmVjdGlvbnMuCiAgICAgIGlmICghKC9hPShzZW5kcmVjdnxzZW5kb25seXxyZWN2b25seXxpbmFjdGl2ZSkvKS50ZXN0KGJvZHkpKSB7CiAgICAgICAgYm9keSA9IGJvZHkucmVwbGFjZSgvKG09W15ccl0qXHJcbikvZywgJyQxYT1zZW5kb25seVxyXG4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBib2R5ID0gYm9keS5yZXBsYWNlKC9hPXNlbmRyZWN2XHJcbi9nLCAnYT1zZW5kb25seVxyXG4nKTsKICAgICAgICBib2R5ID0gYm9keS5yZXBsYWNlKC9hPXJlY3Zvbmx5XHJcbi9nLCAnYT1pbmFjdGl2ZVxyXG4nKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJvZHk7CiAgICB9OwoKICAgIHRoaXMuc2VuZFJlaW52aXRlKG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAqIFVuaG9sZAogICAqLwogIHVuaG9sZDogZnVuY3Rpb24ob3B0aW9ucykgewoKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICB0aGlzLm1lZGlhSGFuZGxlci51bmhvbGQoKTsKCiAgICBpZiAoIXRoaXMuaXNSZWFkeVRvUmVpbnZpdGUoKSkgewogICAgICAvKiBJZiB0aGVyZSBpcyBhIHBlbmRpbmcgJ2hvbGQnIGFjdGlvbiwgY2FuY2VsIGl0IGFuZCBkb24ndCBxdWV1ZSB0aGlzIG9uZQogICAgICAgKiBFbHNlLCBpZiB0aGVyZSBpc24ndCBhbnkgJ3VuaG9sZCcgYWN0aW9uLCBhZGQgdGhpcyBvbmUgdG8gdGhlIHF1ZXVlCiAgICAgICAqIEVsc2UsIGlmIHRoZXJlIGlzIGFscmVhZHkgYSAndW5ob2xkJyBhY3Rpb24sIHNraXAKICAgICAgICovCiAgICAgIGlmICh0aGlzLnBlbmRpbmdfYWN0aW9ucy5pc1BlbmRpbmcoJ2hvbGQnKSkgewogICAgICAgIHRoaXMucGVuZGluZ19hY3Rpb25zLnBvcCgnaG9sZCcpOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnBlbmRpbmdfYWN0aW9ucy5pc1BlbmRpbmcoJ3VuaG9sZCcpKSB7CiAgICAgICAgdGhpcy5wZW5kaW5nX2FjdGlvbnMucHVzaCgndW5ob2xkJyk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfSBlbHNlIGlmICh0aGlzLmxvY2FsX2hvbGQgPT09IGZhbHNlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLm9udW5ob2xkKCdsb2NhbCcpOwoKICAgIHRoaXMuc2VuZFJlaW52aXRlKG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAqIGlzT25Ib2xkCiAgICovCiAgaXNPbkhvbGQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9jYWw6IHRoaXMubG9jYWxfaG9sZCwKICAgICAgcmVtb3RlOiB0aGlzLnJlbW90ZV9ob2xkCiAgICB9OwogIH0sCgogIC8qKgogICAqIEluIGRpYWxvZyBJTlZJVEUgUmVjZXB0aW9uCiAgICogQHByaXZhdGUKICAgKi8KICByZWNlaXZlUmVpbnZpdGU6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICBpZiAoIXJlcXVlc3QuYm9keSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHJlcXVlc3QuZ2V0SGVhZGVyKCdDb250ZW50LVR5cGUnKSAhPT0gJ2FwcGxpY2F0aW9uL3NkcCcpIHsKICAgICAgdGhpcy5sb2dnZXIud2FybignaW52YWxpZCBDb250ZW50LVR5cGUnKTsKICAgICAgcmVxdWVzdC5yZXBseSg0MTUpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5tZWRpYUhhbmRsZXIuc2V0RGVzY3JpcHRpb24ocmVxdWVzdC5ib2R5KQogICAgLnRoZW4odGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24uYmluZCh0aGlzLm1lZGlhSGFuZGxlciwgdGhpcy5tZWRpYUhpbnQpKQogICAgLnRoZW4oZnVuY3Rpb24oYm9keSkgewogICAgICByZXF1ZXN0LnJlcGx5KDIwMCwgbnVsbCwgWydDb250YWN0OiAnICsgc2VsZi5jb250YWN0XSwgYm9keSwKICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgIHNlbGYuc3RhdHVzID0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLOwogICAgICAgICAgc2VsZi5zZXRJbnZpdGUyeHhUaW1lcihyZXF1ZXN0LCBib2R5KTsKICAgICAgICAgIHNlbGYuc2V0QUNLVGltZXIoKTsKCiAgICAgICAgICAvLyBBcmUgd2UgaG9sZGluZz8KICAgICAgICAgIHZhciBob2xkID0gKC9hPShzZW5kb25seXxpbmFjdGl2ZSkvKS50ZXN0KHJlcXVlc3QuYm9keSk7CgogICAgICAgICAgaWYgKHNlbGYucmVtb3RlX2hvbGQgJiYgIWhvbGQpIHsKICAgICAgICAgICAgc2VsZi5vbnVuaG9sZCgncmVtb3RlJyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCFzZWxmLnJlbW90ZV9ob2xkICYmIGhvbGQpIHsKICAgICAgICAgICAgc2VsZi5vbmhvbGQoJ3JlbW90ZScpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbiBvbkZhaWx1cmUgKGUpIHsKICAgICAgdmFyIHN0YXR1c0NvZGU7CiAgICAgIGlmIChlIGluc3RhbmNlb2YgU0lQLkV4Y2VwdGlvbnMuR2V0RGVzY3JpcHRpb25FcnJvcikgewogICAgICAgIHN0YXR1c0NvZGUgPSA1MDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoZSk7CiAgICAgICAgc3RhdHVzQ29kZSA9IDQ4ODsKICAgICAgfQogICAgICByZXF1ZXN0LnJlcGx5KHN0YXR1c0NvZGUpOwogICAgfSk7CiAgfSwKCiAgc2VuZFJlaW52aXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICB2YXIKICAgICAgc2VsZiA9IHRoaXMsCiAgICAgIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKSwKICAgICAgZXZlbnRIYW5kbGVycyA9IG9wdGlvbnMuZXZlbnRIYW5kbGVycyB8fCB7fSwKICAgICAgbWFuZ2xlID0gb3B0aW9ucy5tYW5nbGUgfHwgbnVsbCwKICAgICAgc3VjY2VlZGVkOwoKICAgIGlmIChldmVudEhhbmRsZXJzLnN1Y2NlZWRlZCkgewogICAgICBzdWNjZWVkZWQgPSBldmVudEhhbmRsZXJzLnN1Y2NlZWRlZDsKICAgIH0KICAgIHRoaXMucmVpbnZpdGVTdWNjZWVkZWQgPSBmdW5jdGlvbigpewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dChzZWxmLnRpbWVycy5hY2tUaW1lcik7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHNlbGYudGltZXJzLmludml0ZTJ4eFRpbWVyKTsKICAgICAgc2VsZi5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CiAgICAgIHN1Y2NlZWRlZCAmJiBzdWNjZWVkZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgICBpZiAoZXZlbnRIYW5kbGVycy5mYWlsZWQpIHsKICAgICAgdGhpcy5yZWludml0ZUZhaWxlZCA9IGV2ZW50SGFuZGxlcnMuZmFpbGVkOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yZWludml0ZUZhaWxlZCA9IGZ1bmN0aW9uKCl7fTsKICAgIH0KCiAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGFjdDogJyArIHRoaXMuY29udGFjdCk7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcrIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCcpOwoKICAgIHRoaXMucmVjZWl2ZVJlc3BvbnNlID0gdGhpcy5yZWNlaXZlUmVpbnZpdGVSZXNwb25zZTsKICAgIC8vUkVWSVNJVAogICAgdGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24oc2VsZi5tZWRpYUhpbnQpCiAgICAudGhlbihtYW5nbGUpCiAgICAudGhlbigKICAgICAgZnVuY3Rpb24oYm9keSl7CiAgICAgICAgc2VsZi5kaWFsb2cuc2VuZFJlcXVlc3Qoc2VsZiwgU0lQLkMuSU5WSVRFLCB7CiAgICAgICAgICBleHRyYUhlYWRlcnM6IGV4dHJhSGVhZGVycywKICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHNlbGYuaXNSZWFkeVRvUmVpbnZpdGUoKSkgewogICAgICAgICAgc2VsZi5vblJlYWR5VG9SZWludml0ZSgpOwogICAgICAgIH0KICAgICAgICBzZWxmLnJlaW52aXRlRmFpbGVkKCk7CiAgICAgIH0KICAgICk7CiAgfSwKCiAgcmVjZWl2ZVJlcXVlc3Q6IGZ1bmN0aW9uIChyZXF1ZXN0KSB7CiAgICBzd2l0Y2ggKHJlcXVlc3QubWV0aG9kKSB7CiAgICAgIGNhc2UgU0lQLkMuQllFOgogICAgICAgIHJlcXVlc3QucmVwbHkoMjAwKTsKICAgICAgICBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgICAgICB0aGlzLmVtaXQoJ2J5ZScsIHJlcXVlc3QpOwogICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CWUUpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBTSVAuQy5JTlZJVEU6CiAgICAgICAgaWYodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCdyZS1JTlZJVEUgcmVjZWl2ZWQnKTsKICAgICAgICAgIHRoaXMucmVjZWl2ZVJlaW52aXRlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBTSVAuQy5JTkZPOgogICAgICAgIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSykgewogICAgICAgICAgdmFyIGJvZHksIHRvbmUsIGR1cmF0aW9uLAogICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ2NvbnRlbnQtdHlwZScpLAogICAgICAgICAgICAgIHJlZ190b25lID0gL14oU2lnbmFsXHMqPz1ccyo/KShbMC05QS1EIypdezF9KShccyk/LiovLAogICAgICAgICAgICAgIHJlZ19kdXJhdGlvbiA9IC9eKER1cmF0aW9uXHM/PVxzPykoWzAtOV17MSw0fSkoXHMpPy4qLzsKCiAgICAgICAgICBpZiAoY29udGVudFR5cGUpIHsKICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlLm1hdGNoKC9eYXBwbGljYXRpb25cL2R0bWYtcmVsYXkvaSkpIHsKICAgICAgICAgICAgICBpZiAocmVxdWVzdC5ib2R5KSB7CiAgICAgICAgICAgICAgICBib2R5ID0gcmVxdWVzdC5ib2R5LnNwbGl0KCdcclxuJywgMik7CiAgICAgICAgICAgICAgICBpZiAoYm9keS5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlZ190b25lLnRlc3QoYm9keVswXSkpIHsKICAgICAgICAgICAgICAgICAgICB0b25lID0gYm9keVswXS5yZXBsYWNlKHJlZ190b25lLCIkMiIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChyZWdfZHVyYXRpb24udGVzdChib2R5WzFdKSkgewogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gcGFyc2VJbnQoYm9keVsxXS5yZXBsYWNlKHJlZ19kdXJhdGlvbiwiJDIiKSwgMTApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBuZXcgRFRNRih0aGlzLCB0b25lLCB7ZHVyYXRpb246IGR1cmF0aW9ufSkuaW5pdF9pbmNvbWluZyhyZXF1ZXN0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXF1ZXN0LnJlcGx5KDQxNSwgbnVsbCwgWyJBY2NlcHQ6IGFwcGxpY2F0aW9uL2R0bWYtcmVsYXkiXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU0lQLkMuUkVGRVI6CiAgICAgICAgaWYodGhpcy5zdGF0dXMgPT09ICBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygnUkVGRVIgcmVjZWl2ZWQnKTsKICAgICAgICAgIHZhciBoYXNSZWZlckxpc3RlbmVyID0gdGhpcy5saXN0ZW5lcnMoJ3JlZmVyJykubGVuZ3RoLAogICAgICAgICAgICAgIG5vdGlmeUJvZHk7CgogICAgICAgICAgaWYgKGhhc1JlZmVyTGlzdGVuZXIpIHsKICAgICAgICAgICAgcmVxdWVzdC5yZXBseSgyMDIsICdBY2NlcHRlZCcpOwogICAgICAgICAgICBub3RpZnlCb2R5ID0gJ1NJUC8yLjAgMTAwIFRyeWluZyc7CgogICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLk5PVElGWSwgewogICAgICAgICAgICAgIGV4dHJhSGVhZGVyczpbCiAgICAgICAgICAgICAgICAnRXZlbnQ6IHJlZmVyJywKICAgICAgICAgICAgICAgICdTdWJzY3JpcHRpb24tU3RhdGU6IHRlcm1pbmF0ZWQnLAogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZTogbWVzc2FnZS9zaXBmcmFnJwogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgYm9keTogbm90aWZ5Qm9keSwKICAgICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB0aGlzLmVtaXQoJ3JlZmVyJywgcmVxdWVzdCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBSRkMgMzUxNS4yLjQuMjogJ3RoZSBVQSBNQVkgZGVjbGluZSB0aGUgcmVxdWVzdC4nCiAgICAgICAgICAgIHJlcXVlc3QucmVwbHkoNjAzLCAnRGVjbGluZWQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU0lQLkMuTk9USUZZOgogICAgICAgIHJlcXVlc3QucmVwbHkoMjAwLCAnT0snKTsKICAgICAgICB0aGlzLmVtaXQoJ25vdGlmeScsIHJlcXVlc3QpOwogICAgICAgIGJyZWFrOwogICAgfQogIH0sCgogIC8qKgogICAqIFJlY2VwdGlvbiBvZiBSZXNwb25zZSBmb3IgaW4tZGlhbG9nIElOVklURQogICAqIEBwcml2YXRlCiAgICovCiAgcmVjZWl2ZVJlaW52aXRlUmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgY29udGVudFR5cGUgPSByZXNwb25zZS5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpOwoKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgc3dpdGNoKHRydWUpIHsKICAgICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgIGJyZWFrOwogICAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CgogICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoU0lQLkMuQUNLLHtjc2VxOnJlc3BvbnNlLmNzZXF9KTsKCiAgICAgICAgaWYoIXJlc3BvbnNlLmJvZHkpIHsKICAgICAgICAgIHRoaXMucmVpbnZpdGVGYWlsZWQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0gZWxzZSBpZiAoY29udGVudFR5cGUgIT09ICdhcHBsaWNhdGlvbi9zZHAnKSB7CiAgICAgICAgICB0aGlzLnJlaW52aXRlRmFpbGVkKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIC8vUkVWSVNJVAogICAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnNldERlc2NyaXB0aW9uKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgLnRoZW4oCiAgICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MgKCkgewogICAgICAgICAgICBzZWxmLnJlaW52aXRlU3VjY2VlZGVkKCk7CiAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlICgpIHsKICAgICAgICAgICAgc2VsZi5yZWludml0ZUZhaWxlZCgpOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhpcy5yZWludml0ZUZhaWxlZCgpOwogICAgfQogIH0sCgogIGFjY2VwdEFuZFRlcm1pbmF0ZTogZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1c19jb2RlLCByZWFzb25fcGhyYXNlKSB7CiAgICB2YXIgZXh0cmFIZWFkZXJzID0gW107CgogICAgaWYgKHN0YXR1c19jb2RlKSB7CiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZWFzb246ICcgKyBTSVAuVXRpbHMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoc3RhdHVzX2NvZGUsIHJlYXNvbl9waHJhc2UpKTsKICAgIH0KCiAgICAvLyBBbiBlcnJvciBvbiBkaWFsb2cgY3JlYXRpb24gd2lsbCBmaXJlICdmYWlsZWQnIGV2ZW50CiAgICBpZiAodGhpcy5kaWFsb2cgfHwgdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnKSkgewogICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSyx7Y3NlcTogcmVzcG9uc2UuY3NlcX0pOwogICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkJZRSwgewogICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAqIFJGQzMyNjEgMTMuMy4xLjQKICAgKiBSZXNwb25zZSByZXRyYW5zbWlzc2lvbnMgY2Fubm90IGJlIGFjY29tcGxpc2hlZCBieSB0cmFuc2FjdGlvbiBsYXllcgogICAqICBzaW5jZSBpdCBpcyBkZXN0cm95ZWQgd2hlbiByZWNlaXZpbmcgdGhlIGZpcnN0IDJ4eCBhbnN3ZXIKICAgKi8KICBzZXRJbnZpdGUyeHhUaW1lcjogZnVuY3Rpb24ocmVxdWVzdCwgYm9keSkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIHRpbWVvdXQgPSBTSVAuVGltZXJzLlQxOwoKICAgIHRoaXMudGltZXJzLmludml0ZTJ4eFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uIGludml0ZTJ4eFJldHJhbnNtaXNzaW9uKCkgewogICAgICBpZiAoc2VsZi5zdGF0dXMgIT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc2VsZi5sb2dnZXIubG9nKCdubyBBQ0sgcmVjZWl2ZWQsIGF0dGVtcHRpbmcgdG8gcmV0cmFuc21pdCBPSycpOwoKICAgICAgcmVxdWVzdC5yZXBseSgyMDAsIG51bGwsIFsnQ29udGFjdDogJyArIHNlbGYuY29udGFjdF0sIGJvZHkpOwoKICAgICAgdGltZW91dCA9IE1hdGgubWluKHRpbWVvdXQgKiAyLCBTSVAuVGltZXJzLlQyKTsKCiAgICAgIHNlbGYudGltZXJzLmludml0ZTJ4eFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGludml0ZTJ4eFJldHJhbnNtaXNzaW9uLCB0aW1lb3V0KTsKICAgIH0sIHRpbWVvdXQpOwogIH0sCgogIC8qKgogICAqIFJGQzMyNjEgMTQuMgogICAqIElmIGEgVUFTIGdlbmVyYXRlcyBhIDJ4eCByZXNwb25zZSBhbmQgbmV2ZXIgcmVjZWl2ZXMgYW4gQUNLLAogICAqICBpdCBTSE9VTEQgZ2VuZXJhdGUgYSBCWUUgdG8gdGVybWluYXRlIHRoZSBkaWFsb2cuCiAgICovCiAgc2V0QUNLVGltZXI6IGZ1bmN0aW9uKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIHRoaXMudGltZXJzLmFja1RpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBpZihzZWxmLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICAgICAgc2VsZi5sb2dnZXIubG9nKCdubyBBQ0sgcmVjZWl2ZWQgZm9yIGFuIGV4dGVuZGVkIHBlcmlvZCBvZiB0aW1lLCB0ZXJtaW5hdGluZyB0aGUgY2FsbCcpOwogICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHNlbGYudGltZXJzLmludml0ZTJ4eFRpbWVyKTsKICAgICAgICBzZWxmLnNlbmRSZXF1ZXN0KFNJUC5DLkJZRSk7CiAgICAgICAgc2VsZi50ZXJtaW5hdGVkKG51bGwsIFNJUC5DLmNhdXNlcy5OT19BQ0spOwogICAgICB9CiAgICB9LCBTSVAuVGltZXJzLlRJTUVSX0gpOwogIH0sCgogIC8qCiAgICogQHByaXZhdGUKICAgKi8KICBvblJlYWR5VG9SZWludml0ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgYWN0aW9uID0gdGhpcy5wZW5kaW5nX2FjdGlvbnMuc2hpZnQoKTsKCiAgICBpZiAoIWFjdGlvbiB8fCAhdGhpc1thY3Rpb24ubmFtZV0pIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXNbYWN0aW9uLm5hbWVdKCk7CiAgfSwKCiAgb25UcmFuc3BvcnRFcnJvcjogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0NPTkZJUk1FRCAmJiB0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICB9CiAgfSwKCiAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aGlzLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgICB0aGlzLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9CiAgfSwKCiAgb25EaWFsb2dFcnJvcjogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMudGVybWluYXRlZChyZXNwb25zZSwgU0lQLkMuY2F1c2VzLkRJQUxPR19FUlJPUik7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuRElBTE9HX0VSUk9SKTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuRElBTE9HX0VSUk9SKTsKICAgIH0KICB9LAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIG9uaG9sZDogZnVuY3Rpb24ob3JpZ2luYXRvcikgewogICAgdGhpc1tvcmlnaW5hdG9yID09PSAnbG9jYWwnID8gJ2xvY2FsX2hvbGQnIDogJ3JlbW90ZV9ob2xkJ10gPSB0cnVlOwogICAgdGhpcy5lbWl0KCdob2xkJywgeyBvcmlnaW5hdG9yOiBvcmlnaW5hdG9yIH0pOwogIH0sCgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgb251bmhvbGQ6IGZ1bmN0aW9uKG9yaWdpbmF0b3IpIHsKICAgIHRoaXNbb3JpZ2luYXRvciA9PT0gJ2xvY2FsJyA/ICdsb2NhbF9ob2xkJyA6ICdyZW1vdGVfaG9sZCddID0gZmFsc2U7CiAgICB0aGlzLmVtaXQoJ3VuaG9sZCcsIHsgb3JpZ2luYXRvcjogb3JpZ2luYXRvciB9KTsKICB9LAoKICAvKgogICAqIEBwcml2YXRlCiAgICovCiAgb25tdXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICB0aGlzLmVtaXQoJ211dGVkJywgewogICAgICBhdWRpbzogb3B0aW9ucy5hdWRpbywKICAgICAgdmlkZW86IG9wdGlvbnMudmlkZW8KICAgIH0pOwogIH0sCgogIC8qCiAgICogQHByaXZhdGUKICAgKi8KICBvbnVubXV0ZTogZnVuY3Rpb24ob3B0aW9ucykgewogICAgdGhpcy5lbWl0KCd1bm11dGVkJywgewogICAgICBhdWRpbzogb3B0aW9ucy5hdWRpbywKICAgICAgdmlkZW86IG9wdGlvbnMudmlkZW8KICAgIH0pOwogIH0sCgogIGZhaWxlZDogZnVuY3Rpb24ocmVzcG9uc2UsIGNhdXNlKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlIHx8IG51bGwsIGNhdXNlIHx8IG51bGwpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgcmVqZWN0ZWQ6IGZ1bmN0aW9uKHJlc3BvbnNlLCBjYXVzZSkgewogICAgdGhpcy5lbWl0KCdyZWplY3RlZCcsCiAgICAgIHJlc3BvbnNlIHx8IG51bGwsCiAgICAgIGNhdXNlIHx8IG51bGwKICAgICk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBjYW5jZWxlZDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmVtaXQoJ2NhbmNlbCcpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgYWNjZXB0ZWQ6IGZ1bmN0aW9uKHJlc3BvbnNlLCBjYXVzZSkgewogICAgY2F1c2UgPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlLCBjYXVzZSk7CgogICAgdGhpcy5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpOwoKICAgIGlmICh0aGlzLnJlcGxhY2VlKSB7CiAgICAgIHRoaXMucmVwbGFjZWUuZW1pdCgncmVwbGFjZWQnLCB0aGlzKTsKICAgICAgdGhpcy5yZXBsYWNlZS50ZXJtaW5hdGUoKTsKICAgIH0KICAgIHRoaXMuZW1pdCgnYWNjZXB0ZWQnLCByZXNwb25zZSwgY2F1c2UpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgdGVybWluYXRlZDogZnVuY3Rpb24obWVzc2FnZSwgY2F1c2UpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICB0aGlzLmVuZFRpbWUgPSBuZXcgRGF0ZSgpOwoKICAgIHRoaXMuY2xvc2UoKTsKICAgIHRoaXMuZW1pdCgndGVybWluYXRlZCcsCiAgICAgIG1lc3NhZ2UgfHwgbnVsbCwKICAgICAgY2F1c2UgfHwgbnVsbAogICAgKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIGNvbm5lY3Rpbmc6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIHRoaXMuZW1pdCgnY29ubmVjdGluZycsIHsgcmVxdWVzdDogcmVxdWVzdCB9KTsKICAgIHJldHVybiB0aGlzOwogIH0KfTsKClNlc3Npb24uZGVzdWdhciA9IGZ1bmN0aW9uIGRlc3VnYXIob3B0aW9ucykgewogIGlmIChlbnZpcm9ubWVudC5IVE1MTWVkaWFFbGVtZW50ICYmIG9wdGlvbnMgaW5zdGFuY2VvZiBlbnZpcm9ubWVudC5IVE1MTWVkaWFFbGVtZW50KSB7CiAgICBvcHRpb25zID0gewogICAgICBtZWRpYTogewogICAgICAgIGNvbnN0cmFpbnRzOiB7CiAgICAgICAgICBhdWRpbzogdHJ1ZSwKICAgICAgICAgIHZpZGVvOiBvcHRpb25zLnRhZ05hbWUgPT09ICdWSURFTycKICAgICAgICB9LAogICAgICAgIHJlbmRlcjogewogICAgICAgICAgcmVtb3RlOiBvcHRpb25zCiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0KICByZXR1cm4gb3B0aW9ucyB8fCB7fTsKfTsKCgpTZXNzaW9uLkMgPSBDOwpTSVAuU2Vzc2lvbiA9IFNlc3Npb247CgoKSW52aXRlU2VydmVyQ29udGV4dCA9IGZ1bmN0aW9uKHVhLCByZXF1ZXN0KSB7CiAgdmFyIGV4cGlyZXMsCiAgICBzZWxmID0gdGhpcywKICAgIGNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpLAogICAgY29udGVudERpc3AgPSByZXF1ZXN0LnBhcnNlSGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uJyk7CgogIC8vIENoZWNrIGJvZHkgYW5kIGNvbnRlbnQgdHlwZQogIGlmICgoIWNvbnRlbnREaXNwICYmIGNvbnRlbnRUeXBlICE9PSAnYXBwbGljYXRpb24vc2RwJykgfHwgKGNvbnRlbnREaXNwICYmIGNvbnRlbnREaXNwLnR5cGUgPT09ICdyZW5kZXInKSkgewogICAgdGhpcy5yZW5kZXJib2R5ID0gcmVxdWVzdC5ib2R5OwogICAgdGhpcy5yZW5kZXJ0eXBlID0gY29udGVudFR5cGU7CiAgfSBlbHNlIGlmIChjb250ZW50VHlwZSAhPT0gJ2FwcGxpY2F0aW9uL3NkcCcgJiYgKGNvbnRlbnREaXNwICYmIGNvbnRlbnREaXNwLnR5cGUgPT09ICdzZXNzaW9uJykpIHsKICAgIHJlcXVlc3QucmVwbHkoNDE1KTsKICAgIC8vVE9ETzogaW5zdGVhZCBvZiA0MTUsIHBhc3Mgb2ZmIHRvIHRoZSBtZWRpYSBoYW5kbGVyLCB3aG8gY2FuIHRoZW4gZGVjaWRlIGlmIHdlIGNhbiB1c2UgaXQKICAgIHJldHVybjsKICB9CgogIC8vVE9ETzogbW92ZSB0aGlzIGludG8gbWVkaWEgaGFuZGxlcgogIFNJUC5IYWNrcy5GaXJlZm94LmNhbm5vdEhhbmRsZUV4dHJhV2hpdGVzcGFjZShyZXF1ZXN0KTsKICBTSVAuSGFja3MuQWxsQnJvd3NlcnMubWFza0R0bHMocmVxdWVzdCk7CgogIFNJUC5VdGlscy5hdWdtZW50KHRoaXMsIFNJUC5TZXJ2ZXJDb250ZXh0LCBbdWEsIHJlcXVlc3RdKTsKICBTSVAuVXRpbHMuYXVnbWVudCh0aGlzLCBTSVAuU2Vzc2lvbiwgW3VhLmNvbmZpZ3VyYXRpb24ubWVkaWFIYW5kbGVyRmFjdG9yeV0pOwoKICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0lOVklURV9SRUNFSVZFRDsKICB0aGlzLmZyb21fdGFnID0gcmVxdWVzdC5mcm9tX3RhZzsKICB0aGlzLmlkID0gcmVxdWVzdC5jYWxsX2lkICsgdGhpcy5mcm9tX3RhZzsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogIHRoaXMuY29udGFjdCA9IHRoaXMudWEuY29udGFjdC50b1N0cmluZygpOwoKICB0aGlzLnJlY2VpdmVOb25JbnZpdGVSZXNwb25zZSA9IGZ1bmN0aW9uICgpIHt9OyAvLyBpbnRlbnRpb25hbCBuby1vcAoKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLmludml0ZXNlcnZlcmNvbnRleHQnLCB0aGlzLmlkKTsKCiAgLy9TYXZlIHRoZSBzZXNzaW9uIGludG8gdGhlIHVhIHNlc3Npb25zIGNvbGxlY3Rpb24uCiAgdGhpcy51YS5zZXNzaW9uc1t0aGlzLmlkXSA9IHRoaXM7CgogIC8vR2V0IHRoZSBFeHBpcmVzIGhlYWRlciB2YWx1ZSBpZiBleGlzdHMKICBpZihyZXF1ZXN0Lmhhc0hlYWRlcignZXhwaXJlcycpKSB7CiAgICBleHBpcmVzID0gcmVxdWVzdC5nZXRIZWFkZXIoJ2V4cGlyZXMnKSAqIDEwMDA7CiAgfQoKICAvL1NldCAxMDByZWwgaWYgbmVjZXNzYXJ5CiAgZnVuY3Rpb24gc2V0MTAwcmVsKGgsYykgewogICAgaWYgKHJlcXVlc3QuaGFzSGVhZGVyKGgpICYmIHJlcXVlc3QuZ2V0SGVhZGVyKGgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignMTAwcmVsJykgPj0gMCkgewogICAgICBzZWxmLnJlbDEwMCA9IGM7CiAgICB9CiAgfQogIHNldDEwMHJlbCgncmVxdWlyZScsIFNJUC5DLnN1cHBvcnRlZC5SRVFVSVJFRCk7CiAgc2V0MTAwcmVsKCdzdXBwb3J0ZWQnLCBTSVAuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEKTsKCiAgLyogU2V0IHRoZSB0b190YWcgYmVmb3JlCiAgICogcmVwbHlpbmcgYSByZXNwb25zZSBjb2RlIHRoYXQgd2lsbCBjcmVhdGUgYSBkaWFsb2cuCiAgICovCiAgcmVxdWVzdC50b190YWcgPSBTSVAuVXRpbHMubmV3VGFnKCk7CgogIC8vIEFuIGVycm9yIG9uIGRpYWxvZyBjcmVhdGlvbiB3aWxsIGZpcmUgJ2ZhaWxlZCcgZXZlbnQKICBpZighdGhpcy5jcmVhdGVEaWFsb2cocmVxdWVzdCwgJ1VBUycsIHRydWUpKSB7CiAgICByZXF1ZXN0LnJlcGx5KDUwMCwgJ01pc3NpbmcgQ29udGFjdCBoZWFkZXIgZmllbGQnKTsKICAgIHJldHVybjsKICB9CgogIC8vSW5pdGlhbGl6ZSBNZWRpYSBTZXNzaW9uCiAgdGhpcy5tZWRpYUhhbmRsZXIgPSB0aGlzLm1lZGlhSGFuZGxlckZhY3RvcnkodGhpcywgewogICAgUlRDQ29uc3RyYWludHM6IHsib3B0aW9uYWwiOiBbeydEdGxzU3J0cEtleUFncmVlbWVudCc6ICd0cnVlJ31dfQogIH0pOwoKICBpZiAodGhpcy5tZWRpYUhhbmRsZXIgJiYgdGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVtb3RlU3RyZWFtcykgewogICAgdGhpcy5nZXRSZW1vdGVTdHJlYW1zID0gdGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVtb3RlU3RyZWFtcy5iaW5kKHRoaXMubWVkaWFIYW5kbGVyKTsKICAgIHRoaXMuZ2V0TG9jYWxTdHJlYW1zID0gdGhpcy5tZWRpYUhhbmRsZXIuZ2V0TG9jYWxTdHJlYW1zLmJpbmQodGhpcy5tZWRpYUhhbmRsZXIpOwogIH0KCiAgZnVuY3Rpb24gZmlyZU5ld1Nlc3Npb24oKSB7CiAgICB2YXIgb3B0aW9ucyA9IHtleHRyYUhlYWRlcnM6IFsnQ29udGFjdDogJyArIHNlbGYuY29udGFjdF19OwoKICAgIGlmIChzZWxmLnJlbDEwMCAhPT0gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEKSB7CiAgICAgIHNlbGYucHJvZ3Jlc3Mob3B0aW9ucyk7CiAgICB9CiAgICBzZWxmLnN0YXR1cyA9IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUjsKCiAgICAvLyBTZXQgdXNlck5vQW5zd2VyVGltZXIKICAgIHNlbGYudGltZXJzLnVzZXJOb0Fuc3dlclRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICByZXF1ZXN0LnJlcGx5KDQwOCk7CiAgICAgIHNlbGYuZmFpbGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5OT19BTlNXRVIpOwogICAgICBzZWxmLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLk5PX0FOU1dFUik7CiAgICB9LCBzZWxmLnVhLmNvbmZpZ3VyYXRpb24ubm9BbnN3ZXJUaW1lb3V0KTsKCiAgICAvKiBTZXQgZXhwaXJlc1RpbWVyCiAgICAgKiBSRkMzMjYxIDEzLjMuMQogICAgICovCiAgICBpZiAoZXhwaXJlcykgewogICAgICBzZWxmLnRpbWVycy5leHBpcmVzVGltZXIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYoc2VsZi5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUikgewogICAgICAgICAgcmVxdWVzdC5yZXBseSg0ODcpOwogICAgICAgICAgc2VsZi5mYWlsZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkVYUElSRVMpOwogICAgICAgICAgc2VsZi50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5FWFBJUkVTKTsKICAgICAgICB9CiAgICAgIH0sIGV4cGlyZXMpOwogICAgfQoKICAgIHNlbGYuZW1pdCgnaW52aXRlJyxyZXF1ZXN0KTsKICB9CgogIGlmICghcmVxdWVzdC5ib2R5IHx8IHRoaXMucmVuZGVyYm9keSkgewogICAgU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZpcmVOZXdTZXNzaW9uLCAwKTsKICB9IGVsc2UgewogICAgdGhpcy5oYXNPZmZlciA9IHRydWU7CiAgICB0aGlzLm1lZGlhSGFuZGxlci5zZXREZXNjcmlwdGlvbihyZXF1ZXN0LmJvZHkpCiAgICAudGhlbigKICAgICAgZmlyZU5ld1Nlc3Npb24sCiAgICAgIGZ1bmN0aW9uIG9uRmFpbHVyZSAoZSkgewogICAgICAgIHNlbGYubG9nZ2VyLndhcm4oJ2ludmFsaWQgU0RQJyk7CiAgICAgICAgc2VsZi5sb2dnZXIud2FybihlKTsKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4OCk7CiAgICAgIH0KICAgICk7CiAgfQp9OwoKSW52aXRlU2VydmVyQ29udGV4dC5wcm90b3R5cGUgPSB7CiAgcmVqZWN0OiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7CiAgICB9CgogICAgdGhpcy5sb2dnZXIubG9nKCdyZWplY3RpbmcgUlRDU2Vzc2lvbicpOwoKICAgIFNJUC5TZXJ2ZXJDb250ZXh0LnByb3RvdHlwZS5yZWplY3QuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgIHJldHVybiB0aGlzLnRlcm1pbmF0ZWQoKTsKICB9LAoKICB0ZXJtaW5hdGU6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIHZhcgogICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpLAogICAgYm9keSA9IG9wdGlvbnMuYm9keSwKICAgIGRpYWxvZywKICAgIHNlbGYgPSB0aGlzOwoKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLICYmCiAgICAgICB0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLnN0YXRlICE9PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgZGlhbG9nID0gdGhpcy5kaWFsb2c7CgogICAgICB0aGlzLnJlY2VpdmVSZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdCkgewogICAgICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gU0lQLkMuQUNLKSB7CiAgICAgICAgICB0aGlzLnJlcXVlc3QoU0lQLkMuQllFLCB7CiAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzLAogICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICB9KTsKICAgICAgICAgIGRpYWxvZy50ZXJtaW5hdGUoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLm9uKCdzdGF0ZUNoYW5nZWQnLCBmdW5jdGlvbigpewogICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgIHRoaXMucmVxdWVzdCA9IG5ldyBTSVAuT3V0Z29pbmdSZXF1ZXN0KAogICAgICAgICAgICBTSVAuQy5CWUUsCiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnJlbW90ZV90YXJnZXQsCiAgICAgICAgICAgIHRoaXMudWEsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAnY3NlcSc6IHRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSs9MSwKICAgICAgICAgICAgICAnY2FsbF9pZCc6IHRoaXMuZGlhbG9nLmlkLmNhbGxfaWQsCiAgICAgICAgICAgICAgJ2Zyb21fdXJpJzogdGhpcy5kaWFsb2cubG9jYWxfdXJpLAogICAgICAgICAgICAgICdmcm9tX3RhZyc6IHRoaXMuZGlhbG9nLmlkLmxvY2FsX3RhZywKICAgICAgICAgICAgICAndG9fdXJpJzogdGhpcy5kaWFsb2cucmVtb3RlX3VyaSwKICAgICAgICAgICAgICAndG9fdGFnJzogdGhpcy5kaWFsb2cuaWQucmVtb3RlX3RhZywKICAgICAgICAgICAgICAncm91dGVfc2V0JzogdGhpcy5kaWFsb2cucm91dGVfc2V0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4dHJhSGVhZGVycywKICAgICAgICAgICAgYm9keQogICAgICAgICAgKTsKCiAgICAgICAgICBuZXcgU0lQLlJlcXVlc3RTZW5kZXIoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICByZXF1ZXN0OiB0aGlzLnJlcXVlc3QsCiAgICAgICAgICAgICAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uUmVxdWVzdFRpbWVvdXQoKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgc2VsZi5vblRyYW5zcG9ydEVycm9yKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGhpcy51YQogICAgICAgICAgKS5zZW5kKCk7CiAgICAgICAgICBkaWFsb2cudGVybWluYXRlKCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRoaXMuZW1pdCgnYnllJywgdGhpcy5yZXF1ZXN0KTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKCk7CgogICAgICAvLyBSZXN0b3JlIHRoZSBkaWFsb2cgaW50byAndGhpcycgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBzZW5kIHRoZSBpbi1kaWFsb2cgQllFIDotKQogICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZzsKCiAgICAgIC8vIFJlc3RvcmUgdGhlIGRpYWxvZyBpbnRvICd1YScgc28gdGhlIEFDSyBjYW4gcmVhY2ggJ3RoaXMnIHNlc3Npb24KICAgICAgdGhpcy51YS5kaWFsb2dzW2RpYWxvZy5pZC50b1N0cmluZygpXSA9IGRpYWxvZzsKCiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhpcy5ieWUob3B0aW9ucyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnJlamVjdChvcHRpb25zKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5tZWRpYV0gZ2V0cyBwYXNzZWQgdG8gU0lQLk1lZGlhSGFuZGxlci5nZXREZXNjcmlwdGlvbiBhcyBtZWRpYUhpbnQKICAgKi8KICBwcm9ncmVzczogZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgdmFyCiAgICAgIHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGUgfHwgMTgwLAogICAgICByZWFzb25QaHJhc2UgPSBvcHRpb25zLnJlYXNvblBocmFzZSwKICAgICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpLAogICAgICBpY2VTZXJ2ZXJzLAogICAgICBzdHVuU2VydmVycyA9IG9wdGlvbnMuc3R1blNlcnZlcnMgfHwgbnVsbCwKICAgICAgdHVyblNlcnZlcnMgPSBvcHRpb25zLnR1cm5TZXJ2ZXJzIHx8IG51bGwsCiAgICAgIGJvZHkgPSBvcHRpb25zLmJvZHksCiAgICAgIHJlc3BvbnNlOwoKICAgIGlmIChzdGF0dXNDb2RlIDwgMTAwIHx8IHN0YXR1c0NvZGUgPiAxOTkpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdGF0dXNDb2RlOiAnICsgc3RhdHVzQ29kZSk7CiAgICB9CgogICAgaWYgKHRoaXMuaXNDYW5jZWxlZCB8fCB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAoc3R1blNlcnZlcnMgfHwgdHVyblNlcnZlcnMpIHsKICAgICAgaWYgKHN0dW5TZXJ2ZXJzKSB7CiAgICAgICAgaWNlU2VydmVycyA9IFNJUC5VQS5jb25maWd1cmF0aW9uX2NoZWNrLm9wdGlvbmFsWydzdHVuU2VydmVycyddKHN0dW5TZXJ2ZXJzKTsKICAgICAgICBpZiAoIWljZVNlcnZlcnMpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgc3R1blNlcnZlcnM6ICcrIHN0dW5TZXJ2ZXJzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zdHVuU2VydmVycyA9IGljZVNlcnZlcnM7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodHVyblNlcnZlcnMpIHsKICAgICAgICBpY2VTZXJ2ZXJzID0gU0lQLlVBLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWxbJ3R1cm5TZXJ2ZXJzJ10odHVyblNlcnZlcnMpOwogICAgICAgIGlmICghaWNlU2VydmVycykgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0dXJuU2VydmVyczogJysgdHVyblNlcnZlcnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnR1cm5TZXJ2ZXJzID0gaWNlU2VydmVyczsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnVwZGF0ZUljZVNlcnZlcnMoewogICAgICAgIHN0dW5TZXJ2ZXJzOiB0aGlzLnN0dW5TZXJ2ZXJzLAogICAgICAgIHR1cm5TZXJ2ZXJzOiB0aGlzLnR1cm5TZXJ2ZXJzCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvMTAwcmVsKCkgewogICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovCiAgICAgIHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGUgfHwgMTgzOwoKICAgICAgLy8gU2V0IHN0YXR1cyBhbmQgYWRkIGV4dHJhIGhlYWRlcnMKICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSzsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXF1aXJlOiAxMDByZWwnKTsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JTZXE6ICcgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCkpOwoKICAgICAgLy8gU2F2ZSBtZWRpYSBoaW50IGZvciBsYXRlciAocmVmZXJyZWQgc2Vzc2lvbnMpCiAgICAgIHRoaXMubWVkaWFIaW50ID0gb3B0aW9ucy5tZWRpYTsKCiAgICAgIC8vIEdldCB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbiB0byBhZGQgdG8gcHJlYWNjZXB0IHdpdGgKICAgICAgdGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24ob3B0aW9ucy5tZWRpYSkKICAgICAgLnRoZW4oCiAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzIChib2R5KSB7CiAgICAgICAgICBpZiAodGhpcy5pc0NhbmNlbGVkIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmVhcmx5X3NkcCA9IGJvZHk7CiAgICAgICAgICB0aGlzW3RoaXMuaGFzT2ZmZXIgPyAnaGFzQW5zd2VyJyA6ICdoYXNPZmZlciddID0gdHJ1ZTsKCiAgICAgICAgICAvLyBSZXRyYW5zbWl0IHVudGlsIHdlIGdldCBhIHJlc3BvbnNlIG9yIHdlIHRpbWUgb3V0IChzZWUgcHJhY2tUaW1lciBiZWxvdykKICAgICAgICAgIHZhciB0aW1lb3V0ID0gU0lQLlRpbWVycy5UMTsKICAgICAgICAgIHRoaXMudGltZXJzLnJlbDF4eFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uIHJlbDF4eFJldHJhbnNtaXNzaW9uKCkgewogICAgICAgICAgICB0aGlzLnJlcXVlc3QucmVwbHkoc3RhdHVzQ29kZSwgbnVsbCwgZXh0cmFIZWFkZXJzLCBib2R5KTsKICAgICAgICAgICAgdGltZW91dCAqPSAyOwogICAgICAgICAgICB0aGlzLnRpbWVycy5yZWwxeHhUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChyZWwxeHhSZXRyYW5zbWlzc2lvbi5iaW5kKHRoaXMpLCB0aW1lb3V0KTsKICAgICAgICAgIH0uYmluZCh0aGlzKSwgdGltZW91dCk7CgogICAgICAgICAgLy8gVGltZW91dCBhbmQgcmVqZWN0IElOVklURSBpZiBubyByZXNwb25zZQogICAgICAgICAgdGhpcy50aW1lcnMucHJhY2tUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfV0FJVElOR19GT1JfUFJBQ0spIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygnbm8gUFJBQ0sgcmVjZWl2ZWQsIHJlamVjdGluZyB0aGUgY2FsbCcpOwogICAgICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5yZWwxeHhUaW1lcik7CiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5yZXBseSg1MDQpOwogICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLk5PX1BSQUNLKTsKICAgICAgICAgIH0uYmluZCh0aGlzKSwgU0lQLlRpbWVycy5UMSAqIDY0KTsKCiAgICAgICAgICAvLyBTZW5kIHRoZSBpbml0aWFsIHJlc3BvbnNlCiAgICAgICAgICByZXNwb25zZSA9IHRoaXMucmVxdWVzdC5yZXBseShzdGF0dXNDb2RlLCByZWFzb25QaHJhc2UsIGV4dHJhSGVhZGVycywgYm9keSk7CiAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UsIHJlYXNvblBocmFzZSk7CiAgICAgICAgfS5iaW5kKHRoaXMpLAoKICAgICAgICBmdW5jdGlvbiBvbkZhaWx1cmUgKCkgewogICAgICAgICAgdGhpcy5yZXF1ZXN0LnJlcGx5KDQ4MCk7CiAgICAgICAgICB0aGlzLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICB9LmJpbmQodGhpcykKICAgICAgKTsKICAgIH0gLy8gZW5kIGRvMTAwcmVsCgogICAgZnVuY3Rpb24gbm9ybWFsUmVwbHkoKSB7CiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogICAgICByZXNwb25zZSA9IHRoaXMucmVxdWVzdC5yZXBseShzdGF0dXNDb2RlLCByZWFzb25QaHJhc2UsIGV4dHJhSGVhZGVycywgYm9keSk7CiAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXNwb25zZSwgcmVhc29uUGhyYXNlKTsKICAgIH0KCiAgICBpZiAob3B0aW9ucy5zdGF0dXNDb2RlICE9PSAxMDAgJiYKICAgICAgICAodGhpcy5yZWwxMDAgPT09IFNJUC5DLnN1cHBvcnRlZC5SRVFVSVJFRCB8fAogICAgICAgICAodGhpcy5yZWwxMDAgPT09IFNJUC5DLnN1cHBvcnRlZC5TVVBQT1JURUQgJiYgb3B0aW9ucy5yZWwxMDApIHx8CiAgICAgICAgICh0aGlzLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlNVUFBPUlRFRCAmJiAodGhpcy51YS5jb25maWd1cmF0aW9uLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEKSkpKSB7CiAgICAgIGRvMTAwcmVsLmFwcGx5KHRoaXMpOwogICAgfSBlbHNlIHsKICAgICAgbm9ybWFsUmVwbHkuYXBwbHkodGhpcyk7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5tZWRpYV0gZ2V0cyBwYXNzZWQgdG8gU0lQLk1lZGlhSGFuZGxlci5nZXREZXNjcmlwdGlvbiBhcyBtZWRpYUhpbnQKICAgKi8KICBhY2NlcHQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNlc3Npb24uZGVzdWdhcihvcHRpb25zKSk7CiAgICBTSVAuVXRpbHMub3B0aW9uc092ZXJyaWRlKG9wdGlvbnMsICdtZWRpYScsICdtZWRpYUNvbnN0cmFpbnRzJywgdHJ1ZSwgdGhpcy5sb2dnZXIsIHRoaXMudWEuY29uZmlndXJhdGlvbi5tZWRpYSk7CiAgICB0aGlzLm1lZGlhSGludCA9IG9wdGlvbnMubWVkaWE7CgogICAgLy8gY29tbWVudGVkIG91dCBub3ctdW51c2VkIGhvbGQtcmVsYXRlZCB2YXJpYWJsZXMgZm9yIGpzaGludC4gU2VlIGJlbG93LiBKTUYgMjAxNC0xLTIxCiAgICB2YXIKICAgICAgLy9pZHgsIGxlbmd0aCwgaGFzQXVkaW8sIGhhc1ZpZGVvLAogICAgICBzZWxmID0gdGhpcywKICAgICAgcmVxdWVzdCA9IHRoaXMucmVxdWVzdCwKICAgICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpLAogICAgLy9tZWRpYVN0cmVhbSA9IG9wdGlvbnMubWVkaWFTdHJlYW0gfHwgbnVsbCwKICAgICAgaWNlU2VydmVycywKICAgICAgc3R1blNlcnZlcnMgPSBvcHRpb25zLnN0dW5TZXJ2ZXJzIHx8IG51bGwsCiAgICAgIHR1cm5TZXJ2ZXJzID0gb3B0aW9ucy50dXJuU2VydmVycyB8fCBudWxsLAogICAgICBzZHBDcmVhdGlvblN1Y2NlZWRlZCA9IGZ1bmN0aW9uKGJvZHkpIHsKICAgICAgICB2YXIKICAgICAgICAgIHJlc3BvbnNlLAogICAgICAgICAgLy8gcnVuIGZvciByZXBseSBzdWNjZXNzIGNhbGxiYWNrCiAgICAgICAgICByZXBseVN1Y2NlZWRlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzZWxmLnN0YXR1cyA9IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSzsKCiAgICAgICAgICAgIHNlbGYuc2V0SW52aXRlMnh4VGltZXIocmVxdWVzdCwgYm9keSk7CiAgICAgICAgICAgIHNlbGYuc2V0QUNLVGltZXIoKTsKICAgICAgICAgIH0sCgogICAgICAgICAgLy8gcnVuIGZvciByZXBseSBmYWlsdXJlIGNhbGxiYWNrCiAgICAgICAgICByZXBseUZhaWxlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzZWxmLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICAgICAgICAgIHNlbGYudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICAgICAgICB9OwoKICAgICAgICAvLyBDaHJvbWUgbWlnaHQgY2FsbCBvbmFkZHN0cmVhbSBiZWZvcmUgYWNjZXB0KCkgaXMgY2FsbGVkLCB3aGljaCBtZWFucwogICAgICAgIC8vIG1lZGlhSGFuZGxlci5yZW5kZXIoKSB3YXMgY2FsbGVkIHdpdGhvdXQgYSByZW5kZXJIaW50LCBzbyB3ZSBuZWVkIHRvCiAgICAgICAgLy8gcmUtcmVuZGVyIG5vdyB0aGF0IG1lZGlhSGludC5yZW5kZXIgaGFzIGJlZW4gc2V0LgogICAgICAgIC8vCiAgICAgICAgLy8gQ2hyb21lIHNlZW1zIHRvIGJlIGluIHRoZSByaWdodCByZWdhcmRpbmcgdGhpcywgc2VlCiAgICAgICAgLy8gaHR0cDovL2Rldi53My5vcmcvMjAxMS93ZWJydGMvZWRpdG9yL3dlYnJ0Yy5odG1sI3dpZGwtUlRDUGVlckNvbm5lY3Rpb24tb25hZGRzdHJlYW0KICAgICAgICBzZWxmLm1lZGlhSGFuZGxlci5yZW5kZXIoKTsKCiAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcgKyBzZWxmLmNvbnRhY3QpOwogICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdBbGxvdzogJyArIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKCiAgICAgICAgaWYoIXNlbGYuaGFzT2ZmZXIpIHsKICAgICAgICAgIHNlbGYuaGFzT2ZmZXIgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLmhhc0Fuc3dlciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdC5yZXBseSgyMDAsIG51bGwsIGV4dHJhSGVhZGVycywKICAgICAgICAgICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgICAgICAgICByZXBseVN1Y2NlZWRlZCwKICAgICAgICAgICAgICAgICAgICAgIHJlcGx5RmFpbGVkCiAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgaWYgKHNlbGYuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7IC8vIERpZG4ndCBmYWlsCiAgICAgICAgICBzZWxmLmFjY2VwdGVkKHJlc3BvbnNlLCBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKDIwMCkpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIHNkcENyZWF0aW9uRmFpbGVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIFRPRE8gLSBmYWlsIG91dCBvbiBlcnJvcgogICAgICAgIHNlbGYucmVxdWVzdC5yZXBseSg0ODApOwogICAgICAgIC8vc2VsZi5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5VU0VSX0RFTklFRF9NRURJQV9BQ0NFU1MpOwogICAgICAgIHNlbGYuZmFpbGVkKG51bGwsIFNJUC5DLmNhdXNlcy5XRUJSVENfRVJST1IpOwogICAgICAgIHNlbGYudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgfTsKCiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSykgewogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0FOU1dFUkVEX1dBSVRJTkdfRk9SX1BSQUNLOwogICAgICByZXR1cm4gdGhpczsKICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUikgewogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0FOU1dFUkVEOwogICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfRUFSTFlfTUVESUEpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICBpZiAoKHN0dW5TZXJ2ZXJzIHx8IHR1cm5TZXJ2ZXJzKSAmJgogICAgICAgICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfRUFSTFlfTUVESUEgJiYgdGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0FOU1dFUkVEX1dBSVRJTkdfRk9SX1BSQUNLKSkgewogICAgICBpZiAoc3R1blNlcnZlcnMpIHsKICAgICAgICBpY2VTZXJ2ZXJzID0gU0lQLlVBLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWxbJ3N0dW5TZXJ2ZXJzJ10oc3R1blNlcnZlcnMpOwogICAgICAgIGlmICghaWNlU2VydmVycykgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdHVuU2VydmVyczogJysgc3R1blNlcnZlcnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnN0dW5TZXJ2ZXJzID0gaWNlU2VydmVyczsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0dXJuU2VydmVycykgewogICAgICAgIGljZVNlcnZlcnMgPSBTSVAuVUEuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbFsndHVyblNlcnZlcnMnXSh0dXJuU2VydmVycyk7CiAgICAgICAgaWYgKCFpY2VTZXJ2ZXJzKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHR1cm5TZXJ2ZXJzOiAnKyB0dXJuU2VydmVycyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudHVyblNlcnZlcnMgPSBpY2VTZXJ2ZXJzOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5tZWRpYUhhbmRsZXIudXBkYXRlSWNlU2VydmVycyh7CiAgICAgICAgc3R1blNlcnZlcnM6IHRoaXMuc3R1blNlcnZlcnMsCiAgICAgICAgdHVyblNlcnZlcnM6IHRoaXMudHVyblNlcnZlcnMKICAgICAgfSk7CiAgICB9CgogICAgLy8gQW4gZXJyb3Igb24gZGlhbG9nIGNyZWF0aW9uIHdpbGwgZmlyZSAnZmFpbGVkJyBldmVudAogICAgaWYoIXRoaXMuY3JlYXRlRGlhbG9nKHJlcXVlc3QsICdVQVMnKSkgewogICAgICByZXF1ZXN0LnJlcGx5KDUwMCwgJ01pc3NpbmcgQ29udGFjdCBoZWFkZXIgZmllbGQnKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMudXNlck5vQW5zd2VyVGltZXIpOwoKICAgIC8vIHRoaXMgaG9sZC1yZWxhdGVkIGNvZGUgYnJlYWtzIEZGIGFjY2VwdGluZyBuZXcgY2FsbHMgLSBKTUYgMjAxNC0xLTIxCiAgICAvKgogICAgbGVuZ3RoID0gdGhpcy5nZXRSZW1vdGVTdHJlYW1zKCkubGVuZ3RoOwoKICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICBpZiAodGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVtb3RlU3RyZWFtcygpW2lkeF0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPiAwKSB7CiAgICAgICAgaGFzVmlkZW8gPSB0cnVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1lZGlhSGFuZGxlci5nZXRSZW1vdGVTdHJlYW1zKClbaWR4XS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICBoYXNBdWRpbyA9IHRydWU7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIWhhc0F1ZGlvICYmIHRoaXMubWVkaWFDb25zdHJhaW50cy5hdWRpbyA9PT0gdHJ1ZSkgewogICAgICB0aGlzLm1lZGlhQ29uc3RyYWludHMuYXVkaW8gPSBmYWxzZTsKICAgICAgaWYgKG1lZGlhU3RyZWFtKSB7CiAgICAgICAgbGVuZ3RoID0gbWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGg7CiAgICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgICBtZWRpYVN0cmVhbS5yZW1vdmVUcmFjayhtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpW2lkeF0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmICghaGFzVmlkZW8gJiYgdGhpcy5tZWRpYUNvbnN0cmFpbnRzLnZpZGVvID09PSB0cnVlKSB7CiAgICAgIHRoaXMubWVkaWFDb25zdHJhaW50cy52aWRlbyA9IGZhbHNlOwogICAgICBpZiAobWVkaWFTdHJlYW0pIHsKICAgICAgICBsZW5ndGggPSBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aDsKICAgICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICAgIG1lZGlhU3RyZWFtLnJlbW92ZVRyYWNrKG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbaWR4XSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAqLwoKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfRUFSTFlfTUVESUEpIHsKICAgICAgc2RwQ3JlYXRpb25TdWNjZWVkZWQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uKHNlbGYubWVkaWFIaW50KQogICAgICAudGhlbigKICAgICAgICBzZHBDcmVhdGlvblN1Y2NlZWRlZCwKICAgICAgICBzZHBDcmVhdGlvbkZhaWxlZAogICAgICApOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIHJlY2VpdmVSZXF1ZXN0OiBmdW5jdGlvbihyZXF1ZXN0KSB7CgogICAgLy8gSVNDIFJFQ0VJVkUgUkVRVUVTVAoKICAgIGZ1bmN0aW9uIGNvbmZpcm1TZXNzaW9uKCkgewogICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgdmFyIGNvbnRlbnRUeXBlOwoKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuYWNrVGltZXIpOwogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5pbnZpdGUyeHhUaW1lcik7CiAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICB0aGlzLnVubXV0ZSgpOwoKICAgICAgLy8gVE9ETyAtIHRoaXMgbG9naWMgYXNzdW1lcyBDb250ZW50LURpc3Bvc2l0aW9uIGRlZmF1bHRzCiAgICAgIGNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpOwogICAgICBpZiAoY29udGVudFR5cGUgIT09ICdhcHBsaWNhdGlvbi9zZHAnKSB7CiAgICAgICAgdGhpcy5yZW5kZXJib2R5ID0gcmVxdWVzdC5ib2R5OwogICAgICAgIHRoaXMucmVuZGVydHlwZSA9IGNvbnRlbnRUeXBlOwogICAgICB9CiAgICB9CgogICAgc3dpdGNoKHJlcXVlc3QubWV0aG9kKSB7CiAgICBjYXNlIFNJUC5DLkNBTkNFTDoKICAgICAgLyogUkZDMzI2MSAxNSBTdGF0ZXMgdGhhdCBhIFVBUyBtYXkgaGF2ZSBhY2NlcHRlZCBhbiBpbnZpdGF0aW9uIHdoaWxlIGEgQ0FOQ0VMCiAgICAgICAqIHdhcyBpbiBwcm9ncmVzcyBhbmQgdGhhdCB0aGUgVUFDIE1BWSBjb250aW51ZSB3aXRoIHRoZSBzZXNzaW9uIGVzdGFibGlzaGVkIGJ5CiAgICAgICAqIGFueSAyeHggcmVzcG9uc2UsIG9yIE1BWSB0ZXJtaW5hdGUgd2l0aCBCWUUuIFNJUCBkb2VzIGNvbnRpbnVlIHdpdGggdGhlCiAgICAgICAqIGVzdGFibGlzaGVkIHNlc3Npb24uIFNvIHRoZSBDQU5DRUwgaXMgcHJvY2Vzc2VkIG9ubHkgaWYgdGhlIHNlc3Npb24gaXMgbm90IHlldAogICAgICAgKiBlc3RhYmxpc2hlZC4KICAgICAgICovCgogICAgICAvKgogICAgICAgKiBUZXJtaW5hdGUgdGhlIHdob2xlIHNlc3Npb24gaW4gY2FzZSB0aGUgdXNlciBkaWRuJ3QgYWNjZXB0IChvciB5ZXQgdG8gc2VuZCB0aGUgYW5zd2VyKSBub3IgcmVqZWN0IHRoZQogICAgICAgKnJlcXVlc3Qgb3BlbmluZyB0aGUgc2Vzc2lvbi4KICAgICAgICovCiAgICAgIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIgfHwKICAgICAgICAgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLIHx8CiAgICAgICAgIHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSyB8fAogICAgICAgICB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfRUFSTFlfTUVESUEgfHwKICAgICAgICAgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0FOU1dFUkVEKSB7CgogICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ0FOQ0VMRUQ7CiAgICAgICAgdGhpcy5yZXF1ZXN0LnJlcGx5KDQ4Nyk7CiAgICAgICAgdGhpcy5jYW5jZWxlZChyZXF1ZXN0KTsKICAgICAgICB0aGlzLnJlamVjdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5DQU5DRUxFRCk7CiAgICAgICAgdGhpcy5mYWlsZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkNBTkNFTEVEKTsKICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkNBTkNFTEVEKTsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgU0lQLkMuQUNLOgogICAgICBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICAgICAgaWYgKCF0aGlzLmhhc0Fuc3dlcikgewogICAgICAgICAgaWYocmVxdWVzdC5ib2R5ICYmIHJlcXVlc3QuZ2V0SGVhZGVyKCdjb250ZW50LXR5cGUnKSA9PT0gJ2FwcGxpY2F0aW9uL3NkcCcpIHsKICAgICAgICAgICAgLy8gQUNLIGNvbnRhaW5zIGFuc3dlciB0byBhbiBJTlZJVEUgdy9vIFNEUCBuZWdvdGlhdGlvbgogICAgICAgICAgICBTSVAuSGFja3MuRmlyZWZveC5jYW5ub3RIYW5kbGVFeHRyYVdoaXRlc3BhY2UocmVxdWVzdCk7CiAgICAgICAgICAgIFNJUC5IYWNrcy5BbGxCcm93c2Vycy5tYXNrRHRscyhyZXF1ZXN0KTsKCiAgICAgICAgICAgIHRoaXMuaGFzQW5zd2VyID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5tZWRpYUhhbmRsZXIuc2V0RGVzY3JpcHRpb24ocmVxdWVzdC5ib2R5KQogICAgICAgICAgICAudGhlbigKICAgICAgICAgICAgICBjb25maXJtU2Vzc2lvbi5iaW5kKHRoaXMpLAogICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRmFpbHVyZSAoZSkgewogICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIHRoaXMudGVybWluYXRlKHsKICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogJzQ4OCcsCiAgICAgICAgICAgICAgICAgIHJlYXNvblBocmFzZTogJ0JhZCBNZWRpYSBEZXNjcmlwdGlvbicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5mYWlsZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWFybHlfc2RwKSB7CiAgICAgICAgICAgIGNvbmZpcm1TZXNzaW9uLmFwcGx5KHRoaXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9UT0RPOiBQYXNzIHRvIG1lZGlhaGFuZGxlcgogICAgICAgICAgICB0aGlzLmZhaWxlZChyZXF1ZXN0LCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25maXJtU2Vzc2lvbi5hcHBseSh0aGlzKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlIFNJUC5DLlBSQUNLOgogICAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSykgewogICAgICAgIC8vbG9jYWxNZWRpYSA9IHNlc3Npb24ubWVkaWFIYW5kbGVyLmxvY2FsTWVkaWE7CiAgICAgICAgaWYoIXRoaXMuaGFzQW5zd2VyKSB7CiAgICAgICAgICBpZihyZXF1ZXN0LmJvZHkgJiYgcmVxdWVzdC5nZXRIZWFkZXIoJ2NvbnRlbnQtdHlwZScpID09PSAnYXBwbGljYXRpb24vc2RwJykgewogICAgICAgICAgICB0aGlzLmhhc0Fuc3dlciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnNldERlc2NyaXB0aW9uKHJlcXVlc3QuYm9keSkKICAgICAgICAgICAgLnRoZW4oCiAgICAgICAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzICgpIHsKICAgICAgICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnJlbDF4eFRpbWVyKTsKICAgICAgICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnByYWNrVGltZXIpOwogICAgICAgICAgICAgICAgcmVxdWVzdC5yZXBseSgyMDApOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSykgewogICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0VBUkxZX01FRElBOwogICAgICAgICAgICAgICAgICB0aGlzLmFjY2VwdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgICAgIC8vUkVWSVNJVAogICAgICAgICAgICAgICAgdGhpcy5tdXRlKCk7CiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRmFpbHVyZSAoZSkgewogICAgICAgICAgICAgICAgLy9UT0RPOiBTZW5kIHRvIG1lZGlhIGhhbmRsZXIKICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oZSk7CiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZSh7CiAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6ICc0ODgnLAogICAgICAgICAgICAgICAgICByZWFzb25QaHJhc2U6ICdCYWQgTWVkaWEgRGVzY3JpcHRpb24nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICAgIH0uYmluZCh0aGlzKQogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGUoewogICAgICAgICAgICAgIHN0YXR1c0NvZGU6ICc0ODgnLAogICAgICAgICAgICAgIHJlYXNvblBocmFzZTogJ0JhZCBNZWRpYSBEZXNjcmlwdGlvbicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnJlbDF4eFRpbWVyKTsKICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnByYWNrVGltZXIpOwogICAgICAgICAgcmVxdWVzdC5yZXBseSgyMDApOwoKICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0spIHsKICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgdGhpcy5hY2NlcHQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfRUFSTFlfTUVESUE7CiAgICAgICAgICAvL1JFVklTSVQKICAgICAgICAgIHRoaXMubXV0ZSgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19FQVJMWV9NRURJQSkgewogICAgICAgIHJlcXVlc3QucmVwbHkoMjAwKTsKICAgICAgfQogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIFNlc3Npb24ucHJvdG90eXBlLnJlY2VpdmVSZXF1ZXN0LmFwcGx5KHRoaXMsIFtyZXF1ZXN0XSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0sCgogIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19DT05GSVJNRUQgJiYgdGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgdGhpcy5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogICAgfQogIH0sCgogIG9uUmVxdWVzdFRpbWVvdXQ6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhpcy50ZXJtaW5hdGVkKG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgfQogIH0KCn07CgpTSVAuSW52aXRlU2VydmVyQ29udGV4dCA9IEludml0ZVNlcnZlckNvbnRleHQ7CgpJbnZpdGVDbGllbnRDb250ZXh0ID0gZnVuY3Rpb24odWEsIHRhcmdldCwgb3B0aW9ucykgewogIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNlc3Npb24uZGVzdWdhcihvcHRpb25zKSk7CiAgb3B0aW9ucy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG9wdGlvbnMucGFyYW1zIHx8IE9iamVjdC5wcm90b3R5cGUpOwoKICB2YXIgaWNlU2VydmVycywKICAgIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKSwKICAgIHN0dW5TZXJ2ZXJzID0gb3B0aW9ucy5zdHVuU2VydmVycyB8fCBudWxsLAogICAgdHVyblNlcnZlcnMgPSBvcHRpb25zLnR1cm5TZXJ2ZXJzIHx8IG51bGwsCiAgICBtZWRpYUhhbmRsZXJGYWN0b3J5ID0gb3B0aW9ucy5tZWRpYUhhbmRsZXJGYWN0b3J5IHx8IHVhLmNvbmZpZ3VyYXRpb24ubWVkaWFIYW5kbGVyRmFjdG9yeSwKICAgIGlzTWVkaWFTdXBwb3J0ZWQgPSBtZWRpYUhhbmRsZXJGYWN0b3J5LmlzU3VwcG9ydGVkOwoKICAvLyBDaGVjayBXZWJSVEMgc3VwcG9ydAogIGlmIChpc01lZGlhU3VwcG9ydGVkICYmICFpc01lZGlhU3VwcG9ydGVkKCkpIHsKICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5Ob3RTdXBwb3J0ZWRFcnJvcignTWVkaWEgbm90IHN1cHBvcnRlZCcpOwogIH0KCiAgdGhpcy5SVENDb25zdHJhaW50cyA9IG9wdGlvbnMuUlRDQ29uc3RyYWludHMgfHwge307CiAgdGhpcy5pbnZpdGVXaXRob3V0U2RwID0gb3B0aW9ucy5pbnZpdGVXaXRob3V0U2RwIHx8IGZhbHNlOwoKICAvLyBTZXQgYW5vbnltb3VzIHByb3BlcnR5CiAgdGhpcy5hbm9ueW1vdXMgPSBvcHRpb25zLmFub255bW91cyB8fCBmYWxzZTsKCiAgLy8gQ3VzdG9tIGRhdGEgdG8gYmUgc2VudCBlaXRoZXIgaW4gSU5WSVRFIG9yIGluIEFDSwogIHRoaXMucmVuZGVyYm9keSA9IG9wdGlvbnMucmVuZGVyYm9keSB8fCBudWxsOwogIHRoaXMucmVuZGVydHlwZSA9IG9wdGlvbnMucmVuZGVydHlwZSB8fCAndGV4dC9wbGFpbic7CgogIG9wdGlvbnMucGFyYW1zLmZyb21fdGFnID0gdGhpcy5mcm9tX3RhZzsKCiAgLyogRG8gbm90IGFkZCA7b2IgaW4gaW5pdGlhbCBmb3JtaW5nIGRpYWxvZyByZXF1ZXN0cyBpZiB0aGUgcmVnaXN0cmF0aW9uIG92ZXIKICAgKiAgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBnb3QgYSBHUlVVIFVSSS4KICAgKi8KICB0aGlzLmNvbnRhY3QgPSB1YS5jb250YWN0LnRvU3RyaW5nKHsKICAgIGFub255bW91czogdGhpcy5hbm9ueW1vdXMsCiAgICBvdXRib3VuZDogdGhpcy5hbm9ueW1vdXMgPyAhdWEuY29udGFjdC50ZW1wX2dydXUgOiAhdWEuY29udGFjdC5wdWJfZ3J1dQogIH0pOwoKICBpZiAodGhpcy5hbm9ueW1vdXMpIHsKICAgIG9wdGlvbnMucGFyYW1zLmZyb21fZGlzcGxheU5hbWUgPSAnQW5vbnltb3VzJzsKICAgIG9wdGlvbnMucGFyYW1zLmZyb21fdXJpID0gJ3NpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWQnOwoKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdQLVByZWZlcnJlZC1JZGVudGl0eTogJysgdWEuY29uZmlndXJhdGlvbi51cmkudG9TdHJpbmcoKSk7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnUHJpdmFjeTogaWQnKTsKICB9CiAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgZXh0cmFIZWFkZXJzLnB1c2goJ0FsbG93OiAnKyBTSVAuVUEuQy5BTExPV0VEX01FVEhPRFMudG9TdHJpbmcoKSk7CiAgaWYgKCF0aGlzLmludml0ZVdpdGhvdXRTZHApIHsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCcpOwogIH0gZWxzZSBpZiAodGhpcy5yZW5kZXJib2R5KSB7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgdGhpcy5yZW5kZXJ0eXBlKTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LURpc3Bvc2l0aW9uOiByZW5kZXI7aGFuZGxpbmc9b3B0aW9uYWwnKTsKICB9CgogIGlmICh1YS5jb25maWd1cmF0aW9uLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEKSB7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnUmVxdWlyZTogMTAwcmVsJyk7CiAgfQogIGlmICh1YS5jb25maWd1cmF0aW9uLnJlcGxhY2VzID09PSBTSVAuQy5zdXBwb3J0ZWQuUkVRVUlSRUQpIHsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXF1aXJlOiByZXBsYWNlcycpOwogIH0KCiAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBleHRyYUhlYWRlcnM7CgogIFNJUC5VdGlscy5hdWdtZW50KHRoaXMsIFNJUC5DbGllbnRDb250ZXh0LCBbdWEsIFNJUC5DLklOVklURSwgdGFyZ2V0LCBvcHRpb25zXSk7CiAgU0lQLlV0aWxzLmF1Z21lbnQodGhpcywgU0lQLlNlc3Npb24sIFttZWRpYUhhbmRsZXJGYWN0b3J5XSk7CgogIC8vIENoZWNrIFNlc3Npb24gU3RhdHVzCiAgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19OVUxMKSB7CiAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogIH0KCiAgLy8gU2Vzc2lvbiBwYXJhbWV0ZXIgaW5pdGlhbGl6YXRpb24KICB0aGlzLmZyb21fdGFnID0gU0lQLlV0aWxzLm5ld1RhZygpOwoKICAvLyBPdXRnb2luZ1Nlc3Npb24gc3BlY2lmaWMgcGFyYW1ldGVycwogIHRoaXMuaXNDYW5jZWxlZCA9IGZhbHNlOwogIHRoaXMucmVjZWl2ZWRfMTAwID0gZmFsc2U7CgogIHRoaXMubWV0aG9kID0gU0lQLkMuSU5WSVRFOwoKICB0aGlzLnJlY2VpdmVOb25JbnZpdGVSZXNwb25zZSA9IHRoaXMucmVjZWl2ZVJlc3BvbnNlOwogIHRoaXMucmVjZWl2ZVJlc3BvbnNlID0gdGhpcy5yZWNlaXZlSW52aXRlUmVzcG9uc2U7CgogIHRoaXMubG9nZ2VyID0gdWEuZ2V0TG9nZ2VyKCdzaXAuaW52aXRlY2xpZW50Y29udGV4dCcpOwoKICBpZiAoc3R1blNlcnZlcnMpIHsKICAgIGljZVNlcnZlcnMgPSBTSVAuVUEuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbFsnc3R1blNlcnZlcnMnXShzdHVuU2VydmVycyk7CiAgICBpZiAoIWljZVNlcnZlcnMpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdHVuU2VydmVyczogJysgc3R1blNlcnZlcnMpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5zdHVuU2VydmVycyA9IGljZVNlcnZlcnM7CiAgICB9CiAgfQoKICBpZiAodHVyblNlcnZlcnMpIHsKICAgIGljZVNlcnZlcnMgPSBTSVAuVUEuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbFsndHVyblNlcnZlcnMnXSh0dXJuU2VydmVycyk7CiAgICBpZiAoIWljZVNlcnZlcnMpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0dXJuU2VydmVyczogJysgdHVyblNlcnZlcnMpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50dXJuU2VydmVycyA9IGljZVNlcnZlcnM7CiAgICB9CiAgfQoKICB1YS5hcHBsaWNhbnRzW3RoaXNdID0gdGhpczsKCiAgdGhpcy5pZCA9IHRoaXMucmVxdWVzdC5jYWxsX2lkICsgdGhpcy5mcm9tX3RhZzsKCiAgLy9Jbml0aWFsaXplIE1lZGlhIFNlc3Npb24KICB0aGlzLm1lZGlhSGFuZGxlciA9IHRoaXMubWVkaWFIYW5kbGVyRmFjdG9yeSh0aGlzLCB7CiAgICBSVENDb25zdHJhaW50czogdGhpcy5SVENDb25zdHJhaW50cywKICAgIHN0dW5TZXJ2ZXJzOiB0aGlzLnN0dW5TZXJ2ZXJzLAogICAgdHVyblNlcnZlcnM6IHRoaXMudHVyblNlcnZlcnMKICB9KTsKCiAgaWYgKHRoaXMubWVkaWFIYW5kbGVyICYmIHRoaXMubWVkaWFIYW5kbGVyLmdldFJlbW90ZVN0cmVhbXMpIHsKICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IHRoaXMubWVkaWFIYW5kbGVyLmdldFJlbW90ZVN0cmVhbXMuYmluZCh0aGlzLm1lZGlhSGFuZGxlcik7CiAgICB0aGlzLmdldExvY2FsU3RyZWFtcyA9IHRoaXMubWVkaWFIYW5kbGVyLmdldExvY2FsU3RyZWFtcy5iaW5kKHRoaXMubWVkaWFIYW5kbGVyKTsKICB9CgogIFNJUC5VdGlscy5vcHRpb25zT3ZlcnJpZGUob3B0aW9ucywgJ21lZGlhJywgJ21lZGlhQ29uc3RyYWludHMnLCB0cnVlLCB0aGlzLmxvZ2dlciwgdGhpcy51YS5jb25maWd1cmF0aW9uLm1lZGlhKTsKICB0aGlzLm1lZGlhSGludCA9IG9wdGlvbnMubWVkaWE7Cn07CgpJbnZpdGVDbGllbnRDb250ZXh0LnByb3RvdHlwZSA9IHsKICBpbnZpdGU6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAvL1NhdmUgdGhlIHNlc3Npb24gaW50byB0aGUgdWEgc2Vzc2lvbnMgY29sbGVjdGlvbi4KICAgIC8vTm90ZTogcGxhY2luZyBpbiBjb25zdHJ1Y3RvciBicmVha3MgY2FsbCB0byByZXF1ZXN0LmNhbmNlbCBvbiBjbG9zZS4uLiBVc2VyIGRvZXMgbm90IG5lZWQgdGhpcyBhbnl3YXkKICAgIHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF0gPSB0aGlzOwoKICAgIC8vTm90ZTogZHVlIHRvIHRoZSB3YXkgRmlyZWZveCBoYW5kbGVzIGdVTSBjYWxscywgaXQgaXMgcmVjb21tZW5kZWQgdG8gbWFrZSB0aGUgZ1VNIGNhbGwgYXQgdGhlIGFwcCBsZXZlbAogICAgLy8gYW5kIGhhbmQgc2lwLmpzIGEgc3RyZWFtIGFzIHRoZSBtZWRpYUhpbnQKICAgIGlmICh0aGlzLmludml0ZVdpdGhvdXRTZHApIHsKICAgICAgLy9qdXN0IHNlbmQgYW4gaW52aXRlIHdpdGggbm8gc2RwLi4uCiAgICAgIHRoaXMucmVxdWVzdC5ib2R5ID0gc2VsZi5yZW5kZXJib2R5OwogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0lOVklURV9TRU5UOwogICAgICB0aGlzLnNlbmQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uKHNlbGYubWVkaWFIaW50KQogICAgICAudGhlbigKICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3Mob2ZmZXIpIHsKICAgICAgICAgIGlmIChzZWxmLmlzQ2FuY2VsZWQgfHwgc2VsZi5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgc2VsZi5oYXNPZmZlciA9IHRydWU7CiAgICAgICAgICBzZWxmLnJlcXVlc3QuYm9keSA9IG9mZmVyOwogICAgICAgICAgc2VsZi5zdGF0dXMgPSBDLlNUQVRVU19JTlZJVEVfU0VOVDsKICAgICAgICAgIHNlbGYuc2VuZCgpOwogICAgICAgIH0sCiAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlKCkgewogICAgICAgICAgaWYgKHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIFRPRE8uLi5mYWlsIG91dAogICAgICAgICAgLy9zZWxmLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTKTsKICAgICAgICAgIC8vc2VsZi5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICBzZWxmLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICAgIHNlbGYudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgcmVjZWl2ZUludml0ZVJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdmFyIGNhdXNlLCAvL2xvY2FsTWVkaWEsCiAgICAgIHNlc3Npb24gPSB0aGlzLAogICAgICBpZCA9IHJlc3BvbnNlLmNhbGxfaWQgKyByZXNwb25zZS5mcm9tX3RhZyArIHJlc3BvbnNlLnRvX3RhZywKICAgICAgZXh0cmFIZWFkZXJzID0gW10sCiAgICAgIG9wdGlvbnMgPSB7fTsKCiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQgfHwgcmVzcG9uc2UubWV0aG9kICE9PSBTSVAuQy5JTlZJVEUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh0aGlzLmRpYWxvZyAmJiAocmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDw9IDI5OSkpIHsKICAgICAgaWYgKGlkICE9PSB0aGlzLmRpYWxvZy5pZC50b1N0cmluZygpICkgewogICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnLCB0cnVlKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZF0uc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuQUNLLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogU0lQLlV0aWxzLmdlbmVyYXRlRmFrZVNEUChyZXNwb25zZS5ib2R5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZF0uc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuQllFKTsKCiAgICAgICAgLyogTk9URTogVGhpcyBmYWlscyBiZWNhdXNlIHRoZSBmb3JraW5nIHByb3h5IGRvZXMgbm90IHJlY29nbml6ZSB0aGF0IGFuIHVuYW5zd2VyYWJsZQogICAgICAgICAqIGxlZyAoZHVlIHRvIHBlZXJDb25uZWN0aW9uIGxpbWl0YXRpb25zKSBoYXMgYmVlbiBhbnN3ZXJlZCBmaXJzdC4gSWYgeW91ciBmb3JraW5nCiAgICAgICAgICogcHJveHkgZG9lcyBub3QgaGFuZyB1cCBhbGwgdW5hbnN3ZXJlZCBicmFuY2hlcyBvbiB0aGUgZmlyc3QgYnJhbmNoIGFuc3dlcmVkLCByZW1vdmUgdGhpcy4KICAgICAgICAgKi8KICAgICAgICBpZih0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgICAgICB0aGlzLmZhaWxlZChyZXNwb25zZSwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5XRUJSVENfRVJST1IpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoU0lQLkMuQUNLLHtjc2VxOiByZXNwb25zZS5jc2VxfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc0Fuc3dlcikgewogICAgICAgIC8vIGludml0ZSB3L28gc2RwIGlzIHdhaXRpbmcgZm9yIGNhbGxiYWNrCiAgICAgICAgLy9hbiBpbnZpdGUgd2l0aCBzZHAgbXVzdCBnbyBvbiwgYW5kIGhhc0Fuc3dlciBpcyB0cnVlCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CgogICAgaWYgKHRoaXMuZGlhbG9nICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDwgMjAwKSB7CiAgICAgIC8qCiAgICAgICAgRWFybHkgbWVkaWEgaGFzIGJlZW4gc2V0IHVwIHdpdGggYXQgbGVhc3Qgb25lIG90aGVyIGRpZmZlcmVudCBicmFuY2gsCiAgICAgICAgYnV0IGEgZmluYWwgMnh4IHJlc3BvbnNlIGhhc24ndCBiZWVuIHJlY2VpdmVkCiAgICAgICovCiAgICAgIGlmICh0aGlzLmRpYWxvZy5wcmFja2VkLmluZGV4T2YocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpICE9PSAtMSB8fAogICAgICAgICAgKHRoaXMuZGlhbG9nLnByYWNrZWRbdGhpcy5kaWFsb2cucHJhY2tlZC5sZW5ndGgtMV0gPj0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgJiYgdGhpcy5kaWFsb2cucHJhY2tlZC5sZW5ndGggPiAwKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmVhcmx5RGlhbG9nc1tpZF0gJiYgIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJywgdHJ1ZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5pbmRleE9mKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKSAhPT0gLTEgfHwKICAgICAgICAgICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZFt0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5sZW5ndGgtMV0gPj0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgJiYgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQubGVuZ3RoID4gMCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSQWNrOiAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgKyAnICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ2NzZXEnKSk7CiAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLnB1c2gocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpOwoKICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnNlbmRSZXF1ZXN0KHRoaXMsIFNJUC5DLlBSQUNLLCB7CiAgICAgICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICAgICAgYm9keTogU0lQLlV0aWxzLmdlbmVyYXRlRmFrZVNEUChyZXNwb25zZS5ib2R5KQogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFByb2NlZWQgdG8gY2FuY2VsbGF0aW9uIGlmIHRoZSB1c2VyIHJlcXVlc3RlZC4KICAgIGlmKHRoaXMuaXNDYW5jZWxlZCkgewogICAgICBpZihyZXNwb25zZS5zdGF0dXNfY29kZSA+PSAxMDAgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPCAyMDApIHsKICAgICAgICB0aGlzLnJlcXVlc3QuY2FuY2VsKHRoaXMuY2FuY2VsUmVhc29uKTsKICAgICAgICB0aGlzLmNhbmNlbGVkKG51bGwpOwogICAgICB9IGVsc2UgaWYocmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDwgMjk5KSB7CiAgICAgICAgdGhpcy5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UpOwogICAgICAgIHRoaXMuZW1pdCgnYnllJywgdGhpcy5yZXF1ZXN0KTsKICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXNfY29kZSA+PSAzMDApIHsKICAgICAgICBjYXVzZSA9IFNJUC5DLlJFQVNPTl9QSFJBU0VbcmVzcG9uc2Uuc3RhdHVzX2NvZGVdIHx8IFNJUC5DLmNhdXNlcy5DQU5DRUxFRDsKICAgICAgICB0aGlzLnJlamVjdGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIGNhdXNlKTsKICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVzcG9uc2UsIGNhdXNlKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CgogICAgc3dpdGNoKHRydWUpIHsKICAgICAgY2FzZSAvXjEwMCQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgIHRoaXMucmVjZWl2ZWRfMTAwID0gdHJ1ZTsKICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICgvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpKToKICAgICAgICAvLyBEbyBub3RoaW5nIHdpdGggMXh4IHJlc3BvbnNlcyB3aXRob3V0IFRvIHRhZy4KICAgICAgICBpZighcmVzcG9uc2UudG9fdGFnKSB7CiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCcxeHggcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCB0byB0YWcnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgLy8gQ3JlYXRlIEVhcmx5IERpYWxvZyBpZiAxWFggY29tZXMgd2l0aCBjb250YWN0CiAgICAgICAgaWYocmVzcG9uc2UuaGFzSGVhZGVyKCdjb250YWN0JykpIHsKICAgICAgICAgIC8vIEFuIGVycm9yIG9uIGRpYWxvZyBjcmVhdGlvbiB3aWxsIGZpcmUgJ2ZhaWxlZCcgZXZlbnQKICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnLCB0cnVlKSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfMVhYX1JFQ0VJVkVEOwoKICAgICAgICBpZihyZXNwb25zZS5oYXNIZWFkZXIoJ3JlcXVpcmUnKSAmJgogICAgICAgICAgIHJlc3BvbnNlLmdldEhlYWRlcigncmVxdWlyZScpLmluZGV4T2YoJzEwMHJlbCcpICE9PSAtMSkgewoKICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhpcy5kaWFsb2cgaXMgYWxyZWFkeSBjb25maXJtZWQKICAgICAgICAgIGlmICh0aGlzLmRpYWxvZyB8fCAhdGhpcy5lYXJseURpYWxvZ3NbaWRdKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5pbmRleE9mKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKSAhPT0gLTEgfHwKICAgICAgICAgICAgICAodGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWRbdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQubGVuZ3RoLTFdID49IHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpICYmIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBTSVAuSGFja3MuRmlyZWZveC5jYW5ub3RIYW5kbGVFeHRyYVdoaXRlc3BhY2UocmVzcG9uc2UpOwogICAgICAgICAgU0lQLkhhY2tzLkFsbEJyb3dzZXJzLm1hc2tEdGxzKHJlc3BvbnNlKTsKCiAgICAgICAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JBY2s6ICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSArICcgJyArIHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKTsKICAgICAgICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CiAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5zZW5kUmVxdWVzdCh0aGlzLCBTSVAuQy5QUkFDSywgewogICAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwoKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNPZmZlcikgewogICAgICAgICAgICBpZiAoIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJykpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmhhc0Fuc3dlciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CgogICAgICAgICAgICB0aGlzLm1lZGlhSGFuZGxlci5zZXREZXNjcmlwdGlvbihyZXNwb25zZS5ib2R5KQogICAgICAgICAgICAudGhlbigKICAgICAgICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MgKCkgewogICAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JBY2s6ICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSArICcgJyArIHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKTsKCiAgICAgICAgICAgICAgICBzZXNzaW9uLnNlbmRSZXF1ZXN0KFNJUC5DLlBSQUNLLCB7CiAgICAgICAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzLAogICAgICAgICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgICAgIHNlc3Npb24ubXV0ZSgpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdGF0dXMgPT09IEMuU1RBVFVTX0VBUkxZX01FRElBKSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEgPSBzZXNzaW9uLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhOwogICAgICAgICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0qLwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlIChlKSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uLmxvZ2dlci53YXJuKGUpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UsIDQ4OCwgJ05vdCBBY2NlcHRhYmxlIEhlcmUnKTsKICAgICAgICAgICAgICAgIHNlc3Npb24uZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgZWFybHlEaWFsb2cgPSB0aGlzLmVhcmx5RGlhbG9nc1tpZF07CiAgICAgICAgICAgIHZhciBlYXJseU1lZGlhID0gZWFybHlEaWFsb2cubWVkaWFIYW5kbGVyOwoKICAgICAgICAgICAgZWFybHlEaWFsb2cucHJhY2tlZC5wdXNoKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKTsKCiAgICAgICAgICAgIGVhcmx5TWVkaWEuc2V0RGVzY3JpcHRpb24ocmVzcG9uc2UuYm9keSkKICAgICAgICAgICAgLnRoZW4oZWFybHlNZWRpYS5nZXREZXNjcmlwdGlvbi5iaW5kKGVhcmx5TWVkaWEsIHNlc3Npb24ubWVkaWFIaW50KSkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gb25TdWNjZXNzKHNkcCkgewogICAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCcpOwogICAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSQWNrOiAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgKyAnICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ2NzZXEnKSk7CiAgICAgICAgICAgICAgZWFybHlEaWFsb2cuc2VuZFJlcXVlc3Qoc2Vzc2lvbiwgU0lQLkMuUFJBQ0ssIHsKICAgICAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzLAogICAgICAgICAgICAgICAgYm9keTogc2RwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2Vzc2lvbi5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgICBzZXNzaW9uLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gb25GYWlsdXJlKGUpIHsKICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNJUC5FeGNlcHRpb25zLkdldERlc2NyaXB0aW9uRXJyb3IpIHsKICAgICAgICAgICAgICAgIGVhcmx5RGlhbG9nLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gVE9ETyAtIGZhaWwgb3V0IG9uIGVycm9yCiAgICAgICAgICAgICAgICAvLyBzZXNzaW9uLmZhaWxlZChndW0gZXJyb3IpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICAgICAgICBzZXNzaW9uLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVhcmx5RGlhbG9nLnByYWNrZWQuc3BsaWNlKGVhcmx5RGlhbG9nLnByYWNrZWQuaW5kZXhPZihyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSksIDEpOwogICAgICAgICAgICAgICAgLy8gQ291bGQgbm90IHNldCByZW1vdGUgZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgIHNlc3Npb24ubG9nZ2VyLndhcm4oJ2ludmFsaWQgU0RQJyk7CiAgICAgICAgICAgICAgICBzZXNzaW9uLmxvZ2dlci53YXJuKGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXNwb25zZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgdmFyIGNzZXEgPSB0aGlzLnJlcXVlc3QuY3NlcSArICcgJyArIHRoaXMucmVxdWVzdC5tZXRob2Q7CiAgICAgICAgaWYgKGNzZXEgIT09IHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfRUFSTFlfTUVESUEgJiYgdGhpcy5kaWFsb2cpIHsKICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgdGhpcy51bm11dGUoKTsKICAgICAgICAgIC8qbG9jYWxNZWRpYSA9IHRoaXMubWVkaWFIYW5kbGVyLmxvY2FsTWVkaWE7CiAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgbG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgIH0qLwogICAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICAgICAgaWYgKHRoaXMucmVuZGVyYm9keSkgewogICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgdGhpcy5yZW5kZXJ0eXBlKTsKICAgICAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBleHRyYUhlYWRlcnM7CiAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IHRoaXMucmVuZGVyYm9keTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGlvbnMuY3NlcSA9IHJlc3BvbnNlLmNzZXE7CiAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSywgb3B0aW9ucyk7CiAgICAgICAgICB0aGlzLmFjY2VwdGVkKHJlc3BvbnNlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoaXMuZGlhbG9nIGlzIGFscmVhZHkgY29uZmlybWVkCiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIFNJUC5IYWNrcy5GaXJlZm94LmNhbm5vdEhhbmRsZUV4dHJhV2hpdGVzcGFjZShyZXNwb25zZSk7CiAgICAgICAgU0lQLkhhY2tzLkFsbEJyb3dzZXJzLm1hc2tEdGxzKHJlc3BvbnNlKTsKCiAgICAgICAgLy8gVGhpcyBpcyBhbiBpbnZpdGUgd2l0aG91dCBzZHAKICAgICAgICBpZiAoIXRoaXMuaGFzT2ZmZXIpIHsKICAgICAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0gJiYgdGhpcy5lYXJseURpYWxvZ3NbaWRdLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhKSB7CiAgICAgICAgICAgIC8vUkVWSVNJVAogICAgICAgICAgICB0aGlzLmhhc09mZmVyID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5oYXNBbnN3ZXIgPSB0cnVlOwogICAgICAgICAgICB0aGlzLm1lZGlhSGFuZGxlciA9IHRoaXMuZWFybHlEaWFsb2dzW2lkXS5tZWRpYUhhbmRsZXI7CiAgICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnKSkgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSywge2NzZXE6cmVzcG9uc2UuY3NlcX0pOwoKICAgICAgICAgICAgdGhpcy51bm11dGUoKTsKICAgICAgICAgICAgLyoKICAgICAgICAgICAgbG9jYWxNZWRpYSA9IHNlc3Npb24ubWVkaWFIYW5kbGVyLmxvY2FsTWVkaWE7CiAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBsb2NhbE1lZGlhLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0qLwogICAgICAgICAgICB0aGlzLmFjY2VwdGVkKHJlc3BvbnNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmKCFyZXNwb25zZS5ib2R5KSB7CiAgICAgICAgICAgICAgdGhpcy5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UsIDQwMCwgJ01pc3Npbmcgc2Vzc2lvbiBkZXNjcmlwdGlvbicpOwogICAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJykpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmhhc09mZmVyID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5tZWRpYUhhbmRsZXIuc2V0RGVzY3JpcHRpb24ocmVzcG9uc2UuYm9keSkKICAgICAgICAgICAgLnRoZW4odGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24uYmluZCh0aGlzLm1lZGlhSGFuZGxlciwgdGhpcy5tZWRpYUhpbnQpKQogICAgICAgICAgICAudGhlbihmdW5jdGlvbiBvblN1Y2Nlc3Moc2RwKSB7CiAgICAgICAgICAgICAgLy92YXIgbG9jYWxNZWRpYTsKICAgICAgICAgICAgICBpZihzZXNzaW9uLmlzQ2FuY2VsZWQgfHwgc2Vzc2lvbi5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNkcCA9IFNJUC5IYWNrcy5GaXJlZm94Lmhhc01pc3NpbmdDTGluZUluU0RQKHNkcCk7CgogICAgICAgICAgICAgIHNlc3Npb24uc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgICAgIHNlc3Npb24uaGFzQW5zd2VyID0gdHJ1ZTsKCiAgICAgICAgICAgICAgc2Vzc2lvbi51bm11dGUoKTsKICAgICAgICAgICAgICAvKmxvY2FsTWVkaWEgPSBzZXNzaW9uLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhOwogICAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9Ki8KICAgICAgICAgICAgICBzZXNzaW9uLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSyx7CiAgICAgICAgICAgICAgICBib2R5OiBzZHAsCiAgICAgICAgICAgICAgICBleHRyYUhlYWRlcnM6WydDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCddLAogICAgICAgICAgICAgICAgY3NlcTpyZXNwb25zZS5jc2VxCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2Vzc2lvbi5hY2NlcHRlZChyZXNwb25zZSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiBvbkZhaWx1cmUoZSkgewogICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0lQLkV4Y2VwdGlvbnMuR2V0RGVzY3JpcHRpb25FcnJvcikgewogICAgICAgICAgICAgICAgLy8gVE9ETyBkbyBzb21ldGhpbmcgaGVyZQogICAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dnZXIud2FybigidGhlcmUgd2FzIGEgcHJvYmxlbSIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uLmxvZ2dlci53YXJuKCdpbnZhbGlkIFNEUCcpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlcGx5KDQ4OCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzQW5zd2VyKXsKICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmJvZHkpIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRlbnQtVHlwZTogJyArIHNlc3Npb24ucmVuZGVydHlwZSk7CiAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwogICAgICAgICAgICBvcHRpb25zLmJvZHkgPSB0aGlzLnJlbmRlcmJvZHk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSywgb3B0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmKCFyZXNwb25zZS5ib2R5KSB7CiAgICAgICAgICAgIHRoaXMuYWNjZXB0QW5kVGVybWluYXRlKHJlc3BvbnNlLCA0MDAsICdNaXNzaW5nIHNlc3Npb24gZGVzY3JpcHRpb24nKTsKICAgICAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnKSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaGFzQW5zd2VyID0gdHJ1ZTsKICAgICAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnNldERlc2NyaXB0aW9uKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgICAudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzICgpIHsKICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9Oy8vLGxvY2FsTWVkaWE7CiAgICAgICAgICAgICAgc2Vzc2lvbi5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CiAgICAgICAgICAgICAgc2Vzc2lvbi51bm11dGUoKTsKICAgICAgICAgICAgICAvKmxvY2FsTWVkaWEgPSBzZXNzaW9uLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhOwogICAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9Ki8KICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5yZW5kZXJib2R5KSB7CiAgICAgICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgc2Vzc2lvbi5yZW5kZXJ0eXBlKTsKICAgICAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwogICAgICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gc2Vzc2lvbi5yZW5kZXJib2R5OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBvcHRpb25zLmNzZXEgPSByZXNwb25zZS5jc2VxOwogICAgICAgICAgICAgIHNlc3Npb24uc2VuZFJlcXVlc3QoU0lQLkMuQUNLLCBvcHRpb25zKTsKICAgICAgICAgICAgICBzZXNzaW9uLmFjY2VwdGVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlIChlKSB7CiAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICBzZXNzaW9uLmFjY2VwdEFuZFRlcm1pbmF0ZShyZXNwb25zZSwgNDg4LCAnTm90IEFjY2VwdGFibGUgSGVyZScpOwogICAgICAgICAgICAgIHNlc3Npb24uZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgfQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgY2F1c2UgPSBTSVAuVXRpbHMuc2lwRXJyb3JDYXVzZShyZXNwb25zZS5zdGF0dXNfY29kZSk7CiAgICAgICAgdGhpcy5yZWplY3RlZChyZXNwb25zZSwgY2F1c2UpOwogICAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICB9CiAgfSwKCiAgY2FuY2VsOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICB0aGlzLmxvZ2dlci5sb2coJ2NhbmNlbGluZyBSVENTZXNzaW9uJyk7CgogICAgdmFyIGNhbmNlbF9yZWFzb24gPSBTSVAuVXRpbHMuZ2V0Q2FuY2VsUmVhc29uKG9wdGlvbnMuc3RhdHVzX2NvZGUsIG9wdGlvbnMucmVhc29uX3BocmFzZSk7CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfTlVMTCB8fAogICAgICAgICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfSU5WSVRFX1NFTlQgJiYgIXRoaXMucmVjZWl2ZWRfMTAwKSkgewogICAgICB0aGlzLmlzQ2FuY2VsZWQgPSB0cnVlOwogICAgICB0aGlzLmNhbmNlbFJlYXNvbiA9IGNhbmNlbF9yZWFzb247CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19JTlZJVEVfU0VOVCB8fAogICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfMVhYX1JFQ0VJVkVEIHx8CiAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19FQVJMWV9NRURJQSkgewogICAgICB0aGlzLnJlcXVlc3QuY2FuY2VsKGNhbmNlbF9yZWFzb24pOwogICAgfQoKICAgIHJldHVybiB0aGlzLmNhbmNlbGVkKCk7CiAgfSwKCiAgdGVybWluYXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0sgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aGlzLmJ5ZShvcHRpb25zKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2FuY2VsKG9wdGlvbnMpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIHJlY2VpdmVSZXF1ZXN0OiBmdW5jdGlvbihyZXF1ZXN0KSB7CiAgICAvLyBJQ0MgUkVDRUlWRSBSRVFVRVNUCgogICAgLy8gUmVqZWN0IENBTkNFTHMKICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gU0lQLkMuQ0FOQ0VMKSB7CiAgICAgIC8vIFRPRE87IG1ha2UgdGhpcyBhIHN3aXRjaCB3aGVuIGl0IGdldHMgYWRkZWQKICAgIH0KCiAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IFNJUC5DLkFDSyAmJiB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmFja1RpbWVyKTsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuaW52aXRlMnh4VGltZXIpOwogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0NPTkZJUk1FRDsKICAgICAgdGhpcy51bm11dGUoKTsKCiAgICAgIHRoaXMuYWNjZXB0ZWQoKTsKICAgIH0KCiAgICByZXR1cm4gU2Vzc2lvbi5wcm90b3R5cGUucmVjZWl2ZVJlcXVlc3QuYXBwbHkodGhpcywgW3JlcXVlc3RdKTsKICB9LAoKICBvblRyYW5zcG9ydEVycm9yOiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIFNJUC5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKTsKICAgIH0KICB9LAoKICBvblJlcXVlc3RUaW1lb3V0OiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgdGhpcy5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH0KICB9Cgp9OwoKU0lQLkludml0ZUNsaWVudENvbnRleHQgPSBJbnZpdGVDbGllbnRDb250ZXh0OwoKfTsKCn0seyIuL1Nlc3Npb24vRFRNRiI6Mjh9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgRFRNRgogKi8KCi8qKgogKiBAY2xhc3MgRFRNRgogKiBAcGFyYW0ge1NJUC5TZXNzaW9ufSBzZXNzaW9uCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKCnZhciBEVE1GLAogIEMgPSB7CiAgICBNSU5fRFVSQVRJT046ICAgICAgICAgICAgNzAsCiAgICBNQVhfRFVSQVRJT046ICAgICAgICAgICAgNjAwMCwKICAgIERFRkFVTFRfRFVSQVRJT046ICAgICAgICAxMDAsCiAgICBNSU5fSU5URVJfVE9ORV9HQVA6ICAgICAgNTAsCiAgICBERUZBVUxUX0lOVEVSX1RPTkVfR0FQOiAgNTAwCiAgfTsKCkRUTUYgPSBmdW5jdGlvbihzZXNzaW9uLCB0b25lLCBvcHRpb25zKSB7CiAgdmFyIGR1cmF0aW9uLCBpbnRlclRvbmVHYXA7CgogIGlmICh0b25lID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggYXJndW1lbnRzJyk7CiAgfQoKICB0aGlzLmxvZ2dlciA9IHNlc3Npb24udWEuZ2V0TG9nZ2VyKCdzaXAuaW52aXRlY29udGV4dC5kdG1mJywgc2Vzc2lvbi5pZCk7CiAgdGhpcy5vd25lciA9IHNlc3Npb247CiAgdGhpcy5kaXJlY3Rpb24gPSBudWxsOwoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gfHwgbnVsbDsKICBpbnRlclRvbmVHYXAgPSBvcHRpb25zLmludGVyVG9uZUdhcCB8fCBudWxsOwoKICAvLyBDaGVjayB0b25lIHR5cGUKICBpZiAodHlwZW9mIHRvbmUgPT09ICdzdHJpbmcnICkgewogICAgdG9uZSA9IHRvbmUudG9VcHBlckNhc2UoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiB0b25lID09PSAnbnVtYmVyJykgewogICAgdG9uZSA9IHRvbmUudG9TdHJpbmcoKTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0b25lOiAnKyB0b25lKTsKICB9CgogIC8vIENoZWNrIHRvbmUgdmFsdWUKICBpZiAoIXRvbmUubWF0Y2goL15bMC05QS1EIypdJC8pKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRvbmU6ICcrIHRvbmUpOwogIH0gZWxzZSB7CiAgICB0aGlzLnRvbmUgPSB0b25lOwogIH0KCiAgLy8gQ2hlY2sgZHVyYXRpb24KICBpZiAoZHVyYXRpb24gJiYgIVNJUC5VdGlscy5pc0RlY2ltYWwoZHVyYXRpb24pKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRvbmUgZHVyYXRpb246ICcrIGR1cmF0aW9uKTsKICB9IGVsc2UgaWYgKCFkdXJhdGlvbikgewogICAgZHVyYXRpb24gPSBEVE1GLkMuREVGQVVMVF9EVVJBVElPTjsKICB9IGVsc2UgaWYgKGR1cmF0aW9uIDwgRFRNRi5DLk1JTl9EVVJBVElPTikgewogICAgdGhpcy5sb2dnZXIud2FybignImR1cmF0aW9uIiB2YWx1ZSBpcyBsb3dlciB0aGFuIHRoZSBtaW5pbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJysgRFRNRi5DLk1JTl9EVVJBVElPTisgJyBtaWxsaXNlY29uZHMnKTsKICAgIGR1cmF0aW9uID0gRFRNRi5DLk1JTl9EVVJBVElPTjsKICB9IGVsc2UgaWYgKGR1cmF0aW9uID4gRFRNRi5DLk1BWF9EVVJBVElPTikgewogICAgdGhpcy5sb2dnZXIud2FybignImR1cmF0aW9uIiB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gdGhlIG1heGltdW0gYWxsb3dlZCwgc2V0dGluZyBpdCB0byAnKyBEVE1GLkMuTUFYX0RVUkFUSU9OICsnIG1pbGxpc2Vjb25kcycpOwogICAgZHVyYXRpb24gPSBEVE1GLkMuTUFYX0RVUkFUSU9OOwogIH0gZWxzZSB7CiAgICBkdXJhdGlvbiA9IE1hdGguYWJzKGR1cmF0aW9uKTsKICB9CiAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uOwoKICAvLyBDaGVjayBpbnRlclRvbmVHYXAKICBpZiAoaW50ZXJUb25lR2FwICYmICFTSVAuVXRpbHMuaXNEZWNpbWFsKGludGVyVG9uZUdhcCkpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaW50ZXJUb25lR2FwOiAnKyBpbnRlclRvbmVHYXApOwogIH0gZWxzZSBpZiAoIWludGVyVG9uZUdhcCkgewogICAgaW50ZXJUb25lR2FwID0gRFRNRi5DLkRFRkFVTFRfSU5URVJfVE9ORV9HQVA7CiAgfSBlbHNlIGlmIChpbnRlclRvbmVHYXAgPCBEVE1GLkMuTUlOX0lOVEVSX1RPTkVfR0FQKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCciaW50ZXJUb25lR2FwIiB2YWx1ZSBpcyBsb3dlciB0aGFuIHRoZSBtaW5pbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJysgRFRNRi5DLk1JTl9JTlRFUl9UT05FX0dBUCArJyBtaWxsaXNlY29uZHMnKTsKICAgIGludGVyVG9uZUdhcCA9IERUTUYuQy5NSU5fSU5URVJfVE9ORV9HQVA7CiAgfSBlbHNlIHsKICAgIGludGVyVG9uZUdhcCA9IE1hdGguYWJzKGludGVyVG9uZUdhcCk7CiAgfQogIHRoaXMuaW50ZXJUb25lR2FwID0gaW50ZXJUb25lR2FwOwp9OwpEVE1GLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU0lQLkV2ZW50RW1pdHRlci5wcm90b3R5cGUpOwoKCkRUTUYucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdmFyIGV4dHJhSGVhZGVycywgYm9keTsKCiAgdGhpcy5kaXJlY3Rpb24gPSAnb3V0Z29pbmcnOwoKICAvLyBDaGVjayBSVENTZXNzaW9uIFN0YXR1cwogIGlmICh0aGlzLm93bmVyLnN0YXR1cyAhPT0gU0lQLlNlc3Npb24uQy5TVEFUVVNfQ09ORklSTUVEICYmCiAgICB0aGlzLm93bmVyLnN0YXR1cyAhPT0gU0lQLlNlc3Npb24uQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5vd25lci5zdGF0dXMpOwogIH0KCiAgLy8gR2V0IERUTUYgb3B0aW9ucwogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogIGV4dHJhSGVhZGVycyA9IG9wdGlvbnMuZXh0cmFIZWFkZXJzID8gb3B0aW9ucy5leHRyYUhlYWRlcnMuc2xpY2UoKSA6IFtdOwoKICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9kdG1mLXJlbGF5Jyk7CgogIGJvZHkgPSAiU2lnbmFsPSAiICsgdGhpcy50b25lICsgIlxyXG4iOwogIGJvZHkgKz0gIkR1cmF0aW9uPSAiICsgdGhpcy5kdXJhdGlvbjsKCiAgdGhpcy5yZXF1ZXN0ID0gdGhpcy5vd25lci5kaWFsb2cuc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuSU5GTywgewogICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICBib2R5OiBib2R5CiAgfSk7CgogIHRoaXMub3duZXIuZW1pdCgnZHRtZicsIHRoaXMucmVxdWVzdCwgdGhpcyk7Cn07CgovKioKICogQHByaXZhdGUKICovCkRUTUYucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgdmFyIGNhdXNlOwoKICBzd2l0Y2godHJ1ZSkgewogICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAvLyBJZ25vcmUgcHJvdmlzaW9uYWwgcmVzcG9uc2VzLgogICAgICBicmVhazsKCiAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgIHRoaXMuZW1pdCgnc3VjY2VlZGVkJywgewogICAgICAgIG9yaWdpbmF0b3I6ICdyZW1vdGUnLAogICAgICAgIHJlc3BvbnNlOiByZXNwb25zZQogICAgICB9KTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgY2F1c2UgPSBTSVAuVXRpbHMuc2lwRXJyb3JDYXVzZShyZXNwb25zZS5zdGF0dXNfY29kZSk7CiAgICAgIHRoaXMuZW1pdCgnZmFpbGVkJywgcmVzcG9uc2UsIGNhdXNlKTsKICAgICAgYnJlYWs7CiAgfQp9OwoKLyoqCiAqIEBwcml2YXRlCiAqLwpEVE1GLnByb3RvdHlwZS5vblJlcXVlc3RUaW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5lbWl0KCdmYWlsZWQnLCBudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICB0aGlzLm93bmVyLm9uUmVxdWVzdFRpbWVvdXQoKTsKfTsKCi8qKgogKiBAcHJpdmF0ZQogKi8KRFRNRi5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvciA9IGZ1bmN0aW9uKCkgewogIHRoaXMuZW1pdCgnZmFpbGVkJywgbnVsbCwgU0lQLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogIHRoaXMub3duZXIub25UcmFuc3BvcnRFcnJvcigpOwp9OwoKLyoqCiAqIEBwcml2YXRlCiAqLwpEVE1GLnByb3RvdHlwZS5vbkRpYWxvZ0Vycm9yID0gZnVuY3Rpb24ocmVzcG9uc2UpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuRElBTE9HX0VSUk9SKTsKICB0aGlzLm93bmVyLm9uRGlhbG9nRXJyb3IocmVzcG9uc2UpOwp9OwoKLyoqCiAqIEBwcml2YXRlCiAqLwpEVE1GLnByb3RvdHlwZS5pbml0X2luY29taW5nID0gZnVuY3Rpb24ocmVxdWVzdCkgewogIHRoaXMuZGlyZWN0aW9uID0gJ2luY29taW5nJzsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwoKICByZXF1ZXN0LnJlcGx5KDIwMCk7CgogIGlmICghdGhpcy50b25lIHx8ICF0aGlzLmR1cmF0aW9uKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCdpbnZhbGlkIElORk8gRFRNRiByZWNlaXZlZCwgZGlzY2FyZGVkJyk7CiAgfSBlbHNlIHsKICAgIHRoaXMub3duZXIuZW1pdCgnZHRtZicsIHJlcXVlc3QsIHRoaXMpOwogIH0KfTsKCkRUTUYuQyA9IEM7CnJldHVybiBEVE1GOwp9OwoKfSx7fV0sMjk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgovKioKICogQGZpbGVvdmVydmlldyBTSVAgU3Vic2NyaWJlciAoU0lQLVNwZWNpZmljIEV2ZW50IE5vdGlmaWNhdGlvbnMgUkZDNjY2NSkKICovCgovKioKICogQGF1Z21lbnRzIFNJUAogKiBAY2xhc3MgQ2xhc3MgY3JlYXRpbmcgYSBTSVAgU3Vic2NyaXB0aW9uLgogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7ClNJUC5TdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAodWEsIHRhcmdldCwgZXZlbnQsIG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIHRoaXMuZXh0cmFIZWFkZXJzID0gb3B0aW9ucy5leHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CgogIHRoaXMuaWQgPSBudWxsOwogIHRoaXMuc3RhdGUgPSAnaW5pdCc7CgogIGlmICghZXZlbnQpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V2ZW50IG5lY2Vzc2FyeSB0byBjcmVhdGUgYSBzdWJzY3JpcHRpb24uJyk7CiAgfSBlbHNlIHsKICAgIC8vVE9ETzogY2hlY2sgZm9yIHZhbGlkIGV2ZW50cyBoZXJlIHByb2JhYmx5IG1ha2UgYSBsaXN0IGluIFNJUC5DOyBvciBsZWF2ZSBpdCB1cCB0byBhcHAgdG8gY2hlY2s/CiAgICAvL1RoZSBjaGVjayBtYXkgbmVlZCB0by9zaG91bGQgcHJvYmFibHkgb2NjdXIgb24gdGhlIG90aGVyIHNpZGUsCiAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7CiAgfQoKICBpZih0eXBlb2Ygb3B0aW9ucy5leHBpcmVzICE9PSAnbnVtYmVyJyl7CiAgICB1YS5sb2dnZXIud2FybignZXhwaXJlcyBtdXN0IGJlIGEgbnVtYmVyLiBVc2luZyBkZWZhdWx0IG9mIDM2MDAuJyk7CiAgICB0aGlzLmV4cGlyZXMgPSAzNjAwOwogIH0gZWxzZSB7CiAgICB0aGlzLmV4cGlyZXMgPSBvcHRpb25zLmV4cGlyZXM7CiAgfQoKICBvcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKCdFdmVudDogJyArIHRoaXMuZXZlbnQpOwogIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goJ0V4cGlyZXM6ICcgKyB0aGlzLmV4cGlyZXMpOwoKICBpZiAob3B0aW9ucy5ib2R5KSB7CiAgICB0aGlzLmJvZHkgPSBvcHRpb25zLmJvZHk7CiAgfQoKICB0aGlzLmNvbnRhY3QgPSB1YS5jb250YWN0LnRvU3RyaW5nKCk7CgogIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcrIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKCiAgU0lQLlV0aWxzLmF1Z21lbnQodGhpcywgU0lQLkNsaWVudENvbnRleHQsIFt1YSwgU0lQLkMuU1VCU0NSSUJFLCB0YXJnZXQsIG9wdGlvbnNdKTsKCiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5zdWJzY3JpcHRpb24nKTsKCiAgdGhpcy5kaWFsb2cgPSBudWxsOwogIHRoaXMudGltZXJzID0ge046IG51bGwsIHN1Yl9kdXJhdGlvbjogbnVsbH07CiAgdGhpcy5lcnJvckNvZGVzICA9IFs0MDQsNDA1LDQxMCw0MTYsNDgwLDQ4MSw0ODIsNDgzLDQ4NCw0ODUsNDg5LDUwMSw2MDRdOwp9OwoKU0lQLlN1YnNjcmlwdGlvbi5wcm90b3R5cGUgPSB7CiAgc3Vic2NyaWJlOiBmdW5jdGlvbigpIHsKICAgIHZhciBzdWIgPSB0aGlzOwoKICAgICAvL3RoZXNlIHN0YXRlcyBwb2ludCB0byBhbiBleGlzdGluZyBzdWJzY3JpcHRpb24sIG5vIHN1YnNjcmliZSBpcyBuZWNlc3NhcnkKICAgIGlmICh0aGlzLnN0YXRlID09PSAnYWN0aXZlJykgewogICAgICB0aGlzLnJlZnJlc2goKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09ICdub3RpZnlfd2FpdCcpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuc3ViX2R1cmF0aW9uKTsKICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLk4pOwogICAgdGhpcy50aW1lcnMuTiA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChzdWIudGltZXJfZmlyZS5iaW5kKHN1YiksIFNJUC5UaW1lcnMuVElNRVJfTik7CgogICAgdGhpcy5zZW5kKCk7CgogICAgdGhpcy5zdGF0ZSA9ICdub3RpZnlfd2FpdCc7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgcmVmcmVzaDogZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMuc3RhdGUgPT09ICd0ZXJtaW5hdGVkJyB8fCB0aGlzLnN0YXRlID09PSAncGVuZGluZycgfHwgdGhpcy5zdGF0ZSA9PT0gJ25vdGlmeV93YWl0JykgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5kaWFsb2cuc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuU1VCU0NSSUJFLCB7CiAgICAgIGV4dHJhSGVhZGVyczogdGhpcy5leHRyYUhlYWRlcnMsCiAgICAgIGJvZHk6IHRoaXMuYm9keQogICAgfSk7CiAgfSwKCiAgcmVjZWl2ZVJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdmFyIGV4cGlyZXMsIHN1YiA9IHRoaXMsCiAgICAgICAgY2F1c2UgPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHJlc3BvbnNlLnN0YXR1c19jb2RlKTsKCiAgICBpZiAoKHRoaXMuc3RhdGUgPT09ICdub3RpZnlfd2FpdCcgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMzAwKSB8fAogICAgICAgICh0aGlzLnN0YXRlICE9PSAnbm90aWZ5X3dhaXQnICYmIHRoaXMuZXJyb3JDb2Rlcy5pbmRleE9mKHJlc3BvbnNlLnN0YXR1c19jb2RlKSAhPT0gLTEpKSB7CiAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBudWxsKTsKICAgIH0gZWxzZSBpZiAoL14yWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKSl7CiAgICAgIGV4cGlyZXMgPSByZXNwb25zZS5nZXRIZWFkZXIoJ0V4cGlyZXMnKTsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuTik7CgogICAgICBpZiAodGhpcy5jcmVhdGVDb25maXJtZWREaWFsb2cocmVzcG9uc2UsJ1VBQycpKSB7CiAgICAgICAgdGhpcy5pZCA9IHRoaXMuZGlhbG9nLmlkLnRvU3RyaW5nKCk7CiAgICAgICAgdGhpcy51YS5zdWJzY3JpcHRpb25zW3RoaXMuaWRdID0gdGhpczsKICAgICAgICB0aGlzLmVtaXQoJ2FjY2VwdGVkJywgcmVzcG9uc2UsIGNhdXNlKTsKICAgICAgICAvLyBVUERBVEUgUk9VVEUgU0VUIFRPIEJFIEJBQ0tXQVJEUyBDT01QQVRJQkxFPwogICAgICB9CgogICAgICBpZiAoZXhwaXJlcyAmJiBleHBpcmVzIDw9IHRoaXMuZXhwaXJlcykgewogICAgICAgIC8vIFByZXNlcnZlIG5ldyBleHBpcmVzIHZhbHVlIGZvciBzdWJzZXF1ZW50IHJlcXVlc3RzCiAgICAgICAgdGhpcy5leHBpcmVzID0gZXhwaXJlczsKICAgICAgICB0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24gPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoc3ViLnJlZnJlc2guYmluZChzdWIpLCBleHBpcmVzICogOTAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIWV4cGlyZXMpIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ0V4cGlyZXMgaGVhZGVyIG1pc3NpbmcgaW4gYSAyMDAtY2xhc3MgcmVzcG9uc2UgdG8gU1VCU0NSSUJFJyk7CiAgICAgICAgICB0aGlzLmZhaWxlZChyZXNwb25zZSwgU0lQLkMuRVhQSVJFU19IRUFERVJfTUlTU0lORyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ0V4cGlyZXMgaGVhZGVyIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFNVQlNDUklCRSB3aXRoIGEgaGlnaGVyIHZhbHVlIHRoYW4gdGhlIG9uZSBpbiB0aGUgcmVxdWVzdCcpOwogICAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLklOVkFMSURfRVhQSVJFU19IRUFERVIpOwogICAgICAgIH0KICAgICAgfQogICAgfSAvL1VzZWQgdG8ganVzdCBpZ25vcmUgcHJvdmlzaW9uYWwgcmVzcG9uc2VzOyBub3cgaWdub3JlcyBldmVyeXRoaW5nIGV4Y2VwdCBlcnJvckNvZGVzIGFuZCAyeHgKICB9LAoKICB1bnN1YnNjcmliZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgZXh0cmFIZWFkZXJzID0gW10sIHN1YiA9IHRoaXM7CgogICAgdGhpcy5zdGF0ZSA9ICd0ZXJtaW5hdGVkJzsKCiAgICBleHRyYUhlYWRlcnMucHVzaCgnRXZlbnQ6ICcgKyB0aGlzLmV2ZW50KTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdFeHBpcmVzOiAwJyk7CgogICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcrIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKCiAgICAvL21ha2VzIHN1cmUgZXhwaXJlcyBpc24ndCBzZXQsIGFuZCBvdGhlciB0eXBpY2FsIHJlc3Vic2NyaWJlIGJlaGF2aW9yCiAgICB0aGlzLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKCl7fTsKCiAgICB0aGlzLmRpYWxvZy5zZW5kUmVxdWVzdCh0aGlzLCB0aGlzLm1ldGhvZCwgewogICAgICBleHRyYUhlYWRlcnM6IGV4dHJhSGVhZGVycywKICAgICAgYm9keTogdGhpcy5ib2R5CiAgICB9KTsKCiAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pOwogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuTik7CiAgICB0aGlzLnRpbWVycy5OID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KHN1Yi50aW1lcl9maXJlLmJpbmQoc3ViKSwgU0lQLlRpbWVycy5USU1FUl9OKTsKICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICB0aW1lcl9maXJlOiBmdW5jdGlvbigpewogICAgaWYgKHRoaXMuc3RhdGUgPT09ICd0ZXJtaW5hdGVkJykgewogICAgICB0aGlzLnRlcm1pbmF0ZURpYWxvZygpOwogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5OKTsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuc3ViX2R1cmF0aW9uKTsKCiAgICAgIGRlbGV0ZSB0aGlzLnVhLnN1YnNjcmlwdGlvbnNbdGhpcy5pZF07CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09ICdwZW5kaW5nJyB8fCB0aGlzLnN0YXRlID09PSAnbm90aWZ5X3dhaXQnKSB7CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgfQogIH0sCgogIC8qKgogICogQHByaXZhdGUKICAqLwogIGNsb3NlOiBmdW5jdGlvbigpIHsKICAgIGlmKHRoaXMuc3RhdGUgIT09ICdub3RpZnlfd2FpdCcgJiYgdGhpcy5zdGF0ZSAhPT0gJ3Rlcm1pbmF0ZWQnKSB7CiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgIH0KICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICBjcmVhdGVDb25maXJtZWREaWFsb2c6IGZ1bmN0aW9uKG1lc3NhZ2UsIHR5cGUpIHsKICAgIHZhciBkaWFsb2c7CgogICAgdGhpcy50ZXJtaW5hdGVEaWFsb2coKTsKICAgIGRpYWxvZyA9IG5ldyBTSVAuRGlhbG9nKHRoaXMsIG1lc3NhZ2UsIHR5cGUpOwoKICAgIGlmKCFkaWFsb2cuZXJyb3IpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBkaWFsb2c7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLy8gRGlhbG9nIG5vdCBjcmVhdGVkIGR1ZSB0byBhbiBlcnJvcgogICAgZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICB0ZXJtaW5hdGVEaWFsb2c6IGZ1bmN0aW9uKCkgewogICAgaWYodGhpcy5kaWFsb2cpIHsKICAgICAgZGVsZXRlIHRoaXMudWEuc3Vic2NyaXB0aW9uc1t0aGlzLmlkXTsKICAgICAgdGhpcy5kaWFsb2cudGVybWluYXRlKCk7CiAgICAgIGRlbGV0ZSB0aGlzLmRpYWxvZzsKICAgIH0KICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICByZWNlaXZlUmVxdWVzdDogZnVuY3Rpb24ocmVxdWVzdCkgewogICAgdmFyIHN1Yl9zdGF0ZSwgc3ViID0gdGhpczsKCiAgICBmdW5jdGlvbiBzZXRFeHBpcmVzVGltZW91dCgpIHsKICAgICAgaWYgKHN1Yl9zdGF0ZS5leHBpcmVzKSB7CiAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQoc3ViLnRpbWVycy5zdWJfZHVyYXRpb24pOwogICAgICAgIHN1Yl9zdGF0ZS5leHBpcmVzID0gTWF0aC5taW4oc3ViLmV4cGlyZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChzdWJfc3RhdGUuZXhwaXJlcywgMCkpOwogICAgICAgIHN1Yi50aW1lcnMuc3ViX2R1cmF0aW9uID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KHN1Yi5yZWZyZXNoLmJpbmQoc3ViKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yl9zdGF0ZS5leHBpcmVzICogOTAwKTsKICAgICAgfQogICAgfQoKICAgIGlmICghdGhpcy5tYXRjaEV2ZW50KHJlcXVlc3QpKSB7IC8vY2hlY2tzIGV2ZW50IGFuZCBzdWJzY3JpcHRpb25fc3RhdGUgaGVhZGVycwogICAgICByZXF1ZXN0LnJlcGx5KDQ4OSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBzdWJfc3RhdGUgPSByZXF1ZXN0LnBhcnNlSGVhZGVyKCdTdWJzY3JpcHRpb24tU3RhdGUnKTsKCiAgICByZXF1ZXN0LnJlcGx5KDIwMCwgU0lQLkMuUkVBU09OXzIwMCk7CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuTik7CgogICAgdGhpcy5lbWl0KCdub3RpZnknLCB7cmVxdWVzdDogcmVxdWVzdH0pOwoKICAgIC8vIGlmIHdlJ3ZlIHNldCBzdGF0ZSB0byB0ZXJtaW5hdGVkLCBubyBmdXJ0aGVyIHByb2Nlc3Npbmcgc2hvdWxkIHRha2UgcGxhY2UKICAgIC8vIGFuZCB3ZSBhcmUgb25seSBpbnRlcmVzdGVkIGluIGNsZWFuaW5nIHVwIGFmdGVyIHRoZSBhcHByb3ByaWF0ZSBOT1RJRlkKICAgIGlmICh0aGlzLnN0YXRlID09PSAndGVybWluYXRlZCcpIHsKICAgICAgaWYgKHN1Yl9zdGF0ZS5zdGF0ZSA9PT0gJ3Rlcm1pbmF0ZWQnKSB7CiAgICAgICAgdGhpcy50ZXJtaW5hdGVEaWFsb2coKTsKICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5OKTsKICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pOwoKICAgICAgICBkZWxldGUgdGhpcy51YS5zdWJzY3JpcHRpb25zW3RoaXMuaWRdOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBzd2l0Y2ggKHN1Yl9zdGF0ZS5zdGF0ZSkgewogICAgICBjYXNlICdhY3RpdmUnOgogICAgICAgIHRoaXMuc3RhdGUgPSAnYWN0aXZlJzsKICAgICAgICBzZXRFeHBpcmVzVGltZW91dCgpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdwZW5kaW5nJzoKICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ25vdGlmeV93YWl0JykgewogICAgICAgICAgc2V0RXhwaXJlc1RpbWVvdXQoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zdGF0ZSA9ICdwZW5kaW5nJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAndGVybWluYXRlZCc6CiAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuc3ViX2R1cmF0aW9uKTsKICAgICAgICBpZiAoc3ViX3N0YXRlLnJlYXNvbikgewogICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCd0ZXJtaW5hdGluZyBzdWJzY3JpcHRpb24gd2l0aCByZWFzb24gJysgc3ViX3N0YXRlLnJlYXNvbik7CiAgICAgICAgICBzd2l0Y2ggKHN1Yl9zdGF0ZS5yZWFzb24pIHsKICAgICAgICAgICAgY2FzZSAnZGVhY3RpdmF0ZWQnOgogICAgICAgICAgICBjYXNlICd0aW1lb3V0JzoKICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZSgpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY2FzZSAncHJvYmF0aW9uJzoKICAgICAgICAgICAgY2FzZSAnZ2l2ZXVwJzoKICAgICAgICAgICAgICBpZihzdWJfc3RhdGUucGFyYW1zICYmIHN1Yl9zdGF0ZS5wYXJhbXNbJ3JldHJ5LWFmdGVyJ10pIHsKICAgICAgICAgICAgICAgIHRoaXMudGltZXJzLnN1Yl9kdXJhdGlvbiA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChzdWIuc3Vic2NyaWJlLmJpbmQoc3ViKSwgc3ViX3N0YXRlLnBhcmFtc1sncmV0cnktYWZ0ZXInXSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY2FzZSAncmVqZWN0ZWQnOgogICAgICAgICAgICBjYXNlICdub3Jlc291cmNlJzoKICAgICAgICAgICAgY2FzZSAnaW52YXJpYW50JzoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgIGJyZWFrOwogICAgfQogIH0sCgogIGZhaWxlZDogZnVuY3Rpb24ocmVzcG9uc2UsIGNhdXNlKSB7CiAgICB0aGlzLmNsb3NlKCk7CiAgICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlLCBjYXVzZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBvbkRpYWxvZ0Vycm9yOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5ESUFMT0dfRVJST1IpOwogIH0sCgogIC8qKgogICogQHByaXZhdGUKICAqLwogIG1hdGNoRXZlbnQ6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIHZhciBldmVudDsKCiAgICAvLyBDaGVjayBtYW5kYXRvcnkgaGVhZGVyIEV2ZW50CiAgICBpZiAoIXJlcXVlc3QuaGFzSGVhZGVyKCdFdmVudCcpKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ21pc3NpbmcgRXZlbnQgaGVhZGVyJyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8vIENoZWNrIG1hbmRhdG9yeSBoZWFkZXIgU3Vic2NyaXB0aW9uLVN0YXRlCiAgICBpZiAoIXJlcXVlc3QuaGFzSGVhZGVyKCdTdWJzY3JpcHRpb24tU3RhdGUnKSkgewogICAgICB0aGlzLmxvZ2dlci53YXJuKCdtaXNzaW5nIFN1YnNjcmlwdGlvbi1TdGF0ZSBoZWFkZXInKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIGV2ZW50IGluIE5PVElGWSBtYXRjaGVzIHRoZSBldmVudCBpbiBTVUJTQ1JJQkUKICAgIGV2ZW50ID0gcmVxdWVzdC5wYXJzZUhlYWRlcignZXZlbnQnKS5ldmVudDsKCiAgICBpZiAodGhpcy5ldmVudCAhPT0gZXZlbnQpIHsKICAgICAgdGhpcy5sb2dnZXIud2FybignZXZlbnQgbWF0Y2ggZmFpbGVkJyk7CiAgICAgIHJlcXVlc3QucmVwbHkoNDgxLCAnRXZlbnQgTWF0Y2ggRmFpbGVkJyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KfTsKfTsKCn0se31dLDMwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBTSVAgVElNRVJTCiAqLwoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICovCnZhcgogIFQxID0gNTAwLAogIFQyID0gNDAwMCwKICBUNCA9IDUwMDA7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRpbWVycykgewogIHZhciBUaW1lcnMgPSB7CiAgICBUMTogVDEsCiAgICBUMjogVDIsCiAgICBUNDogVDQsCiAgICBUSU1FUl9COiA2NCAqIFQxLAogICAgVElNRVJfRDogMCAgKiBUMSwKICAgIFRJTUVSX0Y6IDY0ICogVDEsCiAgICBUSU1FUl9IOiA2NCAqIFQxLAogICAgVElNRVJfSTogMCAgKiBUMSwKICAgIFRJTUVSX0o6IDAgICogVDEsCiAgICBUSU1FUl9LOiAwICAqIFQ0LAogICAgVElNRVJfTDogNjQgKiBUMSwKICAgIFRJTUVSX006IDY0ICogVDEsCiAgICBUSU1FUl9OOiA2NCAqIFQxLAogICAgUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUw6IDYwMDAwICAvLyBTZWUgUkZDIDMyNjEgU2VjdGlvbiAxMy4zLjEuMQogIH07CgogIFsnc2V0VGltZW91dCcsICdjbGVhclRpbWVvdXQnLCAnc2V0SW50ZXJ2YWwnLCAnY2xlYXJJbnRlcnZhbCddCiAgLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgIC8vIGNhbid0IGp1c3QgdXNlIHRpbWVyc1tuYW1lXS5iaW5kKHRpbWVycykgc2luY2UgaXQgYnlwYXNzZXMgamFzbWluZSdzCiAgICAvLyBjbG9jay1tb2NraW5nCiAgICBUaW1lcnNbbmFtZV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aW1lcnNbbmFtZV0uYXBwbHkodGltZXJzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KTsKCiAgcmV0dXJuIFRpbWVyczsKfTsKCn0se31dLDMxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBTSVAgVHJhbnNhY3Rpb25zCiAqLwoKLyoqCiAqIFNJUCBUcmFuc2FjdGlvbnMgbW9kdWxlLgogKiBAYXVnbWVudHMgU0lQCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyCiAgQyA9IHsKICAgIC8vIFRyYW5zYWN0aW9uIHN0YXRlcwogICAgU1RBVFVTX1RSWUlORzogICAgIDEsCiAgICBTVEFUVVNfUFJPQ0VFRElORzogMiwKICAgIFNUQVRVU19DQUxMSU5HOiAgICAzLAogICAgU1RBVFVTX0FDQ0VQVEVEOiAgIDQsCiAgICBTVEFUVVNfQ09NUExFVEVEOiAgNSwKICAgIFNUQVRVU19URVJNSU5BVEVEOiA2LAogICAgU1RBVFVTX0NPTkZJUk1FRDogIDcsCgogICAgLy8gVHJhbnNhY3Rpb24gdHlwZXMKICAgIE5PTl9JTlZJVEVfQ0xJRU5UOiAnbmljdCcsCiAgICBOT05fSU5WSVRFX1NFUlZFUjogJ25pc3QnLAogICAgSU5WSVRFX0NMSUVOVDogJ2ljdCcsCiAgICBJTlZJVEVfU0VSVkVSOiAnaXN0JwogIH07CgpmdW5jdGlvbiBidWlsZFZpYUhlYWRlciAocmVxdWVzdF9zZW5kZXIsIHRyYW5zcG9ydCwgaWQpIHsKICB2YXIgdmlhOwogIHZpYSA9ICdTSVAvMi4wLycgKyAocmVxdWVzdF9zZW5kZXIudWEuY29uZmlndXJhdGlvbi5oYWNrVmlhVGNwID8gJ1RDUCcgOiB0cmFuc3BvcnQuc2VydmVyLnNjaGVtZSk7CiAgdmlhICs9ICcgJyArIHJlcXVlc3Rfc2VuZGVyLnVhLmNvbmZpZ3VyYXRpb24udmlhSG9zdCArICc7YnJhbmNoPScgKyBpZDsKICBpZiAocmVxdWVzdF9zZW5kZXIudWEuY29uZmlndXJhdGlvbi5mb3JjZVJwb3J0KSB7CiAgICB2aWEgKz0gJztycG9ydCc7CiAgfQogIHJldHVybiB2aWE7Cn0KCi8qKgoqIEBhdWdtZW50cyBTSVAuVHJhbnNhY3Rpb25zCiogQGNsYXNzIE5vbiBJbnZpdGUgQ2xpZW50IFRyYW5zYWN0aW9uCiogQHBhcmFtIHtTSVAuUmVxdWVzdFNlbmRlcn0gcmVxdWVzdF9zZW5kZXIKKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydAoqLwp2YXIgTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gPSBmdW5jdGlvbihyZXF1ZXN0X3NlbmRlciwgcmVxdWVzdCwgdHJhbnNwb3J0KSB7CiAgdmFyIHZpYTsKCiAgdGhpcy50eXBlID0gQy5OT05fSU5WSVRFX0NMSUVOVDsKICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDsKICB0aGlzLmlkID0gJ3o5aEc0YksnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDApOwogIHRoaXMucmVxdWVzdF9zZW5kZXIgPSByZXF1ZXN0X3NlbmRlcjsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwoKICB0aGlzLmxvZ2dlciA9IHJlcXVlc3Rfc2VuZGVyLnVhLmdldExvZ2dlcignc2lwLnRyYW5zYWN0aW9uLm5pY3QnLCB0aGlzLmlkKTsKCiAgdmlhID0gYnVpbGRWaWFIZWFkZXIocmVxdWVzdF9zZW5kZXIsIHRyYW5zcG9ydCwgdGhpcy5pZCk7CiAgdGhpcy5yZXF1ZXN0LnNldEhlYWRlcigndmlhJywgdmlhKTsKCiAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5uZXdUcmFuc2FjdGlvbih0aGlzKTsKfTsKTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgpOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkID0gZnVuY3Rpb24oc3RhdGUpIHsKICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgdGhpcy5lbWl0KCdzdGF0ZUNoYW5nZWQnKTsKfTsKCk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7CiAgdmFyIHRyID0gdGhpczsKCiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVFJZSU5HKTsKICB0aGlzLkYgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfRi5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9GKTsKCiAgaWYoIXRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KSkgewogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ3RyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgbm9uLUlOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwogIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuRik7CiAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5LKTsKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKTsKfTsKCk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9GID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCdUaW1lciBGIGV4cGlyZWQgZm9yIG5vbi1JTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uICcgKyB0aGlzLmlkKTsKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKTsKfTsKCk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9LID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7Cn07CgpOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2UpIHsKICB2YXIKICAgIHRyID0gdGhpcywKICAgIHN0YXR1c19jb2RlID0gcmVzcG9uc2Uuc3RhdHVzX2NvZGU7CgogIGlmKHN0YXR1c19jb2RlIDwgMjAwKSB7CiAgICBzd2l0Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlIEMuU1RBVFVTX1RSWUlORzoKICAgICAgY2FzZSBDLlNUQVRVU19QUk9DRUVESU5HOgogICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1BST0NFRURJTkcpOwogICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICBicmVhazsKICAgIH0KICB9IGVsc2UgewogICAgc3dpdGNoKHRoaXMuc3RhdGUpIHsKICAgICAgY2FzZSBDLlNUQVRVU19UUllJTkc6CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19DT01QTEVURUQpOwogICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuRik7CgogICAgICAgIGlmKHN0YXR1c19jb2RlID09PSA0MDgpIHsKICAgICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIub25SZXF1ZXN0VGltZW91dCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLksgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfSy5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9LKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDLlNUQVRVU19DT01QTEVURUQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQp9OwoKCgovKioKKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwoqIEBjbGFzcyBJbnZpdGUgQ2xpZW50IFRyYW5zYWN0aW9uCiogQHBhcmFtIHtTSVAuUmVxdWVzdFNlbmRlcn0gcmVxdWVzdF9zZW5kZXIKKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydAoqLwp2YXIgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gPSBmdW5jdGlvbihyZXF1ZXN0X3NlbmRlciwgcmVxdWVzdCwgdHJhbnNwb3J0KSB7CiAgdmFyIHZpYSwKICAgIHRyID0gdGhpczsKCiAgdGhpcy50eXBlID0gQy5JTlZJVEVfQ0xJRU5UOwogIHRoaXMudHJhbnNwb3J0ID0gdHJhbnNwb3J0OwogIHRoaXMuaWQgPSAnejloRzRiSycgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCk7CiAgdGhpcy5yZXF1ZXN0X3NlbmRlciA9IHJlcXVlc3Rfc2VuZGVyOwogIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7CgogIHRoaXMubG9nZ2VyID0gcmVxdWVzdF9zZW5kZXIudWEuZ2V0TG9nZ2VyKCdzaXAudHJhbnNhY3Rpb24uaWN0JywgdGhpcy5pZCk7CgogIHZpYSA9IGJ1aWxkVmlhSGVhZGVyKHJlcXVlc3Rfc2VuZGVyLCB0cmFuc3BvcnQsIHRoaXMuaWQpOwogIHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoJ3ZpYScsIHZpYSk7CgogIHRoaXMucmVxdWVzdF9zZW5kZXIudWEubmV3VHJhbnNhY3Rpb24odGhpcyk7CgogIC8vIEFkZCB0aGUgY2FuY2VsIHByb3BlcnR5IHRvIHRoZSByZXF1ZXN0LgogIC8vV2lsbCBiZSBjYWxsZWQgZnJvbSB0aGUgcmVxdWVzdCBpbnN0YW5jZSwgbm90IHRoZSB0cmFuc2FjdGlvbiBpdHNlbGYuCiAgdGhpcy5yZXF1ZXN0LmNhbmNlbCA9IGZ1bmN0aW9uKHJlYXNvbikgewogICAgdHIuY2FuY2VsX3JlcXVlc3QodHIsIHJlYXNvbik7CiAgfTsKfTsKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgpJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkID0gZnVuY3Rpb24oc3RhdGUpIHsKICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgdGhpcy5lbWl0KCdzdGF0ZUNoYW5nZWQnKTsKfTsKCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7CiAgdmFyIHRyID0gdGhpczsKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19DQUxMSU5HKTsKICB0aGlzLkIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfQi5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9CKTsKCiAgaWYoIXRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KSkgewogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ3RyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CiAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5CKTsKICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkQpOwogIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuTSk7CiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CgogIGlmICh0aGlzLnN0YXRlICE9PSBDLlNUQVRVU19BQ0NFUFRFRCkgewogICAgdGhpcy5yZXF1ZXN0X3NlbmRlci5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKLy8gUkZDIDYwMjYgNy4yCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9NID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCdUaW1lciBNIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwoKICBpZih0aGlzLnN0YXRlID09PSBDLlNUQVRVU19BQ0NFUFRFRCkgewogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5CKTsKICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogICAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CiAgfQp9OwoKLy8gUkZDIDMyNjEgMTcuMS4xCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9CID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCdUaW1lciBCIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwogIGlmKHRoaXMuc3RhdGUgPT09IEMuU1RBVFVTX0NBTExJTkcpIHsKICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogICAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CiAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKTsKICB9Cn07CgpJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUudGltZXJfRCA9IGZ1bmN0aW9uKCkgewogIHRoaXMubG9nZ2VyLmxvZygnVGltZXIgRCBleHBpcmVkIGZvciBJTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uICcgKyB0aGlzLmlkKTsKICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkIpOwogIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogIHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpOwp9OwoKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLnNlbmRBQ0sgPSBmdW5jdGlvbihyZXNwb25zZSkgewogIHZhciB0ciA9IHRoaXM7CgogIHRoaXMuYWNrID0gJ0FDSyAnICsgdGhpcy5yZXF1ZXN0LnJ1cmkgKyAnIFNJUC8yLjBcclxuJzsKICB0aGlzLmFjayArPSAnVmlhOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ1ZpYSddLnRvU3RyaW5nKCkgKyAnXHJcbic7CgogIGlmKHRoaXMucmVxdWVzdC5oZWFkZXJzWydSb3V0ZSddKSB7CiAgICB0aGlzLmFjayArPSAnUm91dGU6ICcgKyB0aGlzLnJlcXVlc3QuaGVhZGVyc1snUm91dGUnXS50b1N0cmluZygpICsgJ1xyXG4nOwogIH0KCiAgdGhpcy5hY2sgKz0gJ1RvOiAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCd0bycpICsgJ1xyXG4nOwogIHRoaXMuYWNrICs9ICdGcm9tOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ0Zyb20nXS50b1N0cmluZygpICsgJ1xyXG4nOwogIHRoaXMuYWNrICs9ICdDYWxsLUlEOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ0NhbGwtSUQnXS50b1N0cmluZygpICsgJ1xyXG4nOwogIHRoaXMuYWNrICs9ICdDb250ZW50LUxlbmd0aDogMFxyXG4nOwogIHRoaXMuYWNrICs9ICdDU2VxOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ0NTZXEnXS50b1N0cmluZygpLnNwbGl0KCcgJylbMF07CiAgdGhpcy5hY2sgKz0gJyBBQ0tcclxuXHJcbic7CgogIHRoaXMuRCA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9ELmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX0QpOwoKICB0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMuYWNrKTsKfTsKCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5jYW5jZWxfcmVxdWVzdCA9IGZ1bmN0aW9uKHRyLCByZWFzb24pIHsKICB2YXIgcmVxdWVzdCA9IHRyLnJlcXVlc3Q7CgogIHRoaXMuY2FuY2VsID0gU0lQLkMuQ0FOQ0VMICsgJyAnICsgcmVxdWVzdC5ydXJpICsgJyBTSVAvMi4wXHJcbic7CiAgdGhpcy5jYW5jZWwgKz0gJ1ZpYTogJyArIHJlcXVlc3QuaGVhZGVyc1snVmlhJ10udG9TdHJpbmcoKSArICdcclxuJzsKCiAgaWYodGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ1JvdXRlJ10pIHsKICAgIHRoaXMuY2FuY2VsICs9ICdSb3V0ZTogJyArIHJlcXVlc3QuaGVhZGVyc1snUm91dGUnXS50b1N0cmluZygpICsgJ1xyXG4nOwogIH0KCiAgdGhpcy5jYW5jZWwgKz0gJ1RvOiAnICsgcmVxdWVzdC5oZWFkZXJzWydUbyddLnRvU3RyaW5nKCkgKyAnXHJcbic7CiAgdGhpcy5jYW5jZWwgKz0gJ0Zyb206ICcgKyByZXF1ZXN0LmhlYWRlcnNbJ0Zyb20nXS50b1N0cmluZygpICsgJ1xyXG4nOwogIHRoaXMuY2FuY2VsICs9ICdDYWxsLUlEOiAnICsgcmVxdWVzdC5oZWFkZXJzWydDYWxsLUlEJ10udG9TdHJpbmcoKSArICdcclxuJzsKICB0aGlzLmNhbmNlbCArPSAnQ1NlcTogJyArIHJlcXVlc3QuaGVhZGVyc1snQ1NlcSddLnRvU3RyaW5nKCkuc3BsaXQoJyAnKVswXSArCiAgJyBDQU5DRUxcclxuJzsKCiAgaWYocmVhc29uKSB7CiAgICB0aGlzLmNhbmNlbCArPSAnUmVhc29uOiAnICsgcmVhc29uICsgJ1xyXG4nOwogIH0KCiAgdGhpcy5jYW5jZWwgKz0gJ0NvbnRlbnQtTGVuZ3RoOiAwXHJcblxyXG4nOwoKICAvLyBTZW5kIG9ubHkgaWYgYSBwcm92aXNpb25hbCByZXNwb25zZSAoPjEwMCkgaGFzIGJlZW4gcmVjZWl2ZWQuCiAgaWYodGhpcy5zdGF0ZSA9PT0gQy5TVEFUVVNfUFJPQ0VFRElORykgewogICAgdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmNhbmNlbCk7CiAgfQp9OwoKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgdmFyCiAgdHIgPSB0aGlzLAogIHN0YXR1c19jb2RlID0gcmVzcG9uc2Uuc3RhdHVzX2NvZGU7CgogIGlmKHN0YXR1c19jb2RlID49IDEwMCAmJiBzdGF0dXNfY29kZSA8PSAxOTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ0FMTElORzoKICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19QUk9DRUVESU5HKTsKICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgaWYodGhpcy5jYW5jZWwpIHsKICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5jYW5jZWwpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBDLlNUQVRVU19QUk9DRUVESU5HOgogICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICBicmVhazsKICAgIH0KICB9IGVsc2UgaWYoc3RhdHVzX2NvZGUgPj0gMjAwICYmIHN0YXR1c19jb2RlIDw9IDI5OSkgewogICAgc3dpdGNoKHRoaXMuc3RhdGUpIHsKICAgICAgY2FzZSBDLlNUQVRVU19DQUxMSU5HOgogICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfQUNDRVBURUQpOwogICAgICAgIHRoaXMuTSA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9NLmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX00pOwogICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDLlNUQVRVU19BQ0NFUFRFRDoKICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSBlbHNlIGlmKHN0YXR1c19jb2RlID49IDMwMCAmJiBzdGF0dXNfY29kZSA8PSA2OTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ0FMTElORzoKICAgICAgY2FzZSBDLlNUQVRVU19QUk9DRUVESU5HOgogICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX0NPTVBMRVRFRCk7CiAgICAgICAgdGhpcy5zZW5kQUNLKHJlc3BvbnNlKTsKICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ09NUExFVEVEOgogICAgICAgIHRoaXMuc2VuZEFDSyhyZXNwb25zZSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQp9OwoKCi8qKgogKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwogKiBAY2xhc3MgQUNLIENsaWVudCBUcmFuc2FjdGlvbgogKiBAcGFyYW0ge1NJUC5SZXF1ZXN0U2VuZGVyfSByZXF1ZXN0X3NlbmRlcgogKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKICogQHBhcmFtIHtTSVAuVHJhbnNwb3J0fSB0cmFuc3BvcnQKICovCnZhciBBY2tDbGllbnRUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKHJlcXVlc3Rfc2VuZGVyLCByZXF1ZXN0LCB0cmFuc3BvcnQpIHsKICB2YXIgdmlhOwoKICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDsKICB0aGlzLmlkID0gJ3o5aEc0YksnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDApOwogIHRoaXMucmVxdWVzdF9zZW5kZXIgPSByZXF1ZXN0X3NlbmRlcjsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwoKICB0aGlzLmxvZ2dlciA9IHJlcXVlc3Rfc2VuZGVyLnVhLmdldExvZ2dlcignc2lwLnRyYW5zYWN0aW9uLm5pY3QnLCB0aGlzLmlkKTsKCiAgdmlhID0gYnVpbGRWaWFIZWFkZXIocmVxdWVzdF9zZW5kZXIsIHRyYW5zcG9ydCwgdGhpcy5pZCk7CiAgdGhpcy5yZXF1ZXN0LnNldEhlYWRlcigndmlhJywgdmlhKTsKfTsKQWNrQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgpBY2tDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKCkgewogIGlmKCF0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMucmVxdWVzdCkpIHsKICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogIH0KfTsKCkFja0NsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCd0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGZvciBhbiBBQ0sgY2xpZW50IHRyYW5zYWN0aW9uICcgKyB0aGlzLmlkKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKTsKfTsKCgovKioKKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwoqIEBjbGFzcyBOb24gSW52aXRlIFNlcnZlciBUcmFuc2FjdGlvbgoqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdAoqIEBwYXJhbSB7U0lQLlVBfSB1YQoqLwp2YXIgTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24gPSBmdW5jdGlvbihyZXF1ZXN0LCB1YSkgewogIHRoaXMudHlwZSA9IEMuTk9OX0lOVklURV9TRVJWRVI7CiAgdGhpcy5pZCA9IHJlcXVlc3QudmlhX2JyYW5jaDsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogIHRoaXMudHJhbnNwb3J0ID0gcmVxdWVzdC50cmFuc3BvcnQ7CiAgdGhpcy51YSA9IHVhOwogIHRoaXMubGFzdF9yZXNwb25zZSA9ICcnOwogIHJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uID0gdGhpczsKCiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC50cmFuc2FjdGlvbi5uaXN0JywgdGhpcy5pZCk7CgogIHRoaXMuc3RhdGUgPSBDLlNUQVRVU19UUllJTkc7CgogIHVhLm5ld1RyYW5zYWN0aW9uKHRoaXMpOwp9OwpOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKTsKCk5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQgPSBmdW5jdGlvbihzdGF0ZSkgewogIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICB0aGlzLmVtaXQoJ3N0YXRlQ2hhbmdlZCcpOwp9OwoKTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRpbWVyX0ogPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ1RpbWVyIEogZXhwaXJlZCBmb3Igbm9uLUlOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwogIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogIHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpOwp9OwoKTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICBpZiAoIXRoaXMudHJhbnNwb3J0RXJyb3IpIHsKICAgIHRoaXMudHJhbnNwb3J0RXJyb3IgPSB0cnVlOwoKICAgIHRoaXMubG9nZ2VyLmxvZygndHJhbnNwb3J0IGVycm9yIG9jY3VycmVkLCBkZWxldGluZyBub24tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5KKTsKICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogICAgdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CiAgfQp9OwoKTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHN0YXR1c19jb2RlLCByZXNwb25zZSkgewogIHZhciB0ciA9IHRoaXM7CiAgdmFyIGRlZmVycmVkID0gU0lQLlV0aWxzLmRlZmVyKCk7CgogIGlmKHN0YXR1c19jb2RlID09PSAxMDApIHsKICAgIC8qIFJGQyA0MzIwIDQuMQogICAgICogJ0EgU0lQIGVsZW1lbnQgTVVTVCBOT1QKICAgICAqIHNlbmQgYW55IHByb3Zpc2lvbmFsIHJlc3BvbnNlIHdpdGggYQogICAgICogU3RhdHVzLUNvZGUgb3RoZXIgdGhhbiAxMDAgdG8gYSBub24tSU5WSVRFIHJlcXVlc3QuJwogICAgICovCiAgICBzd2l0Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlIEMuU1RBVFVTX1RSWUlORzoKICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19QUk9DRUVESU5HKTsKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpICB7CiAgICAgICAgICB0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICB0aGlzLmxhc3RfcmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSBlbHNlIGlmKHN0YXR1c19jb2RlID49IDIwMCAmJiBzdGF0dXNfY29kZSA8PSA2OTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfVFJZSU5HOgogICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfQ09NUExFVEVEKTsKICAgICAgICB0aGlzLmxhc3RfcmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICB0aGlzLkogPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfSi5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9KKTsKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ09NUExFVEVEOgogICAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7Cn07CgovKioKKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwoqIEBjbGFzcyBJbnZpdGUgU2VydmVyIFRyYW5zYWN0aW9uCiogQHBhcmFtIHtTSVAuSW5jb21pbmdSZXF1ZXN0fSByZXF1ZXN0CiogQHBhcmFtIHtTSVAuVUF9IHVhCiovCnZhciBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKHJlcXVlc3QsIHVhKSB7CiAgdGhpcy50eXBlID0gQy5JTlZJVEVfU0VSVkVSOwogIHRoaXMuaWQgPSByZXF1ZXN0LnZpYV9icmFuY2g7CiAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDsKICB0aGlzLnRyYW5zcG9ydCA9IHJlcXVlc3QudHJhbnNwb3J0OwogIHRoaXMudWEgPSB1YTsKICB0aGlzLmxhc3RfcmVzcG9uc2UgPSAnJzsKICByZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbiA9IHRoaXM7CgogIHRoaXMubG9nZ2VyID0gdWEuZ2V0TG9nZ2VyKCdzaXAudHJhbnNhY3Rpb24uaXN0JywgdGhpcy5pZCk7CgogIHRoaXMuc3RhdGUgPSBDLlNUQVRVU19QUk9DRUVESU5HOwoKICB1YS5uZXdUcmFuc2FjdGlvbih0aGlzKTsKCiAgdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyID0gbnVsbDsKCiAgcmVxdWVzdC5yZXBseSgxMDApOwp9OwpJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKTsKCkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQgPSBmdW5jdGlvbihzdGF0ZSkgewogIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICB0aGlzLmVtaXQoJ3N0YXRlQ2hhbmdlZCcpOwp9OwoKSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRpbWVyX0ggPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ1RpbWVyIEggZXhwaXJlZCBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogIGlmKHRoaXMuc3RhdGUgPT09IEMuU1RBVFVTX0NPTVBMRVRFRCkgewogICAgdGhpcy5sb2dnZXIud2FybigndHJhbnNhY3Rpb25zJywgJ0FDSyBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiB3YXMgbmV2ZXIgcmVjZWl2ZWQsIGNhbGwgd2lsbCBiZSB0ZXJtaW5hdGVkJyk7CiAgfQoKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICB0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKfTsKCkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9JID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7Cn07CgovLyBSRkMgNjAyNiA3LjEKSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRpbWVyX0wgPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ1RpbWVyIEwgZXhwaXJlZCBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogIGlmKHRoaXMuc3RhdGUgPT09IEMuU1RBVFVTX0FDQ0VQVEVEKSB7CiAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICAgIHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpOwogIH0KfTsKCkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24oKSB7CiAgaWYgKCF0aGlzLnRyYW5zcG9ydEVycm9yKSB7CiAgICB0aGlzLnRyYW5zcG9ydEVycm9yID0gdHJ1ZTsKCiAgICB0aGlzLmxvZ2dlci5sb2coJ3RyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogICAgaWYgKHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciAhPT0gbnVsbCkgewogICAgICBTSVAuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKTsKICAgICAgdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyID0gbnVsbDsKICAgIH0KCiAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkwpOwogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5IKTsKICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuSSk7CgogICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgICB0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKICB9Cn07CgpJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbi5wcm90b3R5cGUucmVzZW5kX3Byb3Zpc2lvbmFsID0gZnVuY3Rpb24oKSB7CiAgaWYoIXRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5sYXN0X3Jlc3BvbnNlKSkgewogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKLy8gSU5WSVRFIFNlcnZlciBUcmFuc2FjdGlvbiBSRkMgMzI2MSAxNy4yLjEKSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHN0YXR1c19jb2RlLCByZXNwb25zZSkgewogIHZhciB0ciA9IHRoaXM7CiAgdmFyIGRlZmVycmVkID0gU0lQLlV0aWxzLmRlZmVyKCk7CgogIGlmKHN0YXR1c19jb2RlID49IDEwMCAmJiBzdGF0dXNfY29kZSA8PSAxOTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgIH0KICAgICAgICB0aGlzLmxhc3RfcmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICBicmVhazsKICAgIH0KICB9CgogIGlmKHN0YXR1c19jb2RlID4gMTAwICYmIHN0YXR1c19jb2RlIDw9IDE5OSAmJiB0aGlzLnN0YXRlID09PSBDLlNUQVRVU19QUk9DRUVESU5HKSB7CiAgICAvLyBUcmlnZ2VyIHRoZSByZXNlbmRQcm92aXNpb25hbFRpbWVyIG9ubHkgZm9yIHRoZSBmaXJzdCBub24gMTAwIHByb3Zpc2lvbmFsIHJlc3BvbnNlLgogICAgaWYodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyID09PSBudWxsKSB7CiAgICAgIHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciA9IFNJUC5UaW1lcnMuc2V0SW50ZXJ2YWwodHIucmVzZW5kX3Byb3Zpc2lvbmFsLmJpbmQodHIpLAogICAgICAgIFNJUC5UaW1lcnMuUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUwpOwogICAgfQogIH0gZWxzZSBpZihzdGF0dXNfY29kZSA+PSAyMDAgJiYgc3RhdHVzX2NvZGUgPD0gMjk5KSB7CiAgICBzd2l0Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfQUNDRVBURUQpOwogICAgICAgIHRoaXMubGFzdF9yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICAgIHRoaXMuTCA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9MLmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX0wpOwoKICAgICAgICBpZiAodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyICE9PSBudWxsKSB7CiAgICAgICAgICBTSVAuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKTsKICAgICAgICAgIHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciA9IG51bGw7CiAgICAgICAgfQogICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIEMuU1RBVFVTX0FDQ0VQVEVEOgogICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgcG9pbnQgd2lsbCBiZSByZWFjaGVkIGZvciBwcm9jZWVkaW5nIHRyLnN0YXRlIGFsc28uCiAgICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICB9CiAgfSBlbHNlIGlmKHN0YXR1c19jb2RlID49IDMwMCAmJiBzdGF0dXNfY29kZSA8PSA2OTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICBpZiAodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyICE9PSBudWxsKSB7CiAgICAgICAgICBTSVAuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKTsKICAgICAgICAgIHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX0NPTVBMRVRFRCk7CiAgICAgICAgICB0aGlzLkggPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfSC5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9IKTsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTsKfTsKCi8qKgogKiBAZnVuY3Rpb24KICogQHBhcmFtIHtTSVAuVUF9IHVhCiAqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdAogKgogKiBAcmV0dXJuIHtib29sZWFufQogKiBJTlZJVEU6CiAqICBfdHJ1ZV8gaWYgcmV0cmFuc21pc3Npb24KICogIF9mYWxzZV8gbmV3IHJlcXVlc3QKICoKICogQUNLOgogKiAgX3RydWVfICBBQ0sgdG8gbm9uMnh4IHJlc3BvbnNlCiAqICBfZmFsc2VfIEFDSyBtdXN0IGJlIHBhc3NlZCB0byBUVSAoYWNjZXB0ZWQgc3RhdGUpCiAqICAgICAgICAgIEFDSyB0byAyeHggcmVzcG9uc2UKICoKICogQ0FOQ0VMOgogKiAgX3RydWVfICBubyBtYXRjaGluZyBpbnZpdGUgdHJhbnNhY3Rpb24KICogIF9mYWxzZV8gbWF0Y2hpbmcgaW52aXRlIHRyYW5zYWN0aW9uIGFuZCBubyBmaW5hbCByZXNwb25zZSBzZW50CiAqCiAqIE9USEVSOgogKiAgX3RydWVfICByZXRyYW5zbWlzc2lvbgogKiAgX2ZhbHNlXyBuZXcgcmVxdWVzdAogKi8KdmFyIGNoZWNrVHJhbnNhY3Rpb24gPSBmdW5jdGlvbih1YSwgcmVxdWVzdCkgewogIHZhciB0cjsKCiAgc3dpdGNoKHJlcXVlc3QubWV0aG9kKSB7CiAgICBjYXNlIFNJUC5DLklOVklURToKICAgICAgdHIgPSB1YS50cmFuc2FjdGlvbnMuaXN0W3JlcXVlc3QudmlhX2JyYW5jaF07CiAgICAgIGlmKHRyKSB7CiAgICAgICAgc3dpdGNoKHRyLnN0YXRlKSB7CiAgICAgICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgICAgIHRyLnRyYW5zcG9ydC5zZW5kKHRyLmxhc3RfcmVzcG9uc2UpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIC8vIFJGQyA2MDI2IDcuMSBJbnZpdGUgcmV0cmFuc21pc3Npb24KICAgICAgICAgICAgLy9yZWNlaXZlZCB3aGlsZSBpbiBDLlNUQVRVU19BQ0NFUFRFRCBzdGF0ZS4gQWJzb3JiIGl0LgogICAgICAgICAgY2FzZSBDLlNUQVRVU19BQ0NFUFRFRDoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSBTSVAuQy5BQ0s6CiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLmlzdFtyZXF1ZXN0LnZpYV9icmFuY2hdOwoKICAgICAgLy8gUkZDIDYwMjYgNy4xCiAgICAgIGlmKHRyKSB7CiAgICAgICAgaWYodHIuc3RhdGUgPT09IEMuU1RBVFVTX0FDQ0VQVEVEKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmKHRyLnN0YXRlID09PSBDLlNUQVRVU19DT01QTEVURUQpIHsKICAgICAgICAgIHRyLnN0YXRlID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgdHIuSSA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9JLmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX0kpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBBQ0sgdG8gMlhYIFJlc3BvbnNlLgogICAgICBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlIFNJUC5DLkNBTkNFTDoKICAgICAgdHIgPSB1YS50cmFuc2FjdGlvbnMuaXN0W3JlcXVlc3QudmlhX2JyYW5jaF07CiAgICAgIGlmKHRyKSB7CiAgICAgICAgcmVxdWVzdC5yZXBseV9zbCgyMDApOwogICAgICAgIGlmKHRyLnN0YXRlID09PSBDLlNUQVRVU19QUk9DRUVESU5HKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXF1ZXN0LnJlcGx5X3NsKDQ4MSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgoKICAgICAgLy8gTm9uLUlOVklURSBTZXJ2ZXIgVHJhbnNhY3Rpb24gUkZDIDMyNjEgMTcuMi4yCiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLm5pc3RbcmVxdWVzdC52aWFfYnJhbmNoXTsKICAgICAgaWYodHIpIHsKICAgICAgICBzd2l0Y2godHIuc3RhdGUpIHsKICAgICAgICAgIGNhc2UgQy5TVEFUVVNfVFJZSU5HOgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICAgIGNhc2UgQy5TVEFUVVNfQ09NUExFVEVEOgogICAgICAgICAgICB0ci50cmFuc3BvcnQuc2VuZCh0ci5sYXN0X3Jlc3BvbnNlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGJyZWFrOwogIH0KfTsKClNJUC5UcmFuc2FjdGlvbnMgPSB7CiAgQzogQywKICBjaGVja1RyYW5zYWN0aW9uOiBjaGVja1RyYW5zYWN0aW9uLAogIE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uOiBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwKICBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbjogSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sCiAgQWNrQ2xpZW50VHJhbnNhY3Rpb246IEFja0NsaWVudFRyYW5zYWN0aW9uLAogIE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uOiBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiwKICBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbjogSW52aXRlU2VydmVyVHJhbnNhY3Rpb24KfTsKCn07Cgp9LHt9XSwzMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgVHJhbnNwb3J0CiAqLwoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICogQGNsYXNzIFRyYW5zcG9ydAogKiBAcGFyYW0ge1NJUC5VQX0gdWEKICogQHBhcmFtIHtPYmplY3R9IHNlcnZlciB3c19zZXJ2ZXIgT2JqZWN0CiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIFdlYlNvY2tldCkgewp2YXIgVHJhbnNwb3J0LAogIEMgPSB7CiAgICAvLyBUcmFuc3BvcnQgc3RhdHVzIGNvZGVzCiAgICBTVEFUVVNfUkVBRFk6ICAgICAgICAwLAogICAgU1RBVFVTX0RJU0NPTk5FQ1RFRDogMSwKICAgIFNUQVRVU19FUlJPUjogICAgICAgIDIKICB9OwoKLyoqCiAqIENvbXB1dGUgYW4gYW1vdW50IG9mIHRpbWUgaW4gc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBzZW5kaW5nIGFub3RoZXIKICoga2VlcC1hbGl2ZS4KICogQHJldHVybnMge051bWJlcn0KICovCmZ1bmN0aW9uIGNvbXB1dGVLZWVwQWxpdmVUaW1lb3V0KHVwcGVyQm91bmQpIHsKICB2YXIgbG93ZXJCb3VuZCA9IHVwcGVyQm91bmQgKiAwLjg7CiAgcmV0dXJuIDEwMDAgKiAoTWF0aC5yYW5kb20oKSAqICh1cHBlckJvdW5kIC0gbG93ZXJCb3VuZCkgKyBsb3dlckJvdW5kKTsKfQoKVHJhbnNwb3J0ID0gZnVuY3Rpb24odWEsIHNlcnZlcikgewoKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnRyYW5zcG9ydCcpOwogIHRoaXMudWEgPSB1YTsKICB0aGlzLndzID0gbnVsbDsKICB0aGlzLnNlcnZlciA9IHNlcnZlcjsKICB0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA9IDA7CiAgdGhpcy5jbG9zZWQgPSBmYWxzZTsKICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogIHRoaXMucmVjb25uZWN0VGltZXIgPSBudWxsOwogIHRoaXMubGFzdFRyYW5zcG9ydEVycm9yID0ge307CgogIHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwgPSB1YS5jb25maWd1cmF0aW9uLmtlZXBBbGl2ZUludGVydmFsOwogIHRoaXMua2VlcEFsaXZlVGltZW91dCA9IG51bGw7CiAgdGhpcy5rZWVwQWxpdmVUaW1lciA9IG51bGw7CgogIHRoaXMudWEudHJhbnNwb3J0ID0gdGhpczsKCiAgLy8gQ29ubmVjdAogIHRoaXMuY29ubmVjdCgpOwp9OwoKVHJhbnNwb3J0LnByb3RvdHlwZSA9IHsKICAvKioKICAgKiBTZW5kIGEgbWVzc2FnZS4KICAgKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R8U3RyaW5nfSBtc2cKICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0KICAgKi8KICBzZW5kOiBmdW5jdGlvbihtc2cpIHsKICAgIHZhciBtZXNzYWdlID0gbXNnLnRvU3RyaW5nKCk7CgogICAgaWYodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7CiAgICAgIGlmICh0aGlzLnVhLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ3NlbmRpbmcgV2ViU29ja2V0IG1lc3NhZ2U6XG5cbicgKyBtZXNzYWdlICsgJ1xuJyk7CiAgICAgIH0KICAgICAgdGhpcy53cy5zZW5kKG1lc3NhZ2UpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3VuYWJsZSB0byBzZW5kIG1lc3NhZ2UsIFdlYlNvY2tldCBpcyBub3Qgb3BlbicpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogU2VuZCBhIGtlZXAtYWxpdmUgKGEgZG91YmxlLUNSTEYgc2VxdWVuY2UpLgogICAqIEBwcml2YXRlCiAgICogQHJldHVybnMge0Jvb2xlYW59CiAgICovCiAgc2VuZEtlZXBBbGl2ZTogZnVuY3Rpb24oKSB7CiAgICBpZih0aGlzLmtlZXBBbGl2ZVRpbWVvdXQpIHsgcmV0dXJuOyB9CgogICAgdGhpcy5rZWVwQWxpdmVUaW1lb3V0ID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnVhLmVtaXQoJ2tlZXBBbGl2ZVRpbWVvdXQnKTsKICAgIH0uYmluZCh0aGlzKSwgMTAwMDApOwoKICAgIHJldHVybiB0aGlzLnNlbmQoJ1xyXG5cclxuJyk7CiAgfSwKCiAgLyoqCiAgICogU3RhcnQgc2VuZGluZyBrZWVwLWFsaXZlcy4KICAgKiBAcHJpdmF0ZQogICAqLwogIHN0YXJ0U2VuZGluZ0tlZXBBbGl2ZXM6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwgJiYgIXRoaXMua2VlcEFsaXZlVGltZXIpIHsKICAgICAgdGhpcy5rZWVwQWxpdmVUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLnNlbmRLZWVwQWxpdmUoKTsKICAgICAgICB0aGlzLmtlZXBBbGl2ZVRpbWVyID0gbnVsbDsKICAgICAgICB0aGlzLnN0YXJ0U2VuZGluZ0tlZXBBbGl2ZXMoKTsKICAgICAgfS5iaW5kKHRoaXMpLCBjb21wdXRlS2VlcEFsaXZlVGltZW91dCh0aGlzLmtlZXBBbGl2ZUludGVydmFsKSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogU3RvcCBzZW5kaW5nIGtlZXAtYWxpdmVzLgogICAqIEBwcml2YXRlCiAgICovCiAgc3RvcFNlbmRpbmdLZWVwQWxpdmVzOiBmdW5jdGlvbigpIHsKICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMua2VlcEFsaXZlVGltZXIpOwogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5rZWVwQWxpdmVUaW1lb3V0KTsKICAgIHRoaXMua2VlcEFsaXZlVGltZXIgPSBudWxsOwogICAgdGhpcy5rZWVwQWxpdmVUaW1lb3V0ID0gbnVsbDsKICB9LAoKICAvKioKICAqIERpc2Nvbm5lY3Qgc29ja2V0LgogICovCiAgZGlzY29ubmVjdDogZnVuY3Rpb24oKSB7CiAgICBpZih0aGlzLndzKSB7CiAgICAgIC8vIENsZWFyIHJlY29ubmVjdFRpbWVyCiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZXIpOwoKICAgICAgdGhpcy5zdG9wU2VuZGluZ0tlZXBBbGl2ZXMoKTsKCiAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTsKICAgICAgdGhpcy5sb2dnZXIubG9nKCdjbG9zaW5nIFdlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpKTsKICAgICAgdGhpcy53cy5jbG9zZSgpOwogICAgfQoKICAgIGlmICh0aGlzLnJlY29ubmVjdFRpbWVyICE9PSBudWxsKSB7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZXIpOwogICAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbnVsbDsKICAgICAgdGhpcy51YS5lbWl0KCdkaXNjb25uZWN0ZWQnLCB7CiAgICAgICAgdHJhbnNwb3J0OiB0aGlzLAogICAgICAgIGNvZGU6IHRoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGUsCiAgICAgICAgcmVhc29uOiB0aGlzLmxhc3RUcmFuc3BvcnRFcnJvci5yZWFzb24KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgKiBDb25uZWN0IHNvY2tldC4KICAqLwogIGNvbm5lY3Q6IGZ1bmN0aW9uKCkgewogICAgdmFyIHRyYW5zcG9ydCA9IHRoaXM7CgogICAgaWYodGhpcy53cyAmJiAodGhpcy53cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTiB8fCB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSkgewogICAgICB0aGlzLmxvZ2dlci5sb2coJ1dlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpICsgJyBpcyBhbHJlYWR5IGNvbm5lY3RlZCcpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYodGhpcy53cykgewogICAgICB0aGlzLndzLmNsb3NlKCk7CiAgICB9CgogICAgdGhpcy5sb2dnZXIubG9nKCdjb25uZWN0aW5nIHRvIFdlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpKTsKICAgIHRoaXMudWEub25UcmFuc3BvcnRDb25uZWN0aW5nKHRoaXMsCiAgICAgICh0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA9PT0gMCk/MTp0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyk7CgogICAgdHJ5IHsKICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQodGhpcy5zZXJ2ZXIud3NfdXJpLCAnc2lwJyk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgdGhpcy5sb2dnZXIud2FybignZXJyb3IgY29ubmVjdGluZyB0byBXZWJTb2NrZXQgJyArIHRoaXMuc2VydmVyLndzX3VyaSArICc6ICcgKyBlKTsKICAgIH0KCiAgICB0aGlzLndzLmJpbmFyeVR5cGUgPSAnYXJyYXlidWZmZXInOwoKICAgIHRoaXMud3Mub25vcGVuID0gZnVuY3Rpb24oKSB7CiAgICAgIHRyYW5zcG9ydC5vbk9wZW4oKTsKICAgIH07CgogICAgdGhpcy53cy5vbmNsb3NlID0gZnVuY3Rpb24oZSkgewogICAgICB0cmFuc3BvcnQub25DbG9zZShlKTsKICAgIH07CgogICAgdGhpcy53cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7CiAgICAgIHRyYW5zcG9ydC5vbk1lc3NhZ2UoZSk7CiAgICB9OwoKICAgIHRoaXMud3Mub25lcnJvciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgdHJhbnNwb3J0Lm9uRXJyb3IoZSk7CiAgICB9OwogIH0sCgogIC8vIFRyYW5zcG9ydCBFdmVudCBIYW5kbGVycwoKICAvKioKICAqIEBldmVudAogICogQHBhcmFtIHtldmVudH0gZQogICovCiAgb25PcGVuOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTsKCiAgICB0aGlzLmxvZ2dlci5sb2coJ1dlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpICsgJyBjb25uZWN0ZWQnKTsKICAgIC8vIENsZWFyIHJlY29ubmVjdFRpbWVyIHNpbmNlIHdlIGFyZSBub3QgZGlzY29ubmVjdGVkCiAgICBpZiAodGhpcy5yZWNvbm5lY3RUaW1lciAhPT0gbnVsbCkgewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlY29ubmVjdFRpbWVyKTsKICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lciA9IG51bGw7CiAgICB9CiAgICAvLyBSZXNldCByZWNvbm5lY3Rpb25fYXR0ZW1wdHMKICAgIHRoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzID0gMDsKICAgIC8vIERpc2FibGUgY2xvc2VkCiAgICB0aGlzLmNsb3NlZCA9IGZhbHNlOwogICAgLy8gVHJpZ2dlciBvblRyYW5zcG9ydENvbm5lY3RlZCBjYWxsYmFjawogICAgdGhpcy51YS5vblRyYW5zcG9ydENvbm5lY3RlZCh0aGlzKTsKICAgIC8vIFN0YXJ0IHNlbmRpbmcga2VlcC1hbGl2ZXMKICAgIHRoaXMuc3RhcnRTZW5kaW5nS2VlcEFsaXZlcygpOwogIH0sCgogIC8qKgogICogQGV2ZW50CiAgKiBAcGFyYW0ge2V2ZW50fSBlCiAgKi8KICBvbkNsb3NlOiBmdW5jdGlvbihlKSB7CiAgICB2YXIgY29ubmVjdGVkX2JlZm9yZSA9IHRoaXMuY29ubmVjdGVkOwoKICAgIHRoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGUgPSBlLmNvZGU7CiAgICB0aGlzLmxhc3RUcmFuc3BvcnRFcnJvci5yZWFzb24gPSBlLnJlYXNvbjsKCiAgICB0aGlzLnN0b3BTZW5kaW5nS2VlcEFsaXZlcygpOwoKICAgIGlmICh0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA+IDApIHsKICAgICAgdGhpcy5sb2dnZXIubG9nKCdSZWNvbm5lY3Rpb24gYXR0ZW1wdCAnICsgdGhpcy5yZWNvbm5lY3Rpb25fYXR0ZW1wdHMgKyAnIGZhaWxlZCAoY29kZTogJyArIGUuY29kZSArIChlLnJlYXNvbj8gJ3wgcmVhc29uOiAnICsgZS5yZWFzb24gOiAnJykgKycpJyk7CiAgICAgIHRoaXMucmVjb25uZWN0KCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogICAgICB0aGlzLmxvZ2dlci5sb2coJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQgKGNvZGU6ICcgKyBlLmNvZGUgKyAoZS5yZWFzb24/ICd8IHJlYXNvbjogJyArIGUucmVhc29uIDogJycpICsnKScpOwoKICAgICAgaWYoZS53YXNDbGVhbiA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdXZWJTb2NrZXQgYWJydXB0IGRpc2Nvbm5lY3Rpb24nKTsKICAgICAgfQogICAgICAvLyBUcmFuc3BvcnQgd2FzIGNvbm5lY3RlZAogICAgICBpZihjb25uZWN0ZWRfYmVmb3JlID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy51YS5vblRyYW5zcG9ydENsb3NlZCh0aGlzKTsKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIHJlcXVlc3RlZCB0byBjbG9zZS4KICAgICAgICBpZighdGhpcy5jbG9zZWQpIHsKICAgICAgICAgIHRoaXMucmVjb25uZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudWEuZW1pdCgnZGlzY29ubmVjdGVkJywgewogICAgICAgICAgICB0cmFuc3BvcnQ6IHRoaXMsCiAgICAgICAgICAgIGNvZGU6IHRoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGUsCiAgICAgICAgICAgIHJlYXNvbjogdGhpcy5sYXN0VHJhbnNwb3J0RXJyb3IucmVhc29uCiAgICAgICAgICB9KTsKCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IGNvbm5lY3Rpb24gYXR0ZW1wdAogICAgICAgIC8vTmV0d29yayBlcnJvcgogICAgICAgIHRoaXMudWEub25UcmFuc3BvcnRFcnJvcih0aGlzKTsKICAgICAgfQogICAgfQogIH0sCgogIC8qKgogICogQGV2ZW50CiAgKiBAcGFyYW0ge2V2ZW50fSBlCiAgKi8KICBvbk1lc3NhZ2U6IGZ1bmN0aW9uKGUpIHsKICAgIHZhciBtZXNzYWdlLCB0cmFuc2FjdGlvbiwKICAgICAgZGF0YSA9IGUuZGF0YTsKCiAgICAvLyBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIuIElnbm9yZSBpdC4KICAgIGlmKGRhdGEgPT09ICdcclxuJykgewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLmtlZXBBbGl2ZVRpbWVvdXQpOwogICAgICB0aGlzLmtlZXBBbGl2ZVRpbWVvdXQgPSBudWxsOwoKICAgICAgaWYgKHRoaXMudWEuY29uZmlndXJhdGlvbi50cmFjZVNpcCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMubG9nZ2VyLmxvZygncmVjZWl2ZWQgV2ViU29ja2V0IG1lc3NhZ2Ugd2l0aCBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2UnKTsKICAgICAgfQoKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFdlYlNvY2tldCBiaW5hcnkgbWVzc2FnZS4KICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykgewogICAgICB0cnkgewogICAgICAgIGRhdGEgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KGRhdGEpKTsKICAgICAgfSBjYXRjaChldnQpIHsKICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdyZWNlaXZlZCBXZWJTb2NrZXQgYmluYXJ5IG1lc3NhZ2UgZmFpbGVkIHRvIGJlIGNvbnZlcnRlZCBpbnRvIHN0cmluZywgbWVzc2FnZSBkaXNjYXJkZWQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnVhLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ3JlY2VpdmVkIFdlYlNvY2tldCBiaW5hcnkgbWVzc2FnZTpcblxuJyArIGRhdGEgKyAnXG4nKTsKICAgICAgfQogICAgfQoKICAgIC8vIFdlYlNvY2tldCB0ZXh0IG1lc3NhZ2UuCiAgICBlbHNlIHsKICAgICAgaWYgKHRoaXMudWEuY29uZmlndXJhdGlvbi50cmFjZVNpcCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMubG9nZ2VyLmxvZygncmVjZWl2ZWQgV2ViU29ja2V0IHRleHQgbWVzc2FnZTpcblxuJyArIGRhdGEgKyAnXG4nKTsKICAgICAgfQogICAgfQoKICAgIG1lc3NhZ2UgPSBTSVAuUGFyc2VyLnBhcnNlTWVzc2FnZShkYXRhLCB0aGlzLnVhKTsKCiAgICBpZiAoIW1lc3NhZ2UpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmKHRoaXMudWEuc3RhdHVzID09PSBTSVAuVUEuQy5TVEFUVVNfVVNFUl9DTE9TRUQgJiYgbWVzc2FnZSBpbnN0YW5jZW9mIFNJUC5JbmNvbWluZ1JlcXVlc3QpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIERvIHNvbWUgc2FuaXR5IGNoZWNrCiAgICBpZihTSVAuc2FuaXR5Q2hlY2sobWVzc2FnZSwgdGhpcy51YSwgdGhpcykpIHsKICAgICAgaWYobWVzc2FnZSBpbnN0YW5jZW9mIFNJUC5JbmNvbWluZ1JlcXVlc3QpIHsKICAgICAgICBtZXNzYWdlLnRyYW5zcG9ydCA9IHRoaXM7CiAgICAgICAgdGhpcy51YS5yZWNlaXZlUmVxdWVzdChtZXNzYWdlKTsKICAgICAgfSBlbHNlIGlmKG1lc3NhZ2UgaW5zdGFuY2VvZiBTSVAuSW5jb21pbmdSZXNwb25zZSkgewogICAgICAgIC8qIFVuaWtlIHN0YXRlZCBpbiAxOC4xLjIsIGlmIGEgcmVzcG9uc2UgZG9lcyBub3QgbWF0Y2gKICAgICAgICAqIGFueSB0cmFuc2FjdGlvbiwgaXQgaXMgZGlzY2FyZGVkIGhlcmUgYW5kIG5vIHBhc3NlZCB0byB0aGUgY29yZQogICAgICAgICogaW4gb3JkZXIgdG8gYmUgZGlzY2FyZGVkIHRoZXJlLgogICAgICAgICovCiAgICAgICAgc3dpdGNoKG1lc3NhZ2UubWV0aG9kKSB7CiAgICAgICAgICBjYXNlIFNJUC5DLklOVklURToKICAgICAgICAgICAgdHJhbnNhY3Rpb24gPSB0aGlzLnVhLnRyYW5zYWN0aW9ucy5pY3RbbWVzc2FnZS52aWFfYnJhbmNoXTsKICAgICAgICAgICAgaWYodHJhbnNhY3Rpb24pIHsKICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5yZWNlaXZlUmVzcG9uc2UobWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIFNJUC5DLkFDSzoKICAgICAgICAgICAgLy8gSnVzdCBpbiBjYXNlIDstKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gdGhpcy51YS50cmFuc2FjdGlvbnMubmljdFttZXNzYWdlLnZpYV9icmFuY2hdOwogICAgICAgICAgICBpZih0cmFuc2FjdGlvbikgewogICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShtZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAqIEBldmVudAogICogQHBhcmFtIHtldmVudH0gZQogICovCiAgb25FcnJvcjogZnVuY3Rpb24oZSkgewogICAgdGhpcy5sb2dnZXIud2FybignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShlKSk7CiAgfSwKCiAgLyoqCiAgKiBSZWNvbm5lY3Rpb24gYXR0ZW1wdCBsb2dpYy4KICAqIEBwcml2YXRlCiAgKi8KICByZWNvbm5lY3Q6IGZ1bmN0aW9uKCkgewogICAgdmFyIHRyYW5zcG9ydCA9IHRoaXM7CgogICAgdGhpcy5yZWNvbm5lY3Rpb25fYXR0ZW1wdHMgKz0gMTsKCiAgICBpZih0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA+IHRoaXMudWEuY29uZmlndXJhdGlvbi53c1NlcnZlck1heFJlY29ubmVjdGlvbikgewogICAgICB0aGlzLmxvZ2dlci53YXJuKCdtYXhpbXVtIHJlY29ubmVjdGlvbiBhdHRlbXB0cyBmb3IgV2ViU29ja2V0ICcgKyB0aGlzLnNlcnZlci53c191cmkpOwogICAgICB0aGlzLnVhLm9uVHJhbnNwb3J0RXJyb3IodGhpcyk7CiAgICB9IGVsc2UgaWYgKHRoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzID09PSAxKSB7CiAgICAgIHRoaXMubG9nZ2VyLmxvZygnQ29ubmVjdGlvbiB0byBXZWJTb2NrZXQgJyArIHRoaXMuc2VydmVyLndzX3VyaSArICcgc2V2ZXJlZCwgYXR0ZW1wdGluZyBmaXJzdCByZWNvbm5lY3QnKTsKICAgICAgdHJhbnNwb3J0LmNvbm5lY3QoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9nZ2VyLmxvZygndHJ5aW5nIHRvIHJlY29ubmVjdCB0byBXZWJTb2NrZXQgJyArIHRoaXMuc2VydmVyLndzX3VyaSArICcgKHJlY29ubmVjdGlvbiBhdHRlbXB0ICcgKyB0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyArICcpJyk7CgogICAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHRyYW5zcG9ydC5jb25uZWN0KCk7CiAgICAgICAgdHJhbnNwb3J0LnJlY29ubmVjdFRpbWVyID0gbnVsbDsKICAgICAgfSwgdGhpcy51YS5jb25maWd1cmF0aW9uLndzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dCAqIDEwMDApOwogICAgfQogIH0KfTsKClRyYW5zcG9ydC5DID0gQzsKcmV0dXJuIFRyYW5zcG9ydDsKfTsKCn0se31dLDMzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAYXVnbWVudHMgU0lQCiAqIEBjbGFzcyBDbGFzcyBjcmVhdGluZyBhIFNJUCBVc2VyIEFnZW50LgogKiBAcGFyYW0ge2Z1bmN0aW9uIHJldHVybmluZyBTSVAuTWVkaWFIYW5kbGVyfSBbY29uZmlndXJhdGlvbi5tZWRpYUhhbmRsZXJGYWN0b3J5XQogKiAgICAgICAgQSBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgYnkgZWFjaCBvZiB0aGUgVUEncyBTZXNzaW9ucyB0byBidWlsZCB0aGUgTWVkaWFIYW5kbGVyIGZvciB0aGF0IFNlc3Npb24uCiAqICAgICAgICBJZiBubyAob3IgYSBmYWxzeSkgdmFsdWUgaXMgcHJvdmlkZWQsIGVhY2ggU2Vzc2lvbiB3aWxsIHVzZSBhIGRlZmF1bHQgKFdlYlJUQykgTWVkaWFIYW5kbGVyLgogKgogKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ3VyYXRpb24ubWVkaWFdIGdldHMgcGFzc2VkIHRvIFNJUC5NZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24gYXMgbWVkaWFIaW50CiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7CnZhciBVQSwKICBDID0gewogICAgLy8gVUEgc3RhdHVzIGNvZGVzCiAgICBTVEFUVVNfSU5JVDogICAgICAgICAgICAgICAgMCwKICAgIFNUQVRVU19TVEFSVElORzogICAgICAgICAgICAxLAogICAgU1RBVFVTX1JFQURZOiAgICAgICAgICAgICAgIDIsCiAgICBTVEFUVVNfVVNFUl9DTE9TRUQ6ICAgICAgICAgMywKICAgIFNUQVRVU19OT1RfUkVBRFk6ICAgICAgICAgICA0LAoKICAgIC8vIFVBIGVycm9yIGNvZGVzCiAgICBDT05GSUdVUkFUSU9OX0VSUk9SOiAgMSwKICAgIE5FVFdPUktfRVJST1I6ICAgICAgICAyLAoKICAgIEFMTE9XRURfTUVUSE9EUzogWwogICAgICAnQUNLJywKICAgICAgJ0NBTkNFTCcsCiAgICAgICdJTlZJVEUnLAogICAgICAnTUVTU0FHRScsCiAgICAgICdCWUUnLAogICAgICAnT1BUSU9OUycsCiAgICAgICdJTkZPJywKICAgICAgJ05PVElGWScsCiAgICAgICdSRUZFUicKICAgIF0sCgogICAgQUNDRVBURURfQk9EWV9UWVBFUzogWwogICAgICAnYXBwbGljYXRpb24vc2RwJywKICAgICAgJ2FwcGxpY2F0aW9uL2R0bWYtcmVsYXknCiAgICBdLAoKICAgIE1BWF9GT1JXQVJEUzogNzAsCiAgICBUQUdfTEVOR1RIOiAxMAogIH07CgpVQSA9IGZ1bmN0aW9uKGNvbmZpZ3VyYXRpb24pIHsKICB2YXIgc2VsZiA9IHRoaXM7CgogIC8vIEhlbHBlciBmdW5jdGlvbiBmb3IgZm9yd2FyZGluZyBldmVudHMKICBmdW5jdGlvbiBzZWxmRW1pdCh0eXBlKSB7CiAgICAvL3JlZ2lzdHJhdGlvbkZhaWxlZCBoYW5kbGVyIGlzIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzLiBBbGxvdyBldmVudCBoYW5kbGVycyB0byBiZSBpbnZva2VkIHdpdGggYSB2YXJpYWJsZSBuby4gb2YgYXJndW1lbnRzCiAgICByZXR1cm4gc2VsZi5lbWl0LmJpbmQoc2VsZiwgdHlwZSk7CiAgfQoKICAvLyBTZXQgQWNjZXB0ZWQgQm9keSBUeXBlcwogIEMuQUNDRVBURURfQk9EWV9UWVBFUyA9IEMuQUNDRVBURURfQk9EWV9UWVBFUy50b1N0cmluZygpOwoKICB0aGlzLmxvZyA9IG5ldyBTSVAuTG9nZ2VyRmFjdG9yeSgpOwogIHRoaXMubG9nZ2VyID0gdGhpcy5nZXRMb2dnZXIoJ3NpcC51YScpOwoKICB0aGlzLmNhY2hlID0gewogICAgY3JlZGVudGlhbHM6IHt9CiAgfTsKCiAgdGhpcy5jb25maWd1cmF0aW9uID0ge307CiAgdGhpcy5kaWFsb2dzID0ge307CgogIC8vVXNlciBhY3Rpb25zIG91dHNpZGUgYW55IHNlc3Npb24vZGlhbG9nIChNRVNTQUdFKQogIHRoaXMuYXBwbGljYW50cyA9IHt9OwoKICB0aGlzLmRhdGEgPSB7fTsKICB0aGlzLnNlc3Npb25zID0ge307CiAgdGhpcy5zdWJzY3JpcHRpb25zID0ge307CiAgdGhpcy50cmFuc3BvcnQgPSBudWxsOwogIHRoaXMuY29udGFjdCA9IG51bGw7CiAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19JTklUOwogIHRoaXMuZXJyb3IgPSBudWxsOwogIHRoaXMudHJhbnNhY3Rpb25zID0gewogICAgbmlzdDoge30sCiAgICBuaWN0OiB7fSwKICAgIGlzdDoge30sCiAgICBpY3Q6IHt9CiAgfTsKCiAgdGhpcy50cmFuc3BvcnRSZWNvdmVyQXR0ZW1wdHMgPSAwOwogIHRoaXMudHJhbnNwb3J0UmVjb3ZlcnlUaW1lciA9IG51bGw7CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsKICAgIHRyYW5zYWN0aW9uc0NvdW50OiB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHR5cGUsCiAgICAgICAgICB0cmFuc2FjdGlvbnMgPSBbJ25pc3QnLCduaWN0JywnaXN0JywnaWN0J10sCiAgICAgICAgICBjb3VudCA9IDA7CgogICAgICAgIGZvciAodHlwZSBpbiB0cmFuc2FjdGlvbnMpIHsKICAgICAgICAgIGNvdW50ICs9IE9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uc1t0eXBlXV0pLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjb3VudDsKICAgICAgfQogICAgfSwKCiAgICBuaWN0VHJhbnNhY3Rpb25zQ291bnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnNbJ25pY3QnXSkubGVuZ3RoOwogICAgICB9CiAgICB9LAoKICAgIG5pc3RUcmFuc2FjdGlvbnNDb3VudDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9uc1snbmlzdCddKS5sZW5ndGg7CiAgICAgIH0KICAgIH0sCgogICAgaWN0VHJhbnNhY3Rpb25zQ291bnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnNbJ2ljdCddKS5sZW5ndGg7CiAgICAgIH0KICAgIH0sCgogICAgaXN0VHJhbnNhY3Rpb25zQ291bnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnNbJ2lzdCddKS5sZW5ndGg7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgLyoqCiAgICogTG9hZCBjb25maWd1cmF0aW9uCiAgICoKICAgKiBAdGhyb3dzIHtTSVAuRXhjZXB0aW9ucy5Db25maWd1cmF0aW9uRXJyb3J9CiAgICogQHRocm93cyB7VHlwZUVycm9yfQogICAqLwoKICBpZihjb25maWd1cmF0aW9uID09PSB1bmRlZmluZWQpIHsKICAgIGNvbmZpZ3VyYXRpb24gPSB7fTsKICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWd1cmF0aW9uID09PSAnc3RyaW5nJyB8fCBjb25maWd1cmF0aW9uIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICBjb25maWd1cmF0aW9uID0gewogICAgICB1cmk6IGNvbmZpZ3VyYXRpb24KICAgIH07CiAgfQoKICAvLyBBcHBseSBsb2cgY29uZmlndXJhdGlvbiBpZiBwcmVzZW50CiAgaWYgKGNvbmZpZ3VyYXRpb24ubG9nKSB7CiAgICBpZiAoY29uZmlndXJhdGlvbi5sb2cuaGFzT3duUHJvcGVydHkoJ2J1aWx0aW5FbmFibGVkJykpIHsKICAgICAgdGhpcy5sb2cuYnVpbHRpbkVuYWJsZWQgPSBjb25maWd1cmF0aW9uLmxvZy5idWlsdGluRW5hYmxlZDsKICAgIH0KCiAgICBpZiAoY29uZmlndXJhdGlvbi5sb2cuaGFzT3duUHJvcGVydHkoJ2xldmVsJykpIHsKICAgICAgdGhpcy5sb2cubGV2ZWwgPSBjb25maWd1cmF0aW9uLmxvZy5sZXZlbDsKICAgIH0KCiAgICBpZiAoY29uZmlndXJhdGlvbi5sb2cuaGFzT3duUHJvcGVydHkoJ2Nvbm5lY3RvcicpKSB7CiAgICAgIHRoaXMubG9nLmNvbm5lY3RvciA9IGNvbmZpZ3VyYXRpb24ubG9nLmNvbm5lY3RvcjsKICAgIH0KICB9CgogIHRyeSB7CiAgICB0aGlzLmxvYWRDb25maWcoY29uZmlndXJhdGlvbik7CiAgfSBjYXRjaChlKSB7CiAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX05PVF9SRUFEWTsKICAgIHRoaXMuZXJyb3IgPSBDLkNPTkZJR1VSQVRJT05fRVJST1I7CiAgICB0aHJvdyBlOwogIH0KCiAgLy8gSW5pdGlhbGl6ZSByZWdpc3RlckNvbnRleHQKICB0aGlzLnJlZ2lzdGVyQ29udGV4dCA9IG5ldyBTSVAuUmVnaXN0ZXJDb250ZXh0KHRoaXMpOwogIHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uKCdmYWlsZWQnLCBzZWxmRW1pdCgncmVnaXN0cmF0aW9uRmFpbGVkJykpOwogIHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uKCdyZWdpc3RlcmVkJywgc2VsZkVtaXQoJ3JlZ2lzdGVyZWQnKSk7CiAgdGhpcy5yZWdpc3RlckNvbnRleHQub24oJ3VucmVnaXN0ZXJlZCcsIHNlbGZFbWl0KCd1bnJlZ2lzdGVyZWQnKSk7CgogIGlmKHRoaXMuY29uZmlndXJhdGlvbi5hdXRvc3RhcnQpIHsKICAgIHRoaXMuc3RhcnQoKTsKICB9CgogIGlmICh0eXBlb2YgZW52aXJvbm1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgewogICAgLy8gR29vZ2xlIENocm9tZSBQYWNrYWdlZCBBcHBzIGRvbid0IGFsbG93ICd1bmxvYWQnIGxpc3RlbmVyczoKICAgIC8vIHVubG9hZCBpcyBub3QgYXZhaWxhYmxlIGluIHBhY2thZ2VkIGFwcHMKICAgIGlmICghKGdsb2JhbC5jaHJvbWUgJiYgZ2xvYmFsLmNocm9tZS5hcHAgJiYgZ2xvYmFsLmNocm9tZS5hcHAucnVudGltZSkpIHsKICAgICAgZW52aXJvbm1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgdGhpcy5zdG9wLmJpbmQodGhpcykpOwogICAgfQogIH0KfTsKVUEucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgovLz09PT09PT09PT09PT09PT09Ci8vICBIaWdoIExldmVsIEFQSQovLz09PT09PT09PT09PT09PT09CgpVQS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdGhpcy5jb25maWd1cmF0aW9uLnJlZ2lzdGVyID0gdHJ1ZTsKICB0aGlzLnJlZ2lzdGVyQ29udGV4dC5yZWdpc3RlcihvcHRpb25zKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICogVW5yZWdpc3Rlci4KICoKICogQHBhcmFtIHtCb29sZWFufSBbYWxsXSB1bnJlZ2lzdGVyIGFsbCB1c2VyIGJpbmRpbmdzLgogKgogKi8KVUEucHJvdG90eXBlLnVucmVnaXN0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdGhpcy5jb25maWd1cmF0aW9uLnJlZ2lzdGVyID0gZmFsc2U7CgogIHZhciBjb250ZXh0ID0gdGhpcy5yZWdpc3RlckNvbnRleHQ7CiAgdGhpcy5hZnRlckNvbm5lY3RlZChjb250ZXh0LnVucmVnaXN0ZXIuYmluZChjb250ZXh0LCBvcHRpb25zKSk7CgogIHJldHVybiB0aGlzOwp9OwoKVUEucHJvdG90eXBlLmlzUmVnaXN0ZXJlZCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzLnJlZ2lzdGVyQ29udGV4dC5yZWdpc3RlcmVkOwp9OwoKLyoqCiAqIENvbm5lY3Rpb24gc3RhdGUuCiAqIEBwYXJhbSB7Qm9vbGVhbn0KICovClVBLnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzLnRyYW5zcG9ydCA/IHRoaXMudHJhbnNwb3J0LmNvbm5lY3RlZCA6IGZhbHNlOwp9OwoKVUEucHJvdG90eXBlLmFmdGVyQ29ubmVjdGVkID0gZnVuY3Rpb24gYWZ0ZXJDb25uZWN0ZWQgKGNhbGxiYWNrKSB7CiAgaWYgKHRoaXMuaXNDb25uZWN0ZWQoKSkgewogICAgY2FsbGJhY2soKTsKICB9IGVsc2UgewogICAgdGhpcy5vbmNlKCdjb25uZWN0ZWQnLCBjYWxsYmFjayk7CiAgfQp9OwoKLyoqCiAqIE1ha2UgYW4gb3V0Z29pbmcgY2FsbC4KICoKICogQHBhcmFtIHtTdHJpbmd9IHRhcmdldAogKiBAcGFyYW0ge09iamVjdH0gdmlld3MKICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLm1lZGlhXSBnZXRzIHBhc3NlZCB0byBTSVAuTWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uIGFzIG1lZGlhSGludAogKgogKiBAdGhyb3dzIHtUeXBlRXJyb3J9CiAqCiAqLwpVQS5wcm90b3R5cGUuaW52aXRlID0gZnVuY3Rpb24odGFyZ2V0LCBvcHRpb25zKSB7CiAgdmFyIGNvbnRleHQgPSBuZXcgU0lQLkludml0ZUNsaWVudENvbnRleHQodGhpcywgdGFyZ2V0LCBvcHRpb25zKTsKCiAgdGhpcy5hZnRlckNvbm5lY3RlZChjb250ZXh0Lmludml0ZS5iaW5kKGNvbnRleHQpKTsKICByZXR1cm4gY29udGV4dDsKfTsKClVBLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbih0YXJnZXQsIGV2ZW50LCBvcHRpb25zKSB7CiAgdmFyIHN1YiA9IG5ldyBTSVAuU3Vic2NyaXB0aW9uKHRoaXMsIHRhcmdldCwgZXZlbnQsIG9wdGlvbnMpOwoKICB0aGlzLmFmdGVyQ29ubmVjdGVkKHN1Yi5zdWJzY3JpYmUuYmluZChzdWIpKTsKICByZXR1cm4gc3ViOwp9OwoKLyoqCiAqIFNlbmQgYSBtZXNzYWdlLgogKgogKiBAcGFyYW0ge1N0cmluZ30gdGFyZ2V0CiAqIEBwYXJhbSB7U3RyaW5nfSBib2R5CiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10KICoKICogQHRocm93cyB7VHlwZUVycm9yfQogKgogKi8KVUEucHJvdG90eXBlLm1lc3NhZ2UgPSBmdW5jdGlvbih0YXJnZXQsIGJvZHksIG9wdGlvbnMpIHsKICBpZiAoYm9keSA9PT0gdW5kZWZpbmVkKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgZW5vdWdoIGFyZ3VtZW50cycpOwogIH0KCiAgLy8gVGhlcmUgaXMgbm8gTWVzc2FnZSBtb2R1bGUsIHNvIGl0IGlzIG9rYXkgdGhhdCB0aGUgVUEgaGFuZGxlcyBkZWZhdWx0cyBoZXJlLgogIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG9wdGlvbnMgfHwgT2JqZWN0LnByb3RvdHlwZSk7CiAgb3B0aW9ucy5jb250ZW50VHlwZSB8fCAob3B0aW9ucy5jb250ZW50VHlwZSA9ICd0ZXh0L3BsYWluJyk7CiAgb3B0aW9ucy5ib2R5ID0gYm9keTsKCiAgcmV0dXJuIHRoaXMucmVxdWVzdChTSVAuQy5NRVNTQUdFLCB0YXJnZXQsIG9wdGlvbnMpOwp9OwoKVUEucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAobWV0aG9kLCB0YXJnZXQsIG9wdGlvbnMpIHsKICB2YXIgcmVxID0gbmV3IFNJUC5DbGllbnRDb250ZXh0KHRoaXMsIG1ldGhvZCwgdGFyZ2V0LCBvcHRpb25zKTsKCiAgdGhpcy5hZnRlckNvbm5lY3RlZChyZXEuc2VuZC5iaW5kKHJlcSkpOwogIHJldHVybiByZXE7Cn07CgovKioKICogR3JhY2VmdWxseSBjbG9zZS4KICoKICovClVBLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7CiAgdmFyIHNlc3Npb24sIHN1YnNjcmlwdGlvbiwgYXBwbGljYW50LAogICAgdWEgPSB0aGlzOwoKICBmdW5jdGlvbiB0cmFuc2FjdGlvbnNMaXN0ZW5lcigpIHsKICAgIGlmICh1YS5uaXN0VHJhbnNhY3Rpb25zQ291bnQgPT09IDAgJiYgdWEubmljdFRyYW5zYWN0aW9uc0NvdW50ID09PSAwKSB7CiAgICAgICAgdWEucmVtb3ZlTGlzdGVuZXIoJ3RyYW5zYWN0aW9uRGVzdHJveWVkJywgdHJhbnNhY3Rpb25zTGlzdGVuZXIpOwogICAgICAgIHVhLnRyYW5zcG9ydC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfQoKICB0aGlzLmxvZ2dlci5sb2coJ3VzZXIgcmVxdWVzdGVkIGNsb3N1cmUuLi4nKTsKCiAgaWYodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1VTRVJfQ0xPU0VEKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCdVQSBhbHJlYWR5IGNsb3NlZCcpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvLyBDbGVhciB0cmFuc3BvcnRSZWNvdmVyeVRpbWVyCiAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50cmFuc3BvcnRSZWNvdmVyeVRpbWVyKTsKCiAgLy8gQ2xvc2UgcmVnaXN0ZXJDb250ZXh0CiAgdGhpcy5sb2dnZXIubG9nKCdjbG9zaW5nIHJlZ2lzdGVyQ29udGV4dCcpOwogIHRoaXMucmVnaXN0ZXJDb250ZXh0LmNsb3NlKCk7CgogIC8vIFJ1biAgX3Rlcm1pbmF0ZV8gb24gZXZlcnkgU2Vzc2lvbgogIGZvcihzZXNzaW9uIGluIHRoaXMuc2Vzc2lvbnMpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygnY2xvc2luZyBzZXNzaW9uICcgKyBzZXNzaW9uKTsKICAgIHRoaXMuc2Vzc2lvbnNbc2Vzc2lvbl0udGVybWluYXRlKCk7CiAgfQoKICAvL1J1biBfY2xvc2VfIG9uIGV2ZXJ5IFN1YnNjcmlwdGlvbgogIGZvcihzdWJzY3JpcHRpb24gaW4gdGhpcy5zdWJzY3JpcHRpb25zKSB7CiAgICB0aGlzLmxvZ2dlci5sb2coJ3Vuc3Vic2NyaWJpbmcgZnJvbSBzdWJzY3JpcHRpb24gJyArIHN1YnNjcmlwdGlvbik7CiAgICB0aGlzLnN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uXS5jbG9zZSgpOwogIH0KCiAgLy8gUnVuICBfY2xvc2VfIG9uIGV2ZXJ5IGFwcGxpY2FudAogIGZvcihhcHBsaWNhbnQgaW4gdGhpcy5hcHBsaWNhbnRzKSB7CiAgICB0aGlzLmFwcGxpY2FudHNbYXBwbGljYW50XS5jbG9zZSgpOwogIH0KCiAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19VU0VSX0NMT1NFRDsKCiAgLyoKICAgKiBJZiB0aGUgcmVtYWluaW5nIHRyYW5zYWN0aW9ucyBhcmUgYWxsIElOVklURSB0cmFuc2FjdGlvbnMsIHRoZXJlIGlzIG5vIG5lZWQgdG8KICAgKiB3YWl0IGFueW1vcmUgYmVjYXVzZSBldmVyeSBzZXNzaW9uIGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkIGJ5IHRoaXMgbWV0aG9kLgogICAqIC0gbG9jYWxseSBvcmlnaW5hdGVkIHNlc3Npb25zIHdoZXJlIHRlcm1pbmF0ZWQgKENBTkNFTCBvciBCWUUpCiAgICogLSByZW1vdGVseSBvcmlnaW5hdGVkIHNlc3Npb25zIHdoZXJlIHJlamVjdGVkICg0WFgpIG9yIHRlcm1pbmF0ZWQgKEJZRSkKICAgKiBSZW1haW5pbmcgSU5WSVRFIHRyYW5zYWN0aW9ucyBiZWxvbmcgdGhvIHNlc3Npb25zIHRoYXQgd2hlcmUgYW5zd2VyZWQuIFRoaXMgYXJlIGluCiAgICogJ2FjY2VwdGVkJyBzdGF0ZSBkdWUgdG8gdGltZXJzICdMJyBhbmQgJ00nIGRlZmluZWQgaW4gW1JGQyA2MDI2XQogICAqLwogIGlmICh0aGlzLm5pc3RUcmFuc2FjdGlvbnNDb3VudCA9PT0gMCAmJiB0aGlzLm5pY3RUcmFuc2FjdGlvbnNDb3VudCA9PT0gMCkgewogICAgdGhpcy50cmFuc3BvcnQuZGlzY29ubmVjdCgpOwogIH0gZWxzZSB7CiAgICB0aGlzLm9uKCd0cmFuc2FjdGlvbkRlc3Ryb3llZCcsIHRyYW5zYWN0aW9uc0xpc3RlbmVyKTsKICB9CgogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAqIENvbm5lY3QgdG8gdGhlIFdTIHNlcnZlciBpZiBzdGF0dXMgPSBTVEFUVVNfSU5JVC4KICogUmVzdW1lIFVBIGFmdGVyIGJlaW5nIGNsb3NlZC4KICoKICovClVBLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkgewogIHZhciBzZXJ2ZXI7CgogIHRoaXMubG9nZ2VyLmxvZygndXNlciByZXF1ZXN0ZWQgc3RhcnR1cC4uLicpOwogIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfSU5JVCkgewogICAgc2VydmVyID0gdGhpcy5nZXROZXh0V3NTZXJ2ZXIoKTsKICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfU1RBUlRJTkc7CiAgICBuZXcgU0lQLlRyYW5zcG9ydCh0aGlzLCBzZXJ2ZXIpOwogIH0gZWxzZSBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVVNFUl9DTE9TRUQpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygncmVzdW1pbmcnKTsKICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfUkVBRFk7CiAgICB0aGlzLnRyYW5zcG9ydC5jb25uZWN0KCk7CiAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfU1RBUlRJTkcpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygnVUEgaXMgaW4gU1RBUlRJTkcgc3RhdHVzLCBub3Qgb3BlbmluZyBuZXcgY29ubmVjdGlvbicpOwogIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1JFQURZKSB7CiAgICB0aGlzLmxvZ2dlci5sb2coJ1VBIGlzIGluIFJFQURZIHN0YXR1cywgbm90IHJlc3VtaW5nJyk7CiAgfSBlbHNlIHsKICAgIHRoaXMubG9nZ2VyLmVycm9yKCdDb25uZWN0aW9uIGlzIGRvd24uIEF1dG8tUmVjb3Zlcnkgc3lzdGVtIGlzIHRyeWluZyB0byBjb25uZWN0Jyk7CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCi8qKgogKiBOb3JtYWxpemUgYSBzdHJpbmcgaW50byBhIHZhbGlkIFNJUCByZXF1ZXN0IFVSSQogKgogKiBAcGFyYW0ge1N0cmluZ30gdGFyZ2V0CiAqCiAqIEByZXR1cm5zIHtTSVAuVVJJfHVuZGVmaW5lZH0KICovClVBLnByb3RvdHlwZS5ub3JtYWxpemVUYXJnZXQgPSBmdW5jdGlvbih0YXJnZXQpIHsKICByZXR1cm4gU0lQLlV0aWxzLm5vcm1hbGl6ZVRhcmdldCh0YXJnZXQsIHRoaXMuY29uZmlndXJhdGlvbi5ob3N0cG9ydFBhcmFtcyk7Cn07CgoKLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vICBQcml2YXRlIChGb3IgaW50ZXJuYWwgdXNlKQovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KClVBLnByb3RvdHlwZS5zYXZlQ3JlZGVudGlhbHMgPSBmdW5jdGlvbihjcmVkZW50aWFscykgewogIHRoaXMuY2FjaGUuY3JlZGVudGlhbHNbY3JlZGVudGlhbHMucmVhbG1dID0gdGhpcy5jYWNoZS5jcmVkZW50aWFsc1tjcmVkZW50aWFscy5yZWFsbV0gfHwge307CiAgdGhpcy5jYWNoZS5jcmVkZW50aWFsc1tjcmVkZW50aWFscy5yZWFsbV1bY3JlZGVudGlhbHMudXJpXSA9IGNyZWRlbnRpYWxzOwoKICByZXR1cm4gdGhpczsKfTsKClVBLnByb3RvdHlwZS5nZXRDcmVkZW50aWFscyA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICB2YXIgcmVhbG0sIGNyZWRlbnRpYWxzOwoKICByZWFsbSA9IHJlcXVlc3QucnVyaS5ob3N0OwoKICBpZiAodGhpcy5jYWNoZS5jcmVkZW50aWFsc1tyZWFsbV0gJiYgdGhpcy5jYWNoZS5jcmVkZW50aWFsc1tyZWFsbV1bcmVxdWVzdC5ydXJpXSkgewogICAgY3JlZGVudGlhbHMgPSB0aGlzLmNhY2hlLmNyZWRlbnRpYWxzW3JlYWxtXVtyZXF1ZXN0LnJ1cmldOwogICAgY3JlZGVudGlhbHMubWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7CiAgfQoKICByZXR1cm4gY3JlZGVudGlhbHM7Cn07CgpVQS5wcm90b3R5cGUuZ2V0TG9nZ2VyID0gZnVuY3Rpb24oY2F0ZWdvcnksIGxhYmVsKSB7CiAgcmV0dXJuIHRoaXMubG9nLmdldExvZ2dlcihjYXRlZ29yeSwgbGFiZWwpOwp9OwoKCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIEV2ZW50IEhhbmRsZXJzCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgovKioKICogVHJhbnNwb3J0IENsb3NlIGV2ZW50CiAqIEBwcml2YXRlCiAqIEBldmVudAogKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydC4KICovClVBLnByb3RvdHlwZS5vblRyYW5zcG9ydENsb3NlZCA9IGZ1bmN0aW9uKHRyYW5zcG9ydCkgewogIC8vIFJ1biBfb25UcmFuc3BvcnRFcnJvcl8gY2FsbGJhY2sgb24gZXZlcnkgY2xpZW50IHRyYW5zYWN0aW9uIHVzaW5nIF90cmFuc3BvcnRfCiAgdmFyIHR5cGUsIGlkeCwgbGVuZ3RoLAogICAgY2xpZW50X3RyYW5zYWN0aW9ucyA9IFsnbmljdCcsICdpY3QnLCAnbmlzdCcsICdpc3QnXTsKCiAgdHJhbnNwb3J0LnNlcnZlci5zdGF0dXMgPSBTSVAuVHJhbnNwb3J0LkMuU1RBVFVTX0RJU0NPTk5FQ1RFRDsKICB0aGlzLmxvZ2dlci5sb2coJ2Nvbm5lY3Rpb24gc3RhdGUgc2V0IHRvICcrIFNJUC5UcmFuc3BvcnQuQy5TVEFUVVNfRElTQ09OTkVDVEVEKTsKCiAgbGVuZ3RoID0gY2xpZW50X3RyYW5zYWN0aW9ucy5sZW5ndGg7CiAgZm9yICh0eXBlID0gMDsgdHlwZSA8IGxlbmd0aDsgdHlwZSsrKSB7CiAgICBmb3IoaWR4IGluIHRoaXMudHJhbnNhY3Rpb25zW2NsaWVudF90cmFuc2FjdGlvbnNbdHlwZV1dKSB7CiAgICAgIHRoaXMudHJhbnNhY3Rpb25zW2NsaWVudF90cmFuc2FjdGlvbnNbdHlwZV1dW2lkeF0ub25UcmFuc3BvcnRFcnJvcigpOwogICAgfQogIH0KCiAgLy8gQ2xvc2Ugc2Vzc2lvbnMgaWYgR1JVVSBpcyBub3QgYmVpbmcgdXNlZAogIGlmICghdGhpcy5jb250YWN0LnB1Yl9ncnV1KSB7CiAgICB0aGlzLmNsb3NlU2Vzc2lvbnNPblRyYW5zcG9ydEVycm9yKCk7CiAgfQoKfTsKCi8qKgogKiBVbnJlY292ZXJhYmxlIHRyYW5zcG9ydCBldmVudC4KICogQ29ubmVjdGlvbiByZWF0dGVtcHQgbG9naWMgaGFzIGJlZW4gZG9uZSBhbmQgZGlkbid0IHN1Y2Nlc3MuCiAqIEBwcml2YXRlCiAqIEBldmVudAogKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydC4KICovClVBLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24odHJhbnNwb3J0KSB7CiAgdmFyIHNlcnZlcjsKCiAgdGhpcy5sb2dnZXIubG9nKCd0cmFuc3BvcnQgJyArIHRyYW5zcG9ydC5zZXJ2ZXIud3NfdXJpICsgJyBmYWlsZWQgfCBjb25uZWN0aW9uIHN0YXRlIHNldCB0byAnKyBTSVAuVHJhbnNwb3J0LkMuU1RBVFVTX0VSUk9SKTsKCiAgLy8gQ2xvc2Ugc2Vzc2lvbnMuCiAgLy9NYXJrIHRoaXMgdHJhbnNwb3J0IGFzICdkb3duJwogIHRyYW5zcG9ydC5zZXJ2ZXIuc3RhdHVzID0gU0lQLlRyYW5zcG9ydC5DLlNUQVRVU19FUlJPUjsKCiAgdGhpcy5lbWl0KCdkaXNjb25uZWN0ZWQnLCB7CiAgICB0cmFuc3BvcnQ6IHRyYW5zcG9ydAogIH0pOwoKICAvLyB0cnkgdGhlIG5leHQgdHJhbnNwb3J0IGlmIHRoZSBVQSBpc24ndCBjbG9zZWQKICBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVVNFUl9DTE9TRUQpIHsKICAgIHJldHVybjsKICB9CgogIHNlcnZlciA9IHRoaXMuZ2V0TmV4dFdzU2VydmVyKCk7CgogIGlmKHNlcnZlcikgewogICAgbmV3IFNJUC5UcmFuc3BvcnQodGhpcywgc2VydmVyKTsKICB9ZWxzZSB7CiAgICB0aGlzLmNsb3NlU2Vzc2lvbnNPblRyYW5zcG9ydEVycm9yKCk7CiAgICBpZiAoIXRoaXMuZXJyb3IgfHwgdGhpcy5lcnJvciAhPT0gQy5ORVRXT1JLX0VSUk9SKSB7CiAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfTk9UX1JFQURZOwogICAgICB0aGlzLmVycm9yID0gQy5ORVRXT1JLX0VSUk9SOwogICAgfQogICAgLy8gVHJhbnNwb3J0IFJlY292ZXJ5IHByb2Nlc3MKICAgIHRoaXMucmVjb3ZlclRyYW5zcG9ydCgpOwogIH0KfTsKCi8qKgogKiBUcmFuc3BvcnQgY29ubmVjdGlvbiBldmVudC4KICogQHByaXZhdGUKICogQGV2ZW50CiAqIEBwYXJhbSB7U0lQLlRyYW5zcG9ydH0gdHJhbnNwb3J0LgogKi8KVUEucHJvdG90eXBlLm9uVHJhbnNwb3J0Q29ubmVjdGVkID0gZnVuY3Rpb24odHJhbnNwb3J0KSB7CiAgdGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7CgogIC8vIFJlc2V0IHRyYW5zcG9ydCByZWNvdmVyeSBjb3VudGVyCiAgdGhpcy50cmFuc3BvcnRSZWNvdmVyQXR0ZW1wdHMgPSAwOwoKICB0cmFuc3BvcnQuc2VydmVyLnN0YXR1cyA9IFNJUC5UcmFuc3BvcnQuQy5TVEFUVVNfUkVBRFk7CiAgdGhpcy5sb2dnZXIubG9nKCdjb25uZWN0aW9uIHN0YXRlIHNldCB0byAnKyBTSVAuVHJhbnNwb3J0LkMuU1RBVFVTX1JFQURZKTsKCiAgaWYodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1VTRVJfQ0xPU0VEKSB7CiAgICByZXR1cm47CiAgfQoKICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX1JFQURZOwogIHRoaXMuZXJyb3IgPSBudWxsOwoKICBpZih0aGlzLmNvbmZpZ3VyYXRpb24ucmVnaXN0ZXIpIHsKICAgIHRoaXMuY29uZmlndXJhdGlvbi5hdXRoZW50aWNhdGlvbkZhY3RvcnkuaW5pdGlhbGl6ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnJlZ2lzdGVyQ29udGV4dC5vblRyYW5zcG9ydENvbm5lY3RlZCgpOwogICAgfS5iaW5kKHRoaXMpKTsKICB9CgogIHRoaXMuZW1pdCgnY29ubmVjdGVkJywgewogICAgdHJhbnNwb3J0OiB0cmFuc3BvcnQKICB9KTsKfTsKCgovKioKICogVHJhbnNwb3J0IGNvbm5lY3RpbmcgZXZlbnQKICogQHByaXZhdGUKICogQHBhcmFtIHtTSVAuVHJhbnNwb3J0fSB0cmFuc3BvcnQuCiAqICNwYXJhbSB7SW50ZWdlcn0gYXR0ZW1wdHMuCiAqLwogIFVBLnByb3RvdHlwZS5vblRyYW5zcG9ydENvbm5lY3RpbmcgPSBmdW5jdGlvbih0cmFuc3BvcnQsIGF0dGVtcHRzKSB7CiAgICB0aGlzLmVtaXQoJ2Nvbm5lY3RpbmcnLCB7CiAgICAgIHRyYW5zcG9ydDogdHJhbnNwb3J0LAogICAgICBhdHRlbXB0czogYXR0ZW1wdHMKICAgIH0pOwogIH07CgoKLyoqCiAqIG5ldyBUcmFuc2FjdGlvbgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge1NJUC5UcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb24uCiAqLwpVQS5wcm90b3R5cGUubmV3VHJhbnNhY3Rpb24gPSBmdW5jdGlvbih0cmFuc2FjdGlvbikgewogIHRoaXMudHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uLnR5cGVdW3RyYW5zYWN0aW9uLmlkXSA9IHRyYW5zYWN0aW9uOwogIHRoaXMuZW1pdCgnbmV3VHJhbnNhY3Rpb24nLCB7dHJhbnNhY3Rpb246IHRyYW5zYWN0aW9ufSk7Cn07CgoKLyoqCiAqIGRlc3Ryb3kgVHJhbnNhY3Rpb24KICogQHByaXZhdGUKICogQHBhcmFtIHtTSVAuVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uLgogKi8KVUEucHJvdG90eXBlLmRlc3Ryb3lUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKHRyYW5zYWN0aW9uKSB7CiAgZGVsZXRlIHRoaXMudHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uLnR5cGVdW3RyYW5zYWN0aW9uLmlkXTsKICB0aGlzLmVtaXQoJ3RyYW5zYWN0aW9uRGVzdHJveWVkJywgewogICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uCiAgfSk7Cn07CgoKLy89PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIHJlY2VpdmVSZXF1ZXN0Ci8vPT09PT09PT09PT09PT09PT09PT09PT09PQoKLyoqCiAqIFJlcXVlc3QgcmVjZXB0aW9uCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdC4KICovClVBLnByb3RvdHlwZS5yZWNlaXZlUmVxdWVzdCA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICB2YXIgZGlhbG9nLCBzZXNzaW9uLCBtZXNzYWdlLAogICAgbWV0aG9kID0gcmVxdWVzdC5tZXRob2QsCiAgICB0cmFuc2FjdGlvbiwKICAgIHJlcGxhY2VzLAogICAgcmVwbGFjZWREaWFsb2csCiAgICBzZWxmID0gdGhpczsKCiAgZnVuY3Rpb24gcnVyaU1hdGNoZXMgKHVyaSkgewogICAgcmV0dXJuIHVyaSAmJiB1cmkudXNlciA9PT0gcmVxdWVzdC5ydXJpLnVzZXI7CiAgfQoKICAvLyBDaGVjayB0aGF0IHJlcXVlc3QgVVJJIHBvaW50cyB0byB1cwogIGlmKCEocnVyaU1hdGNoZXModGhpcy5jb25maWd1cmF0aW9uLnVyaSkgfHwKICAgICAgIHJ1cmlNYXRjaGVzKHRoaXMuY29udGFjdC51cmkpIHx8CiAgICAgICBydXJpTWF0Y2hlcyh0aGlzLmNvbnRhY3QucHViX2dydXUpIHx8CiAgICAgICBydXJpTWF0Y2hlcyh0aGlzLmNvbnRhY3QudGVtcF9ncnV1KSkpIHsKICAgIHRoaXMubG9nZ2VyLndhcm4oJ1JlcXVlc3QtVVJJIGRvZXMgbm90IHBvaW50IHRvIHVzJyk7CiAgICBpZiAocmVxdWVzdC5tZXRob2QgIT09IFNJUC5DLkFDSykgewogICAgICByZXF1ZXN0LnJlcGx5X3NsKDQwNCk7CiAgICB9CiAgICByZXR1cm47CiAgfQoKICAvLyBDaGVjayByZXF1ZXN0IFVSSSBzY2hlbWUKICBpZihyZXF1ZXN0LnJ1cmkuc2NoZW1lID09PSBTSVAuQy5TSVBTKSB7CiAgICByZXF1ZXN0LnJlcGx5X3NsKDQxNik7CiAgICByZXR1cm47CiAgfQoKICAvLyBDaGVjayB0cmFuc2FjdGlvbgogIGlmKFNJUC5UcmFuc2FjdGlvbnMuY2hlY2tUcmFuc2FjdGlvbih0aGlzLCByZXF1ZXN0KSkgewogICAgcmV0dXJuOwogIH0KCiAgLyogUkZDMzI2MSAxMi4yLjIKICAgKiBSZXF1ZXN0cyB0aGF0IGRvIG5vdCBjaGFuZ2UgaW4gYW55IHdheSB0aGUgc3RhdGUgb2YgYSBkaWFsb2cgbWF5IGJlCiAgICogcmVjZWl2ZWQgd2l0aGluIGEgZGlhbG9nIChmb3IgZXhhbXBsZSwgYW4gT1BUSU9OUyByZXF1ZXN0KS4KICAgKiBUaGV5IGFyZSBwcm9jZXNzZWQgYXMgaWYgdGhleSBoYWQgYmVlbiByZWNlaXZlZCBvdXRzaWRlIHRoZSBkaWFsb2cuCiAgICovCiAgaWYobWV0aG9kID09PSBTSVAuQy5PUFRJT05TKSB7CiAgICBuZXcgU0lQLlRyYW5zYWN0aW9ucy5Ob25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbihyZXF1ZXN0LCB0aGlzKTsKICAgIHJlcXVlc3QucmVwbHkoMjAwLCBudWxsLCBbCiAgICAgICdBbGxvdzogJysgU0lQLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCksCiAgICAgICdBY2NlcHQ6ICcrIEMuQUNDRVBURURfQk9EWV9UWVBFUwogICAgXSk7CiAgfSBlbHNlIGlmIChtZXRob2QgPT09IFNJUC5DLk1FU1NBR0UpIHsKICAgIG1lc3NhZ2UgPSBuZXcgU0lQLlNlcnZlckNvbnRleHQodGhpcywgcmVxdWVzdCk7CiAgICBtZXNzYWdlLmJvZHkgPSByZXF1ZXN0LmJvZHk7CiAgICBtZXNzYWdlLmNvbnRlbnRfdHlwZSA9IHJlcXVlc3QuZ2V0SGVhZGVyKCdDb250ZW50LVR5cGUnKSB8fCAndGV4dC9wbGFpbic7CgogICAgcmVxdWVzdC5yZXBseSgyMDAsIG51bGwpOwogICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7CiAgfSBlbHNlIGlmIChtZXRob2QgIT09IFNJUC5DLklOVklURSAmJgogICAgICAgICAgICAgbWV0aG9kICE9PSBTSVAuQy5BQ0spIHsKICAgIC8vIExldCB0aG9zZSBtZXRob2RzIHBhc3MgdGhyb3VnaCB0byBub3JtYWwgcHJvY2Vzc2luZyBmb3Igbm93LgogICAgdHJhbnNhY3Rpb24gPSBuZXcgU0lQLlNlcnZlckNvbnRleHQodGhpcywgcmVxdWVzdCk7CiAgfQoKICAvLyBJbml0aWFsIFJlcXVlc3QKICBpZighcmVxdWVzdC50b190YWcpIHsKICAgIHN3aXRjaChtZXRob2QpIHsKICAgICAgY2FzZSBTSVAuQy5JTlZJVEU6CiAgICAgICAgcmVwbGFjZXMgPQogICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLnJlcGxhY2VzICE9PSBTSVAuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUQgJiYKICAgICAgICAgIHJlcXVlc3QucGFyc2VIZWFkZXIoJ3JlcGxhY2VzJyk7CgogICAgICAgIGlmIChyZXBsYWNlcykgewogICAgICAgICAgcmVwbGFjZWREaWFsb2cgPSB0aGlzLmRpYWxvZ3NbcmVwbGFjZXMuY2FsbF9pZCArIHJlcGxhY2VzLnJlcGxhY2VzX3RvX3RhZyArIHJlcGxhY2VzLnJlcGxhY2VzX2Zyb21fdGFnXTsKCiAgICAgICAgICBpZiAoIXJlcGxhY2VkRGlhbG9nKSB7CiAgICAgICAgICAgIC8vUmVwbGFjZWQgaGVhZGVyIHdpdGhvdXQgYSBtYXRjaGluZyBkaWFsb2csIHJlamVjdAogICAgICAgICAgICByZXF1ZXN0LnJlcGx5X3NsKDQ4MSwgbnVsbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSBpZiAocmVwbGFjZWREaWFsb2cub3duZXIuc3RhdHVzID09PSBTSVAuU2Vzc2lvbi5DLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICAgIHJlcXVlc3QucmVwbHlfc2woNjAzLCBudWxsKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNlIGlmIChyZXBsYWNlZERpYWxvZy5zdGF0ZSA9PT0gU0lQLkRpYWxvZy5DLlNUQVRVU19DT05GSVJNRUQgJiYgcmVwbGFjZXMuZWFybHlfb25seSkgewogICAgICAgICAgICByZXF1ZXN0LnJlcGx5X3NsKDQ4NiwgbnVsbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBpc01lZGlhU3VwcG9ydGVkID0gdGhpcy5jb25maWd1cmF0aW9uLm1lZGlhSGFuZGxlckZhY3RvcnkuaXNTdXBwb3J0ZWQ7CiAgICAgICAgaWYoIWlzTWVkaWFTdXBwb3J0ZWQgfHwgaXNNZWRpYVN1cHBvcnRlZCgpKSB7CiAgICAgICAgICBzZXNzaW9uID0gbmV3IFNJUC5JbnZpdGVTZXJ2ZXJDb250ZXh0KHRoaXMsIHJlcXVlc3QpOwogICAgICAgICAgc2Vzc2lvbi5yZXBsYWNlZSA9IHJlcGxhY2VkRGlhbG9nICYmIHJlcGxhY2VkRGlhbG9nLm93bmVyOwogICAgICAgICAgc2Vzc2lvbi5vbignaW52aXRlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHNlbGYuZW1pdCgnaW52aXRlJywgdGhpcyk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5sb2dnZXIud2FybignSU5WSVRFIHJlY2VpdmVkIGJ1dCBXZWJSVEMgaXMgbm90IHN1cHBvcnRlZCcpOwogICAgICAgICAgcmVxdWVzdC5yZXBseSg0ODgpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBTSVAuQy5CWUU6CiAgICAgICAgLy8gT3V0IG9mIGRpYWxvZyBCWUUgcmVjZWl2ZWQKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4MSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU0lQLkMuQ0FOQ0VMOgogICAgICAgIHNlc3Npb24gPSB0aGlzLmZpbmRTZXNzaW9uKHJlcXVlc3QpOwogICAgICAgIGlmKHNlc3Npb24pIHsKICAgICAgICAgIHNlc3Npb24ucmVjZWl2ZVJlcXVlc3QocmVxdWVzdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3JlY2VpdmVkIENBTkNFTCByZXF1ZXN0IGZvciBhIG5vbiBleGlzdGVudCBzZXNzaW9uJyk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFNJUC5DLkFDSzoKICAgICAgICAvKiBBYnNvcmIgaXQuCiAgICAgICAgICogQUNLIHJlcXVlc3Qgd2l0aG91dCBhIGNvcnJlc3BvbmRpbmcgSW52aXRlIFRyYW5zYWN0aW9uCiAgICAgICAgICogYW5kIHdpdGhvdXQgVG8gdGFnLgogICAgICAgICAqLwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIHJlcXVlc3QucmVwbHkoNDA1KTsKICAgICAgICBicmVhazsKICAgIH0KICB9CiAgLy8gSW4tZGlhbG9nIHJlcXVlc3QKICBlbHNlIHsKICAgIGRpYWxvZyA9IHRoaXMuZmluZERpYWxvZyhyZXF1ZXN0KTsKCiAgICBpZihkaWFsb2cpIHsKICAgICAgaWYgKG1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFKSB7CiAgICAgICAgbmV3IFNJUC5UcmFuc2FjdGlvbnMuSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ocmVxdWVzdCwgdGhpcyk7CiAgICAgIH0KICAgICAgZGlhbG9nLnJlY2VpdmVSZXF1ZXN0KHJlcXVlc3QpOwogICAgfSBlbHNlIGlmIChtZXRob2QgPT09IFNJUC5DLk5PVElGWSkgewogICAgICBzZXNzaW9uID0gdGhpcy5maW5kU2Vzc2lvbihyZXF1ZXN0KTsKICAgICAgaWYoc2Vzc2lvbikgewogICAgICAgIHNlc3Npb24ucmVjZWl2ZVJlcXVlc3QocmVxdWVzdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2dnZXIud2FybigncmVjZWl2ZWQgTk9USUZZIHJlcXVlc3QgZm9yIGEgbm9uIGV4aXN0ZW50IHNlc3Npb24nKTsKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4MSwgJ1N1YnNjcmlwdGlvbiBkb2VzIG5vdCBleGlzdCcpOwogICAgICB9CiAgICB9CiAgICAvKiBSRkMzMjYxIDEyLjIuMgogICAgICogUmVxdWVzdCB3aXRoIHRvIHRhZywgYnV0IG5vIG1hdGNoaW5nIGRpYWxvZyBmb3VuZC4KICAgICAqIEV4Y2VwdGlvbjogQUNLIGZvciBhbiBJbnZpdGUgcmVxdWVzdCBmb3Igd2hpY2ggYSBkaWFsb2cgaGFzIG5vdAogICAgICogYmVlbiBjcmVhdGVkLgogICAgICovCiAgICBlbHNlIHsKICAgICAgaWYobWV0aG9kICE9PSBTSVAuQy5BQ0spIHsKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4MSk7CiAgICAgIH0KICAgIH0KICB9Cn07CgovLz09PT09PT09PT09PT09PT09Ci8vIFV0aWxzCi8vPT09PT09PT09PT09PT09PT0KCi8qKgogKiBHZXQgdGhlIHNlc3Npb24gdG8gd2hpY2ggdGhlIHJlcXVlc3QgYmVsb25ncyB0bywgaWYgYW55LgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge1NJUC5JbmNvbWluZ1JlcXVlc3R9IHJlcXVlc3QuCiAqIEByZXR1cm5zIHtTSVAuT3V0Z29pbmdTZXNzaW9ufFNJUC5JbmNvbWluZ1Nlc3Npb258bnVsbH0KICovClVBLnByb3RvdHlwZS5maW5kU2Vzc2lvbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICByZXR1cm4gdGhpcy5zZXNzaW9uc1tyZXF1ZXN0LmNhbGxfaWQgKyByZXF1ZXN0LmZyb21fdGFnXSB8fAogICAgICAgICAgdGhpcy5zZXNzaW9uc1tyZXF1ZXN0LmNhbGxfaWQgKyByZXF1ZXN0LnRvX3RhZ10gfHwKICAgICAgICAgIG51bGw7Cn07CgovKioKICogR2V0IHRoZSBkaWFsb2cgdG8gd2hpY2ggdGhlIHJlcXVlc3QgYmVsb25ncyB0bywgaWYgYW55LgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge1NJUC5JbmNvbWluZ1JlcXVlc3R9CiAqIEByZXR1cm5zIHtTSVAuRGlhbG9nfG51bGx9CiAqLwpVQS5wcm90b3R5cGUuZmluZERpYWxvZyA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICByZXR1cm4gdGhpcy5kaWFsb2dzW3JlcXVlc3QuY2FsbF9pZCArIHJlcXVlc3QuZnJvbV90YWcgKyByZXF1ZXN0LnRvX3RhZ10gfHwKICAgICAgICAgIHRoaXMuZGlhbG9nc1tyZXF1ZXN0LmNhbGxfaWQgKyByZXF1ZXN0LnRvX3RhZyArIHJlcXVlc3QuZnJvbV90YWddIHx8CiAgICAgICAgICBudWxsOwp9OwoKLyoqCiAqIFJldHJpZXZlIHRoZSBuZXh0IHNlcnZlciB0byB3aGljaCBjb25uZWN0LgogKiBAcHJpdmF0ZQogKiBAcmV0dXJucyB7T2JqZWN0fSB3c19zZXJ2ZXIKICovClVBLnByb3RvdHlwZS5nZXROZXh0V3NTZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAvLyBPcmRlciBzZXJ2ZXJzIGJ5IHdlaWdodAogIHZhciBpZHgsIGxlbmd0aCwgd3Nfc2VydmVyLAogICAgY2FuZGlkYXRlcyA9IFtdOwoKICBsZW5ndGggPSB0aGlzLmNvbmZpZ3VyYXRpb24ud3NTZXJ2ZXJzLmxlbmd0aDsKICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgIHdzX3NlcnZlciA9IHRoaXMuY29uZmlndXJhdGlvbi53c1NlcnZlcnNbaWR4XTsKCiAgICBpZiAod3Nfc2VydmVyLnN0YXR1cyA9PT0gU0lQLlRyYW5zcG9ydC5DLlNUQVRVU19FUlJPUikgewogICAgICBjb250aW51ZTsKICAgIH0gZWxzZSBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHsKICAgICAgY2FuZGlkYXRlcy5wdXNoKHdzX3NlcnZlcik7CiAgICB9IGVsc2UgaWYgKHdzX3NlcnZlci53ZWlnaHQgPiBjYW5kaWRhdGVzWzBdLndlaWdodCkgewogICAgICBjYW5kaWRhdGVzID0gW3dzX3NlcnZlcl07CiAgICB9IGVsc2UgaWYgKHdzX3NlcnZlci53ZWlnaHQgPT09IGNhbmRpZGF0ZXNbMF0ud2VpZ2h0KSB7CiAgICAgIGNhbmRpZGF0ZXMucHVzaCh3c19zZXJ2ZXIpOwogICAgfQogIH0KCiAgaWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FuZGlkYXRlcy5sZW5ndGgpOwoKICByZXR1cm4gY2FuZGlkYXRlc1tpZHhdOwp9OwoKLyoqCiAqIENsb3NlIGFsbCBzZXNzaW9ucyBvbiB0cmFuc3BvcnQgZXJyb3IuCiAqIEBwcml2YXRlCiAqLwpVQS5wcm90b3R5cGUuY2xvc2VTZXNzaW9uc09uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICB2YXIgaWR4OwoKICAvLyBSdW4gX3RyYW5zcG9ydEVycm9yXyBmb3IgZXZlcnkgU2Vzc2lvbgogIGZvcihpZHggaW4gdGhpcy5zZXNzaW9ucykgewogICAgdGhpcy5zZXNzaW9uc1tpZHhdLm9uVHJhbnNwb3J0RXJyb3IoKTsKICB9CiAgLy8gQ2FsbCByZWdpc3RlckNvbnRleHQgX29uVHJhbnNwb3J0Q2xvc2VkXwogIHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uVHJhbnNwb3J0Q2xvc2VkKCk7Cn07CgpVQS5wcm90b3R5cGUucmVjb3ZlclRyYW5zcG9ydCA9IGZ1bmN0aW9uKHVhKSB7CiAgdmFyIGlkeCwgbGVuZ3RoLCBrLCBuZXh0UmV0cnksIGNvdW50LCBzZXJ2ZXI7CgogIHVhID0gdWEgfHwgdGhpczsKICBjb3VudCA9IHVhLnRyYW5zcG9ydFJlY292ZXJBdHRlbXB0czsKCiAgbGVuZ3RoID0gdWEuY29uZmlndXJhdGlvbi53c1NlcnZlcnMubGVuZ3RoOwogIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgdWEuY29uZmlndXJhdGlvbi53c1NlcnZlcnNbaWR4XS5zdGF0dXMgPSAwOwogIH0KCiAgc2VydmVyID0gdWEuZ2V0TmV4dFdzU2VydmVyKCk7CgogIGsgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogTWF0aC5wb3coMixjb3VudCkpICsxKTsKICBuZXh0UmV0cnkgPSBrICogdWEuY29uZmlndXJhdGlvbi5jb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbDsKCiAgaWYgKG5leHRSZXRyeSA+IHVhLmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWwpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygndGltZSBmb3IgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQgZXhjZWVkcyBjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCwgcmVzZXR0aW5nIGNvdW50ZXInKTsKICAgIG5leHRSZXRyeSA9IHVhLmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWw7CiAgICBjb3VudCA9IDA7CiAgfQoKICB0aGlzLmxvZ2dlci5sb2coJ25leHQgY29ubmVjdGlvbiBhdHRlbXB0IGluICcrIG5leHRSZXRyeSArJyBzZWNvbmRzJyk7CgogIHRoaXMudHJhbnNwb3J0UmVjb3ZlcnlUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCgKICAgIGZ1bmN0aW9uKCl7CiAgICAgIHVhLnRyYW5zcG9ydFJlY292ZXJBdHRlbXB0cyA9IGNvdW50ICsgMTsKICAgICAgbmV3IFNJUC5UcmFuc3BvcnQodWEsIHNlcnZlcik7CiAgICB9LCBuZXh0UmV0cnkgKiAxMDAwKTsKfTsKCmZ1bmN0aW9uIGNoZWNrQXV0aGVudGljYXRpb25GYWN0b3J5IChhdXRoZW50aWNhdGlvbkZhY3RvcnkpIHsKICBpZiAoIShhdXRoZW50aWNhdGlvbkZhY3RvcnkgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHsKICAgIHJldHVybjsKICB9CiAgaWYgKCFhdXRoZW50aWNhdGlvbkZhY3RvcnkuaW5pdGlhbGl6ZSkgewogICAgYXV0aGVudGljYXRpb25GYWN0b3J5LmluaXRpYWxpemUgPSBmdW5jdGlvbiBpbml0aWFsaXplICgpIHsKICAgICAgcmV0dXJuIFNJUC5VdGlscy5Qcm9taXNlLnJlc29sdmUoKTsKICAgIH07CiAgfQogIHJldHVybiBhdXRoZW50aWNhdGlvbkZhY3Rvcnk7Cn0KCi8qKgogKiBDb25maWd1cmF0aW9uIGxvYWQuCiAqIEBwcml2YXRlCiAqIHJldHVybnMge0Jvb2xlYW59CiAqLwpVQS5wcm90b3R5cGUubG9hZENvbmZpZyA9IGZ1bmN0aW9uKGNvbmZpZ3VyYXRpb24pIHsKICAvLyBTZXR0aW5ncyBhbmQgZGVmYXVsdCB2YWx1ZXMKICB2YXIgcGFyYW1ldGVyLCB2YWx1ZSwgY2hlY2tlZF92YWx1ZSwgaG9zdHBvcnRQYXJhbXMsIHJlZ2lzdHJhclNlcnZlciwKICAgIHNldHRpbmdzID0gewogICAgICAvKiBIb3N0IGFkZHJlc3MKICAgICAgKiBWYWx1ZSB0byBiZSBzZXQgaW4gVmlhIHNlbnRfYnkgYW5kIGhvc3QgcGFydCBvZiBDb250YWN0IEZRRE4KICAgICAgKi8KICAgICAgdmlhSG9zdDogU0lQLlV0aWxzLmNyZWF0ZVJhbmRvbVRva2VuKDEyKSArICcuaW52YWxpZCcsCgogICAgICB1cmk6IG5ldyBTSVAuVVJJKCdzaXAnLCAnYW5vbnltb3VzLicgKyBTSVAuVXRpbHMuY3JlYXRlUmFuZG9tVG9rZW4oNiksICdhbm9ueW1vdXMuaW52YWxpZCcsIG51bGwsIG51bGwpLAogICAgICB3c1NlcnZlcnM6IFt7CiAgICAgICAgc2NoZW1lOiAnV1NTJywKICAgICAgICBzaXBfdXJpOiAnPHNpcDplZGdlLnNpcC5vbnNpcC5jb207dHJhbnNwb3J0PXdzO2xyPicsCiAgICAgICAgc3RhdHVzOiAwLAogICAgICAgIHdlaWdodDogMCwKICAgICAgICB3c191cmk6ICd3c3M6Ly9lZGdlLnNpcC5vbnNpcC5jb20nCiAgICAgIH1dLAoKICAgICAgLy8gUGFzc3dvcmQKICAgICAgcGFzc3dvcmQ6IG51bGwsCgogICAgICAvLyBSZWdpc3RyYXRpb24gcGFyYW1ldGVycwogICAgICByZWdpc3RlckV4cGlyZXM6IDYwMCwKICAgICAgcmVnaXN0ZXI6IHRydWUsCiAgICAgIHJlZ2lzdHJhclNlcnZlcjogbnVsbCwKCiAgICAgIC8vIFRyYW5zcG9ydCByZWxhdGVkIHBhcmFtZXRlcnMKICAgICAgd3NTZXJ2ZXJNYXhSZWNvbm5lY3Rpb246IDMsCiAgICAgIHdzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dDogNCwKCiAgICAgIGNvbm5lY3Rpb25SZWNvdmVyeU1pbkludGVydmFsOiAyLAogICAgICBjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbDogMzAsCgogICAgICBrZWVwQWxpdmVJbnRlcnZhbDogMCwKCiAgICAgIGV4dHJhU3VwcG9ydGVkOiBbXSwKCiAgICAgIHVzZVByZWxvYWRlZFJvdXRlOiBmYWxzZSwKCiAgICAgIC8vc3RyaW5nIHRvIGJlIGluc2VydGVkIGludG8gVXNlci1BZ2VudCByZXF1ZXN0IGhlYWRlcgogICAgICB1c2VyQWdlbnRTdHJpbmc6IFNJUC5DLlVTRVJfQUdFTlQsCgogICAgICAvLyBTZXNzaW9uIHBhcmFtZXRlcnMKICAgICAgaWNlQ2hlY2tpbmdUaW1lb3V0OiA1MDAwLAogICAgICBub0Fuc3dlclRpbWVvdXQ6IDYwLAogICAgICBzdHVuU2VydmVyczogWydzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyJ10sCiAgICAgIHR1cm5TZXJ2ZXJzOiBbXSwKCiAgICAgIC8vIExvZ2dpbmcgcGFyYW1ldGVycwogICAgICB0cmFjZVNpcDogZmFsc2UsCgogICAgICAvLyBIYWNrcwogICAgICBoYWNrVmlhVGNwOiBmYWxzZSwKICAgICAgaGFja0lwSW5Db250YWN0OiBmYWxzZSwKICAgICAgaGFja1dzc0luVHJhbnNwb3J0OiBmYWxzZSwKICAgICAgaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFnczogZmFsc2UsCgogICAgICBjb250YWN0VHJhbnNwb3J0OiAnd3MnLAogICAgICBmb3JjZVJwb3J0OiBmYWxzZSwKCiAgICAgIC8vYXV0b3N0YXJ0aW5nCiAgICAgIGF1dG9zdGFydDogdHJ1ZSwKCiAgICAgIC8vUmVsaWFibGUgUHJvdmlzaW9uYWwgUmVzcG9uc2VzCiAgICAgIHJlbDEwMDogU0lQLkMuc3VwcG9ydGVkLlVOU1VQUE9SVEVELAoKICAgICAgLy8gUmVwbGFjZXMgaGVhZGVyIChSRkMgMzg5MSkKICAgICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzg5MQogICAgICByZXBsYWNlczogU0lQLkMuc3VwcG9ydGVkLlVOU1VQUE9SVEVELAoKICAgICAgbWVkaWFIYW5kbGVyRmFjdG9yeTogU0lQLldlYlJUQy5NZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3RvcnksCgogICAgICBhdXRoZW50aWNhdGlvbkZhY3Rvcnk6IGNoZWNrQXV0aGVudGljYXRpb25GYWN0b3J5KGZ1bmN0aW9uIGF1dGhlbnRpY2F0aW9uRmFjdG9yeSAodWEpIHsKICAgICAgICByZXR1cm4gbmV3IFNJUC5EaWdlc3RBdXRoZW50aWNhdGlvbih1YSk7CiAgICAgIH0pCiAgICB9OwoKICAvLyBQcmUtQ29uZmlndXJhdGlvbgogIGZ1bmN0aW9uIGFsaWFzVW5kZXJzY29yZWQgKHBhcmFtZXRlciwgbG9nZ2VyKSB7CiAgICB2YXIgdW5kZXJzY29yZWQgPSBwYXJhbWV0ZXIucmVwbGFjZSgvKFthLXpdW0EtWl0pL2csIGZ1bmN0aW9uIChtKSB7CiAgICAgIHJldHVybiBtWzBdICsgJ18nICsgbVsxXS50b0xvd2VyQ2FzZSgpOwogICAgfSk7CgogICAgaWYgKHBhcmFtZXRlciA9PT0gdW5kZXJzY29yZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBoYXNQYXJhbWV0ZXIgPSBjb25maWd1cmF0aW9uLmhhc093blByb3BlcnR5KHBhcmFtZXRlcik7CiAgICBpZiAoY29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSh1bmRlcnNjb3JlZCkpIHsKICAgICAgbG9nZ2VyLndhcm4odW5kZXJzY29yZWQgKyAnIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgJyArIHBhcmFtZXRlcik7CiAgICAgIGlmIChoYXNQYXJhbWV0ZXIpIHsKICAgICAgICBsb2dnZXIud2FybihwYXJhbWV0ZXIgKyAnIG92ZXJyaWRpbmcgJyArIHVuZGVyc2NvcmVkKTsKICAgICAgfQogICAgfQoKICAgIGNvbmZpZ3VyYXRpb25bcGFyYW1ldGVyXSA9IGhhc1BhcmFtZXRlciA/IGNvbmZpZ3VyYXRpb25bcGFyYW1ldGVyXSA6IGNvbmZpZ3VyYXRpb25bdW5kZXJzY29yZWRdOwogIH0KCiAgLy8gQ2hlY2sgTWFuZGF0b3J5IHBhcmFtZXRlcnMKICBmb3IocGFyYW1ldGVyIGluIFVBLmNvbmZpZ3VyYXRpb25fY2hlY2subWFuZGF0b3J5KSB7CiAgICBhbGlhc1VuZGVyc2NvcmVkKHBhcmFtZXRlciwgdGhpcy5sb2dnZXIpOwogICAgaWYoIWNvbmZpZ3VyYXRpb24uaGFzT3duUHJvcGVydHkocGFyYW1ldGVyKSkgewogICAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuQ29uZmlndXJhdGlvbkVycm9yKHBhcmFtZXRlcik7CiAgICB9IGVsc2UgewogICAgICB2YWx1ZSA9IGNvbmZpZ3VyYXRpb25bcGFyYW1ldGVyXTsKICAgICAgY2hlY2tlZF92YWx1ZSA9IFVBLmNvbmZpZ3VyYXRpb25fY2hlY2subWFuZGF0b3J5W3BhcmFtZXRlcl0odmFsdWUpOwogICAgICBpZiAoY2hlY2tlZF92YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc2V0dGluZ3NbcGFyYW1ldGVyXSA9IGNoZWNrZWRfdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkNvbmZpZ3VyYXRpb25FcnJvcihwYXJhbWV0ZXIsIHZhbHVlKTsKICAgICAgfQogICAgfQogIH0KCiAgU0lQLlV0aWxzLm9wdGlvbnNPdmVycmlkZShjb25maWd1cmF0aW9uLCAncmVsMTAwJywgJ3JlbGlhYmxlJywgdHJ1ZSwgdGhpcy5sb2dnZXIsIFNJUC5DLnN1cHBvcnRlZC5VTlNVUFBPUlRFRCk7CgogIHZhciBlbXB0eUFycmF5c0FsbG93ZWQgPSBbJ3N0dW5TZXJ2ZXJzJywgJ3R1cm5TZXJ2ZXJzJ107CgogIC8vIENoZWNrIE9wdGlvbmFsIHBhcmFtZXRlcnMKICBmb3IocGFyYW1ldGVyIGluIFVBLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWwpIHsKICAgIGFsaWFzVW5kZXJzY29yZWQocGFyYW1ldGVyLCB0aGlzLmxvZ2dlcik7CiAgICBpZihjb25maWd1cmF0aW9uLmhhc093blByb3BlcnR5KHBhcmFtZXRlcikpIHsKICAgICAgdmFsdWUgPSBjb25maWd1cmF0aW9uW3BhcmFtZXRlcl07CgogICAgICAvLyBJZiB0aGUgcGFyYW1ldGVyIHZhbHVlIGlzIGFuIGVtcHR5IGFycmF5LCBidXQgc2hvdWxkbid0IGJlLCBhcHBseSBpdHMgZGVmYXVsdCB2YWx1ZS4KICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgJiYgdmFsdWUubGVuZ3RoID09PSAwICYmIGVtcHR5QXJyYXlzQWxsb3dlZC5pbmRleE9mKHBhcmFtZXRlcikgPCAwKSB7IGNvbnRpbnVlOyB9CgogICAgICAvLyBJZiB0aGUgcGFyYW1ldGVyIHZhbHVlIGlzIG51bGwsIGVtcHR5IHN0cmluZywgb3IgdW5kZWZpbmVkIHRoZW4gYXBwbHkgaXRzIGRlZmF1bHQgdmFsdWUuCiAgICAgIGlmKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAiIiB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7IGNvbnRpbnVlOyB9CiAgICAgIC8vIElmIGl0J3MgYSBudW1iZXIgd2l0aCBOYU4gdmFsdWUgdGhlbiBhbHNvIGFwcGx5IGl0cyBkZWZhdWx0IHZhbHVlLgogICAgICAvLyBOT1RFOiBKUyBkb2VzIG5vdCBhbGxvdyAidmFsdWUgPT09IE5hTiIsIHRoZSBmb2xsb3dpbmcgZG9lcyB0aGUgd29yazoKICAgICAgZWxzZSBpZih0eXBlb2YodmFsdWUpID09PSAnbnVtYmVyJyAmJiBpc05hTih2YWx1ZSkpIHsgY29udGludWU7IH0KCiAgICAgIGNoZWNrZWRfdmFsdWUgPSBVQS5jb25maWd1cmF0aW9uX2NoZWNrLm9wdGlvbmFsW3BhcmFtZXRlcl0odmFsdWUpOwogICAgICBpZiAoY2hlY2tlZF92YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc2V0dGluZ3NbcGFyYW1ldGVyXSA9IGNoZWNrZWRfdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkNvbmZpZ3VyYXRpb25FcnJvcihwYXJhbWV0ZXIsIHZhbHVlKTsKICAgICAgfQogICAgfQogIH0KCiAgLy8gU2FuaXR5IENoZWNrcwoKICAvLyBDb25uZWN0aW9uIHJlY292ZXJ5IGludGVydmFscwogIGlmKHNldHRpbmdzLmNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsIDwgc2V0dGluZ3MuY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwpIHsKICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5Db25maWd1cmF0aW9uRXJyb3IoJ2Nvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsJywgc2V0dGluZ3MuY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWwpOwogIH0KCiAgLy8gUG9zdCBDb25maWd1cmF0aW9uIFByb2Nlc3MKCiAgLy8gQWxsb3cgcGFzc2luZyAwIG51bWJlciBhcyBkaXNwbGF5TmFtZS4KICBpZiAoc2V0dGluZ3MuZGlzcGxheU5hbWUgPT09IDApIHsKICAgIHNldHRpbmdzLmRpc3BsYXlOYW1lID0gJzAnOwogIH0KCiAgLy8gSW5zdGFuY2UtaWQgZm9yIEdSVVUKICBpZiAoIXNldHRpbmdzLmluc3RhbmNlSWQpIHsKICAgIHNldHRpbmdzLmluc3RhbmNlSWQgPSBTSVAuVXRpbHMubmV3VVVJRCgpOwogIH0KCiAgLy8gc2lwanNJZCBpbnN0YW5jZSBwYXJhbWV0ZXIuIFN0YXRpYyByYW5kb20gdGFnIG9mIGxlbmd0aCA1CiAgc2V0dGluZ3Muc2lwanNJZCA9IFNJUC5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbig1KTsKCiAgLy8gU3RyaW5nIGNvbnRhaW5pbmcgc2V0dGluZ3MudXJpIHdpdGhvdXQgc2NoZW1lIGFuZCB1c2VyLgogIGhvc3Rwb3J0UGFyYW1zID0gc2V0dGluZ3MudXJpLmNsb25lKCk7CiAgaG9zdHBvcnRQYXJhbXMudXNlciA9IG51bGw7CiAgc2V0dGluZ3MuaG9zdHBvcnRQYXJhbXMgPSBob3N0cG9ydFBhcmFtcy50b1JhdygpLnJlcGxhY2UoL15zaXA6L2ksICcnKTsKCiAgLyogQ2hlY2sgd2hldGhlciBhdXRob3JpemF0aW9uVXNlciBpcyBleHBsaWNpdGx5IGRlZmluZWQuCiAgICogVGFrZSAnc2V0dGluZ3MudXJpLnVzZXInIHZhbHVlIGlmIG5vdC4KICAgKi8KICBpZiAoIXNldHRpbmdzLmF1dGhvcml6YXRpb25Vc2VyKSB7CiAgICBzZXR0aW5ncy5hdXRob3JpemF0aW9uVXNlciA9IHNldHRpbmdzLnVyaS51c2VyOwogIH0KCiAgLyogSWYgbm8gJ3JlZ2lzdHJhclNlcnZlcicgaXMgc2V0IHVzZSB0aGUgJ3VyaScgdmFsdWUgd2l0aG91dCB1c2VyIHBvcnRpb24uICovCiAgaWYgKCFzZXR0aW5ncy5yZWdpc3RyYXJTZXJ2ZXIpIHsKICAgIHJlZ2lzdHJhclNlcnZlciA9IHNldHRpbmdzLnVyaS5jbG9uZSgpOwogICAgcmVnaXN0cmFyU2VydmVyLnVzZXIgPSBudWxsOwogICAgc2V0dGluZ3MucmVnaXN0cmFyU2VydmVyID0gcmVnaXN0cmFyU2VydmVyOwogIH0KCiAgLy8gVXNlciBub0Fuc3dlclRpbWVvdXQKICBzZXR0aW5ncy5ub0Fuc3dlclRpbWVvdXQgPSBzZXR0aW5ncy5ub0Fuc3dlclRpbWVvdXQgKiAxMDAwOwoKICAvLyBWaWEgSG9zdAogIGlmIChzZXR0aW5ncy5oYWNrSXBJbkNvbnRhY3QpIHsKICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MuaGFja0lwSW5Db250YWN0ID09PSAnYm9vbGVhbicpIHsKICAgICAgc2V0dGluZ3MudmlhSG9zdCA9IFNJUC5VdGlscy5nZXRSYW5kb21UZXN0TmV0SVAoKTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGVvZiBzZXR0aW5ncy5oYWNrSXBJbkNvbnRhY3QgPT09ICdzdHJpbmcnKSB7CiAgICAgIHNldHRpbmdzLnZpYUhvc3QgPSBzZXR0aW5ncy5oYWNrSXBJbkNvbnRhY3Q7CiAgICB9CiAgfQoKICAvLyBDb250YWN0IHRyYW5zcG9ydCBwYXJhbWV0ZXIKICBpZiAoc2V0dGluZ3MuaGFja1dzc0luVHJhbnNwb3J0KSB7CiAgICBzZXR0aW5ncy5jb250YWN0VHJhbnNwb3J0ID0gJ3dzcyc7CiAgfQoKICB0aGlzLmNvbnRhY3QgPSB7CiAgICBwdWJfZ3J1dTogbnVsbCwKICAgIHRlbXBfZ3J1dTogbnVsbCwKICAgIHVyaTogbmV3IFNJUC5VUkkoJ3NpcCcsIFNJUC5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbig4KSwgc2V0dGluZ3MudmlhSG9zdCwgbnVsbCwge3RyYW5zcG9ydDogc2V0dGluZ3MuY29udGFjdFRyYW5zcG9ydH0pLAogICAgdG9TdHJpbmc6IGZ1bmN0aW9uKG9wdGlvbnMpewogICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAgIHZhcgogICAgICAgIGFub255bW91cyA9IG9wdGlvbnMuYW5vbnltb3VzIHx8IG51bGwsCiAgICAgICAgb3V0Ym91bmQgPSBvcHRpb25zLm91dGJvdW5kIHx8IG51bGwsCiAgICAgICAgY29udGFjdCA9ICc8JzsKCiAgICAgIGlmIChhbm9ueW1vdXMpIHsKICAgICAgICBjb250YWN0ICs9ICh0aGlzLnRlbXBfZ3J1dSB8fCAoJ3NpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWQ7dHJhbnNwb3J0PScrc2V0dGluZ3MuY29udGFjdFRyYW5zcG9ydCkpLnRvU3RyaW5nKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29udGFjdCArPSAodGhpcy5wdWJfZ3J1dSB8fCB0aGlzLnVyaSkudG9TdHJpbmcoKTsKICAgICAgfQoKICAgICAgaWYgKG91dGJvdW5kKSB7CiAgICAgICAgY29udGFjdCArPSAnO29iJzsKICAgICAgfQoKICAgICAgY29udGFjdCArPSAnPic7CgogICAgICByZXR1cm4gY29udGFjdDsKICAgIH0KICB9OwoKICAvLyBtZWRpYSBvdmVycmlkZXMgbWVkaWFDb25zdHJhaW50cwogIFNJUC5VdGlscy5vcHRpb25zT3ZlcnJpZGUoc2V0dGluZ3MsICdtZWRpYScsICdtZWRpYUNvbnN0cmFpbnRzJywgdHJ1ZSwgdGhpcy5sb2dnZXIpOwoKICAvLyBGaWxsIHRoZSB2YWx1ZSBvZiB0aGUgY29uZmlndXJhdGlvbl9za2VsZXRvbgogIGZvcihwYXJhbWV0ZXIgaW4gc2V0dGluZ3MpIHsKICAgIFVBLmNvbmZpZ3VyYXRpb25fc2tlbGV0b25bcGFyYW1ldGVyXS52YWx1ZSA9IHNldHRpbmdzW3BhcmFtZXRlcl07CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLmNvbmZpZ3VyYXRpb24sIFVBLmNvbmZpZ3VyYXRpb25fc2tlbGV0b24pOwoKICAvLyBDbGVhbiBVQS5jb25maWd1cmF0aW9uX3NrZWxldG9uCiAgZm9yKHBhcmFtZXRlciBpbiBzZXR0aW5ncykgewogICAgVUEuY29uZmlndXJhdGlvbl9za2VsZXRvbltwYXJhbWV0ZXJdLnZhbHVlID0gJyc7CiAgfQoKICB0aGlzLmxvZ2dlci5sb2coJ2NvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBhZnRlciB2YWxpZGF0aW9uOicpOwogIGZvcihwYXJhbWV0ZXIgaW4gc2V0dGluZ3MpIHsKICAgIHN3aXRjaChwYXJhbWV0ZXIpIHsKICAgICAgY2FzZSAndXJpJzoKICAgICAgY2FzZSAncmVnaXN0cmFyU2VydmVyJzoKICAgICAgY2FzZSAnbWVkaWFIYW5kbGVyRmFjdG9yeSc6CiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCfCtyAnICsgcGFyYW1ldGVyICsgJzogJyArIHNldHRpbmdzW3BhcmFtZXRlcl0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdwYXNzd29yZCc6CiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCfCtyAnICsgcGFyYW1ldGVyICsgJzogJyArICdOT1QgU0hPV04nKTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ8K3ICcgKyBwYXJhbWV0ZXIgKyAnOiAnICsgSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3NbcGFyYW1ldGVyXSkpOwogICAgfQogIH0KCiAgcmV0dXJuOwp9OwoKLyoqCiAqIENvbmZpZ3VyYXRpb24gT2JqZWN0IHNrZWxldG9uLgogKiBAcHJpdmF0ZQogKi8KVUEuY29uZmlndXJhdGlvbl9za2VsZXRvbiA9IChmdW5jdGlvbigpIHsKICB2YXIgaWR4LCAgcGFyYW1ldGVyLAogICAgc2tlbGV0b24gPSB7fSwKICAgIHBhcmFtZXRlcnMgPSBbCiAgICAgIC8vIEludGVybmFsIHBhcmFtZXRlcnMKICAgICAgInNpcGpzSWQiLAogICAgICAiaG9zdHBvcnRQYXJhbXMiLAoKICAgICAgLy8gT3B0aW9uYWwgdXNlciBjb25maWd1cmFibGUgcGFyYW1ldGVycwogICAgICAidXJpIiwKICAgICAgIndzU2VydmVycyIsCiAgICAgICJhdXRob3JpemF0aW9uVXNlciIsCiAgICAgICJjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCIsCiAgICAgICJjb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbCIsCiAgICAgICJrZWVwQWxpdmVJbnRlcnZhbCIsCiAgICAgICJleHRyYVN1cHBvcnRlZCIsCiAgICAgICJkaXNwbGF5TmFtZSIsCiAgICAgICJoYWNrVmlhVGNwIiwgLy8gZmFsc2UuCiAgICAgICJoYWNrSXBJbkNvbnRhY3QiLCAvL2ZhbHNlCiAgICAgICJoYWNrV3NzSW5UcmFuc3BvcnQiLCAvL2ZhbHNlCiAgICAgICJoYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzIiwgLy9mYWxzZQogICAgICAiY29udGFjdFRyYW5zcG9ydCIsIC8vICd3cycKICAgICAgImZvcmNlUnBvcnQiLCAvLyBmYWxzZQogICAgICAiaWNlQ2hlY2tpbmdUaW1lb3V0IiwKICAgICAgImluc3RhbmNlSWQiLAogICAgICAibm9BbnN3ZXJUaW1lb3V0IiwgLy8gMzAgc2Vjb25kcy4KICAgICAgInBhc3N3b3JkIiwKICAgICAgInJlZ2lzdGVyRXhwaXJlcyIsIC8vIDYwMCBzZWNvbmRzLgogICAgICAicmVnaXN0cmFyU2VydmVyIiwKICAgICAgInJlbGlhYmxlIiwKICAgICAgInJlbDEwMCIsCiAgICAgICJyZXBsYWNlcyIsCiAgICAgICJ1c2VyQWdlbnRTdHJpbmciLCAvL1NJUC5DLlVTRVJfQUdFTlQKICAgICAgImF1dG9zdGFydCIsCiAgICAgICJzdHVuU2VydmVycyIsCiAgICAgICJ0cmFjZVNpcCIsCiAgICAgICJ0dXJuU2VydmVycyIsCiAgICAgICJ1c2VQcmVsb2FkZWRSb3V0ZSIsCiAgICAgICJ3c1NlcnZlck1heFJlY29ubmVjdGlvbiIsCiAgICAgICJ3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQiLAogICAgICAibWVkaWFIYW5kbGVyRmFjdG9yeSIsCiAgICAgICJtZWRpYSIsCiAgICAgICJtZWRpYUNvbnN0cmFpbnRzIiwKICAgICAgImF1dGhlbnRpY2F0aW9uRmFjdG9yeSIsCgogICAgICAvLyBQb3N0LWNvbmZpZ3VyYXRpb24gZ2VuZXJhdGVkIHBhcmFtZXRlcnMKICAgICAgInZpYV9jb3JlX3ZhbHVlIiwKICAgICAgInZpYUhvc3QiCiAgICBdOwoKICBmb3IoaWR4IGluIHBhcmFtZXRlcnMpIHsKICAgIHBhcmFtZXRlciA9IHBhcmFtZXRlcnNbaWR4XTsKICAgIHNrZWxldG9uW3BhcmFtZXRlcl0gPSB7CiAgICAgIHZhbHVlOiAnJywKICAgICAgd3JpdGFibGU6IGZhbHNlLAogICAgICBjb25maWd1cmFibGU6IGZhbHNlCiAgICB9OwogIH0KCiAgc2tlbGV0b25bJ3JlZ2lzdGVyJ10gPSB7CiAgICB2YWx1ZTogJycsCiAgICB3cml0YWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UKICB9OwoKICByZXR1cm4gc2tlbGV0b247Cn0oKSk7CgovKioKICogQ29uZmlndXJhdGlvbiBjaGVja2VyLgogKiBAcHJpdmF0ZQogKiBAcmV0dXJuIHtCb29sZWFufQogKi8KVUEuY29uZmlndXJhdGlvbl9jaGVjayA9IHsKICBtYW5kYXRvcnk6IHsKICB9LAoKICBvcHRpb25hbDogewoKICAgIHVyaTogZnVuY3Rpb24odXJpKSB7CiAgICAgIHZhciBwYXJzZWQ7CgogICAgICBpZiAoISgvXnNpcDovaSkudGVzdCh1cmkpKSB7CiAgICAgICAgdXJpID0gU0lQLkMuU0lQICsgJzonICsgdXJpOwogICAgICB9CiAgICAgIHBhcnNlZCA9IFNJUC5VUkkucGFyc2UodXJpKTsKCiAgICAgIGlmKCFwYXJzZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZighcGFyc2VkLnVzZXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhcnNlZDsKICAgICAgfQogICAgfSwKCiAgICAvL05vdGU6IHRoaXMgZnVuY3Rpb24gdXNlZCB0byBjYWxsICd0aGlzLmxvZ2dlci5lcnJvcicgYnV0IGNhbGxpbmcgJ3RoaXMnIHdpdGggYW55dGhpbmcgaGVyZSBpcyBpbnZhbGlkCiAgICB3c1NlcnZlcnM6IGZ1bmN0aW9uKHdzU2VydmVycykgewogICAgICB2YXIgaWR4LCBsZW5ndGgsIHVybDsKCiAgICAgIC8qIEFsbG93IGRlZmluaW5nIHdzU2VydmVycyBwYXJhbWV0ZXIgYXM6CiAgICAgICAqICBTdHJpbmc6ICJob3N0IgogICAgICAgKiAgQXJyYXkgb2YgU3RyaW5nczogWyJob3N0MSIsICJob3N0MiJdCiAgICAgICAqICBBcnJheSBvZiBPYmplY3RzOiBbe3dzX3VyaToiaG9zdDEiLCB3ZWlnaHQ6MX0sIHt3c191cmk6Imhvc3QyIiwgd2VpZ2h0OjB9XQogICAgICAgKiAgQXJyYXkgb2YgT2JqZWN0cyBhbmQgU3RyaW5nczogW3t3c191cmk6Imhvc3QxIn0sICJob3N0MiJdCiAgICAgICAqLwogICAgICBpZiAodHlwZW9mIHdzU2VydmVycyA9PT0gJ3N0cmluZycpIHsKICAgICAgICB3c1NlcnZlcnMgPSBbe3dzX3VyaTogd3NTZXJ2ZXJzfV07CiAgICAgIH0gZWxzZSBpZiAod3NTZXJ2ZXJzIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICBsZW5ndGggPSB3c1NlcnZlcnMubGVuZ3RoOwogICAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICAgICAgaWYgKHR5cGVvZiB3c1NlcnZlcnNbaWR4XSA9PT0gJ3N0cmluZycpewogICAgICAgICAgICB3c1NlcnZlcnNbaWR4XSA9IHt3c191cmk6IHdzU2VydmVyc1tpZHhdfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAod3NTZXJ2ZXJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgbGVuZ3RoID0gd3NTZXJ2ZXJzLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaWYgKCF3c1NlcnZlcnNbaWR4XS53c191cmkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHdzU2VydmVyc1tpZHhdLndlaWdodCAmJiAhTnVtYmVyKHdzU2VydmVyc1tpZHhdLndlaWdodCkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHVybCA9IFNJUC5HcmFtbWFyLnBhcnNlKHdzU2VydmVyc1tpZHhdLndzX3VyaSwgJ2Fic29sdXRlVVJJJyk7CgogICAgICAgIGlmKHVybCA9PT0gLTEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYoWyd3c3MnLCAnd3MnLCAndWRwJ10uaW5kZXhPZih1cmwuc2NoZW1lKSA8IDApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd3NTZXJ2ZXJzW2lkeF0uc2lwX3VyaSA9ICc8c2lwOicgKyB1cmwuaG9zdCArICh1cmwucG9ydCA/ICc6JyArIHVybC5wb3J0IDogJycpICsgJzt0cmFuc3BvcnQ9JyArIHVybC5zY2hlbWUucmVwbGFjZSgvXndzcyQvaSwgJ3dzJykgKyAnO2xyPic7CgogICAgICAgICAgaWYgKCF3c1NlcnZlcnNbaWR4XS53ZWlnaHQpIHsKICAgICAgICAgICAgd3NTZXJ2ZXJzW2lkeF0ud2VpZ2h0ID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICB3c1NlcnZlcnNbaWR4XS5zdGF0dXMgPSAwOwogICAgICAgICAgd3NTZXJ2ZXJzW2lkeF0uc2NoZW1lID0gdXJsLnNjaGVtZS50b1VwcGVyQ2FzZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gd3NTZXJ2ZXJzOwogICAgfSwKCiAgICBhdXRob3JpemF0aW9uVXNlcjogZnVuY3Rpb24oYXV0aG9yaXphdGlvblVzZXIpIHsKICAgICAgaWYoU0lQLkdyYW1tYXIucGFyc2UoJyInKyBhdXRob3JpemF0aW9uVXNlciArJyInLCAncXVvdGVkX3N0cmluZycpID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYXV0aG9yaXphdGlvblVzZXI7CiAgICAgIH0KICAgIH0sCgogICAgY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWw6IGZ1bmN0aW9uKGNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsKSB7CiAgICAgIHZhciB2YWx1ZTsKICAgICAgaWYoU0lQLlV0aWxzLmlzRGVjaW1hbChjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCkpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcihjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCk7CiAgICAgICAgaWYodmFsdWUgPiAwKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGNvbm5lY3Rpb25SZWNvdmVyeU1pbkludGVydmFsOiBmdW5jdGlvbihjb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmKFNJUC5VdGlscy5pc0RlY2ltYWwoY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwpKSB7CiAgICAgICAgdmFsdWUgPSBOdW1iZXIoY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwpOwogICAgICAgIGlmKHZhbHVlID4gMCkgewogICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBkaXNwbGF5TmFtZTogZnVuY3Rpb24oZGlzcGxheU5hbWUpIHsKICAgICAgaWYoU0lQLkdyYW1tYXIucGFyc2UoJyInICsgZGlzcGxheU5hbWUgKyAnIicsICdkaXNwbGF5TmFtZScpID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZGlzcGxheU5hbWU7CiAgICAgIH0KICAgIH0sCgogICAgaGFja1ZpYVRjcDogZnVuY3Rpb24oaGFja1ZpYVRjcCkgewogICAgICBpZiAodHlwZW9mIGhhY2tWaWFUY3AgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBoYWNrVmlhVGNwOwogICAgICB9CiAgICB9LAoKICAgIGhhY2tJcEluQ29udGFjdDogZnVuY3Rpb24oaGFja0lwSW5Db250YWN0KSB7CiAgICAgIGlmICh0eXBlb2YgaGFja0lwSW5Db250YWN0ID09PSAnYm9vbGVhbicpIHsKICAgICAgICByZXR1cm4gaGFja0lwSW5Db250YWN0OwogICAgICB9CiAgICAgIGVsc2UgaWYgKHR5cGVvZiBoYWNrSXBJbkNvbnRhY3QgPT09ICdzdHJpbmcnICYmIFNJUC5HcmFtbWFyLnBhcnNlKGhhY2tJcEluQ29udGFjdCwgJ2hvc3QnKSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gaGFja0lwSW5Db250YWN0OwogICAgICB9CiAgICB9LAoKICAgIGljZUNoZWNraW5nVGltZW91dDogZnVuY3Rpb24oaWNlQ2hlY2tpbmdUaW1lb3V0KSB7CiAgICAgIGlmKFNJUC5VdGlscy5pc0RlY2ltYWwoaWNlQ2hlY2tpbmdUaW1lb3V0KSkgewogICAgICAgIHJldHVybiBNYXRoLm1heCg1MDAsIGljZUNoZWNraW5nVGltZW91dCk7CiAgICAgIH0KICAgIH0sCgogICAgaGFja1dzc0luVHJhbnNwb3J0OiBmdW5jdGlvbihoYWNrV3NzSW5UcmFuc3BvcnQpIHsKICAgICAgaWYgKHR5cGVvZiBoYWNrV3NzSW5UcmFuc3BvcnQgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBoYWNrV3NzSW5UcmFuc3BvcnQ7CiAgICAgIH0KICAgIH0sCgogICAgaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFnczogZnVuY3Rpb24oaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFncykgewogICAgICBpZiAodHlwZW9mIGhhY2tBbGxvd1VucmVnaXN0ZXJlZE9wdGlvblRhZ3MgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBoYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzOwogICAgICB9CiAgICB9LAoKICAgIGNvbnRhY3RUcmFuc3BvcnQ6IGZ1bmN0aW9uKGNvbnRhY3RUcmFuc3BvcnQpIHsKICAgICAgaWYgKHR5cGVvZiBjb250YWN0VHJhbnNwb3J0ID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBjb250YWN0VHJhbnNwb3J0OwogICAgICB9CiAgICB9LAoKICAgIGZvcmNlUnBvcnQ6IGZ1bmN0aW9uKGZvcmNlUnBvcnQpIHsKICAgICAgaWYgKHR5cGVvZiBmb3JjZVJwb3J0ID09PSAnYm9vbGVhbicpIHsKICAgICAgICByZXR1cm4gZm9yY2VScG9ydDsKICAgICAgfQogICAgfSwKCiAgICBpbnN0YW5jZUlkOiBmdW5jdGlvbihpbnN0YW5jZUlkKSB7CiAgICAgIGlmKHR5cGVvZiBpbnN0YW5jZUlkICE9PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCgvXnV1aWQ6L2kudGVzdChpbnN0YW5jZUlkKSkpIHsKICAgICAgICBpbnN0YW5jZUlkID0gaW5zdGFuY2VJZC5zdWJzdHIoNSk7CiAgICAgIH0KCiAgICAgIGlmKFNJUC5HcmFtbWFyLnBhcnNlKGluc3RhbmNlSWQsICd1dWlkJykgPT09IC0xKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBpbnN0YW5jZUlkOwogICAgICB9CiAgICB9LAoKICAgIGtlZXBBbGl2ZUludGVydmFsOiBmdW5jdGlvbihrZWVwQWxpdmVJbnRlcnZhbCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKGtlZXBBbGl2ZUludGVydmFsKSkgewogICAgICAgIHZhbHVlID0gTnVtYmVyKGtlZXBBbGl2ZUludGVydmFsKTsKICAgICAgICBpZiAodmFsdWUgPiAwKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGV4dHJhU3VwcG9ydGVkOiBmdW5jdGlvbihvcHRpb25UYWdzKSB7CiAgICAgIHZhciBpZHgsIGxlbmd0aDsKCiAgICAgIGlmICghKG9wdGlvblRhZ3MgaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxlbmd0aCA9IG9wdGlvblRhZ3MubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBpZiAodHlwZW9mIG9wdGlvblRhZ3NbaWR4XSAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRpb25UYWdzOwogICAgfSwKCiAgICBub0Fuc3dlclRpbWVvdXQ6IGZ1bmN0aW9uKG5vQW5zd2VyVGltZW91dCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKG5vQW5zd2VyVGltZW91dCkpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcihub0Fuc3dlclRpbWVvdXQpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgcGFzc3dvcmQ6IGZ1bmN0aW9uKHBhc3N3b3JkKSB7CiAgICAgIHJldHVybiBTdHJpbmcocGFzc3dvcmQpOwogICAgfSwKCiAgICByZWwxMDA6IGZ1bmN0aW9uKHJlbDEwMCkgewogICAgICBpZihyZWwxMDAgPT09IFNJUC5DLnN1cHBvcnRlZC5SRVFVSVJFRCkgewogICAgICAgIHJldHVybiBTSVAuQy5zdXBwb3J0ZWQuUkVRVUlSRUQ7CiAgICAgIH0gZWxzZSBpZiAocmVsMTAwID09PSBTSVAuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEKSB7CiAgICAgICAgcmV0dXJuIFNJUC5DLnN1cHBvcnRlZC5TVVBQT1JURUQ7CiAgICAgIH0gZWxzZSAgewogICAgICAgIHJldHVybiBTSVAuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUQ7CiAgICAgIH0KICAgIH0sCgogICAgcmVwbGFjZXM6IGZ1bmN0aW9uKHJlcGxhY2VzKSB7CiAgICAgIGlmKHJlcGxhY2VzID09PSBTSVAuQy5zdXBwb3J0ZWQuUkVRVUlSRUQpIHsKICAgICAgICByZXR1cm4gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEOwogICAgICB9IGVsc2UgaWYgKHJlcGxhY2VzID09PSBTSVAuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEKSB7CiAgICAgICAgcmV0dXJuIFNJUC5DLnN1cHBvcnRlZC5TVVBQT1JURUQ7CiAgICAgIH0gZWxzZSAgewogICAgICAgIHJldHVybiBTSVAuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUQ7CiAgICAgIH0KICAgIH0sCgogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHJlZ2lzdGVyKSB7CiAgICAgIGlmICh0eXBlb2YgcmVnaXN0ZXIgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiByZWdpc3RlcjsKICAgICAgfQogICAgfSwKCiAgICByZWdpc3RlckV4cGlyZXM6IGZ1bmN0aW9uKHJlZ2lzdGVyRXhwaXJlcykgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKHJlZ2lzdGVyRXhwaXJlcykpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcihyZWdpc3RlckV4cGlyZXMpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgcmVnaXN0cmFyU2VydmVyOiBmdW5jdGlvbihyZWdpc3RyYXJTZXJ2ZXIpIHsKICAgICAgdmFyIHBhcnNlZDsKCiAgICAgIGlmKHR5cGVvZiByZWdpc3RyYXJTZXJ2ZXIgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIS9ec2lwOi9pLnRlc3QocmVnaXN0cmFyU2VydmVyKSkgewogICAgICAgIHJlZ2lzdHJhclNlcnZlciA9IFNJUC5DLlNJUCArICc6JyArIHJlZ2lzdHJhclNlcnZlcjsKICAgICAgfQogICAgICBwYXJzZWQgPSBTSVAuVVJJLnBhcnNlKHJlZ2lzdHJhclNlcnZlcik7CgogICAgICBpZighcGFyc2VkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYocGFyc2VkLnVzZXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhcnNlZDsKICAgICAgfQogICAgfSwKCiAgICBzdHVuU2VydmVyczogZnVuY3Rpb24oc3R1blNlcnZlcnMpIHsKICAgICAgdmFyIGlkeCwgbGVuZ3RoLCBzdHVuX3NlcnZlcjsKCiAgICAgIGlmICh0eXBlb2Ygc3R1blNlcnZlcnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgc3R1blNlcnZlcnMgPSBbc3R1blNlcnZlcnNdOwogICAgICB9IGVsc2UgaWYgKCEoc3R1blNlcnZlcnMgaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxlbmd0aCA9IHN0dW5TZXJ2ZXJzLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgc3R1bl9zZXJ2ZXIgPSBzdHVuU2VydmVyc1tpZHhdOwogICAgICAgIGlmICghKC9ec3R1bnM/Oi8udGVzdChzdHVuX3NlcnZlcikpKSB7CiAgICAgICAgICBzdHVuX3NlcnZlciA9ICdzdHVuOicgKyBzdHVuX3NlcnZlcjsKICAgICAgICB9CgogICAgICAgIGlmKFNJUC5HcmFtbWFyLnBhcnNlKHN0dW5fc2VydmVyLCAnc3R1bl9VUkknKSA9PT0gLTEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3R1blNlcnZlcnNbaWR4XSA9IHN0dW5fc2VydmVyOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3R1blNlcnZlcnM7CiAgICB9LAoKICAgIHRyYWNlU2lwOiBmdW5jdGlvbih0cmFjZVNpcCkgewogICAgICBpZiAodHlwZW9mIHRyYWNlU2lwID09PSAnYm9vbGVhbicpIHsKICAgICAgICByZXR1cm4gdHJhY2VTaXA7CiAgICAgIH0KICAgIH0sCgogICAgdHVyblNlcnZlcnM6IGZ1bmN0aW9uKHR1cm5TZXJ2ZXJzKSB7CiAgICAgIHZhciBpZHgsIGpkeCwgbGVuZ3RoLCB0dXJuX3NlcnZlciwgbnVtX3R1cm5fc2VydmVyX3VybHMsIHVybDsKCiAgICAgIGlmICh0dXJuU2VydmVycyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgLy8gRG8gbm90aGluZwogICAgICB9IGVsc2UgewogICAgICAgIHR1cm5TZXJ2ZXJzID0gW3R1cm5TZXJ2ZXJzXTsKICAgICAgfQoKICAgICAgbGVuZ3RoID0gdHVyblNlcnZlcnMubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICB0dXJuX3NlcnZlciA9IHR1cm5TZXJ2ZXJzW2lkeF07CiAgICAgICAgLy9CYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogQWxsb3cgZGVmaW5pbmcgdGhlIHR1cm5fc2VydmVyIHVybCB3aXRoIHRoZSAnc2VydmVyJyBwcm9wZXJ0eS4KICAgICAgICBpZiAodHVybl9zZXJ2ZXIuc2VydmVyKSB7CiAgICAgICAgICB0dXJuX3NlcnZlci51cmxzID0gW3R1cm5fc2VydmVyLnNlcnZlcl07CiAgICAgICAgfQoKICAgICAgICBpZiAoIXR1cm5fc2VydmVyLnVybHMgfHwgIXR1cm5fc2VydmVyLnVzZXJuYW1lIHx8ICF0dXJuX3NlcnZlci5wYXNzd29yZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR1cm5fc2VydmVyLnVybHMgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgbnVtX3R1cm5fc2VydmVyX3VybHMgPSB0dXJuX3NlcnZlci51cmxzLmxlbmd0aDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdHVybl9zZXJ2ZXIudXJscyA9IFt0dXJuX3NlcnZlci51cmxzXTsKICAgICAgICAgIG51bV90dXJuX3NlcnZlcl91cmxzID0gMTsKICAgICAgICB9CgogICAgICAgIGZvciAoamR4ID0gMDsgamR4IDwgbnVtX3R1cm5fc2VydmVyX3VybHM7IGpkeCsrKSB7CiAgICAgICAgICB1cmwgPSB0dXJuX3NlcnZlci51cmxzW2pkeF07CgogICAgICAgICAgaWYgKCEoL150dXJucz86Ly50ZXN0KHVybCkpKSB7CiAgICAgICAgICAgIHVybCA9ICd0dXJuOicgKyB1cmw7CiAgICAgICAgICB9CgogICAgICAgICAgaWYoU0lQLkdyYW1tYXIucGFyc2UodXJsLCAndHVybl9VUkknKSA9PT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHVyblNlcnZlcnM7CiAgICB9LAoKICAgIHVzZXJBZ2VudFN0cmluZzogZnVuY3Rpb24odXNlckFnZW50U3RyaW5nKSB7CiAgICAgIGlmICh0eXBlb2YgdXNlckFnZW50U3RyaW5nID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiB1c2VyQWdlbnRTdHJpbmc7CiAgICAgIH0KICAgIH0sCgogICAgdXNlUHJlbG9hZGVkUm91dGU6IGZ1bmN0aW9uKHVzZVByZWxvYWRlZFJvdXRlKSB7CiAgICAgIGlmICh0eXBlb2YgdXNlUHJlbG9hZGVkUm91dGUgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiB1c2VQcmVsb2FkZWRSb3V0ZTsKICAgICAgfQogICAgfSwKCiAgICB3c1NlcnZlck1heFJlY29ubmVjdGlvbjogZnVuY3Rpb24od3NTZXJ2ZXJNYXhSZWNvbm5lY3Rpb24pIHsKICAgICAgdmFyIHZhbHVlOwogICAgICBpZiAoU0lQLlV0aWxzLmlzRGVjaW1hbCh3c1NlcnZlck1heFJlY29ubmVjdGlvbikpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcih3c1NlcnZlck1heFJlY29ubmVjdGlvbik7CiAgICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICB3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQ6IGZ1bmN0aW9uKHdzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKHdzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dCkpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcih3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgYXV0b3N0YXJ0OiBmdW5jdGlvbihhdXRvc3RhcnQpIHsKICAgICAgaWYgKHR5cGVvZiBhdXRvc3RhcnQgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBhdXRvc3RhcnQ7CiAgICAgIH0KICAgIH0sCgogICAgbWVkaWFIYW5kbGVyRmFjdG9yeTogZnVuY3Rpb24obWVkaWFIYW5kbGVyRmFjdG9yeSkgewogICAgICBpZiAobWVkaWFIYW5kbGVyRmFjdG9yeSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgdmFyIHByb21pc2lmaWVkRmFjdG9yeSA9IGZ1bmN0aW9uIHByb21pc2lmaWVkRmFjdG9yeSAoKSB7CiAgICAgICAgICB2YXIgbWVkaWFIYW5kbGVyID0gbWVkaWFIYW5kbGVyRmFjdG9yeS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAgICAgICAgIGZ1bmN0aW9uIHBhdGNoTWV0aG9kIChtZXRob2ROYW1lKSB7CiAgICAgICAgICAgIHZhciBtZXRob2QgPSBtZWRpYUhhbmRsZXJbbWV0aG9kTmFtZV07CiAgICAgICAgICAgIGlmIChtZXRob2QubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIHZhciBjYWxsYmFja3NGaXJzdCA9IG1ldGhvZE5hbWUgPT09ICdnZXREZXNjcmlwdGlvbic7CiAgICAgICAgICAgICAgbWVkaWFIYW5kbGVyW21ldGhvZE5hbWVdID0gU0lQLlV0aWxzLnByb21pc2lmeShtZWRpYUhhbmRsZXIsIG1ldGhvZE5hbWUsIGNhbGxiYWNrc0ZpcnN0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHBhdGNoTWV0aG9kKCdnZXREZXNjcmlwdGlvbicpOwogICAgICAgICAgcGF0Y2hNZXRob2QoJ3NldERlc2NyaXB0aW9uJyk7CgogICAgICAgICAgcmV0dXJuIG1lZGlhSGFuZGxlcjsKICAgICAgICB9OwoKICAgICAgICBwcm9taXNpZmllZEZhY3RvcnkuaXNTdXBwb3J0ZWQgPSBtZWRpYUhhbmRsZXJGYWN0b3J5LmlzU3VwcG9ydGVkOwogICAgICAgIHJldHVybiBwcm9taXNpZmllZEZhY3Rvcnk7CiAgICAgIH0KICAgIH0sCgogICAgYXV0aGVudGljYXRpb25GYWN0b3J5OiBjaGVja0F1dGhlbnRpY2F0aW9uRmFjdG9yeQogIH0KfTsKClVBLkMgPSBDOwpTSVAuVUEgPSBVQTsKfTsKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgU0lQIFVSSQogKi8KCi8qKgogKiBAYXVnbWVudHMgU0lQCiAqIEBjbGFzcyBDbGFzcyBjcmVhdGluZyBhIFNJUCBVUkkuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBbc2NoZW1lXQogKiBAcGFyYW0ge1N0cmluZ30gW3VzZXJdCiAqIEBwYXJhbSB7U3RyaW5nfSBob3N0CiAqIEBwYXJhbSB7U3RyaW5nfSBbcG9ydF0KICogQHBhcmFtIHtPYmplY3R9IFtwYXJhbWV0ZXJzXQogKiBAcGFyYW0ge09iamVjdH0gW2hlYWRlcnNdCiAqCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyIFVSSTsKClVSSSA9IGZ1bmN0aW9uKHNjaGVtZSwgdXNlciwgaG9zdCwgcG9ydCwgcGFyYW1ldGVycywgaGVhZGVycykgewogIHZhciBwYXJhbSwgaGVhZGVyLCByYXcsIG5vcm1hbDsKCiAgLy8gQ2hlY2tzCiAgaWYoIWhvc3QpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21pc3Npbmcgb3IgaW52YWxpZCAiaG9zdCIgcGFyYW1ldGVyJyk7CiAgfQoKICAvLyBJbml0aWFsaXplIHBhcmFtZXRlcnMKICBzY2hlbWUgPSBzY2hlbWUgfHwgU0lQLkMuU0lQOwogIHRoaXMucGFyYW1ldGVycyA9IHt9OwogIHRoaXMuaGVhZGVycyA9IHt9OwoKICBmb3IgKHBhcmFtIGluIHBhcmFtZXRlcnMpIHsKICAgIHRoaXMuc2V0UGFyYW0ocGFyYW0sIHBhcmFtZXRlcnNbcGFyYW1dKTsKICB9CgogIGZvciAoaGVhZGVyIGluIGhlYWRlcnMpIHsKICAgIHRoaXMuc2V0SGVhZGVyKGhlYWRlciwgaGVhZGVyc1toZWFkZXJdKTsKICB9CgogIC8vIFJhdyBVUkkKICByYXcgPSB7CiAgICBzY2hlbWU6IHNjaGVtZSwKICAgIHVzZXI6IHVzZXIsCiAgICBob3N0OiBob3N0LAogICAgcG9ydDogcG9ydAogIH07CgogIC8vIE5vcm1hbGl6ZWQgVVJJCiAgbm9ybWFsID0gewogICAgc2NoZW1lOiBzY2hlbWUudG9Mb3dlckNhc2UoKSwKICAgIHVzZXI6IHVzZXIsCiAgICBob3N0OiBob3N0LnRvTG93ZXJDYXNlKCksCiAgICBwb3J0OiBwb3J0CiAgfTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgewogICAgX25vcm1hbDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsOyB9CiAgICB9LAoKICAgIF9yYXc6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHJhdzsgfQogICAgfSwKCiAgICBzY2hlbWU6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG5vcm1hbC5zY2hlbWU7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICByYXcuc2NoZW1lID0gdmFsdWU7CiAgICAgICAgbm9ybWFsLnNjaGVtZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7CiAgICAgIH0KICAgIH0sCgogICAgdXNlcjogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsLnVzZXI7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBub3JtYWwudXNlciA9IHJhdy51c2VyID0gdmFsdWU7CiAgICAgIH0KICAgIH0sCgogICAgaG9zdDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsLmhvc3Q7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICByYXcuaG9zdCA9IHZhbHVlOwogICAgICAgIG5vcm1hbC5ob3N0ID0gdmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgfQogICAgfSwKCiAgICBhb3I6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG5vcm1hbC51c2VyICsgJ0AnICsgbm9ybWFsLmhvc3Q7IH0KICAgIH0sCgogICAgcG9ydDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsLnBvcnQ7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBub3JtYWwucG9ydCA9IHJhdy5wb3J0ID0gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IChwYXJzZUludCh2YWx1ZSwxMCkgfHwgbnVsbCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKClVSSS5wcm90b3R5cGUgPSB7CiAgc2V0UGFyYW06IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmKGtleSkgewogICAgICB0aGlzLnBhcmFtZXRlcnNba2V5LnRvTG93ZXJDYXNlKCldID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUgPT09IG51bGwpID8gbnVsbCA6IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTsKICAgIH0KICB9LAoKICBnZXRQYXJhbTogZnVuY3Rpb24oa2V5KSB7CiAgICBpZihrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVyc1trZXkudG9Mb3dlckNhc2UoKV07CiAgICB9CiAgfSwKCiAgaGFzUGFyYW06IGZ1bmN0aW9uKGtleSkgewogICAgaWYoa2V5KSB7CiAgICAgIHJldHVybiAodGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGtleS50b0xvd2VyQ2FzZSgpKSAmJiB0cnVlKSB8fCBmYWxzZTsKICAgIH0KICB9LAoKICBkZWxldGVQYXJhbTogZnVuY3Rpb24ocGFyYW1ldGVyKSB7CiAgICB2YXIgdmFsdWU7CiAgICBwYXJhbWV0ZXIgPSBwYXJhbWV0ZXIudG9Mb3dlckNhc2UoKTsKICAgIGlmICh0aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkocGFyYW1ldGVyKSkgewogICAgICB2YWx1ZSA9IHRoaXMucGFyYW1ldGVyc1twYXJhbWV0ZXJdOwogICAgICBkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl07CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICB9LAoKICBjbGVhclBhcmFtczogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnBhcmFtZXRlcnMgPSB7fTsKICB9LAoKICBzZXRIZWFkZXI6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICB0aGlzLmhlYWRlcnNbU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKV0gPSAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkgPyB2YWx1ZSA6IFt2YWx1ZV07CiAgfSwKCiAgZ2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICBpZihuYW1lKSB7CiAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNbU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKV07CiAgICB9CiAgfSwKCiAgaGFzSGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICBpZihuYW1lKSB7CiAgICAgIHJldHVybiAodGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KFNJUC5VdGlscy5oZWFkZXJpemUobmFtZSkpICYmIHRydWUpIHx8IGZhbHNlOwogICAgfQogIH0sCgogIGRlbGV0ZUhlYWRlcjogZnVuY3Rpb24oaGVhZGVyKSB7CiAgICB2YXIgdmFsdWU7CiAgICBoZWFkZXIgPSBTSVAuVXRpbHMuaGVhZGVyaXplKGhlYWRlcik7CiAgICBpZih0aGlzLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoaGVhZGVyKSkgewogICAgICB2YWx1ZSA9IHRoaXMuaGVhZGVyc1toZWFkZXJdOwogICAgICBkZWxldGUgdGhpcy5oZWFkZXJzW2hlYWRlcl07CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICB9LAoKICBjbGVhckhlYWRlcnM6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5oZWFkZXJzID0ge307CiAgfSwKCiAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIG5ldyBVUkkoCiAgICAgIHRoaXMuX3Jhdy5zY2hlbWUsCiAgICAgIHRoaXMuX3Jhdy51c2VyLAogICAgICB0aGlzLl9yYXcuaG9zdCwKICAgICAgdGhpcy5fcmF3LnBvcnQsCiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbWV0ZXJzKSksCiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5oZWFkZXJzKSkpOwogIH0sCgogIHRvUmF3OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLl90b1N0cmluZyh0aGlzLl9yYXcpOwogIH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLl90b1N0cmluZyh0aGlzLl9ub3JtYWwpOwogIH0sCgogIF90b1N0cmluZzogZnVuY3Rpb24odXJpKSB7CiAgICB2YXIgaGVhZGVyLCBwYXJhbWV0ZXIsIGlkeCwgdXJpU3RyaW5nLCBoZWFkZXJzID0gW107CgogICAgdXJpU3RyaW5nICA9IHVyaS5zY2hlbWUgKyAnOic7CiAgICAvLyBhZGQgc2xhc2hlcyBpZiBpdCdzIG5vdCBhIHNpcChzKSBVUkkKICAgIGlmICghdXJpLnNjaGVtZS50b0xvd2VyQ2FzZSgpLm1hdGNoKCJec2lwcz8kIikpIHsKICAgICAgdXJpU3RyaW5nICs9ICIvLyI7CiAgICB9CiAgICBpZiAodXJpLnVzZXIpIHsKICAgICAgdXJpU3RyaW5nICs9IFNJUC5VdGlscy5lc2NhcGVVc2VyKHVyaS51c2VyKSArICdAJzsKICAgIH0KICAgIHVyaVN0cmluZyArPSB1cmkuaG9zdDsKICAgIGlmICh1cmkucG9ydCB8fCB1cmkucG9ydCA9PT0gMCkgewogICAgICB1cmlTdHJpbmcgKz0gJzonICsgdXJpLnBvcnQ7CiAgICB9CgogICAgZm9yIChwYXJhbWV0ZXIgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7CiAgICAgIHVyaVN0cmluZyArPSAnOycgKyBwYXJhbWV0ZXI7CgogICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl0gIT09IG51bGwpIHsKICAgICAgICB1cmlTdHJpbmcgKz0gJz0nKyB0aGlzLnBhcmFtZXRlcnNbcGFyYW1ldGVyXTsKICAgICAgfQogICAgfQoKICAgIGZvcihoZWFkZXIgaW4gdGhpcy5oZWFkZXJzKSB7CiAgICAgIGZvcihpZHggaW4gdGhpcy5oZWFkZXJzW2hlYWRlcl0pIHsKICAgICAgICBoZWFkZXJzLnB1c2goaGVhZGVyICsgJz0nICsgdGhpcy5oZWFkZXJzW2hlYWRlcl1baWR4XSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaGVhZGVycy5sZW5ndGggPiAwKSB7CiAgICAgIHVyaVN0cmluZyArPSAnPycgKyBoZWFkZXJzLmpvaW4oJyYnKTsKICAgIH0KCiAgICByZXR1cm4gdXJpU3RyaW5nOwogIH0KfTsKCgovKioKICAqIFBhcnNlIHRoZSBnaXZlbiBzdHJpbmcgYW5kIHJldHVybnMgYSBTSVAuVVJJIGluc3RhbmNlIG9yIHVuZGVmaW5lZCBpZgogICogaXQgaXMgYW4gaW52YWxpZCBVUkkuCiAgKiBAcHVibGljCiAgKiBAcGFyYW0ge1N0cmluZ30gdXJpCiAgKi8KVVJJLnBhcnNlID0gZnVuY3Rpb24odXJpKSB7CiAgdXJpID0gU0lQLkdyYW1tYXIucGFyc2UodXJpLCdTSVBfVVJJJyk7CgogIGlmICh1cmkgIT09IC0xKSB7CiAgICByZXR1cm4gdXJpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KfTsKClNJUC5VUkkgPSBVUkk7Cn07Cgp9LHt9XSwzNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgVXRpbHMKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7CnZhciBVdGlsczsKClV0aWxzPSB7CgogIFByb21pc2U6IGVudmlyb25tZW50LlByb21pc2UsCgogIGRlZmVyOiBmdW5jdGlvbiBkZWZlciAoKSB7CiAgICB2YXIgZGVmZXJyZWQgPSB7fTsKICAgIGRlZmVycmVkLnByb21pc2UgPSBuZXcgVXRpbHMuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGRlZmVycmVkLnJlc29sdmUgPSByZXNvbHZlOwogICAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7CiAgICB9KTsKICAgIHJldHVybiBkZWZlcnJlZDsKICB9LAoKICBwcm9taXNpZnk6IGZ1bmN0aW9uIHByb21pc2lmeSAob2JqZWN0LCBtZXRob2ROYW1lLCBjYWxsYmFja3NGaXJzdCkgewogICAgdmFyIG9sZE1ldGhvZCA9IG9iamVjdFttZXRob2ROYW1lXTsKICAgIHJldHVybiBmdW5jdGlvbiBwcm9taXNpZmllZE1ldGhvZCAoYXJnLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSkgewogICAgICByZXR1cm4gbmV3IFV0aWxzLlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBvbGRBcmdzID0gW2FyZywgcmVzb2x2ZSwgcmVqZWN0XTsKICAgICAgICBpZiAoY2FsbGJhY2tzRmlyc3QpIHsKICAgICAgICAgIG9sZEFyZ3MgPSBbcmVzb2x2ZSwgcmVqZWN0LCBhcmddOwogICAgICAgIH0KICAgICAgICBvbGRNZXRob2QuYXBwbHkob2JqZWN0LCBvbGRBcmdzKTsKICAgICAgfSkudGhlbihvblN1Y2Nlc3MsIG9uRmFpbHVyZSk7CiAgICB9OwogIH0sCgogIGF1Z21lbnQ6IGZ1bmN0aW9uIChvYmplY3QsIGNvbnN0cnVjdG9yLCBhcmdzLCBvdmVycmlkZSkgewogICAgdmFyIGlkeCwgcHJvdG87CgogICAgLy8gQWRkIHB1YmxpYyBwcm9wZXJ0aWVzIGZyb20gY29uc3RydWN0b3IncyBwcm90b3R5cGUgb250byBvYmplY3QKICAgIHByb3RvID0gY29uc3RydWN0b3IucHJvdG90eXBlOwogICAgZm9yIChpZHggaW4gcHJvdG8pIHsKICAgICAgaWYgKG92ZXJyaWRlIHx8IG9iamVjdFtpZHhdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBvYmplY3RbaWR4XSA9IHByb3RvW2lkeF07CiAgICAgIH0KICAgIH0KCiAgICAvLyBDb25zdHJ1Y3QgdGhlIG9iamVjdCBhcyB0aG91Z2ggaXQgd2VyZSBqdXN0IGNyZWF0ZWQgYnkgY29uc3RydWN0b3IKICAgIGNvbnN0cnVjdG9yLmFwcGx5KG9iamVjdCwgYXJncyk7CiAgfSwKCiAgb3B0aW9uc092ZXJyaWRlOiBmdW5jdGlvbiAob3B0aW9ucywgd2lubmVyLCBsb3NlciwgaXNEZXByZWNhdGVkLCBsb2dnZXIsIGRlZmF1bHRWYWx1ZSkgewogICAgaWYgKGlzRGVwcmVjYXRlZCAmJiBvcHRpb25zW2xvc2VyXSkgewogICAgICBsb2dnZXIud2Fybihsb3NlciArICcgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSAnICsgd2lubmVyICsgJyBpbnN0ZWFkJyk7CiAgICB9CgogICAgaWYgKG9wdGlvbnNbd2lubmVyXSAmJiBvcHRpb25zW2xvc2VyXSkgewogICAgICBsb2dnZXIud2Fybih3aW5uZXIgKyAnIG92ZXJyaWRpbmcgJyArIGxvc2VyKTsKICAgIH0KCiAgICBvcHRpb25zW3dpbm5lcl0gPSBvcHRpb25zW3dpbm5lcl0gfHwgb3B0aW9uc1tsb3Nlcl0gfHwgZGVmYXVsdFZhbHVlOwogIH0sCgogIHN0cl91dGY4X2xlbmd0aDogZnVuY3Rpb24oc3RyaW5nKSB7CiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykucmVwbGFjZSgvJVtBLUZcZF17Mn0vZywgJ1UnKS5sZW5ndGg7CiAgfSwKCiAgZ2VuZXJhdGVGYWtlU0RQOiBmdW5jdGlvbihib2R5KSB7CiAgICBpZiAoIWJvZHkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzdGFydCA9IGJvZHkuaW5kZXhPZignbz0nKTsKICAgIHZhciBlbmQgPSBib2R5LmluZGV4T2YoJ1xyXG4nLCBzdGFydCk7CgogICAgcmV0dXJuICd2PTBcclxuJyArIGJvZHkuc2xpY2Uoc3RhcnQsIGVuZCkgKyAnXHJcbnM9LVxyXG50PTAgMFxyXG5jPUlOIElQNCAwLjAuMC4wJzsKICB9LAoKICBpc0Z1bmN0aW9uOiBmdW5jdGlvbihmbikgewogICAgaWYgKGZuICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmbikgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgaXNEZWNpbWFsOiBmdW5jdGlvbiAobnVtKSB7CiAgICByZXR1cm4gIWlzTmFOKG51bSkgJiYgKHBhcnNlRmxvYXQobnVtKSA9PT0gcGFyc2VJbnQobnVtLDEwKSk7CiAgfSwKCiAgY3JlYXRlUmFuZG9tVG9rZW46IGZ1bmN0aW9uKHNpemUsIGJhc2UpIHsKICAgIHZhciBpLCByLAogICAgICB0b2tlbiA9ICcnOwoKICAgIGJhc2UgPSBiYXNlIHx8IDMyOwoKICAgIGZvciggaT0wOyBpIDwgc2l6ZTsgaSsrICkgewogICAgICByID0gTWF0aC5yYW5kb20oKSAqIGJhc2V8MDsKICAgICAgdG9rZW4gKz0gci50b1N0cmluZyhiYXNlKTsKICAgIH0KCiAgICByZXR1cm4gdG9rZW47CiAgfSwKCiAgbmV3VGFnOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBTSVAuVXRpbHMuY3JlYXRlUmFuZG9tVG9rZW4oU0lQLlVBLkMuVEFHX0xFTkdUSCk7CiAgfSwKCiAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3VzZXJzLzEwOTUzOC9icm9vZmEKICBuZXdVVUlEOiBmdW5jdGlvbigpIHsKICAgIHZhciBVVUlEID0gICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykgewogICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkqMTZ8MCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociYweDN8MHg4KTsKICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpOwogICAgfSk7CgogICAgcmV0dXJuIFVVSUQ7CiAgfSwKCiAgaG9zdFR5cGU6IGZ1bmN0aW9uKGhvc3QpIHsKICAgIGlmICghaG9zdCkgewogICAgICByZXR1cm47CiAgICB9IGVsc2UgewogICAgICBob3N0ID0gU0lQLkdyYW1tYXIucGFyc2UoaG9zdCwnaG9zdCcpOwogICAgICBpZiAoaG9zdCAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gaG9zdC5ob3N0X3R5cGU7CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAqIE5vcm1hbGl6ZSBTSVAgVVJJLgogICogTk9URTogSXQgZG9lcyBub3QgYWxsb3cgYSBTSVAgVVJJIHdpdGhvdXQgdXNlcm5hbWUuCiAgKiBBY2NlcHRzICdzaXAnLCAnc2lwcycgYW5kICd0ZWwnIFVSSXMgYW5kIGNvbnZlcnQgdGhlbSBpbnRvICdzaXAnLgogICogRGV0ZWN0cyB0aGUgZG9tYWluIHBhcnQgKGlmIGdpdmVuKSBhbmQgcHJvcGVybHkgaGV4LWVzY2FwZXMgdGhlIHVzZXIgcG9ydGlvbi4KICAqIElmIHRoZSB1c2VyIHBvcnRpb24gaGFzIG9ubHkgJ3RlbCcgbnVtYmVyIHN5bWJvbHMgdGhlIHVzZXIgcG9ydGlvbiBpcyBjbGVhbiBvZiAndGVsJyB2aXN1YWwgc2VwYXJhdG9ycy4KICAqIEBwcml2YXRlCiAgKiBAcGFyYW0ge1N0cmluZ30gdGFyZ2V0CiAgKiBAcGFyYW0ge1N0cmluZ30gW2RvbWFpbl0KICAqLwogIG5vcm1hbGl6ZVRhcmdldDogZnVuY3Rpb24odGFyZ2V0LCBkb21haW4pIHsKICAgIHZhciB1cmksIHRhcmdldF9hcnJheSwgdGFyZ2V0X3VzZXIsIHRhcmdldF9kb21haW47CgogICAgLy8gSWYgbm8gdGFyZ2V0IGlzIGdpdmVuIHRoZW4gcmFpc2UgYW4gZXJyb3IuCiAgICBpZiAoIXRhcmdldCkgewogICAgICByZXR1cm47CiAgICAvLyBJZiBhIFNJUC5VUkkgaW5zdGFuY2UgaXMgZ2l2ZW4gdGhlbiByZXR1cm4gaXQuCiAgICB9IGVsc2UgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFNJUC5VUkkpIHsKICAgICAgcmV0dXJuIHRhcmdldDsKCiAgICAvLyBJZiBhIHN0cmluZyBpcyBnaXZlbiBzcGxpdCBpdCBieSAnQCc6CiAgICAvLyAtIExhc3QgZnJhZ21lbnQgaXMgdGhlIGRlc2lyZWQgZG9tYWluLgogICAgLy8gLSBPdGhlcndpc2UgYXBwZW5kIHRoZSBnaXZlbiBkb21haW4gYXJndW1lbnQuCiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7CiAgICAgIHRhcmdldF9hcnJheSA9IHRhcmdldC5zcGxpdCgnQCcpOwoKICAgICAgc3dpdGNoKHRhcmdldF9hcnJheS5sZW5ndGgpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBpZiAoIWRvbWFpbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0YXJnZXRfdXNlciA9IHRhcmdldDsKICAgICAgICAgIHRhcmdldF9kb21haW4gPSBkb21haW47CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICB0YXJnZXRfdXNlciA9IHRhcmdldF9hcnJheVswXTsKICAgICAgICAgIHRhcmdldF9kb21haW4gPSB0YXJnZXRfYXJyYXlbMV07CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGFyZ2V0X3VzZXIgPSB0YXJnZXRfYXJyYXkuc2xpY2UoMCwgdGFyZ2V0X2FycmF5Lmxlbmd0aC0xKS5qb2luKCdAJyk7CiAgICAgICAgICB0YXJnZXRfZG9tYWluID0gdGFyZ2V0X2FycmF5W3RhcmdldF9hcnJheS5sZW5ndGgtMV07CiAgICAgIH0KCiAgICAgIC8vIFJlbW92ZSB0aGUgVVJJIHNjaGVtZSAoaWYgcHJlc2VudCkuCiAgICAgIHRhcmdldF91c2VyID0gdGFyZ2V0X3VzZXIucmVwbGFjZSgvXihzaXBzP3x0ZWwpOi9pLCAnJyk7CgogICAgICAvLyBSZW1vdmUgJ3RlbCcgdmlzdWFsIHNlcGFyYXRvcnMgaWYgdGhlIHVzZXIgcG9ydGlvbiBqdXN0IGNvbnRhaW5zICd0ZWwnIG51bWJlciBzeW1ib2xzLgogICAgICBpZiAoL15bXC1cLlwoXCldKlwrP1swLTlcLVwuXChcKV0rJC8udGVzdCh0YXJnZXRfdXNlcikpIHsKICAgICAgICB0YXJnZXRfdXNlciA9IHRhcmdldF91c2VyLnJlcGxhY2UoL1tcLVwuXChcKV0vZywgJycpOwogICAgICB9CgogICAgICAvLyBCdWlsZCB0aGUgY29tcGxldGUgU0lQIFVSSS4KICAgICAgdGFyZ2V0ID0gU0lQLkMuU0lQICsgJzonICsgU0lQLlV0aWxzLmVzY2FwZVVzZXIodGFyZ2V0X3VzZXIpICsgJ0AnICsgdGFyZ2V0X2RvbWFpbjsKCiAgICAgIC8vIEZpbmFsbHkgcGFyc2UgdGhlIHJlc3VsdGluZyBVUkkuCiAgICAgIGlmICh1cmkgPSBTSVAuVVJJLnBhcnNlKHRhcmdldCkpIHsKICAgICAgICByZXR1cm4gdXJpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0sCgogIC8qKgogICogSGV4LWVzY2FwZSBhIFNJUCBVUkkgdXNlci4KICAqIEBwcml2YXRlCiAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcgogICovCiAgZXNjYXBlVXNlcjogZnVuY3Rpb24odXNlcikgewogICAgLy8gRG9uJ3QgaGV4LWVzY2FwZSAnOicgKCUzQSksICcrJyAoJTJCKSwgJz8nICglM0YiKSwgJy8nICglMkYpLgogICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChkZWNvZGVVUklDb21wb25lbnQodXNlcikpLnJlcGxhY2UoLyUzQS9pZywgJzonKS5yZXBsYWNlKC8lMkIvaWcsICcrJykucmVwbGFjZSgvJTNGL2lnLCAnPycpLnJlcGxhY2UoLyUyRi9pZywgJy8nKTsKICB9LAoKICBoZWFkZXJpemU6IGZ1bmN0aW9uKHN0cmluZykgewogICAgdmFyIGV4Y2VwdGlvbnMgPSB7CiAgICAgICdDYWxsLUlkJzogJ0NhbGwtSUQnLAogICAgICAnQ3NlcSc6ICdDU2VxJywKICAgICAgJ01pbi1TZSc6ICdNaW4tU0UnLAogICAgICAnUmFjayc6ICdSQWNrJywKICAgICAgJ1JzZXEnOiAnUlNlcScsCiAgICAgICdXd3ctQXV0aGVudGljYXRlJzogJ1dXVy1BdXRoZW50aWNhdGUnCiAgICAgIH0sCiAgICAgIG5hbWUgPSBzdHJpbmcudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csJy0nKS5zcGxpdCgnLScpLAogICAgICBobmFtZSA9ICcnLAogICAgICBwYXJ0cyA9IG5hbWUubGVuZ3RoLCBwYXJ0OwoKICAgIGZvciAocGFydCA9IDA7IHBhcnQgPCBwYXJ0czsgcGFydCsrKSB7CiAgICAgIGlmIChwYXJ0ICE9PSAwKSB7CiAgICAgICAgaG5hbWUgKz0nLSc7CiAgICAgIH0KICAgICAgaG5hbWUgKz0gbmFtZVtwYXJ0XS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStuYW1lW3BhcnRdLnN1YnN0cmluZygxKTsKICAgIH0KICAgIGlmIChleGNlcHRpb25zW2huYW1lXSkgewogICAgICBobmFtZSA9IGV4Y2VwdGlvbnNbaG5hbWVdOwogICAgfQogICAgcmV0dXJuIGhuYW1lOwogIH0sCgogIHNpcEVycm9yQ2F1c2U6IGZ1bmN0aW9uKHN0YXR1c19jb2RlKSB7CiAgICB2YXIgY2F1c2U7CgogICAgZm9yIChjYXVzZSBpbiBTSVAuQy5TSVBfRVJST1JfQ0FVU0VTKSB7CiAgICAgIGlmIChTSVAuQy5TSVBfRVJST1JfQ0FVU0VTW2NhdXNlXS5pbmRleE9mKHN0YXR1c19jb2RlKSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gU0lQLkMuY2F1c2VzW2NhdXNlXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBTSVAuQy5jYXVzZXMuU0lQX0ZBSUxVUkVfQ09ERTsKICB9LAoKICBnZXRSZWFzb25QaHJhc2U6IGZ1bmN0aW9uIGdldFJlYXNvblBocmFzZSAoY29kZSwgc3BlY2lmaWMpIHsKICAgIHJldHVybiBzcGVjaWZpYyB8fCBTSVAuQy5SRUFTT05fUEhSQVNFW2NvZGVdIHx8ICcnOwogIH0sCgogIGdldFJlYXNvbkhlYWRlclZhbHVlOiBmdW5jdGlvbiBnZXRSZWFzb25IZWFkZXJWYWx1ZSAoY29kZSwgcmVhc29uKSB7CiAgICByZWFzb24gPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKGNvZGUsIHJlYXNvbik7CiAgICByZXR1cm4gJ1NJUCA7Y2F1c2U9JyArIGNvZGUgKyAnIDt0ZXh0PSInICsgcmVhc29uICsgJyInOwogIH0sCgogIGdldENhbmNlbFJlYXNvbjogZnVuY3Rpb24gZ2V0Q2FuY2VsUmVhc29uIChjb2RlLCByZWFzb24pIHsKICAgIGlmIChjb2RlICYmIGNvZGUgPCAyMDAgfHwgY29kZSA+IDY5OSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHN0YXR1c19jb2RlOiAnICsgY29kZSk7CiAgICB9IGVsc2UgaWYgKGNvZGUpIHsKICAgICAgcmV0dXJuIFNJUC5VdGlscy5nZXRSZWFzb25IZWFkZXJWYWx1ZShjb2RlLCByZWFzb24pOwogICAgfQogIH0sCgogIGJ1aWxkU3RhdHVzTGluZTogZnVuY3Rpb24gYnVpbGRTdGF0dXNMaW5lIChjb2RlLCByZWFzb24pIHsKICAgIGNvZGUgPSBjb2RlIHx8IG51bGw7CiAgICByZWFzb24gPSByZWFzb24gfHwgbnVsbDsKCiAgICAvLyBWYWxpZGF0ZSBjb2RlIGFuZCByZWFzb24gdmFsdWVzCiAgICBpZiAoIWNvZGUgfHwgKGNvZGUgPCAxMDAgfHwgY29kZSA+IDY5OSkpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdGF0dXNfY29kZTogJysgY29kZSk7CiAgICB9IGVsc2UgaWYgKHJlYXNvbiAmJiB0eXBlb2YgcmVhc29uICE9PSAnc3RyaW5nJyAmJiAhKHJlYXNvbiBpbnN0YW5jZW9mIFN0cmluZykpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCByZWFzb25fcGhyYXNlOiAnKyByZWFzb24pOwogICAgfQoKICAgIHJlYXNvbiA9IFV0aWxzLmdldFJlYXNvblBocmFzZShjb2RlLCByZWFzb24pOwoKICAgIHJldHVybiAnU0lQLzIuMCAnICsgY29kZSArICcgJyArIHJlYXNvbiArICdcclxuJzsKICB9LAoKICAvKioKICAqIEdlbmVyYXRlIGEgcmFuZG9tIFRlc3QtTmV0IElQIChodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM1NzM1KQogICogQHByaXZhdGUKICAqLwogIGdldFJhbmRvbVRlc3ROZXRJUDogZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBnZXRPY3RldChmcm9tLHRvKSB7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHRvLWZyb20rMSkrZnJvbSk7CiAgICB9CiAgICByZXR1cm4gJzE5Mi4wLjIuJyArIGdldE9jdGV0KDEsIDI1NCk7CiAgfSwKCiAgLy8gTUQ1IChNZXNzYWdlLURpZ2VzdCBBbGdvcml0aG0pIGh0dHA6Ly93d3cud2VidG9vbGtpdC5pbmZvCiAgY2FsY3VsYXRlTUQ1OiBmdW5jdGlvbihzdHJpbmcpIHsKICAgIGZ1bmN0aW9uIFJvdGF0ZUxlZnQobFZhbHVlLCBpU2hpZnRCaXRzKSB7CiAgICAgIHJldHVybiAobFZhbHVlPDxpU2hpZnRCaXRzKSB8IChsVmFsdWU+Pj4oMzItaVNoaWZ0Qml0cykpOwogICAgfQoKICAgIGZ1bmN0aW9uIEFkZFVuc2lnbmVkKGxYLGxZKSB7CiAgICAgIHZhciBsWDQsbFk0LGxYOCxsWTgsbFJlc3VsdDsKICAgICAgbFg4ID0gKGxYICYgMHg4MDAwMDAwMCk7CiAgICAgIGxZOCA9IChsWSAmIDB4ODAwMDAwMDApOwogICAgICBsWDQgPSAobFggJiAweDQwMDAwMDAwKTsKICAgICAgbFk0ID0gKGxZICYgMHg0MDAwMDAwMCk7CiAgICAgIGxSZXN1bHQgPSAobFggJiAweDNGRkZGRkZGKSsobFkgJiAweDNGRkZGRkZGKTsKICAgICAgaWYgKGxYNCAmIGxZNCkgewogICAgICAgIHJldHVybiAobFJlc3VsdCBeIDB4ODAwMDAwMDAgXiBsWDggXiBsWTgpOwogICAgICB9CiAgICAgIGlmIChsWDQgfCBsWTQpIHsKICAgICAgICBpZiAobFJlc3VsdCAmIDB4NDAwMDAwMDApIHsKICAgICAgICAgIHJldHVybiAobFJlc3VsdCBeIDB4QzAwMDAwMDAgXiBsWDggXiBsWTgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gKGxSZXN1bHQgXiAweDQwMDAwMDAwIF4gbFg4IF4gbFk4KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIChsUmVzdWx0IF4gbFg4IF4gbFk4KTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIEYoeCx5LHopIHsKICAgICAgcmV0dXJuICh4ICYgeSkgfCAoKH54KSAmIHopOwogICAgfQoKICAgIGZ1bmN0aW9uIEcoeCx5LHopIHsKICAgICAgcmV0dXJuICh4ICYgeikgfCAoeSAmICh+eikpOwogICAgfQoKICAgIGZ1bmN0aW9uIEgoeCx5LHopIHsKICAgICAgcmV0dXJuICh4IF4geSBeIHopOwogICAgfQoKICAgIGZ1bmN0aW9uIEkoeCx5LHopIHsKICAgICAgcmV0dXJuICh5IF4gKHggfCAofnopKSk7CiAgICB9CgogICAgZnVuY3Rpb24gRkYoYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEYoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gR0coYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEcoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gSEgoYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEgoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gSUkoYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEkoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gQ29udmVydFRvV29yZEFycmF5KHN0cmluZykgewogICAgICB2YXIgbFdvcmRDb3VudDsKICAgICAgdmFyIGxNZXNzYWdlTGVuZ3RoID0gc3RyaW5nLmxlbmd0aDsKICAgICAgdmFyIGxOdW1iZXJPZldvcmRzX3RlbXAxPWxNZXNzYWdlTGVuZ3RoICsgODsKICAgICAgdmFyIGxOdW1iZXJPZldvcmRzX3RlbXAyPShsTnVtYmVyT2ZXb3Jkc190ZW1wMS0obE51bWJlck9mV29yZHNfdGVtcDEgJSA2NCkpLzY0OwogICAgICB2YXIgbE51bWJlck9mV29yZHMgPSAobE51bWJlck9mV29yZHNfdGVtcDIrMSkqMTY7CiAgICAgIHZhciBsV29yZEFycmF5PUFycmF5KGxOdW1iZXJPZldvcmRzLTEpOwogICAgICB2YXIgbEJ5dGVQb3NpdGlvbiA9IDA7CiAgICAgIHZhciBsQnl0ZUNvdW50ID0gMDsKICAgICAgd2hpbGUgKCBsQnl0ZUNvdW50IDwgbE1lc3NhZ2VMZW5ndGggKSB7CiAgICAgICAgbFdvcmRDb3VudCA9IChsQnl0ZUNvdW50LShsQnl0ZUNvdW50ICUgNCkpLzQ7CiAgICAgICAgbEJ5dGVQb3NpdGlvbiA9IChsQnl0ZUNvdW50ICUgNCkqODsKICAgICAgICBsV29yZEFycmF5W2xXb3JkQ291bnRdID0gKGxXb3JkQXJyYXlbbFdvcmRDb3VudF0gfCAoc3RyaW5nLmNoYXJDb2RlQXQobEJ5dGVDb3VudCk8PGxCeXRlUG9zaXRpb24pKTsKICAgICAgICBsQnl0ZUNvdW50Kys7CiAgICAgIH0KICAgICAgbFdvcmRDb3VudCA9IChsQnl0ZUNvdW50LShsQnl0ZUNvdW50ICUgNCkpLzQ7CiAgICAgIGxCeXRlUG9zaXRpb24gPSAobEJ5dGVDb3VudCAlIDQpKjg7CiAgICAgIGxXb3JkQXJyYXlbbFdvcmRDb3VudF0gPSBsV29yZEFycmF5W2xXb3JkQ291bnRdIHwgKDB4ODA8PGxCeXRlUG9zaXRpb24pOwogICAgICBsV29yZEFycmF5W2xOdW1iZXJPZldvcmRzLTJdID0gbE1lc3NhZ2VMZW5ndGg8PDM7CiAgICAgIGxXb3JkQXJyYXlbbE51bWJlck9mV29yZHMtMV0gPSBsTWVzc2FnZUxlbmd0aD4+PjI5OwogICAgICByZXR1cm4gbFdvcmRBcnJheTsKICAgIH0KCiAgICBmdW5jdGlvbiBXb3JkVG9IZXgobFZhbHVlKSB7CiAgICAgIHZhciBXb3JkVG9IZXhWYWx1ZT0iIixXb3JkVG9IZXhWYWx1ZV90ZW1wPSIiLGxCeXRlLGxDb3VudDsKICAgICAgZm9yIChsQ291bnQgPSAwO2xDb3VudDw9MztsQ291bnQrKykgewogICAgICAgIGxCeXRlID0gKGxWYWx1ZT4+PihsQ291bnQqOCkpICYgMjU1OwogICAgICAgIFdvcmRUb0hleFZhbHVlX3RlbXAgPSAiMCIgKyBsQnl0ZS50b1N0cmluZygxNik7CiAgICAgICAgV29yZFRvSGV4VmFsdWUgPSBXb3JkVG9IZXhWYWx1ZSArIFdvcmRUb0hleFZhbHVlX3RlbXAuc3Vic3RyKFdvcmRUb0hleFZhbHVlX3RlbXAubGVuZ3RoLTIsMik7CiAgICAgIH0KICAgICAgcmV0dXJuIFdvcmRUb0hleFZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIFV0ZjhFbmNvZGUoc3RyaW5nKSB7CiAgICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cclxuL2csIlxuIik7CiAgICAgIHZhciB1dGZ0ZXh0ID0gIiI7CgogICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHN0cmluZy5sZW5ndGg7IG4rKykgewogICAgICAgIHZhciBjID0gc3RyaW5nLmNoYXJDb2RlQXQobik7CgogICAgICAgIGlmIChjIDwgMTI4KSB7CiAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYoKGMgPiAxMjcpICYmIChjIDwgMjA0OCkpIHsKICAgICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyA+PiA2KSB8IDE5Mik7CiAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyA+PiAxMikgfCAyMjQpOwogICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyA+PiA2KSAmIDYzKSB8IDEyOCk7CiAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdXRmdGV4dDsKICAgIH0KCiAgICB2YXIgeD1bXTsKICAgIHZhciBrLEFBLEJCLENDLERELGEsYixjLGQ7CiAgICB2YXIgUzExPTcsIFMxMj0xMiwgUzEzPTE3LCBTMTQ9MjI7CiAgICB2YXIgUzIxPTUsIFMyMj05ICwgUzIzPTE0LCBTMjQ9MjA7CiAgICB2YXIgUzMxPTQsIFMzMj0xMSwgUzMzPTE2LCBTMzQ9MjM7CiAgICB2YXIgUzQxPTYsIFM0Mj0xMCwgUzQzPTE1LCBTNDQ9MjE7CgogICAgc3RyaW5nID0gVXRmOEVuY29kZShzdHJpbmcpOwoKICAgIHggPSBDb252ZXJ0VG9Xb3JkQXJyYXkoc3RyaW5nKTsKCiAgICBhID0gMHg2NzQ1MjMwMTsgYiA9IDB4RUZDREFCODk7IGMgPSAweDk4QkFEQ0ZFOyBkID0gMHgxMDMyNTQ3NjsKCiAgICBmb3IgKGs9MDtrPHgubGVuZ3RoO2srPTE2KSB7CiAgICAgIEFBPWE7IEJCPWI7IENDPWM7IEREPWQ7CiAgICAgIGE9RkYoYSxiLGMsZCx4W2srMF0sIFMxMSwweEQ3NkFBNDc4KTsKICAgICAgZD1GRihkLGEsYixjLHhbaysxXSwgUzEyLDB4RThDN0I3NTYpOwogICAgICBjPUZGKGMsZCxhLGIseFtrKzJdLCBTMTMsMHgyNDIwNzBEQik7CiAgICAgIGI9RkYoYixjLGQsYSx4W2srM10sIFMxNCwweEMxQkRDRUVFKTsKICAgICAgYT1GRihhLGIsYyxkLHhbays0XSwgUzExLDB4RjU3QzBGQUYpOwogICAgICBkPUZGKGQsYSxiLGMseFtrKzVdLCBTMTIsMHg0Nzg3QzYyQSk7CiAgICAgIGM9RkYoYyxkLGEsYix4W2srNl0sIFMxMywweEE4MzA0NjEzKTsKICAgICAgYj1GRihiLGMsZCxhLHhbays3XSwgUzE0LDB4RkQ0Njk1MDEpOwogICAgICBhPUZGKGEsYixjLGQseFtrKzhdLCBTMTEsMHg2OTgwOThEOCk7CiAgICAgIGQ9RkYoZCxhLGIsYyx4W2srOV0sIFMxMiwweDhCNDRGN0FGKTsKICAgICAgYz1GRihjLGQsYSxiLHhbaysxMF0sUzEzLDB4RkZGRjVCQjEpOwogICAgICBiPUZGKGIsYyxkLGEseFtrKzExXSxTMTQsMHg4OTVDRDdCRSk7CiAgICAgIGE9RkYoYSxiLGMsZCx4W2srMTJdLFMxMSwweDZCOTAxMTIyKTsKICAgICAgZD1GRihkLGEsYixjLHhbaysxM10sUzEyLDB4RkQ5ODcxOTMpOwogICAgICBjPUZGKGMsZCxhLGIseFtrKzE0XSxTMTMsMHhBNjc5NDM4RSk7CiAgICAgIGI9RkYoYixjLGQsYSx4W2srMTVdLFMxNCwweDQ5QjQwODIxKTsKICAgICAgYT1HRyhhLGIsYyxkLHhbaysxXSwgUzIxLDB4RjYxRTI1NjIpOwogICAgICBkPUdHKGQsYSxiLGMseFtrKzZdLCBTMjIsMHhDMDQwQjM0MCk7CiAgICAgIGM9R0coYyxkLGEsYix4W2srMTFdLFMyMywweDI2NUU1QTUxKTsKICAgICAgYj1HRyhiLGMsZCxhLHhbayswXSwgUzI0LDB4RTlCNkM3QUEpOwogICAgICBhPUdHKGEsYixjLGQseFtrKzVdLCBTMjEsMHhENjJGMTA1RCk7CiAgICAgIGQ9R0coZCxhLGIsYyx4W2srMTBdLFMyMiwweDI0NDE0NTMpOwogICAgICBjPUdHKGMsZCxhLGIseFtrKzE1XSxTMjMsMHhEOEExRTY4MSk7CiAgICAgIGI9R0coYixjLGQsYSx4W2srNF0sIFMyNCwweEU3RDNGQkM4KTsKICAgICAgYT1HRyhhLGIsYyxkLHhbays5XSwgUzIxLDB4MjFFMUNERTYpOwogICAgICBkPUdHKGQsYSxiLGMseFtrKzE0XSxTMjIsMHhDMzM3MDdENik7CiAgICAgIGM9R0coYyxkLGEsYix4W2srM10sIFMyMywweEY0RDUwRDg3KTsKICAgICAgYj1HRyhiLGMsZCxhLHhbays4XSwgUzI0LDB4NDU1QTE0RUQpOwogICAgICBhPUdHKGEsYixjLGQseFtrKzEzXSxTMjEsMHhBOUUzRTkwNSk7CiAgICAgIGQ9R0coZCxhLGIsYyx4W2srMl0sIFMyMiwweEZDRUZBM0Y4KTsKICAgICAgYz1HRyhjLGQsYSxiLHhbays3XSwgUzIzLDB4Njc2RjAyRDkpOwogICAgICBiPUdHKGIsYyxkLGEseFtrKzEyXSxTMjQsMHg4RDJBNEM4QSk7CiAgICAgIGE9SEgoYSxiLGMsZCx4W2srNV0sIFMzMSwweEZGRkEzOTQyKTsKICAgICAgZD1ISChkLGEsYixjLHhbays4XSwgUzMyLDB4ODc3MUY2ODEpOwogICAgICBjPUhIKGMsZCxhLGIseFtrKzExXSxTMzMsMHg2RDlENjEyMik7CiAgICAgIGI9SEgoYixjLGQsYSx4W2srMTRdLFMzNCwweEZERTUzODBDKTsKICAgICAgYT1ISChhLGIsYyxkLHhbaysxXSwgUzMxLDB4QTRCRUVBNDQpOwogICAgICBkPUhIKGQsYSxiLGMseFtrKzRdLCBTMzIsMHg0QkRFQ0ZBOSk7CiAgICAgIGM9SEgoYyxkLGEsYix4W2srN10sIFMzMywweEY2QkI0QjYwKTsKICAgICAgYj1ISChiLGMsZCxhLHhbaysxMF0sUzM0LDB4QkVCRkJDNzApOwogICAgICBhPUhIKGEsYixjLGQseFtrKzEzXSxTMzEsMHgyODlCN0VDNik7CiAgICAgIGQ9SEgoZCxhLGIsYyx4W2srMF0sIFMzMiwweEVBQTEyN0ZBKTsKICAgICAgYz1ISChjLGQsYSxiLHhbayszXSwgUzMzLDB4RDRFRjMwODUpOwogICAgICBiPUhIKGIsYyxkLGEseFtrKzZdLCBTMzQsMHg0ODgxRDA1KTsKICAgICAgYT1ISChhLGIsYyxkLHhbays5XSwgUzMxLDB4RDlENEQwMzkpOwogICAgICBkPUhIKGQsYSxiLGMseFtrKzEyXSxTMzIsMHhFNkRCOTlFNSk7CiAgICAgIGM9SEgoYyxkLGEsYix4W2srMTVdLFMzMywweDFGQTI3Q0Y4KTsKICAgICAgYj1ISChiLGMsZCxhLHhbaysyXSwgUzM0LDB4QzRBQzU2NjUpOwogICAgICBhPUlJKGEsYixjLGQseFtrKzBdLCBTNDEsMHhGNDI5MjI0NCk7CiAgICAgIGQ9SUkoZCxhLGIsYyx4W2srN10sIFM0MiwweDQzMkFGRjk3KTsKICAgICAgYz1JSShjLGQsYSxiLHhbaysxNF0sUzQzLDB4QUI5NDIzQTcpOwogICAgICBiPUlJKGIsYyxkLGEseFtrKzVdLCBTNDQsMHhGQzkzQTAzOSk7CiAgICAgIGE9SUkoYSxiLGMsZCx4W2srMTJdLFM0MSwweDY1NUI1OUMzKTsKICAgICAgZD1JSShkLGEsYixjLHhbayszXSwgUzQyLDB4OEYwQ0NDOTIpOwogICAgICBjPUlJKGMsZCxhLGIseFtrKzEwXSxTNDMsMHhGRkVGRjQ3RCk7CiAgICAgIGI9SUkoYixjLGQsYSx4W2srMV0sIFM0NCwweDg1ODQ1REQxKTsKICAgICAgYT1JSShhLGIsYyxkLHhbays4XSwgUzQxLDB4NkZBODdFNEYpOwogICAgICBkPUlJKGQsYSxiLGMseFtrKzE1XSxTNDIsMHhGRTJDRTZFMCk7CiAgICAgIGM9SUkoYyxkLGEsYix4W2srNl0sIFM0MywweEEzMDE0MzE0KTsKICAgICAgYj1JSShiLGMsZCxhLHhbaysxM10sUzQ0LDB4NEUwODExQTEpOwogICAgICBhPUlJKGEsYixjLGQseFtrKzRdLCBTNDEsMHhGNzUzN0U4Mik7CiAgICAgIGQ9SUkoZCxhLGIsYyx4W2srMTFdLFM0MiwweEJEM0FGMjM1KTsKICAgICAgYz1JSShjLGQsYSxiLHhbaysyXSwgUzQzLDB4MkFEN0QyQkIpOwogICAgICBiPUlJKGIsYyxkLGEseFtrKzldLCBTNDQsMHhFQjg2RDM5MSk7CiAgICAgIGE9QWRkVW5zaWduZWQoYSxBQSk7CiAgICAgIGI9QWRkVW5zaWduZWQoYixCQik7CiAgICAgIGM9QWRkVW5zaWduZWQoYyxDQyk7CiAgICAgIGQ9QWRkVW5zaWduZWQoZCxERCk7CiAgICB9CgogICAgdmFyIHRlbXAgPSBXb3JkVG9IZXgoYSkrV29yZFRvSGV4KGIpK1dvcmRUb0hleChjKStXb3JkVG9IZXgoZCk7CgogICAgcmV0dXJuIHRlbXAudG9Mb3dlckNhc2UoKTsKICB9Cn07CgpTSVAuVXRpbHMgPSBVdGlsczsKfTsKCn0se31dLDM2OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBXZWJSVEMKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7CnZhciBXZWJSVEM7CgpXZWJSVEMgPSB7fTsKCldlYlJUQy5NZWRpYUhhbmRsZXIgPSByZXF1aXJlKCcuL1dlYlJUQy9NZWRpYUhhbmRsZXInKShTSVApOwpXZWJSVEMuTWVkaWFTdHJlYW1NYW5hZ2VyID0gcmVxdWlyZSgnLi9XZWJSVEMvTWVkaWFTdHJlYW1NYW5hZ2VyJykoU0lQLCBlbnZpcm9ubWVudCk7Cgp2YXIgX2lzU3VwcG9ydGVkOwoKV2ViUlRDLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewogIGlmIChfaXNTdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIF9pc1N1cHBvcnRlZDsKICB9CgogIFdlYlJUQy5NZWRpYVN0cmVhbSA9IGVudmlyb25tZW50Lk1lZGlhU3RyZWFtOwogIFdlYlJUQy5nZXRVc2VyTWVkaWEgPSBlbnZpcm9ubWVudC5nZXRVc2VyTWVkaWE7CiAgV2ViUlRDLlJUQ1BlZXJDb25uZWN0aW9uID0gZW52aXJvbm1lbnQuUlRDUGVlckNvbm5lY3Rpb247CiAgV2ViUlRDLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IGVudmlyb25tZW50LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbjsKCiAgaWYgKFdlYlJUQy5SVENQZWVyQ29ubmVjdGlvbiAmJiBXZWJSVEMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7CiAgICBpZiAoV2ViUlRDLmdldFVzZXJNZWRpYSkgewogICAgICBXZWJSVEMuZ2V0VXNlck1lZGlhID0gU0lQLlV0aWxzLnByb21pc2lmeShlbnZpcm9ubWVudCwgJ2dldFVzZXJNZWRpYScpOwogICAgfQogICAgX2lzU3VwcG9ydGVkID0gdHJ1ZTsKICB9CiAgZWxzZSB7CiAgICBfaXNTdXBwb3J0ZWQgPSBmYWxzZTsKICB9CiAgcmV0dXJuIF9pc1N1cHBvcnRlZDsKfTsKCnJldHVybiBXZWJSVEM7Cn07Cgp9LHsiLi9XZWJSVEMvTWVkaWFIYW5kbGVyIjozNywiLi9XZWJSVEMvTWVkaWFTdHJlYW1NYW5hZ2VyIjozOH1dLDM3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBNZWRpYUhhbmRsZXIKICovCgovKiBNZWRpYUhhbmRsZXIKICogQGNsYXNzIFBlZXJDb25uZWN0aW9uIGhlbHBlciBDbGFzcy4KICogQHBhcmFtIHtTSVAuU2Vzc2lvbn0gc2Vzc2lvbgogKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdCiAqIEBwYXJhbSB7U0lQLldlYlJUQy5NZWRpYVN0cmVhbU1hbmFnZXJ9IFtvcHRpb25zLm1lZGlhU3RyZWFtTWFuYWdlcl0KICogICAgICAgIFRoZSBNZWRpYVN0cmVhbU1hbmFnZXIgdG8gYWNxdWlyZS9yZWxlYXNlIHN0cmVhbXMgZnJvbS90by4KICogICAgICAgIElmIG5vdCBwcm92aWRlZCwgYSBkZWZhdWx0IE1lZGlhU3RyZWFtTWFuYWdlciB3aWxsIGJlIHVzZWQuCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKCnZhciBNZWRpYUhhbmRsZXIgPSBmdW5jdGlvbihzZXNzaW9uLCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHRoaXMubG9nZ2VyID0gc2Vzc2lvbi51YS5nZXRMb2dnZXIoJ3NpcC5pbnZpdGVjb250ZXh0Lm1lZGlhaGFuZGxlcicsIHNlc3Npb24uaWQpOwogIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247CiAgdGhpcy5sb2NhbE1lZGlhID0gbnVsbDsKICB0aGlzLnJlYWR5ID0gdHJ1ZTsKICB0aGlzLm1lZGlhU3RyZWFtTWFuYWdlciA9IG9wdGlvbnMubWVkaWFTdHJlYW1NYW5hZ2VyIHx8IG5ldyBTSVAuV2ViUlRDLk1lZGlhU3RyZWFtTWFuYWdlcih0aGlzLmxvZ2dlcik7CiAgdGhpcy5hdWRpb011dGVkID0gZmFsc2U7CiAgdGhpcy52aWRlb011dGVkID0gZmFsc2U7CgogIC8vIG9sZCBpbml0KCkgZnJvbSBoZXJlIG9uCiAgdmFyIHNlcnZlcnMgPSB0aGlzLnByZXBhcmVJY2VTZXJ2ZXJzKG9wdGlvbnMuc3R1blNlcnZlcnMsIG9wdGlvbnMudHVyblNlcnZlcnMpOwogIHRoaXMuUlRDQ29uc3RyYWludHMgPSBvcHRpb25zLlJUQ0NvbnN0cmFpbnRzIHx8IHt9OwoKICB0aGlzLmluaXRQZWVyQ29ubmVjdGlvbihzZXJ2ZXJzLCB0aGlzLlJUQ0NvbnN0cmFpbnRzKTsKCiAgZnVuY3Rpb24gc2VsZkVtaXQobWgsIGV2ZW50KSB7CiAgICBpZiAobWgubWVkaWFTdHJlYW1NYW5hZ2VyLm9uKSB7CiAgICAgIG1oLm1lZGlhU3RyZWFtTWFuYWdlci5vbihldmVudCwgZnVuY3Rpb24gKCkgewogICAgICAgIG1oLmVtaXQuYXBwbHkobWgsIFtldmVudF0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICBzZWxmRW1pdCh0aGlzLCAndXNlck1lZGlhUmVxdWVzdCcpOwogIHNlbGZFbWl0KHRoaXMsICd1c2VyTWVkaWEnKTsKICBzZWxmRW1pdCh0aGlzLCAndXNlck1lZGlhRmFpbGVkJyk7Cn07CgpNZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3RvcnkgPSBmdW5jdGlvbiBkZWZhdWx0RmFjdG9yeSAoc2Vzc2lvbiwgb3B0aW9ucykgewogIHJldHVybiBuZXcgTWVkaWFIYW5kbGVyKHNlc3Npb24sIG9wdGlvbnMpOwp9OwpNZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3RvcnkuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIFNJUC5XZWJSVEMuaXNTdXBwb3J0ZWQoKTsKfTsKCk1lZGlhSGFuZGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5NZWRpYUhhbmRsZXIucHJvdG90eXBlLCB7Ci8vIEZ1bmN0aW9ucyB0aGUgc2Vzc2lvbiBjYW4gdXNlCiAgaXNSZWFkeToge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gaXNSZWFkeSAoKSB7CiAgICByZXR1cm4gdGhpcy5yZWFkeTsKICB9fSwKCiAgY2xvc2U6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlICgpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygnY2xvc2luZyBQZWVyQ29ubmVjdGlvbicpOwogICAgdGhpcy5fcmVtb3RlU3RyZWFtcyA9IFtdOwogICAgLy8gaGF2ZSB0byBjaGVjayBzaWduYWxpbmdTdGF0ZSBzaW5jZSB0aGlzLmNsb3NlKCkgZ2V0cyBjYWxsZWQgbXVsdGlwbGUgdGltZXMKICAgIC8vIFRPRE8gZmlndXJlIG91dCB3aHkgdGhhdCBoYXBwZW5zCiAgICBpZih0aGlzLnBlZXJDb25uZWN0aW9uICYmIHRoaXMucGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUgIT09ICdjbG9zZWQnKSB7CiAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKTsKCiAgICAgIGlmKHRoaXMubG9jYWxNZWRpYSkgewogICAgICAgIHRoaXMubWVkaWFTdHJlYW1NYW5hZ2VyLnJlbGVhc2UodGhpcy5sb2NhbE1lZGlhKTsKICAgICAgfQogICAgfQogIH19LAoKICAvKioKICAgKiBAcGFyYW0ge1NJUC5XZWJSVEMuTWVkaWFTdHJlYW0gfCAoZ2V0VXNlck1lZGlhIGNvbnN0cmFpbnRzKX0gW21lZGlhSGludF0KICAgKiAgICAgICAgdGhlIE1lZGlhU3RyZWFtIChvciB0aGUgY29uc3RyYWludHMgZGVzY3JpYmluZyBpdCkgdG8gYmUgdXNlZCBmb3IgdGhlIHNlc3Npb24KICAgKi8KICBnZXREZXNjcmlwdGlvbjoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24gKG1lZGlhSGludCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIGFjcXVpcmUgPSBzZWxmLm1lZGlhU3RyZWFtTWFuYWdlci5hY3F1aXJlOwogICAgaWYgKGFjcXVpcmUubGVuZ3RoID4gMSkgewogICAgICBhY3F1aXJlID0gU0lQLlV0aWxzLnByb21pc2lmeSh0aGlzLm1lZGlhU3RyZWFtTWFuYWdlciwgJ2FjcXVpcmUnLCB0cnVlKTsKICAgIH0KICAgIG1lZGlhSGludCA9IG1lZGlhSGludCB8fCB7fTsKICAgIGlmIChtZWRpYUhpbnQuZGF0YUNoYW5uZWwgPT09IHRydWUpIHsKICAgICAgbWVkaWFIaW50LmRhdGFDaGFubmVsID0ge307CiAgICB9CiAgICB0aGlzLm1lZGlhSGludCA9IG1lZGlhSGludDsKCiAgICAvKgogICAgICogMS4gYWNxdWlyZSBzdHJlYW1zIChza2lwIGlmIE1lZGlhU3RyZWFtcyBwYXNzZWQgaW4pCiAgICAgKiAyLiBhZGRTdHJlYW1zCiAgICAgKiAzLiBjcmVhdGVPZmZlci9jcmVhdGVBbnN3ZXIKICAgICAqLwoKICAgIHZhciBzdHJlYW1Qcm9taXNlOwogICAgaWYgKHNlbGYubG9jYWxNZWRpYSkgewogICAgICBzZWxmLmxvZ2dlci5sb2coJ2FscmVhZHkgaGF2ZSBsb2NhbCBtZWRpYScpOwogICAgICBzdHJlYW1Qcm9taXNlID0gU0lQLlV0aWxzLlByb21pc2UucmVzb2x2ZShzZWxmLmxvY2FsTWVkaWEpOwogICAgfQogICAgZWxzZSB7CiAgICAgIHNlbGYubG9nZ2VyLmxvZygnYWNxdWlyaW5nIGxvY2FsIG1lZGlhJyk7CiAgICAgIHN0cmVhbVByb21pc2UgPSBhY3F1aXJlLmNhbGwoc2VsZi5tZWRpYVN0cmVhbU1hbmFnZXIsIG1lZGlhSGludCkKICAgICAgICAudGhlbihmdW5jdGlvbiBhY3F1aXJlU3VjY2VlZGVkKHN0cmVhbXMpIHsKICAgICAgICAgIHNlbGYubG9nZ2VyLmxvZygnYWNxdWlyZWQgbG9jYWwgbWVkaWEgc3RyZWFtcycpOwogICAgICAgICAgc2VsZi5sb2NhbE1lZGlhID0gc3RyZWFtczsKICAgICAgICAgIHNlbGYuc2Vzc2lvbi5jb25uZWN0aW5nKCk7CiAgICAgICAgICByZXR1cm4gc3RyZWFtczsKICAgICAgICB9LCBmdW5jdGlvbiBhY3F1aXJlRmFpbGVkKGVycikgewogICAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoJ3VuYWJsZSB0byBhY3F1aXJlIHN0cmVhbXMnKTsKICAgICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKGVycik7CiAgICAgICAgICBzZWxmLnNlc3Npb24uY29ubmVjdGluZygpOwogICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4odGhpcy5hZGRTdHJlYW1zLmJpbmQodGhpcykpCiAgICAgIDsKICAgIH0KCiAgICByZXR1cm4gc3RyZWFtUHJvbWlzZQogICAgICAudGhlbihmdW5jdGlvbiBzdHJlYW1BZGRpdGlvblN1Y2NlZWRlZCgpIHsKICAgICAgICBpZiAoc2VsZi5oYXNPZmZlcigncmVtb3RlJykpIHsKICAgICAgICAgIHNlbGYucGVlckNvbm5lY3Rpb24ub25kYXRhY2hhbm5lbCA9IGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgICAgc2VsZi5kYXRhQ2hhbm5lbCA9IGV2dC5jaGFubmVsOwogICAgICAgICAgICBzZWxmLmVtaXQoJ2RhdGFDaGFubmVsJywgc2VsZi5kYXRhQ2hhbm5lbCk7CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSBpZiAobWVkaWFIaW50LmRhdGFDaGFubmVsICYmCiAgICAgICAgICAgICAgICAgICBzZWxmLnBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKSB7CiAgICAgICAgICBzZWxmLmRhdGFDaGFubmVsID0gc2VsZi5wZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgKICAgICAgICAgICAgJ3NpcGpzJywKICAgICAgICAgICAgbWVkaWFIaW50LmRhdGFDaGFubmVsCiAgICAgICAgICApOwogICAgICAgICAgc2VsZi5lbWl0KCdkYXRhQ2hhbm5lbCcsIHNlbGYuZGF0YUNoYW5uZWwpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5yZW5kZXIoKTsKICAgICAgICByZXR1cm4gc2VsZi5jcmVhdGVPZmZlck9yQW5zd2VyKHNlbGYuUlRDQ29uc3RyYWludHMpOwogICAgICB9KQogICAgOwogIH19LAoKICAvKioKICAqIE1lc3NhZ2UgcmVjZXB0aW9uLgogICogQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAqIEBwYXJhbSB7U3RyaW5nfSBzZHAKICAqLwogIHNldERlc2NyaXB0aW9uOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiBzZXREZXNjcmlwdGlvbiAoc2RwKSB7CiAgICB2YXIgcmF3RGVzY3JpcHRpb24gPSB7CiAgICAgIHR5cGU6IHRoaXMuaGFzT2ZmZXIoJ2xvY2FsJykgPyAnYW5zd2VyJyA6ICdvZmZlcicsCiAgICAgIHNkcDogc2RwCiAgICB9OwoKICAgIHRoaXMuZW1pdCgnc2V0RGVzY3JpcHRpb24nLCByYXdEZXNjcmlwdGlvbik7CgogICAgdmFyIGRlc2NyaXB0aW9uID0gbmV3IFNJUC5XZWJSVEMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHJhd0Rlc2NyaXB0aW9uKTsKICAgIHJldHVybiBTSVAuVXRpbHMucHJvbWlzaWZ5KHRoaXMucGVlckNvbm5lY3Rpb24sICdzZXRSZW1vdGVEZXNjcmlwdGlvbicpKGRlc2NyaXB0aW9uKTsKICB9fSwKCiAgLyoqCiAgICogSWYgdGhlIFNlc3Npb24gYXNzb2NpYXRlZCB3aXRoIHRoaXMgTWVkaWFIYW5kbGVyIHdlcmUgdG8gYmUgcmVmZXJyZWQsCiAgICogd2hhdCBtZWRpYUhpbnQgc2hvdWxkIGJlIHByb3ZpZGVkIHRvIHRoZSBVQSdzIGludml0ZSBtZXRob2Q/CiAgICovCiAgZ2V0UmVmZXJNZWRpYToge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVmZXJNZWRpYSAoKSB7CiAgICBmdW5jdGlvbiBoYXNUcmFja3MgKHRyYWNrR2V0dGVyLCBzdHJlYW0pIHsKICAgICAgcmV0dXJuIHN0cmVhbVt0cmFja0dldHRlcl0oKS5sZW5ndGggPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGJvdGhIYXZlVHJhY2tzICh0cmFja0dldHRlcikgewogICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9jYWxTdHJlYW1zKCkuc29tZShoYXNUcmFja3MuYmluZChudWxsLCB0cmFja0dldHRlcikpICYmCiAgICAgICAgICAgICB0aGlzLmdldFJlbW90ZVN0cmVhbXMoKS5zb21lKGhhc1RyYWNrcy5iaW5kKG51bGwsIHRyYWNrR2V0dGVyKSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgY29uc3RyYWludHM6IHsKICAgICAgICBhdWRpbzogYm90aEhhdmVUcmFja3MuY2FsbCh0aGlzLCAnZ2V0QXVkaW9UcmFja3MnKSwKICAgICAgICB2aWRlbzogYm90aEhhdmVUcmFja3MuY2FsbCh0aGlzLCAnZ2V0VmlkZW9UcmFja3MnKQogICAgICB9CiAgICB9OwogIH19LAoKICB1cGRhdGVJY2VTZXJ2ZXJzOiB7d3JpdGVhYmxlOnRydWUsIHZhbHVlOiBmdW5jdGlvbiAob3B0aW9ucykgewogICAgdmFyIHNlcnZlcnMgPSB0aGlzLnByZXBhcmVJY2VTZXJ2ZXJzKG9wdGlvbnMuc3R1blNlcnZlcnMsIG9wdGlvbnMudHVyblNlcnZlcnMpOwogICAgdGhpcy5SVENDb25zdHJhaW50cyA9IG9wdGlvbnMuUlRDQ29uc3RyYWludHMgfHwgdGhpcy5SVENDb25zdHJhaW50czsKCiAgICB0aGlzLmluaXRQZWVyQ29ubmVjdGlvbihzZXJ2ZXJzLCB0aGlzLlJUQ0NvbnN0cmFpbnRzKTsKCiAgICAvKiBvbmNlIHVwZGF0ZUljZSBpcyBpbXBsZW1lbnRlZCBjb3JyZWN0bHksIHRoaXMgaXMgYmV0dGVyIHRoYW4gYWJvdmUKICAgIC8vbm8gb3AgaWYgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoaXMKICAgIGlmICghdGhpcy5wZWVyQ29ubmVjdGlvbi51cGRhdGVJY2UpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMucGVlckNvbm5lY3Rpb24udXBkYXRlSWNlKHsnaWNlU2VydmVycyc6IHNlcnZlcnN9LCB0aGlzLlJUQ0NvbnN0cmFpbnRzKTsKICAgICovCiAgfX0sCgovLyBGdW5jdGlvbnMgdGhlIHNlc3Npb24gY2FuIHVzZSwgYnV0IG9ubHkgYmVjYXVzZSBpdCdzIGNvbnZlbmllbnQgZm9yIHRoZSBhcHBsaWNhdGlvbgogIGlzTXV0ZWQ6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGlzTXV0ZWQgKCkgewogICAgcmV0dXJuIHsKICAgICAgYXVkaW86IHRoaXMuYXVkaW9NdXRlZCwKICAgICAgdmlkZW86IHRoaXMudmlkZW9NdXRlZAogICAgfTsKICB9fSwKCiAgbXV0ZToge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gbXV0ZSAob3B0aW9ucykgewogICAgaWYgKHRoaXMuZ2V0TG9jYWxTdHJlYW1zKCkubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7CiAgICAgIGF1ZGlvOiB0aGlzLmdldExvY2FsU3RyZWFtcygpWzBdLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCwKICAgICAgdmlkZW86IHRoaXMuZ2V0TG9jYWxTdHJlYW1zKClbMF0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPiAwCiAgICB9OwoKICAgIHZhciBhdWRpb011dGVkID0gZmFsc2UsCiAgICAgICAgdmlkZW9NdXRlZCA9IGZhbHNlOwoKICAgIGlmIChvcHRpb25zLmF1ZGlvICYmICF0aGlzLmF1ZGlvTXV0ZWQpIHsKICAgICAgYXVkaW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMuYXVkaW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudG9nZ2xlTXV0ZUF1ZGlvKHRydWUpOwogICAgfQoKICAgIGlmIChvcHRpb25zLnZpZGVvICYmICF0aGlzLnZpZGVvTXV0ZWQpIHsKICAgICAgdmlkZW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudmlkZW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudG9nZ2xlTXV0ZVZpZGVvKHRydWUpOwogICAgfQoKICAgIC8vUkVWSVNJVAogICAgaWYgKGF1ZGlvTXV0ZWQgfHwgdmlkZW9NdXRlZCkgewogICAgICByZXR1cm4gewogICAgICAgIGF1ZGlvOiBhdWRpb011dGVkLAogICAgICAgIHZpZGVvOiB2aWRlb011dGVkCiAgICAgIH07CiAgICAgIC8qdGhpcy5zZXNzaW9uLm9ubXV0ZSh7CiAgICAgICAgYXVkaW86IGF1ZGlvTXV0ZWQsCiAgICAgICAgdmlkZW86IHZpZGVvTXV0ZWQKICAgICAgfSk7Ki8KICAgIH0KICB9fSwKCiAgdW5tdXRlOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiB1bm11dGUgKG9wdGlvbnMpIHsKICAgIGlmICh0aGlzLmdldExvY2FsU3RyZWFtcygpLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgewogICAgICBhdWRpbzogdGhpcy5nZXRMb2NhbFN0cmVhbXMoKVswXS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDAsCiAgICAgIHZpZGVvOiB0aGlzLmdldExvY2FsU3RyZWFtcygpWzBdLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID4gMAogICAgfTsKCiAgICB2YXIgYXVkaW9Vbk11dGVkID0gZmFsc2UsCiAgICAgICAgdmlkZW9Vbk11dGVkID0gZmFsc2U7CgogICAgaWYgKG9wdGlvbnMuYXVkaW8gJiYgdGhpcy5hdWRpb011dGVkKSB7CiAgICAgIGF1ZGlvVW5NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMuYXVkaW9NdXRlZCA9IGZhbHNlOwogICAgICB0aGlzLnRvZ2dsZU11dGVBdWRpbyhmYWxzZSk7CiAgICB9CgogICAgaWYgKG9wdGlvbnMudmlkZW8gJiYgdGhpcy52aWRlb011dGVkKSB7CiAgICAgIHZpZGVvVW5NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudmlkZW9NdXRlZCA9IGZhbHNlOwogICAgICB0aGlzLnRvZ2dsZU11dGVWaWRlbyhmYWxzZSk7CiAgICB9CgogICAgLy9SRVZJU0lUCiAgICBpZiAoYXVkaW9Vbk11dGVkIHx8IHZpZGVvVW5NdXRlZCkgewogICAgICByZXR1cm4gewogICAgICAgIGF1ZGlvOiBhdWRpb1VuTXV0ZWQsCiAgICAgICAgdmlkZW86IHZpZGVvVW5NdXRlZAogICAgICB9OwogICAgICAvKnRoaXMuc2Vzc2lvbi5vbnVubXV0ZSh7CiAgICAgICAgYXVkaW86IGF1ZGlvVW5NdXRlZCwKICAgICAgICB2aWRlbzogdmlkZW9Vbk11dGVkCiAgICAgIH0pOyovCiAgICB9CiAgfX0sCgogIGhvbGQ6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGhvbGQgKCkgewogICAgdGhpcy50b2dnbGVNdXRlQXVkaW8odHJ1ZSk7CiAgICB0aGlzLnRvZ2dsZU11dGVWaWRlbyh0cnVlKTsKICB9fSwKCiAgdW5ob2xkOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiB1bmhvbGQgKCkgewogICAgaWYgKCF0aGlzLmF1ZGlvTXV0ZWQpIHsKICAgICAgdGhpcy50b2dnbGVNdXRlQXVkaW8oZmFsc2UpOwogICAgfQoKICAgIGlmICghdGhpcy52aWRlb011dGVkKSB7CiAgICAgIHRoaXMudG9nZ2xlTXV0ZVZpZGVvKGZhbHNlKTsKICAgIH0KICB9fSwKCi8vIEZ1bmN0aW9ucyB0aGUgYXBwbGljYXRpb24gY2FuIHVzZSwgYnV0IG5vdCB0aGUgc2Vzc2lvbgogIGdldExvY2FsU3RyZWFtczoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW1zICgpIHsKICAgIHZhciBwYyA9IHRoaXMucGVlckNvbm5lY3Rpb247CiAgICBpZiAocGMgJiYgcGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3BlZXJDb25uZWN0aW9uIGlzIGNsb3NlZCwgZ2V0TG9jYWxTdHJlYW1zIHJldHVybmluZyBbXScpOwogICAgICByZXR1cm4gW107CiAgICB9CiAgICByZXR1cm4gKHBjLmdldExvY2FsU3RyZWFtcyAmJiBwYy5nZXRMb2NhbFN0cmVhbXMoKSkgfHwKICAgICAgcGMubG9jYWxTdHJlYW1zIHx8IFtdOwogIH19LAoKICBnZXRSZW1vdGVTdHJlYW1zOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiBnZXRSZW1vdGVTdHJlYW1zICgpIHsKICAgIHZhciBwYyA9IHRoaXMucGVlckNvbm5lY3Rpb247CiAgICBpZiAocGMgJiYgcGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3BlZXJDb25uZWN0aW9uIGlzIGNsb3NlZCwgZ2V0UmVtb3RlU3RyZWFtcyByZXR1cm5pbmcgdGhpcy5fcmVtb3RlU3RyZWFtcycpOwogICAgICByZXR1cm4gdGhpcy5fcmVtb3RlU3RyZWFtczsKICAgIH0KICAgIHJldHVybihwYy5nZXRSZW1vdGVTdHJlYW1zICYmIHBjLmdldFJlbW90ZVN0cmVhbXMoKSkgfHwKICAgICAgcGMucmVtb3RlU3RyZWFtcyB8fCBbXTsKICB9fSwKCiAgcmVuZGVyOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIgKHJlbmRlckhpbnQpIHsKICAgIHJlbmRlckhpbnQgPSByZW5kZXJIaW50IHx8ICh0aGlzLm1lZGlhSGludCAmJiB0aGlzLm1lZGlhSGludC5yZW5kZXIpOwogICAgaWYgKCFyZW5kZXJIaW50KSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciBzdHJlYW1HZXR0ZXJzID0gewogICAgICBsb2NhbDogJ2dldExvY2FsU3RyZWFtcycsCiAgICAgIHJlbW90ZTogJ2dldFJlbW90ZVN0cmVhbXMnCiAgICB9OwogICAgT2JqZWN0LmtleXMoc3RyZWFtR2V0dGVycykuZm9yRWFjaChmdW5jdGlvbiAobG9jKSB7CiAgICAgIHZhciBzdHJlYW1HZXR0ZXIgPSBzdHJlYW1HZXR0ZXJzW2xvY107CiAgICAgIHZhciBzdHJlYW1zID0gdGhpc1tzdHJlYW1HZXR0ZXJdKCk7CiAgICAgIFNJUC5XZWJSVEMuTWVkaWFTdHJlYW1NYW5hZ2VyLnJlbmRlcihzdHJlYW1zLCByZW5kZXJIaW50W2xvY10pOwogICAgfS5iaW5kKHRoaXMpKTsKICB9fSwKCi8vIEludGVybmFsIGZ1bmN0aW9ucwogIGhhc09mZmVyOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiBoYXNPZmZlciAod2hlcmUpIHsKICAgIHZhciBvZmZlclN0YXRlID0gJ2hhdmUtJyArIHdoZXJlICsgJy1vZmZlcic7CiAgICByZXR1cm4gdGhpcy5wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSA9PT0gb2ZmZXJTdGF0ZTsKICAgIC8vIFRPRE8gY29uc2lkZXIgc2lnbmFsaW5nU3RhdGVzIHdpdGggJ3ByYW5zd2VyJz8KICB9fSwKCiAgcHJlcGFyZUljZVNlcnZlcnM6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIHByZXBhcmVJY2VTZXJ2ZXJzIChzdHVuU2VydmVycywgdHVyblNlcnZlcnMpIHsKICAgIHZhciBzZXJ2ZXJzID0gW10sCiAgICAgIGNvbmZpZyA9IHRoaXMuc2Vzc2lvbi51YS5jb25maWd1cmF0aW9uOwoKICAgIHN0dW5TZXJ2ZXJzID0gc3R1blNlcnZlcnMgfHwgY29uZmlnLnN0dW5TZXJ2ZXJzOwogICAgdHVyblNlcnZlcnMgPSB0dXJuU2VydmVycyB8fCBjb25maWcudHVyblNlcnZlcnM7CgogICAgW10uY29uY2F0KHN0dW5TZXJ2ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2ZXIpIHsKICAgICAgc2VydmVycy5wdXNoKHsndXJscyc6IHNlcnZlcn0pOwogICAgfSk7CgogICAgW10uY29uY2F0KHR1cm5TZXJ2ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2ZXIpIHsKICAgICAgc2VydmVycy5wdXNoKHsKICAgICAgICAndXJscyc6IHNlcnZlci51cmxzLAogICAgICAgICd1c2VybmFtZSc6IHNlcnZlci51c2VybmFtZSwKICAgICAgICAnY3JlZGVudGlhbCc6IHNlcnZlci5wYXNzd29yZAogICAgICB9KTsKICAgIH0pOwoKICAgIHJldHVybiBzZXJ2ZXJzOwogIH19LAoKICBpbml0UGVlckNvbm5lY3Rpb246IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGluaXRQZWVyQ29ubmVjdGlvbihzZXJ2ZXJzLCBSVENDb25zdHJhaW50cykgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICBjb25maWcgPSB0aGlzLnNlc3Npb24udWEuY29uZmlndXJhdGlvbjsKCiAgICB0aGlzLm9uSWNlQ29tcGxldGVkID0gU0lQLlV0aWxzLmRlZmVyKCk7CiAgICB0aGlzLm9uSWNlQ29tcGxldGVkLnByb21pc2UudGhlbihmdW5jdGlvbihwYykgewogICAgICBzZWxmLmVtaXQoJ2ljZUdhdGhlcmluZ0NvbXBsZXRlJywgcGMpOwogICAgICBpZiAoc2VsZi5pY2VDaGVja2luZ1RpbWVyKSB7CiAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQoc2VsZi5pY2VDaGVja2luZ1RpbWVyKTsKICAgICAgICBzZWxmLmljZUNoZWNraW5nVGltZXIgPSBudWxsOwogICAgICB9CiAgICB9KTsKCiAgICBpZiAodGhpcy5wZWVyQ29ubmVjdGlvbikgewogICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICB9CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbiA9IG5ldyBTSVAuV2ViUlRDLlJUQ1BlZXJDb25uZWN0aW9uKHsnaWNlU2VydmVycyc6IHNlcnZlcnN9LCBSVENDb25zdHJhaW50cyk7CgogICAgLy8gRmlyZWZveCAoMzUuMC4xKSBzb21ldGltZXMgdGhyb3dzIG9uIGNhbGxzIHRvIHBlZXJDb25uZWN0aW9uLmdldFJlbW90ZVN0cmVhbXMKICAgIC8vIGV2ZW4gaWYgcGVlckNvbm5lY3Rpb24ub25hZGRzdHJlYW0gd2FzIGp1c3QgY2FsbGVkLiBJbiBvcmRlciB0byBtYWtlCiAgICAvLyBNZWRpYUhhbmRsZXIucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXMgd29yaywga2VlcCB0cmFjayBvZiB0aGVtIG1hbnVhbGx5CiAgICB0aGlzLl9yZW1vdGVTdHJlYW1zID0gW107CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmFkZHN0cmVhbSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgc2VsZi5sb2dnZXIubG9nKCdzdHJlYW0gYWRkZWQ6ICcrIGUuc3RyZWFtLmlkKTsKICAgICAgc2VsZi5fcmVtb3RlU3RyZWFtcy5wdXNoKGUuc3RyZWFtKTsKICAgICAgc2VsZi5yZW5kZXIoKTsKICAgICAgc2VsZi5lbWl0KCdhZGRTdHJlYW0nLCBlKTsKICAgIH07CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbnJlbW92ZXN0cmVhbSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgc2VsZi5sb2dnZXIubG9nKCdzdHJlYW0gcmVtb3ZlZDogJysgZS5zdHJlYW0uaWQpOwogICAgfTsKCiAgICB0aGlzLnN0YXJ0SWNlQ2hlY2tpbmdUaW1lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFzZWxmLmljZUNoZWNraW5nVGltZXIpIHsKICAgICAgICBzZWxmLmljZUNoZWNraW5nVGltZXIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBzZWxmLmxvZ2dlci5sb2coJ1JUQ0ljZUNoZWNraW5nIFRpbWVvdXQgVHJpZ2dlcmVkIGFmdGVyICcrY29uZmlnLmljZUNoZWNraW5nVGltZW91dCsnIG1pbGxpc2Vjb25kcycpOwogICAgICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZC5yZXNvbHZlKHRoaXMpOwogICAgICAgIH0uYmluZCh0aGlzLnBlZXJDb25uZWN0aW9uKSwgY29uZmlnLmljZUNoZWNraW5nVGltZW91dCk7CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgc2VsZi5lbWl0KCdpY2VDYW5kaWRhdGUnLCBlKTsKICAgICAgaWYgKGUuY2FuZGlkYXRlKSB7CiAgICAgICAgc2VsZi5sb2dnZXIubG9nKCdJQ0UgY2FuZGlkYXRlIHJlY2VpdmVkOiAnKyAoZS5jYW5kaWRhdGUuY2FuZGlkYXRlID09PSBudWxsID8gbnVsbCA6IGUuY2FuZGlkYXRlLmNhbmRpZGF0ZS50cmltKCkpKTsKICAgICAgICBzZWxmLnN0YXJ0SWNlQ2hlY2tpbmdUaW1lcigpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbGYub25JY2VDb21wbGV0ZWQucmVzb2x2ZSh0aGlzKTsKICAgICAgfQogICAgfTsKCiAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNlbGYubG9nZ2VyLmxvZygnUlRDSWNlR2F0aGVyaW5nU3RhdGUgY2hhbmdlZDogJyArIHRoaXMuaWNlR2F0aGVyaW5nU3RhdGUpOwogICAgICBpZiAodGhpcy5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ2dhdGhlcmluZycpIHsKICAgICAgICBzZWxmLmVtaXQoJ2ljZUdhdGhlcmluZycsIHRoaXMpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmljZUdhdGhlcmluZ1N0YXRlID09PSAnY29tcGxldGUnKSB7CiAgICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZC5yZXNvbHZlKHRoaXMpOwogICAgICB9CiAgICB9OwoKICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsgIC8vbmVlZCBlIGZvciBjb21tZW50ZWQgb3V0IGNhc2UKICAgICAgdmFyIHN0YXRlRXZlbnQ7CgogICAgICBpZiAodGhpcy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdjaGVja2luZycpIHsKICAgICAgICBzZWxmLnN0YXJ0SWNlQ2hlY2tpbmdUaW1lcigpOwogICAgICB9CgogICAgICBzd2l0Y2ggKHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKSB7CiAgICAgIGNhc2UgJ25ldyc6CiAgICAgICAgc3RhdGVFdmVudCA9ICdpY2VDb25uZWN0aW9uJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnY2hlY2tpbmcnOgogICAgICAgIHN0YXRlRXZlbnQgPSAnaWNlQ29ubmVjdGlvbkNoZWNraW5nJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnY29ubmVjdGVkJzoKICAgICAgICBzdGF0ZUV2ZW50ID0gJ2ljZUNvbm5lY3Rpb25Db25uZWN0ZWQnOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdjb21wbGV0ZWQnOgogICAgICAgIHN0YXRlRXZlbnQgPSAnaWNlQ29ubmVjdGlvbkNvbXBsZXRlZCc7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2ZhaWxlZCc6CiAgICAgICAgc3RhdGVFdmVudCA9ICdpY2VDb25uZWN0aW9uRmFpbGVkJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZGlzY29ubmVjdGVkJzoKICAgICAgICBzdGF0ZUV2ZW50ID0gJ2ljZUNvbm5lY3Rpb25EaXNjb25uZWN0ZWQnOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdjbG9zZWQnOgogICAgICAgIHN0YXRlRXZlbnQgPSAnaWNlQ29ubmVjdGlvbkNsb3NlZCc7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc2VsZi5sb2dnZXIud2FybignVW5rbm93biBpY2VDb25uZWN0aW9uIHN0YXRlOicsIHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2VsZi5lbWl0KHN0YXRlRXZlbnQsIHRoaXMpOwoKICAgICAgLy9CcmlhIHN0YXRlIGNoYW5nZXMgYXJlIGFsd2F5cyBjb25uZWN0ZWQgLT4gZGlzY29ubmVjdGVkIC0+IGNvbm5lY3RlZCBvbiBhY2NlcHQsIHNvIHNlc3Npb24gZ2V0cyB0ZXJtaW5hdGVkCiAgICAgIC8vbm9ybWFsIGNhbGxzIHN3aXRjaCBmcm9tIGZhaWxlZCB0byBjb25uZWN0ZWQgaW4gc29tZSBjYXNlcywgc28gY2hlY2tpbmcgZm9yIGZhaWxlZCBhbmQgdGVybWluYXRlZAogICAgICAvKmlmICh0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2ZhaWxlZCcpIHsKICAgICAgICBzZWxmLnNlc3Npb24udGVybWluYXRlKHsKICAgICAgICBjYXVzZTogU0lQLkMuY2F1c2VzLlJUUF9USU1FT1VULAogICAgICAgIHN0YXR1c19jb2RlOiAyMDAsCiAgICAgICAgcmVhc29uX3BocmFzZTogU0lQLkMuY2F1c2VzLlJUUF9USU1FT1VUCiAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGUuY3VycmVudFRhcmdldC5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ2NvbXBsZXRlJyAmJiB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSAhPT0gJ2Nsb3NlZCcpIHsKICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZCh0aGlzKTsKICAgICAgfSovCiAgICB9OwoKICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub25zdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICBzZWxmLmxvZ2dlci5sb2coJ1BlZXJDb25uZWN0aW9uIHN0YXRlIGNoYW5nZWQgdG8gIicrIHRoaXMucmVhZHlTdGF0ZSArJyInKTsKICAgIH07CiAgfX0sCgogIGNyZWF0ZU9mZmVyT3JBbnN3ZXI6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU9mZmVyT3JBbnN3ZXIgKGNvbnN0cmFpbnRzKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgbWV0aG9kTmFtZTsKICAgIHZhciBwYyA9IHNlbGYucGVlckNvbm5lY3Rpb247CgogICAgc2VsZi5yZWFkeSA9IGZhbHNlOwogICAgbWV0aG9kTmFtZSA9IHNlbGYuaGFzT2ZmZXIoJ3JlbW90ZScpID8gJ2NyZWF0ZUFuc3dlcicgOiAnY3JlYXRlT2ZmZXInOwoKICAgIHJldHVybiBTSVAuVXRpbHMucHJvbWlzaWZ5KHBjLCBtZXRob2ROYW1lLCB0cnVlKShjb25zdHJhaW50cykKICAgICAgLnRoZW4oU0lQLlV0aWxzLnByb21pc2lmeShwYywgJ3NldExvY2FsRGVzY3JpcHRpb24nKSkKICAgICAgLnRoZW4oZnVuY3Rpb24gb25TZXRMb2NhbERlc2NyaXB0aW9uU3VjY2VzcygpIHsKICAgICAgICB2YXIgZGVmZXJyZWQgPSBTSVAuVXRpbHMuZGVmZXIoKTsKICAgICAgICBpZiAocGMuaWNlR2F0aGVyaW5nU3RhdGUgPT09ICdjb21wbGV0ZScgJiYgKHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcgfHwgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY29tcGxldGVkJykpIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZC5wcm9taXNlLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlOwogICAgICB9KQogICAgICAudGhlbihmdW5jdGlvbiByZWFkeVN1Y2Nlc3MgKCkgewogICAgICAgIHZhciBzZHAgPSBwYy5sb2NhbERlc2NyaXB0aW9uLnNkcDsKCiAgICAgICAgc2RwID0gU0lQLkhhY2tzLkNocm9tZS5uZWVkc0V4cGxpY2l0bHlJbmFjdGl2ZVNEUChzZHApOwogICAgICAgIHNkcCA9IFNJUC5IYWNrcy5BbGxCcm93c2Vycy51bm1hc2tEdGxzKHNkcCk7CgogICAgICAgIHZhciBzZHBXcmFwcGVyID0gewogICAgICAgICAgdHlwZTogbWV0aG9kTmFtZSA9PT0gJ2NyZWF0ZU9mZmVyJyA/ICdvZmZlcicgOiAnYW5zd2VyJywKICAgICAgICAgIHNkcDogc2RwCiAgICAgICAgfTsKCiAgICAgICAgc2VsZi5lbWl0KCdnZXREZXNjcmlwdGlvbicsIHNkcFdyYXBwZXIpOwoKICAgICAgICBzZWxmLnJlYWR5ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gc2RwV3JhcHBlci5zZHA7CiAgICAgIH0pCiAgICAgIC5jYXRjaChmdW5jdGlvbiBtZXRob2RGYWlsZWQgKGUpIHsKICAgICAgICBzZWxmLmxvZ2dlci5lcnJvcihlKTsKICAgICAgICBzZWxmLnJlYWR5ID0gdHJ1ZTsKICAgICAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuR2V0RGVzY3JpcHRpb25FcnJvcihlKTsKICAgICAgfSkKICAgIDsKICB9fSwKCiAgYWRkU3RyZWFtczoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gYWRkU3RyZWFtcyAoc3RyZWFtcykgewogICAgdHJ5IHsKICAgICAgc3RyZWFtcyA9IFtdLmNvbmNhdChzdHJlYW1zKTsKICAgICAgc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShzdHJlYW0pOwogICAgICB9LCB0aGlzKTsKICAgIH0gY2F0Y2goZSkgewogICAgICB0aGlzLmxvZ2dlci5lcnJvcignZXJyb3IgYWRkaW5nIHN0cmVhbScpOwogICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTsKICAgICAgcmV0dXJuIFNJUC5VdGlscy5Qcm9taXNlLnJlamVjdChlKTsKICAgIH0KCiAgICByZXR1cm4gU0lQLlV0aWxzLlByb21pc2UucmVzb2x2ZSgpOwogIH19LAoKICB0b2dnbGVNdXRlSGVscGVyOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVNdXRlSGVscGVyICh0cmFja0dldHRlciwgbXV0ZSkgewogICAgdGhpcy5nZXRMb2NhbFN0cmVhbXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgc3RyZWFtW3RyYWNrR2V0dGVyXSgpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgdHJhY2suZW5hYmxlZCA9ICFtdXRlOwogICAgICB9KTsKICAgIH0pOwogIH19LAoKICB0b2dnbGVNdXRlQXVkaW86IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZU11dGVBdWRpbyAobXV0ZSkgewogICAgdGhpcy50b2dnbGVNdXRlSGVscGVyKCdnZXRBdWRpb1RyYWNrcycsIG11dGUpOwogIH19LAoKICB0b2dnbGVNdXRlVmlkZW86IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZU11dGVWaWRlbyAobXV0ZSkgewogICAgdGhpcy50b2dnbGVNdXRlSGVscGVyKCdnZXRWaWRlb1RyYWNrcycsIG11dGUpOwogIH19Cn0pOwoKLy8gUmV0dXJuIHNpbmNlIGl0IHdpbGwgYmUgYXNzaWduZWQgdG8gYSB2YXJpYWJsZS4KcmV0dXJuIE1lZGlhSGFuZGxlcjsKfTsKCn0se31dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBNZWRpYVN0cmVhbU1hbmFnZXIKICovCgovKiBNZWRpYVN0cmVhbU1hbmFnZXIKICogQGNsYXNzIE1hbmFnZXMgdGhlIGFjcXVpc2l0aW9uIGFuZCByZWxlYXNlIG9mIE1lZGlhU3RyZWFtcy4KICogQHBhcmFtIHttZWRpYUhpbnR9IFtkZWZhdWx0TWVkaWFIaW50XSBUaGUgbWVkaWFIaW50IHRvIHVzZSBpZiBub25lIGlzIHByb3ZpZGVkIHRvIGFjcXVpcmUoKQogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQLCBlbnZpcm9ubWVudCkgewoKLy8gRGVmYXVsdCBNZWRpYVN0cmVhbU1hbmFnZXIgcHJvdmlkZXMgc2luZ2xlLXVzZSBzdHJlYW1zIGNyZWF0ZWQgd2l0aCBnZXRVc2VyTWVkaWEKdmFyIE1lZGlhU3RyZWFtTWFuYWdlciA9IGZ1bmN0aW9uIE1lZGlhU3RyZWFtTWFuYWdlciAobG9nZ2VyLCBkZWZhdWx0TWVkaWFIaW50KSB7CiAgaWYgKCFTSVAuV2ViUlRDLmlzU3VwcG9ydGVkKCkpIHsKICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5Ob3RTdXBwb3J0ZWRFcnJvcignTWVkaWEgbm90IHN1cHBvcnRlZCcpOwogIH0KCiAgdGhpcy5tZWRpYUhpbnQgPSBkZWZhdWx0TWVkaWFIaW50IHx8IHsKICAgIGNvbnN0cmFpbnRzOiB7YXVkaW86IHRydWUsIHZpZGVvOiB0cnVlfQogIH07CgogIC8vIG1hcCBvZiBzdHJlYW1zIHRvIGFjcXVpc2l0aW9uIG1hbm5lcjoKICAvLyB0cnVlIC0+IHBhc3NlZCBpbiBhcyBtZWRpYUhpbnQuc3RyZWFtCiAgLy8gZmFsc2UgLT4gZ2V0VXNlck1lZGlhCiAgdGhpcy5hY3F1aXNpdGlvbnMgPSB7fTsKfTsKTWVkaWFTdHJlYW1NYW5hZ2VyLnN0cmVhbUlkID0gZnVuY3Rpb24gKHN0cmVhbSkgewogIHJldHVybiBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5jb25jYXQoc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkpCiAgICAubWFwKGZ1bmN0aW9uIHRyYWNrSWQgKHRyYWNrKSB7CiAgICAgIHJldHVybiB0cmFjay5pZDsKICAgIH0pCiAgICAuam9pbignJyk7Cn07CgovKioKICogQHBhcmFtIHsoQXJyYXkgb2YpIE1lZGlhU3RyZWFtfSBzdHJlYW1zIC0gVGhlIHN0cmVhbXMgdG8gcmVuZGVyCiAqCiAqIEBwYXJhbSB7KEFycmF5IG9mKSBIVE1MTWVkaWFFbGVtZW50fSBlbGVtZW50cwogKiAgICAgICAgLSBUaGUgPGF1ZGlvPi88dmlkZW8+IGVsZW1lbnQocykgdGhhdCBzaG91bGQgcmVuZGVyIHRoZSBzdHJlYW1zCiAqCiAqIEVhY2ggc3RyZWFtIGluIHN0cmVhbXMgcmVuZGVycyB0byB0aGUgY29ycmVzcG9uZGluZyBlbGVtZW50IGluIGVsZW1lbnRzLAogKiB3cmFwcGluZyBhcm91bmQgZWxlbWVudHMgaWYgbmVlZGVkLgogKi8KTWVkaWFTdHJlYW1NYW5hZ2VyLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoc3RyZWFtcywgZWxlbWVudHMpIHsKICBpZiAoIWVsZW1lbnRzKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnRzKSAmJiAhZWxlbWVudHMubGVuZ3RoKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbGVtZW50cyBtdXN0IG5vdCBiZSBlbXB0eScpOwogIH0KCiAgZnVuY3Rpb24gYXR0YWNoTWVkaWFTdHJlYW0oZWxlbWVudCwgc3RyZWFtKSB7CiAgICBpZiAodHlwZW9mIGVsZW1lbnQuc3JjICE9PSAndW5kZWZpbmVkJykgewogICAgICBlbnZpcm9ubWVudC5yZXZva2VPYmplY3RVUkwoZWxlbWVudC5zcmMpOwogICAgICBlbGVtZW50LnNyYyA9IGVudmlyb25tZW50LmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOwogICAgfSBlbHNlIGlmICh0eXBlb2YgKGVsZW1lbnQuc3JjT2JqZWN0IHx8IGVsZW1lbnQubW96U3JjT2JqZWN0KSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgZWxlbWVudC5zcmNPYmplY3QgPSBlbGVtZW50Lm1velNyY09iamVjdCA9IHN0cmVhbTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGVuc3VyZU1lZGlhUGxheWluZyAobWVkaWFFbGVtZW50KSB7CiAgICB2YXIgaW50ZXJ2YWwgPSAxMDA7CiAgICBtZWRpYUVsZW1lbnQuZW5zdXJlUGxheWluZ0ludGVydmFsSWQgPSBTSVAuVGltZXJzLnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG1lZGlhRWxlbWVudC5wYXVzZWQpIHsKICAgICAgICBtZWRpYUVsZW1lbnQucGxheSgpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIFNJUC5UaW1lcnMuY2xlYXJJbnRlcnZhbChtZWRpYUVsZW1lbnQuZW5zdXJlUGxheWluZ0ludGVydmFsSWQpOwogICAgICB9CiAgICB9LCBpbnRlcnZhbCk7CiAgfQoKICBmdW5jdGlvbiBhdHRhY2hBbmRQbGF5IChlbGVtZW50cywgc3RyZWFtLCBpbmRleCkgewogICAgaWYgKHR5cGVvZiBlbGVtZW50cyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBlbGVtZW50cyA9IGVsZW1lbnRzKCk7CiAgICB9CiAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4ICUgZWxlbWVudHMubGVuZ3RoXTsKICAgIChlbnZpcm9ubWVudC5hdHRhY2hNZWRpYVN0cmVhbSB8fCBhdHRhY2hNZWRpYVN0cmVhbSkoZWxlbWVudCwgc3RyZWFtKTsKICAgIGVuc3VyZU1lZGlhUGxheWluZyhlbGVtZW50KTsKICB9CgogIC8vIFtdLmNvbmNhdCAiY2FzdHMiIGBlbGVtZW50c2AgaW50byBhbiBhcnJheQogIC8vIHNvIGZvckVhY2ggd29ya3MgZXZlbiBpZiBgZWxlbWVudHNgIHdhcyBhIHNpbmdsZSBlbGVtZW50CiAgZWxlbWVudHMgPSBbXS5jb25jYXQoZWxlbWVudHMpOwogIFtdLmNvbmNhdChzdHJlYW1zKS5mb3JFYWNoKGF0dGFjaEFuZFBsYXkuYmluZChudWxsLCBlbGVtZW50cykpOwp9OwoKTWVkaWFTdHJlYW1NYW5hZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU0lQLkV2ZW50RW1pdHRlci5wcm90b3R5cGUsIHsKICAnYWNxdWlyZSc6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGFjcXVpcmUgKG1lZGlhSGludCkgewogICAgbWVkaWFIaW50ID0gT2JqZWN0LmtleXMobWVkaWFIaW50IHx8IHt9KS5sZW5ndGggPyBtZWRpYUhpbnQgOiB0aGlzLm1lZGlhSGludDsKCiAgICB2YXIgc2F2ZVN1Y2Nlc3MgPSBmdW5jdGlvbiAoaXNIaW50U3RyZWFtLCBzdHJlYW1zKSB7CiAgICAgIHN0cmVhbXMgPSBbXS5jb25jYXQoc3RyZWFtcyk7CiAgICAgIHN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgdmFyIHN0cmVhbUlkID0gTWVkaWFTdHJlYW1NYW5hZ2VyLnN0cmVhbUlkKHN0cmVhbSk7CiAgICAgICAgdGhpcy5hY3F1aXNpdGlvbnNbc3RyZWFtSWRdID0gISFpc0hpbnRTdHJlYW07CiAgICAgIH0sIHRoaXMpOwogICAgICByZXR1cm4gU0lQLlV0aWxzLlByb21pc2UucmVzb2x2ZShzdHJlYW1zKTsKICAgIH0uYmluZCh0aGlzKTsKCiAgICBpZiAobWVkaWFIaW50LnN0cmVhbSkgewogICAgICByZXR1cm4gc2F2ZVN1Y2Nlc3ModHJ1ZSwgbWVkaWFIaW50LnN0cmVhbSk7CiAgICB9IGVsc2UgewogICAgICAvLyBGYWxsYmFjayB0byBhdWRpby92aWRlbyBlbmFibGVkIGlmIG5vIG1lZGlhSGludCBjYW4gYmUgZm91bmQuCiAgICAgIHZhciBjb25zdHJhaW50cyA9IG1lZGlhSGludC5jb25zdHJhaW50cyB8fAogICAgICAgICh0aGlzLm1lZGlhSGludCAmJiB0aGlzLm1lZGlhSGludC5jb25zdHJhaW50cykgfHwKICAgICAgICB7YXVkaW86IHRydWUsIHZpZGVvOiB0cnVlfTsKCiAgICAgIHZhciBkZWZlcnJlZCA9IFNJUC5VdGlscy5kZWZlcigpOwoKICAgICAgLyoKICAgICAgICogTWFrZSB0aGUgY2FsbCBhc3luY2hyb25vdXMsIHNvIHRoYXQgSUNDcyBoYXZlIGEgY2hhbmNlCiAgICAgICAqIHRvIGRlZmluZSBjYWxsYmFja3MgdG8gYHVzZXJNZWRpYVJlcXVlc3RgCiAgICAgICAqLwogICAgICBTSVAuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuZW1pdCgndXNlck1lZGlhUmVxdWVzdCcsIGNvbnN0cmFpbnRzKTsKCiAgICAgICAgdmFyIGVtaXRUaGVuQ2FsbCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICB2YXIgY2FsbGJhY2tBcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTsKICAgICAgICAgIC8vIEVtaXQgd2l0aCBhbGwgb2YgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSByZWFsIGNhbGxiYWNrLgogICAgICAgICAgdmFyIG5ld0FyZ3MgPSBbZXZlbnROYW1lXS5jb25jYXQoY2FsbGJhY2tBcmdzKTsKCiAgICAgICAgICB0aGlzLmVtaXQuYXBwbHkodGhpcywgbmV3QXJncyk7CgogICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGNhbGxiYWNrQXJncyk7CiAgICAgICAgfS5iaW5kKHRoaXMpOwoKICAgICAgICBpZiAoY29uc3RyYWludHMuYXVkaW8gfHwgY29uc3RyYWludHMudmlkZW8pIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoCiAgICAgICAgICAgIFNJUC5XZWJSVEMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKQogICAgICAgICAgICAudGhlbigKICAgICAgICAgICAgICBlbWl0VGhlbkNhbGwuYmluZCh0aGlzLCAndXNlck1lZGlhJywgc2F2ZVN1Y2Nlc3MuYmluZChudWxsLCBmYWxzZSkpLAogICAgICAgICAgICAgIGVtaXRUaGVuQ2FsbC5iaW5kKHRoaXMsICd1c2VyTWVkaWFGYWlsZWQnLCBmdW5jdGlvbihlKXt0aHJvdyBlO30pCiAgICAgICAgICAgICkKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIExvY2FsIHN0cmVhbXMgd2VyZSBleHBsaWNpdGx5IGV4Y2x1ZGVkLgogICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShbXSk7CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcyksIDApOwoKICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7CiAgICB9CiAgfX0sCgogICdyZWxlYXNlJzoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gcmVsZWFzZSAoc3RyZWFtcykgewogICAgc3RyZWFtcyA9IFtdLmNvbmNhdChzdHJlYW1zKTsKICAgIHN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgIHZhciBzdHJlYW1JZCA9IE1lZGlhU3RyZWFtTWFuYWdlci5zdHJlYW1JZChzdHJlYW0pOwogICAgICBpZiAodGhpcy5hY3F1aXNpdGlvbnNbc3RyZWFtSWRdID09PSBmYWxzZSkgewogICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGRlbGV0ZSB0aGlzLmFjcXVpc2l0aW9uc1tzdHJlYW1JZF07CiAgICB9LCB0aGlzKTsKICB9fSwKfSk7CgovLyBSZXR1cm4gc2luY2UgaXQgd2lsbCBiZSBhc3NpZ25lZCB0byBhIHZhcmlhYmxlLgpyZXR1cm4gTWVkaWFTdHJlYW1NYW5hZ2VyOwp9OwoKfSx7fV0sMzk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7CiJ1c2Ugc3RyaWN0IjsKCnZhciB0b3BsZXZlbCA9IGdsb2JhbC53aW5kb3cgfHwgZ2xvYmFsOwoKZnVuY3Rpb24gZ2V0UHJlZml4ZWRQcm9wZXJ0eSAob2JqZWN0LCBuYW1lKSB7CiAgaWYgKG9iamVjdCA9PSBudWxsKSB7CiAgICByZXR1cm47CiAgfQogIHZhciBjYXBpdGFsaXplZE5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTsKICB2YXIgcHJlZml4ZWROYW1lcyA9IFtuYW1lLCAnd2Via2l0JyArIGNhcGl0YWxpemVkTmFtZSwgJ21veicgKyBjYXBpdGFsaXplZE5hbWVdOwogIGZvciAodmFyIGkgaW4gcHJlZml4ZWROYW1lcykgewogICAgdmFyIHByb3BlcnR5ID0gb2JqZWN0W3ByZWZpeGVkTmFtZXNbaV1dOwogICAgaWYgKHByb3BlcnR5KSB7CiAgICAgIHJldHVybiBwcm9wZXJ0eS5iaW5kKG9iamVjdCk7CiAgICB9CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBXZWJTb2NrZXQ6IHRvcGxldmVsLldlYlNvY2tldCwKICBUcmFuc3BvcnQ6IHJlcXVpcmUoJy4vVHJhbnNwb3J0JyksCiAgb3BlbjogdG9wbGV2ZWwub3BlbiwKICBQcm9taXNlOiB0b3BsZXZlbC5Qcm9taXNlLAogIHRpbWVyczogdG9wbGV2ZWwsCgogIC8vIENvbnNvbGUgaXMgbm90IGRlZmluZWQgaW4gRUNNQVNjcmlwdCwgc28ganVzdCBpbiBjYXNlLi4uCiAgY29uc29sZTogdG9wbGV2ZWwuY29uc29sZSB8fCB7CiAgICBkZWJ1ZzogZnVuY3Rpb24gKCkge30sCiAgICBsb2c6IGZ1bmN0aW9uICgpIHt9LAogICAgd2FybjogZnVuY3Rpb24gKCkge30sCiAgICBlcnJvcjogZnVuY3Rpb24gKCkge30KICB9LAoKICBNZWRpYVN0cmVhbTogZ2V0UHJlZml4ZWRQcm9wZXJ0eSh0b3BsZXZlbCwgJ01lZGlhU3RyZWFtJyksCiAgZ2V0VXNlck1lZGlhOiBnZXRQcmVmaXhlZFByb3BlcnR5KHRvcGxldmVsLm5hdmlnYXRvciwgJ2dldFVzZXJNZWRpYScpLAogIFJUQ1BlZXJDb25uZWN0aW9uOiBnZXRQcmVmaXhlZFByb3BlcnR5KHRvcGxldmVsLCAnUlRDUGVlckNvbm5lY3Rpb24nKSwKICBSVENTZXNzaW9uRGVzY3JpcHRpb246IGdldFByZWZpeGVkUHJvcGVydHkodG9wbGV2ZWwsICdSVENTZXNzaW9uRGVzY3JpcHRpb24nKSwKCiAgYWRkRXZlbnRMaXN0ZW5lcjogZ2V0UHJlZml4ZWRQcm9wZXJ0eSh0b3BsZXZlbCwgJ2FkZEV2ZW50TGlzdGVuZXInKSwKICBIVE1MTWVkaWFFbGVtZW50OiB0b3BsZXZlbC5IVE1MTWVkaWFFbGVtZW50LAoKICBhdHRhY2hNZWRpYVN0cmVhbTogdG9wbGV2ZWwuYXR0YWNoTWVkaWFTdHJlYW0sCiAgY3JlYXRlT2JqZWN0VVJMOiB0b3BsZXZlbC5VUkwgJiYgdG9wbGV2ZWwuVVJMLmNyZWF0ZU9iamVjdFVSTCwKICByZXZva2VPYmplY3RVUkw6IHRvcGxldmVsLlVSTCAmJiB0b3BsZXZlbC5VUkwucmV2b2tlT2JqZWN0VVJMCn07Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7Ii4vVHJhbnNwb3J0IjozMn1dLDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vU0lQJykocmVxdWlyZSgnLi9lbnZpcm9ubWVudCcpKTsKCn0seyIuL1NJUCI6MjMsIi4vZW52aXJvbm1lbnQiOjM5fV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOyAvKioNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KCgp2YXIgX3NpcCA9IHJlcXVpcmUoJ3NpcC5qcycpOwoKdmFyIF9zaXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2lwKTsKCnZhciBfc2RwVHJhbnNmb3JtID0gcmVxdWlyZSgnc2RwLXRyYW5zZm9ybScpOwoKdmFyIF9zZHBUcmFuc2Zvcm0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2RwVHJhbnNmb3JtKTsKCnZhciBfSW52aXRlQ2xpZW50Q29udGV4dCA9IHJlcXVpcmUoJy4vSW52aXRlQ2xpZW50Q29udGV4dCcpOwoKdmFyIF9JbnZpdGVDbGllbnRDb250ZXh0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ludml0ZUNsaWVudENvbnRleHQpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIGFkZENhbmRpZGF0ZXNUb1NEUCA9IGZ1bmN0aW9uIGFkZENhbmRpZGF0ZXNUb1NEUCh0eHRTZHAsIGNhbmRpZGF0ZXMpIHsKICAgIHZhciBzZHAgPSBfc2RwVHJhbnNmb3JtMi5kZWZhdWx0LnBhcnNlKHR4dFNkcCk7CiAgICBzZHAubWVkaWFbMF0uY2FuZGlkYXRlcyA9IFtdOwogICAgc2RwLm1lZGlhWzFdLmNhbmRpZGF0ZXMgPSBbXTsKICAgIGNhbmRpZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAoY2FuZGlkYXRlKSB7CiAgICAgICAgdmFyIHBhcnRzID0gY2FuZGlkYXRlLmNhbmRpZGF0ZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7CiAgICAgICAgdmFyIGMgPSB7CiAgICAgICAgICAgIGZvdW5kYXRpb246IHBhcnRzWzBdLAogICAgICAgICAgICBjb21wb25lbnQ6IHBhcnRzWzFdLAogICAgICAgICAgICB0cmFuc3BvcnQ6IHBhcnRzWzJdLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgIHByaW9yaXR5OiBwYXJ0c1szXSwKICAgICAgICAgICAgaXA6IHBhcnRzWzRdLAogICAgICAgICAgICBwb3J0OiBwYXJ0c1s1XSwKICAgICAgICAgICAgdHlwZTogcGFydHNbN10sCiAgICAgICAgICAgIGdlbmVyYXRpb246ICcwJwogICAgICAgIH07CiAgICAgICAgZm9yICh2YXIgaSA9IDg7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgICBpZiAocGFydHNbaV0gPT09ICdyYWRkcicpIHsKICAgICAgICAgICAgICAgIGMucmFkZHIgPSBwYXJ0c1tpICsgMV07CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydHNbaV0gPT09ICdycG9ydCcpIHsKICAgICAgICAgICAgICAgIGMucnBvcnQgPSBwYXJ0c1tpICsgMV07CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydHNbaV0gPT09ICdnZW5lcmF0aW9uJykgewogICAgICAgICAgICAgICAgYy5nZW5lcmF0aW9uID0gcGFydHNbaSArIDFdOwogICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRzW2ldID09PSAndGNwdHlwZScpIHsKICAgICAgICAgICAgICAgIGMudGNwdHlwZSA9IHBhcnRzW2kgKyAxXTsKICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0c1tpXSA9PT0gJ25ldHdvcmstaWQnKSB7CiAgICAgICAgICAgICAgICBjWyduZXR3b3JrLWlkJ10gPSBwYXJ0c1tpICsgMV07CiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydHNbaV0gPT09ICduZXR3b3JrLWNvc3QnKSB7CiAgICAgICAgICAgICAgICBjWyduZXR3b3JrLWNvc3QnXSA9IHBhcnRzW2kgKyAxXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzZHAubWVkaWEuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgIHJldHVybiBtLnR5cGUgPT09IGNhbmRpZGF0ZS5zZHBNaWQ7CiAgICAgICAgfSlbMF0uY2FuZGlkYXRlcy5wdXNoKGMpOwogICAgfSk7CgogICAgcmV0dXJuIF9zZHBUcmFuc2Zvcm0yLmRlZmF1bHQud3JpdGUoc2RwKTsKfTsKCnZhciBDb25uZWN0aW9uQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIENvbm5lY3Rpb25Db250cm9sbGVyKGNvbmZpZ3VyYXRpb24pIHsKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29ubmVjdGlvbkNvbnRyb2xsZXIpOwoKICAgICAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgogICAgICAgIHRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247CiAgICB9CgogICAgX2NyZWF0ZUNsYXNzKENvbm5lY3Rpb25Db250cm9sbGVyLCBbewogICAgICAgIGtleTogJ2Nvbm5lY3QnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KGFjY2Vzc1Rva2VuKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgaWYgKF90aGlzLnVzZXJBZ2VudCkgcmV0dXJuIHJlc29sdmUoKTsKCiAgICAgICAgICAgICAgICBmZXRjaChfdGhpcy5jb25maWd1cmF0aW9uLmNyZWRlbnRpYWxfc2VydmVyLCB7IG1ldGhvZDogJ0dFVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyOiAnICsgYWNjZXNzVG9rZW4gfSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXMuanNvbigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXNlckFnZW50ID0gbmV3IF9zaXAyLmRlZmF1bHQuVUEoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiB1c2VyLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd3NTZXJ2ZXJzOiB1c2VyLnVyaXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdpbnZpdGUnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnZpdGUodG8sIGRhdGFPYmplY3RPYnNlcnZlcikgewogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIHNkcDogYWRkQ2FuZGlkYXRlc1RvU0RQKGRhdGFPYmplY3RPYnNlcnZlci5kYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbi5zZHAsIGRhdGFPYmplY3RPYnNlcnZlci5kYXRhLmljZUNhbmRpZGF0ZXMpCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBfSW52aXRlQ2xpZW50Q29udGV4dDIuZGVmYXVsdCh0aGlzLnVzZXJBZ2VudCwgdG8ucmVwbGFjZSgnLy8nLCAnJyksIG9wdGlvbnMpOwogICAgICAgICAgICB0aGlzLnVzZXJBZ2VudC5hZnRlckNvbm5lY3RlZChjb250ZXh0Lmludml0ZS5iaW5kKGNvbnRleHQpKTsKICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQ7CiAgICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBDb25uZWN0aW9uQ29udHJvbGxlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gQ29ubmVjdGlvbkNvbnRyb2xsZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vSW52aXRlQ2xpZW50Q29udGV4dCI6NDMsInNkcC10cmFuc2Zvcm0iOjIsInNpcC5qcyI6NDB9XSw0MjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF9Db25uZWN0aW9uQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vQ29ubmVjdGlvbkNvbnRyb2xsZXInKTsKCnZhciBfQ29ubmVjdGlvbkNvbnRyb2xsZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29ubmVjdGlvbkNvbnRyb2xsZXIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfSAvKioNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwoKdmFyIENvbm5lY3Rpb24gPSBmdW5jdGlvbiBDb25uZWN0aW9uKGRhdGFPYmplY3RVcmwpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0aW9uKTsKCiAgICB0aGlzLm5hbWUgPSAnQ29ubmVjdGlvbic7CiAgICB0aGlzLnN0YXR1cyA9ICcnOwogICAgdGhpcy5vd25lciA9IGRhdGFPYmplY3RVcmw7CiAgICB0aGlzLmNvbm5lY3Rpb25EZXNjcmlwdGlvbiA9IHt9OwogICAgdGhpcy5pY2VDYW5kaWRhdGVzID0gW107Cn07CgovKioNCiAqIFByb3RvU3R1YiBJbnRlcmZhY2UNCiAqLwoKCnZhciBJTVNJV1Byb3RvU3R1YiA9IGZ1bmN0aW9uICgpIHsKCiAgICAvKioNCiAgICAgKiBJbml0aWFsaXNlIHRoZSBwcm90b2NvbCBzdHViIGluY2x1ZGluZyBhcyBpbnB1dCBwYXJhbWV0ZXJzIGl0cyBhbGxvY2F0ZWQNCiAgICAgKiBjb21wb25lbnQgcnVudGltZSB1cmwsIHRoZSBydW50aW1lIEJVUyBwb3N0TWVzc2FnZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkDQogICAgICogb24gbWVzc2FnZXMgcmVjZWl2ZWQgYnkgdGhlIHByb3RvY29sIHN0dWIgYW5kIHJlcXVpcmVkIGNvbmZpZ3VyYXRpb24gcmV0cmlldmVkIGZyb20gcHJvdG9jb2xTdHViIGRlc2NyaXB0b3IuDQogICAgICogQHBhcmFtICB7VVJMLnJ1bnRpbWVQcm90b1N0dWJVUkx9ICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMDQogICAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uDQogICAgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uDQogICAgICovCiAgICBmdW5jdGlvbiBJTVNJV1Byb3RvU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBtaW5pQnVzLCBjb25maWd1cmF0aW9uKSB7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIElNU0lXUHJvdG9TdHViKTsKCiAgICAgICAgaWYgKCFydW50aW1lUHJvdG9TdHViVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBydW50aW1lUHJvdG9TdHViVVJMIGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyJyk7CiAgICAgICAgaWYgKCFtaW5pQnVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBidXMgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKICAgICAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKCiAgICAgICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgICAgdGhpcy5fY29ubmVjdGlvbiA9IG5ldyBfQ29ubmVjdGlvbkNvbnRyb2xsZXIyLmRlZmF1bHQoY29uZmlndXJhdGlvbik7CiAgICAgICAgdGhpcy5fYnVzID0gbWluaUJ1czsKICAgICAgICB0aGlzLl9zeW5jaGVyID0gbmV3IF9TeW5jaGVyLlN5bmNoZXIodGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwgbWluaUJ1cywgY29uZmlndXJhdGlvbik7CgogICAgICAgIG1pbmlCdXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdORVcgTVNHIC0+JywgbXNnKTsKICAgICAgICAgICAgaWYgKG1zZy5ib2R5LmlkZW50aXR5ICYmIF90aGlzLl9maWx0ZXIobXNnKSAmJiBtc2cuYm9keS52YWx1ZS5zY2hlbWEpIHsKICAgICAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmUobXNnKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhJTVNJV1Byb3RvU3R1YiwgW3sKICAgICAgICBrZXk6ICdfc3Vic2NyaWJlJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3N1YnNjcmliZShtc2cpIHsKICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgICB2YXIgc2NoZW1hID0gbXNnLmJvZHkudmFsdWUuc2NoZW1hOwogICAgICAgICAgICB2YXIgZGF0YU9iamVjdFVybCA9IG1zZy5mcm9tLnN1YnN0cmluZygwLCBtc2cuZnJvbS5sYXN0SW5kZXhPZignLycpKTsKCiAgICAgICAgICAgIHRoaXMuX3N5bmNoZXIuc3Vic2NyaWJlKHNjaGVtYSwgZGF0YU9iamVjdFVybCkudGhlbihmdW5jdGlvbiAoZGF0YU9iamVjdE9ic2VydmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLl9vbkNhbGwoZGF0YU9iamVjdE9ic2VydmVyLCBkYXRhT2JqZWN0VXJsLCBzY2hlbWEsIG1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sIHsKICAgICAgICBrZXk6ICdfb25DYWxsJywKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2FsbChkYXRhT2JqZWN0T2JzZXJ2ZXIsIGRhdGFPYmplY3RVcmwsIHNjaGVtYSwgbXNnKSB7CiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5jb25uZWN0KG1zZy5ib2R5LmlkZW50aXR5KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gX3RoaXMzLl9jb25uZWN0aW9uLmludml0ZShtc2cudG8sIGRhdGFPYmplY3RPYnNlcnZlcik7CiAgICAgICAgICAgICAgICBjb250ZXh0Lm9uKCdhY2NlcHRlZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5fcmV0dXJuU0RQKGUsIGRhdGFPYmplY3RVcmwsIHNjaGVtYSwgbXNnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29udGV4dC5vbignZmFpbCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdmYWlsJywgZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnRleHQub24oJ3JlamVjdGVkJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coJ3JlamVjdGVkJywgZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSwgewogICAgICAgIGtleTogJ19yZXR1cm5TRFAnLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmV0dXJuU0RQKGUsIGRhdGFPYmplY3RVcmwsIHNjaGVtYSwgbXNnKSB7CiAgICAgICAgICAgIHZhciBkYXRhT2JqZWN0ID0gbmV3IENvbm5lY3Rpb24oZGF0YU9iamVjdFVybCk7CgogICAgICAgICAgICB0aGlzLl9zeW5jaGVyLmNyZWF0ZShzY2hlbWEsIFttc2cuYm9keS5zb3VyY2VdLCBkYXRhT2JqZWN0KS50aGVuKGZ1bmN0aW9uIChvYmpSZXBvcnRlcikgewogICAgICAgICAgICAgICAgb2JqUmVwb3J0ZXIub25TdWJzY3JpcHRpb24oZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKCctLS0tLS0tLSBSZWNlaXZlciByZWNlaXZlZCBzdWJzY3JpcHRpb24gcmVxdWVzdCAtLS0tLS0tLS0gXG4nKTsKICAgICAgICAgICAgICAgICAgICBldmVudC5hY2NlcHQoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgb2JqUmVwb3J0ZXIuZGF0YS5jb25uZWN0aW9uRGVzY3JpcHRpb24gPSB7IHR5cGU6ICdhbnN3ZXInLCBzZHA6IGUuYm9keSB9OwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9LCB7CiAgICAgICAga2V5OiAnX2ZpbHRlcicsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgICAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfV0pOwoKICAgIHJldHVybiBJTVNJV1Byb3RvU3R1YjsKfSgpOwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiAnSU1TSVdQcm90b1N0dWInLAogICAgICAgIGluc3RhbmNlOiBuZXcgSU1TSVdQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykKICAgIH07Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi9Db25uZWN0aW9uQ29udHJvbGxlciI6NDEsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6NX1dLDQzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9zaXAgPSByZXF1aXJlKCdzaXAuanMnKTsKCnZhciBfc2lwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NpcCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKdmFyIFNlc3Npb24gPSBfc2lwMi5kZWZhdWx0LlNlc3Npb247CnZhciBDID0gewogIFNUQVRVU19OVUxMOiAwLAogIFNUQVRVU19JTlZJVEVfU0VOVDogMSwKICBTVEFUVVNfMVhYX1JFQ0VJVkVEOiAyLAogIFNUQVRVU19JTlZJVEVfUkVDRUlWRUQ6IDMsCiAgU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUjogNCwKICBTVEFUVVNfQU5TV0VSRUQ6IDUsCiAgU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLOiA2LAogIFNUQVRVU19XQUlUSU5HX0ZPUl9BQ0s6IDcsCiAgU1RBVFVTX0NBTkNFTEVEOiA4LAogIFNUQVRVU19URVJNSU5BVEVEOiA5LAogIFNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSzogMTAsCiAgU1RBVFVTX0VBUkxZX01FRElBOiAxMSwKICBTVEFUVVNfQ09ORklSTUVEOiAxMgp9OwoKdmFyIEludml0ZUNsaWVudENvbnRleHQgPSBmdW5jdGlvbiBJbnZpdGVDbGllbnRDb250ZXh0KHVhLCB0YXJnZXQsIG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShTZXNzaW9uLmRlc3VnYXIob3B0aW9ucykpOwogIG9wdGlvbnMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zLnBhcmFtcyB8fCBPYmplY3QucHJvdG90eXBlKTsKCiAgdmFyIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKCiAgLy8gQ3VzdG9tIGRhdGEgdG8gYmUgc2VudCBlaXRoZXIgaW4gSU5WSVRFIG9yIGluIEFDSwogIHRoaXMucmVuZGVyYm9keSA9IG9wdGlvbnMucmVuZGVyYm9keSB8fCBudWxsOwogIHRoaXMucmVuZGVydHlwZSA9IG9wdGlvbnMucmVuZGVydHlwZSB8fCAndGV4dC9wbGFpbic7CgogIHRoaXMuc2RwID0gb3B0aW9ucy5zZHA7CiAgb3B0aW9ucy5wYXJhbXMuZnJvbV90YWcgPSB0aGlzLmZyb21fdGFnOwoKICAvKiBEbyBub3QgYWRkIDtvYiBpbiBpbml0aWFsIGZvcm1pbmcgZGlhbG9nIHJlcXVlc3RzIGlmIHRoZSByZWdpc3RyYXRpb24gb3Zlcg0KICAgKiAgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBnb3QgYSBHUlVVIFVSSS4NCiAgICovCiAgdGhpcy5jb250YWN0ID0gdWEuY29udGFjdC50b1N0cmluZyh7CiAgICBhbm9ueW1vdXM6IHRoaXMuYW5vbnltb3VzLAogICAgb3V0Ym91bmQ6IHRoaXMuYW5vbnltb3VzID8gIXVhLmNvbnRhY3QudGVtcF9ncnV1IDogIXVhLmNvbnRhY3QucHViX2dydXUKICB9KTsKCiAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcgKyB0aGlzLmNvbnRhY3QpOwogIGV4dHJhSGVhZGVycy5wdXNoKCdBbGxvdzogJyArIF9zaXAyLmRlZmF1bHQuVUEuQy5BTExPV0VEX01FVEhPRFMudG9TdHJpbmcoKSk7CgogIGlmICh1YS5jb25maWd1cmF0aW9uLnJlbDEwMCA9PT0gX3NpcDIuZGVmYXVsdC5DLnN1cHBvcnRlZC5SRVFVSVJFRCkgewogICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JlcXVpcmU6IDEwMHJlbCcpOwogIH0KICBpZiAodWEuY29uZmlndXJhdGlvbi5yZXBsYWNlcyA9PT0gX3NpcDIuZGVmYXVsdC5DLnN1cHBvcnRlZC5SRVFVSVJFRCkgewogICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JlcXVpcmU6IHJlcGxhY2VzJyk7CiAgfQogIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCcpOwogIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwoKICBfc2lwMi5kZWZhdWx0LlV0aWxzLmF1Z21lbnQodGhpcywgX3NpcDIuZGVmYXVsdC5DbGllbnRDb250ZXh0LCBbdWEsIF9zaXAyLmRlZmF1bHQuQy5JTlZJVEUsIHRhcmdldCwgb3B0aW9uc10pOwogIF9zaXAyLmRlZmF1bHQuVXRpbHMuYXVnbWVudCh0aGlzLCBfc2lwMi5kZWZhdWx0LlNlc3Npb24sIFtdKTsKCiAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX05VTEwpIHsKICAgIHRocm93IG5ldyBfc2lwMi5kZWZhdWx0LkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogIH0KCiAgLy8gU2Vzc2lvbiBwYXJhbWV0ZXIgaW5pdGlhbGl6YXRpb24KICB0aGlzLmZyb21fdGFnID0gX3NpcDIuZGVmYXVsdC5VdGlscy5uZXdUYWcoKTsKCiAgLy8gT3V0Z29pbmdTZXNzaW9uIHNwZWNpZmljIHBhcmFtZXRlcnMKICB0aGlzLmlzQ2FuY2VsZWQgPSBmYWxzZTsKICB0aGlzLnJlY2VpdmVkXzEwMCA9IGZhbHNlOwoKICB0aGlzLm1ldGhvZCA9IF9zaXAyLmRlZmF1bHQuQy5JTlZJVEU7CgogIHRoaXMucmVjZWl2ZU5vbkludml0ZVJlc3BvbnNlID0gdGhpcy5yZWNlaXZlUmVzcG9uc2U7CiAgdGhpcy5yZWNlaXZlUmVzcG9uc2UgPSB0aGlzLnJlY2VpdmVJbnZpdGVSZXNwb25zZTsKCiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5pbnZpdGVjbGllbnRjb250ZXh0Jyk7CgogIHRoaXMub25JbmZvID0gb3B0aW9ucy5vbkluZm87Cn07CgpJbnZpdGVDbGllbnRDb250ZXh0LnByb3RvdHlwZSA9IHsKICBpbnZpdGU6IGZ1bmN0aW9uIGludml0ZSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAvL1NhdmUgdGhlIHNlc3Npb24gaW50byB0aGUgdWEgc2Vzc2lvbnMgY29sbGVjdGlvbi4KICAgIC8vTm90ZTogcGxhY2luZyBpbiBjb25zdHJ1Y3RvciBicmVha3MgY2FsbCB0byByZXF1ZXN0LmNhbmNlbCBvbiBjbG9zZS4uLiBVc2VyIGRvZXMgbm90IG5lZWQgdGhpcyBhbnl3YXkKICAgIHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF0gPSB0aGlzOwoKICAgIC8vTm90ZTogZHVlIHRvIHRoZSB3YXkgRmlyZWZveCBoYW5kbGVzIGdVTSBjYWxscywgaXQgaXMgcmVjb21tZW5kZWQgdG8gbWFrZSB0aGUgZ1VNIGNhbGwgYXQgdGhlIGFwcCBsZXZlbAogICAgLy8gYW5kIGhhbmQgc2lwLmpzIGEgc3RyZWFtIGFzIHRoZSBtZWRpYUhpbnQKICAgIGlmIChzZWxmLmlzQ2FuY2VsZWQgfHwgc2VsZi5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgc2VsZi5oYXNPZmZlciA9IHRydWU7CiAgICBzZWxmLnJlcXVlc3QuYm9keSA9IHRoaXMuc2RwOwogICAgc2VsZi5zdGF0dXMgPSBDLlNUQVRVU19JTlZJVEVfU0VOVDsKICAgIHNlbGYuc2VuZCgpOwoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIGhhc0Rlc2NyaXB0aW9uOiBmdW5jdGlvbiBoYXNEZXNjcmlwdGlvbihtZXNzYWdlKSB7CiAgICByZXR1cm4gbWVzc2FnZS5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpID09PSAnYXBwbGljYXRpb24vc2RwJyAmJiAhIW1lc3NhZ2UuYm9keTsKICB9LAoKICByZWNlaXZlSW52aXRlUmVzcG9uc2U6IGZ1bmN0aW9uIHJlY2VpdmVJbnZpdGVSZXNwb25zZShyZXNwb25zZSkgewogICAgdmFyIGNhdXNlLAogICAgICAgIC8vbG9jYWxNZWRpYSwKICAgIHNlc3Npb24gPSB0aGlzLAogICAgICAgIGlkID0gcmVzcG9uc2UuY2FsbF9pZCArIHJlc3BvbnNlLmZyb21fdGFnICsgcmVzcG9uc2UudG9fdGFnLAogICAgICAgIGV4dHJhSGVhZGVycyA9IFtdLAogICAgICAgIG9wdGlvbnMgPSB7fTsKCiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQgfHwgcmVzcG9uc2UubWV0aG9kICE9PSBfc2lwMi5kZWZhdWx0LkMuSU5WSVRFKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAodGhpcy5kaWFsb2cgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDw9IDI5OSkgewogICAgICBpZiAoaWQgIT09IHRoaXMuZGlhbG9nLmlkLnRvU3RyaW5nKCkpIHsKICAgICAgICBpZiAoIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJywgdHJ1ZSkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnNlbmRSZXF1ZXN0KHRoaXMsIF9zaXAyLmRlZmF1bHQuQy5BQ0ssIHsKICAgICAgICAgIGJvZHk6IF9zaXAyLmRlZmF1bHQuVXRpbHMuZ2VuZXJhdGVGYWtlU0RQKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnNlbmRSZXF1ZXN0KHRoaXMsIF9zaXAyLmRlZmF1bHQuQy5CWUUpOwoKICAgICAgICAvKiBOT1RFOiBUaGlzIGZhaWxzIGJlY2F1c2UgdGhlIGZvcmtpbmcgcHJveHkgZG9lcyBub3QgcmVjb2duaXplIHRoYXQgYW4gdW5hbnN3ZXJhYmxlDQogICAgICAgICAqIGxlZyAoZHVlIHRvIHBlZXJDb25uZWN0aW9uIGxpbWl0YXRpb25zKSBoYXMgYmVlbiBhbnN3ZXJlZCBmaXJzdC4gSWYgeW91ciBmb3JraW5nDQogICAgICAgICAqIHByb3h5IGRvZXMgbm90IGhhbmcgdXAgYWxsIHVuYW5zd2VyZWQgYnJhbmNoZXMgb24gdGhlIGZpcnN0IGJyYW5jaCBhbnN3ZXJlZCwgcmVtb3ZlIHRoaXMuDQogICAgICAgICAqLwogICAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgICAgICB0aGlzLmZhaWxlZChyZXNwb25zZSwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5XRUJSVENfRVJST1IpOwogICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlc3BvbnNlLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChfc2lwMi5kZWZhdWx0LkMuQUNLLCB7IGNzZXE6IHJlc3BvbnNlLmNzZXEgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc0Fuc3dlcikgewogICAgICAgIC8vIGludml0ZSB3L28gc2RwIGlzIHdhaXRpbmcgZm9yIGNhbGxiYWNrCiAgICAgICAgLy9hbiBpbnZpdGUgd2l0aCBzZHAgbXVzdCBnbyBvbiwgYW5kIGhhc0Fuc3dlciBpcyB0cnVlCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CgogICAgaWYgKHRoaXMuZGlhbG9nICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDwgMjAwKSB7CiAgICAgIC8qDQogICAgICAgIEVhcmx5IG1lZGlhIGhhcyBiZWVuIHNldCB1cCB3aXRoIGF0IGxlYXN0IG9uZSBvdGhlciBkaWZmZXJlbnQgYnJhbmNoLA0KICAgICAgICBidXQgYSBmaW5hbCAyeHggcmVzcG9uc2UgaGFzbid0IGJlZW4gcmVjZWl2ZWQNCiAgICAgICovCiAgICAgIGlmICh0aGlzLmRpYWxvZy5wcmFja2VkLmluZGV4T2YocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpICE9PSAtMSB8fCB0aGlzLmRpYWxvZy5wcmFja2VkW3RoaXMuZGlhbG9nLnByYWNrZWQubGVuZ3RoIC0gMV0gPj0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgJiYgdGhpcy5kaWFsb2cucHJhY2tlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZWFybHlEaWFsb2dzW2lkXSAmJiAhdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnLCB0cnVlKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLmluZGV4T2YocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpICE9PSAtMSB8fCB0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZFt0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5sZW5ndGggLSAxXSA+PSByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSAmJiB0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBleHRyYUhlYWRlcnMucHVzaCgnUkFjazogJyArIHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpICsgJyAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCdjc2VxJykpOwogICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5wdXNoKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKTsKCiAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5zZW5kUmVxdWVzdCh0aGlzLCBfc2lwMi5kZWZhdWx0LkMuUFJBQ0ssIHsKICAgICAgICBleHRyYUhlYWRlcnM6IGV4dHJhSGVhZGVycywKICAgICAgICBib2R5OiBfc2lwMi5kZWZhdWx0LlV0aWxzLmdlbmVyYXRlRmFrZVNEUChyZXNwb25zZS5ib2R5KQogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFByb2NlZWQgdG8gY2FuY2VsbGF0aW9uIGlmIHRoZSB1c2VyIHJlcXVlc3RlZC4KICAgIGlmICh0aGlzLmlzQ2FuY2VsZWQpIHsKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c19jb2RlID49IDEwMCAmJiByZXNwb25zZS5zdGF0dXNfY29kZSA8IDIwMCkgewogICAgICAgIHRoaXMucmVxdWVzdC5jYW5jZWwodGhpcy5jYW5jZWxSZWFzb24sIGV4dHJhSGVhZGVycyk7CiAgICAgICAgdGhpcy5jYW5jZWxlZChudWxsKTsKICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXNfY29kZSA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPCAyOTkpIHsKICAgICAgICB0aGlzLmFjY2VwdEFuZFRlcm1pbmF0ZShyZXNwb25zZSk7CiAgICAgICAgdGhpcy5lbWl0KCdieWUnLCB0aGlzLnJlcXVlc3QpOwogICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1c19jb2RlID49IDMwMCkgewogICAgICAgIGNhdXNlID0gX3NpcDIuZGVmYXVsdC5DLlJFQVNPTl9QSFJBU0VbcmVzcG9uc2Uuc3RhdHVzX2NvZGVdIHx8IF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuQ0FOQ0VMRUQ7CiAgICAgICAgdGhpcy5yZWplY3RlZChyZXNwb25zZSwgY2F1c2UpOwogICAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfQoKICAgIHN3aXRjaCAodHJ1ZSkgewogICAgICBjYXNlIC9eMTAwJC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgdGhpcy5yZWNlaXZlZF8xMDAgPSB0cnVlOwogICAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXNwb25zZSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgL14xWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKToKICAgICAgICAvLyBEbyBub3RoaW5nIHdpdGggMXh4IHJlc3BvbnNlcyB3aXRob3V0IFRvIHRhZy4KICAgICAgICBpZiAoIXJlc3BvbnNlLnRvX3RhZykgewogICAgICAgICAgdGhpcy5sb2dnZXIud2FybignMXh4IHJlc3BvbnNlIHJlY2VpdmVkIHdpdGhvdXQgdG8gdGFnJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIC8vIENyZWF0ZSBFYXJseSBEaWFsb2cgaWYgMVhYIGNvbWVzIHdpdGggY29udGFjdAogICAgICAgIGlmIChyZXNwb25zZS5oYXNIZWFkZXIoJ2NvbnRhY3QnKSkgewogICAgICAgICAgLy8gQW4gZXJyb3Igb24gZGlhbG9nIGNyZWF0aW9uIHdpbGwgZmlyZSAnZmFpbGVkJyBldmVudAogICAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZURpYWxvZyhyZXNwb25zZSwgJ1VBQycsIHRydWUpKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU18xWFhfUkVDRUlWRUQ7CgogICAgICAgIGlmIChyZXNwb25zZS5oYXNIZWFkZXIoJ3JlcXVpcmUnKSAmJiByZXNwb25zZS5nZXRIZWFkZXIoJ3JlcXVpcmUnKS5pbmRleE9mKCcxMDByZWwnKSAhPT0gLTEpIHsKCiAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoaXMuZGlhbG9nIGlzIGFscmVhZHkgY29uZmlybWVkCiAgICAgICAgICBpZiAodGhpcy5kaWFsb2cgfHwgIXRoaXMuZWFybHlEaWFsb2dzW2lkXSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQuaW5kZXhPZihyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSkgIT09IC0xIHx8IHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkW3RoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLmxlbmd0aCAtIDFdID49IHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpICYmIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghdGhpcy5oYXNEZXNjcmlwdGlvbihyZXNwb25zZSkpIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JBY2s6ICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSArICcgJyArIHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKTsKICAgICAgICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CiAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5zZW5kUmVxdWVzdCh0aGlzLCBfc2lwMi5kZWZhdWx0LkMuUFJBQ0ssIHsKICAgICAgICAgICAgICBleHRyYUhlYWRlcnM6IGV4dHJhSGVhZGVycwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlKTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNPZmZlcikgewogICAgICAgICAgICBpZiAoIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJykpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmhhc0Fuc3dlciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CgogICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaCgnUkFjazogJyArIHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpICsgJyAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCdjc2VxJykpOwoKICAgICAgICAgICAgc2Vzc2lvbi5zZW5kUmVxdWVzdChfc2lwMi5kZWZhdWx0LkMuUFJBQ0ssIHsKICAgICAgICAgICAgICBleHRyYUhlYWRlcnM6IGV4dHJhSGVhZGVycywKICAgICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uIHJlY2VpdmVSZXNwb25zZSgpIHt9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzZXNzaW9uLnN0YXR1cyA9IEMuU1RBVFVTX0VBUkxZX01FRElBOwogICAgICAgICAgICBzZXNzaW9uLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAvXjJbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgIHZhciBjc2VxID0gdGhpcy5yZXF1ZXN0LmNzZXEgKyAnICcgKyB0aGlzLnJlcXVlc3QubWV0aG9kOwogICAgICAgIGlmIChjc2VxICE9PSByZXNwb25zZS5nZXRIZWFkZXIoJ2NzZXEnKSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0VBUkxZX01FRElBICYmIHRoaXMuZGlhbG9nKSB7CiAgICAgICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0NPTkZJUk1FRDsKICAgICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmJvZHkpIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRlbnQtVHlwZTogJyArIHRoaXMucmVuZGVydHlwZSk7CiAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwogICAgICAgICAgICBvcHRpb25zLmJvZHkgPSB0aGlzLnJlbmRlcmJvZHk7CiAgICAgICAgICB9CiAgICAgICAgICBvcHRpb25zLmNzZXEgPSByZXNwb25zZS5jc2VxOwogICAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChfc2lwMi5kZWZhdWx0LkMuQUNLLCBvcHRpb25zKTsKICAgICAgICAgIHRoaXMuYWNjZXB0ZWQocmVzcG9uc2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhpcy5kaWFsb2cgaXMgYWxyZWFkeSBjb25maXJtZWQKICAgICAgICBpZiAodGhpcy5kaWFsb2cpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuaGFzQW5zd2VyKSB7CiAgICAgICAgICBpZiAodGhpcy5yZW5kZXJib2R5KSB7CiAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6ICcgKyBzZXNzaW9uLnJlbmRlcnR5cGUpOwogICAgICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IGV4dHJhSGVhZGVyczsKICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gdGhpcy5yZW5kZXJib2R5OwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChfc2lwMi5kZWZhdWx0LkMuQUNLLCBvcHRpb25zKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCF0aGlzLmhhc0Rlc2NyaXB0aW9uKHJlc3BvbnNlKSkgewogICAgICAgICAgICB0aGlzLmFjY2VwdEFuZFRlcm1pbmF0ZShyZXNwb25zZSwgNDAwLCAnTWlzc2luZyBzZXNzaW9uIGRlc2NyaXB0aW9uJyk7CiAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZURpYWxvZyhyZXNwb25zZSwgJ1VBQycpKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5oYXNBbnN3ZXIgPSB0cnVlOwogICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fTsgLy8sbG9jYWxNZWRpYTsKICAgICAgICAgIHNlc3Npb24uc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgaWYgKHNlc3Npb24ucmVuZGVyYm9keSkgewogICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgc2Vzc2lvbi5yZW5kZXJ0eXBlKTsKICAgICAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBleHRyYUhlYWRlcnM7CiAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IHNlc3Npb24ucmVuZGVyYm9keTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGlvbnMuY3NlcSA9IHJlc3BvbnNlLmNzZXE7CiAgICAgICAgICBzZXNzaW9uLnNlbmRSZXF1ZXN0KF9zaXAyLmRlZmF1bHQuQy5BQ0ssIG9wdGlvbnMpOwogICAgICAgICAgc2Vzc2lvbi5hY2NlcHRlZChyZXNwb25zZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGNhdXNlID0gX3NpcDIuZGVmYXVsdC5VdGlscy5zaXBFcnJvckNhdXNlKHJlc3BvbnNlLnN0YXR1c19jb2RlKTsKICAgICAgICB0aGlzLnJlamVjdGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIGNhdXNlKTsKICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVzcG9uc2UsIGNhdXNlKTsKICAgIH0KICB9LAoKICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbChvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKCiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhyb3cgbmV3IF9zaXAyLmRlZmF1bHQuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7CiAgICB9CgogICAgdGhpcy5sb2dnZXIubG9nKCdjYW5jZWxpbmcgUlRDU2Vzc2lvbicpOwoKICAgIHZhciBjYW5jZWxfcmVhc29uID0gX3NpcDIuZGVmYXVsdC5VdGlscy5nZXRDYW5jZWxSZWFzb24ob3B0aW9ucy5zdGF0dXNfY29kZSwgb3B0aW9ucy5yZWFzb25fcGhyYXNlKTsKCiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19OVUxMIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19JTlZJVEVfU0VOVCAmJiAhdGhpcy5yZWNlaXZlZF8xMDApIHsKICAgICAgdGhpcy5pc0NhbmNlbGVkID0gdHJ1ZTsKICAgICAgdGhpcy5jYW5jZWxSZWFzb24gPSBjYW5jZWxfcmVhc29uOwogICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfSU5WSVRFX1NFTlQgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTXzFYWF9SRUNFSVZFRCB8fCB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfRUFSTFlfTUVESUEpIHsKICAgICAgdGhpcy5yZXF1ZXN0LmNhbmNlbChjYW5jZWxfcmVhc29uLCBvcHRpb25zLmV4dHJhSGVhZGVycyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXMuY2FuY2VsZWQoKTsKICB9LAoKICB0ZXJtaW5hdGU6IGZ1bmN0aW9uIHRlcm1pbmF0ZShvcHRpb25zKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0sgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aGlzLmJ5ZShvcHRpb25zKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2FuY2VsKG9wdGlvbnMpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIHJlY2VpdmVSZXF1ZXN0OiBmdW5jdGlvbiByZWNlaXZlUmVxdWVzdChyZXF1ZXN0KSB7CiAgICAvLyBJQ0MgUkVDRUlWRSBSRVFVRVNUCgogICAgLy8gUmVqZWN0IENBTkNFTHMKICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gX3NpcDIuZGVmYXVsdC5DLkNBTkNFTCkgewogICAgICAvLyBUT0RPOyBtYWtlIHRoaXMgYSBzd2l0Y2ggd2hlbiBpdCBnZXRzIGFkZGVkCiAgICB9CgogICAgaWYgKHJlcXVlc3QubWV0aG9kID09PSBfc2lwMi5kZWZhdWx0LkMuQUNLICYmIHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spIHsKICAgICAgX3NpcDIuZGVmYXVsdC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmFja1RpbWVyKTsKICAgICAgX3NpcDIuZGVmYXVsdC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmludml0ZTJ4eFRpbWVyKTsKICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CgogICAgICB0aGlzLmFjY2VwdGVkKCk7CiAgICB9CgogICAgcmV0dXJuIFNlc3Npb24ucHJvdG90eXBlLnJlY2VpdmVSZXF1ZXN0LmFwcGx5KHRoaXMsIFtyZXF1ZXN0XSk7CiAgfSwKCiAgb25UcmFuc3BvcnRFcnJvcjogZnVuY3Rpb24gb25UcmFuc3BvcnRFcnJvcigpIHsKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICB9CiAgfSwKCiAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24gb25SZXF1ZXN0VGltZW91dCgpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKG51bGwsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH0KICB9Cgp9OwoKZXhwb3J0cy5kZWZhdWx0ID0gSW52aXRlQ2xpZW50Q29udGV4dDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsic2lwLmpzIjo0MH1dLDQ0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwovLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCi8vIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAovLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgovLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAovLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQovLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkgewogIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTsKICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkOwp9Cm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyOwoKLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54CkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7CkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDsKCi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZQovLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLgpFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwOwoKLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzCi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHsKICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKQogICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTsKICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuOwogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkgewogIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7CgogIGlmICghdGhpcy5fZXZlbnRzKQogICAgdGhpcy5fZXZlbnRzID0ge307CgogIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy4KICBpZiAodHlwZSA9PT0gJ2Vycm9yJykgewogICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHwKICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHsKICAgICAgZXIgPSBhcmd1bWVudHNbMV07CiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlcgogICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCAiZXJyb3IiIGV2ZW50LiAoJyArIGVyICsgJyknKTsKICAgICAgICBlcnIuY29udGV4dCA9IGVyOwogICAgICAgIHRocm93IGVycjsKICAgICAgfQogICAgfQogIH0KCiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKQogICAgcmV0dXJuIGZhbHNlOwoKICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkgewogICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgIC8vIGZhc3QgY2FzZXMKICAgICAgY2FzZSAxOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAyOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDM6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgLy8gc2xvd2VyCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0KICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7CiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTsKICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7CiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspCiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CiAgdmFyIG07CgogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoKICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSAibmV3TGlzdGVuZXIiISBCZWZvcmUKICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCAibmV3TGlzdGVuZXIiLgogIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpCiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwKICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/CiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7CgogIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKQogICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjsKICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKQogICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLgogICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpOwogIGVsc2UKICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LgogICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdOwoKICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVhawogIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7CiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHsKICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVyczsKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVyczsKICAgIH0KCiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkgewogICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTsKICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArCiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArCiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7CiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTAKICAgICAgICBjb25zb2xlLnRyYWNlKCk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICB2YXIgZmlyZWQgPSBmYWxzZTsKCiAgZnVuY3Rpb24gZygpIHsKICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7CgogICAgaWYgKCFmaXJlZCkgewogICAgICBmaXJlZCA9IHRydWU7CiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgfQoKICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7CiAgdGhpcy5vbih0eXBlLCBnKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZApFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTsKCiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXR1cm4gdGhpczsKCiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKICBsZW5ndGggPSBsaXN0Lmxlbmd0aDsKICBwb3NpdGlvbiA9IC0xOwoKICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwKICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7CiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKCiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkgewogICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykgewogICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHwKICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkgewogICAgICAgIHBvc2l0aW9uID0gaTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3NpdGlvbiA8IDApCiAgICAgIHJldHVybiB0aGlzOwoKICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkgewogICAgICBsaXN0Lmxlbmd0aCA9IDA7CiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CiAgICB9IGVsc2UgewogICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7CiAgICB9CgogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7CiAgdmFyIGtleSwgbGlzdGVuZXJzOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHJldHVybiB0aGlzOwoKICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0CiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKQogICAgICB0aGlzLl9ldmVudHMgPSB7fTsKICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSkKICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsKICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykgewogICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTsKICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTsKICAgIH0KICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpOwogICAgdGhpcy5fZXZlbnRzID0ge307CiAgICByZXR1cm4gdGhpczsKICB9CgogIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkgewogICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpOwogIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7CiAgICAvLyBMSUZPIG9yZGVyCiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aCkKICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTsKICB9CiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIgcmV0OwogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXQgPSBbXTsKICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpCiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTsKICBlbHNlCiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTsKICByZXR1cm4gcmV0Owp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkgewogIGlmICh0aGlzLl9ldmVudHMpIHsKICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKQogICAgICByZXR1cm4gMTsKICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpCiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDsKICB9CiAgcmV0dXJuIDA7Cn07CgpFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHsKICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpOwp9OwoKZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKfQoKZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwp9CgpmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CgpmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cn0KCn0se31dfSx7fSxbNDJdKSg0MikKfSk7",
      "sourceCodeClassname": "IMSIWProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-aaf84b28-7f8b-b2e6-93d7-4784864cd37b5",
    "version": 0.30000000000000004,
    "description": "Description of IMSIWProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "IMSIWProtoStub",
    "configuration": {
      "uri": "david.vilchez@quobis.com",
      "server": "wss://ims-demo.quobis.com",
      "authorizationUser": "david.vilchez@quobis.com",
      "password": "vieiras2014",
      "domain": "localhost"
    },
    "messageSchemas": "",
    "interworking": true,
    "signature": "",
    "accessControlPolicy": "somePolicy"
  }
}