{
  "VertxProtoStub": {
    "cguid": "4-c28037a6-8d59-ddbd-c208-d45c1334b92c0",
    "type": "ProtoStubs",
    "version": 1.4,
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiYWN0aXZhdGUiLCBbXSwgZmFjdG9yeSk7CgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQlleHBvcnRzWyJhY3RpdmF0ZSJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbImFjdGl2YXRlIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewoKLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7CgovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlleHBvcnRzOiB7fSwKLyoqKioqKi8gCQkJaWQ6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsb2FkZWQ6IGZhbHNlCi8qKioqKiovIAkJfTsKCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7CgovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKLyoqKioqKi8gCQltb2R1bGUubG9hZGVkID0gdHJ1ZTsKCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9CgoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwoKLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwoKLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCSd1c2Ugc3RyaWN0JzsKCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CgkgIHZhbHVlOiB0cnVlCgl9KTsKCgl2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCglleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCglmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCgkvKioNCgkqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KCSogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCgkqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KCSogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCgkqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KCSogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KCSogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQoJKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KCSoNCgkqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KCSogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KCSogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoJKg0KCSogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCgkqDQoJKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQoJKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KCSogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoJKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQoJKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCgkqKi8KCgl2YXIgVmVydHhQcm90b1N0dWIgPSBmdW5jdGlvbiAoKSB7CgkgIC8qIHByaXZhdGUNCgkgICAgX2NvbnRpbnVvdXNPcGVuOiBib29sZWFuDQoJICAgICAgX3J1bnRpbWVQcm90b1N0dWJVUkw6IHN0cmluZw0KCSAgICBfYnVzOiBNaW5pQnVzDQoJICAgIF9tc2dDYWxsYmFjazogKE1lc3NhZ2UpID0+IHZvaWQNCgkgICAgX2NvbmZpZzogeyB1cmwsIHJ1bnRpbWVVUkwgfQ0KCSAgICAgIF9zb2NrOiAoV2ViU29ja2V0IHwgU29ja0pTKQ0KCSAgICBfcmVPcGVuOiBib29sZWFuDQoJICAqLwoKCSAgLyoqDQoJICAgKiBWZXJ0eCBQcm90b1N0dWIgY3JlYXRpb24NCgkgICAqIEBwYXJhbSAge3N0cmluZ30gcnVudGltZVByb3RvU3R1YlVSTCAtIFVSTCB1c2VkIGludGVybmFsbHkgZm9yIG1lc3NhZ2UgZGVsaXZlcnkgcG9pbnQuIE5vdCB1c2VkIGZvciBNZXNzYWdlTm9kZSBkZWxpdmVyLg0KCSAgICogQHBhcmFtICB7TWluaUJ1c30gYnVzIC0gTWluaUJ1cyB1c2VkIHRvIHNlbmQvcmVjZWl2ZSBtZXNzYWdlcy4gTm9ybWFsbHkgY29ubmVjdGVkIHRvIHRoZSBNZXNzYWdlQnVzLg0KCSAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4NCgkgICAqIEByZXR1cm4ge1ZlcnR4UHJvdG9TdHVifQ0KCSAgICovCgkgIGZ1bmN0aW9uIFZlcnR4UHJvdG9TdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnKSB7CgkgICAgdmFyIF90aGlzMiA9IHRoaXM7CgoJICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZXJ0eFByb3RvU3R1Yik7CgoJICAgIGlmICghcnVudGltZVByb3RvU3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgcnVudGltZVByb3RvU3R1YlVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCSAgICBpZiAoIWJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgYnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoJICAgIGlmICghY29uZmlnKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWcgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgoJICAgIGlmICghY29uZmlnLnVybCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgY29uZmlnLnVybCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCSAgICBpZiAoIWNvbmZpZy5ydW50aW1lVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWcucnVudGltZVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCgkgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgdGhpcy5faWQgPSAwOwoJICAgIHRoaXMuX2NvbnRpbnVvdXNPcGVuID0gdHJ1ZTsKCgkgICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CgkgICAgdGhpcy5fYnVzID0gYnVzOwoJICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZzsKCgkgICAgdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBjb25maWcucnVudGltZVVSTDsKCSAgICB0aGlzLl9yZU9wZW4gPSBmYWxzZTsKCgkgICAgYnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewoJICAgICAgY29uc29sZS5sb2coJ1tWZXJ0eFByb3RvU3R1Yl0gb3V0Z29pbmcgbWVzc2FnZTogJywgbXNnKTsKCSAgICAgIF90aGlzLl9vcGVuKGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKF90aGlzLl9maWx0ZXIobXNnKSkgewoJICAgICAgICAgIG1zZy5ib2R5LnZpYSA9IF90aGlzMi5fcnVudGltZVByb3RvU3R1YlVSTDsKCSAgICAgICAgICBjb25zb2xlLmxvZygnW1ZlcnR4UHJvdG9TdHViOiBQcm90b1N0dWIgLT4gTU5dJywgbXNnKTsKCSAgICAgICAgICBfdGhpcy5fc29jay5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOwoJICAgICAgICB9CgkgICAgICB9KTsKCSAgICB9KTsKCgkgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2NyZWF0ZWQnKTsKCSAgfQoKCSAgLyoqDQoJICAgKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgUHJvdG9TdHViDQoJICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gTWFuZGF0b3J5IGZpZWxkcyBhcmU6ICJ1cmwiIG9mIHRoZSBNZXNzYWdlTm9kZSBhZGRyZXNzIGFuZCAicnVudGltZVVSTCIuDQoJICAgKi8KCgoJICBfY3JlYXRlQ2xhc3MoVmVydHhQcm90b1N0dWIsIFt7CgkgICAga2V5OiAnY29ubmVjdCcsCgoKCSAgICAvKioNCgkgICAgICogVHJ5IHRvIG9wZW4gdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE1lc3NhZ2VOb2RlLiBDb25uZWN0aW9uIGlzIGF1dG8gbWFuYWdlZCwgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIHRoaXMgZXhwbGljaXRseS4NCgkgICAgICogSG93ZXZlciwgaWYgImRpc2Nvbm5lY3QoKSIgaXMgY2FsbGVkLCBpdCdzIG5lY2Vzc2FyeSB0byBjYWxsIHRoaXMgdG8gZW5hYmxlIGNvbm5lY3Rpb25zIGFnYWluLg0KCSAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiwgY29udGFpbmluZyB0aGUgdmFsdWUgImNvbm5lY3RlZCIgaWYgc3VjY2Vzc2Z1bCwgb3IgImRpc2Nvbm5lY3RlZCIgaWYgc29tZSBlcnJvciBvY2N1cnMuDQoJICAgICAqLwoJICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KCkgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSB0cnVlOwoJICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkge30pOwoJICAgIH0KCgkgICAgLyoqDQoJICAgICAqIEl0IHdpbGwgZGlzY29ubmVjdCBhbmQgb3JkZXIgdG8gc3RheSBkaXNjb25uZWN0ZWQuIFJlY29ubmVjdGlvbiB0cmllcywgd2lsbCBub3QgYmUgYXR0ZW1wdGVkLCB1bmxlc3MgImNvbm5lY3QoKSIgaXMgY2FsbGVkLg0KCSAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiB3aXRoIHZhbHVlICJkaXNjb25uZWN0ZWQiLg0KCSAgICAgKi8KCgkgIH0sIHsKCSAgICBrZXk6ICdkaXNjb25uZWN0JywKCSAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdCgpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcpOwoKCSAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IGZhbHNlOwoJICAgICAgaWYgKF90aGlzLl9zb2NrKSB7CgkgICAgICAgIF90aGlzLl9zZW5kQ2xvc2UoKTsKCSAgICAgIH0KCSAgICB9CgoJICAgIC8vdG9kbzogYWRkIGRvY3VtZW50YXRpb24KCgkgIH0sIHsKCSAgICBrZXk6ICdfc2VuZE9wZW4nLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZE9wZW4oY2FsbGJhY2spIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgdGhpcy5fc2VuZFN0YXR1cygnaW4tcHJvZ3Jlc3MnKTsKCgkgICAgICBfdGhpcy5faWQrKzsKCSAgICAgIHZhciBtc2cgPSB7CgkgICAgICAgIGlkOiBfdGhpcy5faWQsIHR5cGU6ICdvcGVuJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwoJICAgICAgfTsKCgkgICAgICBpZiAoX3RoaXMuX3JlT3BlbikgewoJICAgICAgICBtc2cudHlwZSA9ICdyZS1vcGVuJzsKCSAgICAgIH0KCgkgICAgICAvL3JlZ2lzdGVyIGFuZCB3YWl0IGZvciBvcGVuIHJlcGx5Li4uCgkgICAgICB2YXIgaGFzUmVzcG9uc2UgPSBmYWxzZTsKCSAgICAgIF90aGlzLl9zZXNzaW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiAocmVwbHkpIHsKCSAgICAgICAgaWYgKHJlcGx5LnR5cGUgPT09ICdyZXNwb25zZScgJiByZXBseS5pZCA9PT0gbXNnLmlkKSB7CgkgICAgICAgICAgaGFzUmVzcG9uc2UgPSB0cnVlOwoJICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoJICAgICAgICAgICAgaWYgKHJlcGx5LmJvZHkucnVudGltZVRva2VuKSB7CgkgICAgICAgICAgICAgIC8vc2V0dXAgcnVudGltZVNlc3Npb24KCSAgICAgICAgICAgICAgX3RoaXMuX3JlT3BlbiA9IHRydWU7CgkgICAgICAgICAgICAgIF90aGlzLl9ydW50aW1lU2Vzc2lvblVSTCA9IF90aGlzLl9jb25maWcucnVudGltZVVSTCArICcvJyArIHJlcGx5LmJvZHkucnVudGltZVRva2VuOwoJICAgICAgICAgICAgfQoKCSAgICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdsaXZlJyk7CgkgICAgICAgICAgICBjYWxsYmFjaygpOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZmFpbGVkJywgcmVwbHkuYm9keS5kZXNjKTsKCSAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgIH07CgoJICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKCSAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewoJICAgICAgICBpZiAoIWhhc1Jlc3BvbnNlKSB7CgkgICAgICAgICAgLy9ubyByZXNwb25zZSBhZnRlciB4IHNlY29uZHMuLi4KCSAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJywgJ1RpbWVvdXQgZnJvbSBtbjovc2Vzc2lvbicpOwoJICAgICAgICB9CgkgICAgICB9LCAzMDAwKTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdfc2VuZENsb3NlJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRDbG9zZSgpIHsKCSAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgoJICAgICAgX3RoaXMuX2lkKys7CgkgICAgICB2YXIgbXNnID0gewoJICAgICAgICBpZDogX3RoaXMuX2lkLCB0eXBlOiAnY2xvc2UnLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCgkgICAgICB9OwoKCSAgICAgIC8vaW52YWxpZGF0ZSBydW50aW1lU2Vzc2lvbgoJICAgICAgX3RoaXMuX3JlT3BlbiA9IGZhbHNlOwoJICAgICAgX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gX3RoaXMuX2NvbmZpZy5fcnVudGltZVVSTDsKCgkgICAgICBfdGhpcy5fc29jay5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ19zZW5kU3RhdHVzJywKCSAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRTdGF0dXModmFsdWUsIHJlYXNvbikgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBjb25zb2xlLmxvZygnW1ZlcnR4UHJvdG9zdHViIHN0YXR1cyBjaGFuZ2VkXSB0byAnLCB2YWx1ZSk7CgoJICAgICAgX3RoaXMuX3N0YXRlID0gdmFsdWU7CgoJICAgICAgdmFyIG1zZyA9IHsKCSAgICAgICAgdHlwZTogJ3VwZGF0ZScsCgkgICAgICAgIGZyb206IF90aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMLAoJICAgICAgICB0bzogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCgkgICAgICAgIGJvZHk6IHsKCSAgICAgICAgICB2YWx1ZTogdmFsdWUKCSAgICAgICAgfQoJICAgICAgfTsKCgkgICAgICBpZiAocmVhc29uKSB7CgkgICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CgkgICAgICB9CgoJICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwoJICAgIH0KCSAgfSwgewoJICAgIGtleTogJ193YWl0UmVhZHknLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfd2FpdFJlYWR5KGNhbGxiYWNrKSB7CgkgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKCSAgICAgIGlmIChfdGhpcy5fc29jay5yZWFkeVN0YXRlID09PSAxKSB7CgkgICAgICAgIGNhbGxiYWNrKCk7CgkgICAgICB9IGVsc2UgewoJICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKCSAgICAgICAgfSk7CgkgICAgICB9CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnX2ZpbHRlcicsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CgkgICAgICBpZiAobXNnLmJvZHkgJiYgbXNnLmJvZHkudmlhID09PSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm4gZmFsc2U7CgkgICAgICByZXR1cm4gdHJ1ZTsKCSAgICB9CgkgIH0sIHsKCSAgICBrZXk6ICdfZGVsaXZlcicsCgkgICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxpdmVyKG1zZykgewoJICAgICAgaWYgKCFtc2cuYm9keSkgbXNnLmJvZHkgPSB7fTsKCgkgICAgICBtc2cuYm9keS52aWEgPSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMOwoJICAgICAgY29uc29sZS5sb2coJ1tWZXJ0eFByb3RvU3R1YjogTU4gLT4gUHJvdG9TdHViXScsIG1zZyk7CgkgICAgICB0aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKCSAgICB9CgoJICAgIC8vIGFkZCBkb2N1bWVudGF0aW9uCgoJICB9LCB7CgkgICAga2V5OiAnX29wZW4nLAoJICAgIHZhbHVlOiBmdW5jdGlvbiBfb3BlbihjYWxsYmFjaykgewoJICAgICAgdmFyIF90aGlzID0gdGhpczsKCgkgICAgICBpZiAoIXRoaXMuX2NvbnRpbnVvdXNPcGVuKSB7CgkgICAgICAgIC8vVE9ETzogc2VuZCBzdGF0dXMgKHNlbnQgbWVzc2FnZSBlcnJvciAtIGRpc2Nvbm5lY3RlZCkKCSAgICAgICAgcmV0dXJuOwoJICAgICAgfQoKCSAgICAgIGlmICghX3RoaXMuX3NvY2spIHsKCSAgICAgICAgaWYgKF90aGlzLl9jb25maWcudXJsLnN1YnN0cmluZygwLCAyKSA9PT0gJ3dzJykgewoJICAgICAgICAgIF90aGlzLl9zb2NrID0gbmV3IFdlYlNvY2tldChfdGhpcy5fY29uZmlnLnVybCk7CgkgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgX3RoaXMuX3NvY2sgPSBuZXcgU29ja0pTKF90aGlzLl9jb25maWcudXJsKTsKCSAgICAgICAgfQoKCSAgICAgICAgX3RoaXMuX3NvY2sub25vcGVuID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAgIF90aGlzLl9zZW5kT3BlbihmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBjYWxsYmFjaygpOwoJICAgICAgICAgIH0pOwoJICAgICAgICB9OwoKCSAgICAgICAgX3RoaXMuX3NvY2sub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsKCSAgICAgICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShlLmRhdGEpOwoJICAgICAgICAgIGNvbnNvbGUubG9nKCdbVmVydHhQcm90b1N0dWI6IE1OIC0+IFNPQ0tFVCBPTiBNRVNTQUdFXScsIG1zZyk7CgkgICAgICAgICAgaWYgKG1zZy5mcm9tID09PSAnbW46L3Nlc3Npb24nKSB7CgkgICAgICAgICAgICBpZiAoX3RoaXMuX3Nlc3Npb25DYWxsYmFjaykgewoJICAgICAgICAgICAgICBfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrKG1zZyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgfSBlbHNlIHsKCSAgICAgICAgICAgIGlmIChfdGhpcy5fZmlsdGVyKG1zZykpIHsKCSAgICAgICAgICAgICAgX3RoaXMuX2RlbGl2ZXIobXNnKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICB9CgkgICAgICAgIH07CgoJICAgICAgICBfdGhpcy5fc29jay5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7CgkgICAgICAgICAgdmFyIHJlYXNvbiA9IHZvaWQgMDsKCgkgICAgICAgICAgLy9TZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY0NTUjc2VjdGlvbi03LjQKCSAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMCkgewoJICAgICAgICAgICAgcmVhc29uID0gJ05vcm1hbCBjbG9zdXJlLCBtZWFuaW5nIHRoYXQgdGhlIHB1cnBvc2UgZm9yIHdoaWNoIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCBoYXMgYmVlbiBmdWxmaWxsZWQuJzsKCSAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDEpIHsKCSAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyBcJ2dvaW5nIGF3YXlcJywgc3VjaCBhcyBhIHNlcnZlciBnb2luZyBkb3duIG9yIGEgYnJvd3NlciBoYXZpbmcgbmF2aWdhdGVkIGF3YXkgZnJvbSBhIHBhZ2UuJzsKCSAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDIpIHsKCSAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBkdWUgdG8gYSBwcm90b2NvbCBlcnJvcic7CgkgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAzKSB7CgkgICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSB0eXBlIG9mIGRhdGEgaXQgY2Fubm90IGFjY2VwdCAoZS5nLiwgYW4gZW5kcG9pbnQgdGhhdCB1bmRlcnN0YW5kcyBvbmx5IHRleHQgZGF0YSBNQVkgc2VuZCB0aGlzIGlmIGl0IHJlY2VpdmVzIGEgYmluYXJ5IG1lc3NhZ2UpLic7CgkgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA0KSB7CgkgICAgICAgICAgICByZWFzb24gPSAnUmVzZXJ2ZWQuIFRoZSBzcGVjaWZpYyBtZWFuaW5nIG1pZ2h0IGJlIGRlZmluZWQgaW4gdGhlIGZ1dHVyZS4nOwoJICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNSkgewoJICAgICAgICAgICAgcmVhc29uID0gJ05vIHN0YXR1cyBjb2RlIHdhcyBhY3R1YWxseSBwcmVzZW50Lic7CgkgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA2KSB7CgkgICAgICAgICAgICByZWFzb24gPSAnVGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBhYm5vcm1hbGx5LCBlLmcuLCB3aXRob3V0IHNlbmRpbmcgb3IgcmVjZWl2aW5nIGEgQ2xvc2UgY29udHJvbCBmcmFtZSc7CgkgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA3KSB7CgkgICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgZGF0YSB3aXRoaW4gYSBtZXNzYWdlIHRoYXQgd2FzIG5vdCBjb25zaXN0ZW50IHdpdGggdGhlIHR5cGUgb2YgdGhlIG1lc3NhZ2UgKGUuZy4sIG5vbi1VVEYtOCBbaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzYyOV0gZGF0YSB3aXRoaW4gYSB0ZXh0IG1lc3NhZ2UpLic7CgkgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA4KSB7CgkgICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgInZpb2xhdGVzIGl0cyBwb2xpY3kiLiBUaGlzIHJlYXNvbiBpcyBnaXZlbiBlaXRoZXIgaWYgdGhlcmUgaXMgbm8gb3RoZXIgc3V0aWJsZSByZWFzb24sIG9yIGlmIHRoZXJlIGlzIGEgbmVlZCB0byBoaWRlIHNwZWNpZmljIGRldGFpbHMgYWJvdXQgdGhlIHBvbGljeS4nOwoJICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwOSkgewoJICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0IGlzIHRvbyBiaWcgZm9yIGl0IHRvIHByb2Nlc3MuJzsKCSAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTApIHsKCSAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCAoY2xpZW50KSBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyBleHBlY3RlZCB0aGUgc2VydmVyIHRvIG5lZ290aWF0ZSBvbmUgb3IgbW9yZSBleHRlbnNpb24sIGJ1dCB0aGUgc2VydmVyIGRpZG5cJ3QgcmV0dXJuIHRoZW0gaW4gdGhlIHJlc3BvbnNlIG1lc3NhZ2Ugb2YgdGhlIFdlYlNvY2tldCBoYW5kc2hha2UuIDxiciAvPiBTcGVjaWZpY2FsbHksIHRoZSBleHRlbnNpb25zIHRoYXQgYXJlIG5lZWRlZCBhcmU6ICcgKyBldmVudC5yZWFzb247CgkgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDExKSB7CgkgICAgICAgICAgICByZWFzb24gPSAnQSBzZXJ2ZXIgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGNvbmRpdGlvbiB0aGF0IHByZXZlbnRlZCBpdCBmcm9tIGZ1bGZpbGxpbmcgdGhlIHJlcXVlc3QuJzsKCSAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTUpIHsKCSAgICAgICAgICAgIHJlYXNvbiA9ICdUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGR1ZSB0byBhIGZhaWx1cmUgdG8gcGVyZm9ybSBhIFRMUyBoYW5kc2hha2UgKGUuZy4sIHRoZSBzZXJ2ZXIgY2VydGlmaWNhdGUgY2FuXCd0IGJlIHZlcmlmaWVkKS4nOwoJICAgICAgICAgIH0gZWxzZSB7CgkgICAgICAgICAgICByZWFzb24gPSAnVW5rbm93biByZWFzb24nOwoJICAgICAgICAgIH0KCgkgICAgICAgICAgZGVsZXRlIF90aGlzLl9zb2NrOwoJICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdkaXNjb25uZWN0ZWQnLCByZWFzb24pOwoJICAgICAgICB9OwoJICAgICAgfSBlbHNlIHsKCSAgICAgICAgX3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7CgkgICAgICB9CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAnY29uZmlnJywKCSAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKCSAgICAgIHJldHVybiB0aGlzLl9jb25maWc7CgkgICAgfQoJICB9LCB7CgkgICAga2V5OiAncnVudGltZVNlc3Npb24nLAoJICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewoJICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMOwoJICAgIH0KCSAgfV0pOwoKCSAgcmV0dXJuIFZlcnR4UHJvdG9TdHViOwoJfSgpOwoKCWZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsKCSAgcmV0dXJuIHsKCSAgICBuYW1lOiAnVmVydHhQcm90b1N0dWInLAoJICAgIGluc3RhbmNlOiBuZXcgVmVydHhQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykKCSAgfTsKCX0KCgkvKioNCgkqIENhbGxiYWNrIHVzZWQgdG8gc2VuZCBtZXNzYWdlcw0KCSogQGNhbGxiYWNrIFBvc3RNZXNzYWdlDQoJKiBAcGFyYW0ge01lc3NhZ2V9IG1zZyAtIE1lc3NhZ2UgdG8gc2VuZA0KCSovCgoJbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9Ci8qKioqKiovIF0pCn0pOwo7",
      "sourceCodeClassname": "VertxProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "configuration": {
      "url": "wss://msg-node.hysmart.rethink.ptinovacao.pt/localhost/ws"
    },
    "constraints": {
      "browser": true
    },
    "policies": "",
    "dataObjects": [],
    "interworking": false,
    "description": "Description of VertxProtoStub",
    "objectName": "default",
    "accessControlPolicy": "somePolicy"
  },
  "VertxProtoStubNode": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgiY3J5cHRvIiksIHJlcXVpcmUoImV2ZW50cyIpLCByZXF1aXJlKCJodHRwIiksIHJlcXVpcmUoInVybCIpLCByZXF1aXJlKCJidWZmZXIiKSwgcmVxdWlyZSgiZnMiKSwgcmVxdWlyZSgiaHR0cHMiKSwgcmVxdWlyZSgicGF0aCIpLCByZXF1aXJlKCJ6bGliIikpOwoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpCgkJZGVmaW5lKCJWZXJ0eFByb3RvU3R1Yk5vZGUiLCBbImNyeXB0byIsICJldmVudHMiLCAiaHR0cCIsICJ1cmwiLCAiYnVmZmVyIiwgImZzIiwgImh0dHBzIiwgInBhdGgiLCAiemxpYiJdLCBmYWN0b3J5KTsKCWVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKQoJCWV4cG9ydHNbIlZlcnR4UHJvdG9TdHViTm9kZSJdID0gZmFjdG9yeShyZXF1aXJlKCJjcnlwdG8iKSwgcmVxdWlyZSgiZXZlbnRzIiksIHJlcXVpcmUoImh0dHAiKSwgcmVxdWlyZSgidXJsIiksIHJlcXVpcmUoImJ1ZmZlciIpLCByZXF1aXJlKCJmcyIpLCByZXF1aXJlKCJodHRwcyIpLCByZXF1aXJlKCJwYXRoIiksIHJlcXVpcmUoInpsaWIiKSk7CgllbHNlCgkJcm9vdFsiVmVydHhQcm90b1N0dWJOb2RlIl0gPSBmYWN0b3J5KHJvb3RbImNyeXB0byJdLCByb290WyJldmVudHMiXSwgcm9vdFsiaHR0cCJdLCByb290WyJ1cmwiXSwgcm9vdFsiYnVmZmVyIl0sIHJvb3RbImZzIl0sIHJvb3RbImh0dHBzIl0sIHJvb3RbInBhdGgiXSwgcm9vdFsiemxpYiJdKTsKfSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV83X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMTlfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzIxX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNDdfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV80OF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzQ5X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNTBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81MV9fKSB7CnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwCi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAl2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9OwovKioqKioqLwovKioqKioqLyAJLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KLyoqKioqKi8gCWZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkKLyoqKioqKi8gCQkJcmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkKLyoqKioqKi8gCQl2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7Ci8qKioqKiovIAkJCWk6IG1vZHVsZUlkLAovKioqKioqLyAJCQlsOiBmYWxzZSwKLyoqKioqKi8gCQkJZXhwb3J0czoge30KLyoqKioqKi8gCQl9OwovKioqKioqLwovKioqKioqLyAJCS8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvbgovKioqKioqLyAJCW1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pOwovKioqKioqLwovKioqKioqLyAJCS8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWQKLyoqKioqKi8gCQltb2R1bGUubCA9IHRydWU7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7Ci8qKioqKiovIAl9Ci8qKioqKiovCi8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzOwovKioqKioqLwovKioqKioqLyAJLy8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9OwovKioqKioqLwovKioqKioqLyAJLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHsKLyoqKioqKi8gCQlpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7Ci8qKioqKiovIAkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7Ci8qKioqKiovIAkJCQljb25maWd1cmFibGU6IGZhbHNlLAovKioqKioqLyAJCQkJZW51bWVyYWJsZTogdHJ1ZSwKLyoqKioqKi8gCQkJCWdldDogZ2V0dGVyCi8qKioqKiovIAkJCX0pOwovKioqKioqLyAJCX0KLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7Ci8qKioqKiovIAkJdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6Ci8qKioqKiovIAkJCWZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07Ci8qKioqKiovIAkJX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpOwovKioqKioqLyAJCXJldHVybiBnZXR0ZXI7Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07Ci8qKioqKiovCi8qKioqKiovIAkvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gIiI7Ci8qKioqKiovCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMKLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDI2KTsKLyoqKioqKi8gfSkKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKi8gKFsKLyogMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgYnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykKCmlmIChCdWZmZXIuZnJvbSAmJiBCdWZmZXIuYWxsb2MgJiYgQnVmZmVyLmFsbG9jVW5zYWZlICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cpIHsKICBtb2R1bGUuZXhwb3J0cyA9IGJ1ZmZlcgp9IGVsc2UgewogIC8vIENvcHkgcHJvcGVydGllcyBmcm9tIHJlcXVpcmUoJ2J1ZmZlcicpCiAgT2JqZWN0LmtleXMoYnVmZmVyKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7CiAgICBleHBvcnRzW3Byb3BdID0gYnVmZmVyW3Byb3BdCiAgfSkKICBleHBvcnRzLkJ1ZmZlciA9IFNhZmVCdWZmZXIKfQoKZnVuY3Rpb24gU2FmZUJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQp9CgovLyBDb3B5IHN0YXRpYyBtZXRob2RzIGZyb20gQnVmZmVyCk9iamVjdC5rZXlzKEJ1ZmZlcikuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkgewogIFNhZmVCdWZmZXJbcHJvcF0gPSBCdWZmZXJbcHJvcF0KfSkKClNhZmVCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKQogIH0KICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQp9CgpTYWZlQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpCiAgfQogIHZhciBidWYgPSBCdWZmZXIoc2l6ZSkKICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7CiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykgewogICAgICBidWYuZmlsbChmaWxsLCBlbmNvZGluZykKICAgIH0gZWxzZSB7CiAgICAgIGJ1Zi5maWxsKGZpbGwpCiAgICB9CiAgfSBlbHNlIHsKICAgIGJ1Zi5maWxsKDApCiAgfQogIHJldHVybiBidWYKfQoKU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpCiAgfQogIHJldHVybiBCdWZmZXIoc2l6ZSkKfQoKU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewogIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQogIH0KICByZXR1cm4gYnVmZmVyLlNsb3dCdWZmZXIoc2l6ZSkKfQoKCi8qKiovIH0pLAovKiAxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkKbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMCkoZnVuY3Rpb24oKXsKICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Owp9KTsKCi8qKiovIH0pLAovKiAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpjb25zdCBzYWZlQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKY29uc3QgemxpYiA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpOwoKY29uc3QgYnVmZmVyVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7Cgpjb25zdCBCdWZmZXIgPSBzYWZlQnVmZmVyLkJ1ZmZlcjsKCmNvbnN0IEFWQUlMQUJMRV9XSU5ET1dfQklUUyA9IFs4LCA5LCAxMCwgMTEsIDEyLCAxMywgMTQsIDE1XTsKY29uc3QgVFJBSUxFUiA9IEJ1ZmZlci5mcm9tKFsweDAwLCAweDAwLCAweGZmLCAweGZmXSk7CmNvbnN0IEVNUFRZX0JMT0NLID0gQnVmZmVyLmZyb20oWzB4MDBdKTsKY29uc3QgREVGQVVMVF9XSU5ET1dfQklUUyA9IDE1Owpjb25zdCBERUZBVUxUX01FTV9MRVZFTCA9IDg7CgovKioKICogUGVyLW1lc3NhZ2UgRGVmbGF0ZSBpbXBsZW1lbnRhdGlvbi4KICovCmNsYXNzIFBlck1lc3NhZ2VEZWZsYXRlIHsKICBjb25zdHJ1Y3RvciAob3B0aW9ucywgaXNTZXJ2ZXIsIG1heFBheWxvYWQpIHsKICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgdGhpcy5faXNTZXJ2ZXIgPSAhIWlzU2VydmVyOwogICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7CiAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDsKICAgIHRoaXMucGFyYW1zID0gbnVsbDsKICAgIHRoaXMuX21heFBheWxvYWQgPSBtYXhQYXlsb2FkIHx8IDA7CiAgICB0aGlzLnRocmVzaG9sZCA9IHRoaXMuX29wdGlvbnMudGhyZXNob2xkID09PSB1bmRlZmluZWQgPyAxMDI0IDogdGhpcy5fb3B0aW9ucy50aHJlc2hvbGQ7CiAgfQoKICBzdGF0aWMgZ2V0IGV4dGVuc2lvbk5hbWUgKCkgewogICAgcmV0dXJuICdwZXJtZXNzYWdlLWRlZmxhdGUnOwogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGV4dGVuc2lvbiBwYXJhbWV0ZXJzIG9mZmVyLgogICAqCiAgICogQHJldHVybiB7T2JqZWN0fSBFeHRlbnNpb24gcGFyYW1ldGVycwogICAqIEBwdWJsaWMKICAgKi8KICBvZmZlciAoKSB7CiAgICBjb25zdCBwYXJhbXMgPSB7fTsKCiAgICBpZiAodGhpcy5fb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3ZlcikgewogICAgICBwYXJhbXMuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlOwogICAgfQogICAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIpIHsKICAgICAgcGFyYW1zLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTsKICAgIH0KICAgIGlmICh0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHMpIHsKICAgICAgcGFyYW1zLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHM7CiAgICB9CiAgICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzKSB7CiAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzOwogICAgfSBlbHNlIGlmICh0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT0gbnVsbCkgewogICAgICBwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cyA9IHRydWU7CiAgICB9CgogICAgcmV0dXJuIHBhcmFtczsKICB9CgogIC8qKgogICAqIEFjY2VwdCBleHRlbnNpb24gb2ZmZXIuCiAgICoKICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXNMaXN0IEV4dGVuc2lvbiBwYXJhbWV0ZXJzCiAgICogQHJldHVybiB7T2JqZWN0fSBBY2NlcHRlZCBjb25maWd1cmF0aW9uCiAgICogQHB1YmxpYwogICAqLwogIGFjY2VwdCAocGFyYW1zTGlzdCkgewogICAgcGFyYW1zTGlzdCA9IHRoaXMubm9ybWFsaXplUGFyYW1zKHBhcmFtc0xpc3QpOwoKICAgIHZhciBwYXJhbXM7CiAgICBpZiAodGhpcy5faXNTZXJ2ZXIpIHsKICAgICAgcGFyYW1zID0gdGhpcy5hY2NlcHRBc1NlcnZlcihwYXJhbXNMaXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIHBhcmFtcyA9IHRoaXMuYWNjZXB0QXNDbGllbnQocGFyYW1zTGlzdCk7CiAgICB9CgogICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7CiAgICByZXR1cm4gcGFyYW1zOwogIH0KCiAgLyoqCiAgICogUmVsZWFzZXMgYWxsIHJlc291cmNlcyB1c2VkIGJ5IHRoZSBleHRlbnNpb24uCiAgICoKICAgKiBAcHVibGljCiAgICovCiAgY2xlYW51cCAoKSB7CiAgICBpZiAodGhpcy5faW5mbGF0ZSkgewogICAgICBpZiAodGhpcy5faW5mbGF0ZS53cml0ZUluUHJvZ3Jlc3MpIHsKICAgICAgICB0aGlzLl9pbmZsYXRlLnBlbmRpbmdDbG9zZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5faW5mbGF0ZS5jbG9zZSgpOwogICAgICAgIHRoaXMuX2luZmxhdGUgPSBudWxsOwogICAgICB9CiAgICB9CiAgICBpZiAodGhpcy5fZGVmbGF0ZSkgewogICAgICBpZiAodGhpcy5fZGVmbGF0ZS53cml0ZUluUHJvZ3Jlc3MpIHsKICAgICAgICB0aGlzLl9kZWZsYXRlLnBlbmRpbmdDbG9zZSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fZGVmbGF0ZS5jbG9zZSgpOwogICAgICAgIHRoaXMuX2RlZmxhdGUgPSBudWxsOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBBY2NlcHQgZXh0ZW5zaW9uIG9mZmVyIGZyb20gY2xpZW50LgogICAqCiAgICogQHBhcmFtIHtBcnJheX0gcGFyYW1zTGlzdCBFeHRlbnNpb24gcGFyYW1ldGVycwogICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvbgogICAqIEBwcml2YXRlCiAgICovCiAgYWNjZXB0QXNTZXJ2ZXIgKHBhcmFtc0xpc3QpIHsKICAgIGNvbnN0IGFjY2VwdGVkID0ge307CiAgICBjb25zdCByZXN1bHQgPSBwYXJhbXNMaXN0LnNvbWUoKHBhcmFtcykgPT4gewogICAgICBpZiAoKAogICAgICAgIHRoaXMuX29wdGlvbnMuc2VydmVyTm9Db250ZXh0VGFrZW92ZXIgPT09IGZhbHNlICYmCiAgICAgICAgcGFyYW1zLnNlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyCiAgICAgICkgfHwgKAogICAgICAgIHRoaXMuX29wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gZmFsc2UgJiYKICAgICAgICBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cwogICAgICApIHx8ICgKICAgICAgICB0eXBlb2YgdGhpcy5fb3B0aW9ucy5zZXJ2ZXJNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJyAmJgogICAgICAgIHR5cGVvZiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cyA9PT0gJ251bWJlcicgJiYKICAgICAgICB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHMgPiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cwogICAgICApIHx8ICgKICAgICAgICB0eXBlb2YgdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJyAmJgogICAgICAgICFwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cwogICAgICApKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoCiAgICAgICAgdGhpcy5fb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3ZlciB8fAogICAgICAgIHBhcmFtcy5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlcgogICAgICApIHsKICAgICAgICBhY2NlcHRlZC5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlciA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIpIHsKICAgICAgICBhY2NlcHRlZC5jbGllbnRfbm9fY29udGV4dF90YWtlb3ZlciA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIgIT09IGZhbHNlICYmCiAgICAgICAgcGFyYW1zLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyCiAgICAgICkgewogICAgICAgIGFjY2VwdGVkLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHRoaXMuX29wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicpIHsKICAgICAgICBhY2NlcHRlZC5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5zZXJ2ZXJNYXhXaW5kb3dCaXRzOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cyA9PT0gJ251bWJlcicpIHsKICAgICAgICBhY2NlcHRlZC5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID0gcGFyYW1zLnNlcnZlcl9tYXhfd2luZG93X2JpdHM7CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInKSB7CiAgICAgICAgYWNjZXB0ZWQuY2xpZW50X21heF93aW5kb3dfYml0cyA9IHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0czsKICAgICAgfSBlbHNlIGlmICgKICAgICAgICB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgIT09IGZhbHNlICYmCiAgICAgICAgdHlwZW9mIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID09PSAnbnVtYmVyJwogICAgICApIHsKICAgICAgICBhY2NlcHRlZC5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHM7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKCiAgICBpZiAoIXJlc3VsdCkgdGhyb3cgbmV3IEVycm9yKGBEb2Vzbid0IHN1cHBvcnQgdGhlIG9mZmVyZWQgY29uZmlndXJhdGlvbmApOwoKICAgIHJldHVybiBhY2NlcHRlZDsKICB9CgogIC8qKgogICAqIEFjY2VwdCBleHRlbnNpb24gcmVzcG9uc2UgZnJvbSBzZXJ2ZXIuCiAgICoKICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXNMaXN0IEV4dGVuc2lvbiBwYXJhbWV0ZXJzCiAgICogQHJldHVybiB7T2JqZWN0fSBBY2NlcHRlZCBjb25maWd1cmF0aW9uCiAgICogQHByaXZhdGUKICAgKi8KICBhY2NlcHRBc0NsaWVudCAocGFyYW1zTGlzdCkgewogICAgY29uc3QgcGFyYW1zID0gcGFyYW1zTGlzdFswXTsKCiAgICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnROb0NvbnRleHRUYWtlb3ZlciAhPSBudWxsKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLl9vcHRpb25zLmNsaWVudE5vQ29udGV4dFRha2VvdmVyID09PSBmYWxzZSAmJgogICAgICAgIHBhcmFtcy5jbGllbnRfbm9fY29udGV4dF90YWtlb3ZlcgogICAgICApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgZm9yICJjbGllbnRfbm9fY29udGV4dF90YWtlb3ZlciInKTsKICAgICAgfQogICAgfQogICAgaWYgKHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyAhPSBudWxsKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09IGZhbHNlICYmCiAgICAgICAgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMKICAgICAgKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZhbHVlIGZvciAiY2xpZW50X21heF93aW5kb3dfYml0cyInKTsKICAgICAgfQogICAgICBpZiAoCiAgICAgICAgdHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiYgKAogICAgICAgICFwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cyB8fAogICAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID4gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzCiAgICAgICkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgZm9yICJjbGllbnRfbWF4X3dpbmRvd19iaXRzIicpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHBhcmFtczsKICB9CgogIC8qKgogICAqIE5vcm1hbGl6ZSBleHRlbnNpb25zIHBhcmFtZXRlcnMuCiAgICoKICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXNMaXN0IEV4dGVuc2lvbiBwYXJhbWV0ZXJzCiAgICogQHJldHVybiB7QXJyYXl9IE5vcm1hbGl6ZWQgZXh0ZW5zaW9ucyBwYXJhbWV0ZXJzCiAgICogQHByaXZhdGUKICAgKi8KICBub3JtYWxpemVQYXJhbXMgKHBhcmFtc0xpc3QpIHsKICAgIHJldHVybiBwYXJhbXNMaXN0Lm1hcCgocGFyYW1zKSA9PiB7CiAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW2tleV07CiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTXVsdGlwbGUgZXh0ZW5zaW9uIHBhcmFtZXRlcnMgZm9yICR7a2V5fWApOwogICAgICAgIH0KCiAgICAgICAgdmFsdWUgPSB2YWx1ZVswXTsKCiAgICAgICAgc3dpdGNoIChrZXkpIHsKICAgICAgICAgIGNhc2UgJ3NlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyJzoKICAgICAgICAgIGNhc2UgJ2NsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyJzoKICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGV4dGVuc2lvbiBwYXJhbWV0ZXIgdmFsdWUgZm9yICR7a2V5fSAoJHt2YWx1ZX0pYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGFyYW1zW2tleV0gPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ3NlcnZlcl9tYXhfd2luZG93X2JpdHMnOgogICAgICAgICAgY2FzZSAnY2xpZW50X21heF93aW5kb3dfYml0cyc6CiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApOwogICAgICAgICAgICAgIGlmICghfkFWQUlMQUJMRV9XSU5ET1dfQklUUy5pbmRleE9mKHZhbHVlKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGV4dGVuc2lvbiBwYXJhbWV0ZXIgdmFsdWUgZm9yICR7a2V5fSAoJHt2YWx1ZX0pYCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghdGhpcy5faXNTZXJ2ZXIgJiYgdmFsdWUgPT09IHRydWUpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZXh0ZW5zaW9uIHBhcmFtZXRlciB2YWx1ZSBmb3IgJHtrZXl9YCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBkZWZpbmVkIGV4dGVuc2lvbiBwYXJhbWV0ZXIgKCR7a2V5fSlgKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcGFyYW1zOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBEZWNvbXByZXNzIGRhdGEuCiAgICoKICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBDb21wcmVzc2VkIGRhdGEKICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdGhpcyBpcyB0aGUgbGFzdCBmcmFnbWVudAogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrCiAgICogQHB1YmxpYwogICAqLwogIGRlY29tcHJlc3MgKGRhdGEsIGZpbiwgY2FsbGJhY2spIHsKICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnY2xpZW50JyA6ICdzZXJ2ZXInOwoKICAgIGlmICghdGhpcy5faW5mbGF0ZSkgewogICAgICBjb25zdCBtYXhXaW5kb3dCaXRzID0gdGhpcy5wYXJhbXNbYCR7ZW5kcG9pbnR9X21heF93aW5kb3dfYml0c2BdOwogICAgICB0aGlzLl9pbmZsYXRlID0gemxpYi5jcmVhdGVJbmZsYXRlUmF3KHsKICAgICAgICB3aW5kb3dCaXRzOiB0eXBlb2YgbWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgPyBtYXhXaW5kb3dCaXRzIDogREVGQVVMVF9XSU5ET1dfQklUUwogICAgICB9KTsKICAgIH0KICAgIHRoaXMuX2luZmxhdGUud3JpdGVJblByb2dyZXNzID0gdHJ1ZTsKCiAgICB2YXIgdG90YWxMZW5ndGggPSAwOwogICAgY29uc3QgYnVmZmVycyA9IFtdOwogICAgdmFyIGVycjsKCiAgICBjb25zdCBvbkRhdGEgPSAoZGF0YSkgPT4gewogICAgICB0b3RhbExlbmd0aCArPSBkYXRhLmxlbmd0aDsKICAgICAgaWYgKHRoaXMuX21heFBheWxvYWQgPCAxIHx8IHRvdGFsTGVuZ3RoIDw9IHRoaXMuX21heFBheWxvYWQpIHsKICAgICAgICByZXR1cm4gYnVmZmVycy5wdXNoKGRhdGEpOwogICAgICB9CgogICAgICBlcnIgPSBuZXcgRXJyb3IoJ21heCBwYXlsb2FkIHNpemUgZXhjZWVkZWQnKTsKICAgICAgZXJyLmNsb3NlQ29kZSA9IDEwMDk7CiAgICAgIHRoaXMuX2luZmxhdGUucmVzZXQoKTsKICAgIH07CgogICAgY29uc3Qgb25FcnJvciA9IChlcnIpID0+IHsKICAgICAgY2xlYW51cCgpOwogICAgICBjYWxsYmFjayhlcnIpOwogICAgfTsKCiAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4gewogICAgICBpZiAoIXRoaXMuX2luZmxhdGUpIHJldHVybjsKCiAgICAgIHRoaXMuX2luZmxhdGUucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25FcnJvcik7CiAgICAgIHRoaXMuX2luZmxhdGUucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbkRhdGEpOwogICAgICB0aGlzLl9pbmZsYXRlLndyaXRlSW5Qcm9ncmVzcyA9IGZhbHNlOwoKICAgICAgaWYgKAogICAgICAgIChmaW4gJiYgdGhpcy5wYXJhbXNbYCR7ZW5kcG9pbnR9X25vX2NvbnRleHRfdGFrZW92ZXJgXSkgfHwKICAgICAgICB0aGlzLl9pbmZsYXRlLnBlbmRpbmdDbG9zZQogICAgICApIHsKICAgICAgICB0aGlzLl9pbmZsYXRlLmNsb3NlKCk7CiAgICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5faW5mbGF0ZS5vbignZXJyb3InLCBvbkVycm9yKS5vbignZGF0YScsIG9uRGF0YSk7CiAgICB0aGlzLl9pbmZsYXRlLndyaXRlKGRhdGEpOwogICAgaWYgKGZpbikgdGhpcy5faW5mbGF0ZS53cml0ZShUUkFJTEVSKTsKCiAgICB0aGlzLl9pbmZsYXRlLmZsdXNoKCgpID0+IHsKICAgICAgY2xlYW51cCgpOwogICAgICBpZiAoZXJyKSBjYWxsYmFjayhlcnIpOwogICAgICBlbHNlIGNhbGxiYWNrKG51bGwsIGJ1ZmZlclV0aWwuY29uY2F0KGJ1ZmZlcnMsIHRvdGFsTGVuZ3RoKSk7CiAgICB9KTsKICB9CgogIC8qKgogICAqIENvbXByZXNzIGRhdGEuCiAgICoKICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBEYXRhIHRvIGNvbXByZXNzCiAgICogQHBhcmFtIHtCb29sZWFufSBmaW4gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRoaXMgaXMgdGhlIGxhc3QgZnJhZ21lbnQKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjawogICAqIEBwdWJsaWMKICAgKi8KICBjb21wcmVzcyAoZGF0YSwgZmluLCBjYWxsYmFjaykgewogICAgaWYgKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgIHByb2Nlc3MubmV4dFRpY2soY2FsbGJhY2ssIG51bGwsIEVNUFRZX0JMT0NLKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnc2VydmVyJyA6ICdjbGllbnQnOwoKICAgIGlmICghdGhpcy5fZGVmbGF0ZSkgewogICAgICBjb25zdCBtYXhXaW5kb3dCaXRzID0gdGhpcy5wYXJhbXNbYCR7ZW5kcG9pbnR9X21heF93aW5kb3dfYml0c2BdOwogICAgICB0aGlzLl9kZWZsYXRlID0gemxpYi5jcmVhdGVEZWZsYXRlUmF3KHsKICAgICAgICBmbHVzaDogemxpYi5aX1NZTkNfRkxVU0gsCiAgICAgICAgd2luZG93Qml0czogdHlwZW9mIG1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInID8gbWF4V2luZG93Qml0cyA6IERFRkFVTFRfV0lORE9XX0JJVFMsCiAgICAgICAgbWVtTGV2ZWw6IHRoaXMuX29wdGlvbnMubWVtTGV2ZWwgfHwgREVGQVVMVF9NRU1fTEVWRUwKICAgICAgfSk7CiAgICB9CiAgICB0aGlzLl9kZWZsYXRlLndyaXRlSW5Qcm9ncmVzcyA9IHRydWU7CgogICAgdmFyIHRvdGFsTGVuZ3RoID0gMDsKICAgIGNvbnN0IGJ1ZmZlcnMgPSBbXTsKCiAgICBjb25zdCBvbkRhdGEgPSAoZGF0YSkgPT4gewogICAgICB0b3RhbExlbmd0aCArPSBkYXRhLmxlbmd0aDsKICAgICAgYnVmZmVycy5wdXNoKGRhdGEpOwogICAgfTsKCiAgICBjb25zdCBvbkVycm9yID0gKGVycikgPT4gewogICAgICBjbGVhbnVwKCk7CiAgICAgIGNhbGxiYWNrKGVycik7CiAgICB9OwoKICAgIGNvbnN0IGNsZWFudXAgPSAoKSA9PiB7CiAgICAgIGlmICghdGhpcy5fZGVmbGF0ZSkgcmV0dXJuOwoKICAgICAgdGhpcy5fZGVmbGF0ZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbkVycm9yKTsKICAgICAgdGhpcy5fZGVmbGF0ZS5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uRGF0YSk7CiAgICAgIHRoaXMuX2RlZmxhdGUud3JpdGVJblByb2dyZXNzID0gZmFsc2U7CgogICAgICBpZiAoCiAgICAgICAgKGZpbiAmJiB0aGlzLnBhcmFtc1tgJHtlbmRwb2ludH1fbm9fY29udGV4dF90YWtlb3ZlcmBdKSB8fAogICAgICAgIHRoaXMuX2RlZmxhdGUucGVuZGluZ0Nsb3NlCiAgICAgICkgewogICAgICAgIHRoaXMuX2RlZmxhdGUuY2xvc2UoKTsKICAgICAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDsKICAgICAgfQogICAgfTsKCiAgICB0aGlzLl9kZWZsYXRlLm9uKCdlcnJvcicsIG9uRXJyb3IpLm9uKCdkYXRhJywgb25EYXRhKTsKICAgIHRoaXMuX2RlZmxhdGUud3JpdGUoZGF0YSk7CiAgICB0aGlzLl9kZWZsYXRlLmZsdXNoKHpsaWIuWl9TWU5DX0ZMVVNILCAoKSA9PiB7CiAgICAgIGNsZWFudXAoKTsKICAgICAgdmFyIGRhdGEgPSBidWZmZXJVdGlsLmNvbmNhdChidWZmZXJzLCB0b3RhbExlbmd0aCk7CiAgICAgIGlmIChmaW4pIGRhdGEgPSBkYXRhLnNsaWNlKDAsIGRhdGEubGVuZ3RoIC0gNCk7CiAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpOwogICAgfSk7CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IFBlck1lc3NhZ2VEZWZsYXRlOwoKCi8qKiovIH0pLAovKiAzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCnZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307CmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKLyoqKi8gfSksCi8qIDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJzsKfTsKCi8qKiovIH0pLAovKiA1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKLyohCiAqIHdzOiBhIG5vZGUuanMgd2Vic29ja2V0IGNsaWVudAogKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT4KICogTUlUIExpY2Vuc2VkCiAqLwoKCgpjb25zdCBzYWZlQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCmNvbnN0IEJ1ZmZlciA9IHNhZmVCdWZmZXIuQnVmZmVyOwoKLyoqCiAqIE1lcmdlcyBhbiBhcnJheSBvZiBidWZmZXJzIGludG8gYSBuZXcgYnVmZmVyLgogKgogKiBAcGFyYW0ge0J1ZmZlcltdfSBsaXN0IFRoZSBhcnJheSBvZiBidWZmZXJzIHRvIGNvbmNhdAogKiBAcGFyYW0ge051bWJlcn0gdG90YWxMZW5ndGggVGhlIHRvdGFsIGxlbmd0aCBvZiBidWZmZXJzIGluIHRoZSBsaXN0CiAqIEByZXR1cm4ge0J1ZmZlcn0gVGhlIHJlc3VsdGluZyBidWZmZXIKICogQHB1YmxpYwogKi8KY29uc3QgY29uY2F0ID0gKGxpc3QsIHRvdGFsTGVuZ3RoKSA9PiB7CiAgY29uc3QgdGFyZ2V0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKHRvdGFsTGVuZ3RoKTsKICB2YXIgb2Zmc2V0ID0gMDsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICBjb25zdCBidWYgPSBsaXN0W2ldOwogICAgYnVmLmNvcHkodGFyZ2V0LCBvZmZzZXQpOwogICAgb2Zmc2V0ICs9IGJ1Zi5sZW5ndGg7CiAgfQoKICByZXR1cm4gdGFyZ2V0Owp9OwoKdHJ5IHsKICBjb25zdCBidWZmZXJVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7CgogIG1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmFzc2lnbih7IGNvbmNhdCB9LCBidWZmZXJVdGlsLkJ1ZmZlclV0aWwgfHwgYnVmZmVyVXRpbCk7Cn0gY2F0Y2ggKGUpIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHsKICAvKioKICAgKiBNYXNrcyBhIGJ1ZmZlciB1c2luZyB0aGUgZ2l2ZW4gbWFzay4KICAgKgogICAqIEBwYXJhbSB7QnVmZmVyfSBzb3VyY2UgVGhlIGJ1ZmZlciB0byBtYXNrCiAgICogQHBhcmFtIHtCdWZmZXJ9IG1hc2sgVGhlIG1hc2sgdG8gdXNlCiAgICogQHBhcmFtIHtCdWZmZXJ9IG91dHB1dCBUaGUgYnVmZmVyIHdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHQKICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IFRoZSBvZmZzZXQgYXQgd2hpY2ggdG8gc3RhcnQgd3JpdGluZwogICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggVGhlIG51bWJlciBvZiBieXRlcyB0byBtYXNrLgogICAqIEBwdWJsaWMKICAgKi8KICBjb25zdCBtYXNrID0gKHNvdXJjZSwgbWFzaywgb3V0cHV0LCBvZmZzZXQsIGxlbmd0aCkgPT4gewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBvdXRwdXRbb2Zmc2V0ICsgaV0gPSBzb3VyY2VbaV0gXiBtYXNrW2kgJiAzXTsKICAgIH0KICB9OwoKICAvKioKICAgKiBVbm1hc2tzIGEgYnVmZmVyIHVzaW5nIHRoZSBnaXZlbiBtYXNrLgogICAqCiAgICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZmZlciBUaGUgYnVmZmVyIHRvIHVubWFzawogICAqIEBwYXJhbSB7QnVmZmVyfSBtYXNrIFRoZSBtYXNrIHRvIHVzZQogICAqIEBwdWJsaWMKICAgKi8KICBjb25zdCB1bm1hc2sgPSAoYnVmZmVyLCBtYXNrKSA9PiB7CiAgICAvLyBSZXF1aXJlZCB1bnRpbCBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzkwMDYgaXMgcmVzb2x2ZWQuCiAgICBjb25zdCBsZW5ndGggPSBidWZmZXIubGVuZ3RoOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBidWZmZXJbaV0gXj0gbWFza1tpICYgM107CiAgICB9CiAgfTsKCiAgbW9kdWxlLmV4cG9ydHMgPSB7IGNvbmNhdCwgbWFzaywgdW5tYXNrIH07Cn0KCgovKioqLyB9KSwKLyogNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKY29uc3Qgc2FmZUJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgpjb25zdCBCdWZmZXIgPSBzYWZlQnVmZmVyLkJ1ZmZlcjsKCmV4cG9ydHMuQklOQVJZX1RZUEVTID0gWydub2RlYnVmZmVyJywgJ2FycmF5YnVmZmVyJywgJ2ZyYWdtZW50cyddOwpleHBvcnRzLkdVSUQgPSAnMjU4RUFGQTUtRTkxNC00N0RBLTk1Q0EtQzVBQjBEQzg1QjExJzsKZXhwb3J0cy5FTVBUWV9CVUZGRVIgPSBCdWZmZXIuYWxsb2MoMCk7CmV4cG9ydHMuTk9PUCA9ICgpID0+IHt9OwoKCi8qKiovIH0pLAovKiA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiY3J5cHRvIik7CgovKioqLyB9KSwKLyogOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgpmdW5jdGlvbiB3ZWJwYWNrRW1wdHlDb250ZXh0KHJlcSkgewoJdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIgKyByZXEgKyAiJy4iKTsKfQp3ZWJwYWNrRW1wdHlDb250ZXh0LmtleXMgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFtdOyB9Owp3ZWJwYWNrRW1wdHlDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrRW1wdHlDb250ZXh0Owptb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7CndlYnBhY2tFbXB0eUNvbnRleHQuaWQgPSA4OwoKLyoqKi8gfSksCi8qIDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKF9fZmlsZW5hbWUpIHsKLyoqCiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuCiAqLwoKdmFyIGZzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkKICAsIHBhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKQogICwgam9pbiA9IHBhdGguam9pbgogICwgZGlybmFtZSA9IHBhdGguZGlybmFtZQogICwgZXhpc3RzID0gZnMuZXhpc3RzU3luYyB8fCBwYXRoLmV4aXN0c1N5bmMKICAsIGRlZmF1bHRzID0gewogICAgICAgIGFycm93OiBwcm9jZXNzLmVudi5OT0RFX0JJTkRJTkdTX0FSUk9XIHx8ICcg4oaSICcKICAgICAgLCBjb21waWxlZDogcHJvY2Vzcy5lbnYuTk9ERV9CSU5ESU5HU19DT01QSUxFRF9ESVIgfHwgJ2NvbXBpbGVkJwogICAgICAsIHBsYXRmb3JtOiBwcm9jZXNzLnBsYXRmb3JtCiAgICAgICwgYXJjaDogcHJvY2Vzcy5hcmNoCiAgICAgICwgdmVyc2lvbjogcHJvY2Vzcy52ZXJzaW9ucy5ub2RlCiAgICAgICwgYmluZGluZ3M6ICdiaW5kaW5ncy5ub2RlJwogICAgICAsIHRyeTogWwogICAgICAgICAgLy8gbm9kZS1neXAncyBsaW5rZWQgdmVyc2lvbiBpbiB0aGUgImJ1aWxkIiBkaXIKICAgICAgICAgIFsgJ21vZHVsZV9yb290JywgJ2J1aWxkJywgJ2JpbmRpbmdzJyBdCiAgICAgICAgICAvLyBub2RlLXdhZiBhbmQgZ3lwX2FkZG9uIChhLmsuYSBub2RlLWd5cCkKICAgICAgICAsIFsgJ21vZHVsZV9yb290JywgJ2J1aWxkJywgJ0RlYnVnJywgJ2JpbmRpbmdzJyBdCiAgICAgICAgLCBbICdtb2R1bGVfcm9vdCcsICdidWlsZCcsICdSZWxlYXNlJywgJ2JpbmRpbmdzJyBdCiAgICAgICAgICAvLyBEZWJ1ZyBmaWxlcywgZm9yIGRldmVsb3BtZW50IChsZWdhY3kgYmVoYXZpb3IsIHJlbW92ZSBmb3Igbm9kZSB2MC45KQogICAgICAgICwgWyAnbW9kdWxlX3Jvb3QnLCAnb3V0JywgJ0RlYnVnJywgJ2JpbmRpbmdzJyBdCiAgICAgICAgLCBbICdtb2R1bGVfcm9vdCcsICdEZWJ1ZycsICdiaW5kaW5ncycgXQogICAgICAgICAgLy8gUmVsZWFzZSBmaWxlcywgYnV0IG1hbnVhbGx5IGNvbXBpbGVkIChsZWdhY3kgYmVoYXZpb3IsIHJlbW92ZSBmb3Igbm9kZSB2MC45KQogICAgICAgICwgWyAnbW9kdWxlX3Jvb3QnLCAnb3V0JywgJ1JlbGVhc2UnLCAnYmluZGluZ3MnIF0KICAgICAgICAsIFsgJ21vZHVsZV9yb290JywgJ1JlbGVhc2UnLCAnYmluZGluZ3MnIF0KICAgICAgICAgIC8vIExlZ2FjeSBmcm9tIG5vZGUtd2FmLCBub2RlIDw9IDAuNC54CiAgICAgICAgLCBbICdtb2R1bGVfcm9vdCcsICdidWlsZCcsICdkZWZhdWx0JywgJ2JpbmRpbmdzJyBdCiAgICAgICAgICAvLyBQcm9kdWN0aW9uICJSZWxlYXNlIiBidWlsZHR5cGUgYmluYXJ5IChtZWguLi4pCiAgICAgICAgLCBbICdtb2R1bGVfcm9vdCcsICdjb21waWxlZCcsICd2ZXJzaW9uJywgJ3BsYXRmb3JtJywgJ2FyY2gnLCAnYmluZGluZ3MnIF0KICAgICAgICBdCiAgICB9CgovKioKICogVGhlIG1haW4gYGJpbmRpbmdzKClgIGZ1bmN0aW9uIGxvYWRzIHRoZSBjb21waWxlZCBiaW5kaW5ncyBmb3IgYSBnaXZlbiBtb2R1bGUuCiAqIEl0IHVzZXMgVjgncyBFcnJvciBBUEkgdG8gZGV0ZXJtaW5lIHRoZSBwYXJlbnQgZmlsZW5hbWUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzCiAqIGJlaW5nIGludm9rZWQgZnJvbSwgd2hpY2ggaXMgdGhlbiB1c2VkIHRvIGZpbmQgdGhlIHJvb3QgZGlyZWN0b3J5LgogKi8KCmZ1bmN0aW9uIGJpbmRpbmdzIChvcHRzKSB7CgogIC8vIEFyZ3VtZW50IHN1cmdlcnkKICBpZiAodHlwZW9mIG9wdHMgPT0gJ3N0cmluZycpIHsKICAgIG9wdHMgPSB7IGJpbmRpbmdzOiBvcHRzIH0KICB9IGVsc2UgaWYgKCFvcHRzKSB7CiAgICBvcHRzID0ge30KICB9CiAgb3B0cy5fX3Byb3RvX18gPSBkZWZhdWx0cwoKICAvLyBHZXQgdGhlIG1vZHVsZSByb290CiAgaWYgKCFvcHRzLm1vZHVsZV9yb290KSB7CiAgICBvcHRzLm1vZHVsZV9yb290ID0gZXhwb3J0cy5nZXRSb290KGV4cG9ydHMuZ2V0RmlsZU5hbWUoKSkKICB9CgogIC8vIEVuc3VyZSB0aGUgZ2l2ZW4gYmluZGluZ3MgbmFtZSBlbmRzIHdpdGggLm5vZGUKICBpZiAocGF0aC5leHRuYW1lKG9wdHMuYmluZGluZ3MpICE9ICcubm9kZScpIHsKICAgIG9wdHMuYmluZGluZ3MgKz0gJy5ub2RlJwogIH0KCiAgdmFyIHRyaWVzID0gW10KICAgICwgaSA9IDAKICAgICwgbCA9IG9wdHMudHJ5Lmxlbmd0aAogICAgLCBuCiAgICAsIGIKICAgICwgZXJyCgogIGZvciAoOyBpPGw7IGkrKykgewogICAgbiA9IGpvaW4uYXBwbHkobnVsbCwgb3B0cy50cnlbaV0ubWFwKGZ1bmN0aW9uIChwKSB7CiAgICAgIHJldHVybiBvcHRzW3BdIHx8IHAKICAgIH0pKQogICAgdHJpZXMucHVzaChuKQogICAgdHJ5IHsKICAgICAgYiA9IG9wdHMucGF0aCA/IC8qcmVxdWlyZS5yZXNvbHZlKi8oIShmdW5jdGlvbiB3ZWJwYWNrTWlzc2luZ01vZHVsZSgpIHsgdmFyIGUgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSBcIi5cIiIpOyBlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7IHRocm93IGU7IH0oKSkpIDogIShmdW5jdGlvbiB3ZWJwYWNrTWlzc2luZ01vZHVsZSgpIHsgdmFyIGUgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSBcIi5cIiIpOyBlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7IHRocm93IGU7IH0oKSkKICAgICAgaWYgKCFvcHRzLnBhdGgpIHsKICAgICAgICBiLnBhdGggPSBuCiAgICAgIH0KICAgICAgcmV0dXJuIGIKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaWYgKCEvbm90IGZpbmQvaS50ZXN0KGUubWVzc2FnZSkpIHsKICAgICAgICB0aHJvdyBlCiAgICAgIH0KICAgIH0KICB9CgogIGVyciA9IG5ldyBFcnJvcignQ291bGQgbm90IGxvY2F0ZSB0aGUgYmluZGluZ3MgZmlsZS4gVHJpZWQ6XG4nCiAgICArIHRyaWVzLm1hcChmdW5jdGlvbiAoYSkgeyByZXR1cm4gb3B0cy5hcnJvdyArIGEgfSkuam9pbignXG4nKSkKICBlcnIudHJpZXMgPSB0cmllcwogIHRocm93IGVycgp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGJpbmRpbmdzCgoKLyoqCiAqIEdldHMgdGhlIGZpbGVuYW1lIG9mIHRoZSBKYXZhU2NyaXB0IGZpbGUgdGhhdCBpbnZva2VzIHRoaXMgZnVuY3Rpb24uCiAqIFVzZWQgdG8gaGVscCBmaW5kIHRoZSByb290IGRpcmVjdG9yeSBvZiBhIG1vZHVsZS4KICogT3B0aW9uYWxseSBhY2NlcHRzIGFuIGZpbGVuYW1lIGFyZ3VtZW50IHRvIHNraXAgd2hlbiBzZWFyY2hpbmcgZm9yIHRoZSBpbnZva2luZyBmaWxlbmFtZQogKi8KCmV4cG9ydHMuZ2V0RmlsZU5hbWUgPSBmdW5jdGlvbiBnZXRGaWxlTmFtZSAoY2FsbGluZ19maWxlKSB7CiAgdmFyIG9yaWdQU1QgPSBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZQogICAgLCBvcmlnU1RMID0gRXJyb3Iuc3RhY2tUcmFjZUxpbWl0CiAgICAsIGR1bW15ID0ge30KICAgICwgZmlsZU5hbWUKCiAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gMTAKCiAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBmdW5jdGlvbiAoZSwgc3QpIHsKICAgIGZvciAodmFyIGk9MCwgbD1zdC5sZW5ndGg7IGk8bDsgaSsrKSB7CiAgICAgIGZpbGVOYW1lID0gc3RbaV0uZ2V0RmlsZU5hbWUoKQogICAgICBpZiAoZmlsZU5hbWUgIT09IF9fZmlsZW5hbWUpIHsKICAgICAgICBpZiAoY2FsbGluZ19maWxlKSB7CiAgICAgICAgICAgIGlmIChmaWxlTmFtZSAhPT0gY2FsbGluZ19maWxlKSB7CiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICAvLyBydW4gdGhlICdwcmVwYXJlU3RhY2tUcmFjZScgZnVuY3Rpb24gYWJvdmUKICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShkdW1teSkKICBkdW1teS5zdGFjawoKICAvLyBjbGVhbnVwCiAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBvcmlnUFNUCiAgRXJyb3Iuc3RhY2tUcmFjZUxpbWl0ID0gb3JpZ1NUTAoKICByZXR1cm4gZmlsZU5hbWUKfQoKLyoqCiAqIEdldHMgdGhlIHJvb3QgZGlyZWN0b3J5IG9mIGEgbW9kdWxlLCBnaXZlbiBhbiBhcmJpdHJhcnkgZmlsZW5hbWUKICogc29tZXdoZXJlIGluIHRoZSBtb2R1bGUgdHJlZS4gVGhlICJyb290IGRpcmVjdG9yeSIgaXMgdGhlIGRpcmVjdG9yeQogKiBjb250YWluaW5nIHRoZSBgcGFja2FnZS5qc29uYCBmaWxlLgogKgogKiAgIEluOiAgL2hvbWUvbmF0ZS9ub2RlLW5hdGl2ZS1tb2R1bGUvbGliL2luZGV4LmpzCiAqICAgT3V0OiAvaG9tZS9uYXRlL25vZGUtbmF0aXZlLW1vZHVsZQogKi8KCmV4cG9ydHMuZ2V0Um9vdCA9IGZ1bmN0aW9uIGdldFJvb3QgKGZpbGUpIHsKICB2YXIgZGlyID0gZGlybmFtZShmaWxlKQogICAgLCBwcmV2CiAgd2hpbGUgKHRydWUpIHsKICAgIGlmIChkaXIgPT09ICcuJykgewogICAgICAvLyBBdm9pZHMgYW4gaW5maW5pdGUgbG9vcCBpbiByYXJlIGNhc2VzLCBsaWtlIHRoZSBSRVBMCiAgICAgIGRpciA9IHByb2Nlc3MuY3dkKCkKICAgIH0KICAgIGlmIChleGlzdHMoam9pbihkaXIsICdwYWNrYWdlLmpzb24nKSkgfHwgZXhpc3RzKGpvaW4oZGlyLCAnbm9kZV9tb2R1bGVzJykpKSB7CiAgICAgIC8vIEZvdW5kIHRoZSAncGFja2FnZS5qc29uJyBmaWxlIG9yICdub2RlX21vZHVsZXMnIGRpcjsgd2UncmUgZG9uZQogICAgICByZXR1cm4gZGlyCiAgICB9CiAgICBpZiAocHJldiA9PT0gZGlyKSB7CiAgICAgIC8vIEdvdCB0byB0aGUgdG9wCiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgbW9kdWxlIHJvb3QgZ2l2ZW4gZmlsZTogIicgKyBmaWxlCiAgICAgICAgICAgICAgICAgICAgKyAnIi4gRG8geW91IGhhdmUgYSBgcGFja2FnZS5qc29uYCBmaWxlPyAnKQogICAgfQogICAgLy8gVHJ5IHRoZSBwYXJlbnQgZGlyIG5leHQKICAgIHByZXYgPSBkaXIKICAgIGRpciA9IGpvaW4oZGlyLCAnLi4nKQogIH0KfQoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsICIvaW5kZXguanMiKSkKCi8qKiovIH0pLAovKiAxMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpewogIHRyeSB7CiAgICByZXR1cm4gISFleGVjKCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB0cnVlOwogIH0KfTsKCi8qKiovIH0pLAovKiAxMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOAp2YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGgKICA/IHdpbmRvdyA6IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHNlbGYuTWF0aCA9PSBNYXRoID8gc2VsZiA6IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7CmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmCgovKioqLyB9KSwKLyogMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMykKICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCkKICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCkKICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5OwoKZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpewogIGFuT2JqZWN0KE8pOwogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKICBhbk9iamVjdChBdHRyaWJ1dGVzKTsKICBpZihJRThfRE9NX0RFRklORSl0cnkgewogICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsKICBpZigndmFsdWUnIGluIEF0dHJpYnV0ZXMpT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7CiAgcmV0dXJuIE87Cn07CgovKioqLyB9KSwKLyogMTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKLyoqCiAqIEFuIGF1dG8gaW5jcmVtZW50aW5nIGlkIHdoaWNoIHdlIGNhbiB1c2UgdG8gY3JlYXRlICJ1bmlxdWUiIFVsdHJvbiBpbnN0YW5jZXMKICogc28gd2UgY2FuIHRyYWNrIHRoZSBldmVudCBlbWl0dGVycyB0aGF0IGFyZSBhZGRlZCB0aHJvdWdoIHRoZSBVbHRyb24KICogaW50ZXJmYWNlLgogKgogKiBAdHlwZSB7TnVtYmVyfQogKiBAcHJpdmF0ZQogKi8KdmFyIGlkID0gMDsKCi8qKgogKiBVbHRyb24gaXMgaGlnaC1pbnRlbGxpZ2VuY2Ugcm9ib3QuIEl0IGdhdGhlcnMgaW50ZWxsaWdlbmNlIHNvIGl0IGNhbiBzdGFydCBpbXByb3ZpbmcKICogdXBvbiBoaXMgcnVkaW1lbnRhcnkgZGVzaWduLiBJdCB3aWxsIGxlYXJuIGZyb20geW91ciBFdmVudEVtaXR0aW5nIHBhdHRlcm5zCiAqIGFuZCBleHRlcm1pbmF0ZSB0aGVtLgogKgogKiBAY29uc3RydWN0b3IKICogQHBhcmFtIHtFdmVudEVtaXR0ZXJ9IGVlIEV2ZW50RW1pdHRlciBpbnN0YW5jZSB3ZSBuZWVkIHRvIHdyYXAuCiAqIEBhcGkgcHVibGljCiAqLwpmdW5jdGlvbiBVbHRyb24oZWUpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVWx0cm9uKSkgcmV0dXJuIG5ldyBVbHRyb24oZWUpOwoKICB0aGlzLmlkID0gaWQrKzsKICB0aGlzLmVlID0gZWU7Cn0KCi8qKgogKiBSZWdpc3RlciBhIG5ldyBFdmVudExpc3RlbmVyIGZvciB0aGUgZ2l2ZW4gZXZlbnQuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBOYW1lIG9mIHRoZSBldmVudC4KICogQHBhcmFtIHtGdW5jdG9ufSBmbiBDYWxsYmFjayBmdW5jdGlvbi4KICogQHBhcmFtIHtNaXhlZH0gY29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uCiAqIEByZXR1cm5zIHtVbHRyb259CiAqIEBhcGkgcHVibGljCiAqLwpVbHRyb24ucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24oZXZlbnQsIGZuLCBjb250ZXh0KSB7CiAgZm4uX191bHRyb24gPSB0aGlzLmlkOwogIHRoaXMuZWUub24oZXZlbnQsIGZuLCBjb250ZXh0KTsKCiAgcmV0dXJuIHRoaXM7Cn07Ci8qKgogKiBBZGQgYW4gRXZlbnRMaXN0ZW5lciB0aGF0J3Mgb25seSBjYWxsZWQgb25jZS4KICoKICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IE5hbWUgb2YgdGhlIGV2ZW50LgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBDYWxsYmFjayBmdW5jdGlvbi4KICogQHBhcmFtIHtNaXhlZH0gY29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgZnVuY3Rpb24uCiAqIEByZXR1cm5zIHtVbHRyb259CiAqIEBhcGkgcHVibGljCiAqLwpVbHRyb24ucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKGV2ZW50LCBmbiwgY29udGV4dCkgewogIGZuLl9fdWx0cm9uID0gdGhpcy5pZDsKICB0aGlzLmVlLm9uY2UoZXZlbnQsIGZuLCBjb250ZXh0KTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICogUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgd2UgYXNzaWduZWQgZm9yIHRoZSBnaXZlbiBldmVudC4KICoKICogQHJldHVybnMge1VsdHJvbn0KICogQGFwaSBwdWJsaWMKICovClVsdHJvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkgewogIHZhciBhcmdzID0gYXJndW1lbnRzCiAgICAsIGVlID0gdGhpcy5lZQogICAgLCBldmVudDsKCiAgLy8KICAvLyBXaGVuIG5vIGV2ZW50IG5hbWVzIGFyZSBwcm92aWRlZCB3ZSBhc3N1bWUgdGhhdCB3ZSBuZWVkIHRvIGNsZWFyIGFsbCB0aGUKICAvLyBldmVudHMgdGhhdCB3ZXJlIGFzc2lnbmVkIHRocm91Z2ggdXMuCiAgLy8KICBpZiAoYXJncy5sZW5ndGggPT09IDEgJiYgJ3N0cmluZycgPT09IHR5cGVvZiBhcmdzWzBdKSB7CiAgICBhcmdzID0gYXJnc1swXS5zcGxpdCgvWywgXSsvKTsKICB9IGVsc2UgaWYgKCFhcmdzLmxlbmd0aCkgewogICAgaWYgKGVlLmV2ZW50TmFtZXMpIHsKICAgICAgYXJncyA9IGVlLmV2ZW50TmFtZXMoKTsKICAgIH0gZWxzZSBpZiAoZWUuX2V2ZW50cykgewogICAgICBhcmdzID0gW107CgogICAgICBmb3IgKGV2ZW50IGluIGVlLl9ldmVudHMpIHsKICAgICAgICBpZiAoaGFzLmNhbGwoZWUuX2V2ZW50cywgZXZlbnQpKSBhcmdzLnB1c2goZXZlbnQpOwogICAgICB9CgogICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgICAgIGFyZ3MgPSBhcmdzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGVlLl9ldmVudHMpKTsKICAgICAgfQogICAgfQogIH0KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgbGlzdGVuZXJzID0gZWUubGlzdGVuZXJzKGFyZ3NbaV0pOwoKICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGlzdGVuZXJzLmxlbmd0aDsgaisrKSB7CiAgICAgIGV2ZW50ID0gbGlzdGVuZXJzW2pdOwoKICAgICAgLy8KICAgICAgLy8gT25jZSBsaXN0ZW5lcnMgaGF2ZSBhIGBsaXN0ZW5lcmAgcHJvcGVydHkgdGhhdCBzdG9yZXMgdGhlIHJlYWwgbGlzdGVuZXIKICAgICAgLy8gaW4gdGhlIEV2ZW50RW1pdHRlciB0aGF0IHNoaXBzIHdpdGggTm9kZS5qcy4KICAgICAgLy8KICAgICAgaWYgKGV2ZW50Lmxpc3RlbmVyKSB7CiAgICAgICAgaWYgKGV2ZW50Lmxpc3RlbmVyLl9fdWx0cm9uICE9PSB0aGlzLmlkKSBjb250aW51ZTsKICAgICAgICBkZWxldGUgZXZlbnQubGlzdGVuZXIuX191bHRyb247CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGV2ZW50Ll9fdWx0cm9uICE9PSB0aGlzLmlkKSBjb250aW51ZTsKICAgICAgICBkZWxldGUgZXZlbnQuX191bHRyb247CiAgICAgIH0KCiAgICAgIGVlLnJlbW92ZUxpc3RlbmVyKGFyZ3NbaV0sIGV2ZW50KTsKICAgIH0KICB9CgogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAqIERlc3Ryb3kgdGhlIFVsdHJvbiBpbnN0YW5jZSwgcmVtb3ZlIGFsbCBsaXN0ZW5lcnMgYW5kIHJlbGVhc2UgYWxsIHJlZmVyZW5jZXMuCiAqCiAqIEByZXR1cm5zIHtCb29sZWFufQogKiBAYXBpIHB1YmxpYwogKi8KVWx0cm9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gZGVzdHJveSgpIHsKICBpZiAoIXRoaXMuZWUpIHJldHVybiBmYWxzZTsKCiAgdGhpcy5yZW1vdmUoKTsKICB0aGlzLmVlID0gbnVsbDsKCiAgcmV0dXJuIHRydWU7Cn07CgovLwovLyBFeHBvc2UgdGhlIG1vZHVsZS4KLy8KbW9kdWxlLmV4cG9ydHMgPSBVbHRyb247CgoKLyoqKi8gfSksCi8qIDE0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKLyohCiAqIHdzOiBhIG5vZGUuanMgd2Vic29ja2V0IGNsaWVudAogKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT4KICogTUlUIExpY2Vuc2VkCiAqLwoKCgptb2R1bGUuZXhwb3J0cyA9IHsKICBpc1ZhbGlkRXJyb3JDb2RlOiBmdW5jdGlvbiAoY29kZSkgewogICAgcmV0dXJuIChjb2RlID49IDEwMDAgJiYgY29kZSA8PSAxMDEzICYmIGNvZGUgIT09IDEwMDQgJiYgY29kZSAhPT0gMTAwNSAmJiBjb2RlICE9PSAxMDA2KSB8fAogICAgICAoY29kZSA+PSAzMDAwICYmIGNvZGUgPD0gNDk5OSk7CiAgfSwKICAxMDAwOiAnbm9ybWFsJywKICAxMDAxOiAnZ29pbmcgYXdheScsCiAgMTAwMjogJ3Byb3RvY29sIGVycm9yJywKICAxMDAzOiAndW5zdXBwb3J0ZWQgZGF0YScsCiAgMTAwNDogJ3Jlc2VydmVkJywKICAxMDA1OiAncmVzZXJ2ZWQgZm9yIGV4dGVuc2lvbnMnLAogIDEwMDY6ICdyZXNlcnZlZCBmb3IgZXh0ZW5zaW9ucycsCiAgMTAwNzogJ2luY29uc2lzdGVudCBvciBpbnZhbGlkIGRhdGEnLAogIDEwMDg6ICdwb2xpY3kgdmlvbGF0aW9uJywKICAxMDA5OiAnbWVzc2FnZSB0b28gYmlnJywKICAxMDEwOiAnZXh0ZW5zaW9uIGhhbmRzaGFrZSBtaXNzaW5nJywKICAxMDExOiAnYW4gdW5leHBlY3RlZCBjb25kaXRpb24gcHJldmVudGVkIHRoZSByZXF1ZXN0IGZyb20gYmVpbmcgZnVsZmlsbGVkJywKICAxMDEyOiAnc2VydmljZSByZXN0YXJ0JywKICAxMDEzOiAndHJ5IGFnYWluIGxhdGVyJwp9OwoKCi8qKiovIH0pLAovKiAxNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKLyoqCiAqIFBhcnNlIHRoZSBgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zYCBoZWFkZXIgaW50byBhbiBvYmplY3QuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBmaWVsZCB2YWx1ZSBvZiB0aGUgaGVhZGVyCiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHBhcnNlZCBvYmplY3QKICogQHB1YmxpYwogKi8KY29uc3QgcGFyc2UgPSAodmFsdWUpID0+IHsKICB2YWx1ZSA9IHZhbHVlIHx8ICcnOwoKICBjb25zdCBleHRlbnNpb25zID0ge307CgogIHZhbHVlLnNwbGl0KCcsJykuZm9yRWFjaCgodikgPT4gewogICAgY29uc3QgcGFyYW1zID0gdi5zcGxpdCgnOycpOwogICAgY29uc3QgdG9rZW4gPSBwYXJhbXMuc2hpZnQoKS50cmltKCk7CiAgICBjb25zdCBwYXJhbXNMaXN0ID0gZXh0ZW5zaW9uc1t0b2tlbl0gPSBleHRlbnNpb25zW3Rva2VuXSB8fCBbXTsKICAgIGNvbnN0IHBhcnNlZFBhcmFtcyA9IHt9OwoKICAgIHBhcmFtcy5mb3JFYWNoKChwYXJhbSkgPT4gewogICAgICBjb25zdCBwYXJ0cyA9IHBhcmFtLnRyaW0oKS5zcGxpdCgnPScpOwogICAgICBjb25zdCBrZXkgPSBwYXJ0c1swXTsKICAgICAgdmFyIHZhbHVlID0gcGFydHNbMV07CgogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHZhbHVlID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB1bnF1b3RlIHZhbHVlCiAgICAgICAgaWYgKHZhbHVlWzBdID09PSAnIicpIHsKICAgICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7CiAgICAgICAgfQogICAgICAgIGlmICh2YWx1ZVt2YWx1ZS5sZW5ndGggLSAxXSA9PT0gJyInKSB7CiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIHZhbHVlLmxlbmd0aCAtIDEpOwogICAgICAgIH0KICAgICAgfQogICAgICAocGFyc2VkUGFyYW1zW2tleV0gPSBwYXJzZWRQYXJhbXNba2V5XSB8fCBbXSkucHVzaCh2YWx1ZSk7CiAgICB9KTsKCiAgICBwYXJhbXNMaXN0LnB1c2gocGFyc2VkUGFyYW1zKTsKICB9KTsKCiAgcmV0dXJuIGV4dGVuc2lvbnM7Cn07CgovKioKICogU2VyaWFsaXplIGEgcGFyc2VkIGBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnNgIGhlYWRlciB0byBhIHN0cmluZy4KICoKICogQHBhcmFtIHtPYmplY3R9IHZhbHVlIFRoZSBvYmplY3QgdG8gZm9ybWF0CiAqIEByZXR1cm4ge1N0cmluZ30gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBnaXZlbiB2YWx1ZQogKiBAcHVibGljCiAqLwpjb25zdCBmb3JtYXQgPSAodmFsdWUpID0+IHsKICByZXR1cm4gT2JqZWN0LmtleXModmFsdWUpLm1hcCgodG9rZW4pID0+IHsKICAgIHZhciBwYXJhbXNMaXN0ID0gdmFsdWVbdG9rZW5dOwogICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtc0xpc3QpKSBwYXJhbXNMaXN0ID0gW3BhcmFtc0xpc3RdOwogICAgcmV0dXJuIHBhcmFtc0xpc3QubWFwKChwYXJhbXMpID0+IHsKICAgICAgcmV0dXJuIFt0b2tlbl0uY29uY2F0KE9iamVjdC5rZXlzKHBhcmFtcykubWFwKChrKSA9PiB7CiAgICAgICAgdmFyIHAgPSBwYXJhbXNba107CiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHApKSBwID0gW3BdOwogICAgICAgIHJldHVybiBwLm1hcCgodikgPT4gdiA9PT0gdHJ1ZSA/IGsgOiBgJHtrfT0ke3Z9YCkuam9pbignOyAnKTsKICAgICAgfSkpLmpvaW4oJzsgJyk7CiAgICB9KS5qb2luKCcsICcpOwogIH0pLmpvaW4oJywgJyk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IHsgZm9ybWF0LCBwYXJzZSB9OwoKCi8qKiovIH0pLAovKiAxNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8qIQogKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnQKICogQ29weXJpZ2h0KGMpIDIwMTEgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+CiAqIE1JVCBMaWNlbnNlZAogKi8KCgoKY29uc3Qgc2FmZUJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgpjb25zdCBQZXJNZXNzYWdlRGVmbGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7CmNvbnN0IGlzVmFsaWRVVEY4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7CmNvbnN0IGJ1ZmZlclV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwpjb25zdCBFcnJvckNvZGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7CmNvbnN0IGNvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7Cgpjb25zdCBCdWZmZXIgPSBzYWZlQnVmZmVyLkJ1ZmZlcjsKCmNvbnN0IEdFVF9JTkZPID0gMDsKY29uc3QgR0VUX1BBWUxPQURfTEVOR1RIXzE2ID0gMTsKY29uc3QgR0VUX1BBWUxPQURfTEVOR1RIXzY0ID0gMjsKY29uc3QgR0VUX01BU0sgPSAzOwpjb25zdCBHRVRfREFUQSA9IDQ7CmNvbnN0IElORkxBVElORyA9IDU7CgovKioKICogSHlCaSBSZWNlaXZlciBpbXBsZW1lbnRhdGlvbi4KICovCmNsYXNzIFJlY2VpdmVyIHsKICAvKioKICAgKiBDcmVhdGVzIGEgUmVjZWl2ZXIgaW5zdGFuY2UuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5zaW9ucyBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgbmVnb3RpYXRlZCBleHRlbnNpb25zCiAgICogQHBhcmFtIHtOdW1iZXJ9IG1heFBheWxvYWQgVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlIGxlbmd0aAogICAqIEBwYXJhbSB7U3RyaW5nfSBiaW5hcnlUeXBlIFRoZSB0eXBlIGZvciBiaW5hcnkgZGF0YQogICAqLwogIGNvbnN0cnVjdG9yIChleHRlbnNpb25zLCBtYXhQYXlsb2FkLCBiaW5hcnlUeXBlKSB7CiAgICB0aGlzLmJpbmFyeVR5cGUgPSBiaW5hcnlUeXBlIHx8IGNvbnN0YW50cy5CSU5BUllfVFlQRVNbMF07CiAgICB0aGlzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zIHx8IHt9OwogICAgdGhpcy5tYXhQYXlsb2FkID0gbWF4UGF5bG9hZCB8IDA7CgogICAgdGhpcy5idWZmZXJlZEJ5dGVzID0gMDsKICAgIHRoaXMuYnVmZmVycyA9IFtdOwoKICAgIHRoaXMuY29tcHJlc3NlZCA9IGZhbHNlOwogICAgdGhpcy5wYXlsb2FkTGVuZ3RoID0gMDsKICAgIHRoaXMuZnJhZ21lbnRlZCA9IDA7CiAgICB0aGlzLm1hc2tlZCA9IGZhbHNlOwogICAgdGhpcy5maW4gPSBmYWxzZTsKICAgIHRoaXMubWFzayA9IG51bGw7CiAgICB0aGlzLm9wY29kZSA9IDA7CgogICAgdGhpcy50b3RhbFBheWxvYWRMZW5ndGggPSAwOwogICAgdGhpcy5tZXNzYWdlTGVuZ3RoID0gMDsKICAgIHRoaXMuZnJhZ21lbnRzID0gW107CgogICAgdGhpcy5jbGVhbnVwQ2FsbGJhY2sgPSBudWxsOwogICAgdGhpcy5oYWRFcnJvciA9IGZhbHNlOwogICAgdGhpcy5kZWFkID0gZmFsc2U7CiAgICB0aGlzLmxvb3AgPSBmYWxzZTsKCiAgICB0aGlzLm9ubWVzc2FnZSA9IG51bGw7CiAgICB0aGlzLm9uY2xvc2UgPSBudWxsOwogICAgdGhpcy5vbmVycm9yID0gbnVsbDsKICAgIHRoaXMub25waW5nID0gbnVsbDsKICAgIHRoaXMub25wb25nID0gbnVsbDsKCiAgICB0aGlzLnN0YXRlID0gR0VUX0lORk87CiAgfQoKICAvKioKICAgKiBDb25zdW1lcyBieXRlcyBmcm9tIHRoZSBhdmFpbGFibGUgYnVmZmVyZWQgZGF0YS4KICAgKgogICAqIEBwYXJhbSB7TnVtYmVyfSBieXRlcyBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIGNvbnN1bWUKICAgKiBAcmV0dXJuIHtCdWZmZXJ9IENvbnN1bWVkIGJ5dGVzCiAgICogQHByaXZhdGUKICAgKi8KICByZWFkQnVmZmVyIChieXRlcykgewogICAgdmFyIG9mZnNldCA9IDA7CiAgICB2YXIgZHN0OwogICAgdmFyIGw7CgogICAgdGhpcy5idWZmZXJlZEJ5dGVzIC09IGJ5dGVzOwoKICAgIGlmIChieXRlcyA9PT0gdGhpcy5idWZmZXJzWzBdLmxlbmd0aCkgcmV0dXJuIHRoaXMuYnVmZmVycy5zaGlmdCgpOwoKICAgIGlmIChieXRlcyA8IHRoaXMuYnVmZmVyc1swXS5sZW5ndGgpIHsKICAgICAgZHN0ID0gdGhpcy5idWZmZXJzWzBdLnNsaWNlKDAsIGJ5dGVzKTsKICAgICAgdGhpcy5idWZmZXJzWzBdID0gdGhpcy5idWZmZXJzWzBdLnNsaWNlKGJ5dGVzKTsKICAgICAgcmV0dXJuIGRzdDsKICAgIH0KCiAgICBkc3QgPSBCdWZmZXIuYWxsb2NVbnNhZmUoYnl0ZXMpOwoKICAgIHdoaWxlIChieXRlcyA+IDApIHsKICAgICAgbCA9IHRoaXMuYnVmZmVyc1swXS5sZW5ndGg7CgogICAgICBpZiAoYnl0ZXMgPj0gbCkgewogICAgICAgIHRoaXMuYnVmZmVyc1swXS5jb3B5KGRzdCwgb2Zmc2V0KTsKICAgICAgICBvZmZzZXQgKz0gbDsKICAgICAgICB0aGlzLmJ1ZmZlcnMuc2hpZnQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmJ1ZmZlcnNbMF0uY29weShkc3QsIG9mZnNldCwgMCwgYnl0ZXMpOwogICAgICAgIHRoaXMuYnVmZmVyc1swXSA9IHRoaXMuYnVmZmVyc1swXS5zbGljZShieXRlcyk7CiAgICAgIH0KCiAgICAgIGJ5dGVzIC09IGw7CiAgICB9CgogICAgcmV0dXJuIGRzdDsKICB9CgogIC8qKgogICAqIENoZWNrcyBpZiB0aGUgbnVtYmVyIG9mIGJ1ZmZlcmVkIGJ5dGVzIGlzIGJpZ2dlciBvciBlcXVhbCB0aGFuIGBuYCBhbmQKICAgKiBjYWxscyBgY2xlYW51cGAgaWYgbmVjZXNzYXJ5LgogICAqCiAgICogQHBhcmFtIHtOdW1iZXJ9IG4gVGhlIG51bWJlciBvZiBieXRlcyB0byBjaGVjayBhZ2FpbnN0CiAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIGBidWZmZXJlZEJ5dGVzID49IG5gLCBlbHNlIGBmYWxzZWAKICAgKiBAcHJpdmF0ZQogICAqLwogIGhhc0J1ZmZlcmVkQnl0ZXMgKG4pIHsKICAgIGlmICh0aGlzLmJ1ZmZlcmVkQnl0ZXMgPj0gbikgcmV0dXJuIHRydWU7CgogICAgdGhpcy5sb29wID0gZmFsc2U7CiAgICBpZiAodGhpcy5kZWFkKSB0aGlzLmNsZWFudXAodGhpcy5jbGVhbnVwQ2FsbGJhY2spOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLyoqCiAgICogQWRkcyBuZXcgZGF0YSB0byB0aGUgcGFyc2VyLgogICAqCiAgICogQHB1YmxpYwogICAqLwogIGFkZCAoZGF0YSkgewogICAgaWYgKHRoaXMuZGVhZCkgcmV0dXJuOwoKICAgIHRoaXMuYnVmZmVyZWRCeXRlcyArPSBkYXRhLmxlbmd0aDsKICAgIHRoaXMuYnVmZmVycy5wdXNoKGRhdGEpOwogICAgdGhpcy5zdGFydExvb3AoKTsKICB9CgogIC8qKgogICAqIFN0YXJ0cyB0aGUgcGFyc2luZyBsb29wLgogICAqCiAgICogQHByaXZhdGUKICAgKi8KICBzdGFydExvb3AgKCkgewogICAgdGhpcy5sb29wID0gdHJ1ZTsKCiAgICB3aGlsZSAodGhpcy5sb29wKSB7CiAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkgewogICAgICAgIGNhc2UgR0VUX0lORk86CiAgICAgICAgICB0aGlzLmdldEluZm8oKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgR0VUX1BBWUxPQURfTEVOR1RIXzE2OgogICAgICAgICAgdGhpcy5nZXRQYXlsb2FkTGVuZ3RoMTYoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgR0VUX1BBWUxPQURfTEVOR1RIXzY0OgogICAgICAgICAgdGhpcy5nZXRQYXlsb2FkTGVuZ3RoNjQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgR0VUX01BU0s6CiAgICAgICAgICB0aGlzLmdldE1hc2soKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgR0VUX0RBVEE6CiAgICAgICAgICB0aGlzLmdldERhdGEoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6IC8vIGBJTkZMQVRJTkdgCiAgICAgICAgICB0aGlzLmxvb3AgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogUmVhZHMgdGhlIGZpcnN0IHR3byBieXRlcyBvZiBhIGZyYW1lLgogICAqCiAgICogQHByaXZhdGUKICAgKi8KICBnZXRJbmZvICgpIHsKICAgIGlmICghdGhpcy5oYXNCdWZmZXJlZEJ5dGVzKDIpKSByZXR1cm47CgogICAgY29uc3QgYnVmID0gdGhpcy5yZWFkQnVmZmVyKDIpOwoKICAgIGlmICgoYnVmWzBdICYgMHgzMCkgIT09IDB4MDApIHsKICAgICAgdGhpcy5lcnJvcihuZXcgRXJyb3IoJ1JTVjIgYW5kIFJTVjMgbXVzdCBiZSBjbGVhcicpLCAxMDAyKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGNvbXByZXNzZWQgPSAoYnVmWzBdICYgMHg0MCkgPT09IDB4NDA7CgogICAgaWYgKGNvbXByZXNzZWQgJiYgIXRoaXMuZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkgewogICAgICB0aGlzLmVycm9yKG5ldyBFcnJvcignUlNWMSBtdXN0IGJlIGNsZWFyJyksIDEwMDIpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5maW4gPSAoYnVmWzBdICYgMHg4MCkgPT09IDB4ODA7CiAgICB0aGlzLm9wY29kZSA9IGJ1ZlswXSAmIDB4MGY7CiAgICB0aGlzLnBheWxvYWRMZW5ndGggPSBidWZbMV0gJiAweDdmOwoKICAgIGlmICh0aGlzLm9wY29kZSA9PT0gMHgwMCkgewogICAgICBpZiAoY29tcHJlc3NlZCkgewogICAgICAgIHRoaXMuZXJyb3IobmV3IEVycm9yKCdSU1YxIG11c3QgYmUgY2xlYXInKSwgMTAwMik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZnJhZ21lbnRlZCkgewogICAgICAgIHRoaXMuZXJyb3IobmV3IEVycm9yKGBpbnZhbGlkIG9wY29kZTogJHt0aGlzLm9wY29kZX1gKSwgMTAwMik7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub3Bjb2RlID0gdGhpcy5mcmFnbWVudGVkOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHRoaXMub3Bjb2RlID09PSAweDAxIHx8IHRoaXMub3Bjb2RlID09PSAweDAyKSB7CiAgICAgIGlmICh0aGlzLmZyYWdtZW50ZWQpIHsKICAgICAgICB0aGlzLmVycm9yKG5ldyBFcnJvcihgaW52YWxpZCBvcGNvZGU6ICR7dGhpcy5vcGNvZGV9YCksIDEwMDIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jb21wcmVzc2VkID0gY29tcHJlc3NlZDsKICAgIH0gZWxzZSBpZiAodGhpcy5vcGNvZGUgPiAweDA3ICYmIHRoaXMub3Bjb2RlIDwgMHgwYikgewogICAgICBpZiAoIXRoaXMuZmluKSB7CiAgICAgICAgdGhpcy5lcnJvcihuZXcgRXJyb3IoJ0ZJTiBtdXN0IGJlIHNldCcpLCAxMDAyKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChjb21wcmVzc2VkKSB7CiAgICAgICAgdGhpcy5lcnJvcihuZXcgRXJyb3IoJ1JTVjEgbXVzdCBiZSBjbGVhcicpLCAxMDAyKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnBheWxvYWRMZW5ndGggPiAweDdkKSB7CiAgICAgICAgdGhpcy5lcnJvcihuZXcgRXJyb3IoJ2ludmFsaWQgcGF5bG9hZCBsZW5ndGgnKSwgMTAwMik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmVycm9yKG5ldyBFcnJvcihgaW52YWxpZCBvcGNvZGU6ICR7dGhpcy5vcGNvZGV9YCksIDEwMDIpOwogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKCF0aGlzLmZpbiAmJiAhdGhpcy5mcmFnbWVudGVkKSB0aGlzLmZyYWdtZW50ZWQgPSB0aGlzLm9wY29kZTsKCiAgICB0aGlzLm1hc2tlZCA9IChidWZbMV0gJiAweDgwKSA9PT0gMHg4MDsKCiAgICBpZiAodGhpcy5wYXlsb2FkTGVuZ3RoID09PSAxMjYpIHRoaXMuc3RhdGUgPSBHRVRfUEFZTE9BRF9MRU5HVEhfMTY7CiAgICBlbHNlIGlmICh0aGlzLnBheWxvYWRMZW5ndGggPT09IDEyNykgdGhpcy5zdGF0ZSA9IEdFVF9QQVlMT0FEX0xFTkdUSF82NDsKICAgIGVsc2UgdGhpcy5oYXZlTGVuZ3RoKCk7CiAgfQoKICAvKioKICAgKiBHZXRzIGV4dGVuZGVkIHBheWxvYWQgbGVuZ3RoICg3KzE2KS4KICAgKgogICAqIEBwcml2YXRlCiAgICovCiAgZ2V0UGF5bG9hZExlbmd0aDE2ICgpIHsKICAgIGlmICghdGhpcy5oYXNCdWZmZXJlZEJ5dGVzKDIpKSByZXR1cm47CgogICAgdGhpcy5wYXlsb2FkTGVuZ3RoID0gdGhpcy5yZWFkQnVmZmVyKDIpLnJlYWRVSW50MTZCRSgwLCB0cnVlKTsKICAgIHRoaXMuaGF2ZUxlbmd0aCgpOwogIH0KCiAgLyoqCiAgICogR2V0cyBleHRlbmRlZCBwYXlsb2FkIGxlbmd0aCAoNys2NCkuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqLwogIGdldFBheWxvYWRMZW5ndGg2NCAoKSB7CiAgICBpZiAoIXRoaXMuaGFzQnVmZmVyZWRCeXRlcyg4KSkgcmV0dXJuOwoKICAgIGNvbnN0IGJ1ZiA9IHRoaXMucmVhZEJ1ZmZlcig4KTsKICAgIGNvbnN0IG51bSA9IGJ1Zi5yZWFkVUludDMyQkUoMCwgdHJ1ZSk7CgogICAgLy8KICAgIC8vIFRoZSBtYXhpbXVtIHNhZmUgaW50ZWdlciBpbiBKYXZhU2NyaXB0IGlzIDJeNTMgLSAxLiBBbiBlcnJvciBpcyByZXR1cm5lZAogICAgLy8gaWYgcGF5bG9hZCBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIHRoaXMgbnVtYmVyLgogICAgLy8KICAgIGlmIChudW0gPiBNYXRoLnBvdygyLCA1MyAtIDMyKSAtIDEpIHsKICAgICAgdGhpcy5lcnJvcihuZXcgRXJyb3IoJ21heCBwYXlsb2FkIHNpemUgZXhjZWVkZWQnKSwgMTAwOSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLnBheWxvYWRMZW5ndGggPSAobnVtICogTWF0aC5wb3coMiwgMzIpKSArIGJ1Zi5yZWFkVUludDMyQkUoNCwgdHJ1ZSk7CiAgICB0aGlzLmhhdmVMZW5ndGgoKTsKICB9CgogIC8qKgogICAqIFBheWxvYWQgbGVuZ3RoIGhhcyBiZWVuIHJlYWQuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqLwogIGhhdmVMZW5ndGggKCkgewogICAgaWYgKHRoaXMub3Bjb2RlIDwgMHgwOCAmJiB0aGlzLm1heFBheWxvYWRFeGNlZWRlZCh0aGlzLnBheWxvYWRMZW5ndGgpKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAodGhpcy5tYXNrZWQpIHRoaXMuc3RhdGUgPSBHRVRfTUFTSzsKICAgIGVsc2UgdGhpcy5zdGF0ZSA9IEdFVF9EQVRBOwogIH0KCiAgLyoqCiAgICogUmVhZHMgbWFzayBieXRlcy4KICAgKgogICAqIEBwcml2YXRlCiAgICovCiAgZ2V0TWFzayAoKSB7CiAgICBpZiAoIXRoaXMuaGFzQnVmZmVyZWRCeXRlcyg0KSkgcmV0dXJuOwoKICAgIHRoaXMubWFzayA9IHRoaXMucmVhZEJ1ZmZlcig0KTsKICAgIHRoaXMuc3RhdGUgPSBHRVRfREFUQTsKICB9CgogIC8qKgogICAqIFJlYWRzIGRhdGEgYnl0ZXMuCiAgICoKICAgKiBAcHJpdmF0ZQogICAqLwogIGdldERhdGEgKCkgewogICAgdmFyIGRhdGEgPSBjb25zdGFudHMuRU1QVFlfQlVGRkVSOwoKICAgIGlmICh0aGlzLnBheWxvYWRMZW5ndGgpIHsKICAgICAgaWYgKCF0aGlzLmhhc0J1ZmZlcmVkQnl0ZXModGhpcy5wYXlsb2FkTGVuZ3RoKSkgcmV0dXJuOwoKICAgICAgZGF0YSA9IHRoaXMucmVhZEJ1ZmZlcih0aGlzLnBheWxvYWRMZW5ndGgpOwogICAgICBpZiAodGhpcy5tYXNrZWQpIGJ1ZmZlclV0aWwudW5tYXNrKGRhdGEsIHRoaXMubWFzayk7CiAgICB9CgogICAgaWYgKHRoaXMub3Bjb2RlID4gMHgwNykgewogICAgICB0aGlzLmNvbnRyb2xNZXNzYWdlKGRhdGEpOwogICAgfSBlbHNlIGlmICh0aGlzLmNvbXByZXNzZWQpIHsKICAgICAgdGhpcy5zdGF0ZSA9IElORkxBVElORzsKICAgICAgdGhpcy5kZWNvbXByZXNzKGRhdGEpOwogICAgfSBlbHNlIGlmICh0aGlzLnB1c2hGcmFnbWVudChkYXRhKSkgewogICAgICB0aGlzLmRhdGFNZXNzYWdlKCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBEZWNvbXByZXNzZXMgZGF0YS4KICAgKgogICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIENvbXByZXNzZWQgZGF0YQogICAqIEBwcml2YXRlCiAgICovCiAgZGVjb21wcmVzcyAoZGF0YSkgewogICAgY29uc3QgZXh0ZW5zaW9uID0gdGhpcy5leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdOwoKICAgIGV4dGVuc2lvbi5kZWNvbXByZXNzKGRhdGEsIHRoaXMuZmluLCAoZXJyLCBidWYpID0+IHsKICAgICAgaWYgKGVycikgewogICAgICAgIHRoaXMuZXJyb3IoZXJyLCBlcnIuY2xvc2VDb2RlID09PSAxMDA5ID8gMTAwOSA6IDEwMDcpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucHVzaEZyYWdtZW50KGJ1ZikpIHRoaXMuZGF0YU1lc3NhZ2UoKTsKICAgICAgdGhpcy5zdGFydExvb3AoKTsKICAgIH0pOwogIH0KCiAgLyoqCiAgICogSGFuZGxlcyBhIGRhdGEgbWVzc2FnZS4KICAgKgogICAqIEBwcml2YXRlCiAgICovCiAgZGF0YU1lc3NhZ2UgKCkgewogICAgaWYgKHRoaXMuZmluKSB7CiAgICAgIGNvbnN0IG1lc3NhZ2VMZW5ndGggPSB0aGlzLm1lc3NhZ2VMZW5ndGg7CiAgICAgIGNvbnN0IGZyYWdtZW50cyA9IHRoaXMuZnJhZ21lbnRzOwoKICAgICAgdGhpcy50b3RhbFBheWxvYWRMZW5ndGggPSAwOwogICAgICB0aGlzLm1lc3NhZ2VMZW5ndGggPSAwOwogICAgICB0aGlzLmZyYWdtZW50ZWQgPSAwOwogICAgICB0aGlzLmZyYWdtZW50cyA9IFtdOwoKICAgICAgaWYgKHRoaXMub3Bjb2RlID09PSAyKSB7CiAgICAgICAgdmFyIGRhdGE7CgogICAgICAgIGlmICh0aGlzLmJpbmFyeVR5cGUgPT09ICdub2RlYnVmZmVyJykgewogICAgICAgICAgZGF0YSA9IHRvQnVmZmVyKGZyYWdtZW50cywgbWVzc2FnZUxlbmd0aCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJpbmFyeVR5cGUgPT09ICdhcnJheWJ1ZmZlcicpIHsKICAgICAgICAgIGRhdGEgPSB0b0FycmF5QnVmZmVyKHRvQnVmZmVyKGZyYWdtZW50cywgbWVzc2FnZUxlbmd0aCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhID0gZnJhZ21lbnRzOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5vbm1lc3NhZ2UoZGF0YSwgeyBtYXNrZWQ6IHRoaXMubWFza2VkLCBiaW5hcnk6IHRydWUgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYnVmID0gdG9CdWZmZXIoZnJhZ21lbnRzLCBtZXNzYWdlTGVuZ3RoKTsKCiAgICAgICAgaWYgKCFpc1ZhbGlkVVRGOChidWYpKSB7CiAgICAgICAgICB0aGlzLmVycm9yKG5ldyBFcnJvcignaW52YWxpZCB1dGY4IHNlcXVlbmNlJyksIDEwMDcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5vbm1lc3NhZ2UoYnVmLnRvU3RyaW5nKCksIHsgbWFza2VkOiB0aGlzLm1hc2tlZCB9KTsKICAgICAgfQogICAgfQoKICAgIHRoaXMuc3RhdGUgPSBHRVRfSU5GTzsKICB9CgogIC8qKgogICAqIEhhbmRsZXMgYSBjb250cm9sIG1lc3NhZ2UuCiAgICoKICAgKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBEYXRhIHRvIGhhbmRsZQogICAqIEBwcml2YXRlCiAgICovCiAgY29udHJvbE1lc3NhZ2UgKGRhdGEpIHsKICAgIGlmICh0aGlzLm9wY29kZSA9PT0gMHgwOCkgewogICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLm9uY2xvc2UoMTAwMCwgJycsIHsgbWFza2VkOiB0aGlzLm1hc2tlZCB9KTsKICAgICAgICB0aGlzLmxvb3AgPSBmYWxzZTsKICAgICAgICB0aGlzLmNsZWFudXAodGhpcy5jbGVhbnVwQ2FsbGJhY2spOwogICAgICB9IGVsc2UgaWYgKGRhdGEubGVuZ3RoID09PSAxKSB7CiAgICAgICAgdGhpcy5lcnJvcihuZXcgRXJyb3IoJ2ludmFsaWQgcGF5bG9hZCBsZW5ndGgnKSwgMTAwMik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgY29kZSA9IGRhdGEucmVhZFVJbnQxNkJFKDAsIHRydWUpOwoKICAgICAgICBpZiAoIUVycm9yQ29kZXMuaXNWYWxpZEVycm9yQ29kZShjb2RlKSkgewogICAgICAgICAgdGhpcy5lcnJvcihuZXcgRXJyb3IoYGludmFsaWQgc3RhdHVzIGNvZGU6ICR7Y29kZX1gKSwgMTAwMik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjb25zdCBidWYgPSBkYXRhLnNsaWNlKDIpOwoKICAgICAgICBpZiAoIWlzVmFsaWRVVEY4KGJ1ZikpIHsKICAgICAgICAgIHRoaXMuZXJyb3IobmV3IEVycm9yKCdpbnZhbGlkIHV0Zjggc2VxdWVuY2UnKSwgMTAwNyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLm9uY2xvc2UoY29kZSwgYnVmLnRvU3RyaW5nKCksIHsgbWFza2VkOiB0aGlzLm1hc2tlZCB9KTsKICAgICAgICB0aGlzLmxvb3AgPSBmYWxzZTsKICAgICAgICB0aGlzLmNsZWFudXAodGhpcy5jbGVhbnVwQ2FsbGJhY2spOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgZmxhZ3MgPSB7IG1hc2tlZDogdGhpcy5tYXNrZWQsIGJpbmFyeTogdHJ1ZSB9OwoKICAgIGlmICh0aGlzLm9wY29kZSA9PT0gMHgwOSkgdGhpcy5vbnBpbmcoZGF0YSwgZmxhZ3MpOwogICAgZWxzZSB0aGlzLm9ucG9uZyhkYXRhLCBmbGFncyk7CgogICAgdGhpcy5zdGF0ZSA9IEdFVF9JTkZPOwogIH0KCiAgLyoqCiAgICogSGFuZGxlcyBhbiBlcnJvci4KICAgKgogICAqIEBwYXJhbSB7RXJyb3J9IGVyciBUaGUgZXJyb3IKICAgKiBAcGFyYW0ge051bWJlcn0gY29kZSBDbG9zZSBjb2RlCiAgICogQHByaXZhdGUKICAgKi8KICBlcnJvciAoZXJyLCBjb2RlKSB7CiAgICB0aGlzLm9uZXJyb3IoZXJyLCBjb2RlKTsKICAgIHRoaXMuaGFkRXJyb3IgPSB0cnVlOwogICAgdGhpcy5sb29wID0gZmFsc2U7CiAgICB0aGlzLmNsZWFudXAodGhpcy5jbGVhbnVwQ2FsbGJhY2spOwogIH0KCiAgLyoqCiAgICogQ2hlY2tzIHBheWxvYWQgc2l6ZSwgZGlzY29ubmVjdHMgc29ja2V0IHdoZW4gaXQgZXhjZWVkcyBgbWF4UGF5bG9hZGAuCiAgICoKICAgKiBAcGFyYW0ge051bWJlcn0gbGVuZ3RoIFBheWxvYWQgbGVuZ3RoCiAgICogQHByaXZhdGUKICAgKi8KICBtYXhQYXlsb2FkRXhjZWVkZWQgKGxlbmd0aCkgewogICAgaWYgKGxlbmd0aCA9PT0gMCB8fCB0aGlzLm1heFBheWxvYWQgPCAxKSByZXR1cm4gZmFsc2U7CgogICAgY29uc3QgZnVsbExlbmd0aCA9IHRoaXMudG90YWxQYXlsb2FkTGVuZ3RoICsgbGVuZ3RoOwoKICAgIGlmIChmdWxsTGVuZ3RoIDw9IHRoaXMubWF4UGF5bG9hZCkgewogICAgICB0aGlzLnRvdGFsUGF5bG9hZExlbmd0aCA9IGZ1bGxMZW5ndGg7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB0aGlzLmVycm9yKG5ldyBFcnJvcignbWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcpLCAxMDA5KTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLyoqCiAgICogQXBwZW5kcyBhIGZyYWdtZW50IGluIHRoZSBmcmFnbWVudHMgYXJyYXkgYWZ0ZXIgY2hlY2tpbmcgdGhhdCB0aGUgc3VtIG9mCiAgICogZnJhZ21lbnQgbGVuZ3RocyBkb2VzIG5vdCBleGNlZWQgYG1heFBheWxvYWRgLgogICAqCiAgICogQHBhcmFtIHtCdWZmZXJ9IGZyYWdtZW50IFRoZSBmcmFnbWVudCB0byBhZGQKICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYG1heFBheWxvYWRgIGlzIG5vdCBleGNlZWRlZCwgZWxzZSBgZmFsc2VgCiAgICogQHByaXZhdGUKICAgKi8KICBwdXNoRnJhZ21lbnQgKGZyYWdtZW50KSB7CiAgICBpZiAoZnJhZ21lbnQubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTsKCiAgICBjb25zdCB0b3RhbExlbmd0aCA9IHRoaXMubWVzc2FnZUxlbmd0aCArIGZyYWdtZW50Lmxlbmd0aDsKCiAgICBpZiAodGhpcy5tYXhQYXlsb2FkIDwgMSB8fCB0b3RhbExlbmd0aCA8PSB0aGlzLm1heFBheWxvYWQpIHsKICAgICAgdGhpcy5tZXNzYWdlTGVuZ3RoID0gdG90YWxMZW5ndGg7CiAgICAgIHRoaXMuZnJhZ21lbnRzLnB1c2goZnJhZ21lbnQpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICB0aGlzLmVycm9yKG5ldyBFcnJvcignbWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcpLCAxMDA5KTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIC8qKgogICAqIFJlbGVhc2VzIHJlc291cmNlcyB1c2VkIGJ5IHRoZSByZWNlaXZlci4KICAgKgogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrCiAgICogQHB1YmxpYwogICAqLwogIGNsZWFudXAgKGNiKSB7CiAgICB0aGlzLmRlYWQgPSB0cnVlOwoKICAgIGlmICghdGhpcy5oYWRFcnJvciAmJiAodGhpcy5sb29wIHx8IHRoaXMuc3RhdGUgPT09IElORkxBVElORykpIHsKICAgICAgdGhpcy5jbGVhbnVwQ2FsbGJhY2sgPSBjYjsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZXh0ZW5zaW9ucyA9IG51bGw7CiAgICAgIHRoaXMuZnJhZ21lbnRzID0gbnVsbDsKICAgICAgdGhpcy5idWZmZXJzID0gbnVsbDsKICAgICAgdGhpcy5tYXNrID0gbnVsbDsKCiAgICAgIHRoaXMuY2xlYW51cENhbGxiYWNrID0gbnVsbDsKICAgICAgdGhpcy5vbm1lc3NhZ2UgPSBudWxsOwogICAgICB0aGlzLm9uY2xvc2UgPSBudWxsOwogICAgICB0aGlzLm9uZXJyb3IgPSBudWxsOwogICAgICB0aGlzLm9ucGluZyA9IG51bGw7CiAgICAgIHRoaXMub25wb25nID0gbnVsbDsKCiAgICAgIGlmIChjYikgY2IoKTsKICAgIH0KICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gUmVjZWl2ZXI7CgovKioKICogTWFrZXMgYSBidWZmZXIgZnJvbSBhIGxpc3Qgb2YgZnJhZ21lbnRzLgogKgogKiBAcGFyYW0ge0J1ZmZlcltdfSBmcmFnbWVudHMgVGhlIGxpc3Qgb2YgZnJhZ21lbnRzIGNvbXBvc2luZyB0aGUgbWVzc2FnZQogKiBAcGFyYW0ge051bWJlcn0gbWVzc2FnZUxlbmd0aCBUaGUgbGVuZ3RoIG9mIHRoZSBtZXNzYWdlCiAqIEByZXR1cm4ge0J1ZmZlcn0KICogQHByaXZhdGUKICovCmZ1bmN0aW9uIHRvQnVmZmVyIChmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpIHsKICBpZiAoZnJhZ21lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGZyYWdtZW50c1swXTsKICBpZiAoZnJhZ21lbnRzLmxlbmd0aCA+IDEpIHJldHVybiBidWZmZXJVdGlsLmNvbmNhdChmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpOwogIHJldHVybiBjb25zdGFudHMuRU1QVFlfQlVGRkVSOwp9CgovKioKICogQ29udmVydHMgYSBidWZmZXIgdG8gYW4gYEFycmF5QnVmZmVyYC4KICoKICogQHBhcmFtIHtCdWZmZXJ9IFRoZSBidWZmZXIgdG8gY29udmVydAogKiBAcmV0dXJuIHtBcnJheUJ1ZmZlcn0gQ29udmVydGVkIGJ1ZmZlcgogKi8KZnVuY3Rpb24gdG9BcnJheUJ1ZmZlciAoYnVmKSB7CiAgaWYgKGJ1Zi5ieXRlT2Zmc2V0ID09PSAwICYmIGJ1Zi5ieXRlTGVuZ3RoID09PSBidWYuYnVmZmVyLmJ5dGVMZW5ndGgpIHsKICAgIHJldHVybiBidWYuYnVmZmVyOwogIH0KCiAgcmV0dXJuIGJ1Zi5idWZmZXIuc2xpY2UoYnVmLmJ5dGVPZmZzZXQsIGJ1Zi5ieXRlT2Zmc2V0ICsgYnVmLmJ5dGVMZW5ndGgpOwp9CgoKLyoqKi8gfSksCi8qIDE3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKLyohCiAqIHdzOiBhIG5vZGUuanMgd2Vic29ja2V0IGNsaWVudAogKiBDb3B5cmlnaHQoYykgMjAxMSBFaW5hciBPdHRvIFN0YW5ndmlrIDxlaW5hcm9zQGdtYWlsLmNvbT4KICogTUlUIExpY2Vuc2VkCiAqLwoKCgpjb25zdCBzYWZlQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKY29uc3QgY3J5cHRvID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKCmNvbnN0IFBlck1lc3NhZ2VEZWZsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKY29uc3QgYnVmZmVyVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CmNvbnN0IEVycm9yQ29kZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTsKCmNvbnN0IEJ1ZmZlciA9IHNhZmVCdWZmZXIuQnVmZmVyOwoKLyoqCiAqIEh5QmkgU2VuZGVyIGltcGxlbWVudGF0aW9uLgogKi8KY2xhc3MgU2VuZGVyIHsKICAvKioKICAgKiBDcmVhdGVzIGEgU2VuZGVyIGluc3RhbmNlLgogICAqCiAgICogQHBhcmFtIHtuZXQuU29ja2V0fSBzb2NrZXQgVGhlIGNvbm5lY3Rpb24gc29ja2V0CiAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuc2lvbnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5lZ290aWF0ZWQgZXh0ZW5zaW9ucwogICAqLwogIGNvbnN0cnVjdG9yIChzb2NrZXQsIGV4dGVuc2lvbnMpIHsKICAgIHRoaXMucGVyTWVzc2FnZURlZmxhdGUgPSAoZXh0ZW5zaW9ucyB8fCB7fSlbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV07CiAgICB0aGlzLl9zb2NrZXQgPSBzb2NrZXQ7CgogICAgdGhpcy5maXJzdEZyYWdtZW50ID0gdHJ1ZTsKICAgIHRoaXMuY29tcHJlc3MgPSBmYWxzZTsKCiAgICB0aGlzLmJ1ZmZlcmVkQnl0ZXMgPSAwOwogICAgdGhpcy5kZWZsYXRpbmcgPSBmYWxzZTsKICAgIHRoaXMucXVldWUgPSBbXTsKCiAgICB0aGlzLm9uZXJyb3IgPSBudWxsOwogIH0KCiAgLyoqCiAgICogRnJhbWVzIGEgcGllY2Ugb2YgZGF0YSBhY2NvcmRpbmcgdG8gdGhlIEh5QmkgV2ViU29ja2V0IHByb3RvY29sLgogICAqCiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgVGhlIGRhdGEgdG8gZnJhbWUKICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdAogICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLm9wY29kZSBUaGUgb3Bjb2RlCiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLnJlYWRPbmx5IFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBjYW4gYmUgbW9kaWZpZWQKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBzZXQgdGhlIEZJTiBiaXQKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMubWFzayBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWAKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucnN2MSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZSBSU1YxIGJpdAogICAqIEByZXR1cm4ge0J1ZmZlcltdfSBUaGUgZnJhbWVkIGRhdGEgYXMgYSBsaXN0IG9mIGBCdWZmZXJgIGluc3RhbmNlcwogICAqIEBwdWJsaWMKICAgKi8KICBzdGF0aWMgZnJhbWUgKGRhdGEsIG9wdGlvbnMpIHsKICAgIGNvbnN0IG1lcmdlID0gZGF0YS5sZW5ndGggPCAxMDI0IHx8IChvcHRpb25zLm1hc2sgJiYgb3B0aW9ucy5yZWFkT25seSk7CiAgICB2YXIgb2Zmc2V0ID0gb3B0aW9ucy5tYXNrID8gNiA6IDI7CiAgICB2YXIgcGF5bG9hZExlbmd0aCA9IGRhdGEubGVuZ3RoOwoKICAgIGlmIChkYXRhLmxlbmd0aCA+PSA2NTUzNikgewogICAgICBvZmZzZXQgKz0gODsKICAgICAgcGF5bG9hZExlbmd0aCA9IDEyNzsKICAgIH0gZWxzZSBpZiAoZGF0YS5sZW5ndGggPiAxMjUpIHsKICAgICAgb2Zmc2V0ICs9IDI7CiAgICAgIHBheWxvYWRMZW5ndGggPSAxMjY7CiAgICB9CgogICAgY29uc3QgdGFyZ2V0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKG1lcmdlID8gZGF0YS5sZW5ndGggKyBvZmZzZXQgOiBvZmZzZXQpOwoKICAgIHRhcmdldFswXSA9IG9wdGlvbnMuZmluID8gb3B0aW9ucy5vcGNvZGUgfCAweDgwIDogb3B0aW9ucy5vcGNvZGU7CiAgICBpZiAob3B0aW9ucy5yc3YxKSB0YXJnZXRbMF0gfD0gMHg0MDsKCiAgICBpZiAocGF5bG9hZExlbmd0aCA9PT0gMTI2KSB7CiAgICAgIHRhcmdldC53cml0ZVVJbnQxNkJFKGRhdGEubGVuZ3RoLCAyLCB0cnVlKTsKICAgIH0gZWxzZSBpZiAocGF5bG9hZExlbmd0aCA9PT0gMTI3KSB7CiAgICAgIHRhcmdldC53cml0ZVVJbnQzMkJFKDAsIDIsIHRydWUpOwogICAgICB0YXJnZXQud3JpdGVVSW50MzJCRShkYXRhLmxlbmd0aCwgNiwgdHJ1ZSk7CiAgICB9CgogICAgaWYgKCFvcHRpb25zLm1hc2spIHsKICAgICAgdGFyZ2V0WzFdID0gcGF5bG9hZExlbmd0aDsKICAgICAgaWYgKG1lcmdlKSB7CiAgICAgICAgZGF0YS5jb3B5KHRhcmdldCwgb2Zmc2V0KTsKICAgICAgICByZXR1cm4gW3RhcmdldF07CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0LCBkYXRhXTsKICAgIH0KCiAgICBjb25zdCBtYXNrID0gY3J5cHRvLnJhbmRvbUJ5dGVzKDQpOwoKICAgIHRhcmdldFsxXSA9IHBheWxvYWRMZW5ndGggfCAweDgwOwogICAgdGFyZ2V0W29mZnNldCAtIDRdID0gbWFza1swXTsKICAgIHRhcmdldFtvZmZzZXQgLSAzXSA9IG1hc2tbMV07CiAgICB0YXJnZXRbb2Zmc2V0IC0gMl0gPSBtYXNrWzJdOwogICAgdGFyZ2V0W29mZnNldCAtIDFdID0gbWFza1szXTsKCiAgICBpZiAobWVyZ2UpIHsKICAgICAgYnVmZmVyVXRpbC5tYXNrKGRhdGEsIG1hc2ssIHRhcmdldCwgb2Zmc2V0LCBkYXRhLmxlbmd0aCk7CiAgICAgIHJldHVybiBbdGFyZ2V0XTsKICAgIH0KCiAgICBidWZmZXJVdGlsLm1hc2soZGF0YSwgbWFzaywgZGF0YSwgMCwgZGF0YS5sZW5ndGgpOwogICAgcmV0dXJuIFt0YXJnZXQsIGRhdGFdOwogIH0KCiAgLyoqCiAgICogU2VuZHMgYSBjbG9zZSBtZXNzYWdlIHRvIHRoZSBvdGhlciBwZWVyLgogICAqCiAgICogQHBhcmFtIHsoTnVtYmVyfHVuZGVmaW5lZCl9IGNvZGUgVGhlIHN0YXR1cyBjb2RlIGNvbXBvbmVudCBvZiB0aGUgYm9keQogICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhIFRoZSBtZXNzYWdlIGNvbXBvbmVudCBvZiB0aGUgYm9keQogICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayB0aGUgbWVzc2FnZQogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrCiAgICogQHB1YmxpYwogICAqLwogIGNsb3NlIChjb2RlLCBkYXRhLCBtYXNrLCBjYikgewogICAgaWYgKGNvZGUgIT09IHVuZGVmaW5lZCAmJiAodHlwZW9mIGNvZGUgIT09ICdudW1iZXInIHx8ICFFcnJvckNvZGVzLmlzVmFsaWRFcnJvckNvZGUoY29kZSkpKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHZhbGlkIGVycm9yIGNvZGUgbnVtYmVyJyk7CiAgICB9CgogICAgY29uc3QgYnVmID0gQnVmZmVyLmFsbG9jVW5zYWZlKDIgKyAoZGF0YSA/IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpIDogMCkpOwoKICAgIGJ1Zi53cml0ZVVJbnQxNkJFKGNvZGUgfHwgMTAwMCwgMCwgdHJ1ZSk7CiAgICBpZiAoYnVmLmxlbmd0aCA+IDIpIGJ1Zi53cml0ZShkYXRhLCAyKTsKCiAgICBpZiAodGhpcy5kZWZsYXRpbmcpIHsKICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRvQ2xvc2UsIGJ1ZiwgbWFzaywgY2JdKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZG9DbG9zZShidWYsIG1hc2ssIGNiKTsKICAgIH0KICB9CgogIC8qKgogICAqIEZyYW1lcyBhbmQgc2VuZHMgYSBjbG9zZSBtZXNzYWdlLgogICAqCiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWAKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFjawogICAqIEBwcml2YXRlCiAgICovCiAgZG9DbG9zZSAoZGF0YSwgbWFzaywgY2IpIHsKICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCB7CiAgICAgIHJlYWRPbmx5OiBmYWxzZSwKICAgICAgb3Bjb2RlOiAweDA4LAogICAgICByc3YxOiBmYWxzZSwKICAgICAgZmluOiB0cnVlLAogICAgICBtYXNrCiAgICB9KSwgY2IpOwogIH0KCiAgLyoqCiAgICogU2VuZHMgYSBwaW5nIG1lc3NhZ2UgdG8gdGhlIG90aGVyIHBlZXIuCiAgICoKICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWAKICAgKiBAcHVibGljCiAgICovCiAgcGluZyAoZGF0YSwgbWFzaykgewogICAgdmFyIHJlYWRPbmx5ID0gdHJ1ZTsKCiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkgewogICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkgewogICAgICAgIGRhdGEgPSB2aWV3VG9CdWZmZXIoZGF0YSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpOwogICAgICAgIHJlYWRPbmx5ID0gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICBpZiAodGhpcy5kZWZsYXRpbmcpIHsKICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRvUGluZywgZGF0YSwgbWFzaywgcmVhZE9ubHldKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZG9QaW5nKGRhdGEsIG1hc2ssIHJlYWRPbmx5KTsKICAgIH0KICB9CgogIC8qKgogICAqIEZyYW1lcyBhbmQgc2VuZHMgYSBwaW5nIG1lc3NhZ2UuCiAgICoKICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWAKICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlYWRPbmx5IFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBjYW4gYmUgbW9kaWZpZWQKICAgKiBAcHJpdmF0ZQogICAqLwogIGRvUGluZyAoZGF0YSwgbWFzaywgcmVhZE9ubHkpIHsKICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCB7CiAgICAgIG9wY29kZTogMHgwOSwKICAgICAgcnN2MTogZmFsc2UsCiAgICAgIGZpbjogdHJ1ZSwKICAgICAgcmVhZE9ubHksCiAgICAgIG1hc2sKICAgIH0pKTsKICB9CgogIC8qKgogICAqIFNlbmRzIGEgcG9uZyBtZXNzYWdlIHRvIHRoZSBvdGhlciBwZWVyLgogICAqCiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmQKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgCiAgICogQHB1YmxpYwogICAqLwogIHBvbmcgKGRhdGEsIG1hc2spIHsKICAgIHZhciByZWFkT25seSA9IHRydWU7CgogICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHsKICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewogICAgICAgIGRhdGEgPSBCdWZmZXIuZnJvbShkYXRhKTsKICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpIHsKICAgICAgICBkYXRhID0gdmlld1RvQnVmZmVyKGRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGEgPSBCdWZmZXIuZnJvbShkYXRhKTsKICAgICAgICByZWFkT25seSA9IGZhbHNlOwogICAgICB9CiAgICB9CgogICAgaWYgKHRoaXMuZGVmbGF0aW5nKSB7CiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kb1BvbmcsIGRhdGEsIG1hc2ssIHJlYWRPbmx5XSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmRvUG9uZyhkYXRhLCBtYXNrLCByZWFkT25seSk7CiAgICB9CiAgfQoKICAvKioKICAgKiBGcmFtZXMgYW5kIHNlbmRzIGEgcG9uZyBtZXNzYWdlLgogICAqCiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmQKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgCiAgICogQHBhcmFtIHtCb29sZWFufSByZWFkT25seSBTcGVjaWZpZXMgd2hldGhlciBgZGF0YWAgY2FuIGJlIG1vZGlmaWVkCiAgICogQHByaXZhdGUKICAgKi8KICBkb1BvbmcgKGRhdGEsIG1hc2ssIHJlYWRPbmx5KSB7CiAgICB0aGlzLnNlbmRGcmFtZShTZW5kZXIuZnJhbWUoZGF0YSwgewogICAgICBvcGNvZGU6IDB4MGEsCiAgICAgIHJzdjE6IGZhbHNlLAogICAgICBmaW46IHRydWUsCiAgICAgIHJlYWRPbmx5LAogICAgICBtYXNrCiAgICB9KSk7CiAgfQoKICAvKioKICAgKiBTZW5kcyBhIGRhdGEgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci4KICAgKgogICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kCiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3QKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuY29tcHJlc3MgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIGNvbXByZXNzIGBkYXRhYAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5iaW5hcnkgU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGlzIGJpbmFyeSBvciB0ZXh0CiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmZpbiBTcGVjaWZpZXMgd2hldGhlciB0aGUgZnJhZ21lbnQgaXMgdGhlIGxhc3Qgb25lCiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLm1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2sKICAgKiBAcHVibGljCiAgICovCiAgc2VuZCAoZGF0YSwgb3B0aW9ucywgY2IpIHsKICAgIHZhciBvcGNvZGUgPSBvcHRpb25zLmJpbmFyeSA/IDIgOiAxOwogICAgdmFyIHJzdjEgPSBvcHRpb25zLmNvbXByZXNzOwogICAgdmFyIHJlYWRPbmx5ID0gdHJ1ZTsKCiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkgewogICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpOwogICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhkYXRhKSkgewogICAgICAgIGRhdGEgPSB2aWV3VG9CdWZmZXIoZGF0YSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGEpOwogICAgICAgIHJlYWRPbmx5ID0gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICBpZiAodGhpcy5maXJzdEZyYWdtZW50KSB7CiAgICAgIHRoaXMuZmlyc3RGcmFnbWVudCA9IGZhbHNlOwogICAgICBpZiAocnN2MSAmJiB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlKSB7CiAgICAgICAgcnN2MSA9IGRhdGEubGVuZ3RoID49IHRoaXMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkOwogICAgICB9CiAgICAgIHRoaXMuY29tcHJlc3MgPSByc3YxOwogICAgfSBlbHNlIHsKICAgICAgcnN2MSA9IGZhbHNlOwogICAgICBvcGNvZGUgPSAwOwogICAgfQoKICAgIGlmIChvcHRpb25zLmZpbikgdGhpcy5maXJzdEZyYWdtZW50ID0gdHJ1ZTsKCiAgICBpZiAodGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSkgewogICAgICBjb25zdCBvcHRzID0gewogICAgICAgIGNvbXByZXNzOiB0aGlzLmNvbXByZXNzLAogICAgICAgIG1hc2s6IG9wdGlvbnMubWFzaywKICAgICAgICBmaW46IG9wdGlvbnMuZmluLAogICAgICAgIHJlYWRPbmx5LAogICAgICAgIG9wY29kZSwKICAgICAgICByc3YxCiAgICAgIH07CgogICAgICBpZiAodGhpcy5kZWZsYXRpbmcpIHsKICAgICAgICB0aGlzLmVucXVldWUoW3RoaXMuZGlzcGF0Y2gsIGRhdGEsIG9wdHMsIGNiXSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaChkYXRhLCBvcHRzLCBjYik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCB7CiAgICAgICAgbWFzazogb3B0aW9ucy5tYXNrLAogICAgICAgIGZpbjogb3B0aW9ucy5maW4sCiAgICAgICAgcnN2MTogZmFsc2UsCiAgICAgICAgcmVhZE9ubHksCiAgICAgICAgb3Bjb2RlCiAgICAgIH0pLCBjYik7CiAgICB9CiAgfQoKICAvKioKICAgKiBEaXNwYXRjaGVzIGEgZGF0YSBtZXNzYWdlLgogICAqCiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZAogICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0CiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMub3Bjb2RlIFRoZSBvcGNvZGUKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMucmVhZE9ubHkgU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGNhbiBiZSBtb2RpZmllZAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5maW4gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIHNldCB0aGUgRklOIGJpdAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5jb21wcmVzcyBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gY29tcHJlc3MgYGRhdGFgCiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLm1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgCiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLnJzdjEgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIHNldCB0aGUgUlNWMSBiaXQKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFjawogICAqIEBwcml2YXRlCiAgICovCiAgZGlzcGF0Y2ggKGRhdGEsIG9wdGlvbnMsIGNiKSB7CiAgICBpZiAoIW9wdGlvbnMuY29tcHJlc3MpIHsKICAgICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIG9wdGlvbnMpLCBjYik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmRlZmxhdGluZyA9IHRydWU7CiAgICB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLmNvbXByZXNzKGRhdGEsIG9wdGlvbnMuZmluLCAoZXJyLCBidWYpID0+IHsKICAgICAgaWYgKGVycikgewogICAgICAgIGlmIChjYikgY2IoZXJyKTsKICAgICAgICBlbHNlIHRoaXMub25lcnJvcihlcnIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgb3B0aW9ucy5yZWFkT25seSA9IGZhbHNlOwogICAgICB0aGlzLnNlbmRGcmFtZShTZW5kZXIuZnJhbWUoYnVmLCBvcHRpb25zKSwgY2IpOwogICAgICB0aGlzLmRlZmxhdGluZyA9IGZhbHNlOwogICAgICB0aGlzLmRlcXVldWUoKTsKICAgIH0pOwogIH0KCiAgLyoqCiAgICogRXhlY3V0ZXMgcXVldWVkIHNlbmQgb3BlcmF0aW9ucy4KICAgKgogICAqIEBwcml2YXRlCiAgICovCiAgZGVxdWV1ZSAoKSB7CiAgICB3aGlsZSAoIXRoaXMuZGVmbGF0aW5nICYmIHRoaXMucXVldWUubGVuZ3RoKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucXVldWUuc2hpZnQoKTsKCiAgICAgIHRoaXMuYnVmZmVyZWRCeXRlcyAtPSBwYXJhbXNbMV0ubGVuZ3RoOwogICAgICBwYXJhbXNbMF0uYXBwbHkodGhpcywgcGFyYW1zLnNsaWNlKDEpKTsKICAgIH0KICB9CgogIC8qKgogICAqIEVucXVldWVzIGEgc2VuZCBvcGVyYXRpb24uCiAgICoKICAgKiBAcGFyYW0ge0FycmF5fSBwYXJhbXMgU2VuZCBvcGVyYXRpb24gcGFyYW1ldGVycy4KICAgKiBAcHJpdmF0ZQogICAqLwogIGVucXVldWUgKHBhcmFtcykgewogICAgdGhpcy5idWZmZXJlZEJ5dGVzICs9IHBhcmFtc1sxXS5sZW5ndGg7CiAgICB0aGlzLnF1ZXVlLnB1c2gocGFyYW1zKTsKICB9CgogIC8qKgogICAqIFNlbmRzIGEgZnJhbWUuCiAgICoKICAgKiBAcGFyYW0ge0J1ZmZlcltdfSBsaXN0IFRoZSBmcmFtZSB0byBzZW5kCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2sKICAgKiBAcHJpdmF0ZQogICAqLwogIHNlbmRGcmFtZSAobGlzdCwgY2IpIHsKICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMikgewogICAgICB0aGlzLl9zb2NrZXQud3JpdGUobGlzdFswXSk7CiAgICAgIHRoaXMuX3NvY2tldC53cml0ZShsaXN0WzFdLCBjYik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLl9zb2NrZXQud3JpdGUobGlzdFswXSwgY2IpOwogICAgfQogIH0KfQoKbW9kdWxlLmV4cG9ydHMgPSBTZW5kZXI7CgovKioKICogQ29udmVydHMgYW4gYEFycmF5QnVmZmVyYCB2aWV3IGludG8gYSBidWZmZXIuCiAqCiAqIEBwYXJhbSB7KERhdGFWaWV3fFR5cGVkQXJyYXkpfSB2aWV3IFRoZSB2aWV3IHRvIGNvbnZlcnQKICogQHJldHVybiB7QnVmZmVyfSBDb252ZXJ0ZWQgdmlldwogKiBAcHJpdmF0ZQogKi8KZnVuY3Rpb24gdmlld1RvQnVmZmVyICh2aWV3KSB7CiAgY29uc3QgYnVmID0gQnVmZmVyLmZyb20odmlldy5idWZmZXIpOwoKICBpZiAodmlldy5ieXRlTGVuZ3RoICE9PSB2aWV3LmJ1ZmZlci5ieXRlTGVuZ3RoKSB7CiAgICByZXR1cm4gYnVmLnNsaWNlKHZpZXcuYnl0ZU9mZnNldCwgdmlldy5ieXRlT2Zmc2V0ICsgdmlldy5ieXRlTGVuZ3RoKTsKICB9CgogIHJldHVybiBidWY7Cn0KCgovKioqLyB9KSwKLyogMTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovKiEKICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50CiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPgogKiBNSVQgTGljZW5zZWQKICovCgoKCmNvbnN0IEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwpjb25zdCBjcnlwdG8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwpjb25zdCBVbHRyb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKY29uc3QgaHR0cHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTsKY29uc3QgaHR0cCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOwpjb25zdCB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCmNvbnN0IFBlck1lc3NhZ2VEZWZsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKY29uc3QgRXZlbnRUYXJnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KTsKY29uc3QgRXh0ZW5zaW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwpjb25zdCBjb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwpjb25zdCBSZWNlaXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwpjb25zdCBTZW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCmNvbnN0IHByb3RvY29sVmVyc2lvbnMgPSBbOCwgMTNdOwpjb25zdCBjbG9zZVRpbWVvdXQgPSAzMCAqIDEwMDA7IC8vIEFsbG93IDMwIHNlY29uZHMgdG8gdGVybWluYXRlIHRoZSBjb25uZWN0aW9uIGNsZWFubHkuCgovKioKICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgV2ViU29ja2V0LgogKgogKiBAZXh0ZW5kcyBFdmVudEVtaXR0ZXIKICovCmNsYXNzIFdlYlNvY2tldCBleHRlbmRzIEV2ZW50RW1pdHRlciB7CiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IGBXZWJTb2NrZXRgLgogICAqCiAgICogQHBhcmFtIHtTdHJpbmd9IGFkZHJlc3MgVGhlIFVSTCB0byB3aGljaCB0byBjb25uZWN0CiAgICogQHBhcmFtIHsoU3RyaW5nfFN0cmluZ1tdKX0gcHJvdG9jb2xzIFRoZSBzdWJwcm90b2NvbHMKICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25uZWN0aW9uIG9wdGlvbnMKICAgKi8KICBjb25zdHJ1Y3RvciAoYWRkcmVzcywgcHJvdG9jb2xzLCBvcHRpb25zKSB7CiAgICBzdXBlcigpOwoKICAgIGlmICghcHJvdG9jb2xzKSB7CiAgICAgIHByb3RvY29scyA9IFtdOwogICAgfSBlbHNlIGlmICh0eXBlb2YgcHJvdG9jb2xzID09PSAnc3RyaW5nJykgewogICAgICBwcm90b2NvbHMgPSBbcHJvdG9jb2xzXTsKICAgIH0gZWxzZSBpZiAoIUFycmF5LmlzQXJyYXkocHJvdG9jb2xzKSkgewogICAgICBvcHRpb25zID0gcHJvdG9jb2xzOwogICAgICBwcm90b2NvbHMgPSBbXTsKICAgIH0KCiAgICB0aGlzLnJlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ09OTkVDVElORzsKICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCA9IDA7CiAgICB0aGlzLmV4dGVuc2lvbnMgPSB7fTsKICAgIHRoaXMucHJvdG9jb2wgPSAnJzsKCiAgICB0aGlzLl9iaW5hcnlUeXBlID0gY29uc3RhbnRzLkJJTkFSWV9UWVBFU1swXTsKICAgIHRoaXMuX2ZpbmFsaXplID0gdGhpcy5maW5hbGl6ZS5iaW5kKHRoaXMpOwogICAgdGhpcy5fZmluYWxpemVDYWxsZWQgPSBmYWxzZTsKICAgIHRoaXMuX2Nsb3NlTWVzc2FnZSA9IG51bGw7CiAgICB0aGlzLl9jbG9zZVRpbWVyID0gbnVsbDsKICAgIHRoaXMuX2Nsb3NlQ29kZSA9IG51bGw7CiAgICB0aGlzLl9yZWNlaXZlciA9IG51bGw7CiAgICB0aGlzLl9zZW5kZXIgPSBudWxsOwogICAgdGhpcy5fc29ja2V0ID0gbnVsbDsKICAgIHRoaXMuX3VsdHJvbiA9IG51bGw7CgogICAgaWYgKEFycmF5LmlzQXJyYXkoYWRkcmVzcykpIHsKICAgICAgaW5pdEFzU2VydmVyQ2xpZW50LmNhbGwodGhpcywgYWRkcmVzc1swXSwgYWRkcmVzc1sxXSwgYWRkcmVzc1syXSwgb3B0aW9ucyk7CiAgICB9IGVsc2UgewogICAgICBpbml0QXNDbGllbnQuY2FsbCh0aGlzLCBhZGRyZXNzLCBwcm90b2NvbHMsIG9wdGlvbnMpOwogICAgfQogIH0KCiAgZ2V0IENPTk5FQ1RJTkcgKCkgeyByZXR1cm4gV2ViU29ja2V0LkNPTk5FQ1RJTkc7IH0KICBnZXQgQ0xPU0lORyAoKSB7IHJldHVybiBXZWJTb2NrZXQuQ0xPU0lORzsgfQogIGdldCBDTE9TRUQgKCkgeyByZXR1cm4gV2ViU29ja2V0LkNMT1NFRDsgfQogIGdldCBPUEVOICgpIHsgcmV0dXJuIFdlYlNvY2tldC5PUEVOOyB9CgogIC8qKgogICAqIEB0eXBlIHtOdW1iZXJ9CiAgICovCiAgZ2V0IGJ1ZmZlcmVkQW1vdW50ICgpIHsKICAgIHZhciBhbW91bnQgPSAwOwoKICAgIGlmICh0aGlzLl9zb2NrZXQpIHsKICAgICAgYW1vdW50ID0gdGhpcy5fc29ja2V0LmJ1ZmZlclNpemUgKyB0aGlzLl9zZW5kZXIuYnVmZmVyZWRCeXRlczsKICAgIH0KICAgIHJldHVybiBhbW91bnQ7CiAgfQoKICAvKioKICAgKiBUaGlzIGRldmlhdGVzIGZyb20gdGhlIFdIQVRXRyBpbnRlcmZhY2Ugc2luY2Ugd3MgZG9lc24ndCBzdXBwb3J0IHRoZSByZXF1aXJlZAogICAqIGRlZmF1bHQgImJsb2IiIHR5cGUgKGluc3RlYWQgd2UgZGVmaW5lIGEgY3VzdG9tICJub2RlYnVmZmVyIiB0eXBlKS4KICAgKgogICAqIEB0eXBlIHtTdHJpbmd9CiAgICovCiAgZ2V0IGJpbmFyeVR5cGUgKCkgewogICAgcmV0dXJuIHRoaXMuX2JpbmFyeVR5cGU7CiAgfQoKICBzZXQgYmluYXJ5VHlwZSAodHlwZSkgewogICAgaWYgKGNvbnN0YW50cy5CSU5BUllfVFlQRVMuaW5kZXhPZih0eXBlKSA8IDApIHJldHVybjsKCiAgICB0aGlzLl9iaW5hcnlUeXBlID0gdHlwZTsKCiAgICAvLwogICAgLy8gQWxsb3cgdG8gY2hhbmdlIGBiaW5hcnlUeXBlYCBvbiB0aGUgZmx5LgogICAgLy8KICAgIGlmICh0aGlzLl9yZWNlaXZlcikgdGhpcy5fcmVjZWl2ZXIuYmluYXJ5VHlwZSA9IHR5cGU7CiAgfQoKICAvKioKICAgKiBTZXQgdXAgdGhlIHNvY2tldCBhbmQgdGhlIGludGVybmFsIHJlc291cmNlcy4KICAgKgogICAqIEBwYXJhbSB7bmV0LlNvY2tldH0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZSBzZXJ2ZXIgYW5kIGNsaWVudAogICAqIEBwYXJhbSB7QnVmZmVyfSBoZWFkIFRoZSBmaXJzdCBwYWNrZXQgb2YgdGhlIHVwZ3JhZGVkIHN0cmVhbQogICAqIEBwcml2YXRlCiAgICovCiAgc2V0U29ja2V0IChzb2NrZXQsIGhlYWQpIHsKICAgIHNvY2tldC5zZXRUaW1lb3V0KDApOwogICAgc29ja2V0LnNldE5vRGVsYXkoKTsKCiAgICB0aGlzLl9yZWNlaXZlciA9IG5ldyBSZWNlaXZlcih0aGlzLmV4dGVuc2lvbnMsIHRoaXMubWF4UGF5bG9hZCwgdGhpcy5iaW5hcnlUeXBlKTsKICAgIHRoaXMuX3NlbmRlciA9IG5ldyBTZW5kZXIoc29ja2V0LCB0aGlzLmV4dGVuc2lvbnMpOwogICAgdGhpcy5fdWx0cm9uID0gbmV3IFVsdHJvbihzb2NrZXQpOwogICAgdGhpcy5fc29ja2V0ID0gc29ja2V0OwoKICAgIC8vIHNvY2tldCBjbGVhbnVwIGhhbmRsZXJzCiAgICB0aGlzLl91bHRyb24ub24oJ2Nsb3NlJywgdGhpcy5fZmluYWxpemUpOwogICAgdGhpcy5fdWx0cm9uLm9uKCdlcnJvcicsIHRoaXMuX2ZpbmFsaXplKTsKICAgIHRoaXMuX3VsdHJvbi5vbignZW5kJywgdGhpcy5fZmluYWxpemUpOwoKICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBoZWFkIGlzIGFkZGVkIHRvIHRoZSByZWNlaXZlcgogICAgaWYgKGhlYWQgJiYgaGVhZC5sZW5ndGggPiAwKSB7CiAgICAgIHNvY2tldC51bnNoaWZ0KGhlYWQpOwogICAgICBoZWFkID0gbnVsbDsKICAgIH0KCiAgICAvLyBzdWJzZXF1ZW50IHBhY2tldHMgYXJlIHB1c2hlZCB0byB0aGUgcmVjZWl2ZXIKICAgIHRoaXMuX3VsdHJvbi5vbignZGF0YScsIChkYXRhKSA9PiB7CiAgICAgIHRoaXMuYnl0ZXNSZWNlaXZlZCArPSBkYXRhLmxlbmd0aDsKICAgICAgdGhpcy5fcmVjZWl2ZXIuYWRkKGRhdGEpOwogICAgfSk7CgogICAgLy8gcmVjZWl2ZXIgZXZlbnQgaGFuZGxlcnMKICAgIHRoaXMuX3JlY2VpdmVyLm9ubWVzc2FnZSA9IChkYXRhLCBmbGFncykgPT4gdGhpcy5lbWl0KCdtZXNzYWdlJywgZGF0YSwgZmxhZ3MpOwogICAgdGhpcy5fcmVjZWl2ZXIub25waW5nID0gKGRhdGEsIGZsYWdzKSA9PiB7CiAgICAgIHRoaXMucG9uZyhkYXRhLCAhdGhpcy5faXNTZXJ2ZXIsIHRydWUpOwogICAgICB0aGlzLmVtaXQoJ3BpbmcnLCBkYXRhLCBmbGFncyk7CiAgICB9OwogICAgdGhpcy5fcmVjZWl2ZXIub25wb25nID0gKGRhdGEsIGZsYWdzKSA9PiB0aGlzLmVtaXQoJ3BvbmcnLCBkYXRhLCBmbGFncyk7CiAgICB0aGlzLl9yZWNlaXZlci5vbmNsb3NlID0gKGNvZGUsIHJlYXNvbikgPT4gewogICAgICB0aGlzLl9jbG9zZU1lc3NhZ2UgPSByZWFzb247CiAgICAgIHRoaXMuX2Nsb3NlQ29kZSA9IGNvZGU7CiAgICAgIHRoaXMuY2xvc2UoY29kZSwgcmVhc29uKTsKICAgIH07CiAgICB0aGlzLl9yZWNlaXZlci5vbmVycm9yID0gKGVycm9yLCBjb2RlKSA9PiB7CiAgICAgIC8vIGNsb3NlIHRoZSBjb25uZWN0aW9uIHdoZW4gdGhlIHJlY2VpdmVyIHJlcG9ydHMgYSBIeUJpIGVycm9yIGNvZGUKICAgICAgdGhpcy5jbG9zZShjb2RlLCAnJyk7CiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7CiAgICB9OwoKICAgIC8vIHNlbmRlciBldmVudCBoYW5kbGVycwogICAgdGhpcy5fc2VuZGVyLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgICAgdGhpcy5jbG9zZSgxMDAyLCAnJyk7CiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7CiAgICB9OwoKICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5PUEVOOwogICAgdGhpcy5lbWl0KCdvcGVuJyk7CiAgfQoKICAvKioKICAgKiBDbGVhbiB1cCBhbmQgcmVsZWFzZSBpbnRlcm5hbCByZXNvdXJjZXMuCiAgICoKICAgKiBAcGFyYW0geyhCb29sZWFufEVycm9yKX0gSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IGFuIGVycm9yIG9jY3VycmVkCiAgICogQHByaXZhdGUKICAgKi8KICBmaW5hbGl6ZSAoZXJyb3IpIHsKICAgIGlmICh0aGlzLl9maW5hbGl6ZUNhbGxlZCkgcmV0dXJuOwoKICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HOwogICAgdGhpcy5fZmluYWxpemVDYWxsZWQgPSB0cnVlOwoKICAgIGNsZWFyVGltZW91dCh0aGlzLl9jbG9zZVRpbWVyKTsKICAgIHRoaXMuX2Nsb3NlVGltZXIgPSBudWxsOwoKICAgIC8vCiAgICAvLyBJZiB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGFibm9ybWFsbHkgKHdpdGggYW4gZXJyb3IpLCBvciBpZiB0aGUgY2xvc2UKICAgIC8vIGNvbnRyb2wgZnJhbWUgd2FzIG1hbGZvcm1lZCBvciBub3QgcmVjZWl2ZWQgdGhlbiB0aGUgY2xvc2UgY29kZSBtdXN0IGJlCiAgICAvLyAxMDA2LgogICAgLy8KICAgIGlmIChlcnJvcikgdGhpcy5fY2xvc2VDb2RlID0gMTAwNjsKCiAgICBpZiAodGhpcy5fc29ja2V0KSB7CiAgICAgIHRoaXMuX3VsdHJvbi5kZXN0cm95KCk7CiAgICAgIHRoaXMuX3NvY2tldC5vbignZXJyb3InLCBmdW5jdGlvbiBvbmVycm9yICgpIHsKICAgICAgICB0aGlzLmRlc3Ryb3koKTsKICAgICAgfSk7CgogICAgICBpZiAoIWVycm9yKSB0aGlzLl9zb2NrZXQuZW5kKCk7CiAgICAgIGVsc2UgdGhpcy5fc29ja2V0LmRlc3Ryb3koKTsKCiAgICAgIHRoaXMuX3NvY2tldCA9IG51bGw7CiAgICAgIHRoaXMuX3VsdHJvbiA9IG51bGw7CiAgICB9CgogICAgaWYgKHRoaXMuX3NlbmRlcikgewogICAgICB0aGlzLl9zZW5kZXIgPSB0aGlzLl9zZW5kZXIub25lcnJvciA9IG51bGw7CiAgICB9CgogICAgaWYgKHRoaXMuX3JlY2VpdmVyKSB7CiAgICAgIHRoaXMuX3JlY2VpdmVyLmNsZWFudXAoKCkgPT4gdGhpcy5lbWl0Q2xvc2UoKSk7CiAgICAgIHRoaXMuX3JlY2VpdmVyID0gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZW1pdENsb3NlKCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBFbWl0IHRoZSBgY2xvc2VgIGV2ZW50LgogICAqCiAgICogQHByaXZhdGUKICAgKi8KICBlbWl0Q2xvc2UgKCkgewogICAgdGhpcy5yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NFRDsKICAgIHRoaXMuZW1pdCgnY2xvc2UnLCB0aGlzLl9jbG9zZUNvZGUgfHwgMTAwNiwgdGhpcy5fY2xvc2VNZXNzYWdlIHx8ICcnKTsKCiAgICBpZiAodGhpcy5leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7CiAgICAgIHRoaXMuZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXS5jbGVhbnVwKCk7CiAgICB9CgogICAgdGhpcy5leHRlbnNpb25zID0gbnVsbDsKCiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpOwogICAgdGhpcy5vbignZXJyb3InLCBjb25zdGFudHMuTk9PUCk7IC8vIENhdGNoIGFsbCBlcnJvcnMgYWZ0ZXIgdGhpcy4KICB9CgogIC8qKgogICAqIFBhdXNlIHRoZSBzb2NrZXQgc3RyZWFtLgogICAqCiAgICogQHB1YmxpYwogICAqLwogIHBhdXNlICgpIHsKICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB0aHJvdyBuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKTsKCiAgICB0aGlzLl9zb2NrZXQucGF1c2UoKTsKICB9CgogIC8qKgogICAqIFJlc3VtZSB0aGUgc29ja2V0IHN0cmVhbQogICAqCiAgICogQHB1YmxpYwogICAqLwogIHJlc3VtZSAoKSB7CiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikgdGhyb3cgbmV3IEVycm9yKCdub3Qgb3BlbmVkJyk7CgogICAgdGhpcy5fc29ja2V0LnJlc3VtZSgpOwogIH0KCiAgLyoqCiAgICogU3RhcnQgYSBjbG9zaW5nIGhhbmRzaGFrZS4KICAgKgogICAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFN0YXR1cyBjb2RlIGV4cGxhaW5pbmcgd2h5IHRoZSBjb25uZWN0aW9uIGlzIGNsb3NpbmcKICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YSBBIHN0cmluZyBleHBsYWluaW5nIHdoeSB0aGUgY29ubmVjdGlvbiBpcyBjbG9zaW5nCiAgICogQHB1YmxpYwogICAqLwogIGNsb3NlIChjb2RlLCBkYXRhKSB7CiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEKSByZXR1cm47CiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ09OTkVDVElORykgewogICAgICBpZiAodGhpcy5fcmVxICYmICF0aGlzLl9yZXEuYWJvcnRlZCkgewogICAgICAgIHRoaXMuX3JlcS5hYm9ydCgpOwogICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ2Nsb3NlZCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQnKSk7CiAgICAgICAgdGhpcy5maW5hbGl6ZSh0cnVlKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NJTkcpIHsKICAgICAgaWYgKHRoaXMuX2Nsb3NlQ29kZSAmJiB0aGlzLl9zb2NrZXQpIHRoaXMuX3NvY2tldC5lbmQoKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMucmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HOwogICAgdGhpcy5fc2VuZGVyLmNsb3NlKGNvZGUsIGRhdGEsICF0aGlzLl9pc1NlcnZlciwgKGVycikgPT4gewogICAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTsKCiAgICAgIGlmICh0aGlzLl9zb2NrZXQpIHsKICAgICAgICBpZiAodGhpcy5fY2xvc2VDb2RlKSB0aGlzLl9zb2NrZXQuZW5kKCk7CiAgICAgICAgLy8KICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgY29ubmVjdGlvbiBpcyBjbGVhbmVkIHVwIGV2ZW4gd2hlbiB0aGUgY2xvc2luZwogICAgICAgIC8vIGhhbmRzaGFrZSBmYWlscy4KICAgICAgICAvLwogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9jbG9zZVRpbWVyKTsKICAgICAgICB0aGlzLl9jbG9zZVRpbWVyID0gc2V0VGltZW91dCh0aGlzLl9maW5hbGl6ZSwgY2xvc2VUaW1lb3V0LCB0cnVlKTsKICAgICAgfQogICAgfSk7CiAgfQoKICAvKioKICAgKiBTZW5kIGEgcGluZyBtZXNzYWdlLgogICAqCiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmQKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG1hc2sgSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgCiAgICogQHBhcmFtIHtCb29sZWFufSBmYWlsU2lsZW50bHkgSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRvIHRocm93IGlmIGByZWFkeVN0YXRlYCBpc24ndCBgT1BFTmAKICAgKiBAcHVibGljCiAgICovCiAgcGluZyAoZGF0YSwgbWFzaywgZmFpbFNpbGVudGx5KSB7CiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikgewogICAgICBpZiAoZmFpbFNpbGVudGx5KSByZXR1cm47CiAgICAgIHRocm93IG5ldyBFcnJvcignbm90IG9wZW5lZCcpOwogICAgfQoKICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7CiAgICBpZiAobWFzayA9PT0gdW5kZWZpbmVkKSBtYXNrID0gIXRoaXMuX2lzU2VydmVyOwogICAgdGhpcy5fc2VuZGVyLnBpbmcoZGF0YSB8fCBjb25zdGFudHMuRU1QVFlfQlVGRkVSLCBtYXNrKTsKICB9CgogIC8qKgogICAqIFNlbmQgYSBwb25nIG1lc3NhZ2UuCiAgICoKICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gbWFzayBJbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWAKICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZhaWxTaWxlbnRseSBJbmRpY2F0ZXMgd2hldGhlciBvciBub3QgdG8gdGhyb3cgaWYgYHJlYWR5U3RhdGVgIGlzbid0IGBPUEVOYAogICAqIEBwdWJsaWMKICAgKi8KICBwb25nIChkYXRhLCBtYXNrLCBmYWlsU2lsZW50bHkpIHsKICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7CiAgICAgIGlmIChmYWlsU2lsZW50bHkpIHJldHVybjsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdub3Qgb3BlbmVkJyk7CiAgICB9CgogICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykgZGF0YSA9IGRhdGEudG9TdHJpbmcoKTsKICAgIGlmIChtYXNrID09PSB1bmRlZmluZWQpIG1hc2sgPSAhdGhpcy5faXNTZXJ2ZXI7CiAgICB0aGlzLl9zZW5kZXIucG9uZyhkYXRhIHx8IGNvbnN0YW50cy5FTVBUWV9CVUZGRVIsIG1hc2spOwogIH0KCiAgLyoqCiAgICogU2VuZCBhIGRhdGEgbWVzc2FnZS4KICAgKgogICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kCiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3QKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuY29tcHJlc3MgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIGNvbXByZXNzIGBkYXRhYAogICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5iaW5hcnkgU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGlzIGJpbmFyeSBvciB0ZXh0CiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmZpbiBTcGVjaWZpZXMgd2hldGhlciB0aGUgZnJhZ21lbnQgaXMgdGhlIGxhc3Qgb25lCiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLm1hc2sgU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2sgd2hpY2ggaXMgZXhlY3V0ZWQgd2hlbiBkYXRhIGlzIHdyaXR0ZW4gb3V0CiAgICogQHB1YmxpYwogICAqLwogIHNlbmQgKGRhdGEsIG9wdGlvbnMsIGNiKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgY2IgPSBvcHRpb25zOwogICAgICBvcHRpb25zID0ge307CiAgICB9CgogICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0Lk9QRU4pIHsKICAgICAgaWYgKGNiKSBjYihuZXcgRXJyb3IoJ25vdCBvcGVuZWQnKSk7CiAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdub3Qgb3BlbmVkJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdudW1iZXInKSBkYXRhID0gZGF0YS50b1N0cmluZygpOwoKICAgIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHsKICAgICAgYmluYXJ5OiB0eXBlb2YgZGF0YSAhPT0gJ3N0cmluZycsCiAgICAgIG1hc2s6ICF0aGlzLl9pc1NlcnZlciwKICAgICAgY29tcHJlc3M6IHRydWUsCiAgICAgIGZpbjogdHJ1ZQogICAgfSwgb3B0aW9ucyk7CgogICAgaWYgKCF0aGlzLmV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHsKICAgICAgb3B0cy5jb21wcmVzcyA9IGZhbHNlOwogICAgfQoKICAgIHRoaXMuX3NlbmRlci5zZW5kKGRhdGEgfHwgY29uc3RhbnRzLkVNUFRZX0JVRkZFUiwgb3B0cywgY2IpOwogIH0KCiAgLyoqCiAgICogRm9yY2libHkgY2xvc2UgdGhlIGNvbm5lY3Rpb24uCiAgICoKICAgKiBAcHVibGljCiAgICovCiAgdGVybWluYXRlICgpIHsKICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DTE9TRUQpIHJldHVybjsKICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSB7CiAgICAgIGlmICh0aGlzLl9yZXEgJiYgIXRoaXMuX3JlcS5hYm9ydGVkKSB7CiAgICAgICAgdGhpcy5fcmVxLmFib3J0KCk7CiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignY2xvc2VkIGJlZm9yZSB0aGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZCcpKTsKICAgICAgICB0aGlzLmZpbmFsaXplKHRydWUpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmZpbmFsaXplKHRydWUpOwogIH0KfQoKV2ViU29ja2V0LkNPTk5FQ1RJTkcgPSAwOwpXZWJTb2NrZXQuT1BFTiA9IDE7CldlYlNvY2tldC5DTE9TSU5HID0gMjsKV2ViU29ja2V0LkNMT1NFRCA9IDM7CgovLwovLyBBZGQgdGhlIGBvbm9wZW5gLCBgb25lcnJvcmAsIGBvbmNsb3NlYCwgYW5kIGBvbm1lc3NhZ2VgIGF0dHJpYnV0ZXMuCi8vIFNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jb21tcy5odG1sI3RoZS13ZWJzb2NrZXQtaW50ZXJmYWNlCi8vClsnb3BlbicsICdlcnJvcicsICdjbG9zZScsICdtZXNzYWdlJ10uZm9yRWFjaCgobWV0aG9kKSA9PiB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldC5wcm90b3R5cGUsIGBvbiR7bWV0aG9kfWAsIHsKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBsaXN0ZW5lciBvZiB0aGUgZXZlbnQuCiAgICAgKgogICAgICogQHJldHVybiB7KEZ1bmN0aW9ufHVuZGVmaW5lZCl9IFRoZSBldmVudCBsaXN0ZW5lciBvciBgdW5kZWZpbmVkYAogICAgICogQHB1YmxpYwogICAgICovCiAgICBnZXQgKCkgewogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycyhtZXRob2QpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChsaXN0ZW5lcnNbaV0uX2xpc3RlbmVyKSByZXR1cm4gbGlzdGVuZXJzW2ldLl9saXN0ZW5lcjsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICogQWRkIGEgbGlzdGVuZXIgZm9yIHRoZSBldmVudC4KICAgICAqCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gYWRkCiAgICAgKiBAcHVibGljCiAgICAgKi8KICAgIHNldCAobGlzdGVuZXIpIHsKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMobWV0aG9kKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLwogICAgICAgIC8vIFJlbW92ZSBvbmx5IHRoZSBsaXN0ZW5lcnMgYWRkZWQgdmlhIGBhZGRFdmVudExpc3RlbmVyYC4KICAgICAgICAvLwogICAgICAgIGlmIChsaXN0ZW5lcnNbaV0uX2xpc3RlbmVyKSB0aGlzLnJlbW92ZUxpc3RlbmVyKG1ldGhvZCwgbGlzdGVuZXJzW2ldKTsKICAgICAgfQogICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIobWV0aG9kLCBsaXN0ZW5lcik7CiAgICB9CiAgfSk7Cn0pOwoKV2ViU29ja2V0LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gRXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcjsKV2ViU29ja2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gRXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcjsKCm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0OwoKLyoqCiAqIEluaXRpYWxpemUgYSBXZWJTb2NrZXQgc2VydmVyIGNsaWVudC4KICoKICogQHBhcmFtIHtodHRwLkluY29taW5nTWVzc2FnZX0gcmVxIFRoZSByZXF1ZXN0IG9iamVjdAogKiBAcGFyYW0ge25ldC5Tb2NrZXR9IHNvY2tldCBUaGUgbmV0d29yayBzb2NrZXQgYmV0d2VlbiB0aGUgc2VydmVyIGFuZCBjbGllbnQKICogQHBhcmFtIHtCdWZmZXJ9IGhlYWQgVGhlIGZpcnN0IHBhY2tldCBvZiB0aGUgdXBncmFkZWQgc3RyZWFtCiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFdlYlNvY2tldCBhdHRyaWJ1dGVzCiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnByb3RvY29sVmVyc2lvbiBUaGUgV2ViU29ja2V0IHByb3RvY29sIHZlcnNpb24KICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZXh0ZW5zaW9ucyBUaGUgbmVnb3RpYXRlZCBleHRlbnNpb25zCiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLm1heFBheWxvYWQgVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlIHNpemUKICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMucHJvdG9jb2wgVGhlIGNob3NlbiBzdWJwcm90b2NvbAogKiBAcHJpdmF0ZQogKi8KZnVuY3Rpb24gaW5pdEFzU2VydmVyQ2xpZW50IChyZXEsIHNvY2tldCwgaGVhZCwgb3B0aW9ucykgewogIHRoaXMucHJvdG9jb2xWZXJzaW9uID0gb3B0aW9ucy5wcm90b2NvbFZlcnNpb247CiAgdGhpcy5leHRlbnNpb25zID0gb3B0aW9ucy5leHRlbnNpb25zOwogIHRoaXMubWF4UGF5bG9hZCA9IG9wdGlvbnMubWF4UGF5bG9hZDsKICB0aGlzLnByb3RvY29sID0gb3B0aW9ucy5wcm90b2NvbDsKCiAgdGhpcy51cGdyYWRlUmVxID0gcmVxOwogIHRoaXMuX2lzU2VydmVyID0gdHJ1ZTsKCiAgdGhpcy5zZXRTb2NrZXQoc29ja2V0LCBoZWFkKTsKfQoKLyoqCiAqIEluaXRpYWxpemUgYSBXZWJTb2NrZXQgY2xpZW50LgogKgogKiBAcGFyYW0ge1N0cmluZ30gYWRkcmVzcyBUaGUgVVJMIHRvIHdoaWNoIHRvIGNvbm5lY3QKICogQHBhcmFtIHtTdHJpbmdbXX0gcHJvdG9jb2xzIFRoZSBsaXN0IG9mIHN1YnByb3RvY29scwogKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25uZWN0aW9uIG9wdGlvbnMKICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMucHJvdG9jb2wgVmFsdWUgb2YgdGhlIGBTZWMtV2ViU29ja2V0LVByb3RvY29sYCBoZWFkZXIKICogQHBhcmFtIHsoQm9vbGVhbnxPYmplY3QpfSBvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlIEVuYWJsZS9kaXNhYmxlIHBlcm1lc3NhZ2UtZGVmbGF0ZQogKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5sb2NhbEFkZHJlc3MgTG9jYWwgaW50ZXJmYWNlIHRvIGJpbmQgZm9yIG5ldHdvcmsgY29ubmVjdGlvbnMKICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMucHJvdG9jb2xWZXJzaW9uIFZhbHVlIG9mIHRoZSBgU2VjLVdlYlNvY2tldC1WZXJzaW9uYCBoZWFkZXIKICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuaGVhZGVycyBBbiBvYmplY3QgY29udGFpbmluZyByZXF1ZXN0IGhlYWRlcnMKICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMub3JpZ2luIFZhbHVlIG9mIHRoZSBgT3JpZ2luYCBvciBgU2VjLVdlYlNvY2tldC1PcmlnaW5gIGhlYWRlcgogKiBAcGFyYW0ge2h0dHAuQWdlbnR9IG9wdGlvbnMuYWdlbnQgVXNlIHRoZSBzcGVjaWZpZWQgQWdlbnQKICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuaG9zdCBWYWx1ZSBvZiB0aGUgYEhvc3RgIGhlYWRlcgogKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5mYW1pbHkgSVAgYWRkcmVzcyBmYW1pbHkgdG8gdXNlIGR1cmluZyBob3N0bmFtZSBsb29rdXAgKDQgb3IgNikuCiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMuY2hlY2tTZXJ2ZXJJZGVudGl0eSBBIGZ1bmN0aW9uIHRvIHZhbGlkYXRlIHRoZSBzZXJ2ZXIgaG9zdG5hbWUKICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLnJlamVjdFVuYXV0aG9yaXplZCBWZXJpZnkgb3Igbm90IHRoZSBzZXJ2ZXIgY2VydGlmaWNhdGUKICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMucGFzc3BocmFzZSBUaGUgcGFzc3BocmFzZSBmb3IgdGhlIHByaXZhdGUga2V5IG9yIHBmeAogKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5jaXBoZXJzIFRoZSBjaXBoZXJzIHRvIHVzZSBvciBleGNsdWRlCiAqIEBwYXJhbSB7KFN0cmluZ3xTdHJpbmdbXXxCdWZmZXJ8QnVmZmVyW10pfSBvcHRpb25zLmNlcnQgVGhlIGNlcnRpZmljYXRlIGtleQogKiBAcGFyYW0geyhTdHJpbmd8U3RyaW5nW118QnVmZmVyfEJ1ZmZlcltdKX0gb3B0aW9ucy5rZXkgVGhlIHByaXZhdGUga2V5CiAqIEBwYXJhbSB7KFN0cmluZ3xCdWZmZXIpfSBvcHRpb25zLnBmeCBUaGUgcHJpdmF0ZSBrZXksIGNlcnRpZmljYXRlLCBhbmQgQ0EgY2VydHMKICogQHBhcmFtIHsoU3RyaW5nfFN0cmluZ1tdfEJ1ZmZlcnxCdWZmZXJbXSl9IG9wdGlvbnMuY2EgVHJ1c3RlZCBjZXJ0aWZpY2F0ZXMKICogQHByaXZhdGUKICovCmZ1bmN0aW9uIGluaXRBc0NsaWVudCAoYWRkcmVzcywgcHJvdG9jb2xzLCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oewogICAgcHJvdG9jb2xWZXJzaW9uOiBwcm90b2NvbFZlcnNpb25zWzFdLAogICAgcHJvdG9jb2w6IHByb3RvY29scy5qb2luKCcsJyksCiAgICBwZXJNZXNzYWdlRGVmbGF0ZTogdHJ1ZSwKICAgIGxvY2FsQWRkcmVzczogbnVsbCwKICAgIGhlYWRlcnM6IG51bGwsCiAgICBmYW1pbHk6IG51bGwsCiAgICBvcmlnaW46IG51bGwsCiAgICBhZ2VudDogbnVsbCwKICAgIGhvc3Q6IG51bGwsCgogICAgLy8KICAgIC8vIFNTTCBvcHRpb25zLgogICAgLy8KICAgIGNoZWNrU2VydmVySWRlbnRpdHk6IG51bGwsCiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IG51bGwsCiAgICBwYXNzcGhyYXNlOiBudWxsLAogICAgY2lwaGVyczogbnVsbCwKICAgIGNlcnQ6IG51bGwsCiAgICBrZXk6IG51bGwsCiAgICBwZng6IG51bGwsCiAgICBjYTogbnVsbAogIH0sIG9wdGlvbnMpOwoKICBpZiAocHJvdG9jb2xWZXJzaW9ucy5pbmRleE9mKG9wdGlvbnMucHJvdG9jb2xWZXJzaW9uKSA9PT0gLTEpIHsKICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgYHVuc3VwcG9ydGVkIHByb3RvY29sIHZlcnNpb246ICR7b3B0aW9ucy5wcm90b2NvbFZlcnNpb259IGAgKwogICAgICBgKHN1cHBvcnRlZCB2ZXJzaW9uczogJHtwcm90b2NvbFZlcnNpb25zLmpvaW4oJywgJyl9KWAKICAgICk7CiAgfQoKICB0aGlzLnByb3RvY29sVmVyc2lvbiA9IG9wdGlvbnMucHJvdG9jb2xWZXJzaW9uOwogIHRoaXMuX2lzU2VydmVyID0gZmFsc2U7CiAgdGhpcy51cmwgPSBhZGRyZXNzOwoKICBjb25zdCBzZXJ2ZXJVcmwgPSB1cmwucGFyc2UoYWRkcmVzcyk7CiAgY29uc3QgaXNVbml4U29ja2V0ID0gc2VydmVyVXJsLnByb3RvY29sID09PSAnd3MrdW5peDonOwoKICBpZiAoIXNlcnZlclVybC5ob3N0ICYmICghaXNVbml4U29ja2V0IHx8ICFzZXJ2ZXJVcmwucGF0aCkpIHsKICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCB1cmwnKTsKICB9CgogIGNvbnN0IGlzU2VjdXJlID0gc2VydmVyVXJsLnByb3RvY29sID09PSAnd3NzOicgfHwgc2VydmVyVXJsLnByb3RvY29sID09PSAnaHR0cHM6JzsKICBjb25zdCBrZXkgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMTYpLnRvU3RyaW5nKCdiYXNlNjQnKTsKICBjb25zdCBodHRwT2JqID0gaXNTZWN1cmUgPyBodHRwcyA6IGh0dHA7CgogIC8vCiAgLy8gUHJlcGFyZSBleHRlbnNpb25zLgogIC8vCiAgY29uc3QgZXh0ZW5zaW9uc09mZmVyID0ge307CiAgdmFyIHBlck1lc3NhZ2VEZWZsYXRlOwoKICBpZiAob3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSkgewogICAgcGVyTWVzc2FnZURlZmxhdGUgPSBuZXcgUGVyTWVzc2FnZURlZmxhdGUoCiAgICAgIG9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUgIT09IHRydWUgPyBvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlIDoge30sCiAgICAgIGZhbHNlCiAgICApOwogICAgZXh0ZW5zaW9uc09mZmVyW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdID0gcGVyTWVzc2FnZURlZmxhdGUub2ZmZXIoKTsKICB9CgogIGNvbnN0IHJlcXVlc3RPcHRpb25zID0gewogICAgcG9ydDogc2VydmVyVXJsLnBvcnQgfHwgKGlzU2VjdXJlID8gNDQzIDogODApLAogICAgaG9zdDogc2VydmVyVXJsLmhvc3RuYW1lLAogICAgcGF0aDogJy8nLAogICAgaGVhZGVyczogewogICAgICAnU2VjLVdlYlNvY2tldC1WZXJzaW9uJzogb3B0aW9ucy5wcm90b2NvbFZlcnNpb24sCiAgICAgICdTZWMtV2ViU29ja2V0LUtleSc6IGtleSwKICAgICAgJ0Nvbm5lY3Rpb24nOiAnVXBncmFkZScsCiAgICAgICdVcGdyYWRlJzogJ3dlYnNvY2tldCcKICAgIH0KICB9OwoKICBpZiAob3B0aW9ucy5oZWFkZXJzKSBPYmplY3QuYXNzaWduKHJlcXVlc3RPcHRpb25zLmhlYWRlcnMsIG9wdGlvbnMuaGVhZGVycyk7CiAgaWYgKE9iamVjdC5rZXlzKGV4dGVuc2lvbnNPZmZlcikubGVuZ3RoKSB7CiAgICByZXF1ZXN0T3B0aW9ucy5oZWFkZXJzWydTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMnXSA9IEV4dGVuc2lvbnMuZm9ybWF0KGV4dGVuc2lvbnNPZmZlcik7CiAgfQogIGlmIChvcHRpb25zLnByb3RvY29sKSB7CiAgICByZXF1ZXN0T3B0aW9ucy5oZWFkZXJzWydTZWMtV2ViU29ja2V0LVByb3RvY29sJ10gPSBvcHRpb25zLnByb3RvY29sOwogIH0KICBpZiAob3B0aW9ucy5vcmlnaW4pIHsKICAgIGlmIChvcHRpb25zLnByb3RvY29sVmVyc2lvbiA8IDEzKSB7CiAgICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtT3JpZ2luJ10gPSBvcHRpb25zLm9yaWdpbjsKICAgIH0gZWxzZSB7CiAgICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMuT3JpZ2luID0gb3B0aW9ucy5vcmlnaW47CiAgICB9CiAgfQogIGlmIChvcHRpb25zLmhvc3QpIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMuSG9zdCA9IG9wdGlvbnMuaG9zdDsKICBpZiAoc2VydmVyVXJsLmF1dGgpIHJlcXVlc3RPcHRpb25zLmF1dGggPSBzZXJ2ZXJVcmwuYXV0aDsKCiAgaWYgKG9wdGlvbnMubG9jYWxBZGRyZXNzKSByZXF1ZXN0T3B0aW9ucy5sb2NhbEFkZHJlc3MgPSBvcHRpb25zLmxvY2FsQWRkcmVzczsKICBpZiAob3B0aW9ucy5mYW1pbHkpIHJlcXVlc3RPcHRpb25zLmZhbWlseSA9IG9wdGlvbnMuZmFtaWx5OwoKICBpZiAoaXNVbml4U29ja2V0KSB7CiAgICBjb25zdCBwYXJ0cyA9IHNlcnZlclVybC5wYXRoLnNwbGl0KCc6Jyk7CgogICAgcmVxdWVzdE9wdGlvbnMuc29ja2V0UGF0aCA9IHBhcnRzWzBdOwogICAgcmVxdWVzdE9wdGlvbnMucGF0aCA9IHBhcnRzWzFdOwogIH0gZWxzZSBpZiAoc2VydmVyVXJsLnBhdGgpIHsKICAgIC8vCiAgICAvLyBNYWtlIHN1cmUgdGhhdCBwYXRoIHN0YXJ0cyB3aXRoIGAvYC4KICAgIC8vCiAgICBpZiAoc2VydmVyVXJsLnBhdGguY2hhckF0KDApICE9PSAnLycpIHsKICAgICAgcmVxdWVzdE9wdGlvbnMucGF0aCA9IGAvJHtzZXJ2ZXJVcmwucGF0aH1gOwogICAgfSBlbHNlIHsKICAgICAgcmVxdWVzdE9wdGlvbnMucGF0aCA9IHNlcnZlclVybC5wYXRoOwogICAgfQogIH0KCiAgdmFyIGFnZW50ID0gb3B0aW9ucy5hZ2VudDsKCiAgLy8KICAvLyBBIGN1c3RvbSBhZ2VudCBpcyByZXF1aXJlZCBmb3IgdGhlc2Ugb3B0aW9ucy4KICAvLwogIGlmICgKICAgIG9wdGlvbnMucmVqZWN0VW5hdXRob3JpemVkICE9IG51bGwgfHwKICAgIG9wdGlvbnMuY2hlY2tTZXJ2ZXJJZGVudGl0eSB8fAogICAgb3B0aW9ucy5wYXNzcGhyYXNlIHx8CiAgICBvcHRpb25zLmNpcGhlcnMgfHwKICAgIG9wdGlvbnMuY2VydCB8fAogICAgb3B0aW9ucy5rZXkgfHwKICAgIG9wdGlvbnMucGZ4IHx8CiAgICBvcHRpb25zLmNhCiAgKSB7CiAgICBpZiAob3B0aW9ucy5wYXNzcGhyYXNlKSByZXF1ZXN0T3B0aW9ucy5wYXNzcGhyYXNlID0gb3B0aW9ucy5wYXNzcGhyYXNlOwogICAgaWYgKG9wdGlvbnMuY2lwaGVycykgcmVxdWVzdE9wdGlvbnMuY2lwaGVycyA9IG9wdGlvbnMuY2lwaGVyczsKICAgIGlmIChvcHRpb25zLmNlcnQpIHJlcXVlc3RPcHRpb25zLmNlcnQgPSBvcHRpb25zLmNlcnQ7CiAgICBpZiAob3B0aW9ucy5rZXkpIHJlcXVlc3RPcHRpb25zLmtleSA9IG9wdGlvbnMua2V5OwogICAgaWYgKG9wdGlvbnMucGZ4KSByZXF1ZXN0T3B0aW9ucy5wZnggPSBvcHRpb25zLnBmeDsKICAgIGlmIChvcHRpb25zLmNhKSByZXF1ZXN0T3B0aW9ucy5jYSA9IG9wdGlvbnMuY2E7CiAgICBpZiAob3B0aW9ucy5jaGVja1NlcnZlcklkZW50aXR5KSB7CiAgICAgIHJlcXVlc3RPcHRpb25zLmNoZWNrU2VydmVySWRlbnRpdHkgPSBvcHRpb25zLmNoZWNrU2VydmVySWRlbnRpdHk7CiAgICB9CiAgICBpZiAob3B0aW9ucy5yZWplY3RVbmF1dGhvcml6ZWQgIT0gbnVsbCkgewogICAgICByZXF1ZXN0T3B0aW9ucy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRpb25zLnJlamVjdFVuYXV0aG9yaXplZDsKICAgIH0KCiAgICBpZiAoIWFnZW50KSBhZ2VudCA9IG5ldyBodHRwT2JqLkFnZW50KHJlcXVlc3RPcHRpb25zKTsKICB9CgogIGlmIChhZ2VudCkgcmVxdWVzdE9wdGlvbnMuYWdlbnQgPSBhZ2VudDsKCiAgdGhpcy5fcmVxID0gaHR0cE9iai5nZXQocmVxdWVzdE9wdGlvbnMpOwoKICB0aGlzLl9yZXEub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7CiAgICBpZiAodGhpcy5fcmVxLmFib3J0ZWQpIHJldHVybjsKCiAgICB0aGlzLl9yZXEgPSBudWxsOwogICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTsKICAgIHRoaXMuZmluYWxpemUodHJ1ZSk7CiAgfSk7CgogIHRoaXMuX3JlcS5vbigncmVzcG9uc2UnLCAocmVzKSA9PiB7CiAgICBpZiAoIXRoaXMuZW1pdCgndW5leHBlY3RlZC1yZXNwb25zZScsIHRoaXMuX3JlcSwgcmVzKSkgewogICAgICB0aGlzLl9yZXEuYWJvcnQoKTsKICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcihgdW5leHBlY3RlZCBzZXJ2ZXIgcmVzcG9uc2UgKCR7cmVzLnN0YXR1c0NvZGV9KWApKTsKICAgICAgdGhpcy5maW5hbGl6ZSh0cnVlKTsKICAgIH0KICB9KTsKCiAgdGhpcy5fcmVxLm9uKCd1cGdyYWRlJywgKHJlcywgc29ja2V0LCBoZWFkKSA9PiB7CiAgICB0aGlzLl9yZXEgPSBudWxsOwoKICAgIGNvbnN0IGRpZ2VzdCA9IGNyeXB0by5jcmVhdGVIYXNoKCdzaGExJykKICAgICAgLnVwZGF0ZShrZXkgKyBjb25zdGFudHMuR1VJRCwgJ2JpbmFyeScpCiAgICAgIC5kaWdlc3QoJ2Jhc2U2NCcpOwoKICAgIGlmIChyZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1hY2NlcHQnXSAhPT0gZGlnZXN0KSB7CiAgICAgIHNvY2tldC5kZXN0cm95KCk7CiAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ2ludmFsaWQgc2VydmVyIGtleScpKTsKICAgICAgcmV0dXJuIHRoaXMuZmluYWxpemUodHJ1ZSk7CiAgICB9CgogICAgY29uc3Qgc2VydmVyUHJvdCA9IHJlcy5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXByb3RvY29sJ107CiAgICBjb25zdCBwcm90TGlzdCA9IChvcHRpb25zLnByb3RvY29sIHx8ICcnKS5zcGxpdCgvLCAqLyk7CiAgICB2YXIgcHJvdEVycm9yOwoKICAgIGlmICghb3B0aW9ucy5wcm90b2NvbCAmJiBzZXJ2ZXJQcm90KSB7CiAgICAgIHByb3RFcnJvciA9ICdzZXJ2ZXIgc2VudCBhIHN1YnByb3RvY29sIGV2ZW4gdGhvdWdoIG5vbmUgcmVxdWVzdGVkJzsKICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wcm90b2NvbCAmJiAhc2VydmVyUHJvdCkgewogICAgICBwcm90RXJyb3IgPSAnc2VydmVyIHNlbnQgbm8gc3VicHJvdG9jb2wgZXZlbiB0aG91Z2ggcmVxdWVzdGVkJzsKICAgIH0gZWxzZSBpZiAoc2VydmVyUHJvdCAmJiBwcm90TGlzdC5pbmRleE9mKHNlcnZlclByb3QpID09PSAtMSkgewogICAgICBwcm90RXJyb3IgPSAnc2VydmVyIHJlc3BvbmRlZCB3aXRoIGFuIGludmFsaWQgcHJvdG9jb2wnOwogICAgfQoKICAgIGlmIChwcm90RXJyb3IpIHsKICAgICAgc29ja2V0LmRlc3Ryb3koKTsKICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcihwcm90RXJyb3IpKTsKICAgICAgcmV0dXJuIHRoaXMuZmluYWxpemUodHJ1ZSk7CiAgICB9CgogICAgaWYgKHNlcnZlclByb3QpIHRoaXMucHJvdG9jb2wgPSBzZXJ2ZXJQcm90OwoKICAgIGNvbnN0IHNlcnZlckV4dGVuc2lvbnMgPSBFeHRlbnNpb25zLnBhcnNlKHJlcy5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWV4dGVuc2lvbnMnXSk7CgogICAgaWYgKHBlck1lc3NhZ2VEZWZsYXRlICYmIHNlcnZlckV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHsKICAgICAgdHJ5IHsKICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZS5hY2NlcHQoc2VydmVyRXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHNvY2tldC5kZXN0cm95KCk7CiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignaW52YWxpZCBleHRlbnNpb24gcGFyYW1ldGVyJykpOwogICAgICAgIHJldHVybiB0aGlzLmZpbmFsaXplKHRydWUpOwogICAgICB9CgogICAgICB0aGlzLmV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0gPSBwZXJNZXNzYWdlRGVmbGF0ZTsKICAgIH0KCiAgICB0aGlzLnNldFNvY2tldChzb2NrZXQsIGhlYWQpOwogIH0pOwp9CgoKLyoqKi8gfSksCi8qIDE5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiZXZlbnRzIik7CgovKioqLyB9KSwKLyogMjAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJodHRwIik7CgovKioqLyB9KSwKLyogMjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJ1cmwiKTsKCi8qKiovIH0pLAovKiAyMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDIzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICB9Cn07CgovKioqLyB9KSwKLyogMjQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICB9CiAgfQoKICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgcmV0dXJuIENvbnN0cnVjdG9yOwogIH07Cn0oKTsKCi8qKiovIH0pLAovKiAyNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8qIQogKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnQKICogQ29weXJpZ2h0KGMpIDIwMTEgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+CiAqIE1JVCBMaWNlbnNlZAogKi8KCgoKY29uc3QgV2ViU29ja2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7CgpXZWJTb2NrZXQuU2VydmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nik7CldlYlNvY2tldC5SZWNlaXZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwpXZWJTb2NrZXQuU2VuZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7Cgptb2R1bGUuZXhwb3J0cyA9IFdlYlNvY2tldDsKCgovKioqLyB9KSwKLyogMjYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7Cgp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfd3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTsKCnZhciBfd3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd3MpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCnZhciBWZXJ0eFByb3RvU3R1YiA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgICBfY29udGludW91c09wZW46IGJvb2xlYW4KICAgICBfcnVudGltZVByb3RvU3R1YlVSTDogc3RyaW5nCiAgICBfYnVzOiBNaW5pQnVzCiAgICBfbXNnQ2FsbGJhY2s6IChNZXNzYWdlKSA9PiB2b2lkCiAgICBfY29uZmlnOiB7IHVybCwgcnVudGltZVVSTCB9CiAgICAgX3NvY2s6IChXZWJTb2NrZXQgfCBTb2NrSlMpCiAgICBfcmVPcGVuOiBib29sZWFuCiAgKi8KCiAgLyoqCiAgICogVmVydHggUHJvdG9TdHViIGNyZWF0aW9uCiAgICogQHBhcmFtICB7c3RyaW5nfSBydW50aW1lUHJvdG9TdHViVVJMIC0gVVJMIHVzZWQgaW50ZXJuYWxseSBmb3IgbWVzc2FnZSBkZWxpdmVyeSBwb2ludC4gTm90IHVzZWQgZm9yIE1lc3NhZ2VOb2RlIGRlbGl2ZXIuCiAgICogQHBhcmFtICB7TWluaUJ1c30gYnVzIC0gTWluaUJ1cyB1c2VkIHRvIHNlbmQvcmVjZWl2ZSBtZXNzYWdlcy4gTm9ybWFsbHkgY29ubmVjdGVkIHRvIHRoZSBNZXNzYWdlQnVzLgogICAqIEBwYXJhbSAge09iamVjdH0gY29uZmlnIC0gTWFuZGF0b3J5IGZpZWxkcyBhcmU6ICJ1cmwiIG9mIHRoZSBNZXNzYWdlTm9kZSBhZGRyZXNzIGFuZCAicnVudGltZVVSTCIuCiAgICogQHJldHVybiB7VmVydHhQcm90b1N0dWJ9CiAgICovCiAgZnVuY3Rpb24gVmVydHhQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFZlcnR4UHJvdG9TdHViKTsKCiAgICBpZiAoIXJ1bnRpbWVQcm90b1N0dWJVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIHJ1bnRpbWVQcm90b1N0dWJVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgYnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWcpIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICBpZiAoIWNvbmZpZy51cmwpIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZy51cmwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZy5ydW50aW1lVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWcucnVudGltZVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuX2lkID0gMDsKICAgIHRoaXMuX2NvbnRpbnVvdXNPcGVuID0gdHJ1ZTsKCiAgICB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgIHRoaXMuX2J1cyA9IGJ1czsKICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZzsKCiAgICB0aGlzLl9ydW50aW1lU2Vzc2lvblVSTCA9IGNvbmZpZy5ydW50aW1lVVJMOwogICAgdGhpcy5fcmVPcGVuID0gZmFsc2U7CgogICAgYnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICBjb25zb2xlLmxvZygnW1ZlcnR4UHJvdG9TdHViXSBvdXRnb2luZyBtZXNzYWdlOiAnLCBtc2cpOwogICAgICBfdGhpcy5fb3BlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLl9maWx0ZXIobXNnKSkgewogICAgICAgICAgbXNnLmJvZHkudmlhID0gX3RoaXMyLl9ydW50aW1lUHJvdG9TdHViVVJMOwogICAgICAgICAgY29uc29sZS5sb2coJ1tWZXJ0eFByb3RvU3R1YjogUHJvdG9TdHViIC0+IE1OXScsIG1zZyk7CiAgICAgICAgICBfdGhpcy5fc29jay5zZW5kKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShtc2cpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CgogICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2NyZWF0ZWQnKTsKICB9CgogIC8qKgogICAqIEdldCB0aGUgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBQcm90b1N0dWIKICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gTWFuZGF0b3J5IGZpZWxkcyBhcmU6ICJ1cmwiIG9mIHRoZSBNZXNzYWdlTm9kZSBhZGRyZXNzIGFuZCAicnVudGltZVVSTCIuCiAgICovCgoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShWZXJ0eFByb3RvU3R1YiwgW3sKICAgIGtleTogJ2Nvbm5lY3QnLAoKCiAgICAvKioKICAgICAqIFRyeSB0byBvcGVuIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBNZXNzYWdlTm9kZS4gQ29ubmVjdGlvbiBpcyBhdXRvIG1hbmFnZWQsIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCB0aGlzIGV4cGxpY2l0bHkuCiAgICAgKiBIb3dldmVyLCBpZiAiZGlzY29ubmVjdCgpIiBpcyBjYWxsZWQsIGl0J3MgbmVjZXNzYXJ5IHRvIGNhbGwgdGhpcyB0byBlbmFibGUgY29ubmVjdGlvbnMgYWdhaW4uCiAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiwgY29udGFpbmluZyB0aGUgdmFsdWUgImNvbm5lY3RlZCIgaWYgc3VjY2Vzc2Z1bCwgb3IgImRpc2Nvbm5lY3RlZCIgaWYgc29tZSBlcnJvciBvY2N1cnMuCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2NvbnRpbnVvdXNPcGVuID0gdHJ1ZTsKICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkge30pOwogICAgfQoKICAgIC8qKgogICAgICogSXQgd2lsbCBkaXNjb25uZWN0IGFuZCBvcmRlciB0byBzdGF5IGRpc2Nvbm5lY3RlZC4gUmVjb25uZWN0aW9uIHRyaWVzLCB3aWxsIG5vdCBiZSBhdHRlbXB0ZWQsIHVubGVzcyAiY29ubmVjdCgpIiBpcyBjYWxsZWQuCiAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiB3aXRoIHZhbHVlICJkaXNjb25uZWN0ZWQiLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2Rpc2Nvbm5lY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJyk7CgogICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSBmYWxzZTsKICAgICAgaWYgKF90aGlzLl9zb2NrKSB7CiAgICAgICAgX3RoaXMuX3NlbmRDbG9zZSgpOwogICAgICB9CiAgICB9CgogICAgLy90b2RvOiBhZGQgZG9jdW1lbnRhdGlvbgoKICB9LCB7CiAgICBrZXk6ICdfc2VuZE9wZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kT3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5fc2VuZFN0YXR1cygnaW4tcHJvZ3Jlc3MnKTsKCiAgICAgIF90aGlzLl9pZCsrOwogICAgICB2YXIgbXNnID0gewogICAgICAgIGlkOiBfdGhpcy5faWQsIHR5cGU6ICdvcGVuJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9yZU9wZW4pIHsKICAgICAgICBtc2cudHlwZSA9ICdyZS1vcGVuJzsKICAgICAgfQoKICAgICAgLy9yZWdpc3RlciBhbmQgd2FpdCBmb3Igb3BlbiByZXBseS4uLgogICAgICB2YXIgaGFzUmVzcG9uc2UgPSBmYWxzZTsKICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayA9IGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGlmIChyZXBseS50eXBlID09PSAncmVzcG9uc2UnICYgcmVwbHkuaWQgPT09IG1zZy5pZCkgewogICAgICAgICAgaGFzUmVzcG9uc2UgPSB0cnVlOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LnJ1bnRpbWVUb2tlbikgewogICAgICAgICAgICAgIC8vc2V0dXAgcnVudGltZVNlc3Npb24KICAgICAgICAgICAgICBfdGhpcy5fcmVPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLnJ1bnRpbWVVUkwgKyAnLycgKyByZXBseS5ib2R5LnJ1bnRpbWVUb2tlbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2xpdmUnKTsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdmYWlsZWQnLCByZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIF90aGlzLl9zb2NrLnNlbmQoKDAsIF9zdHJpbmdpZnkyLmRlZmF1bHQpKG1zZykpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIWhhc1Jlc3BvbnNlKSB7CiAgICAgICAgICAvL25vIHJlc3BvbnNlIGFmdGVyIHggc2Vjb25kcy4uLgogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsICdUaW1lb3V0IGZyb20gbW46L3Nlc3Npb24nKTsKICAgICAgICB9CiAgICAgIH0sIDMwMDApOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kQ2xvc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kQ2xvc2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5faWQrKzsKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICBpZDogX3RoaXMuX2lkLCB0eXBlOiAnY2xvc2UnLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCiAgICAgIH07CgogICAgICAvL2ludmFsaWRhdGUgcnVudGltZVNlc3Npb24KICAgICAgX3RoaXMuX3JlT3BlbiA9IGZhbHNlOwogICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLl9ydW50aW1lVVJMOwoKICAgICAgX3RoaXMuX3NvY2suc2VuZCgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkobXNnKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRTdGF0dXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCdbVmVydHhQcm90b3N0dWIgc3RhdHVzIGNoYW5nZWRdIHRvICcsIHZhbHVlKTsKCiAgICAgIF90aGlzLl9zdGF0ZSA9IHZhbHVlOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAndXBkYXRlJywKICAgICAgICBmcm9tOiBfdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICB0bzogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgYm9keTogewogICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHJlYXNvbikgewogICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CiAgICAgIH0KCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfd2FpdFJlYWR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfd2FpdFJlYWR5KGNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuX3NvY2sucmVhZHlTdGF0ZSA9PT0gMSkgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19maWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2RlbGl2ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxpdmVyKG1zZykgewogICAgICBpZiAoIW1zZy5ib2R5KSBtc2cuYm9keSA9IHt9OwoKICAgICAgbXNnLmJvZHkudmlhID0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgY29uc29sZS5sb2coJ1tWZXJ0eFByb3RvU3R1YjogTU4gLT4gUHJvdG9TdHViXScsIG1zZyk7CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgfQoKICAgIC8vIGFkZCBkb2N1bWVudGF0aW9uCgogIH0sIHsKICAgIGtleTogJ19vcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl9jb250aW51b3VzT3BlbikgewogICAgICAgIC8vVE9ETzogc2VuZCBzdGF0dXMgKHNlbnQgbWVzc2FnZSBlcnJvciAtIGRpc2Nvbm5lY3RlZCkKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghX3RoaXMuX3NvY2spIHsKICAgICAgICBpZiAoX3RoaXMuX2NvbmZpZy51cmwuc3Vic3RyaW5nKDAsIDIpID09PSAnd3MnKSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBfd3MyLmRlZmF1bHQoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBTb2NrSlMoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuX3NvY2sub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3NlbmRPcGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShlLmRhdGEpOwogICAgICAgICAgY29uc29sZS5sb2coJ1tWZXJ0eFByb3RvU3R1YjogTU4gLT4gU09DS0VUIE9OIE1FU1NBR0VdJywgbXNnKTsKICAgICAgICAgIGlmIChtc2cuZnJvbSA9PT0gJ21uOi9zZXNzaW9uJykgewogICAgICAgICAgICBpZiAoX3RoaXMuX3Nlc3Npb25DYWxsYmFjaykgewogICAgICAgICAgICAgIF90aGlzLl9zZXNzaW9uQ2FsbGJhY2sobXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKF90aGlzLl9maWx0ZXIobXNnKSkgewogICAgICAgICAgICAgIF90aGlzLl9kZWxpdmVyKG1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBfdGhpcy5fc29jay5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICB2YXIgcmVhc29uID0gdm9pZCAwOwoKICAgICAgICAgIC8vU2VlIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NDU1I3NlY3Rpb24tNy40CiAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMCkgewogICAgICAgICAgICByZWFzb24gPSAnTm9ybWFsIGNsb3N1cmUsIG1lYW5pbmcgdGhhdCB0aGUgcHVycG9zZSBmb3Igd2hpY2ggdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkIGhhcyBiZWVuIGZ1bGZpbGxlZC4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAxKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyBcJ2dvaW5nIGF3YXlcJywgc3VjaCBhcyBhIHNlcnZlciBnb2luZyBkb3duIG9yIGEgYnJvd3NlciBoYXZpbmcgbmF2aWdhdGVkIGF3YXkgZnJvbSBhIHBhZ2UuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMikgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gZHVlIHRvIGEgcHJvdG9jb2wgZXJyb3InOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAzKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIHR5cGUgb2YgZGF0YSBpdCBjYW5ub3QgYWNjZXB0IChlLmcuLCBhbiBlbmRwb2ludCB0aGF0IHVuZGVyc3RhbmRzIG9ubHkgdGV4dCBkYXRhIE1BWSBzZW5kIHRoaXMgaWYgaXQgcmVjZWl2ZXMgYSBiaW5hcnkgbWVzc2FnZSkuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNCkgewogICAgICAgICAgICByZWFzb24gPSAnUmVzZXJ2ZWQuIFRoZSBzcGVjaWZpYyBtZWFuaW5nIG1pZ2h0IGJlIGRlZmluZWQgaW4gdGhlIGZ1dHVyZS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA1KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdObyBzdGF0dXMgY29kZSB3YXMgYWN0dWFsbHkgcHJlc2VudC4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA2KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGFibm9ybWFsbHksIGUuZy4sIHdpdGhvdXQgc2VuZGluZyBvciByZWNlaXZpbmcgYSBDbG9zZSBjb250cm9sIGZyYW1lJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNykgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgZGF0YSB3aXRoaW4gYSBtZXNzYWdlIHRoYXQgd2FzIG5vdCBjb25zaXN0ZW50IHdpdGggdGhlIHR5cGUgb2YgdGhlIG1lc3NhZ2UgKGUuZy4sIG5vbi1VVEYtOCBbaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzYyOV0gZGF0YSB3aXRoaW4gYSB0ZXh0IG1lc3NhZ2UpLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDgpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0ICJ2aW9sYXRlcyBpdHMgcG9saWN5Ii4gVGhpcyByZWFzb24gaXMgZ2l2ZW4gZWl0aGVyIGlmIHRoZXJlIGlzIG5vIG90aGVyIHN1dGlibGUgcmVhc29uLCBvciBpZiB0aGVyZSBpcyBhIG5lZWQgdG8gaGlkZSBzcGVjaWZpYyBkZXRhaWxzIGFib3V0IHRoZSBwb2xpY3kuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwOSkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgaXMgdG9vIGJpZyBmb3IgaXQgdG8gcHJvY2Vzcy4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDEwKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCAoY2xpZW50KSBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyBleHBlY3RlZCB0aGUgc2VydmVyIHRvIG5lZ290aWF0ZSBvbmUgb3IgbW9yZSBleHRlbnNpb24sIGJ1dCB0aGUgc2VydmVyIGRpZG5cJ3QgcmV0dXJuIHRoZW0gaW4gdGhlIHJlc3BvbnNlIG1lc3NhZ2Ugb2YgdGhlIFdlYlNvY2tldCBoYW5kc2hha2UuIDxiciAvPiBTcGVjaWZpY2FsbHksIHRoZSBleHRlbnNpb25zIHRoYXQgYXJlIG5lZWRlZCBhcmU6ICcgKyBldmVudC5yZWFzb247CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTEpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0Egc2VydmVyIGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgZW5jb3VudGVyZWQgYW4gdW5leHBlY3RlZCBjb25kaXRpb24gdGhhdCBwcmV2ZW50ZWQgaXQgZnJvbSBmdWxmaWxsaW5nIHRoZSByZXF1ZXN0Lic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTUpIHsKICAgICAgICAgICAgcmVhc29uID0gJ1RoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgZHVlIHRvIGEgZmFpbHVyZSB0byBwZXJmb3JtIGEgVExTIGhhbmRzaGFrZSAoZS5nLiwgdGhlIHNlcnZlciBjZXJ0aWZpY2F0ZSBjYW5cJ3QgYmUgdmVyaWZpZWQpLic7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWFzb24gPSAnVW5rbm93biByZWFzb24nOwogICAgICAgICAgfQoKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc29jazsKICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdkaXNjb25uZWN0ZWQnLCByZWFzb24pOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdjb25maWcnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWc7CiAgICB9CiAgfSwgewogICAga2V5OiAncnVudGltZVNlc3Npb24nLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9ydW50aW1lU2Vzc2lvblVSTDsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFZlcnR4UHJvdG9TdHViOwp9KCk7IC8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnVmVydHhQcm90b1N0dWInLAogICAgaW5zdGFuY2U6IG5ldyBWZXJ0eFByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCi8qKgoqIENhbGxiYWNrIHVzZWQgdG8gc2VuZCBtZXNzYWdlcwoqIEBjYWxsYmFjayBQb3N0TWVzc2FnZQoqIEBwYXJhbSB7TWVzc2FnZX0gbXNnIC0gTWVzc2FnZSB0byBzZW5kCiovCgptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAyNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDI4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKLyohCiAqIGJ1ZmZlcnV0aWw6IFdlYlNvY2tldCBidWZmZXIgdXRpbHMKICogQ29weXJpZ2h0KGMpIDIwMTUgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+CiAqIE1JVCBMaWNlbnNlZAogKi8KCgoKLyoqCiAqIE1hc2tzIGEgYnVmZmVyIHVzaW5nIHRoZSBnaXZlbiBtYXNrLgogKgogKiBAcGFyYW0ge0J1ZmZlcn0gc291cmNlIFRoZSBidWZmZXIgdG8gbWFzawogKiBAcGFyYW0ge0J1ZmZlcn0gbWFzayBUaGUgbWFzayB0byB1c2UKICogQHBhcmFtIHtCdWZmZXJ9IG91dHB1dCBUaGUgYnVmZmVyIHdoZXJlIHRvIHN0b3JlIHRoZSByZXN1bHQKICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCBUaGUgb2Zmc2V0IGF0IHdoaWNoIHRvIHN0YXJ0IHdyaXRpbmcKICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIG1hc2suCiAqIEBwdWJsaWMKICovCmNvbnN0IG1hc2sgPSAoc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKSA9PiB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgb3V0cHV0W29mZnNldCArIGldID0gc291cmNlW2ldIF4gbWFza1tpICYgM107CiAgfQp9OwoKLyoqCiAqIFVubWFza3MgYSBidWZmZXIgdXNpbmcgdGhlIGdpdmVuIG1hc2suCiAqCiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgVGhlIGJ1ZmZlciB0byB1bm1hc2sKICogQHBhcmFtIHtCdWZmZXJ9IG1hc2sgVGhlIG1hc2sgdG8gdXNlCiAqIEBwdWJsaWMKICovCmNvbnN0IHVubWFzayA9IChidWZmZXIsIG1hc2spID0+IHsKICAvLyBSZXF1aXJlZCB1bnRpbCBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzkwMDYgaXMgcmVzb2x2ZWQuCiAgY29uc3QgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aDsKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICBidWZmZXJbaV0gXj0gbWFza1tpICYgM107CiAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSB7IG1hc2ssIHVubWFzayB9OwoKCi8qKiovIH0pLAovKiAyOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKdHJ5IHsKICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOSkoJ2J1ZmZlcnV0aWwnKTsKfSBjYXRjaCAoZSkgewogIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7Cn0KCgovKioqLyB9KSwKLyogMzAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGNvcmUgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKQogICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogIHJldHVybiAkSlNPTi5zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3VtZW50cyk7Cn07CgovKioqLyB9KSwKLyogMzEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7CnZhciAkT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5PYmplY3Q7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7CiAgcmV0dXJuICRPYmplY3QuZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyk7Cn07CgovKioqLyB9KSwKLyogMzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTsKICByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogMzMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgaWYoIWlzT2JqZWN0KGl0KSl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7CiAgcmV0dXJuIGl0Owp9OwoKLyoqKi8gfSksCi8qIDM0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZwp2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIHRoYXQsIGxlbmd0aCl7CiAgYUZ1bmN0aW9uKGZuKTsKICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuOwogIHN3aXRjaChsZW5ndGgpewogICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7CiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpOwogICAgfTsKICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpewogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTsKICAgIH07CiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7CiAgICB9OwogIH0KICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7CiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICB9Owp9OwoKLyoqKi8gfSksCi8qIDM1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSkuZG9jdW1lbnQKICAvLyBpbiBvbGQgSUUgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCcKICAsIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9Owp9OwoKLyoqKi8gfSksCi8qIDM2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKQogICwgY29yZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKQogICwgY3R4ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCkKICAsIGhpZGUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpCiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXsKICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRgogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlMKICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUAogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LlcKICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSkKICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdCiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV0KICAgICwga2V5LCBvd24sIG91dDsKICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsKICBmb3Ioa2V5IGluIHNvdXJjZSl7CiAgICAvLyBjb250YWlucyBpbiBuYXRpdmUKICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7CiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7CiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZAogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsKICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcwogICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKQogICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnkKICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7CiAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7CiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpewogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpewogICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQzsKICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7CiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOwogICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7CiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07CiAgICAgIHJldHVybiBGOwogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7CiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKICAgIGlmKElTX1BST1RPKXsKICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0OwogICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsKICAgIH0KICB9Cn07Ci8vIHR5cGUgYml0bWFwCiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsCiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljCiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG8KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kCiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcAokZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmUKJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgCm1vZHVsZS5leHBvcnRzID0gJGV4cG9ydDsKCi8qKiovIH0pLAovKiAzNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSA/IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7CiAgcmV0dXJuIGRQLmYob2JqZWN0LCBrZXksIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsKfSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7CiAgb2JqZWN0W2tleV0gPSB2YWx1ZTsKICByZXR1cm4gb2JqZWN0Owp9OwoKLyoqKi8gfSksCi8qIDM4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gIV9fd2VicGFja19yZXF1aXJlX18oMSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18oMTApKGZ1bmN0aW9uKCl7CiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KSgnZGl2JyksICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7Cn0pOwoKLyoqKi8gfSksCi8qIDM5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYml0bWFwLCB2YWx1ZSl7CiAgcmV0dXJuIHsKICAgIGVudW1lcmFibGUgIDogIShiaXRtYXAgJiAxKSwKICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSwKICAgIHdyaXRhYmxlICAgIDogIShiaXRtYXAgJiA0KSwKICAgIHZhbHVlICAgICAgIDogdmFsdWUKICB9Owp9OwoKLyoqKi8gfSksCi8qIDQwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDcuMS4xIFRvUHJpbWl0aXZlKGlucHV0IFssIFByZWZlcnJlZFR5cGVdKQp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQovLyBhbmQgdGhlIHNlY29uZCBhcmd1bWVudCAtIGZsYWcgLSBwcmVmZXJyZWQgdHlwZSBpcyBhIHN0cmluZwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBTKXsKICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDsKICB2YXIgZm4sIHZhbDsKICBpZihTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7CiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIGlmKCFTICYmIHR5cGVvZiAoZm4gPSBpdC50b1N0cmluZykgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNPYmplY3QodmFsID0gZm4uY2FsbChpdCkpKXJldHVybiB2YWw7CiAgdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKTsKfTsKCi8qKiovIH0pLAovKiA0MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwovLyAxOS4xLjIuNCAvIDE1LjIuMy42IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLCAnT2JqZWN0Jywge2RlZmluZVByb3BlcnR5OiBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKS5mfSk7CgovKioqLyB9KSwKLyogNDIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovKiEKICogVVRGLTggdmFsaWRhdGU6IFVURi04IHZhbGlkYXRpb24gZm9yIFdlYlNvY2tldHMuCiAqIENvcHlyaWdodChjKSAyMDE1IEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPgogKiBNSVQgTGljZW5zZWQKICovCgoKCi8qKgogKiBDaGVja3MgaWYgYSBnaXZlbiBidWZmZXIgY29udGFpbnMgb25seSBjb3JyZWN0IFVURi04LgogKiBQb3J0ZWQgZnJvbSBodHRwczovL3d3dy5jbC5jYW0uYWMudWsvJTdFbWdrMjUvdWNzL3V0ZjhfY2hlY2suYyBieQogKiBNYXJrdXMgS3Vobi4KICoKICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZiBUaGUgYnVmZmVyIHRvIGNoZWNrCiAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBgYnVmYCBjb250YWlucyBvbmx5IGNvcnJlY3QgVVRGLTgsIGVsc2UgYGZhbHNlYAogKiBAcHVibGljCiAqLwpjb25zdCBpc1ZhbGlkVVRGOCA9IChidWYpID0+IHsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBuZWVkcyB0byBiZSBhIGJ1ZmZlcicpOwogIH0KCiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGg7CiAgdmFyIGkgPSAwOwoKICB3aGlsZSAoaSA8IGxlbikgewogICAgaWYgKGJ1ZltpXSA8IDB4ODApIHsgIC8vIDB4eHh4eHh4CiAgICAgIGkrKzsKICAgIH0gZWxzZSBpZiAoKGJ1ZltpXSAmIDB4ZTApID09PSAweGMwKSB7ICAvLyAxMTB4eHh4eCAxMHh4eHh4eAogICAgICBpZiAoCiAgICAgICAgaSArIDEgPT09IGxlbiB8fAogICAgICAgIChidWZbaSArIDFdICYgMHhjMCkgIT09IDB4ODAgfHwKICAgICAgICAoYnVmW2ldICYgMHhmZSkgPT09IDB4YzAgIC8vIG92ZXJsb25nCiAgICAgICkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpICs9IDI7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoKGJ1ZltpXSAmIDB4ZjApID09PSAweGUwKSB7ICAvLyAxMTEweHh4eCAxMHh4eHh4eCAxMHh4eHh4eAogICAgICBpZiAoCiAgICAgICAgaSArIDIgPj0gbGVuIHx8CiAgICAgICAgKGJ1ZltpICsgMV0gJiAweGMwKSAhPT0gMHg4MCB8fAogICAgICAgIChidWZbaSArIDJdICYgMHhjMCkgIT09IDB4ODAgfHwKICAgICAgICBidWZbaV0gPT09IDB4ZTAgJiYgKGJ1ZltpICsgMV0gJiAweGUwKSA9PT0gMHg4MCB8fCAgLy8gb3ZlcmxvbmcKICAgICAgICBidWZbaV0gPT09IDB4ZWQgJiYgKGJ1ZltpICsgMV0gJiAweGUwKSA9PT0gMHhhMCAgICAgLy8gc3Vycm9nYXRlIChVK0Q4MDAgLSBVK0RGRkYpCiAgICAgICkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpICs9IDM7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoKGJ1ZltpXSAmIDB4ZjgpID09PSAweGYwKSB7ICAvLyAxMTExMHh4eCAxMHh4eHh4eCAxMHh4eHh4eCAxMHh4eHh4eAogICAgICBpZiAoCiAgICAgICAgaSArIDMgPj0gbGVuIHx8CiAgICAgICAgKGJ1ZltpICsgMV0gJiAweGMwKSAhPT0gMHg4MCB8fAogICAgICAgIChidWZbaSArIDJdICYgMHhjMCkgIT09IDB4ODAgfHwKICAgICAgICAoYnVmW2kgKyAzXSAmIDB4YzApICE9PSAweDgwIHx8CiAgICAgICAgYnVmW2ldID09PSAweGYwICYmIChidWZbaSArIDFdICYgMHhmMCkgPT09IDB4ODAgfHwgIC8vIG92ZXJsb25nCiAgICAgICAgYnVmW2ldID09PSAweGY0ICYmIGJ1ZltpICsgMV0gPiAweDhmIHx8IGJ1ZltpXSA+IDB4ZjQgIC8vID4gVSsxMEZGRkYKICAgICAgKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGkgKz0gNDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgcmV0dXJuIHRydWU7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGlzVmFsaWRVVEY4OwoKCi8qKiovIH0pLAovKiA0MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKdHJ5IHsKICBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oOSkoJ3ZhbGlkYXRpb24nKTsKfSBjYXRjaCAoZSkgewogIG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7Cn0KCgovKioqLyB9KSwKLyogNDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCi8qKgogKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gZXZlbnQuCiAqCiAqIEBwcml2YXRlCiAqLwpjbGFzcyBFdmVudCB7CiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IGBFdmVudGAuCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQKICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0IEEgcmVmZXJlbmNlIHRvIHRoZSB0YXJnZXQgdG8gd2hpY2ggdGhlIGV2ZW50IHdhcyBkaXNwYXRjaGVkCiAgICovCiAgY29uc3RydWN0b3IgKHR5cGUsIHRhcmdldCkgewogICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7CiAgICB0aGlzLnR5cGUgPSB0eXBlOwogIH0KfQoKLyoqCiAqIENsYXNzIHJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZXZlbnQuCiAqCiAqIEBleHRlbmRzIEV2ZW50CiAqIEBwcml2YXRlCiAqLwpjbGFzcyBNZXNzYWdlRXZlbnQgZXh0ZW5kcyBFdmVudCB7CiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IGBNZXNzYWdlRXZlbnRgLgogICAqCiAgICogQHBhcmFtIHsoU3RyaW5nfEJ1ZmZlcnxBcnJheUJ1ZmZlcnxCdWZmZXJbXSl9IGRhdGEgVGhlIHJlY2VpdmVkIGRhdGEKICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzQmluYXJ5IFNwZWNpZmllcyBpZiBgZGF0YWAgaXMgYmluYXJ5CiAgICogQHBhcmFtIHtXZWJTb2NrZXR9IHRhcmdldCBBIHJlZmVyZW5jZSB0byB0aGUgdGFyZ2V0IHRvIHdoaWNoIHRoZSBldmVudCB3YXMgZGlzcGF0Y2hlZAogICAqLwogIGNvbnN0cnVjdG9yIChkYXRhLCBpc0JpbmFyeSwgdGFyZ2V0KSB7CiAgICBzdXBlcignbWVzc2FnZScsIHRhcmdldCk7CgogICAgdGhpcy5iaW5hcnkgPSBpc0JpbmFyeTsgLy8gbm9uLXN0YW5kYXJkLgogICAgdGhpcy5kYXRhID0gZGF0YTsKICB9Cn0KCi8qKgogKiBDbGFzcyByZXByZXNlbnRpbmcgYSBjbG9zZSBldmVudC4KICoKICogQGV4dGVuZHMgRXZlbnQKICogQHByaXZhdGUKICovCmNsYXNzIENsb3NlRXZlbnQgZXh0ZW5kcyBFdmVudCB7CiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IGBDbG9zZUV2ZW50YC4KICAgKgogICAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBzdGF0dXMgY29kZSBleHBsYWluaW5nIHdoeSB0aGUgY29ubmVjdGlvbiBpcyBiZWluZyBjbG9zZWQKICAgKiBAcGFyYW0ge1N0cmluZ30gcmVhc29uIEEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIGV4cGxhaW5pbmcgd2h5IHRoZSBjb25uZWN0aW9uIGlzIGNsb3NpbmcKICAgKiBAcGFyYW0ge1dlYlNvY2tldH0gdGFyZ2V0IEEgcmVmZXJlbmNlIHRvIHRoZSB0YXJnZXQgdG8gd2hpY2ggdGhlIGV2ZW50IHdhcyBkaXNwYXRjaGVkCiAgICovCiAgY29uc3RydWN0b3IgKGNvZGUsIHJlYXNvbiwgdGFyZ2V0KSB7CiAgICBzdXBlcignY2xvc2UnLCB0YXJnZXQpOwoKICAgIHRoaXMud2FzQ2xlYW4gPSBjb2RlID09PSB1bmRlZmluZWQgfHwgY29kZSA9PT0gMTAwMDsKICAgIHRoaXMucmVhc29uID0gcmVhc29uOwogICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7CiAgICB0aGlzLnR5cGUgPSAnY2xvc2UnOwogICAgdGhpcy5jb2RlID0gY29kZTsKICB9Cn0KCi8qKgogKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gb3BlbiBldmVudC4KICoKICogQGV4dGVuZHMgRXZlbnQKICogQHByaXZhdGUKICovCmNsYXNzIE9wZW5FdmVudCBleHRlbmRzIEV2ZW50IHsKICAvKioKICAgKiBDcmVhdGUgYSBuZXcgYE9wZW5FdmVudGAuCiAgICoKICAgKiBAcGFyYW0ge1dlYlNvY2tldH0gdGFyZ2V0IEEgcmVmZXJlbmNlIHRvIHRoZSB0YXJnZXQgdG8gd2hpY2ggdGhlIGV2ZW50IHdhcyBkaXNwYXRjaGVkCiAgICovCiAgY29uc3RydWN0b3IgKHRhcmdldCkgewogICAgc3VwZXIoJ29wZW4nLCB0YXJnZXQpOwogIH0KfQoKLyoqCiAqIFRoaXMgcHJvdmlkZXMgbWV0aG9kcyBmb3IgZW11bGF0aW5nIHRoZSBgRXZlbnRUYXJnZXRgIGludGVyZmFjZS4gSXQncyBub3QKICogbWVhbnQgdG8gYmUgdXNlZCBkaXJlY3RseS4KICoKICogQG1peGluCiAqLwpjb25zdCBFdmVudFRhcmdldCA9IHsKICAvKioKICAgKiBSZWdpc3RlciBhbiBldmVudCBsaXN0ZW5lci4KICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2QgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBldmVudCB0eXBlIHRvIGxpc3RlbiBmb3IKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gYWRkCiAgICogQHB1YmxpYwogICAqLwogIGFkZEV2ZW50TGlzdGVuZXIgKG1ldGhvZCwgbGlzdGVuZXIpIHsKICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHJldHVybjsKCiAgICBmdW5jdGlvbiBvbk1lc3NhZ2UgKGRhdGEsIGZsYWdzKSB7CiAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgbmV3IE1lc3NhZ2VFdmVudChkYXRhLCAhIWZsYWdzLmJpbmFyeSwgdGhpcykpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uQ2xvc2UgKGNvZGUsIG1lc3NhZ2UpIHsKICAgICAgbGlzdGVuZXIuY2FsbCh0aGlzLCBuZXcgQ2xvc2VFdmVudChjb2RlLCBtZXNzYWdlLCB0aGlzKSk7CiAgICB9CgogICAgZnVuY3Rpb24gb25FcnJvciAoZXZlbnQpIHsKICAgICAgZXZlbnQudHlwZSA9ICdlcnJvcic7CiAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7CiAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgZXZlbnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uT3BlbiAoKSB7CiAgICAgIGxpc3RlbmVyLmNhbGwodGhpcywgbmV3IE9wZW5FdmVudCh0aGlzKSk7CiAgICB9CgogICAgaWYgKG1ldGhvZCA9PT0gJ21lc3NhZ2UnKSB7CiAgICAgIG9uTWVzc2FnZS5fbGlzdGVuZXIgPSBsaXN0ZW5lcjsKICAgICAgdGhpcy5vbihtZXRob2QsIG9uTWVzc2FnZSk7CiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ2Nsb3NlJykgewogICAgICBvbkNsb3NlLl9saXN0ZW5lciA9IGxpc3RlbmVyOwogICAgICB0aGlzLm9uKG1ldGhvZCwgb25DbG9zZSk7CiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ2Vycm9yJykgewogICAgICBvbkVycm9yLl9saXN0ZW5lciA9IGxpc3RlbmVyOwogICAgICB0aGlzLm9uKG1ldGhvZCwgb25FcnJvcik7CiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ29wZW4nKSB7CiAgICAgIG9uT3Blbi5fbGlzdGVuZXIgPSBsaXN0ZW5lcjsKICAgICAgdGhpcy5vbihtZXRob2QsIG9uT3Blbik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLm9uKG1ldGhvZCwgbGlzdGVuZXIpOwogICAgfQogIH0sCgogIC8qKgogICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lci4KICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2QgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBldmVudCB0eXBlIHRvIHJlbW92ZQogICAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byByZW1vdmUKICAgKiBAcHVibGljCiAgICovCiAgcmVtb3ZlRXZlbnRMaXN0ZW5lciAobWV0aG9kLCBsaXN0ZW5lcikgewogICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMobWV0aG9kKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykgewogICAgICBpZiAobGlzdGVuZXJzW2ldID09PSBsaXN0ZW5lciB8fCBsaXN0ZW5lcnNbaV0uX2xpc3RlbmVyID09PSBsaXN0ZW5lcikgewogICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIobWV0aG9kLCBsaXN0ZW5lcnNbaV0pOwogICAgICB9CiAgICB9CiAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBFdmVudFRhcmdldDsKCgovKioqLyB9KSwKLyogNDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovKiEKICogd3M6IGEgbm9kZS5qcyB3ZWJzb2NrZXQgY2xpZW50CiAqIENvcHlyaWdodChjKSAyMDExIEVpbmFyIE90dG8gU3Rhbmd2aWsgPGVpbmFyb3NAZ21haWwuY29tPgogKiBNSVQgTGljZW5zZWQKICovCgoKCnRyeSB7CiAgY29uc3QgaXNWYWxpZFVURjggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKCiAgbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2YgaXNWYWxpZFVURjggPT09ICdvYmplY3QnCiAgICA/IGlzVmFsaWRVVEY4LlZhbGlkYXRpb24uaXNWYWxpZFVURjggIC8vIHV0Zi04LXZhbGlkYXRlQDwzLjAuMAogICAgOiBpc1ZhbGlkVVRGODsKfSBjYXRjaCAoZSkgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gewogIG1vZHVsZS5leHBvcnRzID0gKCkgPT4gdHJ1ZTsKfQoKCi8qKiovIH0pLAovKiA0NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8qIQogKiB3czogYSBub2RlLmpzIHdlYnNvY2tldCBjbGllbnQKICogQ29weXJpZ2h0KGMpIDIwMTEgRWluYXIgT3R0byBTdGFuZ3ZpayA8ZWluYXJvc0BnbWFpbC5jb20+CiAqIE1JVCBMaWNlbnNlZAogKi8KCgoKY29uc3Qgc2FmZUJ1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7CmNvbnN0IEV2ZW50RW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpOwpjb25zdCBjcnlwdG8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwpjb25zdCBVbHRyb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTsKY29uc3QgaHR0cCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOwpjb25zdCB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCmNvbnN0IFBlck1lc3NhZ2VEZWZsYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKY29uc3QgRXh0ZW5zaW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwpjb25zdCBjb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwpjb25zdCBXZWJTb2NrZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCmNvbnN0IEJ1ZmZlciA9IHNhZmVCdWZmZXIuQnVmZmVyOwoKLyoqCiAqIENsYXNzIHJlcHJlc2VudGluZyBhIFdlYlNvY2tldCBzZXJ2ZXIuCiAqCiAqIEBleHRlbmRzIEV2ZW50RW1pdHRlcgogKi8KY2xhc3MgV2ViU29ja2V0U2VydmVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHsKICAvKioKICAgKiBDcmVhdGUgYSBgV2ViU29ja2V0U2VydmVyYCBpbnN0YW5jZS4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENvbmZpZ3VyYXRpb24gb3B0aW9ucwogICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLmhvc3QgVGhlIGhvc3RuYW1lIHdoZXJlIHRvIGJpbmQgdGhlIHNlcnZlcgogICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLnBvcnQgVGhlIHBvcnQgd2hlcmUgdG8gYmluZCB0aGUgc2VydmVyCiAgICogQHBhcmFtIHtodHRwLlNlcnZlcn0gb3B0aW9ucy5zZXJ2ZXIgQSBwcmUtY3JlYXRlZCBIVFRQL1Mgc2VydmVyIHRvIHVzZQogICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMudmVyaWZ5Q2xpZW50IEFuIGhvb2sgdG8gcmVqZWN0IGNvbm5lY3Rpb25zCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5oYW5kbGVQcm90b2NvbHMgQW4gaG9vayB0byBoYW5kbGUgcHJvdG9jb2xzCiAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMucGF0aCBBY2NlcHQgb25seSBjb25uZWN0aW9ucyBtYXRjaGluZyB0aGlzIHBhdGgKICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMubm9TZXJ2ZXIgRW5hYmxlIG5vIHNlcnZlciBtb2RlCiAgICogQHBhcmFtIHtCb29sZWFufSBvcHRpb25zLmNsaWVudFRyYWNraW5nIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byB0cmFjayBjbGllbnRzCiAgICogQHBhcmFtIHsoQm9vbGVhbnxPYmplY3QpfSBvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlIEVuYWJsZS9kaXNhYmxlIHBlcm1lc3NhZ2UtZGVmbGF0ZQogICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLm1heFBheWxvYWQgVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlIHNpemUKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBBIGxpc3RlbmVyIGZvciB0aGUgYGxpc3RlbmluZ2AgZXZlbnQKICAgKi8KICBjb25zdHJ1Y3RvciAob3B0aW9ucywgY2FsbGJhY2spIHsKICAgIHN1cGVyKCk7CgogICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oewogICAgICBtYXhQYXlsb2FkOiAxMDAgKiAxMDI0ICogMTAyNCwKICAgICAgcGVyTWVzc2FnZURlZmxhdGU6IHRydWUsCiAgICAgIGhhbmRsZVByb3RvY29sczogbnVsbCwKICAgICAgY2xpZW50VHJhY2tpbmc6IHRydWUsCiAgICAgIHZlcmlmeUNsaWVudDogbnVsbCwKICAgICAgbm9TZXJ2ZXI6IGZhbHNlLAogICAgICBiYWNrbG9nOiBudWxsLCAvLyB1c2UgZGVmYXVsdCAoNTExIGFzIGltcGxlbWVudGVkIGluIG5ldC5qcykKICAgICAgc2VydmVyOiBudWxsLAogICAgICBob3N0OiBudWxsLAogICAgICBwYXRoOiBudWxsLAogICAgICBwb3J0OiBudWxsCiAgICB9LCBvcHRpb25zKTsKCiAgICBpZiAob3B0aW9ucy5wb3J0ID09IG51bGwgJiYgIW9wdGlvbnMuc2VydmVyICYmICFvcHRpb25zLm5vU2VydmVyKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21pc3Npbmcgb3IgaW52YWxpZCBvcHRpb25zJyk7CiAgICB9CgogICAgaWYgKG9wdGlvbnMucG9ydCAhPSBudWxsKSB7CiAgICAgIHRoaXMuX3NlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKChyZXEsIHJlcykgPT4gewogICAgICAgIGNvbnN0IGJvZHkgPSBodHRwLlNUQVRVU19DT0RFU1s0MjZdOwoKICAgICAgICByZXMud3JpdGVIZWFkKDQyNiwgewogICAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogYm9keS5sZW5ndGgsCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nCiAgICAgICAgfSk7CiAgICAgICAgcmVzLmVuZChib2R5KTsKICAgICAgfSk7CiAgICAgIHRoaXMuX3NlcnZlci5hbGxvd0hhbGZPcGVuID0gZmFsc2U7CiAgICAgIHRoaXMuX3NlcnZlci5saXN0ZW4ob3B0aW9ucy5wb3J0LCBvcHRpb25zLmhvc3QsIG9wdGlvbnMuYmFja2xvZywgY2FsbGJhY2spOwogICAgfSBlbHNlIGlmIChvcHRpb25zLnNlcnZlcikgewogICAgICB0aGlzLl9zZXJ2ZXIgPSBvcHRpb25zLnNlcnZlcjsKICAgIH0KCiAgICBpZiAodGhpcy5fc2VydmVyKSB7CiAgICAgIHRoaXMuX3VsdHJvbiA9IG5ldyBVbHRyb24odGhpcy5fc2VydmVyKTsKICAgICAgdGhpcy5fdWx0cm9uLm9uKCdsaXN0ZW5pbmcnLCAoKSA9PiB0aGlzLmVtaXQoJ2xpc3RlbmluZycpKTsKICAgICAgdGhpcy5fdWx0cm9uLm9uKCdlcnJvcicsIChlcnIpID0+IHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpKTsKICAgICAgdGhpcy5fdWx0cm9uLm9uKCd1cGdyYWRlJywgKHJlcSwgc29ja2V0LCBoZWFkKSA9PiB7CiAgICAgICAgdGhpcy5oYW5kbGVVcGdyYWRlKHJlcSwgc29ja2V0LCBoZWFkLCAoY2xpZW50KSA9PiB7CiAgICAgICAgICB0aGlzLmVtaXQoYGNvbm5lY3Rpb24ke3JlcS51cmx9YCwgY2xpZW50KTsKICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbicsIGNsaWVudCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIGlmIChvcHRpb25zLmNsaWVudFRyYWNraW5nKSB0aGlzLmNsaWVudHMgPSBuZXcgU2V0KCk7CiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgdGhpcy5wYXRoID0gb3B0aW9ucy5wYXRoOwogIH0KCiAgLyoqCiAgICogQ2xvc2UgdGhlIHNlcnZlci4KICAgKgogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrCiAgICogQHB1YmxpYwogICAqLwogIGNsb3NlIChjYikgewogICAgLy8KICAgIC8vIFRlcm1pbmF0ZSBhbGwgYXNzb2NpYXRlZCBjbGllbnRzLgogICAgLy8KICAgIGlmICh0aGlzLmNsaWVudHMpIHsKICAgICAgZm9yIChjb25zdCBjbGllbnQgb2YgdGhpcy5jbGllbnRzKSBjbGllbnQudGVybWluYXRlKCk7CiAgICB9CgogICAgY29uc3Qgc2VydmVyID0gdGhpcy5fc2VydmVyOwoKICAgIGlmIChzZXJ2ZXIpIHsKICAgICAgdGhpcy5fdWx0cm9uLmRlc3Ryb3koKTsKICAgICAgdGhpcy5fdWx0cm9uID0gdGhpcy5fc2VydmVyID0gbnVsbDsKCiAgICAgIC8vCiAgICAgIC8vIENsb3NlIHRoZSBodHRwIHNlcnZlciBpZiBpdCB3YXMgaW50ZXJuYWxseSBjcmVhdGVkLgogICAgICAvLwogICAgICBpZiAodGhpcy5vcHRpb25zLnBvcnQgIT0gbnVsbCkgcmV0dXJuIHNlcnZlci5jbG9zZShjYik7CiAgICB9CgogICAgaWYgKGNiKSBjYigpOwogIH0KCiAgLyoqCiAgICogU2VlIGlmIGEgZ2l2ZW4gcmVxdWVzdCBzaG91bGQgYmUgaGFuZGxlZCBieSB0aGlzIHNlcnZlciBpbnN0YW5jZS4KICAgKgogICAqIEBwYXJhbSB7aHR0cC5JbmNvbWluZ01lc3NhZ2V9IHJlcSBSZXF1ZXN0IG9iamVjdCB0byBpbnNwZWN0CiAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSByZXF1ZXN0IGlzIHZhbGlkLCBlbHNlIGBmYWxzZWAKICAgKiBAcHVibGljCiAgICovCiAgc2hvdWxkSGFuZGxlIChyZXEpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMucGF0aCAmJiB1cmwucGFyc2UocmVxLnVybCkucGF0aG5hbWUgIT09IHRoaXMub3B0aW9ucy5wYXRoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIC8qKgogICAqIEhhbmRsZSBhIEhUVFAgVXBncmFkZSByZXF1ZXN0LgogICAqCiAgICogQHBhcmFtIHtodHRwLkluY29taW5nTWVzc2FnZX0gcmVxIFRoZSByZXF1ZXN0IG9iamVjdAogICAqIEBwYXJhbSB7bmV0LlNvY2tldH0gc29ja2V0IFRoZSBuZXR3b3JrIHNvY2tldCBiZXR3ZWVuIHRoZSBzZXJ2ZXIgYW5kIGNsaWVudAogICAqIEBwYXJhbSB7QnVmZmVyfSBoZWFkIFRoZSBmaXJzdCBwYWNrZXQgb2YgdGhlIHVwZ3JhZGVkIHN0cmVhbQogICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrCiAgICogQHB1YmxpYwogICAqLwogIGhhbmRsZVVwZ3JhZGUgKHJlcSwgc29ja2V0LCBoZWFkLCBjYikgewogICAgc29ja2V0Lm9uKCdlcnJvcicsIHNvY2tldEVycm9yKTsKCiAgICBjb25zdCB2ZXJzaW9uID0gK3JlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXZlcnNpb24nXTsKCiAgICBpZiAoCiAgICAgIHJlcS5tZXRob2QgIT09ICdHRVQnIHx8IHJlcS5oZWFkZXJzLnVwZ3JhZGUudG9Mb3dlckNhc2UoKSAhPT0gJ3dlYnNvY2tldCcgfHwKICAgICAgIXJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWtleSddIHx8ICh2ZXJzaW9uICE9PSA4ICYmIHZlcnNpb24gIT09IDEzKSB8fAogICAgICAhdGhpcy5zaG91bGRIYW5kbGUocmVxKQogICAgKSB7CiAgICAgIHJldHVybiBhYm9ydENvbm5lY3Rpb24oc29ja2V0LCA0MDApOwogICAgfQoKICAgIHZhciBwcm90b2NvbCA9IChyZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddIHx8ICcnKS5zcGxpdCgvLCAqLyk7CgogICAgLy8KICAgIC8vIE9wdGlvbmFsbHkgY2FsbCBleHRlcm5hbCBwcm90b2NvbCBzZWxlY3Rpb24gaGFuZGxlci4KICAgIC8vCiAgICBpZiAodGhpcy5vcHRpb25zLmhhbmRsZVByb3RvY29scykgewogICAgICBwcm90b2NvbCA9IHRoaXMub3B0aW9ucy5oYW5kbGVQcm90b2NvbHMocHJvdG9jb2wpOwogICAgICBpZiAocHJvdG9jb2wgPT09IGZhbHNlKSByZXR1cm4gYWJvcnRDb25uZWN0aW9uKHNvY2tldCwgNDAxKTsKICAgIH0gZWxzZSB7CiAgICAgIHByb3RvY29sID0gcHJvdG9jb2xbMF07CiAgICB9CgogICAgLy8KICAgIC8vIE9wdGlvbmFsbHkgY2FsbCBleHRlcm5hbCBjbGllbnQgdmVyaWZpY2F0aW9uIGhhbmRsZXIuCiAgICAvLwogICAgaWYgKHRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQpIHsKICAgICAgY29uc3QgaW5mbyA9IHsKICAgICAgICBvcmlnaW46IHJlcS5oZWFkZXJzW2Ake3ZlcnNpb24gPT09IDggPyAnc2VjLXdlYnNvY2tldC1vcmlnaW4nIDogJ29yaWdpbid9YF0sCiAgICAgICAgc2VjdXJlOiAhIShyZXEuY29ubmVjdGlvbi5hdXRob3JpemVkIHx8IHJlcS5jb25uZWN0aW9uLmVuY3J5cHRlZCksCiAgICAgICAgcmVxCiAgICAgIH07CgogICAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudC5sZW5ndGggPT09IDIpIHsKICAgICAgICB0aGlzLm9wdGlvbnMudmVyaWZ5Q2xpZW50KGluZm8sICh2ZXJpZmllZCwgY29kZSwgbWVzc2FnZSkgPT4gewogICAgICAgICAgaWYgKCF2ZXJpZmllZCkgcmV0dXJuIGFib3J0Q29ubmVjdGlvbihzb2NrZXQsIGNvZGUgfHwgNDAxLCBtZXNzYWdlKTsKCiAgICAgICAgICB0aGlzLmNvbXBsZXRlVXBncmFkZShwcm90b2NvbCwgdmVyc2lvbiwgcmVxLCBzb2NrZXQsIGhlYWQsIGNiKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQoaW5mbykpIHsKICAgICAgICByZXR1cm4gYWJvcnRDb25uZWN0aW9uKHNvY2tldCwgNDAxKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMuY29tcGxldGVVcGdyYWRlKHByb3RvY29sLCB2ZXJzaW9uLCByZXEsIHNvY2tldCwgaGVhZCwgY2IpOwogIH0KCiAgLyoqCiAgICogVXBncmFkZSB0aGUgY29ubmVjdGlvbiB0byBXZWJTb2NrZXQuCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvdG9jb2wgVGhlIGNob3NlbiBzdWJwcm90b2NvbAogICAqIEBwYXJhbSB7TnVtYmVyfSB2ZXJzaW9uIFRoZSBXZWJTb2NrZXQgcHJvdG9jb2wgdmVyc2lvbgogICAqIEBwYXJhbSB7aHR0cC5JbmNvbWluZ01lc3NhZ2V9IHJlcSBUaGUgcmVxdWVzdCBvYmplY3QKICAgKiBAcGFyYW0ge25ldC5Tb2NrZXR9IHNvY2tldCBUaGUgbmV0d29yayBzb2NrZXQgYmV0d2VlbiB0aGUgc2VydmVyIGFuZCBjbGllbnQKICAgKiBAcGFyYW0ge0J1ZmZlcn0gaGVhZCBUaGUgZmlyc3QgcGFja2V0IG9mIHRoZSB1cGdyYWRlZCBzdHJlYW0KICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFjawogICAqIEBwcml2YXRlCiAgICovCiAgY29tcGxldGVVcGdyYWRlIChwcm90b2NvbCwgdmVyc2lvbiwgcmVxLCBzb2NrZXQsIGhlYWQsIGNiKSB7CiAgICAvLwogICAgLy8gRGVzdHJveSB0aGUgc29ja2V0IGlmIHRoZSBjbGllbnQgaGFzIGFscmVhZHkgc2VudCBhIEZJTiBwYWNrZXQuCiAgICAvLwogICAgaWYgKCFzb2NrZXQucmVhZGFibGUgfHwgIXNvY2tldC53cml0YWJsZSkgcmV0dXJuIHNvY2tldC5kZXN0cm95KCk7CgogICAgY29uc3Qga2V5ID0gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTEnKQogICAgICAudXBkYXRlKHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWtleSddICsgY29uc3RhbnRzLkdVSUQsICdiaW5hcnknKQogICAgICAuZGlnZXN0KCdiYXNlNjQnKTsKCiAgICBjb25zdCBoZWFkZXJzID0gWwogICAgICAnSFRUUC8xLjEgMTAxIFN3aXRjaGluZyBQcm90b2NvbHMnLAogICAgICAnVXBncmFkZTogd2Vic29ja2V0JywKICAgICAgJ0Nvbm5lY3Rpb246IFVwZ3JhZGUnLAogICAgICBgU2VjLVdlYlNvY2tldC1BY2NlcHQ6ICR7a2V5fWAKICAgIF07CgogICAgaWYgKHByb3RvY29sKSBoZWFkZXJzLnB1c2goYFNlYy1XZWJTb2NrZXQtUHJvdG9jb2w6ICR7cHJvdG9jb2x9YCk7CgogICAgY29uc3Qgb2ZmZXIgPSBFeHRlbnNpb25zLnBhcnNlKHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWV4dGVuc2lvbnMnXSk7CiAgICB2YXIgZXh0ZW5zaW9uczsKCiAgICB0cnkgewogICAgICBleHRlbnNpb25zID0gYWNjZXB0RXh0ZW5zaW9ucyh0aGlzLm9wdGlvbnMsIG9mZmVyKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICByZXR1cm4gYWJvcnRDb25uZWN0aW9uKHNvY2tldCwgNDAwKTsKICAgIH0KCiAgICBjb25zdCBwcm9wcyA9IE9iamVjdC5rZXlzKGV4dGVuc2lvbnMpOwoKICAgIGlmIChwcm9wcy5sZW5ndGgpIHsKICAgICAgY29uc3Qgc2VydmVyRXh0ZW5zaW9ucyA9IHByb3BzLnJlZHVjZSgob2JqLCBrZXkpID0+IHsKICAgICAgICBvYmpba2V5XSA9IFtleHRlbnNpb25zW2tleV0ucGFyYW1zXTsKICAgICAgICByZXR1cm4gb2JqOwogICAgICB9LCB7fSk7CgogICAgICBoZWFkZXJzLnB1c2goYFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9uczogJHtFeHRlbnNpb25zLmZvcm1hdChzZXJ2ZXJFeHRlbnNpb25zKX1gKTsKICAgIH0KCiAgICAvLwogICAgLy8gQWxsb3cgZXh0ZXJuYWwgbW9kaWZpY2F0aW9uL2luc3BlY3Rpb24gb2YgaGFuZHNoYWtlIGhlYWRlcnMuCiAgICAvLwogICAgdGhpcy5lbWl0KCdoZWFkZXJzJywgaGVhZGVycyk7CgogICAgc29ja2V0LndyaXRlKGhlYWRlcnMuY29uY2F0KCcnLCAnJykuam9pbignXHJcbicpKTsKCiAgICBjb25zdCBjbGllbnQgPSBuZXcgV2ViU29ja2V0KFtyZXEsIHNvY2tldCwgaGVhZF0sIHsKICAgICAgbWF4UGF5bG9hZDogdGhpcy5vcHRpb25zLm1heFBheWxvYWQsCiAgICAgIHByb3RvY29sVmVyc2lvbjogdmVyc2lvbiwKICAgICAgZXh0ZW5zaW9ucywKICAgICAgcHJvdG9jb2wKICAgIH0pOwoKICAgIGlmICh0aGlzLmNsaWVudHMpIHsKICAgICAgdGhpcy5jbGllbnRzLmFkZChjbGllbnQpOwogICAgICBjbGllbnQub24oJ2Nsb3NlJywgKCkgPT4gdGhpcy5jbGllbnRzLmRlbGV0ZShjbGllbnQpKTsKICAgIH0KCiAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgc29ja2V0RXJyb3IpOwogICAgY2IoY2xpZW50KTsKICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0U2VydmVyOwoKLyoqCiAqIEhhbmRsZSBwcmVtYXR1cmUgc29ja2V0IGVycm9ycy4KICoKICogQHByaXZhdGUKICovCmZ1bmN0aW9uIHNvY2tldEVycm9yICgpIHsKICB0aGlzLmRlc3Ryb3koKTsKfQoKLyoqCiAqIEFjY2VwdCBXZWJTb2NrZXQgZXh0ZW5zaW9ucy4KICoKICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVGhlIGBXZWJTb2NrZXRTZXJ2ZXJgIGNvbmZpZ3VyYXRpb24gb3B0aW9ucwogKiBAcGFyYW0ge09iamVjdH0gb2ZmZXIgVGhlIHBhcnNlZCB2YWx1ZSBvZiB0aGUgYHNlYy13ZWJzb2NrZXQtZXh0ZW5zaW9uc2AgaGVhZGVyCiAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgZXh0ZW5zaW9ucwogKiBAcHJpdmF0ZQogKi8KZnVuY3Rpb24gYWNjZXB0RXh0ZW5zaW9ucyAob3B0aW9ucywgb2ZmZXIpIHsKICBjb25zdCBwbWQgPSBvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlOwogIGNvbnN0IGV4dGVuc2lvbnMgPSB7fTsKCiAgaWYgKHBtZCAmJiBvZmZlcltQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkgewogICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSBuZXcgUGVyTWVzc2FnZURlZmxhdGUoCiAgICAgIHBtZCAhPT0gdHJ1ZSA/IHBtZCA6IHt9LAogICAgICB0cnVlLAogICAgICBvcHRpb25zLm1heFBheWxvYWQKICAgICk7CgogICAgcGVyTWVzc2FnZURlZmxhdGUuYWNjZXB0KG9mZmVyW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKTsKICAgIGV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0gPSBwZXJNZXNzYWdlRGVmbGF0ZTsKICB9CgogIHJldHVybiBleHRlbnNpb25zOwp9CgovKioKICogQ2xvc2UgdGhlIGNvbm5lY3Rpb24gd2hlbiBwcmVjb25kaXRpb25zIGFyZSBub3QgZnVsZmlsbGVkLgogKgogKiBAcGFyYW0ge25ldC5Tb2NrZXR9IHNvY2tldCBUaGUgc29ja2V0IG9mIHRoZSB1cGdyYWRlIHJlcXVlc3QKICogQHBhcmFtIHtOdW1iZXJ9IGNvZGUgVGhlIEhUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGUKICogQHBhcmFtIHtTdHJpbmd9IFttZXNzYWdlXSBUaGUgSFRUUCByZXNwb25zZSBib2R5CiAqIEBwcml2YXRlCiAqLwpmdW5jdGlvbiBhYm9ydENvbm5lY3Rpb24gKHNvY2tldCwgY29kZSwgbWVzc2FnZSkgewogIGlmIChzb2NrZXQud3JpdGFibGUpIHsKICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8IGh0dHAuU1RBVFVTX0NPREVTW2NvZGVdOwogICAgc29ja2V0LndyaXRlKAogICAgICBgSFRUUC8xLjEgJHtjb2RlfSAke2h0dHAuU1RBVFVTX0NPREVTW2NvZGVdfVxyXG5gICsKICAgICAgJ0Nvbm5lY3Rpb246IGNsb3NlXHJcbicgKwogICAgICAnQ29udGVudC10eXBlOiB0ZXh0L2h0bWxcclxuJyArCiAgICAgIGBDb250ZW50LUxlbmd0aDogJHtCdWZmZXIuYnl0ZUxlbmd0aChtZXNzYWdlKX1cclxuYCArCiAgICAgICdcclxuJyArCiAgICAgIG1lc3NhZ2UKICAgICk7CiAgfQoKICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgc29ja2V0RXJyb3IpOwogIHNvY2tldC5kZXN0cm95KCk7Cn0KCgovKioqLyB9KSwKLyogNDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJidWZmZXIiKTsKCi8qKiovIH0pLAovKiA0OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoImZzIik7CgovKioqLyB9KSwKLyogNDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCJodHRwcyIpOwoKLyoqKi8gfSksCi8qIDUwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgicGF0aCIpOwoKLyoqKi8gfSksCi8qIDUxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgiemxpYiIpOwoKLyoqKi8gfSkKLyoqKioqKi8gXSk7Cn0pOwo=",
      "sourceCodeClassname": "VertxProtoStubNode",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-c28037a6-8d59-ddbd-c208-d45c1334b92c1",
    "version": 1.9000000000000006,
    "description": "Description of VertxProtoStubNode",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "default",
    "configuration": {
      "url": "wss://msg-node.hysmart.rethink.ptinovacao.pt/localhost/ws"
    },
    "messageSchemas": "",
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": {
      "node": true
    },
    "dataObjects": [],
    "interworking": false
  },
  "P2PHandlerProtoStub": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CgovLyBTRFAgaGVscGVycy4KdmFyIFNEUFV0aWxzID0ge307CgovLyBHZW5lcmF0ZSBhbiBhbHBoYW51bWVyaWMgaWRlbnRpZmllciBmb3IgY25hbWUgb3IgbWlkcy4KLy8gVE9ETzogdXNlIFVVSURzIGluc3RlYWQ/IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODMKU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7Cn07CgovLyBUaGUgUlRDUCBDTkFNRSB1c2VkIGJ5IGFsbCBwZWVyY29ubmVjdGlvbnMgZnJvbSB0aGUgc2FtZSBKUy4KU0RQVXRpbHMubG9jYWxDTmFtZSA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwoKLy8gU3BsaXRzIFNEUCBpbnRvIGxpbmVzLCBkZWFsaW5nIHdpdGggYm90aCBDUkxGIGFuZCBMRi4KU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKGJsb2IpIHsKICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHJldHVybiBsaW5lLnRyaW0oKTsKICB9KTsKfTsKLy8gU3BsaXRzIFNEUCBpbnRvIHNlc3Npb25wYXJ0IGFuZCBtZWRpYXNlY3Rpb25zLiBFbnN1cmVzIENSTEYuClNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7CiAgdmFyIHBhcnRzID0gYmxvYi5zcGxpdCgnXG5tPScpOwogIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHsKICAgIHJldHVybiAoaW5kZXggPiAwID8gJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXHJcbic7CiAgfSk7Cn07CgovLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgpTRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uKGJsb2IsIHByZWZpeCkgewogIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7CiAgfSk7Cn07CgovLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6Ci8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOAovLyBycG9ydCA1NTk5NiIKU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzOwogIC8vIFBhcnNlIGJvdGggdmFyaWFudHMuCiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgfSBlbHNlIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7CiAgfQoKICB2YXIgY2FuZGlkYXRlID0gewogICAgZm91bmRhdGlvbjogcGFydHNbMF0sCiAgICBjb21wb25lbnQ6IHBhcnRzWzFdLAogICAgcHJvdG9jb2w6IHBhcnRzWzJdLnRvTG93ZXJDYXNlKCksCiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSwKICAgIGlwOiBwYXJ0c1s0XSwKICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzVdLCAxMCksCiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnCiAgICB0eXBlOiBwYXJ0c1s3XQogIH07CgogIGZvciAodmFyIGkgPSA4OyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHN3aXRjaCAocGFydHNbaV0pIHsKICAgICAgY2FzZSAncmFkZHInOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncnBvcnQnOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCA9IHBhcnNlSW50KHBhcnRzW2kgKyAxXSwgMTApOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICd0Y3B0eXBlJzoKICAgICAgICBjYW5kaWRhdGUudGNwVHlwZSA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDogLy8gVW5rbm93biBleHRlbnNpb25zIGFyZSBzaWxlbnRseSBpZ25vcmVkLgogICAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gY2FuZGlkYXRlOwp9OwoKLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS4KU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHsKICB2YXIgc2RwID0gW107CiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5jb21wb25lbnQpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTsKICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5pcCk7CiAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpOwoKICB2YXIgdHlwZSA9IGNhbmRpZGF0ZS50eXBlOwogIHNkcC5wdXNoKCd0eXAnKTsKICBzZHAucHVzaCh0eXBlKTsKICBpZiAodHlwZSAhPT0gJ2hvc3QnICYmIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyAmJgogICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQpIHsKICAgIHNkcC5wdXNoKCdyYWRkcicpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzKTsgLy8gd2FzOiByZWxBZGRyCiAgICBzZHAucHVzaCgncnBvcnQnKTsKICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydAogIH0KICBpZiAoY2FuZGlkYXRlLnRjcFR5cGUgJiYgY2FuZGlkYXRlLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09ICd0Y3AnKSB7CiAgICBzZHAucHVzaCgndGNwdHlwZScpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpOwogIH0KICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTsKfTsKCi8vIFBhcnNlcyBhbiBydHBtYXAgbGluZSwgcmV0dXJucyBSVENSdHBDb2RkZWNQYXJhbWV0ZXJzLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzIKU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTsKICB2YXIgcGFyc2VkID0gewogICAgcGF5bG9hZFR5cGU6IHBhcnNlSW50KHBhcnRzLnNoaWZ0KCksIDEwKSAvLyB3YXM6IGlkCiAgfTsKCiAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpOwoKICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdOwogIHBhcnNlZC5jbG9ja1JhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOyAvLyB3YXM6IGNsb2NrcmF0ZQogIC8vIHdhczogY2hhbm5lbHMKICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTsKICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGUgYW4gYT1ydHBtYXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvcgovLyBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICsKICAgICAgKGNvZGVjLm51bUNoYW5uZWxzICE9PSAxID8gJy8nICsgY29kZWMubnVtQ2hhbm5lbHMgOiAnJykgKyAnXHJcbic7Cn07CgovLyBQYXJzZXMgYW4gYT1leHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldApTRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpOwogIHJldHVybiB7CiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSwKICAgIHVyaTogcGFydHNbMV0KICB9Owp9OwoKLy8gR2VuZXJhdGVzIGE9ZXh0bWFwIGxpbmUgZnJvbSBSVENSdHBIZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzIG9yCi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi4KU0RQVXRpbHMud3JpdGVFeHRtYXAgPSBmdW5jdGlvbihoZWFkZXJFeHRlbnNpb24pIHsKICByZXR1cm4gJ2E9ZXh0bWFwOicgKyAoaGVhZGVyRXh0ZW5zaW9uLmlkIHx8IGhlYWRlckV4dGVuc2lvbi5wcmVmZXJyZWRJZCkgKwogICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcclxuJzsKfTsKCi8vIFBhcnNlcyBhbiBmdG1wIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OgovLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vbgovLyBBbHNvIGRlYWxzIHdpdGggdmJyPW9uOyBjbmc9b24KU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkgewogIHZhciBwYXJzZWQgPSB7fTsKICB2YXIga3Y7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIobGluZS5pbmRleE9mKCcgJykgKyAxKS5zcGxpdCgnOycpOwogIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7CiAgICBwYXJzZWRba3ZbMF0udHJpbSgpXSA9IGt2WzFdOwogIH0KICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy4KU0RQVXRpbHMud3JpdGVGbXRwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZSA9ICcnOwogIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogIH0KICBpZiAoY29kZWMucGFyYW1ldGVycyAmJiBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5sZW5ndGgpIHsKICAgIHZhciBwYXJhbXMgPSBbXTsKICAgIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHsKICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7CiAgICB9KTsKICAgIGxpbmUgKz0gJ2E9Zm10cDonICsgcHQgKyAnICcgKyBwYXJhbXMuam9pbignOycpICsgJ1xyXG4nOwogIH0KICByZXR1cm4gbGluZTsKfTsKCi8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQpTRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgcmV0dXJuIHsKICAgIHR5cGU6IHBhcnRzLnNoaWZ0KCksCiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKQogIH07Cn07Ci8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZXMgPSAnJzsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7CiAgICAvLyBGSVhNRTogc3BlY2lhbCBoYW5kbGluZyBmb3IgdHJyLWludD8KICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7CiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArCiAgICAgIChmYi5wYXJhbWV0ZXIgJiYgZmIucGFyYW1ldGVyLmxlbmd0aCA/ICcgJyArIGZiLnBhcmFtZXRlciA6ICcnKSArCiAgICAgICAgICAnXHJcbic7CiAgICB9KTsKICB9CiAgcmV0dXJuIGxpbmVzOwp9OwoKLy8gUGFyc2VzIGFuIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9c3NyYzozNzM1OTI4NTU5IGNuYW1lOnNvbWV0aGluZwpTRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgc3AgPSBsaW5lLmluZGV4T2YoJyAnKTsKICB2YXIgcGFydHMgPSB7CiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMCkKICB9OwogIHZhciBjb2xvbiA9IGxpbmUuaW5kZXhPZignOicsIHNwKTsKICBpZiAoY29sb24gPiAtMSkgewogICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxLCBjb2xvbiAtIHNwIC0gMSk7CiAgICBwYXJ0cy52YWx1ZSA9IGxpbmUuc3Vic3RyKGNvbG9uICsgMSk7CiAgfSBlbHNlIHsKICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgfQogIHJldHVybiBwYXJ0czsKfTsKCi8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LgovLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHkKLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuClNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBmcExpbmUgPSBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkgewogICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1maW5nZXJwcmludDonKSA9PT0gMDsKICB9KVswXS5zdWJzdHIoMTQpOwogIC8vIE5vdGU6IGE9c2V0dXAgbGluZSBpcyBpZ25vcmVkIHNpbmNlIHdlIHVzZSB0aGUgJ2F1dG8nIHJvbGUuCiAgdmFyIGR0bHNQYXJhbWV0ZXJzID0gewogICAgcm9sZTogJ2F1dG8nLAogICAgZmluZ2VycHJpbnRzOiBbewogICAgICBhbGdvcml0aG06IGZwTGluZS5zcGxpdCgnICcpWzBdLAogICAgICB2YWx1ZTogZnBMaW5lLnNwbGl0KCcgJylbMV0KICAgIH1dCiAgfTsKICByZXR1cm4gZHRsc1BhcmFtZXRlcnM7Cn07CgovLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkgewogIHZhciBzZHAgPSAnYT1zZXR1cDonICsgc2V0dXBUeXBlICsgJ1xyXG4nOwogIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmdW5jdGlvbihmcCkgewogICAgc2RwICs9ICdhPWZpbmdlcnByaW50OicgKyBmcC5hbGdvcml0aG0gKyAnICcgKyBmcC52YWx1ZSArICdcclxuJzsKICB9KTsKICByZXR1cm4gc2RwOwp9OwovLyBQYXJzZXMgSUNFIGluZm9ybWF0aW9uIGZyb20gU0RQIG1lZGlhIHNlY3Rpb24gb3Igc2Vzc2lvbnBhcnQuCi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQovLyAgIGdldCB0aGUgaWNlLXVmcmFnIGFuZCBpY2UtcHdkIGxpbmVzIGFzIGlucHV0LgpTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBpY2VQYXJhbWV0ZXJzID0gewogICAgdXNlcm5hbWVGcmFnbWVudDogbGluZXMuZmlsdGVyKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtdWZyYWc6JykgPT09IDA7CiAgICB9KVswXS5zdWJzdHIoMTIpLAogICAgcGFzc3dvcmQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgIHJldHVybiBsaW5lLmluZGV4T2YoJ2E9aWNlLXB3ZDonKSA9PT0gMDsKICAgIH0pWzBdLnN1YnN0cigxMCkKICB9OwogIHJldHVybiBpY2VQYXJhbWV0ZXJzOwp9OwoKLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykgewogIHJldHVybiAnYT1pY2UtdWZyYWc6JyArIHBhcmFtcy51c2VybmFtZUZyYWdtZW50ICsgJ1xyXG4nICsKICAgICAgJ2E9aWNlLXB3ZDonICsgcGFyYW1zLnBhc3N3b3JkICsgJ1xyXG4nOwp9OwoKLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLgpTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgZGVzY3JpcHRpb24gPSB7CiAgICBjb2RlY3M6IFtdLAogICAgaGVhZGVyRXh0ZW5zaW9uczogW10sCiAgICBmZWNNZWNoYW5pc21zOiBbXSwKICAgIHJ0Y3A6IFtdCiAgfTsKICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTsKICBmb3IgKHZhciBpID0gMzsgaSA8IG1saW5lLmxlbmd0aDsgaSsrKSB7IC8vIGZpbmQgYWxsIGNvZGVjcyBmcm9tIG1saW5lWzMuLl0KICAgIHZhciBwdCA9IG1saW5lW2ldOwogICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICBtZWRpYVNlY3Rpb24sICdhPXJ0cG1hcDonICsgcHQgKyAnICcpWzBdOwogICAgaWYgKHJ0cG1hcGxpbmUpIHsKICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7CiAgICAgIHZhciBmbXRwcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1mbXRwOicgKyBwdCArICcgJyk7CiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuCiAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307CiAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjayA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJykKICAgICAgICAubWFwKFNEUFV0aWxzLnBhcnNlUnRjcEZiKTsKICAgICAgZGVzY3JpcHRpb24uY29kZWNzLnB1c2goY29kZWMpOwogICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy4KICAgICAgc3dpdGNoIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICBjYXNlICdSRUQnOgogICAgICAgIGNhc2UgJ1VMUEZFQyc6CiAgICAgICAgICBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLnB1c2goY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWV4dG1hcDonKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHsKICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7CiAgfSk7CiAgLy8gRklYTUU6IHBhcnNlIHJ0Y3AuCiAgcmV0dXJuIGRlc2NyaXB0aW9uOwp9OwoKLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgLwovLyBwYXJhbWV0ZXJzLgpTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24oa2luZCwgY2FwcykgewogIHZhciBzZHAgPSAnJzsKCiAgLy8gQnVpbGQgdGhlIG1saW5lLgogIHNkcCArPSAnbT0nICsga2luZCArICcgJzsKICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy4KICBzZHAgKz0gJyBVRFAvVExTL1JUUC9TQVZQRiAnOwogIHNkcCArPSBjYXBzLmNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICAgIH0KICAgIHJldHVybiBjb2RlYy5wYXlsb2FkVHlwZTsKICB9KS5qb2luKCcgJykgKyAnXHJcbic7CgogIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxyXG4nOwogIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuJzsKCiAgLy8gQWRkIGE9cnRwbWFwIGxpbmVzIGZvciBlYWNoIGNvZGVjLiBBbHNvIGZtdHAgYW5kIHJ0Y3AtZmIuCiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykgewogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTsKICAgIHNkcCArPSBTRFBVdGlscy53cml0ZUZtdHAoY29kZWMpOwogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRjcEZiKGNvZGVjKTsKICB9KTsKICB2YXIgbWF4cHRpbWUgPSAwOwogIGNhcHMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5tYXhwdGltZSA+IG1heHB0aW1lKSB7CiAgICAgIG1heHB0aW1lID0gY29kZWMubWF4cHRpbWU7CiAgICB9CiAgfSk7CiAgaWYgKG1heHB0aW1lID4gMCkgewogICAgc2RwICs9ICdhPW1heHB0aW1lOicgKyBtYXhwdGltZSArICdcclxuJzsKICB9CiAgc2RwICs9ICdhPXJ0Y3AtbXV4XHJcbic7CgogIGNhcHMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikgewogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRXh0bWFwKGV4dGVuc2lvbik7CiAgfSk7CiAgLy8gRklYTUU6IHdyaXRlIGZlY01lY2hhbmlzbXMuCiAgcmV0dXJuIHNkcDsKfTsKCi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2YKLy8gUlRDUnRwRW5jb2RpbmdQYXJhbWV0ZXJzLgpTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikgewogIHZhciBlbmNvZGluZ1BhcmFtZXRlcnMgPSBbXTsKICB2YXIgZGVzY3JpcHRpb24gPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTsKICB2YXIgaGFzUmVkID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdSRUQnKSAhPT0gLTE7CiAgdmFyIGhhc1VscGZlYyA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignVUxQRkVDJykgIT09IC0xOwoKICAvLyBmaWx0ZXIgYT1zc3JjOi4uLiBjbmFtZTosIGlnbm9yZSBQbGFuQi1tc2lkCiAgdmFyIHNzcmNzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpCiAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7CiAgfSkKICAuZmlsdGVyKGZ1bmN0aW9uKHBhcnRzKSB7CiAgICByZXR1cm4gcGFydHMuYXR0cmlidXRlID09PSAnY25hbWUnOwogIH0pOwogIHZhciBwcmltYXJ5U3NyYyA9IHNzcmNzLmxlbmd0aCA+IDAgJiYgc3NyY3NbMF0uc3NyYzsKICB2YXIgc2Vjb25kYXJ5U3NyYzsKCiAgdmFyIGZsb3dzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjLWdyb3VwOkZJRCcpCiAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCcgJyk7CiAgICBwYXJ0cy5zaGlmdCgpOwogICAgcmV0dXJuIHBhcnRzLm1hcChmdW5jdGlvbihwYXJ0KSB7CiAgICAgIHJldHVybiBwYXJzZUludChwYXJ0LCAxMCk7CiAgICB9KTsKICB9KTsKICBpZiAoZmxvd3MubGVuZ3RoID4gMCAmJiBmbG93c1swXS5sZW5ndGggPiAxICYmIGZsb3dzWzBdWzBdID09PSBwcmltYXJ5U3NyYykgewogICAgc2Vjb25kYXJ5U3NyYyA9IGZsb3dzWzBdWzFdOwogIH0KCiAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdSVFgnICYmIGNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7CiAgICAgIHZhciBlbmNQYXJhbSA9IHsKICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYywKICAgICAgICBjb2RlY1BheWxvYWRUeXBlOiBwYXJzZUludChjb2RlYy5wYXJhbWV0ZXJzLmFwdCwgMTApLAogICAgICAgIHJ0eDogewogICAgICAgICAgc3NyYzogc2Vjb25kYXJ5U3NyYwogICAgICAgIH0KICAgICAgfTsKICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pOwogICAgICBpZiAoaGFzUmVkKSB7CiAgICAgICAgZW5jUGFyYW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVuY1BhcmFtKSk7CiAgICAgICAgZW5jUGFyYW0uZmVjID0gewogICAgICAgICAgc3NyYzogc2Vjb25kYXJ5U3NyYywKICAgICAgICAgIG1lY2hhbmlzbTogaGFzVWxwZmVjID8gJ3JlZCt1bHBmZWMnIDogJ3JlZCcKICAgICAgICB9OwogICAgICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKGVuY1BhcmFtKTsKICAgICAgfQogICAgfQogIH0pOwogIGlmIChlbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoID09PSAwICYmIHByaW1hcnlTc3JjKSB7CiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7CiAgICAgIHNzcmM6IHByaW1hcnlTc3JjCiAgICB9KTsKICB9CgogIC8vIHdlIHN1cHBvcnQgYm90aCBiPUFTIGFuZCBiPVRJQVMgYnV0IGludGVycHJldCBBUyBhcyBUSUFTLgogIHZhciBiYW5kd2lkdGggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdiPScpOwogIGlmIChiYW5kd2lkdGgubGVuZ3RoKSB7CiAgICBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9VElBUzonKSA9PT0gMCkgewogICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDcpLCAxMCk7CiAgICB9IGVsc2UgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPUFTOicpID09PSAwKSB7CiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHIoNSksIDEwKTsKICAgIH0KICAgIGVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtcykgewogICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDsKICAgIH0pOwogIH0KICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzOwp9OwoKU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUgPSBmdW5jdGlvbigpIHsKICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC4KICByZXR1cm4gJ3Y9MFxyXG4nICsKICAgICAgJ289dGhpc2lzYWRhcHRlcm9ydGMgODE2OTYzOTkxNTY0Njk0MzEzNyAyIElOIElQNCAxMjcuMC4wLjFcclxuJyArCiAgICAgICdzPS1cclxuJyArCiAgICAgICd0PTAgMFxyXG4nOwp9OwoKU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24gPSBmdW5jdGlvbih0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtKSB7CiAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24odHJhbnNjZWl2ZXIua2luZCwgY2Fwcyk7CgogIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLgogIHNkcCArPSBTRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMoCiAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKTsKCiAgLy8gTWFwIERUTFMgcGFyYW1ldGVycyB0byBTRFAuCiAgc2RwICs9IFNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMoCiAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksCiAgICAgIHR5cGUgPT09ICdvZmZlcicgPyAnYWN0cGFzcycgOiAnYWN0aXZlJyk7CgogIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcclxuJzsKCiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikgewogICAgc2RwICs9ICdhPXNlbmRyZWN2XHJcbic7CiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHsKICAgIHNkcCArPSAnYT1zZW5kb25seVxyXG4nOwogIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgIHNkcCArPSAnYT1yZWN2b25seVxyXG4nOwogIH0gZWxzZSB7CiAgICBzZHAgKz0gJ2E9aW5hY3RpdmVcclxuJzsKICB9CgogIC8vIEZJWE1FOiBmb3IgUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlIFNTUkNzLiBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZSB5ZXQuCiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgdmFyIG1zaWQgPSAnbXNpZDonICsgc3RyZWFtLmlkICsgJyAnICsKICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2suaWQgKyAnXHJcbic7CiAgICBzZHAgKz0gJ2E9JyArIG1zaWQ7CiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsKICAgICAgICAnICcgKyBtc2lkOwogICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7CiAgICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICsKICAgICAgICAgICcgJyArIG1zaWQ7CiAgICAgIHNkcCArPSAnYT1zc3JjLWdyb3VwOkZJRCAnICsKICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArICcgJyArCiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICsKICAgICAgICAgICdcclxuJzsKICAgIH0KICB9CiAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIGJlIHdyaXR0ZW4gYnkgd3JpdGVSdHBEZXNjcmlwdGlvbi4KICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsKICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcclxuJzsKICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7CiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArCiAgICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcclxuJzsKICB9CiAgcmV0dXJuIHNkcDsKfTsKCi8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LgpTRFBVdGlscy5nZXREaXJlY3Rpb24gPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuCiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKICAgIHN3aXRjaCAobGluZXNbaV0pIHsKICAgICAgY2FzZSAnYT1zZW5kcmVjdic6CiAgICAgIGNhc2UgJ2E9c2VuZG9ubHknOgogICAgICBjYXNlICdhPXJlY3Zvbmx5JzoKICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6CiAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cigyKTsKICAgICAgZGVmYXVsdDoKICAgICAgICAvLyBGSVhNRTogV2hhdCBzaG91bGQgaGFwcGVuIGhlcmU/CiAgICB9CiAgfQogIGlmIChzZXNzaW9ucGFydCkgewogICAgcmV0dXJuIFNEUFV0aWxzLmdldERpcmVjdGlvbihzZXNzaW9ucGFydCk7CiAgfQogIHJldHVybiAnc2VuZHJlY3YnOwp9OwoKLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgptb2R1bGUuZXhwb3J0cyA9IFNEUFV0aWxzOwoKfSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIHZlcnNpb246IDAuNS4xCi8vIGRhdGU6IFR1ZSBGZWIgMDcgMjAxNyAxNjowMDozOSBHTVQrMDAwMCAoV0VUKQovLyBsaWNlbmNlOiAKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgoKKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiU3luY2hlciIsIFtdLCBmYWN0b3J5KTsKCWVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKQoJCWV4cG9ydHNbIlN5bmNoZXIiXSA9IGZhY3RvcnkoKTsKCWVsc2UKCQlyb290WyIiXSA9IHJvb3RbIiJdIHx8IHt9LCByb290WyIiXVsiU3luY2hlciJdID0gZmFjdG9yeSgpOwp9KSh0aGlzLCBmdW5jdGlvbigpIHsKcmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307Ci8qKioqKiovCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewovKioqKioqLwovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKLyoqKioqKi8gCQkJaTogbW9kdWxlSWQsCi8qKioqKiovIAkJCWw6IGZhbHNlLAovKioqKioqLyAJCQlleHBvcnRzOiB7fQovKioqKioqLyAJCX07Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sID0gdHJ1ZTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0Ci8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07Ci8qKioqKiovCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewovKioqKioqLyAJCWlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsKLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsCi8qKioqKiovIAkJCQllbnVtZXJhYmxlOiB0cnVlLAovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXIKLyoqKioqKi8gCQkJfSk7Ci8qKioqKiovIAkJfQovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsKLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDoKLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsKLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7Ci8qKioqKiovIAkJcmV0dXJuIGdldHRlcjsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKLyoqKioqKi8KLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTYyKTsKLyoqKioqKi8gfSkKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKi8gKFsKLyogMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcyLjQuMCd9OwppZih0eXBlb2YgX19lID09ICdudW1iZXInKV9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKCi8qKiovIH0pLAovKiAxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4CnZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aAogID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTsKaWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKCi8qKiovIH0pLAovKiAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBzdG9yZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkoJ3drcycpCiAgLCB1aWQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykKICAsIFN5bWJvbCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLlN5bWJvbAogICwgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJzsKCnZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7CiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9CiAgICBVU0VfU1lNQk9MICYmIFN5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IFN5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpOwp9OwoKJGV4cG9ydHMuc3RvcmUgPSBzdG9yZTsKCi8qKiovIH0pLAovKiAzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkKbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsKICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Owp9KTsKCi8qKiovIH0pLAovKiA0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkKICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5OwoKZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpewogIGFuT2JqZWN0KE8pOwogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKICBhbk9iamVjdChBdHRyaWJ1dGVzKTsKICBpZihJRThfRE9NX0RFRklORSl0cnkgewogICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsKICBpZigndmFsdWUnIGluIEF0dHJpYnV0ZXMpT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7CiAgcmV0dXJuIE87Cn07CgovKioqLyB9KSwKLyogNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICBpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTsKICByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwp9IDogZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICBvYmplY3Rba2V5XSA9IHZhbHVlOwogIHJldHVybiBvYmplY3Q7Cn07CgovKioqLyB9KSwKLyogNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nOwp9OwoKLyoqKi8gfSksCi8qIDggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpCiAgLCBoaWRlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpCiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXsKICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRgogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlMKICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUAogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LlcKICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSkKICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdCiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV0KICAgICwga2V5LCBvd24sIG91dDsKICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsKICBmb3Ioa2V5IGluIHNvdXJjZSl7CiAgICAvLyBjb250YWlucyBpbiBuYXRpdmUKICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7CiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7CiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZAogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsKICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcwogICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKQogICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnkKICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7CiAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7CiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpewogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpewogICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQzsKICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7CiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOwogICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7CiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07CiAgICAgIHJldHVybiBGOwogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7CiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKICAgIGlmKElTX1BST1RPKXsKICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0OwogICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsKICAgIH0KICB9Cn07Ci8vIHR5cGUgYml0bWFwCiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsCiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljCiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG8KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kCiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcAokZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmUKJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIAptb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7CgovKioqLyB9KSwKLyogOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9OwoKLyoqKi8gfSksCi8qIDEwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF9kZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwoKdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgfQogIH0KCiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICB9Owp9KCk7CgovKioqLyB9KSwKLyogMTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjKXsKICB0cnkgewogICAgcmV0dXJuICEhZXhlYygpOwogIH0gY2F0Y2goZSl7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn07CgovKioqLyB9KSwKLyogMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIGtleSl7CiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7Cn07CgovKioqLyB9KSwKLyogMTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzCnZhciBJT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NikKICAsIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpOwp9OwoKLyoqKi8gfSksCi8qIDE0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZwp2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIHRoYXQsIGxlbmd0aCl7CiAgYUZ1bmN0aW9uKGZuKTsKICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuOwogIHN3aXRjaChsZW5ndGgpewogICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7CiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpOwogICAgfTsKICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpewogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTsKICAgIH07CiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7CiAgICB9OwogIH0KICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7CiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICB9Owp9OwoKLyoqKi8gfSksCi8qIDE1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0ge307CgovKioqLyB9KSwKLyogMTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXsKICByZXR1cm4gewogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLAogICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLAogICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLAogICAgdmFsdWUgICAgICAgOiB2YWx1ZQogIH07Cn07CgovKioqLyB9KSwKLyogMTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pCnZhciAka2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpCiAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKbW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pewogIHJldHVybiAka2V5cyhPLCBlbnVtQnVnS2V5cyk7Cn07CgovKioqLyB9KSwKLyogMTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwgLTEpOwp9OwoKLyoqKi8gfSksCi8qIDE5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykKICAsIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudAogIC8vIGluIG9sZCBJRSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JwogICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307Cn07CgovKioqLyB9KSwKLyogMjAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTsKICByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogMjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGRlZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZgogICwgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpewogIGlmKGl0ICYmICFoYXMoaXQgPSBzdGF0ID8gaXQgOiBpdC5wcm90b3R5cGUsIFRBRykpZGVmKGl0LCBUQUcsIHtjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiB0YWd9KTsKfTsKCi8qKiovIH0pLAovKiAyMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2UKLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgUyl7CiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7CiAgdmFyIGZuLCB2YWw7CiAgaWYoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIGlmKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsKICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7Cn07CgovKioqLyB9KSwKLyogMjMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIGlkID0gMAogICwgcHggPSBNYXRoLnJhbmRvbSgpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CiAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTsKfTsKCi8qKiovIH0pLAovKiAyNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICBpZihpdCA9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIiArIGl0KTsKICByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogMjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSB0cnVlOwoKLyoqKi8gfSksCi8qIDI2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBzaGFyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgna2V5cycpCiAgLCB1aWQgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpewogIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7Cn07CgovKioqLyB9KSwKLyogMjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gNy4xLjQgVG9JbnRlZ2VyCnZhciBjZWlsICA9IE1hdGguY2VpbAogICwgZmxvb3IgPSBNYXRoLmZsb29yOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTsKfTsKCi8qKiovIH0pLAovKiAyOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzCm1vZHVsZS5leHBvcnRzID0gKAogICdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YnCikuc3BsaXQoJywnKTsKCi8qKiovIH0pLAovKiAyOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDMpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX3JlcXVpcmVfXygxOSkoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Owp9KTsKCi8qKiovIH0pLAovKiAzMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXycKICAsIHN0b3JlICA9IGdsb2JhbFtTSEFSRURdIHx8IChnbG9iYWxbU0hBUkVEXSA9IHt9KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpewogIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pOwp9OwoKLyoqKi8gfSksCi8qIDMxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNzkpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogMzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KQp2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTsKfTsKCi8qKiovIH0pLAovKiAzMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCnZhciBfc2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKCnZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKCnZhciBfY3JlYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZSk7Cgp2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoc3VwZXJDbGFzcykpKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9ICgwLCBfY3JlYXRlMi5kZWZhdWx0KShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCA/ICgwLCBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7Cn07CgovKioqLyB9KSwKLyogMzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7CiAgaWYgKCFzZWxmKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShjYWxsKSkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOwp9OwoKLyoqKi8gfSksCi8qIDM1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQp2YXIgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCBkUHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpCiAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpCiAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpCiAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH0KICAsIFBST1RPVFlQRSAgID0gJ3Byb3RvdHlwZSc7CgovLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlCnZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24oKXsKICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1ZwogIHZhciBpZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSgnaWZyYW1lJykKICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoCiAgICAsIGx0ICAgICA9ICc8JwogICAgLCBndCAgICAgPSAnPicKICAgICwgaWZyYW1lRG9jdW1lbnQ7CiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgX193ZWJwYWNrX3JlcXVpcmVfXyg0MikuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsCiAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7CiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpOwogIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7CiAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7CiAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dOwogIHJldHVybiBjcmVhdGVEaWN0KCk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpewogIHZhciByZXN1bHQ7CiAgaWYoTyAhPT0gbnVsbCl7CiAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7CiAgICByZXN1bHQgPSBuZXcgRW1wdHk7CiAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDsKICAgIC8vIGFkZCAiX19wcm90b19fIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsCiAgICByZXN1bHRbSUVfUFJPVE9dID0gTzsKICB9IGVsc2UgcmVzdWx0ID0gY3JlYXRlRGljdCgpOwogIHJldHVybiBQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiBkUHMocmVzdWx0LCBQcm9wZXJ0aWVzKTsKfTsKCgovKioqLyB9KSwKLyogMzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygzNyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAzNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXsKICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTsKfTsKCi8qKiovIH0pLAovKiAzOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpCiAgLCBoaWRlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikKICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIEl0ZXJhdG9ycyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkKICAsICRpdGVyQ3JlYXRlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MikKICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkKICAsIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MykKICAsIElURVJBVE9SICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQogICwgQlVHR1kgICAgICAgICAgPSAhKFtdLmtleXMgJiYgJ25leHQnIGluIFtdLmtleXMoKSkgLy8gU2FmYXJpIGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YAogICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcicKICAsIEtFWVMgICAgICAgICAgID0gJ2tleXMnCiAgLCBWQUxVRVMgICAgICAgICA9ICd2YWx1ZXMnOwoKdmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXsKICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7CiAgdmFyIGdldE1ldGhvZCA9IGZ1bmN0aW9uKGtpbmQpewogICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdOwogICAgc3dpdGNoKGtpbmQpewogICAgICBjYXNlIEtFWVM6IHJldHVybiBmdW5jdGlvbiBrZXlzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07CiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07CiAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07CiAgfTsKICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJwogICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVMKICAgICwgVkFMVUVTX0JVRyA9IGZhbHNlCiAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZQogICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdCiAgICAsICRkZWZhdWx0ICAgPSAkbmF0aXZlIHx8IGdldE1ldGhvZChERUZBVUxUKQogICAgLCAkZW50cmllcyAgID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZAogICAgLCAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZQogICAgLCBtZXRob2RzLCBrZXksIEl0ZXJhdG9yUHJvdG90eXBlOwogIC8vIEZpeCBuYXRpdmUKICBpZigkYW55TmF0aXZlKXsKICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YoJGFueU5hdGl2ZS5jYWxsKG5ldyBCYXNlKSk7CiAgICBpZihJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSl7CiAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKICAgICAgc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsIFRBRywgdHJ1ZSk7CiAgICAgIC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lcwogICAgICBpZighTElCUkFSWSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpOwogICAgfQogIH0KICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGCiAgaWYoREVGX1ZBTFVFUyAmJiAkbmF0aXZlICYmICRuYXRpdmUubmFtZSAhPT0gVkFMVUVTKXsKICAgIFZBTFVFU19CVUcgPSB0cnVlOwogICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsgfTsKICB9CiAgLy8gRGVmaW5lIGl0ZXJhdG9yCiAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpewogICAgaGlkZShwcm90bywgSVRFUkFUT1IsICRkZWZhdWx0KTsKICB9CiAgLy8gUGx1ZyBmb3IgbGlicmFyeQogIEl0ZXJhdG9yc1tOQU1FXSA9ICRkZWZhdWx0OwogIEl0ZXJhdG9yc1tUQUddICA9IHJldHVyblRoaXM7CiAgaWYoREVGQVVMVCl7CiAgICBtZXRob2RzID0gewogICAgICB2YWx1ZXM6ICBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSwKICAgICAga2V5czogICAgSVNfU0VUICAgICA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLAogICAgICBlbnRyaWVzOiAkZW50cmllcwogICAgfTsKICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpewogICAgICBpZighKGtleSBpbiBwcm90bykpcmVkZWZpbmUocHJvdG8sIGtleSwgbWV0aG9kc1trZXldKTsKICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7CiAgfQogIHJldHVybiBtZXRob2RzOwp9OwoKLyoqKi8gfSksCi8qIDM5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygzKSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mfSk7CgovKioqLyB9KSwKLyogNDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg1MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA0MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgpleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKCi8qKiovIH0pLAovKiA0MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKLyoqKi8gfSksCi8qIDQzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBoYXMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCB0b09iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpCiAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpCiAgLCBPYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7Cgptb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihPKXsKICBPID0gdG9PYmplY3QoTyk7CiAgaWYoaGFzKE8sIElFX1BST1RPKSlyZXR1cm4gT1tJRV9QUk9UT107CiAgaWYodHlwZW9mIE8uY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcil7CiAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7CiAgfSByZXR1cm4gTyBpbnN0YW5jZW9mIE9iamVjdCA/IE9iamVjdFByb3RvIDogbnVsbDsKfTsKCi8qKiovIH0pLAovKiA0NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaGFzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIHRvSU9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpCiAgLCBhcnJheUluZGV4T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKShmYWxzZSkKICAsIElFX1BST1RPICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIG5hbWVzKXsKICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdCkKICAgICwgaSAgICAgID0gMAogICAgLCByZXN1bHQgPSBbXQogICAgLCBrZXk7CiAgZm9yKGtleSBpbiBPKWlmKGtleSAhPSBJRV9QUk9UTyloYXMoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpOwogIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXMKICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKWlmKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSl7CiAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9OwoKLyoqKi8gfSksCi8qIDQ1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlcwp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCkKICAsIGNvcmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApCiAgLCBmYWlscyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXsKICB2YXIgZm4gID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldCiAgICAsIGV4cCA9IHt9OwogIGV4cFtLRVldID0gZXhlYyhmbik7CiAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbigpeyBmbigxKTsgfSksICdPYmplY3QnLCBleHApOwp9OwoKLyoqKi8gfSksCi8qIDQ2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCi8qKiovIH0pLAovKiA0NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpCiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTEKfTsKCi8qKiovIH0pLAovKiA0OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBjb3JlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkKICAsIHdrc0V4dCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkKICAsIGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpewogIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7CiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7Cn07CgovKioqLyB9KSwKLyogNDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKCi8qKiovIH0pLAovKiA1MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgJGF0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpKHRydWUpOwoKLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQpfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7CiAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldAogIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4Ci8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkKfSwgZnVuY3Rpb24oKXsKICB2YXIgTyAgICAgPSB0aGlzLl90CiAgICAsIGluZGV4ID0gdGhpcy5faQogICAgLCBwb2ludDsKICBpZihpbmRleCA+PSBPLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9OwogIHBvaW50ID0gJGF0KE8sIGluZGV4KTsKICB0aGlzLl9pICs9IHBvaW50Lmxlbmd0aDsKICByZXR1cm4ge3ZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2V9Owp9KTsKCi8qKiovIH0pLAovKiA1MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTsKdmFyIGdsb2JhbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBoaWRlICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KQogICwgSXRlcmF0b3JzICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpCiAgLCBUT19TVFJJTkdfVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsKCmZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspewogIHZhciBOQU1FICAgICAgID0gY29sbGVjdGlvbnNbaV0KICAgICwgQ29sbGVjdGlvbiA9IGdsb2JhbFtOQU1FXQogICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTsKICBpZihwcm90byAmJiAhcHJvdG9bVE9fU1RSSU5HX1RBR10paGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7CiAgSXRlcmF0b3JzW05BTUVdID0gSXRlcmF0b3JzLkFycmF5Owp9CgovKioqLyB9KSwKLyogNTIgKi8sCi8qIDUzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjb3JlICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsICRKU09OID0gY29yZS5KU09OIHx8IChjb3JlLkpTT04gPSB7c3RyaW5naWZ5OiBKU09OLnN0cmluZ2lmeX0pOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpOwp9OwoKLyoqKi8gfSksCi8qIDU0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgoKLyoqKi8gfSksCi8qIDU1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQogICwgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKQogIC8vIEVTMyB3cm9uZyBoZXJlCiAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJzsKCi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yCnZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXsKICB0cnkgewogICAgcmV0dXJuIGl0W2tleV07CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgdmFyIE8sIFQsIEI7CiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnCiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2UKICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFQKICAgIC8vIGJ1aWx0aW5UYWcgY2FzZQogICAgOiBBUkcgPyBjb2YoTykKICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2sKICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCOwp9OwoKLyoqKi8gfSksCi8qIDU2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKSA/IE9iamVjdCA6IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7Cn07CgovKioqLyB9KSwKLyogNTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHBJRSAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSkKICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikKICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkKICAsIGdPUEQgICAgICAgICAgID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBnT1BEIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApewogIE8gPSB0b0lPYmplY3QoTyk7CiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpOwogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7CiAgICByZXR1cm4gZ09QRChPLCBQKTsKICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9CiAgaWYoaGFzKE8sIFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sIFApLCBPW1BdKTsKfTsKCi8qKiovIH0pLAovKiA1OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgpleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwoKLyoqKi8gfSksCi8qIDU5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF9pdGVyYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOwoKdmFyIF9pdGVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pdGVyYXRvcik7Cgp2YXIgX3N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpOwoKdmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTsKCnZhciBfdHlwZW9mID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIF9pdGVyYXRvcjIuZGVmYXVsdCA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDIuZGVmYXVsdCAmJiBvYmogIT09IF9zeW1ib2wyLmRlZmF1bHQucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YoX2l0ZXJhdG9yMi5kZWZhdWx0KSA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7CiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKG9iaik7Cn0gOiBmdW5jdGlvbiAob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyLmRlZmF1bHQgJiYgb2JqICE9PSBfc3ltYm9sMi5kZWZhdWx0LnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsKfTsKCi8qKiovIH0pLAovKiA2MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH07CgovKioqLyB9KSwKLyogNjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZgovLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcwp2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIHRvTGVuZ3RoICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpCiAgLCB0b0luZGV4ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7CiAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBlbCwgZnJvbUluZGV4KXsKICAgIHZhciBPICAgICAgPSB0b0lPYmplY3QoJHRoaXMpCiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpCiAgICAgICwgaW5kZXggID0gdG9JbmRleChmcm9tSW5kZXgsIGxlbmd0aCkKICAgICAgLCB2YWx1ZTsKICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KICAgIGlmKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKXdoaWxlKGxlbmd0aCA+IGluZGV4KXsKICAgICAgdmFsdWUgPSBPW2luZGV4KytdOwogICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTsKICAgIC8vIEFycmF5I3RvSW5kZXggaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3QKICAgIH0gZWxzZSBmb3IoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKWlmKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pewogICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7CiAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7CiAgfTsKfTsKCi8qKiovIH0pLAovKiA2MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgY3JlYXRlICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KQogICwgZGVzY3JpcHRvciAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTsKCi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpCl9fd2VicGFja19yZXF1aXJlX18oNikoSXRlcmF0b3JQcm90b3R5cGUsIF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyksIGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9KTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpewogIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwge25leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCl9KTsKICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTsKfTsKCi8qKiovIH0pLAovKiA2MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXsKICByZXR1cm4ge3ZhbHVlOiB2YWx1ZSwgZG9uZTogISFkb25lfTsKfTsKCi8qKiovIH0pLAovKiA2NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZFAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCiAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7Cgptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcyl7CiAgYW5PYmplY3QoTyk7CiAgdmFyIGtleXMgICA9IGdldEtleXMoUHJvcGVydGllcykKICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgKICAgICwgaSA9IDAKICAgICwgUDsKICB3aGlsZShsZW5ndGggPiBpKWRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7CiAgcmV0dXJuIE87Cn07CgovKioqLyB9KSwKLyogNjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQp2YXIgJGtleXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpCiAgLCBoaWRkZW5LZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkuY29uY2F0KCdsZW5ndGgnLCAncHJvdG90eXBlJyk7CgpleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pewogIHJldHVybiAka2V5cyhPLCBoaWRkZW5LZXlzKTsKfTsKCi8qKiovIH0pLAovKiA2NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykKICAsIGRlZmluZWQgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwovLyB0cnVlICAtPiBTdHJpbmcjYXQKLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oVE9fU1RSSU5HKXsKICByZXR1cm4gZnVuY3Rpb24odGhhdCwgcG9zKXsKICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpCiAgICAgICwgaSA9IHRvSW50ZWdlcihwb3MpCiAgICAgICwgbCA9IHMubGVuZ3RoCiAgICAgICwgYSwgYjsKICAgIGlmKGkgPCAwIHx8IGkgPj0gbClyZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7CiAgICBhID0gcy5jaGFyQ29kZUF0KGkpOwogICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmYKICAgICAgPyBUT19TVFJJTkcgPyBzLmNoYXJBdChpKSA6IGEKICAgICAgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7CiAgfTsKfTsKCi8qKiovIH0pLAovKiA2NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKICAsIGludm9rZSAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpCiAgLCBodG1sICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKQogICwgY2VsICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkKICAsIGdsb2JhbCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCBzZXRUYXNrICAgICAgICAgICAgPSBnbG9iYWwuc2V0SW1tZWRpYXRlCiAgLCBjbGVhclRhc2sgICAgICAgICAgPSBnbG9iYWwuY2xlYXJJbW1lZGlhdGUKICAsIE1lc3NhZ2VDaGFubmVsICAgICA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbAogICwgY291bnRlciAgICAgICAgICAgID0gMAogICwgcXVldWUgICAgICAgICAgICAgID0ge30KICAsIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnCiAgLCBkZWZlciwgY2hhbm5lbCwgcG9ydDsKdmFyIHJ1biA9IGZ1bmN0aW9uKCl7CiAgdmFyIGlkID0gK3RoaXM7CiAgaWYocXVldWUuaGFzT3duUHJvcGVydHkoaWQpKXsKICAgIHZhciBmbiA9IHF1ZXVlW2lkXTsKICAgIGRlbGV0ZSBxdWV1ZVtpZF07CiAgICBmbigpOwogIH0KfTsKdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpewogIHJ1bi5jYWxsKGV2ZW50LmRhdGEpOwp9OwovLyBOb2RlLmpzIDAuOSsgJiBJRTEwKyBoYXMgc2V0SW1tZWRpYXRlLCBvdGhlcndpc2U6CmlmKCFzZXRUYXNrIHx8ICFjbGVhclRhc2spewogIHNldFRhc2sgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pewogICAgdmFyIGFyZ3MgPSBbXSwgaSA9IDE7CiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOwogICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uKCl7CiAgICAgIGludm9rZSh0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJyA/IGZuIDogRnVuY3Rpb24oZm4pLCBhcmdzKTsKICAgIH07CiAgICBkZWZlcihjb3VudGVyKTsKICAgIHJldHVybiBjb3VudGVyOwogIH07CiAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpewogICAgZGVsZXRlIHF1ZXVlW2lkXTsKICB9OwogIC8vIE5vZGUuanMgMC44LQogIGlmKF9fd2VicGFja19yZXF1aXJlX18oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJyl7CiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgcHJvY2Vzcy5uZXh0VGljayhjdHgocnVuLCBpZCwgMSkpOwogICAgfTsKICAvLyBCcm93c2VycyB3aXRoIE1lc3NhZ2VDaGFubmVsLCBpbmNsdWRlcyBXZWJXb3JrZXJzCiAgfSBlbHNlIGlmKE1lc3NhZ2VDaGFubmVsKXsKICAgIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWw7CiAgICBwb3J0ICAgID0gY2hhbm5lbC5wb3J0MjsKICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdGVuZXI7CiAgICBkZWZlciA9IGN0eChwb3J0LnBvc3RNZXNzYWdlLCBwb3J0LCAxKTsKICAvLyBCcm93c2VycyB3aXRoIHBvc3RNZXNzYWdlLCBza2lwIFdlYldvcmtlcnMKICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0JwogIH0gZWxzZSBpZihnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAmJiB0eXBlb2YgcG9zdE1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJyAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpewogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7CiAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShpZCArICcnLCAnKicpOwogICAgfTsKICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIsIGZhbHNlKTsKICAvLyBJRTgtCiAgfSBlbHNlIGlmKE9OUkVBRFlTVEFURUNIQU5HRSBpbiBjZWwoJ3NjcmlwdCcpKXsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBodG1sLmFwcGVuZENoaWxkKGNlbCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbigpewogICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQodGhpcyk7CiAgICAgICAgcnVuLmNhbGwoaWQpOwogICAgICB9OwogICAgfTsKICAvLyBSZXN0IG9sZCBicm93c2VycwogIH0gZWxzZSB7CiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApOwogICAgfTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2V0OiAgIHNldFRhc2ssCiAgY2xlYXI6IGNsZWFyVGFzawp9OwoKLyoqKi8gfSksCi8qIDY4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQogICwgbWF4ICAgICAgID0gTWF0aC5tYXgKICAsIG1pbiAgICAgICA9IE1hdGgubWluOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluZGV4LCBsZW5ndGgpewogIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTsKICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbihpbmRleCwgbGVuZ3RoKTsKfTsKCi8qKiovIH0pLAovKiA2OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgYWRkVG9VbnNjb3BhYmxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApCiAgLCBzdGVwICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MykKICAsIEl0ZXJhdG9ycyAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQogICwgdG9JT2JqZWN0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKQovLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKQovLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpCi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7CiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldAogIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4CiAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmQKLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpCn0sIGZ1bmN0aW9uKCl7CiAgdmFyIE8gICAgID0gdGhpcy5fdAogICAgLCBraW5kICA9IHRoaXMuX2sKICAgICwgaW5kZXggPSB0aGlzLl9pKys7CiAgaWYoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpewogICAgdGhpcy5fdCA9IHVuZGVmaW5lZDsKICAgIHJldHVybiBzdGVwKDEpOwogIH0KICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTsKICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIE9baW5kZXhdKTsKICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7Cn0sICd2YWx1ZXMnKTsKCi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNykKSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTsKCmFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTsKYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7CmFkZFRvVW5zY29wYWJsZXMoJ2VudHJpZXMnKTsKCi8qKiovIH0pLAovKiA3MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDcxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODIpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIE1FVEEgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykoJ21ldGEnKQogICwgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBoYXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCBzZXREZXNjICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZgogICwgaWQgICAgICAgPSAwOwp2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpewogIHJldHVybiB0cnVlOwp9Owp2YXIgRlJFRVpFID0gIV9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7CiAgcmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKTsKfSk7CnZhciBzZXRNZXRhID0gZnVuY3Rpb24oaXQpewogIHNldERlc2MoaXQsIE1FVEEsIHt2YWx1ZTogewogICAgaTogJ08nICsgKytpZCwgLy8gb2JqZWN0IElECiAgICB3OiB7fSAgICAgICAgICAvLyB3ZWFrIGNvbGxlY3Rpb25zIElEcwogIH19KTsKfTsKdmFyIGZhc3RLZXkgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsKICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiAodHlwZW9mIGl0ID09ICdzdHJpbmcnID8gJ1MnIDogJ1AnKSArIGl0OwogIGlmKCFoYXMoaXQsIE1FVEEpKXsKICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gJ0YnOwogICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKICAgIGlmKCFjcmVhdGUpcmV0dXJuICdFJzsKICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCiAgICBzZXRNZXRhKGl0KTsKICAvLyByZXR1cm4gb2JqZWN0IElECiAgfSByZXR1cm4gaXRbTUVUQV0uaTsKfTsKdmFyIGdldFdlYWsgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsKICBpZighaGFzKGl0LCBNRVRBKSl7CiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAogICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuIHRydWU7CiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQogICAgaWYoIWNyZWF0ZSlyZXR1cm4gZmFsc2U7CiAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQogICAgc2V0TWV0YShpdCk7CiAgLy8gcmV0dXJuIGhhc2ggd2VhayBjb2xsZWN0aW9ucyBJRHMKICB9IHJldHVybiBpdFtNRVRBXS53Owp9OwovLyBhZGQgbWV0YWRhdGEgb24gZnJlZXplLWZhbWlseSBtZXRob2RzIGNhbGxpbmcKdmFyIG9uRnJlZXplID0gZnVuY3Rpb24oaXQpewogIGlmKEZSRUVaRSAmJiBtZXRhLk5FRUQgJiYgaXNFeHRlbnNpYmxlKGl0KSAmJiAhaGFzKGl0LCBNRVRBKSlzZXRNZXRhKGl0KTsKICByZXR1cm4gaXQ7Cn07CnZhciBtZXRhID0gbW9kdWxlLmV4cG9ydHMgPSB7CiAgS0VZOiAgICAgIE1FVEEsCiAgTkVFRDogICAgIGZhbHNlLAogIGZhc3RLZXk6ICBmYXN0S2V5LAogIGdldFdlYWs6ICBnZXRXZWFrLAogIG9uRnJlZXplOiBvbkZyZWV6ZQp9OwoKLyoqKi8gfSksCi8qIDczICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjbGFzc29mICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KQogICwgSVRFUkFUT1IgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQogICwgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5nZXRJdGVyYXRvck1ldGhvZCA9IGZ1bmN0aW9uKGl0KXsKICBpZihpdCAhPSB1bmRlZmluZWQpcmV0dXJuIGl0W0lURVJBVE9SXQogICAgfHwgaXRbJ0BAaXRlcmF0b3InXQogICAgfHwgSXRlcmF0b3JzW2NsYXNzb2YoaXQpXTsKfTsKCi8qKiovIH0pLAovKiA3NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDc1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODEpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA3NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDc4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTAwKTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGUoUCwgRCl7CiAgcmV0dXJuICRPYmplY3QuY3JlYXRlKFAsIEQpOwp9OwoKLyoqKi8gfSksCi8qIDc5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTAxKTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5nZXRQcm90b3R5cGVPZjsKCi8qKiovIH0pLAovKiA4MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Qua2V5czsKCi8qKiovIH0pLAovKiA4MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Quc2V0UHJvdG90eXBlT2Y7CgovKioqLyB9KSwKLyogODIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7Cl9fd2VicGFja19yZXF1aXJlX18oNTApOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTsKX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpOwptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuUHJvbWlzZTsKCi8qKiovIH0pLAovKiA4MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSk7Cl9fd2VicGFja19yZXF1aXJlX18oNTQpOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNik7Cl9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlN5bWJvbDsKCi8qKiovIH0pLAovKiA4NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkuZignaXRlcmF0b3InKTsKCi8qKiovIH0pLAovKiA4NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBDb25zdHJ1Y3RvciwgbmFtZSwgZm9yYmlkZGVuRmllbGQpewogIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgKGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpKXsKICAgIHRocm93IFR5cGVFcnJvcihuYW1lICsgJzogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7CiAgfSByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogODYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHMKdmFyIGdldEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQogICwgZ09QUyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpCiAgLCBwSUUgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHZhciByZXN1bHQgICAgID0gZ2V0S2V5cyhpdCkKICAgICwgZ2V0U3ltYm9scyA9IGdPUFMuZjsKICBpZihnZXRTeW1ib2xzKXsKICAgIHZhciBzeW1ib2xzID0gZ2V0U3ltYm9scyhpdCkKICAgICAgLCBpc0VudW0gID0gcElFLmYKICAgICAgLCBpICAgICAgID0gMAogICAgICAsIGtleTsKICAgIHdoaWxlKHN5bWJvbHMubGVuZ3RoID4gaSlpZihpc0VudW0uY2FsbChpdCwga2V5ID0gc3ltYm9sc1tpKytdKSlyZXN1bHQucHVzaChrZXkpOwogIH0gcmV0dXJuIHJlc3VsdDsKfTsKCi8qKiovIH0pLAovKiA4NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgY3R4ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQogICwgY2FsbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKQogICwgaXNBcnJheUl0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KQogICwgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCB0b0xlbmd0aCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpCiAgLCBnZXRJdGVyRm4gICA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpCiAgLCBCUkVBSyAgICAgICA9IHt9CiAgLCBSRVRVUk4gICAgICA9IHt9Owp2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmFibGUsIGVudHJpZXMsIGZuLCB0aGF0LCBJVEVSQVRPUil7CiAgdmFyIGl0ZXJGbiA9IElURVJBVE9SID8gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXJhYmxlOyB9IDogZ2V0SXRlckZuKGl0ZXJhYmxlKQogICAgLCBmICAgICAgPSBjdHgoZm4sIHRoYXQsIGVudHJpZXMgPyAyIDogMSkKICAgICwgaW5kZXggID0gMAogICAgLCBsZW5ndGgsIHN0ZXAsIGl0ZXJhdG9yLCByZXN1bHQ7CiAgaWYodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdGVyYWJsZSArICcgaXMgbm90IGl0ZXJhYmxlIScpOwogIC8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvcgogIGlmKGlzQXJyYXlJdGVyKGl0ZXJGbikpZm9yKGxlbmd0aCA9IHRvTGVuZ3RoKGl0ZXJhYmxlLmxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKXsKICAgIHJlc3VsdCA9IGVudHJpZXMgPyBmKGFuT2JqZWN0KHN0ZXAgPSBpdGVyYWJsZVtpbmRleF0pWzBdLCBzdGVwWzFdKSA6IGYoaXRlcmFibGVbaW5kZXhdKTsKICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsKICB9IGVsc2UgZm9yKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoaXRlcmFibGUpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7ICl7CiAgICByZXN1bHQgPSBjYWxsKGl0ZXJhdG9yLCBmLCBzdGVwLnZhbHVlLCBlbnRyaWVzKTsKICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsKICB9Cn07CmV4cG9ydHMuQlJFQUsgID0gQlJFQUs7CmV4cG9ydHMuUkVUVVJOID0gUkVUVVJOOwoKLyoqKi8gfSksCi8qIDg4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCBhcmdzLCB0aGF0KXsKICB2YXIgdW4gPSB0aGF0ID09PSB1bmRlZmluZWQ7CiAgc3dpdGNoKGFyZ3MubGVuZ3RoKXsKICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQpOwogICAgY2FzZSAxOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pOwogICAgY2FzZSAyOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0pOwogICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pOwogICAgY2FzZSA0OiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOwogIH0gcmV0dXJuICAgICAgICAgICAgICBmbi5hcHBseSh0aGF0LCBhcmdzKTsKfTsKCi8qKiovIH0pLAovKiA4OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yCnZhciBJdGVyYXRvcnMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkKICAsIElURVJBVE9SICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpCiAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTsKfTsKCi8qKiovIH0pLAovKiA5MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQp2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7Cm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZyl7CiAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7Cn07CgovKioqLyB9KSwKLyogOTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcgp2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpewogIHRyeSB7CiAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpOwogIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pCiAgfSBjYXRjaChlKXsKICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107CiAgICBpZihyZXQgIT09IHVuZGVmaW5lZClhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpOwogICAgdGhyb3cgZTsKICB9Cn07CgovKioqLyB9KSwKLyogOTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIElURVJBVE9SICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykKICAsIFNBRkVfQ0xPU0lORyA9IGZhbHNlOwoKdHJ5IHsKICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7CiAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24oKXsgU0FGRV9DTE9TSU5HID0gdHJ1ZTsgfTsKICBBcnJheS5mcm9tKHJpdGVyLCBmdW5jdGlvbigpeyB0aHJvdyAyOyB9KTsKfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjLCBza2lwQ2xvc2luZyl7CiAgaWYoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpcmV0dXJuIGZhbHNlOwogIHZhciBzYWZlID0gZmFsc2U7CiAgdHJ5IHsKICAgIHZhciBhcnIgID0gWzddCiAgICAgICwgaXRlciA9IGFycltJVEVSQVRPUl0oKTsKICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uKCl7IHJldHVybiB7ZG9uZTogc2FmZSA9IHRydWV9OyB9OwogICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyOyB9OwogICAgZXhlYyhhcnIpOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICByZXR1cm4gc2FmZTsKfTsKCi8qKiovIH0pLAovKiA5MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2V0S2V5cyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykKICAsIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgZWwpewogIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQogICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pCiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoCiAgICAsIGluZGV4ICA9IDAKICAgICwga2V5OwogIHdoaWxlKGxlbmd0aCA+IGluZGV4KWlmKE9ba2V5ID0ga2V5c1tpbmRleCsrXV0gPT09IGVsKXJldHVybiBrZXk7Cn07CgovKioqLyB9KSwKLyogOTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIG1hY3JvdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpLnNldAogICwgT2JzZXJ2ZXIgID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIKICAsIHByb2Nlc3MgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCBQcm9taXNlICAgPSBnbG9iYWwuUHJvbWlzZQogICwgaXNOb2RlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpewogIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7CgogIHZhciBmbHVzaCA9IGZ1bmN0aW9uKCl7CiAgICB2YXIgcGFyZW50LCBmbjsKICAgIGlmKGlzTm9kZSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKXBhcmVudC5leGl0KCk7CiAgICB3aGlsZShoZWFkKXsKICAgICAgZm4gICA9IGhlYWQuZm47CiAgICAgIGhlYWQgPSBoZWFkLm5leHQ7CiAgICAgIHRyeSB7CiAgICAgICAgZm4oKTsKICAgICAgfSBjYXRjaChlKXsKICAgICAgICBpZihoZWFkKW5vdGlmeSgpOwogICAgICAgIGVsc2UgbGFzdCA9IHVuZGVmaW5lZDsKICAgICAgICB0aHJvdyBlOwogICAgICB9CiAgICB9IGxhc3QgPSB1bmRlZmluZWQ7CiAgICBpZihwYXJlbnQpcGFyZW50LmVudGVyKCk7CiAgfTsKCiAgLy8gTm9kZS5qcwogIGlmKGlzTm9kZSl7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTsKICAgIH07CiAgLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyCiAgfSBlbHNlIGlmKE9ic2VydmVyKXsKICAgIHZhciB0b2dnbGUgPSB0cnVlCiAgICAgICwgbm9kZSAgID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpOwogICAgbmV3IE9ic2VydmVyKGZsdXNoKS5vYnNlcnZlKG5vZGUsIHtjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlOwogICAgfTsKICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZQogIH0gZWxzZSBpZihQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSl7CiAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpOwogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsKICAgICAgcHJvbWlzZS50aGVuKGZsdXNoKTsKICAgIH07CiAgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjoKICAvLyAtIHNldEltbWVkaWF0ZQogIC8vIC0gTWVzc2FnZUNoYW5uZWwKICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnCiAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2UKICAvLyAtIHNldFRpbWVvdXQKICB9IGVsc2UgewogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsKICAgICAgLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKQogICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTsKICAgIH07CiAgfQoKICByZXR1cm4gZnVuY3Rpb24oZm4pewogICAgdmFyIHRhc2sgPSB7Zm46IGZuLCBuZXh0OiB1bmRlZmluZWR9OwogICAgaWYobGFzdClsYXN0Lm5leHQgPSB0YXNrOwogICAgaWYoIWhlYWQpewogICAgICBoZWFkID0gdGFzazsKICAgICAgbm90aWZ5KCk7CiAgICB9IGxhc3QgPSB0YXNrOwogIH07Cn07CgovKioqLyB9KSwKLyogOTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdwp2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIGdPUE4gICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpLmYKICAsIHRvU3RyaW5nICA9IHt9LnRvU3RyaW5nOwoKdmFyIHdpbmRvd05hbWVzID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMKICA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTsKCnZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uKGl0KXsKICB0cnkgewogICAgcmV0dXJuIGdPUE4oaXQpOwogIH0gY2F0Y2goZSl7CiAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTsKICB9Cn07Cgptb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7CiAgcmV0dXJuIHdpbmRvd05hbWVzICYmIHRvU3RyaW5nLmNhbGwoaXQpID09ICdbb2JqZWN0IFdpbmRvd10nID8gZ2V0V2luZG93TmFtZXMoaXQpIDogZ09QTih0b0lPYmplY3QoaXQpKTsKfTsKCgovKioqLyB9KSwKLyogOTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGhpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldCwgc3JjLCBzYWZlKXsKICBmb3IodmFyIGtleSBpbiBzcmMpewogICAgaWYoc2FmZSAmJiB0YXJnZXRba2V5XSl0YXJnZXRba2V5XSA9IHNyY1trZXldOwogICAgZWxzZSBoaWRlKHRhcmdldCwga2V5LCBzcmNba2V5XSk7CiAgfSByZXR1cm4gdGFyZ2V0Owp9OwoKLyoqKi8gfSksCi8qIDk3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLgovKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CnZhciBjaGVjayA9IGZ1bmN0aW9uKE8sIHByb3RvKXsKICBhbk9iamVjdChPKTsKICBpZighaXNPYmplY3QocHJvdG8pICYmIHByb3RvICE9PSBudWxsKXRocm93IFR5cGVFcnJvcihwcm90byArICI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIik7Cn07Cm1vZHVsZS5leHBvcnRzID0gewogIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGZ1bmN0aW9uKHRlc3QsIGJ1Z2d5LCBzZXQpewogICAgICB0cnkgewogICAgICAgIHNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpKEZ1bmN0aW9uLmNhbGwsIF9fd2VicGFja19yZXF1aXJlX18oNTcpLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7CiAgICAgICAgc2V0KHRlc3QsIFtdKTsKICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTsKICAgICAgfSBjYXRjaChlKXsgYnVnZ3kgPSB0cnVlOyB9CiAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90byl7CiAgICAgICAgY2hlY2soTywgcHJvdG8pOwogICAgICAgIGlmKGJ1Z2d5KU8uX19wcm90b19fID0gcHJvdG87CiAgICAgICAgZWxzZSBzZXQoTywgcHJvdG8pOwogICAgICAgIHJldHVybiBPOwogICAgICB9OwogICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSwKICBjaGVjazogY2hlY2sKfTsKCi8qKiovIH0pLAovKiA5OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgZ2xvYmFsICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBjb3JlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGRQICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQogICwgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpCiAgLCBTUEVDSUVTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZKXsKICB2YXIgQyA9IHR5cGVvZiBjb3JlW0tFWV0gPT0gJ2Z1bmN0aW9uJyA/IGNvcmVbS0VZXSA6IGdsb2JhbFtLRVldOwogIGlmKERFU0NSSVBUT1JTICYmIEMgJiYgIUNbU1BFQ0lFU10pZFAuZihDLCBTUEVDSUVTLCB7CiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9CiAgfSk7Cn07CgovKioqLyB9KSwKLyogOTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCnZhciBhbk9iamVjdCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQogICwgU1BFQ0lFUyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE8sIEQpewogIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3IsIFM7CiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpOwp9OwoKLyoqKi8gfSksCi8qIDEwMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCkKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge2NyZWF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXygzNSl9KTsKCi8qKiovIH0pLAovKiAxMDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciB0b09iamVjdCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQogICwgJGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0UHJvdG90eXBlT2YnLCBmdW5jdGlvbigpewogIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCl7CiAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7CiAgfTsKfSk7CgovKioqLyB9KSwKLyogMTAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKQp2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQogICwgJGtleXMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCl9fd2VicGFja19yZXF1aXJlX18oNDUpKCdrZXlzJywgZnVuY3Rpb24oKXsKICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7CiAgICByZXR1cm4gJGtleXModG9PYmplY3QoaXQpKTsKICB9Owp9KTsKCi8qKiovIH0pLAovKiAxMDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykKdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwokZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXyg5Nykuc2V0fSk7CgovKioqLyB9KSwKLyogMTA0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBMSUJSQVJZICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKICAsIGNsYXNzb2YgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpCiAgLCAkZXhwb3J0ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCiAgLCBpc09iamVjdCAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBhRnVuY3Rpb24gICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQogICwgYW5JbnN0YW5jZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkKICAsIGZvck9mICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODcpCiAgLCBzcGVjaWVzQ29uc3RydWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KQogICwgdGFzayAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0CiAgLCBtaWNyb3Rhc2sgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KSgpCiAgLCBQUk9NSVNFICAgICAgICAgICAgPSAnUHJvbWlzZScKICAsIFR5cGVFcnJvciAgICAgICAgICA9IGdsb2JhbC5UeXBlRXJyb3IKICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCAkUHJvbWlzZSAgICAgICAgICAgPSBnbG9iYWxbUFJPTUlTRV0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCBpc05vZGUgICAgICAgICAgICAgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJwogICwgZW1wdHkgICAgICAgICAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfQogICwgSW50ZXJuYWwsIEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSwgV3JhcHBlcjsKCnZhciBVU0VfTkFUSVZFID0gISFmdW5jdGlvbigpewogIHRyeSB7CiAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQKICAgIHZhciBwcm9taXNlICAgICA9ICRQcm9taXNlLnJlc29sdmUoMSkKICAgICAgLCBGYWtlUHJvbWlzZSA9IChwcm9taXNlLmNvbnN0cnVjdG9yID0ge30pW19fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKV0gPSBmdW5jdGlvbihleGVjKXsgZXhlYyhlbXB0eSwgZW1wdHkpOyB9OwogICAgLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdAogICAgcmV0dXJuIChpc05vZGUgfHwgdHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCA9PSAnZnVuY3Rpb24nKSAmJiBwcm9taXNlLnRoZW4oZW1wdHkpIGluc3RhbmNlb2YgRmFrZVByb21pc2U7CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQp9KCk7CgovLyBoZWxwZXJzCnZhciBzYW1lQ29uc3RydWN0b3IgPSBmdW5jdGlvbihhLCBiKXsKICAvLyB3aXRoIGxpYnJhcnkgd3JhcHBlciBzcGVjaWFsIGNhc2UKICByZXR1cm4gYSA9PT0gYiB8fCBhID09PSAkUHJvbWlzZSAmJiBiID09PSBXcmFwcGVyOwp9Owp2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uKGl0KXsKICB2YXIgdGhlbjsKICByZXR1cm4gaXNPYmplY3QoaXQpICYmIHR5cGVvZiAodGhlbiA9IGl0LnRoZW4pID09ICdmdW5jdGlvbicgPyB0aGVuIDogZmFsc2U7Cn07CnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpewogIHJldHVybiBzYW1lQ29uc3RydWN0b3IoJFByb21pc2UsIEMpCiAgICA/IG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKQogICAgOiBuZXcgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpOwp9Owp2YXIgUHJvbWlzZUNhcGFiaWxpdHkgPSBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsKICB2YXIgcmVzb2x2ZSwgcmVqZWN0OwogIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uKCQkcmVzb2x2ZSwgJCRyZWplY3QpewogICAgaWYocmVzb2x2ZSAhPT0gdW5kZWZpbmVkIHx8IHJlamVjdCAhPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTsKICAgIHJlc29sdmUgPSAkJHJlc29sdmU7CiAgICByZWplY3QgID0gJCRyZWplY3Q7CiAgfSk7CiAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpOwogIHRoaXMucmVqZWN0ICA9IGFGdW5jdGlvbihyZWplY3QpOwp9Owp2YXIgcGVyZm9ybSA9IGZ1bmN0aW9uKGV4ZWMpewogIHRyeSB7CiAgICBleGVjKCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB7ZXJyb3I6IGV9OwogIH0KfTsKdmFyIG5vdGlmeSA9IGZ1bmN0aW9uKHByb21pc2UsIGlzUmVqZWN0KXsKICBpZihwcm9taXNlLl9uKXJldHVybjsKICBwcm9taXNlLl9uID0gdHJ1ZTsKICB2YXIgY2hhaW4gPSBwcm9taXNlLl9jOwogIG1pY3JvdGFzayhmdW5jdGlvbigpewogICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdgogICAgICAsIG9rICAgID0gcHJvbWlzZS5fcyA9PSAxCiAgICAgICwgaSAgICAgPSAwOwogICAgdmFyIHJ1biA9IGZ1bmN0aW9uKHJlYWN0aW9uKXsKICAgICAgdmFyIGhhbmRsZXIgPSBvayA/IHJlYWN0aW9uLm9rIDogcmVhY3Rpb24uZmFpbAogICAgICAgICwgcmVzb2x2ZSA9IHJlYWN0aW9uLnJlc29sdmUKICAgICAgICAsIHJlamVjdCAgPSByZWFjdGlvbi5yZWplY3QKICAgICAgICAsIGRvbWFpbiAgPSByZWFjdGlvbi5kb21haW4KICAgICAgICAsIHJlc3VsdCwgdGhlbjsKICAgICAgdHJ5IHsKICAgICAgICBpZihoYW5kbGVyKXsKICAgICAgICAgIGlmKCFvayl7CiAgICAgICAgICAgIGlmKHByb21pc2UuX2ggPT0gMilvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKTsKICAgICAgICAgICAgcHJvbWlzZS5faCA9IDE7CiAgICAgICAgICB9CiAgICAgICAgICBpZihoYW5kbGVyID09PSB0cnVlKXJlc3VsdCA9IHZhbHVlOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZW50ZXIoKTsKICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSk7CiAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZXhpdCgpOwogICAgICAgICAgfQogICAgICAgICAgaWYocmVzdWx0ID09PSByZWFjdGlvbi5wcm9taXNlKXsKICAgICAgICAgICAgcmVqZWN0KFR5cGVFcnJvcignUHJvbWlzZS1jaGFpbiBjeWNsZScpKTsKICAgICAgICAgIH0gZWxzZSBpZih0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKXsKICAgICAgICAgICAgdGhlbi5jYWxsKHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7CiAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9CiAgICB9OwogICAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSlydW4oY2hhaW5baSsrXSk7IC8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoCiAgICBwcm9taXNlLl9jID0gW107CiAgICBwcm9taXNlLl9uID0gZmFsc2U7CiAgICBpZihpc1JlamVjdCAmJiAhcHJvbWlzZS5faClvblVuaGFuZGxlZChwcm9taXNlKTsKICB9KTsKfTsKdmFyIG9uVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7CiAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsKICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YKICAgICAgLCBhYnJ1cHQsIGhhbmRsZXIsIGNvbnNvbGU7CiAgICBpZihpc1VuaGFuZGxlZChwcm9taXNlKSl7CiAgICAgIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsKICAgICAgICBpZihpc05vZGUpewogICAgICAgICAgcHJvY2Vzcy5lbWl0KCd1bmhhbmRsZWRSZWplY3Rpb24nLCB2YWx1ZSwgcHJvbWlzZSk7CiAgICAgICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pewogICAgICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiB2YWx1ZX0pOwogICAgICAgIH0gZWxzZSBpZigoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKXsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbicsIHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZAogICAgICBwcm9taXNlLl9oID0gaXNOb2RlIHx8IGlzVW5oYW5kbGVkKHByb21pc2UpID8gMiA6IDE7CiAgICB9IHByb21pc2UuX2EgPSB1bmRlZmluZWQ7CiAgICBpZihhYnJ1cHQpdGhyb3cgYWJydXB0LmVycm9yOwogIH0pOwp9Owp2YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsKICBpZihwcm9taXNlLl9oID09IDEpcmV0dXJuIGZhbHNlOwogIHZhciBjaGFpbiA9IHByb21pc2UuX2EgfHwgcHJvbWlzZS5fYwogICAgLCBpICAgICA9IDAKICAgICwgcmVhY3Rpb247CiAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSl7CiAgICByZWFjdGlvbiA9IGNoYWluW2krK107CiAgICBpZihyZWFjdGlvbi5mYWlsIHx8ICFpc1VuaGFuZGxlZChyZWFjdGlvbi5wcm9taXNlKSlyZXR1cm4gZmFsc2U7CiAgfSByZXR1cm4gdHJ1ZTsKfTsKdmFyIG9uSGFuZGxlVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7CiAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsKICAgIHZhciBoYW5kbGVyOwogICAgaWYoaXNOb2RlKXsKICAgICAgcHJvY2Vzcy5lbWl0KCdyZWplY3Rpb25IYW5kbGVkJywgcHJvbWlzZSk7CiAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnJlamVjdGlvbmhhbmRsZWQpewogICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHByb21pc2UuX3Z9KTsKICAgIH0KICB9KTsKfTsKdmFyICRyZWplY3QgPSBmdW5jdGlvbih2YWx1ZSl7CiAgdmFyIHByb21pc2UgPSB0aGlzOwogIGlmKHByb21pc2UuX2QpcmV0dXJuOwogIHByb21pc2UuX2QgPSB0cnVlOwogIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcAogIHByb21pc2UuX3YgPSB2YWx1ZTsKICBwcm9taXNlLl9zID0gMjsKICBpZighcHJvbWlzZS5fYSlwcm9taXNlLl9hID0gcHJvbWlzZS5fYy5zbGljZSgpOwogIG5vdGlmeShwcm9taXNlLCB0cnVlKTsKfTsKdmFyICRyZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpewogIHZhciBwcm9taXNlID0gdGhpcwogICAgLCB0aGVuOwogIGlmKHByb21pc2UuX2QpcmV0dXJuOwogIHByb21pc2UuX2QgPSB0cnVlOwogIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcAogIHRyeSB7CiAgICBpZihwcm9taXNlID09PSB2YWx1ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7CiAgICBpZih0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpewogICAgICBtaWNyb3Rhc2soZnVuY3Rpb24oKXsKICAgICAgICB2YXIgd3JhcHBlciA9IHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfTsgLy8gd3JhcAogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGN0eCgkcmVzb2x2ZSwgd3JhcHBlciwgMSksIGN0eCgkcmVqZWN0LCB3cmFwcGVyLCAxKSk7CiAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICRyZWplY3QuY2FsbCh3cmFwcGVyLCBlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcHJvbWlzZS5fdiA9IHZhbHVlOwogICAgICBwcm9taXNlLl9zID0gMTsKICAgICAgbm90aWZ5KHByb21pc2UsIGZhbHNlKTsKICAgIH0KICB9IGNhdGNoKGUpewogICAgJHJlamVjdC5jYWxsKHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfSwgZSk7IC8vIHdyYXAKICB9Cn07CgovLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbAppZighVVNFX05BVElWRSl7CiAgLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcikKICAkUHJvbWlzZSA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpewogICAgYW5JbnN0YW5jZSh0aGlzLCAkUHJvbWlzZSwgUFJPTUlTRSwgJ19oJyk7CiAgICBhRnVuY3Rpb24oZXhlY3V0b3IpOwogICAgSW50ZXJuYWwuY2FsbCh0aGlzKTsKICAgIHRyeSB7CiAgICAgIGV4ZWN1dG9yKGN0eCgkcmVzb2x2ZSwgdGhpcywgMSksIGN0eCgkcmVqZWN0LCB0aGlzLCAxKSk7CiAgICB9IGNhdGNoKGVycil7CiAgICAgICRyZWplY3QuY2FsbCh0aGlzLCBlcnIpOwogICAgfQogIH07CiAgSW50ZXJuYWwgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXsKICAgIHRoaXMuX2MgPSBbXTsgICAgICAgICAgICAgLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zCiAgICB0aGlzLl9hID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zCiAgICB0aGlzLl9zID0gMDsgICAgICAgICAgICAgIC8vIDwtIHN0YXRlCiAgICB0aGlzLl9kID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIGRvbmUKICAgIHRoaXMuX3YgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gdmFsdWUKICAgIHRoaXMuX2ggPSAwOyAgICAgICAgICAgICAgLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWQKICAgIHRoaXMuX24gPSBmYWxzZTsgICAgICAgICAgLy8gPC0gbm90aWZ5CiAgfTsKICBJbnRlcm5hbC5wcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSgkUHJvbWlzZS5wcm90b3R5cGUsIHsKICAgIC8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpCiAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKXsKICAgICAgdmFyIHJlYWN0aW9uICAgID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsICRQcm9taXNlKSk7CiAgICAgIHJlYWN0aW9uLm9rICAgICA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiB0cnVlOwogICAgICByZWFjdGlvbi5mYWlsICAgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7CiAgICAgIHJlYWN0aW9uLmRvbWFpbiA9IGlzTm9kZSA/IHByb2Nlc3MuZG9tYWluIDogdW5kZWZpbmVkOwogICAgICB0aGlzLl9jLnB1c2gocmVhY3Rpb24pOwogICAgICBpZih0aGlzLl9hKXRoaXMuX2EucHVzaChyZWFjdGlvbik7CiAgICAgIGlmKHRoaXMuX3Mpbm90aWZ5KHRoaXMsIGZhbHNlKTsKICAgICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7CiAgICB9LAogICAgLy8gMjUuNC41LjEgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2gob25SZWplY3RlZCkKICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpewogICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7CiAgICB9CiAgfSk7CiAgUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbigpewogICAgdmFyIHByb21pc2UgID0gbmV3IEludGVybmFsOwogICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTsKICAgIHRoaXMucmVzb2x2ZSA9IGN0eCgkcmVzb2x2ZSwgcHJvbWlzZSwgMSk7CiAgICB0aGlzLnJlamVjdCAgPSBjdHgoJHJlamVjdCwgcHJvbWlzZSwgMSk7CiAgfTsKfQoKJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1Byb21pc2U6ICRQcm9taXNlfSk7Cl9fd2VicGFja19yZXF1aXJlX18oMjEpKCRQcm9taXNlLCBQUk9NSVNFKTsKX193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoUFJPTUlTRSk7CldyYXBwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApW1BST01JU0VdOwoKLy8gc3RhdGljcwokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCBQUk9NSVNFLCB7CiAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocikKICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyKXsKICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcykKICAgICAgLCAkJHJlamVjdCAgID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICAkJHJlamVjdChyKTsKICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgfQp9KTsKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTElCUkFSWSB8fCAhVVNFX05BVElWRSksIFBST01JU0UsIHsKICAvLyAyNS40LjQuNiBQcm9taXNlLnJlc29sdmUoeCkKICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpewogICAgLy8gaW5zdGFuY2VvZiBpbnN0ZWFkIG9mIGludGVybmFsIHNsb3QgY2hlY2sgYmVjYXVzZSB3ZSBzaG91bGQgZml4IGl0IHdpdGhvdXQgcmVwbGFjZW1lbnQgbmF0aXZlIFByb21pc2UgY29yZQogICAgaWYoeCBpbnN0YW5jZW9mICRQcm9taXNlICYmIHNhbWVDb25zdHJ1Y3Rvcih4LmNvbnN0cnVjdG9yLCB0aGlzKSlyZXR1cm4geDsKICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcykKICAgICAgLCAkJHJlc29sdmUgID0gY2FwYWJpbGl0eS5yZXNvbHZlOwogICAgJCRyZXNvbHZlKHgpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9Cn0pOwokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoVVNFX05BVElWRSAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKShmdW5jdGlvbihpdGVyKXsKICAkUHJvbWlzZS5hbGwoaXRlcilbJ2NhdGNoJ10oZW1wdHkpOwp9KSksIFBST01JU0UsIHsKICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkKICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSl7CiAgICB2YXIgQyAgICAgICAgICA9IHRoaXMKICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykKICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsKICAgICAgdmFyIHZhbHVlcyAgICA9IFtdCiAgICAgICAgLCBpbmRleCAgICAgPSAwCiAgICAgICAgLCByZW1haW5pbmcgPSAxOwogICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2UpewogICAgICAgIHZhciAkaW5kZXggICAgICAgID0gaW5kZXgrKwogICAgICAgICAgLCBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7CiAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTsKICAgICAgICByZW1haW5pbmcrKzsKICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjsKICAgICAgICAgIGFscmVhZHlDYWxsZWQgID0gdHJ1ZTsKICAgICAgICAgIHZhbHVlc1skaW5kZXhdID0gdmFsdWU7CiAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKICAgIH0pOwogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9LAogIC8vIDI1LjQuNC40IFByb21pc2UucmFjZShpdGVyYWJsZSkKICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXsKICAgIHZhciBDICAgICAgICAgID0gdGhpcwogICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKQogICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7CiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7CiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpOwogICAgICB9KTsKICAgIH0pOwogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9Cn0pOwoKLyoqKi8gfSksCi8qIDEwNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgovLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltCnZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIERFU0NSSVBUT1JTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKQogICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpCiAgLCBNRVRBICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpLktFWQogICwgJGZhaWxzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKQogICwgc2hhcmVkICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgdWlkICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKQogICwgd2tzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpCiAgLCB3a3NFeHQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpCiAgLCB3a3NEZWZpbmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpCiAgLCBrZXlPZiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpCiAgLCBlbnVtS2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODYpCiAgLCBpc0FycmF5ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTApCiAgLCBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikKICAsIF9jcmVhdGUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSkKICAsIGdPUE5FeHQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSkKICAsICRHT1BEICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NykKICAsICREUCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQogICwgJGtleXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQogICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mCiAgLCBkUCAgICAgICAgICAgICA9ICREUC5mCiAgLCBnT1BOICAgICAgICAgICA9IGdPUE5FeHQuZgogICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sCiAgLCAkSlNPTiAgICAgICAgICA9IGdsb2JhbC5KU09OCiAgLCBfc3RyaW5naWZ5ICAgICA9ICRKU09OICYmICRKU09OLnN0cmluZ2lmeQogICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJwogICwgSElEREVOICAgICAgICAgPSB3a3MoJ19oaWRkZW4nKQogICwgVE9fUFJJTUlUSVZFICAgPSB3a3MoJ3RvUHJpbWl0aXZlJykKICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGUKICAsIFN5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzeW1ib2wtcmVnaXN0cnknKQogICwgQWxsU3ltYm9scyAgICAgPSBzaGFyZWQoJ3N5bWJvbHMnKQogICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKQogICwgT2JqZWN0UHJvdG8gICAgPSBPYmplY3RbUFJPVE9UWVBFXQogICwgVVNFX05BVElWRSAgICAgPSB0eXBlb2YgJFN5bWJvbCA9PSAnZnVuY3Rpb24nCiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0OwovLyBEb24ndCB1c2Ugc2V0dGVycyBpbiBRdCBTY3JpcHQsIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xNzMKdmFyIHNldHRlciA9ICFRT2JqZWN0IHx8ICFRT2JqZWN0W1BST1RPVFlQRV0gfHwgIVFPYmplY3RbUFJPVE9UWVBFXS5maW5kQ2hpbGQ7CgovLyBmYWxsYmFjayBmb3Igb2xkIEFuZHJvaWQsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD02ODcKdmFyIHNldFN5bWJvbERlc2MgPSBERVNDUklQVE9SUyAmJiAkZmFpbHMoZnVuY3Rpb24oKXsKICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiBkUCh0aGlzLCAnYScsIHt2YWx1ZTogN30pLmE7IH0KICB9KSkuYSAhPSA3Owp9KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpewogIHZhciBwcm90b0Rlc2MgPSBnT1BEKE9iamVjdFByb3RvLCBrZXkpOwogIGlmKHByb3RvRGVzYylkZWxldGUgT2JqZWN0UHJvdG9ba2V5XTsKICBkUChpdCwga2V5LCBEKTsKICBpZihwcm90b0Rlc2MgJiYgaXQgIT09IE9iamVjdFByb3RvKWRQKE9iamVjdFByb3RvLCBrZXksIHByb3RvRGVzYyk7Cn0gOiBkUDsKCnZhciB3cmFwID0gZnVuY3Rpb24odGFnKXsKICB2YXIgc3ltID0gQWxsU3ltYm9sc1t0YWddID0gX2NyZWF0ZSgkU3ltYm9sW1BST1RPVFlQRV0pOwogIHN5bS5fayA9IHRhZzsKICByZXR1cm4gc3ltOwp9OwoKdmFyIGlzU3ltYm9sID0gVVNFX05BVElWRSAmJiB0eXBlb2YgJFN5bWJvbC5pdGVyYXRvciA9PSAnc3ltYm9sJyA/IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnOwp9IDogZnVuY3Rpb24oaXQpewogIHJldHVybiBpdCBpbnN0YW5jZW9mICRTeW1ib2w7Cn07Cgp2YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgRCl7CiAgaWYoaXQgPT09IE9iamVjdFByb3RvKSRkZWZpbmVQcm9wZXJ0eShPUFN5bWJvbHMsIGtleSwgRCk7CiAgYW5PYmplY3QoaXQpOwogIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgYW5PYmplY3QoRCk7CiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpewogICAgaWYoIUQuZW51bWVyYWJsZSl7CiAgICAgIGlmKCFoYXMoaXQsIEhJRERFTikpZFAoaXQsIEhJRERFTiwgY3JlYXRlRGVzYygxLCB7fSkpOwogICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgaWYoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSlpdFtISURERU5dW2tleV0gPSBmYWxzZTsKICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7CiAgICB9IHJldHVybiBzZXRTeW1ib2xEZXNjKGl0LCBrZXksIEQpOwogIH0gcmV0dXJuIGRQKGl0LCBrZXksIEQpOwp9Owp2YXIgJGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKGl0LCBQKXsKICBhbk9iamVjdChpdCk7CiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKQogICAgLCBpICAgID0gMAogICAgLCBsID0ga2V5cy5sZW5ndGgKICAgICwga2V5OwogIHdoaWxlKGwgPiBpKSRkZWZpbmVQcm9wZXJ0eShpdCwga2V5ID0ga2V5c1tpKytdLCBQW2tleV0pOwogIHJldHVybiBpdDsKfTsKdmFyICRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaXQsIFApewogIHJldHVybiBQID09PSB1bmRlZmluZWQgPyBfY3JlYXRlKGl0KSA6ICRkZWZpbmVQcm9wZXJ0aWVzKF9jcmVhdGUoaXQpLCBQKTsKfTsKdmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uIHByb3BlcnR5SXNFbnVtZXJhYmxlKGtleSl7CiAgdmFyIEUgPSBpc0VudW0uY2FsbCh0aGlzLCBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpKTsKICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7CiAgcmV0dXJuIEUgfHwgIWhhcyh0aGlzLCBrZXkpIHx8ICFoYXMoQWxsU3ltYm9scywga2V5KSB8fCBoYXModGhpcywgSElEREVOKSAmJiB0aGlzW0hJRERFTl1ba2V5XSA/IEUgOiB0cnVlOwp9Owp2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKICBpdCAgPSB0b0lPYmplY3QoaXQpOwogIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjsKICB2YXIgRCA9IGdPUEQoaXQsIGtleSk7CiAgaWYoRCAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0pKUQuZW51bWVyYWJsZSA9IHRydWU7CiAgcmV0dXJuIEQ7Cn07CnZhciAkZ2V0T3duUHJvcGVydHlOYW1lcyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpewogIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpCiAgICAsIHJlc3VsdCA9IFtdCiAgICAsIGkgICAgICA9IDAKICAgICwga2V5OwogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpewogICAgaWYoIWhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiBrZXkgIT0gSElEREVOICYmIGtleSAhPSBNRVRBKXJlc3VsdC5wdXNoKGtleSk7CiAgfSByZXR1cm4gcmVzdWx0Owp9Owp2YXIgJGdldE93blByb3BlcnR5U3ltYm9scyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9scyhpdCl7CiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90bwogICAgLCBuYW1lcyAgPSBnT1BOKElTX09QID8gT1BTeW1ib2xzIDogdG9JT2JqZWN0KGl0KSkKICAgICwgcmVzdWx0ID0gW10KICAgICwgaSAgICAgID0gMAogICAgLCBrZXk7CiAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSl7CiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsKICB9IHJldHVybiByZXN1bHQ7Cn07CgovLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKaWYoIVVTRV9OQVRJVkUpewogICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXsKICAgIGlmKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKXRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpOwogICAgdmFyIHRhZyA9IHVpZChhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7CiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8pJHNldC5jYWxsKE9QU3ltYm9scywgdmFsdWUpOwogICAgICBpZihoYXModGhpcywgSElEREVOKSAmJiBoYXModGhpc1tISURERU5dLCB0YWcpKXRoaXNbSElEREVOXVt0YWddID0gZmFsc2U7CiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7CiAgICB9OwogICAgaWYoREVTQ1JJUFRPUlMgJiYgc2V0dGVyKXNldFN5bWJvbERlc2MoT2JqZWN0UHJvdG8sIHRhZywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgc2V0OiAkc2V0fSk7CiAgICByZXR1cm4gd3JhcCh0YWcpOwogIH07CiAgcmVkZWZpbmUoJFN5bWJvbFtQUk9UT1RZUEVdLCAndG9TdHJpbmcnLCBmdW5jdGlvbiB0b1N0cmluZygpewogICAgcmV0dXJuIHRoaXMuX2s7CiAgfSk7CgogICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogICREUC5mICAgPSAkZGVmaW5lUHJvcGVydHk7CiAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZiA9IGdPUE5FeHQuZiA9ICRnZXRPd25Qcm9wZXJ0eU5hbWVzOwogIF9fd2VicGFja19yZXF1aXJlX18oNDEpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlOwogIF9fd2VicGFja19yZXF1aXJlX18oNTgpLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzOwoKICBpZihERVNDUklQVE9SUyAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygyNSkpewogICAgcmVkZWZpbmUoT2JqZWN0UHJvdG8sICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICRwcm9wZXJ0eUlzRW51bWVyYWJsZSwgdHJ1ZSk7CiAgfQoKICB3a3NFeHQuZiA9IGZ1bmN0aW9uKG5hbWUpewogICAgcmV0dXJuIHdyYXAod2tzKG5hbWUpKTsKICB9Cn0KCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTsKCmZvcih2YXIgc3ltYm9scyA9ICgKICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNAogICdoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcycKKS5zcGxpdCgnLCcpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzKHN5bWJvbHNbaSsrXSk7Cgpmb3IodmFyIHN5bWJvbHMgPSAka2V5cyh3a3Muc3RvcmUpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzRGVmaW5lKHN5bWJvbHNbaSsrXSk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywgewogIC8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KQogICdmb3InOiBmdW5jdGlvbihrZXkpewogICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKQogICAgICA/IFN5bWJvbFJlZ2lzdHJ5W2tleV0KICAgICAgOiBTeW1ib2xSZWdpc3RyeVtrZXldID0gJFN5bWJvbChrZXkpOwogIH0sCiAgLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pCiAga2V5Rm9yOiBmdW5jdGlvbiBrZXlGb3Ioa2V5KXsKICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpOwogICAgdGhyb3cgVHlwZUVycm9yKGtleSArICcgaXMgbm90IGEgc3ltYm9sIScpOwogIH0sCiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LAogIHVzZVNpbXBsZTogZnVuY3Rpb24oKXsgc2V0dGVyID0gZmFsc2U7IH0KfSk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnT2JqZWN0JywgewogIC8vIDE5LjEuMi4yIE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKICBjcmVhdGU6ICRjcmVhdGUsCiAgLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCiAgZGVmaW5lUHJvcGVydHk6ICRkZWZpbmVQcm9wZXJ0eSwKICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQogIGRlZmluZVByb3BlcnRpZXM6ICRkZWZpbmVQcm9wZXJ0aWVzLAogIC8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsCiAgLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKICBnZXRPd25Qcm9wZXJ0eU5hbWVzOiAkZ2V0T3duUHJvcGVydHlOYW1lcywKICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiAkZ2V0T3duUHJvcGVydHlTeW1ib2xzCn0pOwoKLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pCiRKU09OICYmICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKCFVU0VfTkFUSVZFIHx8ICRmYWlscyhmdW5jdGlvbigpewogIHZhciBTID0gJFN5bWJvbCgpOwogIC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9CiAgLy8gV2ViS2l0IGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyBudWxsCiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoe2E6IFN9KSAhPSAne30nIHx8IF9zdHJpbmdpZnkoT2JqZWN0KFMpKSAhPSAne30nOwp9KSksICdKU09OJywgewogIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsKICAgIGlmKGl0ID09PSB1bmRlZmluZWQgfHwgaXNTeW1ib2woaXQpKXJldHVybjsgLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZAogICAgdmFyIGFyZ3MgPSBbaXRdCiAgICAgICwgaSAgICA9IDEKICAgICAgLCByZXBsYWNlciwgJHJlcGxhY2VyOwogICAgd2hpbGUoYXJndW1lbnRzLmxlbmd0aCA+IGkpYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTsKICAgIHJlcGxhY2VyID0gYXJnc1sxXTsKICAgIGlmKHR5cGVvZiByZXBsYWNlciA9PSAnZnVuY3Rpb24nKSRyZXBsYWNlciA9IHJlcGxhY2VyOwogICAgaWYoJHJlcGxhY2VyIHx8ICFpc0FycmF5KHJlcGxhY2VyKSlyZXBsYWNlciA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpewogICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTsKICAgICAgaWYoIWlzU3ltYm9sKHZhbHVlKSlyZXR1cm4gdmFsdWU7CiAgICB9OwogICAgYXJnc1sxXSA9IHJlcGxhY2VyOwogICAgcmV0dXJuIF9zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3MpOwogIH0KfSk7CgovLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpCiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IF9fd2VicGFja19yZXF1aXJlX18oNikoJFN5bWJvbFtQUk9UT1RZUEVdLCBUT19QUklNSVRJVkUsICRTeW1ib2xbUFJPVE9UWVBFXS52YWx1ZU9mKTsKLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQpzZXRUb1N0cmluZ1RhZygkU3ltYm9sLCAnU3ltYm9sJyk7Ci8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ10Kc2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTsKLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ10Kc2V0VG9TdHJpbmdUYWcoZ2xvYmFsLkpTT04sICdKU09OJywgdHJ1ZSk7CgovKioqLyB9KSwKLyogMTA2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdhc3luY0l0ZXJhdG9yJyk7CgovKioqLyB9KSwKLyogMTA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdvYnNlcnZhYmxlJyk7CgovKioqLyB9KSwKLyogMTA4ICovLAovKiAxMDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Cgp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOwoKdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7CgpleHBvcnRzLmRpdmlkZVVSTCA9IGRpdmlkZVVSTDsKZXhwb3J0cy5kaXZpZGVFbWFpbCA9IGRpdmlkZUVtYWlsOwpleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldFVzZXJVUkxGcm9tRW1haWwgPSBnZXRVc2VyVVJMRnJvbUVtYWlsOwpleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOwpleHBvcnRzLmNvbnZlcnRUb1VzZXJVUkwgPSBjb252ZXJ0VG9Vc2VyVVJMOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwoKLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCgovKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsKCiAgaWYgKCF1cmwpIHRocm93IEVycm9yKCdVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Jyk7CgogIGZ1bmN0aW9uIHJlY3Vyc2UodmFsdWUpIHsKICAgIHZhciByZWdleCA9IC8oW2EtekEtWi1dKikoOlwvXC8oPzpcLik/fDopKFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICAgIHZhciBzdWJzdCA9ICckMSwkMywkNCc7CiAgICB2YXIgcGFydHMgPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4LCBzdWJzdCkuc3BsaXQoJywnKTsKICAgIHJldHVybiBwYXJ0czsKICB9CgogIHZhciBwYXJ0cyA9IHJlY3Vyc2UodXJsKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gc2NoZW1lCiAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgIXBhcnRzWzBdLmluY2x1ZGVzKCdAJykpIHsKCiAgICB2YXIgX3Jlc3VsdCA9IHsKICAgICAgdHlwZTogIiIsCiAgICAgIGRvbWFpbjogdXJsLAogICAgICBpZGVudGl0eTogIiIKICAgIH07CgogICAgY29uc29sZS5lcnJvcignW0RpdmlkZVVSTF0gRGl2aWRlVVJMIGRvblwndCBzdXBwb3J0IHVybCB3aXRob3V0IHNjaGVtZS4gUGxlYXNlIHJldmlldyB5b3VyIHVybCBhZGRyZXNzJywgdXJsKTsKCiAgICByZXR1cm4gX3Jlc3VsdDsKICB9CgogIC8vIGNoZWNrIGlmIHRoZSB1cmwgaGFzIHRoZSBzY2hlbWUgYW5kIGluY2x1ZGVzIGFuIEAKICBpZiAocGFydHNbMF0gPT09IHVybCAmJiBwYXJ0c1swXS5pbmNsdWRlcygnQCcpKSB7CiAgICB2YXIgc2NoZW1lID0gcGFydHNbMF0gPT09IHVybCA/ICdzbXRwJyA6IHBhcnRzWzBdOwogICAgcGFydHMgPSByZWN1cnNlKHNjaGVtZSArICc6Ly8nICsgcGFydHNbMF0pOwogIH0KCiAgLy8gaWYgdGhlIGRvbWFpbiBpbmNsdWRlcyBhbiBALCBkaXZpZGUgaXQgdG8gZG9tYWluIGFuZCBpZGVudGl0eSByZXNwZWN0aXZlbHkKICBpZiAocGFydHNbMV0uaW5jbHVkZXMoJ0AnKSkgewogICAgcGFydHNbMl0gPSBwYXJ0c1swXSArICc6Ly8nICsgcGFydHNbMV07CiAgICBwYXJ0c1sxXSA9IHBhcnRzWzFdLnN1YnN0cihwYXJ0c1sxXS5pbmRleE9mKCdAJykgKyAxKTsKICB9IC8qZWxzZSBpZiAocGFydHNbMl0uaW5jbHVkZXMoJy8nKSkgewogICAgcGFydHNbMl0gPSBwYXJ0c1syXS5zdWJzdHIocGFydHNbMl0ubGFzdEluZGV4T2YoJy8nKSsxKTsKICAgIH0qLwoKICB2YXIgcmVzdWx0ID0gewogICAgdHlwZTogcGFydHNbMF0sCiAgICBkb21haW46IHBhcnRzWzFdLAogICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKZnVuY3Rpb24gZGl2aWRlRW1haWwoZW1haWwpIHsKICB2YXIgaW5kZXhPZkF0ID0gZW1haWwuaW5kZXhPZignQCcpOwoKICB2YXIgcmVzdWx0ID0gewogICAgdXNlcm5hbWU6IGVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpLAogICAgZG9tYWluOiBlbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgZW1haWwubGVuZ3RoKQogIH07CgogIHJldHVybiByZXN1bHQ7Cn0KCi8qKgogKiBDaGVjayBpZiBhbiBPYmplY3QgaXMgZW1wdHkKICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3QgT2JqZWN0IHRvIGJlIGNoZWNrZWQKICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgc3RhdHVzIG9mIE9iamVjdCwgZW1wdHkgb3Igbm90ICh0cnVlfGZhbHNlKTsKICovCmZ1bmN0aW9uIGVtcHR5T2JqZWN0KG9iamVjdCkgewogIHJldHVybiAoMCwgX2tleXMyLmRlZmF1bHQpKG9iamVjdCkubGVuZ3RoID4gMCA/IGZhbHNlIDogdHJ1ZTsKfQoKLyoqCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQKICogQHJldHVybiB7T2JqZWN0fQogKi8KZnVuY3Rpb24gZGVlcENsb25lKG9iaikgewogIC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4KICBpZiAob2JqKSByZXR1cm4gSlNPTi5wYXJzZSgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkob2JqKSk7Cn0KCi8qKgogKiBPYnRhaW5zIHRoZSB1c2VyIFVSTCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gZW1haWwKICogQHBhcmFtICB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwKICogQHJldHVybiB7VVJMLlVSTH0gdXNlclVSTCBUaGUgdXNlciBVUkwKICovCmZ1bmN0aW9uIGdldFVzZXJVUkxGcm9tRW1haWwodXNlckVtYWlsKSB7CiAgdmFyIGluZGV4T2ZBdCA9IHVzZXJFbWFpbC5pbmRleE9mKCdAJyk7CiAgcmV0dXJuICd1c2VyOi8vJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgdXNlckVtYWlsLmxlbmd0aCkgKyAnLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCk7Cn0KCi8qKgogKiBPYnRhaW5zIHRoZSB1c2VyIGVtYWlsIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBVUkwKICogQHBhcmFtICB7VVJMLlVSTH0gdXNlclVSTCBUaGUgdXNlciBVUkwKICogQHJldHVybiB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwKICovCmZ1bmN0aW9uIGdldFVzZXJFbWFpbEZyb21VUkwodXNlclVSTCkgewogIHZhciB1cmwgPSBkaXZpZGVVUkwodXNlclVSTCk7CiAgcmV0dXJuIHVybC5pZGVudGl0eS5yZXBsYWNlKCcvJywgJycpICsgJ0AnICsgdXJsLmRvbWFpbjsgLy8gaWRlbnRpdHkgZmllbGQgaGFzICcvZXhhbXBsZUlEJyBpbnN0ZWFkIG9mICdleGFtcGxlSUQnCn0KCi8qKgogKiBDaGVjayBpZiB0aGUgdXNlciBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIFVSTCBmb3JtYXQsIGlmIG5vdCwgY29udmVydCB0byBVUkwgZm9ybWF0CiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXIKICogQHJldHVybiB7c3RyaW5nfSAgIHVzZXJVUkwgICAgdGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9Vc2VyVVJMKGlkZW50aWZpZXIpIHsKCiAgLy8gY2hlY2sgaWYgdGhlIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgdXJsIGZvcm1hdAogIGlmIChpZGVudGlmaWVyLnN1YnN0cmluZygwLCA3KSA9PT0gJ3VzZXI6Ly8nKSB7CiAgICB2YXIgZGl2aWRlZFVSTCA9IGRpdmlkZVVSTChpZGVudGlmaWVyKTsKCiAgICAvL2NoZWNrIGlmIHRoZSB1cmwgaXMgd2VsbCBmb3JtYXRlZAogICAgaWYgKGRpdmlkZWRVUkwuZG9tYWluICYmIGRpdmlkZWRVUkwuaWRlbnRpdHkpIHsKICAgICAgcmV0dXJuIGlkZW50aWZpZXI7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyAndXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCc7CiAgICB9CgogICAgLy9pZiBub3QsIGNvbnZlcnQgdGhlIHVzZXIgZW1haWwgdG8gVVJMIGZvcm1hdAogIH0gZWxzZSB7CiAgICByZXR1cm4gZ2V0VXNlclVSTEZyb21FbWFpbChpZGVudGlmaWVyKTsKICB9Cn0KCi8qKiovIH0pLAovKiAxMTAgKi8sCi8qIDExMSAqLywKLyogMTEyICovLAovKiAxMTMgKi8sCi8qIDExNCAqLywKLyogMTE1ICovLAovKiAxMTYgKi8sCi8qIDExNyAqLywKLyogMTE4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7Cgp2YXIgX2dldDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyk7Cgp2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsKCnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7Cgp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7Cgp2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOwoKdmFyIF9EYXRhT2JqZWN0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3QyKTsKCnZhciBfRGF0YU9iamVjdENoaWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOwoKdmFyIF9EYXRhT2JqZWN0Q2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdENoaWxkKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCnZhciBGaWx0ZXJUeXBlID0geyBBTlk6ICdhbnknLCBTVEFSVDogJ3N0YXJ0JywgRVhBQ1Q6ICdleGFjdCcgfTsKCi8qKgogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgU3luY2hlciBzdWJzY3JpYmUgY2FsbC4KICogVG8gYmUgdXNlZCBhcyBhbiBvYnNlcnZhdGlvbiBwb2ludCBmcm9tIGEgRGF0YU9iamVjdFJlcG9ydGVyIGNoYW5nZS4KICovCgp2YXIgRGF0YU9iamVjdE9ic2VydmVyID0gZnVuY3Rpb24gKF9EYXRhT2JqZWN0KSB7CiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLCBfRGF0YU9iamVjdCk7CgogIC8qIHByaXZhdGUKICBfY2hhbmdlTGlzdGVuZXI6IE1zZ0xpc3RlbmVyCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KICBfZmlsdGVyczogezxmaWx0ZXI+OiB7dHlwZTogPHN0YXJ0LCBleGFjdD4sIGNhbGxiYWNrOiA8ZnVuY3Rpb24+fSB9CiAgKi8KCiAgLyoqCiAgICogQGlnbm9yZQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyLnN1YnNjcmliZSBtZXRob2QKICAgKi8KCiAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogIGZ1bmN0aW9uIERhdGFPYmplY3RPYnNlcnZlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucywgaW5pdGlhbFZlcnNpb24sIG11dHVhbCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdE9ic2VydmVyKTsKCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdE9ic2VydmVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIpKS5jYWxsKHRoaXMsIHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YS5kYXRhLCBjaGlsZHJlbnMsIG11dHVhbCkpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKCiAgICBfdGhpcy5fdmVyc2lvbiA9IGluaXRpYWxWZXJzaW9uOwogICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsKCiAgICBfdGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uIChldmVudCkgewogICAgICBfdGhpcy5fb25GaWx0ZXIoZXZlbnQpOwogICAgfSk7CgogICAgLy9zZXR1cCBjaGlsZHJlbnMgZGF0YSBmcm9tIHN1YnNjcmlwdGlvbgogICAgKDAsIF9rZXlzMi5kZWZhdWx0KShpbml0aWFsRGF0YS5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkSWQpIHsKICAgICAgdmFyIGNoaWxkRGF0YSA9IGluaXRpYWxEYXRhLmNoaWxkcmVuc1tjaGlsZElkXTsKICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXSA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBjaGlsZElkLCBjaGlsZERhdGEpOwogICAgfSk7CgogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlKSwgJ19hbGxvY2F0ZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwgKyAnL2NoYW5nZXMnLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgaWYgKG1zZy50eXBlID09PSAndXBkYXRlJykgewogICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOwogICAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChfdGhpcy5fc3luY09iaiwgbXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9vYnNlcnZlcnNbX3RoaXMuX3VybF07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGEKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICd1bnN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsVW5TdWJzY3JpYmUKICAgICAgdmFyIHVuU3Vic2NyaWJlTXNnID0gewogICAgICAgIHR5cGU6ICd1bnN1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9CiAgICAgIH07CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHVuU3Vic2NyaWJlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAnLCByZXBseSk7CiAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9vYnNlcnZlcnNbX3RoaXMuX3VybF07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlZ2lzdGVyIHRoZSBjaGFuZ2UgbGlzdGVuZXJzIHNlbnQgYnkgdGhlIHJlcG9ydGVyCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIC0gRmlsdGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgZmllbGQgKHNlcGFyYXRlZCBkb3QgcGF0aCkuIEFjY2VwdHMgKiBhdCB0aGUgZW5kIGZvciBhIG1vcmUgdW5yZXN0cmljdGVkIGZpbHRlcmluZy4KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvbkNoYW5nZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoZmlsdGVyLCBjYWxsYmFjaykgewogICAgICB2YXIga2V5ID0gZmlsdGVyOwogICAgICB2YXIgZmlsdGVyT2JqID0gewogICAgICAgIHR5cGU6IEZpbHRlclR5cGUuRVhBQ1QsCiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrCiAgICAgIH07CgogICAgICB2YXIgaWR4ID0gZmlsdGVyLmluZGV4T2YoJyonKTsKICAgICAgaWYgKGlkeCA9PT0gZmlsdGVyLmxlbmd0aCAtIDEpIHsKICAgICAgICBpZiAoaWR4ID09PSAwKSB7CiAgICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuQU5ZOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuU1RBUlQ7CiAgICAgICAgICBrZXkgPSBmaWx0ZXIuc3Vic3RyKDAsIGZpbHRlci5sZW5ndGggLSAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuX2ZpbHRlcnNba2V5XSA9IGZpbHRlck9iajsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25GaWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZpbHRlcihldmVudCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgdmFyIGZpbHRlciA9IF90aGlzLl9maWx0ZXJzW2tleV07CiAgICAgICAgaWYgKGZpbHRlci50eXBlID09PSBGaWx0ZXJUeXBlLkFOWSkgewogICAgICAgICAgLy9tYXRjaCBhbnl0aGluZwogICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci50eXBlID09PSBGaWx0ZXJUeXBlLlNUQVJUKSB7CiAgICAgICAgICAvL2lmIHN0YXJ0cyB3aXRoIGZpbHRlci4uLgogICAgICAgICAgaWYgKGV2ZW50LmZpZWxkLmluZGV4T2Yoa2V5KSA9PT0gMCkgewogICAgICAgICAgICBmaWx0ZXIuY2FsbGJhY2soZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuRVhBQ1QpIHsKICAgICAgICAgIC8vZXhhY3QgbWF0Y2gKICAgICAgICAgIGlmIChldmVudC5maWVsZCA9PT0ga2V5KSB7CiAgICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIERhdGFPYmplY3RPYnNlcnZlcjsKfShfRGF0YU9iamVjdDMuZGVmYXVsdCAvKiBpbXBsZW1lbnRzIFN5bmNTdGF0dXMgKi8pOwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdE9ic2VydmVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOwoKdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCnZhciBfZ2V0MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCnZhciBfZ2V0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldDIpOwoKdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsKCnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTsKCnZhciBfRGF0YU9iamVjdDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7Cgp2YXIgX0RhdGFPYmplY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdDIpOwoKdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIFN5bmNoZXIgY3JlYXRlIGNhbGwuCiAqIFRvIGJlIHVzZWQgYXMgYSByZXBvcnRlciBwb2ludCwgY2hhbmdlcyB3aWxsIGJlIHN1Ym1pdGVkIHRvIERhdGFPYmplY3RPYnNlcnZlciBpbnN0YW5jZXMuCiAqLwovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCnZhciBEYXRhT2JqZWN0UmVwb3J0ZXIgPSBmdW5jdGlvbiAoX0RhdGFPYmplY3QpIHsKICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsIF9EYXRhT2JqZWN0KTsKCiAgLyogcHJpdmF0ZQogIF9zdWJzY3JpcHRpb25zOiA8aHlwZXJ0eVVybDogeyBzdGF0dXM6IHN0cmluZyB9IH0+CiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KICBfb25TdWJzY3JpcHRpb25IYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKICBfb25SZXNwb25zZUhhbmRsZXI6IChldmVudCkgPT4gdm9pZAogIF9vblJlYWRIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKICAqLwoKICAvKioKICAgKiBAaWdub3JlCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuY3JlYXRlIG1ldGhvZAogICAqLwogIGZ1bmN0aW9uIERhdGFPYmplY3RSZXBvcnRlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdFJlcG9ydGVyKTsKCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdFJlcG9ydGVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIpKS5jYWxsKHRoaXMsIHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwoKICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307CgogICAgX3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci0nICsgdXJsICsgJy1TRU5EOiAnLCBldmVudCk7CiAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCk7CiAgICB9KTsKCiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsIFt7CiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLCAnX2FsbG9jYXRlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0LScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgc3dpdGNoIChtc2cudHlwZSkgewogICAgICAgICAgY2FzZSAncmVzcG9uc2UnOgogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpO2JyZWFrOwogICAgICAgICAgY2FzZSAncmVhZCc6CiAgICAgICAgICAgIF90aGlzLl9vblJlYWQobXNnKTticmVhazsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBpbnZpdGF0aW9ucyAoY3JlYXRlIG1lc3NhZ2VzKSB0byBoeXBlcnRpZXMsIG9ic2VydmVycyBsaXN0LgogICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTFtdfSBvYnNlcnZlcnMgTGlzdCBvZiBIeXBlcnR5IFVSTCdzCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnaW52aXRlT2JzZXJ2ZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnZpdGVPYnNlcnZlcnMob2JzZXJ2ZXJzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkNyZWF0ZQogICAgICB2YXIgaW52aXRlTXNnID0gewogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fc3luY2hlci5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLAogICAgICAgIGJvZHk6IHsgcmVzdW1lOiBmYWxzZSwgcmVzb3VyY2U6IF90aGlzLl91cmwsIHNjaGVtYTogX3RoaXMuX3NjaGVtYSwgdmFsdWU6IF90aGlzLl9zeW5jT2JqLmRhdGEsIGF1dGhvcmlzZTogb2JzZXJ2ZXJzIH0KICAgICAgfTsKCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoaW52aXRlTXNnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2RlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uRGVsZXRlCiAgICAgIHZhciBkZWxldGVNc2cgPSB7CiAgICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9CiAgICAgIH07CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGRlbGV0ZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICcsIHJlcGx5KTsKICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX3JlcG9ydGVyc1tfdGhpcy5fdXJsXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogU3Vic2NyaXB0aW9ucyByZXF1ZXN0ZWQgYW5kIGFjY2VwdGVkIHRvIHRoaXMgcmVwb3J0ZXIKICAgICAqIEB0eXBlIHtPYmplY3Q8SHlwZXJ0eVVSTCwgU3luY1N1YnNjcmlwdGlvbj59CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25TdWJzY3JpcHRpb24nLAoKCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9ucwogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGV2ZW50cwogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJzY3JpcHRpb24oY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZXNwb25zZSBub3RpZmljYXRpb25zIG9mIHRoZSBjcmVhdGUncwogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGV2ZW50cwogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uUmVzcG9uc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzcG9uc2UoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25SZXNwb25zZUhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlYWQgbm90aWZpY2F0aW9ucwogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uUmVhZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZWFkKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVhZEhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBwYXJlbnQgU3luY2hlciAtPiBfb25Gb3J3YXJkCgogIH0sIHsKICAgIGtleTogJ19vbkZvcndhcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZvcndhcmQobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogJywgbXNnKTsKICAgICAgc3dpdGNoIChtc2cuYm9keS50eXBlKSB7CiAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICAgIF90aGlzLl9vblN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKICAgICAgICAgIF90aGlzLl9vblVuU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBzdWJzY3JpYmUKCiAgfSwgewogICAga2V5OiAnX29uU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25TdWJzY3JpYmUobXNnKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVcmwgPSBtc2cuYm9keS5mcm9tOwogICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3RSZXBvcnRlci5fb25TdWJzY3JpYmVdJywgbXNnKTsKCiAgICAgIHZhciBldmVudCA9IHsKICAgICAgICB0eXBlOiBtc2cuYm9keS50eXBlLAogICAgICAgIHVybDogaHlwZXJ0eVVybCwKCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LAoKICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdCgpIHsKICAgICAgICAgIC8vY3JlYXRlIG5ldyBzdWJzY3JpcHRpb24KICAgICAgICAgIHZhciBzdWIgPSB7IHVybDogaHlwZXJ0eVVybCwgc3RhdHVzOiAnb24nIH07CiAgICAgICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXSA9IHN1YjsKCiAgICAgICAgICAvL3Byb2Nlc3MgYW5kIHNlbmQgY2hpbGRyZW5zIGRhdGEKICAgICAgICAgIHZhciBjaGlsZHJlblZhbHVlcyA9IHt9OwogICAgICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZElkKSB7CiAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdLmRhdGE7CiAgICAgICAgICAgIGNoaWxkcmVuVmFsdWVzW2NoaWxkSWRdID0gKDAsIF91dGlscy5kZWVwQ2xvbmUpKGNoaWxkRGF0YSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB2YXIgc2VuZE1zZyA9IHsKICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCB2YWx1ZTogeyBkYXRhOiAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoX3RoaXMuZGF0YSksIGNoaWxkcmVuczogY2hpbGRyZW5WYWx1ZXMgfSB9CiAgICAgICAgICB9OwoKICAgICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICAgIGlmIChtc2cuYm9keS5oYXNPd25Qcm9wZXJ0eSgnbXV0dWFsQXV0aGVudGljYXRpb24nKSAmJiAhbXNnLmJvZHkubXV0dWFsQXV0aGVudGljYXRpb24pIHsKICAgICAgICAgICAgc2VuZE1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gX3RoaXMzLl9tdXR1YWxBdXRoZW50aWNhdGlvbjsKICAgICAgICAgICAgX3RoaXMzLl9tdXR1YWxBdXRoZW50aWNhdGlvbiA9IG1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIC8vc2VuZCBvayByZXNwb25zZSBtZXNzYWdlCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHNlbmRNc2cpOwoKICAgICAgICAgIHJldHVybiBzdWI7CiAgICAgICAgfSwKCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7CiAgICAgICAgICAvL3NlbmQgcmVqZWN0IHJlc3BvbnNlIG1lc3NhZ2UKICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgICAgYm9keTogeyBjb2RlOiA0MDMsIGRlc2M6IHJlYXNvbiB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcikgewogICAgICAgIGNvbnNvbGUubG9nKCdTVUJTQ1JJUFRJT04tRVZFTlQ6ICcsIGV2ZW50KTsKICAgICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoaXMgLT4gX29uRm9yd2FyZDogZW1pdHRlZCBieSBhIHJlbW90ZSBEYXRhT2JqZWN0T2JzZXJ2ZXIgLT4gdW5zdWJzY3JpYmUKCiAgfSwgewogICAga2V5OiAnX29uVW5TdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblVuU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaHlwZXJ0eVVybCA9IG1zZy5ib2R5LmZyb207CgogICAgICB2YXIgc3ViID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07CiAgICAgIGRlbGV0ZSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXTsKCiAgICAgIHZhciBldmVudCA9IHsKICAgICAgICB0eXBlOiBtc2cuYm9keS50eXBlLAogICAgICAgIHVybDogaHlwZXJ0eVVybCwKICAgICAgICBvYmplY3Q6IHN1YgogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnVU4tU1VCU0NSSVBUSU9OLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBSZXBvcnRlclVSTCBhZGRyZXNzOiBlbWl0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBfb25SZW1vdGVDcmVhdGUgLT4gZXZlbnQuYWNrCgogIH0sIHsKICAgIGtleTogJ19vblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZXNwb25zZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBldmVudCA9IHsKICAgICAgICB0eXBlOiBtc2cudHlwZSwKICAgICAgICB1cmw6IG1zZy5mcm9tLAogICAgICAgIGNvZGU6IG1zZy5ib2R5LmNvZGUKICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnUkVTUE9OU0UtRVZFTlQ6ICcsIGV2ZW50KTsKICAgICAgICBfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIoZXZlbnQpOwogICAgICB9CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gUmVwb3J0ZXJVUkwgYWRkcmVzczogZW1pdGVkIGJ5IGEgcmVtb3RlIFN5bmNoZXIgLT4gcmVhZAoKICB9LCB7CiAgICBrZXk6ICdfb25SZWFkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZWFkKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGV2ZW50ID0gewogICAgICAgIHR5cGU6IG1zZy50eXBlLAogICAgICAgIHVybDogbXNnLmZyb20sCgogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgewogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6ICgwLCBfdXRpbHMuZGVlcENsb25lKShfdGhpcy5kYXRhKSB9CiAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHsKICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgICAgYm9keTogeyBjb2RlOiA0MDEsIGRlc2M6IHJlYXNvbiB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uUmVhZEhhbmRsZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnUkVBRC1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vblJlYWRIYW5kbGVyKGV2ZW50KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3N1YnNjcmlwdGlvbnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zOwogICAgfQogIH1dKTsKICByZXR1cm4gRGF0YU9iamVjdFJlcG9ydGVyOwp9KF9EYXRhT2JqZWN0My5kZWZhdWx0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyk7CgpleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0UmVwb3J0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEyMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7Cgp2YXIgX3Byb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvbWlzZSk7Cgp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX1Byb3h5T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOwoKdmFyIF9Qcm94eU9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm94eU9iamVjdCk7Cgp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsKCnZhciBfRGF0YU9iamVjdENoaWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RDaGlsZCk7Cgp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgogKiBNYWluIGV4dGVuc2lvbiBjbGFzcyBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuCiAqIENoaWxkcmVuIG1hbmFnZW1lbnQgaXMgY29tbW9uIGZvciBvYnNlcnZlcnMgYW5kIHJlcG9ydGVycy4KICovCnZhciBEYXRhT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICBfdmVyc2lvbjogbnVtYmVyCiAgIF9vd25lcjogSHlwZXJ0eVVSTAogIF91cmw6IE9iamVjdFVSTAogIF9zY2hlbWE6IFNjaGVtYQogIF9idXM6IE1pbmlCdXMKICBfc3RhdHVzOiBvbiB8IHBhdXNlZAogIF9zeW5jT2JqOiBTeW5jRGF0YQogICBfY2hpbGRyZW46IHsgaWQ6IERhdGFPYmplY3RDaGlsZCB9CiAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KICBfb25BZGRDaGlsZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZAogICovCgogIC8qKgogICAqIEBpZ25vcmUKICAgKiBTaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkgYnkgSHlwZXJ0aWVzLiBJdCdzIGNhbGxlZCBieSB0aGUgU3luY2hlciBjcmVhdGUgb3Igc3Vic2NyaWJlIG1ldGhvZCdzCiAgICovCiAgZnVuY3Rpb24gRGF0YU9iamVjdChzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykgewogICAgdmFyIG11dHVhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ICYmIGFyZ3VtZW50c1s2XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzZdIDogdHJ1ZTsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3QpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX3N5bmNoZXIgPSBzeW5jaGVyOwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9zY2hlbWEgPSBzY2hlbWE7CiAgICBfdGhpcy5fc3RhdHVzID0gaW5pdGlhbFN0YXR1czsKICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7CiAgICBfdGhpcy5fY2hpbGRyZW5zID0gY2hpbGRyZW5zOwoKICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgIF90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbiA9IG11dHVhbDsKCiAgICBfdGhpcy5fdmVyc2lvbiA9IDA7CiAgICBfdGhpcy5fY2hpbGRJZCA9IDA7CiAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzID0ge307CiAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKCiAgICBfdGhpcy5fb3duZXIgPSBzeW5jaGVyLl9vd25lcjsKICAgIF90aGlzLl9idXMgPSBzeW5jaGVyLl9idXM7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0LCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBjaGlsZEJhc2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nOwogICAgICBjb25zb2xlLmxvZygnW0RhdGEgT2JqZWN0IC0gQWxsb2NhdGVMaXN0ZW5lcnNdIC0gJywgX3RoaXMuX2NoaWxkcmVucyk7CiAgICAgIGlmIChfdGhpcy5fY2hpbGRyZW5zKSB7CiAgICAgICAgX3RoaXMuX2NoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgdmFyIGNoaWxkVVJMID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKGNoaWxkVVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYKICAgICAgICAgICAgaWYgKG1zZy5mcm9tICE9PSBfdGhpczIuX293bmVyKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAnLCBtc2cpOwogICAgICAgICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZSc6CiAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNoaWxkQ3JlYXRlKG1zZyk7YnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO2JyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5nZUNoaWxkcmVuKG1zZyk7YnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgICAgICBsaXN0ZW5lci5yZW1vdmUoKTsKICAgICAgfSk7CgogICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNba2V5XS5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIE9iamVjdCBVUkwgb2YgcmVwb3J0ZXIgb3Igb2JzZXJ2ZXIKICAgICAqIEB0eXBlIHtPYmplY3RVUkx9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncGF1c2UnLAoKCiAgICAvKioKICAgICAqIEBpZ25vcmUKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIHBhdXNlKCkgewogICAgICAvL1RPRE86IHRoaXMgZmVhdHVyZSBuZWVkcyBtb3JlIGFuYWxpc2UKICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7CiAgICB9CgogICAgLyoqCiAgICAgKiBAaWdub3JlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVzdW1lJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWUoKSB7CiAgICAgIC8vVE9ETzogdGhpcyBmZWF0dXJlIG5lZWRzIG1vcmUgYW5hbGlzZQogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKICAgIH0KCiAgICAvKioKICAgICAqIEBpZ25vcmUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzdG9wJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICAvL1RPRE86IHNob3VsZCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBhbmQgc2VuZCBtZXNzYWdlIHVuc3Vic2NyaWJlPwogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgRGF0YU9iamVjdENoaWxkIHRvIGEgY2hpbGRyZW4gY29sbGVjdGlvbi4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjaGlsZHJlbiAtIENoaWxkcmVuIG5hbWUgd2hlcmUgdGhlIGNoaWxkIGlzIGFkZGVkLgogICAgICogQHBhcmFtIHtKU09OfSBpbml0aWFsRGF0YSAtIEluaXRpYWwgZGF0YSBvZiB0aGUgY2hpbGQKICAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdENoaWxkPn0gLSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBEYXRhT2JqZWN0Q2hpbGQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkQ2hpbGQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENoaWxkKGNoaWxkcmVuLCBpbml0aWFsRGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9jcmVhdGUgbmV3IGNoaWxkIHVuaXF1ZSBJRCwgYmFzZWQgb24gaHlwZXJ0eVVSTAogICAgICBfdGhpcy5fY2hpbGRJZCsrOwogICAgICB2YXIgbXNnQ2hpbGRJZCA9IF90aGlzLl9vd25lciArICcjJyArIF90aGlzLl9jaGlsZElkOwogICAgICB2YXIgbXNnQ2hpbGRQYXRoID0gX3RoaXMuX3VybCArICcvY2hpbGRyZW4vJyArIGNoaWxkcmVuOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byBhIHJlc291cmNlIGNoaWxkIGFkZHJlc3M6IE1lc3NhZ2VCdXMKICAgICAgdmFyIHJlcXVlc3RNc2cgPSB7CiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IG1zZ0NoaWxkUGF0aCwKICAgICAgICBib2R5OiB7IHJlc291cmNlOiBtc2dDaGlsZElkLCB2YWx1ZTogaW5pdGlhbERhdGEgfQogICAgICB9OwoKICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICBpZiAoIV90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbikgcmVxdWVzdE1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gX3RoaXMuX211dHVhbEF1dGhlbnRpY2F0aW9uOwoKICAgICAgLy9yZXR1cm5zIHByb21pc2UsIGluIHRoZSBmdXR1cmUsIHRoZSBBUEkgbWF5IGNoYW5nZSB0byBhc3luY2hyb25vdXMgY2FsbAogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIG1zZ0lkID0gX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnKTsKCiAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZS1yZXBvcnRlci1jaGlsZCggJyArIF90aGlzLl9vd25lciArICcgKTogJywgcmVxdWVzdE1zZyk7CiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3IF9EYXRhT2JqZWN0Q2hpbGQyLmRlZmF1bHQoX3RoaXMsIG1zZ0NoaWxkSWQsIGluaXRpYWxEYXRhLCBfdGhpcy5fb3duZXIsIG1zZ0lkKTsKICAgICAgICBuZXdDaGlsZC5vbkNoYW5nZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCwgeyBwYXRoOiBtc2dDaGlsZFBhdGgsIGNoaWxkSWQ6IG1zZ0NoaWxkSWQgfSk7CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbbXNnQ2hpbGRJZF0gPSBuZXdDaGlsZDsKCiAgICAgICAgcmVzb2x2ZShuZXdDaGlsZCk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgb2YgY2hpbGRyZW5zLgogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uQWRkQ2hpbGQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkQ2hpbGQoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0IC0+IGFkZENoaWxkCgogIH0sIHsKICAgIGtleTogJ19vbkNoaWxkQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGlsZENyZWF0ZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG1zZ0NoaWxkSWQgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIG1zZyk7CiAgICAgIHZhciBuZXdDaGlsZCA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBtc2dDaGlsZElkLCBtc2cuYm9keS52YWx1ZSk7CiAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbbXNnQ2hpbGRJZF0gPSBuZXdDaGlsZDsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIC8vRkxPVy1PVVQ6IHdpbGwgZmxvdyB0byBEYXRhT2JqZWN0Q2hpbGQgLT4gX29uUmVzcG9uc2UKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHNvdXJjZTogX3RoaXMuX293bmVyIH0KICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmZyb20sCiAgICAgICAgdXJsOiBtc2cudG8sCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLAogICAgICAgIGNoaWxkSWQ6IG1zZ0NoaWxkSWQsCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0FERC1DSElMRFJFTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL3NlbmQgZGVsdGEgbWVzc2FnZXMgdG8gc3Vic2NyaXB0aW9ucwoKICB9LCB7CiAgICBrZXk6ICdfb25DaGFuZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoYW5nZShldmVudCwgY2hpbGRJbmZvKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fdmVyc2lvbisrOwoKICAgICAgaWYgKF90aGlzLl9zdGF0dXMgPT09ICdvbicpIHsKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIGEgcmVzb3VyY2UgY2hhbmdlcyBhZGRyZXNzOiBNZXNzYWdlQnVzCiAgICAgICAgdmFyIGNoYW5nZU1zZyA9IHsKICAgICAgICAgIHR5cGU6ICd1cGRhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogX3RoaXMuX3VybCArICcvY2hhbmdlcycsCiAgICAgICAgICBib2R5OiB7IHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCBzb3VyY2U6IF90aGlzLl9vd25lciwgYXR0cmlidXRlOiBldmVudC5maWVsZCB9CiAgICAgICAgfTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0IC0gX29uQ2hhbmdlXSAtICcsIGV2ZW50LCBjaGlsZEluZm8sIGNoYW5nZU1zZyk7CgogICAgICAgIGlmIChldmVudC5vVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuT0JKRUNUKSB7CiAgICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlJFTU9WRSkgewogICAgICAgICAgICBjaGFuZ2VNc2cuYm9keS52YWx1ZSA9IGV2ZW50LmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LmF0dHJpYnV0ZVR5cGUgPSBldmVudC5vVHlwZTsKICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsKICAgICAgICAgIGlmIChldmVudC5jVHlwZSAhPT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuVVBEQVRFKSB7CiAgICAgICAgICAgIGNoYW5nZU1zZy5ib2R5Lm9wZXJhdGlvbiA9IGV2ZW50LmNUeXBlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy9jaGlsZEluZm8gbXVzdCBoYXZlIChwYXRoLCBjaGlsZElkKQogICAgICAgIGlmIChjaGlsZEluZm8pIHsKICAgICAgICAgIGNoYW5nZU1zZy50byA9IGNoaWxkSW5mby5wYXRoOwogICAgICAgICAgY2hhbmdlTXNnLmJvZHkucmVzb3VyY2UgPSBjaGlsZEluZm8uY2hpbGRJZDsKICAgICAgICB9CgogICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICBpZiAoIV90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbikgY2hhbmdlTXNnLmJvZHkubXV0dWFsQXV0aGVudGljYXRpb24gPSBfdGhpcy5fbXV0dWFsQXV0aGVudGljYXRpb247CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoY2hhbmdlTXNnKTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogZGVsdGEgbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RSZXBvcnRlciBvciBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhCgogIH0sIHsKICAgIGtleTogJ19jaGFuZ2VPYmplY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGFuZ2VPYmplY3Qoc3luY09iaiwgbXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL1RPRE86IHVwZGF0ZSB2ZXJzaW9uID8KICAgICAgLy9ob3cgdG8gaGFuZGxlIGFuIGluY29ycmVjdCB2ZXJzaW9uID8gRXhhbXBsZTogcmVjZWl2ZSBhIHZlcnNpb24gMyB3aGVuIHRoZSBvYnNlcnZlciBpcyBpbiB2ZXJzaW9uIDEsIHdoZXJlIGlzIHRoZSB2ZXJzaW9uIDIgPwogICAgICAvL3dpbGwgd2UgbmVlZCB0byBjb25maXJtIHRoZSByZWNlcHRpb24gPwogICAgICBpZiAoX3RoaXMuX3ZlcnNpb24gKyAxID09PSBtc2cuYm9keS52ZXJzaW9uKSB7CiAgICAgICAgX3RoaXMuX3ZlcnNpb24rKzsKICAgICAgICB2YXIgcGF0aCA9IG1zZy5ib2R5LmF0dHJpYnV0ZTsKICAgICAgICB2YXIgdmFsdWUgPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkobXNnLmJvZHkudmFsdWUpOwogICAgICAgIHZhciBmaW5kUmVzdWx0ID0gc3luY09iai5maW5kQmVmb3JlKHBhdGgpOwoKICAgICAgICBpZiAobXNnLmJvZHkuYXR0cmlidXRlVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuQVJSQVkpIHsKICAgICAgICAgIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLkFERCkgewogICAgICAgICAgICB2YXIgYXJyID0gZmluZFJlc3VsdC5vYmo7CiAgICAgICAgICAgIHZhciBpbmRleCA9IGZpbmRSZXN1bHQubGFzdDsKICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhcnIsIFtpbmRleCwgMF0uY29uY2F0KHZhbHVlKSk7CiAgICAgICAgICB9IGVsc2UgaWYgKG1zZy5ib2R5Lm9wZXJhdGlvbiA9PT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuUkVNT1ZFKSB7CiAgICAgICAgICAgIHZhciBfYXJyID0gZmluZFJlc3VsdC5vYmo7CiAgICAgICAgICAgIHZhciBfaW5kZXggPSBmaW5kUmVzdWx0Lmxhc3Q7CiAgICAgICAgICAgIF9hcnIuc3BsaWNlKF9pbmRleCwgdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKG1zZy5ib2R5LnZhbHVlKSB7CiAgICAgICAgICAgIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF0gPSB2YWx1ZTsgLy8gVVBEQVRFIG9yIEFERAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVsZXRlIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF07IC8vIFJFTU9WRQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL1RPRE86IGhvdyB0byBoYW5kbGUgdW5zeW5jaHJvbml6ZWQgdmVyc2lvbnM/CiAgICAgICAgY29uc29sZS5sb2coJ1VOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICcgKyBfdGhpcy5fdmVyc2lvbiArICcsIG1zZyA9PiAnICsgbXNnLmJvZHkudmVyc2lvbiArICcpJyk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhCgogIH0sIHsKICAgIGtleTogJ19jaGFuZ2VDaGlsZHJlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoYW5nZUNoaWxkcmVuKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZygnQ2hhbmdlIGNoaWxkcmVuOiAnLCBfdGhpcy5fb3duZXIsIG1zZyk7CgogICAgICB2YXIgY2hpbGRJZCA9IG1zZy5ib2R5LnJlc291cmNlOwogICAgICB2YXIgY2hpbGRyZW4gPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdOwoKICAgICAgaWYgKGNoaWxkcmVuKSB7CiAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChjaGlsZHJlbi5fc3luY09iaiwgbXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnTm8gY2hpbGRyZW4gZm91bmQgZm9yOiAnLCBjaGlsZElkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KCiAgICAvKioKICAgICAqIE9iamVjdCBzY2hlbWEgVVJMICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQogICAgICogQHR5cGUge1NjaGVtYVVSTH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzY2hlbWEnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zY2hlbWE7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdGF0dXMgb2YgdGhlIHJlcG9ydGVyIG9yIG9ic2VydmVyIGNvbm5lY3Rpb24gKHRoaXMgZmllbGQgaXMgbm90IHlldCBzdGFibGUsIGFuZCBpcyBzdWJzamVjdCB0byBjaGFuZ2UpCiAgICAgKiBAdHlwZSB7U3RhdHVzfSAtIEVudW0gb2Y6IG9uIHwgcGF1c2VkCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnc3RhdHVzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3RhdHVzOwogICAgfQoKICAgIC8qKgogICAgICogRGF0YSBzdHJ1Y3R1cmUgdG8gYmUgc3luY2hyb25pemVkLgogICAgICogQHR5cGUge0pTT059IC0gSlNPTiBzdHJ1Y3R1cmUgdGhhdCBzaG91bGQgZm9sbG93IHRoZSBkZWZpbmVkIHNjaGVtYSwgaWYgYW55LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2RhdGEnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zeW5jT2JqLmRhdGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGwgY3JlYXRlZCBjaGlsZHJlbidzIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIGRvZXNuJ3QgY29udGFpbiBhbGwgY2hpbGRyZW4ncyBzaW5jZSByZXBvcnRlciBjcmVhdGlvbi4KICAgICAqIEB0eXBlIHtPYmplY3Q8Q2hpbGRJZCwgRGF0YU9iamVjdENoaWxkPn0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjaGlsZHJlbnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHM7CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhT2JqZWN0Owp9KCk7IC8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTIxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9Qcm94eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTsKCnZhciBfUHJveHlPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJveHlPYmplY3QpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgRGF0YU9iamVjdCBhZGRDaGlsZHJlbiBjYWxsIG9yIGZyb20gb25BZGRDaGlsZHJlbiBpZiByZW1vdGVseSBjcmVhdGVkLgogKiBDaGlsZHJlbiBvYmplY3Qgc3luY2hyb25pemF0aW9uIGlzIGEgYSBmYXN0IGZvcndhcmQgbWVjaGFuaXNtLCBubyBuZWVkIGZvciBkaXJlY3Qgc3Vic2NyaXB0aW9ucywgaXQgdXNlcyB0aGUgYWxyZWFkeSBhdXRob3JpemVkIHN1YnNjcmlwdGlvbiBmcm9tIHRoZSBwYXJlbnQgRGF0YU9iamVjdC4KICovCnZhciBEYXRhT2JqZWN0Q2hpbGQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQogIF9vblJlc3BvbnNlSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkCiAgKi8KCiAgLyoqCiAgICogQGlnbm9yZQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBEYXRhT2JqZWN0LmFkZENoaWxkcmVuCiAgICovCiAgZnVuY3Rpb24gRGF0YU9iamVjdENoaWxkKHBhcmVudCwgY2hpbGRJZCwgaW5pdGlhbERhdGEsIG93bmVyLCBtc2dJZCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdENoaWxkKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fY2hpbGRJZCA9IGNoaWxkSWQ7CiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl9tc2dJZCA9IG1zZ0lkOwoKICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7CgogICAgX3RoaXMuX2J1cyA9IHBhcmVudC5fYnVzOwogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0Q2hpbGQsIFt7CiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vdGhpcyBpcyBvbmx5IG5lZWRlZCBmb3IgY2hpbGRyZW4gcmVwb3J0ZXJzCiAgICAgIGlmIChfdGhpcy5fb3duZXIpIHsKICAgICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl9vd25lciwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgaWYgKG1zZy50eXBlID09PSAncmVzcG9uc2UnICYmIG1zZy5pZCA9PT0gX3RoaXMuX21zZ0lkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0Q2hpbGQub25SZXNwb25zZTonLCBtc2cpOwogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLl9saXN0ZW5lcikgewogICAgICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX2NoaWxkcmVuW190aGlzLl9jaGlsZElkXTsKCiAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CgogICAgICAvL1RPRE86IHNlbmQgZGVsZXRlIG1lc3NhZ2UgPwogICAgfQoKICAgIC8qKgogICAgICogQ2hpbGRyZW4gSUQgZ2VuZXJhdGVkIG9uIGFkZENoaWxkcmVuLiBVbmlxdWUgaWRlbnRpZmllcgogICAgICogQHR5cGUge1VSTH0gLSBVUkwgb2YgdGhlIGZvcm1hdCA8SHlwZXJ0eVVSTD4jPG51bWVyaWMtc2VxdWVuY2U+CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25DaGFuZ2UnLAoKCiAgICAvKioKICAgICAqIFJlZ2lzdGVyIHRoZSBjaGFuZ2UgbGlzdGVuZXJzIHNlbnQgYnkgdGhlIHJlcG9ydGVyIGNoaWxkCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShjYWxsYmFjaykgewogICAgICB0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY2FsbGJhY2soZXZlbnQpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZXMKICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVzcG9uc2VIYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBfb25DaGlsZENyZWF0ZQoKICB9LCB7CiAgICBrZXk6ICdfb25SZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgdXJsOiBtc2cuYm9keS5zb3VyY2UsCiAgICAgICAgY29kZTogbXNnLmJvZHkuY29kZQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcikgewogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdjaGlsZElkJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2hpbGRJZDsKICAgIH0KCiAgICAvKioKICAgICAqIERhdGEgU3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4KICAgICAqIEB0eXBlIHtKU09OfSAtIEpTT04gc3RydWN0dXJlIHRoYXQgc2hvdWxkIGZvbGxvdyB0aGUgZGVmaW5lZCBzY2hlbWEsIGlmIGFueS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkYXRhJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3luY09iai5kYXRhOwogICAgfQogIH1dKTsKICByZXR1cm4gRGF0YU9iamVjdENoaWxkOwp9KCk7IC8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdENoaWxkOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5PYmplY3RUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0gdW5kZWZpbmVkOwoKdmFyIF9zdHJpbmdpZnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKCnZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCnZhciBvYmplY3RUeXBlID0geyBBUlJBWTogJ1tvYmplY3QgQXJyYXldJywgT0JKRUNUOiAnW29iamVjdCBPYmplY3RdJyB9OwoKLyoqCiAqIEBhY2Nlc3MgcHJpdmF0ZQogKiBNYWluIGNsYXNzIHRoYXQgbWFpbnRhaW5zIGEgSlNPTiBvYmplY3QsIGFuZCBvYnNlcnZlcyBjaGFuZ2VzIGluIHRoaXMgb2JqZWN0LCByZWN1cnNpdmVseS4KICogSW50ZXJuYWwgb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBhbHNvIG9ic2VydmVkLgogKi8KCnZhciBTeW5jT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN5bmNPYmplY3QoaW5pdGlhbERhdGEpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFN5bmNPYmplY3QpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX29ic2VydmVycyA9IFtdOwogICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsKCiAgICB0aGlzLl9kYXRhID0gaW5pdGlhbERhdGEgfHwge307CgogICAgdGhpcy5faW50ZXJuYWxPYnNlcnZlKHRoaXMuX2RhdGEpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoU3luY09iamVjdCwgW3sKICAgIGtleTogJ29ic2VydmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmUoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb2JzZXJ2ZXJzLnB1c2goY2FsbGJhY2spOwogICAgfQogIH0sIHsKICAgIGtleTogJ2ZpbmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmQocGF0aCkgewogICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsKCiAgICAgIHJldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KGxpc3QpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2ZpbmRCZWZvcmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRCZWZvcmUocGF0aCkgewogICAgICB2YXIgcmVzdWx0ID0ge307CiAgICAgIHZhciBsaXN0ID0gcGF0aC5zcGxpdCgnLicpOwogICAgICByZXN1bHQubGFzdCA9IGxpc3QucG9wKCk7CiAgICAgIHJlc3VsdC5vYmogPSB0aGlzLl9maW5kV2l0aFNwbGl0KGxpc3QpOwoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZmluZFdpdGhTcGxpdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRXaXRoU3BsaXQobGlzdCkgewogICAgICB2YXIgb2JqID0gdGhpcy5fZGF0YTsKICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIG9iaiA9IG9ialt2YWx1ZV07CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfaXNPYnNlcnZhYmxlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNPYnNlcnZhYmxlKG9iaikgewogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2ludGVybmFsT2JzZXJ2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ludGVybmFsT2JzZXJ2ZShvYmplY3QpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoY2hhbmdlc2V0KSB7CgogICAgICAgIGNoYW5nZXNldC5ldmVyeShmdW5jdGlvbiAoY2hhbmdlKSB7CiAgICAgICAgICBfdGhpczIuX29uQ2hhbmdlcyhjaGFuZ2UpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdGhpcy5fZGF0YSA9IE9iamVjdC5kZWVwT2JzZXJ2ZShvYmplY3QsIGhhbmRsZXIpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19maXJlRXZlbnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maXJlRXZlbnQoZXZlbnQpIHsKICAgICAgdGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgY2FsbGJhY2soZXZlbnQpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25DaGFuZ2VzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGFuZ2VzKGNoYW5nZSkgewoKICAgICAgdmFyIG9iaiA9IGNoYW5nZS5vYmplY3Q7CiAgICAgIHZhciBvYmpUeXBlID0gdm9pZCAwOwoKICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7CiAgICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuT0JKRUNUOwogICAgICB9CgogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgewogICAgICAgIG9ialR5cGUgPSBPYmplY3RUeXBlLkFSUkFZOwogICAgICB9CgogICAgICB2YXIgZmllbGRTdHJpbmcgPSBjaGFuZ2Uua2V5cGF0aDsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaWVsZDonLCBmaWVsZFN0cmluZyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCd0eXBlOicsIGNoYW5nZS50eXBlKTsKCiAgICAgIC8vbGV0IG9sZFZhbHVlID0gY2hhbmdlLm9sZFZhbHVlOwogICAgICB2YXIgbmV3VmFsdWUgPSBvYmpbY2hhbmdlLm5hbWVdOwoKICAgICAgY29uc29sZS5pbmZvKGNoYW5nZS50eXBlICsgJyB8IEZpZWxkOiAnICsgZmllbGRTdHJpbmcgKyAnIHwgTmV3IFZhbHVlOicsICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShuZXdWYWx1ZSkpOwoKICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAndXBkYXRlJykgewogICAgICAgIHRoaXMuX2ZpcmVFdmVudCh7CiAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5VUERBVEUsCiAgICAgICAgICBvVHlwZTogb2JqVHlwZSwKICAgICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZywKICAgICAgICAgIGRhdGE6IG5ld1ZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2FkZCcpIHsKICAgICAgICB0aGlzLl9maXJlRXZlbnQoewogICAgICAgICAgY1R5cGU6IENoYW5nZVR5cGUuQURELAogICAgICAgICAgb1R5cGU6IG9ialR5cGUsCiAgICAgICAgICBmaWVsZDogZmllbGRTdHJpbmcsCiAgICAgICAgICBkYXRhOiBuZXdWYWx1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICdkZWxldGUnKSB7CiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsKICAgICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLlJFTU9WRSwKICAgICAgICAgIG9UeXBlOiBvYmpUeXBlLAogICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdkYXRhJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZGF0YTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN5bmNPYmplY3Q7Cn0oKTsKCnZhciBDaGFuZ2VUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0geyBVUERBVEU6ICd1cGRhdGUnLCBBREQ6ICdhZGQnLCBSRU1PVkU6ICdyZW1vdmUnIH07CnZhciBPYmplY3RUeXBlID0gZXhwb3J0cy5PYmplY3RUeXBlID0geyBPQkpFQ1Q6ICdvYmplY3QnLCBBUlJBWTogJ2FycmF5JyB9OwpleHBvcnRzLmRlZmF1bHQgPSBTeW5jT2JqZWN0OwoKLyoqKi8gfSksCi8qIDEyMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7Cgp2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgewogIGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsKICB2YXIgZGVzYyA9ICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMi5kZWZhdWx0KShvYmplY3QsIHByb3BlcnR5KTsKCiAgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgewogICAgdmFyIHBhcmVudCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKG9iamVjdCk7CgogICAgaWYgKHBhcmVudCA9PT0gbnVsbCkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7CiAgICB9CiAgfSBlbHNlIGlmICgidmFsdWUiIGluIGRlc2MpIHsKICAgIHJldHVybiBkZXNjLnZhbHVlOwogIH0gZWxzZSB7CiAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7CgogICAgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsKICB9Cn07CgovKioqLyB9KSwKLyogMTI0ICovLAovKiAxMjUgKi8sCi8qIDEyNiAqLywKLyogMTI3ICovLAovKiAxMjggKi8sCi8qIDEyOSAqLywKLyogMTMwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3Byb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCnZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzYpOwoKdmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX0RhdGFPYmplY3RSZXBvcnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsKCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RSZXBvcnRlcik7Cgp2YXIgX0RhdGFPYmplY3RPYnNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKCnZhciBfRGF0YU9iamVjdE9ic2VydmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RPYnNlcnZlcik7Cgp2YXIgX0RhdGFQcm92aXNpb25hbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTsKCnZhciBfRGF0YVByb3Zpc2lvbmFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFQcm92aXNpb25hbCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogVGhlIG1haW4gY2xhc3MgZm9yIHRoZSBzeW5jaGVyIHBhY2thZ2UuCiogVGhlIFN5bmNoZXIgaXMgYSBzaW5nbGV0b24gY2xhc3MgcGVyIEh5cGVydHkvVVJMIGFuZCBpdCBpcyB0aGUgb3duZXIgb2YgYWxsIGNyZWF0ZWQgRGF0YSBTeW5jIE9iamVjdHMgYWNjb3JkaW5nIHRvIHRoZSBSZXBvcnRlciAtIE9ic2VydmVyIHBhdHRlcm4uCiogTWFpbiBmdW5jdGlvbmFsaXR5IGlzIHRvIGNyZWF0ZSByZXBvcnRlcnMgYW5kIHRvIHN1YnNjcmliZSB0byBleGlzdGluZyBvbmVzLgoqLwp2YXIgU3luY2hlciA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX293bmVyOiBVUkwKICBfYnVzOiBNaW5pQnVzCiAgIF9zdWJVUkw6IFVSTAogICBfcmVwb3J0ZXJzOiA8dXJsOiBEYXRhT2JqZWN0UmVwb3J0ZXI+CiAgX29ic2VydmVyczogPHVybDogRGF0YU9iamVjdE9ic2VydmVyPgogIF9wcm92aXNpb25hbHM6IDx1cmw6IERhdGFQcm92aXNpb25hbD4KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQogIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZAogIF9vblJlc3VtZTogKGV2ZW50KSA9PiB2b2lkCiAgKi8KCiAgLyoqCiAgKiBDb25zdHJ1Y3RvciB0aGF0IHNob3VsZCBiZSB1c2VkIGJ5IHRoZSBIeXBlcnR5IG93bmVyCiAgKiBAcGFyYW0ge0h5cGVydHlVUkx9IG93bmVyIC0gSHlwZXJ0eSBVUkwgb3duZXIuIEFuIFVSTCBhbGxvY2F0ZWQgYnkgdGhlIHJ1bnRpbWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBIeXBlcnR5LgogICogQHBhcmFtIHtNaW5pQnVzfSBidXMgLSBBbiBpbnN0YW5jZSBvZiB0aGUgTWluaUJ1cyBwcm92aWRlZCBpbiB0aGUgc2FuZGJveC4gV2hlbiBhbiBvYmplY3QgKFJlcG9ydGVyIG9yIE9ic2VydmVkKSBpcyBjcmVhdGVkLCB0aGUgU3luY2hlck1hbmFnZXIgd2lsbCBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgTWluaUJ1cyB0byByZWNlaXZlL3NlbmQgTWVzc2FnZXMgb2YgdGhhdCBvYmplY3QuCiAgKiBAcGFyYW0ge0pTT059IGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gZGF0YS4gVGhlIG9ubHkgcmVxdWlyZWQgZmllbGQgZm9yIG5vdyBpcyB0aGUgcnVudGltZVVSTC4KICAqLwogIGZ1bmN0aW9uIFN5bmNoZXIob3duZXIsIGJ1cywgY29uZmlnKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTeW5jaGVyKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9vd25lciA9IG93bmVyOwogICAgX3RoaXMuX2J1cyA9IGJ1czsKCiAgICBfdGhpcy5fc3ViVVJMID0gY29uZmlnLnJ1bnRpbWVVUkwgKyAnL3NtJzsKCiAgICBfdGhpcy5fcmVwb3J0ZXJzID0ge307CiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307CiAgICBfdGhpcy5fcHJvdmlzaW9uYWxzID0ge307CgogICAgYnVzLmFkZExpc3RlbmVyKG93bmVyLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYKICAgICAgaWYgKG1zZy5mcm9tICE9PSBvd25lcikgewogICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIFN5bmNoZXItUkNWOiAnLCBtc2cpOwogICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ2ZvcndhcmQnOgogICAgICAgICAgICBfdGhpcy5fb25Gb3J3YXJkKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICdjcmVhdGUnOgogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVDcmVhdGUobXNnKTticmVhazsKICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZURlbGV0ZShtc2cpO2JyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICAvKioKICAqIFRoZSBvd25lciBvZiB0aGUgU3luY2hlciBhbmQgYWxsIGNyZWF0ZWQgcmVwb3J0ZXJzLgogICogQHR5cGUge0h5cGVydHlVUkx9CiAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNoZXIsIFt7CiAgICBrZXk6ICdjcmVhdGUnLAoKCiAgICAvKioKICAgICogUmVxdWVzdCBhIERhdGFPYmplY3RSZXBvcnRlciBjcmVhdGlvbi4gVGhlIFVSTCB3aWxsIGJlIGJlIHJlcXVlc3RlZCBieSB0aGUgYWxsb2NhdGlvbiBtZWNoYW5pc20uCiAgICAqIEBwYXJhbSAge1NjaGVtYVVSTH0gc2NoZW1hIC0gSHlwZXJ0eSBDYXRhbG9ndWUgVVJMIGFkZHJlc3MgdGhhdCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgSlNPTi1TY2hlbWEgZGVzY3JpYmluZyB0aGUgRGF0YSBPYmplY3Qgc2NoZW1hCiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkxbXX0gb2JzZXJ2ZXJzIC0gTGlzdCBvZiBoeXBlcnRpZXMgdGhhdCBhcmUgcHJlLWF1dGhvcml6ZWQgZm9yIHN1YnNjcmlwdGlvbgogICAgKiBAcGFyYW0gIHtKU09OfSBpbml0aWFsRGF0YSAtIEluaXRpYWwgZGF0YSBvZiB0aGUgcmVwb3J0ZXIKICAgICogQHBhcmFtICB7c3RyaW5nfSBvYmplY3RVUkwgLSByZXVzYWJsZSBkYXRhT2JqZWN0IFVSTAogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RSZXBvcnRlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IFJlcG9ydGVyLiBUaGUgcmVwb3J0ZXIgY2FuIGJlIGFjY2VwdGVkIG9yIHJlamVjdGVkIGJ5IHRoZSBQRVAKICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKHNjaGVtYSwgb2JzZXJ2ZXJzLCBpbml0aWFsRGF0YSkgewogICAgICB2YXIgc3RvcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgICB2YXIgcDJwID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiBmYWxzZTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBjcml0ZXJpYSA9IHt9OwoKICAgICAgY3JpdGVyaWEucDJwID0gcDJwOwogICAgICBjcml0ZXJpYS5zdG9yZSA9IHN0b3JlOwogICAgICBjcml0ZXJpYS5zY2hlbWEgPSBzY2hlbWE7CiAgICAgIGNyaXRlcmlhLm9ic2VydmVycyA9IG9ic2VydmVyczsKICAgICAgY3JpdGVyaWEuaW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTsKCiAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUgUmVwb3J0ZXIgLSBjcml0ZXJpYTogJywgY3JpdGVyaWEpOwoKICAgICAgKDAsIF9hc3NpZ24yLmRlZmF1bHQpKGNyaXRlcmlhLCB7IHJlc3VtZTogZmFsc2UgfSk7CgogICAgICByZXR1cm4gX3RoaXMuX2NyZWF0ZShjcml0ZXJpYSk7CiAgICB9CiAgfSwgewogICAga2V5OiAncmVzdW1lUmVwb3J0ZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVSZXBvcnRlcnMoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBSZXBvcnRlciAtIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7CgogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiB0cnVlIH0pOwoKICAgICAgcmV0dXJuIF90aGlzLl9jcmVhdGUoY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKgogICAgKiBSZXF1ZXN0IGEgc3Vic2NyaXB0aW9uIHRvIGFuIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdC4KICAgICogQHBhcmFtIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQogICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gQWRkcmVzcyBvZiB0aGUgZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0IHRvIGJlIG9ic2VydmVkCiAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3N0b3JlPWZhbHNlXSAtIFNhdmUgdGhlIHN1YnNjcmlwdGlvbiBvbiB0aGUgU3luY2hlciBNYW5hZ2VyIGZvciBmdXJ0aGVyIHJlc3VtZSAoRGVmYXVsdCBpcyBmYWxzZSkKICAgICogQHBhcmFtIHtCb29sZWFufSBbcDJwPWZhbHNlXSAtIEluZm8gYWJvdXQgaWYgc2hvdWxkIHVzZSBwMnAgY29ubmVjdGlvbiAoRGVmYXVsdCBpcyBmYWxzZSkKICAgICogQHBhcmFtIHtCb29sZWFufSBbbXV0dWFsPXRydWVdIC0gSW5mbyBhYm91dCBpZiBtZXNzYWdlcyBvZiB0aGlzIG9iamVjdCBzaG91bGQgYmUgZW5jcnlwdGVkIChEZWZhdWx0IGlzIHRydWUpCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdE9ic2VydmVyPn0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgb2JzZXJ2ZXIuIEl0J3MgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXBvcnRlci4KICAgICovCgogIH0sIHsKICAgIGtleTogJ3N1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlKHNjaGVtYSwgb2JqVVJMKSB7CiAgICAgIHZhciBzdG9yZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICAgIHZhciBwMnAgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgICB2YXIgbXV0dWFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB0cnVlOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGNyaXRlcmlhID0ge307CgogICAgICBjcml0ZXJpYS5wMnAgPSBwMnA7CiAgICAgIGNyaXRlcmlhLnN0b3JlID0gc3RvcmU7CiAgICAgIGNyaXRlcmlhLnNjaGVtYSA9IHNjaGVtYTsKICAgICAgY3JpdGVyaWEucmVzb3VyY2UgPSBvYmpVUkw7CgogICAgICAvL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CiAgICAgIGNyaXRlcmlhLm11dHVhbCA9IG11dHVhbDsKCiAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIHN1YnNjcmliZV0gLSBzdWJzY3JpYmUgY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsKCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IGZhbHNlIH0pOwoKICAgICAgcmV0dXJuIF90aGlzLl9zdWJzY3JpYmUoY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKgogICAgKiBSZXF1ZXN0IGEgc3Vic2NyaXB0aW9uIHRvIGFuIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdC4KICAgICogQHBhcmFtIHtjcml0ZXJpYX0gY3JpdGVyaWEgLSBJbmZvcm1hdGlvbiB0byBkaXNjb3ZlcnkgdGhlIG9ic2VydmVyIG9iamVjdAogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RPYnNlcnZlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IG9ic2VydmVyLiBJdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVwb3J0ZXIuCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXN1bWVPYnNlcnZlcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3VtZU9ic2VydmVycyhjcml0ZXJpYSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgX2NyaXRlcmlhID0gY3JpdGVyaWEgfHwge307CgogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoX2NyaXRlcmlhLCB7IHJlc3VtZTogdHJ1ZSB9KTsKCiAgICAgIHJldHVybiBfdGhpcy5fc3Vic2NyaWJlKF9jcml0ZXJpYSk7CiAgICB9CgogICAgLyoqCiAgICAqIFJlcXVlc3QgYSByZWFkIGFjdGlvbiBvbiB0aGUgcmVwb3J0ZXIgb2JqZWN0CiAgICAqIEBwYXJhbSB7T2JqZWN0VVJMfSBvYmpVUkwgLSBVUkwgb2YgdGhlIHJlcG9ydGVyIG9iamVjdCB0byBiZSByZWFkCiAgICAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0Pn0gUmV0dXJuIFByb21pc2UgdG8gbGFzdCBhdmFpbGFibGUgZGF0YSBvZiB0aGUgcmVwb3J0ZXIKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlYWQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWQob2JqVVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIHJlcG9ydGVyIG9iamVjdCAobWF5YmUgdGhlcmUgaXMgbm8gbGlzdGVuZXIgYXZhaWxhYmxlLCBzbyBpdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggTWVzc2FnZUJ1cyAtPiByZXNvbHZlKQogICAgICAvL3dpbGwgcmVhY2ggdGhlIHJlbW90ZSBvYmplY3QgaW4gRGF0YU9iamVjdFJlcG9ydGVyIC0+IF9vblJlYWQKICAgICAgdmFyIHJlYWRNc2cgPSB7CiAgICAgICAgdHlwZTogJ3JlYWQnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBvYmpVUkwKICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UocmVhZE1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygncmVhZC1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVwbHkuYm9keS52YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIGNyZWF0ZSBhbmQgZGVsZXRlIGV2ZW50cyBvZiByZW1vdmUgUmVwb3J0ZXIgb2JqZWN0cy4KICAgICogVGhpcyBpcyByZWxlYXRlZCB0byB0aGUgbWVzc2FnZW5zIHNlbnQgYnkgY3JlYXRlIHRvIHRoZSBvYnNlcnZlcnMgSHlwZXJ0eSBhcnJheS4KICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawogICAgKi8KCiAgfSwgewogICAga2V5OiAnb25Ob3RpZmljYXRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTm90aWZpY2F0aW9uKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlciA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ19jcmVhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGUoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bWUgPSBjcml0ZXJpYS5yZXN1bWU7CiAgICAgICAgdmFyIGluaXRpYWxEYXRhID0gY3JpdGVyaWEuaW5pdGlhbERhdGEgfHwge307CiAgICAgICAgdmFyIHNjaGVtYSA9IHZvaWQgMDsKCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGUKICAgICAgICB2YXIgcmVxdWVzdE1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLAogICAgICAgICAgYm9keTogeyByZXN1bWU6IHJlc3VtZSB9CiAgICAgICAgfTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXTogJywgY3JpdGVyaWEsIHJlcXVlc3RNc2cpOwoKICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUgPSBpbml0aWFsRGF0YTsKICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUucmVwb3J0ZXIgPSBfdGhpcy5fb3duZXI7CgogICAgICAgIGlmIChjcml0ZXJpYS5zY2hlbWEpIHsKICAgICAgICAgIHNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsKICAgICAgICAgIHJlcXVlc3RNc2cuYm9keS5zY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7CiAgICAgICAgfQoKICAgICAgICBpZiAoY3JpdGVyaWEucDJwKSByZXF1ZXN0TXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwogICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgcmVxdWVzdE1zZy5ib2R5LnN0b3JlID0gY3JpdGVyaWEuc3RvcmU7CiAgICAgICAgaWYgKGNyaXRlcmlhLm9ic2VydmVycykgcmVxdWVzdE1zZy5ib2R5LmF1dGhvcmlzZSA9IGNyaXRlcmlhLm9ic2VydmVyczsKCiAgICAgICAgaWYgKHJlc3VtZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsKICAgICAgICB9CgogICAgICAgIC8vcmVxdWVzdCBjcmVhdGUgdG8gdGhlIGFsbG9jYXRpb24gc3lzdGVtLiBDYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIFBvbGljeUVuZ2luZS4KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZS1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIC8vcmVwb3J0ZXIgY3JlYXRpb24gYWNjZXB0ZWQKICAgICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7CgogICAgICAgICAgICBpZiAocmVzdW1lKSB7CiAgICAgICAgICAgICAgc2NoZW1hID0gcmVwbHkuYm9keS5zY2hlbWE7CiAgICAgICAgICAgICAgaW5pdGlhbERhdGEgPSByZXBseS5ib2R5LnZhbHVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCBpbml0aWFsRGF0YSwgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcyk7CiAgICAgICAgICAgIF90aGlzLl9yZXBvcnRlcnNbb2JqVVJMXSA9IG5ld09iajsKCiAgICAgICAgICAgIHJlc29sdmUobmV3T2JqKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vcmVwb3J0ZXIgY3JlYXRpb24gcmVqZWN0ZWQKICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zdWJzY3JpYmUoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsU3Vic2NyaWJlCiAgICAgICAgdmFyIHN1YnNjcmliZU1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLAogICAgICAgICAgYm9keToge30KICAgICAgICB9OwoKICAgICAgICAvLyBIeXBlcnR5IHJlcXVlc3QgdG8gYmUgYW4gT2JzZXJ2ZXIKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNoeXBlcnR5LXJlcXVlc3QtdG8tYmUtYW4tb2JzZXJ2ZXIKCiAgICAgICAgLy8gUmVzdW1lIFN1YnNjcmlwdGlvbnMgZm9yIHRoZSBzYW1lIEh5cGVydHkgVVJMCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLXRoZS1zYW1lLWh5cGVydHktdXJsCgogICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciBhIGNlcnRhaW4gdXNlciBhbmQgZGF0YSBzY2hlbWEgaW5kZXBlbmRlbnRseSBvZiB0aGUgSHlwZXJ0eSBVUkwuCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLWEtY2VydGFpbi11c2VyLWFuZC1kYXRhLXNjaGVtYS1pbmRlcGVuZGVudGx5LW9mLXRoZS1oeXBlcnR5LXVybAogICAgICAgIGlmIChjcml0ZXJpYSkgewogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdwMnAnKSkgc3Vic2NyaWJlTXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdzdG9yZScpKSBzdWJzY3JpYmVNc2cuYm9keS5zdG9yZSA9IGNyaXRlcmlhLnN0b3JlOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdzY2hlbWEnKSkgc3Vic2NyaWJlTXNnLmJvZHkuc2NoZW1hID0gY3JpdGVyaWEuc2NoZW1hOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdpZGVudGl0eScpKSBzdWJzY3JpYmVNc2cuYm9keS5pZGVudGl0eSA9IGNyaXRlcmlhLmlkZW50aXR5OwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdyZXNvdXJjZScpKSBzdWJzY3JpYmVNc2cuYm9keS5yZXNvdXJjZSA9IGNyaXRlcmlhLnJlc291cmNlOwogICAgICAgIH0KCiAgICAgICAgc3Vic2NyaWJlTXNnLmJvZHkucmVzdW1lID0gY3JpdGVyaWEucmVzdW1lOwoKICAgICAgICAvL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CiAgICAgICAgdmFyIG11dHVhbEF1dGhlbnRpY2F0aW9uID0gY3JpdGVyaWEubXV0dWFsOwogICAgICAgIGlmICghbXV0dWFsQXV0aGVudGljYXRpb24pIHN1YnNjcmliZU1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gbXV0dWFsQXV0aGVudGljYXRpb247CgogICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBzdWJzY3JpYmUgbWVzc2FnZTogJywgY3JpdGVyaWEsIHN1YnNjcmliZU1zZyk7CgogICAgICAgIC8vcmVxdWVzdCBzdWJzY3JpcHRpb24KICAgICAgICAvL1Byb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4KICAgICAgICAvL2ZvciBtb3JlIGluZm8gc2VlIHRoZSBEYXRhUHJvdmlzaW9uYWwgY2xhc3MgZG9jdW1lbnRhdGlvbi4KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlLXJlc3BvbnNlOiAnLCByZXBseSk7CgogICAgICAgICAgdmFyIHNjaGVtYSA9IHJlcGx5LmJvZHkuc2NoZW1hOwogICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7CgogICAgICAgICAgdmFyIG5ld1Byb3Zpc2lvbmFsID0gX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOwogICAgICAgICAgZGVsZXRlIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXTsKICAgICAgICAgIGlmIChuZXdQcm92aXNpb25hbCkgbmV3UHJvdmlzaW9uYWwuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKCiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlIDwgMjAwKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBuZXcgRGF0YVByb3Zpc2lvbmFsOiAnLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzLCBvYmpVUkwpOwogICAgICAgICAgICBuZXdQcm92aXNpb25hbCA9IG5ldyBfRGF0YVByb3Zpc2lvbmFsMi5kZWZhdWx0KF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsKICAgICAgICAgICAgX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdID0gbmV3UHJvdmlzaW9uYWw7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBuZXcgRGF0YSBPYmplY3QgT2JzZXJ2ZXI6ICcsIHJlcGx5LCBfdGhpcy5fcHJvdmlzaW9uYWxzKTsKCiAgICAgICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICAgICAgdmFyIG5ld09iaiA9IG5ldyBfRGF0YU9iamVjdE9ic2VydmVyMi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIHNjaGVtYSwgJ29uJywgcmVwbHkuYm9keS52YWx1ZSwgbmV3UHJvdmlzaW9uYWwuY2hpbGRyZW4sIHJlcGx5LmJvZHkudmVyc2lvbiwgbXV0dWFsQXV0aGVudGljYXRpb24pOwogICAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF0gPSBuZXdPYmo7CgogICAgICAgICAgICByZXNvbHZlKG5ld09iaik7CiAgICAgICAgICAgIG5ld1Byb3Zpc2lvbmFsLmFwcGx5KG5ld09iaik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSBsb2NhbCBydW50aW1lIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQoKICB9LCB7CiAgICBrZXk6ICdfb25Gb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Gb3J3YXJkKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJlcG9ydGVyID0gX3RoaXMuX3JlcG9ydGVyc1ttc2cuYm9keS50b107CiAgICAgIHJlcG9ydGVyLl9vbkZvcndhcmQobXNnKTsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBTeW5jaGVyIC0+IGNyZWF0ZSAodGhpcyBpcyBhY3R1YWxseSBhbiBpbnZpdGF0aW9uIHRvIHN1YnNjcmliZSkKCiAgfSwgewogICAga2V5OiAnX29uUmVtb3RlQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVDcmVhdGUobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL3JlbW92ZSAiL3N1YnNjcmlwdGlvbiIgZnJvbSB0aGUgVVJMCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5mcm9tLnNsaWNlKDAsIC0xMyk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmJvZHkuc291cmNlLAogICAgICAgIHVybDogcmVzb3VyY2UsCiAgICAgICAgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEsCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLAogICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgYWNrOiBmdW5jdGlvbiBhY2sodHlwZSkgewogICAgICAgICAgdmFyIGxUeXBlID0gMjAwOwogICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgbFR5cGUgPSB0eXBlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vc2VuZCBhY2sgcmVzcG9uc2UgbWVzc2FnZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IGxUeXBlIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbU3luY2hlcl0gTk9USUZJQ0FUSU9OLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gZGVsZXRlCgogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZURlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlRGVsZXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9yZW1vdmUgIi9zdWJzY3JpcHRpb24iIGZyb20gdGhlIFVSTAogICAgICB2YXIgcmVzb3VyY2UgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fb2JzZXJ2ZXJzW3Jlc291cmNlXTsKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIHZhciBldmVudCA9IHsKICAgICAgICAgIHR5cGU6IG1zZy50eXBlLAogICAgICAgICAgdXJsOiByZXNvdXJjZSwKICAgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgICBhY2s6IGZ1bmN0aW9uIGFjayh0eXBlKSB7CiAgICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsKICAgICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgICBsVHlwZSA9IHR5cGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vVE9ETzogYW55IG90aGVyIGRpZmZlcmVudCBvcHRpb25zIGZvciB0aGUgcmVsZWFzZSBwcm9jZXNzLCBsaWtlIGFjY2VwdCBidXQgbm9yIHJlbGVhc2UgbG9jYWw/CiAgICAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgb2JqZWN0LmRlbGV0ZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikgewogICAgICAgICAgY29uc29sZS5sb2coJ05PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwNCwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnb3duZXInLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9vd25lcjsKICAgIH0KCiAgICAvKioKICAgICogQWxsIG93bmVkIHJlcG9ydGVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBjcmVhdGUKICAgICogQHR5cGUge09iamVjdDxVUkwsIERhdGFPYmplY3RSZXBvcnRlcj59CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXBvcnRlcnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZXBvcnRlcnM7CiAgICB9CgogICAgLyoqCiAgICAqIEFsbCBvd25lZCBvYnNlcnZlcnMsIHRoZSBvbmVzIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IGEgbG9jYWwgc3Vic2NyaXB0aW9uCiAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0T2JzZXJ2ZXI+fQogICAgKi8KCiAgfSwgewogICAga2V5OiAnb2JzZXJ2ZXJzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzOwogICAgfQogIH1dKTsKICByZXR1cm4gU3luY2hlcjsKfSgpOyAvKioKICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICoKICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgKgogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAqCiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAqKi8KCmV4cG9ydHMuZGVmYXVsdCA9IFN5bmNoZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEzMSAqLywKLyogMTMyICovLAovKiAxMzMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKICogQGFjY2VzcyBwcml2YXRlCiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcgZGVsdGEgY2hhbmdlcyBpbiByZW1vdGUgb2JqZWN0cywgYmVmb3JlIHRoZSByZXNwb25zZSBvZiBzdWJzY3JpcHRpb24gcmVhY2ggdGhlIG9ic2VydmVyLgogKiBJdCdzIHVzZWQgaW4gU3luY2hlciAtPiBzdWJzY3JpYmUuIFRoZSBmbG93IGlzIGRlZmluZWQgYXM6CiAqIDEuIChvYnNlcnZlcikgLS1zdWJzY3JpYmUtLT4gKHJlcG9ydGVyKQogKiAyLiAob2JzZXJ2ZXIpIDwtLWRlbHRhIHVwZGF0ZXMtLSAocmVwb3J0ZXIpCiAqIDMuIChvYnNlcnZlcikgPC0tc3Vic2NyaWJlIHJlc3BvbnNlLS0gKHJlcG9ydGVyKQogKiBUaGlzIG1lYW5zIHRoYXQgdGhlcmUgY291bGQgYmUgZGVsdGEgdXBkYXRlcyB0cmFuc2ZlcnJlZCBiZWZvcmUgdGhlIHN1YnNjcmlwdGlvbiBjb25maXJtYXRpb24uCiAqIFNpbmNlIHRoZXJlIGlzIG5vIERhdGFPYmplY3RPYnNlcnZlciBiZWZvcmUgdGhlIHVic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiwgdGhlcmUgc2hvdWxkIGJlIHNvbWUgb3RoZXIgb2JqZWN0IGNvbGxlY3RpbmcgdGhlIHVwZGF0ZXMuCiAqIFByb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4KICovCnZhciBEYXRhUHJvdmlzaW9uYWwgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQogIF9saXN0ZW5lcjogTXNnTGlzdGVuZXIKICAgX2NoYW5nZXM6IFtdCiAgKi8KCiAgZnVuY3Rpb24gRGF0YVByb3Zpc2lvbmFsKG93bmVyLCB1cmwsIGJ1cywgY2hpbGRyZW4pIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFQcm92aXNpb25hbCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fYnVzID0gYnVzOwogICAgX3RoaXMuX2NoaWxkcmVuID0gY2hpbGRyZW47CgogICAgX3RoaXMuX2NoYW5nZXMgPSBbXTsKICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YVByb3Zpc2lvbmFsLCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YVByb3Zpc2lvbmFsLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgX3RoaXMuX2NoYW5nZXMucHVzaChtc2cpOwogICAgICB9KTsKCiAgICAgIC8qCiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOwogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVuKSB7CiAgICAgICAgbGV0IGNoaWxkQmFzZVVSTCA9IHVybCArICcvY2hpbGRyZW4vJzsKICAgICAgICBfdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHsKICAgICAgICAgIGxldCBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwogICAgICAgICAgbGV0IGxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgKG1zZykgPT4gewogICAgICAgICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgICAgICAgfSk7CiAgICAgIH0qLwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTsKCiAgICAgIC8qX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgbGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgIH0pOyovCiAgICB9CiAgfSwgewogICAga2V5OiAnYXBwbHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KG9ic2VydmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLl9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGNoYW5nZSkgewogICAgICAgIG9ic2VydmVyLl9jaGFuZ2VPYmplY3Qob2JzZXJ2ZXIuX3N5bmNPYmosIGNoYW5nZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2NoaWxkcmVuJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhUHJvdmlzaW9uYWw7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFQcm92aXNpb25hbDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTM0ICovLAovKiAxMzUgKi8sCi8qIDEzNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAxMzcgKi8sCi8qIDEzOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAxMzkgKi8sCi8qIDE0MCAqLywKLyogMTQxICovLAovKiAxNDIgKi8sCi8qIDE0MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuYXNzaWduOwoKLyoqKi8gfSksCi8qIDE0NCAqLywKLyogMTQ1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTUxKTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7CiAgcmV0dXJuICRPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpOwp9OwoKLyoqKi8gfSksCi8qIDE0NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgovLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pCnZhciBnZXRLZXlzICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpCiAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpCiAgLCBwSUUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpCiAgLCB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpCiAgLCBJT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpCiAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247CgovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKbW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHZhciBBID0ge30KICAgICwgQiA9IHt9CiAgICAsIFMgPSBTeW1ib2woKQogICAgLCBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JzsKICBBW1NdID0gNzsKICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7CiAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7Cn0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldCkKICAgICwgYUxlbiAgPSBhcmd1bWVudHMubGVuZ3RoCiAgICAsIGluZGV4ID0gMQogICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mCiAgICAsIGlzRW51bSAgICAgPSBwSUUuZjsKICB3aGlsZShhTGVuID4gaW5kZXgpewogICAgdmFyIFMgICAgICA9IElPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKQogICAgICAsIGtleXMgICA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUykKICAgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aAogICAgICAsIGogICAgICA9IDAKICAgICAgLCBrZXk7CiAgICB3aGlsZShsZW5ndGggPiBqKWlmKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpVFtrZXldID0gU1trZXldOwogIH0gcmV0dXJuIFQ7Cn0gOiAkYXNzaWduOwoKLyoqKi8gfSksCi8qIDE0NyAqLywKLyogMTQ4ICovLAovKiAxNDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSkKdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nil9KTsKCi8qKiovIH0pLAovKiAxNTAgKi8sCi8qIDE1MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KS5mOwoKX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicsIGZ1bmN0aW9uKCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKICAgIHJldHVybiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRvSU9iamVjdChpdCksIGtleSk7CiAgfTsKfSk7CgovKioqLyB9KSwKLyogMTUyICovLAovKiAxNTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gICAgIHByb3h5LW9ic2VydmUgdjAuMC4xOAovLyAgICAgQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE2IFNpbW9uIFkuIEJsYWNrd2VsbCwgQW55V2hpY2hXYXkKLy8gICAgIE1JVCBMaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAooZnVuY3Rpb24oKSB7CgkidXNlIHN0cmljdCI7CgkvLyBDcmVhdGVzIGFuZCByZXR1cm5zIGEgUHJveHkgd3JhcHBpbmcgYSB0YXJnZXQgc28gdGhhdCBhbGwgY2hhbmdlcyBjYW4gYmUgdHJhcHBlZCBhbmQgZm9yd2FyZGVkIHRvCgkvLyBhIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgdGFrZXMgYW4gYXJyYXkgb2YgY2hhbmdlcyBqdXN0IGxpa2UgdGhlIHRyYWRpdGlvbmFsIG9yaWdpbmFsIENocm9tZSBPYmplY3Qub2JzZXJ2ZQoJLy8ge29iamVjdDo8b2JqZWN0IGNoYW5nZWQ+LG5hbWU6PGZpZWxkIGNoYW5nZWQ+LHR5cGU6YWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLG9sZFZhbHVlOjxvbGQgdmFsdWUgaWYgdXBkYXRlIHwgZGVsZXRlPn0KCS8vIFRoZSBhY2NlcHRsaXN0IGNhbiBiZSBhZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUuCgkvLyB2IDAuMC4xMCB0byBzdXBwb3J0IHBhdXNpbmcgYW5kIHJlc3RhcnRpbmcgb2JzZXJ2YXRpb24gdHdvIGFkZGl0aW9uYWwgY29uc3RydWN0b3IgYXJndW1lbnRzIGFyZSBhdmFpbGFibGUgdG8gT2JqZWN0Lm9ic2VydmU6CgkvLyBwYXVzYWJsZSAtIGNyZWF0ZSB0aGUgT2JzZXJ2ZXIgc28gaXQgY2FuIGJlIHBhdXNlZAoJLy8gcGF1c2UgLSBjcmVhdGUgb2JzZXJ2ZXIgaW4gcGF1c2VkIHN0YXRlCgkvLyBpZiBwYXVzYWJsZSBpcyB0cnVlIHRoZW4gYW4gYWRkaXRpb25hbCBtZXRob2QgZGVsaXZlcihpZ25vcmVQcmV2aW91cykgaXMgYXZhaWxhYmxlIHRvIHN0YXJ0IGRlbGl2ZXJ5CgkvLyB0byBwYXVzZSBkZWxpdmVyeSBzZXQgYSBwcm9wZXJ0eSBjYWxsZWQgcGF1c2Ugb24gdGhlIGZ1bmN0aW9uIGRlbGl2ZXIgdG8gdHJ1ZQoJLy8gcGF1c2FibGUgaXMgb3B0aW9uYWwgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2Ygc2hhZG93aW5nIGEgcHJvcGVydHkgb3IgbWV0aG9kIG9uIGFueSBleGlzdGluZyBjb2RlIGNhbGxlZCBkZWxpdmVyCglpZighT2JqZWN0Lm9ic2VydmUgJiYgdHlwZW9mKFByb3h5KT09PSJmdW5jdGlvbiIpIHsKCQlmdW5jdGlvbiBPYnNlcnZlcih0YXJnZXQsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgewoJICAgIAl2YXIgbWUgPSB0aGlzLCBwcm94eTsKCSAgICAJZnVuY3Rpb24gZGVsaXZlcihpZ25vcmVQcmV2aW91cyxkZWxheSkgewoJICAgIAkJZGVsaXZlci5kZWxheSA9IGRlbGF5OwoJICAgIAkJaWYoIWRlbGl2ZXIucGF1c2UpIHsKCSAgICAgICAgCQlpZihtZS5jaGFuZ2VzZXQubGVuZ3RoPjApIHsKCSAgICAgICAgCQkJaWYoIWlnbm9yZVByZXZpb3VzKSB7CgkJICAgIAkgICAgCQl2YXIgY2hhbmdlcyA9IG1lLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiAhYWNjZXB0bGlzdCB8fCBhY2NlcHRsaXN0LmluZGV4T2YoY2hhbmdlLnR5cGUpPj0wOyB9KTsKCQkgICAgICAgIAkJCWlmKGNoYW5nZXMubGVuZ3RoPjApIHsKCQkgICAgICAgIAkJCQljYWxsYmFjayhjaGFuZ2VzKTsKCQkgICAgICAgIAkJCX0KCSAgICAgICAgCQkJfQoJICAgICAgICAJCQltZS5jaGFuZ2VzZXQgPSBbXTsKCSAgICAgICAgCQl9CgkgICAgCQl9CgkgICAgCX0KCSAgICAJZGVsaXZlci5wYXVzZSA9IHBhdXNlOwoJICAgIAlkZWxpdmVyLmRlbGF5ID0gZGVsYXk7CgkJICAgIG1lLmdldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsKCQkgICAgCWlmKHByb3BlcnR5PT09Il9fb2JzZXJ2ZXJfXyIpIHsKCQkgICAgCQlyZXR1cm4gbWU7CgkJICAgIAl9CgkJICAgIAlpZihwcm9wZXJ0eT09PSJ1bm9ic2VydmUiKSB7CgkJICAgIAkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCSAgICAJCQlPYmplY3QudW5vYnNlcnZlKHRhcmdldCk7CgkJICAgIAkJCXJldHVybiB0YXJnZXQ7CgkJICAgIAkJfTsKCQkgICAgCX0KCQkgICAgCWlmKHByb3BlcnR5PT09ImRlbGl2ZXIiKSB7CgkJICAgIAkJcmV0dXJuIGRlbGl2ZXI7CgkJICAgIAl9CgkJICAgIAlyZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTsKCQkgICAgfQoJICAgIAltZS50YXJnZXQgPSB0YXJnZXQ7CgkgICAgCW1lLmNoYW5nZXNldCA9IFtdOwoJICAgIAlpZighbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXykgewoJICAgIAkJLy8gX19vYnNlcnZlckNhbGxiYWNrc19fIGlzIHVzZWQgYXMgYW4gaW5kZXggdG8gZ2V0IGF0IHRoZSBwcm94eSB3aGljaCBpcyB0aGUgb2JzZXJ2ZXIsIHNvIHdlIGNhbiB1bm9ic2VydmUKCSAgICAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTsKCSAgICAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIl9fb2JzZXJ2ZXJzX18iLHtlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOmZhbHNlLHZhbHVlOltdfSk7CgkgICAgCX0KCSAgICAJbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKGNhbGxiYWNrKTsKCSAgICAJbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJzX18ucHVzaCh0aGlzKTsKCSAgICAJcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LG1lKTsKCSAgICAJZGVsaXZlcihmYWxzZSxkZWxheSk7CgkgICAgCXJldHVybiBwcm94eTsKCSAgICB9CgkJT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGl2ZXIgPSBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHRoaXMuZ2V0KG51bGwsImRlbGl2ZXIiKTsKCQl9CgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7IC8vICwgcmVjZWl2ZXIKCSAgICAJdmFyIG9sZHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTsKCSAgICAJdmFyIHR5cGUgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKTsKCSAgICAJdGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlOwoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICghdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKHR5cGUpPj0wKSkgewoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZTp0eXBlfSwKCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCSAgICAgICAgCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7CgkgICAgICAgIAlpZih0eXBlPT09InVwZGF0ZSIpIHsKCSAgICAgICAgCQljaGFuZ2Uub2xkVmFsdWUgPSBvbGR2YWx1ZTsKCSAgICAgICAgCX0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCSAgICAgICAgCWlmKHN0YXJ0KSB7CgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsKCSAgICAgICAgCX0KCSAgICAJfQoJICAgIAlyZXR1cm4gdHJ1ZTsKCSAgICB9OwoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsKCSAgICAJdmFyIG9sZHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTsKCSAgICAJLy9pZih0eXBlb2Yob2xkdmFsdWUpIT09InVuZGVmaW5lZCIpIHsKCQkgICAgCWRlbGV0ZSB0YXJnZXRbcHJvcGVydHldOwoJCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJkZWxldGUiKT49MCkgewoJCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6ImRlbGV0ZSIsb2xkVmFsdWU6b2xkdmFsdWV9LAoJCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCQkgICAgICAgIAkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOwoJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCQkgICAgICAgIAlpZihzdGFydCkgewoJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJCSAgICAgICAgCX0KCQkgICAgCX0KCSAgICAJLy99CgkgICAgCXJldHVybiB0cnVlOwoJICAgIH07CgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLmRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikgewoJICAgIAlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7CgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicmVjb25maWd1cmUiKT49MCkgewoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZToicmVjb25maWd1cmUifSwKICAgICAgICAJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKICAgICAgICAJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7CgkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7CgkgICAgICAgIAlpZihzdGFydCkgewoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7CgkgICAgICAgIAl9CgkgICAgCX0KCSAgICAJcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbih0YXJnZXQsIHByb3RvdHlwZSkgewoJICAgIAl2YXIgb2xkdmFsdWUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KTsKCSAgICAJT2JqZWN0LnNldFByb3RvdHlwZU9mKHRhcmdldCwgcHJvdG90eXBlKTsKCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJzZXRQcm90b3R5cGUiKT49MCkgewoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6Il9fcHJvdG9fXyIsdHlwZToic2V0UHJvdG90eXBlIixvbGRWYWx1ZTpvbGR2YWx1ZX0sCiAgICAJCQkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsCiAgICAJCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOwoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOwoJICAgICAgICAJaWYoc3RhcnQpIHsKCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJICAgICAgICAJfQoJICAgIAl9CgkgICAgCXJldHVybiB0cnVlOwoJICAgIH07CgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zID0gZnVuY3Rpb24odGFyZ2V0KSB7CgkgICAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpOwoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApIHsKCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCx0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyJ9LAoJCQkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLAoJCQkJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsKCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCSAgICAgICAgCWlmKHN0YXJ0KSB7CgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsKCSAgICAgICAgCX0KCSAgICAJfQoJICAgIAlyZXR1cm4gdHJ1ZTsKCSAgICB9OwoJICAgIE9iamVjdC5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsKCSAgICAJcmV0dXJuIG5ldyBPYnNlcnZlcihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7CgkgICAgfTsKCSAgICBPYmplY3QudW5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKSB7CgkgICAgCWlmKG9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18pIHsKCSAgICAJCWlmKCFjYWxsYmFjaykgewoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpOwoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZSgwLG9iamVjdC5fX29ic2VydmVyc19fLmxlbmd0aCk7CgkgICAgCQkJcmV0dXJuOwoJICAgIAkJfQoJICAgIAkJb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKG9ic2VydmVyY2FsbGJhY2ssaSkgewoJICAgIAkJCWlmKGNhbGxiYWNrPT09b2JzZXJ2ZXJjYWxsYmFjaykgewoJICAgIAkJCQlvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShpLDEpOwoJICAgIAkJCQlkZWxldGUgb2JqZWN0Ll9fb2JzZXJ2ZXJzX19baV0uY2FsbGJhY2s7CgkgICAgCQkJCW9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZShpLDEpOwoJICAgIAkJCX0KCSAgICAJCX0pOwoJICAgIAl9CgkgICAgfTsKCSAgICBBcnJheS5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsKCSAgICAJaWYoIShvYmplY3QgaW5zdGFuY2VvZiBBcnJheSkgJiYgIUFycmF5LmlzQXJyYXkob2JqZWN0KSkgewoJICAgIAkJdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7CgkgICAgCX0KICAgICAgICAgICAgCWFjY2VwdGxpc3QgPSBhY2NlcHRsaXN0IHx8IFsiYWRkIiwgInVwZGF0ZSIsICJkZWxldGUiLCAic3BsaWNlIl07CgkgICAgCXZhciBhcnJheXByb3h5ID0gbmV3IFByb3h5KG9iamVjdCx7Z2V0OiBmdW5jdGlvbih0YXJnZXQscHJvcGVydHkpIHsKCSAgICAJCWlmKHByb3BlcnR5PT09InVub2JzZXJ2ZSIpIHsKCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHsKCQkgICAgCQkJaWYoY2FsbGJhY2spIHsKCQkgICAgCQkJCXJldHVybiBPYmplY3QudW5vYnNlcnZlKHRhcmdldCxjYWxsYmFjayk7CgkJICAgIAkJCX0KCQkgICAgCQkJcmV0dXJuIHRhcmdldC51bm9ic2VydmUoKTsKCQkgICAgCQl9OwoJCSAgICAJfQoJICAgIAkJaWYocHJvcGVydHk9PT0ic3BsaWNlIikgewoJICAgIAkJCXJldHVybiBmdW5jdGlvbihzdGFydCxlbmQpIHsKCSAgICAJCQkJaWYodHlwZW9mKHN0YXJ0KSE9PSJudW1iZXIiIHx8IHR5cGVvZihlbmQpIT09Im51bWJlciIpIHsKCSAgICAJCQkJCXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IHR3byBhcmd1bWVudHMgdG8gQXJyYXkgc3BsaWNlIGFyZSBub3QgbnVtYmVyLCBudW1iZXIiKTsKCSAgICAJCQkJfQoJICAgIAkgICAgCQl2YXIgcmVtb3ZlZCA9IHRoaXMuc2xpY2Uoc3RhcnQsc3RhcnQrZW5kKSwKCSAgICAJICAgIAkJCWFkZGVkQ291bnQgPSAoYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHMubGVuZ3RoLTIgOiAwKSwKCSAgICAJICAgIAkJCWNoYW5nZSA9ICB7b2JqZWN0Om9iamVjdCx0eXBlOiJzcGxpY2UiLGluZGV4OnN0YXJ0LHJlbW92ZWQ6cmVtb3ZlZCxhZGRlZENvdW50OmFkZGVkQ291bnR9OwoJICAgIAkgICAgCQl0YXJnZXQuc3BsaWNlLmFwcGx5KHRhcmdldCxhcmd1bWVudHMpOwoJICAgIAkgICAgCQlpZihhY2NlcHRsaXN0LmluZGV4T2YoInNwbGljZSIpPj0wKSB7CgkgICAgCSAgICAJCQl2YXIgc3RhcnQgPSBwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCSAgICAJICAgICAgICAJCQlkZWxpdmVyID0gcHJveHkuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTsKCSAgICAJICAgIAkJCXByb3h5Ll9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOwoJICAgIAkgICAgCQkJaWYoc3RhcnQpIHsKCSAgICAJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJICAgIAkJICAgICAgICAJfQoJICAgIAkgICAgCQl9CgkgICAgCSAgICAJfQoJICAgIAkJfQoJICAgIAkJaWYocHJvcGVydHk9PT0icHVzaCIpIHsKCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsKCSAgICAJCSAgICAJcmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLDAsaXRlbSk7CgkgICAgCQkgICAgfQoJICAgIAkJfQoJICAgIAkJaWYocHJvcGVydHk9PT0icG9wIikgewoJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oKSB7CgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpOwoJICAgIAkJICAgIH0KCSAgICAJCX0KCSAgICAJCWlmKHByb3BlcnR5PT09InVuc2hpZnQiKSB7CgkgICAgCQkJIHJldHVybiBmdW5jdGlvbihpdGVtKSB7CiAgICAJCSAgICAJCXJldHVybiB0aGlzLnNwbGljZSgwLDAsaXRlbSk7CiAgICAJCSAgICAJfQoJICAgIAkJfQoJICAgIAkJaWYocHJvcGVydHk9PT0ic2hpZnQiKSB7CgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJICAgIAkgICAgCQlyZXR1cm4gdGhpcy5zcGxpY2UoMCwxKTsKCSAgICAJICAgIAl9CgkgICAgCQl9CgkgICAgCQlyZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTsKCSAgICAJfX0pOwoJICAgIAl2YXIgcHJveHkgPSBPYmplY3Qub2JzZXJ2ZShhcnJheXByb3h5LGZ1bmN0aW9uKGNoYW5nZXNldCkgeyAKCSAgICAJCXZhciBjaGFuZ2VzID0gY2hhbmdlc2V0LmZpbHRlcihmdW5jdGlvbihjaGFuZ2UpIHsgcmV0dXJuIGNoYW5nZS5uYW1lIT09Imxlbmd0aCIgJiYgY2hhbmdlLm5hbWUhPT0iYWRkIiAmJiAoIWFjY2VwdGxpc3QgfHwgYWNjZXB0bGlzdC5pbmRleE9mKGNoYW5nZS50eXBlKT49MCk7IH0pOwoJICAgIAkJaWYoY2hhbmdlcy5sZW5ndGg+MCkgewoJICAgIAkJCWNhbGxiYWNrKGNoYW5nZXMpOwoJICAgIAkJfQoJICAgIAl9LGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpOwoJICAgIAlyZXR1cm4gcHJveHk7CgkgICAgfTsKCSAgICBBcnJheS51bm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2spIHsKCQkgIHJldHVybiBvYmplY3QudW5vYnNlcnZlKGNhbGxiYWNrKTsKCSAgICB9Cgl9CglPYmplY3QuZGVlcE9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2sscGFydHMpIHsKCgkJcGFydHMgPSAocGFydHMgPyBwYXJ0cyA6IFtdKTsKCgkJdmFyIHRvVHlwZU5hbWUgPSBmdW5jdGlvbihvYmopIHsKCQkJcmV0dXJuICh7fSkudG9TdHJpbmcuY2FsbChvYmopLm1hdGNoKC9ccyhbYS16QS1aXSspLylbMV0udG9Mb3dlckNhc2UoKQoJCX0KCgkJZnVuY3Rpb24gcmVvYnNlcnZlKHZhbHVlLCBwYXJ0cykgewoJCQl2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTsKCQkJa2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewoJCQkJaWYoKHRvVHlwZU5hbWUodmFsdWVba2V5XSkgPT09ICdvYmplY3QnIHx8IHRvVHlwZU5hbWUodmFsdWVba2V5XSkgPT09ICdhcnJheScpICYmICF2YWx1ZVtrZXldLmhhc093blByb3BlcnR5KCdfX29ic2VydmVyc19fJykpIHsKCQkJCQl2YXIgbmV3cGFydHMgPSBwYXJ0cy5zbGljZSgwKTsKCQkJCQluZXdwYXJ0cy5wdXNoKGtleSk7CgkJCQkJdmFsdWVba2V5XSA9IE9iamVjdC5kZWVwT2JzZXJ2ZSh2YWx1ZVtrZXldLGNhbGxiYWNrLG5ld3BhcnRzKTsKCQkJCX0KCQkJfSk7CgkJfQoKCQlyZW9ic2VydmUob2JqZWN0LCBwYXJ0cyk7CgoJCXZhciBvYnNlcnZlZCA9IE9iamVjdC5vYnNlcnZlKG9iamVjdCxmdW5jdGlvbihjaGFuZ2VzZXQpIHsKCQkJdmFyIGNoYW5nZXMgPSBbXTsKCQkJZnVuY3Rpb24gcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0LG5ld09iamVjdCxwYXRoKSB7CgkJCQlpZihuZXdPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHsKCQkJCQl2YXIgbmV3a2V5cyA9IE9iamVjdC5rZXlzKG5ld09iamVjdCk7CgkJCQkJbmV3a2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewoJCQkJCQlpZighb2xkT2JqZWN0IHx8IChvbGRPYmplY3Rba2V5XSE9PW5ld09iamVjdFtrZXldKSkgewoJCQkJCQkJdmFyIG9sZHZhbHVlID0gKG9sZE9iamVjdCAmJiBvbGRPYmplY3Rba2V5XSE9PXVuZGVmaW5lZCA/IG9sZE9iamVjdFtrZXldIDogdW5kZWZpbmVkKSwKCQkJCQkJCQljaGFuZ2UgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKSwKCQkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsKCgkJCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGR2YWx1ZSxuZXdWYWx1ZTpuZXdPYmplY3Rba2V5XSxrZXlwYXRoOmtleXBhdGh9KTsKCQkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZHZhbHVlLG5ld09iamVjdFtrZXldLGtleXBhdGgpOwoJCQkJCQl9CgkJCQkJfSk7CgkJCQl9IGVsc2UgaWYob2xkT2JqZWN0IGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJCQkJdmFyIG9sZGtleXMgPSBPYmplY3Qua2V5cyhvbGRPYmplY3QpOwoJCQkJCW9sZGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKCQkJCQkJdmFyIGNoYW5nZSA9IChuZXdPYmplY3Q9PT1udWxsID8gInVwZGF0ZSIgOiAiZGVsZXRlIiksCgkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsKCQkJCQkJCQoJCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGRPYmplY3Rba2V5XSxuZXdWYWx1ZTpuZXdPYmplY3Qsa2V5cGF0aDprZXlwYXRofSk7CgkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZE9iamVjdFtrZXldLHVuZGVmaW5lZCxrZXlwYXRoKTsKCQkJCQl9KTsKCQkJCX0KCQkJfQoJCQljaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbihjaGFuZ2UpIHsKCQkJCXZhciBrZXlwYXRoID0gKHBhcnRzLmxlbmd0aD4wID8gcGFydHMuam9pbigiLiIpICsgIi4iIDogIiIpICsgY2hhbmdlLm5hbWU7CgoJCQkJaWYgKGNoYW5nZS50eXBlID09PSAidXBkYXRlIiB8fCBjaGFuZ2UudHlwZSA9PT0gImFkZCIpIHsgCgkJCQkJcmVvYnNlcnZlKGNoYW5nZS5vYmplY3QsIHBhcnRzKTsKCQkJCX0KCgkJCQljaGFuZ2VzLnB1c2goe25hbWU6Y2hhbmdlLm5hbWUsb2JqZWN0OmNoYW5nZS5vYmplY3QsdHlwZTpjaGFuZ2UudHlwZSxvbGRWYWx1ZTpjaGFuZ2Uub2xkVmFsdWUsbmV3VmFsdWU6Y2hhbmdlLm9iamVjdFtjaGFuZ2UubmFtZV0sa2V5cGF0aDprZXlwYXRofSk7CgkJCQlyZWN1cnNlKGNoYW5nZS5uYW1lLGNoYW5nZS5vYmplY3QsY2hhbmdlLm9sZFZhbHVlLGNoYW5nZS5vYmplY3RbY2hhbmdlLm5hbWVdLGtleXBhdGgpOwoJCQl9KTsKCQkJY2FsbGJhY2soY2hhbmdlcyk7CgkJfSk7CgkJcmV0dXJuIG9ic2VydmVkOwoJfTsKfSkoKTsKCgovKioqLyB9KSwKLyogMTU0ICovLAovKiAxNTUgKi8sCi8qIDE1NiAqLywKLyogMTU3ICovLAovKiAxNTggKi8sCi8qIDE1OSAqLywKLyogMTYwICovLAovKiAxNjEgKi8sCi8qIDE2MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkRhdGFPYmplY3RPYnNlcnZlciA9IGV4cG9ydHMuRGF0YU9iamVjdFJlcG9ydGVyID0gZXhwb3J0cy5TeW5jaGVyID0gdW5kZWZpbmVkOwoKdmFyIF9TeW5jaGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApOwoKdmFyIF9TeW5jaGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N5bmNoZXIpOwoKdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7Cgp2YXIgX0RhdGFPYmplY3RSZXBvcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0UmVwb3J0ZXIpOwoKdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7Cgp2YXIgX0RhdGFPYmplY3RPYnNlcnZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0T2JzZXJ2ZXIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuU3luY2hlciA9IF9TeW5jaGVyMi5kZWZhdWx0OwpleHBvcnRzLkRhdGFPYmplY3RSZXBvcnRlciA9IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQ7CmV4cG9ydHMuRGF0YU9iamVjdE9ic2VydmVyID0gX0RhdGFPYmplY3RPYnNlcnZlcjIuZGVmYXVsdDsKCi8qKiovIH0pCi8qKioqKiovIF0pOwp9KTsKCn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwoKJ3VzZSBzdHJpY3QnOwoKLy8gU2hpbW1pbmcgc3RhcnRzIGhlcmUuCihmdW5jdGlvbigpIHsKICAvLyBVdGlscy4KICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7CiAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7CiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuYnJvd3NlckRldGFpbHM7CiAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci4KICBtb2R1bGUuZXhwb3J0cy5icm93c2VyRGV0YWlscyA9IGJyb3dzZXJEZXRhaWxzOwogIG1vZHVsZS5leHBvcnRzLmV4dHJhY3RWZXJzaW9uID0gdXRpbHMuZXh0cmFjdFZlcnNpb247CiAgbW9kdWxlLmV4cG9ydHMuZGlzYWJsZUxvZyA9IHV0aWxzLmRpc2FibGVMb2c7CgogIC8vIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyBpZiB5b3Ugd2FudCBsb2dnaW5nIHRvIG9jY3VyLCBpbmNsdWRpbmcgbG9nZ2luZwogIC8vIGZvciB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdy4gQ2FuIGFsc28gYmUgdHVybmVkIG9uIGluIHRoZSBicm93c2VyIHZpYQogIC8vIGFkYXB0ZXIuZGlzYWJsZUxvZyhmYWxzZSksIGJ1dCB0aGVuIGxvZ2dpbmcgZnJvbSB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdwogIC8vIHdpbGwgbm90IGFwcGVhci4KICAvLyByZXF1aXJlKCcuL3V0aWxzJykuZGlzYWJsZUxvZyhmYWxzZSk7CgogIC8vIEJyb3dzZXIgc2hpbXMuCiAgdmFyIGNocm9tZVNoaW0gPSByZXF1aXJlKCcuL2Nocm9tZS9jaHJvbWVfc2hpbScpIHx8IG51bGw7CiAgdmFyIGVkZ2VTaGltID0gcmVxdWlyZSgnLi9lZGdlL2VkZ2Vfc2hpbScpIHx8IG51bGw7CiAgdmFyIGZpcmVmb3hTaGltID0gcmVxdWlyZSgnLi9maXJlZm94L2ZpcmVmb3hfc2hpbScpIHx8IG51bGw7CiAgdmFyIHNhZmFyaVNoaW0gPSByZXF1aXJlKCcuL3NhZmFyaS9zYWZhcmlfc2hpbScpIHx8IG51bGw7CgogIC8vIFNoaW0gYnJvd3NlciBpZiBmb3VuZC4KICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHsKICAgIGNhc2UgJ2Nocm9tZSc6CiAgICAgIGlmICghY2hyb21lU2hpbSB8fCAhY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGNocm9tZVNoaW07CgogICAgICBjaHJvbWVTaGltLnNoaW1HZXRVc2VyTWVkaWEoKTsKICAgICAgY2hyb21lU2hpbS5zaGltTWVkaWFTdHJlYW0oKTsKICAgICAgdXRpbHMuc2hpbUNyZWF0ZU9iamVjdFVSTCgpOwogICAgICBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QoKTsKICAgICAgY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgY2hyb21lU2hpbS5zaGltT25UcmFjaygpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2ZpcmVmb3gnOgogICAgICBpZiAoIWZpcmVmb3hTaGltIHx8ICFmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gZmlyZWZveFNoaW07CgogICAgICBmaXJlZm94U2hpbS5zaGltR2V0VXNlck1lZGlhKCk7CiAgICAgIHV0aWxzLnNoaW1DcmVhdGVPYmplY3RVUkwoKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbVNvdXJjZU9iamVjdCgpOwogICAgICBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbU9uVHJhY2soKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdlZGdlJzoKICAgICAgaWYgKCFlZGdlU2hpbSB8fCAhZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgbG9nZ2luZygnTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBlZGdlLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGVkZ2VTaGltOwoKICAgICAgZWRnZVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICB1dGlscy5zaGltQ3JlYXRlT2JqZWN0VVJMKCk7CiAgICAgIGVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbigpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3NhZmFyaSc6CiAgICAgIGlmICghc2FmYXJpU2hpbSkgewogICAgICAgIGxvZ2dpbmcoJ1NhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gc2FmYXJpU2hpbTsKCiAgICAgIHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGxvZ2dpbmcoJ1Vuc3VwcG9ydGVkIGJyb3dzZXIhJyk7CiAgfQp9KSgpOwoKfSx7Ii4vY2hyb21lL2Nocm9tZV9zaGltIjo0LCIuL2VkZ2UvZWRnZV9zaGltIjo2LCIuL2ZpcmVmb3gvZmlyZWZveF9zaGltIjo4LCIuL3NhZmFyaS9zYWZhcmlfc2hpbSI6MTAsIi4vdXRpbHMiOjExfV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CgovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzLmpzJykuYnJvd3NlckRldGFpbHM7Cgp2YXIgY2hyb21lU2hpbSA9IHsKICBzaGltTWVkaWFTdHJlYW06IGZ1bmN0aW9uKCkgewogICAgd2luZG93Lk1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtIHx8IHdpbmRvdy53ZWJraXRNZWRpYVN0cmVhbTsKICB9LAoKICBzaGltT25UcmFjazogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmICEoJ29udHJhY2snIGluCiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbnRyYWNrJywgewogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjazsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24oZikgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spOwogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAvLyBvbmFkZHN0cmVhbSBkb2VzIG5vdCBmaXJlIHdoZW4gYSB0cmFjayBpcyBhZGRlZCB0byBhbiBleGlzdGluZwogICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC4KICAgICAgICAgICAgZS5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCBmdW5jdGlvbih0ZSkgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRlLnRyYWNrOwogICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0ZS50cmFja307CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7CiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHt0cmFjazogdHJhY2t9OwogICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dOwogICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmCiAgICAgICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAgICAgLy8gU2hpbSB0aGUgc3JjT2JqZWN0IHByb3BlcnR5LCBvbmNlLCB3aGVuIEhUTUxNZWRpYUVsZW1lbnQgaXMgZm91bmQuCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcmNPYmplY3Q7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAvLyBVc2UgX3NyY09iamVjdCBhcyBhIHByaXZhdGUgcHJvcGVydHkgZm9yIHRoaXMgc2hpbQogICAgICAgICAgICB0aGlzLl9zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgICAgIGlmICh0aGlzLnNyYykgewogICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXN0cmVhbSkgewogICAgICAgICAgICAgIHRoaXMuc3JjID0gJyc7CiAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTsKICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZWNyZWF0ZSB0aGUgYmxvYiB1cmwgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIG9yCiAgICAgICAgICAgIC8vIHJlbW92ZWQuIERvaW5nIGl0IG1hbnVhbGx5IHNpbmNlIHdlIHdhbnQgdG8gYXZvaWQgYSByZWN1cnNpb24uCiAgICAgICAgICAgIHN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGlmIChzZWxmLnNyYykgewogICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChzZWxmLnNyYyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuc3JjKSB7CiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNlbGYuc3JjKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2VsZi5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsKICAgIC8vIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuCiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgIC8vIFRyYW5zbGF0ZSBpY2VUcmFuc3BvcnRQb2xpY3kgdG8gaWNlVHJhbnNwb3J0cywKICAgICAgICAvLyBzZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD00ODY5CiAgICAgICAgLy8gdGhpcyB3YXMgZml4ZWQgaW4gTTU2IGFsb25nIHdpdGggdW5wcmVmaXhpbmcgUlRDUGVlckNvbm5lY3Rpb24uCiAgICAgICAgbG9nZ2luZygnUGVlckNvbm5lY3Rpb24nKTsKICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7CiAgICAgICAgICBwY0NvbmZpZy5pY2VUcmFuc3BvcnRzID0gcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5ldyB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7CiAgICAgIH07CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CiAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgICAgIGlmICh3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIHZhciBvcmlnR2V0U3RhdHMgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7CiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3RvciwKICAgICAgICBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0CiAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgLy8gV2hlbiBzcGVjLXN0eWxlIGdldFN0YXRzIGlzIHN1cHBvcnRlZCwgcmV0dXJuIHRob3NlIHdoZW4gY2FsbGVkIHdpdGgKICAgICAgLy8gZWl0aGVyIG5vIGFyZ3VtZW50cyBvciB0aGUgc2VsZWN0b3IgYXJndW1lbnQgaXMgbnVsbC4KICAgICAgaWYgKG9yaWdHZXRTdGF0cy5sZW5ndGggPT09IDAgJiYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwKICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpKSB7CiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXSk7CiAgICAgIH0KCiAgICAgIHZhciBmaXhDaHJvbWVTdGF0c18gPSBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgIHZhciBzdGFuZGFyZFJlcG9ydCA9IHt9OwogICAgICAgIHZhciByZXBvcnRzID0gcmVzcG9uc2UucmVzdWx0KCk7CiAgICAgICAgcmVwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHJlcG9ydCkgewogICAgICAgICAgdmFyIHN0YW5kYXJkU3RhdHMgPSB7CiAgICAgICAgICAgIGlkOiByZXBvcnQuaWQsCiAgICAgICAgICAgIHRpbWVzdGFtcDogcmVwb3J0LnRpbWVzdGFtcCwKICAgICAgICAgICAgdHlwZTogewogICAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJywKICAgICAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgICAgICAgICB9W3JlcG9ydC50eXBlXSB8fCByZXBvcnQudHlwZQogICAgICAgICAgfTsKICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICBzdGFuZGFyZFN0YXRzW25hbWVdID0gcmVwb3J0LnN0YXQobmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0czsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0OwogICAgICB9OwoKICAgICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgICB2YXIgbWFrZU1hcFN0YXRzID0gZnVuY3Rpb24oc3RhdHMpIHsKICAgICAgICByZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhzdGF0cykubWFwKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgcmV0dXJuW2tleSwgc3RhdHNba2V5XV07CiAgICAgICAgfSkpOwogICAgICB9OwoKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBhcmdzWzFdKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8sCiAgICAgICAgICAgIGFyZ3VtZW50c1swXV0pOwogICAgICB9CgogICAgICAvLyBwcm9taXNlLXN1cHBvcnQKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIG9yaWdHZXRTdGF0cy5hcHBseShzZWxmLCBbCiAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICByZXNvbHZlKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgICB9LCByZWplY3RdKTsKICAgICAgfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spOwogICAgfTsKCiAgICAvLyBhZGQgcHJvbWlzZSBzdXBwb3J0IC0tIG5hdGl2ZWx5IGF2YWlsYWJsZSBpbiBDaHJvbWUgNTEKICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTEpIHsKICAgICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddCiAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFthcmdzWzBdLCByZXNvbHZlLCByZWplY3RdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgW10pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vIHByb21pc2Ugc3VwcG9ydCBmb3IgY3JlYXRlT2ZmZXIgYW5kIGNyZWF0ZUFuc3dlci4gQXZhaWxhYmxlICh3aXRob3V0CiAgICAvLyBidWdzKSBzaW5jZSBNNTI6IGNyYnVnLzYxOTI4OQogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1MikgewogICAgICBbJ2NyZWF0ZU9mZmVyJywgJ2NyZWF0ZUFuc3dlciddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYKICAgICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0JykpIHsKICAgICAgICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkOwogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFtyZXNvbHZlLCByZWplY3QsIG9wdHNdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gc2hpbSBpbXBsaWNpdCBjcmVhdGlvbiBvZiBSVENTZXNzaW9uRGVzY3JpcHRpb24vUlRDSWNlQ2FuZGlkYXRlCiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ10KICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID8KICAgICAgICAgICAgICAgIFJUQ0ljZUNhbmRpZGF0ZSA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpCiAgICB2YXIgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID0KICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlOwogICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIWFyZ3VtZW50c1swXSkgewogICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHsKICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfQp9OwoKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbU1lZGlhU3RyZWFtOiBjaHJvbWVTaGltLnNoaW1NZWRpYVN0cmVhbSwKICBzaGltT25UcmFjazogY2hyb21lU2hpbS5zaGltT25UcmFjaywKICBzaGltU291cmNlT2JqZWN0OiBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QsCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiwKICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpCn07Cgp9LHsiLi4vdXRpbHMuanMiOjExLCIuL2dldHVzZXJtZWRpYSI6NX1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIGNvbnN0cmFpbnRzVG9DaHJvbWVfID0gZnVuY3Rpb24oYykgewogICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7CiAgICAgIHJldHVybiBjOwogICAgfQogICAgdmFyIGNjID0ge307CiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07CiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7CiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgIH0KICAgICAgdmFyIG9sZG5hbWVfID0gZnVuY3Rpb24ocHJlZml4LCBuYW1lKSB7CiAgICAgICAgaWYgKHByZWZpeCkgewogICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKG5hbWUgPT09ICdkZXZpY2VJZCcpID8gJ3NvdXJjZUlkJyA6IG5hbWU7CiAgICAgIH07CiAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjYy5vcHRpb25hbCA9IGNjLm9wdGlvbmFsIHx8IFtdOwogICAgICAgIHZhciBvYyA9IHt9OwogICAgICAgIGlmICh0eXBlb2Ygci5pZGVhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCdtaW4nLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICAgIG9jID0ge307CiAgICAgICAgICBvY1tvbGRuYW1lXygnbWF4Jywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHsKICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgY2MubWFuZGF0b3J5W29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuZXhhY3Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgWydtaW4nLCAnbWF4J10uZm9yRWFjaChmdW5jdGlvbihtaXgpIHsKICAgICAgICAgIGlmIChyW21peF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgICAgIGNjLm1hbmRhdG9yeVtvbGRuYW1lXyhtaXgsIGtleSldID0gclttaXhdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGlmIChjLmFkdmFuY2VkKSB7CiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7CiAgICB9CiAgICByZXR1cm4gY2M7CiAgfTsKCiAgdmFyIHNoaW1Db25zdHJhaW50c18gPSBmdW5jdGlvbihjb25zdHJhaW50cywgZnVuYykgewogICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICBpZiAoY29uc3RyYWludHMgJiYgY29uc3RyYWludHMuYXVkaW8pIHsKICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7CiAgICB9CiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLnZpZGVvID09PSAnb2JqZWN0JykgewogICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSwgd2hlcmUgaXQgZGVmYXVsdHMgdG8gInVzZXIiLgogICAgICB2YXIgZmFjZSA9IGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgIGZhY2UgPSBmYWNlICYmICgodHlwZW9mIGZhY2UgPT09ICdvYmplY3QnKSA/IGZhY2UgOiB7aWRlYWw6IGZhY2V9KTsKCiAgICAgIGlmICgoZmFjZSAmJiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwKICAgICAgICAgICAgICAgICAgICBmYWNlLmlkZWFsID09PSAndXNlcicgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykpICYmCiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiYKICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGUpKSB7CiAgICAgICAgZGVsZXRlIGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykgewogICAgICAgICAgLy8gTG9vayBmb3IgImJhY2siIGluIGxhYmVsLCBvciB1c2UgbGFzdCBjYW0gKHR5cGljYWxseSBiYWNrIGNhbSkuCiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgZGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgYmFjayA9IGRldmljZXMuZmluZChmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdiYWNrJykgIT09IC0xOwogICAgICAgICAgICB9KSB8fCAoZGV2aWNlcy5sZW5ndGggJiYgZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgICAgaWYgKGJhY2spIHsKICAgICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5kZXZpY2VJZCA9IGZhY2UuZXhhY3QgPyB7ZXhhY3Q6IGJhY2suZGV2aWNlSWR9IDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aWRlYWw6IGJhY2suZGV2aWNlSWR9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMudmlkZW8pOwogICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7CiAgICB9CiAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpOwogIH07CgogIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogewogICAgICAgIFBlcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InCiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50TmFtZSwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlOwogICAgICB9CiAgICB9OwogIH07CgogIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgc2hpbUNvbnN0cmFpbnRzXyhjb25zdHJhaW50cywgZnVuY3Rpb24oYykgewogICAgICBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGMsIG9uU3VjY2VzcywgZnVuY3Rpb24oZSkgewogICAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV87CgogIC8vIFJldHVybnMgdGhlIHJlc3VsdCBvZiBnZXRVc2VyTWVkaWEgYXMgYSBQcm9taXNlLgogIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgICB9KTsKICB9OwoKICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7CiAgICAgIGdldFVzZXJNZWRpYTogZ2V0VXNlck1lZGlhUHJvbWlzZV8sCiAgICAgIGVudW1lcmF0ZURldmljZXM6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICB2YXIga2luZHMgPSB7YXVkaW86ICdhdWRpb2lucHV0JywgdmlkZW86ICd2aWRlb2lucHV0J307CiAgICAgICAgICByZXR1cm4gTWVkaWFTdHJlYW1UcmFjay5nZXRTb3VyY2VzKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgcmVzb2x2ZShkZXZpY2VzLm1hcChmdW5jdGlvbihkZXZpY2UpIHsKICAgICAgICAgICAgICByZXR1cm4ge2xhYmVsOiBkZXZpY2UubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICBraW5kOiBraW5kc1tkZXZpY2Uua2luZF0sCiAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogZGV2aWNlLmlkLAogICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogJyd9OwogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9CgogIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC4KICAvLyBUT0RPKEthcHRlbkphbnNzb24pIHJlbW92ZSBvbmNlIGltcGxlbWVudGVkIGluIENocm9tZSBzdGFibGUuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykgewogICAgICByZXR1cm4gZ2V0VXNlck1lZGlhUHJvbWlzZV8oY29uc3RyYWludHMpOwogICAgfTsKICB9IGVsc2UgewogICAgLy8gRXZlbiB0aG91Z2ggQ2hyb21lIDQ1IGhhcyBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIGFuZCBhIGdldFVzZXJNZWRpYQogICAgLy8gZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UsIGl0IGRvZXMgbm90IGFjY2VwdCBzcGVjLXN0eWxlCiAgICAvLyBjb25zdHJhaW50cy4KICAgIHZhciBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuCiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY3MpIHsKICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGZ1bmN0aW9uKGMpIHsKICAgICAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fAogICAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJycsICdOb3RGb3VuZEVycm9yJyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICAgIH0sIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9OwogIH0KCiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuCiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLgogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQp9OwoKfSx7Ii4uL3V0aWxzLmpzIjoxMX1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7Cgp2YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTsKdmFyIGJyb3dzZXJEZXRhaWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5icm93c2VyRGV0YWlsczsKCnZhciBlZGdlU2hpbSA9IHsKICBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uKCkgewogICAgaWYgKHdpbmRvdy5SVENJY2VHYXRoZXJlcikgewogICAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuCiAgICAgIC8vIE5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlLgogICAgICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUpIHsKICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykgewogICAgICAgICAgcmV0dXJuIGFyZ3M7CiAgICAgICAgfTsKICAgICAgfQogICAgICAvLyBPUlRDIGRvZXMgbm90IGhhdmUgYSBzZXNzaW9uIGRlc2NyaXB0aW9uIG9iamVjdCBidXQKICAgICAgLy8gb3RoZXIgYnJvd3NlcnMgKGkuZS4gQ2hyb21lKSB0aGF0IHdpbGwgc3VwcG9ydCBib3RoIFBDIGFuZCBPUlRDCiAgICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS4KICAgICAgaWYgKCF3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7CiAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHsKICAgICAgICAgIHJldHVybiBhcmdzOwogICAgICAgIH07CiAgICAgIH0KICAgICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHMKICAgICAgLy8gd2hlbiBhIHRyYWNrcyBlbmFibGVkIHByb3BlcnR5IHdhcyBjaGFuZ2VkLiBXb3JrYXJvdW5kIGZvciBhIGJ1ZyBpbgogICAgICAvLyBhZGRTdHJlYW0sIHNlZSBiZWxvdy4gTm8gbG9uZ2VyIHJlcXVpcmVkIGluIDE1MDI1KwogICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDE1MDI1KSB7CiAgICAgICAgdmFyIG9yaWdNU1RFbmFibGVkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcigKICAgICAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJyk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLCAnZW5hYmxlZCcsIHsKICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgb3JpZ01TVEVuYWJsZWQuc2V0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgICAgICB2YXIgZXYgPSBuZXcgRXZlbnQoJ2VuYWJsZWQnKTsKICAgICAgICAgICAgZXYuZW5hYmxlZCA9IHZhbHVlOwogICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24oY29uZmlnKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIHZhciBfZXZlbnRUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgIFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJywgJ2Rpc3BhdGNoRXZlbnQnXQogICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICAgIHNlbGZbbWV0aG9kXSA9IF9ldmVudFRhcmdldFttZXRob2RdLmJpbmQoX2V2ZW50VGFyZ2V0KTsKICAgICAgICAgIH0pOwoKICAgICAgdGhpcy5vbmljZWNhbmRpZGF0ZSA9IG51bGw7CiAgICAgIHRoaXMub25hZGRzdHJlYW0gPSBudWxsOwogICAgICB0aGlzLm9udHJhY2sgPSBudWxsOwogICAgICB0aGlzLm9ucmVtb3Zlc3RyZWFtID0gbnVsbDsKICAgICAgdGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIHRoaXMub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIHRoaXMub25uZWdvdGlhdGlvbm5lZWRlZCA9IG51bGw7CiAgICAgIHRoaXMub25kYXRhY2hhbm5lbCA9IG51bGw7CgogICAgICB0aGlzLmxvY2FsU3RyZWFtcyA9IFtdOwogICAgICB0aGlzLnJlbW90ZVN0cmVhbXMgPSBbXTsKICAgICAgdGhpcy5nZXRMb2NhbFN0cmVhbXMgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gc2VsZi5sb2NhbFN0cmVhbXM7CiAgICAgIH07CiAgICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBzZWxmLnJlbW90ZVN0cmVhbXM7CiAgICAgIH07CgogICAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnJywKICAgICAgICBzZHA6ICcnCiAgICAgIH0pOwogICAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgc2RwOiAnJwogICAgICB9KTsKICAgICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9ICdzdGFibGUnOwogICAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9ICduZXcnOwogICAgICB0aGlzLmljZUdhdGhlcmluZ1N0YXRlID0gJ25ldyc7CgogICAgICB0aGlzLmljZU9wdGlvbnMgPSB7CiAgICAgICAgZ2F0aGVyUG9saWN5OiAnYWxsJywKICAgICAgICBpY2VTZXJ2ZXJzOiBbXQogICAgICB9OwogICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICBzd2l0Y2ggKGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICAgIGNhc2UgJ2FsbCc6CiAgICAgICAgICBjYXNlICdyZWxheSc6CiAgICAgICAgICAgIHRoaXMuaWNlT3B0aW9ucy5nYXRoZXJQb2xpY3kgPSBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ25vbmUnOgogICAgICAgICAgICAvLyBGSVhNRTogcmVtb3ZlIG9uY2UgaW1wbGVtZW50YXRpb24gYW5kIHNwZWMgaGF2ZSBhZGRlZCB0aGlzLgogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpY2VUcmFuc3BvcnRQb2xpY3kgIm5vbmUiIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIC8vIGRvbid0IHNldCBpY2VUcmFuc3BvcnRQb2xpY3kuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnVzaW5nQnVuZGxlID0gY29uZmlnICYmIGNvbmZpZy5idW5kbGVQb2xpY3kgPT09ICdtYXgtYnVuZGxlJzsKCiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAvLyBFZGdlIGRvZXMgbm90IGxpa2UKICAgICAgICAvLyAxKSBzdHVuOgogICAgICAgIC8vIDIpIHR1cm46IHRoYXQgZG9lcyBub3QgaGF2ZSBhbGwgb2YgdHVybjpob3N0OnBvcnQ/dHJhbnNwb3J0PXVkcAogICAgICAgIC8vIDMpIHR1cm46IHdpdGggaXB2NiBhZGRyZXNzZXMKICAgICAgICB2YXIgaWNlU2VydmVycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmljZVNlcnZlcnMpKTsKICAgICAgICB0aGlzLmljZU9wdGlvbnMuaWNlU2VydmVycyA9IGljZVNlcnZlcnMuZmlsdGVyKGZ1bmN0aW9uKHNlcnZlcikgewogICAgICAgICAgaWYgKHNlcnZlciAmJiBzZXJ2ZXIudXJscykgewogICAgICAgICAgICB2YXIgdXJscyA9IHNlcnZlci51cmxzOwogICAgICAgICAgICBpZiAodHlwZW9mIHVybHMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgdXJscyA9IFt1cmxzXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmxzID0gdXJscy5maWx0ZXIoZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgICAgcmV0dXJuICh1cmwuaW5kZXhPZigndHVybjonKSA9PT0gMCAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHJhbnNwb3J0PXVkcCcpICE9PSAtMSAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHVybjpbJykgPT09IC0xKSB8fAogICAgICAgICAgICAgICAgICAodXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDAgJiYKICAgICAgICAgICAgICAgICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDE0MzkzKTsKICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgIHJldHVybiAhIXVybHM7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnOwoKICAgICAgLy8gcGVyLXRyYWNrIGljZUdhdGhlcnMsIGljZVRyYW5zcG9ydHMsIGR0bHNUcmFuc3BvcnRzLCBydHBTZW5kZXJzLCAuLi4KICAgICAgLy8gZXZlcnl0aGluZyB0aGF0IGlzIG5lZWRlZCB0byBkZXNjcmliZSBhIFNEUCBtLWxpbmUuCiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gW107CgogICAgICAvLyBzaW5jZSB0aGUgaWNlR2F0aGVyZXIgaXMgY3VycmVudGx5IGNyZWF0ZWQgaW4gY3JlYXRlT2ZmZXIgYnV0IHdlCiAgICAgIC8vIG11c3Qgbm90IGVtaXQgY2FuZGlkYXRlcyB1bnRpbCBhZnRlciBzZXRMb2NhbERlc2NyaXB0aW9uIHdlIGJ1ZmZlcgogICAgICAvLyB0aGVtIGluIHRoaXMgYXJyYXkuCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlciA9IFtdOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScpOwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICBpZiAodGhpcy5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKGV2ZW50KTsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwKTsKICAgICAgLy8gRklYTUU6IG5lZWQgdG8gYXBwbHkgaWNlIGNhbmRpZGF0ZXMgaW4gYSB3YXkgd2hpY2ggaXMgYXN5bmMgYnV0CiAgICAgIC8vIGluLW9yZGVyCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlci5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgdmFyIGVuZCA9ICFldmVudC5jYW5kaWRhdGUgfHwgT2JqZWN0LmtleXMoZXZlbnQuY2FuZGlkYXRlKS5sZW5ndGggPT09IDA7CiAgICAgICAgaWYgKGVuZCkgewogICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBzZWN0aW9ucy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAoc2VjdGlvbnNbal0uaW5kZXhPZignXHJcbmE9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJykgPT09IC0xKSB7CiAgICAgICAgICAgICAgc2VjdGlvbnNbal0gKz0gJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCArIDFdICs9CiAgICAgICAgICAgICAgJ2E9JyArIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgKyAnXHJcbic7CiAgICAgICAgfQogICAgICAgIHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICBzZWxmLm9uaWNlY2FuZGlkYXRlKGV2ZW50KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFldmVudC5jYW5kaWRhdGUgJiYgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSAhPT0gJ2NvbXBsZXRlJykgewogICAgICAgICAgdmFyIGNvbXBsZXRlID0gc2VsZi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChjb21wbGV0ZSAmJiBzZWxmLmljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlICE9PSAnY29tcGxldGUnKSB7CiAgICAgICAgICAgIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgPSAnY29tcGxldGUnOwogICAgICAgICAgICBzZWxmLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIgPSBbXTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWc7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDE1MDI1KSB7CiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHkKICAgICAgICAvLyB0byB0d28gZGlmZmVyZW50IHNlbmRlcnMgZG9lcyBub3Qgd29yayAoYnVpbGQgMTA1NDcpLgogICAgICAgIC8vIEZpeGVkIGluIDE1MDI1IChvciBlYXJsaWVyKQogICAgICAgIHZhciBjbG9uZWRTdHJlYW0gPSBzdHJlYW0uY2xvbmUoKTsKICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7CiAgICAgICAgICB2YXIgY2xvbmVkVHJhY2sgPSBjbG9uZWRTdHJlYW0uZ2V0VHJhY2tzKClbaWR4XTsKICAgICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuYWJsZWQnLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjbG9uZWRUcmFjay5lbmFibGVkID0gZXZlbnQuZW5hYmxlZDsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goY2xvbmVkU3RyZWFtKTsKICAgICAgfQogICAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICB2YXIgaWR4ID0gdGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pOwogICAgICBpZiAoaWR4ID4gLTEpIHsKICAgICAgICB0aGlzLmxvY2FsU3RyZWFtcy5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICB9KQogICAgICAubWFwKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjsKICAgICAgfSk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICByZXR1cm4gISF0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgfSkKICAgICAgLm1hcChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgfSk7CiAgICB9OwoKICAgIC8vIERldGVybWluZXMgdGhlIGludGVyc2VjdGlvbiBvZiBsb2NhbCBhbmQgcmVtb3RlIGNhcGFiaWxpdGllcy4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2dldENvbW1vbkNhcGFiaWxpdGllcyA9CiAgICAgICAgZnVuY3Rpb24obG9jYWxDYXBhYmlsaXRpZXMsIHJlbW90ZUNhcGFiaWxpdGllcykgewogICAgICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IHsKICAgICAgICAgICAgY29kZWNzOiBbXSwKICAgICAgICAgICAgaGVhZGVyRXh0ZW5zaW9uczogW10sCiAgICAgICAgICAgIGZlY01lY2hhbmlzbXM6IFtdCiAgICAgICAgICB9OwogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24obENvZGVjKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciByQ29kZWMgPSByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzW2ldOwogICAgICAgICAgICAgIGlmIChsQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSByQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpICYmCiAgICAgICAgICAgICAgICAgIGxDb2RlYy5jbG9ja1JhdGUgPT09IHJDb2RlYy5jbG9ja1JhdGUpIHsKICAgICAgICAgICAgICAgIC8vIG51bWJlciBvZiBjaGFubmVscyBpcyB0aGUgaGlnaGVzdCBjb21tb24gbnVtYmVyIG9mIGNoYW5uZWxzCiAgICAgICAgICAgICAgICByQ29kZWMubnVtQ2hhbm5lbHMgPSBNYXRoLm1pbihsQ29kZWMubnVtQ2hhbm5lbHMsCiAgICAgICAgICAgICAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIC8vIHB1c2ggckNvZGVjIHNvIHdlIHJlcGx5IHdpdGggb2ZmZXJlciBwYXlsb2FkIHR5cGUKICAgICAgICAgICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5jb2RlY3MucHVzaChyQ29kZWMpOwoKICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSBjb21tb24gZmVlZGJhY2sgbWVjaGFuaXNtcwogICAgICAgICAgICAgICAgckNvZGVjLnJ0Y3BGZWVkYmFjayA9IHJDb2RlYy5ydGNwRmVlZGJhY2suZmlsdGVyKGZ1bmN0aW9uKGZiKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbENvZGVjLnJ0Y3BGZWVkYmFjay5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGlmIChsQ29kZWMucnRjcEZlZWRiYWNrW2pdLnR5cGUgPT09IGZiLnR5cGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgbENvZGVjLnJ0Y3BGZWVkYmFja1tqXS5wYXJhbWV0ZXIgPT09IGZiLnBhcmFtZXRlcikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gRklYTUU6IGFsc28gbmVlZCB0byBkZXRlcm1pbmUgLnBhcmFtZXRlcnMKICAgICAgICAgICAgICAgIC8vICBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5wZWVyL29ydGMvaXNzdWVzLzU2OQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zCiAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obEhlYWRlckV4dGVuc2lvbikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgIGkrKykgewogICAgICAgICAgICAgICAgICB2YXIgckhlYWRlckV4dGVuc2lvbiA9IHJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zW2ldOwogICAgICAgICAgICAgICAgICBpZiAobEhlYWRlckV4dGVuc2lvbi51cmkgPT09IHJIZWFkZXJFeHRlbnNpb24udXJpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbW9uQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMucHVzaChySGVhZGVyRXh0ZW5zaW9uKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIEZJWE1FOiBmZWNNZWNoYW5pc21zCiAgICAgICAgICByZXR1cm4gY29tbW9uQ2FwYWJpbGl0aWVzOwogICAgICAgIH07CgogICAgLy8gQ3JlYXRlIElDRSBnYXRoZXJlciwgSUNFIHRyYW5zcG9ydCBhbmQgRFRMUyB0cmFuc3BvcnQuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyA9CiAgICAgICAgZnVuY3Rpb24obWlkLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICB2YXIgaWNlR2F0aGVyZXIgPSBuZXcgUlRDSWNlR2F0aGVyZXIoc2VsZi5pY2VPcHRpb25zKTsKICAgICAgICAgIHZhciBpY2VUcmFuc3BvcnQgPSBuZXcgUlRDSWNlVHJhbnNwb3J0KGljZUdhdGhlcmVyKTsKICAgICAgICAgIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGUgPSBmdW5jdGlvbihldnQpIHsKICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKTsKICAgICAgICAgICAgZXZlbnQuY2FuZGlkYXRlID0ge3NkcE1pZDogbWlkLCBzZHBNTGluZUluZGV4OiBzZHBNTGluZUluZGV4fTsKCiAgICAgICAgICAgIHZhciBjYW5kID0gZXZ0LmNhbmRpZGF0ZTsKICAgICAgICAgICAgdmFyIGVuZCA9ICFjYW5kIHx8IE9iamVjdC5rZXlzKGNhbmQpLmxlbmd0aCA9PT0gMDsKICAgICAgICAgICAgLy8gRWRnZSBlbWl0cyBhbiBlbXB0eSBvYmplY3QgZm9yIFJUQ0ljZUNhbmRpZGF0ZUNvbXBsZXRl4oClCiAgICAgICAgICAgIGlmIChlbmQpIHsKICAgICAgICAgICAgICAvLyBwb2x5ZmlsbCBzaW5jZSBSVENJY2VHYXRoZXJlci5zdGF0ZSBpcyBub3QgaW1wbGVtZW50ZWQgaW4KICAgICAgICAgICAgICAvLyBFZGdlIDEwNTQ3IHlldC4KICAgICAgICAgICAgICBpZiAoaWNlR2F0aGVyZXIuc3RhdGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgaWNlR2F0aGVyZXIuc3RhdGUgPSAnY29tcGxldGVkJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gUlRDSWNlQ2FuZGlkYXRlIGRvZXNuJ3QgaGF2ZSBhIGNvbXBvbmVudCwgbmVlZHMgdG8gYmUgYWRkZWQKICAgICAgICAgICAgICBjYW5kLmNvbXBvbmVudCA9IGljZVRyYW5zcG9ydC5jb21wb25lbnQgPT09ICdSVENQJyA/IDIgOiAxOwogICAgICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgPSBTRFBVdGlscy53cml0ZUNhbmRpZGF0ZShjYW5kKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdXBkYXRlIGxvY2FsIGRlc2NyaXB0aW9uLgogICAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgICBpZiAoIWVuZCkgewogICAgICAgICAgICAgIHNlY3Rpb25zW2V2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4ICsgMV0gKz0KICAgICAgICAgICAgICAgICAgJ2E9JyArIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgKyAnXHJcbic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2VjdGlvbnNbZXZlbnQuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXggKyAxXSArPQogICAgICAgICAgICAgICAgICAnYT1lbmQtb2YtY2FuZGlkYXRlc1xyXG4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICAgICAgdmFyIHRyYW5zY2VpdmVycyA9IHNlbGYuX3BlbmRpbmdPZmZlciA/IHNlbGYuX3BlbmRpbmdPZmZlciA6CiAgICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyczsKICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gdHJhbnNjZWl2ZXJzLmV2ZXJ5KGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLnN0YXRlID09PSAnY29tcGxldGVkJzsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBFbWl0IGNhbmRpZGF0ZSBpZiBsb2NhbERlc2NyaXB0aW9uIGlzIHNldC4KICAgICAgICAgICAgLy8gQWxzbyBlbWl0cyBudWxsIGNhbmRpZGF0ZSB3aGVuIGFsbCBnYXRoZXJlcnMgYXJlIGNvbXBsZXRlLgogICAgICAgICAgICBzd2l0Y2ggKHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUpIHsKICAgICAgICAgICAgICBjYXNlICduZXcnOgogICAgICAgICAgICAgICAgaWYgKCFlbmQpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLnB1c2goZXZlbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGVuZCAmJiBjb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICBzZWxmLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIucHVzaCgKICAgICAgICAgICAgICAgICAgICAgIG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAnZ2F0aGVyaW5nJzoKICAgICAgICAgICAgICAgIHNlbGYuX2VtaXRCdWZmZXJlZENhbmRpZGF0ZXMoKTsKICAgICAgICAgICAgICAgIGlmICghZW5kKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbmljZWNhbmRpZGF0ZShldmVudCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKSk7CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbmljZWNhbmRpZGF0ZShuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBzZWxmLmljZUdhdGhlcmluZ1N0YXRlID0gJ2NvbXBsZXRlJzsKICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZSc6CiAgICAgICAgICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbi4uLiBjdXJyZW50bHkhCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBkZWZhdWx0OiAvLyBuby1vcC4KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gbmV3IFJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQub25kdGxzc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwogICAgICAgICAgZHRsc1RyYW5zcG9ydC5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIC8vIG9uZXJyb3IgZG9lcyBub3Qgc2V0IHN0YXRlIHRvIGZhaWxlZCBieSBpdHNlbGYuCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhdGUgPSAnZmFpbGVkJzsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyOiBpY2VHYXRoZXJlciwKICAgICAgICAgICAgaWNlVHJhbnNwb3J0OiBpY2VUcmFuc3BvcnQsCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IGR0bHNUcmFuc3BvcnQKICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAvLyBTdGFydCB0aGUgUlRQIFNlbmRlciBhbmQgUmVjZWl2ZXIgZm9yIGEgdHJhbnNjZWl2ZXIuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl90cmFuc2NlaXZlID0gZnVuY3Rpb24odHJhbnNjZWl2ZXIsCiAgICAgICAgc2VuZCwgcmVjdikgewogICAgICB2YXIgcGFyYW1zID0gdGhpcy5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTsKICAgICAgaWYgKHNlbmQgJiYgdHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgcGFyYW1zLnJ0Y3AgPSB7CiAgICAgICAgICBjbmFtZTogU0RQVXRpbHMubG9jYWxDTmFtZQogICAgICAgIH07CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7CiAgICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjOwogICAgICAgIH0KICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc2VuZChwYXJhbXMpOwogICAgICB9CiAgICAgIGlmIChyZWN2ICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgLy8gcmVtb3ZlIFJUWCBmaWVsZCBpbiBFZGdlIDE0OTQyCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycKICAgICAgICAgICAgJiYgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycykgewogICAgICAgICAgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHApIHsKICAgICAgICAgICAgZGVsZXRlIHAucnR4OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOwogICAgICAgIHBhcmFtcy5ydGNwID0gewogICAgICAgICAgY25hbWU6IHRyYW5zY2VpdmVyLmNuYW1lCiAgICAgICAgfTsKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgpIHsKICAgICAgICAgIHBhcmFtcy5ydGNwLnNzcmMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmM7CiAgICAgICAgfQogICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnJlY2VpdmUocGFyYW1zKTsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPQogICAgICAgIGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICB2YXIgc2VjdGlvbnM7CiAgICAgICAgICB2YXIgc2Vzc2lvbnBhcnQ7CiAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykgewogICAgICAgICAgICAvLyBGSVhNRTogV2hhdCB3YXMgdGhlIHB1cnBvc2Ugb2YgdGhpcyBlbXB0eSBpZiBzdGF0ZW1lbnQ/CiAgICAgICAgICAgIC8vIGlmICghdGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9wZW5kaW5nT2ZmZXIpIHsKICAgICAgICAgICAgICAvLyBWRVJZIGxpbWl0ZWQgc3VwcG9ydCBmb3IgU0RQIG11bmdpbmcuIExpbWl0ZWQgdG86CiAgICAgICAgICAgICAgLy8gKiBjaGFuZ2luZyB0aGUgb3JkZXIgb2YgY29kZWNzCiAgICAgICAgICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgICAgICB2YXIgY2FwcyA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICAgICAgc2VsZi5fcGVuZGluZ09mZmVyW3NkcE1MaW5lSW5kZXhdLmxvY2FsQ2FwYWJpbGl0aWVzID0gY2FwczsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLnRyYW5zY2VpdmVycyA9IHRoaXMuX3BlbmRpbmdPZmZlcjsKICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fcGVuZGluZ09mZmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLnJlbW90ZURlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTsKICAgICAgICAgICAgdmFyIGlzSWNlTGl0ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LAogICAgICAgICAgICAgICAgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwOwogICAgICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdOwogICAgICAgICAgICAgIHZhciBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgICAgIHZhciBpY2VUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgdmFyIGR0bHNUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0OwogICAgICAgICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwogICAgICAgICAgICAgIHZhciByZW1vdGVDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXM7CgogICAgICAgICAgICAgIHZhciByZWplY3RlZCA9IG1lZGlhU2VjdGlvbi5zcGxpdCgnXG4nLCAxKVswXQogICAgICAgICAgICAgICAgICAuc3BsaXQoJyAnLCAyKVsxXSA9PT0gJzAnOwoKICAgICAgICAgICAgICBpZiAoIXJlamVjdGVkICYmICF0cmFuc2NlaXZlci5pc0RhdGFjaGFubmVsKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMoCiAgICAgICAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycygKICAgICAgICAgICAgICAgICAgICBtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICAgIGlmIChpc0ljZUxpdGUpIHsKICAgICAgICAgICAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMucm9sZSA9ICdzZXJ2ZXInOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghc2VsZi51c2luZ0J1bmRsZSB8fCBzZHBNTGluZUluZGV4ID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zdGFydChpY2VHYXRoZXJlciwgcmVtb3RlSWNlUGFyYW1ldGVycywKICAgICAgICAgICAgICAgICAgICAgIGlzSWNlTGl0ZSA/ICdjb250cm9sbGluZycgOiAnY29udHJvbGxlZCcpOwogICAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIG9mIGNhcGFiaWxpdGllcy4KICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBzZWxmLl9nZXRDb21tb25DYXBhYmlsaXRpZXMobG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKTsKCiAgICAgICAgICAgICAgICAvLyBTdGFydCB0aGUgUlRDUnRwU2VuZGVyLiBUaGUgUlRDUnRwUmVjZWl2ZXIgZm9yIHRoaXMKICAgICAgICAgICAgICAgIC8vIHRyYW5zY2VpdmVyIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBpbiBzZXRSZW1vdGVEZXNjcmlwdGlvbi4KICAgICAgICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwLAogICAgICAgICAgICAgICAgICAgIGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMubG9jYWxEZXNjcmlwdGlvbiA9IHsKICAgICAgICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSwKICAgICAgICAgICAgc2RwOiBkZXNjcmlwdGlvbi5zZHAKICAgICAgICAgIH07CiAgICAgICAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnb2ZmZXInOgogICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdoYXZlLWxvY2FsLW9mZmVyJyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2Fuc3dlcic6CiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ3N0YWJsZScpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGUgIicgKyBkZXNjcmlwdGlvbi50eXBlICsKICAgICAgICAgICAgICAgICAgJyInKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBJZiBhIHN1Y2Nlc3MgY2FsbGJhY2sgd2FzIHByb3ZpZGVkLCBlbWl0IElDRSBjYW5kaWRhdGVzIGFmdGVyIGl0CiAgICAgICAgICAvLyBoYXMgYmVlbiBleGVjdXRlZC4gT3RoZXJ3aXNlLCBlbWl0IGNhbGxiYWNrIGFmdGVyIHRoZSBQcm9taXNlIGlzCiAgICAgICAgICAvLyByZXNvbHZlZC4KICAgICAgICAgIHZhciBoYXNDYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmCiAgICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbic7CiAgICAgICAgICBpZiAoaGFzQ2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGNiID0gYXJndW1lbnRzWzFdOwogICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBjYigpOwogICAgICAgICAgICAgIGlmIChzZWxmLmljZUdhdGhlcmluZ1N0YXRlID09PSAnbmV3JykgewogICAgICAgICAgICAgICAgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdnYXRoZXJpbmcnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZWxmLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzKCk7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHAgPSBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIHAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKCFoYXNDYWxsYmFjaykgewogICAgICAgICAgICAgIGlmIChzZWxmLmljZUdhdGhlcmluZ1N0YXRlID09PSAnbmV3JykgewogICAgICAgICAgICAgICAgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdnYXRoZXJpbmcnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBVc3VhbGx5IGNhbmRpZGF0ZXMgd2lsbCBiZSBlbWl0dGVkIGVhcmxpZXIuCiAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoc2VsZi5fZW1pdEJ1ZmZlcmVkQ2FuZGlkYXRlcy5iaW5kKHNlbGYpLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBwOwogICAgICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9CiAgICAgICAgZnVuY3Rpb24oZGVzY3JpcHRpb24pIHsKICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgIHZhciBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTsKICAgICAgICAgIHZhciByZWNlaXZlckxpc3QgPSBbXTsKICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTsKICAgICAgICAgIHZhciBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgICB2YXIgaXNJY2VMaXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoc2Vzc2lvbnBhcnQsCiAgICAgICAgICAgICAgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwOwogICAgICAgICAgdGhpcy51c2luZ0J1bmRsZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LAogICAgICAgICAgICAgICdhPWdyb3VwOkJVTkRMRSAnKS5sZW5ndGggPiAwOwogICAgICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKTsKICAgICAgICAgICAgdmFyIGtpbmQgPSBtbGluZVswXTsKICAgICAgICAgICAgdmFyIHJlamVjdGVkID0gbWxpbmVbMV0gPT09ICcwJzsKICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IFNEUFV0aWxzLmdldERpcmVjdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKCiAgICAgICAgICAgIHZhciBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKTsKICAgICAgICAgICAgaWYgKG1pZC5sZW5ndGgpIHsKICAgICAgICAgICAgICBtaWQgPSBtaWRbMF0uc3Vic3RyKDYpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pZCA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBSZWplY3QgZGF0YWNoYW5uZWxzIHdoaWNoIGFyZSBub3QgaW1wbGVtZW50ZWQgeWV0LgogICAgICAgICAgICBpZiAoa2luZCA9PT0gJ2FwcGxpY2F0aW9uJyAmJiBtbGluZVsyXSA9PT0gJ0RUTFMvU0NUUCcpIHsKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSA9IHsKICAgICAgICAgICAgICAgIG1pZDogbWlkLAogICAgICAgICAgICAgICAgaXNEYXRhY2hhbm5lbDogdHJ1ZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgdHJhbnNjZWl2ZXI7CiAgICAgICAgICAgIHZhciBpY2VHYXRoZXJlcjsKICAgICAgICAgICAgdmFyIGljZVRyYW5zcG9ydDsKICAgICAgICAgICAgdmFyIGR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgIHZhciBydHBTZW5kZXI7CiAgICAgICAgICAgIHZhciBydHBSZWNlaXZlcjsKICAgICAgICAgICAgdmFyIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgIHZhciByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOwogICAgICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXM7CgogICAgICAgICAgICB2YXIgdHJhY2s7CiAgICAgICAgICAgIC8vIEZJWE1FOiBlbnN1cmUgdGhlIG1lZGlhU2VjdGlvbiBoYXMgcnRjcC1tdXggc2V0LgogICAgICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7CiAgICAgICAgICAgIHZhciByZW1vdGVJY2VQYXJhbWV0ZXJzOwogICAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnM7CiAgICAgICAgICAgIGlmICghcmVqZWN0ZWQpIHsKICAgICAgICAgICAgICByZW1vdGVJY2VQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sCiAgICAgICAgICAgICAgICAgIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnY2xpZW50JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID0KICAgICAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7CgogICAgICAgICAgICB2YXIgY25hbWU7CiAgICAgICAgICAgIC8vIEdldHMgdGhlIGZpcnN0IFNTUkMuIE5vdGUgdGhhdCB3aXRoIFJUWCB0aGVyZSBtaWdodCBiZSBtdWx0aXBsZQogICAgICAgICAgICAvLyBTU1JDcy4KICAgICAgICAgICAgdmFyIHJlbW90ZVNzcmMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JykKICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24obGluZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihvYmopIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5hdHRyaWJ1dGUgPT09ICdjbmFtZSc7CiAgICAgICAgICAgICAgICB9KVswXTsKICAgICAgICAgICAgaWYgKHJlbW90ZVNzcmMpIHsKICAgICAgICAgICAgICBjbmFtZSA9IHJlbW90ZVNzcmMudmFsdWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBpc0NvbXBsZXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLAogICAgICAgICAgICAgICAgJ2E9ZW5kLW9mLWNhbmRpZGF0ZXMnLCBzZXNzaW9ucGFydCkubGVuZ3RoID4gMDsKICAgICAgICAgICAgdmFyIGNhbmRzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1jYW5kaWRhdGU6JykKICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oY2FuZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihjYW5kKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5kLmNvbXBvbmVudCA9PT0gJzEnOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInICYmICFyZWplY3RlZCkgewogICAgICAgICAgICAgIHZhciB0cmFuc3BvcnRzID0gc2VsZi51c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCA/IHsKICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyOiBzZWxmLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlciwKICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydDogc2VsZi50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LAogICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydDogc2VsZi50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydAogICAgICAgICAgICAgIH0gOiBzZWxmLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyhtaWQsIHNkcE1MaW5lSW5kZXgpOwoKICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZSAmJiAoIXNlbGYudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0LnNldFJlbW90ZUNhbmRpZGF0ZXMoY2FuZHMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMoa2luZCk7CgogICAgICAgICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZAogICAgICAgICAgICAgIC8vIGluIGFkYXB0ZXIuanMKICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MgPSBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZmlsdGVyKAogICAgICAgICAgICAgICAgICBmdW5jdGlvbihjb2RlYykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2RlYy5uYW1lICE9PSAncnR4JzsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSBbewogICAgICAgICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMikgKiAxMDAxCiAgICAgICAgICAgICAgfV07CgogICAgICAgICAgICAgIHJ0cFJlY2VpdmVyID0gbmV3IFJUQ1J0cFJlY2VpdmVyKHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwga2luZCk7CgogICAgICAgICAgICAgIHRyYWNrID0gcnRwUmVjZWl2ZXIudHJhY2s7CiAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlcl0pOwogICAgICAgICAgICAgIC8vIEZJWE1FOiBub3QgY29ycmVjdCB3aGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBzdHJlYW1zIGJ1dCB0aGF0IGlzCiAgICAgICAgICAgICAgLy8gbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gdGhpcyBzaGltLgogICAgICAgICAgICAgIHN0cmVhbS5hZGRUcmFjayh0cmFjayk7CgogICAgICAgICAgICAgIC8vIEZJWE1FOiBsb29rIGF0IGRpcmVjdGlvbi4KICAgICAgICAgICAgICBpZiAoc2VsZi5sb2NhbFN0cmVhbXMubGVuZ3RoID4gMCAmJgogICAgICAgICAgICAgICAgICBzZWxmLmxvY2FsU3RyZWFtc1swXS5nZXRUcmFja3MoKS5sZW5ndGggPj0gc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGxvY2FsVHJhY2s7CiAgICAgICAgICAgICAgICBpZiAoa2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICAgICAgICBsb2NhbFRyYWNrID0gc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0QXVkaW9UcmFja3MoKVswXTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2luZCA9PT0gJ3ZpZGVvJykgewogICAgICAgICAgICAgICAgICBsb2NhbFRyYWNrID0gc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0VmlkZW9UcmFja3MoKVswXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsb2NhbFRyYWNrKSB7CiAgICAgICAgICAgICAgICAgIHJ0cFNlbmRlciA9IG5ldyBSVENSdHBTZW5kZXIobG9jYWxUcmFjaywKICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSA9IHsKICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyOiB0cmFuc3BvcnRzLmljZUdhdGhlcmVyLAogICAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmljZVRyYW5zcG9ydCwKICAgICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwKICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzOiBsb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgICAgICAgIHJlbW90ZUNhcGFiaWxpdGllczogcmVtb3RlQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgcnRwU2VuZGVyOiBydHBTZW5kZXIsCiAgICAgICAgICAgICAgICBydHBSZWNlaXZlcjogcnRwUmVjZWl2ZXIsCiAgICAgICAgICAgICAgICBraW5kOiBraW5kLAogICAgICAgICAgICAgICAgbWlkOiBtaWQsCiAgICAgICAgICAgICAgICBjbmFtZTogY25hbWUsCiAgICAgICAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOiBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLAogICAgICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczogcmVjdkVuY29kaW5nUGFyYW1ldGVycwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFJlY2VpdmVyIG5vdy4gVGhlIFJUUFNlbmRlciBpcyBzdGFydGVkIGluCiAgICAgICAgICAgICAgLy8gc2V0TG9jYWxEZXNjcmlwdGlvbi4KICAgICAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLAogICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5Jyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicgJiYgIXJlamVjdGVkKSB7CiAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICAgICAgICBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgICAgIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDsKICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDsKICAgICAgICAgICAgICBydHBTZW5kZXIgPSB0cmFuc2NlaXZlci5ydHBTZW5kZXI7CiAgICAgICAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID0KICAgICAgICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPQogICAgICAgICAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM7CiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uY25hbWUgPSBjbmFtZTsKCiAgICAgICAgICAgICAgaWYgKChpc0ljZUxpdGUgfHwgaXNDb21wbGV0ZSkgJiYgY2FuZHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhjYW5kcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghc2VsZi51c2luZ0J1bmRsZSB8fCBzZHBNTGluZUluZGV4ID09PSAwKSB7CiAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsCiAgICAgICAgICAgICAgICAgICAgJ2NvbnRyb2xsaW5nJyk7CiAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdyZWN2b25seScsCiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpOwoKICAgICAgICAgICAgICBpZiAocnRwUmVjZWl2ZXIgJiYKICAgICAgICAgICAgICAgICAgKGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpKSB7CiAgICAgICAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrOwogICAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlcl0pOwogICAgICAgICAgICAgICAgc3RyZWFtLmFkZFRyYWNrKHRyYWNrKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gRklYTUU6IGFjdHVhbGx5IHRoZSByZWNlaXZlciBzaG91bGQgYmUgY3JlYXRlZCBsYXRlci4KICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXMucmVtb3RlRGVzY3JpcHRpb24gPSB7CiAgICAgICAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsCiAgICAgICAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwCiAgICAgICAgICB9OwogICAgICAgICAgc3dpdGNoIChkZXNjcmlwdGlvbi50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ29mZmVyJzoKICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1yZW1vdGUtb2ZmZXInKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnYW5zd2VyJzoKICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgdHlwZSAiJyArIGRlc2NyaXB0aW9uLnR5cGUgKwogICAgICAgICAgICAgICAgICAnIicpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGgpIHsKICAgICAgICAgICAgc2VsZi5yZW1vdGVTdHJlYW1zLnB1c2goc3RyZWFtKTsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTsKICAgICAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07CiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgICBpZiAoc2VsZi5vbmFkZHN0cmVhbSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYub25hZGRzdHJlYW0oZXZlbnQpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZWNlaXZlckxpc3QuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICB2YXIgdHJhY2sgPSBpdGVtWzBdOwogICAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyID0gaXRlbVsxXTsKICAgICAgICAgICAgICAgIHZhciB0cmFja0V2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpOwogICAgICAgICAgICAgICAgdHJhY2tFdmVudC50cmFjayA9IHRyYWNrOwogICAgICAgICAgICAgICAgdHJhY2tFdmVudC5yZWNlaXZlciA9IHJlY2VpdmVyOwogICAgICAgICAgICAgICAgdHJhY2tFdmVudC5zdHJlYW1zID0gW3N0cmVhbV07CiAgICAgICAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQodHJhY2tFdmVudCk7CiAgICAgICAgICAgICAgICBpZiAoc2VsZi5vbnRyYWNrICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub250cmFjayh0cmFja0V2ZW50KTsKICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzFdLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHsKICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIC8qIG5vdCB5ZXQKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgICovCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCkgewogICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyBGSVhNRTogY2xlYW4gdXAgdHJhY2tzLCBsb2NhbCBzdHJlYW1zLCByZW1vdGUgc3RyZWFtcywgZXRjCiAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdjbG9zZWQnKTsKICAgIH07CgogICAgLy8gVXBkYXRlIHRoZSBzaWduYWxpbmcgc3RhdGUuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVTaWduYWxpbmdTdGF0ZSA9CiAgICAgICAgZnVuY3Rpb24obmV3U3RhdGUpIHsKICAgICAgICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICBpZiAodGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlICE9PSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMub25zaWduYWxpbmdzdGF0ZWNoYW5nZShldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAvLyBEZXRlcm1pbmUgd2hldGhlciB0byBmaXJlIHRoZSBuZWdvdGlhdGlvbm5lZWRlZCBldmVudC4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkID0KICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgIC8vIEZpcmUgYXdheSAoZm9yIG5vdykuCiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJyk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgaWYgKHRoaXMub25uZWdvdGlhdGlvbm5lZWRlZCAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQoZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9uIHN0YXRlLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIG5ld1N0YXRlOwogICAgICB2YXIgc3RhdGVzID0gewogICAgICAgICduZXcnOiAwLAogICAgICAgIGNsb3NlZDogMCwKICAgICAgICBjb25uZWN0aW5nOiAwLAogICAgICAgIGNoZWNraW5nOiAwLAogICAgICAgIGNvbm5lY3RlZDogMCwKICAgICAgICBjb21wbGV0ZWQ6IDAsCiAgICAgICAgZmFpbGVkOiAwCiAgICAgIH07CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0YXRlXSsrOwogICAgICAgIHN0YXRlc1t0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0YXRlXSsrOwogICAgICB9KTsKICAgICAgLy8gSUNFVHJhbnNwb3J0LmNvbXBsZXRlZCBhbmQgY29ubmVjdGVkIGFyZSB0aGUgc2FtZSBmb3IgdGhpcyBwdXJwb3NlLgogICAgICBzdGF0ZXMuY29ubmVjdGVkICs9IHN0YXRlcy5jb21wbGV0ZWQ7CgogICAgICBuZXdTdGF0ZSA9ICduZXcnOwogICAgICBpZiAoc3RhdGVzLmZhaWxlZCA+IDApIHsKICAgICAgICBuZXdTdGF0ZSA9ICdmYWlsZWQnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5jb25uZWN0aW5nID4gMCB8fCBzdGF0ZXMuY2hlY2tpbmcgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGluZyc7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmRpc2Nvbm5lY3RlZCA+IDApIHsKICAgICAgICBuZXdTdGF0ZSA9ICdkaXNjb25uZWN0ZWQnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5uZXcgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnbmV3JzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGVkID4gMCB8fCBzdGF0ZXMuY29tcGxldGVkID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RlZCc7CiAgICAgIH0KCiAgICAgIGlmIChuZXdTdGF0ZSAhPT0gc2VsZi5pY2VDb25uZWN0aW9uU3RhdGUpIHsKICAgICAgICBzZWxmLmljZUNvbm5lY3Rpb25TdGF0ZSA9IG5ld1N0YXRlOwogICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyk7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICBpZiAodGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSAhPT0gbnVsbCkgewogICAgICAgICAgdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZShldmVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXIgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBpZiAodGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcmVhdGVPZmZlciBjYWxsZWQgd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIG9mZmVyLicpOwogICAgICB9CiAgICAgIHZhciBvZmZlck9wdGlvbnM7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICBvZmZlck9wdGlvbnMgPSBhcmd1bWVudHNbMF07CiAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMykgewogICAgICAgIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1syXTsKICAgICAgfQoKICAgICAgdmFyIHRyYWNrcyA9IFtdOwogICAgICB2YXIgbnVtQXVkaW9UcmFja3MgPSAwOwogICAgICB2YXIgbnVtVmlkZW9UcmFja3MgPSAwOwogICAgICAvLyBEZWZhdWx0IHRvIHNlbmRyZWN2LgogICAgICBpZiAodGhpcy5sb2NhbFN0cmVhbXMubGVuZ3RoKSB7CiAgICAgICAgbnVtQXVkaW9UcmFja3MgPSB0aGlzLmxvY2FsU3RyZWFtc1swXS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aDsKICAgICAgICBudW1WaWRlb1RyYWNrcyA9IHRoaXMubG9jYWxTdHJlYW1zWzBdLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoOwogICAgICB9CiAgICAgIC8vIERldGVybWluZSBudW1iZXIgb2YgYXVkaW8gYW5kIHZpZGVvIHRyYWNrcyB3ZSBuZWVkIHRvIHNlbmQvcmVjdi4KICAgICAgaWYgKG9mZmVyT3B0aW9ucykgewogICAgICAgIC8vIFJlamVjdCBDaHJvbWUgbGVnYWN5IGNvbnN0cmFpbnRzLgogICAgICAgIGlmIChvZmZlck9wdGlvbnMubWFuZGF0b3J5IHx8IG9mZmVyT3B0aW9ucy5vcHRpb25hbCkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICAgICAnTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLicpOwogICAgICAgIH0KICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgbnVtQXVkaW9UcmFja3MgPSBvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbzsKICAgICAgICB9CiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG51bVZpZGVvVHJhY2tzID0gb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmxvY2FsU3RyZWFtcy5sZW5ndGgpIHsKICAgICAgICAvLyBQdXNoIGxvY2FsIHN0cmVhbXMuCiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXNbMF0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgdHJhY2tzLnB1c2goewogICAgICAgICAgICBraW5kOiB0cmFjay5raW5kLAogICAgICAgICAgICB0cmFjazogdHJhY2ssCiAgICAgICAgICAgIHdhbnRSZWNlaXZlOiB0cmFjay5raW5kID09PSAnYXVkaW8nID8KICAgICAgICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID4gMCA6IG51bVZpZGVvVHJhY2tzID4gMAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICBudW1BdWRpb1RyYWNrcy0tOwogICAgICAgICAgfSBlbHNlIGlmICh0cmFjay5raW5kID09PSAndmlkZW8nKSB7CiAgICAgICAgICAgIG51bVZpZGVvVHJhY2tzLS07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gQ3JlYXRlIE0tbGluZXMgZm9yIHJlY3Zvbmx5IHN0cmVhbXMuCiAgICAgIHdoaWxlIChudW1BdWRpb1RyYWNrcyA+IDAgfHwgbnVtVmlkZW9UcmFja3MgPiAwKSB7CiAgICAgICAgaWYgKG51bUF1ZGlvVHJhY2tzID4gMCkgewogICAgICAgICAgdHJhY2tzLnB1c2goewogICAgICAgICAgICBraW5kOiAnYXVkaW8nLAogICAgICAgICAgICB3YW50UmVjZWl2ZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBudW1BdWRpb1RyYWNrcy0tOwogICAgICAgIH0KICAgICAgICBpZiAobnVtVmlkZW9UcmFja3MgPiAwKSB7CiAgICAgICAgICB0cmFja3MucHVzaCh7CiAgICAgICAgICAgIGtpbmQ6ICd2aWRlbycsCiAgICAgICAgICAgIHdhbnRSZWNlaXZlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIG51bVZpZGVvVHJhY2tzLS07CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUoKTsKICAgICAgdmFyIHRyYW5zY2VpdmVycyA9IFtdOwogICAgICB0cmFja3MuZm9yRWFjaChmdW5jdGlvbihtbGluZSwgc2RwTUxpbmVJbmRleCkgewogICAgICAgIC8vIEZvciBlYWNoIHRyYWNrLCBjcmVhdGUgYW4gaWNlIGdhdGhlcmVyLCBpY2UgdHJhbnNwb3J0LAogICAgICAgIC8vIGR0bHMgdHJhbnNwb3J0LCBwb3RlbnRpYWxseSBydHBzZW5kZXIgYW5kIHJ0cHJlY2VpdmVyLgogICAgICAgIHZhciB0cmFjayA9IG1saW5lLnRyYWNrOwogICAgICAgIHZhciBraW5kID0gbWxpbmUua2luZDsKICAgICAgICB2YXIgbWlkID0gU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7CgogICAgICAgIHZhciB0cmFuc3BvcnRzID0gc2VsZi51c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCA/IHsKICAgICAgICAgIGljZUdhdGhlcmVyOiB0cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIsCiAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQsCiAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydAogICAgICAgIH0gOiBzZWxmLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyhtaWQsIHNkcE1MaW5lSW5kZXgpOwoKICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpOwogICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZAogICAgICAgIC8vIGluIGFkYXB0ZXIuanMKICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MgPSBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZmlsdGVyKAogICAgICAgICAgICBmdW5jdGlvbihjb2RlYykgewogICAgICAgICAgICAgIHJldHVybiBjb2RlYy5uYW1lICE9PSAncnR4JzsKICAgICAgICAgICAgfSk7CiAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHsKICAgICAgICAgIC8vIHdvcmsgYXJvdW5kIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD02NTUyCiAgICAgICAgICAvLyBieSBhZGRpbmcgbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQ9MQogICAgICAgICAgaWYgKGNvZGVjLm5hbWUgPT09ICdIMjY0JyAmJgogICAgICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNbJ2xldmVsLWFzeW1tZXRyeS1hbGxvd2VkJ10gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzWydsZXZlbC1hc3ltbWV0cnktYWxsb3dlZCddID0gJzEnOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB2YXIgcnRwU2VuZGVyOwogICAgICAgIHZhciBydHBSZWNlaXZlcjsKCiAgICAgICAgLy8gZ2VuZXJhdGUgYW4gc3NyYyBub3csIHRvIGJlIHVzZWQgbGF0ZXIgaW4gcnRwU2VuZGVyLnNlbmQKICAgICAgICB2YXIgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IFt7CiAgICAgICAgICBzc3JjOiAoMiAqIHNkcE1MaW5lSW5kZXggKyAxKSAqIDEwMDEKICAgICAgICB9XTsKICAgICAgICBpZiAodHJhY2spIHsKICAgICAgICAgIHJ0cFNlbmRlciA9IG5ldyBSVENSdHBTZW5kZXIodHJhY2ssIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobWxpbmUud2FudFJlY2VpdmUpIHsKICAgICAgICAgIHJ0cFJlY2VpdmVyID0gbmV3IFJUQ1J0cFJlY2VpdmVyKHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwga2luZCk7CiAgICAgICAgfQoKICAgICAgICB0cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNwb3J0cy5pY2VHYXRoZXJlciwKICAgICAgICAgIGljZVRyYW5zcG9ydDogdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQsCiAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllczogbG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IG51bGwsCiAgICAgICAgICBydHBTZW5kZXI6IHJ0cFNlbmRlciwKICAgICAgICAgIHJ0cFJlY2VpdmVyOiBydHBSZWNlaXZlciwKICAgICAgICAgIGtpbmQ6IGtpbmQsCiAgICAgICAgICBtaWQ6IG1pZCwKICAgICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6IHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMsCiAgICAgICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOiBudWxsCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlKSB7CiAgICAgICAgc2RwICs9ICdhPWdyb3VwOkJVTkRMRSAnICsgdHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbih0KSB7CiAgICAgICAgICByZXR1cm4gdC5taWQ7CiAgICAgICAgfSkuam9pbignICcpICsgJ1xyXG4nOwogICAgICB9CiAgICAgIHRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKG1saW5lLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgdmFyIHRyYW5zY2VpdmVyID0gdHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdOwogICAgICAgIHNkcCArPSBTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbih0cmFuc2NlaXZlciwKICAgICAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsICdvZmZlcicsIHNlbGYubG9jYWxTdHJlYW1zWzBdKTsKICAgICAgfSk7CgogICAgICB0aGlzLl9wZW5kaW5nT2ZmZXIgPSB0cmFuc2NlaXZlcnM7CiAgICAgIHZhciBkZXNjID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJ29mZmVyJywKICAgICAgICBzZHA6IHNkcAogICAgICB9KTsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1swXSwgMCwgZGVzYyk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKCk7CiAgICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlKSB7CiAgICAgICAgc2RwICs9ICdhPWdyb3VwOkJVTkRMRSAnICsgdGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgIHJldHVybiB0Lm1pZDsKICAgICAgICB9KS5qb2luKCcgJykgKyAnXHJcbic7CiAgICAgIH0KICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIGlmICh0cmFuc2NlaXZlci5pc0RhdGFjaGFubmVsKSB7CiAgICAgICAgICBzZHAgKz0gJ209YXBwbGljYXRpb24gMCBEVExTL1NDVFAgNTAwMFxyXG4nICsKICAgICAgICAgICAgICAnYz1JTiBJUDQgMC4wLjAuMFxyXG4nICsKICAgICAgICAgICAgICAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcclxuJzsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuCiAgICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IHNlbGYuX2dldENvbW1vbkNhcGFiaWxpdGllcygKICAgICAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyk7CgogICAgICAgIHNkcCArPSBTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbih0cmFuc2NlaXZlciwgY29tbW9uQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAnYW5zd2VyJywgc2VsZi5sb2NhbFN0cmVhbXNbMF0pOwogICAgICB9KTsKCiAgICAgIHZhciBkZXNjID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJ2Fuc3dlcicsCiAgICAgICAgc2RwOiBzZHAKICAgICAgfSk7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChhcmd1bWVudHNbMF0sIDAsIGRlc2MpOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzYyk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7CiAgICAgIGlmICghY2FuZGlkYXRlKSB7CiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7IGorKykgewogICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnNbal0uaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSk7CiAgICAgICAgICBpZiAodGhpcy51c2luZ0J1bmRsZSkgewogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBtTGluZUluZGV4ID0gY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXg7CiAgICAgICAgaWYgKGNhbmRpZGF0ZS5zZHBNaWQpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNjZWl2ZXJzW2ldLm1pZCA9PT0gY2FuZGlkYXRlLnNkcE1pZCkgewogICAgICAgICAgICAgIG1MaW5lSW5kZXggPSBpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJzW21MaW5lSW5kZXhdOwogICAgICAgIGlmICh0cmFuc2NlaXZlcikgewogICAgICAgICAgdmFyIGNhbmQgPSBPYmplY3Qua2V5cyhjYW5kaWRhdGUuY2FuZGlkYXRlKS5sZW5ndGggPiAwID8KICAgICAgICAgICAgICBTRFBVdGlscy5wYXJzZUNhbmRpZGF0ZShjYW5kaWRhdGUuY2FuZGlkYXRlKSA6IHt9OwogICAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS4KICAgICAgICAgIGlmIChjYW5kLnByb3RvY29sID09PSAndGNwJyAmJiAoY2FuZC5wb3J0ID09PSAwIHx8IGNhbmQucG9ydCA9PT0gOSkpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgICAgLy8gSWdub3JlIFJUQ1AgY2FuZGlkYXRlcywgd2UgYXNzdW1lIFJUQ1AtTVVYLgogICAgICAgICAgaWYgKGNhbmQuY29tcG9uZW50ICE9PSAnMScpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZShjYW5kKTsKCiAgICAgICAgICAvLyB1cGRhdGUgdGhlIHJlbW90ZURlc2NyaXB0aW9uLgogICAgICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyh0aGlzLnJlbW90ZURlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICBzZWN0aW9uc1ttTGluZUluZGV4ICsgMV0gKz0gKGNhbmQudHlwZSA/IGNhbmRpZGF0ZS5jYW5kaWRhdGUudHJpbSgpCiAgICAgICAgICAgICAgOiAnYT1lbmQtb2YtY2FuZGlkYXRlcycpICsgJ1xyXG4nOwogICAgICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChhcmd1bWVudHNbMV0sIDApOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgcHJvbWlzZXMgPSBbXTsKICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIFsncnRwU2VuZGVyJywgJ3J0cFJlY2VpdmVyJywgJ2ljZUdhdGhlcmVyJywgJ2ljZVRyYW5zcG9ydCcsCiAgICAgICAgICAgICdkdGxzVHJhbnNwb3J0J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXJbbWV0aG9kXSkgewogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0cmFuc2NlaXZlclttZXRob2RdLmdldFN0YXRzKCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nICYmCiAgICAgICAgICBhcmd1bWVudHNbMV07CiAgICAgIHZhciBmaXhTdGF0c1R5cGUgPSBmdW5jdGlvbihzdGF0KSB7CiAgICAgICAgc3RhdC50eXBlID0gewogICAgICAgICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJywKICAgICAgICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJywKICAgICAgICAgIGNhbmRpZGF0ZXBhaXI6ICdjYW5kaWRhdGUtcGFpcicsCiAgICAgICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsCiAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgICAgIH1bc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7CiAgICAgICAgcmV0dXJuIHN0YXQ7CiAgICAgIH07CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgICAgIHZhciByZXN1bHRzID0gbmV3IE1hcCgpOwogICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKHJlcykgewogICAgICAgICAgcmVzLmZvckVhY2goZnVuY3Rpb24ocmVzdWx0KSB7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgICAgICAgICAgIHJlc3VsdFtpZF0udHlwZSA9IGZpeFN0YXRzVHlwZShyZXN1bHRbaWRdKTsKICAgICAgICAgICAgICByZXN1bHRzLnNldChpZCwgcmVzdWx0W2lkXSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoY2IpIHsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2IsIDAsIHJlc3VsdHMpOwogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9OwogIH0KfTsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbVBlZXJDb25uZWN0aW9uOiBlZGdlU2hpbS5zaGltUGVlckNvbm5lY3Rpb24sCiAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKQp9OwoKfSx7Ii4uL3V0aWxzIjoxMSwiLi9nZXR1c2VybWVkaWEiOjcsInNkcCI6MX1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiB7UGVybWlzc2lvbkRlbmllZEVycm9yOiAnTm90QWxsb3dlZEVycm9yJ31bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LAogICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTsKICAgICAgfQogICAgfTsKICB9OwoKICAvLyBnZXRVc2VyTWVkaWEgZXJyb3Igc2hpbS4KICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLgogICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oYykgewogICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykuY2F0Y2goZnVuY3Rpb24oZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoc2hpbUVycm9yXyhlKSk7CiAgICB9KTsKICB9Owp9OwoKfSx7fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qCiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICogIHRyZWUuCiAqLwogLyogZXNsaW50LWVudiBub2RlICovCid1c2Ugc3RyaWN0JzsKCnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJykuYnJvd3NlckRldGFpbHM7Cgp2YXIgZmlyZWZveFNoaW0gPSB7CiAgc2hpbU9uVHJhY2s6IGZ1bmN0aW9uKCkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiAhKCdvbnRyYWNrJyBpbgogICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb250cmFjaycsIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuX29udHJhY2s7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uKGYpIHsKICAgICAgICAgIGlmICh0aGlzLl9vbnRyYWNrKSB7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrKTsKICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayA9IGYpOwogICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRyYWNrOwogICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0cmFja307CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAoKICBzaGltU291cmNlT2JqZWN0OiBmdW5jdGlvbigpIHsKICAgIC8vIEZpcmVmb3ggaGFzIHN1cHBvcnRlZCBtb3pTcmNPYmplY3Qgc2luY2UgRkYyMiwgdW5wcmVmaXhlZCBpbiA0Mi4KICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgewogICAgICBpZiAod2luZG93LkhUTUxNZWRpYUVsZW1lbnQgJiYKICAgICAgICAhKCdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSkpIHsKICAgICAgICAvLyBTaGltIHRoZSBzcmNPYmplY3QgcHJvcGVydHksIG9uY2UsIHdoZW4gSFRNTE1lZGlhRWxlbWVudCBpcyBmb3VuZC4KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjT2JqZWN0JywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubW96U3JjT2JqZWN0OwogICAgICAgICAgfSwKICAgICAgICAgIHNldDogZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgICAgICAgIHRoaXMubW96U3JjT2JqZWN0ID0gc3RyZWFtOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiB8fAogICAgICAgIHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbikpIHsKICAgICAgcmV0dXJuOyAvLyBwcm9iYWJseSBtZWRpYS5wZWVyY29ubmVjdGlvbi5lbmFibGVkPWZhbHNlIGluIGFib3V0OmNvbmZpZwogICAgfQogICAgLy8gVGhlIFJUQ1BlZXJDb25uZWN0aW9uIG9iamVjdC4KICAgIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKSB7CiAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCAzOCkgewogICAgICAgICAgLy8gLnVybHMgaXMgbm90IHN1cHBvcnRlZCBpbiBGRiA8IDM4LgogICAgICAgICAgLy8gY3JlYXRlIFJUQ0ljZVNlcnZlcnMgd2l0aCBhIHNpbmdsZSB1cmwuCiAgICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlU2VydmVycykgewogICAgICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgc2VydmVyID0gcGNDb25maWcuaWNlU2VydmVyc1tpXTsKICAgICAgICAgICAgICBpZiAoc2VydmVyLmhhc093blByb3BlcnR5KCd1cmxzJykpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2VydmVyLnVybHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlcnZlciA9IHsKICAgICAgICAgICAgICAgICAgICB1cmw6IHNlcnZlci51cmxzW2pdCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXIudXJsc1tqXS5pbmRleE9mKCd0dXJuJykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBuZXdTZXJ2ZXIudXNlcm5hbWUgPSBzZXJ2ZXIudXNlcm5hbWU7CiAgICAgICAgICAgICAgICAgICAgbmV3U2VydmVyLmNyZWRlbnRpYWwgPSBzZXJ2ZXIuY3JlZGVudGlhbDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gobmV3U2VydmVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVyczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBtb3pSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7CiAgICAgIH07CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSBtb3pSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CgogICAgICAvLyB3cmFwIHN0YXRpYyBtZXRob2RzLiBDdXJyZW50bHkganVzdCBnZW5lcmF0ZUNlcnRpZmljYXRlLgogICAgICBpZiAobW96UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24gPSBtb3pSVENTZXNzaW9uRGVzY3JpcHRpb247CiAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgPSBtb3pSVENJY2VDYW5kaWRhdGU7CiAgICB9CgogICAgLy8gc2hpbSBhd2F5IG5lZWQgZm9yIG9ic29sZXRlIFJUQ0ljZUNhbmRpZGF0ZS9SVENTZXNzaW9uRGVzY3JpcHRpb24uCiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ10KICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID8KICAgICAgICAgICAgICAgIFJUQ0ljZUNhbmRpZGF0ZSA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpCiAgICB2YXIgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID0KICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlOwogICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIWFyZ3VtZW50c1swXSkgewogICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHsKICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CgogICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgdmFyIG1ha2VNYXBTdGF0cyA9IGZ1bmN0aW9uKHN0YXRzKSB7CiAgICAgIHZhciBtYXAgPSBuZXcgTWFwKCk7CiAgICAgIE9iamVjdC5rZXlzKHN0YXRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgIG1hcC5zZXQoa2V5LCBzdGF0c1trZXldKTsKICAgICAgICBtYXBba2V5XSA9IHN0YXRzW2tleV07CiAgICAgIH0pOwogICAgICByZXR1cm4gbWFwOwogICAgfTsKCiAgICB2YXIgbW9kZXJuU3RhdHNUeXBlcyA9IHsKICAgICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJywKICAgICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLAogICAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLAogICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsCiAgICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnCiAgICB9OwoKICAgIHZhciBuYXRpdmVHZXRTdGF0cyA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0czsKICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBvblN1Y2MsIG9uRXJyKSB7CiAgICAgIHJldHVybiBuYXRpdmVHZXRTdGF0cy5hcHBseSh0aGlzLCBbc2VsZWN0b3IgfHwgbnVsbF0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3RhdHMpIHsKICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDgpIHsKICAgICAgICAgICAgc3RhdHMgPSBtYWtlTWFwU3RhdHMoc3RhdHMpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1MyAmJiAhb25TdWNjKSB7CiAgICAgICAgICAgIC8vIFNoaW0gb25seSBwcm9taXNlIGdldFN0YXRzIHdpdGggc3BlYy1oeXBoZW5zIGluIHR5cGUgbmFtZXMKICAgICAgICAgICAgLy8gTGVhdmUgY2FsbGJhY2sgdmVyc2lvbiBhbG9uZTsgbWlzYyBvbGQgdXNlcyBvZiBmb3JFYWNoIGJlZm9yZSBNYXAKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXQpIHsKICAgICAgICAgICAgICAgIHN0YXQudHlwZSA9IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnVHlwZUVycm9yJykgewogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gQXZvaWQgVHlwZUVycm9yOiAidHlwZSIgaXMgcmVhZC1vbmx5LCBpbiBvbGQgdmVyc2lvbnMuIDM0LTQzaXNoCiAgICAgICAgICAgICAgc3RhdHMuZm9yRWFjaChmdW5jdGlvbihzdGF0LCBpKSB7CiAgICAgICAgICAgICAgICBzdGF0cy5zZXQoaSwgT2JqZWN0LmFzc2lnbih7fSwgc3RhdCwgewogICAgICAgICAgICAgICAgICB0eXBlOiBtb2Rlcm5TdGF0c1R5cGVzW3N0YXQudHlwZV0gfHwgc3RhdC50eXBlCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzdGF0czsKICAgICAgICB9KQogICAgICAgIC50aGVuKG9uU3VjYywgb25FcnIpOwogICAgfTsKICB9Cn07CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gewogIHNoaW1PblRyYWNrOiBmaXJlZm94U2hpbS5zaGltT25UcmFjaywKICBzaGltU291cmNlT2JqZWN0OiBmaXJlZm94U2hpbS5zaGltU291cmNlT2JqZWN0LAogIHNoaW1QZWVyQ29ubmVjdGlvbjogZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uLAogIHNoaW1HZXRVc2VyTWVkaWE6IHJlcXVpcmUoJy4vZ2V0dXNlcm1lZGlhJykKfTsKCn0seyIuLi91dGlscyI6MTEsIi4vZ2V0dXNlcm1lZGlhIjo5fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qCiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICogIHRyZWUuCiAqLwogLyogZXNsaW50LWVudiBub2RlICovCid1c2Ugc3RyaWN0JzsKCnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5sb2c7CnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJykuYnJvd3NlckRldGFpbHM7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiB7CiAgICAgICAgU2VjdXJpdHlFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgUGVybWlzc2lvbkRlbmllZEVycm9yOiAnTm90QWxsb3dlZEVycm9yJwogICAgICB9W2UubmFtZV0gfHwgZS5uYW1lLAogICAgICBtZXNzYWdlOiB7CiAgICAgICAgJ1RoZSBvcGVyYXRpb24gaXMgaW5zZWN1cmUuJzogJ1RoZSByZXF1ZXN0IGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSAnICsKICAgICAgICAndXNlciBhZ2VudCBvciB0aGUgcGxhdGZvcm0gaW4gdGhlIGN1cnJlbnQgY29udGV4dC4nCiAgICAgIH1bZS5tZXNzYWdlXSB8fCBlLm1lc3NhZ2UsCiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlOwogICAgICB9CiAgICB9OwogIH07CgogIC8vIGdldFVzZXJNZWRpYSBjb25zdHJhaW50cyBzaGltLgogIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgdmFyIGNvbnN0cmFpbnRzVG9GRjM3XyA9IGZ1bmN0aW9uKGMpIHsKICAgICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLnJlcXVpcmUpIHsKICAgICAgICByZXR1cm4gYzsKICAgICAgfQogICAgICB2YXIgcmVxdWlyZSA9IFtdOwogICAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciByID0gY1trZXldID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/CiAgICAgICAgICAgIGNba2V5XSA6IHtpZGVhbDogY1trZXldfTsKICAgICAgICBpZiAoci5taW4gIT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICByLm1heCAhPT0gdW5kZWZpbmVkIHx8IHIuZXhhY3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVxdWlyZS5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygci5leGFjdCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgci4gbWluID0gci5tYXggPSByLmV4YWN0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY1trZXldID0gci5leGFjdDsKICAgICAgICAgIH0KICAgICAgICAgIGRlbGV0ZSByLmV4YWN0OwogICAgICAgIH0KICAgICAgICBpZiAoci5pZGVhbCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBjLmFkdmFuY2VkID0gYy5hZHZhbmNlZCB8fCBbXTsKICAgICAgICAgIHZhciBvYyA9IHt9OwogICAgICAgICAgaWYgKHR5cGVvZiByLmlkZWFsID09PSAnbnVtYmVyJykgewogICAgICAgICAgICBvY1trZXldID0ge21pbjogci5pZGVhbCwgbWF4OiByLmlkZWFsfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9jW2tleV0gPSByLmlkZWFsOwogICAgICAgICAgfQogICAgICAgICAgYy5hZHZhbmNlZC5wdXNoKG9jKTsKICAgICAgICAgIGRlbGV0ZSByLmlkZWFsOwogICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhyKS5sZW5ndGgpIHsKICAgICAgICAgICAgZGVsZXRlIGNba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAocmVxdWlyZS5sZW5ndGgpIHsKICAgICAgICBjLnJlcXVpcmUgPSByZXF1aXJlOwogICAgICB9CiAgICAgIHJldHVybiBjOwogICAgfTsKICAgIGNvbnN0cmFpbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCAzOCkgewogICAgICBsb2dnaW5nKCdzcGVjOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgICAgaWYgKGNvbnN0cmFpbnRzLmF1ZGlvKSB7CiAgICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMuYXVkaW8pOwogICAgICB9CiAgICAgIGlmIChjb25zdHJhaW50cy52aWRlbykgewogICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0ZGMzdfKGNvbnN0cmFpbnRzLnZpZGVvKTsKICAgICAgfQogICAgICBsb2dnaW5nKCdmZjM3OiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgIH0KICAgIHJldHVybiBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIGZ1bmN0aW9uKGUpIHsKICAgICAgb25FcnJvcihzaGltRXJyb3JfKGUpKTsKICAgIH0pOwogIH07CgogIC8vIFJldHVybnMgdGhlIHJlc3VsdCBvZiBnZXRVc2VyTWVkaWEgYXMgYSBQcm9taXNlLgogIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGdldFVzZXJNZWRpYV8oY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgICB9KTsKICB9OwoKICAvLyBTaGltIGZvciBtZWRpYURldmljZXMgb24gb2xkZXIgdmVyc2lvbnMuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge2dldFVzZXJNZWRpYTogZ2V0VXNlck1lZGlhUHJvbWlzZV8sCiAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9LAogICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbigpIHsgfQogICAgfTsKICB9CiAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0KICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzIHx8IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICB2YXIgaW5mb3MgPSBbCiAgICAgICAgICAgIHtraW5kOiAnYXVkaW9pbnB1dCcsIGRldmljZUlkOiAnZGVmYXVsdCcsIGxhYmVsOiAnJywgZ3JvdXBJZDogJyd9LAogICAgICAgICAgICB7a2luZDogJ3ZpZGVvaW5wdXQnLCBkZXZpY2VJZDogJ2RlZmF1bHQnLCBsYWJlbDogJycsIGdyb3VwSWQ6ICcnfQogICAgICAgICAgXTsKICAgICAgICAgIHJlc29sdmUoaW5mb3MpOwogICAgICAgIH0pOwogICAgICB9OwoKICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQxKSB7CiAgICAvLyBXb3JrIGFyb3VuZCBodHRwOi8vYnVnemlsLmxhLzExNjk2NjUKICAgIHZhciBvcmdFbnVtZXJhdGVEZXZpY2VzID0KICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gb3JnRW51bWVyYXRlRGV2aWNlcygpLnRoZW4odW5kZWZpbmVkLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKGUubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InKSB7CiAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgfQogICAgICAgIHRocm93IGU7CiAgICAgIH0pOwogICAgfTsKICB9CiAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA0OSkgewogICAgdmFyIG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS4KICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjKSB7CiAgICAgIHJldHVybiBvcmlnR2V0VXNlck1lZGlhKGMpLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgICAgLy8gV29yayBhcm91bmQgaHR0cHM6Ly9idWd6aWwubGEvODAyMzI2CiAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fAogICAgICAgICAgICBjLnZpZGVvICYmICFzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHsKICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7CiAgICAgICAgICAgIHRyYWNrLnN0b3AoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVGhlIG9iamVjdCBjYW4gbm90IGJlIGZvdW5kIGhlcmUuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vdEZvdW5kRXJyb3InKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cmVhbTsKICAgICAgfSwgZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTsKICAgICAgfSk7CiAgICB9OwogIH0KICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA0NCkgewogICAgICByZXR1cm4gZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKTsKICAgIH0KICAgIC8vIFJlcGxhY2UgRmlyZWZveCA0NCsncyBkZXByZWNhdGlvbiB3YXJuaW5nIHdpdGggdW5wcmVmaXhlZCB2ZXJzaW9uLgogICAgY29uc29sZS53YXJuKCduYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIGhhcyBiZWVuIHJlcGxhY2VkIGJ5ICcgKwogICAgICAgICAgICAgICAgICduYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYScpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKTsKICB9Owp9OwoKfSx7Ii4uL3V0aWxzIjoxMX1dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCid1c2Ugc3RyaWN0JzsKdmFyIHNhZmFyaVNoaW0gPSB7CiAgLy8gVE9ETzogRHJBbGV4LCBzaG91bGQgYmUgaGVyZSwgZG91YmxlIGNoZWNrIGFnYWluc3QgTGF5b3V0VGVzdHMKICAvLyBzaGltT25UcmFjazogZnVuY3Rpb24oKSB7IH0sCgogIC8vIFRPRE86IG9uY2UgdGhlIGJhY2stZW5kIGZvciB0aGUgbWFjIHBvcnQgaXMgZG9uZSwgYWRkLgogIC8vIFRPRE86IGNoZWNrIGZvciB3ZWJraXRHVEsrCiAgLy8gc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsgfSwKCiAgc2hpbUdldFVzZXJNZWRpYTogZnVuY3Rpb24oKSB7CiAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYTsKICB9Cn07CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gewogIHNoaW1HZXRVc2VyTWVkaWE6IHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYQogIC8vIFRPRE8KICAvLyBzaGltT25UcmFjazogc2FmYXJpU2hpbS5zaGltT25UcmFjaywKICAvLyBzaGltUGVlckNvbm5lY3Rpb246IHNhZmFyaVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uCn07Cgp9LHt9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qCiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICogIHRyZWUuCiAqLwogLyogZXNsaW50LWVudiBub2RlICovCid1c2Ugc3RyaWN0JzsKCnZhciBsb2dEaXNhYmxlZF8gPSB0cnVlOwoKLy8gVXRpbGl0eSBtZXRob2RzLgp2YXIgdXRpbHMgPSB7CiAgZGlzYWJsZUxvZzogZnVuY3Rpb24oYm9vbCkgewogICAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHsKICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJndW1lbnQgdHlwZTogJyArIHR5cGVvZiBib29sICsKICAgICAgICAgICcuIFBsZWFzZSB1c2UgYSBib29sZWFuLicpOwogICAgfQogICAgbG9nRGlzYWJsZWRfID0gYm9vbDsKICAgIHJldHVybiAoYm9vbCkgPyAnYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkJyA6CiAgICAgICAgJ2FkYXB0ZXIuanMgbG9nZ2luZyBlbmFibGVkJzsKICB9LAoKICBsb2c6IGZ1bmN0aW9uKCkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7CiAgICAgIGlmIChsb2dEaXNhYmxlZF8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpOwogICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAgICogRXh0cmFjdCBicm93c2VyIHZlcnNpb24gb3V0IG9mIHRoZSBwcm92aWRlZCB1c2VyIGFnZW50IHN0cmluZy4KICAgKgogICAqIEBwYXJhbSB7IXN0cmluZ30gdWFzdHJpbmcgdXNlckFnZW50IHN0cmluZy4KICAgKiBAcGFyYW0geyFzdHJpbmd9IGV4cHIgUmVndWxhciBleHByZXNzaW9uIHVzZWQgYXMgbWF0Y2ggY3JpdGVyaWEuCiAgICogQHBhcmFtIHshbnVtYmVyfSBwb3MgcG9zaXRpb24gaW4gdGhlIHZlcnNpb24gc3RyaW5nIHRvIGJlIHJldHVybmVkLgogICAqIEByZXR1cm4geyFudW1iZXJ9IGJyb3dzZXIgdmVyc2lvbi4KICAgKi8KICBleHRyYWN0VmVyc2lvbjogZnVuY3Rpb24odWFzdHJpbmcsIGV4cHIsIHBvcykgewogICAgdmFyIG1hdGNoID0gdWFzdHJpbmcubWF0Y2goZXhwcik7CiAgICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IHBvcyAmJiBwYXJzZUludChtYXRjaFtwb3NdLCAxMCk7CiAgfSwKCiAgLyoqCiAgICogQnJvd3NlciBkZXRlY3Rvci4KICAgKgogICAqIEByZXR1cm4ge29iamVjdH0gcmVzdWx0IGNvbnRhaW5pbmcgYnJvd3NlciBhbmQgdmVyc2lvbgogICAqICAgICBwcm9wZXJ0aWVzLgogICAqLwogIGRldGVjdEJyb3dzZXI6IGZ1bmN0aW9uKCkgewogICAgLy8gUmV0dXJuZWQgcmVzdWx0IG9iamVjdC4KICAgIHZhciByZXN1bHQgPSB7fTsKICAgIHJlc3VsdC5icm93c2VyID0gbnVsbDsKICAgIHJlc3VsdC52ZXJzaW9uID0gbnVsbDsKCiAgICAvLyBGYWlsIGVhcmx5IGlmIGl0J3Mgbm90IGEgYnJvd3NlcgogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICF3aW5kb3cubmF2aWdhdG9yKSB7CiAgICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIGJyb3dzZXIuJzsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyBGaXJlZm94LgogICAgaWYgKG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHsKICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnZmlyZWZveCc7CiAgICAgIHJlc3VsdC52ZXJzaW9uID0gdGhpcy5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LAogICAgICAgICAgL0ZpcmVmb3hcLyhbMC05XSspXC4vLCAxKTsKCiAgICAvLyBhbGwgd2Via2l0LWJhc2VkIGJyb3dzZXJzCiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEpIHsKICAgICAgLy8gQ2hyb21lLCBDaHJvbWl1bSwgV2VidmlldywgT3BlcmEsIGFsbCB1c2UgdGhlIGNocm9tZSBzaGltIGZvciBub3cKICAgICAgaWYgKHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikgewogICAgICAgIHJlc3VsdC5icm93c2VyID0gJ2Nocm9tZSc7CiAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB0aGlzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgICAgICAvQ2hyb20oZXxpdW0pXC8oWzAtOV0rKVwuLywgMik7CgogICAgICAvLyBTYWZhcmkgb3IgdW5rbm93biB3ZWJraXQtYmFzZWQKICAgICAgLy8gZm9yIHRoZSB0aW1lIGJlaW5nIFNhZmFyaSBoYXMgc3VwcG9ydCBmb3IgTWVkaWFTdHJlYW1zIGJ1dCBub3Qgd2ViUlRDCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gU2FmYXJpIFVBIHN1YnN0cmluZ3Mgb2YgaW50ZXJlc3QgZm9yIHJlZmVyZW5jZToKICAgICAgICAvLyAtIHdlYmtpdCB2ZXJzaW9uOiAgICAgICAgICAgQXBwbGVXZWJLaXQvNjAyLjEuMjUgKGFsc28gdXNlZCBpbiBPcCxDcikKICAgICAgICAvLyAtIHNhZmFyaSBVSSB2ZXJzaW9uOiAgICAgICAgVmVyc2lvbi85LjAuMyAodW5pcXVlIHRvIFNhZmFyaSkKICAgICAgICAvLyAtIHNhZmFyaSBVSSB3ZWJraXQgdmVyc2lvbjogU2FmYXJpLzYwMS40LjQgKGFsc28gdXNlZCBpbiBPcCxDcikKICAgICAgICAvLwogICAgICAgIC8vIGlmIHRoZSB3ZWJraXQgdmVyc2lvbiBhbmQgc2FmYXJpIFVJIHdlYmtpdCB2ZXJzaW9ucyBhcmUgZXF1YWxzLAogICAgICAgIC8vIC4uLiB0aGlzIGlzIGEgc3RhYmxlIHZlcnNpb24uCiAgICAgICAgLy8KICAgICAgICAvLyBvbmx5IHRoZSBpbnRlcm5hbCB3ZWJraXQgdmVyc2lvbiBpcyBpbXBvcnRhbnQgdG9kYXkgdG8ga25vdyBpZgogICAgICAgIC8vIG1lZGlhIHN0cmVhbXMgYXJlIHN1cHBvcnRlZAogICAgICAgIC8vCiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cLyhcZCspLihcZCspLykpIHsKICAgICAgICAgIHJlc3VsdC5icm93c2VyID0gJ3NhZmFyaSc7CiAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgICAgL0FwcGxlV2ViS2l0XC8oWzAtOV0rKVwuLywgMSk7CgogICAgICAgIC8vIHVua25vd24gd2Via2l0LWJhc2VkIGJyb3dzZXIKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnVW5zdXBwb3J0ZWQgd2Via2l0LWJhc2VkIGJyb3dzZXIgJyArCiAgICAgICAgICAgICAgJ3dpdGggR1VNIHN1cHBvcnQgYnV0IG5vIFdlYlJUQyBzdXBwb3J0Lic7CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgfQoKICAgIC8vIEVkZ2UuCiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYKICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXC8oXGQrKS4oXGQrKSQvKSkgewogICAgICByZXN1bHQuYnJvd3NlciA9ICdlZGdlJzsKICAgICAgcmVzdWx0LnZlcnNpb24gPSB0aGlzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgICAgICAvRWRnZVwvKFxkKykuKFxkKykkLywgMik7CgogICAgLy8gRGVmYXVsdCBmYWxsdGhyb3VnaDogbm90IHN1cHBvcnRlZC4KICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIHN1cHBvcnRlZCBicm93c2VyLic7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9LAoKICAvLyBzaGltQ3JlYXRlT2JqZWN0VVJMIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltU291cmNlT2JqZWN0IHRvIGF2b2lkIGxvb3AuCgogIHNoaW1DcmVhdGVPYmplY3RVUkw6IGZ1bmN0aW9uKCkgewogICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LkhUTUxNZWRpYUVsZW1lbnQgJiYKICAgICAgICAgICdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSkpIHsKICAgICAgLy8gT25seSBzaGltIENyZWF0ZU9iamVjdFVSTCB1c2luZyBzcmNPYmplY3QgaWYgc3JjT2JqZWN0IGV4aXN0cy4KICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICB2YXIgbmF0aXZlQ3JlYXRlT2JqZWN0VVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTC5iaW5kKFVSTCk7CiAgICB2YXIgbmF0aXZlUmV2b2tlT2JqZWN0VVJMID0gVVJMLnJldm9rZU9iamVjdFVSTC5iaW5kKFVSTCk7CiAgICB2YXIgc3RyZWFtcyA9IG5ldyBNYXAoKSwgbmV3SWQgPSAwOwoKICAgIFVSTC5jcmVhdGVPYmplY3RVUkwgPSBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgaWYgKCdnZXRUcmFja3MnIGluIHN0cmVhbSkgewogICAgICAgIHZhciB1cmwgPSAncG9seWJsb2I6JyArICgrK25ld0lkKTsKICAgICAgICBzdHJlYW1zLnNldCh1cmwsIHN0cmVhbSk7CiAgICAgICAgY29uc29sZS5sb2coJ1VSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKSBpcyBkZXByZWNhdGVkISAnICsKICAgICAgICAgICAgICAgICAgICAnVXNlIGVsZW0uc3JjT2JqZWN0ID0gc3RyZWFtIGluc3RlYWQhJyk7CiAgICAgICAgcmV0dXJuIHVybDsKICAgICAgfQogICAgICByZXR1cm4gbmF0aXZlQ3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICB9OwogICAgVVJMLnJldm9rZU9iamVjdFVSTCA9IGZ1bmN0aW9uKHVybCkgewogICAgICBuYXRpdmVSZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgc3RyZWFtcy5kZWxldGUodXJsKTsKICAgIH07CgogICAgdmFyIGRzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NyYycpOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyYycsIHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gZHNjLmdldC5hcHBseSh0aGlzKTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbih1cmwpIHsKICAgICAgICB0aGlzLnNyY09iamVjdCA9IHN0cmVhbXMuZ2V0KHVybCkgfHwgbnVsbDsKICAgICAgICByZXR1cm4gZHNjLnNldC5hcHBseSh0aGlzLCBbdXJsXSk7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKCi8vIEV4cG9ydC4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgbG9nOiB1dGlscy5sb2csCiAgZGlzYWJsZUxvZzogdXRpbHMuZGlzYWJsZUxvZywKICBicm93c2VyRGV0YWlsczogdXRpbHMuZGV0ZWN0QnJvd3NlcigpLAogIGV4dHJhY3RWZXJzaW9uOiB1dGlscy5leHRyYWN0VmVyc2lvbiwKICBzaGltQ3JlYXRlT2JqZWN0VVJMOiB1dGlscy5zaGltQ3JlYXRlT2JqZWN0VVJMCn07Cgp9LHt9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOyAvKioKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KCnJlcXVpcmUoJ3dlYnJ0Yy1hZGFwdGVyJyk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgogIFRoZSBDb25uZWN0aW9uQ29udHJvbGxlciBoYXMgYSBnZW5lcmljIGRlc2lnbiBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGluIGJvdGggc3R1YnMuCiAgSXQgbWFuYWdlcyBhIHNpbmdsZSBEYXRhQ2hhbm5lbCwgaXQgaXMgbm90IHJlcXVlc3RpbmcgYWNjZXNzIHRvIG1lZGlhIGlucHV0LCBpLmUuCiAgZG9lcyBub3QgaGF2ZSBhdWRpby92aWRlbyBzdHJlYW1zLgoqKi8KdmFyIENvbm5lY3Rpb25Db250cm9sbGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbm5lY3Rpb25Db250cm9sbGVyKG15VXJsLCBzeW5jaGVyLCBjb25maWd1cmF0aW9uLCBjYWxsZXIpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0aW9uQ29udHJvbGxlcik7CgogICAgaWYgKCFteVVybCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgb3duIHVybCAobXlVcmwpIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFzeW5jaGVyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzeW5jaGVyIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWd1cmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgIHRoaXMuX2RvbWFpbiA9IHRoaXMuX2RpdmlkZVVSTChteVVybClbImRvbWFpbiJdOwogICAgdGhpcy5fb2JqZWN0RGVzY1VSTCA9ICdoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4nICsgdGhpcy5fZG9tYWluICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0Nvbm5lY3Rpb24nOwoKICAgIHRoaXMuX215VXJsID0gbXlVcmw7CiAgICB0aGlzLl9zeW5jaGVyID0gc3luY2hlcjsKICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwogICAgdGhpcy5fY2FsbGVyID0gY2FsbGVyOwogICAgdGhpcy5fZGF0YU9iamVjdE9ic2VydmVyOwogICAgdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyOwogICAgdGhpcy5fcGVlclVybDsKICAgIHRoaXMuX2RhdGFDaGFubmVsOwogICAgdGhpcy5fb25TdGF0dXNVcGRhdGU7CiAgICB0aGlzLl9yZW1vdGVSdW50aW1lVVJMOwoKICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uID0gdGhpcy5fY3JlYXRlUGVlckNvbm5lY3Rpb24oKTsKICB9CgogIC8vY3JlYXRlIGEgcGVlciBjb25uZWN0aW9uIHdpdGggaXRzIGV2ZW50IGhhbmRsZXJzCgoKICBfY3JlYXRlQ2xhc3MoQ29ubmVjdGlvbkNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICdfY3JlYXRlUGVlckNvbm5lY3Rpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVQZWVyQ29ubmVjdGlvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYyA9IHRoaXMuX3BlZXJDb25uZWN0aW9uOwogICAgICBpZiAoIXBjKSB7CiAgICAgICAgcGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24odGhpcy5fY29uZmlndXJhdGlvbik7CiAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiBjcmVhdGVkIFBlZXJDb25uZWN0aW9uIik7CgogICAgICAgIC8vIGFkZCBoYW5kbGVyIGZvciBkYXRhY2hhbm5lbCBjcmVhdGlvbiBmcm9tIHBlZXIgc2lkZQogICAgICAgIHBjLm9uZGF0YWNoYW5uZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogb25kYXRhY2hhbm5lbCAtPiByZW1vdGUgc2lkZSBoYXMgY3JlYXRlZCBhIGRhdGFjaGFubmVsIik7CiAgICAgICAgICBfdGhpcy5fZGF0YUNoYW5uZWwgPSBldmVudC5jaGFubmVsOwogICAgICAgICAgX3RoaXMuX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gZXZlbnQgaGFuZGxlciBmb3IgbG9jYWwgaWNlIGNhbmRpZGF0ZXMKICAgICAgICBwYy5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IGljZWNhbmRpZGF0ZWV2ZW50IG9jY3VyZWQ6ICIsIGUpOwogICAgICAgICAgaWYgKCFlLmNhbmRpZGF0ZSkgcmV0dXJuOwogICAgICAgICAgdmFyIGljZWNhbmRpZGF0ZSA9IHsKICAgICAgICAgICAgdHlwZTogJ2NhbmRpZGF0ZScsCiAgICAgICAgICAgIGNhbmRpZGF0ZTogZS5jYW5kaWRhdGUuY2FuZGlkYXRlLAogICAgICAgICAgICBzZHBNaWQ6IGUuY2FuZGlkYXRlLnNkcE1pZCwKICAgICAgICAgICAgc2RwTUxpbmVJbmRleDogZS5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleAogICAgICAgICAgfTsKICAgICAgICAgIC8vIHNlbmQgY2FuZGlkYXRlIHRvIHJlbW90ZSBwZWVyIGJ5IHB1c2hpbmcgaXQgdG8gdGhlIHJlcG9ydGVyIG9iamVjdAogICAgICAgICAgX3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlci5kYXRhLmljZUNhbmRpZGF0ZXMucHVzaChpY2VjYW5kaWRhdGUpOwogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHBjOwogICAgfQoKICAgIC8qKgogICAgUmVhY3QgdG8gdGhlIGdpdmVuIGludml0YXRpb24gZXZlbnQgYnkgc3Vic2NyaWJpbmcgdG8gdGhlIHByb3ZpZGVkIGludml0YXRpb25FdmVudC51cmwuCiAgICAqKi8KCiAgfSwgewogICAga2V5OiAnb2JzZXJ2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb2JzZXJ2ZShpbnZpdGF0aW9uRXZlbnQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLl9wZWVyVXJsID0gaW52aXRhdGlvbkV2ZW50LmZyb207CiAgICAgIHRoaXMuX3JlbW90ZVJ1bnRpbWVVUkwgPSBpbnZpdGF0aW9uRXZlbnQudmFsdWUucnVudGltZVVSTDsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzMi5fc3luY2hlci5zdWJzY3JpYmUoX3RoaXMyLl9vYmplY3REZXNjVVJMLCBpbnZpdGF0aW9uRXZlbnQudXJsKS50aGVuKGZ1bmN0aW9uIChkYXRhT2JqZWN0T2JzZXJ2ZXIpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnK1tQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIGdvdCBEYXRhIE9iamVjdCBPYnNlcnZlcicsIGRhdGFPYmplY3RPYnNlcnZlcik7CiAgICAgICAgICBfdGhpczIuX3NldHVwT2JzZXJ2ZXIoZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgICByZWplY3QoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICBDcmVhdGVzIGEgc3luY2hlciBvYmplY3QgYW5kIGludml0ZSB0aGUgZ2l2ZW4gcGVlclVybCB0byBzdWJzY3JpYmUgZm9yIGl0LgogICAgQWxzbyBjcmVhdGVzIHRoZSBsb2NhbCBvZmZlciwgcGVyZm9ybXMgc2V0TG9jYWxEZXNjcmlwdGlvbiBhbmQgcHVibGlzaGVzIHRoZSBvZmZlciB2aWEgdGhlIHJlcG9ydGVyIG9iamVjdC4KICAgICoqLwoKICB9LCB7CiAgICBrZXk6ICdyZXBvcnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcG9ydChwZWVyVXJsLCBvd25SdW50aW1lVXJsKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl9wZWVyVXJsKSB0aGlzLl9wZWVyVXJsID0gcGVlclVybDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgLy8gIGlmIHdlIGFyZSB0aGUgY2FsbGVyIChpLmUuIG5vIHJlcG9ydGVyIG9iamVjdCBwcmVzZW50IHlldCwgaW5pdGFsaXplIHRoZSBjcmVhdGlvbiBvZiB0aGUgRGF0YUNoYW5uZWwpCiAgICAgICAgaWYgKF90aGlzMy5fY2FsbGVyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHdlIGFyZSBpbiBjYWxsZXIgcm9sZSAtLT4gY3JlYXRlRGF0YUNoYW5uZWwgLi4uIik7CiAgICAgICAgICBfdGhpczMuX2RhdGFDaGFubmVsID0gX3RoaXMzLl9wZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgiUDJQQ2hhbm5lbCIsIHsgcmVsaWFibGU6IGZhbHNlIH0pOwogICAgICAgICAgY29uc29sZS5sb2coIlAyUDogZGF0YWNoYW5uZWwgb2JqZWN0IiwgX3RoaXMzLl9kYXRhQ2hhbm5lbCk7CiAgICAgICAgICBfdGhpczMuX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBpbml0aWFsIGRhdGEgZm9yIHJlcG9ydGVyIHN5bmMgb2JqZWN0CiAgICAgICAgdmFyIGRhdGFPYmplY3QgPSB7CiAgICAgICAgICBuYW1lOiAiUDJQQ29ubmVjdGlvbiIsCiAgICAgICAgICBzdGF0dXM6ICIiLAogICAgICAgICAgb3duZXI6IF90aGlzMy5fbXlVcmwsCiAgICAgICAgICBydW50aW1lVVJMOiBvd25SdW50aW1lVXJsLCAvLyBwdXQgdGhlIG93biBydW50aW1lVVJMIHRvIHRoZSBkYXRhT2JqZWN0IChhcyBkaXNjdXNzZWQgd2l0aCBQYXVsbykKICAgICAgICAgIGNvbm5lY3Rpb25EZXNjcmlwdGlvbjoge30sCiAgICAgICAgICBpY2VDYW5kaWRhdGVzOiBbXQogICAgICAgIH07CiAgICAgICAgLy8gZW5zdXJlIHRoaXMgdGhlIG9ialJlcG9ydGVyIG9iamVjdCBpcyBjcmVhdGVkIGJlZm9yZSB3ZSBjcmVhdGUgdGhlIG9mZmVyCiAgICAgICAgX3RoaXMzLl9zeW5jaGVyLmNyZWF0ZShfdGhpczMuX29iamVjdERlc2NVUkwsIFtfdGhpczMuX3BlZXJVcmxdLCBkYXRhT2JqZWN0KS50aGVuKGZ1bmN0aW9uIChvYmpSZXBvcnRlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSBDcmVhdGVkIFdlYlJUQyBPYmplY3QgUmVwb3J0ZXInLCBvYmpSZXBvcnRlcik7CgogICAgICAgICAgX3RoaXMzLl9kYXRhT2JqZWN0UmVwb3J0ZXIgPSBvYmpSZXBvcnRlcjsKICAgICAgICAgIF90aGlzMy5fZGF0YU9iamVjdFJlcG9ydGVyLm9uU3Vic2NyaXB0aW9uKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBldmVudC5hY2NlcHQoKTsgLy8gYWxsIHN1YnNjcmlwdGlvbiByZXF1ZXN0ZWQgYXJlIGFjY2VwdGVkCiAgICAgICAgICB9KTsKCiAgICAgICAgICB2YXIgY29uc3RyYWludHMgPSB7CiAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlQXVkaW86IGZhbHNlLAogICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiBmYWxzZQogICAgICAgICAgfTsKICAgICAgICAgIC8vIGVpdGhlciBpbnZva2UgY3JlYXRlT2ZmZXIgb3IgY3JlYXRlQW5zd2VyLCBkZXBlbmRpbmcgb24gdGhlIHJvbGVzCiAgICAgICAgICB2YXIgc2RwUHJvbWlzZSA9IF90aGlzMy5fY2FsbGVyID8gX3RoaXMzLl9wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihjb25zdHJhaW50cykgOiBfdGhpczMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcigpOwogICAgICAgICAgc2RwUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChzZHApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIFNEUCBjcmVhdGVkIiwgc2RwKTsKICAgICAgICAgICAgX3RoaXMzLl9wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oc2RwKSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gbG9jYWxEZXNjcmlwdGlvbiBzZXQgc3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgICAgICAgX3RoaXMzLl9kYXRhT2JqZWN0UmVwb3J0ZXIuZGF0YS5jb25uZWN0aW9uRGVzY3JpcHRpb24gPSBzZHA7CiAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJlamVjdCgic2V0dGluZyBvZiBsb2NhbERlc2NyaXB0aW9uIGZhaWxlZDogIiwgZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ29uTWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25NZXNzYWdlKGNhbGxiYWNrKSB7CiAgICAgIC8vIGFkZCB0aGUgbWVzc2FnZSBjYWxsYmFjawogICAgICB0aGlzLl9vbkRhdGFDaGFubmVsTWVzc2FnZSA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ29uU3RhdHVzVXBkYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblN0YXR1c1VwZGF0ZShjYWxsYmFjaykgewogICAgICAvLyBhZGQgYSBjb25uZWN0aW9uIHN0YXR1cyB1cGRhdGUgY2FsbGJhY2sKICAgICAgdGhpcy5fb25TdGF0dXNVcGRhdGUgPSBjYWxsYmFjazsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdzZW5kTWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UobSkgewogICAgICAvLyB0b2RvOiBvbmx5IHNlbmQgaWYgZGF0YSBjaGFubmVsIGlzIGNvbm5lY3RlZAogICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gLS0+IG91dGdvaW5nIG1zZzogIiwgbSk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLnNlbmQobSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnY2xlYW51cCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RSZXBvcnRlcjsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RPYnNlcnZlcjsKICAgICAgaWYgKHRoaXMuX2RhdGFDaGFubmVsKSB0aGlzLl9kYXRhQ2hhbm5lbC5jbG9zZSgpOwogICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24pIHRoaXMuX3BlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsID0gbnVsbDsKICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogJ19hZGREYXRhQ2hhbm5lbExpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxPcGVuKCk7CiAgICAgIH07CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5fb25EYXRhQ2hhbm5lbEVycm9yKGUpOwogICAgICB9OwogICAgICB0aGlzLl9kYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobSkgewogICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSA8LS0gaW5jb21pbmcgbXNnOiAiLCBtKTsKICAgICAgICBpZiAoX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZSkgX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZShtKTsKICAgICAgfTsKICAgICAgdGhpcy5fZGF0YUNoYW5uZWwub25jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxDbG9zZSgpOwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZXR1cE9ic2VydmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBPYnNlcnZlcihkYXRhT2JqZWN0T2JzZXJ2ZXIpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CgogICAgICB2YXIgcGVlckRhdGEgPSB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIuZGF0YTsKICAgICAgY29uc29sZS5pbmZvKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogX3NldHVwT2JzZXJ2ZXIgUGVlciBEYXRhOiIsIHBlZXJEYXRhKTsKCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnY29ubmVjdGlvbkRlc2NyaXB0aW9uJykpIHsKICAgICAgICB0aGlzLl9wcm9jZXNzUGVlckluZm9ybWF0aW9uKHBlZXJEYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnaWNlQ2FuZGlkYXRlcycpKSB7CiAgICAgICAgcGVlckRhdGEuaWNlQ2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpY2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogaGFuZGxlT2JzZXJ2ZXJPYmplY3QgZm9yIGljZSIsIGljZSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oaWNlKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gc2V0dXAgbGlzdGVuZXIgZm9yIGZ1dHVyZSBjaGFuZ2VzIG9uIHRoZSBvYnNlcnZlZCBkYXRhIG9iamVjdAogICAgICBkYXRhT2JqZWN0T2JzZXJ2ZXIub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogT2JzZXJ2ZXIgb24gY2hhbmdlIG1lc3NhZ2U6ICcsIGV2ZW50KTsKICAgICAgICAvLyB3ZSBuZWVkIHRvIHByb2Nlc3MgdGhlIGFuc3dlciBmcm9tIGV2ZW50LmRhdGEgYW5kIHRoZSBjYW5kaWRhdGVzIHdoaWNoIG1pZ2h0IHRyaWNrbGUKICAgICAgICAvLyBmcm9tIGV2ZW50LmRhdGFbMF0KICAgICAgICBpZiAoZXZlbnQuZGF0YVswXSkgewogICAgICAgICAgLy8gWzBdIHRoaXMgZG9lcyB0aGUgdHJpY2sgd2hlbiBpY2UgY2FuZGlkYXRlcyBhcmUgdHJpY2tsaW5nIDspCiAgICAgICAgICBjb25zb2xlLmxvZygnPj5ldmVudC5kYXRhWzBdJywgZXZlbnQuZGF0YVswXSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oZXZlbnQuZGF0YVswXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogPj5ldmVudCcsIGV2ZW50KTsKICAgICAgICAgIF90aGlzNS5fcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihldmVudC5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19wcm9jZXNzUGVlckluZm9ybWF0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihkYXRhKSB7CiAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246ICIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgaWYgKCF0aGlzLl9wZWVyQ29ubmVjdGlvbikgewogICAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246IG5vIFBlZXJDb25uZWN0aW9uIGV4aXN0aW5nIC0tPiBtYXliZSBpbiBkaXNjb25uZWN0aW5nIHByb2Nlc3MuIC0tPiBpZ25vcmluZyB0aGlzIHVwZGF0ZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ29mZmVyJyB8fCBkYXRhLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogUHJvY2VzcyBDb25uZWN0aW9uIERlc2NyaXB0aW9uOiAnLCBkYXRhKTsKICAgICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogcmVtb3RlIHN1Y2Nlc3MiKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiByZW1vdGUgZXJyb3I6ICIsIGUpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoZGF0YS5jYW5kaWRhdGUpIHsKICAgICAgICBjb25zb2xlLmluZm8oJ1Byb2Nlc3MgSWNlIENhbmRpZGF0ZTogJywgZGF0YSk7CiAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUoewogICAgICAgICAgY2FuZGlkYXRlOiBkYXRhLmNhbmRpZGF0ZQogICAgICAgIH0pKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsT3BlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRGF0YUNoYW5uZWxPcGVuKCkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgb3BlbmVkJyk7CiAgICAgIGlmICh0aGlzLl9vblN0YXR1c1VwZGF0ZSkgdGhpcy5fb25TdGF0dXNVcGRhdGUoImxpdmUiLCB1bmRlZmluZWQsIHRoaXMuX3JlbW90ZVJ1bnRpbWVVUkwpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsRXJyb3InLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRhdGFDaGFubmVsRXJyb3IoZSkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgZXJyb3I6ICcsIGUpOwogICAgICBpZiAodGhpcy5fb25TdGF0dXNVcGRhdGUpIHRoaXMuX29uU3RhdHVzVXBkYXRlKCJkaXNjb25uZWN0ZWQiLCAiIiArIGUpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsQ2xvc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRhdGFDaGFubmVsQ2xvc2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSBEYXRhQ2hhbm5lbCBjbG9zZWQ6ICcpOwogICAgICBpZiAodGhpcy5fb25TdGF0dXNVcGRhdGUpIHRoaXMuX29uU3RhdHVzVXBkYXRlKCJkaXNjb25uZWN0ZWQiLCAiY2xvc2VkIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkKICAgICAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAgICAgKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX2RpdmlkZVVSTCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RpdmlkZVVSTCh1cmwpIHsKCiAgICAgIC8vIGxldCByZSA9IC8oW2EtekEtWi1dKik/OlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIpKihcL1tcL1xkXHdcLi1dKikqKD86W1w/XSkqKC4rKSovZ2k7CiAgICAgIHZhciByZSA9IC8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpOwogICAgICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogICAgICB2YXIgcGFydHMgPSB1cmwucmVwbGFjZShyZSwgc3Vic3QpLnNwbGl0KCcsJyk7CgogICAgICAvLyBJZiB0aGUgdXJsIGhhcyBubyBwcm90b2NvbCwgdGhlIGRlZmF1bHQgcHJvdG9jb2wgc2V0IGlzIGh0dHBzCiAgICAgIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICAgICAgcGFydHNbMF0gPSAnaHR0cHMnOwogICAgICAgIHBhcnRzWzFdID0gdXJsOwogICAgICB9CgogICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgIHR5cGU6IHBhcnRzWzBdLAogICAgICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICAgICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgICAgIH07CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIENvbm5lY3Rpb25Db250cm9sbGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBDb25uZWN0aW9uQ29udHJvbGxlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsid2VicnRjLWFkYXB0ZXIiOjN9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCi8vIFRPRE86IGludGVncmF0ZSB0aGUgc3RhdHVzIGV2ZW50aW5nCgpleHBvcnRzLmRlZmF1bHQgPSBhY3RpdmF0ZTsKCnZhciBfU3luY2hlciA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcicpOwoKdmFyIF9Db25uZWN0aW9uQ29udHJvbGxlciA9IHJlcXVpcmUoJy4vQ29ubmVjdGlvbkNvbnRyb2xsZXInKTsKCnZhciBfQ29ubmVjdGlvbkNvbnRyb2xsZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29ubmVjdGlvbkNvbnRyb2xsZXIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKLyoqCiAqIFByb3RvU3R1YiBJbnRlcmZhY2UKICovCnZhciBQMlBIYW5kbGVyU3R1YiA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgICogSW5pdGlhbGlzZSB0aGUgcHJvdG9jb2wgc3R1YiBpbmNsdWRpbmcgYXMgaW5wdXQgcGFyYW1ldGVycyBpdHMgYWxsb2NhdGVkCiAgICogY29tcG9uZW50IHJ1bnRpbWUgdXJsLCB0aGUgcnVudGltZSBCVVMgcG9zdE1lc3NhZ2UgZnVuY3Rpb24gdG8gYmUgaW52b2tlZAogICAqIG9uIG1lc3NhZ2VzIHJlY2VpdmVkIGJ5IHRoZSBwcm90b2NvbCBzdHViIGFuZCByZXF1aXJlZCBjb25maWd1cmF0aW9uIHJldHJpZXZlZCBmcm9tIHByb3RvY29sU3R1YiBkZXNjcmlwdG9yLgogICAqIEBwYXJhbSAge1VSTC5ydW50aW1lUHJvdG9TdHViVVJMfSAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTAogICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbgogICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICAqLwogIGZ1bmN0aW9uIFAyUEhhbmRsZXJTdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIG1pbmlCdXMsIGNvbmZpZ3VyYXRpb24pIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFAyUEhhbmRsZXJTdHViKTsKCiAgICBpZiAoIXJ1bnRpbWVQcm90b1N0dWJVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIHJ1bnRpbWVQcm90b1N0dWJVUkwgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghbWluaUJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgYnVzIGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKCiAgICBjb25zb2xlLmxvZygnK1tQMlBIYW5kbGVyU3R1Yi5jb25zdHJ1Y3Rvcl0gY29uZmlnIGlzOiAnLCBjb25maWd1cmF0aW9uKTsKCiAgICB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgIHRoaXMuX3J1bnRpbWVVUkwgPSBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkw7CiAgICB0aGlzLl9jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjsKICAgIHRoaXMuX2J1cyA9IG1pbmlCdXM7CiAgICB0aGlzLl9idXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIF90aGlzLl9zZW5kQ2hhbm5lbE1zZyhtc2cpOwogICAgfSk7CgogICAgdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXJzID0ge307CgogICAgdGhpcy5fc3luY2hlciA9IG5ldyBfU3luY2hlci5TeW5jaGVyKHJ1bnRpbWVQcm90b1N0dWJVUkwsIG1pbmlCdXMsIGNvbmZpZ3VyYXRpb24pOwogICAgdGhpcy5fc3luY2hlci5vbk5vdGlmaWNhdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKCiAgICAgIGNvbnNvbGUubG9nKCcrW1AyUEhhbmRsZXJTdHViXSBPbiBTeW5jaGVyIE5vdGlmaWNhdGlvbjogJywgZXZlbnQpOwogICAgICBldmVudC5hY2soMjAwKTsKCiAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkgewoKICAgICAgICBjYXNlICdjcmVhdGUnOgoKICAgICAgICAgIC8vIGFzIGRpc2N1c3NlZCB3aXRoIFBhdWxvLCB3ZSBleHBlY3QgdGhlICJyZW1vdGVSdW50aW1lVVJMIiBhcyBmaWVsZCAicnVudGltZVVSTCIgaW4gdGhlIGluaXRpYWwgZGF0YU9iamVjdAogICAgICAgICAgLy8gZW1pdCB0aGUgImNyZWF0ZSIgZXZlbnQgYXMgcmVxdWVzdGVkIGluIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L2Rldi1wcm90b3N0dWJzL2lzc3Vlcy81CiAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygiY3JlYXRlIiwgdW5kZWZpbmVkLCBldmVudC52YWx1ZS5ydW50aW1lVVJMKTsKCiAgICAgICAgICBfdGhpcy5fY3JlYXRlQ29ubmVjdGlvbkNvbnRyb2xsZXIoZXZlbnQpLnRoZW4oZnVuY3Rpb24gKGNvbm5lY3Rpb25Db250cm9sbGVyKSB7CiAgICAgICAgICAgIF90aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcnNbZXZlbnQuZnJvbV0gPSBjb25uZWN0aW9uQ29udHJvbGxlcjsKICAgICAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIub25TdGF0dXNVcGRhdGUoZnVuY3Rpb24gKHN0YXR1cywgcmVhc29uLCByZW1vdGVSdW50aW1lVVJMKSB7CiAgICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoc3RhdHVzLCByZWFzb24sIHJlbW90ZVJ1bnRpbWVVUkwpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIub25NZXNzYWdlKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgX3RoaXMuX2RlbGl2ZXIobSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnZGVsZXRlJzoKICAgICAgICAgIC8vIFRPRE86IHF1ZXN0aW9uIGNvZGUgaW4gQ29ubmVjdG9yIC0tPiB0aGVyZSBpdCBkZWxldGVzIGFsbCBjb250cm9sbGVycyAtLT4gd2h5PwogICAgICAgICAgY29uc29sZS5sb2coIitbUDJQSGFuZGxlclN0dWJdIGRlbGV0aW5nIGNvbm5lY3Rpb24gaGFuZGxlciBmb3IgIiArIGV2ZW50LmZyb20pOwogICAgICAgICAgdmFyIGNvbm5lY3Rpb25Db250cm9sbGVyID0gX3RoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyc1tldmVudC5mcm9tXTsKCiAgICAgICAgICBpZiAoY29ubmVjdGlvbkNvbnRyb2xsZXIpIHsKICAgICAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIuY2xlYW51cCgpOwogICAgICAgICAgICBkZWxldGUgX3RoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyc1tldmVudC5mcm9tXTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICB9CiAgICB9KTsKICB9CgogIC8qKgogICAqIFRvIGRpc2Nvbm5lY3QgdGhlIHByb3RvY29sIHN0dWIuCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoUDJQSGFuZGxlclN0dWIsIFt7CiAgICBrZXk6ICdkaXNjb25uZWN0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIGNsZWFudXAgQUxMIGNvbm5lY3Rpb25Db250cm9sbGVycwogICAgICBPYmplY3Qua2V5cyh0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF90aGlzMi5fY29udHJvbGxlcnNba2V5XS5jbGVhbnVwKCk7OwogICAgICAgIGRlbGV0ZSBfdGhpczIuX2NvbnRyb2xsZXJzW2tleV07CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19jcmVhdGVDb25uZWN0aW9uQ29udHJvbGxlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUNvbm5lY3Rpb25Db250cm9sbGVyKGludml0YXRpb25FdmVudCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIGNvbm5lY3Rpb25Db250cm9sbGVyID0gbmV3IF9Db25uZWN0aW9uQ29udHJvbGxlcjIuZGVmYXVsdChfdGhpczMuX3J1bnRpbWVQcm90b1N0dWJVUkwsIF90aGlzMy5fc3luY2hlciwgX3RoaXMzLl9jb25maWd1cmF0aW9uLCBmYWxzZSk7CiAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIub2JzZXJ2ZShpbnZpdGF0aW9uRXZlbnQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coIitbUDJQSGFuZGxlclN0dWJdIG9ic2VydmVyIHNldHVwIHN1Y2Nlc3NmdWwiKTsKICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgcmVwb3J0ZXIgYXV0b21hdGljYWxseQogICAgICAgICAgY29ubmVjdGlvbkNvbnRyb2xsZXIucmVwb3J0KGludml0YXRpb25FdmVudC5mcm9tLCBfdGhpczMuX3J1bnRpbWVVUkwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiK1tQMlBIYW5kbGVyU3R1Yl0gcmVwb3J0ZXIgc2V0dXAgc3VjY2Vzc2Z1bCIpOwogICAgICAgICAgICBfdGhpczMuX3NlbmRTdGF0dXMoImluLXByb2dyZXNzIiwgdW5kZWZpbmVkLCBpbnZpdGF0aW9uRXZlbnQudmFsdWUucnVudGltZVVSTCk7CiAgICAgICAgICAgIHJlc29sdmUoY29ubmVjdGlvbkNvbnRyb2xsZXIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kQ2hhbm5lbE1zZycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRDaGFubmVsTXNnKG1zZykgewogICAgICBpZiAodGhpcy5fZmlsdGVyKG1zZykpIHsKICAgICAgICAvLyBUT0RPOiB2ZXJpZnk6IGlzIHRoaXMgc2VsZWN0aW9uIGNvcnJlY3Q/CiAgICAgICAgdmFyIGNvbm5lY3Rpb25Db250cm9sbGVyID0gdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXJzW21zZy50b107CiAgICAgICAgaWYgKGNvbm5lY3Rpb25Db250cm9sbGVyKSBjb25uZWN0aW9uQ29udHJvbGxlci5zZW5kTWVzc2FnZShKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kU3RhdHVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZFN0YXR1cyh2YWx1ZSwgcmVhc29uLCByZW1vdGVSdW50aW1lVVJMKSB7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgZnJvbTogdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICB0bzogdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCArICcvc3RhdHVzJywKICAgICAgICBib2R5OiB7CiAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmIChyZW1vdGVSdW50aW1lVVJMKSBtc2cuYm9keS5yZXNvdXJjZSA9IHJlbW90ZVJ1bnRpbWVVUkw7CgogICAgICBpZiAocmVhc29uKSB7CiAgICAgICAgbXNnLmJvZHkuZGVzYyA9IHJlYXNvbjsKICAgICAgfQogICAgICBjb25zb2xlLmxvZygiK1tQMlBIYW5kbGVyU3R1Yl0gc2VuZGluZyBzdGF0dXMgdXBkYXRlOiAiLCBtc2cpOwogICAgICB0aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0KCiAgICAvKioKICAgICAqIEZpbHRlciBtZXRob2QgdGhhdCBzaG91bGQgYmUgdXNlZCBmb3IgZXZlcnkgbWVzc2FnZXMgaW4gZGlyZWN0aW9uOiBQcm90b3N0dWIgLT4gTWVzc2FnZU5vZGUKICAgICAqIEBwYXJhbSAge01lc3NhZ2V9IG1zZyBPcmlnaW5hbCBtZXNzYWdlIGZyb20gdGhlIE1lc3NhZ2VCdXMKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgaXQncyB0byBiZSBkZWxpdmVyIGluIHRoZSBNZXNzYWdlTm9kZQogICAgICovCgogIH0sIHsKICAgIGtleTogJ19maWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgIC8vIHRvZG86IG9ubHkgdHJ5IHRvIHNlbmQgd2hlbiBjb25uZWN0ZWQgKGxpdmUgc3RhdHVzKQogICAgICBpZiAobXNnLmJvZHkgJiYgbXNnLmJvZHkudmlhID09PSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogTWV0aG9kIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZGVsaXZlciB0aGUgbWVzc2FnZSBpbiBkaXJlY3Rpb246IFByb3Rvc3R1YiAtPiBNZXNzYWdlQnVzIChjb3JlKQogICAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnIE9yaWdpbmFsIG1lc3NhZ2UgZnJvbSB0aGUgTWVzc2FnZU5vZGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfZGVsaXZlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGl2ZXIobXNnKSB7CgogICAgICBjb25zb2xlLmxvZygiK1tQMlBIYW5kbGVyU3R1Yl0gcG9zdGluZyBtZXNzYWdlIHRvIG1zZyBidXM6ICIsIG1zZyk7CiAgICAgIHZhciBtZXNzYWdlID0gSlNPTi5wYXJzZShtc2cuZGF0YSk7CgogICAgICBpZiAoIW1lc3NhZ2UuYm9keSkgbXNnLmJvZHkgPSB7fTsKCiAgICAgIG1lc3NhZ2UuYm9keS52aWEgPSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMOwogICAgICB0aGlzLl9idXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUDJQSGFuZGxlclN0dWI7Cn0oKTsKCmZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsKICByZXR1cm4gewogICAgbmFtZTogJ1AyUEhhbmRsZXJTdHViJywKICAgIGluc3RhbmNlOiBuZXcgUDJQSGFuZGxlclN0dWIodXJsLCBidXMsIGNvbmZpZykKICB9Owp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7Ii4vQ29ubmVjdGlvbkNvbnRyb2xsZXIiOjEyLCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjJ9XX0se30sWzEzXSkoMTMpCn0pOw==",
      "sourceCodeClassname": "P2PHandlerProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-c28037a6-8d59-ddbd-c208-d45c1334b92c2",
    "version": 0.7999999999999999,
    "description": "Description of P2PHandlerProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "P2PHandlerProtoStub",
    "configuration": {
      "iceServers": [
        {
          "urls": "stun:stun.voiparound.com"
        },
        {
          "urls": "stun:stun.voipbuster.com"
        },
        {
          "urls": "stun:stun.voipstunt.com"
        },
        {
          "urls": "stun:stun.voxgratia.org"
        },
        {
          "urls": "stun:stun.ekiga.net"
        },
        {
          "urls": "stun:stun.schlund.de"
        },
        {
          "urls": "stun:stun.iptel.org"
        },
        {
          "urls": "stun:stun.l.google.com:19302"
        },
        {
          "urls": "stun:stun1.l.google.com:19302"
        },
        {
          "urls": "stun:stun.ideasip.com"
        },
        {
          "urls": "stun:stun4.l.google.com:19302"
        },
        {
          "urls": "stun:stun2.l.google.com:19302"
        },
        {
          "urls": "stun:stun3.l.google.com:19302"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=tcp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=udp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:numb.viagenie.ca",
          "credential": "muazkh",
          "username": "webrtc@live.com"
        }
      ]
    },
    "messageSchemas": "",
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": "{ windowSandbox: true }",
    "interworking": false,
    "dataObjects": []
  },
  "P2PRequesterProtoStub": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CgovLyBTRFAgaGVscGVycy4KdmFyIFNEUFV0aWxzID0ge307CgovLyBHZW5lcmF0ZSBhbiBhbHBoYW51bWVyaWMgaWRlbnRpZmllciBmb3IgY25hbWUgb3IgbWlkcy4KLy8gVE9ETzogdXNlIFVVSURzIGluc3RlYWQ/IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2plZC85ODI4ODMKU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCk7Cn07CgovLyBUaGUgUlRDUCBDTkFNRSB1c2VkIGJ5IGFsbCBwZWVyY29ubmVjdGlvbnMgZnJvbSB0aGUgc2FtZSBKUy4KU0RQVXRpbHMubG9jYWxDTmFtZSA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwoKLy8gU3BsaXRzIFNEUCBpbnRvIGxpbmVzLCBkZWFsaW5nIHdpdGggYm90aCBDUkxGIGFuZCBMRi4KU0RQVXRpbHMuc3BsaXRMaW5lcyA9IGZ1bmN0aW9uKGJsb2IpIHsKICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHsKICAgIHJldHVybiBsaW5lLnRyaW0oKTsKICB9KTsKfTsKLy8gU3BsaXRzIFNEUCBpbnRvIHNlc3Npb25wYXJ0IGFuZCBtZWRpYXNlY3Rpb25zLiBFbnN1cmVzIENSTEYuClNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7CiAgdmFyIHBhcnRzID0gYmxvYi5zcGxpdCgnXG5tPScpOwogIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHsKICAgIHJldHVybiAoaW5kZXggPiAwID8gJ209JyArIHBhcnQgOiBwYXJ0KS50cmltKCkgKyAnXHJcbic7CiAgfSk7Cn07CgovLyBSZXR1cm5zIGxpbmVzIHRoYXQgc3RhcnQgd2l0aCBhIGNlcnRhaW4gcHJlZml4LgpTRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uKGJsb2IsIHByZWZpeCkgewogIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gbGluZS5pbmRleE9mKHByZWZpeCkgPT09IDA7CiAgfSk7Cn07CgovLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6Ci8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOAovLyBycG9ydCA1NTk5NiIKU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzOwogIC8vIFBhcnNlIGJvdGggdmFyaWFudHMuCiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTIpLnNwbGl0KCcgJyk7CiAgfSBlbHNlIHsKICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7CiAgfQoKICB2YXIgY2FuZGlkYXRlID0gewogICAgZm91bmRhdGlvbjogcGFydHNbMF0sCiAgICBjb21wb25lbnQ6IHBhcnRzWzFdLAogICAgcHJvdG9jb2w6IHBhcnRzWzJdLnRvTG93ZXJDYXNlKCksCiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSwKICAgIGlwOiBwYXJ0c1s0XSwKICAgIHBvcnQ6IHBhcnNlSW50KHBhcnRzWzVdLCAxMCksCiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnCiAgICB0eXBlOiBwYXJ0c1s3XQogIH07CgogIGZvciAodmFyIGkgPSA4OyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDIpIHsKICAgIHN3aXRjaCAocGFydHNbaV0pIHsKICAgICAgY2FzZSAncmFkZHInOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncnBvcnQnOgogICAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCA9IHBhcnNlSW50KHBhcnRzW2kgKyAxXSwgMTApOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICd0Y3B0eXBlJzoKICAgICAgICBjYW5kaWRhdGUudGNwVHlwZSA9IHBhcnRzW2kgKyAxXTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDogLy8gVW5rbm93biBleHRlbnNpb25zIGFyZSBzaWxlbnRseSBpZ25vcmVkLgogICAgICAgIGJyZWFrOwogICAgfQogIH0KICByZXR1cm4gY2FuZGlkYXRlOwp9OwoKLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS4KU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHsKICB2YXIgc2RwID0gW107CiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5jb21wb25lbnQpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcm90b2NvbC50b1VwcGVyQ2FzZSgpKTsKICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpOwogIHNkcC5wdXNoKGNhbmRpZGF0ZS5pcCk7CiAgc2RwLnB1c2goY2FuZGlkYXRlLnBvcnQpOwoKICB2YXIgdHlwZSA9IGNhbmRpZGF0ZS50eXBlOwogIHNkcC5wdXNoKCd0eXAnKTsKICBzZHAucHVzaCh0eXBlKTsKICBpZiAodHlwZSAhPT0gJ2hvc3QnICYmIGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyAmJgogICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQpIHsKICAgIHNkcC5wdXNoKCdyYWRkcicpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzKTsgLy8gd2FzOiByZWxBZGRyCiAgICBzZHAucHVzaCgncnBvcnQnKTsKICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydAogIH0KICBpZiAoY2FuZGlkYXRlLnRjcFR5cGUgJiYgY2FuZGlkYXRlLnByb3RvY29sLnRvTG93ZXJDYXNlKCkgPT09ICd0Y3AnKSB7CiAgICBzZHAucHVzaCgndGNwdHlwZScpOwogICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpOwogIH0KICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTsKfTsKCi8vIFBhcnNlcyBhbiBydHBtYXAgbGluZSwgcmV0dXJucyBSVENSdHBDb2RkZWNQYXJhbWV0ZXJzLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzIKU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbihsaW5lKSB7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTsKICB2YXIgcGFyc2VkID0gewogICAgcGF5bG9hZFR5cGU6IHBhcnNlSW50KHBhcnRzLnNoaWZ0KCksIDEwKSAvLyB3YXM6IGlkCiAgfTsKCiAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpOwoKICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdOwogIHBhcnNlZC5jbG9ja1JhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOyAvLyB3YXM6IGNsb2NrcmF0ZQogIC8vIHdhczogY2hhbm5lbHMKICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTsKICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGUgYW4gYT1ydHBtYXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvcgovLyBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgcmV0dXJuICdhPXJ0cG1hcDonICsgcHQgKyAnICcgKyBjb2RlYy5uYW1lICsgJy8nICsgY29kZWMuY2xvY2tSYXRlICsKICAgICAgKGNvZGVjLm51bUNoYW5uZWxzICE9PSAxID8gJy8nICsgY29kZWMubnVtQ2hhbm5lbHMgOiAnJykgKyAnXHJcbic7Cn07CgovLyBQYXJzZXMgYW4gYT1leHRtYXAgbGluZSAoaGVhZGVyZXh0ZW5zaW9uIGZyb20gUkZDIDUyODUpLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldApTRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpOwogIHJldHVybiB7CiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSwKICAgIHVyaTogcGFydHNbMV0KICB9Owp9OwoKLy8gR2VuZXJhdGVzIGE9ZXh0bWFwIGxpbmUgZnJvbSBSVENSdHBIZWFkZXJFeHRlbnNpb25QYXJhbWV0ZXJzIG9yCi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi4KU0RQVXRpbHMud3JpdGVFeHRtYXAgPSBmdW5jdGlvbihoZWFkZXJFeHRlbnNpb24pIHsKICByZXR1cm4gJ2E9ZXh0bWFwOicgKyAoaGVhZGVyRXh0ZW5zaW9uLmlkIHx8IGhlYWRlckV4dGVuc2lvbi5wcmVmZXJyZWRJZCkgKwogICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcclxuJzsKfTsKCi8vIFBhcnNlcyBhbiBmdG1wIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OgovLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vbgovLyBBbHNvIGRlYWxzIHdpdGggdmJyPW9uOyBjbmc9b24KU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkgewogIHZhciBwYXJzZWQgPSB7fTsKICB2YXIga3Y7CiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIobGluZS5pbmRleE9mKCcgJykgKyAxKS5zcGxpdCgnOycpOwogIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHsKICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7CiAgICBwYXJzZWRba3ZbMF0udHJpbSgpXSA9IGt2WzFdOwogIH0KICByZXR1cm4gcGFyc2VkOwp9OwoKLy8gR2VuZXJhdGVzIGFuIGE9ZnRtcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy4KU0RQVXRpbHMud3JpdGVGbXRwID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZSA9ICcnOwogIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlOwogIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlOwogIH0KICBpZiAoY29kZWMucGFyYW1ldGVycyAmJiBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5sZW5ndGgpIHsKICAgIHZhciBwYXJhbXMgPSBbXTsKICAgIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24ocGFyYW0pIHsKICAgICAgcGFyYW1zLnB1c2gocGFyYW0gKyAnPScgKyBjb2RlYy5wYXJhbWV0ZXJzW3BhcmFtXSk7CiAgICB9KTsKICAgIGxpbmUgKz0gJ2E9Zm10cDonICsgcHQgKyAnICcgKyBwYXJhbXMuam9pbignOycpICsgJ1xyXG4nOwogIH0KICByZXR1cm4gbGluZTsKfTsKCi8vIFBhcnNlcyBhbiBydGNwLWZiIGxpbmUsIHJldHVybnMgUlRDUFJ0Y3BGZWVkYmFjayBvYmplY3QuIFNhbXBsZSBpbnB1dDoKLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQpTRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7CiAgcmV0dXJuIHsKICAgIHR5cGU6IHBhcnRzLnNoaWZ0KCksCiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKQogIH07Cn07Ci8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuClNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHsKICB2YXIgbGluZXMgPSAnJzsKICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTsKICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkgewogICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICB9CiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7CiAgICAvLyBGSVhNRTogc3BlY2lhbCBoYW5kbGluZyBmb3IgdHJyLWludD8KICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZ1bmN0aW9uKGZiKSB7CiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArCiAgICAgIChmYi5wYXJhbWV0ZXIgJiYgZmIucGFyYW1ldGVyLmxlbmd0aCA/ICcgJyArIGZiLnBhcmFtZXRlciA6ICcnKSArCiAgICAgICAgICAnXHJcbic7CiAgICB9KTsKICB9CiAgcmV0dXJuIGxpbmVzOwp9OwoKLy8gUGFyc2VzIGFuIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6Ci8vIGE9c3NyYzozNzM1OTI4NTU5IGNuYW1lOnNvbWV0aGluZwpTRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHsKICB2YXIgc3AgPSBsaW5lLmluZGV4T2YoJyAnKTsKICB2YXIgcGFydHMgPSB7CiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMCkKICB9OwogIHZhciBjb2xvbiA9IGxpbmUuaW5kZXhPZignOicsIHNwKTsKICBpZiAoY29sb24gPiAtMSkgewogICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHIoc3AgKyAxLCBjb2xvbiAtIHNwIC0gMSk7CiAgICBwYXJ0cy52YWx1ZSA9IGxpbmUuc3Vic3RyKGNvbG9uICsgMSk7CiAgfSBlbHNlIHsKICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSk7CiAgfQogIHJldHVybiBwYXJ0czsKfTsKCi8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LgovLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHkKLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuClNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBmcExpbmUgPSBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkgewogICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1maW5nZXJwcmludDonKSA9PT0gMDsKICB9KVswXS5zdWJzdHIoMTQpOwogIC8vIE5vdGU6IGE9c2V0dXAgbGluZSBpcyBpZ25vcmVkIHNpbmNlIHdlIHVzZSB0aGUgJ2F1dG8nIHJvbGUuCiAgdmFyIGR0bHNQYXJhbWV0ZXJzID0gewogICAgcm9sZTogJ2F1dG8nLAogICAgZmluZ2VycHJpbnRzOiBbewogICAgICBhbGdvcml0aG06IGZwTGluZS5zcGxpdCgnICcpWzBdLAogICAgICB2YWx1ZTogZnBMaW5lLnNwbGl0KCcgJylbMV0KICAgIH1dCiAgfTsKICByZXR1cm4gZHRsc1BhcmFtZXRlcnM7Cn07CgovLyBTZXJpYWxpemVzIERUTFMgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkgewogIHZhciBzZHAgPSAnYT1zZXR1cDonICsgc2V0dXBUeXBlICsgJ1xyXG4nOwogIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmdW5jdGlvbihmcCkgewogICAgc2RwICs9ICdhPWZpbmdlcnByaW50OicgKyBmcC5hbGdvcml0aG0gKyAnICcgKyBmcC52YWx1ZSArICdcclxuJzsKICB9KTsKICByZXR1cm4gc2RwOwp9OwovLyBQYXJzZXMgSUNFIGluZm9ybWF0aW9uIGZyb20gU0RQIG1lZGlhIHNlY3Rpb24gb3Igc2Vzc2lvbnBhcnQuCi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seQovLyAgIGdldCB0aGUgaWNlLXVmcmFnIGFuZCBpY2UtcHdkIGxpbmVzIGFzIGlucHV0LgpTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkgewogIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTsKICAvLyBTZWFyY2ggaW4gc2Vzc2lvbiBwYXJ0LCB0b28uCiAgbGluZXMgPSBsaW5lcy5jb25jYXQoU0RQVXRpbHMuc3BsaXRMaW5lcyhzZXNzaW9ucGFydCkpOwogIHZhciBpY2VQYXJhbWV0ZXJzID0gewogICAgdXNlcm5hbWVGcmFnbWVudDogbGluZXMuZmlsdGVyKGZ1bmN0aW9uKGxpbmUpIHsKICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtdWZyYWc6JykgPT09IDA7CiAgICB9KVswXS5zdWJzdHIoMTIpLAogICAgcGFzc3dvcmQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7CiAgICAgIHJldHVybiBsaW5lLmluZGV4T2YoJ2E9aWNlLXB3ZDonKSA9PT0gMDsKICAgIH0pWzBdLnN1YnN0cigxMCkKICB9OwogIHJldHVybiBpY2VQYXJhbWV0ZXJzOwp9OwoKLy8gU2VyaWFsaXplcyBJQ0UgcGFyYW1ldGVycyB0byBTRFAuClNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykgewogIHJldHVybiAnYT1pY2UtdWZyYWc6JyArIHBhcmFtcy51c2VybmFtZUZyYWdtZW50ICsgJ1xyXG4nICsKICAgICAgJ2E9aWNlLXB3ZDonICsgcGFyYW1zLnBhc3N3b3JkICsgJ1xyXG4nOwp9OwoKLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLgpTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHsKICB2YXIgZGVzY3JpcHRpb24gPSB7CiAgICBjb2RlY3M6IFtdLAogICAgaGVhZGVyRXh0ZW5zaW9uczogW10sCiAgICBmZWNNZWNoYW5pc21zOiBbXSwKICAgIHJ0Y3A6IFtdCiAgfTsKICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7CiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTsKICBmb3IgKHZhciBpID0gMzsgaSA8IG1saW5lLmxlbmd0aDsgaSsrKSB7IC8vIGZpbmQgYWxsIGNvZGVjcyBmcm9tIG1saW5lWzMuLl0KICAgIHZhciBwdCA9IG1saW5lW2ldOwogICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeCgKICAgICAgICBtZWRpYVNlY3Rpb24sICdhPXJ0cG1hcDonICsgcHQgKyAnICcpWzBdOwogICAgaWYgKHJ0cG1hcGxpbmUpIHsKICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7CiAgICAgIHZhciBmbXRwcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1mbXRwOicgKyBwdCArICcgJyk7CiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuCiAgICAgIGNvZGVjLnBhcmFtZXRlcnMgPSBmbXRwcy5sZW5ndGggPyBTRFBVdGlscy5wYXJzZUZtdHAoZm10cHNbMF0pIDoge307CiAgICAgIGNvZGVjLnJ0Y3BGZWVkYmFjayA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KAogICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJykKICAgICAgICAubWFwKFNEUFV0aWxzLnBhcnNlUnRjcEZiKTsKICAgICAgZGVzY3JpcHRpb24uY29kZWNzLnB1c2goY29kZWMpOwogICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy4KICAgICAgc3dpdGNoIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICBjYXNlICdSRUQnOgogICAgICAgIGNhc2UgJ1VMUEZFQyc6CiAgICAgICAgICBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLnB1c2goY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuCiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWV4dG1hcDonKS5mb3JFYWNoKGZ1bmN0aW9uKGxpbmUpIHsKICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7CiAgfSk7CiAgLy8gRklYTUU6IHBhcnNlIHJ0Y3AuCiAgcmV0dXJuIGRlc2NyaXB0aW9uOwp9OwoKLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgLwovLyBwYXJhbWV0ZXJzLgpTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24oa2luZCwgY2FwcykgewogIHZhciBzZHAgPSAnJzsKCiAgLy8gQnVpbGQgdGhlIG1saW5lLgogIHNkcCArPSAnbT0nICsga2luZCArICcgJzsKICBzZHAgKz0gY2Fwcy5jb2RlY3MubGVuZ3RoID4gMCA/ICc5JyA6ICcwJzsgLy8gcmVqZWN0IGlmIG5vIGNvZGVjcy4KICBzZHAgKz0gJyBVRFAvVExTL1JUUC9TQVZQRiAnOwogIHNkcCArPSBjYXBzLmNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTsKICAgIH0KICAgIHJldHVybiBjb2RlYy5wYXlsb2FkVHlwZTsKICB9KS5qb2luKCcgJykgKyAnXHJcbic7CgogIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxyXG4nOwogIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcclxuJzsKCiAgLy8gQWRkIGE9cnRwbWFwIGxpbmVzIGZvciBlYWNoIGNvZGVjLiBBbHNvIGZtdHAgYW5kIHJ0Y3AtZmIuCiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykgewogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTsKICAgIHNkcCArPSBTRFBVdGlscy53cml0ZUZtdHAoY29kZWMpOwogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRjcEZiKGNvZGVjKTsKICB9KTsKICB2YXIgbWF4cHRpbWUgPSAwOwogIGNhcHMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5tYXhwdGltZSA+IG1heHB0aW1lKSB7CiAgICAgIG1heHB0aW1lID0gY29kZWMubWF4cHRpbWU7CiAgICB9CiAgfSk7CiAgaWYgKG1heHB0aW1lID4gMCkgewogICAgc2RwICs9ICdhPW1heHB0aW1lOicgKyBtYXhwdGltZSArICdcclxuJzsKICB9CiAgc2RwICs9ICdhPXJ0Y3AtbXV4XHJcbic7CgogIGNhcHMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4dGVuc2lvbikgewogICAgc2RwICs9IFNEUFV0aWxzLndyaXRlRXh0bWFwKGV4dGVuc2lvbik7CiAgfSk7CiAgLy8gRklYTUU6IHdyaXRlIGZlY01lY2hhbmlzbXMuCiAgcmV0dXJuIHNkcDsKfTsKCi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2YKLy8gUlRDUnRwRW5jb2RpbmdQYXJhbWV0ZXJzLgpTRFBVdGlscy5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikgewogIHZhciBlbmNvZGluZ1BhcmFtZXRlcnMgPSBbXTsKICB2YXIgZGVzY3JpcHRpb24gPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTsKICB2YXIgaGFzUmVkID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdSRUQnKSAhPT0gLTE7CiAgdmFyIGhhc1VscGZlYyA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignVUxQRkVDJykgIT09IC0xOwoKICAvLyBmaWx0ZXIgYT1zc3JjOi4uLiBjbmFtZTosIGlnbm9yZSBQbGFuQi1tc2lkCiAgdmFyIHNzcmNzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpCiAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7CiAgfSkKICAuZmlsdGVyKGZ1bmN0aW9uKHBhcnRzKSB7CiAgICByZXR1cm4gcGFydHMuYXR0cmlidXRlID09PSAnY25hbWUnOwogIH0pOwogIHZhciBwcmltYXJ5U3NyYyA9IHNzcmNzLmxlbmd0aCA+IDAgJiYgc3NyY3NbMF0uc3NyYzsKICB2YXIgc2Vjb25kYXJ5U3NyYzsKCiAgdmFyIGZsb3dzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjLWdyb3VwOkZJRCcpCiAgLm1hcChmdW5jdGlvbihsaW5lKSB7CiAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCcgJyk7CiAgICBwYXJ0cy5zaGlmdCgpOwogICAgcmV0dXJuIHBhcnRzLm1hcChmdW5jdGlvbihwYXJ0KSB7CiAgICAgIHJldHVybiBwYXJzZUludChwYXJ0LCAxMCk7CiAgICB9KTsKICB9KTsKICBpZiAoZmxvd3MubGVuZ3RoID4gMCAmJiBmbG93c1swXS5sZW5ndGggPiAxICYmIGZsb3dzWzBdWzBdID09PSBwcmltYXJ5U3NyYykgewogICAgc2Vjb25kYXJ5U3NyYyA9IGZsb3dzWzBdWzFdOwogIH0KCiAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHsKICAgIGlmIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdSVFgnICYmIGNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7CiAgICAgIHZhciBlbmNQYXJhbSA9IHsKICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYywKICAgICAgICBjb2RlY1BheWxvYWRUeXBlOiBwYXJzZUludChjb2RlYy5wYXJhbWV0ZXJzLmFwdCwgMTApLAogICAgICAgIHJ0eDogewogICAgICAgICAgc3NyYzogc2Vjb25kYXJ5U3NyYwogICAgICAgIH0KICAgICAgfTsKICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pOwogICAgICBpZiAoaGFzUmVkKSB7CiAgICAgICAgZW5jUGFyYW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVuY1BhcmFtKSk7CiAgICAgICAgZW5jUGFyYW0uZmVjID0gewogICAgICAgICAgc3NyYzogc2Vjb25kYXJ5U3NyYywKICAgICAgICAgIG1lY2hhbmlzbTogaGFzVWxwZmVjID8gJ3JlZCt1bHBmZWMnIDogJ3JlZCcKICAgICAgICB9OwogICAgICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKGVuY1BhcmFtKTsKICAgICAgfQogICAgfQogIH0pOwogIGlmIChlbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoID09PSAwICYmIHByaW1hcnlTc3JjKSB7CiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7CiAgICAgIHNzcmM6IHByaW1hcnlTc3JjCiAgICB9KTsKICB9CgogIC8vIHdlIHN1cHBvcnQgYm90aCBiPUFTIGFuZCBiPVRJQVMgYnV0IGludGVycHJldCBBUyBhcyBUSUFTLgogIHZhciBiYW5kd2lkdGggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdiPScpOwogIGlmIChiYW5kd2lkdGgubGVuZ3RoKSB7CiAgICBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9VElBUzonKSA9PT0gMCkgewogICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDcpLCAxMCk7CiAgICB9IGVsc2UgaWYgKGJhbmR3aWR0aFswXS5pbmRleE9mKCdiPUFTOicpID09PSAwKSB7CiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHIoNSksIDEwKTsKICAgIH0KICAgIGVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtcykgewogICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDsKICAgIH0pOwogIH0KICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzOwp9OwoKU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUgPSBmdW5jdGlvbigpIHsKICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC4KICByZXR1cm4gJ3Y9MFxyXG4nICsKICAgICAgJ289dGhpc2lzYWRhcHRlcm9ydGMgODE2OTYzOTkxNTY0Njk0MzEzNyAyIElOIElQNCAxMjcuMC4wLjFcclxuJyArCiAgICAgICdzPS1cclxuJyArCiAgICAgICd0PTAgMFxyXG4nOwp9OwoKU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24gPSBmdW5jdGlvbih0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtKSB7CiAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24odHJhbnNjZWl2ZXIua2luZCwgY2Fwcyk7CgogIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLgogIHNkcCArPSBTRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMoCiAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKTsKCiAgLy8gTWFwIERUTFMgcGFyYW1ldGVycyB0byBTRFAuCiAgc2RwICs9IFNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMoCiAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksCiAgICAgIHR5cGUgPT09ICdvZmZlcicgPyAnYWN0cGFzcycgOiAnYWN0aXZlJyk7CgogIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcclxuJzsKCiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikgewogICAgc2RwICs9ICdhPXNlbmRyZWN2XHJcbic7CiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHsKICAgIHNkcCArPSAnYT1zZW5kb25seVxyXG4nOwogIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgIHNkcCArPSAnYT1yZWN2b25seVxyXG4nOwogIH0gZWxzZSB7CiAgICBzZHAgKz0gJ2E9aW5hY3RpdmVcclxuJzsKICB9CgogIC8vIEZJWE1FOiBmb3IgUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlIFNTUkNzLiBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZSB5ZXQuCiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikgewogICAgdmFyIG1zaWQgPSAnbXNpZDonICsgc3RyZWFtLmlkICsgJyAnICsKICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIudHJhY2suaWQgKyAnXHJcbic7CiAgICBzZHAgKz0gJ2E9JyArIG1zaWQ7CiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsKICAgICAgICAnICcgKyBtc2lkOwogICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7CiAgICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICsKICAgICAgICAgICcgJyArIG1zaWQ7CiAgICAgIHNkcCArPSAnYT1zc3JjLWdyb3VwOkZJRCAnICsKICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArICcgJyArCiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICsKICAgICAgICAgICdcclxuJzsKICAgIH0KICB9CiAgLy8gRklYTUU6IHRoaXMgc2hvdWxkIGJlIHdyaXR0ZW4gYnkgd3JpdGVSdHBEZXNjcmlwdGlvbi4KICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICsKICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcclxuJzsKICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7CiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArCiAgICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcclxuJzsKICB9CiAgcmV0dXJuIHNkcDsKfTsKCi8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LgpTRFBVdGlscy5nZXREaXJlY3Rpb24gPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7CiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuCiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogIGZvciAodmFyIGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHsKICAgIHN3aXRjaCAobGluZXNbaV0pIHsKICAgICAgY2FzZSAnYT1zZW5kcmVjdic6CiAgICAgIGNhc2UgJ2E9c2VuZG9ubHknOgogICAgICBjYXNlICdhPXJlY3Zvbmx5JzoKICAgICAgY2FzZSAnYT1pbmFjdGl2ZSc6CiAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cigyKTsKICAgICAgZGVmYXVsdDoKICAgICAgICAvLyBGSVhNRTogV2hhdCBzaG91bGQgaGFwcGVuIGhlcmU/CiAgICB9CiAgfQogIGlmIChzZXNzaW9ucGFydCkgewogICAgcmV0dXJuIFNEUFV0aWxzLmdldERpcmVjdGlvbihzZXNzaW9ucGFydCk7CiAgfQogIHJldHVybiAnc2VuZHJlY3YnOwp9OwoKLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLgptb2R1bGUuZXhwb3J0cyA9IFNEUFV0aWxzOwoKfSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8vIHZlcnNpb246IDAuNS4xCi8vIGRhdGU6IFR1ZSBGZWIgMDcgMjAxNyAxNjowMDozOSBHTVQrMDAwMCAoV0VUKQovLyBsaWNlbmNlOiAKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgoKKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiU3luY2hlciIsIFtdLCBmYWN0b3J5KTsKCWVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKQoJCWV4cG9ydHNbIlN5bmNoZXIiXSA9IGZhY3RvcnkoKTsKCWVsc2UKCQlyb290WyIiXSA9IHJvb3RbIiJdIHx8IHt9LCByb290WyIiXVsiU3luY2hlciJdID0gZmFjdG9yeSgpOwp9KSh0aGlzLCBmdW5jdGlvbigpIHsKcmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXAKLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCXZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307Ci8qKioqKiovCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbgovKioqKioqLyAJZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkgewovKioqKioqLwovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQovKioqKioqLyAJCWlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKQovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsKLyoqKioqKi8gCQkJaTogbW9kdWxlSWQsCi8qKioqKiovIAkJCWw6IGZhbHNlLAovKioqKioqLyAJCQlleHBvcnRzOiB7fQovKioqKioqLyAJCX07Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZAovKioqKioqLyAJCW1vZHVsZS5sID0gdHJ1ZTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsKLyoqKioqKi8gCX0KLyoqKioqKi8KLyoqKioqKi8KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0Ci8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07Ci8qKioqKiovCi8qKioqKiovIAkvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgewovKioqKioqLyAJCWlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsKLyoqKioqKi8gCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsKLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsCi8qKioqKiovIAkJCQllbnVtZXJhYmxlOiB0cnVlLAovKioqKioqLyAJCQkJZ2V0OiBnZXR0ZXIKLyoqKioqKi8gCQkJfSk7Ci8qKioqKiovIAkJfQovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHsKLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDoKLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTsKLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7Ci8qKioqKiovIAkJcmV0dXJuIGdldHRlcjsKLyoqKioqKi8gCX07Ci8qKioqKiovCi8qKioqKiovIAkvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSAiIjsKLyoqKioqKi8KLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAJcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTYyKTsKLyoqKioqKi8gfSkKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KLyoqKioqKi8gKFsKLyogMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcyLjQuMCd9OwppZih0eXBlb2YgX19lID09ICdudW1iZXInKV9fZSA9IGNvcmU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKCi8qKiovIH0pLAovKiAxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4CnZhciBnbG9iYWwgPSBtb2R1bGUuZXhwb3J0cyA9IHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lk1hdGggPT0gTWF0aAogID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTsKaWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWYKCi8qKiovIH0pLAovKiAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBzdG9yZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkoJ3drcycpCiAgLCB1aWQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykKICAsIFN5bWJvbCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLlN5bWJvbAogICwgVVNFX1NZTUJPTCA9IHR5cGVvZiBTeW1ib2wgPT0gJ2Z1bmN0aW9uJzsKCnZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7CiAgcmV0dXJuIHN0b3JlW25hbWVdIHx8IChzdG9yZVtuYW1lXSA9CiAgICBVU0VfU1lNQk9MICYmIFN5bWJvbFtuYW1lXSB8fCAoVVNFX1NZTUJPTCA/IFN5bWJvbCA6IHVpZCkoJ1N5bWJvbC4nICsgbmFtZSkpOwp9OwoKJGV4cG9ydHMuc3RvcmUgPSBzdG9yZTsKCi8qKiovIH0pLAovKiAzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIFRoYW5rJ3MgSUU4IGZvciBoaXMgZnVubnkgZGVmaW5lUHJvcGVydHkKbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsKICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Owp9KTsKCi8qKiovIH0pLAovKiA0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkKICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKICAsIGRQICAgICAgICAgICAgID0gT2JqZWN0LmRlZmluZVByb3BlcnR5OwoKZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpewogIGFuT2JqZWN0KE8pOwogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsKICBhbk9iamVjdChBdHRyaWJ1dGVzKTsKICBpZihJRThfRE9NX0RFRklORSl0cnkgewogICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICBpZignZ2V0JyBpbiBBdHRyaWJ1dGVzIHx8ICdzZXQnIGluIEF0dHJpYnV0ZXMpdGhyb3cgVHlwZUVycm9yKCdBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEnKTsKICBpZigndmFsdWUnIGluIEF0dHJpYnV0ZXMpT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7CiAgcmV0dXJuIE87Cn07CgovKioqLyB9KSwKLyogNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICBpZighaXNPYmplY3QoaXQpKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGFuIG9iamVjdCEnKTsKICByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwp9IDogZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICBvYmplY3Rba2V5XSA9IHZhbHVlOwogIHJldHVybiBvYmplY3Q7Cn07CgovKioqLyB9KSwKLyogNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gdHlwZW9mIGl0ID09PSAnb2JqZWN0JyA/IGl0ICE9PSBudWxsIDogdHlwZW9mIGl0ID09PSAnZnVuY3Rpb24nOwp9OwoKLyoqKi8gfSksCi8qIDggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpCiAgLCBoaWRlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpCiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXsKICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRgogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlMKICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUAogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LlcKICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSkKICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdCiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV0KICAgICwga2V5LCBvd24sIG91dDsKICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsKICBmb3Ioa2V5IGluIHNvdXJjZSl7CiAgICAvLyBjb250YWlucyBpbiBuYXRpdmUKICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7CiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7CiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZAogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsKICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcwogICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKQogICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnkKICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7CiAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7CiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpewogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpewogICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQzsKICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7CiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOwogICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7CiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07CiAgICAgIHJldHVybiBGOwogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7CiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKICAgIGlmKElTX1BST1RPKXsKICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0OwogICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsKICAgIH0KICB9Cn07Ci8vIHR5cGUgYml0bWFwCiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsCiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljCiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG8KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kCiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcAokZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmUKJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIAptb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7CgovKioqLyB9KSwKLyogOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9OwoKLyoqKi8gfSksCi8qIDEwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF9kZWZpbmVQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpOwoKdmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgfQogIH0KCiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7CiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsKICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICB9Owp9KCk7CgovKioqLyB9KSwKLyogMTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjKXsKICB0cnkgewogICAgcmV0dXJuICEhZXhlYygpOwogIH0gY2F0Y2goZSl7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn07CgovKioqLyB9KSwKLyogMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIGtleSl7CiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoaXQsIGtleSk7Cn07CgovKioqLyB9KSwKLyogMTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzCnZhciBJT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NikKICAsIGRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIElPYmplY3QoZGVmaW5lZChpdCkpOwp9OwoKLyoqKi8gfSksCi8qIDE0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZwp2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIHRoYXQsIGxlbmd0aCl7CiAgYUZ1bmN0aW9uKGZuKTsKICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuOwogIHN3aXRjaChsZW5ndGgpewogICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oYSl7CiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpOwogICAgfTsKICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKGEsIGIpewogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTsKICAgIH07CiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbihhLCBiLCBjKXsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7CiAgICB9OwogIH0KICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7CiAgICByZXR1cm4gZm4uYXBwbHkodGhhdCwgYXJndW1lbnRzKTsKICB9Owp9OwoKLyoqKi8gfSksCi8qIDE1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0ge307CgovKioqLyB9KSwKLyogMTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXsKICByZXR1cm4gewogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLAogICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLAogICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLAogICAgdmFsdWUgICAgICAgOiB2YWx1ZQogIH07Cn07CgovKioqLyB9KSwKLyogMTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pCnZhciAka2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpCiAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKbW9kdWxlLmV4cG9ydHMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiBrZXlzKE8pewogIHJldHVybiAka2V5cyhPLCBlbnVtQnVnS2V5cyk7Cn07CgovKioqLyB9KSwKLyogMTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwgLTEpOwp9OwoKLyoqKi8gfSksCi8qIDE5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNykKICAsIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudAogIC8vIGluIG9sZCBJRSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBpcyAnb2JqZWN0JwogICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBpcyA/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaXQpIDoge307Cn07CgovKioqLyB9KSwKLyogMjAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgaWYodHlwZW9mIGl0ICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYSBmdW5jdGlvbiEnKTsKICByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogMjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGRlZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZgogICwgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3RvU3RyaW5nVGFnJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpewogIGlmKGl0ICYmICFoYXMoaXQgPSBzdGF0ID8gaXQgOiBpdC5wcm90b3R5cGUsIFRBRykpZGVmKGl0LCBUQUcsIHtjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiB0YWd9KTsKfTsKCi8qKiovIH0pLAovKiAyMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2UKLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgUyl7CiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7CiAgdmFyIGZuLCB2YWw7CiAgaWYoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIGlmKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsKICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7Cn07CgovKioqLyB9KSwKLyogMjMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIGlkID0gMAogICwgcHggPSBNYXRoLnJhbmRvbSgpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CiAgcmV0dXJuICdTeW1ib2woJy5jb25jYXQoa2V5ID09PSB1bmRlZmluZWQgPyAnJyA6IGtleSwgJylfJywgKCsraWQgKyBweCkudG9TdHJpbmcoMzYpKTsKfTsKCi8qKiovIH0pLAovKiAyNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICBpZihpdCA9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIiArIGl0KTsKICByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogMjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSB0cnVlOwoKLyoqKi8gfSksCi8qIDI2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBzaGFyZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgna2V5cycpCiAgLCB1aWQgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpewogIHJldHVybiBzaGFyZWRba2V5XSB8fCAoc2hhcmVkW2tleV0gPSB1aWQoa2V5KSk7Cn07CgovKioqLyB9KSwKLyogMjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gNy4xLjQgVG9JbnRlZ2VyCnZhciBjZWlsICA9IE1hdGguY2VpbAogICwgZmxvb3IgPSBNYXRoLmZsb29yOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXNOYU4oaXQgPSAraXQpID8gMCA6IChpdCA+IDAgPyBmbG9vciA6IGNlaWwpKGl0KTsKfTsKCi8qKiovIH0pLAovKiAyOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyBJRSA4LSBkb24ndCBlbnVtIGJ1ZyBrZXlzCm1vZHVsZS5leHBvcnRzID0gKAogICdjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YnCikuc3BsaXQoJywnKTsKCi8qKiovIH0pLAovKiAyOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDMpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX3JlcXVpcmVfXygxOSkoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Owp9KTsKCi8qKiovIH0pLAovKiAzMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2xvYmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXycKICAsIHN0b3JlICA9IGdsb2JhbFtTSEFSRURdIHx8IChnbG9iYWxbU0hBUkVEXSA9IHt9KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihrZXkpewogIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pOwp9OwoKLyoqKi8gfSksCi8qIDMxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNzkpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogMzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KQp2YXIgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gT2JqZWN0KGRlZmluZWQoaXQpKTsKfTsKCi8qKiovIH0pLAovKiAzMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCnZhciBfc2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTsKCnZhciBfc2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTsKCnZhciBfY3JlYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZSk7Cgp2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgewogIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gImZ1bmN0aW9uIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90ICIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoc3VwZXJDbGFzcykpKTsKICB9CgogIHN1YkNsYXNzLnByb3RvdHlwZSA9ICgwLCBfY3JlYXRlMi5kZWZhdWx0KShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7CiAgICBjb25zdHJ1Y3RvcjogewogICAgICB2YWx1ZTogc3ViQ2xhc3MsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICB9CiAgfSk7CiAgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZjIuZGVmYXVsdCA/ICgwLCBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7Cn07CgovKioqLyB9KSwKLyogMzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX3R5cGVvZjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KTsKCnZhciBfdHlwZW9mMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3R5cGVvZjIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7CiAgaWYgKCFzZWxmKSB7CiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpOwogIH0KCiAgcmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6ICgwLCBfdHlwZW9mMy5kZWZhdWx0KShjYWxsKSkgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBjYWxsID09PSAiZnVuY3Rpb24iKSA/IGNhbGwgOiBzZWxmOwp9OwoKLyoqKi8gfSksCi8qIDM1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi4yIC8gMTUuMi4zLjUgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQp2YXIgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCBkUHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpCiAgLCBlbnVtQnVnS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpCiAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpCiAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH0KICAsIFBST1RPVFlQRSAgID0gJ3Byb3RvdHlwZSc7CgovLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlCnZhciBjcmVhdGVEaWN0ID0gZnVuY3Rpb24oKXsKICAvLyBUaHJhc2gsIHdhc3RlIGFuZCBzb2RvbXk6IElFIEdDIGJ1ZwogIHZhciBpZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSgnaWZyYW1lJykKICAgICwgaSAgICAgID0gZW51bUJ1Z0tleXMubGVuZ3RoCiAgICAsIGx0ICAgICA9ICc8JwogICAgLCBndCAgICAgPSAnPicKICAgICwgaWZyYW1lRG9jdW1lbnQ7CiAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgX193ZWJwYWNrX3JlcXVpcmVfXyg0MikuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6JzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zY3JpcHQtdXJsCiAgLy8gY3JlYXRlRGljdCA9IGlmcmFtZS5jb250ZW50V2luZG93Lk9iamVjdDsKICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7CiAgaWZyYW1lRG9jdW1lbnQgPSBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICBpZnJhbWVEb2N1bWVudC5vcGVuKCk7CiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpOwogIGlmcmFtZURvY3VtZW50LmNsb3NlKCk7CiAgY3JlYXRlRGljdCA9IGlmcmFtZURvY3VtZW50LkY7CiAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dOwogIHJldHVybiBjcmVhdGVEaWN0KCk7Cn07Cgptb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gY3JlYXRlKE8sIFByb3BlcnRpZXMpewogIHZhciByZXN1bHQ7CiAgaWYoTyAhPT0gbnVsbCl7CiAgICBFbXB0eVtQUk9UT1RZUEVdID0gYW5PYmplY3QoTyk7CiAgICByZXN1bHQgPSBuZXcgRW1wdHk7CiAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDsKICAgIC8vIGFkZCAiX19wcm90b19fIiBmb3IgT2JqZWN0LmdldFByb3RvdHlwZU9mIHBvbHlmaWxsCiAgICByZXN1bHRbSUVfUFJPVE9dID0gTzsKICB9IGVsc2UgcmVzdWx0ID0gY3JlYXRlRGljdCgpOwogIHJldHVybiBQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiBkUHMocmVzdWx0LCBQcm9wZXJ0aWVzKTsKfTsKCgovKioqLyB9KSwKLyogMzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXygzNyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAzNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXsKICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTsKfTsKCi8qKiovIH0pLAovKiAzOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpCiAgLCBoaWRlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikKICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIEl0ZXJhdG9ycyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkKICAsICRpdGVyQ3JlYXRlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MikKICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkKICAsIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MykKICAsIElURVJBVE9SICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQogICwgQlVHR1kgICAgICAgICAgPSAhKFtdLmtleXMgJiYgJ25leHQnIGluIFtdLmtleXMoKSkgLy8gU2FmYXJpIGhhcyBidWdneSBpdGVyYXRvcnMgdy9vIGBuZXh0YAogICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcicKICAsIEtFWVMgICAgICAgICAgID0gJ2tleXMnCiAgLCBWQUxVRVMgICAgICAgICA9ICd2YWx1ZXMnOwoKdmFyIHJldHVyblRoaXMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpczsgfTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXsKICAkaXRlckNyZWF0ZShDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCk7CiAgdmFyIGdldE1ldGhvZCA9IGZ1bmN0aW9uKGtpbmQpewogICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdOwogICAgc3dpdGNoKGtpbmQpewogICAgICBjYXNlIEtFWVM6IHJldHVybiBmdW5jdGlvbiBrZXlzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07CiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07CiAgICB9IHJldHVybiBmdW5jdGlvbiBlbnRyaWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07CiAgfTsKICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJwogICAgLCBERUZfVkFMVUVTID0gREVGQVVMVCA9PSBWQUxVRVMKICAgICwgVkFMVUVTX0JVRyA9IGZhbHNlCiAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZQogICAgLCAkbmF0aXZlICAgID0gcHJvdG9bSVRFUkFUT1JdIHx8IHByb3RvW0ZGX0lURVJBVE9SXSB8fCBERUZBVUxUICYmIHByb3RvW0RFRkFVTFRdCiAgICAsICRkZWZhdWx0ICAgPSAkbmF0aXZlIHx8IGdldE1ldGhvZChERUZBVUxUKQogICAgLCAkZW50cmllcyAgID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZAogICAgLCAkYW55TmF0aXZlID0gTkFNRSA9PSAnQXJyYXknID8gcHJvdG8uZW50cmllcyB8fCAkbmF0aXZlIDogJG5hdGl2ZQogICAgLCBtZXRob2RzLCBrZXksIEl0ZXJhdG9yUHJvdG90eXBlOwogIC8vIEZpeCBuYXRpdmUKICBpZigkYW55TmF0aXZlKXsKICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG90eXBlT2YoJGFueU5hdGl2ZS5jYWxsKG5ldyBCYXNlKSk7CiAgICBpZihJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSl7CiAgICAgIC8vIFNldCBAQHRvU3RyaW5nVGFnIHRvIG5hdGl2ZSBpdGVyYXRvcnMKICAgICAgc2V0VG9TdHJpbmdUYWcoSXRlcmF0b3JQcm90b3R5cGUsIFRBRywgdHJ1ZSk7CiAgICAgIC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lcwogICAgICBpZighTElCUkFSWSAmJiAhaGFzKEl0ZXJhdG9yUHJvdG90eXBlLCBJVEVSQVRPUikpaGlkZShJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IsIHJldHVyblRoaXMpOwogICAgfQogIH0KICAvLyBmaXggQXJyYXkje3ZhbHVlcywgQEBpdGVyYXRvcn0ubmFtZSBpbiBWOCAvIEZGCiAgaWYoREVGX1ZBTFVFUyAmJiAkbmF0aXZlICYmICRuYXRpdmUubmFtZSAhPT0gVkFMVUVTKXsKICAgIFZBTFVFU19CVUcgPSB0cnVlOwogICAgJGRlZmF1bHQgPSBmdW5jdGlvbiB2YWx1ZXMoKXsgcmV0dXJuICRuYXRpdmUuY2FsbCh0aGlzKTsgfTsKICB9CiAgLy8gRGVmaW5lIGl0ZXJhdG9yCiAgaWYoKCFMSUJSQVJZIHx8IEZPUkNFRCkgJiYgKEJVR0dZIHx8IFZBTFVFU19CVUcgfHwgIXByb3RvW0lURVJBVE9SXSkpewogICAgaGlkZShwcm90bywgSVRFUkFUT1IsICRkZWZhdWx0KTsKICB9CiAgLy8gUGx1ZyBmb3IgbGlicmFyeQogIEl0ZXJhdG9yc1tOQU1FXSA9ICRkZWZhdWx0OwogIEl0ZXJhdG9yc1tUQUddICA9IHJldHVyblRoaXM7CiAgaWYoREVGQVVMVCl7CiAgICBtZXRob2RzID0gewogICAgICB2YWx1ZXM6ICBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSwKICAgICAga2V5czogICAgSVNfU0VUICAgICA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKEtFWVMpLAogICAgICBlbnRyaWVzOiAkZW50cmllcwogICAgfTsKICAgIGlmKEZPUkNFRClmb3Ioa2V5IGluIG1ldGhvZHMpewogICAgICBpZighKGtleSBpbiBwcm90bykpcmVkZWZpbmUocHJvdG8sIGtleSwgbWV0aG9kc1trZXldKTsKICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7CiAgfQogIHJldHVybiBtZXRob2RzOwp9OwoKLyoqKi8gfSksCi8qIDM5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygzKSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mfSk7CgovKioqLyB9KSwKLyogNDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg1MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA0MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgpleHBvcnRzLmYgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZTsKCi8qKiovIH0pLAovKiA0MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKLyoqKi8gfSksCi8qIDQzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciBoYXMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCB0b09iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpCiAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpCiAgLCBPYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7Cgptb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihPKXsKICBPID0gdG9PYmplY3QoTyk7CiAgaWYoaGFzKE8sIElFX1BST1RPKSlyZXR1cm4gT1tJRV9QUk9UT107CiAgaWYodHlwZW9mIE8uY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcil7CiAgICByZXR1cm4gTy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7CiAgfSByZXR1cm4gTyBpbnN0YW5jZW9mIE9iamVjdCA/IE9iamVjdFByb3RvIDogbnVsbDsKfTsKCi8qKiovIH0pLAovKiA0NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaGFzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIHRvSU9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpCiAgLCBhcnJheUluZGV4T2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKShmYWxzZSkKICAsIElFX1BST1RPICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpKCdJRV9QUk9UTycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmplY3QsIG5hbWVzKXsKICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdCkKICAgICwgaSAgICAgID0gMAogICAgLCByZXN1bHQgPSBbXQogICAgLCBrZXk7CiAgZm9yKGtleSBpbiBPKWlmKGtleSAhPSBJRV9QUk9UTyloYXMoTywga2V5KSAmJiByZXN1bHQucHVzaChrZXkpOwogIC8vIERvbid0IGVudW0gYnVnICYgaGlkZGVuIGtleXMKICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKWlmKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSl7CiAgICB+YXJyYXlJbmRleE9mKHJlc3VsdCwga2V5KSB8fCByZXN1bHQucHVzaChrZXkpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9OwoKLyoqKi8gfSksCi8qIDQ1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlcwp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCkKICAsIGNvcmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApCiAgLCBmYWlscyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXsKICB2YXIgZm4gID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldCiAgICAsIGV4cCA9IHt9OwogIGV4cFtLRVldID0gZXhlYyhmbik7CiAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbigpeyBmbigxKTsgfSksICdPYmplY3QnLCBleHApOwp9OwoKLyoqKi8gfSksCi8qIDQ2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCi8qKiovIH0pLAovKiA0NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMTUgVG9MZW5ndGgKdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpCiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIGl0ID4gMCA/IG1pbih0b0ludGVnZXIoaXQpLCAweDFmZmZmZmZmZmZmZmZmKSA6IDA7IC8vIHBvdygyLCA1MykgLSAxID09IDkwMDcxOTkyNTQ3NDA5OTEKfTsKCi8qKiovIH0pLAovKiA0OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBjb3JlICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkKICAsIHdrc0V4dCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkKICAsIGRlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG5hbWUpewogIHZhciAkU3ltYm9sID0gY29yZS5TeW1ib2wgfHwgKGNvcmUuU3ltYm9sID0gTElCUkFSWSA/IHt9IDogZ2xvYmFsLlN5bWJvbCB8fCB7fSk7CiAgaWYobmFtZS5jaGFyQXQoMCkgIT0gJ18nICYmICEobmFtZSBpbiAkU3ltYm9sKSlkZWZpbmVQcm9wZXJ0eSgkU3ltYm9sLCBuYW1lLCB7dmFsdWU6IHdrc0V4dC5mKG5hbWUpfSk7Cn07CgovKioqLyB9KSwKLyogNDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTsKCi8qKiovIH0pLAovKiA1MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgJGF0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpKHRydWUpOwoKLy8gMjEuMS4zLjI3IFN0cmluZy5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQpfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7CiAgdGhpcy5fdCA9IFN0cmluZyhpdGVyYXRlZCk7IC8vIHRhcmdldAogIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4Ci8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkKfSwgZnVuY3Rpb24oKXsKICB2YXIgTyAgICAgPSB0aGlzLl90CiAgICAsIGluZGV4ID0gdGhpcy5faQogICAgLCBwb2ludDsKICBpZihpbmRleCA+PSBPLmxlbmd0aClyZXR1cm4ge3ZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWV9OwogIHBvaW50ID0gJGF0KE8sIGluZGV4KTsKICB0aGlzLl9pICs9IHBvaW50Lmxlbmd0aDsKICByZXR1cm4ge3ZhbHVlOiBwb2ludCwgZG9uZTogZmFsc2V9Owp9KTsKCi8qKiovIH0pLAovKiA1MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTsKdmFyIGdsb2JhbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBoaWRlICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KQogICwgSXRlcmF0b3JzICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpCiAgLCBUT19TVFJJTkdfVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKTsKCmZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspewogIHZhciBOQU1FICAgICAgID0gY29sbGVjdGlvbnNbaV0KICAgICwgQ29sbGVjdGlvbiA9IGdsb2JhbFtOQU1FXQogICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTsKICBpZihwcm90byAmJiAhcHJvdG9bVE9fU1RSSU5HX1RBR10paGlkZShwcm90bywgVE9fU1RSSU5HX1RBRywgTkFNRSk7CiAgSXRlcmF0b3JzW05BTUVdID0gSXRlcmF0b3JzLkFycmF5Owp9CgovKioqLyB9KSwKLyogNTIgKi8sCi8qIDUzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjb3JlICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsICRKU09OID0gY29yZS5KU09OIHx8IChjb3JlLkpTT04gPSB7c3RyaW5naWZ5OiBKU09OLnN0cmluZ2lmeX0pOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICByZXR1cm4gJEpTT04uc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmd1bWVudHMpOwp9OwoKLyoqKi8gfSksCi8qIDU0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCgoKLyoqKi8gfSksCi8qIDU1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIGdldHRpbmcgdGFnIGZyb20gMTkuMS4zLjYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZygpCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQogICwgVEFHID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgndG9TdHJpbmdUYWcnKQogIC8vIEVTMyB3cm9uZyBoZXJlCiAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJzsKCi8vIGZhbGxiYWNrIGZvciBJRTExIFNjcmlwdCBBY2Nlc3MgRGVuaWVkIGVycm9yCnZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXsKICB0cnkgewogICAgcmV0dXJuIGl0W2tleV07CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgdmFyIE8sIFQsIEI7CiAgcmV0dXJuIGl0ID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IGl0ID09PSBudWxsID8gJ051bGwnCiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2UKICAgIDogdHlwZW9mIChUID0gdHJ5R2V0KE8gPSBPYmplY3QoaXQpLCBUQUcpKSA9PSAnc3RyaW5nJyA/IFQKICAgIC8vIGJ1aWx0aW5UYWcgY2FzZQogICAgOiBBUkcgPyBjb2YoTykKICAgIC8vIEVTMyBhcmd1bWVudHMgZmFsbGJhY2sKICAgIDogKEIgPSBjb2YoTykpID09ICdPYmplY3QnICYmIHR5cGVvZiBPLmNhbGxlZSA9PSAnZnVuY3Rpb24nID8gJ0FyZ3VtZW50cycgOiBCOwp9OwoKLyoqKi8gfSksCi8qIDU2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QoJ3onKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKSA/IE9iamVjdCA6IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7Cn07CgovKioqLyB9KSwKLyogNTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHBJRSAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSkKICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikKICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSkKICAsIGdPUEQgICAgICAgICAgID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBnT1BEIDogZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApewogIE8gPSB0b0lPYmplY3QoTyk7CiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpOwogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7CiAgICByZXR1cm4gZ09QRChPLCBQKTsKICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9CiAgaWYoaGFzKE8sIFApKXJldHVybiBjcmVhdGVEZXNjKCFwSUUuZi5jYWxsKE8sIFApLCBPW1BdKTsKfTsKCi8qKiovIH0pLAovKiA1OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgpleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwoKLyoqKi8gfSksCi8qIDU5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF9pdGVyYXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpOwoKdmFyIF9pdGVyYXRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pdGVyYXRvcik7Cgp2YXIgX3N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpOwoKdmFyIF9zeW1ib2wyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3ltYm9sKTsKCnZhciBfdHlwZW9mID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIF9pdGVyYXRvcjIuZGVmYXVsdCA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDIuZGVmYXVsdCAmJiBvYmogIT09IF9zeW1ib2wyLmRlZmF1bHQucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YoX2l0ZXJhdG9yMi5kZWZhdWx0KSA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7CiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKG9iaik7Cn0gOiBmdW5jdGlvbiAob2JqKSB7CiAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IF9zeW1ib2wyLmRlZmF1bHQgJiYgb2JqICE9PSBfc3ltYm9sMi5kZWZhdWx0LnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsKfTsKCi8qKiovIH0pLAovKiA2MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH07CgovKioqLyB9KSwKLyogNjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZmFsc2UgLT4gQXJyYXkjaW5kZXhPZgovLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcwp2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIHRvTGVuZ3RoICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpCiAgLCB0b0luZGV4ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihJU19JTkNMVURFUyl7CiAgcmV0dXJuIGZ1bmN0aW9uKCR0aGlzLCBlbCwgZnJvbUluZGV4KXsKICAgIHZhciBPICAgICAgPSB0b0lPYmplY3QoJHRoaXMpCiAgICAgICwgbGVuZ3RoID0gdG9MZW5ndGgoTy5sZW5ndGgpCiAgICAgICwgaW5kZXggID0gdG9JbmRleChmcm9tSW5kZXgsIGxlbmd0aCkKICAgICAgLCB2YWx1ZTsKICAgIC8vIEFycmF5I2luY2x1ZGVzIHVzZXMgU2FtZVZhbHVlWmVybyBlcXVhbGl0eSBhbGdvcml0aG0KICAgIGlmKElTX0lOQ0xVREVTICYmIGVsICE9IGVsKXdoaWxlKGxlbmd0aCA+IGluZGV4KXsKICAgICAgdmFsdWUgPSBPW2luZGV4KytdOwogICAgICBpZih2YWx1ZSAhPSB2YWx1ZSlyZXR1cm4gdHJ1ZTsKICAgIC8vIEFycmF5I3RvSW5kZXggaWdub3JlcyBob2xlcywgQXJyYXkjaW5jbHVkZXMgLSBub3QKICAgIH0gZWxzZSBmb3IoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKWlmKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pewogICAgICBpZihPW2luZGV4XSA9PT0gZWwpcmV0dXJuIElTX0lOQ0xVREVTIHx8IGluZGV4IHx8IDA7CiAgICB9IHJldHVybiAhSVNfSU5DTFVERVMgJiYgLTE7CiAgfTsKfTsKCi8qKiovIH0pLAovKiA2MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgY3JlYXRlICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KQogICwgZGVzY3JpcHRvciAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTsKCi8vIDI1LjEuMi4xLjEgJUl0ZXJhdG9yUHJvdG90eXBlJVtAQGl0ZXJhdG9yXSgpCl9fd2VicGFja19yZXF1aXJlX18oNikoSXRlcmF0b3JQcm90b3R5cGUsIF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJyksIGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9KTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpewogIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwge25leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCl9KTsKICBzZXRUb1N0cmluZ1RhZyhDb25zdHJ1Y3RvciwgTkFNRSArICcgSXRlcmF0b3InKTsKfTsKCi8qKiovIH0pLAovKiA2MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRvbmUsIHZhbHVlKXsKICByZXR1cm4ge3ZhbHVlOiB2YWx1ZSwgZG9uZTogISFkb25lfTsKfTsKCi8qKiovIH0pLAovKiA2NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZFAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCiAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7Cgptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMykgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA6IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcyl7CiAgYW5PYmplY3QoTyk7CiAgdmFyIGtleXMgICA9IGdldEtleXMoUHJvcGVydGllcykKICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgKICAgICwgaSA9IDAKICAgICwgUDsKICB3aGlsZShsZW5ndGggPiBpKWRQLmYoTywgUCA9IGtleXNbaSsrXSwgUHJvcGVydGllc1tQXSk7CiAgcmV0dXJuIE87Cn07CgovKioqLyB9KSwKLyogNjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjcgLyAxNS4yLjMuNCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQp2YXIgJGtleXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpCiAgLCBoaWRkZW5LZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkuY29uY2F0KCdsZW5ndGgnLCAncHJvdG90eXBlJyk7CgpleHBvcnRzLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKE8pewogIHJldHVybiAka2V5cyhPLCBoaWRkZW5LZXlzKTsKfTsKCi8qKiovIH0pLAovKiA2NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykKICAsIGRlZmluZWQgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwovLyB0cnVlICAtPiBTdHJpbmcjYXQKLy8gZmFsc2UgLT4gU3RyaW5nI2NvZGVQb2ludEF0Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oVE9fU1RSSU5HKXsKICByZXR1cm4gZnVuY3Rpb24odGhhdCwgcG9zKXsKICAgIHZhciBzID0gU3RyaW5nKGRlZmluZWQodGhhdCkpCiAgICAgICwgaSA9IHRvSW50ZWdlcihwb3MpCiAgICAgICwgbCA9IHMubGVuZ3RoCiAgICAgICwgYSwgYjsKICAgIGlmKGkgPCAwIHx8IGkgPj0gbClyZXR1cm4gVE9fU1RSSU5HID8gJycgOiB1bmRlZmluZWQ7CiAgICBhID0gcy5jaGFyQ29kZUF0KGkpOwogICAgcmV0dXJuIGEgPCAweGQ4MDAgfHwgYSA+IDB4ZGJmZiB8fCBpICsgMSA9PT0gbCB8fCAoYiA9IHMuY2hhckNvZGVBdChpICsgMSkpIDwgMHhkYzAwIHx8IGIgPiAweGRmZmYKICAgICAgPyBUT19TVFJJTkcgPyBzLmNoYXJBdChpKSA6IGEKICAgICAgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7CiAgfTsKfTsKCi8qKiovIH0pLAovKiA2NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKICAsIGludm9rZSAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpCiAgLCBodG1sICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKQogICwgY2VsICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkKICAsIGdsb2JhbCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCBzZXRUYXNrICAgICAgICAgICAgPSBnbG9iYWwuc2V0SW1tZWRpYXRlCiAgLCBjbGVhclRhc2sgICAgICAgICAgPSBnbG9iYWwuY2xlYXJJbW1lZGlhdGUKICAsIE1lc3NhZ2VDaGFubmVsICAgICA9IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbAogICwgY291bnRlciAgICAgICAgICAgID0gMAogICwgcXVldWUgICAgICAgICAgICAgID0ge30KICAsIE9OUkVBRFlTVEFURUNIQU5HRSA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnCiAgLCBkZWZlciwgY2hhbm5lbCwgcG9ydDsKdmFyIHJ1biA9IGZ1bmN0aW9uKCl7CiAgdmFyIGlkID0gK3RoaXM7CiAgaWYocXVldWUuaGFzT3duUHJvcGVydHkoaWQpKXsKICAgIHZhciBmbiA9IHF1ZXVlW2lkXTsKICAgIGRlbGV0ZSBxdWV1ZVtpZF07CiAgICBmbigpOwogIH0KfTsKdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQpewogIHJ1bi5jYWxsKGV2ZW50LmRhdGEpOwp9OwovLyBOb2RlLmpzIDAuOSsgJiBJRTEwKyBoYXMgc2V0SW1tZWRpYXRlLCBvdGhlcndpc2U6CmlmKCFzZXRUYXNrIHx8ICFjbGVhclRhc2spewogIHNldFRhc2sgPSBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoZm4pewogICAgdmFyIGFyZ3MgPSBbXSwgaSA9IDE7CiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOwogICAgcXVldWVbKytjb3VudGVyXSA9IGZ1bmN0aW9uKCl7CiAgICAgIGludm9rZSh0eXBlb2YgZm4gPT0gJ2Z1bmN0aW9uJyA/IGZuIDogRnVuY3Rpb24oZm4pLCBhcmdzKTsKICAgIH07CiAgICBkZWZlcihjb3VudGVyKTsKICAgIHJldHVybiBjb3VudGVyOwogIH07CiAgY2xlYXJUYXNrID0gZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaWQpewogICAgZGVsZXRlIHF1ZXVlW2lkXTsKICB9OwogIC8vIE5vZGUuanMgMC44LQogIGlmKF9fd2VicGFja19yZXF1aXJlX18oMTgpKHByb2Nlc3MpID09ICdwcm9jZXNzJyl7CiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgcHJvY2Vzcy5uZXh0VGljayhjdHgocnVuLCBpZCwgMSkpOwogICAgfTsKICAvLyBCcm93c2VycyB3aXRoIE1lc3NhZ2VDaGFubmVsLCBpbmNsdWRlcyBXZWJXb3JrZXJzCiAgfSBlbHNlIGlmKE1lc3NhZ2VDaGFubmVsKXsKICAgIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWw7CiAgICBwb3J0ICAgID0gY2hhbm5lbC5wb3J0MjsKICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGlzdGVuZXI7CiAgICBkZWZlciA9IGN0eChwb3J0LnBvc3RNZXNzYWdlLCBwb3J0LCAxKTsKICAvLyBCcm93c2VycyB3aXRoIHBvc3RNZXNzYWdlLCBza2lwIFdlYldvcmtlcnMKICAvLyBJRTggaGFzIHBvc3RNZXNzYWdlLCBidXQgaXQncyBzeW5jICYgdHlwZW9mIGl0cyBwb3N0TWVzc2FnZSBpcyAnb2JqZWN0JwogIH0gZWxzZSBpZihnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lciAmJiB0eXBlb2YgcG9zdE1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJyAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpewogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7CiAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShpZCArICcnLCAnKicpOwogICAgfTsKICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIsIGZhbHNlKTsKICAvLyBJRTgtCiAgfSBlbHNlIGlmKE9OUkVBRFlTVEFURUNIQU5HRSBpbiBjZWwoJ3NjcmlwdCcpKXsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBodG1sLmFwcGVuZENoaWxkKGNlbCgnc2NyaXB0JykpW09OUkVBRFlTVEFURUNIQU5HRV0gPSBmdW5jdGlvbigpewogICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQodGhpcyk7CiAgICAgICAgcnVuLmNhbGwoaWQpOwogICAgICB9OwogICAgfTsKICAvLyBSZXN0IG9sZCBicm93c2VycwogIH0gZWxzZSB7CiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApOwogICAgfTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2V0OiAgIHNldFRhc2ssCiAgY2xlYXI6IGNsZWFyVGFzawp9OwoKLyoqKi8gfSksCi8qIDY4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KQogICwgbWF4ICAgICAgID0gTWF0aC5tYXgKICAsIG1pbiAgICAgICA9IE1hdGgubWluOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGluZGV4LCBsZW5ndGgpewogIGluZGV4ID0gdG9JbnRlZ2VyKGluZGV4KTsKICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbihpbmRleCwgbGVuZ3RoKTsKfTsKCi8qKiovIH0pLAovKiA2OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgYWRkVG9VbnNjb3BhYmxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApCiAgLCBzdGVwICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MykKICAsIEl0ZXJhdG9ycyAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQogICwgdG9JT2JqZWN0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwoKLy8gMjIuMS4zLjQgQXJyYXkucHJvdG90eXBlLmVudHJpZXMoKQovLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKQovLyAyMi4xLjMuMjkgQXJyYXkucHJvdG90eXBlLnZhbHVlcygpCi8vIDIyLjEuMy4zMCBBcnJheS5wcm90b3R5cGVbQEBpdGVyYXRvcl0oKQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7CiAgdGhpcy5fdCA9IHRvSU9iamVjdChpdGVyYXRlZCk7IC8vIHRhcmdldAogIHRoaXMuX2kgPSAwOyAgICAgICAgICAgICAgICAgICAvLyBuZXh0IGluZGV4CiAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmQKLy8gMjIuMS41LjIuMSAlQXJyYXlJdGVyYXRvclByb3RvdHlwZSUubmV4dCgpCn0sIGZ1bmN0aW9uKCl7CiAgdmFyIE8gICAgID0gdGhpcy5fdAogICAgLCBraW5kICA9IHRoaXMuX2sKICAgICwgaW5kZXggPSB0aGlzLl9pKys7CiAgaWYoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpewogICAgdGhpcy5fdCA9IHVuZGVmaW5lZDsKICAgIHJldHVybiBzdGVwKDEpOwogIH0KICBpZihraW5kID09ICdrZXlzJyAgKXJldHVybiBzdGVwKDAsIGluZGV4KTsKICBpZihraW5kID09ICd2YWx1ZXMnKXJldHVybiBzdGVwKDAsIE9baW5kZXhdKTsKICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7Cn0sICd2YWx1ZXMnKTsKCi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNykKSXRlcmF0b3JzLkFyZ3VtZW50cyA9IEl0ZXJhdG9ycy5BcnJheTsKCmFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTsKYWRkVG9VbnNjb3BhYmxlcygndmFsdWVzJyk7CmFkZFRvVW5zY29wYWJsZXMoJ2VudHJpZXMnKTsKCi8qKiovIH0pLAovKiA3MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDcxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODIpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIE1FVEEgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykoJ21ldGEnKQogICwgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBoYXMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCBzZXREZXNjICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZgogICwgaWQgICAgICAgPSAwOwp2YXIgaXNFeHRlbnNpYmxlID0gT2JqZWN0LmlzRXh0ZW5zaWJsZSB8fCBmdW5jdGlvbigpewogIHJldHVybiB0cnVlOwp9Owp2YXIgRlJFRVpFID0gIV9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7CiAgcmV0dXJuIGlzRXh0ZW5zaWJsZShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKTsKfSk7CnZhciBzZXRNZXRhID0gZnVuY3Rpb24oaXQpewogIHNldERlc2MoaXQsIE1FVEEsIHt2YWx1ZTogewogICAgaTogJ08nICsgKytpZCwgLy8gb2JqZWN0IElECiAgICB3OiB7fSAgICAgICAgICAvLyB3ZWFrIGNvbGxlY3Rpb25zIElEcwogIH19KTsKfTsKdmFyIGZhc3RLZXkgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsKICAvLyByZXR1cm4gcHJpbWl0aXZlIHdpdGggcHJlZml4CiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnID8gaXQgOiAodHlwZW9mIGl0ID09ICdzdHJpbmcnID8gJ1MnIDogJ1AnKSArIGl0OwogIGlmKCFoYXMoaXQsIE1FVEEpKXsKICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gJ0YnOwogICAgLy8gbm90IG5lY2Vzc2FyeSB0byBhZGQgbWV0YWRhdGEKICAgIGlmKCFjcmVhdGUpcmV0dXJuICdFJzsKICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCiAgICBzZXRNZXRhKGl0KTsKICAvLyByZXR1cm4gb2JqZWN0IElECiAgfSByZXR1cm4gaXRbTUVUQV0uaTsKfTsKdmFyIGdldFdlYWsgPSBmdW5jdGlvbihpdCwgY3JlYXRlKXsKICBpZighaGFzKGl0LCBNRVRBKSl7CiAgICAvLyBjYW4ndCBzZXQgbWV0YWRhdGEgdG8gdW5jYXVnaHQgZnJvemVuIG9iamVjdAogICAgaWYoIWlzRXh0ZW5zaWJsZShpdCkpcmV0dXJuIHRydWU7CiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQogICAgaWYoIWNyZWF0ZSlyZXR1cm4gZmFsc2U7CiAgICAvLyBhZGQgbWlzc2luZyBtZXRhZGF0YQogICAgc2V0TWV0YShpdCk7CiAgLy8gcmV0dXJuIGhhc2ggd2VhayBjb2xsZWN0aW9ucyBJRHMKICB9IHJldHVybiBpdFtNRVRBXS53Owp9OwovLyBhZGQgbWV0YWRhdGEgb24gZnJlZXplLWZhbWlseSBtZXRob2RzIGNhbGxpbmcKdmFyIG9uRnJlZXplID0gZnVuY3Rpb24oaXQpewogIGlmKEZSRUVaRSAmJiBtZXRhLk5FRUQgJiYgaXNFeHRlbnNpYmxlKGl0KSAmJiAhaGFzKGl0LCBNRVRBKSlzZXRNZXRhKGl0KTsKICByZXR1cm4gaXQ7Cn07CnZhciBtZXRhID0gbW9kdWxlLmV4cG9ydHMgPSB7CiAgS0VZOiAgICAgIE1FVEEsCiAgTkVFRDogICAgIGZhbHNlLAogIGZhc3RLZXk6ICBmYXN0S2V5LAogIGdldFdlYWs6ICBnZXRXZWFrLAogIG9uRnJlZXplOiBvbkZyZWV6ZQp9OwoKLyoqKi8gfSksCi8qIDczICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjbGFzc29mICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KQogICwgSVRFUkFUT1IgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnaXRlcmF0b3InKQogICwgSXRlcmF0b3JzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5nZXRJdGVyYXRvck1ldGhvZCA9IGZ1bmN0aW9uKGl0KXsKICBpZihpdCAhPSB1bmRlZmluZWQpcmV0dXJuIGl0W0lURVJBVE9SXQogICAgfHwgaXRbJ0BAaXRlcmF0b3InXQogICAgfHwgSXRlcmF0b3JzW2NsYXNzb2YoaXQpXTsKfTsKCi8qKiovIH0pLAovKiA3NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDc1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODEpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA3NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDc4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTAwKTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGUoUCwgRCl7CiAgcmV0dXJuICRPYmplY3QuY3JlYXRlKFAsIEQpOwp9OwoKLyoqKi8gfSksCi8qIDc5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTAxKTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5nZXRQcm90b3R5cGVPZjsKCi8qKiovIH0pLAovKiA4MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Qua2V5czsKCi8qKiovIH0pLAovKiA4MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3Quc2V0UHJvdG90eXBlT2Y7CgovKioqLyB9KSwKLyogODIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7Cl9fd2VicGFja19yZXF1aXJlX18oNTApOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTsKX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpOwptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuUHJvbWlzZTsKCi8qKiovIH0pLAovKiA4MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSk7Cl9fd2VicGFja19yZXF1aXJlX18oNTQpOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNik7Cl9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlN5bWJvbDsKCi8qKiovIH0pLAovKiA4NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsKX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkuZignaXRlcmF0b3InKTsKCi8qKiovIH0pLAovKiA4NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBDb25zdHJ1Y3RvciwgbmFtZSwgZm9yYmlkZGVuRmllbGQpewogIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgKGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpKXsKICAgIHRocm93IFR5cGVFcnJvcihuYW1lICsgJzogaW5jb3JyZWN0IGludm9jYXRpb24hJyk7CiAgfSByZXR1cm4gaXQ7Cn07CgovKioqLyB9KSwKLyogODYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gYWxsIGVudW1lcmFibGUgb2JqZWN0IGtleXMsIGluY2x1ZGVzIHN5bWJvbHMKdmFyIGdldEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQogICwgZ09QUyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpCiAgLCBwSUUgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHZhciByZXN1bHQgICAgID0gZ2V0S2V5cyhpdCkKICAgICwgZ2V0U3ltYm9scyA9IGdPUFMuZjsKICBpZihnZXRTeW1ib2xzKXsKICAgIHZhciBzeW1ib2xzID0gZ2V0U3ltYm9scyhpdCkKICAgICAgLCBpc0VudW0gID0gcElFLmYKICAgICAgLCBpICAgICAgID0gMAogICAgICAsIGtleTsKICAgIHdoaWxlKHN5bWJvbHMubGVuZ3RoID4gaSlpZihpc0VudW0uY2FsbChpdCwga2V5ID0gc3ltYm9sc1tpKytdKSlyZXN1bHQucHVzaChrZXkpOwogIH0gcmV0dXJuIHJlc3VsdDsKfTsKCi8qKiovIH0pLAovKiA4NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgY3R4ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQogICwgY2FsbCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKQogICwgaXNBcnJheUl0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg5KQogICwgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCB0b0xlbmd0aCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpCiAgLCBnZXRJdGVyRm4gICA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpCiAgLCBCUkVBSyAgICAgICA9IHt9CiAgLCBSRVRVUk4gICAgICA9IHt9Owp2YXIgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmFibGUsIGVudHJpZXMsIGZuLCB0aGF0LCBJVEVSQVRPUil7CiAgdmFyIGl0ZXJGbiA9IElURVJBVE9SID8gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXJhYmxlOyB9IDogZ2V0SXRlckZuKGl0ZXJhYmxlKQogICAgLCBmICAgICAgPSBjdHgoZm4sIHRoYXQsIGVudHJpZXMgPyAyIDogMSkKICAgICwgaW5kZXggID0gMAogICAgLCBsZW5ndGgsIHN0ZXAsIGl0ZXJhdG9yLCByZXN1bHQ7CiAgaWYodHlwZW9mIGl0ZXJGbiAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdGVyYWJsZSArICcgaXMgbm90IGl0ZXJhYmxlIScpOwogIC8vIGZhc3QgY2FzZSBmb3IgYXJyYXlzIHdpdGggZGVmYXVsdCBpdGVyYXRvcgogIGlmKGlzQXJyYXlJdGVyKGl0ZXJGbikpZm9yKGxlbmd0aCA9IHRvTGVuZ3RoKGl0ZXJhYmxlLmxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKXsKICAgIHJlc3VsdCA9IGVudHJpZXMgPyBmKGFuT2JqZWN0KHN0ZXAgPSBpdGVyYWJsZVtpbmRleF0pWzBdLCBzdGVwWzFdKSA6IGYoaXRlcmFibGVbaW5kZXhdKTsKICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsKICB9IGVsc2UgZm9yKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoaXRlcmFibGUpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7ICl7CiAgICByZXN1bHQgPSBjYWxsKGl0ZXJhdG9yLCBmLCBzdGVwLnZhbHVlLCBlbnRyaWVzKTsKICAgIGlmKHJlc3VsdCA9PT0gQlJFQUsgfHwgcmVzdWx0ID09PSBSRVRVUk4pcmV0dXJuIHJlc3VsdDsKICB9Cn07CmV4cG9ydHMuQlJFQUsgID0gQlJFQUs7CmV4cG9ydHMuUkVUVVJOID0gUkVUVVJOOwoKLyoqKi8gfSksCi8qIDg4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCBhcmdzLCB0aGF0KXsKICB2YXIgdW4gPSB0aGF0ID09PSB1bmRlZmluZWQ7CiAgc3dpdGNoKGFyZ3MubGVuZ3RoKXsKICAgIGNhc2UgMDogcmV0dXJuIHVuID8gZm4oKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQpOwogICAgY2FzZSAxOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0pOwogICAgY2FzZSAyOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0pOwogICAgY2FzZSAzOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pOwogICAgY2FzZSA0OiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pOwogIH0gcmV0dXJuICAgICAgICAgICAgICBmbi5hcHBseSh0aGF0LCBhcmdzKTsKfTsKCi8qKiovIH0pLAovKiA4OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yCnZhciBJdGVyYXRvcnMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkKICAsIElURVJBVE9SICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKCdpdGVyYXRvcicpCiAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTsKfTsKCi8qKiovIH0pLAovKiA5MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjIuMiBJc0FycmF5KGFyZ3VtZW50KQp2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7Cm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBpc0FycmF5KGFyZyl7CiAgcmV0dXJuIGNvZihhcmcpID09ICdBcnJheSc7Cn07CgovKioqLyB9KSwKLyogOTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gY2FsbCBzb21ldGhpbmcgb24gaXRlcmF0b3Igc3RlcCB3aXRoIHNhZmUgY2xvc2luZyBvbiBlcnJvcgp2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0ZXJhdG9yLCBmbiwgdmFsdWUsIGVudHJpZXMpewogIHRyeSB7CiAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpOwogIC8vIDcuNC42IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGNvbXBsZXRpb24pCiAgfSBjYXRjaChlKXsKICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107CiAgICBpZihyZXQgIT09IHVuZGVmaW5lZClhbk9iamVjdChyZXQuY2FsbChpdGVyYXRvcikpOwogICAgdGhyb3cgZTsKICB9Cn07CgovKioqLyB9KSwKLyogOTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIElURVJBVE9SICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ2l0ZXJhdG9yJykKICAsIFNBRkVfQ0xPU0lORyA9IGZhbHNlOwoKdHJ5IHsKICB2YXIgcml0ZXIgPSBbN11bSVRFUkFUT1JdKCk7CiAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24oKXsgU0FGRV9DTE9TSU5HID0gdHJ1ZTsgfTsKICBBcnJheS5mcm9tKHJpdGVyLCBmdW5jdGlvbigpeyB0aHJvdyAyOyB9KTsKfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjLCBza2lwQ2xvc2luZyl7CiAgaWYoIXNraXBDbG9zaW5nICYmICFTQUZFX0NMT1NJTkcpcmV0dXJuIGZhbHNlOwogIHZhciBzYWZlID0gZmFsc2U7CiAgdHJ5IHsKICAgIHZhciBhcnIgID0gWzddCiAgICAgICwgaXRlciA9IGFycltJVEVSQVRPUl0oKTsKICAgIGl0ZXIubmV4dCA9IGZ1bmN0aW9uKCl7IHJldHVybiB7ZG9uZTogc2FmZSA9IHRydWV9OyB9OwogICAgYXJyW0lURVJBVE9SXSA9IGZ1bmN0aW9uKCl7IHJldHVybiBpdGVyOyB9OwogICAgZXhlYyhhcnIpOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICByZXR1cm4gc2FmZTsKfTsKCi8qKiovIH0pLAovKiA5MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2V0S2V5cyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykKICAsIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgZWwpewogIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQogICAgLCBrZXlzICAgPSBnZXRLZXlzKE8pCiAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoCiAgICAsIGluZGV4ICA9IDAKICAgICwga2V5OwogIHdoaWxlKGxlbmd0aCA+IGluZGV4KWlmKE9ba2V5ID0ga2V5c1tpbmRleCsrXV0gPT09IGVsKXJldHVybiBrZXk7Cn07CgovKioqLyB9KSwKLyogOTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIG1hY3JvdGFzayA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpLnNldAogICwgT2JzZXJ2ZXIgID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIKICAsIHByb2Nlc3MgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCBQcm9taXNlICAgPSBnbG9iYWwuUHJvbWlzZQogICwgaXNOb2RlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpewogIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7CgogIHZhciBmbHVzaCA9IGZ1bmN0aW9uKCl7CiAgICB2YXIgcGFyZW50LCBmbjsKICAgIGlmKGlzTm9kZSAmJiAocGFyZW50ID0gcHJvY2Vzcy5kb21haW4pKXBhcmVudC5leGl0KCk7CiAgICB3aGlsZShoZWFkKXsKICAgICAgZm4gICA9IGhlYWQuZm47CiAgICAgIGhlYWQgPSBoZWFkLm5leHQ7CiAgICAgIHRyeSB7CiAgICAgICAgZm4oKTsKICAgICAgfSBjYXRjaChlKXsKICAgICAgICBpZihoZWFkKW5vdGlmeSgpOwogICAgICAgIGVsc2UgbGFzdCA9IHVuZGVmaW5lZDsKICAgICAgICB0aHJvdyBlOwogICAgICB9CiAgICB9IGxhc3QgPSB1bmRlZmluZWQ7CiAgICBpZihwYXJlbnQpcGFyZW50LmVudGVyKCk7CiAgfTsKCiAgLy8gTm9kZS5qcwogIGlmKGlzTm9kZSl7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTsKICAgIH07CiAgLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyCiAgfSBlbHNlIGlmKE9ic2VydmVyKXsKICAgIHZhciB0b2dnbGUgPSB0cnVlCiAgICAgICwgbm9kZSAgID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpOwogICAgbmV3IE9ic2VydmVyKGZsdXNoKS5vYnNlcnZlKG5vZGUsIHtjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmV3CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlOwogICAgfTsKICAvLyBlbnZpcm9ubWVudHMgd2l0aCBtYXliZSBub24tY29tcGxldGVseSBjb3JyZWN0LCBidXQgZXhpc3RlbnQgUHJvbWlzZQogIH0gZWxzZSBpZihQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSl7CiAgICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpOwogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsKICAgICAgcHJvbWlzZS50aGVuKGZsdXNoKTsKICAgIH07CiAgLy8gZm9yIG90aGVyIGVudmlyb25tZW50cyAtIG1hY3JvdGFzayBiYXNlZCBvbjoKICAvLyAtIHNldEltbWVkaWF0ZQogIC8vIC0gTWVzc2FnZUNoYW5uZWwKICAvLyAtIHdpbmRvdy5wb3N0TWVzc2FnCiAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2UKICAvLyAtIHNldFRpbWVvdXQKICB9IGVsc2UgewogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsKICAgICAgLy8gc3RyYW5nZSBJRSArIHdlYnBhY2sgZGV2IHNlcnZlciBidWcgLSB1c2UgLmNhbGwoZ2xvYmFsKQogICAgICBtYWNyb3Rhc2suY2FsbChnbG9iYWwsIGZsdXNoKTsKICAgIH07CiAgfQoKICByZXR1cm4gZnVuY3Rpb24oZm4pewogICAgdmFyIHRhc2sgPSB7Zm46IGZuLCBuZXh0OiB1bmRlZmluZWR9OwogICAgaWYobGFzdClsYXN0Lm5leHQgPSB0YXNrOwogICAgaWYoIWhlYWQpewogICAgICBoZWFkID0gdGFzazsKICAgICAgbm90aWZ5KCk7CiAgICB9IGxhc3QgPSB0YXNrOwogIH07Cn07CgovKioqLyB9KSwKLyogOTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZmFsbGJhY2sgZm9yIElFMTEgYnVnZ3kgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMgd2l0aCBpZnJhbWUgYW5kIHdpbmRvdwp2YXIgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIGdPUE4gICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpLmYKICAsIHRvU3RyaW5nICA9IHt9LnRvU3RyaW5nOwoKdmFyIHdpbmRvd05hbWVzID0gdHlwZW9mIHdpbmRvdyA9PSAnb2JqZWN0JyAmJiB3aW5kb3cgJiYgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMKICA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTsKCnZhciBnZXRXaW5kb3dOYW1lcyA9IGZ1bmN0aW9uKGl0KXsKICB0cnkgewogICAgcmV0dXJuIGdPUE4oaXQpOwogIH0gY2F0Y2goZSl7CiAgICByZXR1cm4gd2luZG93TmFtZXMuc2xpY2UoKTsKICB9Cn07Cgptb2R1bGUuZXhwb3J0cy5mID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7CiAgcmV0dXJuIHdpbmRvd05hbWVzICYmIHRvU3RyaW5nLmNhbGwoaXQpID09ICdbb2JqZWN0IFdpbmRvd10nID8gZ2V0V2luZG93TmFtZXMoaXQpIDogZ09QTih0b0lPYmplY3QoaXQpKTsKfTsKCgovKioqLyB9KSwKLyogOTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGhpZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldCwgc3JjLCBzYWZlKXsKICBmb3IodmFyIGtleSBpbiBzcmMpewogICAgaWYoc2FmZSAmJiB0YXJnZXRba2V5XSl0YXJnZXRba2V5XSA9IHNyY1trZXldOwogICAgZWxzZSBoaWRlKHRhcmdldCwga2V5LCBzcmNba2V5XSk7CiAgfSByZXR1cm4gdGFyZ2V0Owp9OwoKLyoqKi8gfSksCi8qIDk3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIFdvcmtzIHdpdGggX19wcm90b19fIG9ubHkuIE9sZCB2OCBjYW4ndCB3b3JrIHdpdGggbnVsbCBwcm90byBvYmplY3RzLgovKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqLwp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7CnZhciBjaGVjayA9IGZ1bmN0aW9uKE8sIHByb3RvKXsKICBhbk9iamVjdChPKTsKICBpZighaXNPYmplY3QocHJvdG8pICYmIHByb3RvICE9PSBudWxsKXRocm93IFR5cGVFcnJvcihwcm90byArICI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhIik7Cn07Cm1vZHVsZS5leHBvcnRzID0gewogIHNldDogT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8ICgnX19wcm90b19fJyBpbiB7fSA/IC8vIGVzbGludC1kaXNhYmxlLWxpbmUKICAgIGZ1bmN0aW9uKHRlc3QsIGJ1Z2d5LCBzZXQpewogICAgICB0cnkgewogICAgICAgIHNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpKEZ1bmN0aW9uLmNhbGwsIF9fd2VicGFja19yZXF1aXJlX18oNTcpLmYoT2JqZWN0LnByb3RvdHlwZSwgJ19fcHJvdG9fXycpLnNldCwgMik7CiAgICAgICAgc2V0KHRlc3QsIFtdKTsKICAgICAgICBidWdneSA9ICEodGVzdCBpbnN0YW5jZW9mIEFycmF5KTsKICAgICAgfSBjYXRjaChlKXsgYnVnZ3kgPSB0cnVlOyB9CiAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihPLCBwcm90byl7CiAgICAgICAgY2hlY2soTywgcHJvdG8pOwogICAgICAgIGlmKGJ1Z2d5KU8uX19wcm90b19fID0gcHJvdG87CiAgICAgICAgZWxzZSBzZXQoTywgcHJvdG8pOwogICAgICAgIHJldHVybiBPOwogICAgICB9OwogICAgfSh7fSwgZmFsc2UpIDogdW5kZWZpbmVkKSwKICBjaGVjazogY2hlY2sKfTsKCi8qKiovIH0pLAovKiA5OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Cgp2YXIgZ2xvYmFsICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBjb3JlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGRQICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQogICwgREVTQ1JJUFRPUlMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpCiAgLCBTUEVDSUVTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZKXsKICB2YXIgQyA9IHR5cGVvZiBjb3JlW0tFWV0gPT0gJ2Z1bmN0aW9uJyA/IGNvcmVbS0VZXSA6IGdsb2JhbFtLRVldOwogIGlmKERFU0NSSVBUT1JTICYmIEMgJiYgIUNbU1BFQ0lFU10pZFAuZihDLCBTUEVDSUVTLCB7CiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9CiAgfSk7Cn07CgovKioqLyB9KSwKLyogOTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCnZhciBhbk9iamVjdCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQogICwgU1BFQ0lFUyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSgnc3BlY2llcycpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE8sIEQpewogIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3IsIFM7CiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpOwp9OwoKLyoqKi8gfSksCi8qIDEwMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOCkKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge2NyZWF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXygzNSl9KTsKCi8qKiovIH0pLAovKiAxMDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciB0b09iamVjdCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQogICwgJGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0UHJvdG90eXBlT2YnLCBmdW5jdGlvbigpewogIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCl7CiAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7CiAgfTsKfSk7CgovKioqLyB9KSwKLyogMTAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKQp2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQogICwgJGtleXMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCl9fd2VicGFja19yZXF1aXJlX18oNDUpKCdrZXlzJywgZnVuY3Rpb24oKXsKICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7CiAgICByZXR1cm4gJGtleXModG9PYmplY3QoaXQpKTsKICB9Owp9KTsKCi8qKiovIH0pLAovKiAxMDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykKdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwokZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXyg5Nykuc2V0fSk7CgovKioqLyB9KSwKLyogMTA0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBMSUJSQVJZICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKICAsIGNsYXNzb2YgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpCiAgLCAkZXhwb3J0ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCiAgLCBpc09iamVjdCAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBhRnVuY3Rpb24gICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQogICwgYW5JbnN0YW5jZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSkKICAsIGZvck9mICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODcpCiAgLCBzcGVjaWVzQ29uc3RydWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KQogICwgdGFzayAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0CiAgLCBtaWNyb3Rhc2sgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KSgpCiAgLCBQUk9NSVNFICAgICAgICAgICAgPSAnUHJvbWlzZScKICAsIFR5cGVFcnJvciAgICAgICAgICA9IGdsb2JhbC5UeXBlRXJyb3IKICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCAkUHJvbWlzZSAgICAgICAgICAgPSBnbG9iYWxbUFJPTUlTRV0KICAsIHByb2Nlc3MgICAgICAgICAgICA9IGdsb2JhbC5wcm9jZXNzCiAgLCBpc05vZGUgICAgICAgICAgICAgPSBjbGFzc29mKHByb2Nlc3MpID09ICdwcm9jZXNzJwogICwgZW1wdHkgICAgICAgICAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfQogICwgSW50ZXJuYWwsIEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSwgV3JhcHBlcjsKCnZhciBVU0VfTkFUSVZFID0gISFmdW5jdGlvbigpewogIHRyeSB7CiAgICAvLyBjb3JyZWN0IHN1YmNsYXNzaW5nIHdpdGggQEBzcGVjaWVzIHN1cHBvcnQKICAgIHZhciBwcm9taXNlICAgICA9ICRQcm9taXNlLnJlc29sdmUoMSkKICAgICAgLCBGYWtlUHJvbWlzZSA9IChwcm9taXNlLmNvbnN0cnVjdG9yID0ge30pW19fd2VicGFja19yZXF1aXJlX18oMikoJ3NwZWNpZXMnKV0gPSBmdW5jdGlvbihleGVjKXsgZXhlYyhlbXB0eSwgZW1wdHkpOyB9OwogICAgLy8gdW5oYW5kbGVkIHJlamVjdGlvbnMgdHJhY2tpbmcgc3VwcG9ydCwgTm9kZUpTIFByb21pc2Ugd2l0aG91dCBpdCBmYWlscyBAQHNwZWNpZXMgdGVzdAogICAgcmV0dXJuIChpc05vZGUgfHwgdHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCA9PSAnZnVuY3Rpb24nKSAmJiBwcm9taXNlLnRoZW4oZW1wdHkpIGluc3RhbmNlb2YgRmFrZVByb21pc2U7CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQp9KCk7CgovLyBoZWxwZXJzCnZhciBzYW1lQ29uc3RydWN0b3IgPSBmdW5jdGlvbihhLCBiKXsKICAvLyB3aXRoIGxpYnJhcnkgd3JhcHBlciBzcGVjaWFsIGNhc2UKICByZXR1cm4gYSA9PT0gYiB8fCBhID09PSAkUHJvbWlzZSAmJiBiID09PSBXcmFwcGVyOwp9Owp2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uKGl0KXsKICB2YXIgdGhlbjsKICByZXR1cm4gaXNPYmplY3QoaXQpICYmIHR5cGVvZiAodGhlbiA9IGl0LnRoZW4pID09ICdmdW5jdGlvbicgPyB0aGVuIDogZmFsc2U7Cn07CnZhciBuZXdQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpewogIHJldHVybiBzYW1lQ29uc3RydWN0b3IoJFByb21pc2UsIEMpCiAgICA/IG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKQogICAgOiBuZXcgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5KEMpOwp9Owp2YXIgUHJvbWlzZUNhcGFiaWxpdHkgPSBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsKICB2YXIgcmVzb2x2ZSwgcmVqZWN0OwogIHRoaXMucHJvbWlzZSA9IG5ldyBDKGZ1bmN0aW9uKCQkcmVzb2x2ZSwgJCRyZWplY3QpewogICAgaWYocmVzb2x2ZSAhPT0gdW5kZWZpbmVkIHx8IHJlamVjdCAhPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTsKICAgIHJlc29sdmUgPSAkJHJlc29sdmU7CiAgICByZWplY3QgID0gJCRyZWplY3Q7CiAgfSk7CiAgdGhpcy5yZXNvbHZlID0gYUZ1bmN0aW9uKHJlc29sdmUpOwogIHRoaXMucmVqZWN0ICA9IGFGdW5jdGlvbihyZWplY3QpOwp9Owp2YXIgcGVyZm9ybSA9IGZ1bmN0aW9uKGV4ZWMpewogIHRyeSB7CiAgICBleGVjKCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB7ZXJyb3I6IGV9OwogIH0KfTsKdmFyIG5vdGlmeSA9IGZ1bmN0aW9uKHByb21pc2UsIGlzUmVqZWN0KXsKICBpZihwcm9taXNlLl9uKXJldHVybjsKICBwcm9taXNlLl9uID0gdHJ1ZTsKICB2YXIgY2hhaW4gPSBwcm9taXNlLl9jOwogIG1pY3JvdGFzayhmdW5jdGlvbigpewogICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdgogICAgICAsIG9rICAgID0gcHJvbWlzZS5fcyA9PSAxCiAgICAgICwgaSAgICAgPSAwOwogICAgdmFyIHJ1biA9IGZ1bmN0aW9uKHJlYWN0aW9uKXsKICAgICAgdmFyIGhhbmRsZXIgPSBvayA/IHJlYWN0aW9uLm9rIDogcmVhY3Rpb24uZmFpbAogICAgICAgICwgcmVzb2x2ZSA9IHJlYWN0aW9uLnJlc29sdmUKICAgICAgICAsIHJlamVjdCAgPSByZWFjdGlvbi5yZWplY3QKICAgICAgICAsIGRvbWFpbiAgPSByZWFjdGlvbi5kb21haW4KICAgICAgICAsIHJlc3VsdCwgdGhlbjsKICAgICAgdHJ5IHsKICAgICAgICBpZihoYW5kbGVyKXsKICAgICAgICAgIGlmKCFvayl7CiAgICAgICAgICAgIGlmKHByb21pc2UuX2ggPT0gMilvbkhhbmRsZVVuaGFuZGxlZChwcm9taXNlKTsKICAgICAgICAgICAgcHJvbWlzZS5faCA9IDE7CiAgICAgICAgICB9CiAgICAgICAgICBpZihoYW5kbGVyID09PSB0cnVlKXJlc3VsdCA9IHZhbHVlOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZW50ZXIoKTsKICAgICAgICAgICAgcmVzdWx0ID0gaGFuZGxlcih2YWx1ZSk7CiAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZXhpdCgpOwogICAgICAgICAgfQogICAgICAgICAgaWYocmVzdWx0ID09PSByZWFjdGlvbi5wcm9taXNlKXsKICAgICAgICAgICAgcmVqZWN0KFR5cGVFcnJvcignUHJvbWlzZS1jaGFpbiBjeWNsZScpKTsKICAgICAgICAgIH0gZWxzZSBpZih0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKXsKICAgICAgICAgICAgdGhlbi5jYWxsKHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgICAgIH0gZWxzZSByZXNvbHZlKHJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7CiAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9CiAgICB9OwogICAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSlydW4oY2hhaW5baSsrXSk7IC8vIHZhcmlhYmxlIGxlbmd0aCAtIGNhbid0IHVzZSBmb3JFYWNoCiAgICBwcm9taXNlLl9jID0gW107CiAgICBwcm9taXNlLl9uID0gZmFsc2U7CiAgICBpZihpc1JlamVjdCAmJiAhcHJvbWlzZS5faClvblVuaGFuZGxlZChwcm9taXNlKTsKICB9KTsKfTsKdmFyIG9uVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7CiAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsKICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YKICAgICAgLCBhYnJ1cHQsIGhhbmRsZXIsIGNvbnNvbGU7CiAgICBpZihpc1VuaGFuZGxlZChwcm9taXNlKSl7CiAgICAgIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsKICAgICAgICBpZihpc05vZGUpewogICAgICAgICAgcHJvY2Vzcy5lbWl0KCd1bmhhbmRsZWRSZWplY3Rpb24nLCB2YWx1ZSwgcHJvbWlzZSk7CiAgICAgICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub251bmhhbmRsZWRyZWplY3Rpb24pewogICAgICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiB2YWx1ZX0pOwogICAgICAgIH0gZWxzZSBpZigoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKXsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbicsIHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyBCcm93c2VycyBzaG91bGQgbm90IHRyaWdnZXIgYHJlamVjdGlvbkhhbmRsZWRgIGV2ZW50IGlmIGl0IHdhcyBoYW5kbGVkIGhlcmUsIE5vZGVKUyAtIHNob3VsZAogICAgICBwcm9taXNlLl9oID0gaXNOb2RlIHx8IGlzVW5oYW5kbGVkKHByb21pc2UpID8gMiA6IDE7CiAgICB9IHByb21pc2UuX2EgPSB1bmRlZmluZWQ7CiAgICBpZihhYnJ1cHQpdGhyb3cgYWJydXB0LmVycm9yOwogIH0pOwp9Owp2YXIgaXNVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsKICBpZihwcm9taXNlLl9oID09IDEpcmV0dXJuIGZhbHNlOwogIHZhciBjaGFpbiA9IHByb21pc2UuX2EgfHwgcHJvbWlzZS5fYwogICAgLCBpICAgICA9IDAKICAgICwgcmVhY3Rpb247CiAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSl7CiAgICByZWFjdGlvbiA9IGNoYWluW2krK107CiAgICBpZihyZWFjdGlvbi5mYWlsIHx8ICFpc1VuaGFuZGxlZChyZWFjdGlvbi5wcm9taXNlKSlyZXR1cm4gZmFsc2U7CiAgfSByZXR1cm4gdHJ1ZTsKfTsKdmFyIG9uSGFuZGxlVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7CiAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsKICAgIHZhciBoYW5kbGVyOwogICAgaWYoaXNOb2RlKXsKICAgICAgcHJvY2Vzcy5lbWl0KCdyZWplY3Rpb25IYW5kbGVkJywgcHJvbWlzZSk7CiAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnJlamVjdGlvbmhhbmRsZWQpewogICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHByb21pc2UuX3Z9KTsKICAgIH0KICB9KTsKfTsKdmFyICRyZWplY3QgPSBmdW5jdGlvbih2YWx1ZSl7CiAgdmFyIHByb21pc2UgPSB0aGlzOwogIGlmKHByb21pc2UuX2QpcmV0dXJuOwogIHByb21pc2UuX2QgPSB0cnVlOwogIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcAogIHByb21pc2UuX3YgPSB2YWx1ZTsKICBwcm9taXNlLl9zID0gMjsKICBpZighcHJvbWlzZS5fYSlwcm9taXNlLl9hID0gcHJvbWlzZS5fYy5zbGljZSgpOwogIG5vdGlmeShwcm9taXNlLCB0cnVlKTsKfTsKdmFyICRyZXNvbHZlID0gZnVuY3Rpb24odmFsdWUpewogIHZhciBwcm9taXNlID0gdGhpcwogICAgLCB0aGVuOwogIGlmKHByb21pc2UuX2QpcmV0dXJuOwogIHByb21pc2UuX2QgPSB0cnVlOwogIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcAogIHRyeSB7CiAgICBpZihwcm9taXNlID09PSB2YWx1ZSl0aHJvdyBUeXBlRXJyb3IoIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmIik7CiAgICBpZih0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpewogICAgICBtaWNyb3Rhc2soZnVuY3Rpb24oKXsKICAgICAgICB2YXIgd3JhcHBlciA9IHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfTsgLy8gd3JhcAogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGN0eCgkcmVzb2x2ZSwgd3JhcHBlciwgMSksIGN0eCgkcmVqZWN0LCB3cmFwcGVyLCAxKSk7CiAgICAgICAgfSBjYXRjaChlKXsKICAgICAgICAgICRyZWplY3QuY2FsbCh3cmFwcGVyLCBlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcHJvbWlzZS5fdiA9IHZhbHVlOwogICAgICBwcm9taXNlLl9zID0gMTsKICAgICAgbm90aWZ5KHByb21pc2UsIGZhbHNlKTsKICAgIH0KICB9IGNhdGNoKGUpewogICAgJHJlamVjdC5jYWxsKHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfSwgZSk7IC8vIHdyYXAKICB9Cn07CgovLyBjb25zdHJ1Y3RvciBwb2x5ZmlsbAppZighVVNFX05BVElWRSl7CiAgLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcikKICAkUHJvbWlzZSA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpewogICAgYW5JbnN0YW5jZSh0aGlzLCAkUHJvbWlzZSwgUFJPTUlTRSwgJ19oJyk7CiAgICBhRnVuY3Rpb24oZXhlY3V0b3IpOwogICAgSW50ZXJuYWwuY2FsbCh0aGlzKTsKICAgIHRyeSB7CiAgICAgIGV4ZWN1dG9yKGN0eCgkcmVzb2x2ZSwgdGhpcywgMSksIGN0eCgkcmVqZWN0LCB0aGlzLCAxKSk7CiAgICB9IGNhdGNoKGVycil7CiAgICAgICRyZWplY3QuY2FsbCh0aGlzLCBlcnIpOwogICAgfQogIH07CiAgSW50ZXJuYWwgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXsKICAgIHRoaXMuX2MgPSBbXTsgICAgICAgICAgICAgLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zCiAgICB0aGlzLl9hID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIGNoZWNrZWQgaW4gaXNVbmhhbmRsZWQgcmVhY3Rpb25zCiAgICB0aGlzLl9zID0gMDsgICAgICAgICAgICAgIC8vIDwtIHN0YXRlCiAgICB0aGlzLl9kID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIGRvbmUKICAgIHRoaXMuX3YgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gdmFsdWUKICAgIHRoaXMuX2ggPSAwOyAgICAgICAgICAgICAgLy8gPC0gcmVqZWN0aW9uIHN0YXRlLCAwIC0gZGVmYXVsdCwgMSAtIGhhbmRsZWQsIDIgLSB1bmhhbmRsZWQKICAgIHRoaXMuX24gPSBmYWxzZTsgICAgICAgICAgLy8gPC0gbm90aWZ5CiAgfTsKICBJbnRlcm5hbC5wcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSgkUHJvbWlzZS5wcm90b3R5cGUsIHsKICAgIC8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpCiAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKXsKICAgICAgdmFyIHJlYWN0aW9uICAgID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoc3BlY2llc0NvbnN0cnVjdG9yKHRoaXMsICRQcm9taXNlKSk7CiAgICAgIHJlYWN0aW9uLm9rICAgICA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiB0cnVlOwogICAgICByZWFjdGlvbi5mYWlsICAgPSB0eXBlb2Ygb25SZWplY3RlZCA9PSAnZnVuY3Rpb24nICYmIG9uUmVqZWN0ZWQ7CiAgICAgIHJlYWN0aW9uLmRvbWFpbiA9IGlzTm9kZSA/IHByb2Nlc3MuZG9tYWluIDogdW5kZWZpbmVkOwogICAgICB0aGlzLl9jLnB1c2gocmVhY3Rpb24pOwogICAgICBpZih0aGlzLl9hKXRoaXMuX2EucHVzaChyZWFjdGlvbik7CiAgICAgIGlmKHRoaXMuX3Mpbm90aWZ5KHRoaXMsIGZhbHNlKTsKICAgICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7CiAgICB9LAogICAgLy8gMjUuNC41LjEgUHJvbWlzZS5wcm90b3R5cGUuY2F0Y2gob25SZWplY3RlZCkKICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpewogICAgICByZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCk7CiAgICB9CiAgfSk7CiAgUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbigpewogICAgdmFyIHByb21pc2UgID0gbmV3IEludGVybmFsOwogICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTsKICAgIHRoaXMucmVzb2x2ZSA9IGN0eCgkcmVzb2x2ZSwgcHJvbWlzZSwgMSk7CiAgICB0aGlzLnJlamVjdCAgPSBjdHgoJHJlamVjdCwgcHJvbWlzZSwgMSk7CiAgfTsKfQoKJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1Byb21pc2U6ICRQcm9taXNlfSk7Cl9fd2VicGFja19yZXF1aXJlX18oMjEpKCRQcm9taXNlLCBQUk9NSVNFKTsKX193ZWJwYWNrX3JlcXVpcmVfXyg5OCkoUFJPTUlTRSk7CldyYXBwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApW1BST01JU0VdOwoKLy8gc3RhdGljcwokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCBQUk9NSVNFLCB7CiAgLy8gMjUuNC40LjUgUHJvbWlzZS5yZWplY3QocikKICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyKXsKICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcykKICAgICAgLCAkJHJlamVjdCAgID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICAkJHJlamVjdChyKTsKICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgfQp9KTsKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTElCUkFSWSB8fCAhVVNFX05BVElWRSksIFBST01JU0UsIHsKICAvLyAyNS40LjQuNiBQcm9taXNlLnJlc29sdmUoeCkKICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHgpewogICAgLy8gaW5zdGFuY2VvZiBpbnN0ZWFkIG9mIGludGVybmFsIHNsb3QgY2hlY2sgYmVjYXVzZSB3ZSBzaG91bGQgZml4IGl0IHdpdGhvdXQgcmVwbGFjZW1lbnQgbmF0aXZlIFByb21pc2UgY29yZQogICAgaWYoeCBpbnN0YW5jZW9mICRQcm9taXNlICYmIHNhbWVDb25zdHJ1Y3Rvcih4LmNvbnN0cnVjdG9yLCB0aGlzKSlyZXR1cm4geDsKICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcykKICAgICAgLCAkJHJlc29sdmUgID0gY2FwYWJpbGl0eS5yZXNvbHZlOwogICAgJCRyZXNvbHZlKHgpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9Cn0pOwokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICEoVVNFX05BVElWRSAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKShmdW5jdGlvbihpdGVyKXsKICAkUHJvbWlzZS5hbGwoaXRlcilbJ2NhdGNoJ10oZW1wdHkpOwp9KSksIFBST01JU0UsIHsKICAvLyAyNS40LjQuMSBQcm9taXNlLmFsbChpdGVyYWJsZSkKICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSl7CiAgICB2YXIgQyAgICAgICAgICA9IHRoaXMKICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykKICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsKICAgICAgdmFyIHZhbHVlcyAgICA9IFtdCiAgICAgICAgLCBpbmRleCAgICAgPSAwCiAgICAgICAgLCByZW1haW5pbmcgPSAxOwogICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2UpewogICAgICAgIHZhciAkaW5kZXggICAgICAgID0gaW5kZXgrKwogICAgICAgICAgLCBhbHJlYWR5Q2FsbGVkID0gZmFsc2U7CiAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTsKICAgICAgICByZW1haW5pbmcrKzsKICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjsKICAgICAgICAgIGFscmVhZHlDYWxsZWQgID0gdHJ1ZTsKICAgICAgICAgIHZhbHVlc1skaW5kZXhdID0gdmFsdWU7CiAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CiAgICAgICAgfSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKICAgIH0pOwogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9LAogIC8vIDI1LjQuNC40IFByb21pc2UucmFjZShpdGVyYWJsZSkKICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXsKICAgIHZhciBDICAgICAgICAgID0gdGhpcwogICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKQogICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7CiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7CiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpOwogICAgICB9KTsKICAgIH0pOwogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9Cn0pOwoKLyoqKi8gfSksCi8qIDEwNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgovLyBFQ01BU2NyaXB0IDYgc3ltYm9scyBzaGltCnZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGhhcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIERFU0NSSVBUT1JTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKQogICwgJGV4cG9ydCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpCiAgLCBNRVRBICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpLktFWQogICwgJGZhaWxzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKQogICwgc2hhcmVkICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgdWlkICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKQogICwgd2tzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpCiAgLCB3a3NFeHQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpCiAgLCB3a3NEZWZpbmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpCiAgLCBrZXlPZiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTMpCiAgLCBlbnVtS2V5cyAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODYpCiAgLCBpc0FycmF5ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTApCiAgLCBhbk9iamVjdCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIHRvSU9iamVjdCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIHRvUHJpbWl0aXZlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKICAsIGNyZWF0ZURlc2MgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikKICAsIF9jcmVhdGUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSkKICAsIGdPUE5FeHQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSkKICAsICRHT1BEICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NykKICAsICREUCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQogICwgJGtleXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQogICwgZ09QRCAgICAgICAgICAgPSAkR09QRC5mCiAgLCBkUCAgICAgICAgICAgICA9ICREUC5mCiAgLCBnT1BOICAgICAgICAgICA9IGdPUE5FeHQuZgogICwgJFN5bWJvbCAgICAgICAgPSBnbG9iYWwuU3ltYm9sCiAgLCAkSlNPTiAgICAgICAgICA9IGdsb2JhbC5KU09OCiAgLCBfc3RyaW5naWZ5ICAgICA9ICRKU09OICYmICRKU09OLnN0cmluZ2lmeQogICwgUFJPVE9UWVBFICAgICAgPSAncHJvdG90eXBlJwogICwgSElEREVOICAgICAgICAgPSB3a3MoJ19oaWRkZW4nKQogICwgVE9fUFJJTUlUSVZFICAgPSB3a3MoJ3RvUHJpbWl0aXZlJykKICAsIGlzRW51bSAgICAgICAgID0ge30ucHJvcGVydHlJc0VudW1lcmFibGUKICAsIFN5bWJvbFJlZ2lzdHJ5ID0gc2hhcmVkKCdzeW1ib2wtcmVnaXN0cnknKQogICwgQWxsU3ltYm9scyAgICAgPSBzaGFyZWQoJ3N5bWJvbHMnKQogICwgT1BTeW1ib2xzICAgICAgPSBzaGFyZWQoJ29wLXN5bWJvbHMnKQogICwgT2JqZWN0UHJvdG8gICAgPSBPYmplY3RbUFJPVE9UWVBFXQogICwgVVNFX05BVElWRSAgICAgPSB0eXBlb2YgJFN5bWJvbCA9PSAnZnVuY3Rpb24nCiAgLCBRT2JqZWN0ICAgICAgICA9IGdsb2JhbC5RT2JqZWN0OwovLyBEb24ndCB1c2Ugc2V0dGVycyBpbiBRdCBTY3JpcHQsIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy8xNzMKdmFyIHNldHRlciA9ICFRT2JqZWN0IHx8ICFRT2JqZWN0W1BST1RPVFlQRV0gfHwgIVFPYmplY3RbUFJPVE9UWVBFXS5maW5kQ2hpbGQ7CgovLyBmYWxsYmFjayBmb3Igb2xkIEFuZHJvaWQsIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD02ODcKdmFyIHNldFN5bWJvbERlc2MgPSBERVNDUklQVE9SUyAmJiAkZmFpbHMoZnVuY3Rpb24oKXsKICByZXR1cm4gX2NyZWF0ZShkUCh7fSwgJ2EnLCB7CiAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiBkUCh0aGlzLCAnYScsIHt2YWx1ZTogN30pLmE7IH0KICB9KSkuYSAhPSA3Owp9KSA/IGZ1bmN0aW9uKGl0LCBrZXksIEQpewogIHZhciBwcm90b0Rlc2MgPSBnT1BEKE9iamVjdFByb3RvLCBrZXkpOwogIGlmKHByb3RvRGVzYylkZWxldGUgT2JqZWN0UHJvdG9ba2V5XTsKICBkUChpdCwga2V5LCBEKTsKICBpZihwcm90b0Rlc2MgJiYgaXQgIT09IE9iamVjdFByb3RvKWRQKE9iamVjdFByb3RvLCBrZXksIHByb3RvRGVzYyk7Cn0gOiBkUDsKCnZhciB3cmFwID0gZnVuY3Rpb24odGFnKXsKICB2YXIgc3ltID0gQWxsU3ltYm9sc1t0YWddID0gX2NyZWF0ZSgkU3ltYm9sW1BST1RPVFlQRV0pOwogIHN5bS5fayA9IHRhZzsKICByZXR1cm4gc3ltOwp9OwoKdmFyIGlzU3ltYm9sID0gVVNFX05BVElWRSAmJiB0eXBlb2YgJFN5bWJvbC5pdGVyYXRvciA9PSAnc3ltYm9sJyA/IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gdHlwZW9mIGl0ID09ICdzeW1ib2wnOwp9IDogZnVuY3Rpb24oaXQpewogIHJldHVybiBpdCBpbnN0YW5jZW9mICRTeW1ib2w7Cn07Cgp2YXIgJGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgRCl7CiAgaWYoaXQgPT09IE9iamVjdFByb3RvKSRkZWZpbmVQcm9wZXJ0eShPUFN5bWJvbHMsIGtleSwgRCk7CiAgYW5PYmplY3QoaXQpOwogIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgYW5PYmplY3QoRCk7CiAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSkpewogICAgaWYoIUQuZW51bWVyYWJsZSl7CiAgICAgIGlmKCFoYXMoaXQsIEhJRERFTikpZFAoaXQsIEhJRERFTiwgY3JlYXRlRGVzYygxLCB7fSkpOwogICAgICBpdFtISURERU5dW2tleV0gPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgaWYoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSlpdFtISURERU5dW2tleV0gPSBmYWxzZTsKICAgICAgRCA9IF9jcmVhdGUoRCwge2VudW1lcmFibGU6IGNyZWF0ZURlc2MoMCwgZmFsc2UpfSk7CiAgICB9IHJldHVybiBzZXRTeW1ib2xEZXNjKGl0LCBrZXksIEQpOwogIH0gcmV0dXJuIGRQKGl0LCBrZXksIEQpOwp9Owp2YXIgJGRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKGl0LCBQKXsKICBhbk9iamVjdChpdCk7CiAgdmFyIGtleXMgPSBlbnVtS2V5cyhQID0gdG9JT2JqZWN0KFApKQogICAgLCBpICAgID0gMAogICAgLCBsID0ga2V5cy5sZW5ndGgKICAgICwga2V5OwogIHdoaWxlKGwgPiBpKSRkZWZpbmVQcm9wZXJ0eShpdCwga2V5ID0ga2V5c1tpKytdLCBQW2tleV0pOwogIHJldHVybiBpdDsKfTsKdmFyICRjcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUoaXQsIFApewogIHJldHVybiBQID09PSB1bmRlZmluZWQgPyBfY3JlYXRlKGl0KSA6ICRkZWZpbmVQcm9wZXJ0aWVzKF9jcmVhdGUoaXQpLCBQKTsKfTsKdmFyICRwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IGZ1bmN0aW9uIHByb3BlcnR5SXNFbnVtZXJhYmxlKGtleSl7CiAgdmFyIEUgPSBpc0VudW0uY2FsbCh0aGlzLCBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpKTsKICBpZih0aGlzID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm4gZmFsc2U7CiAgcmV0dXJuIEUgfHwgIWhhcyh0aGlzLCBrZXkpIHx8ICFoYXMoQWxsU3ltYm9scywga2V5KSB8fCBoYXModGhpcywgSElEREVOKSAmJiB0aGlzW0hJRERFTl1ba2V5XSA/IEUgOiB0cnVlOwp9Owp2YXIgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKICBpdCAgPSB0b0lPYmplY3QoaXQpOwogIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSk7CiAgaWYoaXQgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybjsKICB2YXIgRCA9IGdPUEQoaXQsIGtleSk7CiAgaWYoRCAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0pKUQuZW51bWVyYWJsZSA9IHRydWU7CiAgcmV0dXJuIEQ7Cn07CnZhciAkZ2V0T3duUHJvcGVydHlOYW1lcyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoaXQpewogIHZhciBuYW1lcyAgPSBnT1BOKHRvSU9iamVjdChpdCkpCiAgICAsIHJlc3VsdCA9IFtdCiAgICAsIGkgICAgICA9IDAKICAgICwga2V5OwogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpewogICAgaWYoIWhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiBrZXkgIT0gSElEREVOICYmIGtleSAhPSBNRVRBKXJlc3VsdC5wdXNoKGtleSk7CiAgfSByZXR1cm4gcmVzdWx0Owp9Owp2YXIgJGdldE93blByb3BlcnR5U3ltYm9scyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5U3ltYm9scyhpdCl7CiAgdmFyIElTX09QICA9IGl0ID09PSBPYmplY3RQcm90bwogICAgLCBuYW1lcyAgPSBnT1BOKElTX09QID8gT1BTeW1ib2xzIDogdG9JT2JqZWN0KGl0KSkKICAgICwgcmVzdWx0ID0gW10KICAgICwgaSAgICAgID0gMAogICAgLCBrZXk7CiAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSl7CiAgICBpZihoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYgKElTX09QID8gaGFzKE9iamVjdFByb3RvLCBrZXkpIDogdHJ1ZSkpcmVzdWx0LnB1c2goQWxsU3ltYm9sc1trZXldKTsKICB9IHJldHVybiByZXN1bHQ7Cn07CgovLyAxOS40LjEuMSBTeW1ib2woW2Rlc2NyaXB0aW9uXSkKaWYoIVVTRV9OQVRJVkUpewogICRTeW1ib2wgPSBmdW5jdGlvbiBTeW1ib2woKXsKICAgIGlmKHRoaXMgaW5zdGFuY2VvZiAkU3ltYm9sKXRocm93IFR5cGVFcnJvcignU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIScpOwogICAgdmFyIHRhZyA9IHVpZChhcmd1bWVudHMubGVuZ3RoID4gMCA/IGFyZ3VtZW50c1swXSA6IHVuZGVmaW5lZCk7CiAgICB2YXIgJHNldCA9IGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8pJHNldC5jYWxsKE9QU3ltYm9scywgdmFsdWUpOwogICAgICBpZihoYXModGhpcywgSElEREVOKSAmJiBoYXModGhpc1tISURERU5dLCB0YWcpKXRoaXNbSElEREVOXVt0YWddID0gZmFsc2U7CiAgICAgIHNldFN5bWJvbERlc2ModGhpcywgdGFnLCBjcmVhdGVEZXNjKDEsIHZhbHVlKSk7CiAgICB9OwogICAgaWYoREVTQ1JJUFRPUlMgJiYgc2V0dGVyKXNldFN5bWJvbERlc2MoT2JqZWN0UHJvdG8sIHRhZywge2NvbmZpZ3VyYWJsZTogdHJ1ZSwgc2V0OiAkc2V0fSk7CiAgICByZXR1cm4gd3JhcCh0YWcpOwogIH07CiAgcmVkZWZpbmUoJFN5bWJvbFtQUk9UT1RZUEVdLCAndG9TdHJpbmcnLCBmdW5jdGlvbiB0b1N0cmluZygpewogICAgcmV0dXJuIHRoaXMuX2s7CiAgfSk7CgogICRHT1BELmYgPSAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogICREUC5mICAgPSAkZGVmaW5lUHJvcGVydHk7CiAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZiA9IGdPUE5FeHQuZiA9ICRnZXRPd25Qcm9wZXJ0eU5hbWVzOwogIF9fd2VicGFja19yZXF1aXJlX18oNDEpLmYgID0gJHByb3BlcnR5SXNFbnVtZXJhYmxlOwogIF9fd2VicGFja19yZXF1aXJlX18oNTgpLmYgPSAkZ2V0T3duUHJvcGVydHlTeW1ib2xzOwoKICBpZihERVNDUklQVE9SUyAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygyNSkpewogICAgcmVkZWZpbmUoT2JqZWN0UHJvdG8sICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICRwcm9wZXJ0eUlzRW51bWVyYWJsZSwgdHJ1ZSk7CiAgfQoKICB3a3NFeHQuZiA9IGZ1bmN0aW9uKG5hbWUpewogICAgcmV0dXJuIHdyYXAod2tzKG5hbWUpKTsKICB9Cn0KCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtTeW1ib2w6ICRTeW1ib2x9KTsKCmZvcih2YXIgc3ltYm9scyA9ICgKICAvLyAxOS40LjIuMiwgMTkuNC4yLjMsIDE5LjQuMi40LCAxOS40LjIuNiwgMTkuNC4yLjgsIDE5LjQuMi45LCAxOS40LjIuMTAsIDE5LjQuMi4xMSwgMTkuNC4yLjEyLCAxOS40LjIuMTMsIDE5LjQuMi4xNAogICdoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlcycKKS5zcGxpdCgnLCcpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzKHN5bWJvbHNbaSsrXSk7Cgpmb3IodmFyIHN5bWJvbHMgPSAka2V5cyh3a3Muc3RvcmUpLCBpID0gMDsgc3ltYm9scy5sZW5ndGggPiBpOyApd2tzRGVmaW5lKHN5bWJvbHNbaSsrXSk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnU3ltYm9sJywgewogIC8vIDE5LjQuMi4xIFN5bWJvbC5mb3Ioa2V5KQogICdmb3InOiBmdW5jdGlvbihrZXkpewogICAgcmV0dXJuIGhhcyhTeW1ib2xSZWdpc3RyeSwga2V5ICs9ICcnKQogICAgICA/IFN5bWJvbFJlZ2lzdHJ5W2tleV0KICAgICAgOiBTeW1ib2xSZWdpc3RyeVtrZXldID0gJFN5bWJvbChrZXkpOwogIH0sCiAgLy8gMTkuNC4yLjUgU3ltYm9sLmtleUZvcihzeW0pCiAga2V5Rm9yOiBmdW5jdGlvbiBrZXlGb3Ioa2V5KXsKICAgIGlmKGlzU3ltYm9sKGtleSkpcmV0dXJuIGtleU9mKFN5bWJvbFJlZ2lzdHJ5LCBrZXkpOwogICAgdGhyb3cgVHlwZUVycm9yKGtleSArICcgaXMgbm90IGEgc3ltYm9sIScpOwogIH0sCiAgdXNlU2V0dGVyOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSB0cnVlOyB9LAogIHVzZVNpbXBsZTogZnVuY3Rpb24oKXsgc2V0dGVyID0gZmFsc2U7IH0KfSk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCAnT2JqZWN0JywgewogIC8vIDE5LjEuMi4yIE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKICBjcmVhdGU6ICRjcmVhdGUsCiAgLy8gMTkuMS4yLjQgT2JqZWN0LmRlZmluZVByb3BlcnR5KE8sIFAsIEF0dHJpYnV0ZXMpCiAgZGVmaW5lUHJvcGVydHk6ICRkZWZpbmVQcm9wZXJ0eSwKICAvLyAxOS4xLjIuMyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKQogIGRlZmluZVByb3BlcnRpZXM6ICRkZWZpbmVQcm9wZXJ0aWVzLAogIC8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsCiAgLy8gMTkuMS4yLjcgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTykKICBnZXRPd25Qcm9wZXJ0eU5hbWVzOiAkZ2V0T3duUHJvcGVydHlOYW1lcywKICAvLyAxOS4xLjIuOCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKE8pCiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzOiAkZ2V0T3duUHJvcGVydHlTeW1ib2xzCn0pOwoKLy8gMjQuMy4yIEpTT04uc3RyaW5naWZ5KHZhbHVlIFssIHJlcGxhY2VyIFssIHNwYWNlXV0pCiRKU09OICYmICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKCFVU0VfTkFUSVZFIHx8ICRmYWlscyhmdW5jdGlvbigpewogIHZhciBTID0gJFN5bWJvbCgpOwogIC8vIE1TIEVkZ2UgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIHt9CiAgLy8gV2ViS2l0IGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyBudWxsCiAgLy8gVjggdGhyb3dzIG9uIGJveGVkIHN5bWJvbHMKICByZXR1cm4gX3N0cmluZ2lmeShbU10pICE9ICdbbnVsbF0nIHx8IF9zdHJpbmdpZnkoe2E6IFN9KSAhPSAne30nIHx8IF9zdHJpbmdpZnkoT2JqZWN0KFMpKSAhPSAne30nOwp9KSksICdKU09OJywgewogIHN0cmluZ2lmeTogZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsKICAgIGlmKGl0ID09PSB1bmRlZmluZWQgfHwgaXNTeW1ib2woaXQpKXJldHVybjsgLy8gSUU4IHJldHVybnMgc3RyaW5nIG9uIHVuZGVmaW5lZAogICAgdmFyIGFyZ3MgPSBbaXRdCiAgICAgICwgaSAgICA9IDEKICAgICAgLCByZXBsYWNlciwgJHJlcGxhY2VyOwogICAgd2hpbGUoYXJndW1lbnRzLmxlbmd0aCA+IGkpYXJncy5wdXNoKGFyZ3VtZW50c1tpKytdKTsKICAgIHJlcGxhY2VyID0gYXJnc1sxXTsKICAgIGlmKHR5cGVvZiByZXBsYWNlciA9PSAnZnVuY3Rpb24nKSRyZXBsYWNlciA9IHJlcGxhY2VyOwogICAgaWYoJHJlcGxhY2VyIHx8ICFpc0FycmF5KHJlcGxhY2VyKSlyZXBsYWNlciA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpewogICAgICBpZigkcmVwbGFjZXIpdmFsdWUgPSAkcmVwbGFjZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTsKICAgICAgaWYoIWlzU3ltYm9sKHZhbHVlKSlyZXR1cm4gdmFsdWU7CiAgICB9OwogICAgYXJnc1sxXSA9IHJlcGxhY2VyOwogICAgcmV0dXJuIF9zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3MpOwogIH0KfSk7CgovLyAxOS40LjMuNCBTeW1ib2wucHJvdG90eXBlW0BAdG9QcmltaXRpdmVdKGhpbnQpCiRTeW1ib2xbUFJPVE9UWVBFXVtUT19QUklNSVRJVkVdIHx8IF9fd2VicGFja19yZXF1aXJlX18oNikoJFN5bWJvbFtQUk9UT1RZUEVdLCBUT19QUklNSVRJVkUsICRTeW1ib2xbUFJPVE9UWVBFXS52YWx1ZU9mKTsKLy8gMTkuNC4zLjUgU3ltYm9sLnByb3RvdHlwZVtAQHRvU3RyaW5nVGFnXQpzZXRUb1N0cmluZ1RhZygkU3ltYm9sLCAnU3ltYm9sJyk7Ci8vIDIwLjIuMS45IE1hdGhbQEB0b1N0cmluZ1RhZ10Kc2V0VG9TdHJpbmdUYWcoTWF0aCwgJ01hdGgnLCB0cnVlKTsKLy8gMjQuMy4zIEpTT05bQEB0b1N0cmluZ1RhZ10Kc2V0VG9TdHJpbmdUYWcoZ2xvYmFsLkpTT04sICdKU09OJywgdHJ1ZSk7CgovKioqLyB9KSwKLyogMTA2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdhc3luY0l0ZXJhdG9yJyk7CgovKioqLyB9KSwKLyogMTA3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNDgpKCdvYnNlcnZhYmxlJyk7CgovKioqLyB9KSwKLyogMTA4ICovLAovKiAxMDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Cgp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOwoKdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7CgpleHBvcnRzLmRpdmlkZVVSTCA9IGRpdmlkZVVSTDsKZXhwb3J0cy5kaXZpZGVFbWFpbCA9IGRpdmlkZUVtYWlsOwpleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldFVzZXJVUkxGcm9tRW1haWwgPSBnZXRVc2VyVVJMRnJvbUVtYWlsOwpleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOwpleHBvcnRzLmNvbnZlcnRUb1VzZXJVUkwgPSBjb252ZXJ0VG9Vc2VyVVJMOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwovKioKICogU3VwcG9ydCBtb2R1bGUgd2l0aCBzb21lIGZ1bmN0aW9ucyB3aWxsIGJlIHVzZWZ1bAogKiBAbW9kdWxlIHV0aWxzCiAqLwoKLyoqCiAqIEB0eXBlZGVmIGRpdmlkZVVSTAogKiBAdHlwZSBPYmplY3QKICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMCiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkb21haW4gVGhlIGRvbWFpbiBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGlkZW50aXR5IFRoZSBpZGVudGl0eSBvZiBVUkwKICovCgovKioKICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5CiAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwKICovCmZ1bmN0aW9uIGRpdmlkZVVSTCh1cmwpIHsKCiAgaWYgKCF1cmwpIHRocm93IEVycm9yKCdVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Jyk7CgogIGZ1bmN0aW9uIHJlY3Vyc2UodmFsdWUpIHsKICAgIHZhciByZWdleCA9IC8oW2EtekEtWi1dKikoOlwvXC8oPzpcLik/fDopKFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsKICAgIHZhciBzdWJzdCA9ICckMSwkMywkNCc7CiAgICB2YXIgcGFydHMgPSB2YWx1ZS5yZXBsYWNlKHJlZ2V4LCBzdWJzdCkuc3BsaXQoJywnKTsKICAgIHJldHVybiBwYXJ0czsKICB9CgogIHZhciBwYXJ0cyA9IHJlY3Vyc2UodXJsKTsKCiAgLy8gSWYgdGhlIHVybCBoYXMgbm8gc2NoZW1lCiAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgIXBhcnRzWzBdLmluY2x1ZGVzKCdAJykpIHsKCiAgICB2YXIgX3Jlc3VsdCA9IHsKICAgICAgdHlwZTogIiIsCiAgICAgIGRvbWFpbjogdXJsLAogICAgICBpZGVudGl0eTogIiIKICAgIH07CgogICAgY29uc29sZS5lcnJvcignW0RpdmlkZVVSTF0gRGl2aWRlVVJMIGRvblwndCBzdXBwb3J0IHVybCB3aXRob3V0IHNjaGVtZS4gUGxlYXNlIHJldmlldyB5b3VyIHVybCBhZGRyZXNzJywgdXJsKTsKCiAgICByZXR1cm4gX3Jlc3VsdDsKICB9CgogIC8vIGNoZWNrIGlmIHRoZSB1cmwgaGFzIHRoZSBzY2hlbWUgYW5kIGluY2x1ZGVzIGFuIEAKICBpZiAocGFydHNbMF0gPT09IHVybCAmJiBwYXJ0c1swXS5pbmNsdWRlcygnQCcpKSB7CiAgICB2YXIgc2NoZW1lID0gcGFydHNbMF0gPT09IHVybCA/ICdzbXRwJyA6IHBhcnRzWzBdOwogICAgcGFydHMgPSByZWN1cnNlKHNjaGVtZSArICc6Ly8nICsgcGFydHNbMF0pOwogIH0KCiAgLy8gaWYgdGhlIGRvbWFpbiBpbmNsdWRlcyBhbiBALCBkaXZpZGUgaXQgdG8gZG9tYWluIGFuZCBpZGVudGl0eSByZXNwZWN0aXZlbHkKICBpZiAocGFydHNbMV0uaW5jbHVkZXMoJ0AnKSkgewogICAgcGFydHNbMl0gPSBwYXJ0c1swXSArICc6Ly8nICsgcGFydHNbMV07CiAgICBwYXJ0c1sxXSA9IHBhcnRzWzFdLnN1YnN0cihwYXJ0c1sxXS5pbmRleE9mKCdAJykgKyAxKTsKICB9IC8qZWxzZSBpZiAocGFydHNbMl0uaW5jbHVkZXMoJy8nKSkgewogICAgcGFydHNbMl0gPSBwYXJ0c1syXS5zdWJzdHIocGFydHNbMl0ubGFzdEluZGV4T2YoJy8nKSsxKTsKICAgIH0qLwoKICB2YXIgcmVzdWx0ID0gewogICAgdHlwZTogcGFydHNbMF0sCiAgICBkb21haW46IHBhcnRzWzFdLAogICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKZnVuY3Rpb24gZGl2aWRlRW1haWwoZW1haWwpIHsKICB2YXIgaW5kZXhPZkF0ID0gZW1haWwuaW5kZXhPZignQCcpOwoKICB2YXIgcmVzdWx0ID0gewogICAgdXNlcm5hbWU6IGVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpLAogICAgZG9tYWluOiBlbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgZW1haWwubGVuZ3RoKQogIH07CgogIHJldHVybiByZXN1bHQ7Cn0KCi8qKgogKiBDaGVjayBpZiBhbiBPYmplY3QgaXMgZW1wdHkKICogQHBhcmFtICB7T2JqZWN0fSBvYmplY3QgT2JqZWN0IHRvIGJlIGNoZWNrZWQKICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgc3RhdHVzIG9mIE9iamVjdCwgZW1wdHkgb3Igbm90ICh0cnVlfGZhbHNlKTsKICovCmZ1bmN0aW9uIGVtcHR5T2JqZWN0KG9iamVjdCkgewogIHJldHVybiAoMCwgX2tleXMyLmRlZmF1bHQpKG9iamVjdCkubGVuZ3RoID4gMCA/IGZhbHNlIDogdHJ1ZTsKfQoKLyoqCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQKICogQHJldHVybiB7T2JqZWN0fQogKi8KZnVuY3Rpb24gZGVlcENsb25lKG9iaikgewogIC8vVE9ETzogc2ltcGxlIGJ1dCBpbmVmZmljaWVudCBKU09OIGRlZXAgY2xvbmUuLi4KICBpZiAob2JqKSByZXR1cm4gSlNPTi5wYXJzZSgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkob2JqKSk7Cn0KCi8qKgogKiBPYnRhaW5zIHRoZSB1c2VyIFVSTCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gZW1haWwKICogQHBhcmFtICB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwKICogQHJldHVybiB7VVJMLlVSTH0gdXNlclVSTCBUaGUgdXNlciBVUkwKICovCmZ1bmN0aW9uIGdldFVzZXJVUkxGcm9tRW1haWwodXNlckVtYWlsKSB7CiAgdmFyIGluZGV4T2ZBdCA9IHVzZXJFbWFpbC5pbmRleE9mKCdAJyk7CiAgcmV0dXJuICd1c2VyOi8vJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgdXNlckVtYWlsLmxlbmd0aCkgKyAnLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCk7Cn0KCi8qKgogKiBPYnRhaW5zIHRoZSB1c2VyIGVtYWlsIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBVUkwKICogQHBhcmFtICB7VVJMLlVSTH0gdXNlclVSTCBUaGUgdXNlciBVUkwKICogQHJldHVybiB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwKICovCmZ1bmN0aW9uIGdldFVzZXJFbWFpbEZyb21VUkwodXNlclVSTCkgewogIHZhciB1cmwgPSBkaXZpZGVVUkwodXNlclVSTCk7CiAgcmV0dXJuIHVybC5pZGVudGl0eS5yZXBsYWNlKCcvJywgJycpICsgJ0AnICsgdXJsLmRvbWFpbjsgLy8gaWRlbnRpdHkgZmllbGQgaGFzICcvZXhhbXBsZUlEJyBpbnN0ZWFkIG9mICdleGFtcGxlSUQnCn0KCi8qKgogKiBDaGVjayBpZiB0aGUgdXNlciBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIFVSTCBmb3JtYXQsIGlmIG5vdCwgY29udmVydCB0byBVUkwgZm9ybWF0CiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXIKICogQHJldHVybiB7c3RyaW5nfSAgIHVzZXJVUkwgICAgdGhlIHVzZXIgVVJMCiAqLwpmdW5jdGlvbiBjb252ZXJ0VG9Vc2VyVVJMKGlkZW50aWZpZXIpIHsKCiAgLy8gY2hlY2sgaWYgdGhlIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgdXJsIGZvcm1hdAogIGlmIChpZGVudGlmaWVyLnN1YnN0cmluZygwLCA3KSA9PT0gJ3VzZXI6Ly8nKSB7CiAgICB2YXIgZGl2aWRlZFVSTCA9IGRpdmlkZVVSTChpZGVudGlmaWVyKTsKCiAgICAvL2NoZWNrIGlmIHRoZSB1cmwgaXMgd2VsbCBmb3JtYXRlZAogICAgaWYgKGRpdmlkZWRVUkwuZG9tYWluICYmIGRpdmlkZWRVUkwuaWRlbnRpdHkpIHsKICAgICAgcmV0dXJuIGlkZW50aWZpZXI7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyAndXNlclVSTCB3aXRoIHdyb25nIGZvcm1hdCc7CiAgICB9CgogICAgLy9pZiBub3QsIGNvbnZlcnQgdGhlIHVzZXIgZW1haWwgdG8gVVJMIGZvcm1hdAogIH0gZWxzZSB7CiAgICByZXR1cm4gZ2V0VXNlclVSTEZyb21FbWFpbChpZGVudGlmaWVyKTsKICB9Cn0KCi8qKiovIH0pLAovKiAxMTAgKi8sCi8qIDExMSAqLywKLyogMTEyICovLAovKiAxMTMgKi8sCi8qIDExNCAqLywKLyogMTE1ICovLAovKiAxMTYgKi8sCi8qIDExNyAqLywKLyogMTE4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7Cgp2YXIgX2dldDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyk7Cgp2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsKCnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7Cgp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7Cgp2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOwoKdmFyIF9EYXRhT2JqZWN0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3QyKTsKCnZhciBfRGF0YU9iamVjdENoaWxkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOwoKdmFyIF9EYXRhT2JqZWN0Q2hpbGQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdENoaWxkKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCnZhciBGaWx0ZXJUeXBlID0geyBBTlk6ICdhbnknLCBTVEFSVDogJ3N0YXJ0JywgRVhBQ1Q6ICdleGFjdCcgfTsKCi8qKgogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgU3luY2hlciBzdWJzY3JpYmUgY2FsbC4KICogVG8gYmUgdXNlZCBhcyBhbiBvYnNlcnZhdGlvbiBwb2ludCBmcm9tIGEgRGF0YU9iamVjdFJlcG9ydGVyIGNoYW5nZS4KICovCgp2YXIgRGF0YU9iamVjdE9ic2VydmVyID0gZnVuY3Rpb24gKF9EYXRhT2JqZWN0KSB7CiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLCBfRGF0YU9iamVjdCk7CgogIC8qIHByaXZhdGUKICBfY2hhbmdlTGlzdGVuZXI6IE1zZ0xpc3RlbmVyCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KICBfZmlsdGVyczogezxmaWx0ZXI+OiB7dHlwZTogPHN0YXJ0LCBleGFjdD4sIGNhbGxiYWNrOiA8ZnVuY3Rpb24+fSB9CiAgKi8KCiAgLyoqCiAgICogQGlnbm9yZQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyLnN1YnNjcmliZSBtZXRob2QKICAgKi8KCiAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogIGZ1bmN0aW9uIERhdGFPYmplY3RPYnNlcnZlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucywgaW5pdGlhbFZlcnNpb24sIG11dHVhbCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdE9ic2VydmVyKTsKCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdE9ic2VydmVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIpKS5jYWxsKHRoaXMsIHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YS5kYXRhLCBjaGlsZHJlbnMsIG11dHVhbCkpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKCiAgICBfdGhpcy5fdmVyc2lvbiA9IGluaXRpYWxWZXJzaW9uOwogICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsKCiAgICBfdGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uIChldmVudCkgewogICAgICBfdGhpcy5fb25GaWx0ZXIoZXZlbnQpOwogICAgfSk7CgogICAgLy9zZXR1cCBjaGlsZHJlbnMgZGF0YSBmcm9tIHN1YnNjcmlwdGlvbgogICAgKDAsIF9rZXlzMi5kZWZhdWx0KShpbml0aWFsRGF0YS5jaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkSWQpIHsKICAgICAgdmFyIGNoaWxkRGF0YSA9IGluaXRpYWxEYXRhLmNoaWxkcmVuc1tjaGlsZElkXTsKICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXSA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBjaGlsZElkLCBjaGlsZERhdGEpOwogICAgfSk7CgogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlKSwgJ19hbGxvY2F0ZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwgKyAnL2NoYW5nZXMnLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgaWYgKG1zZy50eXBlID09PSAndXBkYXRlJykgewogICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOwogICAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChfdGhpcy5fc3luY09iaiwgbXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9vYnNlcnZlcnNbX3RoaXMuX3VybF07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGEKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICd1bnN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsVW5TdWJzY3JpYmUKICAgICAgdmFyIHVuU3Vic2NyaWJlTXNnID0gewogICAgICAgIHR5cGU6ICd1bnN1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9CiAgICAgIH07CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHVuU3Vic2NyaWJlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdE9ic2VydmVyLVVOU1VCU0NSSUJFOiAnLCByZXBseSk7CiAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9vYnNlcnZlcnNbX3RoaXMuX3VybF07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlZ2lzdGVyIHRoZSBjaGFuZ2UgbGlzdGVuZXJzIHNlbnQgYnkgdGhlIHJlcG9ydGVyCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIC0gRmlsdGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgZmllbGQgKHNlcGFyYXRlZCBkb3QgcGF0aCkuIEFjY2VwdHMgKiBhdCB0aGUgZW5kIGZvciBhIG1vcmUgdW5yZXN0cmljdGVkIGZpbHRlcmluZy4KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvbkNoYW5nZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25DaGFuZ2UoZmlsdGVyLCBjYWxsYmFjaykgewogICAgICB2YXIga2V5ID0gZmlsdGVyOwogICAgICB2YXIgZmlsdGVyT2JqID0gewogICAgICAgIHR5cGU6IEZpbHRlclR5cGUuRVhBQ1QsCiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrCiAgICAgIH07CgogICAgICB2YXIgaWR4ID0gZmlsdGVyLmluZGV4T2YoJyonKTsKICAgICAgaWYgKGlkeCA9PT0gZmlsdGVyLmxlbmd0aCAtIDEpIHsKICAgICAgICBpZiAoaWR4ID09PSAwKSB7CiAgICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuQU5ZOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmaWx0ZXJPYmoudHlwZSA9IEZpbHRlclR5cGUuU1RBUlQ7CiAgICAgICAgICBrZXkgPSBmaWx0ZXIuc3Vic3RyKDAsIGZpbHRlci5sZW5ndGggLSAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuX2ZpbHRlcnNba2V5XSA9IGZpbHRlck9iajsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25GaWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZpbHRlcihldmVudCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fZmlsdGVycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgdmFyIGZpbHRlciA9IF90aGlzLl9maWx0ZXJzW2tleV07CiAgICAgICAgaWYgKGZpbHRlci50eXBlID09PSBGaWx0ZXJUeXBlLkFOWSkgewogICAgICAgICAgLy9tYXRjaCBhbnl0aGluZwogICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci50eXBlID09PSBGaWx0ZXJUeXBlLlNUQVJUKSB7CiAgICAgICAgICAvL2lmIHN0YXJ0cyB3aXRoIGZpbHRlci4uLgogICAgICAgICAgaWYgKGV2ZW50LmZpZWxkLmluZGV4T2Yoa2V5KSA9PT0gMCkgewogICAgICAgICAgICBmaWx0ZXIuY2FsbGJhY2soZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuRVhBQ1QpIHsKICAgICAgICAgIC8vZXhhY3QgbWF0Y2gKICAgICAgICAgIGlmIChldmVudC5maWVsZCA9PT0ga2V5KSB7CiAgICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIERhdGFPYmplY3RPYnNlcnZlcjsKfShfRGF0YU9iamVjdDMuZGVmYXVsdCAvKiBpbXBsZW1lbnRzIFN5bmNTdGF0dXMgKi8pOwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdE9ic2VydmVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOwoKdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCnZhciBfZ2V0MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCnZhciBfZ2V0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldDIpOwoKdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsKCnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTsKCnZhciBfRGF0YU9iamVjdDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7Cgp2YXIgX0RhdGFPYmplY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdDIpOwoKdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIFN5bmNoZXIgY3JlYXRlIGNhbGwuCiAqIFRvIGJlIHVzZWQgYXMgYSByZXBvcnRlciBwb2ludCwgY2hhbmdlcyB3aWxsIGJlIHN1Ym1pdGVkIHRvIERhdGFPYmplY3RPYnNlcnZlciBpbnN0YW5jZXMuCiAqLwovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCnZhciBEYXRhT2JqZWN0UmVwb3J0ZXIgPSBmdW5jdGlvbiAoX0RhdGFPYmplY3QpIHsKICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsIF9EYXRhT2JqZWN0KTsKCiAgLyogcHJpdmF0ZQogIF9zdWJzY3JpcHRpb25zOiA8aHlwZXJ0eVVybDogeyBzdGF0dXM6IHN0cmluZyB9IH0+CiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KICBfb25TdWJzY3JpcHRpb25IYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKICBfb25SZXNwb25zZUhhbmRsZXI6IChldmVudCkgPT4gdm9pZAogIF9vblJlYWRIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKICAqLwoKICAvKioKICAgKiBAaWdub3JlCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuY3JlYXRlIG1ldGhvZAogICAqLwogIGZ1bmN0aW9uIERhdGFPYmplY3RSZXBvcnRlcihzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdFJlcG9ydGVyKTsKCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdFJlcG9ydGVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIpKS5jYWxsKHRoaXMsIHN5bmNoZXIsIHVybCwgc2NoZW1hLCBpbml0aWFsU3RhdHVzLCBpbml0aWFsRGF0YSwgY2hpbGRyZW5zKSk7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwoKICAgIF90aGlzLl9zdWJzY3JpcHRpb25zID0ge307CgogICAgX3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci0nICsgdXJsICsgJy1TRU5EOiAnLCBldmVudCk7CiAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCk7CiAgICB9KTsKCiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsKICAgIHJldHVybiBfdGhpczI7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIsIFt7CiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLCAnX2FsbG9jYXRlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoX3RoaXMuX3VybCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0LScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgc3dpdGNoIChtc2cudHlwZSkgewogICAgICAgICAgY2FzZSAncmVzcG9uc2UnOgogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpO2JyZWFrOwogICAgICAgICAgY2FzZSAncmVhZCc6CiAgICAgICAgICAgIF90aGlzLl9vblJlYWQobXNnKTticmVhazsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX29iamVjdExpc3RlbmVyLnJlbW92ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBpbnZpdGF0aW9ucyAoY3JlYXRlIG1lc3NhZ2VzKSB0byBoeXBlcnRpZXMsIG9ic2VydmVycyBsaXN0LgogICAgICogQHBhcmFtICB7SHlwZXJ0eVVSTFtdfSBvYnNlcnZlcnMgTGlzdCBvZiBIeXBlcnR5IFVSTCdzCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnaW52aXRlT2JzZXJ2ZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnZpdGVPYnNlcnZlcnMob2JzZXJ2ZXJzKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkNyZWF0ZQogICAgICB2YXIgaW52aXRlTXNnID0gewogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fc3luY2hlci5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLAogICAgICAgIGJvZHk6IHsgcmVzdW1lOiBmYWxzZSwgcmVzb3VyY2U6IF90aGlzLl91cmwsIHNjaGVtYTogX3RoaXMuX3NjaGVtYSwgdmFsdWU6IF90aGlzLl9zeW5jT2JqLmRhdGEsIGF1dGhvcmlzZTogb2JzZXJ2ZXJzIH0KICAgICAgfTsKCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoaW52aXRlTXNnKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2RlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uRGVsZXRlCiAgICAgIHZhciBkZWxldGVNc2cgPSB7CiAgICAgICAgdHlwZTogJ2RlbGV0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zeW5jaGVyLl9zdWJVUkwsCiAgICAgICAgYm9keTogeyByZXNvdXJjZTogX3RoaXMuX3VybCB9CiAgICAgIH07CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGRlbGV0ZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci1ERUxFVEU6ICcsIHJlcGx5KTsKICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX3JlcG9ydGVyc1tfdGhpcy5fdXJsXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogU3Vic2NyaXB0aW9ucyByZXF1ZXN0ZWQgYW5kIGFjY2VwdGVkIHRvIHRoaXMgcmVwb3J0ZXIKICAgICAqIEB0eXBlIHtPYmplY3Q8SHlwZXJ0eVVSTCwgU3luY1N1YnNjcmlwdGlvbj59CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25TdWJzY3JpcHRpb24nLAoKCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9ucwogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGV2ZW50cwogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJzY3JpcHRpb24oY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZXNwb25zZSBub3RpZmljYXRpb25zIG9mIHRoZSBjcmVhdGUncwogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIGV2ZW50cwogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uUmVzcG9uc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVzcG9uc2UoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25SZXNwb25zZUhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlYWQgbm90aWZpY2F0aW9ucwogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uUmVhZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZWFkKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVhZEhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBwYXJlbnQgU3luY2hlciAtPiBfb25Gb3J3YXJkCgogIH0sIHsKICAgIGtleTogJ19vbkZvcndhcmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkZvcndhcmQobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLVJDVjogJywgbXNnKTsKICAgICAgc3dpdGNoIChtc2cuYm9keS50eXBlKSB7CiAgICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICAgIF90aGlzLl9vblN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoKICAgICAgICAgIF90aGlzLl9vblVuU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBzdWJzY3JpYmUKCiAgfSwgewogICAga2V5OiAnX29uU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25TdWJzY3JpYmUobXNnKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVcmwgPSBtc2cuYm9keS5mcm9tOwogICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3RSZXBvcnRlci5fb25TdWJzY3JpYmVdJywgbXNnKTsKCiAgICAgIHZhciBldmVudCA9IHsKICAgICAgICB0eXBlOiBtc2cuYm9keS50eXBlLAogICAgICAgIHVybDogaHlwZXJ0eVVybCwKCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5LAoKICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdCgpIHsKICAgICAgICAgIC8vY3JlYXRlIG5ldyBzdWJzY3JpcHRpb24KICAgICAgICAgIHZhciBzdWIgPSB7IHVybDogaHlwZXJ0eVVybCwgc3RhdHVzOiAnb24nIH07CiAgICAgICAgICBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXSA9IHN1YjsKCiAgICAgICAgICAvL3Byb2Nlc3MgYW5kIHNlbmQgY2hpbGRyZW5zIGRhdGEKICAgICAgICAgIHZhciBjaGlsZHJlblZhbHVlcyA9IHt9OwogICAgICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZElkKSB7CiAgICAgICAgICAgIHZhciBjaGlsZERhdGEgPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdLmRhdGE7CiAgICAgICAgICAgIGNoaWxkcmVuVmFsdWVzW2NoaWxkSWRdID0gKDAsIF91dGlscy5kZWVwQ2xvbmUpKGNoaWxkRGF0YSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB2YXIgc2VuZE1zZyA9IHsKICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCB2YWx1ZTogeyBkYXRhOiAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoX3RoaXMuZGF0YSksIGNoaWxkcmVuczogY2hpbGRyZW5WYWx1ZXMgfSB9CiAgICAgICAgICB9OwoKICAgICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICAgIGlmIChtc2cuYm9keS5oYXNPd25Qcm9wZXJ0eSgnbXV0dWFsQXV0aGVudGljYXRpb24nKSAmJiAhbXNnLmJvZHkubXV0dWFsQXV0aGVudGljYXRpb24pIHsKICAgICAgICAgICAgc2VuZE1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gX3RoaXMzLl9tdXR1YWxBdXRoZW50aWNhdGlvbjsKICAgICAgICAgICAgX3RoaXMzLl9tdXR1YWxBdXRoZW50aWNhdGlvbiA9IG1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIC8vc2VuZCBvayByZXNwb25zZSBtZXNzYWdlCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHNlbmRNc2cpOwoKICAgICAgICAgIHJldHVybiBzdWI7CiAgICAgICAgfSwKCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7CiAgICAgICAgICAvL3NlbmQgcmVqZWN0IHJlc3BvbnNlIG1lc3NhZ2UKICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgICAgYm9keTogeyBjb2RlOiA0MDMsIGRlc2M6IHJlYXNvbiB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcikgewogICAgICAgIGNvbnNvbGUubG9nKCdTVUJTQ1JJUFRJT04tRVZFTlQ6ICcsIGV2ZW50KTsKICAgICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoaXMgLT4gX29uRm9yd2FyZDogZW1pdHRlZCBieSBhIHJlbW90ZSBEYXRhT2JqZWN0T2JzZXJ2ZXIgLT4gdW5zdWJzY3JpYmUKCiAgfSwgewogICAga2V5OiAnX29uVW5TdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblVuU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaHlwZXJ0eVVybCA9IG1zZy5ib2R5LmZyb207CgogICAgICB2YXIgc3ViID0gX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07CiAgICAgIGRlbGV0ZSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXTsKCiAgICAgIHZhciBldmVudCA9IHsKICAgICAgICB0eXBlOiBtc2cuYm9keS50eXBlLAogICAgICAgIHVybDogaHlwZXJ0eVVybCwKICAgICAgICBvYmplY3Q6IHN1YgogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnVU4tU1VCU0NSSVBUSU9OLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBSZXBvcnRlclVSTCBhZGRyZXNzOiBlbWl0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiBfb25SZW1vdGVDcmVhdGUgLT4gZXZlbnQuYWNrCgogIH0sIHsKICAgIGtleTogJ19vblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZXNwb25zZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBldmVudCA9IHsKICAgICAgICB0eXBlOiBtc2cudHlwZSwKICAgICAgICB1cmw6IG1zZy5mcm9tLAogICAgICAgIGNvZGU6IG1zZy5ib2R5LmNvZGUKICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnUkVTUE9OU0UtRVZFTlQ6ICcsIGV2ZW50KTsKICAgICAgICBfdGhpcy5fb25SZXNwb25zZUhhbmRsZXIoZXZlbnQpOwogICAgICB9CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gUmVwb3J0ZXJVUkwgYWRkcmVzczogZW1pdGVkIGJ5IGEgcmVtb3RlIFN5bmNoZXIgLT4gcmVhZAoKICB9LCB7CiAgICBrZXk6ICdfb25SZWFkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZWFkKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGV2ZW50ID0gewogICAgICAgIHR5cGU6IG1zZy50eXBlLAogICAgICAgIHVybDogbXNnLmZyb20sCgogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgewogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6ICgwLCBfdXRpbHMuZGVlcENsb25lKShfdGhpcy5kYXRhKSB9CiAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHsKICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgICAgYm9keTogeyBjb2RlOiA0MDEsIGRlc2M6IHJlYXNvbiB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uUmVhZEhhbmRsZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnUkVBRC1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vblJlYWRIYW5kbGVyKGV2ZW50KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3N1YnNjcmlwdGlvbnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zOwogICAgfQogIH1dKTsKICByZXR1cm4gRGF0YU9iamVjdFJlcG9ydGVyOwp9KF9EYXRhT2JqZWN0My5kZWZhdWx0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyk7CgpleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0UmVwb3J0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEyMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7Cgp2YXIgX3Byb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvbWlzZSk7Cgp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX1Byb3h5T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOwoKdmFyIF9Qcm94eU9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm94eU9iamVjdCk7Cgp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsKCnZhciBfRGF0YU9iamVjdENoaWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RDaGlsZCk7Cgp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgogKiBNYWluIGV4dGVuc2lvbiBjbGFzcyBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuCiAqIENoaWxkcmVuIG1hbmFnZW1lbnQgaXMgY29tbW9uIGZvciBvYnNlcnZlcnMgYW5kIHJlcG9ydGVycy4KICovCnZhciBEYXRhT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICBfdmVyc2lvbjogbnVtYmVyCiAgIF9vd25lcjogSHlwZXJ0eVVSTAogIF91cmw6IE9iamVjdFVSTAogIF9zY2hlbWE6IFNjaGVtYQogIF9idXM6IE1pbmlCdXMKICBfc3RhdHVzOiBvbiB8IHBhdXNlZAogIF9zeW5jT2JqOiBTeW5jRGF0YQogICBfY2hpbGRyZW46IHsgaWQ6IERhdGFPYmplY3RDaGlsZCB9CiAgX2NoaWxkcmVuTGlzdGVuZXJzOiBbTXNnTGlzdGVuZXJdCiAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0KICBfb25BZGRDaGlsZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZAogICovCgogIC8qKgogICAqIEBpZ25vcmUKICAgKiBTaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkgYnkgSHlwZXJ0aWVzLiBJdCdzIGNhbGxlZCBieSB0aGUgU3luY2hlciBjcmVhdGUgb3Igc3Vic2NyaWJlIG1ldGhvZCdzCiAgICovCiAgZnVuY3Rpb24gRGF0YU9iamVjdChzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykgewogICAgdmFyIG11dHVhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ICYmIGFyZ3VtZW50c1s2XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzZdIDogdHJ1ZTsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3QpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX3N5bmNoZXIgPSBzeW5jaGVyOwogICAgX3RoaXMuX3VybCA9IHVybDsKICAgIF90aGlzLl9zY2hlbWEgPSBzY2hlbWE7CiAgICBfdGhpcy5fc3RhdHVzID0gaW5pdGlhbFN0YXR1czsKICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7CiAgICBfdGhpcy5fY2hpbGRyZW5zID0gY2hpbGRyZW5zOwoKICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgIF90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbiA9IG11dHVhbDsKCiAgICBfdGhpcy5fdmVyc2lvbiA9IDA7CiAgICBfdGhpcy5fY2hpbGRJZCA9IDA7CiAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzID0ge307CiAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKCiAgICBfdGhpcy5fb3duZXIgPSBzeW5jaGVyLl9vd25lcjsKICAgIF90aGlzLl9idXMgPSBzeW5jaGVyLl9idXM7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0LCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBjaGlsZEJhc2VVUkwgPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nOwogICAgICBjb25zb2xlLmxvZygnW0RhdGEgT2JqZWN0IC0gQWxsb2NhdGVMaXN0ZW5lcnNdIC0gJywgX3RoaXMuX2NoaWxkcmVucyk7CiAgICAgIGlmIChfdGhpcy5fY2hpbGRyZW5zKSB7CiAgICAgICAgX3RoaXMuX2NoaWxkcmVucy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgdmFyIGNoaWxkVVJMID0gY2hpbGRCYXNlVVJMICsgY2hpbGQ7CiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKGNoaWxkVVJMLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYKICAgICAgICAgICAgaWYgKG1zZy5mcm9tICE9PSBfdGhpczIuX293bmVyKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3QtQ2hpbGRyZW4tUkNWOiAnLCBtc2cpOwogICAgICAgICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZSc6CiAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNoaWxkQ3JlYXRlKG1zZyk7YnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO2JyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5nZUNoaWxkcmVuKG1zZyk7YnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsKICAgICAgICBsaXN0ZW5lci5yZW1vdmUoKTsKICAgICAgfSk7CgogICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9jaGlsZHJlbk9iamVjdHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNba2V5XS5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIE9iamVjdCBVUkwgb2YgcmVwb3J0ZXIgb3Igb2JzZXJ2ZXIKICAgICAqIEB0eXBlIHtPYmplY3RVUkx9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncGF1c2UnLAoKCiAgICAvKioKICAgICAqIEBpZ25vcmUKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIHBhdXNlKCkgewogICAgICAvL1RPRE86IHRoaXMgZmVhdHVyZSBuZWVkcyBtb3JlIGFuYWxpc2UKICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7CiAgICB9CgogICAgLyoqCiAgICAgKiBAaWdub3JlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncmVzdW1lJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWUoKSB7CiAgICAgIC8vVE9ETzogdGhpcyBmZWF0dXJlIG5lZWRzIG1vcmUgYW5hbGlzZQogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKICAgIH0KCiAgICAvKioKICAgICAqIEBpZ25vcmUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzdG9wJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICAvL1RPRE86IHNob3VsZCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBhbmQgc2VuZCBtZXNzYWdlIHVuc3Vic2NyaWJlPwogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbmQgYWRkIGEgRGF0YU9iamVjdENoaWxkIHRvIGEgY2hpbGRyZW4gY29sbGVjdGlvbi4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjaGlsZHJlbiAtIENoaWxkcmVuIG5hbWUgd2hlcmUgdGhlIGNoaWxkIGlzIGFkZGVkLgogICAgICogQHBhcmFtIHtKU09OfSBpbml0aWFsRGF0YSAtIEluaXRpYWwgZGF0YSBvZiB0aGUgY2hpbGQKICAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdENoaWxkPn0gLSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBEYXRhT2JqZWN0Q2hpbGQuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkQ2hpbGQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENoaWxkKGNoaWxkcmVuLCBpbml0aWFsRGF0YSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9jcmVhdGUgbmV3IGNoaWxkIHVuaXF1ZSBJRCwgYmFzZWQgb24gaHlwZXJ0eVVSTAogICAgICBfdGhpcy5fY2hpbGRJZCsrOwogICAgICB2YXIgbXNnQ2hpbGRJZCA9IF90aGlzLl9vd25lciArICcjJyArIF90aGlzLl9jaGlsZElkOwogICAgICB2YXIgbXNnQ2hpbGRQYXRoID0gX3RoaXMuX3VybCArICcvY2hpbGRyZW4vJyArIGNoaWxkcmVuOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byBhIHJlc291cmNlIGNoaWxkIGFkZHJlc3M6IE1lc3NhZ2VCdXMKICAgICAgdmFyIHJlcXVlc3RNc2cgPSB7CiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IG1zZ0NoaWxkUGF0aCwKICAgICAgICBib2R5OiB7IHJlc291cmNlOiBtc2dDaGlsZElkLCB2YWx1ZTogaW5pdGlhbERhdGEgfQogICAgICB9OwoKICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICBpZiAoIV90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbikgcmVxdWVzdE1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gX3RoaXMuX211dHVhbEF1dGhlbnRpY2F0aW9uOwoKICAgICAgLy9yZXR1cm5zIHByb21pc2UsIGluIHRoZSBmdXR1cmUsIHRoZSBBUEkgbWF5IGNoYW5nZSB0byBhc3luY2hyb25vdXMgY2FsbAogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIG1zZ0lkID0gX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnKTsKCiAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZS1yZXBvcnRlci1jaGlsZCggJyArIF90aGlzLl9vd25lciArICcgKTogJywgcmVxdWVzdE1zZyk7CiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3IF9EYXRhT2JqZWN0Q2hpbGQyLmRlZmF1bHQoX3RoaXMsIG1zZ0NoaWxkSWQsIGluaXRpYWxEYXRhLCBfdGhpcy5fb3duZXIsIG1zZ0lkKTsKICAgICAgICBuZXdDaGlsZC5vbkNoYW5nZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCwgeyBwYXRoOiBtc2dDaGlsZFBhdGgsIGNoaWxkSWQ6IG1zZ0NoaWxkSWQgfSk7CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbbXNnQ2hpbGRJZF0gPSBuZXdDaGlsZDsKCiAgICAgICAgcmVzb2x2ZShuZXdDaGlsZCk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgb2YgY2hpbGRyZW5zLgogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uQWRkQ2hpbGQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkQ2hpbGQoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0IC0+IGFkZENoaWxkCgogIH0sIHsKICAgIGtleTogJ19vbkNoaWxkQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGlsZENyZWF0ZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG1zZ0NoaWxkSWQgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIG1zZyk7CiAgICAgIHZhciBuZXdDaGlsZCA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBtc2dDaGlsZElkLCBtc2cuYm9keS52YWx1ZSk7CiAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbbXNnQ2hpbGRJZF0gPSBuZXdDaGlsZDsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIC8vRkxPVy1PVVQ6IHdpbGwgZmxvdyB0byBEYXRhT2JqZWN0Q2hpbGQgLT4gX29uUmVzcG9uc2UKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHNvdXJjZTogX3RoaXMuX293bmVyIH0KICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmZyb20sCiAgICAgICAgdXJsOiBtc2cudG8sCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLAogICAgICAgIGNoaWxkSWQ6IG1zZ0NoaWxkSWQsCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0FERC1DSElMRFJFTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL3NlbmQgZGVsdGEgbWVzc2FnZXMgdG8gc3Vic2NyaXB0aW9ucwoKICB9LCB7CiAgICBrZXk6ICdfb25DaGFuZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoYW5nZShldmVudCwgY2hpbGRJbmZvKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fdmVyc2lvbisrOwoKICAgICAgaWYgKF90aGlzLl9zdGF0dXMgPT09ICdvbicpIHsKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIGEgcmVzb3VyY2UgY2hhbmdlcyBhZGRyZXNzOiBNZXNzYWdlQnVzCiAgICAgICAgdmFyIGNoYW5nZU1zZyA9IHsKICAgICAgICAgIHR5cGU6ICd1cGRhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogX3RoaXMuX3VybCArICcvY2hhbmdlcycsCiAgICAgICAgICBib2R5OiB7IHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCBzb3VyY2U6IF90aGlzLl9vd25lciwgYXR0cmlidXRlOiBldmVudC5maWVsZCB9CiAgICAgICAgfTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0IC0gX29uQ2hhbmdlXSAtICcsIGV2ZW50LCBjaGlsZEluZm8sIGNoYW5nZU1zZyk7CgogICAgICAgIGlmIChldmVudC5vVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuT0JKRUNUKSB7CiAgICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlJFTU9WRSkgewogICAgICAgICAgICBjaGFuZ2VNc2cuYm9keS52YWx1ZSA9IGV2ZW50LmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LmF0dHJpYnV0ZVR5cGUgPSBldmVudC5vVHlwZTsKICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsKICAgICAgICAgIGlmIChldmVudC5jVHlwZSAhPT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuVVBEQVRFKSB7CiAgICAgICAgICAgIGNoYW5nZU1zZy5ib2R5Lm9wZXJhdGlvbiA9IGV2ZW50LmNUeXBlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy9jaGlsZEluZm8gbXVzdCBoYXZlIChwYXRoLCBjaGlsZElkKQogICAgICAgIGlmIChjaGlsZEluZm8pIHsKICAgICAgICAgIGNoYW5nZU1zZy50byA9IGNoaWxkSW5mby5wYXRoOwogICAgICAgICAgY2hhbmdlTXNnLmJvZHkucmVzb3VyY2UgPSBjaGlsZEluZm8uY2hpbGRJZDsKICAgICAgICB9CgogICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICBpZiAoIV90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbikgY2hhbmdlTXNnLmJvZHkubXV0dWFsQXV0aGVudGljYXRpb24gPSBfdGhpcy5fbXV0dWFsQXV0aGVudGljYXRpb247CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoY2hhbmdlTXNnKTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogZGVsdGEgbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RSZXBvcnRlciBvciBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhCgogIH0sIHsKICAgIGtleTogJ19jaGFuZ2VPYmplY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGFuZ2VPYmplY3Qoc3luY09iaiwgbXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL1RPRE86IHVwZGF0ZSB2ZXJzaW9uID8KICAgICAgLy9ob3cgdG8gaGFuZGxlIGFuIGluY29ycmVjdCB2ZXJzaW9uID8gRXhhbXBsZTogcmVjZWl2ZSBhIHZlcnNpb24gMyB3aGVuIHRoZSBvYnNlcnZlciBpcyBpbiB2ZXJzaW9uIDEsIHdoZXJlIGlzIHRoZSB2ZXJzaW9uIDIgPwogICAgICAvL3dpbGwgd2UgbmVlZCB0byBjb25maXJtIHRoZSByZWNlcHRpb24gPwogICAgICBpZiAoX3RoaXMuX3ZlcnNpb24gKyAxID09PSBtc2cuYm9keS52ZXJzaW9uKSB7CiAgICAgICAgX3RoaXMuX3ZlcnNpb24rKzsKICAgICAgICB2YXIgcGF0aCA9IG1zZy5ib2R5LmF0dHJpYnV0ZTsKICAgICAgICB2YXIgdmFsdWUgPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkobXNnLmJvZHkudmFsdWUpOwogICAgICAgIHZhciBmaW5kUmVzdWx0ID0gc3luY09iai5maW5kQmVmb3JlKHBhdGgpOwoKICAgICAgICBpZiAobXNnLmJvZHkuYXR0cmlidXRlVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuQVJSQVkpIHsKICAgICAgICAgIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLkFERCkgewogICAgICAgICAgICB2YXIgYXJyID0gZmluZFJlc3VsdC5vYmo7CiAgICAgICAgICAgIHZhciBpbmRleCA9IGZpbmRSZXN1bHQubGFzdDsKICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhcnIsIFtpbmRleCwgMF0uY29uY2F0KHZhbHVlKSk7CiAgICAgICAgICB9IGVsc2UgaWYgKG1zZy5ib2R5Lm9wZXJhdGlvbiA9PT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuUkVNT1ZFKSB7CiAgICAgICAgICAgIHZhciBfYXJyID0gZmluZFJlc3VsdC5vYmo7CiAgICAgICAgICAgIHZhciBfaW5kZXggPSBmaW5kUmVzdWx0Lmxhc3Q7CiAgICAgICAgICAgIF9hcnIuc3BsaWNlKF9pbmRleCwgdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKG1zZy5ib2R5LnZhbHVlKSB7CiAgICAgICAgICAgIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF0gPSB2YWx1ZTsgLy8gVVBEQVRFIG9yIEFERAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVsZXRlIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF07IC8vIFJFTU9WRQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL1RPRE86IGhvdyB0byBoYW5kbGUgdW5zeW5jaHJvbml6ZWQgdmVyc2lvbnM/CiAgICAgICAgY29uc29sZS5sb2coJ1VOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICcgKyBfdGhpcy5fdmVyc2lvbiArICcsIG1zZyA9PiAnICsgbXNnLmJvZHkudmVyc2lvbiArICcpJyk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhCgogIH0sIHsKICAgIGtleTogJ19jaGFuZ2VDaGlsZHJlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoYW5nZUNoaWxkcmVuKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZygnQ2hhbmdlIGNoaWxkcmVuOiAnLCBfdGhpcy5fb3duZXIsIG1zZyk7CgogICAgICB2YXIgY2hpbGRJZCA9IG1zZy5ib2R5LnJlc291cmNlOwogICAgICB2YXIgY2hpbGRyZW4gPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdOwoKICAgICAgaWYgKGNoaWxkcmVuKSB7CiAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChjaGlsZHJlbi5fc3luY09iaiwgbXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnTm8gY2hpbGRyZW4gZm91bmQgZm9yOiAnLCBjaGlsZElkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KCiAgICAvKioKICAgICAqIE9iamVjdCBzY2hlbWEgVVJMICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQogICAgICogQHR5cGUge1NjaGVtYVVSTH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzY2hlbWEnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zY2hlbWE7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdGF0dXMgb2YgdGhlIHJlcG9ydGVyIG9yIG9ic2VydmVyIGNvbm5lY3Rpb24gKHRoaXMgZmllbGQgaXMgbm90IHlldCBzdGFibGUsIGFuZCBpcyBzdWJzamVjdCB0byBjaGFuZ2UpCiAgICAgKiBAdHlwZSB7U3RhdHVzfSAtIEVudW0gb2Y6IG9uIHwgcGF1c2VkCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnc3RhdHVzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3RhdHVzOwogICAgfQoKICAgIC8qKgogICAgICogRGF0YSBzdHJ1Y3R1cmUgdG8gYmUgc3luY2hyb25pemVkLgogICAgICogQHR5cGUge0pTT059IC0gSlNPTiBzdHJ1Y3R1cmUgdGhhdCBzaG91bGQgZm9sbG93IHRoZSBkZWZpbmVkIHNjaGVtYSwgaWYgYW55LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2RhdGEnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zeW5jT2JqLmRhdGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGwgY3JlYXRlZCBjaGlsZHJlbidzIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIGRvZXNuJ3QgY29udGFpbiBhbGwgY2hpbGRyZW4ncyBzaW5jZSByZXBvcnRlciBjcmVhdGlvbi4KICAgICAqIEB0eXBlIHtPYmplY3Q8Q2hpbGRJZCwgRGF0YU9iamVjdENoaWxkPn0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjaGlsZHJlbnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHM7CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhT2JqZWN0Owp9KCk7IC8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTIxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9Qcm94eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTsKCnZhciBfUHJveHlPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJveHlPYmplY3QpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgRGF0YU9iamVjdCBhZGRDaGlsZHJlbiBjYWxsIG9yIGZyb20gb25BZGRDaGlsZHJlbiBpZiByZW1vdGVseSBjcmVhdGVkLgogKiBDaGlsZHJlbiBvYmplY3Qgc3luY2hyb25pemF0aW9uIGlzIGEgYSBmYXN0IGZvcndhcmQgbWVjaGFuaXNtLCBubyBuZWVkIGZvciBkaXJlY3Qgc3Vic2NyaXB0aW9ucywgaXQgdXNlcyB0aGUgYWxyZWFkeSBhdXRob3JpemVkIHN1YnNjcmlwdGlvbiBmcm9tIHRoZSBwYXJlbnQgRGF0YU9iamVjdC4KICovCnZhciBEYXRhT2JqZWN0Q2hpbGQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQogIF9vblJlc3BvbnNlSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkCiAgKi8KCiAgLyoqCiAgICogQGlnbm9yZQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBEYXRhT2JqZWN0LmFkZENoaWxkcmVuCiAgICovCiAgZnVuY3Rpb24gRGF0YU9iamVjdENoaWxkKHBhcmVudCwgY2hpbGRJZCwgaW5pdGlhbERhdGEsIG93bmVyLCBtc2dJZCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdENoaWxkKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fY2hpbGRJZCA9IGNoaWxkSWQ7CiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl9tc2dJZCA9IG1zZ0lkOwoKICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7CgogICAgX3RoaXMuX2J1cyA9IHBhcmVudC5fYnVzOwogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0Q2hpbGQsIFt7CiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vdGhpcyBpcyBvbmx5IG5lZWRlZCBmb3IgY2hpbGRyZW4gcmVwb3J0ZXJzCiAgICAgIGlmIChfdGhpcy5fb3duZXIpIHsKICAgICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl9vd25lciwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgaWYgKG1zZy50eXBlID09PSAncmVzcG9uc2UnICYmIG1zZy5pZCA9PT0gX3RoaXMuX21zZ0lkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0Q2hpbGQub25SZXNwb25zZTonLCBtc2cpOwogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLl9saXN0ZW5lcikgewogICAgICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX2NoaWxkcmVuW190aGlzLl9jaGlsZElkXTsKCiAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CgogICAgICAvL1RPRE86IHNlbmQgZGVsZXRlIG1lc3NhZ2UgPwogICAgfQoKICAgIC8qKgogICAgICogQ2hpbGRyZW4gSUQgZ2VuZXJhdGVkIG9uIGFkZENoaWxkcmVuLiBVbmlxdWUgaWRlbnRpZmllcgogICAgICogQHR5cGUge1VSTH0gLSBVUkwgb2YgdGhlIGZvcm1hdCA8SHlwZXJ0eVVSTD4jPG51bWVyaWMtc2VxdWVuY2U+CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25DaGFuZ2UnLAoKCiAgICAvKioKICAgICAqIFJlZ2lzdGVyIHRoZSBjaGFuZ2UgbGlzdGVuZXJzIHNlbnQgYnkgdGhlIHJlcG9ydGVyIGNoaWxkCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShjYWxsYmFjaykgewogICAgICB0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY2FsbGJhY2soZXZlbnQpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZXMKICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVzcG9uc2VIYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBfb25DaGlsZENyZWF0ZQoKICB9LCB7CiAgICBrZXk6ICdfb25SZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgdXJsOiBtc2cuYm9keS5zb3VyY2UsCiAgICAgICAgY29kZTogbXNnLmJvZHkuY29kZQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcikgewogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdjaGlsZElkJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2hpbGRJZDsKICAgIH0KCiAgICAvKioKICAgICAqIERhdGEgU3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4KICAgICAqIEB0eXBlIHtKU09OfSAtIEpTT04gc3RydWN0dXJlIHRoYXQgc2hvdWxkIGZvbGxvdyB0aGUgZGVmaW5lZCBzY2hlbWEsIGlmIGFueS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkYXRhJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3luY09iai5kYXRhOwogICAgfQogIH1dKTsKICByZXR1cm4gRGF0YU9iamVjdENoaWxkOwp9KCk7IC8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdENoaWxkOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5PYmplY3RUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0gdW5kZWZpbmVkOwoKdmFyIF9zdHJpbmdpZnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKCnZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKX193ZWJwYWNrX3JlcXVpcmVfXygxNTMpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCnZhciBvYmplY3RUeXBlID0geyBBUlJBWTogJ1tvYmplY3QgQXJyYXldJywgT0JKRUNUOiAnW29iamVjdCBPYmplY3RdJyB9OwoKLyoqCiAqIEBhY2Nlc3MgcHJpdmF0ZQogKiBNYWluIGNsYXNzIHRoYXQgbWFpbnRhaW5zIGEgSlNPTiBvYmplY3QsIGFuZCBvYnNlcnZlcyBjaGFuZ2VzIGluIHRoaXMgb2JqZWN0LCByZWN1cnNpdmVseS4KICogSW50ZXJuYWwgb2JqZWN0cyBhbmQgYXJyYXlzIGFyZSBhbHNvIG9ic2VydmVkLgogKi8KCnZhciBTeW5jT2JqZWN0ID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN5bmNPYmplY3QoaW5pdGlhbERhdGEpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFN5bmNPYmplY3QpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX29ic2VydmVycyA9IFtdOwogICAgX3RoaXMuX2ZpbHRlcnMgPSB7fTsKCiAgICB0aGlzLl9kYXRhID0gaW5pdGlhbERhdGEgfHwge307CgogICAgdGhpcy5faW50ZXJuYWxPYnNlcnZlKHRoaXMuX2RhdGEpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoU3luY09iamVjdCwgW3sKICAgIGtleTogJ29ic2VydmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9ic2VydmUoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb2JzZXJ2ZXJzLnB1c2goY2FsbGJhY2spOwogICAgfQogIH0sIHsKICAgIGtleTogJ2ZpbmQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmQocGF0aCkgewogICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsKCiAgICAgIHJldHVybiB0aGlzLl9maW5kV2l0aFNwbGl0KGxpc3QpOwogICAgfQogIH0sIHsKICAgIGtleTogJ2ZpbmRCZWZvcmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRCZWZvcmUocGF0aCkgewogICAgICB2YXIgcmVzdWx0ID0ge307CiAgICAgIHZhciBsaXN0ID0gcGF0aC5zcGxpdCgnLicpOwogICAgICByZXN1bHQubGFzdCA9IGxpc3QucG9wKCk7CiAgICAgIHJlc3VsdC5vYmogPSB0aGlzLl9maW5kV2l0aFNwbGl0KGxpc3QpOwoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZmluZFdpdGhTcGxpdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmRXaXRoU3BsaXQobGlzdCkgewogICAgICB2YXIgb2JqID0gdGhpcy5fZGF0YTsKICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIG9iaiA9IG9ialt2YWx1ZV07CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfaXNPYnNlcnZhYmxlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNPYnNlcnZhYmxlKG9iaikgewogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QgfHwgb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2ludGVybmFsT2JzZXJ2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ludGVybmFsT2JzZXJ2ZShvYmplY3QpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoY2hhbmdlc2V0KSB7CgogICAgICAgIGNoYW5nZXNldC5ldmVyeShmdW5jdGlvbiAoY2hhbmdlKSB7CiAgICAgICAgICBfdGhpczIuX29uQ2hhbmdlcyhjaGFuZ2UpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdGhpcy5fZGF0YSA9IE9iamVjdC5kZWVwT2JzZXJ2ZShvYmplY3QsIGhhbmRsZXIpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19maXJlRXZlbnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maXJlRXZlbnQoZXZlbnQpIHsKICAgICAgdGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgY2FsbGJhY2soZXZlbnQpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25DaGFuZ2VzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGFuZ2VzKGNoYW5nZSkgewoKICAgICAgdmFyIG9iaiA9IGNoYW5nZS5vYmplY3Q7CiAgICAgIHZhciBvYmpUeXBlID0gdm9pZCAwOwoKICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7CiAgICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuT0JKRUNUOwogICAgICB9CgogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgewogICAgICAgIG9ialR5cGUgPSBPYmplY3RUeXBlLkFSUkFZOwogICAgICB9CgogICAgICB2YXIgZmllbGRTdHJpbmcgPSBjaGFuZ2Uua2V5cGF0aDsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaWVsZDonLCBmaWVsZFN0cmluZyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCd0eXBlOicsIGNoYW5nZS50eXBlKTsKCiAgICAgIC8vbGV0IG9sZFZhbHVlID0gY2hhbmdlLm9sZFZhbHVlOwogICAgICB2YXIgbmV3VmFsdWUgPSBvYmpbY2hhbmdlLm5hbWVdOwoKICAgICAgY29uc29sZS5pbmZvKGNoYW5nZS50eXBlICsgJyB8IEZpZWxkOiAnICsgZmllbGRTdHJpbmcgKyAnIHwgTmV3IFZhbHVlOicsICgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShuZXdWYWx1ZSkpOwoKICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAndXBkYXRlJykgewogICAgICAgIHRoaXMuX2ZpcmVFdmVudCh7CiAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5VUERBVEUsCiAgICAgICAgICBvVHlwZTogb2JqVHlwZSwKICAgICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZywKICAgICAgICAgIGRhdGE6IG5ld1ZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2FkZCcpIHsKICAgICAgICB0aGlzLl9maXJlRXZlbnQoewogICAgICAgICAgY1R5cGU6IENoYW5nZVR5cGUuQURELAogICAgICAgICAgb1R5cGU6IG9ialR5cGUsCiAgICAgICAgICBmaWVsZDogZmllbGRTdHJpbmcsCiAgICAgICAgICBkYXRhOiBuZXdWYWx1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICdkZWxldGUnKSB7CiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsKICAgICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLlJFTU9WRSwKICAgICAgICAgIG9UeXBlOiBvYmpUeXBlLAogICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdkYXRhJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fZGF0YTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN5bmNPYmplY3Q7Cn0oKTsKCnZhciBDaGFuZ2VUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0geyBVUERBVEU6ICd1cGRhdGUnLCBBREQ6ICdhZGQnLCBSRU1PVkU6ICdyZW1vdmUnIH07CnZhciBPYmplY3RUeXBlID0gZXhwb3J0cy5PYmplY3RUeXBlID0geyBPQkpFQ1Q6ICdvYmplY3QnLCBBUlJBWTogJ2FycmF5JyB9OwpleHBvcnRzLmRlZmF1bHQgPSBTeW5jT2JqZWN0OwoKLyoqKi8gfSksCi8qIDEyMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7Cgp2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgewogIGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsKICB2YXIgZGVzYyA9ICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMi5kZWZhdWx0KShvYmplY3QsIHByb3BlcnR5KTsKCiAgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgewogICAgdmFyIHBhcmVudCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKG9iamVjdCk7CgogICAgaWYgKHBhcmVudCA9PT0gbnVsbCkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7CiAgICB9CiAgfSBlbHNlIGlmICgidmFsdWUiIGluIGRlc2MpIHsKICAgIHJldHVybiBkZXNjLnZhbHVlOwogIH0gZWxzZSB7CiAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7CgogICAgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsKICB9Cn07CgovKioqLyB9KSwKLyogMTI0ICovLAovKiAxMjUgKi8sCi8qIDEyNiAqLywKLyogMTI3ICovLAovKiAxMjggKi8sCi8qIDEyOSAqLywKLyogMTMwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3Byb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCnZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzYpOwoKdmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX0RhdGFPYmplY3RSZXBvcnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsKCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RSZXBvcnRlcik7Cgp2YXIgX0RhdGFPYmplY3RPYnNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKCnZhciBfRGF0YU9iamVjdE9ic2VydmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RPYnNlcnZlcik7Cgp2YXIgX0RhdGFQcm92aXNpb25hbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTsKCnZhciBfRGF0YVByb3Zpc2lvbmFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFQcm92aXNpb25hbCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogVGhlIG1haW4gY2xhc3MgZm9yIHRoZSBzeW5jaGVyIHBhY2thZ2UuCiogVGhlIFN5bmNoZXIgaXMgYSBzaW5nbGV0b24gY2xhc3MgcGVyIEh5cGVydHkvVVJMIGFuZCBpdCBpcyB0aGUgb3duZXIgb2YgYWxsIGNyZWF0ZWQgRGF0YSBTeW5jIE9iamVjdHMgYWNjb3JkaW5nIHRvIHRoZSBSZXBvcnRlciAtIE9ic2VydmVyIHBhdHRlcm4uCiogTWFpbiBmdW5jdGlvbmFsaXR5IGlzIHRvIGNyZWF0ZSByZXBvcnRlcnMgYW5kIHRvIHN1YnNjcmliZSB0byBleGlzdGluZyBvbmVzLgoqLwp2YXIgU3luY2hlciA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX293bmVyOiBVUkwKICBfYnVzOiBNaW5pQnVzCiAgIF9zdWJVUkw6IFVSTAogICBfcmVwb3J0ZXJzOiA8dXJsOiBEYXRhT2JqZWN0UmVwb3J0ZXI+CiAgX29ic2VydmVyczogPHVybDogRGF0YU9iamVjdE9ic2VydmVyPgogIF9wcm92aXNpb25hbHM6IDx1cmw6IERhdGFQcm92aXNpb25hbD4KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQogIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZAogIF9vblJlc3VtZTogKGV2ZW50KSA9PiB2b2lkCiAgKi8KCiAgLyoqCiAgKiBDb25zdHJ1Y3RvciB0aGF0IHNob3VsZCBiZSB1c2VkIGJ5IHRoZSBIeXBlcnR5IG93bmVyCiAgKiBAcGFyYW0ge0h5cGVydHlVUkx9IG93bmVyIC0gSHlwZXJ0eSBVUkwgb3duZXIuIEFuIFVSTCBhbGxvY2F0ZWQgYnkgdGhlIHJ1bnRpbWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBIeXBlcnR5LgogICogQHBhcmFtIHtNaW5pQnVzfSBidXMgLSBBbiBpbnN0YW5jZSBvZiB0aGUgTWluaUJ1cyBwcm92aWRlZCBpbiB0aGUgc2FuZGJveC4gV2hlbiBhbiBvYmplY3QgKFJlcG9ydGVyIG9yIE9ic2VydmVkKSBpcyBjcmVhdGVkLCB0aGUgU3luY2hlck1hbmFnZXIgd2lsbCBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgTWluaUJ1cyB0byByZWNlaXZlL3NlbmQgTWVzc2FnZXMgb2YgdGhhdCBvYmplY3QuCiAgKiBAcGFyYW0ge0pTT059IGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gZGF0YS4gVGhlIG9ubHkgcmVxdWlyZWQgZmllbGQgZm9yIG5vdyBpcyB0aGUgcnVudGltZVVSTC4KICAqLwogIGZ1bmN0aW9uIFN5bmNoZXIob3duZXIsIGJ1cywgY29uZmlnKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTeW5jaGVyKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9vd25lciA9IG93bmVyOwogICAgX3RoaXMuX2J1cyA9IGJ1czsKCiAgICBfdGhpcy5fc3ViVVJMID0gY29uZmlnLnJ1bnRpbWVVUkwgKyAnL3NtJzsKCiAgICBfdGhpcy5fcmVwb3J0ZXJzID0ge307CiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307CiAgICBfdGhpcy5fcHJvdmlzaW9uYWxzID0ge307CgogICAgYnVzLmFkZExpc3RlbmVyKG93bmVyLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYKICAgICAgaWYgKG1zZy5mcm9tICE9PSBvd25lcikgewogICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIFN5bmNoZXItUkNWOiAnLCBtc2cpOwogICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ2ZvcndhcmQnOgogICAgICAgICAgICBfdGhpcy5fb25Gb3J3YXJkKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICdjcmVhdGUnOgogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVDcmVhdGUobXNnKTticmVhazsKICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZURlbGV0ZShtc2cpO2JyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICAvKioKICAqIFRoZSBvd25lciBvZiB0aGUgU3luY2hlciBhbmQgYWxsIGNyZWF0ZWQgcmVwb3J0ZXJzLgogICogQHR5cGUge0h5cGVydHlVUkx9CiAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNoZXIsIFt7CiAgICBrZXk6ICdjcmVhdGUnLAoKCiAgICAvKioKICAgICogUmVxdWVzdCBhIERhdGFPYmplY3RSZXBvcnRlciBjcmVhdGlvbi4gVGhlIFVSTCB3aWxsIGJlIGJlIHJlcXVlc3RlZCBieSB0aGUgYWxsb2NhdGlvbiBtZWNoYW5pc20uCiAgICAqIEBwYXJhbSAge1NjaGVtYVVSTH0gc2NoZW1hIC0gSHlwZXJ0eSBDYXRhbG9ndWUgVVJMIGFkZHJlc3MgdGhhdCBjYW4gYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgSlNPTi1TY2hlbWEgZGVzY3JpYmluZyB0aGUgRGF0YSBPYmplY3Qgc2NoZW1hCiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkxbXX0gb2JzZXJ2ZXJzIC0gTGlzdCBvZiBoeXBlcnRpZXMgdGhhdCBhcmUgcHJlLWF1dGhvcml6ZWQgZm9yIHN1YnNjcmlwdGlvbgogICAgKiBAcGFyYW0gIHtKU09OfSBpbml0aWFsRGF0YSAtIEluaXRpYWwgZGF0YSBvZiB0aGUgcmVwb3J0ZXIKICAgICogQHBhcmFtICB7c3RyaW5nfSBvYmplY3RVUkwgLSByZXVzYWJsZSBkYXRhT2JqZWN0IFVSTAogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RSZXBvcnRlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IFJlcG9ydGVyLiBUaGUgcmVwb3J0ZXIgY2FuIGJlIGFjY2VwdGVkIG9yIHJlamVjdGVkIGJ5IHRoZSBQRVAKICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKHNjaGVtYSwgb2JzZXJ2ZXJzLCBpbml0aWFsRGF0YSkgewogICAgICB2YXIgc3RvcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgICB2YXIgcDJwID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiBmYWxzZTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBjcml0ZXJpYSA9IHt9OwoKICAgICAgY3JpdGVyaWEucDJwID0gcDJwOwogICAgICBjcml0ZXJpYS5zdG9yZSA9IHN0b3JlOwogICAgICBjcml0ZXJpYS5zY2hlbWEgPSBzY2hlbWE7CiAgICAgIGNyaXRlcmlhLm9ic2VydmVycyA9IG9ic2VydmVyczsKICAgICAgY3JpdGVyaWEuaW5pdGlhbERhdGEgPSBpbml0aWFsRGF0YTsKCiAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUgUmVwb3J0ZXIgLSBjcml0ZXJpYTogJywgY3JpdGVyaWEpOwoKICAgICAgKDAsIF9hc3NpZ24yLmRlZmF1bHQpKGNyaXRlcmlhLCB7IHJlc3VtZTogZmFsc2UgfSk7CgogICAgICByZXR1cm4gX3RoaXMuX2NyZWF0ZShjcml0ZXJpYSk7CiAgICB9CiAgfSwgewogICAga2V5OiAncmVzdW1lUmVwb3J0ZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVSZXBvcnRlcnMoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBSZXBvcnRlciAtIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7CgogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiB0cnVlIH0pOwoKICAgICAgcmV0dXJuIF90aGlzLl9jcmVhdGUoY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKgogICAgKiBSZXF1ZXN0IGEgc3Vic2NyaXB0aW9uIHRvIGFuIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdC4KICAgICogQHBhcmFtIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQogICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gQWRkcmVzcyBvZiB0aGUgZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0IHRvIGJlIG9ic2VydmVkCiAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3N0b3JlPWZhbHNlXSAtIFNhdmUgdGhlIHN1YnNjcmlwdGlvbiBvbiB0aGUgU3luY2hlciBNYW5hZ2VyIGZvciBmdXJ0aGVyIHJlc3VtZSAoRGVmYXVsdCBpcyBmYWxzZSkKICAgICogQHBhcmFtIHtCb29sZWFufSBbcDJwPWZhbHNlXSAtIEluZm8gYWJvdXQgaWYgc2hvdWxkIHVzZSBwMnAgY29ubmVjdGlvbiAoRGVmYXVsdCBpcyBmYWxzZSkKICAgICogQHBhcmFtIHtCb29sZWFufSBbbXV0dWFsPXRydWVdIC0gSW5mbyBhYm91dCBpZiBtZXNzYWdlcyBvZiB0aGlzIG9iamVjdCBzaG91bGQgYmUgZW5jcnlwdGVkIChEZWZhdWx0IGlzIHRydWUpCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdE9ic2VydmVyPn0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgb2JzZXJ2ZXIuIEl0J3MgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXBvcnRlci4KICAgICovCgogIH0sIHsKICAgIGtleTogJ3N1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlKHNjaGVtYSwgb2JqVVJMKSB7CiAgICAgIHZhciBzdG9yZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICAgIHZhciBwMnAgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlOwogICAgICB2YXIgbXV0dWFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB0cnVlOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGNyaXRlcmlhID0ge307CgogICAgICBjcml0ZXJpYS5wMnAgPSBwMnA7CiAgICAgIGNyaXRlcmlhLnN0b3JlID0gc3RvcmU7CiAgICAgIGNyaXRlcmlhLnNjaGVtYSA9IHNjaGVtYTsKICAgICAgY3JpdGVyaWEucmVzb3VyY2UgPSBvYmpVUkw7CgogICAgICAvL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CiAgICAgIGNyaXRlcmlhLm11dHVhbCA9IG11dHVhbDsKCiAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIHN1YnNjcmliZV0gLSBzdWJzY3JpYmUgY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsKCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IGZhbHNlIH0pOwoKICAgICAgcmV0dXJuIF90aGlzLl9zdWJzY3JpYmUoY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKgogICAgKiBSZXF1ZXN0IGEgc3Vic2NyaXB0aW9uIHRvIGFuIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdC4KICAgICogQHBhcmFtIHtjcml0ZXJpYX0gY3JpdGVyaWEgLSBJbmZvcm1hdGlvbiB0byBkaXNjb3ZlcnkgdGhlIG9ic2VydmVyIG9iamVjdAogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RPYnNlcnZlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IG9ic2VydmVyLiBJdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVwb3J0ZXIuCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXN1bWVPYnNlcnZlcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3VtZU9ic2VydmVycyhjcml0ZXJpYSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgX2NyaXRlcmlhID0gY3JpdGVyaWEgfHwge307CgogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoX2NyaXRlcmlhLCB7IHJlc3VtZTogdHJ1ZSB9KTsKCiAgICAgIHJldHVybiBfdGhpcy5fc3Vic2NyaWJlKF9jcml0ZXJpYSk7CiAgICB9CgogICAgLyoqCiAgICAqIFJlcXVlc3QgYSByZWFkIGFjdGlvbiBvbiB0aGUgcmVwb3J0ZXIgb2JqZWN0CiAgICAqIEBwYXJhbSB7T2JqZWN0VVJMfSBvYmpVUkwgLSBVUkwgb2YgdGhlIHJlcG9ydGVyIG9iamVjdCB0byBiZSByZWFkCiAgICAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0Pn0gUmV0dXJuIFByb21pc2UgdG8gbGFzdCBhdmFpbGFibGUgZGF0YSBvZiB0aGUgcmVwb3J0ZXIKICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlYWQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWQob2JqVVJMKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIHJlcG9ydGVyIG9iamVjdCAobWF5YmUgdGhlcmUgaXMgbm8gbGlzdGVuZXIgYXZhaWxhYmxlLCBzbyBpdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggTWVzc2FnZUJ1cyAtPiByZXNvbHZlKQogICAgICAvL3dpbGwgcmVhY2ggdGhlIHJlbW90ZSBvYmplY3QgaW4gRGF0YU9iamVjdFJlcG9ydGVyIC0+IF9vblJlYWQKICAgICAgdmFyIHJlYWRNc2cgPSB7CiAgICAgICAgdHlwZTogJ3JlYWQnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBvYmpVUkwKICAgICAgfTsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UocmVhZE1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygncmVhZC1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVwbHkuYm9keS52YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIGNyZWF0ZSBhbmQgZGVsZXRlIGV2ZW50cyBvZiByZW1vdmUgUmVwb3J0ZXIgb2JqZWN0cy4KICAgICogVGhpcyBpcyByZWxlYXRlZCB0byB0aGUgbWVzc2FnZW5zIHNlbnQgYnkgY3JlYXRlIHRvIHRoZSBvYnNlcnZlcnMgSHlwZXJ0eSBhcnJheS4KICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawogICAgKi8KCiAgfSwgewogICAga2V5OiAnb25Ob3RpZmljYXRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTm90aWZpY2F0aW9uKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlciA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ19jcmVhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGUoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bWUgPSBjcml0ZXJpYS5yZXN1bWU7CiAgICAgICAgdmFyIGluaXRpYWxEYXRhID0gY3JpdGVyaWEuaW5pdGlhbERhdGEgfHwge307CiAgICAgICAgdmFyIHNjaGVtYSA9IHZvaWQgMDsKCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGUKICAgICAgICB2YXIgcmVxdWVzdE1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLAogICAgICAgICAgYm9keTogeyByZXN1bWU6IHJlc3VtZSB9CiAgICAgICAgfTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXTogJywgY3JpdGVyaWEsIHJlcXVlc3RNc2cpOwoKICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUgPSBpbml0aWFsRGF0YTsKICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUucmVwb3J0ZXIgPSBfdGhpcy5fb3duZXI7CgogICAgICAgIGlmIChjcml0ZXJpYS5zY2hlbWEpIHsKICAgICAgICAgIHNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsKICAgICAgICAgIHJlcXVlc3RNc2cuYm9keS5zY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7CiAgICAgICAgfQoKICAgICAgICBpZiAoY3JpdGVyaWEucDJwKSByZXF1ZXN0TXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwogICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgcmVxdWVzdE1zZy5ib2R5LnN0b3JlID0gY3JpdGVyaWEuc3RvcmU7CiAgICAgICAgaWYgKGNyaXRlcmlhLm9ic2VydmVycykgcmVxdWVzdE1zZy5ib2R5LmF1dGhvcmlzZSA9IGNyaXRlcmlhLm9ic2VydmVyczsKCiAgICAgICAgaWYgKHJlc3VtZSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsKICAgICAgICB9CgogICAgICAgIC8vcmVxdWVzdCBjcmVhdGUgdG8gdGhlIGFsbG9jYXRpb24gc3lzdGVtLiBDYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIFBvbGljeUVuZ2luZS4KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZS1yZXNwb25zZTogJywgcmVwbHkpOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIC8vcmVwb3J0ZXIgY3JlYXRpb24gYWNjZXB0ZWQKICAgICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7CgogICAgICAgICAgICBpZiAocmVzdW1lKSB7CiAgICAgICAgICAgICAgc2NoZW1hID0gcmVwbHkuYm9keS5zY2hlbWE7CiAgICAgICAgICAgICAgaW5pdGlhbERhdGEgPSByZXBseS5ib2R5LnZhbHVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCBpbml0aWFsRGF0YSwgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcyk7CiAgICAgICAgICAgIF90aGlzLl9yZXBvcnRlcnNbb2JqVVJMXSA9IG5ld09iajsKCiAgICAgICAgICAgIHJlc29sdmUobmV3T2JqKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vcmVwb3J0ZXIgY3JlYXRpb24gcmVqZWN0ZWQKICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zdWJzY3JpYmUoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsU3Vic2NyaWJlCiAgICAgICAgdmFyIHN1YnNjcmliZU1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLAogICAgICAgICAgYm9keToge30KICAgICAgICB9OwoKICAgICAgICAvLyBIeXBlcnR5IHJlcXVlc3QgdG8gYmUgYW4gT2JzZXJ2ZXIKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNoeXBlcnR5LXJlcXVlc3QtdG8tYmUtYW4tb2JzZXJ2ZXIKCiAgICAgICAgLy8gUmVzdW1lIFN1YnNjcmlwdGlvbnMgZm9yIHRoZSBzYW1lIEh5cGVydHkgVVJMCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLXRoZS1zYW1lLWh5cGVydHktdXJsCgogICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciBhIGNlcnRhaW4gdXNlciBhbmQgZGF0YSBzY2hlbWEgaW5kZXBlbmRlbnRseSBvZiB0aGUgSHlwZXJ0eSBVUkwuCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLWEtY2VydGFpbi11c2VyLWFuZC1kYXRhLXNjaGVtYS1pbmRlcGVuZGVudGx5LW9mLXRoZS1oeXBlcnR5LXVybAogICAgICAgIGlmIChjcml0ZXJpYSkgewogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdwMnAnKSkgc3Vic2NyaWJlTXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdzdG9yZScpKSBzdWJzY3JpYmVNc2cuYm9keS5zdG9yZSA9IGNyaXRlcmlhLnN0b3JlOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdzY2hlbWEnKSkgc3Vic2NyaWJlTXNnLmJvZHkuc2NoZW1hID0gY3JpdGVyaWEuc2NoZW1hOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdpZGVudGl0eScpKSBzdWJzY3JpYmVNc2cuYm9keS5pZGVudGl0eSA9IGNyaXRlcmlhLmlkZW50aXR5OwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdyZXNvdXJjZScpKSBzdWJzY3JpYmVNc2cuYm9keS5yZXNvdXJjZSA9IGNyaXRlcmlhLnJlc291cmNlOwogICAgICAgIH0KCiAgICAgICAgc3Vic2NyaWJlTXNnLmJvZHkucmVzdW1lID0gY3JpdGVyaWEucmVzdW1lOwoKICAgICAgICAvL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CiAgICAgICAgdmFyIG11dHVhbEF1dGhlbnRpY2F0aW9uID0gY3JpdGVyaWEubXV0dWFsOwogICAgICAgIGlmICghbXV0dWFsQXV0aGVudGljYXRpb24pIHN1YnNjcmliZU1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gbXV0dWFsQXV0aGVudGljYXRpb247CgogICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBzdWJzY3JpYmUgbWVzc2FnZTogJywgY3JpdGVyaWEsIHN1YnNjcmliZU1zZyk7CgogICAgICAgIC8vcmVxdWVzdCBzdWJzY3JpcHRpb24KICAgICAgICAvL1Byb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4KICAgICAgICAvL2ZvciBtb3JlIGluZm8gc2VlIHRoZSBEYXRhUHJvdmlzaW9uYWwgY2xhc3MgZG9jdW1lbnRhdGlvbi4KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlLXJlc3BvbnNlOiAnLCByZXBseSk7CgogICAgICAgICAgdmFyIHNjaGVtYSA9IHJlcGx5LmJvZHkuc2NoZW1hOwogICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7CgogICAgICAgICAgdmFyIG5ld1Byb3Zpc2lvbmFsID0gX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOwogICAgICAgICAgZGVsZXRlIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXTsKICAgICAgICAgIGlmIChuZXdQcm92aXNpb25hbCkgbmV3UHJvdmlzaW9uYWwuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKCiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlIDwgMjAwKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBuZXcgRGF0YVByb3Zpc2lvbmFsOiAnLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzLCBvYmpVUkwpOwogICAgICAgICAgICBuZXdQcm92aXNpb25hbCA9IG5ldyBfRGF0YVByb3Zpc2lvbmFsMi5kZWZhdWx0KF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsKICAgICAgICAgICAgX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdID0gbmV3UHJvdmlzaW9uYWw7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlcl0gLSBuZXcgRGF0YSBPYmplY3QgT2JzZXJ2ZXI6ICcsIHJlcGx5LCBfdGhpcy5fcHJvdmlzaW9uYWxzKTsKCiAgICAgICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICAgICAgdmFyIG5ld09iaiA9IG5ldyBfRGF0YU9iamVjdE9ic2VydmVyMi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIHNjaGVtYSwgJ29uJywgcmVwbHkuYm9keS52YWx1ZSwgbmV3UHJvdmlzaW9uYWwuY2hpbGRyZW4sIHJlcGx5LmJvZHkudmVyc2lvbiwgbXV0dWFsQXV0aGVudGljYXRpb24pOwogICAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF0gPSBuZXdPYmo7CgogICAgICAgICAgICByZXNvbHZlKG5ld09iaik7CiAgICAgICAgICAgIG5ld1Byb3Zpc2lvbmFsLmFwcGx5KG5ld09iaik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSBsb2NhbCBydW50aW1lIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQoKICB9LCB7CiAgICBrZXk6ICdfb25Gb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Gb3J3YXJkKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJlcG9ydGVyID0gX3RoaXMuX3JlcG9ydGVyc1ttc2cuYm9keS50b107CiAgICAgIHJlcG9ydGVyLl9vbkZvcndhcmQobXNnKTsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBTeW5jaGVyIC0+IGNyZWF0ZSAodGhpcyBpcyBhY3R1YWxseSBhbiBpbnZpdGF0aW9uIHRvIHN1YnNjcmliZSkKCiAgfSwgewogICAga2V5OiAnX29uUmVtb3RlQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVDcmVhdGUobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL3JlbW92ZSAiL3N1YnNjcmlwdGlvbiIgZnJvbSB0aGUgVVJMCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5mcm9tLnNsaWNlKDAsIC0xMyk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmJvZHkuc291cmNlLAogICAgICAgIHVybDogcmVzb3VyY2UsCiAgICAgICAgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEsCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLAogICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgYWNrOiBmdW5jdGlvbiBhY2sodHlwZSkgewogICAgICAgICAgdmFyIGxUeXBlID0gMjAwOwogICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgbFR5cGUgPSB0eXBlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vc2VuZCBhY2sgcmVzcG9uc2UgbWVzc2FnZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IGxUeXBlIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbU3luY2hlcl0gTk9USUZJQ0FUSU9OLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gZGVsZXRlCgogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZURlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlRGVsZXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9yZW1vdmUgIi9zdWJzY3JpcHRpb24iIGZyb20gdGhlIFVSTAogICAgICB2YXIgcmVzb3VyY2UgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fb2JzZXJ2ZXJzW3Jlc291cmNlXTsKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIHZhciBldmVudCA9IHsKICAgICAgICAgIHR5cGU6IG1zZy50eXBlLAogICAgICAgICAgdXJsOiByZXNvdXJjZSwKICAgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgICBhY2s6IGZ1bmN0aW9uIGFjayh0eXBlKSB7CiAgICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsKICAgICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgICBsVHlwZSA9IHR5cGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vVE9ETzogYW55IG90aGVyIGRpZmZlcmVudCBvcHRpb25zIGZvciB0aGUgcmVsZWFzZSBwcm9jZXNzLCBsaWtlIGFjY2VwdCBidXQgbm9yIHJlbGVhc2UgbG9jYWw/CiAgICAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgb2JqZWN0LmRlbGV0ZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikgewogICAgICAgICAgY29uc29sZS5sb2coJ05PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwNCwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnb3duZXInLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9vd25lcjsKICAgIH0KCiAgICAvKioKICAgICogQWxsIG93bmVkIHJlcG9ydGVycywgdGhlIG9uZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgYnkgYSBjcmVhdGUKICAgICogQHR5cGUge09iamVjdDxVUkwsIERhdGFPYmplY3RSZXBvcnRlcj59CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXBvcnRlcnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZXBvcnRlcnM7CiAgICB9CgogICAgLyoqCiAgICAqIEFsbCBvd25lZCBvYnNlcnZlcnMsIHRoZSBvbmVzIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IGEgbG9jYWwgc3Vic2NyaXB0aW9uCiAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0T2JzZXJ2ZXI+fQogICAgKi8KCiAgfSwgewogICAga2V5OiAnb2JzZXJ2ZXJzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzOwogICAgfQogIH1dKTsKICByZXR1cm4gU3luY2hlcjsKfSgpOyAvKioKICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICoKICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgKgogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAqCiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAqKi8KCmV4cG9ydHMuZGVmYXVsdCA9IFN5bmNoZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEzMSAqLywKLyogMTMyICovLAovKiAxMzMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKICogQGFjY2VzcyBwcml2YXRlCiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcgZGVsdGEgY2hhbmdlcyBpbiByZW1vdGUgb2JqZWN0cywgYmVmb3JlIHRoZSByZXNwb25zZSBvZiBzdWJzY3JpcHRpb24gcmVhY2ggdGhlIG9ic2VydmVyLgogKiBJdCdzIHVzZWQgaW4gU3luY2hlciAtPiBzdWJzY3JpYmUuIFRoZSBmbG93IGlzIGRlZmluZWQgYXM6CiAqIDEuIChvYnNlcnZlcikgLS1zdWJzY3JpYmUtLT4gKHJlcG9ydGVyKQogKiAyLiAob2JzZXJ2ZXIpIDwtLWRlbHRhIHVwZGF0ZXMtLSAocmVwb3J0ZXIpCiAqIDMuIChvYnNlcnZlcikgPC0tc3Vic2NyaWJlIHJlc3BvbnNlLS0gKHJlcG9ydGVyKQogKiBUaGlzIG1lYW5zIHRoYXQgdGhlcmUgY291bGQgYmUgZGVsdGEgdXBkYXRlcyB0cmFuc2ZlcnJlZCBiZWZvcmUgdGhlIHN1YnNjcmlwdGlvbiBjb25maXJtYXRpb24uCiAqIFNpbmNlIHRoZXJlIGlzIG5vIERhdGFPYmplY3RPYnNlcnZlciBiZWZvcmUgdGhlIHVic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiwgdGhlcmUgc2hvdWxkIGJlIHNvbWUgb3RoZXIgb2JqZWN0IGNvbGxlY3RpbmcgdGhlIHVwZGF0ZXMuCiAqIFByb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4KICovCnZhciBEYXRhUHJvdmlzaW9uYWwgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQogIF9saXN0ZW5lcjogTXNnTGlzdGVuZXIKICAgX2NoYW5nZXM6IFtdCiAgKi8KCiAgZnVuY3Rpb24gRGF0YVByb3Zpc2lvbmFsKG93bmVyLCB1cmwsIGJ1cywgY2hpbGRyZW4pIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFQcm92aXNpb25hbCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fYnVzID0gYnVzOwogICAgX3RoaXMuX2NoaWxkcmVuID0gY2hpbGRyZW47CgogICAgX3RoaXMuX2NoYW5nZXMgPSBbXTsKICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YVByb3Zpc2lvbmFsLCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YVByb3Zpc2lvbmFsLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgX3RoaXMuX2NoYW5nZXMucHVzaChtc2cpOwogICAgICB9KTsKCiAgICAgIC8qCiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOwogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVuKSB7CiAgICAgICAgbGV0IGNoaWxkQmFzZVVSTCA9IHVybCArICcvY2hpbGRyZW4vJzsKICAgICAgICBfdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHsKICAgICAgICAgIGxldCBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwogICAgICAgICAgbGV0IGxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgKG1zZykgPT4gewogICAgICAgICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgICAgICAgfSk7CiAgICAgIH0qLwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTsKCiAgICAgIC8qX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgbGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgIH0pOyovCiAgICB9CiAgfSwgewogICAga2V5OiAnYXBwbHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KG9ic2VydmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLl9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGNoYW5nZSkgewogICAgICAgIG9ic2VydmVyLl9jaGFuZ2VPYmplY3Qob2JzZXJ2ZXIuX3N5bmNPYmosIGNoYW5nZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2NoaWxkcmVuJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhUHJvdmlzaW9uYWw7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFQcm92aXNpb25hbDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTM0ICovLAovKiAxMzUgKi8sCi8qIDEzNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAxMzcgKi8sCi8qIDEzOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NSksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAxMzkgKi8sCi8qIDE0MCAqLywKLyogMTQxICovLAovKiAxNDIgKi8sCi8qIDE0MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuYXNzaWduOwoKLyoqKi8gfSksCi8qIDE0NCAqLywKLyogMTQ1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTUxKTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7CiAgcmV0dXJuICRPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpOwp9OwoKLyoqKi8gfSksCi8qIDE0NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgovLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pCnZhciBnZXRLZXlzICA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpCiAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpCiAgLCBwSUUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpCiAgLCB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpCiAgLCBJT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpCiAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247CgovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKbW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHZhciBBID0ge30KICAgICwgQiA9IHt9CiAgICAsIFMgPSBTeW1ib2woKQogICAgLCBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JzsKICBBW1NdID0gNzsKICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7CiAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7Cn0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldCkKICAgICwgYUxlbiAgPSBhcmd1bWVudHMubGVuZ3RoCiAgICAsIGluZGV4ID0gMQogICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mCiAgICAsIGlzRW51bSAgICAgPSBwSUUuZjsKICB3aGlsZShhTGVuID4gaW5kZXgpewogICAgdmFyIFMgICAgICA9IElPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKQogICAgICAsIGtleXMgICA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUykKICAgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aAogICAgICAsIGogICAgICA9IDAKICAgICAgLCBrZXk7CiAgICB3aGlsZShsZW5ndGggPiBqKWlmKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpVFtrZXldID0gU1trZXldOwogIH0gcmV0dXJuIFQ7Cn0gOiAkYXNzaWduOwoKLyoqKi8gfSksCi8qIDE0NyAqLywKLyogMTQ4ICovLAovKiAxNDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSkKdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Nil9KTsKCi8qKiovIH0pLAovKiAxNTAgKi8sCi8qIDE1MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KS5mOwoKX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicsIGZ1bmN0aW9uKCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKICAgIHJldHVybiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRvSU9iamVjdChpdCksIGtleSk7CiAgfTsKfSk7CgovKioqLyB9KSwKLyogMTUyICovLAovKiAxNTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gICAgIHByb3h5LW9ic2VydmUgdjAuMC4xOAovLyAgICAgQ29weXJpZ2h0IChjKSAyMDE1LCAyMDE2IFNpbW9uIFkuIEJsYWNrd2VsbCwgQW55V2hpY2hXYXkKLy8gICAgIE1JVCBMaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAooZnVuY3Rpb24oKSB7CgkidXNlIHN0cmljdCI7CgkvLyBDcmVhdGVzIGFuZCByZXR1cm5zIGEgUHJveHkgd3JhcHBpbmcgYSB0YXJnZXQgc28gdGhhdCBhbGwgY2hhbmdlcyBjYW4gYmUgdHJhcHBlZCBhbmQgZm9yd2FyZGVkIHRvCgkvLyBhIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgdGFrZXMgYW4gYXJyYXkgb2YgY2hhbmdlcyBqdXN0IGxpa2UgdGhlIHRyYWRpdGlvbmFsIG9yaWdpbmFsIENocm9tZSBPYmplY3Qub2JzZXJ2ZQoJLy8ge29iamVjdDo8b2JqZWN0IGNoYW5nZWQ+LG5hbWU6PGZpZWxkIGNoYW5nZWQ+LHR5cGU6YWRkfHVwZGF0ZXxkZWxldGV8cmVjb25maWd1cmV8cHJldmVudEV4dGVuc2lvbnN8c2V0UHJvdG90eXBlLG9sZFZhbHVlOjxvbGQgdmFsdWUgaWYgdXBkYXRlIHwgZGVsZXRlPn0KCS8vIFRoZSBhY2NlcHRsaXN0IGNhbiBiZSBhZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUuCgkvLyB2IDAuMC4xMCB0byBzdXBwb3J0IHBhdXNpbmcgYW5kIHJlc3RhcnRpbmcgb2JzZXJ2YXRpb24gdHdvIGFkZGl0aW9uYWwgY29uc3RydWN0b3IgYXJndW1lbnRzIGFyZSBhdmFpbGFibGUgdG8gT2JqZWN0Lm9ic2VydmU6CgkvLyBwYXVzYWJsZSAtIGNyZWF0ZSB0aGUgT2JzZXJ2ZXIgc28gaXQgY2FuIGJlIHBhdXNlZAoJLy8gcGF1c2UgLSBjcmVhdGUgb2JzZXJ2ZXIgaW4gcGF1c2VkIHN0YXRlCgkvLyBpZiBwYXVzYWJsZSBpcyB0cnVlIHRoZW4gYW4gYWRkaXRpb25hbCBtZXRob2QgZGVsaXZlcihpZ25vcmVQcmV2aW91cykgaXMgYXZhaWxhYmxlIHRvIHN0YXJ0IGRlbGl2ZXJ5CgkvLyB0byBwYXVzZSBkZWxpdmVyeSBzZXQgYSBwcm9wZXJ0eSBjYWxsZWQgcGF1c2Ugb24gdGhlIGZ1bmN0aW9uIGRlbGl2ZXIgdG8gdHJ1ZQoJLy8gcGF1c2FibGUgaXMgb3B0aW9uYWwgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2Ygc2hhZG93aW5nIGEgcHJvcGVydHkgb3IgbWV0aG9kIG9uIGFueSBleGlzdGluZyBjb2RlIGNhbGxlZCBkZWxpdmVyCglpZighT2JqZWN0Lm9ic2VydmUgJiYgdHlwZW9mKFByb3h5KT09PSJmdW5jdGlvbiIpIHsKCQlmdW5jdGlvbiBPYnNlcnZlcih0YXJnZXQsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgewoJICAgIAl2YXIgbWUgPSB0aGlzLCBwcm94eTsKCSAgICAJZnVuY3Rpb24gZGVsaXZlcihpZ25vcmVQcmV2aW91cyxkZWxheSkgewoJICAgIAkJZGVsaXZlci5kZWxheSA9IGRlbGF5OwoJICAgIAkJaWYoIWRlbGl2ZXIucGF1c2UpIHsKCSAgICAgICAgCQlpZihtZS5jaGFuZ2VzZXQubGVuZ3RoPjApIHsKCSAgICAgICAgCQkJaWYoIWlnbm9yZVByZXZpb3VzKSB7CgkJICAgIAkgICAgCQl2YXIgY2hhbmdlcyA9IG1lLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiAhYWNjZXB0bGlzdCB8fCBhY2NlcHRsaXN0LmluZGV4T2YoY2hhbmdlLnR5cGUpPj0wOyB9KTsKCQkgICAgICAgIAkJCWlmKGNoYW5nZXMubGVuZ3RoPjApIHsKCQkgICAgICAgIAkJCQljYWxsYmFjayhjaGFuZ2VzKTsKCQkgICAgICAgIAkJCX0KCSAgICAgICAgCQkJfQoJICAgICAgICAJCQltZS5jaGFuZ2VzZXQgPSBbXTsKCSAgICAgICAgCQl9CgkgICAgCQl9CgkgICAgCX0KCSAgICAJZGVsaXZlci5wYXVzZSA9IHBhdXNlOwoJICAgIAlkZWxpdmVyLmRlbGF5ID0gZGVsYXk7CgkJICAgIG1lLmdldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsKCQkgICAgCWlmKHByb3BlcnR5PT09Il9fb2JzZXJ2ZXJfXyIpIHsKCQkgICAgCQlyZXR1cm4gbWU7CgkJICAgIAl9CgkJICAgIAlpZihwcm9wZXJ0eT09PSJ1bm9ic2VydmUiKSB7CgkJICAgIAkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJCSAgICAJCQlPYmplY3QudW5vYnNlcnZlKHRhcmdldCk7CgkJICAgIAkJCXJldHVybiB0YXJnZXQ7CgkJICAgIAkJfTsKCQkgICAgCX0KCQkgICAgCWlmKHByb3BlcnR5PT09ImRlbGl2ZXIiKSB7CgkJICAgIAkJcmV0dXJuIGRlbGl2ZXI7CgkJICAgIAl9CgkJICAgIAlyZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTsKCQkgICAgfQoJICAgIAltZS50YXJnZXQgPSB0YXJnZXQ7CgkgICAgCW1lLmNoYW5nZXNldCA9IFtdOwoJICAgIAlpZighbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXykgewoJICAgIAkJLy8gX19vYnNlcnZlckNhbGxiYWNrc19fIGlzIHVzZWQgYXMgYW4gaW5kZXggdG8gZ2V0IGF0IHRoZSBwcm94eSB3aGljaCBpcyB0aGUgb2JzZXJ2ZXIsIHNvIHdlIGNhbiB1bm9ic2VydmUKCSAgICAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTsKCSAgICAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIl9fb2JzZXJ2ZXJzX18iLHtlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOmZhbHNlLHZhbHVlOltdfSk7CgkgICAgCX0KCSAgICAJbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKGNhbGxiYWNrKTsKCSAgICAJbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJzX18ucHVzaCh0aGlzKTsKCSAgICAJcHJveHkgPSBuZXcgUHJveHkodGFyZ2V0LG1lKTsKCSAgICAJZGVsaXZlcihmYWxzZSxkZWxheSk7CgkgICAgCXJldHVybiBwcm94eTsKCSAgICB9CgkJT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGl2ZXIgPSBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIHRoaXMuZ2V0KG51bGwsImRlbGl2ZXIiKTsKCQl9CgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7IC8vICwgcmVjZWl2ZXIKCSAgICAJdmFyIG9sZHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTsKCSAgICAJdmFyIHR5cGUgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKTsKCSAgICAJdGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlOwoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICghdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKHR5cGUpPj0wKSkgewoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZTp0eXBlfSwKCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCSAgICAgICAgCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7CgkgICAgICAgIAlpZih0eXBlPT09InVwZGF0ZSIpIHsKCSAgICAgICAgCQljaGFuZ2Uub2xkVmFsdWUgPSBvbGR2YWx1ZTsKCSAgICAgICAgCX0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCSAgICAgICAgCWlmKHN0YXJ0KSB7CgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsKCSAgICAgICAgCX0KCSAgICAJfQoJICAgIAlyZXR1cm4gdHJ1ZTsKCSAgICB9OwoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsKCSAgICAJdmFyIG9sZHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTsKCSAgICAJLy9pZih0eXBlb2Yob2xkdmFsdWUpIT09InVuZGVmaW5lZCIpIHsKCQkgICAgCWRlbGV0ZSB0YXJnZXRbcHJvcGVydHldOwoJCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJkZWxldGUiKT49MCkgewoJCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6ImRlbGV0ZSIsb2xkVmFsdWU6b2xkdmFsdWV9LAoJCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCQkgICAgICAgIAkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOwoJCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCQkgICAgICAgIAlpZihzdGFydCkgewoJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJCSAgICAgICAgCX0KCQkgICAgCX0KCSAgICAJLy99CgkgICAgCXJldHVybiB0cnVlOwoJICAgIH07CgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLmRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikgewoJICAgIAlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7CgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicmVjb25maWd1cmUiKT49MCkgewoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZToicmVjb25maWd1cmUifSwKICAgICAgICAJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKICAgICAgICAJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7CgkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7CgkgICAgICAgIAlpZihzdGFydCkgewoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7CgkgICAgICAgIAl9CgkgICAgCX0KCSAgICAJcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBPYnNlcnZlci5wcm90b3R5cGUuc2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbih0YXJnZXQsIHByb3RvdHlwZSkgewoJICAgIAl2YXIgb2xkdmFsdWUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KTsKCSAgICAJT2JqZWN0LnNldFByb3RvdHlwZU9mKHRhcmdldCwgcHJvdG90eXBlKTsKCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJzZXRQcm90b3R5cGUiKT49MCkgewoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6Il9fcHJvdG9fXyIsdHlwZToic2V0UHJvdG90eXBlIixvbGRWYWx1ZTpvbGR2YWx1ZX0sCiAgICAJCQkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsCiAgICAJCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOwoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOwoJICAgICAgICAJaWYoc3RhcnQpIHsKCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJICAgICAgICAJfQoJICAgIAl9CgkgICAgCXJldHVybiB0cnVlOwoJICAgIH07CgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zID0gZnVuY3Rpb24odGFyZ2V0KSB7CgkgICAgICAgIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh0YXJnZXQpOwoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApIHsKCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCx0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyJ9LAoJCQkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLAoJCQkJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsKCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsKCSAgICAgICAgCWlmKHN0YXJ0KSB7CgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsKCSAgICAgICAgCX0KCSAgICAJfQoJICAgIAlyZXR1cm4gdHJ1ZTsKCSAgICB9OwoJICAgIE9iamVjdC5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsKCSAgICAJcmV0dXJuIG5ldyBPYnNlcnZlcihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7CgkgICAgfTsKCSAgICBPYmplY3QudW5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKSB7CgkgICAgCWlmKG9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18pIHsKCSAgICAJCWlmKCFjYWxsYmFjaykgewoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKDAsb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5sZW5ndGgpOwoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZSgwLG9iamVjdC5fX29ic2VydmVyc19fLmxlbmd0aCk7CgkgICAgCQkJcmV0dXJuOwoJICAgIAkJfQoJICAgIAkJb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKG9ic2VydmVyY2FsbGJhY2ssaSkgewoJICAgIAkJCWlmKGNhbGxiYWNrPT09b2JzZXJ2ZXJjYWxsYmFjaykgewoJICAgIAkJCQlvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZShpLDEpOwoJICAgIAkJCQlkZWxldGUgb2JqZWN0Ll9fb2JzZXJ2ZXJzX19baV0uY2FsbGJhY2s7CgkgICAgCQkJCW9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZShpLDEpOwoJICAgIAkJCX0KCSAgICAJCX0pOwoJICAgIAl9CgkgICAgfTsKCSAgICBBcnJheS5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsKCSAgICAJaWYoIShvYmplY3QgaW5zdGFuY2VvZiBBcnJheSkgJiYgIUFycmF5LmlzQXJyYXkob2JqZWN0KSkgewoJICAgIAkJdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gQXJyYXkub2JzZXJ2ZXIgaXMgbm90IGFuIEFycmF5Iik7CgkgICAgCX0KICAgICAgICAgICAgCWFjY2VwdGxpc3QgPSBhY2NlcHRsaXN0IHx8IFsiYWRkIiwgInVwZGF0ZSIsICJkZWxldGUiLCAic3BsaWNlIl07CgkgICAgCXZhciBhcnJheXByb3h5ID0gbmV3IFByb3h5KG9iamVjdCx7Z2V0OiBmdW5jdGlvbih0YXJnZXQscHJvcGVydHkpIHsKCSAgICAJCWlmKHByb3BlcnR5PT09InVub2JzZXJ2ZSIpIHsKCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHsKCQkgICAgCQkJaWYoY2FsbGJhY2spIHsKCQkgICAgCQkJCXJldHVybiBPYmplY3QudW5vYnNlcnZlKHRhcmdldCxjYWxsYmFjayk7CgkJICAgIAkJCX0KCQkgICAgCQkJcmV0dXJuIHRhcmdldC51bm9ic2VydmUoKTsKCQkgICAgCQl9OwoJCSAgICAJfQoJICAgIAkJaWYocHJvcGVydHk9PT0ic3BsaWNlIikgewoJICAgIAkJCXJldHVybiBmdW5jdGlvbihzdGFydCxlbmQpIHsKCSAgICAJCQkJaWYodHlwZW9mKHN0YXJ0KSE9PSJudW1iZXIiIHx8IHR5cGVvZihlbmQpIT09Im51bWJlciIpIHsKCSAgICAJCQkJCXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IHR3byBhcmd1bWVudHMgdG8gQXJyYXkgc3BsaWNlIGFyZSBub3QgbnVtYmVyLCBudW1iZXIiKTsKCSAgICAJCQkJfQoJICAgIAkgICAgCQl2YXIgcmVtb3ZlZCA9IHRoaXMuc2xpY2Uoc3RhcnQsc3RhcnQrZW5kKSwKCSAgICAJICAgIAkJCWFkZGVkQ291bnQgPSAoYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHMubGVuZ3RoLTIgOiAwKSwKCSAgICAJICAgIAkJCWNoYW5nZSA9ICB7b2JqZWN0Om9iamVjdCx0eXBlOiJzcGxpY2UiLGluZGV4OnN0YXJ0LHJlbW92ZWQ6cmVtb3ZlZCxhZGRlZENvdW50OmFkZGVkQ291bnR9OwoJICAgIAkgICAgCQl0YXJnZXQuc3BsaWNlLmFwcGx5KHRhcmdldCxhcmd1bWVudHMpOwoJICAgIAkgICAgCQlpZihhY2NlcHRsaXN0LmluZGV4T2YoInNwbGljZSIpPj0wKSB7CgkgICAgCSAgICAJCQl2YXIgc3RhcnQgPSBwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwKCSAgICAJICAgICAgICAJCQlkZWxpdmVyID0gcHJveHkuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTsKCSAgICAJICAgIAkJCXByb3h5Ll9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOwoJICAgIAkgICAgCQkJaWYoc3RhcnQpIHsKCSAgICAJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOwoJICAgIAkJICAgICAgICAJfQoJICAgIAkgICAgCQl9CgkgICAgCSAgICAJfQoJICAgIAkJfQoJICAgIAkJaWYocHJvcGVydHk9PT0icHVzaCIpIHsKCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsKCSAgICAJCSAgICAJcmV0dXJuIHRoaXMuc3BsaWNlKHRoaXMubGVuZ3RoLDAsaXRlbSk7CgkgICAgCQkgICAgfQoJICAgIAkJfQoJICAgIAkJaWYocHJvcGVydHk9PT0icG9wIikgewoJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oKSB7CgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpOwoJICAgIAkJICAgIH0KCSAgICAJCX0KCSAgICAJCWlmKHByb3BlcnR5PT09InVuc2hpZnQiKSB7CgkgICAgCQkJIHJldHVybiBmdW5jdGlvbihpdGVtKSB7CiAgICAJCSAgICAJCXJldHVybiB0aGlzLnNwbGljZSgwLDAsaXRlbSk7CiAgICAJCSAgICAJfQoJICAgIAkJfQoJICAgIAkJaWYocHJvcGVydHk9PT0ic2hpZnQiKSB7CgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKCkgewoJICAgIAkgICAgCQlyZXR1cm4gdGhpcy5zcGxpY2UoMCwxKTsKCSAgICAJICAgIAl9CgkgICAgCQl9CgkgICAgCQlyZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTsKCSAgICAJfX0pOwoJICAgIAl2YXIgcHJveHkgPSBPYmplY3Qub2JzZXJ2ZShhcnJheXByb3h5LGZ1bmN0aW9uKGNoYW5nZXNldCkgeyAKCSAgICAJCXZhciBjaGFuZ2VzID0gY2hhbmdlc2V0LmZpbHRlcihmdW5jdGlvbihjaGFuZ2UpIHsgcmV0dXJuIGNoYW5nZS5uYW1lIT09Imxlbmd0aCIgJiYgY2hhbmdlLm5hbWUhPT0iYWRkIiAmJiAoIWFjY2VwdGxpc3QgfHwgYWNjZXB0bGlzdC5pbmRleE9mKGNoYW5nZS50eXBlKT49MCk7IH0pOwoJICAgIAkJaWYoY2hhbmdlcy5sZW5ndGg+MCkgewoJICAgIAkJCWNhbGxiYWNrKGNoYW5nZXMpOwoJICAgIAkJfQoJICAgIAl9LGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpOwoJICAgIAlyZXR1cm4gcHJveHk7CgkgICAgfTsKCSAgICBBcnJheS51bm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2spIHsKCQkgIHJldHVybiBvYmplY3QudW5vYnNlcnZlKGNhbGxiYWNrKTsKCSAgICB9Cgl9CglPYmplY3QuZGVlcE9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2sscGFydHMpIHsKCgkJcGFydHMgPSAocGFydHMgPyBwYXJ0cyA6IFtdKTsKCgkJdmFyIHRvVHlwZU5hbWUgPSBmdW5jdGlvbihvYmopIHsKCQkJcmV0dXJuICh7fSkudG9TdHJpbmcuY2FsbChvYmopLm1hdGNoKC9ccyhbYS16QS1aXSspLylbMV0udG9Mb3dlckNhc2UoKQoJCX0KCgkJZnVuY3Rpb24gcmVvYnNlcnZlKHZhbHVlLCBwYXJ0cykgewoJCQl2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTsKCQkJa2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewoJCQkJaWYoKHRvVHlwZU5hbWUodmFsdWVba2V5XSkgPT09ICdvYmplY3QnIHx8IHRvVHlwZU5hbWUodmFsdWVba2V5XSkgPT09ICdhcnJheScpICYmICF2YWx1ZVtrZXldLmhhc093blByb3BlcnR5KCdfX29ic2VydmVyc19fJykpIHsKCQkJCQl2YXIgbmV3cGFydHMgPSBwYXJ0cy5zbGljZSgwKTsKCQkJCQluZXdwYXJ0cy5wdXNoKGtleSk7CgkJCQkJdmFsdWVba2V5XSA9IE9iamVjdC5kZWVwT2JzZXJ2ZSh2YWx1ZVtrZXldLGNhbGxiYWNrLG5ld3BhcnRzKTsKCQkJCX0KCQkJfSk7CgkJfQoKCQlyZW9ic2VydmUob2JqZWN0LCBwYXJ0cyk7CgoJCXZhciBvYnNlcnZlZCA9IE9iamVjdC5vYnNlcnZlKG9iamVjdCxmdW5jdGlvbihjaGFuZ2VzZXQpIHsKCQkJdmFyIGNoYW5nZXMgPSBbXTsKCQkJZnVuY3Rpb24gcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0LG5ld09iamVjdCxwYXRoKSB7CgkJCQlpZihuZXdPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHsKCQkJCQl2YXIgbmV3a2V5cyA9IE9iamVjdC5rZXlzKG5ld09iamVjdCk7CgkJCQkJbmV3a2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewoJCQkJCQlpZighb2xkT2JqZWN0IHx8IChvbGRPYmplY3Rba2V5XSE9PW5ld09iamVjdFtrZXldKSkgewoJCQkJCQkJdmFyIG9sZHZhbHVlID0gKG9sZE9iamVjdCAmJiBvbGRPYmplY3Rba2V5XSE9PXVuZGVmaW5lZCA/IG9sZE9iamVjdFtrZXldIDogdW5kZWZpbmVkKSwKCQkJCQkJCQljaGFuZ2UgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKSwKCQkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsKCgkJCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGR2YWx1ZSxuZXdWYWx1ZTpuZXdPYmplY3Rba2V5XSxrZXlwYXRoOmtleXBhdGh9KTsKCQkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZHZhbHVlLG5ld09iamVjdFtrZXldLGtleXBhdGgpOwoJCQkJCQl9CgkJCQkJfSk7CgkJCQl9IGVsc2UgaWYob2xkT2JqZWN0IGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJCQkJdmFyIG9sZGtleXMgPSBPYmplY3Qua2V5cyhvbGRPYmplY3QpOwoJCQkJCW9sZGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKCQkJCQkJdmFyIGNoYW5nZSA9IChuZXdPYmplY3Q9PT1udWxsID8gInVwZGF0ZSIgOiAiZGVsZXRlIiksCgkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsKCQkJCQkJCQoJCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGRPYmplY3Rba2V5XSxuZXdWYWx1ZTpuZXdPYmplY3Qsa2V5cGF0aDprZXlwYXRofSk7CgkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZE9iamVjdFtrZXldLHVuZGVmaW5lZCxrZXlwYXRoKTsKCQkJCQl9KTsKCQkJCX0KCQkJfQoJCQljaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbihjaGFuZ2UpIHsKCQkJCXZhciBrZXlwYXRoID0gKHBhcnRzLmxlbmd0aD4wID8gcGFydHMuam9pbigiLiIpICsgIi4iIDogIiIpICsgY2hhbmdlLm5hbWU7CgoJCQkJaWYgKGNoYW5nZS50eXBlID09PSAidXBkYXRlIiB8fCBjaGFuZ2UudHlwZSA9PT0gImFkZCIpIHsgCgkJCQkJcmVvYnNlcnZlKGNoYW5nZS5vYmplY3QsIHBhcnRzKTsKCQkJCX0KCgkJCQljaGFuZ2VzLnB1c2goe25hbWU6Y2hhbmdlLm5hbWUsb2JqZWN0OmNoYW5nZS5vYmplY3QsdHlwZTpjaGFuZ2UudHlwZSxvbGRWYWx1ZTpjaGFuZ2Uub2xkVmFsdWUsbmV3VmFsdWU6Y2hhbmdlLm9iamVjdFtjaGFuZ2UubmFtZV0sa2V5cGF0aDprZXlwYXRofSk7CgkJCQlyZWN1cnNlKGNoYW5nZS5uYW1lLGNoYW5nZS5vYmplY3QsY2hhbmdlLm9sZFZhbHVlLGNoYW5nZS5vYmplY3RbY2hhbmdlLm5hbWVdLGtleXBhdGgpOwoJCQl9KTsKCQkJY2FsbGJhY2soY2hhbmdlcyk7CgkJfSk7CgkJcmV0dXJuIG9ic2VydmVkOwoJfTsKfSkoKTsKCgovKioqLyB9KSwKLyogMTU0ICovLAovKiAxNTUgKi8sCi8qIDE1NiAqLywKLyogMTU3ICovLAovKiAxNTggKi8sCi8qIDE1OSAqLywKLyogMTYwICovLAovKiAxNjEgKi8sCi8qIDE2MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkRhdGFPYmplY3RPYnNlcnZlciA9IGV4cG9ydHMuRGF0YU9iamVjdFJlcG9ydGVyID0gZXhwb3J0cy5TeW5jaGVyID0gdW5kZWZpbmVkOwoKdmFyIF9TeW5jaGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzApOwoKdmFyIF9TeW5jaGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N5bmNoZXIpOwoKdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7Cgp2YXIgX0RhdGFPYmplY3RSZXBvcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0UmVwb3J0ZXIpOwoKdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7Cgp2YXIgX0RhdGFPYmplY3RPYnNlcnZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0T2JzZXJ2ZXIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuU3luY2hlciA9IF9TeW5jaGVyMi5kZWZhdWx0OwpleHBvcnRzLkRhdGFPYmplY3RSZXBvcnRlciA9IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQ7CmV4cG9ydHMuRGF0YU9iamVjdE9ic2VydmVyID0gX0RhdGFPYmplY3RPYnNlcnZlcjIuZGVmYXVsdDsKCi8qKiovIH0pCi8qKioqKiovIF0pOwp9KTsKCn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwoKJ3VzZSBzdHJpY3QnOwoKLy8gU2hpbW1pbmcgc3RhcnRzIGhlcmUuCihmdW5jdGlvbigpIHsKICAvLyBVdGlscy4KICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7CiAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7CiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuYnJvd3NlckRldGFpbHM7CiAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci4KICBtb2R1bGUuZXhwb3J0cy5icm93c2VyRGV0YWlscyA9IGJyb3dzZXJEZXRhaWxzOwogIG1vZHVsZS5leHBvcnRzLmV4dHJhY3RWZXJzaW9uID0gdXRpbHMuZXh0cmFjdFZlcnNpb247CiAgbW9kdWxlLmV4cG9ydHMuZGlzYWJsZUxvZyA9IHV0aWxzLmRpc2FibGVMb2c7CgogIC8vIFVuY29tbWVudCB0aGUgbGluZSBiZWxvdyBpZiB5b3Ugd2FudCBsb2dnaW5nIHRvIG9jY3VyLCBpbmNsdWRpbmcgbG9nZ2luZwogIC8vIGZvciB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdy4gQ2FuIGFsc28gYmUgdHVybmVkIG9uIGluIHRoZSBicm93c2VyIHZpYQogIC8vIGFkYXB0ZXIuZGlzYWJsZUxvZyhmYWxzZSksIGJ1dCB0aGVuIGxvZ2dpbmcgZnJvbSB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvdwogIC8vIHdpbGwgbm90IGFwcGVhci4KICAvLyByZXF1aXJlKCcuL3V0aWxzJykuZGlzYWJsZUxvZyhmYWxzZSk7CgogIC8vIEJyb3dzZXIgc2hpbXMuCiAgdmFyIGNocm9tZVNoaW0gPSByZXF1aXJlKCcuL2Nocm9tZS9jaHJvbWVfc2hpbScpIHx8IG51bGw7CiAgdmFyIGVkZ2VTaGltID0gcmVxdWlyZSgnLi9lZGdlL2VkZ2Vfc2hpbScpIHx8IG51bGw7CiAgdmFyIGZpcmVmb3hTaGltID0gcmVxdWlyZSgnLi9maXJlZm94L2ZpcmVmb3hfc2hpbScpIHx8IG51bGw7CiAgdmFyIHNhZmFyaVNoaW0gPSByZXF1aXJlKCcuL3NhZmFyaS9zYWZhcmlfc2hpbScpIHx8IG51bGw7CgogIC8vIFNoaW0gYnJvd3NlciBpZiBmb3VuZC4KICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHsKICAgIGNhc2UgJ2Nocm9tZSc6CiAgICAgIGlmICghY2hyb21lU2hpbSB8fCAhY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGNocm9tZVNoaW07CgogICAgICBjaHJvbWVTaGltLnNoaW1HZXRVc2VyTWVkaWEoKTsKICAgICAgY2hyb21lU2hpbS5zaGltTWVkaWFTdHJlYW0oKTsKICAgICAgdXRpbHMuc2hpbUNyZWF0ZU9iamVjdFVSTCgpOwogICAgICBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QoKTsKICAgICAgY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgY2hyb21lU2hpbS5zaGltT25UcmFjaygpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2ZpcmVmb3gnOgogICAgICBpZiAoIWZpcmVmb3hTaGltIHx8ICFmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24pIHsKICAgICAgICBsb2dnaW5nKCdGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gZmlyZWZveFNoaW07CgogICAgICBmaXJlZm94U2hpbS5zaGltR2V0VXNlck1lZGlhKCk7CiAgICAgIHV0aWxzLnNoaW1DcmVhdGVPYmplY3RVUkwoKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbVNvdXJjZU9iamVjdCgpOwogICAgICBmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24oKTsKICAgICAgZmlyZWZveFNoaW0uc2hpbU9uVHJhY2soKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdlZGdlJzoKICAgICAgaWYgKCFlZGdlU2hpbSB8fCAhZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKSB7CiAgICAgICAgbG9nZ2luZygnTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBlZGdlLicpOwogICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLgogICAgICBtb2R1bGUuZXhwb3J0cy5icm93c2VyU2hpbSA9IGVkZ2VTaGltOwoKICAgICAgZWRnZVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICB1dGlscy5zaGltQ3JlYXRlT2JqZWN0VVJMKCk7CiAgICAgIGVkZ2VTaGltLnNoaW1QZWVyQ29ubmVjdGlvbigpOwogICAgICBicmVhazsKICAgIGNhc2UgJ3NhZmFyaSc6CiAgICAgIGlmICghc2FmYXJpU2hpbSkgewogICAgICAgIGxvZ2dpbmcoJ1NhZmFyaSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuJyk7CiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuCiAgICAgIG1vZHVsZS5leHBvcnRzLmJyb3dzZXJTaGltID0gc2FmYXJpU2hpbTsKCiAgICAgIHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSgpOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIGxvZ2dpbmcoJ1Vuc3VwcG9ydGVkIGJyb3dzZXIhJyk7CiAgfQp9KSgpOwoKfSx7Ii4vY2hyb21lL2Nocm9tZV9zaGltIjo0LCIuL2VkZ2UvZWRnZV9zaGltIjo2LCIuL2ZpcmVmb3gvZmlyZWZveF9zaGltIjo4LCIuL3NhZmFyaS9zYWZhcmlfc2hpbSI6MTAsIi4vdXRpbHMiOjExfV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CgovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzLmpzJykuYnJvd3NlckRldGFpbHM7Cgp2YXIgY2hyb21lU2hpbSA9IHsKICBzaGltTWVkaWFTdHJlYW06IGZ1bmN0aW9uKCkgewogICAgd2luZG93Lk1lZGlhU3RyZWFtID0gd2luZG93Lk1lZGlhU3RyZWFtIHx8IHdpbmRvdy53ZWJraXRNZWRpYVN0cmVhbTsKICB9LAoKICBzaGltT25UcmFjazogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmICEoJ29udHJhY2snIGluCiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbnRyYWNrJywgewogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjazsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24oZikgewogICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2spOwogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrID0gZik7CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAvLyBvbmFkZHN0cmVhbSBkb2VzIG5vdCBmaXJlIHdoZW4gYSB0cmFjayBpcyBhZGRlZCB0byBhbiBleGlzdGluZwogICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC4KICAgICAgICAgICAgZS5zdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcignYWRkdHJhY2snLCBmdW5jdGlvbih0ZSkgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRlLnRyYWNrOwogICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0ZS50cmFja307CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGUuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHsKICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ3RyYWNrJyk7CiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjazsKICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHt0cmFjazogdHJhY2t9OwogICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dOwogICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24oKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHsKICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmCiAgICAgICAgISgnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUpKSB7CiAgICAgICAgLy8gU2hpbSB0aGUgc3JjT2JqZWN0IHByb3BlcnR5LCBvbmNlLCB3aGVuIEhUTUxNZWRpYUVsZW1lbnQgaXMgZm91bmQuCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcmNPYmplY3Q7CiAgICAgICAgICB9LAogICAgICAgICAgc2V0OiBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgICAgICAvLyBVc2UgX3NyY09iamVjdCBhcyBhIHByaXZhdGUgcHJvcGVydHkgZm9yIHRoaXMgc2hpbQogICAgICAgICAgICB0aGlzLl9zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgICAgIGlmICh0aGlzLnNyYykgewogICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIXN0cmVhbSkgewogICAgICAgICAgICAgIHRoaXMuc3JjID0gJyc7CiAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTsKICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZWNyZWF0ZSB0aGUgYmxvYiB1cmwgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIG9yCiAgICAgICAgICAgIC8vIHJlbW92ZWQuIERvaW5nIGl0IG1hbnVhbGx5IHNpbmNlIHdlIHdhbnQgdG8gYXZvaWQgYSByZWN1cnNpb24uCiAgICAgICAgICAgIHN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGlmIChzZWxmLnNyYykgewogICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChzZWxmLnNyYyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZXRyYWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuc3JjKSB7CiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHNlbGYuc3JjKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2VsZi5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsKICAgIC8vIFRoZSBSVENQZWVyQ29ubmVjdGlvbiBvYmplY3QuCiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikgewogICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykgewogICAgICAgIC8vIFRyYW5zbGF0ZSBpY2VUcmFuc3BvcnRQb2xpY3kgdG8gaWNlVHJhbnNwb3J0cywKICAgICAgICAvLyBzZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD00ODY5CiAgICAgICAgLy8gdGhpcyB3YXMgZml4ZWQgaW4gTTU2IGFsb25nIHdpdGggdW5wcmVmaXhpbmcgUlRDUGVlckNvbm5lY3Rpb24uCiAgICAgICAgbG9nZ2luZygnUGVlckNvbm5lY3Rpb24nKTsKICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7CiAgICAgICAgICBwY0NvbmZpZy5pY2VUcmFuc3BvcnRzID0gcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5ldyB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7CiAgICAgIH07CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CiAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuCiAgICAgIGlmICh3ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlKSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIHZhciBvcmlnR2V0U3RhdHMgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7CiAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3RvciwKICAgICAgICBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKCiAgICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0CiAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy4KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgLy8gV2hlbiBzcGVjLXN0eWxlIGdldFN0YXRzIGlzIHN1cHBvcnRlZCwgcmV0dXJuIHRob3NlIHdoZW4gY2FsbGVkIHdpdGgKICAgICAgLy8gZWl0aGVyIG5vIGFyZ3VtZW50cyBvciB0aGUgc2VsZWN0b3IgYXJndW1lbnQgaXMgbnVsbC4KICAgICAgaWYgKG9yaWdHZXRTdGF0cy5sZW5ndGggPT09IDAgJiYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwKICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpKSB7CiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXSk7CiAgICAgIH0KCiAgICAgIHZhciBmaXhDaHJvbWVTdGF0c18gPSBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgIHZhciBzdGFuZGFyZFJlcG9ydCA9IHt9OwogICAgICAgIHZhciByZXBvcnRzID0gcmVzcG9uc2UucmVzdWx0KCk7CiAgICAgICAgcmVwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHJlcG9ydCkgewogICAgICAgICAgdmFyIHN0YW5kYXJkU3RhdHMgPSB7CiAgICAgICAgICAgIGlkOiByZXBvcnQuaWQsCiAgICAgICAgICAgIHRpbWVzdGFtcDogcmVwb3J0LnRpbWVzdGFtcCwKICAgICAgICAgICAgdHlwZTogewogICAgICAgICAgICAgIGxvY2FsY2FuZGlkYXRlOiAnbG9jYWwtY2FuZGlkYXRlJywKICAgICAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgICAgICAgICB9W3JlcG9ydC50eXBlXSB8fCByZXBvcnQudHlwZQogICAgICAgICAgfTsKICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICBzdGFuZGFyZFN0YXRzW25hbWVdID0gcmVwb3J0LnN0YXQobmFtZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0czsKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0OwogICAgICB9OwoKICAgICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgICB2YXIgbWFrZU1hcFN0YXRzID0gZnVuY3Rpb24oc3RhdHMpIHsKICAgICAgICByZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhzdGF0cykubWFwKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgcmV0dXJuW2tleSwgc3RhdHNba2V5XV07CiAgICAgICAgfSkpOwogICAgICB9OwoKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgewogICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBhcmdzWzFdKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8sCiAgICAgICAgICAgIGFyZ3VtZW50c1swXV0pOwogICAgICB9CgogICAgICAvLyBwcm9taXNlLXN1cHBvcnQKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIG9yaWdHZXRTdGF0cy5hcHBseShzZWxmLCBbCiAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICByZXNvbHZlKG1ha2VNYXBTdGF0cyhmaXhDaHJvbWVTdGF0c18ocmVzcG9uc2UpKSk7CiAgICAgICAgICB9LCByZWplY3RdKTsKICAgICAgfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spOwogICAgfTsKCiAgICAvLyBhZGQgcHJvbWlzZSBzdXBwb3J0IC0tIG5hdGl2ZWx5IGF2YWlsYWJsZSBpbiBDaHJvbWUgNTEKICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTEpIHsKICAgICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddCiAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzOwogICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFthcmdzWzBdLCByZXNvbHZlLCByZWplY3RdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPCAyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgW10pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPj0gMykgewogICAgICAgICAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vIHByb21pc2Ugc3VwcG9ydCBmb3IgY3JlYXRlT2ZmZXIgYW5kIGNyZWF0ZUFuc3dlci4gQXZhaWxhYmxlICh3aXRob3V0CiAgICAvLyBidWdzKSBzaW5jZSBNNTI6IGNyYnVnLzYxOTI4OQogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1MikgewogICAgICBbJ2NyZWF0ZU9mZmVyJywgJ2NyZWF0ZUFuc3dlciddLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdOwogICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEgfHwgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYKICAgICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0JykpIHsKICAgICAgICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkOwogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgbmF0aXZlTWV0aG9kLmFwcGx5KHNlbGYsIFtyZXNvbHZlLCByZWplY3QsIG9wdHNdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CgogICAgLy8gc2hpbSBpbXBsaWNpdCBjcmVhdGlvbiBvZiBSVENTZXNzaW9uRGVzY3JpcHRpb24vUlRDSWNlQ2FuZGlkYXRlCiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ10KICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID8KICAgICAgICAgICAgICAgIFJUQ0ljZUNhbmRpZGF0ZSA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpCiAgICB2YXIgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID0KICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlOwogICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIWFyZ3VtZW50c1swXSkgewogICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHsKICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfQp9OwoKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbU1lZGlhU3RyZWFtOiBjaHJvbWVTaGltLnNoaW1NZWRpYVN0cmVhbSwKICBzaGltT25UcmFjazogY2hyb21lU2hpbS5zaGltT25UcmFjaywKICBzaGltU291cmNlT2JqZWN0OiBjaHJvbWVTaGltLnNoaW1Tb3VyY2VPYmplY3QsCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiwKICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpCn07Cgp9LHsiLi4vdXRpbHMuanMiOjExLCIuL2dldHVzZXJtZWRpYSI6NX1dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMuanMnKS5sb2c7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIGNvbnN0cmFpbnRzVG9DaHJvbWVfID0gZnVuY3Rpb24oYykgewogICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLm1hbmRhdG9yeSB8fCBjLm9wdGlvbmFsKSB7CiAgICAgIHJldHVybiBjOwogICAgfQogICAgdmFyIGNjID0ge307CiAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07CiAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7CiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7CiAgICAgIH0KICAgICAgdmFyIG9sZG5hbWVfID0gZnVuY3Rpb24ocHJlZml4LCBuYW1lKSB7CiAgICAgICAgaWYgKHByZWZpeCkgewogICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKG5hbWUgPT09ICdkZXZpY2VJZCcpID8gJ3NvdXJjZUlkJyA6IG5hbWU7CiAgICAgIH07CiAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBjYy5vcHRpb25hbCA9IGNjLm9wdGlvbmFsIHx8IFtdOwogICAgICAgIHZhciBvYyA9IHt9OwogICAgICAgIGlmICh0eXBlb2Ygci5pZGVhbCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCdtaW4nLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICAgIG9jID0ge307CiAgICAgICAgICBvY1tvbGRuYW1lXygnbWF4Jywga2V5KV0gPSByLmlkZWFsOwogICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9jW29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuaWRlYWw7CiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHsKICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgY2MubWFuZGF0b3J5W29sZG5hbWVfKCcnLCBrZXkpXSA9IHIuZXhhY3Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgWydtaW4nLCAnbWF4J10uZm9yRWFjaChmdW5jdGlvbihtaXgpIHsKICAgICAgICAgIGlmIChyW21peF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307CiAgICAgICAgICAgIGNjLm1hbmRhdG9yeVtvbGRuYW1lXyhtaXgsIGtleSldID0gclttaXhdOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIGlmIChjLmFkdmFuY2VkKSB7CiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7CiAgICB9CiAgICByZXR1cm4gY2M7CiAgfTsKCiAgdmFyIHNoaW1Db25zdHJhaW50c18gPSBmdW5jdGlvbihjb25zdHJhaW50cywgZnVuYykgewogICAgY29uc3RyYWludHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7CiAgICBpZiAoY29uc3RyYWludHMgJiYgY29uc3RyYWludHMuYXVkaW8pIHsKICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7CiAgICB9CiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLnZpZGVvID09PSAnb2JqZWN0JykgewogICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSwgd2hlcmUgaXQgZGVmYXVsdHMgdG8gInVzZXIiLgogICAgICB2YXIgZmFjZSA9IGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgIGZhY2UgPSBmYWNlICYmICgodHlwZW9mIGZhY2UgPT09ICdvYmplY3QnKSA/IGZhY2UgOiB7aWRlYWw6IGZhY2V9KTsKCiAgICAgIGlmICgoZmFjZSAmJiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwKICAgICAgICAgICAgICAgICAgICBmYWNlLmlkZWFsID09PSAndXNlcicgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykpICYmCiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiYKICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGUpKSB7CiAgICAgICAgZGVsZXRlIGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7CiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50JykgewogICAgICAgICAgLy8gTG9vayBmb3IgImJhY2siIGluIGxhYmVsLCBvciB1c2UgbGFzdCBjYW0gKHR5cGljYWxseSBiYWNrIGNhbSkuCiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgZGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCc7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgYmFjayA9IGRldmljZXMuZmluZChmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdiYWNrJykgIT09IC0xOwogICAgICAgICAgICB9KSB8fCAoZGV2aWNlcy5sZW5ndGggJiYgZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgICAgaWYgKGJhY2spIHsKICAgICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5kZXZpY2VJZCA9IGZhY2UuZXhhY3QgPyB7ZXhhY3Q6IGJhY2suZGV2aWNlSWR9IDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aWRlYWw6IGJhY2suZGV2aWNlSWR9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0Nocm9tZV8oY29uc3RyYWludHMudmlkZW8pOwogICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgICAgICAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7CiAgICB9CiAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpOwogIH07CgogIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogewogICAgICAgIFBlcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InCiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50TmFtZSwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlOwogICAgICB9CiAgICB9OwogIH07CgogIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgc2hpbUNvbnN0cmFpbnRzXyhjb25zdHJhaW50cywgZnVuY3Rpb24oYykgewogICAgICBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGMsIG9uU3VjY2VzcywgZnVuY3Rpb24oZSkgewogICAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV87CgogIC8vIFJldHVybnMgdGhlIHJlc3VsdCBvZiBnZXRVc2VyTWVkaWEgYXMgYSBQcm9taXNlLgogIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgICB9KTsKICB9OwoKICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7CiAgICAgIGdldFVzZXJNZWRpYTogZ2V0VXNlck1lZGlhUHJvbWlzZV8sCiAgICAgIGVudW1lcmF0ZURldmljZXM6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICB2YXIga2luZHMgPSB7YXVkaW86ICdhdWRpb2lucHV0JywgdmlkZW86ICd2aWRlb2lucHV0J307CiAgICAgICAgICByZXR1cm4gTWVkaWFTdHJlYW1UcmFjay5nZXRTb3VyY2VzKGZ1bmN0aW9uKGRldmljZXMpIHsKICAgICAgICAgICAgcmVzb2x2ZShkZXZpY2VzLm1hcChmdW5jdGlvbihkZXZpY2UpIHsKICAgICAgICAgICAgICByZXR1cm4ge2xhYmVsOiBkZXZpY2UubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICBraW5kOiBraW5kc1tkZXZpY2Uua2luZF0sCiAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VJZDogZGV2aWNlLmlkLAogICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogJyd9OwogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9CgogIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC4KICAvLyBUT0RPKEthcHRlbkphbnNzb24pIHJlbW92ZSBvbmNlIGltcGxlbWVudGVkIGluIENocm9tZSBzdGFibGUuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykgewogICAgICByZXR1cm4gZ2V0VXNlck1lZGlhUHJvbWlzZV8oY29uc3RyYWludHMpOwogICAgfTsKICB9IGVsc2UgewogICAgLy8gRXZlbiB0aG91Z2ggQ2hyb21lIDQ1IGhhcyBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIGFuZCBhIGdldFVzZXJNZWRpYQogICAgLy8gZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhIFByb21pc2UsIGl0IGRvZXMgbm90IGFjY2VwdCBzcGVjLXN0eWxlCiAgICAvLyBjb25zdHJhaW50cy4KICAgIHZhciBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuCiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY3MpIHsKICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGZ1bmN0aW9uKGMpIHsKICAgICAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fAogICAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkgewogICAgICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJycsICdOb3RGb3VuZEVycm9yJyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc3RyZWFtOwogICAgICAgIH0sIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9OwogIH0KCiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuCiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLgogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQogIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID09PSAndW5kZWZpbmVkJykgewogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7CiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyIGNhbGxlZC4nKTsKICAgIH07CiAgfQp9OwoKfSx7Ii4uL3V0aWxzLmpzIjoxMX1dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7Cgp2YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTsKdmFyIGJyb3dzZXJEZXRhaWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5icm93c2VyRGV0YWlsczsKCnZhciBlZGdlU2hpbSA9IHsKICBzaGltUGVlckNvbm5lY3Rpb246IGZ1bmN0aW9uKCkgewogICAgaWYgKHdpbmRvdy5SVENJY2VHYXRoZXJlcikgewogICAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuCiAgICAgIC8vIE5vdCBpbXBsZW1lbnRlZCBpbiBFZGdlLgogICAgICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUpIHsKICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykgewogICAgICAgICAgcmV0dXJuIGFyZ3M7CiAgICAgICAgfTsKICAgICAgfQogICAgICAvLyBPUlRDIGRvZXMgbm90IGhhdmUgYSBzZXNzaW9uIGRlc2NyaXB0aW9uIG9iamVjdCBidXQKICAgICAgLy8gb3RoZXIgYnJvd3NlcnMgKGkuZS4gQ2hyb21lKSB0aGF0IHdpbGwgc3VwcG9ydCBib3RoIFBDIGFuZCBPUlRDCiAgICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS4KICAgICAgaWYgKCF3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7CiAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKGFyZ3MpIHsKICAgICAgICAgIHJldHVybiBhcmdzOwogICAgICAgIH07CiAgICAgIH0KICAgICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHMKICAgICAgLy8gd2hlbiBhIHRyYWNrcyBlbmFibGVkIHByb3BlcnR5IHdhcyBjaGFuZ2VkLiBXb3JrYXJvdW5kIGZvciBhIGJ1ZyBpbgogICAgICAvLyBhZGRTdHJlYW0sIHNlZSBiZWxvdy4gTm8gbG9uZ2VyIHJlcXVpcmVkIGluIDE1MDI1KwogICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDE1MDI1KSB7CiAgICAgICAgdmFyIG9yaWdNU1RFbmFibGVkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcigKICAgICAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJyk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLCAnZW5hYmxlZCcsIHsKICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgb3JpZ01TVEVuYWJsZWQuc2V0LmNhbGwodGhpcywgdmFsdWUpOwogICAgICAgICAgICB2YXIgZXYgPSBuZXcgRXZlbnQoJ2VuYWJsZWQnKTsKICAgICAgICAgICAgZXYuZW5hYmxlZCA9IHZhbHVlOwogICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXYpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24oY29uZmlnKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgIHZhciBfZXZlbnRUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgIFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJywgJ2Rpc3BhdGNoRXZlbnQnXQogICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICAgIHNlbGZbbWV0aG9kXSA9IF9ldmVudFRhcmdldFttZXRob2RdLmJpbmQoX2V2ZW50VGFyZ2V0KTsKICAgICAgICAgIH0pOwoKICAgICAgdGhpcy5vbmljZWNhbmRpZGF0ZSA9IG51bGw7CiAgICAgIHRoaXMub25hZGRzdHJlYW0gPSBudWxsOwogICAgICB0aGlzLm9udHJhY2sgPSBudWxsOwogICAgICB0aGlzLm9ucmVtb3Zlc3RyZWFtID0gbnVsbDsKICAgICAgdGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIHRoaXMub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIHRoaXMub25uZWdvdGlhdGlvbm5lZWRlZCA9IG51bGw7CiAgICAgIHRoaXMub25kYXRhY2hhbm5lbCA9IG51bGw7CgogICAgICB0aGlzLmxvY2FsU3RyZWFtcyA9IFtdOwogICAgICB0aGlzLnJlbW90ZVN0cmVhbXMgPSBbXTsKICAgICAgdGhpcy5nZXRMb2NhbFN0cmVhbXMgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gc2VsZi5sb2NhbFN0cmVhbXM7CiAgICAgIH07CiAgICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBzZWxmLnJlbW90ZVN0cmVhbXM7CiAgICAgIH07CgogICAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHsKICAgICAgICB0eXBlOiAnJywKICAgICAgICBzZHA6ICcnCiAgICAgIH0pOwogICAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJycsCiAgICAgICAgc2RwOiAnJwogICAgICB9KTsKICAgICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9ICdzdGFibGUnOwogICAgICB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9ICduZXcnOwogICAgICB0aGlzLmljZUdhdGhlcmluZ1N0YXRlID0gJ25ldyc7CgogICAgICB0aGlzLmljZU9wdGlvbnMgPSB7CiAgICAgICAgZ2F0aGVyUG9saWN5OiAnYWxsJywKICAgICAgICBpY2VTZXJ2ZXJzOiBbXQogICAgICB9OwogICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICBzd2l0Y2ggKGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kpIHsKICAgICAgICAgIGNhc2UgJ2FsbCc6CiAgICAgICAgICBjYXNlICdyZWxheSc6CiAgICAgICAgICAgIHRoaXMuaWNlT3B0aW9ucy5nYXRoZXJQb2xpY3kgPSBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ25vbmUnOgogICAgICAgICAgICAvLyBGSVhNRTogcmVtb3ZlIG9uY2UgaW1wbGVtZW50YXRpb24gYW5kIHNwZWMgaGF2ZSBhZGRlZCB0aGlzLgogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpY2VUcmFuc3BvcnRQb2xpY3kgIm5vbmUiIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIC8vIGRvbid0IHNldCBpY2VUcmFuc3BvcnRQb2xpY3kuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnVzaW5nQnVuZGxlID0gY29uZmlnICYmIGNvbmZpZy5idW5kbGVQb2xpY3kgPT09ICdtYXgtYnVuZGxlJzsKCiAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmljZVNlcnZlcnMpIHsKICAgICAgICAvLyBFZGdlIGRvZXMgbm90IGxpa2UKICAgICAgICAvLyAxKSBzdHVuOgogICAgICAgIC8vIDIpIHR1cm46IHRoYXQgZG9lcyBub3QgaGF2ZSBhbGwgb2YgdHVybjpob3N0OnBvcnQ/dHJhbnNwb3J0PXVkcAogICAgICAgIC8vIDMpIHR1cm46IHdpdGggaXB2NiBhZGRyZXNzZXMKICAgICAgICB2YXIgaWNlU2VydmVycyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmljZVNlcnZlcnMpKTsKICAgICAgICB0aGlzLmljZU9wdGlvbnMuaWNlU2VydmVycyA9IGljZVNlcnZlcnMuZmlsdGVyKGZ1bmN0aW9uKHNlcnZlcikgewogICAgICAgICAgaWYgKHNlcnZlciAmJiBzZXJ2ZXIudXJscykgewogICAgICAgICAgICB2YXIgdXJscyA9IHNlcnZlci51cmxzOwogICAgICAgICAgICBpZiAodHlwZW9mIHVybHMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgdXJscyA9IFt1cmxzXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1cmxzID0gdXJscy5maWx0ZXIoZnVuY3Rpb24odXJsKSB7CiAgICAgICAgICAgICAgcmV0dXJuICh1cmwuaW5kZXhPZigndHVybjonKSA9PT0gMCAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHJhbnNwb3J0PXVkcCcpICE9PSAtMSAmJgogICAgICAgICAgICAgICAgICB1cmwuaW5kZXhPZigndHVybjpbJykgPT09IC0xKSB8fAogICAgICAgICAgICAgICAgICAodXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDAgJiYKICAgICAgICAgICAgICAgICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDE0MzkzKTsKICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgIHJldHVybiAhIXVybHM7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnOwoKICAgICAgLy8gcGVyLXRyYWNrIGljZUdhdGhlcnMsIGljZVRyYW5zcG9ydHMsIGR0bHNUcmFuc3BvcnRzLCBydHBTZW5kZXJzLCAuLi4KICAgICAgLy8gZXZlcnl0aGluZyB0aGF0IGlzIG5lZWRlZCB0byBkZXNjcmliZSBhIFNEUCBtLWxpbmUuCiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzID0gW107CgogICAgICAvLyBzaW5jZSB0aGUgaWNlR2F0aGVyZXIgaXMgY3VycmVudGx5IGNyZWF0ZWQgaW4gY3JlYXRlT2ZmZXIgYnV0IHdlCiAgICAgIC8vIG11c3Qgbm90IGVtaXQgY2FuZGlkYXRlcyB1bnRpbCBhZnRlciBzZXRMb2NhbERlc2NyaXB0aW9uIHdlIGJ1ZmZlcgogICAgICAvLyB0aGVtIGluIHRoaXMgYXJyYXkuCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlciA9IFtdOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScpOwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICBpZiAodGhpcy5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlICE9PSBudWxsKSB7CiAgICAgICAgdGhpcy5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKGV2ZW50KTsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLmxvY2FsRGVzY3JpcHRpb24uc2RwKTsKICAgICAgLy8gRklYTUU6IG5lZWQgdG8gYXBwbHkgaWNlIGNhbmRpZGF0ZXMgaW4gYSB3YXkgd2hpY2ggaXMgYXN5bmMgYnV0CiAgICAgIC8vIGluLW9yZGVyCiAgICAgIHRoaXMuX2xvY2FsSWNlQ2FuZGlkYXRlc0J1ZmZlci5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgdmFyIGVuZCA9ICFldmVudC5jYW5kaWRhdGUgfHwgT2JqZWN0LmtleXMoZXZlbnQuY2FuZGlkYXRlKS5sZW5ndGggPT09IDA7CiAgICAgICAgaWYgKGVuZCkgewogICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBzZWN0aW9ucy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAoc2VjdGlvbnNbal0uaW5kZXhPZignXHJcbmE9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJykgPT09IC0xKSB7CiAgICAgICAgICAgICAgc2VjdGlvbnNbal0gKz0gJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcclxuJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCArIDFdICs9CiAgICAgICAgICAgICAgJ2E9JyArIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgKyAnXHJcbic7CiAgICAgICAgfQogICAgICAgIHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICBzZWxmLm9uaWNlY2FuZGlkYXRlKGV2ZW50KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFldmVudC5jYW5kaWRhdGUgJiYgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSAhPT0gJ2NvbXBsZXRlJykgewogICAgICAgICAgdmFyIGNvbXBsZXRlID0gc2VsZi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7CiAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChjb21wbGV0ZSAmJiBzZWxmLmljZUdhdGhlcmluZ1N0YXRlQ2hhbmdlICE9PSAnY29tcGxldGUnKSB7CiAgICAgICAgICAgIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgPSAnY29tcGxldGUnOwogICAgICAgICAgICBzZWxmLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIgPSBbXTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLl9jb25maWc7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDE1MDI1KSB7CiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIENsb25lIGlzIG5lY2Vzc2FyeSBmb3IgbG9jYWwgZGVtb3MgbW9zdGx5LCBhdHRhY2hpbmcgZGlyZWN0bHkKICAgICAgICAvLyB0byB0d28gZGlmZmVyZW50IHNlbmRlcnMgZG9lcyBub3Qgd29yayAoYnVpbGQgMTA1NDcpLgogICAgICAgIC8vIEZpeGVkIGluIDE1MDI1IChvciBlYXJsaWVyKQogICAgICAgIHZhciBjbG9uZWRTdHJlYW0gPSBzdHJlYW0uY2xvbmUoKTsKICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7CiAgICAgICAgICB2YXIgY2xvbmVkVHJhY2sgPSBjbG9uZWRTdHJlYW0uZ2V0VHJhY2tzKClbaWR4XTsKICAgICAgICAgIHRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2VuYWJsZWQnLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjbG9uZWRUcmFjay5lbmFibGVkID0gZXZlbnQuZW5hYmxlZDsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goY2xvbmVkU3RyZWFtKTsKICAgICAgfQogICAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpOwogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkgewogICAgICB2YXIgaWR4ID0gdGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihzdHJlYW0pOwogICAgICBpZiAoaWR4ID4gLTEpIHsKICAgICAgICB0aGlzLmxvY2FsU3RyZWFtcy5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpOwogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwU2VuZGVyOwogICAgICB9KQogICAgICAubWFwKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjsKICAgICAgfSk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICByZXR1cm4gISF0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgfSkKICAgICAgLm1hcChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIHJldHVybiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgfSk7CiAgICB9OwoKICAgIC8vIERldGVybWluZXMgdGhlIGludGVyc2VjdGlvbiBvZiBsb2NhbCBhbmQgcmVtb3RlIGNhcGFiaWxpdGllcy4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2dldENvbW1vbkNhcGFiaWxpdGllcyA9CiAgICAgICAgZnVuY3Rpb24obG9jYWxDYXBhYmlsaXRpZXMsIHJlbW90ZUNhcGFiaWxpdGllcykgewogICAgICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IHsKICAgICAgICAgICAgY29kZWNzOiBbXSwKICAgICAgICAgICAgaGVhZGVyRXh0ZW5zaW9uczogW10sCiAgICAgICAgICAgIGZlY01lY2hhbmlzbXM6IFtdCiAgICAgICAgICB9OwogICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24obENvZGVjKSB7CiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIHZhciByQ29kZWMgPSByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzW2ldOwogICAgICAgICAgICAgIGlmIChsQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSByQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpICYmCiAgICAgICAgICAgICAgICAgIGxDb2RlYy5jbG9ja1JhdGUgPT09IHJDb2RlYy5jbG9ja1JhdGUpIHsKICAgICAgICAgICAgICAgIC8vIG51bWJlciBvZiBjaGFubmVscyBpcyB0aGUgaGlnaGVzdCBjb21tb24gbnVtYmVyIG9mIGNoYW5uZWxzCiAgICAgICAgICAgICAgICByQ29kZWMubnVtQ2hhbm5lbHMgPSBNYXRoLm1pbihsQ29kZWMubnVtQ2hhbm5lbHMsCiAgICAgICAgICAgICAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIC8vIHB1c2ggckNvZGVjIHNvIHdlIHJlcGx5IHdpdGggb2ZmZXJlciBwYXlsb2FkIHR5cGUKICAgICAgICAgICAgICAgIGNvbW1vbkNhcGFiaWxpdGllcy5jb2RlY3MucHVzaChyQ29kZWMpOwoKICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSBjb21tb24gZmVlZGJhY2sgbWVjaGFuaXNtcwogICAgICAgICAgICAgICAgckNvZGVjLnJ0Y3BGZWVkYmFjayA9IHJDb2RlYy5ydGNwRmVlZGJhY2suZmlsdGVyKGZ1bmN0aW9uKGZiKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbENvZGVjLnJ0Y3BGZWVkYmFjay5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGlmIChsQ29kZWMucnRjcEZlZWRiYWNrW2pdLnR5cGUgPT09IGZiLnR5cGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgbENvZGVjLnJ0Y3BGZWVkYmFja1tqXS5wYXJhbWV0ZXIgPT09IGZiLnBhcmFtZXRlcikgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gRklYTUU6IGFsc28gbmVlZCB0byBkZXRlcm1pbmUgLnBhcmFtZXRlcnMKICAgICAgICAgICAgICAgIC8vICBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5wZWVyL29ydGMvaXNzdWVzLzU2OQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zCiAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obEhlYWRlckV4dGVuc2lvbikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgIGkrKykgewogICAgICAgICAgICAgICAgICB2YXIgckhlYWRlckV4dGVuc2lvbiA9IHJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zW2ldOwogICAgICAgICAgICAgICAgICBpZiAobEhlYWRlckV4dGVuc2lvbi51cmkgPT09IHJIZWFkZXJFeHRlbnNpb24udXJpKSB7CiAgICAgICAgICAgICAgICAgICAgY29tbW9uQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMucHVzaChySGVhZGVyRXh0ZW5zaW9uKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIEZJWE1FOiBmZWNNZWNoYW5pc21zCiAgICAgICAgICByZXR1cm4gY29tbW9uQ2FwYWJpbGl0aWVzOwogICAgICAgIH07CgogICAgLy8gQ3JlYXRlIElDRSBnYXRoZXJlciwgSUNFIHRyYW5zcG9ydCBhbmQgRFRMUyB0cmFuc3BvcnQuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyA9CiAgICAgICAgZnVuY3Rpb24obWlkLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICB2YXIgaWNlR2F0aGVyZXIgPSBuZXcgUlRDSWNlR2F0aGVyZXIoc2VsZi5pY2VPcHRpb25zKTsKICAgICAgICAgIHZhciBpY2VUcmFuc3BvcnQgPSBuZXcgUlRDSWNlVHJhbnNwb3J0KGljZUdhdGhlcmVyKTsKICAgICAgICAgIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGUgPSBmdW5jdGlvbihldnQpIHsKICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKTsKICAgICAgICAgICAgZXZlbnQuY2FuZGlkYXRlID0ge3NkcE1pZDogbWlkLCBzZHBNTGluZUluZGV4OiBzZHBNTGluZUluZGV4fTsKCiAgICAgICAgICAgIHZhciBjYW5kID0gZXZ0LmNhbmRpZGF0ZTsKICAgICAgICAgICAgdmFyIGVuZCA9ICFjYW5kIHx8IE9iamVjdC5rZXlzKGNhbmQpLmxlbmd0aCA9PT0gMDsKICAgICAgICAgICAgLy8gRWRnZSBlbWl0cyBhbiBlbXB0eSBvYmplY3QgZm9yIFJUQ0ljZUNhbmRpZGF0ZUNvbXBsZXRl4oClCiAgICAgICAgICAgIGlmIChlbmQpIHsKICAgICAgICAgICAgICAvLyBwb2x5ZmlsbCBzaW5jZSBSVENJY2VHYXRoZXJlci5zdGF0ZSBpcyBub3QgaW1wbGVtZW50ZWQgaW4KICAgICAgICAgICAgICAvLyBFZGdlIDEwNTQ3IHlldC4KICAgICAgICAgICAgICBpZiAoaWNlR2F0aGVyZXIuc3RhdGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgaWNlR2F0aGVyZXIuc3RhdGUgPSAnY29tcGxldGVkJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gUlRDSWNlQ2FuZGlkYXRlIGRvZXNuJ3QgaGF2ZSBhIGNvbXBvbmVudCwgbmVlZHMgdG8gYmUgYWRkZWQKICAgICAgICAgICAgICBjYW5kLmNvbXBvbmVudCA9IGljZVRyYW5zcG9ydC5jb21wb25lbnQgPT09ICdSVENQJyA/IDIgOiAxOwogICAgICAgICAgICAgIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgPSBTRFBVdGlscy53cml0ZUNhbmRpZGF0ZShjYW5kKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gdXBkYXRlIGxvY2FsIGRlc2NyaXB0aW9uLgogICAgICAgICAgICB2YXIgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHApOwogICAgICAgICAgICBpZiAoIWVuZCkgewogICAgICAgICAgICAgIHNlY3Rpb25zW2V2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4ICsgMV0gKz0KICAgICAgICAgICAgICAgICAgJ2E9JyArIGV2ZW50LmNhbmRpZGF0ZS5jYW5kaWRhdGUgKyAnXHJcbic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgc2VjdGlvbnNbZXZlbnQuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXggKyAxXSArPQogICAgICAgICAgICAgICAgICAnYT1lbmQtb2YtY2FuZGlkYXRlc1xyXG4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNlbGYubG9jYWxEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICAgICAgdmFyIHRyYW5zY2VpdmVycyA9IHNlbGYuX3BlbmRpbmdPZmZlciA/IHNlbGYuX3BlbmRpbmdPZmZlciA6CiAgICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyczsKICAgICAgICAgICAgdmFyIGNvbXBsZXRlID0gdHJhbnNjZWl2ZXJzLmV2ZXJ5KGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmCiAgICAgICAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLnN0YXRlID09PSAnY29tcGxldGVkJzsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBFbWl0IGNhbmRpZGF0ZSBpZiBsb2NhbERlc2NyaXB0aW9uIGlzIHNldC4KICAgICAgICAgICAgLy8gQWxzbyBlbWl0cyBudWxsIGNhbmRpZGF0ZSB3aGVuIGFsbCBnYXRoZXJlcnMgYXJlIGNvbXBsZXRlLgogICAgICAgICAgICBzd2l0Y2ggKHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUpIHsKICAgICAgICAgICAgICBjYXNlICduZXcnOgogICAgICAgICAgICAgICAgaWYgKCFlbmQpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5fbG9jYWxJY2VDYW5kaWRhdGVzQnVmZmVyLnB1c2goZXZlbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGVuZCAmJiBjb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICBzZWxmLl9sb2NhbEljZUNhbmRpZGF0ZXNCdWZmZXIucHVzaCgKICAgICAgICAgICAgICAgICAgICAgIG5ldyBFdmVudCgnaWNlY2FuZGlkYXRlJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAnZ2F0aGVyaW5nJzoKICAgICAgICAgICAgICAgIHNlbGYuX2VtaXRCdWZmZXJlZENhbmRpZGF0ZXMoKTsKICAgICAgICAgICAgICAgIGlmICghZW5kKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbmljZWNhbmRpZGF0ZShldmVudCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb21wbGV0ZSkgewogICAgICAgICAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpY2VjYW5kaWRhdGUnKSk7CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm9uaWNlY2FuZGlkYXRlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi5vbmljZWNhbmRpZGF0ZShuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBzZWxmLmljZUdhdGhlcmluZ1N0YXRlID0gJ2NvbXBsZXRlJzsKICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICdjb21wbGV0ZSc6CiAgICAgICAgICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbi4uLiBjdXJyZW50bHkhCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBkZWZhdWx0OiAvLyBuby1vcC4KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgaWNlVHJhbnNwb3J0Lm9uaWNlc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gbmV3IFJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTsKICAgICAgICAgIGR0bHNUcmFuc3BvcnQub25kdGxzc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwogICAgICAgICAgZHRsc1RyYW5zcG9ydC5vbmVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIC8vIG9uZXJyb3IgZG9lcyBub3Qgc2V0IHN0YXRlIHRvIGZhaWxlZCBieSBpdHNlbGYuCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQuc3RhdGUgPSAnZmFpbGVkJzsKICAgICAgICAgICAgc2VsZi5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGljZUdhdGhlcmVyOiBpY2VHYXRoZXJlciwKICAgICAgICAgICAgaWNlVHJhbnNwb3J0OiBpY2VUcmFuc3BvcnQsCiAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IGR0bHNUcmFuc3BvcnQKICAgICAgICAgIH07CiAgICAgICAgfTsKCiAgICAvLyBTdGFydCB0aGUgUlRQIFNlbmRlciBhbmQgUmVjZWl2ZXIgZm9yIGEgdHJhbnNjZWl2ZXIuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl90cmFuc2NlaXZlID0gZnVuY3Rpb24odHJhbnNjZWl2ZXIsCiAgICAgICAgc2VuZCwgcmVjdikgewogICAgICB2YXIgcGFyYW1zID0gdGhpcy5fZ2V0Q29tbW9uQ2FwYWJpbGl0aWVzKHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzLAogICAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTsKICAgICAgaWYgKHNlbmQgJiYgdHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgcGFyYW1zLnJ0Y3AgPSB7CiAgICAgICAgICBjbmFtZTogU0RQVXRpbHMubG9jYWxDTmFtZQogICAgICAgIH07CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7CiAgICAgICAgICBwYXJhbXMucnRjcC5zc3JjID0gdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjOwogICAgICAgIH0KICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc2VuZChwYXJhbXMpOwogICAgICB9CiAgICAgIGlmIChyZWN2ICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7CiAgICAgICAgLy8gcmVtb3ZlIFJUWCBmaWVsZCBpbiBFZGdlIDE0OTQyCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmtpbmQgPT09ICd2aWRlbycKICAgICAgICAgICAgJiYgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycykgewogICAgICAgICAgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKGZ1bmN0aW9uKHApIHsKICAgICAgICAgICAgZGVsZXRlIHAucnR4OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOwogICAgICAgIHBhcmFtcy5ydGNwID0gewogICAgICAgICAgY25hbWU6IHRyYW5zY2VpdmVyLmNuYW1lCiAgICAgICAgfTsKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgpIHsKICAgICAgICAgIHBhcmFtcy5ydGNwLnNzcmMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmM7CiAgICAgICAgfQogICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnJlY2VpdmUocGFyYW1zKTsKICAgICAgfQogICAgfTsKCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPQogICAgICAgIGZ1bmN0aW9uKGRlc2NyaXB0aW9uKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICB2YXIgc2VjdGlvbnM7CiAgICAgICAgICB2YXIgc2Vzc2lvbnBhcnQ7CiAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykgewogICAgICAgICAgICAvLyBGSVhNRTogV2hhdCB3YXMgdGhlIHB1cnBvc2Ugb2YgdGhpcyBlbXB0eSBpZiBzdGF0ZW1lbnQ/CiAgICAgICAgICAgIC8vIGlmICghdGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9wZW5kaW5nT2ZmZXIpIHsKICAgICAgICAgICAgICAvLyBWRVJZIGxpbWl0ZWQgc3VwcG9ydCBmb3IgU0RQIG11bmdpbmcuIExpbWl0ZWQgdG86CiAgICAgICAgICAgICAgLy8gKiBjaGFuZ2luZyB0aGUgb3JkZXIgb2YgY29kZWNzCiAgICAgICAgICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpOwogICAgICAgICAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgICAgICAgICB2YXIgY2FwcyA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICAgICAgc2VsZi5fcGVuZGluZ09mZmVyW3NkcE1MaW5lSW5kZXhdLmxvY2FsQ2FwYWJpbGl0aWVzID0gY2FwczsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aGlzLnRyYW5zY2VpdmVycyA9IHRoaXMuX3BlbmRpbmdPZmZlcjsKICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fcGVuZGluZ09mZmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyhzZWxmLnJlbW90ZURlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTsKICAgICAgICAgICAgdmFyIGlzSWNlTGl0ZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LAogICAgICAgICAgICAgICAgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwOwogICAgICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdOwogICAgICAgICAgICAgIHZhciBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgICAgIHZhciBpY2VUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQ7CiAgICAgICAgICAgICAgdmFyIGR0bHNUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0OwogICAgICAgICAgICAgIHZhciBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwogICAgICAgICAgICAgIHZhciByZW1vdGVDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXM7CgogICAgICAgICAgICAgIHZhciByZWplY3RlZCA9IG1lZGlhU2VjdGlvbi5zcGxpdCgnXG4nLCAxKVswXQogICAgICAgICAgICAgICAgICAuc3BsaXQoJyAnLCAyKVsxXSA9PT0gJzAnOwoKICAgICAgICAgICAgICBpZiAoIXJlamVjdGVkICYmICF0cmFuc2NlaXZlci5pc0RhdGFjaGFubmVsKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMoCiAgICAgICAgICAgICAgICAgICAgbWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7CiAgICAgICAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycygKICAgICAgICAgICAgICAgICAgICBtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICAgIGlmIChpc0ljZUxpdGUpIHsKICAgICAgICAgICAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMucm9sZSA9ICdzZXJ2ZXInOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghc2VsZi51c2luZ0J1bmRsZSB8fCBzZHBNTGluZUluZGV4ID09PSAwKSB7CiAgICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zdGFydChpY2VHYXRoZXJlciwgcmVtb3RlSWNlUGFyYW1ldGVycywKICAgICAgICAgICAgICAgICAgICAgIGlzSWNlTGl0ZSA/ICdjb250cm9sbGluZycgOiAnY29udHJvbGxlZCcpOwogICAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIG9mIGNhcGFiaWxpdGllcy4KICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBzZWxmLl9nZXRDb21tb25DYXBhYmlsaXRpZXMobG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKTsKCiAgICAgICAgICAgICAgICAvLyBTdGFydCB0aGUgUlRDUnRwU2VuZGVyLiBUaGUgUlRDUnRwUmVjZWl2ZXIgZm9yIHRoaXMKICAgICAgICAgICAgICAgIC8vIHRyYW5zY2VpdmVyIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBpbiBzZXRSZW1vdGVEZXNjcmlwdGlvbi4KICAgICAgICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmNvZGVjcy5sZW5ndGggPiAwLAogICAgICAgICAgICAgICAgICAgIGZhbHNlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMubG9jYWxEZXNjcmlwdGlvbiA9IHsKICAgICAgICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSwKICAgICAgICAgICAgc2RwOiBkZXNjcmlwdGlvbi5zZHAKICAgICAgICAgIH07CiAgICAgICAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnb2ZmZXInOgogICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdoYXZlLWxvY2FsLW9mZmVyJyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2Fuc3dlcic6CiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ3N0YWJsZScpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGUgIicgKyBkZXNjcmlwdGlvbi50eXBlICsKICAgICAgICAgICAgICAgICAgJyInKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBJZiBhIHN1Y2Nlc3MgY2FsbGJhY2sgd2FzIHByb3ZpZGVkLCBlbWl0IElDRSBjYW5kaWRhdGVzIGFmdGVyIGl0CiAgICAgICAgICAvLyBoYXMgYmVlbiBleGVjdXRlZC4gT3RoZXJ3aXNlLCBlbWl0IGNhbGxiYWNrIGFmdGVyIHRoZSBQcm9taXNlIGlzCiAgICAgICAgICAvLyByZXNvbHZlZC4KICAgICAgICAgIHZhciBoYXNDYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmCiAgICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbic7CiAgICAgICAgICBpZiAoaGFzQ2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIGNiID0gYXJndW1lbnRzWzFdOwogICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBjYigpOwogICAgICAgICAgICAgIGlmIChzZWxmLmljZUdhdGhlcmluZ1N0YXRlID09PSAnbmV3JykgewogICAgICAgICAgICAgICAgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdnYXRoZXJpbmcnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZWxmLl9lbWl0QnVmZmVyZWRDYW5kaWRhdGVzKCk7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfQogICAgICAgICAgdmFyIHAgPSBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICAgIHAudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKCFoYXNDYWxsYmFjaykgewogICAgICAgICAgICAgIGlmIChzZWxmLmljZUdhdGhlcmluZ1N0YXRlID09PSAnbmV3JykgewogICAgICAgICAgICAgICAgc2VsZi5pY2VHYXRoZXJpbmdTdGF0ZSA9ICdnYXRoZXJpbmcnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBVc3VhbGx5IGNhbmRpZGF0ZXMgd2lsbCBiZSBlbWl0dGVkIGVhcmxpZXIuCiAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoc2VsZi5fZW1pdEJ1ZmZlcmVkQ2FuZGlkYXRlcy5iaW5kKHNlbGYpLCA1MDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBwOwogICAgICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9CiAgICAgICAgZnVuY3Rpb24oZGVzY3JpcHRpb24pIHsKICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgIHZhciBzdHJlYW0gPSBuZXcgTWVkaWFTdHJlYW0oKTsKICAgICAgICAgIHZhciByZWNlaXZlckxpc3QgPSBbXTsKICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTsKICAgICAgICAgIHZhciBzZXNzaW9ucGFydCA9IHNlY3Rpb25zLnNoaWZ0KCk7CiAgICAgICAgICB2YXIgaXNJY2VMaXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoc2Vzc2lvbnBhcnQsCiAgICAgICAgICAgICAgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwOwogICAgICAgICAgdGhpcy51c2luZ0J1bmRsZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LAogICAgICAgICAgICAgICdhPWdyb3VwOkJVTkRMRSAnKS5sZW5ndGggPiAwOwogICAgICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNkcE1MaW5lSW5kZXgpIHsKICAgICAgICAgICAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pOwogICAgICAgICAgICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zdWJzdHIoMikuc3BsaXQoJyAnKTsKICAgICAgICAgICAgdmFyIGtpbmQgPSBtbGluZVswXTsKICAgICAgICAgICAgdmFyIHJlamVjdGVkID0gbWxpbmVbMV0gPT09ICcwJzsKICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IFNEUFV0aWxzLmdldERpcmVjdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTsKCiAgICAgICAgICAgIHZhciBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKTsKICAgICAgICAgICAgaWYgKG1pZC5sZW5ndGgpIHsKICAgICAgICAgICAgICBtaWQgPSBtaWRbMF0uc3Vic3RyKDYpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1pZCA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBSZWplY3QgZGF0YWNoYW5uZWxzIHdoaWNoIGFyZSBub3QgaW1wbGVtZW50ZWQgeWV0LgogICAgICAgICAgICBpZiAoa2luZCA9PT0gJ2FwcGxpY2F0aW9uJyAmJiBtbGluZVsyXSA9PT0gJ0RUTFMvU0NUUCcpIHsKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSA9IHsKICAgICAgICAgICAgICAgIG1pZDogbWlkLAogICAgICAgICAgICAgICAgaXNEYXRhY2hhbm5lbDogdHJ1ZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgdHJhbnNjZWl2ZXI7CiAgICAgICAgICAgIHZhciBpY2VHYXRoZXJlcjsKICAgICAgICAgICAgdmFyIGljZVRyYW5zcG9ydDsKICAgICAgICAgICAgdmFyIGR0bHNUcmFuc3BvcnQ7CiAgICAgICAgICAgIHZhciBydHBTZW5kZXI7CiAgICAgICAgICAgIHZhciBydHBSZWNlaXZlcjsKICAgICAgICAgICAgdmFyIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7CiAgICAgICAgICAgIHZhciByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOwogICAgICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXM7CgogICAgICAgICAgICB2YXIgdHJhY2s7CiAgICAgICAgICAgIC8vIEZJWE1FOiBlbnN1cmUgdGhlIG1lZGlhU2VjdGlvbiBoYXMgcnRjcC1tdXggc2V0LgogICAgICAgICAgICB2YXIgcmVtb3RlQ2FwYWJpbGl0aWVzID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7CiAgICAgICAgICAgIHZhciByZW1vdGVJY2VQYXJhbWV0ZXJzOwogICAgICAgICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnM7CiAgICAgICAgICAgIGlmICghcmVqZWN0ZWQpIHsKICAgICAgICAgICAgICByZW1vdGVJY2VQYXJhbWV0ZXJzID0gU0RQVXRpbHMuZ2V0SWNlUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sCiAgICAgICAgICAgICAgICAgIHNlc3Npb25wYXJ0KTsKICAgICAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbiwKICAgICAgICAgICAgICAgICAgc2Vzc2lvbnBhcnQpOwogICAgICAgICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnY2xpZW50JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID0KICAgICAgICAgICAgICAgIFNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7CgogICAgICAgICAgICB2YXIgY25hbWU7CiAgICAgICAgICAgIC8vIEdldHMgdGhlIGZpcnN0IFNTUkMuIE5vdGUgdGhhdCB3aXRoIFJUWCB0aGVyZSBtaWdodCBiZSBtdWx0aXBsZQogICAgICAgICAgICAvLyBTU1JDcy4KICAgICAgICAgICAgdmFyIHJlbW90ZVNzcmMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JykKICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24obGluZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihvYmopIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5hdHRyaWJ1dGUgPT09ICdjbmFtZSc7CiAgICAgICAgICAgICAgICB9KVswXTsKICAgICAgICAgICAgaWYgKHJlbW90ZVNzcmMpIHsKICAgICAgICAgICAgICBjbmFtZSA9IHJlbW90ZVNzcmMudmFsdWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBpc0NvbXBsZXRlID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLAogICAgICAgICAgICAgICAgJ2E9ZW5kLW9mLWNhbmRpZGF0ZXMnLCBzZXNzaW9ucGFydCkubGVuZ3RoID4gMDsKICAgICAgICAgICAgdmFyIGNhbmRzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1jYW5kaWRhdGU6JykKICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oY2FuZCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihjYW5kKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBjYW5kLmNvbXBvbmVudCA9PT0gJzEnOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnb2ZmZXInICYmICFyZWplY3RlZCkgewogICAgICAgICAgICAgIHZhciB0cmFuc3BvcnRzID0gc2VsZi51c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCA/IHsKICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyOiBzZWxmLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlciwKICAgICAgICAgICAgICAgIGljZVRyYW5zcG9ydDogc2VsZi50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LAogICAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydDogc2VsZi50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydAogICAgICAgICAgICAgIH0gOiBzZWxmLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyhtaWQsIHNkcE1MaW5lSW5kZXgpOwoKICAgICAgICAgICAgICBpZiAoaXNDb21wbGV0ZSAmJiAoIXNlbGYudXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0LnNldFJlbW90ZUNhbmRpZGF0ZXMoY2FuZHMpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXMoa2luZCk7CgogICAgICAgICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZAogICAgICAgICAgICAgIC8vIGluIGFkYXB0ZXIuanMKICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MgPSBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZmlsdGVyKAogICAgICAgICAgICAgICAgICBmdW5jdGlvbihjb2RlYykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2RlYy5uYW1lICE9PSAncnR4JzsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSBbewogICAgICAgICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMikgKiAxMDAxCiAgICAgICAgICAgICAgfV07CgogICAgICAgICAgICAgIHJ0cFJlY2VpdmVyID0gbmV3IFJUQ1J0cFJlY2VpdmVyKHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwga2luZCk7CgogICAgICAgICAgICAgIHRyYWNrID0gcnRwUmVjZWl2ZXIudHJhY2s7CiAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlcl0pOwogICAgICAgICAgICAgIC8vIEZJWE1FOiBub3QgY29ycmVjdCB3aGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBzdHJlYW1zIGJ1dCB0aGF0IGlzCiAgICAgICAgICAgICAgLy8gbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gdGhpcyBzaGltLgogICAgICAgICAgICAgIHN0cmVhbS5hZGRUcmFjayh0cmFjayk7CgogICAgICAgICAgICAgIC8vIEZJWE1FOiBsb29rIGF0IGRpcmVjdGlvbi4KICAgICAgICAgICAgICBpZiAoc2VsZi5sb2NhbFN0cmVhbXMubGVuZ3RoID4gMCAmJgogICAgICAgICAgICAgICAgICBzZWxmLmxvY2FsU3RyZWFtc1swXS5nZXRUcmFja3MoKS5sZW5ndGggPj0gc2RwTUxpbmVJbmRleCkgewogICAgICAgICAgICAgICAgdmFyIGxvY2FsVHJhY2s7CiAgICAgICAgICAgICAgICBpZiAoa2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICAgICAgICBsb2NhbFRyYWNrID0gc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0QXVkaW9UcmFja3MoKVswXTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2luZCA9PT0gJ3ZpZGVvJykgewogICAgICAgICAgICAgICAgICBsb2NhbFRyYWNrID0gc2VsZi5sb2NhbFN0cmVhbXNbMF0uZ2V0VmlkZW9UcmFja3MoKVswXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsb2NhbFRyYWNrKSB7CiAgICAgICAgICAgICAgICAgIHJ0cFNlbmRlciA9IG5ldyBSVENSdHBTZW5kZXIobG9jYWxUcmFjaywKICAgICAgICAgICAgICAgICAgICAgIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSA9IHsKICAgICAgICAgICAgICAgIGljZUdhdGhlcmVyOiB0cmFuc3BvcnRzLmljZUdhdGhlcmVyLAogICAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmljZVRyYW5zcG9ydCwKICAgICAgICAgICAgICAgIGR0bHNUcmFuc3BvcnQ6IHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwKICAgICAgICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzOiBsb2NhbENhcGFiaWxpdGllcywKICAgICAgICAgICAgICAgIHJlbW90ZUNhcGFiaWxpdGllczogcmVtb3RlQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAgICAgcnRwU2VuZGVyOiBydHBTZW5kZXIsCiAgICAgICAgICAgICAgICBydHBSZWNlaXZlcjogcnRwUmVjZWl2ZXIsCiAgICAgICAgICAgICAgICBraW5kOiBraW5kLAogICAgICAgICAgICAgICAgbWlkOiBtaWQsCiAgICAgICAgICAgICAgICBjbmFtZTogY25hbWUsCiAgICAgICAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOiBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLAogICAgICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczogcmVjdkVuY29kaW5nUGFyYW1ldGVycwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFJlY2VpdmVyIG5vdy4gVGhlIFJUUFNlbmRlciBpcyBzdGFydGVkIGluCiAgICAgICAgICAgICAgLy8gc2V0TG9jYWxEZXNjcmlwdGlvbi4KICAgICAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLAogICAgICAgICAgICAgICAgICBmYWxzZSwKICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5Jyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ2Fuc3dlcicgJiYgIXJlamVjdGVkKSB7CiAgICAgICAgICAgICAgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTsKICAgICAgICAgICAgICBpY2VHYXRoZXJlciA9IHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyOwogICAgICAgICAgICAgIGljZVRyYW5zcG9ydCA9IHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydDsKICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDsKICAgICAgICAgICAgICBydHBTZW5kZXIgPSB0cmFuc2NlaXZlci5ydHBTZW5kZXI7CiAgICAgICAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcyA9IHRyYW5zY2VpdmVyLmxvY2FsQ2FwYWJpbGl0aWVzOwoKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzID0KICAgICAgICAgICAgICAgICAgcmVjdkVuY29kaW5nUGFyYW1ldGVyczsKICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPQogICAgICAgICAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM7CiAgICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uY25hbWUgPSBjbmFtZTsKCiAgICAgICAgICAgICAgaWYgKChpc0ljZUxpdGUgfHwgaXNDb21wbGV0ZSkgJiYgY2FuZHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhjYW5kcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghc2VsZi51c2luZ0J1bmRsZSB8fCBzZHBNTGluZUluZGV4ID09PSAwKSB7CiAgICAgICAgICAgICAgICBpY2VUcmFuc3BvcnQuc3RhcnQoaWNlR2F0aGVyZXIsIHJlbW90ZUljZVBhcmFtZXRlcnMsCiAgICAgICAgICAgICAgICAgICAgJ2NvbnRyb2xsaW5nJyk7CiAgICAgICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNlbGYuX3RyYW5zY2VpdmUodHJhbnNjZWl2ZXIsCiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdyZWN2b25seScsCiAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpOwoKICAgICAgICAgICAgICBpZiAocnRwUmVjZWl2ZXIgJiYKICAgICAgICAgICAgICAgICAgKGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpKSB7CiAgICAgICAgICAgICAgICB0cmFjayA9IHJ0cFJlY2VpdmVyLnRyYWNrOwogICAgICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlcl0pOwogICAgICAgICAgICAgICAgc3RyZWFtLmFkZFRyYWNrKHRyYWNrKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gRklYTUU6IGFjdHVhbGx5IHRoZSByZWNlaXZlciBzaG91bGQgYmUgY3JlYXRlZCBsYXRlci4KICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIHRoaXMucmVtb3RlRGVzY3JpcHRpb24gPSB7CiAgICAgICAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsCiAgICAgICAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwCiAgICAgICAgICB9OwogICAgICAgICAgc3dpdGNoIChkZXNjcmlwdGlvbi50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ29mZmVyJzoKICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnaGF2ZS1yZW1vdGUtb2ZmZXInKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnYW5zd2VyJzoKICAgICAgICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgdHlwZSAiJyArIGRlc2NyaXB0aW9uLnR5cGUgKwogICAgICAgICAgICAgICAgICAnIicpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGgpIHsKICAgICAgICAgICAgc2VsZi5yZW1vdGVTdHJlYW1zLnB1c2goc3RyZWFtKTsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTsKICAgICAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07CiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgICBpZiAoc2VsZi5vbmFkZHN0cmVhbSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYub25hZGRzdHJlYW0oZXZlbnQpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZWNlaXZlckxpc3QuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAgICAgICB2YXIgdHJhY2sgPSBpdGVtWzBdOwogICAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyID0gaXRlbVsxXTsKICAgICAgICAgICAgICAgIHZhciB0cmFja0V2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpOwogICAgICAgICAgICAgICAgdHJhY2tFdmVudC50cmFjayA9IHRyYWNrOwogICAgICAgICAgICAgICAgdHJhY2tFdmVudC5yZWNlaXZlciA9IHJlY2VpdmVyOwogICAgICAgICAgICAgICAgdHJhY2tFdmVudC5zdHJlYW1zID0gW3N0cmVhbV07CiAgICAgICAgICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQodHJhY2tFdmVudCk7CiAgICAgICAgICAgICAgICBpZiAoc2VsZi5vbnRyYWNrICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHNlbGYub250cmFjayh0cmFja0V2ZW50KTsKICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoYXJndW1lbnRzWzFdLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHsKICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIC8qIG5vdCB5ZXQKICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmNsb3NlKCk7CiAgICAgICAgfQogICAgICAgICovCiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCkgewogICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0b3AoKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7CiAgICAgICAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIuc3RvcCgpOwogICAgICAgIH0KICAgICAgICBpZiAodHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXIpIHsKICAgICAgICAgIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyBGSVhNRTogY2xlYW4gdXAgdHJhY2tzLCBsb2NhbCBzdHJlYW1zLCByZW1vdGUgc3RyZWFtcywgZXRjCiAgICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdjbG9zZWQnKTsKICAgIH07CgogICAgLy8gVXBkYXRlIHRoZSBzaWduYWxpbmcgc3RhdGUuCiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVTaWduYWxpbmdTdGF0ZSA9CiAgICAgICAgZnVuY3Rpb24obmV3U3RhdGUpIHsKICAgICAgICAgIHRoaXMuc2lnbmFsaW5nU3RhdGUgPSBuZXdTdGF0ZTsKICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnKTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgICAgICBpZiAodGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlICE9PSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMub25zaWduYWxpbmdzdGF0ZWNoYW5nZShldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAvLyBEZXRlcm1pbmUgd2hldGhlciB0byBmaXJlIHRoZSBuZWdvdGlhdGlvbm5lZWRlZCBldmVudC4KICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkID0KICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgIC8vIEZpcmUgYXdheSAoZm9yIG5vdykuCiAgICAgICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJyk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpOwogICAgICAgICAgaWYgKHRoaXMub25uZWdvdGlhdGlvbm5lZWRlZCAhPT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLm9ubmVnb3RpYXRpb25uZWVkZWQoZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9uIHN0YXRlLgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIG5ld1N0YXRlOwogICAgICB2YXIgc3RhdGVzID0gewogICAgICAgICduZXcnOiAwLAogICAgICAgIGNsb3NlZDogMCwKICAgICAgICBjb25uZWN0aW5nOiAwLAogICAgICAgIGNoZWNraW5nOiAwLAogICAgICAgIGNvbm5lY3RlZDogMCwKICAgICAgICBjb21wbGV0ZWQ6IDAsCiAgICAgICAgZmFpbGVkOiAwCiAgICAgIH07CiAgICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHsKICAgICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LnN0YXRlXSsrOwogICAgICAgIHN0YXRlc1t0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0YXRlXSsrOwogICAgICB9KTsKICAgICAgLy8gSUNFVHJhbnNwb3J0LmNvbXBsZXRlZCBhbmQgY29ubmVjdGVkIGFyZSB0aGUgc2FtZSBmb3IgdGhpcyBwdXJwb3NlLgogICAgICBzdGF0ZXMuY29ubmVjdGVkICs9IHN0YXRlcy5jb21wbGV0ZWQ7CgogICAgICBuZXdTdGF0ZSA9ICduZXcnOwogICAgICBpZiAoc3RhdGVzLmZhaWxlZCA+IDApIHsKICAgICAgICBuZXdTdGF0ZSA9ICdmYWlsZWQnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5jb25uZWN0aW5nID4gMCB8fCBzdGF0ZXMuY2hlY2tpbmcgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGluZyc7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGVzLmRpc2Nvbm5lY3RlZCA+IDApIHsKICAgICAgICBuZXdTdGF0ZSA9ICdkaXNjb25uZWN0ZWQnOwogICAgICB9IGVsc2UgaWYgKHN0YXRlcy5uZXcgPiAwKSB7CiAgICAgICAgbmV3U3RhdGUgPSAnbmV3JzsKICAgICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGVkID4gMCB8fCBzdGF0ZXMuY29tcGxldGVkID4gMCkgewogICAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RlZCc7CiAgICAgIH0KCiAgICAgIGlmIChuZXdTdGF0ZSAhPT0gc2VsZi5pY2VDb25uZWN0aW9uU3RhdGUpIHsKICAgICAgICBzZWxmLmljZUNvbm5lY3Rpb25TdGF0ZSA9IG5ld1N0YXRlOwogICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyk7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICBpZiAodGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSAhPT0gbnVsbCkgewogICAgICAgICAgdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZShldmVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXIgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBpZiAodGhpcy5fcGVuZGluZ09mZmVyKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjcmVhdGVPZmZlciBjYWxsZWQgd2hpbGUgdGhlcmUgaXMgYSBwZW5kaW5nIG9mZmVyLicpOwogICAgICB9CiAgICAgIHZhciBvZmZlck9wdGlvbnM7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICBvZmZlck9wdGlvbnMgPSBhcmd1bWVudHNbMF07CiAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMykgewogICAgICAgIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1syXTsKICAgICAgfQoKICAgICAgdmFyIHRyYWNrcyA9IFtdOwogICAgICB2YXIgbnVtQXVkaW9UcmFja3MgPSAwOwogICAgICB2YXIgbnVtVmlkZW9UcmFja3MgPSAwOwogICAgICAvLyBEZWZhdWx0IHRvIHNlbmRyZWN2LgogICAgICBpZiAodGhpcy5sb2NhbFN0cmVhbXMubGVuZ3RoKSB7CiAgICAgICAgbnVtQXVkaW9UcmFja3MgPSB0aGlzLmxvY2FsU3RyZWFtc1swXS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aDsKICAgICAgICBudW1WaWRlb1RyYWNrcyA9IHRoaXMubG9jYWxTdHJlYW1zWzBdLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoOwogICAgICB9CiAgICAgIC8vIERldGVybWluZSBudW1iZXIgb2YgYXVkaW8gYW5kIHZpZGVvIHRyYWNrcyB3ZSBuZWVkIHRvIHNlbmQvcmVjdi4KICAgICAgaWYgKG9mZmVyT3B0aW9ucykgewogICAgICAgIC8vIFJlamVjdCBDaHJvbWUgbGVnYWN5IGNvbnN0cmFpbnRzLgogICAgICAgIGlmIChvZmZlck9wdGlvbnMubWFuZGF0b3J5IHx8IG9mZmVyT3B0aW9ucy5vcHRpb25hbCkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICAgICAnTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLicpOwogICAgICAgIH0KICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgbnVtQXVkaW9UcmFja3MgPSBvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbzsKICAgICAgICB9CiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIG51bVZpZGVvVHJhY2tzID0gb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmxvY2FsU3RyZWFtcy5sZW5ndGgpIHsKICAgICAgICAvLyBQdXNoIGxvY2FsIHN0cmVhbXMuCiAgICAgICAgdGhpcy5sb2NhbFN0cmVhbXNbMF0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgdHJhY2tzLnB1c2goewogICAgICAgICAgICBraW5kOiB0cmFjay5raW5kLAogICAgICAgICAgICB0cmFjazogdHJhY2ssCiAgICAgICAgICAgIHdhbnRSZWNlaXZlOiB0cmFjay5raW5kID09PSAnYXVkaW8nID8KICAgICAgICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID4gMCA6IG51bVZpZGVvVHJhY2tzID4gMAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgICBudW1BdWRpb1RyYWNrcy0tOwogICAgICAgICAgfSBlbHNlIGlmICh0cmFjay5raW5kID09PSAndmlkZW8nKSB7CiAgICAgICAgICAgIG51bVZpZGVvVHJhY2tzLS07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gQ3JlYXRlIE0tbGluZXMgZm9yIHJlY3Zvbmx5IHN0cmVhbXMuCiAgICAgIHdoaWxlIChudW1BdWRpb1RyYWNrcyA+IDAgfHwgbnVtVmlkZW9UcmFja3MgPiAwKSB7CiAgICAgICAgaWYgKG51bUF1ZGlvVHJhY2tzID4gMCkgewogICAgICAgICAgdHJhY2tzLnB1c2goewogICAgICAgICAgICBraW5kOiAnYXVkaW8nLAogICAgICAgICAgICB3YW50UmVjZWl2ZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBudW1BdWRpb1RyYWNrcy0tOwogICAgICAgIH0KICAgICAgICBpZiAobnVtVmlkZW9UcmFja3MgPiAwKSB7CiAgICAgICAgICB0cmFja3MucHVzaCh7CiAgICAgICAgICAgIGtpbmQ6ICd2aWRlbycsCiAgICAgICAgICAgIHdhbnRSZWNlaXZlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIG51bVZpZGVvVHJhY2tzLS07CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUoKTsKICAgICAgdmFyIHRyYW5zY2VpdmVycyA9IFtdOwogICAgICB0cmFja3MuZm9yRWFjaChmdW5jdGlvbihtbGluZSwgc2RwTUxpbmVJbmRleCkgewogICAgICAgIC8vIEZvciBlYWNoIHRyYWNrLCBjcmVhdGUgYW4gaWNlIGdhdGhlcmVyLCBpY2UgdHJhbnNwb3J0LAogICAgICAgIC8vIGR0bHMgdHJhbnNwb3J0LCBwb3RlbnRpYWxseSBydHBzZW5kZXIgYW5kIHJ0cHJlY2VpdmVyLgogICAgICAgIHZhciB0cmFjayA9IG1saW5lLnRyYWNrOwogICAgICAgIHZhciBraW5kID0gbWxpbmUua2luZDsKICAgICAgICB2YXIgbWlkID0gU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7CgogICAgICAgIHZhciB0cmFuc3BvcnRzID0gc2VsZi51c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCA/IHsKICAgICAgICAgIGljZUdhdGhlcmVyOiB0cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIsCiAgICAgICAgICBpY2VUcmFuc3BvcnQ6IHRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQsCiAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydAogICAgICAgIH0gOiBzZWxmLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cyhtaWQsIHNkcE1MaW5lSW5kZXgpOwoKICAgICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSBSVENSdHBTZW5kZXIuZ2V0Q2FwYWJpbGl0aWVzKGtpbmQpOwogICAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZAogICAgICAgIC8vIGluIGFkYXB0ZXIuanMKICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MgPSBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZmlsdGVyKAogICAgICAgICAgICBmdW5jdGlvbihjb2RlYykgewogICAgICAgICAgICAgIHJldHVybiBjb2RlYy5uYW1lICE9PSAncnR4JzsKICAgICAgICAgICAgfSk7CiAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHsKICAgICAgICAgIC8vIHdvcmsgYXJvdW5kIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD02NTUyCiAgICAgICAgICAvLyBieSBhZGRpbmcgbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQ9MQogICAgICAgICAgaWYgKGNvZGVjLm5hbWUgPT09ICdIMjY0JyAmJgogICAgICAgICAgICAgIGNvZGVjLnBhcmFtZXRlcnNbJ2xldmVsLWFzeW1tZXRyeS1hbGxvd2VkJ10gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb2RlYy5wYXJhbWV0ZXJzWydsZXZlbC1hc3ltbWV0cnktYWxsb3dlZCddID0gJzEnOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICB2YXIgcnRwU2VuZGVyOwogICAgICAgIHZhciBydHBSZWNlaXZlcjsKCiAgICAgICAgLy8gZ2VuZXJhdGUgYW4gc3NyYyBub3csIHRvIGJlIHVzZWQgbGF0ZXIgaW4gcnRwU2VuZGVyLnNlbmQKICAgICAgICB2YXIgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IFt7CiAgICAgICAgICBzc3JjOiAoMiAqIHNkcE1MaW5lSW5kZXggKyAxKSAqIDEwMDEKICAgICAgICB9XTsKICAgICAgICBpZiAodHJhY2spIHsKICAgICAgICAgIHJ0cFNlbmRlciA9IG5ldyBSVENSdHBTZW5kZXIodHJhY2ssIHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCk7CiAgICAgICAgfQoKICAgICAgICBpZiAobWxpbmUud2FudFJlY2VpdmUpIHsKICAgICAgICAgIHJ0cFJlY2VpdmVyID0gbmV3IFJUQ1J0cFJlY2VpdmVyKHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydCwga2luZCk7CiAgICAgICAgfQoKICAgICAgICB0cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7CiAgICAgICAgICBpY2VHYXRoZXJlcjogdHJhbnNwb3J0cy5pY2VHYXRoZXJlciwKICAgICAgICAgIGljZVRyYW5zcG9ydDogdHJhbnNwb3J0cy5pY2VUcmFuc3BvcnQsCiAgICAgICAgICBkdGxzVHJhbnNwb3J0OiB0cmFuc3BvcnRzLmR0bHNUcmFuc3BvcnQsCiAgICAgICAgICBsb2NhbENhcGFiaWxpdGllczogbG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICByZW1vdGVDYXBhYmlsaXRpZXM6IG51bGwsCiAgICAgICAgICBydHBTZW5kZXI6IHJ0cFNlbmRlciwKICAgICAgICAgIHJ0cFJlY2VpdmVyOiBydHBSZWNlaXZlciwKICAgICAgICAgIGtpbmQ6IGtpbmQsCiAgICAgICAgICBtaWQ6IG1pZCwKICAgICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6IHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMsCiAgICAgICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOiBudWxsCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlKSB7CiAgICAgICAgc2RwICs9ICdhPWdyb3VwOkJVTkRMRSAnICsgdHJhbnNjZWl2ZXJzLm1hcChmdW5jdGlvbih0KSB7CiAgICAgICAgICByZXR1cm4gdC5taWQ7CiAgICAgICAgfSkuam9pbignICcpICsgJ1xyXG4nOwogICAgICB9CiAgICAgIHRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKG1saW5lLCBzZHBNTGluZUluZGV4KSB7CiAgICAgICAgdmFyIHRyYW5zY2VpdmVyID0gdHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdOwogICAgICAgIHNkcCArPSBTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbih0cmFuc2NlaXZlciwKICAgICAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsICdvZmZlcicsIHNlbGYubG9jYWxTdHJlYW1zWzBdKTsKICAgICAgfSk7CgogICAgICB0aGlzLl9wZW5kaW5nT2ZmZXIgPSB0cmFuc2NlaXZlcnM7CiAgICAgIHZhciBkZXNjID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJ29mZmVyJywKICAgICAgICBzZHA6IHNkcAogICAgICB9KTsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggJiYgdHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGFyZ3VtZW50c1swXSwgMCwgZGVzYyk7CiAgICAgIH0KICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShkZXNjKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbigpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKCk7CiAgICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlKSB7CiAgICAgICAgc2RwICs9ICdhPWdyb3VwOkJVTkRMRSAnICsgdGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgIHJldHVybiB0Lm1pZDsKICAgICAgICB9KS5qb2luKCcgJykgKyAnXHJcbic7CiAgICAgIH0KICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIGlmICh0cmFuc2NlaXZlci5pc0RhdGFjaGFubmVsKSB7CiAgICAgICAgICBzZHAgKz0gJ209YXBwbGljYXRpb24gMCBEVExTL1NDVFAgNTAwMFxyXG4nICsKICAgICAgICAgICAgICAnYz1JTiBJUDQgMC4wLjAuMFxyXG4nICsKICAgICAgICAgICAgICAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcclxuJzsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuCiAgICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IHNlbGYuX2dldENvbW1vbkNhcGFiaWxpdGllcygKICAgICAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMsCiAgICAgICAgICAgIHRyYW5zY2VpdmVyLnJlbW90ZUNhcGFiaWxpdGllcyk7CgogICAgICAgIHNkcCArPSBTRFBVdGlscy53cml0ZU1lZGlhU2VjdGlvbih0cmFuc2NlaXZlciwgY29tbW9uQ2FwYWJpbGl0aWVzLAogICAgICAgICAgICAnYW5zd2VyJywgc2VsZi5sb2NhbFN0cmVhbXNbMF0pOwogICAgICB9KTsKCiAgICAgIHZhciBkZXNjID0gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7CiAgICAgICAgdHlwZTogJ2Fuc3dlcicsCiAgICAgICAgc2RwOiBzZHAKICAgICAgfSk7CiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChhcmd1bWVudHNbMF0sIDAsIGRlc2MpOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGVzYyk7CiAgICB9OwoKICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7CiAgICAgIGlmICghY2FuZGlkYXRlKSB7CiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7IGorKykgewogICAgICAgICAgdGhpcy50cmFuc2NlaXZlcnNbal0uaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSk7CiAgICAgICAgICBpZiAodGhpcy51c2luZ0J1bmRsZSkgewogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHZhciBtTGluZUluZGV4ID0gY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXg7CiAgICAgICAgaWYgKGNhbmRpZGF0ZS5zZHBNaWQpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMudHJhbnNjZWl2ZXJzW2ldLm1pZCA9PT0gY2FuZGlkYXRlLnNkcE1pZCkgewogICAgICAgICAgICAgIG1MaW5lSW5kZXggPSBpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciB0cmFuc2NlaXZlciA9IHRoaXMudHJhbnNjZWl2ZXJzW21MaW5lSW5kZXhdOwogICAgICAgIGlmICh0cmFuc2NlaXZlcikgewogICAgICAgICAgdmFyIGNhbmQgPSBPYmplY3Qua2V5cyhjYW5kaWRhdGUuY2FuZGlkYXRlKS5sZW5ndGggPiAwID8KICAgICAgICAgICAgICBTRFBVdGlscy5wYXJzZUNhbmRpZGF0ZShjYW5kaWRhdGUuY2FuZGlkYXRlKSA6IHt9OwogICAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS4KICAgICAgICAgIGlmIChjYW5kLnByb3RvY29sID09PSAndGNwJyAmJiAoY2FuZC5wb3J0ID09PSAwIHx8IGNhbmQucG9ydCA9PT0gOSkpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgICAgLy8gSWdub3JlIFJUQ1AgY2FuZGlkYXRlcywgd2UgYXNzdW1lIFJUQ1AtTVVYLgogICAgICAgICAgaWYgKGNhbmQuY29tcG9uZW50ICE9PSAnMScpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZShjYW5kKTsKCiAgICAgICAgICAvLyB1cGRhdGUgdGhlIHJlbW90ZURlc2NyaXB0aW9uLgogICAgICAgICAgdmFyIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyh0aGlzLnJlbW90ZURlc2NyaXB0aW9uLnNkcCk7CiAgICAgICAgICBzZWN0aW9uc1ttTGluZUluZGV4ICsgMV0gKz0gKGNhbmQudHlwZSA/IGNhbmRpZGF0ZS5jYW5kaWRhdGUudHJpbSgpCiAgICAgICAgICAgICAgOiAnYT1lbmQtb2YtY2FuZGlkYXRlcycpICsgJ1xyXG4nOwogICAgICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChhcmd1bWVudHNbMV0sIDApOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgIH07CgogICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgcHJvbWlzZXMgPSBbXTsKICAgICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlcikgewogICAgICAgIFsncnRwU2VuZGVyJywgJ3J0cFJlY2VpdmVyJywgJ2ljZUdhdGhlcmVyJywgJ2ljZVRyYW5zcG9ydCcsCiAgICAgICAgICAgICdkdGxzVHJhbnNwb3J0J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgICAgICBpZiAodHJhbnNjZWl2ZXJbbWV0aG9kXSkgewogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCh0cmFuc2NlaXZlclttZXRob2RdLmdldFN0YXRzKCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nICYmCiAgICAgICAgICBhcmd1bWVudHNbMV07CiAgICAgIHZhciBmaXhTdGF0c1R5cGUgPSBmdW5jdGlvbihzdGF0KSB7CiAgICAgICAgc3RhdC50eXBlID0gewogICAgICAgICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJywKICAgICAgICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJywKICAgICAgICAgIGNhbmRpZGF0ZXBhaXI6ICdjYW5kaWRhdGUtcGFpcicsCiAgICAgICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsCiAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJwogICAgICAgIH1bc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7CiAgICAgICAgcmV0dXJuIHN0YXQ7CiAgICAgIH07CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgICAgIHZhciByZXN1bHRzID0gbmV3IE1hcCgpOwogICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKHJlcykgewogICAgICAgICAgcmVzLmZvckVhY2goZnVuY3Rpb24ocmVzdWx0KSB7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbihpZCkgewogICAgICAgICAgICAgIHJlc3VsdFtpZF0udHlwZSA9IGZpeFN0YXRzVHlwZShyZXN1bHRbaWRdKTsKICAgICAgICAgICAgICByZXN1bHRzLnNldChpZCwgcmVzdWx0W2lkXSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAoY2IpIHsKICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2IsIDAsIHJlc3VsdHMpOwogICAgICAgICAgfQogICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9OwogIH0KfTsKCi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2hpbVBlZXJDb25uZWN0aW9uOiBlZGdlU2hpbS5zaGltUGVlckNvbm5lY3Rpb24sCiAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKQp9OwoKfSx7Ii4uL3V0aWxzIjoxMSwiLi9nZXR1c2VybWVkaWEiOjcsInNkcCI6MX1dLDc6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovKgogKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLgogKgogKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZQogKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlCiAqICB0cmVlLgogKi8KIC8qIGVzbGludC1lbnYgbm9kZSAqLwondXNlIHN0cmljdCc7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiB7UGVybWlzc2lvbkRlbmllZEVycm9yOiAnTm90QWxsb3dlZEVycm9yJ31bZS5uYW1lXSB8fCBlLm5hbWUsCiAgICAgIG1lc3NhZ2U6IGUubWVzc2FnZSwKICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LAogICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTsKICAgICAgfQogICAgfTsKICB9OwoKICAvLyBnZXRVc2VyTWVkaWEgZXJyb3Igc2hpbS4KICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLgogICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oYykgewogICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykuY2F0Y2goZnVuY3Rpb24oZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoc2hpbUVycm9yXyhlKSk7CiAgICB9KTsKICB9Owp9OwoKfSx7fV0sODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qCiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICogIHRyZWUuCiAqLwogLyogZXNsaW50LWVudiBub2RlICovCid1c2Ugc3RyaWN0JzsKCnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJykuYnJvd3NlckRldGFpbHM7Cgp2YXIgZmlyZWZveFNoaW0gPSB7CiAgc2hpbU9uVHJhY2s6IGZ1bmN0aW9uKCkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiAhKCdvbnRyYWNrJyBpbgogICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb250cmFjaycsIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuX29udHJhY2s7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uKGYpIHsKICAgICAgICAgIGlmICh0aGlzLl9vbnRyYWNrKSB7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrKTsKICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayA9IGYpOwogICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbnRyYWNrcG9seSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykgewogICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTsKICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRyYWNrOwogICAgICAgICAgICAgIGV2ZW50LnJlY2VpdmVyID0ge3RyYWNrOiB0cmFja307CiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07CiAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTsKICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAoKICBzaGltU291cmNlT2JqZWN0OiBmdW5jdGlvbigpIHsKICAgIC8vIEZpcmVmb3ggaGFzIHN1cHBvcnRlZCBtb3pTcmNPYmplY3Qgc2luY2UgRkYyMiwgdW5wcmVmaXhlZCBpbiA0Mi4KICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgewogICAgICBpZiAod2luZG93LkhUTUxNZWRpYUVsZW1lbnQgJiYKICAgICAgICAhKCdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSkpIHsKICAgICAgICAvLyBTaGltIHRoZSBzcmNPYmplY3QgcHJvcGVydHksIG9uY2UsIHdoZW4gSFRNTE1lZGlhRWxlbWVudCBpcyBmb3VuZC4KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLCAnc3JjT2JqZWN0JywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubW96U3JjT2JqZWN0OwogICAgICAgICAgfSwKICAgICAgICAgIHNldDogZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgICAgICAgIHRoaXMubW96U3JjT2JqZWN0ID0gc3RyZWFtOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKCiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiB8fAogICAgICAgIHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbikpIHsKICAgICAgcmV0dXJuOyAvLyBwcm9iYWJseSBtZWRpYS5wZWVyY29ubmVjdGlvbi5lbmFibGVkPWZhbHNlIGluIGFib3V0OmNvbmZpZwogICAgfQogICAgLy8gVGhlIFJUQ1BlZXJDb25uZWN0aW9uIG9iamVjdC4KICAgIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKSB7CiAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCAzOCkgewogICAgICAgICAgLy8gLnVybHMgaXMgbm90IHN1cHBvcnRlZCBpbiBGRiA8IDM4LgogICAgICAgICAgLy8gY3JlYXRlIFJUQ0ljZVNlcnZlcnMgd2l0aCBhIHNpbmdsZSB1cmwuCiAgICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlU2VydmVycykgewogICAgICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgc2VydmVyID0gcGNDb25maWcuaWNlU2VydmVyc1tpXTsKICAgICAgICAgICAgICBpZiAoc2VydmVyLmhhc093blByb3BlcnR5KCd1cmxzJykpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2VydmVyLnVybHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlcnZlciA9IHsKICAgICAgICAgICAgICAgICAgICB1cmw6IHNlcnZlci51cmxzW2pdCiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXIudXJsc1tqXS5pbmRleE9mKCd0dXJuJykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBuZXdTZXJ2ZXIudXNlcm5hbWUgPSBzZXJ2ZXIudXNlcm5hbWU7CiAgICAgICAgICAgICAgICAgICAgbmV3U2VydmVyLmNyZWRlbnRpYWwgPSBzZXJ2ZXIuY3JlZGVudGlhbDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gobmV3U2VydmVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVyczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBtb3pSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cyk7CiAgICAgIH07CiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUgPSBtb3pSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7CgogICAgICAvLyB3cmFwIHN0YXRpYyBtZXRob2RzLiBDdXJyZW50bHkganVzdCBnZW5lcmF0ZUNlcnRpZmljYXRlLgogICAgICBpZiAobW96UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywgewogICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIG1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24gPSBtb3pSVENTZXNzaW9uRGVzY3JpcHRpb247CiAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgPSBtb3pSVENJY2VDYW5kaWRhdGU7CiAgICB9CgogICAgLy8gc2hpbSBhd2F5IG5lZWQgZm9yIG9ic29sZXRlIFJUQ0ljZUNhbmRpZGF0ZS9SVENTZXNzaW9uRGVzY3JpcHRpb24uCiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ10KICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHsKICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTsKICAgICAgICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID8KICAgICAgICAgICAgICAgIFJUQ0ljZUNhbmRpZGF0ZSA6IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTsKICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKCiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpCiAgICB2YXIgbmF0aXZlQWRkSWNlQ2FuZGlkYXRlID0KICAgICAgICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlOwogICAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoIWFyZ3VtZW50c1swXSkgewogICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHsKICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICB9CiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CgogICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydAogICAgdmFyIG1ha2VNYXBTdGF0cyA9IGZ1bmN0aW9uKHN0YXRzKSB7CiAgICAgIHZhciBtYXAgPSBuZXcgTWFwKCk7CiAgICAgIE9iamVjdC5rZXlzKHN0YXRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgIG1hcC5zZXQoa2V5LCBzdGF0c1trZXldKTsKICAgICAgICBtYXBba2V5XSA9IHN0YXRzW2tleV07CiAgICAgIH0pOwogICAgICByZXR1cm4gbWFwOwogICAgfTsKCiAgICB2YXIgbW9kZXJuU3RhdHNUeXBlcyA9IHsKICAgICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJywKICAgICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLAogICAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLAogICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsCiAgICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnCiAgICB9OwoKICAgIHZhciBuYXRpdmVHZXRTdGF0cyA9IFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0czsKICAgIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBvblN1Y2MsIG9uRXJyKSB7CiAgICAgIHJldHVybiBuYXRpdmVHZXRTdGF0cy5hcHBseSh0aGlzLCBbc2VsZWN0b3IgfHwgbnVsbF0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3RhdHMpIHsKICAgICAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDgpIHsKICAgICAgICAgICAgc3RhdHMgPSBtYWtlTWFwU3RhdHMoc3RhdHMpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1MyAmJiAhb25TdWNjKSB7CiAgICAgICAgICAgIC8vIFNoaW0gb25seSBwcm9taXNlIGdldFN0YXRzIHdpdGggc3BlYy1oeXBoZW5zIGluIHR5cGUgbmFtZXMKICAgICAgICAgICAgLy8gTGVhdmUgY2FsbGJhY2sgdmVyc2lvbiBhbG9uZTsgbWlzYyBvbGQgdXNlcyBvZiBmb3JFYWNoIGJlZm9yZSBNYXAKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXQpIHsKICAgICAgICAgICAgICAgIHN0YXQudHlwZSA9IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnVHlwZUVycm9yJykgewogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gQXZvaWQgVHlwZUVycm9yOiAidHlwZSIgaXMgcmVhZC1vbmx5LCBpbiBvbGQgdmVyc2lvbnMuIDM0LTQzaXNoCiAgICAgICAgICAgICAgc3RhdHMuZm9yRWFjaChmdW5jdGlvbihzdGF0LCBpKSB7CiAgICAgICAgICAgICAgICBzdGF0cy5zZXQoaSwgT2JqZWN0LmFzc2lnbih7fSwgc3RhdCwgewogICAgICAgICAgICAgICAgICB0eXBlOiBtb2Rlcm5TdGF0c1R5cGVzW3N0YXQudHlwZV0gfHwgc3RhdC50eXBlCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzdGF0czsKICAgICAgICB9KQogICAgICAgIC50aGVuKG9uU3VjYywgb25FcnIpOwogICAgfTsKICB9Cn07CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gewogIHNoaW1PblRyYWNrOiBmaXJlZm94U2hpbS5zaGltT25UcmFjaywKICBzaGltU291cmNlT2JqZWN0OiBmaXJlZm94U2hpbS5zaGltU291cmNlT2JqZWN0LAogIHNoaW1QZWVyQ29ubmVjdGlvbjogZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uLAogIHNoaW1HZXRVc2VyTWVkaWE6IHJlcXVpcmUoJy4vZ2V0dXNlcm1lZGlhJykKfTsKCn0seyIuLi91dGlscyI6MTEsIi4vZ2V0dXNlcm1lZGlhIjo5fV0sOTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qCiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICogIHRyZWUuCiAqLwogLyogZXNsaW50LWVudiBub2RlICovCid1c2Ugc3RyaWN0JzsKCnZhciBsb2dnaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5sb2c7CnZhciBicm93c2VyRGV0YWlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJykuYnJvd3NlckRldGFpbHM7CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7CiAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiB7CiAgICAgICAgU2VjdXJpdHlFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsCiAgICAgICAgUGVybWlzc2lvbkRlbmllZEVycm9yOiAnTm90QWxsb3dlZEVycm9yJwogICAgICB9W2UubmFtZV0gfHwgZS5uYW1lLAogICAgICBtZXNzYWdlOiB7CiAgICAgICAgJ1RoZSBvcGVyYXRpb24gaXMgaW5zZWN1cmUuJzogJ1RoZSByZXF1ZXN0IGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSAnICsKICAgICAgICAndXNlciBhZ2VudCBvciB0aGUgcGxhdGZvcm0gaW4gdGhlIGN1cnJlbnQgY29udGV4dC4nCiAgICAgIH1bZS5tZXNzYWdlXSB8fCBlLm1lc3NhZ2UsCiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLm5hbWUgKyAodGhpcy5tZXNzYWdlICYmICc6ICcpICsgdGhpcy5tZXNzYWdlOwogICAgICB9CiAgICB9OwogIH07CgogIC8vIGdldFVzZXJNZWRpYSBjb25zdHJhaW50cyBzaGltLgogIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgdmFyIGNvbnN0cmFpbnRzVG9GRjM3XyA9IGZ1bmN0aW9uKGMpIHsKICAgICAgaWYgKHR5cGVvZiBjICE9PSAnb2JqZWN0JyB8fCBjLnJlcXVpcmUpIHsKICAgICAgICByZXR1cm4gYzsKICAgICAgfQogICAgICB2YXIgcmVxdWlyZSA9IFtdOwogICAgICBPYmplY3Qua2V5cyhjKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciByID0gY1trZXldID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/CiAgICAgICAgICAgIGNba2V5XSA6IHtpZGVhbDogY1trZXldfTsKICAgICAgICBpZiAoci5taW4gIT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICByLm1heCAhPT0gdW5kZWZpbmVkIHx8IHIuZXhhY3QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmVxdWlyZS5wdXNoKGtleSk7CiAgICAgICAgfQogICAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygci5leGFjdCA9PT0gJ251bWJlcicpIHsKICAgICAgICAgICAgci4gbWluID0gci5tYXggPSByLmV4YWN0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY1trZXldID0gci5leGFjdDsKICAgICAgICAgIH0KICAgICAgICAgIGRlbGV0ZSByLmV4YWN0OwogICAgICAgIH0KICAgICAgICBpZiAoci5pZGVhbCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBjLmFkdmFuY2VkID0gYy5hZHZhbmNlZCB8fCBbXTsKICAgICAgICAgIHZhciBvYyA9IHt9OwogICAgICAgICAgaWYgKHR5cGVvZiByLmlkZWFsID09PSAnbnVtYmVyJykgewogICAgICAgICAgICBvY1trZXldID0ge21pbjogci5pZGVhbCwgbWF4OiByLmlkZWFsfTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9jW2tleV0gPSByLmlkZWFsOwogICAgICAgICAgfQogICAgICAgICAgYy5hZHZhbmNlZC5wdXNoKG9jKTsKICAgICAgICAgIGRlbGV0ZSByLmlkZWFsOwogICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhyKS5sZW5ndGgpIHsKICAgICAgICAgICAgZGVsZXRlIGNba2V5XTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAocmVxdWlyZS5sZW5ndGgpIHsKICAgICAgICBjLnJlcXVpcmUgPSByZXF1aXJlOwogICAgICB9CiAgICAgIHJldHVybiBjOwogICAgfTsKICAgIGNvbnN0cmFpbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpOwogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCAzOCkgewogICAgICBsb2dnaW5nKCdzcGVjOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgICAgaWYgKGNvbnN0cmFpbnRzLmF1ZGlvKSB7CiAgICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMuYXVkaW8pOwogICAgICB9CiAgICAgIGlmIChjb25zdHJhaW50cy52aWRlbykgewogICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvID0gY29uc3RyYWludHNUb0ZGMzdfKGNvbnN0cmFpbnRzLnZpZGVvKTsKICAgICAgfQogICAgICBsb2dnaW5nKCdmZjM3OiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTsKICAgIH0KICAgIHJldHVybiBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIGZ1bmN0aW9uKGUpIHsKICAgICAgb25FcnJvcihzaGltRXJyb3JfKGUpKTsKICAgIH0pOwogIH07CgogIC8vIFJldHVybnMgdGhlIHJlc3VsdCBvZiBnZXRVc2VyTWVkaWEgYXMgYSBQcm9taXNlLgogIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGdldFVzZXJNZWRpYV8oY29uc3RyYWludHMsIHJlc29sdmUsIHJlamVjdCk7CiAgICB9KTsKICB9OwoKICAvLyBTaGltIGZvciBtZWRpYURldmljZXMgb24gb2xkZXIgdmVyc2lvbnMuCiAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge2dldFVzZXJNZWRpYTogZ2V0VXNlck1lZGlhUHJvbWlzZV8sCiAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9LAogICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbigpIHsgfQogICAgfTsKICB9CiAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzID0KICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzIHx8IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7CiAgICAgICAgICB2YXIgaW5mb3MgPSBbCiAgICAgICAgICAgIHtraW5kOiAnYXVkaW9pbnB1dCcsIGRldmljZUlkOiAnZGVmYXVsdCcsIGxhYmVsOiAnJywgZ3JvdXBJZDogJyd9LAogICAgICAgICAgICB7a2luZDogJ3ZpZGVvaW5wdXQnLCBkZXZpY2VJZDogJ2RlZmF1bHQnLCBsYWJlbDogJycsIGdyb3VwSWQ6ICcnfQogICAgICAgICAgXTsKICAgICAgICAgIHJlc29sdmUoaW5mb3MpOwogICAgICAgIH0pOwogICAgICB9OwoKICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQxKSB7CiAgICAvLyBXb3JrIGFyb3VuZCBodHRwOi8vYnVnemlsLmxhLzExNjk2NjUKICAgIHZhciBvcmdFbnVtZXJhdGVEZXZpY2VzID0KICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTsKICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcyA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gb3JnRW51bWVyYXRlRGV2aWNlcygpLnRoZW4odW5kZWZpbmVkLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKGUubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InKSB7CiAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgfQogICAgICAgIHRocm93IGU7CiAgICAgIH0pOwogICAgfTsKICB9CiAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA0OSkgewogICAgdmFyIG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS4KICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjKSB7CiAgICAgIHJldHVybiBvcmlnR2V0VXNlck1lZGlhKGMpLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7CiAgICAgICAgLy8gV29yayBhcm91bmQgaHR0cHM6Ly9idWd6aWwubGEvODAyMzI2CiAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fAogICAgICAgICAgICBjLnZpZGVvICYmICFzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHsKICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7CiAgICAgICAgICAgIHRyYWNrLnN0b3AoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVGhlIG9iamVjdCBjYW4gbm90IGJlIGZvdW5kIGhlcmUuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vdEZvdW5kRXJyb3InKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cmVhbTsKICAgICAgfSwgZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTsKICAgICAgfSk7CiAgICB9OwogIH0KICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikgewogICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA0NCkgewogICAgICByZXR1cm4gZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKTsKICAgIH0KICAgIC8vIFJlcGxhY2UgRmlyZWZveCA0NCsncyBkZXByZWNhdGlvbiB3YXJuaW5nIHdpdGggdW5wcmVmaXhlZCB2ZXJzaW9uLgogICAgY29uc29sZS53YXJuKCduYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIGhhcyBiZWVuIHJlcGxhY2VkIGJ5ICcgKwogICAgICAgICAgICAgICAgICduYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYScpOwogICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKTsKICB9Owp9OwoKfSx7Ii4uL3V0aWxzIjoxMX1dLDEwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoKICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC4KICoKICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2UKICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZQogKiAgdHJlZS4KICovCid1c2Ugc3RyaWN0JzsKdmFyIHNhZmFyaVNoaW0gPSB7CiAgLy8gVE9ETzogRHJBbGV4LCBzaG91bGQgYmUgaGVyZSwgZG91YmxlIGNoZWNrIGFnYWluc3QgTGF5b3V0VGVzdHMKICAvLyBzaGltT25UcmFjazogZnVuY3Rpb24oKSB7IH0sCgogIC8vIFRPRE86IG9uY2UgdGhlIGJhY2stZW5kIGZvciB0aGUgbWFjIHBvcnQgaXMgZG9uZSwgYWRkLgogIC8vIFRPRE86IGNoZWNrIGZvciB3ZWJraXRHVEsrCiAgLy8gc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbigpIHsgfSwKCiAgc2hpbUdldFVzZXJNZWRpYTogZnVuY3Rpb24oKSB7CiAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYTsKICB9Cn07CgovLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuCm1vZHVsZS5leHBvcnRzID0gewogIHNoaW1HZXRVc2VyTWVkaWE6IHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYQogIC8vIFRPRE8KICAvLyBzaGltT25UcmFjazogc2FmYXJpU2hpbS5zaGltT25UcmFjaywKICAvLyBzaGltUGVlckNvbm5lY3Rpb246IHNhZmFyaVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uCn07Cgp9LHt9XSwxMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Ci8qCiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAqCiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlCiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2UKICogIHRyZWUuCiAqLwogLyogZXNsaW50LWVudiBub2RlICovCid1c2Ugc3RyaWN0JzsKCnZhciBsb2dEaXNhYmxlZF8gPSB0cnVlOwoKLy8gVXRpbGl0eSBtZXRob2RzLgp2YXIgdXRpbHMgPSB7CiAgZGlzYWJsZUxvZzogZnVuY3Rpb24oYm9vbCkgewogICAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHsKICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJndW1lbnQgdHlwZTogJyArIHR5cGVvZiBib29sICsKICAgICAgICAgICcuIFBsZWFzZSB1c2UgYSBib29sZWFuLicpOwogICAgfQogICAgbG9nRGlzYWJsZWRfID0gYm9vbDsKICAgIHJldHVybiAoYm9vbCkgPyAnYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkJyA6CiAgICAgICAgJ2FkYXB0ZXIuanMgbG9nZ2luZyBlbmFibGVkJzsKICB9LAoKICBsb2c6IGZ1bmN0aW9uKCkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7CiAgICAgIGlmIChsb2dEaXNhYmxlZF8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpOwogICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAgICogRXh0cmFjdCBicm93c2VyIHZlcnNpb24gb3V0IG9mIHRoZSBwcm92aWRlZCB1c2VyIGFnZW50IHN0cmluZy4KICAgKgogICAqIEBwYXJhbSB7IXN0cmluZ30gdWFzdHJpbmcgdXNlckFnZW50IHN0cmluZy4KICAgKiBAcGFyYW0geyFzdHJpbmd9IGV4cHIgUmVndWxhciBleHByZXNzaW9uIHVzZWQgYXMgbWF0Y2ggY3JpdGVyaWEuCiAgICogQHBhcmFtIHshbnVtYmVyfSBwb3MgcG9zaXRpb24gaW4gdGhlIHZlcnNpb24gc3RyaW5nIHRvIGJlIHJldHVybmVkLgogICAqIEByZXR1cm4geyFudW1iZXJ9IGJyb3dzZXIgdmVyc2lvbi4KICAgKi8KICBleHRyYWN0VmVyc2lvbjogZnVuY3Rpb24odWFzdHJpbmcsIGV4cHIsIHBvcykgewogICAgdmFyIG1hdGNoID0gdWFzdHJpbmcubWF0Y2goZXhwcik7CiAgICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IHBvcyAmJiBwYXJzZUludChtYXRjaFtwb3NdLCAxMCk7CiAgfSwKCiAgLyoqCiAgICogQnJvd3NlciBkZXRlY3Rvci4KICAgKgogICAqIEByZXR1cm4ge29iamVjdH0gcmVzdWx0IGNvbnRhaW5pbmcgYnJvd3NlciBhbmQgdmVyc2lvbgogICAqICAgICBwcm9wZXJ0aWVzLgogICAqLwogIGRldGVjdEJyb3dzZXI6IGZ1bmN0aW9uKCkgewogICAgLy8gUmV0dXJuZWQgcmVzdWx0IG9iamVjdC4KICAgIHZhciByZXN1bHQgPSB7fTsKICAgIHJlc3VsdC5icm93c2VyID0gbnVsbDsKICAgIHJlc3VsdC52ZXJzaW9uID0gbnVsbDsKCiAgICAvLyBGYWlsIGVhcmx5IGlmIGl0J3Mgbm90IGEgYnJvd3NlcgogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICF3aW5kb3cubmF2aWdhdG9yKSB7CiAgICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIGJyb3dzZXIuJzsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyBGaXJlZm94LgogICAgaWYgKG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHsKICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnZmlyZWZveCc7CiAgICAgIHJlc3VsdC52ZXJzaW9uID0gdGhpcy5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LAogICAgICAgICAgL0ZpcmVmb3hcLyhbMC05XSspXC4vLCAxKTsKCiAgICAvLyBhbGwgd2Via2l0LWJhc2VkIGJyb3dzZXJzCiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEpIHsKICAgICAgLy8gQ2hyb21lLCBDaHJvbWl1bSwgV2VidmlldywgT3BlcmEsIGFsbCB1c2UgdGhlIGNocm9tZSBzaGltIGZvciBub3cKICAgICAgaWYgKHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikgewogICAgICAgIHJlc3VsdC5icm93c2VyID0gJ2Nocm9tZSc7CiAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB0aGlzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgICAgICAvQ2hyb20oZXxpdW0pXC8oWzAtOV0rKVwuLywgMik7CgogICAgICAvLyBTYWZhcmkgb3IgdW5rbm93biB3ZWJraXQtYmFzZWQKICAgICAgLy8gZm9yIHRoZSB0aW1lIGJlaW5nIFNhZmFyaSBoYXMgc3VwcG9ydCBmb3IgTWVkaWFTdHJlYW1zIGJ1dCBub3Qgd2ViUlRDCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gU2FmYXJpIFVBIHN1YnN0cmluZ3Mgb2YgaW50ZXJlc3QgZm9yIHJlZmVyZW5jZToKICAgICAgICAvLyAtIHdlYmtpdCB2ZXJzaW9uOiAgICAgICAgICAgQXBwbGVXZWJLaXQvNjAyLjEuMjUgKGFsc28gdXNlZCBpbiBPcCxDcikKICAgICAgICAvLyAtIHNhZmFyaSBVSSB2ZXJzaW9uOiAgICAgICAgVmVyc2lvbi85LjAuMyAodW5pcXVlIHRvIFNhZmFyaSkKICAgICAgICAvLyAtIHNhZmFyaSBVSSB3ZWJraXQgdmVyc2lvbjogU2FmYXJpLzYwMS40LjQgKGFsc28gdXNlZCBpbiBPcCxDcikKICAgICAgICAvLwogICAgICAgIC8vIGlmIHRoZSB3ZWJraXQgdmVyc2lvbiBhbmQgc2FmYXJpIFVJIHdlYmtpdCB2ZXJzaW9ucyBhcmUgZXF1YWxzLAogICAgICAgIC8vIC4uLiB0aGlzIGlzIGEgc3RhYmxlIHZlcnNpb24uCiAgICAgICAgLy8KICAgICAgICAvLyBvbmx5IHRoZSBpbnRlcm5hbCB3ZWJraXQgdmVyc2lvbiBpcyBpbXBvcnRhbnQgdG9kYXkgdG8ga25vdyBpZgogICAgICAgIC8vIG1lZGlhIHN0cmVhbXMgYXJlIHN1cHBvcnRlZAogICAgICAgIC8vCiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cLyhcZCspLihcZCspLykpIHsKICAgICAgICAgIHJlc3VsdC5icm93c2VyID0gJ3NhZmFyaSc7CiAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwKICAgICAgICAgICAgL0FwcGxlV2ViS2l0XC8oWzAtOV0rKVwuLywgMSk7CgogICAgICAgIC8vIHVua25vd24gd2Via2l0LWJhc2VkIGJyb3dzZXIKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnVW5zdXBwb3J0ZWQgd2Via2l0LWJhc2VkIGJyb3dzZXIgJyArCiAgICAgICAgICAgICAgJ3dpdGggR1VNIHN1cHBvcnQgYnV0IG5vIFdlYlJUQyBzdXBwb3J0Lic7CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgfQoKICAgIC8vIEVkZ2UuCiAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYKICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXC8oXGQrKS4oXGQrKSQvKSkgewogICAgICByZXN1bHQuYnJvd3NlciA9ICdlZGdlJzsKICAgICAgcmVzdWx0LnZlcnNpb24gPSB0aGlzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgICAgICAvRWRnZVwvKFxkKykuKFxkKykkLywgMik7CgogICAgLy8gRGVmYXVsdCBmYWxsdGhyb3VnaDogbm90IHN1cHBvcnRlZC4KICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIHN1cHBvcnRlZCBicm93c2VyLic7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9LAoKICAvLyBzaGltQ3JlYXRlT2JqZWN0VVJMIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltU291cmNlT2JqZWN0IHRvIGF2b2lkIGxvb3AuCgogIHNoaW1DcmVhdGVPYmplY3RVUkw6IGZ1bmN0aW9uKCkgewogICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LkhUTUxNZWRpYUVsZW1lbnQgJiYKICAgICAgICAgICdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSkpIHsKICAgICAgLy8gT25seSBzaGltIENyZWF0ZU9iamVjdFVSTCB1c2luZyBzcmNPYmplY3QgaWYgc3JjT2JqZWN0IGV4aXN0cy4KICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KCiAgICB2YXIgbmF0aXZlQ3JlYXRlT2JqZWN0VVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTC5iaW5kKFVSTCk7CiAgICB2YXIgbmF0aXZlUmV2b2tlT2JqZWN0VVJMID0gVVJMLnJldm9rZU9iamVjdFVSTC5iaW5kKFVSTCk7CiAgICB2YXIgc3RyZWFtcyA9IG5ldyBNYXAoKSwgbmV3SWQgPSAwOwoKICAgIFVSTC5jcmVhdGVPYmplY3RVUkwgPSBmdW5jdGlvbihzdHJlYW0pIHsKICAgICAgaWYgKCdnZXRUcmFja3MnIGluIHN0cmVhbSkgewogICAgICAgIHZhciB1cmwgPSAncG9seWJsb2I6JyArICgrK25ld0lkKTsKICAgICAgICBzdHJlYW1zLnNldCh1cmwsIHN0cmVhbSk7CiAgICAgICAgY29uc29sZS5sb2coJ1VSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKSBpcyBkZXByZWNhdGVkISAnICsKICAgICAgICAgICAgICAgICAgICAnVXNlIGVsZW0uc3JjT2JqZWN0ID0gc3RyZWFtIGluc3RlYWQhJyk7CiAgICAgICAgcmV0dXJuIHVybDsKICAgICAgfQogICAgICByZXR1cm4gbmF0aXZlQ3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7CiAgICB9OwogICAgVVJMLnJldm9rZU9iamVjdFVSTCA9IGZ1bmN0aW9uKHVybCkgewogICAgICBuYXRpdmVSZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgc3RyZWFtcy5kZWxldGUodXJsKTsKICAgIH07CgogICAgdmFyIGRzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NyYycpOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyYycsIHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gZHNjLmdldC5hcHBseSh0aGlzKTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbih1cmwpIHsKICAgICAgICB0aGlzLnNyY09iamVjdCA9IHN0cmVhbXMuZ2V0KHVybCkgfHwgbnVsbDsKICAgICAgICByZXR1cm4gZHNjLnNldC5hcHBseSh0aGlzLCBbdXJsXSk7CiAgICAgIH0KICAgIH0pOwogIH0KfTsKCi8vIEV4cG9ydC4KbW9kdWxlLmV4cG9ydHMgPSB7CiAgbG9nOiB1dGlscy5sb2csCiAgZGlzYWJsZUxvZzogdXRpbHMuZGlzYWJsZUxvZywKICBicm93c2VyRGV0YWlsczogdXRpbHMuZGV0ZWN0QnJvd3NlcigpLAogIGV4dHJhY3RWZXJzaW9uOiB1dGlscy5leHRyYWN0VmVyc2lvbiwKICBzaGltQ3JlYXRlT2JqZWN0VVJMOiB1dGlscy5zaGltQ3JlYXRlT2JqZWN0VVJMCn07Cgp9LHt9XSwxMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOyAvKioKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KCnJlcXVpcmUoJ3dlYnJ0Yy1hZGFwdGVyJyk7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCi8qKgogIFRoZSBDb25uZWN0aW9uQ29udHJvbGxlciBoYXMgYSBnZW5lcmljIGRlc2lnbiBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGluIGJvdGggc3R1YnMuCiAgSXQgbWFuYWdlcyBhIHNpbmdsZSBEYXRhQ2hhbm5lbCwgaXQgaXMgbm90IHJlcXVlc3RpbmcgYWNjZXNzIHRvIG1lZGlhIGlucHV0LCBpLmUuCiAgZG9lcyBub3QgaGF2ZSBhdWRpby92aWRlbyBzdHJlYW1zLgoqKi8KdmFyIENvbm5lY3Rpb25Db250cm9sbGVyID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbm5lY3Rpb25Db250cm9sbGVyKG15VXJsLCBzeW5jaGVyLCBjb25maWd1cmF0aW9uLCBjYWxsZXIpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0aW9uQ29udHJvbGxlcik7CgogICAgaWYgKCFteVVybCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgb3duIHVybCAobXlVcmwpIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFzeW5jaGVyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzeW5jaGVyIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWd1cmF0aW9uKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWd1cmF0aW9uIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgIHRoaXMuX2RvbWFpbiA9IHRoaXMuX2RpdmlkZVVSTChteVVybClbImRvbWFpbiJdOwogICAgdGhpcy5fb2JqZWN0RGVzY1VSTCA9ICdoeXBlcnR5LWNhdGFsb2d1ZTovL2NhdGFsb2d1ZS4nICsgdGhpcy5fZG9tYWluICsgJy8ud2VsbC1rbm93bi9kYXRhc2NoZW1hL0Nvbm5lY3Rpb24nOwoKICAgIHRoaXMuX215VXJsID0gbXlVcmw7CiAgICB0aGlzLl9zeW5jaGVyID0gc3luY2hlcjsKICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwogICAgdGhpcy5fY2FsbGVyID0gY2FsbGVyOwogICAgdGhpcy5fZGF0YU9iamVjdE9ic2VydmVyOwogICAgdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyOwogICAgdGhpcy5fcGVlclVybDsKICAgIHRoaXMuX2RhdGFDaGFubmVsOwogICAgdGhpcy5fb25TdGF0dXNVcGRhdGU7CiAgICB0aGlzLl9yZW1vdGVSdW50aW1lVVJMOwoKICAgIHRoaXMuX3BlZXJDb25uZWN0aW9uID0gdGhpcy5fY3JlYXRlUGVlckNvbm5lY3Rpb24oKTsKICB9CgogIC8vY3JlYXRlIGEgcGVlciBjb25uZWN0aW9uIHdpdGggaXRzIGV2ZW50IGhhbmRsZXJzCgoKICBfY3JlYXRlQ2xhc3MoQ29ubmVjdGlvbkNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICdfY3JlYXRlUGVlckNvbm5lY3Rpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVQZWVyQ29ubmVjdGlvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBwYyA9IHRoaXMuX3BlZXJDb25uZWN0aW9uOwogICAgICBpZiAoIXBjKSB7CiAgICAgICAgcGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24odGhpcy5fY29uZmlndXJhdGlvbik7CiAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiBjcmVhdGVkIFBlZXJDb25uZWN0aW9uIik7CgogICAgICAgIC8vIGFkZCBoYW5kbGVyIGZvciBkYXRhY2hhbm5lbCBjcmVhdGlvbiBmcm9tIHBlZXIgc2lkZQogICAgICAgIHBjLm9uZGF0YWNoYW5uZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogb25kYXRhY2hhbm5lbCAtPiByZW1vdGUgc2lkZSBoYXMgY3JlYXRlZCBhIGRhdGFjaGFubmVsIik7CiAgICAgICAgICBfdGhpcy5fZGF0YUNoYW5uZWwgPSBldmVudC5jaGFubmVsOwogICAgICAgICAgX3RoaXMuX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gZXZlbnQgaGFuZGxlciBmb3IgbG9jYWwgaWNlIGNhbmRpZGF0ZXMKICAgICAgICBwYy5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IGljZWNhbmRpZGF0ZWV2ZW50IG9jY3VyZWQ6ICIsIGUpOwogICAgICAgICAgaWYgKCFlLmNhbmRpZGF0ZSkgcmV0dXJuOwogICAgICAgICAgdmFyIGljZWNhbmRpZGF0ZSA9IHsKICAgICAgICAgICAgdHlwZTogJ2NhbmRpZGF0ZScsCiAgICAgICAgICAgIGNhbmRpZGF0ZTogZS5jYW5kaWRhdGUuY2FuZGlkYXRlLAogICAgICAgICAgICBzZHBNaWQ6IGUuY2FuZGlkYXRlLnNkcE1pZCwKICAgICAgICAgICAgc2RwTUxpbmVJbmRleDogZS5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleAogICAgICAgICAgfTsKICAgICAgICAgIC8vIHNlbmQgY2FuZGlkYXRlIHRvIHJlbW90ZSBwZWVyIGJ5IHB1c2hpbmcgaXQgdG8gdGhlIHJlcG9ydGVyIG9iamVjdAogICAgICAgICAgX3RoaXMuX2RhdGFPYmplY3RSZXBvcnRlci5kYXRhLmljZUNhbmRpZGF0ZXMucHVzaChpY2VjYW5kaWRhdGUpOwogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHBjOwogICAgfQoKICAgIC8qKgogICAgUmVhY3QgdG8gdGhlIGdpdmVuIGludml0YXRpb24gZXZlbnQgYnkgc3Vic2NyaWJpbmcgdG8gdGhlIHByb3ZpZGVkIGludml0YXRpb25FdmVudC51cmwuCiAgICAqKi8KCiAgfSwgewogICAga2V5OiAnb2JzZXJ2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb2JzZXJ2ZShpbnZpdGF0aW9uRXZlbnQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLl9wZWVyVXJsID0gaW52aXRhdGlvbkV2ZW50LmZyb207CiAgICAgIHRoaXMuX3JlbW90ZVJ1bnRpbWVVUkwgPSBpbnZpdGF0aW9uRXZlbnQudmFsdWUucnVudGltZVVSTDsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIF90aGlzMi5fc3luY2hlci5zdWJzY3JpYmUoX3RoaXMyLl9vYmplY3REZXNjVVJMLCBpbnZpdGF0aW9uRXZlbnQudXJsKS50aGVuKGZ1bmN0aW9uIChkYXRhT2JqZWN0T2JzZXJ2ZXIpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnK1tQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIGdvdCBEYXRhIE9iamVjdCBPYnNlcnZlcicsIGRhdGFPYmplY3RPYnNlcnZlcik7CiAgICAgICAgICBfdGhpczIuX3NldHVwT2JzZXJ2ZXIoZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgICByZWplY3QoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICBDcmVhdGVzIGEgc3luY2hlciBvYmplY3QgYW5kIGludml0ZSB0aGUgZ2l2ZW4gcGVlclVybCB0byBzdWJzY3JpYmUgZm9yIGl0LgogICAgQWxzbyBjcmVhdGVzIHRoZSBsb2NhbCBvZmZlciwgcGVyZm9ybXMgc2V0TG9jYWxEZXNjcmlwdGlvbiBhbmQgcHVibGlzaGVzIHRoZSBvZmZlciB2aWEgdGhlIHJlcG9ydGVyIG9iamVjdC4KICAgICoqLwoKICB9LCB7CiAgICBrZXk6ICdyZXBvcnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcG9ydChwZWVyVXJsLCBvd25SdW50aW1lVXJsKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl9wZWVyVXJsKSB0aGlzLl9wZWVyVXJsID0gcGVlclVybDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgLy8gIGlmIHdlIGFyZSB0aGUgY2FsbGVyIChpLmUuIG5vIHJlcG9ydGVyIG9iamVjdCBwcmVzZW50IHlldCwgaW5pdGFsaXplIHRoZSBjcmVhdGlvbiBvZiB0aGUgRGF0YUNoYW5uZWwpCiAgICAgICAgaWYgKF90aGlzMy5fY2FsbGVyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHdlIGFyZSBpbiBjYWxsZXIgcm9sZSAtLT4gY3JlYXRlRGF0YUNoYW5uZWwgLi4uIik7CiAgICAgICAgICBfdGhpczMuX2RhdGFDaGFubmVsID0gX3RoaXMzLl9wZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgiUDJQQ2hhbm5lbCIsIHsgcmVsaWFibGU6IGZhbHNlIH0pOwogICAgICAgICAgY29uc29sZS5sb2coIlAyUDogZGF0YWNoYW5uZWwgb2JqZWN0IiwgX3RoaXMzLl9kYXRhQ2hhbm5lbCk7CiAgICAgICAgICBfdGhpczMuX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCk7CiAgICAgICAgfQoKICAgICAgICAvLyBpbml0aWFsIGRhdGEgZm9yIHJlcG9ydGVyIHN5bmMgb2JqZWN0CiAgICAgICAgdmFyIGRhdGFPYmplY3QgPSB7CiAgICAgICAgICBuYW1lOiAiUDJQQ29ubmVjdGlvbiIsCiAgICAgICAgICBzdGF0dXM6ICIiLAogICAgICAgICAgb3duZXI6IF90aGlzMy5fbXlVcmwsCiAgICAgICAgICBydW50aW1lVVJMOiBvd25SdW50aW1lVXJsLCAvLyBwdXQgdGhlIG93biBydW50aW1lVVJMIHRvIHRoZSBkYXRhT2JqZWN0IChhcyBkaXNjdXNzZWQgd2l0aCBQYXVsbykKICAgICAgICAgIGNvbm5lY3Rpb25EZXNjcmlwdGlvbjoge30sCiAgICAgICAgICBpY2VDYW5kaWRhdGVzOiBbXQogICAgICAgIH07CiAgICAgICAgLy8gZW5zdXJlIHRoaXMgdGhlIG9ialJlcG9ydGVyIG9iamVjdCBpcyBjcmVhdGVkIGJlZm9yZSB3ZSBjcmVhdGUgdGhlIG9mZmVyCiAgICAgICAgX3RoaXMzLl9zeW5jaGVyLmNyZWF0ZShfdGhpczMuX29iamVjdERlc2NVUkwsIFtfdGhpczMuX3BlZXJVcmxdLCBkYXRhT2JqZWN0KS50aGVuKGZ1bmN0aW9uIChvYmpSZXBvcnRlcikgewogICAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSBDcmVhdGVkIFdlYlJUQyBPYmplY3QgUmVwb3J0ZXInLCBvYmpSZXBvcnRlcik7CgogICAgICAgICAgX3RoaXMzLl9kYXRhT2JqZWN0UmVwb3J0ZXIgPSBvYmpSZXBvcnRlcjsKICAgICAgICAgIF90aGlzMy5fZGF0YU9iamVjdFJlcG9ydGVyLm9uU3Vic2NyaXB0aW9uKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBldmVudC5hY2NlcHQoKTsgLy8gYWxsIHN1YnNjcmlwdGlvbiByZXF1ZXN0ZWQgYXJlIGFjY2VwdGVkCiAgICAgICAgICB9KTsKCiAgICAgICAgICB2YXIgY29uc3RyYWludHMgPSB7CiAgICAgICAgICAgIG9mZmVyVG9SZWNlaXZlQXVkaW86IGZhbHNlLAogICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiBmYWxzZQogICAgICAgICAgfTsKICAgICAgICAgIC8vIGVpdGhlciBpbnZva2UgY3JlYXRlT2ZmZXIgb3IgY3JlYXRlQW5zd2VyLCBkZXBlbmRpbmcgb24gdGhlIHJvbGVzCiAgICAgICAgICB2YXIgc2RwUHJvbWlzZSA9IF90aGlzMy5fY2FsbGVyID8gX3RoaXMzLl9wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihjb25zdHJhaW50cykgOiBfdGhpczMuX3BlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcigpOwogICAgICAgICAgc2RwUHJvbWlzZS50aGVuKGZ1bmN0aW9uIChzZHApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdIFNEUCBjcmVhdGVkIiwgc2RwKTsKICAgICAgICAgICAgX3RoaXMzLl9wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oc2RwKSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gbG9jYWxEZXNjcmlwdGlvbiBzZXQgc3VjY2Vzc2Z1bGx5Jyk7CiAgICAgICAgICAgICAgX3RoaXMzLl9kYXRhT2JqZWN0UmVwb3J0ZXIuZGF0YS5jb25uZWN0aW9uRGVzY3JpcHRpb24gPSBzZHA7CiAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJlamVjdCgic2V0dGluZyBvZiBsb2NhbERlc2NyaXB0aW9uIGZhaWxlZDogIiwgZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7CiAgICAgICAgICAgIHJlamVjdChyZWFzb24pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ29uTWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25NZXNzYWdlKGNhbGxiYWNrKSB7CiAgICAgIC8vIGFkZCB0aGUgbWVzc2FnZSBjYWxsYmFjawogICAgICB0aGlzLl9vbkRhdGFDaGFubmVsTWVzc2FnZSA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ29uU3RhdHVzVXBkYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblN0YXR1c1VwZGF0ZShjYWxsYmFjaykgewogICAgICAvLyBhZGQgYSBjb25uZWN0aW9uIHN0YXR1cyB1cGRhdGUgY2FsbGJhY2sKICAgICAgdGhpcy5fb25TdGF0dXNVcGRhdGUgPSBjYWxsYmFjazsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdzZW5kTWVzc2FnZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UobSkgewogICAgICAvLyB0b2RvOiBvbmx5IHNlbmQgaWYgZGF0YSBjaGFubmVsIGlzIGNvbm5lY3RlZAogICAgICBjb25zb2xlLmxvZygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gLS0+IG91dGdvaW5nIG1zZzogIiwgbSk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLnNlbmQobSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnY2xlYW51cCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RSZXBvcnRlcjsKICAgICAgZGVsZXRlIHRoaXMuX2RhdGFPYmplY3RPYnNlcnZlcjsKICAgICAgaWYgKHRoaXMuX2RhdGFDaGFubmVsKSB0aGlzLl9kYXRhQ2hhbm5lbC5jbG9zZSgpOwogICAgICBpZiAodGhpcy5fcGVlckNvbm5lY3Rpb24pIHRoaXMuX3BlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsID0gbnVsbDsKICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24gPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogJ19hZGREYXRhQ2hhbm5lbExpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZERhdGFDaGFubmVsTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxPcGVuKCk7CiAgICAgIH07CiAgICAgIHRoaXMuX2RhdGFDaGFubmVsLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzNC5fb25EYXRhQ2hhbm5lbEVycm9yKGUpOwogICAgICB9OwogICAgICB0aGlzLl9kYXRhQ2hhbm5lbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobSkgewogICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSA8LS0gaW5jb21pbmcgbXNnOiAiLCBtKTsKICAgICAgICBpZiAoX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZSkgX3RoaXM0Ll9vbkRhdGFDaGFubmVsTWVzc2FnZShtKTsKICAgICAgfTsKICAgICAgdGhpcy5fZGF0YUNoYW5uZWwub25jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuX29uRGF0YUNoYW5uZWxDbG9zZSgpOwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZXR1cE9ic2VydmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBPYnNlcnZlcihkYXRhT2JqZWN0T2JzZXJ2ZXIpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CgogICAgICB2YXIgcGVlckRhdGEgPSB0aGlzLl9kYXRhT2JqZWN0T2JzZXJ2ZXIuZGF0YTsKICAgICAgY29uc29sZS5pbmZvKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogX3NldHVwT2JzZXJ2ZXIgUGVlciBEYXRhOiIsIHBlZXJEYXRhKTsKCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnY29ubmVjdGlvbkRlc2NyaXB0aW9uJykpIHsKICAgICAgICB0aGlzLl9wcm9jZXNzUGVlckluZm9ybWF0aW9uKHBlZXJEYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChwZWVyRGF0YS5oYXNPd25Qcm9wZXJ0eSgnaWNlQ2FuZGlkYXRlcycpKSB7CiAgICAgICAgcGVlckRhdGEuaWNlQ2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpY2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogaGFuZGxlT2JzZXJ2ZXJPYmplY3QgZm9yIGljZSIsIGljZSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oaWNlKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gc2V0dXAgbGlzdGVuZXIgZm9yIGZ1dHVyZSBjaGFuZ2VzIG9uIHRoZSBvYnNlcnZlZCBkYXRhIG9iamVjdAogICAgICBkYXRhT2JqZWN0T2JzZXJ2ZXIub25DaGFuZ2UoJyonLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBjb25zb2xlLmRlYnVnKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogT2JzZXJ2ZXIgb24gY2hhbmdlIG1lc3NhZ2U6ICcsIGV2ZW50KTsKICAgICAgICAvLyB3ZSBuZWVkIHRvIHByb2Nlc3MgdGhlIGFuc3dlciBmcm9tIGV2ZW50LmRhdGEgYW5kIHRoZSBjYW5kaWRhdGVzIHdoaWNoIG1pZ2h0IHRyaWNrbGUKICAgICAgICAvLyBmcm9tIGV2ZW50LmRhdGFbMF0KICAgICAgICBpZiAoZXZlbnQuZGF0YVswXSkgewogICAgICAgICAgLy8gWzBdIHRoaXMgZG9lcyB0aGUgdHJpY2sgd2hlbiBpY2UgY2FuZGlkYXRlcyBhcmUgdHJpY2tsaW5nIDspCiAgICAgICAgICBjb25zb2xlLmxvZygnPj5ldmVudC5kYXRhWzBdJywgZXZlbnQuZGF0YVswXSk7CiAgICAgICAgICBfdGhpczUuX3Byb2Nlc3NQZWVySW5mb3JtYXRpb24oZXZlbnQuZGF0YVswXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogPj5ldmVudCcsIGV2ZW50KTsKICAgICAgICAgIF90aGlzNS5fcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihldmVudC5kYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19wcm9jZXNzUGVlckluZm9ybWF0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJvY2Vzc1BlZXJJbmZvcm1hdGlvbihkYXRhKSB7CiAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246ICIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsKICAgICAgaWYgKCF0aGlzLl9wZWVyQ29ubmVjdGlvbikgewogICAgICAgIGNvbnNvbGUuaW5mbygiW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl06IHByb2Nlc3NQZWVySW5mb3JtYXRpb246IG5vIFBlZXJDb25uZWN0aW9uIGV4aXN0aW5nIC0tPiBtYXliZSBpbiBkaXNjb25uZWN0aW5nIHByb2Nlc3MuIC0tPiBpZ25vcmluZyB0aGlzIHVwZGF0ZSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ29mZmVyJyB8fCBkYXRhLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogUHJvY2VzcyBDb25uZWN0aW9uIERlc2NyaXB0aW9uOiAnLCBkYXRhKTsKICAgICAgICB0aGlzLl9wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXTogcmVtb3RlIHN1Y2Nlc3MiKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coIltQMlAtQ29ubmVjdGlvbkNvbnRyb2xsZXJdOiByZW1vdGUgZXJyb3I6ICIsIGUpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoZGF0YS5jYW5kaWRhdGUpIHsKICAgICAgICBjb25zb2xlLmluZm8oJ1Byb2Nlc3MgSWNlIENhbmRpZGF0ZTogJywgZGF0YSk7CiAgICAgICAgdGhpcy5fcGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKG5ldyBSVENJY2VDYW5kaWRhdGUoewogICAgICAgICAgY2FuZGlkYXRlOiBkYXRhLmNhbmRpZGF0ZQogICAgICAgIH0pKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsT3BlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRGF0YUNoYW5uZWxPcGVuKCkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgb3BlbmVkJyk7CiAgICAgIGlmICh0aGlzLl9vblN0YXR1c1VwZGF0ZSkgdGhpcy5fb25TdGF0dXNVcGRhdGUoImxpdmUiLCB1bmRlZmluZWQsIHRoaXMuX3JlbW90ZVJ1bnRpbWVVUkwpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsRXJyb3InLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRhdGFDaGFubmVsRXJyb3IoZSkgewogICAgICBjb25zb2xlLmxvZygnW1AyUC1Db25uZWN0aW9uQ29udHJvbGxlcl0gRGF0YUNoYW5uZWwgZXJyb3I6ICcsIGUpOwogICAgICBpZiAodGhpcy5fb25TdGF0dXNVcGRhdGUpIHRoaXMuX29uU3RhdHVzVXBkYXRlKCJkaXNjb25uZWN0ZWQiLCAiIiArIGUpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkRhdGFDaGFubmVsQ2xvc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRhdGFDaGFubmVsQ2xvc2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdbUDJQLUNvbm5lY3Rpb25Db250cm9sbGVyXSBEYXRhQ2hhbm5lbCBjbG9zZWQ6ICcpOwogICAgICBpZiAodGhpcy5fb25TdGF0dXNVcGRhdGUpIHRoaXMuX29uU3RhdHVzVXBkYXRlKCJkaXNjb25uZWN0ZWQiLCAiY2xvc2VkIik7CiAgICB9CgogICAgLyoqCiAgICAgKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkKICAgICAqIEBwYXJhbSAge1VSTC5VUkx9IHVybCAtIHVybCBhZGRyZXNzCiAgICAgKiBAcmV0dXJuIHtkaXZpZGVVUkx9IHRoZSByZXN1bHQgb2YgZGl2aWRlVVJMCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnX2RpdmlkZVVSTCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RpdmlkZVVSTCh1cmwpIHsKCiAgICAgIC8vIGxldCByZSA9IC8oW2EtekEtWi1dKik/OlwvXC8oPzpcLik/KFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9XC5bYS16XXsyLDZ9XGIpKihcL1tcL1xkXHdcLi1dKikqKD86W1w/XSkqKC4rKSovZ2k7CiAgICAgIHZhciByZSA9IC8oW2EtekEtWi1dKik6XC9cLyg/OlwuKT8oWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpOwogICAgICB2YXIgc3Vic3QgPSAnJDEsJDIsJDMnOwogICAgICB2YXIgcGFydHMgPSB1cmwucmVwbGFjZShyZSwgc3Vic3QpLnNwbGl0KCcsJyk7CgogICAgICAvLyBJZiB0aGUgdXJsIGhhcyBubyBwcm90b2NvbCwgdGhlIGRlZmF1bHQgcHJvdG9jb2wgc2V0IGlzIGh0dHBzCiAgICAgIGlmIChwYXJ0c1swXSA9PT0gdXJsKSB7CiAgICAgICAgcGFydHNbMF0gPSAnaHR0cHMnOwogICAgICAgIHBhcnRzWzFdID0gdXJsOwogICAgICB9CgogICAgICB2YXIgcmVzdWx0ID0gewogICAgICAgIHR5cGU6IHBhcnRzWzBdLAogICAgICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICAgICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgICAgIH07CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIENvbm5lY3Rpb25Db250cm9sbGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBDb25uZWN0aW9uQ29udHJvbGxlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsid2VicnRjLWFkYXB0ZXIiOjN9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCmV4cG9ydHMuZGVmYXVsdCA9IGFjdGl2YXRlOwoKdmFyIF9TeW5jaGVyID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9TeW5jaGVyJyk7Cgp2YXIgX0Nvbm5lY3Rpb25Db250cm9sbGVyID0gcmVxdWlyZSgnLi9Db25uZWN0aW9uQ29udHJvbGxlcicpOwoKdmFyIF9Db25uZWN0aW9uQ29udHJvbGxlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25uZWN0aW9uQ29udHJvbGxlcik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsgfSB9CgovLyBUT0RPOiBpbnRlZ3JhdGUgdGhlIHN0YXR1cyBldmVudGluZwoKLyoqCiAqIFByb3RvU3R1YiBJbnRlcmZhY2UKICovCnZhciBQMlBSZXF1ZXN0ZXJTdHViID0gZnVuY3Rpb24gKCkgewoKICAvKioKICAgKiBJbml0aWFsaXNlIHRoZSBwcm90b2NvbCBzdHViIGluY2x1ZGluZyBhcyBpbnB1dCBwYXJhbWV0ZXJzIGl0cyBhbGxvY2F0ZWQKICAgKiBjb21wb25lbnQgcnVudGltZSB1cmwsIHRoZSBydW50aW1lIEJVUyBwb3N0TWVzc2FnZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkCiAgICogb24gbWVzc2FnZXMgcmVjZWl2ZWQgYnkgdGhlIHByb3RvY29sIHN0dWIgYW5kIHJlcXVpcmVkIGNvbmZpZ3VyYXRpb24gcmV0cmlldmVkIGZyb20gcHJvdG9jb2xTdHViIGRlc2NyaXB0b3IuCiAgICogQHBhcmFtICB7VVJMLnJ1bnRpbWVQcm90b1N0dWJVUkx9ICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uCiAgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCiAgICovCiAgZnVuY3Rpb24gUDJQUmVxdWVzdGVyU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBtaW5pQnVzLCBjb25maWd1cmF0aW9uKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQMlBSZXF1ZXN0ZXJTdHViKTsKCiAgICBpZiAoIXJ1bnRpbWVQcm90b1N0dWJVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIHJ1bnRpbWVQcm90b1N0dWJVUkwgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghbWluaUJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgYnVzIGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKICAgIC8vIGlmICghY29uZmlndXJhdGlvbi5wMnBIYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwMnBIYW5kbGVyIGlzIGEgcmVxdWlyZWQgYXR0cmlidXRlIGluIHRoZSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcicpOwoKICAgIGNvbnNvbGUubG9nKCcrW1AyUFJlcXVlc3RlclN0dWIuY29uc3RydWN0b3JdIGNvbmZpZyBpczogJywgY29uZmlndXJhdGlvbik7CiAgICB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgIHRoaXMuX3J1bnRpbWVVUkwgPSBjb25maWd1cmF0aW9uLnJ1bnRpbWVVUkw7CiAgICB0aGlzLl9yZW1vdGVSdW50aW1lVVJMID0gY29uZmlndXJhdGlvbi5yZW1vdGVSdW50aW1lVVJMOyAvLyByZXF1aXJlZCBmb3Igc3RhdHVzIGV2ZW50cwogICAgdGhpcy5fY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247CiAgICB0aGlzLl9idXMgPSBtaW5pQnVzOwogICAgdGhpcy5fYnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICBfdGhpcy5fc2VuZENoYW5uZWxNc2cobXNnKTsKICAgIH0pOwoKICAgIHRoaXMuX3N5bmNoZXIgPSBuZXcgX1N5bmNoZXIuU3luY2hlcihydW50aW1lUHJvdG9TdHViVVJMLCBtaW5pQnVzLCBjb25maWd1cmF0aW9uKTsKICAgIHRoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyID0gbmV3IF9Db25uZWN0aW9uQ29udHJvbGxlcjIuZGVmYXVsdCh0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMLCB0aGlzLl9zeW5jaGVyLCB0aGlzLl9jb25maWd1cmF0aW9uLCB0cnVlKTsKICAgIHRoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyLm9uU3RhdHVzVXBkYXRlKGZ1bmN0aW9uIChzdGF0dXMsIHJlYXNvbikgewogICAgICBfdGhpcy5fc2VuZFN0YXR1cyhzdGF0dXMsIHJlYXNvbik7CiAgICB9KTsKCiAgICB0aGlzLl9zeW5jaGVyLm9uTm90aWZpY2F0aW9uKGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnK1tQMlBSZXF1ZXN0ZXJTdHViXSBPbiBTeW5jaGVyIE5vdGlmaWNhdGlvbjogJywgZXZlbnQpOwogICAgICBldmVudC5hY2soMjAwKTsKCiAgICAgIHN3aXRjaCAoZXZlbnQudHlwZSkgewoKICAgICAgICBjYXNlICdjcmVhdGUnOgogICAgICAgICAgLy8gaW5jb21pbmcgb2JzZXJ2ZSBpbnZpdGF0aW9uIGZyb20gcGVlcgogICAgICAgICAgaWYgKF90aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcikgewogICAgICAgICAgICBfdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXIub2JzZXJ2ZShldmVudCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIitbUDJQUmVxdWVzdGVyU3R1Yl0gb2JzZXJ2ZXIgY3JlYXRlZCAiKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnZGVsZXRlJzoKICAgICAgICAgIC8vIFRPRE86IHF1ZXN0aW9uIHJlZ2FyZGluZyBjb2RlIGluIENvbm5lY3RvcjogLS0+IHRoZXJlIGl0IGRlbGV0ZXMgYWxsIGNvbnRyb2xsZXJzIC0tPiB3aHk/CiAgICAgICAgICBjb25zb2xlLmxvZygiK1tQMlBSZXF1ZXN0ZXJTdHViXSBkZWxldGluZyBjb25uZWN0aW9uIGhhbmRsZXIgZm9yICIgKyBldmVudC5mcm9tKTsKCiAgICAgICAgICBkaXNjb25uZWN0KCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgfQogICAgfSk7CgogICAgdGhpcy5fc2VuZFN0YXR1cygiY3JlYXRlIik7CgogICAgLy8gdGhlIHRhcmdldCBoYW5kbGVyIHN0dWIgdXJsIG11c3QgYmUgcHJlc2VudCBpbiB0aGUgY29uZmlndXJhdGlvbiBhcyAicDJwSGFuZGxlciIgYXR0cmlidXRlCiAgICBpZiAodGhpcy5fY29uZmlndXJhdGlvbi5wMnBIYW5kbGVyKSB0aGlzLmNvbm5lY3QodGhpcy5fY29uZmlndXJhdGlvbi5wMnBIYW5kbGVyKTsKICB9CgogIF9jcmVhdGVDbGFzcyhQMlBSZXF1ZXN0ZXJTdHViLCBbewogICAga2V5OiAnY29ubmVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdChoYW5kbGVyVVJMKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5fY29ubmVjdGlvbkNvbnRyb2xsZXIucmVwb3J0KGhhbmRsZXJVUkwsIHRoaXMuX3J1bnRpbWVVUkwpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIC8vIHNlbmQgImluLXByb2dyZXNzIiBldmVudCwgaWYgdGhlIHN5bmNoZXIuY3JlYXRlIHdhcyBkb25lCiAgICAgICAgX3RoaXMyLl9zZW5kU3RhdHVzKCJpbi1wcm9ncmVzcyIpOwogICAgICAgIF90aGlzMi5fY29ubmVjdGlvbkNvbnRyb2xsZXIub25NZXNzYWdlKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiK1tQMlBSZXF1ZXN0ZXJTdHViXSBvbk1lc3NhZ2U6ICIsIG0pOwogICAgICAgICAgX3RoaXMyLl9kZWxpdmVyKG0pOwogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCIrW1AyUFJlcXVlc3RlclN0dWJdIHNldHVwIHJlcG9ydGVyIG9iamVjdCBzdWNjZXNzZnVsbHkiKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUbyBkaXNjb25uZWN0IHRoZSBwcm90b2NvbCBzdHViLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2Rpc2Nvbm5lY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgIGlmICh0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlcikgewogICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyLmNsZWFudXAoKTsKICAgICAgICB0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlciA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZENoYW5uZWxNc2cnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kQ2hhbm5lbE1zZyhtc2cpIHsKICAgICAgaWYgKHRoaXMuX2ZpbHRlcihtc2cpKSB7CiAgICAgICAgaWYgKHRoaXMuX2Nvbm5lY3Rpb25Db250cm9sbGVyKSB7CiAgICAgICAgICB0aGlzLl9jb25uZWN0aW9uQ29udHJvbGxlci5zZW5kTWVzc2FnZShKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZFN0YXR1cycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRTdGF0dXModmFsdWUsIHJlYXNvbikgewogICAgICB2YXIgbXNnID0gewogICAgICAgIHR5cGU6ICd1cGRhdGUnLAogICAgICAgIGZyb206IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgdG86IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgYm9keTogewogICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgcmVzb3VyY2U6IHRoaXMuX3JlbW90ZVJ1bnRpbWVVUkwKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmIChyZWFzb24pIHsKICAgICAgICBtc2cuYm9keS5kZXNjID0gcmVhc29uOwogICAgICB9CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICBjb25zb2xlLmxvZygiK1tQMlByZXF1ZXN0ZXJTdHViXSBzZW5kaW5nIHN0YXR1cyB1cGRhdGU6ICIsIG1zZyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBGaWx0ZXIgbWV0aG9kIHRoYXQgc2hvdWxkIGJlIHVzZWQgZm9yIGV2ZXJ5IG1lc3NhZ2VzIGluIGRpcmVjdGlvbjogUHJvdG9zdHViIC0+IE1lc3NhZ2VOb2RlCiAgICAgKiBAcGFyYW0gIHtNZXNzYWdlfSBtc2cgT3JpZ2luYWwgbWVzc2FnZSBmcm9tIHRoZSBNZXNzYWdlQnVzCiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIGl0J3MgdG8gYmUgZGVsaXZlciBpbiB0aGUgTWVzc2FnZU5vZGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfZmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlsdGVyKG1zZykgewogICAgICBpZiAobXNnLmJvZHkgJiYgbXNnLmJvZHkudmlhID09PSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIC8qKgogICAgICogTWV0aG9kIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gZGVsaXZlciB0aGUgbWVzc2FnZSBpbiBkaXJlY3Rpb246IFByb3Rvc3R1YiAtPiBNZXNzYWdlQnVzIChjb3JlKQogICAgICogQHBhcmFtICB7TWVzc2FnZX0gbXNnIE9yaWdpbmFsIG1lc3NhZ2UgZnJvbSB0aGUgTWVzc2FnZU5vZGUKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdfZGVsaXZlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGl2ZXIobXNnKSB7CiAgICAgIGNvbnNvbGUubG9nKCIrW1AyUHJlcXVlc3RlclN0dWJdIHBvc3RpbmcgbWVzc2FnZSB0byBtc2cgYnVzOiAiLCBtc2cpOwoKICAgICAgdmFyIG1lc3NhZ2UgPSBKU09OLnBhcnNlKG1zZy5kYXRhKTsKCiAgICAgIGlmICghbWVzc2FnZS5ib2R5KSBtc2cuYm9keSA9IHt9OwoKICAgICAgbWVzc2FnZS5ib2R5LnZpYSA9IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtZXNzYWdlKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQMlBSZXF1ZXN0ZXJTdHViOwp9KCk7CgpmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdQMlBSZXF1ZXN0ZXJTdHViJywKICAgIGluc3RhbmNlOiBuZXcgUDJQUmVxdWVzdGVyU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi9Db25uZWN0aW9uQ29udHJvbGxlciI6MTIsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlciI6Mn1dfSx7fSxbMTNdKSgxMykKfSk7",
      "sourceCodeClassname": "P2PRequesterProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-c28037a6-8d59-ddbd-c208-d45c1334b92c3",
    "version": 0.7999999999999999,
    "description": "Description of P2PRequesterProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "P2PRequesterProtoStub",
    "configuration": {
      "iceServers": [
        {
          "urls": "stun:stun.voiparound.com"
        },
        {
          "urls": "stun:stun.voipbuster.com"
        },
        {
          "urls": "stun:stun.voipstunt.com"
        },
        {
          "urls": "stun:stun.voxgratia.org"
        },
        {
          "urls": "stun:stun.ekiga.net"
        },
        {
          "urls": "stun:stun.schlund.de"
        },
        {
          "urls": "stun:stun.iptel.org"
        },
        {
          "urls": "stun:stun.l.google.com:19302"
        },
        {
          "urls": "stun:stun1.l.google.com:19302"
        },
        {
          "urls": "stun:stun.ideasip.com"
        },
        {
          "urls": "stun:stun4.l.google.com:19302"
        },
        {
          "urls": "stun:stun2.l.google.com:19302"
        },
        {
          "urls": "stun:stun3.l.google.com:19302"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=tcp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:192.158.29.39:3478?transport=udp",
          "credential": "JZEOEt2V3Qb0y27GRntt2u2PAYA=",
          "username": "28224511:1379330808"
        },
        {
          "urls": "turn:numb.viagenie.ca",
          "credential": "muazkh",
          "username": "webrtc@live.com"
        }
      ]
    },
    "messageSchemas": "",
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": "{ windowSandbox: true }",
    "interworking": false,
    "dataObjects": []
  },
  "SlackProtoStub": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHsKCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykKCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKCWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKQoJCWRlZmluZSgiYWN0aXZhdGUiLCBbXSwgZmFjdG9yeSk7CgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQlleHBvcnRzWyJhY3RpdmF0ZSJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbImFjdGl2YXRlIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pCi8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwovKioqKioqLwovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKLyoqKioqKi8gCQkJbDogZmFsc2UsCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9Ci8qKioqKiovIAkJfTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwovKioqKioqLwovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwovKioqKioqLyAJfQovKioqKioqLwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHQKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgewovKioqKioqLyAJCQkJY29uZmlndXJhYmxlOiBmYWxzZSwKLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcgovKioqKioqLyAJCQl9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgewovKioqKioqLyAJCXZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPwovKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOgovKioqKioqLyAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9OwovKioqKioqLyAJCV9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTsKLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOwovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9OwovKioqKioqLwovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwovKioqKioqLwovKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCi8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMjkpOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OwoKZXhwb3J0cy5kZWZhdWx0ID0gZXhlYzsKCnZhciBfdGlueUpzb25IdHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzQpOwoKdmFyIF90aW55SnNvbkh0dHAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGlueUpzb25IdHRwKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiBleGVjKHVybCwgZm9ybSwgY2FsbGJhY2spIHsKCiAgLy8gc3RyaW5naWZ5IGFueSBvYmplY3RzIHVuZGVyIGtleXMgc2luY2UgZm9ybSBpcyBwb3N0ZWQgYXMgYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkCiAgT2JqZWN0LmtleXMoZm9ybSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICBpZiAoX3R5cGVvZihmb3JtW2tleV0pID09PSAnb2JqZWN0JykgewogICAgICBmb3JtW2tleV0gPSBKU09OLnN0cmluZ2lmeShmb3JtW2tleV0pOwogICAgfQogIH0pOwoKICAvLyBhbHdheXMgcG9zdAogIF90aW55SnNvbkh0dHAyLmRlZmF1bHQucG9zdCh7CiAgICB1cmw6ICdodHRwczovL3NsYWNrLmNvbS9hcGkvJyArIHVybCwKICAgIGhlYWRlcnM6IHsKICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICB9LAogICAgZGF0YTogZm9ybQogIH0sIGZ1bmN0aW9uIF9yZXMoZXJyLCByZXMpIHsKICAgIC8vIHZhciByYXRlTGltaXQgPSAnWW91IGFyZSBzZW5kaW5nIHRvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2UgcmVsYXguJwogICAgaWYgKGVycikgewogICAgICAvLyBpZiByZXF1ZXN0IGZhaWxlZCBidWJibGUgdGhlIGVycm9yCiAgICAgIGNhbGxiYWNrKGVycik7CiAgICB9IGVsc2UgaWYgKHJlcy5ib2R5ICYmIHJlcy5ib2R5LmVycm9yKSB7CiAgICAgIGNhbGxiYWNrKEVycm9yKHJlcy5ib2R5LmVycm9yKSk7CiAgICB9IGVsc2UgewogICAgICBjYWxsYmFjayhudWxsLCByZXMuYm9keSk7CiAgICB9CiAgfSk7Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2YWxpZGF0ZTsKCnZhciBfYXBpID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzMpOwoKdmFyIF9hcGkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBpKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpmdW5jdGlvbiB2YWxpZGF0ZShtZXRob2QsIHBhcmFtcykgewogIC8vIGdldCBhbGwgdGhlIHJlcXVyaWVkIHBhcmFtcyBmb3IgdGhpcyBtZXRob2QKICB2YXIgcmVxdWlyZWQgPSBfYXBpMi5kZWZhdWx0W21ldGhvZF0uZmlsdGVyKGZ1bmN0aW9uIChwYXJhbSkgewogICAgcmV0dXJuIHBhcmFtLnJlcXVpcmVkID09PSAnUmVxdWlyZWQnOwogIH0pOwogIC8vIGNvbGxlY3QgYW55IG1pc3NpbmcgcGFyYW1zCiAgdmFyIG1pc3NpbmcgPSByZXF1aXJlZC5maWx0ZXIoZnVuY3Rpb24gKHBhcmFtKSB7CiAgICByZXR1cm4gdHlwZW9mIHBhcmFtc1twYXJhbS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCc7CiAgfSk7CiAgLy8gb3B0aW1pc2l0Y2FsbHkgYXNzdW1lIHRoZSBiZXN0CiAgdmFyIGVyciA9IGZhbHNlOwogIC8vIGJ1dCBoYXZlIGEgcGxhbiBmb3IgdGhlIHdvcnN0CiAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7CiAgICB2YXIgYnVsbGV0cyA9IG1pc3NpbmcubWFwKGZ1bmN0aW9uIChwYXJhbSkgewogICAgICByZXR1cm4gJy0gJyArIHBhcmFtLm5hbWUgKyAnIC4uLiAnICsgcGFyYW0uZGVzY3JpcHRpb247CiAgICB9KTsKICAgIHZhciBtc2cgPSBtZXRob2QgKyAnIG1pc3NpbmcgcGFyYW1zOlxuJyArIGJ1bGxldHMuam9pbignXG4nKTsKICAgIGVyciA9IEVycm9yKG1zZyk7CiAgfQogIHJldHVybiBlcnI7Cn0gLy8KLy8gdmFsaWRhdGUgcmV0dXJucyBhbiBlcnJvciBvYmplY3QgaWYgYW55IHJlcXVpcmVkIHBhcmFtcyBhcmUgbWlzc2luZwovLwovLyBleGFtcGxlIHVzYWdlOgovLyAKLy8gICAvLyB0b2tlbiBhbmQgaWQgYXJlIHJlcXVpcmVkIHBhcmFtcwovLyAgIGZ1bmN0aW9uIGFwaUNhbGwocGFyYW1zLCBjYWxsYmFjaykgeyAKLy8gICAgIGxldCBlcnIgPSB2YWxpZGF0ZSgnYXBpLnNpZ25hdHVyZScsIHBhcmFtcykKLy8gICAgIGlmIChlcnIpIHsKLy8gICAgICAgY2FsbGJhY2soZXJyKQovLyAgICAgfQovLyAgICAgZWxzZSB7Ci8vICAgICAgIC8vIGRvIGFwaSBjYWxsCi8vICAgICB9Ci8vICAgfQovLwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgey8qIQogKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci4KICoKICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+CiAqIEBsaWNlbnNlICBNSVQKICovCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCgoKCnZhciBiYXNlNjQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMCkKdmFyIGllZWU3NTQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMikKdmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQoKZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXIKZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcgpleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTAKCi8qKgogKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOgogKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KQogKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpCiAqCiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKywKICogT3BlcmEgMTEuNissIGlPUyA0LjIrLgogKgogKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuCiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLgogKgogKiBOb3RlOgogKgogKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLAogKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguCiAqCiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLgogKgogKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZgogKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuCgogKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleQogKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS4KICovCkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQgIT09IHVuZGVmaW5lZAogID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlQKICA6IHR5cGVkQXJyYXlTdXBwb3J0KCkKCi8qCiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC4KICovCmV4cG9ydHMua01heExlbmd0aCA9IGtNYXhMZW5ndGgoKQoKZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkgewogIHRyeSB7CiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSkKICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fQogICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWQKICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YAogICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgCiAgfSBjYXRjaCAoZSkgewogICAgcmV0dXJuIGZhbHNlCiAgfQp9CgpmdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHsKICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQKICAgID8gMHg3ZmZmZmZmZgogICAgOiAweDNmZmZmZmZmCn0KCmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAodGhhdCwgbGVuZ3RoKSB7CiAgaWYgKGtNYXhMZW5ndGgoKSA8IGxlbmd0aCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJykKICB9CiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2UKICAgIHRoYXQgPSBuZXcgVWludDhBcnJheShsZW5ndGgpCiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKICB9IGVsc2UgewogICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzcwogICAgaWYgKHRoYXQgPT09IG51bGwpIHsKICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKQogICAgfQogICAgdGhhdC5sZW5ndGggPSBsZW5ndGgKICB9CgogIHJldHVybiB0aGF0Cn0KCi8qKgogKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXIKICogcHJvdG90eXBlIGNoYW5nZWQgdG8gYEJ1ZmZlci5wcm90b3R5cGVgLiBGdXJ0aGVybW9yZSwgYEJ1ZmZlcmAgaXMgYSBzdWJjbGFzcyBvZgogKiBgVWludDhBcnJheWAsIHNvIHRoZSByZXR1cm5lZCBpbnN0YW5jZXMgd2lsbCBoYXZlIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBtZXRob2RzCiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0CiAqIHJldHVybnMgYSBzaW5nbGUgb2N0ZXQuCiAqCiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC4KICovCgpmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7CiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKICB9CgogIC8vIENvbW1vbiBjYXNlLgogIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykgewogICAgaWYgKHR5cGVvZiBlbmNvZGluZ09yT2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJwogICAgICApCiAgICB9CiAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKQogIH0KICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKfQoKQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uCgovLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi4KQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikgewogIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlCiAgcmV0dXJuIGFycgp9CgpmdW5jdGlvbiBmcm9tICh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJ2YWx1ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKQogIH0KCiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewogICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKQogIH0KCiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgIHJldHVybiBmcm9tU3RyaW5nKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0KQogIH0KCiAgcmV0dXJuIGZyb21PYmplY3QodGhhdCwgdmFsdWUpCn0KCi8qKgogKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvcgogKiBpZiB2YWx1ZSBpcyBhIG51bWJlci4KICogQnVmZmVyLmZyb20oc3RyWywgZW5jb2RpbmddKQogKiBCdWZmZXIuZnJvbShhcnJheSkKICogQnVmZmVyLmZyb20oYnVmZmVyKQogKiBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlclssIGJ5dGVPZmZzZXRbLCBsZW5ndGhdXSkKICoqLwpCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGZyb20obnVsbCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkKfQoKaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZQogIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5CiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC5zcGVjaWVzICYmCiAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikgewogICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTcKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIsIFN5bWJvbC5zcGVjaWVzLCB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICBjb25maWd1cmFibGU6IHRydWUKICAgIH0pCiAgfQp9CgpmdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignInNpemUiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKQogIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKQogIH0KfQoKZnVuY3Rpb24gYWxsb2MgKHRoYXQsIHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CiAgYXNzZXJ0U2l6ZShzaXplKQogIGlmIChzaXplIDw9IDApIHsKICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkKICB9CiAgaWYgKGZpbGwgIT09IHVuZGVmaW5lZCkgewogICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXMKICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGQKICAgIC8vIGJlIGludGVycHJldHRlZCBhcyBhIHN0YXJ0IG9mZnNldC4KICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnCiAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpCiAgICAgIDogY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCkKICB9CiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKQp9CgovKioKICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLgogKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pCiAqKi8KQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7CiAgcmV0dXJuIGFsbG9jKG51bGwsIHNpemUsIGZpbGwsIGVuY29kaW5nKQp9CgpmdW5jdGlvbiBhbGxvY1Vuc2FmZSAodGhhdCwgc2l6ZSkgewogIGFzc2VydFNpemUoc2l6ZSkKICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKQogIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7CiAgICAgIHRoYXRbaV0gPSAwCiAgICB9CiAgfQogIHJldHVybiB0aGF0Cn0KCi8qKgogKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLgogKiAqLwpCdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkgewogIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKQp9Ci8qKgogKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS4KICovCkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkgewogIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKQp9CgpmdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7CiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7CiAgICBlbmNvZGluZyA9ICd1dGY4JwogIH0KCiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJlbmNvZGluZyIgbXVzdCBiZSBhIHZhbGlkIHN0cmluZyBlbmNvZGluZycpCiAgfQoKICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDAKICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbmd0aCkKCiAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZykKCiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7CiAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGwKICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuCiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJykKICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbCkKICB9CgogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7CiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMAogIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHsKICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NQogIH0KICByZXR1cm4gdGhhdAp9CgpmdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHsKICBhcnJheS5ieXRlTGVuZ3RoIC8vIHRoaXMgdGhyb3dzIGlmIGBhcnJheWAgaXMgbm90IGEgdmFsaWQgQXJyYXlCdWZmZXIKCiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCdvZmZzZXRcJyBpcyBvdXQgb2YgYm91bmRzJykKICB9CgogIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ2xlbmd0aFwnIGlzIG91dCBvZiBib3VuZHMnKQogIH0KCiAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkgewogICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSkKICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7CiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KQogIH0gZWxzZSB7CiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpCiAgfQoKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZQogICAgdGhhdCA9IGFycmF5CiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKICB9IGVsc2UgewogICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzcwogICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpCiAgfQogIHJldHVybiB0aGF0Cn0KCmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iaikgewogIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkgewogICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwCiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbikKCiAgICBpZiAodGhhdC5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIHRoYXQKICAgIH0KCiAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pCiAgICByZXR1cm4gdGhhdAogIH0KCiAgaWYgKG9iaikgewogICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmCiAgICAgICAgb2JqLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fCAnbGVuZ3RoJyBpbiBvYmopIHsKICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkgewogICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMCkKICAgICAgfQogICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopCiAgICB9CgogICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkgewogICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmouZGF0YSkKICAgIH0KICB9CgogIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKQp9CgpmdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHsKICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW4KICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLikKICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgoKSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKQogIH0KICByZXR1cm4gbGVuZ3RoIHwgMAp9CgpmdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHsKICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXEKICAgIGxlbmd0aCA9IDAKICB9CiAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKQp9CgpCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikgewogIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpCn0KCkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikgewogIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKQogIH0KCiAgaWYgKGEgPT09IGIpIHJldHVybiAwCgogIHZhciB4ID0gYS5sZW5ndGgKICB2YXIgeSA9IGIubGVuZ3RoCgogIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7CiAgICBpZiAoYVtpXSAhPT0gYltpXSkgewogICAgICB4ID0gYVtpXQogICAgICB5ID0gYltpXQogICAgICBicmVhawogICAgfQogIH0KCiAgaWYgKHggPCB5KSByZXR1cm4gLTEKICBpZiAoeSA8IHgpIHJldHVybiAxCiAgcmV0dXJuIDAKfQoKQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykgewogIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CiAgICBjYXNlICdoZXgnOgogICAgY2FzZSAndXRmOCc6CiAgICBjYXNlICd1dGYtOCc6CiAgICBjYXNlICdhc2NpaSc6CiAgICBjYXNlICdsYXRpbjEnOgogICAgY2FzZSAnYmluYXJ5JzoKICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICBjYXNlICd1Y3MyJzoKICAgIGNhc2UgJ3Vjcy0yJzoKICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgY2FzZSAndXRmLTE2bGUnOgogICAgICByZXR1cm4gdHJ1ZQogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIGZhbHNlCiAgfQp9CgpCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHsKICBpZiAoIWlzQXJyYXkobGlzdCkpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKQogIH0KCiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7CiAgICByZXR1cm4gQnVmZmVyLmFsbG9jKDApCiAgfQoKICB2YXIgaQogIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkgewogICAgbGVuZ3RoID0gMAogICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHsKICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoCiAgICB9CiAgfQoKICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aCkKICB2YXIgcG9zID0gMAogIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7CiAgICB2YXIgYnVmID0gbGlzdFtpXQogICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcibGlzdCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJykKICAgIH0KICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKQogICAgcG9zICs9IGJ1Zi5sZW5ndGgKICB9CiAgcmV0dXJuIGJ1ZmZlcgp9CgpmdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7CiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKSB7CiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aAogIH0KICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgQXJyYXlCdWZmZXIuaXNWaWV3ID09PSAnZnVuY3Rpb24nICYmCiAgICAgIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBzdHJpbmcgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpIHsKICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aAogIH0KICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHsKICAgIHN0cmluZyA9ICcnICsgc3RyaW5nCiAgfQoKICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aAogIGlmIChsZW4gPT09IDApIHJldHVybiAwCgogIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvbgogIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlCiAgZm9yICg7OykgewogICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICBjYXNlICdhc2NpaSc6CiAgICAgIGNhc2UgJ2xhdGluMSc6CiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgcmV0dXJuIGxlbgogICAgICBjYXNlICd1dGY4JzoKICAgICAgY2FzZSAndXRmLTgnOgogICAgICBjYXNlIHVuZGVmaW5lZDoKICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGgKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gbGVuICogMgogICAgICBjYXNlICdoZXgnOgogICAgICAgIHJldHVybiBsZW4gPj4+IDEKICAgICAgY2FzZSAnYmFzZTY0JzoKICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aAogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4CiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKQogICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZQogICAgfQogIH0KfQpCdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGgKCmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHsKICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZQoKICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0ICJ0aGlzLmxlbmd0aCA8PSBNQVhfVUlOVDMyIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5CiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS4KCiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kCiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLgogIC8vIHVuZGVmaW5lZCBpcyBoYW5kbGVkIHNwZWNpYWxseSBhcyBwZXIgRUNNQS0yNjIgNnRoIEVkaXRpb24sCiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uCiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7CiAgICBzdGFydCA9IDAKICB9CiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzIKICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LgogIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7CiAgICByZXR1cm4gJycKICB9CgogIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgewogICAgZW5kID0gdGhpcy5sZW5ndGgKICB9CgogIGlmIChlbmQgPD0gMCkgewogICAgcmV0dXJuICcnCiAgfQoKICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLgogIGVuZCA+Pj49IDAKICBzdGFydCA+Pj49IDAKCiAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgcmV0dXJuICcnCiAgfQoKICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4JwoKICB3aGlsZSAodHJ1ZSkgewogICAgc3dpdGNoIChlbmNvZGluZykgewogICAgICBjYXNlICdoZXgnOgogICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAndXRmOCc6CiAgICAgIGNhc2UgJ3V0Zi04JzoKICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdhc2NpaSc6CiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZCkKCiAgICAgIGNhc2UgJ2xhdGluMSc6CiAgICAgIGNhc2UgJ2JpbmFyeSc6CiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBjYXNlICdiYXNlNjQnOgogICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKQoKICAgICAgY2FzZSAndWNzMic6CiAgICAgIGNhc2UgJ3Vjcy0yJzoKICAgICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzoKICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpCgogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKQogICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKCkKICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWUKICAgIH0KICB9Cn0KCi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0Ci8vIEJ1ZmZlciBpbnN0YW5jZXMuCkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZQoKZnVuY3Rpb24gc3dhcCAoYiwgbiwgbSkgewogIHZhciBpID0gYltuXQogIGJbbl0gPSBiW21dCiAgYlttXSA9IGkKfQoKQnVmZmVyLnByb3RvdHlwZS5zd2FwMTYgPSBmdW5jdGlvbiBzd2FwMTYgKCkgewogIHZhciBsZW4gPSB0aGlzLmxlbmd0aAogIGlmIChsZW4gJSAyICE9PSAwKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKQogIH0KICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7CiAgICBzd2FwKHRoaXMsIGksIGkgKyAxKQogIH0KICByZXR1cm4gdGhpcwp9CgpCdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7CiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoCiAgaWYgKGxlbiAlIDQgIT09IDApIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpCiAgfQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHsKICAgIHN3YXAodGhpcywgaSwgaSArIDMpCiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgMikKICB9CiAgcmV0dXJuIHRoaXMKfQoKQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkgewogIHZhciBsZW4gPSB0aGlzLmxlbmd0aAogIGlmIChsZW4gJSA4ICE9PSAwKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKQogIH0KICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7CiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KQogICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDYpCiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSkKICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KQogIH0KICByZXR1cm4gdGhpcwp9CgpCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkgewogIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDAKICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJycKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpCiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpCn0KCkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKQogIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZQogIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMAp9CgpCdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHsKICB2YXIgc3RyID0gJycKICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUwogIGlmICh0aGlzLmxlbmd0aCA+IDApIHsKICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpCiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnCiAgfQogIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nCn0KCkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpCiAgfQoKICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkgewogICAgc3RhcnQgPSAwCiAgfQogIGlmIChlbmQgPT09IHVuZGVmaW5lZCkgewogICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDAKICB9CiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7CiAgICB0aGlzU3RhcnQgPSAwCiAgfQogIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHsKICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aAogIH0KCiAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb3V0IG9mIHJhbmdlIGluZGV4JykKICB9CgogIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHsKICAgIHJldHVybiAwCiAgfQogIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCkgewogICAgcmV0dXJuIC0xCiAgfQogIGlmIChzdGFydCA+PSBlbmQpIHsKICAgIHJldHVybiAxCiAgfQoKICBzdGFydCA+Pj49IDAKICBlbmQgPj4+PSAwCiAgdGhpc1N0YXJ0ID4+Pj0gMAogIHRoaXNFbmQgPj4+PSAwCgogIGlmICh0aGlzID09PSB0YXJnZXQpIHJldHVybiAwCgogIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydAogIHZhciB5ID0gZW5kIC0gc3RhcnQKICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSkKCiAgdmFyIHRoaXNDb3B5ID0gdGhpcy5zbGljZSh0aGlzU3RhcnQsIHRoaXNFbmQpCiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZCkKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkgewogICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7CiAgICAgIHggPSB0aGlzQ29weVtpXQogICAgICB5ID0gdGFyZ2V0Q29weVtpXQogICAgICBicmVhawogICAgfQogIH0KCiAgaWYgKHggPCB5KSByZXR1cm4gLTEKICBpZiAoeSA8IHgpIHJldHVybiAxCiAgcmV0dXJuIDAKfQoKLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLAovLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLgovLwovLyBBcmd1bWVudHM6Ci8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoCi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyCi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMgovLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZwovLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZgpmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2gKICBpZiAoYnVmZmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xCgogIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0CiAgaWYgKHR5cGVvZiBieXRlT2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0CiAgICBieXRlT2Zmc2V0ID0gMAogIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHsKICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmCiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHsKICAgIGJ5dGVPZmZzZXQgPSAtMHg4MDAwMDAwMAogIH0KICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgIC8vIENvZXJjZSB0byBOdW1iZXIuCiAgaWYgKGlzTmFOKGJ5dGVPZmZzZXQpKSB7CiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCAiZm9vIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyCiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSkKICB9CgogIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyCiAgaWYgKGJ5dGVPZmZzZXQgPCAwKSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCArIGJ5dGVPZmZzZXQKICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7CiAgICBpZiAoZGlyKSByZXR1cm4gLTEKICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxCiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkgewogICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDAKICAgIGVsc2UgcmV0dXJuIC0xCiAgfQoKICAvLyBOb3JtYWxpemUgdmFsCiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7CiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKQogIH0KCiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2YKICBpZiAoQnVmZmVyLmlzQnVmZmVyKHZhbCkpIHsKICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHMKICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiAtMQogICAgfQogICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikKICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV0KICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJgogICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIGlmIChkaXIpIHsKICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KQogICAgICB9CiAgICB9CiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikKICB9CgogIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpCn0KCmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKICB2YXIgaW5kZXhTaXplID0gMQogIHZhciBhcnJMZW5ndGggPSBhcnIubGVuZ3RoCiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGgKCiAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHsKICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpCiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fAogICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHsKICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7CiAgICAgICAgcmV0dXJuIC0xCiAgICAgIH0KICAgICAgaW5kZXhTaXplID0gMgogICAgICBhcnJMZW5ndGggLz0gMgogICAgICB2YWxMZW5ndGggLz0gMgogICAgICBieXRlT2Zmc2V0IC89IDIKICAgIH0KICB9CgogIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkgewogICAgaWYgKGluZGV4U2l6ZSA9PT0gMSkgewogICAgICByZXR1cm4gYnVmW2ldCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKQogICAgfQogIH0KCiAgdmFyIGkKICBpZiAoZGlyKSB7CiAgICB2YXIgZm91bmRJbmRleCA9IC0xCiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkgewogICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGkKICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4CiAgICAgICAgZm91bmRJbmRleCA9IC0xCiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGgKICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPj0gMDsgaS0tKSB7CiAgICAgIHZhciBmb3VuZCA9IHRydWUKICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykgewogICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHsKICAgICAgICAgIGZvdW5kID0gZmFsc2UKICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGkKICAgIH0KICB9CgogIHJldHVybiAtMQp9CgpCdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMQp9CgpCdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpCn0KCkJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgewogIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSkKfQoKZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDAKICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldAogIGlmICghbGVuZ3RoKSB7CiAgICBsZW5ndGggPSByZW1haW5pbmcKICB9IGVsc2UgewogICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCkKICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHsKICAgICAgbGVuZ3RoID0gcmVtYWluaW5nCiAgICB9CiAgfQoKICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0cwogIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoCiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpCgogIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7CiAgICBsZW5ndGggPSBzdHJMZW4gLyAyCiAgfQogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpCiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgcmV0dXJuIGkKICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZAogIH0KICByZXR1cm4gaQp9CgpmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7CiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKQp9CgpmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHsKICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKQogIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkgewogICAgZW5jb2RpbmcgPSAndXRmOCcKICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoCiAgICBvZmZzZXQgPSAwCiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpCiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykgewogICAgZW5jb2RpbmcgPSBvZmZzZXQKICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoCiAgICBvZmZzZXQgPSAwCiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSkKICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHsKICAgIG9mZnNldCA9IG9mZnNldCB8IDAKICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7CiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDAKICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnCiAgICB9IGVsc2UgewogICAgICBlbmNvZGluZyA9IGxlbmd0aAogICAgICBsZW5ndGggPSB1bmRlZmluZWQKICAgIH0KICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzCiAgfSBlbHNlIHsKICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJwogICAgKQogIH0KCiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0CiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nCgogIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKQogIH0KCiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCcKCiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2UKICBmb3IgKDs7KSB7CiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgIGNhc2UgJ2hleCc6CiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpCgogICAgICBjYXNlICd1dGY4JzoKICAgICAgY2FzZSAndXRmLTgnOgogICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGNhc2UgJ2FzY2lpJzoKICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgY2FzZSAnbGF0aW4xJzoKICAgICAgY2FzZSAnYmluYXJ5JzoKICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGNhc2UgJ2Jhc2U2NCc6CiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGUKICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkKCiAgICAgIGNhc2UgJ3VjczInOgogICAgICBjYXNlICd1Y3MtMic6CiAgICAgIGNhc2UgJ3V0ZjE2bGUnOgogICAgICBjYXNlICd1dGYtMTZsZSc6CiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKQoKICAgICAgZGVmYXVsdDoKICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZykKICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpCiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlCiAgICB9CiAgfQp9CgpCdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7CiAgcmV0dXJuIHsKICAgIHR5cGU6ICdCdWZmZXInLAogICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApCiAgfQp9CgpmdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkgewogICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZikKICB9IGVsc2UgewogICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSkKICB9Cn0KCmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKQogIHZhciByZXMgPSBbXQoKICB2YXIgaSA9IHN0YXJ0CiAgd2hpbGUgKGkgPCBlbmQpIHsKICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV0KICAgIHZhciBjb2RlUG9pbnQgPSBudWxsCiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDQKICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzCiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMgogICAgICA6IDEKCiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7CiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnQKCiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7CiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZQogICAgICAgICAgfQogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXQogICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpCiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RikgewogICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYnJlYWsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXQogICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXQogICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7CiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKQogICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7CiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludAogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgNDoKICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdCiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdCiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXQogICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHsKICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpCiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkgewogICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkgewogICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhCiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGUKICAgICAgY29kZVBvaW50ID0gMHhGRkZECiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxCiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikgewogICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKQogICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMAogICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApCiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGCiAgICB9CgogICAgcmVzLnB1c2goY29kZVBvaW50KQogICAgaSArPSBieXRlc1BlclNlcXVlbmNlCiAgfQoKICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcykKfQoKLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoCi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy4KLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eQp2YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDAKCmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykgewogIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aAogIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHsKICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKQogIH0KCiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCAiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkIi4KICB2YXIgcmVzID0gJycKICB2YXIgaSA9IDAKICB3aGlsZSAoaSA8IGxlbikgewogICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoCiAgICAgIFN0cmluZywKICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKQogICAgKQogIH0KICByZXR1cm4gcmVzCn0KCmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIHZhciByZXQgPSAnJwogIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCkKCiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpCiAgfQogIHJldHVybiByZXQKfQoKZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkgewogIHZhciByZXQgPSAnJwogIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCkKCiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSkKICB9CiAgcmV0dXJuIHJldAp9CgpmdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7CiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGgKCiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMAogIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW4KCiAgdmFyIG91dCA9ICcnCiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHsKICAgIG91dCArPSB0b0hleChidWZbaV0pCiAgfQogIHJldHVybiBvdXQKfQoKZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHsKICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZCkKICB2YXIgcmVzID0gJycKICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7CiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NikKICB9CiAgcmV0dXJuIHJlcwp9CgpCdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHsKICB2YXIgbGVuID0gdGhpcy5sZW5ndGgKICBzdGFydCA9IH5+c3RhcnQKICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kCgogIGlmIChzdGFydCA8IDApIHsKICAgIHN0YXJ0ICs9IGxlbgogICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwCiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikgewogICAgc3RhcnQgPSBsZW4KICB9CgogIGlmIChlbmQgPCAwKSB7CiAgICBlbmQgKz0gbGVuCiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMAogIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7CiAgICBlbmQgPSBsZW4KICB9CgogIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnQKCiAgdmFyIG5ld0J1ZgogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKQogICAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGUKICB9IGVsc2UgewogICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnQKICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZCkKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkgewogICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF0KICAgIH0KICB9CgogIHJldHVybiBuZXdCdWYKfQoKLyoKICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuCiAqLwpmdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkgewogIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpCiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciB2YWwgPSB0aGlzW29mZnNldF0KICB2YXIgbXVsID0gMQogIHZhciBpID0gMAogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAogIH0KCiAgcmV0dXJuIHZhbAp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCiAgfQoKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdCiAgdmFyIG11bCA9IDEKICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWwKICB9CgogIHJldHVybiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKQogIHJldHVybiB0aGlzW29mZnNldF0KfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCkKCiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8CiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHwKICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArCiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArCiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHwKICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHwKICAgIHRoaXNbb2Zmc2V0ICsgM10pCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciB2YWwgPSB0aGlzW29mZnNldF0KICB2YXIgbXVsID0gMQogIHZhciBpID0gMAogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bAogIH0KICBtdWwgKj0gMHg4MAoKICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpCgogIHZhciBpID0gYnl0ZUxlbmd0aAogIHZhciBtdWwgPSAxCiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXQogIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bAogIH0KICBtdWwgKj0gMHg4MAoKICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKQoKICByZXR1cm4gdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpCiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKQogIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKQogIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KQogIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWwKfQoKQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCkKICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOCkKICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdKSB8CiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8CiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCgogIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8CiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfAogICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfAogICAgKHRoaXNbb2Zmc2V0ICsgM10pCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpCiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KQp9CgpCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKQogIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpCn0KCkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCkKICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KQp9CgpmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignImJ1ZmZlciIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpCiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignInZhbHVlIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJykKICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHsKICB2YWx1ZSA9ICt2YWx1ZQogIG9mZnNldCA9IG9mZnNldCB8IDAKICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDAKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxCiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMCkKICB9CgogIHZhciBtdWwgPSAxCiAgdmFyIGkgPSAwCiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGCiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHsKICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRgogIH0KCiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDEKICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKQogIH0KCiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMQogIHZhciBtdWwgPSAxCiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRgogIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApCiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKQogIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgcmV0dXJuIG9mZnNldCArIDEKfQoKZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7CiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDEKICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7CiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PgogICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDgKICB9Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKQogIH0KICByZXR1cm4gb2Zmc2V0ICsgMgp9CgpmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHsKICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDEKICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgKytpKSB7CiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgPj4+IChsaXR0bGVFbmRpYW4gPyBpIDogMyAtIGkpICogOCkgJiAweGZmCiAgfQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNCkKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpCiAgfQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpCiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNikKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpCiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZikKICB9IGVsc2UgewogICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpCiAgfQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgewogICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKQoKICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KQogIH0KCiAgdmFyIGkgPSAwCiAgdmFyIG11bCA9IDEKICB2YXIgc3ViID0gMAogIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRgogIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7CiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkgewogICAgICBzdWIgPSAxCiAgICB9CiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGCiAgfQoKICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aAp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIHsKICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSkKCiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdCkKICB9CgogIHZhciBpID0gYnl0ZUxlbmd0aCAtIDEKICB2YXIgbXVsID0gMQogIHZhciBzdWIgPSAwCiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRgogIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkgewogICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHsKICAgICAgc3ViID0gMQogICAgfQogICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRgogIH0KCiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApCiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKQogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMQogIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpCiAgcmV0dXJuIG9mZnNldCArIDEKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZikKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpCiAgfQogIHJldHVybiBvZmZzZXQgKyAyCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMCkKICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDIKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgdmFsdWUgPSArdmFsdWUKICBvZmZzZXQgPSBvZmZzZXQgfCAwCiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApCiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7CiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKQogICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpCiAgfSBlbHNlIHsKICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpCiAgfQogIHJldHVybiBvZmZzZXQgKyA0Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHZhbHVlID0gK3ZhbHVlCiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMAogIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKQogIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMQogIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgewogICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNCkKICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KQogICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOCkKICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKQogIH0gZWxzZSB7CiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSkKICB9CiAgcmV0dXJuIG9mZnNldCArIDQKfQoKZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpCiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKQp9CgpmdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICBpZiAoIW5vQXNzZXJ0KSB7CiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOCkKICB9CiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpCiAgcmV0dXJuIG9mZnNldCArIDQKfQoKQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpCn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCkKfQoKZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewogIGlmICghbm9Bc3NlcnQpIHsKICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpCiAgfQogIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KQogIHJldHVybiBvZmZzZXQgKyA4Cn0KCkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KQp9CgpCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpCn0KCi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aCkKQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewogIGlmICghc3RhcnQpIHN0YXJ0ID0gMAogIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGgKICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoCiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwCiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0CgogIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZQogIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMAogIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMAoKICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zCiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKQogIH0KICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpCiAgaWYgKGVuZCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcycpCgogIC8vIEFyZSB3ZSBvb2I/CiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aAogIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkgewogICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnQKICB9CgogIHZhciBsZW4gPSBlbmQgLSBzdGFydAogIHZhciBpCgogIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkgewogICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kCiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkgewogICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XQogICAgfQogIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHsKICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnQKICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkgewogICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XQogICAgfQogIH0gZWxzZSB7CiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbCgKICAgICAgdGFyZ2V0LAogICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksCiAgICAgIHRhcmdldFN0YXJ0CiAgICApCiAgfQoKICByZXR1cm4gbGVuCn0KCi8vIFVzYWdlOgovLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSkKLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pCi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKQpCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7CiAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczoKICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHsKICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7CiAgICAgIGVuY29kaW5nID0gc3RhcnQKICAgICAgc3RhcnQgPSAwCiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoCiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7CiAgICAgIGVuY29kaW5nID0gZW5kCiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoCiAgICB9CiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkgewogICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApCiAgICAgIGlmIChjb2RlIDwgMjU2KSB7CiAgICAgICAgdmFsID0gY29kZQogICAgICB9CiAgICB9CiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKQogICAgfQogICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpCiAgICB9CiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewogICAgdmFsID0gdmFsICYgMjU1CiAgfQoKICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS4KICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKQogIH0KCiAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgcmV0dXJuIHRoaXMKICB9CgogIHN0YXJ0ID0gc3RhcnQgPj4+IDAKICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwCgogIGlmICghdmFsKSB2YWwgPSAwCgogIHZhciBpCiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7CiAgICAgIHRoaXNbaV0gPSB2YWwKICAgIH0KICB9IGVsc2UgewogICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbCkKICAgICAgPyB2YWwKICAgICAgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpCiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoCiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkgewogICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXQogICAgfQogIH0KCiAgcmV0dXJuIHRoaXMKfQoKLy8gSEVMUEVSIEZVTkNUSU9OUwovLyA9PT09PT09PT09PT09PT09Cgp2YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXC8wLTlBLVphLXotX10vZwoKZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikgewogIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcbiBhbmQgXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3QKICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpCiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJwogIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnCiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90CiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7CiAgICBzdHIgPSBzdHIgKyAnPScKICB9CiAgcmV0dXJuIHN0cgp9CgpmdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHsKICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpCiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXHMrfFxzKyQvZywgJycpCn0KCmZ1bmN0aW9uIHRvSGV4IChuKSB7CiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpCiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpCn0KCmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7CiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eQogIHZhciBjb2RlUG9pbnQKICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aAogIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbAogIHZhciBieXRlcyA9IFtdCgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHsKICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpCgogICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudAogICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHsKICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWQKICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7CiAgICAgICAgLy8gbm8gbGVhZCB5ZXQKICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7CiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsCiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7CiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkCiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgfQoKICAgICAgICAvLyB2YWxpZCBsZWFkCiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludAoKICAgICAgICBjb250aW51ZQogICAgICB9CgogICAgICAvLyAyIGxlYWRzIGluIGEgcm93CiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHsKICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRCkKICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50CiAgICAgICAgY29udGludWUKICAgICAgfQoKICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXIKICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMAogICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7CiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWQKICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpCiAgICB9CgogICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGwKCiAgICAvLyBlbmNvZGUgdXRmOAogICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHsKICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KQogICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkgewogICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWsKICAgICAgYnl0ZXMucHVzaCgKICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCwKICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MAogICAgICApCiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHsKICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goCiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsCiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLAogICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwCiAgICAgICkKICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHsKICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrCiAgICAgIGJ5dGVzLnB1c2goCiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLAogICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCwKICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsCiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODAKICAgICAgKQogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKQogICAgfQogIH0KCiAgcmV0dXJuIGJ5dGVzCn0KCmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7CiAgdmFyIGJ5dGVBcnJheSA9IFtdCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHsKICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLgogICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKQogIH0KICByZXR1cm4gYnl0ZUFycmF5Cn0KCmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7CiAgdmFyIGMsIGhpLCBsbwogIHZhciBieXRlQXJyYXkgPSBbXQogIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7CiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWsKCiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSkKICAgIGhpID0gYyA+PiA4CiAgICBsbyA9IGMgJSAyNTYKICAgIGJ5dGVBcnJheS5wdXNoKGxvKQogICAgYnl0ZUFycmF5LnB1c2goaGkpCiAgfQoKICByZXR1cm4gYnl0ZUFycmF5Cn0KCmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikgewogIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSkKfQoKZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7CiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVhawogICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldCiAgfQogIHJldHVybiBpCn0KCmZ1bmN0aW9uIGlzbmFuICh2YWwpIHsKICByZXR1cm4gdmFsICE9PSB2YWwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmUKfQoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykpKQoKLyoqKi8gfSksCi8qIDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIGc7DQoNCi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlDQpnID0gKGZ1bmN0aW9uKCkgew0KCXJldHVybiB0aGlzOw0KfSkoKTsNCg0KdHJ5IHsNCgkvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUCkNCglnID0gZyB8fCBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpIHx8ICgxLGV2YWwpKCJ0aGlzIik7DQp9IGNhdGNoKGUpIHsNCgkvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZQ0KCWlmKHR5cGVvZiB3aW5kb3cgPT09ICJvYmplY3QiKQ0KCQlnID0gd2luZG93Ow0KfQ0KDQovLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uDQovLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQncw0KLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufQ0KDQptb2R1bGUuZXhwb3J0cyA9IGc7DQoKCi8qKiovIH0pLAovKiA0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCmlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykgewogIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yCiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwgewogICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgIHZhbHVlOiBjdG9yLAogICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgICB9CiAgICB9KTsKICB9Owp9IGVsc2UgewogIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzCiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHsKICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yCiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fQogICAgVGVtcEN0b3IucHJvdG90eXBlID0gc3VwZXJDdG9yLnByb3RvdHlwZQogICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKQogICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yCiAgfQp9CgoKLyoqKi8gfSksCi8qIDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyCnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTsKCi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdAovLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXMKLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYQovLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLgoKdmFyIGNhY2hlZFNldFRpbWVvdXQ7CnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7CgpmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7Cn0KZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpOwp9CihmdW5jdGlvbiAoKSB7CiAgICB0cnkgewogICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDsKICAgICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7CiAgICB9CiAgICB0cnkgewogICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0OwogICAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0OwogICAgfQp9ICgpKQpmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikgewogICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHsKICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnMKICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApOwogICAgfQogICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWQKICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkgewogICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0OwogICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7CiAgICB9CiAgICB0cnkgewogICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3MKICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApOwogICAgfSBjYXRjaChlKXsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHkKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApOwogICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yCiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTsKICAgICAgICB9CiAgICB9CgoKfQpmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7CiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHsKICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnMKICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7CiAgICB9CiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkCiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHsKICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7CiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpOwogICAgfQogICAgdHJ5IHsKICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzCiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpOwogICAgfSBjYXRjaCAoZSl7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseQogICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTsKICAgICAgICB9IGNhdGNoIChlKXsKICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuCiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXQKICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7CiAgICAgICAgfQogICAgfQoKCgp9CnZhciBxdWV1ZSA9IFtdOwp2YXIgZHJhaW5pbmcgPSBmYWxzZTsKdmFyIGN1cnJlbnRRdWV1ZTsKdmFyIHF1ZXVlSW5kZXggPSAtMTsKCmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHsKICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkgewogICAgICAgIHJldHVybjsKICAgIH0KICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkgewogICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7CiAgICB9IGVsc2UgewogICAgICAgIHF1ZXVlSW5kZXggPSAtMTsKICAgIH0KICAgIGlmIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICBkcmFpblF1ZXVlKCk7CiAgICB9Cn0KCmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7CiAgICBpZiAoZHJhaW5pbmcpIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTsKICAgIGRyYWluaW5nID0gdHJ1ZTsKCiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoOwogICAgd2hpbGUobGVuKSB7CiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7CiAgICAgICAgcXVldWUgPSBbXTsKICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBxdWV1ZUluZGV4ID0gLTE7CiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoOwogICAgfQogICAgY3VycmVudFF1ZXVlID0gbnVsbDsKICAgIGRyYWluaW5nID0gZmFsc2U7CiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7Cn0KCnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7CiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHsKICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsKICAgICAgICB9CiAgICB9CiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpOwogICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHsKICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpOwogICAgfQp9OwoKLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0cwpmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHsKICAgIHRoaXMuZnVuID0gZnVuOwogICAgdGhpcy5hcnJheSA9IGFycmF5Owp9Ckl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpOwp9Owpwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInOwpwcm9jZXNzLmJyb3dzZXIgPSB0cnVlOwpwcm9jZXNzLmVudiA9IHt9Owpwcm9jZXNzLmFyZ3YgPSBbXTsKcHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzCnByb2Nlc3MudmVyc2lvbnMgPSB7fTsKCmZ1bmN0aW9uIG5vb3AoKSB7fQoKcHJvY2Vzcy5vbiA9IG5vb3A7CnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLm9uY2UgPSBub29wOwpwcm9jZXNzLm9mZiA9IG5vb3A7CnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wOwpwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7CnByb2Nlc3MuZW1pdCA9IG5vb3A7Cgpwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpOwp9OwoKcHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTsKcHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHsKICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7Cn07CnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07CgoKLyoqKi8gfSksCi8qIDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovLyBhIGR1cGxleCBzdHJlYW0gaXMganVzdCBhIHN0cmVhbSB0aGF0IGlzIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLgovLyBTaW5jZSBKUyBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgcHJvdG90eXBhbCBpbmhlcml0YW5jZSwgdGhpcyBjbGFzcwovLyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBSZWFkYWJsZSwgYW5kIHRoZW4gcGFyYXNpdGljYWxseSBmcm9tCi8vIFdyaXRhYmxlLgoKCgovKjxyZXBsYWNlbWVudD4qLwoKdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7CiAgdmFyIGtleXMgPSBbXTsKICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7CiAgICBrZXlzLnB1c2goa2V5KTsKICB9cmV0dXJuIGtleXM7Cn07Ci8qPC9yZXBsYWNlbWVudD4qLwoKbW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgcHJvY2Vzc05leHRUaWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwp1dGlsLmluaGVyaXRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsKLyo8L3JlcGxhY2VtZW50PiovCgp2YXIgUmVhZGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTsKdmFyIFdyaXRhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7Cgp1dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpOwoKdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7CmZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykgewogIHZhciBtZXRob2QgPSBrZXlzW3ZdOwogIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKSBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTsKfQoKZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHsKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7CgogIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWFkYWJsZSA9PT0gZmFsc2UpIHRoaXMucmVhZGFibGUgPSBmYWxzZTsKCiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpIHRoaXMud3JpdGFibGUgPSBmYWxzZTsKCiAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTsKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93SGFsZk9wZW4gPT09IGZhbHNlKSB0aGlzLmFsbG93SGFsZk9wZW4gPSBmYWxzZTsKCiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7Cn0KCi8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXIKZnVuY3Rpb24gb25lbmQoKSB7CiAgLy8gaWYgd2UgYWxsb3cgaGFsZi1vcGVuIHN0YXRlLCBvciBpZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCwKICAvLyB0aGVuIHdlJ3JlIG9rLgogIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgcmV0dXJuOwoKICAvLyBubyBtb3JlIGRhdGEgY2FuIGJlIHdyaXR0ZW4uCiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suCiAgcHJvY2Vzc05leHRUaWNrKG9uRW5kTlQsIHRoaXMpOwp9CgpmdW5jdGlvbiBvbkVuZE5UKHNlbGYpIHsKICBzZWxmLmVuZCgpOwp9CgpmdW5jdGlvbiBmb3JFYWNoKHhzLCBmKSB7CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGYoeHNbaV0sIGkpOwogIH0KfQoKLyoqKi8gfSksCi8qIDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikgey8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCi8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYAovLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC4KCmZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkpIHsKICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7CiAgfQogIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nOwp9CmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7CgpmdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJzsKfQpleHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjsKCmZ1bmN0aW9uIGlzTnVsbChhcmcpIHsKICByZXR1cm4gYXJnID09PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsOwoKZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PSBudWxsOwp9CmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDsKCmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJzsKfQpleHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7CgpmdW5jdGlvbiBpc1N0cmluZyhhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7Cn0KZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nOwoKZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnOwp9CmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDsKCmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykgewogIHJldHVybiBhcmcgPT09IHZvaWQgMDsKfQpleHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7CgpmdW5jdGlvbiBpc1JlZ0V4cChyZSkgewogIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nOwp9CmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDsKCmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykgewogIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7Cn0KZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0OwoKZnVuY3Rpb24gaXNEYXRlKGQpIHsKICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJzsKfQpleHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTsKCmZ1bmN0aW9uIGlzRXJyb3IoZSkgewogIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTsKfQpleHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yOwoKZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKfQpleHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uOwoKZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7CiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fAogICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHwKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2wKICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7Cn0KZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlOwoKZXhwb3J0cy5pc0J1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcjsKCmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHsKICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pOwp9CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKS5CdWZmZXIpKQoKLyoqKi8gfSksCi8qIDggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwovLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCi8vIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAovLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgovLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAovLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQovLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkgewogIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTsKICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkOwp9Cm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyOwoKLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54CkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7CkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDsKCi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZQovLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLgpFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwOwoKLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzCi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHsKICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKQogICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTsKICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuOwogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkgewogIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7CgogIGlmICghdGhpcy5fZXZlbnRzKQogICAgdGhpcy5fZXZlbnRzID0ge307CgogIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy4KICBpZiAodHlwZSA9PT0gJ2Vycm9yJykgewogICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHwKICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHsKICAgICAgZXIgPSBhcmd1bWVudHNbMV07CiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlcgogICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCAiZXJyb3IiIGV2ZW50LiAoJyArIGVyICsgJyknKTsKICAgICAgICBlcnIuY29udGV4dCA9IGVyOwogICAgICAgIHRocm93IGVycjsKICAgICAgfQogICAgfQogIH0KCiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKQogICAgcmV0dXJuIGZhbHNlOwoKICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkgewogICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgIC8vIGZhc3QgY2FzZXMKICAgICAgY2FzZSAxOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAyOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDM6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgLy8gc2xvd2VyCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0KICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7CiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTsKICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7CiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspCiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CiAgdmFyIG07CgogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoKICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSAibmV3TGlzdGVuZXIiISBCZWZvcmUKICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCAibmV3TGlzdGVuZXIiLgogIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpCiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwKICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/CiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7CgogIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKQogICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjsKICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKQogICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLgogICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpOwogIGVsc2UKICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LgogICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdOwoKICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVhawogIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7CiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHsKICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVyczsKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVyczsKICAgIH0KCiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkgewogICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTsKICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArCiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArCiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7CiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTAKICAgICAgICBjb25zb2xlLnRyYWNlKCk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICB2YXIgZmlyZWQgPSBmYWxzZTsKCiAgZnVuY3Rpb24gZygpIHsKICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7CgogICAgaWYgKCFmaXJlZCkgewogICAgICBmaXJlZCA9IHRydWU7CiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgfQoKICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7CiAgdGhpcy5vbih0eXBlLCBnKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZApFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTsKCiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXR1cm4gdGhpczsKCiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKICBsZW5ndGggPSBsaXN0Lmxlbmd0aDsKICBwb3NpdGlvbiA9IC0xOwoKICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwKICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7CiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKCiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkgewogICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykgewogICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHwKICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkgewogICAgICAgIHBvc2l0aW9uID0gaTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3NpdGlvbiA8IDApCiAgICAgIHJldHVybiB0aGlzOwoKICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkgewogICAgICBsaXN0Lmxlbmd0aCA9IDA7CiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CiAgICB9IGVsc2UgewogICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7CiAgICB9CgogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7CiAgdmFyIGtleSwgbGlzdGVuZXJzOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHJldHVybiB0aGlzOwoKICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0CiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKQogICAgICB0aGlzLl9ldmVudHMgPSB7fTsKICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSkKICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsKICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykgewogICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTsKICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTsKICAgIH0KICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpOwogICAgdGhpcy5fZXZlbnRzID0ge307CiAgICByZXR1cm4gdGhpczsKICB9CgogIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkgewogICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpOwogIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7CiAgICAvLyBMSUZPIG9yZGVyCiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aCkKICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTsKICB9CiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIgcmV0OwogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXQgPSBbXTsKICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpCiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTsKICBlbHNlCiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTsKICByZXR1cm4gcmV0Owp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkgewogIGlmICh0aGlzLl9ldmVudHMpIHsKICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKQogICAgICByZXR1cm4gMTsKICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpCiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDsKICB9CiAgcmV0dXJuIDA7Cn07CgpFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHsKICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpOwp9OwoKZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKfQoKZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwp9CgpmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CgpmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cn0KCgovKioqLyB9KSwKLyogOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsKCnZhciBidWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpOwp2YXIgQnVmZmVyID0gYnVmZmVyLkJ1ZmZlcjsKdmFyIFNsb3dCdWZmZXIgPSBidWZmZXIuU2xvd0J1ZmZlcjsKdmFyIE1BWF9MRU4gPSBidWZmZXIua01heExlbmd0aCB8fCAyMTQ3NDgzNjQ3OwpleHBvcnRzLmFsbG9jID0gZnVuY3Rpb24gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICBpZiAodHlwZW9mIEJ1ZmZlci5hbGxvYyA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIEJ1ZmZlci5hbGxvYyhzaXplLCBmaWxsLCBlbmNvZGluZyk7CiAgfQogIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdudW1iZXInKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IG5vdCBiZSBudW1iZXInKTsKICB9CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgfQogIGlmIChzaXplID4gTUFYX0xFTikgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NpemUgaXMgdG9vIGxhcmdlJyk7CiAgfQogIHZhciBlbmMgPSBlbmNvZGluZzsKICB2YXIgX2ZpbGwgPSBmaWxsOwogIGlmIChfZmlsbCA9PT0gdW5kZWZpbmVkKSB7CiAgICBlbmMgPSB1bmRlZmluZWQ7CiAgICBfZmlsbCA9IDA7CiAgfQogIHZhciBidWYgPSBuZXcgQnVmZmVyKHNpemUpOwogIGlmICh0eXBlb2YgX2ZpbGwgPT09ICdzdHJpbmcnKSB7CiAgICB2YXIgZmlsbEJ1ZiA9IG5ldyBCdWZmZXIoX2ZpbGwsIGVuYyk7CiAgICB2YXIgZmxlbiA9IGZpbGxCdWYubGVuZ3RoOwogICAgdmFyIGkgPSAtMTsKICAgIHdoaWxlICgrK2kgPCBzaXplKSB7CiAgICAgIGJ1ZltpXSA9IGZpbGxCdWZbaSAlIGZsZW5dOwogICAgfQogIH0gZWxzZSB7CiAgICBidWYuZmlsbChfZmlsbCk7CiAgfQogIHJldHVybiBidWY7Cn0KZXhwb3J0cy5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIGFsbG9jVW5zYWZlKHNpemUpIHsKICBpZiAodHlwZW9mIEJ1ZmZlci5hbGxvY1Vuc2FmZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgcmV0dXJuIEJ1ZmZlci5hbGxvY1Vuc2FmZShzaXplKTsKICB9CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgfQogIGlmIChzaXplID4gTUFYX0xFTikgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NpemUgaXMgdG9vIGxhcmdlJyk7CiAgfQogIHJldHVybiBuZXcgQnVmZmVyKHNpemUpOwp9CmV4cG9ydHMuZnJvbSA9IGZ1bmN0aW9uIGZyb20odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogIGlmICh0eXBlb2YgQnVmZmVyLmZyb20gPT09ICdmdW5jdGlvbicgJiYgKCFnbG9iYWwuVWludDhBcnJheSB8fCBVaW50OEFycmF5LmZyb20gIT09IEJ1ZmZlci5mcm9tKSkgewogICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogIH0KICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpOwogIH0KICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpOwogIH0KICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICB2YXIgb2Zmc2V0ID0gZW5jb2RpbmdPck9mZnNldDsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7CiAgICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlKTsKICAgIH0KICAgIGlmICh0eXBlb2Ygb2Zmc2V0ID09PSAndW5kZWZpbmVkJykgewogICAgICBvZmZzZXQgPSAwOwogICAgfQogICAgdmFyIGxlbiA9IGxlbmd0aDsKICAgIGlmICh0eXBlb2YgbGVuID09PSAndW5kZWZpbmVkJykgewogICAgICBsZW4gPSB2YWx1ZS5ieXRlTGVuZ3RoIC0gb2Zmc2V0OwogICAgfQogICAgaWYgKG9mZnNldCA+PSB2YWx1ZS5ieXRlTGVuZ3RoKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ29mZnNldFwnIGlzIG91dCBvZiBib3VuZHMnKTsKICAgIH0KICAgIGlmIChsZW4gPiB2YWx1ZS5ieXRlTGVuZ3RoIC0gb2Zmc2V0KSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcJ2xlbmd0aFwnIGlzIG91dCBvZiBib3VuZHMnKTsKICAgIH0KICAgIHJldHVybiBuZXcgQnVmZmVyKHZhbHVlLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbGVuKSk7CiAgfQogIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsdWUpKSB7CiAgICB2YXIgb3V0ID0gbmV3IEJ1ZmZlcih2YWx1ZS5sZW5ndGgpOwogICAgdmFsdWUuY29weShvdXQsIDAsIDAsIHZhbHVlLmxlbmd0aCk7CiAgICByZXR1cm4gb3V0OwogIH0KICBpZiAodmFsdWUpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gdmFsdWUpIHsKICAgICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUpOwogICAgfQogICAgaWYgKHZhbHVlLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSkpIHsKICAgICAgcmV0dXJuIG5ldyBCdWZmZXIodmFsdWUuZGF0YSk7CiAgICB9CiAgfQoKICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsICcgKyAnQXJyYXlCdWZmZXIsIEFycmF5LCBvciBhcnJheS1saWtlIG9iamVjdC4nKTsKfQpleHBvcnRzLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIGFsbG9jVW5zYWZlU2xvdyhzaXplKSB7CiAgaWYgKHR5cGVvZiBCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID09PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyhzaXplKTsKICB9CiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2l6ZSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgfQogIGlmIChzaXplID49IE1BWF9MRU4pIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdzaXplIGlzIHRvbyBsYXJnZScpOwogIH0KICByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc2l6ZSk7Cn0KCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKSkKCi8qKiovIH0pLAovKiAxMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7CgppZiAoIXByb2Nlc3MudmVyc2lvbiB8fAogICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YwLicpID09PSAwIHx8CiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuJykgPT09IDAgJiYgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLjguJykgIT09IDApIHsKICBtb2R1bGUuZXhwb3J0cyA9IG5leHRUaWNrOwp9IGVsc2UgewogIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzcy5uZXh0VGljazsKfQoKZnVuY3Rpb24gbmV4dFRpY2soZm4sIGFyZzEsIGFyZzIsIGFyZzMpIHsKICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCciY2FsbGJhY2siIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpOwogIH0KICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKICB2YXIgYXJncywgaTsKICBzd2l0Y2ggKGxlbikgewogIGNhc2UgMDoKICBjYXNlIDE6CiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbik7CiAgY2FzZSAyOgogICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrT25lKCkgewogICAgICBmbi5jYWxsKG51bGwsIGFyZzEpOwogICAgfSk7CiAgY2FzZSAzOgogICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrVHdvKCkgewogICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIpOwogICAgfSk7CiAgY2FzZSA0OgogICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrVGhyZWUoKSB7CiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSwgYXJnMiwgYXJnMyk7CiAgICB9KTsKICBkZWZhdWx0OgogICAgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTsKICAgIGkgPSAwOwogICAgd2hpbGUgKGkgPCBhcmdzLmxlbmd0aCkgewogICAgICBhcmdzW2krK10gPSBhcmd1bWVudHNbaV07CiAgICB9CiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7CiAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgfSk7CiAgfQp9CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1KSkpCgovKioqLyB9KSwKLyogMTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuZGVjb2RlID0gZXhwb3J0cy5wYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTsKZXhwb3J0cy5lbmNvZGUgPSBleHBvcnRzLnN0cmluZ2lmeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTM3KTsKCgovKioqLyB9KSwKLyogMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvCi8vIHNvbWV0aGluZyB3aXRoIHRoZSBkYXRhLiAgU29tZXRpbWVzIGl0J3MgY2FsbGVkIGEgImZpbHRlciIsCi8vIGJ1dCB0aGF0J3Mgbm90IGEgZ3JlYXQgbmFtZSBmb3IgaXQsIHNpbmNlIHRoYXQgaW1wbGllcyBhIHRoaW5nIHdoZXJlCi8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGQKLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKQovLwovLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhCi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLAovLyBhIHpsaWIgc3RyZWFtIG1pZ2h0IHRha2UgbXVsdGlwbGUgcGxhaW4tdGV4dCB3cml0ZXMoKSwgYW5kIHRoZW4KLy8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLgovLwovLyBIZXJlJ3MgaG93IHRoaXMgd29ya3M6Ci8vCi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZQovLyBzdHJlYW0gY2xhc3Nlcy4gIFdoZW4geW91IHdyaXRlKGNodW5rKSwgdGhhdCBjYWxscyBfd3JpdGUoY2h1bmssY2IpCi8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXMKLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbAovLyB0aGVyZSdzIGVub3VnaCBwZW5kaW5nIHJlYWRhYmxlIGRhdGEgYnVmZmVyZWQgdXAuCi8vCi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuCi8vIF9yZWFkKG4pIGlzIGNhbGxlZCwgaXQgdHJhbnNmb3JtcyB0aGUgcXVldWVkIHVwIGRhdGEsIGNhbGxpbmcgdGhlCi8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZQovLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdAovLyBvdXRwdXR0ZWQgYml0IGNhbGxzIHRoZSByZWFkY2IsIGFuZCBzdWJzZXF1ZW50IGNodW5rcyBqdXN0IGdvIGludG8KLy8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LgovLwovLyBUaGlzIHdheSwgYmFjay1wcmVzc3VyZSBpcyBhY3R1YWxseSBkZXRlcm1pbmVkIGJ5IHRoZSByZWFkaW5nIHNpZGUsCi8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsCi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmcKLy8gaGVyZS4gIEZvciBleGFtcGxlLCBpbWFnaW5lIGEgc3RyZWFtIHdoZXJlIGV2ZXJ5IGJ5dGUgb2YgaW5wdXQgaXMKLy8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueQovLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluCi8vIDFrYiBvZiBkYXRhIGJlaW5nIG91dHB1dC4gIEluIHRoaXMgY2FzZSwgeW91IGNvdWxkIHdyaXRlIGEgdmVyeSBzbWFsbAovLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluCi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbAovLyB0aGUgc3lzdGVtIHRvIHN0b3AgZG9pbmcgdGhlIHRyYW5zZm9ybS4gIEEgc2luZ2xlIDRNQiB3cml0ZSBjb3VsZAovLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LgovLwovLyBIb3dldmVyLCBldmVuIGluIHN1Y2ggYSBwYXRob2xvZ2ljYWwgY2FzZSwgb25seSBhIHNpbmdsZSB3cml0dGVuIGNodW5rCi8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWwKLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuCgoKCm1vZHVsZS5leHBvcnRzID0gVHJhbnNmb3JtOwoKdmFyIER1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7CnV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnV0aWwuaW5oZXJpdHMoVHJhbnNmb3JtLCBEdXBsZXgpOwoKZnVuY3Rpb24gVHJhbnNmb3JtU3RhdGUoc3RyZWFtKSB7CiAgdGhpcy5hZnRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIChlciwgZGF0YSkgewogICAgcmV0dXJuIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpOwogIH07CgogIHRoaXMubmVlZFRyYW5zZm9ybSA9IGZhbHNlOwogIHRoaXMudHJhbnNmb3JtaW5nID0gZmFsc2U7CiAgdGhpcy53cml0ZWNiID0gbnVsbDsKICB0aGlzLndyaXRlY2h1bmsgPSBudWxsOwogIHRoaXMud3JpdGVlbmNvZGluZyA9IG51bGw7Cn0KCmZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpIHsKICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlOwogIHRzLnRyYW5zZm9ybWluZyA9IGZhbHNlOwoKICB2YXIgY2IgPSB0cy53cml0ZWNiOwoKICBpZiAoIWNiKSByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdubyB3cml0ZWNiIGluIFRyYW5zZm9ybSBjbGFzcycpKTsKCiAgdHMud3JpdGVjaHVuayA9IG51bGw7CiAgdHMud3JpdGVjYiA9IG51bGw7CgogIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZCkgc3RyZWFtLnB1c2goZGF0YSk7CgogIGNiKGVyKTsKCiAgdmFyIHJzID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogIHJzLnJlYWRpbmcgPSBmYWxzZTsKICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHsKICAgIHN0cmVhbS5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTsKICB9Cn0KCmZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFRyYW5zZm9ybSkpIHJldHVybiBuZXcgVHJhbnNmb3JtKG9wdGlvbnMpOwoKICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTsKCiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSBuZXcgVHJhbnNmb3JtU3RhdGUodGhpcyk7CgogIHZhciBzdHJlYW0gPSB0aGlzOwoKICAvLyBzdGFydCBvdXQgYXNraW5nIGZvciBhIHJlYWRhYmxlIGV2ZW50IG9uY2UgZGF0YSBpcyB0cmFuc2Zvcm1lZC4KICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CgogIC8vIHdlIGhhdmUgaW1wbGVtZW50ZWQgdGhlIF9yZWFkIG1ldGhvZCwgYW5kIGRvbmUgdGhlIG90aGVyIHRoaW5ncwogIC8vIHRoYXQgUmVhZGFibGUgd2FudHMgYmVmb3JlIHRoZSBmaXJzdCBfcmVhZCBjYWxsLCBzbyB1bnNldCB0aGUKICAvLyBzeW5jIGd1YXJkIGZsYWcuCiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jID0gZmFsc2U7CgogIGlmIChvcHRpb25zKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMudHJhbnNmb3JtID09PSAnZnVuY3Rpb24nKSB0aGlzLl90cmFuc2Zvcm0gPSBvcHRpb25zLnRyYW5zZm9ybTsKCiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDsKICB9CgogIC8vIFdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy4KICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uICgpIHsKICAgIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoKGZ1bmN0aW9uIChlciwgZGF0YSkgewogICAgICBkb25lKHN0cmVhbSwgZXIsIGRhdGEpOwogICAgfSk7ZWxzZSBkb25lKHN0cmVhbSk7CiAgfSk7Cn0KClRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHsKICB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtID0gZmFsc2U7CiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7Cn07CgovLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiEKLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgovLyAnY2h1bmsnIGlzIGFuIGlucHV0IGNodW5rLgovLwovLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXQKLy8gdG8gdGhlIHJlYWRhYmxlIHNpZGUuICBZb3UgbWF5IGNhbGwgJ3B1c2gnIHplcm8gb3IgbW9yZSB0aW1lcy4KLy8KLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3MKLy8gYW4gZXJyb3IsIHRoZW4gdGhhdCdsbCBwdXQgdGhlIGh1cnQgb24gdGhlIHdob2xlIG9wZXJhdGlvbi4gIElmIHlvdQovLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLgpUcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogIHRocm93IG5ldyBFcnJvcignX3RyYW5zZm9ybSgpIGlzIG5vdCBpbXBsZW1lbnRlZCcpOwp9OwoKVHJhbnNmb3JtLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlOwogIHRzLndyaXRlY2IgPSBjYjsKICB0cy53cml0ZWNodW5rID0gY2h1bms7CiAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nOwogIGlmICghdHMudHJhbnNmb3JtaW5nKSB7CiAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHwgcnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHRoaXMuX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7CiAgfQp9OwoKLy8gRG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgYXJncyBhcmUgaGVyZS4KLy8gX3RyYW5zZm9ybSBkb2VzIGFsbCB0aGUgd29yay4KLy8gVGhhdCB3ZSBnb3QgaGVyZSBtZWFucyB0aGF0IHRoZSByZWFkYWJsZSBzaWRlIHdhbnRzIG1vcmUgZGF0YS4KVHJhbnNmb3JtLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7CiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7CgogIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykgewogICAgdHMudHJhbnNmb3JtaW5nID0gdHJ1ZTsKICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7CiAgfSBlbHNlIHsKICAgIC8vIG1hcmsgdGhhdCB3ZSBuZWVkIGEgdHJhbnNmb3JtLCBzbyB0aGF0IGFueSBkYXRhIHRoYXQgY29tZXMgaW4KICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LgogICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7CiAgfQp9OwoKZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyLCBkYXRhKSB7CiAgaWYgKGVyKSByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwoKICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB1bmRlZmluZWQpIHN0cmVhbS5wdXNoKGRhdGEpOwoKICAvLyBpZiB0aGVyZSdzIG5vdGhpbmcgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhlbiB0aGF0IG1lYW5zCiAgLy8gdGhhdCBub3RoaW5nIG1vcmUgd2lsbCBldmVyIGJlIHByb3ZpZGVkCiAgdmFyIHdzID0gc3RyZWFtLl93cml0YWJsZVN0YXRlOwogIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7CgogIGlmICh3cy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7CgogIGlmICh0cy50cmFuc2Zvcm1pbmcpIHRocm93IG5ldyBFcnJvcignQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHN0aWxsIHRyYW5zZm9ybWluZycpOwoKICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7Cn0KCi8qKiovIH0pLAovKiAxMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBzZXRJbW1lZGlhdGUpIHsvLyBBIGJpdCBzaW1wbGVyIHRoYW4gcmVhZGFibGUgc3RyZWFtcy4KLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsCi8vIHRoZSBkcmFpbiBldmVudCBlbWlzc2lvbiBhbmQgYnVmZmVyaW5nLgoKCgptb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlOwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIHByb2Nlc3NOZXh0VGljayA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBhc3luY1dyaXRlID0gIXByb2Nlc3MuYnJvd3NlciAmJiBbJ3YwLjEwJywgJ3YwLjkuJ10uaW5kZXhPZihwcm9jZXNzLnZlcnNpb24uc2xpY2UoMCwgNSkpID4gLTEgPyBzZXRJbW1lZGlhdGUgOiBwcm9jZXNzTmV4dFRpY2s7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIER1cGxleDsKLyo8L3JlcGxhY2VtZW50PiovCgpXcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKdXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGludGVybmFsVXRpbCA9IHsKICBkZXByZWNhdGU6IF9fd2VicGFja19yZXF1aXJlX18oMTc3KQp9OwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBTdHJlYW07CihmdW5jdGlvbiAoKSB7CiAgdHJ5IHsKICAgIFN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpOwogIH0gY2F0Y2ggKF8pIHt9IGZpbmFsbHkgewogICAgaWYgKCFTdHJlYW0pIFN0cmVhbSA9IF9fd2VicGFja19yZXF1aXJlX18oOCkuRXZlbnRFbWl0dGVyOwogIH0KfSkoKTsKLyo8L3JlcGxhY2VtZW50PiovCgp2YXIgQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKS5CdWZmZXI7Ci8qPHJlcGxhY2VtZW50PiovCnZhciBidWZmZXJTaGltID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKLyo8L3JlcGxhY2VtZW50PiovCgp1dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pOwoKZnVuY3Rpb24gbm9wKCkge30KCmZ1bmN0aW9uIFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICB0aGlzLmNodW5rID0gY2h1bms7CiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwogIHRoaXMuY2FsbGJhY2sgPSBjYjsKICB0aGlzLm5leHQgPSBudWxsOwp9CgpmdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkgewogIER1cGxleCA9IER1cGxleCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtCiAgLy8gY29udGFpbnMgYnVmZmVycyBvciBvYmplY3RzLgogIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlOwoKICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTsKCiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZQogIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmCiAgLy8gdGhlIGVudGlyZSBidWZmZXIgaXMgbm90IGZsdXNoZWQgaW1tZWRpYXRlbHkgb24gd3JpdGUoKQogIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7CiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBod20gfHwgaHdtID09PSAwID8gaHdtIDogZGVmYXVsdEh3bTsKCiAgLy8gY2FzdCB0byBpbnRzLgogIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrOwoKICAvLyBkcmFpbiBldmVudCBmbGFnLgogIHRoaXMubmVlZERyYWluID0gZmFsc2U7CiAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKCkKICB0aGlzLmVuZGluZyA9IGZhbHNlOwogIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWQKICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkCiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOwoKICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT8KICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmcKICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLgogIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7CiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlOwoKICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nCiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLgogIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC4KICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JzsKCiAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnQKICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nCiAgLy8gc29ja2V0IG9yIGZpbGUuCiAgdGhpcy5sZW5ndGggPSAwOwoKICAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLgogIHRoaXMud3JpdGluZyA9IGZhbHNlOwoKICAvLyB3aGVuIHRydWUgYWxsIHdyaXRlcyB3aWxsIGJlIGJ1ZmZlcmVkIHVudGlsIC51bmNvcmsoKSBjYWxsCiAgdGhpcy5jb3JrZWQgPSAwOwoKICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSwKICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueQogIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsICJsYXRlciIgc2hvdWxkIGdlbmVyYWxseSBhbHNvCiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuCiAgdGhpcy5zeW5jID0gdHJ1ZTsKCiAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaAogIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0CiAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uCiAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7CgogIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYikKICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbiAoZXIpIHsKICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7CiAgfTsKCiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQgdGhlIHVzZXIgc3VwcGxpZXMgdG8gd3JpdGUoY2h1bmssZW5jb2RpbmcsY2IpCiAgdGhpcy53cml0ZWNiID0gbnVsbDsKCiAgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLgogIHRoaXMud3JpdGVsZW4gPSAwOwoKICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKCiAgLy8gbnVtYmVyIG9mIHBlbmRpbmcgdXNlci1zdXBwbGllZCB3cml0ZSBjYWxsYmFja3MKICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWQKICB0aGlzLnBlbmRpbmdjYiA9IDA7CgogIC8vIGVtaXQgcHJlZmluaXNoIGlmIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHdhaXRpbmcgZm9yIGlzIF93cml0ZSBjYnMKICAvLyBUaGlzIGlzIHJlbGV2YW50IGZvciBzeW5jaHJvbm91cyBUcmFuc2Zvcm0gc3RyZWFtcwogIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTsKCiAgLy8gVHJ1ZSBpZiB0aGUgZXJyb3Igd2FzIGFscmVhZHkgZW1pdHRlZCBhbmQgc2hvdWxkIG5vdCBiZSB0aHJvd24gYWdhaW4KICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlOwoKICAvLyBjb3VudCBidWZmZXJlZCByZXF1ZXN0cwogIHRoaXMuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwOwoKICAvLyBhbGxvY2F0ZSB0aGUgZmlyc3QgQ29ya2VkUmVxdWVzdCwgdGhlcmUgaXMgYWx3YXlzCiAgLy8gb25lIGFsbG9jYXRlZCBhbmQgZnJlZSB0byB1c2UsIGFuZCB3ZSBtYWludGFpbiBhdCBtb3N0IHR3bwogIHRoaXMuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3QodGhpcyk7Cn0KCldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHsKICB2YXIgY3VycmVudCA9IHRoaXMuYnVmZmVyZWRSZXF1ZXN0OwogIHZhciBvdXQgPSBbXTsKICB3aGlsZSAoY3VycmVudCkgewogICAgb3V0LnB1c2goY3VycmVudCk7CiAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0OwogIH0KICByZXR1cm4gb3V0Owp9OwoKKGZ1bmN0aW9uICgpIHsKICB0cnkgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCAnYnVmZmVyJywgewogICAgICBnZXQ6IGludGVybmFsVXRpbC5kZXByZWNhdGUoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldEJ1ZmZlcigpOwogICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicpCiAgICB9KTsKICB9IGNhdGNoIChfKSB7fQp9KSgpOwoKLy8gVGVzdCBfd3JpdGFibGVTdGF0ZSBmb3IgaW5oZXJpdGFuY2UgdG8gYWNjb3VudCBmb3IgRHVwbGV4IHN0cmVhbXMsCi8vIHdob3NlIHByb3RvdHlwZSBjaGFpbiBvbmx5IHBvaW50cyB0byBSZWFkYWJsZS4KdmFyIHJlYWxIYXNJbnN0YW5jZTsKaWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLmhhc0luc3RhbmNlICYmIHR5cGVvZiBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXSA9PT0gJ2Z1bmN0aW9uJykgewogIHJlYWxIYXNJbnN0YW5jZSA9IEZ1bmN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaGFzSW5zdGFuY2VdOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7CiAgICB2YWx1ZTogZnVuY3Rpb24gKG9iamVjdCkgewogICAgICBpZiAocmVhbEhhc0luc3RhbmNlLmNhbGwodGhpcywgb2JqZWN0KSkgcmV0dXJuIHRydWU7CgogICAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RhdGU7CiAgICB9CiAgfSk7Cn0gZWxzZSB7CiAgcmVhbEhhc0luc3RhbmNlID0gZnVuY3Rpb24gKG9iamVjdCkgewogICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIHRoaXM7CiAgfTsKfQoKZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykgewogIER1cGxleCA9IER1cGxleCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby4KICAvLyBgcmVhbEhhc0luc3RhbmNlYCBpcyBuZWNlc3NhcnkgYmVjYXVzZSB1c2luZyBwbGFpbiBgaW5zdGFuY2VvZmAKICAvLyB3b3VsZCByZXR1cm4gZmFsc2UsIGFzIG5vIGBfd3JpdGFibGVTdGF0ZWAgcHJvcGVydHkgaXMgYXR0YWNoZWQuCgogIC8vIFRyeWluZyB0byB1c2UgdGhlIGN1c3RvbSBgaW5zdGFuY2VvZmAgZm9yIFdyaXRhYmxlIGhlcmUgd2lsbCBhbHNvIGJyZWFrIHRoZQogIC8vIE5vZGUuanMgTGF6eVRyYW5zZm9ybSBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaGFzIGEgbm9uLXRyaXZpYWwgZ2V0dGVyIGZvcgogIC8vIGBfd3JpdGFibGVTdGF0ZWAgdGhhdCB3b3VsZCBsZWFkIHRvIGluZmluaXRlIHJlY3Vyc2lvbi4KICBpZiAoIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLCB0aGlzKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKSB7CiAgICByZXR1cm4gbmV3IFdyaXRhYmxlKG9wdGlvbnMpOwogIH0KCiAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpOwoKICAvLyBsZWdhY3kuCiAgdGhpcy53cml0YWJsZSA9IHRydWU7CgogIGlmIChvcHRpb25zKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGUgPT09ICdmdW5jdGlvbicpIHRoaXMuX3dyaXRlID0gb3B0aW9ucy53cml0ZTsKCiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjsKICB9CgogIFN0cmVhbS5jYWxsKHRoaXMpOwp9CgovLyBPdGhlcndpc2UgcGVvcGxlIGNhbiBwaXBlIFdyaXRhYmxlIHN0cmVhbXMsIHdoaWNoIGlzIGp1c3Qgd3JvbmcuCldyaXRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkgewogIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLCBub3QgcmVhZGFibGUnKSk7Cn07CgpmdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgY2IpIHsKICB2YXIgZXIgPSBuZXcgRXJyb3IoJ3dyaXRlIGFmdGVyIGVuZCcpOwogIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiCiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwogIHByb2Nlc3NOZXh0VGljayhjYiwgZXIpOwp9CgovLyBDaGVja3MgdGhhdCBhIHVzZXItc3VwcGxpZWQgY2h1bmsgaXMgdmFsaWQsIGVzcGVjaWFsbHkgZm9yIHRoZSBwYXJ0aWN1bGFyCi8vIG1vZGUgdGhlIHN0cmVhbSBpcyBpbi4gQ3VycmVudGx5IHRoaXMgbWVhbnMgdGhhdCBgbnVsbGAgaXMgbmV2ZXIgYWNjZXB0ZWQKLy8gYW5kIHVuZGVmaW5lZC9ub24tc3RyaW5nIHZhbHVlcyBhcmUgb25seSBhbGxvd2VkIGluIG9iamVjdCBtb2RlLgpmdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBjYikgewogIHZhciB2YWxpZCA9IHRydWU7CiAgdmFyIGVyID0gZmFsc2U7CgogIGlmIChjaHVuayA9PT0gbnVsbCkgewogICAgZXIgPSBuZXcgVHlwZUVycm9yKCdNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbScpOwogIH0gZWxzZSBpZiAodHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiBjaHVuayAhPT0gdW5kZWZpbmVkICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7CiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTsKICB9CiAgaWYgKGVyKSB7CiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7CiAgICBwcm9jZXNzTmV4dFRpY2soY2IsIGVyKTsKICAgIHZhbGlkID0gZmFsc2U7CiAgfQogIHJldHVybiB2YWxpZDsKfQoKV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwogIHZhciByZXQgPSBmYWxzZTsKICB2YXIgaXNCdWYgPSBCdWZmZXIuaXNCdWZmZXIoY2h1bmspOwoKICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7CiAgICBjYiA9IGVuY29kaW5nOwogICAgZW5jb2RpbmcgPSBudWxsOwogIH0KCiAgaWYgKGlzQnVmKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CgogIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpIGNiID0gbm9wOwoKICBpZiAoc3RhdGUuZW5kZWQpIHdyaXRlQWZ0ZXJFbmQodGhpcywgY2IpO2Vsc2UgaWYgKGlzQnVmIHx8IHZhbGlkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBjYikpIHsKICAgIHN0YXRlLnBlbmRpbmdjYisrOwogICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpOwogIH0KCiAgcmV0dXJuIHJldDsKfTsKCldyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkgewogIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7CgogIHN0YXRlLmNvcmtlZCsrOwp9OwoKV3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uICgpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlOwoKICBpZiAoc3RhdGUuY29ya2VkKSB7CiAgICBzdGF0ZS5jb3JrZWQtLTsKCiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7CiAgfQp9OwoKV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykgewogIC8vIG5vZGU6OlBhcnNlRW5jb2RpbmcoKSByZXF1aXJlcyBsb3dlciBjYXNlLgogIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7CiAgaWYgKCEoWydoZXgnLCAndXRmOCcsICd1dGYtOCcsICdhc2NpaScsICdiaW5hcnknLCAnYmFzZTY0JywgJ3VjczInLCAndWNzLTInLCAndXRmMTZsZScsICd1dGYtMTZsZScsICdyYXcnXS5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTsKICB0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZyA9IGVuY29kaW5nOwogIHJldHVybiB0aGlzOwp9OwoKZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykgewogIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJiB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7CiAgICBjaHVuayA9IGJ1ZmZlclNoaW0uZnJvbShjaHVuaywgZW5jb2RpbmcpOwogIH0KICByZXR1cm4gY2h1bms7Cn0KCi8vIGlmIHdlJ3JlIGFscmVhZHkgd3JpdGluZyBzb21ldGhpbmcsIHRoZW4ganVzdCBwdXQgdGhpcwovLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZQovLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLgpmdW5jdGlvbiB3cml0ZU9yQnVmZmVyKHN0cmVhbSwgc3RhdGUsIGlzQnVmLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgaWYgKCFpc0J1ZikgewogICAgY2h1bmsgPSBkZWNvZGVDaHVuayhzdGF0ZSwgY2h1bmssIGVuY29kaW5nKTsKICAgIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSBlbmNvZGluZyA9ICdidWZmZXInOwogIH0KICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CgogIHN0YXRlLmxlbmd0aCArPSBsZW47CgogIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrOwogIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLgogIGlmICghcmV0KSBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlOwoKICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHsKICAgIHZhciBsYXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBuZXcgV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICBpZiAobGFzdCkgewogICAgICBsYXN0Lm5leHQgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0OwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDsKICAgIH0KICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ICs9IDE7CiAgfSBlbHNlIHsKICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgfQoKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHdyaXRldiwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgc3RhdGUud3JpdGVsZW4gPSBsZW47CiAgc3RhdGUud3JpdGVjYiA9IGNiOwogIHN0YXRlLndyaXRpbmcgPSB0cnVlOwogIHN0YXRlLnN5bmMgPSB0cnVlOwogIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTsKICBzdGF0ZS5zeW5jID0gZmFsc2U7Cn0KCmZ1bmN0aW9uIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpIHsKICAtLXN0YXRlLnBlbmRpbmdjYjsKICBpZiAoc3luYykgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7ZWxzZSBjYihlcik7CgogIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlOwogIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTsKfQoKZnVuY3Rpb24gb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKSB7CiAgc3RhdGUud3JpdGluZyA9IGZhbHNlOwogIHN0YXRlLndyaXRlY2IgPSBudWxsOwogIHN0YXRlLmxlbmd0aCAtPSBzdGF0ZS53cml0ZWxlbjsKICBzdGF0ZS53cml0ZWxlbiA9IDA7Cn0KCmZ1bmN0aW9uIG9ud3JpdGUoc3RyZWFtLCBlcikgewogIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTsKICB2YXIgc3luYyA9IHN0YXRlLnN5bmM7CiAgdmFyIGNiID0gc3RhdGUud3JpdGVjYjsKCiAgb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlKTsKCiAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHsKICAgIC8vIENoZWNrIGlmIHdlJ3JlIGFjdHVhbGx5IHJlYWR5IHRvIGZpbmlzaCwgYnV0IGRvbid0IGVtaXQgeWV0CiAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKTsKCiAgICBpZiAoIWZpbmlzaGVkICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSB7CiAgICAgIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpOwogICAgfQoKICAgIGlmIChzeW5jKSB7CiAgICAgIC8qPHJlcGxhY2VtZW50PiovCiAgICAgIGFzeW5jV3JpdGUoYWZ0ZXJXcml0ZSwgc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTsKICAgICAgLyo8L3JlcGxhY2VtZW50PiovCiAgICB9IGVsc2UgewogICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikgewogIGlmICghZmluaXNoZWQpIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKTsKICBzdGF0ZS5wZW5kaW5nY2ItLTsKICBjYigpOwogIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpOwp9CgovLyBNdXN0IGZvcmNlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBvbiBuZXh0VGljaywgc28gdGhhdCB3ZSBkb24ndAovLyBlbWl0ICdkcmFpbicgYmVmb3JlIHRoZSB3cml0ZSgpIGNvbnN1bWVyIGdldHMgdGhlICdmYWxzZScgcmV0dXJuCi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuCmZ1bmN0aW9uIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHsKICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlOwogICAgc3RyZWFtLmVtaXQoJ2RyYWluJyk7CiAgfQp9CgovLyBpZiB0aGVyZSdzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHdhaXRpbmcsIHRoZW4gcHJvY2VzcyBpdApmdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7CiAgc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyA9IHRydWU7CiAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0OwoKICBpZiAoc3RyZWFtLl93cml0ZXYgJiYgZW50cnkgJiYgZW50cnkubmV4dCkgewogICAgLy8gRmFzdCBjYXNlLCB3cml0ZSBldmVyeXRoaW5nIHVzaW5nIF93cml0ZXYoKQogICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDsKICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXkobCk7CiAgICB2YXIgaG9sZGVyID0gc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlOwogICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7CgogICAgdmFyIGNvdW50ID0gMDsKICAgIHdoaWxlIChlbnRyeSkgewogICAgICBidWZmZXJbY291bnRdID0gZW50cnk7CiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDsKICAgICAgY291bnQgKz0gMTsKICAgIH0KCiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHRydWUsIHN0YXRlLmxlbmd0aCwgYnVmZmVyLCAnJywgaG9sZGVyLmZpbmlzaCk7CgogICAgLy8gZG9Xcml0ZSBpcyBhbG1vc3QgYWx3YXlzIGFzeW5jLCBkZWZlciB0aGVzZSB0byBzYXZlIGEgYml0IG9mIHRpbWUKICAgIC8vIGFzIHRoZSBob3QgcGF0aCBlbmRzIHdpdGggZG9Xcml0ZQogICAgc3RhdGUucGVuZGluZ2NiKys7CiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICAgIGlmIChob2xkZXIubmV4dCkgewogICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBob2xkZXIubmV4dDsKICAgICAgaG9sZGVyLm5leHQgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3Qoc3RhdGUpOwogICAgfQogIH0gZWxzZSB7CiAgICAvLyBTbG93IGNhc2UsIHdyaXRlIGNodW5rcyBvbmUtYnktb25lCiAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7CiAgICAgIHZhciBlbmNvZGluZyA9IGVudHJ5LmVuY29kaW5nOwogICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjazsKICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwoKICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTsKICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwogICAgICAvLyBpZiB3ZSBkaWRuJ3QgY2FsbCB0aGUgb253cml0ZSBpbW1lZGlhdGVseSwgdGhlbgogICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLgogICAgICAvLyBhbHNvLCB0aGF0IG1lYW5zIHRoYXQgdGhlIGNodW5rIGFuZCBjYiBhcmUgY3VycmVudGx5CiAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gbW92ZSB0aGUgYnVmZmVyIGNvdW50ZXIgcGFzdCB0aGVtLgogICAgICBpZiAoc3RhdGUud3JpdGluZykgewogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgaWYgKGVudHJ5ID09PSBudWxsKSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICB9CgogIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDsKICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBlbnRyeTsKICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7Cn0KCldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikgewogIGNiKG5ldyBFcnJvcignX3dyaXRlKCkgaXMgbm90IGltcGxlbWVudGVkJykpOwp9OwoKV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsOwoKV3JpdGFibGUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKCiAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ2Z1bmN0aW9uJykgewogICAgY2IgPSBjaHVuazsKICAgIGNodW5rID0gbnVsbDsKICAgIGVuY29kaW5nID0gbnVsbDsKICB9IGVsc2UgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykgewogICAgY2IgPSBlbmNvZGluZzsKICAgIGVuY29kaW5nID0gbnVsbDsKICB9CgogIGlmIChjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkKSB0aGlzLndyaXRlKGNodW5rLCBlbmNvZGluZyk7CgogIC8vIC5lbmQoKSBmdWxseSB1bmNvcmtzCiAgaWYgKHN0YXRlLmNvcmtlZCkgewogICAgc3RhdGUuY29ya2VkID0gMTsKICAgIHRoaXMudW5jb3JrKCk7CiAgfQoKICAvLyBpZ25vcmUgdW5uZWNlc3NhcnkgZW5kKCkgY2FsbHMuCiAgaWYgKCFzdGF0ZS5lbmRpbmcgJiYgIXN0YXRlLmZpbmlzaGVkKSBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpOwp9OwoKZnVuY3Rpb24gbmVlZEZpbmlzaChzdGF0ZSkgewogIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7Cn0KCmZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCkgewogICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlOwogICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpOwogIH0KfQoKZnVuY3Rpb24gZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSkgewogIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7CiAgaWYgKG5lZWQpIHsKICAgIGlmIChzdGF0ZS5wZW5kaW5nY2IgPT09IDApIHsKICAgICAgcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpOwogICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7CiAgICAgIHN0cmVhbS5lbWl0KCdmaW5pc2gnKTsKICAgIH0gZWxzZSB7CiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTsKICAgIH0KICB9CiAgcmV0dXJuIG5lZWQ7Cn0KCmZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7CiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTsKICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTsKICBpZiAoY2IpIHsKICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgcHJvY2Vzc05leHRUaWNrKGNiKTtlbHNlIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7CiAgfQogIHN0YXRlLmVuZGVkID0gdHJ1ZTsKICBzdHJlYW0ud3JpdGFibGUgPSBmYWxzZTsKfQoKLy8gSXQgc2VlbXMgYSBsaW5rZWQgbGlzdCBidXQgaXQgaXMgbm90Ci8vIHRoZXJlIHdpbGwgYmUgb25seSAyIG9mIHRoZXNlIGZvciBlYWNoIHN0cmVhbQpmdW5jdGlvbiBDb3JrZWRSZXF1ZXN0KHN0YXRlKSB7CiAgdmFyIF90aGlzID0gdGhpczsKCiAgdGhpcy5uZXh0ID0gbnVsbDsKICB0aGlzLmVudHJ5ID0gbnVsbDsKICB0aGlzLmZpbmlzaCA9IGZ1bmN0aW9uIChlcnIpIHsKICAgIHZhciBlbnRyeSA9IF90aGlzLmVudHJ5OwogICAgX3RoaXMuZW50cnkgPSBudWxsOwogICAgd2hpbGUgKGVudHJ5KSB7CiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrOwogICAgICBzdGF0ZS5wZW5kaW5nY2ItLTsKICAgICAgY2IoZXJyKTsKICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwogICAgfQogICAgaWYgKHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSkgewogICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUubmV4dCA9IF90aGlzOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gX3RoaXM7CiAgICB9CiAgfTsKfQovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1KSwgX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpLnNldEltbWVkaWF0ZSkpCgovKioqLyB9KSwKLyogMTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MpIHt2YXIgU3RyZWFtID0gKGZ1bmN0aW9uICgpewogIHRyeSB7CiAgICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7IC8vIGhhY2sgdG8gZml4IGEgY2lyY3VsYXIgZGVwZW5kZW5jeSBpc3N1ZSB3aGVuIHVzZWQgd2l0aCBicm93c2VyaWZ5CiAgfSBjYXRjaChfKXt9Cn0oKSk7CmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpOwpleHBvcnRzLlN0cmVhbSA9IFN0cmVhbSB8fCBleHBvcnRzOwpleHBvcnRzLlJlYWRhYmxlID0gZXhwb3J0czsKZXhwb3J0cy5Xcml0YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOwpleHBvcnRzLkR1cGxleCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7CmV4cG9ydHMuVHJhbnNmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CmV4cG9ydHMuUGFzc1Rocm91Z2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTsKCmlmICghcHJvY2Vzcy5icm93c2VyICYmIHByb2Nlc3MuZW52LlJFQURBQkxFX1NUUkVBTSA9PT0gJ2Rpc2FibGUnICYmIFN0cmVhbSkgewogIG1vZHVsZS5leHBvcnRzID0gU3RyZWFtOwp9CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1KSkpCgovKioqLyB9KSwKLyogMTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gcnRtc3RhcnQ7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBydG1zdGFydChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3J0bS5zdGFydCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgptb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTsKCnZhciBFRSA9IF9fd2VicGFja19yZXF1aXJlX18oOCkuRXZlbnRFbWl0dGVyOwp2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwoKaW5oZXJpdHMoU3RyZWFtLCBFRSk7ClN0cmVhbS5SZWFkYWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpOwpTdHJlYW0uV3JpdGFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Mik7ClN0cmVhbS5EdXBsZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7ClN0cmVhbS5UcmFuc2Zvcm0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MSk7ClN0cmVhbS5QYXNzVGhyb3VnaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQwKTsKCi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuNC54ClN0cmVhbS5TdHJlYW0gPSBTdHJlYW07CgoKCi8vIG9sZC1zdHlsZSBzdHJlYW1zLiAgTm90ZSB0aGF0IHRoZSBwaXBlIG1ldGhvZCAodGhlIG9ubHkgcmVsZXZhbnQKLy8gcGFydCBvZiB0aGlzIGNsYXNzKSBpcyBvdmVycmlkZGVuIGluIHRoZSBSZWFkYWJsZSBjbGFzcy4KCmZ1bmN0aW9uIFN0cmVhbSgpIHsKICBFRS5jYWxsKHRoaXMpOwp9CgpTdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7CiAgdmFyIHNvdXJjZSA9IHRoaXM7CgogIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykgewogICAgaWYgKGRlc3Qud3JpdGFibGUpIHsKICAgICAgaWYgKGZhbHNlID09PSBkZXN0LndyaXRlKGNodW5rKSAmJiBzb3VyY2UucGF1c2UpIHsKICAgICAgICBzb3VyY2UucGF1c2UoKTsKICAgICAgfQogICAgfQogIH0KCiAgc291cmNlLm9uKCdkYXRhJywgb25kYXRhKTsKCiAgZnVuY3Rpb24gb25kcmFpbigpIHsKICAgIGlmIChzb3VyY2UucmVhZGFibGUgJiYgc291cmNlLnJlc3VtZSkgewogICAgICBzb3VyY2UucmVzdW1lKCk7CiAgICB9CiAgfQoKICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pOwoKICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuCiAgLy8gc291cmNlIGdldHMgdGhlICdlbmQnIG9yICdjbG9zZScgZXZlbnRzLiAgT25seSBkZXN0LmVuZCgpIG9uY2UuCiAgaWYgKCFkZXN0Ll9pc1N0ZGlvICYmICghb3B0aW9ucyB8fCBvcHRpb25zLmVuZCAhPT0gZmFsc2UpKSB7CiAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTsKICAgIHNvdXJjZS5vbignY2xvc2UnLCBvbmNsb3NlKTsKICB9CgogIHZhciBkaWRPbkVuZCA9IGZhbHNlOwogIGZ1bmN0aW9uIG9uZW5kKCkgewogICAgaWYgKGRpZE9uRW5kKSByZXR1cm47CiAgICBkaWRPbkVuZCA9IHRydWU7CgogICAgZGVzdC5lbmQoKTsKICB9CgoKICBmdW5jdGlvbiBvbmNsb3NlKCkgewogICAgaWYgKGRpZE9uRW5kKSByZXR1cm47CiAgICBkaWRPbkVuZCA9IHRydWU7CgogICAgaWYgKHR5cGVvZiBkZXN0LmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIGRlc3QuZGVzdHJveSgpOwogIH0KCiAgLy8gZG9uJ3QgbGVhdmUgZGFuZ2xpbmcgcGlwZXMgd2hlbiB0aGVyZSBhcmUgZXJyb3JzLgogIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHsKICAgIGNsZWFudXAoKTsKICAgIGlmIChFRS5saXN0ZW5lckNvdW50KHRoaXMsICdlcnJvcicpID09PSAwKSB7CiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuCiAgICB9CiAgfQoKICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7CiAgZGVzdC5vbignZXJyb3InLCBvbmVycm9yKTsKCiAgLy8gcmVtb3ZlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZC4KICBmdW5jdGlvbiBjbGVhbnVwKCkgewogICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7CgogICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7CiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7CgogICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTsKCiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApOwogICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApOwoKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7CiAgfQoKICBzb3VyY2Uub24oJ2VuZCcsIGNsZWFudXApOwogIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTsKCiAgZGVzdC5vbignY2xvc2UnLCBjbGVhbnVwKTsKCiAgZGVzdC5lbWl0KCdwaXBlJywgc291cmNlKTsKCiAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQykKICByZXR1cm4gZGVzdDsKfTsKCgovKioqLyB9KSwKLyogMTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge3ZhciBDbGllbnRSZXF1ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzApCnZhciBleHRlbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OSkKdmFyIHN0YXR1c0NvZGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzEpCnZhciB1cmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQoKdmFyIGh0dHAgPSBleHBvcnRzCgpodHRwLnJlcXVlc3QgPSBmdW5jdGlvbiAob3B0cywgY2IpIHsKCWlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpCgkJb3B0cyA9IHVybC5wYXJzZShvcHRzKQoJZWxzZQoJCW9wdHMgPSBleHRlbmQob3B0cykKCgkvLyBOb3JtYWxseSwgdGhlIHBhZ2UgaXMgbG9hZGVkIGZyb20gaHR0cCBvciBodHRwcywgc28gbm90IHNwZWNpZnlpbmcgYSBwcm90b2NvbAoJLy8gd2lsbCByZXN1bHQgaW4gYSAodmFsaWQpIHByb3RvY29sLXJlbGF0aXZlIHVybC4gSG93ZXZlciwgdGhpcyB3b24ndCB3b3JrIGlmCgkvLyB0aGUgcHJvdG9jb2wgaXMgc29tZXRoaW5nIGVsc2UsIGxpa2UgJ2ZpbGU6JwoJdmFyIGRlZmF1bHRQcm90b2NvbCA9IGdsb2JhbC5sb2NhdGlvbi5wcm90b2NvbC5zZWFyY2goL15odHRwcz86JC8pID09PSAtMSA/ICdodHRwOicgOiAnJwoKCXZhciBwcm90b2NvbCA9IG9wdHMucHJvdG9jb2wgfHwgZGVmYXVsdFByb3RvY29sCgl2YXIgaG9zdCA9IG9wdHMuaG9zdG5hbWUgfHwgb3B0cy5ob3N0Cgl2YXIgcG9ydCA9IG9wdHMucG9ydAoJdmFyIHBhdGggPSBvcHRzLnBhdGggfHwgJy8nCgoJLy8gTmVjZXNzYXJ5IGZvciBJUHY2IGFkZHJlc3NlcwoJaWYgKGhvc3QgJiYgaG9zdC5pbmRleE9mKCc6JykgIT09IC0xKQoJCWhvc3QgPSAnWycgKyBob3N0ICsgJ10nCgoJLy8gVGhpcyBtYXkgYmUgYSByZWxhdGl2ZSB1cmwuIFRoZSBicm93c2VyIHNob3VsZCBhbHdheXMgYmUgYWJsZSB0byBpbnRlcnByZXQgaXQgY29ycmVjdGx5LgoJb3B0cy51cmwgPSAoaG9zdCA/IChwcm90b2NvbCArICcvLycgKyBob3N0KSA6ICcnKSArIChwb3J0ID8gJzonICsgcG9ydCA6ICcnKSArIHBhdGgKCW9wdHMubWV0aG9kID0gKG9wdHMubWV0aG9kIHx8ICdHRVQnKS50b1VwcGVyQ2FzZSgpCglvcHRzLmhlYWRlcnMgPSBvcHRzLmhlYWRlcnMgfHwge30KCgkvLyBBbHNvIHZhbGlkIG9wdHMuYXV0aCwgb3B0cy5tb2RlCgoJdmFyIHJlcSA9IG5ldyBDbGllbnRSZXF1ZXN0KG9wdHMpCglpZiAoY2IpCgkJcmVxLm9uKCdyZXNwb25zZScsIGNiKQoJcmV0dXJuIHJlcQp9CgpodHRwLmdldCA9IGZ1bmN0aW9uIGdldCAob3B0cywgY2IpIHsKCXZhciByZXEgPSBodHRwLnJlcXVlc3Qob3B0cywgY2IpCglyZXEuZW5kKCkKCXJldHVybiByZXEKfQoKaHR0cC5BZ2VudCA9IGZ1bmN0aW9uICgpIHt9Cmh0dHAuQWdlbnQuZGVmYXVsdE1heFNvY2tldHMgPSA0CgpodHRwLlNUQVRVU19DT0RFUyA9IHN0YXR1c0NvZGVzCgpodHRwLk1FVEhPRFMgPSBbCgknQ0hFQ0tPVVQnLAoJJ0NPTk5FQ1QnLAoJJ0NPUFknLAoJJ0RFTEVURScsCgknR0VUJywKCSdIRUFEJywKCSdMT0NLJywKCSdNLVNFQVJDSCcsCgknTUVSR0UnLAoJJ01LQUNUSVZJVFknLAoJJ01LQ09MJywKCSdNT1ZFJywKCSdOT1RJRlknLAoJJ09QVElPTlMnLAoJJ1BBVENIJywKCSdQT1NUJywKCSdQUk9QRklORCcsCgknUFJPUFBBVENIJywKCSdQVVJHRScsCgknUFVUJywKCSdSRVBPUlQnLAoJJ1NFQVJDSCcsCgknU1VCU0NSSUJFJywKCSdUUkFDRScsCgknVU5MT0NLJywKCSdVTlNVQlNDUklCRScKXQovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygzKSkpCgovKioqLyB9KSwKLyogMTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgoKCnZhciBwdW55Y29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTM1KTsKdmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nik7CgpleHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7CmV4cG9ydHMucmVzb2x2ZSA9IHVybFJlc29sdmU7CmV4cG9ydHMucmVzb2x2ZU9iamVjdCA9IHVybFJlc29sdmVPYmplY3Q7CmV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0OwoKZXhwb3J0cy5VcmwgPSBVcmw7CgpmdW5jdGlvbiBVcmwoKSB7CiAgdGhpcy5wcm90b2NvbCA9IG51bGw7CiAgdGhpcy5zbGFzaGVzID0gbnVsbDsKICB0aGlzLmF1dGggPSBudWxsOwogIHRoaXMuaG9zdCA9IG51bGw7CiAgdGhpcy5wb3J0ID0gbnVsbDsKICB0aGlzLmhvc3RuYW1lID0gbnVsbDsKICB0aGlzLmhhc2ggPSBudWxsOwogIHRoaXMuc2VhcmNoID0gbnVsbDsKICB0aGlzLnF1ZXJ5ID0gbnVsbDsKICB0aGlzLnBhdGhuYW1lID0gbnVsbDsKICB0aGlzLnBhdGggPSBudWxsOwogIHRoaXMuaHJlZiA9IG51bGw7Cn0KCi8vIFJlZmVyZW5jZTogUkZDIDM5ODYsIFJGQyAxODA4LCBSRkMgMjM5NgoKLy8gZGVmaW5lIHRoZXNlIGhlcmUgc28gYXQgbGVhc3QgdGhleSBvbmx5IGhhdmUgdG8gYmUKLy8gY29tcGlsZWQgb25jZSBvbiB0aGUgZmlyc3QgbW9kdWxlIGxvYWQuCnZhciBwcm90b2NvbFBhdHRlcm4gPSAvXihbYS16MC05ListXSs6KS9pLAogICAgcG9ydFBhdHRlcm4gPSAvOlswLTldKiQvLAoKICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgYSBzaW1wbGUgcGF0aCBVUkwKICAgIHNpbXBsZVBhdGhQYXR0ZXJuID0gL14oXC9cLz8oPyFcLylbXlw/XHNdKikoXD9bXlxzXSopPyQvLAoKICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIHJlc2VydmVkIGZvciBkZWxpbWl0aW5nIFVSTHMuCiAgICAvLyBXZSBhY3R1YWxseSBqdXN0IGF1dG8tZXNjYXBlIHRoZXNlLgogICAgZGVsaW1zID0gWyc8JywgJz4nLCAnIicsICdgJywgJyAnLCAnXHInLCAnXG4nLCAnXHQnXSwKCiAgICAvLyBSRkMgMjM5NjogY2hhcmFjdGVycyBub3QgYWxsb3dlZCBmb3IgdmFyaW91cyByZWFzb25zLgogICAgdW53aXNlID0gWyd7JywgJ30nLCAnfCcsICdcXCcsICdeJywgJ2AnXS5jb25jYXQoZGVsaW1zKSwKCiAgICAvLyBBbGxvd2VkIGJ5IFJGQ3MsIGJ1dCBjYXVzZSBvZiBYU1MgYXR0YWNrcy4gIEFsd2F5cyBlc2NhcGUgdGhlc2UuCiAgICBhdXRvRXNjYXBlID0gWydcJyddLmNvbmNhdCh1bndpc2UpLAogICAgLy8gQ2hhcmFjdGVycyB0aGF0IGFyZSBuZXZlciBldmVyIGFsbG93ZWQgaW4gYSBob3N0bmFtZS4KICAgIC8vIE5vdGUgdGhhdCBhbnkgaW52YWxpZCBjaGFycyBhcmUgYWxzbyBoYW5kbGVkLCBidXQgdGhlc2UKICAgIC8vIGFyZSB0aGUgb25lcyB0aGF0IGFyZSAqZXhwZWN0ZWQqIHRvIGJlIHNlZW4sIHNvIHdlIGZhc3QtcGF0aAogICAgLy8gdGhlbS4KICAgIG5vbkhvc3RDaGFycyA9IFsnJScsICcvJywgJz8nLCAnOycsICcjJ10uY29uY2F0KGF1dG9Fc2NhcGUpLAogICAgaG9zdEVuZGluZ0NoYXJzID0gWycvJywgJz8nLCAnIyddLAogICAgaG9zdG5hbWVNYXhMZW4gPSAyNTUsCiAgICBob3N0bmFtZVBhcnRQYXR0ZXJuID0gL15bK2EtejAtOUEtWl8tXXswLDYzfSQvLAogICAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbK2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sCiAgICAvLyBwcm90b2NvbHMgdGhhdCBjYW4gYWxsb3cgInVuc2FmZSIgYW5kICJ1bndpc2UiIGNoYXJzLgogICAgdW5zYWZlUHJvdG9jb2wgPSB7CiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSwKICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZQogICAgfSwKICAgIC8vIHByb3RvY29scyB0aGF0IG5ldmVyIGhhdmUgYSBob3N0bmFtZS4KICAgIGhvc3RsZXNzUHJvdG9jb2wgPSB7CiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSwKICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZQogICAgfSwKICAgIC8vIHByb3RvY29scyB0aGF0IGFsd2F5cyBjb250YWluIGEgLy8gYml0LgogICAgc2xhc2hlZFByb3RvY29sID0gewogICAgICAnaHR0cCc6IHRydWUsCiAgICAgICdodHRwcyc6IHRydWUsCiAgICAgICdmdHAnOiB0cnVlLAogICAgICAnZ29waGVyJzogdHJ1ZSwKICAgICAgJ2ZpbGUnOiB0cnVlLAogICAgICAnaHR0cDonOiB0cnVlLAogICAgICAnaHR0cHM6JzogdHJ1ZSwKICAgICAgJ2Z0cDonOiB0cnVlLAogICAgICAnZ29waGVyOic6IHRydWUsCiAgICAgICdmaWxlOic6IHRydWUKICAgIH0sCiAgICBxdWVyeXN0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOwoKZnVuY3Rpb24gdXJsUGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkgewogIGlmICh1cmwgJiYgdXRpbC5pc09iamVjdCh1cmwpICYmIHVybCBpbnN0YW5jZW9mIFVybCkgcmV0dXJuIHVybDsKCiAgdmFyIHUgPSBuZXcgVXJsOwogIHUucGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCk7CiAgcmV0dXJuIHU7Cn0KClVybC5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbih1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KSB7CiAgaWYgKCF1dGlsLmlzU3RyaW5nKHVybCkpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgIiArIHR5cGVvZiB1cmwpOwogIH0KCiAgLy8gQ29weSBjaHJvbWUsIElFLCBvcGVyYSBiYWNrc2xhc2gtaGFuZGxpbmcgYmVoYXZpb3IuCiAgLy8gQmFjayBzbGFzaGVzIGJlZm9yZSB0aGUgcXVlcnkgc3RyaW5nIGdldCBjb252ZXJ0ZWQgdG8gZm9yd2FyZCBzbGFzaGVzCiAgLy8gU2VlOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjU5MTYKICB2YXIgcXVlcnlJbmRleCA9IHVybC5pbmRleE9mKCc/JyksCiAgICAgIHNwbGl0dGVyID0KICAgICAgICAgIChxdWVyeUluZGV4ICE9PSAtMSAmJiBxdWVyeUluZGV4IDwgdXJsLmluZGV4T2YoJyMnKSkgPyAnPycgOiAnIycsCiAgICAgIHVTcGxpdCA9IHVybC5zcGxpdChzcGxpdHRlciksCiAgICAgIHNsYXNoUmVnZXggPSAvXFwvZzsKICB1U3BsaXRbMF0gPSB1U3BsaXRbMF0ucmVwbGFjZShzbGFzaFJlZ2V4LCAnLycpOwogIHVybCA9IHVTcGxpdC5qb2luKHNwbGl0dGVyKTsKCiAgdmFyIHJlc3QgPSB1cmw7CgogIC8vIHRyaW0gYmVmb3JlIHByb2NlZWRpbmcuCiAgLy8gVGhpcyBpcyB0byBzdXBwb3J0IHBhcnNlIHN0dWZmIGxpa2UgIiAgaHR0cDovL2Zvby5jb20gIFxuIgogIHJlc3QgPSByZXN0LnRyaW0oKTsKCiAgaWYgKCFzbGFzaGVzRGVub3RlSG9zdCAmJiB1cmwuc3BsaXQoJyMnKS5sZW5ndGggPT09IDEpIHsKICAgIC8vIFRyeSBmYXN0IHBhdGggcmVnZXhwCiAgICB2YXIgc2ltcGxlUGF0aCA9IHNpbXBsZVBhdGhQYXR0ZXJuLmV4ZWMocmVzdCk7CiAgICBpZiAoc2ltcGxlUGF0aCkgewogICAgICB0aGlzLnBhdGggPSByZXN0OwogICAgICB0aGlzLmhyZWYgPSByZXN0OwogICAgICB0aGlzLnBhdGhuYW1lID0gc2ltcGxlUGF0aFsxXTsKICAgICAgaWYgKHNpbXBsZVBhdGhbMl0pIHsKICAgICAgICB0aGlzLnNlYXJjaCA9IHNpbXBsZVBhdGhbMl07CiAgICAgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHsKICAgICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeXN0cmluZy5wYXJzZSh0aGlzLnNlYXJjaC5zdWJzdHIoMSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5zZWFyY2guc3Vic3RyKDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSAnJzsKICAgICAgICB0aGlzLnF1ZXJ5ID0ge307CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfQoKICB2YXIgcHJvdG8gPSBwcm90b2NvbFBhdHRlcm4uZXhlYyhyZXN0KTsKICBpZiAocHJvdG8pIHsKICAgIHByb3RvID0gcHJvdG9bMF07CiAgICB2YXIgbG93ZXJQcm90byA9IHByb3RvLnRvTG93ZXJDYXNlKCk7CiAgICB0aGlzLnByb3RvY29sID0gbG93ZXJQcm90bzsKICAgIHJlc3QgPSByZXN0LnN1YnN0cihwcm90by5sZW5ndGgpOwogIH0KCiAgLy8gZmlndXJlIG91dCBpZiBpdCdzIGdvdCBhIGhvc3QKICAvLyB1c2VyQHNlcnZlciBpcyAqYWx3YXlzKiBpbnRlcnByZXRlZCBhcyBhIGhvc3RuYW1lLCBhbmQgdXJsCiAgLy8gcmVzb2x1dGlvbiB3aWxsIHRyZWF0IC8vZm9vL2JhciBhcyBob3N0PWZvbyxwYXRoPWJhciBiZWNhdXNlIHRoYXQncwogIC8vIGhvdyB0aGUgYnJvd3NlciByZXNvbHZlcyByZWxhdGl2ZSBVUkxzLgogIGlmIChzbGFzaGVzRGVub3RlSG9zdCB8fCBwcm90byB8fCByZXN0Lm1hdGNoKC9eXC9cL1teQFwvXStAW15AXC9dKy8pKSB7CiAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nOwogICAgaWYgKHNsYXNoZXMgJiYgIShwcm90byAmJiBob3N0bGVzc1Byb3RvY29sW3Byb3RvXSkpIHsKICAgICAgcmVzdCA9IHJlc3Quc3Vic3RyKDIpOwogICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlOwogICAgfQogIH0KCiAgaWYgKCFob3N0bGVzc1Byb3RvY29sW3Byb3RvXSAmJgogICAgICAoc2xhc2hlcyB8fCAocHJvdG8gJiYgIXNsYXNoZWRQcm90b2NvbFtwcm90b10pKSkgewoKICAgIC8vIHRoZXJlJ3MgYSBob3N0bmFtZS4KICAgIC8vIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuCiAgICAvLwogICAgLy8gSWYgdGhlcmUgaXMgYW4gQCBpbiB0aGUgaG9zdG5hbWUsIHRoZW4gbm9uLWhvc3QgY2hhcnMgKmFyZSogYWxsb3dlZAogICAgLy8gdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXIKICAgIC8vIGNvbWVzICpiZWZvcmUqIHRoZSBALXNpZ24uCiAgICAvLyBVUkxzIGFyZSBvYm5veGlvdXMuCiAgICAvLwogICAgLy8gZXg6CiAgICAvLyBodHRwOi8vYUBiQGMvID0+IHVzZXI6YUBiIGhvc3Q6YwogICAgLy8gaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AYwoKICAgIC8vIHYwLjEyIFRPRE8oaXNhYWNzKTogVGhpcyBpcyBub3QgcXVpdGUgaG93IENocm9tZSBkb2VzIHRoaW5ncy4KICAgIC8vIFJldmlldyBvdXIgdGVzdCBjYXNlIGFnYWluc3QgYnJvd3NlcnMgbW9yZSBjb21wcmVoZW5zaXZlbHkuCgogICAgLy8gZmluZCB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgYW55IGhvc3RFbmRpbmdDaGFycwogICAgdmFyIGhvc3RFbmQgPSAtMTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2YoaG9zdEVuZGluZ0NoYXJzW2ldKTsKICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKQogICAgICAgIGhvc3RFbmQgPSBoZWM7CiAgICB9CgogICAgLy8gYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlCiAgICAvLyBhdXRoIHBvcnRpb24gY2Fubm90IGdvIHBhc3QsIG9yIHRoZSBsYXN0IEAgY2hhciBpcyB0aGUgZGVjaWRlci4KICAgIHZhciBhdXRoLCBhdFNpZ247CiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHsKICAgICAgLy8gYXRTaWduIGNhbiBiZSBhbnl3aGVyZS4KICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcpOwogICAgfSBlbHNlIHsKICAgICAgLy8gYXRTaWduIG11c3QgYmUgaW4gYXV0aCBwb3J0aW9uLgogICAgICAvLyBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZAogICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7CiAgICB9CgogICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguCiAgICAvLyBQdWxsIHRoYXQgb2ZmLgogICAgaWYgKGF0U2lnbiAhPT0gLTEpIHsKICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTsKICAgICAgcmVzdCA9IHJlc3Quc2xpY2UoYXRTaWduICsgMSk7CiAgICAgIHRoaXMuYXV0aCA9IGRlY29kZVVSSUNvbXBvbmVudChhdXRoKTsKICAgIH0KCiAgICAvLyB0aGUgaG9zdCBpcyB0aGUgcmVtYWluaW5nIHRvIHRoZSBsZWZ0IG9mIHRoZSBmaXJzdCBub24taG9zdCBjaGFyCiAgICBob3N0RW5kID0gLTE7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vbkhvc3RDaGFycy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKG5vbkhvc3RDaGFyc1tpXSk7CiAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSkKICAgICAgICBob3N0RW5kID0gaGVjOwogICAgfQogICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LgogICAgaWYgKGhvc3RFbmQgPT09IC0xKQogICAgICBob3N0RW5kID0gcmVzdC5sZW5ndGg7CgogICAgdGhpcy5ob3N0ID0gcmVzdC5zbGljZSgwLCBob3N0RW5kKTsKICAgIHJlc3QgPSByZXN0LnNsaWNlKGhvc3RFbmQpOwoKICAgIC8vIHB1bGwgb3V0IHBvcnQuCiAgICB0aGlzLnBhcnNlSG9zdCgpOwoKICAgIC8vIHdlJ3ZlIGluZGljYXRlZCB0aGF0IHRoZXJlIGlzIGEgaG9zdG5hbWUsCiAgICAvLyBzbyBldmVuIGlmIGl0J3MgZW1wdHksIGl0IGhhcyB0byBiZSBwcmVzZW50LgogICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7CgogICAgLy8gaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF0KICAgIC8vIGFzc3VtZSB0aGF0IGl0J3MgYW4gSVB2NiBhZGRyZXNzLgogICAgdmFyIGlwdjZIb3N0bmFtZSA9IHRoaXMuaG9zdG5hbWVbMF0gPT09ICdbJyAmJgogICAgICAgIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nOwoKICAgIC8vIHZhbGlkYXRlIGEgbGl0dGxlLgogICAgaWYgKCFpcHY2SG9zdG5hbWUpIHsKICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1wuLyk7CiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gaG9zdHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIHZhciBwYXJ0ID0gaG9zdHBhcnRzW2ldOwogICAgICAgIGlmICghcGFydCkgY29udGludWU7CiAgICAgICAgaWYgKCFwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFBhdHRlcm4pKSB7CiAgICAgICAgICB2YXIgbmV3cGFydCA9ICcnOwogICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGsgPSBwYXJ0Lmxlbmd0aDsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAocGFydC5jaGFyQ29kZUF0KGopID4gMTI3KSB7CiAgICAgICAgICAgICAgLy8gd2UgcmVwbGFjZSBub24tQVNDSUkgY2hhciB3aXRoIGEgdGVtcG9yYXJ5IHBsYWNlaG9sZGVyCiAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0aGlzIHRvIG1ha2Ugc3VyZSBzaXplIG9mIGhvc3RuYW1lIGlzIG5vdAogICAgICAgICAgICAgIC8vIGJyb2tlbiBieSByZXBsYWNpbmcgbm9uLUFTQ0lJIGJ5IG5vdGhpbmcKICAgICAgICAgICAgICBuZXdwYXJ0ICs9ICd4JzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBuZXdwYXJ0ICs9IHBhcnRbal07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIHdlIHRlc3QgYWdhaW4gd2l0aCBBU0NJSSBjaGFyIG9ubHkKICAgICAgICAgIGlmICghbmV3cGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkgewogICAgICAgICAgICB2YXIgdmFsaWRQYXJ0cyA9IGhvc3RwYXJ0cy5zbGljZSgwLCBpKTsKICAgICAgICAgICAgdmFyIG5vdEhvc3QgPSBob3N0cGFydHMuc2xpY2UoaSArIDEpOwogICAgICAgICAgICB2YXIgYml0ID0gcGFydC5tYXRjaChob3N0bmFtZVBhcnRTdGFydCk7CiAgICAgICAgICAgIGlmIChiaXQpIHsKICAgICAgICAgICAgICB2YWxpZFBhcnRzLnB1c2goYml0WzFdKTsKICAgICAgICAgICAgICBub3RIb3N0LnVuc2hpZnQoYml0WzJdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobm90SG9zdC5sZW5ndGgpIHsKICAgICAgICAgICAgICByZXN0ID0gJy8nICsgbm90SG9zdC5qb2luKCcuJykgKyByZXN0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuaG9zdG5hbWUgPSB2YWxpZFBhcnRzLmpvaW4oJy4nKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKHRoaXMuaG9zdG5hbWUubGVuZ3RoID4gaG9zdG5hbWVNYXhMZW4pIHsKICAgICAgdGhpcy5ob3N0bmFtZSA9ICcnOwogICAgfSBlbHNlIHsKICAgICAgLy8gaG9zdG5hbWVzIGFyZSBhbHdheXMgbG93ZXIgY2FzZS4KICAgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUudG9Mb3dlckNhc2UoKTsKICAgIH0KCiAgICBpZiAoIWlwdjZIb3N0bmFtZSkgewogICAgICAvLyBJRE5BIFN1cHBvcnQ6IFJldHVybnMgYSBwdW55Y29kZWQgcmVwcmVzZW50YXRpb24gb2YgImRvbWFpbiIuCiAgICAgIC8vIEl0IG9ubHkgY29udmVydHMgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHRoYXQKICAgICAgLy8gaGF2ZSBub24tQVNDSUkgY2hhcmFjdGVycywgaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZgogICAgICAvLyB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQgYWxyZWFkeSBpcyBBU0NJSS1vbmx5LgogICAgICB0aGlzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLmhvc3RuYW1lKTsKICAgIH0KCiAgICB2YXIgcCA9IHRoaXMucG9ydCA/ICc6JyArIHRoaXMucG9ydCA6ICcnOwogICAgdmFyIGggPSB0aGlzLmhvc3RuYW1lIHx8ICcnOwogICAgdGhpcy5ob3N0ID0gaCArIHA7CiAgICB0aGlzLmhyZWYgKz0gdGhpcy5ob3N0OwoKICAgIC8vIHN0cmlwIFsgYW5kIF0gZnJvbSB0aGUgaG9zdG5hbWUKICAgIC8vIHRoZSBob3N0IGZpZWxkIHN0aWxsIHJldGFpbnMgdGhlbSwgdGhvdWdoCiAgICBpZiAoaXB2Nkhvc3RuYW1lKSB7CiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnN1YnN0cigxLCB0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDIpOwogICAgICBpZiAocmVzdFswXSAhPT0gJy8nKSB7CiAgICAgICAgcmVzdCA9ICcvJyArIHJlc3Q7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIG5vdyByZXN0IGlzIHNldCB0byB0aGUgcG9zdC1ob3N0IHN0dWZmLgogIC8vIGNob3Agb2ZmIGFueSBkZWxpbSBjaGFycy4KICBpZiAoIXVuc2FmZVByb3RvY29sW2xvd2VyUHJvdG9dKSB7CgogICAgLy8gRmlyc3QsIG1ha2UgMTAwJSBzdXJlIHRoYXQgYW55ICJhdXRvRXNjYXBlIiBjaGFycyBnZXQKICAgIC8vIGVzY2FwZWQsIGV2ZW4gaWYgZW5jb2RlVVJJQ29tcG9uZW50IGRvZXNuJ3QgdGhpbmsgdGhleQogICAgLy8gbmVlZCB0byBiZS4KICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXV0b0VzY2FwZS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIGFlID0gYXV0b0VzY2FwZVtpXTsKICAgICAgaWYgKHJlc3QuaW5kZXhPZihhZSkgPT09IC0xKQogICAgICAgIGNvbnRpbnVlOwogICAgICB2YXIgZXNjID0gZW5jb2RlVVJJQ29tcG9uZW50KGFlKTsKICAgICAgaWYgKGVzYyA9PT0gYWUpIHsKICAgICAgICBlc2MgPSBlc2NhcGUoYWUpOwogICAgICB9CiAgICAgIHJlc3QgPSByZXN0LnNwbGl0KGFlKS5qb2luKGVzYyk7CiAgICB9CiAgfQoKCiAgLy8gY2hvcCBvZmYgZnJvbSB0aGUgdGFpbCBmaXJzdC4KICB2YXIgaGFzaCA9IHJlc3QuaW5kZXhPZignIycpOwogIGlmIChoYXNoICE9PSAtMSkgewogICAgLy8gZ290IGEgZnJhZ21lbnQgc3RyaW5nLgogICAgdGhpcy5oYXNoID0gcmVzdC5zdWJzdHIoaGFzaCk7CiAgICByZXN0ID0gcmVzdC5zbGljZSgwLCBoYXNoKTsKICB9CiAgdmFyIHFtID0gcmVzdC5pbmRleE9mKCc/Jyk7CiAgaWYgKHFtICE9PSAtMSkgewogICAgdGhpcy5zZWFyY2ggPSByZXN0LnN1YnN0cihxbSk7CiAgICB0aGlzLnF1ZXJ5ID0gcmVzdC5zdWJzdHIocW0gKyAxKTsKICAgIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7CiAgICAgIHRoaXMucXVlcnkgPSBxdWVyeXN0cmluZy5wYXJzZSh0aGlzLnF1ZXJ5KTsKICAgIH0KICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIHFtKTsKICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHsKICAgIC8vIG5vIHF1ZXJ5IHN0cmluZywgYnV0IHBhcnNlUXVlcnlTdHJpbmcgc3RpbGwgcmVxdWVzdGVkCiAgICB0aGlzLnNlYXJjaCA9ICcnOwogICAgdGhpcy5xdWVyeSA9IHt9OwogIH0KICBpZiAocmVzdCkgdGhpcy5wYXRobmFtZSA9IHJlc3Q7CiAgaWYgKHNsYXNoZWRQcm90b2NvbFtsb3dlclByb3RvXSAmJgogICAgICB0aGlzLmhvc3RuYW1lICYmICF0aGlzLnBhdGhuYW1lKSB7CiAgICB0aGlzLnBhdGhuYW1lID0gJy8nOwogIH0KCiAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdAogIGlmICh0aGlzLnBhdGhuYW1lIHx8IHRoaXMuc2VhcmNoKSB7CiAgICB2YXIgcCA9IHRoaXMucGF0aG5hbWUgfHwgJyc7CiAgICB2YXIgcyA9IHRoaXMuc2VhcmNoIHx8ICcnOwogICAgdGhpcy5wYXRoID0gcCArIHM7CiAgfQoKICAvLyBmaW5hbGx5LCByZWNvbnN0cnVjdCB0aGUgaHJlZiBiYXNlZCBvbiB3aGF0IGhhcyBiZWVuIHZhbGlkYXRlZC4KICB0aGlzLmhyZWYgPSB0aGlzLmZvcm1hdCgpOwogIHJldHVybiB0aGlzOwp9OwoKLy8gZm9ybWF0IGEgcGFyc2VkIG9iamVjdCBpbnRvIGEgdXJsIHN0cmluZwpmdW5jdGlvbiB1cmxGb3JtYXQob2JqKSB7CiAgLy8gZW5zdXJlIGl0J3MgYW4gb2JqZWN0LCBhbmQgbm90IGEgc3RyaW5nIHVybC4KICAvLyBJZiBpdCdzIGFuIG9iaiwgdGhpcyBpcyBhIG5vLW9wLgogIC8vIHRoaXMgd2F5LCB5b3UgY2FuIGNhbGwgdXJsX2Zvcm1hdCgpIG9uIHN0cmluZ3MKICAvLyB0byBjbGVhbiB1cCBwb3RlbnRpYWxseSB3b25reSB1cmxzLgogIGlmICh1dGlsLmlzU3RyaW5nKG9iaikpIG9iaiA9IHVybFBhcnNlKG9iaik7CiAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgcmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKTsKICByZXR1cm4gb2JqLmZvcm1hdCgpOwp9CgpVcmwucHJvdG90eXBlLmZvcm1hdCA9IGZ1bmN0aW9uKCkgewogIHZhciBhdXRoID0gdGhpcy5hdXRoIHx8ICcnOwogIGlmIChhdXRoKSB7CiAgICBhdXRoID0gZW5jb2RlVVJJQ29tcG9uZW50KGF1dGgpOwogICAgYXV0aCA9IGF1dGgucmVwbGFjZSgvJTNBL2ksICc6Jyk7CiAgICBhdXRoICs9ICdAJzsKICB9CgogIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsCiAgICAgIHBhdGhuYW1lID0gdGhpcy5wYXRobmFtZSB8fCAnJywKICAgICAgaGFzaCA9IHRoaXMuaGFzaCB8fCAnJywKICAgICAgaG9zdCA9IGZhbHNlLAogICAgICBxdWVyeSA9ICcnOwoKICBpZiAodGhpcy5ob3N0KSB7CiAgICBob3N0ID0gYXV0aCArIHRoaXMuaG9zdDsKICB9IGVsc2UgaWYgKHRoaXMuaG9zdG5hbWUpIHsKICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/CiAgICAgICAgdGhpcy5ob3N0bmFtZSA6CiAgICAgICAgJ1snICsgdGhpcy5ob3N0bmFtZSArICddJyk7CiAgICBpZiAodGhpcy5wb3J0KSB7CiAgICAgIGhvc3QgKz0gJzonICsgdGhpcy5wb3J0OwogICAgfQogIH0KCiAgaWYgKHRoaXMucXVlcnkgJiYKICAgICAgdXRpbC5pc09iamVjdCh0aGlzLnF1ZXJ5KSAmJgogICAgICBPYmplY3Qua2V5cyh0aGlzLnF1ZXJ5KS5sZW5ndGgpIHsKICAgIHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHRoaXMucXVlcnkpOwogIH0KCiAgdmFyIHNlYXJjaCA9IHRoaXMuc2VhcmNoIHx8IChxdWVyeSAmJiAoJz8nICsgcXVlcnkpKSB8fCAnJzsKCiAgaWYgKHByb3RvY29sICYmIHByb3RvY29sLnN1YnN0cigtMSkgIT09ICc6JykgcHJvdG9jb2wgKz0gJzonOwoKICAvLyBvbmx5IHRoZSBzbGFzaGVkUHJvdG9jb2xzIGdldCB0aGUgLy8uICBOb3QgbWFpbHRvOiwgeG1wcDosIGV0Yy4KICAvLyB1bmxlc3MgdGhleSBoYWQgdGhlbSB0byBiZWdpbiB3aXRoLgogIGlmICh0aGlzLnNsYXNoZXMgfHwKICAgICAgKCFwcm90b2NvbCB8fCBzbGFzaGVkUHJvdG9jb2xbcHJvdG9jb2xdKSAmJiBob3N0ICE9PSBmYWxzZSkgewogICAgaG9zdCA9ICcvLycgKyAoaG9zdCB8fCAnJyk7CiAgICBpZiAocGF0aG5hbWUgJiYgcGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHBhdGhuYW1lID0gJy8nICsgcGF0aG5hbWU7CiAgfSBlbHNlIGlmICghaG9zdCkgewogICAgaG9zdCA9ICcnOwogIH0KCiAgaWYgKGhhc2ggJiYgaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgaGFzaCA9ICcjJyArIGhhc2g7CiAgaWYgKHNlYXJjaCAmJiBzZWFyY2guY2hhckF0KDApICE9PSAnPycpIHNlYXJjaCA9ICc/JyArIHNlYXJjaDsKCiAgcGF0aG5hbWUgPSBwYXRobmFtZS5yZXBsYWNlKC9bPyNdL2csIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG1hdGNoKTsKICB9KTsKICBzZWFyY2ggPSBzZWFyY2gucmVwbGFjZSgnIycsICclMjMnKTsKCiAgcmV0dXJuIHByb3RvY29sICsgaG9zdCArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDsKfTsKCmZ1bmN0aW9uIHVybFJlc29sdmUoc291cmNlLCByZWxhdGl2ZSkgewogIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlKHJlbGF0aXZlKTsKfQoKVXJsLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24ocmVsYXRpdmUpIHsKICByZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KHVybFBhcnNlKHJlbGF0aXZlLCBmYWxzZSwgdHJ1ZSkpLmZvcm1hdCgpOwp9OwoKZnVuY3Rpb24gdXJsUmVzb2x2ZU9iamVjdChzb3VyY2UsIHJlbGF0aXZlKSB7CiAgaWYgKCFzb3VyY2UpIHJldHVybiByZWxhdGl2ZTsKICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZU9iamVjdChyZWxhdGl2ZSk7Cn0KClVybC5wcm90b3R5cGUucmVzb2x2ZU9iamVjdCA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7CiAgaWYgKHV0aWwuaXNTdHJpbmcocmVsYXRpdmUpKSB7CiAgICB2YXIgcmVsID0gbmV3IFVybCgpOwogICAgcmVsLnBhcnNlKHJlbGF0aXZlLCBmYWxzZSwgdHJ1ZSk7CiAgICByZWxhdGl2ZSA9IHJlbDsKICB9CgogIHZhciByZXN1bHQgPSBuZXcgVXJsKCk7CiAgdmFyIHRrZXlzID0gT2JqZWN0LmtleXModGhpcyk7CiAgZm9yICh2YXIgdGsgPSAwOyB0ayA8IHRrZXlzLmxlbmd0aDsgdGsrKykgewogICAgdmFyIHRrZXkgPSB0a2V5c1t0a107CiAgICByZXN1bHRbdGtleV0gPSB0aGlzW3RrZXldOwogIH0KCiAgLy8gaGFzaCBpcyBhbHdheXMgb3ZlcnJpZGRlbiwgbm8gbWF0dGVyIHdoYXQuCiAgLy8gZXZlbiBocmVmPSIiIHdpbGwgcmVtb3ZlIGl0LgogIHJlc3VsdC5oYXNoID0gcmVsYXRpdmUuaGFzaDsKCiAgLy8gaWYgdGhlIHJlbGF0aXZlIHVybCBpcyBlbXB0eSwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkbyBoZXJlLgogIGlmIChyZWxhdGl2ZS5ocmVmID09PSAnJykgewogICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuCiAgaWYgKHJlbGF0aXZlLnNsYXNoZXMgJiYgIXJlbGF0aXZlLnByb3RvY29sKSB7CiAgICAvLyB0YWtlIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBwcm90b2NvbCBmcm9tIHJlbGF0aXZlCiAgICB2YXIgcmtleXMgPSBPYmplY3Qua2V5cyhyZWxhdGl2ZSk7CiAgICBmb3IgKHZhciByayA9IDA7IHJrIDwgcmtleXMubGVuZ3RoOyByaysrKSB7CiAgICAgIHZhciBya2V5ID0gcmtleXNbcmtdOwogICAgICBpZiAocmtleSAhPT0gJ3Byb3RvY29sJykKICAgICAgICByZXN1bHRbcmtleV0gPSByZWxhdGl2ZVtya2V5XTsKICAgIH0KCiAgICAvL3VybFBhcnNlIGFwcGVuZHMgdHJhaWxpbmcgLyB0byB1cmxzIGxpa2UgaHR0cDovL3d3dy5leGFtcGxlLmNvbQogICAgaWYgKHNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdICYmCiAgICAgICAgcmVzdWx0Lmhvc3RuYW1lICYmICFyZXN1bHQucGF0aG5hbWUpIHsKICAgICAgcmVzdWx0LnBhdGggPSByZXN1bHQucGF0aG5hbWUgPSAnLyc7CiAgICB9CgogICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgaWYgKHJlbGF0aXZlLnByb3RvY29sICYmIHJlbGF0aXZlLnByb3RvY29sICE9PSByZXN1bHQucHJvdG9jb2wpIHsKICAgIC8vIGlmIGl0J3MgYSBrbm93biB1cmwgcHJvdG9jb2wsIHRoZW4gY2hhbmdpbmcKICAgIC8vIHRoZSBwcm90b2NvbCBkb2VzIHdlaXJkIHRoaW5ncwogICAgLy8gZmlyc3QsIGlmIGl0J3Mgbm90IGZpbGU6LCB0aGVuIHdlIE1VU1QgaGF2ZSBhIGhvc3QsCiAgICAvLyBhbmQgaWYgdGhlcmUgd2FzIGEgcGF0aAogICAgLy8gdG8gYmVnaW4gd2l0aCwgdGhlbiB3ZSBNVVNUIGhhdmUgYSBwYXRoLgogICAgLy8gaWYgaXQgaXMgZmlsZTosIHRoZW4gdGhlIGhvc3QgaXMgZHJvcHBlZCwKICAgIC8vIGJlY2F1c2UgdGhhdCdzIGtub3duIHRvIGJlIGhvc3RsZXNzLgogICAgLy8gYW55dGhpbmcgZWxzZSBpcyBhc3N1bWVkIHRvIGJlIGFic29sdXRlLgogICAgaWYgKCFzbGFzaGVkUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKSB7CiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpOwogICAgICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHsKICAgICAgICB2YXIgayA9IGtleXNbdl07CiAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107CiAgICAgIH0KICAgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgcmVzdWx0LnByb3RvY29sID0gcmVsYXRpdmUucHJvdG9jb2w7CiAgICBpZiAoIXJlbGF0aXZlLmhvc3QgJiYgIWhvc3RsZXNzUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKSB7CiAgICAgIHZhciByZWxQYXRoID0gKHJlbGF0aXZlLnBhdGhuYW1lIHx8ICcnKS5zcGxpdCgnLycpOwogICAgICB3aGlsZSAocmVsUGF0aC5sZW5ndGggJiYgIShyZWxhdGl2ZS5ob3N0ID0gcmVsUGF0aC5zaGlmdCgpKSk7CiAgICAgIGlmICghcmVsYXRpdmUuaG9zdCkgcmVsYXRpdmUuaG9zdCA9ICcnOwogICAgICBpZiAoIXJlbGF0aXZlLmhvc3RuYW1lKSByZWxhdGl2ZS5ob3N0bmFtZSA9ICcnOwogICAgICBpZiAocmVsUGF0aFswXSAhPT0gJycpIHJlbFBhdGgudW5zaGlmdCgnJyk7CiAgICAgIGlmIChyZWxQYXRoLmxlbmd0aCA8IDIpIHJlbFBhdGgudW5zaGlmdCgnJyk7CiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbFBhdGguam9pbignLycpOwogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsYXRpdmUucGF0aG5hbWU7CiAgICB9CiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoOwogICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7CiAgICByZXN1bHQuaG9zdCA9IHJlbGF0aXZlLmhvc3QgfHwgJyc7CiAgICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGg7CiAgICByZXN1bHQuaG9zdG5hbWUgPSByZWxhdGl2ZS5ob3N0bmFtZSB8fCByZWxhdGl2ZS5ob3N0OwogICAgcmVzdWx0LnBvcnQgPSByZWxhdGl2ZS5wb3J0OwogICAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3QKICAgIGlmIChyZXN1bHQucGF0aG5hbWUgfHwgcmVzdWx0LnNlYXJjaCkgewogICAgICB2YXIgcCA9IHJlc3VsdC5wYXRobmFtZSB8fCAnJzsKICAgICAgdmFyIHMgPSByZXN1bHQuc2VhcmNoIHx8ICcnOwogICAgICByZXN1bHQucGF0aCA9IHAgKyBzOwogICAgfQogICAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzOwogICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgdmFyIGlzU291cmNlQWJzID0gKHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpLAogICAgICBpc1JlbEFicyA9ICgKICAgICAgICAgIHJlbGF0aXZlLmhvc3QgfHwKICAgICAgICAgIHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nCiAgICAgICksCiAgICAgIG11c3RFbmRBYnMgPSAoaXNSZWxBYnMgfHwgaXNTb3VyY2VBYnMgfHwKICAgICAgICAgICAgICAgICAgICAocmVzdWx0Lmhvc3QgJiYgcmVsYXRpdmUucGF0aG5hbWUpKSwKICAgICAgcmVtb3ZlQWxsRG90cyA9IG11c3RFbmRBYnMsCiAgICAgIHNyY1BhdGggPSByZXN1bHQucGF0aG5hbWUgJiYgcmVzdWx0LnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sCiAgICAgIHJlbFBhdGggPSByZWxhdGl2ZS5wYXRobmFtZSAmJiByZWxhdGl2ZS5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLAogICAgICBwc3ljaG90aWMgPSByZXN1bHQucHJvdG9jb2wgJiYgIXNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdOwoKICAvLyBpZiB0aGUgdXJsIGlzIGEgbm9uLXNsYXNoZWQgdXJsLCB0aGVuIHJlbGF0aXZlCiAgLy8gbGlua3MgbGlrZSAuLi8uLiBzaG91bGQgYmUgYWJsZQogIC8vIHRvIGNyYXdsIHVwIHRvIHRoZSBob3N0bmFtZSwgYXMgd2VsbC4gIFRoaXMgaXMgc3RyYW5nZS4KICAvLyByZXN1bHQucHJvdG9jb2wgaGFzIGFscmVhZHkgYmVlbiBzZXQgYnkgbm93LgogIC8vIExhdGVyIG9uLCBwdXQgdGhlIGZpcnN0IHBhdGggcGFydCBpbnRvIHRoZSBob3N0IGZpZWxkLgogIGlmIChwc3ljaG90aWMpIHsKICAgIHJlc3VsdC5ob3N0bmFtZSA9ICcnOwogICAgcmVzdWx0LnBvcnQgPSBudWxsOwogICAgaWYgKHJlc3VsdC5ob3N0KSB7CiAgICAgIGlmIChzcmNQYXRoWzBdID09PSAnJykgc3JjUGF0aFswXSA9IHJlc3VsdC5ob3N0OwogICAgICBlbHNlIHNyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCk7CiAgICB9CiAgICByZXN1bHQuaG9zdCA9ICcnOwogICAgaWYgKHJlbGF0aXZlLnByb3RvY29sKSB7CiAgICAgIHJlbGF0aXZlLmhvc3RuYW1lID0gbnVsbDsKICAgICAgcmVsYXRpdmUucG9ydCA9IG51bGw7CiAgICAgIGlmIChyZWxhdGl2ZS5ob3N0KSB7CiAgICAgICAgaWYgKHJlbFBhdGhbMF0gPT09ICcnKSByZWxQYXRoWzBdID0gcmVsYXRpdmUuaG9zdDsKICAgICAgICBlbHNlIHJlbFBhdGgudW5zaGlmdChyZWxhdGl2ZS5ob3N0KTsKICAgICAgfQogICAgICByZWxhdGl2ZS5ob3N0ID0gbnVsbDsKICAgIH0KICAgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzICYmIChyZWxQYXRoWzBdID09PSAnJyB8fCBzcmNQYXRoWzBdID09PSAnJyk7CiAgfQoKICBpZiAoaXNSZWxBYnMpIHsKICAgIC8vIGl0J3MgYWJzb2x1dGUuCiAgICByZXN1bHQuaG9zdCA9IChyZWxhdGl2ZS5ob3N0IHx8IHJlbGF0aXZlLmhvc3QgPT09ICcnKSA/CiAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3QgOiByZXN1bHQuaG9zdDsKICAgIHJlc3VsdC5ob3N0bmFtZSA9IChyZWxhdGl2ZS5ob3N0bmFtZSB8fCByZWxhdGl2ZS5ob3N0bmFtZSA9PT0gJycpID8KICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3RuYW1lIDogcmVzdWx0Lmhvc3RuYW1lOwogICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDsKICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5OwogICAgc3JjUGF0aCA9IHJlbFBhdGg7CiAgICAvLyBmYWxsIHRocm91Z2ggdG8gdGhlIGRvdC1oYW5kbGluZyBiZWxvdy4KICB9IGVsc2UgaWYgKHJlbFBhdGgubGVuZ3RoKSB7CiAgICAvLyBpdCdzIHJlbGF0aXZlCiAgICAvLyB0aHJvdyBhd2F5IHRoZSBleGlzdGluZyBmaWxlLCBhbmQgdGFrZSB0aGUgbmV3IHBhdGggaW5zdGVhZC4KICAgIGlmICghc3JjUGF0aCkgc3JjUGF0aCA9IFtdOwogICAgc3JjUGF0aC5wb3AoKTsKICAgIHNyY1BhdGggPSBzcmNQYXRoLmNvbmNhdChyZWxQYXRoKTsKICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7CiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTsKICB9IGVsc2UgaWYgKCF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKHJlbGF0aXZlLnNlYXJjaCkpIHsKICAgIC8vIGp1c3QgcHVsbCBvdXQgdGhlIHNlYXJjaC4KICAgIC8vIGxpa2UgaHJlZj0nP2ZvbycuCiAgICAvLyBQdXQgdGhpcyBhZnRlciB0aGUgb3RoZXIgdHdvIGNhc2VzIGJlY2F1c2UgaXQgc2ltcGxpZmllcyB0aGUgYm9vbGVhbnMKICAgIGlmIChwc3ljaG90aWMpIHsKICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBzcmNQYXRoLnNoaWZ0KCk7CiAgICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3QKICAgICAgLy90aGlzIGVzcGVjaWFsbHkgaGFwcGVucyBpbiBjYXNlcyBsaWtlCiAgICAgIC8vdXJsLnJlc29sdmVPYmplY3QoJ21haWx0bzpsb2NhbDFAZG9tYWluMScsICdsb2NhbDJAZG9tYWluMicpCiAgICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/CiAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmhvc3Quc3BsaXQoJ0AnKSA6IGZhbHNlOwogICAgICBpZiAoYXV0aEluSG9zdCkgewogICAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpOwogICAgICAgIHJlc3VsdC5ob3N0ID0gcmVzdWx0Lmhvc3RuYW1lID0gYXV0aEluSG9zdC5zaGlmdCgpOwogICAgICB9CiAgICB9CiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoOwogICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7CiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0CiAgICBpZiAoIXV0aWwuaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIXV0aWwuaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7CiAgICAgIHJlc3VsdC5wYXRoID0gKHJlc3VsdC5wYXRobmFtZSA/IHJlc3VsdC5wYXRobmFtZSA6ICcnKSArCiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpOwogICAgfQogICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgaWYgKCFzcmNQYXRoLmxlbmd0aCkgewogICAgLy8gbm8gcGF0aCBhdCBhbGwuICBlYXN5LgogICAgLy8gd2UndmUgYWxyZWFkeSBoYW5kbGVkIHRoZSBvdGhlciBzdHVmZiBhYm92ZS4KICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7CiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0CiAgICBpZiAocmVzdWx0LnNlYXJjaCkgewogICAgICByZXN1bHQucGF0aCA9ICcvJyArIHJlc3VsdC5zZWFyY2g7CiAgICB9IGVsc2UgewogICAgICByZXN1bHQucGF0aCA9IG51bGw7CiAgICB9CiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICAvLyBpZiBhIHVybCBFTkRzIGluIC4gb3IgLi4sIHRoZW4gaXQgbXVzdCBnZXQgYSB0cmFpbGluZyBzbGFzaC4KICAvLyBob3dldmVyLCBpZiBpdCBlbmRzIGluIGFueXRoaW5nIGVsc2Ugbm9uLXNsYXNoeSwKICAvLyB0aGVuIGl0IG11c3QgTk9UIGdldCBhIHRyYWlsaW5nIHNsYXNoLgogIHZhciBsYXN0ID0gc3JjUGF0aC5zbGljZSgtMSlbMF07CiAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSAoCiAgICAgIChyZXN1bHQuaG9zdCB8fCByZWxhdGl2ZS5ob3N0IHx8IHNyY1BhdGgubGVuZ3RoID4gMSkgJiYKICAgICAgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSB8fCBsYXN0ID09PSAnJyk7CgogIC8vIHN0cmlwIHNpbmdsZSBkb3RzLCByZXNvbHZlIGRvdWJsZSBkb3RzIHRvIHBhcmVudCBkaXIKICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMAogIHZhciB1cCA9IDA7CiAgZm9yICh2YXIgaSA9IHNyY1BhdGgubGVuZ3RoOyBpID49IDA7IGktLSkgewogICAgbGFzdCA9IHNyY1BhdGhbaV07CiAgICBpZiAobGFzdCA9PT0gJy4nKSB7CiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpOwogICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7CiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpOwogICAgICB1cCsrOwogICAgfSBlbHNlIGlmICh1cCkgewogICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTsKICAgICAgdXAtLTsKICAgIH0KICB9CgogIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnMKICBpZiAoIW11c3RFbmRBYnMgJiYgIXJlbW92ZUFsbERvdHMpIHsKICAgIGZvciAoOyB1cC0tOyB1cCkgewogICAgICBzcmNQYXRoLnVuc2hpZnQoJy4uJyk7CiAgICB9CiAgfQoKICBpZiAobXVzdEVuZEFicyAmJiBzcmNQYXRoWzBdICE9PSAnJyAmJgogICAgICAoIXNyY1BhdGhbMF0gfHwgc3JjUGF0aFswXS5jaGFyQXQoMCkgIT09ICcvJykpIHsKICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7CiAgfQoKICBpZiAoaGFzVHJhaWxpbmdTbGFzaCAmJiAoc3JjUGF0aC5qb2luKCcvJykuc3Vic3RyKC0xKSAhPT0gJy8nKSkgewogICAgc3JjUGF0aC5wdXNoKCcnKTsKICB9CgogIHZhciBpc0Fic29sdXRlID0gc3JjUGF0aFswXSA9PT0gJycgfHwKICAgICAgKHNyY1BhdGhbMF0gJiYgc3JjUGF0aFswXS5jaGFyQXQoMCkgPT09ICcvJyk7CgogIC8vIHB1dCB0aGUgaG9zdCBiYWNrCiAgaWYgKHBzeWNob3RpYykgewogICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBpc0Fic29sdXRlID8gJycgOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNQYXRoLmxlbmd0aCA/IHNyY1BhdGguc2hpZnQoKSA6ICcnOwogICAgLy9vY2NhdGlvbmFseSB0aGUgYXV0aCBjYW4gZ2V0IHN0dWNrIG9ubHkgaW4gaG9zdAogICAgLy90aGlzIGVzcGVjaWFsbHkgaGFwcGVucyBpbiBjYXNlcyBsaWtlCiAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKQogICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID8KICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmhvc3Quc3BsaXQoJ0AnKSA6IGZhbHNlOwogICAgaWYgKGF1dGhJbkhvc3QpIHsKICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7CiAgICAgIHJlc3VsdC5ob3N0ID0gcmVzdWx0Lmhvc3RuYW1lID0gYXV0aEluSG9zdC5zaGlmdCgpOwogICAgfQogIH0KCiAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgfHwgKHJlc3VsdC5ob3N0ICYmIHNyY1BhdGgubGVuZ3RoKTsKCiAgaWYgKG11c3RFbmRBYnMgJiYgIWlzQWJzb2x1dGUpIHsKICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7CiAgfQoKICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7CiAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsOwogICAgcmVzdWx0LnBhdGggPSBudWxsOwogIH0gZWxzZSB7CiAgICByZXN1bHQucGF0aG5hbWUgPSBzcmNQYXRoLmpvaW4oJy8nKTsKICB9CgogIC8vdG8gc3VwcG9ydCByZXF1ZXN0Lmh0dHAKICBpZiAoIXV0aWwuaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIXV0aWwuaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7CiAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgKwogICAgICAgICAgICAgICAgICAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7CiAgfQogIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aCB8fCByZXN1bHQuYXV0aDsKICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7CiAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7CiAgcmV0dXJuIHJlc3VsdDsKfTsKClVybC5wcm90b3R5cGUucGFyc2VIb3N0ID0gZnVuY3Rpb24oKSB7CiAgdmFyIGhvc3QgPSB0aGlzLmhvc3Q7CiAgdmFyIHBvcnQgPSBwb3J0UGF0dGVybi5leGVjKGhvc3QpOwogIGlmIChwb3J0KSB7CiAgICBwb3J0ID0gcG9ydFswXTsKICAgIGlmIChwb3J0ICE9PSAnOicpIHsKICAgICAgdGhpcy5wb3J0ID0gcG9ydC5zdWJzdHIoMSk7CiAgICB9CiAgICBob3N0ID0gaG9zdC5zdWJzdHIoMCwgaG9zdC5sZW5ndGggLSBwb3J0Lmxlbmd0aCk7CiAgfQogIGlmIChob3N0KSB0aGlzLmhvc3RuYW1lID0gaG9zdDsKfTsKCgovKioqLyB9KSwKLyogMTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGh0dHAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTsKCnZhciBodHRwcyA9IG1vZHVsZS5leHBvcnRzOwoKZm9yICh2YXIga2V5IGluIGh0dHApIHsKICAgIGlmIChodHRwLmhhc093blByb3BlcnR5KGtleSkpIGh0dHBzW2tleV0gPSBodHRwW2tleV07Cn07CgpodHRwcy5yZXF1ZXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2IpIHsKICAgIGlmICghcGFyYW1zKSBwYXJhbXMgPSB7fTsKICAgIHBhcmFtcy5zY2hlbWUgPSAnaHR0cHMnOwogICAgcGFyYW1zLnByb3RvY29sID0gJ2h0dHBzOic7CiAgICByZXR1cm4gaHR0cC5yZXF1ZXN0LmNhbGwodGhpcywgcGFyYW1zLCBjYik7Cn0KCgovKioqLyB9KSwKLyogMjAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7Cgptb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikgewogIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJzsKfTsKCgovKioqLyB9KSwKLyogMjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovLyBhIHBhc3N0aHJvdWdoIHN0cmVhbS4KLy8gYmFzaWNhbGx5IGp1c3QgdGhlIG1vc3QgbWluaW1hbCBzb3J0IG9mIFRyYW5zZm9ybSBzdHJlYW0uCi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuCgoKCm1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7Cgp2YXIgVHJhbnNmb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7CnV0aWwuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnV0aWwuaW5oZXJpdHMoUGFzc1Rocm91Z2gsIFRyYW5zZm9ybSk7CgpmdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoKSkgcmV0dXJuIG5ldyBQYXNzVGhyb3VnaChvcHRpb25zKTsKCiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7Cn0KClBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICBjYihudWxsLCBjaHVuayk7Cn07CgovKioqLyB9KSwKLyogMjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcykgewoKbW9kdWxlLmV4cG9ydHMgPSBSZWFkYWJsZTsKCi8qPHJlcGxhY2VtZW50PiovCnZhciBwcm9jZXNzTmV4dFRpY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKLyo8L3JlcGxhY2VtZW50PiovCgovKjxyZXBsYWNlbWVudD4qLwp2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciBEdXBsZXg7Ci8qPC9yZXBsYWNlbWVudD4qLwoKUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7CgovKjxyZXBsYWNlbWVudD4qLwp2YXIgRUUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLkV2ZW50RW1pdHRlcjsKCnZhciBFRWxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiAoZW1pdHRlciwgdHlwZSkgewogIHJldHVybiBlbWl0dGVyLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7Cn07Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIFN0cmVhbTsKKGZ1bmN0aW9uICgpIHsKICB0cnkgewogICAgU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7CiAgfSBjYXRjaCAoXykge30gZmluYWxseSB7CiAgICBpZiAoIVN0cmVhbSkgU3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KS5FdmVudEVtaXR0ZXI7CiAgfQp9KSgpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCnZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLkJ1ZmZlcjsKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGJ1ZmZlclNoaW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwovKjwvcmVwbGFjZW1lbnQ+Ki8KCi8qPHJlcGxhY2VtZW50PiovCnZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsKdXRpbC5pbmhlcml0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7Ci8qPC9yZXBsYWNlbWVudD4qLwoKLyo8cmVwbGFjZW1lbnQ+Ki8KdmFyIGRlYnVnVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKTsKdmFyIGRlYnVnID0gdm9pZCAwOwppZiAoZGVidWdVdGlsICYmIGRlYnVnVXRpbC5kZWJ1Z2xvZykgewogIGRlYnVnID0gZGVidWdVdGlsLmRlYnVnbG9nKCdzdHJlYW0nKTsKfSBlbHNlIHsKICBkZWJ1ZyA9IGZ1bmN0aW9uICgpIHt9Owp9Ci8qPC9yZXBsYWNlbWVudD4qLwoKdmFyIEJ1ZmZlckxpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOSk7CnZhciBTdHJpbmdEZWNvZGVyOwoKdXRpbC5pbmhlcml0cyhSZWFkYWJsZSwgU3RyZWFtKTsKCmZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4pIHsKICAvLyBTYWRseSB0aGlzIGlzIG5vdCBjYWNoZWFibGUgYXMgc29tZSBsaWJyYXJpZXMgYnVuZGxlIHRoZWlyIG93bgogIC8vIGV2ZW50IGVtaXR0ZXIgaW1wbGVtZW50YXRpb24gd2l0aCB0aGVtLgogIGlmICh0eXBlb2YgZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHsKICAgIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pOwogIH0gZWxzZSB7CiAgICAvLyBUaGlzIGlzIGEgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlciBpcyBhdHRhY2hlZCBiZWZvcmUgYW55CiAgICAvLyB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy4gVGhpcyBpcyBoZXJlIG9ubHkgYmVjYXVzZSB0aGlzIGNvZGUgbmVlZHMKICAgIC8vIHRvIGNvbnRpbnVlIHRvIHdvcmsgd2l0aCBvbGRlciB2ZXJzaW9ucyBvZiBOb2RlLmpzIHRoYXQgZG8gbm90IGluY2x1ZGUKICAgIC8vIHRoZSBwcmVwZW5kTGlzdGVuZXIoKSBtZXRob2QuIFRoZSBnb2FsIGlzIHRvIGV2ZW50dWFsbHkgcmVtb3ZlIHRoaXMgaGFjay4KICAgIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSBlbWl0dGVyLm9uKGV2ZW50LCBmbik7ZWxzZSBpZiAoaXNBcnJheShlbWl0dGVyLl9ldmVudHNbZXZlbnRdKSkgZW1pdHRlci5fZXZlbnRzW2V2ZW50XS51bnNoaWZ0KGZuKTtlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0gPSBbZm4sIGVtaXR0ZXIuX2V2ZW50c1tldmVudF1dOwogIH0KfQoKZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHsKICBEdXBsZXggPSBEdXBsZXggfHwgX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKCiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIC8vIG9iamVjdCBzdHJlYW0gZmxhZy4gVXNlZCB0byBtYWtlIHJlYWQobikgaWdub3JlIG4gYW5kIHRvCiAgLy8gbWFrZSBhbGwgdGhlIGJ1ZmZlciBtZXJnaW5nIGFuZCBsZW5ndGggY2hlY2tzIGdvIGF3YXkKICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTsKCiAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy5yZWFkYWJsZU9iamVjdE1vZGU7CgogIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyCiAgLy8gTm90ZTogMCBpcyBhIHZhbGlkIHZhbHVlLCBtZWFucyAiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlciIKICB2YXIgaHdtID0gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrOwogIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7CiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gaHdtIHx8IGh3bSA9PT0gMCA/IGh3bSA6IGRlZmF1bHRId207CgogIC8vIGNhc3QgdG8gaW50cy4KICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+fnRoaXMuaGlnaFdhdGVyTWFyazsKCiAgLy8gQSBsaW5rZWQgbGlzdCBpcyB1c2VkIHRvIHN0b3JlIGRhdGEgY2h1bmtzIGluc3RlYWQgb2YgYW4gYXJyYXkgYmVjYXVzZSB0aGUKICAvLyBsaW5rZWQgbGlzdCBjYW4gcmVtb3ZlIGVsZW1lbnRzIGZyb20gdGhlIGJlZ2lubmluZyBmYXN0ZXIgdGhhbgogIC8vIGFycmF5LnNoaWZ0KCkKICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7CiAgdGhpcy5sZW5ndGggPSAwOwogIHRoaXMucGlwZXMgPSBudWxsOwogIHRoaXMucGlwZXNDb3VudCA9IDA7CiAgdGhpcy5mbG93aW5nID0gbnVsbDsKICB0aGlzLmVuZGVkID0gZmFsc2U7CiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7CiAgdGhpcy5yZWFkaW5nID0gZmFsc2U7CgogIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LAogIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55CiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgImxhdGVyIiBzaG91bGQgZ2VuZXJhbGx5IGFsc28KICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC4KICB0aGlzLnN5bmMgPSB0cnVlOwoKICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheQogIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLgogIHRoaXMubmVlZFJlYWRhYmxlID0gZmFsc2U7CiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7CiAgdGhpcy5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTsKCiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZwogIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS4KICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guCiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7CgogIC8vIHdoZW4gcGlwaW5nLCB3ZSBvbmx5IGNhcmUgYWJvdXQgJ3JlYWRhYmxlJyBldmVudHMgdGhhdCBoYXBwZW4KICAvLyBhZnRlciByZWFkKClpbmcgYWxsIHRoZSBieXRlcyBhbmQgbm90IGdldHRpbmcgYW55IHB1c2hiYWNrLgogIHRoaXMucmFuT3V0ID0gZmFsc2U7CgogIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzCiAgdGhpcy5hd2FpdERyYWluID0gMDsKCiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZAogIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTsKCiAgdGhpcy5kZWNvZGVyID0gbnVsbDsKICB0aGlzLmVuY29kaW5nID0gbnVsbDsKICBpZiAob3B0aW9ucy5lbmNvZGluZykgewogICAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpLlN0cmluZ0RlY29kZXI7CiAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTsKICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nOwogIH0KfQoKZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykgewogIER1cGxleCA9IER1cGxleCB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpOwoKICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKSByZXR1cm4gbmV3IFJlYWRhYmxlKG9wdGlvbnMpOwoKICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7CgogIC8vIGxlZ2FjeQogIHRoaXMucmVhZGFibGUgPSB0cnVlOwoKICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKSB0aGlzLl9yZWFkID0gb3B0aW9ucy5yZWFkOwoKICBTdHJlYW0uY2FsbCh0aGlzKTsKfQoKLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuCi8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LAovLyBzaW1pbGFyIHRvIGhvdyBXcml0YWJsZS53cml0ZSgpIHJldHVybnMgdHJ1ZSBpZiB5b3Ugc2hvdWxkCi8vIHdyaXRlKCkgc29tZSBtb3JlLgpSZWFkYWJsZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoKICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykgewogICAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7CiAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7CiAgICAgIGNodW5rID0gYnVmZmVyU2hpbS5mcm9tKGNodW5rLCBlbmNvZGluZyk7CiAgICAgIGVuY29kaW5nID0gJyc7CiAgICB9CiAgfQoKICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBmYWxzZSk7Cn07CgovLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKQpSZWFkYWJsZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIChjaHVuaykgewogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCAnJywgdHJ1ZSk7Cn07CgpSZWFkYWJsZS5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9PT0gZmFsc2U7Cn07CgpmdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCkgewogIHZhciBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspOwogIGlmIChlcikgewogICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpOwogIH0gZWxzZSBpZiAoY2h1bmsgPT09IG51bGwpIHsKICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7CiAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHsKICAgIGlmIChzdGF0ZS5lbmRlZCAmJiAhYWRkVG9Gcm9udCkgewogICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKTsKICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7CiAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZEVtaXR0ZWQgJiYgYWRkVG9Gcm9udCkgewogICAgICB2YXIgX2UgPSBuZXcgRXJyb3IoJ3N0cmVhbS51bnNoaWZ0KCkgYWZ0ZXIgZW5kIGV2ZW50Jyk7CiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIF9lKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBza2lwQWRkOwogICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhYWRkVG9Gcm9udCAmJiAhZW5jb2RpbmcpIHsKICAgICAgICBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOwogICAgICAgIHNraXBBZGQgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBjaHVuay5sZW5ndGggPT09IDA7CiAgICAgIH0KCiAgICAgIGlmICghYWRkVG9Gcm9udCkgc3RhdGUucmVhZGluZyA9IGZhbHNlOwoKICAgICAgLy8gRG9uJ3QgYWRkIHRvIHRoZSBidWZmZXIgaWYgd2UndmUgZGVjb2RlZCB0byBhbiBlbXB0eSBzdHJpbmcgY2h1bmsgYW5kCiAgICAgIC8vIHdlJ3JlIG5vdCBpbiBvYmplY3QgbW9kZQogICAgICBpZiAoIXNraXBBZGQpIHsKICAgICAgICAvLyBpZiB3ZSB3YW50IHRoZSBkYXRhIG5vdywganVzdCBlbWl0IGl0LgogICAgICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykgewogICAgICAgICAgc3RyZWFtLmVtaXQoJ2RhdGEnLCBjaHVuayk7CiAgICAgICAgICBzdHJlYW0ucmVhZCgwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gdXBkYXRlIHRoZSBidWZmZXIgaW5mby4KICAgICAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKICAgICAgICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7CgogICAgICAgICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkgZW1pdFJlYWRhYmxlKHN0cmVhbSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpOwogICAgfQogIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHsKICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTsKICB9CgogIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpOwp9CgovLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLgovLyBBbHNvLCBpZiB3ZSBoYXZlIG5vIGRhdGEgeWV0LCB3ZSBjYW4gc3RhbmQgc29tZQovLyBtb3JlIGJ5dGVzLiAgVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCwKLy8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGEKLy8gcmVhZGFibGUgZXZlbnQsIGFuZCB0aGUgdXNlciBjYWxsZWQgcmVhZChsYXJnZU51bWJlcikgc3VjaCB0aGF0Ci8vIG5lZWRSZWFkYWJsZSB3YXMgc2V0LCB0aGVuIHdlIG91Z2h0IHRvIHB1c2ggbW9yZSwgc28gdGhhdCBhbm90aGVyCi8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuCmZ1bmN0aW9uIG5lZWRNb3JlRGF0YShzdGF0ZSkgewogIHJldHVybiAhc3RhdGUuZW5kZWQgJiYgKHN0YXRlLm5lZWRSZWFkYWJsZSB8fCBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCk7Cn0KCi8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgpSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7CiAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpLlN0cmluZ0RlY29kZXI7CiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIoZW5jKTsKICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jOwogIHJldHVybiB0aGlzOwp9OwoKLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQgp2YXIgTUFYX0hXTSA9IDB4ODAwMDAwOwpmdW5jdGlvbiBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKSB7CiAgaWYgKG4gPj0gTUFYX0hXTSkgewogICAgbiA9IE1BWF9IV007CiAgfSBlbHNlIHsKICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpbgogICAgLy8gdGlueSBhbW91bnRzCiAgICBuLS07CiAgICBuIHw9IG4gPj4+IDE7CiAgICBuIHw9IG4gPj4+IDI7CiAgICBuIHw9IG4gPj4+IDQ7CiAgICBuIHw9IG4gPj4+IDg7CiAgICBuIHw9IG4gPj4+IDE2OwogICAgbisrOwogIH0KICByZXR1cm4gbjsKfQoKLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmcKLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS4KZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkgewogIGlmIChuIDw9IDAgfHwgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSByZXR1cm4gMDsKICBpZiAoc3RhdGUub2JqZWN0TW9kZSkgcmV0dXJuIDE7CiAgaWYgKG4gIT09IG4pIHsKICAgIC8vIE9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZQogICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoKSByZXR1cm4gc3RhdGUuYnVmZmVyLmhlYWQuZGF0YS5sZW5ndGg7ZWxzZSByZXR1cm4gc3RhdGUubGVuZ3RoOwogIH0KICAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgY3VycmVudCBod20sIHRoZW4gcmFpc2UgdGhlIGh3bS4KICBpZiAobiA+IHN0YXRlLmhpZ2hXYXRlck1hcmspIHN0YXRlLmhpZ2hXYXRlck1hcmsgPSBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKTsKICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuOwogIC8vIERvbid0IGhhdmUgZW5vdWdoCiAgaWYgKCFzdGF0ZS5lbmRlZCkgewogICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIHJldHVybiAwOwogIH0KICByZXR1cm4gc3RhdGUubGVuZ3RoOwp9CgovLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LgpSZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIChuKSB7CiAgZGVidWcoJ3JlYWQnLCBuKTsKICBuID0gcGFyc2VJbnQobiwgMTApOwogIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgdmFyIG5PcmlnID0gbjsKCiAgaWYgKG4gIT09IDApIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwoKICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlCiAgLy8gYWxyZWFkeSBoYXZlIGEgYnVuY2ggb2YgZGF0YSBpbiB0aGUgYnVmZmVyLCB0aGVuIGp1c3QgdHJpZ2dlcgogIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLgogIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7CiAgICBkZWJ1ZygncmVhZDogZW1pdFJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5lbmRlZCk7CiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTsKICAgIHJldHVybiBudWxsOwogIH0KCiAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpOwoKICAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuCiAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHsKICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIGVuZFJlYWRhYmxlKHRoaXMpOwogICAgcmV0dXJuIG51bGw7CiAgfQoKICAvLyBBbGwgdGhlIGFjdHVhbCBjaHVuayBnZW5lcmF0aW9uIGxvZ2ljIG5lZWRzIHRvIGJlCiAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluCiAgLy8gc3ludGhldGljIHN0cmVhbSBjYXNlcywgc3VjaCBhcyBwYXNzdGhyb3VnaCBzdHJlYW1zLCBfcmVhZAogIC8vIG1heSBiZSBhIGNvbXBsZXRlbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uIHdoaWNoIG1heSBjaGFuZ2UKICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlbgogIC8vIGJlZm9yZSB0aGVyZSB3YXMgKm5vdCogZW5vdWdoLgogIC8vCiAgLy8gU28sIHRoZSBzdGVwcyBhcmU6CiAgLy8gMS4gRmlndXJlIG91dCB3aGF0IHRoZSBzdGF0ZSBvZiB0aGluZ3Mgd2lsbCBiZSBhZnRlciB3ZSBkbwogIC8vIGEgcmVhZCBmcm9tIHRoZSBidWZmZXIuCiAgLy8KICAvLyAyLiBJZiB0aGF0IHJlc3VsdGluZyBzdGF0ZSB3aWxsIHRyaWdnZXIgYSBfcmVhZCwgdGhlbiBjYWxsIF9yZWFkLgogIC8vIE5vdGUgdGhhdCB0aGlzIG1heSBiZSBhc3luY2hyb25vdXMsIG9yIHN5bmNocm9ub3VzLiAgWWVzLCBpdCBpcwogIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhbgogIC8vIHRoYXQgdGhlIFJlYWRhYmxlIGNsYXNzIHNob3VsZCBiZWhhdmUgaW1wcm9wZXJseSwgYXMgc3RyZWFtcyBhcmUKICAvLyBkZXNpZ25lZCB0byBiZSBzeW5jL2FzeW5jIGFnbm9zdGljLgogIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbAogIC8vIGhhcyByZXR1cm5lZCB5ZXQpLCBzbyB0aGF0IHdlIGtub3cgd2hldGhlciBvciBub3QgaXQncyBzYWZlIHRvIGVtaXQKICAvLyAncmVhZGFibGUnIGV0Yy4KICAvLwogIC8vIDMuIEFjdHVhbGx5IHB1bGwgdGhlIHJlcXVlc3RlZCBjaHVua3Mgb3V0IG9mIHRoZSBidWZmZXIgYW5kIHJldHVybi4KCiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLgogIHZhciBkb1JlYWQgPSBzdGF0ZS5uZWVkUmVhZGFibGU7CiAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpOwoKICAvLyBpZiB3ZSBjdXJyZW50bHkgaGF2ZSBsZXNzIHRoYW4gdGhlIGhpZ2hXYXRlck1hcmssIHRoZW4gYWxzbyByZWFkIHNvbWUKICBpZiAoc3RhdGUubGVuZ3RoID09PSAwIHx8IHN0YXRlLmxlbmd0aCAtIG4gPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7CiAgICBkb1JlYWQgPSB0cnVlOwogICAgZGVidWcoJ2xlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrJywgZG9SZWFkKTsKICB9CgogIC8vIGhvd2V2ZXIsIGlmIHdlJ3ZlIGVuZGVkLCB0aGVuIHRoZXJlJ3Mgbm8gcG9pbnQsIGFuZCBpZiB3ZSdyZSBhbHJlYWR5CiAgLy8gcmVhZGluZywgdGhlbiBpdCdzIHVubmVjZXNzYXJ5LgogIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7CiAgICBkb1JlYWQgPSBmYWxzZTsKICAgIGRlYnVnKCdyZWFkaW5nIG9yIGVuZGVkJywgZG9SZWFkKTsKICB9IGVsc2UgaWYgKGRvUmVhZCkgewogICAgZGVidWcoJ2RvIHJlYWQnKTsKICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlOwogICAgc3RhdGUuc3luYyA9IHRydWU7CiAgICAvLyBpZiB0aGUgbGVuZ3RoIGlzIGN1cnJlbnRseSB6ZXJvLCB0aGVuIHdlICpuZWVkKiBhIHJlYWRhYmxlIGV2ZW50LgogICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2QKICAgIHRoaXMuX3JlYWQoc3RhdGUuaGlnaFdhdGVyTWFyayk7CiAgICBzdGF0ZS5zeW5jID0gZmFsc2U7CiAgICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLAogICAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLgogICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpOwogIH0KCiAgdmFyIHJldDsKICBpZiAobiA+IDApIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTtlbHNlIHJldCA9IG51bGw7CgogIGlmIChyZXQgPT09IG51bGwpIHsKICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CiAgICBuID0gMDsKICB9IGVsc2UgewogICAgc3RhdGUubGVuZ3RoIC09IG47CiAgfQoKICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7CiAgICAvLyBJZiB3ZSBoYXZlIG5vdGhpbmcgaW4gdGhlIGJ1ZmZlciwgdGhlbiB3ZSB3YW50IHRvIGtub3cKICAgIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci4KICAgIGlmICghc3RhdGUuZW5kZWQpIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CgogICAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLgogICAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTsKICB9CgogIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7CgogIHJldHVybiByZXQ7Cn07CgpmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7CiAgdmFyIGVyID0gbnVsbDsKICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihjaHVuaykgJiYgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiBjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7CiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTsKICB9CiAgcmV0dXJuIGVyOwp9CgpmdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjsKICBpZiAoc3RhdGUuZGVjb2RlcikgewogICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTsKICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHsKICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspOwogICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CiAgICB9CiAgfQogIHN0YXRlLmVuZGVkID0gdHJ1ZTsKCiAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuCiAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7Cn0KCi8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlcgovLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXIKLy8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLgpmdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwogIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7CiAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7CiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlOwogICAgaWYgKHN0YXRlLnN5bmMpIHByb2Nlc3NOZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pO2Vsc2UgZW1pdFJlYWRhYmxlXyhzdHJlYW0pOwogIH0KfQoKZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHsKICBkZWJ1ZygnZW1pdCByZWFkYWJsZScpOwogIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpOwogIGZsb3coc3RyZWFtKTsKfQoKLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCwKLy8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZAovLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZgovLyBpdCdzIGluIHByb2dyZXNzLgovLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLAovLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LgpmdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHsKICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7CiAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7CiAgICBwcm9jZXNzTmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpOwogIH0KfQoKZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkgewogIHZhciBsZW4gPSBzdGF0ZS5sZW5ndGg7CiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7CiAgICBkZWJ1ZygnbWF5YmVSZWFkTW9yZSByZWFkIDAnKTsKICAgIHN0cmVhbS5yZWFkKDApOwogICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKQogICAgICAvLyBkaWRuJ3QgZ2V0IGFueSBkYXRhLCBzdG9wIHNwaW5uaW5nLgogICAgICBicmVhaztlbHNlIGxlbiA9IHN0YXRlLmxlbmd0aDsKICB9CiAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTsKfQoKLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLgovLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLgovLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgImxlbmd0aCIgaXMgc29tZXdoYXQKLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLgpSZWFkYWJsZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikgewogIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ19yZWFkKCkgaXMgbm90IGltcGxlbWVudGVkJykpOwp9OwoKUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHsKICB2YXIgc3JjID0gdGhpczsKICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwoKICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHsKICAgIGNhc2UgMDoKICAgICAgc3RhdGUucGlwZXMgPSBkZXN0OwogICAgICBicmVhazsKICAgIGNhc2UgMToKICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIHN0YXRlLnBpcGVzLnB1c2goZGVzdCk7CiAgICAgIGJyZWFrOwogIH0KICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7CiAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTsKCiAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKSAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjsKCiAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZCA6IGNsZWFudXA7CiAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpIHByb2Nlc3NOZXh0VGljayhlbmRGbik7ZWxzZSBzcmMub25jZSgnZW5kJywgZW5kRm4pOwoKICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7CiAgZnVuY3Rpb24gb251bnBpcGUocmVhZGFibGUpIHsKICAgIGRlYnVnKCdvbnVucGlwZScpOwogICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHsKICAgICAgY2xlYW51cCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb25lbmQoKSB7CiAgICBkZWJ1Zygnb25lbmQnKTsKICAgIGRlc3QuZW5kKCk7CiAgfQoKICAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyCiAgLy8gb24gdGhlIHNvdXJjZS4gIFRoaXMgd291bGQgYmUgbW9yZSBlbGVnYW50IHdpdGggYSAub25jZSgpCiAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXMKICAvLyB0b28gc2xvdy4KICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7CiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTsKCiAgdmFyIGNsZWFuZWRVcCA9IGZhbHNlOwogIGZ1bmN0aW9uIGNsZWFudXAoKSB7CiAgICBkZWJ1ZygnY2xlYW51cCcpOwogICAgLy8gY2xlYW51cCBldmVudCBoYW5kbGVycyBvbmNlIHRoZSBwaXBlIGlzIGJyb2tlbgogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7CiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpOwogICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7CiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApOwogICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTsKCiAgICBjbGVhbmVkVXAgPSB0cnVlOwoKICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXMKICAgIC8vIHNwZWNpZmljIHdyaXRlciwgdGhlbiBpdCB3b3VsZCBjYXVzZSBpdCB0byBuZXZlciBzdGFydAogICAgLy8gZmxvd2luZyBhZ2Fpbi4KICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy4KICAgIC8vIElmIHdlIGRvbid0IGtub3csIHRoZW4gYXNzdW1lIHRoYXQgd2UgYXJlIHdhaXRpbmcgZm9yIG9uZS4KICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpIG9uZHJhaW4oKTsKICB9CgogIC8vIElmIHRoZSB1c2VyIHB1c2hlcyBtb3JlIGRhdGEgd2hpbGUgd2UncmUgd3JpdGluZyB0byBkZXN0IHRoZW4gd2UnbGwgZW5kIHVwCiAgLy8gaW4gb25kYXRhIGFnYWluLiBIb3dldmVyLCB3ZSBvbmx5IHdhbnQgdG8gaW5jcmVhc2UgYXdhaXREcmFpbiBvbmNlIGJlY2F1c2UKICAvLyBkZXN0IHdpbGwgb25seSBlbWl0IG9uZSAnZHJhaW4nIGV2ZW50IGZvciB0aGUgbXVsdGlwbGUgd3JpdGVzLgogIC8vID0+IEludHJvZHVjZSBhIGd1YXJkIG9uIGluY3JlYXNpbmcgYXdhaXREcmFpbi4KICB2YXIgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlOwogIHNyYy5vbignZGF0YScsIG9uZGF0YSk7CiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CiAgICBkZWJ1Zygnb25kYXRhJyk7CiAgICBpbmNyZWFzZWRBd2FpdERyYWluID0gZmFsc2U7CiAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7CiAgICBpZiAoZmFsc2UgPT09IHJldCAmJiAhaW5jcmVhc2VkQXdhaXREcmFpbikgewogICAgICAvLyBJZiB0aGUgdXNlciB1bnBpcGVkIGR1cmluZyBgZGVzdC53cml0ZSgpYCwgaXQgaXMgcG9zc2libGUKICAgICAgLy8gdG8gZ2V0IHN0dWNrIGluIGEgcGVybWFuZW50bHkgcGF1c2VkIHN0YXRlIGlmIHRoYXQgd3JpdGUKICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS4KICAgICAgLy8gPT4gQ2hlY2sgd2hldGhlciBgZGVzdGAgaXMgc3RpbGwgYSBwaXBpbmcgZGVzdGluYXRpb24uCiAgICAgIGlmICgoc3RhdGUucGlwZXNDb3VudCA9PT0gMSAmJiBzdGF0ZS5waXBlcyA9PT0gZGVzdCB8fCBzdGF0ZS5waXBlc0NvdW50ID4gMSAmJiBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KSAhPT0gLTEpICYmICFjbGVhbmVkVXApIHsKICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pOwogICAgICAgIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKys7CiAgICAgICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IHRydWU7CiAgICAgIH0KICAgICAgc3JjLnBhdXNlKCk7CiAgICB9CiAgfQoKICAvLyBpZiB0aGUgZGVzdCBoYXMgYW4gZXJyb3IsIHRoZW4gc3RvcCBwaXBpbmcgaW50byBpdC4KICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuCiAgZnVuY3Rpb24gb25lcnJvcihlcikgewogICAgZGVidWcoJ29uZXJyb3InLCBlcik7CiAgICB1bnBpcGUoKTsKICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7CiAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpOwogIH0KCiAgLy8gTWFrZSBzdXJlIG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSB1c2VybGFuZCBvbmVzLgogIHByZXBlbmRMaXN0ZW5lcihkZXN0LCAnZXJyb3InLCBvbmVycm9yKTsKCiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS4KICBmdW5jdGlvbiBvbmNsb3NlKCkgewogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpOwogICAgdW5waXBlKCk7CiAgfQogIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTsKICBmdW5jdGlvbiBvbmZpbmlzaCgpIHsKICAgIGRlYnVnKCdvbmZpbmlzaCcpOwogICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTsKICAgIHVucGlwZSgpOwogIH0KICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTsKCiAgZnVuY3Rpb24gdW5waXBlKCkgewogICAgZGVidWcoJ3VucGlwZScpOwogICAgc3JjLnVucGlwZShkZXN0KTsKICB9CgogIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvCiAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTsKCiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LgogIGlmICghc3RhdGUuZmxvd2luZykgewogICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7CiAgICBzcmMucmVzdW1lKCk7CiAgfQoKICByZXR1cm4gZGVzdDsKfTsKCmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykgewogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc3RhdGUgPSBzcmMuX3JlYWRhYmxlU3RhdGU7CiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTsKICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKSBzdGF0ZS5hd2FpdERyYWluLS07CiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRWxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7CiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlOwogICAgICBmbG93KHNyYyk7CiAgICB9CiAgfTsKfQoKUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKCiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLgogIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKSByZXR1cm4gdGhpczsKCiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLgogIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSB7CiAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS4KICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpczsKCiAgICBpZiAoIWRlc3QpIGRlc3QgPSBzdGF0ZS5waXBlczsKCiAgICAvLyBnb3QgYSBtYXRjaC4KICAgIHN0YXRlLnBpcGVzID0gbnVsbDsKICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwOwogICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlOwogICAgaWYgKGRlc3QpIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7CiAgICByZXR1cm4gdGhpczsKICB9CgogIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuCgogIGlmICghZGVzdCkgewogICAgLy8gcmVtb3ZlIGFsbC4KICAgIHZhciBkZXN0cyA9IHN0YXRlLnBpcGVzOwogICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7CiAgICBzdGF0ZS5waXBlcyA9IG51bGw7CiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDsKICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGRlc3RzW2ldLmVtaXQoJ3VucGlwZScsIHRoaXMpOwogICAgfXJldHVybiB0aGlzOwogIH0KCiAgLy8gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IG9uZS4KICB2YXIgaW5kZXggPSBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KTsKICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gdGhpczsKCiAgc3RhdGUucGlwZXMuc3BsaWNlKGluZGV4LCAxKTsKICBzdGF0ZS5waXBlc0NvdW50IC09IDE7CiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07CgogIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7CgogIHJldHVybiB0aGlzOwp9OwoKLy8gc2V0IHVwIGRhdGEgZXZlbnRzIGlmIHRoZXkgYXJlIGFza2VkIGZvcgovLyBFbnN1cmUgcmVhZGFibGUgbGlzdGVuZXJzIGV2ZW50dWFsbHkgZ2V0IHNvbWV0aGluZwpSZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGZuKSB7CiAgdmFyIHJlcyA9IFN0cmVhbS5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldiwgZm4pOwoKICBpZiAoZXYgPT09ICdkYXRhJykgewogICAgLy8gU3RhcnQgZmxvd2luZyBvbiBuZXh0IHRpY2sgaWYgc3RyZWFtIGlzbid0IGV4cGxpY2l0bHkgcGF1c2VkCiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTsKICB9IGVsc2UgaWYgKGV2ID09PSAncmVhZGFibGUnKSB7CiAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmICFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykgewogICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7CiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwogICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHsKICAgICAgICBwcm9jZXNzTmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGVuZ3RoKSB7CiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMsIHN0YXRlKTsKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIHJlczsKfTsKUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uOwoKZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKSB7CiAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpOwogIHNlbGYucmVhZCgwKTsKfQoKLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSQovLyBJZiB0aGUgdXNlciB1c2VzIHRoZW0sIHRoZW4gc3dpdGNoIGludG8gb2xkIG1vZGUuClJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICBpZiAoIXN0YXRlLmZsb3dpbmcpIHsKICAgIGRlYnVnKCdyZXN1bWUnKTsKICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlOwogICAgcmVzdW1lKHRoaXMsIHN0YXRlKTsKICB9CiAgcmV0dXJuIHRoaXM7Cn07CgpmdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkgewogIGlmICghc3RhdGUucmVzdW1lU2NoZWR1bGVkKSB7CiAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlOwogICAgcHJvY2Vzc05leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpOwogIH0KfQoKZnVuY3Rpb24gcmVzdW1lXyhzdHJlYW0sIHN0YXRlKSB7CiAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7CiAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpOwogICAgc3RyZWFtLnJlYWQoMCk7CiAgfQoKICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTsKICBzdGF0ZS5hd2FpdERyYWluID0gMDsKICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7CiAgZmxvdyhzdHJlYW0pOwogIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKSBzdHJlYW0ucmVhZCgwKTsKfQoKUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkgewogIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpOwogIGlmIChmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7CiAgICBkZWJ1ZygncGF1c2UnKTsKICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlOwogICAgdGhpcy5lbWl0KCdwYXVzZScpOwogIH0KICByZXR1cm4gdGhpczsKfTsKCmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogIGRlYnVnKCdmbG93Jywgc3RhdGUuZmxvd2luZyk7CiAgd2hpbGUgKHN0YXRlLmZsb3dpbmcgJiYgc3RyZWFtLnJlYWQoKSAhPT0gbnVsbCkge30KfQoKLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS4KLy8gVGhpcyBpcyAqbm90KiBwYXJ0IG9mIHRoZSByZWFkYWJsZSBzdHJlYW0gaW50ZXJmYWNlLgovLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS4KUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICB2YXIgcGF1c2VkID0gZmFsc2U7CgogIHZhciBzZWxmID0gdGhpczsKICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHsKICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpOwogICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7CiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7CiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHNlbGYucHVzaChjaHVuayk7CiAgICB9CgogICAgc2VsZi5wdXNoKG51bGwpOwogIH0pOwoKICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHsKICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTsKICAgIGlmIChzdGF0ZS5kZWNvZGVyKSBjaHVuayA9IHN0YXRlLmRlY29kZXIud3JpdGUoY2h1bmspOwoKICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZQogICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgJiYgKGNodW5rID09PSBudWxsIHx8IGNodW5rID09PSB1bmRlZmluZWQpKSByZXR1cm47ZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkgcmV0dXJuOwoKICAgIHZhciByZXQgPSBzZWxmLnB1c2goY2h1bmspOwogICAgaWYgKCFyZXQpIHsKICAgICAgcGF1c2VkID0gdHJ1ZTsKICAgICAgc3RyZWFtLnBhdXNlKCk7CiAgICB9CiAgfSk7CgogIC8vIHByb3h5IGFsbCB0aGUgb3RoZXIgbWV0aG9kcy4KICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy4KICBmb3IgKHZhciBpIGluIHN0cmVhbSkgewogICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfShpKTsKICAgIH0KICB9CgogIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy4KICB2YXIgZXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddOwogIGZvckVhY2goZXZlbnRzLCBmdW5jdGlvbiAoZXYpIHsKICAgIHN0cmVhbS5vbihldiwgc2VsZi5lbWl0LmJpbmQoc2VsZiwgZXYpKTsKICB9KTsKCiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZQogIC8vIHVuZGVybHlpbmcgc3RyZWFtLgogIHNlbGYuX3JlYWQgPSBmdW5jdGlvbiAobikgewogICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTsKICAgIGlmIChwYXVzZWQpIHsKICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgIHN0cmVhbS5yZXN1bWUoKTsKICAgIH0KICB9OwoKICByZXR1cm4gc2VsZjsKfTsKCi8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS4KUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7CgovLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuCi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuCi8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nCi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuCmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7CiAgLy8gbm90aGluZyBidWZmZXJlZAogIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHJldHVybiBudWxsOwoKICB2YXIgcmV0OwogIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXQgPSBzdGF0ZS5idWZmZXIuc2hpZnQoKTtlbHNlIGlmICghbiB8fCBuID49IHN0YXRlLmxlbmd0aCkgewogICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0CiAgICBpZiAoc3RhdGUuZGVjb2RlcikgcmV0ID0gc3RhdGUuYnVmZmVyLmpvaW4oJycpO2Vsc2UgaWYgKHN0YXRlLmJ1ZmZlci5sZW5ndGggPT09IDEpIHJldCA9IHN0YXRlLmJ1ZmZlci5oZWFkLmRhdGE7ZWxzZSByZXQgPSBzdGF0ZS5idWZmZXIuY29uY2F0KHN0YXRlLmxlbmd0aCk7CiAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTsKICB9IGVsc2UgewogICAgLy8gcmVhZCBwYXJ0IG9mIGxpc3QKICAgIHJldCA9IGZyb21MaXN0UGFydGlhbChuLCBzdGF0ZS5idWZmZXIsIHN0YXRlLmRlY29kZXIpOwogIH0KCiAgcmV0dXJuIHJldDsKfQoKLy8gRXh0cmFjdHMgb25seSBlbm91Z2ggYnVmZmVyZWQgZGF0YSB0byBzYXRpc2Z5IHRoZSBhbW91bnQgcmVxdWVzdGVkLgovLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZwovLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LgpmdW5jdGlvbiBmcm9tTGlzdFBhcnRpYWwobiwgbGlzdCwgaGFzU3RyaW5ncykgewogIHZhciByZXQ7CiAgaWYgKG4gPCBsaXN0LmhlYWQuZGF0YS5sZW5ndGgpIHsKICAgIC8vIHNsaWNlIGlzIHRoZSBzYW1lIGZvciBidWZmZXJzIGFuZCBzdHJpbmdzCiAgICByZXQgPSBsaXN0LmhlYWQuZGF0YS5zbGljZSgwLCBuKTsKICAgIGxpc3QuaGVhZC5kYXRhID0gbGlzdC5oZWFkLmRhdGEuc2xpY2Uobik7CiAgfSBlbHNlIGlmIChuID09PSBsaXN0LmhlYWQuZGF0YS5sZW5ndGgpIHsKICAgIC8vIGZpcnN0IGNodW5rIGlzIGEgcGVyZmVjdCBtYXRjaAogICAgcmV0ID0gbGlzdC5zaGlmdCgpOwogIH0gZWxzZSB7CiAgICAvLyByZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXIKICAgIHJldCA9IGhhc1N0cmluZ3MgPyBjb3B5RnJvbUJ1ZmZlclN0cmluZyhuLCBsaXN0KSA6IGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpOwogIH0KICByZXR1cm4gcmV0Owp9CgovLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGNoYXJhY3RlcnMgZnJvbSB0aGUgbGlzdCBvZiBidWZmZXJlZCBkYXRhCi8vIGNodW5rcy4KLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmcKLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS4KZnVuY3Rpb24gY29weUZyb21CdWZmZXJTdHJpbmcobiwgbGlzdCkgewogIHZhciBwID0gbGlzdC5oZWFkOwogIHZhciBjID0gMTsKICB2YXIgcmV0ID0gcC5kYXRhOwogIG4gLT0gcmV0Lmxlbmd0aDsKICB3aGlsZSAocCA9IHAubmV4dCkgewogICAgdmFyIHN0ciA9IHAuZGF0YTsKICAgIHZhciBuYiA9IG4gPiBzdHIubGVuZ3RoID8gc3RyLmxlbmd0aCA6IG47CiAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHJldCArPSBzdHI7ZWxzZSByZXQgKz0gc3RyLnNsaWNlKDAsIG4pOwogICAgbiAtPSBuYjsKICAgIGlmIChuID09PSAwKSB7CiAgICAgIGlmIChuYiA9PT0gc3RyLmxlbmd0aCkgewogICAgICAgICsrYzsKICAgICAgICBpZiAocC5uZXh0KSBsaXN0LmhlYWQgPSBwLm5leHQ7ZWxzZSBsaXN0LmhlYWQgPSBsaXN0LnRhaWwgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIGxpc3QuaGVhZCA9IHA7CiAgICAgICAgcC5kYXRhID0gc3RyLnNsaWNlKG5iKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgICsrYzsKICB9CiAgbGlzdC5sZW5ndGggLT0gYzsKICByZXR1cm4gcmV0Owp9CgovLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YSBjaHVua3MuCi8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nCi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuCmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpIHsKICB2YXIgcmV0ID0gYnVmZmVyU2hpbS5hbGxvY1Vuc2FmZShuKTsKICB2YXIgcCA9IGxpc3QuaGVhZDsKICB2YXIgYyA9IDE7CiAgcC5kYXRhLmNvcHkocmV0KTsKICBuIC09IHAuZGF0YS5sZW5ndGg7CiAgd2hpbGUgKHAgPSBwLm5leHQpIHsKICAgIHZhciBidWYgPSBwLmRhdGE7CiAgICB2YXIgbmIgPSBuID4gYnVmLmxlbmd0aCA/IGJ1Zi5sZW5ndGggOiBuOwogICAgYnVmLmNvcHkocmV0LCByZXQubGVuZ3RoIC0gbiwgMCwgbmIpOwogICAgbiAtPSBuYjsKICAgIGlmIChuID09PSAwKSB7CiAgICAgIGlmIChuYiA9PT0gYnVmLmxlbmd0aCkgewogICAgICAgICsrYzsKICAgICAgICBpZiAocC5uZXh0KSBsaXN0LmhlYWQgPSBwLm5leHQ7ZWxzZSBsaXN0LmhlYWQgPSBsaXN0LnRhaWwgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIGxpc3QuaGVhZCA9IHA7CiAgICAgICAgcC5kYXRhID0gYnVmLnNsaWNlKG5iKTsKICAgICAgfQogICAgICBicmVhazsKICAgIH0KICAgICsrYzsKICB9CiAgbGlzdC5sZW5ndGggLT0gYzsKICByZXR1cm4gcmV0Owp9CgpmdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pIHsKICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CgogIC8vIElmIHdlIGdldCBoZXJlIGJlZm9yZSBjb25zdW1pbmcgYWxsIHRoZSBieXRlcywgdGhlbiB0aGF0IGlzIGEKICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uCiAgaWYgKHN0YXRlLmxlbmd0aCA+IDApIHRocm93IG5ldyBFcnJvcignImVuZFJlYWRhYmxlKCkiIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7CgogIGlmICghc3RhdGUuZW5kRW1pdHRlZCkgewogICAgc3RhdGUuZW5kZWQgPSB0cnVlOwogICAgcHJvY2Vzc05leHRUaWNrKGVuZFJlYWRhYmxlTlQsIHN0YXRlLCBzdHJlYW0pOwogIH0KfQoKZnVuY3Rpb24gZW5kUmVhZGFibGVOVChzdGF0ZSwgc3RyZWFtKSB7CiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuCiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkgewogICAgc3RhdGUuZW5kRW1pdHRlZCA9IHRydWU7CiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTsKICAgIHN0cmVhbS5lbWl0KCdlbmQnKTsKICB9Cn0KCmZ1bmN0aW9uIGZvckVhY2goeHMsIGYpIHsKICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgZih4c1tpXSwgaSk7CiAgfQp9CgpmdW5jdGlvbiBpbmRleE9mKHhzLCB4KSB7CiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7CiAgfQogIHJldHVybiAtMTsKfQovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg1KSkpCgovKioqLyB9KSwKLyogMjMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gYXV0aHRlc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBhdXRodGVzdChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2F1dGgudGVzdCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAyNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBib3RzaW5mbzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGJvdHNpbmZvKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnYm90cy5pbmZvJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDI1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNoYW5uZWxzYXJjaGl2ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxzYXJjaGl2ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLmFyY2hpdmUnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMjYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2hhbm5lbHNjcmVhdGU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGFubmVsc2NyZWF0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLmNyZWF0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAyNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2hpc3Rvcnk7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGFubmVsc2hpc3RvcnkocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGFubmVscy5oaXN0b3J5JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDI4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNoYW5uZWxzaW5mbzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxzaW5mbyhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLmluZm8nOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMjkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2hhbm5lbHNpbnZpdGU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGFubmVsc2ludml0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLmludml0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAzMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2pvaW47Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGFubmVsc2pvaW4ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGFubmVscy5qb2luJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDMxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNoYW5uZWxza2ljazsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxza2ljayhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLmtpY2snOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2hhbm5lbHNsZWF2ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxzbGVhdmUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGFubmVscy5sZWF2ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAzMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc2xpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGFubmVsc2xpc3QocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGFubmVscy5saXN0JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDM0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNoYW5uZWxzbWFyazsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxzbWFyayhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLm1hcmsnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMzUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2hhbm5lbHNyZW5hbWU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGFubmVsc3JlbmFtZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLnJlbmFtZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAzNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc3JlcGxpZXM7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGFubmVsc3JlcGxpZXMocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGFubmVscy5yZXBsaWVzJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDM3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNoYW5uZWxzc2V0UHVycG9zZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxzc2V0UHVycG9zZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2NoYW5uZWxzLnNldFB1cnBvc2UnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMzggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2hhbm5lbHNzZXRUb3BpYzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxzc2V0VG9waWMocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGFubmVscy5zZXRUb3BpYyc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAzOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBjaGFubmVsc3VuYXJjaGl2ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYW5uZWxzdW5hcmNoaXZlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnY2hhbm5lbHMudW5hcmNoaXZlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDQwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNoYXRkZWxldGU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGF0ZGVsZXRlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnY2hhdC5kZWxldGUnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2hhdG1lTWVzc2FnZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYXRtZU1lc3NhZ2UocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGF0Lm1lTWVzc2FnZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA0MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBjaGF0cG9zdE1lc3NhZ2U7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGF0cG9zdE1lc3NhZ2UocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGF0LnBvc3RNZXNzYWdlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDQzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNoYXR1bmZ1cmw7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBjaGF0dW5mdXJsKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnY2hhdC51bmZ1cmwnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2hhdHVwZGF0ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGNoYXR1cGRhdGUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdjaGF0LnVwZGF0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA0NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBkbmRlbmREbmQ7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBkbmRlbmREbmQocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdkbmQuZW5kRG5kJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDQ2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGRuZGVuZFNub296ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGRuZGVuZFNub296ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2RuZC5lbmRTbm9vemUnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZG5kaW5mbzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGRuZGluZm8ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdkbmQuaW5mbyc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA0OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBkbmRzZXRTbm9vemU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBkbmRzZXRTbm9vemUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdkbmQuc2V0U25vb3plJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDQ5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGRuZHRlYW1JbmZvOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZG5kdGVhbUluZm8ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdkbmQudGVhbUluZm8nOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZW1vamlsaXN0OwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZW1vamlsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZW1vamkubGlzdCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA1MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2NvbW1lbnRzYWRkOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZmlsZXNjb21tZW50c2FkZChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2ZpbGVzLmNvbW1lbnRzLmFkZCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA1MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2NvbW1lbnRzZGVsZXRlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZmlsZXNjb21tZW50c2RlbGV0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2ZpbGVzLmNvbW1lbnRzLmRlbGV0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA1MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2NvbW1lbnRzZWRpdDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGZpbGVzY29tbWVudHNlZGl0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZmlsZXMuY29tbWVudHMuZWRpdCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA1NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBmaWxlc2RlbGV0ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGZpbGVzZGVsZXRlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZmlsZXMuZGVsZXRlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDU1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGZpbGVzaW5mbzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGZpbGVzaW5mbyhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2ZpbGVzLmluZm8nOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZmlsZXNsaXN0OwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZmlsZXNsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZmlsZXMubGlzdCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA1NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBmaWxlc3Jldm9rZVB1YmxpY1VSTDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGZpbGVzcmV2b2tlUHVibGljVVJMKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZmlsZXMucmV2b2tlUHVibGljVVJMJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDU4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGZpbGVzc2hhcmVkUHVibGljVVJMOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZmlsZXNzaGFyZWRQdWJsaWNVUkwocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdmaWxlcy5zaGFyZWRQdWJsaWNVUkwnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZmlsZXN1cGxvYWQ7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBmaWxlc3VwbG9hZChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2ZpbGVzLnVwbG9hZCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA2MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBncm91cHNhcmNoaXZlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZ3JvdXBzYXJjaGl2ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2dyb3Vwcy5hcmNoaXZlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDYxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGdyb3Vwc2Nsb3NlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZ3JvdXBzY2xvc2UocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdncm91cHMuY2xvc2UnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzY3JlYXRlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZ3JvdXBzY3JlYXRlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZ3JvdXBzLmNyZWF0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA2MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBncm91cHNjcmVhdGVDaGlsZDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGdyb3Vwc2NyZWF0ZUNoaWxkKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZ3JvdXBzLmNyZWF0ZUNoaWxkJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDY0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGdyb3Vwc2hpc3Rvcnk7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNoaXN0b3J5KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZ3JvdXBzLmhpc3RvcnknOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzaW5mbzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGdyb3Vwc2luZm8ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdncm91cHMuaW5mbyc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA2NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBncm91cHNpbnZpdGU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNpbnZpdGUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdncm91cHMuaW52aXRlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDY3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGdyb3Vwc2tpY2s7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNraWNrKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZ3JvdXBzLmtpY2snOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNjggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzbGVhdmU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNsZWF2ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2dyb3Vwcy5sZWF2ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA2OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBncm91cHNsaXN0OwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gZ3JvdXBzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2dyb3Vwcy5saXN0JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDcwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGdyb3Vwc21hcms7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNtYXJrKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZ3JvdXBzLm1hcmsnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNzEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzb3BlbjsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGdyb3Vwc29wZW4ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdncm91cHMub3Blbic7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA3MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBncm91cHNyZW5hbWU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNyZW5hbWUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdncm91cHMucmVuYW1lJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDczICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGdyb3Vwc3NldFB1cnBvc2U7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNzZXRQdXJwb3NlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnZ3JvdXBzLnNldFB1cnBvc2UnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzc2V0VG9waWM7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHNzZXRUb3BpYyhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2dyb3Vwcy5zZXRUb3BpYyc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA3NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBncm91cHN1bmFyY2hpdmU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBncm91cHN1bmFyY2hpdmUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdncm91cHMudW5hcmNoaXZlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDc2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGltY2xvc2U7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBpbWNsb3NlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnaW0uY2xvc2UnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogNzcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gaW1oaXN0b3J5OwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gaW1oaXN0b3J5KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnaW0uaGlzdG9yeSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA3OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBpbWxpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBpbWxpc3QocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdpbS5saXN0JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDc5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGltbWFyazsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGltbWFyayhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2ltLm1hcmsnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogODAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gaW1vcGVuOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gaW1vcGVuKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnaW0ub3Blbic7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA4MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBtcGltY2xvc2U7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBtcGltY2xvc2UocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdtcGltLmNsb3NlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDgyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IG1waW1oaXN0b3J5OwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gbXBpbWhpc3RvcnkocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdtcGltLmhpc3RvcnknOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogODMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gbXBpbWxpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBtcGltbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ21waW0ubGlzdCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA4NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBtcGltbWFyazsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIG1waW1tYXJrKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnbXBpbS5tYXJrJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDg1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IG1waW1vcGVuOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gbXBpbW9wZW4ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdtcGltLm9wZW4nOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogODYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gcGluc2FkZDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHBpbnNhZGQocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdwaW5zLmFkZCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA4NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBwaW5zbGlzdDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHBpbnNsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAncGlucy5saXN0JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDg4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHBpbnNyZW1vdmU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBwaW5zcmVtb3ZlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAncGlucy5yZW1vdmUnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogODkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gcmVhY3Rpb25zYWRkOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gcmVhY3Rpb25zYWRkKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAncmVhY3Rpb25zLmFkZCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA5MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSByZWFjdGlvbnNnZXQ7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiByZWFjdGlvbnNnZXQocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdyZWFjdGlvbnMuZ2V0JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDkxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHJlYWN0aW9uc2xpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiByZWFjdGlvbnNsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAncmVhY3Rpb25zLmxpc3QnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogOTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gcmVhY3Rpb25zcmVtb3ZlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gcmVhY3Rpb25zcmVtb3ZlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAncmVhY3Rpb25zLnJlbW92ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA5MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSByZW1pbmRlcnNhZGQ7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiByZW1pbmRlcnNhZGQocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdyZW1pbmRlcnMuYWRkJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDk0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHJlbWluZGVyc2NvbXBsZXRlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gcmVtaW5kZXJzY29tcGxldGUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdyZW1pbmRlcnMuY29tcGxldGUnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogOTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gcmVtaW5kZXJzZGVsZXRlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gcmVtaW5kZXJzZGVsZXRlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAncmVtaW5kZXJzLmRlbGV0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA5NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSByZW1pbmRlcnNpbmZvOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gcmVtaW5kZXJzaW5mbyhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3JlbWluZGVycy5pbmZvJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDk3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHJlbWluZGVyc2xpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiByZW1pbmRlcnNsaXN0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAncmVtaW5kZXJzLmxpc3QnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogOTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gc2VhcmNoYWxsOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gc2VhcmNoYWxsKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnc2VhcmNoLmFsbCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiA5OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBzZWFyY2hmaWxlczsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHNlYXJjaGZpbGVzKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnc2VhcmNoLmZpbGVzJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBzZWFyY2htZXNzYWdlczsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHNlYXJjaG1lc3NhZ2VzKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnc2VhcmNoLm1lc3NhZ2VzJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBzdGFyc2FkZDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHN0YXJzYWRkKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnc3RhcnMuYWRkJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBzdGFyc2xpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiBzdGFyc2xpc3QocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdzdGFycy5saXN0JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBzdGFyc3JlbW92ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHN0YXJzcmVtb3ZlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnc3RhcnMucmVtb3ZlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB0ZWFtYWNjZXNzTG9nczsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHRlYW1hY2Nlc3NMb2dzKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAndGVhbS5hY2Nlc3NMb2dzJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB0ZWFtYmlsbGFibGVJbmZvOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gdGVhbWJpbGxhYmxlSW5mbyhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3RlYW0uYmlsbGFibGVJbmZvJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB0ZWFtaW5mbzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHRlYW1pbmZvKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAndGVhbS5pbmZvJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB0ZWFtaW50ZWdyYXRpb25Mb2dzOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gdGVhbWludGVncmF0aW9uTG9ncyhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3RlYW0uaW50ZWdyYXRpb25Mb2dzJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEwOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB0ZWFtcHJvZmlsZWdldDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHRlYW1wcm9maWxlZ2V0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAndGVhbS5wcm9maWxlLmdldCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc2NyZWF0ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHVzZXJncm91cHNjcmVhdGUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2VyZ3JvdXBzLmNyZWF0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc2Rpc2FibGU7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiB1c2VyZ3JvdXBzZGlzYWJsZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3VzZXJncm91cHMuZGlzYWJsZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc2VuYWJsZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHVzZXJncm91cHNlbmFibGUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2VyZ3JvdXBzLmVuYWJsZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc2xpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiB1c2VyZ3JvdXBzbGlzdChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3VzZXJncm91cHMubGlzdCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc3VwZGF0ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHVzZXJncm91cHN1cGRhdGUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2VyZ3JvdXBzLnVwZGF0ZSc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcmdyb3Vwc3VzZXJzbGlzdDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHVzZXJncm91cHN1c2Vyc2xpc3QocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2VyZ3JvdXBzLnVzZXJzLmxpc3QnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTE1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHVzZXJncm91cHN1c2Vyc3VwZGF0ZTsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHVzZXJncm91cHN1c2Vyc3VwZGF0ZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3VzZXJncm91cHMudXNlcnMudXBkYXRlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDExNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc2dldFByZXNlbmNlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gdXNlcnNnZXRQcmVzZW5jZShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3VzZXJzLmdldFByZXNlbmNlJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDExNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc2lkZW50aXR5OwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gdXNlcnNpZGVudGl0eShwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3VzZXJzLmlkZW50aXR5JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDExOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc2luZm87Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiB1c2Vyc2luZm8ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2Vycy5pbmZvJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDExOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc2xpc3Q7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiB1c2Vyc2xpc3QocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2Vycy5saXN0JzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEyMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc3Byb2ZpbGVnZXQ7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiB1c2Vyc3Byb2ZpbGVnZXQocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2Vycy5wcm9maWxlLmdldCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcnNwcm9maWxlc2V0OwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gdXNlcnNwcm9maWxlc2V0KHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAndXNlcnMucHJvZmlsZS5zZXQnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTIyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHVzZXJzc2V0QWN0aXZlOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gdXNlcnNzZXRBY3RpdmUocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2Vycy5zZXRBY3RpdmUnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTIzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHVzZXJzc2V0UHJlc2VuY2U7Cgp2YXIgX2V4ZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApOwoKdmFyIF9leGVjMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4ZWMpOwoKdmFyIF92YWxpZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7Cgp2YXIgX3ZhbGlkYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZhbGlkYXRlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovLyB0aGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSAuL3NjcmlwdHMvZ2VuZXJhdGUtd2ViLWFwaQpmdW5jdGlvbiB1c2Vyc3NldFByZXNlbmNlKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAndXNlcnMuc2V0UHJlc2VuY2UnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTI0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtleHBvcnRzLmZldGNoID0gaXNGdW5jdGlvbihnbG9iYWwuZmV0Y2gpICYmIGlzRnVuY3Rpb24oZ2xvYmFsLlJlYWRhYmxlU3RyZWFtKQoKZXhwb3J0cy5ibG9iQ29uc3RydWN0b3IgPSBmYWxzZQp0cnkgewoJbmV3IEJsb2IoW25ldyBBcnJheUJ1ZmZlcigxKV0pCglleHBvcnRzLmJsb2JDb25zdHJ1Y3RvciA9IHRydWUKfSBjYXRjaCAoZSkge30KCi8vIFRoZSB4aHIgcmVxdWVzdCB0byBleGFtcGxlLmNvbSBtYXkgdmlvbGF0ZSBzb21lIHJlc3RyaWN0aXZlIENTUCBjb25maWd1cmF0aW9ucywKLy8gc28gaWYgd2UncmUgcnVubmluZyBpbiBhIGJyb3dzZXIgdGhhdCBzdXBwb3J0cyBgZmV0Y2hgLCBhdm9pZCBjYWxsaW5nIGdldFhIUigpCi8vIGFuZCBhc3N1bWUgc3VwcG9ydCBmb3IgY2VydGFpbiBmZWF0dXJlcyBiZWxvdy4KdmFyIHhocgpmdW5jdGlvbiBnZXRYSFIgKCkgewoJLy8gQ2FjaGUgdGhlIHhociB2YWx1ZQoJaWYgKHhociAhPT0gdW5kZWZpbmVkKSByZXR1cm4geGhyCgoJaWYgKGdsb2JhbC5YTUxIdHRwUmVxdWVzdCkgewoJCXhociA9IG5ldyBnbG9iYWwuWE1MSHR0cFJlcXVlc3QoKQoJCS8vIElmIFhEb21haW5SZXF1ZXN0IGlzIGF2YWlsYWJsZSAoaWUgb25seSwgd2hlcmUgeGhyIG1pZ2h0IG5vdCB3b3JrCgkJLy8gY3Jvc3MgZG9tYWluKSwgdXNlIHRoZSBwYWdlIGxvY2F0aW9uLiBPdGhlcndpc2UgdXNlIGV4YW1wbGUuY29tCgkJLy8gTm90ZTogdGhpcyBkb2Vzbid0IGFjdHVhbGx5IG1ha2UgYW4gaHR0cCByZXF1ZXN0LgoJCXRyeSB7CgkJCXhoci5vcGVuKCdHRVQnLCBnbG9iYWwuWERvbWFpblJlcXVlc3QgPyAnLycgOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScpCgkJfSBjYXRjaChlKSB7CgkJCXhociA9IG51bGwKCQl9Cgl9IGVsc2UgewoJCS8vIFNlcnZpY2Ugd29ya2VycyBkb24ndCBoYXZlIFhIUgoJCXhociA9IG51bGwKCX0KCXJldHVybiB4aHIKfQoKZnVuY3Rpb24gY2hlY2tUeXBlU3VwcG9ydCAodHlwZSkgewoJdmFyIHhociA9IGdldFhIUigpCglpZiAoIXhocikgcmV0dXJuIGZhbHNlCgl0cnkgewoJCXhoci5yZXNwb25zZVR5cGUgPSB0eXBlCgkJcmV0dXJuIHhoci5yZXNwb25zZVR5cGUgPT09IHR5cGUKCX0gY2F0Y2ggKGUpIHt9CglyZXR1cm4gZmFsc2UKfQoKLy8gRm9yIHNvbWUgc3RyYW5nZSByZWFzb24sIFNhZmFyaSA3LjAgcmVwb3J0cyB0eXBlb2YgZ2xvYmFsLkFycmF5QnVmZmVyID09PSAnb2JqZWN0Jy4KLy8gU2FmYXJpIDcuMSBhcHBlYXJzIHRvIGhhdmUgZml4ZWQgdGhpcyBidWcuCnZhciBoYXZlQXJyYXlCdWZmZXIgPSB0eXBlb2YgZ2xvYmFsLkFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJwp2YXIgaGF2ZVNsaWNlID0gaGF2ZUFycmF5QnVmZmVyICYmIGlzRnVuY3Rpb24oZ2xvYmFsLkFycmF5QnVmZmVyLnByb3RvdHlwZS5zbGljZSkKCi8vIElmIGZldGNoIGlzIHN1cHBvcnRlZCwgdGhlbiBhcnJheWJ1ZmZlciB3aWxsIGJlIHN1cHBvcnRlZCB0b28uIFNraXAgY2FsbGluZwovLyBjaGVja1R5cGVTdXBwb3J0KCksIHNpbmNlIHRoYXQgY2FsbHMgZ2V0WEhSKCkuCmV4cG9ydHMuYXJyYXlidWZmZXIgPSBleHBvcnRzLmZldGNoIHx8IChoYXZlQXJyYXlCdWZmZXIgJiYgY2hlY2tUeXBlU3VwcG9ydCgnYXJyYXlidWZmZXInKSkKCi8vIFRoZXNlIG5leHQgdHdvIHRlc3RzIHVuYXZvaWRhYmx5IHNob3cgd2FybmluZ3MgaW4gQ2hyb21lLiBTaW5jZSBmZXRjaCB3aWxsIGFsd2F5cwovLyBiZSB1c2VkIGlmIGl0J3MgYXZhaWxhYmxlLCBqdXN0IHJldHVybiBmYWxzZSBmb3IgdGhlc2UgdG8gYXZvaWQgdGhlIHdhcm5pbmdzLgpleHBvcnRzLm1zc3RyZWFtID0gIWV4cG9ydHMuZmV0Y2ggJiYgaGF2ZVNsaWNlICYmIGNoZWNrVHlwZVN1cHBvcnQoJ21zLXN0cmVhbScpCmV4cG9ydHMubW96Y2h1bmtlZGFycmF5YnVmZmVyID0gIWV4cG9ydHMuZmV0Y2ggJiYgaGF2ZUFycmF5QnVmZmVyICYmCgljaGVja1R5cGVTdXBwb3J0KCdtb3otY2h1bmtlZC1hcnJheWJ1ZmZlcicpCgovLyBJZiBmZXRjaCBpcyBzdXBwb3J0ZWQsIHRoZW4gb3ZlcnJpZGVNaW1lVHlwZSB3aWxsIGJlIHN1cHBvcnRlZCB0b28uIFNraXAgY2FsbGluZwovLyBnZXRYSFIoKS4KZXhwb3J0cy5vdmVycmlkZU1pbWVUeXBlID0gZXhwb3J0cy5mZXRjaCB8fCAoZ2V0WEhSKCkgPyBpc0Z1bmN0aW9uKGdldFhIUigpLm92ZXJyaWRlTWltZVR5cGUpIDogZmFsc2UpCgpleHBvcnRzLnZiQXJyYXkgPSBpc0Z1bmN0aW9uKGdsb2JhbC5WQkFycmF5KQoKZnVuY3Rpb24gaXNGdW5jdGlvbiAodmFsdWUpIHsKCXJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicKfQoKeGhyID0gbnVsbCAvLyBIZWxwIGdjCgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygzKSkpCgovKioqLyB9KSwKLyogMTI1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCnZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLkJ1ZmZlcjsKCnZhciBpc0J1ZmZlckVuY29kaW5nID0gQnVmZmVyLmlzRW5jb2RpbmcKICB8fCBmdW5jdGlvbihlbmNvZGluZykgewogICAgICAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgIGNhc2UgJ2hleCc6IGNhc2UgJ3V0ZjgnOiBjYXNlICd1dGYtOCc6IGNhc2UgJ2FzY2lpJzogY2FzZSAnYmluYXJ5JzogY2FzZSAnYmFzZTY0JzogY2FzZSAndWNzMic6IGNhc2UgJ3Vjcy0yJzogY2FzZSAndXRmMTZsZSc6IGNhc2UgJ3V0Zi0xNmxlJzogY2FzZSAncmF3JzogcmV0dXJuIHRydWU7CiAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTsKICAgICAgIH0KICAgICB9CgoKZnVuY3Rpb24gYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpIHsKICBpZiAoZW5jb2RpbmcgJiYgIWlzQnVmZmVyRW5jb2RpbmcoZW5jb2RpbmcpKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7CiAgfQp9CgovLyBTdHJpbmdEZWNvZGVyIHByb3ZpZGVzIGFuIGludGVyZmFjZSBmb3IgZWZmaWNpZW50bHkgc3BsaXR0aW5nIGEgc2VyaWVzIG9mCi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZQovLyBjaGFyYWN0ZXJzLiBDRVNVLTggaXMgaGFuZGxlZCBhcyBwYXJ0IG9mIHRoZSBVVEYtOCBlbmNvZGluZy4KLy8KLy8gQFRPRE8gSGFuZGxpbmcgYWxsIGVuY29kaW5ncyBpbnNpZGUgYSBzaW5nbGUgb2JqZWN0IG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0Ci8vIHRvIHJlYXNvbiBhYm91dCB0aGlzIGNvZGUsIHNvIGl0IHNob3VsZCBiZSBzcGxpdCB1cCBpbiB0aGUgZnV0dXJlLgovLyBAVE9ETyBUaGVyZSBzaG91bGQgYmUgYSB1dGY4LXN0cmljdCBlbmNvZGluZyB0aGF0IHJlamVjdHMgaW52YWxpZCBVVEYtOCBjb2RlCi8vIHBvaW50cyBhcyB1c2VkIGJ5IENFU1UtOC4KdmFyIFN0cmluZ0RlY29kZXIgPSBleHBvcnRzLlN0cmluZ0RlY29kZXIgPSBmdW5jdGlvbihlbmNvZGluZykgewogIHRoaXMuZW5jb2RpbmcgPSAoZW5jb2RpbmcgfHwgJ3V0ZjgnKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLCAnJyk7CiAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpOwogIHN3aXRjaCAodGhpcy5lbmNvZGluZykgewogICAgY2FzZSAndXRmOCc6CiAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlcwogICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAzOwogICAgICBicmVhazsKICAgIGNhc2UgJ3VjczInOgogICAgY2FzZSAndXRmMTZsZSc6CiAgICAgIC8vIFVURi0xNiByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMi1ieXRlcwogICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyOwogICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcjsKICAgICAgYnJlYWs7CiAgICBjYXNlICdiYXNlNjQnOgogICAgICAvLyBCYXNlLTY0IHN0b3JlcyAzIGJ5dGVzIGluIDQgY2hhcnMsIGFuZCBwYWRzIHRoZSByZW1haW5kZXIuCiAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDM7CiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTsKICAgICAgcmV0dXJuOwogIH0KCiAgLy8gRW5vdWdoIHNwYWNlIHRvIHN0b3JlIGFsbCBieXRlcyBvZiBhIHNpbmdsZSBjaGFyYWN0ZXIuIFVURi04IG5lZWRzIDQKICAvLyBieXRlcywgYnV0IENFU1UtOCBtYXkgcmVxdWlyZSB1cCB0byA2ICgzIGJ5dGVzIHBlciBzdXJyb2dhdGUpLgogIHRoaXMuY2hhckJ1ZmZlciA9IG5ldyBCdWZmZXIoNik7CiAgLy8gTnVtYmVyIG9mIGJ5dGVzIHJlY2VpdmVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLgogIHRoaXMuY2hhclJlY2VpdmVkID0gMDsKICAvLyBOdW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuCiAgdGhpcy5jaGFyTGVuZ3RoID0gMDsKfTsKCgovLyB3cml0ZSBkZWNvZGVzIHRoZSBnaXZlbiBidWZmZXIgYW5kIHJldHVybnMgaXQgYXMgSlMgc3RyaW5nIHRoYXQgaXMKLy8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsCi8vIGNoYXJhY3RlciBmb3VuZCBhdCB0aGUgZW5kIG9mIHRoZSBidWZmZXIgaXMgYnVmZmVyZWQgdXAsIGFuZCB3aWxsIGJlCi8vIHJldHVybmVkIHdoZW4gY2FsbGluZyB3cml0ZSBhZ2FpbiB3aXRoIHRoZSByZW1haW5pbmcgYnl0ZXMuCi8vCi8vIE5vdGU6IENvbnZlcnRpbmcgYSBCdWZmZXIgY29udGFpbmluZyBhbiBvcnBoYW4gc3Vycm9nYXRlIHRvIGEgU3RyaW5nCi8vIGN1cnJlbnRseSB3b3JrcywgYnV0IGNvbnZlcnRpbmcgYSBTdHJpbmcgdG8gYSBCdWZmZXIgKHZpYSBgbmV3IEJ1ZmZlcmAsIG9yCi8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlCi8vIHJlcGxhY2VtZW50IGNoYXJhY3Rlci4gU2VlIGh0dHBzOi8vY29kZXJldmlldy5jaHJvbWl1bS5vcmcvMTIxMTczMDA5LyAuClN0cmluZ0RlY29kZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgdmFyIGNoYXJTdHIgPSAnJzsKICAvLyBpZiBvdXIgbGFzdCB3cml0ZSBlbmRlZCB3aXRoIGFuIGluY29tcGxldGUgbXVsdGlieXRlIGNoYXJhY3RlcgogIHdoaWxlICh0aGlzLmNoYXJMZW5ndGgpIHsKICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXIKICAgIHZhciBhdmFpbGFibGUgPSAoYnVmZmVyLmxlbmd0aCA+PSB0aGlzLmNoYXJMZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCkgPwogICAgICAgIHRoaXMuY2hhckxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkIDoKICAgICAgICBidWZmZXIubGVuZ3RoOwoKICAgIC8vIGFkZCB0aGUgbmV3IGJ5dGVzIHRvIHRoZSBjaGFyIGJ1ZmZlcgogICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCB0aGlzLmNoYXJSZWNlaXZlZCwgMCwgYXZhaWxhYmxlKTsKICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IGF2YWlsYWJsZTsKCiAgICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQgPCB0aGlzLmNoYXJMZW5ndGgpIHsKICAgICAgLy8gc3RpbGwgbm90IGVub3VnaCBjaGFycyBpbiB0aGlzIGJ1ZmZlcj8gd2FpdCBmb3IgbW9yZSAuLi4KICAgICAgcmV0dXJuICcnOwogICAgfQoKICAgIC8vIHJlbW92ZSBieXRlcyBiZWxvbmdpbmcgdG8gdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGZyb20gdGhlIGJ1ZmZlcgogICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7CgogICAgLy8gZ2V0IHRoZSBjaGFyYWN0ZXIgdGhhdCB3YXMgc3BsaXQKICAgIGNoYXJTdHIgPSB0aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCwgdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTsKCiAgICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyCiAgICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoY2hhclN0ci5sZW5ndGggLSAxKTsKICAgIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7CiAgICAgIHRoaXMuY2hhckxlbmd0aCArPSB0aGlzLnN1cnJvZ2F0ZVNpemU7CiAgICAgIGNoYXJTdHIgPSAnJzsKICAgICAgY29udGludWU7CiAgICB9CiAgICB0aGlzLmNoYXJSZWNlaXZlZCA9IHRoaXMuY2hhckxlbmd0aCA9IDA7CgogICAgLy8gaWYgdGhlcmUgYXJlIG5vIG1vcmUgYnl0ZXMgaW4gdGhpcyBidWZmZXIsIGp1c3QgZW1pdCBvdXIgY2hhcgogICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHsKICAgICAgcmV0dXJuIGNoYXJTdHI7CiAgICB9CiAgICBicmVhazsKICB9CgogIC8vIGRldGVybWluZSBhbmQgc2V0IGNoYXJMZW5ndGggLyBjaGFyUmVjZWl2ZWQKICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcik7CgogIHZhciBlbmQgPSBidWZmZXIubGVuZ3RoOwogIGlmICh0aGlzLmNoYXJMZW5ndGgpIHsKICAgIC8vIGJ1ZmZlciB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIgYnl0ZXMgd2UgZ290CiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIGJ1ZmZlci5sZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCwgZW5kKTsKICAgIGVuZCAtPSB0aGlzLmNoYXJSZWNlaXZlZDsKICB9CgogIGNoYXJTdHIgKz0gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIGVuZCk7CgogIHZhciBlbmQgPSBjaGFyU3RyLmxlbmd0aCAtIDE7CiAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGVuZCk7CiAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlcgogIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7CiAgICB2YXIgc2l6ZSA9IHRoaXMuc3Vycm9nYXRlU2l6ZTsKICAgIHRoaXMuY2hhckxlbmd0aCArPSBzaXplOwogICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gc2l6ZTsKICAgIHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgc2l6ZSwgMCwgc2l6ZSk7CiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIDAsIHNpemUpOwogICAgcmV0dXJuIGNoYXJTdHIuc3Vic3RyaW5nKDAsIGVuZCk7CiAgfQoKICAvLyBvciBqdXN0IGVtaXQgdGhlIGNoYXJTdHIKICByZXR1cm4gY2hhclN0cjsKfTsKCi8vIGRldGVjdEluY29tcGxldGVDaGFyIGRldGVybWluZXMgaWYgdGhlcmUgaXMgYW4gaW5jb21wbGV0ZSBVVEYtOCBjaGFyYWN0ZXIgYXQKLy8gdGhlIGVuZCBvZiB0aGUgZ2l2ZW4gYnVmZmVyLiBJZiBzbywgaXQgc2V0cyB0aGlzLmNoYXJMZW5ndGggdG8gdGhlIGJ5dGUKLy8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzCi8vIHRoYXQgYXJlIGF2YWlsYWJsZSBmb3IgdGhpcyBjaGFyYWN0ZXIuClN0cmluZ0RlY29kZXIucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyID0gZnVuY3Rpb24oYnVmZmVyKSB7CiAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlcgogIHZhciBpID0gKGJ1ZmZlci5sZW5ndGggPj0gMykgPyAzIDogYnVmZmVyLmxlbmd0aDsKCiAgLy8gRmlndXJlIG91dCBpZiBvbmUgb2YgdGhlIGxhc3QgaSBieXRlcyBvZiBvdXIgYnVmZmVyIGFubm91bmNlcyBhbgogIC8vIGluY29tcGxldGUgY2hhci4KICBmb3IgKDsgaSA+IDA7IGktLSkgewogICAgdmFyIGMgPSBidWZmZXJbYnVmZmVyLmxlbmd0aCAtIGldOwoKICAgIC8vIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi04I0Rlc2NyaXB0aW9uCgogICAgLy8gMTEwWFhYWFgKICAgIGlmIChpID09IDEgJiYgYyA+PiA1ID09IDB4MDYpIHsKICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjsKICAgICAgYnJlYWs7CiAgICB9CgogICAgLy8gMTExMFhYWFgKICAgIGlmIChpIDw9IDIgJiYgYyA+PiA0ID09IDB4MEUpIHsKICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMzsKICAgICAgYnJlYWs7CiAgICB9CgogICAgLy8gMTExMTBYWFgKICAgIGlmIChpIDw9IDMgJiYgYyA+PiAzID09IDB4MUUpIHsKICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gNDsKICAgICAgYnJlYWs7CiAgICB9CiAgfQogIHRoaXMuY2hhclJlY2VpdmVkID0gaTsKfTsKClN0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGJ1ZmZlcikgewogIHZhciByZXMgPSAnJzsKICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpCiAgICByZXMgPSB0aGlzLndyaXRlKGJ1ZmZlcik7CgogIGlmICh0aGlzLmNoYXJSZWNlaXZlZCkgewogICAgdmFyIGNyID0gdGhpcy5jaGFyUmVjZWl2ZWQ7CiAgICB2YXIgYnVmID0gdGhpcy5jaGFyQnVmZmVyOwogICAgdmFyIGVuYyA9IHRoaXMuZW5jb2Rpbmc7CiAgICByZXMgKz0gYnVmLnNsaWNlKDAsIGNyKS50b1N0cmluZyhlbmMpOwogIH0KCiAgcmV0dXJuIHJlczsKfTsKCmZ1bmN0aW9uIHBhc3NUaHJvdWdoV3JpdGUoYnVmZmVyKSB7CiAgcmV0dXJuIGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nKTsKfQoKZnVuY3Rpb24gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHsKICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAyOwogIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMiA6IDA7Cn0KCmZ1bmN0aW9uIGJhc2U2NERldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikgewogIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDM7CiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAzIDogMDsKfQoKCi8qKiovIH0pLAovKiAxMjYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gdmVyc2lvbjogMC41LjEKLy8gZGF0ZTogRnJpIE1heSAwNSAyMDE3IDA3OjE2OjM2IEdNVCswMTAwIChHTVQgRGF5bGlnaHQgVGltZSkKLy8gbGljZW5jZTogCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7CglpZih0cnVlKQoJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpCgkJZGVmaW5lKCJJZGVudGl0eUZhY3RvcnkiLCBbXSwgZmFjdG9yeSk7CgllbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JykKCQlleHBvcnRzWyJJZGVudGl0eUZhY3RvcnkiXSA9IGZhY3RvcnkoKTsKCWVsc2UKCQlyb290WyIiXSA9IHJvb3RbIiJdIHx8IHt9LCByb290WyIiXVsiSWRlbnRpdHlGYWN0b3J5Il0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pCi8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwovKioqKioqLwovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKLyoqKioqKi8gCQkJbDogZmFsc2UsCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9Ci8qKioqKiovIAkJfTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwovKioqKioqLwovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwovKioqKioqLyAJfQovKioqKioqLwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHQKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgewovKioqKioqLyAJCQkJY29uZmlndXJhYmxlOiBmYWxzZSwKLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcgovKioqKioqLyAJCQl9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgewovKioqKioqLyAJCXZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPwovKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOgovKioqKioqLyAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9OwovKioqKioqLyAJCV9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTsKLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOwovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9OwovKioqKioqLwovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwovKioqKioqLwovKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCi8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMzgpOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoewoKLyoqKi8gMTIwOgovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKg0KKiBUaGUgVXNlclByb2ZpbGUgYWNjb3JkaW5nIHRvIFVzZXIgSWRlbnRpdHkgRGF0YSBNb2RlbA0KKi8KCnZhciBVc2VyUHJvZmlsZSA9IGZ1bmN0aW9uIFVzZXJQcm9maWxlKHVzZXJuYW1lLCB1c2VyVVJMLCBhdmF0YXIsIGNuLCBsb2NhbGUpIHsKICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBVc2VyUHJvZmlsZSk7CgoKICBpZiAodXNlcm5hbWUpIHsKICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTsKICB9CiAgaWYgKGF2YXRhcikgewogICAgdGhpcy5hdmF0YXIgPSBhdmF0YXI7CiAgfQogIGlmIChjbikgewogICAgdGhpcy5jbiA9IGNuOwogIH0KICBpZiAobG9jYWxlKSB7CiAgICB0aGlzLmxvY2FsZSA9IGxvY2FsZTsKICB9CiAgaWYgKHVzZXJVUkwpIHsKICAgIHRoaXMudXNlclVSTCA9IHVzZXJVUkw7CiAgfQp9OwoKZXhwb3J0cy5kZWZhdWx0ID0gVXNlclByb2ZpbGU7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1siZGVmYXVsdCJdOwoKLyoqKi8gfSksCgovKioqLyAxMzA6Ci8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfVXNlclByb2ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7Cgp2YXIgX1VzZXJQcm9maWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1VzZXJQcm9maWxlKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgTWVzc2FnZUJvZHlJZGVudGl0eSA9IGZ1bmN0aW9uIE1lc3NhZ2VCb2R5SWRlbnRpdHkodXNlcm5hbWUsIHVzZXJVUkwsIGF2YXRhciwgY24sIGxvY2FsZSwgaWRwLCBhc3NlcnRpb24pIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIE1lc3NhZ2VCb2R5SWRlbnRpdHkpOwoKCiAgICBpZiAoIWlkcCkgdGhyb3cgbmV3IEVycm9yKCdJRFAgc2hvdWxkIGJlIGEgcGFyYW1ldGVyJyk7CiAgICBpZiAoIXVzZXJuYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ3VzZXJuYW1lIHNob3VsZCBiZSBhIHBhcmFtZXRlcicpOwoKICAgIHRoaXMuaWRwID0gaWRwOwoKICAgIGlmIChhc3NlcnRpb24pIHsKICAgICAgICB0aGlzLmFzc2VydGlvbiA9IGFzc2VydGlvbjsKICAgIH0KICAgIHRoaXMudXNlclByb2ZpbGUgPSBuZXcgX1VzZXJQcm9maWxlMi5kZWZhdWx0KHVzZXJuYW1lLCB1c2VyVVJMLCBhdmF0YXIsIGNuLCBsb2NhbGUpOwp9OyAvKioNCiAgICogVGhlIElkZW50aXR5IGluZm8gdG8gYmUgYWRkZWQgdG8gTWVzc2FnZS5Cb2R5LklkZW50aXR5DQogICAqLwoKZXhwb3J0cy5kZWZhdWx0ID0gTWVzc2FnZUJvZHlJZGVudGl0eTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKCi8qKiovIDEzODoKLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5Vc2VyUHJvZmlsZSA9IHVuZGVmaW5lZDsKCnZhciBfVXNlclByb2ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7Cgp2YXIgX1VzZXJQcm9maWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1VzZXJQcm9maWxlKTsKCnZhciBfTWVzc2FnZUJvZHlJZGVudGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKTsKCnZhciBfTWVzc2FnZUJvZHlJZGVudGl0eTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9NZXNzYWdlQm9keUlkZW50aXR5KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLlVzZXJQcm9maWxlID0gX1VzZXJQcm9maWxlMi5kZWZhdWx0OwpleHBvcnRzLmRlZmF1bHQgPSBfTWVzc2FnZUJvZHlJZGVudGl0eTIuZGVmYXVsdDsKCi8qKiovIH0pLAoKLyoqKi8gODoKLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogIH0KfTsKCi8qKiovIH0pCgovKioqKioqLyB9KTsKfSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYkluZGxZbkJoWTJzNkx5OHZkMlZpY0dGamF5OTFibWwyWlhKellXeE5iMlIxYkdWRVpXWnBibWwwYVc5dVB6VmpZVFlxS2lvcUtpb3FLaW9pTENKM1pXSndZV05yT2k4dkwzZGxZbkJoWTJzdlltOXZkSE4wY21Gd0lETmtaRGxsTTJRelpETTJaak0yT0RobU0yUmpQek16WXpNcUtpb3FLaW9xS2lvaUxDSjNaV0p3WVdOck9pOHZMeTR2YzNKakwybGtaVzUwYVhSNUwxVnpaWEpRY205bWFXeGxMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMM055WXk5cFpHVnVkR2wwZVM5TlpYTnpZV2RsUW05a2VVbGtaVzUwYVhSNUxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzTnlZeTlKWkdWdWRHbDBlVVpoWTNSdmNua3Vhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyaGxiSEJsY25NdlkyeGhjM05EWVd4c1EyaGxZMnN1YW5NL01qRmhaaW9xS2lvcUtpb3FLaUpkTENKdVlXMWxjeUk2V3lKVmMyVnlVSEp2Wm1sc1pTSXNJblZ6WlhKdVlXMWxJaXdpZFhObGNsVlNUQ0lzSW1GMllYUmhjaUlzSW1OdUlpd2liRzlqWVd4bElpd2lUV1Z6YzJGblpVSnZaSGxKWkdWdWRHbDBlU0lzSW1sa2NDSXNJbUZ6YzJWeWRHbHZiaUlzSWtWeWNtOXlJaXdpZFhObGNsQnliMlpwYkdVaVhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3d5UWtGQk1rSTdRVUZETTBJc1EwRkJRenRCUVVORUxFODdRVU5XUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk96czdRVUZIUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVN4dFJFRkJNa01zWTBGQll6czdRVUZGZWtRN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4aFFVRkxPMEZCUTB3N1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4dFEwRkJNa0lzTUVKQlFUQkNMRVZCUVVVN1FVRkRka1FzZVVOQlFXbERMR1ZCUVdVN1FVRkRhRVE3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFc09FUkJRWE5FTEN0RVFVRXJSRHM3UVVGRmNrZzdRVUZEUVRzN1FVRkZRVHRCUVVOQk96czdPenM3T3pzN096czdPenM3T3pzN096czdRVU5vUlVFN096czdTVUZMVFVFc1Z5eEhRVVZLTEhGQ1FVRlpReXhSUVVGYUxFVkJRWE5DUXl4UFFVRjBRaXhGUVVFclFrTXNUVUZCTDBJc1JVRkJkVU5ETEVWQlFYWkRMRVZCUVRKRFF5eE5RVUV6UXl4RlFVRnRSRHRCUVVGQk96czdRVUZGYWtRc1RVRkJTVW9zVVVGQlNpeEZRVUZqTzBGQlFVVXNVMEZCUzBFc1VVRkJUQ3hIUVVGblFrRXNVVUZCYUVJN1FVRkJNa0k3UVVGRE0wTXNUVUZCU1VVc1RVRkJTaXhGUVVGWk8wRkJRVVVzVTBGQlMwRXNUVUZCVEN4SFFVRmpRU3hOUVVGa08wRkJRWFZDTzBGQlEzSkRMRTFCUVVsRExFVkJRVW9zUlVGQlVUdEJRVUZGTEZOQlFVdEJMRVZCUVV3c1IwRkJWVUVzUlVGQlZqdEJRVUZsTzBGQlEzcENMRTFCUVVsRExFMUJRVW9zUlVGQldUdEJRVUZGTEZOQlFVdEJMRTFCUVV3c1IwRkJZMEVzVFVGQlpEdEJRVUYxUWp0QlFVTnlReXhOUVVGSlNDeFBRVUZLTEVWQlFXRTdRVUZCUlN4VFFVRkxRU3hQUVVGTUxFZEJRV1ZCTEU5QlFXWTdRVUZCZVVJN1FVRkZla01zUXpzN2EwSkJSMWxHTEZjN096czdPenM3T3pzN096czdPenM3T3pzN1FVTmtaanM3T3pzN08wbEJSVTFOTEcxQ0xFZEJSVW9zTmtKQlFWbE1MRkZCUVZvc1JVRkJjMEpETEU5QlFYUkNMRVZCUVN0Q1F5eE5RVUV2UWl4RlFVRjFRME1zUlVGQmRrTXNSVUZCTWtORExFMUJRVE5ETEVWQlFXMUVSU3hIUVVGdVJDeEZRVUYzUkVNc1UwRkJlRVFzUlVGQmJVVTdRVUZCUVRzN08wRkJSV3BGTEZGQlFVa3NRMEZCUTBRc1IwRkJUQ3hGUVVGVkxFMUJRVTBzU1VGQlNVVXNTMEZCU2l4RFFVRlZMREpDUVVGV0xFTkJRVTQ3UVVGRFZpeFJRVUZKTEVOQlFVTlNMRkZCUVV3c1JVRkJaU3hOUVVGTkxFbEJRVWxSTEV0QlFVb3NRMEZCVlN4blEwRkJWaXhEUVVGT096dEJRVVZtTEZOQlFVdEdMRWRCUVV3c1IwRkJWMEVzUjBGQldEczdRVUZGUVN4UlFVRkpReXhUUVVGS0xFVkJRVzlDTzBGQlFVVXNZVUZCUzBFc1UwRkJUQ3hIUVVGcFFrRXNVMEZCYWtJN1FVRkJOa0k3UVVGRGJrUXNVMEZCUzBVc1YwRkJUQ3hIUVVGdFFpd3dRa0ZCWjBKVUxGRkJRV2hDTEVWQlFUQkNReXhQUVVFeFFpeEZRVUZ0UTBNc1RVRkJia01zUlVGQk1rTkRMRVZCUVRORExFVkJRU3REUXl4TlFVRXZReXhEUVVGdVFqdEJRVVZFTEVNc1JVRnNRa2c3T3pzN2EwSkJkVUpsUXl4dFFqczdPenM3T3pzN096czdPenM3T3p0QlEzWkNaanM3T3p0QlFVTkJPenM3T3pzN1VVRkZVMDRzVnpzN096czdPenM3TzBGRFNGUTdPMEZCUlVFN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rklpd2labWxzWlNJNklrbGtaVzUwYVhSNVJtRmpkRzl5ZVM1cWN5SXNJbk52ZFhKalpYTkRiMjUwWlc1MElqcGJJaWhtZFc1amRHbHZiaUIzWldKd1lXTnJWVzVwZG1WeWMyRnNUVzlrZFd4bFJHVm1hVzVwZEdsdmJpaHliMjkwTENCbVlXTjBiM0o1S1NCN1hHNWNkR2xtS0hSNWNHVnZaaUJsZUhCdmNuUnpJRDA5UFNBbmIySnFaV04wSnlBbUppQjBlWEJsYjJZZ2JXOWtkV3hsSUQwOVBTQW5iMkpxWldOMEp5bGNibHgwWEhSdGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaaFkzUnZjbmtvS1R0Y2JseDBaV3h6WlNCcFppaDBlWEJsYjJZZ1pHVm1hVzVsSUQwOVBTQW5ablZ1WTNScGIyNG5JQ1ltSUdSbFptbHVaUzVoYldRcFhHNWNkRngwWkdWbWFXNWxLRndpU1dSbGJuUnBkSGxHWVdOMGIzSjVYQ0lzSUZ0ZExDQm1ZV04wYjNKNUtUdGNibHgwWld4elpTQnBaaWgwZVhCbGIyWWdaWGh3YjNKMGN5QTlQVDBnSjI5aWFtVmpkQ2NwWEc1Y2RGeDBaWGh3YjNKMGMxdGNJa2xrWlc1MGFYUjVSbUZqZEc5eWVWd2lYU0E5SUdaaFkzUnZjbmtvS1R0Y2JseDBaV3h6WlZ4dVhIUmNkSEp2YjNSYlhDSmNJbDBnUFNCeWIyOTBXMXdpWENKZElIeDhJSHQ5TENCeWIyOTBXMXdpWENKZFcxd2lTV1JsYm5ScGRIbEdZV04wYjNKNVhDSmRJRDBnWm1GamRHOXllU2dwTzF4dWZTa29kR2hwY3l3Z1puVnVZM1JwYjI0b0tTQjdYRzV5WlhSMWNtNGdYRzVjYmx4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZJZ0x5OWNiaTh2SUhkbFluQmhZMnN2ZFc1cGRtVnljMkZzVFc5a2RXeGxSR1ZtYVc1cGRHbHZiaUlzSWlCY2RDOHZJRlJvWlNCdGIyUjFiR1VnWTJGamFHVmNiaUJjZEhaaGNpQnBibk4wWVd4c1pXUk5iMlIxYkdWeklEMGdlMzA3WEc1Y2JpQmNkQzh2SUZSb1pTQnlaWEYxYVhKbElHWjFibU4wYVc5dVhHNGdYSFJtZFc1amRHbHZiaUJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmS0cxdlpIVnNaVWxrS1NCN1hHNWNiaUJjZEZ4MEx5OGdRMmhsWTJzZ2FXWWdiVzlrZFd4bElHbHpJR2x1SUdOaFkyaGxYRzRnWEhSY2RHbG1LR2x1YzNSaGJHeGxaRTF2WkhWc1pYTmJiVzlrZFd4bFNXUmRLVnh1SUZ4MFhIUmNkSEpsZEhWeWJpQnBibk4wWVd4c1pXUk5iMlIxYkdWelcyMXZaSFZzWlVsa1hTNWxlSEJ2Y25Sek8xeHVYRzRnWEhSY2RDOHZJRU55WldGMFpTQmhJRzVsZHlCdGIyUjFiR1VnS0dGdVpDQndkWFFnYVhRZ2FXNTBieUIwYUdVZ1kyRmphR1VwWEc0Z1hIUmNkSFpoY2lCdGIyUjFiR1VnUFNCcGJuTjBZV3hzWldSTmIyUjFiR1Z6VzIxdlpIVnNaVWxrWFNBOUlIdGNiaUJjZEZ4MFhIUnBPaUJ0YjJSMWJHVkpaQ3hjYmlCY2RGeDBYSFJzT2lCbVlXeHpaU3hjYmlCY2RGeDBYSFJsZUhCdmNuUnpPaUI3ZlZ4dUlGeDBYSFI5TzF4dVhHNGdYSFJjZEM4dklFVjRaV04xZEdVZ2RHaGxJRzF2WkhWc1pTQm1kVzVqZEdsdmJseHVJRngwWEhSdGIyUjFiR1Z6VzIxdlpIVnNaVWxrWFM1allXeHNLRzF2WkhWc1pTNWxlSEJ2Y25SekxDQnRiMlIxYkdVc0lHMXZaSFZzWlM1bGVIQnZjblJ6TENCZlgzZGxZbkJoWTJ0ZmNtVnhkV2x5WlY5ZktUdGNibHh1SUZ4MFhIUXZMeUJHYkdGbklIUm9aU0J0YjJSMWJHVWdZWE1nYkc5aFpHVmtYRzRnWEhSY2RHMXZaSFZzWlM1c0lEMGdkSEoxWlR0Y2JseHVJRngwWEhRdkx5QlNaWFIxY200Z2RHaGxJR1Y0Y0c5eWRITWdiMllnZEdobElHMXZaSFZzWlZ4dUlGeDBYSFJ5WlhSMWNtNGdiVzlrZFd4bExtVjRjRzl5ZEhNN1hHNGdYSFI5WEc1Y2JseHVJRngwTHk4Z1pYaHdiM05sSUhSb1pTQnRiMlIxYkdWeklHOWlhbVZqZENBb1gxOTNaV0p3WVdOclgyMXZaSFZzWlhOZlh5bGNiaUJjZEY5ZmQyVmljR0ZqYTE5eVpYRjFhWEpsWDE4dWJTQTlJRzF2WkhWc1pYTTdYRzVjYmlCY2RDOHZJR1Y0Y0c5elpTQjBhR1VnYlc5a2RXeGxJR05oWTJobFhHNGdYSFJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmTG1NZ1BTQnBibk4wWVd4c1pXUk5iMlIxYkdWek8xeHVYRzRnWEhRdkx5QnBaR1Z1ZEdsMGVTQm1kVzVqZEdsdmJpQm1iM0lnWTJGc2JHbHVaeUJvWVhKdGIyNTVJR2x0Y0c5eWRITWdkMmwwYUNCMGFHVWdZMjl5Y21WamRDQmpiMjUwWlhoMFhHNGdYSFJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmTG1rZ1BTQm1kVzVqZEdsdmJpaDJZV3gxWlNrZ2V5QnlaWFIxY200Z2RtRnNkV1U3SUgwN1hHNWNiaUJjZEM4dklHUmxabWx1WlNCblpYUjBaWElnWm5WdVkzUnBiMjRnWm05eUlHaGhjbTF2Ym5rZ1pYaHdiM0owYzF4dUlGeDBYMTkzWldKd1lXTnJYM0psY1hWcGNtVmZYeTVrSUQwZ1puVnVZM1JwYjI0b1pYaHdiM0owY3l3Z2JtRnRaU3dnWjJWMGRHVnlLU0I3WEc0Z1hIUmNkR2xtS0NGZlgzZGxZbkJoWTJ0ZmNtVnhkV2x5WlY5ZkxtOG9aWGh3YjNKMGN5d2dibUZ0WlNrcElIdGNiaUJjZEZ4MFhIUlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvWlhod2IzSjBjeXdnYm1GdFpTd2dlMXh1SUZ4MFhIUmNkRngwWTI5dVptbG5kWEpoWW14bE9pQm1ZV3h6WlN4Y2JpQmNkRngwWEhSY2RHVnVkVzFsY21GaWJHVTZJSFJ5ZFdVc1hHNGdYSFJjZEZ4MFhIUm5aWFE2SUdkbGRIUmxjbHh1SUZ4MFhIUmNkSDBwTzF4dUlGeDBYSFI5WEc0Z1hIUjlPMXh1WEc0Z1hIUXZMeUJuWlhSRVpXWmhkV3gwUlhod2IzSjBJR1oxYm1OMGFXOXVJR1p2Y2lCamIyMXdZWFJwWW1sc2FYUjVJSGRwZEdnZ2JtOXVMV2hoY20xdmJua2diVzlrZFd4bGMxeHVJRngwWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHk1dUlEMGdablZ1WTNScGIyNG9iVzlrZFd4bEtTQjdYRzRnWEhSY2RIWmhjaUJuWlhSMFpYSWdQU0J0YjJSMWJHVWdKaVlnYlc5a2RXeGxMbDlmWlhOTmIyUjFiR1VnUDF4dUlGeDBYSFJjZEdaMWJtTjBhVzl1SUdkbGRFUmxabUYxYkhRb0tTQjdJSEpsZEhWeWJpQnRiMlIxYkdWYkoyUmxabUYxYkhRblhUc2dmU0E2WEc0Z1hIUmNkRngwWm5WdVkzUnBiMjRnWjJWMFRXOWtkV3hsUlhod2IzSjBjeWdwSUhzZ2NtVjBkWEp1SUcxdlpIVnNaVHNnZlR0Y2JpQmNkRngwWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHk1a0tHZGxkSFJsY2l3Z0oyRW5MQ0JuWlhSMFpYSXBPMXh1SUZ4MFhIUnlaWFIxY200Z1oyVjBkR1Z5TzF4dUlGeDBmVHRjYmx4dUlGeDBMeThnVDJKcVpXTjBMbkJ5YjNSdmRIbHdaUzVvWVhOUGQyNVFjbTl3WlhKMGVTNWpZV3hzWEc0Z1hIUmZYM2RsWW5CaFkydGZjbVZ4ZFdseVpWOWZMbThnUFNCbWRXNWpkR2x2YmlodlltcGxZM1FzSUhCeWIzQmxjblI1S1NCN0lISmxkSFZ5YmlCUFltcGxZM1F1Y0hKdmRHOTBlWEJsTG1oaGMwOTNibEJ5YjNCbGNuUjVMbU5oYkd3b2IySnFaV04wTENCd2NtOXdaWEowZVNrN0lIMDdYRzVjYmlCY2RDOHZJRjlmZDJWaWNHRmphMTl3ZFdKc2FXTmZjR0YwYUY5ZlhHNGdYSFJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmTG5BZ1BTQmNJbHdpTzF4dVhHNGdYSFF2THlCTWIyRmtJR1Z1ZEhKNUlHMXZaSFZzWlNCaGJtUWdjbVYwZFhKdUlHVjRjRzl5ZEhOY2JpQmNkSEpsZEhWeWJpQmZYM2RsWW5CaFkydGZjbVZ4ZFdseVpWOWZLRjlmZDJWaWNHRmphMTl5WlhGMWFYSmxYMTh1Y3lBOUlERXpPQ2s3WEc1Y2JseHVYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVaUF2TDF4dUx5OGdkMlZpY0dGamF5OWliMjkwYzNSeVlYQWdNMlJrT1dVelpETmtNelptTXpZNE9HWXpaR01pTENJdktpcGNjbHh1S2lCVWFHVWdWWE5sY2xCeWIyWnBiR1VnWVdOamIzSmthVzVuSUhSdklGVnpaWElnU1dSbGJuUnBkSGtnUkdGMFlTQk5iMlJsYkZ4eVhHNHFMMXh5WEc1Y2NseHVYSEpjYm1Oc1lYTnpJRlZ6WlhKUWNtOW1hV3hsSUh0Y2NseHVYSEpjYmlBZ1kyOXVjM1J5ZFdOMGIzSW9kWE5sY201aGJXVXNJSFZ6WlhKVlVrd3NJR0YyWVhSaGNpd2dZMjRzSUd4dlkyRnNaU2tnZTF4eVhHNWNjbHh1SUNBZ0lHbG1JQ2gxYzJWeWJtRnRaU2tnZXlCMGFHbHpMblZ6WlhKdVlXMWxJRDBnZFhObGNtNWhiV1U3SUgxY2NseHVJQ0FnSUdsbUlDaGhkbUYwWVhJcElIc2dkR2hwY3k1aGRtRjBZWElnUFNCaGRtRjBZWEk3SUgxY2NseHVJQ0FnSUdsbUlDaGpiaWtnZXlCMGFHbHpMbU51SUQwZ1kyNDdJSDFjY2x4dUlDQWdJR2xtSUNoc2IyTmhiR1VwSUhzZ2RHaHBjeTVzYjJOaGJHVWdQU0JzYjJOaGJHVTdJSDFjY2x4dUlDQWdJR2xtSUNoMWMyVnlWVkpNS1NCN0lIUm9hWE11ZFhObGNsVlNUQ0E5SUhWelpYSlZVa3c3SUgxY2NseHVYSEpjYmlBZ2ZWeHlYRzU5WEhKY2JseHlYRzVsZUhCdmNuUWdaR1ZtWVhWc2RDQlZjMlZ5VUhKdlptbHNaVHRjY2x4dVhHNWNibHh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVklnTHk5Y2JpOHZJQzR2YzNKakwybGtaVzUwYVhSNUwxVnpaWEpRY205bWFXeGxMbXB6SWl3aUx5b3FYSEpjYmlvZ1ZHaGxJRWxrWlc1MGFYUjVJR2x1Wm04Z2RHOGdZbVVnWVdSa1pXUWdkRzhnVFdWemMyRm5aUzVDYjJSNUxrbGtaVzUwYVhSNVhISmNiaW92WEhKY2JseHlYRzVwYlhCdmNuUWdWWE5sY2xCeWIyWnBiR1VnWm5KdmJTQW5MaTlWYzJWeVVISnZabWxzWlNjN1hISmNibHh5WEc1amJHRnpjeUJOWlhOellXZGxRbTlrZVVsa1pXNTBhWFI1SUh0Y2NseHVYSEpjYmlBZ1kyOXVjM1J5ZFdOMGIzSW9kWE5sY201aGJXVXNJSFZ6WlhKVlVrd3NJR0YyWVhSaGNpd2dZMjRzSUd4dlkyRnNaU3dnYVdSd0xDQmhjM05sY25ScGIyNHBJSHRjY2x4dVhISmNiaUFnSUNCcFppQW9JV2xrY0NrZ2RHaHliM2NnYm1WM0lFVnljbTl5S0NkSlJGQWdjMmh2ZFd4a0lHSmxJR0VnY0dGeVlXMWxkR1Z5SnlrN1hISmNiaUFnSUNCcFppQW9JWFZ6WlhKdVlXMWxLU0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9KM1Z6WlhKdVlXMWxJSE5vYjNWc1pDQmlaU0JoSUhCaGNtRnRaWFJsY2ljcE8xeHlYRzVjY2x4dUlDQWdJSFJvYVhNdWFXUndJRDBnYVdSd08xeHlYRzVjY2x4dUlDQWdJR2xtSUNoaGMzTmxjblJwYjI0cElDQWdJQ0FnZXlCMGFHbHpMbUZ6YzJWeWRHbHZiaUE5SUdGemMyVnlkR2x2YmpzZ2ZWeHlYRzRnSUNBZ2RHaHBjeTUxYzJWeVVISnZabWxzWlNBOUlHNWxkeUJWYzJWeVVISnZabWxzWlNoMWMyVnlibUZ0WlN3Z2RYTmxjbFZTVEN3Z1lYWmhkR0Z5TENCamJpd2diRzlqWVd4bEtUdGNjbHh1WEhKY2JpQWdmVnh5WEc1Y2NseHVmVnh5WEc1Y2NseHVYSEpjYm1WNGNHOXlkQ0JrWldaaGRXeDBJRTFsYzNOaFoyVkNiMlI1U1dSbGJuUnBkSGs3WEhKY2JseHVYRzVjYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTSUM4dlhHNHZMeUF1TDNOeVl5OXBaR1Z1ZEdsMGVTOU5aWE56WVdkbFFtOWtlVWxrWlc1MGFYUjVMbXB6SWl3aWFXMXdiM0owSUZWelpYSlFjbTltYVd4bElHWnliMjBnSnk0dmFXUmxiblJwZEhrdlZYTmxjbEJ5YjJacGJHVW5PMXh5WEc1cGJYQnZjblFnVFdWemMyRm5aVUp2WkhsSlpHVnVkR2wwZVNCbWNtOXRJQ2N1TDJsa1pXNTBhWFI1TDAxbGMzTmhaMlZDYjJSNVNXUmxiblJwZEhrbk8xeHlYRzVjY2x4dVpYaHdiM0owSUhzZ1ZYTmxjbEJ5YjJacGJHVWdmVHRjY2x4dVpYaHdiM0owSUdSbFptRjFiSFFnVFdWemMyRm5aVUp2WkhsSlpHVnVkR2wwZVR0Y2NseHVYRzVjYmx4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZJZ0x5OWNiaTh2SUM0dmMzSmpMMGxrWlc1MGFYUjVSbUZqZEc5eWVTNXFjeUlzSWx3aWRYTmxJSE4wY21samRGd2lPMXh1WEc1bGVIQnZjblJ6TGw5ZlpYTk5iMlIxYkdVZ1BTQjBjblZsTzF4dVhHNWxlSEJ2Y25SekxtUmxabUYxYkhRZ1BTQm1kVzVqZEdsdmJpQW9hVzV6ZEdGdVkyVXNJRU52Ym5OMGNuVmpkRzl5S1NCN1hHNGdJR2xtSUNnaEtHbHVjM1JoYm1ObElHbHVjM1JoYm1ObGIyWWdRMjl1YzNSeWRXTjBiM0lwS1NCN1hHNGdJQ0FnZEdoeWIzY2dibVYzSUZSNWNHVkZjbkp2Y2loY0lrTmhibTV2ZENCallXeHNJR0VnWTJ4aGMzTWdZWE1nWVNCbWRXNWpkR2x2Ymx3aUtUdGNiaUFnZlZ4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlvWld4d1pYSnpMMk5zWVhOelEyRnNiRU5vWldOckxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTRYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVZ05pQTNJRGdnT1NBeE1DSmRMQ0p6YjNWeVkyVlNiMjkwSWpvaUluMD0KCi8qKiovIH0pLAovKiAxMjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gdmVyc2lvbjogMC41LjEKLy8gZGF0ZTogTW9uIE1heSAwOCAyMDE3IDIyOjA5OjM1IEdNVCswMTAwIChHTVQgRGF5bGlnaHQgVGltZSkKLy8gbGljZW5jZTogCi8qKgoqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYKKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiogQ29weXJpZ2h0IDIwMTYgQXBpemVlCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KKgoqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKKgoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCioKKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCioqLwoKCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7CglpZih0cnVlKQoJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpCgkJZGVmaW5lKCJTeW5jaGVyIiwgW10sIGZhY3RvcnkpOwoJZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpCgkJZXhwb3J0c1siU3luY2hlciJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbIiJdID0gcm9vdFsiIl0gfHwge30sIHJvb3RbIiJdWyJTeW5jaGVyIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pCi8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwovKioqKioqLwovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKLyoqKioqKi8gCQkJbDogZmFsc2UsCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9Ci8qKioqKiovIAkJfTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwovKioqKioqLwovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwovKioqKioqLyAJfQovKioqKioqLwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHQKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgewovKioqKioqLyAJCQkJY29uZmlndXJhYmxlOiBmYWxzZSwKLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcgovKioqKioqLyAJCQl9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgewovKioqKioqLyAJCXZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPwovKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOgovKioqKioqLyAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9OwovKioqKioqLyAJCV9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTsKLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOwovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9OwovKioqKioqLwovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwovKioqKioqLwovKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCi8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNDMpOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCnZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307CmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKLyoqKi8gfSksCi8qIDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKdmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoCiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwppZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKLyoqKi8gfSksCi8qIDIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eQptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7Cn0pOwoKLyoqKi8gfSksCi8qIDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHN0b3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgnd2tzJykKICAsIHVpZCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKQogICwgU3ltYm9sICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuU3ltYm9sCiAgLCBVU0VfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PSAnZnVuY3Rpb24nOwoKdmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXsKICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID0KICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7Cn07CgokZXhwb3J0cy5zdG9yZSA9IHN0b3JlOwoKLyoqKi8gfSksCi8qIDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQogICwgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgZFAgICAgICAgICAgICAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CgpleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7CiAgYW5PYmplY3QoTyk7CiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpOwogIGFuT2JqZWN0KEF0dHJpYnV0ZXMpOwogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7CiAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQogIGlmKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcyl0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIScpOwogIGlmKCd2YWx1ZScgaW4gQXR0cmlidXRlcylPW1BdID0gQXR0cmlidXRlcy52YWx1ZTsKICByZXR1cm4gTzsKfTsKCi8qKiovIH0pLAovKiA1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpOwogIHJldHVybiBpdDsKfTsKCi8qKiovIH0pLAovKiA2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7Cn07CgovKioqLyB9KSwKLyogNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwp9IDogZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICBvYmplY3Rba2V5XSA9IHZhbHVlOwogIHJldHVybiBvYmplY3Q7Cn07CgovKioqLyB9KSwKLyogOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9OwoKLyoqKi8gfSksCi8qIDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpCiAgLCBoaWRlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXsKICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRgogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlMKICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUAogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LlcKICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSkKICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdCiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV0KICAgICwga2V5LCBvd24sIG91dDsKICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsKICBmb3Ioa2V5IGluIHNvdXJjZSl7CiAgICAvLyBjb250YWlucyBpbiBuYXRpdmUKICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7CiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7CiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZAogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsKICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcwogICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKQogICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnkKICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7CiAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7CiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpewogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpewogICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQzsKICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7CiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOwogICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7CiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07CiAgICAgIHJldHVybiBGOwogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7CiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKICAgIGlmKElTX1BST1RPKXsKICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0OwogICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsKICAgIH0KICB9Cn07Ci8vIHR5cGUgYml0bWFwCiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsCiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljCiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG8KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kCiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcAokZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmUKJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIAptb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7CgovKioqLyB9KSwKLyogMTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICB9CiAgfQoKICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgcmV0dXJuIENvbnN0cnVjdG9yOwogIH07Cn0oKTsKCi8qKiovIH0pLAovKiAxMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpewogIHRyeSB7CiAgICByZXR1cm4gISFleGVjKCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB0cnVlOwogIH0KfTsKCi8qKiovIH0pLAovKiAxMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwga2V5KXsKICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTsKfTsKCi8qKiovIH0pLAovKiAxMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3MKdmFyIElPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KQogICwgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7Cn07CgovKioqLyB9KSwKLyogMTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXsKICBhRnVuY3Rpb24oZm4pOwogIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47CiAgc3dpdGNoKGxlbmd0aCl7CiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7CiAgICB9OwogICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7CiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpOwogICAgfTsKICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpewogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTsKICAgIH07CiAgfQogIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXsKICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogIH07Cn07CgovKioqLyB9KSwKLyogMTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXsKICByZXR1cm4gewogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLAogICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLAogICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLAogICAgdmFsdWUgICAgICAgOiB2YWx1ZQogIH07Cn07CgovKioqLyB9KSwKLyogMTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSB7fTsKCi8qKiovIH0pLAovKiAxNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpCiAgLCBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQKICAvLyBpbiBvbGQgSUUgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCcKICAsIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9Owp9OwoKLyoqKi8gfSksCi8qIDE4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi4xNCAvIDE1LjIuMy4xNCBPYmplY3Qua2V5cyhPKQp2YXIgJGtleXMgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTsKCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKXsKICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpOwp9OwoKLyoqKi8gfSksCi8qIDE5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7CiAgcmV0dXJuIGl0Owp9OwoKLyoqKi8gfSksCi8qIDIwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTsKfTsKCi8qKiovIH0pLAovKiAyMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2UKLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgUyl7CiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7CiAgdmFyIGZuLCB2YWw7CiAgaWYoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIGlmKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsKICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7Cn07CgovKioqLyB9KSwKLyogMjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGRlZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZgogICwgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ3RvU3RyaW5nVGFnJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpewogIGlmKGl0ICYmICFoYXMoaXQgPSBzdGF0ID8gaXQgOiBpdC5wcm90b3R5cGUsIFRBRykpZGVmKGl0LCBUQUcsIHtjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiB0YWd9KTsKfTsKCi8qKiovIH0pLAovKiAyMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgaWQgPSAwCiAgLCBweCA9IE1hdGgucmFuZG9tKCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXsKICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpOwp9OwoKLyoqKi8gfSksCi8qIDI0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiICsgaXQpOwogIHJldHVybiBpdDsKfTsKCi8qKiovIH0pLAovKiAyNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDIpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX3JlcXVpcmVfXygxNykoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Owp9KTsKCi8qKiovIH0pLAovKiAyNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHRydWU7CgovKioqLyB9KSwKLyogMjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHNoYXJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzApKCdrZXlzJykKICAsIHVpZCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CiAgcmV0dXJuIHNoYXJlZFtrZXldIHx8IChzaGFyZWRba2V5XSA9IHVpZChrZXkpKTsKfTsKCi8qKiovIH0pLAovKiAyOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyA3LjEuNCBUb0ludGVnZXIKdmFyIGNlaWwgID0gTWF0aC5jZWlsCiAgLCBmbG9vciA9IE1hdGguZmxvb3I7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBpc05hTihpdCA9ICtpdCkgPyAwIDogKGl0ID4gMCA/IGZsb29yIDogY2VpbCkoaXQpOwp9OwoKLyoqKi8gfSksCi8qIDI5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXMKbW9kdWxlLmV4cG9ydHMgPSAoCiAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZicKKS5zcGxpdCgnLCcpOwoKLyoqKi8gfSksCi8qIDMwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJwogICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB7fSk7Cn07CgovKioqLyB9KSwKLyogMzEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MCksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAzMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpCnZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpOwp9OwoKLyoqKi8gfSksCi8qIDMzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMzYpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogMzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX3NldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7Cgp2YXIgX3NldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldFByb3RvdHlwZU9mKTsKCnZhciBfY3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7Cgp2YXIgX2NyZWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGUpOwoKdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7Cgp2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKHN1cGVyQ2xhc3MpKSk7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSAoMCwgX2NyZWF0ZTIuZGVmYXVsdCkoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQgPyAoMCwgX3NldFByb3RvdHlwZU9mMi5kZWZhdWx0KShzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOwp9OwoKLyoqKi8gfSksCi8qIDM1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7Cgp2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkgewogIGlmICghc2VsZikgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoY2FsbCkpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsKfTsKCi8qKiovIH0pLAovKiAzNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXsKICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTsKfTsKCi8qKiovIH0pLAovKiAzNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKdmFyIGFuT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQogICwgZFBzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KQogICwgSUVfUFJPVE8gICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KSgnSUVfUFJPVE8nKQogICwgRW1wdHkgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9CiAgLCBQUk9UT1RZUEUgICA9ICdwcm90b3R5cGUnOwoKLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZQp2YXIgY3JlYXRlRGljdCA9IGZ1bmN0aW9uKCl7CiAgLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWcKICB2YXIgaWZyYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykoJ2lmcmFtZScpCiAgICAsIGkgICAgICA9IGVudW1CdWdLZXlzLmxlbmd0aAogICAgLCBsdCAgICAgPSAnPCcKICAgICwgZ3QgICAgID0gJz4nCiAgICAsIGlmcmFtZURvY3VtZW50OwogIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIF9fd2VicGFja19yZXF1aXJlX18oNDIpLmFwcGVuZENoaWxkKGlmcmFtZSk7CiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybAogIC8vIGNyZWF0ZURpY3QgPSBpZnJhbWUuY29udGVudFdpbmRvdy5PYmplY3Q7CiAgLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOwogIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgaWZyYW1lRG9jdW1lbnQub3BlbigpOwogIGlmcmFtZURvY3VtZW50LndyaXRlKGx0ICsgJ3NjcmlwdCcgKyBndCArICdkb2N1bWVudC5GPU9iamVjdCcgKyBsdCArICcvc2NyaXB0JyArIGd0KTsKICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpOwogIGNyZWF0ZURpY3QgPSBpZnJhbWVEb2N1bWVudC5GOwogIHdoaWxlKGktLSlkZWxldGUgY3JlYXRlRGljdFtQUk9UT1RZUEVdW2VudW1CdWdLZXlzW2ldXTsKICByZXR1cm4gY3JlYXRlRGljdCgpOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKXsKICB2YXIgcmVzdWx0OwogIGlmKE8gIT09IG51bGwpewogICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pOwogICAgcmVzdWx0ID0gbmV3IEVtcHR5OwogICAgRW1wdHlbUFJPVE9UWVBFXSA9IG51bGw7CiAgICAvLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbAogICAgcmVzdWx0W0lFX1BST1RPXSA9IE87CiAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTsKICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZFBzKHJlc3VsdCwgUHJvcGVydGllcyk7Cn07CgoKLyoqKi8gfSksCi8qIDM4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mfSk7CgovKioqLyB9KSwKLyogMzkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKdmFyIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikKICAsICRleHBvcnQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQogICwgcmVkZWZpbmUgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KQogICwgaGlkZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCBJdGVyYXRvcnMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpCiAgLCAkaXRlckNyZWF0ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpCiAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpCiAgLCBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpCiAgLCBJVEVSQVRPUiAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJykKICAsIEJVR0dZICAgICAgICAgID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpIC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGAKICAsIEZGX0lURVJBVE9SICAgID0gJ0BAaXRlcmF0b3InCiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJwogICwgVkFMVUVTICAgICAgICAgPSAndmFsdWVzJzsKCnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEJhc2UsIE5BTUUsIENvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCl7CiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpOwogIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXsKICAgIGlmKCFCVUdHWSAmJiBraW5kIGluIHByb3RvKXJldHVybiBwcm90b1traW5kXTsKICAgIHN3aXRjaChraW5kKXsKICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogICAgICBjYXNlIFZBTFVFUzogcmV0dXJuIGZ1bmN0aW9uIHZhbHVlcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogIH07CiAgdmFyIFRBRyAgICAgICAgPSBOQU1FICsgJyBJdGVyYXRvcicKICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTCiAgICAsIFZBTFVFU19CVUcgPSBmYWxzZQogICAgLCBwcm90byAgICAgID0gQmFzZS5wcm90b3R5cGUKICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXQogICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVCkKICAgICwgJGVudHJpZXMgICA9IERFRkFVTFQgPyAhREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKCdlbnRyaWVzJykgOiB1bmRlZmluZWQKICAgICwgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmUKICAgICwgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTsKICAvLyBGaXggbmF0aXZlCiAgaWYoJGFueU5hdGl2ZSl7CiAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSkpOwogICAgaWYoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUpewogICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzCiAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpOwogICAgICAvLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKICAgICAgaWYoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTsKICAgIH0KICB9CiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgogIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7CiAgICBWQUxVRVNfQlVHID0gdHJ1ZTsKICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07CiAgfQogIC8vIERlZmluZSBpdGVyYXRvcgogIGlmKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKXsKICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7CiAgfQogIC8vIFBsdWcgZm9yIGxpYnJhcnkKICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDsKICBJdGVyYXRvcnNbVEFHXSAgPSByZXR1cm5UaGlzOwogIGlmKERFRkFVTFQpewogICAgbWV0aG9kcyA9IHsKICAgICAgdmFsdWVzOiAgREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKFZBTFVFUyksCiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSwKICAgICAgZW50cmllczogJGVudHJpZXMKICAgIH07CiAgICBpZihGT1JDRUQpZm9yKGtleSBpbiBtZXRob2RzKXsKICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7CiAgICB9IGVsc2UgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoQlVHR1kgfHwgVkFMVUVTX0JVRyksIE5BTUUsIG1ldGhvZHMpOwogIH0KICByZXR1cm4gbWV0aG9kczsKfTsKCi8qKiovIH0pLAovKiA0MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDQxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCmV4cG9ydHMuZiA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlOwoKLyoqKi8gfSksCi8qIDQyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgovKioqLyB9KSwKLyogNDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykKdmFyIGhhcyAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIHRvT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikKICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykoJ0lFX1BST1RPJykKICAsIE9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTsKCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pewogIE8gPSB0b09iamVjdChPKTsKICBpZihoYXMoTywgSUVfUFJPVE8pKXJldHVybiBPW0lFX1BST1RPXTsKICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXsKICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTsKICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsOwp9OwoKLyoqKi8gfSksCi8qIDQ0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBoYXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQogICwgdG9JT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIGFycmF5SW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpKGZhbHNlKQogICwgSUVfUFJPVE8gICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykoJ0lFX1BST1RPJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZXMpewogIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQogICAgLCBpICAgICAgPSAwCiAgICAsIHJlc3VsdCA9IFtdCiAgICAsIGtleTsKICBmb3Ioa2V5IGluIE8paWYoa2V5ICE9IElFX1BST1RPKWhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7CiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5cwogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpaWYoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKXsKICAgIH5hcnJheUluZGV4T2YocmVzdWx0LCBrZXkpIHx8IHJlc3VsdC5wdXNoKGtleSk7CiAgfQogIHJldHVybiByZXN1bHQ7Cn07CgovKioqLyB9KSwKLyogNDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQogICwgY29yZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGZhaWxzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGV4ZWMpewogIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV0KICAgICwgZXhwID0ge307CiAgZXhwW0tFWV0gPSBleGVjKGZuKTsKICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7Cn07CgovKioqLyB9KSwKLyogNDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKLyoqKi8gfSksCi8qIDQ3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDcuMS4xNSBUb0xlbmd0aAp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkKICAsIG1pbiAgICAgICA9IE1hdGgubWluOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MQp9OwoKLyoqKi8gfSksCi8qIDQ4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQogICwgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KQogICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KQogICwgZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmY7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7CiAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTsKICBpZihuYW1lLmNoYXJBdCgwKSAhPSAnXycgJiYgIShuYW1lIGluICRTeW1ib2wpKWRlZmluZVByb3BlcnR5KCRTeW1ib2wsIG5hbWUsIHt2YWx1ZTogd2tzRXh0LmYobmFtZSl9KTsKfTsKCi8qKiovIH0pLAovKiA0OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKLyoqKi8gfSksCi8qIDUwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciAkYXQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NikodHJ1ZSk7CgovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCl9fd2VicGFja19yZXF1aXJlX18oMzkpKFN0cmluZywgJ1N0cmluZycsIGZ1bmN0aW9uKGl0ZXJhdGVkKXsKICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0CiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgKLy8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKQp9LCBmdW5jdGlvbigpewogIHZhciBPICAgICA9IHRoaXMuX3QKICAgICwgaW5kZXggPSB0aGlzLl9pCiAgICAsIHBvaW50OwogIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07CiAgcG9pbnQgPSAkYXQoTywgaW5kZXgpOwogIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoOwogIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07Cn0pOwoKLyoqKi8gfSksCi8qIDUxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNjkpOwp2YXIgZ2xvYmFsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGhpZGUgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBJdGVyYXRvcnMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikKICAsIFRPX1NUUklOR19UQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCd0b1N0cmluZ1RhZycpOwoKZm9yKHZhciBjb2xsZWN0aW9ucyA9IFsnTm9kZUxpc3QnLCAnRE9NVG9rZW5MaXN0JywgJ01lZGlhTGlzdCcsICdTdHlsZVNoZWV0TGlzdCcsICdDU1NSdWxlTGlzdCddLCBpID0gMDsgaSA8IDU7IGkrKyl7CiAgdmFyIE5BTUUgICAgICAgPSBjb2xsZWN0aW9uc1tpXQogICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdCiAgICAsIHByb3RvICAgICAgPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlOwogIGlmKHByb3RvICYmICFwcm90b1tUT19TVFJJTkdfVEFHXSloaWRlKHByb3RvLCBUT19TVFJJTkdfVEFHLCBOQU1FKTsKICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7Cn0KCi8qKiovIH0pLAovKiA1MiAqLywKLyogNTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGNvcmUgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQogICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogIHJldHVybiAkSlNPTi5zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3VtZW50cyk7Cn07CgovKioqLyB9KSwKLyogNTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCgovKioqLyB9KSwKLyogNTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApCiAgLCBUQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCd0b1N0cmluZ1RhZycpCiAgLy8gRVMzIHdyb25nIGhlcmUKICAsIEFSRyA9IGNvZihmdW5jdGlvbigpeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnOwoKLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3IKdmFyIHRyeUdldCA9IGZ1bmN0aW9uKGl0LCBrZXkpewogIHRyeSB7CiAgICByZXR1cm4gaXRba2V5XTsKICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICB2YXIgTywgVCwgQjsKICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCcKICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZQogICAgOiB0eXBlb2YgKFQgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRBRykpID09ICdzdHJpbmcnID8gVAogICAgLy8gYnVpbHRpblRhZyBjYXNlCiAgICA6IEFSRyA/IGNvZihPKQogICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFjawogICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7Cn07CgovKioqLyB9KSwKLyogNTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3MKdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOwptb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpewogIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTsKfTsKCi8qKiovIH0pLAovKiA1NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgcElFICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQogICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQogICwgdG9JT2JqZWN0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQogICwgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgZ09QRCAgICAgICAgICAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwoKZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSA/IGdPUEQgOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCl7CiAgTyA9IHRvSU9iamVjdChPKTsKICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7CiAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHsKICAgIHJldHVybiBnT1BEKE8sIFApOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICBpZihoYXMoTywgUCkpcmV0dXJuIGNyZWF0ZURlc2MoIXBJRS5mLmNhbGwoTywgUCksIE9bUF0pOwp9OwoKLyoqKi8gfSksCi8qIDU4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CgovKioqLyB9KSwKLyogNTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX2l0ZXJhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7Cgp2YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTsKCnZhciBfc3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7Cgp2YXIgX3N5bWJvbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zeW1ib2wpOwoKdmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgX2l0ZXJhdG9yMi5kZWZhdWx0ID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZihfaXRlcmF0b3IyLmRlZmF1bHQpID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsKfSA6IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDIuZGVmYXVsdCAmJiBvYmogIT09IF9zeW1ib2wyLmRlZmF1bHQucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOwp9OwoKLyoqKi8gfSksCi8qIDYwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfTsKCi8qKiovIH0pLAovKiA2MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mCi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzCnZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgdG9MZW5ndGggID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykKICAsIHRvSW5kZXggICA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKElTX0lOQ0xVREVTKXsKICByZXR1cm4gZnVuY3Rpb24oJHRoaXMsIGVsLCBmcm9tSW5kZXgpewogICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCgkdGhpcykKICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCkKICAgICAgLCBpbmRleCAgPSB0b0luZGV4KGZyb21JbmRleCwgbGVuZ3RoKQogICAgICAsIHZhbHVlOwogICAgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobQogICAgaWYoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpd2hpbGUobGVuZ3RoID4gaW5kZXgpewogICAgICB2YWx1ZSA9IE9baW5kZXgrK107CiAgICAgIGlmKHZhbHVlICE9IHZhbHVlKXJldHVybiB0cnVlOwogICAgLy8gQXJyYXkjdG9JbmRleCBpZ25vcmVzIGhvbGVzLCBBcnJheSNpbmNsdWRlcyAtIG5vdAogICAgfSBlbHNlIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTyl7CiAgICAgIGlmKE9baW5kZXhdID09PSBlbClyZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDsKICAgIH0gcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTsKICB9Owp9OwoKLyoqKi8gfSksCi8qIDYyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBjcmVhdGUgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpCiAgLCBkZXNjcmlwdG9yICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpCiAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpCiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9OwoKLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKCkKX193ZWJwYWNrX3JlcXVpcmVfXyg3KShJdGVyYXRvclByb3RvdHlwZSwgX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCl7CiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pOwogIHNldFRvU3RyaW5nVGFnKENvbnN0cnVjdG9yLCBOQU1FICsgJyBJdGVyYXRvcicpOwp9OwoKLyoqKi8gfSksCi8qIDYzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZG9uZSwgdmFsdWUpewogIHJldHVybiB7dmFsdWU6IHZhbHVlLCBkb25lOiAhIWRvbmV9Owp9OwoKLyoqKi8gfSksCi8qIDY0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBkUCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQogICwgZ2V0S2V5cyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKXsKICBhbk9iamVjdChPKTsKICB2YXIga2V5cyAgID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKQogICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aAogICAgLCBpID0gMAogICAgLCBQOwogIHdoaWxlKGxlbmd0aCA+IGkpZFAuZihPLCBQID0ga2V5c1tpKytdLCBQcm9wZXJ0aWVzW1BdKTsKICByZXR1cm4gTzsKfTsKCi8qKiovIH0pLAovKiA2NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCnZhciAka2V5cyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCkKICAsIGhpZGRlbktleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTsKCmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTyl7CiAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpOwp9OwoKLyoqKi8gfSksCi8qIDY2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KQogICwgZGVmaW5lZCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Ci8vIHRydWUgIC0+IFN0cmluZyNhdAovLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXQKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUT19TVFJJTkcpewogIHJldHVybiBmdW5jdGlvbih0aGF0LCBwb3MpewogICAgdmFyIHMgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSkKICAgICAgLCBpID0gdG9JbnRlZ2VyKHBvcykKICAgICAgLCBsID0gcy5sZW5ndGgKICAgICAgLCBhLCBiOwogICAgaWYoaSA8IDAgfHwgaSA+PSBsKXJldHVybiBUT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDsKICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7CiAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZgogICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYQogICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDsKICB9Owp9OwoKLyoqKi8gfSksCi8qIDY3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjdHggICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQogICwgaW52b2tlICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSkKICAsIGh0bWwgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpCiAgLCBjZWwgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MKICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGUKICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZQogICwgTWVzc2FnZUNoYW5uZWwgICAgID0gZ2xvYmFsLk1lc3NhZ2VDaGFubmVsCiAgLCBjb3VudGVyICAgICAgICAgICAgPSAwCiAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fQogICwgT05SRUFEWVNUQVRFQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZScKICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0Owp2YXIgcnVuID0gZnVuY3Rpb24oKXsKICB2YXIgaWQgPSArdGhpczsKICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpewogICAgdmFyIGZuID0gcXVldWVbaWRdOwogICAgZGVsZXRlIHF1ZXVlW2lkXTsKICAgIGZuKCk7CiAgfQp9Owp2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7CiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7Cn07Ci8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToKaWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7CiAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbil7CiAgICB2YXIgYXJncyA9IFtdLCBpID0gMTsKICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7CiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24oKXsKICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpOwogICAgfTsKICAgIGRlZmVyKGNvdW50ZXIpOwogICAgcmV0dXJuIGNvdW50ZXI7CiAgfTsKICBjbGVhclRhc2sgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCl7CiAgICBkZWxldGUgcXVldWVbaWRdOwogIH07CiAgLy8gTm9kZS5qcyAwLjgtCiAgaWYoX193ZWJwYWNrX3JlcXVpcmVfXygyMCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBwcm9jZXNzLm5leHRUaWNrKGN0eChydW4sIGlkLCAxKSk7CiAgICB9OwogIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnMKICB9IGVsc2UgaWYoTWVzc2FnZUNoYW5uZWwpewogICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDsKICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyOwogICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjsKICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpOwogIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2VycwogIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnCiAgfSBlbHNlIGlmKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyl7CiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7CiAgICB9OwogICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpOwogIC8vIElFOC0KICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0JykpewogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7CiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2VsKCdzY3JpcHQnKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgICAgICBydW4uY2FsbChpZCk7CiAgICAgIH07CiAgICB9OwogIC8vIFJlc3Qgb2xkIGJyb3dzZXJzCiAgfSBlbHNlIHsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7CiAgICB9OwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IHsKICBzZXQ6ICAgc2V0VGFzaywKICBjbGVhcjogY2xlYXJUYXNrCn07CgovKioqLyB9KSwKLyogNjggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpCiAgLCBtYXggICAgICAgPSBNYXRoLm1heAogICwgbWluICAgICAgID0gTWF0aC5taW47Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5kZXgsIGxlbmd0aCl7CiAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpOwogIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpOwp9OwoKLyoqKi8gfSksCi8qIDY5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBhZGRUb1Vuc2NvcGFibGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkKICAsIHN0ZXAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKQogICwgSXRlcmF0b3JzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpCiAgLCB0b0lPYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSkoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXsKICB0aGlzLl90ID0gdG9JT2JqZWN0KGl0ZXJhdGVkKTsgLy8gdGFyZ2V0CiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgKICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZAovLyAyMi4xLjUuMi4xICVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkKfSwgZnVuY3Rpb24oKXsKICB2YXIgTyAgICAgPSB0aGlzLl90CiAgICAsIGtpbmQgID0gdGhpcy5fawogICAgLCBpbmRleCA9IHRoaXMuX2krKzsKICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7CiAgICB0aGlzLl90ID0gdW5kZWZpbmVkOwogICAgcmV0dXJuIHN0ZXAoMSk7CiAgfQogIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgaW5kZXgpOwogIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pOwogIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTsKfSwgJ3ZhbHVlcycpOwoKLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQpJdGVyYXRvcnMuQXJndW1lbnRzID0gSXRlcmF0b3JzLkFycmF5OwoKYWRkVG9VbnNjb3BhYmxlcygna2V5cycpOwphZGRUb1Vuc2NvcGFibGVzKCd2YWx1ZXMnKTsKYWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpOwoKLyoqKi8gfSksCi8qIDcwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODEpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7Cgp2YXIgX3N0cmluZ2lmeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdHJpbmdpZnkpOwoKdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7CgpleHBvcnRzLmRpdmlkZVVSTCA9IGRpdmlkZVVSTDsKZXhwb3J0cy5kaXZpZGVFbWFpbCA9IGRpdmlkZUVtYWlsOwpleHBvcnRzLmVtcHR5T2JqZWN0ID0gZW1wdHlPYmplY3Q7CmV4cG9ydHMuZGVlcENsb25lID0gZGVlcENsb25lOwpleHBvcnRzLmdldFVzZXJVUkxGcm9tRW1haWwgPSBnZXRVc2VyVVJMRnJvbUVtYWlsOwpleHBvcnRzLmdldFVzZXJFbWFpbEZyb21VUkwgPSBnZXRVc2VyRW1haWxGcm9tVVJMOwpleHBvcnRzLmNvbnZlcnRUb1VzZXJVUkwgPSBjb252ZXJ0VG9Vc2VyVVJMOwpleHBvcnRzLmNoZWNrQXR0cmlidXRlID0gY2hlY2tBdHRyaWJ1dGU7CmV4cG9ydHMucGFyc2VBdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLwovKioNCiAqIFN1cHBvcnQgbW9kdWxlIHdpdGggc29tZSBmdW5jdGlvbnMgd2lsbCBiZSB1c2VmdWwNCiAqIEBtb2R1bGUgdXRpbHMNCiAqLwoKLyoqDQogKiBAdHlwZWRlZiBkaXZpZGVVUkwNCiAqIEB0eXBlIE9iamVjdA0KICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMDQogKiBAcHJvcGVydHkge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gb2YgVVJMDQogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTA0KICovCgovKioNCiAqIERpdmlkZSBhbiB1cmwgaW4gdHlwZSwgZG9tYWluIGFuZCBpZGVudGl0eQ0KICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MNCiAqIEByZXR1cm4ge2RpdmlkZVVSTH0gdGhlIHJlc3VsdCBvZiBkaXZpZGVVUkwNCiAqLwpmdW5jdGlvbiBkaXZpZGVVUkwodXJsKSB7CgogIGlmICghdXJsKSB0aHJvdyBFcnJvcignVVJMIGlzIG5lZWRlZCB0byBzcGxpdCcpOwoKICBmdW5jdGlvbiByZWN1cnNlKHZhbHVlKSB7CiAgICB2YXIgcmVnZXggPSAvKFthLXpBLVotXSopKDpcL1wvKD86XC4pP3w6KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1dezIsMjU2fSkoWy1hLXpBLVowLTlAOiUuX1wrfiM9XC9dKikvZ2k7CiAgICB2YXIgc3Vic3QgPSAnJDEsJDMsJDQnOwogICAgdmFyIHBhcnRzID0gdmFsdWUucmVwbGFjZShyZWdleCwgc3Vic3QpLnNwbGl0KCcsJyk7CiAgICByZXR1cm4gcGFydHM7CiAgfQoKICB2YXIgcGFydHMgPSByZWN1cnNlKHVybCk7CgogIC8vIElmIHRoZSB1cmwgaGFzIG5vIHNjaGVtZQogIGlmIChwYXJ0c1swXSA9PT0gdXJsICYmICFwYXJ0c1swXS5pbmNsdWRlcygnQCcpKSB7CgogICAgdmFyIF9yZXN1bHQgPSB7CiAgICAgIHR5cGU6ICIiLAogICAgICBkb21haW46IHVybCwKICAgICAgaWRlbnRpdHk6ICIiCiAgICB9OwoKICAgIGNvbnNvbGUuZXJyb3IoJ1tEaXZpZGVVUkxdIERpdmlkZVVSTCBkb25cJ3Qgc3VwcG9ydCB1cmwgd2l0aG91dCBzY2hlbWUuIFBsZWFzZSByZXZpZXcgeW91ciB1cmwgYWRkcmVzcycsIHVybCk7CgogICAgcmV0dXJuIF9yZXN1bHQ7CiAgfQoKICAvLyBjaGVjayBpZiB0aGUgdXJsIGhhcyB0aGUgc2NoZW1lIGFuZCBpbmNsdWRlcyBhbiBACiAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgcGFydHNbMF0uaW5jbHVkZXMoJ0AnKSkgewogICAgdmFyIHNjaGVtZSA9IHBhcnRzWzBdID09PSB1cmwgPyAnc210cCcgOiBwYXJ0c1swXTsKICAgIHBhcnRzID0gcmVjdXJzZShzY2hlbWUgKyAnOi8vJyArIHBhcnRzWzBdKTsKICB9CgogIC8vIGlmIHRoZSBkb21haW4gaW5jbHVkZXMgYW4gQCwgZGl2aWRlIGl0IHRvIGRvbWFpbiBhbmQgaWRlbnRpdHkgcmVzcGVjdGl2ZWx5CiAgaWYgKHBhcnRzWzFdLmluY2x1ZGVzKCdAJykpIHsKICAgIHBhcnRzWzJdID0gcGFydHNbMF0gKyAnOi8vJyArIHBhcnRzWzFdOwogICAgcGFydHNbMV0gPSBwYXJ0c1sxXS5zdWJzdHIocGFydHNbMV0uaW5kZXhPZignQCcpICsgMSk7CiAgfSAvKmVsc2UgaWYgKHBhcnRzWzJdLmluY2x1ZGVzKCcvJykpIHsNCiAgICBwYXJ0c1syXSA9IHBhcnRzWzJdLnN1YnN0cihwYXJ0c1syXS5sYXN0SW5kZXhPZignLycpKzEpOw0KICAgIH0qLwoKICB2YXIgcmVzdWx0ID0gewogICAgdHlwZTogcGFydHNbMF0sCiAgICBkb21haW46IHBhcnRzWzFdLAogICAgaWRlbnRpdHk6IHBhcnRzWzJdCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKZnVuY3Rpb24gZGl2aWRlRW1haWwoZW1haWwpIHsKICB2YXIgaW5kZXhPZkF0ID0gZW1haWwuaW5kZXhPZignQCcpOwoKICB2YXIgcmVzdWx0ID0gewogICAgdXNlcm5hbWU6IGVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpLAogICAgZG9tYWluOiBlbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgZW1haWwubGVuZ3RoKQogIH07CgogIHJldHVybiByZXN1bHQ7Cn0KCi8qKg0KICogQ2hlY2sgaWYgYW4gT2JqZWN0IGlzIGVtcHR5DQogKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdCBPYmplY3QgdG8gYmUgY2hlY2tlZA0KICogQHJldHVybiB7Qm9vbGVhbn0gICAgICAgc3RhdHVzIG9mIE9iamVjdCwgZW1wdHkgb3Igbm90ICh0cnVlfGZhbHNlKTsNCiAqLwpmdW5jdGlvbiBlbXB0eU9iamVjdChvYmplY3QpIHsKICByZXR1cm4gKDAsIF9rZXlzMi5kZWZhdWx0KShvYmplY3QpLmxlbmd0aCA+IDAgPyBmYWxzZSA6IHRydWU7Cn0KCi8qKg0KICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGENCiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiAtIG9iamVjdCB0byBiZSBjbG9uZWQNCiAqIEByZXR1cm4ge09iamVjdH0NCiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShvYmopKTsKfQoKLyoqDQogKiBPYnRhaW5zIHRoZSB1c2VyIFVSTCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gZW1haWwNCiAqIEBwYXJhbSAge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsDQogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTA0KICovCmZ1bmN0aW9uIGdldFVzZXJVUkxGcm9tRW1haWwodXNlckVtYWlsKSB7CiAgdmFyIGluZGV4T2ZBdCA9IHVzZXJFbWFpbC5pbmRleE9mKCdAJyk7CiAgcmV0dXJuICd1c2VyOi8vJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoaW5kZXhPZkF0ICsgMSwgdXNlckVtYWlsLmxlbmd0aCkgKyAnLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCk7Cn0KCi8qKg0KICogT2J0YWlucyB0aGUgdXNlciBlbWFpbCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEgZ2l2ZW4gVVJMDQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTA0KICogQHJldHVybiB7c3RyaW5nfSB1c2VyRW1haWwgVGhlIHVzZXIgZW1haWwNCiAqLwpmdW5jdGlvbiBnZXRVc2VyRW1haWxGcm9tVVJMKHVzZXJVUkwpIHsKICB2YXIgdXJsID0gZGl2aWRlVVJMKHVzZXJVUkwpOwogIHJldHVybiB1cmwuaWRlbnRpdHkucmVwbGFjZSgnLycsICcnKSArICdAJyArIHVybC5kb21haW47IC8vIGlkZW50aXR5IGZpZWxkIGhhcyAnL2V4YW1wbGVJRCcgaW5zdGVhZCBvZiAnZXhhbXBsZUlEJwp9CgovKioNCiAqIENoZWNrIGlmIHRoZSB1c2VyIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgVVJMIGZvcm1hdCwgaWYgbm90LCBjb252ZXJ0IHRvIFVSTCBmb3JtYXQNCiAqIEBwYXJhbSAge3N0cmluZ30gICBpZGVudGlmaWVyICB1c2VyIGlkZW50aWZpZXINCiAqIEByZXR1cm4ge3N0cmluZ30gICB1c2VyVVJMICAgIHRoZSB1c2VyIFVSTA0KICovCmZ1bmN0aW9uIGNvbnZlcnRUb1VzZXJVUkwoaWRlbnRpZmllcikgewoKICAvLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0CiAgaWYgKGlkZW50aWZpZXIuc3Vic3RyaW5nKDAsIDcpID09PSAndXNlcjovLycpIHsKICAgIHZhciBkaXZpZGVkVVJMID0gZGl2aWRlVVJMKGlkZW50aWZpZXIpOwoKICAgIC8vY2hlY2sgaWYgdGhlIHVybCBpcyB3ZWxsIGZvcm1hdGVkCiAgICBpZiAoZGl2aWRlZFVSTC5kb21haW4gJiYgZGl2aWRlZFVSTC5pZGVudGl0eSkgewogICAgICByZXR1cm4gaWRlbnRpZmllcjsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93ICd1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0JzsKICAgIH0KCiAgICAvL2lmIG5vdCwgY29udmVydCB0aGUgdXNlciBlbWFpbCB0byBVUkwgZm9ybWF0CiAgfSBlbHNlIHsKICAgIHJldHVybiBnZXRVc2VyVVJMRnJvbUVtYWlsKGlkZW50aWZpZXIpOwogIH0KfQoKZnVuY3Rpb24gY2hlY2tBdHRyaWJ1dGUocGF0aCkgewoKICB2YXIgcmVnZXggPSAvKCgoW2EtekEtWl0rKTpcL1wvKFswLTlhLXpBLVpdWy1cd10qWzAtOWEtekEtWl1cLikrW2EtekEtWl17Miw5fSlcL1thLXpBLVowLTlcLl0rQFthLXpBLVowLTldKyhcLSk/W2EtekEtWjAtOV0rKFwuKT9bYS16QS1aMC05XXsyLDEwfT9cLlthLXpBLVpdezIsMTB9KSguKyg/PS5pZGVudGl0eSkpPy9nbTsKCiAgdmFyIGxpc3QgPSBbXTsKICB2YXIgZmluYWwgPSBbXTsKICB2YXIgdGVzdCA9IHBhdGgubWF0Y2gocmVnZXgpOwoKICBpZiAodGVzdCA9PSBudWxsKSB7CiAgICBmaW5hbCA9IHBhdGguc3BsaXQoJy4nKTsKICB9IGVsc2UgewogICAgdmFyIG0gPSB2b2lkIDA7CiAgICB3aGlsZSAoKG0gPSByZWdleC5leGVjKHBhdGgpKSAhPT0gbnVsbCkgewogICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBhdm9pZCBpbmZpbml0ZSBsb29wcyB3aXRoIHplcm8td2lkdGggbWF0Y2hlcwogICAgICBpZiAobS5pbmRleCA9PT0gcmVnZXgubGFzdEluZGV4KSB7CiAgICAgICAgcmVnZXgubGFzdEluZGV4Kys7CiAgICAgIH0KCiAgICAgIC8vIFRoZSByZXN1bHQgY2FuIGJlIGFjY2Vzc2VkIHRocm91Z2ggdGhlIGBtYC12YXJpYWJsZS4KICAgICAgbS5mb3JFYWNoKGZ1bmN0aW9uIChtYXRjaCwgZ3JvdXBJbmRleCkgewogICAgICAgIGlmIChncm91cEluZGV4ID09PSAwKSB7CiAgICAgICAgICBsaXN0LnB1c2gobWF0Y2gpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICB2YXIgcmVzdWx0ID0gdm9pZCAwOwogICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgcmVzdWx0ID0gcGF0aC5yZXBsYWNlKHVybCwgJyorKicpOwoKICAgICAgZmluYWwgPSByZXN1bHQuc3BsaXQoJy4nKS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbSA9PT0gJyorKicpIHsKICAgICAgICAgIHJldHVybiB1cmw7CiAgICAgICAgfQogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9KTsKICAgIH0pOwogIH0KCiAgY29uc29sZS5sb2coJ1tTZXJ2aWNlRnJhbWV3b3JrLlV0aWxzLmNoZWNrQXR0cmlidXRlXScsIGZpbmFsKTsKICByZXR1cm4gZmluYWw7Cn0KCmZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlcyhwYXRoKSB7CiAgdmFyIHJlZ2V4ID0gLyhbMC05YS16QS1aXVstXHddKik6XC9cLy9nOwoKICB2YXIgc3RyaW5nMyA9ICdpZGVudGl0eSc7CgogIGlmICghcGF0aC5pbmNsdWRlcygnOi8vJykpIHsKICAgIHJldHVybiBwYXRoLnNwbGl0KCcuJyk7CiAgfSBlbHNlIHsKICAgIHZhciBzdHJpbmcxID0gcGF0aC5zcGxpdChyZWdleClbMF07CgogICAgdmFyIGFycmF5MSA9IHN0cmluZzEuc3BsaXQoJy4nKTsKCiAgICB2YXIgc3RyaW5nMiA9IHBhdGgucmVwbGFjZShzdHJpbmcxLCAnJyk7CgogICAgaWYgKHBhdGguaW5jbHVkZXMoc3RyaW5nMykpIHsKCiAgICAgIHZhciBhcnJheTIgPSBzdHJpbmcyLnNwbGl0KHN0cmluZzMgKyAnLicpOwoKICAgICAgY29uc29sZS5sb2coJ2FycmF5MiAnICsgYXJyYXkyKTsKCiAgICAgIHN0cmluZzIgPSBhcnJheTJbMF0uc2xpY2UoJy4nLCAtMSk7CgogICAgICBhcnJheTIgPSBhcnJheTJbMV0uc3BsaXQoJy4nKTsKCiAgICAgIGFycmF5MS5wdXNoKHN0cmluZzIsIHN0cmluZzMpOwoKICAgICAgYXJyYXkxID0gYXJyYXkxLmNvbmNhdChhcnJheTIpOwogICAgfSBlbHNlIHsKICAgICAgYXJyYXkxLnB1c2goc3RyaW5nMik7CiAgICB9CgogICAgcmV0dXJuIGFycmF5MS5maWx0ZXIoQm9vbGVhbik7CiAgfQp9CgovKioqLyB9KSwKLyogNzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA3MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgTUVUQSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSgnbWV0YScpCiAgLCBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNikKICAsIGhhcyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIHNldERlc2MgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mCiAgLCBpZCAgICAgICA9IDA7CnZhciBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGZ1bmN0aW9uKCl7CiAgcmV0dXJuIHRydWU7Cn07CnZhciBGUkVFWkUgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsKICByZXR1cm4gaXNFeHRlbnNpYmxlKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpOwp9KTsKdmFyIHNldE1ldGEgPSBmdW5jdGlvbihpdCl7CiAgc2V0RGVzYyhpdCwgTUVUQSwge3ZhbHVlOiB7CiAgICBpOiAnTycgKyArK2lkLCAvLyBvYmplY3QgSUQKICAgIHc6IHt9ICAgICAgICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgSURzCiAgfX0pOwp9Owp2YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpewogIC8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXgKICBpZighaXNPYmplY3QoaXQpKXJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7CiAgaWYoIWhhcyhpdCwgTUVUQSkpewogICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiAnRic7CiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQogICAgaWYoIWNyZWF0ZSlyZXR1cm4gJ0UnOwogICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKICAgIHNldE1ldGEoaXQpOwogIC8vIHJldHVybiBvYmplY3QgSUQKICB9IHJldHVybiBpdFtNRVRBXS5pOwp9Owp2YXIgZ2V0V2VhayA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpewogIGlmKCFoYXMoaXQsIE1FVEEpKXsKICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gdHJ1ZTsKICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCiAgICBpZighY3JlYXRlKXJldHVybiBmYWxzZTsKICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCiAgICBzZXRNZXRhKGl0KTsKICAvLyByZXR1cm4gaGFzaCB3ZWFrIGNvbGxlY3Rpb25zIElEcwogIH0gcmV0dXJuIGl0W01FVEFdLnc7Cn07Ci8vIGFkZCBtZXRhZGF0YSBvbiBmcmVlemUtZmFtaWx5IG1ldGhvZHMgY2FsbGluZwp2YXIgb25GcmVlemUgPSBmdW5jdGlvbihpdCl7CiAgaWYoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKXNldE1ldGEoaXQpOwogIHJldHVybiBpdDsKfTsKdmFyIG1ldGEgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICBLRVk6ICAgICAgTUVUQSwKICBORUVEOiAgICAgZmFsc2UsCiAgZmFzdEtleTogIGZhc3RLZXksCiAgZ2V0V2VhazogIGdldFdlYWssCiAgb25GcmVlemU6IG9uRnJlZXplCn07CgovKioqLyB9KSwKLyogNzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGNsYXNzb2YgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpCiAgLCBJVEVSQVRPUiAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCdpdGVyYXRvcicpCiAgLCBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpewogIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdCiAgICB8fCBpdFsnQEBpdGVyYXRvciddCiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldOwp9OwoKLyoqKi8gfSksCi8qIDc1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNzkpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MiksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA3NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDc4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODUpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpOwp2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZShQLCBEKXsKICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7Cn07CgovKioqLyB9KSwKLyogODAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpOwptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmdldFByb3RvdHlwZU9mOwoKLyoqKi8gfSksCi8qIDgxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTAzKTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5rZXlzOwoKLyoqKi8gfSksCi8qIDgyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTA0KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5zZXRQcm90b3R5cGVPZjsKCi8qKiovIH0pLAovKiA4MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7Cl9fd2VicGFja19yZXF1aXJlX18oNTEpOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5Qcm9taXNlOwoKLyoqKi8gfSksCi8qIDg0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTA2KTsKX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7Cl9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpOwptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuU3ltYm9sOwoKLyoqKi8gfSksCi8qIDg1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNTApOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KS5mKCdpdGVyYXRvcicpOwoKLyoqKi8gfSksCi8qIDg2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCl7CiAgaWYoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSB8fCAoZm9yYmlkZGVuRmllbGQgIT09IHVuZGVmaW5lZCAmJiBmb3JiaWRkZW5GaWVsZCBpbiBpdCkpewogICAgdGhyb3cgVHlwZUVycm9yKG5hbWUgKyAnOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEnKTsKICB9IHJldHVybiBpdDsKfTsKCi8qKiovIH0pLAovKiA4NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwp2YXIgZ2V0S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpCiAgLCBnT1BTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkKICAsIHBJRSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgdmFyIHJlc3VsdCAgICAgPSBnZXRLZXlzKGl0KQogICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mOwogIGlmKGdldFN5bWJvbHMpewogICAgdmFyIHN5bWJvbHMgPSBnZXRTeW1ib2xzKGl0KQogICAgICAsIGlzRW51bSAgPSBwSUUuZgogICAgICAsIGkgICAgICAgPSAwCiAgICAgICwga2V5OwogICAgd2hpbGUoc3ltYm9scy5sZW5ndGggPiBpKWlmKGlzRW51bS5jYWxsKGl0LCBrZXkgPSBzeW1ib2xzW2krK10pKXJlc3VsdC5wdXNoKGtleSk7CiAgfSByZXR1cm4gcmVzdWx0Owp9OwoKLyoqKi8gfSksCi8qIDg4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjdHggICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpCiAgLCBjYWxsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpCiAgLCBpc0FycmF5SXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oOTApCiAgLCBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIHRvTGVuZ3RoICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykKICAsIGdldEl0ZXJGbiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCkKICAsIEJSRUFLICAgICAgID0ge30KICAsIFJFVFVSTiAgICAgID0ge307CnZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYWJsZSwgZW50cmllcywgZm4sIHRoYXQsIElURVJBVE9SKXsKICB2YXIgaXRlckZuID0gSVRFUkFUT1IgPyBmdW5jdGlvbigpeyByZXR1cm4gaXRlcmFibGU7IH0gOiBnZXRJdGVyRm4oaXRlcmFibGUpCiAgICAsIGYgICAgICA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKQogICAgLCBpbmRleCAgPSAwCiAgICAsIGxlbmd0aCwgc3RlcCwgaXRlcmF0b3IsIHJlc3VsdDsKICBpZih0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ZXJhYmxlICsgJyBpcyBub3QgaXRlcmFibGUhJyk7CiAgLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yCiAgaWYoaXNBcnJheUl0ZXIoaXRlckZuKSlmb3IobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspewogICAgcmVzdWx0ID0gZW50cmllcyA/IGYoYW5PYmplY3Qoc3RlcCA9IGl0ZXJhYmxlW2luZGV4XSlbMF0sIHN0ZXBbMV0pIDogZihpdGVyYWJsZVtpbmRleF0pOwogICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0OwogIH0gZWxzZSBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgKXsKICAgIHJlc3VsdCA9IGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpOwogICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0OwogIH0KfTsKZXhwb3J0cy5CUkVBSyAgPSBCUkVBSzsKZXhwb3J0cy5SRVRVUk4gPSBSRVRVUk47CgovKioqLyB9KSwKLyogODkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIGFyZ3MsIHRoYXQpewogIHZhciB1biA9IHRoYXQgPT09IHVuZGVmaW5lZDsKICBzd2l0Y2goYXJncy5sZW5ndGgpewogICAgY2FzZSAwOiByZXR1cm4gdW4gPyBmbigpCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCk7CiAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSk7CiAgICBjYXNlIDI6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7CiAgICBjYXNlIDM6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7CiAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7CiAgfSByZXR1cm4gICAgICAgICAgICAgIGZuLmFwcGx5KHRoYXQsIGFyZ3MpOwp9OwoKLyoqKi8gfSksCi8qIDkwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3IKdmFyIEl0ZXJhdG9ycyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQogICwgSVRFUkFUT1IgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJykKICAsIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpOwp9OwoKLyoqKi8gfSksCi8qIDkxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKXsKICByZXR1cm4gY29mKGFyZykgPT0gJ0FycmF5JzsKfTsKCi8qKiovIH0pLAovKiA5MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yCnZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmF0b3IsIGZuLCB2YWx1ZSwgZW50cmllcyl7CiAgdHJ5IHsKICAgIHJldHVybiBlbnRyaWVzID8gZm4oYW5PYmplY3QodmFsdWUpWzBdLCB2YWx1ZVsxXSkgOiBmbih2YWx1ZSk7CiAgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbikKICB9IGNhdGNoKGUpewogICAgdmFyIHJldCA9IGl0ZXJhdG9yWydyZXR1cm4nXTsKICAgIGlmKHJldCAhPT0gdW5kZWZpbmVkKWFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7CiAgICB0aHJvdyBlOwogIH0KfTsKCi8qKiovIH0pLAovKiA5MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgSVRFUkFUT1IgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnaXRlcmF0b3InKQogICwgU0FGRV9DTE9TSU5HID0gZmFsc2U7Cgp0cnkgewogIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTsKICByaXRlclsncmV0dXJuJ10gPSBmdW5jdGlvbigpeyBTQUZFX0NMT1NJTkcgPSB0cnVlOyB9OwogIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pOwp9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXsKICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7CiAgdmFyIHNhZmUgPSBmYWxzZTsKICB0cnkgewogICAgdmFyIGFyciAgPSBbN10KICAgICAgLCBpdGVyID0gYXJyW0lURVJBVE9SXSgpOwogICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07CiAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07CiAgICBleGVjKGFycik7CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQogIHJldHVybiBzYWZlOwp9OwoKLyoqKi8gfSksCi8qIDk0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBnZXRLZXlzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQogICwgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBlbCl7CiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpCiAgICAsIGtleXMgICA9IGdldEtleXMoTykKICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgKICAgICwgaW5kZXggID0gMAogICAgLCBrZXk7CiAgd2hpbGUobGVuZ3RoID4gaW5kZXgpaWYoT1trZXkgPSBrZXlzW2luZGV4KytdXSA9PT0gZWwpcmV0dXJuIGtleTsKfTsKCi8qKiovIH0pLAovKiA5NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2xvYmFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgbWFjcm90YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0CiAgLCBPYnNlcnZlciAgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcgogICwgcHJvY2VzcyAgID0gZ2xvYmFsLnByb2Nlc3MKICAsIFByb21pc2UgICA9IGdsb2JhbC5Qcm9taXNlCiAgLCBpc05vZGUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7CiAgdmFyIGhlYWQsIGxhc3QsIG5vdGlmeTsKCiAgdmFyIGZsdXNoID0gZnVuY3Rpb24oKXsKICAgIHZhciBwYXJlbnQsIGZuOwogICAgaWYoaXNOb2RlICYmIChwYXJlbnQgPSBwcm9jZXNzLmRvbWFpbikpcGFyZW50LmV4aXQoKTsKICAgIHdoaWxlKGhlYWQpewogICAgICBmbiAgID0gaGVhZC5mbjsKICAgICAgaGVhZCA9IGhlYWQubmV4dDsKICAgICAgdHJ5IHsKICAgICAgICBmbigpOwogICAgICB9IGNhdGNoKGUpewogICAgICAgIGlmKGhlYWQpbm90aWZ5KCk7CiAgICAgICAgZWxzZSBsYXN0ID0gdW5kZWZpbmVkOwogICAgICAgIHRocm93IGU7CiAgICAgIH0KICAgIH0gbGFzdCA9IHVuZGVmaW5lZDsKICAgIGlmKHBhcmVudClwYXJlbnQuZW50ZXIoKTsKICB9OwoKICAvLyBOb2RlLmpzCiAgaWYoaXNOb2RlKXsKICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7CiAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOwogICAgfTsKICAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXIKICB9IGVsc2UgaWYoT2JzZXJ2ZXIpewogICAgdmFyIHRvZ2dsZSA9IHRydWUKICAgICAgLCBub2RlICAgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7CiAgICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7CiAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9ICF0b2dnbGU7CiAgICB9OwogIC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlCiAgfSBlbHNlIGlmKFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKXsKICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICBwcm9taXNlLnRoZW4oZmx1c2gpOwogICAgfTsKICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOgogIC8vIC0gc2V0SW1tZWRpYXRlCiAgLy8gLSBNZXNzYWdlQ2hhbm5lbAogIC8vIC0gd2luZG93LnBvc3RNZXNzYWcKICAvLyAtIG9ucmVhZHlzdGF0ZWNoYW5nZQogIC8vIC0gc2V0VGltZW91dAogIH0gZWxzZSB7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpCiAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpOwogICAgfTsKICB9CgogIHJldHVybiBmdW5jdGlvbihmbil7CiAgICB2YXIgdGFzayA9IHtmbjogZm4sIG5leHQ6IHVuZGVmaW5lZH07CiAgICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7CiAgICBpZighaGVhZCl7CiAgICAgIGhlYWQgPSB0YXNrOwogICAgICBub3RpZnkoKTsKICAgIH0gbGFzdCA9IHRhc2s7CiAgfTsKfTsKCi8qKiovIH0pLAovKiA5NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93CnZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgZ09QTiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZgogICwgdG9TdHJpbmcgID0ge30udG9TdHJpbmc7Cgp2YXIgd2luZG93TmFtZXMgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcwogID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdOwoKdmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24oaXQpewogIHRyeSB7CiAgICByZXR1cm4gZ09QTihpdCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpOwogIH0KfTsKCm1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXsKICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpOwp9OwoKCi8qKiovIH0pLAovKiA5NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaGlkZSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMsIHNhZmUpewogIGZvcih2YXIga2V5IGluIHNyYyl7CiAgICBpZihzYWZlICYmIHRhcmdldFtrZXldKXRhcmdldFtrZXldID0gc3JjW2tleV07CiAgICBlbHNlIGhpZGUodGFyZ2V0LCBrZXksIHNyY1trZXldKTsKICB9IHJldHVybiB0YXJnZXQ7Cn07CgovKioqLyB9KSwKLyogOTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNikKICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKdmFyIGNoZWNrID0gZnVuY3Rpb24oTywgcHJvdG8pewogIGFuT2JqZWN0KE8pOwogIGlmKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpdGhyb3cgVHlwZUVycm9yKHByb3RvICsgIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKTsKfTsKbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2V0OiBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7CiAgICAgIHRyeSB7CiAgICAgICAgc2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoRnVuY3Rpb24uY2FsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyg1NykuZihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0LCAyKTsKICAgICAgICBzZXQodGVzdCwgW10pOwogICAgICAgIGJ1Z2d5ID0gISh0ZXN0IGluc3RhbmNlb2YgQXJyYXkpOwogICAgICB9IGNhdGNoKGUpeyBidWdneSA9IHRydWU7IH0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKXsKICAgICAgICBjaGVjayhPLCBwcm90byk7CiAgICAgICAgaWYoYnVnZ3kpTy5fX3Byb3RvX18gPSBwcm90bzsKICAgICAgICBlbHNlIHNldChPLCBwcm90byk7CiAgICAgICAgcmV0dXJuIE87CiAgICAgIH07CiAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLAogIGNoZWNrOiBjaGVjawp9OwoKLyoqKi8gfSksCi8qIDk5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBnbG9iYWwgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQogICwgZFAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCiAgLCBERVNDUklQVE9SUyA9IF9fd2VicGFja19yZXF1aXJlX18oMikKICAsIFNQRUNJRVMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnc3BlY2llcycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVkpewogIHZhciBDID0gdHlwZW9mIGNvcmVbS0VZXSA9PSAnZnVuY3Rpb24nID8gY29yZVtLRVldIDogZ2xvYmFsW0tFWV07CiAgaWYoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSlkUC5mKEMsIFNQRUNJRVMsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0KICB9KTsKfTsKCi8qKiovIH0pLAovKiAxMDAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gNy4zLjIwIFNwZWNpZXNDb25zdHJ1Y3RvcihPLCBkZWZhdWx0Q29uc3RydWN0b3IpCnZhciBhbk9iamVjdCAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KQogICwgU1BFQ0lFUyAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnc3BlY2llcycpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKE8sIEQpewogIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3IsIFM7CiAgcmV0dXJuIEMgPT09IHVuZGVmaW5lZCB8fCAoUyA9IGFuT2JqZWN0KEMpW1NQRUNJRVNdKSA9PSB1bmRlZmluZWQgPyBEIDogYUZ1bmN0aW9uKFMpOwp9OwoKLyoqKi8gfSksCi8qIDEwMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOSkKLy8gMTkuMS4yLjIgLyAxNS4yLjMuNSBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge2NyZWF0ZTogX193ZWJwYWNrX3JlcXVpcmVfXygzNyl9KTsKCi8qKiovIH0pLAovKiAxMDIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjkgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pCnZhciB0b09iamVjdCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQogICwgJGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0UHJvdG90eXBlT2YnLCBmdW5jdGlvbigpewogIHJldHVybiBmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihpdCl7CiAgICByZXR1cm4gJGdldFByb3RvdHlwZU9mKHRvT2JqZWN0KGl0KSk7CiAgfTsKfSk7CgovKioqLyB9KSwKLyogMTAzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKQp2YXIgdG9PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKQogICwgJGtleXMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCl9fd2VicGFja19yZXF1aXJlX18oNDUpKCdrZXlzJywgZnVuY3Rpb24oKXsKICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7CiAgICByZXR1cm4gJGtleXModG9PYmplY3QoaXQpKTsKICB9Owp9KTsKCi8qKiovIH0pLAovKiAxMDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4zLjE5IE9iamVjdC5zZXRQcm90b3R5cGVPZihPLCBwcm90bykKdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwokZXhwb3J0KCRleHBvcnQuUywgJ09iamVjdCcsIHtzZXRQcm90b3R5cGVPZjogX193ZWJwYWNrX3JlcXVpcmVfXyg5OCkuc2V0fSk7CgovKioqLyB9KSwKLyogMTA1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBMSUJSQVJZICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgY3R4ICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKICAsIGNsYXNzb2YgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpCiAgLCAkZXhwb3J0ICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpCiAgLCBpc09iamVjdCAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpCiAgLCBhRnVuY3Rpb24gICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KQogICwgYW5JbnN0YW5jZSAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NikKICAsIGZvck9mICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpCiAgLCBzcGVjaWVzQ29uc3RydWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCkKICAsIHRhc2sgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpLnNldAogICwgbWljcm90YXNrICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSkoKQogICwgUFJPTUlTRSAgICAgICAgICAgID0gJ1Byb21pc2UnCiAgLCBUeXBlRXJyb3IgICAgICAgICAgPSBnbG9iYWwuVHlwZUVycm9yCiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2VzcwogICwgJFByb21pc2UgICAgICAgICAgID0gZ2xvYmFsW1BST01JU0VdCiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2VzcwogICwgaXNOb2RlICAgICAgICAgICAgID0gY2xhc3NvZihwcm9jZXNzKSA9PSAncHJvY2VzcycKICAsIGVtcHR5ICAgICAgICAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH0KICAsIEludGVybmFsLCBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHksIFdyYXBwZXI7Cgp2YXIgVVNFX05BVElWRSA9ICEhZnVuY3Rpb24oKXsKICB0cnkgewogICAgLy8gY29ycmVjdCBzdWJjbGFzc2luZyB3aXRoIEBAc3BlY2llcyBzdXBwb3J0CiAgICB2YXIgcHJvbWlzZSAgICAgPSAkUHJvbWlzZS5yZXNvbHZlKDEpCiAgICAgICwgRmFrZVByb21pc2UgPSAocHJvbWlzZS5jb25zdHJ1Y3RvciA9IHt9KVtfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCdzcGVjaWVzJyldID0gZnVuY3Rpb24oZXhlYyl7IGV4ZWMoZW1wdHksIGVtcHR5KTsgfTsKICAgIC8vIHVuaGFuZGxlZCByZWplY3Rpb25zIHRyYWNraW5nIHN1cHBvcnQsIE5vZGVKUyBQcm9taXNlIHdpdGhvdXQgaXQgZmFpbHMgQEBzcGVjaWVzIHRlc3QKICAgIHJldHVybiAoaXNOb2RlIHx8IHR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQgPT0gJ2Z1bmN0aW9uJykgJiYgcHJvbWlzZS50aGVuKGVtcHR5KSBpbnN0YW5jZW9mIEZha2VQcm9taXNlOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KfSgpOwoKLy8gaGVscGVycwp2YXIgc2FtZUNvbnN0cnVjdG9yID0gZnVuY3Rpb24oYSwgYil7CiAgLy8gd2l0aCBsaWJyYXJ5IHdyYXBwZXIgc3BlY2lhbCBjYXNlCiAgcmV0dXJuIGEgPT09IGIgfHwgYSA9PT0gJFByb21pc2UgJiYgYiA9PT0gV3JhcHBlcjsKfTsKdmFyIGlzVGhlbmFibGUgPSBmdW5jdGlvbihpdCl7CiAgdmFyIHRoZW47CiAgcmV0dXJuIGlzT2JqZWN0KGl0KSAmJiB0eXBlb2YgKHRoZW4gPSBpdC50aGVuKSA9PSAnZnVuY3Rpb24nID8gdGhlbiA6IGZhbHNlOwp9Owp2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsKICByZXR1cm4gc2FtZUNvbnN0cnVjdG9yKCRQcm9taXNlLCBDKQogICAgPyBuZXcgUHJvbWlzZUNhcGFiaWxpdHkoQykKICAgIDogbmV3IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eShDKTsKfTsKdmFyIFByb21pc2VDYXBhYmlsaXR5ID0gR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7CiAgdmFyIHJlc29sdmUsIHJlamVjdDsKICB0aGlzLnByb21pc2UgPSBuZXcgQyhmdW5jdGlvbigkJHJlc29sdmUsICQkcmVqZWN0KXsKICAgIGlmKHJlc29sdmUgIT09IHVuZGVmaW5lZCB8fCByZWplY3QgIT09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoJ0JhZCBQcm9taXNlIGNvbnN0cnVjdG9yJyk7CiAgICByZXNvbHZlID0gJCRyZXNvbHZlOwogICAgcmVqZWN0ICA9ICQkcmVqZWN0OwogIH0pOwogIHRoaXMucmVzb2x2ZSA9IGFGdW5jdGlvbihyZXNvbHZlKTsKICB0aGlzLnJlamVjdCAgPSBhRnVuY3Rpb24ocmVqZWN0KTsKfTsKdmFyIHBlcmZvcm0gPSBmdW5jdGlvbihleGVjKXsKICB0cnkgewogICAgZXhlYygpOwogIH0gY2F0Y2goZSl7CiAgICByZXR1cm4ge2Vycm9yOiBlfTsKICB9Cn07CnZhciBub3RpZnkgPSBmdW5jdGlvbihwcm9taXNlLCBpc1JlamVjdCl7CiAgaWYocHJvbWlzZS5fbilyZXR1cm47CiAgcHJvbWlzZS5fbiA9IHRydWU7CiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYzsKICBtaWNyb3Rhc2soZnVuY3Rpb24oKXsKICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YKICAgICAgLCBvayAgICA9IHByb21pc2UuX3MgPT0gMQogICAgICAsIGkgICAgID0gMDsKICAgIHZhciBydW4gPSBmdW5jdGlvbihyZWFjdGlvbil7CiAgICAgIHZhciBoYW5kbGVyID0gb2sgPyByZWFjdGlvbi5vayA6IHJlYWN0aW9uLmZhaWwKICAgICAgICAsIHJlc29sdmUgPSByZWFjdGlvbi5yZXNvbHZlCiAgICAgICAgLCByZWplY3QgID0gcmVhY3Rpb24ucmVqZWN0CiAgICAgICAgLCBkb21haW4gID0gcmVhY3Rpb24uZG9tYWluCiAgICAgICAgLCByZXN1bHQsIHRoZW47CiAgICAgIHRyeSB7CiAgICAgICAgaWYoaGFuZGxlcil7CiAgICAgICAgICBpZighb2spewogICAgICAgICAgICBpZihwcm9taXNlLl9oID09IDIpb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSk7CiAgICAgICAgICAgIHByb21pc2UuX2ggPSAxOwogICAgICAgICAgfQogICAgICAgICAgaWYoaGFuZGxlciA9PT0gdHJ1ZSlyZXN1bHQgPSB2YWx1ZTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmVudGVyKCk7CiAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpOwogICAgICAgICAgICBpZihkb21haW4pZG9tYWluLmV4aXQoKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSl7CiAgICAgICAgICAgIHJlamVjdChUeXBlRXJyb3IoJ1Byb21pc2UtY2hhaW4gY3ljbGUnKSk7CiAgICAgICAgICB9IGVsc2UgaWYodGhlbiA9IGlzVGhlbmFibGUocmVzdWx0KSl7CiAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7CiAgICAgICAgICB9IGVsc2UgcmVzb2x2ZShyZXN1bHQpOwogICAgICAgIH0gZWxzZSByZWplY3QodmFsdWUpOwogICAgICB9IGNhdGNoKGUpewogICAgICAgIHJlamVjdChlKTsKICAgICAgfQogICAgfTsKICAgIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpcnVuKGNoYWluW2krK10pOyAvLyB2YXJpYWJsZSBsZW5ndGggLSBjYW4ndCB1c2UgZm9yRWFjaAogICAgcHJvbWlzZS5fYyA9IFtdOwogICAgcHJvbWlzZS5fbiA9IGZhbHNlOwogICAgaWYoaXNSZWplY3QgJiYgIXByb21pc2UuX2gpb25VbmhhbmRsZWQocHJvbWlzZSk7CiAgfSk7Cn07CnZhciBvblVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2UpewogIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7CiAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92CiAgICAgICwgYWJydXB0LCBoYW5kbGVyLCBjb25zb2xlOwogICAgaWYoaXNVbmhhbmRsZWQocHJvbWlzZSkpewogICAgICBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7CiAgICAgICAgaWYoaXNOb2RlKXsKICAgICAgICAgIHByb2Nlc3MuZW1pdCgndW5oYW5kbGVkUmVqZWN0aW9uJywgdmFsdWUsIHByb21pc2UpOwogICAgICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKXsKICAgICAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogdmFsdWV9KTsKICAgICAgICB9IGVsc2UgaWYoKGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZSkgJiYgY29uc29sZS5lcnJvcil7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gQnJvd3NlcnMgc2hvdWxkIG5vdCB0cmlnZ2VyIGByZWplY3Rpb25IYW5kbGVkYCBldmVudCBpZiBpdCB3YXMgaGFuZGxlZCBoZXJlLCBOb2RlSlMgLSBzaG91bGQKICAgICAgcHJvbWlzZS5faCA9IGlzTm9kZSB8fCBpc1VuaGFuZGxlZChwcm9taXNlKSA/IDIgOiAxOwogICAgfSBwcm9taXNlLl9hID0gdW5kZWZpbmVkOwogICAgaWYoYWJydXB0KXRocm93IGFicnVwdC5lcnJvcjsKICB9KTsKfTsKdmFyIGlzVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7CiAgaWYocHJvbWlzZS5faCA9PSAxKXJldHVybiBmYWxzZTsKICB2YXIgY2hhaW4gPSBwcm9taXNlLl9hIHx8IHByb21pc2UuX2MKICAgICwgaSAgICAgPSAwCiAgICAsIHJlYWN0aW9uOwogIHdoaWxlKGNoYWluLmxlbmd0aCA+IGkpewogICAgcmVhY3Rpb24gPSBjaGFpbltpKytdOwogICAgaWYocmVhY3Rpb24uZmFpbCB8fCAhaXNVbmhhbmRsZWQocmVhY3Rpb24ucHJvbWlzZSkpcmV0dXJuIGZhbHNlOwogIH0gcmV0dXJuIHRydWU7Cn07CnZhciBvbkhhbmRsZVVuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2UpewogIHRhc2suY2FsbChnbG9iYWwsIGZ1bmN0aW9uKCl7CiAgICB2YXIgaGFuZGxlcjsKICAgIGlmKGlzTm9kZSl7CiAgICAgIHByb2Nlc3MuZW1pdCgncmVqZWN0aW9uSGFuZGxlZCcsIHByb21pc2UpOwogICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub25yZWplY3Rpb25oYW5kbGVkKXsKICAgICAgaGFuZGxlcih7cHJvbWlzZTogcHJvbWlzZSwgcmVhc29uOiBwcm9taXNlLl92fSk7CiAgICB9CiAgfSk7Cn07CnZhciAkcmVqZWN0ID0gZnVuY3Rpb24odmFsdWUpewogIHZhciBwcm9taXNlID0gdGhpczsKICBpZihwcm9taXNlLl9kKXJldHVybjsKICBwcm9taXNlLl9kID0gdHJ1ZTsKICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXAKICBwcm9taXNlLl92ID0gdmFsdWU7CiAgcHJvbWlzZS5fcyA9IDI7CiAgaWYoIXByb21pc2UuX2EpcHJvbWlzZS5fYSA9IHByb21pc2UuX2Muc2xpY2UoKTsKICBub3RpZnkocHJvbWlzZSwgdHJ1ZSk7Cn07CnZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKXsKICB2YXIgcHJvbWlzZSA9IHRoaXMKICAgICwgdGhlbjsKICBpZihwcm9taXNlLl9kKXJldHVybjsKICBwcm9taXNlLl9kID0gdHJ1ZTsKICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXAKICB0cnkgewogICAgaWYocHJvbWlzZSA9PT0gdmFsdWUpdGhyb3cgVHlwZUVycm9yKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOwogICAgaWYodGhlbiA9IGlzVGhlbmFibGUodmFsdWUpKXsKICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIHdyYXBwZXIgPSB7X3c6IHByb21pc2UsIF9kOiBmYWxzZX07IC8vIHdyYXAKICAgICAgICB0cnkgewogICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpOwogICAgICAgIH0gY2F0Y2goZSl7CiAgICAgICAgICAkcmVqZWN0LmNhbGwod3JhcHBlciwgZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTsKICAgICAgcHJvbWlzZS5fcyA9IDE7CiAgICAgIG5vdGlmeShwcm9taXNlLCBmYWxzZSk7CiAgICB9CiAgfSBjYXRjaChlKXsKICAgICRyZWplY3QuY2FsbCh7X3c6IHByb21pc2UsIF9kOiBmYWxzZX0sIGUpOyAvLyB3cmFwCiAgfQp9OwoKLy8gY29uc3RydWN0b3IgcG9seWZpbGwKaWYoIVVTRV9OQVRJVkUpewogIC8vIDI1LjQuMy4xIFByb21pc2UoZXhlY3V0b3IpCiAgJFByb21pc2UgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXsKICAgIGFuSW5zdGFuY2UodGhpcywgJFByb21pc2UsIFBST01JU0UsICdfaCcpOwogICAgYUZ1bmN0aW9uKGV4ZWN1dG9yKTsKICAgIEludGVybmFsLmNhbGwodGhpcyk7CiAgICB0cnkgewogICAgICBleGVjdXRvcihjdHgoJHJlc29sdmUsIHRoaXMsIDEpLCBjdHgoJHJlamVjdCwgdGhpcywgMSkpOwogICAgfSBjYXRjaChlcnIpewogICAgICAkcmVqZWN0LmNhbGwodGhpcywgZXJyKTsKICAgIH0KICB9OwogIEludGVybmFsID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7CiAgICB0aGlzLl9jID0gW107ICAgICAgICAgICAgIC8vIDwtIGF3YWl0aW5nIHJlYWN0aW9ucwogICAgdGhpcy5fYSA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9ucwogICAgdGhpcy5fcyA9IDA7ICAgICAgICAgICAgICAvLyA8LSBzdGF0ZQogICAgdGhpcy5fZCA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBkb25lCiAgICB0aGlzLl92ID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIHZhbHVlCiAgICB0aGlzLl9oID0gMDsgICAgICAgICAgICAgIC8vIDwtIHJlamVjdGlvbiBzdGF0ZSwgMCAtIGRlZmF1bHQsIDEgLSBoYW5kbGVkLCAyIC0gdW5oYW5kbGVkCiAgICB0aGlzLl9uID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIG5vdGlmeQogIH07CiAgSW50ZXJuYWwucHJvdG90eXBlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NykoJFByb21pc2UucHJvdG90eXBlLCB7CiAgICAvLyAyNS40LjUuMyBQcm9taXNlLnByb3RvdHlwZS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKQogICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCl7CiAgICAgIHZhciByZWFjdGlvbiAgICA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHNwZWNpZXNDb25zdHJ1Y3Rvcih0aGlzLCAkUHJvbWlzZSkpOwogICAgICByZWFjdGlvbi5vayAgICAgPSB0eXBlb2Ygb25GdWxmaWxsZWQgPT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdHJ1ZTsKICAgICAgcmVhY3Rpb24uZmFpbCAgID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT0gJ2Z1bmN0aW9uJyAmJiBvblJlamVjdGVkOwogICAgICByZWFjdGlvbi5kb21haW4gPSBpc05vZGUgPyBwcm9jZXNzLmRvbWFpbiA6IHVuZGVmaW5lZDsKICAgICAgdGhpcy5fYy5wdXNoKHJlYWN0aW9uKTsKICAgICAgaWYodGhpcy5fYSl0aGlzLl9hLnB1c2gocmVhY3Rpb24pOwogICAgICBpZih0aGlzLl9zKW5vdGlmeSh0aGlzLCBmYWxzZSk7CiAgICAgIHJldHVybiByZWFjdGlvbi5wcm9taXNlOwogICAgfSwKICAgIC8vIDI1LjQuNS4xIFByb21pc2UucHJvdG90eXBlLmNhdGNoKG9uUmVqZWN0ZWQpCiAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGVkKXsKICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpOwogICAgfQogIH0pOwogIFByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oKXsKICAgIHZhciBwcm9taXNlICA9IG5ldyBJbnRlcm5hbDsKICAgIHRoaXMucHJvbWlzZSA9IHByb21pc2U7CiAgICB0aGlzLnJlc29sdmUgPSBjdHgoJHJlc29sdmUsIHByb21pc2UsIDEpOwogICAgdGhpcy5yZWplY3QgID0gY3R4KCRyZWplY3QsIHByb21pc2UsIDEpOwogIH07Cn0KCiRleHBvcnQoJGV4cG9ydC5HICsgJGV4cG9ydC5XICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIHtQcm9taXNlOiAkUHJvbWlzZX0pOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSgkUHJvbWlzZSwgUFJPTUlTRSk7Cl9fd2VicGFja19yZXF1aXJlX18oOTkpKFBST01JU0UpOwpXcmFwcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKVtQUk9NSVNFXTsKCi8vIHN0YXRpY3MKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgUFJPTUlTRSwgewogIC8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpCiAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3Qocil7CiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpCiAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgJCRyZWplY3Qocik7CiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogIH0KfSk7CiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogKExJQlJBUlkgfHwgIVVTRV9OQVRJVkUpLCBQUk9NSVNFLCB7CiAgLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpCiAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh4KXsKICAgIC8vIGluc3RhbmNlb2YgaW5zdGVhZCBvZiBpbnRlcm5hbCBzbG90IGNoZWNrIGJlY2F1c2Ugd2Ugc2hvdWxkIGZpeCBpdCB3aXRob3V0IHJlcGxhY2VtZW50IG5hdGl2ZSBQcm9taXNlIGNvcmUKICAgIGlmKHggaW5zdGFuY2VvZiAkUHJvbWlzZSAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7CiAgICB2YXIgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KHRoaXMpCiAgICAgICwgJCRyZXNvbHZlICA9IGNhcGFiaWxpdHkucmVzb2x2ZTsKICAgICQkcmVzb2x2ZSh4KTsKICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgfQp9KTsKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhKFVTRV9OQVRJVkUgJiYgX193ZWJwYWNrX3JlcXVpcmVfXyg5MykoZnVuY3Rpb24oaXRlcil7CiAgJFByb21pc2UuYWxsKGl0ZXIpWydjYXRjaCddKGVtcHR5KTsKfSkpLCBQUk9NSVNFLCB7CiAgLy8gMjUuNC40LjEgUHJvbWlzZS5hbGwoaXRlcmFibGUpCiAgYWxsOiBmdW5jdGlvbiBhbGwoaXRlcmFibGUpewogICAgdmFyIEMgICAgICAgICAgPSB0aGlzCiAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpCiAgICAgICwgcmVzb2x2ZSAgICA9IGNhcGFiaWxpdHkucmVzb2x2ZQogICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgIHZhciBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7CiAgICAgIHZhciB2YWx1ZXMgICAgPSBbXQogICAgICAgICwgaW5kZXggICAgID0gMAogICAgICAgICwgcmVtYWluaW5nID0gMTsKICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbihwcm9taXNlKXsKICAgICAgICB2YXIgJGluZGV4ICAgICAgICA9IGluZGV4KysKICAgICAgICAgICwgYWxyZWFkeUNhbGxlZCA9IGZhbHNlOwogICAgICAgIHZhbHVlcy5wdXNoKHVuZGVmaW5lZCk7CiAgICAgICAgcmVtYWluaW5nKys7CiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpewogICAgICAgICAgaWYoYWxyZWFkeUNhbGxlZClyZXR1cm47CiAgICAgICAgICBhbHJlYWR5Q2FsbGVkICA9IHRydWU7CiAgICAgICAgICB2YWx1ZXNbJGluZGV4XSA9IHZhbHVlOwogICAgICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOwogICAgICAgIH0sIHJlamVjdCk7CiAgICAgIH0pOwogICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7CiAgICB9KTsKICAgIGlmKGFicnVwdClyZWplY3QoYWJydXB0LmVycm9yKTsKICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgfSwKICAvLyAyNS40LjQuNCBQcm9taXNlLnJhY2UoaXRlcmFibGUpCiAgcmFjZTogZnVuY3Rpb24gcmFjZShpdGVyYWJsZSl7CiAgICB2YXIgQyAgICAgICAgICA9IHRoaXMKICAgICAgLCBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkoQykKICAgICAgLCByZWplY3QgICAgID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpewogICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2UpewogICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGNhcGFiaWxpdHkucmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgfSk7CiAgICB9KTsKICAgIGlmKGFicnVwdClyZWplY3QoYWJydXB0LmVycm9yKTsKICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7CiAgfQp9KTsKCi8qKiovIH0pLAovKiAxMDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKLy8gRUNNQVNjcmlwdCA2IHN5bWJvbHMgc2hpbQp2YXIgZ2xvYmFsICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCBERVNDUklQVE9SUyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMikKICAsICRleHBvcnQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQogICwgcmVkZWZpbmUgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KQogICwgTUVUQSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKS5LRVkKICAsICRmYWlscyAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSkKICAsIHNoYXJlZCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCkKICAsIHNldFRvU3RyaW5nVGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMikKICAsIHVpZCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMykKICAsIHdrcyAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKQogICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KQogICwgd2tzRGVmaW5lICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KQogICwga2V5T2YgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KQogICwgZW51bUtleXMgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KQogICwgaXNBcnJheSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKQogICwgYW5PYmplY3QgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpCiAgLCB0b0lPYmplY3QgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpCiAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpCiAgLCBjcmVhdGVEZXNjICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpCiAgLCBfY3JlYXRlICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpCiAgLCBnT1BORXh0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTYpCiAgLCAkR09QRCAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpCiAgLCAkRFAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsICRrZXlzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCkKICAsIGdPUEQgICAgICAgICAgID0gJEdPUEQuZgogICwgZFAgICAgICAgICAgICAgPSAkRFAuZgogICwgZ09QTiAgICAgICAgICAgPSBnT1BORXh0LmYKICAsICRTeW1ib2wgICAgICAgID0gZ2xvYmFsLlN5bWJvbAogICwgJEpTT04gICAgICAgICAgPSBnbG9iYWwuSlNPTgogICwgX3N0cmluZ2lmeSAgICAgPSAkSlNPTiAmJiAkSlNPTi5zdHJpbmdpZnkKICAsIFBST1RPVFlQRSAgICAgID0gJ3Byb3RvdHlwZScKICAsIEhJRERFTiAgICAgICAgID0gd2tzKCdfaGlkZGVuJykKICAsIFRPX1BSSU1JVElWRSAgID0gd2tzKCd0b1ByaW1pdGl2ZScpCiAgLCBpc0VudW0gICAgICAgICA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlCiAgLCBTeW1ib2xSZWdpc3RyeSA9IHNoYXJlZCgnc3ltYm9sLXJlZ2lzdHJ5JykKICAsIEFsbFN5bWJvbHMgICAgID0gc2hhcmVkKCdzeW1ib2xzJykKICAsIE9QU3ltYm9scyAgICAgID0gc2hhcmVkKCdvcC1zeW1ib2xzJykKICAsIE9iamVjdFByb3RvICAgID0gT2JqZWN0W1BST1RPVFlQRV0KICAsIFVTRV9OQVRJVkUgICAgID0gdHlwZW9mICRTeW1ib2wgPT0gJ2Z1bmN0aW9uJwogICwgUU9iamVjdCAgICAgICAgPSBnbG9iYWwuUU9iamVjdDsKLy8gRG9uJ3QgdXNlIHNldHRlcnMgaW4gUXQgU2NyaXB0LCBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvMTczCnZhciBzZXR0ZXIgPSAhUU9iamVjdCB8fCAhUU9iamVjdFtQUk9UT1RZUEVdIHx8ICFRT2JqZWN0W1BST1RPVFlQRV0uZmluZENoaWxkOwoKLy8gZmFsbGJhY2sgZm9yIG9sZCBBbmRyb2lkLCBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9Njg3CnZhciBzZXRTeW1ib2xEZXNjID0gREVTQ1JJUFRPUlMgJiYgJGZhaWxzKGZ1bmN0aW9uKCl7CiAgcmV0dXJuIF9jcmVhdGUoZFAoe30sICdhJywgewogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZFAodGhpcywgJ2EnLCB7dmFsdWU6IDd9KS5hOyB9CiAgfSkpLmEgIT0gNzsKfSkgPyBmdW5jdGlvbihpdCwga2V5LCBEKXsKICB2YXIgcHJvdG9EZXNjID0gZ09QRChPYmplY3RQcm90bywga2V5KTsKICBpZihwcm90b0Rlc2MpZGVsZXRlIE9iamVjdFByb3RvW2tleV07CiAgZFAoaXQsIGtleSwgRCk7CiAgaWYocHJvdG9EZXNjICYmIGl0ICE9PSBPYmplY3RQcm90bylkUChPYmplY3RQcm90bywga2V5LCBwcm90b0Rlc2MpOwp9IDogZFA7Cgp2YXIgd3JhcCA9IGZ1bmN0aW9uKHRhZyl7CiAgdmFyIHN5bSA9IEFsbFN5bWJvbHNbdGFnXSA9IF9jcmVhdGUoJFN5bWJvbFtQUk9UT1RZUEVdKTsKICBzeW0uX2sgPSB0YWc7CiAgcmV0dXJuIHN5bTsKfTsKCnZhciBpc1N5bWJvbCA9IFVTRV9OQVRJVkUgJiYgdHlwZW9mICRTeW1ib2wuaXRlcmF0b3IgPT0gJ3N5bWJvbCcgPyBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIHR5cGVvZiBpdCA9PSAnc3ltYm9sJzsKfSA6IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXQgaW5zdGFuY2VvZiAkU3ltYm9sOwp9OwoKdmFyICRkZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIEQpewogIGlmKGl0ID09PSBPYmplY3RQcm90bykkZGVmaW5lUHJvcGVydHkoT1BTeW1ib2xzLCBrZXksIEQpOwogIGFuT2JqZWN0KGl0KTsKICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOwogIGFuT2JqZWN0KEQpOwogIGlmKGhhcyhBbGxTeW1ib2xzLCBrZXkpKXsKICAgIGlmKCFELmVudW1lcmFibGUpewogICAgICBpZighaGFzKGl0LCBISURERU4pKWRQKGl0LCBISURERU4sIGNyZWF0ZURlc2MoMSwge30pKTsKICAgICAgaXRbSElEREVOXVtrZXldID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIGlmKGhhcyhpdCwgSElEREVOKSAmJiBpdFtISURERU5dW2tleV0paXRbSElEREVOXVtrZXldID0gZmFsc2U7CiAgICAgIEQgPSBfY3JlYXRlKEQsIHtlbnVtZXJhYmxlOiBjcmVhdGVEZXNjKDAsIGZhbHNlKX0pOwogICAgfSByZXR1cm4gc2V0U3ltYm9sRGVzYyhpdCwga2V5LCBEKTsKICB9IHJldHVybiBkUChpdCwga2V5LCBEKTsKfTsKdmFyICRkZWZpbmVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhpdCwgUCl7CiAgYW5PYmplY3QoaXQpOwogIHZhciBrZXlzID0gZW51bUtleXMoUCA9IHRvSU9iamVjdChQKSkKICAgICwgaSAgICA9IDAKICAgICwgbCA9IGtleXMubGVuZ3RoCiAgICAsIGtleTsKICB3aGlsZShsID4gaSkkZGVmaW5lUHJvcGVydHkoaXQsIGtleSA9IGtleXNbaSsrXSwgUFtrZXldKTsKICByZXR1cm4gaXQ7Cn07CnZhciAkY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGl0LCBQKXsKICByZXR1cm4gUCA9PT0gdW5kZWZpbmVkID8gX2NyZWF0ZShpdCkgOiAkZGVmaW5lUHJvcGVydGllcyhfY3JlYXRlKGl0KSwgUCk7Cn07CnZhciAkcHJvcGVydHlJc0VudW1lcmFibGUgPSBmdW5jdGlvbiBwcm9wZXJ0eUlzRW51bWVyYWJsZShrZXkpewogIHZhciBFID0gaXNFbnVtLmNhbGwodGhpcywga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKSk7CiAgaWYodGhpcyA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpcmV0dXJuIGZhbHNlOwogIHJldHVybiBFIHx8ICFoYXModGhpcywga2V5KSB8fCAhaGFzKEFsbFN5bWJvbHMsIGtleSkgfHwgaGFzKHRoaXMsIEhJRERFTikgJiYgdGhpc1tISURERU5dW2tleV0gPyBFIDogdHJ1ZTsKfTsKdmFyICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7CiAgaXQgID0gdG9JT2JqZWN0KGl0KTsKICBrZXkgPSB0b1ByaW1pdGl2ZShrZXksIHRydWUpOwogIGlmKGl0ID09PSBPYmplY3RQcm90byAmJiBoYXMoQWxsU3ltYm9scywga2V5KSAmJiAhaGFzKE9QU3ltYm9scywga2V5KSlyZXR1cm47CiAgdmFyIEQgPSBnT1BEKGl0LCBrZXkpOwogIGlmKEQgJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIShoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKSlELmVudW1lcmFibGUgPSB0cnVlOwogIHJldHVybiBEOwp9Owp2YXIgJGdldE93blByb3BlcnR5TmFtZXMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXsKICB2YXIgbmFtZXMgID0gZ09QTih0b0lPYmplY3QoaXQpKQogICAgLCByZXN1bHQgPSBbXQogICAgLCBpICAgICAgPSAwCiAgICAsIGtleTsKICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsKICAgIGlmKCFoYXMoQWxsU3ltYm9scywga2V5ID0gbmFtZXNbaSsrXSkgJiYga2V5ICE9IEhJRERFTiAmJiBrZXkgIT0gTUVUQSlyZXN1bHQucHVzaChrZXkpOwogIH0gcmV0dXJuIHJlc3VsdDsKfTsKdmFyICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eVN5bWJvbHMoaXQpewogIHZhciBJU19PUCAgPSBpdCA9PT0gT2JqZWN0UHJvdG8KICAgICwgbmFtZXMgID0gZ09QTihJU19PUCA/IE9QU3ltYm9scyA6IHRvSU9iamVjdChpdCkpCiAgICAsIHJlc3VsdCA9IFtdCiAgICAsIGkgICAgICA9IDAKICAgICwga2V5OwogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpewogICAgaWYoaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIChJU19PUCA/IGhhcyhPYmplY3RQcm90bywga2V5KSA6IHRydWUpKXJlc3VsdC5wdXNoKEFsbFN5bWJvbHNba2V5XSk7CiAgfSByZXR1cm4gcmVzdWx0Owp9OwoKLy8gMTkuNC4xLjEgU3ltYm9sKFtkZXNjcmlwdGlvbl0pCmlmKCFVU0VfTkFUSVZFKXsKICAkU3ltYm9sID0gZnVuY3Rpb24gU3ltYm9sKCl7CiAgICBpZih0aGlzIGluc3RhbmNlb2YgJFN5bWJvbCl0aHJvdyBUeXBlRXJyb3IoJ1N5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciEnKTsKICAgIHZhciB0YWcgPSB1aWQoYXJndW1lbnRzLmxlbmd0aCA+IDAgPyBhcmd1bWVudHNbMF0gOiB1bmRlZmluZWQpOwogICAgdmFyICRzZXQgPSBmdW5jdGlvbih2YWx1ZSl7CiAgICAgIGlmKHRoaXMgPT09IE9iamVjdFByb3RvKSRzZXQuY2FsbChPUFN5bWJvbHMsIHZhbHVlKTsKICAgICAgaWYoaGFzKHRoaXMsIEhJRERFTikgJiYgaGFzKHRoaXNbSElEREVOXSwgdGFnKSl0aGlzW0hJRERFTl1bdGFnXSA9IGZhbHNlOwogICAgICBzZXRTeW1ib2xEZXNjKHRoaXMsIHRhZywgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwogICAgfTsKICAgIGlmKERFU0NSSVBUT1JTICYmIHNldHRlcilzZXRTeW1ib2xEZXNjKE9iamVjdFByb3RvLCB0YWcsIHtjb25maWd1cmFibGU6IHRydWUsIHNldDogJHNldH0pOwogICAgcmV0dXJuIHdyYXAodGFnKTsKICB9OwogIHJlZGVmaW5lKCRTeW1ib2xbUFJPVE9UWVBFXSwgJ3RvU3RyaW5nJywgZnVuY3Rpb24gdG9TdHJpbmcoKXsKICAgIHJldHVybiB0aGlzLl9rOwogIH0pOwoKICAkR09QRC5mID0gJGdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICAkRFAuZiAgID0gJGRlZmluZVByb3BlcnR5OwogIF9fd2VicGFja19yZXF1aXJlX18oNjUpLmYgPSBnT1BORXh0LmYgPSAkZ2V0T3duUHJvcGVydHlOYW1lczsKICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKS5mICA9ICRwcm9wZXJ0eUlzRW51bWVyYWJsZTsKICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KS5mID0gJGdldE93blByb3BlcnR5U3ltYm9sczsKCiAgaWYoREVTQ1JJUFRPUlMgJiYgIV9fd2VicGFja19yZXF1aXJlX18oMjYpKXsKICAgIHJlZGVmaW5lKE9iamVjdFByb3RvLCAncHJvcGVydHlJc0VudW1lcmFibGUnLCAkcHJvcGVydHlJc0VudW1lcmFibGUsIHRydWUpOwogIH0KCiAgd2tzRXh0LmYgPSBmdW5jdGlvbihuYW1lKXsKICAgIHJldHVybiB3cmFwKHdrcyhuYW1lKSk7CiAgfQp9CgokZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7U3ltYm9sOiAkU3ltYm9sfSk7Cgpmb3IodmFyIHN5bWJvbHMgPSAoCiAgLy8gMTkuNC4yLjIsIDE5LjQuMi4zLCAxOS40LjIuNCwgMTkuNC4yLjYsIDE5LjQuMi44LCAxOS40LjIuOSwgMTkuNC4yLjEwLCAxOS40LjIuMTEsIDE5LjQuMi4xMiwgMTkuNC4yLjEzLCAxOS40LjIuMTQKICAnaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXMnCikuc3BsaXQoJywnKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrcyhzeW1ib2xzW2krK10pOwoKZm9yKHZhciBzeW1ib2xzID0gJGtleXMod2tzLnN0b3JlKSwgaSA9IDA7IHN5bWJvbHMubGVuZ3RoID4gaTsgKXdrc0RlZmluZShzeW1ib2xzW2krK10pOwoKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ1N5bWJvbCcsIHsKICAvLyAxOS40LjIuMSBTeW1ib2wuZm9yKGtleSkKICAnZm9yJzogZnVuY3Rpb24oa2V5KXsKICAgIHJldHVybiBoYXMoU3ltYm9sUmVnaXN0cnksIGtleSArPSAnJykKICAgICAgPyBTeW1ib2xSZWdpc3RyeVtrZXldCiAgICAgIDogU3ltYm9sUmVnaXN0cnlba2V5XSA9ICRTeW1ib2woa2V5KTsKICB9LAogIC8vIDE5LjQuMi41IFN5bWJvbC5rZXlGb3Ioc3ltKQogIGtleUZvcjogZnVuY3Rpb24ga2V5Rm9yKGtleSl7CiAgICBpZihpc1N5bWJvbChrZXkpKXJldHVybiBrZXlPZihTeW1ib2xSZWdpc3RyeSwga2V5KTsKICAgIHRocm93IFR5cGVFcnJvcihrZXkgKyAnIGlzIG5vdCBhIHN5bWJvbCEnKTsKICB9LAogIHVzZVNldHRlcjogZnVuY3Rpb24oKXsgc2V0dGVyID0gdHJ1ZTsgfSwKICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCl7IHNldHRlciA9IGZhbHNlOyB9Cn0pOwoKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwgJ09iamVjdCcsIHsKICAvLyAxOS4xLjIuMiBPYmplY3QuY3JlYXRlKE8gWywgUHJvcGVydGllc10pCiAgY3JlYXRlOiAkY3JlYXRlLAogIC8vIDE5LjEuMi40IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKQogIGRlZmluZVByb3BlcnR5OiAkZGVmaW5lUHJvcGVydHksCiAgLy8gMTkuMS4yLjMgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTywgUHJvcGVydGllcykKICBkZWZpbmVQcm9wZXJ0aWVzOiAkZGVmaW5lUHJvcGVydGllcywKICAvLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLAogIC8vIDE5LjEuMi43IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCiAgZ2V0T3duUHJvcGVydHlOYW1lczogJGdldE93blByb3BlcnR5TmFtZXMsCiAgLy8gMTkuMS4yLjggT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhPKQogIGdldE93blByb3BlcnR5U3ltYm9sczogJGdldE93blByb3BlcnR5U3ltYm9scwp9KTsKCi8vIDI0LjMuMiBKU09OLnN0cmluZ2lmeSh2YWx1ZSBbLCByZXBsYWNlciBbLCBzcGFjZV1dKQokSlNPTiAmJiAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICghVVNFX05BVElWRSB8fCAkZmFpbHMoZnVuY3Rpb24oKXsKICB2YXIgUyA9ICRTeW1ib2woKTsKICAvLyBNUyBFZGdlIGNvbnZlcnRzIHN5bWJvbCB2YWx1ZXMgdG8gSlNPTiBhcyB7fQogIC8vIFdlYktpdCBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMgbnVsbAogIC8vIFY4IHRocm93cyBvbiBib3hlZCBzeW1ib2xzCiAgcmV0dXJuIF9zdHJpbmdpZnkoW1NdKSAhPSAnW251bGxdJyB8fCBfc3RyaW5naWZ5KHthOiBTfSkgIT0gJ3t9JyB8fCBfc3RyaW5naWZ5KE9iamVjdChTKSkgIT0gJ3t9JzsKfSkpLCAnSlNPTicsIHsKICBzdHJpbmdpZnk6IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7CiAgICBpZihpdCA9PT0gdW5kZWZpbmVkIHx8IGlzU3ltYm9sKGl0KSlyZXR1cm47IC8vIElFOCByZXR1cm5zIHN0cmluZyBvbiB1bmRlZmluZWQKICAgIHZhciBhcmdzID0gW2l0XQogICAgICAsIGkgICAgPSAxCiAgICAgICwgcmVwbGFjZXIsICRyZXBsYWNlcjsKICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7CiAgICByZXBsYWNlciA9IGFyZ3NbMV07CiAgICBpZih0eXBlb2YgcmVwbGFjZXIgPT0gJ2Z1bmN0aW9uJykkcmVwbGFjZXIgPSByZXBsYWNlcjsKICAgIGlmKCRyZXBsYWNlciB8fCAhaXNBcnJheShyZXBsYWNlcikpcmVwbGFjZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKXsKICAgICAgaWYoJHJlcGxhY2VyKXZhbHVlID0gJHJlcGxhY2VyLmNhbGwodGhpcywga2V5LCB2YWx1ZSk7CiAgICAgIGlmKCFpc1N5bWJvbCh2YWx1ZSkpcmV0dXJuIHZhbHVlOwogICAgfTsKICAgIGFyZ3NbMV0gPSByZXBsYWNlcjsKICAgIHJldHVybiBfc3RyaW5naWZ5LmFwcGx5KCRKU09OLCBhcmdzKTsKICB9Cn0pOwoKLy8gMTkuNC4zLjQgU3ltYm9sLnByb3RvdHlwZVtAQHRvUHJpbWl0aXZlXShoaW50KQokU3ltYm9sW1BST1RPVFlQRV1bVE9fUFJJTUlUSVZFXSB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpKCRTeW1ib2xbUFJPVE9UWVBFXSwgVE9fUFJJTUlUSVZFLCAkU3ltYm9sW1BST1RPVFlQRV0udmFsdWVPZik7Ci8vIDE5LjQuMy41IFN5bWJvbC5wcm90b3R5cGVbQEB0b1N0cmluZ1RhZ10Kc2V0VG9TdHJpbmdUYWcoJFN5bWJvbCwgJ1N5bWJvbCcpOwovLyAyMC4yLjEuOSBNYXRoW0BAdG9TdHJpbmdUYWddCnNldFRvU3RyaW5nVGFnKE1hdGgsICdNYXRoJywgdHJ1ZSk7Ci8vIDI0LjMuMyBKU09OW0BAdG9TdHJpbmdUYWddCnNldFRvU3RyaW5nVGFnKGdsb2JhbC5KU09OLCAnSlNPTicsIHRydWUpOwoKLyoqKi8gfSksCi8qIDEwNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSgnYXN5bmNJdGVyYXRvcicpOwoKLyoqKi8gfSksCi8qIDEwOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KSgnb2JzZXJ2YWJsZScpOwoKLyoqKi8gfSksCi8qIDEwOSAqLywKLyogMTEwICovLAovKiAxMTEgKi8sCi8qIDExMiAqLywKLyogMTEzICovLAovKiAxMTQgKi8sCi8qIDExNSAqLywKLyogMTE2ICovLAovKiAxMTcgKi8sCi8qIDExOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfUHJveHlPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNCk7Cgp2YXIgX1Byb3h5T2JqZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Byb3h5T2JqZWN0KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovL2ltcG9ydCB7IGRlZXBDbG9uZSB9IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJzsKCi8qKg0KICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIERhdGFPYmplY3QgYWRkQ2hpbGRyZW4gY2FsbCBvciBmcm9tIG9uQWRkQ2hpbGRyZW4gaWYgcmVtb3RlbHkgY3JlYXRlZC4NCiAqLwp2YXIgRGF0YU9iamVjdENoaWxkIC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlDQogICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQ0KICBfb25SZXNwb25zZUhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICAqLwoKICAvKioNCiAgICogQGlnbm9yZQ0KICAgKiBTaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkgYnkgSHlwZXJ0aWVzLiBJdCdzIGNhbGxlZCBieSB0aGUgRGF0YU9iamVjdC5hZGRDaGlsZHJlbg0KICAgKi8KICBmdW5jdGlvbiBEYXRhT2JqZWN0Q2hpbGQoaW5wdXQpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RDaGlsZCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBmdW5jdGlvbiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IocGFyKSB7CiAgICAgIHRocm93ICdbRGF0YU9iamVjdENoaWxkXSAnICsgcGFyICsgJyBtYW5kYXRvcnkgcGFyYW1ldGVyIGlzIG1pc3NpbmcnOwogICAgfQoKICAgIC8vaW5wdXQubXNnSWQgPyAgX3RoaXMuX21zZ0lkID0gaW5wdXQubXNnSWQgOiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoJ21zZ0lkJyk7CiAgICBpbnB1dC5wYXJlbnQgPyBfdGhpcy5fcGFyZW50ID0gaW5wdXQucGFyZW50IDogdGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKCdwYXJlbnQnKTsKICAgIGlucHV0LnVybCA/IF90aGlzLl91cmwgPSBpbnB1dC51cmwgOiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoJ3VybCcpOwogICAgaW5wdXQuY3JlYXRlZCA/IF90aGlzLl9jcmVhdGVkID0gaW5wdXQuY3JlYXRlZCA6IHRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcignY3JlYXRlZCcpOwogICAgaW5wdXQucmVwb3J0ZXIgPyBfdGhpcy5fcmVwb3J0ZXIgPSBpbnB1dC5yZXBvcnRlciA6IHRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcigncmVwb3J0ZXInKTsKICAgIGlucHV0LnJ1bnRpbWUgPyBfdGhpcy5fcnVudGltZSA9IGlucHV0LnJ1bnRpbWUgOiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoJ3J1bnRpbWUnKTsKICAgIGlucHV0LnNjaGVtYSA/IF90aGlzLl9zY2hlbWEgPSBpbnB1dC5zY2hlbWEgOiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoJ3NjaGVtYScpOwogICAgaW5wdXQucGFyZW50T2JqZWN0ID8gX3RoaXMuX3BhcmVudE9iamVjdCA9IGlucHV0LnBhcmVudE9iamVjdCA6IHRocm93TWFuZGF0b3J5UGFybU1pc3NpbmdFcnJvcigncGFyZW50T2JqZWN0Jyk7CgogICAgaWYgKGlucHV0Lm5hbWUpIF90aGlzLl9uYW1lID0gaW5wdXQubmFtZTsKICAgIGlmIChpbnB1dC5kZXNjcmlwdGlvbikgX3RoaXMuX2Rlc2NyaXB0aW9uID0gaW5wdXQuZGVzY3JpcHRpb247CiAgICBpZiAoaW5wdXQudGFncykgX3RoaXMuX3RhZ3MgPSBpbnB1dC50YWdzOwogICAgaWYgKGlucHV0LnJlc291cmNlcykgX3RoaXMuX3Jlc291cmNlcyA9IGlucHV0LnJlc291cmNlczsKICAgIGlmIChpbnB1dC5vYnNlcnZlclN0b3JhZ2UpIF90aGlzLl9vYnNlcnZlclN0b3JhZ2UgPSBpbnB1dC5vYnNlcnZlclN0b3JhZ2U7CiAgICBpZiAoaW5wdXQucHVibGljT2JzZXJ2YXRpb24pIF90aGlzLl9wdWJsaWNPYnNlcnZhdGlvbiA9IGlucHV0LnB1YmxpY09ic2VydmF0aW9uOwoKICAgIGlmIChpbnB1dC5kYXRhKSB7CiAgICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbnB1dC5kYXRhKTsKICAgIH0gZWxzZSB7CiAgICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdCh7fSk7CiAgICB9CgogICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0Q2hpbGQgLSAgQ29uc3RydWN0b3JdIC0gJywgX3RoaXMuX3N5bmNPYmopOwoKICAgIF90aGlzLl9idXMgPSBfdGhpcy5fcGFyZW50T2JqZWN0Ll9idXM7CiAgICBfdGhpcy5fb3duZXIgPSBfdGhpcy5fcGFyZW50T2JqZWN0Ll9vd25lcjsKCiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsKCiAgICBfdGhpcy5fbWV0YWRhdGEgPSBpbnB1dDsKCiAgICBkZWxldGUgX3RoaXMuX21ldGFkYXRhLmRhdGE7CiAgICBkZWxldGUgX3RoaXMuX21ldGFkYXRhLnBhcmVudE9iamVjdDsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RDaGlsZCwgW3sKICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy90aGlzIGlzIG9ubHkgbmVlZGVkIGZvciBjaGlsZHJlbiByZXBvcnRlcnMKICAgICAgaWYgKF90aGlzLl9yZXBvcnRlciA9PT0gX3RoaXMuX293bmVyKSB7CiAgICAgICAgX3RoaXMuX2xpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fcmVwb3J0ZXIsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiBtc2cuaWQgPT09IF90aGlzLl9tc2dJZCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdENoaWxkLm9uUmVzcG9uc2U6JywgbXNnKTsKICAgICAgICAgICAgX3RoaXMuX29uUmVzcG9uc2UobXNnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpcy5fbGlzdGVuZXIpIHsKICAgICAgICBfdGhpcy5fbGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgIH0KICAgIH0KCiAgICAvKioNCiAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGENCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKCiAgICAgIC8vVE9ETzogc2VuZCBkZWxldGUgbWVzc2FnZSA/CiAgICB9CgogICAgLyoqDQogICAgICogQWxsIE1ldGFkYXRhIGFib3V0IHRoZSBDaGlsZCBEYXRhIE9iamVjdA0KICAgICAqIEB0eXBlIHtPYmplY3R9IC0NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25DaGFuZ2UnLAoKCiAgICAvKioNCiAgICAgKiBSZWdpc3RlciB0aGUgY2hhbmdlIGxpc3RlbmVycyBzZW50IGJ5IHRoZSByZXBvcnRlciBjaGlsZA0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShjYWxsYmFjaykgewogICAgICB0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0Q2hpbGQgLSBvYnNlcnZlcl0gLSAnLCBldmVudCk7CiAgICAgICAgY2FsbGJhY2soZXZlbnQpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZXNwb25zZSBub3RpZmljYXRpb25zIG9mIHRoZSBjcmVhdGVzDQogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjaw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVzcG9uc2VIYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBfb25DaGlsZENyZWF0ZQoKICB9LCB7CiAgICBrZXk6ICdfb25SZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgdXJsOiBtc2cuYm9keS5zb3VyY2UsCiAgICAgICAgY29kZTogbXNnLmJvZHkuY29kZQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcikgewogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdtZXRhZGF0YScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX21ldGFkYXRhOwogICAgfQoKICAgIC8qKg0KICAgICAqIENoaWxkcmVuIElEIGdlbmVyYXRlZCBvbiBhZGRDaGlsZHJlbi4gVW5pcXVlIGlkZW50aWZpZXINCiAgICAgKiBAdHlwZSB7VVJMfSAtIFVSTCBvZiB0aGUgZm9ybWF0IDxIeXBlcnR5VVJMPiM8bnVtZXJpYy1zZXF1ZW5jZT4NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnY2hpbGRJZCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkSWQ7CiAgICB9CgogICAgLyoqDQogICAgICogRGF0YSBTdHJ1Y3R1cmUgdG8gYmUgc3luY2hyb25pemVkLg0KICAgICAqIEB0eXBlIHtKU09OfSAtIEpTT04gc3RydWN0dXJlIHRoYXQgc2hvdWxkIGZvbGxvdyB0aGUgZGVmaW5lZCBzY2hlbWEsIGlmIGFueS4NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGF0YScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBTZXQgZm9yIHRoaXMgZGF0YU9iamVjdENoaWxkIGFuIGlkZW50aXR5DQogICAgICogQG1ldGhvZCBpZGVudGl0eQ0KICAgICAqIEBwYXJhbSAge0lkZW50aXR5fSBpZGVudGl0eSBpZGVudGl0eSBmcm9tIHdobyBjcmVhdGVkIHRoZSBtZXNzYWdlDQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2lkZW50aXR5JywKICAgIHNldDogZnVuY3Rpb24gc2V0KGlkZW50aXR5KSB7CiAgICAgIHRoaXMuX2lkZW50aXR5ID0gaWRlbnRpdHk7CiAgICB9CgogICAgLyoqDQogICAgICogR2V0IGZvciB0aGlzIGRhdGFPYmplY3RDaGlsZCBhbiBpZGVudGl0eQ0KICAgICAqIEBtZXRob2QgaWRlbnRpdHkNCiAgICAgKiBAcmV0dXJuIHtJZGVudGl0eX0gaWRlbnRpdHkgZnJvbSB3aG8gY3JlYXRlZCB0aGUgbWVzc2FnZQ0KICAgICAqLwogICAgLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9pZGVudGl0eTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIERhdGFPYmplY3RDaGlsZDsKfSgpOyAvKioNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQogICAgICoNCiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQogICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogICAgICoNCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICAgICAqDQogICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICAgICAqKi8KCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RDaGlsZDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTE5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vICAgICBwcm94eS1vYnNlcnZlIHYwLjAuMTgNCi8vICAgICBDb3B5cmlnaHQgKGMpIDIwMTUsIDIwMTYgU2ltb24gWS4gQmxhY2t3ZWxsLCBBbnlXaGljaFdheQ0KLy8gICAgIE1JVCBMaWNlbnNlIC0gaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocA0KKGZ1bmN0aW9uKCkgew0KCSJ1c2Ugc3RyaWN0IjsNCgkvLyBDcmVhdGVzIGFuZCByZXR1cm5zIGEgUHJveHkgd3JhcHBpbmcgYSB0YXJnZXQgc28gdGhhdCBhbGwgY2hhbmdlcyBjYW4gYmUgdHJhcHBlZCBhbmQgZm9yd2FyZGVkIHRvDQoJLy8gYSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHRha2VzIGFuIGFycmF5IG9mIGNoYW5nZXMganVzdCBsaWtlIHRoZSB0cmFkaXRpb25hbCBvcmlnaW5hbCBDaHJvbWUgT2JqZWN0Lm9ic2VydmUNCgkvLyB7b2JqZWN0OjxvYmplY3QgY2hhbmdlZD4sbmFtZTo8ZmllbGQgY2hhbmdlZD4sdHlwZTphZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUsb2xkVmFsdWU6PG9sZCB2YWx1ZSBpZiB1cGRhdGUgfCBkZWxldGU+fQ0KCS8vIFRoZSBhY2NlcHRsaXN0IGNhbiBiZSBhZGR8dXBkYXRlfGRlbGV0ZXxyZWNvbmZpZ3VyZXxwcmV2ZW50RXh0ZW5zaW9uc3xzZXRQcm90b3R5cGUuDQoJLy8gdiAwLjAuMTAgdG8gc3VwcG9ydCBwYXVzaW5nIGFuZCByZXN0YXJ0aW5nIG9ic2VydmF0aW9uIHR3byBhZGRpdGlvbmFsIGNvbnN0cnVjdG9yIGFyZ3VtZW50cyBhcmUgYXZhaWxhYmxlIHRvIE9iamVjdC5vYnNlcnZlOg0KCS8vIHBhdXNhYmxlIC0gY3JlYXRlIHRoZSBPYnNlcnZlciBzbyBpdCBjYW4gYmUgcGF1c2VkDQoJLy8gcGF1c2UgLSBjcmVhdGUgb2JzZXJ2ZXIgaW4gcGF1c2VkIHN0YXRlDQoJLy8gaWYgcGF1c2FibGUgaXMgdHJ1ZSB0aGVuIGFuIGFkZGl0aW9uYWwgbWV0aG9kIGRlbGl2ZXIoaWdub3JlUHJldmlvdXMpIGlzIGF2YWlsYWJsZSB0byBzdGFydCBkZWxpdmVyeQ0KCS8vIHRvIHBhdXNlIGRlbGl2ZXJ5IHNldCBhIHByb3BlcnR5IGNhbGxlZCBwYXVzZSBvbiB0aGUgZnVuY3Rpb24gZGVsaXZlciB0byB0cnVlDQoJLy8gcGF1c2FibGUgaXMgb3B0aW9uYWwgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2Ygc2hhZG93aW5nIGEgcHJvcGVydHkgb3IgbWV0aG9kIG9uIGFueSBleGlzdGluZyBjb2RlIGNhbGxlZCBkZWxpdmVyDQoJaWYoIU9iamVjdC5vYnNlcnZlICYmIHR5cGVvZihQcm94eSk9PT0iZnVuY3Rpb24iKSB7DQoJCWZ1bmN0aW9uIE9ic2VydmVyKHRhcmdldCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KSB7DQoJICAgIAl2YXIgbWUgPSB0aGlzLCBwcm94eTsNCgkgICAgCWZ1bmN0aW9uIGRlbGl2ZXIoaWdub3JlUHJldmlvdXMsZGVsYXkpIHsNCgkgICAgCQlkZWxpdmVyLmRlbGF5ID0gZGVsYXk7DQoJICAgIAkJaWYoIWRlbGl2ZXIucGF1c2UpIHsNCgkgICAgICAgIAkJaWYobWUuY2hhbmdlc2V0Lmxlbmd0aD4wKSB7DQoJICAgICAgICAJCQlpZighaWdub3JlUHJldmlvdXMpIHsNCgkJICAgIAkgICAgCQl2YXIgY2hhbmdlcyA9IG1lLmNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiAhYWNjZXB0bGlzdCB8fCBhY2NlcHRsaXN0LmluZGV4T2YoY2hhbmdlLnR5cGUpPj0wOyB9KTsNCgkJICAgICAgICAJCQlpZihjaGFuZ2VzLmxlbmd0aD4wKSB7DQoJCSAgICAgICAgCQkJCWNhbGxiYWNrKGNoYW5nZXMpOw0KCQkgICAgICAgIAkJCX0NCgkgICAgICAgIAkJCX0NCgkgICAgICAgIAkJCW1lLmNoYW5nZXNldCA9IFtdOw0KCSAgICAgICAgCQl9DQoJICAgIAkJfQ0KCSAgICAJfQ0KCSAgICAJZGVsaXZlci5wYXVzZSA9IHBhdXNlOw0KCSAgICAJZGVsaXZlci5kZWxheSA9IGRlbGF5Ow0KCQkgICAgbWUuZ2V0ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eSkgew0KCQkgICAgCWlmKHByb3BlcnR5PT09Il9fb2JzZXJ2ZXJfXyIpIHsNCgkJICAgIAkJcmV0dXJuIG1lOw0KCQkgICAgCX0NCgkJICAgIAlpZihwcm9wZXJ0eT09PSJ1bm9ic2VydmUiKSB7DQoJCSAgICAJCXJldHVybiBmdW5jdGlvbigpIHsNCgkJICAgIAkJCU9iamVjdC51bm9ic2VydmUodGFyZ2V0KTsNCgkJICAgIAkJCXJldHVybiB0YXJnZXQ7DQoJCSAgICAJCX07DQoJCSAgICAJfQ0KCQkgICAgCWlmKHByb3BlcnR5PT09ImRlbGl2ZXIiKSB7DQoJCSAgICAJCXJldHVybiBkZWxpdmVyOw0KCQkgICAgCX0NCgkJICAgIAlyZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTsNCgkJICAgIH0NCgkgICAgCW1lLnRhcmdldCA9IHRhcmdldDsNCgkgICAgCW1lLmNoYW5nZXNldCA9IFtdOw0KCSAgICAJaWYoIW1lLnRhcmdldC5fX29ic2VydmVyQ2FsbGJhY2tzX18pIHsNCgkgICAgCQkvLyBfX29ic2VydmVyQ2FsbGJhY2tzX18gaXMgdXNlZCBhcyBhbiBpbmRleCB0byBnZXQgYXQgdGhlIHByb3h5IHdoaWNoIGlzIHRoZSBvYnNlcnZlciwgc28gd2UgY2FuIHVub2JzZXJ2ZQ0KCSAgICAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIl9fb2JzZXJ2ZXJDYWxsYmFja3NfXyIse2VudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6ZmFsc2UsdmFsdWU6W119KTsNCgkgICAgCQlPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCJfX29ic2VydmVyc19fIix7ZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTpmYWxzZSx2YWx1ZTpbXX0pOw0KCSAgICAJfQ0KCSAgICAJbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5wdXNoKGNhbGxiYWNrKTsNCgkgICAgCW1lLnRhcmdldC5fX29ic2VydmVyc19fLnB1c2godGhpcyk7DQoJICAgIAlwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsbWUpOw0KCSAgICAJZGVsaXZlcihmYWxzZSxkZWxheSk7DQoJICAgIAlyZXR1cm4gcHJveHk7DQoJICAgIH0NCgkJT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGl2ZXIgPSBmdW5jdGlvbigpIHsNCgkJCXJldHVybiB0aGlzLmdldChudWxsLCJkZWxpdmVyIik7DQoJCX0NCgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7IC8vICwgcmVjZWl2ZXINCgkgICAgCXZhciBvbGR2YWx1ZSA9IHRhcmdldFtwcm9wZXJ0eV07DQoJICAgIAl2YXIgdHlwZSA9IChvbGR2YWx1ZT09PXVuZGVmaW5lZCA/ICJhZGQiIDogInVwZGF0ZSIpOw0KCSAgICAJdGFyZ2V0W3Byb3BlcnR5XSA9IHZhbHVlOw0KCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAoIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZih0eXBlKT49MCkpIHsNCgkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZTpwcm9wZXJ0eSx0eXBlOnR5cGV9LA0KCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCgkgICAgICAgIAkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCSAgICAgICAgCWlmKHR5cGU9PT0idXBkYXRlIikgew0KCSAgICAgICAgCQljaGFuZ2Uub2xkVmFsdWUgPSBvbGR2YWx1ZTsNCgkgICAgICAgIAl9DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5kZWxldGVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHkpIHsNCgkgICAgCXZhciBvbGR2YWx1ZSA9IHRhcmdldFtwcm9wZXJ0eV07DQoJICAgIAkvL2lmKHR5cGVvZihvbGR2YWx1ZSkhPT0idW5kZWZpbmVkIikgew0KCQkgICAgCWRlbGV0ZSB0YXJnZXRbcHJvcGVydHldOw0KCQkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigiZGVsZXRlIik+PTApIHsNCgkJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZToiZGVsZXRlIixvbGRWYWx1ZTpvbGR2YWx1ZX0sDQoJCSAgICAgICAgCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCgkJICAgICAgICAJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCQkgICAgICAgIAlpZihzdGFydCkgew0KCQkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkJICAgICAgICAJfQ0KCQkgICAgCX0NCgkgICAgCS8vfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5kZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpIHsNCgkgICAgCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjcmlwdG9yKTsNCgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicmVjb25maWd1cmUiKT49MCkgew0KCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6InJlY29uZmlndXJlIn0sDQogICAgICAgIAkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KICAgICAgICAJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5zZXRQcm90b3R5cGVPZiA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvdG90eXBlKSB7DQoJICAgIAl2YXIgb2xkdmFsdWUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGFyZ2V0KTsNCgkgICAgCU9iamVjdC5zZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSk7DQoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInNldFByb3RvdHlwZSIpPj0wKSB7DQoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6Il9fcHJvdG9fXyIsdHlwZToic2V0UHJvdG90eXBlIixvbGRWYWx1ZTpvbGR2YWx1ZX0sDQogICAgCQkJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KICAgIAkJCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJICAgICAgICAJdGhpcy5jaGFuZ2VzZXQucHVzaChjaGFuZ2UpOw0KCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJICAgICAgICAJCWRlbGl2ZXIoZmFsc2UsKHR5cGVvZihkZWxpdmVyLmRlbGF5KT09PSJudW1iZXIiID8gZGVsaXZlci5kZWxheSA6IDEwKSk7DQoJICAgICAgICAJfQ0KCSAgICAJfQ0KCSAgICAJcmV0dXJuIHRydWU7DQoJICAgIH07DQoJICAgIE9ic2VydmVyLnByb3RvdHlwZS5wcmV2ZW50RXh0ZW5zaW9ucyA9IGZ1bmN0aW9uKHRhcmdldCkgew0KCSAgICAgICAgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHRhcmdldCk7DQoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICF0aGlzLmFjY2VwdGxpc3QgfHwgdGhpcy5hY2NlcHRsaXN0LmluZGV4T2YoInByZXZlbnRFeHRlbnNpb25zIik+PTApIHsNCgkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsdHlwZToicHJldmVudEV4dGVuc2lvbnMifSwNCgkJCQkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQoJCQkJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7DQoJICAgICAgICAJaWYoc3RhcnQpIHsNCgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkgICAgICAgIAl9DQoJICAgIAl9DQoJICAgIAlyZXR1cm4gdHJ1ZTsNCgkgICAgfTsNCgkgICAgT2JqZWN0Lm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgew0KCSAgICAJcmV0dXJuIG5ldyBPYnNlcnZlcihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7DQoJICAgIH07DQoJICAgIE9iamVjdC51bm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2spIHsNCgkgICAgCWlmKG9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18pIHsNCgkgICAgCQlpZighY2FsbGJhY2spIHsNCgkgICAgCQkJb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UoMCxvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLmxlbmd0aCk7DQoJICAgIAkJCW9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZSgwLG9iamVjdC5fX29ic2VydmVyc19fLmxlbmd0aCk7DQoJICAgIAkJCXJldHVybjsNCgkgICAgCQl9DQoJICAgIAkJb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5mb3JFYWNoKGZ1bmN0aW9uKG9ic2VydmVyY2FsbGJhY2ssaSkgew0KCSAgICAJCQlpZihjYWxsYmFjaz09PW9ic2VydmVyY2FsbGJhY2spIHsNCgkgICAgCQkJCW9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18uc3BsaWNlKGksMSk7DQoJICAgIAkJCQlkZWxldGUgb2JqZWN0Ll9fb2JzZXJ2ZXJzX19baV0uY2FsbGJhY2s7DQoJICAgIAkJCQlvYmplY3QuX19vYnNlcnZlcnNfXy5zcGxpY2UoaSwxKTsNCgkgICAgCQkJfQ0KCSAgICAJCX0pOw0KCSAgICAJfQ0KCSAgICB9Ow0KCSAgICBBcnJheS5vYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsNCgkgICAgCWlmKCEob2JqZWN0IGluc3RhbmNlb2YgQXJyYXkpICYmICFBcnJheS5pc0FycmF5KG9iamVjdCkpIHsNCgkgICAgCQl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCBhcmd1bWVudCB0byBBcnJheS5vYnNlcnZlciBpcyBub3QgYW4gQXJyYXkiKTsNCgkgICAgCX0NCiAgICAgICAgICAgIAlhY2NlcHRsaXN0ID0gYWNjZXB0bGlzdCB8fCBbImFkZCIsICJ1cGRhdGUiLCAiZGVsZXRlIiwgInNwbGljZSJdOw0KCSAgICAJdmFyIGFycmF5cHJveHkgPSBuZXcgUHJveHkob2JqZWN0LHtnZXQ6IGZ1bmN0aW9uKHRhcmdldCxwcm9wZXJ0eSkgew0KCSAgICAJCWlmKHByb3BlcnR5PT09InVub2JzZXJ2ZSIpIHsNCgkJICAgIAkJcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7DQoJCSAgICAJCQlpZihjYWxsYmFjaykgew0KCQkgICAgCQkJCXJldHVybiBPYmplY3QudW5vYnNlcnZlKHRhcmdldCxjYWxsYmFjayk7DQoJCSAgICAJCQl9DQoJCSAgICAJCQlyZXR1cm4gdGFyZ2V0LnVub2JzZXJ2ZSgpOw0KCQkgICAgCQl9Ow0KCQkgICAgCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJzcGxpY2UiKSB7DQoJICAgIAkJCXJldHVybiBmdW5jdGlvbihzdGFydCxlbmQpIHsNCgkgICAgCQkJCWlmKHR5cGVvZihzdGFydCkhPT0ibnVtYmVyIiB8fCB0eXBlb2YoZW5kKSE9PSJudW1iZXIiKSB7DQoJICAgIAkJCQkJdGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgdHdvIGFyZ3VtZW50cyB0byBBcnJheSBzcGxpY2UgYXJlIG5vdCBudW1iZXIsIG51bWJlciIpOw0KCSAgICAJCQkJfQ0KCSAgICAJICAgIAkJdmFyIHJlbW92ZWQgPSB0aGlzLnNsaWNlKHN0YXJ0LHN0YXJ0K2VuZCksDQoJICAgIAkgICAgCQkJYWRkZWRDb3VudCA9IChhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50cy5sZW5ndGgtMiA6IDApLA0KCSAgICAJICAgIAkJCWNoYW5nZSA9ICB7b2JqZWN0Om9iamVjdCx0eXBlOiJzcGxpY2UiLGluZGV4OnN0YXJ0LHJlbW92ZWQ6cmVtb3ZlZCxhZGRlZENvdW50OmFkZGVkQ291bnR9Ow0KCSAgICAJICAgIAkJdGFyZ2V0LnNwbGljZS5hcHBseSh0YXJnZXQsYXJndW1lbnRzKTsNCgkgICAgCSAgICAJCWlmKGFjY2VwdGxpc3QuaW5kZXhPZigic3BsaWNlIik+PTApIHsNCgkgICAgCSAgICAJCQl2YXIgc3RhcnQgPSBwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCgkgICAgCSAgICAgICAgCQkJZGVsaXZlciA9IHByb3h5Ll9fb2JzZXJ2ZXJfXy5kZWxpdmVyKCk7DQoJICAgIAkgICAgCQkJcHJveHkuX19vYnNlcnZlcl9fLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7DQoJICAgIAkgICAgCQkJaWYoc3RhcnQpIHsNCgkgICAgCQkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkgICAgCQkgICAgICAgIAl9DQoJICAgIAkgICAgCQl9DQoJICAgIAkgICAgCX0NCgkgICAgCQl9DQoJICAgIAkJaWYocHJvcGVydHk9PT0icHVzaCIpIHsNCgkgICAgCQkJIHJldHVybiBmdW5jdGlvbihpdGVtKSB7DQoJICAgIAkJICAgIAlyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgsMCxpdGVtKTsNCgkgICAgCQkgICAgfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJwb3AiKSB7DQoJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oKSB7DQoJICAgIAkJICAgIAlyZXR1cm4gdGhpcy5zcGxpY2UodGhpcy5sZW5ndGgtMSwxKTsNCgkgICAgCQkgICAgfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJ1bnNoaWZ0Iikgew0KCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsNCiAgICAJCSAgICAJCXJldHVybiB0aGlzLnNwbGljZSgwLDAsaXRlbSk7DQogICAgCQkgICAgCX0NCgkgICAgCQl9DQoJICAgIAkJaWYocHJvcGVydHk9PT0ic2hpZnQiKSB7DQoJICAgIAkJCXJldHVybiBmdW5jdGlvbigpIHsNCgkgICAgCSAgICAJCXJldHVybiB0aGlzLnNwbGljZSgwLDEpOw0KCSAgICAJICAgIAl9DQoJICAgIAkJfQ0KCSAgICAJCXJldHVybiB0YXJnZXRbcHJvcGVydHldOw0KCSAgICAJfX0pOw0KCSAgICAJdmFyIHByb3h5ID0gT2JqZWN0Lm9ic2VydmUoYXJyYXlwcm94eSxmdW5jdGlvbihjaGFuZ2VzZXQpIHsgDQoJICAgIAkJdmFyIGNoYW5nZXMgPSBjaGFuZ2VzZXQuZmlsdGVyKGZ1bmN0aW9uKGNoYW5nZSkgeyByZXR1cm4gY2hhbmdlLm5hbWUhPT0ibGVuZ3RoIiAmJiBjaGFuZ2UubmFtZSE9PSJhZGQiICYmICghYWNjZXB0bGlzdCB8fCBhY2NlcHRsaXN0LmluZGV4T2YoY2hhbmdlLnR5cGUpPj0wKTsgfSk7DQoJICAgIAkJaWYoY2hhbmdlcy5sZW5ndGg+MCkgew0KCSAgICAJCQljYWxsYmFjayhjaGFuZ2VzKTsNCgkgICAgCQl9DQoJICAgIAl9LGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpOw0KCSAgICAJcmV0dXJuIHByb3h5Ow0KCSAgICB9Ow0KCSAgICBBcnJheS51bm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2spIHsNCgkJICByZXR1cm4gb2JqZWN0LnVub2JzZXJ2ZShjYWxsYmFjayk7DQoJICAgIH0NCgl9DQoJT2JqZWN0LmRlZXBPYnNlcnZlID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrLHBhcnRzKSB7DQoNCgkJcGFydHMgPSAocGFydHMgPyBwYXJ0cyA6IFtdKTsNCg0KCQl2YXIgdG9UeXBlTmFtZSA9IGZ1bmN0aW9uKG9iaikgew0KCQkJcmV0dXJuICh7fSkudG9TdHJpbmcuY2FsbChvYmopLm1hdGNoKC9ccyhbYS16QS1aXSspLylbMV0udG9Mb3dlckNhc2UoKQ0KCQl9DQoNCgkJZnVuY3Rpb24gcmVvYnNlcnZlKHZhbHVlLCBwYXJ0cykgew0KCQkJdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7DQoJCQlrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7DQoJCQkJaWYoKHRvVHlwZU5hbWUodmFsdWVba2V5XSkgPT09ICdvYmplY3QnIHx8IHRvVHlwZU5hbWUodmFsdWVba2V5XSkgPT09ICdhcnJheScpICYmICF2YWx1ZVtrZXldLmhhc093blByb3BlcnR5KCdfX29ic2VydmVyc19fJykpIHsNCgkJCQkJdmFyIG5ld3BhcnRzID0gcGFydHMuc2xpY2UoMCk7DQoJCQkJCW5ld3BhcnRzLnB1c2goa2V5KTsNCgkJCQkJdmFsdWVba2V5XSA9IE9iamVjdC5kZWVwT2JzZXJ2ZSh2YWx1ZVtrZXldLGNhbGxiYWNrLG5ld3BhcnRzKTsNCgkJCQl9DQoJCQl9KTsNCgkJfQ0KDQoJCXJlb2JzZXJ2ZShvYmplY3QsIHBhcnRzKTsNCg0KCQl2YXIgb2JzZXJ2ZWQgPSBPYmplY3Qub2JzZXJ2ZShvYmplY3QsZnVuY3Rpb24oY2hhbmdlc2V0KSB7DQoJCQl2YXIgY2hhbmdlcyA9IFtdOw0KCQkJZnVuY3Rpb24gcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0LG5ld09iamVjdCxwYXRoKSB7DQoJCQkJaWYobmV3T2JqZWN0IGluc3RhbmNlb2YgT2JqZWN0KSB7DQoJCQkJCXZhciBuZXdrZXlzID0gT2JqZWN0LmtleXMobmV3T2JqZWN0KTsNCgkJCQkJbmV3a2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgew0KCQkJCQkJaWYoIW9sZE9iamVjdCB8fCAob2xkT2JqZWN0W2tleV0hPT1uZXdPYmplY3Rba2V5XSkpIHsNCgkJCQkJCQl2YXIgb2xkdmFsdWUgPSAob2xkT2JqZWN0ICYmIG9sZE9iamVjdFtrZXldIT09dW5kZWZpbmVkID8gb2xkT2JqZWN0W2tleV0gOiB1bmRlZmluZWQpLA0KCQkJCQkJCQljaGFuZ2UgPSAob2xkdmFsdWU9PT11bmRlZmluZWQgPyAiYWRkIiA6ICJ1cGRhdGUiKSwNCgkJCQkJCQkJa2V5cGF0aCA9IHBhdGggKyAiLiIgKyBrZXk7DQoNCgkJCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGR2YWx1ZSxuZXdWYWx1ZTpuZXdPYmplY3Rba2V5XSxrZXlwYXRoOmtleXBhdGh9KTsNCgkJCQkJCQlyZWN1cnNlKG5hbWUscm9vdE9iamVjdCxvbGR2YWx1ZSxuZXdPYmplY3Rba2V5XSxrZXlwYXRoKTsNCgkJCQkJCX0NCgkJCQkJfSk7DQoJCQkJfSBlbHNlIGlmKG9sZE9iamVjdCBpbnN0YW5jZW9mIE9iamVjdCkgew0KCQkJCQl2YXIgb2xka2V5cyA9IE9iamVjdC5rZXlzKG9sZE9iamVjdCk7DQoJCQkJCW9sZGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsNCgkJCQkJCXZhciBjaGFuZ2UgPSAobmV3T2JqZWN0PT09bnVsbCA/ICJ1cGRhdGUiIDogImRlbGV0ZSIpLA0KCQkJCQkJCWtleXBhdGggPSBwYXRoICsgIi4iICsga2V5Ow0KCQkJCQkJCQ0KCQkJCQkJY2hhbmdlcy5wdXNoKHtuYW1lOm5hbWUsb2JqZWN0OnJvb3RPYmplY3QsdHlwZTpjaGFuZ2Usb2xkVmFsdWU6b2xkT2JqZWN0W2tleV0sbmV3VmFsdWU6bmV3T2JqZWN0LGtleXBhdGg6a2V5cGF0aH0pOw0KCQkJCQkJcmVjdXJzZShuYW1lLHJvb3RPYmplY3Qsb2xkT2JqZWN0W2tleV0sdW5kZWZpbmVkLGtleXBhdGgpOw0KCQkJCQl9KTsNCgkJCQl9DQoJCQl9DQoJCQljaGFuZ2VzZXQuZm9yRWFjaChmdW5jdGlvbihjaGFuZ2UpIHsNCgkJCQl2YXIga2V5cGF0aCA9IChwYXJ0cy5sZW5ndGg+MCA/IHBhcnRzLmpvaW4oIi4iKSArICIuIiA6ICIiKSArIGNoYW5nZS5uYW1lOw0KDQoJCQkJaWYgKGNoYW5nZS50eXBlID09PSAidXBkYXRlIiB8fCBjaGFuZ2UudHlwZSA9PT0gImFkZCIpIHsgDQoJCQkJCXJlb2JzZXJ2ZShjaGFuZ2Uub2JqZWN0LCBwYXJ0cyk7DQoJCQkJfQ0KDQoJCQkJY2hhbmdlcy5wdXNoKHtuYW1lOmNoYW5nZS5uYW1lLG9iamVjdDpjaGFuZ2Uub2JqZWN0LHR5cGU6Y2hhbmdlLnR5cGUsb2xkVmFsdWU6Y2hhbmdlLm9sZFZhbHVlLG5ld1ZhbHVlOmNoYW5nZS5vYmplY3RbY2hhbmdlLm5hbWVdLGtleXBhdGg6a2V5cGF0aH0pOw0KCQkJCXJlY3Vyc2UoY2hhbmdlLm5hbWUsY2hhbmdlLm9iamVjdCxjaGFuZ2Uub2xkVmFsdWUsY2hhbmdlLm9iamVjdFtjaGFuZ2UubmFtZV0sa2V5cGF0aCk7DQoJCQl9KTsNCgkJCWNhbGxiYWNrKGNoYW5nZXMpOw0KCQl9KTsNCgkJcmV0dXJuIG9ic2VydmVkOw0KCX07DQp9KSgpOw0KCgovKioqLyB9KSwKLyogMTIwICovLAovKiAxMjEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOwoKdmFyIF9rZXlzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2tleXMpOwoKdmFyIF9nZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpOwoKdmFyIF9nZXRQcm90b3R5cGVPZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRQcm90b3R5cGVPZik7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwoKdmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTsKCnZhciBfZ2V0MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTI2KTsKCnZhciBfZ2V0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldDIpOwoKdmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTsKCnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTsKCnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCnZhciBfRGF0YU9iamVjdDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyk7Cgp2YXIgX0RhdGFPYmplY3QzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdDIpOwoKdmFyIF9EYXRhT2JqZWN0Q2hpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7Cgp2YXIgX0RhdGFPYmplY3RDaGlsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Q2hpbGQpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCnZhciBGaWx0ZXJUeXBlID0geyBBTlk6ICdhbnknLCBTVEFSVDogJ3N0YXJ0JywgRVhBQ1Q6ICdleGFjdCcgfTsKCi8qKg0KICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIFN5bmNoZXIgc3Vic2NyaWJlIGNhbGwuDQogKiBUbyBiZSB1c2VkIGFzIGFuIG9ic2VydmF0aW9uIHBvaW50IGZyb20gYSBEYXRhT2JqZWN0UmVwb3J0ZXIgY2hhbmdlLg0KICovCi8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLwoKdmFyIERhdGFPYmplY3RPYnNlcnZlciA9IGZ1bmN0aW9uIChfRGF0YU9iamVjdCkgewogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlciwgX0RhdGFPYmplY3QpOwoKICAvKiBwcml2YXRlDQogIF9jaGFuZ2VMaXN0ZW5lcjogTXNnTGlzdGVuZXINCiAgICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9maWx0ZXJzOiB7PGZpbHRlcj46IHt0eXBlOiA8c3RhcnQsIGV4YWN0PiwgY2FsbGJhY2s6IDxmdW5jdGlvbj59IH0NCiAgKi8KCiAgLyoqDQogICAqIEBpZ25vcmUNCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIuc3Vic2NyaWJlIG1ldGhvZA0KICAgKi8KCiAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogIGZ1bmN0aW9uIERhdGFPYmplY3RPYnNlcnZlcihpbnB1dCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdE9ic2VydmVyKTsKCiAgICB2YXIgX3RoaXMyID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCAoRGF0YU9iamVjdE9ic2VydmVyLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIpKS5jYWxsKHRoaXMsIGlucHV0KSk7CiAgICAvL3RvZG86IGNoZWNrIHdoeQogICAgLy9pbnB1dC5pbml0aWFsRGF0YSA9IGlucHV0LmluaXRpYWxEYXRhLmRhdGE7CgogICAgdmFyIF90aGlzID0gX3RoaXMyOwoKICAgIF90aGlzLl92ZXJzaW9uID0gaW5wdXQudmVyc2lvbjsKICAgIF90aGlzLl9maWx0ZXJzID0ge307CgogICAgX3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgX3RoaXMuX29uRmlsdGVyKGV2ZW50KTsKICAgIH0pOwoKICAgIC8qDQogICAgICBsZXQgY2hpbGRJZFN0cmluZyA9IF90aGlzLl9vd25lciArICcjJyArIF90aGlzLl9jaGlsZElkOw0KICAgICAgLy9zZXR1cCBjaGlsZHJlbnMgZGF0YSBmcm9tIHN1YnNjcmlwdGlvbg0KICAgIGlmIChpbnB1dC5jaGlsZHJlbk9iamVjdHMpIHsNCiAgICAgIE9iamVjdC5rZXlzKGlucHV0LmNoaWxkcmVuT2JqZWN0cykuZm9yRWFjaCgoY2hpbGRyZW5SZXNvdXJjZSkgPT4gew0KICAgICAgICBsZXQgY2hpbGRyZW4gPSBpbnB1dC5jaGlsZHJlbk9iamVjdHNbY2hpbGRyZW5SZXNvdXJjZV07DQogICAgICAgIGNvbnNvbGUubG9nKCdbRGF0YU9iamVjdE9ic2VydmVyIC0gbmV3IERhdGFPYmplY3RDaGlsZF06ICcsIGNoaWxkcmVuUmVzb3VyY2UsIGNoaWxkcmVuLCBfdGhpcy5fcmVzdW1lZCk7DQogICAgICAgIGlmIChfdGhpcy5fcmVzdW1lZCkgew0KICAgICAgICAgICAgLy8gaWYgaXMgcmVzdW1lZA0KICAgICAgICAgIE9iamVjdC5rZXlzKGNoaWxkcmVuKS5mb3JFYWNoKChjaGlsZElkKSA9PiB7DQogICAgICAgICAgICBsZXQgY2hpbGRJbnB1dCA9IGRlZXBDbG9uZShjaGlsZHJlbltjaGlsZElkXS52YWx1ZSk7DQogICAgICAgICAgICBjaGlsZElucHV0LnBhcmVudE9iamVjdCA9IF90aGlzOw0KICAgICAgICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXSA9IG5ldyBEYXRhT2JqZWN0Q2hpbGQoY2hpbGRJbnB1dCk7DQogICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdLmlkZW50aXR5ID0gY2hpbGRyZW5bY2hpbGRJZF0uaWRlbnRpdHk7DQogICAgICAgICAgICAgIGlmIChjaGlsZElkID4gY2hpbGRJZFN0cmluZykgew0KICAgICAgICAgICAgICBjaGlsZElkU3RyaW5nID0gY2hpbGRJZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0T2JzZXJ2ZXIgLSBuZXcgRGF0YU9iamVjdENoaWxkXSAtIHJlc3VtZWQ6ICcsIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgLy8gaWYgaXMgbm90IHJlc3VtZWQNCiAgICAgICAgICAvL3RvZG86IHNob3VsZG4ndCB3ZSBpdGVyYXRlIGZvciBhbGwgZXhpc3RpbmcgY2hpbGRzIGluIG9yZGVyIHRvIHJlY2VpdmUgYWxsIGNoaWxkcyBiZWZvcmUgdGhlIHN1YnNjcmlwdGlvbj8NCiAgICAgICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRyZW5SZXNvdXJjZV0gPSBuZXcgRGF0YU9iamVjdENoaWxkKF90aGlzLCBjaGlsZHJlblJlc291cmNlLCBjaGlsZHJlbik7DQogICAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0T2JzZXJ2ZXIgLSBuZXcgRGF0YU9iamVjdENoaWxkXSAtIG5vdCByZXN1bWVkOiAnLCBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkcmVuUmVzb3VyY2VdKTsNCiAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgICBfdGhpcy5fY2hpbGRJZCA9IE51bWJlcihjaGlsZElkU3RyaW5nLnNwbGl0KCcjJylbMV0pOyovCgogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlKSwgJ19hbGxvY2F0ZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY2hhbmdlTGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwgKyAnL2NoYW5nZXMnLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgaWYgKG1zZy50eXBlID09PSAndXBkYXRlJykgewogICAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOwogICAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChfdGhpcy5fc3luY09iaiwgbXNnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgKDAsIF9nZXQzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlci5wcm90b3R5cGUpLCAnX3JlbGVhc2VMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyLnJlbW92ZSgpOwogICAgfQoKICAgIC8qKg0KICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICBkZWxldGUgX3RoaXMuX3N5bmNoZXIuX29ic2VydmVyc1tfdGhpcy5fdXJsXTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGENCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAndW5zdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25Mb2NhbFVuU3Vic2NyaWJlCiAgICAgIHZhciB1blN1YnNjcmliZU1zZyA9IHsKICAgICAgICB0eXBlOiAndW5zdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLAogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQogICAgICB9OwoKICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh1blN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogJywgcmVwbHkpOwogICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fb2JzZXJ2ZXJzW190aGlzLl91cmxdOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqDQogICAgICogUmVnaXN0ZXIgdGhlIGNoYW5nZSBsaXN0ZW5lcnMgc2VudCBieSB0aGUgcmVwb3J0ZXINCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIC0gRmlsdGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgZmllbGQgKHNlcGFyYXRlZCBkb3QgcGF0aCkuIEFjY2VwdHMgKiBhdCB0aGUgZW5kIGZvciBhIG1vcmUgdW5yZXN0cmljdGVkIGZpbHRlcmluZy4NCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uQ2hhbmdlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShmaWx0ZXIsIGNhbGxiYWNrKSB7CiAgICAgIHZhciBrZXkgPSBmaWx0ZXI7CiAgICAgIHZhciBmaWx0ZXJPYmogPSB7CiAgICAgICAgdHlwZTogRmlsdGVyVHlwZS5FWEFDVCwKICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sKICAgICAgfTsKCiAgICAgIHZhciBpZHggPSBmaWx0ZXIuaW5kZXhPZignKicpOwogICAgICBpZiAoaWR4ID09PSBmaWx0ZXIubGVuZ3RoIC0gMSkgewogICAgICAgIGlmIChpZHggPT09IDApIHsKICAgICAgICAgIGZpbHRlck9iai50eXBlID0gRmlsdGVyVHlwZS5BTlk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZpbHRlck9iai50eXBlID0gRmlsdGVyVHlwZS5TVEFSVDsKICAgICAgICAgIGtleSA9IGZpbHRlci5zdWJzdHIoMCwgZmlsdGVyLmxlbmd0aCAtIDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fZmlsdGVyc1trZXldID0gZmlsdGVyT2JqOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkZpbHRlcicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRmlsdGVyKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAoMCwgX2tleXMyLmRlZmF1bHQpKF90aGlzLl9maWx0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgZmlsdGVyID0gX3RoaXMuX2ZpbHRlcnNba2V5XTsKICAgICAgICBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuQU5ZKSB7CiAgICAgICAgICAvL21hdGNoIGFueXRoaW5nCiAgICAgICAgICBmaWx0ZXIuY2FsbGJhY2soZXZlbnQpOwogICAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLnR5cGUgPT09IEZpbHRlclR5cGUuU1RBUlQpIHsKICAgICAgICAgIC8vaWYgc3RhcnRzIHdpdGggZmlsdGVyLi4uCiAgICAgICAgICBpZiAoZXZlbnQuZmllbGQuaW5kZXhPZihrZXkpID09PSAwKSB7CiAgICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXIudHlwZSA9PT0gRmlsdGVyVHlwZS5FWEFDVCkgewogICAgICAgICAgLy9leGFjdCBtYXRjaAogICAgICAgICAgaWYgKGV2ZW50LmZpZWxkID09PSBrZXkpIHsKICAgICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH1dKTsKICByZXR1cm4gRGF0YU9iamVjdE9ic2VydmVyOwp9KF9EYXRhT2JqZWN0My5kZWZhdWx0IC8qIGltcGxlbWVudHMgU3luY1N0YXR1cyAqLyk7CgpleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0T2JzZXJ2ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEyMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7Cgp2YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7Cgp2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7Cgp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOwoKdmFyIF9nZXQyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjYpOwoKdmFyIF9nZXQzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0Mik7Cgp2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOwoKdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOwoKdmFyIF9EYXRhT2JqZWN0MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCnZhciBfRGF0YU9iamVjdDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Mik7Cgp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKCnZhciBfRGF0YU9iamVjdENoaWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RDaGlsZCk7Cgp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqDQogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgU3luY2hlciBjcmVhdGUgY2FsbC4NCiAqIFRvIGJlIHVzZWQgYXMgYSByZXBvcnRlciBwb2ludCwgY2hhbmdlcyB3aWxsIGJlIHN1Ym1pdGVkIHRvIERhdGFPYmplY3RPYnNlcnZlciBpbnN0YW5jZXMuDQogKi8KdmFyIERhdGFPYmplY3RSZXBvcnRlciA9IGZ1bmN0aW9uIChfRGF0YU9iamVjdCkgewogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlciwgX0RhdGFPYmplY3QpOwoKICAvKiBwcml2YXRlDQogIF9zdWJzY3JpcHRpb25zOiA8aHlwZXJ0eVVybDogeyBzdGF0dXM6IHN0cmluZyB9IH0+DQogICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQ0KICBfb25TdWJzY3JpcHRpb25IYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgX29uUmVzcG9uc2VIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgX29uUmVhZEhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICAqLwoKICAvKioNCiAgICogQGlnbm9yZQ0KICAgKiBTaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkgYnkgSHlwZXJ0aWVzLiBJdCdzIGNhbGxlZCBieSB0aGUgU3luY2hlci5jcmVhdGUgbWV0aG9kDQogICAqLwoKICAvL2NvbnN0cnVjdG9yKHN5bmNoZXIsIHVybCwgY3JlYXRlZCwgcmVwb3J0ZXIsIHJ1bnRpbWUsIHNjaGVtYSwgbmFtZSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucywgbXV0dWFsID0gdHJ1ZSwgcmVzdW1lZCA9IGZhbHNlLCBkZXNjcmlwdGlvbiwgdGFncywgcmVzb3VyY2VzLCBvYnNlcnZlclN0b3JhZ2UsIHB1YmxpY09ic2VydmF0aW9uKSB7CiAgZnVuY3Rpb24gRGF0YU9iamVjdFJlcG9ydGVyKGlucHV0KSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0UmVwb3J0ZXIpOwoKICAgIHZhciBfdGhpczIgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zLmRlZmF1bHQpKHRoaXMsIChEYXRhT2JqZWN0UmVwb3J0ZXIuX19wcm90b19fIHx8ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlcikpLmNhbGwodGhpcywgaW5wdXQpKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CgogICAgX3RoaXMuX3N1YnNjcmlwdGlvbnMgPSB7fTsKCiAgICBfdGhpcy5fc3luY09iai5vYnNlcnZlKGZ1bmN0aW9uIChldmVudCkgewogICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLScgKyBpbnB1dC51cmwgKyAnLVNFTkQ6ICcsIGV2ZW50KTsKICAgICAgX3RoaXMuX29uQ2hhbmdlKGV2ZW50KTsKICAgIH0pOwoKICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwogICAgcmV0dXJuIF90aGlzMjsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RSZXBvcnRlciwgW3sKICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgewogICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksICdfYWxsb2NhdGVMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX29iamVjdExpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3QtJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTsKICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgICAgICBjYXNlICdyZXNwb25zZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlc3BvbnNlKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICdyZWFkJzoKICAgICAgICAgICAgX3RoaXMuX29uUmVhZChtc2cpO2JyZWFrOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLnByb3RvdHlwZSksICdfcmVsZWFzZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fb2JqZWN0TGlzdGVuZXIucmVtb3ZlKCk7CiAgICB9CgogICAgLyoqDQogICAgICoNCiAgICAgKi8KICAgIC8qICByZXN1bWVDaGlsZHJlbnMoY2hpbGRyZW5zKSB7DQogICAgICAgIGxldCBfdGhpcyA9IHRoaXM7DQogICAgDQogICAgICAgIGxldCBjaGlsZElkU3RyaW5nID0gdGhpcy5fb3duZXIgKyAnIycgKyB0aGlzLl9jaGlsZElkOw0KICAgIA0KICAgICAgICAvL3NldHVwIGNoaWxkcmVucyBkYXRhIGZyb20gc3Vic2NyaXB0aW9uDQogICAgICAgIE9iamVjdC5rZXlzKGNoaWxkcmVucykuZm9yRWFjaCgoY2hpbGRyZW5SZXNvdXJjZSkgPT4gew0KICAgICAgICAgIGxldCBjaGlsZHJlbiA9IGNoaWxkcmVuc1tjaGlsZHJlblJlc291cmNlXTsNCiAgICANCiAgICAgICAgICAvLyBpZiBpcyByZXN1bWVkDQogICAgICAgICAgT2JqZWN0LmtleXMoY2hpbGRyZW4pLmZvckVhY2goKGNoaWxkSWQpID0+IHsNCiAgICAgICAgICAgIGxldCBjaGlsZElucHV0ID0gY2hpbGRyZW5bY2hpbGRJZF0udmFsdWU7DQogICAgICAgICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3RSZXBvcnRlci5yZXN1bWVDaGlsZHJlbnNdIG5ldyBEYXRhT2JqZWN0Q2hpbGQ6ICcsIGNoaWxkcmVuUmVzb3VyY2UsIGNoaWxkcmVuLCBjaGlsZElucHV0KTsNCiAgICAgICAgICAgIGNoaWxkSW5wdXQucGFyZW50T2JqZWN0ID0gX3RoaXM7DQogICAgICAgICAgICBjaGlsZElucHV0LnBhcmVudCA9IF90aGlzLl91cmw7DQogICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdID0gbmV3IERhdGFPYmplY3RDaGlsZChjaGlsZElucHV0KTsNCiAgICAgICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0uaWRlbnRpdHkgPSBjaGlsZHJlbltjaGlsZElkXS5pZGVudGl0eTsNCiAgICANCiAgICAgICAgICAgIGlmIChjaGlsZElkID4gY2hpbGRJZFN0cmluZykgew0KICAgICAgICAgICAgICBjaGlsZElkU3RyaW5nID0gY2hpbGRJZDsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGF0YU9iamVjdFJlcG9ydGVyLnJlc3VtZUNoaWxkcmVuc10gLSByZXN1bWVkOiAnLCB0aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICANCiAgICAgICAgdGhpcy5fY2hpbGRJZCA9IE51bWJlcihjaGlsZElkU3RyaW5nLnNwbGl0KCcjJylbMV0pOw0KICAgICAgfSovCgogICAgLyoqDQogICAgICogU2VuZCBpbnZpdGF0aW9ucyAoY3JlYXRlIG1lc3NhZ2VzKSB0byBoeXBlcnRpZXMsIG9ic2VydmVycyBsaXN0Lg0KICAgICAqIEBwYXJhbSAge0h5cGVydHlVUkxbXX0gb2JzZXJ2ZXJzIExpc3Qgb2YgSHlwZXJ0eSBVUkwncw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdpbnZpdGVPYnNlcnZlcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGludml0ZU9ic2VydmVycyhvYnNlcnZlcnMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlCiAgICAgIC8vIFRPRE86IHJlbW92ZSB2YWx1ZSBhbmQgYWRkIHJlc291cmNlcz8gc2hvdWxkIHNpbWlsYXIgdG8gMXN0IGNyZWF0ZQogICAgICB2YXIgaW52aXRlTXNnID0gewogICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fc3luY2hlci5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLAogICAgICAgIGJvZHk6IHsgcmVzdW1lOiBmYWxzZSwgcmVzb3VyY2U6IF90aGlzLl91cmwsIHNjaGVtYTogX3RoaXMuX3NjaGVtYSwgdmFsdWU6IF90aGlzLl9zeW5jT2JqLmRhdGEsIGF1dGhvcmlzZTogb2JzZXJ2ZXJzIH0KICAgICAgfTsKCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoaW52aXRlTXNnKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGENCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25EZWxldGUKICAgICAgdmFyIGRlbGV0ZU1zZyA9IHsKICAgICAgICB0eXBlOiAnZGVsZXRlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogX3RoaXMuX3N5bmNoZXIuX3N1YlVSTCwKICAgICAgICBib2R5OiB7IHJlc291cmNlOiBfdGhpcy5fdXJsIH0KICAgICAgfTsKCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoZGVsZXRlTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdFJlcG9ydGVyLURFTEVURTogJywgcmVwbHkpOwogICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fcmVwb3J0ZXJzW190aGlzLl91cmxdOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqDQogICAgICogU3Vic2NyaXB0aW9ucyByZXF1ZXN0ZWQgYW5kIGFjY2VwdGVkIHRvIHRoaXMgcmVwb3J0ZXINCiAgICAgKiBAdHlwZSB7T2JqZWN0PEh5cGVydHlVUkwsIFN5bmNTdWJzY3JpcHRpb24+fQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblN1YnNjcmlwdGlvbicsCgoKICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHN1YnNjcmliZSBhbmQgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9ucw0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHMNCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1YnNjcmlwdGlvbihjYWxsYmFjaykgewogICAgICB0aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvKioNCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZXNwb25zZSBub3RpZmljYXRpb25zIG9mIHRoZSBjcmVhdGUncw0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHMNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25SZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXNwb25zZShjYWxsYmFjaykgewogICAgICB0aGlzLl9vblJlc3BvbnNlSGFuZGxlciA9IGNhbGxiYWNrOwogICAgfQoKICAgIC8qKg0KICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlYWQgbm90aWZpY2F0aW9ucw0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25SZWFkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlYWQoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25SZWFkSGFuZGxlciA9IGNhbGxiYWNrOwogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHBhcmVudCBTeW5jaGVyIC0+IF9vbkZvcndhcmQKCiAgfSwgewogICAga2V5OiAnX29uRm9yd2FyZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRm9yd2FyZChtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItUkNWOiAnLCBtc2cpOwogICAgICBzd2l0Y2ggKG1zZy5ib2R5LnR5cGUpIHsKICAgICAgICBjYXNlICdzdWJzY3JpYmUnOgogICAgICAgICAgX3RoaXMuX29uU3Vic2NyaWJlKG1zZyk7YnJlYWs7CiAgICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgICAgX3RoaXMuX29uVW5TdWJzY3JpYmUobXNnKTticmVhazsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIHRoaXMgLT4gX29uRm9yd2FyZDogZW1pdHRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IHN1YnNjcmliZQoKICB9LCB7CiAgICBrZXk6ICdfb25TdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgaHlwZXJ0eVVybCA9IG1zZy5ib2R5LmZyb207CiAgICAgIGNvbnNvbGUubG9nKCdbRGF0YU9iamVjdFJlcG9ydGVyLl9vblN1YnNjcmliZV0nLCBtc2cpOwoKICAgICAgdmFyIGV2ZW50ID0gewogICAgICAgIHR5cGU6IG1zZy5ib2R5LnR5cGUsCiAgICAgICAgdXJsOiBoeXBlcnR5VXJsLAoKICAgICAgICBpZGVudGl0eTogbXNnLmJvZHkuaWRlbnRpdHksCgogICAgICAgIGFjY2VwdDogZnVuY3Rpb24gYWNjZXB0KCkgewogICAgICAgICAgLy9jcmVhdGUgbmV3IHN1YnNjcmlwdGlvbgogICAgICAgICAgdmFyIHN1YiA9IHsgdXJsOiBoeXBlcnR5VXJsLCBzdGF0dXM6ICdsaXZlJyB9OwogICAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF0gPSBzdWI7CgogICAgICAgICAgLy9wcm9jZXNzIGFuZCBzZW5kIGNoaWxkcmVucyBkYXRhCiAgICAgICAgICB2YXIgY2hpbGRyZW5WYWx1ZXMgPSB7fTsKICAgICAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoX3RoaXMuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRyZW5JZCkgewogICAgICAgICAgICB2YXIgY2hpbGRyZW5EYXRhID0gX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZHJlbklkXS5kYXRhOwogICAgICAgICAgICBjaGlsZHJlblZhbHVlc1tjaGlsZHJlbklkXSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShjaGlsZHJlbkRhdGEpOwogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIG1zZ1ZhbHVlID0gX3RoaXMuX21ldGFkYXRhOwogICAgICAgICAgbXNnVmFsdWUuY2hpbGRyZW5PYmplY3RzID0gY2hpbGRyZW5WYWx1ZXM7CiAgICAgICAgICBtc2dWYWx1ZS5kYXRhID0gKDAsIF91dGlscy5kZWVwQ2xvbmUpKF90aGlzLmRhdGEpOwogICAgICAgICAgbXNnVmFsdWUudmVyc2lvbiA9IF90aGlzLl92ZXJzaW9uOwoKICAgICAgICAgIHZhciBzZW5kTXNnID0gewogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHNjaGVtYTogX3RoaXMuX3NjaGVtYSwgdmFsdWU6IG1zZ1ZhbHVlIH0KICAgICAgICAgIH07CgogICAgICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgICAgaWYgKG1zZy5ib2R5Lmhhc093blByb3BlcnR5KCdtdXR1YWxBdXRoZW50aWNhdGlvbicpICYmICFtc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbikgewogICAgICAgICAgICBzZW5kTXNnLmJvZHkubXV0dWFsQXV0aGVudGljYXRpb24gPSBfdGhpczMuX211dHVhbEF1dGhlbnRpY2F0aW9uOwogICAgICAgICAgICBfdGhpczMuX211dHVhbEF1dGhlbnRpY2F0aW9uID0gbXNnLmJvZHkubXV0dWFsQXV0aGVudGljYXRpb247CiAgICAgICAgICB9CgogICAgICAgICAgLy9zZW5kIG9rIHJlc3BvbnNlIG1lc3NhZ2UKICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2Uoc2VuZE1zZyk7CgogICAgICAgICAgcmV0dXJuIHN1YjsKICAgICAgICB9LAoKICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHsKICAgICAgICAgIC8vc2VuZCByZWplY3QgcmVzcG9uc2UgbWVzc2FnZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwMywgZGVzYzogcmVhc29uIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1NVQlNDUklQVElPTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIoZXZlbnQpOwogICAgICB9CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gdGhpcyAtPiBfb25Gb3J3YXJkOiBlbWl0dGVkIGJ5IGEgcmVtb3RlIERhdGFPYmplY3RPYnNlcnZlciAtPiB1bnN1YnNjcmliZQoKICB9LCB7CiAgICBrZXk6ICdfb25VblN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uVW5TdWJzY3JpYmUobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBoeXBlcnR5VXJsID0gbXNnLmJvZHkuZnJvbTsKCiAgICAgIHZhciBzdWIgPSBfdGhpcy5fc3Vic2NyaXB0aW9uc1toeXBlcnR5VXJsXTsKICAgICAgZGVsZXRlIF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdOwoKICAgICAgdmFyIGV2ZW50ID0gewogICAgICAgIHR5cGU6IG1zZy5ib2R5LnR5cGUsCiAgICAgICAgdXJsOiBoeXBlcnR5VXJsLAogICAgICAgIG9iamVjdDogc3ViCiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcikgewogICAgICAgIGNvbnNvbGUubG9nKCdVTi1TVUJTQ1JJUFRJT04tRVZFTlQ6ICcsIGV2ZW50KTsKICAgICAgICBfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKGV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIFJlcG9ydGVyVVJMIGFkZHJlc3M6IGVtaXRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IF9vblJlbW90ZUNyZWF0ZSAtPiBldmVudC5hY2sKCiAgfSwgewogICAga2V5OiAnX29uUmVzcG9uc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlc3BvbnNlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGV2ZW50ID0gewogICAgICAgIHR5cGU6IG1zZy50eXBlLAogICAgICAgIHVybDogbXNnLmZyb20sCiAgICAgICAgY29kZTogbXNnLmJvZHkuY29kZQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcikgewogICAgICAgIGNvbnNvbGUubG9nKCdSRVNQT05TRS1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBSZXBvcnRlclVSTCBhZGRyZXNzOiBlbWl0ZWQgYnkgYSByZW1vdGUgU3luY2hlciAtPiByZWFkCgogIH0sIHsKICAgIGtleTogJ19vblJlYWQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vblJlYWQobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgdXJsOiBtc2cuZnJvbSwKCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQoKSB7CiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogMjAwLCB2YWx1ZTogKDAsIF91dGlscy5kZWVwQ2xvbmUpKF90aGlzLmRhdGEpIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikgewogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwMSwgZGVzYzogcmVhc29uIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25SZWFkSGFuZGxlcikgewogICAgICAgIGNvbnNvbGUubG9nKCdSRUFELUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uUmVhZEhhbmRsZXIoZXZlbnQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnc3Vic2NyaXB0aW9ucycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmlwdGlvbnM7CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhT2JqZWN0UmVwb3J0ZXI7Cn0oX0RhdGFPYmplY3QzLmRlZmF1bHQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovKTsgLyoqDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiovCgpleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0UmVwb3J0ZXI7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEyMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9wcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7Cgp2YXIgX3Byb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvbWlzZSk7Cgp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCnZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpOwoKdmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX1Byb3h5T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjQpOwoKdmFyIF9Qcm94eU9iamVjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Qcm94eU9iamVjdCk7Cgp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKCnZhciBfRGF0YU9iamVjdENoaWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RDaGlsZCk7Cgp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqDQogKiBNYWluIGV4dGVuc2lvbiBjbGFzcyBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMsIHdpdGggY29tbW9uIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuDQogKiBDaGlsZHJlbiBtYW5hZ2VtZW50IGlzIGNvbW1vbiBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMuDQogKi8KdmFyIERhdGFPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQ0KICBfdmVyc2lvbjogbnVtYmVyDQogICAgX293bmVyOiBIeXBlcnR5VVJMDQogIF91cmw6IE9iamVjdFVSTA0KICBfc2NoZW1hOiBTY2hlbWENCiAgX2J1czogTWluaUJ1cw0KICBfc3RhdHVzOiBvbiB8IHBhdXNlZA0KICBfc3luY09iajogU3luY0RhdGENCiAgICBfY2hpbGRyZW46IHsgaWQ6IERhdGFPYmplY3RDaGlsZCB9DQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQ0KICAgIC0tLS1ldmVudCBoYW5kbGVycy0tLS0NCiAgX29uQWRkQ2hpbGRIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQNCiAgKi8KCiAgLyoqDQogICAqIEBpZ25vcmUNCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIgY3JlYXRlIG9yIHN1YnNjcmliZSBtZXRob2Qncw0KICAgKi8KICAvL2NvbnN0cnVjdG9yKHN5bmNoZXIsIHVybCwgY3JlYXRlZCwgcmVwb3J0ZXIsIHJ1bnRpbWUsIHNjaGVtYSwgbmFtZSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucywgbXV0dWFsID0gdHJ1ZSwgcmVzdW1lZCA9IGZhbHNlLCBkZXNjcmlwdGlvbiwgdGFncywgcmVzb3VyY2VzLCBvYnNlcnZlclN0b3JhZ2UsIHB1YmxpY09ic2VydmF0aW9uKSB7CiAgZnVuY3Rpb24gRGF0YU9iamVjdChpbnB1dCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBmdW5jdGlvbiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IocGFyKSB7CiAgICAgIHRocm93ICdbRGF0YU9iamVjdF0gJyArIHBhciArICcgbWFuZGF0b3J5IHBhcmFtZXRlciBpcyBtaXNzaW5nJzsKICAgIH0KCiAgICBpbnB1dC5zeW5jaGVyID8gX3RoaXMuX3N5bmNoZXIgPSBpbnB1dC5zeW5jaGVyIDogdGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKCdzeW5jaGVyJyk7CiAgICBpbnB1dC51cmwgPyBfdGhpcy5fdXJsID0gaW5wdXQudXJsIDogdGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKCd1cmwnKTsKICAgIGlucHV0LmNyZWF0ZWQgPyBfdGhpcy5fY3JlYXRlZCA9IGlucHV0LmNyZWF0ZWQgOiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoJ2NyZWF0ZWQnKTsKICAgIGlucHV0LnJlcG9ydGVyID8gX3RoaXMuX3JlcG9ydGVyID0gaW5wdXQucmVwb3J0ZXIgOiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoJ3JlcG9ydGVyJyk7CiAgICBpbnB1dC5ydW50aW1lID8gX3RoaXMuX3J1bnRpbWUgPSBpbnB1dC5ydW50aW1lIDogdGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKCdydW50aW1lJyk7CiAgICBpbnB1dC5zY2hlbWEgPyBfdGhpcy5fc2NoZW1hID0gaW5wdXQuc2NoZW1hIDogdGhyb3dNYW5kYXRvcnlQYXJtTWlzc2luZ0Vycm9yKCdzY2hlbWEnKTsKICAgIGlucHV0Lm5hbWUgPyBfdGhpcy5fbmFtZSA9IGlucHV0Lm5hbWUgOiB0aHJvd01hbmRhdG9yeVBhcm1NaXNzaW5nRXJyb3IoJ25hbWUnKTsKCiAgICBfdGhpcy5fc3RhdHVzID0gaW5wdXQuc3RhdHVzOwoKICAgIGlmIChpbnB1dC5kYXRhKSB7CiAgICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbnB1dC5kYXRhKTsKICAgIH0gZWxzZSB7CiAgICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdCh7fSk7CiAgICB9CiAgICBfdGhpcy5fY2hpbGRyZW5zID0gaW5wdXQuY2hpbGRyZW5zOwoKICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgIF90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbiA9IGlucHV0Lm11dHVhbDsKCiAgICBfdGhpcy5fdmVyc2lvbiA9IDA7CiAgICBfdGhpcy5fY2hpbGRJZCA9IDA7CiAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzID0ge307CiAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMgPSBbXTsKCiAgICBfdGhpcy5fcmVzdW1lZCA9IGlucHV0LnJlc3VtZTsKCiAgICBfdGhpcy5fb3duZXIgPSBpbnB1dC5zeW5jaGVyLl9vd25lcjsKICAgIF90aGlzLl9idXMgPSBpbnB1dC5zeW5jaGVyLl9idXM7CgogICAgaWYgKGlucHV0LmRlc2NyaXB0aW9uKSBfdGhpcy5fZGVzY3JpcHRpb24gPSBpbnB1dC5kZXNjcmlwdGlvbjsKICAgIGlmIChpbnB1dC50YWdzKSBfdGhpcy5fdGFncyA9IGlucHV0LnRhZ3M7CiAgICBpZiAoaW5wdXQucmVzb3VyY2VzKSBfdGhpcy5fcmVzb3VyY2VzID0gaW5wdXQucmVzb3VyY2VzOwogICAgaWYgKGlucHV0Lm9ic2VydmVyU3RvcmFnZSkgX3RoaXMuX29ic2VydmVyU3RvcmFnZSA9IGlucHV0Lm9ic2VydmVyU3RvcmFnZTsKICAgIGlmIChpbnB1dC5wdWJsaWNPYnNlcnZhdGlvbikgX3RoaXMuX3B1YmxpY09ic2VydmF0aW9uID0gaW5wdXQucHVibGljT2JzZXJ2YXRpb247CgogICAgX3RoaXMuX21ldGFkYXRhID0gKDAsIF9hc3NpZ24yLmRlZmF1bHQpKGlucHV0KTsKICAgIGRlbGV0ZSBfdGhpcy5fbWV0YWRhdGEuZGF0YTsKICAgIGRlbGV0ZSBfdGhpcy5fbWV0YWRhdGEuc3luY2hlcjsKICAgIGRlbGV0ZSBfdGhpcy5fbWV0YWRhdGEuYXV0aG9yaXNlOwoKICAgIC8qaWYgKHJlc3VtZWQgJiYgY2hpbGRyZW5zKSB7DQogICAgICBfdGhpcy5fY2hpbGRJZCA9IF90aGlzLl9nZXRMYXN0Q2hpbGRJZCgpOw0KICAgICAgY29uc29sZS5sb2coJ1tEYXRhIE9iamVjdCByZXN1bWVkXSBsYXN0IENoaWxkSWQ6ICcsIF90aGlzLl9jaGlsZElkKTsNCiAgICB9Ki8KICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3QsIFt7CiAgICBrZXk6ICdfZ2V0TGFzdENoaWxkSWQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRMYXN0Q2hpbGRJZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBjaGlsZElkSW50ID0gMDsKICAgICAgdmFyIGNoaWxkSWRTdHJpbmcgPSBfdGhpcy5fb3duZXIgKyAnIycgKyBjaGlsZElkSW50OwoKICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fY2hpbGRyZW5zKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgIGlmIChfdGhpcy5fY2hpbGRyZW5zW2tleV0uY2hpbGRJZCA+IGNoaWxkSWRTdHJpbmcpIHsKICAgICAgICAgIGNoaWxkSWRTdHJpbmcgPSBfdGhpcy5fY2hpbGRyZW5zW2tleV0uY2hpbGRJZDsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIGNoaWxkSWRJbnQgPSBOdW1iZXIoY2hpbGRJZFN0cmluZy5zcGxpdCgnIycpWzFdKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNoaWxkQmFzZVVSTCA9IF90aGlzLl91cmwgKyAnL2NoaWxkcmVuLyc7CiAgICAgIGNvbnNvbGUubG9nKCdbRGF0YSBPYmplY3QgLSBBbGxvY2F0ZUxpc3RlbmVyc10gLSAnLCBfdGhpcy5fY2hpbGRyZW5zKTsKICAgICAgaWYgKF90aGlzLl9jaGlsZHJlbnMpIHsKICAgICAgICBfdGhpcy5fY2hpbGRyZW5zLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICB2YXIgY2hpbGRVUkwgPSBjaGlsZEJhc2VVUkwgKyBjaGlsZDsKICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgLy9pZ25vcmUgbXNnIHNlbnQgYnkgaGltc2VsZgogICAgICAgICAgICBpZiAobXNnLmZyb20gIT09IF90aGlzMi5fb3duZXIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdC1DaGlsZHJlbi1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgICAgICAgc3dpdGNoIChtc2cudHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSAnY3JlYXRlJzoKICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2hpbGRDcmVhdGUobXNnKTticmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7YnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICBfdGhpcy5fY2hhbmdlQ2hpbGRyZW4obXNnKTticmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgewogICAgICAgIGxpc3RlbmVyLnJlbW92ZSgpOwogICAgICB9KTsKCiAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoX3RoaXMuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1trZXldLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKg0KICAgICAqDQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3Jlc3VtZUNoaWxkcmVucycsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lQ2hpbGRyZW5zKGNoaWxkcmVucykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY2hpbGRJZFN0cmluZyA9IHRoaXMuX293bmVyICsgJyMnICsgdGhpcy5fY2hpbGRJZDsKCiAgICAgIC8vc2V0dXAgY2hpbGRyZW5zIGRhdGEgZnJvbSBzdWJzY3JpcHRpb24KICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShjaGlsZHJlbnMpLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkcmVuUmVzb3VyY2UpIHsKICAgICAgICB2YXIgY2hpbGRyZW4gPSBjaGlsZHJlbnNbY2hpbGRyZW5SZXNvdXJjZV07CgogICAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkSWQpIHsKICAgICAgICAgIHZhciBjaGlsZElucHV0ID0gY2hpbGRyZW5bY2hpbGRJZF0udmFsdWU7CiAgICAgICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3QucmVzdW1lQ2hpbGRyZW5zXSBuZXcgRGF0YU9iamVjdENoaWxkOiAnLCBjaGlsZHJlblJlc291cmNlLCBjaGlsZHJlbiwgY2hpbGRJbnB1dCk7CiAgICAgICAgICBjaGlsZElucHV0LnBhcmVudE9iamVjdCA9IF90aGlzOwogICAgICAgICAgY2hpbGRJbnB1dC5wYXJlbnQgPSBfdGhpcy5fdXJsOwogICAgICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXSA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KGNoaWxkSW5wdXQpOwogICAgICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXS5pZGVudGl0eSA9IGNoaWxkcmVuW2NoaWxkSWRdLmlkZW50aXR5OwoKICAgICAgICAgIGlmIChjaGlsZElkID4gY2hpbGRJZFN0cmluZykgewogICAgICAgICAgICBjaGlsZElkU3RyaW5nID0gY2hpbGRJZDsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3RSZXBvcnRlci5yZXN1bWVDaGlsZHJlbnNdIC0gcmVzdW1lZDogJywgX3RoaXMzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIHRoaXMuX2NoaWxkSWQgPSBOdW1iZXIoY2hpbGRJZFN0cmluZy5zcGxpdCgnIycpWzFdKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBPYmplY3QgVVJMIG9mIHJlcG9ydGVyIG9yIG9ic2VydmVyDQogICAgICogQHR5cGUge09iamVjdFVSTH0NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAncGF1c2UnLAoKCiAgICAvKioNCiAgICAgKiBAaWdub3JlDQogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7CiAgICAgIC8vVE9ETzogdGhpcyBmZWF0dXJlIG5lZWRzIG1vcmUgYW5hbGlzZQogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaWdub3JlDQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3Jlc3VtZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lKCkgewogICAgICAvL1RPRE86IHRoaXMgZmVhdHVyZSBuZWVkcyBtb3JlIGFuYWxpc2UKICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7CiAgICB9CgogICAgLyoqDQogICAgICogQGlnbm9yZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzdG9wJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkgewogICAgICAvL1RPRE86IHNob3VsZCByZW1vdmUgdGhlIHN1YnNjcmlwdGlvbiBhbmQgc2VuZCBtZXNzYWdlIHVuc3Vic2NyaWJlPwogICAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJzsKICAgIH0KCiAgICAvKioNCiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIERhdGFPYmplY3RDaGlsZCB0byBhIGNoaWxkcmVuIGNvbGxlY3Rpb24uDQogICAgICogQHBhcmFtIHtTdHJpbmd9IGNoaWxkcmVuIC0gQ2hpbGRyZW4gbmFtZSB3aGVyZSB0aGUgY2hpbGQgaXMgYWRkZWQuDQogICAgICogQHBhcmFtIHtKU09OfSBpbml0aWFsRGF0YSAtIEluaXRpYWwgZGF0YSBvZiB0aGUgY2hpbGQNCiAgICAgKiBAcGFyYW0gIHtNZXNzYWdlQm9keUlkZW50aXR5fSBpZGVudGl0eSAtIChvcHRpb25hbCkgaWRlbnRpdHkgZGF0YSB0byBiZSBhZGRlZCB0byBpZGVudGl0eSB0aGUgdXNlciByZXBvcnRlci4gVG8gYmUgdXNlZCBmb3IgbGVnYWN5IGlkZW50aXRpZXMuDQogICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0Q2hpbGQ+fSAtIFJldHVybiBQcm9taXNlIHRvIGEgbmV3IERhdGFPYmplY3RDaGlsZC4NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnYWRkQ2hpbGQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENoaWxkKGNoaWxkcmVuLCBpbml0aWFsRGF0YSwgaWRlbnRpdHksIGlucHV0KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY2hpbGRJbnB1dCA9ICgwLCBfYXNzaWduMi5kZWZhdWx0KSh7fSwgaW5wdXQpOwogICAgICAvL2NyZWF0ZSBuZXcgY2hpbGQgdW5pcXVlIElELCBiYXNlZCBvbiBoeXBlcnR5VVJMCiAgICAgIF90aGlzLl9jaGlsZElkKys7CiAgICAgIGNoaWxkSW5wdXQudXJsID0gX3RoaXMuX293bmVyICsgJyMnICsgX3RoaXMuX2NoaWxkSWQ7CiAgICAgIHZhciBtc2dDaGlsZFBhdGggPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nICsgY2hpbGRyZW47CgogICAgICBjaGlsZElucHV0LnBhcmVudE9iamVjdCA9IF90aGlzOwogICAgICBjaGlsZElucHV0LmRhdGEgPSBpbml0aWFsRGF0YTsKICAgICAgY2hpbGRJbnB1dC5yZXBvcnRlciA9IF90aGlzLl9vd25lcjsKICAgICAgY2hpbGRJbnB1dC5jcmVhdGVkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogICAgICBjaGlsZElucHV0LnJ1bnRpbWUgPSBfdGhpcy5fcnVudGltZTsKICAgICAgY2hpbGRJbnB1dC5zY2hlbWEgPSBfdGhpcy5fc2NoZW1hOwogICAgICBjaGlsZElucHV0LnBhcmVudCA9IF90aGlzLnVybDsKCiAgICAgIHZhciBuZXdDaGlsZCA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KGNoaWxkSW5wdXQpOwoKICAgICAgdmFyIGJvZHlWYWx1ZSA9IG5ld0NoaWxkLm1ldGFkYXRhOwogICAgICBib2R5VmFsdWUuZGF0YSA9IGluaXRpYWxEYXRhOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byBhIHJlc291cmNlIGNoaWxkIGFkZHJlc3M6IE1lc3NhZ2VCdXMKICAgICAgdmFyIHJlcXVlc3RNc2cgPSB7CiAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IG1zZ0NoaWxkUGF0aCwKICAgICAgICBib2R5OiB7IHJlc291cmNlOiBjaGlsZElucHV0LnVybCwgdmFsdWU6IGJvZHlWYWx1ZSB9CiAgICAgIH07CgogICAgICBpZiAoaWRlbnRpdHkpIHsKICAgICAgICByZXF1ZXN0TXNnLmJvZHkuaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgfQoKICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICBpZiAoIV90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbikgcmVxdWVzdE1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gX3RoaXMuX211dHVhbEF1dGhlbnRpY2F0aW9uOwoKICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0LmFkZENoaWxkXSBhZGRlZCAnLCBuZXdDaGlsZCk7CgogICAgICAvL3JldHVybnMgcHJvbWlzZSwgaW4gdGhlIGZ1dHVyZSwgdGhlIEFQSSBtYXkgY2hhbmdlIHRvIGFzeW5jaHJvbm91cyBjYWxsCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgbXNnSWQgPSBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2cpOwoKICAgICAgICAvL2NoaWxkSW5wdXQubXNnSWQgPSBtc2dJZDsKICAgICAgICBuZXdDaGlsZC5vbkNoYW5nZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCwgeyBwYXRoOiBtc2dDaGlsZFBhdGgsIGNoaWxkSWQ6IGNoaWxkSW5wdXQudXJsIH0pOwogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSW5wdXQudXJsXSA9IG5ld0NoaWxkOwoKICAgICAgICByZXNvbHZlKG5ld0NoaWxkKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqDQogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgb2YgY2hpbGRyZW5zLg0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25BZGRDaGlsZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25BZGRDaGlsZChjYWxsYmFjaykgewogICAgICB0aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlciA9IGNhbGxiYWNrOwogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3QgLT4gYWRkQ2hpbGQKCiAgfSwgewogICAga2V5OiAnX29uQ2hpbGRDcmVhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoaWxkQ3JlYXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgY2hpbGRJbnB1dCA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShtc2cuYm9keS52YWx1ZSk7CiAgICAgIC8vY2hpbGRJbnB1dC51cmwgPSBtc2cuYm9keS5yZXNvdXJjZTsKICAgICAgY2hpbGRJbnB1dC5wYXJlbnRPYmplY3QgPSBfdGhpczsKICAgICAgLy9jaGlsZElucHV0LnBhcmVudCA9IF90aGlzLl91cmw7CgogICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3QuX29uQ2hpbGRDcmVhdGVdIHJlY2VpdmVkQnkgJyArIF90aGlzLl9vd25lciArICcgOiAnLCBtc2cpOwogICAgICB2YXIgbmV3Q2hpbGQgPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChjaGlsZElucHV0KTsKICAgICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElucHV0LnVybF0gPSBuZXdDaGlsZDsKCiAgICAgIC8vdG9kbzogcmVtb3ZlIHJlc3BvbnNlIGJlbG93CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIC8vRkxPVy1PVVQ6IHdpbGwgZmxvdyB0byBEYXRhT2JqZWN0Q2hpbGQgLT4gX29uUmVzcG9uc2UKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHNvdXJjZTogX3RoaXMuX293bmVyIH0KICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmZyb20sCiAgICAgICAgdXJsOiBtc2cudG8sCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLmRhdGEsCiAgICAgICAgY2hpbGRJZDogY2hpbGRJbnB1dC51cmwsCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0FERC1DSElMRFJFTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL3NlbmQgZGVsdGEgbWVzc2FnZXMgdG8gc3Vic2NyaXB0aW9ucwoKICB9LCB7CiAgICBrZXk6ICdfb25DaGFuZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoYW5nZShldmVudCwgY2hpbGRJbmZvKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fdmVyc2lvbisrOwoKICAgICAgaWYgKF90aGlzLl9zdGF0dXMgPT09ICdsaXZlJykgewogICAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgZGlyZWN0bHkgdG8gYSByZXNvdXJjZSBjaGFuZ2VzIGFkZHJlc3M6IE1lc3NhZ2VCdXMKICAgICAgICB2YXIgY2hhbmdlTXNnID0gewogICAgICAgICAgdHlwZTogJ3VwZGF0ZScsIGZyb206IF90aGlzLl91cmwsIHRvOiBfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJywKICAgICAgICAgIGJvZHk6IHsgdmVyc2lvbjogX3RoaXMuX3ZlcnNpb24sIHNvdXJjZTogX3RoaXMuX293bmVyLCBhdHRyaWJ1dGU6IGV2ZW50LmZpZWxkIH0KICAgICAgICB9OwoKICAgICAgICBjb25zb2xlLmxvZygnW0RhdGFPYmplY3QgLSBfb25DaGFuZ2VdIC0gJywgZXZlbnQsIGNoaWxkSW5mbywgY2hhbmdlTXNnKTsKCiAgICAgICAgaWYgKGV2ZW50Lm9UeXBlID09PSBfUHJveHlPYmplY3QuT2JqZWN0VHlwZS5PQkpFQ1QpIHsKICAgICAgICAgIGlmIChldmVudC5jVHlwZSAhPT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuUkVNT1ZFKSB7CiAgICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2hhbmdlTXNnLmJvZHkuYXR0cmlidXRlVHlwZSA9IGV2ZW50Lm9UeXBlOwogICAgICAgICAgY2hhbmdlTXNnLmJvZHkudmFsdWUgPSBldmVudC5kYXRhOwogICAgICAgICAgaWYgKGV2ZW50LmNUeXBlICE9PSBfUHJveHlPYmplY3QuQ2hhbmdlVHlwZS5VUERBVEUpIHsKICAgICAgICAgICAgY2hhbmdlTXNnLmJvZHkub3BlcmF0aW9uID0gZXZlbnQuY1R5cGU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvL2NoaWxkSW5mbyBtdXN0IGhhdmUgKHBhdGgsIGNoaWxkSWQpCiAgICAgICAgaWYgKGNoaWxkSW5mbykgewogICAgICAgICAgY2hhbmdlTXNnLnRvID0gY2hpbGRJbmZvLnBhdGg7CiAgICAgICAgICBjaGFuZ2VNc2cuYm9keS5yZXNvdXJjZSA9IGNoaWxkSW5mby5jaGlsZElkOwogICAgICAgIH0KCiAgICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgIGlmICghX3RoaXMuX211dHVhbEF1dGhlbnRpY2F0aW9uKSBjaGFuZ2VNc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbiA9IF90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbjsKCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShjaGFuZ2VNc2cpOwogICAgICB9CiAgICB9CgogICAgLy9GTE9XLUlOOiBkZWx0YSBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdFJlcG9ydGVyIG9yIERhdGFPYmplY3RDaGlsZCB3aGVuIGNoYW5naW5nIGRhdGEKCiAgfSwgewogICAga2V5OiAnX2NoYW5nZU9iamVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoYW5nZU9iamVjdChzeW5jT2JqLCBtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vVE9ETzogdXBkYXRlIHZlcnNpb24gPwogICAgICAvL2hvdyB0byBoYW5kbGUgYW4gaW5jb3JyZWN0IHZlcnNpb24gPyBFeGFtcGxlOiByZWNlaXZlIGEgdmVyc2lvbiAzIHdoZW4gdGhlIG9ic2VydmVyIGlzIGluIHZlcnNpb24gMSwgd2hlcmUgaXMgdGhlIHZlcnNpb24gMiA/CiAgICAgIC8vd2lsbCB3ZSBuZWVkIHRvIGNvbmZpcm0gdGhlIHJlY2VwdGlvbiA/CiAgICAgIGlmIChfdGhpcy5fdmVyc2lvbiArIDEgPT09IG1zZy5ib2R5LnZlcnNpb24pIHsKICAgICAgICBfdGhpcy5fdmVyc2lvbisrOwogICAgICAgIHZhciBwYXRoID0gbXNnLmJvZHkuYXR0cmlidXRlOwogICAgICAgIHZhciB2YWx1ZSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShtc2cuYm9keS52YWx1ZSk7CiAgICAgICAgdmFyIGZpbmRSZXN1bHQgPSBzeW5jT2JqLmZpbmRCZWZvcmUocGF0aCk7CgogICAgICAgIGlmIChtc2cuYm9keS5hdHRyaWJ1dGVUeXBlID09PSBfUHJveHlPYmplY3QuT2JqZWN0VHlwZS5BUlJBWSkgewogICAgICAgICAgaWYgKG1zZy5ib2R5Lm9wZXJhdGlvbiA9PT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuQUREKSB7CiAgICAgICAgICAgIHZhciBhcnIgPSBmaW5kUmVzdWx0Lm9iajsKICAgICAgICAgICAgdmFyIGluZGV4ID0gZmluZFJlc3VsdC5sYXN0OwogICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGFyciwgW2luZGV4LCAwXS5jb25jYXQodmFsdWUpKTsKICAgICAgICAgIH0gZWxzZSBpZiAobXNnLmJvZHkub3BlcmF0aW9uID09PSBfUHJveHlPYmplY3QuQ2hhbmdlVHlwZS5SRU1PVkUpIHsKICAgICAgICAgICAgdmFyIF9hcnIgPSBmaW5kUmVzdWx0Lm9iajsKICAgICAgICAgICAgdmFyIF9pbmRleCA9IGZpbmRSZXN1bHQubGFzdDsKICAgICAgICAgICAgX2Fyci5zcGxpY2UoX2luZGV4LCB2YWx1ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmaW5kUmVzdWx0Lm9ialtmaW5kUmVzdWx0Lmxhc3RdID0gdmFsdWU7IC8vIFVQREFURQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAobXNnLmJvZHkudmFsdWUpIHsKICAgICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUgb3IgQURECiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkZWxldGUgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XTsgLy8gUkVNT1ZFCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vVE9ETzogaG93IHRvIGhhbmRsZSB1bnN5bmNocm9uaXplZCB2ZXJzaW9ucz8KICAgICAgICBjb25zb2xlLmxvZygnVU5TWU5DSFJPTklaRUQgVkVSU0lPTjogKGRhdGEgPT4gJyArIF90aGlzLl92ZXJzaW9uICsgJywgbXNnID0+ICcgKyBtc2cuYm9keS52ZXJzaW9uICsgJyknKTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RDaGlsZCB3aGVuIGNoYW5naW5nIGRhdGEKCiAgfSwgewogICAga2V5OiAnX2NoYW5nZUNoaWxkcmVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfY2hhbmdlQ2hpbGRyZW4obXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGNvbnNvbGUubG9nKCdDaGFuZ2UgY2hpbGRyZW46ICcsIF90aGlzLl9vd25lciwgbXNnKTsKCiAgICAgIHZhciBjaGlsZElkID0gbXNnLmJvZHkucmVzb3VyY2U7CiAgICAgIHZhciBjaGlsZHJlbiA9IF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF07CgogICAgICBpZiAoY2hpbGRyZW4pIHsKICAgICAgICBfdGhpcy5fY2hhbmdlT2JqZWN0KGNoaWxkcmVuLl9zeW5jT2JqLCBtc2cpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdObyBjaGlsZHJlbiBmb3VuZCBmb3I6ICcsIGNoaWxkSWQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAndXJsJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdXJsOwogICAgfQoKICAgIC8qKg0KICAgICAqIE9iamVjdCBzY2hlbWEgVVJMICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQ0KICAgICAqIEB0eXBlIHtTY2hlbWFVUkx9DQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3NjaGVtYScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3NjaGVtYTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBTdGF0dXMgb2YgdGhlIHJlcG9ydGVyIG9yIG9ic2VydmVyIGNvbm5lY3Rpb24gKHRoaXMgZmllbGQgaXMgbm90IHlldCBzdGFibGUsIGFuZCBpcyBzdWJzamVjdCB0byBjaGFuZ2UpDQogICAgICogQHR5cGUge1N0YXR1c30gLSBFbnVtIG9mOiBvbiB8IHBhdXNlZA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzdGF0dXMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7CiAgICB9CgogICAgLyoqDQogICAgICogRGF0YSBzdHJ1Y3R1cmUgdG8gYmUgc3luY2hyb25pemVkLg0KICAgICAqIEB0eXBlIHtKU09OfSAtIEpTT04gc3RydWN0dXJlIHRoYXQgc2hvdWxkIGZvbGxvdyB0aGUgZGVmaW5lZCBzY2hlbWEsIGlmIGFueS4NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGF0YScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3N5bmNPYmouZGF0YTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBBbGwgY3JlYXRlZCBjaGlsZHJlbidzIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIGRvZXNuJ3QgY29udGFpbiBhbGwgY2hpbGRyZW4ncyBzaW5jZSByZXBvcnRlciBjcmVhdGlvbi4NCiAgICAgKiBAdHlwZSB7T2JqZWN0PENoaWxkSWQsIERhdGFPYmplY3RDaGlsZD59DQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2NoaWxkcmVucycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuT2JqZWN0czsKICAgIH0KICB9XSk7CiAgcmV0dXJuIERhdGFPYmplY3Q7Cn0oKTsgLyoqDQogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQogICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KICAgICAqDQogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQogICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdA0KICAgICAqDQogICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCiAgICAgKg0KICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLg0KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCiAgICAgKiovCgpleHBvcnRzLmRlZmF1bHQgPSBEYXRhT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMjQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5PYmplY3RUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0gdW5kZWZpbmVkOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCl9fd2VicGFja19yZXF1aXJlX18oMTE5KTsKCnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgb2JqZWN0VHlwZSA9IHsgQVJSQVk6ICdbb2JqZWN0IEFycmF5XScsIE9CSkVDVDogJ1tvYmplY3QgT2JqZWN0XScgfTsKCi8qKg0KICogQGFjY2VzcyBwcml2YXRlDQogKiBNYWluIGNsYXNzIHRoYXQgbWFpbnRhaW5zIGEgSlNPTiBvYmplY3QsIGFuZCBvYnNlcnZlcyBjaGFuZ2VzIGluIHRoaXMgb2JqZWN0LCByZWN1cnNpdmVseS4NCiAqIEludGVybmFsIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgYWxzbyBvYnNlcnZlZC4NCiAqLwoKdmFyIFN5bmNPYmplY3QgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3luY09iamVjdChpbml0aWFsRGF0YSkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgU3luY09iamVjdCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0gW107CiAgICBfdGhpcy5fZmlsdGVycyA9IHt9OwoKICAgIHRoaXMuX2RhdGEgPSBpbml0aWFsRGF0YSB8fCB7fTsKCiAgICB0aGlzLl9pbnRlcm5hbE9ic2VydmUodGhpcy5fZGF0YSk7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShTeW5jT2JqZWN0LCBbewogICAga2V5OiAnb2JzZXJ2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb2JzZXJ2ZShjYWxsYmFjaykgewogICAgICB0aGlzLl9vYnNlcnZlcnMucHVzaChjYWxsYmFjayk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZmluZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZChwYXRoKSB7CiAgICAgIHZhciBsaXN0ID0gKDAsIF91dGlscy5wYXJzZUF0dHJpYnV0ZXMpKHBhdGgpOwoKICAgICAgcmV0dXJuIHRoaXMuX2ZpbmRXaXRoU3BsaXQobGlzdCk7CiAgICB9CiAgfSwgewogICAga2V5OiAnZmluZEJlZm9yZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmluZEJlZm9yZShwYXRoKSB7CiAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgdmFyIGxpc3QgPSAoMCwgX3V0aWxzLnBhcnNlQXR0cmlidXRlcykocGF0aCk7CiAgICAgIHJlc3VsdC5sYXN0ID0gbGlzdC5wb3AoKTsKICAgICAgcmVzdWx0Lm9iaiA9IHRoaXMuX2ZpbmRXaXRoU3BsaXQobGlzdCk7CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogJ19maW5kV2l0aFNwbGl0JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmluZFdpdGhTcGxpdChsaXN0KSB7CiAgICAgIHZhciBvYmogPSB0aGlzLl9kYXRhOwogICAgICBsaXN0LmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgb2JqID0gb2JqW3ZhbHVlXTsKICAgICAgfSk7CgogICAgICByZXR1cm4gb2JqOwogICAgfQogIH0sIHsKICAgIGtleTogJ19pbnRlcm5hbE9ic2VydmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9pbnRlcm5hbE9ic2VydmUob2JqZWN0KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGNoYW5nZXNldCkgewoKICAgICAgICBjaGFuZ2VzZXQuZXZlcnkoZnVuY3Rpb24gKGNoYW5nZSkgewogICAgICAgICAgX3RoaXMyLl9vbkNoYW5nZXMoY2hhbmdlKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHRoaXMuX2RhdGEgPSBPYmplY3QuZGVlcE9ic2VydmUob2JqZWN0LCBoYW5kbGVyKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZmlyZUV2ZW50JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlyZUV2ZW50KGV2ZW50KSB7CiAgICAgIHRoaXMuX29ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIGNhbGxiYWNrKGV2ZW50KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uQ2hhbmdlcycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2hhbmdlcyhjaGFuZ2UpIHsKCiAgICAgIHZhciBvYmogPSBjaGFuZ2Uub2JqZWN0OwogICAgICB2YXIgb2JqVHlwZSA9IHZvaWQgMDsKCiAgICAgIGlmIChvYmouY29uc3RydWN0b3IgPT09IE9iamVjdCkgewogICAgICAgIG9ialR5cGUgPSBPYmplY3RUeXBlLk9CSkVDVDsKICAgICAgfQoKICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHsKICAgICAgICBvYmpUeXBlID0gT2JqZWN0VHlwZS5BUlJBWTsKICAgICAgfQoKICAgICAgdmFyIGZpZWxkU3RyaW5nID0gY2hhbmdlLmtleXBhdGg7CgogICAgICAvLyBjb25zb2xlLmxvZygnRmllbGQ6JywgZmllbGRTdHJpbmcpOwogICAgICAvLyBjb25zb2xlLmxvZygndHlwZTonLCBjaGFuZ2UudHlwZSk7CgogICAgICAvL2xldCBvbGRWYWx1ZSA9IGNoYW5nZS5vbGRWYWx1ZTsKICAgICAgdmFyIG5ld1ZhbHVlID0gb2JqW2NoYW5nZS5uYW1lXTsKCiAgICAgIC8vIGNvbnNvbGUuaW5mbyhjaGFuZ2UudHlwZSArICcgfCBGaWVsZDogJyArIGZpZWxkU3RyaW5nICsgJyB8IE5ldyBWYWx1ZTonLCBKU09OLnN0cmluZ2lmeShuZXdWYWx1ZSksIGZpZWxkU3RyaW5nLmluY2x1ZGVzKCdsZW5ndGgnKSk7CgogICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICd1cGRhdGUnICYmICFmaWVsZFN0cmluZy5pbmNsdWRlcygnLmxlbmd0aCcpKSB7CiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsKICAgICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLlVQREFURSwKICAgICAgICAgIG9UeXBlOiBvYmpUeXBlLAogICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nLAogICAgICAgICAgZGF0YTogbmV3VmFsdWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAnYWRkJykgewogICAgICAgIHRoaXMuX2ZpcmVFdmVudCh7CiAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5BREQsCiAgICAgICAgICBvVHlwZTogb2JqVHlwZSwKICAgICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZywKICAgICAgICAgIGRhdGE6IG5ld1ZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ2RlbGV0ZScpIHsKICAgICAgICB0aGlzLl9maXJlRXZlbnQoewogICAgICAgICAgY1R5cGU6IENoYW5nZVR5cGUuUkVNT1ZFLAogICAgICAgICAgb1R5cGU6IG9ialR5cGUsCiAgICAgICAgICBmaWVsZDogZmllbGRTdHJpbmcKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ2RhdGEnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kYXRhOwogICAgfQogIH1dKTsKICByZXR1cm4gU3luY09iamVjdDsKfSgpOwoKdmFyIENoYW5nZVR5cGUgPSBleHBvcnRzLkNoYW5nZVR5cGUgPSB7IFVQREFURTogJ3VwZGF0ZScsIEFERDogJ2FkZCcsIFJFTU9WRTogJ3JlbW92ZScgfTsKdmFyIE9iamVjdFR5cGUgPSBleHBvcnRzLk9iamVjdFR5cGUgPSB7IE9CSkVDVDogJ29iamVjdCcsIEFSUkFZOiAnYXJyYXknIH07CmV4cG9ydHMuZGVmYXVsdCA9IFN5bmNPYmplY3Q7CgovKioqLyB9KSwKLyogMTI1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTU4KSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDEyNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7Cgp2YXIgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgewogIGlmIChvYmplY3QgPT09IG51bGwpIG9iamVjdCA9IEZ1bmN0aW9uLnByb3RvdHlwZTsKICB2YXIgZGVzYyA9ICgwLCBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yMi5kZWZhdWx0KShvYmplY3QsIHByb3BlcnR5KTsKCiAgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgewogICAgdmFyIHBhcmVudCA9ICgwLCBfZ2V0UHJvdG90eXBlT2YyLmRlZmF1bHQpKG9iamVjdCk7CgogICAgaWYgKHBhcmVudCA9PT0gbnVsbCkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7CiAgICB9CiAgfSBlbHNlIGlmICgidmFsdWUiIGluIGRlc2MpIHsKICAgIHJldHVybiBkZXNjLnZhbHVlOwogIH0gZWxzZSB7CiAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7CgogICAgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CgogICAgcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsKICB9Cn07CgovKioqLyB9KSwKLyogMTI3ICovLAovKiAxMjggKi8sCi8qIDEyOSAqLywKLyogMTMwICovLAovKiAxMzEgKi8sCi8qIDEzMiAqLywKLyogMTMzICovLAovKiAxMzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfcHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpOwoKdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKdmFyIF9hc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7Cgp2YXIgX2Fzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hc3NpZ24pOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOwoKdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdFJlcG9ydGVyKTsKCnZhciBfRGF0YU9iamVjdE9ic2VydmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOwoKdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdE9ic2VydmVyKTsKCnZhciBfRGF0YVByb3Zpc2lvbmFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpOwoKdmFyIF9EYXRhUHJvdmlzaW9uYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YVByb3Zpc2lvbmFsKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioNCiogVGhlIG1haW4gY2xhc3MgZm9yIHRoZSBzeW5jaGVyIHBhY2thZ2UuDQoqIFRoZSBTeW5jaGVyIGlzIGEgc2luZ2xldG9uIGNsYXNzIHBlciBIeXBlcnR5L1VSTCBhbmQgaXQgaXMgdGhlIG93bmVyIG9mIGFsbCBjcmVhdGVkIERhdGEgU3luYyBPYmplY3RzIGFjY29yZGluZyB0byB0aGUgUmVwb3J0ZXIgLSBPYnNlcnZlciBwYXR0ZXJuLg0KKiBNYWluIGZ1bmN0aW9uYWxpdHkgaXMgdG8gY3JlYXRlIHJlcG9ydGVycyBhbmQgdG8gc3Vic2NyaWJlIHRvIGV4aXN0aW5nIG9uZXMuDQoqLwovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8KdmFyIFN5bmNoZXIgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQ0KICBfb3duZXI6IFVSTA0KICBfYnVzOiBNaW5pQnVzDQogICAgX3N1YlVSTDogVVJMDQogICAgX3JlcG9ydGVyczogPHVybDogRGF0YU9iamVjdFJlcG9ydGVyPg0KICBfb2JzZXJ2ZXJzOiA8dXJsOiBEYXRhT2JqZWN0T2JzZXJ2ZXI+DQogIF9wcm92aXNpb25hbHM6IDx1cmw6IERhdGFQcm92aXNpb25hbD4NCiAgICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tDQogIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZA0KICBfb25SZXN1bWU6IChldmVudCkgPT4gdm9pZA0KICAqLwoKICAvKioNCiAgKiBDb25zdHJ1Y3RvciB0aGF0IHNob3VsZCBiZSB1c2VkIGJ5IHRoZSBIeXBlcnR5IG93bmVyDQogICogQHBhcmFtIHtIeXBlcnR5VVJMfSBvd25lciAtIEh5cGVydHkgVVJMIG93bmVyLiBBbiBVUkwgYWxsb2NhdGVkIGJ5IHRoZSBydW50aW1lIHRoYXQgdW5pcXVlbHkgaWRlbnRpZmllcyB0aGUgSHlwZXJ0eS4NCiAgKiBAcGFyYW0ge01pbmlCdXN9IGJ1cyAtIEFuIGluc3RhbmNlIG9mIHRoZSBNaW5pQnVzIHByb3ZpZGVkIGluIHRoZSBzYW5kYm94LiBXaGVuIGFuIG9iamVjdCAoUmVwb3J0ZXIgb3IgT2JzZXJ2ZWQpIGlzIGNyZWF0ZWQsIHRoZSBTeW5jaGVyTWFuYWdlciB3aWxsIGFkZCBhIGxpc3RlbmVyIGluIHRoZSBNaW5pQnVzIHRvIHJlY2VpdmUvc2VuZCBNZXNzYWdlcyBvZiB0aGF0IG9iamVjdC4NCiAgKiBAcGFyYW0ge0pTT059IGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gZGF0YS4gVGhlIG9ubHkgcmVxdWlyZWQgZmllbGQgZm9yIG5vdyBpcyB0aGUgcnVudGltZVVSTC4NCiAgKi8KICBmdW5jdGlvbiBTeW5jaGVyKG93bmVyLCBidXMsIGNvbmZpZykgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgU3luY2hlcik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl9idXMgPSBidXM7CgogICAgX3RoaXMuX3N1YlVSTCA9IGNvbmZpZy5ydW50aW1lVVJMICsgJy9zbSc7CiAgICBfdGhpcy5fcnVudGltZVVybCA9IGNvbmZpZy5ydW50aW1lVVJMOwoKICAgIF90aGlzLl9yZXBvcnRlcnMgPSB7fTsKICAgIF90aGlzLl9vYnNlcnZlcnMgPSB7fTsKICAgIF90aGlzLl9wcm92aXNpb25hbHMgPSB7fTsKCiAgICBidXMuYWRkTGlzdGVuZXIob3duZXIsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgLy9pZ25vcmUgbXNnIHNlbnQgYnkgaGltc2VsZgogICAgICBpZiAobXNnLmZyb20gIT09IG93bmVyKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbU3luY2hlcl0gU3luY2hlci1SQ1Y6ICcsIG1zZywgX3RoaXMpOwogICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ2ZvcndhcmQnOgogICAgICAgICAgICBfdGhpcy5fb25Gb3J3YXJkKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICdjcmVhdGUnOgogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVDcmVhdGUobXNnKTticmVhazsKICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICAgIF90aGlzLl9vblJlbW90ZURlbGV0ZShtc2cpO2JyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICAvKioNCiAgKiBUaGUgb3duZXIgb2YgdGhlIFN5bmNoZXIgYW5kIGFsbCBjcmVhdGVkIHJlcG9ydGVycy4NCiAgKiBAdHlwZSB7SHlwZXJ0eVVSTH0NCiAgKi8KCgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNoZXIsIFt7CiAgICBrZXk6ICdjcmVhdGUnLAoKCiAgICAvKioNCiAgICAqIFJlcXVlc3QgYSBEYXRhT2JqZWN0UmVwb3J0ZXIgY3JlYXRpb24uIFRoZSBVUkwgd2lsbCBiZSBiZSByZXF1ZXN0ZWQgYnkgdGhlIGFsbG9jYXRpb24gbWVjaGFuaXNtLg0KICAgICogQHBhcmFtICB7U2NoZW1hVVJMfSBzY2hlbWEgLSBIeXBlcnR5IENhdGFsb2d1ZSBVUkwgYWRkcmVzcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBKU09OLVNjaGVtYSBkZXNjcmliaW5nIHRoZSBEYXRhIE9iamVjdCBzY2hlbWENCiAgICAqIEBwYXJhbSAge0h5cGVydHlVUkxbXX0gb2JzZXJ2ZXJzIC0gTGlzdCBvZiBoeXBlcnRpZXMgdGhhdCBhcmUgcHJlLWF1dGhvcml6ZWQgZm9yIHN1YnNjcmlwdGlvbg0KICAgICogQHBhcmFtICB7SlNPTn0gaW5pdGlhbERhdGEgLSBJbml0aWFsIGRhdGEgb2YgdGhlIHJlcG9ydGVyDQogICAgKiBAcGFyYW0gIHtib29sZWFufSBzdG9yZSAtIChPcHRpb25hbCkgaWYgdHJ1ZSwgb2JqZWN0IHdpbGwgYmUgc3RvcmVkIGJ5IHRoZSBydW50aW1lDQogICAgKiBAcGFyYW0gIHtib29sZWFufSBwMnAgLSAoT3B0aW9uYWwpIGlmIHRydWUsIGRhdGEgc3luY2hyb25pc2F0aW9uIHN0cmVhbSB3aWxsIHVzZSBwMnAgY29ubmVjdGlvbiBhcyBtdWNoIGFzIHBvc3NpYmxlDQogICAgKiBAcGFyYW0gIHtNZXNzYWdlQm9keUlkZW50aXR5fSBpZGVudGl0eSAtIChvcHRpb25hbCkgaWRlbnRpdHkgZGF0YSB0byBiZSBhZGRlZCB0byBpZGVudGl0eSB0aGUgdXNlciByZXBvcnRlci4gVG8gYmUgdXNlZCBmb3IgbGVnYWN5IGlkZW50aXRpZXMuDQogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RSZXBvcnRlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IFJlcG9ydGVyLiBUaGUgcmVwb3J0ZXIgY2FuIGJlIGFjY2VwdGVkIG9yIHJlamVjdGVkIGJ5IHRoZSBQRVANCiAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShzY2hlbWEsIG9ic2VydmVycywgaW5pdGlhbERhdGEpIHsKICAgICAgdmFyIHN0b3JlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgICAgdmFyIHAycCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZmFsc2U7CiAgICAgIHZhciBuYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiAnZGF0YSBvYmplY3Qgd2l0aG91dCBuYW1lJzsKICAgICAgdmFyIGlkZW50aXR5ID0gYXJndW1lbnRzWzZdOwogICAgICB2YXIgaW5wdXQgPSBhcmd1bWVudHNbN107CgoKICAgICAgaWYgKCFzY2hlbWEpIHRocm93IEVycm9yKCdbU3luY2hlciAtIENyZWF0ZV0gLSBZb3UgbmVlZCBzcGVjaWZ5IHRoZSBkYXRhIG9iamVjdCBzY2hlbWEnKTsKICAgICAgaWYgKCFvYnNlcnZlcnMpIHRocm93IEVycm9yKCdbU3luY2hlciAtIENyZWF0ZV0gLVRoZSBvYnNlcnZlcnMgc2hvdWxkIGJlIGRlZmluZWQnKTsKCiAgICAgIC8vaWYgKCFpbml0aWFsRGF0YSkgdGhyb3cgRXJyb3IoJ1tTeW5jaGVyIC0gQ3JlYXRlXSAtIFlvdSBpbml0aWFsRGF0YSBzaG91bGQgYmUgZGVmaW5lZCcpOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGNyZWF0ZUlucHV0ID0gKDAsIF9hc3NpZ24yLmRlZmF1bHQpKHt9LCBpbnB1dCk7CgogICAgICBjcmVhdGVJbnB1dC5wMnAgPSBwMnA7CiAgICAgIGNyZWF0ZUlucHV0LnN0b3JlID0gc3RvcmU7CiAgICAgIGNyZWF0ZUlucHV0LnNjaGVtYSA9IHNjaGVtYTsKICAgICAgY3JlYXRlSW5wdXQuYXV0aG9yaXNlID0gb2JzZXJ2ZXJzOwogICAgICBpbml0aWFsRGF0YSA/IGNyZWF0ZUlucHV0LmRhdGEgPSBpbml0aWFsRGF0YSA6IGNyZWF0ZUlucHV0LmRhdGEgPSB7fTsKICAgICAgY3JlYXRlSW5wdXQubmFtZSA9IG5hbWU7CiAgICAgIGNyZWF0ZUlucHV0LnJlcG9ydGVyID0gX3RoaXMuX293bmVyOwogICAgICBjcmVhdGVJbnB1dC5yZXN1bWUgPSBmYWxzZTsKICAgICAgaWYgKGlucHV0KSB7CiAgICAgICAgY3JlYXRlSW5wdXQubXV0dWFsID0gaW5wdXQubXV0dWFsID8gaW5wdXQubXV0dWFsIDogdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjcmVhdGVJbnB1dC5tdXR1YWwgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoaWRlbnRpdHkpIHsKICAgICAgICBjcmVhdGVJbnB1dC5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICB9CgogICAgICAvL09iamVjdC5hc3NpZ24oY3JlYXRlSW5wdXQsIHtyZXN1bWU6IGZhbHNlfSk7CgogICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlIFJlcG9ydGVyIC0gY3JlYXRlSW5wdXQ6ICcsIGNyZWF0ZUlucHV0KTsKCiAgICAgIHJldHVybiBfdGhpcy5fY3JlYXRlKGNyZWF0ZUlucHV0KTsKICAgIH0KCiAgICAvKioNCiAgICAqIFJlcXVlc3QgYSBEYXRhT2JqZWN0UmVwb3J0ZXIgY3JlYXRpb24uIFRoZSBVUkwgd2lsbCBiZSBiZSByZXF1ZXN0ZWQgYnkgdGhlIGFsbG9jYXRpb24gbWVjaGFuaXNtLg0KICAgICogQHBhcmFtICB7T2JqZWN0fSBjcml0ZXJpYSAtIChvcHRpb25hbCkgaWRlbnRpdHkgZGF0YSB0byBiZSBhZGRlZCB0byBpZGVudGl0eSB0aGUgdXNlciByZXBvcnRlci4gVG8gYmUgdXNlZCBmb3IgbGVnYWN5IGlkZW50aXRpZXMuDQogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RSZXBvcnRlcj5bXX0gUmV0dXJuIGEgcHJvbWlzZSB3aXRoIGEgbGlzdCBvZiBEYXRhT2JqZWN0UmVwb3J0ZXIgdG8gYmUgcmVzdW1lZDsNCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXN1bWVSZXBvcnRlcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3VtZVJlcG9ydGVycyhjcml0ZXJpYSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gcmVzdW1lIFJlcG9ydGVyIC0gY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsKCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IHRydWUgfSk7CgogICAgICByZXR1cm4gX3RoaXMuX3Jlc3VtZUNyZWF0ZShjcml0ZXJpYSk7CiAgICB9CgogICAgLyoqDQogICAgKiBSZXF1ZXN0IGEgc3Vic2NyaXB0aW9uIHRvIGFuIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdC4NCiAgICAqIEBwYXJhbSB7U2NoZW1hVVJMfSBzY2hlbWEgLSBIeXBlcnR5IENhdGFsb2d1ZSBVUkwgYWRkcmVzcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBKU09OLVNjaGVtYSBkZXNjcmliaW5nIHRoZSBEYXRhIE9iamVjdCBzY2hlbWENCiAgICAqIEBwYXJhbSB7T2JqZWN0VVJMfSBvYmpVUkwgLSBBZGRyZXNzIG9mIHRoZSBleGlzdGVudCByZXBvcnRlciBvYmplY3QgdG8gYmUgb2JzZXJ2ZWQNCiAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3N0b3JlPWZhbHNlXSAtIFNhdmUgdGhlIHN1YnNjcmlwdGlvbiBvbiB0aGUgU3luY2hlciBNYW5hZ2VyIGZvciBmdXJ0aGVyIHJlc3VtZSAoRGVmYXVsdCBpcyBmYWxzZSkNCiAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3AycD1mYWxzZV0gLSBJbmZvIGFib3V0IGlmIHNob3VsZCB1c2UgcDJwIGNvbm5lY3Rpb24gKERlZmF1bHQgaXMgZmFsc2UpDQogICAgKiBAcGFyYW0ge0Jvb2xlYW59IFttdXR1YWw9dHJ1ZV0gLSBJbmZvIGFib3V0IGlmIG1lc3NhZ2VzIG9mIHRoaXMgb2JqZWN0IHNob3VsZCBiZSBlbmNyeXB0ZWQgKERlZmF1bHQgaXMgdHJ1ZSkNCiAgICAqIEBwYXJhbSAge01lc3NhZ2VCb2R5SWRlbnRpdHl9IGlkZW50aXR5IC0gKG9wdGlvbmFsKSBpZGVudGl0eSBkYXRhIHRvIGJlIGFkZGVkIHRvIGlkZW50aXR5IHRoZSB1c2VyIHJlcG9ydGVyLiBUbyBiZSB1c2VkIGZvciBsZWdhY3kgaWRlbnRpdGllcy4NCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdE9ic2VydmVyPn0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgb2JzZXJ2ZXIuIEl0J3MgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXBvcnRlci4NCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZShzY2hlbWEsIG9ialVSTCkgewogICAgICB2YXIgc3RvcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlOwogICAgICB2YXIgcDJwID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgICAgdmFyIG11dHVhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogdHJ1ZTsKICAgICAgdmFyIGlkZW50aXR5ID0gYXJndW1lbnRzWzVdOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGNyaXRlcmlhID0ge307CgogICAgICBjcml0ZXJpYS5wMnAgPSBwMnA7CiAgICAgIGNyaXRlcmlhLnN0b3JlID0gc3RvcmU7CiAgICAgIGNyaXRlcmlhLnNjaGVtYSA9IHNjaGVtYTsKCiAgICAgIGNyaXRlcmlhLnJlc291cmNlID0gb2JqVVJMOwogICAgICBpZiAoaWRlbnRpdHkpIHsKICAgICAgICBjcml0ZXJpYS5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICB9CgogICAgICAvL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CiAgICAgIGNyaXRlcmlhLm11dHVhbCA9IG11dHVhbDsKCiAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIHN1YnNjcmliZV0gLSBzdWJzY3JpYmUgY3JpdGVyaWE6ICcsIGNyaXRlcmlhKTsKCiAgICAgICgwLCBfYXNzaWduMi5kZWZhdWx0KShjcml0ZXJpYSwgeyByZXN1bWU6IGZhbHNlIH0pOwoKICAgICAgcmV0dXJuIF90aGlzLl9zdWJzY3JpYmUoY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKg0KICAgICogUmVxdWVzdCBhIHN1YnNjcmlwdGlvbiB0byBhbiBleGlzdGVudCByZXBvcnRlciBvYmplY3QuDQogICAgKiBAcGFyYW0ge2NyaXRlcmlhfSBjcml0ZXJpYSAtIEluZm9ybWF0aW9uIHRvIGRpc2NvdmVyeSB0aGUgb2JzZXJ2ZXIgb2JqZWN0DQogICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RPYnNlcnZlcj59IFJldHVybiBQcm9taXNlIHRvIGEgbmV3IG9ic2VydmVyLiBJdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVwb3J0ZXIuDQogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVzdW1lT2JzZXJ2ZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVPYnNlcnZlcnMoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIF9jcml0ZXJpYSA9IGNyaXRlcmlhIHx8IHt9OwoKICAgICAgKDAsIF9hc3NpZ24yLmRlZmF1bHQpKF9jcml0ZXJpYSwgeyByZXN1bWU6IHRydWUgfSk7CgogICAgICByZXR1cm4gX3RoaXMuX3Jlc3VtZVN1YnNjcmliZShfY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKg0KICAgICogUmVxdWVzdCBhIHJlYWQgYWN0aW9uIG9uIHRoZSByZXBvcnRlciBvYmplY3QNCiAgICAqIEBwYXJhbSB7T2JqZWN0VVJMfSBvYmpVUkwgLSBVUkwgb2YgdGhlIHJlcG9ydGVyIG9iamVjdCB0byBiZSByZWFkDQogICAgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdD59IFJldHVybiBQcm9taXNlIHRvIGxhc3QgYXZhaWxhYmxlIGRhdGEgb2YgdGhlIHJlcG9ydGVyDQogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVhZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZChvYmpVUkwpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgZGlyZWN0bHkgdG8gcmVwb3J0ZXIgb2JqZWN0IChtYXliZSB0aGVyZSBpcyBubyBsaXN0ZW5lciBhdmFpbGFibGUsIHNvIGl0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCBNZXNzYWdlQnVzIC0+IHJlc29sdmUpCiAgICAgIC8vd2lsbCByZWFjaCB0aGUgcmVtb3RlIG9iamVjdCBpbiBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gX29uUmVhZAogICAgICB2YXIgcmVhZE1zZyA9IHsKICAgICAgICB0eXBlOiAncmVhZCcsIGZyb206IF90aGlzLl9vd25lciwgdG86IG9ialVSTAogICAgICB9OwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZWFkTXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWFkLXJlc3BvbnNlOiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXBseS5ib2R5LnZhbHVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIGNyZWF0ZSBhbmQgZGVsZXRlIGV2ZW50cyBvZiByZW1vdmUgUmVwb3J0ZXIgb2JqZWN0cy4NCiAgICAqIFRoaXMgaXMgcmVsZWF0ZWQgdG8gdGhlIG1lc3NhZ2VucyBzZW50IGJ5IGNyZWF0ZSB0byB0aGUgb2JzZXJ2ZXJzIEh5cGVydHkgYXJyYXkuDQogICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrDQogICAgKi8KCiAgfSwgewogICAga2V5OiAnb25Ob3RpZmljYXRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uTm90aWZpY2F0aW9uKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlciA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ19jcmVhdGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGUoaW5wdXQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgcmVwb3J0ZXJJbnB1dCA9ICgwLCBfYXNzaWduMi5kZWZhdWx0KSh7fSwgaW5wdXQpOwoKICAgICAgICB2YXIgcmVzdW1lID0gaW5wdXQucmVzdW1lOwogICAgICAgIC8vbGV0IGluaXRpYWxEYXRhID0gaW5wdXQuaW5pdGlhbERhdGEgfHwge307CiAgICAgICAgLy9sZXQgc2NoZW1hID0gY3JpdGVyaWEuc2NoZW1hOwoKICAgICAgICAvL3BjaDogSSd2ZSBjb21tZW50ZWQgc2luY2UgdGhpcyBpcyBub3QgZGF0YQogICAgICAgIC8qaW5pdGlhbERhdGEucmVwb3J0ZXIgPSBfdGhpcy5fb3duZXI7DQogICAgICAgIGluaXRpYWxEYXRhLnNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsqLwoKICAgICAgICByZXBvcnRlcklucHV0LmNyZWF0ZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7CiAgICAgICAgcmVwb3J0ZXJJbnB1dC5ydW50aW1lID0gX3RoaXMuX3J1bnRpbWVVcmw7CgogICAgICAgIHZhciByZXF1ZXN0VmFsdWUgPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkocmVwb3J0ZXJJbnB1dCk7CgogICAgICAgIGRlbGV0ZSByZXF1ZXN0VmFsdWUucDJwOwogICAgICAgIGRlbGV0ZSByZXF1ZXN0VmFsdWUuc3RvcmU7CiAgICAgICAgZGVsZXRlIHJlcXVlc3RWYWx1ZS5vYnNlcnZlcnM7CiAgICAgICAgZGVsZXRlIHJlcXVlc3RWYWx1ZS5pZGVudGl0eTsKCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGUKICAgICAgICB2YXIgcmVxdWVzdE1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdjcmVhdGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLAogICAgICAgICAgYm9keTogeyByZXN1bWU6IHJlc3VtZSwgdmFsdWU6IHJlcXVlc3RWYWx1ZSB9CiAgICAgICAgfTsKCiAgICAgICAgLy9yZXF1ZXN0TXNnLmJvZHkudmFsdWUgPSBpbml0aWFsRGF0YTsKICAgICAgICAvL3JlcXVlc3RNc2cuYm9keS5yZXBvcnRlciA9IF90aGlzLl9vd25lcjsKICAgICAgICByZXF1ZXN0TXNnLmJvZHkuc2NoZW1hID0gcmVwb3J0ZXJJbnB1dC5zY2hlbWE7CgogICAgICAgIGlmIChyZXBvcnRlcklucHV0LnAycCkgcmVxdWVzdE1zZy5ib2R5LnAycCA9IHJlcG9ydGVySW5wdXQucDJwOwogICAgICAgIGlmIChyZXBvcnRlcklucHV0LnN0b3JlKSByZXF1ZXN0TXNnLmJvZHkuc3RvcmUgPSByZXBvcnRlcklucHV0LnN0b3JlOwogICAgICAgIC8vIGlmIChyZXBvcnRlcklucHV0LmF1dGhvcmlzZSkgcmVxdWVzdE1zZy5ib2R5LmF1dGhvcmlzZSA9IHJlcG9ydGVySW5wdXQuYXV0aG9yaXNlOwogICAgICAgIGlmIChyZXBvcnRlcklucHV0LmlkZW50aXR5KSByZXF1ZXN0TXNnLmJvZHkuaWRlbnRpdHkgPSByZXBvcnRlcklucHV0LmlkZW50aXR5OwoKICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIuX2NyZWF0ZV06ICcsIHJlcG9ydGVySW5wdXQsIHJlcXVlc3RNc2cpOwoKICAgICAgICAvL3JlcXVlc3QgY3JlYXRlIHRvIHRoZSBhbGxvY2F0aW9uIHN5c3RlbS4gQ2FuIGJlIHJlamVjdGVkIGJ5IHRoZSBQb2xpY3lFbmdpbmUuCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnLCBmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUtcmVzcG9uc2U6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIGFjY2VwdGVkCiAgICAgICAgICAgIHJlcG9ydGVySW5wdXQudXJsID0gcmVwbHkuYm9keS5yZXNvdXJjZTsKCiAgICAgICAgICAgIHJlcG9ydGVySW5wdXQuc3RhdHVzID0gJ2xpdmUnOyAvLyBwY2g6IGRvIHdlIG5lZCB0aGlzPwogICAgICAgICAgICByZXBvcnRlcklucHV0LnN5bmNoZXIgPSBfdGhpczsKICAgICAgICAgICAgcmVwb3J0ZXJJbnB1dC5jaGlsZHJlbnMgPSByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzOwoKICAgICAgICAgICAgdmFyIG5ld09iaiA9IG5ldyBfRGF0YU9iamVjdFJlcG9ydGVyMi5kZWZhdWx0KHJlcG9ydGVySW5wdXQpOwoKICAgICAgICAgICAgX3RoaXMuX3JlcG9ydGVyc1tyZXBvcnRlcklucHV0LnVybF0gPSBuZXdPYmo7CgogICAgICAgICAgICBuZXdPYmouaW52aXRlT2JzZXJ2ZXJzKGlucHV0LmF1dGhvcmlzZSk7CgogICAgICAgICAgICByZXNvbHZlKG5ld09iaik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIHJlamVjdGVkCiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVzdW1lQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzdW1lQ3JlYXRlKGNyaXRlcmlhKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciByZXN1bWUgPSBjcml0ZXJpYS5yZXN1bWU7CiAgICAgICAgLy9sZXQgaW5pdGlhbERhdGEgPSBjcml0ZXJpYS5kYXRhIHx8IHt9OwoKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkNyZWF0ZQogICAgICAgIHZhciByZXF1ZXN0TXNnID0gewogICAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsCiAgICAgICAgICBib2R5OiB7IHJlc3VtZTogcmVzdW1lIH0KICAgICAgICB9OwoKICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdOiAnLCBjcml0ZXJpYSwgcmVxdWVzdE1zZyk7CgogICAgICAgIGlmIChjcml0ZXJpYSkgewogICAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnZhbHVlID0gY3JpdGVyaWE7CiAgICAgICAgICByZXF1ZXN0TXNnLmJvZHkudmFsdWUucmVwb3J0ZXIgPSBfdGhpcy5fb3duZXI7CiAgICAgICAgfQoKICAgICAgICBpZiAoY3JpdGVyaWEucDJwKSByZXF1ZXN0TXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwogICAgICAgIGlmIChjcml0ZXJpYS5zdG9yZSkgcmVxdWVzdE1zZy5ib2R5LnN0b3JlID0gY3JpdGVyaWEuc3RvcmU7CiAgICAgICAgaWYgKGNyaXRlcmlhLm9ic2VydmVycykgcmVxdWVzdE1zZy5ib2R5LmF1dGhvcmlzZSA9IGNyaXRlcmlhLm9ic2VydmVyczsKICAgICAgICBpZiAoY3JpdGVyaWEuaWRlbnRpdHkpIHJlcXVlc3RNc2cuYm9keS5pZGVudGl0eSA9IGNyaXRlcmlhLmlkZW50aXR5OwoKICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIuX3Jlc3VtZUNyZWF0ZV0gLSByZXN1bWUgbWVzc2FnZTogJywgcmVxdWVzdE1zZyk7CgogICAgICAgIC8vcmVxdWVzdCBjcmVhdGUgdG8gdGhlIGFsbG9jYXRpb24gc3lzdGVtLiBDYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIFBvbGljeUVuZ2luZS4KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlcXVlc3RNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyLl9yZXN1bWVDcmVhdGVdIC0gY3JlYXRlLXJlc3VtZWQtcmVzcG9uc2U6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoKICAgICAgICAgICAgdmFyIGxpc3RPZlJlcG9ydGVycyA9IHJlcGx5LmJvZHkudmFsdWU7CgogICAgICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBsaXN0T2ZSZXBvcnRlcnMpIHsKCiAgICAgICAgICAgICAgdmFyIGRhdGFPYmplY3QgPSBsaXN0T2ZSZXBvcnRlcnNbaW5kZXhdOwoKICAgICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIGFjY2VwdGVkCgogICAgICAgICAgICAgIC8vIGluaXRpYWxEYXRhLmNoaWxkcmVucyA9IGRlZXBDbG9uZShkYXRhT2JqZWN0LmNoaWxkcmVucykgfHwge307CiAgICAgICAgICAgICAgLy8gaW5pdGlhbERhdGEgPSBkZWVwQ2xvbmUoZGF0YU9iamVjdC5kYXRhKSB8fCB7fTsKICAgICAgICAgICAgICBkYXRhT2JqZWN0LmRhdGEgPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoZGF0YU9iamVjdC5kYXRhKSB8fCB7fTsKICAgICAgICAgICAgICBkYXRhT2JqZWN0LmNoaWxkcmVuT2JqZWN0cyA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShkYXRhT2JqZWN0LmNoaWxkcmVuT2JqZWN0cykgfHwge307CiAgICAgICAgICAgICAgZGF0YU9iamVjdC5tdXR1YWwgPSBmYWxzZTsKICAgICAgICAgICAgICBkYXRhT2JqZWN0LnJlc3VtZWQgPSB0cnVlOwogICAgICAgICAgICAgIGRhdGFPYmplY3Quc3RhdHVzID0gJ2xpdmUnOyAvLyBwY2g6IGRvIHdlIG5lZCB0aGlzPwogICAgICAgICAgICAgIGRhdGFPYmplY3Quc3luY2hlciA9IF90aGlzOwoKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIuX3Jlc3VtZUNyZWF0ZV0gLSBjcmVhdGUtcmVzdW1lZC1kYXRhT2JqZWN0UmVwb3J0ZXInLCBkYXRhT2JqZWN0KTsKCiAgICAgICAgICAgICAgdmFyIG5ld09iaiA9IG5ldyBfRGF0YU9iamVjdFJlcG9ydGVyMi5kZWZhdWx0KGRhdGFPYmplY3QpOwogICAgICAgICAgICAgIG5ld09iai5yZXN1bWVDaGlsZHJlbnMoZGF0YU9iamVjdC5jaGlsZHJlbk9iamVjdHMpOwogICAgICAgICAgICAgIF90aGlzLl9yZXBvcnRlcnNbZGF0YU9iamVjdC51cmxdID0gbmV3T2JqOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXNvbHZlKF90aGlzLl9yZXBvcnRlcnMpOwogICAgICAgICAgICBpZiAoX3RoaXMyLl9vblJlcG9ydGVyc1Jlc3VtZSkgX3RoaXMyLl9vblJlcG9ydGVyc1Jlc3VtZShfdGhpczIuX3JlcG9ydGVycyk7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gNDA0KSB7CiAgICAgICAgICAgIHJlc29sdmUoe30pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9yZXBvcnRlciBjcmVhdGlvbiByZWplY3RlZAogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3N1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3N1YnNjcmliZShpbnB1dCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CgogICAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uTG9jYWxTdWJzY3JpYmUKICAgICAgICB2YXIgc3Vic2NyaWJlTXNnID0gewogICAgICAgICAgdHlwZTogJ3N1YnNjcmliZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsCiAgICAgICAgICBib2R5OiB7fQogICAgICAgIH07CgogICAgICAgIC8vIEh5cGVydHkgcmVxdWVzdCB0byBiZSBhbiBPYnNlcnZlcgogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI2h5cGVydHktcmVxdWVzdC10by1iZS1hbi1vYnNlcnZlcgoKICAgICAgICAvLyBSZXN1bWUgU3Vic2NyaXB0aW9ucyBmb3IgdGhlIHNhbWUgSHlwZXJ0eSBVUkwKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNyZXN1bWUtc3Vic2NyaXB0aW9ucy1mb3ItdGhlLXNhbWUtaHlwZXJ0eS11cmwKCiAgICAgICAgLy8gUmVzdW1lIFN1YnNjcmlwdGlvbnMgZm9yIGEgY2VydGFpbiB1c2VyIGFuZCBkYXRhIHNjaGVtYSBpbmRlcGVuZGVudGx5IG9mIHRoZSBIeXBlcnR5IFVSTC4KICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNyZXN1bWUtc3Vic2NyaXB0aW9ucy1mb3ItYS1jZXJ0YWluLXVzZXItYW5kLWRhdGEtc2NoZW1hLWluZGVwZW5kZW50bHktb2YtdGhlLWh5cGVydHktdXJsCiAgICAgICAgaWYgKGlucHV0KSB7CiAgICAgICAgICBpZiAoaW5wdXQuaGFzT3duUHJvcGVydHkoJ3AycCcpKSBzdWJzY3JpYmVNc2cuYm9keS5wMnAgPSBpbnB1dC5wMnA7CiAgICAgICAgICBpZiAoaW5wdXQuaGFzT3duUHJvcGVydHkoJ3N0b3JlJykpIHN1YnNjcmliZU1zZy5ib2R5LnN0b3JlID0gaW5wdXQuc3RvcmU7CiAgICAgICAgICBpZiAoaW5wdXQuaGFzT3duUHJvcGVydHkoJ3NjaGVtYScpKSBzdWJzY3JpYmVNc2cuYm9keS5zY2hlbWEgPSBpbnB1dC5zY2hlbWE7CiAgICAgICAgICBpZiAoaW5wdXQuaGFzT3duUHJvcGVydHkoJ2lkZW50aXR5JykpIHN1YnNjcmliZU1zZy5ib2R5LmlkZW50aXR5ID0gaW5wdXQuaWRlbnRpdHk7CiAgICAgICAgICBpZiAoaW5wdXQuaGFzT3duUHJvcGVydHkoJ3Jlc291cmNlJykpIHN1YnNjcmliZU1zZy5ib2R5LnJlc291cmNlID0gaW5wdXQucmVzb3VyY2U7CiAgICAgICAgfQoKICAgICAgICBzdWJzY3JpYmVNc2cuYm9keS5yZXN1bWUgPSBpbnB1dC5yZXN1bWU7CgogICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICAvL2xldCBtdXR1YWxBdXRoZW50aWNhdGlvbiA9IGlucHV0Lm11dHVhbDsKICAgICAgICBpZiAoaW5wdXQuaGFzT3duUHJvcGVydHkoJ211dHVhbCcpKSBzdWJzY3JpYmVNc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbiA9IGlucHV0Lm11dHVhbDsKCiAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyX3N1YnNjcmliZV0gLSBzdWJzY3JpYmUgbWVzc2FnZTogJywgaW5wdXQsIHN1YnNjcmliZU1zZyk7CgogICAgICAgIC8vcmVxdWVzdCBzdWJzY3JpcHRpb24KICAgICAgICAvL1Byb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4KICAgICAgICAvL2ZvciBtb3JlIGluZm8gc2VlIHRoZSBEYXRhUHJvdmlzaW9uYWwgY2xhc3MgZG9jdW1lbnRhdGlvbi4KICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlLXJlc3BvbnNlOiAnLCByZXBseSk7CgogICAgICAgICAgLy9sZXQgc2NoZW1hID0gcmVwbHkuYm9keS5zY2hlbWE7CiAgICAgICAgICB2YXIgb2JqVVJMID0gcmVwbHkuYm9keS5yZXNvdXJjZTsKCiAgICAgICAgICB2YXIgbmV3UHJvdmlzaW9uYWwgPSBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF07CiAgICAgICAgICBkZWxldGUgX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOwogICAgICAgICAgaWYgKG5ld1Byb3Zpc2lvbmFsKSBuZXdQcm92aXNpb25hbC5fcmVsZWFzZUxpc3RlbmVycygpOwoKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPCAyMDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIG5ldyBEYXRhUHJvdmlzaW9uYWw6ICcsIHJlcGx5LmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMsIG9ialVSTCk7CiAgICAgICAgICAgIG5ld1Byb3Zpc2lvbmFsID0gbmV3IF9EYXRhUHJvdmlzaW9uYWwyLmRlZmF1bHQoX3RoaXMuX293bmVyLCBvYmpVUkwsIF90aGlzLl9idXMsIHJlcGx5LmJvZHkuY2hpbGRyZW5SZXNvdXJjZXMpOwogICAgICAgICAgICBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF0gPSBuZXdQcm92aXNpb25hbDsKICAgICAgICAgIH0gZWxzZSBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIG5ldyBEYXRhIE9iamVjdCBPYnNlcnZlcjogJywgcmVwbHksIF90aGlzLl9wcm92aXNpb25hbHMpOwoKICAgICAgICAgICAgLypsZXQgaW5pdGlhbERhdGEgPSByZXBseS5ib2R5LnZhbHVlLmRhdGE7DQogICAgICAgICAgICBpZiAoIWluaXRpYWxEYXRhLmhhc093blByb3BlcnR5KCdjaGlsZHJlbnMnKSkgeyBpbml0aWFsRGF0YS5jaGlsZHJlbnMgPSB7fTsgfQ0KICAgICAgICAgICAgaWYgKCFpbml0aWFsRGF0YS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKSB7IGluaXRpYWxEYXRhLmRhdGEgPSB7fTsgfSovCgogICAgICAgICAgICB2YXIgb2JzZXJ2ZXJJbnB1dCA9IHJlcGx5LmJvZHkudmFsdWU7CgogICAgICAgICAgICBvYnNlcnZlcklucHV0LnN5bmNoZXIgPSBfdGhpczsKICAgICAgICAgICAgLy9vYnNlcnZlcklucHV0LnN0YXR1cyA9ICdvbic7CiAgICAgICAgICAgIG9ic2VydmVySW5wdXQucDJwID0gaW5wdXQucDJwOwogICAgICAgICAgICBvYnNlcnZlcklucHV0LnN0b3JlID0gaW5wdXQuc3RvcmU7CiAgICAgICAgICAgIG9ic2VydmVySW5wdXQuaWRlbnRpdHkgPSBpbnB1dC5pZGVudGl0eTsKICAgICAgICAgICAgb2JzZXJ2ZXJJbnB1dC5yZXN1bWUgPSBpbnB1dC5yZXN1bWU7CgogICAgICAgICAgICAvLyB0b2RvOiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgICAgICBvYnNlcnZlcklucHV0Lm11dHVhbCA9IGlucHV0Lm11dHVhbDsKICAgICAgICAgICAgb2JzZXJ2ZXJJbnB1dC5jaGlsZHJlbiA9IG5ld1Byb3Zpc2lvbmFsLmNoaWxkcmVuOwoKICAgICAgICAgICAgLy9UT0RPOiBtdXR1YWxBdXRoZW50aWNhdGlvbiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0T2JzZXJ2ZXIyLmRlZmF1bHQob2JzZXJ2ZXJJbnB1dCk7CiAgICAgICAgICAgIF90aGlzLl9vYnNlcnZlcnNbb2JqVVJMXSA9IG5ld09iajsKCiAgICAgICAgICAgIHJlc29sdmUobmV3T2JqKTsKICAgICAgICAgICAgbmV3UHJvdmlzaW9uYWwuYXBwbHkobmV3T2JqKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVzdW1lU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzdW1lU3Vic2NyaWJlKGNyaXRlcmlhKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkxvY2FsU3Vic2NyaWJlCiAgICAgICAgdmFyIHN1YnNjcmliZU1zZyA9IHsKICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3ViVVJMLAogICAgICAgICAgYm9keToge30KICAgICAgICB9OwoKICAgICAgICAvLyBIeXBlcnR5IHJlcXVlc3QgdG8gYmUgYW4gT2JzZXJ2ZXIKICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcmVUSElOSy1wcm9qZWN0L3NwZWNzL2Jsb2IvbWFzdGVyL21lc3NhZ2VzL2RhdGEtc3luYy1tZXNzYWdlcy5tZCNoeXBlcnR5LXJlcXVlc3QtdG8tYmUtYW4tb2JzZXJ2ZXIKCiAgICAgICAgLy8gUmVzdW1lIFN1YnNjcmlwdGlvbnMgZm9yIHRoZSBzYW1lIEh5cGVydHkgVVJMCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLXRoZS1zYW1lLWh5cGVydHktdXJsCgogICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciBhIGNlcnRhaW4gdXNlciBhbmQgZGF0YSBzY2hlbWEgaW5kZXBlbmRlbnRseSBvZiB0aGUgSHlwZXJ0eSBVUkwuCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjcmVzdW1lLXN1YnNjcmlwdGlvbnMtZm9yLWEtY2VydGFpbi11c2VyLWFuZC1kYXRhLXNjaGVtYS1pbmRlcGVuZGVudGx5LW9mLXRoZS1oeXBlcnR5LXVybAogICAgICAgIGlmIChjcml0ZXJpYSkgewogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdwMnAnKSkgc3Vic2NyaWJlTXNnLmJvZHkucDJwID0gY3JpdGVyaWEucDJwOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdzdG9yZScpKSBzdWJzY3JpYmVNc2cuYm9keS5zdG9yZSA9IGNyaXRlcmlhLnN0b3JlOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdzY2hlbWEnKSkgc3Vic2NyaWJlTXNnLmJvZHkuc2NoZW1hID0gY3JpdGVyaWEuc2NoZW1hOwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdpZGVudGl0eScpKSBzdWJzY3JpYmVNc2cuYm9keS5pZGVudGl0eSA9IGNyaXRlcmlhLmlkZW50aXR5OwogICAgICAgICAgaWYgKGNyaXRlcmlhLmhhc093blByb3BlcnR5KCdyZXNvdXJjZScpKSBzdWJzY3JpYmVNc2cuYm9keS5yZXNvdXJjZSA9IGNyaXRlcmlhLnVybDsKICAgICAgICB9CgogICAgICAgIHN1YnNjcmliZU1zZy5ib2R5LnJlc3VtZSA9IGNyaXRlcmlhLnJlc3VtZTsKCiAgICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgIHZhciBtdXR1YWxBdXRoZW50aWNhdGlvbiA9IGNyaXRlcmlhLm11dHVhbDsKICAgICAgICBpZiAoY3JpdGVyaWEuaGFzT3duUHJvcGVydHkoJ211dHVhbCcpKSBzdWJzY3JpYmVNc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbiA9IG11dHVhbEF1dGhlbnRpY2F0aW9uOwoKICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlIG1lc3NhZ2U6ICcsIGNyaXRlcmlhLCBzdWJzY3JpYmVNc2cpOwoKICAgICAgICAvL3JlcXVlc3Qgc3Vic2NyaXB0aW9uCiAgICAgICAgLy9Qcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uCiAgICAgICAgLy9mb3IgbW9yZSBpbmZvIHNlZSB0aGUgRGF0YVByb3Zpc2lvbmFsIGNsYXNzIGRvY3VtZW50YXRpb24uCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShzdWJzY3JpYmVNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIHN1YnNjcmliZS1yZXN1bWVkLXJlc3BvbnNlOiAnLCByZXBseSk7CgogICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7CgogICAgICAgICAgdmFyIG5ld1Byb3Zpc2lvbmFsID0gX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOwogICAgICAgICAgZGVsZXRlIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXTsKICAgICAgICAgIGlmIChuZXdQcm92aXNpb25hbCkgbmV3UHJvdmlzaW9uYWwuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKCiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlIDwgMjAwKSB7CiAgICAgICAgICAgIC8vIHRvZG86IGNoZWNrIGlmIHRoaXMgaXMgbmVlZGVkIGZvciB0aGUgcmVzdW1lCgogICAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gcmVzdW1lIG5ldyBEYXRhUHJvdmlzaW9uYWw6ICcsIHJlcGx5LCBvYmpVUkwpOwogICAgICAgICAgICBuZXdQcm92aXNpb25hbCA9IG5ldyBfRGF0YVByb3Zpc2lvbmFsMi5kZWZhdWx0KF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsKICAgICAgICAgICAgX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdID0gbmV3UHJvdmlzaW9uYWw7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CgogICAgICAgICAgICB2YXIgbGlzdE9mT2JzZXJ2ZXJzID0gcmVwbHkuYm9keS52YWx1ZTsKCiAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGxpc3RPZk9ic2VydmVycykgewoKICAgICAgICAgICAgICB2YXIgZGF0YU9iamVjdCA9IGxpc3RPZk9ic2VydmVyc1tpbmRleF07CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIFJlc3VtZSBPYmplY3QgT2JzZXJ2ZXI6ICcsIHJlcGx5LCBkYXRhT2JqZWN0LCBfdGhpcy5fcHJvdmlzaW9uYWxzKTsKCiAgICAgICAgICAgICAgZGF0YU9iamVjdC5jaGlsZHJlbk9iamVjdHMgPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoZGF0YU9iamVjdC5jaGlsZHJlbk9iamVjdHMpIHx8IHt9OwogICAgICAgICAgICAgIGRhdGFPYmplY3QuZGF0YSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShkYXRhT2JqZWN0LmRhdGEpIHx8IHt9OwogICAgICAgICAgICAgIGRhdGFPYmplY3QucmVzdW1lZCA9IHRydWU7CiAgICAgICAgICAgICAgZGF0YU9iamVjdC5zeW5jaGVyID0gX3RoaXM7CgogICAgICAgICAgICAgIC8vVE9ETzogbXV0dWFsQXV0aGVudGljYXRpb24gRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIuX3Jlc3VtZVN1YnNjcmliZV0gLSBjcmVhdGUgbmV3IGRhdGFPYmplY3Q6ICcsIGRhdGFPYmplY3QpOwogICAgICAgICAgICAgIHZhciBuZXdPYmogPSBuZXcgX0RhdGFPYmplY3RPYnNlcnZlcjIuZGVmYXVsdChkYXRhT2JqZWN0KTsKICAgICAgICAgICAgICBuZXdPYmoucmVzdW1lQ2hpbGRyZW5zKGRhdGFPYmplY3QuY2hpbGRyZW5PYmplY3RzKTsKCiAgICAgICAgICAgICAgX3RoaXMuX29ic2VydmVyc1tvYmpVUkxdID0gbmV3T2JqOwoKICAgICAgICAgICAgICBpZiAoX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF0uYXBwbHkobmV3T2JqKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuX29ic2VydmVycyk7CgogICAgICAgICAgICBpZiAoX3RoaXMzLl9vbk9ic2VydmVyc1Jlc3VtZSkgX3RoaXMzLl9vbk9ic2VydmVyc1Jlc3VtZShfdGhpcy5fb2JzZXJ2ZXJzKTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVwbHkuYm9keS5jb2RlID09PSA0MDQpIHsKICAgICAgICAgICAgcmVzb2x2ZSh7fSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSBsb2NhbCBydW50aW1lIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQoKICB9LCB7CiAgICBrZXk6ICdfb25Gb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Gb3J3YXJkKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJlcG9ydGVyID0gX3RoaXMuX3JlcG9ydGVyc1ttc2cuYm9keS50b107CiAgICAgIHJlcG9ydGVyLl9vbkZvcndhcmQobXNnKTsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBTeW5jaGVyIC0+IGNyZWF0ZSAodGhpcyBpcyBhY3R1YWxseSBhbiBpbnZpdGF0aW9uIHRvIHN1YnNjcmliZSkKCiAgfSwgewogICAga2V5OiAnX29uUmVtb3RlQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVDcmVhdGUobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL3JlbW92ZSAiL3N1YnNjcmlwdGlvbiIgZnJvbSB0aGUgVVJMCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5mcm9tLnNsaWNlKDAsIC0xMyk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmJvZHkuc291cmNlLAogICAgICAgIHVybDogcmVzb3VyY2UsCiAgICAgICAgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEsCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLAogICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgYWNrOiBmdW5jdGlvbiBhY2sodHlwZSkgewogICAgICAgICAgdmFyIGxUeXBlID0gMjAwOwogICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgbFR5cGUgPSB0eXBlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vc2VuZCBhY2sgcmVzcG9uc2UgbWVzc2FnZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IGxUeXBlIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbU3luY2hlcl0gTk9USUZJQ0FUSU9OLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gZGVsZXRlCgogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZURlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlRGVsZXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9yZW1vdmUgIi9zdWJzY3JpcHRpb24iIGZyb20gdGhlIFVSTAogICAgICB2YXIgcmVzb3VyY2UgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fb2JzZXJ2ZXJzW3Jlc291cmNlXTsKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIHZhciBldmVudCA9IHsKICAgICAgICAgIHR5cGU6IG1zZy50eXBlLAogICAgICAgICAgdXJsOiByZXNvdXJjZSwKICAgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgICBhY2s6IGZ1bmN0aW9uIGFjayh0eXBlKSB7CiAgICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsKICAgICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgICBsVHlwZSA9IHR5cGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vVE9ETzogYW55IG90aGVyIGRpZmZlcmVudCBvcHRpb25zIGZvciB0aGUgcmVsZWFzZSBwcm9jZXNzLCBsaWtlIGFjY2VwdCBidXQgbm9yIHJlbGVhc2UgbG9jYWw/CiAgICAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgb2JqZWN0LmRlbGV0ZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikgewogICAgICAgICAgY29uc29sZS5sb2coJ05PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwNCwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgLyoqDQogICAgKiBDYWxsYmFjayBzeXN0ZW0gdG8gdHJpZ2dlciB0aGUgcmVzdW1lZCByZXBvcnRlcnMNCiAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAtIGZ1bmN0aW9uIGNhbGxiYWNrIHdoaWNoIHdpbGwgYmUgaW52b2tlZA0KICAgICogQHJldHVybiB7T2JqZWN0PFVSTCwgRGF0YU9iamVjdFJlcG9ydGVyPn0gUmV0dXJuIG9uZSBvYmplY3Qgd2l0aCBhbGwgcmVzdW1lZCByZXBvcnRlcnM7DQogICAgKi8KCiAgfSwgewogICAga2V5OiAnb25SZXBvcnRlcnNSZXN1bWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVwb3J0ZXJzUmVzdW1lKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVwb3J0ZXJzUmVzdW1lID0gY2FsbGJhY2s7CiAgICB9CgogICAgLyoqDQogICAgKiBDYWxsYmFjayBzeXN0ZW0gdG8gdHJpZ2dlciB0aGUgcmVzdW1lZCBvYnNlcnZlcnMNCiAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAtIGZ1bmN0aW9uIGNhbGxiYWNrIHdoaWNoIHdpbGwgYmUgaW52b2tlZA0KICAgICogQHJldHVybiB7T2JqZWN0PFVSTCwgRGF0YU9iamVjdE9ic2VydmVyPn0gUmV0dXJuIG9uZSBvYmplY3Qgd2l0aCBhbGwgcmVzdW1lZCBvYnNlcnZlcnM7DQogICAgKi8KCiAgfSwgewogICAga2V5OiAnb25PYnNlcnZlcnNSZXN1bWUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uT2JzZXJ2ZXJzUmVzdW1lKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uT2JzZXJ2ZXJzUmVzdW1lID0gY2FsbGJhY2s7CiAgICB9CiAgfSwgewogICAga2V5OiAnb3duZXInLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9vd25lcjsKICAgIH0KCiAgICAvKioNCiAgICAqIEFsbCBvd25lZCByZXBvcnRlcnMsIHRoZSBvbmVzIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IGEgY3JlYXRlDQogICAgKiBAdHlwZSB7T2JqZWN0PFVSTCwgRGF0YU9iamVjdFJlcG9ydGVyPn0NCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZXBvcnRlcnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZXBvcnRlcnM7CiAgICB9CgogICAgLyoqDQogICAgKiBBbGwgb3duZWQgb2JzZXJ2ZXJzLCB0aGUgb25lcyB0aGF0IHdlcmUgY3JlYXRlZCBieSBhIGxvY2FsIHN1YnNjcmlwdGlvbg0KICAgICogQHR5cGUge09iamVjdDxVUkwsIERhdGFPYmplY3RPYnNlcnZlcj59DQogICAgKi8KCiAgfSwgewogICAga2V5OiAnb2JzZXJ2ZXJzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fb2JzZXJ2ZXJzOwogICAgfQogIH1dKTsKICByZXR1cm4gU3luY2hlcjsKfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gU3luY2hlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTM1ICovLAovKiAxMzYgKi8sCi8qIDEzNyAqLywKLyogMTM4ICovLAovKiAxMzkgKi8sCi8qIDE0MCAqLywKLyogMTQxICovLAovKiAxNDIgKi8sCi8qIDE0MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLkRhdGFPYmplY3RPYnNlcnZlciA9IGV4cG9ydHMuRGF0YU9iamVjdFJlcG9ydGVyID0gZXhwb3J0cy5TeW5jaGVyID0gdW5kZWZpbmVkOwoKdmFyIF9TeW5jaGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpOwoKdmFyIF9TeW5jaGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1N5bmNoZXIpOwoKdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMik7Cgp2YXIgX0RhdGFPYmplY3RSZXBvcnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0UmVwb3J0ZXIpOwoKdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMSk7Cgp2YXIgX0RhdGFPYmplY3RPYnNlcnZlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0T2JzZXJ2ZXIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuU3luY2hlciA9IF9TeW5jaGVyMi5kZWZhdWx0OwpleHBvcnRzLkRhdGFPYmplY3RSZXBvcnRlciA9IF9EYXRhT2JqZWN0UmVwb3J0ZXIyLmRlZmF1bHQ7CmV4cG9ydHMuRGF0YU9iamVjdE9ic2VydmVyID0gX0RhdGFPYmplY3RPYnNlcnZlcjIuZGVmYXVsdDsKCi8qKiovIH0pLAovKiAxNDQgKi8sCi8qIDE0NSAqLywKLyogMTQ2ICovLAovKiAxNDcgKi8sCi8qIDE0OCAqLywKLyogMTQ5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLwoKLyoqDQogKiBAYWNjZXNzIHByaXZhdGUNCiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcgZGVsdGEgY2hhbmdlcyBpbiByZW1vdGUgb2JqZWN0cywgYmVmb3JlIHRoZSByZXNwb25zZSBvZiBzdWJzY3JpcHRpb24gcmVhY2ggdGhlIG9ic2VydmVyLg0KICogSXQncyB1c2VkIGluIFN5bmNoZXIgLT4gc3Vic2NyaWJlLiBUaGUgZmxvdyBpcyBkZWZpbmVkIGFzOg0KICogMS4gKG9ic2VydmVyKSAtLXN1YnNjcmliZS0tPiAocmVwb3J0ZXIpDQogKiAyLiAob2JzZXJ2ZXIpIDwtLWRlbHRhIHVwZGF0ZXMtLSAocmVwb3J0ZXIpDQogKiAzLiAob2JzZXJ2ZXIpIDwtLXN1YnNjcmliZSByZXNwb25zZS0tIChyZXBvcnRlcikNCiAqIFRoaXMgbWVhbnMgdGhhdCB0aGVyZSBjb3VsZCBiZSBkZWx0YSB1cGRhdGVzIHRyYW5zZmVycmVkIGJlZm9yZSB0aGUgc3Vic2NyaXB0aW9uIGNvbmZpcm1hdGlvbi4NCiAqIFNpbmNlIHRoZXJlIGlzIG5vIERhdGFPYmplY3RPYnNlcnZlciBiZWZvcmUgdGhlIHVic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiwgdGhlcmUgc2hvdWxkIGJlIHNvbWUgb3RoZXIgb2JqZWN0IGNvbGxlY3RpbmcgdGhlIHVwZGF0ZXMuDQogKiBQcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uDQogKi8KdmFyIERhdGFQcm92aXNpb25hbCA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlDQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQ0KICBfbGlzdGVuZXI6IE1zZ0xpc3RlbmVyDQogICAgX2NoYW5nZXM6IFtdDQogICovCgogIGZ1bmN0aW9uIERhdGFQcm92aXNpb25hbChvd25lciwgdXJsLCBidXMsIGNoaWxkcmVuKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhUHJvdmlzaW9uYWwpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX3RoaXMuX293bmVyID0gb3duZXI7CiAgICBfdGhpcy5fdXJsID0gdXJsOwogICAgX3RoaXMuX2J1cyA9IGJ1czsKICAgIF90aGlzLl9jaGlsZHJlbiA9IGNoaWxkcmVuOwoKICAgIF90aGlzLl9jaGFuZ2VzID0gW107CiAgICBfdGhpcy5fYWxsb2NhdGVMaXN0ZW5lcnMoKTsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFQcm92aXNpb25hbCwgW3sKICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2xpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFQcm92aXNpb25hbC0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOwogICAgICAgIF90aGlzLl9jaGFuZ2VzLnB1c2gobXNnKTsKICAgICAgfSk7CgogICAgICAvKg0KICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzID0gW107DQogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVuKSB7DQogICAgICAgIGxldCBjaGlsZEJhc2VVUkwgPSB1cmwgKyAnL2NoaWxkcmVuLyc7DQogICAgICAgIF90aGlzLl9jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4gew0KICAgICAgICAgIGxldCBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOw0KICAgICAgICAgIGxldCBsaXN0ZW5lciA9IF90aGlzLl9idXMuYWRkTGlzdGVuZXIoY2hpbGRVUkwsIChtc2cpID0+IHsNCiAgICAgICAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYNCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTsNCiAgICAgICAgfSk7DQogICAgICB9Ki8KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fbGlzdGVuZXIucmVtb3ZlKCk7CgogICAgICAvKl90aGlzLl9jaGlsZHJlbkxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gew0KICAgICAgICBsaXN0ZW5lci5yZW1vdmUoKTsNCiAgICAgIH0pOyovCiAgICB9CiAgfSwgewogICAga2V5OiAnYXBwbHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KG9ic2VydmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLl9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGNoYW5nZSkgewogICAgICAgIG9ic2VydmVyLl9jaGFuZ2VPYmplY3Qob2JzZXJ2ZXIuX3N5bmNPYmosIGNoYW5nZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2NoaWxkcmVuJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhUHJvdmlzaW9uYWw7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFQcm92aXNpb25hbDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTUwICovLAovKiAxNTEgKi8sCi8qIDE1MiAqLywKLyogMTUzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMTYwKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDE1NCAqLywKLyogMTU1ICovLAovKiAxNTYgKi8sCi8qIDE1NyAqLywKLyogMTU4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTY0KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5hc3NpZ247CgovKioqLyB9KSwKLyogMTU5ICovLAovKiAxNjAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpOwp2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKICByZXR1cm4gJE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSk7Cn07CgovKioqLyB9KSwKLyogMTYxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCi8vIDE5LjEuMi4xIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UsIC4uLikKdmFyIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCkKICAsIGdPUFMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkKICAsIHBJRSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSkKICAsIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikKICAsIElPYmplY3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NikKICAsICRhc3NpZ24gID0gT2JqZWN0LmFzc2lnbjsKCi8vIHNob3VsZCB3b3JrIHdpdGggc3ltYm9scyBhbmQgc2hvdWxkIGhhdmUgZGV0ZXJtaW5pc3RpYyBwcm9wZXJ0eSBvcmRlciAoVjggYnVnKQptb2R1bGUuZXhwb3J0cyA9ICEkYXNzaWduIHx8IF9fd2VicGFja19yZXF1aXJlX18oMTEpKGZ1bmN0aW9uKCl7CiAgdmFyIEEgPSB7fQogICAgLCBCID0ge30KICAgICwgUyA9IFN5bWJvbCgpCiAgICAsIEsgPSAnYWJjZGVmZ2hpamtsbW5vcHFyc3QnOwogIEFbU10gPSA3OwogIEsuc3BsaXQoJycpLmZvckVhY2goZnVuY3Rpb24oayl7IEJba10gPSBrOyB9KTsKICByZXR1cm4gJGFzc2lnbih7fSwgQSlbU10gIT0gNyB8fCBPYmplY3Qua2V5cygkYXNzaWduKHt9LCBCKSkuam9pbignJykgIT0gSzsKfSkgPyBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCBzb3VyY2UpeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzCiAgdmFyIFQgICAgID0gdG9PYmplY3QodGFyZ2V0KQogICAgLCBhTGVuICA9IGFyZ3VtZW50cy5sZW5ndGgKICAgICwgaW5kZXggPSAxCiAgICAsIGdldFN5bWJvbHMgPSBnT1BTLmYKICAgICwgaXNFbnVtICAgICA9IHBJRS5mOwogIHdoaWxlKGFMZW4gPiBpbmRleCl7CiAgICB2YXIgUyAgICAgID0gSU9iamVjdChhcmd1bWVudHNbaW5kZXgrK10pCiAgICAgICwga2V5cyAgID0gZ2V0U3ltYm9scyA/IGdldEtleXMoUykuY29uY2F0KGdldFN5bWJvbHMoUykpIDogZ2V0S2V5cyhTKQogICAgICAsIGxlbmd0aCA9IGtleXMubGVuZ3RoCiAgICAgICwgaiAgICAgID0gMAogICAgICAsIGtleTsKICAgIHdoaWxlKGxlbmd0aCA+IGopaWYoaXNFbnVtLmNhbGwoUywga2V5ID0ga2V5c1tqKytdKSlUW2tleV0gPSBTW2tleV07CiAgfSByZXR1cm4gVDsKfSA6ICRhc3NpZ247CgovKioqLyB9KSwKLyogMTYyICovLAovKiAxNjMgKi8sCi8qIDE2NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjMuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlKQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CgokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiwgJ09iamVjdCcsIHthc3NpZ246IF9fd2VicGFja19yZXF1aXJlX18oMTYxKX0pOwoKLyoqKi8gfSksCi8qIDE2NSAqLywKLyogMTY2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi42IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCkKdmFyIHRvSU9iamVjdCAgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgJGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpLmY7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgnZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yJywgZnVuY3Rpb24oKXsKICByZXR1cm4gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpewogICAgcmV0dXJuICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodG9JT2JqZWN0KGl0KSwga2V5KTsKICB9Owp9KTsKCi8qKiovIH0pCi8qKioqKiovIF0pOwp9KTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSW5kbFluQmhZMnM2THk4dmQyVmljR0ZqYXk5MWJtbDJaWEp6WVd4TmIyUjFiR1ZFWldacGJtbDBhVzl1UHpWallUWWlMQ0ozWldKd1lXTnJPaTh2TDNkbFluQmhZMnN2WW05dmRITjBjbUZ3SURRMU5EQmlNemhqWXpObE5XVTVNRE16WXpKalAyUXlNallpTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZZMjl5WlM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5bmJHOWlZV3d1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWkdWelkzSnBjSFJ2Y25NdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmQydHpMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjlpYW1WamRDMWtjQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTloYmkxdlltcGxZM1F1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYVhNdGIySnFaV04wTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJocFpHVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyaGxiSEJsY25NdlkyeGhjM05EWVd4c1EyaGxZMnN1YW5NL01qRmhaaUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWxlSEJ2Y25RdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJobGJIQmxjbk12WTNKbFlYUmxRMnhoYzNNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZlptRnBiSE11YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYUdGekxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzUnZMV2x2WW1wbFkzUXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZZM1I0TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNCeWIzQmxjblI1TFdSbGMyTXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhWFJsY21GMGIzSnpMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMlJ2YlMxamNtVmhkR1V1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMV3RsZVhNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZllTMW1kVzVqZEdsdmJpNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWpiMll1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmZEc4dGNISnBiV2wwYVhabExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzTmxkQzEwYnkxemRISnBibWN0ZEdGbkxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzVnBaQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlrWldacGJtVmtMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMmxsT0Mxa2IyMHRaR1ZtYVc1bExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyeHBZbkpoY25rdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMyaGhjbVZrTFd0bGVTNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOTBieTFwYm5SbFoyVnlMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMlZ1ZFcwdFluVm5MV3RsZVhNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMyaGhjbVZrTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlqYjNKbExXcHpMMjlpYW1WamRDOW5aWFF0Y0hKdmRHOTBlWEJsTFc5bUxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzUnZMVzlpYW1WamRDNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMkpoWW1Wc0xYSjFiblJwYldVdlkyOXlaUzFxY3k5dlltcGxZM1F2WkdWbWFXNWxMWEJ5YjNCbGNuUjVMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WW1GaVpXd3RjblZ1ZEdsdFpTOW9aV3h3WlhKekwybHVhR1Z5YVhSekxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5b1pXeHdaWEp6TDNCdmMzTnBZbXhsUTI5dWMzUnlkV04wYjNKU1pYUjFjbTR1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Wm00dmIySnFaV04wTDJSbFptbHVaUzF3Y205d1pYSjBlUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl2WW1wbFkzUXRZM0psWVhSbExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbTlpYW1WamRDNWtaV1pwYm1VdGNISnZjR1Z5ZEhrdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTFrWldacGJtVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyTnZjbVV0YW5NdmFuTnZiaTl6ZEhKcGJtZHBabmt1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMWEJwWlM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5b2RHMXNMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjlpYW1WamRDMW5jRzh1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMV3RsZVhNdGFXNTBaWEp1WVd3dWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFhOaGNDNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXlaV1JsWm1sdVpTNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOTBieTFzWlc1bmRHZ3Vhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZkMnR6TFdSbFptbHVaUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTkzYTNNdFpYaDBMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZaWE0yTG5OMGNtbHVaeTVwZEdWeVlYUnZjaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMM2RsWWk1a2IyMHVhWFJsY21GaWJHVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZabTR2YW5OdmJpOXpkSEpwYm1kcFpua3Vhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZZMnhoYzNOdlppNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXBiMkpxWldOMExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyOWlhbVZqZEMxbmIzQmtMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjlpYW1WamRDMW5iM0J6TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlvWld4d1pYSnpMM1I1Y0dWdlppNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWhaR1F0ZEc4dGRXNXpZMjl3WVdKc1pYTXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZZWEp5WVhrdGFXNWpiSFZrWlhNdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTFqY21WaGRHVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhWFJsY2kxemRHVndMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjlpYW1WamRDMWtjSE11YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMV2R2Y0c0dWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMzUnlhVzVuTFdGMExtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzUmhjMnN1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmZEc4dGFXNWtaWGd1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlsY3pZdVlYSnlZWGt1YVhSbGNtRjBiM0l1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMk52Y21VdGFuTXZiMkpxWldOMEwydGxlWE11YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2YzNKakwzVjBhV3h6TDNWMGFXeHpMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WW1GaVpXd3RjblZ1ZEdsdFpTOWpiM0psTFdwekwzQnliMjFwYzJVdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmJXVjBZUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMk52Y21VdVoyVjBMV2wwWlhKaGRHOXlMVzFsZEdodlpDNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMkpoWW1Wc0xYSjFiblJwYldVdlkyOXlaUzFxY3k5dlltcGxZM1F2WTNKbFlYUmxMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WW1GaVpXd3RjblZ1ZEdsdFpTOWpiM0psTFdwekwyOWlhbVZqZEM5elpYUXRjSEp2ZEc5MGVYQmxMVzltTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlqYjNKbExXcHpMM041YldKdmJDNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMkpoWW1Wc0xYSjFiblJwYldVdlkyOXlaUzFxY3k5emVXMWliMnd2YVhSbGNtRjBiM0l1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Wm00dmIySnFaV04wTDJOeVpXRjBaUzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzltYmk5dlltcGxZM1F2WjJWMExYQnliM1J2ZEhsd1pTMXZaaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzltYmk5dlltcGxZM1F2YTJWNWN5NXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl2WW1wbFkzUXZjMlYwTFhCeWIzUnZkSGx3WlMxdlppNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl3Y205dGFYTmxMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDNONWJXSnZiQzlwYm1SbGVDNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl6ZVcxaWIyd3ZhWFJsY21GMGIzSXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZZVzR0YVc1emRHRnVZMlV1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWlc1MWJTMXJaWGx6TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJadmNpMXZaaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlwYm5admEyVXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhWE10WVhKeVlYa3RhWFJsY2k1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5cGN5MWhjbkpoZVM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5cGRHVnlMV05oYkd3dWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTFrWlhSbFkzUXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhMlY1YjJZdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmJXbGpjbTkwWVhOckxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyOWlhbVZqZEMxbmIzQnVMV1Y0ZEM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5eVpXUmxabWx1WlMxaGJHd3Vhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZjMlYwTFhCeWIzUnZMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM05sZEMxemNHVmphV1Z6TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNOd1pXTnBaWE10WTI5dWMzUnlkV04wYjNJdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5bGN6WXViMkpxWldOMExtTnlaV0YwWlM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDJWek5pNXZZbXBsWTNRdVoyVjBMWEJ5YjNSdmRIbHdaUzF2Wmk1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDJWek5pNXZZbXBsWTNRdWEyVjVjeTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMlZ6Tmk1dlltcGxZM1F1YzJWMExYQnliM1J2ZEhsd1pTMXZaaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMlZ6Tmk1d2NtOXRhWE5sTG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WlhNMkxuTjViV0p2YkM1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDJWek55NXplVzFpYjJ3dVlYTjVibU10YVhSbGNtRjBiM0l1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlsY3pjdWMzbHRZbTlzTG05aWMyVnlkbUZpYkdVdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmMzSmpMM041Ym1Ob1pYSXZSR0YwWVU5aWFtVmpkRU5vYVd4a0xtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZjSEp2ZUhrdGIySnpaWEoyWlM5cGJtUmxlQzVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTl6Y21NdmMzbHVZMmhsY2k5RVlYUmhUMkpxWldOMFQySnpaWEoyWlhJdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmMzSmpMM041Ym1Ob1pYSXZSR0YwWVU5aWFtVmpkRkpsY0c5eWRHVnlMbXB6SWl3aWQyVmljR0ZqYXpvdkx5OHVMM055WXk5emVXNWphR1Z5TDBSaGRHRlBZbXBsWTNRdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmMzSmpMM041Ym1Ob1pYSXZVSEp2ZUhsUFltcGxZM1F1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMk52Y21VdGFuTXZiMkpxWldOMEwyRnpjMmxuYmk1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wySmhZbVZzTFhKMWJuUnBiV1V2YUdWc2NHVnljeTluWlhRdWFuTWlMQ0ozWldKd1lXTnJPaTh2THk0dmMzSmpMM041Ym1Ob1pYSXZVM2x1WTJobGNpNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOXpjbU12VTNsdVkyaGxjaTVxY3lJc0luZGxZbkJoWTJzNkx5OHZMaTl6Y21NdmMzbHVZMmhsY2k5RVlYUmhVSEp2ZG1semFXOXVZV3d1YW5NaUxDSjNaV0p3WVdOck9pOHZMeTR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMk52Y21VdGFuTXZiMkpxWldOMEwyZGxkQzF2ZDI0dGNISnZjR1Z5ZEhrdFpHVnpZM0pwY0hSdmNpNXFjeUlzSW5kbFluQmhZMnM2THk4dkxpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOW1iaTl2WW1wbFkzUXZZWE56YVdkdUxtcHpJaXdpZDJWaWNHRmphem92THk4dUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMMjlpYW1WamRDOW5aWFF0YjNkdUxYQnliM0JsY25SNUxXUmxjMk55YVhCMGIzSXVhbk1pTENKM1pXSndZV05yT2k4dkx5NHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZiMkpxWldOMExXRnpjMmxuYmk1cWN5SXNJbmRsWW5CaFkyczZMeTh2TGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDJWek5pNXZZbXBsWTNRdVlYTnphV2R1TG1weklpd2lkMlZpY0dGamF6b3ZMeTh1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WlhNMkxtOWlhbVZqZEM1blpYUXRiM2R1TFhCeWIzQmxjblI1TFdSbGMyTnlhWEIwYjNJdWFuTWlYU3dpYm1GdFpYTWlPbHNpWkdsMmFXUmxWVkpNSWl3aVpHbDJhV1JsUlcxaGFXd2lMQ0psYlhCMGVVOWlhbVZqZENJc0ltUmxaWEJEYkc5dVpTSXNJbWRsZEZWelpYSlZVa3hHY205dFJXMWhhV3dpTENKblpYUlZjMlZ5UlcxaGFXeEdjbTl0VlZKTUlpd2lZMjl1ZG1WeWRGUnZWWE5sY2xWU1RDSXNJbU5vWldOclFYUjBjbWxpZFhSbElpd2ljR0Z5YzJWQmRIUnlhV0oxZEdWeklpd2lkWEpzSWl3aVJYSnliM0lpTENKeVpXTjFjbk5sSWl3aWRtRnNkV1VpTENKeVpXZGxlQ0lzSW5OMVluTjBJaXdpY0dGeWRITWlMQ0p5WlhCc1lXTmxJaXdpYzNCc2FYUWlMQ0pwYm1Oc2RXUmxjeUlzSW5KbGMzVnNkQ0lzSW5SNWNHVWlMQ0prYjIxaGFXNGlMQ0pwWkdWdWRHbDBlU0lzSW1OdmJuTnZiR1VpTENKbGNuSnZjaUlzSW5OamFHVnRaU0lzSW5OMVluTjBjaUlzSW1sdVpHVjRUMllpTENKbGJXRnBiQ0lzSW1sdVpHVjRUMlpCZENJc0luVnpaWEp1WVcxbElpd2ljM1ZpYzNSeWFXNW5JaXdpYkdWdVozUm9JaXdpYjJKcVpXTjBJaXdpYjJKcUlpd2lTbE5QVGlJc0luQmhjbk5sSWl3aWRYTmxja1Z0WVdsc0lpd2lkWE5sY2xWU1RDSXNJbWxrWlc1MGFXWnBaWElpTENKa2FYWnBaR1ZrVlZKTUlpd2ljR0YwYUNJc0lteHBjM1FpTENKbWFXNWhiQ0lzSW5SbGMzUWlMQ0p0WVhSamFDSXNJbTBpTENKbGVHVmpJaXdpYVc1a1pYZ2lMQ0pzWVhOMFNXNWtaWGdpTENKbWIzSkZZV05vSWl3aVozSnZkWEJKYm1SbGVDSXNJbkIxYzJnaUxDSnRZWEFpTENKcGRHVnRJaXdpYkc5bklpd2ljM1J5YVc1bk15SXNJbk4wY21sdVp6RWlMQ0poY25KaGVURWlMQ0p6ZEhKcGJtY3lJaXdpWVhKeVlYa3lJaXdpYzJ4cFkyVWlMQ0pqYjI1allYUWlMQ0ptYVd4MFpYSWlMQ0pDYjI5c1pXRnVJaXdpUkdGMFlVOWlhbVZqZEVOb2FXeGtJaXdpYVc1d2RYUWlMQ0pmZEdocGN5SXNJblJvY205M1RXRnVaR0YwYjNKNVVHRnliVTFwYzNOcGJtZEZjbkp2Y2lJc0luQmhjaUlzSW5CaGNtVnVkQ0lzSWw5d1lYSmxiblFpTENKZmRYSnNJaXdpWTNKbFlYUmxaQ0lzSWw5amNtVmhkR1ZrSWl3aWNtVndiM0owWlhJaUxDSmZjbVZ3YjNKMFpYSWlMQ0p5ZFc1MGFXMWxJaXdpWDNKMWJuUnBiV1VpTENKelkyaGxiV0VpTENKZmMyTm9aVzFoSWl3aWNHRnlaVzUwVDJKcVpXTjBJaXdpWDNCaGNtVnVkRTlpYW1WamRDSXNJbTVoYldVaUxDSmZibUZ0WlNJc0ltUmxjMk55YVhCMGFXOXVJaXdpWDJSbGMyTnlhWEIwYVc5dUlpd2lkR0ZuY3lJc0lsOTBZV2R6SWl3aWNtVnpiM1Z5WTJWeklpd2lYM0psYzI5MWNtTmxjeUlzSW05aWMyVnlkbVZ5VTNSdmNtRm5aU0lzSWw5dlluTmxjblpsY2xOMGIzSmhaMlVpTENKd2RXSnNhV05QWW5ObGNuWmhkR2x2YmlJc0lsOXdkV0pzYVdOUFluTmxjblpoZEdsdmJpSXNJbVJoZEdFaUxDSmZjM2x1WTA5aWFpSXNJbDlpZFhNaUxDSmZiM2R1WlhJaUxDSmZZV3hzYjJOaGRHVk1hWE4wWlc1bGNuTWlMQ0pmYldWMFlXUmhkR0VpTENKZmJHbHpkR1Z1WlhJaUxDSmhaR1JNYVhOMFpXNWxjaUlzSW0xelp5SXNJbWxrSWl3aVgyMXpaMGxrSWl3aVgyOXVVbVZ6Y0c5dWMyVWlMQ0p5WlcxdmRtVWlMQ0pmY21Wc1pXRnpaVXhwYzNSbGJtVnljeUlzSW1OaGJHeGlZV05ySWl3aWIySnpaWEoyWlNJc0ltVjJaVzUwSWl3aVgyOXVVbVZ6Y0c5dWMyVklZVzVrYkdWeUlpd2lZbTlrZVNJc0luTnZkWEpqWlNJc0ltTnZaR1VpTENKZlkyaHBiR1JKWkNJc0lsOXBaR1Z1ZEdsMGVTSXNJa1pwYkhSbGNsUjVjR1VpTENKQlRsa2lMQ0pUVkVGU1ZDSXNJa1ZZUVVOVUlpd2lSR0YwWVU5aWFtVmpkRTlpYzJWeWRtVnlJaXdpWDNabGNuTnBiMjRpTENKMlpYSnphVzl1SWl3aVgyWnBiSFJsY25NaUxDSmZiMjVHYVd4MFpYSWlMQ0pmWTJoaGJtZGxUR2x6ZEdWdVpYSWlMQ0pmWTJoaGJtZGxUMkpxWldOMElpd2lYM041Ym1Ob1pYSWlMQ0pmYjJKelpYSjJaWEp6SWl3aWRXNVRkV0p6WTNKcFltVk5jMmNpTENKbWNtOXRJaXdpZEc4aUxDSmZjM1ZpVlZKTUlpd2ljbVZ6YjNWeVkyVWlMQ0p3YjNOMFRXVnpjMkZuWlNJc0luSmxjR3g1SWl3aWEyVjVJaXdpWm1sc2RHVnlUMkpxSWl3aWFXUjRJaXdpWm1sbGJHUWlMQ0pFWVhSaFQySnFaV04wVW1Wd2IzSjBaWElpTENKZmMzVmljMk55YVhCMGFXOXVjeUlzSWw5dmJrTm9ZVzVuWlNJc0lsOXZZbXBsWTNSTWFYTjBaVzVsY2lJc0lsOXZibEpsWVdRaUxDSnZZbk5sY25abGNuTWlMQ0pwYm5acGRHVk5jMmNpTENKeVpYTjFiV1VpTENKaGRYUm9iM0pwYzJVaUxDSmtaV3hsZEdWTmMyY2lMQ0pmY21Wd2IzSjBaWEp6SWl3aVgyOXVVM1ZpYzJOeWFYQjBhVzl1U0dGdVpHeGxjaUlzSWw5dmJsSmxZV1JJWVc1a2JHVnlJaXdpWDI5dVUzVmljMk55YVdKbElpd2lYMjl1Vlc1VGRXSnpZM0pwWW1VaUxDSm9lWEJsY25SNVZYSnNJaXdpWVdOalpYQjBJaXdpYzNWaUlpd2ljM1JoZEhWeklpd2lZMmhwYkdSeVpXNVdZV3gxWlhNaUxDSmZZMmhwYkdSeVpXNVBZbXBsWTNSeklpd2lZMmhwYkdSeVpXNUpaQ0lzSW1Ob2FXeGtjbVZ1UkdGMFlTSXNJbTF6WjFaaGJIVmxJaXdpWTJocGJHUnlaVzVQWW1wbFkzUnpJaXdpYzJWdVpFMXpaeUlzSW1oaGMwOTNibEJ5YjNCbGNuUjVJaXdpYlhWMGRXRnNRWFYwYUdWdWRHbGpZWFJwYjI0aUxDSmZiWFYwZFdGc1FYVjBhR1Z1ZEdsallYUnBiMjRpTENKeVpXcGxZM1FpTENKeVpXRnpiMjRpTENKa1pYTmpJaXdpUkdGMFlVOWlhbVZqZENJc0luTjVibU5vWlhJaUxDSmZjM1JoZEhWeklpd2lYMk5vYVd4a2NtVnVjeUlzSW1Ob2FXeGtjbVZ1Y3lJc0ltMTFkSFZoYkNJc0lsOWphR2xzWkhKbGJreHBjM1JsYm1WeWN5SXNJbDl5WlhOMWJXVmtJaXdpWTJocGJHUkpaRWx1ZENJc0ltTm9hV3hrU1dSVGRISnBibWNpTENKamFHbHNaRWxrSWl3aVRuVnRZbVZ5SWl3aVkyaHBiR1JDWVhObFZWSk1JaXdpWTJocGJHUWlMQ0pqYUdsc1pGVlNUQ0lzSW14cGMzUmxibVZ5SWl3aVgyOXVRMmhwYkdSRGNtVmhkR1VpTENKZlkyaGhibWRsUTJocGJHUnlaVzRpTENKamFHbHNaSEpsYmxKbGMyOTFjbU5sSWl3aVkyaHBiR1J5Wlc0aUxDSmphR2xzWkVsdWNIVjBJaXdpYVc1cGRHbGhiRVJoZEdFaUxDSnRjMmREYUdsc1pGQmhkR2dpTENKRVlYUmxJaXdpZEc5SlUwOVRkSEpwYm1jaUxDSnVaWGREYUdsc1pDSXNJbUp2WkhsV1lXeDFaU0lzSW0xbGRHRmtZWFJoSWl3aWNtVnhkV1Z6ZEUxelp5SXNJbkpsYzI5c2RtVWlMQ0p0YzJkSlpDSXNJbTl1UTJoaGJtZGxJaXdpWDI5dVFXUmtRMmhwYkdSeVpXNUlZVzVrYkdWeUlpd2ljMlYwVkdsdFpXOTFkQ0lzSW1Ob2FXeGtTVzVtYnlJc0ltTm9ZVzVuWlUxelp5SXNJbUYwZEhKcFluVjBaU0lzSW05VWVYQmxJaXdpVDBKS1JVTlVJaXdpWTFSNWNHVWlMQ0pTUlUxUFZrVWlMQ0poZEhSeWFXSjFkR1ZVZVhCbElpd2lWVkJFUVZSRklpd2liM0JsY21GMGFXOXVJaXdpYzNsdVkwOWlhaUlzSW1acGJtUlNaWE4xYkhRaUxDSm1hVzVrUW1WbWIzSmxJaXdpUVZKU1FWa2lMQ0pCUkVRaUxDSmhjbklpTENKc1lYTjBJaXdpUVhKeVlYa2lMQ0p3Y205MGIzUjVjR1VpTENKemNHeHBZMlVpTENKaGNIQnNlU0lzSW05aWFtVmpkRlI1Y0dVaUxDSlRlVzVqVDJKcVpXTjBJaXdpWDJSaGRHRWlMQ0pmYVc1MFpYSnVZV3hQWW5ObGNuWmxJaXdpWDJacGJtUlhhWFJvVTNCc2FYUWlMQ0p3YjNBaUxDSm9ZVzVrYkdWeUlpd2lZMmhoYm1kbGMyVjBJaXdpWlhabGNua2lMQ0pqYUdGdVoyVWlMQ0pmYjI1RGFHRnVaMlZ6SWl3aVQySnFaV04wSWl3aVpHVmxjRTlpYzJWeWRtVWlMQ0p2WW1wVWVYQmxJaXdpWTI5dWMzUnlkV04wYjNJaUxDSlBZbXBsWTNSVWVYQmxJaXdpWm1sbGJHUlRkSEpwYm1jaUxDSnJaWGx3WVhSb0lpd2libVYzVm1Gc2RXVWlMQ0pmWm1seVpVVjJaVzUwSWl3aVEyaGhibWRsVkhsd1pTSXNJbE41Ym1Ob1pYSWlMQ0p2ZDI1bGNpSXNJbUoxY3lJc0ltTnZibVpwWnlJc0luSjFiblJwYldWVlVrd2lMQ0pmY25WdWRHbHRaVlZ5YkNJc0lsOXdjbTkyYVhOcGIyNWhiSE1pTENKcGJtWnZJaXdpWDI5dVJtOXlkMkZ5WkNJc0lsOXZibEpsYlc5MFpVTnlaV0YwWlNJc0lsOXZibEpsYlc5MFpVUmxiR1YwWlNJc0luTjBiM0psSWl3aWNESndJaXdpWTNKbFlYUmxTVzV3ZFhRaUxDSmZZM0psWVhSbElpd2lZM0pwZEdWeWFXRWlMQ0pmY21WemRXMWxRM0psWVhSbElpd2liMkpxVlZKTUlpd2lYM04xWW5OamNtbGlaU0lzSWw5amNtbDBaWEpwWVNJc0lsOXlaWE4xYldWVGRXSnpZM0pwWW1VaUxDSnlaV0ZrVFhObklpd2lYMjl1VG05MGFXWnBZMkYwYVc5dVNHRnVaR3hsY2lJc0luSmxjRzl5ZEdWeVNXNXdkWFFpTENKeVpYRjFaWE4wVm1Gc2RXVWlMQ0pqYUdsc1pISmxibEpsYzI5MWNtTmxjeUlzSW01bGQwOWlhaUlzSW1sdWRtbDBaVTlpYzJWeWRtVnljeUlzSW14cGMzUlBabEpsY0c5eWRHVnljeUlzSW1SaGRHRlBZbXBsWTNRaUxDSnlaWE4xYldWa0lpd2ljbVZ6ZFcxbFEyaHBiR1J5Wlc1eklpd2lYMjl1VW1Wd2IzSjBaWEp6VW1WemRXMWxJaXdpYzNWaWMyTnlhV0psVFhObklpd2libVYzVUhKdmRtbHphVzl1WVd3aUxDSnZZbk5sY25abGNrbHVjSFYwSWl3aWJHbHpkRTltVDJKelpYSjJaWEp6SWl3aVgyOXVUMkp6WlhKMlpYSnpVbVZ6ZFcxbElpd2lZV05ySWl3aWJGUjVjR1VpTENKa1pXeGxkR1VpTENKRVlYUmhVSEp2ZG1semFXOXVZV3dpTENKZlkyaHBiR1J5Wlc0aUxDSmZZMmhoYm1kbGN5SXNJbTlpYzJWeWRtVnlJbDBzSW0xaGNIQnBibWR6SWpvaVFVRkJRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc01rSkJRVEpDTzBGQlF6TkNMRU5CUVVNN1FVRkRSQ3hQTzBGRFZrRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHM3UVVGRlFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHM3TzBGQlIwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk96dEJRVVZCTzBGQlEwRXNiVVJCUVRKRExHTkJRV003TzBGQlJYcEVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNZVUZCU3p0QlFVTk1PMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRXNiVU5CUVRKQ0xEQkNRVUV3UWl4RlFVRkZPMEZCUTNaRUxIbERRVUZwUXl4bFFVRmxPMEZCUTJoRU8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJMRGhFUVVGelJDd3JSRUZCSzBRN08wRkJSWEpJTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHM3T3pzN096dEJRMmhGUVN3MlFrRkJOa0k3UVVGRE4wSXNjVU5CUVhGRExHZERPenM3T3pzN1FVTkVja003UVVGRFFUdEJRVU5CTzBGQlEwRXNkVU5CUVhWRExHZERPenM3T3pzN1FVTklka003UVVGRFFUdEJRVU5CTEdsRFFVRnBReXhSUVVGUkxHZENRVUZuUWl4VlFVRlZMRWRCUVVjN1FVRkRkRVVzUTBGQlF5eEZPenM3T3pzN1FVTklSRHRCUVVOQk8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHM3UVVGRlFTeDFRanM3T3pzN08wRkRWa0U3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnl4VlFVRlZPMEZCUTJJN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEWmtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTktRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEUmtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeERRVUZETzBGQlEwUTdRVUZEUVR0QlFVTkJMRVU3T3pzN096czdRVU5RUVRzN1FVRkZRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRVU3T3pzN096dEJRMUpCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3h0UlVGQmJVVTdRVUZEYmtVN1FVRkRRU3h4UmtGQmNVWTdRVUZEY2tZN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxGZEJRVmM3UVVGRFdDeFRRVUZUTzBGQlExUTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hMUVVGTE8wRkJRMHc3UVVGRFFUdEJRVU5CTEN0RFFVRXJRenRCUVVNdlF6dEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hqUVVGak8wRkJRMlFzWTBGQll6dEJRVU5rTEdOQlFXTTdRVUZEWkN4alFVRmpPMEZCUTJRc1pVRkJaVHRCUVVObUxHVkJRV1U3UVVGRFppeGxRVUZsTzBGQlEyWXNaMEpCUVdkQ08wRkJRMmhDTEhsQ096czdPenM3TzBGRE5VUkJPenRCUVVWQk96dEJRVVZCT3p0QlFVVkJPenRCUVVWQkxITkRRVUZ6UXl4MVEwRkJkVU1zWjBKQlFXZENPenRCUVVVM1JqdEJRVU5CTzBGQlEwRXNiVUpCUVcxQ0xHdENRVUZyUWp0QlFVTnlRenRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNRMEZCUXl4SE96czdPenM3UVVNeFFrUTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTk9RU3gxUWtGQmRVSTdRVUZEZGtJN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEwaEJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTk1RVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEyNUNRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRVU3T3pzN096dEJRMUJCTEc5Q096czdPenM3UVVOQlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hGT3pzN096czdRVU5PUVR0QlFVTkJPMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTA1Qk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTBoQkxHbENRVUZwUWpzN1FVRkZha0k3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTBwQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTllRVHRCUVVOQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVN4clJVRkJhMFVzSzBKQlFTdENPMEZCUTJwSExFVTdPenM3T3p0QlEwNUJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEU2tFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTktRVHRCUVVOQkxIRkZRVUZ6UlN4blFrRkJaMElzVlVGQlZTeEhRVUZITzBGQlEyNUhMRU5CUVVNc1JUczdPenM3TzBGRFJrUXNjMEk3T3pzN096dEJRMEZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1JUczdPenM3TzBGRFNrRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEweEJPMEZCUTBFN1FVRkRRVHRCUVVOQkxHRTdPenM3T3p0QlEwaEJPMEZCUTBFN1FVRkRRU3h0UkVGQmJVUTdRVUZEYmtRN1FVRkRRU3gxUTBGQmRVTTdRVUZEZGtNc1JUczdPenM3TzBGRFRFRXNhMEpCUVd0Q0xIZEVPenM3T3pzN1FVTkJiRUk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3UVVOS1FTeHJRa0ZCYTBJc2QwUTdPenM3T3pzN1FVTkJiRUk3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUU3TzBGQlJVRTdPMEZCUlVFc2MwTkJRWE5ETEhWRFFVRjFReXhuUWtGQlowSTdPMEZCUlRkR08wRkJRMEU3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFc1JUczdPenM3T3p0QlEyaERRVHM3UVVGRlFUczdRVUZGUVRzN1FVRkZRVHM3UVVGRlFTeHpRMEZCYzBNc2RVTkJRWFZETEdkQ1FVRm5RanM3UVVGRk4wWTdRVUZEUVR0QlFVTkJPMEZCUTBFN08wRkJSVUU3UVVGRFFTeEZPenM3T3pzN1FVTm9Ra0U3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3UVVOS1FUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc05rSkJRVFpDTzBGQlF6ZENPenRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzTmtKQlFUWkNPMEZCUXpkQ08wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEhRVUZITzBGQlEwZzdRVUZEUVRzN096czdPenRCUTNoRFFUdEJRVU5CTzBGQlEwRXNiMFZCUVhWRkxIbERRVUV3UXl4Rk96czdPenM3TzBGRFJtcElPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUczdRVUZGUVN3MFFrRkJORUlzWVVGQllUczdRVUZGZWtNN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEhkRFFVRjNReXh2UTBGQmIwTTdRVUZETlVVc05FTkJRVFJETEc5RFFVRnZRenRCUVVOb1JpeExRVUZMTERKQ1FVRXlRaXh2UTBGQmIwTTdRVUZEY0VVN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxHZENRVUZuUWl4dFFrRkJiVUk3UVVGRGJrTTdRVUZEUVR0QlFVTkJMR2xEUVVGcFF5d3lRa0ZCTWtJN1FVRkROVVE3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hMUVVGTE8wRkJRMHc3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTNKRlFTeHJRa0ZCYTBJc2QwUTdPenM3T3p0QlEwRnNRaXhqUVVGakxITkNPenM3T3pzN1FVTkJaQ3cyUlRzN096czdPMEZEUVVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTEVVN096czdPenRCUTFwQk8wRkJRMEU3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hGT3pzN096czdRVU5vUWtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTERoQ1FVRTRRanRCUVVNNVFqdEJRVU5CTzBGQlEwRXNiVVJCUVcxRUxFOUJRVThzUlVGQlJUdEJRVU0xUkN4Rk96czdPenM3UVVOVVFTeDNRenM3T3pzN08wRkRRVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN3eVJFRkJNa1E3UVVGRE0wUXNSVHM3T3pzN08wRkRURUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc01FUkJRVEJFTEhOQ1FVRnpRanRCUVVOb1JpeG5Sa0ZCWjBZc2MwSkJRWE5DTzBGQlEzUkhMRVU3T3pzN096dEJRMUpCTEcxRE96czdPenM3TzBGRFFVRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEVzTmtKQlFUWkNPMEZCUXpkQ0xHTkJRV003UVVGRFpEdEJRVU5CTEVOQlFVTTdRVUZEUkR0QlFVTkJPMEZCUTBFN1FVRkRRU3dyUWtGQkswSTdRVUZETDBJN1FVRkRRVHRCUVVOQkxGVkJRVlU3UVVGRFZpeERRVUZETEVVN096czdPenRCUTJoQ1JEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPenRCUVVWQkxIZEhRVUYzUnl4UFFVRlBPMEZCUXk5SE8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4RE96czdPenM3TzBGRFdrRTdRVUZEUVN4MVEwRkJkVU1zTUVKQlFUQkNPMEZCUTJwRkxIZERRVUYzUXp0QlFVTjRRenRCUVVOQkxFVTdPenM3T3pzN096czdPenRCUTBwQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNlVUpCUVhsQ0xHdENRVUZyUWl4RlFVRkZPenRCUVVVM1F6dEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRWRCUVVjc1ZVRkJWVHRCUVVOaU96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTNSQ1FUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRVU3T3pzN096dEJRMHBCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hIUVVGSExGVkJRVlU3UVVGRFlqdEJRVU5CTEVVN096czdPenRCUTJaQkxIbERPenM3T3pzN08wRkRRVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUU3TzBGQlJVRTdPMEZCUlVFN08wRkJSVUVzYVVoQlFXbElMRzFDUVVGdFFpeEZRVUZGTEcxQ1FVRnRRaXcwU2tGQk5FbzdPMEZCUlhKVUxITkRRVUZ6UXl4MVEwRkJkVU1zWjBKQlFXZENPenRCUVVVM1JqdEJRVU5CTzBGQlEwRXNRMEZCUXp0QlFVTkVPMEZCUTBFc1JUczdPenM3TzBGRGNFSkJMRFJDUVVFMFFpeGxPenM3T3pzN1FVTkJOVUk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hMUVVGTExGZEJRVmNzWlVGQlpUdEJRVU12UWp0QlFVTkJMRXRCUVVzN1FVRkRURHRCUVVOQkxFVTdPenM3T3pzN1FVTndRa0U3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQkxIbEdRVUZuUml4aFFVRmhMRVZCUVVVN08wRkJSUzlHTzBGQlEwRXNjVVJCUVhGRUxEQkNRVUV3UWp0QlFVTXZSVHRCUVVOQkxFVTdPenM3T3p0QlExcEJPMEZCUTBFc1ZVRkJWVHRCUVVOV0xFVTdPenM3T3p0QlEwWkJPMEZCUTBFN1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEV2tFN1FVRkRRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3UVVOT1FUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlEyaENRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRWRCUVVjN1FVRkRTRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3UVVNeFJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPenRCUTA1Qk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEdkRFFVRm5RenRCUVVOb1F5eGpRVUZqTzBGQlEyUXNhVUpCUVdsQ08wRkJRMnBDTzBGQlEwRXNRMEZCUXp0QlFVTkVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1EwRkJRenM3UVVGRlJEdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRU3cwUWpzN096czdPMEZEYWtOQkxHdENRVUZyUWl4M1JEczdPenM3T3pzN096czdPenM3T3pzN096czdPMUZEZDBOR1FTeFRMRWRCUVVGQkxGTTdVVUZyUkVGRExGY3NSMEZCUVVFc1Z6dFJRV2RDUVVNc1Z5eEhRVUZCUVN4WE8xRkJVMEZETEZNc1IwRkJRVUVzVXp0UlFWVkJReXh0UWl4SFFVRkJRU3h0UWp0UlFWVkJReXh0UWl4SFFVRkJRU3h0UWp0UlFWZEJReXhuUWl4SFFVRkJRU3huUWp0UlFXMUNRVU1zWXl4SFFVRkJRU3hqTzFGQmVVTkJReXhsTEVkQlFVRkJMR1U3T3pzN1FVRTVUV2hDT3pzN096czdPenM3T3pzN096czdPenM3T3pzN08wRkJjMEpCT3pzN096dEJRVXRCT3pzN096czdPenRCUVZGQk96czdPenRCUVV0UExGTkJRVk5TTEZOQlFWUXNRMEZCYlVKVExFZEJRVzVDTEVWQlFYZENPenRCUVVVM1FpeE5RVUZKTEVOQlFVTkJMRWRCUVV3c1JVRkJWU3hOUVVGTlF5eE5RVUZOTEhkQ1FVRk9MRU5CUVU0N08wRkJSVmdzVjBGQlUwTXNUMEZCVkN4RFFVRnBRa01zUzBGQmFrSXNSVUZCZDBJN1FVRkRka0lzVVVGQlRVTXNVVUZCVVN3d1JrRkJaRHRCUVVORkxGRkJRVTFETEZGQlFWRXNWVUZCWkR0QlFVTkVMRkZCUVVsRExGRkJRVkZJTEUxQlFVMUpMRTlCUVU0c1EwRkJZMGdzUzBGQlpDeEZRVUZ4UWtNc1MwRkJja0lzUlVGQk5FSkhMRXRCUVRWQ0xFTkJRV3RETEVkQlFXeERMRU5CUVZvN1FVRkRSQ3hYUVVGUFJpeExRVUZRTzBGQlEwRTdPMEZCUlVRc1RVRkJTVUVzVVVGQlVVb3NVVUZCVVVZc1IwRkJVaXhEUVVGYU96dEJRVVZETzBGQlEwRXNUVUZCU1Uwc1RVRkJUU3hEUVVGT0xFMUJRV0ZPTEVkQlFXSXNTVUZCYjBJc1EwRkJRMDBzVFVGQlRTeERRVUZPTEVWQlFWTkhMRkZCUVZRc1EwRkJhMElzUjBGQmJFSXNRMEZCZWtJc1JVRkJhVVE3TzBGQlJTOURMRkZCUVVsRExGVkJRVk03UVVGRFdFTXNXVUZCVFN4RlFVUkxPMEZCUlZoRExHTkJRVkZhTEVkQlJrYzdRVUZIV0dFc1owSkJRVlU3UVVGSVF5eExRVUZpT3p0QlFVMUJReXhaUVVGUlF5eExRVUZTTEVOQlFXTXNlVVpCUVdRc1JVRkJlVWRtTEVkQlFYcEhPenRCUVVWQkxGZEJRVTlWTEU5QlFWQTdRVUZEUkRzN1FVRkZSanRCUVVOQkxFMUJRVWxLTEUxQlFVMHNRMEZCVGl4TlFVRmhUaXhIUVVGaUxFbEJRVzlDVFN4TlFVRk5MRU5CUVU0c1JVRkJVMGNzVVVGQlZDeERRVUZyUWl4SFFVRnNRaXhEUVVGNFFpeEZRVUZuUkR0QlFVTXZReXhSUVVGSlR5eFRRVUZUVml4TlFVRk5MRU5CUVU0c1RVRkJZVTRzUjBGQllpeEhRVUZ0UWl4TlFVRnVRaXhIUVVFMFFrMHNUVUZCVFN4RFFVRk9MRU5CUVhwRE8wRkJRMEZCTEZsQlFWRktMRkZCUVZGakxGTkJRVk1zUzBGQlZDeEhRVUZwUWxZc1RVRkJUU3hEUVVGT0xFTkJRWHBDTEVOQlFWSTdRVUZEUVRzN1FVRkZSRHRCUVVOQkxFMUJRVWxCTEUxQlFVMHNRMEZCVGl4RlFVRlRSeXhSUVVGVUxFTkJRV3RDTEVkQlFXeENMRU5CUVVvc1JVRkJORUk3UVVGRE0wSklMRlZCUVUwc1EwRkJUaXhKUVVGWFFTeE5RVUZOTEVOQlFVNHNTVUZCVnl4TFFVRllMRWRCUVcxQ1FTeE5RVUZOTEVOQlFVNHNRMEZCT1VJN1FVRkRRVUVzVlVGQlRTeERRVUZPTEVsQlFWZEJMRTFCUVUwc1EwRkJUaXhGUVVGVFZ5eE5RVUZVTEVOQlFXZENXQ3hOUVVGTkxFTkJRVTRzUlVGQlUxa3NUMEZCVkN4RFFVRnBRaXhIUVVGcVFpeEpRVUYzUWl4RFFVRjRReXhEUVVGWU8wRkJRMGNzUjBGeVF6QkNMRU5CY1VONFFqczdPenRCUVVsTUxFMUJRVWxTTEZOQlFWTTdRVUZEV0VNc1ZVRkJUVXdzVFVGQlRTeERRVUZPTEVOQlJFczdRVUZGV0Uwc1dVRkJVVTRzVFVGQlRTeERRVUZPTEVOQlJrYzdRVUZIV0U4c1kwRkJWVkFzVFVGQlRTeERRVUZPTzBGQlNFTXNSMEZCWWpzN1FVRk5RU3hUUVVGUFNTeE5RVUZRTzBGQlEwUTdPMEZCUlUwc1UwRkJVMnhDTEZkQlFWUXNRMEZCY1VJeVFpeExRVUZ5UWl4RlFVRTBRanRCUVVOcVF5eE5RVUZKUXl4WlFVRlpSQ3hOUVVGTlJDeFBRVUZPTEVOQlFXTXNSMEZCWkN4RFFVRm9RanM3UVVGRlFTeE5RVUZKVWl4VFFVRlRPMEZCUTFoWExHTkJRVlZHTEUxQlFVMUhMRk5CUVU0c1EwRkJaMElzUTBGQmFFSXNSVUZCYlVKR0xGTkJRVzVDTEVOQlJFTTdRVUZGV0ZJc1dVRkJVVThzVFVGQlRVY3NVMEZCVGl4RFFVRm5Ra1lzV1VGQldTeERRVUUxUWl4RlFVRXJRa1FzVFVGQlRVa3NUVUZCY2tNN1FVRkdSeXhIUVVGaU96dEJRVXRCTEZOQlFVOWlMRTFCUVZBN1FVRkRSRHM3UVVGRlJEczdPenM3UVVGTFR5eFRRVUZUYWtJc1YwRkJWQ3hEUVVGeFFpdENMRTFCUVhKQ0xFVkJRVFpDTzBGQlEyeERMRk5CUVU4c2IwSkJRVmxCTEUxQlFWb3NSVUZCYjBKRUxFMUJRWEJDTEVkQlFUWkNMRU5CUVRkQ0xFZEJRV2xETEV0QlFXcERMRWRCUVhsRExFbEJRV2hFTzBGQlEwUTdPMEZCUlVRN096czdPMEZCUzA4c1UwRkJVemRDTEZOQlFWUXNRMEZCYlVJclFpeEhRVUZ1UWl4RlFVRjNRanRCUVVNM1FqdEJRVU5CTEUxQlFVbEJMRWRCUVVvc1JVRkJVeXhQUVVGUFF5eExRVUZMUXl4TFFVRk1MRU5CUVZjc2VVSkJRV1ZHTEVkQlFXWXNRMEZCV0N4RFFVRlFPMEZCUTFZN08wRkJSVVE3T3pzN08wRkJTMDhzVTBGQlV6bENMRzFDUVVGVUxFTkJRVFpDYVVNc1UwRkJOMElzUlVGQmQwTTdRVUZETjBNc1RVRkJTVklzV1VGQldWRXNWVUZCVlZZc1QwRkJWaXhEUVVGclFpeEhRVUZzUWl4RFFVRm9RanRCUVVOQkxGTkJRVThzV1VGQldWVXNWVUZCVlU0c1UwRkJWaXhEUVVGdlFrWXNXVUZCV1N4RFFVRm9ReXhGUVVGdFExRXNWVUZCVlV3c1RVRkJOME1zUTBGQldpeEhRVUZ0UlN4SFFVRnVSU3hIUVVGNVJVc3NWVUZCVlU0c1UwRkJWaXhEUVVGdlFpeERRVUZ3UWl4RlFVRjFRa1lzVTBGQmRrSXNRMEZCYUVZN1FVRkRSRHM3UVVGRlJEczdPenM3UVVGTFR5eFRRVUZUZUVJc2JVSkJRVlFzUTBGQk5rSnBReXhQUVVFM1FpeEZRVUZ6UXp0QlFVTXpReXhOUVVGSk4wSXNUVUZCVFZRc1ZVRkJWWE5ETEU5QlFWWXNRMEZCVmp0QlFVTkJMRk5CUVU4M1FpeEpRVUZKWVN4UlFVRktMRU5CUVdGT0xFOUJRV0lzUTBGQmNVSXNSMEZCY2tJc1JVRkJNRUlzUlVGQk1VSXNTVUZCWjBNc1IwRkJhRU1zUjBGQmMwTlFMRWxCUVVsWkxFMUJRV3BFTEVOQlJqSkRMRU5CUldNN1FVRkRNVVE3TzBGQlIwUTdPenM3TzBGQlMwOHNVMEZCVTJZc1owSkJRVlFzUTBGQk1FSnBReXhWUVVFeFFpeEZRVUZ6UXpzN1FVRkZNME03UVVGRFFTeE5RVUZKUVN4WFFVRlhVaXhUUVVGWUxFTkJRWEZDTEVOQlFYSkNMRVZCUVhkQ0xFTkJRWGhDTEUxQlFTdENMRk5CUVc1RExFVkJRVGhETzBGQlF6VkRMRkZCUVVsVExHRkJRV0Y0UXl4VlFVRlZkVU1zVlVGQlZpeERRVUZxUWpzN1FVRkZRVHRCUVVOQkxGRkJRVWxETEZkQlFWZHVRaXhOUVVGWUxFbEJRWEZDYlVJc1YwRkJWMnhDTEZGQlFYQkRMRVZCUVRoRE8wRkJRelZETEdGQlFVOXBRaXhWUVVGUU8wRkJRMFFzUzBGR1JDeE5RVVZQTzBGQlEwd3NXVUZCVFN3eVFrRkJUanRCUVVORU96dEJRVVZJTzBGQlEwTXNSMEZZUkN4TlFWZFBPMEZCUTB3c1YwRkJUMjVETEc5Q1FVRnZRbTFETEZWQlFYQkNMRU5CUVZBN1FVRkRSRHRCUVVOR096dEJRVVZOTEZOQlFWTm9ReXhqUVVGVUxFTkJRWGRDYTBNc1NVRkJlRUlzUlVGQk9FSTdPMEZCUlc1RExFMUJRVWsxUWl4UlFVRlJMRFpMUVVGYU96dEJRVVZCTEUxQlFVazJRaXhQUVVGUExFVkJRVmc3UVVGRFFTeE5RVUZKUXl4UlFVRlJMRVZCUVZvN1FVRkRRU3hOUVVGSlF5eFBRVUZQU0N4TFFVRkxTU3hMUVVGTUxFTkJRVmRvUXl4TFFVRllMRU5CUVZnN08wRkJSVUVzVFVGQlNTdENMRkZCUVZFc1NVRkJXaXhGUVVGclFqdEJRVU5vUWtRc1dVRkJVVVlzUzBGQlMzaENMRXRCUVV3c1EwRkJWeXhIUVVGWUxFTkJRVkk3UVVGRFJDeEhRVVpFTEUxQlJVODdRVUZEVEN4UlFVRkpOa0lzVlVGQlNqdEJRVU5CTEZkQlFVOHNRMEZCUTBFc1NVRkJTV3BETEUxQlFVMXJReXhKUVVGT0xFTkJRVmRPTEVsQlFWZ3NRMEZCVEN4TlFVRXlRaXhKUVVGc1F5eEZRVUYzUXp0QlFVTjBRenRCUVVOQkxGVkJRVWxMTEVWQlFVVkZMRXRCUVVZc1MwRkJXVzVETEUxQlFVMXZReXhUUVVGMFFpeEZRVUZwUXp0QlFVTXZRbkJETEdOQlFVMXZReXhUUVVGT08wRkJRMFE3TzBGQlJVUTdRVUZEUVVnc1VVRkJSVWtzVDBGQlJpeERRVUZWTEZWQlFVTk1MRXRCUVVRc1JVRkJVVTBzVlVGQlVpeEZRVUYxUWp0QlFVTXZRaXhaUVVGSlFTeGxRVUZsTEVOQlFXNUNMRVZCUVhOQ08wRkJRM0JDVkN4bFFVRkxWU3hKUVVGTUxFTkJRVlZRTEV0QlFWWTdRVUZEUkR0QlFVTkdMRTlCU2tRN1FVRkxSRHRCUVVORUxGRkJRVWt4UWl4bFFVRktPMEZCUTBGMVFpeFRRVUZMVVN4UFFVRk1MRU5CUVdFc1ZVRkJRM3BETEVkQlFVUXNSVUZCVXp0QlFVTndRbFVzWlVGQlUzTkNMRXRCUVV0NlFpeFBRVUZNTEVOQlFXRlFMRWRCUVdJc1JVRkJhMElzUzBGQmJFSXNRMEZCVkRzN1FVRkZRV3RETEdOQlFWRjRRaXhQUVVGUFJpeExRVUZRTEVOQlFXRXNSMEZCWWl4RlFVRnJRbTlETEVkQlFXeENMRU5CUVhOQ0xGVkJRVU5ETEVsQlFVUXNSVUZCVlR0QlFVTjBReXhaUVVGSlFTeFRRVUZUTEV0QlFXSXNSVUZCYjBJN1FVRkJSU3hwUWtGQlR6ZERMRWRCUVZBN1FVRkJZVHRCUVVOdVF5eGxRVUZQTmtNc1NVRkJVRHRCUVVORUxFOUJTRThzUTBGQlVqdEJRVXRFTEV0QlVrUTdRVUZUUkRzN1FVRkZSQzlDTEZWQlFWRm5ReXhIUVVGU0xFTkJRVmtzZVVOQlFWb3NSVUZCZFVSYUxFdEJRWFpFTzBGQlEwRXNVMEZCVDBFc1MwRkJVRHRCUVVORU96dEJRVVZOTEZOQlFWTnVReXhsUVVGVUxFTkJRWGxDYVVNc1NVRkJla0lzUlVGQkswSTdRVUZEY0VNc1RVRkJTVFZDTEZGQlFWRXNNa0pCUVZvN08wRkJSVUVzVFVGQlNUSkRMRlZCUVZVc1ZVRkJaRHM3UVVGRlFTeE5RVUZKTEVOQlFVTm1MRXRCUVV0MlFpeFJRVUZNTEVOQlFXTXNTMEZCWkN4RFFVRk1MRVZCUVRKQ08wRkJRM3BDTEZkQlFWRjFRaXhMUVVGTGVFSXNTMEZCVEN4RFFVRlhMRWRCUVZnc1EwRkJVanRCUVVORUxFZEJSa1FzVFVGRlR6dEJRVU5NTEZGQlFVbDNReXhWUVVGVmFFSXNTMEZCUzNoQ0xFdEJRVXdzUTBGQlYwb3NTMEZCV0N4RlFVRnJRaXhEUVVGc1FpeERRVUZrT3p0QlFVVkJMRkZCUVVrMlF5eFRRVUZUUkN4UlFVRlJlRU1zUzBGQlVpeERRVUZqTEVkQlFXUXNRMEZCWWpzN1FVRkZRU3hSUVVGSk1FTXNWVUZCVld4Q0xFdEJRVXQ2UWl4UFFVRk1MRU5CUVdGNVF5eFBRVUZpTEVWQlFYTkNMRVZCUVhSQ0xFTkJRV1E3TzBGQlJVRXNVVUZCU1doQ0xFdEJRVXQyUWl4UlFVRk1MRU5CUVdOelF5eFBRVUZrTEVOQlFVb3NSVUZCTkVJN08wRkJSVEZDTEZWQlFVbEpMRk5CUVZORUxGRkJRVkV4UXl4TFFVRlNMRU5CUVdOMVF5eFZRVUZWTEVkQlFYaENMRU5CUVdJN08wRkJSVUZxUXl4alFVRlJaME1zUjBGQlVpeERRVUZaTEZsQlFWbExMRTFCUVhoQ096dEJRVVZCUkN4blFrRkJWVU1zVDBGQlR5eERRVUZRTEVWQlFWVkRMRXRCUVZZc1EwRkJaMElzUjBGQmFFSXNSVUZCY1VJc1EwRkJReXhEUVVGMFFpeERRVUZXT3p0QlFVVkJSQ3hsUVVGVFFTeFBRVUZQTEVOQlFWQXNSVUZCVlRORExFdEJRVllzUTBGQlowSXNSMEZCYUVJc1EwRkJWRHM3UVVGRlFYbERMR0ZCUVU5T0xFbEJRVkFzUTBGQldVOHNUMEZCV2l4RlFVRnhRa2dzVDBGQmNrSTdPMEZCUlVGRkxHVkJRVk5CTEU5QlFVOUpMRTFCUVZBc1EwRkJZMFlzVFVGQlpDeERRVUZVTzBGQlJVUXNTMEZrUkN4TlFXTlBPMEZCUTB4R0xHRkJRVTlPTEVsQlFWQXNRMEZCV1U4c1QwRkJXanRCUVVWRU96dEJRVVZFTEZkQlFWRkVMRTlCUVU5TExFMUJRVkFzUTBGQlkwTXNUMEZCWkN4RFFVRlNPMEZCUlVRN1FVRkRSaXhET3pzN096czdRVU5zVUVRc2EwSkJRV3RDTEhkRU96czdPenM3UVVOQmJFSTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNhVVJCUVdsRU8wRkJRMnBFTEVOQlFVTTdRVUZEUkR0QlFVTkJMSEZDUVVGeFFqdEJRVU55UWp0QlFVTkJMRk5CUVZNN1FVRkRWQ3hKUVVGSk8wRkJRMG83UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTNCRVFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFVTdPenM3T3p0QlExQkJMR3RDUVVGclFpeDNSRHM3T3pzN08wRkRRV3hDTEd0Q1FVRnJRaXgzUkRzN096czdPMEZEUVd4Q0xHdENRVUZyUWl4M1JEczdPenM3TzBGRFFXeENMR3RDUVVGclFpeDNSRHM3T3pzN08wRkRRV3hDTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1JUczdPenM3TzBGRFNrRTdRVUZEUVN3NFJEczdPenM3TzBGRFJFRTdRVUZEUVN4dlJEczdPenM3TzBGRFJFRTdRVUZEUVN3NFJEczdPenM3TzBGRFJFRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3huUkRzN096czdPMEZEU2tFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTd3JRenM3T3pzN08wRkRTa0U3UVVGRFFUdEJRVU5CTEhWRU96czdPenM3UVVOR1FUdEJRVU5CTzBGQlEwRTdRVUZEUVN4SFFVRkhPMEZCUTBnc1JUczdPenM3TzBGRFNrRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hIUVVGSE8wRkJRMGdzUlRzN096czdPMEZEWkVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc2NVTkJRWEZETEdsQ1FVRnBRaXhGUVVGRk8wRkJRM2hFTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3huUlVGQlowVXNaMEpCUVdkQ08wRkJRMmhHTzBGQlEwRTdRVUZEUVN4SFFVRkhMREpEUVVFeVF5eG5RMEZCWjBNN1FVRkRPVVU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMSGRDT3pzN096czdRVU40UWtFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVkQlFVYzdRVUZEU0N4Rk96czdPenM3UVVObVFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEVzUlRzN096czdPMEZEVUVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTktRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4SFFVRkhPMEZCUTBnN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN1FVTllRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVN3clFrRkJLMElzY1VKQlFYRkNPMEZCUTNCRUxDdENRVUVyUWl4VFFVRlRMRVZCUVVVN1FVRkRNVU1zUTBGQlF5eFZRVUZWT3p0QlFVVllPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTERKQ1FVRXlRaXhUUVVGVExHMUNRVUZ0UWp0QlFVTjJSQ3dyUWtGQkswSXNZVUZCWVR0QlFVTTFRenRCUVVOQkxFZEJRVWNzVlVGQlZUdEJRVU5pTzBGQlEwRXNSVHM3T3pzN08wRkRjRUpCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTFSQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeFBRVUZQTzBGQlExQTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hMUVVGTE8wRkJRMHc3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEhRVUZITzBGQlEwZzdRVUZEUVR0QlFVTkJMSFZEUVVGMVF5eHZRa0ZCYjBJc1JVRkJSVHRCUVVNM1JEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRWRCUVVjN1FVRkRTRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFZEJRVWM3UVVGRFNEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPenRCUVVWQk8wRkJRMEVzWjBKQlFXZENPMEZCUTJoQ08wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNTMEZCU3p0QlFVTk1PMEZCUTBFc1JUczdPenM3TzBGRGJrVkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxHdENRVUZyUWpzN1FVRkZiRUk3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hIUVVGSE8wRkJRMGc3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRVHM3T3pzN096dEJRMnhDUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTEVVN096czdPenRCUTA1Qk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxHdEVRVUZyUkR0QlFVTnNSRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNUMEZCVHl4VlFVRlZMR05CUVdNN1FVRkRMMEk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1MwRkJTeXhIUVVGSE8wRkJRMUk3UVVGRFFTeEZPenM3T3pzN08wRkRlRUpCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRzlDUVVGdlFpeGhRVUZoTzBGQlEycERMRWRCUVVjN1FVRkRTQ3hGT3pzN096czdRVU5pUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEVVN096czdPenRCUTFCQk8wRkJRMEU3UVVGRFFTdzRRa0ZCT0VJc1owTkJRVzlETEVVN096czdPenRCUTBac1JUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeERRVUZETEVVN096czdPenRCUTFKRU8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFTkJRVU1zUlRzN096czdPMEZEVWtRN1FVRkRRVHRCUVVOQkxEaENRVUU0UWl3MFEwRkJORU1zUlRzN096czdPenRCUTBZeFJUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEc5RFFVRnZRenRCUVVOd1F6czdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxDdERRVUVyUXl4elJFRkJhVVFzYjBKQlFXOUNPMEZCUTNCSU8wRkJRMEU3UVVGRFFTeEhRVUZITEZWQlFWVTdRVUZEWWl4RFFVRkRPenRCUVVWRU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEhRVUZITzBGQlEwZzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTEZsQlFWazdRVUZEV2p0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hYUVVGWE8wRkJRMWc3UVVGRFFTeFhRVUZYTzBGQlExZ3NVMEZCVXp0QlFVTlVMRTlCUVU4N1FVRkRVRHRCUVVOQk8wRkJRMEU3UVVGRFFTd3lRMEZCTWtNN1FVRkRNME03UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRk5CUVZNN1FVRkRWQ3h0UWtGQmJVSXNaME5CUVdkRE8wRkJRMjVFTEZOQlFWTTdRVUZEVkR0QlFVTkJPMEZCUTBFc1QwRkJUenRCUVVOUU8wRkJRMEU3UVVGRFFTeExRVUZMTzBGQlEwdzdRVUZEUVN4SFFVRkhPMEZCUTBnN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1IwRkJSenRCUVVOSU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRXRCUVVzN1FVRkRUQ3hsUVVGbExIRkRRVUZ4UXp0QlFVTndSRHRCUVVOQkxFZEJRVWM3UVVGRFNEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc2EwTkJRV3RETzBGQlEyeERPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc2EwTkJRV3RETzBGQlEyeERPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzZFVKQlFYVkNMSGRDUVVGM1FqdEJRVU12UXp0QlFVTkJPMEZCUTBFc1UwRkJVenRCUVVOVU8wRkJRMEU3UVVGRFFTeFBRVUZQTzBGQlExQXNTMEZCU3p0QlFVTk1PMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTEd0Q1FVRnJRaXgxUWtGQmRVSXNTMEZCU3p0QlFVTTVRenRCUVVOQk96dEJRVVZCTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEV0QlFVczdRVUZEVER0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxHbENRVUZwUWp0QlFVTnFRaXgzUWtGQmQwSTdRVUZEZUVJc1owSkJRV2RDTzBGQlEyaENMRzlDUVVGdlFqdEJRVU53UWl4M1FrRkJkMEk3UVVGRGVFSXNaMEpCUVdkQ08wRkJRMmhDTEc5Q1FVRnZRanRCUVVOd1FqdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4TFFVRkxPMEZCUTB3N1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEhRVUZITzBGQlEwZzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3TzBGQlJVRXNNRVJCUVRCRUxHdENRVUZyUWp0QlFVTTFSVHRCUVVOQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNRMEZCUXp0QlFVTkVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1EwRkJRenRCUVVORU8wRkJRMEU3UVVGRFFTeERRVUZETzBGQlEwUTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMRk5CUVZNN1FVRkRWQ3hQUVVGUE8wRkJRMUE3UVVGRFFTeExRVUZMTzBGQlEwdzdRVUZEUVR0QlFVTkJMRWRCUVVjN1FVRkRTRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1QwRkJUenRCUVVOUUxFdEJRVXM3UVVGRFREdEJRVU5CTzBGQlEwRTdRVUZEUVN4RFFVRkRMRVU3T3pzN096czdRVU14VTBRN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc2RVSkJRWFZDTzBGQlEzWkNPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQkxITkNRVUZ6UWp0QlFVTjBRaXh2UWtGQmIwSXNkVUpCUVhWQ0xGTkJRVk1zU1VGQlNUdEJRVU40UkN4SFFVRkhPMEZCUTBnc1EwRkJRenRCUVVORU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNRMEZCUXpzN1FVRkZSRHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CT3p0QlFVVkJPMEZCUTBFN1FVRkRRU3hEUVVGRE8wRkJRMFE3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEhsRVFVRjVSRHRCUVVONlJEdEJRVU5CTEV0QlFVczdRVUZEVER0QlFVTkJMSE5DUVVGelFpeHBRMEZCYVVNN1FVRkRka1FzUzBGQlN6dEJRVU5NTEVkQlFVYzdRVUZEU0R0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEhRVUZITzBGQlEwZzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPenRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzT0VSQlFUaEVMRGhDUVVFNFFqdEJRVU0xUmp0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxFZEJRVWM3TzBGQlJVZzdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHM3UVVGRlFUdEJRVU5CTzBGQlEwRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3TzBGQlJVRXNNRVJCUVRCRUxHZENRVUZuUWpzN1FVRkZNVVU3UVVGRFFUdEJRVU5CTzBGQlEwRXNiMEpCUVc5Q0xHOUNRVUZ2UWpzN1FVRkZlRU1zTUVOQlFUQkRMRzlDUVVGdlFqczdRVUZGT1VRN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzUjBGQlJ6dEJRVU5JTEhkQ1FVRjNRaXhsUVVGbExFVkJRVVU3UVVGRGVrTXNkMEpCUVhkQ0xHZENRVUZuUWp0QlFVTjRReXhEUVVGRE96dEJRVVZFTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1EwRkJRenM3UVVGRlJEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3h2UkVGQmIwUXNTMEZCU3l4UlFVRlJMR2xEUVVGcFF6dEJRVU5zUnl4RFFVRkRPMEZCUTBRN1FVRkRRU3dyUTBGQkswTTdRVUZETDBNN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeERRVUZET3p0QlFVVkVPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNNRU03T3pzN096dEJRekZQUVN4NVF6czdPenM3TzBGRFFVRXNjME03T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3p0QlEzVkNRVHM3T3pzN08wRkJRMEU3TzBGQlJVRTdPenRKUVVkTlF5eGxMRU5CUVdkQ0xESkNPMEZCUTNCQ096czdPenRCUVUxQk96czdPMEZCU1VFc01rSkJRVmxETEV0QlFWb3NSVUZCYlVJN1FVRkJRVHM3UVVGRGFrSXNVVUZCU1VNc1VVRkJVU3hKUVVGYU96dEJRVVZCTEdGQlFWTkRMRGhDUVVGVUxFTkJRWGREUXl4SFFVRjRReXhGUVVFMlF6dEJRVU16UXl4WlFVRk5MSFZDUVVGMVFrRXNSMEZCZGtJc1IwRkJOa0lzYVVOQlFXNURPMEZCUTBRN08wRkJSVVE3UVVGRFFVZ3NWVUZCVFVrc1RVRkJUaXhIUVVGblFrZ3NUVUZCVFVrc1QwRkJUaXhIUVVGblFrd3NUVUZCVFVrc1RVRkJkRU1zUjBGQkswTkdMQ3RDUVVFclFpeFJRVUV2UWl4RFFVRXZRenRCUVVOQlJpeFZRVUZOZWtRc1IwRkJUaXhIUVVGaE1FUXNUVUZCVFVzc1NVRkJUaXhIUVVGaFRpeE5RVUZOZWtRc1IwRkJhRU1zUjBGQmMwTXlSQ3dyUWtGQkswSXNTMEZCTDBJc1EwRkJkRU03UVVGRFFVWXNWVUZCVFU4c1QwRkJUaXhIUVVGblFrNHNUVUZCVFU4c1VVRkJUaXhIUVVGcFFsSXNUVUZCVFU4c1QwRkJka01zUjBGQmFVUk1MQ3RDUVVFclFpeFRRVUV2UWl4RFFVRnFSRHRCUVVOQlJpeFZRVUZOVXl4UlFVRk9MRWRCUVdsQ1VpeE5RVUZOVXl4VFFVRk9MRWRCUVd0Q1ZpeE5RVUZOVXl4UlFVRjZReXhIUVVGdlJGQXNLMEpCUVN0Q0xGVkJRUzlDTEVOQlFYQkVPMEZCUTBGR0xGVkJRVTFYTEU5QlFVNHNSMEZCWjBKV0xFMUJRVTFYTEZGQlFVNHNSMEZCYVVKYUxFMUJRVTFYTEU5QlFYWkRMRWRCUVdsRVZDd3JRa0ZCSzBJc1UwRkJMMElzUTBGQmFrUTdRVUZEUVVZc1ZVRkJUV0VzVFVGQlRpeEhRVUZsV2l4TlFVRk5ZU3hQUVVGT0xFZEJRV2RDWkN4TlFVRk5ZU3hOUVVGeVF5eEhRVUU0UTFnc0swSkJRU3RDTEZGQlFTOUNMRU5CUVRsRE8wRkJRMEZHTEZWQlFVMWxMRmxCUVU0c1IwRkJjVUprTEUxQlFVMWxMR0ZCUVU0c1IwRkJjMEpvUWl4TlFVRk5aU3haUVVGcVJDeEhRVUZuUldJc0swSkJRU3RDTEdOQlFTOUNMRU5CUVdoRk96dEJRVVZCTEZGQlFVbEdMRTFCUVUxcFFpeEpRVUZXTEVWQlFXZENhRUlzVFVGQlRXbENMRXRCUVU0c1IwRkJZMnhDTEUxQlFVMXBRaXhKUVVGd1FqdEJRVU5vUWl4UlFVRkpha0lzVFVGQlRXMUNMRmRCUVZZc1JVRkJkVUpzUWl4TlFVRk5iVUlzV1VGQlRpeEhRVUZ4UW5CQ0xFMUJRVTF0UWl4WFFVRXpRanRCUVVOMlFpeFJRVUZKYmtJc1RVRkJUWEZDTEVsQlFWWXNSVUZCWjBKd1FpeE5RVUZOY1VJc1MwRkJUaXhIUVVGamRFSXNUVUZCVFhGQ0xFbEJRWEJDTzBGQlEyaENMRkZCUVVseVFpeE5RVUZOZFVJc1UwRkJWaXhGUVVGeFFuUkNMRTFCUVUxMVFpeFZRVUZPTEVkQlFXMUNlRUlzVFVGQlRYVkNMRk5CUVhwQ08wRkJRM0pDTEZGQlFVbDJRaXhOUVVGTmVVSXNaVUZCVml4RlFVRXlRbmhDTEUxQlFVMTVRaXhuUWtGQlRpeEhRVUY1UWpGQ0xFMUJRVTE1UWl4bFFVRXZRanRCUVVNelFpeFJRVUZKZWtJc1RVRkJUVEpDTEdsQ1FVRldMRVZCUVRaQ01VSXNUVUZCVFRKQ0xHdENRVUZPTEVkQlFUSkNOVUlzVFVGQlRUSkNMR2xDUVVGcVF6czdRVUZGTjBJc1VVRkJTVE5DTEUxQlFVMDJRaXhKUVVGV0xFVkJRV2RDTzBGQlEyUTFRaXhaUVVGTk5rSXNVVUZCVGl4SFFVRnBRaXd3UWtGQlpUbENMRTFCUVUwMlFpeEpRVUZ5UWl4RFFVRnFRanRCUVVORUxFdEJSa1FzVFVGRlR6dEJRVU5NTlVJc1dVRkJUVFpDTEZGQlFVNHNSMEZCYVVJc01FSkJRV1VzUlVGQlppeERRVUZxUWp0QlFVTkVPenRCUVVWRWVrVXNXVUZCVVdkRExFZEJRVklzUTBGQldTeHhRMEZCV2l4RlFVRnRSRmtzVFVGQlRUWkNMRkZCUVhwRU96dEJRVVZCTjBJc1ZVRkJUVGhDTEVsQlFVNHNSMEZCWVRsQ0xFMUJRVTFsTEdGQlFVNHNRMEZCYjBKbExFbEJRV3BETzBGQlEwRTVRaXhWUVVGTkswSXNUVUZCVGl4SFFVRmxMMElzVFVGQlRXVXNZVUZCVGl4RFFVRnZRbWRDTEUxQlFXNURPenRCUVVWQkwwSXNWVUZCVFdkRExHdENRVUZPT3p0QlFVVkJhRU1zVlVGQlRXbERMRk5CUVU0c1IwRkJhMEpzUXl4TFFVRnNRanM3UVVGRlFTeFhRVUZQUXl4TlFVRk5hVU1zVTBGQlRpeERRVUZuUWt3c1NVRkJka0k3UVVGRFFTeFhRVUZQTlVJc1RVRkJUV2xETEZOQlFVNHNRMEZCWjBKdVFpeFpRVUYyUWp0QlFVVkVPenM3TzNsRFFVVnZRanRCUVVOdVFpeFZRVUZKWkN4UlFVRlJMRWxCUVZvN08wRkJSVUU3UVVGRFFTeFZRVUZKUVN4TlFVRk5VeXhUUVVGT0xFdEJRVzlDVkN4TlFVRk5LMElzVFVGQk9VSXNSVUZCYzBNN1FVRkRjRU12UWl4alFVRk5hME1zVTBGQlRpeEhRVUZyUW14RExFMUJRVTA0UWl4SlFVRk9MRU5CUVZkTExGZEJRVmdzUTBGQmRVSnVReXhOUVVGTlV5eFRRVUUzUWl4RlFVRjNReXhWUVVGRE1rSXNSMEZCUkN4RlFVRlRPMEZCUTJwRkxHTkJRVWxCTEVsQlFVbHVSaXhKUVVGS0xFdEJRV0VzVlVGQllpeEpRVUV5UW0xR0xFbEJRVWxETEVWQlFVb3NTMEZCVjNKRExFMUJRVTF6UXl4TlFVRm9SQ3hGUVVGM1JEdEJRVU4wUkd4R0xHOUNRVUZSWjBNc1IwRkJVaXhEUVVGWkxEWkNRVUZhTEVWQlFUSkRaMFFzUjBGQk0wTTdRVUZEUVhCRExHdENRVUZOZFVNc1YwRkJUaXhEUVVGclFrZ3NSMEZCYkVJN1FVRkRSRHRCUVVOR0xGTkJUR2xDTEVOQlFXeENPMEZCVFVRN1FVRkRSanM3TzNkRFFVVnRRanRCUVVOc1FpeFZRVUZKY0VNc1VVRkJVU3hKUVVGYU96dEJRVVZCTEZWQlFVbEJMRTFCUVUxclF5eFRRVUZXTEVWQlFYRkNPMEZCUTI1Q2JFTXNZMEZCVFd0RExGTkJRVTRzUTBGQlowSk5MRTFCUVdoQ08wRkJRMFE3UVVGRFJqczdRVUZGUkRzN096czdPemhDUVVkVE8wRkJRMUFzVlVGQlNYaERMRkZCUVZFc1NVRkJXanM3UVVGSFFVRXNXVUZCVFhsRExHbENRVUZPT3p0QlFVVkJPMEZCUTBRN08wRkJSVVE3T3pzN096czdPenRCUVdkRFFUczdPenMyUWtGSlUwTXNVU3hGUVVGVk8wRkJRMnBDTEZkQlFVdGlMRkZCUVV3c1EwRkJZMk1zVDBGQlpDeERRVUZ6UWl4VlFVRkRReXhMUVVGRUxFVkJRVmM3UVVGREwwSjRSaXhuUWtGQlVXZERMRWRCUVZJc1EwRkJXU3hwUTBGQldpeEZRVUVyUTNkRUxFdEJRUzlETzBGQlEwRkdMR2xDUVVGVFJTeExRVUZVTzBGQlEwUXNUMEZJUkR0QlFVbEVPenRCUVVWRU96czdPenM3T3l0Q1FVbFhSaXhSTEVWQlFWVTdRVUZEYmtJc1YwRkJTMGNzYTBKQlFVd3NSMEZCTUVKSUxGRkJRVEZDTzBGQlEwUTdPMEZCUlVRN096czdaME5CUTFsT0xFY3NSVUZCU3p0QlFVTm1MRlZCUVVsd1F5eFJRVUZSTEVsQlFWbzdPMEZCUlVFc1ZVRkJTVFJETEZGQlFWRTdRVUZEVmpOR0xHTkJRVTF0Uml4SlFVRkpia1lzU1VGRVFUdEJRVVZXV0N4aFFVRkxPRVlzU1VGQlNWVXNTVUZCU2l4RFFVRlRReXhOUVVaS08wRkJSMVpETEdOQlFVMWFMRWxCUVVsVkxFbEJRVW9zUTBGQlUwVTdRVUZJVEN4UFFVRmFPenRCUVUxQkxGVkJRVWxvUkN4TlFVRk5Oa01zYTBKQlFWWXNSVUZCT0VJN1FVRkROVUkzUXl4alFVRk5Oa01zYTBKQlFVNHNRMEZCZVVKRUxFdEJRWHBDTzBGQlEwUTdRVUZEUmpzN08zZENRVFZFWXp0QlFVRkZMR0ZCUVU4c1MwRkJTMWdzVTBGQldqdEJRVUYzUWpzN1FVRkZla003T3pzN096czdkMEpCU1dNN1FVRkJSU3hoUVVGUExFdEJRVXRuUWl4UlFVRmFPMEZCUVhWQ096dEJRVVYyUXpzN096czdPenQzUWtGSlZ6dEJRVUZGTEdGQlFVOHNTMEZCUzNCQ0xGRkJRVXdzUTBGQlkwUXNTVUZCY2tJN1FVRkJORUk3TzBGQlJYcERPenM3T3pzN096dHpRa0ZMWVhwRkxGRXNSVUZCVlR0QlFVRkZMRmRCUVVzclJpeFRRVUZNTEVkQlFXbENMMFlzVVVGQmFrSTdRVUZCTkVJN08wRkJSWEpFT3pzN096czdkMEpCUzJVN1FVRkJSU3hoUVVGUExFdEJRVXNyUml4VFFVRmFPMEZCUVhkQ096czdTMEZ1U2pORE96czdPenM3T3pzN096czdPenM3T3pzN096czdPenRyUWtGNVRHVndSQ3hsT3pzN096czdPMEZEZWt4bU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc1MwRkJTenRCUVVOTU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMR2xGUVVGcFJTd3dSRUZCTUVRc1JVRkJSVHRCUVVNM1NEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNOa1JCUVRaRUxESkVRVUV5UkR0QlFVTjRTQ3h4UkVGQmNVUXNNa1JCUVRKRU8wRkJRMmhJTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNhVVZCUVdsRk8wRkJRMnBGTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFc2QwSkJRWGRDTEhORFFVRnpRenRCUVVNNVJEdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEVzZVVKQlFYbENMRFJFUVVFMFJEdEJRVU55Ump0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQkxIZENRVUYzUWl3clEwRkJLME03UVVGRGRrVTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3gzUWtGQmQwSXNjVVZCUVhGRk8wRkJRemRHTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJMSGRDUVVGM1FpeDFRMEZCZFVNN1FVRkRMMFE3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hSUVVGUk8wRkJRMUk3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3g1UTBGQmVVTTdRVUZEZWtNN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRXNkMEpCUVhkQ08wRkJRM2hDTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hSUVVGUk8wRkJRMUlzYVVVN1FVRkRRU3gzUkVGQmQwUXNOa2RCUVRaSExFVkJRVVU3UVVGRGRrczdRVUZEUVR0QlFVTkJPMEZCUTBFc1QwRkJUenRCUVVOUU8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPenRCUVVWQk96dEJRVVZCTzBGQlEwRXNZVUZCWVR0QlFVTmlPenRCUVVWQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRU3hKUVVGSk8wRkJRMG83TzBGQlJVRTdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN08wRkJSVUVzY1VKQlFYRkNMR3RIUVVGclJ6dEJRVU4yU0R0QlFVTkJPMEZCUTBFc1RVRkJUVHRCUVVOT0xFdEJRVXM3UVVGRFREdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVRkZRU3h2UWtGQmIwSXNiVWRCUVcxSE8wRkJRM1pJTzBGQlEwRXNUVUZCVFR0QlFVTk9PMEZCUTBFN1FVRkRRVHRCUVVOQk96dEJRVVZCTERSRU8wRkJRMEU3UVVGRFFUczdRVUZGUVN4clFrRkJhMElzYjBsQlFXOUpPMEZCUTNSS08wRkJRMEVzU1VGQlNUdEJRVU5LTzBGQlEwRXNSMEZCUnp0QlFVTklPMEZCUTBFN1FVRkRRU3hEUVVGRE96czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3TzBGRGRsRkVPenRCUVVWQk96czdPMEZCUTBFN096czdPenRCUVVWQkxFbEJRVWx4UkN4aFFVRmhMRVZCUVVORExFdEJRVXNzUzBGQlRpeEZRVUZoUXl4UFFVRlBMRTlCUVhCQ0xFVkJRVFpDUXl4UFFVRlBMRTlCUVhCRExFVkJRV3BDT3p0QlFVVkJPenM3TzBGQk9VSkJPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3p0SlFXdERUVU1zYTBJN096dEJRVU5LT3pzN096czdRVUZQUVRzN096czdRVUZMUVR0QlFVTkJMRGhDUVVGWmVFUXNTMEZCV2l4RlFVRnRRanRCUVVGQk96dEJRVUZCTEN0S1FVbFlRU3hMUVVwWE8wRkJRMnBDTzBGQlEwRTdPMEZCU1VFc1VVRkJTVU1zWTBGQlNqczdRVUZGUVVFc1ZVRkJUWGRFTEZGQlFVNHNSMEZCYVVKNlJDeE5RVUZOTUVRc1QwRkJka0k3UVVGRFFYcEVMRlZCUVUwd1JDeFJRVUZPTEVkQlFXbENMRVZCUVdwQ096dEJRVVZCTVVRc1ZVRkJUVFpDTEZGQlFVNHNRMEZCWldNc1QwRkJaaXhEUVVGMVFpeFZRVUZEUXl4TFFVRkVMRVZCUVZjN1FVRkRhRU0xUXl4WlFVRk5Na1FzVTBGQlRpeERRVUZuUW1Zc1MwRkJhRUk3UVVGRFJDeExRVVpFT3p0QlFVbEJPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenRCUVhORFFUVkRMRlZCUVUxblF5eHJRa0ZCVGp0QlFYSkVhVUk3UVVGelJHeENPenM3TzNsRFFVVnZRanRCUVVOdVFqdEJRVU5CTEZWQlFVbG9ReXhSUVVGUkxFbEJRVm83TzBGQlJVRkJMRmxCUVUwMFJDeGxRVUZPTEVkQlFYZENOVVFzVFVGQlRUaENMRWxCUVU0c1EwRkJWMHNzVjBGQldDeERRVUYxUW01RExFMUJRVTFMTEVsQlFVNHNSMEZCWVN4VlFVRndReXhGUVVGblJDeFZRVUZESzBJc1IwRkJSQ3hGUVVGVE8wRkJReTlGTEZsQlFVbEJMRWxCUVVsdVJpeEpRVUZLTEV0QlFXRXNVVUZCYWtJc1JVRkJNa0k3UVVGRGVrSkhMR3RDUVVGUlowTXNSMEZCVWl4RFFVRlpMSGRDUVVGM1Fsa3NUVUZCVFVzc1NVRkJPVUlzUjBGQmNVTXNVVUZCYWtRc1JVRkJNa1FyUWl4SFFVRXpSRHRCUVVOQmNFTXNaMEpCUVUwMlJDeGhRVUZPTEVOQlFXOUNOMFFzVFVGQlRUWkNMRkZCUVRGQ0xFVkJRVzlEVHl4SFFVRndRenRCUVVORU8wRkJRMFlzVDBGTWRVSXNRMEZCZUVJN1FVRk5SRHM3TzNkRFFVVnRRanRCUVVOc1FqdEJRVU5CTEZWQlFVbHdReXhSUVVGUkxFbEJRVm83TzBGQlJVRkJMRmxCUVUwMFJDeGxRVUZPTEVOQlFYTkNjRUlzVFVGQmRFSTdRVUZEUkRzN1FVRkZSRHM3T3pzN096aENRVWRUTzBGQlExQXNWVUZCU1hoRExGRkJRVkVzU1VGQldqczdRVUZGUVVFc1dVRkJUWGxETEdsQ1FVRk9PMEZCUTBFc1lVRkJUM3BETEUxQlFVMDRSQ3hSUVVGT0xFTkJRV1ZETEZWQlFXWXNRMEZCTUVJdlJDeE5RVUZOU3l4SlFVRm9ReXhEUVVGUU8wRkJRMFE3TzBGQlJVUTdPenM3T3p0clEwRkhZenRCUVVOYUxGVkJRVWxNTEZGQlFWRXNTVUZCV2pzN1FVRkZRVHRCUVVOQkxGVkJRVWxuUlN4cFFrRkJhVUk3UVVGRGJrSXZSeXhqUVVGTkxHRkJSR0VzUlVGRFJXZElMRTFCUVUxcVJTeE5RVUZOSzBJc1RVRkVaQ3hGUVVOelFtMURMRWxCUVVsc1JTeE5RVUZOT0VRc1VVRkJUaXhEUVVGbFN5eFBRVVI2UXp0QlFVVnVRbkpDTEdOQlFVMHNSVUZCUlhOQ0xGVkJRVlZ3UlN4TlFVRk5TeXhKUVVGc1FqdEJRVVpoTEU5QlFYSkNPenRCUVV0QlRDeFpRVUZOT0VJc1NVRkJUaXhEUVVGWGRVTXNWMEZCV0N4RFFVRjFRa3dzWTBGQmRrSXNSVUZCZFVNc1ZVRkJRMDBzUzBGQlJDeEZRVUZYTzBGQlEyaEViRWdzWjBKQlFWRm5ReXhIUVVGU0xFTkJRVmtzYTBOQlFWb3NSVUZCWjBSclJpeExRVUZvUkR0QlFVTkJMRmxCUVVsQkxFMUJRVTE0UWl4SlFVRk9MRU5CUVZkRkxFbEJRVmdzUzBGQmIwSXNSMEZCZUVJc1JVRkJOa0k3UVVGRE0wSm9SQ3huUWtGQlRYbERMR2xDUVVGT08wRkJRMEVzYVVKQlFVOTZReXhOUVVGTk9FUXNVVUZCVGl4RFFVRmxReXhWUVVGbUxFTkJRVEJDTDBRc1RVRkJUVXNzU1VGQmFFTXNRMEZCVUR0QlFVTkVPMEZCUTBZc1QwRk9SRHRCUVU5RU96dEJRVVZFT3pzN096czdPenMyUWtGTFUxUXNUU3hGUVVGUk9FTXNVU3hGUVVGVk8wRkJRM3BDTEZWQlFVazJRaXhOUVVGTk0wVXNUVUZCVmp0QlFVTkJMRlZCUVVrMFJTeFpRVUZaTzBGQlEyUjJTQ3hqUVVGTmEwY3NWMEZCVjBjc1MwRkVTRHRCUVVWa1dpeHJRa0ZCVlVFN1FVRkdTU3hQUVVGb1FqczdRVUZMUVN4VlFVRkpLMElzVFVGQlRUZEZMRTlCUVU5d1F5eFBRVUZRTEVOQlFXVXNSMEZCWml4RFFVRldPMEZCUTBFc1ZVRkJTV2xJTEZGQlFWRTNSU3hQUVVGUEwwSXNUVUZCVUN4SFFVRm5RaXhEUVVFMVFpeEZRVUVyUWp0QlFVTTNRaXhaUVVGSk5FY3NVVUZCVVN4RFFVRmFMRVZCUVdVN1FVRkRZa1FzYjBKQlFWVjJTQ3hKUVVGV0xFZEJRV2xDYTBjc1YwRkJWME1zUjBGQk5VSTdRVUZEUkN4VFFVWkVMRTFCUlU4N1FVRkRURzlDTEc5Q1FVRlZka2dzU1VGQlZpeEhRVUZwUW10SExGZEJRVmRGTEV0QlFUVkNPMEZCUTBGclFpeG5Ra0ZCVFRORkxFOUJRVTl5UXl4TlFVRlFMRU5CUVdNc1EwRkJaQ3hGUVVGcFFuRkRMRTlCUVU4dlFpeE5RVUZRTEVkQlFXZENMRU5CUVdwRExFTkJRVTQ3UVVGRFJEdEJRVU5HT3p0QlFVVkVMRmRCUVVzMlJpeFJRVUZNTEVOQlFXTmhMRWRCUVdRc1NVRkJjVUpETEZOQlFYSkNPMEZCUTBRN096czRRa0ZGVXpWQ0xFc3NSVUZCVHp0QlFVTm1MRlZCUVVrMVF5eFJRVUZSTEVsQlFWbzdPMEZCUlVFc01FSkJRVmxCTEUxQlFVMHdSQ3hSUVVGc1FpeEZRVUUwUWpORkxFOUJRVFZDTEVOQlFXOURMRlZCUVVOM1JpeEhRVUZFTEVWQlFWTTdRVUZETTBNc1dVRkJTVE5GTEZOQlFWTkpMRTFCUVUwd1JDeFJRVUZPTEVOQlFXVmhMRWRCUVdZc1EwRkJZanRCUVVOQkxGbEJRVWt6UlN4UFFVRlBNME1zU1VGQlVDeExRVUZuUW10SExGZEJRVmRETEVkQlFTOUNMRVZCUVc5RE8wRkJRMnhETzBGQlEwRjRSQ3hwUWtGQlR6aERMRkZCUVZBc1EwRkJaMEpGTEV0QlFXaENPMEZCUTBRc1UwRklSQ3hOUVVkUExFbEJRVWxvUkN4UFFVRlBNME1zU1VGQlVDeExRVUZuUW10SExGZEJRVmRGTEV0QlFTOUNMRVZCUVhORE8wRkJRek5ETzBGQlEwRXNZMEZCU1ZRc1RVRkJUVGhDTEV0QlFVNHNRMEZCV1d4SUxFOUJRVm9zUTBGQmIwSXJSeXhIUVVGd1FpeE5RVUUyUWl4RFFVRnFReXhGUVVGdlF6dEJRVU5zUXpORkxHMUNRVUZQT0VNc1VVRkJVQ3hEUVVGblFrVXNTMEZCYUVJN1FVRkRSRHRCUVVOR0xGTkJURTBzVFVGTFFTeEpRVUZKYUVRc1QwRkJUek5ETEVsQlFWQXNTMEZCWjBKclJ5eFhRVUZYUnl4TFFVRXZRaXhGUVVGelF6dEJRVU16UXp0QlFVTkJMR05CUVVsV0xFMUJRVTA0UWl4TFFVRk9MRXRCUVdkQ1NDeEhRVUZ3UWl4RlFVRjVRanRCUVVOMlFqTkZMRzFDUVVGUE9FTXNVVUZCVUN4RFFVRm5Ra1VzUzBGQmFFSTdRVUZEUkR0QlFVTkdPMEZCUTBZc1QwRm9Ra1E3UVVGcFFrUTdPenQxUWtGeVMzbERMREpDT3p0clFrRjNTemRDVnl4clFqczdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3TzBGRGJreG1PenM3TzBGQlJVRTdPenM3UVVGRlFUczdPenRCUVVWQk96czdPMGxCU1UxdlFpeHJRanM3TzBGQlEwbzdPenM3T3pzN08wRkJVMEU3T3pzN08wRkJTME03UVVGRFJDdzRRa0ZCV1RWRkxFdEJRVm9zUlVGQmJVSTdRVUZCUVRzN1FVRkJRU3dyU2tGRldFRXNTMEZHVnpzN1FVRkhha0lzVVVGQlNVTXNZMEZCU2pzN1FVRkZRVUVzVlVGQlRUUkZMR05CUVU0c1IwRkJkVUlzUlVGQmRrSTdPMEZCUlVFMVJTeFZRVUZOTmtJc1VVRkJUaXhEUVVGbFl5eFBRVUZtTEVOQlFYVkNMRlZCUVVORExFdEJRVVFzUlVGQlZ6dEJRVU5vUTNoR0xHTkJRVkZuUXl4SFFVRlNMRU5CUVZrc2QwSkJRWGRDVnl4TlFVRk5la1FzUjBGQk9VSXNSMEZCYjBNc1UwRkJhRVFzUlVGQk1rUnpSeXhMUVVFelJEdEJRVU5CTlVNc1dVRkJUVFpGTEZOQlFVNHNRMEZCWjBKcVF5eExRVUZvUWp0QlFVTkVMRXRCU0VRN08wRkJTMEUxUXl4VlFVRk5aME1zYTBKQlFVNDdRVUZhYVVJN1FVRmhiRUk3T3pzN2VVTkJSVzlDTzBGQlEyNUNPMEZCUTBFc1ZVRkJTV2hETEZGQlFWRXNTVUZCV2pzN1FVRkZRVUVzV1VGQlRUaEZMR1ZCUVU0c1IwRkJkMEk1UlN4TlFVRk5PRUlzU1VGQlRpeERRVUZYU3l4WFFVRllMRU5CUVhWQ2JrTXNUVUZCVFVzc1NVRkJOMElzUlVGQmJVTXNWVUZCUXl0Q0xFZEJRVVFzUlVGQlV6dEJRVU5zUldoR0xHZENRVUZSWjBNc1IwRkJVaXhEUVVGWkxHZENRVUZuUWxrc1RVRkJUVXNzU1VGQmRFSXNSMEZCTmtJc1VVRkJla01zUlVGQmJVUXJRaXhIUVVGdVJEdEJRVU5CTEdkQ1FVRlJRU3hKUVVGSmJrWXNTVUZCV2p0QlFVTkZMR1ZCUVVzc1ZVRkJURHRCUVVGcFFpdERMR3RDUVVGTmRVTXNWMEZCVGl4RFFVRnJRa2dzUjBGQmJFSXNSVUZCZDBJN1FVRkRla01zWlVGQlN5eE5RVUZNTzBGQlFXRndReXhyUWtGQlRTdEZMRTlCUVU0c1EwRkJZek5ETEVkQlFXUXNSVUZCYjBJN1FVRkdia003UVVGSlJDeFBRVTUxUWl4RFFVRjRRanRCUVU5RU96czdkME5CUlcxQ08wRkJRMnhDTzBGQlEwRXNWVUZCU1hCRExGRkJRVkVzU1VGQldqczdRVUZGUVVFc1dVRkJUVGhGTEdWQlFVNHNRMEZCYzBKMFF5eE5RVUYwUWp0QlFVTkVPenRCUVVWRU96czdRVUZIUmpzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN1FVRTJRa1U3T3pzN096czdiME5CU1dkQ2QwTXNVeXhGUVVGWE8wRkJRM3BDTEZWQlFVbG9SaXhSUVVGUkxFbEJRVm83TzBGQlJVRTdRVUZEUVR0QlFVTkJMRlZCUVVscFJpeFpRVUZaTzBGQlEyUm9TU3hqUVVGTkxGRkJSRkVzUlVGRFJXZElMRTFCUVUxcVJTeE5RVUZOT0VRc1VVRkJUaXhEUVVGbEwwSXNUVUZFZGtJc1JVRkRLMEp0UXl4SlFVRkpiRVVzVFVGQlRUaEVMRkZCUVU0c1EwRkJaVXNzVDBGRWJFUTdRVUZGWkhKQ0xHTkJRVTBzUlVGQlJXOURMRkZCUVZFc1MwRkJWaXhGUVVGcFFtUXNWVUZCVlhCRkxFMUJRVTFMTEVsQlFXcERMRVZCUVhWRFR5eFJRVUZSV2l4TlFVRk5ZU3hQUVVGeVJDeEZRVUU0UkhCRkxFOUJRVTkxUkN4TlFVRk5Oa0lzVVVGQlRpeERRVUZsUkN4SlFVRndSaXhGUVVFd1JuVkVMRmRCUVZkSUxGTkJRWEpITzBGQlJsRXNUMEZCYUVJN08wRkJTMEZvUml4WlFVRk5PRUlzU1VGQlRpeERRVUZYZFVNc1YwRkJXQ3hEUVVGMVFsa3NVMEZCZGtJN1FVRkRSRHM3UVVGRlJEczdPenM3T3poQ1FVZFRPMEZCUTFBc1ZVRkJTV3BHTEZGQlFWRXNTVUZCV2pzN1FVRkZRVHRCUVVOQkxGVkJRVWx2Uml4WlFVRlpPMEZCUTJSdVNTeGpRVUZOTEZGQlJGRXNSVUZEUldkSUxFMUJRVTFxUlN4TlFVRk5LMElzVFVGRVpDeEZRVU56UW0xRExFbEJRVWxzUlN4TlFVRk5PRVFzVVVGQlRpeERRVUZsU3l4UFFVUjZRenRCUVVWa2NrSXNZMEZCVFN4RlFVRkZjMElzVlVGQlZYQkZMRTFCUVUxTExFbEJRV3hDTzBGQlJsRXNUMEZCYUVJN08wRkJTMEZNTEZsQlFVMDRRaXhKUVVGT0xFTkJRVmQxUXl4WFFVRllMRU5CUVhWQ1pTeFRRVUYyUWl4RlFVRnJReXhWUVVGRFpDeExRVUZFTEVWQlFWYzdRVUZETTBOc1NDeG5Ra0ZCVVdkRExFZEJRVklzUTBGQldTdzJRa0ZCV2l4RlFVRXlRMnRHTEV0QlFUTkRPMEZCUTBFc1dVRkJTVUVzVFVGQlRYaENMRWxCUVU0c1EwRkJWMFVzU1VGQldDeExRVUZ2UWl4SFFVRjRRaXhGUVVFMlFqdEJRVU16UW1oRUxHZENRVUZOZVVNc2FVSkJRVTQ3UVVGRFFTeHBRa0ZCVDNwRExFMUJRVTA0UkN4UlFVRk9MRU5CUVdWMVFpeFZRVUZtTEVOQlFUQkNja1lzVFVGQlRVc3NTVUZCYUVNc1EwRkJVRHRCUVVORU8wRkJRMFlzVDBGT1JEdEJRVTlFT3p0QlFVVkVPenM3T3pzN096czdRVUZOUVRzN096dHRRMEZKWlhGRExGRXNSVUZCVlR0QlFVTjJRaXhYUVVGTE5FTXNjMEpCUVV3c1IwRkJPRUkxUXl4UlFVRTVRanRCUVVORU96dEJRVVZFT3pzN096czdPeXRDUVVsWFFTeFJMRVZCUVZVN1FVRkRia0lzVjBGQlMwY3NhMEpCUVV3c1IwRkJNRUpJTEZGQlFURkNPMEZCUTBRN08wRkJSVVE3T3pzN096czdNa0pCU1U5QkxGRXNSVUZCVlR0QlFVTm1MRmRCUVVzMlF5eGpRVUZNTEVkQlFYTkNOME1zVVVGQmRFSTdRVUZEUkRzN1FVRkZSRHM3T3pzclFrRkRWMDRzUnl4RlFVRkxPMEZCUTJRc1ZVRkJTWEJETEZGQlFWRXNTVUZCV2pzN1FVRkZRVFZETEdOQlFWRm5ReXhIUVVGU0xFTkJRVmtzTUVKQlFWb3NSVUZCZDBOblJDeEhRVUY0UXp0QlFVTkJMR05CUVZGQkxFbEJRVWxWTEVsQlFVb3NRMEZCVXpkR0xFbEJRV3BDTzBGQlEwVXNZVUZCU3l4WFFVRk1PMEZCUVd0Q0swTXNaMEpCUVUxM1JpeFpRVUZPTEVOQlFXMUNjRVFzUjBGQmJrSXNSVUZCZVVJN1FVRkRNME1zWVVGQlN5eGhRVUZNTzBGQlFXOUNjRU1zWjBKQlFVMTVSaXhqUVVGT0xFTkJRWEZDY2tRc1IwRkJja0lzUlVGQk1rSTdRVUZHYWtRN1FVRkpSRHM3UVVGRlJEczdPenRwUTBGRFlVRXNSeXhGUVVGTE8wRkJRVUU3TzBGQlEyaENMRlZCUVVsd1F5eFJRVUZSTEVsQlFWbzdRVUZEUVN4VlFVRkpNRVlzWVVGQllYUkVMRWxCUVVsVkxFbEJRVW9zUTBGQlUyMUNMRWxCUVRGQ08wRkJRMEUzUnl4alFVRlJaME1zUjBGQlVpeERRVUZaTEcxRFFVRmFMRVZCUVdsRVowUXNSMEZCYWtRN08wRkJSVUVzVlVGQlNWRXNVVUZCVVR0QlFVTldNMFlzWTBGQlRXMUdMRWxCUVVsVkxFbEJRVW9zUTBGQlV6ZEdMRWxCUkV3N1FVRkZWbGdzWVVGQlMyOUtMRlZCUmtzN08wRkJTVloyU1N4clFrRkJWV2xHTEVsQlFVbFZMRWxCUVVvc1EwRkJVek5HTEZGQlNsUTdPMEZCVFZaM1NTeG5Ra0ZCVVN4clFrRkJUVHRCUVVOYU8wRkJRMEVzWTBGQlNVTXNUVUZCVFN4RlFVRkZkRW9zUzBGQlMyOUtMRlZCUVZBc1JVRkJiVUpITEZGQlFWRXNUVUZCTTBJc1JVRkJWanRCUVVOQk4wWXNaMEpCUVUwMFJTeGpRVUZPTEVOQlFYRkNZeXhWUVVGeVFpeEpRVUZ0UTBVc1IwRkJia003TzBGQlJVRTdRVUZEUVN4alFVRkpSU3hwUWtGQmFVSXNSVUZCY2tJN1FVRkRRU3c0UWtGQldUbEdMRTFCUVUwclJpeG5Ra0ZCYkVJc1JVRkJiME5vU0N4UFFVRndReXhEUVVFMFF5eFZRVUZEYVVnc1ZVRkJSQ3hGUVVGblFqdEJRVU14UkN4blFrRkJTVU1zWlVGQlpXcEhMRTFCUVUwclJpeG5Ra0ZCVGl4RFFVRjFRa01zVlVGQmRrSXNSVUZCYlVOd1JTeEpRVUYwUkR0QlFVTkJhMFVzTWtKQlFXVkZMRlZCUVdZc1NVRkJOa0lzYzBKQlFWVkRMRmxCUVZZc1EwRkJOMEk3UVVGRFJDeFhRVWhFT3p0QlFVdEJMR05CUVVsRExGZEJRVmRzUnl4TlFVRk5hVU1zVTBGQmNrSTdRVUZEUVdsRkxHMUNRVUZUUXl4bFFVRlVMRWRCUVRKQ1RDeGpRVUV6UWp0QlFVTkJTU3h0UWtGQlUzUkZMRWxCUVZRc1IwRkJaMElzYzBKQlFWVTFRaXhOUVVGTk5FSXNTVUZCYUVJc1EwRkJhRUk3UVVGRFFYTkZMRzFDUVVGVGVrTXNUMEZCVkN4SFFVRnRRbnBFTEUxQlFVMTNSQ3hSUVVGNlFqczdRVUZGUVN4alFVRkpORU1zVlVGQlZUdEJRVU5hTDBRc1owSkJRVWxFTEVsQlFVbERMRVZCUkVrc1JVRkRRWEJHTEUxQlFVMHNWVUZFVGl4RlFVTnJRbWRJTEUxQlFVMDNRaXhKUVVGSk9FSXNSVUZFTlVJc1JVRkRaME5CTEVsQlFVazVRaXhKUVVGSk5rSXNTVUZFZUVNN1FVRkZXbTVDTEd0Q1FVRk5MRVZCUVVWRkxFMUJRVTBzUjBGQlVpeEZRVUZoY0VNc1VVRkJVVm9zVFVGQlRXRXNUMEZCTTBJc1JVRkJiME53UlN4UFFVRlBlVW9zVVVGQk0wTTdRVUZHVFN4WFFVRmtPenRCUVV0Qk8wRkJRMEVzWTBGQlNUbEVMRWxCUVVsVkxFbEJRVW9zUTBGQlUzVkVMR05CUVZRc1EwRkJkMElzYzBKQlFYaENMRXRCUVcxRUxFTkJRVU5xUlN4SlFVRkpWU3hKUVVGS0xFTkJRVk4zUkN4dlFrRkJha1VzUlVGQmRVWTdRVUZEY2taR0xHOUNRVUZSZEVRc1NVRkJVaXhEUVVGaGQwUXNiMEpCUVdJc1IwRkJiME1zVDBGQlMwTXNjVUpCUVhwRE8wRkJRMEVzYlVKQlFVdEJMSEZDUVVGTUxFZEJRVFpDYmtVc1NVRkJTVlVzU1VGQlNpeERRVUZUZDBRc2IwSkJRWFJETzBGQlEwUTdPMEZCUlVRN1FVRkRRWFJITEdkQ1FVRk5PRUlzU1VGQlRpeERRVUZYZFVNc1YwRkJXQ3hEUVVGMVFpdENMRTlCUVhaQ096dEJRVVZCTEdsQ1FVRlBVaXhIUVVGUU8wRkJRMFFzVTBGMFExTTdPMEZCZDBOV1dTeG5Ra0ZCVVN4blFrRkJRME1zVFVGQlJDeEZRVUZaTzBGQlEyeENPMEZCUTBGNlJ5eG5Ra0ZCVFRoQ0xFbEJRVTRzUTBGQlYzVkRMRmRCUVZnc1EwRkJkVUk3UVVGRGNrSm9ReXhuUWtGQlNVUXNTVUZCU1VNc1JVRkVZU3hGUVVOVWNFWXNUVUZCVFN4VlFVUkhMRVZCUTFOblNDeE5RVUZOTjBJc1NVRkJTVGhDTEVWQlJHNUNMRVZCUTNWQ1FTeEpRVUZKT1VJc1NVRkJTVFpDTEVsQlJDOUNPMEZCUlhKQ2JrSXNhMEpCUVUwc1JVRkJSVVVzVFVGQlRTeEhRVUZTTEVWQlFXRXdSQ3hOUVVGTlJDeE5RVUZ1UWp0QlFVWmxMRmRCUVhaQ08wRkJTVVE3UVVFNVExTXNUMEZCV2pzN1FVRnBSRUVzVlVGQlNYcEhMRTFCUVUxelJpeHpRa0ZCVml4RlFVRnJRenRCUVVOb1EyeEpMR2RDUVVGUlowTXNSMEZCVWl4RFFVRlpMSE5DUVVGYUxFVkJRVzlEZDBRc1MwRkJjRU03UVVGRFFUVkRMR05CUVUxelJpeHpRa0ZCVGl4RFFVRTJRakZETEV0QlFUZENPMEZCUTBRN1FVRkRSanM3UVVGRlJEczdPenR0UTBGRFpWSXNSeXhGUVVGTE8wRkJRMnhDTEZWQlFVbHdReXhSUVVGUkxFbEJRVm83UVVGRFFTeFZRVUZKTUVZc1lVRkJZWFJFTEVsQlFVbFZMRWxCUVVvc1EwRkJVMjFDTEVsQlFURkNPenRCUVVWQkxGVkJRVWt5UWl4TlFVRk5OVVlzVFVGQlRUUkZMR05CUVU0c1EwRkJjVUpqTEZWQlFYSkNMRU5CUVZZN1FVRkRRU3hoUVVGUE1VWXNUVUZCVFRSRkxHTkJRVTRzUTBGQmNVSmpMRlZCUVhKQ0xFTkJRVkE3TzBGQlJVRXNWVUZCU1RsRExGRkJRVkU3UVVGRFZqTkdMR05CUVUxdFJpeEpRVUZKVlN4SlFVRktMRU5CUVZNM1JpeEpRVVJNTzBGQlJWWllMR0ZCUVV0dlNpeFZRVVpMTzBGQlIxWTFTQ3huUWtGQlVUaElPMEZCU0VVc1QwRkJXanM3UVVGTlFTeFZRVUZKTlVZc1RVRkJUWE5HTEhOQ1FVRldMRVZCUVd0RE8wRkJRMmhEYkVrc1owSkJRVkZuUXl4SFFVRlNMRU5CUVZrc2VVSkJRVm9zUlVGQmRVTjNSQ3hMUVVGMlF6dEJRVU5CTlVNc1kwRkJUWE5HTEhOQ1FVRk9MRU5CUVRaQ01VTXNTMEZCTjBJN1FVRkRSRHRCUVVOR096dEJRVVZFT3pzN08yZERRVU5aVWl4SExFVkJRVXM3UVVGRFppeFZRVUZKY0VNc1VVRkJVU3hKUVVGYU96dEJRVVZCTEZWQlFVazBReXhSUVVGUk8wRkJRMVl6Uml4alFVRk5iVVlzU1VGQlNXNUdMRWxCUkVFN1FVRkZWbGdzWVVGQlN6aEdMRWxCUVVrMlFpeEpRVVpETzBGQlIxWnFRaXhqUVVGTldpeEpRVUZKVlN4SlFVRktMRU5CUVZORk8wRkJTRXdzVDBGQldqczdRVUZOUVN4VlFVRkphRVFzVFVGQlRUWkRMR3RDUVVGV0xFVkJRVGhDTzBGQlF6VkNla1lzWjBKQlFWRm5ReXhIUVVGU0xFTkJRVmtzYTBKQlFWb3NSVUZCWjBOM1JDeExRVUZvUXp0QlFVTkJOVU1zWTBGQlRUWkRMR3RDUVVGT0xFTkJRWGxDUkN4TFFVRjZRanRCUVVORU8wRkJRMFk3TzBGQlJVUTdPenM3TkVKQlExRlNMRWNzUlVGQlN6dEJRVU5ZTEZWQlFVbHdReXhSUVVGUkxFbEJRVm83TzBGQlJVRXNWVUZCU1RSRExGRkJRVkU3UVVGRFZqTkdMR05CUVUxdFJpeEpRVUZKYmtZc1NVRkVRVHRCUVVWV1dDeGhRVUZMT0VZc1NVRkJTVFpDTEVsQlJrTTdPMEZCU1ZZd1FpeG5Ra0ZCVVN4clFrRkJUVHRCUVVOYU0wWXNaMEpCUVUwNFFpeEpRVUZPTEVOQlFWZDFReXhYUVVGWUxFTkJRWFZDTzBGQlEzSkNhRU1zWjBKQlFVbEVMRWxCUVVsRExFVkJSR0VzUlVGRFZIQkdMRTFCUVUwc1ZVRkVSeXhGUVVOVFowZ3NUVUZCVFRkQ0xFbEJRVWs0UWl4RlFVUnVRaXhGUVVOMVFrRXNTVUZCU1RsQ0xFbEJRVWsyUWl4SlFVUXZRanRCUVVWeVFtNUNMR3RDUVVGTkxFVkJRVVZGTEUxQlFVMHNSMEZCVWl4RlFVRmhka2NzVDBGQlR5eHpRa0ZCVlhWRUxFMUJRVTAwUWl4SlFVRm9RaXhEUVVGd1FqdEJRVVpsTEZkQlFYWkNPMEZCU1VRc1UwRlVVenM3UVVGWFZqUkZMR2RDUVVGUkxHZENRVUZEUXl4TlFVRkVMRVZCUVZrN1FVRkRiRUo2Unl4blFrRkJUVGhDTEVsQlFVNHNRMEZCVjNWRExGZEJRVmdzUTBGQmRVSTdRVUZEY2tKb1F5eG5Ra0ZCU1VRc1NVRkJTVU1zUlVGRVlTeEZRVU5VY0VZc1RVRkJUU3hWUVVSSExFVkJRMU5uU0N4TlFVRk5OMElzU1VGQlNUaENMRVZCUkc1Q0xFVkJRM1ZDUVN4SlFVRkpPVUlzU1VGQlNUWkNMRWxCUkM5Q08wRkJSWEpDYmtJc2EwSkJRVTBzUlVGQlJVVXNUVUZCVFN4SFFVRlNMRVZCUVdFd1JDeE5RVUZOUkN4TlFVRnVRanRCUVVabExGZEJRWFpDTzBGQlNVUTdRVUZvUWxNc1QwRkJXanM3UVVGdFFrRXNWVUZCU1hwSExFMUJRVTExUml4alFVRldMRVZCUVRCQ08wRkJRM2hDYmtrc1owSkJRVkZuUXl4SFFVRlNMRU5CUVZrc1kwRkJXaXhGUVVFMFFuZEVMRXRCUVRWQ08wRkJRMEUxUXl4alFVRk5kVVlzWTBGQlRpeERRVUZ4UWpORExFdEJRWEpDTzBGQlEwUTdRVUZEUmpzN08zZENRV3BMYlVJN1FVRkJSU3hoUVVGUExFdEJRVXRuUXl4alFVRmFPMEZCUVRaQ096czdkVUpCTjBoVUxESkNMRWRCYWtNMVF6czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3YTBKQmJWVmxSQ3hyUWpzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenRCUXpWVFpqczdPenRCUVVOQk96czdPMEZCUTBFN096czdRVUZGUVRzN096dEpRVWxOWjBNc1ZUdEJRVU5LT3pzN096czdPenM3T3pzN096dEJRV2xDUVRzN096dEJRVWxCTzBGQlEwRXNjMEpCUVZrMVJ5eExRVUZhTEVWQlFXMUNPMEZCUVVFN08wRkJRMnBDTEZGQlFVbERMRkZCUVZFc1NVRkJXanM3UVVGRlFTeGhRVUZUUXl3NFFrRkJWQ3hEUVVGM1EwTXNSMEZCZUVNc1JVRkJOa003UVVGRE0wTXNXVUZCVFN4clFrRkJhMEpCTEVkQlFXeENMRWRCUVhkQ0xHbERRVUU1UWp0QlFVTkVPenRCUVVWRVNDeFZRVUZOTmtjc1QwRkJUaXhIUVVGblFqVkhMRTFCUVUwNFJDeFJRVUZPTEVkQlFXbENMMFFzVFVGQlRUWkhMRTlCUVhaRExFZEJRV2xFTTBjc0swSkJRU3RDTEZOQlFTOUNMRU5CUVdwRU8wRkJRMEZHTEZWQlFVMTZSQ3hIUVVGT0xFZEJRV0V3UkN4TlFVRk5TeXhKUVVGT0xFZEJRV0ZPTEUxQlFVMTZSQ3hIUVVGb1F5eEhRVUZ6UXpKRUxDdENRVUVyUWl4TFFVRXZRaXhEUVVGMFF6dEJRVU5CUml4VlFVRk5UeXhQUVVGT0xFZEJRV2RDVGl4TlFVRk5UeXhSUVVGT0xFZEJRV2xDVWl4TlFVRk5UeXhQUVVGMlF5eEhRVUZwUkV3c0swSkJRU3RDTEZOQlFTOUNMRU5CUVdwRU8wRkJRMEZHTEZWQlFVMVRMRkZCUVU0c1IwRkJhVUpTTEUxQlFVMVRMRk5CUVU0c1IwRkJhMEpXTEUxQlFVMVRMRkZCUVhwRExFZEJRVzlFVUN3clFrRkJLMElzVlVGQkwwSXNRMEZCY0VRN1FVRkRRVVlzVlVGQlRWY3NUMEZCVGl4SFFVRm5RbFlzVFVGQlRWY3NVVUZCVGl4SFFVRnBRbG9zVFVGQlRWY3NUMEZCZGtNc1IwRkJhVVJVTEN0Q1FVRXJRaXhUUVVFdlFpeERRVUZxUkR0QlFVTkJSaXhWUVVGTllTeE5RVUZPTEVkQlFXVmFMRTFCUVUxaExFOUJRVTRzUjBGQlowSmtMRTFCUVUxaExFMUJRWEpETEVkQlFUaERXQ3dyUWtGQkswSXNVVUZCTDBJc1EwRkJPVU03UVVGRFFVWXNWVUZCVFdsQ0xFbEJRVTRzUjBGQllXaENMRTFCUVUxcFFpeExRVUZPTEVkQlFXTnNRaXhOUVVGTmFVSXNTVUZCYWtNc1IwRkJkME5tTEN0Q1FVRXJRaXhOUVVFdlFpeERRVUY0UXpzN1FVRkhRVVFzVlVGQlRUWkhMRTlCUVU0c1IwRkJaMEk1Unl4TlFVRk5PRVlzVFVGQmRFSTdPMEZCUlVFc1VVRkJTVGxHTEUxQlFVMDJRaXhKUVVGV0xFVkJRV2RDTzBGQlEyUTFRaXhaUVVGTk5rSXNVVUZCVGl4SFFVRnBRaXd3UWtGQlpUbENMRTFCUVUwMlFpeEpRVUZ5UWl4RFFVRnFRanRCUVVORUxFdEJSa1FzVFVGRlR6dEJRVU5NTlVJc1dVRkJUVFpDTEZGQlFVNHNSMEZCYVVJc01FSkJRV1VzUlVGQlppeERRVUZxUWp0QlFVTkVPMEZCUTBRM1FpeFZRVUZOT0Vjc1ZVRkJUaXhIUVVGdFFpOUhMRTFCUVUxblNDeFRRVUY2UWpzN1FVRkZRVHRCUVVOQkwwY3NWVUZCVFhWSExIRkNRVUZPTEVkQlFUaENlRWNzVFVGQlRXbElMRTFCUVhCRE96dEJRVVZCYUVnc1ZVRkJUWGRFTEZGQlFVNHNSMEZCYVVJc1EwRkJha0k3UVVGRFFYaEVMRlZCUVUxcFJDeFJRVUZPTEVkQlFXbENMRU5CUVdwQ08wRkJRMEZxUkN4VlFVRk5LMFlzWjBKQlFVNHNSMEZCZVVJc1JVRkJla0k3UVVGRFFTOUdMRlZCUVUxcFNDeHJRa0ZCVGl4SFFVRXlRaXhGUVVFelFqczdRVUZGUVdwSUxGVkJRVTFyU0N4UlFVRk9MRWRCUVdsQ2JrZ3NUVUZCVFcxR0xFMUJRWFpDT3p0QlFVVkJiRVlzVlVGQlRTdENMRTFCUVU0c1IwRkJaV2hETEUxQlFVMDJSeXhQUVVGT0xFTkJRV00zUlN4TlFVRTNRanRCUVVOQkwwSXNWVUZCVFRoQ0xFbEJRVTRzUjBGQllTOUNMRTFCUVUwMlJ5eFBRVUZPTEVOQlFXTTVSU3hKUVVFelFqczdRVUZGUVN4UlFVRkpMMElzVFVGQlRXMUNMRmRCUVZZc1JVRkJkVUpzUWl4TlFVRk5iVUlzV1VGQlRpeEhRVUZ4UW5CQ0xFMUJRVTF0UWl4WFFVRXpRanRCUVVOMlFpeFJRVUZKYmtJc1RVRkJUWEZDTEVsQlFWWXNSVUZCWjBKd1FpeE5RVUZOY1VJc1MwRkJUaXhIUVVGamRFSXNUVUZCVFhGQ0xFbEJRWEJDTzBGQlEyaENMRkZCUVVseVFpeE5RVUZOZFVJc1UwRkJWaXhGUVVGeFFuUkNMRTFCUVUxMVFpeFZRVUZPTEVkQlFXMUNlRUlzVFVGQlRYVkNMRk5CUVhwQ08wRkJRM0pDTEZGQlFVbDJRaXhOUVVGTmVVSXNaVUZCVml4RlFVRXlRbmhDTEUxQlFVMTVRaXhuUWtGQlRpeEhRVUY1UWpGQ0xFMUJRVTE1UWl4bFFVRXZRanRCUVVNelFpeFJRVUZKZWtJc1RVRkJUVEpDTEdsQ1FVRldMRVZCUVRaQ01VSXNUVUZCVFRKQ0xHdENRVUZPTEVkQlFUSkNOVUlzVFVGQlRUSkNMR2xDUVVGcVF6czdRVUZGTjBJeFFpeFZRVUZOYVVNc1UwRkJUaXhIUVVGclFpeHpRa0ZCWTJ4RExFdEJRV1FzUTBGQmJFSTdRVUZEUVN4WFFVRlBReXhOUVVGTmFVTXNVMEZCVGl4RFFVRm5Ra3dzU1VGQmRrSTdRVUZEUVN4WFFVRlBOVUlzVFVGQlRXbERMRk5CUVU0c1EwRkJaMEl5UlN4UFFVRjJRanRCUVVOQkxGZEJRVTgxUnl4TlFVRk5hVU1zVTBGQlRpeERRVUZuUW10RUxGTkJRWFpDT3p0QlFVVkJPenM3TzBGQlNVUTdPenM3YzBOQlJXbENPMEZCUTJoQ0xGVkJRVWx1Uml4UlFVRlJMRWxCUVZvN08wRkJSVUVzVlVGQlNXMUlMR0ZCUVdFc1EwRkJha0k3UVVGRFFTeFZRVUZKUXl4blFrRkJaMEp3U0N4TlFVRk5LMElzVFVGQlRpeEhRVUZsTEVkQlFXWXNSMEZCY1VKdlJpeFZRVUY2UXpzN1FVRkhRU3d3UWtGQldXNUlMRTFCUVUwNFJ5eFZRVUZzUWl4RlFVRTRRbXhJTEUxQlFUbENMRU5CUVhGRExGVkJRVU15UlN4SFFVRkVMRVZCUVZNN1FVRkROVU1zV1VGQlNYWkZMRTFCUVUwNFJ5eFZRVUZPTEVOQlFXbENka01zUjBGQmFrSXNSVUZCYzBJNFF5eFBRVUYwUWl4SFFVRm5RMFFzWVVGQmNFTXNSVUZCYlVRN1FVRkRha1JCTERCQ1FVRm5RbkJJTEUxQlFVMDRSeXhWUVVGT0xFTkJRV2xDZGtNc1IwRkJha0lzUlVGQmMwSTRReXhQUVVGMFF6dEJRVU5FTzBGQlEwWXNUMEZLUkRzN1FVRk5RU3hoUVVGUFJpeGhRVUZoUnl4UFFVRlBSaXhqUVVGamRFc3NTMEZCWkN4RFFVRnZRaXhIUVVGd1FpeEZRVUY1UWl4RFFVRjZRaXhEUVVGUUxFTkJRWEJDTzBGQlEwUTdPenQ1UTBGRmIwSTdRVUZCUVRzN1FVRkRia0lzVlVGQlNXdEVMRkZCUVZFc1NVRkJXanM3UVVGRlFTeFZRVUZKZFVnc1pVRkJaWFpJTEUxQlFVMUxMRWxCUVU0c1IwRkJZU3haUVVGb1F6dEJRVU5CYWtRc1kwRkJVV2RETEVkQlFWSXNRMEZCV1N4elEwRkJXaXhGUVVGdlJGa3NUVUZCVFRoSExGVkJRVEZFTzBGQlEwRXNWVUZCU1RsSExFMUJRVTA0Unl4VlFVRldMRVZCUVhOQ08wRkJRM0JDT1Vjc1kwRkJUVGhITEZWQlFVNHNRMEZCYVVJdlNDeFBRVUZxUWl4RFFVRjVRaXhWUVVGRGVVa3NTMEZCUkN4RlFVRlhPMEZCUTJ4RExHTkJRVWxETEZkQlFWZEdMR1ZCUVdWRExFdEJRVGxDTzBGQlEwRXNZMEZCU1VVc1YwRkJWekZJTEUxQlFVMDRRaXhKUVVGT0xFTkJRVmRMTEZkQlFWZ3NRMEZCZFVKelJpeFJRVUYyUWl4RlFVRnBReXhWUVVGRGNrWXNSMEZCUkN4RlFVRlRPMEZCUTNaRU8wRkJRMEVzWjBKQlFVbEJMRWxCUVVrMlFpeEpRVUZLTEV0QlFXRXNUMEZCUzJ4RExFMUJRWFJDTEVWQlFUaENPMEZCUXpWQ00wVXNjMEpCUVZGblF5eEhRVUZTTEVOQlFWa3NNa0pCUVZvc1JVRkJlVU5uUkN4SFFVRjZRenRCUVVOQkxITkNRVUZSUVN4SlFVRkpia1lzU1VGQldqdEJRVU5GTEhGQ1FVRkxMRkZCUVV3N1FVRkJaU3RETEhkQ1FVRk5Na2dzWTBGQlRpeERRVUZ4UW5aR0xFZEJRWEpDTEVWQlFUSkNPMEZCUXpGRExIRkNRVUZMTEZGQlFVdzdRVUZCWldoR0xEQkNRVUZSWjBNc1IwRkJVaXhEUVVGWlowUXNSMEZCV2l4RlFVRnJRanRCUVVOcVF6dEJRVUZUY0VNc2QwSkJRVTAwU0N4bFFVRk9MRU5CUVhOQ2VFWXNSMEZCZEVJc1JVRkJORUk3UVVGSWRrTTdRVUZMUkR0QlFVTkdMRmRCVm1Nc1EwRkJaanM3UVVGWlFYQkRMR2RDUVVGTmFVZ3NhMEpCUVU0c1EwRkJlVUpvU1N4SlFVRjZRaXhEUVVFNFFubEpMRkZCUVRsQ08wRkJRMFFzVTBGbVJEdEJRV2RDUkR0QlFVTkdPenM3ZDBOQlJXMUNPMEZCUTJ4Q0xGVkJRVWt4U0N4UlFVRlJMRWxCUVZvN08wRkJSVUZCTEZsQlFVMXBTQ3hyUWtGQlRpeERRVUY1UW14SkxFOUJRWHBDTEVOQlFXbERMRlZCUVVNeVNTeFJRVUZFTEVWQlFXTTdRVUZETjBOQkxHbENRVUZUYkVZc1RVRkJWRHRCUVVORUxFOUJSa1E3TzBGQlNVRXNNRUpCUVZsNFF5eE5RVUZOSzBZc1owSkJRV3hDTEVWQlFXOURhRWdzVDBGQmNFTXNRMEZCTkVNc1ZVRkJRM2RHTEVkQlFVUXNSVUZCVXp0QlFVTnVSSFpGTEdOQlFVMHJSaXhuUWtGQlRpeERRVUYxUW5oQ0xFZEJRWFpDTEVWQlFUUkNPVUlzYVVKQlFUVkNPMEZCUTBRc1QwRkdSRHRCUVVkRU96dEJRVWRET3pzN096czdiME5CUjJkQ2MwVXNVeXhGUVVGWE8wRkJRVUU3TzBGQlEzcENMRlZCUVVrdlJ5eFJRVUZSTEVsQlFWbzdPMEZCUlVFc1ZVRkJTVzlJTEdkQ1FVRm5RaXhMUVVGTGNrWXNUVUZCVEN4SFFVRmpMRWRCUVdRc1IwRkJiMElzUzBGQlMydENMRkZCUVRkRE96dEJRVVZCTzBGQlEwRXNNRUpCUVZrNFJDeFRRVUZhTEVWQlFYVkNhRWtzVDBGQmRrSXNRMEZCSzBJc1ZVRkJRemhKTEdkQ1FVRkVMRVZCUVhOQ08wRkJRMjVFTEZsQlFVbERMRmRCUVZkbUxGVkJRVlZqTEdkQ1FVRldMRU5CUVdZN08wRkJSVUVzTkVKQlFWbERMRkZCUVZvc1JVRkJjMEl2U1N4UFFVRjBRaXhEUVVFNFFpeFZRVUZEYzBrc1QwRkJSQ3hGUVVGaE8wRkJRM3BETEdOQlFVbFZMR0ZCUVdGRUxGTkJRVk5VTEU5QlFWUXNSVUZCYTBJMVN5eExRVUZ1UXp0QlFVTkJWeXhyUWtGQlVXZERMRWRCUVZJc1EwRkJXU3h2UkVGQldpeEZRVUZyUlhsSkxHZENRVUZzUlN4RlFVRnZSa01zVVVGQmNFWXNSVUZCT0VaRExGVkJRVGxHTzBGQlEwRkJMSEZDUVVGWGFrZ3NXVUZCV0N4SFFVRXdRbVFzUzBGQk1VSTdRVUZEUVN0SUxIRkNRVUZYTlVnc1RVRkJXQ3hIUVVGdlFrZ3NUVUZCVFVzc1NVRkJNVUk3UVVGRFFVd3NaMEpCUVUwclJpeG5Ra0ZCVGl4RFFVRjFRbk5DTEU5QlFYWkNMRWxCUVd0RExEaENRVUZ2UWxVc1ZVRkJjRUlzUTBGQmJFTTdRVUZEUVM5SUxHZENRVUZOSzBZc1owSkJRVTRzUTBGQmRVSnpRaXhQUVVGMlFpeEZRVUZuUTJ4TExGRkJRV2hETEVkQlFUSkRNa3NzVTBGQlUxUXNUMEZCVkN4RlFVRnJRbXhMTEZGQlFUZEVPenRCUVVWQkxHTkJRVWxyU3l4VlFVRlZSQ3hoUVVGa0xFVkJRVFpDTzBGQlF6TkNRU3cwUWtGQlowSkRMRTlCUVdoQ08wRkJRMFE3TzBGQlJVUnFTeXhyUWtGQlVXZERMRWRCUVZJc1EwRkJXU3hyUkVGQldpeEZRVUZuUlN4UFFVRkxNa2NzWjBKQlFVd3NRMEZCYzBKelFpeFBRVUYwUWl4RFFVRm9SVHRCUVVORUxGTkJZa1E3UVVGalJDeFBRV3BDUkRzN1FVRnRRa0VzVjBGQlMzQkZMRkZCUVV3c1IwRkJaMEp4UlN4UFFVRlBSaXhqUVVGamRFc3NTMEZCWkN4RFFVRnZRaXhIUVVGd1FpeEZRVUY1UWl4RFFVRjZRaXhEUVVGUUxFTkJRV2hDTzBGQlEwUTdPMEZCUlVnN096czdPenM3T3p0QlFUaENRVHM3T3pSQ1FVZFJPMEZCUTA0N1FVRkRRU3haUVVGTkxHbENRVUZPTzBGQlEwUTdPMEZCUlVRN096czdPenMyUWtGSFV6dEJRVU5RTzBGQlEwRXNXVUZCVFN4cFFrRkJUanRCUVVORU96dEJRVVZFT3pzN096czdNa0pCUjA4N1FVRkRURHRCUVVOQkxGbEJRVTBzYVVKQlFVNDdRVUZEUkRzN1FVRkZSRHM3T3pzN096czdPenMyUWtGUFUyZE1MRkVzUlVGQlZVVXNWeXhGUVVGaE4wc3NVU3hGUVVGVk5FTXNTeXhGUVVGUE8wRkJReTlETEZWQlFVbERMRkZCUVZFc1NVRkJXanM3UVVGRlFTeFZRVUZKSzBnc1lVRkJZeXh6UWtGQll5eEZRVUZrTEVWQlFXdENhRWtzUzBGQmJFSXNRMEZCYkVJN1FVRkRRVHRCUVVOQlF5eFpRVUZOYVVRc1VVRkJUanRCUVVOQk9FVXNhVUpCUVZkNlRDeEhRVUZZTEVkQlFXbENNRVFzVFVGQlRTdENMRTFCUVU0c1IwRkJaU3hIUVVGbUxFZEJRWEZDTDBJc1RVRkJUV2xFTEZGQlFUVkRPMEZCUTBFc1ZVRkJTV2RHTEdWQlFXVnFTU3hOUVVGTlN5eEpRVUZPTEVkQlFXRXNXVUZCWWl4SFFVRTBRbmxJTEZGQlFTOURPenRCUVVWQlF5eHBRa0ZCVjJwSUxGbEJRVmdzUjBGQk1FSmtMRXRCUVRGQ08wRkJRMEVyU0N4cFFrRkJWMjVITEVsQlFWZ3NSMEZCYTBKdlJ5eFhRVUZzUWp0QlFVTkJSQ3hwUWtGQlYzWklMRkZCUVZnc1IwRkJjMEpTTEUxQlFVMHJRaXhOUVVFMVFqdEJRVU5CWjBjc2FVSkJRVmQ2U0N4UFFVRllMRWRCUVhOQ0xFbEJRVWswU0N4SlFVRktMRVZCUVVRc1EwRkJWME1zVjBGQldDeEZRVUZ5UWp0QlFVTkJTaXhwUWtGQlYzSklMRTlCUVZnc1IwRkJjVUpXTEUxQlFVMVhMRkZCUVROQ08wRkJRMEZ2U0N4cFFrRkJWMjVJTEUxQlFWZ3NSMEZCYjBKYUxFMUJRVTFoTEU5QlFURkNPMEZCUTBGclNDeHBRa0ZCVnpWSUxFMUJRVmdzUjBGQmIwSklMRTFCUVUweFJDeEhRVUV4UWpzN1FVRkZRU3hWUVVGSk9Fd3NWMEZCVnl3NFFrRkJiMEpNTEZWQlFYQkNMRU5CUVdZN08wRkJSMEVzVlVGQlNVMHNXVUZCV1VRc1UwRkJVMFVzVVVGQmVrSTdRVUZEUVVRc1owSkJRVlY2Unl4SlFVRldMRWRCUVdsQ2IwY3NWMEZCYWtJN08wRkJSVUU3UVVGRFFTeFZRVUZKVHl4aFFVRmhPMEZCUTJaMFRDeGpRVUZOTEZGQlJGTXNSVUZEUTJkSUxFMUJRVTFxUlN4TlFVRk5LMElzVFVGRVlpeEZRVU54UW0xRExFbEJRVWtyUkN4WlFVUjZRanRCUVVWbWJrWXNZMEZCVFN4RlFVRkZjMElzVlVGQlZUSkVMRmRCUVZkNlRDeEhRVUYyUWl4RlFVRTBRa2NzVDBGQlR6Uk1MRk5CUVc1RE8wRkJSbE1zVDBGQmFrSTdPMEZCUzBFc1ZVRkJTV3hNTEZGQlFVb3NSVUZCYlVJN1FVRkJSVzlNTEcxQ1FVRlhla1lzU1VGQldDeERRVUZuUWpOR0xGRkJRV2hDTEVkQlFUSkNRU3hSUVVFelFqdEJRVUZ6UXpzN1FVRkZNMFE3UVVGRFFTeFZRVUZKTEVOQlFVTTJReXhOUVVGTmRVY3NjVUpCUVZnc1JVRkJhME5uUXl4WFFVRlhla1lzU1VGQldDeERRVUZuUW5kRUxHOUNRVUZvUWl4SFFVRjFRM1JITEUxQlFVMTFSeXh4UWtGQk4wTTdPMEZCUld4RGJrb3NZMEZCVVdkRExFZEJRVklzUTBGQldTdzRRa0ZCV2l4RlFVRTBRMmRLTEZGQlFUVkRPenRCUVVWQk8wRkJRMEVzWVVGQlR5eHpRa0ZCV1N4VlFVRkRTU3hQUVVGRUxFVkJRV0U3UVVGRE9VSXNXVUZCU1VNc1VVRkJVWHBKTEUxQlFVMDRRaXhKUVVGT0xFTkJRVmQxUXl4WFFVRllMRU5CUVhWQ2EwVXNWVUZCZGtJc1EwRkJXanM3UVVGRlFUdEJRVU5CU0N4cFFrRkJVMDBzVVVGQlZDeERRVUZyUWl4VlFVRkRPVVlzUzBGQlJDeEZRVUZYTzBGQlF6TkNOVU1zWjBKQlFVMDJSU3hUUVVGT0xFTkJRV2RDYWtNc1MwRkJhRUlzUlVGQmRVSXNSVUZCUlhSRkxFMUJRVTB5U2l4WlFVRlNMRVZCUVhOQ1dpeFRRVUZUVlN4WFFVRlhla3dzUjBGQk1VTXNSVUZCZGtJN1FVRkRSQ3hUUVVaRU96dEJRVWxCTUVRc1kwRkJUU3RHTEdkQ1FVRk9MRU5CUVhWQ1owTXNWMEZCVjNwTUxFZEJRV3hETEVsQlFYbERPRXdzVVVGQmVrTTdPMEZCUlVGSkxHZENRVUZSU2l4UlFVRlNPMEZCUTBRc1QwRllUU3hEUVVGUU8wRkJXVVE3TzBGQlJVUTdPenM3T3pzN0swSkJTVmN4Uml4UkxFVkJRVlU3UVVGRGJrSXNWMEZCUzJsSExIRkNRVUZNTEVkQlFUWkNha2NzVVVGQk4wSTdRVUZEUkRzN1FVRkZSRHM3T3p0dFEwRkRaVTRzUnl4RlFVRkxPMEZCUTJ4Q0xGVkJRVWx3UXl4UlFVRlJMRWxCUVZvN1FVRkRRU3hWUVVGSkswZ3NZVUZCWVN4elFrRkJWVE5HTEVsQlFVbFZMRWxCUVVvc1EwRkJVM0pITEV0QlFXNUNMRU5CUVdwQ08wRkJRMEU3UVVGRFFYTk1MR2xDUVVGWGFrZ3NXVUZCV0N4SFFVRXdRbVFzUzBGQk1VSTdRVUZEUVRzN1FVRkZRVFZETEdOQlFWRm5ReXhIUVVGU0xFTkJRVmtzTkVOQlFUUkRXU3hOUVVGTkswSXNUVUZCYkVRc1IwRkJNa1FzUzBGQmRrVXNSVUZCT0VWTExFZEJRVGxGTzBGQlEwRXNWVUZCU1dkSExGZEJRVmNzT0VKQlFXOUNUQ3hWUVVGd1FpeERRVUZtTzBGQlEwRXZTQ3haUVVGTkswWXNaMEpCUVU0c1EwRkJkVUpuUXl4WFFVRlhla3dzUjBGQmJFTXNTVUZCZVVNNFRDeFJRVUY2UXpzN1FVRkZRVHRCUVVOQlVTeHBRa0ZCVnl4WlFVRk5PMEZCUTJZN1FVRkRRVFZKTEdOQlFVMDRRaXhKUVVGT0xFTkJRVmQxUXl4WFFVRllMRU5CUVhWQ08wRkJRM0pDYUVNc1kwRkJTVVFzU1VGQlNVTXNSVUZFWVN4RlFVTlVjRVlzVFVGQlRTeFZRVVJITEVWQlExTm5TQ3hOUVVGTk4wSXNTVUZCU1RoQ0xFVkJSRzVDTEVWQlEzVkNRU3hKUVVGSk9VSXNTVUZCU1RaQ0xFbEJSQzlDTzBGQlJYSkNia0lzWjBKQlFVMHNSVUZCUlVVc1RVRkJUU3hIUVVGU0xFVkJRV0ZFTEZGQlFWRXZReXhOUVVGTkswSXNUVUZCTTBJN1FVRkdaU3hUUVVGMlFqdEJRVWxFTEU5QlRrUTdPMEZCVVVFc1ZVRkJTV0VzVVVGQlVUdEJRVU5XTTBZc1kwRkJUVzFHTEVsQlFVbHVSaXhKUVVSQk8wRkJSVlpuU0N4alFVRk5OMElzU1VGQlNUWkNMRWxCUmtFN1FVRkhWak5JTEdGQlFVczRSaXhKUVVGSk9FSXNSVUZJUXp0QlFVbFdla2dzWlVGQlR6SkdMRWxCUVVsVkxFbEJRVW9zUTBGQlUzSkhMRXRCUVZRc1EwRkJaVzFHTEVsQlNsbzdRVUZMVm5sR0xHbENRVUZUVlN4WFFVRlhla3dzUjBGTVZqdEJRVTFXWVN4clFrRkJWV2xHTEVsQlFVbFZMRWxCUVVvc1EwRkJVek5HTzBGQlRsUXNUMEZCV2pzN1FVRlRRU3hWUVVGSk5rTXNUVUZCVFRKSkxIRkNRVUZXTEVWQlFXbERPMEZCUXk5Q2Rrd3NaMEpCUVZGblF5eEhRVUZTTEVOQlFWa3NjMEpCUVZvc1JVRkJiME4zUkN4TFFVRndRenRCUVVOQk5VTXNZMEZCVFRKSkxIRkNRVUZPTEVOQlFUUkNMMFlzUzBGQk5VSTdRVUZEUkR0QlFVTkdPenRCUVVWRU96czdPemhDUVVOVlFTeExMRVZCUVU5cFJ5eFRMRVZCUVZjN1FVRkRNVUlzVlVGQlNUZEpMRkZCUVZFc1NVRkJXanM3UVVGRlFVRXNXVUZCVFhkRUxGRkJRVTQ3TzBGQlJVRXNWVUZCU1hoRUxFMUJRVTAyUnl4UFFVRk9MRXRCUVd0Q0xFMUJRWFJDTEVWQlFUaENPMEZCUXpWQ08wRkJRMEVzV1VGQlNXbERMRmxCUVZrN1FVRkRaRGRNTEdkQ1FVRk5MRkZCUkZFc1JVRkRSV2RJTEUxQlFVMXFSU3hOUVVGTlN5eEpRVVJrTEVWQlEyOUNOa1FzU1VGQlNXeEZMRTFCUVUxTExFbEJRVTRzUjBGQllTeFZRVVJ5UXp0QlFVVmtlVU1zWjBKQlFVMHNSVUZCUlZjc1UwRkJVM3BFTEUxQlFVMTNSQ3hSUVVGcVFpeEZRVUV5UWxRc1VVRkJVUzlETEUxQlFVMHJRaXhOUVVGNlF5eEZRVUZwUkdkSUxGZEJRVmR1Unl4TlFVRk5PRUlzUzBGQmJFVTdRVUZHVVN4VFFVRm9RanM3UVVGTFFYUklMR2RDUVVGUlowTXNSMEZCVWl4RFFVRlpMRFpDUVVGYUxFVkJRVEpEZDBRc1MwRkJNME1zUlVGQmEwUnBSeXhUUVVGc1JDeEZRVUUyUkVNc1UwRkJOMFE3TzBGQlJVRXNXVUZCU1d4SExFMUJRVTF2Unl4TFFVRk9MRXRCUVdkQ0xIZENRVUZYUXl4TlFVRXZRaXhGUVVGMVF6dEJRVU55UXl4alFVRkpja2NzVFVGQlRYTkhMRXRCUVU0c1MwRkJaMElzZDBKQlFWZERMRTFCUVM5Q0xFVkJRWFZETzBGQlEzSkRUQ3h6UWtGQlZXaEhMRWxCUVZZc1EwRkJaWEpITEV0QlFXWXNSMEZCZFVKdFJ5eE5RVUZOYUVJc1NVRkJOMEk3UVVGRFJEdEJRVU5HTEZOQlNrUXNUVUZKVHp0QlFVTk1hMGdzYjBKQlFWVm9SeXhKUVVGV0xFTkJRV1Z6Unl4aFFVRm1MRWRCUVN0Q2VFY3NUVUZCVFc5SExFdEJRWEpETzBGQlEwRkdMRzlDUVVGVmFFY3NTVUZCVml4RFFVRmxja2NzUzBGQlppeEhRVUYxUW0xSExFMUJRVTFvUWl4SlFVRTNRanRCUVVOQkxHTkJRVWxuUWl4TlFVRk5jMGNzUzBGQlRpeExRVUZuUWl4M1FrRkJWMGNzVFVGQkwwSXNSVUZCZFVNN1FVRkRja05RTEhOQ1FVRlZhRWNzU1VGQlZpeERRVUZsZDBjc1UwRkJaaXhIUVVFeVFqRkhMRTFCUVUxelJ5eExRVUZxUXp0QlFVTkVPMEZCUTBZN08wRkJSVVE3UVVGRFFTeFpRVUZKVEN4VFFVRktMRVZCUVdVN1FVRkRZa01zYjBKQlFWVTFSU3hGUVVGV0xFZEJRV1V5UlN4VlFVRlZka3NzU1VGQmVrSTdRVUZEUVhkTExHOUNRVUZWYUVjc1NVRkJWaXhEUVVGbGMwSXNVVUZCWml4SFFVRXdRbmxGTEZWQlFWVjRRaXhQUVVGd1F6dEJRVU5FT3p0QlFVVkVPMEZCUTBFc1dVRkJTU3hEUVVGRGNrZ3NUVUZCVFhWSExIRkNRVUZZTEVWQlFXdERkVU1zVlVGQlZXaEhMRWxCUVZZc1EwRkJaWGRFTEc5Q1FVRm1MRWRCUVhORGRFY3NUVUZCVFhWSExIRkNRVUUxUXpzN1FVRkZiRU4yUnl4alFVRk5PRUlzU1VGQlRpeERRVUZYZFVNc1YwRkJXQ3hEUVVGMVFubEZMRk5CUVhaQ08wRkJRMFE3UVVGRFJqczdRVUZGUkRzN096dHJRMEZEWTFNc1R5eEZRVUZUYmtnc1J5eEZRVUZMTzBGQlF6RkNMRlZCUVVsd1F5eFJRVUZSTEVsQlFWbzdPMEZCUlVFN1FVRkRRVHRCUVVOQk8wRkJRMEVzVlVGQlNVRXNUVUZCVFhkRUxGRkJRVTRzUjBGQmFVSXNRMEZCYWtJc1MwRkJkVUp3UWl4SlFVRkpWU3hKUVVGS0xFTkJRVk5YTEU5QlFYQkRMRVZCUVRaRE8wRkJRek5EZWtRc1kwRkJUWGRFTEZGQlFVNDdRVUZEUVN4WlFVRkpiRVlzVDBGQlR6aEVMRWxCUVVsVkxFbEJRVW9zUTBGQlUybEhMRk5CUVhCQ08wRkJRMEVzV1VGQlNYUk5MRkZCUVZFc2MwSkJRVlV5Uml4SlFVRkpWU3hKUVVGS0xFTkJRVk55Unl4TFFVRnVRaXhEUVVGYU8wRkJRMEVzV1VGQlNTdE5MR0ZCUVdGRUxGRkJRVkZGTEZWQlFWSXNRMEZCYlVKdVRDeEpRVUZ1UWl4RFFVRnFRanM3UVVGRlFTeFpRVUZKT0VRc1NVRkJTVlVzU1VGQlNpeERRVUZUYzBjc1lVRkJWQ3hMUVVFeVFpeDNRa0ZCVjAwc1MwRkJNVU1zUlVGQmFVUTdRVUZETDBNc1kwRkJTWFJJTEVsQlFVbFZMRWxCUVVvc1EwRkJVM2RITEZOQlFWUXNTMEZCZFVJc2QwSkJRVmRMTEVkQlFYUkRMRVZCUVRKRE8wRkJRM3BETEdkQ1FVRkpReXhOUVVGTlNpeFhRVUZYZWt3c1IwRkJja0k3UVVGRFFTeG5Ra0ZCU1dNc1VVRkJVVEpMTEZkQlFWZExMRWxCUVhaQ08wRkJRMEZETEd0Q1FVRk5ReXhUUVVGT0xFTkJRV2RDUXl4TlFVRm9RaXhEUVVGMVFrTXNTMEZCZGtJc1EwRkJOa0pNTEVkQlFUZENMRVZCUVd0RExFTkJRVU12U3l4TFFVRkVMRVZCUVZFc1EwRkJVaXhGUVVGWFl5eE5RVUZZTEVOQlFXdENiRVFzUzBGQmJFSXNRMEZCYkVNN1FVRkRSQ3hYUVVwRUxFMUJTVThzU1VGQlNUSkdMRWxCUVVsVkxFbEJRVW9zUTBGQlUzZEhMRk5CUVZRc1MwRkJkVUlzZDBKQlFWZElMRTFCUVhSRExFVkJRVGhETzBGQlEyNUVMR2RDUVVGSlV5eFBRVUZOU2l4WFFVRlhla3dzUjBGQmNrSTdRVUZEUVN4blFrRkJTV01zVTBGQlVUSkxMRmRCUVZkTExFbEJRWFpDTzBGQlEwRkVMR2xDUVVGSlNTeE5RVUZLTEVOQlFWZHVUQ3hOUVVGWUxFVkJRV3RDY0VNc1MwRkJiRUk3UVVGRFJDeFhRVXBOTEUxQlNVRTdRVUZEVEN0TkxIVkNRVUZYZWt3c1IwRkJXQ3hEUVVGbGVVd3NWMEZCVjBzc1NVRkJNVUlzU1VGQmEwTndUaXhMUVVGc1F5eERRVVJMTEVOQlEyOURPMEZCUXpGRE8wRkJRMFlzVTBGYVJDeE5RVmxQTzBGQlEwd3NZMEZCU1RKR0xFbEJRVWxWTEVsQlFVb3NRMEZCVTNKSExFdEJRV0lzUlVGQmIwSTdRVUZEYkVJclRTeDFRa0ZCVjNwTUxFZEJRVmdzUTBGQlpYbE1MRmRCUVZkTExFbEJRVEZDTEVsQlFXdERjRTRzUzBGQmJFTXNRMEZFYTBJc1EwRkRkVUk3UVVGRE1VTXNWMEZHUkN4TlFVVlBPMEZCUTB3c2JVSkJRVThyVFN4WFFVRlhla3dzUjBGQldDeERRVUZsZVV3c1YwRkJWMHNzU1VGQk1VSXNRMEZCVUN4RFFVUkxMRU5CUTIxRE8wRkJRM3BETzBGQlEwWTdRVUZEUml4UFFYcENSQ3hOUVhsQ1R6dEJRVU5NTzBGQlEwRjZUU3huUWtGQlVXZERMRWRCUVZJc1EwRkJXU3h6UTBGQmMwTlpMRTFCUVUxM1JDeFJRVUUxUXl4SFFVRjFSQ3hYUVVGMlJDeEhRVUZ4UlhCQ0xFbEJRVWxWTEVsQlFVb3NRMEZCVTFjc1QwRkJPVVVzUjBGQmQwWXNSMEZCY0VjN1FVRkRSRHRCUVVOR096dEJRVVZFT3pzN08yOURRVU5uUW5KQ0xFY3NSVUZCU3p0QlFVTnVRaXhWUVVGSmNFTXNVVUZCVVN4SlFVRmFPMEZCUTBFMVF5eGpRVUZSWjBNc1IwRkJVaXhEUVVGWkxHMUNRVUZhTEVWQlFXbERXU3hOUVVGTkswSXNUVUZCZGtNc1JVRkJLME5MTEVkQlFTOURPenRCUVVWQkxGVkJRVWxwUml4VlFVRlZha1lzU1VGQlNWVXNTVUZCU2l4RFFVRlRjMElzVVVGQmRrSTdRVUZEUVN4VlFVRkpNRVFzVjBGQlZ6bElMRTFCUVUwclJpeG5Ra0ZCVGl4RFFVRjFRbk5DTEU5QlFYWkNMRU5CUVdZN08wRkJSVUVzVlVGQlNWTXNVVUZCU2l4RlFVRmpPMEZCUTFvNVNDeGpRVUZOTmtRc1lVRkJUaXhEUVVGdlFtbEZMRk5CUVZOcVJ5eFJRVUUzUWl4RlFVRjFRMDhzUjBGQmRrTTdRVUZEUkN4UFFVWkVMRTFCUlU4N1FVRkRUR2hHTEdkQ1FVRlJaME1zUjBGQlVpeERRVUZaTEhsQ1FVRmFMRVZCUVhWRGFVa3NUMEZCZGtNN1FVRkRSRHRCUVVOR096czdkMEpCYmxCVE8wRkJRVVVzWVVGQlR5eExRVUZMYUVnc1NVRkJXanRCUVVGdFFqczdRVUZGTDBJN096czdPenM3ZDBKQlNXRTdRVUZCUlN4aFFVRlBMRXRCUVV0UkxFOUJRVm83UVVGQmMwSTdPMEZCUlhKRE96czdPenM3TzNkQ1FVbGhPMEZCUVVVc1lVRkJUeXhMUVVGTFowY3NUMEZCV2p0QlFVRnpRanM3UVVGRmNrTTdPenM3T3pzN2QwSkJTVmM3UVVGQlJTeGhRVUZQTEV0QlFVdG9SaXhSUVVGTUxFTkJRV05FTEVsQlFYSkNPMEZCUVRSQ096dEJRVVY2UXpzN096czdPenQzUWtGSlowSTdRVUZCUlN4aFFVRlBMRXRCUVV0dFJTeG5Ra0ZCV2p0QlFVRXJRanM3TzB0Qk9VNXVSRHM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN2EwSkJObUpsV1N4Vk96czdPenM3T3pzN096czdPenM3T3pzN096czdPenRCUXpkaVpqczdRVUZEUVRzN096dEJRVVZCTEVsQlFVMTFSQ3hoUVVGaExFVkJRVU5TTEU5QlFVOHNaMEpCUVZJc1JVRkJNRUpVTEZGQlFWRXNhVUpCUVd4RExFVkJRVzVDT3p0QlFVVkJPenM3T3pzN1NVRkxUV3RDTEZVN1FVRkZTaXh6UWtGQldXNURMRmRCUVZvc1JVRkJlVUk3UVVGQlFUczdRVUZEZGtJc1VVRkJTV2hKTEZGQlFWRXNTVUZCV2pzN1FVRkZRVUVzVlVGQlRTdEVMRlZCUVU0c1IwRkJiVUlzUlVGQmJrSTdRVUZEUVM5RUxGVkJRVTB3UkN4UlFVRk9MRWRCUVdsQ0xFVkJRV3BDT3p0QlFVVkJMRk5CUVVzd1J5eExRVUZNTEVkQlFXRndReXhsUVVGbExFVkJRVFZDT3p0QlFVVkJMRk5CUVV0eFF5eG5Ra0ZCVEN4RFFVRnpRaXhMUVVGTFJDeExRVUV6UWp0QlFVTkVPenM3T3pSQ1FVbFBNVWdzVVN4RlFVRlZPMEZCUTJoQ0xGZEJRVXR4UWl4VlFVRk1MRU5CUVdkQ09VVXNTVUZCYUVJc1EwRkJjVUo1UkN4UlFVRnlRanRCUVVORU96czdlVUpCUlVsd1JTeEpMRVZCUVUwN1FVRkRWQ3hWUVVGSlF5eFBRVUZQTERSQ1FVRm5Ra1FzU1VGQmFFSXNRMEZCV0RzN1FVRkZRU3hoUVVGUExFdEJRVXRuVFN4alFVRk1MRU5CUVc5Q0wwd3NTVUZCY0VJc1EwRkJVRHRCUVVORU96czdLMEpCUlZWRUxFa3NSVUZCVFR0QlFVTm1MRlZCUVVsMFFpeFRRVUZUTEVWQlFXSTdRVUZEUVN4VlFVRkpkVUlzVDBGQlR5dzBRa0ZCWjBKRUxFbEJRV2hDTEVOQlFWZzdRVUZEUVhSQ0xHRkJRVTgyVFN4SlFVRlFMRWRCUVdOMFRDeExRVUZMWjAwc1IwRkJUQ3hGUVVGa08wRkJRMEYyVGl4aFFVRlBaU3hIUVVGUUxFZEJRV0VzUzBGQlMzVk5MR05CUVV3c1EwRkJiMEl2VEN4SlFVRndRaXhEUVVGaU96dEJRVVZCTEdGQlFVOTJRaXhOUVVGUU8wRkJRMFE3T3p0dFEwRkZZM1ZDTEVrc1JVRkJUVHRCUVVOdVFpeFZRVUZKVWl4TlFVRk5MRXRCUVV0eFRTeExRVUZtTzBGQlEwRTNUQ3hYUVVGTFVTeFBRVUZNTEVOQlFXRXNWVUZCUTNSRExFdEJRVVFzUlVGQlZ6dEJRVU4wUW5OQ0xHTkJRVTFCTEVsQlFVbDBRaXhMUVVGS0xFTkJRVTQ3UVVGRFJDeFBRVVpFT3p0QlFVbEJMR0ZCUVU5elFpeEhRVUZRTzBGQlEwUTdPenR4UTBGRlowSkVMRTBzUlVGQlVUdEJRVUZCT3p0QlFVVjJRaXhWUVVGSk1FMHNWVUZCVlN4VFFVRldRU3hQUVVGVkxFTkJRVU5ETEZOQlFVUXNSVUZCWlRzN1FVRkZNMEpCTEd0Q1FVRlZReXhMUVVGV0xFTkJRV2RDTEZWQlFVTkRMRTFCUVVRc1JVRkJXVHRCUVVNeFFpeHBRa0ZCUzBNc1ZVRkJUQ3hEUVVGblFrUXNUVUZCYUVJN1FVRkRSQ3hUUVVaRU8wRkJTVVFzVDBGT1JEczdRVUZSUVN4WFFVRkxVQ3hMUVVGTUxFZEJRV0ZUTEU5QlFVOURMRmRCUVZBc1EwRkJiVUpvVGl4TlFVRnVRaXhGUVVFeVFqQk5MRTlCUVROQ0xFTkJRV0k3UVVGRlJEczdPeXRDUVVWVk5VZ3NTeXhGUVVGUE8wRkJRMmhDTEZkQlFVdHRRaXhWUVVGTUxFTkJRV2RDYUVZc1QwRkJhRUlzUTBGQmQwSXNWVUZCUXpKRUxGRkJRVVFzUlVGQll6dEJRVU53UTBFc2FVSkJRVk5GTEV0QlFWUTdRVUZEUkN4UFFVWkVPMEZCUjBRN096c3JRa0ZGVlN0SUxFMHNSVUZCVVRzN1FVRkZha0lzVlVGQlNUVk5MRTFCUVUwMFRTeFBRVUZQTjAwc1RVRkJha0k3UVVGRFFTeFZRVUZKYVU0c1owSkJRVW83TzBGQlJVRXNWVUZCU1doT0xFbEJRVWxwVGl4WFFVRktMRXRCUVc5Q1NDeE5RVUY0UWl4RlFVRm5RenRCUVVNNVFrVXNhMEpCUVZWRkxGZEJRVmRvUXl4TlFVRnlRanRCUVVORU96dEJRVVZFTEZWQlFVbHNUQ3hKUVVGSmFVNHNWMEZCU2l4TFFVRnZRbXhDTEV0QlFYaENMRVZCUVN0Q08wRkJRemRDYVVJc2EwSkJRVlZGTEZkQlFWZDJRaXhMUVVGeVFqdEJRVU5FT3p0QlFVVkVMRlZCUVVsM1FpeGpRVUZqVUN4UFFVRlBVU3hQUVVGNlFqczdRVUZGUVR0QlFVTkJPenRCUVVWQk8wRkJRMEVzVlVGQlNVTXNWMEZCVjNKT0xFbEJRVWswVFN4UFFVRlBNMG9zU1VGQldDeERRVUZtT3p0QlFVVkJPenRCUVVWQkxGVkJRVWt5U2l4UFFVRlBNVTRzU1VGQlVDeExRVUZuUWl4UlFVRm9RaXhKUVVFMFFpeERRVUZEYVU4c1dVRkJXVzVQTEZGQlFWb3NRMEZCY1VJc1UwRkJja0lzUTBGQmFrTXNSVUZCYTBVN1FVRkRhRVVzWVVGQlMzTlBMRlZCUVV3c1EwRkJaMEk3UVVGRFpHNURMR2xDUVVGUGIwTXNWMEZCVjJwRExFMUJSRW83UVVGRlpFd3NhVUpCUVU4clFpeFBRVVpQTzBGQlIyUnlSeXhwUWtGQlQzZEhMRmRCU0U4N1FVRkpaSFJLTEdkQ1FVRk5kMG83UVVGS1VTeFRRVUZvUWp0QlFVMUVPenRCUVVWRUxGVkJRVWxVTEU5QlFVOHhUaXhKUVVGUUxFdEJRV2RDTEV0QlFYQkNMRVZCUVRKQ08wRkJRM3BDTEdGQlFVdHZUeXhWUVVGTUxFTkJRV2RDTzBGQlEyUnVReXhwUWtGQlQyOURMRmRCUVZjelFpeEhRVVJLTzBGQlJXUllMR2xDUVVGUEswSXNUMEZHVHp0QlFVZGtja2NzYVVKQlFVOTNSeXhYUVVoUE8wRkJTV1IwU2l4blFrRkJUWGRLTzBGQlNsRXNVMEZCYUVJN1FVRk5SRHM3UVVGRlJDeFZRVUZKVkN4UFFVRlBNVTRzU1VGQlVDeExRVUZuUWl4UlFVRndRaXhGUVVFNFFqdEJRVU0xUWl4aFFVRkxiMDhzVlVGQlRDeERRVUZuUWp0QlFVTmtia01zYVVKQlFVOXZReXhYUVVGWGJrTXNUVUZFU2p0QlFVVmtTQ3hwUWtGQlR5dENMRTlCUms4N1FVRkhaSEpITEdsQ1FVRlBkMGM3UVVGSVR5eFRRVUZvUWp0QlFVdEVPMEZCUTBZN096dDNRa0ZzUjFVN1FVRkJSU3hoUVVGUExFdEJRVXRrTEV0QlFWbzdRVUZCYjBJN096czdPMEZCYzBjMVFpeEpRVUZKYTBJc2EwTkJRV0VzUlVGQlEycERMRkZCUVZFc1VVRkJWQ3hGUVVGdFFrMHNTMEZCU3l4TFFVRjRRaXhGUVVFclFsSXNVVUZCVVN4UlFVRjJReXhGUVVGcVFqdEJRVU5CTEVsQlFVazRRaXhyUTBGQllTeEZRVUZEYUVNc1VVRkJVU3hSUVVGVUxFVkJRVzFDVXl4UFFVRlBMRTlCUVRGQ0xFVkJRV3BDTzJ0Q1FVTlJVeXhWT3pzN096czdRVU12U0dZc2EwSkJRV3RDTEhsRU96czdPenM3TzBGRFFXeENPenRCUVVWQk96dEJRVVZCT3p0QlFVVkJPenRCUVVWQk96dEJRVVZCT3p0QlFVVkJMSE5EUVVGelF5eDFRMEZCZFVNc1owSkJRV2RDT3p0QlFVVTNSanRCUVVOQk8wRkJRMEU3TzBGQlJVRTdRVUZEUVRzN1FVRkZRVHRCUVVOQk8wRkJRMEVzUzBGQlN6dEJRVU5NTzBGQlEwRTdRVUZEUVN4SFFVRkhPMEZCUTBnN1FVRkRRU3hIUVVGSE8wRkJRMGc3TzBGQlJVRTdRVUZEUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3UVVGRFFTeEZPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdRVU5tUVRzN1FVRkZRVHM3T3p0QlFVTkJPenM3TzBGQlEwRTdPenM3T3p0QlFVVkJPenM3T3p0QlFUVkNRVHM3T3pzN096czdPenM3T3pzN096czdPenM3T3p0SlFXbERUVzlDTEU4N1FVRkRTanM3T3pzN096czdPenM3TzBGQlpVRTdPenM3T3p0QlFVMUJMRzFDUVVGWlF5eExRVUZhTEVWQlFXMUNReXhIUVVGdVFpeEZRVUYzUWtNc1RVRkJlRUlzUlVGQlowTTdRVUZCUVRzN1FVRkRPVUlzVVVGQlNURk1MRkZCUVZFc1NVRkJXanM3UVVGRlFVRXNWVUZCVFN0Q0xFMUJRVTRzUjBGQlpYbEtMRXRCUVdZN1FVRkRRWGhNTEZWQlFVMDRRaXhKUVVGT0xFZEJRV0V5U2l4SFFVRmlPenRCUVVWQmVrd3NWVUZCVFcxRkxFOUJRVTRzUjBGQlowSjFTQ3hQUVVGUFF5eFZRVUZRTEVkQlFXOUNMRXRCUVhCRE8wRkJRMEV6VEN4VlFVRk5ORXdzVjBGQlRpeEhRVUZ2UWtZc1QwRkJUME1zVlVGQk0wSTdPMEZCUlVFelRDeFZRVUZOY1VZc1ZVRkJUaXhIUVVGdFFpeEZRVUZ1UWp0QlFVTkJja1lzVlVGQlRTdEVMRlZCUVU0c1IwRkJiVUlzUlVGQmJrSTdRVUZEUVM5RUxGVkJRVTAyVEN4aFFVRk9MRWRCUVhOQ0xFVkJRWFJDT3p0QlFVVkJTaXhSUVVGSmRFb3NWMEZCU2l4RFFVRm5RbkZLTEV0QlFXaENMRVZCUVhWQ0xGVkJRVU53U2l4SFFVRkVMRVZCUVZNN1FVRkRPVUk3UVVGRFFTeFZRVUZKUVN4SlFVRkpOa0lzU1VGQlNpeExRVUZoZFVnc1MwRkJha0lzUlVGQmQwSTdRVUZEZEVKd1R5eG5Ra0ZCVVRCUExFbEJRVklzUTBGQllTeDVRa0ZCWWl4RlFVRjNRekZLTEVkQlFYaERMRVZCUVRaRGNFTXNTMEZCTjBNN1FVRkRRU3huUWtGQlVXOURMRWxCUVVsdVJpeEpRVUZhTzBGQlEwVXNaVUZCU3l4VFFVRk1PMEZCUVdkQ0swTXNhMEpCUVUwclRDeFZRVUZPTEVOQlFXbENNMG9zUjBGQmFrSXNSVUZCZFVJN1FVRkRka01zWlVGQlN5eFJRVUZNTzBGQlFXVndReXhyUWtGQlRXZE5MR1ZCUVU0c1EwRkJjMEkxU2l4SFFVRjBRaXhGUVVFMFFqdEJRVU16UXl4bFFVRkxMRkZCUVV3N1FVRkJaWEJETEd0Q1FVRk5hVTBzWlVGQlRpeERRVUZ6UWpkS0xFZEJRWFJDTEVWQlFUUkNPMEZCU0RkRE8wRkJTMFE3UVVGRFJpeExRVlpFTzBGQlYwUTdPMEZCUlVRN096czdPenM3T3pzN1FVRnJRa0U3T3pzN096czdPenM3TWtKQlZVOTRRaXhOTEVWQlFWRnZSU3hUTEVWQlFWZG5SQ3hYTEVWQlFUWkdPMEZCUVVFc1ZVRkJhRVpyUlN4TFFVRm5SaXgxUlVGQmVFVXNTMEZCZDBVN1FVRkJRU3hWUVVGcVJVTXNSMEZCYVVVc2RVVkJRVE5FTEV0QlFUSkVPMEZCUVVFc1ZVRkJjRVJ1VEN4SlFVRnZSQ3gxUlVGQk4wTXNNRUpCUVRaRE8wRkJRVUVzVlVGQmFrSTNSQ3hSUVVGcFFqdEJRVUZCTEZWQlFWQTBReXhMUVVGUE96czdRVUZGY2tnc1ZVRkJTU3hEUVVGRFlTeE5RVUZNTEVWQlFXRXNUVUZCVFhKRkxFMUJRVTBzT0VSQlFVNHNRMEZCVGp0QlFVTmlMRlZCUVVrc1EwRkJRM2xKTEZOQlFVd3NSVUZCWjBJc1RVRkJUWHBKTEUxQlFVMHNjVVJCUVU0c1EwRkJUanM3UVVGRmFFSTdPMEZCUlVFc1ZVRkJTWGxFTEZGQlFWRXNTVUZCV2p0QlFVTkJMRlZCUVVsdlRTeGpRVUZsTEhOQ1FVRmpMRVZCUVdRc1JVRkJhMEp5VFN4TFFVRnNRaXhEUVVGdVFqczdRVUZGUVhGTkxHdENRVUZaUkN4SFFVRmFMRWRCUVd0Q1FTeEhRVUZzUWp0QlFVTkJReXhyUWtGQldVWXNTMEZCV2l4SFFVRnZRa0VzUzBGQmNFSTdRVUZEUVVVc2EwSkJRVmw0VEN4TlFVRmFMRWRCUVhGQ1FTeE5RVUZ5UWp0QlFVTkJkMHdzYTBKQlFWbHFTQ3hUUVVGYUxFZEJRWGRDU0N4VFFVRjRRanRCUVVORFowUXNhVUpCUVVRc1IwRkJaMEp2UlN4WlFVRlplRXNzU1VGQldpeEhRVUZ0UW05SExGZEJRVzVETEVkQlFXbEViMFVzV1VGQldYaExMRWxCUVZvc1IwRkJiVUlzUlVGQmNFVTdRVUZEUVhkTExHdENRVUZaY0V3c1NVRkJXaXhIUVVGdFFrRXNTVUZCYmtJN1FVRkRRVzlNTEd0Q1FVRlpOVXdzVVVGQldpeEhRVUYxUWxJc1RVRkJUU3RDTEUxQlFUZENPMEZCUTBGeFN5eHJRa0ZCV1d4SUxFMUJRVm9zUjBGQmNVSXNTMEZCY2tJN1FVRkRRU3hWUVVGSmJrWXNTMEZCU2l4RlFVRlhPMEZCUTFSeFRTeHZRa0ZCV1hCR0xFMUJRVm9zUjBGQmNVSnFTQ3hOUVVGTmFVZ3NUVUZCVGl4SFFVRmxha2dzVFVGQlRXbElMRTFCUVhKQ0xFZEJRVGhDTEVsQlFXNUVPMEZCUTBRc1QwRkdSQ3hOUVVWUE8wRkJRVVZ2Uml4dlFrRkJXWEJHTEUxQlFWb3NSMEZCY1VJc1NVRkJja0k3UVVGQk5FSTdPMEZCUlhKRExGVkJRVWszU2l4UlFVRktMRVZCUVcxQ08wRkJRVVZwVUN4dlFrRkJXV3BRTEZGQlFWb3NSMEZCZFVKQkxGRkJRWFpDTzBGQlFXdERPenRCUVVWMlJEczdRVUZGUVVNc1kwRkJVV2RETEVkQlFWSXNRMEZCV1N4elJFRkJXaXhGUVVGdlJXZE9MRmRCUVhCRk96dEJRVVZCTEdGQlFVOXdUU3hOUVVGTmNVMHNUMEZCVGl4RFFVRmpSQ3hYUVVGa0xFTkJRVkE3UVVGRFJEczdRVUZGUkRzN096czdPenM3YjBOQlMyZENSU3hSTEVWQlFWVTdRVUZEZUVJc1ZVRkJTWFJOTEZGQlFWRXNTVUZCV2p0QlFVTkJOVU1zWTBGQlVXZERMRWRCUVZJc1EwRkJXU3h0UkVGQldpeEZRVUZwUld0T0xGRkJRV3BGT3p0QlFVVkJMRFJDUVVGalFTeFJRVUZrTEVWQlFYZENMRVZCUVVOd1NDeFJRVUZSTEVsQlFWUXNSVUZCZUVJN08wRkJSVUVzWVVGQlQyeEdMRTFCUVUxMVRTeGhRVUZPTEVOQlFXOUNSQ3hSUVVGd1FpeERRVUZRTzBGQlEwUTdPMEZCUlVRN096czdPenM3T3pzN096czdPRUpCVlZVeFRDeE5MRVZCUVZFMFRDeE5MRVZCUVRaRU8wRkJRVUVzVlVGQmNrUk9MRXRCUVhGRUxIVkZRVUUzUXl4TFFVRTJRenRCUVVGQkxGVkJRWFJEUXl4SFFVRnpReXgxUlVGQmFFTXNTMEZCWjBNN1FVRkJRU3hWUVVGNlFtNUdMRTFCUVhsQ0xIVkZRVUZvUWl4SlFVRm5RanRCUVVGQkxGVkJRVlkzU2l4UlFVRlZPenRCUVVNM1JTeFZRVUZKTmtNc1VVRkJVU3hKUVVGYU8wRkJRMEVzVlVGQlNYTk5MRmRCUVZjc1JVRkJaanM3UVVGRlFVRXNaVUZCVTBnc1IwRkJWQ3hIUVVGbFFTeEhRVUZtTzBGQlEwRkhMR1ZCUVZOS0xFdEJRVlFzUjBGQmFVSkJMRXRCUVdwQ08wRkJRMEZKTEdWQlFWTXhUQ3hOUVVGVUxFZEJRV3RDUVN4TlFVRnNRanM3UVVGRlFUQk1MR1ZCUVZOc1NTeFJRVUZVTEVkQlFXOUNiMGtzVFVGQmNFSTdRVUZEUVN4VlFVRkpjbEFzVVVGQlNpeEZRVUZ0UWp0QlFVRkZiVkFzYVVKQlFWTnVVQ3hSUVVGVUxFZEJRVzlDUVN4UlFVRndRanRCUVVFclFqczdRVUZGY0VRN1FVRkRRVzFRTEdWQlFWTjBSaXhOUVVGVUxFZEJRV3RDUVN4TlFVRnNRanM3UVVGRlFUVktMR05CUVZGblF5eEhRVUZTTEVOQlFWa3NPRU5CUVZvc1JVRkJORVJyVGl4UlFVRTFSRHM3UVVGRlFTdzBRa0ZCWTBFc1VVRkJaQ3hGUVVGM1FpeEZRVUZEY0Vnc1VVRkJVU3hMUVVGVUxFVkJRWGhDT3p0QlFVVkJMR0ZCUVU5c1JpeE5RVUZOZVUwc1ZVRkJUaXhEUVVGcFFrZ3NVVUZCYWtJc1EwRkJVRHRCUVVORU96dEJRVVZFT3pzN096czdPenR2UTBGTFowSkJMRkVzUlVGQlZUdEJRVU40UWl4VlFVRkpkRTBzVVVGQlVTeEpRVUZhTzBGQlEwRXNWVUZCU1RCTkxGbEJRVmxLTEZsQlFWa3NSVUZCTlVJN08wRkJSVUVzTkVKQlFXTkpMRk5CUVdRc1JVRkJlVUlzUlVGQlEzaElMRkZCUVZFc1NVRkJWQ3hGUVVGNlFqczdRVUZGUVN4aFFVRlBiRVlzVFVGQlRUSk5MR2RDUVVGT0xFTkJRWFZDUkN4VFFVRjJRaXhEUVVGUU8wRkJRMFE3TzBGQlJVUTdPenM3T3pzN08zbENRVXRMUml4TkxFVkJRVkU3UVVGRFdDeFZRVUZKZUUwc1VVRkJVU3hKUVVGYU96dEJRVVZCTzBGQlEwRTdRVUZEUVN4VlFVRkpORTBzVlVGQlZUdEJRVU5hTTFBc1kwRkJUU3hOUVVSTkxFVkJRMFZuU0N4TlFVRk5ha1VzVFVGQlRTdENMRTFCUkdRc1JVRkRjMEp0UXl4SlFVRkpjMGs3UVVGRU1VSXNUMEZCWkRzN1FVRkpRU3hoUVVGUExITkNRVUZaTEZWQlFVTm9SU3hQUVVGRUxFVkJRVlZvUXl4TlFVRldMRVZCUVhGQ08wRkJRM1JEZUVjc1kwRkJUVGhDTEVsQlFVNHNRMEZCVjNWRExGZEJRVmdzUTBGQmRVSjFTU3hQUVVGMlFpeEZRVUZuUXl4VlFVRkRkRWtzUzBGQlJDeEZRVUZYTzBGQlEzcERiRWdzYTBKQlFWRm5ReXhIUVVGU0xFTkJRVmtzYVVKQlFWb3NSVUZCSzBKclJpeExRVUV2UWp0QlFVTkJMR05CUVVsQkxFMUJRVTE0UWl4SlFVRk9MRU5CUVZkRkxFbEJRVmdzUzBGQmIwSXNSMEZCZUVJc1JVRkJOa0k3UVVGRE0wSjNSaXh2UWtGQlVXeEZMRTFCUVUxNFFpeEpRVUZPTEVOQlFWZHlSeXhMUVVGdVFqdEJRVU5FTEZkQlJrUXNUVUZGVHp0QlFVTk1LMG9zYlVKQlFVOXNReXhOUVVGTmVFSXNTVUZCVGl4RFFVRlhORVFzU1VGQmJFSTdRVUZEUkR0QlFVTkdMRk5CVUVRN1FVRlJSQ3hQUVZSTkxFTkJRVkE3UVVGVlJEczdRVUZGUkRzN096czdPenM3YlVOQlMyVm9SU3hSTEVWQlFWVTdRVUZEZGtJc1YwRkJTMjFMTEhOQ1FVRk1MRWRCUVRoQ2Jrc3NVVUZCT1VJN1FVRkRSRHM3T3pSQ1FVVlBNME1zU3l4RlFVRlBPMEZCUTJJc1ZVRkJTVU1zVVVGQlVTeEpRVUZhT3p0QlFVVkJMR0ZCUVU4c2MwSkJRVmtzVlVGQlEzZEpMRTlCUVVRc1JVRkJWV2hETEUxQlFWWXNSVUZCY1VJN08wRkJSWFJETEZsQlFVbHpSeXhuUWtGQmFVSXNjMEpCUVdNc1JVRkJaQ3hGUVVGclFpOU5MRXRCUVd4Q0xFTkJRWEpDT3p0QlFVVkJMRmxCUVVsdFJpeFRRVUZUYmtZc1RVRkJUVzFHTEUxQlFXNUNPMEZCUTBFN1FVRkRRVHM3UVVGRlFUdEJRVU5CT3pzN1FVRkhRVFJJTEhOQ1FVRmplRTBzVDBGQlpDeEhRVUY1UWl4SlFVRkpORWdzU1VGQlNpeEZRVUZFTEVOQlFWZERMRmRCUVZnc1JVRkJlRUk3UVVGRFFUSkZMSE5DUVVGamNFMHNUMEZCWkN4SFFVRjNRbFlzVFVGQlRUUk1MRmRCUVRsQ096dEJRVVZCTEZsQlFVbHRRaXhsUVVGbExITkNRVUZWUkN4aFFVRldMRU5CUVc1Q096dEJRVVZCTEdWQlFVOURMR0ZCUVdGYUxFZEJRWEJDTzBGQlEwRXNaVUZCVDFrc1lVRkJZV0lzUzBGQmNFSTdRVUZEUVN4bFFVRlBZU3hoUVVGaEwwZ3NVMEZCY0VJN1FVRkRRU3hsUVVGUEswZ3NZVUZCWVRWUUxGRkJRWEJDT3p0QlFVVkJPMEZCUTBFc1dVRkJTVzlNTEdGQlFXRTdRVUZEWm5STUxHZENRVUZOTEZGQlJGTXNSVUZEUTJkSUxFMUJRVTFxUlN4TlFVRk5LMElzVFVGRVlpeEZRVU54UW0xRExFbEJRVWxzUlN4TlFVRk5iVVVzVDBGRUwwSTdRVUZGWm5KQ0xHZENRVUZOTEVWQlFVVnZReXhSUVVGUlFTeE5RVUZXTEVWQlFXdENla2tzVDBGQlQzTlJMRmxCUVhwQ08wRkJSbE1zVTBGQmFrSTdPMEZCVFVFN1FVRkRRVHRCUVVOQmVFVXNiVUpCUVZkNlJpeEpRVUZZTEVOQlFXZENiRU1zVFVGQmFFSXNSMEZCZVVKclRTeGpRVUZqYkUwc1RVRkJka003TzBGQlJVRXNXVUZCU1d0TkxHTkJRV05ZTEVkQlFXeENMRVZCUVhWQ05VUXNWMEZCVjNwR0xFbEJRVmdzUTBGQlowSnhTaXhIUVVGb1FpeEhRVUZ6UWxjc1kwRkJZMWdzUjBGQmNFTTdRVUZEZGtJc1dVRkJTVmNzWTBGQlkxb3NTMEZCYkVJc1JVRkJlVUl6UkN4WFFVRlhla1lzU1VGQldDeERRVUZuUW05S0xFdEJRV2hDTEVkQlFYZENXU3hqUVVGaldpeExRVUYwUXp0QlFVTjZRanRCUVVOQkxGbEJRVWxaTEdOQlFXTXpVQ3hSUVVGc1FpeEZRVUUwUW05TUxGZEJRVmQ2Uml4SlFVRllMRU5CUVdkQ00wWXNVVUZCYUVJc1IwRkJNa0l5VUN4alFVRmpNMUFzVVVGQmVrTTdPMEZCUlRWQ1F5eG5Ra0ZCVVdkRExFZEJRVklzUTBGQldTeHhRa0ZCV2l4RlFVRnRRekJPTEdGQlFXNURMRVZCUVd0RWRrVXNWVUZCYkVRN08wRkJSVUU3UVVGRFFYWkpMR05CUVUwNFFpeEpRVUZPTEVOQlFWZDFReXhYUVVGWUxFTkJRWFZDYTBVc1ZVRkJka0lzUlVGQmJVTXNWVUZCUTJwRkxFdEJRVVFzUlVGQlZ6dEJRVU0xUTJ4SUxHdENRVUZSWjBNc1IwRkJVaXhEUVVGWkxIZERRVUZhTEVWQlFYTkVhMFlzUzBGQmRFUTdRVUZEUVN4alFVRkpRU3hOUVVGTmVFSXNTVUZCVGl4RFFVRlhSU3hKUVVGWUxFdEJRVzlDTEVkQlFYaENMRVZCUVRaQ08wRkJRek5DTzBGQlEwRTRTaXd3UWtGQlkzaFJMRWRCUVdRc1IwRkJiMEpuU1N4TlFVRk5lRUlzU1VGQlRpeERRVUZYYzBJc1VVRkJMMEk3TzBGQlJVRXdTU3d3UWtGQlkycElMRTFCUVdRc1IwRkJkVUlzVFVGQmRrSXNRMEZLTWtJc1EwRkpSenRCUVVNNVFtbElMREJDUVVGamJFY3NUMEZCWkN4SFFVRjNRalZITEV0QlFYaENPMEZCUTBFNFRTd3dRa0ZCWXk5R0xGTkJRV1FzUjBGQk1FSjZReXhOUVVGTmVFSXNTVUZCVGl4RFFVRlhhMHNzYVVKQlFYSkRPenRCUVVWQkxHZENRVUZKUXl4VFFVRlRMR2xEUVVGMVFrZ3NZVUZCZGtJc1EwRkJZanM3UVVGRlFUbE5MR3RDUVVGTmNVWXNWVUZCVGl4RFFVRnBRbmxJTEdOQlFXTjRVU3hIUVVFdlFpeEpRVUZ6UXpKUkxFMUJRWFJET3p0QlFVVkJRU3h0UWtGQlQwTXNaVUZCVUN4RFFVRjFRbTVPTEUxQlFVMXZSaXhUUVVFM1FqczdRVUZGUVhGRUxHOUNRVUZSZVVVc1RVRkJVanRCUVVWRUxGZEJhRUpFTEUxQlowSlBPMEZCUTB3N1FVRkRRWHBITEcxQ1FVRlBiRU1zVFVGQlRYaENMRWxCUVU0c1EwRkJWelJFTEVsQlFXeENPMEZCUTBRN1FVRkRSaXhUUVhSQ1JEdEJRWFZDUkN4UFFXaEZUU3hEUVVGUU8wRkJhMFZFT3pzN2EwTkJSV0UwUml4UkxFVkJRVlU3UVVGQlFUczdRVUZEZEVJc1ZVRkJTWFJOTEZGQlFWRXNTVUZCV2pzN1FVRkZRU3hoUVVGUExITkNRVUZaTEZWQlFVTjNTU3hQUVVGRUxFVkJRVlZvUXl4TlFVRldMRVZCUVhGQ08wRkJRM1JETEZsQlFVbDBRaXhUUVVGVGIwZ3NVMEZCVTNCSUxFMUJRWFJDTzBGQlEwRTdPMEZCUlVFN1FVRkRRU3haUVVGSmNVUXNZVUZCWVR0QlFVTm1kRXdzWjBKQlFVMHNVVUZFVXl4RlFVTkRaMGdzVFVGQlRXcEZMRTFCUVUwclFpeE5RVVJpTEVWQlEzRkNiVU1zU1VGQlNXeEZMRTFCUVUxdFJTeFBRVVF2UWp0QlFVVm1ja0lzWjBKQlFVMHNSVUZCUlc5RExGRkJRVkZCTEUxQlFWWTdRVUZHVXl4VFFVRnFRanM3UVVGTFFUbElMR2RDUVVGUlowTXNSMEZCVWl4RFFVRlpMSE5DUVVGYUxFVkJRVzlEYTA0c1VVRkJjRU1zUlVGQk9FTXZSQ3hWUVVFNVF6czdRVUZGUVN4WlFVRkpLMFFzVVVGQlNpeEZRVUZqTzBGQlExb3ZSQ3h4UWtGQlYzcEdMRWxCUVZnc1EwRkJaMEp5Unl4TFFVRm9RaXhIUVVGM1FqWlFMRkZCUVhoQ08wRkJRMEV2UkN4eFFrRkJWM3BHTEVsQlFWZ3NRMEZCWjBKeVJ5eExRVUZvUWl4RFFVRnpRaXRFTEZGQlFYUkNMRWRCUVdsRFVpeE5RVUZOSzBJc1RVRkJka003UVVGRFJEczdRVUZGUkN4WlFVRkpkVXNzVTBGQlUwZ3NSMEZCWWl4RlFVRnJRalZFTEZkQlFWZDZSaXhKUVVGWUxFTkJRV2RDY1Vvc1IwRkJhRUlzUjBGQmMwSkhMRk5CUVZOSUxFZEJRUzlDTzBGQlEyeENMRmxCUVVsSExGTkJRVk5LTEV0QlFXSXNSVUZCYjBJelJDeFhRVUZYZWtZc1NVRkJXQ3hEUVVGblFtOUtMRXRCUVdoQ0xFZEJRWGRDU1N4VFFVRlRTaXhMUVVGcVF6dEJRVU53UWl4WlFVRkpTU3hUUVVGVGRFZ3NVMEZCWWl4RlFVRjNRblZFTEZkQlFWZDZSaXhKUVVGWUxFTkJRV2RDY1VNc1UwRkJhRUlzUjBGQk5FSnRTQ3hUUVVGVGRFZ3NVMEZCY2tNN1FVRkRlRUlzV1VGQlNYTklMRk5CUVZOdVVDeFJRVUZpTEVWQlFYVkNiMHdzVjBGQlYzcEdMRWxCUVZnc1EwRkJaMEl6Uml4UlFVRm9RaXhIUVVFeVFtMVFMRk5CUVZOdVVDeFJRVUZ3UXpzN1FVRkZka0pETEdkQ1FVRlJaME1zUjBGQlVpeERRVUZaTERSRFFVRmFMRVZCUVRCRWJVb3NWVUZCTVVRN08wRkJSVUU3UVVGRFFYWkpMR05CUVUwNFFpeEpRVUZPTEVOQlFWZDFReXhYUVVGWUxFTkJRWFZDYTBVc1ZVRkJka0lzUlVGQmJVTXNWVUZCUTJwRkxFdEJRVVFzUlVGQlZ6dEJRVU0xUTJ4SUxHdENRVUZSWjBNc1IwRkJVaXhEUVVGWkxIRkVRVUZhTEVWQlFXMUZhMFlzUzBGQmJrVTdRVUZEUVN4alFVRkpRU3hOUVVGTmVFSXNTVUZCVGl4RFFVRlhSU3hKUVVGWUxFdEJRVzlDTEVkQlFYaENMRVZCUVRaQ096dEJRVVV6UWl4blFrRkJTVzFMTEd0Q1FVRnJRamRKTEUxQlFVMTRRaXhKUVVGT0xFTkJRVmR5Unl4TFFVRnFRenM3UVVGRlFTeHBRa0ZCU3l4SlFVRkpiME1zUzBGQlZDeEpRVUZyUW5OUExHVkJRV3hDTEVWQlFXMURPenRCUVVWcVF5eHJRa0ZCU1VNc1lVRkJZVVFzWjBKQlFXZENkRThzUzBGQmFFSXNRMEZCYWtJN08wRkJSVUU3TzBGQlJVRTdRVUZEUVR0QlFVTkJkVThzZVVKQlFWZDRUQ3hKUVVGWUxFZEJRV3RDTEhOQ1FVRlZkMHdzVjBGQlYzaE1MRWxCUVhKQ0xFdEJRVGhDTEVWQlFXaEVPMEZCUTBGM1RDeDVRa0ZCVjJwSUxHVkJRVmdzUjBGQk5rSXNjMEpCUVZWcFNDeFhRVUZYYWtnc1pVRkJja0lzUzBGQmVVTXNSVUZCZEVVN1FVRkRRV2xJTEhsQ1FVRlhjRWNzVFVGQldDeEhRVUZ2UWl4TFFVRndRanRCUVVOQmIwY3NlVUpCUVZkRExFOUJRVmdzUjBGQmNVSXNTVUZCY2tJN1FVRkRRVVFzZVVKQlFWZDJTQ3hOUVVGWUxFZEJRVzlDTEUxQlFYQkNMRU5CV21sRExFTkJXVTQ3UVVGRE0wSjFTQ3g1UWtGQlYzaEhMRTlCUVZnc1IwRkJjVUkxUnl4TFFVRnlRanM3UVVGRlFUVkRMSE5DUVVGUlowTXNSMEZCVWl4RFFVRlpMRFpFUVVGYUxFVkJRVEpGWjA4c1ZVRkJNMFU3TzBGQlJVRXNhMEpCUVVsSUxGTkJRVk1zYVVOQlFYVkNSeXhWUVVGMlFpeERRVUZpTzBGQlEwRklMSEZDUVVGUFN5eGxRVUZRTEVOQlFYVkNSaXhYUVVGWGFrZ3NaVUZCYkVNN1FVRkRRVzVITEc5Q1FVRk5jVVlzVlVGQlRpeERRVUZwUWl0SUxGZEJRVmM1VVN4SFFVRTFRaXhKUVVGdFF6SlJMRTFCUVc1RE8wRkJSVVE3TzBGQlJVUjZSU3h2UWtGQlVYaEpMRTFCUVUxeFJpeFZRVUZrTzBGQlEwRXNaMEpCUVVrc1QwRkJTMnRKTEd0Q1FVRlVMRVZCUVRaQ0xFOUJRVXRCTEd0Q1FVRk1MRU5CUVhkQ0xFOUJRVXRzU1N4VlFVRTNRanRCUVVVNVFpeFhRVGxDUkN4TlFUaENUeXhKUVVGSlppeE5RVUZOZUVJc1NVRkJUaXhEUVVGWFJTeEpRVUZZTEV0QlFXOUNMRWRCUVhoQ0xFVkJRVFpDTzBGQlEyeERkMFlzYjBKQlFWRXNSVUZCVWp0QlFVTkVMRmRCUmswc1RVRkZRVHRCUVVOTU8wRkJRMEZvUXl4dFFrRkJUMnhETEUxQlFVMTRRaXhKUVVGT0xFTkJRVmMwUkN4SlFVRnNRanRCUVVORU8wRkJRMFlzVTBGMFEwUTdRVUYxUTBRc1QwRm9SVTBzUTBGQlVEdEJRV2xGUkRzN095dENRVVZWTTBjc1N5eEZRVUZQTzBGQlEyaENMRlZCUVVsRExGRkJRVkVzU1VGQldqczdRVUZGUVN4aFFVRlBMSE5DUVVGWkxGVkJRVU4zU1N4UFFVRkVMRVZCUVZWb1F5eE5RVUZXTEVWQlFYRkNPenRCUVVWMFF6dEJRVU5CTEZsQlFVbG5TQ3hsUVVGbE8wRkJRMnBDZGxFc1owSkJRVTBzVjBGRVZ5eEZRVU5GWjBnc1RVRkJUV3BGTEUxQlFVMHJRaXhOUVVSa0xFVkJRM05DYlVNc1NVRkJTV3hGTEUxQlFVMXRSU3hQUVVSb1F6dEJRVVZxUW5KQ0xHZENRVUZOTzBGQlJsY3NVMEZCYmtJN08wRkJTMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3UVVGRFFTeFpRVUZKTDBNc1MwRkJTaXhGUVVGWE8wRkJRMVFzWTBGQlNVRXNUVUZCVFhOSExHTkJRVTRzUTBGQmNVSXNTMEZCY2tJc1EwRkJTaXhGUVVGcFEyMUlMR0ZCUVdFeFN5eEpRVUZpTEVOQlFXdENjVW9zUjBGQmJFSXNSMEZCZDBKd1RTeE5RVUZOYjAwc1IwRkJPVUk3UVVGRGFrTXNZMEZCU1hCTkxFMUJRVTF6Unl4alFVRk9MRU5CUVhGQ0xFOUJRWEpDTEVOQlFVb3NSVUZCYlVOdFNDeGhRVUZoTVVzc1NVRkJZaXhEUVVGclFtOUtMRXRCUVd4Q0xFZEJRVEJDYmswc1RVRkJUVzFOTEV0QlFXaERPMEZCUTI1RExHTkJRVWx1VFN4TlFVRk5jMGNzWTBGQlRpeERRVUZ4UWl4UlFVRnlRaXhEUVVGS0xFVkJRVzlEYlVnc1lVRkJZVEZMTEVsQlFXSXNRMEZCYTBKc1F5eE5RVUZzUWl4SFFVRXlRbUlzVFVGQlRXRXNUVUZCYWtNN1FVRkRjRU1zWTBGQlNXSXNUVUZCVFhOSExHTkJRVTRzUTBGQmNVSXNWVUZCY2tJc1EwRkJTaXhGUVVGelEyMUlMR0ZCUVdFeFN5eEpRVUZpTEVOQlFXdENNMFlzVVVGQmJFSXNSMEZCTmtJMFF5eE5RVUZOTlVNc1VVRkJia003UVVGRGRFTXNZMEZCU1RSRExFMUJRVTF6Unl4alFVRk9MRU5CUVhGQ0xGVkJRWEpDTEVOQlFVb3NSVUZCYzBOdFNDeGhRVUZoTVVzc1NVRkJZaXhEUVVGclFuTkNMRkZCUVd4Q0xFZEJRVFpDY2tVc1RVRkJUWEZGTEZGQlFXNURPMEZCUTNaRE96dEJRVVZFYjBvc2NVSkJRV0V4U3l4SlFVRmlMRU5CUVd0Q2IwTXNUVUZCYkVJc1IwRkJNa0p1Uml4TlFVRk5iVVlzVFVGQmFrTTdPMEZCUlVFN1FVRkRRVHRCUVVOQkxGbEJRVWx1Uml4TlFVRk5jMGNzWTBGQlRpeERRVUZ4UWl4UlFVRnlRaXhEUVVGS0xFVkJRVzlEYlVnc1lVRkJZVEZMTEVsQlFXSXNRMEZCYTBKM1JDeHZRa0ZCYkVJc1IwRkJlVU4yUnl4TlFVRk5hVWdzVFVGQkwwTTdPMEZCUlhCRE5Vb3NaMEpCUVZGblF5eEhRVUZTTEVOQlFWa3NNa05CUVZvc1JVRkJlVVJYTEV0QlFYcEVMRVZCUVdkRmVVNHNXVUZCYUVVN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRjRUaXhqUVVGTk9FSXNTVUZCVGl4RFFVRlhkVU1zVjBGQldDeERRVUYxUW0xS0xGbEJRWFpDTEVWQlFYRkRMRlZCUVVOc1NpeExRVUZFTEVWQlFWYzdRVUZET1VOc1NDeHJRa0ZCVVdkRExFZEJRVklzUTBGQldTeHJRMEZCV2l4RlFVRm5SR3RHTEV0QlFXaEVPenRCUVVWQk8wRkJRMEVzWTBGQlNXdEpMRk5CUVZOc1NTeE5RVUZOZUVJc1NVRkJUaXhEUVVGWGMwSXNVVUZCZUVJN08wRkJSVUVzWTBGQlNYRktMR2xDUVVGcFFucE9MRTFCUVUwMlRDeGhRVUZPTEVOQlFXOUNWeXhOUVVGd1FpeERRVUZ5UWp0QlFVTkJMR2xDUVVGUGVFMHNUVUZCVFRaTUxHRkJRVTRzUTBGQmIwSlhMRTFCUVhCQ0xFTkJRVkE3UVVGRFFTeGpRVUZKYVVJc1kwRkJTaXhGUVVGdlFrRXNaVUZCWldoTUxHbENRVUZtT3p0QlFVVndRaXhqUVVGSk5rSXNUVUZCVFhoQ0xFbEJRVTRzUTBGQlYwVXNTVUZCV0N4SFFVRnJRaXhIUVVGMFFpeEZRVUV5UWp0QlFVTjZRalZHTEc5Q1FVRlJaME1zUjBGQlVpeERRVUZaTEcxRFFVRmFMRVZCUVdsRWEwWXNUVUZCVFhoQ0xFbEJRVTRzUTBGQlYydExMR2xDUVVFMVJDeEZRVUVyUlZJc1RVRkJMMFU3UVVGRFFXbENMRFpDUVVGcFFpdzRRa0ZCYjBKNlRpeE5RVUZOSzBJc1RVRkJNVUlzUlVGQmEwTjVTeXhOUVVGc1F5eEZRVUV3UTNoTkxFMUJRVTA0UWl4SlFVRm9SQ3hGUVVGelJIZERMRTFCUVUxNFFpeEpRVUZPTEVOQlFWZHJTeXhwUWtGQmFrVXNRMEZCYWtJN1FVRkRRV2hPTEd0Q1FVRk5Oa3dzWVVGQlRpeERRVUZ2UWxjc1RVRkJjRUlzU1VGQk9FSnBRaXhqUVVFNVFqdEJRVU5FTEZkQlNrUXNUVUZKVHl4SlFVRkpia29zVFVGQlRYaENMRWxCUVU0c1EwRkJWMFVzU1VGQldDeExRVUZ2UWl4SFFVRjRRaXhGUVVFMlFqdEJRVU5zUXpWR0xHOUNRVUZSWjBNc1IwRkJVaXhEUVVGWkxIZERRVUZhTEVWQlFYTkVhMFlzUzBGQmRFUXNSVUZCTmtSMFJTeE5RVUZOTmt3c1lVRkJia1U3TzBGQlJVRTdPenM3UVVGSlFTeG5Ra0ZCU1RaQ0xHZENRVUZuUW5CS0xFMUJRVTE0UWl4SlFVRk9MRU5CUVZkeVJ5eExRVUV2UWpzN1FVRkZRV2xTTERCQ1FVRmpPVWNzVDBGQlpDeEhRVUYzUWpWSExFdEJRWGhDTzBGQlEwRTdRVUZEUVRCT0xEQkNRVUZqZGtJc1IwRkJaQ3hIUVVGdlFuQk5MRTFCUVUxdlRTeEhRVUV4UWp0QlFVTkJkVUlzTUVKQlFXTjRRaXhMUVVGa0xFZEJRWE5DYmswc1RVRkJUVzFOTEV0QlFUVkNPMEZCUTBGM1Fpd3dRa0ZCWTNaUkxGRkJRV1FzUjBGQmVVSTBReXhOUVVGTk5VTXNVVUZCTDBJN1FVRkRRWFZSTERCQ1FVRmplRWtzVFVGQlpDeEhRVUYxUW01R0xFMUJRVTF0Uml4TlFVRTNRanM3UVVGRlFUdEJRVU5CZDBrc01FSkJRV014Unl4TlFVRmtMRWRCUVhWQ2FrZ3NUVUZCVFdsSUxFMUJRVGRDTzBGQlEwRXdSeXd3UWtGQll6VkdMRkZCUVdRc1IwRkJlVUl5Uml4bFFVRmxNMFlzVVVGQmVFTTdPMEZCUlVFN1FVRkRRU3huUWtGQlNXMUdMRk5CUVZNc2FVTkJRWFZDVXl4aFFVRjJRaXhEUVVGaU8wRkJRMEV4VGl4clFrRkJUU3RFTEZWQlFVNHNRMEZCYVVKNVNTeE5RVUZxUWl4SlFVRXlRbE1zVFVGQk0wSTdPMEZCUlVGNlJTeHZRa0ZCVVhsRkxFMUJRVkk3UVVGRFFWRXNNa0pCUVdWNFJDeExRVUZtTEVOQlFYRkNaMFFzVFVGQmNrSTdRVUZEUkN4WFFURkNUU3hOUVRCQ1FUdEJRVU5NZWtjc2JVSkJRVTlzUXl4TlFVRk5lRUlzU1VGQlRpeERRVUZYTkVRc1NVRkJiRUk3UVVGRFJEdEJRVU5HTEZOQk0wTkVPMEZCTkVORUxFOUJMMFZOTEVOQlFWQTdRVUZuUmtRN096dHhRMEZGWjBJMFJpeFJMRVZCUVZVN1FVRkJRVHM3UVVGRGVrSXNWVUZCU1hSTkxGRkJRVkVzU1VGQldqczdRVUZGUVN4aFFVRlBMSE5DUVVGWkxGVkJRVU4zU1N4UFFVRkVMRVZCUVZWb1F5eE5RVUZXTEVWQlFYRkNPenRCUVVWMFF6dEJRVU5CTEZsQlFVbG5TQ3hsUVVGbE8wRkJRMnBDZGxFc1owSkJRVTBzVjBGRVZ5eEZRVU5GWjBnc1RVRkJUV3BGTEUxQlFVMHJRaXhOUVVSa0xFVkJRM05DYlVNc1NVRkJTV3hGTEUxQlFVMXRSU3hQUVVSb1F6dEJRVVZxUW5KQ0xHZENRVUZOTzBGQlJsY3NVMEZCYmtJN08wRkJTMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPenRCUVVWQk8wRkJRMEU3UVVGRFFTeFpRVUZKZDBvc1VVRkJTaXhGUVVGak8wRkJRMW9zWTBGQlNVRXNVMEZCVTJwSExHTkJRVlFzUTBGQmQwSXNTMEZCZUVJc1EwRkJTaXhGUVVGdlEyMUlMR0ZCUVdFeFN5eEpRVUZpTEVOQlFXdENjVW9zUjBGQmJFSXNSMEZCZDBKSExGTkJRVk5JTEVkQlFXcERPMEZCUTNCRExHTkJRVWxITEZOQlFWTnFSeXhqUVVGVUxFTkJRWGRDTEU5QlFYaENMRU5CUVVvc1JVRkJjME50U0N4aFFVRmhNVXNzU1VGQllpeERRVUZyUW05S0xFdEJRV3hDTEVkQlFUQkNTU3hUUVVGVFNpeExRVUZ1UXp0QlFVTjBReXhqUVVGSlNTeFRRVUZUYWtjc1kwRkJWQ3hEUVVGM1FpeFJRVUY0UWl4RFFVRktMRVZCUVhWRGJVZ3NZVUZCWVRGTExFbEJRV0lzUTBGQmEwSnNReXhOUVVGc1FpeEhRVUV5UWpCTUxGTkJRVk14VEN4TlFVRndRenRCUVVOMlF5eGpRVUZKTUV3c1UwRkJVMnBITEdOQlFWUXNRMEZCZDBJc1ZVRkJlRUlzUTBGQlNpeEZRVUY1UTIxSUxHRkJRV0V4U3l4SlFVRmlMRU5CUVd0Q00wWXNVVUZCYkVJc1IwRkJOa0p0VUN4VFFVRlRibEFzVVVGQmRFTTdRVUZEZWtNc1kwRkJTVzFRTEZOQlFWTnFSeXhqUVVGVUxFTkJRWGRDTEZWQlFYaENMRU5CUVVvc1JVRkJlVU50U0N4aFFVRmhNVXNzU1VGQllpeERRVUZyUW5OQ0xGRkJRV3hDTEVkQlFUWkNhMGtzVTBGQlUyaFJMRWRCUVhSRE8wRkJRekZET3p0QlFVVkVhMUlzY1VKQlFXRXhTeXhKUVVGaUxFTkJRV3RDYjBNc1RVRkJiRUlzUjBGQk1rSnZTQ3hUUVVGVGNFZ3NUVUZCY0VNN08wRkJSVUU3UVVGRFFTeFpRVUZKYjBJc2RVSkJRWFZDWjBjc1UwRkJVM1JHTEUxQlFYQkRPMEZCUTBFc1dVRkJTWE5HTEZOQlFWTnFSeXhqUVVGVUxFTkJRWGRDTEZGQlFYaENMRU5CUVVvc1JVRkJkVU50U0N4aFFVRmhNVXNzU1VGQllpeERRVUZyUW5kRUxHOUNRVUZzUWl4SFFVRjVRMEVzYjBKQlFYcERPenRCUVVWMlEyeEtMR2RDUVVGUlowTXNSMEZCVWl4RFFVRlpMR2xEUVVGYUxFVkJRU3REYTA0c1VVRkJMME1zUlVGQmVVUnJRaXhaUVVGNlJEczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRWGhPTEdOQlFVMDRRaXhKUVVGT0xFTkJRVmQxUXl4WFFVRllMRU5CUVhWQ2JVb3NXVUZCZGtJc1JVRkJjVU1zVlVGQlEyeEtMRXRCUVVRc1JVRkJWenRCUVVNNVEyeElMR3RDUVVGUlowTXNSMEZCVWl4RFFVRlpMREJEUVVGYUxFVkJRWGRFYTBZc1MwRkJlRVE3TzBGQlJVRXNZMEZCU1d0SkxGTkJRVk5zU1N4TlFVRk5lRUlzU1VGQlRpeERRVUZYYzBJc1VVRkJlRUk3TzBGQlJVRXNZMEZCU1hGS0xHbENRVUZwUW5wT0xFMUJRVTAyVEN4aFFVRk9MRU5CUVc5Q1Z5eE5RVUZ3UWl4RFFVRnlRanRCUVVOQkxHbENRVUZQZUUwc1RVRkJUVFpNTEdGQlFVNHNRMEZCYjBKWExFMUJRWEJDTEVOQlFWQTdRVUZEUVN4alFVRkphVUlzWTBGQlNpeEZRVUZ2UWtFc1pVRkJaV2hNTEdsQ1FVRm1PenRCUVVWd1FpeGpRVUZKTmtJc1RVRkJUWGhDTEVsQlFVNHNRMEZCVjBVc1NVRkJXQ3hIUVVGclFpeEhRVUYwUWl4RlFVRXlRanRCUVVGRk96dEJRVVV6UWpWR0xHOUNRVUZSWjBNc1IwRkJVaXhEUVVGWkxEQkRRVUZhTEVWQlFYZEVhMFlzUzBGQmVFUXNSVUZCSzBSclNTeE5RVUV2UkR0QlFVTkJhVUlzTmtKQlFXbENMRGhDUVVGdlFucE9MRTFCUVUwclFpeE5RVUV4UWl4RlFVRnJRM2xMTEUxQlFXeERMRVZCUVRCRGVFMHNUVUZCVFRoQ0xFbEJRV2hFTEVWQlFYTkVkME1zVFVGQlRYaENMRWxCUVU0c1EwRkJWMnRMTEdsQ1FVRnFSU3hEUVVGcVFqdEJRVU5CYUU0c2EwSkJRVTAyVEN4aFFVRk9MRU5CUVc5Q1Z5eE5RVUZ3UWl4SlFVRTRRbWxDTEdOQlFUbENPMEZCUlVRc1YwRk9SQ3hOUVUxUExFbEJRVWx1U2l4TlFVRk5lRUlzU1VGQlRpeERRVUZYUlN4SlFVRllMRXRCUVc5Q0xFZEJRWGhDTEVWQlFUWkNPenRCUVVWc1F5eG5Ra0ZCU1RKTExHdENRVUZyUW5KS0xFMUJRVTE0UWl4SlFVRk9MRU5CUVZkeVJ5eExRVUZxUXpzN1FVRkZRU3hwUWtGQlN5eEpRVUZKYjBNc1MwRkJWQ3hKUVVGclFqaFBMR1ZCUVd4Q0xFVkJRVzFET3p0QlFVVnFReXhyUWtGQlNWQXNZVUZCWVU4c1owSkJRV2RDT1U4c1MwRkJhRUlzUTBGQmFrSTdRVUZEUVhwQ0xITkNRVUZSWjBNc1IwRkJVaXhEUVVGWkxITkRRVUZhTEVWQlFXOUVhMFlzUzBGQmNFUXNSVUZCTWtRNFNTeFZRVUV6UkN4RlFVRjFSWEJPTEUxQlFVMDJUQ3hoUVVFM1JUczdRVUZGUVhWQ0xIbENRVUZYYWtnc1pVRkJXQ3hIUVVFMlFpeHpRa0ZCVldsSUxGZEJRVmRxU0N4bFFVRnlRaXhMUVVGNVF5eEZRVUYwUlR0QlFVTkJhVWdzZVVKQlFWZDRUQ3hKUVVGWUxFZEJRV3RDTEhOQ1FVRlZkMHdzVjBGQlYzaE1MRWxCUVhKQ0xFdEJRVGhDTEVWQlFXaEVPMEZCUTBGM1RDeDVRa0ZCVjBNc1QwRkJXQ3hIUVVGeFFpeEpRVUZ5UWp0QlFVTkJSQ3g1UWtGQlYzaEhMRTlCUVZnc1IwRkJjVUkxUnl4TFFVRnlRanM3UVVGRlFUdEJRVU5CTlVNc2MwSkJRVkZuUXl4SFFVRlNMRU5CUVZrc2MwUkJRVm9zUlVGQmIwVm5UeXhWUVVGd1JUdEJRVU5CTEd0Q1FVRkpTQ3hUUVVGVExHbERRVUYxUWtjc1ZVRkJka0lzUTBGQllqdEJRVU5CU0N4eFFrRkJUMHNzWlVGQlVDeERRVUYxUWtZc1YwRkJWMnBJTEdWQlFXeERPenRCUVVWQmJrY3NiMEpCUVUwclJDeFZRVUZPTEVOQlFXbENlVWtzVFVGQmFrSXNTVUZCTWtKVExFMUJRVE5DT3p0QlFVVkJMR3RDUVVGSmFrNHNUVUZCVFRaTUxHRkJRVTRzUTBGQmIwSlhMRTFCUVhCQ0xFTkJRVW9zUlVGQmFVTTdRVUZCUlhoTkxITkNRVUZOTmt3c1lVRkJUaXhEUVVGdlFsY3NUVUZCY0VJc1JVRkJORUoyUXl4TFFVRTFRaXhEUVVGclEyZEVMRTFCUVd4RE8wRkJRVFJETzBGQlEyaEdPenRCUVVWRWVrVXNiMEpCUVZGNFNTeE5RVUZOSzBRc1ZVRkJaRHM3UVVGRlFTeG5Ra0ZCU1N4UFFVRkxOa29zYTBKQlFWUXNSVUZCTmtJc1QwRkJTMEVzYTBKQlFVd3NRMEZCZDBJMVRpeE5RVUZOSzBRc1ZVRkJPVUk3UVVGRk9VSXNWMEUxUWswc1RVRTBRa0VzU1VGQlNVOHNUVUZCVFhoQ0xFbEJRVTRzUTBGQlYwVXNTVUZCV0N4TFFVRnZRaXhIUVVGNFFpeEZRVUUyUWp0QlFVTnNRM2RHTEc5Q1FVRlJMRVZCUVZJN1FVRkRSQ3hYUVVaTkxFMUJSVUU3UVVGRFRHaERMRzFDUVVGUGJFTXNUVUZCVFhoQ0xFbEJRVTRzUTBGQlZ6UkVMRWxCUVd4Q08wRkJRMFE3UVVGRFJpeFRRV2hFUkR0QlFXbEVSQ3hQUVhCR1RTeERRVUZRTzBGQmMwWkVPenRCUVVWRU96czdPeXRDUVVOWGRFVXNSeXhGUVVGTE8wRkJRMlFzVlVGQlNYQkRMRkZCUVZFc1NVRkJXanM3UVVGRlFTeFZRVUZKVVN4WFFVRlhVaXhOUVVGTmNVWXNWVUZCVGl4RFFVRnBRbXBFTEVsQlFVbFZMRWxCUVVvc1EwRkJVMjlDTEVWQlFURkNMRU5CUVdZN1FVRkRRVEZFTEdWQlFWTjFUQ3hWUVVGVUxFTkJRVzlDTTBvc1IwRkJjRUk3UVVGRFJEczdRVUZGUkRzN096dHZRMEZEWjBKQkxFY3NSVUZCU3p0QlFVTnVRaXhWUVVGSmNFTXNVVUZCVVN4SlFVRmFPenRCUVVWRU8wRkJRME1zVlVGQlNXOUZMRmRCUVZkb1F5eEpRVUZKTmtJc1NVRkJTaXhEUVVGVGRrVXNTMEZCVkN4RFFVRmxMRU5CUVdZc1JVRkJhMElzUTBGQlF5eEZRVUZ1UWl4RFFVRm1PenRCUVVWQkxGVkJRVWxyUkN4UlFVRlJPMEZCUTFZelJpeGpRVUZOYlVZc1NVRkJTVzVHTEVsQlJFRTdRVUZGVm1kSUxHTkJRVTAzUWl4SlFVRkpWU3hKUVVGS0xFTkJRVk5ETEUxQlJrdzdRVUZIVm5wSExHRkJRVXM0U0N4UlFVaExPMEZCU1ZaNFJDeG5Ra0ZCVVhkQ0xFbEJRVWxWTEVsQlFVb3NRMEZCVTJ4RExFMUJTbEE3UVVGTFZtNUZMR1ZCUVU4eVJpeEpRVUZKVlN4SlFVRktMRU5CUVZOeVJ5eExRVXhPTzBGQlRWWlZMR3RDUVVGVmFVWXNTVUZCU1ZVc1NVRkJTaXhEUVVGVE0wWXNVVUZPVkRzN1FVRlJWakJSTEdGQlFVc3NZVUZCUXpWUkxFbEJRVVFzUlVGQlZUdEJRVU5pTEdOQlFVazJVU3hSUVVGUkxFZEJRVm83UVVGRFFTeGpRVUZKTjFFc1NVRkJTaXhGUVVGVk8wRkJRMUkyVVN4dlFrRkJVVGRSTEVsQlFWSTdRVUZEUkRzN1FVRkZSanRCUVVOREswTXNaMEpCUVUwNFFpeEpRVUZPTEVOQlFWZDFReXhYUVVGWUxFTkJRWFZDTzBGQlEzSkNhRU1zWjBKQlFVbEVMRWxCUVVsRExFVkJSR0VzUlVGRFZIQkdMRTFCUVUwc1ZVRkVSeXhGUVVOVFowZ3NUVUZCVFRkQ0xFbEJRVWs0UWl4RlFVUnVRaXhGUVVOMVFrRXNTVUZCU1RsQ0xFbEJRVWsyUWl4SlFVUXZRanRCUVVWeVFtNUNMR3RDUVVGTkxFVkJRVVZGTEUxQlFVMDRTeXhMUVVGU08wRkJSbVVzVjBGQmRrSTdRVUZKUkR0QlFXNUNVeXhQUVVGYU96dEJRWE5DUVN4VlFVRkpPVTRzVFVGQlRUWk5MSE5DUVVGV0xFVkJRV3RETzBGQlEyaERlbEFzWjBKQlFWRXdUeXhKUVVGU0xFTkJRV0VzWjBOQlFXSXNSVUZCSzBOc1NpeExRVUV2UXp0QlFVTkJOVU1zWTBGQlRUWk5MSE5DUVVGT0xFTkJRVFpDYWtzc1MwRkJOMEk3UVVGRFJEdEJRVU5HT3p0QlFVVkVPenM3TzI5RFFVTm5RbElzUnl4RlFVRkxPMEZCUTI1Q0xGVkJRVWx3UXl4UlFVRlJMRWxCUVZvN08wRkJSVVE3UVVGRFF5eFZRVUZKYjBVc1YwRkJWMmhETEVsQlFVbFZMRWxCUVVvc1EwRkJVM05DTEZGQlFYaENPenRCUVVWQkxGVkJRVWwwUnl4VFFVRlRhME1zVFVGQlRTdEVMRlZCUVU0c1EwRkJhVUpMTEZGQlFXcENMRU5CUVdJN1FVRkRRU3hWUVVGSmRFY3NUVUZCU2l4RlFVRlpPMEZCUTFZc1dVRkJTVGhGTEZGQlFWRTdRVUZEVmpOR0xHZENRVUZOYlVZc1NVRkJTVzVHTEVsQlJFRTdRVUZGVmxnc1pVRkJTemhJTEZGQlJrczdRVUZIVm1wSUxHOUNRVUZWYVVZc1NVRkJTVlVzU1VGQlNpeERRVUZUTTBZc1VVRklWRHM3UVVGTFZqQlJMR1ZCUVVzc1lVRkJRelZSTEVsQlFVUXNSVUZCVlR0QlFVTmlMR2RDUVVGSk5sRXNVVUZCVVN4SFFVRmFPMEZCUTBFc1owSkJRVWszVVN4SlFVRktMRVZCUVZVN1FVRkRValpSTEhOQ1FVRlJOMUVzU1VGQlVqdEJRVU5FT3p0QlFVVkdPMEZCUTBNc1owSkJRVWsyVVN4VlFVRlZMRWRCUVdRc1JVRkJiVUk3UVVGRGFrSm9VU3h4UWtGQlQybFJMRTFCUVZBN1FVRkRSRHM3UVVGRlJEdEJRVU5CTDA0c2EwSkJRVTA0UWl4SlFVRk9MRU5CUVZkMVF5eFhRVUZZTEVOQlFYVkNPMEZCUTNKQ2FFTXNhMEpCUVVsRUxFbEJRVWxETEVWQlJHRXNSVUZEVkhCR0xFMUJRVTBzVlVGRVJ5eEZRVU5UWjBnc1RVRkJUVGRDTEVsQlFVazRRaXhGUVVSdVFpeEZRVU4xUWtFc1NVRkJTVGxDTEVsQlFVazJRaXhKUVVRdlFqdEJRVVZ5UW01Q0xHOUNRVUZOTEVWQlFVVkZMRTFCUVUwNFN5eExRVUZTTEVWQlFXVXZTeXhSUVVGUkwwTXNUVUZCVFN0Q0xFMUJRVGRDTzBGQlJtVXNZVUZCZGtJN1FVRkpSRHRCUVhKQ1V5eFRRVUZhT3p0QlFYZENRU3haUVVGSkwwSXNUVUZCVFRaTkxITkNRVUZXTEVWQlFXdERPMEZCUTJoRGVsQXNhMEpCUVZGblF5eEhRVUZTTEVOQlFWa3NjMEpCUVZvc1JVRkJiME4zUkN4TFFVRndRenRCUVVOQk5VTXNaMEpCUVUwMlRTeHpRa0ZCVGl4RFFVRTJRbXBMTEV0QlFUZENPMEZCUTBRN1FVRkRSaXhQUVRkQ1JDeE5RVFpDVHp0QlFVTk1OVU1zWTBGQlRUaENMRWxCUVU0c1EwRkJWM1ZETEZkQlFWZ3NRMEZCZFVJN1FVRkRja0pvUXl4alFVRkpSQ3hKUVVGSlF5eEZRVVJoTEVWQlExUndSaXhOUVVGTkxGVkJSRWNzUlVGRFUyZElMRTFCUVUwM1FpeEpRVUZKT0VJc1JVRkVia0lzUlVGRGRVSkJMRWxCUVVrNVFpeEpRVUZKTmtJc1NVRkVMMEk3UVVGRmNrSnVRaXhuUWtGQlRTeEZRVUZGUlN4TlFVRk5MRWRCUVZJc1JVRkJZVVFzVVVGQlVTOURMRTFCUVUwclFpeE5RVUV6UWp0QlFVWmxMRk5CUVhaQ08wRkJTVVE3UVVGRFJqczdRVUZGUkRzN096czdPenM3YzBOQlMydENWeXhSTEVWQlFWVTdRVUZETVVJc1YwRkJTelpMTEd0Q1FVRk1MRWRCUVRCQ04wc3NVVUZCTVVJN1FVRkRSRHM3UVVGRlJEczdPenM3T3pzN2MwTkJTMnRDUVN4UkxFVkJRVlU3UVVGRE1VSXNWMEZCUzJ0TUxHdENRVUZNTEVkQlFUQkNiRXdzVVVGQk1VSTdRVUZEUkRzN08zZENRVEZxUWxjN1FVRkJSU3hoUVVGUExFdEJRVXRZTEUxQlFWbzdRVUZCY1VJN08wRkJSVzVET3pzN096czdPM2RDUVVsblFqdEJRVUZGTEdGQlFVOHNTMEZCUzNORUxGVkJRVm83UVVGQmVVSTdPMEZCUlRORE96czdPenM3TzNkQ1FVbG5RanRCUVVGRkxHRkJRVThzUzBGQlMzUkNMRlZCUVZvN1FVRkJlVUk3T3pzN08ydENRV3RxUWpsQ2QwZ3NUenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN1FVTnVjRUptT3pzN08wRkJRMEU3T3pzN1FVRkRRVHM3T3pzN08xRkJSVkZCTEU4N1VVRkJVelZITEd0Q08xRkJRVzlDY0VJc2EwSTdPenM3T3pzN096czdPenM3T3pzN096czdPenM3T3pzN096czdRVU5LY2tNN096czdPenM3T3pzN096czdPenM3T3pzN096czdPMEZCZFVKQk96czdPenM3T3pzN096dEpRVmROZVVzc1pUdEJRVU5LT3pzN096czdRVUZQUVN3eVFrRkJXWGhETEV0QlFWb3NSVUZCYlVKc1VDeEhRVUZ1UWl4RlFVRjNRbTFRTEVkQlFYaENMRVZCUVRaQ00wUXNVVUZCTjBJc1JVRkJkVU03UVVGQlFUczdRVUZEY2tNc1VVRkJTVGxJTEZGQlFWRXNTVUZCV2pzN1FVRkZRVUVzVlVGQlRTdENMRTFCUVU0c1IwRkJaWGxLTEV0QlFXWTdRVUZEUVhoTUxGVkJRVTFMTEVsQlFVNHNSMEZCWVM5RUxFZEJRV0k3UVVGRFFUQkVMRlZCUVUwNFFpeEpRVUZPTEVkQlFXRXlTaXhIUVVGaU8wRkJRMEY2VEN4VlFVRk5hVThzVTBGQlRpeEhRVUZyUW01SExGRkJRV3hDT3p0QlFVVkJPVWdzVlVGQlRXdFBMRkZCUVU0c1IwRkJhVUlzUlVGQmFrSTdRVUZEUVd4UExGVkJRVTFuUXl4clFrRkJUanRCUVVORU96czdPM2xEUVVWdlFqdEJRVU51UWl4VlFVRkphRU1zVVVGQlVTeEpRVUZhT3p0QlFVVkJRU3haUVVGTmEwTXNVMEZCVGl4SFFVRnJRbXhETEUxQlFVMDRRaXhKUVVGT0xFTkJRVmRMTEZkQlFWZ3NRMEZCZFVKdVF5eE5RVUZOU3l4SlFVRTNRaXhGUVVGdFF5eFZRVUZESzBJc1IwRkJSQ3hGUVVGVE8wRkJRelZFYUVZc1owSkJRVkZuUXl4SFFVRlNMRU5CUVZrc2NVSkJRWEZDV1N4TlFVRk5TeXhKUVVFelFpeEhRVUZyUXl4UlFVRTVReXhGUVVGM1JDdENMRWRCUVhoRU8wRkJRMEZ3UXl4alFVRk5hMDhzVVVGQlRpeERRVUZsYWxBc1NVRkJaaXhEUVVGdlFtMUVMRWRCUVhCQ08wRkJRMFFzVDBGSWFVSXNRMEZCYkVJN08wRkJTMEU3T3pzN096czdPenM3T3pzN096dEJRV2RDUkRzN08zZERRVVZ0UWp0QlFVTnNRaXhWUVVGSmNFTXNVVUZCVVN4SlFVRmFPenRCUVVWQlFTeFpRVUZOYTBNc1UwRkJUaXhEUVVGblFrMHNUVUZCYUVJN08wRkJSVUU3T3p0QlFVZEVPenM3TUVKQlNVc3lUQ3hSTEVWQlFWVTdRVUZEWkN4VlFVRkpiazhzVVVGQlVTeEpRVUZhTzBGQlEwRkJMRmxCUVUxclR5eFJRVUZPTEVOQlFXVnVVQ3hQUVVGbUxFTkJRWFZDTEZWQlFVTTBUQ3hOUVVGRUxFVkJRVms3UVVGRGFrTjNSQ3hwUWtGQlUzUkxMR0ZCUVZRc1EwRkJkVUp6U3l4VFFVRlRkRTBzVVVGQmFFTXNSVUZCTUVNNFNTeE5RVUV4UXp0QlFVTkVMRTlCUmtRN1FVRkhSRHM3TzNkQ1FWQmpPMEZCUVVVc1lVRkJUeXhMUVVGTGMwUXNVMEZCV2p0QlFVRjNRanM3T3pzN2EwSkJWVFZDUkN4bE96czdPenM3T3pzN08wRkRjRWRtTEd0Q1FVRnJRaXg1UkRzN096czdPenM3T3p0QlEwRnNRanRCUVVOQkxITkVPenM3T3pzN08wRkRSRUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4Rk96czdPenM3TzBGRFNrRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUczdRVUZGUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTEd0RFFVRnJReXhWUVVGVkxFVkJRVVU3UVVGRE9VTXNiVUpCUVcxQ0xITkRRVUZ6UXp0QlFVTjZSQ3hEUVVGRExHOURRVUZ2UXp0QlFVTnlRenRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFTeEhRVUZITzBGQlEwZ3NRMEZCUXl4WE96czdPenM3T3p0QlEyaERSRHRCUVVOQk96dEJRVVZCTERCRFFVRXdReXhwUTBGQmIwTXNSVHM3T3pzN096dEJRMGc1UlR0QlFVTkJPMEZCUTBFN08wRkJSVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVN4RFFVRkRMRVVpTENKbWFXeGxJam9pVTNsdVkyaGxjaTVxY3lJc0luTnZkWEpqWlhORGIyNTBaVzUwSWpwYklpaG1kVzVqZEdsdmJpQjNaV0p3WVdOclZXNXBkbVZ5YzJGc1RXOWtkV3hsUkdWbWFXNXBkR2x2YmloeWIyOTBMQ0JtWVdOMGIzSjVLU0I3WEc1Y2RHbG1LSFI1Y0dWdlppQmxlSEJ2Y25SeklEMDlQU0FuYjJKcVpXTjBKeUFtSmlCMGVYQmxiMllnYlc5a2RXeGxJRDA5UFNBbmIySnFaV04wSnlsY2JseDBYSFJ0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1poWTNSdmNua29LVHRjYmx4MFpXeHpaU0JwWmloMGVYQmxiMllnWkdWbWFXNWxJRDA5UFNBblpuVnVZM1JwYjI0bklDWW1JR1JsWm1sdVpTNWhiV1FwWEc1Y2RGeDBaR1ZtYVc1bEtGd2lVM2x1WTJobGNsd2lMQ0JiWFN3Z1ptRmpkRzl5ZVNrN1hHNWNkR1ZzYzJVZ2FXWW9kSGx3Wlc5bUlHVjRjRzl5ZEhNZ1BUMDlJQ2R2WW1wbFkzUW5LVnh1WEhSY2RHVjRjRzl5ZEhOYlhDSlRlVzVqYUdWeVhDSmRJRDBnWm1GamRHOXllU2dwTzF4dVhIUmxiSE5sWEc1Y2RGeDBjbTl2ZEZ0Y0lsd2lYU0E5SUhKdmIzUmJYQ0pjSWwwZ2ZId2dlMzBzSUhKdmIzUmJYQ0pjSWwxYlhDSlRlVzVqYUdWeVhDSmRJRDBnWm1GamRHOXllU2dwTzF4dWZTa29kR2hwY3l3Z1puVnVZM1JwYjI0b0tTQjdYRzV5WlhSMWNtNGdYRzVjYmx4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZJZ0x5OWNiaTh2SUhkbFluQmhZMnN2ZFc1cGRtVnljMkZzVFc5a2RXeGxSR1ZtYVc1cGRHbHZiaUlzSWlCY2RDOHZJRlJvWlNCdGIyUjFiR1VnWTJGamFHVmNiaUJjZEhaaGNpQnBibk4wWVd4c1pXUk5iMlIxYkdWeklEMGdlMzA3WEc1Y2JpQmNkQzh2SUZSb1pTQnlaWEYxYVhKbElHWjFibU4wYVc5dVhHNGdYSFJtZFc1amRHbHZiaUJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmS0cxdlpIVnNaVWxrS1NCN1hHNWNiaUJjZEZ4MEx5OGdRMmhsWTJzZ2FXWWdiVzlrZFd4bElHbHpJR2x1SUdOaFkyaGxYRzRnWEhSY2RHbG1LR2x1YzNSaGJHeGxaRTF2WkhWc1pYTmJiVzlrZFd4bFNXUmRLVnh1SUZ4MFhIUmNkSEpsZEhWeWJpQnBibk4wWVd4c1pXUk5iMlIxYkdWelcyMXZaSFZzWlVsa1hTNWxlSEJ2Y25Sek8xeHVYRzRnWEhSY2RDOHZJRU55WldGMFpTQmhJRzVsZHlCdGIyUjFiR1VnS0dGdVpDQndkWFFnYVhRZ2FXNTBieUIwYUdVZ1kyRmphR1VwWEc0Z1hIUmNkSFpoY2lCdGIyUjFiR1VnUFNCcGJuTjBZV3hzWldSTmIyUjFiR1Z6VzIxdlpIVnNaVWxrWFNBOUlIdGNiaUJjZEZ4MFhIUnBPaUJ0YjJSMWJHVkpaQ3hjYmlCY2RGeDBYSFJzT2lCbVlXeHpaU3hjYmlCY2RGeDBYSFJsZUhCdmNuUnpPaUI3ZlZ4dUlGeDBYSFI5TzF4dVhHNGdYSFJjZEM4dklFVjRaV04xZEdVZ2RHaGxJRzF2WkhWc1pTQm1kVzVqZEdsdmJseHVJRngwWEhSdGIyUjFiR1Z6VzIxdlpIVnNaVWxrWFM1allXeHNLRzF2WkhWc1pTNWxlSEJ2Y25SekxDQnRiMlIxYkdVc0lHMXZaSFZzWlM1bGVIQnZjblJ6TENCZlgzZGxZbkJoWTJ0ZmNtVnhkV2x5WlY5ZktUdGNibHh1SUZ4MFhIUXZMeUJHYkdGbklIUm9aU0J0YjJSMWJHVWdZWE1nYkc5aFpHVmtYRzRnWEhSY2RHMXZaSFZzWlM1c0lEMGdkSEoxWlR0Y2JseHVJRngwWEhRdkx5QlNaWFIxY200Z2RHaGxJR1Y0Y0c5eWRITWdiMllnZEdobElHMXZaSFZzWlZ4dUlGeDBYSFJ5WlhSMWNtNGdiVzlrZFd4bExtVjRjRzl5ZEhNN1hHNGdYSFI5WEc1Y2JseHVJRngwTHk4Z1pYaHdiM05sSUhSb1pTQnRiMlIxYkdWeklHOWlhbVZqZENBb1gxOTNaV0p3WVdOclgyMXZaSFZzWlhOZlh5bGNiaUJjZEY5ZmQyVmljR0ZqYTE5eVpYRjFhWEpsWDE4dWJTQTlJRzF2WkhWc1pYTTdYRzVjYmlCY2RDOHZJR1Y0Y0c5elpTQjBhR1VnYlc5a2RXeGxJR05oWTJobFhHNGdYSFJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmTG1NZ1BTQnBibk4wWVd4c1pXUk5iMlIxYkdWek8xeHVYRzRnWEhRdkx5QnBaR1Z1ZEdsMGVTQm1kVzVqZEdsdmJpQm1iM0lnWTJGc2JHbHVaeUJvWVhKdGIyNTVJR2x0Y0c5eWRITWdkMmwwYUNCMGFHVWdZMjl5Y21WamRDQmpiMjUwWlhoMFhHNGdYSFJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmTG1rZ1BTQm1kVzVqZEdsdmJpaDJZV3gxWlNrZ2V5QnlaWFIxY200Z2RtRnNkV1U3SUgwN1hHNWNiaUJjZEM4dklHUmxabWx1WlNCblpYUjBaWElnWm5WdVkzUnBiMjRnWm05eUlHaGhjbTF2Ym5rZ1pYaHdiM0owYzF4dUlGeDBYMTkzWldKd1lXTnJYM0psY1hWcGNtVmZYeTVrSUQwZ1puVnVZM1JwYjI0b1pYaHdiM0owY3l3Z2JtRnRaU3dnWjJWMGRHVnlLU0I3WEc0Z1hIUmNkR2xtS0NGZlgzZGxZbkJoWTJ0ZmNtVnhkV2x5WlY5ZkxtOG9aWGh3YjNKMGN5d2dibUZ0WlNrcElIdGNiaUJjZEZ4MFhIUlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvWlhod2IzSjBjeXdnYm1GdFpTd2dlMXh1SUZ4MFhIUmNkRngwWTI5dVptbG5kWEpoWW14bE9pQm1ZV3h6WlN4Y2JpQmNkRngwWEhSY2RHVnVkVzFsY21GaWJHVTZJSFJ5ZFdVc1hHNGdYSFJjZEZ4MFhIUm5aWFE2SUdkbGRIUmxjbHh1SUZ4MFhIUmNkSDBwTzF4dUlGeDBYSFI5WEc0Z1hIUjlPMXh1WEc0Z1hIUXZMeUJuWlhSRVpXWmhkV3gwUlhod2IzSjBJR1oxYm1OMGFXOXVJR1p2Y2lCamIyMXdZWFJwWW1sc2FYUjVJSGRwZEdnZ2JtOXVMV2hoY20xdmJua2diVzlrZFd4bGMxeHVJRngwWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHk1dUlEMGdablZ1WTNScGIyNG9iVzlrZFd4bEtTQjdYRzRnWEhSY2RIWmhjaUJuWlhSMFpYSWdQU0J0YjJSMWJHVWdKaVlnYlc5a2RXeGxMbDlmWlhOTmIyUjFiR1VnUDF4dUlGeDBYSFJjZEdaMWJtTjBhVzl1SUdkbGRFUmxabUYxYkhRb0tTQjdJSEpsZEhWeWJpQnRiMlIxYkdWYkoyUmxabUYxYkhRblhUc2dmU0E2WEc0Z1hIUmNkRngwWm5WdVkzUnBiMjRnWjJWMFRXOWtkV3hsUlhod2IzSjBjeWdwSUhzZ2NtVjBkWEp1SUcxdlpIVnNaVHNnZlR0Y2JpQmNkRngwWDE5M1pXSndZV05yWDNKbGNYVnBjbVZmWHk1a0tHZGxkSFJsY2l3Z0oyRW5MQ0JuWlhSMFpYSXBPMXh1SUZ4MFhIUnlaWFIxY200Z1oyVjBkR1Z5TzF4dUlGeDBmVHRjYmx4dUlGeDBMeThnVDJKcVpXTjBMbkJ5YjNSdmRIbHdaUzVvWVhOUGQyNVFjbTl3WlhKMGVTNWpZV3hzWEc0Z1hIUmZYM2RsWW5CaFkydGZjbVZ4ZFdseVpWOWZMbThnUFNCbWRXNWpkR2x2YmlodlltcGxZM1FzSUhCeWIzQmxjblI1S1NCN0lISmxkSFZ5YmlCUFltcGxZM1F1Y0hKdmRHOTBlWEJsTG1oaGMwOTNibEJ5YjNCbGNuUjVMbU5oYkd3b2IySnFaV04wTENCd2NtOXdaWEowZVNrN0lIMDdYRzVjYmlCY2RDOHZJRjlmZDJWaWNHRmphMTl3ZFdKc2FXTmZjR0YwYUY5ZlhHNGdYSFJmWDNkbFluQmhZMnRmY21WeGRXbHlaVjlmTG5BZ1BTQmNJbHdpTzF4dVhHNGdYSFF2THlCTWIyRmtJR1Z1ZEhKNUlHMXZaSFZzWlNCaGJtUWdjbVYwZFhKdUlHVjRjRzl5ZEhOY2JpQmNkSEpsZEhWeWJpQmZYM2RsWW5CaFkydGZjbVZ4ZFdseVpWOWZLRjlmZDJWaWNHRmphMTl5WlhGMWFYSmxYMTh1Y3lBOUlERTBNeWs3WEc1Y2JseHVYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVaUF2TDF4dUx5OGdkMlZpY0dGamF5OWliMjkwYzNSeVlYQWdORFUwTUdJek9HTmpNMlUxWlRrd016TmpNbU1pTENKMllYSWdZMjl5WlNBOUlHMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2UzWmxjbk5wYjI0NklDY3lMalF1TUNkOU8xeHVhV1lvZEhsd1pXOW1JRjlmWlNBOVBTQW5iblZ0WW1WeUp5bGZYMlVnUFNCamIzSmxPeUF2THlCbGMyeHBiblF0WkdsellXSnNaUzFzYVc1bElHNXZMWFZ1WkdWbVhHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlqYjNKbExtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXdYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVZ05pQTNJRGdnT1NJc0lpOHZJR2gwZEhCek9pOHZaMmwwYUhWaUxtTnZiUzk2Ykc5cGNtOWpheTlqYjNKbExXcHpMMmx6YzNWbGN5ODROaU5wYzNOMVpXTnZiVzFsYm5RdE1URTFOelU1TURJNFhHNTJZWElnWjJ4dlltRnNJRDBnYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0IwZVhCbGIyWWdkMmx1Wkc5M0lDRTlJQ2QxYm1SbFptbHVaV1FuSUNZbUlIZHBibVJ2ZHk1TllYUm9JRDA5SUUxaGRHaGNiaUFnUHlCM2FXNWtiM2NnT2lCMGVYQmxiMllnYzJWc1ppQWhQU0FuZFc1a1pXWnBibVZrSnlBbUppQnpaV3htTGsxaGRHZ2dQVDBnVFdGMGFDQS9JSE5sYkdZZ09pQkdkVzVqZEdsdmJpZ25jbVYwZFhKdUlIUm9hWE1uS1NncE8xeHVhV1lvZEhsd1pXOW1JRjlmWnlBOVBTQW5iblZ0WW1WeUp5bGZYMmNnUFNCbmJHOWlZV3c3SUM4dklHVnpiR2x1ZEMxa2FYTmhZbXhsTFd4cGJtVWdibTh0ZFc1a1pXWmNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJkc2IySmhiQzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTVZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJRFlnTnlBNElEa2lMQ0l2THlCVWFHRnVheWR6SUVsRk9DQm1iM0lnYUdseklHWjFibTU1SUdSbFptbHVaVkJ5YjNCbGNuUjVYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJQ0Z5WlhGMWFYSmxLQ2N1TDE5bVlXbHNjeWNwS0daMWJtTjBhVzl1S0NsN1hHNGdJSEpsZEhWeWJpQlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkSGtvZTMwc0lDZGhKeXdnZTJkbGREb2dablZ1WTNScGIyNG9LWHNnY21WMGRYSnVJRGM3SUgxOUtTNWhJQ0U5SURjN1hHNTlLVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyUmxjMk55YVhCMGIzSnpMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F5WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnZ09TSXNJblpoY2lCemRHOXlaU0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYzJoaGNtVmtKeWtvSjNkcmN5Y3BYRzRnSUN3Z2RXbGtJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDNWcFpDY3BYRzRnSUN3Z1UzbHRZbTlzSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJkc2IySmhiQ2NwTGxONWJXSnZiRnh1SUNBc0lGVlRSVjlUV1UxQ1Qwd2dQU0IwZVhCbGIyWWdVM2x0WW05c0lEMDlJQ2RtZFc1amRHbHZiaWM3WEc1Y2JuWmhjaUFrWlhod2IzSjBjeUE5SUcxdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYm1GdFpTbDdYRzRnSUhKbGRIVnliaUJ6ZEc5eVpWdHVZVzFsWFNCOGZDQW9jM1J2Y21WYmJtRnRaVjBnUFZ4dUlDQWdJRlZUUlY5VFdVMUNUMHdnSmlZZ1UzbHRZbTlzVzI1aGJXVmRJSHg4SUNoVlUwVmZVMWxOUWs5TUlEOGdVM2x0WW05c0lEb2dkV2xrS1NnblUzbHRZbTlzTGljZ0t5QnVZVzFsS1NrN1hHNTlPMXh1WEc0a1pYaHdiM0owY3k1emRHOXlaU0E5SUhOMGIzSmxPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmQydHpMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F6WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0oyWVhJZ1lXNVBZbXBsWTNRZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWhiaTF2WW1wbFkzUW5LVnh1SUNBc0lFbEZPRjlFVDAxZlJFVkdTVTVGSUQwZ2NtVnhkV2x5WlNnbkxpOWZhV1U0TFdSdmJTMWtaV1pwYm1VbktWeHVJQ0FzSUhSdlVISnBiV2wwYVhabElDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmRHOHRjSEpwYldsMGFYWmxKeWxjYmlBZ0xDQmtVQ0FnSUNBZ0lDQWdJQ0FnSUNBOUlFOWlhbVZqZEM1a1pXWnBibVZRY205d1pYSjBlVHRjYmx4dVpYaHdiM0owY3k1bUlEMGdjbVZ4ZFdseVpTZ25MaTlmWkdWelkzSnBjSFJ2Y25NbktTQS9JRTlpYW1WamRDNWtaV1pwYm1WUWNtOXdaWEowZVNBNklHWjFibU4wYVc5dUlHUmxabWx1WlZCeWIzQmxjblI1S0U4c0lGQXNJRUYwZEhKcFluVjBaWE1wZTF4dUlDQmhiazlpYW1WamRDaFBLVHRjYmlBZ1VDQTlJSFJ2VUhKcGJXbDBhWFpsS0ZBc0lIUnlkV1VwTzF4dUlDQmhiazlpYW1WamRDaEJkSFJ5YVdKMWRHVnpLVHRjYmlBZ2FXWW9TVVU0WDBSUFRWOUVSVVpKVGtVcGRISjVJSHRjYmlBZ0lDQnlaWFIxY200Z1pGQW9UeXdnVUN3Z1FYUjBjbWxpZFhSbGN5azdYRzRnSUgwZ1kyRjBZMmdvWlNsN0lDOHFJR1Z0Y0hSNUlDb3ZJSDFjYmlBZ2FXWW9KMmRsZENjZ2FXNGdRWFIwY21saWRYUmxjeUI4ZkNBbmMyVjBKeUJwYmlCQmRIUnlhV0oxZEdWektYUm9jbTkzSUZSNWNHVkZjbkp2Y2lnblFXTmpaWE56YjNKeklHNXZkQ0J6ZFhCd2IzSjBaV1FoSnlrN1hHNGdJR2xtS0NkMllXeDFaU2NnYVc0Z1FYUjBjbWxpZFhSbGN5bFBXMUJkSUQwZ1FYUjBjbWxpZFhSbGN5NTJZV3gxWlR0Y2JpQWdjbVYwZFhKdUlFODdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZiMkpxWldOMExXUndMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0EwWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnZ09TSXNJblpoY2lCcGMwOWlhbVZqZENBOUlISmxjWFZwY21Vb0p5NHZYMmx6TFc5aWFtVmpkQ2NwTzF4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmlocGRDbDdYRzRnSUdsbUtDRnBjMDlpYW1WamRDaHBkQ2twZEdoeWIzY2dWSGx3WlVWeWNtOXlLR2wwSUNzZ0p5QnBjeUJ1YjNRZ1lXNGdiMkpxWldOMElTY3BPMXh1SUNCeVpYUjFjbTRnYVhRN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZllXNHRiMkpxWldOMExtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTFYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVZ05pQTNJRGdnT1NJc0ltMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCeVpYUjFjbTRnZEhsd1pXOW1JR2wwSUQwOVBTQW5iMkpxWldOMEp5QS9JR2wwSUNFOVBTQnVkV3hzSURvZ2RIbHdaVzltSUdsMElEMDlQU0FuWm5WdVkzUnBiMjRuTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJsekxXOWlhbVZqZEM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05seHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSURZZ055QTRJRGtpTENKMllYSWdaRkFnSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxa2NDY3BYRzRnSUN3Z1kzSmxZWFJsUkdWell5QTlJSEpsY1hWcGNtVW9KeTR2WDNCeWIzQmxjblI1TFdSbGMyTW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnY21WeGRXbHlaU2duTGk5ZlpHVnpZM0pwY0hSdmNuTW5LU0EvSUdaMWJtTjBhVzl1S0c5aWFtVmpkQ3dnYTJWNUxDQjJZV3gxWlNsN1hHNGdJSEpsZEhWeWJpQmtVQzVtS0c5aWFtVmpkQ3dnYTJWNUxDQmpjbVZoZEdWRVpYTmpLREVzSUhaaGJIVmxLU2s3WEc1OUlEb2dablZ1WTNScGIyNG9iMkpxWldOMExDQnJaWGtzSUhaaGJIVmxLWHRjYmlBZ2IySnFaV04wVzJ0bGVWMGdQU0IyWVd4MVpUdGNiaUFnY21WMGRYSnVJRzlpYW1WamREdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOW9hV1JsTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBM1hHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVnTmlBM0lEZ2dPU0lzSWx3aWRYTmxJSE4wY21samRGd2lPMXh1WEc1bGVIQnZjblJ6TGw5ZlpYTk5iMlIxYkdVZ1BTQjBjblZsTzF4dVhHNWxlSEJ2Y25SekxtUmxabUYxYkhRZ1BTQm1kVzVqZEdsdmJpQW9hVzV6ZEdGdVkyVXNJRU52Ym5OMGNuVmpkRzl5S1NCN1hHNGdJR2xtSUNnaEtHbHVjM1JoYm1ObElHbHVjM1JoYm1ObGIyWWdRMjl1YzNSeWRXTjBiM0lwS1NCN1hHNGdJQ0FnZEdoeWIzY2dibVYzSUZSNWNHVkZjbkp2Y2loY0lrTmhibTV2ZENCallXeHNJR0VnWTJ4aGMzTWdZWE1nWVNCbWRXNWpkR2x2Ymx3aUtUdGNiaUFnZlZ4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlltRmlaV3d0Y25WdWRHbHRaUzlvWld4d1pYSnpMMk5zWVhOelEyRnNiRU5vWldOckxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTRYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVZ05pQTNJRGdnT1NBeE1DSXNJblpoY2lCbmJHOWlZV3dnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTluYkc5aVlXd25LVnh1SUNBc0lHTnZjbVVnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJOdmNtVW5LVnh1SUNBc0lHTjBlQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJOMGVDY3BYRzRnSUN3Z2FHbGtaU0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYUdsa1pTY3BYRzRnSUN3Z1VGSlBWRTlVV1ZCRklEMGdKM0J5YjNSdmRIbHdaU2M3WEc1Y2JuWmhjaUFrWlhod2IzSjBJRDBnWm5WdVkzUnBiMjRvZEhsd1pTd2dibUZ0WlN3Z2MyOTFjbU5sS1h0Y2JpQWdkbUZ5SUVsVFgwWlBVa05GUkNBOUlIUjVjR1VnSmlBa1pYaHdiM0owTGtaY2JpQWdJQ0FzSUVsVFgwZE1UMEpCVENBOUlIUjVjR1VnSmlBa1pYaHdiM0owTGtkY2JpQWdJQ0FzSUVsVFgxTlVRVlJKUXlBOUlIUjVjR1VnSmlBa1pYaHdiM0owTGxOY2JpQWdJQ0FzSUVsVFgxQlNUMVJQSUNBOUlIUjVjR1VnSmlBa1pYaHdiM0owTGxCY2JpQWdJQ0FzSUVsVFgwSkpUa1FnSUNBOUlIUjVjR1VnSmlBa1pYaHdiM0owTGtKY2JpQWdJQ0FzSUVsVFgxZFNRVkFnSUNBOUlIUjVjR1VnSmlBa1pYaHdiM0owTGxkY2JpQWdJQ0FzSUdWNGNHOXlkSE1nSUNBOUlFbFRYMGRNVDBKQlRDQS9JR052Y21VZ09pQmpiM0psVzI1aGJXVmRJSHg4SUNoamIzSmxXMjVoYldWZElEMGdlMzBwWEc0Z0lDQWdMQ0JsZUhCUWNtOTBieUFnUFNCbGVIQnZjblJ6VzFCU1QxUlBWRmxRUlYxY2JpQWdJQ0FzSUhSaGNtZGxkQ0FnSUNBOUlFbFRYMGRNVDBKQlRDQS9JR2RzYjJKaGJDQTZJRWxUWDFOVVFWUkpReUEvSUdkc2IySmhiRnR1WVcxbFhTQTZJQ2huYkc5aVlXeGJibUZ0WlYwZ2ZId2dlMzBwVzFCU1QxUlBWRmxRUlYxY2JpQWdJQ0FzSUd0bGVTd2diM2R1TENCdmRYUTdYRzRnSUdsbUtFbFRYMGRNVDBKQlRDbHpiM1Z5WTJVZ1BTQnVZVzFsTzF4dUlDQm1iM0lvYTJWNUlHbHVJSE52ZFhKalpTbDdYRzRnSUNBZ0x5OGdZMjl1ZEdGcGJuTWdhVzRnYm1GMGFYWmxYRzRnSUNBZ2IzZHVJRDBnSVVsVFgwWlBVa05GUkNBbUppQjBZWEpuWlhRZ0ppWWdkR0Z5WjJWMFcydGxlVjBnSVQwOUlIVnVaR1ZtYVc1bFpEdGNiaUFnSUNCcFppaHZkMjRnSmlZZ2EyVjVJR2x1SUdWNGNHOXlkSE1wWTI5dWRHbHVkV1U3WEc0Z0lDQWdMeThnWlhod2IzSjBJRzVoZEdsMlpTQnZjaUJ3WVhOelpXUmNiaUFnSUNCdmRYUWdQU0J2ZDI0Z1B5QjBZWEpuWlhSYmEyVjVYU0E2SUhOdmRYSmpaVnRyWlhsZE8xeHVJQ0FnSUM4dklIQnlaWFpsYm5RZ1oyeHZZbUZzSUhCdmJHeDFkR2x2YmlCbWIzSWdibUZ0WlhOd1lXTmxjMXh1SUNBZ0lHVjRjRzl5ZEhOYmEyVjVYU0E5SUVsVFgwZE1UMEpCVENBbUppQjBlWEJsYjJZZ2RHRnlaMlYwVzJ0bGVWMGdJVDBnSjJaMWJtTjBhVzl1SnlBL0lITnZkWEpqWlZ0clpYbGRYRzRnSUNBZ0x5OGdZbWx1WkNCMGFXMWxjbk1nZEc4Z1oyeHZZbUZzSUdadmNpQmpZV3hzSUdaeWIyMGdaWGh3YjNKMElHTnZiblJsZUhSY2JpQWdJQ0E2SUVsVFgwSkpUa1FnSmlZZ2IzZHVJRDhnWTNSNEtHOTFkQ3dnWjJ4dlltRnNLVnh1SUNBZ0lDOHZJSGR5WVhBZ1oyeHZZbUZzSUdOdmJuTjBjblZqZEc5eWN5Qm1iM0lnY0hKbGRtVnVkQ0JqYUdGdVoyVWdkR2hsYlNCcGJpQnNhV0p5WVhKNVhHNGdJQ0FnT2lCSlUxOVhVa0ZRSUNZbUlIUmhjbWRsZEZ0clpYbGRJRDA5SUc5MWRDQS9JQ2htZFc1amRHbHZiaWhES1h0Y2JpQWdJQ0FnSUhaaGNpQkdJRDBnWm5WdVkzUnBiMjRvWVN3Z1lpd2dZeWw3WEc0Z0lDQWdJQ0FnSUdsbUtIUm9hWE1nYVc1emRHRnVZMlZ2WmlCREtYdGNiaUFnSUNBZ0lDQWdJQ0J6ZDJsMFkyZ29ZWEpuZFcxbGJuUnpMbXhsYm1kMGFDbDdYRzRnSUNBZ0lDQWdJQ0FnSUNCallYTmxJREE2SUhKbGRIVnliaUJ1WlhjZ1F6dGNiaUFnSUNBZ0lDQWdJQ0FnSUdOaGMyVWdNVG9nY21WMGRYSnVJRzVsZHlCREtHRXBPMXh1SUNBZ0lDQWdJQ0FnSUNBZ1kyRnpaU0F5T2lCeVpYUjFjbTRnYm1WM0lFTW9ZU3dnWWlrN1hHNGdJQ0FnSUNBZ0lDQWdmU0J5WlhSMWNtNGdibVYzSUVNb1lTd2dZaXdnWXlrN1hHNGdJQ0FnSUNBZ0lIMGdjbVYwZFhKdUlFTXVZWEJ3Ykhrb2RHaHBjeXdnWVhKbmRXMWxiblJ6S1R0Y2JpQWdJQ0FnSUgwN1hHNGdJQ0FnSUNCR1cxQlNUMVJQVkZsUVJWMGdQU0JEVzFCU1QxUlBWRmxRUlYwN1hHNGdJQ0FnSUNCeVpYUjFjbTRnUmp0Y2JpQWdJQ0F2THlCdFlXdGxJSE4wWVhScFl5QjJaWEp6YVc5dWN5Qm1iM0lnY0hKdmRHOTBlWEJsSUcxbGRHaHZaSE5jYmlBZ0lDQjlLU2h2ZFhRcElEb2dTVk5mVUZKUFZFOGdKaVlnZEhsd1pXOW1JRzkxZENBOVBTQW5ablZ1WTNScGIyNG5JRDhnWTNSNEtFWjFibU4wYVc5dUxtTmhiR3dzSUc5MWRDa2dPaUJ2ZFhRN1hHNGdJQ0FnTHk4Z1pYaHdiM0owSUhCeWIzUnZJRzFsZEdodlpITWdkRzhnWTI5eVpTNGxRMDlPVTFSU1ZVTlVUMUlsTG0xbGRHaHZaSE11SlU1QlRVVWxYRzRnSUNBZ2FXWW9TVk5mVUZKUFZFOHBlMXh1SUNBZ0lDQWdLR1Y0Y0c5eWRITXVkbWx5ZEhWaGJDQjhmQ0FvWlhod2IzSjBjeTUyYVhKMGRXRnNJRDBnZTMwcEtWdHJaWGxkSUQwZ2IzVjBPMXh1SUNBZ0lDQWdMeThnWlhod2IzSjBJSEJ5YjNSdklHMWxkR2h2WkhNZ2RHOGdZMjl5WlM0bFEwOU9VMVJTVlVOVVQxSWxMbkJ5YjNSdmRIbHdaUzRsVGtGTlJTVmNiaUFnSUNBZ0lHbG1LSFI1Y0dVZ0ppQWtaWGh3YjNKMExsSWdKaVlnWlhod1VISnZkRzhnSmlZZ0lXVjRjRkJ5YjNSdlcydGxlVjBwYUdsa1pTaGxlSEJRY205MGJ5d2dhMlY1TENCdmRYUXBPMXh1SUNBZ0lIMWNiaUFnZlZ4dWZUdGNiaTh2SUhSNWNHVWdZbWwwYldGd1hHNGtaWGh3YjNKMExrWWdQU0F4T3lBZ0lDOHZJR1p2Y21ObFpGeHVKR1Y0Y0c5eWRDNUhJRDBnTWpzZ0lDQXZMeUJuYkc5aVlXeGNiaVJsZUhCdmNuUXVVeUE5SURRN0lDQWdMeThnYzNSaGRHbGpYRzRrWlhod2IzSjBMbEFnUFNBNE95QWdJQzh2SUhCeWIzUnZYRzRrWlhod2IzSjBMa0lnUFNBeE5qc2dJQzh2SUdKcGJtUmNiaVJsZUhCdmNuUXVWeUE5SURNeU95QWdMeThnZDNKaGNGeHVKR1Y0Y0c5eWRDNVZJRDBnTmpRN0lDQXZMeUJ6WVdabFhHNGtaWGh3YjNKMExsSWdQU0F4TWpnN0lDOHZJSEpsWVd3Z2NISnZkRzhnYldWMGFHOWtJR1p2Y2lCZ2JHbGljbUZ5ZVdBZ1hHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlDUmxlSEJ2Y25RN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlsZUhCdmNuUXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGxjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TQTJJRGNnT0NBNUlpd2lYQ0oxYzJVZ2MzUnlhV04wWENJN1hHNWNibVY0Y0c5eWRITXVYMTlsYzAxdlpIVnNaU0E5SUhSeWRXVTdYRzVjYm5aaGNpQmZaR1ZtYVc1bFVISnZjR1Z5ZEhrZ1BTQnlaWEYxYVhKbEtGd2lMaTR2WTI5eVpTMXFjeTl2WW1wbFkzUXZaR1ZtYVc1bExYQnliM0JsY25SNVhDSXBPMXh1WEc1MllYSWdYMlJsWm1sdVpWQnliM0JsY25SNU1pQTlJRjlwYm5SbGNtOXdVbVZ4ZFdseVpVUmxabUYxYkhRb1gyUmxabWx1WlZCeWIzQmxjblI1S1R0Y2JseHVablZ1WTNScGIyNGdYMmx1ZEdWeWIzQlNaWEYxYVhKbFJHVm1ZWFZzZENodlltb3BJSHNnY21WMGRYSnVJRzlpYWlBbUppQnZZbW91WDE5bGMwMXZaSFZzWlNBL0lHOWlhaUE2SUhzZ1pHVm1ZWFZzZERvZ2IySnFJSDA3SUgxY2JseHVaWGh3YjNKMGN5NWtaV1poZFd4MElEMGdablZ1WTNScGIyNGdLQ2tnZTF4dUlDQm1kVzVqZEdsdmJpQmtaV1pwYm1WUWNtOXdaWEowYVdWektIUmhjbWRsZEN3Z2NISnZjSE1wSUh0Y2JpQWdJQ0JtYjNJZ0tIWmhjaUJwSUQwZ01Ec2dhU0E4SUhCeWIzQnpMbXhsYm1kMGFEc2dhU3NyS1NCN1hHNGdJQ0FnSUNCMllYSWdaR1Z6WTNKcGNIUnZjaUE5SUhCeWIzQnpXMmxkTzF4dUlDQWdJQ0FnWkdWelkzSnBjSFJ2Y2k1bGJuVnRaWEpoWW14bElEMGdaR1Z6WTNKcGNIUnZjaTVsYm5WdFpYSmhZbXhsSUh4OElHWmhiSE5sTzF4dUlDQWdJQ0FnWkdWelkzSnBjSFJ2Y2k1amIyNW1hV2QxY21GaWJHVWdQU0IwY25WbE8xeHVJQ0FnSUNBZ2FXWWdLRndpZG1Gc2RXVmNJaUJwYmlCa1pYTmpjbWx3ZEc5eUtTQmtaWE5qY21sd2RHOXlMbmR5YVhSaFlteGxJRDBnZEhKMVpUdGNiaUFnSUNBZ0lDZ3dMQ0JmWkdWbWFXNWxVSEp2Y0dWeWRIa3lMbVJsWm1GMWJIUXBLSFJoY21kbGRDd2daR1Z6WTNKcGNIUnZjaTVyWlhrc0lHUmxjMk55YVhCMGIzSXBPMXh1SUNBZ0lIMWNiaUFnZlZ4dVhHNGdJSEpsZEhWeWJpQm1kVzVqZEdsdmJpQW9RMjl1YzNSeWRXTjBiM0lzSUhCeWIzUnZVSEp2Y0hNc0lITjBZWFJwWTFCeWIzQnpLU0I3WEc0Z0lDQWdhV1lnS0hCeWIzUnZVSEp2Y0hNcElHUmxabWx1WlZCeWIzQmxjblJwWlhNb1EyOXVjM1J5ZFdOMGIzSXVjSEp2ZEc5MGVYQmxMQ0J3Y205MGIxQnliM0J6S1R0Y2JpQWdJQ0JwWmlBb2MzUmhkR2xqVUhKdmNITXBJR1JsWm1sdVpWQnliM0JsY25ScFpYTW9RMjl1YzNSeWRXTjBiM0lzSUhOMFlYUnBZMUJ5YjNCektUdGNiaUFnSUNCeVpYUjFjbTRnUTI5dWMzUnlkV04wYjNJN1hHNGdJSDA3WEc1OUtDazdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wySmhZbVZzTFhKMWJuUnBiV1V2YUdWc2NHVnljeTlqY21WaGRHVkRiR0Z6Y3k1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01UQmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNBMklEY2dPQ0E1SWl3aWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmlobGVHVmpLWHRjYmlBZ2RISjVJSHRjYmlBZ0lDQnlaWFIxY200Z0lTRmxlR1ZqS0NrN1hHNGdJSDBnWTJGMFkyZ29aU2w3WEc0Z0lDQWdjbVYwZFhKdUlIUnlkV1U3WEc0Z0lIMWNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOW1ZV2xzY3k1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01URmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNBMklEY2dPQ0E1SWl3aWRtRnlJR2hoYzA5M2JsQnliM0JsY25SNUlEMGdlMzB1YUdGelQzZHVVSEp2Y0dWeWRIazdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLR2wwTENCclpYa3BlMXh1SUNCeVpYUjFjbTRnYUdGelQzZHVVSEp2Y0dWeWRIa3VZMkZzYkNocGRDd2dhMlY1S1R0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5b1lYTXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREV5WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0l2THlCMGJ5QnBibVJsZUdWa0lHOWlhbVZqZEN3Z2RHOVBZbXBsWTNRZ2QybDBhQ0JtWVd4c1ltRmpheUJtYjNJZ2JtOXVMV0Z5Y21GNUxXeHBhMlVnUlZNeklITjBjbWx1WjNOY2JuWmhjaUJKVDJKcVpXTjBJRDBnY21WeGRXbHlaU2duTGk5ZmFXOWlhbVZqZENjcFhHNGdJQ3dnWkdWbWFXNWxaQ0E5SUhKbGNYVnBjbVVvSnk0dlgyUmxabWx1WldRbktUdGNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdablZ1WTNScGIyNG9hWFFwZTF4dUlDQnlaWFIxY200Z1NVOWlhbVZqZENoa1pXWnBibVZrS0dsMEtTazdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZkRzh0YVc5aWFtVmpkQzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTVROY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklEUWdOU0lzSWk4dklHOXdkR2x2Ym1Gc0lDOGdjMmx0Y0d4bElHTnZiblJsZUhRZ1ltbHVaR2x1WjF4dWRtRnlJR0ZHZFc1amRHbHZiaUE5SUhKbGNYVnBjbVVvSnk0dlgyRXRablZ1WTNScGIyNG5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvWm00c0lIUm9ZWFFzSUd4bGJtZDBhQ2w3WEc0Z0lHRkdkVzVqZEdsdmJpaG1iaWs3WEc0Z0lHbG1LSFJvWVhRZ1BUMDlJSFZ1WkdWbWFXNWxaQ2x5WlhSMWNtNGdabTQ3WEc0Z0lITjNhWFJqYUNoc1pXNW5kR2dwZTF4dUlDQWdJR05oYzJVZ01Ub2djbVYwZFhKdUlHWjFibU4wYVc5dUtHRXBlMXh1SUNBZ0lDQWdjbVYwZFhKdUlHWnVMbU5oYkd3b2RHaGhkQ3dnWVNrN1hHNGdJQ0FnZlR0Y2JpQWdJQ0JqWVhObElESTZJSEpsZEhWeWJpQm1kVzVqZEdsdmJpaGhMQ0JpS1h0Y2JpQWdJQ0FnSUhKbGRIVnliaUJtYmk1allXeHNLSFJvWVhRc0lHRXNJR0lwTzF4dUlDQWdJSDA3WEc0Z0lDQWdZMkZ6WlNBek9pQnlaWFIxY200Z1puVnVZM1JwYjI0b1lTd2dZaXdnWXlsN1hHNGdJQ0FnSUNCeVpYUjFjbTRnWm00dVkyRnNiQ2gwYUdGMExDQmhMQ0JpTENCaktUdGNiaUFnSUNCOU8xeHVJQ0I5WEc0Z0lISmxkSFZ5YmlCbWRXNWpkR2x2YmlndktpQXVMaTVoY21keklDb3ZLWHRjYmlBZ0lDQnlaWFIxY200Z1ptNHVZWEJ3Ykhrb2RHaGhkQ3dnWVhKbmRXMWxiblJ6S1R0Y2JpQWdmVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlqZEhndWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlERTBYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVZ05pQTNJRGdnT1NJc0ltMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b1ltbDBiV0Z3TENCMllXeDFaU2w3WEc0Z0lISmxkSFZ5YmlCN1hHNGdJQ0FnWlc1MWJXVnlZV0pzWlNBZ09pQWhLR0pwZEcxaGNDQW1JREVwTEZ4dUlDQWdJR052Ym1acFozVnlZV0pzWlRvZ0lTaGlhWFJ0WVhBZ0ppQXlLU3hjYmlBZ0lDQjNjbWwwWVdKc1pTQWdJQ0E2SUNFb1ltbDBiV0Z3SUNZZ05Da3NYRzRnSUNBZ2RtRnNkV1VnSUNBZ0lDQWdPaUIyWVd4MVpWeHVJQ0I5TzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNCeWIzQmxjblI1TFdSbGMyTXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREUxWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnZ09TSXNJbTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdlMzA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXBkR1Z5WVhSdmNuTXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREUyWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0oyWVhJZ2FYTlBZbXBsWTNRZ1BTQnlaWEYxYVhKbEtDY3VMMTlwY3kxdlltcGxZM1FuS1Z4dUlDQXNJR1J2WTNWdFpXNTBJRDBnY21WeGRXbHlaU2duTGk5ZloyeHZZbUZzSnlrdVpHOWpkVzFsYm5SY2JpQWdMeThnYVc0Z2IyeGtJRWxGSUhSNWNHVnZaaUJrYjJOMWJXVnVkQzVqY21WaGRHVkZiR1Z0Wlc1MElHbHpJQ2R2WW1wbFkzUW5YRzRnSUN3Z2FYTWdQU0JwYzA5aWFtVmpkQ2hrYjJOMWJXVnVkQ2tnSmlZZ2FYTlBZbXBsWTNRb1pHOWpkVzFsYm5RdVkzSmxZWFJsUld4bGJXVnVkQ2s3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0dsMEtYdGNiaUFnY21WMGRYSnVJR2x6SUQ4Z1pHOWpkVzFsYm5RdVkzSmxZWFJsUld4bGJXVnVkQ2hwZENrZ09pQjdmVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlrYjIwdFkzSmxZWFJsTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeE4xeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSURZZ055QTRJRGtpTENJdkx5QXhPUzR4TGpJdU1UUWdMeUF4TlM0eUxqTXVNVFFnVDJKcVpXTjBMbXRsZVhNb1R5bGNiblpoY2lBa2EyVjVjeUFnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFyWlhsekxXbHVkR1Z5Ym1Gc0p5bGNiaUFnTENCbGJuVnRRblZuUzJWNWN5QTlJSEpsY1hWcGNtVW9KeTR2WDJWdWRXMHRZblZuTFd0bGVYTW5LVHRjYmx4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCUFltcGxZM1F1YTJWNWN5QjhmQ0JtZFc1amRHbHZiaUJyWlhsektFOHBlMXh1SUNCeVpYUjFjbTRnSkd0bGVYTW9UeXdnWlc1MWJVSjFaMHRsZVhNcE8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyOWlhbVZqZEMxclpYbHpMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F4T0Z4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJaXdpYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZENsN1hHNGdJR2xtS0hSNWNHVnZaaUJwZENBaFBTQW5ablZ1WTNScGIyNG5LWFJvY205M0lGUjVjR1ZGY25KdmNpaHBkQ0FySUNjZ2FYTWdibTkwSUdFZ1puVnVZM1JwYjI0aEp5azdYRzRnSUhKbGRIVnliaUJwZER0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5aExXWjFibU4wYVc5dUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXhPVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlEWWdOeUE0SURraUxDSjJZWElnZEc5VGRISnBibWNnUFNCN2ZTNTBiMU4wY21sdVp6dGNibHh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZENsN1hHNGdJSEpsZEhWeWJpQjBiMU4wY21sdVp5NWpZV3hzS0dsMEtTNXpiR2xqWlNnNExDQXRNU2s3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWTI5bUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXlNRnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lMeThnTnk0eExqRWdWRzlRY21sdGFYUnBkbVVvYVc1d2RYUWdXeXdnVUhKbFptVnljbVZrVkhsd1pWMHBYRzUyWVhJZ2FYTlBZbXBsWTNRZ1BTQnlaWEYxYVhKbEtDY3VMMTlwY3kxdlltcGxZM1FuS1R0Y2JpOHZJR2x1YzNSbFlXUWdiMllnZEdobElFVlROaUJ6Y0dWaklIWmxjbk5wYjI0c0lIZGxJR1JwWkc0bmRDQnBiWEJzWlcxbGJuUWdRRUIwYjFCeWFXMXBkR2wyWlNCallYTmxYRzR2THlCaGJtUWdkR2hsSUhObFkyOXVaQ0JoY21kMWJXVnVkQ0F0SUdac1lXY2dMU0J3Y21WbVpYSnlaV1FnZEhsd1pTQnBjeUJoSUhOMGNtbHVaMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0JtZFc1amRHbHZiaWhwZEN3Z1V5bDdYRzRnSUdsbUtDRnBjMDlpYW1WamRDaHBkQ2twY21WMGRYSnVJR2wwTzF4dUlDQjJZWElnWm00c0lIWmhiRHRjYmlBZ2FXWW9VeUFtSmlCMGVYQmxiMllnS0dadUlEMGdhWFF1ZEc5VGRISnBibWNwSUQwOUlDZG1kVzVqZEdsdmJpY2dKaVlnSVdselQySnFaV04wS0haaGJDQTlJR1p1TG1OaGJHd29hWFFwS1NseVpYUjFjbTRnZG1Gc08xeHVJQ0JwWmloMGVYQmxiMllnS0dadUlEMGdhWFF1ZG1Gc2RXVlBaaWtnUFQwZ0oyWjFibU4wYVc5dUp5QW1KaUFoYVhOUFltcGxZM1FvZG1Gc0lEMGdabTR1WTJGc2JDaHBkQ2twS1hKbGRIVnliaUIyWVd3N1hHNGdJR2xtS0NGVElDWW1JSFI1Y0dWdlppQW9abTRnUFNCcGRDNTBiMU4wY21sdVp5a2dQVDBnSjJaMWJtTjBhVzl1SnlBbUppQWhhWE5QWW1wbFkzUW9kbUZzSUQwZ1ptNHVZMkZzYkNocGRDa3BLWEpsZEhWeWJpQjJZV3c3WEc0Z0lIUm9jbTkzSUZSNWNHVkZjbkp2Y2loY0lrTmhiaWQwSUdOdmJuWmxjblFnYjJKcVpXTjBJSFJ2SUhCeWFXMXBkR2wyWlNCMllXeDFaVndpS1R0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5MGJ5MXdjbWx0YVhScGRtVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREl4WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnZ09TSXNJblpoY2lCa1pXWWdQU0J5WlhGMWFYSmxLQ2N1TDE5dlltcGxZM1F0WkhBbktTNW1YRzRnSUN3Z2FHRnpJRDBnY21WeGRXbHlaU2duTGk5ZmFHRnpKeWxjYmlBZ0xDQlVRVWNnUFNCeVpYRjFhWEpsS0NjdUwxOTNhM01uS1NnbmRHOVRkSEpwYm1kVVlXY25LVHRjYmx4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmlocGRDd2dkR0ZuTENCemRHRjBLWHRjYmlBZ2FXWW9hWFFnSmlZZ0lXaGhjeWhwZENBOUlITjBZWFFnUHlCcGRDQTZJR2wwTG5CeWIzUnZkSGx3WlN3Z1ZFRkhLU2xrWldZb2FYUXNJRlJCUnl3Z2UyTnZibVpwWjNWeVlXSnNaVG9nZEhKMVpTd2dkbUZzZFdVNklIUmhaMzBwTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDNObGRDMTBieTF6ZEhKcGJtY3RkR0ZuTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeU1seHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWRtRnlJR2xrSUQwZ01GeHVJQ0FzSUhCNElEMGdUV0YwYUM1eVlXNWtiMjBvS1R0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b2EyVjVLWHRjYmlBZ2NtVjBkWEp1SUNkVGVXMWliMndvSnk1amIyNWpZWFFvYTJWNUlEMDlQU0IxYm1SbFptbHVaV1FnUHlBbkp5QTZJR3RsZVN3Z0p5bGZKeXdnS0NzcmFXUWdLeUJ3ZUNrdWRHOVRkSEpwYm1jb016WXBLVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTkxYVdRdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlESXpYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVaUxDSXZMeUEzTGpJdU1TQlNaWEYxYVhKbFQySnFaV04wUTI5bGNtTnBZbXhsS0dGeVozVnRaVzUwS1Z4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmlocGRDbDdYRzRnSUdsbUtHbDBJRDA5SUhWdVpHVm1hVzVsWkNsMGFISnZkeUJVZVhCbFJYSnliM0lvWENKRFlXNG5kQ0JqWVd4c0lHMWxkR2h2WkNCdmJpQWdYQ0lnS3lCcGRDazdYRzRnSUhKbGRIVnliaUJwZER0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5a1pXWnBibVZrTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeU5GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNBaGNtVnhkV2x5WlNnbkxpOWZaR1Z6WTNKcGNIUnZjbk1uS1NBbUppQWhjbVZ4ZFdseVpTZ25MaTlmWm1GcGJITW5LU2htZFc1amRHbHZiaWdwZTF4dUlDQnlaWFIxY200Z1QySnFaV04wTG1SbFptbHVaVkJ5YjNCbGNuUjVLSEpsY1hWcGNtVW9KeTR2WDJSdmJTMWpjbVZoZEdVbktTZ25aR2wySnlrc0lDZGhKeXdnZTJkbGREb2dablZ1WTNScGIyNG9LWHNnY21WMGRYSnVJRGM3SUgxOUtTNWhJQ0U5SURjN1hHNTlLVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgybGxPQzFrYjIwdFpHVm1hVzVsTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeU5WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSURZZ055QTRJRGtpTENKdGIyUjFiR1V1Wlhod2IzSjBjeUE5SUhSeWRXVTdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5c2FXSnlZWEo1TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeU5seHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWRtRnlJSE5vWVhKbFpDQTlJSEpsY1hWcGNtVW9KeTR2WDNOb1lYSmxaQ2NwS0NkclpYbHpKeWxjYmlBZ0xDQjFhV1FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkxYVdRbktUdGNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdablZ1WTNScGIyNG9hMlY1S1h0Y2JpQWdjbVYwZFhKdUlITm9ZWEpsWkZ0clpYbGRJSHg4SUNoemFHRnlaV1JiYTJWNVhTQTlJSFZwWkNoclpYa3BLVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl6YUdGeVpXUXRhMlY1TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeU4xeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aUx5OGdOeTR4TGpRZ1ZHOUpiblJsWjJWeVhHNTJZWElnWTJWcGJDQWdQU0JOWVhSb0xtTmxhV3hjYmlBZ0xDQm1iRzl2Y2lBOUlFMWhkR2d1Wm14dmIzSTdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLR2wwS1h0Y2JpQWdjbVYwZFhKdUlHbHpUbUZPS0dsMElEMGdLMmwwS1NBL0lEQWdPaUFvYVhRZ1BpQXdJRDhnWm14dmIzSWdPaUJqWldsc0tTaHBkQ2s3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmZEc4dGFXNTBaV2RsY2k1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ01qaGNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNJc0lpOHZJRWxGSURndElHUnZiaWQwSUdWdWRXMGdZblZuSUd0bGVYTmNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdLRnh1SUNBblkyOXVjM1J5ZFdOMGIzSXNhR0Z6VDNkdVVISnZjR1Z5ZEhrc2FYTlFjbTkwYjNSNWNHVlBaaXh3Y205d1pYSjBlVWx6Ulc1MWJXVnlZV0pzWlN4MGIweHZZMkZzWlZOMGNtbHVaeXgwYjFOMGNtbHVaeXgyWVd4MVpVOW1KMXh1S1M1emNHeHBkQ2duTENjcE8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmWlc1MWJTMWlkV2N0YTJWNWN5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNamxjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJblpoY2lCbmJHOWlZV3dnUFNCeVpYRjFhWEpsS0NjdUwxOW5iRzlpWVd3bktWeHVJQ0FzSUZOSVFWSkZSQ0E5SUNkZlgyTnZjbVV0YW5OZmMyaGhjbVZrWDE4blhHNGdJQ3dnYzNSdmNtVWdJRDBnWjJ4dlltRnNXMU5JUVZKRlJGMGdmSHdnS0dkc2IySmhiRnRUU0VGU1JVUmRJRDBnZTMwcE8xeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaHJaWGtwZTF4dUlDQnlaWFIxY200Z2MzUnZjbVZiYTJWNVhTQjhmQ0FvYzNSdmNtVmJhMlY1WFNBOUlIdDlLVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTl6YUdGeVpXUXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRE13WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0p0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSHNnWENKa1pXWmhkV3gwWENJNklISmxjWFZwY21Vb1hDSmpiM0psTFdwekwyeHBZbkpoY25rdlptNHZiMkpxWldOMEwyZGxkQzF3Y205MGIzUjVjR1V0YjJaY0lpa3NJRjlmWlhOTmIyUjFiR1U2SUhSeWRXVWdmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5amIzSmxMV3B6TDI5aWFtVmpkQzluWlhRdGNISnZkRzkwZVhCbExXOW1MbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F6TVZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSXZMeUEzTGpFdU1UTWdWRzlQWW1wbFkzUW9ZWEpuZFcxbGJuUXBYRzUyWVhJZ1pHVm1hVzVsWkNBOUlISmxjWFZwY21Vb0p5NHZYMlJsWm1sdVpXUW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYVhRcGUxeHVJQ0J5WlhSMWNtNGdUMkpxWldOMEtHUmxabWx1WldRb2FYUXBLVHRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTkwYnkxdlltcGxZM1F1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURNeVhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVpTENKdGIyUjFiR1V1Wlhod2IzSjBjeUE5SUhzZ1hDSmtaV1poZFd4MFhDSTZJSEpsY1hWcGNtVW9YQ0pqYjNKbExXcHpMMnhwWW5KaGNua3ZabTR2YjJKcVpXTjBMMlJsWm1sdVpTMXdjbTl3WlhKMGVWd2lLU3dnWDE5bGMwMXZaSFZzWlRvZ2RISjFaU0I5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyTnZjbVV0YW5NdmIySnFaV04wTDJSbFptbHVaUzF3Y205d1pYSjBlUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTXpOY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklEUWdOU0EySURjZ09DQTVJaXdpWENKMWMyVWdjM1J5YVdOMFhDSTdYRzVjYm1WNGNHOXlkSE11WDE5bGMwMXZaSFZzWlNBOUlIUnlkV1U3WEc1Y2JuWmhjaUJmYzJWMFVISnZkRzkwZVhCbFQyWWdQU0J5WlhGMWFYSmxLRndpTGk0dlkyOXlaUzFxY3k5dlltcGxZM1F2YzJWMExYQnliM1J2ZEhsd1pTMXZabHdpS1R0Y2JseHVkbUZ5SUY5elpYUlFjbTkwYjNSNWNHVlBaaklnUFNCZmFXNTBaWEp2Y0ZKbGNYVnBjbVZFWldaaGRXeDBLRjl6WlhSUWNtOTBiM1I1Y0dWUFppazdYRzVjYm5aaGNpQmZZM0psWVhSbElEMGdjbVZ4ZFdseVpTaGNJaTR1TDJOdmNtVXRhbk12YjJKcVpXTjBMMk55WldGMFpWd2lLVHRjYmx4dWRtRnlJRjlqY21WaGRHVXlJRDBnWDJsdWRHVnliM0JTWlhGMWFYSmxSR1ZtWVhWc2RDaGZZM0psWVhSbEtUdGNibHh1ZG1GeUlGOTBlWEJsYjJZeUlEMGdjbVZ4ZFdseVpTaGNJaTR1TDJobGJIQmxjbk12ZEhsd1pXOW1YQ0lwTzF4dVhHNTJZWElnWDNSNWNHVnZaak1nUFNCZmFXNTBaWEp2Y0ZKbGNYVnBjbVZFWldaaGRXeDBLRjkwZVhCbGIyWXlLVHRjYmx4dVpuVnVZM1JwYjI0Z1gybHVkR1Z5YjNCU1pYRjFhWEpsUkdWbVlYVnNkQ2h2WW1vcElIc2djbVYwZFhKdUlHOWlhaUFtSmlCdlltb3VYMTlsYzAxdlpIVnNaU0EvSUc5aWFpQTZJSHNnWkdWbVlYVnNkRG9nYjJKcUlIMDdJSDFjYmx4dVpYaHdiM0owY3k1a1pXWmhkV3gwSUQwZ1puVnVZM1JwYjI0Z0tITjFZa05zWVhOekxDQnpkWEJsY2tOc1lYTnpLU0I3WEc0Z0lHbG1JQ2gwZVhCbGIyWWdjM1Z3WlhKRGJHRnpjeUFoUFQwZ1hDSm1kVzVqZEdsdmJsd2lJQ1ltSUhOMWNHVnlRMnhoYzNNZ0lUMDlJRzUxYkd3cElIdGNiaUFnSUNCMGFISnZkeUJ1WlhjZ1ZIbHdaVVZ5Y205eUtGd2lVM1Z3WlhJZ1pYaHdjbVZ6YzJsdmJpQnRkWE4wSUdWcGRHaGxjaUJpWlNCdWRXeHNJRzl5SUdFZ1puVnVZM1JwYjI0c0lHNXZkQ0JjSWlBcklDaDBlWEJsYjJZZ2MzVndaWEpEYkdGemN5QTlQVDBnWENKMWJtUmxabWx1WldSY0lpQS9JRndpZFc1a1pXWnBibVZrWENJZ09pQW9NQ3dnWDNSNWNHVnZaak11WkdWbVlYVnNkQ2tvYzNWd1pYSkRiR0Z6Y3lrcEtUdGNiaUFnZlZ4dVhHNGdJSE4xWWtOc1lYTnpMbkJ5YjNSdmRIbHdaU0E5SUNnd0xDQmZZM0psWVhSbE1pNWtaV1poZFd4MEtTaHpkWEJsY2tOc1lYTnpJQ1ltSUhOMWNHVnlRMnhoYzNNdWNISnZkRzkwZVhCbExDQjdYRzRnSUNBZ1kyOXVjM1J5ZFdOMGIzSTZJSHRjYmlBZ0lDQWdJSFpoYkhWbE9pQnpkV0pEYkdGemN5eGNiaUFnSUNBZ0lHVnVkVzFsY21GaWJHVTZJR1poYkhObExGeHVJQ0FnSUNBZ2QzSnBkR0ZpYkdVNklIUnlkV1VzWEc0Z0lDQWdJQ0JqYjI1bWFXZDFjbUZpYkdVNklIUnlkV1ZjYmlBZ0lDQjlYRzRnSUgwcE8xeHVJQ0JwWmlBb2MzVndaWEpEYkdGemN5a2dYM05sZEZCeWIzUnZkSGx3WlU5bU1pNWtaV1poZFd4MElEOGdLREFzSUY5elpYUlFjbTkwYjNSNWNHVlBaakl1WkdWbVlYVnNkQ2tvYzNWaVEyeGhjM01zSUhOMWNHVnlRMnhoYzNNcElEb2djM1ZpUTJ4aGMzTXVYMTl3Y205MGIxOWZJRDBnYzNWd1pYSkRiR0Z6Y3p0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wySmhZbVZzTFhKMWJuUnBiV1V2YUdWc2NHVnljeTlwYm1obGNtbDBjeTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTXpSY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2lYQ0oxYzJVZ2MzUnlhV04wWENJN1hHNWNibVY0Y0c5eWRITXVYMTlsYzAxdlpIVnNaU0E5SUhSeWRXVTdYRzVjYm5aaGNpQmZkSGx3Wlc5bU1pQTlJSEpsY1hWcGNtVW9YQ0l1TGk5b1pXeHdaWEp6TDNSNWNHVnZabHdpS1R0Y2JseHVkbUZ5SUY5MGVYQmxiMll6SUQwZ1gybHVkR1Z5YjNCU1pYRjFhWEpsUkdWbVlYVnNkQ2hmZEhsd1pXOW1NaWs3WEc1Y2JtWjFibU4wYVc5dUlGOXBiblJsY205d1VtVnhkV2x5WlVSbFptRjFiSFFvYjJKcUtTQjdJSEpsZEhWeWJpQnZZbW9nSmlZZ2IySnFMbDlmWlhOTmIyUjFiR1VnUHlCdlltb2dPaUI3SUdSbFptRjFiSFE2SUc5aWFpQjlPeUI5WEc1Y2JtVjRjRzl5ZEhNdVpHVm1ZWFZzZENBOUlHWjFibU4wYVc5dUlDaHpaV3htTENCallXeHNLU0I3WEc0Z0lHbG1JQ2doYzJWc1ppa2dlMXh1SUNBZ0lIUm9jbTkzSUc1bGR5QlNaV1psY21WdVkyVkZjbkp2Y2loY0luUm9hWE1nYUdGemJpZDBJR0psWlc0Z2FXNXBkR2xoYkdselpXUWdMU0J6ZFhCbGNpZ3BJR2hoYzI0bmRDQmlaV1Z1SUdOaGJHeGxaRndpS1R0Y2JpQWdmVnh1WEc0Z0lISmxkSFZ5YmlCallXeHNJQ1ltSUNnb2RIbHdaVzltSUdOaGJHd2dQVDA5SUZ3aWRXNWtaV1pwYm1Wa1hDSWdQeUJjSW5WdVpHVm1hVzVsWkZ3aUlEb2dLREFzSUY5MGVYQmxiMll6TG1SbFptRjFiSFFwS0dOaGJHd3BLU0E5UFQwZ1hDSnZZbXBsWTNSY0lpQjhmQ0IwZVhCbGIyWWdZMkZzYkNBOVBUMGdYQ0ptZFc1amRHbHZibHdpS1NBL0lHTmhiR3dnT2lCelpXeG1PMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WW1GaVpXd3RjblZ1ZEdsdFpTOW9aV3h3WlhKekwzQnZjM05wWW14bFEyOXVjM1J5ZFdOMGIzSlNaWFIxY200dWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlETTFYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSW5KbGNYVnBjbVVvSnk0dUx5NHVMMjF2WkhWc1pYTXZaWE0yTG05aWFtVmpkQzVrWldacGJtVXRjSEp2Y0dWeWRIa25LVHRjYm5aaGNpQWtUMkpxWldOMElEMGdjbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5ZlkyOXlaU2NwTGs5aWFtVmpkRHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRnWkdWbWFXNWxVSEp2Y0dWeWRIa29hWFFzSUd0bGVTd2daR1Z6WXlsN1hHNGdJSEpsZEhWeWJpQWtUMkpxWldOMExtUmxabWx1WlZCeWIzQmxjblI1S0dsMExDQnJaWGtzSUdSbGMyTXBPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzlrWldacGJtVXRjSEp2Y0dWeWRIa3Vhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRE0yWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWdOaUEzSURnZ09TSXNJaTh2SURFNUxqRXVNaTR5SUM4Z01UVXVNaTR6TGpVZ1QySnFaV04wTG1OeVpXRjBaU2hQSUZzc0lGQnliM0JsY25ScFpYTmRLVnh1ZG1GeUlHRnVUMkpxWldOMElDQWdJRDBnY21WeGRXbHlaU2duTGk5ZllXNHRiMkpxWldOMEp5bGNiaUFnTENCa1VITWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFrY0hNbktWeHVJQ0FzSUdWdWRXMUNkV2RMWlhseklEMGdjbVZ4ZFdseVpTZ25MaTlmWlc1MWJTMWlkV2N0YTJWNWN5Y3BYRzRnSUN3Z1NVVmZVRkpQVkU4Z0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5emFHRnlaV1F0YTJWNUp5a29KMGxGWDFCU1QxUlBKeWxjYmlBZ0xDQkZiWEIwZVNBZ0lDQWdJQ0E5SUdaMWJtTjBhVzl1S0NsN0lDOHFJR1Z0Y0hSNUlDb3ZJSDFjYmlBZ0xDQlFVazlVVDFSWlVFVWdJQ0E5SUNkd2NtOTBiM1I1Y0dVbk8xeHVYRzR2THlCRGNtVmhkR1VnYjJKcVpXTjBJSGRwZEdnZ1ptRnJaU0JnYm5Wc2JHQWdjSEp2ZEc5MGVYQmxPaUIxYzJVZ2FXWnlZVzFsSUU5aWFtVmpkQ0IzYVhSb0lHTnNaV0Z5WldRZ2NISnZkRzkwZVhCbFhHNTJZWElnWTNKbFlYUmxSR2xqZENBOUlHWjFibU4wYVc5dUtDbDdYRzRnSUM4dklGUm9jbUZ6YUN3Z2QyRnpkR1VnWVc1a0lITnZaRzl0ZVRvZ1NVVWdSME1nWW5WblhHNGdJSFpoY2lCcFpuSmhiV1VnUFNCeVpYRjFhWEpsS0NjdUwxOWtiMjB0WTNKbFlYUmxKeWtvSjJsbWNtRnRaU2NwWEc0Z0lDQWdMQ0JwSUNBZ0lDQWdQU0JsYm5WdFFuVm5TMlY1Y3k1c1pXNW5kR2hjYmlBZ0lDQXNJR3gwSUNBZ0lDQTlJQ2M4SjF4dUlDQWdJQ3dnWjNRZ0lDQWdJRDBnSno0blhHNGdJQ0FnTENCcFpuSmhiV1ZFYjJOMWJXVnVkRHRjYmlBZ2FXWnlZVzFsTG5OMGVXeGxMbVJwYzNCc1lYa2dQU0FuYm05dVpTYzdYRzRnSUhKbGNYVnBjbVVvSnk0dlgyaDBiV3duS1M1aGNIQmxibVJEYUdsc1pDaHBabkpoYldVcE8xeHVJQ0JwWm5KaGJXVXVjM0pqSUQwZ0oycGhkbUZ6WTNKcGNIUTZKenNnTHk4Z1pYTnNhVzUwTFdScGMyRmliR1V0YkdsdVpTQnVieTF6WTNKcGNIUXRkWEpzWEc0Z0lDOHZJR055WldGMFpVUnBZM1FnUFNCcFpuSmhiV1V1WTI5dWRHVnVkRmRwYm1SdmR5NVBZbXBsWTNRN1hHNGdJQzh2SUdoMGJXd3VjbVZ0YjNabFEyaHBiR1FvYVdaeVlXMWxLVHRjYmlBZ2FXWnlZVzFsUkc5amRXMWxiblFnUFNCcFpuSmhiV1V1WTI5dWRHVnVkRmRwYm1SdmR5NWtiMk4xYldWdWREdGNiaUFnYVdaeVlXMWxSRzlqZFcxbGJuUXViM0JsYmlncE8xeHVJQ0JwWm5KaGJXVkViMk4xYldWdWRDNTNjbWwwWlNoc2RDQXJJQ2R6WTNKcGNIUW5JQ3NnWjNRZ0t5QW5aRzlqZFcxbGJuUXVSajFQWW1wbFkzUW5JQ3NnYkhRZ0t5QW5MM05qY21sd2RDY2dLeUJuZENrN1hHNGdJR2xtY21GdFpVUnZZM1Z0Wlc1MExtTnNiM05sS0NrN1hHNGdJR055WldGMFpVUnBZM1FnUFNCcFpuSmhiV1ZFYjJOMWJXVnVkQzVHTzF4dUlDQjNhR2xzWlNocExTMHBaR1ZzWlhSbElHTnlaV0YwWlVScFkzUmJVRkpQVkU5VVdWQkZYVnRsYm5WdFFuVm5TMlY1YzF0cFhWMDdYRzRnSUhKbGRIVnliaUJqY21WaGRHVkVhV04wS0NrN1hHNTlPMXh1WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUU5aWFtVmpkQzVqY21WaGRHVWdmSHdnWm5WdVkzUnBiMjRnWTNKbFlYUmxLRThzSUZCeWIzQmxjblJwWlhNcGUxeHVJQ0IyWVhJZ2NtVnpkV3gwTzF4dUlDQnBaaWhQSUNFOVBTQnVkV3hzS1h0Y2JpQWdJQ0JGYlhCMGVWdFFVazlVVDFSWlVFVmRJRDBnWVc1UFltcGxZM1FvVHlrN1hHNGdJQ0FnY21WemRXeDBJRDBnYm1WM0lFVnRjSFI1TzF4dUlDQWdJRVZ0Y0hSNVcxQlNUMVJQVkZsUVJWMGdQU0J1ZFd4c08xeHVJQ0FnSUM4dklHRmtaQ0JjSWw5ZmNISnZkRzlmWDF3aUlHWnZjaUJQWW1wbFkzUXVaMlYwVUhKdmRHOTBlWEJsVDJZZ2NHOXNlV1pwYkd4Y2JpQWdJQ0J5WlhOMWJIUmJTVVZmVUZKUFZFOWRJRDBnVHp0Y2JpQWdmU0JsYkhObElISmxjM1ZzZENBOUlHTnlaV0YwWlVScFkzUW9LVHRjYmlBZ2NtVjBkWEp1SUZCeWIzQmxjblJwWlhNZ1BUMDlJSFZ1WkdWbWFXNWxaQ0EvSUhKbGMzVnNkQ0E2SUdSUWN5aHlaWE4xYkhRc0lGQnliM0JsY25ScFpYTXBPMXh1ZlR0Y2JseHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMV055WldGMFpTNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNemRjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJblpoY2lBa1pYaHdiM0owSUQwZ2NtVnhkV2x5WlNnbkxpOWZaWGh3YjNKMEp5azdYRzR2THlBeE9TNHhMakl1TkNBdklERTFMakl1TXk0MklFOWlhbVZqZEM1a1pXWnBibVZRY205d1pYSjBlU2hQTENCUUxDQkJkSFJ5YVdKMWRHVnpLVnh1SkdWNGNHOXlkQ2drWlhod2IzSjBMbE1nS3lBa1pYaHdiM0owTGtZZ0tpQWhjbVZ4ZFdseVpTZ25MaTlmWkdWelkzSnBjSFJ2Y25NbktTd2dKMDlpYW1WamRDY3NJSHRrWldacGJtVlFjbTl3WlhKMGVUb2djbVZ4ZFdseVpTZ25MaTlmYjJKcVpXTjBMV1J3SnlrdVpuMHBPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5bGN6WXViMkpxWldOMExtUmxabWx1WlMxd2NtOXdaWEowZVM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ016aGNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNBMklEY2dPQ0E1SWl3aUozVnpaU0J6ZEhKcFkzUW5PMXh1ZG1GeUlFeEpRbEpCVWxrZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiR2xpY21GeWVTY3BYRzRnSUN3Z0pHVjRjRzl5ZENBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWxlSEJ2Y25RbktWeHVJQ0FzSUhKbFpHVm1hVzVsSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmNtVmtaV1pwYm1VbktWeHVJQ0FzSUdocFpHVWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFHbGtaU2NwWEc0Z0lDd2dhR0Z6SUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlvWVhNbktWeHVJQ0FzSUVsMFpYSmhkRzl5Y3lBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFYUmxjbUYwYjNKekp5bGNiaUFnTENBa2FYUmxja055WldGMFpTQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgybDBaWEl0WTNKbFlYUmxKeWxjYmlBZ0xDQnpaWFJVYjFOMGNtbHVaMVJoWnlBOUlISmxjWFZwY21Vb0p5NHZYM05sZEMxMGJ5MXpkSEpwYm1jdGRHRm5KeWxjYmlBZ0xDQm5aWFJRY205MGIzUjVjR1ZQWmlBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMW5jRzhuS1Z4dUlDQXNJRWxVUlZKQlZFOVNJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmZDJ0ekp5a29KMmwwWlhKaGRHOXlKeWxjYmlBZ0xDQkNWVWRIV1NBZ0lDQWdJQ0FnSUNBOUlDRW9XMTB1YTJWNWN5QW1KaUFuYm1WNGRDY2dhVzRnVzEwdWEyVjVjeWdwS1NBdkx5QlRZV1poY21rZ2FHRnpJR0oxWjJkNUlHbDBaWEpoZEc5eWN5QjNMMjhnWUc1bGVIUmdYRzRnSUN3Z1JrWmZTVlJGVWtGVVQxSWdJQ0FnUFNBblFFQnBkR1Z5WVhSdmNpZGNiaUFnTENCTFJWbFRJQ0FnSUNBZ0lDQWdJQ0E5SUNkclpYbHpKMXh1SUNBc0lGWkJURlZGVXlBZ0lDQWdJQ0FnSUQwZ0ozWmhiSFZsY3ljN1hHNWNiblpoY2lCeVpYUjFjbTVVYUdseklEMGdablZ1WTNScGIyNG9LWHNnY21WMGRYSnVJSFJvYVhNN0lIMDdYRzVjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvUW1GelpTd2dUa0ZOUlN3Z1EyOXVjM1J5ZFdOMGIzSXNJRzVsZUhRc0lFUkZSa0ZWVEZRc0lFbFRYMU5GVkN3Z1JrOVNRMFZFS1h0Y2JpQWdKR2wwWlhKRGNtVmhkR1VvUTI5dWMzUnlkV04wYjNJc0lFNUJUVVVzSUc1bGVIUXBPMXh1SUNCMllYSWdaMlYwVFdWMGFHOWtJRDBnWm5WdVkzUnBiMjRvYTJsdVpDbDdYRzRnSUNBZ2FXWW9JVUpWUjBkWklDWW1JR3RwYm1RZ2FXNGdjSEp2ZEc4cGNtVjBkWEp1SUhCeWIzUnZXMnRwYm1SZE8xeHVJQ0FnSUhOM2FYUmphQ2hyYVc1a0tYdGNiaUFnSUNBZ0lHTmhjMlVnUzBWWlV6b2djbVYwZFhKdUlHWjFibU4wYVc5dUlHdGxlWE1vS1hzZ2NtVjBkWEp1SUc1bGR5QkRiMjV6ZEhKMVkzUnZjaWgwYUdsekxDQnJhVzVrS1RzZ2ZUdGNiaUFnSUNBZ0lHTmhjMlVnVmtGTVZVVlRPaUJ5WlhSMWNtNGdablZ1WTNScGIyNGdkbUZzZFdWektDbDdJSEpsZEhWeWJpQnVaWGNnUTI5dWMzUnlkV04wYjNJb2RHaHBjeXdnYTJsdVpDazdJSDA3WEc0Z0lDQWdmU0J5WlhSMWNtNGdablZ1WTNScGIyNGdaVzUwY21sbGN5Z3BleUJ5WlhSMWNtNGdibVYzSUVOdmJuTjBjblZqZEc5eUtIUm9hWE1zSUd0cGJtUXBPeUI5TzF4dUlDQjlPMXh1SUNCMllYSWdWRUZISUNBZ0lDQWdJQ0E5SUU1QlRVVWdLeUFuSUVsMFpYSmhkRzl5SjF4dUlDQWdJQ3dnUkVWR1gxWkJURlZGVXlBOUlFUkZSa0ZWVEZRZ1BUMGdWa0ZNVlVWVFhHNGdJQ0FnTENCV1FVeFZSVk5mUWxWSElEMGdabUZzYzJWY2JpQWdJQ0FzSUhCeWIzUnZJQ0FnSUNBZ1BTQkNZWE5sTG5CeWIzUnZkSGx3WlZ4dUlDQWdJQ3dnSkc1aGRHbDJaU0FnSUNBOUlIQnliM1J2VzBsVVJWSkJWRTlTWFNCOGZDQndjbTkwYjF0R1JsOUpWRVZTUVZSUFVsMGdmSHdnUkVWR1FWVk1WQ0FtSmlCd2NtOTBiMXRFUlVaQlZVeFVYVnh1SUNBZ0lDd2dKR1JsWm1GMWJIUWdJQ0E5SUNSdVlYUnBkbVVnZkh3Z1oyVjBUV1YwYUc5a0tFUkZSa0ZWVEZRcFhHNGdJQ0FnTENBa1pXNTBjbWxsY3lBZ0lEMGdSRVZHUVZWTVZDQS9JQ0ZFUlVaZlZrRk1WVVZUSUQ4Z0pHUmxabUYxYkhRZ09pQm5aWFJOWlhSb2IyUW9KMlZ1ZEhKcFpYTW5LU0E2SUhWdVpHVm1hVzVsWkZ4dUlDQWdJQ3dnSkdGdWVVNWhkR2wyWlNBOUlFNUJUVVVnUFQwZ0owRnljbUY1SnlBL0lIQnliM1J2TG1WdWRISnBaWE1nZkh3Z0pHNWhkR2wyWlNBNklDUnVZWFJwZG1WY2JpQWdJQ0FzSUcxbGRHaHZaSE1zSUd0bGVTd2dTWFJsY21GMGIzSlFjbTkwYjNSNWNHVTdYRzRnSUM4dklFWnBlQ0J1WVhScGRtVmNiaUFnYVdZb0pHRnVlVTVoZEdsMlpTbDdYRzRnSUNBZ1NYUmxjbUYwYjNKUWNtOTBiM1I1Y0dVZ1BTQm5aWFJRY205MGIzUjVjR1ZQWmlna1lXNTVUbUYwYVhabExtTmhiR3dvYm1WM0lFSmhjMlVwS1R0Y2JpQWdJQ0JwWmloSmRHVnlZWFJ2Y2xCeWIzUnZkSGx3WlNBaFBUMGdUMkpxWldOMExuQnliM1J2ZEhsd1pTbDdYRzRnSUNBZ0lDQXZMeUJUWlhRZ1FFQjBiMU4wY21sdVoxUmhaeUIwYnlCdVlYUnBkbVVnYVhSbGNtRjBiM0p6WEc0Z0lDQWdJQ0J6WlhSVWIxTjBjbWx1WjFSaFp5aEpkR1Z5WVhSdmNsQnliM1J2ZEhsd1pTd2dWRUZITENCMGNuVmxLVHRjYmlBZ0lDQWdJQzh2SUdacGVDQm1iM0lnYzI5dFpTQnZiR1FnWlc1bmFXNWxjMXh1SUNBZ0lDQWdhV1lvSVV4SlFsSkJVbGtnSmlZZ0lXaGhjeWhKZEdWeVlYUnZjbEJ5YjNSdmRIbHdaU3dnU1ZSRlVrRlVUMUlwS1docFpHVW9TWFJsY21GMGIzSlFjbTkwYjNSNWNHVXNJRWxVUlZKQlZFOVNMQ0J5WlhSMWNtNVVhR2x6S1R0Y2JpQWdJQ0I5WEc0Z0lIMWNiaUFnTHk4Z1ptbDRJRUZ5Y21GNUkzdDJZV3gxWlhNc0lFQkFhWFJsY21GMGIzSjlMbTVoYldVZ2FXNGdWamdnTHlCR1JseHVJQ0JwWmloRVJVWmZWa0ZNVlVWVElDWW1JQ1J1WVhScGRtVWdKaVlnSkc1aGRHbDJaUzV1WVcxbElDRTlQU0JXUVV4VlJWTXBlMXh1SUNBZ0lGWkJURlZGVTE5Q1ZVY2dQU0IwY25WbE8xeHVJQ0FnSUNSa1pXWmhkV3gwSUQwZ1puVnVZM1JwYjI0Z2RtRnNkV1Z6S0NsN0lISmxkSFZ5YmlBa2JtRjBhWFpsTG1OaGJHd29kR2hwY3lrN0lIMDdYRzRnSUgxY2JpQWdMeThnUkdWbWFXNWxJR2wwWlhKaGRHOXlYRzRnSUdsbUtDZ2hURWxDVWtGU1dTQjhmQ0JHVDFKRFJVUXBJQ1ltSUNoQ1ZVZEhXU0I4ZkNCV1FVeFZSVk5mUWxWSElIeDhJQ0Z3Y205MGIxdEpWRVZTUVZSUFVsMHBLWHRjYmlBZ0lDQm9hV1JsS0hCeWIzUnZMQ0JKVkVWU1FWUlBVaXdnSkdSbFptRjFiSFFwTzF4dUlDQjlYRzRnSUM4dklGQnNkV2NnWm05eUlHeHBZbkpoY25sY2JpQWdTWFJsY21GMGIzSnpXMDVCVFVWZElEMGdKR1JsWm1GMWJIUTdYRzRnSUVsMFpYSmhkRzl5YzF0VVFVZGRJQ0E5SUhKbGRIVnlibFJvYVhNN1hHNGdJR2xtS0VSRlJrRlZURlFwZTF4dUlDQWdJRzFsZEdodlpITWdQU0I3WEc0Z0lDQWdJQ0IyWVd4MVpYTTZJQ0JFUlVaZlZrRk1WVVZUSUQ4Z0pHUmxabUYxYkhRZ09pQm5aWFJOWlhSb2IyUW9Wa0ZNVlVWVEtTeGNiaUFnSUNBZ0lHdGxlWE02SUNBZ0lFbFRYMU5GVkNBZ0lDQWdQeUFrWkdWbVlYVnNkQ0E2SUdkbGRFMWxkR2h2WkNoTFJWbFRLU3hjYmlBZ0lDQWdJR1Z1ZEhKcFpYTTZJQ1JsYm5SeWFXVnpYRzRnSUNBZ2ZUdGNiaUFnSUNCcFppaEdUMUpEUlVRcFptOXlLR3RsZVNCcGJpQnRaWFJvYjJSektYdGNiaUFnSUNBZ0lHbG1LQ0VvYTJWNUlHbHVJSEJ5YjNSdktTbHlaV1JsWm1sdVpTaHdjbTkwYnl3Z2EyVjVMQ0J0WlhSb2IyUnpXMnRsZVYwcE8xeHVJQ0FnSUgwZ1pXeHpaU0FrWlhod2IzSjBLQ1JsZUhCdmNuUXVVQ0FySUNSbGVIQnZjblF1UmlBcUlDaENWVWRIV1NCOGZDQldRVXhWUlZOZlFsVkhLU3dnVGtGTlJTd2diV1YwYUc5a2N5azdYRzRnSUgxY2JpQWdjbVYwZFhKdUlHMWxkR2h2WkhNN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTFrWldacGJtVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRE01WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0p0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSHNnWENKa1pXWmhkV3gwWENJNklISmxjWFZwY21Vb1hDSmpiM0psTFdwekwyeHBZbkpoY25rdlptNHZhbk52Ymk5emRISnBibWRwWm5sY0lpa3NJRjlmWlhOTmIyUjFiR1U2SUhSeWRXVWdmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5amIzSmxMV3B6TDJwemIyNHZjM1J5YVc1bmFXWjVMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0EwTUZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJRFlpTENKbGVIQnZjblJ6TG1ZZ1BTQjdmUzV3Y205d1pYSjBlVWx6Ulc1MWJXVnlZV0pzWlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMjlpYW1WamRDMXdhV1V1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURReFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015SXNJbTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdjbVZ4ZFdseVpTZ25MaTlmWjJ4dlltRnNKeWt1Wkc5amRXMWxiblFnSmlZZ1pHOWpkVzFsYm5RdVpHOWpkVzFsYm5SRmJHVnRaVzUwTzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZhSFJ0YkM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05ESmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNJc0lpOHZJREU1TGpFdU1pNDVJQzhnTVRVdU1pNHpMaklnVDJKcVpXTjBMbWRsZEZCeWIzUnZkSGx3WlU5bUtFOHBYRzUyWVhJZ2FHRnpJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5b1lYTW5LVnh1SUNBc0lIUnZUMkpxWldOMElDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmRHOHRiMkpxWldOMEp5bGNiaUFnTENCSlJWOVFVazlVVHlBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDNOb1lYSmxaQzFyWlhrbktTZ25TVVZmVUZKUFZFOG5LVnh1SUNBc0lFOWlhbVZqZEZCeWIzUnZJRDBnVDJKcVpXTjBMbkJ5YjNSdmRIbHdaVHRjYmx4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCUFltcGxZM1F1WjJWMFVISnZkRzkwZVhCbFQyWWdmSHdnWm5WdVkzUnBiMjRvVHlsN1hHNGdJRThnUFNCMGIwOWlhbVZqZENoUEtUdGNiaUFnYVdZb2FHRnpLRThzSUVsRlgxQlNUMVJQS1NseVpYUjFjbTRnVDF0SlJWOVFVazlVVDEwN1hHNGdJR2xtS0hSNWNHVnZaaUJQTG1OdmJuTjBjblZqZEc5eUlEMDlJQ2RtZFc1amRHbHZiaWNnSmlZZ1R5QnBibk4wWVc1alpXOW1JRTh1WTI5dWMzUnlkV04wYjNJcGUxeHVJQ0FnSUhKbGRIVnliaUJQTG1OdmJuTjBjblZqZEc5eUxuQnliM1J2ZEhsd1pUdGNiaUFnZlNCeVpYUjFjbTRnVHlCcGJuTjBZVzVqWlc5bUlFOWlhbVZqZENBL0lFOWlhbVZqZEZCeWIzUnZJRG9nYm5Wc2JEdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXZZbXBsWTNRdFozQnZMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0EwTTF4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJaXdpZG1GeUlHaGhjeUFnSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyaGhjeWNwWEc0Z0lDd2dkRzlKVDJKcVpXTjBJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkRzh0YVc5aWFtVmpkQ2NwWEc0Z0lDd2dZWEp5WVhsSmJtUmxlRTltSUQwZ2NtVnhkV2x5WlNnbkxpOWZZWEp5WVhrdGFXNWpiSFZrWlhNbktTaG1ZV3h6WlNsY2JpQWdMQ0JKUlY5UVVrOVVUeUFnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl6YUdGeVpXUXRhMlY1Snlrb0owbEZYMUJTVDFSUEp5azdYRzVjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYjJKcVpXTjBMQ0J1WVcxbGN5bDdYRzRnSUhaaGNpQlBJQ0FnSUNBZ1BTQjBiMGxQWW1wbFkzUW9iMkpxWldOMEtWeHVJQ0FnSUN3Z2FTQWdJQ0FnSUQwZ01GeHVJQ0FnSUN3Z2NtVnpkV3gwSUQwZ1cxMWNiaUFnSUNBc0lHdGxlVHRjYmlBZ1ptOXlLR3RsZVNCcGJpQlBLV2xtS0d0bGVTQWhQU0JKUlY5UVVrOVVUeWxvWVhNb1R5d2dhMlY1S1NBbUppQnlaWE4xYkhRdWNIVnphQ2hyWlhrcE8xeHVJQ0F2THlCRWIyNG5kQ0JsYm5WdElHSjFaeUFtSUdocFpHUmxiaUJyWlhselhHNGdJSGRvYVd4bEtHNWhiV1Z6TG14bGJtZDBhQ0ErSUdrcGFXWW9hR0Z6S0U4c0lHdGxlU0E5SUc1aGJXVnpXMmtySzEwcEtYdGNiaUFnSUNCK1lYSnlZWGxKYm1SbGVFOW1LSEpsYzNWc2RDd2dhMlY1S1NCOGZDQnlaWE4xYkhRdWNIVnphQ2hyWlhrcE8xeHVJQ0I5WEc0Z0lISmxkSFZ5YmlCeVpYTjFiSFE3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMV3RsZVhNdGFXNTBaWEp1WVd3dWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEUTBYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVaUxDSXZMeUJ0YjNOMElFOWlhbVZqZENCdFpYUm9iMlJ6SUdKNUlFVlROaUJ6YUc5MWJHUWdZV05qWlhCMElIQnlhVzFwZEdsMlpYTmNiblpoY2lBa1pYaHdiM0owSUQwZ2NtVnhkV2x5WlNnbkxpOWZaWGh3YjNKMEp5bGNiaUFnTENCamIzSmxJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZZMjl5WlNjcFhHNGdJQ3dnWm1GcGJITWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyWmhhV3h6SnlrN1hHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlHWjFibU4wYVc5dUtFdEZXU3dnWlhobFl5bDdYRzRnSUhaaGNpQm1iaUFnUFNBb1kyOXlaUzVQWW1wbFkzUWdmSHdnZTMwcFcwdEZXVjBnZkh3Z1QySnFaV04wVzB0RldWMWNiaUFnSUNBc0lHVjRjQ0E5SUh0OU8xeHVJQ0JsZUhCYlMwVlpYU0E5SUdWNFpXTW9abTRwTzF4dUlDQWtaWGh3YjNKMEtDUmxlSEJ2Y25RdVV5QXJJQ1JsZUhCdmNuUXVSaUFxSUdaaGFXeHpLR1oxYm1OMGFXOXVLQ2w3SUdadUtERXBPeUI5S1N3Z0owOWlhbVZqZENjc0lHVjRjQ2s3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYjJKcVpXTjBMWE5oY0M1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05EVmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNJc0ltMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2NtVnhkV2x5WlNnbkxpOWZhR2xrWlNjcE8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmY21Wa1pXWnBibVV1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURRMlhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVpTENJdkx5QTNMakV1TVRVZ1ZHOU1aVzVuZEdoY2JuWmhjaUIwYjBsdWRHVm5aWElnUFNCeVpYRjFhWEpsS0NjdUwxOTBieTFwYm5SbFoyVnlKeWxjYmlBZ0xDQnRhVzRnSUNBZ0lDQWdQU0JOWVhSb0xtMXBianRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvYVhRcGUxeHVJQ0J5WlhSMWNtNGdhWFFnUGlBd0lEOGdiV2x1S0hSdlNXNTBaV2RsY2locGRDa3NJREI0TVdabVptWm1abVptWm1abVptWXBJRG9nTURzZ0x5OGdjRzkzS0RJc0lEVXpLU0F0SURFZ1BUMGdPVEF3TnpFNU9USTFORGMwTURrNU1WeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgzUnZMV3hsYm1kMGFDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdORGRjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SURRZ05TSXNJblpoY2lCbmJHOWlZV3dnSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyZHNiMkpoYkNjcFhHNGdJQ3dnWTI5eVpTQWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5amIzSmxKeWxjYmlBZ0xDQk1TVUpTUVZKWklDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMnhwWW5KaGNua25LVnh1SUNBc0lIZHJjMFY0ZENBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkMnR6TFdWNGRDY3BYRzRnSUN3Z1pHVm1hVzVsVUhKdmNHVnlkSGtnUFNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdFpIQW5LUzVtTzF4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmlodVlXMWxLWHRjYmlBZ2RtRnlJQ1JUZVcxaWIyd2dQU0JqYjNKbExsTjViV0p2YkNCOGZDQW9ZMjl5WlM1VGVXMWliMndnUFNCTVNVSlNRVkpaSUQ4Z2UzMGdPaUJuYkc5aVlXd3VVM2x0WW05c0lIeDhJSHQ5S1R0Y2JpQWdhV1lvYm1GdFpTNWphR0Z5UVhRb01Da2dJVDBnSjE4bklDWW1JQ0VvYm1GdFpTQnBiaUFrVTNsdFltOXNLU2xrWldacGJtVlFjbTl3WlhKMGVTZ2tVM2x0WW05c0xDQnVZVzFsTENCN2RtRnNkV1U2SUhkcmMwVjRkQzVtS0c1aGJXVXBmU2s3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmZDJ0ekxXUmxabWx1WlM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05EaGNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJaXdpWlhod2IzSjBjeTVtSUQwZ2NtVnhkV2x5WlNnbkxpOWZkMnR6SnlrN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTkzYTNNdFpYaDBMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0EwT1Z4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSW5kWE5sSUhOMGNtbGpkQ2M3WEc1MllYSWdKR0YwSUNBOUlISmxjWFZwY21Vb0p5NHZYM04wY21sdVp5MWhkQ2NwS0hSeWRXVXBPMXh1WEc0dkx5QXlNUzR4TGpNdU1qY2dVM1J5YVc1bkxuQnliM1J2ZEhsd1pWdEFRR2wwWlhKaGRHOXlYU2dwWEc1eVpYRjFhWEpsS0NjdUwxOXBkR1Z5TFdSbFptbHVaU2NwS0ZOMGNtbHVaeXdnSjFOMGNtbHVaeWNzSUdaMWJtTjBhVzl1S0dsMFpYSmhkR1ZrS1h0Y2JpQWdkR2hwY3k1ZmRDQTlJRk4wY21sdVp5aHBkR1Z5WVhSbFpDazdJQzh2SUhSaGNtZGxkRnh1SUNCMGFHbHpMbDlwSUQwZ01Ec2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0x5OGdibVY0ZENCcGJtUmxlRnh1THk4Z01qRXVNUzQxTGpJdU1TQWxVM1J5YVc1blNYUmxjbUYwYjNKUWNtOTBiM1I1Y0dVbExtNWxlSFFvS1Z4dWZTd2dablZ1WTNScGIyNG9LWHRjYmlBZ2RtRnlJRThnSUNBZ0lEMGdkR2hwY3k1ZmRGeHVJQ0FnSUN3Z2FXNWtaWGdnUFNCMGFHbHpMbDlwWEc0Z0lDQWdMQ0J3YjJsdWREdGNiaUFnYVdZb2FXNWtaWGdnUGowZ1R5NXNaVzVuZEdncGNtVjBkWEp1SUh0MllXeDFaVG9nZFc1a1pXWnBibVZrTENCa2IyNWxPaUIwY25WbGZUdGNiaUFnY0c5cGJuUWdQU0FrWVhRb1R5d2dhVzVrWlhncE8xeHVJQ0IwYUdsekxsOXBJQ3M5SUhCdmFXNTBMbXhsYm1kMGFEdGNiaUFnY21WMGRYSnVJSHQyWVd4MVpUb2djRzlwYm5Rc0lHUnZibVU2SUdaaGJITmxmVHRjYm4wcE8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlsY3pZdWMzUnlhVzVuTG1sMFpYSmhkRzl5TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBMU1GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWNtVnhkV2x5WlNnbkxpOWxjell1WVhKeVlYa3VhWFJsY21GMGIzSW5LVHRjYm5aaGNpQm5iRzlpWVd3Z0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZaMnh2WW1Gc0p5bGNiaUFnTENCb2FXUmxJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFHbGtaU2NwWEc0Z0lDd2dTWFJsY21GMGIzSnpJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMmwwWlhKaGRHOXljeWNwWEc0Z0lDd2dWRTlmVTFSU1NVNUhYMVJCUnlBOUlISmxjWFZwY21Vb0p5NHZYM2RyY3ljcEtDZDBiMU4wY21sdVoxUmhaeWNwTzF4dVhHNW1iM0lvZG1GeUlHTnZiR3hsWTNScGIyNXpJRDBnV3lkT2IyUmxUR2x6ZENjc0lDZEVUMDFVYjJ0bGJreHBjM1FuTENBblRXVmthV0ZNYVhOMEp5d2dKMU4wZVd4bFUyaGxaWFJNYVhOMEp5d2dKME5UVTFKMWJHVk1hWE4wSjEwc0lHa2dQU0F3T3lCcElEd2dOVHNnYVNzcktYdGNiaUFnZG1GeUlFNUJUVVVnSUNBZ0lDQWdQU0JqYjJ4c1pXTjBhVzl1YzF0cFhWeHVJQ0FnSUN3Z1EyOXNiR1ZqZEdsdmJpQTlJR2RzYjJKaGJGdE9RVTFGWFZ4dUlDQWdJQ3dnY0hKdmRHOGdJQ0FnSUNBOUlFTnZiR3hsWTNScGIyNGdKaVlnUTI5c2JHVmpkR2x2Ymk1d2NtOTBiM1I1Y0dVN1hHNGdJR2xtS0hCeWIzUnZJQ1ltSUNGd2NtOTBiMXRVVDE5VFZGSkpUa2RmVkVGSFhTbG9hV1JsS0hCeWIzUnZMQ0JVVDE5VFZGSkpUa2RmVkVGSExDQk9RVTFGS1R0Y2JpQWdTWFJsY21GMGIzSnpXMDVCVFVWZElEMGdTWFJsY21GMGIzSnpMa0Z5Y21GNU8xeHVmVnh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5M1pXSXVaRzl0TG1sMFpYSmhZbXhsTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBMU1WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWRtRnlJR052Y21VZ0lEMGdjbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5ZlkyOXlaU2NwWEc0Z0lDd2dKRXBUVDA0Z1BTQmpiM0psTGtwVFQwNGdmSHdnS0dOdmNtVXVTbE5QVGlBOUlIdHpkSEpwYm1kcFpuazZJRXBUVDA0dWMzUnlhVzVuYVdaNWZTazdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVJSE4wY21sdVoybG1lU2hwZENsN0lDOHZJR1Z6YkdsdWRDMWthWE5oWW14bExXeHBibVVnYm04dGRXNTFjMlZrTFhaaGNuTmNiaUFnY21WMGRYSnVJQ1JLVTA5T0xuTjBjbWx1WjJsbWVTNWhjSEJzZVNna1NsTlBUaXdnWVhKbmRXMWxiblJ6S1R0Y2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5bWJpOXFjMjl1TDNOMGNtbHVaMmxtZVM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05UTmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNBMklpd2lMeThnWjJWMGRHbHVaeUIwWVdjZ1puSnZiU0F4T1M0eExqTXVOaUJQWW1wbFkzUXVjSEp2ZEc5MGVYQmxMblJ2VTNSeWFXNW5LQ2xjYm5aaGNpQmpiMllnUFNCeVpYRjFhWEpsS0NjdUwxOWpiMlluS1Z4dUlDQXNJRlJCUnlBOUlISmxjWFZwY21Vb0p5NHZYM2RyY3ljcEtDZDBiMU4wY21sdVoxUmhaeWNwWEc0Z0lDOHZJRVZUTXlCM2NtOXVaeUJvWlhKbFhHNGdJQ3dnUVZKSElEMGdZMjltS0daMWJtTjBhVzl1S0NsN0lISmxkSFZ5YmlCaGNtZDFiV1Z1ZEhNN0lIMG9LU2tnUFQwZ0owRnlaM1Z0Wlc1MGN5YzdYRzVjYmk4dklHWmhiR3hpWVdOcklHWnZjaUJKUlRFeElGTmpjbWx3ZENCQlkyTmxjM01nUkdWdWFXVmtJR1Z5Y205eVhHNTJZWElnZEhKNVIyVjBJRDBnWm5WdVkzUnBiMjRvYVhRc0lHdGxlU2w3WEc0Z0lIUnllU0I3WEc0Z0lDQWdjbVYwZFhKdUlHbDBXMnRsZVYwN1hHNGdJSDBnWTJGMFkyZ29aU2w3SUM4cUlHVnRjSFI1SUNvdklIMWNibjA3WEc1Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCMllYSWdUeXdnVkN3Z1FqdGNiaUFnY21WMGRYSnVJR2wwSUQwOVBTQjFibVJsWm1sdVpXUWdQeUFuVlc1a1pXWnBibVZrSnlBNklHbDBJRDA5UFNCdWRXeHNJRDhnSjA1MWJHd25YRzRnSUNBZ0x5OGdRRUIwYjFOMGNtbHVaMVJoWnlCallYTmxYRzRnSUNBZ09pQjBlWEJsYjJZZ0tGUWdQU0IwY25sSFpYUW9UeUE5SUU5aWFtVmpkQ2hwZENrc0lGUkJSeWtwSUQwOUlDZHpkSEpwYm1jbklEOGdWRnh1SUNBZ0lDOHZJR0oxYVd4MGFXNVVZV2NnWTJGelpWeHVJQ0FnSURvZ1FWSkhJRDhnWTI5bUtFOHBYRzRnSUNBZ0x5OGdSVk16SUdGeVozVnRaVzUwY3lCbVlXeHNZbUZqYTF4dUlDQWdJRG9nS0VJZ1BTQmpiMllvVHlrcElEMDlJQ2RQWW1wbFkzUW5JQ1ltSUhSNWNHVnZaaUJQTG1OaGJHeGxaU0E5UFNBblpuVnVZM1JwYjI0bklEOGdKMEZ5WjNWdFpXNTBjeWNnT2lCQ08xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyTnNZWE56YjJZdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEVTFYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElEUWdOU0lzSWk4dklHWmhiR3hpWVdOcklHWnZjaUJ1YjI0dFlYSnlZWGt0YkdsclpTQkZVek1nWVc1a0lHNXZiaTFsYm5WdFpYSmhZbXhsSUc5c1pDQldPQ0J6ZEhKcGJtZHpYRzUyWVhJZ1kyOW1JRDBnY21WeGRXbHlaU2duTGk5ZlkyOW1KeWs3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUU5aWFtVmpkQ2duZWljcExuQnliM0JsY25SNVNYTkZiblZ0WlhKaFlteGxLREFwSUQ4Z1QySnFaV04wSURvZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCeVpYUjFjbTRnWTI5bUtHbDBLU0E5UFNBblUzUnlhVzVuSnlBL0lHbDBMbk53YkdsMEtDY25LU0E2SUU5aWFtVmpkQ2hwZENrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFXOWlhbVZqZEM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05UWmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNJc0luWmhjaUJ3U1VVZ0lDQWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzF3YVdVbktWeHVJQ0FzSUdOeVpXRjBaVVJsYzJNZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmNISnZjR1Z5ZEhrdFpHVnpZeWNwWEc0Z0lDd2dkRzlKVDJKcVpXTjBJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkwYnkxcGIySnFaV04wSnlsY2JpQWdMQ0IwYjFCeWFXMXBkR2wyWlNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDNSdkxYQnlhVzFwZEdsMlpTY3BYRzRnSUN3Z2FHRnpJQ0FnSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOW9ZWE1uS1Z4dUlDQXNJRWxGT0Y5RVQwMWZSRVZHU1U1RklEMGdjbVZ4ZFdseVpTZ25MaTlmYVdVNExXUnZiUzFrWldacGJtVW5LVnh1SUNBc0lHZFBVRVFnSUNBZ0lDQWdJQ0FnSUQwZ1QySnFaV04wTG1kbGRFOTNibEJ5YjNCbGNuUjVSR1Z6WTNKcGNIUnZjanRjYmx4dVpYaHdiM0owY3k1bUlEMGdjbVZ4ZFdseVpTZ25MaTlmWkdWelkzSnBjSFJ2Y25NbktTQS9JR2RQVUVRZ09pQm1kVzVqZEdsdmJpQm5aWFJQZDI1UWNtOXdaWEowZVVSbGMyTnlhWEIwYjNJb1R5d2dVQ2w3WEc0Z0lFOGdQU0IwYjBsUFltcGxZM1FvVHlrN1hHNGdJRkFnUFNCMGIxQnlhVzFwZEdsMlpTaFFMQ0IwY25WbEtUdGNiaUFnYVdZb1NVVTRYMFJQVFY5RVJVWkpUa1VwZEhKNUlIdGNiaUFnSUNCeVpYUjFjbTRnWjA5UVJDaFBMQ0JRS1R0Y2JpQWdmU0JqWVhSamFDaGxLWHNnTHlvZ1pXMXdkSGtnS2k4Z2ZWeHVJQ0JwWmlob1lYTW9UeXdnVUNrcGNtVjBkWEp1SUdOeVpXRjBaVVJsYzJNb0lYQkpSUzVtTG1OaGJHd29UeXdnVUNrc0lFOWJVRjBwTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDI5aWFtVmpkQzFuYjNCa0xtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTFOMXh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1pTENKbGVIQnZjblJ6TG1ZZ1BTQlBZbXBsWTNRdVoyVjBUM2R1VUhKdmNHVnlkSGxUZVcxaWIyeHpPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFdkdmNITXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRFU0WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0lsd2lkWE5sSUhOMGNtbGpkRndpTzF4dVhHNWxlSEJ2Y25SekxsOWZaWE5OYjJSMWJHVWdQU0IwY25WbE8xeHVYRzUyWVhJZ1gybDBaWEpoZEc5eUlEMGdjbVZ4ZFdseVpTaGNJaTR1TDJOdmNtVXRhbk12YzNsdFltOXNMMmwwWlhKaGRHOXlYQ0lwTzF4dVhHNTJZWElnWDJsMFpYSmhkRzl5TWlBOUlGOXBiblJsY205d1VtVnhkV2x5WlVSbFptRjFiSFFvWDJsMFpYSmhkRzl5S1R0Y2JseHVkbUZ5SUY5emVXMWliMndnUFNCeVpYRjFhWEpsS0Z3aUxpNHZZMjl5WlMxcWN5OXplVzFpYjJ4Y0lpazdYRzVjYm5aaGNpQmZjM2x0WW05c01pQTlJRjlwYm5SbGNtOXdVbVZ4ZFdseVpVUmxabUYxYkhRb1gzTjViV0p2YkNrN1hHNWNiblpoY2lCZmRIbHdaVzltSUQwZ2RIbHdaVzltSUY5emVXMWliMnd5TG1SbFptRjFiSFFnUFQwOUlGd2lablZ1WTNScGIyNWNJaUFtSmlCMGVYQmxiMllnWDJsMFpYSmhkRzl5TWk1a1pXWmhkV3gwSUQwOVBTQmNJbk41YldKdmJGd2lJRDhnWm5WdVkzUnBiMjRnS0c5aWFpa2dleUJ5WlhSMWNtNGdkSGx3Wlc5bUlHOWlhanNnZlNBNklHWjFibU4wYVc5dUlDaHZZbW9wSUhzZ2NtVjBkWEp1SUc5aWFpQW1KaUIwZVhCbGIyWWdYM041YldKdmJESXVaR1ZtWVhWc2RDQTlQVDBnWENKbWRXNWpkR2x2Ymx3aUlDWW1JRzlpYWk1amIyNXpkSEoxWTNSdmNpQTlQVDBnWDNONWJXSnZiREl1WkdWbVlYVnNkQ0FtSmlCdlltb2dJVDA5SUY5emVXMWliMnd5TG1SbFptRjFiSFF1Y0hKdmRHOTBlWEJsSUQ4Z1hDSnplVzFpYjJ4Y0lpQTZJSFI1Y0dWdlppQnZZbW83SUgwN1hHNWNibVoxYm1OMGFXOXVJRjlwYm5SbGNtOXdVbVZ4ZFdseVpVUmxabUYxYkhRb2IySnFLU0I3SUhKbGRIVnliaUJ2WW1vZ0ppWWdiMkpxTGw5ZlpYTk5iMlIxYkdVZ1B5QnZZbW9nT2lCN0lHUmxabUYxYkhRNklHOWlhaUI5T3lCOVhHNWNibVY0Y0c5eWRITXVaR1ZtWVhWc2RDQTlJSFI1Y0dWdlppQmZjM2x0WW05c01pNWtaV1poZFd4MElEMDlQU0JjSW1aMWJtTjBhVzl1WENJZ0ppWWdYM1I1Y0dWdlppaGZhWFJsY21GMGIzSXlMbVJsWm1GMWJIUXBJRDA5UFNCY0luTjViV0p2YkZ3aUlEOGdablZ1WTNScGIyNGdLRzlpYWlrZ2UxeHVJQ0J5WlhSMWNtNGdkSGx3Wlc5bUlHOWlhaUE5UFQwZ1hDSjFibVJsWm1sdVpXUmNJaUEvSUZ3aWRXNWtaV1pwYm1Wa1hDSWdPaUJmZEhsd1pXOW1LRzlpYWlrN1hHNTlJRG9nWm5WdVkzUnBiMjRnS0c5aWFpa2dlMXh1SUNCeVpYUjFjbTRnYjJKcUlDWW1JSFI1Y0dWdlppQmZjM2x0WW05c01pNWtaV1poZFd4MElEMDlQU0JjSW1aMWJtTjBhVzl1WENJZ0ppWWdiMkpxTG1OdmJuTjBjblZqZEc5eUlEMDlQU0JmYzNsdFltOXNNaTVrWldaaGRXeDBJQ1ltSUc5aWFpQWhQVDBnWDNONWJXSnZiREl1WkdWbVlYVnNkQzV3Y205MGIzUjVjR1VnUHlCY0luTjViV0p2YkZ3aUlEb2dkSGx3Wlc5bUlHOWlhaUE5UFQwZ1hDSjFibVJsWm1sdVpXUmNJaUEvSUZ3aWRXNWtaV1pwYm1Wa1hDSWdPaUJmZEhsd1pXOW1LRzlpYWlrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWlZV0psYkMxeWRXNTBhVzFsTDJobGJIQmxjbk12ZEhsd1pXOW1MbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0ExT1Z4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSnRiMlIxYkdVdVpYaHdiM0owY3lBOUlHWjFibU4wYVc5dUtDbDdJQzhxSUdWdGNIUjVJQ292SUgwN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTloWkdRdGRHOHRkVzV6WTI5d1lXSnNaWE11YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURZd1hHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015QTBJRFVpTENJdkx5Qm1ZV3h6WlNBdFBpQkJjbkpoZVNOcGJtUmxlRTltWEc0dkx5QjBjblZsSUNBdFBpQkJjbkpoZVNOcGJtTnNkV1JsYzF4dWRtRnlJSFJ2U1U5aWFtVmpkQ0E5SUhKbGNYVnBjbVVvSnk0dlgzUnZMV2x2WW1wbFkzUW5LVnh1SUNBc0lIUnZUR1Z1WjNSb0lDQTlJSEpsY1hWcGNtVW9KeTR2WDNSdkxXeGxibWQwYUNjcFhHNGdJQ3dnZEc5SmJtUmxlQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkRzh0YVc1a1pYZ25LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRvU1ZOZlNVNURURlZFUlZNcGUxeHVJQ0J5WlhSMWNtNGdablZ1WTNScGIyNG9KSFJvYVhNc0lHVnNMQ0JtY205dFNXNWtaWGdwZTF4dUlDQWdJSFpoY2lCUElDQWdJQ0FnUFNCMGIwbFBZbXBsWTNRb0pIUm9hWE1wWEc0Z0lDQWdJQ0FzSUd4bGJtZDBhQ0E5SUhSdlRHVnVaM1JvS0U4dWJHVnVaM1JvS1Z4dUlDQWdJQ0FnTENCcGJtUmxlQ0FnUFNCMGIwbHVaR1Y0S0daeWIyMUpibVJsZUN3Z2JHVnVaM1JvS1Z4dUlDQWdJQ0FnTENCMllXeDFaVHRjYmlBZ0lDQXZMeUJCY25KaGVTTnBibU5zZFdSbGN5QjFjMlZ6SUZOaGJXVldZV3gxWlZwbGNtOGdaWEYxWVd4cGRIa2dZV3huYjNKcGRHaHRYRzRnSUNBZ2FXWW9TVk5mU1U1RFRGVkVSVk1nSmlZZ1pXd2dJVDBnWld3cGQyaHBiR1VvYkdWdVozUm9JRDRnYVc1a1pYZ3BlMXh1SUNBZ0lDQWdkbUZzZFdVZ1BTQlBXMmx1WkdWNEt5dGRPMXh1SUNBZ0lDQWdhV1lvZG1Gc2RXVWdJVDBnZG1Gc2RXVXBjbVYwZFhKdUlIUnlkV1U3WEc0Z0lDQWdMeThnUVhKeVlYa2pkRzlKYm1SbGVDQnBaMjV2Y21WeklHaHZiR1Z6TENCQmNuSmhlU05wYm1Oc2RXUmxjeUF0SUc1dmRGeHVJQ0FnSUgwZ1pXeHpaU0JtYjNJb08yeGxibWQwYUNBK0lHbHVaR1Y0T3lCcGJtUmxlQ3NyS1dsbUtFbFRYMGxPUTB4VlJFVlRJSHg4SUdsdVpHVjRJR2x1SUU4cGUxeHVJQ0FnSUNBZ2FXWW9UMXRwYm1SbGVGMGdQVDA5SUdWc0tYSmxkSFZ5YmlCSlUxOUpUa05NVlVSRlV5QjhmQ0JwYm1SbGVDQjhmQ0F3TzF4dUlDQWdJSDBnY21WMGRYSnVJQ0ZKVTE5SlRrTk1WVVJGVXlBbUppQXRNVHRjYmlBZ2ZUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOWhjbkpoZVMxcGJtTnNkV1JsY3k1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05qRmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ01pQXpJRFFnTlNJc0lpZDFjMlVnYzNSeWFXTjBKenRjYm5aaGNpQmpjbVZoZEdVZ0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMWpjbVZoZEdVbktWeHVJQ0FzSUdSbGMyTnlhWEIwYjNJZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmNISnZjR1Z5ZEhrdFpHVnpZeWNwWEc0Z0lDd2djMlYwVkc5VGRISnBibWRVWVdjZ1BTQnlaWEYxYVhKbEtDY3VMMTl6WlhRdGRHOHRjM1J5YVc1bkxYUmhaeWNwWEc0Z0lDd2dTWFJsY21GMGIzSlFjbTkwYjNSNWNHVWdQU0I3ZlR0Y2JseHVMeThnTWpVdU1TNHlMakV1TVNBbFNYUmxjbUYwYjNKUWNtOTBiM1I1Y0dVbFcwQkFhWFJsY21GMGIzSmRLQ2xjYm5KbGNYVnBjbVVvSnk0dlgyaHBaR1VuS1NoSmRHVnlZWFJ2Y2xCeWIzUnZkSGx3WlN3Z2NtVnhkV2x5WlNnbkxpOWZkMnR6Snlrb0oybDBaWEpoZEc5eUp5a3NJR1oxYm1OMGFXOXVLQ2w3SUhKbGRIVnliaUIwYUdsek95QjlLVHRjYmx4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmloRGIyNXpkSEoxWTNSdmNpd2dUa0ZOUlN3Z2JtVjRkQ2w3WEc0Z0lFTnZibk4wY25WamRHOXlMbkJ5YjNSdmRIbHdaU0E5SUdOeVpXRjBaU2hKZEdWeVlYUnZjbEJ5YjNSdmRIbHdaU3dnZTI1bGVIUTZJR1JsYzJOeWFYQjBiM0lvTVN3Z2JtVjRkQ2w5S1R0Y2JpQWdjMlYwVkc5VGRISnBibWRVWVdjb1EyOXVjM1J5ZFdOMGIzSXNJRTVCVFVVZ0t5QW5JRWwwWlhKaGRHOXlKeWs3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYVhSbGNpMWpjbVZoZEdVdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEWXlYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUEwSURVaUxDSnRiMlIxYkdVdVpYaHdiM0owY3lBOUlHWjFibU4wYVc5dUtHUnZibVVzSUhaaGJIVmxLWHRjYmlBZ2NtVjBkWEp1SUh0MllXeDFaVG9nZG1Gc2RXVXNJR1J2Ym1VNklDRWhaRzl1WlgwN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmFYUmxjaTF6ZEdWd0xtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTJNMXh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1nTkNBMUlpd2lkbUZ5SUdSUUlDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXUndKeWxjYmlBZ0xDQmhiazlpYW1WamRDQTlJSEpsY1hWcGNtVW9KeTR2WDJGdUxXOWlhbVZqZENjcFhHNGdJQ3dnWjJWMFMyVjVjeUFnUFNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdGEyVjVjeWNwTzF4dVhHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlISmxjWFZwY21Vb0p5NHZYMlJsYzJOeWFYQjBiM0p6SnlrZ1B5QlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkR2xsY3lBNklHWjFibU4wYVc5dUlHUmxabWx1WlZCeWIzQmxjblJwWlhNb1R5d2dVSEp2Y0dWeWRHbGxjeWw3WEc0Z0lHRnVUMkpxWldOMEtFOHBPMXh1SUNCMllYSWdhMlY1Y3lBZ0lEMGdaMlYwUzJWNWN5aFFjbTl3WlhKMGFXVnpLVnh1SUNBZ0lDd2diR1Z1WjNSb0lEMGdhMlY1Y3k1c1pXNW5kR2hjYmlBZ0lDQXNJR2tnUFNBd1hHNGdJQ0FnTENCUU8xeHVJQ0IzYUdsc1pTaHNaVzVuZEdnZ1BpQnBLV1JRTG1Zb1R5d2dVQ0E5SUd0bGVYTmJhU3NyWFN3Z1VISnZjR1Z5ZEdsbGMxdFFYU2s3WEc0Z0lISmxkSFZ5YmlCUE8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgyOWlhbVZqZEMxa2NITXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRFkwWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlBMElEVWlMQ0l2THlBeE9TNHhMakl1TnlBdklERTFMakl1TXk0MElFOWlhbVZqZEM1blpYUlBkMjVRY205d1pYSjBlVTVoYldWektFOHBYRzUyWVhJZ0pHdGxlWE1nSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFyWlhsekxXbHVkR1Z5Ym1Gc0p5bGNiaUFnTENCb2FXUmtaVzVMWlhseklEMGdjbVZ4ZFdseVpTZ25MaTlmWlc1MWJTMWlkV2N0YTJWNWN5Y3BMbU52Ym1OaGRDZ25iR1Z1WjNSb0p5d2dKM0J5YjNSdmRIbHdaU2NwTzF4dVhHNWxlSEJ2Y25SekxtWWdQU0JQWW1wbFkzUXVaMlYwVDNkdVVISnZjR1Z5ZEhsT1lXMWxjeUI4ZkNCbWRXNWpkR2x2YmlCblpYUlBkMjVRY205d1pYSjBlVTVoYldWektFOHBlMXh1SUNCeVpYUjFjbTRnSkd0bGVYTW9UeXdnYUdsa1pHVnVTMlY1Y3lrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFdkdmNHNHVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRFkxWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0luWmhjaUIwYjBsdWRHVm5aWElnUFNCeVpYRjFhWEpsS0NjdUwxOTBieTFwYm5SbFoyVnlKeWxjYmlBZ0xDQmtaV1pwYm1Wa0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5a1pXWnBibVZrSnlrN1hHNHZMeUIwY25WbElDQXRQaUJUZEhKcGJtY2pZWFJjYmk4dklHWmhiSE5sSUMwK0lGTjBjbWx1WnlOamIyUmxVRzlwYm5SQmRGeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaFVUMTlUVkZKSlRrY3BlMXh1SUNCeVpYUjFjbTRnWm5WdVkzUnBiMjRvZEdoaGRDd2djRzl6S1h0Y2JpQWdJQ0IyWVhJZ2N5QTlJRk4wY21sdVp5aGtaV1pwYm1Wa0tIUm9ZWFFwS1Z4dUlDQWdJQ0FnTENCcElEMGdkRzlKYm5SbFoyVnlLSEJ2Y3lsY2JpQWdJQ0FnSUN3Z2JDQTlJSE11YkdWdVozUm9YRzRnSUNBZ0lDQXNJR0VzSUdJN1hHNGdJQ0FnYVdZb2FTQThJREFnZkh3Z2FTQStQU0JzS1hKbGRIVnliaUJVVDE5VFZGSkpUa2NnUHlBbkp5QTZJSFZ1WkdWbWFXNWxaRHRjYmlBZ0lDQmhJRDBnY3k1amFHRnlRMjlrWlVGMEtHa3BPMXh1SUNBZ0lISmxkSFZ5YmlCaElEd2dNSGhrT0RBd0lIeDhJR0VnUGlBd2VHUmlabVlnZkh3Z2FTQXJJREVnUFQwOUlHd2dmSHdnS0dJZ1BTQnpMbU5vWVhKRGIyUmxRWFFvYVNBcklERXBLU0E4SURCNFpHTXdNQ0I4ZkNCaUlENGdNSGhrWm1abVhHNGdJQ0FnSUNBL0lGUlBYMU5VVWtsT1J5QS9JSE11WTJoaGNrRjBLR2twSURvZ1lWeHVJQ0FnSUNBZ09pQlVUMTlUVkZKSlRrY2dQeUJ6TG5Oc2FXTmxLR2tzSUdrZ0t5QXlLU0E2SUNoaElDMGdNSGhrT0RBd0lEdzhJREV3S1NBcklDaGlJQzBnTUhoa1l6QXdLU0FySURCNE1UQXdNREE3WEc0Z0lIMDdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZjM1J5YVc1bkxXRjBMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0EyTmx4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJaXdpZG1GeUlHTjBlQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJOMGVDY3BYRzRnSUN3Z2FXNTJiMnRsSUNBZ0lDQWdJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmYVc1MmIydGxKeWxjYmlBZ0xDQm9kRzFzSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5b2RHMXNKeWxjYmlBZ0xDQmpaV3dnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5a2IyMHRZM0psWVhSbEp5bGNiaUFnTENCbmJHOWlZV3dnSUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTluYkc5aVlXd25LVnh1SUNBc0lIQnliMk5sYzNNZ0lDQWdJQ0FnSUNBZ0lDQTlJR2RzYjJKaGJDNXdjbTlqWlhOelhHNGdJQ3dnYzJWMFZHRnpheUFnSUNBZ0lDQWdJQ0FnSUQwZ1oyeHZZbUZzTG5ObGRFbHRiV1ZrYVdGMFpWeHVJQ0FzSUdOc1pXRnlWR0Z6YXlBZ0lDQWdJQ0FnSUNBOUlHZHNiMkpoYkM1amJHVmhja2x0YldWa2FXRjBaVnh1SUNBc0lFMWxjM05oWjJWRGFHRnVibVZzSUNBZ0lDQTlJR2RzYjJKaGJDNU5aWE56WVdkbFEyaGhibTVsYkZ4dUlDQXNJR052ZFc1MFpYSWdJQ0FnSUNBZ0lDQWdJQ0E5SURCY2JpQWdMQ0J4ZFdWMVpTQWdJQ0FnSUNBZ0lDQWdJQ0FnUFNCN2ZWeHVJQ0FzSUU5T1VrVkJSRmxUVkVGVVJVTklRVTVIUlNBOUlDZHZibkpsWVdSNWMzUmhkR1ZqYUdGdVoyVW5YRzRnSUN3Z1pHVm1aWElzSUdOb1lXNXVaV3dzSUhCdmNuUTdYRzUyWVhJZ2NuVnVJRDBnWm5WdVkzUnBiMjRvS1h0Y2JpQWdkbUZ5SUdsa0lEMGdLM1JvYVhNN1hHNGdJR2xtS0hGMVpYVmxMbWhoYzA5M2JsQnliM0JsY25SNUtHbGtLU2w3WEc0Z0lDQWdkbUZ5SUdadUlEMGdjWFZsZFdWYmFXUmRPMXh1SUNBZ0lHUmxiR1YwWlNCeGRXVjFaVnRwWkYwN1hHNGdJQ0FnWm00b0tUdGNiaUFnZlZ4dWZUdGNiblpoY2lCc2FYTjBaVzVsY2lBOUlHWjFibU4wYVc5dUtHVjJaVzUwS1h0Y2JpQWdjblZ1TG1OaGJHd29aWFpsYm5RdVpHRjBZU2s3WEc1OU8xeHVMeThnVG05a1pTNXFjeUF3TGprcklDWWdTVVV4TUNzZ2FHRnpJSE5sZEVsdGJXVmthV0YwWlN3Z2IzUm9aWEozYVhObE9seHVhV1lvSVhObGRGUmhjMnNnZkh3Z0lXTnNaV0Z5VkdGemF5bDdYRzRnSUhObGRGUmhjMnNnUFNCbWRXNWpkR2x2YmlCelpYUkpiVzFsWkdsaGRHVW9abTRwZTF4dUlDQWdJSFpoY2lCaGNtZHpJRDBnVzEwc0lHa2dQU0F4TzF4dUlDQWdJSGRvYVd4bEtHRnlaM1Z0Wlc1MGN5NXNaVzVuZEdnZ1BpQnBLV0Z5WjNNdWNIVnphQ2hoY21kMWJXVnVkSE5iYVNzclhTazdYRzRnSUNBZ2NYVmxkV1ZiS3l0amIzVnVkR1Z5WFNBOUlHWjFibU4wYVc5dUtDbDdYRzRnSUNBZ0lDQnBiblp2YTJVb2RIbHdaVzltSUdadUlEMDlJQ2RtZFc1amRHbHZiaWNnUHlCbWJpQTZJRVoxYm1OMGFXOXVLR1p1S1N3Z1lYSm5jeWs3WEc0Z0lDQWdmVHRjYmlBZ0lDQmtaV1psY2loamIzVnVkR1Z5S1R0Y2JpQWdJQ0J5WlhSMWNtNGdZMjkxYm5SbGNqdGNiaUFnZlR0Y2JpQWdZMnhsWVhKVVlYTnJJRDBnWm5WdVkzUnBiMjRnWTJ4bFlYSkpiVzFsWkdsaGRHVW9hV1FwZTF4dUlDQWdJR1JsYkdWMFpTQnhkV1YxWlZ0cFpGMDdYRzRnSUgwN1hHNGdJQzh2SUU1dlpHVXVhbk1nTUM0NExWeHVJQ0JwWmloeVpYRjFhWEpsS0NjdUwxOWpiMlluS1Nod2NtOWpaWE56S1NBOVBTQW5jSEp2WTJWemN5Y3BlMXh1SUNBZ0lHUmxabVZ5SUQwZ1puVnVZM1JwYjI0b2FXUXBlMXh1SUNBZ0lDQWdjSEp2WTJWemN5NXVaWGgwVkdsamF5aGpkSGdvY25WdUxDQnBaQ3dnTVNrcE8xeHVJQ0FnSUgwN1hHNGdJQzh2SUVKeWIzZHpaWEp6SUhkcGRHZ2dUV1Z6YzJGblpVTm9ZVzV1Wld3c0lHbHVZMngxWkdWeklGZGxZbGR2Y210bGNuTmNiaUFnZlNCbGJITmxJR2xtS0UxbGMzTmhaMlZEYUdGdWJtVnNLWHRjYmlBZ0lDQmphR0Z1Ym1Wc0lEMGdibVYzSUUxbGMzTmhaMlZEYUdGdWJtVnNPMXh1SUNBZ0lIQnZjblFnSUNBZ1BTQmphR0Z1Ym1Wc0xuQnZjblF5TzF4dUlDQWdJR05vWVc1dVpXd3VjRzl5ZERFdWIyNXRaWE56WVdkbElEMGdiR2x6ZEdWdVpYSTdYRzRnSUNBZ1pHVm1aWElnUFNCamRIZ29jRzl5ZEM1d2IzTjBUV1Z6YzJGblpTd2djRzl5ZEN3Z01TazdYRzRnSUM4dklFSnliM2R6WlhKeklIZHBkR2dnY0c5emRFMWxjM05oWjJVc0lITnJhWEFnVjJWaVYyOXlhMlZ5YzF4dUlDQXZMeUJKUlRnZ2FHRnpJSEJ2YzNSTlpYTnpZV2RsTENCaWRYUWdhWFFuY3lCemVXNWpJQ1lnZEhsd1pXOW1JR2wwY3lCd2IzTjBUV1Z6YzJGblpTQnBjeUFuYjJKcVpXTjBKMXh1SUNCOUlHVnNjMlVnYVdZb1oyeHZZbUZzTG1Ga1pFVjJaVzUwVEdsemRHVnVaWElnSmlZZ2RIbHdaVzltSUhCdmMzUk5aWE56WVdkbElEMDlJQ2RtZFc1amRHbHZiaWNnSmlZZ0lXZHNiMkpoYkM1cGJYQnZjblJUWTNKcGNIUnpLWHRjYmlBZ0lDQmtaV1psY2lBOUlHWjFibU4wYVc5dUtHbGtLWHRjYmlBZ0lDQWdJR2RzYjJKaGJDNXdiM04wVFdWemMyRm5aU2hwWkNBcklDY25MQ0FuS2ljcE8xeHVJQ0FnSUgwN1hHNGdJQ0FnWjJ4dlltRnNMbUZrWkVWMlpXNTBUR2x6ZEdWdVpYSW9KMjFsYzNOaFoyVW5MQ0JzYVhOMFpXNWxjaXdnWm1Gc2MyVXBPMXh1SUNBdkx5QkpSVGd0WEc0Z0lIMGdaV3h6WlNCcFppaFBUbEpGUVVSWlUxUkJWRVZEU0VGT1IwVWdhVzRnWTJWc0tDZHpZM0pwY0hRbktTbDdYRzRnSUNBZ1pHVm1aWElnUFNCbWRXNWpkR2x2YmlocFpDbDdYRzRnSUNBZ0lDQm9kRzFzTG1Gd2NHVnVaRU5vYVd4a0tHTmxiQ2duYzJOeWFYQjBKeWtwVzA5T1VrVkJSRmxUVkVGVVJVTklRVTVIUlYwZ1BTQm1kVzVqZEdsdmJpZ3BlMXh1SUNBZ0lDQWdJQ0JvZEcxc0xuSmxiVzkyWlVOb2FXeGtLSFJvYVhNcE8xeHVJQ0FnSUNBZ0lDQnlkVzR1WTJGc2JDaHBaQ2s3WEc0Z0lDQWdJQ0I5TzF4dUlDQWdJSDA3WEc0Z0lDOHZJRkpsYzNRZ2IyeGtJR0p5YjNkelpYSnpYRzRnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdaR1ZtWlhJZ1BTQm1kVzVqZEdsdmJpaHBaQ2w3WEc0Z0lDQWdJQ0J6WlhSVWFXMWxiM1YwS0dOMGVDaHlkVzRzSUdsa0xDQXhLU3dnTUNrN1hHNGdJQ0FnZlR0Y2JpQWdmVnh1ZlZ4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCN1hHNGdJSE5sZERvZ0lDQnpaWFJVWVhOckxGeHVJQ0JqYkdWaGNqb2dZMnhsWVhKVVlYTnJYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZkR0Z6YXk1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ05qZGNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ05DQTFJaXdpZG1GeUlIUnZTVzUwWldkbGNpQTlJSEpsY1hWcGNtVW9KeTR2WDNSdkxXbHVkR1ZuWlhJbktWeHVJQ0FzSUcxaGVDQWdJQ0FnSUNBOUlFMWhkR2d1YldGNFhHNGdJQ3dnYldsdUlDQWdJQ0FnSUQwZ1RXRjBhQzV0YVc0N1hHNXRiMlIxYkdVdVpYaHdiM0owY3lBOUlHWjFibU4wYVc5dUtHbHVaR1Y0TENCc1pXNW5kR2dwZTF4dUlDQnBibVJsZUNBOUlIUnZTVzUwWldkbGNpaHBibVJsZUNrN1hHNGdJSEpsZEhWeWJpQnBibVJsZUNBOElEQWdQeUJ0WVhnb2FXNWtaWGdnS3lCc1pXNW5kR2dzSURBcElEb2diV2x1S0dsdVpHVjRMQ0JzWlc1bmRHZ3BPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYM1J2TFdsdVpHVjRMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0EyT0Z4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNZ05DQTFJaXdpSjNWelpTQnpkSEpwWTNRbk8xeHVkbUZ5SUdGa1pGUnZWVzV6WTI5d1lXSnNaWE1nUFNCeVpYRjFhWEpsS0NjdUwxOWhaR1F0ZEc4dGRXNXpZMjl3WVdKc1pYTW5LVnh1SUNBc0lITjBaWEFnSUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlwZEdWeUxYTjBaWEFuS1Z4dUlDQXNJRWwwWlhKaGRHOXljeUFnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5cGRHVnlZWFJ2Y25NbktWeHVJQ0FzSUhSdlNVOWlhbVZqZENBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOTBieTFwYjJKcVpXTjBKeWs3WEc1Y2JpOHZJREl5TGpFdU15NDBJRUZ5Y21GNUxuQnliM1J2ZEhsd1pTNWxiblJ5YVdWektDbGNiaTh2SURJeUxqRXVNeTR4TXlCQmNuSmhlUzV3Y205MGIzUjVjR1V1YTJWNWN5Z3BYRzR2THlBeU1pNHhMak11TWprZ1FYSnlZWGt1Y0hKdmRHOTBlWEJsTG5aaGJIVmxjeWdwWEc0dkx5QXlNaTR4TGpNdU16QWdRWEp5WVhrdWNISnZkRzkwZVhCbFcwQkFhWFJsY21GMGIzSmRLQ2xjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnY21WeGRXbHlaU2duTGk5ZmFYUmxjaTFrWldacGJtVW5LU2hCY25KaGVTd2dKMEZ5Y21GNUp5d2dablZ1WTNScGIyNG9hWFJsY21GMFpXUXNJR3RwYm1RcGUxeHVJQ0IwYUdsekxsOTBJRDBnZEc5SlQySnFaV04wS0dsMFpYSmhkR1ZrS1RzZ0x5OGdkR0Z5WjJWMFhHNGdJSFJvYVhNdVgya2dQU0F3T3lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBdkx5QnVaWGgwSUdsdVpHVjRYRzRnSUhSb2FYTXVYMnNnUFNCcmFXNWtPeUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQXZMeUJyYVc1a1hHNHZMeUF5TWk0eExqVXVNaTR4SUNWQmNuSmhlVWwwWlhKaGRHOXlVSEp2ZEc5MGVYQmxKUzV1WlhoMEtDbGNibjBzSUdaMWJtTjBhVzl1S0NsN1hHNGdJSFpoY2lCUElDQWdJQ0E5SUhSb2FYTXVYM1JjYmlBZ0lDQXNJR3RwYm1RZ0lEMGdkR2hwY3k1ZmExeHVJQ0FnSUN3Z2FXNWtaWGdnUFNCMGFHbHpMbDlwS3lzN1hHNGdJR2xtS0NGUElIeDhJR2x1WkdWNElENDlJRTh1YkdWdVozUm9LWHRjYmlBZ0lDQjBhR2x6TGw5MElEMGdkVzVrWldacGJtVmtPMXh1SUNBZ0lISmxkSFZ5YmlCemRHVndLREVwTzF4dUlDQjlYRzRnSUdsbUtHdHBibVFnUFQwZ0oydGxlWE1uSUNBcGNtVjBkWEp1SUhOMFpYQW9NQ3dnYVc1a1pYZ3BPMXh1SUNCcFppaHJhVzVrSUQwOUlDZDJZV3gxWlhNbktYSmxkSFZ5YmlCemRHVndLREFzSUU5YmFXNWtaWGhkS1R0Y2JpQWdjbVYwZFhKdUlITjBaWEFvTUN3Z1cybHVaR1Y0TENCUFcybHVaR1Y0WFYwcE8xeHVmU3dnSjNaaGJIVmxjeWNwTzF4dVhHNHZMeUJoY21kMWJXVnVkSE5NYVhOMFcwQkFhWFJsY21GMGIzSmRJR2x6SUNWQmNuSmhlVkJ5YjNSdlgzWmhiSFZsY3lVZ0tEa3VOQzQwTGpZc0lEa3VOQzQwTGpjcFhHNUpkR1Z5WVhSdmNuTXVRWEpuZFcxbGJuUnpJRDBnU1hSbGNtRjBiM0p6TGtGeWNtRjVPMXh1WEc1aFpHUlViMVZ1YzJOdmNHRmliR1Z6S0NkclpYbHpKeWs3WEc1aFpHUlViMVZ1YzJOdmNHRmliR1Z6S0NkMllXeDFaWE1uS1R0Y2JtRmtaRlJ2Vlc1elkyOXdZV0pzWlhNb0oyVnVkSEpwWlhNbktUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WlhNMkxtRnljbUY1TG1sMFpYSmhkRzl5TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBMk9WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWdOQ0ExSWl3aWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCN0lGd2laR1ZtWVhWc2RGd2lPaUJ5WlhGMWFYSmxLRndpWTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzlyWlhselhDSXBMQ0JmWDJWelRXOWtkV3hsT2lCMGNuVmxJSDA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMkpoWW1Wc0xYSjFiblJwYldVdlkyOXlaUzFxY3k5dlltcGxZM1F2YTJWNWN5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdOekJjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lESWdOQ0ExSWl3aUx5b3FYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVUZRZ1NXNXZkbUhEcDhPamJ5QmxJRk5wYzNSbGJXRnpJRk5CWEhKY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1NVNUZVME10U1VSY2NseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQlJWVTlDU1ZNZ1RrVlVWMDlTUzFNZ1UweGNjbHh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJHVWtGVlRraFBSa1ZTTFVkRlUwVk1URk5EU0VGR1ZDQmFWVklnUms5RlVrUkZVbFZPUnlCRVJWSWdRVTVIUlZkQlRrUlVSVTRnUms5U1UwTklWVTVISUVVdVZseHlYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRTlTUVU1SFJTQlRRVnh5WEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUVSbGRYUnpZMmhsSUZSbGJHVnJiMjBnUVVkY2NseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQkJjR2w2WldWY2NseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQlVSVU5JVGtsVFEwaEZJRlZPU1ZaRlVsTkpWRUZVSUVKRlVreEpUbHh5WEc0cVhISmNiaW9nVEdsalpXNXpaV1FnZFc1a1pYSWdkR2hsSUVGd1lXTm9aU0JNYVdObGJuTmxMQ0JXWlhKemFXOXVJREl1TUNBb2RHaGxJRndpVEdsalpXNXpaVndpS1R0Y2NseHVLaUI1YjNVZ2JXRjVJRzV2ZENCMWMyVWdkR2hwY3lCbWFXeGxJR1Y0WTJWd2RDQnBiaUJqYjIxd2JHbGhibU5sSUhkcGRHZ2dkR2hsSUV4cFkyVnVjMlV1WEhKY2Jpb2dXVzkxSUcxaGVTQnZZblJoYVc0Z1lTQmpiM0I1SUc5bUlIUm9aU0JNYVdObGJuTmxJR0YwWEhKY2JpcGNjbHh1S2lBZ0lHaDBkSEE2THk5M2QzY3VZWEJoWTJobExtOXlaeTlzYVdObGJuTmxjeTlNU1VORlRsTkZMVEl1TUZ4eVhHNHFYSEpjYmlvZ1ZXNXNaWE56SUhKbGNYVnBjbVZrSUdKNUlHRndjR3hwWTJGaWJHVWdiR0YzSUc5eUlHRm5jbVZsWkNCMGJ5QnBiaUIzY21sMGFXNW5MQ0J6YjJaMGQyRnlaVnh5WEc0cUlHUnBjM1J5YVdKMWRHVmtJSFZ1WkdWeUlIUm9aU0JNYVdObGJuTmxJR2x6SUdScGMzUnlhV0oxZEdWa0lHOXVJR0Z1SUZ3aVFWTWdTVk5jSWlCQ1FWTkpVeXhjY2x4dUtpQlhTVlJJVDFWVUlGZEJVbEpCVGxSSlJWTWdUMUlnUTA5T1JFbFVTVTlPVXlCUFJpQkJUbGtnUzBsT1JDd2daV2wwYUdWeUlHVjRjSEpsYzNNZ2IzSWdhVzF3YkdsbFpDNWNjbHh1S2lCVFpXVWdkR2hsSUV4cFkyVnVjMlVnWm05eUlIUm9aU0J6Y0dWamFXWnBZeUJzWVc1bmRXRm5aU0JuYjNabGNtNXBibWNnY0dWeWJXbHpjMmx2Ym5NZ1lXNWtYSEpjYmlvZ2JHbHRhWFJoZEdsdmJuTWdkVzVrWlhJZ2RHaGxJRXhwWTJWdWMyVXVYSEpjYmlvcUwxeHlYRzR2S2lwY2NseHVJQ29nVTNWd2NHOXlkQ0J0YjJSMWJHVWdkMmwwYUNCemIyMWxJR1oxYm1OMGFXOXVjeUIzYVd4c0lHSmxJSFZ6WldaMWJGeHlYRzRnS2lCQWJXOWtkV3hsSUhWMGFXeHpYSEpjYmlBcUwxeHlYRzVjY2x4dUx5b3FYSEpjYmlBcUlFQjBlWEJsWkdWbUlHUnBkbWxrWlZWU1RGeHlYRzRnS2lCQWRIbHdaU0JQWW1wbFkzUmNjbHh1SUNvZ1FIQnliM0JsY25SNUlIdHpkSEpwYm1kOUlIUjVjR1VnVkdobElIUjVjR1VnYjJZZ1ZWSk1YSEpjYmlBcUlFQndjbTl3WlhKMGVTQjdjM1J5YVc1bmZTQmtiMjFoYVc0Z1ZHaGxJR1J2YldGcGJpQnZaaUJWVWt4Y2NseHVJQ29nUUhCeWIzQmxjblI1SUh0emRISnBibWQ5SUdsa1pXNTBhWFI1SUZSb1pTQnBaR1Z1ZEdsMGVTQnZaaUJWVWt4Y2NseHVJQ292WEhKY2JseHlYRzR2S2lwY2NseHVJQ29nUkdsMmFXUmxJR0Z1SUhWeWJDQnBiaUIwZVhCbExDQmtiMjFoYVc0Z1lXNWtJR2xrWlc1MGFYUjVYSEpjYmlBcUlFQndZWEpoYlNBZ2UxVlNUQzVWVWt4OUlIVnliQ0F0SUhWeWJDQmhaR1J5WlhOelhISmNiaUFxSUVCeVpYUjFjbTRnZTJScGRtbGtaVlZTVEgwZ2RHaGxJSEpsYzNWc2RDQnZaaUJrYVhacFpHVlZVa3hjY2x4dUlDb3ZYSEpjYm1WNGNHOXlkQ0JtZFc1amRHbHZiaUJrYVhacFpHVlZVa3dvZFhKc0tTQjdYSEpjYmx4eVhHNGdJR2xtSUNnaGRYSnNLU0IwYUhKdmR5QkZjbkp2Y2lnblZWSk1JR2x6SUc1bFpXUmxaQ0IwYnlCemNHeHBkQ2NwTzF4eVhHNWNjbHh1WEhSbWRXNWpkR2x2YmlCeVpXTjFjbk5sS0haaGJIVmxLU0I3WEhKY2JseDBYSFJqYjI1emRDQnlaV2RsZUNBOUlDOG9XMkV0ZWtFdFdpMWRLaWtvT2x4Y0wxeGNMeWcvT2x4Y0xpay9mRG9wS0ZzdFlTMTZRUzFhTUMwNVFEb2xMbDljWEN0K0l6MWRleklzTWpVMmZTa29XeTFoTFhwQkxWb3dMVGxBT2lVdVgxeGNLMzRqUFZ4Y0wxMHFLUzluYVR0Y2NseHVJQ0FnSUdOdmJuTjBJSE4xWW5OMElEMGdKeVF4TENRekxDUTBKenRjY2x4dVhIUWdJR3hsZENCd1lYSjBjeUE5SUhaaGJIVmxMbkpsY0d4aFkyVW9jbVZuWlhnc0lITjFZbk4wS1M1emNHeHBkQ2duTENjcE8xeHlYRzVjZEZ4MGNtVjBkWEp1SUhCaGNuUnpPMXh5WEc1Y2RIMWNjbHh1WEhKY2JseDBiR1YwSUhCaGNuUnpJRDBnY21WamRYSnpaU2gxY213cE8xeHlYRzVjY2x4dUlDQXZMeUJKWmlCMGFHVWdkWEpzSUdoaGN5QnVieUJ6WTJobGJXVmNjbHh1SUNCcFppQW9jR0Z5ZEhOYk1GMGdQVDA5SUhWeWJDQW1KaUFoY0dGeWRITmJNRjB1YVc1amJIVmtaWE1vSjBBbktTa2dlMXh5WEc1Y2NseHVJQ0FnSUd4bGRDQnlaWE4xYkhRZ1BTQjdYSEpjYmlBZ0lDQWdJSFI1Y0dVNklGd2lYQ0lzWEhKY2JpQWdJQ0FnSUdSdmJXRnBiam9nZFhKc0xGeHlYRzRnSUNBZ0lDQnBaR1Z1ZEdsMGVUb2dYQ0pjSWx4eVhHNGdJQ0FnZlR0Y2NseHVYSEpjYmlBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0NkYlJHbDJhV1JsVlZKTVhTQkVhWFpwWkdWVlVrd2daRzl1WEZ3bmRDQnpkWEJ3YjNKMElIVnliQ0IzYVhSb2IzVjBJSE5qYUdWdFpTNGdVR3hsWVhObElISmxkbWxsZHlCNWIzVnlJSFZ5YkNCaFpHUnlaWE56Snl3Z2RYSnNLVHRjY2x4dVhISmNiaUFnSUNCeVpYUjFjbTRnY21WemRXeDBPMXh5WEc0Z0lIMWNjbHh1WEhKY2JseDBMeThnWTJobFkyc2dhV1lnZEdobElIVnliQ0JvWVhNZ2RHaGxJSE5qYUdWdFpTQmhibVFnYVc1amJIVmtaWE1nWVc0Z1FGeHlYRzVjZEdsbUlDaHdZWEowYzFzd1hTQTlQVDBnZFhKc0lDWW1JSEJoY25Seld6QmRMbWx1WTJ4MVpHVnpLQ2RBSnlrcElIdGNjbHh1WEhSY2RHeGxkQ0J6WTJobGJXVWdQU0J3WVhKMGMxc3dYU0E5UFQwZ2RYSnNJRDhnSjNOdGRIQW5JRG9nY0dGeWRITmJNRjA3WEhKY2JseDBYSFJ3WVhKMGN5QTlJSEpsWTNWeWMyVW9jMk5vWlcxbElDc2dKem92THljZ0t5QndZWEowYzFzd1hTazdYSEpjYmx4MGZWeHlYRzVjY2x4dVhIUXZMeUJwWmlCMGFHVWdaRzl0WVdsdUlHbHVZMngxWkdWeklHRnVJRUFzSUdScGRtbGtaU0JwZENCMGJ5QmtiMjFoYVc0Z1lXNWtJR2xrWlc1MGFYUjVJSEpsYzNCbFkzUnBkbVZzZVZ4eVhHNWNkR2xtSUNod1lYSjBjMXN4WFM1cGJtTnNkV1JsY3lnblFDY3BLU0I3WEhKY2JseDBYSFJ3WVhKMGMxc3lYU0E5SUhCaGNuUnpXekJkSUNzZ0p6b3ZMeWNnS3lCd1lYSjBjMXN4WFR0Y2NseHVYSFJjZEhCaGNuUnpXekZkSUQwZ2NHRnlkSE5iTVYwdWMzVmljM1J5S0hCaGNuUnpXekZkTG1sdVpHVjRUMllvSjBBbktTQXJJREVwWEhKY2JpQWdJQ0I5SUZ4MEx5cGxiSE5sSUdsbUlDaHdZWEowYzFzeVhTNXBibU5zZFdSbGN5Z25MeWNwS1NCN1hISmNiaUFnSUNCd1lYSjBjMXN5WFNBOUlIQmhjblJ6V3pKZExuTjFZbk4wY2lod1lYSjBjMXN5WFM1c1lYTjBTVzVrWlhoUFppZ25MeWNwS3pFcE8xeHlYRzRnSUgwcUwxeHlYRzVjY2x4dUlDQnNaWFFnY21WemRXeDBJRDBnZTF4eVhHNGdJQ0FnZEhsd1pUb2djR0Z5ZEhOYk1GMHNYSEpjYmlBZ0lDQmtiMjFoYVc0NklIQmhjblJ6V3pGZExGeHlYRzRnSUNBZ2FXUmxiblJwZEhrNklIQmhjblJ6V3pKZFhISmNiaUFnZlR0Y2NseHVYSEpjYmlBZ2NtVjBkWEp1SUhKbGMzVnNkRHRjY2x4dWZWeHlYRzVjY2x4dVpYaHdiM0owSUdaMWJtTjBhVzl1SUdScGRtbGtaVVZ0WVdsc0tHVnRZV2xzS1NCN1hISmNiaUFnYkdWMElHbHVaR1Y0VDJaQmRDQTlJR1Z0WVdsc0xtbHVaR1Y0VDJZb0owQW5LVHRjY2x4dVhISmNiaUFnYkdWMElISmxjM1ZzZENBOUlIdGNjbHh1SUNBZ0lIVnpaWEp1WVcxbE9pQmxiV0ZwYkM1emRXSnpkSEpwYm1jb01Dd2dhVzVrWlhoUFprRjBLU3hjY2x4dUlDQWdJR1J2YldGcGJqb2daVzFoYVd3dWMzVmljM1J5YVc1bktHbHVaR1Y0VDJaQmRDQXJJREVzSUdWdFlXbHNMbXhsYm1kMGFDbGNjbHh1SUNCOU8xeHlYRzVjY2x4dUlDQnlaWFIxY200Z2NtVnpkV3gwTzF4eVhHNTlYSEpjYmx4eVhHNHZLaXBjY2x4dUlDb2dRMmhsWTJzZ2FXWWdZVzRnVDJKcVpXTjBJR2x6SUdWdGNIUjVYSEpjYmlBcUlFQndZWEpoYlNBZ2UwOWlhbVZqZEgwZ2IySnFaV04wSUU5aWFtVmpkQ0IwYnlCaVpTQmphR1ZqYTJWa1hISmNiaUFxSUVCeVpYUjFjbTRnZTBKdmIyeGxZVzU5SUNBZ0lDQWdJSE4wWVhSMWN5QnZaaUJQWW1wbFkzUXNJR1Z0Y0hSNUlHOXlJRzV2ZENBb2RISjFaWHhtWVd4elpTazdYSEpjYmlBcUwxeHlYRzVsZUhCdmNuUWdablZ1WTNScGIyNGdaVzF3ZEhsUFltcGxZM1FvYjJKcVpXTjBLU0I3WEhKY2JpQWdjbVYwZFhKdUlFOWlhbVZqZEM1clpYbHpLRzlpYW1WamRDa3ViR1Z1WjNSb0lENGdNQ0EvSUdaaGJITmxJRG9nZEhKMVpUdGNjbHh1ZlZ4eVhHNWNjbHh1THlvcVhISmNiaUFxSUUxaGEyVWdZU0JEVDFCWklHOW1JSFJvWlNCdmNtbG5hVzVoYkNCa1lYUmhYSEpjYmlBcUlFQndZWEpoYlNBZ2UwOWlhbVZqZEgwZ0lHOWlhaUF0SUc5aWFtVmpkQ0IwYnlCaVpTQmpiRzl1WldSY2NseHVJQ29nUUhKbGRIVnliaUI3VDJKcVpXTjBmVnh5WEc0Z0tpOWNjbHh1Wlhod2IzSjBJR1oxYm1OMGFXOXVJR1JsWlhCRGJHOXVaU2h2WW1vcElIdGNjbHh1SUNBdkwxUlBSRTg2SUhOcGJYQnNaU0JpZFhRZ2FXNWxabVpwWTJsbGJuUWdTbE5QVGlCa1pXVndJR05zYjI1bExpNHVYSEpjYmlBZ2FXWWdLRzlpYWlrZ2NtVjBkWEp1SUVwVFQwNHVjR0Z5YzJVb1NsTlBUaTV6ZEhKcGJtZHBabmtvYjJKcUtTazdYSEpjYm4xY2NseHVYSEpjYmk4cUtseHlYRzRnS2lCUFluUmhhVzV6SUhSb1pTQjFjMlZ5SUZWU1RDQjBhR0YwSUdOdmNuSmxjM0J2Ym1SeklIUnZJR0VnWjJsMlpXNGdaVzFoYVd4Y2NseHVJQ29nUUhCaGNtRnRJQ0I3YzNSeWFXNW5mU0IxYzJWeVJXMWhhV3dnVkdobElIVnpaWElnWlcxaGFXeGNjbHh1SUNvZ1FISmxkSFZ5YmlCN1ZWSk1MbFZTVEgwZ2RYTmxjbFZTVENCVWFHVWdkWE5sY2lCVlVreGNjbHh1SUNvdlhISmNibVY0Y0c5eWRDQm1kVzVqZEdsdmJpQm5aWFJWYzJWeVZWSk1Sbkp2YlVWdFlXbHNLSFZ6WlhKRmJXRnBiQ2tnZTF4eVhHNGdJR3hsZENCcGJtUmxlRTltUVhRZ1BTQjFjMlZ5UlcxaGFXd3VhVzVrWlhoUFppZ25RQ2NwTzF4eVhHNGdJSEpsZEhWeWJpQW5kWE5sY2pvdkx5Y2dLeUIxYzJWeVJXMWhhV3d1YzNWaWMzUnlhVzVuS0dsdVpHVjRUMlpCZENBcklERXNJSFZ6WlhKRmJXRnBiQzVzWlc1bmRHZ3BJQ3NnSnk4bklDc2dkWE5sY2tWdFlXbHNMbk4xWW5OMGNtbHVaeWd3TENCcGJtUmxlRTltUVhRcE8xeHlYRzU5WEhKY2JseHlYRzR2S2lwY2NseHVJQ29nVDJKMFlXbHVjeUIwYUdVZ2RYTmxjaUJsYldGcGJDQjBhR0YwSUdOdmNuSmxjM0J2Ym1SeklIUnZJR0VnWjJsMlpXNGdWVkpNWEhKY2JpQXFJRUJ3WVhKaGJTQWdlMVZTVEM1VlVreDlJSFZ6WlhKVlVrd2dWR2hsSUhWelpYSWdWVkpNWEhKY2JpQXFJRUJ5WlhSMWNtNGdlM04wY21sdVozMGdkWE5sY2tWdFlXbHNJRlJvWlNCMWMyVnlJR1Z0WVdsc1hISmNiaUFxTDF4eVhHNWxlSEJ2Y25RZ1puVnVZM1JwYjI0Z1oyVjBWWE5sY2tWdFlXbHNSbkp2YlZWU1RDaDFjMlZ5VlZKTUtTQjdYSEpjYmlBZ2JHVjBJSFZ5YkNBOUlHUnBkbWxrWlZWU1RDaDFjMlZ5VlZKTUtUdGNjbHh1SUNCeVpYUjFjbTRnZFhKc0xtbGtaVzUwYVhSNUxuSmxjR3hoWTJVb0p5OG5MQ0FuSnlrZ0t5QW5RQ2NnS3lCMWNtd3VaRzl0WVdsdU95QXZMeUJwWkdWdWRHbDBlU0JtYVdWc1pDQm9ZWE1nSnk5bGVHRnRjR3hsU1VRbklHbHVjM1JsWVdRZ2IyWWdKMlY0WVcxd2JHVkpSQ2RjY2x4dWZWeHlYRzVjY2x4dVhISmNiaThxS2x4eVhHNGdLaUJEYUdWamF5QnBaaUIwYUdVZ2RYTmxjaUJwWkdWdWRHbG1hV1Z5SUdseklHRnNjbVZoWkhrZ2FXNGdkR2hsSUZWU1RDQm1iM0p0WVhRc0lHbG1JRzV2ZEN3Z1kyOXVkbVZ5ZENCMGJ5QlZVa3dnWm05eWJXRjBYSEpjYmlBcUlFQndZWEpoYlNBZ2UzTjBjbWx1WjMwZ0lDQnBaR1Z1ZEdsbWFXVnlJQ0IxYzJWeUlHbGtaVzUwYVdacFpYSmNjbHh1SUNvZ1FISmxkSFZ5YmlCN2MzUnlhVzVuZlNBZ0lIVnpaWEpWVWt3Z0lDQWdkR2hsSUhWelpYSWdWVkpNWEhKY2JpQXFMMXh5WEc1bGVIQnZjblFnWm5WdVkzUnBiMjRnWTI5dWRtVnlkRlJ2VlhObGNsVlNUQ2hwWkdWdWRHbG1hV1Z5S1NCN1hISmNibHh5WEc0Z0lDOHZJR05vWldOcklHbG1JSFJvWlNCcFpHVnVkR2xtYVdWeUlHbHpJR0ZzY21WaFpIa2dhVzRnZEdobElIVnliQ0JtYjNKdFlYUmNjbHh1SUNCcFppQW9hV1JsYm5ScFptbGxjaTV6ZFdKemRISnBibWNvTUN3Z055a2dQVDA5SUNkMWMyVnlPaTh2SnlrZ2UxeHlYRzRnSUNBZ2JHVjBJR1JwZG1sa1pXUlZVa3dnUFNCa2FYWnBaR1ZWVWt3b2FXUmxiblJwWm1sbGNpazdYSEpjYmx4eVhHNGdJQ0FnTHk5amFHVmpheUJwWmlCMGFHVWdkWEpzSUdseklIZGxiR3dnWm05eWJXRjBaV1JjY2x4dUlDQWdJR2xtSUNoa2FYWnBaR1ZrVlZKTUxtUnZiV0ZwYmlBbUppQmthWFpwWkdWa1ZWSk1MbWxrWlc1MGFYUjVLU0I3WEhKY2JpQWdJQ0FnSUhKbGRIVnliaUJwWkdWdWRHbG1hV1Z5TzF4eVhHNGdJQ0FnZlNCbGJITmxJSHRjY2x4dUlDQWdJQ0FnZEdoeWIzY2dKM1Z6WlhKVlVrd2dkMmwwYUNCM2NtOXVaeUJtYjNKdFlYUW5PMXh5WEc0Z0lDQWdmVnh5WEc1Y2NseHVJQ0F2TDJsbUlHNXZkQ3dnWTI5dWRtVnlkQ0IwYUdVZ2RYTmxjaUJsYldGcGJDQjBieUJWVWt3Z1ptOXliV0YwWEhKY2JpQWdmU0JsYkhObElIdGNjbHh1SUNBZ0lISmxkSFZ5YmlCblpYUlZjMlZ5VlZKTVJuSnZiVVZ0WVdsc0tHbGtaVzUwYVdacFpYSXBPMXh5WEc0Z0lIMWNjbHh1ZlZ4eVhHNWNjbHh1Wlhod2IzSjBJR1oxYm1OMGFXOXVJR05vWldOclFYUjBjbWxpZFhSbEtIQmhkR2dwSUh0Y2NseHVYSEpjYmlBZ2JHVjBJSEpsWjJWNElEMGdMeWdvS0Z0aExYcEJMVnBkS3lrNlhGd3ZYRnd2S0Zzd0xUbGhMWHBCTFZwZFd5MWNYSGRkS2xzd0xUbGhMWHBCTFZwZFhGd3VLU3RiWVMxNlFTMWFYWHN5TERsOUtWeGNMMXRoTFhwQkxWb3dMVGxjWEM1ZEswQmJZUzE2UVMxYU1DMDVYU3NvWEZ3dEtUOWJZUzE2UVMxYU1DMDVYU3NvWEZ3dUtUOWJZUzE2UVMxYU1DMDVYWHN5TERFd2ZUOWNYQzViWVMxNlFTMWFYWHN5TERFd2ZTa29MaXNvUHowdWFXUmxiblJwZEhrcEtUOHZaMjA3WEhKY2JseHlYRzRnSUd4bGRDQnNhWE4wSUQwZ1cxMDdYSEpjYmlBZ2JHVjBJR1pwYm1Gc0lEMGdXMTA3WEhKY2JpQWdiR1YwSUhSbGMzUWdQU0J3WVhSb0xtMWhkR05vS0hKbFoyVjRLVHRjY2x4dVhISmNiaUFnYVdZZ0tIUmxjM1FnUFQwZ2JuVnNiQ2tnZTF4eVhHNGdJQ0FnWm1sdVlXd2dQU0J3WVhSb0xuTndiR2wwS0NjdUp5azdYSEpjYmlBZ2ZTQmxiSE5sSUh0Y2NseHVJQ0FnSUd4bGRDQnRPMXh5WEc0Z0lDQWdkMmhwYkdVZ0tDaHRJRDBnY21WblpYZ3VaWGhsWXlod1lYUm9LU2tnSVQwOUlHNTFiR3dwSUh0Y2NseHVJQ0FnSUNBZ0x5OGdWR2hwY3lCcGN5QnVaV05sYzNOaGNua2dkRzhnWVhadmFXUWdhVzVtYVc1cGRHVWdiRzl2Y0hNZ2QybDBhQ0I2WlhKdkxYZHBaSFJvSUcxaGRHTm9aWE5jY2x4dUlDQWdJQ0FnYVdZZ0tHMHVhVzVrWlhnZ1BUMDlJSEpsWjJWNExteGhjM1JKYm1SbGVDa2dlMXh5WEc0Z0lDQWdJQ0FnSUhKbFoyVjRMbXhoYzNSSmJtUmxlQ3NyTzF4eVhHNGdJQ0FnSUNCOVhISmNibHh5WEc0Z0lDQWdJQ0F2THlCVWFHVWdjbVZ6ZFd4MElHTmhiaUJpWlNCaFkyTmxjM05sWkNCMGFISnZkV2RvSUhSb1pTQmdiV0F0ZG1GeWFXRmliR1V1WEhKY2JpQWdJQ0FnSUcwdVptOXlSV0ZqYUNnb2JXRjBZMmdzSUdkeWIzVndTVzVrWlhncElEMCtJSHRjY2x4dUlDQWdJQ0FnSUNCcFppQW9aM0p2ZFhCSmJtUmxlQ0E5UFQwZ01Da2dlMXh5WEc0Z0lDQWdJQ0FnSUNBZ2JHbHpkQzV3ZFhOb0tHMWhkR05vS1R0Y2NseHVJQ0FnSUNBZ0lDQjlYSEpjYmlBZ0lDQWdJSDBwTzF4eVhHNGdJQ0FnZlZ4eVhHNGdJQ0FnYkdWMElISmxjM1ZzZER0Y2NseHVJQ0FnSUd4cGMzUXVabTl5UldGamFDZ29kWEpzS1NBOVBpQjdYSEpjYmlBZ0lDQWdJSEpsYzNWc2RDQTlJSEJoZEdndWNtVndiR0ZqWlNoMWNtd3NJQ2NxS3lvbktUdGNjbHh1WEhKY2JpQWdJQ0FnSUdacGJtRnNJRDBnY21WemRXeDBMbk53YkdsMEtDY3VKeWt1YldGd0tDaHBkR1Z0S1NBOVBpQjdYSEpjYmlBZ0lDQWdJQ0FnYVdZZ0tHbDBaVzBnUFQwOUlDY3FLeW9uS1NCN0lISmxkSFZ5YmlCMWNtdzdJSDFjY2x4dUlDQWdJQ0FnSUNCeVpYUjFjbTRnYVhSbGJUdGNjbHh1SUNBZ0lDQWdmU2s3WEhKY2JseHlYRzRnSUNBZ2ZTazdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQmpiMjV6YjJ4bExteHZaeWduVzFObGNuWnBZMlZHY21GdFpYZHZjbXN1VlhScGJITXVZMmhsWTJ0QmRIUnlhV0oxZEdWZEp5d2dabWx1WVd3cE8xeHlYRzRnSUhKbGRIVnliaUJtYVc1aGJEdGNjbHh1ZlZ4eVhHNWNjbHh1Wlhod2IzSjBJR1oxYm1OMGFXOXVJSEJoY25ObFFYUjBjbWxpZFhSbGN5aHdZWFJvS1NCN1hISmNiaUFnYkdWMElISmxaMlY0SUQwZ0x5aGJNQzA1WVMxNlFTMWFYVnN0WEZ4M1hTb3BPbHhjTDF4Y0x5OW5PMXh5WEc1Y2NseHVJQ0JzWlhRZ2MzUnlhVzVuTXlBOUlDZHBaR1Z1ZEdsMGVTYzdYSEpjYmx4eVhHNGdJR2xtSUNnaGNHRjBhQzVwYm1Oc2RXUmxjeWduT2k4dkp5a3BJSHRjY2x4dUlDQWdJSEpsZEhWeWJpQW9jR0YwYUM1emNHeHBkQ2duTGljcEtUdGNjbHh1SUNCOUlHVnNjMlVnZTF4eVhHNGdJQ0FnYkdWMElITjBjbWx1WnpFZ1BTQndZWFJvTG5Od2JHbDBLSEpsWjJWNEtWc3dYVHRjY2x4dVhISmNiaUFnSUNCc1pYUWdZWEp5WVhreElEMGdjM1J5YVc1bk1TNXpjR3hwZENnbkxpY3BPMXh5WEc1Y2NseHVJQ0FnSUd4bGRDQnpkSEpwYm1jeUlEMGdjR0YwYUM1eVpYQnNZV05sS0hOMGNtbHVaekVzSUNjbktUdGNjbHh1WEhKY2JpQWdJQ0JwWmlBb2NHRjBhQzVwYm1Oc2RXUmxjeWh6ZEhKcGJtY3pLU2tnZTF4eVhHNWNjbHh1SUNBZ0lDQWdiR1YwSUdGeWNtRjVNaUE5SUhOMGNtbHVaekl1YzNCc2FYUW9jM1J5YVc1bk15QXJJQ2N1SnlrN1hISmNibHh5WEc0Z0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnbllYSnlZWGt5SUNjZ0t5QmhjbkpoZVRJcE8xeHlYRzVjY2x4dUlDQWdJQ0FnYzNSeWFXNW5NaUE5SUdGeWNtRjVNbHN3WFM1emJHbGpaU2duTGljc0lDMHhLVHRjY2x4dVhISmNiaUFnSUNBZ0lHRnljbUY1TWlBOUlHRnljbUY1TWxzeFhTNXpjR3hwZENnbkxpY3BPMXh5WEc1Y2NseHVJQ0FnSUNBZ1lYSnlZWGt4TG5CMWMyZ29jM1J5YVc1bk1pd2djM1J5YVc1bk15azdYSEpjYmx4eVhHNGdJQ0FnSUNCaGNuSmhlVEVnUFNCaGNuSmhlVEV1WTI5dVkyRjBLR0Z5Y21GNU1pazdYSEpjYmx4eVhHNGdJQ0FnZlNCbGJITmxJSHRjY2x4dUlDQWdJQ0FnWVhKeVlYa3hMbkIxYzJnb2MzUnlhVzVuTWlrN1hISmNibHh5WEc0Z0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUhKbGRIVnliaUFvWVhKeVlYa3hMbVpwYkhSbGNpaENiMjlzWldGdUtTazdYSEpjYmx4eVhHNGdJSDFjY2x4dWZWeHlYRzVjYmx4dVhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVpQXZMMXh1THk4Z0xpOXpjbU12ZFhScGJITXZkWFJwYkhNdWFuTWlMQ0p0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSHNnWENKa1pXWmhkV3gwWENJNklISmxjWFZwY21Vb1hDSmpiM0psTFdwekwyeHBZbkpoY25rdlptNHZjSEp2YldselpWd2lLU3dnWDE5bGMwMXZaSFZzWlRvZ2RISjFaU0I5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyTnZjbVV0YW5NdmNISnZiV2x6WlM1cWMxeHVMeThnYlc5a2RXeGxJR2xrSUQwZ056SmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SURFZ05DQTFJaXdpZG1GeUlFMUZWRUVnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmZFdsa0p5a29KMjFsZEdFbktWeHVJQ0FzSUdselQySnFaV04wSUQwZ2NtVnhkV2x5WlNnbkxpOWZhWE10YjJKcVpXTjBKeWxjYmlBZ0xDQm9ZWE1nSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJoaGN5Y3BYRzRnSUN3Z2MyVjBSR1Z6WXlBZ1BTQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRaSEFuS1M1bVhHNGdJQ3dnYVdRZ0lDQWdJQ0FnUFNBd08xeHVkbUZ5SUdselJYaDBaVzV6YVdKc1pTQTlJRTlpYW1WamRDNXBjMFY0ZEdWdWMybGliR1VnZkh3Z1puVnVZM1JwYjI0b0tYdGNiaUFnY21WMGRYSnVJSFJ5ZFdVN1hHNTlPMXh1ZG1GeUlFWlNSVVZhUlNBOUlDRnlaWEYxYVhKbEtDY3VMMTltWVdsc2N5Y3BLR1oxYm1OMGFXOXVLQ2w3WEc0Z0lISmxkSFZ5YmlCcGMwVjRkR1Z1YzJsaWJHVW9UMkpxWldOMExuQnlaWFpsYm5SRmVIUmxibk5wYjI1ektIdDlLU2s3WEc1OUtUdGNiblpoY2lCelpYUk5aWFJoSUQwZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCelpYUkVaWE5qS0dsMExDQk5SVlJCTENCN2RtRnNkV1U2SUh0Y2JpQWdJQ0JwT2lBblR5Y2dLeUFySzJsa0xDQXZMeUJ2WW1wbFkzUWdTVVJjYmlBZ0lDQjNPaUI3ZlNBZ0lDQWdJQ0FnSUNBdkx5QjNaV0ZySUdOdmJHeGxZM1JwYjI1eklFbEVjMXh1SUNCOWZTazdYRzU5TzF4dWRtRnlJR1poYzNSTFpYa2dQU0JtZFc1amRHbHZiaWhwZEN3Z1kzSmxZWFJsS1h0Y2JpQWdMeThnY21WMGRYSnVJSEJ5YVcxcGRHbDJaU0IzYVhSb0lIQnlaV1pwZUZ4dUlDQnBaaWdoYVhOUFltcGxZM1FvYVhRcEtYSmxkSFZ5YmlCMGVYQmxiMllnYVhRZ1BUMGdKM041YldKdmJDY2dQeUJwZENBNklDaDBlWEJsYjJZZ2FYUWdQVDBnSjNOMGNtbHVaeWNnUHlBblV5Y2dPaUFuVUNjcElDc2dhWFE3WEc0Z0lHbG1LQ0ZvWVhNb2FYUXNJRTFGVkVFcEtYdGNiaUFnSUNBdkx5QmpZVzRuZENCelpYUWdiV1YwWVdSaGRHRWdkRzhnZFc1allYVm5hSFFnWm5KdmVtVnVJRzlpYW1WamRGeHVJQ0FnSUdsbUtDRnBjMFY0ZEdWdWMybGliR1VvYVhRcEtYSmxkSFZ5YmlBblJpYzdYRzRnSUNBZ0x5OGdibTkwSUc1bFkyVnpjMkZ5ZVNCMGJ5QmhaR1FnYldWMFlXUmhkR0ZjYmlBZ0lDQnBaaWdoWTNKbFlYUmxLWEpsZEhWeWJpQW5SU2M3WEc0Z0lDQWdMeThnWVdSa0lHMXBjM05wYm1jZ2JXVjBZV1JoZEdGY2JpQWdJQ0J6WlhSTlpYUmhLR2wwS1R0Y2JpQWdMeThnY21WMGRYSnVJRzlpYW1WamRDQkpSRnh1SUNCOUlISmxkSFZ5YmlCcGRGdE5SVlJCWFM1cE8xeHVmVHRjYm5aaGNpQm5aWFJYWldGcklEMGdablZ1WTNScGIyNG9hWFFzSUdOeVpXRjBaU2w3WEc0Z0lHbG1LQ0ZvWVhNb2FYUXNJRTFGVkVFcEtYdGNiaUFnSUNBdkx5QmpZVzRuZENCelpYUWdiV1YwWVdSaGRHRWdkRzhnZFc1allYVm5hSFFnWm5KdmVtVnVJRzlpYW1WamRGeHVJQ0FnSUdsbUtDRnBjMFY0ZEdWdWMybGliR1VvYVhRcEtYSmxkSFZ5YmlCMGNuVmxPMXh1SUNBZ0lDOHZJRzV2ZENCdVpXTmxjM05oY25rZ2RHOGdZV1JrSUcxbGRHRmtZWFJoWEc0Z0lDQWdhV1lvSVdOeVpXRjBaU2x5WlhSMWNtNGdabUZzYzJVN1hHNGdJQ0FnTHk4Z1lXUmtJRzFwYzNOcGJtY2diV1YwWVdSaGRHRmNiaUFnSUNCelpYUk5aWFJoS0dsMEtUdGNiaUFnTHk4Z2NtVjBkWEp1SUdoaGMyZ2dkMlZoYXlCamIyeHNaV04wYVc5dWN5QkpSSE5jYmlBZ2ZTQnlaWFIxY200Z2FYUmJUVVZVUVYwdWR6dGNibjA3WEc0dkx5QmhaR1FnYldWMFlXUmhkR0VnYjI0Z1puSmxaWHBsTFdaaGJXbHNlU0J0WlhSb2IyUnpJR05oYkd4cGJtZGNiblpoY2lCdmJrWnlaV1Y2WlNBOUlHWjFibU4wYVc5dUtHbDBLWHRjYmlBZ2FXWW9SbEpGUlZwRklDWW1JRzFsZEdFdVRrVkZSQ0FtSmlCcGMwVjRkR1Z1YzJsaWJHVW9hWFFwSUNZbUlDRm9ZWE1vYVhRc0lFMUZWRUVwS1hObGRFMWxkR0VvYVhRcE8xeHVJQ0J5WlhSMWNtNGdhWFE3WEc1OU8xeHVkbUZ5SUcxbGRHRWdQU0J0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSHRjYmlBZ1MwVlpPaUFnSUNBZ0lFMUZWRUVzWEc0Z0lFNUZSVVE2SUNBZ0lDQm1ZV3h6WlN4Y2JpQWdabUZ6ZEV0bGVUb2dJR1poYzNSTFpYa3NYRzRnSUdkbGRGZGxZV3M2SUNCblpYUlhaV0ZyTEZ4dUlDQnZia1p5WldWNlpUb2diMjVHY21WbGVtVmNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXRaWFJoTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBM00xeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWlMQ0oyWVhJZ1kyeGhjM052WmlBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWTJ4aGMzTnZaaWNwWEc0Z0lDd2dTVlJGVWtGVVQxSWdJRDBnY21WeGRXbHlaU2duTGk5ZmQydHpKeWtvSjJsMFpYSmhkRzl5SnlsY2JpQWdMQ0JKZEdWeVlYUnZjbk1nUFNCeVpYRjFhWEpsS0NjdUwxOXBkR1Z5WVhSdmNuTW5LVHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnY21WeGRXbHlaU2duTGk5ZlkyOXlaU2NwTG1kbGRFbDBaWEpoZEc5eVRXVjBhRzlrSUQwZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCcFppaHBkQ0FoUFNCMWJtUmxabWx1WldRcGNtVjBkWEp1SUdsMFcwbFVSVkpCVkU5U1hWeHVJQ0FnSUh4OElHbDBXeWRBUUdsMFpYSmhkRzl5SjExY2JpQWdJQ0I4ZkNCSmRHVnlZWFJ2Y25OYlkyeGhjM052WmlocGRDbGRPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZZMjl5WlM1blpYUXRhWFJsY21GMGIzSXRiV1YwYUc5a0xtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTNORnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQTBJRFVpTENKdGIyUjFiR1V1Wlhod2IzSjBjeUE5SUhzZ1hDSmtaV1poZFd4MFhDSTZJSEpsY1hWcGNtVW9YQ0pqYjNKbExXcHpMMnhwWW5KaGNua3ZabTR2YjJKcVpXTjBMMk55WldGMFpWd2lLU3dnWDE5bGMwMXZaSFZzWlRvZ2RISjFaU0I5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlpWVdKbGJDMXlkVzUwYVcxbEwyTnZjbVV0YW5NdmIySnFaV04wTDJOeVpXRjBaUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTnpWY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2liVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQjdJRndpWkdWbVlYVnNkRndpT2lCeVpYRjFhWEpsS0Z3aVkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwyOWlhbVZqZEM5elpYUXRjSEp2ZEc5MGVYQmxMVzltWENJcExDQmZYMlZ6VFc5a2RXeGxPaUIwY25WbElIMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wySmhZbVZzTFhKMWJuUnBiV1V2WTI5eVpTMXFjeTl2WW1wbFkzUXZjMlYwTFhCeWIzUnZkSGx3WlMxdlppNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdOelpjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCN0lGd2laR1ZtWVhWc2RGd2lPaUJ5WlhGMWFYSmxLRndpWTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDNONWJXSnZiRndpS1N3Z1gxOWxjMDF2WkhWc1pUb2dkSEoxWlNCOU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5aVlXSmxiQzF5ZFc1MGFXMWxMMk52Y21VdGFuTXZjM2x0WW05c0xtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTNOMXh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQXlJRE1pTENKdGIyUjFiR1V1Wlhod2IzSjBjeUE5SUhzZ1hDSmtaV1poZFd4MFhDSTZJSEpsY1hWcGNtVW9YQ0pqYjNKbExXcHpMMnhwWW5KaGNua3ZabTR2YzNsdFltOXNMMmwwWlhKaGRHOXlYQ0lwTENCZlgyVnpUVzlrZFd4bE9pQjBjblZsSUgwN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJKaFltVnNMWEoxYm5ScGJXVXZZMjl5WlMxcWN5OXplVzFpYjJ3dmFYUmxjbUYwYjNJdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEYzRYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSW5KbGNYVnBjbVVvSnk0dUx5NHVMMjF2WkhWc1pYTXZaWE0yTG05aWFtVmpkQzVqY21WaGRHVW5LVHRjYm5aaGNpQWtUMkpxWldOMElEMGdjbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5ZlkyOXlaU2NwTGs5aWFtVmpkRHRjYm0xdlpIVnNaUzVsZUhCdmNuUnpJRDBnWm5WdVkzUnBiMjRnWTNKbFlYUmxLRkFzSUVRcGUxeHVJQ0J5WlhSMWNtNGdKRTlpYW1WamRDNWpjbVZoZEdVb1VDd2dSQ2s3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Wm00dmIySnFaV04wTDJOeVpXRjBaUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTnpsY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2ljbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5bGN6WXViMkpxWldOMExtZGxkQzF3Y205MGIzUjVjR1V0YjJZbktUdGNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdjbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5ZlkyOXlaU2NwTGs5aWFtVmpkQzVuWlhSUWNtOTBiM1I1Y0dWUFpqdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDJadUwyOWlhbVZqZEM5blpYUXRjSEp2ZEc5MGVYQmxMVzltTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBNE1GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBeUlETWlMQ0p5WlhGMWFYSmxLQ2N1TGk4dUxpOXRiMlIxYkdWekwyVnpOaTV2WW1wbFkzUXVhMlY1Y3ljcE8xeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQnlaWEYxYVhKbEtDY3VMaTh1TGk5dGIyUjFiR1Z6TDE5amIzSmxKeWt1VDJKcVpXTjBMbXRsZVhNN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzltYmk5dlltcGxZM1F2YTJWNWN5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdPREZjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lESWdOQ0ExSWl3aWNtVnhkV2x5WlNnbkxpNHZMaTR2Ylc5a2RXeGxjeTlsY3pZdWIySnFaV04wTG5ObGRDMXdjbTkwYjNSNWNHVXRiMlluS1R0Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ2NtVnhkV2x5WlNnbkxpNHZMaTR2Ylc5a2RXeGxjeTlmWTI5eVpTY3BMazlpYW1WamRDNXpaWFJRY205MGIzUjVjR1ZQWmp0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzl6WlhRdGNISnZkRzkwZVhCbExXOW1MbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0E0TWx4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSnlaWEYxYVhKbEtDY3VMaTl0YjJSMWJHVnpMMlZ6Tmk1dlltcGxZM1F1ZEc4dGMzUnlhVzVuSnlrN1hHNXlaWEYxYVhKbEtDY3VMaTl0YjJSMWJHVnpMMlZ6Tmk1emRISnBibWN1YVhSbGNtRjBiM0luS1R0Y2JuSmxjWFZwY21Vb0p5NHVMMjF2WkhWc1pYTXZkMlZpTG1SdmJTNXBkR1Z5WVdKc1pTY3BPMXh1Y21WeGRXbHlaU2duTGk0dmJXOWtkV3hsY3k5bGN6WXVjSEp2YldselpTY3BPMXh1Ylc5a2RXeGxMbVY0Y0c5eWRITWdQU0J5WlhGMWFYSmxLQ2N1TGk5dGIyUjFiR1Z6TDE5amIzSmxKeWt1VUhKdmJXbHpaVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMM0J5YjIxcGMyVXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGd6WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRFFnTlNJc0luSmxjWFZwY21Vb0p5NHVMeTR1TDIxdlpIVnNaWE12WlhNMkxuTjViV0p2YkNjcE8xeHVjbVZ4ZFdseVpTZ25MaTR2TGk0dmJXOWtkV3hsY3k5bGN6WXViMkpxWldOMExuUnZMWE4wY21sdVp5Y3BPMXh1Y21WeGRXbHlaU2duTGk0dkxpNHZiVzlrZFd4bGN5OWxjemN1YzNsdFltOXNMbUZ6ZVc1akxXbDBaWEpoZEc5eUp5azdYRzV5WlhGMWFYSmxLQ2N1TGk4dUxpOXRiMlIxYkdWekwyVnpOeTV6ZVcxaWIyd3ViMkp6WlhKMllXSnNaU2NwTzF4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCeVpYRjFhWEpsS0NjdUxpOHVMaTl0YjJSMWJHVnpMMTlqYjNKbEp5a3VVM2x0WW05c08xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Wm00dmMzbHRZbTlzTDJsdVpHVjRMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0E0TkZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSnlaWEYxYVhKbEtDY3VMaTh1TGk5dGIyUjFiR1Z6TDJWek5pNXpkSEpwYm1jdWFYUmxjbUYwYjNJbktUdGNibkpsY1hWcGNtVW9KeTR1THk0dUwyMXZaSFZzWlhNdmQyVmlMbVJ2YlM1cGRHVnlZV0pzWlNjcE8xeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQnlaWEYxYVhKbEtDY3VMaTh1TGk5dGIyUjFiR1Z6TDE5M2EzTXRaWGgwSnlrdVppZ25hWFJsY21GMGIzSW5LVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMM041YldKdmJDOXBkR1Z5WVhSdmNpNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdPRFZjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmlocGRDd2dRMjl1YzNSeWRXTjBiM0lzSUc1aGJXVXNJR1p2Y21KcFpHUmxia1pwWld4a0tYdGNiaUFnYVdZb0lTaHBkQ0JwYm5OMFlXNWpaVzltSUVOdmJuTjBjblZqZEc5eUtTQjhmQ0FvWm05eVltbGtaR1Z1Um1sbGJHUWdJVDA5SUhWdVpHVm1hVzVsWkNBbUppQm1iM0ppYVdSa1pXNUdhV1ZzWkNCcGJpQnBkQ2twZTF4dUlDQWdJSFJvY205M0lGUjVjR1ZGY25KdmNpaHVZVzFsSUNzZ0p6b2dhVzVqYjNKeVpXTjBJR2x1ZG05allYUnBiMjRoSnlrN1hHNGdJSDBnY21WMGRYSnVJR2wwTzF4dWZUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WDJGdUxXbHVjM1JoYm1ObExtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQTRObHh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQTBJRFVpTENJdkx5QmhiR3dnWlc1MWJXVnlZV0pzWlNCdlltcGxZM1FnYTJWNWN5d2dhVzVqYkhWa1pYTWdjM2x0WW05c2MxeHVkbUZ5SUdkbGRFdGxlWE1nUFNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdGEyVjVjeWNwWEc0Z0lDd2daMDlRVXlBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFuYjNCekp5bGNiaUFnTENCd1NVVWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExYQnBaU2NwTzF4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCbWRXNWpkR2x2YmlocGRDbDdYRzRnSUhaaGNpQnlaWE4xYkhRZ0lDQWdJRDBnWjJWMFMyVjVjeWhwZENsY2JpQWdJQ0FzSUdkbGRGTjViV0p2YkhNZ1BTQm5UMUJUTG1ZN1hHNGdJR2xtS0dkbGRGTjViV0p2YkhNcGUxeHVJQ0FnSUhaaGNpQnplVzFpYjJ4eklEMGdaMlYwVTNsdFltOXNjeWhwZENsY2JpQWdJQ0FnSUN3Z2FYTkZiblZ0SUNBOUlIQkpSUzVtWEc0Z0lDQWdJQ0FzSUdrZ0lDQWdJQ0FnUFNBd1hHNGdJQ0FnSUNBc0lHdGxlVHRjYmlBZ0lDQjNhR2xzWlNoemVXMWliMnh6TG14bGJtZDBhQ0ErSUdrcGFXWW9hWE5GYm5WdExtTmhiR3dvYVhRc0lHdGxlU0E5SUhONWJXSnZiSE5iYVNzclhTa3BjbVZ6ZFd4MExuQjFjMmdvYTJWNUtUdGNiaUFnZlNCeVpYUjFjbTRnY21WemRXeDBPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMlZ1ZFcwdGEyVjVjeTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnT0RkY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2lkbUZ5SUdOMGVDQWdJQ0FnSUNBZ0lEMGdjbVZ4ZFdseVpTZ25MaTlmWTNSNEp5bGNiaUFnTENCallXeHNJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJsMFpYSXRZMkZzYkNjcFhHNGdJQ3dnYVhOQmNuSmhlVWwwWlhJZ1BTQnlaWEYxYVhKbEtDY3VMMTlwY3kxaGNuSmhlUzFwZEdWeUp5bGNiaUFnTENCaGJrOWlhbVZqZENBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJGdUxXOWlhbVZqZENjcFhHNGdJQ3dnZEc5TVpXNW5kR2dnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkwYnkxc1pXNW5kR2duS1Z4dUlDQXNJR2RsZEVsMFpYSkdiaUFnSUQwZ2NtVnhkV2x5WlNnbkxpOWpiM0psTG1kbGRDMXBkR1Z5WVhSdmNpMXRaWFJvYjJRbktWeHVJQ0FzSUVKU1JVRkxJQ0FnSUNBZ0lEMGdlMzFjYmlBZ0xDQlNSVlJWVWs0Z0lDQWdJQ0E5SUh0OU8xeHVkbUZ5SUdWNGNHOXlkSE1nUFNCdGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0dsMFpYSmhZbXhsTENCbGJuUnlhV1Z6TENCbWJpd2dkR2hoZEN3Z1NWUkZVa0ZVVDFJcGUxeHVJQ0IyWVhJZ2FYUmxja1p1SUQwZ1NWUkZVa0ZVVDFJZ1B5Qm1kVzVqZEdsdmJpZ3BleUJ5WlhSMWNtNGdhWFJsY21GaWJHVTdJSDBnT2lCblpYUkpkR1Z5Um00b2FYUmxjbUZpYkdVcFhHNGdJQ0FnTENCbUlDQWdJQ0FnUFNCamRIZ29abTRzSUhSb1lYUXNJR1Z1ZEhKcFpYTWdQeUF5SURvZ01TbGNiaUFnSUNBc0lHbHVaR1Y0SUNBOUlEQmNiaUFnSUNBc0lHeGxibWQwYUN3Z2MzUmxjQ3dnYVhSbGNtRjBiM0lzSUhKbGMzVnNkRHRjYmlBZ2FXWW9kSGx3Wlc5bUlHbDBaWEpHYmlBaFBTQW5ablZ1WTNScGIyNG5LWFJvY205M0lGUjVjR1ZGY25KdmNpaHBkR1Z5WVdKc1pTQXJJQ2NnYVhNZ2JtOTBJR2wwWlhKaFlteGxJU2NwTzF4dUlDQXZMeUJtWVhOMElHTmhjMlVnWm05eUlHRnljbUY1Y3lCM2FYUm9JR1JsWm1GMWJIUWdhWFJsY21GMGIzSmNiaUFnYVdZb2FYTkJjbkpoZVVsMFpYSW9hWFJsY2tadUtTbG1iM0lvYkdWdVozUm9JRDBnZEc5TVpXNW5kR2dvYVhSbGNtRmliR1V1YkdWdVozUm9LVHNnYkdWdVozUm9JRDRnYVc1a1pYZzdJR2x1WkdWNEt5c3BlMXh1SUNBZ0lISmxjM1ZzZENBOUlHVnVkSEpwWlhNZ1B5Qm1LR0Z1VDJKcVpXTjBLSE4wWlhBZ1BTQnBkR1Z5WVdKc1pWdHBibVJsZUYwcFd6QmRMQ0J6ZEdWd1d6RmRLU0E2SUdZb2FYUmxjbUZpYkdWYmFXNWtaWGhkS1R0Y2JpQWdJQ0JwWmloeVpYTjFiSFFnUFQwOUlFSlNSVUZMSUh4OElISmxjM1ZzZENBOVBUMGdVa1ZVVlZKT0tYSmxkSFZ5YmlCeVpYTjFiSFE3WEc0Z0lIMGdaV3h6WlNCbWIzSW9hWFJsY21GMGIzSWdQU0JwZEdWeVJtNHVZMkZzYkNocGRHVnlZV0pzWlNrN0lDRW9jM1JsY0NBOUlHbDBaWEpoZEc5eUxtNWxlSFFvS1NrdVpHOXVaVHNnS1h0Y2JpQWdJQ0J5WlhOMWJIUWdQU0JqWVd4c0tHbDBaWEpoZEc5eUxDQm1MQ0J6ZEdWd0xuWmhiSFZsTENCbGJuUnlhV1Z6S1R0Y2JpQWdJQ0JwWmloeVpYTjFiSFFnUFQwOUlFSlNSVUZMSUh4OElISmxjM1ZzZENBOVBUMGdVa1ZVVlZKT0tYSmxkSFZ5YmlCeVpYTjFiSFE3WEc0Z0lIMWNibjA3WEc1bGVIQnZjblJ6TGtKU1JVRkxJQ0E5SUVKU1JVRkxPMXh1Wlhod2IzSjBjeTVTUlZSVlVrNGdQU0JTUlZSVlVrNDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5bWIzSXRiMll1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURnNFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURRZ05TSXNJaTh2SUdaaGMzUWdZWEJ3Ykhrc0lHaDBkSEE2THk5cWMzQmxjbVl1Ykc1cmFYUXVZMjl0TDJaaGMzUXRZWEJ3Ykhrdk5WeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaG1iaXdnWVhKbmN5d2dkR2hoZENsN1hHNGdJSFpoY2lCMWJpQTlJSFJvWVhRZ1BUMDlJSFZ1WkdWbWFXNWxaRHRjYmlBZ2MzZHBkR05vS0dGeVozTXViR1Z1WjNSb0tYdGNiaUFnSUNCallYTmxJREE2SUhKbGRIVnliaUIxYmlBL0lHWnVLQ2xjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQTZJR1p1TG1OaGJHd29kR2hoZENrN1hHNGdJQ0FnWTJGelpTQXhPaUJ5WlhSMWNtNGdkVzRnUHlCbWJpaGhjbWR6V3pCZEtWeHVJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSURvZ1ptNHVZMkZzYkNoMGFHRjBMQ0JoY21keld6QmRLVHRjYmlBZ0lDQmpZWE5sSURJNklISmxkSFZ5YmlCMWJpQS9JR1p1S0dGeVozTmJNRjBzSUdGeVozTmJNVjBwWEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdPaUJtYmk1allXeHNLSFJvWVhRc0lHRnlaM05iTUYwc0lHRnlaM05iTVYwcE8xeHVJQ0FnSUdOaGMyVWdNem9nY21WMGRYSnVJSFZ1SUQ4Z1ptNG9ZWEpuYzFzd1hTd2dZWEpuYzFzeFhTd2dZWEpuYzFzeVhTbGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBNklHWnVMbU5oYkd3b2RHaGhkQ3dnWVhKbmMxc3dYU3dnWVhKbmMxc3hYU3dnWVhKbmMxc3lYU2s3WEc0Z0lDQWdZMkZ6WlNBME9pQnlaWFIxY200Z2RXNGdQeUJtYmloaGNtZHpXekJkTENCaGNtZHpXekZkTENCaGNtZHpXekpkTENCaGNtZHpXek5kS1Z4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRG9nWm00dVkyRnNiQ2gwYUdGMExDQmhjbWR6V3pCZExDQmhjbWR6V3pGZExDQmhjbWR6V3pKZExDQmhjbWR6V3pOZEtUdGNiaUFnZlNCeVpYUjFjbTRnSUNBZ0lDQWdJQ0FnSUNBZ0lHWnVMbUZ3Y0d4NUtIUm9ZWFFzSUdGeVozTXBPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZYMmx1ZG05clpTNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdPRGxjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdOQ0ExSWl3aUx5OGdZMmhsWTJzZ2IyNGdaR1ZtWVhWc2RDQkJjbkpoZVNCcGRHVnlZWFJ2Y2x4dWRtRnlJRWwwWlhKaGRHOXljeUFnUFNCeVpYRjFhWEpsS0NjdUwxOXBkR1Z5WVhSdmNuTW5LVnh1SUNBc0lFbFVSVkpCVkU5U0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5M2EzTW5LU2duYVhSbGNtRjBiM0luS1Z4dUlDQXNJRUZ5Y21GNVVISnZkRzhnUFNCQmNuSmhlUzV3Y205MGIzUjVjR1U3WEc1Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b2FYUXBlMXh1SUNCeVpYUjFjbTRnYVhRZ0lUMDlJSFZ1WkdWbWFXNWxaQ0FtSmlBb1NYUmxjbUYwYjNKekxrRnljbUY1SUQwOVBTQnBkQ0I4ZkNCQmNuSmhlVkJ5YjNSdlcwbFVSVkpCVkU5U1hTQTlQVDBnYVhRcE8xeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlgybHpMV0Z5Y21GNUxXbDBaWEl1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURrd1hHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURRZ05TSXNJaTh2SURjdU1pNHlJRWx6UVhKeVlYa29ZWEpuZFcxbGJuUXBYRzUyWVhJZ1kyOW1JRDBnY21WeGRXbHlaU2duTGk5ZlkyOW1KeWs3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUVGeWNtRjVMbWx6UVhKeVlYa2dmSHdnWm5WdVkzUnBiMjRnYVhOQmNuSmhlU2hoY21jcGUxeHVJQ0J5WlhSMWNtNGdZMjltS0dGeVp5a2dQVDBnSjBGeWNtRjVKenRjYm4wN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMTlwY3kxaGNuSmhlUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnT1RGY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2lMeThnWTJGc2JDQnpiMjFsZEdocGJtY2diMjRnYVhSbGNtRjBiM0lnYzNSbGNDQjNhWFJvSUhOaFptVWdZMnh2YzJsdVp5QnZiaUJsY25KdmNseHVkbUZ5SUdGdVQySnFaV04wSUQwZ2NtVnhkV2x5WlNnbkxpOWZZVzR0YjJKcVpXTjBKeWs3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0dsMFpYSmhkRzl5TENCbWJpd2dkbUZzZFdVc0lHVnVkSEpwWlhNcGUxeHVJQ0IwY25rZ2UxeHVJQ0FnSUhKbGRIVnliaUJsYm5SeWFXVnpJRDhnWm00b1lXNVBZbXBsWTNRb2RtRnNkV1VwV3pCZExDQjJZV3gxWlZzeFhTa2dPaUJtYmloMllXeDFaU2s3WEc0Z0lDOHZJRGN1TkM0MklFbDBaWEpoZEc5eVEyeHZjMlVvYVhSbGNtRjBiM0lzSUdOdmJYQnNaWFJwYjI0cFhHNGdJSDBnWTJGMFkyZ29aU2w3WEc0Z0lDQWdkbUZ5SUhKbGRDQTlJR2wwWlhKaGRHOXlXeWR5WlhSMWNtNG5YVHRjYmlBZ0lDQnBaaWh5WlhRZ0lUMDlJSFZ1WkdWbWFXNWxaQ2xoYms5aWFtVmpkQ2h5WlhRdVkyRnNiQ2hwZEdWeVlYUnZjaWtwTzF4dUlDQWdJSFJvY205M0lHVTdYRzRnSUgxY2JuMDdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDE5cGRHVnlMV05oYkd3dWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEa3lYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElEUWdOU0lzSW5aaGNpQkpWRVZTUVZSUFVpQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOTNhM01uS1NnbmFYUmxjbUYwYjNJbktWeHVJQ0FzSUZOQlJrVmZRMHhQVTBsT1J5QTlJR1poYkhObE8xeHVYRzUwY25rZ2UxeHVJQ0IyWVhJZ2NtbDBaWElnUFNCYk4xMWJTVlJGVWtGVVQxSmRLQ2s3WEc0Z0lISnBkR1Z5V3lkeVpYUjFjbTRuWFNBOUlHWjFibU4wYVc5dUtDbDdJRk5CUmtWZlEweFBVMGxPUnlBOUlIUnlkV1U3SUgwN1hHNGdJRUZ5Y21GNUxtWnliMjBvY21sMFpYSXNJR1oxYm1OMGFXOXVLQ2w3SUhSb2NtOTNJREk3SUgwcE8xeHVmU0JqWVhSamFDaGxLWHNnTHlvZ1pXMXdkSGtnS2k4Z2ZWeHVYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJR1oxYm1OMGFXOXVLR1Y0WldNc0lITnJhWEJEYkc5emFXNW5LWHRjYmlBZ2FXWW9JWE5yYVhCRGJHOXphVzVuSUNZbUlDRlRRVVpGWDBOTVQxTkpUa2NwY21WMGRYSnVJR1poYkhObE8xeHVJQ0IyWVhJZ2MyRm1aU0E5SUdaaGJITmxPMXh1SUNCMGNua2dlMXh1SUNBZ0lIWmhjaUJoY25JZ0lEMGdXemRkWEc0Z0lDQWdJQ0FzSUdsMFpYSWdQU0JoY25KYlNWUkZVa0ZVVDFKZEtDazdYRzRnSUNBZ2FYUmxjaTV1WlhoMElEMGdablZ1WTNScGIyNG9LWHNnY21WMGRYSnVJSHRrYjI1bE9pQnpZV1psSUQwZ2RISjFaWDA3SUgwN1hHNGdJQ0FnWVhKeVcwbFVSVkpCVkU5U1hTQTlJR1oxYm1OMGFXOXVLQ2w3SUhKbGRIVnliaUJwZEdWeU95QjlPMXh1SUNBZ0lHVjRaV01vWVhKeUtUdGNiaUFnZlNCallYUmphQ2hsS1hzZ0x5b2daVzF3ZEhrZ0tpOGdmVnh1SUNCeVpYUjFjbTRnYzJGbVpUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXBkR1Z5TFdSbGRHVmpkQzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnT1ROY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTkNBMUlpd2lkbUZ5SUdkbGRFdGxlWE1nSUNBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMXJaWGx6SnlsY2JpQWdMQ0IwYjBsUFltcGxZM1FnUFNCeVpYRjFhWEpsS0NjdUwxOTBieTFwYjJKcVpXTjBKeWs3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0c5aWFtVmpkQ3dnWld3cGUxeHVJQ0IyWVhJZ1R5QWdJQ0FnSUQwZ2RHOUpUMkpxWldOMEtHOWlhbVZqZENsY2JpQWdJQ0FzSUd0bGVYTWdJQ0E5SUdkbGRFdGxlWE1vVHlsY2JpQWdJQ0FzSUd4bGJtZDBhQ0E5SUd0bGVYTXViR1Z1WjNSb1hHNGdJQ0FnTENCcGJtUmxlQ0FnUFNBd1hHNGdJQ0FnTENCclpYazdYRzRnSUhkb2FXeGxLR3hsYm1kMGFDQStJR2x1WkdWNEtXbG1LRTliYTJWNUlEMGdhMlY1YzF0cGJtUmxlQ3NyWFYwZ1BUMDlJR1ZzS1hKbGRIVnliaUJyWlhrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmEyVjViMll1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURrMFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015SXNJblpoY2lCbmJHOWlZV3dnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTluYkc5aVlXd25LVnh1SUNBc0lHMWhZM0p2ZEdGemF5QTlJSEpsY1hWcGNtVW9KeTR2WDNSaGMyc25LUzV6WlhSY2JpQWdMQ0JQWW5ObGNuWmxjaUFnUFNCbmJHOWlZV3d1VFhWMFlYUnBiMjVQWW5ObGNuWmxjaUI4ZkNCbmJHOWlZV3d1VjJWaVMybDBUWFYwWVhScGIyNVBZbk5sY25abGNseHVJQ0FzSUhCeWIyTmxjM01nSUNBOUlHZHNiMkpoYkM1d2NtOWpaWE56WEc0Z0lDd2dVSEp2YldselpTQWdJRDBnWjJ4dlltRnNMbEJ5YjIxcGMyVmNiaUFnTENCcGMwNXZaR1VnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlqYjJZbktTaHdjbTlqWlhOektTQTlQU0FuY0hKdlkyVnpjeWM3WEc1Y2JtMXZaSFZzWlM1bGVIQnZjblJ6SUQwZ1puVnVZM1JwYjI0b0tYdGNiaUFnZG1GeUlHaGxZV1FzSUd4aGMzUXNJRzV2ZEdsbWVUdGNibHh1SUNCMllYSWdabXgxYzJnZ1BTQm1kVzVqZEdsdmJpZ3BlMXh1SUNBZ0lIWmhjaUJ3WVhKbGJuUXNJR1p1TzF4dUlDQWdJR2xtS0dselRtOWtaU0FtSmlBb2NHRnlaVzUwSUQwZ2NISnZZMlZ6Y3k1a2IyMWhhVzRwS1hCaGNtVnVkQzVsZUdsMEtDazdYRzRnSUNBZ2QyaHBiR1VvYUdWaFpDbDdYRzRnSUNBZ0lDQm1iaUFnSUQwZ2FHVmhaQzVtYmp0Y2JpQWdJQ0FnSUdobFlXUWdQU0JvWldGa0xtNWxlSFE3WEc0Z0lDQWdJQ0IwY25rZ2UxeHVJQ0FnSUNBZ0lDQm1iaWdwTzF4dUlDQWdJQ0FnZlNCallYUmphQ2hsS1h0Y2JpQWdJQ0FnSUNBZ2FXWW9hR1ZoWkNsdWIzUnBabmtvS1R0Y2JpQWdJQ0FnSUNBZ1pXeHpaU0JzWVhOMElEMGdkVzVrWldacGJtVmtPMXh1SUNBZ0lDQWdJQ0IwYUhKdmR5QmxPMXh1SUNBZ0lDQWdmVnh1SUNBZ0lIMGdiR0Z6ZENBOUlIVnVaR1ZtYVc1bFpEdGNiaUFnSUNCcFppaHdZWEpsYm5RcGNHRnlaVzUwTG1WdWRHVnlLQ2s3WEc0Z0lIMDdYRzVjYmlBZ0x5OGdUbTlrWlM1cWMxeHVJQ0JwWmlocGMwNXZaR1VwZTF4dUlDQWdJRzV2ZEdsbWVTQTlJR1oxYm1OMGFXOXVLQ2w3WEc0Z0lDQWdJQ0J3Y205alpYTnpMbTVsZUhSVWFXTnJLR1pzZFhOb0tUdGNiaUFnSUNCOU8xeHVJQ0F2THlCaWNtOTNjMlZ5Y3lCM2FYUm9JRTExZEdGMGFXOXVUMkp6WlhKMlpYSmNiaUFnZlNCbGJITmxJR2xtS0U5aWMyVnlkbVZ5S1h0Y2JpQWdJQ0IyWVhJZ2RHOW5aMnhsSUQwZ2RISjFaVnh1SUNBZ0lDQWdMQ0J1YjJSbElDQWdQU0JrYjJOMWJXVnVkQzVqY21WaGRHVlVaWGgwVG05a1pTZ25KeWs3WEc0Z0lDQWdibVYzSUU5aWMyVnlkbVZ5S0dac2RYTm9LUzV2WW5ObGNuWmxLRzV2WkdVc0lIdGphR0Z5WVdOMFpYSkVZWFJoT2lCMGNuVmxmU2s3SUM4dklHVnpiR2x1ZEMxa2FYTmhZbXhsTFd4cGJtVWdibTh0Ym1WM1hHNGdJQ0FnYm05MGFXWjVJRDBnWm5WdVkzUnBiMjRvS1h0Y2JpQWdJQ0FnSUc1dlpHVXVaR0YwWVNBOUlIUnZaMmRzWlNBOUlDRjBiMmRuYkdVN1hHNGdJQ0FnZlR0Y2JpQWdMeThnWlc1MmFYSnZibTFsYm5SeklIZHBkR2dnYldGNVltVWdibTl1TFdOdmJYQnNaWFJsYkhrZ1kyOXljbVZqZEN3Z1luVjBJR1Y0YVhOMFpXNTBJRkJ5YjIxcGMyVmNiaUFnZlNCbGJITmxJR2xtS0ZCeWIyMXBjMlVnSmlZZ1VISnZiV2x6WlM1eVpYTnZiSFpsS1h0Y2JpQWdJQ0IyWVhJZ2NISnZiV2x6WlNBOUlGQnliMjFwYzJVdWNtVnpiMngyWlNncE8xeHVJQ0FnSUc1dmRHbG1lU0E5SUdaMWJtTjBhVzl1S0NsN1hHNGdJQ0FnSUNCd2NtOXRhWE5sTG5Sb1pXNG9abXgxYzJncE8xeHVJQ0FnSUgwN1hHNGdJQzh2SUdadmNpQnZkR2hsY2lCbGJuWnBjbTl1YldWdWRITWdMU0J0WVdOeWIzUmhjMnNnWW1GelpXUWdiMjQ2WEc0Z0lDOHZJQzBnYzJWMFNXMXRaV1JwWVhSbFhHNGdJQzh2SUMwZ1RXVnpjMkZuWlVOb1lXNXVaV3hjYmlBZ0x5OGdMU0IzYVc1a2IzY3VjRzl6ZEUxbGMzTmhaMXh1SUNBdkx5QXRJRzl1Y21WaFpIbHpkR0YwWldOb1lXNW5aVnh1SUNBdkx5QXRJSE5sZEZScGJXVnZkWFJjYmlBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0J1YjNScFpua2dQU0JtZFc1amRHbHZiaWdwZTF4dUlDQWdJQ0FnTHk4Z2MzUnlZVzVuWlNCSlJTQXJJSGRsWW5CaFkyc2daR1YySUhObGNuWmxjaUJpZFdjZ0xTQjFjMlVnTG1OaGJHd29aMnh2WW1Gc0tWeHVJQ0FnSUNBZ2JXRmpjbTkwWVhOckxtTmhiR3dvWjJ4dlltRnNMQ0JtYkhWemFDazdYRzRnSUNBZ2ZUdGNiaUFnZlZ4dVhHNGdJSEpsZEhWeWJpQm1kVzVqZEdsdmJpaG1iaWw3WEc0Z0lDQWdkbUZ5SUhSaGMyc2dQU0I3Wm00NklHWnVMQ0J1WlhoME9pQjFibVJsWm1sdVpXUjlPMXh1SUNBZ0lHbG1LR3hoYzNRcGJHRnpkQzV1WlhoMElEMGdkR0Z6YXp0Y2JpQWdJQ0JwWmlnaGFHVmhaQ2w3WEc0Z0lDQWdJQ0JvWldGa0lEMGdkR0Z6YXp0Y2JpQWdJQ0FnSUc1dmRHbG1lU2dwTzF4dUlDQWdJSDBnYkdGemRDQTlJSFJoYzJzN1hHNGdJSDA3WEc1OU8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlmYldsamNtOTBZWE5yTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBNU5WeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBMElEVWlMQ0l2THlCbVlXeHNZbUZqYXlCbWIzSWdTVVV4TVNCaWRXZG5lU0JQWW1wbFkzUXVaMlYwVDNkdVVISnZjR1Z5ZEhsT1lXMWxjeUIzYVhSb0lHbG1jbUZ0WlNCaGJtUWdkMmx1Wkc5M1hHNTJZWElnZEc5SlQySnFaV04wSUQwZ2NtVnhkV2x5WlNnbkxpOWZkRzh0YVc5aWFtVmpkQ2NwWEc0Z0lDd2daMDlRVGlBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFdkdmNHNG5LUzVtWEc0Z0lDd2dkRzlUZEhKcGJtY2dJRDBnZTMwdWRHOVRkSEpwYm1jN1hHNWNiblpoY2lCM2FXNWtiM2RPWVcxbGN5QTlJSFI1Y0dWdlppQjNhVzVrYjNjZ1BUMGdKMjlpYW1WamRDY2dKaVlnZDJsdVpHOTNJQ1ltSUU5aWFtVmpkQzVuWlhSUGQyNVFjbTl3WlhKMGVVNWhiV1Z6WEc0Z0lEOGdUMkpxWldOMExtZGxkRTkzYmxCeWIzQmxjblI1VG1GdFpYTW9kMmx1Wkc5M0tTQTZJRnRkTzF4dVhHNTJZWElnWjJWMFYybHVaRzkzVG1GdFpYTWdQU0JtZFc1amRHbHZiaWhwZENsN1hHNGdJSFJ5ZVNCN1hHNGdJQ0FnY21WMGRYSnVJR2RQVUU0b2FYUXBPMXh1SUNCOUlHTmhkR05vS0dVcGUxeHVJQ0FnSUhKbGRIVnliaUIzYVc1a2IzZE9ZVzFsY3k1emJHbGpaU2dwTzF4dUlDQjlYRzU5TzF4dVhHNXRiMlIxYkdVdVpYaHdiM0owY3k1bUlEMGdablZ1WTNScGIyNGdaMlYwVDNkdVVISnZjR1Z5ZEhsT1lXMWxjeWhwZENsN1hHNGdJSEpsZEhWeWJpQjNhVzVrYjNkT1lXMWxjeUFtSmlCMGIxTjBjbWx1Wnk1allXeHNLR2wwS1NBOVBTQW5XMjlpYW1WamRDQlhhVzVrYjNkZEp5QS9JR2RsZEZkcGJtUnZkMDVoYldWektHbDBLU0E2SUdkUFVFNG9kRzlKVDJKcVpXTjBLR2wwS1NrN1hHNTlPMXh1WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXZZbXBsWTNRdFoyOXdiaTFsZUhRdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlEazJYRzR2THlCdGIyUjFiR1VnWTJoMWJtdHpJRDBnTUNBeElESWdNeUlzSW5aaGNpQm9hV1JsSUQwZ2NtVnhkV2x5WlNnbkxpOWZhR2xrWlNjcE8xeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQm1kVzVqZEdsdmJpaDBZWEpuWlhRc0lITnlZeXdnYzJGbVpTbDdYRzRnSUdadmNpaDJZWElnYTJWNUlHbHVJSE55WXlsN1hHNGdJQ0FnYVdZb2MyRm1aU0FtSmlCMFlYSm5aWFJiYTJWNVhTbDBZWEpuWlhSYmEyVjVYU0E5SUhOeVkxdHJaWGxkTzF4dUlDQWdJR1ZzYzJVZ2FHbGtaU2gwWVhKblpYUXNJR3RsZVN3Z2MzSmpXMnRsZVYwcE8xeHVJQ0I5SUhKbGRIVnliaUIwWVhKblpYUTdYRzU5TzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWZjbVZrWldacGJtVXRZV3hzTG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBNU4xeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFnTVNBMElEVWlMQ0l2THlCWGIzSnJjeUIzYVhSb0lGOWZjSEp2ZEc5Zlh5QnZibXg1TGlCUGJHUWdkamdnWTJGdUozUWdkMjl5YXlCM2FYUm9JRzUxYkd3Z2NISnZkRzhnYjJKcVpXTjBjeTVjYmk4cUlHVnpiR2x1ZEMxa2FYTmhZbXhsSUc1dkxYQnliM1J2SUNvdlhHNTJZWElnYVhOUFltcGxZM1FnUFNCeVpYRjFhWEpsS0NjdUwxOXBjeTF2WW1wbFkzUW5LVnh1SUNBc0lHRnVUMkpxWldOMElEMGdjbVZ4ZFdseVpTZ25MaTlmWVc0dGIySnFaV04wSnlrN1hHNTJZWElnWTJobFkyc2dQU0JtZFc1amRHbHZiaWhQTENCd2NtOTBieWw3WEc0Z0lHRnVUMkpxWldOMEtFOHBPMXh1SUNCcFppZ2hhWE5QWW1wbFkzUW9jSEp2ZEc4cElDWW1JSEJ5YjNSdklDRTlQU0J1ZFd4c0tYUm9jbTkzSUZSNWNHVkZjbkp2Y2lod2NtOTBieUFySUZ3aU9pQmpZVzRuZENCelpYUWdZWE1nY0hKdmRHOTBlWEJsSVZ3aUtUdGNibjA3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUh0Y2JpQWdjMlYwT2lCUFltcGxZM1F1YzJWMFVISnZkRzkwZVhCbFQyWWdmSHdnS0NkZlgzQnliM1J2WDE4bklHbHVJSHQ5SUQ4Z0x5OGdaWE5zYVc1MExXUnBjMkZpYkdVdGJHbHVaVnh1SUNBZ0lHWjFibU4wYVc5dUtIUmxjM1FzSUdKMVoyZDVMQ0J6WlhRcGUxeHVJQ0FnSUNBZ2RISjVJSHRjYmlBZ0lDQWdJQ0FnYzJWMElEMGdjbVZ4ZFdseVpTZ25MaTlmWTNSNEp5a29SblZ1WTNScGIyNHVZMkZzYkN3Z2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExXZHZjR1FuS1M1bUtFOWlhbVZqZEM1d2NtOTBiM1I1Y0dVc0lDZGZYM0J5YjNSdlgxOG5LUzV6WlhRc0lESXBPMXh1SUNBZ0lDQWdJQ0J6WlhRb2RHVnpkQ3dnVzEwcE8xeHVJQ0FnSUNBZ0lDQmlkV2RuZVNBOUlDRW9kR1Z6ZENCcGJuTjBZVzVqWlc5bUlFRnljbUY1S1R0Y2JpQWdJQ0FnSUgwZ1kyRjBZMmdvWlNsN0lHSjFaMmQ1SUQwZ2RISjFaVHNnZlZ4dUlDQWdJQ0FnY21WMGRYSnVJR1oxYm1OMGFXOXVJSE5sZEZCeWIzUnZkSGx3WlU5bUtFOHNJSEJ5YjNSdktYdGNiaUFnSUNBZ0lDQWdZMmhsWTJzb1R5d2djSEp2ZEc4cE8xeHVJQ0FnSUNBZ0lDQnBaaWhpZFdkbmVTbFBMbDlmY0hKdmRHOWZYeUE5SUhCeWIzUnZPMXh1SUNBZ0lDQWdJQ0JsYkhObElITmxkQ2hQTENCd2NtOTBieWs3WEc0Z0lDQWdJQ0FnSUhKbGRIVnliaUJQTzF4dUlDQWdJQ0FnZlR0Y2JpQWdJQ0I5S0h0OUxDQm1ZV3h6WlNrZ09pQjFibVJsWm1sdVpXUXBMRnh1SUNCamFHVmphem9nWTJobFkydGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXpaWFF0Y0hKdmRHOHVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGs0WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0lpZDFjMlVnYzNSeWFXTjBKenRjYm5aaGNpQm5iRzlpWVd3Z0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyZHNiMkpoYkNjcFhHNGdJQ3dnWTI5eVpTQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlqYjNKbEp5bGNiaUFnTENCa1VDQWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFrY0NjcFhHNGdJQ3dnUkVWVFExSkpVRlJQVWxNZ1BTQnlaWEYxYVhKbEtDY3VMMTlrWlhOamNtbHdkRzl5Y3ljcFhHNGdJQ3dnVTFCRlEwbEZVeUFnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTkzYTNNbktTZ25jM0JsWTJsbGN5Y3BPMXh1WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1S0V0RldTbDdYRzRnSUhaaGNpQkRJRDBnZEhsd1pXOW1JR052Y21WYlMwVlpYU0E5UFNBblpuVnVZM1JwYjI0bklEOGdZMjl5WlZ0TFJWbGRJRG9nWjJ4dlltRnNXMHRGV1YwN1hHNGdJR2xtS0VSRlUwTlNTVkJVVDFKVElDWW1JRU1nSmlZZ0lVTmJVMUJGUTBsRlUxMHBaRkF1WmloRExDQlRVRVZEU1VWVExDQjdYRzRnSUNBZ1kyOXVabWxuZFhKaFlteGxPaUIwY25WbExGeHVJQ0FnSUdkbGREb2dablZ1WTNScGIyNG9LWHNnY21WMGRYSnVJSFJvYVhNN0lIMWNiaUFnZlNrN1hHNTlPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmMyVjBMWE53WldOcFpYTXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJRGs1WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRFFnTlNJc0lpOHZJRGN1TXk0eU1DQlRjR1ZqYVdWelEyOXVjM1J5ZFdOMGIzSW9UeXdnWkdWbVlYVnNkRU52Ym5OMGNuVmpkRzl5S1Z4dWRtRnlJR0Z1VDJKcVpXTjBJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyRnVMVzlpYW1WamRDY3BYRzRnSUN3Z1lVWjFibU4wYVc5dUlEMGdjbVZ4ZFdseVpTZ25MaTlmWVMxbWRXNWpkR2x2YmljcFhHNGdJQ3dnVTFCRlEwbEZVeUFnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkMnR6Snlrb0ozTndaV05wWlhNbktUdGNibTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdablZ1WTNScGIyNG9UeXdnUkNsN1hHNGdJSFpoY2lCRElEMGdZVzVQWW1wbFkzUW9UeWt1WTI5dWMzUnlkV04wYjNJc0lGTTdYRzRnSUhKbGRIVnliaUJESUQwOVBTQjFibVJsWm1sdVpXUWdmSHdnS0ZNZ1BTQmhiazlpYW1WamRDaERLVnRUVUVWRFNVVlRYU2tnUFQwZ2RXNWtaV1pwYm1Wa0lEOGdSQ0E2SUdGR2RXNWpkR2x2YmloVEtUdGNibjA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMk52Y21VdGFuTXZiR2xpY21GeWVTOXRiMlIxYkdWekwxOXpjR1ZqYVdWekxXTnZibk4wY25WamRHOXlMbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F4TURCY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTkNBMUlpd2lkbUZ5SUNSbGVIQnZjblFnUFNCeVpYRjFhWEpsS0NjdUwxOWxlSEJ2Y25RbktWeHVMeThnTVRrdU1TNHlMaklnTHlBeE5TNHlMak11TlNCUFltcGxZM1F1WTNKbFlYUmxLRThnV3l3Z1VISnZjR1Z5ZEdsbGMxMHBYRzRrWlhod2IzSjBLQ1JsZUhCdmNuUXVVeXdnSjA5aWFtVmpkQ2NzSUh0amNtVmhkR1U2SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxamNtVmhkR1VuS1gwcE8xeHVYRzVjYmk4dkx5OHZMeTh2THk4dkx5OHZMeTh2TDF4dUx5OGdWMFZDVUVGRFN5QkdUMDlVUlZKY2JpOHZJQzR2Zmk5amIzSmxMV3B6TDJ4cFluSmhjbmt2Ylc5a2RXeGxjeTlsY3pZdWIySnFaV04wTG1OeVpXRjBaUzVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTVRBeFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0F4SURJZ015SXNJaTh2SURFNUxqRXVNaTQ1SUU5aWFtVmpkQzVuWlhSUWNtOTBiM1I1Y0dWUFppaFBLVnh1ZG1GeUlIUnZUMkpxWldOMElDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYM1J2TFc5aWFtVmpkQ2NwWEc0Z0lDd2dKR2RsZEZCeWIzUnZkSGx3WlU5bUlEMGdjbVZ4ZFdseVpTZ25MaTlmYjJKcVpXTjBMV2R3YnljcE8xeHVYRzV5WlhGMWFYSmxLQ2N1TDE5dlltcGxZM1F0YzJGd0p5a29KMmRsZEZCeWIzUnZkSGx3WlU5bUp5d2dablZ1WTNScGIyNG9LWHRjYmlBZ2NtVjBkWEp1SUdaMWJtTjBhVzl1SUdkbGRGQnliM1J2ZEhsd1pVOW1LR2wwS1h0Y2JpQWdJQ0J5WlhSMWNtNGdKR2RsZEZCeWIzUnZkSGx3WlU5bUtIUnZUMkpxWldOMEtHbDBLU2s3WEc0Z0lIMDdYRzU5S1R0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMjF2WkhWc1pYTXZaWE0yTG05aWFtVmpkQzVuWlhRdGNISnZkRzkwZVhCbExXOW1MbXB6WEc0dkx5QnRiMlIxYkdVZ2FXUWdQU0F4TURKY2JpOHZJRzF2WkhWc1pTQmphSFZ1YTNNZ1BTQXdJREVnTWlBeklpd2lMeThnTVRrdU1TNHlMakUwSUU5aWFtVmpkQzVyWlhsektFOHBYRzUyWVhJZ2RHOVBZbXBsWTNRZ1BTQnlaWEYxYVhKbEtDY3VMMTkwYnkxdlltcGxZM1FuS1Z4dUlDQXNJQ1JyWlhseklDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFd0bGVYTW5LVHRjYmx4dWNtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExYTmhjQ2NwS0NkclpYbHpKeXdnWm5WdVkzUnBiMjRvS1h0Y2JpQWdjbVYwZFhKdUlHWjFibU4wYVc5dUlHdGxlWE1vYVhRcGUxeHVJQ0FnSUhKbGRIVnliaUFrYTJWNWN5aDBiMDlpYW1WamRDaHBkQ2twTzF4dUlDQjlPMXh1ZlNrN1hHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDJOdmNtVXRhbk12YkdsaWNtRnllUzl0YjJSMWJHVnpMMlZ6Tmk1dlltcGxZM1F1YTJWNWN5NXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVEF6WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXlJRFFnTlNJc0lpOHZJREU1TGpFdU15NHhPU0JQWW1wbFkzUXVjMlYwVUhKdmRHOTBlWEJsVDJZb1R5d2djSEp2ZEc4cFhHNTJZWElnSkdWNGNHOXlkQ0E5SUhKbGNYVnBjbVVvSnk0dlgyVjRjRzl5ZENjcE8xeHVKR1Y0Y0c5eWRDZ2taWGh3YjNKMExsTXNJQ2RQWW1wbFkzUW5MQ0I3YzJWMFVISnZkRzkwZVhCbFQyWTZJSEpsY1hWcGNtVW9KeTR2WDNObGRDMXdjbTkwYnljcExuTmxkSDBwTzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWxjell1YjJKcVpXTjBMbk5sZEMxd2NtOTBiM1I1Y0dVdGIyWXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREV3TkZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWdNU0F5SURNaUxDSW5kWE5sSUhOMGNtbGpkQ2M3WEc1MllYSWdURWxDVWtGU1dTQWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmJHbGljbUZ5ZVNjcFhHNGdJQ3dnWjJ4dlltRnNJQ0FnSUNBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZaMnh2WW1Gc0p5bGNiaUFnTENCamRIZ2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTlqZEhnbktWeHVJQ0FzSUdOc1lYTnpiMllnSUNBZ0lDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMk5zWVhOemIyWW5LVnh1SUNBc0lDUmxlSEJ2Y25RZ0lDQWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJWNGNHOXlkQ2NwWEc0Z0lDd2dhWE5QWW1wbFkzUWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmFYTXRiMkpxWldOMEp5bGNiaUFnTENCaFJuVnVZM1JwYjI0Z0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTloTFdaMWJtTjBhVzl1SnlsY2JpQWdMQ0JoYmtsdWMzUmhibU5sSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOWhiaTFwYm5OMFlXNWpaU2NwWEc0Z0lDd2dabTl5VDJZZ0lDQWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZlptOXlMVzltSnlsY2JpQWdMQ0J6Y0dWamFXVnpRMjl1YzNSeWRXTjBiM0lnUFNCeVpYRjFhWEpsS0NjdUwxOXpjR1ZqYVdWekxXTnZibk4wY25WamRHOXlKeWxjYmlBZ0xDQjBZWE5ySUNBZ0lDQWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5MFlYTnJKeWt1YzJWMFhHNGdJQ3dnYldsamNtOTBZWE5ySUNBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZiV2xqY205MFlYTnJKeWtvS1Z4dUlDQXNJRkJTVDAxSlUwVWdJQ0FnSUNBZ0lDQWdJQ0E5SUNkUWNtOXRhWE5sSjF4dUlDQXNJRlI1Y0dWRmNuSnZjaUFnSUNBZ0lDQWdJQ0E5SUdkc2IySmhiQzVVZVhCbFJYSnliM0pjYmlBZ0xDQndjbTlqWlhOeklDQWdJQ0FnSUNBZ0lDQWdQU0JuYkc5aVlXd3VjSEp2WTJWemMxeHVJQ0FzSUNSUWNtOXRhWE5sSUNBZ0lDQWdJQ0FnSUNBOUlHZHNiMkpoYkZ0UVVrOU5TVk5GWFZ4dUlDQXNJSEJ5YjJObGMzTWdJQ0FnSUNBZ0lDQWdJQ0E5SUdkc2IySmhiQzV3Y205alpYTnpYRzRnSUN3Z2FYTk9iMlJsSUNBZ0lDQWdJQ0FnSUNBZ0lEMGdZMnhoYzNOdlppaHdjbTlqWlhOektTQTlQU0FuY0hKdlkyVnpjeWRjYmlBZ0xDQmxiWEIwZVNBZ0lDQWdJQ0FnSUNBZ0lDQWdQU0JtZFc1amRHbHZiaWdwZXlBdktpQmxiWEIwZVNBcUx5QjlYRzRnSUN3Z1NXNTBaWEp1WVd3c0lFZGxibVZ5YVdOUWNtOXRhWE5sUTJGd1lXSnBiR2wwZVN3Z1YzSmhjSEJsY2p0Y2JseHVkbUZ5SUZWVFJWOU9RVlJKVmtVZ1BTQWhJV1oxYm1OMGFXOXVLQ2w3WEc0Z0lIUnllU0I3WEc0Z0lDQWdMeThnWTI5eWNtVmpkQ0J6ZFdKamJHRnpjMmx1WnlCM2FYUm9JRUJBYzNCbFkybGxjeUJ6ZFhCd2IzSjBYRzRnSUNBZ2RtRnlJSEJ5YjIxcGMyVWdJQ0FnSUQwZ0pGQnliMjFwYzJVdWNtVnpiMngyWlNneEtWeHVJQ0FnSUNBZ0xDQkdZV3RsVUhKdmJXbHpaU0E5SUNod2NtOXRhWE5sTG1OdmJuTjBjblZqZEc5eUlEMGdlMzBwVzNKbGNYVnBjbVVvSnk0dlgzZHJjeWNwS0NkemNHVmphV1Z6SnlsZElEMGdablZ1WTNScGIyNG9aWGhsWXlsN0lHVjRaV01vWlcxd2RIa3NJR1Z0Y0hSNUtUc2dmVHRjYmlBZ0lDQXZMeUIxYm1oaGJtUnNaV1FnY21WcVpXTjBhVzl1Y3lCMGNtRmphMmx1WnlCemRYQndiM0owTENCT2IyUmxTbE1nVUhKdmJXbHpaU0IzYVhSb2IzVjBJR2wwSUdaaGFXeHpJRUJBYzNCbFkybGxjeUIwWlhOMFhHNGdJQ0FnY21WMGRYSnVJQ2hwYzA1dlpHVWdmSHdnZEhsd1pXOW1JRkJ5YjIxcGMyVlNaV3BsWTNScGIyNUZkbVZ1ZENBOVBTQW5ablZ1WTNScGIyNG5LU0FtSmlCd2NtOXRhWE5sTG5Sb1pXNG9aVzF3ZEhrcElHbHVjM1JoYm1ObGIyWWdSbUZyWlZCeWIyMXBjMlU3WEc0Z0lIMGdZMkYwWTJnb1pTbDdJQzhxSUdWdGNIUjVJQ292SUgxY2JuMG9LVHRjYmx4dUx5OGdhR1ZzY0dWeWMxeHVkbUZ5SUhOaGJXVkRiMjV6ZEhKMVkzUnZjaUE5SUdaMWJtTjBhVzl1S0dFc0lHSXBlMXh1SUNBdkx5QjNhWFJvSUd4cFluSmhjbmtnZDNKaGNIQmxjaUJ6Y0dWamFXRnNJR05oYzJWY2JpQWdjbVYwZFhKdUlHRWdQVDA5SUdJZ2ZId2dZU0E5UFQwZ0pGQnliMjFwYzJVZ0ppWWdZaUE5UFQwZ1YzSmhjSEJsY2p0Y2JuMDdYRzUyWVhJZ2FYTlVhR1Z1WVdKc1pTQTlJR1oxYm1OMGFXOXVLR2wwS1h0Y2JpQWdkbUZ5SUhSb1pXNDdYRzRnSUhKbGRIVnliaUJwYzA5aWFtVmpkQ2hwZENrZ0ppWWdkSGx3Wlc5bUlDaDBhR1Z1SUQwZ2FYUXVkR2hsYmlrZ1BUMGdKMloxYm1OMGFXOXVKeUEvSUhSb1pXNGdPaUJtWVd4elpUdGNibjA3WEc1MllYSWdibVYzVUhKdmJXbHpaVU5oY0dGaWFXeHBkSGtnUFNCbWRXNWpkR2x2YmloREtYdGNiaUFnY21WMGRYSnVJSE5oYldWRGIyNXpkSEoxWTNSdmNpZ2tVSEp2YldselpTd2dReWxjYmlBZ0lDQS9JRzVsZHlCUWNtOXRhWE5sUTJGd1lXSnBiR2wwZVNoREtWeHVJQ0FnSURvZ2JtVjNJRWRsYm1WeWFXTlFjbTl0YVhObFEyRndZV0pwYkdsMGVTaERLVHRjYm4wN1hHNTJZWElnVUhKdmJXbHpaVU5oY0dGaWFXeHBkSGtnUFNCSFpXNWxjbWxqVUhKdmJXbHpaVU5oY0dGaWFXeHBkSGtnUFNCbWRXNWpkR2x2YmloREtYdGNiaUFnZG1GeUlISmxjMjlzZG1Vc0lISmxhbVZqZER0Y2JpQWdkR2hwY3k1d2NtOXRhWE5sSUQwZ2JtVjNJRU1vWm5WdVkzUnBiMjRvSkNSeVpYTnZiSFpsTENBa0pISmxhbVZqZENsN1hHNGdJQ0FnYVdZb2NtVnpiMngyWlNBaFBUMGdkVzVrWldacGJtVmtJSHg4SUhKbGFtVmpkQ0FoUFQwZ2RXNWtaV1pwYm1Wa0tYUm9jbTkzSUZSNWNHVkZjbkp2Y2lnblFtRmtJRkJ5YjIxcGMyVWdZMjl1YzNSeWRXTjBiM0luS1R0Y2JpQWdJQ0J5WlhOdmJIWmxJRDBnSkNSeVpYTnZiSFpsTzF4dUlDQWdJSEpsYW1WamRDQWdQU0FrSkhKbGFtVmpkRHRjYmlBZ2ZTazdYRzRnSUhSb2FYTXVjbVZ6YjJ4MlpTQTlJR0ZHZFc1amRHbHZiaWh5WlhOdmJIWmxLVHRjYmlBZ2RHaHBjeTV5WldwbFkzUWdJRDBnWVVaMWJtTjBhVzl1S0hKbGFtVmpkQ2s3WEc1OU8xeHVkbUZ5SUhCbGNtWnZjbTBnUFNCbWRXNWpkR2x2YmlobGVHVmpLWHRjYmlBZ2RISjVJSHRjYmlBZ0lDQmxlR1ZqS0NrN1hHNGdJSDBnWTJGMFkyZ29aU2w3WEc0Z0lDQWdjbVYwZFhKdUlIdGxjbkp2Y2pvZ1pYMDdYRzRnSUgxY2JuMDdYRzUyWVhJZ2JtOTBhV1o1SUQwZ1puVnVZM1JwYjI0b2NISnZiV2x6WlN3Z2FYTlNaV3BsWTNRcGUxeHVJQ0JwWmlod2NtOXRhWE5sTGw5dUtYSmxkSFZ5Ymp0Y2JpQWdjSEp2YldselpTNWZiaUE5SUhSeWRXVTdYRzRnSUhaaGNpQmphR0ZwYmlBOUlIQnliMjFwYzJVdVgyTTdYRzRnSUcxcFkzSnZkR0Z6YXlobWRXNWpkR2x2YmlncGUxeHVJQ0FnSUhaaGNpQjJZV3gxWlNBOUlIQnliMjFwYzJVdVgzWmNiaUFnSUNBZ0lDd2diMnNnSUNBZ1BTQndjbTl0YVhObExsOXpJRDA5SURGY2JpQWdJQ0FnSUN3Z2FTQWdJQ0FnUFNBd08xeHVJQ0FnSUhaaGNpQnlkVzRnUFNCbWRXNWpkR2x2YmloeVpXRmpkR2x2YmlsN1hHNGdJQ0FnSUNCMllYSWdhR0Z1Wkd4bGNpQTlJRzlySUQ4Z2NtVmhZM1JwYjI0dWIyc2dPaUJ5WldGamRHbHZiaTVtWVdsc1hHNGdJQ0FnSUNBZ0lDd2djbVZ6YjJ4MlpTQTlJSEpsWVdOMGFXOXVMbkpsYzI5c2RtVmNiaUFnSUNBZ0lDQWdMQ0J5WldwbFkzUWdJRDBnY21WaFkzUnBiMjR1Y21WcVpXTjBYRzRnSUNBZ0lDQWdJQ3dnWkc5dFlXbHVJQ0E5SUhKbFlXTjBhVzl1TG1SdmJXRnBibHh1SUNBZ0lDQWdJQ0FzSUhKbGMzVnNkQ3dnZEdobGJqdGNiaUFnSUNBZ0lIUnllU0I3WEc0Z0lDQWdJQ0FnSUdsbUtHaGhibVJzWlhJcGUxeHVJQ0FnSUNBZ0lDQWdJR2xtS0NGdmF5bDdYRzRnSUNBZ0lDQWdJQ0FnSUNCcFppaHdjbTl0YVhObExsOW9JRDA5SURJcGIyNUlZVzVrYkdWVmJtaGhibVJzWldRb2NISnZiV2x6WlNrN1hHNGdJQ0FnSUNBZ0lDQWdJQ0J3Y205dGFYTmxMbDlvSUQwZ01UdGNiaUFnSUNBZ0lDQWdJQ0I5WEc0Z0lDQWdJQ0FnSUNBZ2FXWW9hR0Z1Wkd4bGNpQTlQVDBnZEhKMVpTbHlaWE4xYkhRZ1BTQjJZV3gxWlR0Y2JpQWdJQ0FnSUNBZ0lDQmxiSE5sSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJR2xtS0dSdmJXRnBiaWxrYjIxaGFXNHVaVzUwWlhJb0tUdGNiaUFnSUNBZ0lDQWdJQ0FnSUhKbGMzVnNkQ0E5SUdoaGJtUnNaWElvZG1Gc2RXVXBPMXh1SUNBZ0lDQWdJQ0FnSUNBZ2FXWW9aRzl0WVdsdUtXUnZiV0ZwYmk1bGVHbDBLQ2s3WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ0lDQWdJR2xtS0hKbGMzVnNkQ0E5UFQwZ2NtVmhZM1JwYjI0dWNISnZiV2x6WlNsN1hHNGdJQ0FnSUNBZ0lDQWdJQ0J5WldwbFkzUW9WSGx3WlVWeWNtOXlLQ2RRY205dGFYTmxMV05vWVdsdUlHTjVZMnhsSnlrcE8xeHVJQ0FnSUNBZ0lDQWdJSDBnWld4elpTQnBaaWgwYUdWdUlEMGdhWE5VYUdWdVlXSnNaU2h5WlhOMWJIUXBLWHRjYmlBZ0lDQWdJQ0FnSUNBZ0lIUm9aVzR1WTJGc2JDaHlaWE4xYkhRc0lISmxjMjlzZG1Vc0lISmxhbVZqZENrN1hHNGdJQ0FnSUNBZ0lDQWdmU0JsYkhObElISmxjMjlzZG1Vb2NtVnpkV3gwS1R0Y2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUhKbGFtVmpkQ2gyWVd4MVpTazdYRzRnSUNBZ0lDQjlJR05oZEdOb0tHVXBlMXh1SUNBZ0lDQWdJQ0J5WldwbFkzUW9aU2s3WEc0Z0lDQWdJQ0I5WEc0Z0lDQWdmVHRjYmlBZ0lDQjNhR2xzWlNoamFHRnBiaTVzWlc1bmRHZ2dQaUJwS1hKMWJpaGphR0ZwYmx0cEt5dGRLVHNnTHk4Z2RtRnlhV0ZpYkdVZ2JHVnVaM1JvSUMwZ1kyRnVKM1FnZFhObElHWnZja1ZoWTJoY2JpQWdJQ0J3Y205dGFYTmxMbDlqSUQwZ1cxMDdYRzRnSUNBZ2NISnZiV2x6WlM1ZmJpQTlJR1poYkhObE8xeHVJQ0FnSUdsbUtHbHpVbVZxWldOMElDWW1JQ0Z3Y205dGFYTmxMbDlvS1c5dVZXNW9ZVzVrYkdWa0tIQnliMjFwYzJVcE8xeHVJQ0I5S1R0Y2JuMDdYRzUyWVhJZ2IyNVZibWhoYm1Sc1pXUWdQU0JtZFc1amRHbHZiaWh3Y205dGFYTmxLWHRjYmlBZ2RHRnpheTVqWVd4c0tHZHNiMkpoYkN3Z1puVnVZM1JwYjI0b0tYdGNiaUFnSUNCMllYSWdkbUZzZFdVZ1BTQndjbTl0YVhObExsOTJYRzRnSUNBZ0lDQXNJR0ZpY25Wd2RDd2dhR0Z1Wkd4bGNpd2dZMjl1YzI5c1pUdGNiaUFnSUNCcFppaHBjMVZ1YUdGdVpHeGxaQ2h3Y205dGFYTmxLU2w3WEc0Z0lDQWdJQ0JoWW5KMWNIUWdQU0J3WlhKbWIzSnRLR1oxYm1OMGFXOXVLQ2w3WEc0Z0lDQWdJQ0FnSUdsbUtHbHpUbTlrWlNsN1hHNGdJQ0FnSUNBZ0lDQWdjSEp2WTJWemN5NWxiV2wwS0NkMWJtaGhibVJzWldSU1pXcGxZM1JwYjI0bkxDQjJZV3gxWlN3Z2NISnZiV2x6WlNrN1hHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppaG9ZVzVrYkdWeUlEMGdaMnh2WW1Gc0xtOXVkVzVvWVc1a2JHVmtjbVZxWldOMGFXOXVLWHRjYmlBZ0lDQWdJQ0FnSUNCb1lXNWtiR1Z5S0h0d2NtOXRhWE5sT2lCd2NtOXRhWE5sTENCeVpXRnpiMjQ2SUhaaGJIVmxmU2s3WEc0Z0lDQWdJQ0FnSUgwZ1pXeHpaU0JwWmlnb1kyOXVjMjlzWlNBOUlHZHNiMkpoYkM1amIyNXpiMnhsS1NBbUppQmpiMjV6YjJ4bExtVnljbTl5S1h0Y2JpQWdJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExtVnljbTl5S0NkVmJtaGhibVJzWldRZ2NISnZiV2x6WlNCeVpXcGxZM1JwYjI0bkxDQjJZV3gxWlNrN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMHBPMXh1SUNBZ0lDQWdMeThnUW5KdmQzTmxjbk1nYzJodmRXeGtJRzV2ZENCMGNtbG5aMlZ5SUdCeVpXcGxZM1JwYjI1SVlXNWtiR1ZrWUNCbGRtVnVkQ0JwWmlCcGRDQjNZWE1nYUdGdVpHeGxaQ0JvWlhKbExDQk9iMlJsU2xNZ0xTQnphRzkxYkdSY2JpQWdJQ0FnSUhCeWIyMXBjMlV1WDJnZ1BTQnBjMDV2WkdVZ2ZId2dhWE5WYm1oaGJtUnNaV1FvY0hKdmJXbHpaU2tnUHlBeUlEb2dNVHRjYmlBZ0lDQjlJSEJ5YjIxcGMyVXVYMkVnUFNCMWJtUmxabWx1WldRN1hHNGdJQ0FnYVdZb1lXSnlkWEIwS1hSb2NtOTNJR0ZpY25Wd2RDNWxjbkp2Y2p0Y2JpQWdmU2s3WEc1OU8xeHVkbUZ5SUdselZXNW9ZVzVrYkdWa0lEMGdablZ1WTNScGIyNG9jSEp2YldselpTbDdYRzRnSUdsbUtIQnliMjFwYzJVdVgyZ2dQVDBnTVNseVpYUjFjbTRnWm1Gc2MyVTdYRzRnSUhaaGNpQmphR0ZwYmlBOUlIQnliMjFwYzJVdVgyRWdmSHdnY0hKdmJXbHpaUzVmWTF4dUlDQWdJQ3dnYVNBZ0lDQWdQU0F3WEc0Z0lDQWdMQ0J5WldGamRHbHZianRjYmlBZ2QyaHBiR1VvWTJoaGFXNHViR1Z1WjNSb0lENGdhU2w3WEc0Z0lDQWdjbVZoWTNScGIyNGdQU0JqYUdGcGJsdHBLeXRkTzF4dUlDQWdJR2xtS0hKbFlXTjBhVzl1TG1aaGFXd2dmSHdnSVdselZXNW9ZVzVrYkdWa0tISmxZV04wYVc5dUxuQnliMjFwYzJVcEtYSmxkSFZ5YmlCbVlXeHpaVHRjYmlBZ2ZTQnlaWFIxY200Z2RISjFaVHRjYm4wN1hHNTJZWElnYjI1SVlXNWtiR1ZWYm1oaGJtUnNaV1FnUFNCbWRXNWpkR2x2Ymlod2NtOXRhWE5sS1h0Y2JpQWdkR0Z6YXk1allXeHNLR2RzYjJKaGJDd2dablZ1WTNScGIyNG9LWHRjYmlBZ0lDQjJZWElnYUdGdVpHeGxjanRjYmlBZ0lDQnBaaWhwYzA1dlpHVXBlMXh1SUNBZ0lDQWdjSEp2WTJWemN5NWxiV2wwS0NkeVpXcGxZM1JwYjI1SVlXNWtiR1ZrSnl3Z2NISnZiV2x6WlNrN1hHNGdJQ0FnZlNCbGJITmxJR2xtS0doaGJtUnNaWElnUFNCbmJHOWlZV3d1YjI1eVpXcGxZM1JwYjI1b1lXNWtiR1ZrS1h0Y2JpQWdJQ0FnSUdoaGJtUnNaWElvZTNCeWIyMXBjMlU2SUhCeWIyMXBjMlVzSUhKbFlYTnZiam9nY0hKdmJXbHpaUzVmZG4wcE8xeHVJQ0FnSUgxY2JpQWdmU2s3WEc1OU8xeHVkbUZ5SUNSeVpXcGxZM1FnUFNCbWRXNWpkR2x2YmloMllXeDFaU2w3WEc0Z0lIWmhjaUJ3Y205dGFYTmxJRDBnZEdocGN6dGNiaUFnYVdZb2NISnZiV2x6WlM1ZlpDbHlaWFIxY200N1hHNGdJSEJ5YjIxcGMyVXVYMlFnUFNCMGNuVmxPMXh1SUNCd2NtOXRhWE5sSUQwZ2NISnZiV2x6WlM1ZmR5QjhmQ0J3Y205dGFYTmxPeUF2THlCMWJuZHlZWEJjYmlBZ2NISnZiV2x6WlM1ZmRpQTlJSFpoYkhWbE8xeHVJQ0J3Y205dGFYTmxMbDl6SUQwZ01qdGNiaUFnYVdZb0lYQnliMjFwYzJVdVgyRXBjSEp2YldselpTNWZZU0E5SUhCeWIyMXBjMlV1WDJNdWMyeHBZMlVvS1R0Y2JpQWdibTkwYVdaNUtIQnliMjFwYzJVc0lIUnlkV1VwTzF4dWZUdGNiblpoY2lBa2NtVnpiMngyWlNBOUlHWjFibU4wYVc5dUtIWmhiSFZsS1h0Y2JpQWdkbUZ5SUhCeWIyMXBjMlVnUFNCMGFHbHpYRzRnSUNBZ0xDQjBhR1Z1TzF4dUlDQnBaaWh3Y205dGFYTmxMbDlrS1hKbGRIVnlianRjYmlBZ2NISnZiV2x6WlM1ZlpDQTlJSFJ5ZFdVN1hHNGdJSEJ5YjIxcGMyVWdQU0J3Y205dGFYTmxMbDkzSUh4OElIQnliMjFwYzJVN0lDOHZJSFZ1ZDNKaGNGeHVJQ0IwY25rZ2UxeHVJQ0FnSUdsbUtIQnliMjFwYzJVZ1BUMDlJSFpoYkhWbEtYUm9jbTkzSUZSNWNHVkZjbkp2Y2loY0lsQnliMjFwYzJVZ1kyRnVKM1FnWW1VZ2NtVnpiMngyWldRZ2FYUnpaV3htWENJcE8xeHVJQ0FnSUdsbUtIUm9aVzRnUFNCcGMxUm9aVzVoWW14bEtIWmhiSFZsS1NsN1hHNGdJQ0FnSUNCdGFXTnliM1JoYzJzb1puVnVZM1JwYjI0b0tYdGNiaUFnSUNBZ0lDQWdkbUZ5SUhkeVlYQndaWElnUFNCN1gzYzZJSEJ5YjIxcGMyVXNJRjlrT2lCbVlXeHpaWDA3SUM4dklIZHlZWEJjYmlBZ0lDQWdJQ0FnZEhKNUlIdGNiaUFnSUNBZ0lDQWdJQ0IwYUdWdUxtTmhiR3dvZG1Gc2RXVXNJR04wZUNna2NtVnpiMngyWlN3Z2QzSmhjSEJsY2l3Z01Ta3NJR04wZUNna2NtVnFaV04wTENCM2NtRndjR1Z5TENBeEtTazdYRzRnSUNBZ0lDQWdJSDBnWTJGMFkyZ29aU2w3WEc0Z0lDQWdJQ0FnSUNBZ0pISmxhbVZqZEM1allXeHNLSGR5WVhCd1pYSXNJR1VwTzF4dUlDQWdJQ0FnSUNCOVhHNGdJQ0FnSUNCOUtUdGNiaUFnSUNCOUlHVnNjMlVnZTF4dUlDQWdJQ0FnY0hKdmJXbHpaUzVmZGlBOUlIWmhiSFZsTzF4dUlDQWdJQ0FnY0hKdmJXbHpaUzVmY3lBOUlERTdYRzRnSUNBZ0lDQnViM1JwWm5rb2NISnZiV2x6WlN3Z1ptRnNjMlVwTzF4dUlDQWdJSDFjYmlBZ2ZTQmpZWFJqYUNobEtYdGNiaUFnSUNBa2NtVnFaV04wTG1OaGJHd29lMTkzT2lCd2NtOXRhWE5sTENCZlpEb2dabUZzYzJWOUxDQmxLVHNnTHk4Z2QzSmhjRnh1SUNCOVhHNTlPMXh1WEc0dkx5QmpiMjV6ZEhKMVkzUnZjaUJ3YjJ4NVptbHNiRnh1YVdZb0lWVlRSVjlPUVZSSlZrVXBlMXh1SUNBdkx5QXlOUzQwTGpNdU1TQlFjbTl0YVhObEtHVjRaV04xZEc5eUtWeHVJQ0FrVUhKdmJXbHpaU0E5SUdaMWJtTjBhVzl1SUZCeWIyMXBjMlVvWlhobFkzVjBiM0lwZTF4dUlDQWdJR0Z1U1c1emRHRnVZMlVvZEdocGN5d2dKRkJ5YjIxcGMyVXNJRkJTVDAxSlUwVXNJQ2RmYUNjcE8xeHVJQ0FnSUdGR2RXNWpkR2x2YmlobGVHVmpkWFJ2Y2lrN1hHNGdJQ0FnU1c1MFpYSnVZV3d1WTJGc2JDaDBhR2x6S1R0Y2JpQWdJQ0IwY25rZ2UxeHVJQ0FnSUNBZ1pYaGxZM1YwYjNJb1kzUjRLQ1J5WlhOdmJIWmxMQ0IwYUdsekxDQXhLU3dnWTNSNEtDUnlaV3BsWTNRc0lIUm9hWE1zSURFcEtUdGNiaUFnSUNCOUlHTmhkR05vS0dWeWNpbDdYRzRnSUNBZ0lDQWtjbVZxWldOMExtTmhiR3dvZEdocGN5d2daWEp5S1R0Y2JpQWdJQ0I5WEc0Z0lIMDdYRzRnSUVsdWRHVnlibUZzSUQwZ1puVnVZM1JwYjI0Z1VISnZiV2x6WlNobGVHVmpkWFJ2Y2lsN1hHNGdJQ0FnZEdocGN5NWZZeUE5SUZ0ZE95QWdJQ0FnSUNBZ0lDQWdJQ0F2THlBOExTQmhkMkZwZEdsdVp5QnlaV0ZqZEdsdmJuTmNiaUFnSUNCMGFHbHpMbDloSUQwZ2RXNWtaV1pwYm1Wa095QWdJQ0FnSUM4dklEd3RJR05vWldOclpXUWdhVzRnYVhOVmJtaGhibVJzWldRZ2NtVmhZM1JwYjI1elhHNGdJQ0FnZEdocGN5NWZjeUE5SURBN0lDQWdJQ0FnSUNBZ0lDQWdJQ0F2THlBOExTQnpkR0YwWlZ4dUlDQWdJSFJvYVhNdVgyUWdQU0JtWVd4elpUc2dJQ0FnSUNBZ0lDQWdMeThnUEMwZ1pHOXVaVnh1SUNBZ0lIUm9hWE11WDNZZ1BTQjFibVJsWm1sdVpXUTdJQ0FnSUNBZ0x5OGdQQzBnZG1Gc2RXVmNiaUFnSUNCMGFHbHpMbDlvSUQwZ01Ec2dJQ0FnSUNBZ0lDQWdJQ0FnSUM4dklEd3RJSEpsYW1WamRHbHZiaUJ6ZEdGMFpTd2dNQ0F0SUdSbFptRjFiSFFzSURFZ0xTQm9ZVzVrYkdWa0xDQXlJQzBnZFc1b1lXNWtiR1ZrWEc0Z0lDQWdkR2hwY3k1ZmJpQTlJR1poYkhObE95QWdJQ0FnSUNBZ0lDQXZMeUE4TFNCdWIzUnBabmxjYmlBZ2ZUdGNiaUFnU1c1MFpYSnVZV3d1Y0hKdmRHOTBlWEJsSUQwZ2NtVnhkV2x5WlNnbkxpOWZjbVZrWldacGJtVXRZV3hzSnlrb0pGQnliMjFwYzJVdWNISnZkRzkwZVhCbExDQjdYRzRnSUNBZ0x5OGdNalV1TkM0MUxqTWdVSEp2YldselpTNXdjbTkwYjNSNWNHVXVkR2hsYmlodmJrWjFiR1pwYkd4bFpDd2diMjVTWldwbFkzUmxaQ2xjYmlBZ0lDQjBhR1Z1T2lCbWRXNWpkR2x2YmlCMGFHVnVLRzl1Um5Wc1ptbHNiR1ZrTENCdmJsSmxhbVZqZEdWa0tYdGNiaUFnSUNBZ0lIWmhjaUJ5WldGamRHbHZiaUFnSUNBOUlHNWxkMUJ5YjIxcGMyVkRZWEJoWW1sc2FYUjVLSE53WldOcFpYTkRiMjV6ZEhKMVkzUnZjaWgwYUdsekxDQWtVSEp2YldselpTa3BPMXh1SUNBZ0lDQWdjbVZoWTNScGIyNHViMnNnSUNBZ0lEMGdkSGx3Wlc5bUlHOXVSblZzWm1sc2JHVmtJRDA5SUNkbWRXNWpkR2x2YmljZ1B5QnZia1oxYkdacGJHeGxaQ0E2SUhSeWRXVTdYRzRnSUNBZ0lDQnlaV0ZqZEdsdmJpNW1ZV2xzSUNBZ1BTQjBlWEJsYjJZZ2IyNVNaV3BsWTNSbFpDQTlQU0FuWm5WdVkzUnBiMjRuSUNZbUlHOXVVbVZxWldOMFpXUTdYRzRnSUNBZ0lDQnlaV0ZqZEdsdmJpNWtiMjFoYVc0Z1BTQnBjMDV2WkdVZ1B5QndjbTlqWlhOekxtUnZiV0ZwYmlBNklIVnVaR1ZtYVc1bFpEdGNiaUFnSUNBZ0lIUm9hWE11WDJNdWNIVnphQ2h5WldGamRHbHZiaWs3WEc0Z0lDQWdJQ0JwWmloMGFHbHpMbDloS1hSb2FYTXVYMkV1Y0hWemFDaHlaV0ZqZEdsdmJpazdYRzRnSUNBZ0lDQnBaaWgwYUdsekxsOXpLVzV2ZEdsbWVTaDBhR2x6TENCbVlXeHpaU2s3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdjbVZoWTNScGIyNHVjSEp2YldselpUdGNiaUFnSUNCOUxGeHVJQ0FnSUM4dklESTFMalF1TlM0eElGQnliMjFwYzJVdWNISnZkRzkwZVhCbExtTmhkR05vS0c5dVVtVnFaV04wWldRcFhHNGdJQ0FnSjJOaGRHTm9Kem9nWm5WdVkzUnBiMjRvYjI1U1pXcGxZM1JsWkNsN1hHNGdJQ0FnSUNCeVpYUjFjbTRnZEdocGN5NTBhR1Z1S0hWdVpHVm1hVzVsWkN3Z2IyNVNaV3BsWTNSbFpDazdYRzRnSUNBZ2ZWeHVJQ0I5S1R0Y2JpQWdVSEp2YldselpVTmhjR0ZpYVd4cGRIa2dQU0JtZFc1amRHbHZiaWdwZTF4dUlDQWdJSFpoY2lCd2NtOXRhWE5sSUNBOUlHNWxkeUJKYm5SbGNtNWhiRHRjYmlBZ0lDQjBhR2x6TG5CeWIyMXBjMlVnUFNCd2NtOXRhWE5sTzF4dUlDQWdJSFJvYVhNdWNtVnpiMngyWlNBOUlHTjBlQ2drY21WemIyeDJaU3dnY0hKdmJXbHpaU3dnTVNrN1hHNGdJQ0FnZEdocGN5NXlaV3BsWTNRZ0lEMGdZM1I0S0NSeVpXcGxZM1FzSUhCeWIyMXBjMlVzSURFcE8xeHVJQ0I5TzF4dWZWeHVYRzRrWlhod2IzSjBLQ1JsZUhCdmNuUXVSeUFySUNSbGVIQnZjblF1VnlBcklDUmxlSEJ2Y25RdVJpQXFJQ0ZWVTBWZlRrRlVTVlpGTENCN1VISnZiV2x6WlRvZ0pGQnliMjFwYzJWOUtUdGNibkpsY1hWcGNtVW9KeTR2WDNObGRDMTBieTF6ZEhKcGJtY3RkR0ZuSnlrb0pGQnliMjFwYzJVc0lGQlNUMDFKVTBVcE8xeHVjbVZ4ZFdseVpTZ25MaTlmYzJWMExYTndaV05wWlhNbktTaFFVazlOU1ZORktUdGNibGR5WVhCd1pYSWdQU0J5WlhGMWFYSmxLQ2N1TDE5amIzSmxKeWxiVUZKUFRVbFRSVjA3WEc1Y2JpOHZJSE4wWVhScFkzTmNiaVJsZUhCdmNuUW9KR1Y0Y0c5eWRDNVRJQ3NnSkdWNGNHOXlkQzVHSUNvZ0lWVlRSVjlPUVZSSlZrVXNJRkJTVDAxSlUwVXNJSHRjYmlBZ0x5OGdNalV1TkM0MExqVWdVSEp2YldselpTNXlaV3BsWTNRb2NpbGNiaUFnY21WcVpXTjBPaUJtZFc1amRHbHZiaUJ5WldwbFkzUW9jaWw3WEc0Z0lDQWdkbUZ5SUdOaGNHRmlhV3hwZEhrZ1BTQnVaWGRRY205dGFYTmxRMkZ3WVdKcGJHbDBlU2gwYUdsektWeHVJQ0FnSUNBZ0xDQWtKSEpsYW1WamRDQWdJRDBnWTJGd1lXSnBiR2wwZVM1eVpXcGxZM1E3WEc0Z0lDQWdKQ1J5WldwbFkzUW9jaWs3WEc0Z0lDQWdjbVYwZFhKdUlHTmhjR0ZpYVd4cGRIa3VjSEp2YldselpUdGNiaUFnZlZ4dWZTazdYRzRrWlhod2IzSjBLQ1JsZUhCdmNuUXVVeUFySUNSbGVIQnZjblF1UmlBcUlDaE1TVUpTUVZKWklIeDhJQ0ZWVTBWZlRrRlVTVlpGS1N3Z1VGSlBUVWxUUlN3Z2UxeHVJQ0F2THlBeU5TNDBMalF1TmlCUWNtOXRhWE5sTG5KbGMyOXNkbVVvZUNsY2JpQWdjbVZ6YjJ4MlpUb2dablZ1WTNScGIyNGdjbVZ6YjJ4MlpTaDRLWHRjYmlBZ0lDQXZMeUJwYm5OMFlXNWpaVzltSUdsdWMzUmxZV1FnYjJZZ2FXNTBaWEp1WVd3Z2MyeHZkQ0JqYUdWamF5QmlaV05oZFhObElIZGxJSE5vYjNWc1pDQm1hWGdnYVhRZ2QybDBhRzkxZENCeVpYQnNZV05sYldWdWRDQnVZWFJwZG1VZ1VISnZiV2x6WlNCamIzSmxYRzRnSUNBZ2FXWW9lQ0JwYm5OMFlXNWpaVzltSUNSUWNtOXRhWE5sSUNZbUlITmhiV1ZEYjI1emRISjFZM1J2Y2loNExtTnZibk4wY25WamRHOXlMQ0IwYUdsektTbHlaWFIxY200Z2VEdGNiaUFnSUNCMllYSWdZMkZ3WVdKcGJHbDBlU0E5SUc1bGQxQnliMjFwYzJWRFlYQmhZbWxzYVhSNUtIUm9hWE1wWEc0Z0lDQWdJQ0FzSUNRa2NtVnpiMngyWlNBZ1BTQmpZWEJoWW1sc2FYUjVMbkpsYzI5c2RtVTdYRzRnSUNBZ0pDUnlaWE52YkhabEtIZ3BPMXh1SUNBZ0lISmxkSFZ5YmlCallYQmhZbWxzYVhSNUxuQnliMjFwYzJVN1hHNGdJSDFjYm4wcE8xeHVKR1Y0Y0c5eWRDZ2taWGh3YjNKMExsTWdLeUFrWlhod2IzSjBMa1lnS2lBaEtGVlRSVjlPUVZSSlZrVWdKaVlnY21WeGRXbHlaU2duTGk5ZmFYUmxjaTFrWlhSbFkzUW5LU2htZFc1amRHbHZiaWhwZEdWeUtYdGNiaUFnSkZCeWIyMXBjMlV1WVd4c0tHbDBaWElwV3lkallYUmphQ2RkS0dWdGNIUjVLVHRjYm4wcEtTd2dVRkpQVFVsVFJTd2dlMXh1SUNBdkx5QXlOUzQwTGpRdU1TQlFjbTl0YVhObExtRnNiQ2hwZEdWeVlXSnNaU2xjYmlBZ1lXeHNPaUJtZFc1amRHbHZiaUJoYkd3b2FYUmxjbUZpYkdVcGUxeHVJQ0FnSUhaaGNpQkRJQ0FnSUNBZ0lDQWdJRDBnZEdocGMxeHVJQ0FnSUNBZ0xDQmpZWEJoWW1sc2FYUjVJRDBnYm1WM1VISnZiV2x6WlVOaGNHRmlhV3hwZEhrb1F5bGNiaUFnSUNBZ0lDd2djbVZ6YjJ4MlpTQWdJQ0E5SUdOaGNHRmlhV3hwZEhrdWNtVnpiMngyWlZ4dUlDQWdJQ0FnTENCeVpXcGxZM1FnSUNBZ0lEMGdZMkZ3WVdKcGJHbDBlUzV5WldwbFkzUTdYRzRnSUNBZ2RtRnlJR0ZpY25Wd2RDQTlJSEJsY21admNtMG9ablZ1WTNScGIyNG9LWHRjYmlBZ0lDQWdJSFpoY2lCMllXeDFaWE1nSUNBZ1BTQmJYVnh1SUNBZ0lDQWdJQ0FzSUdsdVpHVjRJQ0FnSUNBOUlEQmNiaUFnSUNBZ0lDQWdMQ0J5WlcxaGFXNXBibWNnUFNBeE8xeHVJQ0FnSUNBZ1ptOXlUMllvYVhSbGNtRmliR1VzSUdaaGJITmxMQ0JtZFc1amRHbHZiaWh3Y205dGFYTmxLWHRjYmlBZ0lDQWdJQ0FnZG1GeUlDUnBibVJsZUNBZ0lDQWdJQ0FnUFNCcGJtUmxlQ3NyWEc0Z0lDQWdJQ0FnSUNBZ0xDQmhiSEpsWVdSNVEyRnNiR1ZrSUQwZ1ptRnNjMlU3WEc0Z0lDQWdJQ0FnSUhaaGJIVmxjeTV3ZFhOb0tIVnVaR1ZtYVc1bFpDazdYRzRnSUNBZ0lDQWdJSEpsYldGcGJtbHVaeXNyTzF4dUlDQWdJQ0FnSUNCRExuSmxjMjlzZG1Vb2NISnZiV2x6WlNrdWRHaGxiaWhtZFc1amRHbHZiaWgyWVd4MVpTbDdYRzRnSUNBZ0lDQWdJQ0FnYVdZb1lXeHlaV0ZrZVVOaGJHeGxaQ2x5WlhSMWNtNDdYRzRnSUNBZ0lDQWdJQ0FnWVd4eVpXRmtlVU5oYkd4bFpDQWdQU0IwY25WbE8xeHVJQ0FnSUNBZ0lDQWdJSFpoYkhWbGMxc2thVzVrWlhoZElEMGdkbUZzZFdVN1hHNGdJQ0FnSUNBZ0lDQWdMUzF5WlcxaGFXNXBibWNnZkh3Z2NtVnpiMngyWlNoMllXeDFaWE1wTzF4dUlDQWdJQ0FnSUNCOUxDQnlaV3BsWTNRcE8xeHVJQ0FnSUNBZ2ZTazdYRzRnSUNBZ0lDQXRMWEpsYldGcGJtbHVaeUI4ZkNCeVpYTnZiSFpsS0haaGJIVmxjeWs3WEc0Z0lDQWdmU2s3WEc0Z0lDQWdhV1lvWVdKeWRYQjBLWEpsYW1WamRDaGhZbkoxY0hRdVpYSnliM0lwTzF4dUlDQWdJSEpsZEhWeWJpQmpZWEJoWW1sc2FYUjVMbkJ5YjIxcGMyVTdYRzRnSUgwc1hHNGdJQzh2SURJMUxqUXVOQzQwSUZCeWIyMXBjMlV1Y21GalpTaHBkR1Z5WVdKc1pTbGNiaUFnY21GalpUb2dablZ1WTNScGIyNGdjbUZqWlNocGRHVnlZV0pzWlNsN1hHNGdJQ0FnZG1GeUlFTWdJQ0FnSUNBZ0lDQWdQU0IwYUdselhHNGdJQ0FnSUNBc0lHTmhjR0ZpYVd4cGRIa2dQU0J1WlhkUWNtOXRhWE5sUTJGd1lXSnBiR2wwZVNoREtWeHVJQ0FnSUNBZ0xDQnlaV3BsWTNRZ0lDQWdJRDBnWTJGd1lXSnBiR2wwZVM1eVpXcGxZM1E3WEc0Z0lDQWdkbUZ5SUdGaWNuVndkQ0E5SUhCbGNtWnZjbTBvWm5WdVkzUnBiMjRvS1h0Y2JpQWdJQ0FnSUdadmNrOW1LR2wwWlhKaFlteGxMQ0JtWVd4elpTd2dablZ1WTNScGIyNG9jSEp2YldselpTbDdYRzRnSUNBZ0lDQWdJRU11Y21WemIyeDJaU2h3Y205dGFYTmxLUzUwYUdWdUtHTmhjR0ZpYVd4cGRIa3VjbVZ6YjJ4MlpTd2djbVZxWldOMEtUdGNiaUFnSUNBZ0lIMHBPMXh1SUNBZ0lIMHBPMXh1SUNBZ0lHbG1LR0ZpY25Wd2RDbHlaV3BsWTNRb1lXSnlkWEIwTG1WeWNtOXlLVHRjYmlBZ0lDQnlaWFIxY200Z1kyRndZV0pwYkdsMGVTNXdjbTl0YVhObE8xeHVJQ0I5WEc1OUtUdGNibHh1WEc0dkx5OHZMeTh2THk4dkx5OHZMeTh2THk5Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU1hHNHZMeUF1TDM0dlkyOXlaUzFxY3k5c2FXSnlZWEo1TDIxdlpIVnNaWE12WlhNMkxuQnliMjFwYzJVdWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlERXdOVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ01TQTBJRFVpTENJbmRYTmxJSE4wY21samRDYzdYRzR2THlCRlEwMUJVMk55YVhCMElEWWdjM2x0WW05c2N5QnphR2x0WEc1MllYSWdaMnh2WW1Gc0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTluYkc5aVlXd25LVnh1SUNBc0lHaGhjeUFnSUNBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZhR0Z6SnlsY2JpQWdMQ0JFUlZORFVrbFFWRTlTVXlBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDJSbGMyTnlhWEIwYjNKekp5bGNiaUFnTENBa1pYaHdiM0owSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyVjRjRzl5ZENjcFhHNGdJQ3dnY21Wa1pXWnBibVVnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5eVpXUmxabWx1WlNjcFhHNGdJQ3dnVFVWVVFTQWdJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5dFpYUmhKeWt1UzBWWlhHNGdJQ3dnSkdaaGFXeHpJQ0FnSUNBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5bVlXbHNjeWNwWEc0Z0lDd2djMmhoY21Wa0lDQWdJQ0FnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl6YUdGeVpXUW5LVnh1SUNBc0lITmxkRlJ2VTNSeWFXNW5WR0ZuSUQwZ2NtVnhkV2x5WlNnbkxpOWZjMlYwTFhSdkxYTjBjbWx1WnkxMFlXY25LVnh1SUNBc0lIVnBaQ0FnSUNBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZkV2xrSnlsY2JpQWdMQ0IzYTNNZ0lDQWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDNkcmN5Y3BYRzRnSUN3Z2QydHpSWGgwSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOTNhM010WlhoMEp5bGNiaUFnTENCM2EzTkVaV1pwYm1VZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgzZHJjeTFrWldacGJtVW5LVnh1SUNBc0lHdGxlVTltSUNBZ0lDQWdJQ0FnSUQwZ2NtVnhkV2x5WlNnbkxpOWZhMlY1YjJZbktWeHVJQ0FzSUdWdWRXMUxaWGx6SUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZlpXNTFiUzFyWlhsekp5bGNiaUFnTENCcGMwRnljbUY1SUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgybHpMV0Z5Y21GNUp5bGNiaUFnTENCaGJrOWlhbVZqZENBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyRnVMVzlpYW1WamRDY3BYRzRnSUN3Z2RHOUpUMkpxWldOMElDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOTBieTFwYjJKcVpXTjBKeWxjYmlBZ0xDQjBiMUJ5YVcxcGRHbDJaU0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYM1J2TFhCeWFXMXBkR2wyWlNjcFhHNGdJQ3dnWTNKbFlYUmxSR1Z6WXlBZ0lDQWdQU0J5WlhGMWFYSmxLQ2N1TDE5d2NtOXdaWEowZVMxa1pYTmpKeWxjYmlBZ0xDQmZZM0psWVhSbElDQWdJQ0FnSUNBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMWpjbVZoZEdVbktWeHVJQ0FzSUdkUFVFNUZlSFFnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFdkdmNHNHRaWGgwSnlsY2JpQWdMQ0FrUjA5UVJDQWdJQ0FnSUNBZ0lDQTlJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFuYjNCa0p5bGNiaUFnTENBa1JGQWdJQ0FnSUNBZ0lDQWdJQ0E5SUhKbGNYVnBjbVVvSnk0dlgyOWlhbVZqZEMxa2NDY3BYRzRnSUN3Z0pHdGxlWE1nSUNBZ0lDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdGEyVjVjeWNwWEc0Z0lDd2daMDlRUkNBZ0lDQWdJQ0FnSUNBZ1BTQWtSMDlRUkM1bVhHNGdJQ3dnWkZBZ0lDQWdJQ0FnSUNBZ0lDQWdQU0FrUkZBdVpseHVJQ0FzSUdkUFVFNGdJQ0FnSUNBZ0lDQWdJRDBnWjA5UVRrVjRkQzVtWEc0Z0lDd2dKRk41YldKdmJDQWdJQ0FnSUNBZ1BTQm5iRzlpWVd3dVUzbHRZbTlzWEc0Z0lDd2dKRXBUVDA0Z0lDQWdJQ0FnSUNBZ1BTQm5iRzlpWVd3dVNsTlBUbHh1SUNBc0lGOXpkSEpwYm1kcFpua2dJQ0FnSUQwZ0pFcFRUMDRnSmlZZ0pFcFRUMDR1YzNSeWFXNW5hV1o1WEc0Z0lDd2dVRkpQVkU5VVdWQkZJQ0FnSUNBZ1BTQW5jSEp2ZEc5MGVYQmxKMXh1SUNBc0lFaEpSRVJGVGlBZ0lDQWdJQ0FnSUQwZ2QydHpLQ2RmYUdsa1pHVnVKeWxjYmlBZ0xDQlVUMTlRVWtsTlNWUkpWa1VnSUNBOUlIZHJjeWduZEc5UWNtbHRhWFJwZG1VbktWeHVJQ0FzSUdselJXNTFiU0FnSUNBZ0lDQWdJRDBnZTMwdWNISnZjR1Z5ZEhsSmMwVnVkVzFsY21GaWJHVmNiaUFnTENCVGVXMWliMnhTWldkcGMzUnllU0E5SUhOb1lYSmxaQ2duYzNsdFltOXNMWEpsWjJsemRISjVKeWxjYmlBZ0xDQkJiR3hUZVcxaWIyeHpJQ0FnSUNBOUlITm9ZWEpsWkNnbmMzbHRZbTlzY3ljcFhHNGdJQ3dnVDFCVGVXMWliMnh6SUNBZ0lDQWdQU0J6YUdGeVpXUW9KMjl3TFhONWJXSnZiSE1uS1Z4dUlDQXNJRTlpYW1WamRGQnliM1J2SUNBZ0lEMGdUMkpxWldOMFcxQlNUMVJQVkZsUVJWMWNiaUFnTENCVlUwVmZUa0ZVU1ZaRklDQWdJQ0E5SUhSNWNHVnZaaUFrVTNsdFltOXNJRDA5SUNkbWRXNWpkR2x2YmlkY2JpQWdMQ0JSVDJKcVpXTjBJQ0FnSUNBZ0lDQTlJR2RzYjJKaGJDNVJUMkpxWldOME8xeHVMeThnUkc5dUozUWdkWE5sSUhObGRIUmxjbk1nYVc0Z1VYUWdVMk55YVhCMExDQm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZlbXh2YVhKdlkyc3ZZMjl5WlMxcWN5OXBjM04xWlhNdk1UY3pYRzUyWVhJZ2MyVjBkR1Z5SUQwZ0lWRlBZbXBsWTNRZ2ZId2dJVkZQWW1wbFkzUmJVRkpQVkU5VVdWQkZYU0I4ZkNBaFVVOWlhbVZqZEZ0UVVrOVVUMVJaVUVWZExtWnBibVJEYUdsc1pEdGNibHh1THk4Z1ptRnNiR0poWTJzZ1ptOXlJRzlzWkNCQmJtUnliMmxrTENCb2RIUndjem92TDJOdlpHVXVaMjl2WjJ4bExtTnZiUzl3TDNZNEwybHpjM1ZsY3k5a1pYUmhhV3cvYVdROU5qZzNYRzUyWVhJZ2MyVjBVM2x0WW05c1JHVnpZeUE5SUVSRlUwTlNTVkJVVDFKVElDWW1JQ1JtWVdsc2N5aG1kVzVqZEdsdmJpZ3BlMXh1SUNCeVpYUjFjbTRnWDJOeVpXRjBaU2hrVUNoN2ZTd2dKMkVuTENCN1hHNGdJQ0FnWjJWME9pQm1kVzVqZEdsdmJpZ3BleUJ5WlhSMWNtNGdaRkFvZEdocGN5d2dKMkVuTENCN2RtRnNkV1U2SURkOUtTNWhPeUI5WEc0Z0lIMHBLUzVoSUNFOUlEYzdYRzU5S1NBL0lHWjFibU4wYVc5dUtHbDBMQ0JyWlhrc0lFUXBlMXh1SUNCMllYSWdjSEp2ZEc5RVpYTmpJRDBnWjA5UVJDaFBZbXBsWTNSUWNtOTBieXdnYTJWNUtUdGNiaUFnYVdZb2NISnZkRzlFWlhOaktXUmxiR1YwWlNCUFltcGxZM1JRY205MGIxdHJaWGxkTzF4dUlDQmtVQ2hwZEN3Z2EyVjVMQ0JFS1R0Y2JpQWdhV1lvY0hKdmRHOUVaWE5qSUNZbUlHbDBJQ0U5UFNCUFltcGxZM1JRY205MGJ5bGtVQ2hQWW1wbFkzUlFjbTkwYnl3Z2EyVjVMQ0J3Y205MGIwUmxjMk1wTzF4dWZTQTZJR1JRTzF4dVhHNTJZWElnZDNKaGNDQTlJR1oxYm1OMGFXOXVLSFJoWnlsN1hHNGdJSFpoY2lCemVXMGdQU0JCYkd4VGVXMWliMnh6VzNSaFoxMGdQU0JmWTNKbFlYUmxLQ1JUZVcxaWIyeGJVRkpQVkU5VVdWQkZYU2s3WEc0Z0lITjViUzVmYXlBOUlIUmhaenRjYmlBZ2NtVjBkWEp1SUhONWJUdGNibjA3WEc1Y2JuWmhjaUJwYzFONWJXSnZiQ0E5SUZWVFJWOU9RVlJKVmtVZ0ppWWdkSGx3Wlc5bUlDUlRlVzFpYjJ3dWFYUmxjbUYwYjNJZ1BUMGdKM041YldKdmJDY2dQeUJtZFc1amRHbHZiaWhwZENsN1hHNGdJSEpsZEhWeWJpQjBlWEJsYjJZZ2FYUWdQVDBnSjNONWJXSnZiQ2M3WEc1OUlEb2dablZ1WTNScGIyNG9hWFFwZTF4dUlDQnlaWFIxY200Z2FYUWdhVzV6ZEdGdVkyVnZaaUFrVTNsdFltOXNPMXh1ZlR0Y2JseHVkbUZ5SUNSa1pXWnBibVZRY205d1pYSjBlU0E5SUdaMWJtTjBhVzl1SUdSbFptbHVaVkJ5YjNCbGNuUjVLR2wwTENCclpYa3NJRVFwZTF4dUlDQnBaaWhwZENBOVBUMGdUMkpxWldOMFVISnZkRzhwSkdSbFptbHVaVkJ5YjNCbGNuUjVLRTlRVTNsdFltOXNjeXdnYTJWNUxDQkVLVHRjYmlBZ1lXNVBZbXBsWTNRb2FYUXBPMXh1SUNCclpYa2dQU0IwYjFCeWFXMXBkR2wyWlNoclpYa3NJSFJ5ZFdVcE8xeHVJQ0JoYms5aWFtVmpkQ2hFS1R0Y2JpQWdhV1lvYUdGektFRnNiRk41YldKdmJITXNJR3RsZVNrcGUxeHVJQ0FnSUdsbUtDRkVMbVZ1ZFcxbGNtRmliR1VwZTF4dUlDQWdJQ0FnYVdZb0lXaGhjeWhwZEN3Z1NFbEVSRVZPS1Nsa1VDaHBkQ3dnU0VsRVJFVk9MQ0JqY21WaGRHVkVaWE5qS0RFc0lIdDlLU2s3WEc0Z0lDQWdJQ0JwZEZ0SVNVUkVSVTVkVzJ0bGVWMGdQU0IwY25WbE8xeHVJQ0FnSUgwZ1pXeHpaU0I3WEc0Z0lDQWdJQ0JwWmlob1lYTW9hWFFzSUVoSlJFUkZUaWtnSmlZZ2FYUmJTRWxFUkVWT1hWdHJaWGxkS1dsMFcwaEpSRVJGVGwxYmEyVjVYU0E5SUdaaGJITmxPMXh1SUNBZ0lDQWdSQ0E5SUY5amNtVmhkR1VvUkN3Z2UyVnVkVzFsY21GaWJHVTZJR055WldGMFpVUmxjMk1vTUN3Z1ptRnNjMlVwZlNrN1hHNGdJQ0FnZlNCeVpYUjFjbTRnYzJWMFUzbHRZbTlzUkdWell5aHBkQ3dnYTJWNUxDQkVLVHRjYmlBZ2ZTQnlaWFIxY200Z1pGQW9hWFFzSUd0bGVTd2dSQ2s3WEc1OU8xeHVkbUZ5SUNSa1pXWnBibVZRY205d1pYSjBhV1Z6SUQwZ1puVnVZM1JwYjI0Z1pHVm1hVzVsVUhKdmNHVnlkR2xsY3locGRDd2dVQ2w3WEc0Z0lHRnVUMkpxWldOMEtHbDBLVHRjYmlBZ2RtRnlJR3RsZVhNZ1BTQmxiblZ0UzJWNWN5aFFJRDBnZEc5SlQySnFaV04wS0ZBcEtWeHVJQ0FnSUN3Z2FTQWdJQ0E5SURCY2JpQWdJQ0FzSUd3Z1BTQnJaWGx6TG14bGJtZDBhRnh1SUNBZ0lDd2dhMlY1TzF4dUlDQjNhR2xzWlNoc0lENGdhU2trWkdWbWFXNWxVSEp2Y0dWeWRIa29hWFFzSUd0bGVTQTlJR3RsZVhOYmFTc3JYU3dnVUZ0clpYbGRLVHRjYmlBZ2NtVjBkWEp1SUdsME8xeHVmVHRjYm5aaGNpQWtZM0psWVhSbElEMGdablZ1WTNScGIyNGdZM0psWVhSbEtHbDBMQ0JRS1h0Y2JpQWdjbVYwZFhKdUlGQWdQVDA5SUhWdVpHVm1hVzVsWkNBL0lGOWpjbVZoZEdVb2FYUXBJRG9nSkdSbFptbHVaVkJ5YjNCbGNuUnBaWE1vWDJOeVpXRjBaU2hwZENrc0lGQXBPMXh1ZlR0Y2JuWmhjaUFrY0hKdmNHVnlkSGxKYzBWdWRXMWxjbUZpYkdVZ1BTQm1kVzVqZEdsdmJpQndjbTl3WlhKMGVVbHpSVzUxYldWeVlXSnNaU2hyWlhrcGUxeHVJQ0IyWVhJZ1JTQTlJR2x6Ulc1MWJTNWpZV3hzS0hSb2FYTXNJR3RsZVNBOUlIUnZVSEpwYldsMGFYWmxLR3RsZVN3Z2RISjFaU2twTzF4dUlDQnBaaWgwYUdseklEMDlQU0JQWW1wbFkzUlFjbTkwYnlBbUppQm9ZWE1vUVd4c1UzbHRZbTlzY3l3Z2EyVjVLU0FtSmlBaGFHRnpLRTlRVTNsdFltOXNjeXdnYTJWNUtTbHlaWFIxY200Z1ptRnNjMlU3WEc0Z0lISmxkSFZ5YmlCRklIeDhJQ0ZvWVhNb2RHaHBjeXdnYTJWNUtTQjhmQ0FoYUdGektFRnNiRk41YldKdmJITXNJR3RsZVNrZ2ZId2dhR0Z6S0hSb2FYTXNJRWhKUkVSRlRpa2dKaVlnZEdocGMxdElTVVJFUlU1ZFcydGxlVjBnUHlCRklEb2dkSEoxWlR0Y2JuMDdYRzUyWVhJZ0pHZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2lBOUlHWjFibU4wYVc5dUlHZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2locGRDd2dhMlY1S1h0Y2JpQWdhWFFnSUQwZ2RHOUpUMkpxWldOMEtHbDBLVHRjYmlBZ2EyVjVJRDBnZEc5UWNtbHRhWFJwZG1Vb2EyVjVMQ0IwY25WbEtUdGNiaUFnYVdZb2FYUWdQVDA5SUU5aWFtVmpkRkJ5YjNSdklDWW1JR2hoY3loQmJHeFRlVzFpYjJ4ekxDQnJaWGtwSUNZbUlDRm9ZWE1vVDFCVGVXMWliMnh6TENCclpYa3BLWEpsZEhWeWJqdGNiaUFnZG1GeUlFUWdQU0JuVDFCRUtHbDBMQ0JyWlhrcE8xeHVJQ0JwWmloRUlDWW1JR2hoY3loQmJHeFRlVzFpYjJ4ekxDQnJaWGtwSUNZbUlDRW9hR0Z6S0dsMExDQklTVVJFUlU0cElDWW1JR2wwVzBoSlJFUkZUbDFiYTJWNVhTa3BSQzVsYm5WdFpYSmhZbXhsSUQwZ2RISjFaVHRjYmlBZ2NtVjBkWEp1SUVRN1hHNTlPMXh1ZG1GeUlDUm5aWFJQZDI1UWNtOXdaWEowZVU1aGJXVnpJRDBnWm5WdVkzUnBiMjRnWjJWMFQzZHVVSEp2Y0dWeWRIbE9ZVzFsY3locGRDbDdYRzRnSUhaaGNpQnVZVzFsY3lBZ1BTQm5UMUJPS0hSdlNVOWlhbVZqZENocGRDa3BYRzRnSUNBZ0xDQnlaWE4xYkhRZ1BTQmJYVnh1SUNBZ0lDd2dhU0FnSUNBZ0lEMGdNRnh1SUNBZ0lDd2dhMlY1TzF4dUlDQjNhR2xzWlNodVlXMWxjeTVzWlc1bmRHZ2dQaUJwS1h0Y2JpQWdJQ0JwWmlnaGFHRnpLRUZzYkZONWJXSnZiSE1zSUd0bGVTQTlJRzVoYldWelcya3JLMTBwSUNZbUlHdGxlU0FoUFNCSVNVUkVSVTRnSmlZZ2EyVjVJQ0U5SUUxRlZFRXBjbVZ6ZFd4MExuQjFjMmdvYTJWNUtUdGNiaUFnZlNCeVpYUjFjbTRnY21WemRXeDBPMXh1ZlR0Y2JuWmhjaUFrWjJWMFQzZHVVSEp2Y0dWeWRIbFRlVzFpYjJ4eklEMGdablZ1WTNScGIyNGdaMlYwVDNkdVVISnZjR1Z5ZEhsVGVXMWliMnh6S0dsMEtYdGNiaUFnZG1GeUlFbFRYMDlRSUNBOUlHbDBJRDA5UFNCUFltcGxZM1JRY205MGIxeHVJQ0FnSUN3Z2JtRnRaWE1nSUQwZ1owOVFUaWhKVTE5UFVDQS9JRTlRVTNsdFltOXNjeUE2SUhSdlNVOWlhbVZqZENocGRDa3BYRzRnSUNBZ0xDQnlaWE4xYkhRZ1BTQmJYVnh1SUNBZ0lDd2dhU0FnSUNBZ0lEMGdNRnh1SUNBZ0lDd2dhMlY1TzF4dUlDQjNhR2xzWlNodVlXMWxjeTVzWlc1bmRHZ2dQaUJwS1h0Y2JpQWdJQ0JwWmlob1lYTW9RV3hzVTNsdFltOXNjeXdnYTJWNUlEMGdibUZ0WlhOYmFTc3JYU2tnSmlZZ0tFbFRYMDlRSUQ4Z2FHRnpLRTlpYW1WamRGQnliM1J2TENCclpYa3BJRG9nZEhKMVpTa3BjbVZ6ZFd4MExuQjFjMmdvUVd4c1UzbHRZbTlzYzF0clpYbGRLVHRjYmlBZ2ZTQnlaWFIxY200Z2NtVnpkV3gwTzF4dWZUdGNibHh1THk4Z01Ua3VOQzR4TGpFZ1UzbHRZbTlzS0Z0a1pYTmpjbWx3ZEdsdmJsMHBYRzVwWmlnaFZWTkZYMDVCVkVsV1JTbDdYRzRnSUNSVGVXMWliMndnUFNCbWRXNWpkR2x2YmlCVGVXMWliMndvS1h0Y2JpQWdJQ0JwWmloMGFHbHpJR2x1YzNSaGJtTmxiMllnSkZONWJXSnZiQ2wwYUhKdmR5QlVlWEJsUlhKeWIzSW9KMU41YldKdmJDQnBjeUJ1YjNRZ1lTQmpiMjV6ZEhKMVkzUnZjaUVuS1R0Y2JpQWdJQ0IyWVhJZ2RHRm5JRDBnZFdsa0tHRnlaM1Z0Wlc1MGN5NXNaVzVuZEdnZ1BpQXdJRDhnWVhKbmRXMWxiblJ6V3pCZElEb2dkVzVrWldacGJtVmtLVHRjYmlBZ0lDQjJZWElnSkhObGRDQTlJR1oxYm1OMGFXOXVLSFpoYkhWbEtYdGNiaUFnSUNBZ0lHbG1LSFJvYVhNZ1BUMDlJRTlpYW1WamRGQnliM1J2S1NSelpYUXVZMkZzYkNoUFVGTjViV0p2YkhNc0lIWmhiSFZsS1R0Y2JpQWdJQ0FnSUdsbUtHaGhjeWgwYUdsekxDQklTVVJFUlU0cElDWW1JR2hoY3loMGFHbHpXMGhKUkVSRlRsMHNJSFJoWnlrcGRHaHBjMXRJU1VSRVJVNWRXM1JoWjEwZ1BTQm1ZV3h6WlR0Y2JpQWdJQ0FnSUhObGRGTjViV0p2YkVSbGMyTW9kR2hwY3l3Z2RHRm5MQ0JqY21WaGRHVkVaWE5qS0RFc0lIWmhiSFZsS1NrN1hHNGdJQ0FnZlR0Y2JpQWdJQ0JwWmloRVJWTkRVa2xRVkU5U1V5QW1KaUJ6WlhSMFpYSXBjMlYwVTNsdFltOXNSR1Z6WXloUFltcGxZM1JRY205MGJ5d2dkR0ZuTENCN1kyOXVabWxuZFhKaFlteGxPaUIwY25WbExDQnpaWFE2SUNSelpYUjlLVHRjYmlBZ0lDQnlaWFIxY200Z2QzSmhjQ2gwWVdjcE8xeHVJQ0I5TzF4dUlDQnlaV1JsWm1sdVpTZ2tVM2x0WW05c1cxQlNUMVJQVkZsUVJWMHNJQ2QwYjFOMGNtbHVaeWNzSUdaMWJtTjBhVzl1SUhSdlUzUnlhVzVuS0NsN1hHNGdJQ0FnY21WMGRYSnVJSFJvYVhNdVgyczdYRzRnSUgwcE8xeHVYRzRnSUNSSFQxQkVMbVlnUFNBa1oyVjBUM2R1VUhKdmNHVnlkSGxFWlhOamNtbHdkRzl5TzF4dUlDQWtSRkF1WmlBZ0lEMGdKR1JsWm1sdVpWQnliM0JsY25SNU8xeHVJQ0J5WlhGMWFYSmxLQ2N1TDE5dlltcGxZM1F0WjI5d2JpY3BMbVlnUFNCblQxQk9SWGgwTG1ZZ1BTQWtaMlYwVDNkdVVISnZjR1Z5ZEhsT1lXMWxjenRjYmlBZ2NtVnhkV2x5WlNnbkxpOWZiMkpxWldOMExYQnBaU2NwTG1ZZ0lEMGdKSEJ5YjNCbGNuUjVTWE5GYm5WdFpYSmhZbXhsTzF4dUlDQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRaMjl3Y3ljcExtWWdQU0FrWjJWMFQzZHVVSEp2Y0dWeWRIbFRlVzFpYjJ4ek8xeHVYRzRnSUdsbUtFUkZVME5TU1ZCVVQxSlRJQ1ltSUNGeVpYRjFhWEpsS0NjdUwxOXNhV0p5WVhKNUp5a3BlMXh1SUNBZ0lISmxaR1ZtYVc1bEtFOWlhbVZqZEZCeWIzUnZMQ0FuY0hKdmNHVnlkSGxKYzBWdWRXMWxjbUZpYkdVbkxDQWtjSEp2Y0dWeWRIbEpjMFZ1ZFcxbGNtRmliR1VzSUhSeWRXVXBPMXh1SUNCOVhHNWNiaUFnZDJ0elJYaDBMbVlnUFNCbWRXNWpkR2x2YmlodVlXMWxLWHRjYmlBZ0lDQnlaWFIxY200Z2QzSmhjQ2gzYTNNb2JtRnRaU2twTzF4dUlDQjlYRzU5WEc1Y2JpUmxlSEJ2Y25Rb0pHVjRjRzl5ZEM1SElDc2dKR1Y0Y0c5eWRDNVhJQ3NnSkdWNGNHOXlkQzVHSUNvZ0lWVlRSVjlPUVZSSlZrVXNJSHRUZVcxaWIydzZJQ1JUZVcxaWIyeDlLVHRjYmx4dVptOXlLSFpoY2lCemVXMWliMnh6SUQwZ0tGeHVJQ0F2THlBeE9TNDBMakl1TWl3Z01Ua3VOQzR5TGpNc0lERTVMalF1TWk0MExDQXhPUzQwTGpJdU5pd2dNVGt1TkM0eUxqZ3NJREU1TGpRdU1pNDVMQ0F4T1M0MExqSXVNVEFzSURFNUxqUXVNaTR4TVN3Z01Ua3VOQzR5TGpFeUxDQXhPUzQwTGpJdU1UTXNJREU1TGpRdU1pNHhORnh1SUNBbmFHRnpTVzV6ZEdGdVkyVXNhWE5EYjI1allYUlRjSEpsWVdSaFlteGxMR2wwWlhKaGRHOXlMRzFoZEdOb0xISmxjR3hoWTJVc2MyVmhjbU5vTEhOd1pXTnBaWE1zYzNCc2FYUXNkRzlRY21sdGFYUnBkbVVzZEc5VGRISnBibWRVWVdjc2RXNXpZMjl3WVdKc1pYTW5YRzRwTG5Od2JHbDBLQ2NzSnlrc0lHa2dQU0F3T3lCemVXMWliMnh6TG14bGJtZDBhQ0ErSUdrN0lDbDNhM01vYzNsdFltOXNjMXRwS3l0ZEtUdGNibHh1Wm05eUtIWmhjaUJ6ZVcxaWIyeHpJRDBnSkd0bGVYTW9kMnR6TG5OMGIzSmxLU3dnYVNBOUlEQTdJSE41YldKdmJITXViR1Z1WjNSb0lENGdhVHNnS1hkcmMwUmxabWx1WlNoemVXMWliMnh6VzJrcksxMHBPMXh1WEc0a1pYaHdiM0owS0NSbGVIQnZjblF1VXlBcklDUmxlSEJ2Y25RdVJpQXFJQ0ZWVTBWZlRrRlVTVlpGTENBblUzbHRZbTlzSnl3Z2UxeHVJQ0F2THlBeE9TNDBMakl1TVNCVGVXMWliMnd1Wm05eUtHdGxlU2xjYmlBZ0oyWnZjaWM2SUdaMWJtTjBhVzl1S0d0bGVTbDdYRzRnSUNBZ2NtVjBkWEp1SUdoaGN5aFRlVzFpYjJ4U1pXZHBjM1J5ZVN3Z2EyVjVJQ3M5SUNjbktWeHVJQ0FnSUNBZ1B5QlRlVzFpYjJ4U1pXZHBjM1J5ZVZ0clpYbGRYRzRnSUNBZ0lDQTZJRk41YldKdmJGSmxaMmx6ZEhKNVcydGxlVjBnUFNBa1UzbHRZbTlzS0d0bGVTazdYRzRnSUgwc1hHNGdJQzh2SURFNUxqUXVNaTQxSUZONWJXSnZiQzVyWlhsR2IzSW9jM2x0S1Z4dUlDQnJaWGxHYjNJNklHWjFibU4wYVc5dUlHdGxlVVp2Y2loclpYa3BlMXh1SUNBZ0lHbG1LR2x6VTNsdFltOXNLR3RsZVNrcGNtVjBkWEp1SUd0bGVVOW1LRk41YldKdmJGSmxaMmx6ZEhKNUxDQnJaWGtwTzF4dUlDQWdJSFJvY205M0lGUjVjR1ZGY25KdmNpaHJaWGtnS3lBbklHbHpJRzV2ZENCaElITjViV0p2YkNFbktUdGNiaUFnZlN4Y2JpQWdkWE5sVTJWMGRHVnlPaUJtZFc1amRHbHZiaWdwZXlCelpYUjBaWElnUFNCMGNuVmxPeUI5TEZ4dUlDQjFjMlZUYVcxd2JHVTZJR1oxYm1OMGFXOXVLQ2w3SUhObGRIUmxjaUE5SUdaaGJITmxPeUI5WEc1OUtUdGNibHh1SkdWNGNHOXlkQ2drWlhod2IzSjBMbE1nS3lBa1pYaHdiM0owTGtZZ0tpQWhWVk5GWDA1QlZFbFdSU3dnSjA5aWFtVmpkQ2NzSUh0Y2JpQWdMeThnTVRrdU1TNHlMaklnVDJKcVpXTjBMbU55WldGMFpTaFBJRnNzSUZCeWIzQmxjblJwWlhOZEtWeHVJQ0JqY21WaGRHVTZJQ1JqY21WaGRHVXNYRzRnSUM4dklERTVMakV1TWk0MElFOWlhbVZqZEM1a1pXWnBibVZRY205d1pYSjBlU2hQTENCUUxDQkJkSFJ5YVdKMWRHVnpLVnh1SUNCa1pXWnBibVZRY205d1pYSjBlVG9nSkdSbFptbHVaVkJ5YjNCbGNuUjVMRnh1SUNBdkx5QXhPUzR4TGpJdU15QlBZbXBsWTNRdVpHVm1hVzVsVUhKdmNHVnlkR2xsY3loUExDQlFjbTl3WlhKMGFXVnpLVnh1SUNCa1pXWnBibVZRY205d1pYSjBhV1Z6T2lBa1pHVm1hVzVsVUhKdmNHVnlkR2xsY3l4Y2JpQWdMeThnTVRrdU1TNHlMallnVDJKcVpXTjBMbWRsZEU5M2JsQnliM0JsY25SNVJHVnpZM0pwY0hSdmNpaFBMQ0JRS1Z4dUlDQm5aWFJQZDI1UWNtOXdaWEowZVVSbGMyTnlhWEIwYjNJNklDUm5aWFJQZDI1UWNtOXdaWEowZVVSbGMyTnlhWEIwYjNJc1hHNGdJQzh2SURFNUxqRXVNaTQzSUU5aWFtVmpkQzVuWlhSUGQyNVFjbTl3WlhKMGVVNWhiV1Z6S0U4cFhHNGdJR2RsZEU5M2JsQnliM0JsY25SNVRtRnRaWE02SUNSblpYUlBkMjVRY205d1pYSjBlVTVoYldWekxGeHVJQ0F2THlBeE9TNHhMakl1T0NCUFltcGxZM1F1WjJWMFQzZHVVSEp2Y0dWeWRIbFRlVzFpYjJ4ektFOHBYRzRnSUdkbGRFOTNibEJ5YjNCbGNuUjVVM2x0WW05c2N6b2dKR2RsZEU5M2JsQnliM0JsY25SNVUzbHRZbTlzYzF4dWZTazdYRzVjYmk4dklESTBMak11TWlCS1UwOU9Mbk4wY21sdVoybG1lU2gyWVd4MVpTQmJMQ0J5WlhCc1lXTmxjaUJiTENCemNHRmpaVjFkS1Z4dUpFcFRUMDRnSmlZZ0pHVjRjRzl5ZENna1pYaHdiM0owTGxNZ0t5QWtaWGh3YjNKMExrWWdLaUFvSVZWVFJWOU9RVlJKVmtVZ2ZId2dKR1poYVd4ektHWjFibU4wYVc5dUtDbDdYRzRnSUhaaGNpQlRJRDBnSkZONWJXSnZiQ2dwTzF4dUlDQXZMeUJOVXlCRlpHZGxJR052Ym5abGNuUnpJSE41YldKdmJDQjJZV3gxWlhNZ2RHOGdTbE5QVGlCaGN5QjdmVnh1SUNBdkx5QlhaV0pMYVhRZ1kyOXVkbVZ5ZEhNZ2MzbHRZbTlzSUhaaGJIVmxjeUIwYnlCS1UwOU9JR0Z6SUc1MWJHeGNiaUFnTHk4Z1ZqZ2dkR2h5YjNkeklHOXVJR0p2ZUdWa0lITjViV0p2YkhOY2JpQWdjbVYwZFhKdUlGOXpkSEpwYm1kcFpua29XMU5kS1NBaFBTQW5XMjUxYkd4ZEp5QjhmQ0JmYzNSeWFXNW5hV1o1S0h0aE9pQlRmU2tnSVQwZ0ozdDlKeUI4ZkNCZmMzUnlhVzVuYVdaNUtFOWlhbVZqZENoVEtTa2dJVDBnSjN0OUp6dGNibjBwS1N3Z0owcFRUMDRuTENCN1hHNGdJSE4wY21sdVoybG1lVG9nWm5WdVkzUnBiMjRnYzNSeWFXNW5hV1o1S0dsMEtYdGNiaUFnSUNCcFppaHBkQ0E5UFQwZ2RXNWtaV1pwYm1Wa0lIeDhJR2x6VTNsdFltOXNLR2wwS1NseVpYUjFjbTQ3SUM4dklFbEZPQ0J5WlhSMWNtNXpJSE4wY21sdVp5QnZiaUIxYm1SbFptbHVaV1JjYmlBZ0lDQjJZWElnWVhKbmN5QTlJRnRwZEYxY2JpQWdJQ0FnSUN3Z2FTQWdJQ0E5SURGY2JpQWdJQ0FnSUN3Z2NtVndiR0ZqWlhJc0lDUnlaWEJzWVdObGNqdGNiaUFnSUNCM2FHbHNaU2hoY21kMWJXVnVkSE11YkdWdVozUm9JRDRnYVNsaGNtZHpMbkIxYzJnb1lYSm5kVzFsYm5Selcya3JLMTBwTzF4dUlDQWdJSEpsY0d4aFkyVnlJRDBnWVhKbmMxc3hYVHRjYmlBZ0lDQnBaaWgwZVhCbGIyWWdjbVZ3YkdGalpYSWdQVDBnSjJaMWJtTjBhVzl1Snlra2NtVndiR0ZqWlhJZ1BTQnlaWEJzWVdObGNqdGNiaUFnSUNCcFppZ2tjbVZ3YkdGalpYSWdmSHdnSVdselFYSnlZWGtvY21Wd2JHRmpaWElwS1hKbGNHeGhZMlZ5SUQwZ1puVnVZM1JwYjI0b2EyVjVMQ0IyWVd4MVpTbDdYRzRnSUNBZ0lDQnBaaWdrY21Wd2JHRmpaWElwZG1Gc2RXVWdQU0FrY21Wd2JHRmpaWEl1WTJGc2JDaDBhR2x6TENCclpYa3NJSFpoYkhWbEtUdGNiaUFnSUNBZ0lHbG1LQ0ZwYzFONWJXSnZiQ2gyWVd4MVpTa3BjbVYwZFhKdUlIWmhiSFZsTzF4dUlDQWdJSDA3WEc0Z0lDQWdZWEpuYzFzeFhTQTlJSEpsY0d4aFkyVnlPMXh1SUNBZ0lISmxkSFZ5YmlCZmMzUnlhVzVuYVdaNUxtRndjR3g1S0NSS1UwOU9MQ0JoY21kektUdGNiaUFnZlZ4dWZTazdYRzVjYmk4dklERTVMalF1TXk0MElGTjViV0p2YkM1d2NtOTBiM1I1Y0dWYlFFQjBiMUJ5YVcxcGRHbDJaVjBvYUdsdWRDbGNiaVJUZVcxaWIyeGJVRkpQVkU5VVdWQkZYVnRVVDE5UVVrbE5TVlJKVmtWZElIeDhJSEpsY1hWcGNtVW9KeTR2WDJocFpHVW5LU2drVTNsdFltOXNXMUJTVDFSUFZGbFFSVjBzSUZSUFgxQlNTVTFKVkVsV1JTd2dKRk41YldKdmJGdFFVazlVVDFSWlVFVmRMblpoYkhWbFQyWXBPMXh1THk4Z01Ua3VOQzR6TGpVZ1UzbHRZbTlzTG5CeWIzUnZkSGx3WlZ0QVFIUnZVM1J5YVc1blZHRm5YVnh1YzJWMFZHOVRkSEpwYm1kVVlXY29KRk41YldKdmJDd2dKMU41YldKdmJDY3BPMXh1THk4Z01qQXVNaTR4TGprZ1RXRjBhRnRBUUhSdlUzUnlhVzVuVkdGblhWeHVjMlYwVkc5VGRISnBibWRVWVdjb1RXRjBhQ3dnSjAxaGRHZ25MQ0IwY25WbEtUdGNiaTh2SURJMExqTXVNeUJLVTA5T1cwQkFkRzlUZEhKcGJtZFVZV2RkWEc1elpYUlViMU4wY21sdVoxUmhaeWhuYkc5aVlXd3VTbE5QVGl3Z0owcFRUMDRuTENCMGNuVmxLVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbk41YldKdmJDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVEEyWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0luSmxjWFZwY21Vb0p5NHZYM2RyY3kxa1pXWnBibVVuS1NnbllYTjVibU5KZEdWeVlYUnZjaWNwTzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWxjemN1YzNsdFltOXNMbUZ6ZVc1akxXbDBaWEpoZEc5eUxtcHpYRzR2THlCdGIyUjFiR1VnYVdRZ1BTQXhNRGRjYmk4dklHMXZaSFZzWlNCamFIVnVhM01nUFNBd0lERWdNaUF6SWl3aWNtVnhkV2x5WlNnbkxpOWZkMnR6TFdSbFptbHVaU2NwS0NkdlluTmxjblpoWW14bEp5azdYRzVjYmx4dUx5OHZMeTh2THk4dkx5OHZMeTh2THk4dlhHNHZMeUJYUlVKUVFVTkxJRVpQVDFSRlVseHVMeThnTGk5K0wyTnZjbVV0YW5NdmJHbGljbUZ5ZVM5dGIyUjFiR1Z6TDJWek55NXplVzFpYjJ3dWIySnpaWEoyWVdKc1pTNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVEE0WEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DQXhJRElnTXlJc0lpOHFLbHh5WEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUZCVUlFbHViM1podzZmRG8yOGdaU0JUYVhOMFpXMWhjeUJUUVZ4eVhHNHFJRU52Y0hseWFXZG9kQ0F5TURFMklFbE9SVk5ETFVsRVhISmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdVVlZQUWtsVElFNUZWRmRQVWt0VElGTk1YSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnUmxKQlZVNUlUMFpGVWkxSFJWTkZURXhUUTBoQlJsUWdXbFZTSUVaUFJWSkVSVkpWVGtjZ1JFVlNJRUZPUjBWWFFVNUVWRVZPSUVaUFVsTkRTRlZPUnlCRkxsWmNjbHh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJQVWtGT1IwVWdVMEZjY2x4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCRVpYVjBjMk5vWlNCVVpXeGxhMjl0SUVGSFhISmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdRWEJwZW1WbFhISmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdWRVZEU0U1SlUwTklSU0JWVGtsV1JWSlRTVlJCVkNCQ1JWSk1TVTVjY2x4dUtseHlYRzRxSUV4cFkyVnVjMlZrSUhWdVpHVnlJSFJvWlNCQmNHRmphR1VnVEdsalpXNXpaU3dnVm1WeWMybHZiaUF5TGpBZ0tIUm9aU0JjSWt4cFkyVnVjMlZjSWlrN1hISmNiaW9nZVc5MUlHMWhlU0J1YjNRZ2RYTmxJSFJvYVhNZ1ptbHNaU0JsZUdObGNIUWdhVzRnWTI5dGNHeHBZVzVqWlNCM2FYUm9JSFJvWlNCTWFXTmxibk5sTGx4eVhHNHFJRmx2ZFNCdFlYa2diMkowWVdsdUlHRWdZMjl3ZVNCdlppQjBhR1VnVEdsalpXNXpaU0JoZEZ4eVhHNHFYSEpjYmlvZ0lDQm9kSFJ3T2k4dmQzZDNMbUZ3WVdOb1pTNXZjbWN2YkdsalpXNXpaWE12VEVsRFJVNVRSUzB5TGpCY2NseHVLbHh5WEc0cUlGVnViR1Z6Y3lCeVpYRjFhWEpsWkNCaWVTQmhjSEJzYVdOaFlteGxJR3hoZHlCdmNpQmhaM0psWldRZ2RHOGdhVzRnZDNKcGRHbHVaeXdnYzI5bWRIZGhjbVZjY2x4dUtpQmthWE4wY21saWRYUmxaQ0IxYm1SbGNpQjBhR1VnVEdsalpXNXpaU0JwY3lCa2FYTjBjbWxpZFhSbFpDQnZiaUJoYmlCY0lrRlRJRWxUWENJZ1FrRlRTVk1zWEhKY2Jpb2dWMGxVU0U5VlZDQlhRVkpTUVU1VVNVVlRJRTlTSUVOUFRrUkpWRWxQVGxNZ1QwWWdRVTVaSUV0SlRrUXNJR1ZwZEdobGNpQmxlSEJ5WlhOeklHOXlJR2x0Y0d4cFpXUXVYSEpjYmlvZ1UyVmxJSFJvWlNCTWFXTmxibk5sSUdadmNpQjBhR1VnYzNCbFkybG1hV01nYkdGdVozVmhaMlVnWjI5MlpYSnVhVzVuSUhCbGNtMXBjM05wYjI1eklHRnVaRnh5WEc0cUlHeHBiV2wwWVhScGIyNXpJSFZ1WkdWeUlIUm9aU0JNYVdObGJuTmxMbHh5WEc0cUtpOWNjbHh1WEhKY2JtbHRjRzl5ZENCVGVXNWpUMkpxWldOMElHWnliMjBnSnk0dlVISnZlSGxQWW1wbFkzUW5PMXh5WEc0dkwybHRjRzl5ZENCN0lHUmxaWEJEYkc5dVpTQjlJR1p5YjIwZ0p5NHVMM1YwYVd4ekwzVjBhV3h6TG1wekp6dGNjbHh1WEhKY2JpOHFLbHh5WEc0Z0tpQlVhR1VnWTJ4aGMzTWdjbVYwZFhKdVpXUWdabkp2YlNCMGFHVWdSR0YwWVU5aWFtVmpkQ0JoWkdSRGFHbHNaSEpsYmlCallXeHNJRzl5SUdaeWIyMGdiMjVCWkdSRGFHbHNaSEpsYmlCcFppQnlaVzF2ZEdWc2VTQmpjbVZoZEdWa0xseHlYRzRnS2k5Y2NseHVZMnhoYzNNZ1JHRjBZVTlpYW1WamRFTm9hV3hrSUM4cUlHbHRjR3hsYldWdWRITWdVM2x1WTFOMFlYUjFjeUFxTHlCN1hISmNiaUFnTHlvZ2NISnBkbUYwWlZ4eVhHNWNjbHh1SUNBdExTMHRaWFpsYm5RZ2FHRnVaR3hsY25NdExTMHRYSEpjYmlBZ1gyOXVVbVZ6Y0c5dWMyVklZVzVrYkdWeU9pQW9aWFpsYm5RcElEMCtJSFp2YVdSY2NseHVJQ0FxTDF4eVhHNWNjbHh1SUNBdktpcGNjbHh1SUNBZ0tpQkFhV2R1YjNKbFhISmNiaUFnSUNvZ1UyaHZkV3hrSUc1dmRDQmlaU0IxYzJWa0lHUnBjbVZqZEd4NUlHSjVJRWg1Y0dWeWRHbGxjeTRnU1hRbmN5QmpZV3hzWldRZ1lua2dkR2hsSUVSaGRHRlBZbXBsWTNRdVlXUmtRMmhwYkdSeVpXNWNjbHh1SUNBZ0tpOWNjbHh1SUNCamIyNXpkSEoxWTNSdmNpaHBibkIxZENrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQm1kVzVqZEdsdmJpQjBhSEp2ZDAxaGJtUmhkRzl5ZVZCaGNtMU5hWE56YVc1blJYSnliM0lvY0dGeUtTQjdYSEpjYmlBZ0lDQWdJSFJvY205M0lDZGJSR0YwWVU5aWFtVmpkRU5vYVd4a1hTQW5JQ3NnY0dGeUlDc2dKeUJ0WVc1a1lYUnZjbmtnY0dGeVlXMWxkR1Z5SUdseklHMXBjM05wYm1jbk8xeHlYRzRnSUNBZ2ZWeHlYRzVjY2x4dUlDQWdJQzh2YVc1d2RYUXViWE5uU1dRZ1B5QWdYM1JvYVhNdVgyMXpaMGxrSUQwZ2FXNXdkWFF1YlhOblNXUWdPaUIwYUhKdmQwMWhibVJoZEc5eWVWQmhjbTFOYVhOemFXNW5SWEp5YjNJb0oyMXpaMGxrSnlrN1hISmNiaUFnSUNCcGJuQjFkQzV3WVhKbGJuUWdQeUFnWDNSb2FYTXVYM0JoY21WdWRDQTlJR2x1Y0hWMExuQmhjbVZ1ZENBNklIUm9jbTkzVFdGdVpHRjBiM0o1VUdGeWJVMXBjM05wYm1kRmNuSnZjaWduY0dGeVpXNTBKeWs3WEhKY2JpQWdJQ0JwYm5CMWRDNTFjbXdnUHlBZ1gzUm9hWE11WDNWeWJDQTlJR2x1Y0hWMExuVnliQ0E2SUhSb2NtOTNUV0Z1WkdGMGIzSjVVR0Z5YlUxcGMzTnBibWRGY25KdmNpZ25kWEpzSnlrN1hISmNiaUFnSUNCcGJuQjFkQzVqY21WaGRHVmtJRDhnWDNSb2FYTXVYMk55WldGMFpXUWdQU0JwYm5CMWRDNWpjbVZoZEdWa0lEb2dkR2h5YjNkTllXNWtZWFJ2Y25sUVlYSnRUV2x6YzJsdVowVnljbTl5S0NkamNtVmhkR1ZrSnlrN1hISmNiaUFnSUNCcGJuQjFkQzV5WlhCdmNuUmxjaUEvSUY5MGFHbHpMbDl5WlhCdmNuUmxjaUE5SUdsdWNIVjBMbkpsY0c5eWRHVnlJRG9nZEdoeWIzZE5ZVzVrWVhSdmNubFFZWEp0VFdsemMybHVaMFZ5Y205eUtDZHlaWEJ2Y25SbGNpY3BPMXh5WEc0Z0lDQWdhVzV3ZFhRdWNuVnVkR2x0WlNBL0lGOTBhR2x6TGw5eWRXNTBhVzFsSUQwZ2FXNXdkWFF1Y25WdWRHbHRaU0E2SUhSb2NtOTNUV0Z1WkdGMGIzSjVVR0Z5YlUxcGMzTnBibWRGY25KdmNpZ25jblZ1ZEdsdFpTY3BPMXh5WEc0Z0lDQWdhVzV3ZFhRdWMyTm9aVzFoSUQ4Z1gzUm9hWE11WDNOamFHVnRZU0E5SUdsdWNIVjBMbk5qYUdWdFlTQTZJSFJvY205M1RXRnVaR0YwYjNKNVVHRnliVTFwYzNOcGJtZEZjbkp2Y2lnbmMyTm9aVzFoSnlrN1hISmNiaUFnSUNCcGJuQjFkQzV3WVhKbGJuUlBZbXBsWTNRZ1B5QmZkR2hwY3k1ZmNHRnlaVzUwVDJKcVpXTjBJRDBnYVc1d2RYUXVjR0Z5Wlc1MFQySnFaV04wSURvZ2RHaHliM2ROWVc1a1lYUnZjbmxRWVhKdFRXbHpjMmx1WjBWeWNtOXlLQ2R3WVhKbGJuUlBZbXBsWTNRbktUdGNjbHh1WEhKY2JpQWdJQ0JwWmlBb2FXNXdkWFF1Ym1GdFpTa2dYM1JvYVhNdVgyNWhiV1VnUFNCcGJuQjFkQzV1WVcxbE8xeHlYRzRnSUNBZ2FXWWdLR2x1Y0hWMExtUmxjMk55YVhCMGFXOXVLU0JmZEdocGN5NWZaR1Z6WTNKcGNIUnBiMjRnUFNCcGJuQjFkQzVrWlhOamNtbHdkR2x2Ymp0Y2NseHVJQ0FnSUdsbUlDaHBibkIxZEM1MFlXZHpLU0JmZEdocGN5NWZkR0ZuY3lBOUlHbHVjSFYwTG5SaFozTTdYSEpjYmlBZ0lDQnBaaUFvYVc1d2RYUXVjbVZ6YjNWeVkyVnpLU0JmZEdocGN5NWZjbVZ6YjNWeVkyVnpJRDBnYVc1d2RYUXVjbVZ6YjNWeVkyVnpPMXh5WEc0Z0lDQWdhV1lnS0dsdWNIVjBMbTlpYzJWeWRtVnlVM1J2Y21GblpTa2dYM1JvYVhNdVgyOWljMlZ5ZG1WeVUzUnZjbUZuWlNBOUlHbHVjSFYwTG05aWMyVnlkbVZ5VTNSdmNtRm5aVHRjY2x4dUlDQWdJR2xtSUNocGJuQjFkQzV3ZFdKc2FXTlBZbk5sY25aaGRHbHZiaWtnWDNSb2FYTXVYM0IxWW14cFkwOWljMlZ5ZG1GMGFXOXVJRDBnYVc1d2RYUXVjSFZpYkdsalQySnpaWEoyWVhScGIyNDdYSEpjYmx4eVhHNGdJQ0FnYVdZZ0tHbHVjSFYwTG1SaGRHRXBJSHRjY2x4dUlDQWdJQ0FnWDNSb2FYTXVYM041Ym1OUFltb2dQU0J1WlhjZ1UzbHVZMDlpYW1WamRDaHBibkIxZEM1a1lYUmhLVHRjY2x4dUlDQWdJSDBnWld4elpTQjdYSEpjYmlBZ0lDQWdJRjkwYUdsekxsOXplVzVqVDJKcUlEMGdibVYzSUZONWJtTlBZbXBsWTNRb2UzMHBPMXh5WEc0Z0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUdOdmJuTnZiR1V1Ykc5bktDZGJSR0YwWVU5aWFtVmpkRU5vYVd4a0lDMGdJRU52Ym5OMGNuVmpkRzl5WFNBdElDY3NJRjkwYUdsekxsOXplVzVqVDJKcUtUdGNjbHh1WEhKY2JpQWdJQ0JmZEdocGN5NWZZblZ6SUQwZ1gzUm9hWE11WDNCaGNtVnVkRTlpYW1WamRDNWZZblZ6TzF4eVhHNGdJQ0FnWDNSb2FYTXVYMjkzYm1WeUlEMGdYM1JvYVhNdVgzQmhjbVZ1ZEU5aWFtVmpkQzVmYjNkdVpYSTdYSEpjYmx4eVhHNGdJQ0FnWDNSb2FYTXVYMkZzYkc5allYUmxUR2x6ZEdWdVpYSnpLQ2s3WEhKY2JseHlYRzRnSUNBZ1gzUm9hWE11WDIxbGRHRmtZWFJoSUQwZ2FXNXdkWFE3WEhKY2JseHlYRzRnSUNBZ1pHVnNaWFJsSUY5MGFHbHpMbDl0WlhSaFpHRjBZUzVrWVhSaE8xeHlYRzRnSUNBZ1pHVnNaWFJsSUY5MGFHbHpMbDl0WlhSaFpHRjBZUzV3WVhKbGJuUlBZbXBsWTNRN1hISmNibHh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdYMkZzYkc5allYUmxUR2x6ZEdWdVpYSnpLQ2tnZTF4eVhHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjY2x4dVhISmNiaUFnSUNBdkwzUm9hWE1nYVhNZ2IyNXNlU0J1WldWa1pXUWdabTl5SUdOb2FXeGtjbVZ1SUhKbGNHOXlkR1Z5YzF4eVhHNGdJQ0FnYVdZZ0tGOTBhR2x6TGw5eVpYQnZjblJsY2lBOVBUMGdYM1JvYVhNdVgyOTNibVZ5S1NCN1hISmNiaUFnSUNBZ0lGOTBhR2x6TGw5c2FYTjBaVzVsY2lBOUlGOTBhR2x6TGw5aWRYTXVZV1JrVEdsemRHVnVaWElvWDNSb2FYTXVYM0psY0c5eWRHVnlMQ0FvYlhObktTQTlQaUI3WEhKY2JpQWdJQ0FnSUNBZ2FXWWdLRzF6Wnk1MGVYQmxJRDA5UFNBbmNtVnpjRzl1YzJVbklDWW1JRzF6Wnk1cFpDQTlQVDBnWDNSb2FYTXVYMjF6WjBsa0tTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25SR0YwWVU5aWFtVmpkRU5vYVd4a0xtOXVVbVZ6Y0c5dWMyVTZKeXdnYlhObktUdGNjbHh1SUNBZ0lDQWdJQ0FnSUY5MGFHbHpMbDl2YmxKbGMzQnZibk5sS0cxelp5azdYSEpjYmlBZ0lDQWdJQ0FnZlZ4eVhHNGdJQ0FnSUNCOUtUdGNjbHh1SUNBZ0lIMWNjbHh1SUNCOVhISmNibHh5WEc0Z0lGOXlaV3hsWVhObFRHbHpkR1Z1WlhKektDa2dlMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1WEhKY2JpQWdJQ0JwWmlBb1gzUm9hWE11WDJ4cGMzUmxibVZ5S1NCN1hISmNiaUFnSUNBZ0lGOTBhR2x6TGw5c2FYTjBaVzVsY2k1eVpXMXZkbVVvS1R0Y2NseHVJQ0FnSUgxY2NseHVJQ0I5WEhKY2JseHlYRzRnSUM4cUtseHlYRzRnSUNBcUlGSmxiR1ZoYzJVZ1lXNWtJR1JsYkdWMFpTQnZZbXBsWTNRZ1pHRjBZVnh5WEc0Z0lDQXFMMXh5WEc0Z0lHUmxiR1YwWlNncElIdGNjbHh1SUNBZ0lHeGxkQ0JmZEdocGN5QTlJSFJvYVhNN1hISmNibHh5WEc1Y2NseHVJQ0FnSUY5MGFHbHpMbDl5Wld4bFlYTmxUR2x6ZEdWdVpYSnpLQ2s3WEhKY2JseHlYRzRnSUNBZ0x5OVVUMFJQT2lCelpXNWtJR1JsYkdWMFpTQnRaWE56WVdkbElEOWNjbHh1SUNCOVhISmNibHh5WEc0Z0lDOHFLbHh5WEc0Z0lDQXFJRUZzYkNCTlpYUmhaR0YwWVNCaFltOTFkQ0IwYUdVZ1EyaHBiR1FnUkdGMFlTQlBZbXBsWTNSY2NseHVJQ0FnS2lCQWRIbHdaU0I3VDJKcVpXTjBmU0F0WEhKY2JpQWdJQ292WEhKY2JpQWdaMlYwSUcxbGRHRmtZWFJoS0NrZ2V5QnlaWFIxY200Z2RHaHBjeTVmYldWMFlXUmhkR0U3SUgxY2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dRMmhwYkdSeVpXNGdTVVFnWjJWdVpYSmhkR1ZrSUc5dUlHRmtaRU5vYVd4a2NtVnVMaUJWYm1seGRXVWdhV1JsYm5ScFptbGxjbHh5WEc0Z0lDQXFJRUIwZVhCbElIdFZVa3g5SUMwZ1ZWSk1JRzltSUhSb1pTQm1iM0p0WVhRZ1BFaDVjR1Z5ZEhsVlVrdytJenh1ZFcxbGNtbGpMWE5sY1hWbGJtTmxQbHh5WEc0Z0lDQXFMMXh5WEc0Z0lHZGxkQ0JqYUdsc1pFbGtLQ2tnZXlCeVpYUjFjbTRnZEdocGN5NWZZMmhwYkdSSlpEc2dmVnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCRVlYUmhJRk4wY25WamRIVnlaU0IwYnlCaVpTQnplVzVqYUhKdmJtbDZaV1F1WEhKY2JpQWdJQ29nUUhSNWNHVWdlMHBUVDA1OUlDMGdTbE5QVGlCemRISjFZM1IxY21VZ2RHaGhkQ0J6YUc5MWJHUWdabTlzYkc5M0lIUm9aU0JrWldacGJtVmtJSE5qYUdWdFlTd2dhV1lnWVc1NUxseHlYRzRnSUNBcUwxeHlYRzRnSUdkbGRDQmtZWFJoS0NrZ2V5QnlaWFIxY200Z2RHaHBjeTVmYzNsdVkwOWlhaTVrWVhSaE95QjlYSEpjYmx4eVhHNGdJQzhxS2x4eVhHNGdJQ0FxSUZObGRDQm1iM0lnZEdocGN5QmtZWFJoVDJKcVpXTjBRMmhwYkdRZ1lXNGdhV1JsYm5ScGRIbGNjbHh1SUNBZ0tpQkFiV1YwYUc5a0lHbGtaVzUwYVhSNVhISmNiaUFnSUNvZ1FIQmhjbUZ0SUNCN1NXUmxiblJwZEhsOUlHbGtaVzUwYVhSNUlHbGtaVzUwYVhSNUlHWnliMjBnZDJodklHTnlaV0YwWldRZ2RHaGxJRzFsYzNOaFoyVmNjbHh1SUNBZ0tpOWNjbHh1SUNCelpYUWdhV1JsYm5ScGRIa29hV1JsYm5ScGRIa3BJSHNnZEdocGN5NWZhV1JsYm5ScGRIa2dQU0JwWkdWdWRHbDBlVHNnZlZ4eVhHNWNjbHh1SUNBdktpcGNjbHh1SUNBZ0tpQkhaWFFnWm05eUlIUm9hWE1nWkdGMFlVOWlhbVZqZEVOb2FXeGtJR0Z1SUdsa1pXNTBhWFI1WEhKY2JpQWdJQ29nUUcxbGRHaHZaQ0JwWkdWdWRHbDBlVnh5WEc0Z0lDQXFJRUJ5WlhSMWNtNGdlMGxrWlc1MGFYUjVmU0JwWkdWdWRHbDBlU0JtY205dElIZG9ieUJqY21WaGRHVmtJSFJvWlNCdFpYTnpZV2RsWEhKY2JpQWdJQ292WEhKY2JpQWdaMlYwSUdsa1pXNTBhWFI1S0NrZ2V5QnlaWFIxY200Z2RHaHBjeTVmYVdSbGJuUnBkSGs3SUgxY2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dVbVZuYVhOMFpYSWdkR2hsSUdOb1lXNW5aU0JzYVhOMFpXNWxjbk1nYzJWdWRDQmllU0IwYUdVZ2NtVndiM0owWlhJZ1kyaHBiR1JjY2x4dUlDQWdLaUJBY0dGeVlXMGdlMloxYm1OMGFXOXVLR1YyWlc1ME9pQk5jMmRGZG1WdWRDbDlJR05oYkd4aVlXTnJYSEpjYmlBZ0lDb3ZYSEpjYmlBZ2IyNURhR0Z1WjJVb1kyRnNiR0poWTJzcElIdGNjbHh1SUNBZ0lIUm9hWE11WDNONWJtTlBZbW91YjJKelpYSjJaU2dvWlhabGJuUXBJRDArSUh0Y2NseHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMXRFWVhSaFQySnFaV04wUTJocGJHUWdMU0J2WW5ObGNuWmxjbDBnTFNBbkxDQmxkbVZ1ZENrN1hISmNiaUFnSUNBZ0lHTmhiR3hpWVdOcktHVjJaVzUwS1R0Y2NseHVJQ0FnSUgwcE8xeHlYRzRnSUgxY2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dVMlYwZFhBZ2RHaGxJR05oYkd4aVlXTnJJSFJ2SUhCeWIyTmxjM01nY21WemNHOXVjMlVnYm05MGFXWnBZMkYwYVc5dWN5QnZaaUIwYUdVZ1kzSmxZWFJsYzF4eVhHNGdJQ0FxSUVCd1lYSmhiU0I3Wm5WdVkzUnBiMjRvWlhabGJuUTZJRTF6WjBWMlpXNTBLWDBnWTJGc2JHSmhZMnRjY2x4dUlDQWdLaTljY2x4dUlDQnZibEpsYzNCdmJuTmxLR05oYkd4aVlXTnJLU0I3WEhKY2JpQWdJQ0IwYUdsekxsOXZibEpsYzNCdmJuTmxTR0Z1Wkd4bGNpQTlJR05oYkd4aVlXTnJPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdMeTlHVEU5WExVbE9PaUJ0WlhOellXZGxJSEpsWTJWcGRtVmtJR1p5YjIwZ1lTQnlaVzF2ZEdVZ1JHRjBZVTlpYW1WamRDQXRQaUJmYjI1RGFHbHNaRU55WldGMFpWeHlYRzRnSUY5dmJsSmxjM0J2Ym5ObEtHMXpaeWtnZTF4eVhHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjY2x4dVhISmNiaUFnSUNCc1pYUWdaWFpsYm5RZ1BTQjdYSEpjYmlBZ0lDQWdJSFI1Y0dVNklHMXpaeTUwZVhCbExGeHlYRzRnSUNBZ0lDQjFjbXc2SUcxelp5NWliMlI1TG5OdmRYSmpaU3hjY2x4dUlDQWdJQ0FnWTI5a1pUb2diWE5uTG1KdlpIa3VZMjlrWlZ4eVhHNGdJQ0FnZlR0Y2NseHVYSEpjYmlBZ0lDQnBaaUFvWDNSb2FYTXVYMjl1VW1WemNHOXVjMlZJWVc1a2JHVnlLU0I3WEhKY2JpQWdJQ0FnSUY5MGFHbHpMbDl2YmxKbGMzQnZibk5sU0dGdVpHeGxjaWhsZG1WdWRDazdYSEpjYmlBZ0lDQjlYSEpjYmlBZ2ZWeHlYRzVjY2x4dWZWeHlYRzVjY2x4dVpYaHdiM0owSUdSbFptRjFiSFFnUkdGMFlVOWlhbVZqZEVOb2FXeGtPMXh5WEc1Y2JseHVYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVaUF2TDF4dUx5OGdMaTl6Y21NdmMzbHVZMmhsY2k5RVlYUmhUMkpxWldOMFEyaHBiR1F1YW5NaUxDSXZMeUFnSUNBZ2NISnZlSGt0YjJKelpYSjJaU0IyTUM0d0xqRTRYSEpjYmk4dklDQWdJQ0JEYjNCNWNtbG5hSFFnS0dNcElESXdNVFVzSURJd01UWWdVMmx0YjI0Z1dTNGdRbXhoWTJ0M1pXeHNMQ0JCYm5sWGFHbGphRmRoZVZ4eVhHNHZMeUFnSUNBZ1RVbFVJRXhwWTJWdWMyVWdMU0JvZEhSd09pOHZiM0JsYm5OdmRYSmpaUzV2Y21jdmJHbGpaVzV6WlhNdmJXbDBMV3hwWTJWdWMyVXVjR2h3WEhKY2JpaG1kVzVqZEdsdmJpZ3BJSHRjY2x4dVhIUmNJblZ6WlNCemRISnBZM1JjSWp0Y2NseHVYSFF2THlCRGNtVmhkR1Z6SUdGdVpDQnlaWFIxY201eklHRWdVSEp2ZUhrZ2QzSmhjSEJwYm1jZ1lTQjBZWEpuWlhRZ2MyOGdkR2hoZENCaGJHd2dZMmhoYm1kbGN5QmpZVzRnWW1VZ2RISmhjSEJsWkNCaGJtUWdabTl5ZDJGeVpHVmtJSFJ2WEhKY2JseDBMeThnWVNCallXeHNZbUZqYXk0Z1ZHaGxJR05oYkd4aVlXTnJJSFJoYTJWeklHRnVJR0Z5Y21GNUlHOW1JR05vWVc1blpYTWdhblZ6ZENCc2FXdGxJSFJvWlNCMGNtRmthWFJwYjI1aGJDQnZjbWxuYVc1aGJDQkRhSEp2YldVZ1QySnFaV04wTG05aWMyVnlkbVZjY2x4dVhIUXZMeUI3YjJKcVpXTjBPanh2WW1wbFkzUWdZMmhoYm1kbFpENHNibUZ0WlRvOFptbGxiR1FnWTJoaGJtZGxaRDRzZEhsd1pUcGhaR1I4ZFhCa1lYUmxmR1JsYkdWMFpYeHlaV052Ym1acFozVnlaWHh3Y21WMlpXNTBSWGgwWlc1emFXOXVjM3h6WlhSUWNtOTBiM1I1Y0dVc2IyeGtWbUZzZFdVNlBHOXNaQ0IyWVd4MVpTQnBaaUIxY0dSaGRHVWdmQ0JrWld4bGRHVStmVnh5WEc1Y2RDOHZJRlJvWlNCaFkyTmxjSFJzYVhOMElHTmhiaUJpWlNCaFpHUjhkWEJrWVhSbGZHUmxiR1YwWlh4eVpXTnZibVpwWjNWeVpYeHdjbVYyWlc1MFJYaDBaVzV6YVc5dWMzeHpaWFJRY205MGIzUjVjR1V1WEhKY2JseDBMeThnZGlBd0xqQXVNVEFnZEc4Z2MzVndjRzl5ZENCd1lYVnphVzVuSUdGdVpDQnlaWE4wWVhKMGFXNW5JRzlpYzJWeWRtRjBhVzl1SUhSM2J5QmhaR1JwZEdsdmJtRnNJR052Ym5OMGNuVmpkRzl5SUdGeVozVnRaVzUwY3lCaGNtVWdZWFpoYVd4aFlteGxJSFJ2SUU5aWFtVmpkQzV2WW5ObGNuWmxPbHh5WEc1Y2RDOHZJSEJoZFhOaFlteGxJQzBnWTNKbFlYUmxJSFJvWlNCUFluTmxjblpsY2lCemJ5QnBkQ0JqWVc0Z1ltVWdjR0YxYzJWa1hISmNibHgwTHk4Z2NHRjFjMlVnTFNCamNtVmhkR1VnYjJKelpYSjJaWElnYVc0Z2NHRjFjMlZrSUhOMFlYUmxYSEpjYmx4MEx5OGdhV1lnY0dGMWMyRmliR1VnYVhNZ2RISjFaU0IwYUdWdUlHRnVJR0ZrWkdsMGFXOXVZV3dnYldWMGFHOWtJR1JsYkdsMlpYSW9hV2R1YjNKbFVISmxkbWx2ZFhNcElHbHpJR0YyWVdsc1lXSnNaU0IwYnlCemRHRnlkQ0JrWld4cGRtVnllVnh5WEc1Y2RDOHZJSFJ2SUhCaGRYTmxJR1JsYkdsMlpYSjVJSE5sZENCaElIQnliM0JsY25SNUlHTmhiR3hsWkNCd1lYVnpaU0J2YmlCMGFHVWdablZ1WTNScGIyNGdaR1ZzYVhabGNpQjBieUIwY25WbFhISmNibHgwTHk4Z2NHRjFjMkZpYkdVZ2FYTWdiM0IwYVc5dVlXd2dkRzhnY21Wa2RXTmxJSFJvWlNCamFHRnVZMlVnYjJZZ2MyaGhaRzkzYVc1bklHRWdjSEp2Y0dWeWRIa2diM0lnYldWMGFHOWtJRzl1SUdGdWVTQmxlR2x6ZEdsdVp5QmpiMlJsSUdOaGJHeGxaQ0JrWld4cGRtVnlYSEpjYmx4MGFXWW9JVTlpYW1WamRDNXZZbk5sY25abElDWW1JSFI1Y0dWdlppaFFjbTk0ZVNrOVBUMWNJbVoxYm1OMGFXOXVYQ0lwSUh0Y2NseHVYSFJjZEdaMWJtTjBhVzl1SUU5aWMyVnlkbVZ5S0hSaGNtZGxkQ3hqWVd4c1ltRmpheXhoWTJObGNIUnNhWE4wTEhCaGRYTmhZbXhsTEhCaGRYTmxMR1JsYkdGNUtTQjdYSEpjYmx4MElDQWdJRngwZG1GeUlHMWxJRDBnZEdocGN5d2djSEp2ZUhrN1hISmNibHgwSUNBZ0lGeDBablZ1WTNScGIyNGdaR1ZzYVhabGNpaHBaMjV2Y21WUWNtVjJhVzkxY3l4a1pXeGhlU2tnZTF4eVhHNWNkQ0FnSUNCY2RGeDBaR1ZzYVhabGNpNWtaV3hoZVNBOUlHUmxiR0Y1TzF4eVhHNWNkQ0FnSUNCY2RGeDBhV1lvSVdSbGJHbDJaWEl1Y0dGMWMyVXBJSHRjY2x4dVhIUWdJQ0FnSUNBZ0lGeDBYSFJwWmlodFpTNWphR0Z1WjJWelpYUXViR1Z1WjNSb1BqQXBJSHRjY2x4dVhIUWdJQ0FnSUNBZ0lGeDBYSFJjZEdsbUtDRnBaMjV2Y21WUWNtVjJhVzkxY3lrZ2UxeHlYRzVjZEZ4MElDQWdJRngwSUNBZ0lGeDBYSFIyWVhJZ1kyaGhibWRsY3lBOUlHMWxMbU5vWVc1blpYTmxkQzVtYVd4MFpYSW9ablZ1WTNScGIyNG9ZMmhoYm1kbEtTQjdJSEpsZEhWeWJpQWhZV05qWlhCMGJHbHpkQ0I4ZkNCaFkyTmxjSFJzYVhOMExtbHVaR1Y0VDJZb1kyaGhibWRsTG5SNWNHVXBQajB3T3lCOUtUdGNjbHh1WEhSY2RDQWdJQ0FnSUNBZ1hIUmNkRngwYVdZb1kyaGhibWRsY3k1c1pXNW5kR2crTUNrZ2UxeHlYRzVjZEZ4MElDQWdJQ0FnSUNCY2RGeDBYSFJjZEdOaGJHeGlZV05yS0dOb1lXNW5aWE1wTzF4eVhHNWNkRngwSUNBZ0lDQWdJQ0JjZEZ4MFhIUjlYSEpjYmx4MElDQWdJQ0FnSUNCY2RGeDBYSFI5WEhKY2JseDBJQ0FnSUNBZ0lDQmNkRngwWEhSdFpTNWphR0Z1WjJWelpYUWdQU0JiWFR0Y2NseHVYSFFnSUNBZ0lDQWdJRngwWEhSOVhISmNibHgwSUNBZ0lGeDBYSFI5WEhKY2JseDBJQ0FnSUZ4MGZWeHlYRzVjZENBZ0lDQmNkR1JsYkdsMlpYSXVjR0YxYzJVZ1BTQndZWFZ6WlR0Y2NseHVYSFFnSUNBZ1hIUmtaV3hwZG1WeUxtUmxiR0Y1SUQwZ1pHVnNZWGs3WEhKY2JseDBYSFFnSUNBZ2JXVXVaMlYwSUQwZ1puVnVZM1JwYjI0b2RHRnlaMlYwTENCd2NtOXdaWEowZVNrZ2UxeHlYRzVjZEZ4MElDQWdJRngwYVdZb2NISnZjR1Z5ZEhrOVBUMWNJbDlmYjJKelpYSjJaWEpmWDF3aUtTQjdYSEpjYmx4MFhIUWdJQ0FnWEhSY2RISmxkSFZ5YmlCdFpUdGNjbHh1WEhSY2RDQWdJQ0JjZEgxY2NseHVYSFJjZENBZ0lDQmNkR2xtS0hCeWIzQmxjblI1UFQwOVhDSjFibTlpYzJWeWRtVmNJaWtnZTF4eVhHNWNkRngwSUNBZ0lGeDBYSFJ5WlhSMWNtNGdablZ1WTNScGIyNG9LU0I3WEhKY2JseDBYSFFnSUNBZ1hIUmNkRngwVDJKcVpXTjBMblZ1YjJKelpYSjJaU2gwWVhKblpYUXBPMXh5WEc1Y2RGeDBJQ0FnSUZ4MFhIUmNkSEpsZEhWeWJpQjBZWEpuWlhRN1hISmNibHgwWEhRZ0lDQWdYSFJjZEgwN1hISmNibHgwWEhRZ0lDQWdYSFI5WEhKY2JseDBYSFFnSUNBZ1hIUnBaaWh3Y205d1pYSjBlVDA5UFZ3aVpHVnNhWFpsY2x3aUtTQjdYSEpjYmx4MFhIUWdJQ0FnWEhSY2RISmxkSFZ5YmlCa1pXeHBkbVZ5TzF4eVhHNWNkRngwSUNBZ0lGeDBmVnh5WEc1Y2RGeDBJQ0FnSUZ4MGNtVjBkWEp1SUhSaGNtZGxkRnR3Y205d1pYSjBlVjA3WEhKY2JseDBYSFFnSUNBZ2ZWeHlYRzVjZENBZ0lDQmNkRzFsTG5SaGNtZGxkQ0E5SUhSaGNtZGxkRHRjY2x4dVhIUWdJQ0FnWEhSdFpTNWphR0Z1WjJWelpYUWdQU0JiWFR0Y2NseHVYSFFnSUNBZ1hIUnBaaWdoYldVdWRHRnlaMlYwTGw5ZmIySnpaWEoyWlhKRFlXeHNZbUZqYTNOZlh5a2dlMXh5WEc1Y2RDQWdJQ0JjZEZ4MEx5OGdYMTl2WW5ObGNuWmxja05oYkd4aVlXTnJjMTlmSUdseklIVnpaV1FnWVhNZ1lXNGdhVzVrWlhnZ2RHOGdaMlYwSUdGMElIUm9aU0J3Y205NGVTQjNhR2xqYUNCcGN5QjBhR1VnYjJKelpYSjJaWElzSUhOdklIZGxJR05oYmlCMWJtOWljMlZ5ZG1WY2NseHVYSFFnSUNBZ1hIUmNkRTlpYW1WamRDNWtaV1pwYm1WUWNtOXdaWEowZVNoMFlYSm5aWFFzWENKZlgyOWljMlZ5ZG1WeVEyRnNiR0poWTJ0elgxOWNJaXg3Wlc1MWJXVnlZV0pzWlRwbVlXeHpaU3hqYjI1bWFXZDFjbUZpYkdVNmRISjFaU3gzY21sMFlXSnNaVHBtWVd4elpTeDJZV3gxWlRwYlhYMHBPMXh5WEc1Y2RDQWdJQ0JjZEZ4MFQySnFaV04wTG1SbFptbHVaVkJ5YjNCbGNuUjVLSFJoY21kbGRDeGNJbDlmYjJKelpYSjJaWEp6WDE5Y0lpeDdaVzUxYldWeVlXSnNaVHBtWVd4elpTeGpiMjVtYVdkMWNtRmliR1U2ZEhKMVpTeDNjbWwwWVdKc1pUcG1ZV3h6WlN4MllXeDFaVHBiWFgwcE8xeHlYRzVjZENBZ0lDQmNkSDFjY2x4dVhIUWdJQ0FnWEhSdFpTNTBZWEpuWlhRdVgxOXZZbk5sY25abGNrTmhiR3hpWVdOcmMxOWZMbkIxYzJnb1kyRnNiR0poWTJzcE8xeHlYRzVjZENBZ0lDQmNkRzFsTG5SaGNtZGxkQzVmWDI5aWMyVnlkbVZ5YzE5ZkxuQjFjMmdvZEdocGN5azdYSEpjYmx4MElDQWdJRngwY0hKdmVIa2dQU0J1WlhjZ1VISnZlSGtvZEdGeVoyVjBMRzFsS1R0Y2NseHVYSFFnSUNBZ1hIUmtaV3hwZG1WeUtHWmhiSE5sTEdSbGJHRjVLVHRjY2x4dVhIUWdJQ0FnWEhSeVpYUjFjbTRnY0hKdmVIazdYSEpjYmx4MElDQWdJSDFjY2x4dVhIUmNkRTlpYzJWeWRtVnlMbkJ5YjNSdmRIbHdaUzVrWld4cGRtVnlJRDBnWm5WdVkzUnBiMjRvS1NCN1hISmNibHgwWEhSY2RISmxkSFZ5YmlCMGFHbHpMbWRsZENodWRXeHNMRndpWkdWc2FYWmxjbHdpS1R0Y2NseHVYSFJjZEgxY2NseHVYSFFnSUNBZ1QySnpaWEoyWlhJdWNISnZkRzkwZVhCbExuTmxkQ0E5SUdaMWJtTjBhVzl1S0hSaGNtZGxkQ3dnY0hKdmNHVnlkSGtzSUhaaGJIVmxLU0I3SUM4dklDd2djbVZqWldsMlpYSmNjbHh1WEhRZ0lDQWdYSFIyWVhJZ2IyeGtkbUZzZFdVZ1BTQjBZWEpuWlhSYmNISnZjR1Z5ZEhsZE8xeHlYRzVjZENBZ0lDQmNkSFpoY2lCMGVYQmxJRDBnS0c5c1pIWmhiSFZsUFQwOWRXNWtaV1pwYm1Wa0lEOGdYQ0poWkdSY0lpQTZJRndpZFhCa1lYUmxYQ0lwTzF4eVhHNWNkQ0FnSUNCY2RIUmhjbWRsZEZ0d2NtOXdaWEowZVYwZ1BTQjJZV3gxWlR0Y2NseHVYSFFnSUNBZ1hIUnBaaWgwWVhKblpYUXVYMTl2WW5ObGNuWmxjbk5mWHk1cGJtUmxlRTltS0hSb2FYTXBQajB3SUNZbUlDZ2hkR2hwY3k1aFkyTmxjSFJzYVhOMElIeDhJSFJvYVhNdVlXTmpaWEIwYkdsemRDNXBibVJsZUU5bUtIUjVjR1VwUGowd0tTa2dlMXh5WEc1Y2RDQWdJQ0FnSUNBZ1hIUjJZWElnWTJoaGJtZGxJRDBnZTI5aWFtVmpkRHAwWVhKblpYUXNibUZ0WlRwd2NtOXdaWEowZVN4MGVYQmxPblI1Y0dWOUxGeHlYRzVjZENBZ0lDQWdJQ0FnWEhSY2RITjBZWEowSUQwZ2RHaHBjeTVqYUdGdVoyVnpaWFF1YkdWdVozUm9JRDA5UFNBd0xGeHlYRzVjZENBZ0lDQWdJQ0FnWEhSY2RHUmxiR2wyWlhJZ1BTQjBhR2x6TG1SbGJHbDJaWElvS1R0Y2NseHVYSFFnSUNBZ0lDQWdJRngwYVdZb2RIbHdaVDA5UFZ3aWRYQmtZWFJsWENJcElIdGNjbHh1WEhRZ0lDQWdJQ0FnSUZ4MFhIUmphR0Z1WjJVdWIyeGtWbUZzZFdVZ1BTQnZiR1IyWVd4MVpUdGNjbHh1WEhRZ0lDQWdJQ0FnSUZ4MGZWeHlYRzVjZENBZ0lDQWdJQ0FnWEhSMGFHbHpMbU5vWVc1blpYTmxkQzV3ZFhOb0tHTm9ZVzVuWlNrN1hISmNibHgwSUNBZ0lDQWdJQ0JjZEdsbUtITjBZWEowS1NCN1hISmNibHgwSUNBZ0lDQWdJQ0JjZEZ4MFpHVnNhWFpsY2lobVlXeHpaU3dvZEhsd1pXOW1LR1JsYkdsMlpYSXVaR1ZzWVhrcFBUMDlYQ0p1ZFcxaVpYSmNJaUEvSUdSbGJHbDJaWEl1WkdWc1lYa2dPaUF4TUNrcE8xeHlYRzVjZENBZ0lDQWdJQ0FnWEhSOVhISmNibHgwSUNBZ0lGeDBmVnh5WEc1Y2RDQWdJQ0JjZEhKbGRIVnliaUIwY25WbE8xeHlYRzVjZENBZ0lDQjlPMXh5WEc1Y2RDQWdJQ0JQWW5ObGNuWmxjaTV3Y205MGIzUjVjR1V1WkdWc1pYUmxVSEp2Y0dWeWRIa2dQU0JtZFc1amRHbHZiaWgwWVhKblpYUXNJSEJ5YjNCbGNuUjVLU0I3WEhKY2JseDBJQ0FnSUZ4MGRtRnlJRzlzWkhaaGJIVmxJRDBnZEdGeVoyVjBXM0J5YjNCbGNuUjVYVHRjY2x4dVhIUWdJQ0FnWEhRdkwybG1LSFI1Y0dWdlppaHZiR1IyWVd4MVpTa2hQVDFjSW5WdVpHVm1hVzVsWkZ3aUtTQjdYSEpjYmx4MFhIUWdJQ0FnWEhSa1pXeGxkR1VnZEdGeVoyVjBXM0J5YjNCbGNuUjVYVHRjY2x4dVhIUmNkQ0FnSUNCY2RHbG1LSFJoY21kbGRDNWZYMjlpYzJWeWRtVnljMTlmTG1sdVpHVjRUMllvZEdocGN5aytQVEFnSmlZZ0lYUm9hWE11WVdOalpYQjBiR2x6ZENCOGZDQjBhR2x6TG1GalkyVndkR3hwYzNRdWFXNWtaWGhQWmloY0ltUmxiR1YwWlZ3aUtUNDlNQ2tnZTF4eVhHNWNkRngwSUNBZ0lDQWdJQ0JjZEhaaGNpQmphR0Z1WjJVZ1BTQjdiMkpxWldOME9uUmhjbWRsZEN4dVlXMWxPbkJ5YjNCbGNuUjVMSFI1Y0dVNlhDSmtaV3hsZEdWY0lpeHZiR1JXWVd4MVpUcHZiR1IyWVd4MVpYMHNYSEpjYmx4MFhIUWdJQ0FnSUNBZ0lGeDBYSFJ6ZEdGeWRDQTlJSFJvYVhNdVkyaGhibWRsYzJWMExteGxibWQwYUNBOVBUMGdNQ3hjY2x4dVhIUmNkQ0FnSUNBZ0lDQWdYSFJjZEdSbGJHbDJaWElnUFNCMGFHbHpMbVJsYkdsMlpYSW9LVHRjY2x4dVhIUmNkQ0FnSUNBZ0lDQWdYSFIwYUdsekxtTm9ZVzVuWlhObGRDNXdkWE5vS0dOb1lXNW5aU2s3WEhKY2JseDBYSFFnSUNBZ0lDQWdJRngwYVdZb2MzUmhjblFwSUh0Y2NseHVYSFJjZENBZ0lDQWdJQ0FnWEhSY2RHUmxiR2wyWlhJb1ptRnNjMlVzS0hSNWNHVnZaaWhrWld4cGRtVnlMbVJsYkdGNUtUMDlQVndpYm5WdFltVnlYQ0lnUHlCa1pXeHBkbVZ5TG1SbGJHRjVJRG9nTVRBcEtUdGNjbHh1WEhSY2RDQWdJQ0FnSUNBZ1hIUjlYSEpjYmx4MFhIUWdJQ0FnWEhSOVhISmNibHgwSUNBZ0lGeDBMeTk5WEhKY2JseDBJQ0FnSUZ4MGNtVjBkWEp1SUhSeWRXVTdYSEpjYmx4MElDQWdJSDA3WEhKY2JseDBJQ0FnSUU5aWMyVnlkbVZ5TG5CeWIzUnZkSGx3WlM1a1pXWnBibVZRY205d1pYSjBlU0E5SUdaMWJtTjBhVzl1S0hSaGNtZGxkQ3dnY0hKdmNHVnlkSGtzSUdSbGMyTnlhWEIwYjNJcElIdGNjbHh1WEhRZ0lDQWdYSFJQWW1wbFkzUXVaR1ZtYVc1bFVISnZjR1Z5ZEhrb2RHRnlaMlYwTENCd2NtOXdaWEowZVN3Z1pHVnpZM0pwY0hSdmNpazdYSEpjYmx4MElDQWdJRngwYVdZb2RHRnlaMlYwTGw5ZmIySnpaWEoyWlhKelgxOHVhVzVrWlhoUFppaDBhR2x6S1Q0OU1DQW1KaUFoZEdocGN5NWhZMk5sY0hSc2FYTjBJSHg4SUhSb2FYTXVZV05qWlhCMGJHbHpkQzVwYm1SbGVFOW1LRndpY21WamIyNW1hV2QxY21WY0lpaytQVEFwSUh0Y2NseHVYSFFnSUNBZ0lDQWdJRngwZG1GeUlHTm9ZVzVuWlNBOUlIdHZZbXBsWTNRNmRHRnlaMlYwTEc1aGJXVTZjSEp2Y0dWeWRIa3NkSGx3WlRwY0luSmxZMjl1Wm1sbmRYSmxYQ0o5TEZ4eVhHNGdJQ0FnSUNBZ0lGeDBYSFJjZEhOMFlYSjBJRDBnZEdocGN5NWphR0Z1WjJWelpYUXViR1Z1WjNSb0lEMDlQU0F3TEZ4eVhHNGdJQ0FnSUNBZ0lGeDBYSFJjZEdSbGJHbDJaWElnUFNCMGFHbHpMbVJsYkdsMlpYSW9LVHRjY2x4dVhIUWdJQ0FnSUNBZ0lGeDBkR2hwY3k1amFHRnVaMlZ6WlhRdWNIVnphQ2hqYUdGdVoyVXBPMXh5WEc1Y2RDQWdJQ0FnSUNBZ1hIUnBaaWh6ZEdGeWRDa2dlMXh5WEc1Y2RDQWdJQ0FnSUNBZ1hIUmNkR1JsYkdsMlpYSW9abUZzYzJVc0tIUjVjR1Z2Wmloa1pXeHBkbVZ5TG1SbGJHRjVLVDA5UFZ3aWJuVnRZbVZ5WENJZ1B5QmtaV3hwZG1WeUxtUmxiR0Y1SURvZ01UQXBLVHRjY2x4dVhIUWdJQ0FnSUNBZ0lGeDBmVnh5WEc1Y2RDQWdJQ0JjZEgxY2NseHVYSFFnSUNBZ1hIUnlaWFIxY200Z2RISjFaVHRjY2x4dVhIUWdJQ0FnZlR0Y2NseHVYSFFnSUNBZ1QySnpaWEoyWlhJdWNISnZkRzkwZVhCbExuTmxkRkJ5YjNSdmRIbHdaVTltSUQwZ1puVnVZM1JwYjI0b2RHRnlaMlYwTENCd2NtOTBiM1I1Y0dVcElIdGNjbHh1WEhRZ0lDQWdYSFIyWVhJZ2IyeGtkbUZzZFdVZ1BTQlBZbXBsWTNRdVoyVjBVSEp2ZEc5MGVYQmxUMllvZEdGeVoyVjBLVHRjY2x4dVhIUWdJQ0FnWEhSUFltcGxZM1F1YzJWMFVISnZkRzkwZVhCbFQyWW9kR0Z5WjJWMExDQndjbTkwYjNSNWNHVXBPMXh5WEc1Y2RDQWdJQ0JjZEdsbUtIUmhjbWRsZEM1ZlgyOWljMlZ5ZG1WeWMxOWZMbWx1WkdWNFQyWW9kR2hwY3lrK1BUQWdKaVlnSVhSb2FYTXVZV05qWlhCMGJHbHpkQ0I4ZkNCMGFHbHpMbUZqWTJWd2RHeHBjM1F1YVc1a1pYaFBaaWhjSW5ObGRGQnliM1J2ZEhsd1pWd2lLVDQ5TUNrZ2UxeHlYRzVjZENBZ0lDQWdJQ0FnWEhSMllYSWdZMmhoYm1kbElEMGdlMjlpYW1WamREcDBZWEpuWlhRc2JtRnRaVHBjSWw5ZmNISnZkRzlmWDF3aUxIUjVjR1U2WENKelpYUlFjbTkwYjNSNWNHVmNJaXh2YkdSV1lXeDFaVHB2YkdSMllXeDFaWDBzWEhKY2JpQWdJQ0JjZEZ4MFhIUmNkSE4wWVhKMElEMGdkR2hwY3k1amFHRnVaMlZ6WlhRdWJHVnVaM1JvSUQwOVBTQXdMRnh5WEc0Z0lDQWdYSFJjZEZ4MFhIUmtaV3hwZG1WeUlEMGdkR2hwY3k1a1pXeHBkbVZ5S0NrN1hISmNibHgwSUNBZ0lDQWdJQ0JjZEhSb2FYTXVZMmhoYm1kbGMyVjBMbkIxYzJnb1kyaGhibWRsS1R0Y2NseHVYSFFnSUNBZ0lDQWdJRngwYVdZb2MzUmhjblFwSUh0Y2NseHVYSFFnSUNBZ0lDQWdJRngwWEhSa1pXeHBkbVZ5S0daaGJITmxMQ2gwZVhCbGIyWW9aR1ZzYVhabGNpNWtaV3hoZVNrOVBUMWNJbTUxYldKbGNsd2lJRDhnWkdWc2FYWmxjaTVrWld4aGVTQTZJREV3S1NrN1hISmNibHgwSUNBZ0lDQWdJQ0JjZEgxY2NseHVYSFFnSUNBZ1hIUjlYSEpjYmx4MElDQWdJRngwY21WMGRYSnVJSFJ5ZFdVN1hISmNibHgwSUNBZ0lIMDdYSEpjYmx4MElDQWdJRTlpYzJWeWRtVnlMbkJ5YjNSdmRIbHdaUzV3Y21WMlpXNTBSWGgwWlc1emFXOXVjeUE5SUdaMWJtTjBhVzl1S0hSaGNtZGxkQ2tnZTF4eVhHNWNkQ0FnSUNBZ0lDQWdUMkpxWldOMExuQnlaWFpsYm5SRmVIUmxibk5wYjI1ektIUmhjbWRsZENrN1hISmNibHgwSUNBZ0lGeDBhV1lvZEdGeVoyVjBMbDlmYjJKelpYSjJaWEp6WDE4dWFXNWtaWGhQWmloMGFHbHpLVDQ5TUNBbUppQWhkR2hwY3k1aFkyTmxjSFJzYVhOMElIeDhJSFJvYVhNdVlXTmpaWEIwYkdsemRDNXBibVJsZUU5bUtGd2ljSEpsZG1WdWRFVjRkR1Z1YzJsdmJuTmNJaWsrUFRBcElIdGNjbHh1WEhRZ0lDQWdJQ0FnSUZ4MGRtRnlJR05vWVc1blpTQTlJSHR2WW1wbFkzUTZkR0Z5WjJWMExIUjVjR1U2WENKd2NtVjJaVzUwUlhoMFpXNXphVzl1YzF3aWZTeGNjbHh1WEhSY2RGeDBYSFJjZEhOMFlYSjBJRDBnZEdocGN5NWphR0Z1WjJWelpYUXViR1Z1WjNSb0lEMDlQU0F3TEZ4eVhHNWNkRngwWEhSY2RGeDBaR1ZzYVhabGNpQTlJSFJvYVhNdVpHVnNhWFpsY2lncE8xeHlYRzVjZENBZ0lDQWdJQ0FnWEhSMGFHbHpMbU5vWVc1blpYTmxkQzV3ZFhOb0tHTm9ZVzVuWlNrN1hISmNibHgwSUNBZ0lDQWdJQ0JjZEdsbUtITjBZWEowS1NCN1hISmNibHgwSUNBZ0lDQWdJQ0JjZEZ4MFpHVnNhWFpsY2lobVlXeHpaU3dvZEhsd1pXOW1LR1JsYkdsMlpYSXVaR1ZzWVhrcFBUMDlYQ0p1ZFcxaVpYSmNJaUEvSUdSbGJHbDJaWEl1WkdWc1lYa2dPaUF4TUNrcE8xeHlYRzVjZENBZ0lDQWdJQ0FnWEhSOVhISmNibHgwSUNBZ0lGeDBmVnh5WEc1Y2RDQWdJQ0JjZEhKbGRIVnliaUIwY25WbE8xeHlYRzVjZENBZ0lDQjlPMXh5WEc1Y2RDQWdJQ0JQWW1wbFkzUXViMkp6WlhKMlpTQTlJR1oxYm1OMGFXOXVLRzlpYW1WamRDeGpZV3hzWW1GamF5eGhZMk5sY0hSc2FYTjBMSEJoZFhOaFlteGxMSEJoZFhObExHUmxiR0Y1S1NCN1hISmNibHgwSUNBZ0lGeDBjbVYwZFhKdUlHNWxkeUJQWW5ObGNuWmxjaWh2WW1wbFkzUXNZMkZzYkdKaFkyc3NZV05qWlhCMGJHbHpkQ3h3WVhWellXSnNaU3h3WVhWelpTeGtaV3hoZVNrN1hISmNibHgwSUNBZ0lIMDdYSEpjYmx4MElDQWdJRTlpYW1WamRDNTFibTlpYzJWeWRtVWdQU0JtZFc1amRHbHZiaWh2WW1wbFkzUXNZMkZzYkdKaFkyc3BJSHRjY2x4dVhIUWdJQ0FnWEhScFppaHZZbXBsWTNRdVgxOXZZbk5sY25abGNrTmhiR3hpWVdOcmMxOWZLU0I3WEhKY2JseDBJQ0FnSUZ4MFhIUnBaaWdoWTJGc2JHSmhZMnNwSUh0Y2NseHVYSFFnSUNBZ1hIUmNkRngwYjJKcVpXTjBMbDlmYjJKelpYSjJaWEpEWVd4c1ltRmphM05mWHk1emNHeHBZMlVvTUN4dlltcGxZM1F1WDE5dlluTmxjblpsY2tOaGJHeGlZV05yYzE5ZkxteGxibWQwYUNrN1hISmNibHgwSUNBZ0lGeDBYSFJjZEc5aWFtVmpkQzVmWDI5aWMyVnlkbVZ5YzE5ZkxuTndiR2xqWlNnd0xHOWlhbVZqZEM1ZlgyOWljMlZ5ZG1WeWMxOWZMbXhsYm1kMGFDazdYSEpjYmx4MElDQWdJRngwWEhSY2RISmxkSFZ5Ymp0Y2NseHVYSFFnSUNBZ1hIUmNkSDFjY2x4dVhIUWdJQ0FnWEhSY2RHOWlhbVZqZEM1ZlgyOWljMlZ5ZG1WeVEyRnNiR0poWTJ0elgxOHVabTl5UldGamFDaG1kVzVqZEdsdmJpaHZZbk5sY25abGNtTmhiR3hpWVdOckxHa3BJSHRjY2x4dVhIUWdJQ0FnWEhSY2RGeDBhV1lvWTJGc2JHSmhZMnM5UFQxdlluTmxjblpsY21OaGJHeGlZV05yS1NCN1hISmNibHgwSUNBZ0lGeDBYSFJjZEZ4MGIySnFaV04wTGw5ZmIySnpaWEoyWlhKRFlXeHNZbUZqYTNOZlh5NXpjR3hwWTJVb2FTd3hLVHRjY2x4dVhIUWdJQ0FnWEhSY2RGeDBYSFJrWld4bGRHVWdiMkpxWldOMExsOWZiMkp6WlhKMlpYSnpYMTliYVYwdVkyRnNiR0poWTJzN1hISmNibHgwSUNBZ0lGeDBYSFJjZEZ4MGIySnFaV04wTGw5ZmIySnpaWEoyWlhKelgxOHVjM0JzYVdObEtHa3NNU2s3WEhKY2JseDBJQ0FnSUZ4MFhIUmNkSDFjY2x4dVhIUWdJQ0FnWEhSY2RIMHBPMXh5WEc1Y2RDQWdJQ0JjZEgxY2NseHVYSFFnSUNBZ2ZUdGNjbHh1WEhRZ0lDQWdRWEp5WVhrdWIySnpaWEoyWlNBOUlHWjFibU4wYVc5dUtHOWlhbVZqZEN4allXeHNZbUZqYXl4aFkyTmxjSFJzYVhOMExIQmhkWE5oWW14bExIQmhkWE5sTEdSbGJHRjVLU0I3WEhKY2JseDBJQ0FnSUZ4MGFXWW9JU2h2WW1wbFkzUWdhVzV6ZEdGdVkyVnZaaUJCY25KaGVTa2dKaVlnSVVGeWNtRjVMbWx6UVhKeVlYa29iMkpxWldOMEtTa2dlMXh5WEc1Y2RDQWdJQ0JjZEZ4MGRHaHliM2NnYm1WM0lGUjVjR1ZGY25KdmNpaGNJa1pwY25OMElHRnlaM1Z0Wlc1MElIUnZJRUZ5Y21GNUxtOWljMlZ5ZG1WeUlHbHpJRzV2ZENCaGJpQkJjbkpoZVZ3aUtUdGNjbHh1WEhRZ0lDQWdYSFI5WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJRngwWVdOalpYQjBiR2x6ZENBOUlHRmpZMlZ3ZEd4cGMzUWdmSHdnVzF3aVlXUmtYQ0lzSUZ3aWRYQmtZWFJsWENJc0lGd2laR1ZzWlhSbFhDSXNJRndpYzNCc2FXTmxYQ0pkTzF4eVhHNWNkQ0FnSUNCY2RIWmhjaUJoY25KaGVYQnliM2g1SUQwZ2JtVjNJRkJ5YjNoNUtHOWlhbVZqZEN4N1oyVjBPaUJtZFc1amRHbHZiaWgwWVhKblpYUXNjSEp2Y0dWeWRIa3BJSHRjY2x4dVhIUWdJQ0FnWEhSY2RHbG1LSEJ5YjNCbGNuUjVQVDA5WENKMWJtOWljMlZ5ZG1WY0lpa2dlMXh5WEc1Y2RGeDBJQ0FnSUZ4MFhIUnlaWFIxY200Z1puVnVZM1JwYjI0b1kyRnNiR0poWTJzcElIdGNjbHh1WEhSY2RDQWdJQ0JjZEZ4MFhIUnBaaWhqWVd4c1ltRmpheWtnZTF4eVhHNWNkRngwSUNBZ0lGeDBYSFJjZEZ4MGNtVjBkWEp1SUU5aWFtVmpkQzUxYm05aWMyVnlkbVVvZEdGeVoyVjBMR05oYkd4aVlXTnJLVHRjY2x4dVhIUmNkQ0FnSUNCY2RGeDBYSFI5WEhKY2JseDBYSFFnSUNBZ1hIUmNkRngwY21WMGRYSnVJSFJoY21kbGRDNTFibTlpYzJWeWRtVW9LVHRjY2x4dVhIUmNkQ0FnSUNCY2RGeDBmVHRjY2x4dVhIUmNkQ0FnSUNCY2RIMWNjbHh1WEhRZ0lDQWdYSFJjZEdsbUtIQnliM0JsY25SNVBUMDlYQ0p6Y0d4cFkyVmNJaWtnZTF4eVhHNWNkQ0FnSUNCY2RGeDBYSFJ5WlhSMWNtNGdablZ1WTNScGIyNG9jM1JoY25Rc1pXNWtLU0I3WEhKY2JseDBJQ0FnSUZ4MFhIUmNkRngwYVdZb2RIbHdaVzltS0hOMFlYSjBLU0U5UFZ3aWJuVnRZbVZ5WENJZ2ZId2dkSGx3Wlc5bUtHVnVaQ2toUFQxY0ltNTFiV0psY2x3aUtTQjdYSEpjYmx4MElDQWdJRngwWEhSY2RGeDBYSFIwYUhKdmR5QnVaWGNnVkhsd1pVVnljbTl5S0Z3aVJtbHljM1FnZEhkdklHRnlaM1Z0Wlc1MGN5QjBieUJCY25KaGVTQnpjR3hwWTJVZ1lYSmxJRzV2ZENCdWRXMWlaWElzSUc1MWJXSmxjbHdpS1R0Y2NseHVYSFFnSUNBZ1hIUmNkRngwWEhSOVhISmNibHgwSUNBZ0lGeDBJQ0FnSUZ4MFhIUjJZWElnY21WdGIzWmxaQ0E5SUhSb2FYTXVjMnhwWTJVb2MzUmhjblFzYzNSaGNuUXJaVzVrS1N4Y2NseHVYSFFnSUNBZ1hIUWdJQ0FnWEhSY2RGeDBZV1JrWldSRGIzVnVkQ0E5SUNoaGNtZDFiV1Z1ZEhNdWJHVnVaM1JvSUQ0Z01TQS9JR0Z5WjNWdFpXNTBjeTVzWlc1bmRHZ3RNaUE2SURBcExGeHlYRzVjZENBZ0lDQmNkQ0FnSUNCY2RGeDBYSFJqYUdGdVoyVWdQU0FnZTI5aWFtVmpkRHB2WW1wbFkzUXNkSGx3WlRwY0luTndiR2xqWlZ3aUxHbHVaR1Y0T25OMFlYSjBMSEpsYlc5MlpXUTZjbVZ0YjNabFpDeGhaR1JsWkVOdmRXNTBPbUZrWkdWa1EyOTFiblI5TzF4eVhHNWNkQ0FnSUNCY2RDQWdJQ0JjZEZ4MGRHRnlaMlYwTG5Od2JHbGpaUzVoY0hCc2VTaDBZWEpuWlhRc1lYSm5kVzFsYm5SektUdGNjbHh1WEhRZ0lDQWdYSFFnSUNBZ1hIUmNkR2xtS0dGalkyVndkR3hwYzNRdWFXNWtaWGhQWmloY0luTndiR2xqWlZ3aUtUNDlNQ2tnZTF4eVhHNWNkQ0FnSUNCY2RDQWdJQ0JjZEZ4MFhIUjJZWElnYzNSaGNuUWdQU0J3Y205NGVTNWZYMjlpYzJWeWRtVnlYMTh1WTJoaGJtZGxjMlYwTG14bGJtZDBhQ0E5UFQwZ01DeGNjbHh1WEhRZ0lDQWdYSFFnSUNBZ0lDQWdJRngwWEhSY2RHUmxiR2wyWlhJZ1BTQndjbTk0ZVM1ZlgyOWljMlZ5ZG1WeVgxOHVaR1ZzYVhabGNpZ3BPMXh5WEc1Y2RDQWdJQ0JjZENBZ0lDQmNkRngwWEhSd2NtOTRlUzVmWDI5aWMyVnlkbVZ5WDE4dVkyaGhibWRsYzJWMExuQjFjMmdvWTJoaGJtZGxLVHRjY2x4dVhIUWdJQ0FnWEhRZ0lDQWdYSFJjZEZ4MGFXWW9jM1JoY25RcElIdGNjbHh1WEhRZ0lDQWdYSFJjZENBZ0lDQWdJQ0FnWEhSY2RHUmxiR2wyWlhJb1ptRnNjMlVzS0hSNWNHVnZaaWhrWld4cGRtVnlMbVJsYkdGNUtUMDlQVndpYm5WdFltVnlYQ0lnUHlCa1pXeHBkbVZ5TG1SbGJHRjVJRG9nTVRBcEtUdGNjbHh1WEhRZ0lDQWdYSFJjZENBZ0lDQWdJQ0FnWEhSOVhISmNibHgwSUNBZ0lGeDBJQ0FnSUZ4MFhIUjlYSEpjYmx4MElDQWdJRngwSUNBZ0lGeDBmVnh5WEc1Y2RDQWdJQ0JjZEZ4MGZWeHlYRzVjZENBZ0lDQmNkRngwYVdZb2NISnZjR1Z5ZEhrOVBUMWNJbkIxYzJoY0lpa2dlMXh5WEc1Y2RDQWdJQ0JjZEZ4MFhIUWdjbVYwZFhKdUlHWjFibU4wYVc5dUtHbDBaVzBwSUh0Y2NseHVYSFFnSUNBZ1hIUmNkQ0FnSUNCY2RISmxkSFZ5YmlCMGFHbHpMbk53YkdsalpTaDBhR2x6TG14bGJtZDBhQ3d3TEdsMFpXMHBPMXh5WEc1Y2RDQWdJQ0JjZEZ4MElDQWdJSDFjY2x4dVhIUWdJQ0FnWEhSY2RIMWNjbHh1WEhRZ0lDQWdYSFJjZEdsbUtIQnliM0JsY25SNVBUMDlYQ0p3YjNCY0lpa2dlMXh5WEc1Y2RDQWdJQ0JjZEZ4MFhIUWdjbVYwZFhKdUlHWjFibU4wYVc5dUtDa2dlMXh5WEc1Y2RDQWdJQ0JjZEZ4MElDQWdJRngwY21WMGRYSnVJSFJvYVhNdWMzQnNhV05sS0hSb2FYTXViR1Z1WjNSb0xURXNNU2s3WEhKY2JseDBJQ0FnSUZ4MFhIUWdJQ0FnZlZ4eVhHNWNkQ0FnSUNCY2RGeDBmVnh5WEc1Y2RDQWdJQ0JjZEZ4MGFXWW9jSEp2Y0dWeWRIazlQVDFjSW5WdWMyaHBablJjSWlrZ2UxeHlYRzVjZENBZ0lDQmNkRngwWEhRZ2NtVjBkWEp1SUdaMWJtTjBhVzl1S0dsMFpXMHBJSHRjY2x4dUlDQWdJRngwWEhRZ0lDQWdYSFJjZEhKbGRIVnliaUIwYUdsekxuTndiR2xqWlNnd0xEQXNhWFJsYlNrN1hISmNiaUFnSUNCY2RGeDBJQ0FnSUZ4MGZWeHlYRzVjZENBZ0lDQmNkRngwZlZ4eVhHNWNkQ0FnSUNCY2RGeDBhV1lvY0hKdmNHVnlkSGs5UFQxY0luTm9hV1owWENJcElIdGNjbHh1WEhRZ0lDQWdYSFJjZEZ4MGNtVjBkWEp1SUdaMWJtTjBhVzl1S0NrZ2UxeHlYRzVjZENBZ0lDQmNkQ0FnSUNCY2RGeDBjbVYwZFhKdUlIUm9hWE11YzNCc2FXTmxLREFzTVNrN1hISmNibHgwSUNBZ0lGeDBJQ0FnSUZ4MGZWeHlYRzVjZENBZ0lDQmNkRngwZlZ4eVhHNWNkQ0FnSUNCY2RGeDBjbVYwZFhKdUlIUmhjbWRsZEZ0d2NtOXdaWEowZVYwN1hISmNibHgwSUNBZ0lGeDBmWDBwTzF4eVhHNWNkQ0FnSUNCY2RIWmhjaUJ3Y205NGVTQTlJRTlpYW1WamRDNXZZbk5sY25abEtHRnljbUY1Y0hKdmVIa3NablZ1WTNScGIyNG9ZMmhoYm1kbGMyVjBLU0I3SUZ4eVhHNWNkQ0FnSUNCY2RGeDBkbUZ5SUdOb1lXNW5aWE1nUFNCamFHRnVaMlZ6WlhRdVptbHNkR1Z5S0daMWJtTjBhVzl1S0dOb1lXNW5aU2tnZXlCeVpYUjFjbTRnWTJoaGJtZGxMbTVoYldVaFBUMWNJbXhsYm1kMGFGd2lJQ1ltSUdOb1lXNW5aUzV1WVcxbElUMDlYQ0poWkdSY0lpQW1KaUFvSVdGalkyVndkR3hwYzNRZ2ZId2dZV05qWlhCMGJHbHpkQzVwYm1SbGVFOW1LR05vWVc1blpTNTBlWEJsS1Q0OU1DazdJSDBwTzF4eVhHNWNkQ0FnSUNCY2RGeDBhV1lvWTJoaGJtZGxjeTVzWlc1bmRHZytNQ2tnZTF4eVhHNWNkQ0FnSUNCY2RGeDBYSFJqWVd4c1ltRmpheWhqYUdGdVoyVnpLVHRjY2x4dVhIUWdJQ0FnWEhSY2RIMWNjbHh1WEhRZ0lDQWdYSFI5TEdGalkyVndkR3hwYzNRc2NHRjFjMkZpYkdVc2NHRjFjMlVzWkdWc1lYa3BPMXh5WEc1Y2RDQWdJQ0JjZEhKbGRIVnliaUJ3Y205NGVUdGNjbHh1WEhRZ0lDQWdmVHRjY2x4dVhIUWdJQ0FnUVhKeVlYa3VkVzV2WW5ObGNuWmxJRDBnWm5WdVkzUnBiMjRvYjJKcVpXTjBMR05oYkd4aVlXTnJLU0I3WEhKY2JseDBYSFFnSUhKbGRIVnliaUJ2WW1wbFkzUXVkVzV2WW5ObGNuWmxLR05oYkd4aVlXTnJLVHRjY2x4dVhIUWdJQ0FnZlZ4eVhHNWNkSDFjY2x4dVhIUlBZbXBsWTNRdVpHVmxjRTlpYzJWeWRtVWdQU0JtZFc1amRHbHZiaWh2WW1wbFkzUXNZMkZzYkdKaFkyc3NjR0Z5ZEhNcElIdGNjbHh1WEhKY2JseDBYSFJ3WVhKMGN5QTlJQ2h3WVhKMGN5QS9JSEJoY25SeklEb2dXMTBwTzF4eVhHNWNjbHh1WEhSY2RIWmhjaUIwYjFSNWNHVk9ZVzFsSUQwZ1puVnVZM1JwYjI0b2IySnFLU0I3WEhKY2JseDBYSFJjZEhKbGRIVnliaUFvZTMwcExuUnZVM1J5YVc1bkxtTmhiR3dvYjJKcUtTNXRZWFJqYUNndlhGeHpLRnRoTFhwQkxWcGRLeWt2S1ZzeFhTNTBiMHh2ZDJWeVEyRnpaU2dwWEhKY2JseDBYSFI5WEhKY2JseHlYRzVjZEZ4MFpuVnVZM1JwYjI0Z2NtVnZZbk5sY25abEtIWmhiSFZsTENCd1lYSjBjeWtnZTF4eVhHNWNkRngwWEhSMllYSWdhMlY1Y3lBOUlFOWlhbVZqZEM1clpYbHpLSFpoYkhWbEtUdGNjbHh1WEhSY2RGeDBhMlY1Y3k1bWIzSkZZV05vS0daMWJtTjBhVzl1S0d0bGVTa2dlMXh5WEc1Y2RGeDBYSFJjZEdsbUtDaDBiMVI1Y0dWT1lXMWxLSFpoYkhWbFcydGxlVjBwSUQwOVBTQW5iMkpxWldOMEp5QjhmQ0IwYjFSNWNHVk9ZVzFsS0haaGJIVmxXMnRsZVYwcElEMDlQU0FuWVhKeVlYa25LU0FtSmlBaGRtRnNkV1ZiYTJWNVhTNW9ZWE5QZDI1UWNtOXdaWEowZVNnblgxOXZZbk5sY25abGNuTmZYeWNwS1NCN1hISmNibHgwWEhSY2RGeDBYSFIyWVhJZ2JtVjNjR0Z5ZEhNZ1BTQndZWEowY3k1emJHbGpaU2d3S1R0Y2NseHVYSFJjZEZ4MFhIUmNkRzVsZDNCaGNuUnpMbkIxYzJnb2EyVjVLVHRjY2x4dVhIUmNkRngwWEhSY2RIWmhiSFZsVzJ0bGVWMGdQU0JQWW1wbFkzUXVaR1ZsY0U5aWMyVnlkbVVvZG1Gc2RXVmJhMlY1WFN4allXeHNZbUZqYXl4dVpYZHdZWEowY3lrN1hISmNibHgwWEhSY2RGeDBmVnh5WEc1Y2RGeDBYSFI5S1R0Y2NseHVYSFJjZEgxY2NseHVYSEpjYmx4MFhIUnlaVzlpYzJWeWRtVW9iMkpxWldOMExDQndZWEowY3lrN1hISmNibHh5WEc1Y2RGeDBkbUZ5SUc5aWMyVnlkbVZrSUQwZ1QySnFaV04wTG05aWMyVnlkbVVvYjJKcVpXTjBMR1oxYm1OMGFXOXVLR05vWVc1blpYTmxkQ2tnZTF4eVhHNWNkRngwWEhSMllYSWdZMmhoYm1kbGN5QTlJRnRkTzF4eVhHNWNkRngwWEhSbWRXNWpkR2x2YmlCeVpXTjFjbk5sS0c1aGJXVXNjbTl2ZEU5aWFtVmpkQ3h2YkdSUFltcGxZM1FzYm1WM1QySnFaV04wTEhCaGRHZ3BJSHRjY2x4dVhIUmNkRngwWEhScFppaHVaWGRQWW1wbFkzUWdhVzV6ZEdGdVkyVnZaaUJQWW1wbFkzUXBJSHRjY2x4dVhIUmNkRngwWEhSY2RIWmhjaUJ1WlhkclpYbHpJRDBnVDJKcVpXTjBMbXRsZVhNb2JtVjNUMkpxWldOMEtUdGNjbHh1WEhSY2RGeDBYSFJjZEc1bGQydGxlWE11Wm05eVJXRmphQ2htZFc1amRHbHZiaWhyWlhrcElIdGNjbHh1WEhSY2RGeDBYSFJjZEZ4MGFXWW9JVzlzWkU5aWFtVmpkQ0I4ZkNBb2IyeGtUMkpxWldOMFcydGxlVjBoUFQxdVpYZFBZbXBsWTNSYmEyVjVYU2twSUh0Y2NseHVYSFJjZEZ4MFhIUmNkRngwWEhSMllYSWdiMnhrZG1Gc2RXVWdQU0FvYjJ4a1QySnFaV04wSUNZbUlHOXNaRTlpYW1WamRGdHJaWGxkSVQwOWRXNWtaV1pwYm1Wa0lEOGdiMnhrVDJKcVpXTjBXMnRsZVYwZ09pQjFibVJsWm1sdVpXUXBMRnh5WEc1Y2RGeDBYSFJjZEZ4MFhIUmNkRngwWTJoaGJtZGxJRDBnS0c5c1pIWmhiSFZsUFQwOWRXNWtaV1pwYm1Wa0lEOGdYQ0poWkdSY0lpQTZJRndpZFhCa1lYUmxYQ0lwTEZ4eVhHNWNkRngwWEhSY2RGeDBYSFJjZEZ4MGEyVjVjR0YwYUNBOUlIQmhkR2dnS3lCY0lpNWNJaUFySUd0bGVUdGNjbHh1WEhKY2JseDBYSFJjZEZ4MFhIUmNkRngwWTJoaGJtZGxjeTV3ZFhOb0tIdHVZVzFsT201aGJXVXNiMkpxWldOME9uSnZiM1JQWW1wbFkzUXNkSGx3WlRwamFHRnVaMlVzYjJ4a1ZtRnNkV1U2YjJ4a2RtRnNkV1VzYm1WM1ZtRnNkV1U2Ym1WM1QySnFaV04wVzJ0bGVWMHNhMlY1Y0dGMGFEcHJaWGx3WVhSb2ZTazdYSEpjYmx4MFhIUmNkRngwWEhSY2RGeDBjbVZqZFhKelpTaHVZVzFsTEhKdmIzUlBZbXBsWTNRc2IyeGtkbUZzZFdVc2JtVjNUMkpxWldOMFcydGxlVjBzYTJWNWNHRjBhQ2s3WEhKY2JseDBYSFJjZEZ4MFhIUmNkSDFjY2x4dVhIUmNkRngwWEhSY2RIMHBPMXh5WEc1Y2RGeDBYSFJjZEgwZ1pXeHpaU0JwWmlodmJHUlBZbXBsWTNRZ2FXNXpkR0Z1WTJWdlppQlBZbXBsWTNRcElIdGNjbHh1WEhSY2RGeDBYSFJjZEhaaGNpQnZiR1JyWlhseklEMGdUMkpxWldOMExtdGxlWE1vYjJ4a1QySnFaV04wS1R0Y2NseHVYSFJjZEZ4MFhIUmNkRzlzWkd0bGVYTXVabTl5UldGamFDaG1kVzVqZEdsdmJpaHJaWGtwSUh0Y2NseHVYSFJjZEZ4MFhIUmNkRngwZG1GeUlHTm9ZVzVuWlNBOUlDaHVaWGRQWW1wbFkzUTlQVDF1ZFd4c0lEOGdYQ0oxY0dSaGRHVmNJaUE2SUZ3aVpHVnNaWFJsWENJcExGeHlYRzVjZEZ4MFhIUmNkRngwWEhSY2RHdGxlWEJoZEdnZ1BTQndZWFJvSUNzZ1hDSXVYQ0lnS3lCclpYazdYSEpjYmx4MFhIUmNkRngwWEhSY2RGeDBYSEpjYmx4MFhIUmNkRngwWEhSY2RHTm9ZVzVuWlhNdWNIVnphQ2g3Ym1GdFpUcHVZVzFsTEc5aWFtVmpkRHB5YjI5MFQySnFaV04wTEhSNWNHVTZZMmhoYm1kbExHOXNaRlpoYkhWbE9tOXNaRTlpYW1WamRGdHJaWGxkTEc1bGQxWmhiSFZsT201bGQwOWlhbVZqZEN4clpYbHdZWFJvT210bGVYQmhkR2g5S1R0Y2NseHVYSFJjZEZ4MFhIUmNkRngwY21WamRYSnpaU2h1WVcxbExISnZiM1JQWW1wbFkzUXNiMnhrVDJKcVpXTjBXMnRsZVYwc2RXNWtaV1pwYm1Wa0xHdGxlWEJoZEdncE8xeHlYRzVjZEZ4MFhIUmNkRngwZlNrN1hISmNibHgwWEhSY2RGeDBmVnh5WEc1Y2RGeDBYSFI5WEhKY2JseDBYSFJjZEdOb1lXNW5aWE5sZEM1bWIzSkZZV05vS0daMWJtTjBhVzl1S0dOb1lXNW5aU2tnZTF4eVhHNWNkRngwWEhSY2RIWmhjaUJyWlhsd1lYUm9JRDBnS0hCaGNuUnpMbXhsYm1kMGFENHdJRDhnY0dGeWRITXVhbTlwYmloY0lpNWNJaWtnS3lCY0lpNWNJaUE2SUZ3aVhDSXBJQ3NnWTJoaGJtZGxMbTVoYldVN1hISmNibHh5WEc1Y2RGeDBYSFJjZEdsbUlDaGphR0Z1WjJVdWRIbHdaU0E5UFQwZ1hDSjFjR1JoZEdWY0lpQjhmQ0JqYUdGdVoyVXVkSGx3WlNBOVBUMGdYQ0poWkdSY0lpa2dleUJjY2x4dVhIUmNkRngwWEhSY2RISmxiMkp6WlhKMlpTaGphR0Z1WjJVdWIySnFaV04wTENCd1lYSjBjeWs3WEhKY2JseDBYSFJjZEZ4MGZWeHlYRzVjY2x4dVhIUmNkRngwWEhSamFHRnVaMlZ6TG5CMWMyZ29lMjVoYldVNlkyaGhibWRsTG01aGJXVXNiMkpxWldOME9tTm9ZVzVuWlM1dlltcGxZM1FzZEhsd1pUcGphR0Z1WjJVdWRIbHdaU3h2YkdSV1lXeDFaVHBqYUdGdVoyVXViMnhrVm1Gc2RXVXNibVYzVm1Gc2RXVTZZMmhoYm1kbExtOWlhbVZqZEZ0amFHRnVaMlV1Ym1GdFpWMHNhMlY1Y0dGMGFEcHJaWGx3WVhSb2ZTazdYSEpjYmx4MFhIUmNkRngwY21WamRYSnpaU2hqYUdGdVoyVXVibUZ0WlN4amFHRnVaMlV1YjJKcVpXTjBMR05vWVc1blpTNXZiR1JXWVd4MVpTeGphR0Z1WjJVdWIySnFaV04wVzJOb1lXNW5aUzV1WVcxbFhTeHJaWGx3WVhSb0tUdGNjbHh1WEhSY2RGeDBmU2s3WEhKY2JseDBYSFJjZEdOaGJHeGlZV05yS0dOb1lXNW5aWE1wTzF4eVhHNWNkRngwZlNrN1hISmNibHgwWEhSeVpYUjFjbTRnYjJKelpYSjJaV1E3WEhKY2JseDBmVHRjY2x4dWZTa29LVHRjY2x4dVhHNWNibHh1THk4dkx5OHZMeTh2THk4dkx5OHZMeTh2WEc0dkx5QlhSVUpRUVVOTElFWlBUMVJGVWx4dUx5OGdMaTkrTDNCeWIzaDVMVzlpYzJWeWRtVXZhVzVrWlhndWFuTmNiaTh2SUcxdlpIVnNaU0JwWkNBOUlERXhPVnh1THk4Z2JXOWtkV3hsSUdOb2RXNXJjeUE5SURBZ055SXNJaThxS2x4eVhHNHFJRU52Y0hseWFXZG9kQ0F5TURFMklGQlVJRWx1YjNaaHc2ZkRvMjhnWlNCVGFYTjBaVzFoY3lCVFFWeHlYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRWxPUlZORExVbEVYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVVZWUFFrbFRJRTVGVkZkUFVrdFRJRk5NWEhKY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1JsSkJWVTVJVDBaRlVpMUhSVk5GVEV4VFEwaEJSbFFnV2xWU0lFWlBSVkpFUlZKVlRrY2dSRVZTSUVGT1IwVlhRVTVFVkVWT0lFWlBVbE5EU0ZWT1J5QkZMbFpjY2x4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCUFVrRk9SMFVnVTBGY2NseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQkVaWFYwYzJOb1pTQlVaV3hsYTI5dElFRkhYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnUVhCcGVtVmxYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVkVWRFNFNUpVME5JUlNCVlRrbFdSVkpUU1ZSQlZDQkNSVkpNU1U1Y2NseHVLbHh5WEc0cUlFeHBZMlZ1YzJWa0lIVnVaR1Z5SUhSb1pTQkJjR0ZqYUdVZ1RHbGpaVzV6WlN3Z1ZtVnljMmx2YmlBeUxqQWdLSFJvWlNCY0lreHBZMlZ1YzJWY0lpazdYSEpjYmlvZ2VXOTFJRzFoZVNCdWIzUWdkWE5sSUhSb2FYTWdabWxzWlNCbGVHTmxjSFFnYVc0Z1kyOXRjR3hwWVc1alpTQjNhWFJvSUhSb1pTQk1hV05sYm5ObExseHlYRzRxSUZsdmRTQnRZWGtnYjJKMFlXbHVJR0VnWTI5d2VTQnZaaUIwYUdVZ1RHbGpaVzV6WlNCaGRGeHlYRzRxWEhKY2Jpb2dJQ0JvZEhSd09pOHZkM2QzTG1Gd1lXTm9aUzV2Y21jdmJHbGpaVzV6WlhNdlRFbERSVTVUUlMweUxqQmNjbHh1S2x4eVhHNHFJRlZ1YkdWemN5QnlaWEYxYVhKbFpDQmllU0JoY0hCc2FXTmhZbXhsSUd4aGR5QnZjaUJoWjNKbFpXUWdkRzhnYVc0Z2QzSnBkR2x1Wnl3Z2MyOW1kSGRoY21WY2NseHVLaUJrYVhOMGNtbGlkWFJsWkNCMWJtUmxjaUIwYUdVZ1RHbGpaVzV6WlNCcGN5QmthWE4wY21saWRYUmxaQ0J2YmlCaGJpQmNJa0ZUSUVsVFhDSWdRa0ZUU1ZNc1hISmNiaW9nVjBsVVNFOVZWQ0JYUVZKU1FVNVVTVVZUSUU5U0lFTlBUa1JKVkVsUFRsTWdUMFlnUVU1WklFdEpUa1FzSUdWcGRHaGxjaUJsZUhCeVpYTnpJRzl5SUdsdGNHeHBaV1F1WEhKY2Jpb2dVMlZsSUhSb1pTQk1hV05sYm5ObElHWnZjaUIwYUdVZ2MzQmxZMmxtYVdNZ2JHRnVaM1ZoWjJVZ1oyOTJaWEp1YVc1bklIQmxjbTFwYzNOcGIyNXpJR0Z1WkZ4eVhHNHFJR3hwYldsMFlYUnBiMjV6SUhWdVpHVnlJSFJvWlNCTWFXTmxibk5sTGx4eVhHNHFLaTljY2x4dVhISmNibWx0Y0c5eWRDQjdJR1JsWlhCRGJHOXVaU0I5SUdaeWIyMGdKeTR1TDNWMGFXeHpMM1YwYVd4ekp6dGNjbHh1WEhKY2JtbHRjRzl5ZENCRVlYUmhUMkpxWldOMElHWnliMjBnSnk0dlJHRjBZVTlpYW1WamRDYzdYSEpjYm1sdGNHOXlkQ0JFWVhSaFQySnFaV04wUTJocGJHUWdabkp2YlNBbkxpOUVZWFJoVDJKcVpXTjBRMmhwYkdRbk8xeHlYRzVjY2x4dWJHVjBJRVpwYkhSbGNsUjVjR1VnUFNCN1FVNVpPaUFuWVc1NUp5d2dVMVJCVWxRNklDZHpkR0Z5ZENjc0lFVllRVU5VT2lBblpYaGhZM1FuZlR0Y2NseHVYSEpjYmk4cUtseHlYRzRnS2lCVWFHVWdZMnhoYzNNZ2NtVjBkWEp1WldRZ1puSnZiU0IwYUdVZ1UzbHVZMmhsY2lCemRXSnpZM0pwWW1VZ1kyRnNiQzVjY2x4dUlDb2dWRzhnWW1VZ2RYTmxaQ0JoY3lCaGJpQnZZbk5sY25aaGRHbHZiaUJ3YjJsdWRDQm1jbTl0SUdFZ1JHRjBZVTlpYW1WamRGSmxjRzl5ZEdWeUlHTm9ZVzVuWlM1Y2NseHVJQ292WEhKY2JtTnNZWE56SUVSaGRHRlBZbXBsWTNSUFluTmxjblpsY2lCbGVIUmxibVJ6SUVSaGRHRlBZbXBsWTNRZ0x5b2dhVzF3YkdWdFpXNTBjeUJUZVc1alUzUmhkSFZ6SUNvdklIdGNjbHh1SUNBdktpQndjbWwyWVhSbFhISmNiaUFnWDJOb1lXNW5aVXhwYzNSbGJtVnlPaUJOYzJkTWFYTjBaVzVsY2x4eVhHNWNjbHh1SUNBdExTMHRaWFpsYm5RZ2FHRnVaR3hsY25NdExTMHRYSEpjYmlBZ1gyWnBiSFJsY25NNklIczhabWxzZEdWeVBqb2dlM1I1Y0dVNklEeHpkR0Z5ZEN3Z1pYaGhZM1ErTENCallXeHNZbUZqYXpvZ1BHWjFibU4wYVc5dVBuMGdmVnh5WEc0Z0lDb3ZYSEpjYmx4eVhHNGdJQzhxS2x4eVhHNGdJQ0FxSUVCcFoyNXZjbVZjY2x4dUlDQWdLaUJUYUc5MWJHUWdibTkwSUdKbElIVnpaV1FnWkdseVpXTjBiSGtnWW5rZ1NIbHdaWEowYVdWekxpQkpkQ2R6SUdOaGJHeGxaQ0JpZVNCMGFHVWdVM2x1WTJobGNpNXpkV0p6WTNKcFltVWdiV1YwYUc5a1hISmNiaUFnSUNvdlhISmNibHh5WEc0Z0lDOHZWRTlFVHpvZ1JtOXlJRVoxY25Sb1pYSWdVM1IxWkhsY2NseHVJQ0JqYjI1emRISjFZM1J2Y2locGJuQjFkQ2tnZTF4eVhHNGdJQ0FnTHk5MGIyUnZPaUJqYUdWamF5QjNhSGxjY2x4dUlDQWdJQzh2YVc1d2RYUXVhVzVwZEdsaGJFUmhkR0VnUFNCcGJuQjFkQzVwYm1sMGFXRnNSR0YwWVM1a1lYUmhPMXh5WEc1Y2NseHVJQ0FnSUhOMWNHVnlLR2x1Y0hWMEtUdGNjbHh1WEhKY2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh5WEc1Y2NseHVJQ0FnSUY5MGFHbHpMbDkyWlhKemFXOXVJRDBnYVc1d2RYUXVkbVZ5YzJsdmJqdGNjbHh1SUNBZ0lGOTBhR2x6TGw5bWFXeDBaWEp6SUQwZ2UzMDdYSEpjYmx4eVhHNGdJQ0FnWDNSb2FYTXVYM041Ym1OUFltb3ViMkp6WlhKMlpTZ29aWFpsYm5RcElEMCtJSHRjY2x4dUlDQWdJQ0FnWDNSb2FYTXVYMjl1Um1sc2RHVnlLR1YyWlc1MEtUdGNjbHh1SUNBZ0lIMHBPMXh5WEc1Y2NseHVJQ0FnSUM4cVhISmNibHh5WEc0Z0lDQWdiR1YwSUdOb2FXeGtTV1JUZEhKcGJtY2dQU0JmZEdocGN5NWZiM2R1WlhJZ0t5QW5JeWNnS3lCZmRHaHBjeTVmWTJocGJHUkpaRHRjY2x4dVhISmNiaUFnSUNBdkwzTmxkSFZ3SUdOb2FXeGtjbVZ1Y3lCa1lYUmhJR1p5YjIwZ2MzVmljMk55YVhCMGFXOXVYSEpjYmlBZ0lDQnBaaUFvYVc1d2RYUXVZMmhwYkdSeVpXNVBZbXBsWTNSektTQjdYSEpjYmlBZ0lDQWdJRTlpYW1WamRDNXJaWGx6S0dsdWNIVjBMbU5vYVd4a2NtVnVUMkpxWldOMGN5a3VabTl5UldGamFDZ29ZMmhwYkdSeVpXNVNaWE52ZFhKalpTa2dQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lHeGxkQ0JqYUdsc1pISmxiaUE5SUdsdWNIVjBMbU5vYVd4a2NtVnVUMkpxWldOMGMxdGphR2xzWkhKbGJsSmxjMjkxY21ObFhUdGNjbHh1SUNBZ0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblcwUmhkR0ZQWW1wbFkzUlBZbk5sY25abGNpQXRJRzVsZHlCRVlYUmhUMkpxWldOMFEyaHBiR1JkT2lBbkxDQmphR2xzWkhKbGJsSmxjMjkxY21ObExDQmphR2xzWkhKbGJpd2dYM1JvYVhNdVgzSmxjM1Z0WldRcE8xeHlYRzRnSUNBZ0lDQWdJR2xtSUNoZmRHaHBjeTVmY21WemRXMWxaQ2tnZTF4eVhHNWNjbHh1SUNBZ0lDQWdJQ0FnSUM4dklHbG1JR2x6SUhKbGMzVnRaV1JjY2x4dUlDQWdJQ0FnSUNBZ0lFOWlhbVZqZEM1clpYbHpLR05vYVd4a2NtVnVLUzVtYjNKRllXTm9LQ2hqYUdsc1pFbGtLU0E5UGlCN1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUd4bGRDQmphR2xzWkVsdWNIVjBJRDBnWkdWbGNFTnNiMjVsS0dOb2FXeGtjbVZ1VzJOb2FXeGtTV1JkTG5aaGJIVmxLVHRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdZMmhwYkdSSmJuQjFkQzV3WVhKbGJuUlBZbXBsWTNRZ1BTQmZkR2hwY3p0Y2NseHVJQ0FnSUNBZ0lDQWdJQ0FnWDNSb2FYTXVYMk5vYVd4a2NtVnVUMkpxWldOMGMxdGphR2xzWkVsa1hTQTlJRzVsZHlCRVlYUmhUMkpxWldOMFEyaHBiR1FvWTJocGJHUkpibkIxZENrN1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUY5MGFHbHpMbDlqYUdsc1pISmxiazlpYW1WamRITmJZMmhwYkdSSlpGMHVhV1JsYm5ScGRIa2dQU0JqYUdsc1pISmxibHRqYUdsc1pFbGtYUzVwWkdWdWRHbDBlVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0FnSUdsbUlDaGphR2xzWkVsa0lENGdZMmhwYkdSSlpGTjBjbWx1WnlrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lHTm9hV3hrU1dSVGRISnBibWNnUFNCamFHbHNaRWxrTzF4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25XMFJoZEdGUFltcGxZM1JQWW5ObGNuWmxjaUF0SUc1bGR5QkVZWFJoVDJKcVpXTjBRMmhwYkdSZElDMGdjbVZ6ZFcxbFpEb2dKeXdnWDNSb2FYTXVYMk5vYVd4a2NtVnVUMkpxWldOMGMxdGphR2xzWkVsa1hTazdYSEpjYmlBZ0lDQWdJQ0FnSUNCOUtUdGNjbHh1WEhKY2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJQzh2SUdsbUlHbHpJRzV2ZENCeVpYTjFiV1ZrWEhKY2JpQWdJQ0FnSUNBZ0lDQXZMM1J2Wkc4NklITm9iM1ZzWkc0bmRDQjNaU0JwZEdWeVlYUmxJR1p2Y2lCaGJHd2daWGhwYzNScGJtY2dZMmhwYkdSeklHbHVJRzl5WkdWeUlIUnZJSEpsWTJWcGRtVWdZV3hzSUdOb2FXeGtjeUJpWldadmNtVWdkR2hsSUhOMVluTmpjbWx3ZEdsdmJqOWNjbHh1WEhKY2JpQWdJQ0FnSUNBZ0lDQmZkR2hwY3k1ZlkyaHBiR1J5Wlc1UFltcGxZM1J6VzJOb2FXeGtjbVZ1VW1WemIzVnlZMlZkSUQwZ2JtVjNJRVJoZEdGUFltcGxZM1JEYUdsc1pDaGZkR2hwY3l3Z1kyaHBiR1J5Wlc1U1pYTnZkWEpqWlN3Z1kyaHBiR1J5Wlc0cE8xeHlYRzRnSUNBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0oxdEVZWFJoVDJKcVpXTjBUMkp6WlhKMlpYSWdMU0J1WlhjZ1JHRjBZVTlpYW1WamRFTm9hV3hrWFNBdElHNXZkQ0J5WlhOMWJXVmtPaUFuTENCZmRHaHBjeTVmWTJocGJHUnlaVzVQWW1wbFkzUnpXMk5vYVd4a2NtVnVVbVZ6YjNWeVkyVmRLVHRjY2x4dUlDQWdJQ0FnSUNCOVhISmNibHh5WEc0Z0lDQWdJQ0I5S1R0Y2NseHVJQ0FnSUgxY2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZlkyaHBiR1JKWkNBOUlFNTFiV0psY2loamFHbHNaRWxrVTNSeWFXNW5Mbk53YkdsMEtDY2pKeWxiTVYwcE95b3ZYSEpjYmx4eVhHNGdJQ0FnWDNSb2FYTXVYMkZzYkc5allYUmxUR2x6ZEdWdVpYSnpLQ2s3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0JmWVd4c2IyTmhkR1ZNYVhOMFpXNWxjbk1vS1NCN1hISmNiaUFnSUNCemRYQmxjaTVmWVd4c2IyTmhkR1ZNYVhOMFpXNWxjbk1vS1R0Y2NseHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEhKY2JseHlYRzRnSUNBZ1gzUm9hWE11WDJOb1lXNW5aVXhwYzNSbGJtVnlJRDBnWDNSb2FYTXVYMkoxY3k1aFpHUk1hWE4wWlc1bGNpaGZkR2hwY3k1ZmRYSnNJQ3NnSnk5amFHRnVaMlZ6Snl3Z0tHMXpaeWtnUFQ0Z2UxeHlYRzRnSUNBZ0lDQnBaaUFvYlhObkxuUjVjR1VnUFQwOUlDZDFjR1JoZEdVbktTQjdYSEpjYmlBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0owUmhkR0ZQWW1wbFkzUlBZbk5sY25abGNpMG5JQ3NnWDNSb2FYTXVYM1Z5YkNBcklDY3RVa05XT2lBbkxDQnRjMmNwTzF4eVhHNGdJQ0FnSUNBZ0lGOTBhR2x6TGw5amFHRnVaMlZQWW1wbFkzUW9YM1JvYVhNdVgzTjVibU5QWW1vc0lHMXpaeWs3WEhKY2JpQWdJQ0FnSUgxY2NseHVJQ0FnSUgwcE8xeHlYRzRnSUgxY2NseHVYSEpjYmlBZ1gzSmxiR1ZoYzJWTWFYTjBaVzVsY25Nb0tTQjdYSEpjYmlBZ0lDQnpkWEJsY2k1ZmNtVnNaV0Z6WlV4cGMzUmxibVZ5Y3lncE8xeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZlkyaGhibWRsVEdsemRHVnVaWEl1Y21WdGIzWmxLQ2s3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCU1pXeGxZWE5sSUdGdVpDQmtaV3hsZEdVZ2IySnFaV04wSUdSaGRHRmNjbHh1SUNBZ0tpOWNjbHh1SUNCa1pXeGxkR1VvS1NCN1hISmNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4eVhHNWNjbHh1SUNBZ0lGOTBhR2x6TGw5eVpXeGxZWE5sVEdsemRHVnVaWEp6S0NrN1hISmNiaUFnSUNCa1pXeGxkR1VnWDNSb2FYTXVYM041Ym1Ob1pYSXVYMjlpYzJWeWRtVnljMXRmZEdocGN5NWZkWEpzWFR0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUM4cUtseHlYRzRnSUNBcUlGSmxiR1ZoYzJVZ1lXNWtJR1JsYkdWMFpTQnZZbXBsWTNRZ1pHRjBZVnh5WEc0Z0lDQXFMMXh5WEc0Z0lIVnVjM1ZpYzJOeWFXSmxLQ2tnZTF4eVhHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjY2x4dVhISmNiaUFnSUNBdkwwWk1UMWN0VDFWVU9pQjBhR2x6SUcxbGMzTmhaMlVnZDJsc2JDQmlaU0J6Wlc1MElIUnZJSFJvWlNCeWRXNTBhVzFsSUdsdWMzUmhibU5sSUc5bUlGTjVibU5vWlhKTllXNWhaMlZ5SUMwK0lGOXZia3h2WTJGc1ZXNVRkV0p6WTNKcFltVmNjbHh1SUNBZ0lHeGxkQ0IxYmxOMVluTmpjbWxpWlUxelp5QTlJSHRjY2x4dUlDQWdJQ0FnZEhsd1pUb2dKM1Z1YzNWaWMyTnlhV0psSnl3Z1puSnZiVG9nWDNSb2FYTXVYMjkzYm1WeUxDQjBiem9nWDNSb2FYTXVYM041Ym1Ob1pYSXVYM04xWWxWU1RDeGNjbHh1SUNBZ0lDQWdZbTlrZVRvZ2V5QnlaWE52ZFhKalpUb2dYM1JvYVhNdVgzVnliQ0I5WEhKY2JpQWdJQ0I5TzF4eVhHNWNjbHh1SUNBZ0lGOTBhR2x6TGw5aWRYTXVjRzl6ZEUxbGMzTmhaMlVvZFc1VGRXSnpZM0pwWW1WTmMyY3NJQ2h5WlhCc2VTa2dQVDRnZTF4eVhHNGdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25SR0YwWVU5aWFtVmpkRTlpYzJWeWRtVnlMVlZPVTFWQ1UwTlNTVUpGT2lBbkxDQnlaWEJzZVNrN1hISmNiaUFnSUNBZ0lHbG1JQ2h5WlhCc2VTNWliMlI1TG1OdlpHVWdQVDA5SURJd01Da2dlMXh5WEc0Z0lDQWdJQ0FnSUY5MGFHbHpMbDl5Wld4bFlYTmxUR2x6ZEdWdVpYSnpLQ2s3WEhKY2JpQWdJQ0FnSUNBZ1pHVnNaWFJsSUY5MGFHbHpMbDl6ZVc1amFHVnlMbDl2WW5ObGNuWmxjbk5iWDNSb2FYTXVYM1Z5YkYwN1hISmNiaUFnSUNBZ0lIMWNjbHh1SUNBZ0lIMHBPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdMeW9xWEhKY2JpQWdJQ29nVW1WbmFYTjBaWElnZEdobElHTm9ZVzVuWlNCc2FYTjBaVzVsY25NZ2MyVnVkQ0JpZVNCMGFHVWdjbVZ3YjNKMFpYSmNjbHh1SUNBZ0tpQkFjR0Z5WVcwZ2UzTjBjbWx1WjMwZ1ptbHNkR1Z5SUMwZ1JtbHNkR1Z5SUhSb1lYUWdhV1JsYm5ScFptbGxjeUIwYUdVZ1ptbGxiR1FnS0hObGNHRnlZWFJsWkNCa2IzUWdjR0YwYUNrdUlFRmpZMlZ3ZEhNZ0tpQmhkQ0IwYUdVZ1pXNWtJR1p2Y2lCaElHMXZjbVVnZFc1eVpYTjBjbWxqZEdWa0lHWnBiSFJsY21sdVp5NWNjbHh1SUNBZ0tpQkFjR0Z5WVcwZ2UyWjFibU4wYVc5dUtHVjJaVzUwT2lCTmMyZEZkbVZ1ZENsOUlHTmhiR3hpWVdOclhISmNiaUFnSUNvdlhISmNiaUFnYjI1RGFHRnVaMlVvWm1sc2RHVnlMQ0JqWVd4c1ltRmpheWtnZTF4eVhHNGdJQ0FnYkdWMElHdGxlU0E5SUdacGJIUmxjanRjY2x4dUlDQWdJR3hsZENCbWFXeDBaWEpQWW1vZ1BTQjdYSEpjYmlBZ0lDQWdJSFI1Y0dVNklFWnBiSFJsY2xSNWNHVXVSVmhCUTFRc1hISmNiaUFnSUNBZ0lHTmhiR3hpWVdOck9pQmpZV3hzWW1GamExeHlYRzRnSUNBZ2ZUdGNjbHh1WEhKY2JpQWdJQ0JzWlhRZ2FXUjRJRDBnWm1sc2RHVnlMbWx1WkdWNFQyWW9KeW9uS1R0Y2NseHVJQ0FnSUdsbUlDaHBaSGdnUFQwOUlHWnBiSFJsY2k1c1pXNW5kR2dnTFNBeEtTQjdYSEpjYmlBZ0lDQWdJR2xtSUNocFpIZ2dQVDA5SURBcElIdGNjbHh1SUNBZ0lDQWdJQ0JtYVd4MFpYSlBZbW91ZEhsd1pTQTlJRVpwYkhSbGNsUjVjR1V1UVU1Wk8xeHlYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHlYRzRnSUNBZ0lDQWdJR1pwYkhSbGNrOWlhaTUwZVhCbElEMGdSbWxzZEdWeVZIbHdaUzVUVkVGU1ZEdGNjbHh1SUNBZ0lDQWdJQ0JyWlhrZ1BTQm1hV3gwWlhJdWMzVmljM1J5S0RBc0lHWnBiSFJsY2k1c1pXNW5kR2dnTFNBeEtUdGNjbHh1SUNBZ0lDQWdmVnh5WEc0Z0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUhSb2FYTXVYMlpwYkhSbGNuTmJhMlY1WFNBOUlHWnBiSFJsY2s5aWFqdGNjbHh1SUNCOVhISmNibHh5WEc0Z0lGOXZia1pwYkhSbGNpaGxkbVZ1ZENrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQlBZbXBsWTNRdWEyVjVjeWhmZEdocGN5NWZabWxzZEdWeWN5a3VabTl5UldGamFDZ29hMlY1S1NBOVBpQjdYSEpjYmlBZ0lDQWdJR3hsZENCbWFXeDBaWElnUFNCZmRHaHBjeTVmWm1sc2RHVnljMXRyWlhsZE8xeHlYRzRnSUNBZ0lDQnBaaUFvWm1sc2RHVnlMblI1Y0dVZ1BUMDlJRVpwYkhSbGNsUjVjR1V1UVU1WktTQjdYSEpjYmlBZ0lDQWdJQ0FnTHk5dFlYUmphQ0JoYm5sMGFHbHVaMXh5WEc0Z0lDQWdJQ0FnSUdacGJIUmxjaTVqWVd4c1ltRmpheWhsZG1WdWRDazdYSEpjYmlBZ0lDQWdJSDBnWld4elpTQnBaaUFvWm1sc2RHVnlMblI1Y0dVZ1BUMDlJRVpwYkhSbGNsUjVjR1V1VTFSQlVsUXBJSHRjY2x4dUlDQWdJQ0FnSUNBdkwybG1JSE4wWVhKMGN5QjNhWFJvSUdacGJIUmxjaTR1TGx4eVhHNGdJQ0FnSUNBZ0lHbG1JQ2hsZG1WdWRDNW1hV1ZzWkM1cGJtUmxlRTltS0d0bGVTa2dQVDA5SURBcElIdGNjbHh1SUNBZ0lDQWdJQ0FnSUdacGJIUmxjaTVqWVd4c1ltRmpheWhsZG1WdWRDazdYSEpjYmlBZ0lDQWdJQ0FnZlZ4eVhHNGdJQ0FnSUNCOUlHVnNjMlVnYVdZZ0tHWnBiSFJsY2k1MGVYQmxJRDA5UFNCR2FXeDBaWEpVZVhCbExrVllRVU5VS1NCN1hISmNiaUFnSUNBZ0lDQWdMeTlsZUdGamRDQnRZWFJqYUZ4eVhHNGdJQ0FnSUNBZ0lHbG1JQ2hsZG1WdWRDNW1hV1ZzWkNBOVBUMGdhMlY1S1NCN1hISmNiaUFnSUNBZ0lDQWdJQ0JtYVd4MFpYSXVZMkZzYkdKaFkyc29aWFpsYm5RcE8xeHlYRzRnSUNBZ0lDQWdJSDFjY2x4dUlDQWdJQ0FnZlZ4eVhHNGdJQ0FnZlNrN1hISmNiaUFnZlZ4eVhHNTlYSEpjYmx4eVhHNWxlSEJ2Y25RZ1pHVm1ZWFZzZENCRVlYUmhUMkpxWldOMFQySnpaWEoyWlhJN1hISmNibHh1WEc1Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU0lDOHZYRzR2THlBdUwzTnlZeTl6ZVc1amFHVnlMMFJoZEdGUFltcGxZM1JQWW5ObGNuWmxjaTVxY3lJc0lpOHFLbHh5WEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUZCVUlFbHViM1podzZmRG8yOGdaU0JUYVhOMFpXMWhjeUJUUVZ4eVhHNHFJRU52Y0hseWFXZG9kQ0F5TURFMklFbE9SVk5ETFVsRVhISmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdVVlZQUWtsVElFNUZWRmRQVWt0VElGTk1YSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnUmxKQlZVNUlUMFpGVWkxSFJWTkZURXhUUTBoQlJsUWdXbFZTSUVaUFJWSkVSVkpWVGtjZ1JFVlNJRUZPUjBWWFFVNUVWRVZPSUVaUFVsTkRTRlZPUnlCRkxsWmNjbHh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJQVWtGT1IwVWdVMEZjY2x4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCRVpYVjBjMk5vWlNCVVpXeGxhMjl0SUVGSFhISmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdRWEJwZW1WbFhISmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdWRVZEU0U1SlUwTklSU0JWVGtsV1JWSlRTVlJCVkNCQ1JWSk1TVTVjY2x4dUtseHlYRzRxSUV4cFkyVnVjMlZrSUhWdVpHVnlJSFJvWlNCQmNHRmphR1VnVEdsalpXNXpaU3dnVm1WeWMybHZiaUF5TGpBZ0tIUm9aU0JjSWt4cFkyVnVjMlZjSWlrN1hISmNiaW9nZVc5MUlHMWhlU0J1YjNRZ2RYTmxJSFJvYVhNZ1ptbHNaU0JsZUdObGNIUWdhVzRnWTI5dGNHeHBZVzVqWlNCM2FYUm9JSFJvWlNCTWFXTmxibk5sTGx4eVhHNHFJRmx2ZFNCdFlYa2diMkowWVdsdUlHRWdZMjl3ZVNCdlppQjBhR1VnVEdsalpXNXpaU0JoZEZ4eVhHNHFYSEpjYmlvZ0lDQm9kSFJ3T2k4dmQzZDNMbUZ3WVdOb1pTNXZjbWN2YkdsalpXNXpaWE12VEVsRFJVNVRSUzB5TGpCY2NseHVLbHh5WEc0cUlGVnViR1Z6Y3lCeVpYRjFhWEpsWkNCaWVTQmhjSEJzYVdOaFlteGxJR3hoZHlCdmNpQmhaM0psWldRZ2RHOGdhVzRnZDNKcGRHbHVaeXdnYzI5bWRIZGhjbVZjY2x4dUtpQmthWE4wY21saWRYUmxaQ0IxYm1SbGNpQjBhR1VnVEdsalpXNXpaU0JwY3lCa2FYTjBjbWxpZFhSbFpDQnZiaUJoYmlCY0lrRlRJRWxUWENJZ1FrRlRTVk1zWEhKY2Jpb2dWMGxVU0U5VlZDQlhRVkpTUVU1VVNVVlRJRTlTSUVOUFRrUkpWRWxQVGxNZ1QwWWdRVTVaSUV0SlRrUXNJR1ZwZEdobGNpQmxlSEJ5WlhOeklHOXlJR2x0Y0d4cFpXUXVYSEpjYmlvZ1UyVmxJSFJvWlNCTWFXTmxibk5sSUdadmNpQjBhR1VnYzNCbFkybG1hV01nYkdGdVozVmhaMlVnWjI5MlpYSnVhVzVuSUhCbGNtMXBjM05wYjI1eklHRnVaRnh5WEc0cUlHeHBiV2wwWVhScGIyNXpJSFZ1WkdWeUlIUm9aU0JNYVdObGJuTmxMbHh5WEc0cUtpOWNjbHh1WEhKY2JtbHRjRzl5ZENCRVlYUmhUMkpxWldOMElHWnliMjBnSnk0dlJHRjBZVTlpYW1WamRDYzdYSEpjYmx4eVhHNXBiWEJ2Y25RZ1JHRjBZVTlpYW1WamRFTm9hV3hrSUdaeWIyMGdKeTR2UkdGMFlVOWlhbVZqZEVOb2FXeGtKenRjY2x4dVhISmNibWx0Y0c5eWRDQjdJR1JsWlhCRGJHOXVaU0I5SUdaeWIyMGdKeTR1TDNWMGFXeHpMM1YwYVd4ekxtcHpKenRjY2x4dVhISmNiaThxS2x4eVhHNGdLaUJVYUdVZ1kyeGhjM01nY21WMGRYSnVaV1FnWm5KdmJTQjBhR1VnVTNsdVkyaGxjaUJqY21WaGRHVWdZMkZzYkM1Y2NseHVJQ29nVkc4Z1ltVWdkWE5sWkNCaGN5QmhJSEpsY0c5eWRHVnlJSEJ2YVc1MExDQmphR0Z1WjJWeklIZHBiR3dnWW1VZ2MzVmliV2wwWldRZ2RHOGdSR0YwWVU5aWFtVmpkRTlpYzJWeWRtVnlJR2x1YzNSaGJtTmxjeTVjY2x4dUlDb3ZYSEpjYm1Oc1lYTnpJRVJoZEdGUFltcGxZM1JTWlhCdmNuUmxjaUJsZUhSbGJtUnpJRVJoZEdGUFltcGxZM1FnTHlvZ2FXMXdiR1Z0Wlc1MGN5QlRlVzVqVTNSaGRIVnpJQ292SUh0Y2NseHVJQ0F2S2lCd2NtbDJZWFJsWEhKY2JpQWdYM04xWW5OamNtbHdkR2x2Ym5NNklEeG9lWEJsY25SNVZYSnNPaUI3SUhOMFlYUjFjem9nYzNSeWFXNW5JSDBnZlQ1Y2NseHVYSEpjYmlBZ0xTMHRMV1YyWlc1MElHaGhibVJzWlhKekxTMHRMVnh5WEc0Z0lGOXZibE4xWW5OamNtbHdkR2x2YmtoaGJtUnNaWEk2SUNobGRtVnVkQ2tnUFQ0Z2RtOXBaRnh5WEc0Z0lGOXZibEpsYzNCdmJuTmxTR0Z1Wkd4bGNqb2dLR1YyWlc1MEtTQTlQaUIyYjJsa1hISmNiaUFnWDI5dVVtVmhaRWhoYm1Sc1pYSTZJQ2hsZG1WdWRDa2dQVDRnZG05cFpGeHlYRzRnSUNvdlhISmNibHh5WEc0Z0lDOHFLbHh5WEc0Z0lDQXFJRUJwWjI1dmNtVmNjbHh1SUNBZ0tpQlRhRzkxYkdRZ2JtOTBJR0psSUhWelpXUWdaR2x5WldOMGJIa2dZbmtnU0hsd1pYSjBhV1Z6TGlCSmRDZHpJR05oYkd4bFpDQmllU0IwYUdVZ1UzbHVZMmhsY2k1amNtVmhkR1VnYldWMGFHOWtYSEpjYmlBZ0lDb3ZYSEpjYmx4eVhHNGdJQ0F2TDJOdmJuTjBjblZqZEc5eUtITjVibU5vWlhJc0lIVnliQ3dnWTNKbFlYUmxaQ3dnY21Wd2IzSjBaWElzSUhKMWJuUnBiV1VzSUhOamFHVnRZU3dnYm1GdFpTd2dhVzVwZEdsaGJGTjBZWFIxY3l3Z2FXNXBkR2xoYkVSaGRHRXNJR05vYVd4a2NtVnVjeXdnYlhWMGRXRnNJRDBnZEhKMVpTd2djbVZ6ZFcxbFpDQTlJR1poYkhObExDQmtaWE5qY21sd2RHbHZiaXdnZEdGbmN5d2djbVZ6YjNWeVkyVnpMQ0J2WW5ObGNuWmxjbE4wYjNKaFoyVXNJSEIxWW14cFkwOWljMlZ5ZG1GMGFXOXVLU0I3WEhKY2JpQWdZMjl1YzNSeWRXTjBiM0lvYVc1d2RYUXBJSHRjY2x4dVhISmNiaUFnSUNCemRYQmxjaWhwYm5CMWRDazdYSEpjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHlYRzVjY2x4dUlDQWdJRjkwYUdsekxsOXpkV0p6WTNKcGNIUnBiMjV6SUQwZ2UzMDdYSEpjYmx4eVhHNGdJQ0FnWDNSb2FYTXVYM041Ym1OUFltb3ViMkp6WlhKMlpTZ29aWFpsYm5RcElEMCtJSHRjY2x4dUlDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0owUmhkR0ZQWW1wbFkzUlNaWEJ2Y25SbGNpMG5JQ3NnYVc1d2RYUXVkWEpzSUNzZ0p5MVRSVTVFT2lBbkxDQmxkbVZ1ZENrN1hISmNiaUFnSUNBZ0lGOTBhR2x6TGw5dmJrTm9ZVzVuWlNobGRtVnVkQ2s3WEhKY2JpQWdJQ0I5S1R0Y2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZllXeHNiMk5oZEdWTWFYTjBaVzVsY25Nb0tUdGNjbHh1SUNCOVhISmNibHh5WEc0Z0lGOWhiR3h2WTJGMFpVeHBjM1JsYm1WeWN5Z3BJSHRjY2x4dUlDQWdJSE4xY0dWeUxsOWhiR3h2WTJGMFpVeHBjM1JsYm1WeWN5Z3BPMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1WEhKY2JpQWdJQ0JmZEdocGN5NWZiMkpxWldOMFRHbHpkR1Z1WlhJZ1BTQmZkR2hwY3k1ZlluVnpMbUZrWkV4cGMzUmxibVZ5S0Y5MGFHbHpMbDkxY213c0lDaHRjMmNwSUQwK0lIdGNjbHh1SUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjBSaGRHRlBZbXBsWTNRdEp5QXJJRjkwYUdsekxsOTFjbXdnS3lBbkxWSkRWam9nSnl3Z2JYTm5LVHRjY2x4dUlDQWdJQ0FnYzNkcGRHTm9JQ2h0YzJjdWRIbHdaU2tnZTF4eVhHNGdJQ0FnSUNBZ0lHTmhjMlVnSjNKbGMzQnZibk5sSnpvZ1gzUm9hWE11WDI5dVVtVnpjRzl1YzJVb2JYTm5LVHNnWW5KbFlXczdYSEpjYmlBZ0lDQWdJQ0FnWTJGelpTQW5jbVZoWkNjNklGOTBhR2x6TGw5dmJsSmxZV1FvYlhObktUc2dZbkpsWVdzN1hISmNiaUFnSUNBZ0lIMWNjbHh1SUNBZ0lIMHBPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdYM0psYkdWaGMyVk1hWE4wWlc1bGNuTW9LU0I3WEhKY2JpQWdJQ0J6ZFhCbGNpNWZjbVZzWldGelpVeHBjM1JsYm1WeWN5Z3BPMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1WEhKY2JpQWdJQ0JmZEdocGN5NWZiMkpxWldOMFRHbHpkR1Z1WlhJdWNtVnRiM1psS0NrN1hISmNiaUFnZlZ4eVhHNWNjbHh1SUNBdktpcGNjbHh1SUNBZ0tseHlYRzRnSUNBcUwxeHlYRzR2S2lBZ2NtVnpkVzFsUTJocGJHUnlaVzV6S0dOb2FXeGtjbVZ1Y3lrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQnNaWFFnWTJocGJHUkpaRk4wY21sdVp5QTlJSFJvYVhNdVgyOTNibVZ5SUNzZ0p5TW5JQ3NnZEdocGN5NWZZMmhwYkdSSlpEdGNjbHh1WEhKY2JpQWdJQ0F2TDNObGRIVndJR05vYVd4a2NtVnVjeUJrWVhSaElHWnliMjBnYzNWaWMyTnlhWEIwYVc5dVhISmNiaUFnSUNCUFltcGxZM1F1YTJWNWN5aGphR2xzWkhKbGJuTXBMbVp2Y2tWaFkyZ29LR05vYVd4a2NtVnVVbVZ6YjNWeVkyVXBJRDArSUh0Y2NseHVJQ0FnSUNBZ2JHVjBJR05vYVd4a2NtVnVJRDBnWTJocGJHUnlaVzV6VzJOb2FXeGtjbVZ1VW1WemIzVnlZMlZkTzF4eVhHNWNjbHh1SUNBZ0lDQWdMeThnYVdZZ2FYTWdjbVZ6ZFcxbFpGeHlYRzRnSUNBZ0lDQlBZbXBsWTNRdWEyVjVjeWhqYUdsc1pISmxiaWt1Wm05eVJXRmphQ2dvWTJocGJHUkpaQ2tnUFQ0Z2UxeHlYRzRnSUNBZ0lDQWdJR3hsZENCamFHbHNaRWx1Y0hWMElEMGdZMmhwYkdSeVpXNWJZMmhwYkdSSlpGMHVkbUZzZFdVN1hISmNiaUFnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjF0RVlYUmhUMkpxWldOMFVtVndiM0owWlhJdWNtVnpkVzFsUTJocGJHUnlaVzV6WFNCdVpYY2dSR0YwWVU5aWFtVmpkRU5vYVd4a09pQW5MQ0JqYUdsc1pISmxibEpsYzI5MWNtTmxMQ0JqYUdsc1pISmxiaXdnWTJocGJHUkpibkIxZENrN1hISmNiaUFnSUNBZ0lDQWdZMmhwYkdSSmJuQjFkQzV3WVhKbGJuUlBZbXBsWTNRZ1BTQmZkR2hwY3p0Y2NseHVJQ0FnSUNBZ0lDQmphR2xzWkVsdWNIVjBMbkJoY21WdWRDQTlJRjkwYUdsekxsOTFjbXc3WEhKY2JpQWdJQ0FnSUNBZ1gzUm9hWE11WDJOb2FXeGtjbVZ1VDJKcVpXTjBjMXRqYUdsc1pFbGtYU0E5SUc1bGR5QkVZWFJoVDJKcVpXTjBRMmhwYkdRb1kyaHBiR1JKYm5CMWRDazdYSEpjYmlBZ0lDQWdJQ0FnWDNSb2FYTXVYMk5vYVd4a2NtVnVUMkpxWldOMGMxdGphR2xzWkVsa1hTNXBaR1Z1ZEdsMGVTQTlJR05vYVd4a2NtVnVXMk5vYVd4a1NXUmRMbWxrWlc1MGFYUjVPMXh5WEc1Y2NseHVJQ0FnSUNBZ0lDQnBaaUFvWTJocGJHUkpaQ0ErSUdOb2FXeGtTV1JUZEhKcGJtY3BJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lHTm9hV3hrU1dSVGRISnBibWNnUFNCamFHbHNaRWxrTzF4eVhHNGdJQ0FnSUNBZ0lIMWNjbHh1WEhKY2JpQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMXRFWVhSaFQySnFaV04wVW1Wd2IzSjBaWEl1Y21WemRXMWxRMmhwYkdSeVpXNXpYU0F0SUhKbGMzVnRaV1E2SUNjc0lIUm9hWE11WDJOb2FXeGtjbVZ1VDJKcVpXTjBjMXRqYUdsc1pFbGtYU2s3WEhKY2JpQWdJQ0FnSUgwcE8xeHlYRzRnSUNBZ2ZTazdYSEpjYmx4eVhHNGdJQ0FnZEdocGN5NWZZMmhwYkdSSlpDQTlJRTUxYldKbGNpaGphR2xzWkVsa1UzUnlhVzVuTG5Od2JHbDBLQ2NqSnlsYk1WMHBPMXh5WEc0Z0lIMHFMMXh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCVFpXNWtJR2x1ZG1sMFlYUnBiMjV6SUNoamNtVmhkR1VnYldWemMyRm5aWE1wSUhSdklHaDVjR1Z5ZEdsbGN5d2diMkp6WlhKMlpYSnpJR3hwYzNRdVhISmNiaUFnSUNvZ1FIQmhjbUZ0SUNCN1NIbHdaWEowZVZWU1RGdGRmU0J2WW5ObGNuWmxjbk1nVEdsemRDQnZaaUJJZVhCbGNuUjVJRlZTVENkelhISmNiaUFnSUNvdlhISmNiaUFnYVc1MmFYUmxUMkp6WlhKMlpYSnpLRzlpYzJWeWRtVnljeWtnZTF4eVhHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjY2x4dVhISmNiaUFnSUNBdkwwWk1UMWN0VDFWVU9pQjBhR2x6SUcxbGMzTmhaMlVnZDJsc2JDQmlaU0J6Wlc1MElIUnZJSFJvWlNCeWRXNTBhVzFsSUdsdWMzUmhibU5sSUc5bUlGTjVibU5vWlhKTllXNWhaMlZ5SUMwK0lGOXZia055WldGMFpWeHlYRzRnSUNBZ0x5OGdWRTlFVHpvZ2NtVnRiM1psSUhaaGJIVmxJR0Z1WkNCaFpHUWdjbVZ6YjNWeVkyVnpQeUJ6YUc5MWJHUWdjMmx0YVd4aGNpQjBieUF4YzNRZ1kzSmxZWFJsWEhKY2JpQWdJQ0JzWlhRZ2FXNTJhWFJsVFhObklEMGdlMXh5WEc0Z0lDQWdJQ0IwZVhCbE9pQW5ZM0psWVhSbEp5d2dabkp2YlRvZ1gzUm9hWE11WDNONWJtTm9aWEl1WDI5M2JtVnlMQ0IwYnpvZ1gzUm9hWE11WDNONWJtTm9aWEl1WDNOMVlsVlNUQ3hjY2x4dUlDQWdJQ0FnWW05a2VUb2dleUJ5WlhOMWJXVTZJR1poYkhObExDQnlaWE52ZFhKalpUb2dYM1JvYVhNdVgzVnliQ3dnYzJOb1pXMWhPaUJmZEdocGN5NWZjMk5vWlcxaExDQjJZV3gxWlRvZ1gzUm9hWE11WDNONWJtTlBZbW91WkdGMFlTd2dZWFYwYUc5eWFYTmxPaUJ2WW5ObGNuWmxjbk1nZlZ4eVhHNGdJQ0FnZlR0Y2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZlluVnpMbkJ2YzNSTlpYTnpZV2RsS0dsdWRtbDBaVTF6WnlrN1hISmNiaUFnZlZ4eVhHNWNjbHh1SUNBdktpcGNjbHh1SUNBZ0tpQlNaV3hsWVhObElHRnVaQ0JrWld4bGRHVWdiMkpxWldOMElHUmhkR0ZjY2x4dUlDQWdLaTljY2x4dUlDQmtaV3hsZEdVb0tTQjdYSEpjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHlYRzVjY2x4dUlDQWdJQzh2Umt4UFZ5MVBWVlE2SUhSb2FYTWdiV1Z6YzJGblpTQjNhV3hzSUdKbElITmxiblFnZEc4Z2RHaGxJSEoxYm5ScGJXVWdhVzV6ZEdGdVkyVWdiMllnVTNsdVkyaGxjazFoYm1GblpYSWdMVDRnWDI5dVJHVnNaWFJsWEhKY2JpQWdJQ0JzWlhRZ1pHVnNaWFJsVFhObklEMGdlMXh5WEc0Z0lDQWdJQ0IwZVhCbE9pQW5aR1ZzWlhSbEp5d2dabkp2YlRvZ1gzUm9hWE11WDI5M2JtVnlMQ0IwYnpvZ1gzUm9hWE11WDNONWJtTm9aWEl1WDNOMVlsVlNUQ3hjY2x4dUlDQWdJQ0FnWW05a2VUb2dleUJ5WlhOdmRYSmpaVG9nWDNSb2FYTXVYM1Z5YkNCOVhISmNiaUFnSUNCOU8xeHlYRzVjY2x4dUlDQWdJRjkwYUdsekxsOWlkWE11Y0c5emRFMWxjM05oWjJVb1pHVnNaWFJsVFhObkxDQW9jbVZ3YkhrcElEMCtJSHRjY2x4dUlDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0owUmhkR0ZQWW1wbFkzUlNaWEJ2Y25SbGNpMUVSVXhGVkVVNklDY3NJSEpsY0d4NUtUdGNjbHh1SUNBZ0lDQWdhV1lnS0hKbGNHeDVMbUp2WkhrdVkyOWtaU0E5UFQwZ01qQXdLU0I3WEhKY2JpQWdJQ0FnSUNBZ1gzUm9hWE11WDNKbGJHVmhjMlZNYVhOMFpXNWxjbk1vS1R0Y2NseHVJQ0FnSUNBZ0lDQmtaV3hsZEdVZ1gzUm9hWE11WDNONWJtTm9aWEl1WDNKbGNHOXlkR1Z5YzF0ZmRHaHBjeTVmZFhKc1hUdGNjbHh1SUNBZ0lDQWdmVnh5WEc0Z0lDQWdmU2s3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCVGRXSnpZM0pwY0hScGIyNXpJSEpsY1hWbGMzUmxaQ0JoYm1RZ1lXTmpaWEIwWldRZ2RHOGdkR2hwY3lCeVpYQnZjblJsY2x4eVhHNGdJQ0FxSUVCMGVYQmxJSHRQWW1wbFkzUThTSGx3WlhKMGVWVlNUQ3dnVTNsdVkxTjFZbk5qY21sd2RHbHZiajU5WEhKY2JpQWdJQ292WEhKY2JpQWdaMlYwSUhOMVluTmpjbWx3ZEdsdmJuTW9LU0I3SUhKbGRIVnliaUIwYUdsekxsOXpkV0p6WTNKcGNIUnBiMjV6T3lCOVhISmNibHh5WEc0Z0lDOHFLbHh5WEc0Z0lDQXFJRk5sZEhWd0lIUm9aU0JqWVd4c1ltRmpheUIwYnlCd2NtOWpaWE56SUhOMVluTmpjbWxpWlNCaGJtUWdkVzV6ZFdKelkzSnBZbVVnYm05MGFXWnBZMkYwYVc5dWMxeHlYRzRnSUNBcUlFQndZWEpoYlNCN1puVnVZM1JwYjI0b1pYWmxiblE2SUUxelowVjJaVzUwS1gwZ1kyRnNiR0poWTJzZ1puVnVZM1JwYjI0Z2RHOGdjbVZqWldsMlpTQmxkbVZ1ZEhOY2NseHVJQ0FnS2k5Y2NseHVJQ0J2YmxOMVluTmpjbWx3ZEdsdmJpaGpZV3hzWW1GamF5a2dlMXh5WEc0Z0lDQWdkR2hwY3k1ZmIyNVRkV0p6WTNKcGNIUnBiMjVJWVc1a2JHVnlJRDBnWTJGc2JHSmhZMnM3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCVFpYUjFjQ0IwYUdVZ1kyRnNiR0poWTJzZ2RHOGdjSEp2WTJWemN5QnlaWE53YjI1elpTQnViM1JwWm1sallYUnBiMjV6SUc5bUlIUm9aU0JqY21WaGRHVW5jMXh5WEc0Z0lDQXFJRUJ3WVhKaGJTQjdablZ1WTNScGIyNG9aWFpsYm5RNklFMXpaMFYyWlc1MEtYMGdZMkZzYkdKaFkyc2dablZ1WTNScGIyNGdkRzhnY21WalpXbDJaU0JsZG1WdWRITmNjbHh1SUNBZ0tpOWNjbHh1SUNCdmJsSmxjM0J2Ym5ObEtHTmhiR3hpWVdOcktTQjdYSEpjYmlBZ0lDQjBhR2x6TGw5dmJsSmxjM0J2Ym5ObFNHRnVaR3hsY2lBOUlHTmhiR3hpWVdOck8xeHlYRzRnSUgxY2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dVMlYwZFhBZ2RHaGxJR05oYkd4aVlXTnJJSFJ2SUhCeWIyTmxjM01nY21WaFpDQnViM1JwWm1sallYUnBiMjV6WEhKY2JpQWdJQ29nUUhCaGNtRnRJSHRtZFc1amRHbHZiaWhsZG1WdWREb2dUWE5uUlhabGJuUXBmU0JqWVd4c1ltRmphMXh5WEc0Z0lDQXFMMXh5WEc0Z0lHOXVVbVZoWkNoallXeHNZbUZqYXlrZ2UxeHlYRzRnSUNBZ2RHaHBjeTVmYjI1U1pXRmtTR0Z1Wkd4bGNpQTlJR05oYkd4aVlXTnJPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdMeTlHVEU5WExVbE9PaUJ0WlhOellXZGxJSEpsWTJWcGRtVmtJR1p5YjIwZ2NHRnlaVzUwSUZONWJtTm9aWElnTFQ0Z1gyOXVSbTl5ZDJGeVpGeHlYRzRnSUY5dmJrWnZjbmRoY21Rb2JYTm5LU0I3WEhKY2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh5WEc1Y2NseHVJQ0FnSUdOdmJuTnZiR1V1Ykc5bktDZEVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSXRVa05XT2lBbkxDQnRjMmNwTzF4eVhHNGdJQ0FnYzNkcGRHTm9JQ2h0YzJjdVltOWtlUzUwZVhCbEtTQjdYSEpjYmlBZ0lDQWdJR05oYzJVZ0ozTjFZbk5qY21saVpTYzZJRjkwYUdsekxsOXZibE4xWW5OamNtbGlaU2h0YzJjcE95QmljbVZoYXp0Y2NseHVJQ0FnSUNBZ1kyRnpaU0FuZFc1emRXSnpZM0pwWW1Vbk9pQmZkR2hwY3k1ZmIyNVZibE4xWW5OamNtbGlaU2h0YzJjcE95QmljbVZoYXp0Y2NseHVJQ0FnSUgxY2NseHVJQ0I5WEhKY2JseHlYRzRnSUM4dlJreFBWeTFKVGpvZ2JXVnpjMkZuWlNCeVpXTmxhWFpsWkNCbWNtOXRJSFJvYVhNZ0xUNGdYMjl1Um05eWQyRnlaRG9nWlcxcGRIUmxaQ0JpZVNCaElISmxiVzkwWlNCVGVXNWphR1Z5SUMwK0lITjFZbk5qY21saVpWeHlYRzRnSUY5dmJsTjFZbk5qY21saVpTaHRjMmNwSUh0Y2NseHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEhKY2JpQWdJQ0JzWlhRZ2FIbHdaWEowZVZWeWJDQTlJRzF6Wnk1aWIyUjVMbVp5YjIwN1hISmNiaUFnSUNCamIyNXpiMnhsTG14dlp5Z25XMFJoZEdGUFltcGxZM1JTWlhCdmNuUmxjaTVmYjI1VGRXSnpZM0pwWW1WZEp5d2diWE5uS1R0Y2NseHVYSEpjYmlBZ0lDQnNaWFFnWlhabGJuUWdQU0I3WEhKY2JpQWdJQ0FnSUhSNWNHVTZJRzF6Wnk1aWIyUjVMblI1Y0dVc1hISmNiaUFnSUNBZ0lIVnliRG9nYUhsd1pYSjBlVlZ5YkN4Y2NseHVYSEpjYmlBZ0lDQWdJR2xrWlc1MGFYUjVPaUJ0YzJjdVltOWtlUzVwWkdWdWRHbDBlU3hjY2x4dVhISmNiaUFnSUNBZ0lHRmpZMlZ3ZERvZ0tDa2dQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lDOHZZM0psWVhSbElHNWxkeUJ6ZFdKelkzSnBjSFJwYjI1Y2NseHVJQ0FnSUNBZ0lDQnNaWFFnYzNWaUlEMGdleUIxY213NklHaDVjR1Z5ZEhsVmNtd3NJSE4wWVhSMWN6b2dKMnhwZG1VbklIMDdYSEpjYmlBZ0lDQWdJQ0FnWDNSb2FYTXVYM04xWW5OamNtbHdkR2x2Ym5OYmFIbHdaWEowZVZWeWJGMGdQU0J6ZFdJN1hISmNibHh5WEc0Z0lDQWdJQ0FnSUM4dmNISnZZMlZ6Y3lCaGJtUWdjMlZ1WkNCamFHbHNaSEpsYm5NZ1pHRjBZVnh5WEc0Z0lDQWdJQ0FnSUd4bGRDQmphR2xzWkhKbGJsWmhiSFZsY3lBOUlIdDlPMXh5WEc0Z0lDQWdJQ0FnSUU5aWFtVmpkQzVyWlhsektGOTBhR2x6TGw5amFHbHNaSEpsYms5aWFtVmpkSE1wTG1admNrVmhZMmdvS0dOb2FXeGtjbVZ1U1dRcElEMCtJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lHeGxkQ0JqYUdsc1pISmxia1JoZEdFZ1BTQmZkR2hwY3k1ZlkyaHBiR1J5Wlc1UFltcGxZM1J6VzJOb2FXeGtjbVZ1U1dSZExtUmhkR0U3WEhKY2JpQWdJQ0FnSUNBZ0lDQmphR2xzWkhKbGJsWmhiSFZsYzF0amFHbHNaSEpsYmtsa1hTQTlJR1JsWlhCRGJHOXVaU2hqYUdsc1pISmxia1JoZEdFcE8xeHlYRzRnSUNBZ0lDQWdJSDBwTzF4eVhHNWNjbHh1SUNBZ0lDQWdJQ0JzWlhRZ2JYTm5WbUZzZFdVZ1BTQmZkR2hwY3k1ZmJXVjBZV1JoZEdFN1hISmNiaUFnSUNBZ0lDQWdiWE5uVm1Gc2RXVXVZMmhwYkdSeVpXNVBZbXBsWTNSeklEMGdZMmhwYkdSeVpXNVdZV3gxWlhNN1hISmNiaUFnSUNBZ0lDQWdiWE5uVm1Gc2RXVXVaR0YwWVNBOUlHUmxaWEJEYkc5dVpTaGZkR2hwY3k1a1lYUmhLVHRjY2x4dUlDQWdJQ0FnSUNCdGMyZFdZV3gxWlM1MlpYSnphVzl1SUQwZ1gzUm9hWE11WDNabGNuTnBiMjQ3WEhKY2JseHlYRzRnSUNBZ0lDQWdJR3hsZENCelpXNWtUWE5uSUQwZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnYVdRNklHMXpaeTVwWkN3Z2RIbHdaVG9nSjNKbGMzQnZibk5sSnl3Z1puSnZiVG9nYlhObkxuUnZMQ0IwYnpvZ2JYTm5MbVp5YjIwc1hISmNiaUFnSUNBZ0lDQWdJQ0JpYjJSNU9pQjdJR052WkdVNklESXdNQ3dnYzJOb1pXMWhPaUJmZEdocGN5NWZjMk5vWlcxaExDQjJZV3gxWlRvZ2JYTm5WbUZzZFdVZ2ZWeHlYRzRnSUNBZ0lDQWdJSDA3WEhKY2JseHlYRzRnSUNBZ0lDQWdJQzh2VkU5RVR6b2dSbTl5SUVaMWNuUm9aWElnVTNSMVpIbGNjbHh1SUNBZ0lDQWdJQ0JwWmlBb2JYTm5MbUp2WkhrdWFHRnpUM2R1VUhKdmNHVnlkSGtvSjIxMWRIVmhiRUYxZEdobGJuUnBZMkYwYVc5dUp5a2dKaVlnSVcxelp5NWliMlI1TG0xMWRIVmhiRUYxZEdobGJuUnBZMkYwYVc5dUtTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNCelpXNWtUWE5uTG1KdlpIa3ViWFYwZFdGc1FYVjBhR1Z1ZEdsallYUnBiMjRnUFNCMGFHbHpMbDl0ZFhSMVlXeEJkWFJvWlc1MGFXTmhkR2x2Ymp0Y2NseHVJQ0FnSUNBZ0lDQWdJSFJvYVhNdVgyMTFkSFZoYkVGMWRHaGxiblJwWTJGMGFXOXVJRDBnYlhObkxtSnZaSGt1YlhWMGRXRnNRWFYwYUdWdWRHbGpZWFJwYjI0N1hISmNiaUFnSUNBZ0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUNBZ0lDQXZMM05sYm1RZ2Iyc2djbVZ6Y0c5dWMyVWdiV1Z6YzJGblpWeHlYRzRnSUNBZ0lDQWdJRjkwYUdsekxsOWlkWE11Y0c5emRFMWxjM05oWjJVb2MyVnVaRTF6WnlrN1hISmNibHh5WEc0Z0lDQWdJQ0FnSUhKbGRIVnliaUJ6ZFdJN1hISmNiaUFnSUNBZ0lIMHNYSEpjYmx4eVhHNGdJQ0FnSUNCeVpXcGxZM1E2SUNoeVpXRnpiMjRwSUQwK0lIdGNjbHh1SUNBZ0lDQWdJQ0F2TDNObGJtUWdjbVZxWldOMElISmxjM0J2Ym5ObElHMWxjM05oWjJWY2NseHVJQ0FnSUNBZ0lDQmZkR2hwY3k1ZlluVnpMbkJ2YzNSTlpYTnpZV2RsS0h0Y2NseHVJQ0FnSUNBZ0lDQWdJR2xrT2lCdGMyY3VhV1FzSUhSNWNHVTZJQ2R5WlhOd2IyNXpaU2NzSUdaeWIyMDZJRzF6Wnk1MGJ5d2dkRzg2SUcxelp5NW1jbTl0TEZ4eVhHNGdJQ0FnSUNBZ0lDQWdZbTlrZVRvZ2V5QmpiMlJsT2lBME1ETXNJR1JsYzJNNklISmxZWE52YmlCOVhISmNiaUFnSUNBZ0lDQWdmU2s3WEhKY2JpQWdJQ0FnSUgxY2NseHVJQ0FnSUgwN1hISmNibHh5WEc0Z0lDQWdhV1lnS0Y5MGFHbHpMbDl2YmxOMVluTmpjbWx3ZEdsdmJraGhibVJzWlhJcElIdGNjbHh1SUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjFOVlFsTkRVa2xRVkVsUFRpMUZWa1ZPVkRvZ0p5d2daWFpsYm5RcE8xeHlYRzRnSUNBZ0lDQmZkR2hwY3k1ZmIyNVRkV0p6WTNKcGNIUnBiMjVJWVc1a2JHVnlLR1YyWlc1MEtUdGNjbHh1SUNBZ0lIMWNjbHh1SUNCOVhISmNibHh5WEc0Z0lDOHZSa3hQVnkxSlRqb2diV1Z6YzJGblpTQnlaV05sYVhabFpDQm1jbTl0SUhSb2FYTWdMVDRnWDI5dVJtOXlkMkZ5WkRvZ1pXMXBkSFJsWkNCaWVTQmhJSEpsYlc5MFpTQkVZWFJoVDJKcVpXTjBUMkp6WlhKMlpYSWdMVDRnZFc1emRXSnpZM0pwWW1WY2NseHVJQ0JmYjI1VmJsTjFZbk5qY21saVpTaHRjMmNwSUh0Y2NseHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEhKY2JpQWdJQ0JzWlhRZ2FIbHdaWEowZVZWeWJDQTlJRzF6Wnk1aWIyUjVMbVp5YjIwN1hISmNibHh5WEc0Z0lDQWdiR1YwSUhOMVlpQTlJRjkwYUdsekxsOXpkV0p6WTNKcGNIUnBiMjV6VzJoNWNHVnlkSGxWY214ZE8xeHlYRzRnSUNBZ1pHVnNaWFJsSUY5MGFHbHpMbDl6ZFdKelkzSnBjSFJwYjI1elcyaDVjR1Z5ZEhsVmNteGRPMXh5WEc1Y2NseHVJQ0FnSUd4bGRDQmxkbVZ1ZENBOUlIdGNjbHh1SUNBZ0lDQWdkSGx3WlRvZ2JYTm5MbUp2WkhrdWRIbHdaU3hjY2x4dUlDQWdJQ0FnZFhKc09pQm9lWEJsY25SNVZYSnNMRnh5WEc0Z0lDQWdJQ0J2WW1wbFkzUTZJSE4xWWx4eVhHNGdJQ0FnZlR0Y2NseHVYSEpjYmlBZ0lDQnBaaUFvWDNSb2FYTXVYMjl1VTNWaWMyTnlhWEIwYVc5dVNHRnVaR3hsY2lrZ2UxeHlYRzRnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduVlU0dFUxVkNVME5TU1ZCVVNVOU9MVVZXUlU1VU9pQW5MQ0JsZG1WdWRDazdYSEpjYmlBZ0lDQWdJRjkwYUdsekxsOXZibE4xWW5OamNtbHdkR2x2YmtoaGJtUnNaWElvWlhabGJuUXBPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdMeTlHVEU5WExVbE9PaUJ0WlhOellXZGxJSEpsWTJWcGRtVmtJR1p5YjIwZ1VtVndiM0owWlhKVlVrd2dZV1JrY21WemN6b2daVzFwZEdWa0lHSjVJR0VnY21WdGIzUmxJRk41Ym1Ob1pYSWdMVDRnWDI5dVVtVnRiM1JsUTNKbFlYUmxJQzArSUdWMlpXNTBMbUZqYTF4eVhHNGdJRjl2YmxKbGMzQnZibk5sS0cxelp5a2dlMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1WEhKY2JpQWdJQ0JzWlhRZ1pYWmxiblFnUFNCN1hISmNiaUFnSUNBZ0lIUjVjR1U2SUcxelp5NTBlWEJsTEZ4eVhHNGdJQ0FnSUNCMWNtdzZJRzF6Wnk1bWNtOXRMRnh5WEc0Z0lDQWdJQ0JqYjJSbE9pQnRjMmN1WW05a2VTNWpiMlJsWEhKY2JpQWdJQ0I5TzF4eVhHNWNjbHh1SUNBZ0lHbG1JQ2hmZEdocGN5NWZiMjVTWlhOd2IyNXpaVWhoYm1Sc1pYSXBJSHRjY2x4dUlDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0oxSkZVMUJQVGxORkxVVldSVTVVT2lBbkxDQmxkbVZ1ZENrN1hISmNiaUFnSUNBZ0lGOTBhR2x6TGw5dmJsSmxjM0J2Ym5ObFNHRnVaR3hsY2lobGRtVnVkQ2s3WEhKY2JpQWdJQ0I5WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0F2TDBaTVQxY3RTVTQ2SUcxbGMzTmhaMlVnY21WalpXbDJaV1FnWm5KdmJTQlNaWEJ2Y25SbGNsVlNUQ0JoWkdSeVpYTnpPaUJsYldsMFpXUWdZbmtnWVNCeVpXMXZkR1VnVTNsdVkyaGxjaUF0UGlCeVpXRmtYSEpjYmlBZ1gyOXVVbVZoWkNodGMyY3BJSHRjY2x4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYSEpjYmx4eVhHNGdJQ0FnYkdWMElHVjJaVzUwSUQwZ2UxeHlYRzRnSUNBZ0lDQjBlWEJsT2lCdGMyY3VkSGx3WlN4Y2NseHVJQ0FnSUNBZ2RYSnNPaUJ0YzJjdVpuSnZiU3hjY2x4dVhISmNiaUFnSUNBZ0lHRmpZMlZ3ZERvZ0tDa2dQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lGOTBhR2x6TGw5aWRYTXVjRzl6ZEUxbGMzTmhaMlVvZTF4eVhHNGdJQ0FnSUNBZ0lDQWdhV1E2SUcxelp5NXBaQ3dnZEhsd1pUb2dKM0psYzNCdmJuTmxKeXdnWm5KdmJUb2diWE5uTG5SdkxDQjBiem9nYlhObkxtWnliMjBzWEhKY2JpQWdJQ0FnSUNBZ0lDQmliMlI1T2lCN0lHTnZaR1U2SURJd01Dd2dkbUZzZFdVNklHUmxaWEJEYkc5dVpTaGZkR2hwY3k1a1lYUmhLU0I5WEhKY2JpQWdJQ0FnSUNBZ2ZTazdYSEpjYmlBZ0lDQWdJSDBzWEhKY2JseHlYRzRnSUNBZ0lDQnlaV3BsWTNRNklDaHlaV0Z6YjI0cElEMCtJSHRjY2x4dUlDQWdJQ0FnSUNCZmRHaHBjeTVmWW5WekxuQnZjM1JOWlhOellXZGxLSHRjY2x4dUlDQWdJQ0FnSUNBZ0lHbGtPaUJ0YzJjdWFXUXNJSFI1Y0dVNklDZHlaWE53YjI1elpTY3NJR1p5YjIwNklHMXpaeTUwYnl3Z2RHODZJRzF6Wnk1bWNtOXRMRnh5WEc0Z0lDQWdJQ0FnSUNBZ1ltOWtlVG9nZXlCamIyUmxPaUEwTURFc0lHUmxjMk02SUhKbFlYTnZiaUI5WEhKY2JpQWdJQ0FnSUNBZ2ZTazdYSEpjYmlBZ0lDQWdJSDFjY2x4dUlDQWdJSDA3WEhKY2JseHlYRzRnSUNBZ2FXWWdLRjkwYUdsekxsOXZibEpsWVdSSVlXNWtiR1Z5S1NCN1hISmNiaUFnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RTUlVGRUxVVldSVTVVT2lBbkxDQmxkbVZ1ZENrN1hISmNiaUFnSUNBZ0lGOTBhR2x6TGw5dmJsSmxZV1JJWVc1a2JHVnlLR1YyWlc1MEtUdGNjbHh1SUNBZ0lIMWNjbHh1SUNCOVhISmNibHh5WEc1OVhISmNibHh5WEc1bGVIQnZjblFnWkdWbVlYVnNkQ0JFWVhSaFQySnFaV04wVW1Wd2IzSjBaWEk3WEhKY2JseHVYRzVjYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTSUM4dlhHNHZMeUF1TDNOeVl5OXplVzVqYUdWeUwwUmhkR0ZQWW1wbFkzUlNaWEJ2Y25SbGNpNXFjeUlzSWk4cUtseHlYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRkJVSUVsdWIzWmh3NmZEbzI4Z1pTQlRhWE4wWlcxaGN5QlRRVnh5WEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUVsT1JWTkRMVWxFWEhKY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1VWVlBRa2xUSUU1RlZGZFBVa3RUSUZOTVhISmNiaW9nUTI5d2VYSnBaMmgwSURJd01UWWdSbEpCVlU1SVQwWkZVaTFIUlZORlRFeFRRMGhCUmxRZ1dsVlNJRVpQUlZKRVJWSlZUa2NnUkVWU0lFRk9SMFZYUVU1RVZFVk9JRVpQVWxORFNGVk9SeUJGTGxaY2NseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQlBVa0ZPUjBVZ1UwRmNjbHh1S2lCRGIzQjVjbWxuYUhRZ01qQXhOaUJFWlhWMGMyTm9aU0JVWld4bGEyOXRJRUZIWEhKY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1FYQnBlbVZsWEhKY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1ZFVkRTRTVKVTBOSVJTQlZUa2xXUlZKVFNWUkJWQ0JDUlZKTVNVNWNjbHh1S2x4eVhHNHFJRXhwWTJWdWMyVmtJSFZ1WkdWeUlIUm9aU0JCY0dGamFHVWdUR2xqWlc1elpTd2dWbVZ5YzJsdmJpQXlMakFnS0hSb1pTQmNJa3hwWTJWdWMyVmNJaWs3WEhKY2Jpb2dlVzkxSUcxaGVTQnViM1FnZFhObElIUm9hWE1nWm1sc1pTQmxlR05sY0hRZ2FXNGdZMjl0Y0d4cFlXNWpaU0IzYVhSb0lIUm9aU0JNYVdObGJuTmxMbHh5WEc0cUlGbHZkU0J0WVhrZ2IySjBZV2x1SUdFZ1kyOXdlU0J2WmlCMGFHVWdUR2xqWlc1elpTQmhkRnh5WEc0cVhISmNiaW9nSUNCb2RIUndPaTh2ZDNkM0xtRndZV05vWlM1dmNtY3ZiR2xqWlc1elpYTXZURWxEUlU1VFJTMHlMakJjY2x4dUtseHlYRzRxSUZWdWJHVnpjeUJ5WlhGMWFYSmxaQ0JpZVNCaGNIQnNhV05oWW14bElHeGhkeUJ2Y2lCaFozSmxaV1FnZEc4Z2FXNGdkM0pwZEdsdVp5d2djMjltZEhkaGNtVmNjbHh1S2lCa2FYTjBjbWxpZFhSbFpDQjFibVJsY2lCMGFHVWdUR2xqWlc1elpTQnBjeUJrYVhOMGNtbGlkWFJsWkNCdmJpQmhiaUJjSWtGVElFbFRYQ0lnUWtGVFNWTXNYSEpjYmlvZ1YwbFVTRTlWVkNCWFFWSlNRVTVVU1VWVElFOVNJRU5QVGtSSlZFbFBUbE1nVDBZZ1FVNVpJRXRKVGtRc0lHVnBkR2hsY2lCbGVIQnlaWE56SUc5eUlHbHRjR3hwWldRdVhISmNiaW9nVTJWbElIUm9aU0JNYVdObGJuTmxJR1p2Y2lCMGFHVWdjM0JsWTJsbWFXTWdiR0Z1WjNWaFoyVWdaMjkyWlhKdWFXNW5JSEJsY20xcGMzTnBiMjV6SUdGdVpGeHlYRzRxSUd4cGJXbDBZWFJwYjI1eklIVnVaR1Z5SUhSb1pTQk1hV05sYm5ObExseHlYRzRxS2k5Y2NseHVYSEpjYm1sdGNHOXlkQ0JUZVc1alQySnFaV04wTENCN1EyaGhibWRsVkhsd1pTd2dUMkpxWldOMFZIbHdaWDBnWm5KdmJTQW5MaTlRY205NGVVOWlhbVZqZENjN1hISmNibWx0Y0c5eWRDQkVZWFJoVDJKcVpXTjBRMmhwYkdRZ1puSnZiU0FuTGk5RVlYUmhUMkpxWldOMFEyaHBiR1FuTzF4eVhHNXBiWEJ2Y25RZ2UyUmxaWEJEYkc5dVpYMGdabkp2YlNBbkxpNHZkWFJwYkhNdmRYUnBiSE11YW5Nbk8xeHlYRzVjY2x4dUx5b3FYSEpjYmlBcUlFMWhhVzRnWlhoMFpXNXphVzl1SUdOc1lYTnpJR1p2Y2lCdlluTmxjblpsY25NZ1lXNWtJSEpsY0c5eWRHVnljeXdnZDJsMGFDQmpiMjF0YjI0Z2NISnZjR1Z5ZEdsbGN5QmhibVFnYldWMGFHOWtjeTVjY2x4dUlDb2dRMmhwYkdSeVpXNGdiV0Z1WVdkbGJXVnVkQ0JwY3lCamIyMXRiMjRnWm05eUlHOWljMlZ5ZG1WeWN5QmhibVFnY21Wd2IzSjBaWEp6TGx4eVhHNGdLaTljY2x4dVkyeGhjM01nUkdGMFlVOWlhbVZqZENCN1hISmNiaUFnTHlvZ2NISnBkbUYwWlZ4eVhHNGdJRjkyWlhKemFXOXVPaUJ1ZFcxaVpYSmNjbHh1WEhKY2JpQWdYMjkzYm1WeU9pQkllWEJsY25SNVZWSk1YSEpjYmlBZ1gzVnliRG9nVDJKcVpXTjBWVkpNWEhKY2JpQWdYM05qYUdWdFlUb2dVMk5vWlcxaFhISmNiaUFnWDJKMWN6b2dUV2x1YVVKMWMxeHlYRzRnSUY5emRHRjBkWE02SUc5dUlId2djR0YxYzJWa1hISmNiaUFnWDNONWJtTlBZbW82SUZONWJtTkVZWFJoWEhKY2JseHlYRzRnSUY5amFHbHNaSEpsYmpvZ2V5QnBaRG9nUkdGMFlVOWlhbVZqZEVOb2FXeGtJSDFjY2x4dUlDQmZZMmhwYkdSeVpXNU1hWE4wWlc1bGNuTTZJRnROYzJkTWFYTjBaVzVsY2wxY2NseHVYSEpjYmlBZ0xTMHRMV1YyWlc1MElHaGhibVJzWlhKekxTMHRMVnh5WEc0Z0lGOXZia0ZrWkVOb2FXeGtTR0Z1Wkd4bGNqb2dLR1YyWlc1MEtTQTlQaUIyYjJsa1hISmNiaUFnS2k5Y2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dRR2xuYm05eVpWeHlYRzRnSUNBcUlGTm9iM1ZzWkNCdWIzUWdZbVVnZFhObFpDQmthWEpsWTNSc2VTQmllU0JJZVhCbGNuUnBaWE11SUVsMEozTWdZMkZzYkdWa0lHSjVJSFJvWlNCVGVXNWphR1Z5SUdOeVpXRjBaU0J2Y2lCemRXSnpZM0pwWW1VZ2JXVjBhRzlrSjNOY2NseHVJQ0FnS2k5Y2NseHVJQ0F2TDJOdmJuTjBjblZqZEc5eUtITjVibU5vWlhJc0lIVnliQ3dnWTNKbFlYUmxaQ3dnY21Wd2IzSjBaWElzSUhKMWJuUnBiV1VzSUhOamFHVnRZU3dnYm1GdFpTd2dhVzVwZEdsaGJGTjBZWFIxY3l3Z2FXNXBkR2xoYkVSaGRHRXNJR05vYVd4a2NtVnVjeXdnYlhWMGRXRnNJRDBnZEhKMVpTd2djbVZ6ZFcxbFpDQTlJR1poYkhObExDQmtaWE5qY21sd2RHbHZiaXdnZEdGbmN5d2djbVZ6YjNWeVkyVnpMQ0J2WW5ObGNuWmxjbE4wYjNKaFoyVXNJSEIxWW14cFkwOWljMlZ5ZG1GMGFXOXVLU0I3WEhKY2JpQWdZMjl1YzNSeWRXTjBiM0lvYVc1d2RYUXBJSHRjY2x4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYSEpjYmx4eVhHNGdJQ0FnWm5WdVkzUnBiMjRnZEdoeWIzZE5ZVzVrWVhSdmNubFFZWEp0VFdsemMybHVaMFZ5Y205eUtIQmhjaWtnZTF4eVhHNGdJQ0FnSUNCMGFISnZkeUFuVzBSaGRHRlBZbXBsWTNSZElDY2dLeUJ3WVhJZ0t5QW5JRzFoYm1SaGRHOXllU0J3WVhKaGJXVjBaWElnYVhNZ2JXbHpjMmx1WnljN1hISmNiaUFnSUNCOVhISmNibHh5WEc0Z0lDQWdhVzV3ZFhRdWMzbHVZMmhsY2lBL0lGOTBhR2x6TGw5emVXNWphR1Z5SUQwZ2FXNXdkWFF1YzNsdVkyaGxjaUE2SUhSb2NtOTNUV0Z1WkdGMGIzSjVVR0Z5YlUxcGMzTnBibWRGY25KdmNpZ25jM2x1WTJobGNpY3BPMXh5WEc0Z0lDQWdhVzV3ZFhRdWRYSnNJRDhnSUY5MGFHbHpMbDkxY213Z1BTQnBibkIxZEM1MWNtd2dPaUIwYUhKdmQwMWhibVJoZEc5eWVWQmhjbTFOYVhOemFXNW5SWEp5YjNJb0ozVnliQ2NwTzF4eVhHNGdJQ0FnYVc1d2RYUXVZM0psWVhSbFpDQS9JRjkwYUdsekxsOWpjbVZoZEdWa0lEMGdhVzV3ZFhRdVkzSmxZWFJsWkNBNklIUm9jbTkzVFdGdVpHRjBiM0o1VUdGeWJVMXBjM05wYm1kRmNuSnZjaWduWTNKbFlYUmxaQ2NwTzF4eVhHNGdJQ0FnYVc1d2RYUXVjbVZ3YjNKMFpYSWdQeUJmZEdocGN5NWZjbVZ3YjNKMFpYSWdQU0JwYm5CMWRDNXlaWEJ2Y25SbGNpQTZJSFJvY205M1RXRnVaR0YwYjNKNVVHRnliVTFwYzNOcGJtZEZjbkp2Y2lnbmNtVndiM0owWlhJbktUdGNjbHh1SUNBZ0lHbHVjSFYwTG5KMWJuUnBiV1VnUHlCZmRHaHBjeTVmY25WdWRHbHRaU0E5SUdsdWNIVjBMbkoxYm5ScGJXVWdPaUIwYUhKdmQwMWhibVJoZEc5eWVWQmhjbTFOYVhOemFXNW5SWEp5YjNJb0ozSjFiblJwYldVbktUdGNjbHh1SUNBZ0lHbHVjSFYwTG5OamFHVnRZU0EvSUY5MGFHbHpMbDl6WTJobGJXRWdQU0JwYm5CMWRDNXpZMmhsYldFZ09pQjBhSEp2ZDAxaGJtUmhkRzl5ZVZCaGNtMU5hWE56YVc1blJYSnliM0lvSjNOamFHVnRZU2NwTzF4eVhHNGdJQ0FnYVc1d2RYUXVibUZ0WlNBL0lGOTBhR2x6TGw5dVlXMWxJRDBnYVc1d2RYUXVibUZ0WlNBNklIUm9jbTkzVFdGdVpHRjBiM0o1VUdGeWJVMXBjM05wYm1kRmNuSnZjaWduYm1GdFpTY3BPMXh5WEc1Y2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZmMzUmhkSFZ6SUQwZ2FXNXdkWFF1YzNSaGRIVnpPMXh5WEc1Y2NseHVJQ0FnSUdsbUlDaHBibkIxZEM1a1lYUmhLU0I3WEhKY2JpQWdJQ0FnSUY5MGFHbHpMbDl6ZVc1alQySnFJRDBnYm1WM0lGTjVibU5QWW1wbFkzUW9hVzV3ZFhRdVpHRjBZU2s3WEhKY2JpQWdJQ0I5SUdWc2MyVWdlMXh5WEc0Z0lDQWdJQ0JmZEdocGN5NWZjM2x1WTA5aWFpQTlJRzVsZHlCVGVXNWpUMkpxWldOMEtIdDlLVHRjY2x4dUlDQWdJSDFjY2x4dUlDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJuTWdQU0JwYm5CMWRDNWphR2xzWkhKbGJuTTdYSEpjYmx4eVhHNGdJQ0FnTHk5VVQwUlBPaUJHYjNJZ1JuVnlkR2hsY2lCVGRIVmtlVnh5WEc0Z0lDQWdYM1JvYVhNdVgyMTFkSFZoYkVGMWRHaGxiblJwWTJGMGFXOXVJRDBnYVc1d2RYUXViWFYwZFdGc08xeHlYRzVjY2x4dUlDQWdJRjkwYUdsekxsOTJaWEp6YVc5dUlEMGdNRHRjY2x4dUlDQWdJRjkwYUdsekxsOWphR2xzWkVsa0lEMGdNRHRjY2x4dUlDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJrOWlhbVZqZEhNZ1BTQjdmVHRjY2x4dUlDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJreHBjM1JsYm1WeWN5QTlJRnRkTzF4eVhHNWNjbHh1SUNBZ0lGOTBhR2x6TGw5eVpYTjFiV1ZrSUQwZ2FXNXdkWFF1Y21WemRXMWxPMXh5WEc1Y2NseHVJQ0FnSUY5MGFHbHpMbDl2ZDI1bGNpQTlJR2x1Y0hWMExuTjVibU5vWlhJdVgyOTNibVZ5TzF4eVhHNGdJQ0FnWDNSb2FYTXVYMkoxY3lBOUlHbHVjSFYwTG5ONWJtTm9aWEl1WDJKMWN6dGNjbHh1WEhKY2JpQWdJQ0JwWmlBb2FXNXdkWFF1WkdWelkzSnBjSFJwYjI0cElGOTBhR2x6TGw5a1pYTmpjbWx3ZEdsdmJpQTlJR2x1Y0hWMExtUmxjMk55YVhCMGFXOXVPMXh5WEc0Z0lDQWdhV1lnS0dsdWNIVjBMblJoWjNNcElGOTBhR2x6TGw5MFlXZHpJRDBnYVc1d2RYUXVkR0ZuY3p0Y2NseHVJQ0FnSUdsbUlDaHBibkIxZEM1eVpYTnZkWEpqWlhNcElGOTBhR2x6TGw5eVpYTnZkWEpqWlhNZ1BTQnBibkIxZEM1eVpYTnZkWEpqWlhNN1hISmNiaUFnSUNCcFppQW9hVzV3ZFhRdWIySnpaWEoyWlhKVGRHOXlZV2RsS1NCZmRHaHBjeTVmYjJKelpYSjJaWEpUZEc5eVlXZGxJRDBnYVc1d2RYUXViMkp6WlhKMlpYSlRkRzl5WVdkbE8xeHlYRzRnSUNBZ2FXWWdLR2x1Y0hWMExuQjFZbXhwWTA5aWMyVnlkbUYwYVc5dUtTQmZkR2hwY3k1ZmNIVmliR2xqVDJKelpYSjJZWFJwYjI0Z1BTQnBibkIxZEM1d2RXSnNhV05QWW5ObGNuWmhkR2x2Ymp0Y2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZmJXVjBZV1JoZEdFZ1BTQlBZbXBsWTNRdVlYTnphV2R1S0dsdWNIVjBLVHRjY2x4dUlDQWdJR1JsYkdWMFpTQmZkR2hwY3k1ZmJXVjBZV1JoZEdFdVpHRjBZVHRjY2x4dUlDQWdJR1JsYkdWMFpTQmZkR2hwY3k1ZmJXVjBZV1JoZEdFdWMzbHVZMmhsY2p0Y2NseHVJQ0FnSUdSbGJHVjBaU0JmZEdocGN5NWZiV1YwWVdSaGRHRXVZWFYwYUc5eWFYTmxPMXh5WEc1Y2NseHVJQ0FnSUM4cWFXWWdLSEpsYzNWdFpXUWdKaVlnWTJocGJHUnlaVzV6S1NCN1hISmNiaUFnSUNBZ0lGOTBhR2x6TGw5amFHbHNaRWxrSUQwZ1gzUm9hWE11WDJkbGRFeGhjM1JEYUdsc1pFbGtLQ2s3WEhKY2JpQWdJQ0FnSUdOdmJuTnZiR1V1Ykc5bktDZGJSR0YwWVNCUFltcGxZM1FnY21WemRXMWxaRjBnYkdGemRDQkRhR2xzWkVsa09pQW5MQ0JmZEdocGN5NWZZMmhwYkdSSlpDazdYSEpjYmlBZ0lDQjlLaTljY2x4dUlDQjlYSEpjYmx4eVhHNGdJRjluWlhSTVlYTjBRMmhwYkdSSlpDZ3BJSHRjY2x4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYSEpjYmx4eVhHNGdJQ0FnYkdWMElHTm9hV3hrU1dSSmJuUWdQU0F3TzF4eVhHNGdJQ0FnYkdWMElHTm9hV3hrU1dSVGRISnBibWNnUFNCZmRHaHBjeTVmYjNkdVpYSWdLeUFuSXljZ0t5QmphR2xzWkVsa1NXNTBPMXh5WEc1Y2NseHVYSEpjYmlBZ0lDQlBZbXBsWTNRdWEyVjVjeWhmZEdocGN5NWZZMmhwYkdSeVpXNXpLUzVtYVd4MFpYSW9LR3RsZVNrZ1BUNGdlMXh5WEc0Z0lDQWdJQ0JwWmlBb1gzUm9hWE11WDJOb2FXeGtjbVZ1YzF0clpYbGRMbU5vYVd4a1NXUWdQaUJqYUdsc1pFbGtVM1J5YVc1bktTQjdYSEpjYmlBZ0lDQWdJQ0FnWTJocGJHUkpaRk4wY21sdVp5QTlJRjkwYUdsekxsOWphR2xzWkhKbGJuTmJhMlY1WFM1amFHbHNaRWxrTzF4eVhHNGdJQ0FnSUNCOVhISmNiaUFnSUNCOUtUdGNjbHh1WEhKY2JpQWdJQ0J5WlhSMWNtNGdZMmhwYkdSSlpFbHVkQ0E5SUU1MWJXSmxjaWhqYUdsc1pFbGtVM1J5YVc1bkxuTndiR2wwS0Njakp5bGJNVjBwTzF4eVhHNGdJSDFjY2x4dVhISmNiaUFnWDJGc2JHOWpZWFJsVEdsemRHVnVaWEp6S0NrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQnNaWFFnWTJocGJHUkNZWE5sVlZKTUlEMGdYM1JvYVhNdVgzVnliQ0FySUNjdlkyaHBiR1J5Wlc0dkp6dGNjbHh1SUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiUkdGMFlTQlBZbXBsWTNRZ0xTQkJiR3h2WTJGMFpVeHBjM1JsYm1WeWMxMGdMU0FuTENCZmRHaHBjeTVmWTJocGJHUnlaVzV6S1R0Y2NseHVJQ0FnSUdsbUlDaGZkR2hwY3k1ZlkyaHBiR1J5Wlc1ektTQjdYSEpjYmlBZ0lDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJuTXVabTl5UldGamFDZ29ZMmhwYkdRcElEMCtJSHRjY2x4dUlDQWdJQ0FnSUNCc1pYUWdZMmhwYkdSVlVrd2dQU0JqYUdsc1pFSmhjMlZWVWt3Z0t5QmphR2xzWkR0Y2NseHVJQ0FnSUNBZ0lDQnNaWFFnYkdsemRHVnVaWElnUFNCZmRHaHBjeTVmWW5WekxtRmtaRXhwYzNSbGJtVnlLR05vYVd4a1ZWSk1MQ0FvYlhObktTQTlQaUI3WEhKY2JpQWdJQ0FnSUNBZ0lDQXZMMmxuYm05eVpTQnRjMmNnYzJWdWRDQmllU0JvYVcxelpXeG1YSEpjYmlBZ0lDQWdJQ0FnSUNCcFppQW9iWE5uTG1aeWIyMGdJVDA5SUhSb2FYTXVYMjkzYm1WeUtTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RFWVhSaFQySnFaV04wTFVOb2FXeGtjbVZ1TFZKRFZqb2dKeXdnYlhObktUdGNjbHh1SUNBZ0lDQWdJQ0FnSUNBZ2MzZHBkR05vSUNodGMyY3VkSGx3WlNrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lHTmhjMlVnSjJOeVpXRjBaU2M2SUY5MGFHbHpMbDl2YmtOb2FXeGtRM0psWVhSbEtHMXpaeWs3SUdKeVpXRnJPMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJR05oYzJVZ0oyUmxiR1YwWlNjNklHTnZibk52YkdVdWJHOW5LRzF6WnlrN0lHSnlaV0ZyTzF4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0FnSUdSbFptRjFiSFE2SUY5MGFHbHpMbDlqYUdGdVoyVkRhR2xzWkhKbGJpaHRjMmNwT3lCaWNtVmhhenRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdmVnh5WEc0Z0lDQWdJQ0FnSUNBZ2ZWeHlYRzRnSUNBZ0lDQWdJSDBwTzF4eVhHNWNjbHh1SUNBZ0lDQWdJQ0JmZEdocGN5NWZZMmhwYkdSeVpXNU1hWE4wWlc1bGNuTXVjSFZ6YUNoc2FYTjBaVzVsY2lrN1hISmNiaUFnSUNBZ0lIMHBPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdYM0psYkdWaGMyVk1hWE4wWlc1bGNuTW9LU0I3WEhKY2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh5WEc1Y2NseHVJQ0FnSUY5MGFHbHpMbDlqYUdsc1pISmxia3hwYzNSbGJtVnljeTVtYjNKRllXTm9LQ2hzYVhOMFpXNWxjaWtnUFQ0Z2UxeHlYRzRnSUNBZ0lDQnNhWE4wWlc1bGNpNXlaVzF2ZG1Vb0tUdGNjbHh1SUNBZ0lIMHBPMXh5WEc1Y2NseHVJQ0FnSUU5aWFtVmpkQzVyWlhsektGOTBhR2x6TGw5amFHbHNaSEpsYms5aWFtVmpkSE1wTG1admNrVmhZMmdvS0d0bGVTa2dQVDRnZTF4eVhHNGdJQ0FnSUNCZmRHaHBjeTVmWTJocGJHUnlaVzVQWW1wbFkzUnpXMnRsZVYwdVgzSmxiR1ZoYzJWTWFYTjBaVzVsY25Nb0tUdGNjbHh1SUNBZ0lIMHBPMXh5WEc0Z0lIMWNjbHh1WEhKY2JseHlYRzRnSUNBZ0x5b3FYSEpjYmlBZ0lDQWdLbHh5WEc0Z0lDQWdJQ292WEhKY2JpQWdJQ0J5WlhOMWJXVkRhR2xzWkhKbGJuTW9ZMmhwYkdSeVpXNXpLU0I3WEhKY2JpQWdJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEhKY2JseHlYRzRnSUNBZ0lDQnNaWFFnWTJocGJHUkpaRk4wY21sdVp5QTlJSFJvYVhNdVgyOTNibVZ5SUNzZ0p5TW5JQ3NnZEdocGN5NWZZMmhwYkdSSlpEdGNjbHh1WEhKY2JpQWdJQ0FnSUM4dmMyVjBkWEFnWTJocGJHUnlaVzV6SUdSaGRHRWdabkp2YlNCemRXSnpZM0pwY0hScGIyNWNjbHh1SUNBZ0lDQWdUMkpxWldOMExtdGxlWE1vWTJocGJHUnlaVzV6S1M1bWIzSkZZV05vS0NoamFHbHNaSEpsYmxKbGMyOTFjbU5sS1NBOVBpQjdYSEpjYmlBZ0lDQWdJQ0FnYkdWMElHTm9hV3hrY21WdUlEMGdZMmhwYkdSeVpXNXpXMk5vYVd4a2NtVnVVbVZ6YjNWeVkyVmRPMXh5WEc1Y2NseHVJQ0FnSUNBZ0lDQlBZbXBsWTNRdWEyVjVjeWhqYUdsc1pISmxiaWt1Wm05eVJXRmphQ2dvWTJocGJHUkpaQ2tnUFQ0Z2UxeHlYRzRnSUNBZ0lDQWdJQ0FnYkdWMElHTm9hV3hrU1c1d2RYUWdQU0JqYUdsc1pISmxibHRqYUdsc1pFbGtYUzUyWVd4MVpUdGNjbHh1SUNBZ0lDQWdJQ0FnSUdOdmJuTnZiR1V1Ykc5bktDZGJSR0YwWVU5aWFtVmpkQzV5WlhOMWJXVkRhR2xzWkhKbGJuTmRJRzVsZHlCRVlYUmhUMkpxWldOMFEyaHBiR1E2SUNjc0lHTm9hV3hrY21WdVVtVnpiM1Z5WTJVc0lHTm9hV3hrY21WdUxDQmphR2xzWkVsdWNIVjBLVHRjY2x4dUlDQWdJQ0FnSUNBZ0lHTm9hV3hrU1c1d2RYUXVjR0Z5Wlc1MFQySnFaV04wSUQwZ1gzUm9hWE03WEhKY2JpQWdJQ0FnSUNBZ0lDQmphR2xzWkVsdWNIVjBMbkJoY21WdWRDQTlJRjkwYUdsekxsOTFjbXc3WEhKY2JpQWdJQ0FnSUNBZ0lDQmZkR2hwY3k1ZlkyaHBiR1J5Wlc1UFltcGxZM1J6VzJOb2FXeGtTV1JkSUQwZ2JtVjNJRVJoZEdGUFltcGxZM1JEYUdsc1pDaGphR2xzWkVsdWNIVjBLVHRjY2x4dUlDQWdJQ0FnSUNBZ0lGOTBhR2x6TGw5amFHbHNaSEpsYms5aWFtVmpkSE5iWTJocGJHUkpaRjB1YVdSbGJuUnBkSGtnUFNCamFHbHNaSEpsYmx0amFHbHNaRWxrWFM1cFpHVnVkR2wwZVR0Y2NseHVYSEpjYmlBZ0lDQWdJQ0FnSUNCcFppQW9ZMmhwYkdSSlpDQStJR05vYVd4a1NXUlRkSEpwYm1jcElIdGNjbHh1SUNBZ0lDQWdJQ0FnSUNBZ1kyaHBiR1JKWkZOMGNtbHVaeUE5SUdOb2FXeGtTV1E3WEhKY2JpQWdJQ0FnSUNBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjF0RVlYUmhUMkpxWldOMFVtVndiM0owWlhJdWNtVnpkVzFsUTJocGJHUnlaVzV6WFNBdElISmxjM1Z0WldRNklDY3NJSFJvYVhNdVgyTm9hV3hrY21WdVQySnFaV04wYzF0amFHbHNaRWxrWFNrN1hISmNiaUFnSUNBZ0lDQWdmU2s3WEhKY2JpQWdJQ0FnSUgwcE8xeHlYRzVjY2x4dUlDQWdJQ0FnZEdocGN5NWZZMmhwYkdSSlpDQTlJRTUxYldKbGNpaGphR2xzWkVsa1UzUnlhVzVuTG5Od2JHbDBLQ2NqSnlsYk1WMHBPMXh5WEc0Z0lDQWdmVnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FnS2lCUFltcGxZM1FnVlZKTUlHOW1JSEpsY0c5eWRHVnlJRzl5SUc5aWMyVnlkbVZ5WEhKY2JpQWdJQ29nUUhSNWNHVWdlMDlpYW1WamRGVlNUSDFjY2x4dUlDQWdLaTljY2x4dUlDQm5aWFFnZFhKc0tDa2dleUJ5WlhSMWNtNGdkR2hwY3k1ZmRYSnNPeUI5WEhKY2JseHlYRzRnSUM4cUtseHlYRzRnSUNBcUlFOWlhbVZqZENCelkyaGxiV0VnVlZKTUlDaDBhR2x6SUdacFpXeGtJR2x6SUc1dmRDQjVaWFFnYzNSaFlteGxMQ0JoYm1RZ2FYTWdjM1ZpYzJwbFkzUWdkRzhnWTJoaGJtZGxLVnh5WEc0Z0lDQXFJRUIwZVhCbElIdFRZMmhsYldGVlVreDlYSEpjYmlBZ0lDb3ZYSEpjYmlBZ1oyVjBJSE5qYUdWdFlTZ3BJSHNnY21WMGRYSnVJSFJvYVhNdVgzTmphR1Z0WVRzZ2ZWeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQWdLaUJUZEdGMGRYTWdiMllnZEdobElISmxjRzl5ZEdWeUlHOXlJRzlpYzJWeWRtVnlJR052Ym01bFkzUnBiMjRnS0hSb2FYTWdabWxsYkdRZ2FYTWdibTkwSUhsbGRDQnpkR0ZpYkdVc0lHRnVaQ0JwY3lCemRXSnphbVZqZENCMGJ5QmphR0Z1WjJVcFhISmNiaUFnSUNvZ1FIUjVjR1VnZTFOMFlYUjFjMzBnTFNCRmJuVnRJRzltT2lCdmJpQjhJSEJoZFhObFpGeHlYRzRnSUNBcUwxeHlYRzRnSUdkbGRDQnpkR0YwZFhNb0tTQjdJSEpsZEhWeWJpQjBhR2x6TGw5emRHRjBkWE03SUgxY2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0lDb2dSR0YwWVNCemRISjFZM1IxY21VZ2RHOGdZbVVnYzNsdVkyaHliMjVwZW1Wa0xseHlYRzRnSUNBcUlFQjBlWEJsSUh0S1UwOU9mU0F0SUVwVFQwNGdjM1J5ZFdOMGRYSmxJSFJvWVhRZ2MyaHZkV3hrSUdadmJHeHZkeUIwYUdVZ1pHVm1hVzVsWkNCelkyaGxiV0VzSUdsbUlHRnVlUzVjY2x4dUlDQWdLaTljY2x4dUlDQm5aWFFnWkdGMFlTZ3BJSHNnY21WMGRYSnVJSFJvYVhNdVgzTjVibU5QWW1vdVpHRjBZVHNnZlZ4eVhHNWNjbHh1SUNBdktpcGNjbHh1SUNBZ0tpQkJiR3dnWTNKbFlYUmxaQ0JqYUdsc1pISmxiaWR6SUhOcGJtTmxJSFJvWlNCemRXSnpZM0pwY0hScGIyNHNJR1J2WlhOdUozUWdZMjl1ZEdGcGJpQmhiR3dnWTJocGJHUnlaVzRuY3lCemFXNWpaU0J5WlhCdmNuUmxjaUJqY21WaGRHbHZiaTVjY2x4dUlDQWdLaUJBZEhsd1pTQjdUMkpxWldOMFBFTm9hV3hrU1dRc0lFUmhkR0ZQWW1wbFkzUkRhR2xzWkQ1OVhISmNiaUFnSUNvdlhISmNiaUFnWjJWMElHTm9hV3hrY21WdWN5Z3BJSHNnY21WMGRYSnVJSFJvYVhNdVgyTm9hV3hrY21WdVQySnFaV04wY3pzZ2ZWeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQWdLaUJBYVdkdWIzSmxYSEpjYmlBZ0lDb3ZYSEpjYmlBZ2NHRjFjMlVvS1NCN1hISmNiaUFnSUNBdkwxUlBSRTg2SUhSb2FYTWdabVZoZEhWeVpTQnVaV1ZrY3lCdGIzSmxJR0Z1WVd4cGMyVmNjbHh1SUNBZ0lIUm9jbTkzSUNkT2IzUWdhVzF3YkdWdFpXNTBaV1FuTzF4eVhHNGdJSDFjY2x4dVhISmNiaUFnTHlvcVhISmNiaUFnSUNvZ1FHbG5ibTl5WlZ4eVhHNGdJQ0FxTDF4eVhHNGdJSEpsYzNWdFpTZ3BJSHRjY2x4dUlDQWdJQzh2VkU5RVR6b2dkR2hwY3lCbVpXRjBkWEpsSUc1bFpXUnpJRzF2Y21VZ1lXNWhiR2x6WlZ4eVhHNGdJQ0FnZEdoeWIzY2dKMDV2ZENCcGJYQnNaVzFsYm5SbFpDYzdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQWdLaUJBYVdkdWIzSmxYSEpjYmlBZ0lDb3ZYSEpjYmlBZ2MzUnZjQ2dwSUh0Y2NseHVJQ0FnSUM4dlZFOUVUem9nYzJodmRXeGtJSEpsYlc5MlpTQjBhR1VnYzNWaWMyTnlhWEIwYVc5dUlHRnVaQ0J6Wlc1a0lHMWxjM05oWjJVZ2RXNXpkV0p6WTNKcFltVS9YSEpjYmlBZ0lDQjBhSEp2ZHlBblRtOTBJR2x0Y0d4bGJXVnVkR1ZrSnp0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUM4cUtseHlYRzRnSUNBcUlFTnlaV0YwWlNCaGJtUWdZV1JrSUdFZ1JHRjBZVTlpYW1WamRFTm9hV3hrSUhSdklHRWdZMmhwYkdSeVpXNGdZMjlzYkdWamRHbHZiaTVjY2x4dUlDQWdLaUJBY0dGeVlXMGdlMU4wY21sdVozMGdZMmhwYkdSeVpXNGdMU0JEYUdsc1pISmxiaUJ1WVcxbElIZG9aWEpsSUhSb1pTQmphR2xzWkNCcGN5QmhaR1JsWkM1Y2NseHVJQ0FnS2lCQWNHRnlZVzBnZTBwVFQwNTlJR2x1YVhScFlXeEVZWFJoSUMwZ1NXNXBkR2xoYkNCa1lYUmhJRzltSUhSb1pTQmphR2xzWkZ4eVhHNGdJQ0FxSUVCd1lYSmhiU0FnZTAxbGMzTmhaMlZDYjJSNVNXUmxiblJwZEhsOUlHbGtaVzUwYVhSNUlDMGdLRzl3ZEdsdmJtRnNLU0JwWkdWdWRHbDBlU0JrWVhSaElIUnZJR0psSUdGa1pHVmtJSFJ2SUdsa1pXNTBhWFI1SUhSb1pTQjFjMlZ5SUhKbGNHOXlkR1Z5TGlCVWJ5QmlaU0IxYzJWa0lHWnZjaUJzWldkaFkza2dhV1JsYm5ScGRHbGxjeTVjY2x4dUlDQWdLaUJBY21WMGRYSnVJSHRRY205dGFYTmxQRVJoZEdGUFltcGxZM1JEYUdsc1pENTlJQzBnVW1WMGRYSnVJRkJ5YjIxcGMyVWdkRzhnWVNCdVpYY2dSR0YwWVU5aWFtVmpkRU5vYVd4a0xseHlYRzRnSUNBcUwxeHlYRzRnSUdGa1pFTm9hV3hrS0dOb2FXeGtjbVZ1TENCcGJtbDBhV0ZzUkdGMFlTd2dhV1JsYm5ScGRIa3NJR2x1Y0hWMEtTQjdYSEpjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHlYRzVjY2x4dUlDQWdJR3hsZENCamFHbHNaRWx1Y0hWMElDQTlJRTlpYW1WamRDNWhjM05wWjI0b2UzMHNJR2x1Y0hWMEtUdGNjbHh1SUNBZ0lDOHZZM0psWVhSbElHNWxkeUJqYUdsc1pDQjFibWx4ZFdVZ1NVUXNJR0poYzJWa0lHOXVJR2g1Y0dWeWRIbFZVa3hjY2x4dUlDQWdJRjkwYUdsekxsOWphR2xzWkVsa0t5czdYSEpjYmlBZ0lDQmphR2xzWkVsdWNIVjBMblZ5YkNBOUlGOTBhR2x6TGw5dmQyNWxjaUFySUNjakp5QXJJRjkwYUdsekxsOWphR2xzWkVsa08xeHlYRzRnSUNBZ2JHVjBJRzF6WjBOb2FXeGtVR0YwYUNBOUlGOTBhR2x6TGw5MWNtd2dLeUFuTDJOb2FXeGtjbVZ1THljZ0t5QmphR2xzWkhKbGJqdGNjbHh1WEhKY2JpQWdJQ0JqYUdsc1pFbHVjSFYwTG5CaGNtVnVkRTlpYW1WamRDQTlJRjkwYUdsek8xeHlYRzRnSUNBZ1kyaHBiR1JKYm5CMWRDNWtZWFJoSUQwZ2FXNXBkR2xoYkVSaGRHRTdYSEpjYmlBZ0lDQmphR2xzWkVsdWNIVjBMbkpsY0c5eWRHVnlJRDBnWDNSb2FYTXVYMjkzYm1WeU8xeHlYRzRnSUNBZ1kyaHBiR1JKYm5CMWRDNWpjbVZoZEdWa0lEMGdLRzVsZHlCRVlYUmxLUzUwYjBsVFQxTjBjbWx1WnlncE8xeHlYRzRnSUNBZ1kyaHBiR1JKYm5CMWRDNXlkVzUwYVcxbElEMGdYM1JvYVhNdVgzSjFiblJwYldVN1hISmNiaUFnSUNCamFHbHNaRWx1Y0hWMExuTmphR1Z0WVNBOUlGOTBhR2x6TGw5elkyaGxiV0U3WEhKY2JpQWdJQ0JqYUdsc1pFbHVjSFYwTG5CaGNtVnVkQ0E5SUY5MGFHbHpMblZ5YkR0Y2NseHVYSEpjYmlBZ0lDQnNaWFFnYm1WM1EyaHBiR1FnUFNCdVpYY2dSR0YwWVU5aWFtVmpkRU5vYVd4a0tHTm9hV3hrU1c1d2RYUXBPMXh5WEc1Y2NseHVYSEpjYmlBZ0lDQnNaWFFnWW05a2VWWmhiSFZsSUQwZ2JtVjNRMmhwYkdRdWJXVjBZV1JoZEdFN1hISmNiaUFnSUNCaWIyUjVWbUZzZFdVdVpHRjBZU0E5SUdsdWFYUnBZV3hFWVhSaE8xeHlYRzVjY2x4dUlDQWdJQzh2Umt4UFZ5MVBWVlE2SUhSb2FYTWdiV1Z6YzJGblpTQjNhV3hzSUdKbElITmxiblFnWkdseVpXTjBiSGtnZEc4Z1lTQnlaWE52ZFhKalpTQmphR2xzWkNCaFpHUnlaWE56T2lCTlpYTnpZV2RsUW5WelhISmNiaUFnSUNCc1pYUWdjbVZ4ZFdWemRFMXpaeUE5SUh0Y2NseHVJQ0FnSUNBZ2RIbHdaVG9nSjJOeVpXRjBaU2NzSUdaeWIyMDZJRjkwYUdsekxsOXZkMjVsY2l3Z2RHODZJRzF6WjBOb2FXeGtVR0YwYUN4Y2NseHVJQ0FnSUNBZ1ltOWtlVG9nZXlCeVpYTnZkWEpqWlRvZ1kyaHBiR1JKYm5CMWRDNTFjbXdzSUhaaGJIVmxPaUJpYjJSNVZtRnNkV1VnZlZ4eVhHNGdJQ0FnZlR0Y2NseHVYSEpjYmlBZ0lDQnBaaUFvYVdSbGJuUnBkSGtwSUNBZ0lDQWdleUJ5WlhGMVpYTjBUWE5uTG1KdlpIa3VhV1JsYm5ScGRIa2dQU0JwWkdWdWRHbDBlVHNnZlZ4eVhHNWNjbHh1SUNBZ0lDOHZWRTlFVHpvZ1JtOXlJRVoxY25Sb1pYSWdVM1IxWkhsY2NseHVJQ0FnSUdsbUlDZ2hYM1JvYVhNdVgyMTFkSFZoYkVGMWRHaGxiblJwWTJGMGFXOXVLU0J5WlhGMVpYTjBUWE5uTG1KdlpIa3ViWFYwZFdGc1FYVjBhR1Z1ZEdsallYUnBiMjRnUFNCZmRHaHBjeTVmYlhWMGRXRnNRWFYwYUdWdWRHbGpZWFJwYjI0N1hISmNibHh5WEc0Z0lDQWdZMjl1YzI5c1pTNXNiMmNvSjF0RVlYUmhUMkpxWldOMExtRmtaRU5vYVd4a1hTQmhaR1JsWkNBbkxDQnVaWGREYUdsc1pDazdYSEpjYmx4eVhHNGdJQ0FnTHk5eVpYUjFjbTV6SUhCeWIyMXBjMlVzSUdsdUlIUm9aU0JtZFhSMWNtVXNJSFJvWlNCQlVFa2diV0Y1SUdOb1lXNW5aU0IwYnlCaGMzbHVZMmh5YjI1dmRYTWdZMkZzYkZ4eVhHNGdJQ0FnY21WMGRYSnVJRzVsZHlCUWNtOXRhWE5sS0NoeVpYTnZiSFpsS1NBOVBpQjdYSEpjYmlBZ0lDQWdJR3hsZENCdGMyZEpaQ0E5SUY5MGFHbHpMbDlpZFhNdWNHOXpkRTFsYzNOaFoyVW9jbVZ4ZFdWemRFMXpaeWs3WEhKY2JseHlYRzRnSUNBZ0lDQXZMMk5vYVd4a1NXNXdkWFF1YlhOblNXUWdQU0J0YzJkSlpEdGNjbHh1SUNBZ0lDQWdibVYzUTJocGJHUXViMjVEYUdGdVoyVW9LR1YyWlc1MEtTQTlQaUI3WEhKY2JpQWdJQ0FnSUNBZ1gzUm9hWE11WDI5dVEyaGhibWRsS0dWMlpXNTBMQ0I3SUhCaGRHZzZJRzF6WjBOb2FXeGtVR0YwYUN3Z1kyaHBiR1JKWkRvZ1kyaHBiR1JKYm5CMWRDNTFjbXdnZlNrN1hISmNiaUFnSUNBZ0lIMHBPMXh5WEc1Y2NseHVJQ0FnSUNBZ1gzUm9hWE11WDJOb2FXeGtjbVZ1VDJKcVpXTjBjMXRqYUdsc1pFbHVjSFYwTG5WeWJGMGdQU0J1WlhkRGFHbHNaRHRjY2x4dVhISmNiaUFnSUNBZ0lISmxjMjlzZG1Vb2JtVjNRMmhwYkdRcE8xeHlYRzRnSUNBZ2ZTazdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQWdLaUJUWlhSMWNDQjBhR1VnWTJGc2JHSmhZMnNnZEc4Z2NISnZZMlZ6Y3lCamNtVmhkR1VnWVc1a0lHUmxiR1YwWlNCdlppQmphR2xzWkhKbGJuTXVYSEpjYmlBZ0lDb2dRSEJoY21GdElIdG1kVzVqZEdsdmJpaGxkbVZ1ZERvZ1RYTm5SWFpsYm5RcGZTQmpZV3hzWW1GamExeHlYRzRnSUNBcUwxeHlYRzRnSUc5dVFXUmtRMmhwYkdRb1kyRnNiR0poWTJzcElIdGNjbHh1SUNBZ0lIUm9hWE11WDI5dVFXUmtRMmhwYkdSeVpXNUlZVzVrYkdWeUlEMGdZMkZzYkdKaFkyczdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQXZMMFpNVDFjdFNVNDZJRzFsYzNOaFoyVWdjbVZqWldsMlpXUWdabkp2YlNCaElISmxiVzkwWlNCRVlYUmhUMkpxWldOMElDMCtJR0ZrWkVOb2FXeGtYSEpjYmlBZ1gyOXVRMmhwYkdSRGNtVmhkR1VvYlhObktTQjdYSEpjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHlYRzRnSUNBZ2JHVjBJR05vYVd4a1NXNXdkWFFnUFNCa1pXVndRMnh2Ym1Vb2JYTm5MbUp2WkhrdWRtRnNkV1VwTzF4eVhHNGdJQ0FnTHk5amFHbHNaRWx1Y0hWMExuVnliQ0E5SUcxelp5NWliMlI1TG5KbGMyOTFjbU5sTzF4eVhHNGdJQ0FnWTJocGJHUkpibkIxZEM1d1lYSmxiblJQWW1wbFkzUWdQU0JmZEdocGN6dGNjbHh1SUNBZ0lDOHZZMmhwYkdSSmJuQjFkQzV3WVhKbGJuUWdQU0JmZEdocGN5NWZkWEpzTzF4eVhHNWNjbHh1SUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiUkdGMFlVOWlhbVZqZEM1ZmIyNURhR2xzWkVOeVpXRjBaVjBnY21WalpXbDJaV1JDZVNBbklDc2dYM1JvYVhNdVgyOTNibVZ5SUNzZ0p5QTZJQ2NzSUcxelp5azdYSEpjYmlBZ0lDQnNaWFFnYm1WM1EyaHBiR1FnUFNCdVpYY2dSR0YwWVU5aWFtVmpkRU5vYVd4a0tHTm9hV3hrU1c1d2RYUXBPMXh5WEc0Z0lDQWdYM1JvYVhNdVgyTm9hV3hrY21WdVQySnFaV04wYzF0amFHbHNaRWx1Y0hWMExuVnliRjBnUFNCdVpYZERhR2xzWkR0Y2NseHVYSEpjYmlBZ0lDQXZMM1J2Wkc4NklISmxiVzkyWlNCeVpYTndiMjV6WlNCaVpXeHZkMXh5WEc0Z0lDQWdjMlYwVkdsdFpXOTFkQ2dvS1NBOVBpQjdYSEpjYmlBZ0lDQWdJQzh2Umt4UFZ5MVBWVlE2SUhkcGJHd2dabXh2ZHlCMGJ5QkVZWFJoVDJKcVpXTjBRMmhwYkdRZ0xUNGdYMjl1VW1WemNHOXVjMlZjY2x4dUlDQWdJQ0FnWDNSb2FYTXVYMkoxY3k1d2IzTjBUV1Z6YzJGblpTaDdYSEpjYmlBZ0lDQWdJQ0FnYVdRNklHMXpaeTVwWkN3Z2RIbHdaVG9nSjNKbGMzQnZibk5sSnl3Z1puSnZiVG9nYlhObkxuUnZMQ0IwYnpvZ2JYTm5MbVp5YjIwc1hISmNiaUFnSUNBZ0lDQWdZbTlrZVRvZ2V5QmpiMlJsT2lBeU1EQXNJSE52ZFhKalpUb2dYM1JvYVhNdVgyOTNibVZ5SUgxY2NseHVJQ0FnSUNBZ2ZTazdYSEpjYmlBZ0lDQjlLVHRjY2x4dVhISmNiaUFnSUNCc1pYUWdaWFpsYm5RZ1BTQjdYSEpjYmlBZ0lDQWdJSFI1Y0dVNklHMXpaeTUwZVhCbExGeHlYRzRnSUNBZ0lDQm1jbTl0T2lCdGMyY3Vabkp2YlN4Y2NseHVJQ0FnSUNBZ2RYSnNPaUJ0YzJjdWRHOHNYSEpjYmlBZ0lDQWdJSFpoYkhWbE9pQnRjMmN1WW05a2VTNTJZV3gxWlM1a1lYUmhMRnh5WEc0Z0lDQWdJQ0JqYUdsc1pFbGtPaUJqYUdsc1pFbHVjSFYwTG5WeWJDeGNjbHh1SUNBZ0lDQWdhV1JsYm5ScGRIazZJRzF6Wnk1aWIyUjVMbWxrWlc1MGFYUjVYSEpjYmlBZ0lDQjlPMXh5WEc1Y2NseHVJQ0FnSUdsbUlDaGZkR2hwY3k1ZmIyNUJaR1JEYUdsc1pISmxia2hoYm1Sc1pYSXBJSHRjY2x4dUlDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0owRkVSQzFEU0VsTVJGSkZUaTFGVmtWT1ZEb2dKeXdnWlhabGJuUXBPMXh5WEc0Z0lDQWdJQ0JmZEdocGN5NWZiMjVCWkdSRGFHbHNaSEpsYmtoaGJtUnNaWElvWlhabGJuUXBPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdMeTl6Wlc1a0lHUmxiSFJoSUcxbGMzTmhaMlZ6SUhSdklITjFZbk5qY21sd2RHbHZibk5jY2x4dUlDQmZiMjVEYUdGdVoyVW9aWFpsYm5Rc0lHTm9hV3hrU1c1bWJ5a2dlMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1WEhKY2JpQWdJQ0JmZEdocGN5NWZkbVZ5YzJsdmJpc3JPMXh5WEc1Y2NseHVJQ0FnSUdsbUlDaGZkR2hwY3k1ZmMzUmhkSFZ6SUQwOVBTQW5iR2wyWlNjcElIdGNjbHh1SUNBZ0lDQWdMeTlHVEU5WExVOVZWRG9nZEdocGN5QnRaWE56WVdkbElIZHBiR3dnWW1VZ2MyVnVkQ0JrYVhKbFkzUnNlU0IwYnlCaElISmxjMjkxY21ObElHTm9ZVzVuWlhNZ1lXUmtjbVZ6Y3pvZ1RXVnpjMkZuWlVKMWMxeHlYRzRnSUNBZ0lDQnNaWFFnWTJoaGJtZGxUWE5uSUQwZ2UxeHlYRzRnSUNBZ0lDQWdJSFI1Y0dVNklDZDFjR1JoZEdVbkxDQm1jbTl0T2lCZmRHaHBjeTVmZFhKc0xDQjBiem9nWDNSb2FYTXVYM1Z5YkNBcklDY3ZZMmhoYm1kbGN5Y3NYSEpjYmlBZ0lDQWdJQ0FnWW05a2VUb2dleUIyWlhKemFXOXVPaUJmZEdocGN5NWZkbVZ5YzJsdmJpd2djMjkxY21ObE9pQmZkR2hwY3k1ZmIzZHVaWElzSUdGMGRISnBZblYwWlRvZ1pYWmxiblF1Wm1sbGJHUWdmVnh5WEc0Z0lDQWdJQ0I5TzF4eVhHNWNjbHh1SUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvSjF0RVlYUmhUMkpxWldOMElDMGdYMjl1UTJoaGJtZGxYU0F0SUNjc0lHVjJaVzUwTENCamFHbHNaRWx1Wm04c0lHTm9ZVzVuWlUxelp5azdYSEpjYmx4eVhHNGdJQ0FnSUNCcFppQW9aWFpsYm5RdWIxUjVjR1VnUFQwOUlFOWlhbVZqZEZSNWNHVXVUMEpLUlVOVUtTQjdYSEpjYmlBZ0lDQWdJQ0FnYVdZZ0tHVjJaVzUwTG1OVWVYQmxJQ0U5UFNCRGFHRnVaMlZVZVhCbExsSkZUVTlXUlNrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnWTJoaGJtZGxUWE5uTG1KdlpIa3VkbUZzZFdVZ1BTQmxkbVZ1ZEM1a1lYUmhPMXh5WEc0Z0lDQWdJQ0FnSUgxY2NseHVJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2NseHVJQ0FnSUNBZ0lDQmphR0Z1WjJWTmMyY3VZbTlrZVM1aGRIUnlhV0oxZEdWVWVYQmxJRDBnWlhabGJuUXViMVI1Y0dVN1hISmNiaUFnSUNBZ0lDQWdZMmhoYm1kbFRYTm5MbUp2WkhrdWRtRnNkV1VnUFNCbGRtVnVkQzVrWVhSaE8xeHlYRzRnSUNBZ0lDQWdJR2xtSUNobGRtVnVkQzVqVkhsd1pTQWhQVDBnUTJoaGJtZGxWSGx3WlM1VlVFUkJWRVVwSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJR05vWVc1blpVMXpaeTVpYjJSNUxtOXdaWEpoZEdsdmJpQTlJR1YyWlc1MExtTlVlWEJsTzF4eVhHNGdJQ0FnSUNBZ0lIMWNjbHh1SUNBZ0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUNBZ0x5OWphR2xzWkVsdVptOGdiWFZ6ZENCb1lYWmxJQ2h3WVhSb0xDQmphR2xzWkVsa0tWeHlYRzRnSUNBZ0lDQnBaaUFvWTJocGJHUkpibVp2S1NCN1hISmNiaUFnSUNBZ0lDQWdZMmhoYm1kbFRYTm5MblJ2SUQwZ1kyaHBiR1JKYm1adkxuQmhkR2c3WEhKY2JpQWdJQ0FnSUNBZ1kyaGhibWRsVFhObkxtSnZaSGt1Y21WemIzVnlZMlVnUFNCamFHbHNaRWx1Wm04dVkyaHBiR1JKWkR0Y2NseHVJQ0FnSUNBZ2ZWeHlYRzVjY2x4dUlDQWdJQ0FnTHk5VVQwUlBPaUJHYjNJZ1JuVnlkR2hsY2lCVGRIVmtlVnh5WEc0Z0lDQWdJQ0JwWmlBb0lWOTBhR2x6TGw5dGRYUjFZV3hCZFhSb1pXNTBhV05oZEdsdmJpa2dZMmhoYm1kbFRYTm5MbUp2WkhrdWJYVjBkV0ZzUVhWMGFHVnVkR2xqWVhScGIyNGdQU0JmZEdocGN5NWZiWFYwZFdGc1FYVjBhR1Z1ZEdsallYUnBiMjQ3WEhKY2JseHlYRzRnSUNBZ0lDQmZkR2hwY3k1ZlluVnpMbkJ2YzNSTlpYTnpZV2RsS0dOb1lXNW5aVTF6WnlrN1hISmNiaUFnSUNCOVhISmNiaUFnZlZ4eVhHNWNjbHh1SUNBdkwwWk1UMWN0U1U0NklHUmxiSFJoSUcxbGMzTmhaMlVnY21WalpXbDJaV1FnWm5KdmJTQmhJSEpsYlc5MFpTQkVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSWdiM0lnUkdGMFlVOWlhbVZqZEVOb2FXeGtJSGRvWlc0Z1kyaGhibWRwYm1jZ1pHRjBZVnh5WEc0Z0lGOWphR0Z1WjJWUFltcGxZM1FvYzNsdVkwOWlhaXdnYlhObktTQjdYSEpjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHlYRzVjY2x4dUlDQWdJQzh2VkU5RVR6b2dkWEJrWVhSbElIWmxjbk5wYjI0Z1AxeHlYRzRnSUNBZ0x5OW9iM2NnZEc4Z2FHRnVaR3hsSUdGdUlHbHVZMjl5Y21WamRDQjJaWEp6YVc5dUlEOGdSWGhoYlhCc1pUb2djbVZqWldsMlpTQmhJSFpsY25OcGIyNGdNeUIzYUdWdUlIUm9aU0J2WW5ObGNuWmxjaUJwY3lCcGJpQjJaWEp6YVc5dUlERXNJSGRvWlhKbElHbHpJSFJvWlNCMlpYSnphVzl1SURJZ1AxeHlYRzRnSUNBZ0x5OTNhV3hzSUhkbElHNWxaV1FnZEc4Z1kyOXVabWx5YlNCMGFHVWdjbVZqWlhCMGFXOXVJRDljY2x4dUlDQWdJR2xtSUNoZmRHaHBjeTVmZG1WeWMybHZiaUFySURFZ1BUMDlJRzF6Wnk1aWIyUjVMblpsY25OcGIyNHBJSHRjY2x4dUlDQWdJQ0FnWDNSb2FYTXVYM1psY25OcGIyNHJLenRjY2x4dUlDQWdJQ0FnYkdWMElIQmhkR2dnUFNCdGMyY3VZbTlrZVM1aGRIUnlhV0oxZEdVN1hISmNiaUFnSUNBZ0lHeGxkQ0IyWVd4MVpTQTlJR1JsWlhCRGJHOXVaU2h0YzJjdVltOWtlUzUyWVd4MVpTazdYSEpjYmlBZ0lDQWdJR3hsZENCbWFXNWtVbVZ6ZFd4MElEMGdjM2x1WTA5aWFpNW1hVzVrUW1WbWIzSmxLSEJoZEdncE8xeHlYRzVjY2x4dUlDQWdJQ0FnYVdZZ0tHMXpaeTVpYjJSNUxtRjBkSEpwWW5WMFpWUjVjR1VnUFQwOUlFOWlhbVZqZEZSNWNHVXVRVkpTUVZrcElIdGNjbHh1SUNBZ0lDQWdJQ0JwWmlBb2JYTm5MbUp2WkhrdWIzQmxjbUYwYVc5dUlEMDlQU0JEYUdGdVoyVlVlWEJsTGtGRVJDa2dlMXh5WEc0Z0lDQWdJQ0FnSUNBZ2JHVjBJR0Z5Y2lBOUlHWnBibVJTWlhOMWJIUXViMkpxTzF4eVhHNGdJQ0FnSUNBZ0lDQWdiR1YwSUdsdVpHVjRJRDBnWm1sdVpGSmxjM1ZzZEM1c1lYTjBPMXh5WEc0Z0lDQWdJQ0FnSUNBZ1FYSnlZWGt1Y0hKdmRHOTBlWEJsTG5Od2JHbGpaUzVoY0hCc2VTaGhjbklzSUZ0cGJtUmxlQ3dnTUYwdVkyOXVZMkYwS0haaGJIVmxLU2s3WEhKY2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUdsbUlDaHRjMmN1WW05a2VTNXZjR1Z5WVhScGIyNGdQVDA5SUVOb1lXNW5aVlI1Y0dVdVVrVk5UMVpGS1NCN1hISmNiaUFnSUNBZ0lDQWdJQ0JzWlhRZ1lYSnlJRDBnWm1sdVpGSmxjM1ZzZEM1dlltbzdYSEpjYmlBZ0lDQWdJQ0FnSUNCc1pYUWdhVzVrWlhnZ1BTQm1hVzVrVW1WemRXeDBMbXhoYzNRN1hISmNiaUFnSUNBZ0lDQWdJQ0JoY25JdWMzQnNhV05sS0dsdVpHVjRMQ0IyWVd4MVpTazdYSEpjYmlBZ0lDQWdJQ0FnZlNCbGJITmxJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lHWnBibVJTWlhOMWJIUXViMkpxVzJacGJtUlNaWE4xYkhRdWJHRnpkRjBnUFNCMllXeDFaVHNnTHk4Z1ZWQkVRVlJGWEhKY2JpQWdJQ0FnSUNBZ2ZWeHlYRzRnSUNBZ0lDQjlJR1ZzYzJVZ2UxeHlYRzRnSUNBZ0lDQWdJR2xtSUNodGMyY3VZbTlrZVM1MllXeDFaU2tnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdabWx1WkZKbGMzVnNkQzV2WW1wYlptbHVaRkpsYzNWc2RDNXNZWE4wWFNBOUlIWmhiSFZsT3lBdkx5QlZVRVJCVkVVZ2IzSWdRVVJFWEhKY2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJR1JsYkdWMFpTQm1hVzVrVW1WemRXeDBMbTlpYWx0bWFXNWtVbVZ6ZFd4MExteGhjM1JkT3lBdkx5QlNSVTFQVmtWY2NseHVJQ0FnSUNBZ0lDQjlYSEpjYmlBZ0lDQWdJSDFjY2x4dUlDQWdJSDBnWld4elpTQjdYSEpjYmlBZ0lDQWdJQzh2VkU5RVR6b2dhRzkzSUhSdklHaGhibVJzWlNCMWJuTjVibU5vY205dWFYcGxaQ0IyWlhKemFXOXVjejljY2x4dUlDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0oxVk9VMWxPUTBoU1QwNUpXa1ZFSUZaRlVsTkpUMDQ2SUNoa1lYUmhJRDArSUNjZ0t5QmZkR2hwY3k1ZmRtVnljMmx2YmlBcklDY3NJRzF6WnlBOVBpQW5JQ3NnYlhObkxtSnZaSGt1ZG1WeWMybHZiaUFySUNjcEp5azdYSEpjYmlBZ0lDQjlYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQXZMMFpNVDFjdFNVNDZJRzFsYzNOaFoyVWdjbVZqWldsMlpXUWdabkp2YlNCaElISmxiVzkwWlNCRVlYUmhUMkpxWldOMFEyaHBiR1FnZDJobGJpQmphR0Z1WjJsdVp5QmtZWFJoWEhKY2JpQWdYMk5vWVc1blpVTm9hV3hrY21WdUtHMXpaeWtnZTF4eVhHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjY2x4dUlDQWdJR052Ym5OdmJHVXViRzluS0NkRGFHRnVaMlVnWTJocGJHUnlaVzQ2SUNjc0lGOTBhR2x6TGw5dmQyNWxjaXdnYlhObktUdGNjbHh1WEhKY2JpQWdJQ0JzWlhRZ1kyaHBiR1JKWkNBOUlHMXpaeTVpYjJSNUxuSmxjMjkxY21ObE8xeHlYRzRnSUNBZ2JHVjBJR05vYVd4a2NtVnVJRDBnWDNSb2FYTXVYMk5vYVd4a2NtVnVUMkpxWldOMGMxdGphR2xzWkVsa1hUdGNjbHh1WEhKY2JpQWdJQ0JwWmlBb1kyaHBiR1J5Wlc0cElIdGNjbHh1SUNBZ0lDQWdYM1JvYVhNdVgyTm9ZVzVuWlU5aWFtVmpkQ2hqYUdsc1pISmxiaTVmYzNsdVkwOWlhaXdnYlhObktUdGNjbHh1SUNBZ0lIMGdaV3h6WlNCN1hISmNiaUFnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RPYnlCamFHbHNaSEpsYmlCbWIzVnVaQ0JtYjNJNklDY3NJR05vYVd4a1NXUXBPMXh5WEc0Z0lDQWdmVnh5WEc0Z0lIMWNjbHh1WEhKY2JuMWNjbHh1WEhKY2JtVjRjRzl5ZENCa1pXWmhkV3gwSUVSaGRHRlBZbXBsWTNRN1hISmNibHh1WEc1Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU0lDOHZYRzR2THlBdUwzTnlZeTl6ZVc1amFHVnlMMFJoZEdGUFltcGxZM1F1YW5NaUxDSnBiWEJ2Y25RZ0ozQnliM2g1TFc5aWMyVnlkbVVuTzF4eVhHNXBiWEJ2Y25RZ2UzQmhjbk5sUVhSMGNtbGlkWFJsYzMwZ1puSnZiU0FuTGk0dmRYUnBiSE12ZFhScGJITW5PMXh5WEc1Y2NseHVZMjl1YzNRZ2IySnFaV04wVkhsd1pTQTlJSHRCVWxKQldUb2dKMXR2WW1wbFkzUWdRWEp5WVhsZEp5d2dUMEpLUlVOVU9pQW5XMjlpYW1WamRDQlBZbXBsWTNSZEp5QjlPMXh5WEc1Y2NseHVMeW9xWEhKY2JpQXFJRUJoWTJObGMzTWdjSEpwZG1GMFpWeHlYRzRnS2lCTllXbHVJR05zWVhOeklIUm9ZWFFnYldGcGJuUmhhVzV6SUdFZ1NsTlBUaUJ2WW1wbFkzUXNJR0Z1WkNCdlluTmxjblpsY3lCamFHRnVaMlZ6SUdsdUlIUm9hWE1nYjJKcVpXTjBMQ0J5WldOMWNuTnBkbVZzZVM1Y2NseHVJQ29nU1c1MFpYSnVZV3dnYjJKcVpXTjBjeUJoYm1RZ1lYSnlZWGx6SUdGeVpTQmhiSE52SUc5aWMyVnlkbVZrTGx4eVhHNGdLaTljY2x4dVkyeGhjM01nVTNsdVkwOWlhbVZqZENCN1hISmNibHh5WEc0Z0lHTnZibk4wY25WamRHOXlLR2x1YVhScFlXeEVZWFJoS1NCN1hISmNiaUFnSUNCc1pYUWdYM1JvYVhNZ1BTQjBhR2x6TzF4eVhHNWNjbHh1SUNBZ0lGOTBhR2x6TGw5dlluTmxjblpsY25NZ1BTQmJYVHRjY2x4dUlDQWdJRjkwYUdsekxsOW1hV3gwWlhKeklEMGdlMzA3WEhKY2JseHlYRzRnSUNBZ2RHaHBjeTVmWkdGMFlTQTlJR2x1YVhScFlXeEVZWFJoSUh4OElIdDlPMXh5WEc1Y2NseHVJQ0FnSUhSb2FYTXVYMmx1ZEdWeWJtRnNUMkp6WlhKMlpTaDBhR2x6TGw5a1lYUmhLVHRjY2x4dUlDQjlYSEpjYmx4eVhHNGdJR2RsZENCa1lYUmhLQ2tnZXlCeVpYUjFjbTRnZEdocGN5NWZaR0YwWVRzZ2ZWeHlYRzVjY2x4dUlDQnZZbk5sY25abEtHTmhiR3hpWVdOcktTQjdYSEpjYmlBZ0lDQjBhR2x6TGw5dlluTmxjblpsY25NdWNIVnphQ2hqWVd4c1ltRmpheWs3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0JtYVc1a0tIQmhkR2dwSUh0Y2NseHVJQ0FnSUd4bGRDQnNhWE4wSUQwZ2NHRnljMlZCZEhSeWFXSjFkR1Z6S0hCaGRHZ3BPMXh5WEc1Y2NseHVJQ0FnSUhKbGRIVnliaUIwYUdsekxsOW1hVzVrVjJsMGFGTndiR2wwS0d4cGMzUXBPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdabWx1WkVKbFptOXlaU2h3WVhSb0tTQjdYSEpjYmlBZ0lDQnNaWFFnY21WemRXeDBJRDBnZTMwN1hISmNiaUFnSUNCc1pYUWdiR2x6ZENBOUlIQmhjbk5sUVhSMGNtbGlkWFJsY3lod1lYUm9LVHRjY2x4dUlDQWdJSEpsYzNWc2RDNXNZWE4wSUQwZ2JHbHpkQzV3YjNBb0tUdGNjbHh1SUNBZ0lISmxjM1ZzZEM1dlltb2dQU0IwYUdsekxsOW1hVzVrVjJsMGFGTndiR2wwS0d4cGMzUXBPMXh5WEc1Y2NseHVJQ0FnSUhKbGRIVnliaUJ5WlhOMWJIUTdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQmZabWx1WkZkcGRHaFRjR3hwZENoc2FYTjBLU0I3WEhKY2JpQWdJQ0JzWlhRZ2IySnFJRDBnZEdocGN5NWZaR0YwWVR0Y2NseHVJQ0FnSUd4cGMzUXVabTl5UldGamFDZ29kbUZzZFdVcElEMCtJSHRjY2x4dUlDQWdJQ0FnYjJKcUlEMGdiMkpxVzNaaGJIVmxYVHRjY2x4dUlDQWdJSDBwTzF4eVhHNWNjbHh1SUNBZ0lISmxkSFZ5YmlCdlltbzdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQmZhVzUwWlhKdVlXeFBZbk5sY25abEtHOWlhbVZqZENrZ2UxeHlYRzVjY2x4dUlDQWdJR3hsZENCb1lXNWtiR1Z5SUQwZ0tHTm9ZVzVuWlhObGRDa2dQVDRnZTF4eVhHNWNjbHh1SUNBZ0lDQWdZMmhoYm1kbGMyVjBMbVYyWlhKNUtDaGphR0Z1WjJVcElEMCtJSHRjY2x4dUlDQWdJQ0FnSUNCMGFHbHpMbDl2YmtOb1lXNW5aWE1vWTJoaGJtZGxLVHRjY2x4dUlDQWdJQ0FnZlNrN1hISmNibHh5WEc0Z0lDQWdmVHRjY2x4dVhISmNiaUFnSUNCMGFHbHpMbDlrWVhSaElEMGdUMkpxWldOMExtUmxaWEJQWW5ObGNuWmxLRzlpYW1WamRDd2dhR0Z1Wkd4bGNpazdYSEpjYmx4eVhHNGdJSDFjY2x4dVhISmNiaUFnWDJacGNtVkZkbVZ1ZENobGRtVnVkQ2tnZTF4eVhHNGdJQ0FnZEdocGN5NWZiMkp6WlhKMlpYSnpMbVp2Y2tWaFkyZ29LR05oYkd4aVlXTnJLU0E5UGlCN1hISmNiaUFnSUNBZ0lHTmhiR3hpWVdOcktHVjJaVzUwS1R0Y2NseHVJQ0FnSUgwcE8xeHlYRzRnSUgxY2NseHVYSEpjYmlBZ1gyOXVRMmhoYm1kbGN5aGphR0Z1WjJVcElIdGNjbHh1WEhKY2JpQWdJQ0JzWlhRZ2IySnFJRDBnWTJoaGJtZGxMbTlpYW1WamREdGNjbHh1SUNBZ0lHeGxkQ0J2WW1wVWVYQmxPMXh5WEc1Y2NseHVJQ0FnSUdsbUlDaHZZbW91WTI5dWMzUnlkV04wYjNJZ1BUMDlJRTlpYW1WamRDa2dlMXh5WEc0Z0lDQWdJQ0J2WW1wVWVYQmxJRDBnVDJKcVpXTjBWSGx3WlM1UFFrcEZRMVE3WEhKY2JpQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ2FXWWdLRzlpYWk1amIyNXpkSEoxWTNSdmNpQTlQVDBnUVhKeVlYa3BJSHRjY2x4dUlDQWdJQ0FnYjJKcVZIbHdaU0E5SUU5aWFtVmpkRlI1Y0dVdVFWSlNRVms3WEhKY2JpQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ2JHVjBJR1pwWld4a1UzUnlhVzVuSUQwZ1kyaGhibWRsTG10bGVYQmhkR2c3WEhKY2JseHlYRzRnSUNBZ0x5OGdZMjl1YzI5c1pTNXNiMmNvSjBacFpXeGtPaWNzSUdacFpXeGtVM1J5YVc1bktUdGNjbHh1SUNBZ0lDOHZJR052Ym5OdmJHVXViRzluS0NkMGVYQmxPaWNzSUdOb1lXNW5aUzUwZVhCbEtUdGNjbHh1WEhKY2JpQWdJQ0F2TDJ4bGRDQnZiR1JXWVd4MVpTQTlJR05vWVc1blpTNXZiR1JXWVd4MVpUdGNjbHh1SUNBZ0lHeGxkQ0J1WlhkV1lXeDFaU0E5SUc5aWFsdGphR0Z1WjJVdWJtRnRaVjA3WEhKY2JseHlYRzRnSUNBZ0x5OGdZMjl1YzI5c1pTNXBibVp2S0dOb1lXNW5aUzUwZVhCbElDc2dKeUI4SUVacFpXeGtPaUFuSUNzZ1ptbGxiR1JUZEhKcGJtY2dLeUFuSUh3Z1RtVjNJRlpoYkhWbE9pY3NJRXBUVDA0dWMzUnlhVzVuYVdaNUtHNWxkMVpoYkhWbEtTd2dabWxsYkdSVGRISnBibWN1YVc1amJIVmtaWE1vSjJ4bGJtZDBhQ2NwS1R0Y2NseHVYSEpjYmlBZ0lDQnBaaUFvWTJoaGJtZGxMblI1Y0dVZ1BUMDlJQ2QxY0dSaGRHVW5JQ1ltSUNGbWFXVnNaRk4wY21sdVp5NXBibU5zZFdSbGN5Z25MbXhsYm1kMGFDY3BLU0I3WEhKY2JpQWdJQ0FnSUhSb2FYTXVYMlpwY21WRmRtVnVkQ2g3WEhKY2JpQWdJQ0FnSUNBZ1kxUjVjR1U2SUVOb1lXNW5aVlI1Y0dVdVZWQkVRVlJGTEZ4eVhHNGdJQ0FnSUNBZ0lHOVVlWEJsT2lCdlltcFVlWEJsTEZ4eVhHNGdJQ0FnSUNBZ0lHWnBaV3hrT2lCbWFXVnNaRk4wY21sdVp5eGNjbHh1SUNBZ0lDQWdJQ0JrWVhSaE9pQnVaWGRXWVd4MVpWeHlYRzRnSUNBZ0lDQjlLVHRjY2x4dUlDQWdJSDFjY2x4dVhISmNiaUFnSUNCcFppQW9ZMmhoYm1kbExuUjVjR1VnUFQwOUlDZGhaR1FuS1NCN1hISmNiaUFnSUNBZ0lIUm9hWE11WDJacGNtVkZkbVZ1ZENoN1hISmNiaUFnSUNBZ0lDQWdZMVI1Y0dVNklFTm9ZVzVuWlZSNWNHVXVRVVJFTEZ4eVhHNGdJQ0FnSUNBZ0lHOVVlWEJsT2lCdlltcFVlWEJsTEZ4eVhHNGdJQ0FnSUNBZ0lHWnBaV3hrT2lCbWFXVnNaRk4wY21sdVp5eGNjbHh1SUNBZ0lDQWdJQ0JrWVhSaE9pQnVaWGRXWVd4MVpWeHlYRzRnSUNBZ0lDQjlLVHRjY2x4dUlDQWdJSDFjY2x4dVhISmNiaUFnSUNCcFppQW9ZMmhoYm1kbExuUjVjR1VnUFQwOUlDZGtaV3hsZEdVbktTQjdYSEpjYmlBZ0lDQWdJSFJvYVhNdVgyWnBjbVZGZG1WdWRDaDdYSEpjYmlBZ0lDQWdJQ0FnWTFSNWNHVTZJRU5vWVc1blpWUjVjR1V1VWtWTlQxWkZMRnh5WEc0Z0lDQWdJQ0FnSUc5VWVYQmxPaUJ2WW1wVWVYQmxMRnh5WEc0Z0lDQWdJQ0FnSUdacFpXeGtPaUJtYVdWc1pGTjBjbWx1WjF4eVhHNGdJQ0FnSUNCOUtUdGNjbHh1SUNBZ0lIMWNjbHh1SUNCOVhISmNibHh5WEc1OVhISmNibHh5WEc1bGVIQnZjblFnYkdWMElFTm9ZVzVuWlZSNWNHVWdQU0I3VlZCRVFWUkZPaUFuZFhCa1lYUmxKeXdnUVVSRU9pQW5ZV1JrSnl3Z1VrVk5UMVpGT2lBbmNtVnRiM1psSjMwN1hISmNibVY0Y0c5eWRDQnNaWFFnVDJKcVpXTjBWSGx3WlNBOUlIdFBRa3BGUTFRNklDZHZZbXBsWTNRbkxDQkJVbEpCV1RvZ0oyRnljbUY1SjMwN1hISmNibVY0Y0c5eWRDQmtaV1poZFd4MElGTjVibU5QWW1wbFkzUTdYSEpjYmx4dVhHNWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNJQzh2WEc0dkx5QXVMM055WXk5emVXNWphR1Z5TDFCeWIzaDVUMkpxWldOMExtcHpJaXdpYlc5a2RXeGxMbVY0Y0c5eWRITWdQU0I3SUZ3aVpHVm1ZWFZzZEZ3aU9pQnlaWEYxYVhKbEtGd2lZMjl5WlMxcWN5OXNhV0p5WVhKNUwyWnVMMjlpYW1WamRDOWhjM05wWjI1Y0lpa3NJRjlmWlhOTmIyUjFiR1U2SUhSeWRXVWdmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5amIzSmxMV3B6TDI5aWFtVmpkQzloYzNOcFoyNHVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREV5TlZ4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWlMQ0pjSW5WelpTQnpkSEpwWTNSY0lqdGNibHh1Wlhod2IzSjBjeTVmWDJWelRXOWtkV3hsSUQwZ2RISjFaVHRjYmx4dWRtRnlJRjluWlhSUWNtOTBiM1I1Y0dWUFppQTlJSEpsY1hWcGNtVW9YQ0l1TGk5amIzSmxMV3B6TDI5aWFtVmpkQzluWlhRdGNISnZkRzkwZVhCbExXOW1YQ0lwTzF4dVhHNTJZWElnWDJkbGRGQnliM1J2ZEhsd1pVOW1NaUE5SUY5cGJuUmxjbTl3VW1WeGRXbHlaVVJsWm1GMWJIUW9YMmRsZEZCeWIzUnZkSGx3WlU5bUtUdGNibHh1ZG1GeUlGOW5aWFJQZDI1UWNtOXdaWEowZVVSbGMyTnlhWEIwYjNJZ1BTQnlaWEYxYVhKbEtGd2lMaTR2WTI5eVpTMXFjeTl2WW1wbFkzUXZaMlYwTFc5M2JpMXdjbTl3WlhKMGVTMWtaWE5qY21sd2RHOXlYQ0lwTzF4dVhHNTJZWElnWDJkbGRFOTNibEJ5YjNCbGNuUjVSR1Z6WTNKcGNIUnZjaklnUFNCZmFXNTBaWEp2Y0ZKbGNYVnBjbVZFWldaaGRXeDBLRjluWlhSUGQyNVFjbTl3WlhKMGVVUmxjMk55YVhCMGIzSXBPMXh1WEc1bWRXNWpkR2x2YmlCZmFXNTBaWEp2Y0ZKbGNYVnBjbVZFWldaaGRXeDBLRzlpYWlrZ2V5QnlaWFIxY200Z2IySnFJQ1ltSUc5aWFpNWZYMlZ6VFc5a2RXeGxJRDhnYjJKcUlEb2dleUJrWldaaGRXeDBPaUJ2WW1vZ2ZUc2dmVnh1WEc1bGVIQnZjblJ6TG1SbFptRjFiSFFnUFNCbWRXNWpkR2x2YmlCblpYUW9iMkpxWldOMExDQndjbTl3WlhKMGVTd2djbVZqWldsMlpYSXBJSHRjYmlBZ2FXWWdLRzlpYW1WamRDQTlQVDBnYm5Wc2JDa2diMkpxWldOMElEMGdSblZ1WTNScGIyNHVjSEp2ZEc5MGVYQmxPMXh1SUNCMllYSWdaR1Z6WXlBOUlDZ3dMQ0JmWjJWMFQzZHVVSEp2Y0dWeWRIbEVaWE5qY21sd2RHOXlNaTVrWldaaGRXeDBLU2h2WW1wbFkzUXNJSEJ5YjNCbGNuUjVLVHRjYmx4dUlDQnBaaUFvWkdWell5QTlQVDBnZFc1a1pXWnBibVZrS1NCN1hHNGdJQ0FnZG1GeUlIQmhjbVZ1ZENBOUlDZ3dMQ0JmWjJWMFVISnZkRzkwZVhCbFQyWXlMbVJsWm1GMWJIUXBLRzlpYW1WamRDazdYRzVjYmlBZ0lDQnBaaUFvY0dGeVpXNTBJRDA5UFNCdWRXeHNLU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdkVzVrWldacGJtVmtPMXh1SUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNCeVpYUjFjbTRnWjJWMEtIQmhjbVZ1ZEN3Z2NISnZjR1Z5ZEhrc0lISmxZMlZwZG1WeUtUdGNiaUFnSUNCOVhHNGdJSDBnWld4elpTQnBaaUFvWENKMllXeDFaVndpSUdsdUlHUmxjMk1wSUh0Y2JpQWdJQ0J5WlhSMWNtNGdaR1Z6WXk1MllXeDFaVHRjYmlBZ2ZTQmxiSE5sSUh0Y2JpQWdJQ0IyWVhJZ1oyVjBkR1Z5SUQwZ1pHVnpZeTVuWlhRN1hHNWNiaUFnSUNCcFppQW9aMlYwZEdWeUlEMDlQU0IxYm1SbFptbHVaV1FwSUh0Y2JpQWdJQ0FnSUhKbGRIVnliaUIxYm1SbFptbHVaV1E3WEc0Z0lDQWdmVnh1WEc0Z0lDQWdjbVYwZFhKdUlHZGxkSFJsY2k1allXeHNLSEpsWTJWcGRtVnlLVHRjYmlBZ2ZWeHVmVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZbUZpWld3dGNuVnVkR2x0WlM5b1pXeHdaWEp6TDJkbGRDNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVEkyWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DSXNJaThxS2x4eVhHNHFJRU52Y0hseWFXZG9kQ0F5TURFMklGQlVJRWx1YjNaaHc2ZkRvMjhnWlNCVGFYTjBaVzFoY3lCVFFWeHlYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRWxPUlZORExVbEVYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVVZWUFFrbFRJRTVGVkZkUFVrdFRJRk5NWEhKY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1JsSkJWVTVJVDBaRlVpMUhSVk5GVEV4VFEwaEJSbFFnV2xWU0lFWlBSVkpFUlZKVlRrY2dSRVZTSUVGT1IwVlhRVTVFVkVWT0lFWlBVbE5EU0ZWT1J5QkZMbFpjY2x4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCUFVrRk9SMFVnVTBGY2NseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQkVaWFYwYzJOb1pTQlVaV3hsYTI5dElFRkhYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnUVhCcGVtVmxYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVkVWRFNFNUpVME5JUlNCVlRrbFdSVkpUU1ZSQlZDQkNSVkpNU1U1Y2NseHVLbHh5WEc0cUlFeHBZMlZ1YzJWa0lIVnVaR1Z5SUhSb1pTQkJjR0ZqYUdVZ1RHbGpaVzV6WlN3Z1ZtVnljMmx2YmlBeUxqQWdLSFJvWlNCY0lreHBZMlZ1YzJWY0lpazdYSEpjYmlvZ2VXOTFJRzFoZVNCdWIzUWdkWE5sSUhSb2FYTWdabWxzWlNCbGVHTmxjSFFnYVc0Z1kyOXRjR3hwWVc1alpTQjNhWFJvSUhSb1pTQk1hV05sYm5ObExseHlYRzRxSUZsdmRTQnRZWGtnYjJKMFlXbHVJR0VnWTI5d2VTQnZaaUIwYUdVZ1RHbGpaVzV6WlNCaGRGeHlYRzRxWEhKY2Jpb2dJQ0JvZEhSd09pOHZkM2QzTG1Gd1lXTm9aUzV2Y21jdmJHbGpaVzV6WlhNdlRFbERSVTVUUlMweUxqQmNjbHh1S2x4eVhHNHFJRlZ1YkdWemN5QnlaWEYxYVhKbFpDQmllU0JoY0hCc2FXTmhZbXhsSUd4aGR5QnZjaUJoWjNKbFpXUWdkRzhnYVc0Z2QzSnBkR2x1Wnl3Z2MyOW1kSGRoY21WY2NseHVLaUJrYVhOMGNtbGlkWFJsWkNCMWJtUmxjaUIwYUdVZ1RHbGpaVzV6WlNCcGN5QmthWE4wY21saWRYUmxaQ0J2YmlCaGJpQmNJa0ZUSUVsVFhDSWdRa0ZUU1ZNc1hISmNiaW9nVjBsVVNFOVZWQ0JYUVZKU1FVNVVTVVZUSUU5U0lFTlBUa1JKVkVsUFRsTWdUMFlnUVU1WklFdEpUa1FzSUdWcGRHaGxjaUJsZUhCeVpYTnpJRzl5SUdsdGNHeHBaV1F1WEhKY2Jpb2dVMlZsSUhSb1pTQk1hV05sYm5ObElHWnZjaUIwYUdVZ2MzQmxZMmxtYVdNZ2JHRnVaM1ZoWjJVZ1oyOTJaWEp1YVc1bklIQmxjbTFwYzNOcGIyNXpJR0Z1WkZ4eVhHNHFJR3hwYldsMFlYUnBiMjV6SUhWdVpHVnlJSFJvWlNCTWFXTmxibk5sTGx4eVhHNHFLaTljY2x4dWFXMXdiM0owSUhzZ1pHVmxjRU5zYjI1bElIMGdabkp2YlNBbkxpNHZkWFJwYkhNdmRYUnBiSE1uTzF4eVhHNWNjbHh1YVcxd2IzSjBJRVJoZEdGUFltcGxZM1JTWlhCdmNuUmxjaUJtY205dElDY3VMMFJoZEdGUFltcGxZM1JTWlhCdmNuUmxjaWM3WEhKY2JtbHRjRzl5ZENCRVlYUmhUMkpxWldOMFQySnpaWEoyWlhJZ1puSnZiU0FuTGk5RVlYUmhUMkpxWldOMFQySnpaWEoyWlhJbk8xeHlYRzVwYlhCdmNuUWdSR0YwWVZCeWIzWnBjMmx2Ym1Gc0lHWnliMjBnSnk0dlJHRjBZVkJ5YjNacGMybHZibUZzSnp0Y2NseHVYSEpjYmk4cUtseHlYRzRxSUZSb1pTQnRZV2x1SUdOc1lYTnpJR1p2Y2lCMGFHVWdjM2x1WTJobGNpQndZV05yWVdkbExseHlYRzRxSUZSb1pTQlRlVzVqYUdWeUlHbHpJR0VnYzJsdVoyeGxkRzl1SUdOc1lYTnpJSEJsY2lCSWVYQmxjblI1TDFWU1RDQmhibVFnYVhRZ2FYTWdkR2hsSUc5M2JtVnlJRzltSUdGc2JDQmpjbVZoZEdWa0lFUmhkR0VnVTNsdVl5QlBZbXBsWTNSeklHRmpZMjl5WkdsdVp5QjBieUIwYUdVZ1VtVndiM0owWlhJZ0xTQlBZbk5sY25abGNpQndZWFIwWlhKdUxseHlYRzRxSUUxaGFXNGdablZ1WTNScGIyNWhiR2wwZVNCcGN5QjBieUJqY21WaGRHVWdjbVZ3YjNKMFpYSnpJR0Z1WkNCMGJ5QnpkV0p6WTNKcFltVWdkRzhnWlhocGMzUnBibWNnYjI1bGN5NWNjbHh1S2k5Y2NseHVZMnhoYzNNZ1UzbHVZMmhsY2lCN1hISmNiaUFnTHlvZ2NISnBkbUYwWlZ4eVhHNGdJRjl2ZDI1bGNqb2dWVkpNWEhKY2JpQWdYMkoxY3pvZ1RXbHVhVUoxYzF4eVhHNWNjbHh1SUNCZmMzVmlWVkpNT2lCVlVreGNjbHh1WEhKY2JpQWdYM0psY0c5eWRHVnljem9nUEhWeWJEb2dSR0YwWVU5aWFtVmpkRkpsY0c5eWRHVnlQbHh5WEc0Z0lGOXZZbk5sY25abGNuTTZJRHgxY213NklFUmhkR0ZQWW1wbFkzUlBZbk5sY25abGNqNWNjbHh1SUNCZmNISnZkbWx6YVc5dVlXeHpPaUE4ZFhKc09pQkVZWFJoVUhKdmRtbHphVzl1WVd3K1hISmNibHh5WEc0Z0lDMHRMUzFsZG1WdWRDQm9ZVzVrYkdWeWN5MHRMUzFjY2x4dUlDQmZiMjVPYjNScFptbGpZWFJwYjI1SVlXNWtiR1Z5T2lBb1pYWmxiblFwSUQwK0lIWnZhV1JjY2x4dUlDQmZiMjVTWlhOMWJXVTZJQ2hsZG1WdWRDa2dQVDRnZG05cFpGeHlYRzRnSUNvdlhISmNibHh5WEc0Z0lDOHFLbHh5WEc0Z0lDb2dRMjl1YzNSeWRXTjBiM0lnZEdoaGRDQnphRzkxYkdRZ1ltVWdkWE5sWkNCaWVTQjBhR1VnU0hsd1pYSjBlU0J2ZDI1bGNseHlYRzRnSUNvZ1FIQmhjbUZ0SUh0SWVYQmxjblI1VlZKTWZTQnZkMjVsY2lBdElFaDVjR1Z5ZEhrZ1ZWSk1JRzkzYm1WeUxpQkJiaUJWVWt3Z1lXeHNiMk5oZEdWa0lHSjVJSFJvWlNCeWRXNTBhVzFsSUhSb1lYUWdkVzVwY1hWbGJIa2dhV1JsYm5ScFptbGxjeUIwYUdVZ1NIbHdaWEowZVM1Y2NseHVJQ0FxSUVCd1lYSmhiU0I3VFdsdWFVSjFjMzBnWW5WeklDMGdRVzRnYVc1emRHRnVZMlVnYjJZZ2RHaGxJRTFwYm1sQ2RYTWdjSEp2ZG1sa1pXUWdhVzRnZEdobElITmhibVJpYjNndUlGZG9aVzRnWVc0Z2IySnFaV04wSUNoU1pYQnZjblJsY2lCdmNpQlBZbk5sY25abFpDa2dhWE1nWTNKbFlYUmxaQ3dnZEdobElGTjVibU5vWlhKTllXNWhaMlZ5SUhkcGJHd2dZV1JrSUdFZ2JHbHpkR1Z1WlhJZ2FXNGdkR2hsSUUxcGJtbENkWE1nZEc4Z2NtVmpaV2wyWlM5elpXNWtJRTFsYzNOaFoyVnpJRzltSUhSb1lYUWdiMkpxWldOMExseHlYRzRnSUNvZ1FIQmhjbUZ0SUh0S1UwOU9mU0JqYjI1bWFXY2dMU0JEYjI1bWFXZDFjbUYwYVc5dUlHUmhkR0V1SUZSb1pTQnZibXg1SUhKbGNYVnBjbVZrSUdacFpXeGtJR1p2Y2lCdWIzY2dhWE1nZEdobElISjFiblJwYldWVlVrd3VYSEpjYmlBZ0tpOWNjbHh1SUNCamIyNXpkSEoxWTNSdmNpaHZkMjVsY2l3Z1luVnpMQ0JqYjI1bWFXY3BJSHRjY2x4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYSEpjYmx4eVhHNGdJQ0FnWDNSb2FYTXVYMjkzYm1WeUlEMGdiM2R1WlhJN1hISmNiaUFnSUNCZmRHaHBjeTVmWW5WeklEMGdZblZ6TzF4eVhHNWNjbHh1SUNBZ0lGOTBhR2x6TGw5emRXSlZVa3dnUFNCamIyNW1hV2N1Y25WdWRHbHRaVlZTVENBcklDY3ZjMjBuTzF4eVhHNGdJQ0FnWDNSb2FYTXVYM0oxYm5ScGJXVlZjbXdnUFNCamIyNW1hV2N1Y25WdWRHbHRaVlZTVER0Y2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZmNtVndiM0owWlhKeklEMGdlMzA3WEhKY2JpQWdJQ0JmZEdocGN5NWZiMkp6WlhKMlpYSnpJRDBnZTMwN1hISmNiaUFnSUNCZmRHaHBjeTVmY0hKdmRtbHphVzl1WVd4eklEMGdlMzA3WEhKY2JseHlYRzRnSUNBZ1luVnpMbUZrWkV4cGMzUmxibVZ5S0c5M2JtVnlMQ0FvYlhObktTQTlQaUI3WEhKY2JpQWdJQ0FnSUM4dmFXZHViM0psSUcxelp5QnpaVzUwSUdKNUlHaHBiWE5sYkdaY2NseHVJQ0FnSUNBZ2FXWWdLRzF6Wnk1bWNtOXRJQ0U5UFNCdmQyNWxjaWtnZTF4eVhHNGdJQ0FnSUNBZ0lHTnZibk52YkdVdWFXNW1ieWduVzFONWJtTm9aWEpkSUZONWJtTm9aWEl0VWtOV09pQW5MQ0J0YzJjc0lGOTBhR2x6S1R0Y2NseHVJQ0FnSUNBZ0lDQnpkMmwwWTJnZ0tHMXpaeTUwZVhCbEtTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNCallYTmxJQ2RtYjNKM1lYSmtKem9nWDNSb2FYTXVYMjl1Um05eWQyRnlaQ2h0YzJjcE95QmljbVZoYXp0Y2NseHVJQ0FnSUNBZ0lDQWdJR05oYzJVZ0oyTnlaV0YwWlNjNklGOTBhR2x6TGw5dmJsSmxiVzkwWlVOeVpXRjBaU2h0YzJjcE95QmljbVZoYXp0Y2NseHVJQ0FnSUNBZ0lDQWdJR05oYzJVZ0oyUmxiR1YwWlNjNklGOTBhR2x6TGw5dmJsSmxiVzkwWlVSbGJHVjBaU2h0YzJjcE95QmljbVZoYXp0Y2NseHVJQ0FnSUNBZ0lDQjlYSEpjYmlBZ0lDQWdJSDFjY2x4dUlDQWdJSDBwTzF4eVhHNGdJSDFjY2x4dVhISmNiaUFnTHlvcVhISmNiaUFnS2lCVWFHVWdiM2R1WlhJZ2IyWWdkR2hsSUZONWJtTm9aWElnWVc1a0lHRnNiQ0JqY21WaGRHVmtJSEpsY0c5eWRHVnljeTVjY2x4dUlDQXFJRUIwZVhCbElIdEllWEJsY25SNVZWSk1mVnh5WEc0Z0lDb3ZYSEpjYmlBZ1oyVjBJRzkzYm1WeUtDa2dleUJ5WlhSMWNtNGdkR2hwY3k1ZmIzZHVaWEk3SUgxY2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0tpQkJiR3dnYjNkdVpXUWdjbVZ3YjNKMFpYSnpMQ0IwYUdVZ2IyNWxjeUIwYUdGMElIZGxjbVVnWTNKbFlYUmxaQ0JpZVNCaElHTnlaV0YwWlZ4eVhHNGdJQ29nUUhSNWNHVWdlMDlpYW1WamREeFZVa3dzSUVSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2o1OVhISmNiaUFnS2k5Y2NseHVJQ0JuWlhRZ2NtVndiM0owWlhKektDa2dleUJ5WlhSMWNtNGdkR2hwY3k1ZmNtVndiM0owWlhKek95QjlYSEpjYmx4eVhHNGdJQzhxS2x4eVhHNGdJQ29nUVd4c0lHOTNibVZrSUc5aWMyVnlkbVZ5Y3l3Z2RHaGxJRzl1WlhNZ2RHaGhkQ0IzWlhKbElHTnlaV0YwWldRZ1lua2dZU0JzYjJOaGJDQnpkV0p6WTNKcGNIUnBiMjVjY2x4dUlDQXFJRUIwZVhCbElIdFBZbXBsWTNROFZWSk1MQ0JFWVhSaFQySnFaV04wVDJKelpYSjJaWEkrZlZ4eVhHNGdJQ292WEhKY2JpQWdaMlYwSUc5aWMyVnlkbVZ5Y3lncElIc2djbVYwZFhKdUlIUm9hWE11WDI5aWMyVnlkbVZ5Y3pzZ2ZWeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQXFJRkpsY1hWbGMzUWdZU0JFWVhSaFQySnFaV04wVW1Wd2IzSjBaWElnWTNKbFlYUnBiMjR1SUZSb1pTQlZVa3dnZDJsc2JDQmlaU0JpWlNCeVpYRjFaWE4wWldRZ1lua2dkR2hsSUdGc2JHOWpZWFJwYjI0Z2JXVmphR0Z1YVhOdExseHlYRzRnSUNvZ1FIQmhjbUZ0SUNCN1UyTm9aVzFoVlZKTWZTQnpZMmhsYldFZ0xTQkllWEJsY25SNUlFTmhkR0ZzYjJkMVpTQlZVa3dnWVdSa2NtVnpjeUIwYUdGMElHTmhiaUJpWlNCMWMyVmtJSFJ2SUhKbGRISnBaWFpsSUhSb1pTQktVMDlPTFZOamFHVnRZU0JrWlhOamNtbGlhVzVuSUhSb1pTQkVZWFJoSUU5aWFtVmpkQ0J6WTJobGJXRmNjbHh1SUNBcUlFQndZWEpoYlNBZ2UwaDVjR1Z5ZEhsVlVreGJYWDBnYjJKelpYSjJaWEp6SUMwZ1RHbHpkQ0J2WmlCb2VYQmxjblJwWlhNZ2RHaGhkQ0JoY21VZ2NISmxMV0YxZEdodmNtbDZaV1FnWm05eUlITjFZbk5qY21sd2RHbHZibHh5WEc0Z0lDb2dRSEJoY21GdElDQjdTbE5QVG4wZ2FXNXBkR2xoYkVSaGRHRWdMU0JKYm1sMGFXRnNJR1JoZEdFZ2IyWWdkR2hsSUhKbGNHOXlkR1Z5WEhKY2JpQWdLaUJBY0dGeVlXMGdJSHRpYjI5c1pXRnVmU0J6ZEc5eVpTQXRJQ2hQY0hScGIyNWhiQ2tnYVdZZ2RISjFaU3dnYjJKcVpXTjBJSGRwYkd3Z1ltVWdjM1J2Y21Wa0lHSjVJSFJvWlNCeWRXNTBhVzFsWEhKY2JpQWdLaUJBY0dGeVlXMGdJSHRpYjI5c1pXRnVmU0J3TW5BZ0xTQW9UM0IwYVc5dVlXd3BJR2xtSUhSeWRXVXNJR1JoZEdFZ2MzbHVZMmh5YjI1cGMyRjBhVzl1SUhOMGNtVmhiU0IzYVd4c0lIVnpaU0J3TW5BZ1kyOXVibVZqZEdsdmJpQmhjeUJ0ZFdOb0lHRnpJSEJ2YzNOcFlteGxYSEpjYmlBZ0tpQkFjR0Z5WVcwZ0lIdE5aWE56WVdkbFFtOWtlVWxrWlc1MGFYUjVmU0JwWkdWdWRHbDBlU0F0SUNodmNIUnBiMjVoYkNrZ2FXUmxiblJwZEhrZ1pHRjBZU0IwYnlCaVpTQmhaR1JsWkNCMGJ5QnBaR1Z1ZEdsMGVTQjBhR1VnZFhObGNpQnlaWEJ2Y25SbGNpNGdWRzhnWW1VZ2RYTmxaQ0JtYjNJZ2JHVm5ZV041SUdsa1pXNTBhWFJwWlhNdVhISmNiaUFnS2lCQWNtVjBkWEp1SUh0UWNtOXRhWE5sUEVSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2o1OUlGSmxkSFZ5YmlCUWNtOXRhWE5sSUhSdklHRWdibVYzSUZKbGNHOXlkR1Z5TGlCVWFHVWdjbVZ3YjNKMFpYSWdZMkZ1SUdKbElHRmpZMlZ3ZEdWa0lHOXlJSEpsYW1WamRHVmtJR0o1SUhSb1pTQlFSVkJjY2x4dUlDQXFMMXh5WEc0Z0lHTnlaV0YwWlNoelkyaGxiV0VzSUc5aWMyVnlkbVZ5Y3l3Z2FXNXBkR2xoYkVSaGRHRXNJSE4wYjNKbElEMGdabUZzYzJVc0lIQXljQ0E5SUdaaGJITmxMQ0J1WVcxbElEMGdKMlJoZEdFZ2IySnFaV04wSUhkcGRHaHZkWFFnYm1GdFpTY3NJR2xrWlc1MGFYUjVMQ0JwYm5CMWRDa2dlMXh5WEc1Y2NseHVJQ0FnSUdsbUlDZ2hjMk5vWlcxaEtTQjBhSEp2ZHlCRmNuSnZjaWduVzFONWJtTm9aWElnTFNCRGNtVmhkR1ZkSUMwZ1dXOTFJRzVsWldRZ2MzQmxZMmxtZVNCMGFHVWdaR0YwWVNCdlltcGxZM1FnYzJOb1pXMWhKeWs3WEhKY2JpQWdJQ0JwWmlBb0lXOWljMlZ5ZG1WeWN5a2dkR2h5YjNjZ1JYSnliM0lvSjF0VGVXNWphR1Z5SUMwZ1EzSmxZWFJsWFNBdFZHaGxJRzlpYzJWeWRtVnljeUJ6YUc5MWJHUWdZbVVnWkdWbWFXNWxaQ2NwTzF4eVhHNWNjbHh1SUNBZ0lDOHZhV1lnS0NGcGJtbDBhV0ZzUkdGMFlTa2dkR2h5YjNjZ1JYSnliM0lvSjF0VGVXNWphR1Z5SUMwZ1EzSmxZWFJsWFNBdElGbHZkU0JwYm1sMGFXRnNSR0YwWVNCemFHOTFiR1FnWW1VZ1pHVm1hVzVsWkNjcE8xeHlYRzVjY2x4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYSEpjYmlBZ0lDQnNaWFFnWTNKbFlYUmxTVzV3ZFhRZ0lEMGdUMkpxWldOMExtRnpjMmxuYmloN2ZTd2dhVzV3ZFhRcE8xeHlYRzVjY2x4dUlDQWdJR055WldGMFpVbHVjSFYwTG5BeWNDQTlJSEF5Y0R0Y2NseHVJQ0FnSUdOeVpXRjBaVWx1Y0hWMExuTjBiM0psSUQwZ2MzUnZjbVU3WEhKY2JpQWdJQ0JqY21WaGRHVkpibkIxZEM1elkyaGxiV0VnUFNCelkyaGxiV0U3WEhKY2JpQWdJQ0JqY21WaGRHVkpibkIxZEM1aGRYUm9iM0pwYzJVZ1BTQnZZbk5sY25abGNuTTdYSEpjYmlBZ0lDQW9hVzVwZEdsaGJFUmhkR0VwSUQ4Z1kzSmxZWFJsU1c1d2RYUXVaR0YwWVNBOUlHbHVhWFJwWVd4RVlYUmhJRG9nWTNKbFlYUmxTVzV3ZFhRdVpHRjBZU0E5SUh0OU8xeHlYRzRnSUNBZ1kzSmxZWFJsU1c1d2RYUXVibUZ0WlNBOUlHNWhiV1U3WEhKY2JpQWdJQ0JqY21WaGRHVkpibkIxZEM1eVpYQnZjblJsY2lBOUlGOTBhR2x6TGw5dmQyNWxjanRjY2x4dUlDQWdJR055WldGMFpVbHVjSFYwTG5KbGMzVnRaU0E5SUdaaGJITmxPMXh5WEc0Z0lDQWdhV1lnS0dsdWNIVjBLU0I3WEhKY2JpQWdJQ0FnSUdOeVpXRjBaVWx1Y0hWMExtMTFkSFZoYkNBOUlHbHVjSFYwTG0xMWRIVmhiQ0EvSUdsdWNIVjBMbTExZEhWaGJDQTZJSFJ5ZFdVN1hISmNiaUFnSUNCOUlHVnNjMlVnZXlCamNtVmhkR1ZKYm5CMWRDNXRkWFIxWVd3Z1BTQjBjblZsT3lCOVhISmNibHh5WEc0Z0lDQWdhV1lnS0dsa1pXNTBhWFI1S1NBZ0lDQWdJSHNnWTNKbFlYUmxTVzV3ZFhRdWFXUmxiblJwZEhrZ1BTQnBaR1Z1ZEdsMGVUc2dmVnh5WEc1Y2NseHVJQ0FnSUM4dlQySnFaV04wTG1GemMybG5iaWhqY21WaGRHVkpibkIxZEN3Z2UzSmxjM1Z0WlRvZ1ptRnNjMlY5S1R0Y2NseHVYSEpjYmlBZ0lDQmpiMjV6YjJ4bExteHZaeWduVzNONWJtTm9aWElnTFNCamNtVmhkR1ZkSUMwZ1kzSmxZWFJsSUZKbGNHOXlkR1Z5SUMwZ1kzSmxZWFJsU1c1d2RYUTZJQ2NzSUdOeVpXRjBaVWx1Y0hWMEtUdGNjbHh1WEhKY2JpQWdJQ0J5WlhSMWNtNGdYM1JvYVhNdVgyTnlaV0YwWlNoamNtVmhkR1ZKYm5CMWRDazdYSEpjYmlBZ2ZWeHlYRzVjY2x4dUlDQXZLaXBjY2x4dUlDQXFJRkpsY1hWbGMzUWdZU0JFWVhSaFQySnFaV04wVW1Wd2IzSjBaWElnWTNKbFlYUnBiMjR1SUZSb1pTQlZVa3dnZDJsc2JDQmlaU0JpWlNCeVpYRjFaWE4wWldRZ1lua2dkR2hsSUdGc2JHOWpZWFJwYjI0Z2JXVmphR0Z1YVhOdExseHlYRzRnSUNvZ1FIQmhjbUZ0SUNCN1QySnFaV04wZlNCamNtbDBaWEpwWVNBdElDaHZjSFJwYjI1aGJDa2dhV1JsYm5ScGRIa2daR0YwWVNCMGJ5QmlaU0JoWkdSbFpDQjBieUJwWkdWdWRHbDBlU0IwYUdVZ2RYTmxjaUJ5WlhCdmNuUmxjaTRnVkc4Z1ltVWdkWE5sWkNCbWIzSWdiR1ZuWVdONUlHbGtaVzUwYVhScFpYTXVYSEpjYmlBZ0tpQkFjbVYwZFhKdUlIdFFjbTl0YVhObFBFUmhkR0ZQWW1wbFkzUlNaWEJ2Y25SbGNqNWJYWDBnVW1WMGRYSnVJR0VnY0hKdmJXbHpaU0IzYVhSb0lHRWdiR2x6ZENCdlppQkVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSWdkRzhnWW1VZ2NtVnpkVzFsWkR0Y2NseHVJQ0FxTDF4eVhHNGdJSEpsYzNWdFpWSmxjRzl5ZEdWeWN5aGpjbWwwWlhKcFlTa2dlMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1SUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiYzNsdVkyaGxjaUF0SUdOeVpXRjBaVjBnTFNCeVpYTjFiV1VnVW1Wd2IzSjBaWElnTFNCamNtbDBaWEpwWVRvZ0p5d2dZM0pwZEdWeWFXRXBPMXh5WEc1Y2NseHVJQ0FnSUU5aWFtVmpkQzVoYzNOcFoyNG9ZM0pwZEdWeWFXRXNJSHR5WlhOMWJXVTZJSFJ5ZFdWOUtUdGNjbHh1WEhKY2JpQWdJQ0J5WlhSMWNtNGdYM1JvYVhNdVgzSmxjM1Z0WlVOeVpXRjBaU2hqY21sMFpYSnBZU2s3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FxSUZKbGNYVmxjM1FnWVNCemRXSnpZM0pwY0hScGIyNGdkRzhnWVc0Z1pYaHBjM1JsYm5RZ2NtVndiM0owWlhJZ2IySnFaV04wTGx4eVhHNGdJQ29nUUhCaGNtRnRJSHRUWTJobGJXRlZVa3g5SUhOamFHVnRZU0F0SUVoNWNHVnlkSGtnUTJGMFlXeHZaM1ZsSUZWU1RDQmhaR1J5WlhOeklIUm9ZWFFnWTJGdUlHSmxJSFZ6WldRZ2RHOGdjbVYwY21sbGRtVWdkR2hsSUVwVFQwNHRVMk5vWlcxaElHUmxjMk55YVdKcGJtY2dkR2hsSUVSaGRHRWdUMkpxWldOMElITmphR1Z0WVZ4eVhHNGdJQ29nUUhCaGNtRnRJSHRQWW1wbFkzUlZVa3g5SUc5aWFsVlNUQ0F0SUVGa1pISmxjM01nYjJZZ2RHaGxJR1Y0YVhOMFpXNTBJSEpsY0c5eWRHVnlJRzlpYW1WamRDQjBieUJpWlNCdlluTmxjblpsWkZ4eVhHNGdJQ29nUUhCaGNtRnRJSHRDYjI5c1pXRnVmU0JiYzNSdmNtVTlabUZzYzJWZElDMGdVMkYyWlNCMGFHVWdjM1ZpYzJOeWFYQjBhVzl1SUc5dUlIUm9aU0JUZVc1amFHVnlJRTFoYm1GblpYSWdabTl5SUdaMWNuUm9aWElnY21WemRXMWxJQ2hFWldaaGRXeDBJR2x6SUdaaGJITmxLVnh5WEc0Z0lDb2dRSEJoY21GdElIdENiMjlzWldGdWZTQmJjREp3UFdaaGJITmxYU0F0SUVsdVptOGdZV0p2ZFhRZ2FXWWdjMmh2ZFd4a0lIVnpaU0J3TW5BZ1kyOXVibVZqZEdsdmJpQW9SR1ZtWVhWc2RDQnBjeUJtWVd4elpTbGNjbHh1SUNBcUlFQndZWEpoYlNCN1FtOXZiR1ZoYm4wZ1cyMTFkSFZoYkQxMGNuVmxYU0F0SUVsdVptOGdZV0p2ZFhRZ2FXWWdiV1Z6YzJGblpYTWdiMllnZEdocGN5QnZZbXBsWTNRZ2MyaHZkV3hrSUdKbElHVnVZM0o1Y0hSbFpDQW9SR1ZtWVhWc2RDQnBjeUIwY25WbEtWeHlYRzRnSUNvZ1FIQmhjbUZ0SUNCN1RXVnpjMkZuWlVKdlpIbEpaR1Z1ZEdsMGVYMGdhV1JsYm5ScGRIa2dMU0FvYjNCMGFXOXVZV3dwSUdsa1pXNTBhWFI1SUdSaGRHRWdkRzhnWW1VZ1lXUmtaV1FnZEc4Z2FXUmxiblJwZEhrZ2RHaGxJSFZ6WlhJZ2NtVndiM0owWlhJdUlGUnZJR0psSUhWelpXUWdabTl5SUd4bFoyRmplU0JwWkdWdWRHbDBhV1Z6TGx4eVhHNGdJQ29nUUhKbGRIVnliaUI3VUhKdmJXbHpaVHhFWVhSaFQySnFaV04wVDJKelpYSjJaWEkrZlNCU1pYUjFjbTRnVUhKdmJXbHpaU0IwYnlCaElHNWxkeUJ2WW5ObGNuWmxjaTRnU1hRbmN5QmhjM052WTJsaGRHVmtJSGRwZEdnZ2RHaGxJSEpsY0c5eWRHVnlMbHh5WEc0Z0lDb3ZYSEpjYmlBZ2MzVmljMk55YVdKbEtITmphR1Z0WVN3Z2IySnFWVkpNTENCemRHOXlaU0E5SUdaaGJITmxMQ0J3TW5BZ1BTQm1ZV3h6WlN3Z2JYVjBkV0ZzSUQwZ2RISjFaU3dnYVdSbGJuUnBkSGtwSUh0Y2NseHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEhKY2JpQWdJQ0JzWlhRZ1kzSnBkR1Z5YVdFZ1BTQjdmVHRjY2x4dVhISmNiaUFnSUNCamNtbDBaWEpwWVM1d01uQWdQU0J3TW5BN1hISmNiaUFnSUNCamNtbDBaWEpwWVM1emRHOXlaU0E5SUhOMGIzSmxPMXh5WEc0Z0lDQWdZM0pwZEdWeWFXRXVjMk5vWlcxaElEMGdjMk5vWlcxaE8xeHlYRzVjY2x4dUlDQWdJR055YVhSbGNtbGhMbkpsYzI5MWNtTmxJRDBnYjJKcVZWSk1PMXh5WEc0Z0lDQWdhV1lnS0dsa1pXNTBhWFI1S1NBZ0lDQWdJSHNnWTNKcGRHVnlhV0V1YVdSbGJuUnBkSGtnUFNCcFpHVnVkR2wwZVRzZ2ZWeHlYRzVjY2x4dUlDQWdJQzh2VkU5RVR6b2dSbTl5SUVaMWNuUm9aWElnVTNSMVpIbGNjbHh1SUNBZ0lHTnlhWFJsY21saExtMTFkSFZoYkNBOUlHMTFkSFZoYkR0Y2NseHVYSEpjYmlBZ0lDQmpiMjV6YjJ4bExteHZaeWduVzNONWJtTm9aWElnTFNCemRXSnpZM0pwWW1WZElDMGdjM1ZpYzJOeWFXSmxJR055YVhSbGNtbGhPaUFuTENCamNtbDBaWEpwWVNrN1hISmNibHh5WEc0Z0lDQWdUMkpxWldOMExtRnpjMmxuYmloamNtbDBaWEpwWVN3Z2UzSmxjM1Z0WlRvZ1ptRnNjMlY5S1R0Y2NseHVYSEpjYmlBZ0lDQnlaWFIxY200Z1gzUm9hWE11WDNOMVluTmpjbWxpWlNoamNtbDBaWEpwWVNrN1hISmNiaUFnZlZ4eVhHNWNjbHh1SUNBdktpcGNjbHh1SUNBcUlGSmxjWFZsYzNRZ1lTQnpkV0p6WTNKcGNIUnBiMjRnZEc4Z1lXNGdaWGhwYzNSbGJuUWdjbVZ3YjNKMFpYSWdiMkpxWldOMExseHlYRzRnSUNvZ1FIQmhjbUZ0SUh0amNtbDBaWEpwWVgwZ1kzSnBkR1Z5YVdFZ0xTQkpibVp2Y20xaGRHbHZiaUIwYnlCa2FYTmpiM1psY25rZ2RHaGxJRzlpYzJWeWRtVnlJRzlpYW1WamRGeHlYRzRnSUNvZ1FISmxkSFZ5YmlCN1VISnZiV2x6WlR4RVlYUmhUMkpxWldOMFQySnpaWEoyWlhJK2ZTQlNaWFIxY200Z1VISnZiV2x6WlNCMGJ5QmhJRzVsZHlCdlluTmxjblpsY2k0Z1NYUW5jeUJoYzNOdlkybGhkR1ZrSUhkcGRHZ2dkR2hsSUhKbGNHOXlkR1Z5TGx4eVhHNGdJQ292WEhKY2JpQWdjbVZ6ZFcxbFQySnpaWEoyWlhKektHTnlhWFJsY21saEtTQjdYSEpjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHlYRzRnSUNBZ2JHVjBJRjlqY21sMFpYSnBZU0E5SUdOeWFYUmxjbWxoSUh4OElIdDlPMXh5WEc1Y2NseHVJQ0FnSUU5aWFtVmpkQzVoYzNOcFoyNG9YMk55YVhSbGNtbGhMQ0I3Y21WemRXMWxPaUIwY25WbGZTazdYSEpjYmx4eVhHNGdJQ0FnY21WMGRYSnVJRjkwYUdsekxsOXlaWE4xYldWVGRXSnpZM0pwWW1Vb1gyTnlhWFJsY21saEtUdGNjbHh1SUNCOVhISmNibHh5WEc0Z0lDOHFLbHh5WEc0Z0lDb2dVbVZ4ZFdWemRDQmhJSEpsWVdRZ1lXTjBhVzl1SUc5dUlIUm9aU0J5WlhCdmNuUmxjaUJ2WW1wbFkzUmNjbHh1SUNBcUlFQndZWEpoYlNCN1QySnFaV04wVlZKTWZTQnZZbXBWVWt3Z0xTQlZVa3dnYjJZZ2RHaGxJSEpsY0c5eWRHVnlJRzlpYW1WamRDQjBieUJpWlNCeVpXRmtYSEpjYmlBZ0tpQkFjbVYwZFhKdUlIdFFjbTl0YVhObFBFOWlhbVZqZEQ1OUlGSmxkSFZ5YmlCUWNtOXRhWE5sSUhSdklHeGhjM1FnWVhaaGFXeGhZbXhsSUdSaGRHRWdiMllnZEdobElISmxjRzl5ZEdWeVhISmNiaUFnS2k5Y2NseHVJQ0J5WldGa0tHOWlhbFZTVENrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQXZMMFpNVDFjdFQxVlVPaUIwYUdseklHMWxjM05oWjJVZ2QybHNiQ0JpWlNCelpXNTBJR1JwY21WamRHeDVJSFJ2SUhKbGNHOXlkR1Z5SUc5aWFtVmpkQ0FvYldGNVltVWdkR2hsY21VZ2FYTWdibThnYkdsemRHVnVaWElnWVhaaGFXeGhZbXhsTENCemJ5QnBkQ0IzYVd4c0lHSmxJSEpsYzI5c2RtVmtJSGRwZEdnZ1RXVnpjMkZuWlVKMWN5QXRQaUJ5WlhOdmJIWmxLVnh5WEc0Z0lDQWdMeTkzYVd4c0lISmxZV05vSUhSb1pTQnlaVzF2ZEdVZ2IySnFaV04wSUdsdUlFUmhkR0ZQWW1wbFkzUlNaWEJ2Y25SbGNpQXRQaUJmYjI1U1pXRmtYSEpjYmlBZ0lDQnNaWFFnY21WaFpFMXpaeUE5SUh0Y2NseHVJQ0FnSUNBZ2RIbHdaVG9nSjNKbFlXUW5MQ0JtY205dE9pQmZkR2hwY3k1ZmIzZHVaWElzSUhSdk9pQnZZbXBWVWt4Y2NseHVJQ0FnSUgwN1hISmNibHh5WEc0Z0lDQWdjbVYwZFhKdUlHNWxkeUJRY205dGFYTmxLQ2h5WlhOdmJIWmxMQ0J5WldwbFkzUXBJRDArSUh0Y2NseHVJQ0FnSUNBZ1gzUm9hWE11WDJKMWN5NXdiM04wVFdWemMyRm5aU2h5WldGa1RYTm5MQ0FvY21Wd2JIa3BJRDArSUh0Y2NseHVJQ0FnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduY21WaFpDMXlaWE53YjI1elpUb2dKeXdnY21Wd2JIa3BPMXh5WEc0Z0lDQWdJQ0FnSUdsbUlDaHlaWEJzZVM1aWIyUjVMbU52WkdVZ1BUMDlJREl3TUNrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnY21WemIyeDJaU2h5WlhCc2VTNWliMlI1TG5aaGJIVmxLVHRjY2x4dUlDQWdJQ0FnSUNCOUlHVnNjMlVnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdjbVZxWldOMEtISmxjR3g1TG1KdlpIa3VaR1Z6WXlrN1hISmNiaUFnSUNBZ0lDQWdmVnh5WEc0Z0lDQWdJQ0I5S1R0Y2NseHVJQ0FnSUgwcE8xeHlYRzRnSUgxY2NseHVYSEpjYmlBZ0x5b3FYSEpjYmlBZ0tpQlRaWFIxY0NCMGFHVWdZMkZzYkdKaFkyc2dkRzhnY0hKdlkyVnpjeUJqY21WaGRHVWdZVzVrSUdSbGJHVjBaU0JsZG1WdWRITWdiMllnY21WdGIzWmxJRkpsY0c5eWRHVnlJRzlpYW1WamRITXVYSEpjYmlBZ0tpQlVhR2x6SUdseklISmxiR1ZoZEdWa0lIUnZJSFJvWlNCdFpYTnpZV2RsYm5NZ2MyVnVkQ0JpZVNCamNtVmhkR1VnZEc4Z2RHaGxJRzlpYzJWeWRtVnljeUJJZVhCbGNuUjVJR0Z5Y21GNUxseHlYRzRnSUNvZ1FIQmhjbUZ0SUh0bWRXNWpkR2x2YmlobGRtVnVkRG9nVFhOblJYWmxiblFwZlNCallXeHNZbUZqYTF4eVhHNGdJQ292WEhKY2JpQWdiMjVPYjNScFptbGpZWFJwYjI0b1kyRnNiR0poWTJzcElIdGNjbHh1SUNBZ0lIUm9hWE11WDI5dVRtOTBhV1pwWTJGMGFXOXVTR0Z1Wkd4bGNpQTlJR05oYkd4aVlXTnJPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdYMk55WldGMFpTaHBibkIxZENrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQnlaWFIxY200Z2JtVjNJRkJ5YjIxcGMyVW9LSEpsYzI5c2RtVXNJSEpsYW1WamRDa2dQVDRnZTF4eVhHNWNjbHh1SUNBZ0lDQWdiR1YwSUhKbGNHOXlkR1Z5U1c1d2RYUWdJRDBnVDJKcVpXTjBMbUZ6YzJsbmJpaDdmU3dnYVc1d2RYUXBPMXh5WEc1Y2NseHVJQ0FnSUNBZ2JHVjBJSEpsYzNWdFpTQTlJR2x1Y0hWMExuSmxjM1Z0WlR0Y2NseHVJQ0FnSUNBZ0x5OXNaWFFnYVc1cGRHbGhiRVJoZEdFZ1BTQnBibkIxZEM1cGJtbDBhV0ZzUkdGMFlTQjhmQ0I3ZlR0Y2NseHVJQ0FnSUNBZ0x5OXNaWFFnYzJOb1pXMWhJRDBnWTNKcGRHVnlhV0V1YzJOb1pXMWhPMXh5WEc1Y2NseHVJQ0FnSUNBZ0x5OXdZMmc2SUVrbmRtVWdZMjl0YldWdWRHVmtJSE5wYm1ObElIUm9hWE1nYVhNZ2JtOTBJR1JoZEdGY2NseHVJQ0FnSUNBZ0x5cHBibWwwYVdGc1JHRjBZUzV5WlhCdmNuUmxjaUE5SUY5MGFHbHpMbDl2ZDI1bGNqdGNjbHh1SUNBZ0lDQWdhVzVwZEdsaGJFUmhkR0V1YzJOb1pXMWhJRDBnWTNKcGRHVnlhV0V1YzJOb1pXMWhPeW92WEhKY2JseHlYRzRnSUNBZ0lDQnlaWEJ2Y25SbGNrbHVjSFYwTG1OeVpXRjBaV1FnUFNBb2JtVjNJRVJoZEdVcExuUnZTVk5QVTNSeWFXNW5LQ2s3WEhKY2JpQWdJQ0FnSUhKbGNHOXlkR1Z5U1c1d2RYUXVjblZ1ZEdsdFpTQTlJRjkwYUdsekxsOXlkVzUwYVcxbFZYSnNPMXh5WEc1Y2NseHVJQ0FnSUNBZ2JHVjBJSEpsY1hWbGMzUldZV3gxWlNBOUlHUmxaWEJEYkc5dVpTaHlaWEJ2Y25SbGNrbHVjSFYwS1R0Y2NseHVYSEpjYmlBZ0lDQWdJR1JsYkdWMFpTQnlaWEYxWlhOMFZtRnNkV1V1Y0RKd08xeHlYRzRnSUNBZ0lDQmtaV3hsZEdVZ2NtVnhkV1Z6ZEZaaGJIVmxMbk4wYjNKbE8xeHlYRzRnSUNBZ0lDQmtaV3hsZEdVZ2NtVnhkV1Z6ZEZaaGJIVmxMbTlpYzJWeWRtVnljenRjY2x4dUlDQWdJQ0FnWkdWc1pYUmxJSEpsY1hWbGMzUldZV3gxWlM1cFpHVnVkR2wwZVR0Y2NseHVYSEpjYmlBZ0lDQWdJQzh2Umt4UFZ5MVBWVlE2SUhSb2FYTWdiV1Z6YzJGblpTQjNhV3hzSUdKbElITmxiblFnZEc4Z2RHaGxJSEoxYm5ScGJXVWdhVzV6ZEdGdVkyVWdiMllnVTNsdVkyaGxjazFoYm1GblpYSWdMVDRnWDI5dVEzSmxZWFJsWEhKY2JpQWdJQ0FnSUd4bGRDQnlaWEYxWlhOMFRYTm5JRDBnZTF4eVhHNGdJQ0FnSUNBZ0lIUjVjR1U2SUNkamNtVmhkR1VuTENCbWNtOXRPaUJmZEdocGN5NWZiM2R1WlhJc0lIUnZPaUJmZEdocGN5NWZjM1ZpVlZKTUxGeHlYRzRnSUNBZ0lDQWdJR0p2WkhrNklIc2djbVZ6ZFcxbE9pQnlaWE4xYldVc0lIWmhiSFZsT2lCeVpYRjFaWE4wVm1Gc2RXVWdJSDFjY2x4dUlDQWdJQ0FnZlR0Y2NseHVYSEpjYmx4eVhHNGdJQ0FnSUNBdkwzSmxjWFZsYzNSTmMyY3VZbTlrZVM1MllXeDFaU0E5SUdsdWFYUnBZV3hFWVhSaE8xeHlYRzRnSUNBZ0lDQXZMM0psY1hWbGMzUk5jMmN1WW05a2VTNXlaWEJ2Y25SbGNpQTlJRjkwYUdsekxsOXZkMjVsY2p0Y2NseHVJQ0FnSUNBZ2NtVnhkV1Z6ZEUxelp5NWliMlI1TG5OamFHVnRZU0E5SUhKbGNHOXlkR1Z5U1c1d2RYUXVjMk5vWlcxaE8xeHlYRzVjY2x4dUlDQWdJQ0FnYVdZZ0tISmxjRzl5ZEdWeVNXNXdkWFF1Y0RKd0tTQnlaWEYxWlhOMFRYTm5MbUp2WkhrdWNESndJRDBnY21Wd2IzSjBaWEpKYm5CMWRDNXdNbkE3WEhKY2JpQWdJQ0FnSUdsbUlDaHlaWEJ2Y25SbGNrbHVjSFYwTG5OMGIzSmxLU0J5WlhGMVpYTjBUWE5uTG1KdlpIa3VjM1J2Y21VZ1BTQnlaWEJ2Y25SbGNrbHVjSFYwTG5OMGIzSmxPMXh5WEc0Z0lDQWdJQ0F2THlCcFppQW9jbVZ3YjNKMFpYSkpibkIxZEM1aGRYUm9iM0pwYzJVcElISmxjWFZsYzNSTmMyY3VZbTlrZVM1aGRYUm9iM0pwYzJVZ1BTQnlaWEJ2Y25SbGNrbHVjSFYwTG1GMWRHaHZjbWx6WlR0Y2NseHVJQ0FnSUNBZ2FXWWdLSEpsY0c5eWRHVnlTVzV3ZFhRdWFXUmxiblJwZEhrcElISmxjWFZsYzNSTmMyY3VZbTlrZVM1cFpHVnVkR2wwZVNBOUlISmxjRzl5ZEdWeVNXNXdkWFF1YVdSbGJuUnBkSGs3WEhKY2JseHlYRzRnSUNBZ0lDQmpiMjV6YjJ4bExteHZaeWduVzNONWJtTm9aWEl1WDJOeVpXRjBaVjA2SUNjc0lISmxjRzl5ZEdWeVNXNXdkWFFzSUhKbGNYVmxjM1JOYzJjcE8xeHlYRzVjY2x4dUlDQWdJQ0FnTHk5eVpYRjFaWE4wSUdOeVpXRjBaU0IwYnlCMGFHVWdZV3hzYjJOaGRHbHZiaUJ6ZVhOMFpXMHVJRU5oYmlCaVpTQnlaV3BsWTNSbFpDQmllU0IwYUdVZ1VHOXNhV041Ulc1bmFXNWxMbHh5WEc0Z0lDQWdJQ0JmZEdocGN5NWZZblZ6TG5CdmMzUk5aWE56WVdkbEtISmxjWFZsYzNSTmMyY3NJQ2h5WlhCc2VTa2dQVDRnZTF4eVhHNGdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiYzNsdVkyaGxjaUF0SUdOeVpXRjBaVjBnTFNCamNtVmhkR1V0Y21WemNHOXVjMlU2SUNjc0lISmxjR3g1S1R0Y2NseHVJQ0FnSUNBZ0lDQnBaaUFvY21Wd2JIa3VZbTlrZVM1amIyUmxJRDA5UFNBeU1EQXBJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lDOHZjbVZ3YjNKMFpYSWdZM0psWVhScGIyNGdZV05qWlhCMFpXUmNjbHh1SUNBZ0lDQWdJQ0FnSUhKbGNHOXlkR1Z5U1c1d2RYUXVkWEpzSUQwZ2NtVndiSGt1WW05a2VTNXlaWE52ZFhKalpUdGNjbHh1WEhKY2JpQWdJQ0FnSUNBZ0lDQnlaWEJ2Y25SbGNrbHVjSFYwTG5OMFlYUjFjeUE5SUNkc2FYWmxKenN2THlCd1kyZzZJR1J2SUhkbElHNWxaQ0IwYUdselAxeHlYRzRnSUNBZ0lDQWdJQ0FnY21Wd2IzSjBaWEpKYm5CMWRDNXplVzVqYUdWeUlEMGdYM1JvYVhNN1hISmNiaUFnSUNBZ0lDQWdJQ0J5WlhCdmNuUmxja2x1Y0hWMExtTm9hV3hrY21WdWN5QTlJSEpsY0d4NUxtSnZaSGt1WTJocGJHUnlaVzVTWlhOdmRYSmpaWE03WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnYkdWMElHNWxkMDlpYWlBOUlHNWxkeUJFWVhSaFQySnFaV04wVW1Wd2IzSjBaWElvY21Wd2IzSjBaWEpKYm5CMWRDazdYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDQWdYM1JvYVhNdVgzSmxjRzl5ZEdWeWMxdHlaWEJ2Y25SbGNrbHVjSFYwTG5WeWJGMGdQU0J1WlhkUFltbzdYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDQWdibVYzVDJKcUxtbHVkbWwwWlU5aWMyVnlkbVZ5Y3locGJuQjFkQzVoZFhSb2IzSnBjMlVwTzF4eVhHNWNjbHh1SUNBZ0lDQWdJQ0FnSUhKbGMyOXNkbVVvYm1WM1QySnFLVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdmU0JsYkhObElIdGNjbHh1SUNBZ0lDQWdJQ0FnSUM4dmNtVndiM0owWlhJZ1kzSmxZWFJwYjI0Z2NtVnFaV04wWldSY2NseHVJQ0FnSUNBZ0lDQWdJSEpsYW1WamRDaHlaWEJzZVM1aWIyUjVMbVJsYzJNcE8xeHlYRzRnSUNBZ0lDQWdJSDFjY2x4dUlDQWdJQ0FnZlNrN1hISmNiaUFnSUNCOUtUdGNjbHh1WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0JmY21WemRXMWxRM0psWVhSbEtHTnlhWFJsY21saEtTQjdYSEpjYmlBZ0lDQnNaWFFnWDNSb2FYTWdQU0IwYUdsek8xeHlYRzVjY2x4dUlDQWdJSEpsZEhWeWJpQnVaWGNnVUhKdmJXbHpaU2dvY21WemIyeDJaU3dnY21WcVpXTjBLU0E5UGlCN1hISmNiaUFnSUNBZ0lHeGxkQ0J5WlhOMWJXVWdQU0JqY21sMFpYSnBZUzV5WlhOMWJXVTdYSEpjYmlBZ0lDQWdJQzh2YkdWMElHbHVhWFJwWVd4RVlYUmhJRDBnWTNKcGRHVnlhV0V1WkdGMFlTQjhmQ0I3ZlR0Y2NseHVYSEpjYmlBZ0lDQWdJQzh2Umt4UFZ5MVBWVlE2SUhSb2FYTWdiV1Z6YzJGblpTQjNhV3hzSUdKbElITmxiblFnZEc4Z2RHaGxJSEoxYm5ScGJXVWdhVzV6ZEdGdVkyVWdiMllnVTNsdVkyaGxjazFoYm1GblpYSWdMVDRnWDI5dVEzSmxZWFJsWEhKY2JpQWdJQ0FnSUd4bGRDQnlaWEYxWlhOMFRYTm5JRDBnZTF4eVhHNGdJQ0FnSUNBZ0lIUjVjR1U2SUNkamNtVmhkR1VuTENCbWNtOXRPaUJmZEdocGN5NWZiM2R1WlhJc0lIUnZPaUJmZEdocGN5NWZjM1ZpVlZKTUxGeHlYRzRnSUNBZ0lDQWdJR0p2WkhrNklIc2djbVZ6ZFcxbE9pQnlaWE4xYldVZ2ZWeHlYRzRnSUNBZ0lDQjlPMXh5WEc1Y2NseHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMXR6ZVc1amFHVnlJQzBnWTNKbFlYUmxYVG9nSnl3Z1kzSnBkR1Z5YVdFc0lISmxjWFZsYzNSTmMyY3BPMXh5WEc1Y2NseHVJQ0FnSUNBZ2FXWWdLR055YVhSbGNtbGhLU0I3WEhKY2JpQWdJQ0FnSUNBZ2NtVnhkV1Z6ZEUxelp5NWliMlI1TG5aaGJIVmxJRDBnWTNKcGRHVnlhV0U3WEhKY2JpQWdJQ0FnSUNBZ2NtVnhkV1Z6ZEUxelp5NWliMlI1TG5aaGJIVmxMbkpsY0c5eWRHVnlJRDBnWDNSb2FYTXVYMjkzYm1WeU8xeHlYRzRnSUNBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnSUNCcFppQW9ZM0pwZEdWeWFXRXVjREp3S1NCeVpYRjFaWE4wVFhObkxtSnZaSGt1Y0RKd0lEMGdZM0pwZEdWeWFXRXVjREp3TzF4eVhHNGdJQ0FnSUNCcFppQW9ZM0pwZEdWeWFXRXVjM1J2Y21VcElISmxjWFZsYzNSTmMyY3VZbTlrZVM1emRHOXlaU0E5SUdOeWFYUmxjbWxoTG5OMGIzSmxPMXh5WEc0Z0lDQWdJQ0JwWmlBb1kzSnBkR1Z5YVdFdWIySnpaWEoyWlhKektTQnlaWEYxWlhOMFRYTm5MbUp2WkhrdVlYVjBhRzl5YVhObElEMGdZM0pwZEdWeWFXRXViMkp6WlhKMlpYSnpPMXh5WEc0Z0lDQWdJQ0JwWmlBb1kzSnBkR1Z5YVdFdWFXUmxiblJwZEhrcElISmxjWFZsYzNSTmMyY3VZbTlrZVM1cFpHVnVkR2wwZVNBOUlHTnlhWFJsY21saExtbGtaVzUwYVhSNU8xeHlYRzVjY2x4dUlDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0oxdHplVzVqYUdWeUxsOXlaWE4xYldWRGNtVmhkR1ZkSUMwZ2NtVnpkVzFsSUcxbGMzTmhaMlU2SUNjc0lISmxjWFZsYzNSTmMyY3BPMXh5WEc1Y2NseHVJQ0FnSUNBZ0x5OXlaWEYxWlhOMElHTnlaV0YwWlNCMGJ5QjBhR1VnWVd4c2IyTmhkR2x2YmlCemVYTjBaVzB1SUVOaGJpQmlaU0J5WldwbFkzUmxaQ0JpZVNCMGFHVWdVRzlzYVdONVJXNW5hVzVsTGx4eVhHNGdJQ0FnSUNCZmRHaHBjeTVmWW5WekxuQnZjM1JOWlhOellXZGxLSEpsY1hWbGMzUk5jMmNzSUNoeVpYQnNlU2tnUFQ0Z2UxeHlYRzRnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkYmMzbHVZMmhsY2k1ZmNtVnpkVzFsUTNKbFlYUmxYU0F0SUdOeVpXRjBaUzF5WlhOMWJXVmtMWEpsYzNCdmJuTmxPaUFuTENCeVpYQnNlU2s3WEhKY2JpQWdJQ0FnSUNBZ2FXWWdLSEpsY0d4NUxtSnZaSGt1WTI5a1pTQTlQVDBnTWpBd0tTQjdYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDQWdiR1YwSUd4cGMzUlBabEpsY0c5eWRHVnljeUE5SUhKbGNHeDVMbUp2WkhrdWRtRnNkV1U3WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnWm05eUlDaHNaWFFnYVc1a1pYZ2dhVzRnYkdsemRFOW1VbVZ3YjNKMFpYSnpLU0I3WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnSUNCc1pYUWdaR0YwWVU5aWFtVmpkQ0E5SUd4cGMzUlBabEpsY0c5eWRHVnljMXRwYm1SbGVGMDdYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0F2TDNKbGNHOXlkR1Z5SUdOeVpXRjBhVzl1SUdGalkyVndkR1ZrWEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnSUNBdkx5QnBibWwwYVdGc1JHRjBZUzVqYUdsc1pISmxibk1nUFNCa1pXVndRMnh2Ym1Vb1pHRjBZVTlpYW1WamRDNWphR2xzWkhKbGJuTXBJSHg4SUh0OU8xeHlYRzRnSUNBZ0lDQWdJQ0FnSUNBdkx5QnBibWwwYVdGc1JHRjBZU0E5SUdSbFpYQkRiRzl1WlNoa1lYUmhUMkpxWldOMExtUmhkR0VwSUh4OElIdDlPMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQmtZWFJoVDJKcVpXTjBMbVJoZEdFZ1BTQmtaV1Z3UTJ4dmJtVW9aR0YwWVU5aWFtVmpkQzVrWVhSaEtTQjhmQ0I3ZlR0Y2NseHVJQ0FnSUNBZ0lDQWdJQ0FnWkdGMFlVOWlhbVZqZEM1amFHbHNaSEpsYms5aWFtVmpkSE1nUFNCa1pXVndRMnh2Ym1Vb1pHRjBZVTlpYW1WamRDNWphR2xzWkhKbGJrOWlhbVZqZEhNcElIeDhJSHQ5TzF4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0JrWVhSaFQySnFaV04wTG0xMWRIVmhiQ0E5SUdaaGJITmxPMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQmtZWFJoVDJKcVpXTjBMbkpsYzNWdFpXUWdQU0IwY25WbE8xeHlYRzRnSUNBZ0lDQWdJQ0FnSUNCa1lYUmhUMkpxWldOMExuTjBZWFIxY3lBOUlDZHNhWFpsSnpzdkx5QndZMmc2SUdSdklIZGxJRzVsWkNCMGFHbHpQMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQmtZWFJoVDJKcVpXTjBMbk41Ym1Ob1pYSWdQU0JmZEdocGN6dGNjbHh1WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkYmMzbHVZMmhsY2k1ZmNtVnpkVzFsUTNKbFlYUmxYU0F0SUdOeVpXRjBaUzF5WlhOMWJXVmtMV1JoZEdGUFltcGxZM1JTWlhCdmNuUmxjaWNzSUdSaGRHRlBZbXBsWTNRcE8xeHlYRzVjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdiR1YwSUc1bGQwOWlhaUE5SUc1bGR5QkVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSW9aR0YwWVU5aWFtVmpkQ2s3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJRzVsZDA5aWFpNXlaWE4xYldWRGFHbHNaSEpsYm5Nb1pHRjBZVTlpYW1WamRDNWphR2xzWkhKbGJrOWlhbVZqZEhNcE8xeHlYRzRnSUNBZ0lDQWdJQ0FnSUNCZmRHaHBjeTVmY21Wd2IzSjBaWEp6VzJSaGRHRlBZbXBsWTNRdWRYSnNYU0E5SUc1bGQwOWlhanRjY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnY21WemIyeDJaU2hmZEdocGN5NWZjbVZ3YjNKMFpYSnpLVHRjY2x4dUlDQWdJQ0FnSUNBZ0lHbG1JQ2gwYUdsekxsOXZibEpsY0c5eWRHVnljMUpsYzNWdFpTa2dkR2hwY3k1ZmIyNVNaWEJ2Y25SbGNuTlNaWE4xYldVb2RHaHBjeTVmY21Wd2IzSjBaWEp6S1R0Y2NseHVYSEpjYmlBZ0lDQWdJQ0FnZlNCbGJITmxJR2xtSUNoeVpYQnNlUzVpYjJSNUxtTnZaR1VnUFQwOUlEUXdOQ2tnZTF4eVhHNGdJQ0FnSUNBZ0lDQWdjbVZ6YjJ4MlpTaDdmU2s3WEhKY2JpQWdJQ0FnSUNBZ2ZTQmxiSE5sSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJQzh2Y21Wd2IzSjBaWElnWTNKbFlYUnBiMjRnY21WcVpXTjBaV1JjY2x4dUlDQWdJQ0FnSUNBZ0lISmxhbVZqZENoeVpYQnNlUzVpYjJSNUxtUmxjMk1wTzF4eVhHNGdJQ0FnSUNBZ0lIMWNjbHh1SUNBZ0lDQWdmU2s3WEhKY2JpQWdJQ0I5S1R0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUY5emRXSnpZM0pwWW1Vb2FXNXdkWFFwSUh0Y2NseHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEhKY2JseHlYRzRnSUNBZ2NtVjBkWEp1SUc1bGR5QlFjbTl0YVhObEtDaHlaWE52YkhabExDQnlaV3BsWTNRcElEMCtJSHRjY2x4dVhISmNiaUFnSUNBZ0lDOHZSa3hQVnkxUFZWUTZJSFJvYVhNZ2JXVnpjMkZuWlNCM2FXeHNJR0psSUhObGJuUWdkRzhnZEdobElISjFiblJwYldVZ2FXNXpkR0Z1WTJVZ2IyWWdVM2x1WTJobGNrMWhibUZuWlhJZ0xUNGdYMjl1VEc5allXeFRkV0p6WTNKcFltVmNjbHh1SUNBZ0lDQWdiR1YwSUhOMVluTmpjbWxpWlUxelp5QTlJSHRjY2x4dUlDQWdJQ0FnSUNCMGVYQmxPaUFuYzNWaWMyTnlhV0psSnl3Z1puSnZiVG9nWDNSb2FYTXVYMjkzYm1WeUxDQjBiem9nWDNSb2FYTXVYM04xWWxWU1RDeGNjbHh1SUNBZ0lDQWdJQ0JpYjJSNU9pQjdmVnh5WEc0Z0lDQWdJQ0I5TzF4eVhHNWNjbHh1SUNBZ0lDQWdMeThnU0hsd1pYSjBlU0J5WlhGMVpYTjBJSFJ2SUdKbElHRnVJRTlpYzJWeWRtVnlYSEpjYmlBZ0lDQWdJQzh2SUdoMGRIQnpPaTh2WjJsMGFIVmlMbU52YlM5eVpWUklTVTVMTFhCeWIycGxZM1F2YzNCbFkzTXZZbXh2WWk5dFlYTjBaWEl2YldWemMyRm5aWE12WkdGMFlTMXplVzVqTFcxbGMzTmhaMlZ6TG0xa0kyaDVjR1Z5ZEhrdGNtVnhkV1Z6ZEMxMGJ5MWlaUzFoYmkxdlluTmxjblpsY2x4eVhHNWNjbHh1SUNBZ0lDQWdMeThnVW1WemRXMWxJRk4xWW5OamNtbHdkR2x2Ym5NZ1ptOXlJSFJvWlNCellXMWxJRWg1Y0dWeWRIa2dWVkpNWEhKY2JpQWdJQ0FnSUM4dklHaDBkSEJ6T2k4dloybDBhSFZpTG1OdmJTOXlaVlJJU1U1TExYQnliMnBsWTNRdmMzQmxZM012WW14dllpOXRZWE4wWlhJdmJXVnpjMkZuWlhNdlpHRjBZUzF6ZVc1akxXMWxjM05oWjJWekxtMWtJM0psYzNWdFpTMXpkV0p6WTNKcGNIUnBiMjV6TFdadmNpMTBhR1V0YzJGdFpTMW9lWEJsY25SNUxYVnliRnh5WEc1Y2NseHVJQ0FnSUNBZ0x5OGdVbVZ6ZFcxbElGTjFZbk5qY21sd2RHbHZibk1nWm05eUlHRWdZMlZ5ZEdGcGJpQjFjMlZ5SUdGdVpDQmtZWFJoSUhOamFHVnRZU0JwYm1SbGNHVnVaR1Z1ZEd4NUlHOW1JSFJvWlNCSWVYQmxjblI1SUZWU1RDNWNjbHh1SUNBZ0lDQWdMeThnYUhSMGNITTZMeTluYVhSb2RXSXVZMjl0TDNKbFZFaEpUa3N0Y0hKdmFtVmpkQzl6Y0dWamN5OWliRzlpTDIxaGMzUmxjaTl0WlhOellXZGxjeTlrWVhSaExYTjVibU10YldWemMyRm5aWE11YldRamNtVnpkVzFsTFhOMVluTmpjbWx3ZEdsdmJuTXRabTl5TFdFdFkyVnlkR0ZwYmkxMWMyVnlMV0Z1WkMxa1lYUmhMWE5qYUdWdFlTMXBibVJsY0dWdVpHVnVkR3g1TFc5bUxYUm9aUzFvZVhCbGNuUjVMWFZ5YkZ4eVhHNGdJQ0FnSUNCcFppQW9hVzV3ZFhRcElIdGNjbHh1SUNBZ0lDQWdJQ0JwWmlBb2FXNXdkWFF1YUdGelQzZHVVSEp2Y0dWeWRIa29KM0F5Y0NjcEtTQnpkV0p6WTNKcFltVk5jMmN1WW05a2VTNXdNbkFnUFNCcGJuQjFkQzV3TW5BN1hISmNiaUFnSUNBZ0lDQWdhV1lnS0dsdWNIVjBMbWhoYzA5M2JsQnliM0JsY25SNUtDZHpkRzl5WlNjcEtTQnpkV0p6WTNKcFltVk5jMmN1WW05a2VTNXpkRzl5WlNBOUlHbHVjSFYwTG5OMGIzSmxPMXh5WEc0Z0lDQWdJQ0FnSUdsbUlDaHBibkIxZEM1b1lYTlBkMjVRY205d1pYSjBlU2duYzJOb1pXMWhKeWtwSUhOMVluTmpjbWxpWlUxelp5NWliMlI1TG5OamFHVnRZU0E5SUdsdWNIVjBMbk5qYUdWdFlUdGNjbHh1SUNBZ0lDQWdJQ0JwWmlBb2FXNXdkWFF1YUdGelQzZHVVSEp2Y0dWeWRIa29KMmxrWlc1MGFYUjVKeWtwSUhOMVluTmpjbWxpWlUxelp5NWliMlI1TG1sa1pXNTBhWFI1SUQwZ2FXNXdkWFF1YVdSbGJuUnBkSGs3WEhKY2JpQWdJQ0FnSUNBZ2FXWWdLR2x1Y0hWMExtaGhjMDkzYmxCeWIzQmxjblI1S0NkeVpYTnZkWEpqWlNjcEtTQnpkV0p6WTNKcFltVk5jMmN1WW05a2VTNXlaWE52ZFhKalpTQTlJR2x1Y0hWMExuSmxjMjkxY21ObE8xeHlYRzRnSUNBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnSUNCemRXSnpZM0pwWW1WTmMyY3VZbTlrZVM1eVpYTjFiV1VnUFNCcGJuQjFkQzV5WlhOMWJXVTdYSEpjYmx4eVhHNGdJQ0FnSUNBdkwxUlBSRTg2SUVadmNpQkdkWEowYUdWeUlGTjBkV1I1WEhKY2JpQWdJQ0FnSUM4dmJHVjBJRzExZEhWaGJFRjFkR2hsYm5ScFkyRjBhVzl1SUQwZ2FXNXdkWFF1YlhWMGRXRnNPMXh5WEc0Z0lDQWdJQ0JwWmlBb2FXNXdkWFF1YUdGelQzZHVVSEp2Y0dWeWRIa29KMjExZEhWaGJDY3BLU0J6ZFdKelkzSnBZbVZOYzJjdVltOWtlUzV0ZFhSMVlXeEJkWFJvWlc1MGFXTmhkR2x2YmlBOUlHbHVjSFYwTG0xMWRIVmhiRHRjY2x4dVhISmNiaUFnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiYzNsdVkyaGxjbDl6ZFdKelkzSnBZbVZkSUMwZ2MzVmljMk55YVdKbElHMWxjM05oWjJVNklDY3NJR2x1Y0hWMExDQnpkV0p6WTNKcFltVk5jMmNwTzF4eVhHNWNjbHh1SUNBZ0lDQWdMeTl5WlhGMVpYTjBJSE4xWW5OamNtbHdkR2x2Ymx4eVhHNGdJQ0FnSUNBdkwxQnliM1pwYzJsdmJtRnNJR1JoZEdFZ2FYTWdZWEJ3YkdsbFpDQjBieUIwYUdVZ1JHRjBZVTlpYW1WamRFOWljMlZ5ZG1WeUlHRm1kR1Z5SUdOdmJtWnBjbTFoZEdsdmJpNGdUM0lnWkdselkyRnlaR1ZrSUdsbUlIUm9aWEpsSUdseklHNXZJR052Ym1acGNtMWhkR2x2Ymk1Y2NseHVJQ0FnSUNBZ0x5OW1iM0lnYlc5eVpTQnBibVp2SUhObFpTQjBhR1VnUkdGMFlWQnliM1pwYzJsdmJtRnNJR05zWVhOeklHUnZZM1Z0Wlc1MFlYUnBiMjR1WEhKY2JpQWdJQ0FnSUY5MGFHbHpMbDlpZFhNdWNHOXpkRTFsYzNOaFoyVW9jM1ZpYzJOeWFXSmxUWE5uTENBb2NtVndiSGtwSUQwK0lIdGNjbHh1SUNBZ0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblczTjVibU5vWlhKZElDMGdjM1ZpYzJOeWFXSmxMWEpsYzNCdmJuTmxPaUFuTENCeVpYQnNlU2s3WEhKY2JseHlYRzRnSUNBZ0lDQWdJQzh2YkdWMElITmphR1Z0WVNBOUlISmxjR3g1TG1KdlpIa3VjMk5vWlcxaE8xeHlYRzRnSUNBZ0lDQWdJR3hsZENCdlltcFZVa3dnUFNCeVpYQnNlUzVpYjJSNUxuSmxjMjkxY21ObE8xeHlYRzVjY2x4dUlDQWdJQ0FnSUNCc1pYUWdibVYzVUhKdmRtbHphVzl1WVd3Z1BTQmZkR2hwY3k1ZmNISnZkbWx6YVc5dVlXeHpXMjlpYWxWU1RGMDdYSEpjYmlBZ0lDQWdJQ0FnWkdWc1pYUmxJRjkwYUdsekxsOXdjbTkyYVhOcGIyNWhiSE5iYjJKcVZWSk1YVHRjY2x4dUlDQWdJQ0FnSUNCcFppQW9ibVYzVUhKdmRtbHphVzl1WVd3cElHNWxkMUJ5YjNacGMybHZibUZzTGw5eVpXeGxZWE5sVEdsemRHVnVaWEp6S0NrN1hISmNibHh5WEc0Z0lDQWdJQ0FnSUdsbUlDaHlaWEJzZVM1aWIyUjVMbU52WkdVZ1BDQXlNREFwSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkYmMzbHVZMmhsY2wwZ0xTQnVaWGNnUkdGMFlWQnliM1pwYzJsdmJtRnNPaUFuTENCeVpYQnNlUzVpYjJSNUxtTm9hV3hrY21WdVVtVnpiM1Z5WTJWekxDQnZZbXBWVWt3cE8xeHlYRzRnSUNBZ0lDQWdJQ0FnYm1WM1VISnZkbWx6YVc5dVlXd2dQU0J1WlhjZ1JHRjBZVkJ5YjNacGMybHZibUZzS0Y5MGFHbHpMbDl2ZDI1bGNpd2diMkpxVlZKTUxDQmZkR2hwY3k1ZlluVnpMQ0J5WlhCc2VTNWliMlI1TG1Ob2FXeGtjbVZ1VW1WemIzVnlZMlZ6S1R0Y2NseHVJQ0FnSUNBZ0lDQWdJRjkwYUdsekxsOXdjbTkyYVhOcGIyNWhiSE5iYjJKcVZWSk1YU0E5SUc1bGQxQnliM1pwYzJsdmJtRnNPMXh5WEc0Z0lDQWdJQ0FnSUgwZ1pXeHpaU0JwWmlBb2NtVndiSGt1WW05a2VTNWpiMlJsSUQwOVBTQXlNREFwSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJR052Ym5OdmJHVXViRzluS0NkYmMzbHVZMmhsY2wwZ0xTQnVaWGNnUkdGMFlTQlBZbXBsWTNRZ1QySnpaWEoyWlhJNklDY3NJSEpsY0d4NUxDQmZkR2hwY3k1ZmNISnZkbWx6YVc5dVlXeHpLVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0F2S214bGRDQnBibWwwYVdGc1JHRjBZU0E5SUhKbGNHeDVMbUp2WkhrdWRtRnNkV1V1WkdGMFlUdGNjbHh1SUNBZ0lDQWdJQ0FnSUdsbUlDZ2hhVzVwZEdsaGJFUmhkR0V1YUdGelQzZHVVSEp2Y0dWeWRIa29KMk5vYVd4a2NtVnVjeWNwS1NCN0lHbHVhWFJwWVd4RVlYUmhMbU5vYVd4a2NtVnVjeUE5SUh0OU95QjlYSEpjYmlBZ0lDQWdJQ0FnSUNCcFppQW9JV2x1YVhScFlXeEVZWFJoTG1oaGMwOTNibEJ5YjNCbGNuUjVLQ2RrWVhSaEp5a3BJSHNnYVc1cGRHbGhiRVJoZEdFdVpHRjBZU0E5SUh0OU95QjlLaTljY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0JzWlhRZ2IySnpaWEoyWlhKSmJuQjFkQ0E5SUhKbGNHeDVMbUp2WkhrdWRtRnNkV1U3WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnYjJKelpYSjJaWEpKYm5CMWRDNXplVzVqYUdWeUlEMGdYM1JvYVhNN1hISmNiaUFnSUNBZ0lDQWdJQ0F2TDI5aWMyVnlkbVZ5U1c1d2RYUXVjM1JoZEhWeklEMGdKMjl1Snp0Y2NseHVJQ0FnSUNBZ0lDQWdJRzlpYzJWeWRtVnlTVzV3ZFhRdWNESndJRDBnYVc1d2RYUXVjREp3TzF4eVhHNGdJQ0FnSUNBZ0lDQWdiMkp6WlhKMlpYSkpibkIxZEM1emRHOXlaU0E5SUdsdWNIVjBMbk4wYjNKbE8xeHlYRzRnSUNBZ0lDQWdJQ0FnYjJKelpYSjJaWEpKYm5CMWRDNXBaR1Z1ZEdsMGVTQTlJR2x1Y0hWMExtbGtaVzUwYVhSNU8xeHlYRzRnSUNBZ0lDQWdJQ0FnYjJKelpYSjJaWEpKYm5CMWRDNXlaWE4xYldVZ1BTQnBibkIxZEM1eVpYTjFiV1U3WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnTHk4Z2RHOWtiem9nUm05eUlFWjFjblJvWlhJZ1UzUjFaSGxjY2x4dUlDQWdJQ0FnSUNBZ0lHOWljMlZ5ZG1WeVNXNXdkWFF1YlhWMGRXRnNJRDBnYVc1d2RYUXViWFYwZFdGc08xeHlYRzRnSUNBZ0lDQWdJQ0FnYjJKelpYSjJaWEpKYm5CMWRDNWphR2xzWkhKbGJpQTlJRzVsZDFCeWIzWnBjMmx2Ym1Gc0xtTm9hV3hrY21WdU8xeHlYRzVjY2x4dUlDQWdJQ0FnSUNBZ0lDOHZWRTlFVHpvZ2JYVjBkV0ZzUVhWMGFHVnVkR2xqWVhScGIyNGdSbTl5SUVaMWNuUm9aWElnVTNSMVpIbGNjbHh1SUNBZ0lDQWdJQ0FnSUd4bGRDQnVaWGRQWW1vZ1BTQnVaWGNnUkdGMFlVOWlhbVZqZEU5aWMyVnlkbVZ5S0c5aWMyVnlkbVZ5U1c1d2RYUXBPMXh5WEc0Z0lDQWdJQ0FnSUNBZ1gzUm9hWE11WDI5aWMyVnlkbVZ5YzF0dlltcFZVa3hkSUQwZ2JtVjNUMkpxTzF4eVhHNWNjbHh1SUNBZ0lDQWdJQ0FnSUhKbGMyOXNkbVVvYm1WM1QySnFLVHRjY2x4dUlDQWdJQ0FnSUNBZ0lHNWxkMUJ5YjNacGMybHZibUZzTG1Gd2NHeDVLRzVsZDA5aWFpazdYSEpjYmlBZ0lDQWdJQ0FnZlNCbGJITmxJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lISmxhbVZqZENoeVpYQnNlUzVpYjJSNUxtUmxjMk1wTzF4eVhHNGdJQ0FnSUNBZ0lIMWNjbHh1SUNBZ0lDQWdmU2s3WEhKY2JpQWdJQ0I5S1R0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUY5eVpYTjFiV1ZUZFdKelkzSnBZbVVvWTNKcGRHVnlhV0VwSUh0Y2NseHVJQ0FnSUd4bGRDQmZkR2hwY3lBOUlIUm9hWE03WEhKY2JseHlYRzRnSUNBZ2NtVjBkWEp1SUc1bGR5QlFjbTl0YVhObEtDaHlaWE52YkhabExDQnlaV3BsWTNRcElEMCtJSHRjY2x4dVhISmNiaUFnSUNBZ0lDOHZSa3hQVnkxUFZWUTZJSFJvYVhNZ2JXVnpjMkZuWlNCM2FXeHNJR0psSUhObGJuUWdkRzhnZEdobElISjFiblJwYldVZ2FXNXpkR0Z1WTJVZ2IyWWdVM2x1WTJobGNrMWhibUZuWlhJZ0xUNGdYMjl1VEc5allXeFRkV0p6WTNKcFltVmNjbHh1SUNBZ0lDQWdiR1YwSUhOMVluTmpjbWxpWlUxelp5QTlJSHRjY2x4dUlDQWdJQ0FnSUNCMGVYQmxPaUFuYzNWaWMyTnlhV0psSnl3Z1puSnZiVG9nWDNSb2FYTXVYMjkzYm1WeUxDQjBiem9nWDNSb2FYTXVYM04xWWxWU1RDeGNjbHh1SUNBZ0lDQWdJQ0JpYjJSNU9pQjdmVnh5WEc0Z0lDQWdJQ0I5TzF4eVhHNWNjbHh1SUNBZ0lDQWdMeThnU0hsd1pYSjBlU0J5WlhGMVpYTjBJSFJ2SUdKbElHRnVJRTlpYzJWeWRtVnlYSEpjYmlBZ0lDQWdJQzh2SUdoMGRIQnpPaTh2WjJsMGFIVmlMbU52YlM5eVpWUklTVTVMTFhCeWIycGxZM1F2YzNCbFkzTXZZbXh2WWk5dFlYTjBaWEl2YldWemMyRm5aWE12WkdGMFlTMXplVzVqTFcxbGMzTmhaMlZ6TG0xa0kyaDVjR1Z5ZEhrdGNtVnhkV1Z6ZEMxMGJ5MWlaUzFoYmkxdlluTmxjblpsY2x4eVhHNWNjbHh1SUNBZ0lDQWdMeThnVW1WemRXMWxJRk4xWW5OamNtbHdkR2x2Ym5NZ1ptOXlJSFJvWlNCellXMWxJRWg1Y0dWeWRIa2dWVkpNWEhKY2JpQWdJQ0FnSUM4dklHaDBkSEJ6T2k4dloybDBhSFZpTG1OdmJTOXlaVlJJU1U1TExYQnliMnBsWTNRdmMzQmxZM012WW14dllpOXRZWE4wWlhJdmJXVnpjMkZuWlhNdlpHRjBZUzF6ZVc1akxXMWxjM05oWjJWekxtMWtJM0psYzNWdFpTMXpkV0p6WTNKcGNIUnBiMjV6TFdadmNpMTBhR1V0YzJGdFpTMW9lWEJsY25SNUxYVnliRnh5WEc1Y2NseHVJQ0FnSUNBZ0x5OGdVbVZ6ZFcxbElGTjFZbk5qY21sd2RHbHZibk1nWm05eUlHRWdZMlZ5ZEdGcGJpQjFjMlZ5SUdGdVpDQmtZWFJoSUhOamFHVnRZU0JwYm1SbGNHVnVaR1Z1ZEd4NUlHOW1JSFJvWlNCSWVYQmxjblI1SUZWU1RDNWNjbHh1SUNBZ0lDQWdMeThnYUhSMGNITTZMeTluYVhSb2RXSXVZMjl0TDNKbFZFaEpUa3N0Y0hKdmFtVmpkQzl6Y0dWamN5OWliRzlpTDIxaGMzUmxjaTl0WlhOellXZGxjeTlrWVhSaExYTjVibU10YldWemMyRm5aWE11YldRamNtVnpkVzFsTFhOMVluTmpjbWx3ZEdsdmJuTXRabTl5TFdFdFkyVnlkR0ZwYmkxMWMyVnlMV0Z1WkMxa1lYUmhMWE5qYUdWdFlTMXBibVJsY0dWdVpHVnVkR3g1TFc5bUxYUm9aUzFvZVhCbGNuUjVMWFZ5YkZ4eVhHNGdJQ0FnSUNCcFppQW9ZM0pwZEdWeWFXRXBJSHRjY2x4dUlDQWdJQ0FnSUNCcFppQW9ZM0pwZEdWeWFXRXVhR0Z6VDNkdVVISnZjR1Z5ZEhrb0ozQXljQ2NwS1NCemRXSnpZM0pwWW1WTmMyY3VZbTlrZVM1d01uQWdQU0JqY21sMFpYSnBZUzV3TW5BN1hISmNiaUFnSUNBZ0lDQWdhV1lnS0dOeWFYUmxjbWxoTG1oaGMwOTNibEJ5YjNCbGNuUjVLQ2R6ZEc5eVpTY3BLU0J6ZFdKelkzSnBZbVZOYzJjdVltOWtlUzV6ZEc5eVpTQTlJR055YVhSbGNtbGhMbk4wYjNKbE8xeHlYRzRnSUNBZ0lDQWdJR2xtSUNoamNtbDBaWEpwWVM1b1lYTlBkMjVRY205d1pYSjBlU2duYzJOb1pXMWhKeWtwSUhOMVluTmpjbWxpWlUxelp5NWliMlI1TG5OamFHVnRZU0E5SUdOeWFYUmxjbWxoTG5OamFHVnRZVHRjY2x4dUlDQWdJQ0FnSUNCcFppQW9ZM0pwZEdWeWFXRXVhR0Z6VDNkdVVISnZjR1Z5ZEhrb0oybGtaVzUwYVhSNUp5a3BJSE4xWW5OamNtbGlaVTF6Wnk1aWIyUjVMbWxrWlc1MGFYUjVJRDBnWTNKcGRHVnlhV0V1YVdSbGJuUnBkSGs3WEhKY2JpQWdJQ0FnSUNBZ2FXWWdLR055YVhSbGNtbGhMbWhoYzA5M2JsQnliM0JsY25SNUtDZHlaWE52ZFhKalpTY3BLU0J6ZFdKelkzSnBZbVZOYzJjdVltOWtlUzV5WlhOdmRYSmpaU0E5SUdOeWFYUmxjbWxoTG5WeWJEdGNjbHh1SUNBZ0lDQWdmVnh5WEc1Y2NseHVJQ0FnSUNBZ2MzVmljMk55YVdKbFRYTm5MbUp2WkhrdWNtVnpkVzFsSUQwZ1kzSnBkR1Z5YVdFdWNtVnpkVzFsTzF4eVhHNWNjbHh1SUNBZ0lDQWdMeTlVVDBSUE9pQkdiM0lnUm5WeWRHaGxjaUJUZEhWa2VWeHlYRzRnSUNBZ0lDQnNaWFFnYlhWMGRXRnNRWFYwYUdWdWRHbGpZWFJwYjI0Z1BTQmpjbWwwWlhKcFlTNXRkWFIxWVd3N1hISmNiaUFnSUNBZ0lHbG1JQ2hqY21sMFpYSnBZUzVvWVhOUGQyNVFjbTl3WlhKMGVTZ25iWFYwZFdGc0p5a3BJSE4xWW5OamNtbGlaVTF6Wnk1aWIyUjVMbTExZEhWaGJFRjFkR2hsYm5ScFkyRjBhVzl1SUQwZ2JYVjBkV0ZzUVhWMGFHVnVkR2xqWVhScGIyNDdYSEpjYmx4eVhHNGdJQ0FnSUNCamIyNXpiMnhsTG14dlp5Z25XM041Ym1Ob1pYSmRJQzBnYzNWaWMyTnlhV0psSUcxbGMzTmhaMlU2SUNjc0lHTnlhWFJsY21saExDQnpkV0p6WTNKcFltVk5jMmNwTzF4eVhHNWNjbHh1SUNBZ0lDQWdMeTl5WlhGMVpYTjBJSE4xWW5OamNtbHdkR2x2Ymx4eVhHNGdJQ0FnSUNBdkwxQnliM1pwYzJsdmJtRnNJR1JoZEdFZ2FYTWdZWEJ3YkdsbFpDQjBieUIwYUdVZ1JHRjBZVTlpYW1WamRFOWljMlZ5ZG1WeUlHRm1kR1Z5SUdOdmJtWnBjbTFoZEdsdmJpNGdUM0lnWkdselkyRnlaR1ZrSUdsbUlIUm9aWEpsSUdseklHNXZJR052Ym1acGNtMWhkR2x2Ymk1Y2NseHVJQ0FnSUNBZ0x5OW1iM0lnYlc5eVpTQnBibVp2SUhObFpTQjBhR1VnUkdGMFlWQnliM1pwYzJsdmJtRnNJR05zWVhOeklHUnZZM1Z0Wlc1MFlYUnBiMjR1WEhKY2JpQWdJQ0FnSUY5MGFHbHpMbDlpZFhNdWNHOXpkRTFsYzNOaFoyVW9jM1ZpYzJOeWFXSmxUWE5uTENBb2NtVndiSGtwSUQwK0lIdGNjbHh1SUNBZ0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblczTjVibU5vWlhKZElDMGdjM1ZpYzJOeWFXSmxMWEpsYzNWdFpXUXRjbVZ6Y0c5dWMyVTZJQ2NzSUhKbGNHeDVLVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdiR1YwSUc5aWFsVlNUQ0E5SUhKbGNHeDVMbUp2WkhrdWNtVnpiM1Z5WTJVN1hISmNibHh5WEc0Z0lDQWdJQ0FnSUd4bGRDQnVaWGRRY205MmFYTnBiMjVoYkNBOUlGOTBhR2x6TGw5d2NtOTJhWE5wYjI1aGJITmJiMkpxVlZKTVhUdGNjbHh1SUNBZ0lDQWdJQ0JrWld4bGRHVWdYM1JvYVhNdVgzQnliM1pwYzJsdmJtRnNjMXR2WW1wVlVreGRPMXh5WEc0Z0lDQWdJQ0FnSUdsbUlDaHVaWGRRY205MmFYTnBiMjVoYkNrZ2JtVjNVSEp2ZG1semFXOXVZV3d1WDNKbGJHVmhjMlZNYVhOMFpXNWxjbk1vS1R0Y2NseHVYSEpjYmlBZ0lDQWdJQ0FnYVdZZ0tISmxjR3g1TG1KdlpIa3VZMjlrWlNBOElESXdNQ2tnZXlBdkx5QjBiMlJ2T2lCamFHVmpheUJwWmlCMGFHbHpJR2x6SUc1bFpXUmxaQ0JtYjNJZ2RHaGxJSEpsYzNWdFpWeHlYRzVjY2x4dUlDQWdJQ0FnSUNBZ0lHTnZibk52YkdVdWJHOW5LQ2RiYzNsdVkyaGxjbDBnTFNCeVpYTjFiV1VnYm1WM0lFUmhkR0ZRY205MmFYTnBiMjVoYkRvZ0p5d2djbVZ3Ykhrc0lHOWlhbFZTVENrN1hISmNiaUFnSUNBZ0lDQWdJQ0J1WlhkUWNtOTJhWE5wYjI1aGJDQTlJRzVsZHlCRVlYUmhVSEp2ZG1semFXOXVZV3dvWDNSb2FYTXVYMjkzYm1WeUxDQnZZbXBWVWt3c0lGOTBhR2x6TGw5aWRYTXNJSEpsY0d4NUxtSnZaSGt1WTJocGJHUnlaVzVTWlhOdmRYSmpaWE1wTzF4eVhHNGdJQ0FnSUNBZ0lDQWdYM1JvYVhNdVgzQnliM1pwYzJsdmJtRnNjMXR2WW1wVlVreGRJRDBnYm1WM1VISnZkbWx6YVc5dVlXdzdYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lIMGdaV3h6WlNCcFppQW9jbVZ3YkhrdVltOWtlUzVqYjJSbElEMDlQU0F5TURBcElIdGNjbHh1WEhKY2JpQWdJQ0FnSUNBZ0lDQnNaWFFnYkdsemRFOW1UMkp6WlhKMlpYSnpJRDBnY21Wd2JIa3VZbTlrZVM1MllXeDFaVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0JtYjNJZ0tHeGxkQ0JwYm1SbGVDQnBiaUJzYVhOMFQyWlBZbk5sY25abGNuTXBJSHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0FnSUd4bGRDQmtZWFJoVDJKcVpXTjBJRDBnYkdsemRFOW1UMkp6WlhKMlpYSnpXMmx1WkdWNFhUdGNjbHh1SUNBZ0lDQWdJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMXR6ZVc1amFHVnlYU0F0SUZKbGMzVnRaU0JQWW1wbFkzUWdUMkp6WlhKMlpYSTZJQ2NzSUhKbGNHeDVMQ0JrWVhSaFQySnFaV04wTENCZmRHaHBjeTVmY0hKdmRtbHphVzl1WVd4ektUdGNjbHh1WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJR1JoZEdGUFltcGxZM1F1WTJocGJHUnlaVzVQWW1wbFkzUnpJRDBnWkdWbGNFTnNiMjVsS0dSaGRHRlBZbXBsWTNRdVkyaHBiR1J5Wlc1UFltcGxZM1J6S1NCOGZDQjdmVHRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdaR0YwWVU5aWFtVmpkQzVrWVhSaElEMGdaR1ZsY0VOc2IyNWxLR1JoZEdGUFltcGxZM1F1WkdGMFlTa2dmSHdnZTMwN1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUdSaGRHRlBZbXBsWTNRdWNtVnpkVzFsWkNBOUlIUnlkV1U3WEhKY2JpQWdJQ0FnSUNBZ0lDQWdJR1JoZEdGUFltcGxZM1F1YzNsdVkyaGxjaUE5SUY5MGFHbHpPMXh5WEc1Y2NseHVJQ0FnSUNBZ0lDQWdJQ0FnTHk5VVQwUlBPaUJ0ZFhSMVlXeEJkWFJvWlc1MGFXTmhkR2x2YmlCR2IzSWdSblZ5ZEdobGNpQlRkSFZrZVZ4eVhHNGdJQ0FnSUNBZ0lDQWdJQ0JqYjI1emIyeGxMbXh2WnlnblczTjVibU5vWlhJdVgzSmxjM1Z0WlZOMVluTmpjbWxpWlYwZ0xTQmpjbVZoZEdVZ2JtVjNJR1JoZEdGUFltcGxZM1E2SUNjc0lHUmhkR0ZQWW1wbFkzUXBPMXh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQnNaWFFnYm1WM1QySnFJRDBnYm1WM0lFUmhkR0ZQWW1wbFkzUlBZbk5sY25abGNpaGtZWFJoVDJKcVpXTjBLVHRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdibVYzVDJKcUxuSmxjM1Z0WlVOb2FXeGtjbVZ1Y3loa1lYUmhUMkpxWldOMExtTm9hV3hrY21WdVQySnFaV04wY3lrN1hISmNibHh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQmZkR2hwY3k1ZmIySnpaWEoyWlhKelcyOWlhbFZTVEYwZ1BTQnVaWGRQWW1vN1hISmNibHh5WEc0Z0lDQWdJQ0FnSUNBZ0lDQnBaaUFvWDNSb2FYTXVYM0J5YjNacGMybHZibUZzYzF0dlltcFZVa3hkS1NCN0lGOTBhR2x6TGw5d2NtOTJhWE5wYjI1aGJITmJiMkpxVlZKTVhTNWhjSEJzZVNodVpYZFBZbW9wT3lCOVhISmNiaUFnSUNBZ0lDQWdJQ0I5WEhKY2JseHlYRzRnSUNBZ0lDQWdJQ0FnY21WemIyeDJaU2hmZEdocGN5NWZiMkp6WlhKMlpYSnpLVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdJQ0JwWmlBb2RHaHBjeTVmYjI1UFluTmxjblpsY25OU1pYTjFiV1VwSUhSb2FYTXVYMjl1VDJKelpYSjJaWEp6VW1WemRXMWxLRjkwYUdsekxsOXZZbk5sY25abGNuTXBPMXh5WEc1Y2NseHVJQ0FnSUNBZ0lDQjlJR1ZzYzJVZ2FXWWdLSEpsY0d4NUxtSnZaSGt1WTI5a1pTQTlQVDBnTkRBMEtTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNCeVpYTnZiSFpsS0h0OUtUdGNjbHh1SUNBZ0lDQWdJQ0I5SUdWc2MyVWdlMXh5WEc0Z0lDQWdJQ0FnSUNBZ2NtVnFaV04wS0hKbGNHeDVMbUp2WkhrdVpHVnpZeWs3WEhKY2JpQWdJQ0FnSUNBZ2ZWeHlYRzRnSUNBZ0lDQjlLVHRjY2x4dUlDQWdJSDBwTzF4eVhHNWNjbHh1SUNCOVhISmNibHh5WEc0Z0lDOHZSa3hQVnkxSlRqb2diV1Z6YzJGblpTQnlaV05sYVhabFpDQm1jbTl0SUdFZ2JHOWpZV3dnY25WdWRHbHRaU0JTWlhCdmNuUmxjazlpYW1WamRDQXRQaUJmYjI1U1pXMXZkR1ZUZFdKelkzSnBZbVZjY2x4dUlDQmZiMjVHYjNKM1lYSmtLRzF6WnlrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQnNaWFFnY21Wd2IzSjBaWElnUFNCZmRHaHBjeTVmY21Wd2IzSjBaWEp6VzIxelp5NWliMlI1TG5SdlhUdGNjbHh1SUNBZ0lISmxjRzl5ZEdWeUxsOXZia1p2Y25kaGNtUW9iWE5uS1R0Y2NseHVJQ0I5WEhKY2JseHlYRzRnSUM4dlJreFBWeTFKVGpvZ2JXVnpjMkZuWlNCeVpXTmxhWFpsWkNCbWNtOXRJR0VnY21WdGIzUmxJRk41Ym1Ob1pYSWdMVDRnWTNKbFlYUmxJQ2gwYUdseklHbHpJR0ZqZEhWaGJHeDVJR0Z1SUdsdWRtbDBZWFJwYjI0Z2RHOGdjM1ZpYzJOeWFXSmxLVnh5WEc0Z0lGOXZibEpsYlc5MFpVTnlaV0YwWlNodGMyY3BJSHRjY2x4dUlDQWdJR3hsZENCZmRHaHBjeUE5SUhSb2FYTTdYSEpjYmx4eVhHNGdJQ0F2TDNKbGJXOTJaU0JjSWk5emRXSnpZM0pwY0hScGIyNWNJaUJtY205dElIUm9aU0JWVWt4Y2NseHVJQ0FnSUd4bGRDQnlaWE52ZFhKalpTQTlJRzF6Wnk1bWNtOXRMbk5zYVdObEtEQXNJQzB4TXlrN1hISmNibHh5WEc0Z0lDQWdiR1YwSUdWMlpXNTBJRDBnZTF4eVhHNGdJQ0FnSUNCMGVYQmxPaUJ0YzJjdWRIbHdaU3hjY2x4dUlDQWdJQ0FnWm5KdmJUb2diWE5uTG1KdlpIa3VjMjkxY21ObExGeHlYRzRnSUNBZ0lDQjFjbXc2SUhKbGMyOTFjbU5sTEZ4eVhHNGdJQ0FnSUNCelkyaGxiV0U2SUcxelp5NWliMlI1TG5OamFHVnRZU3hjY2x4dUlDQWdJQ0FnZG1Gc2RXVTZJRzF6Wnk1aWIyUjVMblpoYkhWbExGeHlYRzRnSUNBZ0lDQnBaR1Z1ZEdsMGVUb2diWE5uTG1KdlpIa3VhV1JsYm5ScGRIa3NYSEpjYmx4eVhHNGdJQ0FnSUNCaFkyczZJQ2gwZVhCbEtTQTlQaUI3WEhKY2JpQWdJQ0FnSUNBZ2JHVjBJR3hVZVhCbElEMGdNakF3TzF4eVhHNGdJQ0FnSUNBZ0lHbG1JQ2gwZVhCbEtTQjdYSEpjYmlBZ0lDQWdJQ0FnSUNCc1ZIbHdaU0E5SUhSNWNHVTdYSEpjYmlBZ0lDQWdJQ0FnZlZ4eVhHNWNjbHh1SUNBZ0lDQWdJQzh2YzJWdVpDQmhZMnNnY21WemNHOXVjMlVnYldWemMyRm5aVnh5WEc0Z0lDQWdJQ0FnSUY5MGFHbHpMbDlpZFhNdWNHOXpkRTFsYzNOaFoyVW9lMXh5WEc0Z0lDQWdJQ0FnSUNBZ2FXUTZJRzF6Wnk1cFpDd2dkSGx3WlRvZ0ozSmxjM0J2Ym5ObEp5d2dabkp2YlRvZ2JYTm5MblJ2TENCMGJ6b2diWE5uTG1aeWIyMHNYSEpjYmlBZ0lDQWdJQ0FnSUNCaWIyUjVPaUI3SUdOdlpHVTZJR3hVZVhCbElIMWNjbHh1SUNBZ0lDQWdJQ0I5S1R0Y2NseHVJQ0FnSUNBZ2ZWeHlYRzRnSUNBZ2ZUdGNjbHh1WEhKY2JpQWdJQ0JwWmlBb1gzUm9hWE11WDI5dVRtOTBhV1pwWTJGMGFXOXVTR0Z1Wkd4bGNpa2dlMXh5WEc0Z0lDQWdJQ0JqYjI1emIyeGxMbWx1Wm04b0oxdFRlVzVqYUdWeVhTQk9UMVJKUmtsRFFWUkpUMDR0UlZaRlRsUTZJQ2NzSUdWMlpXNTBLVHRjY2x4dUlDQWdJQ0FnWDNSb2FYTXVYMjl1VG05MGFXWnBZMkYwYVc5dVNHRnVaR3hsY2lobGRtVnVkQ2s3WEhKY2JpQWdJQ0I5WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0F2TDBaTVQxY3RTVTQ2SUcxbGMzTmhaMlVnY21WalpXbDJaV1FnWm5KdmJTQmhJSEpsYlc5MFpTQkVZWFJoVDJKcVpXTjBVbVZ3YjNKMFpYSWdMVDRnWkdWc1pYUmxYSEpjYmlBZ1gyOXVVbVZ0YjNSbFJHVnNaWFJsS0cxelp5a2dlMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1WEhKY2JpQWdJQzh2Y21WdGIzWmxJRndpTDNOMVluTmpjbWx3ZEdsdmJsd2lJR1p5YjIwZ2RHaGxJRlZTVEZ4eVhHNGdJQ0FnYkdWMElISmxjMjkxY21ObElEMGdiWE5uTG1KdlpIa3VjbVZ6YjNWeVkyVTdYSEpjYmx4eVhHNGdJQ0FnYkdWMElHOWlhbVZqZENBOUlGOTBhR2x6TGw5dlluTmxjblpsY25OYmNtVnpiM1Z5WTJWZE8xeHlYRzRnSUNBZ2FXWWdLRzlpYW1WamRDa2dlMXh5WEc0Z0lDQWdJQ0JzWlhRZ1pYWmxiblFnUFNCN1hISmNiaUFnSUNBZ0lDQWdkSGx3WlRvZ2JYTm5MblI1Y0dVc1hISmNiaUFnSUNBZ0lDQWdkWEpzT2lCeVpYTnZkWEpqWlN4Y2NseHVJQ0FnSUNBZ0lDQnBaR1Z1ZEdsMGVUb2diWE5uTG1KdlpIa3VhV1JsYm5ScGRIa3NYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lHRmphem9nS0hSNWNHVXBJRDArSUh0Y2NseHVJQ0FnSUNBZ0lDQWdJR3hsZENCc1ZIbHdaU0E5SURJd01EdGNjbHh1SUNBZ0lDQWdJQ0FnSUdsbUlDaDBlWEJsS1NCN1hISmNiaUFnSUNBZ0lDQWdJQ0FnSUd4VWVYQmxJRDBnZEhsd1pUdGNjbHh1SUNBZ0lDQWdJQ0FnSUgxY2NseHVYSEpjYmlBZ0lDQWdJQ0FnSUM4dlZFOUVUem9nWVc1NUlHOTBhR1Z5SUdScFptWmxjbVZ1ZENCdmNIUnBiMjV6SUdadmNpQjBhR1VnY21Wc1pXRnpaU0J3Y205alpYTnpMQ0JzYVd0bElHRmpZMlZ3ZENCaWRYUWdibTl5SUhKbGJHVmhjMlVnYkc5allXdy9YSEpjYmlBZ0lDQWdJQ0FnSUNCcFppQW9iRlI1Y0dVZ1BUMDlJREl3TUNrZ2UxeHlYRzRnSUNBZ0lDQWdJQ0FnSUNCdlltcGxZM1F1WkdWc1pYUmxLQ2s3WEhKY2JpQWdJQ0FnSUNBZ0lDQjlYSEpjYmx4eVhHNGdJQ0FnSUNBZ0lDQWdMeTl6Wlc1a0lHRmpheUJ5WlhOd2IyNXpaU0J0WlhOellXZGxYSEpjYmlBZ0lDQWdJQ0FnSUNCZmRHaHBjeTVmWW5WekxuQnZjM1JOWlhOellXZGxLSHRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdhV1E2SUcxelp5NXBaQ3dnZEhsd1pUb2dKM0psYzNCdmJuTmxKeXdnWm5KdmJUb2diWE5uTG5SdkxDQjBiem9nYlhObkxtWnliMjBzWEhKY2JpQWdJQ0FnSUNBZ0lDQWdJR0p2WkhrNklIc2dZMjlrWlRvZ2JGUjVjR1VzSUhOdmRYSmpaVG9nWDNSb2FYTXVYMjkzYm1WeUlIMWNjbHh1SUNBZ0lDQWdJQ0FnSUgwcE8xeHlYRzRnSUNBZ0lDQWdJSDFjY2x4dUlDQWdJQ0FnZlR0Y2NseHVYSEpjYmlBZ0lDQWdJR2xtSUNoZmRHaHBjeTVmYjI1T2IzUnBabWxqWVhScGIyNUlZVzVrYkdWeUtTQjdYSEpjYmlBZ0lDQWdJQ0FnWTI5dWMyOXNaUzVzYjJjb0owNVBWRWxHU1VOQlZFbFBUaTFGVmtWT1ZEb2dKeXdnWlhabGJuUXBPMXh5WEc0Z0lDQWdJQ0FnSUY5MGFHbHpMbDl2Yms1dmRHbG1hV05oZEdsdmJraGhibVJzWlhJb1pYWmxiblFwTzF4eVhHNGdJQ0FnSUNCOVhISmNiaUFnSUNCOUlHVnNjMlVnZTF4eVhHNGdJQ0FnSUNCZmRHaHBjeTVmWW5WekxuQnZjM1JOWlhOellXZGxLSHRjY2x4dUlDQWdJQ0FnSUNCcFpEb2diWE5uTG1sa0xDQjBlWEJsT2lBbmNtVnpjRzl1YzJVbkxDQm1jbTl0T2lCdGMyY3VkRzhzSUhSdk9pQnRjMmN1Wm5KdmJTeGNjbHh1SUNBZ0lDQWdJQ0JpYjJSNU9pQjdJR052WkdVNklEUXdOQ3dnYzI5MWNtTmxPaUJmZEdocGN5NWZiM2R1WlhJZ2ZWeHlYRzRnSUNBZ0lDQjlLVHRjY2x4dUlDQWdJSDFjY2x4dUlDQjlYSEpjYmx4eVhHNGdJQzhxS2x4eVhHNGdJQ29nUTJGc2JHSmhZMnNnYzNsemRHVnRJSFJ2SUhSeWFXZG5aWElnZEdobElISmxjM1Z0WldRZ2NtVndiM0owWlhKelhISmNiaUFnS2lCQWNHRnlZVzBnSUh0R2RXNWpkR2x2Ym4wZ1kyRnNiR0poWTJzZ0xTQm1kVzVqZEdsdmJpQmpZV3hzWW1GamF5QjNhR2xqYUNCM2FXeHNJR0psSUdsdWRtOXJaV1JjY2x4dUlDQXFJRUJ5WlhSMWNtNGdlMDlpYW1WamREeFZVa3dzSUVSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2o1OUlGSmxkSFZ5YmlCdmJtVWdiMkpxWldOMElIZHBkR2dnWVd4c0lISmxjM1Z0WldRZ2NtVndiM0owWlhKek8xeHlYRzRnSUNvdlhISmNiaUFnYjI1U1pYQnZjblJsY25OU1pYTjFiV1VvWTJGc2JHSmhZMnNwSUh0Y2NseHVJQ0FnSUhSb2FYTXVYMjl1VW1Wd2IzSjBaWEp6VW1WemRXMWxJRDBnWTJGc2JHSmhZMnM3WEhKY2JpQWdmVnh5WEc1Y2NseHVJQ0F2S2lwY2NseHVJQ0FxSUVOaGJHeGlZV05ySUhONWMzUmxiU0IwYnlCMGNtbG5aMlZ5SUhSb1pTQnlaWE4xYldWa0lHOWljMlZ5ZG1WeWMxeHlYRzRnSUNvZ1FIQmhjbUZ0SUNCN1JuVnVZM1JwYjI1OUlHTmhiR3hpWVdOcklDMGdablZ1WTNScGIyNGdZMkZzYkdKaFkyc2dkMmhwWTJnZ2QybHNiQ0JpWlNCcGJuWnZhMlZrWEhKY2JpQWdLaUJBY21WMGRYSnVJSHRQWW1wbFkzUThWVkpNTENCRVlYUmhUMkpxWldOMFQySnpaWEoyWlhJK2ZTQlNaWFIxY200Z2IyNWxJRzlpYW1WamRDQjNhWFJvSUdGc2JDQnlaWE4xYldWa0lHOWljMlZ5ZG1WeWN6dGNjbHh1SUNBcUwxeHlYRzRnSUc5dVQySnpaWEoyWlhKelVtVnpkVzFsS0dOaGJHeGlZV05yS1NCN1hISmNiaUFnSUNCMGFHbHpMbDl2Yms5aWMyVnlkbVZ5YzFKbGMzVnRaU0E5SUdOaGJHeGlZV05yTzF4eVhHNGdJSDFjY2x4dVhISmNibjFjY2x4dVhISmNibVY0Y0c5eWRDQmtaV1poZFd4MElGTjVibU5vWlhJN1hISmNibHh1WEc1Y2JpOHZJRmRGUWxCQlEwc2dSazlQVkVWU0lDOHZYRzR2THlBdUwzTnlZeTl6ZVc1amFHVnlMMU41Ym1Ob1pYSXVhbk1pTENKcGJYQnZjblFnVTNsdVkyaGxjaUJtY205dElDY3VMM041Ym1Ob1pYSXZVM2x1WTJobGNpYzdYSEpjYm1sdGNHOXlkQ0JFWVhSaFQySnFaV04wVW1Wd2IzSjBaWElnWm5KdmJTQW5MaTl6ZVc1amFHVnlMMFJoZEdGUFltcGxZM1JTWlhCdmNuUmxjaWM3WEhKY2JtbHRjRzl5ZENCRVlYUmhUMkpxWldOMFQySnpaWEoyWlhJZ1puSnZiU0FuTGk5emVXNWphR1Z5TDBSaGRHRlBZbXBsWTNSUFluTmxjblpsY2ljN1hISmNibHh5WEc1bGVIQnZjblFnZTFONWJtTm9aWElzSUVSaGRHRlBZbXBsWTNSU1pYQnZjblJsY2l3Z1JHRjBZVTlpYW1WamRFOWljMlZ5ZG1WeWZUdGNjbHh1WEc1Y2JseHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSWdMeTljYmk4dklDNHZjM0pqTDFONWJtTm9aWEl1YW5NaUxDSXZLaXBjY2x4dUtpQkRiM0I1Y21sbmFIUWdNakF4TmlCUVZDQkpibTkyWWNPbnc2TnZJR1VnVTJsemRHVnRZWE1nVTBGY2NseHVLaUJEYjNCNWNtbG5hSFFnTWpBeE5pQkpUa1ZUUXkxSlJGeHlYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRkZWVDBKSlV5Qk9SVlJYVDFKTFV5QlRURnh5WEc0cUlFTnZjSGx5YVdkb2RDQXlNREUySUVaU1FWVk9TRTlHUlZJdFIwVlRSVXhNVTBOSVFVWlVJRnBWVWlCR1QwVlNSRVZTVlU1SElFUkZVaUJCVGtkRlYwRk9SRlJGVGlCR1QxSlRRMGhWVGtjZ1JTNVdYSEpjYmlvZ1EyOXdlWEpwWjJoMElESXdNVFlnVDFKQlRrZEZJRk5CWEhKY2Jpb2dRMjl3ZVhKcFoyaDBJREl3TVRZZ1JHVjFkSE5qYUdVZ1ZHVnNaV3R2YlNCQlIxeHlYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRUZ3YVhwbFpWeHlYRzRxSUVOdmNIbHlhV2RvZENBeU1ERTJJRlJGUTBoT1NWTkRTRVVnVlU1SlZrVlNVMGxVUVZRZ1FrVlNURWxPWEhKY2JpcGNjbHh1S2lCTWFXTmxibk5sWkNCMWJtUmxjaUIwYUdVZ1FYQmhZMmhsSUV4cFkyVnVjMlVzSUZabGNuTnBiMjRnTWk0d0lDaDBhR1VnWENKTWFXTmxibk5sWENJcE8xeHlYRzRxSUhsdmRTQnRZWGtnYm05MElIVnpaU0IwYUdseklHWnBiR1VnWlhoalpYQjBJR2x1SUdOdmJYQnNhV0Z1WTJVZ2QybDBhQ0IwYUdVZ1RHbGpaVzV6WlM1Y2NseHVLaUJaYjNVZ2JXRjVJRzlpZEdGcGJpQmhJR052Y0hrZ2IyWWdkR2hsSUV4cFkyVnVjMlVnWVhSY2NseHVLbHh5WEc0cUlDQWdhSFIwY0RvdkwzZDNkeTVoY0dGamFHVXViM0puTDJ4cFkyVnVjMlZ6TDB4SlEwVk9VMFV0TWk0d1hISmNiaXBjY2x4dUtpQlZibXhsYzNNZ2NtVnhkV2x5WldRZ1lua2dZWEJ3YkdsallXSnNaU0JzWVhjZ2IzSWdZV2R5WldWa0lIUnZJR2x1SUhkeWFYUnBibWNzSUhOdlpuUjNZWEpsWEhKY2Jpb2daR2x6ZEhKcFluVjBaV1FnZFc1a1pYSWdkR2hsSUV4cFkyVnVjMlVnYVhNZ1pHbHpkSEpwWW5WMFpXUWdiMjRnWVc0Z1hDSkJVeUJKVTF3aUlFSkJVMGxUTEZ4eVhHNHFJRmRKVkVoUFZWUWdWMEZTVWtGT1ZFbEZVeUJQVWlCRFQwNUVTVlJKVDA1VElFOUdJRUZPV1NCTFNVNUVMQ0JsYVhSb1pYSWdaWGh3Y21WemN5QnZjaUJwYlhCc2FXVmtMbHh5WEc0cUlGTmxaU0IwYUdVZ1RHbGpaVzV6WlNCbWIzSWdkR2hsSUhOd1pXTnBabWxqSUd4aGJtZDFZV2RsSUdkdmRtVnlibWx1WnlCd1pYSnRhWE56YVc5dWN5QmhibVJjY2x4dUtpQnNhVzFwZEdGMGFXOXVjeUIxYm1SbGNpQjBhR1VnVEdsalpXNXpaUzVjY2x4dUtpb3ZYSEpjYmx4eVhHNHZLaXBjY2x4dUlDb2dRR0ZqWTJWemN5QndjbWwyWVhSbFhISmNiaUFxSUZSb2FYTWdZMnhoYzNNZ2FYTWdjbVZ6Y0c5dWMybGliR1VnWm05eUlHTnZiR3hsWTNScGJtY2daR1ZzZEdFZ1kyaGhibWRsY3lCcGJpQnlaVzF2ZEdVZ2IySnFaV04wY3l3Z1ltVm1iM0psSUhSb1pTQnlaWE53YjI1elpTQnZaaUJ6ZFdKelkzSnBjSFJwYjI0Z2NtVmhZMmdnZEdobElHOWljMlZ5ZG1WeUxseHlYRzRnS2lCSmRDZHpJSFZ6WldRZ2FXNGdVM2x1WTJobGNpQXRQaUJ6ZFdKelkzSnBZbVV1SUZSb1pTQm1iRzkzSUdseklHUmxabWx1WldRZ1lYTTZYSEpjYmlBcUlERXVJQ2h2WW5ObGNuWmxjaWtnTFMxemRXSnpZM0pwWW1VdExUNGdLSEpsY0c5eWRHVnlLVnh5WEc0Z0tpQXlMaUFvYjJKelpYSjJaWElwSUR3dExXUmxiSFJoSUhWd1pHRjBaWE10TFNBb2NtVndiM0owWlhJcFhISmNiaUFxSURNdUlDaHZZbk5sY25abGNpa2dQQzB0YzNWaWMyTnlhV0psSUhKbGMzQnZibk5sTFMwZ0tISmxjRzl5ZEdWeUtWeHlYRzRnS2lCVWFHbHpJRzFsWVc1eklIUm9ZWFFnZEdobGNtVWdZMjkxYkdRZ1ltVWdaR1ZzZEdFZ2RYQmtZWFJsY3lCMGNtRnVjMlpsY25KbFpDQmlaV1p2Y21VZ2RHaGxJSE4xWW5OamNtbHdkR2x2YmlCamIyNW1hWEp0WVhScGIyNHVYSEpjYmlBcUlGTnBibU5sSUhSb1pYSmxJR2x6SUc1dklFUmhkR0ZQWW1wbFkzUlBZbk5sY25abGNpQmlaV1p2Y21VZ2RHaGxJSFZpYzJOeWFYQjBhVzl1SUdOdmJtWnBjbTFoZEdsdmJpd2dkR2hsY21VZ2MyaHZkV3hrSUdKbElITnZiV1VnYjNSb1pYSWdiMkpxWldOMElHTnZiR3hsWTNScGJtY2dkR2hsSUhWd1pHRjBaWE11WEhKY2JpQXFJRkJ5YjNacGMybHZibUZzSUdSaGRHRWdhWE1nWVhCd2JHbGxaQ0IwYnlCMGFHVWdSR0YwWVU5aWFtVmpkRTlpYzJWeWRtVnlJR0ZtZEdWeUlHTnZibVpwY20xaGRHbHZiaTRnVDNJZ1pHbHpZMkZ5WkdWa0lHbG1JSFJvWlhKbElHbHpJRzV2SUdOdmJtWnBjbTFoZEdsdmJpNWNjbHh1SUNvdlhISmNibU5zWVhOeklFUmhkR0ZRY205MmFYTnBiMjVoYkNCN1hISmNiaUFnTHlvZ2NISnBkbUYwWlZ4eVhHNGdJRjlqYUdsc1pISmxia3hwYzNSbGJtVnljem9nVzAxeloweHBjM1JsYm1WeVhWeHlYRzRnSUY5c2FYTjBaVzVsY2pvZ1RYTm5UR2x6ZEdWdVpYSmNjbHh1WEhKY2JpQWdYMk5vWVc1blpYTTZJRnRkWEhKY2JpQWdLaTljY2x4dVhISmNiaUFnWTI5dWMzUnlkV04wYjNJb2IzZHVaWElzSUhWeWJDd2dZblZ6TENCamFHbHNaSEpsYmlrZ2UxeHlYRzRnSUNBZ2JHVjBJRjkwYUdseklEMGdkR2hwY3p0Y2NseHVYSEpjYmlBZ0lDQmZkR2hwY3k1ZmIzZHVaWElnUFNCdmQyNWxjanRjY2x4dUlDQWdJRjkwYUdsekxsOTFjbXdnUFNCMWNtdzdYSEpjYmlBZ0lDQmZkR2hwY3k1ZlluVnpJRDBnWW5Wek8xeHlYRzRnSUNBZ1gzUm9hWE11WDJOb2FXeGtjbVZ1SUQwZ1kyaHBiR1J5Wlc0N1hISmNibHh5WEc0Z0lDQWdYM1JvYVhNdVgyTm9ZVzVuWlhNZ1BTQmJYVHRjY2x4dUlDQWdJRjkwYUdsekxsOWhiR3h2WTJGMFpVeHBjM1JsYm1WeWN5Z3BPMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdYMkZzYkc5allYUmxUR2x6ZEdWdVpYSnpLQ2tnZTF4eVhHNGdJQ0FnYkdWMElGOTBhR2x6SUQwZ2RHaHBjenRjY2x4dVhISmNiaUFnSUNCZmRHaHBjeTVmYkdsemRHVnVaWElnUFNCZmRHaHBjeTVmWW5WekxtRmtaRXhwYzNSbGJtVnlLRjkwYUdsekxsOTFjbXdzSUNodGMyY3BJRDArSUh0Y2NseHVJQ0FnSUNBZ1kyOXVjMjlzWlM1c2IyY29KMFJoZEdGUWNtOTJhWE5wYjI1aGJDMG5JQ3NnWDNSb2FYTXVYM1Z5YkNBcklDY3RVa05XT2lBbkxDQnRjMmNwTzF4eVhHNGdJQ0FnSUNCZmRHaHBjeTVmWTJoaGJtZGxjeTV3ZFhOb0tHMXpaeWs3WEhKY2JpQWdJQ0I5S1R0Y2NseHVYSEpjYmlBZ0lDQXZLbHh5WEc0Z0lDQWdYM1JvYVhNdVgyTm9hV3hrY21WdVRHbHpkR1Z1WlhKeklEMGdXMTA3WEhKY2JpQWdJQ0JwWmlBb1gzUm9hWE11WDJOb2FXeGtjbVZ1S1NCN1hISmNiaUFnSUNBZ0lHeGxkQ0JqYUdsc1pFSmhjMlZWVWt3Z1BTQjFjbXdnS3lBbkwyTm9hV3hrY21WdUx5YzdYSEpjYmlBZ0lDQWdJRjkwYUdsekxsOWphR2xzWkhKbGJpNW1iM0pGWVdOb0tDaGphR2xzWkNrZ1BUNGdlMXh5WEc0Z0lDQWdJQ0FnSUd4bGRDQmphR2xzWkZWU1RDQTlJR05vYVd4a1FtRnpaVlZTVENBcklHTm9hV3hrTzF4eVhHNGdJQ0FnSUNBZ0lHeGxkQ0JzYVhOMFpXNWxjaUE5SUY5MGFHbHpMbDlpZFhNdVlXUmtUR2x6ZEdWdVpYSW9ZMmhwYkdSVlVrd3NJQ2h0YzJjcElEMCtJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lDOHZhV2R1YjNKbElHMXpaeUJ6Wlc1MElHSjVJR2hwYlhObGJHWmNjbHh1SUNBZ0lDQWdJQ0FnSUdsbUlDaHRjMmN1Wm5KdmJTQWhQVDBnYjNkdVpYSXBJSHRjY2x4dUlDQWdJQ0FnSUNBZ0lDQWdZMjl1YzI5c1pTNXNiMmNvYlhObktUdGNjbHh1SUNBZ0lDQWdJQ0FnSUgxY2NseHVJQ0FnSUNBZ0lDQjlLVHRjY2x4dVhISmNiaUFnSUNBZ0lDQWdYM1JvYVhNdVgyTm9hV3hrY21WdVRHbHpkR1Z1WlhKekxuQjFjMmdvYkdsemRHVnVaWElwTzF4eVhHNGdJQ0FnSUNCOUtUdGNjbHh1SUNBZ0lIMHFMMXh5WEc0Z0lIMWNjbHh1WEhKY2JpQWdYM0psYkdWaGMyVk1hWE4wWlc1bGNuTW9LU0I3WEhKY2JpQWdJQ0JzWlhRZ1gzUm9hWE1nUFNCMGFHbHpPMXh5WEc1Y2NseHVJQ0FnSUY5MGFHbHpMbDlzYVhOMFpXNWxjaTV5WlcxdmRtVW9LVHRjY2x4dVhISmNiaUFnSUNBdktsOTBhR2x6TGw5amFHbHNaSEpsYmt4cGMzUmxibVZ5Y3k1bWIzSkZZV05vS0Noc2FYTjBaVzVsY2lrZ1BUNGdlMXh5WEc0Z0lDQWdJQ0JzYVhOMFpXNWxjaTV5WlcxdmRtVW9LVHRjY2x4dUlDQWdJSDBwT3lvdlhISmNiaUFnZlZ4eVhHNWNjbHh1SUNCblpYUWdZMmhwYkdSeVpXNG9LU0I3SUhKbGRIVnliaUIwYUdsekxsOWphR2xzWkhKbGJqc2dmVnh5WEc1Y2NseHVJQ0JoY0hCc2VTaHZZbk5sY25abGNpa2dlMXh5WEc0Z0lDQWdiR1YwSUY5MGFHbHpJRDBnZEdocGN6dGNjbHh1SUNBZ0lGOTBhR2x6TGw5amFHRnVaMlZ6TG1admNrVmhZMmdvS0dOb1lXNW5aU2tnUFQ0Z2UxeHlYRzRnSUNBZ0lDQnZZbk5sY25abGNpNWZZMmhoYm1kbFQySnFaV04wS0c5aWMyVnlkbVZ5TGw5emVXNWpUMkpxTENCamFHRnVaMlVwTzF4eVhHNGdJQ0FnZlNrN1hISmNiaUFnZlZ4eVhHNTlYSEpjYmx4eVhHNWxlSEJ2Y25RZ1pHVm1ZWFZzZENCRVlYUmhVSEp2ZG1semFXOXVZV3c3WEhKY2JseHVYRzVjYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTSUM4dlhHNHZMeUF1TDNOeVl5OXplVzVqYUdWeUwwUmhkR0ZRY205MmFYTnBiMjVoYkM1cWN5SXNJbTF2WkhWc1pTNWxlSEJ2Y25SeklEMGdleUJjSW1SbFptRjFiSFJjSWpvZ2NtVnhkV2x5WlNoY0ltTnZjbVV0YW5NdmJHbGljbUZ5ZVM5bWJpOXZZbXBsWTNRdloyVjBMVzkzYmkxd2NtOXdaWEowZVMxa1pYTmpjbWx3ZEc5eVhDSXBMQ0JmWDJWelRXOWtkV3hsT2lCMGNuVmxJSDA3WEc1Y2JseHVMeTh2THk4dkx5OHZMeTh2THk4dkx5OHZYRzR2THlCWFJVSlFRVU5MSUVaUFQxUkZVbHh1THk4Z0xpOStMMkpoWW1Wc0xYSjFiblJwYldVdlkyOXlaUzFxY3k5dlltcGxZM1F2WjJWMExXOTNiaTF3Y205d1pYSjBlUzFrWlhOamNtbHdkRzl5TG1welhHNHZMeUJ0YjJSMWJHVWdhV1FnUFNBeE5UTmNiaTh2SUcxdlpIVnNaU0JqYUhWdWEzTWdQU0F3SWl3aWNtVnhkV2x5WlNnbkxpNHZMaTR2Ylc5a2RXeGxjeTlsY3pZdWIySnFaV04wTG1GemMybG5iaWNwTzF4dWJXOWtkV3hsTG1WNGNHOXlkSE1nUFNCeVpYRjFhWEpsS0NjdUxpOHVMaTl0YjJSMWJHVnpMMTlqYjNKbEp5a3VUMkpxWldOMExtRnpjMmxuYmp0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzloYzNOcFoyNHVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREUxT0Z4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWlMQ0p5WlhGMWFYSmxLQ2N1TGk4dUxpOXRiMlIxYkdWekwyVnpOaTV2WW1wbFkzUXVaMlYwTFc5M2JpMXdjbTl3WlhKMGVTMWtaWE5qY21sd2RHOXlKeWs3WEc1MllYSWdKRTlpYW1WamRDQTlJSEpsY1hWcGNtVW9KeTR1THk0dUwyMXZaSFZzWlhNdlgyTnZjbVVuS1M1UFltcGxZM1E3WEc1dGIyUjFiR1V1Wlhod2IzSjBjeUE5SUdaMWJtTjBhVzl1SUdkbGRFOTNibEJ5YjNCbGNuUjVSR1Z6WTNKcGNIUnZjaWhwZEN3Z2EyVjVLWHRjYmlBZ2NtVjBkWEp1SUNSUFltcGxZM1F1WjJWMFQzZHVVSEp2Y0dWeWRIbEVaWE5qY21sd2RHOXlLR2wwTENCclpYa3BPMXh1ZlR0Y2JseHVYRzR2THk4dkx5OHZMeTh2THk4dkx5OHZMeTljYmk4dklGZEZRbEJCUTBzZ1JrOVBWRVZTWEc0dkx5QXVMMzR2WTI5eVpTMXFjeTlzYVdKeVlYSjVMMlp1TDI5aWFtVmpkQzluWlhRdGIzZHVMWEJ5YjNCbGNuUjVMV1JsYzJOeWFYQjBiM0l1YW5OY2JpOHZJRzF2WkhWc1pTQnBaQ0E5SURFMk1GeHVMeThnYlc5a2RXeGxJR05vZFc1cmN5QTlJREFpTENJbmRYTmxJSE4wY21samRDYzdYRzR2THlBeE9TNHhMakl1TVNCUFltcGxZM1F1WVhOemFXZHVLSFJoY21kbGRDd2djMjkxY21ObExDQXVMaTRwWEc1MllYSWdaMlYwUzJWNWN5QWdQU0J5WlhGMWFYSmxLQ2N1TDE5dlltcGxZM1F0YTJWNWN5Y3BYRzRnSUN3Z1owOVFVeUFnSUNBZ1BTQnlaWEYxYVhKbEtDY3VMMTl2WW1wbFkzUXRaMjl3Y3ljcFhHNGdJQ3dnY0VsRklDQWdJQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOXZZbXBsWTNRdGNHbGxKeWxjYmlBZ0xDQjBiMDlpYW1WamRDQTlJSEpsY1hWcGNtVW9KeTR2WDNSdkxXOWlhbVZqZENjcFhHNGdJQ3dnU1U5aWFtVmpkQ0FnUFNCeVpYRjFhWEpsS0NjdUwxOXBiMkpxWldOMEp5bGNiaUFnTENBa1lYTnphV2R1SUNBOUlFOWlhbVZqZEM1aGMzTnBaMjQ3WEc1Y2JpOHZJSE5vYjNWc1pDQjNiM0pySUhkcGRHZ2djM2x0WW05c2N5QmhibVFnYzJodmRXeGtJR2hoZG1VZ1pHVjBaWEp0YVc1cGMzUnBZeUJ3Y205d1pYSjBlU0J2Y21SbGNpQW9WamdnWW5WbktWeHViVzlrZFd4bExtVjRjRzl5ZEhNZ1BTQWhKR0Z6YzJsbmJpQjhmQ0J5WlhGMWFYSmxLQ2N1TDE5bVlXbHNjeWNwS0daMWJtTjBhVzl1S0NsN1hHNGdJSFpoY2lCQklEMGdlMzFjYmlBZ0lDQXNJRUlnUFNCN2ZWeHVJQ0FnSUN3Z1V5QTlJRk41YldKdmJDZ3BYRzRnSUNBZ0xDQkxJRDBnSjJGaVkyUmxabWRvYVdwcmJHMXViM0J4Y25OMEp6dGNiaUFnUVZ0VFhTQTlJRGM3WEc0Z0lFc3VjM0JzYVhRb0p5Y3BMbVp2Y2tWaFkyZ29ablZ1WTNScGIyNG9heWw3SUVKYmExMGdQU0JyT3lCOUtUdGNiaUFnY21WMGRYSnVJQ1JoYzNOcFoyNG9lMzBzSUVFcFcxTmRJQ0U5SURjZ2ZId2dUMkpxWldOMExtdGxlWE1vSkdGemMybG5iaWg3ZlN3Z1Fpa3BMbXB2YVc0b0p5Y3BJQ0U5SUVzN1hHNTlLU0EvSUdaMWJtTjBhVzl1SUdGemMybG5iaWgwWVhKblpYUXNJSE52ZFhKalpTbDdJQzh2SUdWemJHbHVkQzFrYVhOaFlteGxMV3hwYm1VZ2JtOHRkVzUxYzJWa0xYWmhjbk5jYmlBZ2RtRnlJRlFnSUNBZ0lEMGdkRzlQWW1wbFkzUW9kR0Z5WjJWMEtWeHVJQ0FnSUN3Z1lVeGxiaUFnUFNCaGNtZDFiV1Z1ZEhNdWJHVnVaM1JvWEc0Z0lDQWdMQ0JwYm1SbGVDQTlJREZjYmlBZ0lDQXNJR2RsZEZONWJXSnZiSE1nUFNCblQxQlRMbVpjYmlBZ0lDQXNJR2x6Ulc1MWJTQWdJQ0FnUFNCd1NVVXVaanRjYmlBZ2QyaHBiR1VvWVV4bGJpQStJR2x1WkdWNEtYdGNiaUFnSUNCMllYSWdVeUFnSUNBZ0lEMGdTVTlpYW1WamRDaGhjbWQxYldWdWRITmJhVzVrWlhncksxMHBYRzRnSUNBZ0lDQXNJR3RsZVhNZ0lDQTlJR2RsZEZONWJXSnZiSE1nUHlCblpYUkxaWGx6S0ZNcExtTnZibU5oZENoblpYUlRlVzFpYjJ4ektGTXBLU0E2SUdkbGRFdGxlWE1vVXlsY2JpQWdJQ0FnSUN3Z2JHVnVaM1JvSUQwZ2EyVjVjeTVzWlc1bmRHaGNiaUFnSUNBZ0lDd2dhaUFnSUNBZ0lEMGdNRnh1SUNBZ0lDQWdMQ0JyWlhrN1hHNGdJQ0FnZDJocGJHVW9iR1Z1WjNSb0lENGdhaWxwWmlocGMwVnVkVzB1WTJGc2JDaFRMQ0JyWlhrZ1BTQnJaWGx6VzJvcksxMHBLVlJiYTJWNVhTQTlJRk5iYTJWNVhUdGNiaUFnZlNCeVpYUjFjbTRnVkR0Y2JuMGdPaUFrWVhOemFXZHVPMXh1WEc1Y2JpOHZMeTh2THk4dkx5OHZMeTh2THk4dkwxeHVMeThnVjBWQ1VFRkRTeUJHVDA5VVJWSmNiaTh2SUM0dmZpOWpiM0psTFdwekwyeHBZbkpoY25rdmJXOWtkV3hsY3k5ZmIySnFaV04wTFdGemMybG5iaTVxYzF4dUx5OGdiVzlrZFd4bElHbGtJRDBnTVRZeFhHNHZMeUJ0YjJSMWJHVWdZMmgxYm10eklEMGdNQ0lzSWk4dklERTVMakV1TXk0eElFOWlhbVZqZEM1aGMzTnBaMjRvZEdGeVoyVjBMQ0J6YjNWeVkyVXBYRzUyWVhJZ0pHVjRjRzl5ZENBOUlISmxjWFZwY21Vb0p5NHZYMlY0Y0c5eWRDY3BPMXh1WEc0a1pYaHdiM0owS0NSbGVIQnZjblF1VXlBcklDUmxlSEJ2Y25RdVJpd2dKMDlpYW1WamRDY3NJSHRoYzNOcFoyNDZJSEpsY1hWcGNtVW9KeTR2WDI5aWFtVmpkQzFoYzNOcFoyNG5LWDBwTzF4dVhHNWNiaTh2THk4dkx5OHZMeTh2THk4dkx5OHZMMXh1THk4Z1YwVkNVRUZEU3lCR1QwOVVSVkpjYmk4dklDNHZmaTlqYjNKbExXcHpMMnhwWW5KaGNua3ZiVzlrZFd4bGN5OWxjell1YjJKcVpXTjBMbUZ6YzJsbmJpNXFjMXh1THk4Z2JXOWtkV3hsSUdsa0lEMGdNVFkwWEc0dkx5QnRiMlIxYkdVZ1kyaDFibXR6SUQwZ01DSXNJaTh2SURFNUxqRXVNaTQySUU5aWFtVmpkQzVuWlhSUGQyNVFjbTl3WlhKMGVVUmxjMk55YVhCMGIzSW9UeXdnVUNsY2JuWmhjaUIwYjBsUFltcGxZM1FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRDBnY21WeGRXbHlaU2duTGk5ZmRHOHRhVzlpYW1WamRDY3BYRzRnSUN3Z0pHZGxkRTkzYmxCeWIzQmxjblI1UkdWelkzSnBjSFJ2Y2lBOUlISmxjWFZwY21Vb0p5NHZYMjlpYW1WamRDMW5iM0JrSnlrdVpqdGNibHh1Y21WeGRXbHlaU2duTGk5ZmIySnFaV04wTFhOaGNDY3BLQ2RuWlhSUGQyNVFjbTl3WlhKMGVVUmxjMk55YVhCMGIzSW5MQ0JtZFc1amRHbHZiaWdwZTF4dUlDQnlaWFIxY200Z1puVnVZM1JwYjI0Z1oyVjBUM2R1VUhKdmNHVnlkSGxFWlhOamNtbHdkRzl5S0dsMExDQnJaWGtwZTF4dUlDQWdJSEpsZEhWeWJpQWtaMlYwVDNkdVVISnZjR1Z5ZEhsRVpYTmpjbWx3ZEc5eUtIUnZTVTlpYW1WamRDaHBkQ2tzSUd0bGVTazdYRzRnSUgwN1hHNTlLVHRjYmx4dVhHNHZMeTh2THk4dkx5OHZMeTh2THk4dkx5OWNiaTh2SUZkRlFsQkJRMHNnUms5UFZFVlNYRzR2THlBdUwzNHZZMjl5WlMxcWN5OXNhV0p5WVhKNUwyMXZaSFZzWlhNdlpYTTJMbTlpYW1WamRDNW5aWFF0YjNkdUxYQnliM0JsY25SNUxXUmxjMk55YVhCMGIzSXVhbk5jYmk4dklHMXZaSFZzWlNCcFpDQTlJREUyTmx4dUx5OGdiVzlrZFd4bElHTm9kVzVyY3lBOUlEQWlYU3dpYzI5MWNtTmxVbTl2ZENJNklpSjkKCi8qKiovIH0pLAovKiAxMjggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfYXBpID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDUpOwoKdmFyIF9hcGkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXBpKTsKCnZhciBfYXBpMyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ0KTsKCnZhciBfYXBpNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FwaTMpOwoKdmFyIF9ib3RzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpOwoKdmFyIF9ib3RzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JvdHMpOwoKdmFyIF9hdXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7Cgp2YXIgX2F1dGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0aCk7Cgp2YXIgX2NoYW5uZWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDcpOwoKdmFyIF9jaGFubmVsczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGFubmVscyk7Cgp2YXIgX2NoYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OCk7Cgp2YXIgX2NoYXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhdCk7Cgp2YXIgX2RuZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ5KTsKCnZhciBfZG5kMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RuZCk7Cgp2YXIgX2Vtb2ppID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7Cgp2YXIgX2Vtb2ppMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Vtb2ppKTsKCnZhciBfZmlsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCk7Cgp2YXIgX2ZpbGVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbGVzKTsKCnZhciBfZ3JvdXBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTEpOwoKdmFyIF9ncm91cHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzKTsKCnZhciBfaW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7Cgp2YXIgX2ltMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltKTsKCnZhciBfbXBpbSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU1KTsKCnZhciBfbXBpbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tcGltKTsKCnZhciBfb2F1dGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7Cgp2YXIgX29hdXRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29hdXRoKTsKCnZhciBfcmVhY3Rpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTkpOwoKdmFyIF9yZWFjdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3Rpb25zKTsKCnZhciBfcmVtaW5kZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjApOwoKdmFyIF9yZW1pbmRlcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtaW5kZXJzKTsKCnZhciBfcGlucyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTsKCnZhciBfcGluczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9waW5zKTsKCnZhciBfcnRtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpOwoKdmFyIF9ydG0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnRtKTsKCnZhciBfcnRtMyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpOwoKdmFyIF9ydG00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnRtMyk7Cgp2YXIgX3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYzKTsKCnZhciBfc2VhcmNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaCk7Cgp2YXIgX3N0YXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjQpOwoKdmFyIF9zdGFyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zdGFycyk7Cgp2YXIgX3RlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NSk7Cgp2YXIgX3RlYW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGVhbSk7Cgp2YXIgX3VzZXJncm91cHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nik7Cgp2YXIgX3VzZXJncm91cHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcmdyb3Vwcyk7Cgp2YXIgX3VzZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjgpOwoKdmFyIF91c2VyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2Vycyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKdmFyIGRlc2NyaWJlID0gJ1xuICBzbGFja1xuICAgIGFwaS5jbGllbnQodG9rZW4pXG4gICAgYXBpLnRlc3QocGFyYW1zLCAoZXJyLCBkYXRhKT0+KVxuICAgIGF1dGgudGVzdCh0b2tlbiwgKGVyciwgZGF0YSk9PilcbiAgICBib3RzLmluZm9cbiAgICBjaGFubmVscy5hcmNoaXZlKHt0b2tlbiwgY2hhbm5lbH0sIChlcnIsIGRhdGEpPT4pXG4gICAgY2hhbm5lbHMuY3JlYXRlKHt0b2tlbiwgbmFtZX0sIChlcnIsIGRhdGEpPT4pXG4gICAgY2hhbm5lbHMuaGlzdG9yeSh7dG9rZW4sIGNoYW5uZWx9LCAoZXJyLCBkYXRhKT0+KVxuICAgIGNoYW5uZWxzLmluZm9cbiAgICBjaGFubmVscy5pbnZpdGVcbiAgICBjaGFubmVscy5qb2luXG4gICAgY2hhbm5lbHMua2lja1xuICAgIGNoYW5uZWxzLmxlYXZlXG4gICAgY2hhbm5lbHMubGlzdCh7dG9rZW4sIGV4Y2x1ZGVfYXJjaGl2ZWR9LCAoZXJyLCBkYXRhKT0+KVxuICAgIGNoYW5uZWxzLm1hcmtcbiAgICBjaGFubmVscy5yZW5hbWVcbiAgICBjaGFubmVscy5zZXRQdXJwb3NlXG4gICAgY2hhbm5lbHMuc2V0VG9waWNcbiAgICBjaGFubmVscy51bmFyY2hpdmVcbiAgICBjaGF0LmRlbGV0ZVxuICAgIGNoYXQucG9zdE1lc3NhZ2Uoe3Rva2VuLCB0ZXh0LCBjaGFubmVsfSwgKGVyciwgZGF0YSk9PilcbiAgICBjaGF0LnVwZGF0ZVxuICAgIGVtb2ppLmxpc3RcbiAgICBmaWxlcy5kZWxldGVcbiAgICBmaWxlcy5pbmZvXG4gICAgZmlsZXMubGlzdFxuICAgIGZpbGVzLnVwbG9hZFxuICAgIGdyb3Vwcy5hcmNoaXZlXG4gICAgZ3JvdXBzLmNsb3NlXG4gICAgZ3JvdXBzLmNyZWF0ZVxuICAgIGdyb3Vwcy5jcmVhdGVDaGlsZFxuICAgIGdyb3Vwcy5oaXN0b3J5XG4gICAgZ3JvdXBzLmluZm9cbiAgICBncm91cHMuaW52aXRlXG4gICAgZ3JvdXBzLmtpY2tcbiAgICBncm91cHMubGVhdmVcbiAgICBncm91cHMubGlzdFxuICAgIGdyb3Vwcy5tYXJrXG4gICAgZ3JvdXBzLm9wZW5cbiAgICBncm91cHMucmVuYW1lXG4gICAgZ3JvdXBzLnNldFB1cnBvc2VcbiAgICBncm91cHMuc2V0VG9waWNcbiAgICBncm91cHMudW5hcmNoaXZlXG4gICAgaW0uY2xvc2VcbiAgICBpbS5oaXN0b3J5XG4gICAgaW0ubGlzdFxuICAgIGltLm1hcmtcbiAgICBpbS5vcGVuXG4gICAgbXBpbS5jbG9zZVxuICAgIG1waW0uaGlzdG9yeVxuICAgIG1waW0ubGlzdFxuICAgIG1waW0ubWFya1xuICAgIG1waW0ub3BlblxuICAgIG9hdXRoLmFjY2Vzcyh7Y2xpZW50X2lkLCBjbGllbnRfc2VjcmV0LCBjb2RlfSwgKGVyciwgZGF0YSk9PilcbiAgICBwaW5zLmFkZFxuICAgIHBpbnMubGlzdFxuICAgIHBpbnMucmVtb3ZlXG4gICAgcmVhY3Rpb25zLmFkZFxuICAgIHJlYWN0aW9ucy5nZXRcbiAgICByZWFjdGlvbnMubGlzdFxuICAgIHJlYWN0aW9ucy5yZW1vdmVcbiAgICByZW1pbmRlcnMuYWRkXG4gICAgcmVtaW5kZXJzLmNvbXBsZXRlXG4gICAgcmVtaW5kZXJzLmRlbGV0ZVxuICAgIHJlbWluZGVycy5pbmZvXG4gICAgcmVtaW5kZXJzLmxpc3RcbiAgICBydG0uY2xpZW50KClcbiAgICBydG0uc3RhcnQoe3Rva2VufSwgKGVyciwgZGF0YSk9PilcbiAgICBzZWFyY2guYWxsXG4gICAgc2VhcmNoLmZpbGVzXG4gICAgc2VhcmNoLm1lc3NhZ2VzXG4gICAgc3RhcnMuYWRkXG4gICAgc3RhcnMubGlzdFxuICAgIHN0YXJzLnJlbW92ZVxuICAgIHRlYW0uYWNjY2Vzc0xvZ3NcbiAgICB0ZWFtLmJpbGxhYmxlSW5mb1xuICAgIHRlYW0uaW5mbyh0b2tlbiwgKGVyciwgZGF0YSk9PilcbiAgICB0ZWFtLmludGVncmF0aW9uTG9nc1xuICAgIHRlYW0ucHJvZmlsZS5nZXRcbiAgICB1c2VyZ3JvdXBzLmNyZWF0ZVxuICAgIHVzZXJncm91cHMuZGlzYWJsZVxuICAgIHVzZXJncm91cHMuZW5hYmxlXG4gICAgdXNlcmdyb3Vwcy5saXN0XG4gICAgdXNlcmdyb3Vwcy51cGRhdGVcbiAgICB1c2VyZ3JvdXBzLnVzZXJzLmxpc3RcbiAgICB1c2VyZ3JvdXBzLnVzZXJzLnVwZGF0ZVxuICAgIHVzZXJzLmdldFByZXNlbmNlXG4gICAgdXNlcnMuaWRlbnRpdHlcbiAgICB1c2Vycy5pbmZvXG4gICAgdXNlcnMubGlzdCh0b2tlbiwgKGVyciwgZGF0YSk9PilcbiAgICB1c2Vycy5zZXRBY3RpdmVcbiAgICB1c2Vycy5zZXRQcmVzZW5jZVxuJzsKCmV4cG9ydHMuZGVmYXVsdCA9IHsKICBkZXNjcmliZTogZGVzY3JpYmUsCiAgYXBpOiB7IHRlc3Q6IF9hcGkyLmRlZmF1bHQsIGNsaWVudDogX2FwaTQuZGVmYXVsdCB9LAogIGF1dGg6IHsgdGVzdDogX2F1dGgyLmRlZmF1bHQgfSwKICBib3RzOiBfYm90czIuZGVmYXVsdCwKICBjaGFubmVsczogX2NoYW5uZWxzMi5kZWZhdWx0LAogIGNoYXQ6IF9jaGF0Mi5kZWZhdWx0LAogIGRuZDogX2RuZDIuZGVmYXVsdCwKICBlbW9qaTogeyBsaXN0OiBfZW1vamkyLmRlZmF1bHQgfSwKICBmaWxlczogX2ZpbGVzMi5kZWZhdWx0LAogIGdyb3VwczogX2dyb3VwczIuZGVmYXVsdCwKICBpbTogX2ltMi5kZWZhdWx0LAogIG1waW06IF9tcGltMi5kZWZhdWx0LAogIG9hdXRoOiB7IGFjY2VzczogX29hdXRoMi5kZWZhdWx0IH0sCiAgcmVhY3Rpb25zOiBfcmVhY3Rpb25zMi5kZWZhdWx0LAogIHJlbWluZGVyczogX3JlbWluZGVyczIuZGVmYXVsdCwKICBwaW5zOiBfcGluczIuZGVmYXVsdCwKICBydG06IHsgY2xpZW50OiBfcnRtMi5kZWZhdWx0LCBzdGFydDogX3J0bTQuZGVmYXVsdCB9LAogIHNlYXJjaDogX3NlYXJjaDIuZGVmYXVsdCwKICBzdGFyczogX3N0YXJzMi5kZWZhdWx0LAogIHRlYW06IF90ZWFtMi5kZWZhdWx0LAogIHVzZXJncm91cHM6IF91c2VyZ3JvdXBzMi5kZWZhdWx0LAogIHVzZXJzOiBfdXNlcnMyLmRlZmF1bHQKfTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTI5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IGFjdGl2YXRlOwoKdmFyIF9zbGFjayA9IF9fd2VicGFja19yZXF1aXJlX18oMTI4KTsKCnZhciBfc2xhY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2xhY2spOwoKdmFyIF9TeW5jaGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjcpOwoKdmFyIF9JZGVudGl0eUZhY3RvcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNik7Cgp2YXIgX0lkZW50aXR5RmFjdG9yeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JZGVudGl0eUZhY3RvcnkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIFNsYWNrUHJvdG9TdHViID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFNsYWNrUHJvdG9TdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2xhY2tQcm90b1N0dWIpOwoKICAgIGlmICghcnVudGltZVByb3RvU3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgcnVudGltZVByb3RvU3R1YlVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghYnVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBidXMgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZykgdGhyb3cgbmV3IEVycm9yKCdUaGUgY29uZmlnIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwoKICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIENvbnN0cnVjdG9yIExvYWRlZCcpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5fc3Vic2NyaWJlZExpc3QgPSBbXTsKICAgIHRoaXMuX21lc3NhZ2VIaXN0b3J5Q29udHJvbCA9IHt9OwogICAgdGhpcy5fdXNlcnNMaXN0ID0gW107CiAgICB0aGlzLl9ncm91cHNMaXN0ID0gW107CiAgICB0aGlzLl9jaGFubmVsc0xpc3QgPSBbXTsKICAgIHRoaXMuX2ltc0xpc3QgPSBbXTsKICAgIHRoaXMuX29ic2VydmVyOwogICAgdGhpcy5fY2hhbm5lbElEID0gJyc7CiAgICB0aGlzLl9pZCA9IDA7CiAgICB0aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CiAgICB0aGlzLl90b2tlbiA9ICcnOwoKICAgIHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgPSBydW50aW1lUHJvdG9TdHViVVJMOwogICAgdGhpcy5fYnVzID0gYnVzOwogICAgdGhpcy5fY29uZmlnID0gY29uZmlnOwoKICAgIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gY29uZmlnLnJ1bnRpbWVVUkw7CiAgICB0aGlzLl9yZU9wZW4gPSBmYWxzZTsKICAgIHRoaXMuX3NsYWNrID0gX3NsYWNrMi5kZWZhdWx0OwogICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gaW5zdGFudGlhdGUgc3luY2hlciB3aXRoIHJ1bnRpbWVVcmwnLCBydW50aW1lUHJvdG9TdHViVVJMKTsKICAgIHRoaXMuX3N5bmNoZXIgPSBuZXcgX1N5bmNoZXIuU3luY2hlcihydW50aW1lUHJvdG9TdHViVVJMLCBidXMsIGNvbmZpZyk7CgogICAgdGhpcy5fc3luY2hlci5vbk5vdGlmaWNhdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gT24gU3luY2hlciBOb3RpZmljYXRpb24nLCBldmVudCk7CiAgICB9KTsKCiAgICBidXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIG5ldyBtc2cnLCBtc2cpOwogICAgICBpZiAobXNnLmJvZHkuaGFzT3duUHJvcGVydHkoJ2lkZW50aXR5JykgJiYgbXNnLmJvZHkuaWRlbnRpdHkuaGFzT3duUHJvcGVydHkoJ2FjY2Vzc190b2tlbicpICYmIG1zZy5ib2R5LmlkZW50aXR5LmFjY2Vzc190b2tlbikgewoKICAgICAgICB2YXIgdG9rZW4gPSBtc2cuYm9keS5pZGVudGl0eS5hY2Nlc3NfdG9rZW47CiAgICAgICAgX3RoaXMyLl90b2tlbiA9IHRva2VuOwoKICAgICAgICBfdGhpcy5fb3Blbih0b2tlbiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzLl9maWx0ZXIobXNnKSkgewoKICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gQWZ0ZXIgRmlsdGVyJywgbXNnKTsKCiAgICAgICAgICAgIHZhciBzY2hlbWFVcmwgPSBtc2cuYm9keS5zY2hlbWE7CiAgICAgICAgICAgIGlmIChzY2hlbWFVcmwgJiYgbXNnLmJvZHkudmFsdWUubmFtZSkgewoKICAgICAgICAgICAgICB2YXIgc2NoZW1hU3BsaXR0ZWQgPSBzY2hlbWFVcmwuc3BsaXQoJy8nKTsKCiAgICAgICAgICAgICAgaWYgKHNjaGVtYVNwbGl0dGVkW3NjaGVtYVNwbGl0dGVkLmxlbmd0aCAtIDFdID09PSAnQ29tbXVuaWNhdGlvbicpIHsKCiAgICAgICAgICAgICAgICBfdGhpcy5fZ2V0U2xhY2tJbmZvcm1hdGlvbihtc2cudG8pLnRoZW4oZnVuY3Rpb24gKHVzZXJJbmZvKSB7CgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2xhY2sgVXNlciBpbmZvcm1hdGlvbjogJywgdXNlckluZm8pOwoKICAgICAgICAgICAgICAgICAgLy8gdXNlcm5hbWUsIHVzZXJVUkwsIGF2YXRhciwgY24sIGxvY2FsZSwgaWRwLCBhc3NlcnRpb24KICAgICAgICAgICAgICAgICAgdmFyIGlkZW50aXR5ID0gbmV3IF9JZGVudGl0eUZhY3RvcnkyLmRlZmF1bHQodXNlckluZm8ubmFtZSwgJ3NsYWNrOi8vc2xhY2suY29tLycgKyB1c2VySW5mby5uYW1lICsgJ0BzbGFjay5jb20nLCB1c2VySW5mby5wcm9maWxlLmltYWdlXzE5MiwgdXNlckluZm8ubmFtZSwgJycsICdzbGFjay5jb20nKTsKCiAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25VcmwgPSBtc2cuZnJvbTsKCiAgICAgICAgICAgICAgICAgIC8vIGZvciBzZXNzaW9uIHJlc3VtZQogICAgICAgICAgICAgICAgICBpZiAobXNnLmJvZHkucmVzb3VyY2UpIHsKICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25VcmwgPSBtc2cuYm9keS5yZXNvdXJjZSArICcvc3Vic2NyaXB0aW9uJzsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gc3Vic2NyaWJpbmcgb2JqZWN0Jywgc3Vic2NyaXB0aW9uVXJsKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmUoc2NoZW1hVXJsLCBzdWJzY3JpcHRpb25VcmwsIGlkZW50aXR5KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBzdWJzY3JpYmUgcmVzdWx0JywgcmVzdWx0KTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fdG9rZW4gPSB0b2tlbjsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAobXNnLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2lkID0gbXNnLmJvZHkuaWRlbnRpdHkudXNlclByb2ZpbGUuaWQ7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NyZWF0ZUNoYW5uZWwobXNnLCB1c2VySW5mby5pZCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICBfdGhpcy5fc2VuZFN0YXR1cygnY3JlYXRlZCcpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNsYWNrUHJvdG9TdHViLCBbewogICAga2V5OiAnX2dldFNsYWNrSW5mb3JtYXRpb24nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRTbGFja0luZm9ybWF0aW9uKHRvKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoKICAgICAgICB2YXIgVVJMVXNlcnNMaXN0ID0gJ2h0dHBzOi8vc2xhY2suY29tL2FwaS91c2Vycy5saXN0P3Rva2VuPScgKyBfdGhpcy5fdG9rZW47CiAgICAgICAgdmFyIFVSTEdyb3Vwc0xpc3QgPSAnaHR0cHM6Ly9zbGFjay5jb20vYXBpL2dyb3Vwcy5saXN0P3Rva2VuPScgKyBfdGhpcy5fdG9rZW47CiAgICAgICAgdmFyIFVSTENoYW5uZWxzTGlzdCA9ICdodHRwczovL3NsYWNrLmNvbS9hcGkvY2hhbm5lbHMubGlzdD90b2tlbj0nICsgX3RoaXMuX3Rva2VuOwogICAgICAgIHZhciBVUkxJbXNMaXN0ID0gJ2h0dHBzOi8vc2xhY2suY29tL2FwaS9pbS5saXN0P3Rva2VuPScgKyBfdGhpcy5fdG9rZW47CgogICAgICAgIHZhciBVc2Vyc0xpc3RQcm9taXNlID0gX3RoaXMuX3NlbmRIVFRQUmVxdWVzdCgnR0VUJywgVVJMVXNlcnNMaXN0KTsKICAgICAgICB2YXIgR3JvdXBzTGlzdFByb21pc2UgPSBfdGhpcy5fc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBVUkxHcm91cHNMaXN0KTsKICAgICAgICB2YXIgQ2hhbm5lbHNMaXN0UHJvbWlzZSA9IF90aGlzLl9zZW5kSFRUUFJlcXVlc3QoJ0dFVCcsIFVSTENoYW5uZWxzTGlzdCk7CiAgICAgICAgdmFyIEltc0xpc3RQcm9taXNlID0gX3RoaXMuX3NlbmRIVFRQUmVxdWVzdCgnR0VUJywgVVJMSW1zTGlzdCk7CgogICAgICAgIFByb21pc2UuYWxsKFtVc2Vyc0xpc3RQcm9taXNlLCBHcm91cHNMaXN0UHJvbWlzZSwgQ2hhbm5lbHNMaXN0UHJvbWlzZSwgSW1zTGlzdFByb21pc2VdKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgIF90aGlzLl91c2Vyc0xpc3QgPSByZXN1bHRbMF0ubWVtYmVyczsKICAgICAgICAgIF90aGlzLl9ncm91cHNMaXN0ID0gcmVzdWx0WzFdLmdyb3VwczsKICAgICAgICAgIF90aGlzLl9jaGFubmVsc0xpc3QgPSByZXN1bHRbMl0uY2hhbm5lbHM7CiAgICAgICAgICBfdGhpcy5faW1zTGlzdCA9IHJlc3VsdFszXS5pbXM7CgogICAgICAgICAgLy9nZXQgdXNlcklEIHRvIGludml0ZQogICAgICAgICAgdmFyIHRvU3BsaXR0ZWQgPSB0by5zcGxpdCgnOi8vJylbMV07CiAgICAgICAgICB2YXIgdXNlciA9IHRvU3BsaXR0ZWQuc3BsaXQoJ0AnKVswXTsKICAgICAgICAgIHZhciB1c2VySW5mbyA9IF90aGlzLl91c2Vyc0xpc3QuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gdmFsdWUubmFtZSA9PT0gdXNlcjsKICAgICAgICAgIH0pWzBdOwoKICAgICAgICAgIHJlc29sdmUodXNlckluZm8pOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcignW1NsYWNrUHJvdG9zdHViXSAnLCBlcnJvcik7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfY3JlYXRlQ2hhbm5lbCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUNoYW5uZWwobXNnLCB1c2VySUQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGNoYW5uZWxFeGlzdHMgPSBfdGhpcy5fY2hhbm5lbHNMaXN0LmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWUubmFtZSA9PT0gbXNnLmJvZHkudmFsdWUubmFtZTsKICAgICAgfSlbMF07CgogICAgICAvLyBpZiBjaGFubmVsIGV4aXN0LCBpbnZpdGUgdXNlciwgZWxzZSBjaGFubmVsIG5lZWQgdG8gYmUgY3JlYXRlZCBhbmQgdGhlbiBpbnZpdGUgdXNlcgogICAgICBpZiAoY2hhbm5lbEV4aXN0cykgewogICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIGNoYW5uZWwgZXhpc3QnLCBjaGFubmVsRXhpc3RzKTsKCiAgICAgICAgdmFyIGNoYW5uZWxNZW1iZXJzID0gX3RoaXMuX2NoYW5uZWxzTGlzdC5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWUubmFtZSA9PT0gbXNnLmJvZHkudmFsdWUubmFtZTsKICAgICAgICB9KVswXS5tZW1iZXJzOwogICAgICAgIHZhciBhbHJlYWR5T25DaGFubmVsID0gZmFsc2U7CgogICAgICAgIGNoYW5uZWxNZW1iZXJzLmZvckVhY2goZnVuY3Rpb24gKHMpIHsKICAgICAgICAgIGlmIChzID09PSB1c2VySUQpIHsKICAgICAgICAgICAgYWxyZWFkeU9uQ2hhbm5lbCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gY2hhbm5lbCBtZW1iZXJzJywgY2hhbm5lbE1lbWJlcnMsICcgICAtPicsIGFscmVhZHlPbkNoYW5uZWwpOwoKICAgICAgICAvLyBpZiB1c2VyIGlzbnQgb24gQ2hhbm5lbCBpbnZpdGUsIGVsc2UganVzdCBzZXQgY2hhbm5lbElECiAgICAgICAgaWYgKCFhbHJlYWR5T25DaGFubmVsKSB7CiAgICAgICAgICBfdGhpcy5faW52aXRlKHVzZXJJRCwgY2hhbm5lbEV4aXN0cy5pZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLl9jaGFubmVsSUQgPSBjaGFubmVsRXhpc3RzLmlkOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5fY3JlYXRlKG1zZy5ib2R5LnZhbHVlLm5hbWUsIHVzZXJJRCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgIF90aGlzLl9pbnZpdGUodXNlcklEKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19maWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb3Blbih0b2tlbiwgY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghX3RoaXMuX3Nlc3Npb24pIHsKICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnaW4tcHJvZ3Jlc3MnKTsKICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBuZXcgU2Vzc2lvbiBmb3IgdG9rZW46JywgdG9rZW4pOwogICAgICAgIF90aGlzLl9zZXNzaW9uID0gX3RoaXMuX3NsYWNrLnJ0bS5jbGllbnQoKTsKCiAgICAgICAgX3RoaXMuX3Nlc3Npb24ubGlzdGVuKHsgdG9rZW46IHRva2VuIH0pOwoKICAgICAgICBfdGhpcy5fc2Vzc2lvbi5tZXNzYWdlKGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBuZXcgbWVzc2FnZSBvbiBzZXNzaW9uJywgbWVzc2FnZSk7CiAgICAgICAgICBpZiAobWVzc2FnZS5jaGFubmVsKSB7CiAgICAgICAgICAgIGlmIChtZXNzYWdlLmNoYW5uZWwgPT09IF90aGlzLl9jaGFubmVsSUQgJiYgbWVzc2FnZS51c2VyICE9PSBfdGhpcy5faWQgfHwgIW1lc3NhZ2UuaGFzT3duUHJvcGVydHkoJ2JvdF9pZCcpICYmIG1lc3NhZ2UudXNlciA9PT0gX3RoaXMuX2lkICYmIG1lc3NhZ2UuY2hhbm5lbCA9PT0gX3RoaXMuX2NoYW5uZWxJRCkgewoKICAgICAgICAgICAgICBfdGhpcy5fZ2V0VXNlckluZm8obWVzc2FnZS51c2VyKS50aGVuKGZ1bmN0aW9uIChpZGVudGl0eSkgewogICAgICAgICAgICAgICAgX3RoaXMuX29ic2VydmVyLmFkZENoaWxkKCdjaGF0bWVzc2FnZXMnLCB7IG1lc3NhZ2U6IG1lc3NhZ2UudGV4dCB9LCBpZGVudGl0eSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnbGl2ZScpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHNlc3Npb24gYWxyZWFkeSBleGlzdCcpOwogICAgICB9CiAgICAgIGNhbGxiYWNrKCk7CiAgICB9CgogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgKiBJdCByZXRyaWV2ZXMgaW5mb3JtYXRpb24gZnJvbSBhIHNsYWNrIHVzZXIgYW5kIGNyZWF0ZXMgYSByZVRISU5LIElkZW50aXR5IG9iamVjdCB3aXRoIGl0DQogICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlciAtIHNsYWNrIHVzZXIgaWQNCiAgICAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0Pn0gUmV0dXJucyBhIHByb21pc2Ugd2l0aCBhbiBJZGVudGl0eSBvYmplY3QgcmVzb2x2ZWQNCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICB9LCB7CiAgICBrZXk6ICdfZ2V0VXNlckluZm8nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRVc2VySW5mbyh1c2VyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICBfdGhpcy5fc2xhY2sudXNlcnMuaW5mbyh7IHRva2VuOiBfdGhpcy5fdG9rZW4sIHVzZXI6IHVzZXIgfSwgZnVuY3Rpb24gKGVyciwgZGF0YSkgewogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2xhY2tQcm90b3N0dWJdIGVycm9yJywgZXJyKTsKICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViIGdldFVzZXJJbmZvXSAnLCBkYXRhKTsKICAgICAgICAgICAgdmFyIGlkZW50aXR5ID0gbmV3IF9JZGVudGl0eUZhY3RvcnkyLmRlZmF1bHQoZGF0YS51c2VyLm5hbWUsICdzbGFjazovL3NsYWNrLmNvbS8nICsgZGF0YS51c2VyLm5hbWUgKyAnQHNsYWNrLmNvbScsIGRhdGEudXNlci5wcm9maWxlLmltYWdlXzE5MiwgZGF0YS51c2VyLm5hbWUsICcnLCAnc2xhY2suY29tJyk7CgogICAgICAgICAgICByZXNvbHZlKGlkZW50aXR5KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3N1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3N1YnNjcmliZShzY2hlbWEsIHVybERhdGFPYmosIGlkZW50aXR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgaXNTdWJzY3JpYmVkID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gSWRlbnRpdHkgU3Vic2NyaWJlIC0+JywgaWRlbnRpdHkpOwogICAgICAgIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIFN1YnNjcmlwdGlvbiBMaXN0IC0+Jywgb2JqKTsKICAgICAgICAgIGlmIChvYmoudXJsRGF0YU9iaiA9PT0gdXJsRGF0YU9iaiAmJiBvYmouc3Vic2NyaWJlZCAmJiBvYmouaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCA9PT0gaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCkgewogICAgICAgICAgICBpc1N1YnNjcmliZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoaXNTdWJzY3JpYmVkKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBBbHJlYWR5IFN1YnNjcmliZWQnKTsKICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpOwogICAgICAgIH0KICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0geyB1cmxEYXRhT2JqOiB1cmxEYXRhT2JqLCBzY2hlbWE6IHNjaGVtYSwgc3Vic2NyaWJlZDogdHJ1ZSwgaWRlbnRpdHk6IGlkZW50aXR5IH07CgogICAgICAgIHZhciBvYmplY3REZXNjVVJMID0gc2NoZW1hOwogICAgICAgIHZhciBkYXRhT2JqZWN0VXJsID0gdXJsRGF0YU9iai5zdWJzdHJpbmcoMCwgdXJsRGF0YU9iai5sYXN0SW5kZXhPZignLycpKTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gbmV3IHN1YnNjcmlwdGlvbiBmb3Igc2NoZW1hOicsIG9iamVjdERlc2NVUkwsICcgYW5kIGRhdGFPYmplY3Q6JywgZGF0YU9iamVjdFVybCk7CgogICAgICAgIHJldHVybiBfdGhpcy5fc3luY2hlci5zdWJzY3JpYmUob2JqZWN0RGVzY1VSTCwgZGF0YU9iamVjdFVybCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgaWRlbnRpdHkpLnRoZW4oZnVuY3Rpb24gKG9ic2VydmVyKSB7CiAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXIgPSBvYnNlcnZlcjsKICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5wdXNoKHN1YnNjcmlwdGlvbik7CiAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBzdWJzY3JpYmVkJywgZGF0YU9iamVjdFVybCk7CiAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBPYnNlcnZlcicsIG9ic2VydmVyKTsKICAgICAgICAgIG9ic2VydmVyLm9uQWRkQ2hpbGQoZnVuY3Rpb24gKGNoaWxkKSB7CiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnW1NsYWNrUHJvdG9zdHViXSBPYnNlcnZlciAtIEFkZCBDaGlsZDogJywgY2hpbGQpOwoKICAgICAgICAgICAgLy9jaGVjayBpZiBmb3IgZWFjaCBjaGlsZCBtZXNzYWdlIGhhcyBiZWVuIGRlbGl2ZXJlZCwgYW5kIGNvbnRyb2wgdGhhdCBmb3Igd2hlbiB3ZSBoYXZlIG1vcmUgdGhhbiBvbmUgc2xhY2sgdXNlciBzdWJzY3JpYmVkCiAgICAgICAgICAgIHZhciBjdXJyZW50SUQgPSBjaGlsZC5jaGlsZElkLnNwbGl0KCcjJylbMV07CiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgY2hpbGQgYWxyZWFkeSBzZW50IG1lc3NhZ2VzCiAgICAgICAgICAgIGlmIChfdGhpcy5fbWVzc2FnZUhpc3RvcnlDb250cm9sLmhhc093blByb3BlcnR5KGNoaWxkLmZyb20pKSB7CiAgICAgICAgICAgICAgLy8gaW4gdGhhdCBjYXNlIGNoZWNrIGlmIHRoZSBjdXJyZW50SUQgaXRzIGVxdWFsIHRvIG9sZElECiAgICAgICAgICAgICAgdmFyIG9sZElEID0gX3RoaXMuX21lc3NhZ2VIaXN0b3J5Q29udHJvbFtjaGlsZC5mcm9tXS5pZDsKICAgICAgICAgICAgICBpZiAoX3RoaXMuX21lc3NhZ2VIaXN0b3J5Q29udHJvbFtjaGlsZC5mcm9tXS5pZCAhPT0gY3VycmVudElEKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5fbWVzc2FnZUhpc3RvcnlDb250cm9sW2NoaWxkLmZyb21dLmlkID0gY3VycmVudElEOwogICAgICAgICAgICAgICAgX3RoaXMuX2RlbGl2ZXIoY2hpbGQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy5fbWVzc2FnZUhpc3RvcnlDb250cm9sW2NoaWxkLmZyb21dID0geyBpZDogY3VycmVudElEIH07CiAgICAgICAgICAgICAgX3RoaXMuX2RlbGl2ZXIoY2hpbGQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKCiAgICAgICAgICBvYnNlcnZlci5vbkNoYW5nZSgnKicsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBPYnNlcnZlciAtIG9uQ2hhbmdlOiAnLCBldmVudCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2xhY2tQcm90b3N0dWJdIFN1YnNjcmliZScsIGVycm9yKTsKICAgICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfaW52aXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW52aXRlKGlkVXNlciwgaWRDaGFubmVsKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIWlkQ2hhbm5lbCkgewogICAgICAgIGlkQ2hhbm5lbCA9IF90aGlzLl9jaGFubmVsSUQ7CiAgICAgIH0KCiAgICAgIHZhciB0b0ludml0ZSA9IHsgdG9rZW46IF90aGlzLl90b2tlbiwgY2hhbm5lbDogaWRDaGFubmVsLCB1c2VyOiBpZFVzZXIgfTsKCiAgICAgIF90aGlzLl9zbGFjay5jaGFubmVscy5pbnZpdGUodG9JbnZpdGUsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2xhY2tQcm90b3N0dWJdIGVycm9yJywgZXJyKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuX2NoYW5uZWxJRCA9IGlkQ2hhbm5lbDsKICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHVzZXIgaW52aXRlZCB3aXRoIHN1Y2VzcycsIGRhdGEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2RlbGl2ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxpdmVyKGNoaWxkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuX2NoYW5uZWxJRCAhPT0gJycgJiYgY2hpbGQudmFsdWUubWVzc2FnZSkgewoKICAgICAgICBpZiAoY2hpbGQuaGFzT3duUHJvcGVydHkoJ2lkZW50aXR5JykgJiYgY2hpbGQuaWRlbnRpdHkuaGFzT3duUHJvcGVydHkoJ3VzZXJQcm9maWxlJykgJiYgY2hpbGQuaWRlbnRpdHkudXNlclByb2ZpbGUuaGFzT3duUHJvcGVydHkoJ3VzZXJuYW1lJykgJiYgY2hpbGQuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlcm5hbWUpIHsKCiAgICAgICAgICB2YXIgdGV4dCA9ICcnICsgY2hpbGQuaWRlbnRpdHkudXNlclByb2ZpbGUudXNlcm5hbWUgKyAnOiAnICsgY2hpbGQudmFsdWUubWVzc2FnZTsKICAgICAgICAgIHZhciBtZXNzYWdlID0geyBhc191c2VyOiB0cnVlLCB0b2tlbjogX3RoaXMuX3Rva2VuLCBjaGFubmVsOiBfdGhpcy5fY2hhbm5lbElELCB0ZXh0OiB0ZXh0IH07CiAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSAoUG9zdE1lc3NhZ2Ugc2xhY2sgYXBpKSB0b2tlbignLCBfdGhpcy5fdG9rZW4sICcpICBjaGFubmVsKCcsIF90aGlzLl9jaGFubmVsSUQsICcpIHRleHQoJywgY2hpbGQudmFsdWUubWVzc2FnZSwgJyknKTsKCiAgICAgICAgICBfdGhpcy5fc2xhY2suY2hhdC5wb3N0TWVzc2FnZShtZXNzYWdlLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7CiAgICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2xhY2tQcm90b3N0dWJdIGVycm9yJywgZXJyKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBQb3N0TWVzc2FnZSB3aXRoIFN1Y2VzcycsIGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfY3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlKGNoYW5uZWxOYW1lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgdG9DcmVhdGUgPSB7IHRva2VuOiBfdGhpcy5fdG9rZW4sIG5hbWU6IGNoYW5uZWxOYW1lIH07CiAgICAgICAgX3RoaXMuX3NsYWNrLmNoYW5uZWxzLmNyZWF0ZSh0b0NyZWF0ZSwgZnVuY3Rpb24gKGVyciwgZGF0YSkgewogICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2xhY2tQcm90b3N0dWJdICcsIGVycik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoZGF0YS5vaykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIENoYW5uZWwgQ3JlYXRlZCB3aXRoIFN1Y2VzcyAnLCBkYXRhKTsKICAgICAgICAgICAgICBfdGhpcy5fY2hhbm5lbElEID0gZGF0YS5jaGFubmVsLmlkOwogICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRIVFRQUmVxdWVzdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRIVFRQUmVxdWVzdChtZXRob2QsIHVybCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICBpZiAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSB7CiAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgWERvbWFpblJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGlmIFhEb21haW5SZXF1ZXN0LgogICAgICAgICAgLy8gWERvbWFpblJlcXVlc3Qgb25seSBleGlzdHMgaW4gSUUsIGFuZCBpcyBJRSdzIHdheSBvZiBtYWtpbmcgQ09SUyByZXF1ZXN0cy4KICAgICAgICAgIHhociA9IG5ldyBYRG9tYWluUmVxdWVzdCgpOwogICAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBPdGhlcndpc2UsIENPUlMgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci4KICAgICAgICAgIHhociA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmICh4aHIpIHsKICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkgewogICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgIHZhciBpbmZvID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgIHJlc29sdmUoaW5mbyk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh4aHIuc3RhdHVzID09PSA0MDApIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRva2VuJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KCdDT1JTIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kU3RhdHVzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZFN0YXR1cyh2YWx1ZSwgcmVhc29uKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViIHN0YXR1cyBjaGFuZ2VkXSB0byAnLCB2YWx1ZSk7CgogICAgICBfdGhpcy5fc3RhdGUgPSB2YWx1ZTsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgZnJvbTogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgdG86IF90aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLAogICAgICAgIGJvZHk6IHsKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChyZWFzb24pIHsKICAgICAgICBtc2cuYm9keS5kZXNjID0gcmVhc29uOwogICAgICB9CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnY29uZmlnJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY29uZmlnOwogICAgfQogIH0sIHsKICAgIGtleTogJ3J1bnRpbWVTZXNzaW9uJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcnVudGltZVNlc3Npb25VUkw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gU2xhY2tQcm90b1N0dWI7Cn0oKTsKCmZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsKICByZXR1cm4gewogICAgbmFtZTogJ1NsYWNrUHJvdG9TdHViJywKICAgIGluc3RhbmNlOiBuZXcgU2xhY2tQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykKICB9Owp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDEzMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aApleHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXkKZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheQoKdmFyIGxvb2t1cCA9IFtdCnZhciByZXZMb29rdXAgPSBbXQp2YXIgQXJyID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnID8gVWludDhBcnJheSA6IEFycmF5Cgp2YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJwpmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogIGxvb2t1cFtpXSA9IGNvZGVbaV0KICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGkKfQoKcmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyCnJldkxvb2t1cFsnXycuY2hhckNvZGVBdCgwKV0gPSA2MwoKZnVuY3Rpb24gcGxhY2VIb2xkZXJzQ291bnQgKGI2NCkgewogIHZhciBsZW4gPSBiNjQubGVuZ3RoCiAgaWYgKGxlbiAlIDQgPiAwKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKQogIH0KCiAgLy8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycykKICAvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0CiAgLy8gcmVwcmVzZW50IG9uZSBieXRlCiAgLy8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzCiAgLy8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZQogIHJldHVybiBiNjRbbGVuIC0gMl0gPT09ICc9JyA/IDIgOiBiNjRbbGVuIC0gMV0gPT09ICc9JyA/IDEgOiAwCn0KCmZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkgewogIC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YQogIHJldHVybiBiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnNDb3VudChiNjQpCn0KCmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHsKICB2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFycgogIHZhciBsZW4gPSBiNjQubGVuZ3RoCiAgcGxhY2VIb2xkZXJzID0gcGxhY2VIb2xkZXJzQ291bnQoYjY0KQoKICBhcnIgPSBuZXcgQXJyKGxlbiAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKQoKICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzCiAgbCA9IHBsYWNlSG9sZGVycyA+IDAgPyBsZW4gLSA0IDogbGVuCgogIHZhciBMID0gMAoKICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7CiAgICB0bXAgPSAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfCAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildIDw8IDYpIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV0KICAgIGFycltMKytdID0gKHRtcCA+PiAxNikgJiAweEZGCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHsKICAgIHRtcCA9IChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDIpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkgewogICAgdG1wID0gKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDQpIHwgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpCiAgICBhcnJbTCsrXSA9ICh0bXAgPj4gOCkgJiAweEZGCiAgICBhcnJbTCsrXSA9IHRtcCAmIDB4RkYKICB9CgogIHJldHVybiBhcnIKfQoKZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHsKICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICsgbG9va3VwW251bSA+PiAxMiAmIDB4M0ZdICsgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gKyBsb29rdXBbbnVtICYgMHgzRl0KfQoKZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7CiAgdmFyIHRtcAogIHZhciBvdXRwdXQgPSBbXQogIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7CiAgICB0bXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pCiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSkKICB9CiAgcmV0dXJuIG91dHB1dC5qb2luKCcnKQp9CgpmdW5jdGlvbiBmcm9tQnl0ZUFycmF5ICh1aW50OCkgewogIHZhciB0bXAKICB2YXIgbGVuID0gdWludDgubGVuZ3RoCiAgdmFyIGV4dHJhQnl0ZXMgPSBsZW4gJSAzIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzCiAgdmFyIG91dHB1dCA9ICcnCiAgdmFyIHBhcnRzID0gW10KICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDMKCiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlcgogIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgIHBhcnRzLnB1c2goZW5jb2RlQ2h1bmsodWludDgsIGksIChpICsgbWF4Q2h1bmtMZW5ndGgpID4gbGVuMiA/IGxlbjIgOiAoaSArIG1heENodW5rTGVuZ3RoKSkpCiAgfQoKICAvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzCiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAyXQogICAgb3V0cHV0ICs9IGxvb2t1cFsodG1wIDw8IDQpICYgMHgzRl0KICAgIG91dHB1dCArPSAnPT0nCiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7CiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyAodWludDhbbGVuIC0gMV0pCiAgICBvdXRwdXQgKz0gbG9va3VwW3RtcCA+PiAxMF0KICAgIG91dHB1dCArPSBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdCiAgICBvdXRwdXQgKz0gbG9va3VwWyh0bXAgPDwgMikgJiAweDNGXQogICAgb3V0cHV0ICs9ICc9JwogIH0KCiAgcGFydHMucHVzaChvdXRwdXQpCgogIHJldHVybiBwYXJ0cy5qb2luKCcnKQp9CgoKLyoqKi8gfSksCi8qIDEzMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsKICAiMTAwIjogIkNvbnRpbnVlIiwKICAiMTAxIjogIlN3aXRjaGluZyBQcm90b2NvbHMiLAogICIxMDIiOiAiUHJvY2Vzc2luZyIsCiAgIjIwMCI6ICJPSyIsCiAgIjIwMSI6ICJDcmVhdGVkIiwKICAiMjAyIjogIkFjY2VwdGVkIiwKICAiMjAzIjogIk5vbi1BdXRob3JpdGF0aXZlIEluZm9ybWF0aW9uIiwKICAiMjA0IjogIk5vIENvbnRlbnQiLAogICIyMDUiOiAiUmVzZXQgQ29udGVudCIsCiAgIjIwNiI6ICJQYXJ0aWFsIENvbnRlbnQiLAogICIyMDciOiAiTXVsdGktU3RhdHVzIiwKICAiMjA4IjogIkFscmVhZHkgUmVwb3J0ZWQiLAogICIyMjYiOiAiSU0gVXNlZCIsCiAgIjMwMCI6ICJNdWx0aXBsZSBDaG9pY2VzIiwKICAiMzAxIjogIk1vdmVkIFBlcm1hbmVudGx5IiwKICAiMzAyIjogIkZvdW5kIiwKICAiMzAzIjogIlNlZSBPdGhlciIsCiAgIjMwNCI6ICJOb3QgTW9kaWZpZWQiLAogICIzMDUiOiAiVXNlIFByb3h5IiwKICAiMzA3IjogIlRlbXBvcmFyeSBSZWRpcmVjdCIsCiAgIjMwOCI6ICJQZXJtYW5lbnQgUmVkaXJlY3QiLAogICI0MDAiOiAiQmFkIFJlcXVlc3QiLAogICI0MDEiOiAiVW5hdXRob3JpemVkIiwKICAiNDAyIjogIlBheW1lbnQgUmVxdWlyZWQiLAogICI0MDMiOiAiRm9yYmlkZGVuIiwKICAiNDA0IjogIk5vdCBGb3VuZCIsCiAgIjQwNSI6ICJNZXRob2QgTm90IEFsbG93ZWQiLAogICI0MDYiOiAiTm90IEFjY2VwdGFibGUiLAogICI0MDciOiAiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWQiLAogICI0MDgiOiAiUmVxdWVzdCBUaW1lb3V0IiwKICAiNDA5IjogIkNvbmZsaWN0IiwKICAiNDEwIjogIkdvbmUiLAogICI0MTEiOiAiTGVuZ3RoIFJlcXVpcmVkIiwKICAiNDEyIjogIlByZWNvbmRpdGlvbiBGYWlsZWQiLAogICI0MTMiOiAiUGF5bG9hZCBUb28gTGFyZ2UiLAogICI0MTQiOiAiVVJJIFRvbyBMb25nIiwKICAiNDE1IjogIlVuc3VwcG9ydGVkIE1lZGlhIFR5cGUiLAogICI0MTYiOiAiUmFuZ2UgTm90IFNhdGlzZmlhYmxlIiwKICAiNDE3IjogIkV4cGVjdGF0aW9uIEZhaWxlZCIsCiAgIjQxOCI6ICJJJ20gYSB0ZWFwb3QiLAogICI0MjEiOiAiTWlzZGlyZWN0ZWQgUmVxdWVzdCIsCiAgIjQyMiI6ICJVbnByb2Nlc3NhYmxlIEVudGl0eSIsCiAgIjQyMyI6ICJMb2NrZWQiLAogICI0MjQiOiAiRmFpbGVkIERlcGVuZGVuY3kiLAogICI0MjUiOiAiVW5vcmRlcmVkIENvbGxlY3Rpb24iLAogICI0MjYiOiAiVXBncmFkZSBSZXF1aXJlZCIsCiAgIjQyOCI6ICJQcmVjb25kaXRpb24gUmVxdWlyZWQiLAogICI0MjkiOiAiVG9vIE1hbnkgUmVxdWVzdHMiLAogICI0MzEiOiAiUmVxdWVzdCBIZWFkZXIgRmllbGRzIFRvbyBMYXJnZSIsCiAgIjQ1MSI6ICJVbmF2YWlsYWJsZSBGb3IgTGVnYWwgUmVhc29ucyIsCiAgIjUwMCI6ICJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3IiLAogICI1MDEiOiAiTm90IEltcGxlbWVudGVkIiwKICAiNTAyIjogIkJhZCBHYXRld2F5IiwKICAiNTAzIjogIlNlcnZpY2UgVW5hdmFpbGFibGUiLAogICI1MDQiOiAiR2F0ZXdheSBUaW1lb3V0IiwKICAiNTA1IjogIkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkIiwKICAiNTA2IjogIlZhcmlhbnQgQWxzbyBOZWdvdGlhdGVzIiwKICAiNTA3IjogIkluc3VmZmljaWVudCBTdG9yYWdlIiwKICAiNTA4IjogIkxvb3AgRGV0ZWN0ZWQiLAogICI1MDkiOiAiQmFuZHdpZHRoIExpbWl0IEV4Y2VlZGVkIiwKICAiNTEwIjogIk5vdCBFeHRlbmRlZCIsCiAgIjUxMSI6ICJOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkIgp9CgoKLyoqKi8gfSksCi8qIDEzMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgpleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykgewogIHZhciBlLCBtCiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEKICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMQogIHZhciBlQmlhcyA9IGVNYXggPj4gMQogIHZhciBuQml0cyA9IC03CiAgdmFyIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMAogIHZhciBkID0gaXNMRSA/IC0xIDogMQogIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldCgogIGkgKz0gZAoKICBlID0gcyAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKQogIHMgPj49ICgtbkJpdHMpCiAgbkJpdHMgKz0gZUxlbgogIGZvciAoOyBuQml0cyA+IDA7IGUgPSBlICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9CgogIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpCiAgZSA+Pj0gKC1uQml0cykKICBuQml0cyArPSBtTGVuCiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge30KCiAgaWYgKGUgPT09IDApIHsKICAgIGUgPSAxIC0gZUJpYXMKICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHsKICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KQogIH0gZWxzZSB7CiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pCiAgICBlID0gZSAtIGVCaWFzCiAgfQogIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pCn0KCmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKICB2YXIgZSwgbSwgYwogIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxCiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDEKICB2YXIgZUJpYXMgPSBlTWF4ID4+IDEKICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApCiAgdmFyIGkgPSBpc0xFID8gMCA6IChuQnl0ZXMgLSAxKQogIHZhciBkID0gaXNMRSA/IDEgOiAtMQogIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwCgogIHZhbHVlID0gTWF0aC5hYnModmFsdWUpCgogIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7CiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDAKICAgIGUgPSBlTWF4CiAgfSBlbHNlIHsKICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKQogICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkgewogICAgICBlLS0KICAgICAgYyAqPSAyCiAgICB9CiAgICBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgdmFsdWUgKz0gcnQgLyBjCiAgICB9IGVsc2UgewogICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcykKICAgIH0KICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewogICAgICBlKysKICAgICAgYyAvPSAyCiAgICB9CgogICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CiAgICAgIG0gPSAwCiAgICAgIGUgPSBlTWF4CiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7CiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKQogICAgICBlID0gZSArIGVCaWFzCiAgICB9IGVsc2UgewogICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbikKICAgICAgZSA9IDAKICAgIH0KICB9CgogIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9CgogIGUgPSAoZSA8PCBtTGVuKSB8IG0KICBlTGVuICs9IG1MZW4KICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9CgogIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOAp9CgoKLyoqKi8gfSksCi8qIDEzMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsKCSJhcGkudGVzdCI6IFsKCQl7CgkJCSJuYW1lIjogImVycm9yIiwKCQkJImV4YW1wbGUiOiAibXlfZXJyb3IiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRXJyb3IgcmVzcG9uc2UgdG8gcmV0dXJuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZvbyIsCgkJCSJleGFtcGxlIjogImJhciIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJleGFtcGxlIHByb3BlcnR5IHRvIHJldHVyblxuIgoJCX0KCV0sCgkiYXV0aC5yZXZva2UiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRlc3QiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlNldHRpbmcgdGhpcyBwYXJhbWV0ZXIgdG8gMSB0cmlnZ2VycyBhIHRlc3RpbmcgbW9kZSB3aGVyZSB0aGUgc3BlY2lmaWVkIHRva2VuIHdpbGwgbm90IGFjdHVhbGx5IGJlIHJldm9rZWQuXG4iCgkJfQoJXSwKCSJhdXRoLnRlc3QiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogaWRlbnRpZnlcbiIKCQl9CgldLAoJImJvdHMuaW5mbyI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImJvdCIsCgkJCSJleGFtcGxlIjogIkIxMjM0NTY3OCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJCb3QgdXNlciB0byBnZXQgaW5mbyBvblxuIgoJCX0KCV0sCgkiY2hhbm5lbHMuYXJjaGl2ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBhcmNoaXZlXG4iCgkJfQoJXSwKCSJjaGFubmVscy5jcmVhdGUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhbm5lbHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibmFtZSIsCgkJCSJleGFtcGxlIjogIm15Y2hhbm5lbCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOYW1lIG9mIGNoYW5uZWwgdG8gY3JlYXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInZhbGlkYXRlIiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJXaGV0aGVyIHRvIHJldHVybiBlcnJvcnMgb24gaW52YWxpZCBjaGFubmVsIG5hbWUgaW5zdGVhZCBvZiBtb2RpZnlpbmcgaXQgdG8gbWVldCB0aGUgc3BlY2lmaWVkIGNyaXRlcmlhLlxuIgoJCX0KCV0sCgkiY2hhbm5lbHMuaGlzdG9yeSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczpoaXN0b3J5XG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIGZldGNoIGhpc3RvcnkgZm9yLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJsYXRlc3QiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1ub3ciLAoJCQkiZGVzY3JpcHRpb24iOiAiRW5kIG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJvbGRlc3QiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJImRlc2NyaXB0aW9uIjogIlN0YXJ0IG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJpbmNsdXNpdmUiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSBtZXNzYWdlcyB3aXRoIGxhdGVzdCBvciBvbGRlc3QgdGltZXN0YW1wIGluIHJlc3VsdHMuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNvdW50IiwKCQkJImV4YW1wbGUiOiAiMTAwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEwMCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgbWVzc2FnZXMgdG8gcmV0dXJuLCBiZXR3ZWVuIDEgYW5kIDEwMDAuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVucmVhZHMiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSB1bnJlYWRfY291bnRfZGlzcGxheSBpbiB0aGUgb3V0cHV0P1xuIgoJCX0KCV0sCgkiY2hhbm5lbHMuaW5mbyI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIGdldCBpbmZvIG9uXG4iCgkJfQoJXSwKCSJjaGFubmVscy5pbnZpdGUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhbm5lbHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gaW52aXRlIHVzZXIgdG8uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXIiLAoJCQkiZXhhbXBsZSI6ICJVMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIGludml0ZSB0byBjaGFubmVsLlxuIgoJCX0KCV0sCgkiY2hhbm5lbHMuam9pbiI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJuYW1lIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiTmFtZSBvZiBjaGFubmVsIHRvIGpvaW5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidmFsaWRhdGUiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIldoZXRoZXIgdG8gcmV0dXJuIGVycm9ycyBvbiBpbnZhbGlkIGNoYW5uZWwgbmFtZSBpbnN0ZWFkIG9mIG1vZGlmeWluZyBpdCB0byBtZWV0IHRoZSBzcGVjaWZpZWQgY3JpdGVyaWEuXG4iCgkJfQoJXSwKCSJjaGFubmVscy5raWNrIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIHJlbW92ZSB1c2VyIGZyb20uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXIiLAoJCQkiZXhhbXBsZSI6ICJVMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIHJlbW92ZSBmcm9tIGNoYW5uZWwuXG4iCgkJfQoJXSwKCSJjaGFubmVscy5sZWF2ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBsZWF2ZVxuIgoJCX0KCV0sCgkiY2hhbm5lbHMubGlzdCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImV4Y2x1ZGVfYXJjaGl2ZWQiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PWZhbHNlIiwKCQkJImRlc2NyaXB0aW9uIjogIkRvbid0IHJldHVybiBhcmNoaXZlZCBjaGFubmVscy5cbiIKCQl9CgldLAoJImNoYW5uZWxzLm1hcmsiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhbm5lbHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gc2V0IHJlYWRpbmcgY3Vyc29yIGluLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0cyIsCgkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbW9zdCByZWNlbnRseSBzZWVuIG1lc3NhZ2UuXG4iCgkJfQoJXSwKCSJjaGFubmVscy5yZW5hbWUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhbm5lbHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gcmVuYW1lXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogIm5hbWUiLAoJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOZXcgbmFtZSBmb3IgY2hhbm5lbC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidmFsaWRhdGUiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIldoZXRoZXIgdG8gcmV0dXJuIGVycm9ycyBvbiBpbnZhbGlkIGNoYW5uZWwgbmFtZSBpbnN0ZWFkIG9mIG1vZGlmeWluZyBpdCB0byBtZWV0IHRoZSBzcGVjaWZpZWQgY3JpdGVyaWEuXG4iCgkJfQoJXSwKCSJjaGFubmVscy5yZXBsaWVzIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOmhpc3RvcnlcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgdG8gZmV0Y2ggdGhyZWFkIGZyb21cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidGhyZWFkX3RzIiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVW5pcXVlIGlkZW50aWZpZXIgb2YgYSB0aHJlYWQncyBwYXJlbnQgbWVzc2FnZVxuIgoJCX0KCV0sCgkiY2hhbm5lbHMuc2V0UHVycG9zZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBzZXQgdGhlIHB1cnBvc2Ugb2ZcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicHVycG9zZSIsCgkJCSJleGFtcGxlIjogIk15IFB1cnBvc2UiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIG5ldyBwdXJwb3NlXG4iCgkJfQoJXSwKCSJjaGFubmVscy5zZXRUb3BpYyI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGFubmVsczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBzZXQgdGhlIHRvcGljIG9mXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRvcGljIiwKCQkJImV4YW1wbGUiOiAiTXkgVG9waWMiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIG5ldyB0b3BpY1xuIgoJCX0KCV0sCgkiY2hhbm5lbHMudW5hcmNoaXZlIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNoYW5uZWxzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIHVuYXJjaGl2ZVxuIgoJCX0KCV0sCgkiY2hhdC5kZWxldGUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhdDp3cml0ZTpib3Qgb3IgY2hhdDp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRzIiwKCQkJImV4YW1wbGUiOiAiMTQwNTg5NDMyMi4wMDI3NjgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtZXNzYWdlIHRvIGJlIGRlbGV0ZWQuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIGNvbnRhaW5pbmcgdGhlIG1lc3NhZ2UgdG8gYmUgZGVsZXRlZC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiYXNfdXNlciIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiUGFzcyB0cnVlIHRvIGRlbGV0ZSB0aGUgbWVzc2FnZSBhcyB0aGUgYXV0aGVkIHVzZXIuIEJvdCB1c2VycyBpbiB0aGlzIGNvbnRleHQgYXJlIGNvbnNpZGVyZWQgYXV0aGVkIHVzZXJzLlxuIgoJCX0KCV0sCgkiY2hhdC5tZU1lc3NhZ2UiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhdDp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIHNlbmQgbWVzc2FnZSB0by4gQ2FuIGJlIGEgcHVibGljIGNoYW5uZWwsIHByaXZhdGUgZ3JvdXAgb3IgSU0gY2hhbm5lbC4gQ2FuIGJlIGFuIGVuY29kZWQgSUQsIG9yIGEgbmFtZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidGV4dCIsCgkJCSJleGFtcGxlIjogIkhlbGxvIHdvcmxkIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRleHQgb2YgdGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiIKCQl9CgldLAoJImNoYXQucG9zdE1lc3NhZ2UiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogY2hhdDp3cml0ZTpib3Qgb3IgY2hhdDp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsLCBwcml2YXRlIGdyb3VwLCBvciBJTSBjaGFubmVsIHRvIHNlbmQgbWVzc2FnZSB0by4gQ2FuIGJlIGFuIGVuY29kZWQgSUQsIG9yIGEgbmFtZS4gU2VlIGJlbG93IGZvciBtb3JlIGRldGFpbHMuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRleHQiLAoJCQkiZXhhbXBsZSI6ICJIZWxsbyB3b3JsZCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUZXh0IG9mIHRoZSBtZXNzYWdlIHRvIHNlbmQuIFNlZSBiZWxvdyBmb3IgYW4gZXhwbGFuYXRpb24gb2YgZm9ybWF0dGluZy4gVGhpcyBmaWVsZCBpcyB1c3VhbGx5IHJlcXVpcmVkLCB1bmxlc3MgeW91J3JlIHByb3ZpZGluZyBvbmx5IGF0dGFjaG1lbnRzIGluc3RlYWQuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInBhcnNlIiwKCQkJImV4YW1wbGUiOiAiZnVsbCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFuZ2UgaG93IG1lc3NhZ2VzIGFyZSB0cmVhdGVkLiBEZWZhdWx0cyB0byBub25lLiBTZWUgYmVsb3cuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImxpbmtfbmFtZXMiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbmQgYW5kIGxpbmsgY2hhbm5lbCBuYW1lcyBhbmQgdXNlcm5hbWVzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJhdHRhY2htZW50cyIsCgkJCSJleGFtcGxlIjogIlt7XCJwcmV0ZXh0XCI6IFwicHJlLWhlbGxvXCIsIFwidGV4dFwiOiBcInRleHQtd29ybGRcIn1dIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlN0cnVjdHVyZWQgbWVzc2FnZSBhdHRhY2htZW50cy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidW5mdXJsX2xpbmtzIiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQYXNzIHRydWUgdG8gZW5hYmxlIHVuZnVybGluZyBvZiBwcmltYXJpbHkgdGV4dC1iYXNlZCBjb250ZW50LlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ1bmZ1cmxfbWVkaWEiLAoJCQkiZXhhbXBsZSI6ICJmYWxzZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQYXNzIGZhbHNlIHRvIGRpc2FibGUgdW5mdXJsaW5nIG9mIG1lZGlhIGNvbnRlbnQuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXJuYW1lIiwKCQkJImV4YW1wbGUiOiAiTXkgQm90IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlNldCB5b3VyIGJvdCdzIHVzZXIgbmFtZS4gTXVzdCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYXNfdXNlciBzZXQgdG8gZmFsc2UsIG90aGVyd2lzZSBpZ25vcmVkLiBTZWUgYXV0aG9yc2hpcCBiZWxvdy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiYXNfdXNlciIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiUGFzcyB0cnVlIHRvIHBvc3QgdGhlIG1lc3NhZ2UgYXMgdGhlIGF1dGhlZCB1c2VyLCBpbnN0ZWFkIG9mIGFzIGEgYm90LiBEZWZhdWx0cyB0byBmYWxzZS4gU2VlIGF1dGhvcnNoaXAgYmVsb3cuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImljb25fdXJsIiwKCQkJImV4YW1wbGUiOiAiaHR0cDovL2xvcmVtcGl4ZWwuY29tLzQ4LzQ4IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlVSTCB0byBhbiBpbWFnZSB0byB1c2UgYXMgdGhlIGljb24gZm9yIHRoaXMgbWVzc2FnZS4gTXVzdCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYXNfdXNlciBzZXQgdG8gZmFsc2UsIG90aGVyd2lzZSBpZ25vcmVkLiBTZWUgYXV0aG9yc2hpcCBiZWxvdy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaWNvbl9lbW9qaSIsCgkJCSJleGFtcGxlIjogIjpjaGFydF93aXRoX3Vwd2FyZHNfdHJlbmQ6IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkVtb2ppIHRvIHVzZSBhcyB0aGUgaWNvbiBmb3IgdGhpcyBtZXNzYWdlLiBPdmVycmlkZXMgaWNvbl91cmwuIE11c3QgYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGFzX3VzZXIgc2V0IHRvIGZhbHNlLCBvdGhlcndpc2UgaWdub3JlZC4gU2VlIGF1dGhvcnNoaXAgYmVsb3cuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRocmVhZF90cyIsCgkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlByb3ZpZGUgYW5vdGhlciBtZXNzYWdlJ3MgdHMgdmFsdWUgdG8gbWFrZSB0aGlzIG1lc3NhZ2UgYSByZXBseS4gQXZvaWQgdXNpbmcgYSByZXBseSdzIHRzIHZhbHVlOyB1c2UgaXRzIHBhcmVudCBpbnN0ZWFkLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJyZXBseV9icm9hZGNhc3QiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aHJlYWRfdHMgYW5kIGluZGljYXRlcyB3aGV0aGVyIHJlcGx5IHNob3VsZCBiZSBtYWRlIHZpc2libGUgdG8gZXZlcnlvbmUgaW4gdGhlIGNoYW5uZWwgb3IgY29udmVyc2F0aW9uLiBEZWZhdWx0cyB0byBmYWxzZS5cbiIKCQl9CgldLAoJImNoYXQudW5mdXJsIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGxpbmtzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIElEIG9mIHRoZSBtZXNzYWdlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRzIiwKCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtZXNzYWdlIHRvIGFkZCB1bmZ1cmwgYmVoYXZpb3IgdG9cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidW5mdXJscyIsCgkJCSJleGFtcGxlIjogIsKgIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkpTT04gbWFwcGluZyBhIHNldCBvZiBVUkxzIGZyb20gdGhlIG1lc3NhZ2UgdG8gdGhlaXIgdW5mdXJsIGF0dGFjaG1lbnRzXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXJfYXV0aF9yZXF1aXJlZCIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJTZXQgdG8gdHJ1ZSBvciAxIHRvIGluZGljYXRlIHRoZSB1c2VyIG11c3QgaW5zdGFsbCB5b3VyIFNsYWNrIGFwcCB0byB0cmlnZ2VyIHVuZnVybHMgZm9yIHRoaXMgZG9tYWluXG4iCgkJfQoJXSwKCSJjaGF0LnVwZGF0ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBjaGF0OndyaXRlOmJvdCBvciBjaGF0OndyaXRlOnVzZXJcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidHMiLAoJCQkiZXhhbXBsZSI6ICIxNDA1ODk0MzIyLjAwMjc2OCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgdXBkYXRlZC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5uZWwgY29udGFpbmluZyB0aGUgbWVzc2FnZSB0byBiZSB1cGRhdGVkLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0ZXh0IiwKCQkJImV4YW1wbGUiOiAiSGVsbG8gd29ybGQiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiTmV3IHRleHQgZm9yIHRoZSBtZXNzYWdlLCB1c2luZyB0aGUgZGVmYXVsdCBmb3JtYXR0aW5nIHJ1bGVzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJhdHRhY2htZW50cyIsCgkJCSJleGFtcGxlIjogIlt7XCJwcmV0ZXh0XCI6IFwicHJlLWhlbGxvXCIsIFwidGV4dFwiOiBcInRleHQtd29ybGRcIn1dIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlN0cnVjdHVyZWQgbWVzc2FnZSBhdHRhY2htZW50cy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicGFyc2UiLAoJCQkiZXhhbXBsZSI6ICJub25lIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5nZSBob3cgbWVzc2FnZXMgYXJlIHRyZWF0ZWQuIERlZmF1bHRzIHRvIGNsaWVudCwgdW5saWtlIGNoYXQucG9zdE1lc3NhZ2UuIFNlZSBiZWxvdy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibGlua19uYW1lcyIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmluZCBhbmQgbGluayBjaGFubmVsIG5hbWVzIGFuZCB1c2VybmFtZXMuIERlZmF1bHRzIHRvIG5vbmUuIFRoaXMgcGFyYW1ldGVyIHNob3VsZCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggcGFyc2UuIFRvIHNldCBsaW5rX25hbWVzIHRvIDEsIHNwZWNpZnkgYSBwYXJzZSBtb2RlIG9mIGZ1bGwuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImFzX3VzZXIiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlBhc3MgdHJ1ZSB0byB1cGRhdGUgdGhlIG1lc3NhZ2UgYXMgdGhlIGF1dGhlZCB1c2VyLiBCb3QgdXNlcnMgaW4gdGhpcyBjb250ZXh0IGFyZSBjb25zaWRlcmVkIGF1dGhlZCB1c2Vycy5cbiIKCQl9CgldLAoJImRuZC5lbmREbmQiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZG5kOndyaXRlXG4iCgkJfQoJXSwKCSJkbmQuZW5kU25vb3plIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGRuZDp3cml0ZVxuIgoJCX0KCV0sCgkiZG5kLmluZm8iOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZG5kOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlciIsCgkJCSJleGFtcGxlIjogIlUxMjM0IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlVzZXIgdG8gZmV0Y2ggc3RhdHVzIGZvciAoZGVmYXVsdHMgdG8gY3VycmVudCB1c2VyKVxuIgoJCX0KCV0sCgkiZG5kLnNldFNub296ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBkbmQ6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibnVtX21pbnV0ZXMiLAoJCQkiZXhhbXBsZSI6ICI2MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgbWludXRlcywgZnJvbSBub3csIHRvIHNub296ZSB1bnRpbC5cbiIKCQl9CgldLAoJImRuZC50ZWFtSW5mbyI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBkbmQ6cmVhZFxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ1c2VycyIsCgkJCSJleGFtcGxlIjogIlUxMjM0LFU0NTY3IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHVzZXJzIHRvIGZldGNoIERvIE5vdCBEaXN0dXJiIHN0YXR1cyBmb3JcbiIKCQl9CgldLAoJImVtb2ppLmxpc3QiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZW1vamk6cmVhZFxuIgoJCX0KCV0sCgkiZmlsZXMuY29tbWVudHMuYWRkIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGZpbGVzOndyaXRlOnVzZXJcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiZmlsZSIsCgkJCSJleGFtcGxlIjogIkYxMjM0NDY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gYWRkIGEgY29tbWVudCB0by5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY29tbWVudCIsCgkJCSJleGFtcGxlIjogIkV2ZXJ5b25lIHNob3VsZCB0YWtlIGEgbW9tZW50IHRvIHJlYWQgdGhpcyBmaWxlLiIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUZXh0IG9mIHRoZSBjb21tZW50IHRvIGFkZC5cbiIKCQl9CgldLAoJImZpbGVzLmNvbW1lbnRzLmRlbGV0ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIGRlbGV0ZSBhIGNvbW1lbnQgZnJvbS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaWQiLAoJCQkiZXhhbXBsZSI6ICJGYzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIGNvbW1lbnQgdG8gZGVsZXRlLlxuIgoJCX0KCV0sCgkiZmlsZXMuY29tbWVudHMuZWRpdCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIGNvbnRhaW5pbmcgdGhlIGNvbW1lbnQgdG8gZWRpdC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaWQiLAoJCQkiZXhhbXBsZSI6ICJGYzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIGNvbW1lbnQgdG8gZWRpdC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY29tbWVudCIsCgkJCSJleGFtcGxlIjogIkV2ZXJ5b25lIHNob3VsZCB0YWtlIGEgbW9tZW50IHRvIHJlYWQgdGhpcyBmaWxlLCBzZXJpb3VzbHkuIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRleHQgb2YgdGhlIGNvbW1lbnQgdG8gZWRpdC5cbiIKCQl9CgldLAoJImZpbGVzLmRlbGV0ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJJRCBvZiBmaWxlIHRvIGRlbGV0ZS5cbiIKCQl9CgldLAoJImZpbGVzLmluZm8iOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZmlsZXM6cmVhZFxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJmaWxlIiwKCQkJImV4YW1wbGUiOiAiRjIxNDc0ODM4NjIiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiU3BlY2lmeSBhIGZpbGUgYnkgcHJvdmlkaW5nIGl0cyBJRC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY291bnQiLAoJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybiBwZXIgcGFnZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicGFnZSIsCgkJCSJleGFtcGxlIjogIjIiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQYWdlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiIKCQl9CgldLAoJImZpbGVzLmxpc3QiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZmlsZXM6cmVhZFxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ1c2VyIiwKCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsdGVyIGZpbGVzIGNyZWF0ZWQgYnkgYSBzaW5nbGUgdXNlci5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbHRlciBmaWxlcyBhcHBlYXJpbmcgaW4gYSBzcGVjaWZpYyBjaGFubmVsLCBpbmRpY2F0ZWQgYnkgaXRzIElELlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0c19mcm9tIiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsdGVyIGZpbGVzIGNyZWF0ZWQgYWZ0ZXIgdGhpcyB0aW1lc3RhbXAgKGluY2x1c2l2ZSkuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRzX3RvIiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PW5vdyIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgZmlsZXMgY3JlYXRlZCBiZWZvcmUgdGhpcyB0aW1lc3RhbXAgKGluY2x1c2l2ZSkuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInR5cGVzIiwKCQkJImV4YW1wbGUiOiAiaW1hZ2VzIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PWFsbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgZmlsZXMgYnkgdHlwZTpcblxuXG5hbGwgLSBBbGwgZmlsZXNcbnNwYWNlcyAtIFBvc3RzXG5zbmlwcGV0cyAtIFNuaXBwZXRzXG5pbWFnZXMgLSBJbWFnZSBmaWxlc1xuZ2RvY3MgLSBHb29nbGUgZG9jc1xuemlwcyAtIFppcCBmaWxlc1xucGRmcyAtIFBERiBmaWxlc1xuXG5cbllvdSBjYW4gcGFzcyBtdWx0aXBsZSB2YWx1ZXMgaW4gdGhlIHR5cGVzIGFyZ3VtZW50LCBsaWtlIHR5cGVzPXNwYWNlcyxzbmlwcGV0cy5UaGUgZGVmYXVsdCB2YWx1ZSBpcyBhbGwsIHdoaWNoIGRvZXMgbm90IGZpbHRlciB0aGUgbGlzdC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY291bnQiLAoJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybiBwZXIgcGFnZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicGFnZSIsCgkJCSJleGFtcGxlIjogIjIiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQYWdlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiIKCQl9CgldLAoJImZpbGVzLnJldm9rZVB1YmxpY1VSTCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIHJldm9rZVxuIgoJCX0KCV0sCgkiZmlsZXMuc2hhcmVkUHVibGljVVJMIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGZpbGVzOndyaXRlOnVzZXJcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiZmlsZSIsCgkJCSJleGFtcGxlIjogIkYxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gc2hhcmVcbiIKCQl9CgldLAoJImZpbGVzLnVwbG9hZCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBmaWxlczp3cml0ZTp1c2VyXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICIuLi4iLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSBjb250ZW50cyB2aWEgbXVsdGlwYXJ0L2Zvcm0tZGF0YS4gSWYgb21pdHRpbmcgdGhpcyBwYXJhbWV0ZXIsIHlvdSBtdXN0IHN1Ym1pdCBjb250ZW50LlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjb250ZW50IiwKCQkJImV4YW1wbGUiOiAiLi4uIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29udGVudHMgdmlhIGEgUE9TVCB2YXJpYWJsZS4gSWYgb21pdHRpbmcgdGhpcyBwYXJhbWV0ZXIsIHlvdSBtdXN0IHByb3ZpZGUgYSBmaWxlLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJmaWxldHlwZSIsCgkJCSJleGFtcGxlIjogInBocCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBIGZpbGUgdHlwZSBpZGVudGlmaWVyLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJmaWxlbmFtZSIsCgkJCSJleGFtcGxlIjogImZvby50eHQiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsZW5hbWUgb2YgZmlsZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidGl0bGUiLAoJCQkiZXhhbXBsZSI6ICJNeSBGaWxlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlRpdGxlIG9mIGZpbGUuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImluaXRpYWxfY29tbWVudCIsCgkJCSJleGFtcGxlIjogIkJlc3QhIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkluaXRpYWwgY29tbWVudCB0byBhZGQgdG8gZmlsZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbHMiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCxDMjM0NTY3ODkwMSxDMzQ1Njc4OTAxMiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBjaGFubmVsIG5hbWVzIG9yIElEcyB3aGVyZSB0aGUgZmlsZSB3aWxsIGJlIHNoYXJlZC5cbiIKCQl9CgldLAoJImdyb3Vwcy5hcmNoaXZlIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiRzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIGFyY2hpdmVcbiIKCQl9CgldLAoJImdyb3Vwcy5jbG9zZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBjbG9zZS5cbiIKCQl9CgldLAoJImdyb3Vwcy5jcmVhdGUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogIm5hbWUiLAoJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOYW1lIG9mIHByaXZhdGUgY2hhbm5lbCB0byBjcmVhdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidmFsaWRhdGUiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIldoZXRoZXIgdG8gcmV0dXJuIGVycm9ycyBvbiBpbnZhbGlkIGNoYW5uZWwgbmFtZSBpbnN0ZWFkIG9mIG1vZGlmeWluZyBpdCB0byBtZWV0IHRoZSBzcGVjaWZpZWQgY3JpdGVyaWEuXG4iCgkJfQoJXSwKCSJncm91cHMuY3JlYXRlQ2hpbGQiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQcml2YXRlIGNoYW5uZWwgdG8gY2xvbmUgYW5kIGFyY2hpdmUuXG4iCgkJfQoJXSwKCSJncm91cHMuaGlzdG9yeSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6aGlzdG9yeVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiRzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIGZldGNoIGhpc3RvcnkgZm9yLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJsYXRlc3QiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1ub3ciLAoJCQkiZGVzY3JpcHRpb24iOiAiRW5kIG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJvbGRlc3QiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJImRlc2NyaXB0aW9uIjogIlN0YXJ0IG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJpbmNsdXNpdmUiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSBtZXNzYWdlcyB3aXRoIGxhdGVzdCBvciBvbGRlc3QgdGltZXN0YW1wIGluIHJlc3VsdHMuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNvdW50IiwKCQkJImV4YW1wbGUiOiAiMTAwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEwMCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgbWVzc2FnZXMgdG8gcmV0dXJuLCBiZXR3ZWVuIDEgYW5kIDEwMDAuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVucmVhZHMiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSB1bnJlYWRfY291bnRfZGlzcGxheSBpbiB0aGUgb3V0cHV0P1xuIgoJCX0KCV0sCgkiZ3JvdXBzLmluZm8iOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBnZXQgaW5mbyBvblxuIgoJCX0KCV0sCgkiZ3JvdXBzLmludml0ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBpbnZpdGUgdXNlciB0by5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlciIsCgkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlVzZXIgdG8gaW52aXRlLlxuIgoJCX0KCV0sCgkiZ3JvdXBzLmtpY2siOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQcml2YXRlIGNoYW5uZWwgdG8gcmVtb3ZlIHVzZXIgZnJvbS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlciIsCgkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlVzZXIgdG8gcmVtb3ZlIGZyb20gcHJpdmF0ZSBjaGFubmVsLlxuIgoJCX0KCV0sCgkiZ3JvdXBzLmxlYXZlIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGdyb3Vwczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiRzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiUHJpdmF0ZSBjaGFubmVsIHRvIGxlYXZlXG4iCgkJfQoJXSwKCSJncm91cHMubGlzdCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6cmVhZFxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJleGNsdWRlX2FyY2hpdmVkIiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJImRlc2NyaXB0aW9uIjogIkRvbid0IHJldHVybiBhcmNoaXZlZCBwcml2YXRlIGNoYW5uZWxzLlxuIgoJCX0KCV0sCgkiZ3JvdXBzLm1hcmsiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQcml2YXRlIGNoYW5uZWwgdG8gc2V0IHJlYWRpbmcgY3Vyc29yIGluLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0cyIsCgkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbW9zdCByZWNlbnRseSBzZWVuIG1lc3NhZ2UuXG4iCgkJfQoJXSwKCSJncm91cHMub3BlbiI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBvcGVuLlxuIgoJCX0KCV0sCgkiZ3JvdXBzLnJlbmFtZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byByZW5hbWVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibmFtZSIsCgkJCSJleGFtcGxlIjogIsKgIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIk5ldyBuYW1lIGZvciBwcml2YXRlIGNoYW5uZWwuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInZhbGlkYXRlIiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJXaGV0aGVyIHRvIHJldHVybiBlcnJvcnMgb24gaW52YWxpZCBjaGFubmVsIG5hbWUgaW5zdGVhZCBvZiBtb2RpZnlpbmcgaXQgdG8gbWVldCB0aGUgc3BlY2lmaWVkIGNyaXRlcmlhLlxuIgoJCX0KCV0sCgkiZ3JvdXBzLnJlcGxpZXMiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOmhpc3RvcnlcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBmZXRjaCB0aHJlYWQgZnJvbVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0aHJlYWRfdHMiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJVbmlxdWUgaWRlbnRpZmllciBvZiBhIHRocmVhZCdzIHBhcmVudCBtZXNzYWdlXG4iCgkJfQoJXSwKCSJncm91cHMuc2V0UHVycG9zZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBncm91cHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlByaXZhdGUgY2hhbm5lbCB0byBzZXQgdGhlIHB1cnBvc2Ugb2ZcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicHVycG9zZSIsCgkJCSJleGFtcGxlIjogIk15IFB1cnBvc2UiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIG5ldyBwdXJwb3NlXG4iCgkJfQoJXSwKCSJncm91cHMuc2V0VG9waWMiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQcml2YXRlIGNoYW5uZWwgdG8gc2V0IHRoZSB0b3BpYyBvZlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0b3BpYyIsCgkJCSJleGFtcGxlIjogIk15IFRvcGljIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRoZSBuZXcgdG9waWNcbiIKCQl9CgldLAoJImdyb3Vwcy51bmFyY2hpdmUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogZ3JvdXBzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQcml2YXRlIGNoYW5uZWwgdG8gdW5hcmNoaXZlXG4iCgkJfQoJXSwKCSJpbS5jbG9zZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBpbTp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiRDEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiRGlyZWN0IG1lc3NhZ2UgY2hhbm5lbCB0byBjbG9zZS5cbiIKCQl9CgldLAoJImltLmhpc3RvcnkiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogaW06aGlzdG9yeVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiRDEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiRGlyZWN0IG1lc3NhZ2UgY2hhbm5lbCB0byBmZXRjaCBoaXN0b3J5IGZvci5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibGF0ZXN0IiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9bm93IiwKCQkJImRlc2NyaXB0aW9uIjogIkVuZCBvZiB0aW1lIHJhbmdlIG9mIG1lc3NhZ2VzIHRvIGluY2x1ZGUgaW4gcmVzdWx0cy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAib2xkZXN0IiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJTdGFydCBvZiB0aW1lIHJhbmdlIG9mIG1lc3NhZ2VzIHRvIGluY2x1ZGUgaW4gcmVzdWx0cy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaW5jbHVzaXZlIiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgbWVzc2FnZXMgd2l0aCBsYXRlc3Qgb3Igb2xkZXN0IHRpbWVzdGFtcCBpbiByZXN1bHRzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjb3VudCIsCgkJCSJleGFtcGxlIjogIjEwMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIG1lc3NhZ2VzIHRvIHJldHVybiwgYmV0d2VlbiAxIGFuZCAxMDAwLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ1bnJlYWRzIiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdW5yZWFkX2NvdW50X2Rpc3BsYXkgaW4gdGhlIG91dHB1dD9cbiIKCQl9CgldLAoJImltLmxpc3QiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogaW06cmVhZFxuIgoJCX0KCV0sCgkiaW0ubWFyayI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBpbTp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiRDEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiRGlyZWN0IG1lc3NhZ2UgY2hhbm5lbCB0byBzZXQgcmVhZGluZyBjdXJzb3IgaW4uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRzIiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtb3N0IHJlY2VudGx5IHNlZW4gbWVzc2FnZS5cbiIKCQl9CgldLAoJImltLm9wZW4iOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogaW06d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlciIsCgkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlVzZXIgdG8gb3BlbiBhIGRpcmVjdCBtZXNzYWdlIGNoYW5uZWwgd2l0aC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicmV0dXJuX2ltIiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJCb29sZWFuLCBpbmRpY2F0ZXMgeW91IHdhbnQgdGhlIGZ1bGwgSU0gY2hhbm5lbCBkZWZpbml0aW9uIGluIHRoZSByZXNwb25zZS5cbiIKCQl9CgldLAoJImltLnJlcGxpZXMiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogaW06aGlzdG9yeVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiRGlyZWN0IG1lc3NhZ2UgY2hhbm5lbCB0byBmZXRjaCB0aHJlYWQgZnJvbVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0aHJlYWRfdHMiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJVbmlxdWUgaWRlbnRpZmllciBvZiBhIHRocmVhZCdzIHBhcmVudCBtZXNzYWdlXG4iCgkJfQoJXSwKCSJtcGltLmNsb3NlIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IG1waW06d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIk1QSU0gdG8gY2xvc2UuXG4iCgkJfQoJXSwKCSJtcGltLmhpc3RvcnkiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogbXBpbTpoaXN0b3J5XG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJHMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJNdWx0aXBhcnR5IGRpcmVjdCBtZXNzYWdlIHRvIGZldGNoIGhpc3RvcnkgZm9yLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJsYXRlc3QiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1ub3ciLAoJCQkiZGVzY3JpcHRpb24iOiAiRW5kIG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJvbGRlc3QiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0wIiwKCQkJImRlc2NyaXB0aW9uIjogIlN0YXJ0IG9mIHRpbWUgcmFuZ2Ugb2YgbWVzc2FnZXMgdG8gaW5jbHVkZSBpbiByZXN1bHRzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJpbmNsdXNpdmUiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSBtZXNzYWdlcyB3aXRoIGxhdGVzdCBvciBvbGRlc3QgdGltZXN0YW1wIGluIHJlc3VsdHMuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNvdW50IiwKCQkJImV4YW1wbGUiOiAiMTAwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEwMCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgbWVzc2FnZXMgdG8gcmV0dXJuLCBiZXR3ZWVuIDEgYW5kIDEwMDAuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVucmVhZHMiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTAiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSB1bnJlYWRfY291bnRfZGlzcGxheSBpbiB0aGUgb3V0cHV0P1xuIgoJCX0KCV0sCgkibXBpbS5saXN0IjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IG1waW06cmVhZFxuIgoJCX0KCV0sCgkibXBpbS5tYXJrIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IG1waW06d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbCIsCgkJCSJleGFtcGxlIjogIkcxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIm11bHRpcGFydHkgZGlyZWN0IG1lc3NhZ2UgY2hhbm5lbCB0byBzZXQgcmVhZGluZyBjdXJzb3IgaW4uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRzIiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtb3N0IHJlY2VudGx5IHNlZW4gbWVzc2FnZS5cbiIKCQl9CgldLAoJIm1waW0ub3BlbiI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBtcGltOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXJzIiwKCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAsVTIzNDU2Nzg5MDEsVTM0NTY3ODkwMTIiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ29tbWEgc2VwYXJhdGVkIGxpc3RzIG9mIHVzZXJzLiAgVGhlIG9yZGVyaW5nIG9mIHRoZSB1c2VycyBpcyBwcmVzZXJ2ZWQgd2hlbmV2ZXIgYSBNUElNIGdyb3VwIGlzIHJldHVybmVkLlxuIgoJCX0KCV0sCgkibXBpbS5yZXBsaWVzIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IG1waW06aGlzdG9yeVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiTXVsdGlwYXJ0eSBkaXJlY3QgbWVzc2FnZSBjaGFubmVsIHRvIGZldGNoIHRocmVhZCBmcm9tLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0aHJlYWRfdHMiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJVbmlxdWUgaWRlbnRpZmllciBvZiBhIHRocmVhZCdzIHBhcmVudCBtZXNzYWdlLlxuIgoJCX0KCV0sCgkib2F1dGguYWNjZXNzIjogWwoJCXsKCQkJIm5hbWUiOiAiY2xpZW50X2lkIiwKCQkJImV4YW1wbGUiOiAiNGIzOWU5LTc1MmM0IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIklzc3VlZCB3aGVuIHlvdSBjcmVhdGVkIHlvdXIgYXBwbGljYXRpb24uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNsaWVudF9zZWNyZXQiLAoJCQkiZXhhbXBsZSI6ICIzM2ZlYTAxMTNmNWIxIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIklzc3VlZCB3aGVuIHlvdSBjcmVhdGVkIHlvdXIgYXBwbGljYXRpb24uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNvZGUiLAoJCQkiZXhhbXBsZSI6ICJjY2RhYTcyYWQiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIGNvZGUgcGFyYW0gcmV0dXJuZWQgdmlhIHRoZSBPQXV0aCBjYWxsYmFjay5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicmVkaXJlY3RfdXJpIiwKCQkJImV4YW1wbGUiOiAiaHR0cDovL2V4YW1wbGUuY29tIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlRoaXMgbXVzdCBtYXRjaCB0aGUgb3JpZ2luYWxseSBzdWJtaXR0ZWQgVVJJIChpZiBvbmUgd2FzIHNlbnQpLlxuIgoJCX0KCV0sCgkicGlucy5hZGQiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcGluczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB0byBwaW4gdGhlIGl0ZW0gaW4uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIHBpbi5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiZmlsZV9jb21tZW50IiwKCQkJImV4YW1wbGUiOiAiRmMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29tbWVudCB0byBwaW4uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRpbWVzdGFtcCIsCgkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbWVzc2FnZSB0byBwaW4uXG4iCgkJfQoJXSwKCSJwaW5zLmxpc3QiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcGluczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIGdldCBwaW5uZWQgaXRlbXMgZm9yLlxuIgoJCX0KCV0sCgkicGlucy5yZW1vdmUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcGluczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB3aGVyZSB0aGUgaXRlbSBpcyBwaW5uZWQgdG8uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIHVuLXBpbi5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiZmlsZV9jb21tZW50IiwKCQkJImV4YW1wbGUiOiAiRmMxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgY29tbWVudCB0byB1bi1waW4uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRpbWVzdGFtcCIsCgkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbWVzc2FnZSB0byB1bi1waW4uXG4iCgkJfQoJXSwKCSJyZWFjdGlvbnMuYWRkIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlYWN0aW9uczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJuYW1lIiwKCQkJImV4YW1wbGUiOiAidGh1bWJzdXAiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiUmVhY3Rpb24gKGVtb2ppKSBuYW1lLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJmaWxlIiwKCQkJImV4YW1wbGUiOiAiRjEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSB0byBhZGQgcmVhY3Rpb24gdG8uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGVfY29tbWVudCIsCgkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIGNvbW1lbnQgdG8gYWRkIHJlYWN0aW9uIHRvLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB3aGVyZSB0aGUgbWVzc2FnZSB0byBhZGQgcmVhY3Rpb24gdG8gd2FzIHBvc3RlZC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidGltZXN0YW1wIiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtZXNzYWdlIHRvIGFkZCByZWFjdGlvbiB0by5cbiIKCQl9CgldLAoJInJlYWN0aW9ucy5nZXQiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcmVhY3Rpb25zOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiZmlsZSIsCgkJCSJleGFtcGxlIjogIkYxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gZ2V0IHJlYWN0aW9ucyBmb3IuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGVfY29tbWVudCIsCgkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIGNvbW1lbnQgdG8gZ2V0IHJlYWN0aW9ucyBmb3IuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHdoZXJlIHRoZSBtZXNzYWdlIHRvIGdldCByZWFjdGlvbnMgZm9yIHdhcyBwb3N0ZWQuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInRpbWVzdGFtcCIsCgkJCSJleGFtcGxlIjogIjEyMzQ1Njc4OTAuMTIzNDU2IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlRpbWVzdGFtcCBvZiB0aGUgbWVzc2FnZSB0byBnZXQgcmVhY3Rpb25zIGZvci5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiZnVsbCIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiSWYgdHJ1ZSBhbHdheXMgcmV0dXJuIHRoZSBjb21wbGV0ZSByZWFjdGlvbiBsaXN0LlxuIgoJCX0KCV0sCgkicmVhY3Rpb25zLmxpc3QiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcmVhY3Rpb25zOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlciIsCgkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlNob3cgcmVhY3Rpb25zIG1hZGUgYnkgdGhpcyB1c2VyLiBEZWZhdWx0cyB0byB0aGUgYXV0aGVkIHVzZXIuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZ1bGwiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIklmIHRydWUgYWx3YXlzIHJldHVybiB0aGUgY29tcGxldGUgcmVhY3Rpb24gbGlzdC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY291bnQiLAoJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybiBwZXIgcGFnZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicGFnZSIsCgkJCSJleGFtcGxlIjogIjIiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQYWdlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiIKCQl9CgldLAoJInJlYWN0aW9ucy5yZW1vdmUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcmVhY3Rpb25zOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogIm5hbWUiLAoJCQkiZXhhbXBsZSI6ICJ0aHVtYnN1cCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJSZWFjdGlvbiAoZW1vamkpIG5hbWUuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGUiLAoJCQkiZXhhbXBsZSI6ICJGMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIHRvIHJlbW92ZSByZWFjdGlvbiBmcm9tLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJmaWxlX2NvbW1lbnQiLAoJCQkiZXhhbXBsZSI6ICJGYzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSBjb21tZW50IHRvIHJlbW92ZSByZWFjdGlvbiBmcm9tLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjaGFubmVsIiwKCQkJImV4YW1wbGUiOiAiQzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiQ2hhbm5lbCB3aGVyZSB0aGUgbWVzc2FnZSB0byByZW1vdmUgcmVhY3Rpb24gZnJvbSB3YXMgcG9zdGVkLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0aW1lc3RhbXAiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1lc3NhZ2UgdG8gcmVtb3ZlIHJlYWN0aW9uIGZyb20uXG4iCgkJfQoJXSwKCSJyZW1pbmRlcnMuYWRkIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlbWluZGVyczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0ZXh0IiwKCQkJImV4YW1wbGUiOiAiZWF0IGEgYmFuYW5hIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRoZSBjb250ZW50IG9mIHRoZSByZW1pbmRlclxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0aW1lIiwKCQkJImV4YW1wbGUiOiAiMTYwMjI4ODAwMCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJXaGVuIHRoaXMgcmVtaW5kZXIgc2hvdWxkIGhhcHBlbjogdGhlIFVuaXggdGltZXN0YW1wICh1cCB0byBmaXZlIHllYXJzIGZyb20gbm93KSwgdGhlIG51bWJlciBvZiBzZWNvbmRzIHVudGlsIHRoZSByZW1pbmRlciAoaWYgd2l0aGluIDI0IGhvdXJzKSwgb3IgYSBuYXR1cmFsIGxhbmd1YWdlIGRlc2NyaXB0aW9uIChFeC4gXCJpbiAxNSBtaW51dGVzLFwiIG9yIFwiZXZlcnkgVGh1cnNkYXlcIilcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlciIsCgkJCSJleGFtcGxlIjogIlUxODg4ODg4OCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgdXNlciB3aG8gd2lsbCByZWNlaXZlIHRoZSByZW1pbmRlci4gSWYgbm8gdXNlciBpcyBzcGVjaWZpZWQsIHRoZSByZW1pbmRlciB3aWxsIGdvIHRvIHVzZXIgd2hvIGNyZWF0ZWQgaXQuXG4iCgkJfQoJXSwKCSJyZW1pbmRlcnMuY29tcGxldGUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogcmVtaW5kZXJzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInJlbWluZGVyIiwKCQkJImV4YW1wbGUiOiAiUm0xMjM0NTY3OCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgSUQgb2YgdGhlIHJlbWluZGVyIHRvIGJlIG1hcmtlZCBhcyBjb21wbGV0ZVxuIgoJCX0KCV0sCgkicmVtaW5kZXJzLmRlbGV0ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiByZW1pbmRlcnM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicmVtaW5kZXIiLAoJCQkiZXhhbXBsZSI6ICJSbTEyMzQ1Njc4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRoZSBJRCBvZiB0aGUgcmVtaW5kZXJcbiIKCQl9CgldLAoJInJlbWluZGVycy5pbmZvIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHJlbWluZGVyczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInJlbWluZGVyIiwKCQkJImV4YW1wbGUiOiAiUm0yMzQ1Njc4OSIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgSUQgb2YgdGhlIHJlbWluZGVyXG4iCgkJfQoJXSwKCSJyZW1pbmRlcnMubGlzdCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiByZW1pbmRlcnM6cmVhZFxuIgoJCX0KCV0sCgkicnRtLnN0YXJ0IjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGNsaWVudFxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJzaW1wbGVfbGF0ZXN0IiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJSZXR1cm4gdGltZXN0YW1wIG9ubHkgZm9yIGxhdGVzdCBtZXNzYWdlIG9iamVjdCBvZiBlYWNoIGNoYW5uZWwgKGltcHJvdmVzIHBlcmZvcm1hbmNlKS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibm9fdW5yZWFkcyIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiU2tpcCB1bnJlYWQgY291bnRzIGZvciBlYWNoIGNoYW5uZWwgKGltcHJvdmVzIHBlcmZvcm1hbmNlKS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibXBpbV9hd2FyZSIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiUmV0dXJucyBNUElNcyB0byB0aGUgY2xpZW50IGluIHRoZSBBUEkgcmVzcG9uc2UuXG4iCgkJfQoJXSwKCSJzZWFyY2guYWxsIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHNlYXJjaDpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInF1ZXJ5IiwKCQkJImV4YW1wbGUiOiAicGlja2xlZmFjZSIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJTZWFyY2ggcXVlcnkuIE1heSBjb250YWlucyBib29sZWFucywgZXRjLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJzb3J0IiwKCQkJImV4YW1wbGUiOiAidGltZXN0YW1wIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PXNjb3JlIiwKCQkJImRlc2NyaXB0aW9uIjogIlJldHVybiBtYXRjaGVzIHNvcnRlZCBieSBlaXRoZXIgc2NvcmUgb3IgdGltZXN0YW1wLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJzb3J0X2RpciIsCgkJCSJleGFtcGxlIjogImFzYyIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1kZXNjIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5nZSBzb3J0IGRpcmVjdGlvbiB0byBhc2NlbmRpbmcgKGFzYykgb3IgZGVzY2VuZGluZyAoZGVzYykuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImhpZ2hsaWdodCIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiUGFzcyBhIHZhbHVlIG9mIHRydWUgdG8gZW5hYmxlIHF1ZXJ5IGhpZ2hsaWdodCBtYXJrZXJzIChzZWUgYmVsb3cpLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjb3VudCIsCgkJCSJleGFtcGxlIjogIjIwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTIwIiwKCQkJImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBpdGVtcyB0byByZXR1cm4gcGVyIHBhZ2UuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInBhZ2UiLAoJCQkiZXhhbXBsZSI6ICIyIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEiLAoJCQkiZGVzY3JpcHRpb24iOiAiUGFnZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4iCgkJfQoJXSwKCSJzZWFyY2guZmlsZXMiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogc2VhcmNoOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicXVlcnkiLAoJCQkiZXhhbXBsZSI6ICJwaWNrbGVmYWNlIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlNlYXJjaCBxdWVyeS4gTWF5IGNvbnRhaW4gYm9vbGVhbnMsIGV0Yy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAic29ydCIsCgkJCSJleGFtcGxlIjogInRpbWVzdGFtcCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1zY29yZSIsCgkJCSJkZXNjcmlwdGlvbiI6ICJSZXR1cm4gbWF0Y2hlcyBzb3J0ZWQgYnkgZWl0aGVyIHNjb3JlIG9yIHRpbWVzdGFtcC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAic29ydF9kaXIiLAoJCQkiZXhhbXBsZSI6ICJhc2MiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9ZGVzYyIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFuZ2Ugc29ydCBkaXJlY3Rpb24gdG8gYXNjZW5kaW5nIChhc2MpIG9yIGRlc2NlbmRpbmcgKGRlc2MpLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJoaWdobGlnaHQiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlBhc3MgYSB2YWx1ZSBvZiB0cnVlIHRvIGVuYWJsZSBxdWVyeSBoaWdobGlnaHQgbWFya2VycyAoc2VlIGJlbG93KS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY291bnQiLAoJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0yMCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuIHBlciBwYWdlLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJwYWdlIiwKCQkJImV4YW1wbGUiOiAiMiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xIiwKCQkJImRlc2NyaXB0aW9uIjogIlBhZ2UgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuIgoJCX0KCV0sCgkic2VhcmNoLm1lc3NhZ2VzIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHNlYXJjaDpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInF1ZXJ5IiwKCQkJImV4YW1wbGUiOiAicGlja2xlZmFjZSIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJTZWFyY2ggcXVlcnkuIE1heSBjb250YWlucyBib29sZWFucywgZXRjLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJzb3J0IiwKCQkJImV4YW1wbGUiOiAidGltZXN0YW1wIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PXNjb3JlIiwKCQkJImRlc2NyaXB0aW9uIjogIlJldHVybiBtYXRjaGVzIHNvcnRlZCBieSBlaXRoZXIgc2NvcmUgb3IgdGltZXN0YW1wLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJzb3J0X2RpciIsCgkJCSJleGFtcGxlIjogImFzYyIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1kZXNjIiwKCQkJImRlc2NyaXB0aW9uIjogIkNoYW5nZSBzb3J0IGRpcmVjdGlvbiB0byBhc2NlbmRpbmcgKGFzYykgb3IgZGVzY2VuZGluZyAoZGVzYykuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImhpZ2hsaWdodCIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiUGFzcyBhIHZhbHVlIG9mIHRydWUgdG8gZW5hYmxlIHF1ZXJ5IGhpZ2hsaWdodCBtYXJrZXJzIChzZWUgYmVsb3cpLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjb3VudCIsCgkJCSJleGFtcGxlIjogIjIwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTIwIiwKCQkJImRlc2NyaXB0aW9uIjogIk51bWJlciBvZiBpdGVtcyB0byByZXR1cm4gcGVyIHBhZ2UuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInBhZ2UiLAoJCQkiZXhhbXBsZSI6ICIyIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEiLAoJCQkiZGVzY3JpcHRpb24iOiAiUGFnZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4uXG4iCgkJfQoJXSwKCSJzdGFycy5hZGQiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogc3RhcnM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiZmlsZSIsCgkJCSJleGFtcGxlIjogIkYxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkZpbGUgdG8gYWRkIHN0YXIgdG8uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImZpbGVfY29tbWVudCIsCgkJCSJleGFtcGxlIjogIkZjMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIGNvbW1lbnQgdG8gYWRkIHN0YXIgdG8uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIGFkZCBzdGFyIHRvLCBvciBjaGFubmVsIHdoZXJlIHRoZSBtZXNzYWdlIHRvIGFkZCBzdGFyIHRvIHdhcyBwb3N0ZWQgKHVzZWQgd2l0aCB0aW1lc3RhbXApLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ0aW1lc3RhbXAiLAoJCQkiZXhhbXBsZSI6ICIxMjM0NTY3ODkwLjEyMzQ1NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUaW1lc3RhbXAgb2YgdGhlIG1lc3NhZ2UgdG8gYWRkIHN0YXIgdG8uXG4iCgkJfQoJXSwKCSJzdGFycy5saXN0IjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHN0YXJzOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY291bnQiLAoJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybiBwZXIgcGFnZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicGFnZSIsCgkJCSJleGFtcGxlIjogIjIiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQYWdlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiIKCQl9CgldLAoJInN0YXJzLnJlbW92ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBzdGFyczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJmaWxlIiwKCQkJImV4YW1wbGUiOiAiRjEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSB0byByZW1vdmUgc3RhciBmcm9tLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJmaWxlX2NvbW1lbnQiLAoJCQkiZXhhbXBsZSI6ICJGYzEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiRmlsZSBjb21tZW50IHRvIHJlbW92ZSBzdGFyIGZyb20uXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNoYW5uZWwiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJDaGFubmVsIHRvIHJlbW92ZSBzdGFyIGZyb20sIG9yIGNoYW5uZWwgd2hlcmUgdGhlIG1lc3NhZ2UgdG8gcmVtb3ZlIHN0YXIgZnJvbSB3YXMgcG9zdGVkICh1c2VkIHdpdGggdGltZXN0YW1wKS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidGltZXN0YW1wIiwKCQkJImV4YW1wbGUiOiAiMTIzNDU2Nzg5MC4xMjM0NTYiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGltZXN0YW1wIG9mIHRoZSBtZXNzYWdlIHRvIHJlbW92ZSBzdGFyIGZyb20uXG4iCgkJfQoJXSwKCSJ0ZWFtLmFjY2Vzc0xvZ3MiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogYWRtaW5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY291bnQiLAoJCQkiZXhhbXBsZSI6ICIyMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xMDAiLAoJCQkiZGVzY3JpcHRpb24iOiAiTnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybiBwZXIgcGFnZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicGFnZSIsCgkJCSJleGFtcGxlIjogIjIiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9MSIsCgkJCSJkZXNjcmlwdGlvbiI6ICJQYWdlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybi5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiYmVmb3JlIiwKCQkJImV4YW1wbGUiOiAiMTQ1Nzk4OTE2NiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD1ub3ciLAoJCQkiZGVzY3JpcHRpb24iOiAiRW5kIG9mIHRpbWUgcmFuZ2Ugb2YgbG9ncyB0byBpbmNsdWRlIGluIHJlc3VsdHMgKGluY2x1c2l2ZSkuXG4iCgkJfQoJXSwKCSJ0ZWFtLmJpbGxhYmxlSW5mbyI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBhZG1pblxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ1c2VyIiwKCQkJImV4YW1wbGUiOiAiVTEyMzQ1Njc4OTAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiQSB1c2VyIHRvIHJldHJpZXZlIHRoZSBiaWxsYWJsZSBpbmZvcm1hdGlvbiBmb3IuIERlZmF1bHRzIHRvIGFsbCB1c2Vycy5cbiIKCQl9CgldLAoJInRlYW0uaW5mbyI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB0ZWFtOnJlYWRcbiIKCQl9CgldLAoJInRlYW0uaW50ZWdyYXRpb25Mb2dzIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IGFkbWluXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInNlcnZpY2VfaWQiLAoJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyB0byB0aGlzIHNlcnZpY2UuIERlZmF1bHRzIHRvIGFsbCBsb2dzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJhcHBfaWQiLAoJCQkiZXhhbXBsZSI6ICLCoCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyB0byB0aGlzIFNsYWNrIGFwcC4gRGVmYXVsdHMgdG8gYWxsIGxvZ3MuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXIiLAoJCQkiZXhhbXBsZSI6ICJVMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyBnZW5lcmF0ZWQgYnkgdGhpcyB1c2Vy4oCZcyBhY3Rpb25zLiBEZWZhdWx0cyB0byBhbGwgbG9ncy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbmdlX3R5cGUiLAoJCQkiZXhhbXBsZSI6ICJhZGRlZCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgbG9ncyB3aXRoIHRoaXMgY2hhbmdlIHR5cGUuIERlZmF1bHRzIHRvIGFsbCBsb2dzLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjb3VudCIsCgkJCSJleGFtcGxlIjogIjIwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsLCBkZWZhdWx0PTEwMCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJOdW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuIHBlciBwYWdlLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJwYWdlIiwKCQkJImV4YW1wbGUiOiAiMiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCwgZGVmYXVsdD0xIiwKCQkJImRlc2NyaXB0aW9uIjogIlBhZ2UgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLlxuIgoJCX0KCV0sCgkidGVhbS5wcm9maWxlLmdldCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2Vycy5wcm9maWxlOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidmlzaWJpbGl0eSIsCgkJCSJleGFtcGxlIjogImFsbCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWx0ZXIgYnkgdmlzaWJpbGl0eS5cbiIKCQl9CgldLAoJInVzZXJncm91cHMuY3JlYXRlIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJncm91cHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibmFtZSIsCgkJCSJleGFtcGxlIjogIk15IFRlc3QgVGVhbSIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBIG5hbWUgZm9yIHRoZSBVc2VyIEdyb3VwLiBNdXN0IGJlIHVuaXF1ZSBhbW9uZyBVc2VyIEdyb3Vwcy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaGFuZGxlIiwKCQkJImV4YW1wbGUiOiAibWFya2V0aW5nIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkEgbWVudGlvbiBoYW5kbGUuIE11c3QgYmUgdW5pcXVlIGFtb25nIGNoYW5uZWxzLCB1c2VycyBhbmQgVXNlciBHcm91cHMuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImRlc2NyaXB0aW9uIiwKCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiQSBzaG9ydCBkZXNjcmlwdGlvbiBvZiB0aGUgVXNlciBHcm91cC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbHMiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCxDMjM0NTY3ODkwMSxDMzQ1Njc4OTAxMiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBIGNvbW1hIHNlcGFyYXRlZCBzdHJpbmcgb2YgZW5jb2RlZCBjaGFubmVsIElEcyBmb3Igd2hpY2ggdGhlIFVzZXIgR3JvdXAgdXNlcyBhcyBhIGRlZmF1bHQuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImluY2x1ZGVfY291bnQiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIG51bWJlciBvZiB1c2VycyBpbiBlYWNoIFVzZXIgR3JvdXAuXG4iCgkJfQoJXSwKCSJ1c2VyZ3JvdXBzLmRpc2FibGUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcmdyb3Vwczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ1c2VyZ3JvdXAiLAoJCQkiZXhhbXBsZSI6ICJTMDYwNFFTSkMiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIGVuY29kZWQgSUQgb2YgdGhlIFVzZXIgR3JvdXAgdG8gZGlzYWJsZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaW5jbHVkZV9jb3VudCIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSB0aGUgbnVtYmVyIG9mIHVzZXJzIGluIHRoZSBVc2VyIEdyb3VwLlxuIgoJCX0KCV0sCgkidXNlcmdyb3Vwcy5lbmFibGUiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcmdyb3Vwczp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJ1c2VyZ3JvdXAiLAoJCQkiZXhhbXBsZSI6ICJTMDYwNFFTSkMiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiVGhlIGVuY29kZWQgSUQgb2YgdGhlIFVzZXIgR3JvdXAgdG8gZW5hYmxlLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJpbmNsdWRlX2NvdW50IiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIHRoZSBudW1iZXIgb2YgdXNlcnMgaW4gdGhlIFVzZXIgR3JvdXAuXG4iCgkJfQoJXSwKCSJ1c2VyZ3JvdXBzLmxpc3QiOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcmdyb3VwczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImluY2x1ZGVfZGlzYWJsZWQiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgZGlzYWJsZWQgVXNlciBHcm91cHMuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImluY2x1ZGVfY291bnQiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIG51bWJlciBvZiB1c2VycyBpbiBlYWNoIFVzZXIgR3JvdXAuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImluY2x1ZGVfdXNlcnMiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIGxpc3Qgb2YgdXNlcnMgZm9yIGVhY2ggVXNlciBHcm91cC5cbiIKCQl9CgldLAoJInVzZXJncm91cHMudXBkYXRlIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJncm91cHM6d3JpdGVcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlcmdyb3VwIiwKCQkJImV4YW1wbGUiOiAiUzA2MDRRU0pDIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRoZSBlbmNvZGVkIElEIG9mIHRoZSBVc2VyIEdyb3VwIHRvIHVwZGF0ZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibmFtZSIsCgkJCSJleGFtcGxlIjogIk15IFRlc3QgVGVhbSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBIG5hbWUgZm9yIHRoZSBVc2VyIEdyb3VwLiBNdXN0IGJlIHVuaXF1ZSBhbW9uZyBVc2VyIEdyb3Vwcy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaGFuZGxlIiwKCQkJImV4YW1wbGUiOiAibWFya2V0aW5nIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkEgbWVudGlvbiBoYW5kbGUuIE11c3QgYmUgdW5pcXVlIGFtb25nIGNoYW5uZWxzLCB1c2VycyBhbmQgVXNlciBHcm91cHMuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImRlc2NyaXB0aW9uIiwKCQkJImV4YW1wbGUiOiAiwqAiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiQSBzaG9ydCBkZXNjcmlwdGlvbiBvZiB0aGUgVXNlciBHcm91cC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY2hhbm5lbHMiLAoJCQkiZXhhbXBsZSI6ICJDMTIzNDU2Nzg5MCxDMjM0NTY3ODkwMSxDMzQ1Njc4OTAxMiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBIGNvbW1hIHNlcGFyYXRlZCBzdHJpbmcgb2YgZW5jb2RlZCBjaGFubmVsIElEcyBmb3Igd2hpY2ggdGhlIFVzZXIgR3JvdXAgdXNlcyBhcyBhIGRlZmF1bHQuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImluY2x1ZGVfY291bnQiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkluY2x1ZGUgdGhlIG51bWJlciBvZiB1c2VycyBpbiB0aGUgVXNlciBHcm91cC5cbiIKCQl9CgldLAoJInVzZXJncm91cHMudXNlcnMubGlzdCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyZ3JvdXBzOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlcmdyb3VwIiwKCQkJImV4YW1wbGUiOiAiUzA2MDRRU0pDIiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIlRoZSBlbmNvZGVkIElEIG9mIHRoZSBVc2VyIEdyb3VwIHRvIHVwZGF0ZS5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiaW5jbHVkZV9kaXNhYmxlZCIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiQWxsb3cgcmVzdWx0cyB0aGF0IGludm9sdmUgZGlzYWJsZWQgVXNlciBHcm91cHMuXG4iCgkJfQoJXSwKCSJ1c2VyZ3JvdXBzLnVzZXJzLnVwZGF0ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyZ3JvdXBzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXJncm91cCIsCgkJCSJleGFtcGxlIjogIlMwNjA0UVNKQyIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJUaGUgZW5jb2RlZCBJRCBvZiB0aGUgVXNlciBHcm91cCB0byB1cGRhdGUuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXJzIiwKCQkJImV4YW1wbGUiOiAiVTA2MFI0Qko0LFUwNjBSTlJDWiIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBIGNvbW1hIHNlcGFyYXRlZCBzdHJpbmcgb2YgZW5jb2RlZCB1c2VyIElEcyB0aGF0IHJlcHJlc2VudCB0aGUgZW50aXJlIGxpc3Qgb2YgdXNlcnMgZm9yIHRoZSBVc2VyIEdyb3VwLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJpbmNsdWRlX2NvdW50IiwKCQkJImV4YW1wbGUiOiAidHJ1ZSIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJJbmNsdWRlIHRoZSBudW1iZXIgb2YgdXNlcnMgaW4gdGhlIFVzZXIgR3JvdXAuXG4iCgkJfQoJXSwKCSJ1c2Vycy5kZWxldGVQaG90byI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2Vycy5wcm9maWxlOndyaXRlXG4iCgkJfQoJXSwKCSJ1c2Vycy5nZXRQcmVzZW5jZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXIiLAoJCQkiZXhhbXBsZSI6ICJVMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIGdldCBwcmVzZW5jZSBpbmZvIG9uLiBEZWZhdWx0cyB0byB0aGUgYXV0aGVkIHVzZXIuXG4iCgkJfQoJXSwKCSJ1c2Vycy5pZGVudGl0eSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiBpZGVudGl0eS5iYXNpY1xuIgoJCX0KCV0sCgkidXNlcnMuaW5mbyI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2VyczpyZWFkXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXIiLAoJCQkiZXhhbXBsZSI6ICJVMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJVc2VyIHRvIGdldCBpbmZvIG9uXG4iCgkJfQoJXSwKCSJ1c2Vycy5saXN0IjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicHJlc2VuY2UiLAoJCQkiZXhhbXBsZSI6ICJ0cnVlIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIldoZXRoZXIgdG8gaW5jbHVkZSBwcmVzZW5jZSBkYXRhIGluIHRoZSBvdXRwdXRcbiIKCQl9CgldLAoJInVzZXJzLnNldEFjdGl2ZSI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2Vyczp3cml0ZVxuIgoJCX0KCV0sCgkidXNlcnMuc2V0UGhvdG8iOiBbCgkJewoJCQkibmFtZSI6ICJ0b2tlbiIsCgkJCSJleGFtcGxlIjogInh4eHgteHh4eHh4eHh4LXh4eHgiLAoJCQkicmVxdWlyZWQiOiAiUmVxdWlyZWQiLAoJCQkiZGVzY3JpcHRpb24iOiAiQXV0aGVudGljYXRpb24gdG9rZW4uXG5SZXF1aXJlcyBzY29wZTogdXNlcnMucHJvZmlsZTp3cml0ZVxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJpbWFnZSIsCgkJCSJleGFtcGxlIjogIi4uLiIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJGaWxlIGNvbnRlbnRzIHZpYSBtdWx0aXBhcnQvZm9ybS1kYXRhLlxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJjcm9wX3giLAoJCQkiZXhhbXBsZSI6ICIxMCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJYIGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQgY29ybmVyIG9mIGNyb3AgYm94XG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogImNyb3BfeSIsCgkJCSJleGFtcGxlIjogIjE1IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlkgY29vcmRpbmF0ZSBvZiB0b3AtbGVmdCBjb3JuZXIgb2YgY3JvcCBib3hcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAiY3JvcF93IiwKCQkJImV4YW1wbGUiOiAiMTAwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIldpZHRoL2hlaWdodCBvZiBjcm9wIGJveCAoYWx3YXlzIHNxdWFyZSlcbiIKCQl9CgldLAoJInVzZXJzLnNldFByZXNlbmNlIjogWwoJCXsKCQkJIm5hbWUiOiAidG9rZW4iLAoJCQkiZXhhbXBsZSI6ICJ4eHh4LXh4eHh4eHh4eC14eHh4IiwKCQkJInJlcXVpcmVkIjogIlJlcXVpcmVkIiwKCQkJImRlc2NyaXB0aW9uIjogIkF1dGhlbnRpY2F0aW9uIHRva2VuLlxuUmVxdWlyZXMgc2NvcGU6IHVzZXJzOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInByZXNlbmNlIiwKCQkJImV4YW1wbGUiOiAiYXdheSIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJFaXRoZXIgYXV0byBvciBhd2F5XG4iCgkJfQoJXSwKCSJ1c2Vycy5wcm9maWxlLmdldCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2Vycy5wcm9maWxlOnJlYWRcbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAidXNlciIsCgkJCSJleGFtcGxlIjogIlUxMjM0NTY3ODkwIiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIlVzZXIgdG8gcmV0cmlldmUgcHJvZmlsZSBpbmZvIGZvclxuIgoJCX0sCgkJewoJCQkibmFtZSI6ICJpbmNsdWRlX2xhYmVscyIsCgkJCSJleGFtcGxlIjogInRydWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwsIGRlZmF1bHQ9ZmFsc2UiLAoJCQkiZGVzY3JpcHRpb24iOiAiSW5jbHVkZSBsYWJlbHMgZm9yIGVhY2ggSUQgaW4gY3VzdG9tIHByb2ZpbGUgZmllbGRzXG4iCgkJfQoJXSwKCSJ1c2Vycy5wcm9maWxlLnNldCI6IFsKCQl7CgkJCSJuYW1lIjogInRva2VuIiwKCQkJImV4YW1wbGUiOiAieHh4eC14eHh4eHh4eHgteHh4eCIsCgkJCSJyZXF1aXJlZCI6ICJSZXF1aXJlZCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJBdXRoZW50aWNhdGlvbiB0b2tlbi5cblJlcXVpcmVzIHNjb3BlOiB1c2Vycy5wcm9maWxlOndyaXRlXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInVzZXIiLAoJCQkiZXhhbXBsZSI6ICJVMTIzNDU2Nzg5MCIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJJRCBvZiB1c2VyIHRvIGNoYW5nZS4gVGhpcyBhcmd1bWVudCBtYXkgb25seSBiZSBzcGVjaWZpZWQgYnkgdGVhbSBhZG1pbnMgb24gcGFpZCB0ZWFtcy5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAicHJvZmlsZSIsCgkJCSJleGFtcGxlIjogInsgZmlyc3RfbmFtZTogXCJKb2huXCIsIC4uLiB9IiwKCQkJInJlcXVpcmVkIjogIk9wdGlvbmFsIiwKCQkJImRlc2NyaXB0aW9uIjogIkNvbGxlY3Rpb24gb2Yga2V5OnZhbHVlIHBhaXJzIHByZXNlbnRlZCBhcyBhIFVSTC1lbmNvZGVkIEpTT04gaGFzaC5cbiIKCQl9LAoJCXsKCQkJIm5hbWUiOiAibmFtZSIsCgkJCSJleGFtcGxlIjogImZpcnN0X25hbWUiLAoJCQkicmVxdWlyZWQiOiAiT3B0aW9uYWwiLAoJCQkiZGVzY3JpcHRpb24iOiAiTmFtZSBvZiBhIHNpbmdsZSBrZXkgdG8gc2V0LiBVc2FibGUgb25seSBpZiBwcm9maWxlIGlzIG5vdCBwYXNzZWQuXG4iCgkJfSwKCQl7CgkJCSJuYW1lIjogInZhbHVlIiwKCQkJImV4YW1wbGUiOiAiSm9obiIsCgkJCSJyZXF1aXJlZCI6ICJPcHRpb25hbCIsCgkJCSJkZXNjcmlwdGlvbiI6ICJWYWx1ZSB0byBzZXQgYSBzaW5nbGUga2V5IHRvLiBVc2FibGUgb25seSBpZiBwcm9maWxlIGlzIG5vdCBwYXNzZWQuXG4iCgkJfQoJXQp9OwoKLyoqKi8gfSksCi8qIDEzNCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7CgovLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzcwoKZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpOwp9OwpleHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7CiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7Cn07CmV4cG9ydHMuY2xlYXJUaW1lb3V0ID0KZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkgewogIGlmICh0aW1lb3V0KSB7CiAgICB0aW1lb3V0LmNsb3NlKCk7CiAgfQp9OwoKZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikgewogIHRoaXMuX2lkID0gaWQ7CiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47Cn0KVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9OwpUaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkgewogIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTsKfTsKCi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLgpleHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7CiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpOwogIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7Cn07CgpleHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkgewogIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTsKICBpdGVtLl9pZGxlVGltZW91dCA9IC0xOwp9OwoKZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHsKICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7CgogIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0OwogIGlmIChtc2VjcyA+PSAwKSB7CiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7CiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpCiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7CiAgICB9LCBtc2Vjcyk7CiAgfQp9OwoKLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdApfX3dlYnBhY2tfcmVxdWlyZV9fKDE0Myk7CmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlOwpleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7CgoKLyoqKi8gfSksCi8qIDEzNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlLCBnbG9iYWwpIHt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyohIGh0dHBzOi8vbXRocy5iZS9wdW55Y29kZSB2MS40LjEgYnkgQG1hdGhpYXMgKi8KOyhmdW5jdGlvbihyb290KSB7CgoJLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlcyAqLwoJdmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJgoJCSFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7Cgl2YXIgZnJlZU1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmCgkJIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7Cgl2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsOwoJaWYgKAoJCWZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8CgkJZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwgfHwKCQlmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWwKCSkgewoJCXJvb3QgPSBmcmVlR2xvYmFsOwoJfQoKCS8qKgoJICogVGhlIGBwdW55Y29kZWAgb2JqZWN0LgoJICogQG5hbWUgcHVueWNvZGUKCSAqIEB0eXBlIE9iamVjdAoJICovCgl2YXIgcHVueWNvZGUsCgoJLyoqIEhpZ2hlc3QgcG9zaXRpdmUgc2lnbmVkIDMyLWJpdCBmbG9hdCB2YWx1ZSAqLwoJbWF4SW50ID0gMjE0NzQ4MzY0NywgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMQoKCS8qKiBCb290c3RyaW5nIHBhcmFtZXRlcnMgKi8KCWJhc2UgPSAzNiwKCXRNaW4gPSAxLAoJdE1heCA9IDI2LAoJc2tldyA9IDM4LAoJZGFtcCA9IDcwMCwKCWluaXRpYWxCaWFzID0gNzIsCglpbml0aWFsTiA9IDEyOCwgLy8gMHg4MAoJZGVsaW1pdGVyID0gJy0nLCAvLyAnXHgyRCcKCgkvKiogUmVndWxhciBleHByZXNzaW9ucyAqLwoJcmVnZXhQdW55Y29kZSA9IC9eeG4tLS8sCglyZWdleE5vbkFTQ0lJID0gL1teXHgyMC1ceDdFXS8sIC8vIHVucHJpbnRhYmxlIEFTQ0lJIGNoYXJzICsgbm9uLUFTQ0lJIGNoYXJzCglyZWdleFNlcGFyYXRvcnMgPSAvW1x4MkVcdTMwMDJcdUZGMEVcdUZGNjFdL2csIC8vIFJGQyAzNDkwIHNlcGFyYXRvcnMKCgkvKiogRXJyb3IgbWVzc2FnZXMgKi8KCWVycm9ycyA9IHsKCQknb3ZlcmZsb3cnOiAnT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3MnLAoJCSdub3QtYmFzaWMnOiAnSWxsZWdhbCBpbnB1dCA+PSAweDgwIChub3QgYSBiYXNpYyBjb2RlIHBvaW50KScsCgkJJ2ludmFsaWQtaW5wdXQnOiAnSW52YWxpZCBpbnB1dCcKCX0sCgoJLyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqLwoJYmFzZU1pbnVzVE1pbiA9IGJhc2UgLSB0TWluLAoJZmxvb3IgPSBNYXRoLmZsb29yLAoJc3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSwKCgkvKiogVGVtcG9yYXJ5IHZhcmlhYmxlICovCglrZXk7CgoJLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgoJLyoqCgkgKiBBIGdlbmVyaWMgZXJyb3IgdXRpbGl0eSBmdW5jdGlvbi4KCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgZXJyb3IgdHlwZS4KCSAqIEByZXR1cm5zIHtFcnJvcn0gVGhyb3dzIGEgYFJhbmdlRXJyb3JgIHdpdGggdGhlIGFwcGxpY2FibGUgZXJyb3IgbWVzc2FnZS4KCSAqLwoJZnVuY3Rpb24gZXJyb3IodHlwZSkgewoJCXRocm93IG5ldyBSYW5nZUVycm9yKGVycm9yc1t0eXBlXSk7Cgl9CgoJLyoqCgkgKiBBIGdlbmVyaWMgYEFycmF5I21hcGAgdXRpbGl0eSBmdW5jdGlvbi4KCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLgoJICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IGFycmF5CgkgKiBpdGVtLgoJICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLgoJICovCglmdW5jdGlvbiBtYXAoYXJyYXksIGZuKSB7CgkJdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDsKCQl2YXIgcmVzdWx0ID0gW107CgkJd2hpbGUgKGxlbmd0aC0tKSB7CgkJCXJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7CgkJfQoJCXJldHVybiByZXN1bHQ7Cgl9CgoJLyoqCgkgKiBBIHNpbXBsZSBgQXJyYXkjbWFwYC1saWtlIHdyYXBwZXIgdG8gd29yayB3aXRoIGRvbWFpbiBuYW1lIHN0cmluZ3Mgb3IgZW1haWwKCSAqIGFkZHJlc3Nlcy4KCSAqIEBwcml2YXRlCgkgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzLgoJICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5CgkgKiBjaGFyYWN0ZXIuCgkgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IHN0cmluZyBvZiBjaGFyYWN0ZXJzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjawoJICogZnVuY3Rpb24uCgkgKi8KCWZ1bmN0aW9uIG1hcERvbWFpbihzdHJpbmcsIGZuKSB7CgkJdmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7CgkJdmFyIHJlc3VsdCA9ICcnOwoJCWlmIChwYXJ0cy5sZW5ndGggPiAxKSB7CgkJCS8vIEluIGVtYWlsIGFkZHJlc3Nlcywgb25seSB0aGUgZG9tYWluIG5hbWUgc2hvdWxkIGJlIHB1bnljb2RlZC4gTGVhdmUKCQkJLy8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC4KCQkJcmVzdWx0ID0gcGFydHNbMF0gKyAnQCc7CgkJCXN0cmluZyA9IHBhcnRzWzFdOwoJCX0KCQkvLyBBdm9pZCBgc3BsaXQocmVnZXgpYCBmb3IgSUU4IGNvbXBhdGliaWxpdHkuIFNlZSAjMTcuCgkJc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UocmVnZXhTZXBhcmF0b3JzLCAnXHgyRScpOwoJCXZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTsKCQl2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7CgkJcmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7Cgl9CgoJLyoqCgkgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG51bWVyaWMgY29kZSBwb2ludHMgb2YgZWFjaCBVbmljb2RlCgkgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksCgkgKiB0aGlzIGZ1bmN0aW9uIHdpbGwgY29udmVydCBhIHBhaXIgb2Ygc3Vycm9nYXRlIGhhbHZlcyAoZWFjaCBvZiB3aGljaAoJICogVUNTLTIgZXhwb3NlcyBhcyBzZXBhcmF0ZSBjaGFyYWN0ZXJzKSBpbnRvIGEgc2luZ2xlIGNvZGUgcG9pbnQsCgkgKiBtYXRjaGluZyBVVEYtMTYuCgkgKiBAc2VlIGBwdW55Y29kZS51Y3MyLmVuY29kZWAKCSAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPgoJICogQG1lbWJlck9mIHB1bnljb2RlLnVjczIKCSAqIEBuYW1lIGRlY29kZQoJICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUgVW5pY29kZSBpbnB1dCBzdHJpbmcgKFVDUy0yKS4KCSAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy4KCSAqLwoJZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpIHsKCQl2YXIgb3V0cHV0ID0gW10sCgkJICAgIGNvdW50ZXIgPSAwLAoJCSAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoLAoJCSAgICB2YWx1ZSwKCQkgICAgZXh0cmE7CgkJd2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHsKCQkJdmFsdWUgPSBzdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspOwoJCQlpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7CgkJCQkvLyBoaWdoIHN1cnJvZ2F0ZSwgYW5kIHRoZXJlIGlzIGEgbmV4dCBjaGFyYWN0ZXIKCQkJCWV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTsKCQkJCWlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkgeyAvLyBsb3cgc3Vycm9nYXRlCgkJCQkJb3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy8gdW5tYXRjaGVkIHN1cnJvZ2F0ZTsgb25seSBhcHBlbmQgdGhpcyBjb2RlIHVuaXQsIGluIGNhc2UgdGhlIG5leHQKCQkJCQkvLyBjb2RlIHVuaXQgaXMgdGhlIGhpZ2ggc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIKCQkJCQlvdXRwdXQucHVzaCh2YWx1ZSk7CgkJCQkJY291bnRlci0tOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJb3V0cHV0LnB1c2godmFsdWUpOwoJCQl9CgkJfQoJCXJldHVybiBvdXRwdXQ7Cgl9CgoJLyoqCgkgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuCgkgKiBAc2VlIGBwdW55Y29kZS51Y3MyLmRlY29kZWAKCSAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyCgkgKiBAbmFtZSBlbmNvZGUKCSAqIEBwYXJhbSB7QXJyYXl9IGNvZGVQb2ludHMgVGhlIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuCgkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgbmV3IFVuaWNvZGUgc3RyaW5nIChVQ1MtMikuCgkgKi8KCWZ1bmN0aW9uIHVjczJlbmNvZGUoYXJyYXkpIHsKCQlyZXR1cm4gbWFwKGFycmF5LCBmdW5jdGlvbih2YWx1ZSkgewoJCQl2YXIgb3V0cHV0ID0gJyc7CgkJCWlmICh2YWx1ZSA+IDB4RkZGRikgewoJCQkJdmFsdWUgLT0gMHgxMDAwMDsKCQkJCW91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApOwoJCQkJdmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGOwoJCQl9CgkJCW91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpOwoJCQlyZXR1cm4gb3V0cHV0OwoJCX0pLmpvaW4oJycpOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBiYXNpYyBjb2RlIHBvaW50IGludG8gYSBkaWdpdC9pbnRlZ2VyLgoJICogQHNlZSBgZGlnaXRUb0Jhc2ljKClgCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtOdW1iZXJ9IGNvZGVQb2ludCBUaGUgYmFzaWMgbnVtZXJpYyBjb2RlIHBvaW50IHZhbHVlLgoJICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50IChmb3IgdXNlIGluCgkgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmCgkgKiB0aGUgY29kZSBwb2ludCBkb2VzIG5vdCByZXByZXNlbnQgYSB2YWx1ZS4KCSAqLwoJZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkgewoJCWlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7CgkJCXJldHVybiBjb2RlUG9pbnQgLSAyMjsKCQl9CgkJaWYgKGNvZGVQb2ludCAtIDY1IDwgMjYpIHsKCQkJcmV0dXJuIGNvZGVQb2ludCAtIDY1OwoJCX0KCQlpZiAoY29kZVBvaW50IC0gOTcgPCAyNikgewoJCQlyZXR1cm4gY29kZVBvaW50IC0gOTc7CgkJfQoJCXJldHVybiBiYXNlOwoJfQoKCS8qKgoJICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LgoJICogQHNlZSBgYmFzaWNUb0RpZ2l0KClgCgkgKiBAcHJpdmF0ZQoJICogQHBhcmFtIHtOdW1iZXJ9IGRpZ2l0IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludC4KCSAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBiYXNpYyBjb2RlIHBvaW50IHdob3NlIHZhbHVlICh3aGVuIHVzZWQgZm9yCgkgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGlzIGBkaWdpdGAsIHdoaWNoIG5lZWRzIHRvIGJlIGluIHRoZSByYW5nZQoJICogYDBgIHRvIGBiYXNlIC0gMWAuIElmIGBmbGFnYCBpcyBub24temVybywgdGhlIHVwcGVyY2FzZSBmb3JtIGlzCgkgKiB1c2VkOyBlbHNlLCB0aGUgbG93ZXJjYXNlIGZvcm0gaXMgdXNlZC4gVGhlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZAoJICogaWYgYGZsYWdgIGlzIG5vbi16ZXJvIGFuZCBgZGlnaXRgIGhhcyBubyB1cHBlcmNhc2UgZm9ybS4KCSAqLwoJZnVuY3Rpb24gZGlnaXRUb0Jhc2ljKGRpZ2l0LCBmbGFnKSB7CgkJLy8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLloKCQkvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjkKCQlyZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpIC0gKChmbGFnICE9IDApIDw8IDUpOwoJfQoKCS8qKgoJICogQmlhcyBhZGFwdGF0aW9uIGZ1bmN0aW9uIGFzIHBlciBzZWN0aW9uIDMuNCBvZiBSRkMgMzQ5Mi4KCSAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNDkyI3NlY3Rpb24tMy40CgkgKiBAcHJpdmF0ZQoJICovCglmdW5jdGlvbiBhZGFwdChkZWx0YSwgbnVtUG9pbnRzLCBmaXJzdFRpbWUpIHsKCQl2YXIgayA9IDA7CgkJZGVsdGEgPSBmaXJzdFRpbWUgPyBmbG9vcihkZWx0YSAvIGRhbXApIDogZGVsdGEgPj4gMTsKCQlkZWx0YSArPSBmbG9vcihkZWx0YSAvIG51bVBvaW50cyk7CgkJZm9yICgvKiBubyBpbml0aWFsaXphdGlvbiAqLzsgZGVsdGEgPiBiYXNlTWludXNUTWluICogdE1heCA+PiAxOyBrICs9IGJhc2UpIHsKCQkJZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pOwoJCX0KCQlyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scyB0byBhIHN0cmluZyBvZiBVbmljb2RlCgkgKiBzeW1ib2xzLgoJICogQG1lbWJlck9mIHB1bnljb2RlCgkgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuCgkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuCgkgKi8KCWZ1bmN0aW9uIGRlY29kZShpbnB1dCkgewoJCS8vIERvbid0IHVzZSBVQ1MtMgoJCXZhciBvdXRwdXQgPSBbXSwKCQkgICAgaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsCgkJICAgIG91dCwKCQkgICAgaSA9IDAsCgkJICAgIG4gPSBpbml0aWFsTiwKCQkgICAgYmlhcyA9IGluaXRpYWxCaWFzLAoJCSAgICBiYXNpYywKCQkgICAgaiwKCQkgICAgaW5kZXgsCgkJICAgIG9sZGksCgkJICAgIHcsCgkJICAgIGssCgkJICAgIGRpZ2l0LAoJCSAgICB0LAoJCSAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi8KCQkgICAgYmFzZU1pbnVzVDsKCgkJLy8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50czogbGV0IGBiYXNpY2AgYmUgdGhlIG51bWJlciBvZiBpbnB1dCBjb2RlCgkJLy8gcG9pbnRzIGJlZm9yZSB0aGUgbGFzdCBkZWxpbWl0ZXIsIG9yIGAwYCBpZiB0aGVyZSBpcyBub25lLCB0aGVuIGNvcHkKCQkvLyB0aGUgZmlyc3QgYmFzaWMgY29kZSBwb2ludHMgdG8gdGhlIG91dHB1dC4KCgkJYmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpOwoJCWlmIChiYXNpYyA8IDApIHsKCQkJYmFzaWMgPSAwOwoJCX0KCgkJZm9yIChqID0gMDsgaiA8IGJhc2ljOyArK2opIHsKCQkJLy8gaWYgaXQncyBub3QgYSBiYXNpYyBjb2RlIHBvaW50CgkJCWlmIChpbnB1dC5jaGFyQ29kZUF0KGopID49IDB4ODApIHsKCQkJCWVycm9yKCdub3QtYmFzaWMnKTsKCQkJfQoJCQlvdXRwdXQucHVzaChpbnB1dC5jaGFyQ29kZUF0KGopKTsKCQl9CgoJCS8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGUKCQkvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLgoKCQlmb3IgKGluZGV4ID0gYmFzaWMgPiAwID8gYmFzaWMgKyAxIDogMDsgaW5kZXggPCBpbnB1dExlbmd0aDsgLyogbm8gZmluYWwgZXhwcmVzc2lvbiAqLykgewoKCQkJLy8gYGluZGV4YCBpcyB0aGUgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGJlIGNvbnN1bWVkLgoJCQkvLyBEZWNvZGUgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlciBpbnRvIGBkZWx0YWAsCgkJCS8vIHdoaWNoIGdldHMgYWRkZWQgdG8gYGlgLiBUaGUgb3ZlcmZsb3cgY2hlY2tpbmcgaXMgZWFzaWVyCgkJCS8vIGlmIHdlIGluY3JlYXNlIGBpYCBhcyB3ZSBnbywgdGhlbiBzdWJ0cmFjdCBvZmYgaXRzIHN0YXJ0aW5nCgkJCS8vIHZhbHVlIGF0IHRoZSBlbmQgdG8gb2J0YWluIGBkZWx0YWAuCgkJCWZvciAob2xkaSA9IGksIHcgPSAxLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHsKCgkJCQlpZiAoaW5kZXggPj0gaW5wdXRMZW5ndGgpIHsKCQkJCQllcnJvcignaW52YWxpZC1pbnB1dCcpOwoJCQkJfQoKCQkJCWRpZ2l0ID0gYmFzaWNUb0RpZ2l0KGlucHV0LmNoYXJDb2RlQXQoaW5kZXgrKykpOwoKCQkJCWlmIChkaWdpdCA+PSBiYXNlIHx8IGRpZ2l0ID4gZmxvb3IoKG1heEludCAtIGkpIC8gdykpIHsKCQkJCQllcnJvcignb3ZlcmZsb3cnKTsKCQkJCX0KCgkJCQlpICs9IGRpZ2l0ICogdzsKCQkJCXQgPSBrIDw9IGJpYXMgPyB0TWluIDogKGsgPj0gYmlhcyArIHRNYXggPyB0TWF4IDogayAtIGJpYXMpOwoKCQkJCWlmIChkaWdpdCA8IHQpIHsKCQkJCQlicmVhazsKCQkJCX0KCgkJCQliYXNlTWludXNUID0gYmFzZSAtIHQ7CgkJCQlpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7CgkJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCQl9CgoJCQkJdyAqPSBiYXNlTWludXNUOwoKCQkJfQoKCQkJb3V0ID0gb3V0cHV0Lmxlbmd0aCArIDE7CgkJCWJpYXMgPSBhZGFwdChpIC0gb2xkaSwgb3V0LCBvbGRpID09IDApOwoKCQkJLy8gYGlgIHdhcyBzdXBwb3NlZCB0byB3cmFwIGFyb3VuZCBmcm9tIGBvdXRgIHRvIGAwYCwKCQkJLy8gaW5jcmVtZW50aW5nIGBuYCBlYWNoIHRpbWUsIHNvIHdlJ2xsIGZpeCB0aGF0IG5vdzoKCQkJaWYgKGZsb29yKGkgLyBvdXQpID4gbWF4SW50IC0gbikgewoJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCX0KCgkJCW4gKz0gZmxvb3IoaSAvIG91dCk7CgkJCWkgJT0gb3V0OwoKCQkJLy8gSW5zZXJ0IGBuYCBhdCBwb3NpdGlvbiBgaWAgb2YgdGhlIG91dHB1dAoJCQlvdXRwdXQuc3BsaWNlKGkrKywgMCwgbik7CgoJCX0KCgkJcmV0dXJuIHVjczJlbmNvZGUob3V0cHV0KTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scyAoZS5nLiBhIGRvbWFpbiBuYW1lIGxhYmVsKSB0byBhCgkgKiBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLgoJICogQG1lbWJlck9mIHB1bnljb2RlCgkgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuCgkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuCgkgKi8KCWZ1bmN0aW9uIGVuY29kZShpbnB1dCkgewoJCXZhciBuLAoJCSAgICBkZWx0YSwKCQkgICAgaGFuZGxlZENQQ291bnQsCgkJICAgIGJhc2ljTGVuZ3RoLAoJCSAgICBiaWFzLAoJCSAgICBqLAoJCSAgICBtLAoJCSAgICBxLAoJCSAgICBrLAoJCSAgICB0LAoJCSAgICBjdXJyZW50VmFsdWUsCgkJICAgIG91dHB1dCA9IFtdLAoJCSAgICAvKiogYGlucHV0TGVuZ3RoYCB3aWxsIGhvbGQgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyBpbiBgaW5wdXRgLiAqLwoJCSAgICBpbnB1dExlbmd0aCwKCQkgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovCgkJICAgIGhhbmRsZWRDUENvdW50UGx1c09uZSwKCQkgICAgYmFzZU1pbnVzVCwKCQkgICAgcU1pbnVzVDsKCgkJLy8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZQoJCWlucHV0ID0gdWNzMmRlY29kZShpbnB1dCk7CgoJCS8vIENhY2hlIHRoZSBsZW5ndGgKCQlpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDsKCgkJLy8gSW5pdGlhbGl6ZSB0aGUgc3RhdGUKCQluID0gaW5pdGlhbE47CgkJZGVsdGEgPSAwOwoJCWJpYXMgPSBpbml0aWFsQmlhczsKCgkJLy8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50cwoJCWZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7CgkJCWN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdOwoJCQlpZiAoY3VycmVudFZhbHVlIDwgMHg4MCkgewoJCQkJb3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGN1cnJlbnRWYWx1ZSkpOwoJCQl9CgkJfQoKCQloYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDsKCgkJLy8gYGhhbmRsZWRDUENvdW50YCBpcyB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIGhhbmRsZWQ7CgkJLy8gYGJhc2ljTGVuZ3RoYCBpcyB0aGUgbnVtYmVyIG9mIGJhc2ljIGNvZGUgcG9pbnRzLgoKCQkvLyBGaW5pc2ggdGhlIGJhc2ljIHN0cmluZyAtIGlmIGl0IGlzIG5vdCBlbXB0eSAtIHdpdGggYSBkZWxpbWl0ZXIKCQlpZiAoYmFzaWNMZW5ndGgpIHsKCQkJb3V0cHV0LnB1c2goZGVsaW1pdGVyKTsKCQl9CgoJCS8vIE1haW4gZW5jb2RpbmcgbG9vcDoKCQl3aGlsZSAoaGFuZGxlZENQQ291bnQgPCBpbnB1dExlbmd0aCkgewoKCQkJLy8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dAoJCQkvLyBsYXJnZXIgb25lOgoJCQlmb3IgKG0gPSBtYXhJbnQsIGogPSAwOyBqIDwgaW5wdXRMZW5ndGg7ICsraikgewoJCQkJY3VycmVudFZhbHVlID0gaW5wdXRbal07CgkJCQlpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkgewoJCQkJCW0gPSBjdXJyZW50VmFsdWU7CgkJCQl9CgkJCX0KCgkJCS8vIEluY3JlYXNlIGBkZWx0YWAgZW5vdWdoIHRvIGFkdmFuY2UgdGhlIGRlY29kZXIncyA8bixpPiBzdGF0ZSB0byA8bSwwPiwKCQkJLy8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3cKCQkJaGFuZGxlZENQQ291bnRQbHVzT25lID0gaGFuZGxlZENQQ291bnQgKyAxOwoJCQlpZiAobSAtIG4gPiBmbG9vcigobWF4SW50IC0gZGVsdGEpIC8gaGFuZGxlZENQQ291bnRQbHVzT25lKSkgewoJCQkJZXJyb3IoJ292ZXJmbG93Jyk7CgkJCX0KCgkJCWRlbHRhICs9IChtIC0gbikgKiBoYW5kbGVkQ1BDb3VudFBsdXNPbmU7CgkJCW4gPSBtOwoKCQkJZm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHsKCQkJCWN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdOwoKCQkJCWlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHsKCQkJCQllcnJvcignb3ZlcmZsb3cnKTsKCQkJCX0KCgkJCQlpZiAoY3VycmVudFZhbHVlID09IG4pIHsKCQkJCQkvLyBSZXByZXNlbnQgZGVsdGEgYXMgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlcgoJCQkJCWZvciAocSA9IGRlbHRhLCBrID0gYmFzZTsgLyogbm8gY29uZGl0aW9uICovOyBrICs9IGJhc2UpIHsKCQkJCQkJdCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7CgkJCQkJCWlmIChxIDwgdCkgewoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQkJcU1pbnVzVCA9IHEgLSB0OwoJCQkJCQliYXNlTWludXNUID0gYmFzZSAtIHQ7CgkJCQkJCW91dHB1dC5wdXNoKAoJCQkJCQkJc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKQoJCQkJCQkpOwoJCQkJCQlxID0gZmxvb3IocU1pbnVzVCAvIGJhc2VNaW51c1QpOwoJCQkJCX0KCgkJCQkJb3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyhxLCAwKSkpOwoJCQkJCWJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7CgkJCQkJZGVsdGEgPSAwOwoJCQkJCSsraGFuZGxlZENQQ291bnQ7CgkJCQl9CgkJCX0KCgkJCSsrZGVsdGE7CgkJCSsrbjsKCgkJfQoJCXJldHVybiBvdXRwdXQuam9pbignJyk7Cgl9CgoJLyoqCgkgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyByZXByZXNlbnRpbmcgYSBkb21haW4gbmFtZSBvciBhbiBlbWFpbCBhZGRyZXNzCgkgKiB0byBVbmljb2RlLiBPbmx5IHRoZSBQdW55Y29kZWQgcGFydHMgb2YgdGhlIGlucHV0IHdpbGwgYmUgY29udmVydGVkLCBpLmUuCgkgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW4KCSAqIGNvbnZlcnRlZCB0byBVbmljb2RlLgoJICogQG1lbWJlck9mIHB1bnljb2RlCgkgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvCgkgKiBjb252ZXJ0IHRvIFVuaWNvZGUuCgkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgVW5pY29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gUHVueWNvZGUKCSAqIHN0cmluZy4KCSAqLwoJZnVuY3Rpb24gdG9Vbmljb2RlKGlucHV0KSB7CgkJcmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7CgkJCXJldHVybiByZWdleFB1bnljb2RlLnRlc3Qoc3RyaW5nKQoJCQkJPyBkZWNvZGUoc3RyaW5nLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpCgkJCQk6IHN0cmluZzsKCQl9KTsKCX0KCgkvKioKCSAqIENvbnZlcnRzIGEgVW5pY29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzcyB0bwoJICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsCgkgKiBpLmUuIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCdzIGFscmVhZHkgaW4KCSAqIEFTQ0lJLgoJICogQG1lbWJlck9mIHB1bnljb2RlCgkgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG8gY29udmVydCwgYXMgYQoJICogVW5pY29kZSBzdHJpbmcuCgkgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yCgkgKiBlbWFpbCBhZGRyZXNzLgoJICovCglmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7CgkJcmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7CgkJCXJldHVybiByZWdleE5vbkFTQ0lJLnRlc3Qoc3RyaW5nKQoJCQkJPyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKQoJCQkJOiBzdHJpbmc7CgkJfSk7Cgl9CgoJLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgoJLyoqIERlZmluZSB0aGUgcHVibGljIEFQSSAqLwoJcHVueWNvZGUgPSB7CgkJLyoqCgkJICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IFB1bnljb2RlLmpzIHZlcnNpb24gbnVtYmVyLgoJCSAqIEBtZW1iZXJPZiBwdW55Y29kZQoJCSAqIEB0eXBlIFN0cmluZwoJCSAqLwoJCSd2ZXJzaW9uJzogJzEuNC4xJywKCQkvKioKCQkgKiBBbiBvYmplY3Qgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGZyb20gSmF2YVNjcmlwdCdzIGludGVybmFsIGNoYXJhY3RlcgoJCSAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suCgkJICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+CgkJICogQG1lbWJlck9mIHB1bnljb2RlCgkJICogQHR5cGUgT2JqZWN0CgkJICovCgkJJ3VjczInOiB7CgkJCSdkZWNvZGUnOiB1Y3MyZGVjb2RlLAoJCQknZW5jb2RlJzogdWNzMmVuY29kZQoJCX0sCgkJJ2RlY29kZSc6IGRlY29kZSwKCQknZW5jb2RlJzogZW5jb2RlLAoJCSd0b0FTQ0lJJzogdG9BU0NJSSwKCQkndG9Vbmljb2RlJzogdG9Vbmljb2RlCgl9OwoKCS8qKiBFeHBvc2UgYHB1bnljb2RlYCAqLwoJLy8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zCgkvLyBsaWtlIHRoZSBmb2xsb3dpbmc6CglpZiAoCgkJdHJ1ZQoJKSB7CgkJIShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gcHVueWNvZGU7CgkJfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSksCgkJCQlfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7Cgl9IGVsc2UgaWYgKGZyZWVFeHBvcnRzICYmIGZyZWVNb2R1bGUpIHsKCQlpZiAobW9kdWxlLmV4cG9ydHMgPT0gZnJlZUV4cG9ydHMpIHsKCQkJLy8gaW4gTm9kZS5qcywgaW8uanMsIG9yIFJpbmdvSlMgdjAuOC4wKwoJCQlmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTsKCQl9IGVsc2UgewoJCQkvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLQoJCQlmb3IgKGtleSBpbiBwdW55Y29kZSkgewoJCQkJcHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pOwoJCQl9CgkJfQoJfSBlbHNlIHsKCQkvLyBpbiBSaGlubyBvciBhIHdlYiBicm93c2VyCgkJcm9vdC5wdW55Y29kZSA9IHB1bnljb2RlOwoJfQoKfSh0aGlzKSk7CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNzgpKG1vZHVsZSksIF9fd2VicGFja19yZXF1aXJlX18oMykpKQoKLyoqKi8gfSksCi8qIDEzNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7Ci8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLgovLwovLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQovLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlCi8vICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLAovLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0Ci8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZQovLyBmb2xsb3dpbmcgY29uZGl0aW9uczoKLy8KLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQKLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCi8vCi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTCi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YKLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTgovLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwKLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SCi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUKLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCgoKLy8gSWYgb2JqLmhhc093blByb3BlcnR5IGhhcyBiZWVuIG92ZXJyaWRkZW4sIHRoZW4gY2FsbGluZwovLyBvYmouaGFzT3duUHJvcGVydHkocHJvcCkgd2lsbCBicmVhay4KLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MDcKZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOwp9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHFzLCBzZXAsIGVxLCBvcHRpb25zKSB7CiAgc2VwID0gc2VwIHx8ICcmJzsKICBlcSA9IGVxIHx8ICc9JzsKICB2YXIgb2JqID0ge307CgogIGlmICh0eXBlb2YgcXMgIT09ICdzdHJpbmcnIHx8IHFzLmxlbmd0aCA9PT0gMCkgewogICAgcmV0dXJuIG9iajsKICB9CgogIHZhciByZWdleHAgPSAvXCsvZzsKICBxcyA9IHFzLnNwbGl0KHNlcCk7CgogIHZhciBtYXhLZXlzID0gMTAwMDsKICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykgewogICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5czsKICB9CgogIHZhciBsZW4gPSBxcy5sZW5ndGg7CiAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50CiAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHsKICAgIGxlbiA9IG1heEtleXM7CiAgfQoKICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7CiAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksCiAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSwKICAgICAgICBrc3RyLCB2c3RyLCBrLCB2OwoKICAgIGlmIChpZHggPj0gMCkgewogICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTsKICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpOwogICAgfSBlbHNlIHsKICAgICAga3N0ciA9IHg7CiAgICAgIHZzdHIgPSAnJzsKICAgIH0KCiAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpOwogICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTsKCiAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHsKICAgICAgb2JqW2tdID0gdjsKICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmpba10pKSB7CiAgICAgIG9ialtrXS5wdXNoKHYpOwogICAgfSBlbHNlIHsKICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07CiAgICB9CiAgfQoKICByZXR1cm4gb2JqOwp9OwoKdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4cykgewogIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nOwp9OwoKCi8qKiovIH0pLAovKiAxMzcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwovLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4KLy8KLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQovLyAiU29mdHdhcmUiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nCi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwKLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdAovLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUKLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6Ci8vCi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkCi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgovLwovLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUwovLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GCi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4KLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sCi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUgovLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFCi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCgoKCnZhciBzdHJpbmdpZnlQcmltaXRpdmUgPSBmdW5jdGlvbih2KSB7CiAgc3dpdGNoICh0eXBlb2YgdikgewogICAgY2FzZSAnc3RyaW5nJzoKICAgICAgcmV0dXJuIHY7CgogICAgY2FzZSAnYm9vbGVhbic6CiAgICAgIHJldHVybiB2ID8gJ3RydWUnIDogJ2ZhbHNlJzsKCiAgICBjYXNlICdudW1iZXInOgogICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuICcnOwogIH0KfTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7CiAgc2VwID0gc2VwIHx8ICcmJzsKICBlcSA9IGVxIHx8ICc9JzsKICBpZiAob2JqID09PSBudWxsKSB7CiAgICBvYmogPSB1bmRlZmluZWQ7CiAgfQoKICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHsKICAgIHJldHVybiBtYXAob2JqZWN0S2V5cyhvYmopLCBmdW5jdGlvbihrKSB7CiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7CiAgICAgIGlmIChpc0FycmF5KG9ialtrXSkpIHsKICAgICAgICByZXR1cm4gbWFwKG9ialtrXSwgZnVuY3Rpb24odikgewogICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7CiAgICAgICAgfSkuam9pbihzZXApOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7CiAgICAgIH0KICAgIH0pLmpvaW4oc2VwKTsKCiAgfQoKICBpZiAoIW5hbWUpIHJldHVybiAnJzsKICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShuYW1lKSkgKyBlcSArCiAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqKSk7Cn07Cgp2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7CiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7Cn07CgpmdW5jdGlvbiBtYXAgKHhzLCBmKSB7CiAgaWYgKHhzLm1hcCkgcmV0dXJuIHhzLm1hcChmKTsKICB2YXIgcmVzID0gW107CiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykgewogICAgcmVzLnB1c2goZih4c1tpXSwgaSkpOwogIH0KICByZXR1cm4gcmVzOwp9Cgp2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHsKICB2YXIgcmVzID0gW107CiAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHJlcy5wdXNoKGtleSk7CiAgfQogIHJldHVybiByZXM7Cn07CgoKLyoqKi8gfSksCi8qIDEzOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNikKCgovKioqLyB9KSwKLyogMTM5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgp2YXIgQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKS5CdWZmZXI7Ci8qPHJlcGxhY2VtZW50PiovCnZhciBidWZmZXJTaGltID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKLyo8L3JlcGxhY2VtZW50PiovCgptb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlckxpc3Q7CgpmdW5jdGlvbiBCdWZmZXJMaXN0KCkgewogIHRoaXMuaGVhZCA9IG51bGw7CiAgdGhpcy50YWlsID0gbnVsbDsKICB0aGlzLmxlbmd0aCA9IDA7Cn0KCkJ1ZmZlckxpc3QucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAodikgewogIHZhciBlbnRyeSA9IHsgZGF0YTogdiwgbmV4dDogbnVsbCB9OwogIGlmICh0aGlzLmxlbmd0aCA+IDApIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7ZWxzZSB0aGlzLmhlYWQgPSBlbnRyeTsKICB0aGlzLnRhaWwgPSBlbnRyeTsKICArK3RoaXMubGVuZ3RoOwp9OwoKQnVmZmVyTGlzdC5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uICh2KSB7CiAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiB0aGlzLmhlYWQgfTsKICBpZiAodGhpcy5sZW5ndGggPT09IDApIHRoaXMudGFpbCA9IGVudHJ5OwogIHRoaXMuaGVhZCA9IGVudHJ5OwogICsrdGhpcy5sZW5ndGg7Cn07CgpCdWZmZXJMaXN0LnByb3RvdHlwZS5zaGlmdCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjsKICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7CiAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7CiAgLS10aGlzLmxlbmd0aDsKICByZXR1cm4gcmV0Owp9OwoKQnVmZmVyTGlzdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7CiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDsKICB0aGlzLmxlbmd0aCA9IDA7Cn07CgpCdWZmZXJMaXN0LnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gKHMpIHsKICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAnJzsKICB2YXIgcCA9IHRoaXMuaGVhZDsKICB2YXIgcmV0ID0gJycgKyBwLmRhdGE7CiAgd2hpbGUgKHAgPSBwLm5leHQpIHsKICAgIHJldCArPSBzICsgcC5kYXRhOwogIH1yZXR1cm4gcmV0Owp9OwoKQnVmZmVyTGlzdC5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKG4pIHsKICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiBidWZmZXJTaGltLmFsbG9jKDApOwogIGlmICh0aGlzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMuaGVhZC5kYXRhOwogIHZhciByZXQgPSBidWZmZXJTaGltLmFsbG9jVW5zYWZlKG4gPj4+IDApOwogIHZhciBwID0gdGhpcy5oZWFkOwogIHZhciBpID0gMDsKICB3aGlsZSAocCkgewogICAgcC5kYXRhLmNvcHkocmV0LCBpKTsKICAgIGkgKz0gcC5kYXRhLmxlbmd0aDsKICAgIHAgPSBwLm5leHQ7CiAgfQogIHJldHVybiByZXQ7Cn07CgovKioqLyB9KSwKLyogMTQwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSkKCgovKioqLyB9KSwKLyogMTQxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKCgovKioqLyB9KSwKLyogMTQyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKCgovKioqLyB9KSwKLyogMTQzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm8KICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307CiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7CiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50OwogICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlOwoKICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykgewogICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcKICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gImZ1bmN0aW9uIikgewogICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKCIiICsgY2FsbGJhY2spOwogICAgICB9CiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzCiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTsKICAgICAgfQogICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2sKICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9OwogICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzazsKICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7CiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7CiAgICB9CgogICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7CiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTsKICAgIH0KCiAgICBmdW5jdGlvbiBydW4odGFzaykgewogICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7CiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7CiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHsKICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiAiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuIgogICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uCiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykgewogICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYQogICAgICAgICAgICAvLyAidG9vIG11Y2ggcmVjdXJzaW9uIiBlcnJvci4KICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07CiAgICAgICAgICAgIGlmICh0YXNrKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7CiAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7CiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHsKICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTsKICAgICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkgewogICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlciwKICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS4KICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykgewogICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7CiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlOwogICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZSgiIiwgIioiKTsKICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTsKICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkgewogICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZQogICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZQogICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXMKCiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSAic2V0SW1tZWRpYXRlJCIgKyBNYXRoLnJhbmRvbSgpICsgIiQiOwogICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiYKICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSAic3RyaW5nIiAmJgogICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7CiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudCgib25tZXNzYWdlIiwgb25HbG9iYWxNZXNzYWdlKTsKICAgICAgICB9CgogICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7CiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCAiKiIpOwogICAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7CiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTsKICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhOwogICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTsKICAgICAgICB9OwoKICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkgewogICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7CiAgICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkgewogICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDsKICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkgewogICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWQKICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC4KICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpOwogICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7CiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsOwogICAgICAgICAgICB9OwogICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7CiAgICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkgewogICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpOwogICAgICAgIH07CiAgICB9CgogICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuCiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7CiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDsKCiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuCiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICJbb2JqZWN0IHByb2Nlc3NdIikgewogICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjkKICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpOwoKICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkgewogICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnMKICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpOwoKICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7CiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWQKICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpOwoKICAgIH0gZWxzZSBpZiAoZG9jICYmICJvbnJlYWR5c3RhdGVjaGFuZ2UiIGluIGRvYy5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSkgewogICAgICAgIC8vIEZvciBJRSA24oCTOAogICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTsKCiAgICB9IGVsc2UgewogICAgICAgIC8vIEZvciBvbGRlciBicm93c2VycwogICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTsKICAgIH0KCiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7CiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlOwp9KHR5cGVvZiBzZWxmID09PSAidW5kZWZpbmVkIiA/IHR5cGVvZiBnbG9iYWwgPT09ICJ1bmRlZmluZWQiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpKSkKCi8qKiovIH0pLAovKiAxNDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gY2xpZW50OwoKLy8gZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS1zdGF0ZWZ1bC1jbGllbnQKZnVuY3Rpb24gY2xpZW50KHRva2VuKSB7CiAgdmFyIGFwcGxpZWQgPSB7CiAgICBhdXRoOiB7CiAgICAgIHRlc3Q6IHt9CiAgICB9LAogICAgYm90czogewogICAgICBpbmZvOiB7fQogICAgfSwKICAgIGNoYW5uZWxzOiB7CiAgICAgIGFyY2hpdmU6IHt9LAogICAgICBjcmVhdGU6IHt9LAogICAgICBoaXN0b3J5OiB7fSwKICAgICAgaW5mbzoge30sCiAgICAgIGludml0ZToge30sCiAgICAgIGpvaW46IHt9LAogICAgICBraWNrOiB7fSwKICAgICAgbGVhdmU6IHt9LAogICAgICBsaXN0OiB7fSwKICAgICAgbWFyazoge30sCiAgICAgIHJlbmFtZToge30sCiAgICAgIHJlcGxpZXM6IHt9LAogICAgICBzZXRQdXJwb3NlOiB7fSwKICAgICAgc2V0VG9waWM6IHt9LAogICAgICB1bmFyY2hpdmU6IHt9CiAgICB9LAogICAgY2hhdDogewogICAgICBkZWxldGU6IHt9LAogICAgICBtZU1lc3NhZ2U6IHt9LAogICAgICBwb3N0TWVzc2FnZToge30sCiAgICAgIHVuZnVybDoge30sCiAgICAgIHVwZGF0ZToge30KICAgIH0sCiAgICBkbmQ6IHsKICAgICAgZW5kRG5kOiB7fSwKICAgICAgZW5kU25vb3plOiB7fSwKICAgICAgaW5mbzoge30sCiAgICAgIHNldFNub296ZToge30sCiAgICAgIHRlYW1JbmZvOiB7fQogICAgfSwKICAgIGVtb2ppOiB7CiAgICAgIGxpc3Q6IHt9CiAgICB9LAogICAgZmlsZXM6IHsKICAgICAgY29tbWVudHM6IHsKICAgICAgICBhZGQ6IHt9LAogICAgICAgIGRlbGV0ZToge30sCiAgICAgICAgZWRpdDoge30KICAgICAgfSwKICAgICAgZGVsZXRlOiB7fSwKICAgICAgaW5mbzoge30sCiAgICAgIGxpc3Q6IHt9LAogICAgICByZXZva2VQdWJsaWNVUkw6IHt9LAogICAgICBzaGFyZWRQdWJsaWNVUkw6IHt9LAogICAgICB1cGxvYWQ6IHt9CiAgICB9LAogICAgZ3JvdXBzOiB7CiAgICAgIGFyY2hpdmU6IHt9LAogICAgICBjbG9zZToge30sCiAgICAgIGNyZWF0ZToge30sCiAgICAgIGNyZWF0ZUNoaWxkOiB7fSwKICAgICAgaGlzdG9yeToge30sCiAgICAgIGluZm86IHt9LAogICAgICBpbnZpdGU6IHt9LAogICAgICBraWNrOiB7fSwKICAgICAgbGVhdmU6IHt9LAogICAgICBsaXN0OiB7fSwKICAgICAgbWFyazoge30sCiAgICAgIG9wZW46IHt9LAogICAgICByZW5hbWU6IHt9LAogICAgICByZXBsaWVzOiB7fSwKICAgICAgc2V0UHVycG9zZToge30sCiAgICAgIHNldFRvcGljOiB7fSwKICAgICAgdW5hcmNoaXZlOiB7fQogICAgfSwKICAgIGltOiB7CiAgICAgIGNsb3NlOiB7fSwKICAgICAgaGlzdG9yeToge30sCiAgICAgIGxpc3Q6IHt9LAogICAgICBtYXJrOiB7fSwKICAgICAgb3Blbjoge30sCiAgICAgIHJlcGxpZXM6IHt9CiAgICB9LAogICAgbXBpbTogewogICAgICBjbG9zZToge30sCiAgICAgIGhpc3Rvcnk6IHt9LAogICAgICBsaXN0OiB7fSwKICAgICAgbWFyazoge30sCiAgICAgIG9wZW46IHt9LAogICAgICByZXBsaWVzOiB7fQogICAgfSwKICAgIHBpbnM6IHsKICAgICAgYWRkOiB7fSwKICAgICAgbGlzdDoge30sCiAgICAgIHJlbW92ZToge30KICAgIH0sCiAgICByZWFjdGlvbnM6IHsKICAgICAgYWRkOiB7fSwKICAgICAgZ2V0OiB7fSwKICAgICAgbGlzdDoge30sCiAgICAgIHJlbW92ZToge30KICAgIH0sCiAgICByZW1pbmRlcnM6IHsKICAgICAgYWRkOiB7fSwKICAgICAgY29tcGxldGU6IHt9LAogICAgICBkZWxldGU6IHt9LAogICAgICBpbmZvOiB7fSwKICAgICAgbGlzdDoge30KICAgIH0sCiAgICBydG06IHsKICAgICAgc3RhcnQ6IHt9CiAgICB9LAogICAgc2VhcmNoOiB7CiAgICAgIGFsbDoge30sCiAgICAgIGZpbGVzOiB7fSwKICAgICAgbWVzc2FnZXM6IHt9CiAgICB9LAogICAgc3RhcnM6IHsKICAgICAgYWRkOiB7fSwKICAgICAgbGlzdDoge30sCiAgICAgIHJlbW92ZToge30KICAgIH0sCiAgICB0ZWFtOiB7CiAgICAgIGFjY2Vzc0xvZ3M6IHt9LAogICAgICBiaWxsYWJsZUluZm86IHt9LAogICAgICBpbmZvOiB7fSwKICAgICAgaW50ZWdyYXRpb25Mb2dzOiB7fSwKICAgICAgcHJvZmlsZTogewogICAgICAgIGdldDoge30KICAgICAgfQogICAgfSwKICAgIHVzZXJncm91cHM6IHsKICAgICAgY3JlYXRlOiB7fSwKICAgICAgZGlzYWJsZToge30sCiAgICAgIGVuYWJsZToge30sCiAgICAgIGxpc3Q6IHt9LAogICAgICB1cGRhdGU6IHt9LAogICAgICB1c2VyczogewogICAgICAgIGxpc3Q6IHt9LAogICAgICAgIHVwZGF0ZToge30KICAgICAgfQogICAgfSwKICAgIHVzZXJzOiB7CiAgICAgIGRlbGV0ZVBob3RvOiB7fSwKICAgICAgZ2V0UHJlc2VuY2U6IHt9LAogICAgICBpZGVudGl0eToge30sCiAgICAgIGluZm86IHt9LAogICAgICBsaXN0OiB7fSwKICAgICAgcHJvZmlsZTogewogICAgICAgIGdldDoge30sCiAgICAgICAgc2V0OiB7fQogICAgICB9LAogICAgICBzZXRBY3RpdmU6IHt9LAogICAgICBzZXRQaG90bzoge30sCiAgICAgIHNldFByZXNlbmNlOiB7fQogICAgfQogIH07CgogIGFwcGxpZWQuYXV0aC50ZXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygyMykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmJvdHMuaW5mbyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMjQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGFubmVscy5hcmNoaXZlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmNoYW5uZWxzLmNyZWF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMjYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGFubmVscy5oaXN0b3J5ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygyNykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmNoYW5uZWxzLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuY2hhbm5lbHMuaW52aXRlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygyOSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmNoYW5uZWxzLmpvaW4gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuY2hhbm5lbHMua2ljayA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMzEpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGFubmVscy5sZWF2ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMzIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGFubmVscy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygzMykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmNoYW5uZWxzLm1hcmsgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuY2hhbm5lbHMucmVuYW1lID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygzNSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmNoYW5uZWxzLnJlcGxpZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuY2hhbm5lbHMuc2V0UHVycG9zZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMzcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGFubmVscy5zZXRUb3BpYyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMzgpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGFubmVscy51bmFyY2hpdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuY2hhdC5kZWxldGUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuY2hhdC5tZU1lc3NhZ2UgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuY2hhdC5wb3N0TWVzc2FnZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNDIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGF0LnVuZnVybCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNDMpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5jaGF0LnVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNDQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5kbmQuZW5kRG5kID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmRuZC5lbmRTbm9vemUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZG5kLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZG5kLnNldFNub296ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNDgpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5kbmQudGVhbUluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZW1vamkubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNTApLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5maWxlcy5jb21tZW50cy5hZGQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZmlsZXMuY29tbWVudHMuZGVsZXRlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1MikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmZpbGVzLmNvbW1lbnRzLmVkaXQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZmlsZXMuZGVsZXRlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1NCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmZpbGVzLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZmlsZXMubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNTYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5maWxlcy5yZXZva2VQdWJsaWNVUkwgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZmlsZXMuc2hhcmVkUHVibGljVVJMID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmZpbGVzLnVwbG9hZCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNTkpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5ncm91cHMuYXJjaGl2ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNjApLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5ncm91cHMuY2xvc2UgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLmNyZWF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNjIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5ncm91cHMuY3JlYXRlQ2hpbGQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLmhpc3RvcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLmludml0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNjYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5ncm91cHMua2ljayA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNjcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5ncm91cHMubGVhdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLmxpc3QgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLm1hcmsgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLm9wZW4gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLnJlbmFtZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNzIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5ncm91cHMucmVwbGllcyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTUyKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLnNldFB1cnBvc2UgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuZ3JvdXBzLnNldFRvcGljID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg3NCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmdyb3Vwcy51bmFyY2hpdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuaW0uY2xvc2UgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuaW0uaGlzdG9yeSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oNzcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5pbS5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg3OCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLmltLm1hcmsgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuaW0ub3BlbiA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oODApLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5pbS5yZXBsaWVzID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNTQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5tcGltLmNsb3NlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4MSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLm1waW0uaGlzdG9yeSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oODIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5tcGltLmxpc3QgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQubXBpbS5tYXJrID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4NCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLm1waW0ub3BlbiA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oODUpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5tcGltLnJlcGxpZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnBpbnMuYWRkID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4NikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnBpbnMubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oODcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5waW5zLnJlbW92ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oODgpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5yZWFjdGlvbnMuYWRkID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg4OSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnJlYWN0aW9ucy5nZXQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQucmVhY3Rpb25zLmxpc3QgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQucmVhY3Rpb25zLnJlbW92ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oOTIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5yZW1pbmRlcnMuYWRkID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5MykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnJlbWluZGVycy5jb21wbGV0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oOTQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5yZW1pbmRlcnMuZGVsZXRlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5NSkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnJlbWluZGVycy5pbmZvID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5NikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnJlbWluZGVycy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5NykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnJ0bS5zdGFydCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTUpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5zZWFyY2guYWxsID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXyg5OCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnNlYXJjaC5maWxlcyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oOTkpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC5zZWFyY2gubWVzc2FnZXMgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnN0YXJzLmFkZCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTAxKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuc3RhcnMubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTAyKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQuc3RhcnMucmVtb3ZlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDMpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC50ZWFtLmFjY2Vzc0xvZ3MgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnRlYW0uYmlsbGFibGVJbmZvID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC50ZWFtLmluZm8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnRlYW0uaW50ZWdyYXRpb25Mb2dzID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC50ZWFtLnByb2ZpbGUuZ2V0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC51c2VyZ3JvdXBzLmNyZWF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTA5KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQudXNlcmdyb3Vwcy5kaXNhYmxlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTApLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC51c2VyZ3JvdXBzLmVuYWJsZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTExKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQudXNlcmdyb3Vwcy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTIpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC51c2VyZ3JvdXBzLnVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTEzKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQudXNlcmdyb3Vwcy51c2Vycy5saXN0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTQpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC51c2VyZ3JvdXBzLnVzZXJzLnVwZGF0ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE1KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQudXNlcnMuZGVsZXRlUGhvdG8gPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NykuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnVzZXJzLmdldFByZXNlbmNlID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMTYpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC51c2Vycy5pZGVudGl0eSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE3KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQudXNlcnMuaW5mbyA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE4KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQudXNlcnMubGlzdCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTE5KS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwogIGFwcGxpZWQudXNlcnMucHJvZmlsZS5nZXQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCkuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnVzZXJzLnByb2ZpbGUuc2V0ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC51c2Vycy5zZXRBY3RpdmUgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykgewogICAgcGFyYW1zLnRva2VuID0gdG9rZW47CiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMikuY2FsbCh7fSwgcGFyYW1zLCBjYWxsYmFjayk7CiAgfTsKICBhcHBsaWVkLnVzZXJzLnNldFBob3RvID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHsKICAgIHBhcmFtcy50b2tlbiA9IHRva2VuOwogICAgX193ZWJwYWNrX3JlcXVpcmVfXygxNjkpLmNhbGwoe30sIHBhcmFtcywgY2FsbGJhY2spOwogIH07CiAgYXBwbGllZC51c2Vycy5zZXRQcmVzZW5jZSA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7CiAgICBwYXJhbXMudG9rZW4gPSB0b2tlbjsKICAgIF9fd2VicGFja19yZXF1aXJlX18oMTIzKS5jYWxsKHt9LCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9OwoKICByZXR1cm4gYXBwbGllZDsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gYXBpdGVzdDsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGFwaXRlc3QocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdhcGkudGVzdCc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfYm90cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwoKdmFyIF9ib3RzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JvdHMpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IHsKICBpbmZvOiBfYm90czIuZGVmYXVsdAp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY2hhbm5lbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTsKCnZhciBfY2hhbm5lbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMpOwoKdmFyIF9jaGFubmVsczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTsKCnZhciBfY2hhbm5lbHM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMzKTsKCnZhciBfY2hhbm5lbHM1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7Cgp2YXIgX2NoYW5uZWxzNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzNSk7Cgp2YXIgX2NoYW5uZWxzNyA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpOwoKdmFyIF9jaGFubmVsczggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGFubmVsczcpOwoKdmFyIF9jaGFubmVsczkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTsKCnZhciBfY2hhbm5lbHMxMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzOSk7Cgp2YXIgX2NoYW5uZWxzMTEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTsKCnZhciBfY2hhbm5lbHMxMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzMTEpOwoKdmFyIF9jaGFubmVsczEzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7Cgp2YXIgX2NoYW5uZWxzMTQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGFubmVsczEzKTsKCnZhciBfY2hhbm5lbHMxNSA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpOwoKdmFyIF9jaGFubmVsczE2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMxNSk7Cgp2YXIgX2NoYW5uZWxzMTcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTsKCnZhciBfY2hhbm5lbHMxOCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzMTcpOwoKdmFyIF9jaGFubmVsczE5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7Cgp2YXIgX2NoYW5uZWxzMjAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGFubmVsczE5KTsKCnZhciBfY2hhbm5lbHMyMSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpOwoKdmFyIF9jaGFubmVsczIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMyMSk7Cgp2YXIgX2NoYW5uZWxzMjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTsKCnZhciBfY2hhbm5lbHMyNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzMjMpOwoKdmFyIF9jaGFubmVsczI1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7Cgp2YXIgX2NoYW5uZWxzMjYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGFubmVsczI1KTsKCnZhciBfY2hhbm5lbHMyNyA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpOwoKdmFyIF9jaGFubmVsczI4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhbm5lbHMyNyk7Cgp2YXIgX2NoYW5uZWxzMjkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTsKCnZhciBfY2hhbm5lbHMzMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYW5uZWxzMjkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IHsKICBhcmNoaXZlOiBfY2hhbm5lbHMyLmRlZmF1bHQsCiAgY3JlYXRlOiBfY2hhbm5lbHM0LmRlZmF1bHQsCiAgaGlzdG9yeTogX2NoYW5uZWxzNi5kZWZhdWx0LAogIGluZm86IF9jaGFubmVsczguZGVmYXVsdCwKICBpbnZpdGU6IF9jaGFubmVsczEwLmRlZmF1bHQsCiAgam9pbjogX2NoYW5uZWxzMTIuZGVmYXVsdCwKICBraWNrOiBfY2hhbm5lbHMxNC5kZWZhdWx0LAogIGxlYXZlOiBfY2hhbm5lbHMxNi5kZWZhdWx0LAogIGxpc3Q6IF9jaGFubmVsczE4LmRlZmF1bHQsCiAgbWFyazogX2NoYW5uZWxzMjAuZGVmYXVsdCwKICByZW5hbWU6IF9jaGFubmVsczIyLmRlZmF1bHQsCiAgcmVwbGllczogX2NoYW5uZWxzMjQuZGVmYXVsdCwKICBzZXRQdXJwb3NlOiBfY2hhbm5lbHMyNi5kZWZhdWx0LAogIHNldFRvcGljOiBfY2hhbm5lbHMyOC5kZWZhdWx0LAogIHVuYXJjaGl2ZTogX2NoYW5uZWxzMzAuZGVmYXVsdAp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNDggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY2hhdCA9IF9fd2VicGFja19yZXF1aXJlX18oNDApOwoKdmFyIF9jaGF0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYXQpOwoKdmFyIF9jaGF0MyA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpOwoKdmFyIF9jaGF0NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NoYXQzKTsKCnZhciBfY2hhdDUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTsKCnZhciBfY2hhdDYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGF0NSk7Cgp2YXIgX2NoYXQ3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Myk7Cgp2YXIgX2NoYXQ4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2hhdDcpOwoKdmFyIF9jaGF0OSA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpOwoKdmFyIF9jaGF0MTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jaGF0OSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gewogIGRlbGV0ZTogX2NoYXQyLmRlZmF1bHQsCiAgbWVNZXNzYWdlOiBfY2hhdDQuZGVmYXVsdCwKICBwb3N0TWVzc2FnZTogX2NoYXQ2LmRlZmF1bHQsCiAgdW5mdXJsOiBfY2hhdDguZGVmYXVsdCwKICB1cGRhdGU6IF9jaGF0MTAuZGVmYXVsdAp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfZG5kID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Nyk7Cgp2YXIgX2RuZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kbmQpOwoKdmFyIF9kbmQzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7Cgp2YXIgX2RuZDQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kbmQzKTsKCnZhciBfZG5kNSA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpOwoKdmFyIF9kbmQ2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZG5kNSk7Cgp2YXIgX2RuZDcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTsKCnZhciBfZG5kOCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RuZDcpOwoKdmFyIF9kbmQ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7Cgp2YXIgX2RuZDEwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZG5kOSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gewogIGluZm86IF9kbmQyLmRlZmF1bHQsIGVuZERuZDogX2RuZDQuZGVmYXVsdCwgZW5kU25vb3plOiBfZG5kNi5kZWZhdWx0LCBzZXRTbm9vemU6IF9kbmQ4LmRlZmF1bHQsIHRlYW1JbmZvOiBfZG5kMTAuZGVmYXVsdAp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfZmlsZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKCnZhciBfZmlsZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXMpOwoKdmFyIF9maWxlczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KTsKCnZhciBfZmlsZXM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXMzKTsKCnZhciBfZmlsZXM1ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7Cgp2YXIgX2ZpbGVzNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbGVzNSk7Cgp2YXIgX2ZpbGVzNyA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpOwoKdmFyIF9maWxlczggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlczcpOwoKdmFyIF9maWxlc0NvbW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSk7Cgp2YXIgX2ZpbGVzQ29tbWVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXNDb21tZW50cyk7Cgp2YXIgX2ZpbGVzQ29tbWVudHMzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7Cgp2YXIgX2ZpbGVzQ29tbWVudHM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmlsZXNDb21tZW50czMpOwoKdmFyIF9maWxlc0NvbW1lbnRzNSA9IF9fd2VicGFja19yZXF1aXJlX18oNTMpOwoKdmFyIF9maWxlc0NvbW1lbnRzNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbGVzQ29tbWVudHM1KTsKCnZhciBfZmlsZXM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nyk7Cgp2YXIgX2ZpbGVzMTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlczkpOwoKdmFyIF9maWxlczExID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCk7Cgp2YXIgX2ZpbGVzMTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9maWxlczExKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSB7CiAgZGVsZXRlOiBfZmlsZXMyLmRlZmF1bHQsCiAgaW5mbzogX2ZpbGVzNC5kZWZhdWx0LAogIGxpc3Q6IF9maWxlczYuZGVmYXVsdCwKICB1cGxvYWQ6IF9maWxlczguZGVmYXVsdCwKICBjb21tZW50czogewogICAgYWRkOiBfZmlsZXNDb21tZW50czIuZGVmYXVsdCwKICAgIGRlbGV0ZTogX2ZpbGVzQ29tbWVudHM0LmRlZmF1bHQsCiAgICBlZGl0OiBfZmlsZXNDb21tZW50czYuZGVmYXVsdAogIH0sCiAgcmV2b2tlUHVibGljVVJMOiBfZmlsZXMxMC5kZWZhdWx0LAogIHNoYXJlZFB1YmxpY1VSTDogX2ZpbGVzMTIuZGVmYXVsdAp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNTEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfZ3JvdXBzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7Cgp2YXIgX2dyb3VwczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ncm91cHMpOwoKdmFyIF9ncm91cHMzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSk7Cgp2YXIgX2dyb3VwczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ncm91cHMzKTsKCnZhciBfZ3JvdXBzNSA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpOwoKdmFyIF9ncm91cHM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzNSk7Cgp2YXIgX2dyb3VwczcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTsKCnZhciBfZ3JvdXBzOCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczcpOwoKdmFyIF9ncm91cHM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7Cgp2YXIgX2dyb3VwczEwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzOSk7Cgp2YXIgX2dyb3VwczExID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSk7Cgp2YXIgX2dyb3VwczEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMTEpOwoKdmFyIF9ncm91cHMxMyA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpOwoKdmFyIF9ncm91cHMxNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczEzKTsKCnZhciBfZ3JvdXBzMTUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KTsKCnZhciBfZ3JvdXBzMTYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ncm91cHMxNSk7Cgp2YXIgX2dyb3VwczE3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCk7Cgp2YXIgX2dyb3VwczE4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMTcpOwoKdmFyIF9ncm91cHMxOSA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpOwoKdmFyIF9ncm91cHMyMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczE5KTsKCnZhciBfZ3JvdXBzMjEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfZ3JvdXBzMjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ncm91cHMyMSk7Cgp2YXIgX2dyb3VwczIzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MSk7Cgp2YXIgX2dyb3VwczI0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMjMpOwoKdmFyIF9ncm91cHMyNSA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpOwoKdmFyIF9ncm91cHMyNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczI1KTsKCnZhciBfZ3JvdXBzMjcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTsKCnZhciBfZ3JvdXBzMjggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ncm91cHMyNyk7Cgp2YXIgX2dyb3VwczI5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7Cgp2YXIgX2dyb3VwczMwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ3JvdXBzMjkpOwoKdmFyIF9ncm91cHMzMSA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpOwoKdmFyIF9ncm91cHMzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dyb3VwczMxKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSB7CiAgYXJjaGl2ZTogX2dyb3VwczIuZGVmYXVsdCwKICBjbG9zZTogX2dyb3VwczQuZGVmYXVsdCwKICBjcmVhdGU6IF9ncm91cHM2LmRlZmF1bHQsCiAgY3JlYXRlQ2hpbGQ6IF9ncm91cHM4LmRlZmF1bHQsCiAgaGlzdG9yeTogX2dyb3VwczEwLmRlZmF1bHQsCiAgaW5mbzogX2dyb3VwczEyLmRlZmF1bHQsCiAgaW52aXRlOiBfZ3JvdXBzMTQuZGVmYXVsdCwKICBraWNrOiBfZ3JvdXBzMTYuZGVmYXVsdCwKICBsZWF2ZTogX2dyb3VwczE4LmRlZmF1bHQsCiAgbGlzdDogX2dyb3VwczIwLmRlZmF1bHQsCiAgbWFyazogX2dyb3VwczIyLmRlZmF1bHQsCiAgb3BlbjogX2dyb3VwczI0LmRlZmF1bHQsCiAgcmVuYW1lOiBfZ3JvdXBzMjYuZGVmYXVsdCwKICBzZXRQdXJwb3NlOiBfZ3JvdXBzMjguZGVmYXVsdCwKICBzZXRUb3BpYzogX2dyb3VwczMwLmRlZmF1bHQsCiAgdW5hcmNoaXZlOiBfZ3JvdXBzMzIuZGVmYXVsdAp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNTIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZ3JvdXBzcmVwbGllczsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGdyb3Vwc3JlcGxpZXMocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICdncm91cHMucmVwbGllcyc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfaW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTsKCnZhciBfaW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW0pOwoKdmFyIF9pbTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTsKCnZhciBfaW00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW0zKTsKCnZhciBfaW01ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7Cgp2YXIgX2ltNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltNSk7Cgp2YXIgX2ltNyA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpOwoKdmFyIF9pbTggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbTcpOwoKdmFyIF9pbTkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTsKCnZhciBfaW0xMCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltOSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gewogIGNsb3NlOiBfaW0yLmRlZmF1bHQsIGhpc3Rvcnk6IF9pbTQuZGVmYXVsdCwgbGlzdDogX2ltNi5kZWZhdWx0LCBtYXJrOiBfaW04LmRlZmF1bHQsIG9wZW46IF9pbTEwLmRlZmF1bHQKfTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTU0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGltcmVwbGllczsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIGltcmVwbGllcyhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ2ltLnJlcGxpZXMnOwogIHZhciBlcnIgPSAoMCwgX3ZhbGlkYXRlMi5kZWZhdWx0KShucywgcGFyYW1zKTsKICBpZiAoZXJyKSB7CiAgICBjYWxsYmFjayhlcnIpOwogIH0gZWxzZSB7CiAgICAoMCwgX2V4ZWMyLmRlZmF1bHQpKG5zLCBwYXJhbXMsIGNhbGxiYWNrKTsKICB9Cn0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTU1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX21waW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTsKCnZhciBfbXBpbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tcGltKTsKCnZhciBfbXBpbTMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTsKCnZhciBfbXBpbTQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tcGltMyk7Cgp2YXIgX21waW01ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7Cgp2YXIgX21waW02ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbXBpbTUpOwoKdmFyIF9tcGltNyA9IF9fd2VicGFja19yZXF1aXJlX18oODQpOwoKdmFyIF9tcGltOCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21waW03KTsKCnZhciBfbXBpbTkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KTsKCnZhciBfbXBpbTEwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbXBpbTkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmV4cG9ydHMuZGVmYXVsdCA9IHsKICBjbG9zZTogX21waW0yLmRlZmF1bHQsCiAgaGlzdG9yeTogX21waW00LmRlZmF1bHQsCiAgbGlzdDogX21waW02LmRlZmF1bHQsCiAgbWFyazogX21waW04LmRlZmF1bHQsCiAgb3BlbjogX21waW0xMC5kZWZhdWx0Cn07Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE1NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBtcGltcmVwbGllczsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIG1waW1yZXBsaWVzKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnbXBpbS5yZXBsaWVzJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE1NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSBvYXV0aGFjY2VzczsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIG9hdXRoYWNjZXNzKHBhcmFtcywgY2FsbGJhY2spIHsKICB2YXIgbnMgPSAnb2F1dGguYWNjZXNzJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE1OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9waW5zID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nik7Cgp2YXIgX3BpbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGlucyk7Cgp2YXIgX3BpbnMzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nyk7Cgp2YXIgX3BpbnM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGluczMpOwoKdmFyIF9waW5zNSA9IF9fd2VicGFja19yZXF1aXJlX18oODgpOwoKdmFyIF9waW5zNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BpbnM1KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSB7CiAgYWRkOiBfcGluczIuZGVmYXVsdCwgbGlzdDogX3BpbnM0LmRlZmF1bHQsIHJlbW92ZTogX3BpbnM2LmRlZmF1bHQKfTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTU5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3JlYWN0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oODkpOwoKdmFyIF9yZWFjdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3Rpb25zKTsKCnZhciBfcmVhY3Rpb25zMyA9IF9fd2VicGFja19yZXF1aXJlX18oOTApOwoKdmFyIF9yZWFjdGlvbnM0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3Rpb25zMyk7Cgp2YXIgX3JlYWN0aW9uczUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKTsKCnZhciBfcmVhY3Rpb25zNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0aW9uczUpOwoKdmFyIF9yZWFjdGlvbnM3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mik7Cgp2YXIgX3JlYWN0aW9uczggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdGlvbnM3KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSB7CiAgYWRkOiBfcmVhY3Rpb25zMi5kZWZhdWx0LCBnZXQ6IF9yZWFjdGlvbnM0LmRlZmF1bHQsIGxpc3Q6IF9yZWFjdGlvbnM2LmRlZmF1bHQsIHJlbW92ZTogX3JlYWN0aW9uczguZGVmYXVsdAp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNjAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfcmVtaW5kZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Myk7Cgp2YXIgX3JlbWluZGVyczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW1pbmRlcnMpOwoKdmFyIF9yZW1pbmRlcnMzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7Cgp2YXIgX3JlbWluZGVyczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZW1pbmRlcnMzKTsKCnZhciBfcmVtaW5kZXJzNSA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpOwoKdmFyIF9yZW1pbmRlcnM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtaW5kZXJzNSk7Cgp2YXIgX3JlbWluZGVyczcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KTsKCnZhciBfcmVtaW5kZXJzOCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlbWluZGVyczcpOwoKdmFyIF9yZW1pbmRlcnM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Nyk7Cgp2YXIgX3JlbWluZGVyczEwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVtaW5kZXJzOSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gewogIGFkZDogX3JlbWluZGVyczIuZGVmYXVsdCwgY29tcGxldGU6IF9yZW1pbmRlcnM0LmRlZmF1bHQsIGRlbGV0ZTogX3JlbWluZGVyczYuZGVmYXVsdCwgaW5mbzogX3JlbWluZGVyczguZGVmYXVsdCwgbGlzdDogX3JlbWluZGVyczEwLmRlZmF1bHQKfTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTYxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IGNsaWVudDsKCnZhciBfcnRtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7Cgp2YXIgX3J0bTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ydG0pOwoKdmFyIF9ydG0zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjIpOwoKdmFyIF9ydG00ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcnRtMyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gc29ja2V0IGZhY3RvcnkKZnVuY3Rpb24gY2xpZW50KCkgewoKICAvLyBidWlsZCBhIG5ldyBib3QgZXZlcnkgdGltZQogIHZhciBib3QgPSB7CiAgICBoYW5kbGVyczogewogICAgICBzdGFydGVkOiBbXQogICAgfQogIH07CgogIC8vIGFkZCB1bmRvY3VtZW50ZWQgcGluZyBldmVudAogIF9ydG00LmRlZmF1bHQucHVzaCgncG9uZycpOwoKICAvLyBnZW5lcmF0ZSBldmVudCBoYW5kbGVyIHJlZ2lzdHJhdGlvbiBtZXRob2RzCiAgX3J0bTQuZGVmYXVsdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICBib3QuaGFuZGxlcnNbZV0gPSBbXTsKICAgIGJvdFtlXSA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7CiAgICAgIGJvdC5oYW5kbGVyc1tlXS5wdXNoKGhhbmRsZXIpOwogICAgfTsKICB9KTsKCiAgYm90LnN0YXJ0ZWQgPSBmdW5jdGlvbiAoaGFuZGxlcikgewogICAgYm90LmhhbmRsZXJzWydzdGFydGVkJ10ucHVzaChoYW5kbGVyKTsKICB9OwoKICAvLyBraWNrcyB1cCBhIHdlYiBzb2NrZXQgY29ubmVjdGlvbgogIGJvdC5saXN0ZW4gPSBmdW5jdGlvbiBib3RMaXN0ZW4ocGFyYW1zLCBjYWxsYmFjaykgewogICAgKDAsIF9ydG0yLmRlZmF1bHQpKHBhcmFtcywgZnVuY3Rpb24gKGVyciwgZGF0YSkgewogICAgICBpZiAoZXJyKSB7CiAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhlcnIpO2Vsc2UgdGhyb3cgZXJyOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGdyYWIgYSBoYW5kbGUgb24gdGhlIHNvY2tldAogICAgICAgIGJvdC53cyA9IG5ldyBXZWJTb2NrZXQoZGF0YS51cmwpOwogICAgICAgIC8vIGRlbGVnYXRlIGV2ZXJ5dGhpbmcKICAgICAgICBib3Qud3Mub25tZXNzYWdlID0gZnVuY3Rpb24gbWVzc2FnZShlKSB7CiAgICAgICAgICB2YXIganNvbiA9IEpTT04ucGFyc2UoZS5kYXRhKTsKICAgICAgICAgIC8vIENhbGwgYWxsIHJlZ2lzdGVyZWQgaGFuZGxlcnMgZm9yIHRoaXMgZXZlbnQsIGlmIGFueQogICAgICAgICAgaWYgKGJvdC5oYW5kbGVyc1tqc29uLnR5cGVdKSBib3QuaGFuZGxlcnNbanNvbi50eXBlXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgIHJldHVybiBtLmNhbGwoe30sIGpzb24pOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICAvLyBjYWxsIHN0YXJ0ZWQgY2FsbGJhY2tzCiAgICAgICAgYm90LmhhbmRsZXJzWydzdGFydGVkJ10uZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuIG0uY2FsbCh7fSwgZGF0YSk7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjayhudWxsLCBkYXRhKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgLy8gY2xvc2VzIHRoZSBzb2NrZXQKICBib3QuY2xvc2UgPSBmdW5jdGlvbiBib3RDbG9zZSgpIHsKICAgIGJvdC53cy5jbG9zZSgpOwogIH07CgogIC8vLy8vLy8vLy8KICByZXR1cm4gYm90Owp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE2MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKLy8gZ2VuZXJhdGVkIHVzaW5nIC4vc2NyaXB0cy9nZW5lcmF0ZS1hbGwKdmFyIGV2ZW50cyA9IFsnYWNjb3VudHNfY2hhbmdlZCcsICdib3RfYWRkZWQnLCAnYm90X2NoYW5nZWQnLCAnY2hhbm5lbF9hcmNoaXZlJywgJ2NoYW5uZWxfY3JlYXRlZCcsICdjaGFubmVsX2RlbGV0ZWQnLCAnY2hhbm5lbF9oaXN0b3J5X2NoYW5nZWQnLCAnY2hhbm5lbF9qb2luZWQnLCAnY2hhbm5lbF9sZWZ0JywgJ2NoYW5uZWxfbWFya2VkJywgJ2NoYW5uZWxfcmVuYW1lJywgJ2NoYW5uZWxfdW5hcmNoaXZlJywgJ2NvbW1hbmRzX2NoYW5nZWQnLCAnZG5kX3VwZGF0ZWQnLCAnZG5kX3VwZGF0ZWRfdXNlcicsICdlbWFpbF9kb21haW5fY2hhbmdlZCcsICdlbW9qaV9jaGFuZ2VkJywgJ2ZpbGVfY2hhbmdlJywgJ2ZpbGVfY29tbWVudF9hZGRlZCcsICdmaWxlX2NvbW1lbnRfZGVsZXRlZCcsICdmaWxlX2NvbW1lbnRfZWRpdGVkJywgJ2ZpbGVfY3JlYXRlZCcsICdmaWxlX2RlbGV0ZWQnLCAnZmlsZV9wdWJsaWMnLCAnZmlsZV9zaGFyZWQnLCAnZmlsZV91bnNoYXJlZCcsICdnb29kYnllJywgJ2dyb3VwX2FyY2hpdmUnLCAnZ3JvdXBfY2xvc2UnLCAnZ3JvdXBfaGlzdG9yeV9jaGFuZ2VkJywgJ2dyb3VwX2pvaW5lZCcsICdncm91cF9sZWZ0JywgJ2dyb3VwX21hcmtlZCcsICdncm91cF9vcGVuJywgJ2dyb3VwX3JlbmFtZScsICdncm91cF91bmFyY2hpdmUnLCAnaGVsbG8nLCAnaW1fY2xvc2UnLCAnaW1fY3JlYXRlZCcsICdpbV9oaXN0b3J5X2NoYW5nZWQnLCAnaW1fbWFya2VkJywgJ2ltX29wZW4nLCAnbGlua19zaGFyZWQnLCAnbWFudWFsX3ByZXNlbmNlX2NoYW5nZScsICdtZXNzYWdlJywgJ21lc3NhZ2UuY2hhbm5lbHMnLCAnbWVzc2FnZS5ncm91cHMnLCAnbWVzc2FnZS5pbScsICdtZXNzYWdlLm1waW0nLCAncGluX2FkZGVkJywgJ3Bpbl9yZW1vdmVkJywgJ3BvbmcnLCAncHJlZl9jaGFuZ2UnLCAncHJlc2VuY2VfY2hhbmdlJywgJ3JlYWN0aW9uX2FkZGVkJywgJ3JlYWN0aW9uX3JlbW92ZWQnLCAncmVjb25uZWN0X3VybCcsICdzdGFyX2FkZGVkJywgJ3N0YXJfcmVtb3ZlZCcsICdzdWJ0ZWFtX2NyZWF0ZWQnLCAnc3VidGVhbV9zZWxmX2FkZGVkJywgJ3N1YnRlYW1fc2VsZl9yZW1vdmVkJywgJ3N1YnRlYW1fdXBkYXRlZCcsICd0ZWFtX2RvbWFpbl9jaGFuZ2UnLCAndGVhbV9qb2luJywgJ3RlYW1fbWlncmF0aW9uX3N0YXJ0ZWQnLCAndGVhbV9wbGFuX2NoYW5nZScsICd0ZWFtX3ByZWZfY2hhbmdlJywgJ3RlYW1fcHJvZmlsZV9jaGFuZ2UnLCAndGVhbV9wcm9maWxlX2RlbGV0ZScsICd0ZWFtX3Byb2ZpbGVfcmVvcmRlcicsICd0ZWFtX3JlbmFtZScsICd1cmxfdmVyaWZpY2F0aW9uJywgJ3VzZXJfY2hhbmdlJywgJ3VzZXJfdHlwaW5nJ107CgpleHBvcnRzLmRlZmF1bHQgPSBldmVudHM7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE2MyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTsKCnZhciBfc2VhcmNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaCk7Cgp2YXIgX3NlYXJjaDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTsKCnZhciBfc2VhcmNoNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaDMpOwoKdmFyIF9zZWFyY2g1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApOwoKdmFyIF9zZWFyY2g2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoNSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gewogIGFsbDogX3NlYXJjaDIuZGVmYXVsdCwgZmlsZXM6IF9zZWFyY2g0LmRlZmF1bHQsIG1lc3NhZ2VzOiBfc2VhcmNoNi5kZWZhdWx0Cn07Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE2NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9zdGFycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKTsKCnZhciBfc3RhcnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RhcnMpOwoKdmFyIF9zdGFyczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMik7Cgp2YXIgX3N0YXJzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0YXJzMyk7Cgp2YXIgX3N0YXJzNSA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKTsKCnZhciBfc3RhcnM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc3RhcnM1KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSB7CiAgYWRkOiBfc3RhcnMyLmRlZmF1bHQsIGxpc3Q6IF9zdGFyczQuZGVmYXVsdCwgcmVtb3ZlOiBfc3RhcnM2LmRlZmF1bHQKfTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTY1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3RlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCk7Cgp2YXIgX3RlYW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGVhbSk7Cgp2YXIgX3RlYW0zID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDUpOwoKdmFyIF90ZWFtNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RlYW0zKTsKCnZhciBfdGVhbTUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNik7Cgp2YXIgX3RlYW02ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGVhbTUpOwoKdmFyIF90ZWFtNyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KTsKCnZhciBfdGVhbTggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZWFtNyk7Cgp2YXIgX3RlYW1Qcm9maWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDgpOwoKdmFyIF90ZWFtUHJvZmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZWFtUHJvZmlsZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gewogIGFjY2Vzc0xvZ3M6IF90ZWFtMi5kZWZhdWx0LAogIGJpbGxhYmxlSW5mbzogX3RlYW00LmRlZmF1bHQsCiAgaW5mbzogX3RlYW02LmRlZmF1bHQsCiAgaW50ZWdyYXRpb25Mb2dzOiBfdGVhbTguZGVmYXVsdCwKICBwcm9maWxlOiB7CiAgICBnZXQ6IF90ZWFtUHJvZmlsZTIuZGVmYXVsdAogIH0KfTsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTY2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3VzZXJncm91cHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7Cgp2YXIgX3VzZXJncm91cHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcmdyb3Vwcyk7Cgp2YXIgX3VzZXJncm91cHMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTApOwoKdmFyIF91c2VyZ3JvdXBzNCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJncm91cHMzKTsKCnZhciBfdXNlcmdyb3VwczUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSk7Cgp2YXIgX3VzZXJncm91cHM2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcmdyb3VwczUpOwoKdmFyIF91c2VyZ3JvdXBzNyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEyKTsKCnZhciBfdXNlcmdyb3VwczggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyZ3JvdXBzNyk7Cgp2YXIgX3VzZXJncm91cHM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTMpOwoKdmFyIF91c2VyZ3JvdXBzMTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyZ3JvdXBzOSk7Cgp2YXIgX3VzZXJncm91cHNVc2VycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE0KTsKCnZhciBfdXNlcmdyb3Vwc1VzZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJncm91cHNVc2Vycyk7Cgp2YXIgX3VzZXJncm91cHNVc2VyczMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNSk7Cgp2YXIgX3VzZXJncm91cHNVc2VyczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyZ3JvdXBzVXNlcnMzKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSB7CiAgY3JlYXRlOiBfdXNlcmdyb3VwczIuZGVmYXVsdCwKICBkaXNhYmxlOiBfdXNlcmdyb3VwczQuZGVmYXVsdCwKICBlbmFibGU6IF91c2VyZ3JvdXBzNi5kZWZhdWx0LAogIGxpc3Q6IF91c2VyZ3JvdXBzOC5kZWZhdWx0LAogIHVwZGF0ZTogX3VzZXJncm91cHMxMC5kZWZhdWx0LAogIHVzZXJzOiB7CiAgICBsaXN0OiBfdXNlcmdyb3Vwc1VzZXJzMi5kZWZhdWx0LAogICAgdXBkYXRlOiBfdXNlcmdyb3Vwc1VzZXJzNC5kZWZhdWx0CiAgfQp9Owptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdXNlcnNkZWxldGVQaG90bzsKCnZhciBfZXhlYyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7Cgp2YXIgX2V4ZWMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXhlYyk7Cgp2YXIgX3ZhbGlkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTsKCnZhciBfdmFsaWRhdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdmFsaWRhdGUpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8vIHRoaXMgZmlsZSB3YXMgZ2VuZXJhdGVkIGJ5IC4vc2NyaXB0cy9nZW5lcmF0ZS13ZWItYXBpCmZ1bmN0aW9uIHVzZXJzZGVsZXRlUGhvdG8ocGFyYW1zLCBjYWxsYmFjaykgewogIHZhciBucyA9ICd1c2Vycy5kZWxldGVQaG90byc7CiAgdmFyIGVyciA9ICgwLCBfdmFsaWRhdGUyLmRlZmF1bHQpKG5zLCBwYXJhbXMpOwogIGlmIChlcnIpIHsKICAgIGNhbGxiYWNrKGVycik7CiAgfSBlbHNlIHsKICAgICgwLCBfZXhlYzIuZGVmYXVsdCkobnMsIHBhcmFtcywgY2FsbGJhY2spOwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxNjggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfdXNlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNik7Cgp2YXIgX3VzZXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJzKTsKCnZhciBfdXNlcnNQcm9maWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOwoKdmFyIF91c2Vyc1Byb2ZpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcnNQcm9maWxlKTsKCnZhciBfdXNlcnMzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTcpOwoKdmFyIF91c2VyczQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91c2VyczMpOwoKdmFyIF91c2VyczUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOCk7Cgp2YXIgX3VzZXJzNiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJzNSk7Cgp2YXIgX3VzZXJzNyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KTsKCnZhciBfdXNlcnM4ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcnM3KTsKCnZhciBfdXNlcnM5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOwoKdmFyIF91c2VyczEwID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcnM5KTsKCnZhciBfdXNlcnMxMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCnZhciBfdXNlcnMxMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VzZXJzMTEpOwoKdmFyIF91c2Vyc1Byb2ZpbGUzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOwoKdmFyIF91c2Vyc1Byb2ZpbGU0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXNlcnNQcm9maWxlMyk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gewogIGdldFByZXNlbmNlOiBfdXNlcnMyLmRlZmF1bHQsCiAgaWRlbnRpdHk6IF91c2VyczQuZGVmYXVsdCwKICBpbmZvOiBfdXNlcnM2LmRlZmF1bHQsCiAgbGlzdDogX3VzZXJzOC5kZWZhdWx0LAogIHByb2ZpbGU6IHsKICAgIGdldDogX3VzZXJzUHJvZmlsZTIuZGVmYXVsdCwKICAgIHNldDogX3VzZXJzUHJvZmlsZTQuZGVmYXVsdAogIH0sCiAgc2V0QWN0aXZlOiBfdXNlcnMxMC5kZWZhdWx0LAogIHNldFByZXNlbmNlOiBfdXNlcnMxMi5kZWZhdWx0Cn07Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE2OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB1c2Vyc3NldFBob3RvOwoKdmFyIF9leGVjID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTsKCnZhciBfZXhlYzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leGVjKTsKCnZhciBfdmFsaWRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpOwoKdmFyIF92YWxpZGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92YWxpZGF0ZSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLy8gdGhpcyBmaWxlIHdhcyBnZW5lcmF0ZWQgYnkgLi9zY3JpcHRzL2dlbmVyYXRlLXdlYi1hcGkKZnVuY3Rpb24gdXNlcnNzZXRQaG90byhwYXJhbXMsIGNhbGxiYWNrKSB7CiAgdmFyIG5zID0gJ3VzZXJzLnNldFBob3RvJzsKICB2YXIgZXJyID0gKDAsIF92YWxpZGF0ZTIuZGVmYXVsdCkobnMsIHBhcmFtcyk7CiAgaWYgKGVycikgewogICAgY2FsbGJhY2soZXJyKTsKICB9IGVsc2UgewogICAgKDAsIF9leGVjMi5kZWZhdWx0KShucywgcGFyYW1zLCBjYWxsYmFjayk7CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKLyoqKi8gfSksCi8qIDE3MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oQnVmZmVyLCBnbG9iYWwsIHByb2Nlc3MpIHt2YXIgY2FwYWJpbGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KQp2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCnZhciByZXNwb25zZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKQp2YXIgc3RyZWFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkKdmFyIHRvQXJyYXlCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3NSkKCnZhciBJbmNvbWluZ01lc3NhZ2UgPSByZXNwb25zZS5JbmNvbWluZ01lc3NhZ2UKdmFyIHJTdGF0ZXMgPSByZXNwb25zZS5yZWFkeVN0YXRlcwoKZnVuY3Rpb24gZGVjaWRlTW9kZSAocHJlZmVyQmluYXJ5LCB1c2VGZXRjaCkgewoJaWYgKGNhcGFiaWxpdHkuZmV0Y2ggJiYgdXNlRmV0Y2gpIHsKCQlyZXR1cm4gJ2ZldGNoJwoJfSBlbHNlIGlmIChjYXBhYmlsaXR5Lm1vemNodW5rZWRhcnJheWJ1ZmZlcikgewoJCXJldHVybiAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInCgl9IGVsc2UgaWYgKGNhcGFiaWxpdHkubXNzdHJlYW0pIHsKCQlyZXR1cm4gJ21zLXN0cmVhbScKCX0gZWxzZSBpZiAoY2FwYWJpbGl0eS5hcnJheWJ1ZmZlciAmJiBwcmVmZXJCaW5hcnkpIHsKCQlyZXR1cm4gJ2FycmF5YnVmZmVyJwoJfSBlbHNlIGlmIChjYXBhYmlsaXR5LnZiQXJyYXkgJiYgcHJlZmVyQmluYXJ5KSB7CgkJcmV0dXJuICd0ZXh0OnZiYXJyYXknCgl9IGVsc2UgewoJCXJldHVybiAndGV4dCcKCX0KfQoKdmFyIENsaWVudFJlcXVlc3QgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRzKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCXN0cmVhbS5Xcml0YWJsZS5jYWxsKHNlbGYpCgoJc2VsZi5fb3B0cyA9IG9wdHMKCXNlbGYuX2JvZHkgPSBbXQoJc2VsZi5faGVhZGVycyA9IHt9CglpZiAob3B0cy5hdXRoKQoJCXNlbGYuc2V0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgKyBuZXcgQnVmZmVyKG9wdHMuYXV0aCkudG9TdHJpbmcoJ2Jhc2U2NCcpKQoJT2JqZWN0LmtleXMob3B0cy5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CgkJc2VsZi5zZXRIZWFkZXIobmFtZSwgb3B0cy5oZWFkZXJzW25hbWVdKQoJfSkKCgl2YXIgcHJlZmVyQmluYXJ5Cgl2YXIgdXNlRmV0Y2ggPSB0cnVlCglpZiAob3B0cy5tb2RlID09PSAnZGlzYWJsZS1mZXRjaCcgfHwgJ3RpbWVvdXQnIGluIG9wdHMpIHsKCQkvLyBJZiB0aGUgdXNlIG9mIFhIUiBzaG91bGQgYmUgcHJlZmVycmVkIGFuZCBpbmNsdWRlcyBwcmVzZXJ2aW5nIHRoZSAnY29udGVudC10eXBlJyBoZWFkZXIuCgkJLy8gRm9yY2UgWEhSIHRvIGJlIHVzZWQgc2luY2UgdGhlIEZldGNoIEFQSSBkb2VzIG5vdCB5ZXQgc3VwcG9ydCB0aW1lb3V0cy4KCQl1c2VGZXRjaCA9IGZhbHNlCgkJcHJlZmVyQmluYXJ5ID0gdHJ1ZQoJfSBlbHNlIGlmIChvcHRzLm1vZGUgPT09ICdwcmVmZXItc3RyZWFtaW5nJykgewoJCS8vIElmIHN0cmVhbWluZyBpcyBhIGhpZ2ggcHJpb3JpdHkgYnV0IGJpbmFyeSBjb21wYXRpYmlsaXR5IGFuZAoJCS8vIHRoZSBhY2N1cmFjeSBvZiB0aGUgJ2NvbnRlbnQtdHlwZScgaGVhZGVyIGFyZW4ndAoJCXByZWZlckJpbmFyeSA9IGZhbHNlCgl9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gJ2FsbG93LXdyb25nLWNvbnRlbnQtdHlwZScpIHsKCQkvLyBJZiBzdHJlYW1pbmcgaXMgbW9yZSBpbXBvcnRhbnQgdGhhbiBwcmVzZXJ2aW5nIHRoZSAnY29udGVudC10eXBlJyBoZWFkZXIKCQlwcmVmZXJCaW5hcnkgPSAhY2FwYWJpbGl0eS5vdmVycmlkZU1pbWVUeXBlCgl9IGVsc2UgaWYgKCFvcHRzLm1vZGUgfHwgb3B0cy5tb2RlID09PSAnZGVmYXVsdCcgfHwgb3B0cy5tb2RlID09PSAncHJlZmVyLWZhc3QnKSB7CgkJLy8gVXNlIGJpbmFyeSBpZiB0ZXh0IHN0cmVhbWluZyBtYXkgY29ycnVwdCBkYXRhIG9yIHRoZSBjb250ZW50LXR5cGUgaGVhZGVyLCBvciBmb3Igc3BlZWQKCQlwcmVmZXJCaW5hcnkgPSB0cnVlCgl9IGVsc2UgewoJCXRocm93IG5ldyBFcnJvcignSW52YWxpZCB2YWx1ZSBmb3Igb3B0cy5tb2RlJykKCX0KCXNlbGYuX21vZGUgPSBkZWNpZGVNb2RlKHByZWZlckJpbmFyeSwgdXNlRmV0Y2gpCgoJc2VsZi5vbignZmluaXNoJywgZnVuY3Rpb24gKCkgewoJCXNlbGYuX29uRmluaXNoKCkKCX0pCn0KCmluaGVyaXRzKENsaWVudFJlcXVlc3QsIHN0cmVhbS5Xcml0YWJsZSkKCkNsaWVudFJlcXVlc3QucHJvdG90eXBlLnNldEhlYWRlciA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewoJdmFyIHNlbGYgPSB0aGlzCgl2YXIgbG93ZXJOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpCgkvLyBUaGlzIGNoZWNrIGlzIG5vdCBuZWNlc3NhcnksIGJ1dCBpdCBwcmV2ZW50cyB3YXJuaW5ncyBmcm9tIGJyb3dzZXJzIGFib3V0IHNldHRpbmcgdW5zYWZlCgkvLyBoZWFkZXJzLiBUbyBiZSBob25lc3QgSSdtIG5vdCBlbnRpcmVseSBzdXJlIGhpZGluZyB0aGVzZSB3YXJuaW5ncyBpcyBhIGdvb2QgdGhpbmcsIGJ1dAoJLy8gaHR0cC1icm93c2VyaWZ5IGRpZCBpdCwgc28gSSB3aWxsIHRvby4KCWlmICh1bnNhZmVIZWFkZXJzLmluZGV4T2YobG93ZXJOYW1lKSAhPT0gLTEpCgkJcmV0dXJuCgoJc2VsZi5faGVhZGVyc1tsb3dlck5hbWVdID0gewoJCW5hbWU6IG5hbWUsCgkJdmFsdWU6IHZhbHVlCgl9Cn0KCkNsaWVudFJlcXVlc3QucHJvdG90eXBlLmdldEhlYWRlciA9IGZ1bmN0aW9uIChuYW1lKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCXJldHVybiBzZWxmLl9oZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0udmFsdWUKfQoKQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUucmVtb3ZlSGVhZGVyID0gZnVuY3Rpb24gKG5hbWUpIHsKCXZhciBzZWxmID0gdGhpcwoJZGVsZXRlIHNlbGYuX2hlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXQp9CgpDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5fb25GaW5pc2ggPSBmdW5jdGlvbiAoKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCglpZiAoc2VsZi5fZGVzdHJveWVkKQoJCXJldHVybgoJdmFyIG9wdHMgPSBzZWxmLl9vcHRzCgoJdmFyIGhlYWRlcnNPYmogPSBzZWxmLl9oZWFkZXJzCgl2YXIgYm9keSA9IG51bGwKCWlmIChvcHRzLm1ldGhvZCA9PT0gJ1BPU1QnIHx8IG9wdHMubWV0aG9kID09PSAnUFVUJyB8fCBvcHRzLm1ldGhvZCA9PT0gJ1BBVENIJyB8fCBvcHRzLm1ldGhvZCA9PT0gJ01FUkdFJykgewoJCWlmIChjYXBhYmlsaXR5LmJsb2JDb25zdHJ1Y3RvcikgewoJCQlib2R5ID0gbmV3IGdsb2JhbC5CbG9iKHNlbGYuX2JvZHkubWFwKGZ1bmN0aW9uIChidWZmZXIpIHsKCQkJCXJldHVybiB0b0FycmF5QnVmZmVyKGJ1ZmZlcikKCQkJfSksIHsKCQkJCXR5cGU6IChoZWFkZXJzT2JqWydjb250ZW50LXR5cGUnXSB8fCB7fSkudmFsdWUgfHwgJycKCQkJfSkKCQl9IGVsc2UgewoJCQkvLyBnZXQgdXRmOCBzdHJpbmcKCQkJYm9keSA9IEJ1ZmZlci5jb25jYXQoc2VsZi5fYm9keSkudG9TdHJpbmcoKQoJCX0KCX0KCglpZiAoc2VsZi5fbW9kZSA9PT0gJ2ZldGNoJykgewoJCXZhciBoZWFkZXJzID0gT2JqZWN0LmtleXMoaGVhZGVyc09iaikubWFwKGZ1bmN0aW9uIChuYW1lKSB7CgkJCXJldHVybiBbaGVhZGVyc09ialtuYW1lXS5uYW1lLCBoZWFkZXJzT2JqW25hbWVdLnZhbHVlXQoJCX0pCgoJCWdsb2JhbC5mZXRjaChzZWxmLl9vcHRzLnVybCwgewoJCQltZXRob2Q6IHNlbGYuX29wdHMubWV0aG9kLAoJCQloZWFkZXJzOiBoZWFkZXJzLAoJCQlib2R5OiBib2R5IHx8IHVuZGVmaW5lZCwKCQkJbW9kZTogJ2NvcnMnLAoJCQljcmVkZW50aWFsczogb3B0cy53aXRoQ3JlZGVudGlhbHMgPyAnaW5jbHVkZScgOiAnc2FtZS1vcmlnaW4nCgkJfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKCQkJc2VsZi5fZmV0Y2hSZXNwb25zZSA9IHJlc3BvbnNlCgkJCXNlbGYuX2Nvbm5lY3QoKQoJCX0sIGZ1bmN0aW9uIChyZWFzb24pIHsKCQkJc2VsZi5lbWl0KCdlcnJvcicsIHJlYXNvbikKCQl9KQoJfSBlbHNlIHsKCQl2YXIgeGhyID0gc2VsZi5feGhyID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpCgkJdHJ5IHsKCQkJeGhyLm9wZW4oc2VsZi5fb3B0cy5tZXRob2QsIHNlbGYuX29wdHMudXJsLCB0cnVlKQoJCX0gY2F0Y2ggKGVycikgewoJCQlwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKCQkJCXNlbGYuZW1pdCgnZXJyb3InLCBlcnIpCgkJCX0pCgkJCXJldHVybgoJCX0KCgkJLy8gQ2FuJ3Qgc2V0IHJlc3BvbnNlVHlwZSBvbiByZWFsbHkgb2xkIGJyb3dzZXJzCgkJaWYgKCdyZXNwb25zZVR5cGUnIGluIHhocikKCQkJeGhyLnJlc3BvbnNlVHlwZSA9IHNlbGYuX21vZGUuc3BsaXQoJzonKVswXQoKCQlpZiAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKQoJCQl4aHIud2l0aENyZWRlbnRpYWxzID0gISFvcHRzLndpdGhDcmVkZW50aWFscwoKCQlpZiAoc2VsZi5fbW9kZSA9PT0gJ3RleHQnICYmICdvdmVycmlkZU1pbWVUeXBlJyBpbiB4aHIpCgkJCXhoci5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkJykKCgkJaWYgKCd0aW1lb3V0JyBpbiBvcHRzKSB7CgkJCXhoci50aW1lb3V0ID0gb3B0cy50aW1lb3V0CgkJCXhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7CgkJCQlzZWxmLmVtaXQoJ3RpbWVvdXQnKQoJCQl9CgkJfQoKCQlPYmplY3Qua2V5cyhoZWFkZXJzT2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlcnNPYmpbbmFtZV0ubmFtZSwgaGVhZGVyc09ialtuYW1lXS52YWx1ZSkKCQl9KQoKCQlzZWxmLl9yZXNwb25zZSA9IG51bGwKCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewoJCQlzd2l0Y2ggKHhoci5yZWFkeVN0YXRlKSB7CgkJCQljYXNlIHJTdGF0ZXMuTE9BRElORzoKCQkJCWNhc2UgclN0YXRlcy5ET05FOgoJCQkJCXNlbGYuX29uWEhSUHJvZ3Jlc3MoKQoJCQkJCWJyZWFrCgkJCX0KCQl9CgkJLy8gTmVjZXNzYXJ5IGZvciBzdHJlYW1pbmcgaW4gRmlyZWZveCwgc2luY2UgeGhyLnJlc3BvbnNlIGlzIE9OTFkgZGVmaW5lZAoJCS8vIGluIG9ucHJvZ3Jlc3MsIG5vdCBpbiBvbnJlYWR5c3RhdGVjaGFuZ2Ugd2l0aCB4aHIucmVhZHlTdGF0ZSA9IDMKCQlpZiAoc2VsZi5fbW9kZSA9PT0gJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJykgewoJCQl4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHsKCQkJCXNlbGYuX29uWEhSUHJvZ3Jlc3MoKQoJCQl9CgkJfQoKCQl4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKCQkJaWYgKHNlbGYuX2Rlc3Ryb3llZCkKCQkJCXJldHVybgoJCQlzZWxmLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdYSFIgZXJyb3InKSkKCQl9CgoJCXRyeSB7CgkJCXhoci5zZW5kKGJvZHkpCgkJfSBjYXRjaCAoZXJyKSB7CgkJCXByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgewoJCQkJc2VsZi5lbWl0KCdlcnJvcicsIGVycikKCQkJfSkKCQkJcmV0dXJuCgkJfQoJfQp9CgovKioKICogQ2hlY2tzIGlmIHhoci5zdGF0dXMgaXMgcmVhZGFibGUgYW5kIG5vbi16ZXJvLCBpbmRpY2F0aW5nIG5vIGVycm9yLgogKiBFdmVuIHRob3VnaCB0aGUgc3BlYyBzYXlzIGl0IHNob3VsZCBiZSBhdmFpbGFibGUgaW4gcmVhZHlTdGF0ZSAzLAogKiBhY2Nlc3NpbmcgaXQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpbiBJRTgKICovCmZ1bmN0aW9uIHN0YXR1c1ZhbGlkICh4aHIpIHsKCXRyeSB7CgkJdmFyIHN0YXR1cyA9IHhoci5zdGF0dXMKCQlyZXR1cm4gKHN0YXR1cyAhPT0gbnVsbCAmJiBzdGF0dXMgIT09IDApCgl9IGNhdGNoIChlKSB7CgkJcmV0dXJuIGZhbHNlCgl9Cn0KCkNsaWVudFJlcXVlc3QucHJvdG90eXBlLl9vblhIUlByb2dyZXNzID0gZnVuY3Rpb24gKCkgewoJdmFyIHNlbGYgPSB0aGlzCgoJaWYgKCFzdGF0dXNWYWxpZChzZWxmLl94aHIpIHx8IHNlbGYuX2Rlc3Ryb3llZCkKCQlyZXR1cm4KCglpZiAoIXNlbGYuX3Jlc3BvbnNlKQoJCXNlbGYuX2Nvbm5lY3QoKQoKCXNlbGYuX3Jlc3BvbnNlLl9vblhIUlByb2dyZXNzKCkKfQoKQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuX2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCglpZiAoc2VsZi5fZGVzdHJveWVkKQoJCXJldHVybgoKCXNlbGYuX3Jlc3BvbnNlID0gbmV3IEluY29taW5nTWVzc2FnZShzZWxmLl94aHIsIHNlbGYuX2ZldGNoUmVzcG9uc2UsIHNlbGYuX21vZGUpCglzZWxmLl9yZXNwb25zZS5vbignZXJyb3InLCBmdW5jdGlvbihlcnIpIHsKCQlzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKQoJfSkKCglzZWxmLmVtaXQoJ3Jlc3BvbnNlJywgc2VsZi5fcmVzcG9uc2UpCn0KCkNsaWVudFJlcXVlc3QucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCglzZWxmLl9ib2R5LnB1c2goY2h1bmspCgljYigpCn0KCkNsaWVudFJlcXVlc3QucHJvdG90eXBlLmFib3J0ID0gQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsKCXZhciBzZWxmID0gdGhpcwoJc2VsZi5fZGVzdHJveWVkID0gdHJ1ZQoJaWYgKHNlbGYuX3Jlc3BvbnNlKQoJCXNlbGYuX3Jlc3BvbnNlLl9kZXN0cm95ZWQgPSB0cnVlCglpZiAoc2VsZi5feGhyKQoJCXNlbGYuX3hoci5hYm9ydCgpCgkvLyBDdXJyZW50bHksIHRoZXJlIGlzbid0IGEgd2F5IHRvIHRydWx5IGFib3J0IGEgZmV0Y2guCgkvLyBJZiB5b3UgbGlrZSBiaWtlc2hlZGRpbmcsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL2ZldGNoL2lzc3Vlcy8yNwp9CgpDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoZGF0YSwgZW5jb2RpbmcsIGNiKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCWlmICh0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykgewoJCWNiID0gZGF0YQoJCWRhdGEgPSB1bmRlZmluZWQKCX0KCglzdHJlYW0uV3JpdGFibGUucHJvdG90eXBlLmVuZC5jYWxsKHNlbGYsIGRhdGEsIGVuY29kaW5nLCBjYikKfQoKQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuZmx1c2hIZWFkZXJzID0gZnVuY3Rpb24gKCkge30KQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHt9CkNsaWVudFJlcXVlc3QucHJvdG90eXBlLnNldE5vRGVsYXkgPSBmdW5jdGlvbiAoKSB7fQpDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXRTb2NrZXRLZWVwQWxpdmUgPSBmdW5jdGlvbiAoKSB7fQoKLy8gVGFrZW4gZnJvbSBodHRwOi8vd3d3LnczLm9yZy9UUi9YTUxIdHRwUmVxdWVzdC8jdGhlLXNldHJlcXVlc3RoZWFkZXIlMjglMjktbWV0aG9kCnZhciB1bnNhZmVIZWFkZXJzID0gWwoJJ2FjY2VwdC1jaGFyc2V0JywKCSdhY2NlcHQtZW5jb2RpbmcnLAoJJ2FjY2Vzcy1jb250cm9sLXJlcXVlc3QtaGVhZGVycycsCgknYWNjZXNzLWNvbnRyb2wtcmVxdWVzdC1tZXRob2QnLAoJJ2Nvbm5lY3Rpb24nLAoJJ2NvbnRlbnQtbGVuZ3RoJywKCSdjb29raWUnLAoJJ2Nvb2tpZTInLAoJJ2RhdGUnLAoJJ2RudCcsCgknZXhwZWN0JywKCSdob3N0JywKCSdrZWVwLWFsaXZlJywKCSdvcmlnaW4nLAoJJ3JlZmVyZXInLAoJJ3RlJywKCSd0cmFpbGVyJywKCSd0cmFuc2Zlci1lbmNvZGluZycsCgkndXBncmFkZScsCgkndXNlci1hZ2VudCcsCgkndmlhJwpdCgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygyKS5CdWZmZXIsIF9fd2VicGFja19yZXF1aXJlX18oMyksIF9fd2VicGFja19yZXF1aXJlX18oNSkpKQoKLyoqKi8gfSksCi8qIDE3MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcywgQnVmZmVyLCBnbG9iYWwpIHt2YXIgY2FwYWJpbGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KQp2YXIgaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCnZhciBzdHJlYW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQoKdmFyIHJTdGF0ZXMgPSBleHBvcnRzLnJlYWR5U3RhdGVzID0gewoJVU5TRU5UOiAwLAoJT1BFTkVEOiAxLAoJSEVBREVSU19SRUNFSVZFRDogMiwKCUxPQURJTkc6IDMsCglET05FOiA0Cn0KCnZhciBJbmNvbWluZ01lc3NhZ2UgPSBleHBvcnRzLkluY29taW5nTWVzc2FnZSA9IGZ1bmN0aW9uICh4aHIsIHJlc3BvbnNlLCBtb2RlKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCXN0cmVhbS5SZWFkYWJsZS5jYWxsKHNlbGYpCgoJc2VsZi5fbW9kZSA9IG1vZGUKCXNlbGYuaGVhZGVycyA9IHt9CglzZWxmLnJhd0hlYWRlcnMgPSBbXQoJc2VsZi50cmFpbGVycyA9IHt9CglzZWxmLnJhd1RyYWlsZXJzID0gW10KCgkvLyBGYWtlIHRoZSAnY2xvc2UnIGV2ZW50LCBidXQgb25seSBvbmNlICdlbmQnIGZpcmVzCglzZWxmLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7CgkJLy8gVGhlIG5leHRUaWNrIGlzIG5lY2Vzc2FyeSB0byBwcmV2ZW50IHRoZSAncmVxdWVzdCcgbW9kdWxlIGZyb20gY2F1c2luZyBhbiBpbmZpbml0ZSBsb29wCgkJcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7CgkJCXNlbGYuZW1pdCgnY2xvc2UnKQoJCX0pCgl9KQoKCWlmIChtb2RlID09PSAnZmV0Y2gnKSB7CgkJc2VsZi5fZmV0Y2hSZXNwb25zZSA9IHJlc3BvbnNlCgoJCXNlbGYudXJsID0gcmVzcG9uc2UudXJsCgkJc2VsZi5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzCgkJc2VsZi5zdGF0dXNNZXNzYWdlID0gcmVzcG9uc2Uuc3RhdHVzVGV4dAoJCQoJCXJlc3BvbnNlLmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIsIGtleSl7CgkJCXNlbGYuaGVhZGVyc1trZXkudG9Mb3dlckNhc2UoKV0gPSBoZWFkZXIKCQkJc2VsZi5yYXdIZWFkZXJzLnB1c2goa2V5LCBoZWFkZXIpCgkJfSkKCgoJCS8vIFRPRE86IHRoaXMgZG9lc24ndCByZXNwZWN0IGJhY2twcmVzc3VyZS4gT25jZSBXcml0YWJsZVN0cmVhbSBpcyBhdmFpbGFibGUsIHRoaXMgY2FuIGJlIGZpeGVkCgkJdmFyIHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCkKCQlmdW5jdGlvbiByZWFkICgpIHsKCQkJcmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKCQkJCWlmIChzZWxmLl9kZXN0cm95ZWQpCgkJCQkJcmV0dXJuCgkJCQlpZiAocmVzdWx0LmRvbmUpIHsKCQkJCQlzZWxmLnB1c2gobnVsbCkKCQkJCQlyZXR1cm4KCQkJCX0KCQkJCXNlbGYucHVzaChuZXcgQnVmZmVyKHJlc3VsdC52YWx1ZSkpCgkJCQlyZWFkKCkKCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7CgkJCQlzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKQoJCQl9KQoJCX0KCQlyZWFkKCkKCgl9IGVsc2UgewoJCXNlbGYuX3hociA9IHhocgoJCXNlbGYuX3BvcyA9IDAKCgkJc2VsZi51cmwgPSB4aHIucmVzcG9uc2VVUkwKCQlzZWxmLnN0YXR1c0NvZGUgPSB4aHIuc3RhdHVzCgkJc2VsZi5zdGF0dXNNZXNzYWdlID0geGhyLnN0YXR1c1RleHQKCQl2YXIgaGVhZGVycyA9IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS5zcGxpdCgvXHI/XG4vKQoJCWhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7CgkJCXZhciBtYXRjaGVzID0gaGVhZGVyLm1hdGNoKC9eKFteOl0rKTpccyooLiopLykKCQkJaWYgKG1hdGNoZXMpIHsKCQkJCXZhciBrZXkgPSBtYXRjaGVzWzFdLnRvTG93ZXJDYXNlKCkKCQkJCWlmIChrZXkgPT09ICdzZXQtY29va2llJykgewoJCQkJCWlmIChzZWxmLmhlYWRlcnNba2V5XSA9PT0gdW5kZWZpbmVkKSB7CgkJCQkJCXNlbGYuaGVhZGVyc1trZXldID0gW10KCQkJCQl9CgkJCQkJc2VsZi5oZWFkZXJzW2tleV0ucHVzaChtYXRjaGVzWzJdKQoJCQkJfSBlbHNlIGlmIChzZWxmLmhlYWRlcnNba2V5XSAhPT0gdW5kZWZpbmVkKSB7CgkJCQkJc2VsZi5oZWFkZXJzW2tleV0gKz0gJywgJyArIG1hdGNoZXNbMl0KCQkJCX0gZWxzZSB7CgkJCQkJc2VsZi5oZWFkZXJzW2tleV0gPSBtYXRjaGVzWzJdCgkJCQl9CgkJCQlzZWxmLnJhd0hlYWRlcnMucHVzaChtYXRjaGVzWzFdLCBtYXRjaGVzWzJdKQoJCQl9CgkJfSkKCgkJc2VsZi5fY2hhcnNldCA9ICd4LXVzZXItZGVmaW5lZCcKCQlpZiAoIWNhcGFiaWxpdHkub3ZlcnJpZGVNaW1lVHlwZSkgewoJCQl2YXIgbWltZVR5cGUgPSBzZWxmLnJhd0hlYWRlcnNbJ21pbWUtdHlwZSddCgkJCWlmIChtaW1lVHlwZSkgewoJCQkJdmFyIGNoYXJzZXRNYXRjaCA9IG1pbWVUeXBlLm1hdGNoKC87XHMqY2hhcnNldD0oW147XSkoO3wkKS8pCgkJCQlpZiAoY2hhcnNldE1hdGNoKSB7CgkJCQkJc2VsZi5fY2hhcnNldCA9IGNoYXJzZXRNYXRjaFsxXS50b0xvd2VyQ2FzZSgpCgkJCQl9CgkJCX0KCQkJaWYgKCFzZWxmLl9jaGFyc2V0KQoJCQkJc2VsZi5fY2hhcnNldCA9ICd1dGYtOCcgLy8gYmVzdCBndWVzcwoJCX0KCX0KfQoKaW5oZXJpdHMoSW5jb21pbmdNZXNzYWdlLCBzdHJlYW0uUmVhZGFibGUpCgpJbmNvbWluZ01lc3NhZ2UucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKCkge30KCkluY29taW5nTWVzc2FnZS5wcm90b3R5cGUuX29uWEhSUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7Cgl2YXIgc2VsZiA9IHRoaXMKCgl2YXIgeGhyID0gc2VsZi5feGhyCgoJdmFyIHJlc3BvbnNlID0gbnVsbAoJc3dpdGNoIChzZWxmLl9tb2RlKSB7CgkJY2FzZSAndGV4dDp2YmFycmF5JzogLy8gRm9yIElFOQoJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT09IHJTdGF0ZXMuRE9ORSkKCQkJCWJyZWFrCgkJCXRyeSB7CgkJCQkvLyBUaGlzIGZhaWxzIGluIElFOAoJCQkJcmVzcG9uc2UgPSBuZXcgZ2xvYmFsLlZCQXJyYXkoeGhyLnJlc3BvbnNlQm9keSkudG9BcnJheSgpCgkJCX0gY2F0Y2ggKGUpIHt9CgkJCWlmIChyZXNwb25zZSAhPT0gbnVsbCkgewoJCQkJc2VsZi5wdXNoKG5ldyBCdWZmZXIocmVzcG9uc2UpKQoJCQkJYnJlYWsKCQkJfQoJCQkvLyBGYWxscyB0aHJvdWdoIGluIElFOAkKCQljYXNlICd0ZXh0JzoKCQkJdHJ5IHsgLy8gVGhpcyB3aWxsIGZhaWwgd2hlbiByZWFkeVN0YXRlID0gMyBpbiBJRTkuIFN3aXRjaCBtb2RlIGFuZCB3YWl0IGZvciByZWFkeVN0YXRlID0gNAoJCQkJcmVzcG9uc2UgPSB4aHIucmVzcG9uc2VUZXh0CgkJCX0gY2F0Y2ggKGUpIHsKCQkJCXNlbGYuX21vZGUgPSAndGV4dDp2YmFycmF5JwoJCQkJYnJlYWsKCQkJfQoJCQlpZiAocmVzcG9uc2UubGVuZ3RoID4gc2VsZi5fcG9zKSB7CgkJCQl2YXIgbmV3RGF0YSA9IHJlc3BvbnNlLnN1YnN0cihzZWxmLl9wb3MpCgkJCQlpZiAoc2VsZi5fY2hhcnNldCA9PT0gJ3gtdXNlci1kZWZpbmVkJykgewoJCQkJCXZhciBidWZmZXIgPSBuZXcgQnVmZmVyKG5ld0RhdGEubGVuZ3RoKQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbmV3RGF0YS5sZW5ndGg7IGkrKykKCQkJCQkJYnVmZmVyW2ldID0gbmV3RGF0YS5jaGFyQ29kZUF0KGkpICYgMHhmZgoKCQkJCQlzZWxmLnB1c2goYnVmZmVyKQoJCQkJfSBlbHNlIHsKCQkJCQlzZWxmLnB1c2gobmV3RGF0YSwgc2VsZi5fY2hhcnNldCkKCQkJCX0KCQkJCXNlbGYuX3BvcyA9IHJlc3BvbnNlLmxlbmd0aAoJCQl9CgkJCWJyZWFrCgkJY2FzZSAnYXJyYXlidWZmZXInOgoJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT09IHJTdGF0ZXMuRE9ORSB8fCAheGhyLnJlc3BvbnNlKQoJCQkJYnJlYWsKCQkJcmVzcG9uc2UgPSB4aHIucmVzcG9uc2UKCQkJc2VsZi5wdXNoKG5ldyBCdWZmZXIobmV3IFVpbnQ4QXJyYXkocmVzcG9uc2UpKSkKCQkJYnJlYWsKCQljYXNlICdtb3otY2h1bmtlZC1hcnJheWJ1ZmZlcic6IC8vIHRha2Ugd2hvbGUKCQkJcmVzcG9uc2UgPSB4aHIucmVzcG9uc2UKCQkJaWYgKHhoci5yZWFkeVN0YXRlICE9PSByU3RhdGVzLkxPQURJTkcgfHwgIXJlc3BvbnNlKQoJCQkJYnJlYWsKCQkJc2VsZi5wdXNoKG5ldyBCdWZmZXIobmV3IFVpbnQ4QXJyYXkocmVzcG9uc2UpKSkKCQkJYnJlYWsKCQljYXNlICdtcy1zdHJlYW0nOgoJCQlyZXNwb25zZSA9IHhoci5yZXNwb25zZQoJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT09IHJTdGF0ZXMuTE9BRElORykKCQkJCWJyZWFrCgkJCXZhciByZWFkZXIgPSBuZXcgZ2xvYmFsLk1TU3RyZWFtUmVhZGVyKCkKCQkJcmVhZGVyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7CgkJCQlpZiAocmVhZGVyLnJlc3VsdC5ieXRlTGVuZ3RoID4gc2VsZi5fcG9zKSB7CgkJCQkJc2VsZi5wdXNoKG5ldyBCdWZmZXIobmV3IFVpbnQ4QXJyYXkocmVhZGVyLnJlc3VsdC5zbGljZShzZWxmLl9wb3MpKSkpCgkJCQkJc2VsZi5fcG9zID0gcmVhZGVyLnJlc3VsdC5ieXRlTGVuZ3RoCgkJCQl9CgkJCX0KCQkJcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKCQkJCXNlbGYucHVzaChudWxsKQoJCQl9CgkJCS8vIHJlYWRlci5vbmVycm9yID0gPz8/IC8vIFRPRE86IHRoaXMKCQkJcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHJlc3BvbnNlKQoJCQlicmVhawoJfQoKCS8vIFRoZSBtcy1zdHJlYW0gY2FzZSBoYW5kbGVzIGVuZCBzZXBhcmF0ZWx5IGluIHJlYWRlci5vbmxvYWQoKQoJaWYgKHNlbGYuX3hoci5yZWFkeVN0YXRlID09PSByU3RhdGVzLkRPTkUgJiYgc2VsZi5fbW9kZSAhPT0gJ21zLXN0cmVhbScpIHsKCQlzZWxmLnB1c2gobnVsbCkKCX0KfQoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNSksIF9fd2VicGFja19yZXF1aXJlX18oMikuQnVmZmVyLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKSkKCi8qKiovIH0pLAovKiAxNzIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikge3ZhciBodHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykKdmFyIGh0dHBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkKdmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpCnZhciBxcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIF9yZWFkKG9wdGlvbnMsIGNhbGxiYWNrKSB7CgogIC8vIHJlcXVpcmUgb3B0aW9ucy51cmwgb3IgZmFpbCBub2lzaWx5IAogIGlmICghb3B0aW9ucy51cmwpIHsKICAgIHRocm93IEVycm9yKCdvcHRpb25zLnVybCByZXF1aXJlZCcpCiAgfQoKICAvLyBwYXJzZSBvdXQgdGhlIG9wdGlvbnMgZnJvbSBvcHRpb25zLnVybAogIHZhciBvcHRzID0gdXJsLnBhcnNlKG9wdGlvbnMudXJsKQoKICAvLyBjaGVjayBmb3IgYWRkaXRpb25hbCBxdWVyeSBwYXJhbXMKICBpZiAob3B0aW9ucy5kYXRhKSB7CiAgICB2YXIgaXNTZWFyY2ggPSAhIW9wdHMuc2VhcmNoCiAgICBvcHRpb25zLnVybCArPSAoaXNTZWFyY2g/ICcmJyA6ICc/JykgKyBxcy5zdHJpbmdpZnkob3B0aW9ucy5kYXRhKQogICAgb3B0cyA9IHVybC5wYXJzZShvcHRpb25zLnVybCkKICB9CgogIHZhciBtZXRob2QgPSBvcHRzLnByb3RvY29sID09PSAnaHR0cHM6Jz8gaHR0cHMuZ2V0IDogaHR0cC5nZXQKCiAgb3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPSBmYWxzZQogIG9wdHMuYWdlbnQgPSBmYWxzZQogIG9wdHMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fQogIG9wdHMuaGVhZGVyc1snVXNlci1BZ2VudCddID0gb3B0cy5oZWFkZXJzWydVc2VyLUFnZW50J10gfHwgJ3RpbnktaHR0cCcKICBvcHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gb3B0cy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSB8fCAnYXBwbGljYXRpb24vanNvbicKICAKICAvLyBtYWtlIGEgcmVxdWVzdAogIHZhciByZXEgPSBtZXRob2Qob3B0cywgZnVuY3Rpb24gX19yZXMocmVzKSB7CiAgIAogICAgdmFyIHJhdyA9IFtdCgogICAgdmFyIG9rID0gcmVzLnN0YXR1c0NvZGUgPj0gMjAwICYmIHJlcy5zdGF0dXNDb2RlIDwgMzAwCiAgICBpZiAoIW9rKSB7CiAgICAgIGNhbGxiYWNrKEVycm9yKCdHRVQgZmFpbGVkIHdpdGg6ICcgKyByZXMuc3RhdHVzQ29kZSkpCiAgICAgIHJlcy5yZXN1bWUoKQogICAgICByZXR1cm4KICAgIH0KIAogICAgcmVzLm9uKCdkYXRhJywgZnVuY3Rpb24gX19kYXRhKGNodW5rKSB7CiAgICAgIHJhdy5wdXNoKGNodW5rKQogICAgfSkKCiAgICByZXMub24oJ2VuZCcsIGZ1bmN0aW9uIF9fZW5kKCkgewogICAgICB2YXIgZXJyID0gbnVsbAogICAgICB2YXIgcmVzdWx0ID0gbnVsbAogICAgICB0cnkgewogICAgICAgIHZhciBpc0pTT04gPSByZXMuaGVhZGVyc1snY29udGVudC10eXBlJ10uc3RhcnRzV2l0aCgnYXBwbGljYXRpb24vanNvbicpCiAgICAgICAgdmFyIHJhd0RhdGEgPSBCdWZmZXIuY29uY2F0KHJhdykudG9TdHJpbmcoKQogICAgICAgIHJlc3VsdCA9IGlzSlNPTj8gSlNPTi5wYXJzZShyYXdEYXRhKSA6IHJhd0RhdGEKICAgICAgfSAKICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICBlcnIgPSBlCiAgICAgIH0KICAgICAgY2FsbGJhY2soZXJyLCB7Ym9keTpyZXN1bHQsIGhlYWRlcnM6cmVzLmhlYWRlcnN9KQogICAgfSkKICB9KQogIAogIHJlcS5vbignZXJyb3InLCBjYWxsYmFjaykKfQoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMikuQnVmZmVyKSkKCi8qKiovIH0pLAovKiAxNzMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikge3ZhciBxcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpCnZhciBodHRwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykKdmFyIGh0dHBzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSkKdmFyIHVybCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIF93cml0ZShodHRwTWV0aG9kLCBvcHRpb25zLCBjYWxsYmFjaykgewoKICAvLyByZXF1aXJlIG9wdGlvbnMudXJsIG9yIGZhaWwgbm9pc2lseSAKICBpZiAoIW9wdGlvbnMudXJsKSB7CiAgICB0aHJvdyBFcnJvcignb3B0aW9ucy51cmwgcmVxdWlyZWQnKQogIH0KCiAgLy8gcGFyc2Ugb3V0IHRoZSBvcHRpb25zIGZyb20gb3B0aW9ucy51cmwKICB2YXIgb3B0cyA9IHVybC5wYXJzZShvcHRpb25zLnVybCkKICB2YXIgbWV0aG9kID0gb3B0cy5wcm90b2NvbCA9PT0gJ2h0dHBzOic/IGh0dHBzLnJlcXVlc3QgOiBodHRwLnJlcXVlc3QKICB2YXIgZGVmYXVsdENvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnCgogIC8vIHB1dCB0aGUgcGFyYW1zIG9uIHRoZSBxdWVyeSBhcyB3ZWxsIGFzIHRoZSBib2R5PwogIGlmIChodHRwTWV0aG9kID09PSAnREVMRVRFJyAmJiBvcHRpb25zLmRhdGEpIHsKICAgIHZhciBpc1NlYXJjaCA9ICEhb3B0cy5zZWFyY2gKICAgIG9wdGlvbnMudXJsICs9IChpc1NlYXJjaD8gJyYnIDogJz8nKSArIHFzLnN0cmluZ2lmeShvcHRpb25zLmRhdGEpCiAgICBvcHRzID0gdXJsLnBhcnNlKG9wdGlvbnMudXJsKQogIH0KCiAgb3B0cy5tZXRob2QgPSBodHRwTWV0aG9kCiAgb3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPSBmYWxzZQogIG9wdHMuYWdlbnQgPSBmYWxzZQogIG9wdHMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fQogIG9wdHMuaGVhZGVyc1snVXNlci1BZ2VudCddID0gb3B0cy5oZWFkZXJzWydVc2VyLUFnZW50J10gfHwgJ3RpbnktaHR0cCcKICBvcHRzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gb3B0cy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSB8fCBkZWZhdWx0Q29udGVudFR5cGUKICB2YXIgcmVxSlNPTiA9IG9wdHMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10uc3RhcnRzV2l0aCgnYXBwbGljYXRpb24vanNvbicpCiAgdmFyIHBvc3REYXRhID0gcmVxSlNPTj8gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5kYXRhIHx8IHt9KSA6IHFzLnN0cmluZ2lmeShvcHRpb25zLmRhdGEgfHwge30pCgogIC8vIG1ha2UgYSBQT1NUIHJlcXVlc3QKICB2YXIgcmVxID0gbWV0aG9kKG9wdHMsIGZ1bmN0aW9uKHJlcykgewogICAKICAgIHZhciByYXcgPSBbXSAvLyBrZWVwIG91ciBidWZmZXJzIGhlcmUKICAgIHZhciBvayA9IHJlcy5zdGF0dXNDb2RlID49IDIwMCAmJiByZXMuc3RhdHVzQ29kZSA8IDMwMAoKICAgIGlmICghb2spIHsKICAgICAgY2FsbGJhY2soRXJyb3IoaHR0cE1ldGhvZCArICcgZmFpbGVkIHdpdGg6ICcgKyByZXMuc3RhdHVzQ29kZSkpCiAgICAgIHJlcy5yZXN1bWUoKQogICAgICByZXR1cm4KICAgIH0KIAogICAgcmVzLm9uKCdkYXRhJywgZnVuY3Rpb24gX19kYXRhKGNodW5rKSB7IAogICAgICByYXcucHVzaChjaHVuaykgCiAgICB9KQoKICAgIHJlcy5vbignZW5kJywgZnVuY3Rpb24gX19lbmQoKSB7CiAgICAgIHZhciBlcnIgPSBudWxsCiAgICAgIHZhciByZXN1bHQgPSBudWxsCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIGlzSlNPTiA9IHJlcy5oZWFkZXJzWydjb250ZW50LXR5cGUnXS5zdGFydHNXaXRoKCdhcHBsaWNhdGlvbi9qc29uJykKICAgICAgICB2YXIgcmF3RGF0YSA9IEJ1ZmZlci5jb25jYXQocmF3KS50b1N0cmluZygpCiAgICAgICAgcmVzdWx0ID0gaXNKU09OPyBKU09OLnBhcnNlKHJhd0RhdGEpIDogcmF3RGF0YQogICAgICB9IAogICAgICBjYXRjaCAoZSkgewogICAgICAgIGVyciA9IGUKICAgICAgfQogICAgICBjYWxsYmFjayhlcnIsIHtib2R5OnJlc3VsdCwgaGVhZGVyczpyZXMuaGVhZGVyc30pCiAgICB9KQogIH0pCgogIHJlcS5vbignZXJyb3InLCBjYWxsYmFjaykKCiAgcmVxLndyaXRlKHBvc3REYXRhKQogCiAgcmVxLmVuZCgpCn0KCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLkJ1ZmZlcikpCgovKioqLyB9KSwKLyogMTc0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBfcmVhZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcyKQp2YXIgX3dyaXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzMpCgptb2R1bGUuZXhwb3J0cyA9IHsKICBnZXQ6IF9yZWFkLAogIHBvc3Q6IF93cml0ZS5iaW5kKHt9LCAnUE9TVCcpLAogIHB1dDogX3dyaXRlLmJpbmQoe30sICdQVVQnKSwKICBkZWw6IF93cml0ZS5iaW5kKHt9LCAnREVMRVRFJyksCn0KCgovKioqLyB9KSwKLyogMTc1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLkJ1ZmZlcgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYnVmKSB7CgkvLyBJZiB0aGUgYnVmZmVyIGlzIGJhY2tlZCBieSBhIFVpbnQ4QXJyYXksIGEgZmFzdGVyIHZlcnNpb24gd2lsbCB3b3JrCglpZiAoYnVmIGluc3RhbmNlb2YgVWludDhBcnJheSkgewoJCS8vIElmIHRoZSBidWZmZXIgaXNuJ3QgYSBzdWJhcnJheSwgcmV0dXJuIHRoZSB1bmRlcmx5aW5nIEFycmF5QnVmZmVyCgkJaWYgKGJ1Zi5ieXRlT2Zmc2V0ID09PSAwICYmIGJ1Zi5ieXRlTGVuZ3RoID09PSBidWYuYnVmZmVyLmJ5dGVMZW5ndGgpIHsKCQkJcmV0dXJuIGJ1Zi5idWZmZXIKCQl9IGVsc2UgaWYgKHR5cGVvZiBidWYuYnVmZmVyLnNsaWNlID09PSAnZnVuY3Rpb24nKSB7CgkJCS8vIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGdldCBhIHByb3BlciBjb3B5CgkJCXJldHVybiBidWYuYnVmZmVyLnNsaWNlKGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZU9mZnNldCArIGJ1Zi5ieXRlTGVuZ3RoKQoJCX0KCX0KCglpZiAoQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHsKCQkvLyBUaGlzIGlzIHRoZSBzbG93IHZlcnNpb24gdGhhdCB3aWxsIHdvcmsgd2l0aCBhbnkgQnVmZmVyCgkJLy8gaW1wbGVtZW50YXRpb24gKGV2ZW4gaW4gb2xkIGJyb3dzZXJzKQoJCXZhciBhcnJheUNvcHkgPSBuZXcgVWludDhBcnJheShidWYubGVuZ3RoKQoJCXZhciBsZW4gPSBidWYubGVuZ3RoCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgewoJCQlhcnJheUNvcHlbaV0gPSBidWZbaV0KCQl9CgkJcmV0dXJuIGFycmF5Q29weS5idWZmZXIKCX0gZWxzZSB7CgkJdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJykKCX0KfQoKCi8qKiovIH0pLAovKiAxNzYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCm1vZHVsZS5leHBvcnRzID0gewogIGlzU3RyaW5nOiBmdW5jdGlvbihhcmcpIHsKICAgIHJldHVybiB0eXBlb2YoYXJnKSA9PT0gJ3N0cmluZyc7CiAgfSwKICBpc09iamVjdDogZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gdHlwZW9mKGFyZykgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDsKICB9LAogIGlzTnVsbDogZnVuY3Rpb24oYXJnKSB7CiAgICByZXR1cm4gYXJnID09PSBudWxsOwogIH0sCiAgaXNOdWxsT3JVbmRlZmluZWQ6IGZ1bmN0aW9uKGFyZykgewogICAgcmV0dXJuIGFyZyA9PSBudWxsOwogIH0KfTsKCgovKioqLyB9KSwKLyogMTc3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsKLyoqCiAqIE1vZHVsZSBleHBvcnRzLgogKi8KCm1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlOwoKLyoqCiAqIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuCiAqIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuCiAqCiAqIElmIGBsb2NhbFN0b3JhZ2Uubm9EZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLgogKgogKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnMKICogd2lsbCB0aHJvdyBhbiBFcnJvciB3aGVuIGludm9rZWQuCiAqCiAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9ucwogKiB3aWxsIGludm9rZSBgY29uc29sZS50cmFjZSgpYCBpbnN0ZWFkIG9mIGBjb25zb2xlLmVycm9yKClgLgogKgogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGUKICogQHBhcmFtIHtTdHJpbmd9IG1zZyAtIHRoZSBzdHJpbmcgdG8gcHJpbnQgdG8gdGhlIGNvbnNvbGUgd2hlbiBgZm5gIGlzIGludm9rZWQKICogQHJldHVybnMge0Z1bmN0aW9ufSBhIG5ldyAiZGVwcmVjYXRlZCIgdmVyc2lvbiBvZiBgZm5gCiAqIEBhcGkgcHVibGljCiAqLwoKZnVuY3Rpb24gZGVwcmVjYXRlIChmbiwgbXNnKSB7CiAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7CiAgICByZXR1cm4gZm47CiAgfQoKICB2YXIgd2FybmVkID0gZmFsc2U7CiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHsKICAgIGlmICghd2FybmVkKSB7CiAgICAgIGlmIChjb25maWcoJ3Rocm93RGVwcmVjYXRpb24nKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpOwogICAgICB9IGVsc2UgaWYgKGNvbmZpZygndHJhY2VEZXByZWNhdGlvbicpKSB7CiAgICAgICAgY29uc29sZS50cmFjZShtc2cpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUud2Fybihtc2cpOwogICAgICB9CiAgICAgIHdhcm5lZCA9IHRydWU7CiAgICB9CiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIHJldHVybiBkZXByZWNhdGVkOwp9CgovKioKICogQ2hlY2tzIGBsb2NhbFN0b3JhZ2VgIGZvciBib29sZWFuIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGBuYW1lYC4KICoKICogQHBhcmFtIHtTdHJpbmd9IG5hbWUKICogQHJldHVybnMge0Jvb2xlYW59CiAqIEBhcGkgcHJpdmF0ZQogKi8KCmZ1bmN0aW9uIGNvbmZpZyAobmFtZSkgewogIC8vIGFjY2Vzc2luZyBnbG9iYWwubG9jYWxTdG9yYWdlIGNhbiB0cmlnZ2VyIGEgRE9NRXhjZXB0aW9uIGluIHNhbmRib3hlZCBpZnJhbWVzCiAgdHJ5IHsKICAgIGlmICghZ2xvYmFsLmxvY2FsU3RvcmFnZSkgcmV0dXJuIGZhbHNlOwogIH0gY2F0Y2ggKF8pIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgdmFyIHZhbCA9IGdsb2JhbC5sb2NhbFN0b3JhZ2VbbmFtZV07CiAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7CiAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJzsKfQoKLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMykpKQoKLyoqKi8gfSksCi8qIDE3OCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkgew0KCWlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7DQoJCW1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9Ow0KCQltb2R1bGUucGF0aHMgPSBbXTsNCgkJLy8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0DQoJCWlmKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdOw0KCQlPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCAibG9hZGVkIiwgew0KCQkJZW51bWVyYWJsZTogdHJ1ZSwNCgkJCWdldDogZnVuY3Rpb24oKSB7DQoJCQkJcmV0dXJuIG1vZHVsZS5sOw0KCQkJfQ0KCQl9KTsNCgkJT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgImlkIiwgew0KCQkJZW51bWVyYWJsZTogdHJ1ZSwNCgkJCWdldDogZnVuY3Rpb24oKSB7DQoJCQkJcmV0dXJuIG1vZHVsZS5pOw0KCQkJfQ0KCQl9KTsNCgkJbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7DQoJfQ0KCXJldHVybiBtb2R1bGU7DQp9Ow0KCgovKioqLyB9KSwKLyogMTc5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZXh0ZW5kCgp2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKZnVuY3Rpb24gZXh0ZW5kKCkgewogICAgdmFyIHRhcmdldCA9IHt9CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldCgogICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsKICAgICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7CiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRhcmdldAp9CgoKLyoqKi8gfSksCi8qIDE4MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovKiAoaWdub3JlZCkgKi8KCi8qKiovIH0pCi8qKioqKiovIF0pOwp9KTs=",
      "sourceCodeClassname": "SlackProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-c28037a6-8d59-ddbd-c208-d45c1334b92c4",
    "version": 4.000000000000002,
    "description": "Description of SlackProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "slack.slack.com",
    "configuration": {},
    "messageSchemas": "",
    "dataObjects": [],
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": {
      "browser": true
    },
    "interworking": true
  },
  "IMSIWProtoStub": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKdmFyIGdyYW1tYXIgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICB2OiBbewogICAgICBuYW1lOiAndmVyc2lvbicsCiAgICAgIHJlZzogL14oXGQqKSQvCiAgfV0sCiAgbzogW3sgLy9vPS0gMjA1MTggMCBJTiBJUDQgMjAzLjAuMTEzLjEKICAgIC8vIE5COiBzZXNzaW9uSWQgd2lsbCBiZSBhIFN0cmluZyBpbiBtb3N0IGNhc2VzIGJlY2F1c2UgaXQgaXMgaHVnZQogICAgbmFtZTogJ29yaWdpbicsCiAgICByZWc6IC9eKFxTKikgKFxkKikgKFxkKikgKFxTKikgSVAoXGQpIChcUyopLywKICAgIG5hbWVzOiBbJ3VzZXJuYW1lJywgJ3Nlc3Npb25JZCcsICdzZXNzaW9uVmVyc2lvbicsICduZXRUeXBlJywgJ2lwVmVyJywgJ2FkZHJlc3MnXSwKICAgIGZvcm1hdDogIiVzICVzICVkICVzIElQJWQgJXMiCiAgfV0sCiAgLy8gZGVmYXVsdCBwYXJzaW5nIG9mIHRoZXNlIG9ubHkgKHRob3VnaCBzb21lIG9mIHRoZXNlIGZlZWwgb3V0ZGF0ZWQpCiAgczogW3sgbmFtZTogJ25hbWUnIH1dLAogIGk6IFt7IG5hbWU6ICdkZXNjcmlwdGlvbicgfV0sCiAgdTogW3sgbmFtZTogJ3VyaScgfV0sCiAgZTogW3sgbmFtZTogJ2VtYWlsJyB9XSwKICBwOiBbeyBuYW1lOiAncGhvbmUnIH1dLAogIHo6IFt7IG5hbWU6ICd0aW1lem9uZXMnIH1dLCAvLyBUT0RPOiB0aGlzIG9uZSBjYW4gYWN0dWFsbHkgYmUgcGFyc2VkIHByb3Blcmx5Li4KICByOiBbeyBuYW1lOiAncmVwZWF0cycgfV0sICAgLy8gVE9ETzogdGhpcyBvbmUgY2FuIGFsc28gYmUgcGFyc2VkIHByb3Blcmx5CiAgLy9rOiBbe31dLCAvLyBvdXRkYXRlZCB0aGluZyBpZ25vcmVkCiAgdDogW3sgLy90PTAgMAogICAgbmFtZTogJ3RpbWluZycsCiAgICByZWc6IC9eKFxkKikgKFxkKikvLAogICAgbmFtZXM6IFsnc3RhcnQnLCAnc3RvcCddLAogICAgZm9ybWF0OiAiJWQgJWQiCiAgfV0sCiAgYzogW3sgLy9jPUlOIElQNCAxMC40Ny4xOTcuMjYKICAgICAgbmFtZTogJ2Nvbm5lY3Rpb24nLAogICAgICByZWc6IC9eSU4gSVAoXGQpIChcUyopLywKICAgICAgbmFtZXM6IFsndmVyc2lvbicsICdpcCddLAogICAgICBmb3JtYXQ6ICJJTiBJUCVkICVzIgogIH1dLAogIGI6IFt7IC8vYj1BUzo0MDAwCiAgICAgIHB1c2g6ICdiYW5kd2lkdGgnLAogICAgICByZWc6IC9eKFRJQVN8QVN8Q1R8UlJ8UlMpOihcZCopLywKICAgICAgbmFtZXM6IFsndHlwZScsICdsaW1pdCddLAogICAgICBmb3JtYXQ6ICIlczolcyIKICB9XSwKICBtOiBbeyAvL209dmlkZW8gNTE3NDQgUlRQL0FWUCAxMjYgOTcgOTggMzQgMzEKICAgICAgLy8gTkI6IHNwZWNpYWwgLSBwdXNoZXMgdG8gc2Vzc2lvbgogICAgICAvLyBUT0RPOiBydHAvZm10cCBzaG91bGQgYmUgZmlsdGVyZWQgYnkgdGhlIHBheWxvYWRzIGZvdW5kIGhlcmU/CiAgICAgIHJlZzogL14oXHcqKSAoXGQqKSAoW1x3XC9dKikoPzogKC4qKSk/LywKICAgICAgbmFtZXM6IFsndHlwZScsICdwb3J0JywgJ3Byb3RvY29sJywgJ3BheWxvYWRzJ10sCiAgICAgIGZvcm1hdDogIiVzICVkICVzICVzIgogIH1dLAogIGE6IFsKICAgIHsgLy9hPXJ0cG1hcDoxMTAgb3B1cy80ODAwMC8yCiAgICAgIHB1c2g6ICdydHAnLAogICAgICByZWc6IC9ecnRwbWFwOihcZCopIChbXHdcLVwuXSopKD86XHMqXC8oXGQqKSg/OlxzKlwvKFxTKikpPyk/LywKICAgICAgbmFtZXM6IFsncGF5bG9hZCcsICdjb2RlYycsICdyYXRlJywgJ2VuY29kaW5nJ10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICByZXR1cm4gKG8uZW5jb2RpbmcpID8KICAgICAgICAgICJydHBtYXA6JWQgJXMvJXMvJXMiOgogICAgICAgICAgby5yYXRlID8KICAgICAgICAgICJydHBtYXA6JWQgJXMvJXMiOgogICAgICAgICAgInJ0cG1hcDolZCAlcyI7CiAgICAgIH0KICAgIH0sCiAgICB7CiAgICAgIC8vYT1mbXRwOjEwOCBwcm9maWxlLWxldmVsLWlkPTI0O29iamVjdD0yMztiaXRyYXRlPTY0MDAwCiAgICAgIC8vYT1mbXRwOjExMSBtaW5wdGltZT0xMDsgdXNlaW5iYW5kZmVjPTEKICAgICAgcHVzaDogJ2ZtdHAnLAogICAgICByZWc6IC9eZm10cDooXGQqKSAoW1xTfCBdKikvLAogICAgICBuYW1lczogWydwYXlsb2FkJywgJ2NvbmZpZyddLAogICAgICBmb3JtYXQ6ICJmbXRwOiVkICVzIgogICAgfSwKICAgIHsgLy9hPWNvbnRyb2w6c3RyZWFtaWQ9MAogICAgICAgIG5hbWU6ICdjb250cm9sJywKICAgICAgICByZWc6IC9eY29udHJvbDooLiopLywKICAgICAgICBmb3JtYXQ6ICJjb250cm9sOiVzIgogICAgfSwKICAgIHsgLy9hPXJ0Y3A6NjUxNzkgSU4gSVA0IDE5My44NC43Ny4xOTQKICAgICAgbmFtZTogJ3J0Y3AnLAogICAgICByZWc6IC9ecnRjcDooXGQqKSg/OiAoXFMqKSBJUChcZCkgKFxTKikpPy8sCiAgICAgIG5hbWVzOiBbJ3BvcnQnLCAnbmV0VHlwZScsICdpcFZlcicsICdhZGRyZXNzJ10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICByZXR1cm4gKG8uYWRkcmVzcyAhPSBudWxsKSA/CiAgICAgICAgICAicnRjcDolZCAlcyBJUCVkICVzIjoKICAgICAgICAgICJydGNwOiVkIjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPXJ0Y3AtZmI6OTggdHJyLWludCAxMDAKICAgICAgcHVzaDogJ3J0Y3BGYlRyckludCcsCiAgICAgIHJlZzogL15ydGNwLWZiOihcKnxcZCopIHRyci1pbnQgKFxkKikvLAogICAgICBuYW1lczogWydwYXlsb2FkJywgJ3ZhbHVlJ10sCiAgICAgIGZvcm1hdDogInJ0Y3AtZmI6JWQgdHJyLWludCAlZCIKICAgIH0sCiAgICB7IC8vYT1ydGNwLWZiOjk4IG5hY2sgcnBzaQogICAgICBwdXNoOiAncnRjcEZiJywKICAgICAgcmVnOiAvXnJ0Y3AtZmI6KFwqfFxkKikgKFtcdy1fXSopKD86IChbXHctX10qKSk/LywKICAgICAgbmFtZXM6IFsncGF5bG9hZCcsICd0eXBlJywgJ3N1YnR5cGUnXSwKICAgICAgZm9ybWF0OiBmdW5jdGlvbiAobykgewogICAgICAgIHJldHVybiAoby5zdWJ0eXBlICE9IG51bGwpID8KICAgICAgICAgICJydGNwLWZiOiVzICVzICVzIjoKICAgICAgICAgICJydGNwLWZiOiVzICVzIjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPWV4dG1hcDoyIHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnRvZmZzZXQKICAgICAgLy9hPWV4dG1hcDoxL3JlY3Zvbmx5IFVSSS1ncHMtc3RyaW5nCiAgICAgIHB1c2g6ICdleHQnLAogICAgICByZWc6IC9eZXh0bWFwOihbXHdfXC9dKikgKFxTKikoPzogKFxTKikpPy8sCiAgICAgIG5hbWVzOiBbJ3ZhbHVlJywgJ3VyaScsICdjb25maWcnXSwgLy8gdmFsdWUgbWF5IGluY2x1ZGUgIi9kaXJlY3Rpb24iIHN1ZmZpeAogICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIChvLmNvbmZpZyAhPSBudWxsKSA/CiAgICAgICAgICAiZXh0bWFwOiVzICVzICVzIjoKICAgICAgICAgICJleHRtYXA6JXMgJXMiOwogICAgICB9CiAgICB9LAogICAgewogICAgICAvL2E9Y3J5cHRvOjEgQUVTX0NNXzEyOF9ITUFDX1NIQTFfODAgaW5saW5lOlBTMXVRQ1ZlZUNGQ2FuVm1jamtwUHl3ak5XaGNZRDBtWFh0eGFWQlJ8Ml4yMHwxOjMyCiAgICAgIHB1c2g6ICdjcnlwdG8nLAogICAgICByZWc6IC9eY3J5cHRvOihcZCopIChbXHdfXSopIChcUyopKD86IChcUyopKT8vLAogICAgICBuYW1lczogWydpZCcsICdzdWl0ZScsICdjb25maWcnLCAnc2Vzc2lvbkNvbmZpZyddLAogICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIChvLnNlc3Npb25Db25maWcgIT0gbnVsbCkgPwogICAgICAgICAgImNyeXB0bzolZCAlcyAlcyAlcyI6CiAgICAgICAgICAiY3J5cHRvOiVkICVzICVzIjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPXNldHVwOmFjdHBhc3MKICAgICAgbmFtZTogJ3NldHVwJywKICAgICAgcmVnOiAvXnNldHVwOihcdyopLywKICAgICAgZm9ybWF0OiAic2V0dXA6JXMiCiAgICB9LAogICAgeyAvL2E9bWlkOjEKICAgICAgbmFtZTogJ21pZCcsCiAgICAgIHJlZzogL15taWQ6KFteXHNdKikvLAogICAgICBmb3JtYXQ6ICJtaWQ6JXMiCiAgICB9LAogICAgeyAvL2E9bXNpZDowYzhiMDY0ZC1kODA3LTQzYjQtYjQzNC1mOTJhODg5ZDg1ODcgOTgxNzg2ODUtZDQwOS00NmUwLThlMTYtN2VmMGRiMGRiNjRhCiAgICAgIG5hbWU6ICdtc2lkJywKICAgICAgcmVnOiAvXm1zaWQ6KC4qKS8sCiAgICAgIGZvcm1hdDogIm1zaWQ6JXMiCiAgICB9LAogICAgeyAvL2E9cHRpbWU6MjAKICAgICAgbmFtZTogJ3B0aW1lJywKICAgICAgcmVnOiAvXnB0aW1lOihcZCopLywKICAgICAgZm9ybWF0OiAicHRpbWU6JWQiCiAgICB9LAogICAgeyAvL2E9bWF4cHRpbWU6NjAKICAgICAgbmFtZTogJ21heHB0aW1lJywKICAgICAgcmVnOiAvXm1heHB0aW1lOihcZCopLywKICAgICAgZm9ybWF0OiAibWF4cHRpbWU6JWQiCiAgICB9LAogICAgeyAvL2E9c2VuZHJlY3YKICAgICAgbmFtZTogJ2RpcmVjdGlvbicsCiAgICAgIHJlZzogL14oc2VuZHJlY3Z8cmVjdm9ubHl8c2VuZG9ubHl8aW5hY3RpdmUpLwogICAgfSwKICAgIHsgLy9hPWljZS1saXRlCiAgICAgIG5hbWU6ICdpY2VsaXRlJywKICAgICAgcmVnOiAvXihpY2UtbGl0ZSkvCiAgICB9LAogICAgeyAvL2E9aWNlLXVmcmFnOkY3Z0kKICAgICAgbmFtZTogJ2ljZVVmcmFnJywKICAgICAgcmVnOiAvXmljZS11ZnJhZzooXFMqKS8sCiAgICAgIGZvcm1hdDogImljZS11ZnJhZzolcyIKICAgIH0sCiAgICB7IC8vYT1pY2UtcHdkOng5Y21sL1l6aWNoVjIrWGxoaU11OGcKICAgICAgbmFtZTogJ2ljZVB3ZCcsCiAgICAgIHJlZzogL15pY2UtcHdkOihcUyopLywKICAgICAgZm9ybWF0OiAiaWNlLXB3ZDolcyIKICAgIH0sCiAgICB7IC8vYT1maW5nZXJwcmludDpTSEEtMSAwMDoxMToyMjozMzo0NDo1NTo2Njo3Nzo4ODo5OTpBQTpCQjpDQzpERDpFRTpGRjowMDoxMToyMjozMwogICAgICBuYW1lOiAnZmluZ2VycHJpbnQnLAogICAgICByZWc6IC9eZmluZ2VycHJpbnQ6KFxTKikgKFxTKikvLAogICAgICBuYW1lczogWyd0eXBlJywgJ2hhc2gnXSwKICAgICAgZm9ybWF0OiAiZmluZ2VycHJpbnQ6JXMgJXMiCiAgICB9LAogICAgewogICAgICAvL2E9Y2FuZGlkYXRlOjAgMSBVRFAgMjExMzY2NzMyNyAyMDMuMC4xMTMuMSA1NDQwMCB0eXAgaG9zdAogICAgICAvL2E9Y2FuZGlkYXRlOjExNjI4NzUwODEgMSB1ZHAgMjExMzkzNzE1MSAxOTIuMTY4LjM0Ljc1IDYwMDE3IHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDMgbmV0d29yay1jb3N0IDEwCiAgICAgIC8vYT1jYW5kaWRhdGU6MzI4OTkxMjk1NyAyIHVkcCAxODQ1NTAxNjk1IDE5My44NC43Ny4xOTQgNjAwMTcgdHlwIHNyZmx4IHJhZGRyIDE5Mi4xNjguMzQuNzUgcnBvcnQgNjAwMTcgZ2VuZXJhdGlvbiAwIG5ldHdvcmstaWQgMyBuZXR3b3JrLWNvc3QgMTAKICAgICAgLy9hPWNhbmRpZGF0ZToyMjk4MTU2MjAgMSB0Y3AgMTUxODI4MDQ0NyAxOTIuMTY4LjE1MC4xOSA2MDAxNyB0eXAgaG9zdCB0Y3B0eXBlIGFjdGl2ZSBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAzIG5ldHdvcmstY29zdCAxMAogICAgICAvL2E9Y2FuZGlkYXRlOjMyODk5MTI5NTcgMiB0Y3AgMTg0NTUwMTY5NSAxOTMuODQuNzcuMTk0IDYwMDE3IHR5cCBzcmZseCByYWRkciAxOTIuMTY4LjM0Ljc1IHJwb3J0IDYwMDE3IHRjcHR5cGUgcGFzc2l2ZSBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAzIG5ldHdvcmstY29zdCAxMAogICAgICBwdXNoOidjYW5kaWRhdGVzJywKICAgICAgcmVnOiAvXmNhbmRpZGF0ZTooXFMqKSAoXGQqKSAoXFMqKSAoXGQqKSAoXFMqKSAoXGQqKSB0eXAgKFxTKikoPzogcmFkZHIgKFxTKikgcnBvcnQgKFxkKikpPyg/OiB0Y3B0eXBlIChcUyopKT8oPzogZ2VuZXJhdGlvbiAoXGQqKSk/KD86IG5ldHdvcmstaWQgKFxkKikpPyg/OiBuZXR3b3JrLWNvc3QgKFxkKikpPy8sCiAgICAgIG5hbWVzOiBbJ2ZvdW5kYXRpb24nLCAnY29tcG9uZW50JywgJ3RyYW5zcG9ydCcsICdwcmlvcml0eScsICdpcCcsICdwb3J0JywgJ3R5cGUnLCAncmFkZHInLCAncnBvcnQnLCAndGNwdHlwZScsICdnZW5lcmF0aW9uJywgJ25ldHdvcmstaWQnLCAnbmV0d29yay1jb3N0J10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICB2YXIgc3RyID0gImNhbmRpZGF0ZTolcyAlZCAlcyAlZCAlcyAlZCB0eXAgJXMiOwoKICAgICAgICBzdHIgKz0gKG8ucmFkZHIgIT0gbnVsbCkgPyAiIHJhZGRyICVzIHJwb3J0ICVkIiA6ICIldiV2IjsKCiAgICAgICAgLy8gTkI6IGNhbmRpZGF0ZSBoYXMgdGhyZWUgb3B0aW9uYWwgY2h1bmtzLCBzbyAldm9pZCBtaWRkbGVzIG9uZSBpZiBpdCdzIG1pc3NpbmcKICAgICAgICBzdHIgKz0gKG8udGNwdHlwZSAhPSBudWxsKSA/ICIgdGNwdHlwZSAlcyIgOiAiJXYiOwoKICAgICAgICBpZiAoby5nZW5lcmF0aW9uICE9IG51bGwpIHsKICAgICAgICAgIHN0ciArPSAiIGdlbmVyYXRpb24gJWQiOwogICAgICAgIH0KCiAgICAgICAgc3RyICs9IChvWyduZXR3b3JrLWlkJ10gIT0gbnVsbCkgPyAiIG5ldHdvcmstaWQgJWQiIDogIiV2IjsKICAgICAgICBzdHIgKz0gKG9bJ25ldHdvcmstY29zdCddICE9IG51bGwpID8gIiBuZXR3b3JrLWNvc3QgJWQiIDogIiV2IjsKICAgICAgICByZXR1cm4gc3RyOwogICAgICB9CiAgICB9LAogICAgeyAvL2E9ZW5kLW9mLWNhbmRpZGF0ZXMgKGtlZXAgYWZ0ZXIgdGhlIGNhbmRpZGF0ZXMgbGluZSBmb3IgcmVhZGFiaWxpdHkpCiAgICAgIG5hbWU6ICdlbmRPZkNhbmRpZGF0ZXMnLAogICAgICByZWc6IC9eKGVuZC1vZi1jYW5kaWRhdGVzKS8KICAgIH0sCiAgICB7IC8vYT1yZW1vdGUtY2FuZGlkYXRlczoxIDIwMy4wLjExMy4xIDU0NDAwIDIgMjAzLjAuMTEzLjEgNTQ0MDEgLi4uCiAgICAgIG5hbWU6ICdyZW1vdGVDYW5kaWRhdGVzJywKICAgICAgcmVnOiAvXnJlbW90ZS1jYW5kaWRhdGVzOiguKikvLAogICAgICBmb3JtYXQ6ICJyZW1vdGUtY2FuZGlkYXRlczolcyIKICAgIH0sCiAgICB7IC8vYT1pY2Utb3B0aW9uczpnb29nbGUtaWNlCiAgICAgIG5hbWU6ICdpY2VPcHRpb25zJywKICAgICAgcmVnOiAvXmljZS1vcHRpb25zOihcUyopLywKICAgICAgZm9ybWF0OiAiaWNlLW9wdGlvbnM6JXMiCiAgICB9LAogICAgeyAvL2E9c3NyYzoyNTY2MTA3NTY5IGNuYW1lOnQ5WVU4TTFVeFRGOFkxQTEKICAgICAgcHVzaDogInNzcmNzIiwKICAgICAgcmVnOiAvXnNzcmM6KFxkKikgKFtcd19dKikoPzo6KC4qKSk/LywKICAgICAgbmFtZXM6IFsnaWQnLCAnYXR0cmlidXRlJywgJ3ZhbHVlJ10sCiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHsKICAgICAgICB2YXIgc3RyID0gInNzcmM6JWQiOwogICAgICAgIGlmIChvLmF0dHJpYnV0ZSAhPSBudWxsKSB7CiAgICAgICAgICBzdHIgKz0gIiAlcyI7CiAgICAgICAgICBpZiAoby52YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgICAgIHN0ciArPSAiOiVzIjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHN0cjsKICAgICAgfQogICAgfSwKICAgIHsgLy9hPXNzcmMtZ3JvdXA6RkVDIDEgMgogICAgICBwdXNoOiAic3NyY0dyb3VwcyIsCiAgICAgIHJlZzogL15zc3JjLWdyb3VwOihcdyopICguKikvLAogICAgICBuYW1lczogWydzZW1hbnRpY3MnLCAnc3NyY3MnXSwKICAgICAgZm9ybWF0OiAic3NyYy1ncm91cDolcyAlcyIKICAgIH0sCiAgICB7IC8vYT1tc2lkLXNlbWFudGljOiBXTVMgSnZsYW01WDNTWDFPUDZwbjIweldvZ3ZhS0p6NUhqZjlPbmxWCiAgICAgIG5hbWU6ICJtc2lkU2VtYW50aWMiLAogICAgICByZWc6IC9ebXNpZC1zZW1hbnRpYzpccz8oXHcqKSAoXFMqKS8sCiAgICAgIG5hbWVzOiBbJ3NlbWFudGljJywgJ3Rva2VuJ10sCiAgICAgIGZvcm1hdDogIm1zaWQtc2VtYW50aWM6ICVzICVzIiAvLyBzcGFjZSBhZnRlciAiOiIgaXMgbm90IGFjY2lkZW50YWwKICAgIH0sCiAgICB7IC8vYT1ncm91cDpCVU5ETEUgYXVkaW8gdmlkZW8KICAgICAgcHVzaDogJ2dyb3VwcycsCiAgICAgIHJlZzogL15ncm91cDooXHcqKSAoLiopLywKICAgICAgbmFtZXM6IFsndHlwZScsICdtaWRzJ10sCiAgICAgIGZvcm1hdDogImdyb3VwOiVzICVzIgogICAgfSwKICAgIHsgLy9hPXJ0Y3AtbXV4CiAgICAgIG5hbWU6ICdydGNwTXV4JywKICAgICAgcmVnOiAvXihydGNwLW11eCkvCiAgICB9LAogICAgeyAvL2E9cnRjcC1yc2l6ZQogICAgICBuYW1lOiAncnRjcFJzaXplJywKICAgICAgcmVnOiAvXihydGNwLXJzaXplKS8KICAgIH0sCiAgICB7IC8vYT1zY3RwbWFwOjUwMDAgd2VicnRjLWRhdGFjaGFubmVsIDEwMjQKICAgICAgbmFtZTogJ3NjdHBtYXAnLAogICAgICByZWc6IC9ec2N0cG1hcDooW1x3X1wvXSopIChcUyopKD86IChcUyopKT8vLAogICAgICBuYW1lczogWydzY3RwbWFwTnVtYmVyJywgJ2FwcCcsICdtYXhNZXNzYWdlU2l6ZSddLAogICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7CiAgICAgICAgcmV0dXJuIChvLm1heE1lc3NhZ2VTaXplICE9IG51bGwpID8KICAgICAgICAgICJzY3RwbWFwOiVzICVzICVzIiA6CiAgICAgICAgICAic2N0cG1hcDolcyAlcyI7CiAgICAgIH0KICAgIH0sCiAgICB7IC8vIGFueSBhPSB0aGF0IHdlIGRvbid0IHVuZGVyc3RhbmQgaXMga2VwdHMgdmVyYmF0aW0gb24gbWVkaWEuaW52YWxpZAogICAgICBwdXNoOiAnaW52YWxpZCcsCiAgICAgIG5hbWVzOiBbInZhbHVlIl0KICAgIH0KICBdCn07CgovLyBzZXQgc2Vuc2libGUgZGVmYXVsdHMgdG8gYXZvaWQgcG9sbHV0aW5nIHRoZSBncmFtbWFyIHdpdGggYm9yaW5nIGRldGFpbHMKT2JqZWN0LmtleXMoZ3JhbW1hcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgdmFyIG9ianMgPSBncmFtbWFyW2tleV07CiAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsKICAgIGlmICghb2JqLnJlZykgewogICAgICBvYmoucmVnID0gLyguKikvOwogICAgfQogICAgaWYgKCFvYmouZm9ybWF0KSB7CiAgICAgIG9iai5mb3JtYXQgPSAiJXMiOwogICAgfQogIH0pOwp9KTsKCn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgcGFyc2VyID0gcmVxdWlyZSgnLi9wYXJzZXInKTsKdmFyIHdyaXRlciA9IHJlcXVpcmUoJy4vd3JpdGVyJyk7CgpleHBvcnRzLndyaXRlID0gd3JpdGVyOwpleHBvcnRzLnBhcnNlID0gcGFyc2VyLnBhcnNlOwpleHBvcnRzLnBhcnNlRm10cENvbmZpZyA9IHBhcnNlci5wYXJzZUZtdHBDb25maWc7CmV4cG9ydHMucGFyc2VQYXlsb2FkcyA9IHBhcnNlci5wYXJzZVBheWxvYWRzOwpleHBvcnRzLnBhcnNlUmVtb3RlQ2FuZGlkYXRlcyA9IHBhcnNlci5wYXJzZVJlbW90ZUNhbmRpZGF0ZXM7Cgp9LHsiLi9wYXJzZXIiOjMsIi4vd3JpdGVyIjo0fV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CnZhciB0b0ludElmSW50ID0gZnVuY3Rpb24gKHYpIHsKICByZXR1cm4gU3RyaW5nKE51bWJlcih2KSkgPT09IHYgPyBOdW1iZXIodikgOiB2Owp9OwoKdmFyIGF0dGFjaFByb3BlcnRpZXMgPSBmdW5jdGlvbiAobWF0Y2gsIGxvY2F0aW9uLCBuYW1lcywgcmF3TmFtZSkgewogIGlmIChyYXdOYW1lICYmICFuYW1lcykgewogICAgbG9jYXRpb25bcmF3TmFtZV0gPSB0b0ludElmSW50KG1hdGNoWzFdKTsKICB9CiAgZWxzZSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGlmIChtYXRjaFtpKzFdICE9IG51bGwpIHsKICAgICAgICBsb2NhdGlvbltuYW1lc1tpXV0gPSB0b0ludElmSW50KG1hdGNoW2krMV0pOwogICAgICB9CiAgICB9CiAgfQp9OwoKdmFyIHBhcnNlUmVnID0gZnVuY3Rpb24gKG9iaiwgbG9jYXRpb24sIGNvbnRlbnQpIHsKICB2YXIgbmVlZHNCbGFuayA9IG9iai5uYW1lICYmIG9iai5uYW1lczsKICBpZiAob2JqLnB1c2ggJiYgIWxvY2F0aW9uW29iai5wdXNoXSkgewogICAgbG9jYXRpb25bb2JqLnB1c2hdID0gW107CiAgfQogIGVsc2UgaWYgKG5lZWRzQmxhbmsgJiYgIWxvY2F0aW9uW29iai5uYW1lXSkgewogICAgbG9jYXRpb25bb2JqLm5hbWVdID0ge307CiAgfQogIHZhciBrZXlMb2NhdGlvbiA9IG9iai5wdXNoID8KICAgIHt9IDogIC8vIGJsYW5rIG9iamVjdCB0aGF0IHdpbGwgYmUgcHVzaGVkCiAgICBuZWVkc0JsYW5rID8gbG9jYXRpb25bb2JqLm5hbWVdIDogbG9jYXRpb247IC8vIG90aGVyd2lzZSwgbmFtZWQgbG9jYXRpb24gb3Igcm9vdAoKICBhdHRhY2hQcm9wZXJ0aWVzKGNvbnRlbnQubWF0Y2gob2JqLnJlZyksIGtleUxvY2F0aW9uLCBvYmoubmFtZXMsIG9iai5uYW1lKTsKCiAgaWYgKG9iai5wdXNoKSB7CiAgICBsb2NhdGlvbltvYmoucHVzaF0ucHVzaChrZXlMb2NhdGlvbik7CiAgfQp9OwoKdmFyIGdyYW1tYXIgPSByZXF1aXJlKCcuL2dyYW1tYXInKTsKdmFyIHZhbGlkTGluZSA9IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKFthLXpdKT0oLiopLyk7CgpleHBvcnRzLnBhcnNlID0gZnVuY3Rpb24gKHNkcCkgewogIHZhciBzZXNzaW9uID0ge30KICAgICwgbWVkaWEgPSBbXQogICAgLCBsb2NhdGlvbiA9IHNlc3Npb247IC8vIHBvaW50cyBhdCB3aGVyZSBwcm9wZXJ0aWVzIGdvIHVuZGVyIChvbmUgb2YgdGhlIGFib3ZlKQoKICAvLyBwYXJzZSBsaW5lcyB3ZSB1bmRlcnN0YW5kCiAgc2RwLnNwbGl0KC8oXHJcbnxccnxcbikvKS5maWx0ZXIodmFsaWRMaW5lKS5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7CiAgICB2YXIgdHlwZSA9IGxbMF07CiAgICB2YXIgY29udGVudCA9IGwuc2xpY2UoMik7CiAgICBpZiAodHlwZSA9PT0gJ20nKSB7CiAgICAgIG1lZGlhLnB1c2goe3J0cDogW10sIGZtdHA6IFtdfSk7CiAgICAgIGxvY2F0aW9uID0gbWVkaWFbbWVkaWEubGVuZ3RoLTFdOyAvLyBwb2ludCBhdCBsYXRlc3QgbWVkaWEgbGluZQogICAgfQoKICAgIGZvciAodmFyIGogPSAwOyBqIDwgKGdyYW1tYXJbdHlwZV0gfHwgW10pLmxlbmd0aDsgaiArPSAxKSB7CiAgICAgIHZhciBvYmogPSBncmFtbWFyW3R5cGVdW2pdOwogICAgICBpZiAob2JqLnJlZy50ZXN0KGNvbnRlbnQpKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlUmVnKG9iaiwgbG9jYXRpb24sIGNvbnRlbnQpOwogICAgICB9CiAgICB9CiAgfSk7CgogIHNlc3Npb24ubWVkaWEgPSBtZWRpYTsgLy8gbGluayBpdCB1cAogIHJldHVybiBzZXNzaW9uOwp9OwoKdmFyIGZtdHBSZWR1Y2VyID0gZnVuY3Rpb24gKGFjYywgZXhwcikgewogIHZhciBzID0gZXhwci5zcGxpdCgvPSguKykvLCAyKTsKICBpZiAocy5sZW5ndGggPT09IDIpIHsKICAgIGFjY1tzWzBdXSA9IHRvSW50SWZJbnQoc1sxXSk7CiAgfQogIHJldHVybiBhY2M7Cn07CgpleHBvcnRzLnBhcnNlRm10cENvbmZpZyA9IGZ1bmN0aW9uIChzdHIpIHsKICByZXR1cm4gc3RyLnNwbGl0KC9cO1xzPy8pLnJlZHVjZShmbXRwUmVkdWNlciwge30pOwp9OwoKZXhwb3J0cy5wYXJzZVBheWxvYWRzID0gZnVuY3Rpb24gKHN0cikgewogIHJldHVybiBzdHIuc3BsaXQoJyAnKS5tYXAoTnVtYmVyKTsKfTsKCmV4cG9ydHMucGFyc2VSZW1vdGVDYW5kaWRhdGVzID0gZnVuY3Rpb24gKHN0cikgewogIHZhciBjYW5kaWRhdGVzID0gW107CiAgdmFyIHBhcnRzID0gc3RyLnNwbGl0KCcgJykubWFwKHRvSW50SWZJbnQpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDMpIHsKICAgIGNhbmRpZGF0ZXMucHVzaCh7CiAgICAgIGNvbXBvbmVudDogcGFydHNbaV0sCiAgICAgIGlwOiBwYXJ0c1tpICsgMV0sCiAgICAgIHBvcnQ6IHBhcnRzW2kgKyAyXQogICAgfSk7CiAgfQogIHJldHVybiBjYW5kaWRhdGVzOwp9OwoKfSx7Ii4vZ3JhbW1hciI6MX1dLDQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewp2YXIgZ3JhbW1hciA9IHJlcXVpcmUoJy4vZ3JhbW1hcicpOwoKLy8gY3VzdG9taXplZCB1dGlsLmZvcm1hdCAtIGRpc2NhcmRzIGV4Y2VzcyBhcmd1bWVudHMgYW5kIGNhbiB2b2lkIG1pZGRsZSBvbmVzCnZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZHYlXS9nOwp2YXIgZm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdFN0cikgewogIHZhciBpID0gMTsKICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICB2YXIgbGVuID0gYXJncy5sZW5ndGg7CiAgcmV0dXJuIGZvcm1hdFN0ci5yZXBsYWNlKGZvcm1hdFJlZ0V4cCwgZnVuY3Rpb24gKHgpIHsKICAgIGlmIChpID49IGxlbikgewogICAgICByZXR1cm4geDsgLy8gbWlzc2luZyBhcmd1bWVudAogICAgfQogICAgdmFyIGFyZyA9IGFyZ3NbaV07CiAgICBpICs9IDE7CiAgICBzd2l0Y2ggKHgpIHsKICAgICAgY2FzZSAnJSUnOgogICAgICAgIHJldHVybiAnJSc7CiAgICAgIGNhc2UgJyVzJzoKICAgICAgICByZXR1cm4gU3RyaW5nKGFyZyk7CiAgICAgIGNhc2UgJyVkJzoKICAgICAgICByZXR1cm4gTnVtYmVyKGFyZyk7CiAgICAgIGNhc2UgJyV2JzoKICAgICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSk7CiAgLy8gTkI6IHdlIGRpc2NhcmQgZXhjZXNzIGFyZ3VtZW50cyAtIHRoZXkgYXJlIHR5cGljYWxseSB1bmRlZmluZWQgZnJvbSBtYWtlTGluZQp9OwoKdmFyIG1ha2VMaW5lID0gZnVuY3Rpb24gKHR5cGUsIG9iaiwgbG9jYXRpb24pIHsKICB2YXIgc3RyID0gb2JqLmZvcm1hdCBpbnN0YW5jZW9mIEZ1bmN0aW9uID8KICAgIChvYmouZm9ybWF0KG9iai5wdXNoID8gbG9jYXRpb24gOiBsb2NhdGlvbltvYmoubmFtZV0pKSA6CiAgICBvYmouZm9ybWF0OwoKICB2YXIgYXJncyA9IFt0eXBlICsgJz0nICsgc3RyXTsKICBpZiAob2JqLm5hbWVzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5uYW1lcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICB2YXIgbiA9IG9iai5uYW1lc1tpXTsKICAgICAgaWYgKG9iai5uYW1lKSB7CiAgICAgICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lXVtuXSk7CiAgICAgIH0KICAgICAgZWxzZSB7IC8vIGZvciBtTGluZSBhbmQgcHVzaCBhdHRyaWJ1dGVzCiAgICAgICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lc1tpXV0pOwogICAgICB9CiAgICB9CiAgfQogIGVsc2UgewogICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lXSk7CiAgfQogIHJldHVybiBmb3JtYXQuYXBwbHkobnVsbCwgYXJncyk7Cn07CgovLyBSRkMgc3BlY2lmaWVkIG9yZGVyCi8vIFRPRE86IGV4dGVuZCB0aGlzIHdpdGggYWxsIHRoZSByZXN0CnZhciBkZWZhdWx0T3V0ZXJPcmRlciA9IFsKICAndicsICdvJywgJ3MnLCAnaScsCiAgJ3UnLCAnZScsICdwJywgJ2MnLAogICdiJywgJ3QnLCAncicsICd6JywgJ2EnCl07CnZhciBkZWZhdWx0SW5uZXJPcmRlciA9IFsnaScsICdjJywgJ2InLCAnYSddOwoKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlc3Npb24sIG9wdHMpIHsKICBvcHRzID0gb3B0cyB8fCB7fTsKICAvLyBlbnN1cmUgY2VydGFpbiBwcm9wZXJ0aWVzIGV4aXN0CiAgaWYgKHNlc3Npb24udmVyc2lvbiA9PSBudWxsKSB7CiAgICBzZXNzaW9uLnZlcnNpb24gPSAwOyAvLyAidj0wIiBtdXN0IGJlIHRoZXJlIChvbmx5IGRlZmluZWQgdmVyc2lvbiBhdG0pCiAgfQogIGlmIChzZXNzaW9uLm5hbWUgPT0gbnVsbCkgewogICAgc2Vzc2lvbi5uYW1lID0gIiAiOyAvLyAicz0gIiBtdXN0IGJlIHRoZXJlIGlmIG5vIG1lYW5pbmdmdWwgbmFtZSBzZXQKICB9CiAgc2Vzc2lvbi5tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChtTGluZSkgewogICAgaWYgKG1MaW5lLnBheWxvYWRzID09IG51bGwpIHsKICAgICAgbUxpbmUucGF5bG9hZHMgPSAiIjsKICAgIH0KICB9KTsKCiAgdmFyIG91dGVyT3JkZXIgPSBvcHRzLm91dGVyT3JkZXIgfHwgZGVmYXVsdE91dGVyT3JkZXI7CiAgdmFyIGlubmVyT3JkZXIgPSBvcHRzLmlubmVyT3JkZXIgfHwgZGVmYXVsdElubmVyT3JkZXI7CiAgdmFyIHNkcCA9IFtdOwoKICAvLyBsb29wIHRocm91Z2ggb3V0ZXJPcmRlciBmb3IgbWF0Y2hpbmcgcHJvcGVydGllcyBvbiBzZXNzaW9uCiAgb3V0ZXJPcmRlci5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICBncmFtbWFyW3R5cGVdLmZvckVhY2goZnVuY3Rpb24gKG9iaikgewogICAgICBpZiAob2JqLm5hbWUgaW4gc2Vzc2lvbiAmJiBzZXNzaW9uW29iai5uYW1lXSAhPSBudWxsKSB7CiAgICAgICAgc2RwLnB1c2gobWFrZUxpbmUodHlwZSwgb2JqLCBzZXNzaW9uKSk7CiAgICAgIH0KICAgICAgZWxzZSBpZiAob2JqLnB1c2ggaW4gc2Vzc2lvbiAmJiBzZXNzaW9uW29iai5wdXNoXSAhPSBudWxsKSB7CiAgICAgICAgc2Vzc2lvbltvYmoucHVzaF0uZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHNkcC5wdXNoKG1ha2VMaW5lKHR5cGUsIG9iaiwgZWwpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfSk7CgogIC8vIHRoZW4gZm9yIGVhY2ggbWVkaWEgbGluZSwgZm9sbG93IHRoZSBpbm5lck9yZGVyCiAgc2Vzc2lvbi5tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChtTGluZSkgewogICAgc2RwLnB1c2gobWFrZUxpbmUoJ20nLCBncmFtbWFyLm1bMF0sIG1MaW5lKSk7CgogICAgaW5uZXJPcmRlci5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICAgIGdyYW1tYXJbdHlwZV0uZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgaWYgKG9iai5uYW1lIGluIG1MaW5lICYmIG1MaW5lW29iai5uYW1lXSAhPSBudWxsKSB7CiAgICAgICAgICBzZHAucHVzaChtYWtlTGluZSh0eXBlLCBvYmosIG1MaW5lKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKG9iai5wdXNoIGluIG1MaW5lICYmIG1MaW5lW29iai5wdXNoXSAhPSBudWxsKSB7CiAgICAgICAgICBtTGluZVtvYmoucHVzaF0uZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgc2RwLnB1c2gobWFrZUxpbmUodHlwZSwgb2JqLCBlbCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0pOwoKICByZXR1cm4gc2RwLmpvaW4oJ1xyXG4nKSArICdcclxuJzsKfTsKCn0seyIuL2dyYW1tYXIiOjF9XSw1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gdmVyc2lvbjogMC41LjENCi8vIGRhdGU6IE1vbiBNYXIgMjAgMjAxNyAxNTozNjowNSBHTVQrMDAwMCAoV0VUKQ0KLy8gbGljZW5jZTogDQovKioNCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBDQoqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVg0KKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUNCiogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCioNCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7DQoqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQoqDQoqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQoqDQoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKi8NCg0KDQooZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkgew0KCWlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JykNCgkJbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7DQoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpDQoJCWRlZmluZSgiRGlzY292ZXJ5IiwgW10sIGZhY3RvcnkpOw0KCWVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKQ0KCQlleHBvcnRzWyJEaXNjb3ZlcnkiXSA9IGZhY3RvcnkoKTsNCgllbHNlDQoJCXJvb3RbIiJdID0gcm9vdFsiIl0gfHwge30sIHJvb3RbIiJdWyJEaXNjb3ZlcnkiXSA9IGZhY3RvcnkoKTsNCn0pKHRoaXMsIGZ1bmN0aW9uKCkgew0KcmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXANCi8qKioqKiovIAkvLyBUaGUgbW9kdWxlIGNhY2hlDQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24NCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUNCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pDQovKioqKioqLyAJCQlyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0czsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpDQovKioqKioqLyAJCXZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHsNCi8qKioqKiovIAkJCWk6IG1vZHVsZUlkLA0KLyoqKioqKi8gCQkJbDogZmFsc2UsDQovKioqKioqLyAJCQlleHBvcnRzOiB7fQ0KLyoqKioqKi8gCQl9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uDQovKioqKioqLyAJCW1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pOw0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZA0KLyoqKioqKi8gCQltb2R1bGUubCA9IHRydWU7DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZQ0KLyoqKioqKi8gCQlyZXR1cm4gbW9kdWxlLmV4cG9ydHM7DQovKioqKioqLyAJfQ0KLyoqKioqKi8NCi8qKioqKiovDQovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzOw0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQ0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7DQovKioqKioqLw0KLyoqKioqKi8gCS8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHQNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07DQovKioqKioqLw0KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cw0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikgew0KLyoqKioqKi8gCQlpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7DQovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgew0KLyoqKioqKi8gCQkJCWNvbmZpZ3VyYWJsZTogZmFsc2UsDQovKioqKioqLyAJCQkJZW51bWVyYWJsZTogdHJ1ZSwNCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcg0KLyoqKioqKi8gCQkJfSk7DQovKioqKioqLyAJCX0NCi8qKioqKiovIAl9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcw0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgew0KLyoqKioqKi8gCQl2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID8NCi8qKioqKiovIAkJCWZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6DQovKioqKioqLyAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9Ow0KLyoqKioqKi8gCQlfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7DQovKioqKioqLyAJCXJldHVybiBnZXR0ZXI7DQovKioqKioqLyAJfTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfXw0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOw0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHMNCi8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNjApOw0KLyoqKioqKi8gfSkNCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQovKioqKioqLyAoWw0KLyogMCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQp2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcyLjQuMCd9Ow0KaWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmDQoNCi8qKiovIH0pLA0KLyogMSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQovLyBodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcy9pc3N1ZXMvODYjaXNzdWVjb21tZW50LTExNTc1OTAyOA0KdmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoDQogID8gd2luZG93IDogdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgc2VsZi5NYXRoID09IE1hdGggPyBzZWxmIDogRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTsNCmlmKHR5cGVvZiBfX2cgPT0gJ251bWJlcicpX19nID0gZ2xvYmFsOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmDQoNCi8qKiovIH0pLA0KLyogMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBUaGFuaydzIElFOCBmb3IgaGlzIGZ1bm55IGRlZmluZVByb3BlcnR5DQptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpew0KICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Ow0KfSk7DQoNCi8qKiovIH0pLA0KLyogMyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgc3RvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzApKCd3a3MnKQ0KICAsIHVpZCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKQ0KICAsIFN5bWJvbCAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpLlN5bWJvbA0KICAsIFVTRV9TWU1CT0wgPSB0eXBlb2YgU3ltYm9sID09ICdmdW5jdGlvbic7DQoNCnZhciAkZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7DQogIHJldHVybiBzdG9yZVtuYW1lXSB8fCAoc3RvcmVbbmFtZV0gPQ0KICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7DQp9Ow0KDQokZXhwb3J0cy5zdG9yZSA9IHN0b3JlOw0KDQovKioqLyB9KSwNCi8qIDQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQ0KICAsIElFOF9ET01fREVGSU5FID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSkNCiAgLCB0b1ByaW1pdGl2ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpDQogICwgZFAgICAgICAgICAgICAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7DQoNCmV4cG9ydHMuZiA9IF9fd2VicGFja19yZXF1aXJlX18oMikgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShPLCBQLCBBdHRyaWJ1dGVzKXsNCiAgYW5PYmplY3QoTyk7DQogIFAgPSB0b1ByaW1pdGl2ZShQLCB0cnVlKTsNCiAgYW5PYmplY3QoQXR0cmlidXRlcyk7DQogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7DQogICAgcmV0dXJuIGRQKE8sIFAsIEF0dHJpYnV0ZXMpOw0KICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9DQogIGlmKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcyl0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIScpOw0KICBpZigndmFsdWUnIGluIEF0dHJpYnV0ZXMpT1tQXSA9IEF0dHJpYnV0ZXMudmFsdWU7DQogIHJldHVybiBPOw0KfTsNCg0KLyoqKi8gfSksDQovKiA1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYoIWlzT2JqZWN0KGl0KSl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhbiBvYmplY3QhJyk7DQogIHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIHR5cGVvZiBpdCA9PT0gJ29iamVjdCcgPyBpdCAhPT0gbnVsbCA6IHR5cGVvZiBpdCA9PT0gJ2Z1bmN0aW9uJzsNCn07DQoNCi8qKiovIH0pLA0KLyogNyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkNCiAgLCBjcmVhdGVEZXNjID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7DQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMikgPyBmdW5jdGlvbihvYmplY3QsIGtleSwgdmFsdWUpew0KICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOw0KfSA6IGZ1bmN0aW9uKG9iamVjdCwga2V5LCB2YWx1ZSl7DQogIG9iamVjdFtrZXldID0gdmFsdWU7DQogIHJldHVybiBvYmplY3Q7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7DQoNCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsNCiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsNCiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsNCiAgfQ0KfTsNCg0KLyoqKi8gfSksDQovKiA5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgY29yZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQ0KICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpDQogICwgaGlkZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KQ0KICAsIFBST1RPVFlQRSA9ICdwcm90b3R5cGUnOw0KDQp2YXIgJGV4cG9ydCA9IGZ1bmN0aW9uKHR5cGUsIG5hbWUsIHNvdXJjZSl7DQogIHZhciBJU19GT1JDRUQgPSB0eXBlICYgJGV4cG9ydC5GDQogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HDQogICAgLCBJU19TVEFUSUMgPSB0eXBlICYgJGV4cG9ydC5TDQogICAgLCBJU19QUk9UTyAgPSB0eXBlICYgJGV4cG9ydC5QDQogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CDQogICAgLCBJU19XUkFQICAgPSB0eXBlICYgJGV4cG9ydC5XDQogICAgLCBleHBvcnRzICAgPSBJU19HTE9CQUwgPyBjb3JlIDogY29yZVtuYW1lXSB8fCAoY29yZVtuYW1lXSA9IHt9KQ0KICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdDQogICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdDQogICAgLCBrZXksIG93biwgb3V0Ow0KICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsNCiAgZm9yKGtleSBpbiBzb3VyY2Upew0KICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZQ0KICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7DQogICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlOw0KICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkDQogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsNCiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXMNCiAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XQ0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0DQogICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbCkNCiAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeQ0KICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7DQogICAgICB2YXIgRiA9IGZ1bmN0aW9uKGEsIGIsIGMpew0KICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgQyl7DQogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpew0KICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gbmV3IEM7DQogICAgICAgICAgICBjYXNlIDE6IHJldHVybiBuZXcgQyhhKTsNCiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOw0KICAgICAgICAgIH0gcmV0dXJuIG5ldyBDKGEsIGIsIGMpOw0KICAgICAgICB9IHJldHVybiBDLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICB9Ow0KICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdOw0KICAgICAgcmV0dXJuIEY7DQogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzDQogICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0Ow0KICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5tZXRob2RzLiVOQU1FJQ0KICAgIGlmKElTX1BST1RPKXsNCiAgICAgIChleHBvcnRzLnZpcnR1YWwgfHwgKGV4cG9ydHMudmlydHVhbCA9IHt9KSlba2V5XSA9IG91dDsNCiAgICAgIC8vIGV4cG9ydCBwcm90byBtZXRob2RzIHRvIGNvcmUuJUNPTlNUUlVDVE9SJS5wcm90b3R5cGUuJU5BTUUlDQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsNCiAgICB9DQogIH0NCn07DQovLyB0eXBlIGJpdG1hcA0KJGV4cG9ydC5GID0gMTsgICAvLyBmb3JjZWQNCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsDQokZXhwb3J0LlMgPSA0OyAgIC8vIHN0YXRpYw0KJGV4cG9ydC5QID0gODsgICAvLyBwcm90bw0KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kDQokZXhwb3J0LlcgPSAzMjsgIC8vIHdyYXANCiRleHBvcnQuVSA9IDY0OyAgLy8gc2FmZQ0KJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIA0KbW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0Ow0KDQovKioqLyB9KSwNCi8qIDEwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOw0KDQp2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7DQoNCnZhciBfZGVmaW5lUHJvcGVydHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7DQogIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07DQogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7DQogICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7DQogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsNCiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOw0KICAgIH0NCiAgfQ0KDQogIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7DQogICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsNCiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsNCiAgICByZXR1cm4gQ29uc3RydWN0b3I7DQogIH07DQp9KCk7DQoNCi8qKiovIH0pLA0KLyogMTEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihleGVjKXsNCiAgdHJ5IHsNCiAgICByZXR1cm4gISFleGVjKCk7DQogIH0gY2F0Y2goZSl7DQogICAgcmV0dXJuIHRydWU7DQogIH0NCn07DQoNCi8qKiovIH0pLA0KLyogMTIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KdmFyIGhhc093blByb3BlcnR5ID0ge30uaGFzT3duUHJvcGVydHk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCBrZXkpew0KICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTMgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gdG8gaW5kZXhlZCBvYmplY3QsIHRvT2JqZWN0IHdpdGggZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBzdHJpbmdzDQp2YXIgSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpDQogICwgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHJldHVybiBJT2JqZWN0KGRlZmluZWQoaXQpKTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nDQp2YXIgYUZ1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpew0KICBhRnVuY3Rpb24oZm4pOw0KICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuOw0KICBzd2l0Y2gobGVuZ3RoKXsNCiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXsNCiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpOw0KICAgIH07DQogICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7DQogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTsNCiAgICB9Ow0KICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpew0KICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7DQogICAgfTsNCiAgfQ0KICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7DQogICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7DQogIH07DQp9Ow0KDQovKioqLyB9KSwNCi8qIDE1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYml0bWFwLCB2YWx1ZSl7DQogIHJldHVybiB7DQogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLA0KICAgIGNvbmZpZ3VyYWJsZTogIShiaXRtYXAgJiAyKSwNCiAgICB3cml0YWJsZSAgICA6ICEoYml0bWFwICYgNCksDQogICAgdmFsdWUgICAgICAgOiB2YWx1ZQ0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiAxNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHt9Ow0KDQovKioqLyB9KSwNCi8qIDE3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNikNCiAgLCBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQNCiAgLy8gaW4gb2xkIElFIHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50IGlzICdvYmplY3QnDQogICwgaXMgPSBpc09iamVjdChkb2N1bWVudCkgJiYgaXNPYmplY3QoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIGlzID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpdCkgOiB7fTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gMTkuMS4yLjE0IC8gMTUuMi4zLjE0IE9iamVjdC5rZXlzKE8pDQp2YXIgJGtleXMgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KQ0KICAsIGVudW1CdWdLZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7DQoNCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKXsNCiAgcmV0dXJuICRrZXlzKE8sIGVudW1CdWdLZXlzKTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7DQogIHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogMjAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KdmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gdG9TdHJpbmcuY2FsbChpdCkuc2xpY2UoOCwgLTEpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyMSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkNCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7DQovLyBpbnN0ZWFkIG9mIHRoZSBFUzYgc3BlYyB2ZXJzaW9uLCB3ZSBkaWRuJ3QgaW1wbGVtZW50IEBAdG9QcmltaXRpdmUgY2FzZQ0KLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIFMpew0KICBpZighaXNPYmplY3QoaXQpKXJldHVybiBpdDsNCiAgdmFyIGZuLCB2YWw7DQogIGlmKFMgJiYgdHlwZW9mIChmbiA9IGl0LnRvU3RyaW5nKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsNCiAgaWYodHlwZW9mIChmbiA9IGl0LnZhbHVlT2YpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOw0KICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOw0KICB0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAyMiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgZGVmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mDQogICwgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikNCiAgLCBUQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCd0b1N0cmluZ1RhZycpOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpew0KICBpZihpdCAmJiAhaGFzKGl0ID0gc3RhdCA/IGl0IDogaXQucHJvdG90eXBlLCBUQUcpKWRlZihpdCwgVEFHLCB7Y29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogdGFnfSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDIzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCnZhciBpZCA9IDANCiAgLCBweCA9IE1hdGgucmFuZG9tKCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7DQogIHJldHVybiAnU3ltYm9sKCcuY29uY2F0KGtleSA9PT0gdW5kZWZpbmVkID8gJycgOiBrZXksICcpXycsICgrK2lkICsgcHgpLnRvU3RyaW5nKDM2KSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDI0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYoaXQgPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIgKyBpdCk7DQogIHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogMjUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygyKSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsNCiAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KSgnZGl2JyksICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7DQp9KTsNCg0KLyoqKi8gfSksDQovKiAyNiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgew0KDQptb2R1bGUuZXhwb3J0cyA9IHRydWU7DQoNCi8qKiovIH0pLA0KLyogMjcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIHNoYXJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzApKCdrZXlzJykNCiAgLCB1aWQgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXsNCiAgcmV0dXJuIHNoYXJlZFtrZXldIHx8IChzaGFyZWRba2V5XSA9IHVpZChrZXkpKTsNCn07DQoNCi8qKiovIH0pLA0KLyogMjggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KLy8gNy4xLjQgVG9JbnRlZ2VyDQp2YXIgY2VpbCAgPSBNYXRoLmNlaWwNCiAgLCBmbG9vciA9IE1hdGguZmxvb3I7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIGlzTmFOKGl0ID0gK2l0KSA/IDAgOiAoaXQgPiAwID8gZmxvb3IgOiBjZWlsKShpdCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDI5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCi8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXMNCm1vZHVsZS5leHBvcnRzID0gKA0KICAnY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mJw0KKS5zcGxpdCgnLCcpOw0KDQovKioqLyB9KSwNCi8qIDMwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgU0hBUkVEID0gJ19fY29yZS1qc19zaGFyZWRfXycNCiAgLCBzdG9yZSAgPSBnbG9iYWxbU0hBUkVEXSB8fCAoZ2xvYmFsW1NIQVJFRF0gPSB7fSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7DQogIHJldHVybiBzdG9yZVtrZXldIHx8IChzdG9yZVtrZXldID0ge30pOw0KfTsNCg0KLyoqKi8gfSksDQovKiAzMSAqLywNCi8qIDMyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDcuMS4xMyBUb09iamVjdChhcmd1bWVudCkNCnZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIE9iamVjdChkZWZpbmVkKGl0KSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDMzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMzYpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogMzQgKi8sDQovKiAzNSAqLywNCi8qIDM2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCl9fd2VicGFja19yZXF1aXJlX18oMzgpOw0KdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoaXQsIGtleSwgZGVzYyl7DQogIHJldHVybiAkT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2MpOw0KfTsNCg0KLyoqKi8gfSksDQovKiAzNyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkNCnZhciBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCBkUHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpDQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KQ0KICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykoJ0lFX1BST1RPJykNCiAgLCBFbXB0eSAgICAgICA9IGZ1bmN0aW9uKCl7IC8qIGVtcHR5ICovIH0NCiAgLCBQUk9UT1RZUEUgICA9ICdwcm90b3R5cGUnOw0KDQovLyBDcmVhdGUgb2JqZWN0IHdpdGggZmFrZSBgbnVsbGAgcHJvdG90eXBlOiB1c2UgaWZyYW1lIE9iamVjdCB3aXRoIGNsZWFyZWQgcHJvdG90eXBlDQp2YXIgY3JlYXRlRGljdCA9IGZ1bmN0aW9uKCl7DQogIC8vIFRocmFzaCwgd2FzdGUgYW5kIHNvZG9teTogSUUgR0MgYnVnDQogIHZhciBpZnJhbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KSgnaWZyYW1lJykNCiAgICAsIGkgICAgICA9IGVudW1CdWdLZXlzLmxlbmd0aA0KICAgICwgbHQgICAgID0gJzwnDQogICAgLCBndCAgICAgPSAnPicNCiAgICAsIGlmcmFtZURvY3VtZW50Ow0KICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgX193ZWJwYWNrX3JlcXVpcmVfXyg0MikuYXBwZW5kQ2hpbGQoaWZyYW1lKTsNCiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybA0KICAvLyBjcmVhdGVEaWN0ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuT2JqZWN0Ow0KICAvLyBodG1sLnJlbW92ZUNoaWxkKGlmcmFtZSk7DQogIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7DQogIGlmcmFtZURvY3VtZW50Lm9wZW4oKTsNCiAgaWZyYW1lRG9jdW1lbnQud3JpdGUobHQgKyAnc2NyaXB0JyArIGd0ICsgJ2RvY3VtZW50LkY9T2JqZWN0JyArIGx0ICsgJy9zY3JpcHQnICsgZ3QpOw0KICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpOw0KICBjcmVhdGVEaWN0ID0gaWZyYW1lRG9jdW1lbnQuRjsNCiAgd2hpbGUoaS0tKWRlbGV0ZSBjcmVhdGVEaWN0W1BST1RPVFlQRV1bZW51bUJ1Z0tleXNbaV1dOw0KICByZXR1cm4gY3JlYXRlRGljdCgpOw0KfTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKXsNCiAgdmFyIHJlc3VsdDsNCiAgaWYoTyAhPT0gbnVsbCl7DQogICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pOw0KICAgIHJlc3VsdCA9IG5ldyBFbXB0eTsNCiAgICBFbXB0eVtQUk9UT1RZUEVdID0gbnVsbDsNCiAgICAvLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbA0KICAgIHJlc3VsdFtJRV9QUk9UT10gPSBPOw0KICB9IGVsc2UgcmVzdWx0ID0gY3JlYXRlRGljdCgpOw0KICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZFBzKHJlc3VsdCwgUHJvcGVydGllcyk7DQp9Ow0KDQoNCi8qKiovIH0pLA0KLyogMzggKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOw0KLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIV9fd2VicGFja19yZXF1aXJlX18oMiksICdPYmplY3QnLCB7ZGVmaW5lUHJvcGVydHk6IF9fd2VicGFja19yZXF1aXJlX18oNCkuZn0pOw0KDQovKioqLyB9KSwNCi8qIDM5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikNCiAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOSkNCiAgLCByZWRlZmluZSAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpDQogICwgaGlkZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpDQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIEl0ZXJhdG9ycyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikNCiAgLCAkaXRlckNyZWF0ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpDQogICwgc2V0VG9TdHJpbmdUYWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKQ0KICAsIGdldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MykNCiAgLCBJVEVSQVRPUiAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJykNCiAgLCBCVUdHWSAgICAgICAgICA9ICEoW10ua2V5cyAmJiAnbmV4dCcgaW4gW10ua2V5cygpKSAvLyBTYWZhcmkgaGFzIGJ1Z2d5IGl0ZXJhdG9ycyB3L28gYG5leHRgDQogICwgRkZfSVRFUkFUT1IgICAgPSAnQEBpdGVyYXRvcicNCiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJw0KICAsIFZBTFVFUyAgICAgICAgID0gJ3ZhbHVlcyc7DQoNCnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oQmFzZSwgTkFNRSwgQ29uc3RydWN0b3IsIG5leHQsIERFRkFVTFQsIElTX1NFVCwgRk9SQ0VEKXsNCiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpOw0KICB2YXIgZ2V0TWV0aG9kID0gZnVuY3Rpb24oa2luZCl7DQogICAgaWYoIUJVR0dZICYmIGtpbmQgaW4gcHJvdG8pcmV0dXJuIHByb3RvW2tpbmRdOw0KICAgIHN3aXRjaChraW5kKXsNCiAgICAgIGNhc2UgS0VZUzogcmV0dXJuIGZ1bmN0aW9uIGtleXMoKXsgcmV0dXJuIG5ldyBDb25zdHJ1Y3Rvcih0aGlzLCBraW5kKTsgfTsNCiAgICAgIGNhc2UgVkFMVUVTOiByZXR1cm4gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiBuZXcgQ29uc3RydWN0b3IodGhpcywga2luZCk7IH07DQogICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9Ow0KICB9Ow0KICB2YXIgVEFHICAgICAgICA9IE5BTUUgKyAnIEl0ZXJhdG9yJw0KICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTDQogICAgLCBWQUxVRVNfQlVHID0gZmFsc2UNCiAgICAsIHByb3RvICAgICAgPSBCYXNlLnByb3RvdHlwZQ0KICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXQ0KICAgICwgJGRlZmF1bHQgICA9ICRuYXRpdmUgfHwgZ2V0TWV0aG9kKERFRkFVTFQpDQogICAgLCAkZW50cmllcyAgID0gREVGQVVMVCA/ICFERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoJ2VudHJpZXMnKSA6IHVuZGVmaW5lZA0KICAgICwgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmUNCiAgICAsIG1ldGhvZHMsIGtleSwgSXRlcmF0b3JQcm90b3R5cGU7DQogIC8vIEZpeCBuYXRpdmUNCiAgaWYoJGFueU5hdGl2ZSl7DQogICAgSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90b3R5cGVPZigkYW55TmF0aXZlLmNhbGwobmV3IEJhc2UpKTsNCiAgICBpZihJdGVyYXRvclByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSl7DQogICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzDQogICAgICBzZXRUb1N0cmluZ1RhZyhJdGVyYXRvclByb3RvdHlwZSwgVEFHLCB0cnVlKTsNCiAgICAgIC8vIGZpeCBmb3Igc29tZSBvbGQgZW5naW5lcw0KICAgICAgaWYoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTsNCiAgICB9DQogIH0NCiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRg0KICBpZihERUZfVkFMVUVTICYmICRuYXRpdmUgJiYgJG5hdGl2ZS5uYW1lICE9PSBWQUxVRVMpew0KICAgIFZBTFVFU19CVUcgPSB0cnVlOw0KICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07DQogIH0NCiAgLy8gRGVmaW5lIGl0ZXJhdG9yDQogIGlmKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKXsNCiAgICBoaWRlKHByb3RvLCBJVEVSQVRPUiwgJGRlZmF1bHQpOw0KICB9DQogIC8vIFBsdWcgZm9yIGxpYnJhcnkNCiAgSXRlcmF0b3JzW05BTUVdID0gJGRlZmF1bHQ7DQogIEl0ZXJhdG9yc1tUQUddICA9IHJldHVyblRoaXM7DQogIGlmKERFRkFVTFQpew0KICAgIG1ldGhvZHMgPSB7DQogICAgICB2YWx1ZXM6ICBERUZfVkFMVUVTID8gJGRlZmF1bHQgOiBnZXRNZXRob2QoVkFMVUVTKSwNCiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSwNCiAgICAgIGVudHJpZXM6ICRlbnRyaWVzDQogICAgfTsNCiAgICBpZihGT1JDRUQpZm9yKGtleSBpbiBtZXRob2RzKXsNCiAgICAgIGlmKCEoa2V5IGluIHByb3RvKSlyZWRlZmluZShwcm90bywga2V5LCBtZXRob2RzW2tleV0pOw0KICAgIH0gZWxzZSAkZXhwb3J0KCRleHBvcnQuUCArICRleHBvcnQuRiAqIChCVUdHWSB8fCBWQUxVRVNfQlVHKSwgTkFNRSwgbWV0aG9kcyk7DQogIH0NCiAgcmV0dXJuIG1ldGhvZHM7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDQwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNTMpLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNDEgKi8sDQovKiA0MiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Ow0KDQovKioqLyB9KSwNCi8qIDQzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMi45IC8gMTUuMi4zLjIgT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pDQp2YXIgaGFzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQ0KICAsIHRvT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikNCiAgLCBJRV9QUk9UTyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpKCdJRV9QUk9UTycpDQogICwgT2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlOw0KDQptb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbihPKXsNCiAgTyA9IHRvT2JqZWN0KE8pOw0KICBpZihoYXMoTywgSUVfUFJPVE8pKXJldHVybiBPW0lFX1BST1RPXTsNCiAgaWYodHlwZW9mIE8uY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBPIGluc3RhbmNlb2YgTy5jb25zdHJ1Y3Rvcil7DQogICAgcmV0dXJuIE8uY29uc3RydWN0b3IucHJvdG90eXBlOw0KICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsOw0KfTsNCg0KLyoqKi8gfSksDQovKiA0NCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgaGFzICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikNCiAgLCB0b0lPYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQ0KICAsIGFycmF5SW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpKGZhbHNlKQ0KICAsIElFX1BST1RPICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpKCdJRV9QUk9UTycpOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZXMpew0KICB2YXIgTyAgICAgID0gdG9JT2JqZWN0KG9iamVjdCkNCiAgICAsIGkgICAgICA9IDANCiAgICAsIHJlc3VsdCA9IFtdDQogICAgLCBrZXk7DQogIGZvcihrZXkgaW4gTylpZihrZXkgIT0gSUVfUFJPVE8paGFzKE8sIGtleSkgJiYgcmVzdWx0LnB1c2goa2V5KTsNCiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5cw0KICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKWlmKGhhcyhPLCBrZXkgPSBuYW1lc1tpKytdKSl7DQogICAgfmFycmF5SW5kZXhPZihyZXN1bHQsIGtleSkgfHwgcmVzdWx0LnB1c2goa2V5KTsNCiAgfQ0KICByZXR1cm4gcmVzdWx0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA0NSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBtb3N0IE9iamVjdCBtZXRob2RzIGJ5IEVTNiBzaG91bGQgYWNjZXB0IHByaW1pdGl2ZXMNCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQ0KICAsIGNvcmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApDQogICwgZmFpbHMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGV4ZWMpew0KICB2YXIgZm4gID0gKGNvcmUuT2JqZWN0IHx8IHt9KVtLRVldIHx8IE9iamVjdFtLRVldDQogICAgLCBleHAgPSB7fTsNCiAgZXhwW0tFWV0gPSBleGVjKGZuKTsNCiAgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiBmYWlscyhmdW5jdGlvbigpeyBmbigxKTsgfSksICdPYmplY3QnLCBleHApOw0KfTsNCg0KLyoqKi8gfSksDQovKiA0NiAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7DQoNCi8qKiovIH0pLA0KLyogNDcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gNy4xLjE1IFRvTGVuZ3RoDQp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkNCiAgLCBtaW4gICAgICAgPSBNYXRoLm1pbjsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpew0KICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MQ0KfTsNCg0KLyoqKi8gfSksDQovKiA0OCAqLywNCi8qIDQ5ICovLA0KLyogNTAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgJGF0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpKHRydWUpOw0KDQovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KShTdHJpbmcsICdTdHJpbmcnLCBmdW5jdGlvbihpdGVyYXRlZCl7DQogIHRoaXMuX3QgPSBTdHJpbmcoaXRlcmF0ZWQpOyAvLyB0YXJnZXQNCiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgNCi8vIDIxLjEuNS4yLjEgJVN0cmluZ0l0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkNCn0sIGZ1bmN0aW9uKCl7DQogIHZhciBPICAgICA9IHRoaXMuX3QNCiAgICAsIGluZGV4ID0gdGhpcy5faQ0KICAgICwgcG9pbnQ7DQogIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07DQogIHBvaW50ID0gJGF0KE8sIGluZGV4KTsNCiAgdGhpcy5faSArPSBwb2ludC5sZW5ndGg7DQogIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07DQp9KTsNCg0KLyoqKi8gfSksDQovKiA1MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTsNCnZhciBnbG9iYWwgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGhpZGUgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpDQogICwgSXRlcmF0b3JzICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpDQogICwgVE9fU1RSSU5HX1RBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ3RvU3RyaW5nVGFnJyk7DQoNCmZvcih2YXIgY29sbGVjdGlvbnMgPSBbJ05vZGVMaXN0JywgJ0RPTVRva2VuTGlzdCcsICdNZWRpYUxpc3QnLCAnU3R5bGVTaGVldExpc3QnLCAnQ1NTUnVsZUxpc3QnXSwgaSA9IDA7IGkgPCA1OyBpKyspew0KICB2YXIgTkFNRSAgICAgICA9IGNvbGxlY3Rpb25zW2ldDQogICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdDQogICAgLCBwcm90byAgICAgID0gQ29sbGVjdGlvbiAmJiBDb2xsZWN0aW9uLnByb3RvdHlwZTsNCiAgaWYocHJvdG8gJiYgIXByb3RvW1RPX1NUUklOR19UQUddKWhpZGUocHJvdG8sIFRPX1NUUklOR19UQUcsIE5BTUUpOw0KICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7DQp9DQoNCi8qKiovIH0pLA0KLyogNTIgKi8sDQovKiA1MyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgY29yZSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApDQogICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7DQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMNCiAgcmV0dXJuICRKU09OLnN0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJndW1lbnRzKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNTQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsNCg0KDQoNCi8qKiovIH0pLA0KLyogNTUgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkNCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKQ0KICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ3RvU3RyaW5nVGFnJykNCiAgLy8gRVMzIHdyb25nIGhlcmUNCiAgLCBBUkcgPSBjb2YoZnVuY3Rpb24oKXsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA9PSAnQXJndW1lbnRzJzsNCg0KLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3INCnZhciB0cnlHZXQgPSBmdW5jdGlvbihpdCwga2V5KXsNCiAgdHJ5IHsNCiAgICByZXR1cm4gaXRba2V5XTsNCiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQ0KfTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7DQogIHZhciBPLCBULCBCOw0KICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCcNCiAgICAvLyBAQHRvU3RyaW5nVGFnIGNhc2UNCiAgICA6IHR5cGVvZiAoVCA9IHRyeUdldChPID0gT2JqZWN0KGl0KSwgVEFHKSkgPT0gJ3N0cmluZycgPyBUDQogICAgLy8gYnVpbHRpblRhZyBjYXNlDQogICAgOiBBUkcgPyBjb2YoTykNCiAgICAvLyBFUzMgYXJndW1lbnRzIGZhbGxiYWNrDQogICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDU2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIGZhbGxiYWNrIGZvciBub24tYXJyYXktbGlrZSBFUzMgYW5kIG5vbi1lbnVtZXJhYmxlIG9sZCBWOCBzdHJpbmdzDQp2YXIgY29mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7DQptb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpew0KICByZXR1cm4gY29mKGl0KSA9PSAnU3RyaW5nJyA/IGl0LnNwbGl0KCcnKSA6IE9iamVjdChpdCk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDU3ICovLA0KLyogNTggKi8sDQovKiA1OSAqLywNCi8qIDYwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfTsNCg0KLyoqKi8gfSksDQovKiA2MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mDQovLyB0cnVlICAtPiBBcnJheSNpbmNsdWRlcw0KdmFyIHRvSU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpDQogICwgdG9MZW5ndGggID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykNCiAgLCB0b0luZGV4ICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oSVNfSU5DTFVERVMpew0KICByZXR1cm4gZnVuY3Rpb24oJHRoaXMsIGVsLCBmcm9tSW5kZXgpew0KICAgIHZhciBPICAgICAgPSB0b0lPYmplY3QoJHRoaXMpDQogICAgICAsIGxlbmd0aCA9IHRvTGVuZ3RoKE8ubGVuZ3RoKQ0KICAgICAgLCBpbmRleCAgPSB0b0luZGV4KGZyb21JbmRleCwgbGVuZ3RoKQ0KICAgICAgLCB2YWx1ZTsNCiAgICAvLyBBcnJheSNpbmNsdWRlcyB1c2VzIFNhbWVWYWx1ZVplcm8gZXF1YWxpdHkgYWxnb3JpdGhtDQogICAgaWYoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpd2hpbGUobGVuZ3RoID4gaW5kZXgpew0KICAgICAgdmFsdWUgPSBPW2luZGV4KytdOw0KICAgICAgaWYodmFsdWUgIT0gdmFsdWUpcmV0dXJuIHRydWU7DQogICAgLy8gQXJyYXkjdG9JbmRleCBpZ25vcmVzIGhvbGVzLCBBcnJheSNpbmNsdWRlcyAtIG5vdA0KICAgIH0gZWxzZSBmb3IoO2xlbmd0aCA+IGluZGV4OyBpbmRleCsrKWlmKElTX0lOQ0xVREVTIHx8IGluZGV4IGluIE8pew0KICAgICAgaWYoT1tpbmRleF0gPT09IGVsKXJldHVybiBJU19JTkNMVURFUyB8fCBpbmRleCB8fCAwOw0KICAgIH0gcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTsNCiAgfTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgY3JlYXRlICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KQ0KICAsIGRlc2NyaXB0b3IgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSkNCiAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpDQogICwgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTsNCg0KLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKCkNCl9fd2VicGFja19yZXF1aXJlX18oNykoSXRlcmF0b3JQcm90b3R5cGUsIF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJyksIGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzOyB9KTsNCg0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCl7DQogIENvbnN0cnVjdG9yLnByb3RvdHlwZSA9IGNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSwge25leHQ6IGRlc2NyaXB0b3IoMSwgbmV4dCl9KTsNCiAgc2V0VG9TdHJpbmdUYWcoQ29uc3RydWN0b3IsIE5BTUUgKyAnIEl0ZXJhdG9yJyk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDYzICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZG9uZSwgdmFsdWUpew0KICByZXR1cm4ge3ZhbHVlOiB2YWx1ZSwgZG9uZTogISFkb25lfTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjQgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIGRQICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQ0KICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQ0KICAsIGdldEtleXMgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7DQoNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKXsNCiAgYW5PYmplY3QoTyk7DQogIHZhciBrZXlzICAgPSBnZXRLZXlzKFByb3BlcnRpZXMpDQogICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aA0KICAgICwgaSA9IDANCiAgICAsIFA7DQogIHdoaWxlKGxlbmd0aCA+IGkpZFAuZihPLCBQID0ga2V5c1tpKytdLCBQcm9wZXJ0aWVzW1BdKTsNCiAgcmV0dXJuIE87DQp9Ow0KDQovKioqLyB9KSwNCi8qIDY1ICovLA0KLyogNjYgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpDQogICwgZGVmaW5lZCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7DQovLyB0cnVlICAtPiBTdHJpbmcjYXQNCi8vIGZhbHNlIC0+IFN0cmluZyNjb2RlUG9pbnRBdA0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUT19TVFJJTkcpew0KICByZXR1cm4gZnVuY3Rpb24odGhhdCwgcG9zKXsNCiAgICB2YXIgcyA9IFN0cmluZyhkZWZpbmVkKHRoYXQpKQ0KICAgICAgLCBpID0gdG9JbnRlZ2VyKHBvcykNCiAgICAgICwgbCA9IHMubGVuZ3RoDQogICAgICAsIGEsIGI7DQogICAgaWYoaSA8IDAgfHwgaSA+PSBsKXJldHVybiBUT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDsNCiAgICBhID0gcy5jaGFyQ29kZUF0KGkpOw0KICAgIHJldHVybiBhIDwgMHhkODAwIHx8IGEgPiAweGRiZmYgfHwgaSArIDEgPT09IGwgfHwgKGIgPSBzLmNoYXJDb2RlQXQoaSArIDEpKSA8IDB4ZGMwMCB8fCBiID4gMHhkZmZmDQogICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYQ0KICAgICAgOiBUT19TVFJJTkcgPyBzLnNsaWNlKGksIGkgKyAyKSA6IChhIC0gMHhkODAwIDw8IDEwKSArIChiIC0gMHhkYzAwKSArIDB4MTAwMDA7DQogIH07DQp9Ow0KDQovKioqLyB9KSwNCi8qIDY3ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBjdHggICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQ0KICAsIGludm9rZSAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODgpDQogICwgaHRtbCAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MikNCiAgLCBjZWwgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQ0KICAsIGdsb2JhbCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkNCiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzcw0KICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGUNCiAgLCBjbGVhclRhc2sgICAgICAgICAgPSBnbG9iYWwuY2xlYXJJbW1lZGlhdGUNCiAgLCBNZXNzYWdlQ2hhbm5lbCAgICAgPSBnbG9iYWwuTWVzc2FnZUNoYW5uZWwNCiAgLCBjb3VudGVyICAgICAgICAgICAgPSAwDQogICwgcXVldWUgICAgICAgICAgICAgID0ge30NCiAgLCBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJw0KICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0Ow0KdmFyIHJ1biA9IGZ1bmN0aW9uKCl7DQogIHZhciBpZCA9ICt0aGlzOw0KICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpew0KICAgIHZhciBmbiA9IHF1ZXVlW2lkXTsNCiAgICBkZWxldGUgcXVldWVbaWRdOw0KICAgIGZuKCk7DQogIH0NCn07DQp2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7DQogIHJ1bi5jYWxsKGV2ZW50LmRhdGEpOw0KfTsNCi8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToNCmlmKCFzZXRUYXNrIHx8ICFjbGVhclRhc2spew0KICBzZXRUYXNrID0gZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGZuKXsNCiAgICB2YXIgYXJncyA9IFtdLCBpID0gMTsNCiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOw0KICAgIHF1ZXVlWysrY291bnRlcl0gPSBmdW5jdGlvbigpew0KICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpOw0KICAgIH07DQogICAgZGVmZXIoY291bnRlcik7DQogICAgcmV0dXJuIGNvdW50ZXI7DQogIH07DQogIGNsZWFyVGFzayA9IGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGlkKXsNCiAgICBkZWxldGUgcXVldWVbaWRdOw0KICB9Ow0KICAvLyBOb2RlLmpzIDAuOC0NCiAgaWYoX193ZWJwYWNrX3JlcXVpcmVfXygyMCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXsNCiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsNCiAgICAgIHByb2Nlc3MubmV4dFRpY2soY3R4KHJ1biwgaWQsIDEpKTsNCiAgICB9Ow0KICAvLyBCcm93c2VycyB3aXRoIE1lc3NhZ2VDaGFubmVsLCBpbmNsdWRlcyBXZWJXb3JrZXJzDQogIH0gZWxzZSBpZihNZXNzYWdlQ2hhbm5lbCl7DQogICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDsNCiAgICBwb3J0ICAgID0gY2hhbm5lbC5wb3J0MjsNCiAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpc3RlbmVyOw0KICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpOw0KICAvLyBCcm93c2VycyB3aXRoIHBvc3RNZXNzYWdlLCBza2lwIFdlYldvcmtlcnMNCiAgLy8gSUU4IGhhcyBwb3N0TWVzc2FnZSwgYnV0IGl0J3Mgc3luYyAmIHR5cGVvZiBpdHMgcG9zdE1lc3NhZ2UgaXMgJ29iamVjdCcNCiAgfSBlbHNlIGlmKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyl7DQogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7DQogICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoaWQgKyAnJywgJyonKTsNCiAgICB9Ow0KICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIsIGZhbHNlKTsNCiAgLy8gSUU4LQ0KICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0Jykpew0KICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpew0KICAgICAgaHRtbC5hcHBlbmRDaGlsZChjZWwoJ3NjcmlwdCcpKVtPTlJFQURZU1RBVEVDSEFOR0VdID0gZnVuY3Rpb24oKXsNCiAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTsNCiAgICAgICAgcnVuLmNhbGwoaWQpOw0KICAgICAgfTsNCiAgICB9Ow0KICAvLyBSZXN0IG9sZCBicm93c2Vycw0KICB9IGVsc2Ugew0KICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpew0KICAgICAgc2V0VGltZW91dChjdHgocnVuLCBpZCwgMSksIDApOw0KICAgIH07DQogIH0NCn0NCm1vZHVsZS5leHBvcnRzID0gew0KICBzZXQ6ICAgc2V0VGFzaywNCiAgY2xlYXI6IGNsZWFyVGFzaw0KfTsNCg0KLyoqKi8gfSksDQovKiA2OCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkNCiAgLCBtYXggICAgICAgPSBNYXRoLm1heA0KICAsIG1pbiAgICAgICA9IE1hdGgubWluOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpbmRleCwgbGVuZ3RoKXsNCiAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpOw0KICByZXR1cm4gaW5kZXggPCAwID8gbWF4KGluZGV4ICsgbGVuZ3RoLCAwKSA6IG1pbihpbmRleCwgbGVuZ3RoKTsNCn07DQoNCi8qKiovIH0pLA0KLyogNjkgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQp2YXIgYWRkVG9VbnNjb3BhYmxlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjApDQogICwgc3RlcCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpDQogICwgSXRlcmF0b3JzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpDQogICwgdG9JT2JqZWN0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpOw0KDQovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpDQovLyAyMi4xLjMuMTMgQXJyYXkucHJvdG90eXBlLmtleXMoKQ0KLy8gMjIuMS4zLjI5IEFycmF5LnByb3RvdHlwZS52YWx1ZXMoKQ0KLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpDQptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpKEFycmF5LCAnQXJyYXknLCBmdW5jdGlvbihpdGVyYXRlZCwga2luZCl7DQogIHRoaXMuX3QgPSB0b0lPYmplY3QoaXRlcmF0ZWQpOyAvLyB0YXJnZXQNCiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgNCiAgdGhpcy5fayA9IGtpbmQ7ICAgICAgICAgICAgICAgIC8vIGtpbmQNCi8vIDIyLjEuNS4yLjEgJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKQ0KfSwgZnVuY3Rpb24oKXsNCiAgdmFyIE8gICAgID0gdGhpcy5fdA0KICAgICwga2luZCAgPSB0aGlzLl9rDQogICAgLCBpbmRleCA9IHRoaXMuX2krKzsNCiAgaWYoIU8gfHwgaW5kZXggPj0gTy5sZW5ndGgpew0KICAgIHRoaXMuX3QgPSB1bmRlZmluZWQ7DQogICAgcmV0dXJuIHN0ZXAoMSk7DQogIH0NCiAgaWYoa2luZCA9PSAna2V5cycgIClyZXR1cm4gc3RlcCgwLCBpbmRleCk7DQogIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pOw0KICByZXR1cm4gc3RlcCgwLCBbaW5kZXgsIE9baW5kZXhdXSk7DQp9LCAndmFsdWVzJyk7DQoNCi8vIGFyZ3VtZW50c0xpc3RbQEBpdGVyYXRvcl0gaXMgJUFycmF5UHJvdG9fdmFsdWVzJSAoOS40LjQuNiwgOS40LjQuNykNCkl0ZXJhdG9ycy5Bcmd1bWVudHMgPSBJdGVyYXRvcnMuQXJyYXk7DQoNCmFkZFRvVW5zY29wYWJsZXMoJ2tleXMnKTsNCmFkZFRvVW5zY29wYWJsZXMoJ3ZhbHVlcycpOw0KYWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpOw0KDQovKioqLyB9KSwNCi8qIDcwICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODApLCBfX2VzTW9kdWxlOiB0cnVlIH07DQoNCi8qKiovIH0pLA0KLyogNzEgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MiksIF9fZXNNb2R1bGU6IHRydWUgfTsNCg0KLyoqKi8gfSksDQovKiA3MiAqLywNCi8qIDczICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBjbGFzc29mICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KQ0KICAsIElURVJBVE9SICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJykNCiAgLCBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsNCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5nZXRJdGVyYXRvck1ldGhvZCA9IGZ1bmN0aW9uKGl0KXsNCiAgaWYoaXQgIT0gdW5kZWZpbmVkKXJldHVybiBpdFtJVEVSQVRPUl0NCiAgICB8fCBpdFsnQEBpdGVyYXRvciddDQogICAgfHwgSXRlcmF0b3JzW2NsYXNzb2YoaXQpXTsNCn07DQoNCi8qKiovIH0pLA0KLyogNzQgKi8sDQovKiA3NSAqLywNCi8qIDc2ICovLA0KLyogNzcgKi8sDQovKiA3OCAqLywNCi8qIDc5ICovLA0KLyogODAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5rZXlzOw0KDQovKioqLyB9KSwNCi8qIDgxICovLA0KLyogODIgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKTsNCl9fd2VicGFja19yZXF1aXJlX18oNTEpOw0KX193ZWJwYWNrX3JlcXVpcmVfXygxMDQpOw0KbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLlByb21pc2U7DQoNCi8qKiovIH0pLA0KLyogODMgKi8sDQovKiA4NCAqLywNCi8qIDg1ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCl7DQogIGlmKCEoaXQgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikgfHwgKGZvcmJpZGRlbkZpZWxkICE9PSB1bmRlZmluZWQgJiYgZm9yYmlkZGVuRmllbGQgaW4gaXQpKXsNCiAgICB0aHJvdyBUeXBlRXJyb3IobmFtZSArICc6IGluY29ycmVjdCBpbnZvY2F0aW9uIScpOw0KICB9IHJldHVybiBpdDsNCn07DQoNCi8qKiovIH0pLA0KLyogODYgKi8sDQovKiA4NyAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQp2YXIgY3R4ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQ0KICAsIGNhbGwgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MSkNCiAgLCBpc0FycmF5SXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oODkpDQogICwgYW5PYmplY3QgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpDQogICwgdG9MZW5ndGggICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KQ0KICAsIGdldEl0ZXJGbiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MykNCiAgLCBCUkVBSyAgICAgICA9IHt9DQogICwgUkVUVVJOICAgICAgPSB7fTsNCnZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYWJsZSwgZW50cmllcywgZm4sIHRoYXQsIElURVJBVE9SKXsNCiAgdmFyIGl0ZXJGbiA9IElURVJBVE9SID8gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXJhYmxlOyB9IDogZ2V0SXRlckZuKGl0ZXJhYmxlKQ0KICAgICwgZiAgICAgID0gY3R4KGZuLCB0aGF0LCBlbnRyaWVzID8gMiA6IDEpDQogICAgLCBpbmRleCAgPSAwDQogICAgLCBsZW5ndGgsIHN0ZXAsIGl0ZXJhdG9yLCByZXN1bHQ7DQogIGlmKHR5cGVvZiBpdGVyRm4gIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXRlcmFibGUgKyAnIGlzIG5vdCBpdGVyYWJsZSEnKTsNCiAgLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yDQogIGlmKGlzQXJyYXlJdGVyKGl0ZXJGbikpZm9yKGxlbmd0aCA9IHRvTGVuZ3RoKGl0ZXJhYmxlLmxlbmd0aCk7IGxlbmd0aCA+IGluZGV4OyBpbmRleCsrKXsNCiAgICByZXN1bHQgPSBlbnRyaWVzID8gZihhbk9iamVjdChzdGVwID0gaXRlcmFibGVbaW5kZXhdKVswXSwgc3RlcFsxXSkgOiBmKGl0ZXJhYmxlW2luZGV4XSk7DQogICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0Ow0KICB9IGVsc2UgZm9yKGl0ZXJhdG9yID0gaXRlckZuLmNhbGwoaXRlcmFibGUpOyAhKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmU7ICl7DQogICAgcmVzdWx0ID0gY2FsbChpdGVyYXRvciwgZiwgc3RlcC52YWx1ZSwgZW50cmllcyk7DQogICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0Ow0KICB9DQp9Ow0KZXhwb3J0cy5CUkVBSyAgPSBCUkVBSzsNCmV4cG9ydHMuUkVUVVJOID0gUkVUVVJOOw0KDQovKioqLyB9KSwNCi8qIDg4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7DQoNCi8vIGZhc3QgYXBwbHksIGh0dHA6Ly9qc3BlcmYubG5raXQuY29tL2Zhc3QtYXBwbHkvNQ0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgYXJncywgdGhhdCl7DQogIHZhciB1biA9IHRoYXQgPT09IHVuZGVmaW5lZDsNCiAgc3dpdGNoKGFyZ3MubGVuZ3RoKXsNCiAgICBjYXNlIDA6IHJldHVybiB1biA/IGZuKCkNCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCk7DQogICAgY2FzZSAxOiByZXR1cm4gdW4gPyBmbihhcmdzWzBdKQ0KICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdKTsNCiAgICBjYXNlIDI6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0pDQogICAgICAgICAgICAgICAgICAgICAgOiBmbi5jYWxsKHRoYXQsIGFyZ3NbMF0sIGFyZ3NbMV0pOw0KICAgIGNhc2UgMzogcmV0dXJuIHVuID8gZm4oYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSkNCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7DQogICAgY2FzZSA0OiByZXR1cm4gdW4gPyBmbihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKQ0KICAgICAgICAgICAgICAgICAgICAgIDogZm4uY2FsbCh0aGF0LCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTsNCiAgfSByZXR1cm4gICAgICAgICAgICAgIGZuLmFwcGx5KHRoYXQsIGFyZ3MpOw0KfTsNCg0KLyoqKi8gfSksDQovKiA4OSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBjaGVjayBvbiBkZWZhdWx0IEFycmF5IGl0ZXJhdG9yDQp2YXIgSXRlcmF0b3JzICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpDQogICwgSVRFUkFUT1IgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJykNCiAgLCBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsNCiAgcmV0dXJuIGl0ICE9PSB1bmRlZmluZWQgJiYgKEl0ZXJhdG9ycy5BcnJheSA9PT0gaXQgfHwgQXJyYXlQcm90b1tJVEVSQVRPUl0gPT09IGl0KTsNCn07DQoNCi8qKiovIH0pLA0KLyogOTAgKi8sDQovKiA5MSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQovLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yDQp2YXIgYW5PYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpOw0KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYXRvciwgZm4sIHZhbHVlLCBlbnRyaWVzKXsNCiAgdHJ5IHsNCiAgICByZXR1cm4gZW50cmllcyA/IGZuKGFuT2JqZWN0KHZhbHVlKVswXSwgdmFsdWVbMV0pIDogZm4odmFsdWUpOw0KICAvLyA3LjQuNiBJdGVyYXRvckNsb3NlKGl0ZXJhdG9yLCBjb21wbGV0aW9uKQ0KICB9IGNhdGNoKGUpew0KICAgIHZhciByZXQgPSBpdGVyYXRvclsncmV0dXJuJ107DQogICAgaWYocmV0ICE9PSB1bmRlZmluZWQpYW5PYmplY3QocmV0LmNhbGwoaXRlcmF0b3IpKTsNCiAgICB0aHJvdyBlOw0KICB9DQp9Ow0KDQovKioqLyB9KSwNCi8qIDkyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBJVEVSQVRPUiAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCdpdGVyYXRvcicpDQogICwgU0FGRV9DTE9TSU5HID0gZmFsc2U7DQoNCnRyeSB7DQogIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTsNCiAgcml0ZXJbJ3JldHVybiddID0gZnVuY3Rpb24oKXsgU0FGRV9DTE9TSU5HID0gdHJ1ZTsgfTsNCiAgQXJyYXkuZnJvbShyaXRlciwgZnVuY3Rpb24oKXsgdGhyb3cgMjsgfSk7DQp9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9DQoNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXhlYywgc2tpcENsb3Npbmcpew0KICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7DQogIHZhciBzYWZlID0gZmFsc2U7DQogIHRyeSB7DQogICAgdmFyIGFyciAgPSBbN10NCiAgICAgICwgaXRlciA9IGFycltJVEVSQVRPUl0oKTsNCiAgICBpdGVyLm5leHQgPSBmdW5jdGlvbigpeyByZXR1cm4ge2RvbmU6IHNhZmUgPSB0cnVlfTsgfTsNCiAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07DQogICAgZXhlYyhhcnIpOw0KICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9DQogIHJldHVybiBzYWZlOw0KfTsNCg0KLyoqKi8gfSksDQovKiA5MyAqLywNCi8qIDk0ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBnbG9iYWwgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpDQogICwgbWFjcm90YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0DQogICwgT2JzZXJ2ZXIgID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXINCiAgLCBwcm9jZXNzICAgPSBnbG9iYWwucHJvY2Vzcw0KICAsIFByb21pc2UgICA9IGdsb2JhbC5Qcm9taXNlDQogICwgaXNOb2RlICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7DQogIHZhciBoZWFkLCBsYXN0LCBub3RpZnk7DQoNCiAgdmFyIGZsdXNoID0gZnVuY3Rpb24oKXsNCiAgICB2YXIgcGFyZW50LCBmbjsNCiAgICBpZihpc05vZGUgJiYgKHBhcmVudCA9IHByb2Nlc3MuZG9tYWluKSlwYXJlbnQuZXhpdCgpOw0KICAgIHdoaWxlKGhlYWQpew0KICAgICAgZm4gICA9IGhlYWQuZm47DQogICAgICBoZWFkID0gaGVhZC5uZXh0Ow0KICAgICAgdHJ5IHsNCiAgICAgICAgZm4oKTsNCiAgICAgIH0gY2F0Y2goZSl7DQogICAgICAgIGlmKGhlYWQpbm90aWZ5KCk7DQogICAgICAgIGVsc2UgbGFzdCA9IHVuZGVmaW5lZDsNCiAgICAgICAgdGhyb3cgZTsNCiAgICAgIH0NCiAgICB9IGxhc3QgPSB1bmRlZmluZWQ7DQogICAgaWYocGFyZW50KXBhcmVudC5lbnRlcigpOw0KICB9Ow0KDQogIC8vIE5vZGUuanMNCiAgaWYoaXNOb2RlKXsNCiAgICBub3RpZnkgPSBmdW5jdGlvbigpew0KICAgICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7DQogICAgfTsNCiAgLy8gYnJvd3NlcnMgd2l0aCBNdXRhdGlvbk9ic2VydmVyDQogIH0gZWxzZSBpZihPYnNlcnZlcil7DQogICAgdmFyIHRvZ2dsZSA9IHRydWUNCiAgICAgICwgbm9kZSAgID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpOw0KICAgIG5ldyBPYnNlcnZlcihmbHVzaCkub2JzZXJ2ZShub2RlLCB7Y2hhcmFjdGVyRGF0YTogdHJ1ZX0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW5ldw0KICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7DQogICAgICBub2RlLmRhdGEgPSB0b2dnbGUgPSAhdG9nZ2xlOw0KICAgIH07DQogIC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlDQogIH0gZWxzZSBpZihQcm9taXNlICYmIFByb21pc2UucmVzb2x2ZSl7DQogICAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTsNCiAgICBub3RpZnkgPSBmdW5jdGlvbigpew0KICAgICAgcHJvbWlzZS50aGVuKGZsdXNoKTsNCiAgICB9Ow0KICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOg0KICAvLyAtIHNldEltbWVkaWF0ZQ0KICAvLyAtIE1lc3NhZ2VDaGFubmVsDQogIC8vIC0gd2luZG93LnBvc3RNZXNzYWcNCiAgLy8gLSBvbnJlYWR5c3RhdGVjaGFuZ2UNCiAgLy8gLSBzZXRUaW1lb3V0DQogIH0gZWxzZSB7DQogICAgbm90aWZ5ID0gZnVuY3Rpb24oKXsNCiAgICAgIC8vIHN0cmFuZ2UgSUUgKyB3ZWJwYWNrIGRldiBzZXJ2ZXIgYnVnIC0gdXNlIC5jYWxsKGdsb2JhbCkNCiAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpOw0KICAgIH07DQogIH0NCg0KICByZXR1cm4gZnVuY3Rpb24oZm4pew0KICAgIHZhciB0YXNrID0ge2ZuOiBmbiwgbmV4dDogdW5kZWZpbmVkfTsNCiAgICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7DQogICAgaWYoIWhlYWQpew0KICAgICAgaGVhZCA9IHRhc2s7DQogICAgICBub3RpZnkoKTsNCiAgICB9IGxhc3QgPSB0YXNrOw0KICB9Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA5NSAqLywNCi8qIDk2ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCnZhciBoaWRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMsIHNhZmUpew0KICBmb3IodmFyIGtleSBpbiBzcmMpew0KICAgIGlmKHNhZmUgJiYgdGFyZ2V0W2tleV0pdGFyZ2V0W2tleV0gPSBzcmNba2V5XTsNCiAgICBlbHNlIGhpZGUodGFyZ2V0LCBrZXksIHNyY1trZXldKTsNCiAgfSByZXR1cm4gdGFyZ2V0Ow0KfTsNCg0KLyoqKi8gfSksDQovKiA5NyAqLywNCi8qIDk4ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KdmFyIGdsb2JhbCAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQ0KICAsIGNvcmUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQ0KICAsIGRQICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KQ0KICAsIERFU0NSSVBUT1JTID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKQ0KICAsIFNQRUNJRVMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnc3BlY2llcycpOw0KDQptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEtFWSl7DQogIHZhciBDID0gdHlwZW9mIGNvcmVbS0VZXSA9PSAnZnVuY3Rpb24nID8gY29yZVtLRVldIDogZ2xvYmFsW0tFWV07DQogIGlmKERFU0NSSVBUT1JTICYmIEMgJiYgIUNbU1BFQ0lFU10pZFAuZihDLCBTUEVDSUVTLCB7DQogICAgY29uZmlndXJhYmxlOiB0cnVlLA0KICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0NCiAgfSk7DQp9Ow0KDQovKioqLyB9KSwNCi8qIDk5ICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDcuMy4yMCBTcGVjaWVzQ29uc3RydWN0b3IoTywgZGVmYXVsdENvbnN0cnVjdG9yKQ0KdmFyIGFuT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkNCiAgLCBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KQ0KICAsIFNQRUNJRVMgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ3NwZWNpZXMnKTsNCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTywgRCl7DQogIHZhciBDID0gYW5PYmplY3QoTykuY29uc3RydWN0b3IsIFM7DQogIHJldHVybiBDID09PSB1bmRlZmluZWQgfHwgKFMgPSBhbk9iamVjdChDKVtTUEVDSUVTXSkgPT0gdW5kZWZpbmVkID8gRCA6IGFGdW5jdGlvbihTKTsNCn07DQoNCi8qKiovIH0pLA0KLyogMTAwICovLA0KLyogMTAxICovLA0KLyogMTAyICovDQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCi8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKQ0KdmFyIHRvT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikNCiAgLCAka2V5cyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOw0KDQpfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KSgna2V5cycsIGZ1bmN0aW9uKCl7DQogIHJldHVybiBmdW5jdGlvbiBrZXlzKGl0KXsNCiAgICByZXR1cm4gJGtleXModG9PYmplY3QoaXQpKTsNCiAgfTsNCn0pOw0KDQovKioqLyB9KSwNCi8qIDEwMyAqLywNCi8qIDEwNCAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCnZhciBMSUJSQVJZICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KQ0KICAsIGdsb2JhbCAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkNCiAgLCBjdHggICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQ0KICAsIGNsYXNzb2YgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpDQogICwgJGV4cG9ydCAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQ0KICAsIGlzT2JqZWN0ICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikNCiAgLCBhRnVuY3Rpb24gICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KQ0KICAsIGFuSW5zdGFuY2UgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oODUpDQogICwgZm9yT2YgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NykNCiAgLCBzcGVjaWVzQ29uc3RydWN0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KQ0KICAsIHRhc2sgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpLnNldA0KICAsIG1pY3JvdGFzayAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTQpKCkNCiAgLCBQUk9NSVNFICAgICAgICAgICAgPSAnUHJvbWlzZScNCiAgLCBUeXBlRXJyb3IgICAgICAgICAgPSBnbG9iYWwuVHlwZUVycm9yDQogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MNCiAgLCAkUHJvbWlzZSAgICAgICAgICAgPSBnbG9iYWxbUFJPTUlTRV0NCiAgLCBwcm9jZXNzICAgICAgICAgICAgPSBnbG9iYWwucHJvY2Vzcw0KICAsIGlzTm9kZSAgICAgICAgICAgICA9IGNsYXNzb2YocHJvY2VzcykgPT0gJ3Byb2Nlc3MnDQogICwgZW1wdHkgICAgICAgICAgICAgID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfQ0KICAsIEludGVybmFsLCBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHksIFdyYXBwZXI7DQoNCnZhciBVU0VfTkFUSVZFID0gISFmdW5jdGlvbigpew0KICB0cnkgew0KICAgIC8vIGNvcnJlY3Qgc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydA0KICAgIHZhciBwcm9taXNlICAgICA9ICRQcm9taXNlLnJlc29sdmUoMSkNCiAgICAgICwgRmFrZVByb21pc2UgPSAocHJvbWlzZS5jb25zdHJ1Y3RvciA9IHt9KVtfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCdzcGVjaWVzJyldID0gZnVuY3Rpb24oZXhlYyl7IGV4ZWMoZW1wdHksIGVtcHR5KTsgfTsNCiAgICAvLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0DQogICAgcmV0dXJuIChpc05vZGUgfHwgdHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCA9PSAnZnVuY3Rpb24nKSAmJiBwcm9taXNlLnRoZW4oZW1wdHkpIGluc3RhbmNlb2YgRmFrZVByb21pc2U7DQogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0NCn0oKTsNCg0KLy8gaGVscGVycw0KdmFyIHNhbWVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGEsIGIpew0KICAvLyB3aXRoIGxpYnJhcnkgd3JhcHBlciBzcGVjaWFsIGNhc2UNCiAgcmV0dXJuIGEgPT09IGIgfHwgYSA9PT0gJFByb21pc2UgJiYgYiA9PT0gV3JhcHBlcjsNCn07DQp2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uKGl0KXsNCiAgdmFyIHRoZW47DQogIHJldHVybiBpc09iamVjdChpdCkgJiYgdHlwZW9mICh0aGVuID0gaXQudGhlbikgPT0gJ2Z1bmN0aW9uJyA/IHRoZW4gOiBmYWxzZTsNCn07DQp2YXIgbmV3UHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsNCiAgcmV0dXJuIHNhbWVDb25zdHJ1Y3RvcigkUHJvbWlzZSwgQykNCiAgICA/IG5ldyBQcm9taXNlQ2FwYWJpbGl0eShDKQ0KICAgIDogbmV3IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eShDKTsNCn07DQp2YXIgUHJvbWlzZUNhcGFiaWxpdHkgPSBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkgPSBmdW5jdGlvbihDKXsNCiAgdmFyIHJlc29sdmUsIHJlamVjdDsNCiAgdGhpcy5wcm9taXNlID0gbmV3IEMoZnVuY3Rpb24oJCRyZXNvbHZlLCAkJHJlamVjdCl7DQogICAgaWYocmVzb2x2ZSAhPT0gdW5kZWZpbmVkIHx8IHJlamVjdCAhPT0gdW5kZWZpbmVkKXRocm93IFR5cGVFcnJvcignQmFkIFByb21pc2UgY29uc3RydWN0b3InKTsNCiAgICByZXNvbHZlID0gJCRyZXNvbHZlOw0KICAgIHJlamVjdCAgPSAkJHJlamVjdDsNCiAgfSk7DQogIHRoaXMucmVzb2x2ZSA9IGFGdW5jdGlvbihyZXNvbHZlKTsNCiAgdGhpcy5yZWplY3QgID0gYUZ1bmN0aW9uKHJlamVjdCk7DQp9Ow0KdmFyIHBlcmZvcm0gPSBmdW5jdGlvbihleGVjKXsNCiAgdHJ5IHsNCiAgICBleGVjKCk7DQogIH0gY2F0Y2goZSl7DQogICAgcmV0dXJuIHtlcnJvcjogZX07DQogIH0NCn07DQp2YXIgbm90aWZ5ID0gZnVuY3Rpb24ocHJvbWlzZSwgaXNSZWplY3Qpew0KICBpZihwcm9taXNlLl9uKXJldHVybjsNCiAgcHJvbWlzZS5fbiA9IHRydWU7DQogIHZhciBjaGFpbiA9IHByb21pc2UuX2M7DQogIG1pY3JvdGFzayhmdW5jdGlvbigpew0KICAgIHZhciB2YWx1ZSA9IHByb21pc2UuX3YNCiAgICAgICwgb2sgICAgPSBwcm9taXNlLl9zID09IDENCiAgICAgICwgaSAgICAgPSAwOw0KICAgIHZhciBydW4gPSBmdW5jdGlvbihyZWFjdGlvbil7DQogICAgICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsDQogICAgICAgICwgcmVzb2x2ZSA9IHJlYWN0aW9uLnJlc29sdmUNCiAgICAgICAgLCByZWplY3QgID0gcmVhY3Rpb24ucmVqZWN0DQogICAgICAgICwgZG9tYWluICA9IHJlYWN0aW9uLmRvbWFpbg0KICAgICAgICAsIHJlc3VsdCwgdGhlbjsNCiAgICAgIHRyeSB7DQogICAgICAgIGlmKGhhbmRsZXIpew0KICAgICAgICAgIGlmKCFvayl7DQogICAgICAgICAgICBpZihwcm9taXNlLl9oID09IDIpb25IYW5kbGVVbmhhbmRsZWQocHJvbWlzZSk7DQogICAgICAgICAgICBwcm9taXNlLl9oID0gMTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYoaGFuZGxlciA9PT0gdHJ1ZSlyZXN1bHQgPSB2YWx1ZTsNCiAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGlmKGRvbWFpbilkb21haW4uZW50ZXIoKTsNCiAgICAgICAgICAgIHJlc3VsdCA9IGhhbmRsZXIodmFsdWUpOw0KICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5leGl0KCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmKHJlc3VsdCA9PT0gcmVhY3Rpb24ucHJvbWlzZSl7DQogICAgICAgICAgICByZWplY3QoVHlwZUVycm9yKCdQcm9taXNlLWNoYWluIGN5Y2xlJykpOw0KICAgICAgICAgIH0gZWxzZSBpZih0aGVuID0gaXNUaGVuYWJsZShyZXN1bHQpKXsNCiAgICAgICAgICAgIHRoZW4uY2FsbChyZXN1bHQsIHJlc29sdmUsIHJlamVjdCk7DQogICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTsNCiAgICAgICAgfSBlbHNlIHJlamVjdCh2YWx1ZSk7DQogICAgICB9IGNhdGNoKGUpew0KICAgICAgICByZWplY3QoZSk7DQogICAgICB9DQogICAgfTsNCiAgICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXJ1bihjaGFpbltpKytdKTsgLy8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2gNCiAgICBwcm9taXNlLl9jID0gW107DQogICAgcHJvbWlzZS5fbiA9IGZhbHNlOw0KICAgIGlmKGlzUmVqZWN0ICYmICFwcm9taXNlLl9oKW9uVW5oYW5kbGVkKHByb21pc2UpOw0KICB9KTsNCn07DQp2YXIgb25VbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsNCiAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsNCiAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92DQogICAgICAsIGFicnVwdCwgaGFuZGxlciwgY29uc29sZTsNCiAgICBpZihpc1VuaGFuZGxlZChwcm9taXNlKSl7DQogICAgICBhYnJ1cHQgPSBwZXJmb3JtKGZ1bmN0aW9uKCl7DQogICAgICAgIGlmKGlzTm9kZSl7DQogICAgICAgICAgcHJvY2Vzcy5lbWl0KCd1bmhhbmRsZWRSZWplY3Rpb24nLCB2YWx1ZSwgcHJvbWlzZSk7DQogICAgICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9udW5oYW5kbGVkcmVqZWN0aW9uKXsNCiAgICAgICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHZhbHVlfSk7DQogICAgICAgIH0gZWxzZSBpZigoY29uc29sZSA9IGdsb2JhbC5jb25zb2xlKSAmJiBjb25zb2xlLmVycm9yKXsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24nLCB2YWx1ZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgLy8gQnJvd3NlcnMgc2hvdWxkIG5vdCB0cmlnZ2VyIGByZWplY3Rpb25IYW5kbGVkYCBldmVudCBpZiBpdCB3YXMgaGFuZGxlZCBoZXJlLCBOb2RlSlMgLSBzaG91bGQNCiAgICAgIHByb21pc2UuX2ggPSBpc05vZGUgfHwgaXNVbmhhbmRsZWQocHJvbWlzZSkgPyAyIDogMTsNCiAgICB9IHByb21pc2UuX2EgPSB1bmRlZmluZWQ7DQogICAgaWYoYWJydXB0KXRocm93IGFicnVwdC5lcnJvcjsNCiAgfSk7DQp9Ow0KdmFyIGlzVW5oYW5kbGVkID0gZnVuY3Rpb24ocHJvbWlzZSl7DQogIGlmKHByb21pc2UuX2ggPT0gMSlyZXR1cm4gZmFsc2U7DQogIHZhciBjaGFpbiA9IHByb21pc2UuX2EgfHwgcHJvbWlzZS5fYw0KICAgICwgaSAgICAgPSAwDQogICAgLCByZWFjdGlvbjsNCiAgd2hpbGUoY2hhaW4ubGVuZ3RoID4gaSl7DQogICAgcmVhY3Rpb24gPSBjaGFpbltpKytdOw0KICAgIGlmKHJlYWN0aW9uLmZhaWwgfHwgIWlzVW5oYW5kbGVkKHJlYWN0aW9uLnByb21pc2UpKXJldHVybiBmYWxzZTsNCiAgfSByZXR1cm4gdHJ1ZTsNCn07DQp2YXIgb25IYW5kbGVVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsNCiAgdGFzay5jYWxsKGdsb2JhbCwgZnVuY3Rpb24oKXsNCiAgICB2YXIgaGFuZGxlcjsNCiAgICBpZihpc05vZGUpew0KICAgICAgcHJvY2Vzcy5lbWl0KCdyZWplY3Rpb25IYW5kbGVkJywgcHJvbWlzZSk7DQogICAgfSBlbHNlIGlmKGhhbmRsZXIgPSBnbG9iYWwub25yZWplY3Rpb25oYW5kbGVkKXsNCiAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogcHJvbWlzZS5fdn0pOw0KICAgIH0NCiAgfSk7DQp9Ow0KdmFyICRyZWplY3QgPSBmdW5jdGlvbih2YWx1ZSl7DQogIHZhciBwcm9taXNlID0gdGhpczsNCiAgaWYocHJvbWlzZS5fZClyZXR1cm47DQogIHByb21pc2UuX2QgPSB0cnVlOw0KICBwcm9taXNlID0gcHJvbWlzZS5fdyB8fCBwcm9taXNlOyAvLyB1bndyYXANCiAgcHJvbWlzZS5fdiA9IHZhbHVlOw0KICBwcm9taXNlLl9zID0gMjsNCiAgaWYoIXByb21pc2UuX2EpcHJvbWlzZS5fYSA9IHByb21pc2UuX2Muc2xpY2UoKTsNCiAgbm90aWZ5KHByb21pc2UsIHRydWUpOw0KfTsNCnZhciAkcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKXsNCiAgdmFyIHByb21pc2UgPSB0aGlzDQogICAgLCB0aGVuOw0KICBpZihwcm9taXNlLl9kKXJldHVybjsNCiAgcHJvbWlzZS5fZCA9IHRydWU7DQogIHByb21pc2UgPSBwcm9taXNlLl93IHx8IHByb21pc2U7IC8vIHVud3JhcA0KICB0cnkgew0KICAgIGlmKHByb21pc2UgPT09IHZhbHVlKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsNCiAgICBpZih0aGVuID0gaXNUaGVuYWJsZSh2YWx1ZSkpew0KICAgICAgbWljcm90YXNrKGZ1bmN0aW9uKCl7DQogICAgICAgIHZhciB3cmFwcGVyID0ge193OiBwcm9taXNlLCBfZDogZmFsc2V9OyAvLyB3cmFwDQogICAgICAgIHRyeSB7DQogICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBjdHgoJHJlc29sdmUsIHdyYXBwZXIsIDEpLCBjdHgoJHJlamVjdCwgd3JhcHBlciwgMSkpOw0KICAgICAgICB9IGNhdGNoKGUpew0KICAgICAgICAgICRyZWplY3QuY2FsbCh3cmFwcGVyLCBlKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSBlbHNlIHsNCiAgICAgIHByb21pc2UuX3YgPSB2YWx1ZTsNCiAgICAgIHByb21pc2UuX3MgPSAxOw0KICAgICAgbm90aWZ5KHByb21pc2UsIGZhbHNlKTsNCiAgICB9DQogIH0gY2F0Y2goZSl7DQogICAgJHJlamVjdC5jYWxsKHtfdzogcHJvbWlzZSwgX2Q6IGZhbHNlfSwgZSk7IC8vIHdyYXANCiAgfQ0KfTsNCg0KLy8gY29uc3RydWN0b3IgcG9seWZpbGwNCmlmKCFVU0VfTkFUSVZFKXsNCiAgLy8gMjUuNC4zLjEgUHJvbWlzZShleGVjdXRvcikNCiAgJFByb21pc2UgPSBmdW5jdGlvbiBQcm9taXNlKGV4ZWN1dG9yKXsNCiAgICBhbkluc3RhbmNlKHRoaXMsICRQcm9taXNlLCBQUk9NSVNFLCAnX2gnKTsNCiAgICBhRnVuY3Rpb24oZXhlY3V0b3IpOw0KICAgIEludGVybmFsLmNhbGwodGhpcyk7DQogICAgdHJ5IHsNCiAgICAgIGV4ZWN1dG9yKGN0eCgkcmVzb2x2ZSwgdGhpcywgMSksIGN0eCgkcmVqZWN0LCB0aGlzLCAxKSk7DQogICAgfSBjYXRjaChlcnIpew0KICAgICAgJHJlamVjdC5jYWxsKHRoaXMsIGVycik7DQogICAgfQ0KICB9Ow0KICBJbnRlcm5hbCA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3Ipew0KICAgIHRoaXMuX2MgPSBbXTsgICAgICAgICAgICAgLy8gPC0gYXdhaXRpbmcgcmVhY3Rpb25zDQogICAgdGhpcy5fYSA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSBjaGVja2VkIGluIGlzVW5oYW5kbGVkIHJlYWN0aW9ucw0KICAgIHRoaXMuX3MgPSAwOyAgICAgICAgICAgICAgLy8gPC0gc3RhdGUNCiAgICB0aGlzLl9kID0gZmFsc2U7ICAgICAgICAgIC8vIDwtIGRvbmUNCiAgICB0aGlzLl92ID0gdW5kZWZpbmVkOyAgICAgIC8vIDwtIHZhbHVlDQogICAgdGhpcy5faCA9IDA7ICAgICAgICAgICAgICAvLyA8LSByZWplY3Rpb24gc3RhdGUsIDAgLSBkZWZhdWx0LCAxIC0gaGFuZGxlZCwgMiAtIHVuaGFuZGxlZA0KICAgIHRoaXMuX24gPSBmYWxzZTsgICAgICAgICAgLy8gPC0gbm90aWZ5DQogIH07DQogIEludGVybmFsLnByb3RvdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTYpKCRQcm9taXNlLnByb3RvdHlwZSwgew0KICAgIC8vIDI1LjQuNS4zIFByb21pc2UucHJvdG90eXBlLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpDQogICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCl7DQogICAgICB2YXIgcmVhY3Rpb24gICAgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJFByb21pc2UpKTsNCiAgICAgIHJlYWN0aW9uLm9rICAgICA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiB0cnVlOw0KICAgICAgcmVhY3Rpb24uZmFpbCAgID0gdHlwZW9mIG9uUmVqZWN0ZWQgPT0gJ2Z1bmN0aW9uJyAmJiBvblJlamVjdGVkOw0KICAgICAgcmVhY3Rpb24uZG9tYWluID0gaXNOb2RlID8gcHJvY2Vzcy5kb21haW4gOiB1bmRlZmluZWQ7DQogICAgICB0aGlzLl9jLnB1c2gocmVhY3Rpb24pOw0KICAgICAgaWYodGhpcy5fYSl0aGlzLl9hLnB1c2gocmVhY3Rpb24pOw0KICAgICAgaWYodGhpcy5fcylub3RpZnkodGhpcywgZmFsc2UpOw0KICAgICAgcmV0dXJuIHJlYWN0aW9uLnByb21pc2U7DQogICAgfSwNCiAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKQ0KICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpew0KICAgICAgcmV0dXJuIHRoaXMudGhlbih1bmRlZmluZWQsIG9uUmVqZWN0ZWQpOw0KICAgIH0NCiAgfSk7DQogIFByb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oKXsNCiAgICB2YXIgcHJvbWlzZSAgPSBuZXcgSW50ZXJuYWw7DQogICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTsNCiAgICB0aGlzLnJlc29sdmUgPSBjdHgoJHJlc29sdmUsIHByb21pc2UsIDEpOw0KICAgIHRoaXMucmVqZWN0ICA9IGN0eCgkcmVqZWN0LCBwcm9taXNlLCAxKTsNCiAgfTsNCn0NCg0KJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1Byb21pc2U6ICRQcm9taXNlfSk7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSgkUHJvbWlzZSwgUFJPTUlTRSk7DQpfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KShQUk9NSVNFKTsNCldyYXBwZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApW1BST01JU0VdOw0KDQovLyBzdGF0aWNzDQokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCBQUk9NSVNFLCB7DQogIC8vIDI1LjQuNC41IFByb21pc2UucmVqZWN0KHIpDQogIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHIpew0KICAgIHZhciBjYXBhYmlsaXR5ID0gbmV3UHJvbWlzZUNhcGFiaWxpdHkodGhpcykNCiAgICAgICwgJCRyZWplY3QgICA9IGNhcGFiaWxpdHkucmVqZWN0Ow0KICAgICQkcmVqZWN0KHIpOw0KICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7DQogIH0NCn0pOw0KJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoTElCUkFSWSB8fCAhVVNFX05BVElWRSksIFBST01JU0UsIHsNCiAgLy8gMjUuNC40LjYgUHJvbWlzZS5yZXNvbHZlKHgpDQogIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUoeCl7DQogICAgLy8gaW5zdGFuY2VvZiBpbnN0ZWFkIG9mIGludGVybmFsIHNsb3QgY2hlY2sgYmVjYXVzZSB3ZSBzaG91bGQgZml4IGl0IHdpdGhvdXQgcmVwbGFjZW1lbnQgbmF0aXZlIFByb21pc2UgY29yZQ0KICAgIGlmKHggaW5zdGFuY2VvZiAkUHJvbWlzZSAmJiBzYW1lQ29uc3RydWN0b3IoeC5jb25zdHJ1Y3RvciwgdGhpcykpcmV0dXJuIHg7DQogICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKQ0KICAgICAgLCAkJHJlc29sdmUgID0gY2FwYWJpbGl0eS5yZXNvbHZlOw0KICAgICQkcmVzb2x2ZSh4KTsNCiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOw0KICB9DQp9KTsNCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIShVU0VfTkFUSVZFICYmIF9fd2VicGFja19yZXF1aXJlX18oOTIpKGZ1bmN0aW9uKGl0ZXIpew0KICAkUHJvbWlzZS5hbGwoaXRlcilbJ2NhdGNoJ10oZW1wdHkpOw0KfSkpLCBQUk9NSVNFLCB7DQogIC8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKQ0KICBhbGw6IGZ1bmN0aW9uIGFsbChpdGVyYWJsZSl7DQogICAgdmFyIEMgICAgICAgICAgPSB0aGlzDQogICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKQ0KICAgICAgLCByZXNvbHZlICAgID0gY2FwYWJpbGl0eS5yZXNvbHZlDQogICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsNCiAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpew0KICAgICAgdmFyIHZhbHVlcyAgICA9IFtdDQogICAgICAgICwgaW5kZXggICAgID0gMA0KICAgICAgICAsIHJlbWFpbmluZyA9IDE7DQogICAgICBmb3JPZihpdGVyYWJsZSwgZmFsc2UsIGZ1bmN0aW9uKHByb21pc2Upew0KICAgICAgICB2YXIgJGluZGV4ICAgICAgICA9IGluZGV4KysNCiAgICAgICAgICAsIGFscmVhZHlDYWxsZWQgPSBmYWxzZTsNCiAgICAgICAgdmFsdWVzLnB1c2godW5kZWZpbmVkKTsNCiAgICAgICAgcmVtYWluaW5nKys7DQogICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsNCiAgICAgICAgICBpZihhbHJlYWR5Q2FsbGVkKXJldHVybjsNCiAgICAgICAgICBhbHJlYWR5Q2FsbGVkICA9IHRydWU7DQogICAgICAgICAgdmFsdWVzWyRpbmRleF0gPSB2YWx1ZTsNCiAgICAgICAgICAtLXJlbWFpbmluZyB8fCByZXNvbHZlKHZhbHVlcyk7DQogICAgICAgIH0sIHJlamVjdCk7DQogICAgICB9KTsNCiAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsNCiAgICB9KTsNCiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7DQogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsNCiAgfSwNCiAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKQ0KICByYWNlOiBmdW5jdGlvbiByYWNlKGl0ZXJhYmxlKXsNCiAgICB2YXIgQyAgICAgICAgICA9IHRoaXMNCiAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpDQogICAgICAsIHJlamVjdCAgICAgPSBjYXBhYmlsaXR5LnJlamVjdDsNCiAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpew0KICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbihwcm9taXNlKXsNCiAgICAgICAgQy5yZXNvbHZlKHByb21pc2UpLnRoZW4oY2FwYWJpbGl0eS5yZXNvbHZlLCByZWplY3QpOw0KICAgICAgfSk7DQogICAgfSk7DQogICAgaWYoYWJydXB0KXJlamVjdChhYnJ1cHQuZXJyb3IpOw0KICAgIHJldHVybiBjYXBhYmlsaXR5LnByb21pc2U7DQogIH0NCn0pOw0KDQovKioqLyB9KSwNCi8qIDEwNSAqLywNCi8qIDEwNiAqLywNCi8qIDEwNyAqLywNCi8qIDEwOCAqLywNCi8qIDEwOSAqLw0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQoNCnZhciBfc3RyaW5naWZ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7DQoNCnZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7DQoNCnZhciBfa2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApOw0KDQp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7DQoNCmV4cG9ydHMuZGl2aWRlVVJMID0gZGl2aWRlVVJMOw0KZXhwb3J0cy5kaXZpZGVFbWFpbCA9IGRpdmlkZUVtYWlsOw0KZXhwb3J0cy5lbXB0eU9iamVjdCA9IGVtcHR5T2JqZWN0Ow0KZXhwb3J0cy5kZWVwQ2xvbmUgPSBkZWVwQ2xvbmU7DQpleHBvcnRzLmdldFVzZXJVUkxGcm9tRW1haWwgPSBnZXRVc2VyVVJMRnJvbUVtYWlsOw0KZXhwb3J0cy5nZXRVc2VyRW1haWxGcm9tVVJMID0gZ2V0VXNlckVtYWlsRnJvbVVSTDsNCmV4cG9ydHMuY29udmVydFRvVXNlclVSTCA9IGNvbnZlcnRUb1VzZXJVUkw7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCi8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLw0KLyoqDQogKiBTdXBwb3J0IG1vZHVsZSB3aXRoIHNvbWUgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZnVsDQogKiBAbW9kdWxlIHV0aWxzDQogKi8NCg0KLyoqDQogKiBAdHlwZWRlZiBkaXZpZGVVUkwNCiAqIEB0eXBlIE9iamVjdA0KICogQHByb3BlcnR5IHtzdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgVVJMDQogKiBAcHJvcGVydHkge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gb2YgVVJMDQogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTA0KICovDQoNCi8qKg0KICogRGl2aWRlIGFuIHVybCBpbiB0eXBlLCBkb21haW4gYW5kIGlkZW50aXR5DQogKiBAcGFyYW0gIHtVUkwuVVJMfSB1cmwgLSB1cmwgYWRkcmVzcw0KICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTA0KICovDQpmdW5jdGlvbiBkaXZpZGVVUkwodXJsKSB7DQoNCiAgaWYgKCF1cmwpIHRocm93IEVycm9yKCdVUkwgaXMgbmVlZGVkIHRvIHNwbGl0Jyk7DQoNCiAgZnVuY3Rpb24gcmVjdXJzZSh2YWx1ZSkgew0KICAgIHZhciByZWdleCA9IC8oW2EtekEtWi1dKikoOlwvXC8oPzpcLik/fDopKFstYS16QS1aMC05QDolLl9cK34jPV17MiwyNTZ9KShbLWEtekEtWjAtOUA6JS5fXCt+Iz1cL10qKS9naTsNCiAgICB2YXIgc3Vic3QgPSAnJDEsJDMsJDQnOw0KICAgIHZhciBwYXJ0cyA9IHZhbHVlLnJlcGxhY2UocmVnZXgsIHN1YnN0KS5zcGxpdCgnLCcpOw0KICAgIHJldHVybiBwYXJ0czsNCiAgfQ0KDQogIHZhciBwYXJ0cyA9IHJlY3Vyc2UodXJsKTsNCg0KICAvLyBJZiB0aGUgdXJsIGhhcyBubyBzY2hlbWUNCiAgaWYgKHBhcnRzWzBdID09PSB1cmwgJiYgIXBhcnRzWzBdLmluY2x1ZGVzKCdAJykpIHsNCg0KICAgIHZhciBfcmVzdWx0ID0gew0KICAgICAgdHlwZTogIiIsDQogICAgICBkb21haW46IHVybCwNCiAgICAgIGlkZW50aXR5OiAiIg0KICAgIH07DQoNCiAgICBjb25zb2xlLmVycm9yKCdbRGl2aWRlVVJMXSBEaXZpZGVVUkwgZG9uXCd0IHN1cHBvcnQgdXJsIHdpdGhvdXQgc2NoZW1lLiBQbGVhc2UgcmV2aWV3IHlvdXIgdXJsIGFkZHJlc3MnLCB1cmwpOw0KDQogICAgcmV0dXJuIF9yZXN1bHQ7DQogIH0NCg0KICAvLyBjaGVjayBpZiB0aGUgdXJsIGhhcyB0aGUgc2NoZW1lIGFuZCBpbmNsdWRlcyBhbiBADQogIGlmIChwYXJ0c1swXSA9PT0gdXJsICYmIHBhcnRzWzBdLmluY2x1ZGVzKCdAJykpIHsNCiAgICB2YXIgc2NoZW1lID0gcGFydHNbMF0gPT09IHVybCA/ICdzbXRwJyA6IHBhcnRzWzBdOw0KICAgIHBhcnRzID0gcmVjdXJzZShzY2hlbWUgKyAnOi8vJyArIHBhcnRzWzBdKTsNCiAgfQ0KDQogIC8vIGlmIHRoZSBkb21haW4gaW5jbHVkZXMgYW4gQCwgZGl2aWRlIGl0IHRvIGRvbWFpbiBhbmQgaWRlbnRpdHkgcmVzcGVjdGl2ZWx5DQogIGlmIChwYXJ0c1sxXS5pbmNsdWRlcygnQCcpKSB7DQogICAgcGFydHNbMl0gPSBwYXJ0c1swXSArICc6Ly8nICsgcGFydHNbMV07DQogICAgcGFydHNbMV0gPSBwYXJ0c1sxXS5zdWJzdHIocGFydHNbMV0uaW5kZXhPZignQCcpICsgMSk7DQogIH0gLyplbHNlIGlmIChwYXJ0c1syXS5pbmNsdWRlcygnLycpKSB7DQogICAgcGFydHNbMl0gPSBwYXJ0c1syXS5zdWJzdHIocGFydHNbMl0ubGFzdEluZGV4T2YoJy8nKSsxKTsNCiAgICB9Ki8NCg0KICB2YXIgcmVzdWx0ID0gew0KICAgIHR5cGU6IHBhcnRzWzBdLA0KICAgIGRvbWFpbjogcGFydHNbMV0sDQogICAgaWRlbnRpdHk6IHBhcnRzWzJdDQogIH07DQoNCiAgcmV0dXJuIHJlc3VsdDsNCn0NCg0KZnVuY3Rpb24gZGl2aWRlRW1haWwoZW1haWwpIHsNCiAgdmFyIGluZGV4T2ZBdCA9IGVtYWlsLmluZGV4T2YoJ0AnKTsNCg0KICB2YXIgcmVzdWx0ID0gew0KICAgIHVzZXJuYW1lOiBlbWFpbC5zdWJzdHJpbmcoMCwgaW5kZXhPZkF0KSwNCiAgICBkb21haW46IGVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCBlbWFpbC5sZW5ndGgpDQogIH07DQoNCiAgcmV0dXJuIHJlc3VsdDsNCn0NCg0KLyoqDQogKiBDaGVjayBpZiBhbiBPYmplY3QgaXMgZW1wdHkNCiAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IE9iamVjdCB0byBiZSBjaGVja2VkDQogKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICBzdGF0dXMgb2YgT2JqZWN0LCBlbXB0eSBvciBub3QgKHRydWV8ZmFsc2UpOw0KICovDQpmdW5jdGlvbiBlbXB0eU9iamVjdChvYmplY3QpIHsNCiAgcmV0dXJuICgwLCBfa2V5czIuZGVmYXVsdCkob2JqZWN0KS5sZW5ndGggPiAwID8gZmFsc2UgOiB0cnVlOw0KfQ0KDQovKioNCiAqIE1ha2UgYSBDT1BZIG9mIHRoZSBvcmlnaW5hbCBkYXRhDQogKiBAcGFyYW0gIHtPYmplY3R9ICBvYmogLSBvYmplY3QgdG8gYmUgY2xvbmVkDQogKiBAcmV0dXJuIHtPYmplY3R9DQogKi8NCmZ1bmN0aW9uIGRlZXBDbG9uZShvYmopIHsNCiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLg0KICBpZiAob2JqKSByZXR1cm4gSlNPTi5wYXJzZSgoMCwgX3N0cmluZ2lmeTIuZGVmYXVsdCkob2JqKSk7DQp9DQoNCi8qKg0KICogT2J0YWlucyB0aGUgdXNlciBVUkwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIGVtYWlsDQogKiBAcGFyYW0gIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbA0KICogQHJldHVybiB7VVJMLlVSTH0gdXNlclVSTCBUaGUgdXNlciBVUkwNCiAqLw0KZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbCh1c2VyRW1haWwpIHsNCiAgdmFyIGluZGV4T2ZBdCA9IHVzZXJFbWFpbC5pbmRleE9mKCdAJyk7DQogIHJldHVybiAndXNlcjovLycgKyB1c2VyRW1haWwuc3Vic3RyaW5nKGluZGV4T2ZBdCArIDEsIHVzZXJFbWFpbC5sZW5ndGgpICsgJy8nICsgdXNlckVtYWlsLnN1YnN0cmluZygwLCBpbmRleE9mQXQpOw0KfQ0KDQovKioNCiAqIE9idGFpbnMgdGhlIHVzZXIgZW1haWwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIFVSTA0KICogQHBhcmFtICB7VVJMLlVSTH0gdXNlclVSTCBUaGUgdXNlciBVUkwNCiAqIEByZXR1cm4ge3N0cmluZ30gdXNlckVtYWlsIFRoZSB1c2VyIGVtYWlsDQogKi8NCmZ1bmN0aW9uIGdldFVzZXJFbWFpbEZyb21VUkwodXNlclVSTCkgew0KICB2YXIgdXJsID0gZGl2aWRlVVJMKHVzZXJVUkwpOw0KICByZXR1cm4gdXJsLmlkZW50aXR5LnJlcGxhY2UoJy8nLCAnJykgKyAnQCcgKyB1cmwuZG9tYWluOyAvLyBpZGVudGl0eSBmaWVsZCBoYXMgJy9leGFtcGxlSUQnIGluc3RlYWQgb2YgJ2V4YW1wbGVJRCcNCn0NCg0KLyoqDQogKiBDaGVjayBpZiB0aGUgdXNlciBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW4gdGhlIFVSTCBmb3JtYXQsIGlmIG5vdCwgY29udmVydCB0byBVUkwgZm9ybWF0DQogKiBAcGFyYW0gIHtzdHJpbmd9ICAgaWRlbnRpZmllciAgdXNlciBpZGVudGlmaWVyDQogKiBAcmV0dXJuIHtzdHJpbmd9ICAgdXNlclVSTCAgICB0aGUgdXNlciBVUkwNCiAqLw0KZnVuY3Rpb24gY29udmVydFRvVXNlclVSTChpZGVudGlmaWVyKSB7DQoNCiAgLy8gY2hlY2sgaWYgdGhlIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgdXJsIGZvcm1hdA0KICBpZiAoaWRlbnRpZmllci5zdWJzdHJpbmcoMCwgNykgPT09ICd1c2VyOi8vJykgew0KICAgIHZhciBkaXZpZGVkVVJMID0gZGl2aWRlVVJMKGlkZW50aWZpZXIpOw0KDQogICAgLy9jaGVjayBpZiB0aGUgdXJsIGlzIHdlbGwgZm9ybWF0ZWQNCiAgICBpZiAoZGl2aWRlZFVSTC5kb21haW4gJiYgZGl2aWRlZFVSTC5pZGVudGl0eSkgew0KICAgICAgcmV0dXJuIGlkZW50aWZpZXI7DQogICAgfSBlbHNlIHsNCiAgICAgIHRocm93ICd1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0JzsNCiAgICB9DQoNCiAgICAvL2lmIG5vdCwgY29udmVydCB0aGUgdXNlciBlbWFpbCB0byBVUkwgZm9ybWF0DQogIH0gZWxzZSB7DQogICAgcmV0dXJuIGdldFVzZXJVUkxGcm9tRW1haWwoaWRlbnRpZmllcik7DQogIH0NCn0NCg0KLyoqKi8gfSksDQovKiAxMTAgKi8sDQovKiAxMTEgKi8sDQovKiAxMTIgKi8sDQovKiAxMTMgKi8sDQovKiAxMTQgKi8sDQovKiAxMTUgKi8sDQovKiAxMTYgKi8sDQovKiAxMTcgKi8sDQovKiAxMTggKi8sDQovKiAxMTkgKi8sDQovKiAxMjAgKi8sDQovKiAxMjEgKi8sDQovKiAxMjIgKi8sDQovKiAxMjMgKi8sDQovKiAxMjQgKi8sDQovKiAxMjUgKi8sDQovKiAxMjYgKi8sDQovKiAxMjcgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX3Byb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsNCg0KdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsNCg0KdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOw0KDQp2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQovKioNCiogQ29yZSBEaXNjb3ZlcnkgaW50ZXJmYWNlDQoqIENsYXNzIHRvIGFsbG93IGFwcGxpY2F0aW9ucyB0byBzZWFyY2ggZm9yIGh5cGVydGllcyBhbmQgRGF0YU9iamVjdHMgdXNpbmcgdGhlIG1lc3NhZ2UgYnVzDQoqLw0KdmFyIERpc2NvdmVyeSA9IGZ1bmN0aW9uICgpIHsNCg0KICAvKioNCiAgKiBUbyBpbml0aWFsaXNlIHRoZSBIeXBlcnR5RGlzY292ZXIsIHdoaWNoIHdpbGwgcHJvdmlkZSB0aGUgc3VwcG9ydCBmb3IgaHlwZXJ0aWVzIHRvDQogICogcXVlcnkgdXNlcnMgcmVnaXN0ZXJlZCBpbiBvdXRzaWRlIHRoZSBpbnRlcm5hbCBjb3JlLg0KICAqIEBwYXJhbSAge01lc3NhZ2VCdXN9ICAgICAgICAgIG1zZ2J1cyAgICAgICAgICAgICAgICBtc2didXMNCiAgKiBAcGFyYW0gIHtSdW50aW1lVVJMfSAgICAgICAgICBydW50aW1lVVJMICAgICAgICAgICAgcnVudGltZVVSTA0KICAqLw0KICBmdW5jdGlvbiBEaXNjb3ZlcnkoaHlwZXJ0eVVSTCwgbXNnQnVzKSB7DQogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGlzY292ZXJ5KTsNCg0KICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgX3RoaXMubWVzc2FnZUJ1cyA9IG1zZ0J1czsNCg0KICAgIF90aGlzLmRvbWFpbiA9ICgwLCBfdXRpbHMuZGl2aWRlVVJMKShoeXBlcnR5VVJMKS5kb21haW47DQogICAgX3RoaXMuZGlzY292ZXJ5VVJMID0gaHlwZXJ0eVVSTDsNCiAgfQ0KDQogIC8qKg0KICAqIGZ1bmN0aW9uIHRvIHJlcXVlc3QgYWJvdXQgYW4gZGF0YU9iamVjdCByZWdpc3RlcmVkIGluIGRvbWFpbiByZWdpc3RyeSB3aXRoIGEgZ2l2ZW4gbmFtZSwgYW5kDQogICogcmV0dXJuIHRoZSBkYXRhT2JqZWN0IGluZm9ybWF0aW9uLCBpZiBmb3VuZC4NCiAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgICAgICAgICBuYW1lICBkYXRhT2JqZWN0IFVSTA0KICAqIEBwYXJhbSAge1N0cmluZ30gICAgICAgICAgICBkb21haW4gKE9wdGlvbmFsKQ0KICAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgICAgIFByb21pc2UNCiAgKi8NCg0KDQogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERpc2NvdmVyeSwgW3sNCiAgICBrZXk6ICdkaXNjb3ZlckRhdGFPYmplY3RQZXJOYW1lJywNCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY292ZXJEYXRhT2JqZWN0UGVyTmFtZShuYW1lLCBkb21haW4pIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgYWN0aXZlRG9tYWluID0gdm9pZCAwOw0KDQogICAgICBhY3RpdmVEb21haW4gPSAhZG9tYWluID8gX3RoaXMuZG9tYWluIDogZG9tYWluOw0KDQogICAgICB2YXIgbXNnID0gew0KICAgICAgICB0eXBlOiAncmVhZCcsIGZyb206IF90aGlzLmRpc2NvdmVyeVVSTCwgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgYWN0aXZlRG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiBuYW1lIH0NCiAgICAgIH07DQoNCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KDQogICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCg0KICAgICAgICAgIHZhciBkYXRhT2JqZWN0ID0gcmVwbHkuYm9keS52YWx1ZTsNCg0KICAgICAgICAgIGlmIChkYXRhT2JqZWN0KSB7DQogICAgICAgICAgICByZXNvbHZlKGRhdGFPYmplY3QpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZWplY3QoJ0RhdGFPYmplY3Qgbm90IGZvdW5kJyk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogZnVuY3Rpb24gdG8gcmVxdWVzdCBhYm91dCBkYXRhT2JqZWN0IHJlZ2lzdGVyZWQgaW4gZG9tYWluIHJlZ2lzdHJ5LCBhbmQNCiAgICAqIHJldHVybiB0aGUgZGF0YU9iamVjdCBpbmZvcm1hdGlvbiwgaWYgZm91bmQuDQogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgICAgICAgICB1cmwgIGRhdGFPYmplY3QgVVJMDQogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgICAgICAgZG9tYWluIChPcHRpb25hbCkNCiAgICAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgICAgIFByb21pc2UNCiAgICAqLw0KDQogIH0sIHsNCiAgICBrZXk6ICdkaXNjb3ZlckRhdGFPYmplY3RQZXJVUkwnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3ZlckRhdGFPYmplY3RQZXJVUkwodXJsLCBkb21haW4pIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgYWN0aXZlRG9tYWluID0gdm9pZCAwOw0KDQogICAgICBpZiAoIWRvbWFpbikgew0KICAgICAgICBhY3RpdmVEb21haW4gPSBfdGhpcy5kb21haW47DQogICAgICB9IGVsc2Ugew0KICAgICAgICBhY3RpdmVEb21haW4gPSBkb21haW47DQogICAgICB9DQoNCiAgICAgIHZhciBtc2cgPSB7DQogICAgICAgIHR5cGU6ICdyZWFkJywgZnJvbTogX3RoaXMuZGlzY292ZXJ5VVJMLCB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBhY3RpdmVEb21haW4gKyAnLycsIGJvZHk6IHsgcmVzb3VyY2U6IHVybCB9DQogICAgICB9Ow0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCg0KICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7DQoNCiAgICAgICAgICB2YXIgZGF0YU9iamVjdCA9IHJlcGx5LmJvZHkudmFsdWU7DQoNCiAgICAgICAgICBpZiAoZGF0YU9iamVjdCkgew0KICAgICAgICAgICAgcmVzb2x2ZShkYXRhT2JqZWN0KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVqZWN0KCdEYXRhT2JqZWN0IG5vdCBmb3VuZCcpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqICBmdW5jdGlvbiB0byBkZWxldGUgYW4gRGF0YSBPYmplY3QgcmVnaXN0ZXJlZCBpbiB0aGUgRG9tYWluIFJlZ2lzdHJ5DQogICAgKiAgQHBhcmFtICAge1N0cmluZ30gICAgICAgICAgIHVybCAgICAgICAgICAgICAgZGF0YU9iamVjdCB1cmwNCiAgICAqICBAcGFyYW0gICB7ZG9tYWlufSAgICAgICAgICAgZG9tYWluICAgICAgICAgKE9wdGlvbmFsKQ0KICAgICogIEByZXR1cm4gIHtQcm9taXNlfSAgICAgICAgICBQcm9taXNlICAgICAgICAgIHJlc3VsdA0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RlbGV0ZURhdGFPYmplY3QnLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVEYXRhT2JqZWN0KHVybCwgZG9tYWluKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGFjdGl2ZURvbWFpbiA9IHZvaWQgMDsNCg0KICAgICAgaWYgKCFkb21haW4pIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gX3RoaXMuZG9tYWluOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gZG9tYWluOw0KICAgICAgfQ0KDQogICAgICB2YXIgbXNnID0gew0KICAgICAgICB0eXBlOiAnZGVsZXRlJywgZnJvbTogX3RoaXMuZGlzY292ZXJ5VVJMLCB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBhY3RpdmVEb21haW4gKyAnLycsIGJvZHk6IHsgdmFsdWU6IHsgbmFtZTogdXJsIH0gfSB9Ow0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCg0KICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7DQoNCiAgICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXBseS5ib2R5LmNvZGU7DQoNCiAgICAgICAgICBpZiAocmVzcG9uc2UgPT09IDIwMCkgew0KICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlamVjdCgnRXJyb3Igb24gZGVsZXRpbmcgZGF0YU9iamVjdCcpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIGZ1bmN0aW9uIHRvIHJlcXVlc3QgYWJvdXQgc3BlY2lmaWMgcmVwb3J0ZXIgZGF0YU9iamVjdCByZWdpc3RlcmVkIGluIGRvbWFpbiByZWdpc3RyeSwgYW5kDQogICAgKiByZXR1cm4gdGhlIGRhdGFPYmplY3RzIGZyb20gdGhhdCByZXBvcnRlci4NCiAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgICAgICAgIHJlcG9ydGVyICAgICBkYXRhT2JqZWN0IHJlcG9ydGVyDQogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgICAgICBkb21haW4gICAgICAgKE9wdGlvbmFsKQ0KICAgICogQHJldHVybiB7QXJyYXl9ICAgICAgICAgICBQcm9taXNlICAgICAgIERhdGFPYmplY3RzDQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnZGlzY292ZXJEYXRhT2JqZWN0UGVyUmVwb3J0ZXInLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3ZlckRhdGFPYmplY3RQZXJSZXBvcnRlcihyZXBvcnRlciwgZG9tYWluKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGFjdGl2ZURvbWFpbiA9IHZvaWQgMDsNCg0KICAgICAgaWYgKCFkb21haW4pIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gX3RoaXMuZG9tYWluOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gZG9tYWluOw0KICAgICAgfQ0KDQogICAgICB2YXIgbXNnID0gew0KICAgICAgICB0eXBlOiAncmVhZCcsIGZyb206IF90aGlzLmRpc2NvdmVyeVVSTCwgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgYWN0aXZlRG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiByZXBvcnRlciB9DQogICAgICB9Ow0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCg0KICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1zZywgZnVuY3Rpb24gKHJlcGx5KSB7DQoNCiAgICAgICAgICB2YXIgZGF0YU9iamVjdHMgPSByZXBseS5ib2R5LnZhbHVlOw0KDQogICAgICAgICAgaWYgKGRhdGFPYmplY3RzKSB7DQogICAgICAgICAgICByZXNvbHZlKGRhdGFPYmplY3RzKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVqZWN0KCdObyBkYXRhT2JqZWN0IHdhcyBmb3VuZCcpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvKiogQWR2YW5jZWQgU2VhcmNoIGZvciBkYXRhT2JqZWN0cyByZWdpc3RlcmVkIGluIGRvbWFpbiByZWdpc3RyeQ0KICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgICAgICAgdXNlciAgICAgICAgICAgICAgICAgIHVzZXIgaWRlbnRpZmllciwgZWl0aGVyIGluIHVybCBvciBlbWFpbCBmb3JtYXQNCiAgICAqIEBwYXJhbSAge0FycmF5PHN0cmluZz59ICAgIHNjaGVtYSAoT3B0aW9uYWwpICAgICB0eXBlcyBvZiBkYXRhT2JqZWN0IHNjaGVtYXMNCiAgICAqIEBwYXJhbSAge0FycmF5PHN0cmluZz59ICAgIHJlc291cmNlcyAoT3B0aW9uYWwpICB0eXBlcyBvZiBkYXRhT2JqZWN0IHJlc291cmNlcw0KICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgICAgICAgZG9tYWluIChPcHRpb25hbCkgICAgIGRvbWFpbiBvZiB0aGUgcmVnaXN0cnkgdG8gc2VhcmNoDQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnZGlzY292ZXJEYXRhT2JqZWN0JywNCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY292ZXJEYXRhT2JqZWN0KG5hbWUsIHNjaGVtYSwgcmVzb3VyY2VzLCBkb21haW4pIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgYWN0aXZlRG9tYWluID0gdm9pZCAwOw0KICAgICAgLy9sZXQgdXNlcklkZW50aWZpZXIgPSBjb252ZXJ0VG9Vc2VyVVJMKHVzZXIpOw0KDQogICAgICBhY3RpdmVEb21haW4gPSAhZG9tYWluID8gX3RoaXMuZG9tYWluIDogZG9tYWluOw0KDQogICAgICB2YXIgbXNnID0gew0KICAgICAgICB0eXBlOiAncmVhZCcsIGZyb206IF90aGlzLmRpc2NvdmVyeVVSTCwgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgYWN0aXZlRG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiBuYW1lLA0KICAgICAgICAgIGNyaXRlcmlhOiB7IHJlc291cmNlczogcmVzb3VyY2VzLCBkYXRhU2NoZW1lczogc2NoZW1hIH0NCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQoNCiAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgew0KDQogICAgICAgICAgdmFyIGh5cGVydGllcyA9IHJlcGx5LmJvZHkudmFsdWU7DQoNCiAgICAgICAgICBpZiAoaHlwZXJ0aWVzKSB7DQogICAgICAgICAgICByZXNvbHZlKGh5cGVydGllcyk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJlamVjdCgnTm8gRGF0YU9iamVjdCB3YXMgZm91bmQnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfQ0KDQogICAgLyoqIEFkdmFuY2VkIFNlYXJjaCBmb3IgSHlwZXJ0aWVzIHJlZ2lzdGVyZWQgaW4gZG9tYWluIHJlZ2lzdHJ5DQogICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgICAgICB1c2VyICAgICAgICAgICAgICAgICAgdXNlciBpZGVudGlmaWVyLCBlaXRoZXIgaW4gdXJsIG9yIGVtYWlsIGZvcm1hdA0KICAgICogQHBhcmFtICB7QXJyYXk8c3RyaW5nPn0gICAgc2NoZW1hIChPcHRpb25hbCkgICAgIHR5cGVzIG9mIGh5cGVydGllcyBzY2hlbWFzDQogICAgKiBAcGFyYW0gIHtBcnJheTxzdHJpbmc+fSAgICByZXNvdXJjZXMgKE9wdGlvbmFsKSAgdHlwZXMgb2YgaHlwZXJ0aWVzIHJlc291cmNlcw0KICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgICAgICAgZG9tYWluIChPcHRpb25hbCkgICAgIGRvbWFpbiBvZiB0aGUgcmVnaXN0cnkgdG8gc2VhcmNoDQogICAgKi8NCg0KICB9LCB7DQogICAga2V5OiAnZGlzY292ZXJIeXBlcnR5JywNCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY292ZXJIeXBlcnR5KHVzZXIsIHNjaGVtYSwgcmVzb3VyY2VzLCBkb21haW4pIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgYWN0aXZlRG9tYWluID0gdm9pZCAwOw0KICAgICAgdmFyIHVzZXJJZGVudGlmaWVyID0gKDAsIF91dGlscy5jb252ZXJ0VG9Vc2VyVVJMKSh1c2VyKTsNCg0KICAgICAgaWYgKCFkb21haW4pIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gX3RoaXMuZG9tYWluOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gZG9tYWluOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCg0KICAgICAgICBjb25zb2xlLmxvZygnW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHldIEFDVElWRSBET01BSU4gLT4gJywgYWN0aXZlRG9tYWluLCAndXNlci0+JywgdXNlciwgJ3NjaGVtYS0+Jywgc2NoZW1hLCAncmVzb3VyY2VzLT4nLCByZXNvdXJjZXMsICdkb21haW4tPicsIGRvbWFpbik7DQogICAgICAgIGlmICh1c2VyLmluY2x1ZGVzKCc6JykgJiYgIXVzZXIuaW5jbHVkZXMoJ3VzZXI6Ly8nKSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdbRGlzY292ZXJ5LmRpc2NvdmVySHlwZXJ0eV0gJyArIHVzZXIgKyAnIGlzIGxlZ2FjeSBkb21haW4nKTsNCiAgICAgICAgICB2YXIgbGVnYWN5VXNlciA9IHsgdXNlcklEOiB1c2VyLCBoeXBlcnR5SUQ6IHVzZXIsIHNjaGVtYTogc2NoZW1hLCByZXNvdXJjZXM6IHJlc291cmNlcyB9Ow0KICAgICAgICAgIHJldHVybiByZXNvbHZlKGxlZ2FjeVVzZXIpOw0KICAgICAgICB9DQogICAgICAgIHZhciBtc2cgPSB7DQogICAgICAgICAgdHlwZTogJ3JlYWQnLCBmcm9tOiBfdGhpcy5kaXNjb3ZlcnlVUkwsIHRvOiAnZG9tYWluOi8vcmVnaXN0cnkuJyArIGFjdGl2ZURvbWFpbiArICcvJywgYm9keTogeyByZXNvdXJjZTogdXNlcklkZW50aWZpZXIsDQogICAgICAgICAgICBjcml0ZXJpYTogeyByZXNvdXJjZXM6IHJlc291cmNlcywgZGF0YVNjaGVtZXM6IHNjaGVtYSB9DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnNvbGUuaW5mbygnW0Rpc2NvdmVyeV0gbXNnIHRvIHNlbmQtPicsIG1zZyk7DQoNCiAgICAgICAgX3RoaXMubWVzc2FnZUJ1cy5wb3N0TWVzc2FnZShtc2csIGZ1bmN0aW9uIChyZXBseSkgew0KDQogICAgICAgICAgY29uc29sZS5pbmZvKCdbRGlzY292ZXJ5XSBPTiBkaXNjb3Zlckh5cGVydHktPicsIHJlcGx5KTsNCiAgICAgICAgICB2YXIgaHlwZXJ0aWVzID0gcmVwbHkuYm9keS52YWx1ZTsNCg0KICAgICAgICAgIGlmIChoeXBlcnRpZXMpIHsNCiAgICAgICAgICAgIHJlc29sdmUoaHlwZXJ0aWVzKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVqZWN0KCdObyBIeXBlcnR5IHdhcyBmb3VuZCcpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAqIGZ1bmN0aW9uIHRvIHJlcXVlc3QgYWJvdXQgdXNlcnMgcmVnaXN0ZXJlZCBpbiBkb21haW4gcmVnaXN0cnksIGFuZA0KICAgICogcmV0dXJuIHRoZSBsYXN0IGh5cGVydHkgaW5zdGFuY2UgcmVnaXN0ZXJlZCBieSB0aGUgdXNlci4NCiAgICAqIEBwYXJhbSAge2VtYWlsfSAgICAgICAgICAgICAgZW1haWwNCiAgICAqIEBwYXJhbSAge2RvbWFpbn0gICAgICAgICAgICBkb21haW4gKE9wdGlvbmFsKQ0KICAgICogQHJldHVybiB7UHJvbWlzZX0gICAgICAgICAgUHJvbWlzZQ0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2Rpc2NvdmVySHlwZXJ0eVBlclVzZXInLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb3Zlckh5cGVydHlQZXJVc2VyKGVtYWlsLCBkb21haW4pIHsNCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7DQogICAgICB2YXIgYWN0aXZlRG9tYWluID0gdm9pZCAwOw0KDQogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCg0KICAgICAgICAvLyBIYWNrIGZvciBsZWdhY3kgdXNlcnMNCiAgICAgICAgaWYgKGVtYWlsLmluY2x1ZGVzKCc6JykgJiYgIWVtYWlsLmluY2x1ZGVzKCd1c2VyOi8vJykpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHldICcgKyBlbWFpbCArICdpcyBsZWdhY3kgZG9tYWluJyk7DQogICAgICAgICAgdmFyIGxlZ2FjeVVzZXIgPSB7IGlkOiBlbWFpbCwgaHlwZXJ0eVVSTDogZW1haWwsIGRlc2NyaXB0b3I6ICd1bmtub3duJyB9Ow0KICAgICAgICAgIHJldHVybiByZXNvbHZlKGxlZ2FjeVVzZXIpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFkb21haW4pIHsNCiAgICAgICAgICBhY3RpdmVEb21haW4gPSBfdGhpcy5kb21haW47DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWN0aXZlRG9tYWluID0gZG9tYWluOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGlkZW50aXR5VVJMID0gJ3VzZXI6Ly8nICsgZW1haWwuc3Vic3RyaW5nKGVtYWlsLmluZGV4T2YoJ0AnKSArIDEsIGVtYWlsLmxlbmd0aCkgKyAnLycgKyBlbWFpbC5zdWJzdHJpbmcoMCwgZW1haWwuaW5kZXhPZignQCcpKTsNCg0KICAgICAgICAvLyBtZXNzYWdlIHRvIHF1ZXJ5IGRvbWFpbiByZWdpc3RyeSwgYXNraW5nIGZvciBhIHVzZXIgaHlwZXJ0eS4NCiAgICAgICAgdmFyIG1lc3NhZ2UgPSB7DQogICAgICAgICAgdHlwZTogJ3JlYWQnLCBmcm9tOiBfdGhpcy5kaXNjb3ZlcnlVUkwsIHRvOiAnZG9tYWluOi8vcmVnaXN0cnkuJyArIGFjdGl2ZURvbWFpbiArICcvJywgYm9keTogeyByZXNvdXJjZTogaWRlbnRpdHlVUkwgfQ0KICAgICAgICB9Ow0KDQogICAgICAgIGNvbnNvbGUuaW5mbygnW0Rpc2NvdmVyeV0gTWVzc2FnZTogJywgbWVzc2FnZSwgYWN0aXZlRG9tYWluLCBpZGVudGl0eVVSTCk7DQoNCiAgICAgICAgLy9jb25zb2xlLmluZm8oJ1tEaXNjb3ZlcnldIG1lc3NhZ2UgUkVBRCcsIG1lc3NhZ2UpOw0KDQogICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7DQogICAgICAgICAgY29uc29sZS5pbmZvKCdbRGlzY292ZXJ5XSBtZXNzYWdlIHJlcGx5JywgcmVwbHkpOw0KDQogICAgICAgICAgdmFyIGh5cGVydHkgPSB2b2lkIDA7DQogICAgICAgICAgdmFyIG1vc3RSZWNlbnQgPSB2b2lkIDA7DQogICAgICAgICAgdmFyIGxhc3RIeXBlcnR5ID0gdm9pZCAwOw0KICAgICAgICAgIHZhciB2YWx1ZSA9IHJlcGx5LmJvZHkudmFsdWU7DQoNCiAgICAgICAgICBmb3IgKGh5cGVydHkgaW4gdmFsdWUpIHsNCiAgICAgICAgICAgIGlmICh2YWx1ZVtoeXBlcnR5XS5sYXN0TW9kaWZpZWQgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICBpZiAobW9zdFJlY2VudCA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICAgICAgbW9zdFJlY2VudCA9IG5ldyBEYXRlKHZhbHVlW2h5cGVydHldLmxhc3RNb2RpZmllZCk7DQogICAgICAgICAgICAgICAgbGFzdEh5cGVydHkgPSBoeXBlcnR5Ow0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciBoeXBlcnR5RGF0ZSA9IG5ldyBEYXRlKHZhbHVlW2h5cGVydHldLmxhc3RNb2RpZmllZCk7DQogICAgICAgICAgICAgICAgaWYgKG1vc3RSZWNlbnQuZ2V0VGltZSgpIDwgaHlwZXJ0eURhdGUuZ2V0VGltZSgpKSB7DQogICAgICAgICAgICAgICAgICBtb3N0UmVjZW50ID0gaHlwZXJ0eURhdGU7DQogICAgICAgICAgICAgICAgICBsYXN0SHlwZXJ0eSA9IGh5cGVydHk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY29uc29sZS5pbmZvKCdbRGlzY292ZXJ5XSBMYXN0IEh5cGVydHk6ICcsIGxhc3RIeXBlcnR5LCBtb3N0UmVjZW50KTsNCg0KICAgICAgICAgIHZhciBoeXBlcnR5VVJMID0gbGFzdEh5cGVydHk7DQoNCiAgICAgICAgICBpZiAoaHlwZXJ0eVVSTCA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICByZXR1cm4gcmVqZWN0KCdVc2VyIEh5cGVydHkgbm90IGZvdW5kJyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGlkUGFja2FnZSA9IHsNCiAgICAgICAgICAgIGlkOiBlbWFpbCwNCiAgICAgICAgICAgIGRlc2NyaXB0b3I6IHZhbHVlW2h5cGVydHlVUkxdLmRlc2NyaXB0b3IsDQogICAgICAgICAgICBoeXBlcnR5VVJMOiBoeXBlcnR5VVJMDQogICAgICAgICAgfTsNCg0KICAgICAgICAgIGNvbnNvbGUuaW5mbygnW0Rpc2NvdmVyeV0gPT09PiBoeXBlcnR5RGlzY292ZXJ5IG1lc3NhZ2VCdW5kbGU6ICcsIGlkUGFja2FnZSk7DQogICAgICAgICAgcmVzb2x2ZShpZFBhY2thZ2UpOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogZnVuY3Rpb24gdG8gcmVxdWVzdCBhYm91dCB1c2VycyByZWdpc3RlcmVkIGluIGRvbWFpbiByZWdpc3RyeSwgYW5kDQogICAgKiByZXR1cm4gdGhlIGFsbCB0aGUgaHlwZXJ0aWVzIHJlZ2lzdGVyZWQgYnkgdGhlIHVzZXINCiAgICAqIEBwYXJhbSAge2VtYWlsfSAgICAgICAgICAgICAgZW1haWwNCiAgICAqIEBwYXJhbSAge2RvbWFpbn0gICAgICAgICAgICBkb21haW4gKE9wdGlvbmFsKQ0KICAgICogQHJldHVybiB7UHJvbWlzZX0gICAgICAgICAgUHJvbWlzZQ0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2Rpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcicsDQogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcihlbWFpbCwgZG9tYWluKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGFjdGl2ZURvbWFpbiA9IHZvaWQgMDsNCg0KICAgICAgcmV0dXJuIG5ldyBfcHJvbWlzZTIuZGVmYXVsdChmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQoNCiAgICAgICAgaWYgKGVtYWlsLmluY2x1ZGVzKCc6JykgJiYgIWVtYWlsLmluY2x1ZGVzKCd1c2VyOi8vJykpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygnW0Rpc2NvdmVyeS5kaXNjb3Zlckh5cGVydHldIGlzIGxlZ2FjeSBkb21haW4nKTsNCiAgICAgICAgICB2YXIgbGVnYWN5VXNlciA9IHsgdXNlcklEOiBlbWFpbCwgaHlwZXJ0eUlEOiBlbWFpbCwgc2NoZW1hOiBzY2hlbWEsIHJlc291cmNlczogcmVzb3VyY2VzIH07DQogICAgICAgICAgcmV0dXJuIHJlc29sdmUobGVnYWN5VXNlcik7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWRvbWFpbikgew0KICAgICAgICAgIGFjdGl2ZURvbWFpbiA9IF90aGlzLmRvbWFpbjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBhY3RpdmVEb21haW4gPSBkb21haW47DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgaWRlbnRpdHlVUkwgPSAndXNlcjovLycgKyBlbWFpbC5zdWJzdHJpbmcoZW1haWwuaW5kZXhPZignQCcpICsgMSwgZW1haWwubGVuZ3RoKSArICcvJyArIGVtYWlsLnN1YnN0cmluZygwLCBlbWFpbC5pbmRleE9mKCdAJykpOw0KDQogICAgICAgIC8vIG1lc3NhZ2UgdG8gcXVlcnkgZG9tYWluIHJlZ2lzdHJ5LCBhc2tpbmcgZm9yIGEgdXNlciBoeXBlcnR5Lg0KICAgICAgICB2YXIgbWVzc2FnZSA9IHsNCiAgICAgICAgICB0eXBlOiAncmVhZCcsIGZyb206IF90aGlzLmRpc2NvdmVyeVVSTCwgdG86ICdkb21haW46Ly9yZWdpc3RyeS4nICsgYWN0aXZlRG9tYWluICsgJy8nLCBib2R5OiB7IHJlc291cmNlOiBpZGVudGl0eVVSTCB9DQogICAgICAgIH07DQoNCiAgICAgICAgY29uc29sZS5pbmZvKCdbRGlzY292ZXJ5XSBNZXNzYWdlIGRpc2NvdmVySHlwZXJ0aWVzUGVyVXNlcjogJywgbWVzc2FnZSwgYWN0aXZlRG9tYWluLCBpZGVudGl0eVVSTCk7DQoNCiAgICAgICAgLy9jb25zb2xlLmluZm8oJ1tEaXNjb3ZlcnldIG1lc3NhZ2UgUkVBRCcsIG1lc3NhZ2UpOw0KDQogICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24gKHJlcGx5KSB7DQogICAgICAgICAgY29uc29sZS5pbmZvKCdbRGlzY292ZXJ5XSBkaXNjb3Zlckh5cGVydGllc1BlclVzZXIgcmVwbHknLCByZXBseSk7DQoNCiAgICAgICAgICB2YXIgdmFsdWUgPSByZXBseS5ib2R5LnZhbHVlOw0KDQogICAgICAgICAgaWYgKCF2YWx1ZSkgew0KICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgnVXNlciBIeXBlcnR5IG5vdCBmb3VuZCcpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJlc29sdmUodmFsdWUpOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICogIGZ1bmN0aW9uIHRvIGRlbGV0ZSBhbiBoeXBlcnR5SW5zdGFuY2UgaW4gdGhlIERvbWFpbiBSZWdpc3RyeQ0KICAgICogIEBwYXJhbSAgIHtTdHJpbmd9ICAgICAgICAgICB1c2VyICAgICAgICAgICAgICB1c2VyIHVybA0KICAgICogIEBwYXJhbSAgIHtTdHJpbmd9ICAgICAgICAgICBoeXBlcnR5SW5zdGFuY2UgICBIeXBlcnR5SW5zbnRhbmNlIHVybA0KICAgICogIEBwYXJhbSAgIHtkb21haW59ICAgICAgICAgICBkb21haW4gKE9wdGlvbmFsKQ0KICAgICogIEByZXR1cm4gIHtQcm9taXNlfSAgICAgICAgICBQcm9taXNlICAgICAgICAgIHJlc3VsdA0KICAgICovDQoNCiAgfSwgew0KICAgIGtleTogJ2RlbGV0ZUh5cGVydHknLA0KICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVIeXBlcnR5KHVzZXIsIGh5cGVydHlJbnN0YW5jZSwgZG9tYWluKSB7DQogICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KICAgICAgdmFyIGFjdGl2ZURvbWFpbiA9IHZvaWQgMDsNCg0KICAgICAgaWYgKCFkb21haW4pIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gX3RoaXMuZG9tYWluOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWN0aXZlRG9tYWluID0gZG9tYWluOw0KICAgICAgfQ0KDQogICAgICB2YXIgbXNnID0gew0KICAgICAgICB0eXBlOiAnZGVsZXRlJywgZnJvbTogX3RoaXMuZGlzY292ZXJ5VVJMLCB0bzogJ2RvbWFpbjovL3JlZ2lzdHJ5LicgKyBhY3RpdmVEb21haW4gKyAnLycsIGJvZHk6IHsgdmFsdWU6IHsgdXNlcjogdXNlciwgdXJsOiBoeXBlcnR5SW5zdGFuY2UgfSB9IH07DQoNCiAgICAgIHJldHVybiBuZXcgX3Byb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgew0KDQogICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobXNnLCBmdW5jdGlvbiAocmVwbHkpIHsNCg0KICAgICAgICAgIHZhciByZXNwb25zZSA9IHJlcGx5LmJvZHkuY29kZTsNCg0KICAgICAgICAgIGlmIChyZXNwb25zZSkgew0KICAgICAgICAgICAgcmVzb2x2ZSgnSHlwZXJ0eSBzdWNjZXNzZnVsbHkgZGVsZXRlZCcpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZWplY3QoJ0Vycm9yIG9uIGRlbGV0aW5nIGh5cGVydHknKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfQ0KICB9XSk7DQogIHJldHVybiBEaXNjb3Zlcnk7DQp9KCk7IC8qKg0KICAgICAqIENvcHlyaWdodCAyMDE2IFBUIElub3Zhw6fDo28gZSBTaXN0ZW1hcyBTQQ0KICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlEDQogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQogICAgICogQ29weXJpZ2h0IDIwMTYgRlJBVU5IT0ZFUi1HRVNFTExTQ0hBRlQgWlVSIEZPRVJERVJVTkcgREVSIEFOR0VXQU5EVEVOIEZPUlNDSFVORyBFLlYNCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0ENCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQogICAgICogQ29weXJpZ2h0IDIwMTYgQXBpemVlDQogICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4NCiAgICAgKg0KICAgICAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOw0KICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICAgKg0KICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogICAgICoNCiAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgICoqLw0KDQpleHBvcnRzLmRlZmF1bHQgPSBEaXNjb3Zlcnk7DQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsNCg0KLyoqKi8gfSksDQovKiAxMjggKi8sDQovKiAxMjkgKi8sDQovKiAxMzAgKi8sDQovKiAxMzEgKi8sDQovKiAxMzIgKi8sDQovKiAxMzMgKi8sDQovKiAxMzQgKi8sDQovKiAxMzUgKi8sDQovKiAxMzYgKi8sDQovKiAxMzcgKi8sDQovKiAxMzggKi8sDQovKiAxMzkgKi8sDQovKiAxNDAgKi8sDQovKiAxNDEgKi8sDQovKiAxNDIgKi8sDQovKiAxNDMgKi8sDQovKiAxNDQgKi8sDQovKiAxNDUgKi8sDQovKiAxNDYgKi8sDQovKiAxNDcgKi8sDQovKiAxNDggKi8sDQovKiAxNDkgKi8sDQovKiAxNTAgKi8sDQovKiAxNTEgKi8sDQovKiAxNTIgKi8sDQovKiAxNTMgKi8sDQovKiAxNTQgKi8sDQovKiAxNTUgKi8sDQovKiAxNTYgKi8sDQovKiAxNTcgKi8sDQovKiAxNTggKi8sDQovKiAxNTkgKi8sDQovKiAxNjAgKi8NCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX0Rpc2NvdmVyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI3KTsNCg0KdmFyIF9EaXNjb3ZlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGlzY292ZXJ5KTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KZXhwb3J0cy5kZWZhdWx0ID0gX0Rpc2NvdmVyeTIuZGVmYXVsdDsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KQ0KLyoqKioqKi8gXSk7DQp9KTsNCn0se31dLDY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewovLyB2ZXJzaW9uOiAwLjUuMQ0KLy8gZGF0ZTogTW9uIE1hciAyMCAyMDE3IDE1OjM2OjA1IEdNVCswMDAwIChXRVQpDQovLyBsaWNlbmNlOiANCi8qKg0KKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQNCiogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMDQoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQ0KKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHDQoqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTg0KKg0KKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCioNCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjANCioNCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLA0KKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4NCioqLw0KDQoNCihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7DQoJaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKQ0KCQltb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsNCgllbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkNCgkJZGVmaW5lKCJJZGVudGl0eUZhY3RvcnkiLCBbXSwgZmFjdG9yeSk7DQoJZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpDQoJCWV4cG9ydHNbIklkZW50aXR5RmFjdG9yeSJdID0gZmFjdG9yeSgpOw0KCWVsc2UNCgkJcm9vdFsiIl0gPSByb290WyIiXSB8fCB7fSwgcm9vdFsiIl1bIklkZW50aXR5RmFjdG9yeSJdID0gZmFjdG9yeSgpOw0KfSkodGhpcywgZnVuY3Rpb24oKSB7DQpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcA0KLyoqKioqKi8gCS8vIFRoZSBtb2R1bGUgY2FjaGUNCi8qKioqKiovIAl2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBUaGUgcmVxdWlyZSBmdW5jdGlvbg0KLyoqKioqKi8gCWZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZQ0KLyoqKioqKi8gCQlpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkNCi8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOw0KLyoqKioqKi8NCi8qKioqKiovIAkJLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSkNCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gew0KLyoqKioqKi8gCQkJaTogbW9kdWxlSWQsDQovKioqKioqLyAJCQlsOiBmYWxzZSwNCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9DQovKioqKioqLyAJCX07DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24NCi8qKioqKiovIAkJbW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7DQovKioqKioqLw0KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkDQovKioqKioqLyAJCW1vZHVsZS5sID0gdHJ1ZTsNCi8qKioqKiovDQovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlDQovKioqKioqLyAJCXJldHVybiBtb2R1bGUuZXhwb3J0czsNCi8qKioqKiovIAl9DQovKioqKioqLw0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKQ0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7DQovKioqKioqLw0KLyoqKioqKi8gCS8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsNCi8qKioqKiovDQovKioqKioqLyAJLy8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dA0KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTsNCi8qKioqKiovDQovKioqKioqLyAJLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7DQovKioqKioqLyAJCWlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHsNCi8qKioqKiovIAkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7DQovKioqKioqLyAJCQkJY29uZmlndXJhYmxlOiBmYWxzZSwNCi8qKioqKiovIAkJCQllbnVtZXJhYmxlOiB0cnVlLA0KLyoqKioqKi8gCQkJCWdldDogZ2V0dGVyDQovKioqKioqLyAJCQl9KTsNCi8qKioqKiovIAkJfQ0KLyoqKioqKi8gCX07DQovKioqKioqLw0KLyoqKioqKi8gCS8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7DQovKioqKioqLyAJCXZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPw0KLyoqKioqKi8gCQkJZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDoNCi8qKioqKiovIAkJCWZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07DQovKioqKioqLyAJCV9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTsNCi8qKioqKiovIAkJcmV0dXJuIGdldHRlcjsNCi8qKioqKiovIAl9Ow0KLyoqKioqKi8NCi8qKioqKiovIAkvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwNCi8qKioqKiovIAlfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07DQovKioqKioqLw0KLyoqKioqKi8gCS8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fDQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gIiI7DQovKioqKioqLw0KLyoqKioqKi8gCS8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cw0KLyoqKioqKi8gCXJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE2MSk7DQovKioqKioqLyB9KQ0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCi8qKioqKiovICh7DQoNCi8qKiovIDExOToNCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsNCg0KInVzZSBzdHJpY3QiOw0KDQoNCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsNCiAgdmFsdWU6IHRydWUNCn0pOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7DQoNCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsNCg0KZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0NCg0KLyoqDQoqIFRoZSBVc2VyUHJvZmlsZSBhY2NvcmRpbmcgdG8gVXNlciBJZGVudGl0eSBEYXRhIE1vZGVsDQoqLw0KDQp2YXIgVXNlclByb2ZpbGUgPSBmdW5jdGlvbiBVc2VyUHJvZmlsZSh1c2VybmFtZSwgdXNlclVSTCwgYXZhdGFyLCBjbiwgbG9jYWxlKSB7DQogICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIFVzZXJQcm9maWxlKTsNCg0KDQogIGlmICh1c2VybmFtZSkgew0KICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTsNCiAgfQ0KICBpZiAoYXZhdGFyKSB7DQogICAgdGhpcy5hdmF0YXIgPSBhdmF0YXI7DQogIH0NCiAgaWYgKGNuKSB7DQogICAgdGhpcy5jbiA9IGNuOw0KICB9DQogIGlmIChsb2NhbGUpIHsNCiAgICB0aGlzLmxvY2FsZSA9IGxvY2FsZTsNCiAgfQ0KICBpZiAodXNlclVSTCkgew0KICAgIHRoaXMudXNlclVSTCA9IHVzZXJVUkw7DQogIH0NCn07DQoNCmV4cG9ydHMuZGVmYXVsdCA9IFVzZXJQcm9maWxlOw0KbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWyJkZWZhdWx0Il07DQoNCi8qKiovIH0pLA0KDQovKioqLyAxMjg6DQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7DQogIHZhbHVlOiB0cnVlDQp9KTsNCg0KdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOw0KDQp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7DQoNCnZhciBfVXNlclByb2ZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7DQoNCnZhciBfVXNlclByb2ZpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVXNlclByb2ZpbGUpOw0KDQpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQ0KDQp2YXIgTWVzc2FnZUJvZHlJZGVudGl0eSA9IGZ1bmN0aW9uIE1lc3NhZ2VCb2R5SWRlbnRpdHkodXNlcm5hbWUsIHVzZXJVUkwsIGF2YXRhciwgY24sIGxvY2FsZSwgaWRwLCBhc3NlcnRpb24pIHsNCiAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgTWVzc2FnZUJvZHlJZGVudGl0eSk7DQoNCg0KICBpZiAoIWlkcCkgdGhyb3cgbmV3IEVycm9yKCdJRFAgc2hvdWxkIGJlIGEgcGFyYW1ldGVyJyk7DQogIGlmICghdXNlcm5hbWUpIHRocm93IG5ldyBFcnJvcigndXNlcm5hbWUgc2hvdWxkIGJlIGEgcGFyYW1ldGVyJyk7DQoNCiAgdGhpcy5pZHAgPSBpZHA7DQoNCiAgaWYgKGFzc2VydGlvbikgew0KICAgIHRoaXMuYXNzZXJ0aW9uID0gYXNzZXJ0aW9uOw0KICB9DQogIHRoaXMudXNlclByb2ZpbGUgPSBuZXcgX1VzZXJQcm9maWxlMi5kZWZhdWx0KHVzZXJuYW1lLCB1c2VyVVJMLCBhdmF0YXIsIGNuLCBsb2NhbGUpOw0KfTsgLyoqDQogICAqIFRoZSBJZGVudGl0eSBpbmZvIHRvIGJlIGFkZGVkIHRvIE1lc3NhZ2UuQm9keS5JZGVudGl0eQ0KICAgKi8NCg0KZXhwb3J0cy5kZWZhdWx0ID0gTWVzc2FnZUJvZHlJZGVudGl0eTsNCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOw0KDQovKioqLyB9KSwNCg0KLyoqKi8gMTYxOg0KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgew0KDQoidXNlIHN0cmljdCI7DQoNCg0KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgew0KICB2YWx1ZTogdHJ1ZQ0KfSk7DQpleHBvcnRzLlVzZXJQcm9maWxlID0gdW5kZWZpbmVkOw0KDQp2YXIgX1VzZXJQcm9maWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTkpOw0KDQp2YXIgX1VzZXJQcm9maWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1VzZXJQcm9maWxlKTsNCg0KdmFyIF9NZXNzYWdlQm9keUlkZW50aXR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpOw0KDQp2YXIgX01lc3NhZ2VCb2R5SWRlbnRpdHkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVzc2FnZUJvZHlJZGVudGl0eSk7DQoNCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9DQoNCmV4cG9ydHMuVXNlclByb2ZpbGUgPSBfVXNlclByb2ZpbGUyLmRlZmF1bHQ7DQpleHBvcnRzLmRlZmF1bHQgPSBfTWVzc2FnZUJvZHlJZGVudGl0eTIuZGVmYXVsdDsNCg0KLyoqKi8gfSksDQoNCi8qKiovIDg6DQovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7DQoNCiJ1c2Ugc3RyaWN0IjsNCg0KDQpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOw0KDQpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7DQogIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7DQogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7DQogIH0NCn07DQoNCi8qKiovIH0pDQoNCi8qKioqKiovIH0pOw0KfSk7DQp9LHt9XSw3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gdmVyc2lvbjogMC41LjEKLy8gZGF0ZTogTW9uIE1hciAyMCAyMDE3IDE1OjM2OjA1IEdNVCswMDAwIChXRVQpCi8vIGxpY2VuY2U6IAovKioKKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAoqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTAoqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRwoqIENvcHlyaWdodCAyMDE2IEFwaXplZQoqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCioKKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CioKKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoqCiogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCiogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoqKi8KCgooZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkgewoJaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKQoJCW1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwoJZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpCgkJZGVmaW5lKCJTeW5jaGVyIiwgW10sIGZhY3RvcnkpOwoJZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpCgkJZXhwb3J0c1siU3luY2hlciJdID0gZmFjdG9yeSgpOwoJZWxzZQoJCXJvb3RbIiJdID0gcm9vdFsiIl0gfHwge30sIHJvb3RbIiJdWyJTeW5jaGVyIl0gPSBmYWN0b3J5KCk7Cn0pKHRoaXMsIGZ1bmN0aW9uKCkgewpyZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyAJLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJdmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovIAlmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7Ci8qKioqKiovCi8qKioqKiovIAkJLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovIAkJaWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pCi8qKioqKiovIAkJCXJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzOwovKioqKioqLwovKioqKioqLyAJCS8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovIAkJdmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0gewovKioqKioqLyAJCQlpOiBtb2R1bGVJZCwKLyoqKioqKi8gCQkJbDogZmFsc2UsCi8qKioqKiovIAkJCWV4cG9ydHM6IHt9Ci8qKioqKiovIAkJfTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi8gCQltb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTsKLyoqKioqKi8KLyoqKioqKi8gCQkvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkCi8qKioqKiovIAkJbW9kdWxlLmwgPSB0cnVlOwovKioqKioqLwovKioqKioqLyAJCS8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovIAkJcmV0dXJuIG1vZHVsZS5leHBvcnRzOwovKioqKioqLyAJfQovKioqKioqLwovKioqKioqLwovKioqKioqLyAJLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXykKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7Ci8qKioqKiovCi8qKioqKiovIAkvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZQovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlczsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHQKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7Ci8qKioqKiovIAkJaWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkgewovKioqKioqLyAJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgewovKioqKioqLyAJCQkJY29uZmlndXJhYmxlOiBmYWxzZSwKLyoqKioqKi8gCQkJCWVudW1lcmFibGU6IHRydWUsCi8qKioqKiovIAkJCQlnZXQ6IGdldHRlcgovKioqKioqLyAJCQl9KTsKLyoqKioqKi8gCQl9Ci8qKioqKiovIAl9OwovKioqKioqLwovKioqKioqLyAJLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkgewovKioqKioqLyAJCXZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgPwovKioqKioqLyAJCQlmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOgovKioqKioqLyAJCQlmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9OwovKioqKioqLyAJCV9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTsKLyoqKioqKi8gCQlyZXR1cm4gZ2V0dGVyOwovKioqKioqLyAJfTsKLyoqKioqKi8KLyoqKioqKi8gCS8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbAovKioqKioqLyAJX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9OwovKioqKioqLwovKioqKioqLyAJLy8gX193ZWJwYWNrX3B1YmxpY19wYXRoX18KLyoqKioqKi8gCV9fd2VicGFja19yZXF1aXJlX18ucCA9ICIiOwovKioqKioqLwovKioqKioqLyAJLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCi8qKioqKiovIAlyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNjYpOwovKioqKioqLyB9KQovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwovKioqKioqLyAoWwovKiAwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCnZhciBjb3JlID0gbW9kdWxlLmV4cG9ydHMgPSB7dmVyc2lvbjogJzIuNC4wJ307CmlmKHR5cGVvZiBfX2UgPT0gJ251bWJlcicpX19lID0gY29yZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKLyoqKi8gfSksCi8qIDEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzg2I2lzc3VlY29tbWVudC0xMTU3NTkwMjgKdmFyIGdsb2JhbCA9IG1vZHVsZS5leHBvcnRzID0gdHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuTWF0aCA9PSBNYXRoCiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpOwppZih0eXBlb2YgX19nID09ICdudW1iZXInKV9fZyA9IGdsb2JhbDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZgoKLyoqKi8gfSksCi8qIDIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gVGhhbmsncyBJRTggZm9yIGhpcyBmdW5ueSBkZWZpbmVQcm9wZXJ0eQptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIDc7IH19KS5hICE9IDc7Cn0pOwoKLyoqKi8gfSksCi8qIDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHN0b3JlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSgnd2tzJykKICAsIHVpZCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKQogICwgU3ltYm9sICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuU3ltYm9sCiAgLCBVU0VfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PSAnZnVuY3Rpb24nOwoKdmFyICRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKXsKICByZXR1cm4gc3RvcmVbbmFtZV0gfHwgKHN0b3JlW25hbWVdID0KICAgIFVTRV9TWU1CT0wgJiYgU3ltYm9sW25hbWVdIHx8IChVU0VfU1lNQk9MID8gU3ltYm9sIDogdWlkKSgnU3ltYm9sLicgKyBuYW1lKSk7Cn07CgokZXhwb3J0cy5zdG9yZSA9IHN0b3JlOwoKLyoqKi8gfSksCi8qIDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQogICwgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgZFAgICAgICAgICAgICAgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CgpleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5IDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcyl7CiAgYW5PYmplY3QoTyk7CiAgUCA9IHRvUHJpbWl0aXZlKFAsIHRydWUpOwogIGFuT2JqZWN0KEF0dHJpYnV0ZXMpOwogIGlmKElFOF9ET01fREVGSU5FKXRyeSB7CiAgICByZXR1cm4gZFAoTywgUCwgQXR0cmlidXRlcyk7CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQogIGlmKCdnZXQnIGluIEF0dHJpYnV0ZXMgfHwgJ3NldCcgaW4gQXR0cmlidXRlcyl0aHJvdyBUeXBlRXJyb3IoJ0FjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIScpOwogIGlmKCd2YWx1ZScgaW4gQXR0cmlidXRlcylPW1BdID0gQXR0cmlidXRlcy52YWx1ZTsKICByZXR1cm4gTzsKfTsKCi8qKiovIH0pLAovKiA1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIGlmKCFpc09iamVjdChpdCkpdGhyb3cgVHlwZUVycm9yKGl0ICsgJyBpcyBub3QgYW4gb2JqZWN0IScpOwogIHJldHVybiBpdDsKfTsKCi8qKiovIH0pLAovKiA2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiB0eXBlb2YgaXQgPT09ICdvYmplY3QnID8gaXQgIT09IG51bGwgOiB0eXBlb2YgaXQgPT09ICdmdW5jdGlvbic7Cn07CgovKioqLyB9KSwKLyogNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZFAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsIGNyZWF0ZURlc2MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpID8gZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICByZXR1cm4gZFAuZihvYmplY3QsIGtleSwgY3JlYXRlRGVzYygxLCB2YWx1ZSkpOwp9IDogZnVuY3Rpb24ob2JqZWN0LCBrZXksIHZhbHVlKXsKICBvYmplY3Rba2V5XSA9IHZhbHVlOwogIHJldHVybiBvYmplY3Q7Cn07CgovKioqLyB9KSwKLyogOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsKCmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9OwoKLyoqKi8gfSksCi8qIDkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGdsb2JhbCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGN0eCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpCiAgLCBoaWRlICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBQUk9UT1RZUEUgPSAncHJvdG90eXBlJzsKCnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXsKICB2YXIgSVNfRk9SQ0VEID0gdHlwZSAmICRleHBvcnQuRgogICAgLCBJU19HTE9CQUwgPSB0eXBlICYgJGV4cG9ydC5HCiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlMKICAgICwgSVNfUFJPVE8gID0gdHlwZSAmICRleHBvcnQuUAogICAgLCBJU19CSU5EICAgPSB0eXBlICYgJGV4cG9ydC5CCiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LlcKICAgICwgZXhwb3J0cyAgID0gSVNfR0xPQkFMID8gY29yZSA6IGNvcmVbbmFtZV0gfHwgKGNvcmVbbmFtZV0gPSB7fSkKICAgICwgZXhwUHJvdG8gID0gZXhwb3J0c1tQUk9UT1RZUEVdCiAgICAsIHRhcmdldCAgICA9IElTX0dMT0JBTCA/IGdsb2JhbCA6IElTX1NUQVRJQyA/IGdsb2JhbFtuYW1lXSA6IChnbG9iYWxbbmFtZV0gfHwge30pW1BST1RPVFlQRV0KICAgICwga2V5LCBvd24sIG91dDsKICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTsKICBmb3Ioa2V5IGluIHNvdXJjZSl7CiAgICAvLyBjb250YWlucyBpbiBuYXRpdmUKICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIHRhcmdldFtrZXldICE9PSB1bmRlZmluZWQ7CiAgICBpZihvd24gJiYga2V5IGluIGV4cG9ydHMpY29udGludWU7CiAgICAvLyBleHBvcnQgbmF0aXZlIG9yIHBhc3NlZAogICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTsKICAgIC8vIHByZXZlbnQgZ2xvYmFsIHBvbGx1dGlvbiBmb3IgbmFtZXNwYWNlcwogICAgZXhwb3J0c1trZXldID0gSVNfR0xPQkFMICYmIHR5cGVvZiB0YXJnZXRba2V5XSAhPSAnZnVuY3Rpb24nID8gc291cmNlW2tleV0KICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0CiAgICA6IElTX0JJTkQgJiYgb3duID8gY3R4KG91dCwgZ2xvYmFsKQogICAgLy8gd3JhcCBnbG9iYWwgY29uc3RydWN0b3JzIGZvciBwcmV2ZW50IGNoYW5nZSB0aGVtIGluIGxpYnJhcnkKICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7CiAgICAgIHZhciBGID0gZnVuY3Rpb24oYSwgYiwgYyl7CiAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mIEMpewogICAgICAgICAgc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpewogICAgICAgICAgICBjYXNlIDA6IHJldHVybiBuZXcgQzsKICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEMoYSk7CiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIG5ldyBDKGEsIGIpOwogICAgICAgICAgfSByZXR1cm4gbmV3IEMoYSwgYiwgYyk7CiAgICAgICAgfSByZXR1cm4gQy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgICBGW1BST1RPVFlQRV0gPSBDW1BST1RPVFlQRV07CiAgICAgIHJldHVybiBGOwogICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzCiAgICB9KShvdXQpIDogSVNfUFJPVE8gJiYgdHlwZW9mIG91dCA9PSAnZnVuY3Rpb24nID8gY3R4KEZ1bmN0aW9uLmNhbGwsIG91dCkgOiBvdXQ7CiAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUubWV0aG9kcy4lTkFNRSUKICAgIGlmKElTX1BST1RPKXsKICAgICAgKGV4cG9ydHMudmlydHVhbCB8fCAoZXhwb3J0cy52aXJ0dWFsID0ge30pKVtrZXldID0gb3V0OwogICAgICAvLyBleHBvcnQgcHJvdG8gbWV0aG9kcyB0byBjb3JlLiVDT05TVFJVQ1RPUiUucHJvdG90eXBlLiVOQU1FJQogICAgICBpZih0eXBlICYgJGV4cG9ydC5SICYmIGV4cFByb3RvICYmICFleHBQcm90b1trZXldKWhpZGUoZXhwUHJvdG8sIGtleSwgb3V0KTsKICAgIH0KICB9Cn07Ci8vIHR5cGUgYml0bWFwCiRleHBvcnQuRiA9IDE7ICAgLy8gZm9yY2VkCiRleHBvcnQuRyA9IDI7ICAgLy8gZ2xvYmFsCiRleHBvcnQuUyA9IDQ7ICAgLy8gc3RhdGljCiRleHBvcnQuUCA9IDg7ICAgLy8gcHJvdG8KJGV4cG9ydC5CID0gMTY7ICAvLyBiaW5kCiRleHBvcnQuVyA9IDMyOyAgLy8gd3JhcAokZXhwb3J0LlUgPSA2NDsgIC8vIHNhZmUKJGV4cG9ydC5SID0gMTI4OyAvLyByZWFsIHByb3RvIG1ldGhvZCBmb3IgYGxpYnJhcnlgIAptb2R1bGUuZXhwb3J0cyA9ICRleHBvcnQ7CgovKioqLyB9KSwKLyogMTAgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX2RlZmluZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7Cgp2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgKDAsIF9kZWZpbmVQcm9wZXJ0eTIuZGVmYXVsdCkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICB9CiAgfQoKICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgcmV0dXJuIENvbnN0cnVjdG9yOwogIH07Cn0oKTsKCi8qKiovIH0pLAovKiAxMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpewogIHRyeSB7CiAgICByZXR1cm4gISFleGVjKCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB0cnVlOwogIH0KfTsKCi8qKiovIH0pLAovKiAxMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgaGFzT3duUHJvcGVydHkgPSB7fS5oYXNPd25Qcm9wZXJ0eTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwga2V5KXsKICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChpdCwga2V5KTsKfTsKCi8qKiovIH0pLAovKiAxMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyB0byBpbmRleGVkIG9iamVjdCwgdG9PYmplY3Qgd2l0aCBmYWxsYmFjayBmb3Igbm9uLWFycmF5LWxpa2UgRVMzIHN0cmluZ3MKdmFyIElPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KQogICwgZGVmaW5lZCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gSU9iamVjdChkZWZpbmVkKGl0KSk7Cn07CgovKioqLyB9KSwKLyogMTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gb3B0aW9uYWwgLyBzaW1wbGUgY29udGV4dCBiaW5kaW5nCnZhciBhRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbiwgdGhhdCwgbGVuZ3RoKXsKICBhRnVuY3Rpb24oZm4pOwogIGlmKHRoYXQgPT09IHVuZGVmaW5lZClyZXR1cm4gZm47CiAgc3dpdGNoKGxlbmd0aCl7CiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXsKICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSk7CiAgICB9OwogICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7CiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEsIGIpOwogICAgfTsKICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpewogICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiLCBjKTsKICAgIH07CiAgfQogIHJldHVybiBmdW5jdGlvbigvKiAuLi5hcmdzICovKXsKICAgIHJldHVybiBmbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogIH07Cn07CgovKioqLyB9KSwKLyogMTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihiaXRtYXAsIHZhbHVlKXsKICByZXR1cm4gewogICAgZW51bWVyYWJsZSAgOiAhKGJpdG1hcCAmIDEpLAogICAgY29uZmlndXJhYmxlOiAhKGJpdG1hcCAmIDIpLAogICAgd3JpdGFibGUgICAgOiAhKGJpdG1hcCAmIDQpLAogICAgdmFsdWUgICAgICAgOiB2YWx1ZQogIH07Cn07CgovKioqLyB9KSwKLyogMTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKbW9kdWxlLmV4cG9ydHMgPSB7fTsKCi8qKiovIH0pLAovKiAxNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpCiAgLCBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMSkuZG9jdW1lbnQKICAvLyBpbiBvbGQgSUUgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgaXMgJ29iamVjdCcKICAsIGlzID0gaXNPYmplY3QoZG9jdW1lbnQpICYmIGlzT2JqZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXMgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGl0KSA6IHt9Owp9OwoKLyoqKi8gfSksCi8qIDE4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDE5LjEuMi4xNCAvIDE1LjIuMy4xNCBPYmplY3Qua2V5cyhPKQp2YXIgJGtleXMgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTsKCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24ga2V5cyhPKXsKICByZXR1cm4gJGtleXMoTywgZW51bUJ1Z0tleXMpOwp9OwoKLyoqKi8gfSksCi8qIDE5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIGlmKHR5cGVvZiBpdCAhPSAnZnVuY3Rpb24nKXRocm93IFR5cGVFcnJvcihpdCArICcgaXMgbm90IGEgZnVuY3Rpb24hJyk7CiAgcmV0dXJuIGl0Owp9OwoKLyoqKi8gfSksCi8qIDIwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCnZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoaXQpLnNsaWNlKDgsIC0xKTsKfTsKCi8qKiovIH0pLAovKiAyMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMSBUb1ByaW1pdGl2ZShpbnB1dCBbLCBQcmVmZXJyZWRUeXBlXSkKdmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTsKLy8gaW5zdGVhZCBvZiB0aGUgRVM2IHNwZWMgdmVyc2lvbiwgd2UgZGlkbid0IGltcGxlbWVudCBAQHRvUHJpbWl0aXZlIGNhc2UKLy8gYW5kIHRoZSBzZWNvbmQgYXJndW1lbnQgLSBmbGFnIC0gcHJlZmVycmVkIHR5cGUgaXMgYSBzdHJpbmcKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCwgUyl7CiAgaWYoIWlzT2JqZWN0KGl0KSlyZXR1cm4gaXQ7CiAgdmFyIGZuLCB2YWw7CiAgaWYoUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIGlmKHR5cGVvZiAoZm4gPSBpdC52YWx1ZU9mKSA9PSAnZnVuY3Rpb24nICYmICFpc09iamVjdCh2YWwgPSBmbi5jYWxsKGl0KSkpcmV0dXJuIHZhbDsKICBpZighUyAmJiB0eXBlb2YgKGZuID0gaXQudG9TdHJpbmcpID09ICdmdW5jdGlvbicgJiYgIWlzT2JqZWN0KHZhbCA9IGZuLmNhbGwoaXQpKSlyZXR1cm4gdmFsOwogIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7Cn07CgovKioqLyB9KSwKLyogMjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGRlZiA9IF9fd2VicGFja19yZXF1aXJlX18oNCkuZgogICwgaGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIFRBRyA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ3RvU3RyaW5nVGFnJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0LCB0YWcsIHN0YXQpewogIGlmKGl0ICYmICFoYXMoaXQgPSBzdGF0ID8gaXQgOiBpdC5wcm90b3R5cGUsIFRBRykpZGVmKGl0LCBUQUcsIHtjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiB0YWd9KTsKfTsKCi8qKiovIH0pLAovKiAyMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgp2YXIgaWQgPSAwCiAgLCBweCA9IE1hdGgucmFuZG9tKCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oa2V5KXsKICByZXR1cm4gJ1N5bWJvbCgnLmNvbmNhdChrZXkgPT09IHVuZGVmaW5lZCA/ICcnIDoga2V5LCAnKV8nLCAoKytpZCArIHB4KS50b1N0cmluZygzNikpOwp9OwoKLyoqKi8gfSksCi8qIDI0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIDcuMi4xIFJlcXVpcmVPYmplY3RDb2VyY2libGUoYXJndW1lbnQpCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICAiICsgaXQpOwogIHJldHVybiBpdDsKfTsKCi8qKiovIH0pLAovKiAyNSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9ICFfX3dlYnBhY2tfcmVxdWlyZV9fKDIpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoX193ZWJwYWNrX3JlcXVpcmVfXygxNykoJ2RpdicpLCAnYScsIHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiA3OyB9fSkuYSAhPSA3Owp9KTsKCi8qKiovIH0pLAovKiAyNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHRydWU7CgovKioqLyB9KSwKLyogMjcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHNoYXJlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzApKCdrZXlzJykKICAsIHVpZCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CiAgcmV0dXJuIHNoYXJlZFtrZXldIHx8IChzaGFyZWRba2V5XSA9IHVpZChrZXkpKTsKfTsKCi8qKiovIH0pLAovKiAyOCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CgovLyA3LjEuNCBUb0ludGVnZXIKdmFyIGNlaWwgID0gTWF0aC5jZWlsCiAgLCBmbG9vciA9IE1hdGguZmxvb3I7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBpc05hTihpdCA9ICtpdCkgPyAwIDogKGl0ID4gMCA/IGZsb29yIDogY2VpbCkoaXQpOwp9OwoKLyoqKi8gfSksCi8qIDI5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCi8vIElFIDgtIGRvbid0IGVudW0gYnVnIGtleXMKbW9kdWxlLmV4cG9ydHMgPSAoCiAgJ2NvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZicKKS5zcGxpdCgnLCcpOwoKLyoqKi8gfSksCi8qIDMwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBnbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBTSEFSRUQgPSAnX19jb3JlLWpzX3NoYXJlZF9fJwogICwgc3RvcmUgID0gZ2xvYmFsW1NIQVJFRF0gfHwgKGdsb2JhbFtTSEFSRURdID0ge30pOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleSl7CiAgcmV0dXJuIHN0b3JlW2tleV0gfHwgKHN0b3JlW2tleV0gPSB7fSk7Cn07CgovKioqLyB9KSwKLyogMzEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg3OSksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAzMiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjEuMTMgVG9PYmplY3QoYXJndW1lbnQpCnZhciBkZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpewogIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpOwp9OwoKLyoqKi8gfSksCi8qIDMzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oMzYpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogMzQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX3NldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NSk7Cgp2YXIgX3NldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldFByb3RvdHlwZU9mKTsKCnZhciBfY3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3NCk7Cgp2YXIgX2NyZWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGUpOwoKdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7Cgp2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsKICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09ICJmdW5jdGlvbiIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogKDAsIF90eXBlb2YzLmRlZmF1bHQpKHN1cGVyQ2xhc3MpKSk7CiAgfQoKICBzdWJDbGFzcy5wcm90b3R5cGUgPSAoMCwgX2NyZWF0ZTIuZGVmYXVsdCkoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgewogICAgY29uc3RydWN0b3I6IHsKICAgICAgdmFsdWU6IHN1YkNsYXNzLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgd3JpdGFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogICAgfQogIH0pOwogIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2YyLmRlZmF1bHQgPyAoMCwgX3NldFByb3RvdHlwZU9mMi5kZWZhdWx0KShzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOwp9OwoKLyoqKi8gfSksCi8qIDM1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOwoKdmFyIF90eXBlb2YyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OSk7Cgp2YXIgX3R5cGVvZjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90eXBlb2YyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkgewogIGlmICghc2VsZikgewogICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTsKICB9CgogIHJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiAoMCwgX3R5cGVvZjMuZGVmYXVsdCkoY2FsbCkpID09PSAib2JqZWN0IiB8fCB0eXBlb2YgY2FsbCA9PT0gImZ1bmN0aW9uIikgPyBjYWxsIDogc2VsZjsKfTsKCi8qKiovIH0pLAovKiAzNiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKXsKICByZXR1cm4gJE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBkZXNjKTsKfTsKCi8qKiovIH0pLAovKiAzNyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKdmFyIGFuT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQogICwgZFBzICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KQogICwgZW51bUJ1Z0tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KQogICwgSUVfUFJPVE8gICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KSgnSUVfUFJPVE8nKQogICwgRW1wdHkgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9CiAgLCBQUk9UT1RZUEUgICA9ICdwcm90b3R5cGUnOwoKLy8gQ3JlYXRlIG9iamVjdCB3aXRoIGZha2UgYG51bGxgIHByb3RvdHlwZTogdXNlIGlmcmFtZSBPYmplY3Qgd2l0aCBjbGVhcmVkIHByb3RvdHlwZQp2YXIgY3JlYXRlRGljdCA9IGZ1bmN0aW9uKCl7CiAgLy8gVGhyYXNoLCB3YXN0ZSBhbmQgc29kb215OiBJRSBHQyBidWcKICB2YXIgaWZyYW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNykoJ2lmcmFtZScpCiAgICAsIGkgICAgICA9IGVudW1CdWdLZXlzLmxlbmd0aAogICAgLCBsdCAgICAgPSAnPCcKICAgICwgZ3QgICAgID0gJz4nCiAgICAsIGlmcmFtZURvY3VtZW50OwogIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogIF9fd2VicGFja19yZXF1aXJlX18oNDIpLmFwcGVuZENoaWxkKGlmcmFtZSk7CiAgaWZyYW1lLnNyYyA9ICdqYXZhc2NyaXB0Oic7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2NyaXB0LXVybAogIC8vIGNyZWF0ZURpY3QgPSBpZnJhbWUuY29udGVudFdpbmRvdy5PYmplY3Q7CiAgLy8gaHRtbC5yZW1vdmVDaGlsZChpZnJhbWUpOwogIGlmcmFtZURvY3VtZW50ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgaWZyYW1lRG9jdW1lbnQub3BlbigpOwogIGlmcmFtZURvY3VtZW50LndyaXRlKGx0ICsgJ3NjcmlwdCcgKyBndCArICdkb2N1bWVudC5GPU9iamVjdCcgKyBsdCArICcvc2NyaXB0JyArIGd0KTsKICBpZnJhbWVEb2N1bWVudC5jbG9zZSgpOwogIGNyZWF0ZURpY3QgPSBpZnJhbWVEb2N1bWVudC5GOwogIHdoaWxlKGktLSlkZWxldGUgY3JlYXRlRGljdFtQUk9UT1RZUEVdW2VudW1CdWdLZXlzW2ldXTsKICByZXR1cm4gY3JlYXRlRGljdCgpOwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIGNyZWF0ZShPLCBQcm9wZXJ0aWVzKXsKICB2YXIgcmVzdWx0OwogIGlmKE8gIT09IG51bGwpewogICAgRW1wdHlbUFJPVE9UWVBFXSA9IGFuT2JqZWN0KE8pOwogICAgcmVzdWx0ID0gbmV3IEVtcHR5OwogICAgRW1wdHlbUFJPVE9UWVBFXSA9IG51bGw7CiAgICAvLyBhZGQgIl9fcHJvdG9fXyIgZm9yIE9iamVjdC5nZXRQcm90b3R5cGVPZiBwb2x5ZmlsbAogICAgcmVzdWx0W0lFX1BST1RPXSA9IE87CiAgfSBlbHNlIHJlc3VsdCA9IGNyZWF0ZURpY3QoKTsKICByZXR1cm4gUHJvcGVydGllcyA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogZFBzKHJlc3VsdCwgUHJvcGVydGllcyk7Cn07CgoKLyoqKi8gfSksCi8qIDM4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsKLy8gMTkuMS4yLjQgLyAxNS4yLjMuNiBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAhX193ZWJwYWNrX3JlcXVpcmVfXygyKSwgJ09iamVjdCcsIHtkZWZpbmVQcm9wZXJ0eTogX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mfSk7CgovKioqLyB9KSwKLyogMzkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKdmFyIExJQlJBUlkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNikKICAsICRleHBvcnQgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQogICwgcmVkZWZpbmUgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KQogICwgaGlkZSAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBoYXMgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpCiAgLCBJdGVyYXRvcnMgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpCiAgLCAkaXRlckNyZWF0ZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpCiAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpCiAgLCBnZXRQcm90b3R5cGVPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNDMpCiAgLCBJVEVSQVRPUiAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJykKICAsIEJVR0dZICAgICAgICAgID0gIShbXS5rZXlzICYmICduZXh0JyBpbiBbXS5rZXlzKCkpIC8vIFNhZmFyaSBoYXMgYnVnZ3kgaXRlcmF0b3JzIHcvbyBgbmV4dGAKICAsIEZGX0lURVJBVE9SICAgID0gJ0BAaXRlcmF0b3InCiAgLCBLRVlTICAgICAgICAgICA9ICdrZXlzJwogICwgVkFMVUVTICAgICAgICAgPSAndmFsdWVzJzsKCnZhciByZXR1cm5UaGlzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH07Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKEJhc2UsIE5BTUUsIENvbnN0cnVjdG9yLCBuZXh0LCBERUZBVUxULCBJU19TRVQsIEZPUkNFRCl7CiAgJGl0ZXJDcmVhdGUoQ29uc3RydWN0b3IsIE5BTUUsIG5leHQpOwogIHZhciBnZXRNZXRob2QgPSBmdW5jdGlvbihraW5kKXsKICAgIGlmKCFCVUdHWSAmJiBraW5kIGluIHByb3RvKXJldHVybiBwcm90b1traW5kXTsKICAgIHN3aXRjaChraW5kKXsKICAgICAgY2FzZSBLRVlTOiByZXR1cm4gZnVuY3Rpb24ga2V5cygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogICAgICBjYXNlIFZBTFVFUzogcmV0dXJuIGZ1bmN0aW9uIHZhbHVlcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogICAgfSByZXR1cm4gZnVuY3Rpb24gZW50cmllcygpeyByZXR1cm4gbmV3IENvbnN0cnVjdG9yKHRoaXMsIGtpbmQpOyB9OwogIH07CiAgdmFyIFRBRyAgICAgICAgPSBOQU1FICsgJyBJdGVyYXRvcicKICAgICwgREVGX1ZBTFVFUyA9IERFRkFVTFQgPT0gVkFMVUVTCiAgICAsIFZBTFVFU19CVUcgPSBmYWxzZQogICAgLCBwcm90byAgICAgID0gQmFzZS5wcm90b3R5cGUKICAgICwgJG5hdGl2ZSAgICA9IHByb3RvW0lURVJBVE9SXSB8fCBwcm90b1tGRl9JVEVSQVRPUl0gfHwgREVGQVVMVCAmJiBwcm90b1tERUZBVUxUXQogICAgLCAkZGVmYXVsdCAgID0gJG5hdGl2ZSB8fCBnZXRNZXRob2QoREVGQVVMVCkKICAgICwgJGVudHJpZXMgICA9IERFRkFVTFQgPyAhREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKCdlbnRyaWVzJykgOiB1bmRlZmluZWQKICAgICwgJGFueU5hdGl2ZSA9IE5BTUUgPT0gJ0FycmF5JyA/IHByb3RvLmVudHJpZXMgfHwgJG5hdGl2ZSA6ICRuYXRpdmUKICAgICwgbWV0aG9kcywga2V5LCBJdGVyYXRvclByb3RvdHlwZTsKICAvLyBGaXggbmF0aXZlCiAgaWYoJGFueU5hdGl2ZSl7CiAgICBJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvdHlwZU9mKCRhbnlOYXRpdmUuY2FsbChuZXcgQmFzZSkpOwogICAgaWYoSXRlcmF0b3JQcm90b3R5cGUgIT09IE9iamVjdC5wcm90b3R5cGUpewogICAgICAvLyBTZXQgQEB0b1N0cmluZ1RhZyB0byBuYXRpdmUgaXRlcmF0b3JzCiAgICAgIHNldFRvU3RyaW5nVGFnKEl0ZXJhdG9yUHJvdG90eXBlLCBUQUcsIHRydWUpOwogICAgICAvLyBmaXggZm9yIHNvbWUgb2xkIGVuZ2luZXMKICAgICAgaWYoIUxJQlJBUlkgJiYgIWhhcyhJdGVyYXRvclByb3RvdHlwZSwgSVRFUkFUT1IpKWhpZGUoSXRlcmF0b3JQcm90b3R5cGUsIElURVJBVE9SLCByZXR1cm5UaGlzKTsKICAgIH0KICB9CiAgLy8gZml4IEFycmF5I3t2YWx1ZXMsIEBAaXRlcmF0b3J9Lm5hbWUgaW4gVjggLyBGRgogIGlmKERFRl9WQUxVRVMgJiYgJG5hdGl2ZSAmJiAkbmF0aXZlLm5hbWUgIT09IFZBTFVFUyl7CiAgICBWQUxVRVNfQlVHID0gdHJ1ZTsKICAgICRkZWZhdWx0ID0gZnVuY3Rpb24gdmFsdWVzKCl7IHJldHVybiAkbmF0aXZlLmNhbGwodGhpcyk7IH07CiAgfQogIC8vIERlZmluZSBpdGVyYXRvcgogIGlmKCghTElCUkFSWSB8fCBGT1JDRUQpICYmIChCVUdHWSB8fCBWQUxVRVNfQlVHIHx8ICFwcm90b1tJVEVSQVRPUl0pKXsKICAgIGhpZGUocHJvdG8sIElURVJBVE9SLCAkZGVmYXVsdCk7CiAgfQogIC8vIFBsdWcgZm9yIGxpYnJhcnkKICBJdGVyYXRvcnNbTkFNRV0gPSAkZGVmYXVsdDsKICBJdGVyYXRvcnNbVEFHXSAgPSByZXR1cm5UaGlzOwogIGlmKERFRkFVTFQpewogICAgbWV0aG9kcyA9IHsKICAgICAgdmFsdWVzOiAgREVGX1ZBTFVFUyA/ICRkZWZhdWx0IDogZ2V0TWV0aG9kKFZBTFVFUyksCiAgICAgIGtleXM6ICAgIElTX1NFVCAgICAgPyAkZGVmYXVsdCA6IGdldE1ldGhvZChLRVlTKSwKICAgICAgZW50cmllczogJGVudHJpZXMKICAgIH07CiAgICBpZihGT1JDRUQpZm9yKGtleSBpbiBtZXRob2RzKXsKICAgICAgaWYoIShrZXkgaW4gcHJvdG8pKXJlZGVmaW5lKHByb3RvLCBrZXksIG1ldGhvZHNba2V5XSk7CiAgICB9IGVsc2UgJGV4cG9ydCgkZXhwb3J0LlAgKyAkZXhwb3J0LkYgKiAoQlVHR1kgfHwgVkFMVUVTX0JVRyksIE5BTUUsIG1ldGhvZHMpOwogIH0KICByZXR1cm4gbWV0aG9kczsKfTsKCi8qKiovIH0pLAovKiA0MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDQxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCmV4cG9ydHMuZiA9IHt9LnByb3BlcnR5SXNFbnVtZXJhYmxlOwoKLyoqKi8gfSksCi8qIDQyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5kb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgovKioqLyB9KSwKLyogNDMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjkgLyAxNS4yLjMuMiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykKdmFyIGhhcyAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIHRvT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMikKICAsIElFX1BST1RPICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykoJ0lFX1BST1RPJykKICAsIE9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTsKCm1vZHVsZS5leHBvcnRzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uKE8pewogIE8gPSB0b09iamVjdChPKTsKICBpZihoYXMoTywgSUVfUFJPVE8pKXJldHVybiBPW0lFX1BST1RPXTsKICBpZih0eXBlb2YgTy5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmIE8gaW5zdGFuY2VvZiBPLmNvbnN0cnVjdG9yKXsKICAgIHJldHVybiBPLmNvbnN0cnVjdG9yLnByb3RvdHlwZTsKICB9IHJldHVybiBPIGluc3RhbmNlb2YgT2JqZWN0ID8gT2JqZWN0UHJvdG8gOiBudWxsOwp9OwoKLyoqKi8gfSksCi8qIDQ0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBoYXMgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQogICwgdG9JT2JqZWN0ICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsIGFycmF5SW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpKGZhbHNlKQogICwgSUVfUFJPVE8gICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNykoJ0lFX1BST1RPJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZXMpewogIHZhciBPICAgICAgPSB0b0lPYmplY3Qob2JqZWN0KQogICAgLCBpICAgICAgPSAwCiAgICAsIHJlc3VsdCA9IFtdCiAgICAsIGtleTsKICBmb3Ioa2V5IGluIE8paWYoa2V5ICE9IElFX1BST1RPKWhhcyhPLCBrZXkpICYmIHJlc3VsdC5wdXNoKGtleSk7CiAgLy8gRG9uJ3QgZW51bSBidWcgJiBoaWRkZW4ga2V5cwogIHdoaWxlKG5hbWVzLmxlbmd0aCA+IGkpaWYoaGFzKE8sIGtleSA9IG5hbWVzW2krK10pKXsKICAgIH5hcnJheUluZGV4T2YocmVzdWx0LCBrZXkpIHx8IHJlc3VsdC5wdXNoKGtleSk7CiAgfQogIHJldHVybiByZXN1bHQ7Cn07CgovKioqLyB9KSwKLyogNDUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gbW9zdCBPYmplY3QgbWV0aG9kcyBieSBFUzYgc2hvdWxkIGFjY2VwdCBwcmltaXRpdmVzCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQogICwgY29yZSAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkKICAsIGZhaWxzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVksIGV4ZWMpewogIHZhciBmbiAgPSAoY29yZS5PYmplY3QgfHwge30pW0tFWV0gfHwgT2JqZWN0W0tFWV0KICAgICwgZXhwID0ge307CiAgZXhwW0tFWV0gPSBleGVjKGZuKTsKICAkZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIGZhaWxzKGZ1bmN0aW9uKCl7IGZuKDEpOyB9KSwgJ09iamVjdCcsIGV4cCk7Cn07CgovKioqLyB9KSwKLyogNDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpOwoKLyoqKi8gfSksCi8qIDQ3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDcuMS4xNSBUb0xlbmd0aAp2YXIgdG9JbnRlZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCkKICAsIG1pbiAgICAgICA9IE1hdGgubWluOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXQgPiAwID8gbWluKHRvSW50ZWdlcihpdCksIDB4MWZmZmZmZmZmZmZmZmYpIDogMDsgLy8gcG93KDIsIDUzKSAtIDEgPT0gOTAwNzE5OTI1NDc0MDk5MQp9OwoKLyoqKi8gfSksCi8qIDQ4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBnbG9iYWwgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQogICwgTElCUkFSWSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KQogICwgd2tzRXh0ICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KQogICwgZGVmaW5lUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLmY7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSl7CiAgdmFyICRTeW1ib2wgPSBjb3JlLlN5bWJvbCB8fCAoY29yZS5TeW1ib2wgPSBMSUJSQVJZID8ge30gOiBnbG9iYWwuU3ltYm9sIHx8IHt9KTsKICBpZihuYW1lLmNoYXJBdCgwKSAhPSAnXycgJiYgIShuYW1lIGluICRTeW1ib2wpKWRlZmluZVByb3BlcnR5KCRTeW1ib2wsIG5hbWUsIHt2YWx1ZTogd2tzRXh0LmYobmFtZSl9KTsKfTsKCi8qKiovIH0pLAovKiA0OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpleHBvcnRzLmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpOwoKLyoqKi8gfSksCi8qIDUwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciAkYXQgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NikodHJ1ZSk7CgovLyAyMS4xLjMuMjcgU3RyaW5nLnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCl9fd2VicGFja19yZXF1aXJlX18oMzkpKFN0cmluZywgJ1N0cmluZycsIGZ1bmN0aW9uKGl0ZXJhdGVkKXsKICB0aGlzLl90ID0gU3RyaW5nKGl0ZXJhdGVkKTsgLy8gdGFyZ2V0CiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgKLy8gMjEuMS41LjIuMSAlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlLm5leHQoKQp9LCBmdW5jdGlvbigpewogIHZhciBPICAgICA9IHRoaXMuX3QKICAgICwgaW5kZXggPSB0aGlzLl9pCiAgICAsIHBvaW50OwogIGlmKGluZGV4ID49IE8ubGVuZ3RoKXJldHVybiB7dmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZX07CiAgcG9pbnQgPSAkYXQoTywgaW5kZXgpOwogIHRoaXMuX2kgKz0gcG9pbnQubGVuZ3RoOwogIHJldHVybiB7dmFsdWU6IHBvaW50LCBkb25lOiBmYWxzZX07Cn0pOwoKLyoqKi8gfSksCi8qIDUxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNjkpOwp2YXIgZ2xvYmFsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGhpZGUgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpCiAgLCBJdGVyYXRvcnMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNikKICAsIFRPX1NUUklOR19UQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCd0b1N0cmluZ1RhZycpOwoKZm9yKHZhciBjb2xsZWN0aW9ucyA9IFsnTm9kZUxpc3QnLCAnRE9NVG9rZW5MaXN0JywgJ01lZGlhTGlzdCcsICdTdHlsZVNoZWV0TGlzdCcsICdDU1NSdWxlTGlzdCddLCBpID0gMDsgaSA8IDU7IGkrKyl7CiAgdmFyIE5BTUUgICAgICAgPSBjb2xsZWN0aW9uc1tpXQogICAgLCBDb2xsZWN0aW9uID0gZ2xvYmFsW05BTUVdCiAgICAsIHByb3RvICAgICAgPSBDb2xsZWN0aW9uICYmIENvbGxlY3Rpb24ucHJvdG90eXBlOwogIGlmKHByb3RvICYmICFwcm90b1tUT19TVFJJTkdfVEFHXSloaWRlKHByb3RvLCBUT19TVFJJTkdfVEFHLCBOQU1FKTsKICBJdGVyYXRvcnNbTkFNRV0gPSBJdGVyYXRvcnMuQXJyYXk7Cn0KCi8qKiovIH0pLAovKiA1MiAqLywKLyogNTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGNvcmUgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQogICwgJEpTT04gPSBjb3JlLkpTT04gfHwgKGNvcmUuSlNPTiA9IHtzdHJpbmdpZnk6IEpTT04uc3RyaW5naWZ5fSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3RyaW5naWZ5KGl0KXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogIHJldHVybiAkSlNPTi5zdHJpbmdpZnkuYXBwbHkoJEpTT04sIGFyZ3VtZW50cyk7Cn07CgovKioqLyB9KSwKLyogNTQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKCgovKioqLyB9KSwKLyogNTUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZ2V0dGluZyB0YWcgZnJvbSAxOS4xLjMuNiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKCkKdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApCiAgLCBUQUcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCd0b1N0cmluZ1RhZycpCiAgLy8gRVMzIHdyb25nIGhlcmUKICAsIEFSRyA9IGNvZihmdW5jdGlvbigpeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID09ICdBcmd1bWVudHMnOwoKLy8gZmFsbGJhY2sgZm9yIElFMTEgU2NyaXB0IEFjY2VzcyBEZW5pZWQgZXJyb3IKdmFyIHRyeUdldCA9IGZ1bmN0aW9uKGl0LCBrZXkpewogIHRyeSB7CiAgICByZXR1cm4gaXRba2V5XTsKICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9Cn07Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICB2YXIgTywgVCwgQjsKICByZXR1cm4gaXQgPT09IHVuZGVmaW5lZCA/ICdVbmRlZmluZWQnIDogaXQgPT09IG51bGwgPyAnTnVsbCcKICAgIC8vIEBAdG9TdHJpbmdUYWcgY2FzZQogICAgOiB0eXBlb2YgKFQgPSB0cnlHZXQoTyA9IE9iamVjdChpdCksIFRBRykpID09ICdzdHJpbmcnID8gVAogICAgLy8gYnVpbHRpblRhZyBjYXNlCiAgICA6IEFSRyA/IGNvZihPKQogICAgLy8gRVMzIGFyZ3VtZW50cyBmYWxsYmFjawogICAgOiAoQiA9IGNvZihPKSkgPT0gJ09iamVjdCcgJiYgdHlwZW9mIE8uY2FsbGVlID09ICdmdW5jdGlvbicgPyAnQXJndW1lbnRzJyA6IEI7Cn07CgovKioqLyB9KSwKLyogNTYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gZmFsbGJhY2sgZm9yIG5vbi1hcnJheS1saWtlIEVTMyBhbmQgbm9uLWVudW1lcmFibGUgb2xkIFY4IHN0cmluZ3MKdmFyIGNvZiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApOwptb2R1bGUuZXhwb3J0cyA9IE9iamVjdCgneicpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApID8gT2JqZWN0IDogZnVuY3Rpb24oaXQpewogIHJldHVybiBjb2YoaXQpID09ICdTdHJpbmcnID8gaXQuc3BsaXQoJycpIDogT2JqZWN0KGl0KTsKfTsKCi8qKiovIH0pLAovKiA1NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgcElFICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKQogICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQogICwgdG9JT2JqZWN0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQogICwgSUU4X0RPTV9ERUZJTkUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KQogICwgZ09QRCAgICAgICAgICAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwoKZXhwb3J0cy5mID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSA/IGdPUEQgOiBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTywgUCl7CiAgTyA9IHRvSU9iamVjdChPKTsKICBQID0gdG9QcmltaXRpdmUoUCwgdHJ1ZSk7CiAgaWYoSUU4X0RPTV9ERUZJTkUpdHJ5IHsKICAgIHJldHVybiBnT1BEKE8sIFApOwogIH0gY2F0Y2goZSl7IC8qIGVtcHR5ICovIH0KICBpZihoYXMoTywgUCkpcmV0dXJuIGNyZWF0ZURlc2MoIXBJRS5mLmNhbGwoTywgUCksIE9bUF0pOwp9OwoKLyoqKi8gfSksCi8qIDU4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CgovKioqLyB9KSwKLyogNTkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX2l0ZXJhdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7Cgp2YXIgX2l0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2l0ZXJhdG9yKTsKCnZhciBfc3ltYm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7Cgp2YXIgX3N5bWJvbDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zeW1ib2wpOwoKdmFyIF90eXBlb2YgPSB0eXBlb2YgX3N5bWJvbDIuZGVmYXVsdCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgX2l0ZXJhdG9yMi5kZWZhdWx0ID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBfc3ltYm9sMi5kZWZhdWx0ICYmIG9iaiAhPT0gX3N5bWJvbDIuZGVmYXVsdC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7IH07CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKZXhwb3J0cy5kZWZhdWx0ID0gdHlwZW9mIF9zeW1ib2wyLmRlZmF1bHQgPT09ICJmdW5jdGlvbiIgJiYgX3R5cGVvZihfaXRlcmF0b3IyLmRlZmF1bHQpID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2Yob2JqKTsKfSA6IGZ1bmN0aW9uIChvYmopIHsKICByZXR1cm4gb2JqICYmIHR5cGVvZiBfc3ltYm9sMi5kZWZhdWx0ID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gX3N5bWJvbDIuZGVmYXVsdCAmJiBvYmogIT09IF9zeW1ib2wyLmRlZmF1bHQucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihvYmopOwp9OwoKLyoqKi8gfSksCi8qIDYwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXsgLyogZW1wdHkgKi8gfTsKCi8qKiovIH0pLAovKiA2MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBmYWxzZSAtPiBBcnJheSNpbmRleE9mCi8vIHRydWUgIC0+IEFycmF5I2luY2x1ZGVzCnZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgdG9MZW5ndGggID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykKICAsIHRvSW5kZXggICA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKElTX0lOQ0xVREVTKXsKICByZXR1cm4gZnVuY3Rpb24oJHRoaXMsIGVsLCBmcm9tSW5kZXgpewogICAgdmFyIE8gICAgICA9IHRvSU9iamVjdCgkdGhpcykKICAgICAgLCBsZW5ndGggPSB0b0xlbmd0aChPLmxlbmd0aCkKICAgICAgLCBpbmRleCAgPSB0b0luZGV4KGZyb21JbmRleCwgbGVuZ3RoKQogICAgICAsIHZhbHVlOwogICAgLy8gQXJyYXkjaW5jbHVkZXMgdXNlcyBTYW1lVmFsdWVaZXJvIGVxdWFsaXR5IGFsZ29yaXRobQogICAgaWYoSVNfSU5DTFVERVMgJiYgZWwgIT0gZWwpd2hpbGUobGVuZ3RoID4gaW5kZXgpewogICAgICB2YWx1ZSA9IE9baW5kZXgrK107CiAgICAgIGlmKHZhbHVlICE9IHZhbHVlKXJldHVybiB0cnVlOwogICAgLy8gQXJyYXkjdG9JbmRleCBpZ25vcmVzIGhvbGVzLCBBcnJheSNpbmNsdWRlcyAtIG5vdAogICAgfSBlbHNlIGZvcig7bGVuZ3RoID4gaW5kZXg7IGluZGV4KyspaWYoSVNfSU5DTFVERVMgfHwgaW5kZXggaW4gTyl7CiAgICAgIGlmKE9baW5kZXhdID09PSBlbClyZXR1cm4gSVNfSU5DTFVERVMgfHwgaW5kZXggfHwgMDsKICAgIH0gcmV0dXJuICFJU19JTkNMVURFUyAmJiAtMTsKICB9Owp9OwoKLyoqKi8gfSksCi8qIDYyICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBjcmVhdGUgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpCiAgLCBkZXNjcmlwdG9yICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpCiAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpCiAgLCBJdGVyYXRvclByb3RvdHlwZSA9IHt9OwoKLy8gMjUuMS4yLjEuMSAlSXRlcmF0b3JQcm90b3R5cGUlW0BAaXRlcmF0b3JdKCkKX193ZWJwYWNrX3JlcXVpcmVfXyg3KShJdGVyYXRvclByb3RvdHlwZSwgX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnaXRlcmF0b3InKSwgZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0pOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihDb25zdHJ1Y3RvciwgTkFNRSwgbmV4dCl7CiAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlLCB7bmV4dDogZGVzY3JpcHRvcigxLCBuZXh0KX0pOwogIHNldFRvU3RyaW5nVGFnKENvbnN0cnVjdG9yLCBOQU1FICsgJyBJdGVyYXRvcicpOwp9OwoKLyoqKi8gfSksCi8qIDYzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZG9uZSwgdmFsdWUpewogIHJldHVybiB7dmFsdWU6IHZhbHVlLCBkb25lOiAhIWRvbmV9Owp9OwoKLyoqKi8gfSksCi8qIDY0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBkUCAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNCkKICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQogICwgZ2V0S2V5cyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTsKCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKSA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzIDogZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyhPLCBQcm9wZXJ0aWVzKXsKICBhbk9iamVjdChPKTsKICB2YXIga2V5cyAgID0gZ2V0S2V5cyhQcm9wZXJ0aWVzKQogICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aAogICAgLCBpID0gMAogICAgLCBQOwogIHdoaWxlKGxlbmd0aCA+IGkpZFAuZihPLCBQID0ga2V5c1tpKytdLCBQcm9wZXJ0aWVzW1BdKTsKICByZXR1cm4gTzsKfTsKCi8qKiovIH0pLAovKiA2NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuNyAvIDE1LjIuMy40IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE8pCnZhciAka2V5cyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCkKICAsIGhpZGRlbktleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KS5jb25jYXQoJ2xlbmd0aCcsICdwcm90b3R5cGUnKTsKCmV4cG9ydHMuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uIGdldE93blByb3BlcnR5TmFtZXMoTyl7CiAgcmV0dXJuICRrZXlzKE8sIGhpZGRlbktleXMpOwp9OwoKLyoqKi8gfSksCi8qIDY2ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KQogICwgZGVmaW5lZCAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7Ci8vIHRydWUgIC0+IFN0cmluZyNhdAovLyBmYWxzZSAtPiBTdHJpbmcjY29kZVBvaW50QXQKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihUT19TVFJJTkcpewogIHJldHVybiBmdW5jdGlvbih0aGF0LCBwb3MpewogICAgdmFyIHMgPSBTdHJpbmcoZGVmaW5lZCh0aGF0KSkKICAgICAgLCBpID0gdG9JbnRlZ2VyKHBvcykKICAgICAgLCBsID0gcy5sZW5ndGgKICAgICAgLCBhLCBiOwogICAgaWYoaSA8IDAgfHwgaSA+PSBsKXJldHVybiBUT19TVFJJTkcgPyAnJyA6IHVuZGVmaW5lZDsKICAgIGEgPSBzLmNoYXJDb2RlQXQoaSk7CiAgICByZXR1cm4gYSA8IDB4ZDgwMCB8fCBhID4gMHhkYmZmIHx8IGkgKyAxID09PSBsIHx8IChiID0gcy5jaGFyQ29kZUF0KGkgKyAxKSkgPCAweGRjMDAgfHwgYiA+IDB4ZGZmZgogICAgICA/IFRPX1NUUklORyA/IHMuY2hhckF0KGkpIDogYQogICAgICA6IFRPX1NUUklORyA/IHMuc2xpY2UoaSwgaSArIDIpIDogKGEgLSAweGQ4MDAgPDwgMTApICsgKGIgLSAweGRjMDApICsgMHgxMDAwMDsKICB9Owp9OwoKLyoqKi8gfSksCi8qIDY3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjdHggICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQogICwgaW52b2tlICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCkKICAsIGh0bWwgICAgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpCiAgLCBjZWwgICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KQogICwgZ2xvYmFsICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MKICAsIHNldFRhc2sgICAgICAgICAgICA9IGdsb2JhbC5zZXRJbW1lZGlhdGUKICAsIGNsZWFyVGFzayAgICAgICAgICA9IGdsb2JhbC5jbGVhckltbWVkaWF0ZQogICwgTWVzc2FnZUNoYW5uZWwgICAgID0gZ2xvYmFsLk1lc3NhZ2VDaGFubmVsCiAgLCBjb3VudGVyICAgICAgICAgICAgPSAwCiAgLCBxdWV1ZSAgICAgICAgICAgICAgPSB7fQogICwgT05SRUFEWVNUQVRFQ0hBTkdFID0gJ29ucmVhZHlzdGF0ZWNoYW5nZScKICAsIGRlZmVyLCBjaGFubmVsLCBwb3J0Owp2YXIgcnVuID0gZnVuY3Rpb24oKXsKICB2YXIgaWQgPSArdGhpczsKICBpZihxdWV1ZS5oYXNPd25Qcm9wZXJ0eShpZCkpewogICAgdmFyIGZuID0gcXVldWVbaWRdOwogICAgZGVsZXRlIHF1ZXVlW2lkXTsKICAgIGZuKCk7CiAgfQp9Owp2YXIgbGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCl7CiAgcnVuLmNhbGwoZXZlbnQuZGF0YSk7Cn07Ci8vIE5vZGUuanMgMC45KyAmIElFMTArIGhhcyBzZXRJbW1lZGlhdGUsIG90aGVyd2lzZToKaWYoIXNldFRhc2sgfHwgIWNsZWFyVGFzayl7CiAgc2V0VGFzayA9IGZ1bmN0aW9uIHNldEltbWVkaWF0ZShmbil7CiAgICB2YXIgYXJncyA9IFtdLCBpID0gMTsKICAgIHdoaWxlKGFyZ3VtZW50cy5sZW5ndGggPiBpKWFyZ3MucHVzaChhcmd1bWVudHNbaSsrXSk7CiAgICBxdWV1ZVsrK2NvdW50ZXJdID0gZnVuY3Rpb24oKXsKICAgICAgaW52b2tlKHR5cGVvZiBmbiA9PSAnZnVuY3Rpb24nID8gZm4gOiBGdW5jdGlvbihmbiksIGFyZ3MpOwogICAgfTsKICAgIGRlZmVyKGNvdW50ZXIpOwogICAgcmV0dXJuIGNvdW50ZXI7CiAgfTsKICBjbGVhclRhc2sgPSBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShpZCl7CiAgICBkZWxldGUgcXVldWVbaWRdOwogIH07CiAgLy8gTm9kZS5qcyAwLjgtCiAgaWYoX193ZWJwYWNrX3JlcXVpcmVfXygyMCkocHJvY2VzcykgPT0gJ3Byb2Nlc3MnKXsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBwcm9jZXNzLm5leHRUaWNrKGN0eChydW4sIGlkLCAxKSk7CiAgICB9OwogIC8vIEJyb3dzZXJzIHdpdGggTWVzc2FnZUNoYW5uZWwsIGluY2x1ZGVzIFdlYldvcmtlcnMKICB9IGVsc2UgaWYoTWVzc2FnZUNoYW5uZWwpewogICAgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbDsKICAgIHBvcnQgICAgPSBjaGFubmVsLnBvcnQyOwogICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaXN0ZW5lcjsKICAgIGRlZmVyID0gY3R4KHBvcnQucG9zdE1lc3NhZ2UsIHBvcnQsIDEpOwogIC8vIEJyb3dzZXJzIHdpdGggcG9zdE1lc3NhZ2UsIHNraXAgV2ViV29ya2VycwogIC8vIElFOCBoYXMgcG9zdE1lc3NhZ2UsIGJ1dCBpdCdzIHN5bmMgJiB0eXBlb2YgaXRzIHBvc3RNZXNzYWdlIGlzICdvYmplY3QnCiAgfSBlbHNlIGlmKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyICYmIHR5cGVvZiBwb3N0TWVzc2FnZSA9PSAnZnVuY3Rpb24nICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cyl7CiAgICBkZWZlciA9IGZ1bmN0aW9uKGlkKXsKICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKGlkICsgJycsICcqJyk7CiAgICB9OwogICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lciwgZmFsc2UpOwogIC8vIElFOC0KICB9IGVsc2UgaWYoT05SRUFEWVNUQVRFQ0hBTkdFIGluIGNlbCgnc2NyaXB0JykpewogICAgZGVmZXIgPSBmdW5jdGlvbihpZCl7CiAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoY2VsKCdzY3JpcHQnKSlbT05SRUFEWVNUQVRFQ0hBTkdFXSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgaHRtbC5yZW1vdmVDaGlsZCh0aGlzKTsKICAgICAgICBydW4uY2FsbChpZCk7CiAgICAgIH07CiAgICB9OwogIC8vIFJlc3Qgb2xkIGJyb3dzZXJzCiAgfSBlbHNlIHsKICAgIGRlZmVyID0gZnVuY3Rpb24oaWQpewogICAgICBzZXRUaW1lb3V0KGN0eChydW4sIGlkLCAxKSwgMCk7CiAgICB9OwogIH0KfQptb2R1bGUuZXhwb3J0cyA9IHsKICBzZXQ6ICAgc2V0VGFzaywKICBjbGVhcjogY2xlYXJUYXNrCn07CgovKioqLyB9KSwKLyogNjggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpCiAgLCBtYXggICAgICAgPSBNYXRoLm1heAogICwgbWluICAgICAgID0gTWF0aC5taW47Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaW5kZXgsIGxlbmd0aCl7CiAgaW5kZXggPSB0b0ludGVnZXIoaW5kZXgpOwogIHJldHVybiBpbmRleCA8IDAgPyBtYXgoaW5kZXggKyBsZW5ndGgsIDApIDogbWluKGluZGV4LCBsZW5ndGgpOwp9OwoKLyoqKi8gfSksCi8qIDY5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBhZGRUb1Vuc2NvcGFibGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCkKICAsIHN0ZXAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKQogICwgSXRlcmF0b3JzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpCiAgLCB0b0lPYmplY3QgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7CgovLyAyMi4xLjMuNCBBcnJheS5wcm90b3R5cGUuZW50cmllcygpCi8vIDIyLjEuMy4xMyBBcnJheS5wcm90b3R5cGUua2V5cygpCi8vIDIyLjEuMy4yOSBBcnJheS5wcm90b3R5cGUudmFsdWVzKCkKLy8gMjIuMS4zLjMwIEFycmF5LnByb3RvdHlwZVtAQGl0ZXJhdG9yXSgpCm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSkoQXJyYXksICdBcnJheScsIGZ1bmN0aW9uKGl0ZXJhdGVkLCBraW5kKXsKICB0aGlzLl90ID0gdG9JT2JqZWN0KGl0ZXJhdGVkKTsgLy8gdGFyZ2V0CiAgdGhpcy5faSA9IDA7ICAgICAgICAgICAgICAgICAgIC8vIG5leHQgaW5kZXgKICB0aGlzLl9rID0ga2luZDsgICAgICAgICAgICAgICAgLy8ga2luZAovLyAyMi4xLjUuMi4xICVBcnJheUl0ZXJhdG9yUHJvdG90eXBlJS5uZXh0KCkKfSwgZnVuY3Rpb24oKXsKICB2YXIgTyAgICAgPSB0aGlzLl90CiAgICAsIGtpbmQgID0gdGhpcy5fawogICAgLCBpbmRleCA9IHRoaXMuX2krKzsKICBpZighTyB8fCBpbmRleCA+PSBPLmxlbmd0aCl7CiAgICB0aGlzLl90ID0gdW5kZWZpbmVkOwogICAgcmV0dXJuIHN0ZXAoMSk7CiAgfQogIGlmKGtpbmQgPT0gJ2tleXMnICApcmV0dXJuIHN0ZXAoMCwgaW5kZXgpOwogIGlmKGtpbmQgPT0gJ3ZhbHVlcycpcmV0dXJuIHN0ZXAoMCwgT1tpbmRleF0pOwogIHJldHVybiBzdGVwKDAsIFtpbmRleCwgT1tpbmRleF1dKTsKfSwgJ3ZhbHVlcycpOwoKLy8gYXJndW1lbnRzTGlzdFtAQGl0ZXJhdG9yXSBpcyAlQXJyYXlQcm90b192YWx1ZXMlICg5LjQuNC42LCA5LjQuNC43KQpJdGVyYXRvcnMuQXJndW1lbnRzID0gSXRlcmF0b3JzLkFycmF5OwoKYWRkVG9VbnNjb3BhYmxlcygna2V5cycpOwphZGRUb1Vuc2NvcGFibGVzKCd2YWx1ZXMnKTsKYWRkVG9VbnNjb3BhYmxlcygnZW50cmllcycpOwoKLyoqKi8gfSksCi8qIDcwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODApLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzEgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MiksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA3MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgTUVUQSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSgnbWV0YScpCiAgLCBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNikKICAsIGhhcyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMikKICAsIHNldERlc2MgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KS5mCiAgLCBpZCAgICAgICA9IDA7CnZhciBpc0V4dGVuc2libGUgPSBPYmplY3QuaXNFeHRlbnNpYmxlIHx8IGZ1bmN0aW9uKCl7CiAgcmV0dXJuIHRydWU7Cn07CnZhciBGUkVFWkUgPSAhX193ZWJwYWNrX3JlcXVpcmVfXygxMSkoZnVuY3Rpb24oKXsKICByZXR1cm4gaXNFeHRlbnNpYmxlKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpOwp9KTsKdmFyIHNldE1ldGEgPSBmdW5jdGlvbihpdCl7CiAgc2V0RGVzYyhpdCwgTUVUQSwge3ZhbHVlOiB7CiAgICBpOiAnTycgKyArK2lkLCAvLyBvYmplY3QgSUQKICAgIHc6IHt9ICAgICAgICAgIC8vIHdlYWsgY29sbGVjdGlvbnMgSURzCiAgfX0pOwp9Owp2YXIgZmFzdEtleSA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpewogIC8vIHJldHVybiBwcmltaXRpdmUgd2l0aCBwcmVmaXgKICBpZighaXNPYmplY3QoaXQpKXJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCcgPyBpdCA6ICh0eXBlb2YgaXQgPT0gJ3N0cmluZycgPyAnUycgOiAnUCcpICsgaXQ7CiAgaWYoIWhhcyhpdCwgTUVUQSkpewogICAgLy8gY2FuJ3Qgc2V0IG1ldGFkYXRhIHRvIHVuY2F1Z2h0IGZyb3plbiBvYmplY3QKICAgIGlmKCFpc0V4dGVuc2libGUoaXQpKXJldHVybiAnRic7CiAgICAvLyBub3QgbmVjZXNzYXJ5IHRvIGFkZCBtZXRhZGF0YQogICAgaWYoIWNyZWF0ZSlyZXR1cm4gJ0UnOwogICAgLy8gYWRkIG1pc3NpbmcgbWV0YWRhdGEKICAgIHNldE1ldGEoaXQpOwogIC8vIHJldHVybiBvYmplY3QgSUQKICB9IHJldHVybiBpdFtNRVRBXS5pOwp9Owp2YXIgZ2V0V2VhayA9IGZ1bmN0aW9uKGl0LCBjcmVhdGUpewogIGlmKCFoYXMoaXQsIE1FVEEpKXsKICAgIC8vIGNhbid0IHNldCBtZXRhZGF0YSB0byB1bmNhdWdodCBmcm96ZW4gb2JqZWN0CiAgICBpZighaXNFeHRlbnNpYmxlKGl0KSlyZXR1cm4gdHJ1ZTsKICAgIC8vIG5vdCBuZWNlc3NhcnkgdG8gYWRkIG1ldGFkYXRhCiAgICBpZighY3JlYXRlKXJldHVybiBmYWxzZTsKICAgIC8vIGFkZCBtaXNzaW5nIG1ldGFkYXRhCiAgICBzZXRNZXRhKGl0KTsKICAvLyByZXR1cm4gaGFzaCB3ZWFrIGNvbGxlY3Rpb25zIElEcwogIH0gcmV0dXJuIGl0W01FVEFdLnc7Cn07Ci8vIGFkZCBtZXRhZGF0YSBvbiBmcmVlemUtZmFtaWx5IG1ldGhvZHMgY2FsbGluZwp2YXIgb25GcmVlemUgPSBmdW5jdGlvbihpdCl7CiAgaWYoRlJFRVpFICYmIG1ldGEuTkVFRCAmJiBpc0V4dGVuc2libGUoaXQpICYmICFoYXMoaXQsIE1FVEEpKXNldE1ldGEoaXQpOwogIHJldHVybiBpdDsKfTsKdmFyIG1ldGEgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICBLRVk6ICAgICAgTUVUQSwKICBORUVEOiAgICAgZmFsc2UsCiAgZmFzdEtleTogIGZhc3RLZXksCiAgZ2V0V2VhazogIGdldFdlYWssCiAgb25GcmVlemU6IG9uRnJlZXplCn07CgovKioqLyB9KSwKLyogNzMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKdmFyIGNsYXNzb2YgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpCiAgLCBJVEVSQVRPUiAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCdpdGVyYXRvcicpCiAgLCBJdGVyYXRvcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLmdldEl0ZXJhdG9yTWV0aG9kID0gZnVuY3Rpb24oaXQpewogIGlmKGl0ICE9IHVuZGVmaW5lZClyZXR1cm4gaXRbSVRFUkFUT1JdCiAgICB8fCBpdFsnQEBpdGVyYXRvciddCiAgICB8fCBJdGVyYXRvcnNbY2xhc3NvZihpdCldOwp9OwoKLyoqKi8gfSksCi8qIDc0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oNzgpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKbW9kdWxlLmV4cG9ydHMgPSB7ICJkZWZhdWx0IjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MSksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiA3NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKSwgX19lc01vZHVsZTogdHJ1ZSB9OwoKLyoqKi8gfSksCi8qIDc3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCm1vZHVsZS5leHBvcnRzID0geyAiZGVmYXVsdCI6IF9fd2VicGFja19yZXF1aXJlX18oODQpLCBfX2VzTW9kdWxlOiB0cnVlIH07CgovKioqLyB9KSwKLyogNzggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXygxMDApOwp2YXIgJE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0Owptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZShQLCBEKXsKICByZXR1cm4gJE9iamVjdC5jcmVhdGUoUCwgRCk7Cn07CgovKioqLyB9KSwKLyogNzkgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpOwptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuT2JqZWN0LmdldFByb3RvdHlwZU9mOwoKLyoqKi8gfSksCi8qIDgwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTAyKTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5rZXlzOwoKLyoqKi8gfSksCi8qIDgxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTAzKTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdC5zZXRQcm90b3R5cGVPZjsKCi8qKiovIH0pLAovKiA4MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KTsKX193ZWJwYWNrX3JlcXVpcmVfXyg1MCk7Cl9fd2VicGFja19yZXF1aXJlX18oNTEpOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5Qcm9taXNlOwoKLyoqKi8gfSksCi8qIDgzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTA1KTsKX193ZWJwYWNrX3JlcXVpcmVfXyg1NCk7Cl9fd2VicGFja19yZXF1aXJlX18oMTA2KTsKX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpOwptb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuU3ltYm9sOwoKLyoqKi8gfSksCi8qIDg0ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oNTApOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKTsKbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KS5mKCdpdGVyYXRvcicpOwoKLyoqKi8gfSksCi8qIDg1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQsIENvbnN0cnVjdG9yLCBuYW1lLCBmb3JiaWRkZW5GaWVsZCl7CiAgaWYoIShpdCBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSB8fCAoZm9yYmlkZGVuRmllbGQgIT09IHVuZGVmaW5lZCAmJiBmb3JiaWRkZW5GaWVsZCBpbiBpdCkpewogICAgdGhyb3cgVHlwZUVycm9yKG5hbWUgKyAnOiBpbmNvcnJlY3QgaW52b2NhdGlvbiEnKTsKICB9IHJldHVybiBpdDsKfTsKCi8qKiovIH0pLAovKiA4NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBhbGwgZW51bWVyYWJsZSBvYmplY3Qga2V5cywgaW5jbHVkZXMgc3ltYm9scwp2YXIgZ2V0S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpCiAgLCBnT1BTICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkKICAsIHBJRSAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7CiAgdmFyIHJlc3VsdCAgICAgPSBnZXRLZXlzKGl0KQogICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mOwogIGlmKGdldFN5bWJvbHMpewogICAgdmFyIHN5bWJvbHMgPSBnZXRTeW1ib2xzKGl0KQogICAgICAsIGlzRW51bSAgPSBwSUUuZgogICAgICAsIGkgICAgICAgPSAwCiAgICAgICwga2V5OwogICAgd2hpbGUoc3ltYm9scy5sZW5ndGggPiBpKWlmKGlzRW51bS5jYWxsKGl0LCBrZXkgPSBzeW1ib2xzW2krK10pKXJlc3VsdC5wdXNoKGtleSk7CiAgfSByZXR1cm4gcmVzdWx0Owp9OwoKLyoqKi8gfSksCi8qIDg3ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBjdHggICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpCiAgLCBjYWxsICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpCiAgLCBpc0FycmF5SXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oODkpCiAgLCBhbk9iamVjdCAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIHRvTGVuZ3RoICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NykKICAsIGdldEl0ZXJGbiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MykKICAsIEJSRUFLICAgICAgID0ge30KICAsIFJFVFVSTiAgICAgID0ge307CnZhciBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdGVyYWJsZSwgZW50cmllcywgZm4sIHRoYXQsIElURVJBVE9SKXsKICB2YXIgaXRlckZuID0gSVRFUkFUT1IgPyBmdW5jdGlvbigpeyByZXR1cm4gaXRlcmFibGU7IH0gOiBnZXRJdGVyRm4oaXRlcmFibGUpCiAgICAsIGYgICAgICA9IGN0eChmbiwgdGhhdCwgZW50cmllcyA/IDIgOiAxKQogICAgLCBpbmRleCAgPSAwCiAgICAsIGxlbmd0aCwgc3RlcCwgaXRlcmF0b3IsIHJlc3VsdDsKICBpZih0eXBlb2YgaXRlckZuICE9ICdmdW5jdGlvbicpdGhyb3cgVHlwZUVycm9yKGl0ZXJhYmxlICsgJyBpcyBub3QgaXRlcmFibGUhJyk7CiAgLy8gZmFzdCBjYXNlIGZvciBhcnJheXMgd2l0aCBkZWZhdWx0IGl0ZXJhdG9yCiAgaWYoaXNBcnJheUl0ZXIoaXRlckZuKSlmb3IobGVuZ3RoID0gdG9MZW5ndGgoaXRlcmFibGUubGVuZ3RoKTsgbGVuZ3RoID4gaW5kZXg7IGluZGV4KyspewogICAgcmVzdWx0ID0gZW50cmllcyA/IGYoYW5PYmplY3Qoc3RlcCA9IGl0ZXJhYmxlW2luZGV4XSlbMF0sIHN0ZXBbMV0pIDogZihpdGVyYWJsZVtpbmRleF0pOwogICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0OwogIH0gZWxzZSBmb3IoaXRlcmF0b3IgPSBpdGVyRm4uY2FsbChpdGVyYWJsZSk7ICEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZTsgKXsKICAgIHJlc3VsdCA9IGNhbGwoaXRlcmF0b3IsIGYsIHN0ZXAudmFsdWUsIGVudHJpZXMpOwogICAgaWYocmVzdWx0ID09PSBCUkVBSyB8fCByZXN1bHQgPT09IFJFVFVSTilyZXR1cm4gcmVzdWx0OwogIH0KfTsKZXhwb3J0cy5CUkVBSyAgPSBCUkVBSzsKZXhwb3J0cy5SRVRVUk4gPSBSRVRVUk47CgovKioqLyB9KSwKLyogODggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gZmFzdCBhcHBseSwgaHR0cDovL2pzcGVyZi5sbmtpdC5jb20vZmFzdC1hcHBseS81Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZm4sIGFyZ3MsIHRoYXQpewogIHZhciB1biA9IHRoYXQgPT09IHVuZGVmaW5lZDsKICBzd2l0Y2goYXJncy5sZW5ndGgpewogICAgY2FzZSAwOiByZXR1cm4gdW4gPyBmbigpCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCk7CiAgICBjYXNlIDE6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSk7CiAgICBjYXNlIDI6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSk7CiAgICBjYXNlIDM6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7CiAgICBjYXNlIDQ6IHJldHVybiB1biA/IGZuKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0sIGFyZ3NbM10pCiAgICAgICAgICAgICAgICAgICAgICA6IGZuLmNhbGwodGhhdCwgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7CiAgfSByZXR1cm4gICAgICAgICAgICAgIGZuLmFwcGx5KHRoYXQsIGFyZ3MpOwp9OwoKLyoqKi8gfSksCi8qIDg5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIGNoZWNrIG9uIGRlZmF1bHQgQXJyYXkgaXRlcmF0b3IKdmFyIEl0ZXJhdG9ycyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KQogICwgSVRFUkFUT1IgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykoJ2l0ZXJhdG9yJykKICAsIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGl0KXsKICByZXR1cm4gaXQgIT09IHVuZGVmaW5lZCAmJiAoSXRlcmF0b3JzLkFycmF5ID09PSBpdCB8fCBBcnJheVByb3RvW0lURVJBVE9SXSA9PT0gaXQpOwp9OwoKLyoqKi8gfSksCi8qIDkwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCi8vIDcuMi4yIElzQXJyYXkoYXJndW1lbnQpCnZhciBjb2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTsKbW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIGlzQXJyYXkoYXJnKXsKICByZXR1cm4gY29mKGFyZykgPT0gJ0FycmF5JzsKfTsKCi8qKiovIH0pLAovKiA5MSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBjYWxsIHNvbWV0aGluZyBvbiBpdGVyYXRvciBzdGVwIHdpdGggc2FmZSBjbG9zaW5nIG9uIGVycm9yCnZhciBhbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXRlcmF0b3IsIGZuLCB2YWx1ZSwgZW50cmllcyl7CiAgdHJ5IHsKICAgIHJldHVybiBlbnRyaWVzID8gZm4oYW5PYmplY3QodmFsdWUpWzBdLCB2YWx1ZVsxXSkgOiBmbih2YWx1ZSk7CiAgLy8gNy40LjYgSXRlcmF0b3JDbG9zZShpdGVyYXRvciwgY29tcGxldGlvbikKICB9IGNhdGNoKGUpewogICAgdmFyIHJldCA9IGl0ZXJhdG9yWydyZXR1cm4nXTsKICAgIGlmKHJldCAhPT0gdW5kZWZpbmVkKWFuT2JqZWN0KHJldC5jYWxsKGl0ZXJhdG9yKSk7CiAgICB0aHJvdyBlOwogIH0KfTsKCi8qKiovIH0pLAovKiA5MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgSVRFUkFUT1IgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnaXRlcmF0b3InKQogICwgU0FGRV9DTE9TSU5HID0gZmFsc2U7Cgp0cnkgewogIHZhciByaXRlciA9IFs3XVtJVEVSQVRPUl0oKTsKICByaXRlclsncmV0dXJuJ10gPSBmdW5jdGlvbigpeyBTQUZFX0NMT1NJTkcgPSB0cnVlOyB9OwogIEFycmF5LmZyb20ocml0ZXIsIGZ1bmN0aW9uKCl7IHRocm93IDI7IH0pOwp9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMsIHNraXBDbG9zaW5nKXsKICBpZighc2tpcENsb3NpbmcgJiYgIVNBRkVfQ0xPU0lORylyZXR1cm4gZmFsc2U7CiAgdmFyIHNhZmUgPSBmYWxzZTsKICB0cnkgewogICAgdmFyIGFyciAgPSBbN10KICAgICAgLCBpdGVyID0gYXJyW0lURVJBVE9SXSgpOwogICAgaXRlci5uZXh0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHtkb25lOiBzYWZlID0gdHJ1ZX07IH07CiAgICBhcnJbSVRFUkFUT1JdID0gZnVuY3Rpb24oKXsgcmV0dXJuIGl0ZXI7IH07CiAgICBleGVjKGFycik7CiAgfSBjYXRjaChlKXsgLyogZW1wdHkgKi8gfQogIHJldHVybiBzYWZlOwp9OwoKLyoqKi8gfSksCi8qIDkzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciBnZXRLZXlzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KQogICwgdG9JT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0LCBlbCl7CiAgdmFyIE8gICAgICA9IHRvSU9iamVjdChvYmplY3QpCiAgICAsIGtleXMgICA9IGdldEtleXMoTykKICAgICwgbGVuZ3RoID0ga2V5cy5sZW5ndGgKICAgICwgaW5kZXggID0gMAogICAgLCBrZXk7CiAgd2hpbGUobGVuZ3RoID4gaW5kZXgpaWYoT1trZXkgPSBrZXlzW2luZGV4KytdXSA9PT0gZWwpcmV0dXJuIGtleTsKfTsKCi8qKiovIH0pLAovKiA5NCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgZ2xvYmFsICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgbWFjcm90YXNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nykuc2V0CiAgLCBPYnNlcnZlciAgPSBnbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBnbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcgogICwgcHJvY2VzcyAgID0gZ2xvYmFsLnByb2Nlc3MKICAsIFByb21pc2UgICA9IGdsb2JhbC5Qcm9taXNlCiAgLCBpc05vZGUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKShwcm9jZXNzKSA9PSAncHJvY2Vzcyc7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7CiAgdmFyIGhlYWQsIGxhc3QsIG5vdGlmeTsKCiAgdmFyIGZsdXNoID0gZnVuY3Rpb24oKXsKICAgIHZhciBwYXJlbnQsIGZuOwogICAgaWYoaXNOb2RlICYmIChwYXJlbnQgPSBwcm9jZXNzLmRvbWFpbikpcGFyZW50LmV4aXQoKTsKICAgIHdoaWxlKGhlYWQpewogICAgICBmbiAgID0gaGVhZC5mbjsKICAgICAgaGVhZCA9IGhlYWQubmV4dDsKICAgICAgdHJ5IHsKICAgICAgICBmbigpOwogICAgICB9IGNhdGNoKGUpewogICAgICAgIGlmKGhlYWQpbm90aWZ5KCk7CiAgICAgICAgZWxzZSBsYXN0ID0gdW5kZWZpbmVkOwogICAgICAgIHRocm93IGU7CiAgICAgIH0KICAgIH0gbGFzdCA9IHVuZGVmaW5lZDsKICAgIGlmKHBhcmVudClwYXJlbnQuZW50ZXIoKTsKICB9OwoKICAvLyBOb2RlLmpzCiAgaWYoaXNOb2RlKXsKICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7CiAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpOwogICAgfTsKICAvLyBicm93c2VycyB3aXRoIE11dGF0aW9uT2JzZXJ2ZXIKICB9IGVsc2UgaWYoT2JzZXJ2ZXIpewogICAgdmFyIHRvZ2dsZSA9IHRydWUKICAgICAgLCBub2RlICAgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7CiAgICBuZXcgT2JzZXJ2ZXIoZmx1c2gpLm9ic2VydmUobm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXcKICAgIG5vdGlmeSA9IGZ1bmN0aW9uKCl7CiAgICAgIG5vZGUuZGF0YSA9IHRvZ2dsZSA9ICF0b2dnbGU7CiAgICB9OwogIC8vIGVudmlyb25tZW50cyB3aXRoIG1heWJlIG5vbi1jb21wbGV0ZWx5IGNvcnJlY3QsIGJ1dCBleGlzdGVudCBQcm9taXNlCiAgfSBlbHNlIGlmKFByb21pc2UgJiYgUHJvbWlzZS5yZXNvbHZlKXsKICAgIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICBwcm9taXNlLnRoZW4oZmx1c2gpOwogICAgfTsKICAvLyBmb3Igb3RoZXIgZW52aXJvbm1lbnRzIC0gbWFjcm90YXNrIGJhc2VkIG9uOgogIC8vIC0gc2V0SW1tZWRpYXRlCiAgLy8gLSBNZXNzYWdlQ2hhbm5lbAogIC8vIC0gd2luZG93LnBvc3RNZXNzYWcKICAvLyAtIG9ucmVhZHlzdGF0ZWNoYW5nZQogIC8vIC0gc2V0VGltZW91dAogIH0gZWxzZSB7CiAgICBub3RpZnkgPSBmdW5jdGlvbigpewogICAgICAvLyBzdHJhbmdlIElFICsgd2VicGFjayBkZXYgc2VydmVyIGJ1ZyAtIHVzZSAuY2FsbChnbG9iYWwpCiAgICAgIG1hY3JvdGFzay5jYWxsKGdsb2JhbCwgZmx1c2gpOwogICAgfTsKICB9CgogIHJldHVybiBmdW5jdGlvbihmbil7CiAgICB2YXIgdGFzayA9IHtmbjogZm4sIG5leHQ6IHVuZGVmaW5lZH07CiAgICBpZihsYXN0KWxhc3QubmV4dCA9IHRhc2s7CiAgICBpZighaGVhZCl7CiAgICAgIGhlYWQgPSB0YXNrOwogICAgICBub3RpZnkoKTsKICAgIH0gbGFzdCA9IHRhc2s7CiAgfTsKfTsKCi8qKiovIH0pLAovKiA5NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyBmYWxsYmFjayBmb3IgSUUxMSBidWdneSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB3aXRoIGlmcmFtZSBhbmQgd2luZG93CnZhciB0b0lPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgZ09QTiAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSkuZgogICwgdG9TdHJpbmcgID0ge30udG9TdHJpbmc7Cgp2YXIgd2luZG93TmFtZXMgPSB0eXBlb2Ygd2luZG93ID09ICdvYmplY3QnICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcwogID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KSA6IFtdOwoKdmFyIGdldFdpbmRvd05hbWVzID0gZnVuY3Rpb24oaXQpewogIHRyeSB7CiAgICByZXR1cm4gZ09QTihpdCk7CiAgfSBjYXRjaChlKXsKICAgIHJldHVybiB3aW5kb3dOYW1lcy5zbGljZSgpOwogIH0KfTsKCm1vZHVsZS5leHBvcnRzLmYgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eU5hbWVzKGl0KXsKICByZXR1cm4gd2luZG93TmFtZXMgJiYgdG9TdHJpbmcuY2FsbChpdCkgPT0gJ1tvYmplY3QgV2luZG93XScgPyBnZXRXaW5kb3dOYW1lcyhpdCkgOiBnT1BOKHRvSU9iamVjdChpdCkpOwp9OwoKCi8qKiovIH0pLAovKiA5NiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgp2YXIgaGlkZSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0LCBzcmMsIHNhZmUpewogIGZvcih2YXIga2V5IGluIHNyYyl7CiAgICBpZihzYWZlICYmIHRhcmdldFtrZXldKXRhcmdldFtrZXldID0gc3JjW2tleV07CiAgICBlbHNlIGhpZGUodGFyZ2V0LCBrZXksIHNyY1trZXldKTsKICB9IHJldHVybiB0YXJnZXQ7Cn07CgovKioqLyB9KSwKLyogOTcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gV29ya3Mgd2l0aCBfX3Byb3RvX18gb25seS4gT2xkIHY4IGNhbid0IHdvcmsgd2l0aCBudWxsIHByb3RvIG9iamVjdHMuCi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovCnZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNikKICAsIGFuT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTsKdmFyIGNoZWNrID0gZnVuY3Rpb24oTywgcHJvdG8pewogIGFuT2JqZWN0KE8pOwogIGlmKCFpc09iamVjdChwcm90bykgJiYgcHJvdG8gIT09IG51bGwpdGhyb3cgVHlwZUVycm9yKHByb3RvICsgIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSEiKTsKfTsKbW9kdWxlLmV4cG9ydHMgPSB7CiAgc2V0OiBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgKCdfX3Byb3RvX18nIGluIHt9ID8gLy8gZXNsaW50LWRpc2FibGUtbGluZQogICAgZnVuY3Rpb24odGVzdCwgYnVnZ3ksIHNldCl7CiAgICAgIHRyeSB7CiAgICAgICAgc2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCkoRnVuY3Rpb24uY2FsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyg1NykuZihPYmplY3QucHJvdG90eXBlLCAnX19wcm90b19fJykuc2V0LCAyKTsKICAgICAgICBzZXQodGVzdCwgW10pOwogICAgICAgIGJ1Z2d5ID0gISh0ZXN0IGluc3RhbmNlb2YgQXJyYXkpOwogICAgICB9IGNhdGNoKGUpeyBidWdneSA9IHRydWU7IH0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKE8sIHByb3RvKXsKICAgICAgICBjaGVjayhPLCBwcm90byk7CiAgICAgICAgaWYoYnVnZ3kpTy5fX3Byb3RvX18gPSBwcm90bzsKICAgICAgICBlbHNlIHNldChPLCBwcm90byk7CiAgICAgICAgcmV0dXJuIE87CiAgICAgIH07CiAgICB9KHt9LCBmYWxzZSkgOiB1bmRlZmluZWQpLAogIGNoZWNrOiBjaGVjawp9OwoKLyoqKi8gfSksCi8qIDk4ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCnZhciBnbG9iYWwgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSkKICAsIGNvcmUgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKQogICwgZFAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCiAgLCBERVNDUklQVE9SUyA9IF9fd2VicGFja19yZXF1aXJlX18oMikKICAsIFNQRUNJRVMgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnc3BlY2llcycpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihLRVkpewogIHZhciBDID0gdHlwZW9mIGNvcmVbS0VZXSA9PSAnZnVuY3Rpb24nID8gY29yZVtLRVldIDogZ2xvYmFsW0tFWV07CiAgaWYoREVTQ1JJUFRPUlMgJiYgQyAmJiAhQ1tTUEVDSUVTXSlkUC5mKEMsIFNQRUNJRVMsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXM7IH0KICB9KTsKfTsKCi8qKiovIH0pLAovKiA5OSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyA3LjMuMjAgU3BlY2llc0NvbnN0cnVjdG9yKE8sIGRlZmF1bHRDb25zdHJ1Y3RvcikKdmFyIGFuT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNSkKICAsIGFGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpCiAgLCBTUEVDSUVTICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKCdzcGVjaWVzJyk7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oTywgRCl7CiAgdmFyIEMgPSBhbk9iamVjdChPKS5jb25zdHJ1Y3RvciwgUzsKICByZXR1cm4gQyA9PT0gdW5kZWZpbmVkIHx8IChTID0gYW5PYmplY3QoQylbU1BFQ0lFU10pID09IHVuZGVmaW5lZCA/IEQgOiBhRnVuY3Rpb24oUyk7Cn07CgovKioqLyB9KSwKLyogMTAwICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCnZhciAkZXhwb3J0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KQovLyAxOS4xLjIuMiAvIDE1LjIuMy41IE9iamVjdC5jcmVhdGUoTyBbLCBQcm9wZXJ0aWVzXSkKJGV4cG9ydCgkZXhwb3J0LlMsICdPYmplY3QnLCB7Y3JlYXRlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KX0pOwoKLyoqKi8gfSksCi8qIDEwMSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuOSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTykKdmFyIHRvT2JqZWN0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpCiAgLCAkZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTsKCl9fd2VicGFja19yZXF1aXJlX18oNDUpKCdnZXRQcm90b3R5cGVPZicsIGZ1bmN0aW9uKCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGdldFByb3RvdHlwZU9mKGl0KXsKICAgIHJldHVybiAkZ2V0UHJvdG90eXBlT2YodG9PYmplY3QoaXQpKTsKICB9Owp9KTsKCi8qKiovIH0pLAovKiAxMDIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4yLjE0IE9iamVjdC5rZXlzKE8pCnZhciB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpCiAgLCAka2V5cyAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpOwoKX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2tleXMnLCBmdW5jdGlvbigpewogIHJldHVybiBmdW5jdGlvbiBrZXlzKGl0KXsKICAgIHJldHVybiAka2V5cyh0b09iamVjdChpdCkpOwogIH07Cn0pOwoKLyoqKi8gfSksCi8qIDEwMyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjMuMTkgT2JqZWN0LnNldFByb3RvdHlwZU9mKE8sIHByb3RvKQp2YXIgJGV4cG9ydCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7CiRleHBvcnQoJGV4cG9ydC5TLCAnT2JqZWN0Jywge3NldFByb3RvdHlwZU9mOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KS5zZXR9KTsKCi8qKiovIH0pLAovKiAxMDQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKdmFyIExJQlJBUlkgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpCiAgLCBnbG9iYWwgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpCiAgLCBjdHggICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KQogICwgY2xhc3NvZiAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSkKICAsICRleHBvcnQgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOSkKICAsIGlzT2JqZWN0ICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNikKICAsIGFGdW5jdGlvbiAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpCiAgLCBhbkluc3RhbmNlICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KQogICwgZm9yT2YgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NykKICAsIHNwZWNpZXNDb25zdHJ1Y3RvciA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpCiAgLCB0YXNrICAgICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY3KS5zZXQKICAsIG1pY3JvdGFzayAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOTQpKCkKICAsIFBST01JU0UgICAgICAgICAgICA9ICdQcm9taXNlJwogICwgVHlwZUVycm9yICAgICAgICAgID0gZ2xvYmFsLlR5cGVFcnJvcgogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MKICAsICRQcm9taXNlICAgICAgICAgICA9IGdsb2JhbFtQUk9NSVNFXQogICwgcHJvY2VzcyAgICAgICAgICAgID0gZ2xvYmFsLnByb2Nlc3MKICAsIGlzTm9kZSAgICAgICAgICAgICA9IGNsYXNzb2YocHJvY2VzcykgPT0gJ3Byb2Nlc3MnCiAgLCBlbXB0eSAgICAgICAgICAgICAgPSBmdW5jdGlvbigpeyAvKiBlbXB0eSAqLyB9CiAgLCBJbnRlcm5hbCwgR2VuZXJpY1Byb21pc2VDYXBhYmlsaXR5LCBXcmFwcGVyOwoKdmFyIFVTRV9OQVRJVkUgPSAhIWZ1bmN0aW9uKCl7CiAgdHJ5IHsKICAgIC8vIGNvcnJlY3Qgc3ViY2xhc3Npbmcgd2l0aCBAQHNwZWNpZXMgc3VwcG9ydAogICAgdmFyIHByb21pc2UgICAgID0gJFByb21pc2UucmVzb2x2ZSgxKQogICAgICAsIEZha2VQcm9taXNlID0gKHByb21pc2UuY29uc3RydWN0b3IgPSB7fSlbX193ZWJwYWNrX3JlcXVpcmVfXygzKSgnc3BlY2llcycpXSA9IGZ1bmN0aW9uKGV4ZWMpeyBleGVjKGVtcHR5LCBlbXB0eSk7IH07CiAgICAvLyB1bmhhbmRsZWQgcmVqZWN0aW9ucyB0cmFja2luZyBzdXBwb3J0LCBOb2RlSlMgUHJvbWlzZSB3aXRob3V0IGl0IGZhaWxzIEBAc3BlY2llcyB0ZXN0CiAgICByZXR1cm4gKGlzTm9kZSB8fCB0eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50ID09ICdmdW5jdGlvbicpICYmIHByb21pc2UudGhlbihlbXB0eSkgaW5zdGFuY2VvZiBGYWtlUHJvbWlzZTsKICB9IGNhdGNoKGUpeyAvKiBlbXB0eSAqLyB9Cn0oKTsKCi8vIGhlbHBlcnMKdmFyIHNhbWVDb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKGEsIGIpewogIC8vIHdpdGggbGlicmFyeSB3cmFwcGVyIHNwZWNpYWwgY2FzZQogIHJldHVybiBhID09PSBiIHx8IGEgPT09ICRQcm9taXNlICYmIGIgPT09IFdyYXBwZXI7Cn07CnZhciBpc1RoZW5hYmxlID0gZnVuY3Rpb24oaXQpewogIHZhciB0aGVuOwogIHJldHVybiBpc09iamVjdChpdCkgJiYgdHlwZW9mICh0aGVuID0gaXQudGhlbikgPT0gJ2Z1bmN0aW9uJyA/IHRoZW4gOiBmYWxzZTsKfTsKdmFyIG5ld1Byb21pc2VDYXBhYmlsaXR5ID0gZnVuY3Rpb24oQyl7CiAgcmV0dXJuIHNhbWVDb25zdHJ1Y3RvcigkUHJvbWlzZSwgQykKICAgID8gbmV3IFByb21pc2VDYXBhYmlsaXR5KEMpCiAgICA6IG5ldyBHZW5lcmljUHJvbWlzZUNhcGFiaWxpdHkoQyk7Cn07CnZhciBQcm9taXNlQ2FwYWJpbGl0eSA9IEdlbmVyaWNQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKEMpewogIHZhciByZXNvbHZlLCByZWplY3Q7CiAgdGhpcy5wcm9taXNlID0gbmV3IEMoZnVuY3Rpb24oJCRyZXNvbHZlLCAkJHJlamVjdCl7CiAgICBpZihyZXNvbHZlICE9PSB1bmRlZmluZWQgfHwgcmVqZWN0ICE9PSB1bmRlZmluZWQpdGhyb3cgVHlwZUVycm9yKCdCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvcicpOwogICAgcmVzb2x2ZSA9ICQkcmVzb2x2ZTsKICAgIHJlamVjdCAgPSAkJHJlamVjdDsKICB9KTsKICB0aGlzLnJlc29sdmUgPSBhRnVuY3Rpb24ocmVzb2x2ZSk7CiAgdGhpcy5yZWplY3QgID0gYUZ1bmN0aW9uKHJlamVjdCk7Cn07CnZhciBwZXJmb3JtID0gZnVuY3Rpb24oZXhlYyl7CiAgdHJ5IHsKICAgIGV4ZWMoKTsKICB9IGNhdGNoKGUpewogICAgcmV0dXJuIHtlcnJvcjogZX07CiAgfQp9Owp2YXIgbm90aWZ5ID0gZnVuY3Rpb24ocHJvbWlzZSwgaXNSZWplY3QpewogIGlmKHByb21pc2UuX24pcmV0dXJuOwogIHByb21pc2UuX24gPSB0cnVlOwogIHZhciBjaGFpbiA9IHByb21pc2UuX2M7CiAgbWljcm90YXNrKGZ1bmN0aW9uKCl7CiAgICB2YXIgdmFsdWUgPSBwcm9taXNlLl92CiAgICAgICwgb2sgICAgPSBwcm9taXNlLl9zID09IDEKICAgICAgLCBpICAgICA9IDA7CiAgICB2YXIgcnVuID0gZnVuY3Rpb24ocmVhY3Rpb24pewogICAgICB2YXIgaGFuZGxlciA9IG9rID8gcmVhY3Rpb24ub2sgOiByZWFjdGlvbi5mYWlsCiAgICAgICAgLCByZXNvbHZlID0gcmVhY3Rpb24ucmVzb2x2ZQogICAgICAgICwgcmVqZWN0ICA9IHJlYWN0aW9uLnJlamVjdAogICAgICAgICwgZG9tYWluICA9IHJlYWN0aW9uLmRvbWFpbgogICAgICAgICwgcmVzdWx0LCB0aGVuOwogICAgICB0cnkgewogICAgICAgIGlmKGhhbmRsZXIpewogICAgICAgICAgaWYoIW9rKXsKICAgICAgICAgICAgaWYocHJvbWlzZS5faCA9PSAyKW9uSGFuZGxlVW5oYW5kbGVkKHByb21pc2UpOwogICAgICAgICAgICBwcm9taXNlLl9oID0gMTsKICAgICAgICAgIH0KICAgICAgICAgIGlmKGhhbmRsZXIgPT09IHRydWUpcmVzdWx0ID0gdmFsdWU7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5lbnRlcigpOwogICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVyKHZhbHVlKTsKICAgICAgICAgICAgaWYoZG9tYWluKWRvbWFpbi5leGl0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZihyZXN1bHQgPT09IHJlYWN0aW9uLnByb21pc2UpewogICAgICAgICAgICByZWplY3QoVHlwZUVycm9yKCdQcm9taXNlLWNoYWluIGN5Y2xlJykpOwogICAgICAgICAgfSBlbHNlIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHJlc3VsdCkpewogICAgICAgICAgICB0aGVuLmNhbGwocmVzdWx0LCByZXNvbHZlLCByZWplY3QpOwogICAgICAgICAgfSBlbHNlIHJlc29sdmUocmVzdWx0KTsKICAgICAgICB9IGVsc2UgcmVqZWN0KHZhbHVlKTsKICAgICAgfSBjYXRjaChlKXsKICAgICAgICByZWplY3QoZSk7CiAgICAgIH0KICAgIH07CiAgICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXJ1bihjaGFpbltpKytdKTsgLy8gdmFyaWFibGUgbGVuZ3RoIC0gY2FuJ3QgdXNlIGZvckVhY2gKICAgIHByb21pc2UuX2MgPSBbXTsKICAgIHByb21pc2UuX24gPSBmYWxzZTsKICAgIGlmKGlzUmVqZWN0ICYmICFwcm9taXNlLl9oKW9uVW5oYW5kbGVkKHByb21pc2UpOwogIH0pOwp9Owp2YXIgb25VbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsKICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpewogICAgdmFyIHZhbHVlID0gcHJvbWlzZS5fdgogICAgICAsIGFicnVwdCwgaGFuZGxlciwgY29uc29sZTsKICAgIGlmKGlzVW5oYW5kbGVkKHByb21pc2UpKXsKICAgICAgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpewogICAgICAgIGlmKGlzTm9kZSl7CiAgICAgICAgICBwcm9jZXNzLmVtaXQoJ3VuaGFuZGxlZFJlamVjdGlvbicsIHZhbHVlLCBwcm9taXNlKTsKICAgICAgICB9IGVsc2UgaWYoaGFuZGxlciA9IGdsb2JhbC5vbnVuaGFuZGxlZHJlamVjdGlvbil7CiAgICAgICAgICBoYW5kbGVyKHtwcm9taXNlOiBwcm9taXNlLCByZWFzb246IHZhbHVlfSk7CiAgICAgICAgfSBlbHNlIGlmKChjb25zb2xlID0gZ2xvYmFsLmNvbnNvbGUpICYmIGNvbnNvbGUuZXJyb3IpewogICAgICAgICAgY29uc29sZS5lcnJvcignVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uJywgdmFsdWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8vIEJyb3dzZXJzIHNob3VsZCBub3QgdHJpZ2dlciBgcmVqZWN0aW9uSGFuZGxlZGAgZXZlbnQgaWYgaXQgd2FzIGhhbmRsZWQgaGVyZSwgTm9kZUpTIC0gc2hvdWxkCiAgICAgIHByb21pc2UuX2ggPSBpc05vZGUgfHwgaXNVbmhhbmRsZWQocHJvbWlzZSkgPyAyIDogMTsKICAgIH0gcHJvbWlzZS5fYSA9IHVuZGVmaW5lZDsKICAgIGlmKGFicnVwdCl0aHJvdyBhYnJ1cHQuZXJyb3I7CiAgfSk7Cn07CnZhciBpc1VuaGFuZGxlZCA9IGZ1bmN0aW9uKHByb21pc2UpewogIGlmKHByb21pc2UuX2ggPT0gMSlyZXR1cm4gZmFsc2U7CiAgdmFyIGNoYWluID0gcHJvbWlzZS5fYSB8fCBwcm9taXNlLl9jCiAgICAsIGkgICAgID0gMAogICAgLCByZWFjdGlvbjsKICB3aGlsZShjaGFpbi5sZW5ndGggPiBpKXsKICAgIHJlYWN0aW9uID0gY2hhaW5baSsrXTsKICAgIGlmKHJlYWN0aW9uLmZhaWwgfHwgIWlzVW5oYW5kbGVkKHJlYWN0aW9uLnByb21pc2UpKXJldHVybiBmYWxzZTsKICB9IHJldHVybiB0cnVlOwp9Owp2YXIgb25IYW5kbGVVbmhhbmRsZWQgPSBmdW5jdGlvbihwcm9taXNlKXsKICB0YXNrLmNhbGwoZ2xvYmFsLCBmdW5jdGlvbigpewogICAgdmFyIGhhbmRsZXI7CiAgICBpZihpc05vZGUpewogICAgICBwcm9jZXNzLmVtaXQoJ3JlamVjdGlvbkhhbmRsZWQnLCBwcm9taXNlKTsKICAgIH0gZWxzZSBpZihoYW5kbGVyID0gZ2xvYmFsLm9ucmVqZWN0aW9uaGFuZGxlZCl7CiAgICAgIGhhbmRsZXIoe3Byb21pc2U6IHByb21pc2UsIHJlYXNvbjogcHJvbWlzZS5fdn0pOwogICAgfQogIH0pOwp9Owp2YXIgJHJlamVjdCA9IGZ1bmN0aW9uKHZhbHVlKXsKICB2YXIgcHJvbWlzZSA9IHRoaXM7CiAgaWYocHJvbWlzZS5fZClyZXR1cm47CiAgcHJvbWlzZS5fZCA9IHRydWU7CiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwCiAgcHJvbWlzZS5fdiA9IHZhbHVlOwogIHByb21pc2UuX3MgPSAyOwogIGlmKCFwcm9taXNlLl9hKXByb21pc2UuX2EgPSBwcm9taXNlLl9jLnNsaWNlKCk7CiAgbm90aWZ5KHByb21pc2UsIHRydWUpOwp9Owp2YXIgJHJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSl7CiAgdmFyIHByb21pc2UgPSB0aGlzCiAgICAsIHRoZW47CiAgaWYocHJvbWlzZS5fZClyZXR1cm47CiAgcHJvbWlzZS5fZCA9IHRydWU7CiAgcHJvbWlzZSA9IHByb21pc2UuX3cgfHwgcHJvbWlzZTsgLy8gdW53cmFwCiAgdHJ5IHsKICAgIGlmKHByb21pc2UgPT09IHZhbHVlKXRocm93IFR5cGVFcnJvcigiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGYiKTsKICAgIGlmKHRoZW4gPSBpc1RoZW5hYmxlKHZhbHVlKSl7CiAgICAgIG1pY3JvdGFzayhmdW5jdGlvbigpewogICAgICAgIHZhciB3cmFwcGVyID0ge193OiBwcm9taXNlLCBfZDogZmFsc2V9OyAvLyB3cmFwCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgY3R4KCRyZXNvbHZlLCB3cmFwcGVyLCAxKSwgY3R4KCRyZWplY3QsIHdyYXBwZXIsIDEpKTsKICAgICAgICB9IGNhdGNoKGUpewogICAgICAgICAgJHJlamVjdC5jYWxsKHdyYXBwZXIsIGUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBwcm9taXNlLl92ID0gdmFsdWU7CiAgICAgIHByb21pc2UuX3MgPSAxOwogICAgICBub3RpZnkocHJvbWlzZSwgZmFsc2UpOwogICAgfQogIH0gY2F0Y2goZSl7CiAgICAkcmVqZWN0LmNhbGwoe193OiBwcm9taXNlLCBfZDogZmFsc2V9LCBlKTsgLy8gd3JhcAogIH0KfTsKCi8vIGNvbnN0cnVjdG9yIHBvbHlmaWxsCmlmKCFVU0VfTkFUSVZFKXsKICAvLyAyNS40LjMuMSBQcm9taXNlKGV4ZWN1dG9yKQogICRQcm9taXNlID0gZnVuY3Rpb24gUHJvbWlzZShleGVjdXRvcil7CiAgICBhbkluc3RhbmNlKHRoaXMsICRQcm9taXNlLCBQUk9NSVNFLCAnX2gnKTsKICAgIGFGdW5jdGlvbihleGVjdXRvcik7CiAgICBJbnRlcm5hbC5jYWxsKHRoaXMpOwogICAgdHJ5IHsKICAgICAgZXhlY3V0b3IoY3R4KCRyZXNvbHZlLCB0aGlzLCAxKSwgY3R4KCRyZWplY3QsIHRoaXMsIDEpKTsKICAgIH0gY2F0Y2goZXJyKXsKICAgICAgJHJlamVjdC5jYWxsKHRoaXMsIGVycik7CiAgICB9CiAgfTsKICBJbnRlcm5hbCA9IGZ1bmN0aW9uIFByb21pc2UoZXhlY3V0b3IpewogICAgdGhpcy5fYyA9IFtdOyAgICAgICAgICAgICAvLyA8LSBhd2FpdGluZyByZWFjdGlvbnMKICAgIHRoaXMuX2EgPSB1bmRlZmluZWQ7ICAgICAgLy8gPC0gY2hlY2tlZCBpbiBpc1VuaGFuZGxlZCByZWFjdGlvbnMKICAgIHRoaXMuX3MgPSAwOyAgICAgICAgICAgICAgLy8gPC0gc3RhdGUKICAgIHRoaXMuX2QgPSBmYWxzZTsgICAgICAgICAgLy8gPC0gZG9uZQogICAgdGhpcy5fdiA9IHVuZGVmaW5lZDsgICAgICAvLyA8LSB2YWx1ZQogICAgdGhpcy5faCA9IDA7ICAgICAgICAgICAgICAvLyA8LSByZWplY3Rpb24gc3RhdGUsIDAgLSBkZWZhdWx0LCAxIC0gaGFuZGxlZCwgMiAtIHVuaGFuZGxlZAogICAgdGhpcy5fbiA9IGZhbHNlOyAgICAgICAgICAvLyA8LSBub3RpZnkKICB9OwogIEludGVybmFsLnByb3RvdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTYpKCRQcm9taXNlLnByb3RvdHlwZSwgewogICAgLy8gMjUuNC41LjMgUHJvbWlzZS5wcm90b3R5cGUudGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkKICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpewogICAgICB2YXIgcmVhY3Rpb24gICAgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShzcGVjaWVzQ29uc3RydWN0b3IodGhpcywgJFByb21pc2UpKTsKICAgICAgcmVhY3Rpb24ub2sgICAgID0gdHlwZW9mIG9uRnVsZmlsbGVkID09ICdmdW5jdGlvbicgPyBvbkZ1bGZpbGxlZCA6IHRydWU7CiAgICAgIHJlYWN0aW9uLmZhaWwgICA9IHR5cGVvZiBvblJlamVjdGVkID09ICdmdW5jdGlvbicgJiYgb25SZWplY3RlZDsKICAgICAgcmVhY3Rpb24uZG9tYWluID0gaXNOb2RlID8gcHJvY2Vzcy5kb21haW4gOiB1bmRlZmluZWQ7CiAgICAgIHRoaXMuX2MucHVzaChyZWFjdGlvbik7CiAgICAgIGlmKHRoaXMuX2EpdGhpcy5fYS5wdXNoKHJlYWN0aW9uKTsKICAgICAgaWYodGhpcy5fcylub3RpZnkodGhpcywgZmFsc2UpOwogICAgICByZXR1cm4gcmVhY3Rpb24ucHJvbWlzZTsKICAgIH0sCiAgICAvLyAyNS40LjUuMSBQcm9taXNlLnByb3RvdHlwZS5jYXRjaChvblJlamVjdGVkKQogICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3RlZCl7CiAgICAgIHJldHVybiB0aGlzLnRoZW4odW5kZWZpbmVkLCBvblJlamVjdGVkKTsKICAgIH0KICB9KTsKICBQcm9taXNlQ2FwYWJpbGl0eSA9IGZ1bmN0aW9uKCl7CiAgICB2YXIgcHJvbWlzZSAgPSBuZXcgSW50ZXJuYWw7CiAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlOwogICAgdGhpcy5yZXNvbHZlID0gY3R4KCRyZXNvbHZlLCBwcm9taXNlLCAxKTsKICAgIHRoaXMucmVqZWN0ICA9IGN0eCgkcmVqZWN0LCBwcm9taXNlLCAxKTsKICB9Owp9CgokZXhwb3J0KCRleHBvcnQuRyArICRleHBvcnQuVyArICRleHBvcnQuRiAqICFVU0VfTkFUSVZFLCB7UHJvbWlzZTogJFByb21pc2V9KTsKX193ZWJwYWNrX3JlcXVpcmVfXygyMikoJFByb21pc2UsIFBST01JU0UpOwpfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KShQUk9NSVNFKTsKV3JhcHBlciA9IF9fd2VicGFja19yZXF1aXJlX18oMClbUFJPTUlTRV07CgovLyBzdGF0aWNzCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsIFBST01JU0UsIHsKICAvLyAyNS40LjQuNSBQcm9taXNlLnJlamVjdChyKQogIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHIpewogICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKQogICAgICAsICQkcmVqZWN0ICAgPSBjYXBhYmlsaXR5LnJlamVjdDsKICAgICQkcmVqZWN0KHIpOwogICAgcmV0dXJuIGNhcGFiaWxpdHkucHJvbWlzZTsKICB9Cn0pOwokZXhwb3J0KCRleHBvcnQuUyArICRleHBvcnQuRiAqIChMSUJSQVJZIHx8ICFVU0VfTkFUSVZFKSwgUFJPTUlTRSwgewogIC8vIDI1LjQuNC42IFByb21pc2UucmVzb2x2ZSh4KQogIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUoeCl7CiAgICAvLyBpbnN0YW5jZW9mIGluc3RlYWQgb2YgaW50ZXJuYWwgc2xvdCBjaGVjayBiZWNhdXNlIHdlIHNob3VsZCBmaXggaXQgd2l0aG91dCByZXBsYWNlbWVudCBuYXRpdmUgUHJvbWlzZSBjb3JlCiAgICBpZih4IGluc3RhbmNlb2YgJFByb21pc2UgJiYgc2FtZUNvbnN0cnVjdG9yKHguY29uc3RydWN0b3IsIHRoaXMpKXJldHVybiB4OwogICAgdmFyIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eSh0aGlzKQogICAgICAsICQkcmVzb2x2ZSAgPSBjYXBhYmlsaXR5LnJlc29sdmU7CiAgICAkJHJlc29sdmUoeCk7CiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogIH0KfSk7CiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIShVU0VfTkFUSVZFICYmIF9fd2VicGFja19yZXF1aXJlX18oOTIpKGZ1bmN0aW9uKGl0ZXIpewogICRQcm9taXNlLmFsbChpdGVyKVsnY2F0Y2gnXShlbXB0eSk7Cn0pKSwgUFJPTUlTRSwgewogIC8vIDI1LjQuNC4xIFByb21pc2UuYWxsKGl0ZXJhYmxlKQogIGFsbDogZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKXsKICAgIHZhciBDICAgICAgICAgID0gdGhpcwogICAgICAsIGNhcGFiaWxpdHkgPSBuZXdQcm9taXNlQ2FwYWJpbGl0eShDKQogICAgICAsIHJlc29sdmUgICAgPSBjYXBhYmlsaXR5LnJlc29sdmUKICAgICAgLCByZWplY3QgICAgID0gY2FwYWJpbGl0eS5yZWplY3Q7CiAgICB2YXIgYWJydXB0ID0gcGVyZm9ybShmdW5jdGlvbigpewogICAgICB2YXIgdmFsdWVzICAgID0gW10KICAgICAgICAsIGluZGV4ICAgICA9IDAKICAgICAgICAsIHJlbWFpbmluZyA9IDE7CiAgICAgIGZvck9mKGl0ZXJhYmxlLCBmYWxzZSwgZnVuY3Rpb24ocHJvbWlzZSl7CiAgICAgICAgdmFyICRpbmRleCAgICAgICAgPSBpbmRleCsrCiAgICAgICAgICAsIGFscmVhZHlDYWxsZWQgPSBmYWxzZTsKICAgICAgICB2YWx1ZXMucHVzaCh1bmRlZmluZWQpOwogICAgICAgIHJlbWFpbmluZysrOwogICAgICAgIEMucmVzb2x2ZShwcm9taXNlKS50aGVuKGZ1bmN0aW9uKHZhbHVlKXsKICAgICAgICAgIGlmKGFscmVhZHlDYWxsZWQpcmV0dXJuOwogICAgICAgICAgYWxyZWFkeUNhbGxlZCAgPSB0cnVlOwogICAgICAgICAgdmFsdWVzWyRpbmRleF0gPSB2YWx1ZTsKICAgICAgICAgIC0tcmVtYWluaW5nIHx8IHJlc29sdmUodmFsdWVzKTsKICAgICAgICB9LCByZWplY3QpOwogICAgICB9KTsKICAgICAgLS1yZW1haW5pbmcgfHwgcmVzb2x2ZSh2YWx1ZXMpOwogICAgfSk7CiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7CiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogIH0sCiAgLy8gMjUuNC40LjQgUHJvbWlzZS5yYWNlKGl0ZXJhYmxlKQogIHJhY2U6IGZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpewogICAgdmFyIEMgICAgICAgICAgPSB0aGlzCiAgICAgICwgY2FwYWJpbGl0eSA9IG5ld1Byb21pc2VDYXBhYmlsaXR5KEMpCiAgICAgICwgcmVqZWN0ICAgICA9IGNhcGFiaWxpdHkucmVqZWN0OwogICAgdmFyIGFicnVwdCA9IHBlcmZvcm0oZnVuY3Rpb24oKXsKICAgICAgZm9yT2YoaXRlcmFibGUsIGZhbHNlLCBmdW5jdGlvbihwcm9taXNlKXsKICAgICAgICBDLnJlc29sdmUocHJvbWlzZSkudGhlbihjYXBhYmlsaXR5LnJlc29sdmUsIHJlamVjdCk7CiAgICAgIH0pOwogICAgfSk7CiAgICBpZihhYnJ1cHQpcmVqZWN0KGFicnVwdC5lcnJvcik7CiAgICByZXR1cm4gY2FwYWJpbGl0eS5wcm9taXNlOwogIH0KfSk7CgovKioqLyB9KSwKLyogMTA1ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCi8vIEVDTUFTY3JpcHQgNiBzeW1ib2xzIHNoaW0KdmFyIGdsb2JhbCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKQogICwgaGFzICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKQogICwgREVTQ1JJUFRPUlMgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpCiAgLCAkZXhwb3J0ICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oOSkKICAsIHJlZGVmaW5lICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NikKICAsIE1FVEEgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MikuS0VZCiAgLCAkZmFpbHMgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpCiAgLCBzaGFyZWQgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMzApCiAgLCBzZXRUb1N0cmluZ1RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpCiAgLCB1aWQgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpCiAgLCB3a3MgICAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMykKICAsIHdrc0V4dCAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSkKICAsIHdrc0RlZmluZSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkKICAsIGtleU9mICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MykKICAsIGVudW1LZXlzICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NikKICAsIGlzQXJyYXkgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCkKICAsIGFuT2JqZWN0ICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KQogICwgdG9JT2JqZWN0ICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKQogICwgdG9QcmltaXRpdmUgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKQogICwgY3JlYXRlRGVzYyAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KQogICwgX2NyZWF0ZSAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KQogICwgZ09QTkV4dCAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KQogICwgJEdPUEQgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KQogICwgJERQICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpCiAgLCAka2V5cyAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpCiAgLCBnT1BEICAgICAgICAgICA9ICRHT1BELmYKICAsIGRQICAgICAgICAgICAgID0gJERQLmYKICAsIGdPUE4gICAgICAgICAgID0gZ09QTkV4dC5mCiAgLCAkU3ltYm9sICAgICAgICA9IGdsb2JhbC5TeW1ib2wKICAsICRKU09OICAgICAgICAgID0gZ2xvYmFsLkpTT04KICAsIF9zdHJpbmdpZnkgICAgID0gJEpTT04gJiYgJEpTT04uc3RyaW5naWZ5CiAgLCBQUk9UT1RZUEUgICAgICA9ICdwcm90b3R5cGUnCiAgLCBISURERU4gICAgICAgICA9IHdrcygnX2hpZGRlbicpCiAgLCBUT19QUklNSVRJVkUgICA9IHdrcygndG9QcmltaXRpdmUnKQogICwgaXNFbnVtICAgICAgICAgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZQogICwgU3ltYm9sUmVnaXN0cnkgPSBzaGFyZWQoJ3N5bWJvbC1yZWdpc3RyeScpCiAgLCBBbGxTeW1ib2xzICAgICA9IHNoYXJlZCgnc3ltYm9scycpCiAgLCBPUFN5bWJvbHMgICAgICA9IHNoYXJlZCgnb3Atc3ltYm9scycpCiAgLCBPYmplY3RQcm90byAgICA9IE9iamVjdFtQUk9UT1RZUEVdCiAgLCBVU0VfTkFUSVZFICAgICA9IHR5cGVvZiAkU3ltYm9sID09ICdmdW5jdGlvbicKICAsIFFPYmplY3QgICAgICAgID0gZ2xvYmFsLlFPYmplY3Q7Ci8vIERvbid0IHVzZSBzZXR0ZXJzIGluIFF0IFNjcmlwdCwgaHR0cHM6Ly9naXRodWIuY29tL3psb2lyb2NrL2NvcmUtanMvaXNzdWVzLzE3Mwp2YXIgc2V0dGVyID0gIVFPYmplY3QgfHwgIVFPYmplY3RbUFJPVE9UWVBFXSB8fCAhUU9iamVjdFtQUk9UT1RZUEVdLmZpbmRDaGlsZDsKCi8vIGZhbGxiYWNrIGZvciBvbGQgQW5kcm9pZCwgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTY4Nwp2YXIgc2V0U3ltYm9sRGVzYyA9IERFU0NSSVBUT1JTICYmICRmYWlscyhmdW5jdGlvbigpewogIHJldHVybiBfY3JlYXRlKGRQKHt9LCAnYScsIHsKICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIGRQKHRoaXMsICdhJywge3ZhbHVlOiA3fSkuYTsgfQogIH0pKS5hICE9IDc7Cn0pID8gZnVuY3Rpb24oaXQsIGtleSwgRCl7CiAgdmFyIHByb3RvRGVzYyA9IGdPUEQoT2JqZWN0UHJvdG8sIGtleSk7CiAgaWYocHJvdG9EZXNjKWRlbGV0ZSBPYmplY3RQcm90b1trZXldOwogIGRQKGl0LCBrZXksIEQpOwogIGlmKHByb3RvRGVzYyAmJiBpdCAhPT0gT2JqZWN0UHJvdG8pZFAoT2JqZWN0UHJvdG8sIGtleSwgcHJvdG9EZXNjKTsKfSA6IGRQOwoKdmFyIHdyYXAgPSBmdW5jdGlvbih0YWcpewogIHZhciBzeW0gPSBBbGxTeW1ib2xzW3RhZ10gPSBfY3JlYXRlKCRTeW1ib2xbUFJPVE9UWVBFXSk7CiAgc3ltLl9rID0gdGFnOwogIHJldHVybiBzeW07Cn07Cgp2YXIgaXNTeW1ib2wgPSBVU0VfTkFUSVZFICYmIHR5cGVvZiAkU3ltYm9sLml0ZXJhdG9yID09ICdzeW1ib2wnID8gZnVuY3Rpb24oaXQpewogIHJldHVybiB0eXBlb2YgaXQgPT0gJ3N5bWJvbCc7Cn0gOiBmdW5jdGlvbihpdCl7CiAgcmV0dXJuIGl0IGluc3RhbmNlb2YgJFN5bWJvbDsKfTsKCnZhciAkZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0eShpdCwga2V5LCBEKXsKICBpZihpdCA9PT0gT2JqZWN0UHJvdG8pJGRlZmluZVByb3BlcnR5KE9QU3ltYm9scywga2V5LCBEKTsKICBhbk9iamVjdChpdCk7CiAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTsKICBhbk9iamVjdChEKTsKICBpZihoYXMoQWxsU3ltYm9scywga2V5KSl7CiAgICBpZighRC5lbnVtZXJhYmxlKXsKICAgICAgaWYoIWhhcyhpdCwgSElEREVOKSlkUChpdCwgSElEREVOLCBjcmVhdGVEZXNjKDEsIHt9KSk7CiAgICAgIGl0W0hJRERFTl1ba2V5XSA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBpZihoYXMoaXQsIEhJRERFTikgJiYgaXRbSElEREVOXVtrZXldKWl0W0hJRERFTl1ba2V5XSA9IGZhbHNlOwogICAgICBEID0gX2NyZWF0ZShELCB7ZW51bWVyYWJsZTogY3JlYXRlRGVzYygwLCBmYWxzZSl9KTsKICAgIH0gcmV0dXJuIHNldFN5bWJvbERlc2MoaXQsIGtleSwgRCk7CiAgfSByZXR1cm4gZFAoaXQsIGtleSwgRCk7Cn07CnZhciAkZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXMoaXQsIFApewogIGFuT2JqZWN0KGl0KTsKICB2YXIga2V5cyA9IGVudW1LZXlzKFAgPSB0b0lPYmplY3QoUCkpCiAgICAsIGkgICAgPSAwCiAgICAsIGwgPSBrZXlzLmxlbmd0aAogICAgLCBrZXk7CiAgd2hpbGUobCA+IGkpJGRlZmluZVByb3BlcnR5KGl0LCBrZXkgPSBrZXlzW2krK10sIFBba2V5XSk7CiAgcmV0dXJuIGl0Owp9Owp2YXIgJGNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpdCwgUCl7CiAgcmV0dXJuIFAgPT09IHVuZGVmaW5lZCA/IF9jcmVhdGUoaXQpIDogJGRlZmluZVByb3BlcnRpZXMoX2NyZWF0ZShpdCksIFApOwp9Owp2YXIgJHByb3BlcnR5SXNFbnVtZXJhYmxlID0gZnVuY3Rpb24gcHJvcGVydHlJc0VudW1lcmFibGUoa2V5KXsKICB2YXIgRSA9IGlzRW51bS5jYWxsKHRoaXMsIGtleSA9IHRvUHJpbWl0aXZlKGtleSwgdHJ1ZSkpOwogIGlmKHRoaXMgPT09IE9iamVjdFByb3RvICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICFoYXMoT1BTeW1ib2xzLCBrZXkpKXJldHVybiBmYWxzZTsKICByZXR1cm4gRSB8fCAhaGFzKHRoaXMsIGtleSkgfHwgIWhhcyhBbGxTeW1ib2xzLCBrZXkpIHx8IGhhcyh0aGlzLCBISURERU4pICYmIHRoaXNbSElEREVOXVtrZXldID8gRSA6IHRydWU7Cn07CnZhciAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpewogIGl0ICA9IHRvSU9iamVjdChpdCk7CiAga2V5ID0gdG9QcmltaXRpdmUoa2V5LCB0cnVlKTsKICBpZihpdCA9PT0gT2JqZWN0UHJvdG8gJiYgaGFzKEFsbFN5bWJvbHMsIGtleSkgJiYgIWhhcyhPUFN5bWJvbHMsIGtleSkpcmV0dXJuOwogIHZhciBEID0gZ09QRChpdCwga2V5KTsKICBpZihEICYmIGhhcyhBbGxTeW1ib2xzLCBrZXkpICYmICEoaGFzKGl0LCBISURERU4pICYmIGl0W0hJRERFTl1ba2V5XSkpRC5lbnVtZXJhYmxlID0gdHJ1ZTsKICByZXR1cm4gRDsKfTsKdmFyICRnZXRPd25Qcm9wZXJ0eU5hbWVzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhpdCl7CiAgdmFyIG5hbWVzICA9IGdPUE4odG9JT2JqZWN0KGl0KSkKICAgICwgcmVzdWx0ID0gW10KICAgICwgaSAgICAgID0gMAogICAgLCBrZXk7CiAgd2hpbGUobmFtZXMubGVuZ3RoID4gaSl7CiAgICBpZighaGFzKEFsbFN5bWJvbHMsIGtleSA9IG5hbWVzW2krK10pICYmIGtleSAhPSBISURERU4gJiYga2V5ICE9IE1FVEEpcmVzdWx0LnB1c2goa2V5KTsKICB9IHJldHVybiByZXN1bHQ7Cn07CnZhciAkZ2V0T3duUHJvcGVydHlTeW1ib2xzID0gZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlTeW1ib2xzKGl0KXsKICB2YXIgSVNfT1AgID0gaXQgPT09IE9iamVjdFByb3RvCiAgICAsIG5hbWVzICA9IGdPUE4oSVNfT1AgPyBPUFN5bWJvbHMgOiB0b0lPYmplY3QoaXQpKQogICAgLCByZXN1bHQgPSBbXQogICAgLCBpICAgICAgPSAwCiAgICAsIGtleTsKICB3aGlsZShuYW1lcy5sZW5ndGggPiBpKXsKICAgIGlmKGhhcyhBbGxTeW1ib2xzLCBrZXkgPSBuYW1lc1tpKytdKSAmJiAoSVNfT1AgPyBoYXMoT2JqZWN0UHJvdG8sIGtleSkgOiB0cnVlKSlyZXN1bHQucHVzaChBbGxTeW1ib2xzW2tleV0pOwogIH0gcmV0dXJuIHJlc3VsdDsKfTsKCi8vIDE5LjQuMS4xIFN5bWJvbChbZGVzY3JpcHRpb25dKQppZighVVNFX05BVElWRSl7CiAgJFN5bWJvbCA9IGZ1bmN0aW9uIFN5bWJvbCgpewogICAgaWYodGhpcyBpbnN0YW5jZW9mICRTeW1ib2wpdGhyb3cgVHlwZUVycm9yKCdTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhJyk7CiAgICB2YXIgdGFnID0gdWlkKGFyZ3VtZW50cy5sZW5ndGggPiAwID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkKTsKICAgIHZhciAkc2V0ID0gZnVuY3Rpb24odmFsdWUpewogICAgICBpZih0aGlzID09PSBPYmplY3RQcm90bykkc2V0LmNhbGwoT1BTeW1ib2xzLCB2YWx1ZSk7CiAgICAgIGlmKGhhcyh0aGlzLCBISURERU4pICYmIGhhcyh0aGlzW0hJRERFTl0sIHRhZykpdGhpc1tISURERU5dW3RhZ10gPSBmYWxzZTsKICAgICAgc2V0U3ltYm9sRGVzYyh0aGlzLCB0YWcsIGNyZWF0ZURlc2MoMSwgdmFsdWUpKTsKICAgIH07CiAgICBpZihERVNDUklQVE9SUyAmJiBzZXR0ZXIpc2V0U3ltYm9sRGVzYyhPYmplY3RQcm90bywgdGFnLCB7Y29uZmlndXJhYmxlOiB0cnVlLCBzZXQ6ICRzZXR9KTsKICAgIHJldHVybiB3cmFwKHRhZyk7CiAgfTsKICByZWRlZmluZSgkU3ltYm9sW1BST1RPVFlQRV0sICd0b1N0cmluZycsIGZ1bmN0aW9uIHRvU3RyaW5nKCl7CiAgICByZXR1cm4gdGhpcy5fazsKICB9KTsKCiAgJEdPUEQuZiA9ICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgJERQLmYgICA9ICRkZWZpbmVQcm9wZXJ0eTsKICBfX3dlYnBhY2tfcmVxdWlyZV9fKDY1KS5mID0gZ09QTkV4dC5mID0gJGdldE93blByb3BlcnR5TmFtZXM7CiAgX193ZWJwYWNrX3JlcXVpcmVfXyg0MSkuZiAgPSAkcHJvcGVydHlJc0VudW1lcmFibGU7CiAgX193ZWJwYWNrX3JlcXVpcmVfXyg1OCkuZiA9ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CgogIGlmKERFU0NSSVBUT1JTICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KSl7CiAgICByZWRlZmluZShPYmplY3RQcm90bywgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJHByb3BlcnR5SXNFbnVtZXJhYmxlLCB0cnVlKTsKICB9CgogIHdrc0V4dC5mID0gZnVuY3Rpb24obmFtZSl7CiAgICByZXR1cm4gd3JhcCh3a3MobmFtZSkpOwogIH0KfQoKJGV4cG9ydCgkZXhwb3J0LkcgKyAkZXhwb3J0LlcgKyAkZXhwb3J0LkYgKiAhVVNFX05BVElWRSwge1N5bWJvbDogJFN5bWJvbH0pOwoKZm9yKHZhciBzeW1ib2xzID0gKAogIC8vIDE5LjQuMi4yLCAxOS40LjIuMywgMTkuNC4yLjQsIDE5LjQuMi42LCAxOS40LjIuOCwgMTkuNC4yLjksIDE5LjQuMi4xMCwgMTkuNC4yLjExLCAxOS40LjIuMTIsIDE5LjQuMi4xMywgMTkuNC4yLjE0CiAgJ2hhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzJwopLnNwbGl0KCcsJyksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3Moc3ltYm9sc1tpKytdKTsKCmZvcih2YXIgc3ltYm9scyA9ICRrZXlzKHdrcy5zdG9yZSksIGkgPSAwOyBzeW1ib2xzLmxlbmd0aCA+IGk7ICl3a3NEZWZpbmUoc3ltYm9sc1tpKytdKTsKCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdTeW1ib2wnLCB7CiAgLy8gMTkuNC4yLjEgU3ltYm9sLmZvcihrZXkpCiAgJ2Zvcic6IGZ1bmN0aW9uKGtleSl7CiAgICByZXR1cm4gaGFzKFN5bWJvbFJlZ2lzdHJ5LCBrZXkgKz0gJycpCiAgICAgID8gU3ltYm9sUmVnaXN0cnlba2V5XQogICAgICA6IFN5bWJvbFJlZ2lzdHJ5W2tleV0gPSAkU3ltYm9sKGtleSk7CiAgfSwKICAvLyAxOS40LjIuNSBTeW1ib2wua2V5Rm9yKHN5bSkKICBrZXlGb3I6IGZ1bmN0aW9uIGtleUZvcihrZXkpewogICAgaWYoaXNTeW1ib2woa2V5KSlyZXR1cm4ga2V5T2YoU3ltYm9sUmVnaXN0cnksIGtleSk7CiAgICB0aHJvdyBUeXBlRXJyb3Ioa2V5ICsgJyBpcyBub3QgYSBzeW1ib2whJyk7CiAgfSwKICB1c2VTZXR0ZXI6IGZ1bmN0aW9uKCl7IHNldHRlciA9IHRydWU7IH0sCiAgdXNlU2ltcGxlOiBmdW5jdGlvbigpeyBzZXR0ZXIgPSBmYWxzZTsgfQp9KTsKCiRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogIVVTRV9OQVRJVkUsICdPYmplY3QnLCB7CiAgLy8gMTkuMS4yLjIgT2JqZWN0LmNyZWF0ZShPIFssIFByb3BlcnRpZXNdKQogIGNyZWF0ZTogJGNyZWF0ZSwKICAvLyAxOS4xLjIuNCBPYmplY3QuZGVmaW5lUHJvcGVydHkoTywgUCwgQXR0cmlidXRlcykKICBkZWZpbmVQcm9wZXJ0eTogJGRlZmluZVByb3BlcnR5LAogIC8vIDE5LjEuMi4zIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8sIFByb3BlcnRpZXMpCiAgZGVmaW5lUHJvcGVydGllczogJGRlZmluZVByb3BlcnRpZXMsCiAgLy8gMTkuMS4yLjYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPLCBQKQogIGdldE93blByb3BlcnR5RGVzY3JpcHRvcjogJGdldE93blByb3BlcnR5RGVzY3JpcHRvciwKICAvLyAxOS4xLjIuNyBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhPKQogIGdldE93blByb3BlcnR5TmFtZXM6ICRnZXRPd25Qcm9wZXJ0eU5hbWVzLAogIC8vIDE5LjEuMi44IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoTykKICBnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ICRnZXRPd25Qcm9wZXJ0eVN5bWJvbHMKfSk7CgovLyAyNC4zLjIgSlNPTi5zdHJpbmdpZnkodmFsdWUgWywgcmVwbGFjZXIgWywgc3BhY2VdXSkKJEpTT04gJiYgJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYgKiAoIVVTRV9OQVRJVkUgfHwgJGZhaWxzKGZ1bmN0aW9uKCl7CiAgdmFyIFMgPSAkU3ltYm9sKCk7CiAgLy8gTVMgRWRnZSBjb252ZXJ0cyBzeW1ib2wgdmFsdWVzIHRvIEpTT04gYXMge30KICAvLyBXZWJLaXQgY29udmVydHMgc3ltYm9sIHZhbHVlcyB0byBKU09OIGFzIG51bGwKICAvLyBWOCB0aHJvd3Mgb24gYm94ZWQgc3ltYm9scwogIHJldHVybiBfc3RyaW5naWZ5KFtTXSkgIT0gJ1tudWxsXScgfHwgX3N0cmluZ2lmeSh7YTogU30pICE9ICd7fScgfHwgX3N0cmluZ2lmeShPYmplY3QoUykpICE9ICd7fSc7Cn0pKSwgJ0pTT04nLCB7CiAgc3RyaW5naWZ5OiBmdW5jdGlvbiBzdHJpbmdpZnkoaXQpewogICAgaWYoaXQgPT09IHVuZGVmaW5lZCB8fCBpc1N5bWJvbChpdCkpcmV0dXJuOyAvLyBJRTggcmV0dXJucyBzdHJpbmcgb24gdW5kZWZpbmVkCiAgICB2YXIgYXJncyA9IFtpdF0KICAgICAgLCBpICAgID0gMQogICAgICAsIHJlcGxhY2VyLCAkcmVwbGFjZXI7CiAgICB3aGlsZShhcmd1bWVudHMubGVuZ3RoID4gaSlhcmdzLnB1c2goYXJndW1lbnRzW2krK10pOwogICAgcmVwbGFjZXIgPSBhcmdzWzFdOwogICAgaWYodHlwZW9mIHJlcGxhY2VyID09ICdmdW5jdGlvbicpJHJlcGxhY2VyID0gcmVwbGFjZXI7CiAgICBpZigkcmVwbGFjZXIgfHwgIWlzQXJyYXkocmVwbGFjZXIpKXJlcGxhY2VyID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7CiAgICAgIGlmKCRyZXBsYWNlcil2YWx1ZSA9ICRyZXBsYWNlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpOwogICAgICBpZighaXNTeW1ib2wodmFsdWUpKXJldHVybiB2YWx1ZTsKICAgIH07CiAgICBhcmdzWzFdID0gcmVwbGFjZXI7CiAgICByZXR1cm4gX3N0cmluZ2lmeS5hcHBseSgkSlNPTiwgYXJncyk7CiAgfQp9KTsKCi8vIDE5LjQuMy40IFN5bWJvbC5wcm90b3R5cGVbQEB0b1ByaW1pdGl2ZV0oaGludCkKJFN5bWJvbFtQUk9UT1RZUEVdW1RPX1BSSU1JVElWRV0gfHwgX193ZWJwYWNrX3JlcXVpcmVfXyg3KSgkU3ltYm9sW1BST1RPVFlQRV0sIFRPX1BSSU1JVElWRSwgJFN5bWJvbFtQUk9UT1RZUEVdLnZhbHVlT2YpOwovLyAxOS40LjMuNSBTeW1ib2wucHJvdG90eXBlW0BAdG9TdHJpbmdUYWddCnNldFRvU3RyaW5nVGFnKCRTeW1ib2wsICdTeW1ib2wnKTsKLy8gMjAuMi4xLjkgTWF0aFtAQHRvU3RyaW5nVGFnXQpzZXRUb1N0cmluZ1RhZyhNYXRoLCAnTWF0aCcsIHRydWUpOwovLyAyNC4zLjMgSlNPTltAQHRvU3RyaW5nVGFnXQpzZXRUb1N0cmluZ1RhZyhnbG9iYWwuSlNPTiwgJ0pTT04nLCB0cnVlKTsKCi8qKiovIH0pLAovKiAxMDYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkoJ2FzeW5jSXRlcmF0b3InKTsKCi8qKiovIH0pLAovKiAxMDcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKX193ZWJwYWNrX3JlcXVpcmVfXyg0OCkoJ29ic2VydmFibGUnKTsKCi8qKiovIH0pLAovKiAxMDggKi8sCi8qIDEwOSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9zdHJpbmdpZnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTsKCnZhciBfc3RyaW5naWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0cmluZ2lmeSk7Cgp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCmV4cG9ydHMuZGl2aWRlVVJMID0gZGl2aWRlVVJMOwpleHBvcnRzLmRpdmlkZUVtYWlsID0gZGl2aWRlRW1haWw7CmV4cG9ydHMuZW1wdHlPYmplY3QgPSBlbXB0eU9iamVjdDsKZXhwb3J0cy5kZWVwQ2xvbmUgPSBkZWVwQ2xvbmU7CmV4cG9ydHMuZ2V0VXNlclVSTEZyb21FbWFpbCA9IGdldFVzZXJVUkxGcm9tRW1haWw7CmV4cG9ydHMuZ2V0VXNlckVtYWlsRnJvbVVSTCA9IGdldFVzZXJFbWFpbEZyb21VUkw7CmV4cG9ydHMuY29udmVydFRvVXNlclVSTCA9IGNvbnZlcnRUb1VzZXJVUkw7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCi8qKgogKiBTdXBwb3J0IG1vZHVsZSB3aXRoIHNvbWUgZnVuY3Rpb25zIHdpbGwgYmUgdXNlZnVsCiAqIEBtb2R1bGUgdXRpbHMKICovCgovKioKICogQHR5cGVkZWYgZGl2aWRlVVJMCiAqIEB0eXBlIE9iamVjdAogKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBVUkwKICogQHByb3BlcnR5IHtzdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG9mIFVSTAogKiBAcHJvcGVydHkge3N0cmluZ30gaWRlbnRpdHkgVGhlIGlkZW50aXR5IG9mIFVSTAogKi8KCi8qKgogKiBEaXZpZGUgYW4gdXJsIGluIHR5cGUsIGRvbWFpbiBhbmQgaWRlbnRpdHkKICogQHBhcmFtICB7VVJMLlVSTH0gdXJsIC0gdXJsIGFkZHJlc3MKICogQHJldHVybiB7ZGl2aWRlVVJMfSB0aGUgcmVzdWx0IG9mIGRpdmlkZVVSTAogKi8KZnVuY3Rpb24gZGl2aWRlVVJMKHVybCkgewoKICBpZiAoIXVybCkgdGhyb3cgRXJyb3IoJ1VSTCBpcyBuZWVkZWQgdG8gc3BsaXQnKTsKCiAgZnVuY3Rpb24gcmVjdXJzZSh2YWx1ZSkgewogICAgdmFyIHJlZ2V4ID0gLyhbYS16QS1aLV0qKSg6XC9cLyg/OlwuKT98OikoWy1hLXpBLVowLTlAOiUuX1wrfiM9XXsyLDI1Nn0pKFstYS16QS1aMC05QDolLl9cK34jPVwvXSopL2dpOwogICAgdmFyIHN1YnN0ID0gJyQxLCQzLCQ0JzsKICAgIHZhciBwYXJ0cyA9IHZhbHVlLnJlcGxhY2UocmVnZXgsIHN1YnN0KS5zcGxpdCgnLCcpOwogICAgcmV0dXJuIHBhcnRzOwogIH0KCiAgdmFyIHBhcnRzID0gcmVjdXJzZSh1cmwpOwoKICAvLyBJZiB0aGUgdXJsIGhhcyBubyBzY2hlbWUKICBpZiAocGFydHNbMF0gPT09IHVybCAmJiAhcGFydHNbMF0uaW5jbHVkZXMoJ0AnKSkgewoKICAgIHZhciBfcmVzdWx0ID0gewogICAgICB0eXBlOiAiIiwKICAgICAgZG9tYWluOiB1cmwsCiAgICAgIGlkZW50aXR5OiAiIgogICAgfTsKCiAgICBjb25zb2xlLmVycm9yKCdbRGl2aWRlVVJMXSBEaXZpZGVVUkwgZG9uXCd0IHN1cHBvcnQgdXJsIHdpdGhvdXQgc2NoZW1lLiBQbGVhc2UgcmV2aWV3IHlvdXIgdXJsIGFkZHJlc3MnLCB1cmwpOwoKICAgIHJldHVybiBfcmVzdWx0OwogIH0KCiAgLy8gY2hlY2sgaWYgdGhlIHVybCBoYXMgdGhlIHNjaGVtZSBhbmQgaW5jbHVkZXMgYW4gQAogIGlmIChwYXJ0c1swXSA9PT0gdXJsICYmIHBhcnRzWzBdLmluY2x1ZGVzKCdAJykpIHsKICAgIHZhciBzY2hlbWUgPSBwYXJ0c1swXSA9PT0gdXJsID8gJ3NtdHAnIDogcGFydHNbMF07CiAgICBwYXJ0cyA9IHJlY3Vyc2Uoc2NoZW1lICsgJzovLycgKyBwYXJ0c1swXSk7CiAgfQoKICAvLyBpZiB0aGUgZG9tYWluIGluY2x1ZGVzIGFuIEAsIGRpdmlkZSBpdCB0byBkb21haW4gYW5kIGlkZW50aXR5IHJlc3BlY3RpdmVseQogIGlmIChwYXJ0c1sxXS5pbmNsdWRlcygnQCcpKSB7CiAgICBwYXJ0c1syXSA9IHBhcnRzWzBdICsgJzovLycgKyBwYXJ0c1sxXTsKICAgIHBhcnRzWzFdID0gcGFydHNbMV0uc3Vic3RyKHBhcnRzWzFdLmluZGV4T2YoJ0AnKSArIDEpOwogIH0gLyplbHNlIGlmIChwYXJ0c1syXS5pbmNsdWRlcygnLycpKSB7CiAgICBwYXJ0c1syXSA9IHBhcnRzWzJdLnN1YnN0cihwYXJ0c1syXS5sYXN0SW5kZXhPZignLycpKzEpOwogICAgfSovCgogIHZhciByZXN1bHQgPSB7CiAgICB0eXBlOiBwYXJ0c1swXSwKICAgIGRvbWFpbjogcGFydHNbMV0sCiAgICBpZGVudGl0eTogcGFydHNbMl0KICB9OwoKICByZXR1cm4gcmVzdWx0Owp9CgpmdW5jdGlvbiBkaXZpZGVFbWFpbChlbWFpbCkgewogIHZhciBpbmRleE9mQXQgPSBlbWFpbC5pbmRleE9mKCdAJyk7CgogIHZhciByZXN1bHQgPSB7CiAgICB1c2VybmFtZTogZW1haWwuc3Vic3RyaW5nKDAsIGluZGV4T2ZBdCksCiAgICBkb21haW46IGVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCBlbWFpbC5sZW5ndGgpCiAgfTsKCiAgcmV0dXJuIHJlc3VsdDsKfQoKLyoqCiAqIENoZWNrIGlmIGFuIE9iamVjdCBpcyBlbXB0eQogKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdCBPYmplY3QgdG8gYmUgY2hlY2tlZAogKiBAcmV0dXJuIHtCb29sZWFufSAgICAgICBzdGF0dXMgb2YgT2JqZWN0LCBlbXB0eSBvciBub3QgKHRydWV8ZmFsc2UpOwogKi8KZnVuY3Rpb24gZW1wdHlPYmplY3Qob2JqZWN0KSB7CiAgcmV0dXJuICgwLCBfa2V5czIuZGVmYXVsdCkob2JqZWN0KS5sZW5ndGggPiAwID8gZmFsc2UgOiB0cnVlOwp9CgovKioKICogTWFrZSBhIENPUFkgb2YgdGhlIG9yaWdpbmFsIGRhdGEKICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIC0gb2JqZWN0IHRvIGJlIGNsb25lZAogKiBAcmV0dXJuIHtPYmplY3R9CiAqLwpmdW5jdGlvbiBkZWVwQ2xvbmUob2JqKSB7CiAgLy9UT0RPOiBzaW1wbGUgYnV0IGluZWZmaWNpZW50IEpTT04gZGVlcCBjbG9uZS4uLgogIGlmIChvYmopIHJldHVybiBKU09OLnBhcnNlKCgwLCBfc3RyaW5naWZ5Mi5kZWZhdWx0KShvYmopKTsKfQoKLyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgVVJMIHRoYXQgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBlbWFpbAogKiBAcGFyYW0gIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKiBAcmV0dXJuIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKi8KZnVuY3Rpb24gZ2V0VXNlclVSTEZyb21FbWFpbCh1c2VyRW1haWwpIHsKICB2YXIgaW5kZXhPZkF0ID0gdXNlckVtYWlsLmluZGV4T2YoJ0AnKTsKICByZXR1cm4gJ3VzZXI6Ly8nICsgdXNlckVtYWlsLnN1YnN0cmluZyhpbmRleE9mQXQgKyAxLCB1c2VyRW1haWwubGVuZ3RoKSArICcvJyArIHVzZXJFbWFpbC5zdWJzdHJpbmcoMCwgaW5kZXhPZkF0KTsKfQoKLyoqCiAqIE9idGFpbnMgdGhlIHVzZXIgZW1haWwgdGhhdCBjb3JyZXNwb25kcyB0byBhIGdpdmVuIFVSTAogKiBAcGFyYW0gIHtVUkwuVVJMfSB1c2VyVVJMIFRoZSB1c2VyIFVSTAogKiBAcmV0dXJuIHtzdHJpbmd9IHVzZXJFbWFpbCBUaGUgdXNlciBlbWFpbAogKi8KZnVuY3Rpb24gZ2V0VXNlckVtYWlsRnJvbVVSTCh1c2VyVVJMKSB7CiAgdmFyIHVybCA9IGRpdmlkZVVSTCh1c2VyVVJMKTsKICByZXR1cm4gdXJsLmlkZW50aXR5LnJlcGxhY2UoJy8nLCAnJykgKyAnQCcgKyB1cmwuZG9tYWluOyAvLyBpZGVudGl0eSBmaWVsZCBoYXMgJy9leGFtcGxlSUQnIGluc3RlYWQgb2YgJ2V4YW1wbGVJRCcKfQoKLyoqCiAqIENoZWNrIGlmIHRoZSB1c2VyIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbiB0aGUgVVJMIGZvcm1hdCwgaWYgbm90LCBjb252ZXJ0IHRvIFVSTCBmb3JtYXQKICogQHBhcmFtICB7c3RyaW5nfSAgIGlkZW50aWZpZXIgIHVzZXIgaWRlbnRpZmllcgogKiBAcmV0dXJuIHtzdHJpbmd9ICAgdXNlclVSTCAgICB0aGUgdXNlciBVUkwKICovCmZ1bmN0aW9uIGNvbnZlcnRUb1VzZXJVUkwoaWRlbnRpZmllcikgewoKICAvLyBjaGVjayBpZiB0aGUgaWRlbnRpZmllciBpcyBhbHJlYWR5IGluIHRoZSB1cmwgZm9ybWF0CiAgaWYgKGlkZW50aWZpZXIuc3Vic3RyaW5nKDAsIDcpID09PSAndXNlcjovLycpIHsKICAgIHZhciBkaXZpZGVkVVJMID0gZGl2aWRlVVJMKGlkZW50aWZpZXIpOwoKICAgIC8vY2hlY2sgaWYgdGhlIHVybCBpcyB3ZWxsIGZvcm1hdGVkCiAgICBpZiAoZGl2aWRlZFVSTC5kb21haW4gJiYgZGl2aWRlZFVSTC5pZGVudGl0eSkgewogICAgICByZXR1cm4gaWRlbnRpZmllcjsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93ICd1c2VyVVJMIHdpdGggd3JvbmcgZm9ybWF0JzsKICAgIH0KCiAgICAvL2lmIG5vdCwgY29udmVydCB0aGUgdXNlciBlbWFpbCB0byBVUkwgZm9ybWF0CiAgfSBlbHNlIHsKICAgIHJldHVybiBnZXRVc2VyVVJMRnJvbUVtYWlsKGlkZW50aWZpZXIpOwogIH0KfQoKLyoqKi8gfSksCi8qIDExMCAqLywKLyogMTExICovLAovKiAxMTIgKi8sCi8qIDExMyAqLywKLyogMTE0ICovLAovKiAxMTUgKi8sCi8qIDExNiAqLywKLyogMTE3ICovLAovKiAxMTggKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewoKLy8gICAgIHByb3h5LW9ic2VydmUgdjAuMC4xOA0KLy8gICAgIENvcHlyaWdodCAoYykgMjAxNSwgMjAxNiBTaW1vbiBZLiBCbGFja3dlbGwsIEFueVdoaWNoV2F5DQovLyAgICAgTUlUIExpY2Vuc2UgLSBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwDQooZnVuY3Rpb24oKSB7DQoJInVzZSBzdHJpY3QiOw0KCS8vIENyZWF0ZXMgYW5kIHJldHVybnMgYSBQcm94eSB3cmFwcGluZyBhIHRhcmdldCBzbyB0aGF0IGFsbCBjaGFuZ2VzIGNhbiBiZSB0cmFwcGVkIGFuZCBmb3J3YXJkZWQgdG8NCgkvLyBhIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgdGFrZXMgYW4gYXJyYXkgb2YgY2hhbmdlcyBqdXN0IGxpa2UgdGhlIHRyYWRpdGlvbmFsIG9yaWdpbmFsIENocm9tZSBPYmplY3Qub2JzZXJ2ZQ0KCS8vIHtvYmplY3Q6PG9iamVjdCBjaGFuZ2VkPixuYW1lOjxmaWVsZCBjaGFuZ2VkPix0eXBlOmFkZHx1cGRhdGV8ZGVsZXRlfHJlY29uZmlndXJlfHByZXZlbnRFeHRlbnNpb25zfHNldFByb3RvdHlwZSxvbGRWYWx1ZTo8b2xkIHZhbHVlIGlmIHVwZGF0ZSB8IGRlbGV0ZT59DQoJLy8gVGhlIGFjY2VwdGxpc3QgY2FuIGJlIGFkZHx1cGRhdGV8ZGVsZXRlfHJlY29uZmlndXJlfHByZXZlbnRFeHRlbnNpb25zfHNldFByb3RvdHlwZS4NCgkvLyB2IDAuMC4xMCB0byBzdXBwb3J0IHBhdXNpbmcgYW5kIHJlc3RhcnRpbmcgb2JzZXJ2YXRpb24gdHdvIGFkZGl0aW9uYWwgY29uc3RydWN0b3IgYXJndW1lbnRzIGFyZSBhdmFpbGFibGUgdG8gT2JqZWN0Lm9ic2VydmU6DQoJLy8gcGF1c2FibGUgLSBjcmVhdGUgdGhlIE9ic2VydmVyIHNvIGl0IGNhbiBiZSBwYXVzZWQNCgkvLyBwYXVzZSAtIGNyZWF0ZSBvYnNlcnZlciBpbiBwYXVzZWQgc3RhdGUNCgkvLyBpZiBwYXVzYWJsZSBpcyB0cnVlIHRoZW4gYW4gYWRkaXRpb25hbCBtZXRob2QgZGVsaXZlcihpZ25vcmVQcmV2aW91cykgaXMgYXZhaWxhYmxlIHRvIHN0YXJ0IGRlbGl2ZXJ5DQoJLy8gdG8gcGF1c2UgZGVsaXZlcnkgc2V0IGEgcHJvcGVydHkgY2FsbGVkIHBhdXNlIG9uIHRoZSBmdW5jdGlvbiBkZWxpdmVyIHRvIHRydWUNCgkvLyBwYXVzYWJsZSBpcyBvcHRpb25hbCB0byByZWR1Y2UgdGhlIGNoYW5jZSBvZiBzaGFkb3dpbmcgYSBwcm9wZXJ0eSBvciBtZXRob2Qgb24gYW55IGV4aXN0aW5nIGNvZGUgY2FsbGVkIGRlbGl2ZXINCglpZighT2JqZWN0Lm9ic2VydmUgJiYgdHlwZW9mKFByb3h5KT09PSJmdW5jdGlvbiIpIHsNCgkJZnVuY3Rpb24gT2JzZXJ2ZXIodGFyZ2V0LGNhbGxiYWNrLGFjY2VwdGxpc3QscGF1c2FibGUscGF1c2UsZGVsYXkpIHsNCgkgICAgCXZhciBtZSA9IHRoaXMsIHByb3h5Ow0KCSAgICAJZnVuY3Rpb24gZGVsaXZlcihpZ25vcmVQcmV2aW91cyxkZWxheSkgew0KCSAgICAJCWRlbGl2ZXIuZGVsYXkgPSBkZWxheTsNCgkgICAgCQlpZighZGVsaXZlci5wYXVzZSkgew0KCSAgICAgICAgCQlpZihtZS5jaGFuZ2VzZXQubGVuZ3RoPjApIHsNCgkgICAgICAgIAkJCWlmKCFpZ25vcmVQcmV2aW91cykgew0KCQkgICAgCSAgICAJCXZhciBjaGFuZ2VzID0gbWUuY2hhbmdlc2V0LmZpbHRlcihmdW5jdGlvbihjaGFuZ2UpIHsgcmV0dXJuICFhY2NlcHRsaXN0IHx8IGFjY2VwdGxpc3QuaW5kZXhPZihjaGFuZ2UudHlwZSk+PTA7IH0pOw0KCQkgICAgICAgIAkJCWlmKGNoYW5nZXMubGVuZ3RoPjApIHsNCgkJICAgICAgICAJCQkJY2FsbGJhY2soY2hhbmdlcyk7DQoJCSAgICAgICAgCQkJfQ0KCSAgICAgICAgCQkJfQ0KCSAgICAgICAgCQkJbWUuY2hhbmdlc2V0ID0gW107DQoJICAgICAgICAJCX0NCgkgICAgCQl9DQoJICAgIAl9DQoJICAgIAlkZWxpdmVyLnBhdXNlID0gcGF1c2U7DQoJICAgIAlkZWxpdmVyLmRlbGF5ID0gZGVsYXk7DQoJCSAgICBtZS5nZXQgPSBmdW5jdGlvbih0YXJnZXQsIHByb3BlcnR5KSB7DQoJCSAgICAJaWYocHJvcGVydHk9PT0iX19vYnNlcnZlcl9fIikgew0KCQkgICAgCQlyZXR1cm4gbWU7DQoJCSAgICAJfQ0KCQkgICAgCWlmKHByb3BlcnR5PT09InVub2JzZXJ2ZSIpIHsNCgkJICAgIAkJcmV0dXJuIGZ1bmN0aW9uKCkgew0KCQkgICAgCQkJT2JqZWN0LnVub2JzZXJ2ZSh0YXJnZXQpOw0KCQkgICAgCQkJcmV0dXJuIHRhcmdldDsNCgkJICAgIAkJfTsNCgkJICAgIAl9DQoJCSAgICAJaWYocHJvcGVydHk9PT0iZGVsaXZlciIpIHsNCgkJICAgIAkJcmV0dXJuIGRlbGl2ZXI7DQoJCSAgICAJfQ0KCQkgICAgCXJldHVybiB0YXJnZXRbcHJvcGVydHldOw0KCQkgICAgfQ0KCSAgICAJbWUudGFyZ2V0ID0gdGFyZ2V0Ow0KCSAgICAJbWUuY2hhbmdlc2V0ID0gW107DQoJICAgIAlpZighbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXykgew0KCSAgICAJCS8vIF9fb2JzZXJ2ZXJDYWxsYmFja3NfXyBpcyB1c2VkIGFzIGFuIGluZGV4IHRvIGdldCBhdCB0aGUgcHJveHkgd2hpY2ggaXMgdGhlIG9ic2VydmVyLCBzbyB3ZSBjYW4gdW5vYnNlcnZlDQoJICAgIAkJT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwiX19vYnNlcnZlckNhbGxiYWNrc19fIix7ZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTpmYWxzZSx2YWx1ZTpbXX0pOw0KCSAgICAJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIl9fb2JzZXJ2ZXJzX18iLHtlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOmZhbHNlLHZhbHVlOltdfSk7DQoJICAgIAl9DQoJICAgIAltZS50YXJnZXQuX19vYnNlcnZlckNhbGxiYWNrc19fLnB1c2goY2FsbGJhY2spOw0KCSAgICAJbWUudGFyZ2V0Ll9fb2JzZXJ2ZXJzX18ucHVzaCh0aGlzKTsNCgkgICAgCXByb3h5ID0gbmV3IFByb3h5KHRhcmdldCxtZSk7DQoJICAgIAlkZWxpdmVyKGZhbHNlLGRlbGF5KTsNCgkgICAgCXJldHVybiBwcm94eTsNCgkgICAgfQ0KCQlPYnNlcnZlci5wcm90b3R5cGUuZGVsaXZlciA9IGZ1bmN0aW9uKCkgew0KCQkJcmV0dXJuIHRoaXMuZ2V0KG51bGwsImRlbGl2ZXIiKTsNCgkJfQ0KCSAgICBPYnNlcnZlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUpIHsgLy8gLCByZWNlaXZlcg0KCSAgICAJdmFyIG9sZHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTsNCgkgICAgCXZhciB0eXBlID0gKG9sZHZhbHVlPT09dW5kZWZpbmVkID8gImFkZCIgOiAidXBkYXRlIik7DQoJICAgIAl0YXJnZXRbcHJvcGVydHldID0gdmFsdWU7DQoJICAgIAlpZih0YXJnZXQuX19vYnNlcnZlcnNfXy5pbmRleE9mKHRoaXMpPj0wICYmICghdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKHR5cGUpPj0wKSkgew0KCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCxuYW1lOnByb3BlcnR5LHR5cGU6dHlwZX0sDQoJICAgICAgICAJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KCSAgICAgICAgCQlkZWxpdmVyID0gdGhpcy5kZWxpdmVyKCk7DQoJICAgICAgICAJaWYodHlwZT09PSJ1cGRhdGUiKSB7DQoJICAgICAgICAJCWNoYW5nZS5vbGRWYWx1ZSA9IG9sZHZhbHVlOw0KCSAgICAgICAgCX0NCgkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7DQoJICAgICAgICAJaWYoc3RhcnQpIHsNCgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkgICAgICAgIAl9DQoJICAgIAl9DQoJICAgIAlyZXR1cm4gdHJ1ZTsNCgkgICAgfTsNCgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLmRlbGV0ZVByb3BlcnR5ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eSkgew0KCSAgICAJdmFyIG9sZHZhbHVlID0gdGFyZ2V0W3Byb3BlcnR5XTsNCgkgICAgCS8vaWYodHlwZW9mKG9sZHZhbHVlKSE9PSJ1bmRlZmluZWQiKSB7DQoJCSAgICAJZGVsZXRlIHRhcmdldFtwcm9wZXJ0eV07DQoJCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJkZWxldGUiKT49MCkgew0KCQkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZTpwcm9wZXJ0eSx0eXBlOiJkZWxldGUiLG9sZFZhbHVlOm9sZHZhbHVlfSwNCgkJICAgICAgICAJCXN0YXJ0ID0gdGhpcy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KCQkgICAgICAgIAkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCQkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7DQoJCSAgICAgICAgCWlmKHN0YXJ0KSB7DQoJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCQkgICAgICAgIAl9DQoJCSAgICAJfQ0KCSAgICAJLy99DQoJICAgIAlyZXR1cm4gdHJ1ZTsNCgkgICAgfTsNCgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLmRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikgew0KCSAgICAJT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpOw0KCSAgICAJaWYodGFyZ2V0Ll9fb2JzZXJ2ZXJzX18uaW5kZXhPZih0aGlzKT49MCAmJiAhdGhpcy5hY2NlcHRsaXN0IHx8IHRoaXMuYWNjZXB0bGlzdC5pbmRleE9mKCJyZWNvbmZpZ3VyZSIpPj0wKSB7DQoJICAgICAgICAJdmFyIGNoYW5nZSA9IHtvYmplY3Q6dGFyZ2V0LG5hbWU6cHJvcGVydHksdHlwZToicmVjb25maWd1cmUifSwNCiAgICAgICAgCQkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQogICAgICAgIAkJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7DQoJICAgICAgICAJaWYoc3RhcnQpIHsNCgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkgICAgICAgIAl9DQoJICAgIAl9DQoJICAgIAlyZXR1cm4gdHJ1ZTsNCgkgICAgfTsNCgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnNldFByb3RvdHlwZU9mID0gZnVuY3Rpb24odGFyZ2V0LCBwcm90b3R5cGUpIHsNCgkgICAgCXZhciBvbGR2YWx1ZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0YXJnZXQpOw0KCSAgICAJT2JqZWN0LnNldFByb3RvdHlwZU9mKHRhcmdldCwgcHJvdG90eXBlKTsNCgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigic2V0UHJvdG90eXBlIik+PTApIHsNCgkgICAgICAgIAl2YXIgY2hhbmdlID0ge29iamVjdDp0YXJnZXQsbmFtZToiX19wcm90b19fIix0eXBlOiJzZXRQcm90b3R5cGUiLG9sZFZhbHVlOm9sZHZhbHVlfSwNCiAgICAJCQkJc3RhcnQgPSB0aGlzLmNoYW5nZXNldC5sZW5ndGggPT09IDAsDQogICAgCQkJCWRlbGl2ZXIgPSB0aGlzLmRlbGl2ZXIoKTsNCgkgICAgICAgIAl0aGlzLmNoYW5nZXNldC5wdXNoKGNoYW5nZSk7DQoJICAgICAgICAJaWYoc3RhcnQpIHsNCgkgICAgICAgIAkJZGVsaXZlcihmYWxzZSwodHlwZW9mKGRlbGl2ZXIuZGVsYXkpPT09Im51bWJlciIgPyBkZWxpdmVyLmRlbGF5IDogMTApKTsNCgkgICAgICAgIAl9DQoJICAgIAl9DQoJICAgIAlyZXR1cm4gdHJ1ZTsNCgkgICAgfTsNCgkgICAgT2JzZXJ2ZXIucHJvdG90eXBlLnByZXZlbnRFeHRlbnNpb25zID0gZnVuY3Rpb24odGFyZ2V0KSB7DQoJICAgICAgICBPYmplY3QucHJldmVudEV4dGVuc2lvbnModGFyZ2V0KTsNCgkgICAgCWlmKHRhcmdldC5fX29ic2VydmVyc19fLmluZGV4T2YodGhpcyk+PTAgJiYgIXRoaXMuYWNjZXB0bGlzdCB8fCB0aGlzLmFjY2VwdGxpc3QuaW5kZXhPZigicHJldmVudEV4dGVuc2lvbnMiKT49MCkgew0KCSAgICAgICAgCXZhciBjaGFuZ2UgPSB7b2JqZWN0OnRhcmdldCx0eXBlOiJwcmV2ZW50RXh0ZW5zaW9ucyJ9LA0KCQkJCQlzdGFydCA9IHRoaXMuY2hhbmdlc2V0Lmxlbmd0aCA9PT0gMCwNCgkJCQkJZGVsaXZlciA9IHRoaXMuZGVsaXZlcigpOw0KCSAgICAgICAgCXRoaXMuY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgICAgIAlpZihzdGFydCkgew0KCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAgICAgCX0NCgkgICAgCX0NCgkgICAgCXJldHVybiB0cnVlOw0KCSAgICB9Ow0KCSAgICBPYmplY3Qub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KSB7DQoJICAgIAlyZXR1cm4gbmV3IE9ic2VydmVyKG9iamVjdCxjYWxsYmFjayxhY2NlcHRsaXN0LHBhdXNhYmxlLHBhdXNlLGRlbGF5KTsNCgkgICAgfTsNCgkgICAgT2JqZWN0LnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjaykgew0KCSAgICAJaWYob2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXykgew0KCSAgICAJCWlmKCFjYWxsYmFjaykgew0KCSAgICAJCQlvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLnNwbGljZSgwLG9iamVjdC5fX29ic2VydmVyQ2FsbGJhY2tzX18ubGVuZ3RoKTsNCgkgICAgCQkJb2JqZWN0Ll9fb2JzZXJ2ZXJzX18uc3BsaWNlKDAsb2JqZWN0Ll9fb2JzZXJ2ZXJzX18ubGVuZ3RoKTsNCgkgICAgCQkJcmV0dXJuOw0KCSAgICAJCX0NCgkgICAgCQlvYmplY3QuX19vYnNlcnZlckNhbGxiYWNrc19fLmZvckVhY2goZnVuY3Rpb24ob2JzZXJ2ZXJjYWxsYmFjayxpKSB7DQoJICAgIAkJCWlmKGNhbGxiYWNrPT09b2JzZXJ2ZXJjYWxsYmFjaykgew0KCSAgICAJCQkJb2JqZWN0Ll9fb2JzZXJ2ZXJDYWxsYmFja3NfXy5zcGxpY2UoaSwxKTsNCgkgICAgCQkJCWRlbGV0ZSBvYmplY3QuX19vYnNlcnZlcnNfX1tpXS5jYWxsYmFjazsNCgkgICAgCQkJCW9iamVjdC5fX29ic2VydmVyc19fLnNwbGljZShpLDEpOw0KCSAgICAJCQl9DQoJICAgIAkJfSk7DQoJICAgIAl9DQoJICAgIH07DQoJICAgIEFycmF5Lm9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2ssYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSkgew0KCSAgICAJaWYoIShvYmplY3QgaW5zdGFuY2VvZiBBcnJheSkgJiYgIUFycmF5LmlzQXJyYXkob2JqZWN0KSkgew0KCSAgICAJCXRocm93IG5ldyBUeXBlRXJyb3IoIkZpcnN0IGFyZ3VtZW50IHRvIEFycmF5Lm9ic2VydmVyIGlzIG5vdCBhbiBBcnJheSIpOw0KCSAgICAJfQ0KICAgICAgICAgICAgCWFjY2VwdGxpc3QgPSBhY2NlcHRsaXN0IHx8IFsiYWRkIiwgInVwZGF0ZSIsICJkZWxldGUiLCAic3BsaWNlIl07DQoJICAgIAl2YXIgYXJyYXlwcm94eSA9IG5ldyBQcm94eShvYmplY3Qse2dldDogZnVuY3Rpb24odGFyZ2V0LHByb3BlcnR5KSB7DQoJICAgIAkJaWYocHJvcGVydHk9PT0idW5vYnNlcnZlIikgew0KCQkgICAgCQlyZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHsNCgkJICAgIAkJCWlmKGNhbGxiYWNrKSB7DQoJCSAgICAJCQkJcmV0dXJuIE9iamVjdC51bm9ic2VydmUodGFyZ2V0LGNhbGxiYWNrKTsNCgkJICAgIAkJCX0NCgkJICAgIAkJCXJldHVybiB0YXJnZXQudW5vYnNlcnZlKCk7DQoJCSAgICAJCX07DQoJCSAgICAJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InNwbGljZSIpIHsNCgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LGVuZCkgew0KCSAgICAJCQkJaWYodHlwZW9mKHN0YXJ0KSE9PSJudW1iZXIiIHx8IHR5cGVvZihlbmQpIT09Im51bWJlciIpIHsNCgkgICAgCQkJCQl0aHJvdyBuZXcgVHlwZUVycm9yKCJGaXJzdCB0d28gYXJndW1lbnRzIHRvIEFycmF5IHNwbGljZSBhcmUgbm90IG51bWJlciwgbnVtYmVyIik7DQoJICAgIAkJCQl9DQoJICAgIAkgICAgCQl2YXIgcmVtb3ZlZCA9IHRoaXMuc2xpY2Uoc3RhcnQsc3RhcnQrZW5kKSwNCgkgICAgCSAgICAJCQlhZGRlZENvdW50ID0gKGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzLmxlbmd0aC0yIDogMCksDQoJICAgIAkgICAgCQkJY2hhbmdlID0gIHtvYmplY3Q6b2JqZWN0LHR5cGU6InNwbGljZSIsaW5kZXg6c3RhcnQscmVtb3ZlZDpyZW1vdmVkLGFkZGVkQ291bnQ6YWRkZWRDb3VudH07DQoJICAgIAkgICAgCQl0YXJnZXQuc3BsaWNlLmFwcGx5KHRhcmdldCxhcmd1bWVudHMpOw0KCSAgICAJICAgIAkJaWYoYWNjZXB0bGlzdC5pbmRleE9mKCJzcGxpY2UiKT49MCkgew0KCSAgICAJICAgIAkJCXZhciBzdGFydCA9IHByb3h5Ll9fb2JzZXJ2ZXJfXy5jaGFuZ2VzZXQubGVuZ3RoID09PSAwLA0KCSAgICAJICAgICAgICAJCQlkZWxpdmVyID0gcHJveHkuX19vYnNlcnZlcl9fLmRlbGl2ZXIoKTsNCgkgICAgCSAgICAJCQlwcm94eS5fX29ic2VydmVyX18uY2hhbmdlc2V0LnB1c2goY2hhbmdlKTsNCgkgICAgCSAgICAJCQlpZihzdGFydCkgew0KCSAgICAJCSAgICAgICAgCQlkZWxpdmVyKGZhbHNlLCh0eXBlb2YoZGVsaXZlci5kZWxheSk9PT0ibnVtYmVyIiA/IGRlbGl2ZXIuZGVsYXkgOiAxMCkpOw0KCSAgICAJCSAgICAgICAgCX0NCgkgICAgCSAgICAJCX0NCgkgICAgCSAgICAJfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJwdXNoIikgew0KCSAgICAJCQkgcmV0dXJuIGZ1bmN0aW9uKGl0ZW0pIHsNCgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aCwwLGl0ZW0pOw0KCSAgICAJCSAgICB9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InBvcCIpIHsNCgkgICAgCQkJIHJldHVybiBmdW5jdGlvbigpIHsNCgkgICAgCQkgICAgCXJldHVybiB0aGlzLnNwbGljZSh0aGlzLmxlbmd0aC0xLDEpOw0KCSAgICAJCSAgICB9DQoJICAgIAkJfQ0KCSAgICAJCWlmKHByb3BlcnR5PT09InVuc2hpZnQiKSB7DQoJICAgIAkJCSByZXR1cm4gZnVuY3Rpb24oaXRlbSkgew0KICAgIAkJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMCxpdGVtKTsNCiAgICAJCSAgICAJfQ0KCSAgICAJCX0NCgkgICAgCQlpZihwcm9wZXJ0eT09PSJzaGlmdCIpIHsNCgkgICAgCQkJcmV0dXJuIGZ1bmN0aW9uKCkgew0KCSAgICAJICAgIAkJcmV0dXJuIHRoaXMuc3BsaWNlKDAsMSk7DQoJICAgIAkgICAgCX0NCgkgICAgCQl9DQoJICAgIAkJcmV0dXJuIHRhcmdldFtwcm9wZXJ0eV07DQoJICAgIAl9fSk7DQoJICAgIAl2YXIgcHJveHkgPSBPYmplY3Qub2JzZXJ2ZShhcnJheXByb3h5LGZ1bmN0aW9uKGNoYW5nZXNldCkgeyANCgkgICAgCQl2YXIgY2hhbmdlcyA9IGNoYW5nZXNldC5maWx0ZXIoZnVuY3Rpb24oY2hhbmdlKSB7IHJldHVybiBjaGFuZ2UubmFtZSE9PSJsZW5ndGgiICYmIGNoYW5nZS5uYW1lIT09ImFkZCIgJiYgKCFhY2NlcHRsaXN0IHx8IGFjY2VwdGxpc3QuaW5kZXhPZihjaGFuZ2UudHlwZSk+PTApOyB9KTsNCgkgICAgCQlpZihjaGFuZ2VzLmxlbmd0aD4wKSB7DQoJICAgIAkJCWNhbGxiYWNrKGNoYW5nZXMpOw0KCSAgICAJCX0NCgkgICAgCX0sYWNjZXB0bGlzdCxwYXVzYWJsZSxwYXVzZSxkZWxheSk7DQoJICAgIAlyZXR1cm4gcHJveHk7DQoJICAgIH07DQoJICAgIEFycmF5LnVub2JzZXJ2ZSA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjaykgew0KCQkgIHJldHVybiBvYmplY3QudW5vYnNlcnZlKGNhbGxiYWNrKTsNCgkgICAgfQ0KCX0NCglPYmplY3QuZGVlcE9ic2VydmUgPSBmdW5jdGlvbihvYmplY3QsY2FsbGJhY2sscGFydHMpIHsNCg0KCQlwYXJ0cyA9IChwYXJ0cyA/IHBhcnRzIDogW10pOw0KDQoJCXZhciB0b1R5cGVOYW1lID0gZnVuY3Rpb24ob2JqKSB7DQoJCQlyZXR1cm4gKHt9KS50b1N0cmluZy5jYWxsKG9iaikubWF0Y2goL1xzKFthLXpBLVpdKykvKVsxXS50b0xvd2VyQ2FzZSgpDQoJCX0NCg0KCQlmdW5jdGlvbiByZW9ic2VydmUodmFsdWUsIHBhcnRzKSB7DQoJCQl2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTsNCgkJCWtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsNCgkJCQlpZigodG9UeXBlTmFtZSh2YWx1ZVtrZXldKSA9PT0gJ29iamVjdCcgfHwgdG9UeXBlTmFtZSh2YWx1ZVtrZXldKSA9PT0gJ2FycmF5JykgJiYgIXZhbHVlW2tleV0uaGFzT3duUHJvcGVydHkoJ19fb2JzZXJ2ZXJzX18nKSkgew0KCQkJCQl2YXIgbmV3cGFydHMgPSBwYXJ0cy5zbGljZSgwKTsNCgkJCQkJbmV3cGFydHMucHVzaChrZXkpOw0KCQkJCQl2YWx1ZVtrZXldID0gT2JqZWN0LmRlZXBPYnNlcnZlKHZhbHVlW2tleV0sY2FsbGJhY2ssbmV3cGFydHMpOw0KCQkJCX0NCgkJCX0pOw0KCQl9DQoNCgkJcmVvYnNlcnZlKG9iamVjdCwgcGFydHMpOw0KDQoJCXZhciBvYnNlcnZlZCA9IE9iamVjdC5vYnNlcnZlKG9iamVjdCxmdW5jdGlvbihjaGFuZ2VzZXQpIHsNCgkJCXZhciBjaGFuZ2VzID0gW107DQoJCQlmdW5jdGlvbiByZWN1cnNlKG5hbWUscm9vdE9iamVjdCxvbGRPYmplY3QsbmV3T2JqZWN0LHBhdGgpIHsNCgkJCQlpZihuZXdPYmplY3QgaW5zdGFuY2VvZiBPYmplY3QpIHsNCgkJCQkJdmFyIG5ld2tleXMgPSBPYmplY3Qua2V5cyhuZXdPYmplY3QpOw0KCQkJCQluZXdrZXlzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7DQoJCQkJCQlpZighb2xkT2JqZWN0IHx8IChvbGRPYmplY3Rba2V5XSE9PW5ld09iamVjdFtrZXldKSkgew0KCQkJCQkJCXZhciBvbGR2YWx1ZSA9IChvbGRPYmplY3QgJiYgb2xkT2JqZWN0W2tleV0hPT11bmRlZmluZWQgPyBvbGRPYmplY3Rba2V5XSA6IHVuZGVmaW5lZCksDQoJCQkJCQkJCWNoYW5nZSA9IChvbGR2YWx1ZT09PXVuZGVmaW5lZCA/ICJhZGQiIDogInVwZGF0ZSIpLA0KCQkJCQkJCQlrZXlwYXRoID0gcGF0aCArICIuIiArIGtleTsNCg0KCQkJCQkJCWNoYW5nZXMucHVzaCh7bmFtZTpuYW1lLG9iamVjdDpyb290T2JqZWN0LHR5cGU6Y2hhbmdlLG9sZFZhbHVlOm9sZHZhbHVlLG5ld1ZhbHVlOm5ld09iamVjdFtrZXldLGtleXBhdGg6a2V5cGF0aH0pOw0KCQkJCQkJCXJlY3Vyc2UobmFtZSxyb290T2JqZWN0LG9sZHZhbHVlLG5ld09iamVjdFtrZXldLGtleXBhdGgpOw0KCQkJCQkJfQ0KCQkJCQl9KTsNCgkJCQl9IGVsc2UgaWYob2xkT2JqZWN0IGluc3RhbmNlb2YgT2JqZWN0KSB7DQoJCQkJCXZhciBvbGRrZXlzID0gT2JqZWN0LmtleXMob2xkT2JqZWN0KTsNCgkJCQkJb2xka2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgew0KCQkJCQkJdmFyIGNoYW5nZSA9IChuZXdPYmplY3Q9PT1udWxsID8gInVwZGF0ZSIgOiAiZGVsZXRlIiksDQoJCQkJCQkJa2V5cGF0aCA9IHBhdGggKyAiLiIgKyBrZXk7DQoJCQkJCQkJDQoJCQkJCQljaGFuZ2VzLnB1c2goe25hbWU6bmFtZSxvYmplY3Q6cm9vdE9iamVjdCx0eXBlOmNoYW5nZSxvbGRWYWx1ZTpvbGRPYmplY3Rba2V5XSxuZXdWYWx1ZTpuZXdPYmplY3Qsa2V5cGF0aDprZXlwYXRofSk7DQoJCQkJCQlyZWN1cnNlKG5hbWUscm9vdE9iamVjdCxvbGRPYmplY3Rba2V5XSx1bmRlZmluZWQsa2V5cGF0aCk7DQoJCQkJCX0pOw0KCQkJCX0NCgkJCX0NCgkJCWNoYW5nZXNldC5mb3JFYWNoKGZ1bmN0aW9uKGNoYW5nZSkgew0KCQkJCXZhciBrZXlwYXRoID0gKHBhcnRzLmxlbmd0aD4wID8gcGFydHMuam9pbigiLiIpICsgIi4iIDogIiIpICsgY2hhbmdlLm5hbWU7DQoNCgkJCQlpZiAoY2hhbmdlLnR5cGUgPT09ICJ1cGRhdGUiIHx8IGNoYW5nZS50eXBlID09PSAiYWRkIikgeyANCgkJCQkJcmVvYnNlcnZlKGNoYW5nZS5vYmplY3QsIHBhcnRzKTsNCgkJCQl9DQoNCgkJCQljaGFuZ2VzLnB1c2goe25hbWU6Y2hhbmdlLm5hbWUsb2JqZWN0OmNoYW5nZS5vYmplY3QsdHlwZTpjaGFuZ2UudHlwZSxvbGRWYWx1ZTpjaGFuZ2Uub2xkVmFsdWUsbmV3VmFsdWU6Y2hhbmdlLm9iamVjdFtjaGFuZ2UubmFtZV0sa2V5cGF0aDprZXlwYXRofSk7DQoJCQkJcmVjdXJzZShjaGFuZ2UubmFtZSxjaGFuZ2Uub2JqZWN0LGNoYW5nZS5vbGRWYWx1ZSxjaGFuZ2Uub2JqZWN0W2NoYW5nZS5uYW1lXSxrZXlwYXRoKTsNCgkJCX0pOw0KCQkJY2FsbGJhY2soY2hhbmdlcyk7DQoJCX0pOw0KCQlyZXR1cm4gb2JzZXJ2ZWQ7DQoJfTsNCn0pKCk7DQoKCi8qKiovIH0pLAovKiAxMTkgKi8sCi8qIDEyMCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7Cgp2YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7Cgp2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7Cgp2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpOwoKdmFyIF9nZXQyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpOwoKdmFyIF9nZXQzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0Mik7Cgp2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpOwoKdmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpOwoKdmFyIF9EYXRhT2JqZWN0MiA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTsKCnZhciBfRGF0YU9iamVjdDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Mik7Cgp2YXIgX0RhdGFPYmplY3RDaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKTsKCnZhciBfRGF0YU9iamVjdENoaWxkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RDaGlsZCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgp2YXIgRmlsdGVyVHlwZSA9IHsgQU5ZOiAnYW55JywgU1RBUlQ6ICdzdGFydCcsIEVYQUNUOiAnZXhhY3QnIH07CgovKioKICogVGhlIGNsYXNzIHJldHVybmVkIGZyb20gdGhlIFN5bmNoZXIgc3Vic2NyaWJlIGNhbGwuCiAqIFRvIGJlIHVzZWQgYXMgYW4gb2JzZXJ2YXRpb24gcG9pbnQgZnJvbSBhIERhdGFPYmplY3RSZXBvcnRlciBjaGFuZ2UuCiAqLwoKdmFyIERhdGFPYmplY3RPYnNlcnZlciA9IGZ1bmN0aW9uIChfRGF0YU9iamVjdCkgewogICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlciwgX0RhdGFPYmplY3QpOwoKICAvKiBwcml2YXRlCiAgX2NoYW5nZUxpc3RlbmVyOiBNc2dMaXN0ZW5lcgogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tCiAgX2ZpbHRlcnM6IHs8ZmlsdGVyPjoge3R5cGU6IDxzdGFydCwgZXhhY3Q+LCBjYWxsYmFjazogPGZ1bmN0aW9uPn0gfQogICovCgogIC8qKgogICAqIEBpZ25vcmUKICAgKiBTaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkgYnkgSHlwZXJ0aWVzLiBJdCdzIGNhbGxlZCBieSB0aGUgU3luY2hlci5zdWJzY3JpYmUgbWV0aG9kCiAgICovCgogIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICBmdW5jdGlvbiBEYXRhT2JqZWN0T2JzZXJ2ZXIoc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMsIGluaXRpYWxWZXJzaW9uLCBtdXR1YWwpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RPYnNlcnZlcik7CgogICAgdmFyIF90aGlzMiA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKERhdGFPYmplY3RPYnNlcnZlci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyKSkuY2FsbCh0aGlzLCBzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEuZGF0YSwgY2hpbGRyZW5zLCBtdXR1YWwpKTsKCiAgICB2YXIgX3RoaXMgPSBfdGhpczI7CgogICAgX3RoaXMuX3ZlcnNpb24gPSBpbml0aWFsVmVyc2lvbjsKICAgIF90aGlzLl9maWx0ZXJzID0ge307CgogICAgX3RoaXMuX3N5bmNPYmoub2JzZXJ2ZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgX3RoaXMuX29uRmlsdGVyKGV2ZW50KTsKICAgIH0pOwoKICAgIC8vc2V0dXAgY2hpbGRyZW5zIGRhdGEgZnJvbSBzdWJzY3JpcHRpb24KICAgICgwLCBfa2V5czIuZGVmYXVsdCkoaW5pdGlhbERhdGEuY2hpbGRyZW5zKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZElkKSB7CiAgICAgIHZhciBjaGlsZERhdGEgPSBpbml0aWFsRGF0YS5jaGlsZHJlbnNbY2hpbGRJZF07CiAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbY2hpbGRJZF0gPSBuZXcgX0RhdGFPYmplY3RDaGlsZDIuZGVmYXVsdChfdGhpcywgY2hpbGRJZCwgY2hpbGREYXRhKTsKICAgIH0pOwoKICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwogICAgcmV0dXJuIF90aGlzMjsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKERhdGFPYmplY3RPYnNlcnZlciwgW3sKICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgewogICAgICAoMCwgX2dldDMuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZS5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdE9ic2VydmVyLnByb3RvdHlwZSksICdfYWxsb2NhdGVMaXN0ZW5lcnMnLCB0aGlzKS5jYWxsKHRoaXMpOwogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2NoYW5nZUxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihfdGhpcy5fdXJsICsgJy9jaGFuZ2VzJywgZnVuY3Rpb24gKG1zZykgewogICAgICAgIGlmIChtc2cudHlwZSA9PT0gJ3VwZGF0ZScpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0T2JzZXJ2ZXItJyArIF90aGlzLl91cmwgKyAnLVJDVjogJywgbXNnKTsKICAgICAgICAgIF90aGlzLl9jaGFuZ2VPYmplY3QoX3RoaXMuX3N5bmNPYmosIG1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0T2JzZXJ2ZXIucHJvdG90eXBlKSwgJ19yZWxlYXNlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jaGFuZ2VMaXN0ZW5lci5yZW1vdmUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJlbGVhc2UgYW5kIGRlbGV0ZSBvYmplY3QgZGF0YQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2RlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CiAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fb2JzZXJ2ZXJzW190aGlzLl91cmxdOwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAndW5zdWJzY3JpYmUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25Mb2NhbFVuU3Vic2NyaWJlCiAgICAgIHZhciB1blN1YnNjcmliZU1zZyA9IHsKICAgICAgICB0eXBlOiAndW5zdWJzY3JpYmUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLAogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQogICAgICB9OwoKICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh1blN1YnNjcmliZU1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RPYnNlcnZlci1VTlNVQlNDUklCRTogJywgcmVwbHkpOwogICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc3luY2hlci5fb2JzZXJ2ZXJzW190aGlzLl91cmxdOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWdpc3RlciB0aGUgY2hhbmdlIGxpc3RlbmVycyBzZW50IGJ5IHRoZSByZXBvcnRlcgogICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlciAtIEZpbHRlciB0aGF0IGlkZW50aWZpZXMgdGhlIGZpZWxkIChzZXBhcmF0ZWQgZG90IHBhdGgpLiBBY2NlcHRzICogYXQgdGhlIGVuZCBmb3IgYSBtb3JlIHVucmVzdHJpY3RlZCBmaWx0ZXJpbmcuCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25DaGFuZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKGZpbHRlciwgY2FsbGJhY2spIHsKICAgICAgdmFyIGtleSA9IGZpbHRlcjsKICAgICAgdmFyIGZpbHRlck9iaiA9IHsKICAgICAgICB0eXBlOiBGaWx0ZXJUeXBlLkVYQUNULAogICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjawogICAgICB9OwoKICAgICAgdmFyIGlkeCA9IGZpbHRlci5pbmRleE9mKCcqJyk7CiAgICAgIGlmIChpZHggPT09IGZpbHRlci5sZW5ndGggLSAxKSB7CiAgICAgICAgaWYgKGlkeCA9PT0gMCkgewogICAgICAgICAgZmlsdGVyT2JqLnR5cGUgPSBGaWx0ZXJUeXBlLkFOWTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmlsdGVyT2JqLnR5cGUgPSBGaWx0ZXJUeXBlLlNUQVJUOwogICAgICAgICAga2V5ID0gZmlsdGVyLnN1YnN0cigwLCBmaWx0ZXIubGVuZ3RoIC0gMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLl9maWx0ZXJzW2tleV0gPSBmaWx0ZXJPYmo7CiAgICB9CiAgfSwgewogICAga2V5OiAnX29uRmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25GaWx0ZXIoZXZlbnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoX3RoaXMuX2ZpbHRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIHZhciBmaWx0ZXIgPSBfdGhpcy5fZmlsdGVyc1trZXldOwogICAgICAgIGlmIChmaWx0ZXIudHlwZSA9PT0gRmlsdGVyVHlwZS5BTlkpIHsKICAgICAgICAgIC8vbWF0Y2ggYW55dGhpbmcKICAgICAgICAgIGZpbHRlci5jYWxsYmFjayhldmVudCk7CiAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXIudHlwZSA9PT0gRmlsdGVyVHlwZS5TVEFSVCkgewogICAgICAgICAgLy9pZiBzdGFydHMgd2l0aCBmaWx0ZXIuLi4KICAgICAgICAgIGlmIChldmVudC5maWVsZC5pbmRleE9mKGtleSkgPT09IDApIHsKICAgICAgICAgICAgZmlsdGVyLmNhbGxiYWNrKGV2ZW50KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci50eXBlID09PSBGaWx0ZXJUeXBlLkVYQUNUKSB7CiAgICAgICAgICAvL2V4YWN0IG1hdGNoCiAgICAgICAgICBpZiAoZXZlbnQuZmllbGQgPT09IGtleSkgewogICAgICAgICAgICBmaWx0ZXIuY2FsbGJhY2soZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhT2JqZWN0T2JzZXJ2ZXI7Cn0oX0RhdGFPYmplY3QzLmRlZmF1bHQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovKTsKCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFPYmplY3RPYnNlcnZlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTIxICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2tleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTsKCnZhciBfa2V5czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9rZXlzKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTsKCnZhciBfZ2V0UHJvdG90eXBlT2YyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0UHJvdG90eXBlT2YpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTsKCnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7Cgp2YXIgX2dldDIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNSk7Cgp2YXIgX2dldDMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXQyKTsKCnZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7Cgp2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7Cgp2YXIgX0RhdGFPYmplY3QyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpOwoKdmFyIF9EYXRhT2JqZWN0MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3QyKTsKCnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiAqIFRoZSBjbGFzcyByZXR1cm5lZCBmcm9tIHRoZSBTeW5jaGVyIGNyZWF0ZSBjYWxsLgogKiBUbyBiZSB1c2VkIGFzIGEgcmVwb3J0ZXIgcG9pbnQsIGNoYW5nZXMgd2lsbCBiZSBzdWJtaXRlZCB0byBEYXRhT2JqZWN0T2JzZXJ2ZXIgaW5zdGFuY2VzLgogKi8KLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgp2YXIgRGF0YU9iamVjdFJlcG9ydGVyID0gZnVuY3Rpb24gKF9EYXRhT2JqZWN0KSB7CiAgKDAsIF9pbmhlcml0czMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLCBfRGF0YU9iamVjdCk7CgogIC8qIHByaXZhdGUKICBfc3Vic2NyaXB0aW9uczogPGh5cGVydHlVcmw6IHsgc3RhdHVzOiBzdHJpbmcgfSB9PgogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tCiAgX29uU3Vic2NyaXB0aW9uSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkCiAgX29uUmVzcG9uc2VIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKICBfb25SZWFkSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkCiAgKi8KCiAgLyoqCiAgICogQGlnbm9yZQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBTeW5jaGVyLmNyZWF0ZSBtZXRob2QKICAgKi8KICBmdW5jdGlvbiBEYXRhT2JqZWN0UmVwb3J0ZXIoc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFPYmplY3RSZXBvcnRlcik7CgogICAgdmFyIF90aGlzMiA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMuZGVmYXVsdCkodGhpcywgKERhdGFPYmplY3RSZXBvcnRlci5fX3Byb3RvX18gfHwgKDAsIF9nZXRQcm90b3R5cGVPZjIuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyKSkuY2FsbCh0aGlzLCBzeW5jaGVyLCB1cmwsIHNjaGVtYSwgaW5pdGlhbFN0YXR1cywgaW5pdGlhbERhdGEsIGNoaWxkcmVucykpOwoKICAgIHZhciBfdGhpcyA9IF90aGlzMjsKCiAgICBfdGhpcy5fc3Vic2NyaXB0aW9ucyA9IHt9OwoKICAgIF90aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItJyArIHVybCArICctU0VORDogJywgZXZlbnQpOwogICAgICBfdGhpcy5fb25DaGFuZ2UoZXZlbnQpOwogICAgfSk7CgogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CiAgICByZXR1cm4gX3RoaXMyOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdFJlcG9ydGVyLCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlKSwgJ19hbGxvY2F0ZUxpc3RlbmVycycsIHRoaXMpLmNhbGwodGhpcyk7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fb2JqZWN0TGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YU9iamVjdC0nICsgX3RoaXMuX3VybCArICctUkNWOiAnLCBtc2cpOwogICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHsKICAgICAgICAgIGNhc2UgJ3Jlc3BvbnNlJzoKICAgICAgICAgICAgX3RoaXMuX29uUmVzcG9uc2UobXNnKTticmVhazsKICAgICAgICAgIGNhc2UgJ3JlYWQnOgogICAgICAgICAgICBfdGhpcy5fb25SZWFkKG1zZyk7YnJlYWs7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmVsZWFzZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbGVhc2VMaXN0ZW5lcnMoKSB7CiAgICAgICgwLCBfZ2V0My5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlLl9fcHJvdG9fXyB8fCAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShEYXRhT2JqZWN0UmVwb3J0ZXIucHJvdG90eXBlKSwgJ19yZWxlYXNlTGlzdGVuZXJzJywgdGhpcykuY2FsbCh0aGlzKTsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9vYmplY3RMaXN0ZW5lci5yZW1vdmUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgaW52aXRhdGlvbnMgKGNyZWF0ZSBtZXNzYWdlcykgdG8gaHlwZXJ0aWVzLCBvYnNlcnZlcnMgbGlzdC4KICAgICAqIEBwYXJhbSAge0h5cGVydHlVUkxbXX0gb2JzZXJ2ZXJzIExpc3Qgb2YgSHlwZXJ0eSBVUkwncwogICAgICovCgogIH0sIHsKICAgIGtleTogJ2ludml0ZU9ic2VydmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW52aXRlT2JzZXJ2ZXJzKG9ic2VydmVycykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25DcmVhdGUKICAgICAgdmFyIGludml0ZU1zZyA9IHsKICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX3N5bmNoZXIuX293bmVyLCB0bzogX3RoaXMuX3N5bmNoZXIuX3N1YlVSTCwKICAgICAgICBib2R5OiB7IHJlc3VtZTogZmFsc2UsIHJlc291cmNlOiBfdGhpcy5fdXJsLCBzY2hlbWE6IF90aGlzLl9zY2hlbWEsIHZhbHVlOiBfdGhpcy5fc3luY09iai5kYXRhLCBhdXRob3Jpc2U6IG9ic2VydmVycyB9CiAgICAgIH07CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKGludml0ZU1zZyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZWxlYXNlIGFuZCBkZWxldGUgb2JqZWN0IGRhdGEKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkZWxldGUnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxldGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkRlbGV0ZQogICAgICB2YXIgZGVsZXRlTXNnID0gewogICAgICAgIHR5cGU6ICdkZWxldGUnLCBmcm9tOiBfdGhpcy5fb3duZXIsIHRvOiBfdGhpcy5fc3luY2hlci5fc3ViVVJMLAogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IF90aGlzLl91cmwgfQogICAgICB9OwoKICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShkZWxldGVNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0UmVwb3J0ZXItREVMRVRFOiAnLCByZXBseSk7CiAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy5fcmVsZWFzZUxpc3RlbmVycygpOwogICAgICAgICAgZGVsZXRlIF90aGlzLl9zeW5jaGVyLl9yZXBvcnRlcnNbX3RoaXMuX3VybF07CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFN1YnNjcmlwdGlvbnMgcmVxdWVzdGVkIGFuZCBhY2NlcHRlZCB0byB0aGlzIHJlcG9ydGVyCiAgICAgKiBAdHlwZSB7T2JqZWN0PEh5cGVydHlVUkwsIFN5bmNTdWJzY3JpcHRpb24+fQogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uU3Vic2NyaXB0aW9uJywKCgogICAgLyoqCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyBzdWJzY3JpYmUgYW5kIHVuc3Vic2NyaWJlIG5vdGlmaWNhdGlvbnMKICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHMKICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3Vic2NyaXB0aW9uKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlciA9IGNhbGxiYWNrOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgcmVzcG9uc2Ugbm90aWZpY2F0aW9ucyBvZiB0aGUgY3JlYXRlJ3MKICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmVjZWl2ZSBldmVudHMKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVzcG9uc2VIYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyByZWFkIG5vdGlmaWNhdGlvbnMKICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblJlYWQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUmVhZChjYWxsYmFjaykgewogICAgICB0aGlzLl9vblJlYWRIYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gcGFyZW50IFN5bmNoZXIgLT4gX29uRm9yd2FyZAoKICB9LCB7CiAgICBrZXk6ICdfb25Gb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Gb3J3YXJkKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coJ0RhdGFPYmplY3RSZXBvcnRlci1SQ1Y6ICcsIG1zZyk7CiAgICAgIHN3aXRjaCAobXNnLmJvZHkudHlwZSkgewogICAgICAgIGNhc2UgJ3N1YnNjcmliZSc6CiAgICAgICAgICBfdGhpcy5fb25TdWJzY3JpYmUobXNnKTticmVhazsKICAgICAgICBjYXNlICd1bnN1YnNjcmliZSc6CiAgICAgICAgICBfdGhpcy5fb25VblN1YnNjcmliZShtc2cpO2JyZWFrOwogICAgICB9CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gdGhpcyAtPiBfb25Gb3J3YXJkOiBlbWl0dGVkIGJ5IGEgcmVtb3RlIFN5bmNoZXIgLT4gc3Vic2NyaWJlCgogIH0sIHsKICAgIGtleTogJ19vblN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBoeXBlcnR5VXJsID0gbXNnLmJvZHkuZnJvbTsKICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0UmVwb3J0ZXIuX29uU3Vic2NyaWJlXScsIG1zZyk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLmJvZHkudHlwZSwKICAgICAgICB1cmw6IGh5cGVydHlVcmwsCgogICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgYWNjZXB0OiBmdW5jdGlvbiBhY2NlcHQoKSB7CiAgICAgICAgICAvL2NyZWF0ZSBuZXcgc3Vic2NyaXB0aW9uCiAgICAgICAgICB2YXIgc3ViID0geyB1cmw6IGh5cGVydHlVcmwsIHN0YXR1czogJ29uJyB9OwogICAgICAgICAgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF0gPSBzdWI7CgogICAgICAgICAgLy9wcm9jZXNzIGFuZCBzZW5kIGNoaWxkcmVucyBkYXRhCiAgICAgICAgICB2YXIgY2hpbGRyZW5WYWx1ZXMgPSB7fTsKICAgICAgICAgICgwLCBfa2V5czIuZGVmYXVsdCkoX3RoaXMuX2NoaWxkcmVuT2JqZWN0cykuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGRJZCkgewogICAgICAgICAgICB2YXIgY2hpbGREYXRhID0gX3RoaXMuX2NoaWxkcmVuT2JqZWN0c1tjaGlsZElkXS5kYXRhOwogICAgICAgICAgICBjaGlsZHJlblZhbHVlc1tjaGlsZElkXSA9ICgwLCBfdXRpbHMuZGVlcENsb25lKShjaGlsZERhdGEpOwogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIHNlbmRNc2cgPSB7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgc2NoZW1hOiBfdGhpcy5fc2NoZW1hLCB2ZXJzaW9uOiBfdGhpcy5fdmVyc2lvbiwgdmFsdWU6IHsgZGF0YTogKDAsIF91dGlscy5kZWVwQ2xvbmUpKF90aGlzLmRhdGEpLCBjaGlsZHJlbnM6IGNoaWxkcmVuVmFsdWVzIH0gfQogICAgICAgICAgfTsKCiAgICAgICAgICAvL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CiAgICAgICAgICBpZiAobXNnLmJvZHkuaGFzT3duUHJvcGVydHkoJ211dHVhbEF1dGhlbnRpY2F0aW9uJykgJiYgIW1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uKSB7CiAgICAgICAgICAgIHNlbmRNc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbiA9IF90aGlzMy5fbXV0dWFsQXV0aGVudGljYXRpb247CiAgICAgICAgICAgIF90aGlzMy5fbXV0dWFsQXV0aGVudGljYXRpb24gPSBtc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICAvL3NlbmQgb2sgcmVzcG9uc2UgbWVzc2FnZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShzZW5kTXNnKTsKCiAgICAgICAgICByZXR1cm4gc3ViOwogICAgICAgIH0sCgogICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikgewogICAgICAgICAgLy9zZW5kIHJlamVjdCByZXNwb25zZSBtZXNzYWdlCiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDAzLCBkZXNjOiByZWFzb24gfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIpIHsKICAgICAgICBjb25zb2xlLmxvZygnU1VCU0NSSVBUSU9OLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uU3Vic2NyaXB0aW9uSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSB0aGlzIC0+IF9vbkZvcndhcmQ6IGVtaXR0ZWQgYnkgYSByZW1vdGUgRGF0YU9iamVjdE9ic2VydmVyIC0+IHVuc3Vic2NyaWJlCgogIH0sIHsKICAgIGtleTogJ19vblVuU3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25VblN1YnNjcmliZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGh5cGVydHlVcmwgPSBtc2cuYm9keS5mcm9tOwoKICAgICAgdmFyIHN1YiA9IF90aGlzLl9zdWJzY3JpcHRpb25zW2h5cGVydHlVcmxdOwogICAgICBkZWxldGUgX3RoaXMuX3N1YnNjcmlwdGlvbnNbaHlwZXJ0eVVybF07CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLmJvZHkudHlwZSwKICAgICAgICB1cmw6IGh5cGVydHlVcmwsCiAgICAgICAgb2JqZWN0OiBzdWIKICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25TdWJzY3JpcHRpb25IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1VOLVNVQlNDUklQVElPTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vblN1YnNjcmlwdGlvbkhhbmRsZXIoZXZlbnQpOwogICAgICB9CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gUmVwb3J0ZXJVUkwgYWRkcmVzczogZW1pdGVkIGJ5IGEgcmVtb3RlIFN5bmNoZXIgLT4gX29uUmVtb3RlQ3JlYXRlIC0+IGV2ZW50LmFjawoKICB9LCB7CiAgICBrZXk6ICdfb25SZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgdXJsOiBtc2cuZnJvbSwKICAgICAgICBjb2RlOiBtc2cuYm9keS5jb2RlCiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1JFU1BPTlNFLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uUmVzcG9uc2VIYW5kbGVyKGV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogbWVzc2FnZSByZWNlaXZlZCBmcm9tIFJlcG9ydGVyVVJMIGFkZHJlc3M6IGVtaXRlZCBieSBhIHJlbW90ZSBTeW5jaGVyIC0+IHJlYWQKCiAgfSwgewogICAga2V5OiAnX29uUmVhZCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVhZChtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBldmVudCA9IHsKICAgICAgICB0eXBlOiBtc2cudHlwZSwKICAgICAgICB1cmw6IG1zZy5mcm9tLAoKICAgICAgICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdCgpIHsKICAgICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgICBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCBmcm9tOiBtc2cudG8sIHRvOiBtc2cuZnJvbSwKICAgICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHZhbHVlOiAoMCwgX3V0aWxzLmRlZXBDbG9uZSkoX3RoaXMuZGF0YSkgfQogICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7CiAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgIGJvZHk6IHsgY29kZTogNDAxLCBkZXNjOiByZWFzb24gfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblJlYWRIYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1JFQUQtRVZFTlQ6ICcsIGV2ZW50KTsKICAgICAgICBfdGhpcy5fb25SZWFkSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdzdWJzY3JpcHRpb25zJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uczsKICAgIH0KICB9XSk7CiAgcmV0dXJuIERhdGFPYmplY3RSZXBvcnRlcjsKfShfRGF0YU9iamVjdDMuZGVmYXVsdCAvKiBpbXBsZW1lbnRzIFN5bmNTdGF0dXMgKi8pOwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdFJlcG9ydGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMjIgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfcHJvbWlzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpOwoKdmFyIF9wcm9taXNlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb21pc2UpOwoKdmFyIF9rZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3MCk7Cgp2YXIgX2tleXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5cyk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9Qcm94eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTsKCnZhciBfUHJveHlPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJveHlPYmplY3QpOwoKdmFyIF9EYXRhT2JqZWN0Q2hpbGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMyk7Cgp2YXIgX0RhdGFPYmplY3RDaGlsZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EYXRhT2JqZWN0Q2hpbGQpOwoKdmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA5KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgovKioKICogTWFpbiBleHRlbnNpb24gY2xhc3MgZm9yIG9ic2VydmVycyBhbmQgcmVwb3J0ZXJzLCB3aXRoIGNvbW1vbiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLgogKiBDaGlsZHJlbiBtYW5hZ2VtZW50IGlzIGNvbW1vbiBmb3Igb2JzZXJ2ZXJzIGFuZCByZXBvcnRlcnMuCiAqLwp2YXIgRGF0YU9iamVjdCA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX3ZlcnNpb246IG51bWJlcgogICBfb3duZXI6IEh5cGVydHlVUkwKICBfdXJsOiBPYmplY3RVUkwKICBfc2NoZW1hOiBTY2hlbWEKICBfYnVzOiBNaW5pQnVzCiAgX3N0YXR1czogb24gfCBwYXVzZWQKICBfc3luY09iajogU3luY0RhdGEKICAgX2NoaWxkcmVuOiB7IGlkOiBEYXRhT2JqZWN0Q2hpbGQgfQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQogICAtLS0tZXZlbnQgaGFuZGxlcnMtLS0tCiAgX29uQWRkQ2hpbGRIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQKICAqLwoKICAvKioKICAgKiBAaWdub3JlCiAgICogU2hvdWxkIG5vdCBiZSB1c2VkIGRpcmVjdGx5IGJ5IEh5cGVydGllcy4gSXQncyBjYWxsZWQgYnkgdGhlIFN5bmNoZXIgY3JlYXRlIG9yIHN1YnNjcmliZSBtZXRob2QncwogICAqLwogIGZ1bmN0aW9uIERhdGFPYmplY3Qoc3luY2hlciwgdXJsLCBzY2hlbWEsIGluaXRpYWxTdGF0dXMsIGluaXRpYWxEYXRhLCBjaGlsZHJlbnMpIHsKICAgIHZhciBtdXR1YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gNiAmJiBhcmd1bWVudHNbNl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s2XSA6IHRydWU7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBEYXRhT2JqZWN0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9zeW5jaGVyID0gc3luY2hlcjsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fc2NoZW1hID0gc2NoZW1hOwogICAgX3RoaXMuX3N0YXR1cyA9IGluaXRpYWxTdGF0dXM7CiAgICBfdGhpcy5fc3luY09iaiA9IG5ldyBfUHJveHlPYmplY3QyLmRlZmF1bHQoaW5pdGlhbERhdGEpOwogICAgX3RoaXMuX2NoaWxkcmVucyA9IGNoaWxkcmVuczsKCiAgICAvL1RPRE86IEZvciBGdXJ0aGVyIFN0dWR5CiAgICBfdGhpcy5fbXV0dWFsQXV0aGVudGljYXRpb24gPSBtdXR1YWw7CgogICAgX3RoaXMuX3ZlcnNpb24gPSAwOwogICAgX3RoaXMuX2NoaWxkSWQgPSAwOwogICAgX3RoaXMuX2NoaWxkcmVuT2JqZWN0cyA9IHt9OwogICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzID0gW107CgogICAgX3RoaXMuX293bmVyID0gc3luY2hlci5fb3duZXI7CiAgICBfdGhpcy5fYnVzID0gc3luY2hlci5fYnVzOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YU9iamVjdCwgW3sKICAgIGtleTogJ19hbGxvY2F0ZUxpc3RlbmVycycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2FsbG9jYXRlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgY2hpbGRCYXNlVVJMID0gX3RoaXMuX3VybCArICcvY2hpbGRyZW4vJzsKICAgICAgY29uc29sZS5sb2coJ1tEYXRhIE9iamVjdCAtIEFsbG9jYXRlTGlzdGVuZXJzXSAtICcsIF90aGlzLl9jaGlsZHJlbnMpOwogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVucykgewogICAgICAgIF90aGlzLl9jaGlsZHJlbnMuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICAgIHZhciBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwogICAgICAgICAgdmFyIGxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gX3RoaXMyLl9vd25lcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0LUNoaWxkcmVuLVJDVjogJywgbXNnKTsKICAgICAgICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGUnOgogICAgICAgICAgICAgICAgICBfdGhpcy5fb25DaGlsZENyZWF0ZShtc2cpO2JyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTticmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIF90aGlzLl9jaGFuZ2VDaGlsZHJlbihtc2cpO2JyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7CiAgICAgICAgbGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgIH0pOwoKICAgICAgKDAsIF9rZXlzMi5kZWZhdWx0KShfdGhpcy5fY2hpbGRyZW5PYmplY3RzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2tleV0uX3JlbGVhc2VMaXN0ZW5lcnMoKTsKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBPYmplY3QgVVJMIG9mIHJlcG9ydGVyIG9yIG9ic2VydmVyCiAgICAgKiBAdHlwZSB7T2JqZWN0VVJMfQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3BhdXNlJywKCgogICAgLyoqCiAgICAgKiBAaWdub3JlCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHsKICAgICAgLy9UT0RPOiB0aGlzIGZlYXR1cmUgbmVlZHMgbW9yZSBhbmFsaXNlCiAgICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnOwogICAgfQoKICAgIC8qKgogICAgICogQGlnbm9yZQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3Jlc3VtZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdW1lKCkgewogICAgICAvL1RPRE86IHRoaXMgZmVhdHVyZSBuZWVkcyBtb3JlIGFuYWxpc2UKICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7CiAgICB9CgogICAgLyoqCiAgICAgKiBAaWdub3JlCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnc3RvcCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHsKICAgICAgLy9UT0RPOiBzaG91bGQgcmVtb3ZlIHRoZSBzdWJzY3JpcHRpb24gYW5kIHNlbmQgbWVzc2FnZSB1bnN1YnNjcmliZT8KICAgICAgdGhyb3cgJ05vdCBpbXBsZW1lbnRlZCc7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW5kIGFkZCBhIERhdGFPYmplY3RDaGlsZCB0byBhIGNoaWxkcmVuIGNvbGxlY3Rpb24uCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2hpbGRyZW4gLSBDaGlsZHJlbiBuYW1lIHdoZXJlIHRoZSBjaGlsZCBpcyBhZGRlZC4KICAgICAqIEBwYXJhbSB7SlNPTn0gaW5pdGlhbERhdGEgLSBJbml0aWFsIGRhdGEgb2YgdGhlIGNoaWxkCiAgICAgKiBAcGFyYW0gIHtNZXNzYWdlQm9keUlkZW50aXR5fSBpZGVudGl0eSAtIChvcHRpb25hbCkgaWRlbnRpdHkgZGF0YSB0byBiZSBhZGRlZCB0byBpZGVudGl0eSB0aGUgdXNlciByZXBvcnRlci4gVG8gYmUgdXNlZCBmb3IgbGVnYWN5IGlkZW50aXRpZXMuCiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPERhdGFPYmplY3RDaGlsZD59IC0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgRGF0YU9iamVjdENoaWxkLgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2FkZENoaWxkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDaGlsZChjaGlsZHJlbiwgaW5pdGlhbERhdGEsIGlkZW50aXR5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2NyZWF0ZSBuZXcgY2hpbGQgdW5pcXVlIElELCBiYXNlZCBvbiBoeXBlcnR5VVJMCiAgICAgIF90aGlzLl9jaGlsZElkKys7CiAgICAgIHZhciBtc2dDaGlsZElkID0gX3RoaXMuX293bmVyICsgJyMnICsgX3RoaXMuX2NoaWxkSWQ7CiAgICAgIHZhciBtc2dDaGlsZFBhdGggPSBfdGhpcy5fdXJsICsgJy9jaGlsZHJlbi8nICsgY2hpbGRyZW47CgogICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIGEgcmVzb3VyY2UgY2hpbGQgYWRkcmVzczogTWVzc2FnZUJ1cwogICAgICB2YXIgcmVxdWVzdE1zZyA9IHsKICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogbXNnQ2hpbGRQYXRoLAogICAgICAgIGJvZHk6IHsgcmVzb3VyY2U6IG1zZ0NoaWxkSWQsIHZhbHVlOiBpbml0aWFsRGF0YSB9CiAgICAgIH07CgogICAgICBpZiAoaWRlbnRpdHkpIHsKICAgICAgICByZXF1ZXN0TXNnLmJvZHkuaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgfQoKICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICBpZiAoIV90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbikgcmVxdWVzdE1zZy5ib2R5Lm11dHVhbEF1dGhlbnRpY2F0aW9uID0gX3RoaXMuX211dHVhbEF1dGhlbnRpY2F0aW9uOwoKICAgICAgLy9yZXR1cm5zIHByb21pc2UsIGluIHRoZSBmdXR1cmUsIHRoZSBBUEkgbWF5IGNoYW5nZSB0byBhc3luY2hyb25vdXMgY2FsbAogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgdmFyIG1zZ0lkID0gX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShyZXF1ZXN0TXNnKTsKCiAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZS1yZXBvcnRlci1jaGlsZCggJyArIF90aGlzLl9vd25lciArICcgKTogJywgcmVxdWVzdE1zZyk7CiAgICAgICAgdmFyIG5ld0NoaWxkID0gbmV3IF9EYXRhT2JqZWN0Q2hpbGQyLmRlZmF1bHQoX3RoaXMsIG1zZ0NoaWxkSWQsIGluaXRpYWxEYXRhLCBfdGhpcy5fb3duZXIsIG1zZ0lkKTsKICAgICAgICBuZXdDaGlsZC5vbkNoYW5nZShmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIF90aGlzLl9vbkNoYW5nZShldmVudCwgeyBwYXRoOiBtc2dDaGlsZFBhdGgsIGNoaWxkSWQ6IG1zZ0NoaWxkSWQgfSk7CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbbXNnQ2hpbGRJZF0gPSBuZXdDaGlsZDsKCiAgICAgICAgcmVzb2x2ZShuZXdDaGlsZCk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogU2V0dXAgdGhlIGNhbGxiYWNrIHRvIHByb2Nlc3MgY3JlYXRlIGFuZCBkZWxldGUgb2YgY2hpbGRyZW5zLgogICAgICogQHBhcmFtIHtmdW5jdGlvbihldmVudDogTXNnRXZlbnQpfSBjYWxsYmFjawogICAgICovCgogIH0sIHsKICAgIGtleTogJ29uQWRkQ2hpbGQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWRkQ2hpbGQoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25BZGRDaGlsZHJlbkhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0IC0+IGFkZENoaWxkCgogIH0sIHsKICAgIGtleTogJ19vbkNoaWxkQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGlsZENyZWF0ZShtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIG1zZ0NoaWxkSWQgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUtb2JzZXJ2ZXItY2hpbGQoICcgKyBfdGhpcy5fb3duZXIgKyAnICk6ICcsIG1zZyk7CiAgICAgIHZhciBuZXdDaGlsZCA9IG5ldyBfRGF0YU9iamVjdENoaWxkMi5kZWZhdWx0KF90aGlzLCBtc2dDaGlsZElkLCBtc2cuYm9keS52YWx1ZSk7CiAgICAgIF90aGlzLl9jaGlsZHJlbk9iamVjdHNbbXNnQ2hpbGRJZF0gPSBuZXdDaGlsZDsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIC8vRkxPVy1PVVQ6IHdpbGwgZmxvdyB0byBEYXRhT2JqZWN0Q2hpbGQgLT4gX29uUmVzcG9uc2UKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHNvdXJjZTogX3RoaXMuX293bmVyIH0KICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmZyb20sCiAgICAgICAgdXJsOiBtc2cudG8sCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLAogICAgICAgIGNoaWxkSWQ6IG1zZ0NoaWxkSWQsCiAgICAgICAgaWRlbnRpdHk6IG1zZy5ib2R5LmlkZW50aXR5CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX29uQWRkQ2hpbGRyZW5IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0FERC1DSElMRFJFTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgIF90aGlzLl9vbkFkZENoaWxkcmVuSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL3NlbmQgZGVsdGEgbWVzc2FnZXMgdG8gc3Vic2NyaXB0aW9ucwoKICB9LCB7CiAgICBrZXk6ICdfb25DaGFuZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNoYW5nZShldmVudCwgY2hpbGRJbmZvKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fdmVyc2lvbisrOwoKICAgICAgaWYgKF90aGlzLl9zdGF0dXMgPT09ICdvbicpIHsKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IGRpcmVjdGx5IHRvIGEgcmVzb3VyY2UgY2hhbmdlcyBhZGRyZXNzOiBNZXNzYWdlQnVzCiAgICAgICAgdmFyIGNoYW5nZU1zZyA9IHsKICAgICAgICAgIHR5cGU6ICd1cGRhdGUnLCBmcm9tOiBfdGhpcy5fdXJsLCB0bzogX3RoaXMuX3VybCArICcvY2hhbmdlcycsCiAgICAgICAgICBib2R5OiB7IHZlcnNpb246IF90aGlzLl92ZXJzaW9uLCBzb3VyY2U6IF90aGlzLl9vd25lciwgYXR0cmlidXRlOiBldmVudC5maWVsZCB9CiAgICAgICAgfTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tEYXRhT2JqZWN0IC0gX29uQ2hhbmdlXSAtICcsIGV2ZW50LCBjaGlsZEluZm8sIGNoYW5nZU1zZyk7CgogICAgICAgIGlmIChldmVudC5vVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuT0JKRUNUKSB7CiAgICAgICAgICBpZiAoZXZlbnQuY1R5cGUgIT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLlJFTU9WRSkgewogICAgICAgICAgICBjaGFuZ2VNc2cuYm9keS52YWx1ZSA9IGV2ZW50LmRhdGE7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LmF0dHJpYnV0ZVR5cGUgPSBldmVudC5vVHlwZTsKICAgICAgICAgIGNoYW5nZU1zZy5ib2R5LnZhbHVlID0gZXZlbnQuZGF0YTsKICAgICAgICAgIGlmIChldmVudC5jVHlwZSAhPT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuVVBEQVRFKSB7CiAgICAgICAgICAgIGNoYW5nZU1zZy5ib2R5Lm9wZXJhdGlvbiA9IGV2ZW50LmNUeXBlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy9jaGlsZEluZm8gbXVzdCBoYXZlIChwYXRoLCBjaGlsZElkKQogICAgICAgIGlmIChjaGlsZEluZm8pIHsKICAgICAgICAgIGNoYW5nZU1zZy50byA9IGNoaWxkSW5mby5wYXRoOwogICAgICAgICAgY2hhbmdlTXNnLmJvZHkucmVzb3VyY2UgPSBjaGlsZEluZm8uY2hpbGRJZDsKICAgICAgICB9CgogICAgICAgIC8vVE9ETzogRm9yIEZ1cnRoZXIgU3R1ZHkKICAgICAgICBpZiAoIV90aGlzLl9tdXR1YWxBdXRoZW50aWNhdGlvbikgY2hhbmdlTXNnLmJvZHkubXV0dWFsQXV0aGVudGljYXRpb24gPSBfdGhpcy5fbXV0dWFsQXV0aGVudGljYXRpb247CgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoY2hhbmdlTXNnKTsKICAgICAgfQogICAgfQoKICAgIC8vRkxPVy1JTjogZGVsdGEgbWVzc2FnZSByZWNlaXZlZCBmcm9tIGEgcmVtb3RlIERhdGFPYmplY3RSZXBvcnRlciBvciBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhCgogIH0sIHsKICAgIGtleTogJ19jaGFuZ2VPYmplY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGFuZ2VPYmplY3Qoc3luY09iaiwgbXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL1RPRE86IHVwZGF0ZSB2ZXJzaW9uID8KICAgICAgLy9ob3cgdG8gaGFuZGxlIGFuIGluY29ycmVjdCB2ZXJzaW9uID8gRXhhbXBsZTogcmVjZWl2ZSBhIHZlcnNpb24gMyB3aGVuIHRoZSBvYnNlcnZlciBpcyBpbiB2ZXJzaW9uIDEsIHdoZXJlIGlzIHRoZSB2ZXJzaW9uIDIgPwogICAgICAvL3dpbGwgd2UgbmVlZCB0byBjb25maXJtIHRoZSByZWNlcHRpb24gPwogICAgICBpZiAoX3RoaXMuX3ZlcnNpb24gKyAxID09PSBtc2cuYm9keS52ZXJzaW9uKSB7CiAgICAgICAgX3RoaXMuX3ZlcnNpb24rKzsKICAgICAgICB2YXIgcGF0aCA9IG1zZy5ib2R5LmF0dHJpYnV0ZTsKICAgICAgICB2YXIgdmFsdWUgPSAoMCwgX3V0aWxzLmRlZXBDbG9uZSkobXNnLmJvZHkudmFsdWUpOwogICAgICAgIHZhciBmaW5kUmVzdWx0ID0gc3luY09iai5maW5kQmVmb3JlKHBhdGgpOwoKICAgICAgICBpZiAobXNnLmJvZHkuYXR0cmlidXRlVHlwZSA9PT0gX1Byb3h5T2JqZWN0Lk9iamVjdFR5cGUuQVJSQVkpIHsKICAgICAgICAgIGlmIChtc2cuYm9keS5vcGVyYXRpb24gPT09IF9Qcm94eU9iamVjdC5DaGFuZ2VUeXBlLkFERCkgewogICAgICAgICAgICB2YXIgYXJyID0gZmluZFJlc3VsdC5vYmo7CiAgICAgICAgICAgIHZhciBpbmRleCA9IGZpbmRSZXN1bHQubGFzdDsKICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShhcnIsIFtpbmRleCwgMF0uY29uY2F0KHZhbHVlKSk7CiAgICAgICAgICB9IGVsc2UgaWYgKG1zZy5ib2R5Lm9wZXJhdGlvbiA9PT0gX1Byb3h5T2JqZWN0LkNoYW5nZVR5cGUuUkVNT1ZFKSB7CiAgICAgICAgICAgIHZhciBfYXJyID0gZmluZFJlc3VsdC5vYmo7CiAgICAgICAgICAgIHZhciBfaW5kZXggPSBmaW5kUmVzdWx0Lmxhc3Q7CiAgICAgICAgICAgIF9hcnIuc3BsaWNlKF9pbmRleCwgdmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmluZFJlc3VsdC5vYmpbZmluZFJlc3VsdC5sYXN0XSA9IHZhbHVlOyAvLyBVUERBVEUKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKG1zZy5ib2R5LnZhbHVlKSB7CiAgICAgICAgICAgIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF0gPSB2YWx1ZTsgLy8gVVBEQVRFIG9yIEFERAogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVsZXRlIGZpbmRSZXN1bHQub2JqW2ZpbmRSZXN1bHQubGFzdF07IC8vIFJFTU9WRQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL1RPRE86IGhvdyB0byBoYW5kbGUgdW5zeW5jaHJvbml6ZWQgdmVyc2lvbnM/CiAgICAgICAgY29uc29sZS5sb2coJ1VOU1lOQ0hST05JWkVEIFZFUlNJT046IChkYXRhID0+ICcgKyBfdGhpcy5fdmVyc2lvbiArICcsIG1zZyA9PiAnICsgbXNnLmJvZHkudmVyc2lvbiArICcpJyk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0Q2hpbGQgd2hlbiBjaGFuZ2luZyBkYXRhCgogIH0sIHsKICAgIGtleTogJ19jaGFuZ2VDaGlsZHJlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2NoYW5nZUNoaWxkcmVuKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBjb25zb2xlLmxvZygnQ2hhbmdlIGNoaWxkcmVuOiAnLCBfdGhpcy5fb3duZXIsIG1zZyk7CgogICAgICB2YXIgY2hpbGRJZCA9IG1zZy5ib2R5LnJlc291cmNlOwogICAgICB2YXIgY2hpbGRyZW4gPSBfdGhpcy5fY2hpbGRyZW5PYmplY3RzW2NoaWxkSWRdOwoKICAgICAgaWYgKGNoaWxkcmVuKSB7CiAgICAgICAgX3RoaXMuX2NoYW5nZU9iamVjdChjaGlsZHJlbi5fc3luY09iaiwgbXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnTm8gY2hpbGRyZW4gZm91bmQgZm9yOiAnLCBjaGlsZElkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ3VybCcsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgIH0KCiAgICAvKioKICAgICAqIE9iamVjdCBzY2hlbWEgVVJMICh0aGlzIGZpZWxkIGlzIG5vdCB5ZXQgc3RhYmxlLCBhbmQgaXMgc3Vic2plY3QgdG8gY2hhbmdlKQogICAgICogQHR5cGUge1NjaGVtYVVSTH0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdzY2hlbWEnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zY2hlbWE7CiAgICB9CgogICAgLyoqCiAgICAgKiBTdGF0dXMgb2YgdGhlIHJlcG9ydGVyIG9yIG9ic2VydmVyIGNvbm5lY3Rpb24gKHRoaXMgZmllbGQgaXMgbm90IHlldCBzdGFibGUsIGFuZCBpcyBzdWJzamVjdCB0byBjaGFuZ2UpCiAgICAgKiBAdHlwZSB7U3RhdHVzfSAtIEVudW0gb2Y6IG9uIHwgcGF1c2VkCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnc3RhdHVzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3RhdHVzOwogICAgfQoKICAgIC8qKgogICAgICogRGF0YSBzdHJ1Y3R1cmUgdG8gYmUgc3luY2hyb25pemVkLgogICAgICogQHR5cGUge0pTT059IC0gSlNPTiBzdHJ1Y3R1cmUgdGhhdCBzaG91bGQgZm9sbG93IHRoZSBkZWZpbmVkIHNjaGVtYSwgaWYgYW55LgogICAgICovCgogIH0sIHsKICAgIGtleTogJ2RhdGEnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9zeW5jT2JqLmRhdGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBBbGwgY3JlYXRlZCBjaGlsZHJlbidzIHNpbmNlIHRoZSBzdWJzY3JpcHRpb24sIGRvZXNuJ3QgY29udGFpbiBhbGwgY2hpbGRyZW4ncyBzaW5jZSByZXBvcnRlciBjcmVhdGlvbi4KICAgICAqIEB0eXBlIHtPYmplY3Q8Q2hpbGRJZCwgRGF0YU9iamVjdENoaWxkPn0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjaGlsZHJlbnMnLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbk9iamVjdHM7CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhT2JqZWN0Owp9KCk7IC8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTIzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7Cgp2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7Cgp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApOwoKdmFyIF9jcmVhdGVDbGFzczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jcmVhdGVDbGFzczIpOwoKdmFyIF9Qcm94eU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTsKCnZhciBfUHJveHlPYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfUHJveHlPYmplY3QpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCi8qKgogKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSB0aGUgRGF0YU9iamVjdCBhZGRDaGlsZHJlbiBjYWxsIG9yIGZyb20gb25BZGRDaGlsZHJlbiBpZiByZW1vdGVseSBjcmVhdGVkLgogKiBDaGlsZHJlbiBvYmplY3Qgc3luY2hyb25pemF0aW9uIGlzIGEgYSBmYXN0IGZvcndhcmQgbWVjaGFuaXNtLCBubyBuZWVkIGZvciBkaXJlY3Qgc3Vic2NyaXB0aW9ucywgaXQgdXNlcyB0aGUgYWxyZWFkeSBhdXRob3JpemVkIHN1YnNjcmlwdGlvbiBmcm9tIHRoZSBwYXJlbnQgRGF0YU9iamVjdC4KICovCnZhciBEYXRhT2JqZWN0Q2hpbGQgLyogaW1wbGVtZW50cyBTeW5jU3RhdHVzICovID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQogIF9vblJlc3BvbnNlSGFuZGxlcjogKGV2ZW50KSA9PiB2b2lkCiAgKi8KCiAgLyoqCiAgICogQGlnbm9yZQogICAqIFNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBieSBIeXBlcnRpZXMuIEl0J3MgY2FsbGVkIGJ5IHRoZSBEYXRhT2JqZWN0LmFkZENoaWxkcmVuCiAgICovCiAgZnVuY3Rpb24gRGF0YU9iamVjdENoaWxkKHBhcmVudCwgY2hpbGRJZCwgaW5pdGlhbERhdGEsIG93bmVyLCBtc2dJZCkgewogICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGF0YU9iamVjdENoaWxkKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9wYXJlbnQgPSBwYXJlbnQ7CiAgICBfdGhpcy5fY2hpbGRJZCA9IGNoaWxkSWQ7CiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl9tc2dJZCA9IG1zZ0lkOwoKICAgIF90aGlzLl9zeW5jT2JqID0gbmV3IF9Qcm94eU9iamVjdDIuZGVmYXVsdChpbml0aWFsRGF0YSk7CgogICAgX3RoaXMuX2J1cyA9IHBhcmVudC5fYnVzOwogICAgX3RoaXMuX2FsbG9jYXRlTGlzdGVuZXJzKCk7CiAgfQoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShEYXRhT2JqZWN0Q2hpbGQsIFt7CiAgICBrZXk6ICdfYWxsb2NhdGVMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hbGxvY2F0ZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIC8vdGhpcyBpcyBvbmx5IG5lZWRlZCBmb3IgY2hpbGRyZW4gcmVwb3J0ZXJzCiAgICAgIGlmIChfdGhpcy5fb3duZXIpIHsKICAgICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl9vd25lciwgZnVuY3Rpb24gKG1zZykgewogICAgICAgICAgaWYgKG1zZy50eXBlID09PSAncmVzcG9uc2UnICYmIG1zZy5pZCA9PT0gX3RoaXMuX21zZ0lkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEYXRhT2JqZWN0Q2hpbGQub25SZXNwb25zZTonLCBtc2cpOwogICAgICAgICAgICBfdGhpcy5fb25SZXNwb25zZShtc2cpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3JlbGVhc2VMaXN0ZW5lcnMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWxlYXNlTGlzdGVuZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLl9saXN0ZW5lcikgewogICAgICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbmQgZGVsZXRlIG9iamVjdCBkYXRhCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGVsZXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsZXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZGVsZXRlIF90aGlzLl9wYXJlbnQuX2NoaWxkcmVuW190aGlzLl9jaGlsZElkXTsKCiAgICAgIF90aGlzLl9yZWxlYXNlTGlzdGVuZXJzKCk7CgogICAgICAvL1RPRE86IHNlbmQgZGVsZXRlIG1lc3NhZ2UgPwogICAgfQoKICAgIC8qKgogICAgICogQ2hpbGRyZW4gSUQgZ2VuZXJhdGVkIG9uIGFkZENoaWxkcmVuLiBVbmlxdWUgaWRlbnRpZmllcgogICAgICogQHR5cGUge1VSTH0gLSBVUkwgb2YgdGhlIGZvcm1hdCA8SHlwZXJ0eVVSTD4jPG51bWVyaWMtc2VxdWVuY2U+CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb25DaGFuZ2UnLAoKCiAgICAvKioKICAgICAqIFJlZ2lzdGVyIHRoZSBjaGFuZ2UgbGlzdGVuZXJzIHNlbnQgYnkgdGhlIHJlcG9ydGVyIGNoaWxkCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGV2ZW50OiBNc2dFdmVudCl9IGNhbGxiYWNrCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZShjYWxsYmFjaykgewogICAgICB0aGlzLl9zeW5jT2JqLm9ic2VydmUoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgY2FsbGJhY2soZXZlbnQpOwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldHVwIHRoZSBjYWxsYmFjayB0byBwcm9jZXNzIHJlc3BvbnNlIG5vdGlmaWNhdGlvbnMgb2YgdGhlIGNyZWF0ZXMKICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblJlc3BvbnNlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlc3BvbnNlKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29uUmVzcG9uc2VIYW5kbGVyID0gY2FsbGJhY2s7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSByZW1vdGUgRGF0YU9iamVjdCAtPiBfb25DaGlsZENyZWF0ZQoKICB9LCB7CiAgICBrZXk6ICdfb25SZXNwb25zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVzcG9uc2UobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgdXJsOiBtc2cuYm9keS5zb3VyY2UsCiAgICAgICAgY29kZTogbXNnLmJvZHkuY29kZQogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcikgewogICAgICAgIF90aGlzLl9vblJlc3BvbnNlSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdjaGlsZElkJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2hpbGRJZDsKICAgIH0KCiAgICAvKioKICAgICAqIERhdGEgU3RydWN0dXJlIHRvIGJlIHN5bmNocm9uaXplZC4KICAgICAqIEB0eXBlIHtKU09OfSAtIEpTT04gc3RydWN0dXJlIHRoYXQgc2hvdWxkIGZvbGxvdyB0aGUgZGVmaW5lZCBzY2hlbWEsIGlmIGFueS4KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdkYXRhJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fc3luY09iai5kYXRhOwogICAgfQogIH1dKTsKICByZXR1cm4gRGF0YU9iamVjdENoaWxkOwp9KCk7IC8qKgogICAgICogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRAogICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgogICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElOCiAgICAgKgogICAgICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAqCiAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gRGF0YU9iamVjdENoaWxkOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMjQgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5PYmplY3RUeXBlID0gZXhwb3J0cy5DaGFuZ2VUeXBlID0gdW5kZWZpbmVkOwoKdmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpOwoKdmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpOwoKdmFyIF9jcmVhdGVDbGFzczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTsKCnZhciBfY3JlYXRlQ2xhc3MzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY3JlYXRlQ2xhc3MyKTsKCl9fd2VicGFja19yZXF1aXJlX18oMTE4KTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9Cgp2YXIgb2JqZWN0VHlwZSA9IHsgQVJSQVk6ICdbb2JqZWN0IEFycmF5XScsIE9CSkVDVDogJ1tvYmplY3QgT2JqZWN0XScgfTsKCi8qKgogKiBAYWNjZXNzIHByaXZhdGUKICogTWFpbiBjbGFzcyB0aGF0IG1haW50YWlucyBhIEpTT04gb2JqZWN0LCBhbmQgb2JzZXJ2ZXMgY2hhbmdlcyBpbiB0aGlzIG9iamVjdCwgcmVjdXJzaXZlbHkuCiAqIEludGVybmFsIG9iamVjdHMgYW5kIGFycmF5cyBhcmUgYWxzbyBvYnNlcnZlZC4KICovCgp2YXIgU3luY09iamVjdCA9IGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTeW5jT2JqZWN0KGluaXRpYWxEYXRhKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTeW5jT2JqZWN0KTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9vYnNlcnZlcnMgPSBbXTsKICAgIF90aGlzLl9maWx0ZXJzID0ge307CgogICAgdGhpcy5fZGF0YSA9IGluaXRpYWxEYXRhIHx8IHt9OwoKICAgIHRoaXMuX2ludGVybmFsT2JzZXJ2ZSh0aGlzLl9kYXRhKTsKICB9CgogICgwLCBfY3JlYXRlQ2xhc3MzLmRlZmF1bHQpKFN5bmNPYmplY3QsIFt7CiAgICBrZXk6ICdvYnNlcnZlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvYnNlcnZlKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuX29ic2VydmVycy5wdXNoKGNhbGxiYWNrKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdmaW5kJywKICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kKHBhdGgpIHsKICAgICAgdmFyIGxpc3QgPSBwYXRoLnNwbGl0KCcuJyk7CgogICAgICByZXR1cm4gdGhpcy5fZmluZFdpdGhTcGxpdChsaXN0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdmaW5kQmVmb3JlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kQmVmb3JlKHBhdGgpIHsKICAgICAgdmFyIHJlc3VsdCA9IHt9OwogICAgICB2YXIgbGlzdCA9IHBhdGguc3BsaXQoJy4nKTsKICAgICAgcmVzdWx0Lmxhc3QgPSBsaXN0LnBvcCgpOwogICAgICByZXN1bHQub2JqID0gdGhpcy5fZmluZFdpdGhTcGxpdChsaXN0KTsKCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2ZpbmRXaXRoU3BsaXQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5kV2l0aFNwbGl0KGxpc3QpIHsKICAgICAgdmFyIG9iaiA9IHRoaXMuX2RhdGE7CiAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBvYmogPSBvYmpbdmFsdWVdOwogICAgICB9KTsKCiAgICAgIHJldHVybiBvYmo7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2ludGVybmFsT2JzZXJ2ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2ludGVybmFsT2JzZXJ2ZShvYmplY3QpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoY2hhbmdlc2V0KSB7CgogICAgICAgIGNoYW5nZXNldC5ldmVyeShmdW5jdGlvbiAoY2hhbmdlKSB7CiAgICAgICAgICBfdGhpczIuX29uQ2hhbmdlcyhjaGFuZ2UpOwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgdGhpcy5fZGF0YSA9IE9iamVjdC5kZWVwT2JzZXJ2ZShvYmplY3QsIGhhbmRsZXIpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19maXJlRXZlbnQnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maXJlRXZlbnQoZXZlbnQpIHsKICAgICAgdGhpcy5fb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7CiAgICAgICAgY2FsbGJhY2soZXZlbnQpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfb25DaGFuZ2VzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DaGFuZ2VzKGNoYW5nZSkgewoKICAgICAgdmFyIG9iaiA9IGNoYW5nZS5vYmplY3Q7CiAgICAgIHZhciBvYmpUeXBlID0gdm9pZCAwOwoKICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7CiAgICAgICAgb2JqVHlwZSA9IE9iamVjdFR5cGUuT0JKRUNUOwogICAgICB9CgogICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSkgewogICAgICAgIG9ialR5cGUgPSBPYmplY3RUeXBlLkFSUkFZOwogICAgICB9CgogICAgICB2YXIgZmllbGRTdHJpbmcgPSBjaGFuZ2Uua2V5cGF0aDsKCiAgICAgIC8vIGNvbnNvbGUubG9nKCdGaWVsZDonLCBmaWVsZFN0cmluZyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCd0eXBlOicsIGNoYW5nZS50eXBlKTsKCiAgICAgIC8vbGV0IG9sZFZhbHVlID0gY2hhbmdlLm9sZFZhbHVlOwogICAgICB2YXIgbmV3VmFsdWUgPSBvYmpbY2hhbmdlLm5hbWVdOwoKICAgICAgLy8gY29uc29sZS5pbmZvKGNoYW5nZS50eXBlICsgJyB8IEZpZWxkOiAnICsgZmllbGRTdHJpbmcgKyAnIHwgTmV3IFZhbHVlOicsIEpTT04uc3RyaW5naWZ5KG5ld1ZhbHVlKSwgZmllbGRTdHJpbmcuaW5jbHVkZXMoJ2xlbmd0aCcpKTsKCiAgICAgIGlmIChjaGFuZ2UudHlwZSA9PT0gJ3VwZGF0ZScgJiYgIWZpZWxkU3RyaW5nLmluY2x1ZGVzKCcubGVuZ3RoJykpIHsKICAgICAgICB0aGlzLl9maXJlRXZlbnQoewogICAgICAgICAgY1R5cGU6IENoYW5nZVR5cGUuVVBEQVRFLAogICAgICAgICAgb1R5cGU6IG9ialR5cGUsCiAgICAgICAgICBmaWVsZDogZmllbGRTdHJpbmcsCiAgICAgICAgICBkYXRhOiBuZXdWYWx1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoY2hhbmdlLnR5cGUgPT09ICdhZGQnKSB7CiAgICAgICAgdGhpcy5fZmlyZUV2ZW50KHsKICAgICAgICAgIGNUeXBlOiBDaGFuZ2VUeXBlLkFERCwKICAgICAgICAgIG9UeXBlOiBvYmpUeXBlLAogICAgICAgICAgZmllbGQ6IGZpZWxkU3RyaW5nLAogICAgICAgICAgZGF0YTogbmV3VmFsdWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKGNoYW5nZS50eXBlID09PSAnZGVsZXRlJykgewogICAgICAgIHRoaXMuX2ZpcmVFdmVudCh7CiAgICAgICAgICBjVHlwZTogQ2hhbmdlVHlwZS5SRU1PVkUsCiAgICAgICAgICBvVHlwZTogb2JqVHlwZSwKICAgICAgICAgIGZpZWxkOiBmaWVsZFN0cmluZwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnZGF0YScsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7CiAgICB9CiAgfV0pOwogIHJldHVybiBTeW5jT2JqZWN0Owp9KCk7Cgp2YXIgQ2hhbmdlVHlwZSA9IGV4cG9ydHMuQ2hhbmdlVHlwZSA9IHsgVVBEQVRFOiAndXBkYXRlJywgQUREOiAnYWRkJywgUkVNT1ZFOiAncmVtb3ZlJyB9Owp2YXIgT2JqZWN0VHlwZSA9IGV4cG9ydHMuT2JqZWN0VHlwZSA9IHsgT0JKRUNUOiAnb2JqZWN0JywgQVJSQVk6ICdhcnJheScgfTsKZXhwb3J0cy5kZWZhdWx0ID0gU3luY09iamVjdDsKCi8qKiovIH0pLAovKiAxMjUgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7Cgp2YXIgX2dldFByb3RvdHlwZU9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7Cgp2YXIgX2dldFByb3RvdHlwZU9mMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFByb3RvdHlwZU9mKTsKCnZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpOwoKdmFyIF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsKICBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7CiAgdmFyIGRlc2MgPSAoMCwgX2dldE93blByb3BlcnR5RGVzY3JpcHRvcjIuZGVmYXVsdCkob2JqZWN0LCBwcm9wZXJ0eSk7CgogIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsKICAgIHZhciBwYXJlbnQgPSAoMCwgX2dldFByb3RvdHlwZU9mMi5kZWZhdWx0KShvYmplY3QpOwoKICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOwogICAgfQogIH0gZWxzZSBpZiAoInZhbHVlIiBpbiBkZXNjKSB7CiAgICByZXR1cm4gZGVzYy52YWx1ZTsKICB9IGVsc2UgewogICAgdmFyIGdldHRlciA9IGRlc2MuZ2V0OwoKICAgIGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQoKICAgIHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7CiAgfQp9OwoKLyoqKi8gfSksCi8qIDEyNiAqLywKLyogMTI3ICovLAovKiAxMjggKi8sCi8qIDEyOSAqLywKLyogMTMwICovLAovKiAxMzEgKi8sCi8qIDEzMiAqLywKLyogMTMzICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCiJ1c2Ugc3RyaWN0IjsKCgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX3Byb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTsKCnZhciBfcHJvbWlzZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9taXNlKTsKCnZhciBfYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDApOwoKdmFyIF9hc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXNzaWduKTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7Cgp2YXIgX0RhdGFPYmplY3RSZXBvcnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIxKTsKCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RSZXBvcnRlcik7Cgp2YXIgX0RhdGFPYmplY3RPYnNlcnZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTIwKTsKCnZhciBfRGF0YU9iamVjdE9ic2VydmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFPYmplY3RPYnNlcnZlcik7Cgp2YXIgX0RhdGFQcm92aXNpb25hbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTM3KTsKCnZhciBfRGF0YVByb3Zpc2lvbmFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0RhdGFQcm92aXNpb25hbCk7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogVGhlIG1haW4gY2xhc3MgZm9yIHRoZSBzeW5jaGVyIHBhY2thZ2UuCiogVGhlIFN5bmNoZXIgaXMgYSBzaW5nbGV0b24gY2xhc3MgcGVyIEh5cGVydHkvVVJMIGFuZCBpdCBpcyB0aGUgb3duZXIgb2YgYWxsIGNyZWF0ZWQgRGF0YSBTeW5jIE9iamVjdHMgYWNjb3JkaW5nIHRvIHRoZSBSZXBvcnRlciAtIE9ic2VydmVyIHBhdHRlcm4uCiogTWFpbiBmdW5jdGlvbmFsaXR5IGlzIHRvIGNyZWF0ZSByZXBvcnRlcnMgYW5kIHRvIHN1YnNjcmliZSB0byBleGlzdGluZyBvbmVzLgoqLwp2YXIgU3luY2hlciA9IGZ1bmN0aW9uICgpIHsKICAvKiBwcml2YXRlCiAgX293bmVyOiBVUkwKICBfYnVzOiBNaW5pQnVzCiAgIF9zdWJVUkw6IFVSTAogICBfcmVwb3J0ZXJzOiA8dXJsOiBEYXRhT2JqZWN0UmVwb3J0ZXI+CiAgX29ic2VydmVyczogPHVybDogRGF0YU9iamVjdE9ic2VydmVyPgogIF9wcm92aXNpb25hbHM6IDx1cmw6IERhdGFQcm92aXNpb25hbD4KICAgLS0tLWV2ZW50IGhhbmRsZXJzLS0tLQogIF9vbk5vdGlmaWNhdGlvbkhhbmRsZXI6IChldmVudCkgPT4gdm9pZAogIF9vblJlc3VtZTogKGV2ZW50KSA9PiB2b2lkCiAgKi8KCiAgLyoqCiAgKiBDb25zdHJ1Y3RvciB0aGF0IHNob3VsZCBiZSB1c2VkIGJ5IHRoZSBIeXBlcnR5IG93bmVyCiAgKiBAcGFyYW0ge0h5cGVydHlVUkx9IG93bmVyIC0gSHlwZXJ0eSBVUkwgb3duZXIuIEFuIFVSTCBhbGxvY2F0ZWQgYnkgdGhlIHJ1bnRpbWUgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoZSBIeXBlcnR5LgogICogQHBhcmFtIHtNaW5pQnVzfSBidXMgLSBBbiBpbnN0YW5jZSBvZiB0aGUgTWluaUJ1cyBwcm92aWRlZCBpbiB0aGUgc2FuZGJveC4gV2hlbiBhbiBvYmplY3QgKFJlcG9ydGVyIG9yIE9ic2VydmVkKSBpcyBjcmVhdGVkLCB0aGUgU3luY2hlck1hbmFnZXIgd2lsbCBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgTWluaUJ1cyB0byByZWNlaXZlL3NlbmQgTWVzc2FnZXMgb2YgdGhhdCBvYmplY3QuCiAgKiBAcGFyYW0ge0pTT059IGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gZGF0YS4gVGhlIG9ubHkgcmVxdWlyZWQgZmllbGQgZm9yIG5vdyBpcyB0aGUgcnVudGltZVVSTC4KICAqLwogIGZ1bmN0aW9uIFN5bmNoZXIob3duZXIsIGJ1cywgY29uZmlnKSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBTeW5jaGVyKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF90aGlzLl9vd25lciA9IG93bmVyOwogICAgX3RoaXMuX2J1cyA9IGJ1czsKCiAgICBfdGhpcy5fc3ViVVJMID0gY29uZmlnLnJ1bnRpbWVVUkwgKyAnL3NtJzsKCiAgICBfdGhpcy5fcmVwb3J0ZXJzID0ge307CiAgICBfdGhpcy5fb2JzZXJ2ZXJzID0ge307CiAgICBfdGhpcy5fcHJvdmlzaW9uYWxzID0ge307CgogICAgYnVzLmFkZExpc3RlbmVyKG93bmVyLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGYKICAgICAgaWYgKG1zZy5mcm9tICE9PSBvd25lcikgewogICAgICAgIGNvbnNvbGUuaW5mbygnW1N5bmNoZXJdIFN5bmNoZXItUkNWOiAnLCBtc2csIF90aGlzKTsKICAgICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgICAgICBjYXNlICdmb3J3YXJkJzoKICAgICAgICAgICAgX3RoaXMuX29uRm9yd2FyZChtc2cpO2JyZWFrOwogICAgICAgICAgY2FzZSAnY3JlYXRlJzoKICAgICAgICAgICAgX3RoaXMuX29uUmVtb3RlQ3JlYXRlKG1zZyk7YnJlYWs7CiAgICAgICAgICBjYXNlICdkZWxldGUnOgogICAgICAgICAgICBfdGhpcy5fb25SZW1vdGVEZWxldGUobXNnKTticmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLyoqCiAgKiBUaGUgb3duZXIgb2YgdGhlIFN5bmNoZXIgYW5kIGFsbCBjcmVhdGVkIHJlcG9ydGVycy4KICAqIEB0eXBlIHtIeXBlcnR5VVJMfQogICovCgoKICAoMCwgX2NyZWF0ZUNsYXNzMy5kZWZhdWx0KShTeW5jaGVyLCBbewogICAga2V5OiAnY3JlYXRlJywKCgogICAgLyoqCiAgICAqIFJlcXVlc3QgYSBEYXRhT2JqZWN0UmVwb3J0ZXIgY3JlYXRpb24uIFRoZSBVUkwgd2lsbCBiZSBiZSByZXF1ZXN0ZWQgYnkgdGhlIGFsbG9jYXRpb24gbWVjaGFuaXNtLgogICAgKiBAcGFyYW0gIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQogICAgKiBAcGFyYW0gIHtIeXBlcnR5VVJMW119IG9ic2VydmVycyAtIExpc3Qgb2YgaHlwZXJ0aWVzIHRoYXQgYXJlIHByZS1hdXRob3JpemVkIGZvciBzdWJzY3JpcHRpb24KICAgICogQHBhcmFtICB7SlNPTn0gaW5pdGlhbERhdGEgLSBJbml0aWFsIGRhdGEgb2YgdGhlIHJlcG9ydGVyCiAgICAqIEBwYXJhbSAge2Jvb2xlYW59IHN0b3JlIC0gKE9wdGlvbmFsKSBpZiB0cnVlLCBvYmplY3Qgd2lsbCBiZSBzdG9yZWQgYnkgdGhlIHJ1bnRpbWUKICAgICogQHBhcmFtICB7Ym9vbGVhbn0gcDJwIC0gKE9wdGlvbmFsKSBpZiB0cnVlLCBkYXRhIHN5bmNocm9uaXNhdGlvbiBzdHJlYW0gd2lsbCB1c2UgcDJwIGNvbm5lY3Rpb24gYXMgbXVjaCBhcyBwb3NzaWJsZQogICAgKiBAcGFyYW0gIHtNZXNzYWdlQm9keUlkZW50aXR5fSBpZGVudGl0eSAtIChvcHRpb25hbCkgaWRlbnRpdHkgZGF0YSB0byBiZSBhZGRlZCB0byBpZGVudGl0eSB0aGUgdXNlciByZXBvcnRlci4gVG8gYmUgdXNlZCBmb3IgbGVnYWN5IGlkZW50aXRpZXMuCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdFJlcG9ydGVyPn0gUmV0dXJuIFByb21pc2UgdG8gYSBuZXcgUmVwb3J0ZXIuIFRoZSByZXBvcnRlciBjYW4gYmUgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQgYnkgdGhlIFBFUAogICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoc2NoZW1hLCBvYnNlcnZlcnMsIGluaXRpYWxEYXRhKSB7CiAgICAgIHZhciBzdG9yZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICAgIHZhciBwMnAgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlOwogICAgICB2YXIgaWRlbnRpdHkgPSBhcmd1bWVudHNbNV07CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgY3JpdGVyaWEgPSB7fTsKCiAgICAgIGNyaXRlcmlhLnAycCA9IHAycDsKICAgICAgY3JpdGVyaWEuc3RvcmUgPSBzdG9yZTsKICAgICAgY3JpdGVyaWEuc2NoZW1hID0gc2NoZW1hOwogICAgICBjcml0ZXJpYS5vYnNlcnZlcnMgPSBvYnNlcnZlcnM7CiAgICAgIGNyaXRlcmlhLmluaXRpYWxEYXRhID0gaW5pdGlhbERhdGE7CgogICAgICBpZiAoaWRlbnRpdHkpIHsKICAgICAgICBjcml0ZXJpYS5pZGVudGl0eSA9IGlkZW50aXR5OwogICAgICB9CgogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiBmYWxzZSB9KTsKCiAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV0gLSBjcmVhdGUgUmVwb3J0ZXIgLSBjcml0ZXJpYTogJywgY3JpdGVyaWEpOwoKICAgICAgcmV0dXJuIF90aGlzLl9jcmVhdGUoY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKgogICAgKiBSZXF1ZXN0IGEgRGF0YU9iamVjdFJlcG9ydGVyIGNyZWF0aW9uLiBUaGUgVVJMIHdpbGwgYmUgYmUgcmVxdWVzdGVkIGJ5IHRoZSBhbGxvY2F0aW9uIG1lY2hhbmlzbS4KICAgICogQHBhcmFtICB7T2JqZWN0fSBjcml0ZXJpYSAtIChvcHRpb25hbCkgaWRlbnRpdHkgZGF0YSB0byBiZSBhZGRlZCB0byBpZGVudGl0eSB0aGUgdXNlciByZXBvcnRlci4gVG8gYmUgdXNlZCBmb3IgbGVnYWN5IGlkZW50aXRpZXMuCiAgICAqIEByZXR1cm4ge1Byb21pc2U8RGF0YU9iamVjdFJlcG9ydGVyPltdfSBSZXR1cm4gYSBwcm9taXNlIHdpdGggYSBsaXN0IG9mIERhdGFPYmplY3RSZXBvcnRlciB0byBiZSByZXN1bWVkOwogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVzdW1lUmVwb3J0ZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVSZXBvcnRlcnMoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBSZXBvcnRlciAtIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7CgogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiB0cnVlIH0pOwoKICAgICAgcmV0dXJuIF90aGlzLl9yZXN1bWVDcmVhdGUoY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKgogICAgKiBSZXF1ZXN0IGEgc3Vic2NyaXB0aW9uIHRvIGFuIGV4aXN0ZW50IHJlcG9ydGVyIG9iamVjdC4KICAgICogQHBhcmFtIHtTY2hlbWFVUkx9IHNjaGVtYSAtIEh5cGVydHkgQ2F0YWxvZ3VlIFVSTCBhZGRyZXNzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIEpTT04tU2NoZW1hIGRlc2NyaWJpbmcgdGhlIERhdGEgT2JqZWN0IHNjaGVtYQogICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gQWRkcmVzcyBvZiB0aGUgZXhpc3RlbnQgcmVwb3J0ZXIgb2JqZWN0IHRvIGJlIG9ic2VydmVkCiAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3N0b3JlPWZhbHNlXSAtIFNhdmUgdGhlIHN1YnNjcmlwdGlvbiBvbiB0aGUgU3luY2hlciBNYW5hZ2VyIGZvciBmdXJ0aGVyIHJlc3VtZSAoRGVmYXVsdCBpcyBmYWxzZSkKICAgICogQHBhcmFtIHtCb29sZWFufSBbcDJwPWZhbHNlXSAtIEluZm8gYWJvdXQgaWYgc2hvdWxkIHVzZSBwMnAgY29ubmVjdGlvbiAoRGVmYXVsdCBpcyBmYWxzZSkKICAgICogQHBhcmFtIHtCb29sZWFufSBbbXV0dWFsPXRydWVdIC0gSW5mbyBhYm91dCBpZiBtZXNzYWdlcyBvZiB0aGlzIG9iamVjdCBzaG91bGQgYmUgZW5jcnlwdGVkIChEZWZhdWx0IGlzIHRydWUpCiAgICAqIEBwYXJhbSAge01lc3NhZ2VCb2R5SWRlbnRpdHl9IGlkZW50aXR5IC0gKG9wdGlvbmFsKSBpZGVudGl0eSBkYXRhIHRvIGJlIGFkZGVkIHRvIGlkZW50aXR5IHRoZSB1c2VyIHJlcG9ydGVyLiBUbyBiZSB1c2VkIGZvciBsZWdhY3kgaWRlbnRpdGllcy4KICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0T2JzZXJ2ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBvYnNlcnZlci4gSXQncyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcG9ydGVyLgogICAgKi8KCiAgfSwgewogICAga2V5OiAnc3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJzY3JpYmUoc2NoZW1hLCBvYmpVUkwpIHsKICAgICAgdmFyIHN0b3JlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICAgICAgdmFyIHAycCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICAgIHZhciBtdXR1YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHRydWU7CiAgICAgIHZhciBpZGVudGl0eSA9IGFyZ3VtZW50c1s1XTsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBjcml0ZXJpYSA9IHt9OwoKICAgICAgY3JpdGVyaWEucDJwID0gcDJwOwogICAgICBjcml0ZXJpYS5zdG9yZSA9IHN0b3JlOwogICAgICBjcml0ZXJpYS5zY2hlbWEgPSBzY2hlbWE7CgogICAgICBjcml0ZXJpYS5yZXNvdXJjZSA9IG9ialVSTDsKICAgICAgaWYgKGlkZW50aXR5KSB7CiAgICAgICAgY3JpdGVyaWEuaWRlbnRpdHkgPSBpZGVudGl0eTsKICAgICAgfQoKICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICBjcml0ZXJpYS5tdXR1YWwgPSBtdXR1YWw7CgogICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBzdWJzY3JpYmVdIC0gc3Vic2NyaWJlIGNyaXRlcmlhOiAnLCBjcml0ZXJpYSk7CgogICAgICAoMCwgX2Fzc2lnbjIuZGVmYXVsdCkoY3JpdGVyaWEsIHsgcmVzdW1lOiBmYWxzZSB9KTsKCiAgICAgIHJldHVybiBfdGhpcy5fc3Vic2NyaWJlKGNyaXRlcmlhKTsKICAgIH0KCiAgICAvKioKICAgICogUmVxdWVzdCBhIHN1YnNjcmlwdGlvbiB0byBhbiBleGlzdGVudCByZXBvcnRlciBvYmplY3QuCiAgICAqIEBwYXJhbSB7Y3JpdGVyaWF9IGNyaXRlcmlhIC0gSW5mb3JtYXRpb24gdG8gZGlzY292ZXJ5IHRoZSBvYnNlcnZlciBvYmplY3QKICAgICogQHJldHVybiB7UHJvbWlzZTxEYXRhT2JqZWN0T2JzZXJ2ZXI+fSBSZXR1cm4gUHJvbWlzZSB0byBhIG5ldyBvYnNlcnZlci4gSXQncyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcG9ydGVyLgogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVzdW1lT2JzZXJ2ZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWVPYnNlcnZlcnMoY3JpdGVyaWEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIF9jcml0ZXJpYSA9IGNyaXRlcmlhIHx8IHt9OwoKICAgICAgKDAsIF9hc3NpZ24yLmRlZmF1bHQpKF9jcml0ZXJpYSwgeyByZXN1bWU6IHRydWUgfSk7CgogICAgICByZXR1cm4gX3RoaXMuX3Jlc3VtZVN1YnNjcmliZShfY3JpdGVyaWEpOwogICAgfQoKICAgIC8qKgogICAgKiBSZXF1ZXN0IGEgcmVhZCBhY3Rpb24gb24gdGhlIHJlcG9ydGVyIG9iamVjdAogICAgKiBAcGFyYW0ge09iamVjdFVSTH0gb2JqVVJMIC0gVVJMIG9mIHRoZSByZXBvcnRlciBvYmplY3QgdG8gYmUgcmVhZAogICAgKiBAcmV0dXJuIHtQcm9taXNlPE9iamVjdD59IFJldHVybiBQcm9taXNlIHRvIGxhc3QgYXZhaWxhYmxlIGRhdGEgb2YgdGhlIHJlcG9ydGVyCiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdyZWFkJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkKG9ialVSTCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCBkaXJlY3RseSB0byByZXBvcnRlciBvYmplY3QgKG1heWJlIHRoZXJlIGlzIG5vIGxpc3RlbmVyIGF2YWlsYWJsZSwgc28gaXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIE1lc3NhZ2VCdXMgLT4gcmVzb2x2ZSkKICAgICAgLy93aWxsIHJlYWNoIHRoZSByZW1vdGUgb2JqZWN0IGluIERhdGFPYmplY3RSZXBvcnRlciAtPiBfb25SZWFkCiAgICAgIHZhciByZWFkTXNnID0gewogICAgICAgIHR5cGU6ICdyZWFkJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogb2JqVVJMCiAgICAgIH07CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKHJlYWRNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ3JlYWQtcmVzcG9uc2U6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICByZXNvbHZlKHJlcGx5LmJvZHkudmFsdWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgKiBTZXR1cCB0aGUgY2FsbGJhY2sgdG8gcHJvY2VzcyBjcmVhdGUgYW5kIGRlbGV0ZSBldmVudHMgb2YgcmVtb3ZlIFJlcG9ydGVyIG9iamVjdHMuCiAgICAqIFRoaXMgaXMgcmVsZWF0ZWQgdG8gdGhlIG1lc3NhZ2VucyBzZW50IGJ5IGNyZWF0ZSB0byB0aGUgb2JzZXJ2ZXJzIEh5cGVydHkgYXJyYXkuCiAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oZXZlbnQ6IE1zZ0V2ZW50KX0gY2FsbGJhY2sKICAgICovCgogIH0sIHsKICAgIGtleTogJ29uTm90aWZpY2F0aW9uJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbk5vdGlmaWNhdGlvbihjYWxsYmFjaykgewogICAgICB0aGlzLl9vbk5vdGlmaWNhdGlvbkhhbmRsZXIgPSBjYWxsYmFjazsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfY3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlKGNyaXRlcmlhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgcmVzdW1lID0gY3JpdGVyaWEucmVzdW1lOwogICAgICAgIHZhciBpbml0aWFsRGF0YSA9IGNyaXRlcmlhLmluaXRpYWxEYXRhIHx8IHt9OwogICAgICAgIHZhciBzY2hlbWEgPSB2b2lkIDA7CgogICAgICAgIC8vRkxPVy1PVVQ6IHRoaXMgbWVzc2FnZSB3aWxsIGJlIHNlbnQgdG8gdGhlIHJ1bnRpbWUgaW5zdGFuY2Ugb2YgU3luY2hlck1hbmFnZXIgLT4gX29uQ3JlYXRlCiAgICAgICAgdmFyIHJlcXVlc3RNc2cgPSB7CiAgICAgICAgICB0eXBlOiAnY3JlYXRlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogX3RoaXMuX3N1YlVSTCwKICAgICAgICAgIGJvZHk6IHsgcmVzdW1lOiByZXN1bWUgfQogICAgICAgIH07CgogICAgICAgIGNvbnNvbGUubG9nKCdbc3luY2hlciAtIGNyZWF0ZV06ICcsIGNyaXRlcmlhLCByZXF1ZXN0TXNnKTsKCiAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnZhbHVlID0gaW5pdGlhbERhdGE7CiAgICAgICAgcmVxdWVzdE1zZy5ib2R5LnZhbHVlLnJlcG9ydGVyID0gX3RoaXMuX293bmVyOwoKICAgICAgICBpZiAoY3JpdGVyaWEuc2NoZW1hKSB7CiAgICAgICAgICBzY2hlbWEgPSBjcml0ZXJpYS5zY2hlbWE7CiAgICAgICAgICByZXF1ZXN0TXNnLmJvZHkuc2NoZW1hID0gY3JpdGVyaWEuc2NoZW1hOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNyaXRlcmlhLnAycCkgcmVxdWVzdE1zZy5ib2R5LnAycCA9IGNyaXRlcmlhLnAycDsKICAgICAgICBpZiAoY3JpdGVyaWEuc3RvcmUpIHJlcXVlc3RNc2cuYm9keS5zdG9yZSA9IGNyaXRlcmlhLnN0b3JlOwogICAgICAgIGlmIChjcml0ZXJpYS5vYnNlcnZlcnMpIHJlcXVlc3RNc2cuYm9keS5hdXRob3Jpc2UgPSBjcml0ZXJpYS5vYnNlcnZlcnM7CiAgICAgICAgaWYgKGNyaXRlcmlhLmlkZW50aXR5KSByZXF1ZXN0TXNnLmJvZHkuaWRlbnRpdHkgPSBjcml0ZXJpYS5pZGVudGl0eTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIGNyZWF0ZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsKCiAgICAgICAgLy9yZXF1ZXN0IGNyZWF0ZSB0byB0aGUgYWxsb2NhdGlvbiBzeXN0ZW0uIENhbiBiZSByZWplY3RlZCBieSB0aGUgUG9saWN5RW5naW5lLgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UocmVxdWVzdE1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlLXJlc3BvbnNlOiAnLCByZXBseSk7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgLy9yZXBvcnRlciBjcmVhdGlvbiBhY2NlcHRlZAogICAgICAgICAgICB2YXIgb2JqVVJMID0gcmVwbHkuYm9keS5yZXNvdXJjZTsKCiAgICAgICAgICAgIGlmIChyZXN1bWUpIHsKICAgICAgICAgICAgICBzY2hlbWEgPSByZXBseS5ib2R5LnNjaGVtYTsKICAgICAgICAgICAgICBpbml0aWFsRGF0YSA9IHJlcGx5LmJvZHkudmFsdWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBuZXdPYmogPSBuZXcgX0RhdGFPYmplY3RSZXBvcnRlcjIuZGVmYXVsdChfdGhpcywgb2JqVVJMLCBzY2hlbWEsICdvbicsIGluaXRpYWxEYXRhLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsKICAgICAgICAgICAgX3RoaXMuX3JlcG9ydGVyc1tvYmpVUkxdID0gbmV3T2JqOwoKICAgICAgICAgICAgcmVzb2x2ZShuZXdPYmopOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9yZXBvcnRlciBjcmVhdGlvbiByZWplY3RlZAogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3Jlc3VtZUNyZWF0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc3VtZUNyZWF0ZShjcml0ZXJpYSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgcmVzdW1lID0gY3JpdGVyaWEucmVzdW1lOwogICAgICAgIHZhciBpbml0aWFsRGF0YSA9IGNyaXRlcmlhLmluaXRpYWxEYXRhIHx8IHt9OwoKICAgICAgICAvL0ZMT1ctT1VUOiB0aGlzIG1lc3NhZ2Ugd2lsbCBiZSBzZW50IHRvIHRoZSBydW50aW1lIGluc3RhbmNlIG9mIFN5bmNoZXJNYW5hZ2VyIC0+IF9vbkNyZWF0ZQogICAgICAgIHZhciByZXF1ZXN0TXNnID0gewogICAgICAgICAgdHlwZTogJ2NyZWF0ZScsIGZyb206IF90aGlzLl9vd25lciwgdG86IF90aGlzLl9zdWJVUkwsCiAgICAgICAgICBib2R5OiB7IHJlc3VtZTogcmVzdW1lIH0KICAgICAgICB9OwoKICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdOiAnLCBjcml0ZXJpYSwgcmVxdWVzdE1zZyk7CgogICAgICAgIHJlcXVlc3RNc2cuYm9keS52YWx1ZSA9IGluaXRpYWxEYXRhOwogICAgICAgIHJlcXVlc3RNc2cuYm9keS52YWx1ZS5yZXBvcnRlciA9IF90aGlzLl9vd25lcjsKCiAgICAgICAgaWYgKGNyaXRlcmlhLnAycCkgcmVxdWVzdE1zZy5ib2R5LnAycCA9IGNyaXRlcmlhLnAycDsKICAgICAgICBpZiAoY3JpdGVyaWEuc3RvcmUpIHJlcXVlc3RNc2cuYm9keS5zdG9yZSA9IGNyaXRlcmlhLnN0b3JlOwogICAgICAgIGlmIChjcml0ZXJpYS5vYnNlcnZlcnMpIHJlcXVlc3RNc2cuYm9keS5hdXRob3Jpc2UgPSBjcml0ZXJpYS5vYnNlcnZlcnM7CiAgICAgICAgaWYgKGNyaXRlcmlhLmlkZW50aXR5KSByZXF1ZXN0TXNnLmJvZHkuaWRlbnRpdHkgPSBjcml0ZXJpYS5pZGVudGl0eTsKCiAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyIC0gY3JlYXRlXSAtIHJlc3VtZSBtZXNzYWdlOiAnLCByZXF1ZXN0TXNnKTsKCiAgICAgICAgLy9yZXF1ZXN0IGNyZWF0ZSB0byB0aGUgYWxsb2NhdGlvbiBzeXN0ZW0uIENhbiBiZSByZWplY3RlZCBieSB0aGUgUG9saWN5RW5naW5lLgogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UocmVxdWVzdE1zZywgZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXIgLSBjcmVhdGVdIC0gY3JlYXRlLXJlc3VtZWQtcmVzcG9uc2U6ICcsIHJlcGx5KTsKICAgICAgICAgIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewoKICAgICAgICAgICAgdmFyIGxpc3RPZlJlcG9ydGVycyA9IHJlcGx5LmJvZHkudmFsdWU7CgogICAgICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBsaXN0T2ZSZXBvcnRlcnMpIHsKCiAgICAgICAgICAgICAgdmFyIGRhdGFPYmplY3QgPSBsaXN0T2ZSZXBvcnRlcnNbaW5kZXhdOwoKICAgICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIGFjY2VwdGVkCiAgICAgICAgICAgICAgdmFyIG9ialVSTCA9IGRhdGFPYmplY3QucmVzb3VyY2U7CiAgICAgICAgICAgICAgdmFyIHNjaGVtYSA9IGRhdGFPYmplY3Quc2NoZW1hOwogICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBkYXRhT2JqZWN0LnN0YXR1cyB8fCAnb24nOwogICAgICAgICAgICAgIHZhciBfaW5pdGlhbERhdGEgPSBkYXRhT2JqZWN0LmRhdGE7CiAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuUmVzb3VyY2VzID0gZGF0YU9iamVjdC5jaGlsZHJlblJlc291cmNlczsKCiAgICAgICAgICAgICAgdmFyIG5ld09iaiA9IG5ldyBfRGF0YU9iamVjdFJlcG9ydGVyMi5kZWZhdWx0KF90aGlzLCBvYmpVUkwsIHNjaGVtYSwgc3RhdHVzLCBfaW5pdGlhbERhdGEsIGNoaWxkcmVuUmVzb3VyY2VzKTsKICAgICAgICAgICAgICBfdGhpcy5fcmVwb3J0ZXJzW29ialVSTF0gPSBuZXdPYmo7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlc29sdmUoX3RoaXMuX3JlcG9ydGVycyk7CgogICAgICAgICAgICBpZiAoX3RoaXMyLl9vblJlcG9ydGVyc1Jlc3VtZSkgX3RoaXMyLl9vblJlcG9ydGVyc1Jlc3VtZShfdGhpczIuX3JlcG9ydGVycyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL3JlcG9ydGVyIGNyZWF0aW9uIHJlamVjdGVkCiAgICAgICAgICAgIHJlamVjdChyZXBseS5ib2R5LmRlc2MpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc3Vic2NyaWJlKGNyaXRlcmlhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25Mb2NhbFN1YnNjcmliZQogICAgICAgIHZhciBzdWJzY3JpYmVNc2cgPSB7CiAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogX3RoaXMuX3N1YlVSTCwKICAgICAgICAgIGJvZHk6IHt9CiAgICAgICAgfTsKCiAgICAgICAgLy8gSHlwZXJ0eSByZXF1ZXN0IHRvIGJlIGFuIE9ic2VydmVyCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjaHlwZXJ0eS1yZXF1ZXN0LXRvLWJlLWFuLW9ic2VydmVyCgogICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciB0aGUgc2FtZSBIeXBlcnR5IFVSTAogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci10aGUtc2FtZS1oeXBlcnR5LXVybAoKICAgICAgICAvLyBSZXN1bWUgU3Vic2NyaXB0aW9ucyBmb3IgYSBjZXJ0YWluIHVzZXIgYW5kIGRhdGEgc2NoZW1hIGluZGVwZW5kZW50bHkgb2YgdGhlIEh5cGVydHkgVVJMLgogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci1hLWNlcnRhaW4tdXNlci1hbmQtZGF0YS1zY2hlbWEtaW5kZXBlbmRlbnRseS1vZi10aGUtaHlwZXJ0eS11cmwKICAgICAgICBpZiAoY3JpdGVyaWEpIHsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgncDJwJykpIHN1YnNjcmliZU1zZy5ib2R5LnAycCA9IGNyaXRlcmlhLnAycDsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgnc3RvcmUnKSkgc3Vic2NyaWJlTXNnLmJvZHkuc3RvcmUgPSBjcml0ZXJpYS5zdG9yZTsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgnc2NoZW1hJykpIHN1YnNjcmliZU1zZy5ib2R5LnNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgnaWRlbnRpdHknKSkgc3Vic2NyaWJlTXNnLmJvZHkuaWRlbnRpdHkgPSBjcml0ZXJpYS5pZGVudGl0eTsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgncmVzb3VyY2UnKSkgc3Vic2NyaWJlTXNnLmJvZHkucmVzb3VyY2UgPSBjcml0ZXJpYS5yZXNvdXJjZTsKICAgICAgICB9CgogICAgICAgIHN1YnNjcmliZU1zZy5ib2R5LnJlc3VtZSA9IGNyaXRlcmlhLnJlc3VtZTsKCiAgICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgIHZhciBtdXR1YWxBdXRoZW50aWNhdGlvbiA9IGNyaXRlcmlhLm11dHVhbDsKICAgICAgICBpZiAoY3JpdGVyaWEuaGFzT3duUHJvcGVydHkoJ211dHVhbCcpKSBzdWJzY3JpYmVNc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbiA9IG11dHVhbEF1dGhlbnRpY2F0aW9uOwoKICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlIG1lc3NhZ2U6ICcsIGNyaXRlcmlhLCBzdWJzY3JpYmVNc2cpOwoKICAgICAgICAvL3JlcXVlc3Qgc3Vic2NyaXB0aW9uCiAgICAgICAgLy9Qcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uCiAgICAgICAgLy9mb3IgbW9yZSBpbmZvIHNlZSB0aGUgRGF0YVByb3Zpc2lvbmFsIGNsYXNzIGRvY3VtZW50YXRpb24uCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShzdWJzY3JpYmVNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIHN1YnNjcmliZS1yZXNwb25zZTogJywgcmVwbHkpOwoKICAgICAgICAgIHZhciBzY2hlbWEgPSByZXBseS5ib2R5LnNjaGVtYTsKICAgICAgICAgIHZhciBvYmpVUkwgPSByZXBseS5ib2R5LnJlc291cmNlOwoKICAgICAgICAgIHZhciBuZXdQcm92aXNpb25hbCA9IF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXTsKICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fcHJvdmlzaW9uYWxzW29ialVSTF07CiAgICAgICAgICBpZiAobmV3UHJvdmlzaW9uYWwpIG5ld1Byb3Zpc2lvbmFsLl9yZWxlYXNlTGlzdGVuZXJzKCk7CgogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA8IDIwMCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gbmV3IERhdGFQcm92aXNpb25hbDogJywgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcywgb2JqVVJMKTsKICAgICAgICAgICAgbmV3UHJvdmlzaW9uYWwgPSBuZXcgX0RhdGFQcm92aXNpb25hbDIuZGVmYXVsdChfdGhpcy5fb3duZXIsIG9ialVSTCwgX3RoaXMuX2J1cywgcmVwbHkuYm9keS5jaGlsZHJlblJlc291cmNlcyk7CiAgICAgICAgICAgIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXSA9IG5ld1Byb3Zpc2lvbmFsOwogICAgICAgICAgfSBlbHNlIGlmIChyZXBseS5ib2R5LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gbmV3IERhdGEgT2JqZWN0IE9ic2VydmVyOiAnLCByZXBseSwgX3RoaXMuX3Byb3Zpc2lvbmFscyk7CgogICAgICAgICAgICB2YXIgaW5pdGlhbERhdGEgPSByZXBseS5ib2R5LnZhbHVlOwogICAgICAgICAgICBpZiAoIWluaXRpYWxEYXRhLmhhc093blByb3BlcnR5KCdjaGlsZHJlbnMnKSkgewogICAgICAgICAgICAgIGluaXRpYWxEYXRhLmNoaWxkcmVucyA9IHt9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghaW5pdGlhbERhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgewogICAgICAgICAgICAgIGluaXRpYWxEYXRhLmRhdGEgPSB7fTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9UT0RPOiBtdXR1YWxBdXRoZW50aWNhdGlvbiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgICAgICB2YXIgbmV3T2JqID0gbmV3IF9EYXRhT2JqZWN0T2JzZXJ2ZXIyLmRlZmF1bHQoX3RoaXMsIG9ialVSTCwgc2NoZW1hLCAnb24nLCBpbml0aWFsRGF0YSwgbmV3UHJvdmlzaW9uYWwuY2hpbGRyZW4sIHJlcGx5LmJvZHkudmVyc2lvbiwgbXV0dWFsQXV0aGVudGljYXRpb24pOwogICAgICAgICAgICBfdGhpcy5fb2JzZXJ2ZXJzW29ialVSTF0gPSBuZXdPYmo7CgogICAgICAgICAgICByZXNvbHZlKG5ld09iaik7CiAgICAgICAgICAgIG5ld1Byb3Zpc2lvbmFsLmFwcGx5KG5ld09iaik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3Jlc3VtZVN1YnNjcmliZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc3VtZVN1YnNjcmliZShjcml0ZXJpYSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gbmV3IF9wcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgLy9GTE9XLU9VVDogdGhpcyBtZXNzYWdlIHdpbGwgYmUgc2VudCB0byB0aGUgcnVudGltZSBpbnN0YW5jZSBvZiBTeW5jaGVyTWFuYWdlciAtPiBfb25Mb2NhbFN1YnNjcmliZQogICAgICAgIHZhciBzdWJzY3JpYmVNc2cgPSB7CiAgICAgICAgICB0eXBlOiAnc3Vic2NyaWJlJywgZnJvbTogX3RoaXMuX293bmVyLCB0bzogX3RoaXMuX3N1YlVSTCwKICAgICAgICAgIGJvZHk6IHt9CiAgICAgICAgfTsKCiAgICAgICAgLy8gSHlwZXJ0eSByZXF1ZXN0IHRvIGJlIGFuIE9ic2VydmVyCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlVEhJTkstcHJvamVjdC9zcGVjcy9ibG9iL21hc3Rlci9tZXNzYWdlcy9kYXRhLXN5bmMtbWVzc2FnZXMubWQjaHlwZXJ0eS1yZXF1ZXN0LXRvLWJlLWFuLW9ic2VydmVyCgogICAgICAgIC8vIFJlc3VtZSBTdWJzY3JpcHRpb25zIGZvciB0aGUgc2FtZSBIeXBlcnR5IFVSTAogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci10aGUtc2FtZS1oeXBlcnR5LXVybAoKICAgICAgICAvLyBSZXN1bWUgU3Vic2NyaXB0aW9ucyBmb3IgYSBjZXJ0YWluIHVzZXIgYW5kIGRhdGEgc2NoZW1hIGluZGVwZW5kZW50bHkgb2YgdGhlIEh5cGVydHkgVVJMLgogICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZVRISU5LLXByb2plY3Qvc3BlY3MvYmxvYi9tYXN0ZXIvbWVzc2FnZXMvZGF0YS1zeW5jLW1lc3NhZ2VzLm1kI3Jlc3VtZS1zdWJzY3JpcHRpb25zLWZvci1hLWNlcnRhaW4tdXNlci1hbmQtZGF0YS1zY2hlbWEtaW5kZXBlbmRlbnRseS1vZi10aGUtaHlwZXJ0eS11cmwKICAgICAgICBpZiAoY3JpdGVyaWEpIHsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgncDJwJykpIHN1YnNjcmliZU1zZy5ib2R5LnAycCA9IGNyaXRlcmlhLnAycDsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgnc3RvcmUnKSkgc3Vic2NyaWJlTXNnLmJvZHkuc3RvcmUgPSBjcml0ZXJpYS5zdG9yZTsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgnc2NoZW1hJykpIHN1YnNjcmliZU1zZy5ib2R5LnNjaGVtYSA9IGNyaXRlcmlhLnNjaGVtYTsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgnaWRlbnRpdHknKSkgc3Vic2NyaWJlTXNnLmJvZHkuaWRlbnRpdHkgPSBjcml0ZXJpYS5pZGVudGl0eTsKICAgICAgICAgIGlmIChjcml0ZXJpYS5oYXNPd25Qcm9wZXJ0eSgncmVzb3VyY2UnKSkgc3Vic2NyaWJlTXNnLmJvZHkucmVzb3VyY2UgPSBjcml0ZXJpYS5yZXNvdXJjZTsKICAgICAgICB9CgogICAgICAgIHN1YnNjcmliZU1zZy5ib2R5LnJlc3VtZSA9IGNyaXRlcmlhLnJlc3VtZTsKCiAgICAgICAgLy9UT0RPOiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgIHZhciBtdXR1YWxBdXRoZW50aWNhdGlvbiA9IGNyaXRlcmlhLm11dHVhbDsKICAgICAgICBpZiAoY3JpdGVyaWEuaGFzT3duUHJvcGVydHkoJ211dHVhbCcpKSBzdWJzY3JpYmVNc2cuYm9keS5tdXR1YWxBdXRoZW50aWNhdGlvbiA9IG11dHVhbEF1dGhlbnRpY2F0aW9uOwoKICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gc3Vic2NyaWJlIG1lc3NhZ2U6ICcsIGNyaXRlcmlhLCBzdWJzY3JpYmVNc2cpOwoKICAgICAgICAvL3JlcXVlc3Qgc3Vic2NyaXB0aW9uCiAgICAgICAgLy9Qcm92aXNpb25hbCBkYXRhIGlzIGFwcGxpZWQgdG8gdGhlIERhdGFPYmplY3RPYnNlcnZlciBhZnRlciBjb25maXJtYXRpb24uIE9yIGRpc2NhcmRlZCBpZiB0aGVyZSBpcyBubyBjb25maXJtYXRpb24uCiAgICAgICAgLy9mb3IgbW9yZSBpbmZvIHNlZSB0aGUgRGF0YVByb3Zpc2lvbmFsIGNsYXNzIGRvY3VtZW50YXRpb24uCiAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZShzdWJzY3JpYmVNc2csIGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIHN1YnNjcmliZS1yZXN1bWVkLXJlc3BvbnNlOiAnLCByZXBseSk7CgogICAgICAgICAgdmFyIG9ialVSTCA9IHJlcGx5LmJvZHkucmVzb3VyY2U7CgogICAgICAgICAgdmFyIG5ld1Byb3Zpc2lvbmFsID0gX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdOwogICAgICAgICAgZGVsZXRlIF90aGlzLl9wcm92aXNpb25hbHNbb2JqVVJMXTsKICAgICAgICAgIGlmIChuZXdQcm92aXNpb25hbCkgbmV3UHJvdmlzaW9uYWwuX3JlbGVhc2VMaXN0ZW5lcnMoKTsKCiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlIDwgMjAwKSB7CgogICAgICAgICAgICBjb25zb2xlLmxvZygnW3N5bmNoZXJdIC0gcmVzdW1lIG5ldyBEYXRhUHJvdmlzaW9uYWw6ICcsIHJlcGx5LCBvYmpVUkwpOwogICAgICAgICAgICBuZXdQcm92aXNpb25hbCA9IG5ldyBfRGF0YVByb3Zpc2lvbmFsMi5kZWZhdWx0KF90aGlzLl9vd25lciwgb2JqVVJMLCBfdGhpcy5fYnVzLCByZXBseS5ib2R5LmNoaWxkcmVuUmVzb3VyY2VzKTsKICAgICAgICAgICAgX3RoaXMuX3Byb3Zpc2lvbmFsc1tvYmpVUkxdID0gbmV3UHJvdmlzaW9uYWw7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CgogICAgICAgICAgICB2YXIgbGlzdE9mT2JzZXJ2ZXJzID0gcmVwbHkuYm9keS52YWx1ZTsKCiAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGxpc3RPZk9ic2VydmVycykgewoKICAgICAgICAgICAgICB2YXIgZGF0YU9iamVjdCA9IGxpc3RPZk9ic2VydmVyc1tpbmRleF07CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tzeW5jaGVyXSAtIFJlc3VtZSBPYmplY3QgT2JzZXJ2ZXI6ICcsIHJlcGx5LCBkYXRhT2JqZWN0LCBfdGhpcy5fcHJvdmlzaW9uYWxzKTsKCiAgICAgICAgICAgICAgdmFyIHNjaGVtYSA9IGRhdGFPYmplY3Quc2NoZW1hOwogICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBkYXRhT2JqZWN0LnN0YXR1cyB8fCAnb24nOwogICAgICAgICAgICAgIHZhciBfb2JqVVJMID0gZGF0YU9iamVjdC5yZXNvdXJjZTsKICAgICAgICAgICAgICB2YXIgdmVyc2lvbiA9IGRhdGFPYmplY3QudmVyc2lvbiB8fCAwOwogICAgICAgICAgICAgIHZhciBpbml0aWFsRGF0YSA9IGRhdGFPYmplY3QuZGF0YTsKICAgICAgICAgICAgICBpZiAoIWluaXRpYWxEYXRhLmhhc093blByb3BlcnR5KCdjaGlsZHJlbnMnKSkgewogICAgICAgICAgICAgICAgaW5pdGlhbERhdGEuY2hpbGRyZW5zID0ge307CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghaW5pdGlhbERhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSkgewogICAgICAgICAgICAgICAgaW5pdGlhbERhdGEuZGF0YSA9IHt9OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gbGV0IGNoaWxkcmVuUmVzb3VyY2VzID0gZGF0YU9iamVjdC5jaGlsZHJlblJlc291cmNlczsKCiAgICAgICAgICAgICAgLy9UT0RPOiBtdXR1YWxBdXRoZW50aWNhdGlvbiBGb3IgRnVydGhlciBTdHVkeQogICAgICAgICAgICAgIHZhciBuZXdPYmogPSBuZXcgX0RhdGFPYmplY3RPYnNlcnZlcjIuZGVmYXVsdChfdGhpcywgX29ialVSTCwgc2NoZW1hLCBzdGF0dXMsIGluaXRpYWxEYXRhLCBfdGhpcy5fcHJvdmlzaW9uYWxzW19vYmpVUkxdLmNoaWxkcmVuLCB2ZXJzaW9uLCBtdXR1YWxBdXRoZW50aWNhdGlvbik7CiAgICAgICAgICAgICAgX3RoaXMuX29ic2VydmVyc1tfb2JqVVJMXSA9IG5ld09iajsKCiAgICAgICAgICAgICAgX3RoaXMuX3Byb3Zpc2lvbmFsc1tfb2JqVVJMXS5hcHBseShuZXdPYmopOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXNvbHZlKF90aGlzLl9vYnNlcnZlcnMpOwoKICAgICAgICAgICAgaWYgKF90aGlzMy5fb25PYnNlcnZlcnNSZXN1bWUpIF90aGlzMy5fb25PYnNlcnZlcnNSZXN1bWUoX3RoaXMuX29ic2VydmVycyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWplY3QocmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CgogICAgLy9GTE9XLUlOOiBtZXNzYWdlIHJlY2VpdmVkIGZyb20gYSBsb2NhbCBydW50aW1lIFJlcG9ydGVyT2JqZWN0IC0+IF9vblJlbW90ZVN1YnNjcmliZQoKICB9LCB7CiAgICBrZXk6ICdfb25Gb3J3YXJkJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Gb3J3YXJkKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJlcG9ydGVyID0gX3RoaXMuX3JlcG9ydGVyc1ttc2cuYm9keS50b107CiAgICAgIHJlcG9ydGVyLl9vbkZvcndhcmQobXNnKTsKICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBTeW5jaGVyIC0+IGNyZWF0ZSAodGhpcyBpcyBhY3R1YWxseSBhbiBpbnZpdGF0aW9uIHRvIHN1YnNjcmliZSkKCiAgfSwgewogICAga2V5OiAnX29uUmVtb3RlQ3JlYXRlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb25SZW1vdGVDcmVhdGUobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL3JlbW92ZSAiL3N1YnNjcmlwdGlvbiIgZnJvbSB0aGUgVVJMCiAgICAgIHZhciByZXNvdXJjZSA9IG1zZy5mcm9tLnNsaWNlKDAsIC0xMyk7CgogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgdHlwZTogbXNnLnR5cGUsCiAgICAgICAgZnJvbTogbXNnLmJvZHkuc291cmNlLAogICAgICAgIHVybDogcmVzb3VyY2UsCiAgICAgICAgc2NoZW1hOiBtc2cuYm9keS5zY2hlbWEsCiAgICAgICAgdmFsdWU6IG1zZy5ib2R5LnZhbHVlLAogICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgYWNrOiBmdW5jdGlvbiBhY2sodHlwZSkgewogICAgICAgICAgdmFyIGxUeXBlID0gMjAwOwogICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgbFR5cGUgPSB0eXBlOwogICAgICAgICAgfQoKICAgICAgICAgIC8vc2VuZCBhY2sgcmVzcG9uc2UgbWVzc2FnZQogICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGlkOiBtc2cuaWQsIHR5cGU6ICdyZXNwb25zZScsIGZyb206IG1zZy50bywgdG86IG1zZy5mcm9tLAogICAgICAgICAgICBib2R5OiB7IGNvZGU6IGxUeXBlIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChfdGhpcy5fb25Ob3RpZmljYXRpb25IYW5kbGVyKSB7CiAgICAgICAgY29uc29sZS5pbmZvKCdbU3luY2hlcl0gTk9USUZJQ0FUSU9OLUVWRU5UOiAnLCBldmVudCk7CiAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgIH0KICAgIH0KCiAgICAvL0ZMT1ctSU46IG1lc3NhZ2UgcmVjZWl2ZWQgZnJvbSBhIHJlbW90ZSBEYXRhT2JqZWN0UmVwb3J0ZXIgLT4gZGVsZXRlCgogIH0sIHsKICAgIGtleTogJ19vblJlbW90ZURlbGV0ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uUmVtb3RlRGVsZXRlKG1zZykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy9yZW1vdmUgIi9zdWJzY3JpcHRpb24iIGZyb20gdGhlIFVSTAogICAgICB2YXIgcmVzb3VyY2UgPSBtc2cuYm9keS5yZXNvdXJjZTsKCiAgICAgIHZhciBvYmplY3QgPSBfdGhpcy5fb2JzZXJ2ZXJzW3Jlc291cmNlXTsKICAgICAgaWYgKG9iamVjdCkgewogICAgICAgIHZhciBldmVudCA9IHsKICAgICAgICAgIHR5cGU6IG1zZy50eXBlLAogICAgICAgICAgdXJsOiByZXNvdXJjZSwKICAgICAgICAgIGlkZW50aXR5OiBtc2cuYm9keS5pZGVudGl0eSwKCiAgICAgICAgICBhY2s6IGZ1bmN0aW9uIGFjayh0eXBlKSB7CiAgICAgICAgICAgIHZhciBsVHlwZSA9IDIwMDsKICAgICAgICAgICAgaWYgKHR5cGUpIHsKICAgICAgICAgICAgICBsVHlwZSA9IHR5cGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vVE9ETzogYW55IG90aGVyIGRpZmZlcmVudCBvcHRpb25zIGZvciB0aGUgcmVsZWFzZSBwcm9jZXNzLCBsaWtlIGFjY2VwdCBidXQgbm9yIHJlbGVhc2UgbG9jYWw/CiAgICAgICAgICAgIGlmIChsVHlwZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgb2JqZWN0LmRlbGV0ZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvL3NlbmQgYWNrIHJlc3BvbnNlIG1lc3NhZ2UKICAgICAgICAgICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICAgICAgYm9keTogeyBjb2RlOiBsVHlwZSwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZiAoX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcikgewogICAgICAgICAgY29uc29sZS5sb2coJ05PVElGSUNBVElPTi1FVkVOVDogJywgZXZlbnQpOwogICAgICAgICAgX3RoaXMuX29uTm90aWZpY2F0aW9uSGFuZGxlcihldmVudCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UoewogICAgICAgICAgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgZnJvbTogbXNnLnRvLCB0bzogbXNnLmZyb20sCiAgICAgICAgICBib2R5OiB7IGNvZGU6IDQwNCwgc291cmNlOiBfdGhpcy5fb3duZXIgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAqIENhbGxiYWNrIHN5c3RlbSB0byB0cmlnZ2VyIHRoZSByZXN1bWVkIHJlcG9ydGVycwogICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBmdW5jdGlvbiBjYWxsYmFjayB3aGljaCB3aWxsIGJlIGludm9rZWQKICAgICogQHJldHVybiB7T2JqZWN0PFVSTCwgRGF0YU9iamVjdFJlcG9ydGVyPn0gUmV0dXJuIG9uZSBvYmplY3Qgd2l0aCBhbGwgcmVzdW1lZCByZXBvcnRlcnM7CiAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdvblJlcG9ydGVyc1Jlc3VtZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25SZXBvcnRlcnNSZXN1bWUoY2FsbGJhY2spIHsKICAgICAgdGhpcy5fb25SZXBvcnRlcnNSZXN1bWUgPSBjYWxsYmFjazsKICAgIH0KCiAgICAvKioKICAgICogQ2FsbGJhY2sgc3lzdGVtIHRvIHRyaWdnZXIgdGhlIHJlc3VtZWQgb2JzZXJ2ZXJzCiAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAtIGZ1bmN0aW9uIGNhbGxiYWNrIHdoaWNoIHdpbGwgYmUgaW52b2tlZAogICAgKiBAcmV0dXJuIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0T2JzZXJ2ZXI+fSBSZXR1cm4gb25lIG9iamVjdCB3aXRoIGFsbCByZXN1bWVkIG9ic2VydmVyczsKICAgICovCgogIH0sIHsKICAgIGtleTogJ29uT2JzZXJ2ZXJzUmVzdW1lJywKICAgIHZhbHVlOiBmdW5jdGlvbiBvbk9ic2VydmVyc1Jlc3VtZShjYWxsYmFjaykgewogICAgICB0aGlzLl9vbk9ic2VydmVyc1Jlc3VtZSA9IGNhbGxiYWNrOwogICAgfQogIH0sIHsKICAgIGtleTogJ293bmVyJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fb3duZXI7CiAgICB9CgogICAgLyoqCiAgICAqIEFsbCBvd25lZCByZXBvcnRlcnMsIHRoZSBvbmVzIHRoYXQgd2VyZSBjcmVhdGVkIGJ5IGEgY3JlYXRlCiAgICAqIEB0eXBlIHtPYmplY3Q8VVJMLCBEYXRhT2JqZWN0UmVwb3J0ZXI+fQogICAgKi8KCiAgfSwgewogICAga2V5OiAncmVwb3J0ZXJzJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcmVwb3J0ZXJzOwogICAgfQoKICAgIC8qKgogICAgKiBBbGwgb3duZWQgb2JzZXJ2ZXJzLCB0aGUgb25lcyB0aGF0IHdlcmUgY3JlYXRlZCBieSBhIGxvY2FsIHN1YnNjcmlwdGlvbgogICAgKiBAdHlwZSB7T2JqZWN0PFVSTCwgRGF0YU9iamVjdE9ic2VydmVyPn0KICAgICovCgogIH0sIHsKICAgIGtleTogJ29ic2VydmVycycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX29ic2VydmVyczsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFN5bmNoZXI7Cn0oKTsgLyoqCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAqIENvcHlyaWdodCAyMDE2IElORVNDLUlECiAgICAgKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgKiBDb3B5cmlnaHQgMjAxNiBPUkFOR0UgU0EKICAgICAqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICogQ29weXJpZ2h0IDIwMTYgVEVDSE5JU0NIRSBVTklWRVJTSVRBVCBCRVJMSU4KICAgICAqCiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICoKICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCiAgICAgKgogICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKICAgICAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCiAgICAgKiovCgpleHBvcnRzLmRlZmF1bHQgPSBTeW5jaGVyOwptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCi8qKiovIH0pLAovKiAxMzQgKi8sCi8qIDEzNSAqLywKLyogMTM2ICovLAovKiAxMzcgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTsKCnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTsKCnZhciBfY3JlYXRlQ2xhc3MyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7Cgp2YXIgX2NyZWF0ZUNsYXNzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NyZWF0ZUNsYXNzMik7CgpmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfQoKLyoqCiogQ29weXJpZ2h0IDIwMTYgUFQgSW5vdmHDp8OjbyBlIFNpc3RlbWFzIFNBCiogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKKiBDb3B5cmlnaHQgMjAxNiBRVU9CSVMgTkVUV09SS1MgU0wKKiBDb3B5cmlnaHQgMjAxNiBGUkFVTkhPRkVSLUdFU0VMTFNDSEFGVCBaVVIgRk9FUkRFUlVORyBERVIgQU5HRVdBTkRURU4gRk9SU0NIVU5HIEUuVgoqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQoqIENvcHlyaWdodCAyMDE2IERldXRzY2hlIFRlbGVrb20gQUcKKiBDb3B5cmlnaHQgMjAxNiBBcGl6ZWUKKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgoqCiogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoqCiogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKKgoqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KKiovCgovKioKICogQGFjY2VzcyBwcml2YXRlCiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIGNvbGxlY3RpbmcgZGVsdGEgY2hhbmdlcyBpbiByZW1vdGUgb2JqZWN0cywgYmVmb3JlIHRoZSByZXNwb25zZSBvZiBzdWJzY3JpcHRpb24gcmVhY2ggdGhlIG9ic2VydmVyLgogKiBJdCdzIHVzZWQgaW4gU3luY2hlciAtPiBzdWJzY3JpYmUuIFRoZSBmbG93IGlzIGRlZmluZWQgYXM6CiAqIDEuIChvYnNlcnZlcikgLS1zdWJzY3JpYmUtLT4gKHJlcG9ydGVyKQogKiAyLiAob2JzZXJ2ZXIpIDwtLWRlbHRhIHVwZGF0ZXMtLSAocmVwb3J0ZXIpCiAqIDMuIChvYnNlcnZlcikgPC0tc3Vic2NyaWJlIHJlc3BvbnNlLS0gKHJlcG9ydGVyKQogKiBUaGlzIG1lYW5zIHRoYXQgdGhlcmUgY291bGQgYmUgZGVsdGEgdXBkYXRlcyB0cmFuc2ZlcnJlZCBiZWZvcmUgdGhlIHN1YnNjcmlwdGlvbiBjb25maXJtYXRpb24uCiAqIFNpbmNlIHRoZXJlIGlzIG5vIERhdGFPYmplY3RPYnNlcnZlciBiZWZvcmUgdGhlIHVic2NyaXB0aW9uIGNvbmZpcm1hdGlvbiwgdGhlcmUgc2hvdWxkIGJlIHNvbWUgb3RoZXIgb2JqZWN0IGNvbGxlY3RpbmcgdGhlIHVwZGF0ZXMuCiAqIFByb3Zpc2lvbmFsIGRhdGEgaXMgYXBwbGllZCB0byB0aGUgRGF0YU9iamVjdE9ic2VydmVyIGFmdGVyIGNvbmZpcm1hdGlvbi4gT3IgZGlzY2FyZGVkIGlmIHRoZXJlIGlzIG5vIGNvbmZpcm1hdGlvbi4KICovCnZhciBEYXRhUHJvdmlzaW9uYWwgPSBmdW5jdGlvbiAoKSB7CiAgLyogcHJpdmF0ZQogIF9jaGlsZHJlbkxpc3RlbmVyczogW01zZ0xpc3RlbmVyXQogIF9saXN0ZW5lcjogTXNnTGlzdGVuZXIKICAgX2NoYW5nZXM6IFtdCiAgKi8KCiAgZnVuY3Rpb24gRGF0YVByb3Zpc2lvbmFsKG93bmVyLCB1cmwsIGJ1cywgY2hpbGRyZW4pIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szLmRlZmF1bHQpKHRoaXMsIERhdGFQcm92aXNpb25hbCk7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfdGhpcy5fb3duZXIgPSBvd25lcjsKICAgIF90aGlzLl91cmwgPSB1cmw7CiAgICBfdGhpcy5fYnVzID0gYnVzOwogICAgX3RoaXMuX2NoaWxkcmVuID0gY2hpbGRyZW47CgogICAgX3RoaXMuX2NoYW5nZXMgPSBbXTsKICAgIF90aGlzLl9hbGxvY2F0ZUxpc3RlbmVycygpOwogIH0KCiAgKDAsIF9jcmVhdGVDbGFzczMuZGVmYXVsdCkoRGF0YVByb3Zpc2lvbmFsLCBbewogICAga2V5OiAnX2FsbG9jYXRlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfYWxsb2NhdGVMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fbGlzdGVuZXIgPSBfdGhpcy5fYnVzLmFkZExpc3RlbmVyKF90aGlzLl91cmwsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0YVByb3Zpc2lvbmFsLScgKyBfdGhpcy5fdXJsICsgJy1SQ1Y6ICcsIG1zZyk7CiAgICAgICAgX3RoaXMuX2NoYW5nZXMucHVzaChtc2cpOwogICAgICB9KTsKCiAgICAgIC8qCiAgICAgIF90aGlzLl9jaGlsZHJlbkxpc3RlbmVycyA9IFtdOwogICAgICBpZiAoX3RoaXMuX2NoaWxkcmVuKSB7CiAgICAgICAgbGV0IGNoaWxkQmFzZVVSTCA9IHVybCArICcvY2hpbGRyZW4vJzsKICAgICAgICBfdGhpcy5fY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHsKICAgICAgICAgIGxldCBjaGlsZFVSTCA9IGNoaWxkQmFzZVVSTCArIGNoaWxkOwogICAgICAgICAgbGV0IGxpc3RlbmVyID0gX3RoaXMuX2J1cy5hZGRMaXN0ZW5lcihjaGlsZFVSTCwgKG1zZykgPT4gewogICAgICAgICAgICAvL2lnbm9yZSBtc2cgc2VudCBieSBoaW1zZWxmCiAgICAgICAgICAgIGlmIChtc2cuZnJvbSAhPT0gb3duZXIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICBfdGhpcy5fY2hpbGRyZW5MaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgICAgICAgfSk7CiAgICAgIH0qLwogICAgfQogIH0sIHsKICAgIGtleTogJ19yZWxlYXNlTGlzdGVuZXJzJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVsZWFzZUxpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9saXN0ZW5lci5yZW1vdmUoKTsKCiAgICAgIC8qX3RoaXMuX2NoaWxkcmVuTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7CiAgICAgICAgbGlzdGVuZXIucmVtb3ZlKCk7CiAgICAgIH0pOyovCiAgICB9CiAgfSwgewogICAga2V5OiAnYXBwbHknLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5KG9ic2VydmVyKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIF90aGlzLl9jaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24gKGNoYW5nZSkgewogICAgICAgIG9ic2VydmVyLl9jaGFuZ2VPYmplY3Qob2JzZXJ2ZXIuX3N5bmNPYmosIGNoYW5nZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ2NoaWxkcmVuJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47CiAgICB9CiAgfV0pOwogIHJldHVybiBEYXRhUHJvdmlzaW9uYWw7Cn0oKTsKCmV4cG9ydHMuZGVmYXVsdCA9IERhdGFQcm92aXNpb25hbDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CgovKioqLyB9KSwKLyogMTM4ICovLAovKiAxMzkgKi8sCi8qIDE0MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NyksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAxNDEgKi8sCi8qIDE0MiAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7Cgptb2R1bGUuZXhwb3J0cyA9IHsgImRlZmF1bHQiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OSksIF9fZXNNb2R1bGU6IHRydWUgfTsKCi8qKiovIH0pLAovKiAxNDMgKi8sCi8qIDE0NCAqLywKLyogMTQ1ICovLAovKiAxNDYgKi8sCi8qIDE0NyAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgpfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Myk7Cm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKS5PYmplY3QuYXNzaWduOwoKLyoqKi8gfSksCi8qIDE0OCAqLywKLyogMTQ5ICovCi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHsKCl9fd2VicGFja19yZXF1aXJlX18oMTU1KTsKdmFyICRPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLk9iamVjdDsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaXQsIGtleSl7CiAgcmV0dXJuICRPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGl0LCBrZXkpOwp9OwoKLyoqKi8gfSksCi8qIDE1MCAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgoidXNlIHN0cmljdCI7CgovLyAxOS4xLjIuMSBPYmplY3QuYXNzaWduKHRhcmdldCwgc291cmNlLCAuLi4pCnZhciBnZXRLZXlzICA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpCiAgLCBnT1BTICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpCiAgLCBwSUUgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpCiAgLCB0b09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpCiAgLCBJT2JqZWN0ICA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpCiAgLCAkYXNzaWduICA9IE9iamVjdC5hc3NpZ247CgovLyBzaG91bGQgd29yayB3aXRoIHN5bWJvbHMgYW5kIHNob3VsZCBoYXZlIGRldGVybWluaXN0aWMgcHJvcGVydHkgb3JkZXIgKFY4IGJ1ZykKbW9kdWxlLmV4cG9ydHMgPSAhJGFzc2lnbiB8fCBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKShmdW5jdGlvbigpewogIHZhciBBID0ge30KICAgICwgQiA9IHt9CiAgICAsIFMgPSBTeW1ib2woKQogICAgLCBLID0gJ2FiY2RlZmdoaWprbG1ub3BxcnN0JzsKICBBW1NdID0gNzsKICBLLnNwbGl0KCcnKS5mb3JFYWNoKGZ1bmN0aW9uKGspeyBCW2tdID0gazsgfSk7CiAgcmV0dXJuICRhc3NpZ24oe30sIEEpW1NdICE9IDcgfHwgT2JqZWN0LmtleXMoJGFzc2lnbih7fSwgQikpLmpvaW4oJycpICE9IEs7Cn0pID8gZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgc291cmNlKXsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFycwogIHZhciBUICAgICA9IHRvT2JqZWN0KHRhcmdldCkKICAgICwgYUxlbiAgPSBhcmd1bWVudHMubGVuZ3RoCiAgICAsIGluZGV4ID0gMQogICAgLCBnZXRTeW1ib2xzID0gZ09QUy5mCiAgICAsIGlzRW51bSAgICAgPSBwSUUuZjsKICB3aGlsZShhTGVuID4gaW5kZXgpewogICAgdmFyIFMgICAgICA9IElPYmplY3QoYXJndW1lbnRzW2luZGV4KytdKQogICAgICAsIGtleXMgICA9IGdldFN5bWJvbHMgPyBnZXRLZXlzKFMpLmNvbmNhdChnZXRTeW1ib2xzKFMpKSA6IGdldEtleXMoUykKICAgICAgLCBsZW5ndGggPSBrZXlzLmxlbmd0aAogICAgICAsIGogICAgICA9IDAKICAgICAgLCBrZXk7CiAgICB3aGlsZShsZW5ndGggPiBqKWlmKGlzRW51bS5jYWxsKFMsIGtleSA9IGtleXNbaisrXSkpVFtrZXldID0gU1trZXldOwogIH0gcmV0dXJuIFQ7Cn0gOiAkYXNzaWduOwoKLyoqKi8gfSksCi8qIDE1MSAqLywKLyogMTUyICovLAovKiAxNTMgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKLy8gMTkuMS4zLjEgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSkKdmFyICRleHBvcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOwoKJGV4cG9ydCgkZXhwb3J0LlMgKyAkZXhwb3J0LkYsICdPYmplY3QnLCB7YXNzaWduOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCl9KTsKCi8qKiovIH0pLAovKiAxNTQgKi8sCi8qIDE1NSAqLwovKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7CgovLyAxOS4xLjIuNiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE8sIFApCnZhciB0b0lPYmplY3QgICAgICAgICAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykKICAsICRnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KS5mOwoKX193ZWJwYWNrX3JlcXVpcmVfXyg0NSkoJ2dldE93blByb3BlcnR5RGVzY3JpcHRvcicsIGZ1bmN0aW9uKCl7CiAgcmV0dXJuIGZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihpdCwga2V5KXsKICAgIHJldHVybiAkZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRvSU9iamVjdChpdCksIGtleSk7CiAgfTsKfSk7CgovKioqLyB9KSwKLyogMTU2ICovLAovKiAxNTcgKi8sCi8qIDE1OCAqLywKLyogMTU5ICovLAovKiAxNjAgKi8sCi8qIDE2MSAqLywKLyogMTYyICovLAovKiAxNjMgKi8sCi8qIDE2NCAqLywKLyogMTY1ICovLAovKiAxNjYgKi8KLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykgewoKInVzZSBzdHJpY3QiOwoKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5EYXRhT2JqZWN0T2JzZXJ2ZXIgPSBleHBvcnRzLkRhdGFPYmplY3RSZXBvcnRlciA9IGV4cG9ydHMuU3luY2hlciA9IHVuZGVmaW5lZDsKCnZhciBfU3luY2hlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKTsKCnZhciBfU3luY2hlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TeW5jaGVyKTsKCnZhciBfRGF0YU9iamVjdFJlcG9ydGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpOwoKdmFyIF9EYXRhT2JqZWN0UmVwb3J0ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdFJlcG9ydGVyKTsKCnZhciBfRGF0YU9iamVjdE9ic2VydmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjApOwoKdmFyIF9EYXRhT2JqZWN0T2JzZXJ2ZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfRGF0YU9iamVjdE9ic2VydmVyKTsKCmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9CgpleHBvcnRzLlN5bmNoZXIgPSBfU3luY2hlcjIuZGVmYXVsdDsKZXhwb3J0cy5EYXRhT2JqZWN0UmVwb3J0ZXIgPSBfRGF0YU9iamVjdFJlcG9ydGVyMi5kZWZhdWx0OwpleHBvcnRzLkRhdGFPYmplY3RPYnNlcnZlciA9IF9EYXRhT2JqZWN0T2JzZXJ2ZXIyLmRlZmF1bHQ7CgovKioqLyB9KQovKioqKioqLyBdKTsKfSk7Cgp9LHt9XSw4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHM9ewogICJfYXJncyI6IFsKICAgIFsKICAgICAgewogICAgICAgICJyYXciOiAic2lwLmpzQDAuNy41IiwKICAgICAgICAic2NvcGUiOiBudWxsLAogICAgICAgICJlc2NhcGVkTmFtZSI6ICJzaXAuanMiLAogICAgICAgICJuYW1lIjogInNpcC5qcyIsCiAgICAgICAgInJhd1NwZWMiOiAiMC43LjUiLAogICAgICAgICJzcGVjIjogIjAuNy41IiwKICAgICAgICAidHlwZSI6ICJ2ZXJzaW9uIgogICAgICB9LAogICAgICAiQzpcXFByb2plY3Rvc1xccmVUSElOS1xcV1AzXFxnaXRcXGRldi1wcm90b3N0dWJzXFxzcmNcXHByb3Rvc3R1YlxcaW1zX2l3IgogICAgXQogIF0sCiAgIl9mcm9tIjogInNpcC5qc0AwLjcuNSIsCiAgIl9pZCI6ICJzaXAuanNAMC43LjUiLAogICJfaW5DYWNoZSI6IHRydWUsCiAgIl9sb2NhdGlvbiI6ICIvc2lwLmpzIiwKICAiX25vZGVWZXJzaW9uIjogIjQuNC4zIiwKICAiX25wbU9wZXJhdGlvbmFsSW50ZXJuYWwiOiB7CiAgICAiaG9zdCI6ICJwYWNrYWdlcy0xMi13ZXN0LmludGVybmFsLm5wbWpzLmNvbSIsCiAgICAidG1wIjogInRtcC9zaXAuanMtMC43LjUudGd6XzE0NjE1OTQ0MTg2OTBfMC41ODM5OTMzMTI0MzcwODczIgogIH0sCiAgIl9ucG1Vc2VyIjogewogICAgIm5hbWUiOiAiam9zZXBoZnJhemllciIsCiAgICAiZW1haWwiOiAiMTIxMmp0cmFjZXVyQGdtYWlsLmNvbSIKICB9LAogICJfbnBtVmVyc2lvbiI6ICIyLjE1LjEiLAogICJfcGhhbnRvbUNoaWxkcmVuIjoge30sCiAgIl9yZXF1ZXN0ZWQiOiB7CiAgICAicmF3IjogInNpcC5qc0AwLjcuNSIsCiAgICAic2NvcGUiOiBudWxsLAogICAgImVzY2FwZWROYW1lIjogInNpcC5qcyIsCiAgICAibmFtZSI6ICJzaXAuanMiLAogICAgInJhd1NwZWMiOiAiMC43LjUiLAogICAgInNwZWMiOiAiMC43LjUiLAogICAgInR5cGUiOiAidmVyc2lvbiIKICB9LAogICJfcmVxdWlyZWRCeSI6IFsKICAgICIvIgogIF0sCiAgIl9yZXNvbHZlZCI6ICJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9zaXAuanMvLS9zaXAuanMtMC43LjUudGd6IiwKICAiX3NoYXN1bSI6ICI4NmFjZTcwNTE1OTRmOTFiNDU1MWJkYjgxMjBhMTZjNDQ5NjJkM2EyIiwKICAiX3Nocmlua3dyYXAiOiBudWxsLAogICJfc3BlYyI6ICJzaXAuanNAMC43LjUiLAogICJfd2hlcmUiOiAiQzpcXFByb2plY3Rvc1xccmVUSElOS1xcV1AzXFxnaXRcXGRldi1wcm90b3N0dWJzXFxzcmNcXHByb3Rvc3R1YlxcaW1zX2l3IiwKICAiYXV0aG9yIjogewogICAgIm5hbWUiOiAiT25TSVAiLAogICAgImVtYWlsIjogImRldmVsb3BlckBvbnNpcC5jb20iLAogICAgInVybCI6ICJodHRwOi8vc2lwanMuY29tL2F1dGhvcnMvIgogIH0sCiAgImJyb3dzZXIiOiB7CiAgICAiLi9zcmMvZW52aXJvbm1lbnQuanMiOiAiLi9zcmMvZW52aXJvbm1lbnRfYnJvd3Nlci5qcyIKICB9LAogICJidWdzIjogewogICAgInVybCI6ICJodHRwczovL2dpdGh1Yi5jb20vb25zaXAvU0lQLmpzL2lzc3VlcyIKICB9LAogICJjb250cmlidXRvcnMiOiBbCiAgICB7CiAgICAgICJ1cmwiOiAiaHR0cHM6Ly9naXRodWIuY29tL29uc2lwL1NJUC5qcy9ibG9iL21hc3Rlci9USEFOS1MubWQiCiAgICB9CiAgXSwKICAiZGVwZW5kZW5jaWVzIjogewogICAgInByb21pc2N1b3VzIjogIl4wLjYuMCIsCiAgICAid3MiOiAiXjAuNi40IgogIH0sCiAgImRlc2NyaXB0aW9uIjogIkEgc2ltcGxlLCBpbnR1aXRpdmUsIGFuZCBwb3dlcmZ1bCBKYXZhU2NyaXB0IHNpZ25hbGluZyBsaWJyYXJ5IiwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgImJlZWZ5IjogIl4yLjEuNSIsCiAgICAiYnJvd3NlcmlmeSI6ICJeNC4xLjgiLAogICAgImdydW50IjogIn4wLjQuMCIsCiAgICAiZ3J1bnQtYnJvd3NlcmlmeSI6ICJeNC4wLjEiLAogICAgImdydW50LWNsaSI6ICJ+MC4xLjYiLAogICAgImdydW50LWNvbnRyaWItY29weSI6ICJeMC41LjAiLAogICAgImdydW50LWNvbnRyaWItamFzbWluZSI6ICJeMC45LjIiLAogICAgImdydW50LWNvbnRyaWItanNoaW50IjogIj4wLjUuMCIsCiAgICAiZ3J1bnQtY29udHJpYi11Z2xpZnkiOiAifjAuMi4wIiwKICAgICJncnVudC1wZWciOiAifjEuMy4xIiwKICAgICJncnVudC10cmltdHJhaWxpbmdzcGFjZXMiOiAiXjAuNC4wIiwKICAgICJwZWdqcyI6ICJeMC44LjAiCiAgfSwKICAiZGlyZWN0b3JpZXMiOiB7fSwKICAiZGlzdCI6IHsKICAgICJzaGFzdW0iOiAiODZhY2U3MDUxNTk0ZjkxYjQ1NTFiZGI4MTIwYTE2YzQ0OTYyZDNhMiIsCiAgICAidGFyYmFsbCI6ICJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9zaXAuanMvLS9zaXAuanMtMC43LjUudGd6IgogIH0sCiAgImVuZ2luZXMiOiB7CiAgICAibm9kZSI6ICI+PTAuOCIKICB9LAogICJnaXRIZWFkIjogImJhZTQ0YmQwMzU5ZjRkNzBkZWQzMDlhMzIzNjFmMDRhMDRlNzhkNmUiLAogICJob21lcGFnZSI6ICJodHRwOi8vc2lwanMuY29tIiwKICAia2V5d29yZHMiOiBbCiAgICAic2lwIiwKICAgICJ3ZWJzb2NrZXQiLAogICAgIndlYnJ0YyIsCiAgICAibGlicmFyeSIsCiAgICAiamF2YXNjcmlwdCIKICBdLAogICJsaWNlbnNlIjogIk1JVCIsCiAgIm1haW4iOiAic3JjL2luZGV4LmpzIiwKICAibWFpbnRhaW5lcnMiOiBbCiAgICB7CiAgICAgICJuYW1lIjogImVncmVlbl9vbnNpcCIsCiAgICAgICJlbWFpbCI6ICJlcmljLmdyZWVuQG9uc2lwLmNvbSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImphbWVzLWNyaXNjdW9sbyIsCiAgICAgICJlbWFpbCI6ICJqYW1lc0BvbnNpcC5jb20iCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJqb3NlcGhmcmF6aWVyIiwKICAgICAgImVtYWlsIjogIjEyMTJqdHJhY2V1ckBnbWFpbC5jb20iCiAgICB9CiAgXSwKICAibmFtZSI6ICJzaXAuanMiLAogICJvcHRpb25hbERlcGVuZGVuY2llcyI6IHsKICAgICJwcm9taXNjdW91cyI6ICJeMC42LjAiCiAgfSwKICAicmVhZG1lIjogIkVSUk9SOiBObyBSRUFETUUgZGF0YSBmb3VuZCEiLAogICJyZXBvc2l0b3J5IjogewogICAgInR5cGUiOiAiZ2l0IiwKICAgICJ1cmwiOiAiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9vbnNpcC9TSVAuanMuZ2l0IgogIH0sCiAgInNjcmlwdHMiOiB7CiAgICAiYnVpbGQiOiAiZ3J1bnQgYnVpbGQiLAogICAgInByZXB1Ymxpc2giOiAiY2Qgc3JjL0dyYW1tYXIgJiYgbWtkaXIgLXAgZGlzdCAmJiBwZWdqcyAtLWV4dHJhLW9wdGlvbnMtZmlsZSBwZWcuanNvbiBzcmMvR3JhbW1hci5wZWdqcyBkaXN0L0dyYW1tYXIuanMiLAogICAgInJlcGwiOiAiYmVlZnkgdGVzdC9yZXBsLmpzIC0tb3BlbiIsCiAgICAidGVzdCI6ICJncnVudCB0cmF2aXMgLS12ZXJib3NlIgogIH0sCiAgInRpdGxlIjogIlNJUC5qcyIsCiAgInZlcnNpb24iOiAiMC43LjUiCn0KCn0se31dLDk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewp2YXIgQ2xpZW50Q29udGV4dDsKCkNsaWVudENvbnRleHQgPSBmdW5jdGlvbiAodWEsIG1ldGhvZCwgdGFyZ2V0LCBvcHRpb25zKSB7CiAgdmFyIG9yaWdpbmFsVGFyZ2V0ID0gdGFyZ2V0OwoKICAvLyBWYWxpZGF0ZSBhcmd1bWVudHMKICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggYXJndW1lbnRzJyk7CiAgfQoKICB0aGlzLnVhID0gdWE7CiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5jbGllbnRjb250ZXh0Jyk7CiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7CiAgdGFyZ2V0ID0gdWEubm9ybWFsaXplVGFyZ2V0KHRhcmdldCk7CiAgaWYgKCF0YXJnZXQpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgdGFyZ2V0OiAnICsgb3JpZ2luYWxUYXJnZXQpOwogIH0KCiAgLyogT3B0aW9ucwogICAqIC0gZXh0cmFIZWFkZXJzCiAgICogLSBwYXJhbXMKICAgKiAtIGNvbnRlbnRUeXBlCiAgICogLSBib2R5CiAgICovCiAgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUob3B0aW9ucyB8fCBPYmplY3QucHJvdG90eXBlKTsKICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKCiAgaWYgKG9wdGlvbnMuY29udGVudFR5cGUpIHsKICAgIHRoaXMuY29udGVudFR5cGUgPSBvcHRpb25zLmNvbnRlbnRUeXBlOwogICAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgdGhpcy5jb250ZW50VHlwZSk7CiAgfQoKICAvLyBCdWlsZCB0aGUgcmVxdWVzdAogIHRoaXMucmVxdWVzdCA9IG5ldyBTSVAuT3V0Z29pbmdSZXF1ZXN0KHRoaXMubWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucGFyYW1zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzKTsKICBpZiAob3B0aW9ucy5ib2R5KSB7CiAgICB0aGlzLmJvZHkgPSBvcHRpb25zLmJvZHk7CiAgICB0aGlzLnJlcXVlc3QuYm9keSA9IHRoaXMuYm9keTsKICB9CgogIC8qIFNldCBvdGhlciBwcm9wZXJ0aWVzIGZyb20gdGhlIHJlcXVlc3QgKi8KICB0aGlzLmxvY2FsSWRlbnRpdHkgPSB0aGlzLnJlcXVlc3QuZnJvbTsKICB0aGlzLnJlbW90ZUlkZW50aXR5ID0gdGhpcy5yZXF1ZXN0LnRvOwoKICB0aGlzLmRhdGEgPSB7fTsKfTsKQ2xpZW50Q29udGV4dC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKTsKCkNsaWVudENvbnRleHQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoKSB7CiAgKG5ldyBTSVAuUmVxdWVzdFNlbmRlcih0aGlzLCB0aGlzLnVhKSkuc2VuZCgpOwogIHJldHVybiB0aGlzOwp9OwoKQ2xpZW50Q29udGV4dC5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgdmFyIGNhbmNlbF9yZWFzb24gPSBTSVAuVXRpbHMuZ2V0Q2FuY2VsUmVhc29uKG9wdGlvbnMuc3RhdHVzX2NvZGUsIG9wdGlvbnMucmVhc29uX3BocmFzZSk7CiAgdGhpcy5yZXF1ZXN0LmNhbmNlbChjYW5jZWxfcmVhc29uKTsKCiAgdGhpcy5lbWl0KCdjYW5jZWwnKTsKfTsKCkNsaWVudENvbnRleHQucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciBjYXVzZSA9IFNJUC5VdGlscy5nZXRSZWFzb25QaHJhc2UocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOwoKICBzd2l0Y2godHJ1ZSkgewogICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UsIGNhdXNlKTsKICAgICAgYnJlYWs7CgogICAgY2FzZSAvXjJbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICBpZih0aGlzLnVhLmFwcGxpY2FudHNbdGhpc10pIHsKICAgICAgICBkZWxldGUgdGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdOwogICAgICB9CiAgICAgIHRoaXMuZW1pdCgnYWNjZXB0ZWQnLCByZXNwb25zZSwgY2F1c2UpOwogICAgICBicmVhazsKCiAgICBkZWZhdWx0OgogICAgICBpZih0aGlzLnVhLmFwcGxpY2FudHNbdGhpc10pIHsKICAgICAgICBkZWxldGUgdGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdOwogICAgICB9CiAgICAgIHRoaXMuZW1pdCgncmVqZWN0ZWQnLCByZXNwb25zZSwgY2F1c2UpOwogICAgICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgIGJyZWFrOwogIH0KCn07CgpDbGllbnRDb250ZXh0LnByb3RvdHlwZS5vblJlcXVlc3RUaW1lb3V0ID0gZnVuY3Rpb24gKCkgewogIHRoaXMuZW1pdCgnZmFpbGVkJywgbnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7Cn07CgpDbGllbnRDb250ZXh0LnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24gKCkgewogIHRoaXMuZW1pdCgnZmFpbGVkJywgbnVsbCwgU0lQLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwp9OwoKU0lQLkNsaWVudENvbnRleHQgPSBDbGllbnRDb250ZXh0Owp9OwoKfSx7fV0sMTA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAZmlsZW92ZXJ2aWV3IFNJUCBDb25zdGFudHMKICovCgovKioKICogU0lQIENvbnN0YW50cy4KICogQGF1Z21lbnRzIFNJUAogKi8KCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG5hbWUsIHZlcnNpb24pIHsKcmV0dXJuIHsKICBVU0VSX0FHRU5UOiBuYW1lICsnLycrIHZlcnNpb24sCgogIC8vIFNJUCBzY2hlbWUKICBTSVA6ICAnc2lwJywKICBTSVBTOiAnc2lwcycsCgogIC8vIEVuZCBhbmQgRmFpbHVyZSBjYXVzZXMKICBjYXVzZXM6IHsKICAgIC8vIEdlbmVyaWMgZXJyb3IgY2F1c2VzCiAgICBDT05ORUNUSU9OX0VSUk9SOiAgICAgICAgICdDb25uZWN0aW9uIEVycm9yJywKICAgIFJFUVVFU1RfVElNRU9VVDogICAgICAgICAgJ1JlcXVlc3QgVGltZW91dCcsCiAgICBTSVBfRkFJTFVSRV9DT0RFOiAgICAgICAgICdTSVAgRmFpbHVyZSBDb2RlJywKICAgIElOVEVSTkFMX0VSUk9SOiAgICAgICAgICAgJ0ludGVybmFsIEVycm9yJywKCiAgICAvLyBTSVAgZXJyb3IgY2F1c2VzCiAgICBCVVNZOiAgICAgICAgICAgICAgICAgICAgICdCdXN5JywKICAgIFJFSkVDVEVEOiAgICAgICAgICAgICAgICAgJ1JlamVjdGVkJywKICAgIFJFRElSRUNURUQ6ICAgICAgICAgICAgICAgJ1JlZGlyZWN0ZWQnLAogICAgVU5BVkFJTEFCTEU6ICAgICAgICAgICAgICAnVW5hdmFpbGFibGUnLAogICAgTk9UX0ZPVU5EOiAgICAgICAgICAgICAgICAnTm90IEZvdW5kJywKICAgIEFERFJFU1NfSU5DT01QTEVURTogICAgICAgJ0FkZHJlc3MgSW5jb21wbGV0ZScsCiAgICBJTkNPTVBBVElCTEVfU0RQOiAgICAgICAgICdJbmNvbXBhdGlibGUgU0RQJywKICAgIEFVVEhFTlRJQ0FUSU9OX0VSUk9SOiAgICAgJ0F1dGhlbnRpY2F0aW9uIEVycm9yJywKICAgIERJQUxPR19FUlJPUjogICAgICAgICAgICAgJ0RpYWxvZyBFcnJvcicsCgogICAgLy8gU2Vzc2lvbiBlcnJvciBjYXVzZXMKICAgIFdFQlJUQ19OT1RfU1VQUE9SVEVEOiAgICAgJ1dlYlJUQyBOb3QgU3VwcG9ydGVkJywKICAgIFdFQlJUQ19FUlJPUjogICAgICAgICAgICAgJ1dlYlJUQyBFcnJvcicsCiAgICBDQU5DRUxFRDogICAgICAgICAgICAgICAgICdDYW5jZWxlZCcsCiAgICBOT19BTlNXRVI6ICAgICAgICAgICAgICAgICdObyBBbnN3ZXInLAogICAgRVhQSVJFUzogICAgICAgICAgICAgICAgICAnRXhwaXJlcycsCiAgICBOT19BQ0s6ICAgICAgICAgICAgICAgICAgICdObyBBQ0snLAogICAgTk9fUFJBQ0s6ICAgICAgICAgICAgICAgICAnTm8gUFJBQ0snLAogICAgVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTOiAnVXNlciBEZW5pZWQgTWVkaWEgQWNjZXNzJywKICAgIEJBRF9NRURJQV9ERVNDUklQVElPTjogICAgJ0JhZCBNZWRpYSBEZXNjcmlwdGlvbicsCiAgICBSVFBfVElNRU9VVDogICAgICAgICAgICAgICdSVFAgVGltZW91dCcKICB9LAoKICBzdXBwb3J0ZWQ6IHsKICAgIFVOU1VQUE9SVEVEOiAgICAgICAgJ25vbmUnLAogICAgU1VQUE9SVEVEOiAgICAgICAgICAnc3VwcG9ydGVkJywKICAgIFJFUVVJUkVEOiAgICAgICAgICAgJ3JlcXVpcmVkJwogIH0sCgogIFNJUF9FUlJPUl9DQVVTRVM6IHsKICAgIFJFRElSRUNURUQ6IFszMDAsMzAxLDMwMiwzMDUsMzgwXSwKICAgIEJVU1k6IFs0ODYsNjAwXSwKICAgIFJFSkVDVEVEOiBbNDAzLDYwM10sCiAgICBOT1RfRk9VTkQ6IFs0MDQsNjA0XSwKICAgIFVOQVZBSUxBQkxFOiBbNDgwLDQxMCw0MDgsNDMwXSwKICAgIEFERFJFU1NfSU5DT01QTEVURTogWzQ4NF0sCiAgICBJTkNPTVBBVElCTEVfU0RQOiBbNDg4LDYwNl0sCiAgICBBVVRIRU5USUNBVElPTl9FUlJPUjpbNDAxLDQwN10KICB9LAoKICAvLyBTSVAgTWV0aG9kcwogIEFDSzogICAgICAgICdBQ0snLAogIEJZRTogICAgICAgICdCWUUnLAogIENBTkNFTDogICAgICdDQU5DRUwnLAogIElORk86ICAgICAgICdJTkZPJywKICBJTlZJVEU6ICAgICAnSU5WSVRFJywKICBNRVNTQUdFOiAgICAnTUVTU0FHRScsCiAgTk9USUZZOiAgICAgJ05PVElGWScsCiAgT1BUSU9OUzogICAgJ09QVElPTlMnLAogIFJFR0lTVEVSOiAgICdSRUdJU1RFUicsCiAgVVBEQVRFOiAgICAgJ1VQREFURScsCiAgU1VCU0NSSUJFOiAgJ1NVQlNDUklCRScsCiAgUkVGRVI6ICAgICAgJ1JFRkVSJywKICBQUkFDSzogICAgICAnUFJBQ0snLAoKICAvKiBTSVAgUmVzcG9uc2UgUmVhc29ucwogICAqIERPQzogaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9zaXAtcGFyYW1ldGVycwogICAqIENvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJzYXRpY2EvT3ZlclNJUC9ibG9iL21hc3Rlci9saWIvb3ZlcnNpcC9zaXAvY29uc3RhbnRzLnJiI0w3CiAgICovCiAgUkVBU09OX1BIUkFTRTogewogICAgMTAwOiAnVHJ5aW5nJywKICAgIDE4MDogJ1JpbmdpbmcnLAogICAgMTgxOiAnQ2FsbCBJcyBCZWluZyBGb3J3YXJkZWQnLAogICAgMTgyOiAnUXVldWVkJywKICAgIDE4MzogJ1Nlc3Npb24gUHJvZ3Jlc3MnLAogICAgMTk5OiAnRWFybHkgRGlhbG9nIFRlcm1pbmF0ZWQnLCAgLy8gZHJhZnQtaWV0Zi1zaXBjb3JlLTE5OQogICAgMjAwOiAnT0snLAogICAgMjAyOiAnQWNjZXB0ZWQnLCAgLy8gUkZDIDMyNjUKICAgIDIwNDogJ05vIE5vdGlmaWNhdGlvbicsICAvL1JGQyA1ODM5CiAgICAzMDA6ICdNdWx0aXBsZSBDaG9pY2VzJywKICAgIDMwMTogJ01vdmVkIFBlcm1hbmVudGx5JywKICAgIDMwMjogJ01vdmVkIFRlbXBvcmFyaWx5JywKICAgIDMwNTogJ1VzZSBQcm94eScsCiAgICAzODA6ICdBbHRlcm5hdGl2ZSBTZXJ2aWNlJywKICAgIDQwMDogJ0JhZCBSZXF1ZXN0JywKICAgIDQwMTogJ1VuYXV0aG9yaXplZCcsCiAgICA0MDI6ICdQYXltZW50IFJlcXVpcmVkJywKICAgIDQwMzogJ0ZvcmJpZGRlbicsCiAgICA0MDQ6ICdOb3QgRm91bmQnLAogICAgNDA1OiAnTWV0aG9kIE5vdCBBbGxvd2VkJywKICAgIDQwNjogJ05vdCBBY2NlcHRhYmxlJywKICAgIDQwNzogJ1Byb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkJywKICAgIDQwODogJ1JlcXVlc3QgVGltZW91dCcsCiAgICA0MTA6ICdHb25lJywKICAgIDQxMjogJ0NvbmRpdGlvbmFsIFJlcXVlc3QgRmFpbGVkJywgIC8vIFJGQyAzOTAzCiAgICA0MTM6ICdSZXF1ZXN0IEVudGl0eSBUb28gTGFyZ2UnLAogICAgNDE0OiAnUmVxdWVzdC1VUkkgVG9vIExvbmcnLAogICAgNDE1OiAnVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZScsCiAgICA0MTY6ICdVbnN1cHBvcnRlZCBVUkkgU2NoZW1lJywKICAgIDQxNzogJ1Vua25vd24gUmVzb3VyY2UtUHJpb3JpdHknLCAgLy8gUkZDIDQ0MTIKICAgIDQyMDogJ0JhZCBFeHRlbnNpb24nLAogICAgNDIxOiAnRXh0ZW5zaW9uIFJlcXVpcmVkJywKICAgIDQyMjogJ1Nlc3Npb24gSW50ZXJ2YWwgVG9vIFNtYWxsJywgIC8vIFJGQyA0MDI4CiAgICA0MjM6ICdJbnRlcnZhbCBUb28gQnJpZWYnLAogICAgNDI4OiAnVXNlIElkZW50aXR5IEhlYWRlcicsICAvLyBSRkMgNDQ3NAogICAgNDI5OiAnUHJvdmlkZSBSZWZlcnJlciBJZGVudGl0eScsICAvLyBSRkMgMzg5MgogICAgNDMwOiAnRmxvdyBGYWlsZWQnLCAgLy8gUkZDIDU2MjYKICAgIDQzMzogJ0Fub255bWl0eSBEaXNhbGxvd2VkJywgIC8vIFJGQyA1MDc5CiAgICA0MzY6ICdCYWQgSWRlbnRpdHktSW5mbycsICAvLyBSRkMgNDQ3NAogICAgNDM3OiAnVW5zdXBwb3J0ZWQgQ2VydGlmaWNhdGUnLCAgLy8gUkZDIDQ3NDQKICAgIDQzODogJ0ludmFsaWQgSWRlbnRpdHkgSGVhZGVyJywgIC8vIFJGQyA0NzQ0CiAgICA0Mzk6ICdGaXJzdCBIb3AgTGFja3MgT3V0Ym91bmQgU3VwcG9ydCcsICAvLyBSRkMgNTYyNgogICAgNDQwOiAnTWF4LUJyZWFkdGggRXhjZWVkZWQnLCAgLy8gUkZDIDUzOTMKICAgIDQ2OTogJ0JhZCBJbmZvIFBhY2thZ2UnLCAgLy8gZHJhZnQtaWV0Zi1zaXBjb3JlLWluZm8tZXZlbnRzCiAgICA0NzA6ICdDb25zZW50IE5lZWRlZCcsICAvLyBSRkMgNTM2MAogICAgNDc4OiAnVW5yZXNvbHZhYmxlIERlc3RpbmF0aW9uJywgIC8vIEN1c3RvbSBjb2RlIGNvcGllZCBmcm9tIEthbWFpbGlvLgogICAgNDgwOiAnVGVtcG9yYXJpbHkgVW5hdmFpbGFibGUnLAogICAgNDgxOiAnQ2FsbC9UcmFuc2FjdGlvbiBEb2VzIE5vdCBFeGlzdCcsCiAgICA0ODI6ICdMb29wIERldGVjdGVkJywKICAgIDQ4MzogJ1RvbyBNYW55IEhvcHMnLAogICAgNDg0OiAnQWRkcmVzcyBJbmNvbXBsZXRlJywKICAgIDQ4NTogJ0FtYmlndW91cycsCiAgICA0ODY6ICdCdXN5IEhlcmUnLAogICAgNDg3OiAnUmVxdWVzdCBUZXJtaW5hdGVkJywKICAgIDQ4ODogJ05vdCBBY2NlcHRhYmxlIEhlcmUnLAogICAgNDg5OiAnQmFkIEV2ZW50JywgIC8vIFJGQyAzMjY1CiAgICA0OTE6ICdSZXF1ZXN0IFBlbmRpbmcnLAogICAgNDkzOiAnVW5kZWNpcGhlcmFibGUnLAogICAgNDk0OiAnU2VjdXJpdHkgQWdyZWVtZW50IFJlcXVpcmVkJywgIC8vIFJGQyAzMzI5CiAgICA1MDA6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InLAogICAgNTAxOiAnTm90IEltcGxlbWVudGVkJywKICAgIDUwMjogJ0JhZCBHYXRld2F5JywKICAgIDUwMzogJ1NlcnZpY2UgVW5hdmFpbGFibGUnLAogICAgNTA0OiAnU2VydmVyIFRpbWUtb3V0JywKICAgIDUwNTogJ1ZlcnNpb24gTm90IFN1cHBvcnRlZCcsCiAgICA1MTM6ICdNZXNzYWdlIFRvbyBMYXJnZScsCiAgICA1ODA6ICdQcmVjb25kaXRpb24gRmFpbHVyZScsICAvLyBSRkMgMzMxMgogICAgNjAwOiAnQnVzeSBFdmVyeXdoZXJlJywKICAgIDYwMzogJ0RlY2xpbmUnLAogICAgNjA0OiAnRG9lcyBOb3QgRXhpc3QgQW55d2hlcmUnLAogICAgNjA2OiAnTm90IEFjY2VwdGFibGUnCiAgfSwKCiAgLyogU0lQIE9wdGlvbiBUYWdzCiAgICogRE9DOiBodHRwOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL3NpcC1wYXJhbWV0ZXJzL3NpcC1wYXJhbWV0ZXJzLnhodG1sI3NpcC1wYXJhbWV0ZXJzLTQKICAgKi8KICBPUFRJT05fVEFHUzogewogICAgJzEwMHJlbCc6ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzI2MgogICAgMTk5OiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNjIyOAogICAgYW5zd2VybW9kZTogICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTM3MwogICAgJ2Vhcmx5LXNlc3Npb24nOiAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzk1OQogICAgZXZlbnRsaXN0OiAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDY2MgogICAgZXhwbGljaXRzdWI6ICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMtaWV0Zi1zaXBjb3JlLXJlZmVyLWV4cGxpY2l0LXN1YnNjcmlwdGlvbi0wMwogICAgJ2Zyb20tY2hhbmdlJzogICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDkxNgogICAgJ2dlb2xvY2F0aW9uLWh0dHAnOiAgICAgICAgIHRydWUsICAvLyBSRkMgNjQ0MgogICAgJ2dlb2xvY2F0aW9uLXNpcCc6ICAgICAgICAgIHRydWUsICAvLyBSRkMgNjQ0MgogICAgZ2luOiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNjE0MAogICAgZ3J1dTogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTYyNwogICAgaGlzdGluZm86ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNzA0NAogICAgaWNlOiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTc2OAogICAgam9pbjogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzkxMQogICAgJ211bHRpcGxlLXJlZmVyJzogICAgICAgICAgIHRydWUsICAvLyBSRkMgNTM2OAogICAgbm9yZWZlcnN1YjogICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDQ4OAogICAgbm9zdWI6ICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMtaWV0Zi1zaXBjb3JlLXJlZmVyLWV4cGxpY2l0LXN1YnNjcmlwdGlvbi0wMwogICAgb3V0Ym91bmQ6ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNTYyNgogICAgcGF0aDogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMyNwogICAgcG9saWN5OiAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNjc5NAogICAgcHJlY29uZGl0aW9uOiAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMxMgogICAgcHJlZjogICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzg0MAogICAgcHJpdmFjeTogICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMyMwogICAgJ3JlY2lwaWVudC1saXN0LWludml0ZSc6ICAgIHRydWUsICAvLyBSRkMgNTM2NgogICAgJ3JlY2lwaWVudC1saXN0LW1lc3NhZ2UnOiAgIHRydWUsICAvLyBSRkMgNTM2NQogICAgJ3JlY2lwaWVudC1saXN0LXN1YnNjcmliZSc6IHRydWUsICAvLyBSRkMgNTM2NwogICAgcmVwbGFjZXM6ICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzg5MQogICAgJ3Jlc291cmNlLXByaW9yaXR5JzogICAgICAgIHRydWUsICAvLyBSRkMgNDQxMgogICAgJ3NkcC1hbmF0JzogICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDA5MgogICAgJ3NlYy1hZ3JlZSc6ICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgMzMyOQogICAgdGRpYWxvZzogICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDUzOAogICAgdGltZXI6ICAgICAgICAgICAgICAgICAgICAgIHRydWUsICAvLyBSRkMgNDAyOAogICAgdXVpOiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUgICAvLyBSRkMgNzQzMwogIH0KfTsKfTsKCn0se31dLDExOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwoKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgSW4tRGlhbG9nIFJlcXVlc3QgU2VuZGVyCiAqLwoKLyoqCiAqIEBhdWdtZW50cyBTSVAuRGlhbG9nCiAqIEBjbGFzcyBDbGFzcyBjcmVhdGluZyBhbiBJbi1kaWFsb2cgcmVxdWVzdCBzZW5kZXIuCiAqIEBwYXJhbSB7U0lQLkRpYWxvZ30gZGlhbG9nCiAqIEBwYXJhbSB7T2JqZWN0fSBhcHBsaWNhbnQKICogQHBhcmFtIHtTSVAuT3V0Z29pbmdSZXF1ZXN0fSByZXF1ZXN0CiAqLwovKioKICogQGZpbGVvdmVydmlldyBpbi1EaWFsb2cgUmVxdWVzdCBTZW5kZXIKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyIFJlcXVlc3RTZW5kZXI7CgpSZXF1ZXN0U2VuZGVyID0gZnVuY3Rpb24oZGlhbG9nLCBhcHBsaWNhbnQsIHJlcXVlc3QpIHsKCiAgdGhpcy5kaWFsb2cgPSBkaWFsb2c7CiAgdGhpcy5hcHBsaWNhbnQgPSBhcHBsaWNhbnQ7CiAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDsKCiAgLy8gUkZDMzI2MSAxNC4xIE1vZGlmeWluZyBhbiBFeGlzdGluZyBTZXNzaW9uLiBVQUMgQmVoYXZpb3IuCiAgdGhpcy5yZWF0dGVtcHQgPSBmYWxzZTsKICB0aGlzLnJlYXR0ZW1wdFRpbWVyID0gbnVsbDsKfTsKClJlcXVlc3RTZW5kZXIucHJvdG90eXBlID0gewogIHNlbmQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICByZXF1ZXN0X3NlbmRlciA9IG5ldyBTSVAuUmVxdWVzdFNlbmRlcih0aGlzLCB0aGlzLmRpYWxvZy5vd25lci51YSk7CgogICAgICByZXF1ZXN0X3NlbmRlci5zZW5kKCk7CgogICAgLy8gUkZDMzI2MSAxNC4yIE1vZGlmeWluZyBhbiBFeGlzdGluZyBTZXNzaW9uIC1VQUMgQkVIQVZJT1ItCiAgICBpZiAodGhpcy5yZXF1ZXN0Lm1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFICYmIHJlcXVlc3Rfc2VuZGVyLmNsaWVudFRyYW5zYWN0aW9uLnN0YXRlICE9PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgdGhpcy5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHkgPSB0cnVlOwogICAgICByZXF1ZXN0X3NlbmRlci5jbGllbnRUcmFuc2FjdGlvbi5vbignc3RhdGVDaGFuZ2VkJywgZnVuY3Rpb24gc3RhdGVDaGFuZ2VkKCl7CiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNJUC5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQUNDRVBURUQgfHwKICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gU0lQLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19DT01QTEVURUQgfHwKICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gU0lQLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19URVJNSU5BVEVEKSB7CgogICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcignc3RhdGVDaGFuZ2VkJywgc3RhdGVDaGFuZ2VkKTsKICAgICAgICAgIHNlbGYuZGlhbG9nLnVhY19wZW5kaW5nX3JlcGx5ID0gZmFsc2U7CgogICAgICAgICAgaWYgKHNlbGYuZGlhbG9nLnVhc19wZW5kaW5nX3JlcGx5ID09PSBmYWxzZSkgewogICAgICAgICAgICBzZWxmLmRpYWxvZy5vd25lci5vblJlYWR5VG9SZWludml0ZSgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmFwcGxpY2FudC5vblJlcXVlc3RUaW1lb3V0KCk7CiAgfSwKCiAgb25UcmFuc3BvcnRFcnJvcjogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmFwcGxpY2FudC5vblRyYW5zcG9ydEVycm9yKCk7CiAgfSwKCiAgcmVjZWl2ZVJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIC8vIFJGQzMyNjEgMTIuMi4xLjIgNDA4IG9yIDQ4MSBpcyByZWNlaXZlZCBmb3IgYSByZXF1ZXN0IHdpdGhpbiBhIGRpYWxvZy4KICAgIGlmIChyZXNwb25zZS5zdGF0dXNfY29kZSA9PT0gNDA4IHx8IHJlc3BvbnNlLnN0YXR1c19jb2RlID09PSA0ODEpIHsKICAgICAgdGhpcy5hcHBsaWNhbnQub25EaWFsb2dFcnJvcihyZXNwb25zZSk7CiAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLm1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09PSA0OTEpIHsKICAgICAgaWYgKHRoaXMucmVhdHRlbXB0KSB7CiAgICAgICAgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlcXVlc3QuY3NlcS52YWx1ZSA9IHRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSArPSAxOwogICAgICAgIHRoaXMucmVhdHRlbXB0VGltZXIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKHNlbGYuYXBwbGljYW50Lm93bmVyLnN0YXR1cyAhPT0gU0lQLlNlc3Npb24uQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICAgICAgICAgIHNlbGYucmVhdHRlbXB0ID0gdHJ1ZTsKICAgICAgICAgICAgICBzZWxmLnJlcXVlc3Rfc2VuZGVyLnNlbmQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHRoaXMuZ2V0UmVhdHRlbXB0VGltZW91dCgpCiAgICAgICAgKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgIH0KICB9Cn07CgpyZXR1cm4gUmVxdWVzdFNlbmRlcjsKfTsKCn0se31dLDEyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBTSVAgRGlhbG9nCiAqLwoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICogQGNsYXNzIENsYXNzIGNyZWF0aW5nIGEgU0lQIGRpYWxvZy4KICogQHBhcmFtIHtTSVAuUlRDU2Vzc2lvbn0gb3duZXIKICogQHBhcmFtIHtTSVAuSW5jb21pbmdSZXF1ZXN0fFNJUC5JbmNvbWluZ1Jlc3BvbnNlfSBtZXNzYWdlCiAqIEBwYXJhbSB7RW51bX0gdHlwZSBVQUMgLyBVQVMKICogQHBhcmFtIHtFbnVtfSBzdGF0ZSBTSVAuRGlhbG9nLkMuU1RBVFVTX0VBUkxZIC8gU0lQLkRpYWxvZy5DLlNUQVRVU19DT05GSVJNRUQKICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewoKdmFyIFJlcXVlc3RTZW5kZXIgPSByZXF1aXJlKCcuL0RpYWxvZy9SZXF1ZXN0U2VuZGVyJykoU0lQKTsKCnZhciBEaWFsb2csCiAgQyA9IHsKICAgIC8vIERpYWxvZyBzdGF0ZXMKICAgIFNUQVRVU19FQVJMWTogICAgICAgMSwKICAgIFNUQVRVU19DT05GSVJNRUQ6ICAgMgogIH07CgovLyBSRkMgMzI2MSAxMi4xCkRpYWxvZyA9IGZ1bmN0aW9uKG93bmVyLCBtZXNzYWdlLCB0eXBlLCBzdGF0ZSkgewogIHZhciBjb250YWN0OwoKICB0aGlzLnVhY19wZW5kaW5nX3JlcGx5ID0gZmFsc2U7CiAgdGhpcy51YXNfcGVuZGluZ19yZXBseSA9IGZhbHNlOwoKICBpZighbWVzc2FnZS5oYXNIZWFkZXIoJ2NvbnRhY3QnKSkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6ICd1bmFibGUgdG8gY3JlYXRlIGEgRGlhbG9nIHdpdGhvdXQgQ29udGFjdCBoZWFkZXIgZmllbGQnCiAgICB9OwogIH0KCiAgaWYobWVzc2FnZSBpbnN0YW5jZW9mIFNJUC5JbmNvbWluZ1Jlc3BvbnNlKSB7CiAgICBzdGF0ZSA9IChtZXNzYWdlLnN0YXR1c19jb2RlIDwgMjAwKSA/IEMuU1RBVFVTX0VBUkxZIDogQy5TVEFUVVNfQ09ORklSTUVEOwogIH0gZWxzZSB7CiAgICAvLyBDcmVhdGUgY29uZmlybWVkIGRpYWxvZyBpZiBzdGF0ZSBpcyBub3QgZGVmaW5lZAogICAgc3RhdGUgPSBzdGF0ZSB8fCBDLlNUQVRVU19DT05GSVJNRUQ7CiAgfQoKICBjb250YWN0ID0gbWVzc2FnZS5wYXJzZUhlYWRlcignY29udGFjdCcpOwoKICAvLyBSRkMgMzI2MSAxMi4xLjEKICBpZih0eXBlID09PSAnVUFTJykgewogICAgdGhpcy5pZCA9IHsKICAgICAgY2FsbF9pZDogbWVzc2FnZS5jYWxsX2lkLAogICAgICBsb2NhbF90YWc6IG1lc3NhZ2UudG9fdGFnLAogICAgICByZW1vdGVfdGFnOiBtZXNzYWdlLmZyb21fdGFnLAogICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbF9pZCArIHRoaXMubG9jYWxfdGFnICsgdGhpcy5yZW1vdGVfdGFnOwogICAgICB9CiAgICB9OwogICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgdGhpcy5yZW1vdGVfc2VxbnVtID0gbWVzc2FnZS5jc2VxOwogICAgdGhpcy5sb2NhbF91cmkgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCd0bycpLnVyaTsKICAgIHRoaXMucmVtb3RlX3VyaSA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ2Zyb20nKS51cmk7CiAgICB0aGlzLnJlbW90ZV90YXJnZXQgPSBjb250YWN0LnVyaTsKICAgIHRoaXMucm91dGVfc2V0ID0gbWVzc2FnZS5nZXRIZWFkZXJzKCdyZWNvcmQtcm91dGUnKTsKICAgIHRoaXMuaW52aXRlX3NlcW51bSA9IG1lc3NhZ2UuY3NlcTsKICAgIHRoaXMubG9jYWxfc2VxbnVtID0gbWVzc2FnZS5jc2VxOwogIH0KICAvLyBSRkMgMzI2MSAxMi4xLjIKICBlbHNlIGlmKHR5cGUgPT09ICdVQUMnKSB7CiAgICB0aGlzLmlkID0gewogICAgICBjYWxsX2lkOiBtZXNzYWdlLmNhbGxfaWQsCiAgICAgIGxvY2FsX3RhZzogbWVzc2FnZS5mcm9tX3RhZywKICAgICAgcmVtb3RlX3RhZzogbWVzc2FnZS50b190YWcsCiAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcy5jYWxsX2lkICsgdGhpcy5sb2NhbF90YWcgKyB0aGlzLnJlbW90ZV90YWc7CiAgICAgIH0KICAgIH07CiAgICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgICB0aGlzLmludml0ZV9zZXFudW0gPSBtZXNzYWdlLmNzZXE7CiAgICB0aGlzLmxvY2FsX3NlcW51bSA9IG1lc3NhZ2UuY3NlcTsKICAgIHRoaXMubG9jYWxfdXJpID0gbWVzc2FnZS5wYXJzZUhlYWRlcignZnJvbScpLnVyaTsKICAgIHRoaXMucHJhY2tlZCA9IFtdOwogICAgdGhpcy5yZW1vdGVfdXJpID0gbWVzc2FnZS5wYXJzZUhlYWRlcigndG8nKS51cmk7CiAgICB0aGlzLnJlbW90ZV90YXJnZXQgPSBjb250YWN0LnVyaTsKICAgIHRoaXMucm91dGVfc2V0ID0gbWVzc2FnZS5nZXRIZWFkZXJzKCdyZWNvcmQtcm91dGUnKS5yZXZlcnNlKCk7CgogICAgLy9SRU5ERVJCT0RZCiAgICBpZiAodGhpcy5zdGF0ZSA9PT0gQy5TVEFUVVNfRUFSTFkgJiYgKCFvd25lci5oYXNPZmZlcikpIHsKICAgICAgdGhpcy5tZWRpYUhhbmRsZXIgPSBvd25lci5tZWRpYUhhbmRsZXJGYWN0b3J5KG93bmVyKTsKICAgIH0KICB9CgogIHRoaXMubG9nZ2VyID0gb3duZXIudWEuZ2V0TG9nZ2VyKCdzaXAuZGlhbG9nJywgdGhpcy5pZC50b1N0cmluZygpKTsKICB0aGlzLm93bmVyID0gb3duZXI7CiAgb3duZXIudWEuZGlhbG9nc1t0aGlzLmlkLnRvU3RyaW5nKCldID0gdGhpczsKICB0aGlzLmxvZ2dlci5sb2coJ25ldyAnICsgdHlwZSArICcgZGlhbG9nIGNyZWF0ZWQgd2l0aCBzdGF0dXMgJyArICh0aGlzLnN0YXRlID09PSBDLlNUQVRVU19FQVJMWSA/ICdFQVJMWSc6ICdDT05GSVJNRUQnKSk7CiAgb3duZXIuZW1pdCgnZGlhbG9nJywgdGhpcyk7Cn07CgpEaWFsb2cucHJvdG90eXBlID0gewogIC8qKgogICAqIEBwYXJhbSB7U0lQLkluY29taW5nTWVzc2FnZX0gbWVzc2FnZQogICAqIEBwYXJhbSB7RW51bX0gVUFDL1VBUwogICAqLwogIHVwZGF0ZTogZnVuY3Rpb24obWVzc2FnZSwgdHlwZSkgewogICAgdGhpcy5zdGF0ZSA9IEMuU1RBVFVTX0NPTkZJUk1FRDsKCiAgICB0aGlzLmxvZ2dlci5sb2coJ2RpYWxvZyAnKyB0aGlzLmlkLnRvU3RyaW5nKCkgKycgIGNoYW5nZWQgdG8gQ09ORklSTUVEIHN0YXRlJyk7CgogICAgaWYodHlwZSA9PT0gJ1VBQycpIHsKICAgICAgLy8gUkZDIDMyNjEgMTMuMi4yLjQKICAgICAgdGhpcy5yb3V0ZV9zZXQgPSBtZXNzYWdlLmdldEhlYWRlcnMoJ3JlY29yZC1yb3V0ZScpLnJldmVyc2UoKTsKICAgIH0KICB9LAoKICB0ZXJtaW5hdGU6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5sb2dnZXIubG9nKCdkaWFsb2cgJyArIHRoaXMuaWQudG9TdHJpbmcoKSArICcgZGVsZXRlZCcpOwogICAgaWYgKHRoaXMubWVkaWFIYW5kbGVyICYmIHRoaXMuc3RhdGUgIT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aGlzLm1lZGlhSGFuZGxlci5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpOwogICAgfQogICAgZGVsZXRlIHRoaXMub3duZXIudWEuZGlhbG9nc1t0aGlzLmlkLnRvU3RyaW5nKCldOwogIH0sCgogIC8qKgogICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCByZXF1ZXN0IG1ldGhvZAogICogQHBhcmFtIHtPYmplY3R9IGV4dHJhSGVhZGVycyBleHRyYSBoZWFkZXJzCiAgKiBAcmV0dXJucyB7U0lQLk91dGdvaW5nUmVxdWVzdH0KICAqLwoKICAvLyBSRkMgMzI2MSAxMi4yLjEuMQogIGNyZWF0ZVJlcXVlc3Q6IGZ1bmN0aW9uKG1ldGhvZCwgZXh0cmFIZWFkZXJzLCBib2R5KSB7CiAgICB2YXIgY3NlcSwgcmVxdWVzdDsKICAgIGV4dHJhSGVhZGVycyA9IChleHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CgogICAgaWYoIXRoaXMubG9jYWxfc2VxbnVtKSB7IHRoaXMubG9jYWxfc2VxbnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApOyB9CgogICAgY3NlcSA9IChtZXRob2QgPT09IFNJUC5DLkNBTkNFTCB8fCBtZXRob2QgPT09IFNJUC5DLkFDSykgPyB0aGlzLmludml0ZV9zZXFudW0gOiB0aGlzLmxvY2FsX3NlcW51bSArPSAxOwoKICAgIHJlcXVlc3QgPSBuZXcgU0lQLk91dGdvaW5nUmVxdWVzdCgKICAgICAgbWV0aG9kLAogICAgICB0aGlzLnJlbW90ZV90YXJnZXQsCiAgICAgIHRoaXMub3duZXIudWEsIHsKICAgICAgICAnY3NlcSc6IGNzZXEsCiAgICAgICAgJ2NhbGxfaWQnOiB0aGlzLmlkLmNhbGxfaWQsCiAgICAgICAgJ2Zyb21fdXJpJzogdGhpcy5sb2NhbF91cmksCiAgICAgICAgJ2Zyb21fdGFnJzogdGhpcy5pZC5sb2NhbF90YWcsCiAgICAgICAgJ3RvX3VyaSc6IHRoaXMucmVtb3RlX3VyaSwKICAgICAgICAndG9fdGFnJzogdGhpcy5pZC5yZW1vdGVfdGFnLAogICAgICAgICdyb3V0ZV9zZXQnOiB0aGlzLnJvdXRlX3NldAogICAgICB9LCBleHRyYUhlYWRlcnMsIGJvZHkpOwoKICAgIHJlcXVlc3QuZGlhbG9nID0gdGhpczsKCiAgICByZXR1cm4gcmVxdWVzdDsKICB9LAoKICAvKioKICAqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdAogICogQHJldHVybnMge0Jvb2xlYW59CiAgKi8KCiAgLy8gUkZDIDMyNjEgMTIuMi4yCiAgY2hlY2tJbkRpYWxvZ1JlcXVlc3Q6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICBpZighdGhpcy5yZW1vdGVfc2VxbnVtKSB7CiAgICAgIHRoaXMucmVtb3RlX3NlcW51bSA9IHJlcXVlc3QuY3NlcTsKICAgIH0gZWxzZSBpZihyZXF1ZXN0LmNzZXEgPCB0aGlzLnJlbW90ZV9zZXFudW0pIHsKICAgICAgICAvL0RvIG5vdCB0cnkgdG8gcmVwbHkgdG8gYW4gQUNLIHJlcXVlc3QuCiAgICAgICAgaWYgKHJlcXVlc3QubWV0aG9kICE9PSBTSVAuQy5BQ0spIHsKICAgICAgICAgIHJlcXVlc3QucmVwbHkoNTAwKTsKICAgICAgICB9CiAgICAgICAgaWYgKHJlcXVlc3QuY3NlcSA9PT0gdGhpcy5pbnZpdGVfc2VxbnVtKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSBlbHNlIGlmKHJlcXVlc3QuY3NlcSA+IHRoaXMucmVtb3RlX3NlcW51bSkgewogICAgICB0aGlzLnJlbW90ZV9zZXFudW0gPSByZXF1ZXN0LmNzZXE7CiAgICB9CgogICAgc3dpdGNoKHJlcXVlc3QubWV0aG9kKSB7CiAgICAgIC8vIFJGQzMyNjEgMTQuMiBNb2RpZnlpbmcgYW4gRXhpc3RpbmcgU2Vzc2lvbiAtVUFTIEJFSEFWSU9SLQogICAgICBjYXNlIFNJUC5DLklOVklURToKICAgICAgICBpZiAodGhpcy51YWNfcGVuZGluZ19yZXBseSA9PT0gdHJ1ZSkgewogICAgICAgICAgcmVxdWVzdC5yZXBseSg0OTEpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy51YXNfcGVuZGluZ19yZXBseSA9PT0gdHJ1ZSkgewogICAgICAgICAgdmFyIHJldHJ5QWZ0ZXIgPSAoTWF0aC5yYW5kb20oKSAqIDEwIHwgMCkgKyAxOwogICAgICAgICAgcmVxdWVzdC5yZXBseSg1MDAsIG51bGwsIFsnUmV0cnktQWZ0ZXI6JyArIHJldHJ5QWZ0ZXJdKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy51YXNfcGVuZGluZ19yZXBseSA9IHRydWU7CiAgICAgICAgICByZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbi5vbignc3RhdGVDaGFuZ2VkJywgZnVuY3Rpb24gc3RhdGVDaGFuZ2VkKCl7CiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX0FDQ0VQVEVEIHx8CiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX0NPTVBMRVRFRCB8fAogICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gU0lQLlRyYW5zYWN0aW9ucy5DLlNUQVRVU19URVJNSU5BVEVEKSB7CgogICAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ3N0YXRlQ2hhbmdlZCcsIHN0YXRlQ2hhbmdlZCk7CiAgICAgICAgICAgICAgc2VsZi51YXNfcGVuZGluZ19yZXBseSA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAoc2VsZi51YWNfcGVuZGluZ19yZXBseSA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgIHNlbGYub3duZXIub25SZWFkeVRvUmVpbnZpdGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gUkZDMzI2MSAxMi4yLjIgUmVwbGFjZSB0aGUgZGlhbG9nYHMgcmVtb3RlIHRhcmdldCBVUkkgaWYgdGhlIHJlcXVlc3QgaXMgYWNjZXB0ZWQKICAgICAgICBpZihyZXF1ZXN0Lmhhc0hlYWRlcignY29udGFjdCcpKSB7CiAgICAgICAgICByZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbi5vbignc3RhdGVDaGFuZ2VkJywgZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IFNJUC5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfQUNDRVBURUQpIHsKICAgICAgICAgICAgICBzZWxmLnJlbW90ZV90YXJnZXQgPSByZXF1ZXN0LnBhcnNlSGVhZGVyKCdjb250YWN0JykudXJpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU0lQLkMuTk9USUZZOgogICAgICAgIC8vIFJGQzY2NjUgMy4yIFJlcGxhY2UgdGhlIGRpYWxvZ2BzIHJlbW90ZSB0YXJnZXQgVVJJIGlmIHRoZSByZXF1ZXN0IGlzIGFjY2VwdGVkCiAgICAgICAgaWYocmVxdWVzdC5oYXNIZWFkZXIoJ2NvbnRhY3QnKSkgewogICAgICAgICAgcmVxdWVzdC5zZXJ2ZXJfdHJhbnNhY3Rpb24ub24oJ3N0YXRlQ2hhbmdlZCcsIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX0NPTVBMRVRFRCkgewogICAgICAgICAgICAgIHNlbGYucmVtb3RlX3RhcmdldCA9IHJlcXVlc3QucGFyc2VIZWFkZXIoJ2NvbnRhY3QnKS51cmk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBzZW5kUmVxdWVzdDogZnVuY3Rpb24oYXBwbGljYW50LCBtZXRob2QsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIHZhcgogICAgICBleHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCksCiAgICAgIGJvZHkgPSBvcHRpb25zLmJvZHkgfHwgbnVsbCwKICAgICAgcmVxdWVzdCA9IHRoaXMuY3JlYXRlUmVxdWVzdChtZXRob2QsIGV4dHJhSGVhZGVycywgYm9keSksCiAgICAgIHJlcXVlc3Rfc2VuZGVyID0gbmV3IFJlcXVlc3RTZW5kZXIodGhpcywgYXBwbGljYW50LCByZXF1ZXN0KTsKCiAgICByZXF1ZXN0X3NlbmRlci5zZW5kKCk7CgogICAgcmV0dXJuIHJlcXVlc3Q7CiAgfSwKCiAgLyoqCiAgKiBAcGFyYW0ge1NJUC5JbmNvbWluZ1JlcXVlc3R9IHJlcXVlc3QKICAqLwogIHJlY2VpdmVSZXF1ZXN0OiBmdW5jdGlvbihyZXF1ZXN0KSB7CiAgICAvL0NoZWNrIGluLWRpYWxvZyByZXF1ZXN0CiAgICBpZighdGhpcy5jaGVja0luRGlhbG9nUmVxdWVzdChyZXF1ZXN0KSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5vd25lci5yZWNlaXZlUmVxdWVzdChyZXF1ZXN0KTsKICB9Cn07CgpEaWFsb2cuQyA9IEM7ClNJUC5EaWFsb2cgPSBEaWFsb2c7Cn07Cgp9LHsiLi9EaWFsb2cvUmVxdWVzdFNlbmRlciI6MTF9XSwxMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKCi8qKgogKiBAZmlsZW92ZXJ2aWV3IFNJUCBEaWdlc3QgQXV0aGVudGljYXRpb24KICovCgovKioKICogU0lQIERpZ2VzdCBBdXRoZW50aWNhdGlvbi4KICogQGF1Z21lbnRzIFNJUC4KICogQGZ1bmN0aW9uIERpZ2VzdCBBdXRoZW50aWNhdGlvbgogKiBAcGFyYW0ge1NJUC5VQX0gdWEKICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFV0aWxzKSB7CnZhciBEaWdlc3RBdXRoZW50aWNhdGlvbjsKCkRpZ2VzdEF1dGhlbnRpY2F0aW9uID0gZnVuY3Rpb24odWEpIHsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwanMuZGlnZXN0YXV0aGVudGljYXRpb24nKTsKICB0aGlzLnVzZXJuYW1lID0gdWEuY29uZmlndXJhdGlvbi5hdXRob3JpemF0aW9uVXNlcjsKICB0aGlzLnBhc3N3b3JkID0gdWEuY29uZmlndXJhdGlvbi5wYXNzd29yZDsKICB0aGlzLmNub25jZSA9IG51bGw7CiAgdGhpcy5uYyA9IDA7CiAgdGhpcy5uY0hleCA9ICcwMDAwMDAwMCc7CiAgdGhpcy5yZXNwb25zZSA9IG51bGw7Cn07CgoKLyoqCiogUGVyZm9ybXMgRGlnZXN0IGF1dGhlbnRpY2F0aW9uIGdpdmVuIGEgU0lQIHJlcXVlc3QgYW5kIHRoZSBjaGFsbGVuZ2UKKiByZWNlaXZlZCBpbiBhIHJlc3BvbnNlIHRvIHRoYXQgcmVxdWVzdC4KKiBSZXR1cm5zIHRydWUgaWYgY3JlZGVudGlhbHMgd2VyZSBzdWNjZXNzZnVsbHkgZ2VuZXJhdGVkLCBmYWxzZSBvdGhlcndpc2UuCioKKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKKiBAcGFyYW0ge09iamVjdH0gY2hhbGxlbmdlCiovCkRpZ2VzdEF1dGhlbnRpY2F0aW9uLnByb3RvdHlwZS5hdXRoZW50aWNhdGUgPSBmdW5jdGlvbihyZXF1ZXN0LCBjaGFsbGVuZ2UpIHsKICAvLyBJbnNwZWN0IGFuZCB2YWxpZGF0ZSB0aGUgY2hhbGxlbmdlLgoKICB0aGlzLmFsZ29yaXRobSA9IGNoYWxsZW5nZS5hbGdvcml0aG07CiAgdGhpcy5yZWFsbSA9IGNoYWxsZW5nZS5yZWFsbTsKICB0aGlzLm5vbmNlID0gY2hhbGxlbmdlLm5vbmNlOwogIHRoaXMub3BhcXVlID0gY2hhbGxlbmdlLm9wYXF1ZTsKICB0aGlzLnN0YWxlID0gY2hhbGxlbmdlLnN0YWxlOwoKICBpZiAodGhpcy5hbGdvcml0aG0pIHsKICAgIGlmICh0aGlzLmFsZ29yaXRobSAhPT0gJ01ENScpIHsKICAgICAgdGhpcy5sb2dnZXIud2FybignY2hhbGxlbmdlIHdpdGggRGlnZXN0IGFsZ29yaXRobSBkaWZmZXJlbnQgdGhhbiAiTUQ1IiwgYXV0aGVudGljYXRpb24gYWJvcnRlZCcpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSBlbHNlIHsKICAgIHRoaXMuYWxnb3JpdGhtID0gJ01ENSc7CiAgfQoKICBpZiAoISB0aGlzLnJlYWxtKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCdjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3QgcmVhbG0sIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQnKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmICghIHRoaXMubm9uY2UpIHsKICAgIHRoaXMubG9nZ2VyLndhcm4oJ2NoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCBub25jZSwgYXV0aGVudGljYXRpb24gYWJvcnRlZCcpOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgLy8gJ3FvcCcgY2FuIGNvbnRhaW4gYSBsaXN0IG9mIHZhbHVlcyAoQXJyYXkpLiBMZXQncyBjaG9vc2UganVzdCBvbmUuCiAgaWYgKGNoYWxsZW5nZS5xb3ApIHsKICAgIGlmIChjaGFsbGVuZ2UucW9wLmluZGV4T2YoJ2F1dGgnKSA+IC0xKSB7CiAgICAgIHRoaXMucW9wID0gJ2F1dGgnOwogICAgfSBlbHNlIGlmIChjaGFsbGVuZ2UucW9wLmluZGV4T2YoJ2F1dGgtaW50JykgPiAtMSkgewogICAgICB0aGlzLnFvcCA9ICdhdXRoLWludCc7CiAgICB9IGVsc2UgewogICAgICAvLyBPdGhlcndpc2UgJ3FvcCcgaXMgcHJlc2VudCBidXQgZG9lcyBub3QgY29udGFpbiAnYXV0aCcgb3IgJ2F1dGgtaW50Jywgc28gYWJvcnQgaGVyZS4KICAgICAgdGhpcy5sb2dnZXIud2FybignY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IHFvcCBkaWZmZXJlbnQgdGhhbiAiYXV0aCIgb3IgImF1dGgtaW50IiwgYXV0aGVudGljYXRpb24gYWJvcnRlZCcpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSBlbHNlIHsKICAgIHRoaXMucW9wID0gbnVsbDsKICB9CgogIC8vIEZpbGwgb3RoZXIgYXR0cmlidXRlcy4KCiAgdGhpcy5tZXRob2QgPSByZXF1ZXN0Lm1ldGhvZDsKICB0aGlzLnVyaSA9IHJlcXVlc3QucnVyaTsKICB0aGlzLmNub25jZSA9IFV0aWxzLmNyZWF0ZVJhbmRvbVRva2VuKDEyKTsKICB0aGlzLm5jICs9IDE7CiAgdGhpcy51cGRhdGVOY0hleCgpOwoKICAvLyBuYy12YWx1ZSA9IDhMSEVYLiBNYXggdmFsdWUgPSAnRkZGRkZGRkYnLgogIGlmICh0aGlzLm5jID09PSA0Mjk0OTY3Mjk2KSB7CiAgICB0aGlzLm5jID0gMTsKICAgIHRoaXMubmNIZXggPSAnMDAwMDAwMDEnOwogIH0KCiAgLy8gQ2FsY3VsYXRlIHRoZSBEaWdlc3QgInJlc3BvbnNlIiB2YWx1ZS4KICB0aGlzLmNhbGN1bGF0ZVJlc3BvbnNlKCk7CgogIHJldHVybiB0cnVlOwp9OwoKCi8qKgoqIEdlbmVyYXRlIERpZ2VzdCAncmVzcG9uc2UnIHZhbHVlLgoqIEBwcml2YXRlCiovCkRpZ2VzdEF1dGhlbnRpY2F0aW9uLnByb3RvdHlwZS5jYWxjdWxhdGVSZXNwb25zZSA9IGZ1bmN0aW9uKCkgewogIHZhciBoYTEsIGhhMjsKCiAgLy8gSEExID0gTUQ1KEExKSA9IE1ENSh1c2VybmFtZTpyZWFsbTpwYXNzd29yZCkKICBoYTEgPSBVdGlscy5jYWxjdWxhdGVNRDUodGhpcy51c2VybmFtZSArICI6IiArIHRoaXMucmVhbG0gKyAiOiIgKyB0aGlzLnBhc3N3b3JkKTsKCiAgaWYgKHRoaXMucW9wID09PSAnYXV0aCcpIHsKICAgIC8vIEhBMiA9IE1ENShBMikgPSBNRDUobWV0aG9kOmRpZ2VzdFVSSSkKICAgIGhhMiA9IFV0aWxzLmNhbGN1bGF0ZU1ENSh0aGlzLm1ldGhvZCArICI6IiArIHRoaXMudXJpKTsKICAgIC8vIHJlc3BvbnNlID0gTUQ1KEhBMTpub25jZTpub25jZUNvdW50OmNyZWRlbnRpYWxzTm9uY2U6cW9wOkhBMikKICAgIHRoaXMucmVzcG9uc2UgPSBVdGlscy5jYWxjdWxhdGVNRDUoaGExICsgIjoiICsgdGhpcy5ub25jZSArICI6IiArIHRoaXMubmNIZXggKyAiOiIgKyB0aGlzLmNub25jZSArICI6YXV0aDoiICsgaGEyKTsKCiAgfSBlbHNlIGlmICh0aGlzLnFvcCA9PT0gJ2F1dGgtaW50JykgewogICAgLy8gSEEyID0gTUQ1KEEyKSA9IE1ENShtZXRob2Q6ZGlnZXN0VVJJOk1ENShlbnRpdHlCb2R5KSkKICAgIGhhMiA9IFV0aWxzLmNhbGN1bGF0ZU1ENSh0aGlzLm1ldGhvZCArICI6IiArIHRoaXMudXJpICsgIjoiICsgVXRpbHMuY2FsY3VsYXRlTUQ1KHRoaXMuYm9keSA/IHRoaXMuYm9keSA6ICIiKSk7CiAgICAvLyByZXNwb25zZSA9IE1ENShIQTE6bm9uY2U6bm9uY2VDb3VudDpjcmVkZW50aWFsc05vbmNlOnFvcDpIQTIpCiAgICB0aGlzLnJlc3BvbnNlID0gVXRpbHMuY2FsY3VsYXRlTUQ1KGhhMSArICI6IiArIHRoaXMubm9uY2UgKyAiOiIgKyB0aGlzLm5jSGV4ICsgIjoiICsgdGhpcy5jbm9uY2UgKyAiOmF1dGgtaW50OiIgKyBoYTIpOwoKICB9IGVsc2UgaWYgKHRoaXMucW9wID09PSBudWxsKSB7CiAgICAvLyBIQTIgPSBNRDUoQTIpID0gTUQ1KG1ldGhvZDpkaWdlc3RVUkkpCiAgICBoYTIgPSBVdGlscy5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QgKyAiOiIgKyB0aGlzLnVyaSk7CiAgICAvLyByZXNwb25zZSA9IE1ENShIQTE6bm9uY2U6SEEyKQogICAgdGhpcy5yZXNwb25zZSA9IFV0aWxzLmNhbGN1bGF0ZU1ENShoYTEgKyAiOiIgKyB0aGlzLm5vbmNlICsgIjoiICsgaGEyKTsKICB9Cn07CgoKLyoqCiogUmV0dXJuIHRoZSBQcm94eS1BdXRob3JpemF0aW9uIG9yIFdXVy1BdXRob3JpemF0aW9uIGhlYWRlciB2YWx1ZS4KKi8KRGlnZXN0QXV0aGVudGljYXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7CiAgdmFyIGF1dGhfcGFyYW1zID0gW107CgogIGlmICghIHRoaXMucmVzcG9uc2UpIHsKICAgIHRocm93IG5ldyBFcnJvcigncmVzcG9uc2UgZmllbGQgZG9lcyBub3QgZXhpc3QsIGNhbm5vdCBnZW5lcmF0ZSBBdXRob3JpemF0aW9uIGhlYWRlcicpOwogIH0KCiAgYXV0aF9wYXJhbXMucHVzaCgnYWxnb3JpdGhtPScgKyB0aGlzLmFsZ29yaXRobSk7CiAgYXV0aF9wYXJhbXMucHVzaCgndXNlcm5hbWU9IicgKyB0aGlzLnVzZXJuYW1lICsgJyInKTsKICBhdXRoX3BhcmFtcy5wdXNoKCdyZWFsbT0iJyArIHRoaXMucmVhbG0gKyAnIicpOwogIGF1dGhfcGFyYW1zLnB1c2goJ25vbmNlPSInICsgdGhpcy5ub25jZSArICciJyk7CiAgYXV0aF9wYXJhbXMucHVzaCgndXJpPSInICsgdGhpcy51cmkgKyAnIicpOwogIGF1dGhfcGFyYW1zLnB1c2goJ3Jlc3BvbnNlPSInICsgdGhpcy5yZXNwb25zZSArICciJyk7CiAgaWYgKHRoaXMub3BhcXVlKSB7CiAgICBhdXRoX3BhcmFtcy5wdXNoKCdvcGFxdWU9IicgKyB0aGlzLm9wYXF1ZSArICciJyk7CiAgfQogIGlmICh0aGlzLnFvcCkgewogICAgYXV0aF9wYXJhbXMucHVzaCgncW9wPScgKyB0aGlzLnFvcCk7CiAgICBhdXRoX3BhcmFtcy5wdXNoKCdjbm9uY2U9IicgKyB0aGlzLmNub25jZSArICciJyk7CiAgICBhdXRoX3BhcmFtcy5wdXNoKCduYz0nICsgdGhpcy5uY0hleCk7CiAgfQoKICByZXR1cm4gJ0RpZ2VzdCAnICsgYXV0aF9wYXJhbXMuam9pbignLCAnKTsKfTsKCgovKioKKiBHZW5lcmF0ZSB0aGUgJ25jJyB2YWx1ZSBhcyByZXF1aXJlZCBieSBEaWdlc3QgaW4gdGhpcy5uY0hleCBieSByZWFkaW5nIHRoaXMubmMuCiogQHByaXZhdGUKKi8KRGlnZXN0QXV0aGVudGljYXRpb24ucHJvdG90eXBlLnVwZGF0ZU5jSGV4ID0gZnVuY3Rpb24oKSB7CiAgdmFyIGhleCA9IE51bWJlcih0aGlzLm5jKS50b1N0cmluZygxNik7CiAgdGhpcy5uY0hleCA9ICcwMDAwMDAwMCcuc3Vic3RyKDAsIDgtaGV4Lmxlbmd0aCkgKyBoZXg7Cn07CgpyZXR1cm4gRGlnZXN0QXV0aGVudGljYXRpb247Cn07Cgp9LHt9XSwxNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKdmFyIE5vZGVFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjb25zb2xlKSB7CgovLyBEb24ndCB1c2UgYG5ldyBTSVAuRXZlbnRFbWl0dGVyKClgIGZvciBpbmhlcml0aW5nLgovLyBVc2UgT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdG95cGUpOwpmdW5jdGlvbiBFdmVudEVtaXR0ZXIgKCkgewogIE5vZGVFdmVudEVtaXR0ZXIuY2FsbCh0aGlzKTsKfQoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoTm9kZUV2ZW50RW1pdHRlci5wcm90b3R5cGUsIHsKICBjb25zdHJ1Y3RvcjogewogICAgdmFsdWU6IEV2ZW50RW1pdHRlciwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgd3JpdGFibGU6IHRydWUsCiAgICBjb25maWd1cmFibGU6IHRydWUKICB9Cn0pOwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiBvZmYgKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHsKICB2YXIgd2FybmluZyA9ICcnOwogIHdhcm5pbmcgKz0gJ1NJUC5FdmVudEVtaXR0ZXIjb2ZmIGlzIGRlcHJlY2F0ZWQgYW5kIG1heSBiZSByZW1vdmVkIGluIGZ1dHVyZSBTSVAuanMgdmVyc2lvbnMuXG4nOwogIHdhcm5pbmcgKz0gJ1BsZWFzZSB1c2UgcmVtb3ZlTGlzdGVuZXIgb3IgcmVtb3ZlQWxsTGlzdGVuZXJzIGluc3RlYWQuXG4nOwogIHdhcm5pbmcgKz0gJ1NlZSBoZXJlIGZvciBtb3JlIGRldGFpbHM6XG4nOwogIHdhcm5pbmcgKz0gJ2h0dHA6Ly9ub2RlanMub3JnL2FwaS9ldmVudHMuaHRtbCNldmVudHNfZW1pdHRlcl9yZW1vdmVsaXN0ZW5lcl9ldmVudF9saXN0ZW5lcic7CiAgY29uc29sZS53YXJuKHdhcm5pbmcpOwoKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHsKICAgIHJldHVybiB0aGlzLnJlbW92ZUFsbExpc3RlbmVycy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKTsKICB9Cn07CgpyZXR1cm4gRXZlbnRFbWl0dGVyOwoKfTsKCn0seyJldmVudHMiOjQ4fV0sMTU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAZmlsZW92ZXJ2aWV3IEV4Y2VwdGlvbnMKICovCgovKioKICogU0lQIEV4Y2VwdGlvbnMuCiAqIEBhdWdtZW50cyBTSVAKICovCm1vZHVsZS5leHBvcnRzID0gewogIENvbmZpZ3VyYXRpb25FcnJvcjogKGZ1bmN0aW9uKCl7CiAgICB2YXIgZXhjZXB0aW9uID0gZnVuY3Rpb24ocGFyYW1ldGVyLCB2YWx1ZSkgewogICAgICB0aGlzLmNvZGUgPSAxOwogICAgICB0aGlzLm5hbWUgPSAnQ09ORklHVVJBVElPTl9FUlJPUic7CiAgICAgIHRoaXMucGFyYW1ldGVyID0gcGFyYW1ldGVyOwogICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgIHRoaXMubWVzc2FnZSA9ICghdGhpcy52YWx1ZSk/ICdNaXNzaW5nIHBhcmFtZXRlcjogJysgdGhpcy5wYXJhbWV0ZXIgOiAnSW52YWxpZCB2YWx1ZSAnKyBKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlKSArJyBmb3IgcGFyYW1ldGVyICInKyB0aGlzLnBhcmFtZXRlciArJyInOwogICAgfTsKICAgIGV4Y2VwdGlvbi5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTsKICAgIHJldHVybiBleGNlcHRpb247CiAgfSgpKSwKCiAgSW52YWxpZFN0YXRlRXJyb3I6IChmdW5jdGlvbigpewogICAgdmFyIGV4Y2VwdGlvbiA9IGZ1bmN0aW9uKHN0YXR1cykgewogICAgICB0aGlzLmNvZGUgPSAyOwogICAgICB0aGlzLm5hbWUgPSAnSU5WQUxJRF9TVEFURV9FUlJPUic7CiAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzOwogICAgICB0aGlzLm1lc3NhZ2UgPSAnSW52YWxpZCBzdGF0dXM6ICcgKyBzdGF0dXM7CiAgICB9OwogICAgZXhjZXB0aW9uLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpOwogICAgcmV0dXJuIGV4Y2VwdGlvbjsKICB9KCkpLAoKICBOb3RTdXBwb3J0ZWRFcnJvcjogKGZ1bmN0aW9uKCl7CiAgICB2YXIgZXhjZXB0aW9uID0gZnVuY3Rpb24obWVzc2FnZSkgewogICAgICB0aGlzLmNvZGUgPSAzOwogICAgICB0aGlzLm5hbWUgPSAnTk9UX1NVUFBPUlRFRF9FUlJPUic7CiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7CiAgICB9OwogICAgZXhjZXB0aW9uLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpOwogICAgcmV0dXJuIGV4Y2VwdGlvbjsKICB9KCkpLAoKICBHZXREZXNjcmlwdGlvbkVycm9yOiAoZnVuY3Rpb24oKXsKICAgIHZhciBleGNlcHRpb24gPSBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAgIHRoaXMuY29kZSA9IDQ7CiAgICAgIHRoaXMubmFtZSA9ICdHRVRfREVTQ1JJUFRJT05fRVJST1InOwogICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgfTsKICAgIGV4Y2VwdGlvbi5wcm90b3R5cGUgPSBuZXcgRXJyb3IoKTsKICAgIHJldHVybiBleGNlcHRpb247CiAgfSgpKQp9OwoKfSx7fV0sMTY6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CnZhciBHcmFtbWFyID0gcmVxdWlyZSgnLi9HcmFtbWFyL2Rpc3QvR3JhbW1hcicpOwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CgpyZXR1cm4gewogIHBhcnNlOiBmdW5jdGlvbiBwYXJzZUN1c3RvbSAoaW5wdXQsIHN0YXJ0UnVsZSkgewogICAgdmFyIG9wdGlvbnMgPSB7c3RhcnRSdWxlOiBzdGFydFJ1bGUsIFNJUDogU0lQfTsKICAgIHRyeSB7CiAgICAgIEdyYW1tYXIucGFyc2UoaW5wdXQsIG9wdGlvbnMpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBvcHRpb25zLmRhdGEgPSAtMTsKICAgIH0KICAgIHJldHVybiBvcHRpb25zLmRhdGE7CiAgfQp9OwoKfTsKCn0seyIuL0dyYW1tYXIvZGlzdC9HcmFtbWFyIjoxN31dLDE3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKbW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKSB7CiAgLyoKICAgKiBHZW5lcmF0ZWQgYnkgUEVHLmpzIDAuOC4wLgogICAqCiAgICogaHR0cDovL3BlZ2pzLm1hamRhLmN6LwogICAqLwoKICBmdW5jdGlvbiBwZWckc3ViY2xhc3MoY2hpbGQsIHBhcmVudCkgewogICAgZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9CiAgICBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7CiAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOwogIH0KCiAgZnVuY3Rpb24gU3ludGF4RXJyb3IobWVzc2FnZSwgZXhwZWN0ZWQsIGZvdW5kLCBvZmZzZXQsIGxpbmUsIGNvbHVtbikgewogICAgdGhpcy5tZXNzYWdlICA9IG1lc3NhZ2U7CiAgICB0aGlzLmV4cGVjdGVkID0gZXhwZWN0ZWQ7CiAgICB0aGlzLmZvdW5kICAgID0gZm91bmQ7CiAgICB0aGlzLm9mZnNldCAgID0gb2Zmc2V0OwogICAgdGhpcy5saW5lICAgICA9IGxpbmU7CiAgICB0aGlzLmNvbHVtbiAgID0gY29sdW1uOwoKICAgIHRoaXMubmFtZSAgICAgPSAiU3ludGF4RXJyb3IiOwogIH0KCiAgcGVnJHN1YmNsYXNzKFN5bnRheEVycm9yLCBFcnJvcik7CgogIGZ1bmN0aW9uIHBhcnNlKGlucHV0KSB7CiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDoge30sCgogICAgICAgIHBlZyRGQUlMRUQgPSB7fSwKCiAgICAgICAgcGVnJHN0YXJ0UnVsZUluZGljZXMgPSB7IENvbnRhY3Q6IDExOCwgTmFtZV9BZGRyX0hlYWRlcjogMTU1LCBSZWNvcmRfUm91dGU6IDE3NSwgUmVxdWVzdF9SZXNwb25zZTogODEsIFNJUF9VUkk6IDQ1LCBTdWJzY3JpcHRpb25fU3RhdGU6IDE4NSwgU3VwcG9ydGVkOiAxOTAsIFJlcXVpcmU6IDE4MSwgVmlhOiAxOTMsIGFic29sdXRlVVJJOiA4NCwgQ2FsbF9JRDogMTE3LCBDb250ZW50X0Rpc3Bvc2l0aW9uOiAxMjksIENvbnRlbnRfTGVuZ3RoOiAxMzQsIENvbnRlbnRfVHlwZTogMTM1LCBDU2VxOiAxNDUsIGRpc3BsYXlOYW1lOiAxMjEsIEV2ZW50OiAxNDgsIEZyb206IDE1MCwgaG9zdDogNTIsIE1heF9Gb3J3YXJkczogMTUzLCBNaW5fU0U6IDIxMiwgUHJveHlfQXV0aGVudGljYXRlOiAxNTYsIHF1b3RlZF9zdHJpbmc6IDQwLCBSZWZlcl9UbzogMTc3LCBSZXBsYWNlczogMTc4LCBTZXNzaW9uX0V4cGlyZXM6IDIwOSwgc3R1bl9VUkk6IDIxNiwgVG86IDE5MSwgdHVybl9VUkk6IDIyMywgdXVpZDogMjI2LCBXV1dfQXV0aGVudGljYXRlOiAyMDgsIGNoYWxsZW5nZTogMTU3IH0sCiAgICAgICAgcGVnJHN0YXJ0UnVsZUluZGV4ICAgPSAxMTgsCgogICAgICAgIHBlZyRjb25zdHMgPSBbCiAgICAgICAgICAiXHJcbiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJcclxuIiwgZGVzY3JpcHRpb246ICJcIlxcclxcblwiIiB9LAogICAgICAgICAgL15bMC05XS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWzAtOV0iLCBkZXNjcmlwdGlvbjogIlswLTldIiB9LAogICAgICAgICAgL15bYS16QS1aXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiW2EtekEtWl0iLCBkZXNjcmlwdGlvbjogIlthLXpBLVpdIiB9LAogICAgICAgICAgL15bMC05YS1mQS1GXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWzAtOWEtZkEtRl0iLCBkZXNjcmlwdGlvbjogIlswLTlhLWZBLUZdIiB9LAogICAgICAgICAgL15bXDAtXHhGRl0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIltcXDAtXFx4RkZdIiwgZGVzY3JpcHRpb246ICJbXFwwLVxceEZGXSIgfSwKICAgICAgICAgIC9eWyJdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXCJdIiwgZGVzY3JpcHRpb246ICJbXCJdIiB9LAogICAgICAgICAgIiAiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiICIsIGRlc2NyaXB0aW9uOiAiXCIgXCIiIH0sCiAgICAgICAgICAiXHQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXHQiLCBkZXNjcmlwdGlvbjogIlwiXFx0XCIiIH0sCiAgICAgICAgICAvXlthLXpBLVowLTldLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbYS16QS1aMC05XSIsIGRlc2NyaXB0aW9uOiAiW2EtekEtWjAtOV0iIH0sCiAgICAgICAgICAiOyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICI7IiwgZGVzY3JpcHRpb246ICJcIjtcIiIgfSwKICAgICAgICAgICIvIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIi8iLCBkZXNjcmlwdGlvbjogIlwiL1wiIiB9LAogICAgICAgICAgIj8iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiPyIsIGRlc2NyaXB0aW9uOiAiXCI/XCIiIH0sCiAgICAgICAgICAiOiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICI6IiwgZGVzY3JpcHRpb246ICJcIjpcIiIgfSwKICAgICAgICAgICJAIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIkAiLCBkZXNjcmlwdGlvbjogIlwiQFwiIiB9LAogICAgICAgICAgIiYiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiJiIsIGRlc2NyaXB0aW9uOiAiXCImXCIiIH0sCiAgICAgICAgICAiPSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICI9IiwgZGVzY3JpcHRpb246ICJcIj1cIiIgfSwKICAgICAgICAgICIrIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIisiLCBkZXNjcmlwdGlvbjogIlwiK1wiIiB9LAogICAgICAgICAgIiQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiJCIsIGRlc2NyaXB0aW9uOiAiXCIkXCIiIH0sCiAgICAgICAgICAiLCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIsIiwgZGVzY3JpcHRpb246ICJcIixcIiIgfSwKICAgICAgICAgICItIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIi0iLCBkZXNjcmlwdGlvbjogIlwiLVwiIiB9LAogICAgICAgICAgIl8iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXyIsIGRlc2NyaXB0aW9uOiAiXCJfXCIiIH0sCiAgICAgICAgICAiLiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIuIiwgZGVzY3JpcHRpb246ICJcIi5cIiIgfSwKICAgICAgICAgICIhIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIiEiLCBkZXNjcmlwdGlvbjogIlwiIVwiIiB9LAogICAgICAgICAgIn4iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAifiIsIGRlc2NyaXB0aW9uOiAiXCJ+XCIiIH0sCiAgICAgICAgICAiKiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIqIiwgZGVzY3JpcHRpb246ICJcIipcIiIgfSwKICAgICAgICAgICInIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIiciLCBkZXNjcmlwdGlvbjogIlwiJ1wiIiB9LAogICAgICAgICAgIigiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiKCIsIGRlc2NyaXB0aW9uOiAiXCIoXCIiIH0sCiAgICAgICAgICAiKSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIpIiwgZGVzY3JpcHRpb246ICJcIilcIiIgfSwKICAgICAgICAgIHBlZyRGQUlMRUQsCiAgICAgICAgICAiJSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICIlIiwgZGVzY3JpcHRpb246ICJcIiVcIiIgfSwKICAgICAgICAgIG51bGwsCiAgICAgICAgICBbXSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiICI7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gJzonOyB9LAogICAgICAgICAgL15bIS1+XS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWyEtfl0iLCBkZXNjcmlwdGlvbjogIlshLX5dIiB9LAogICAgICAgICAgL15bXHg4MC1cdUZGRkZdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbXFx4ODAtXFx1RkZGRl0iLCBkZXNjcmlwdGlvbjogIltcXHg4MC1cXHVGRkZGXSIgfSwKICAgICAgICAgIC9eW1x4ODAtXHhCRl0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIltcXHg4MC1cXHhCRl0iLCBkZXNjcmlwdGlvbjogIltcXHg4MC1cXHhCRl0iIH0sCiAgICAgICAgICAvXlthLWZdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbYS1mXSIsIGRlc2NyaXB0aW9uOiAiW2EtZl0iIH0sCiAgICAgICAgICAiYCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJgIiwgZGVzY3JpcHRpb246ICJcImBcIiIgfSwKICAgICAgICAgICI8IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIjwiLCBkZXNjcmlwdGlvbjogIlwiPFwiIiB9LAogICAgICAgICAgIj4iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiPiIsIGRlc2NyaXB0aW9uOiAiXCI+XCIiIH0sCiAgICAgICAgICAiXFwiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiXFwiLCBkZXNjcmlwdGlvbjogIlwiXFxcXFwiIiB9LAogICAgICAgICAgIlsiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiWyIsIGRlc2NyaXB0aW9uOiAiXCJbXCIiIH0sCiAgICAgICAgICAiXSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJdIiwgZGVzY3JpcHRpb246ICJcIl1cIiIgfSwKICAgICAgICAgICJ7IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInsiLCBkZXNjcmlwdGlvbjogIlwie1wiIiB9LAogICAgICAgICAgIn0iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAifSIsIGRlc2NyaXB0aW9uOiAiXCJ9XCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIioiOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICIvIjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiPSI7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIigiOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICIpIjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiPiI7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIjwiOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICIsIjsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkge3JldHVybiAiOyI7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHtyZXR1cm4gIjoiOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuICJcIiI7IH0sCiAgICAgICAgICAvXlshLSddLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbIS0nXSIsIGRlc2NyaXB0aW9uOiAiWyEtJ10iIH0sCiAgICAgICAgICAvXlsqLVtdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbKi1bXSIsIGRlc2NyaXB0aW9uOiAiWyotW10iIH0sCiAgICAgICAgICAvXltcXS1+XS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiW1xcXS1+XSIsIGRlc2NyaXB0aW9uOiAiW1xcXS1+XSIgfSwKICAgICAgICAgIGZ1bmN0aW9uKGNvbnRlbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudHM7IH0sCiAgICAgICAgICAvXlsjLVtdLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbIy1bXSIsIGRlc2NyaXB0aW9uOiAiWyMtW10iIH0sCiAgICAgICAgICAvXltcMC1cdF0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIltcXDAtXFx0XSIsIGRlc2NyaXB0aW9uOiAiW1xcMC1cXHRdIiB9LAogICAgICAgICAgL15bXHgwQi1cZl0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIltcXHgwQi1cXGZdIiwgZGVzY3JpcHRpb246ICJbXFx4MEItXFxmXSIgfSwKICAgICAgICAgIC9eW1x4MEUtf10vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIltcXHgwRS1/XSIsIGRlc2NyaXB0aW9uOiAiW1xceDBFLX9dIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpID0gbmV3IG9wdGlvbnMuU0lQLlVSSShvcHRpb25zLmRhdGEuc2NoZW1lLCBvcHRpb25zLmRhdGEudXNlciwgb3B0aW9ucy5kYXRhLmhvc3QsIG9wdGlvbnMuZGF0YS5wb3J0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuc2NoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS51c2VyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5ob3N0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5ob3N0X3R5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnBvcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaSA9IG5ldyBvcHRpb25zLlNJUC5VUkkob3B0aW9ucy5kYXRhLnNjaGVtZSwgb3B0aW9ucy5kYXRhLnVzZXIsIG9wdGlvbnMuZGF0YS5ob3N0LCBvcHRpb25zLmRhdGEucG9ydCwgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMsIG9wdGlvbnMuZGF0YS51cmlfaGVhZGVycyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnNjaGVtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEudXNlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuaG9zdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuaG9zdF90eXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5wb3J0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ1NJUF9VUkknKSB7IG9wdGlvbnMuZGF0YSA9IG9wdGlvbnMuZGF0YS51cmk7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAic2lwcyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJzaXBzIiwgZGVzY3JpcHRpb246ICJcInNpcHNcIiIgfSwKICAgICAgICAgICJzaXAiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAic2lwIiwgZGVzY3JpcHRpb246ICJcInNpcFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24odXJpX3NjaGVtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuc2NoZW1lID0gdXJpX3NjaGVtZTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXNlciA9IGRlY29kZVVSSUNvbXBvbmVudCh0ZXh0KCkuc2xpY2UoMCwgLTEpKTt9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXNzd29yZCA9IHRleHQoKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuaG9zdCA9IHRleHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZGF0YS5ob3N0OyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuaG9zdF90eXBlID0gJ2RvbWFpbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dCgpOyB9LAogICAgICAgICAgL15bYS16QS1aMC05X1wtXS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiW2EtekEtWjAtOV9cXC1dIiwgZGVzY3JpcHRpb246ICJbYS16QS1aMC05X1xcLV0iIH0sCiAgICAgICAgICAvXlthLXpBLVowLTlcLV0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlthLXpBLVowLTlcXC1dIiwgZGVzY3JpcHRpb246ICJbYS16QS1aMC05XFwtXSIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuaG9zdF90eXBlID0gJ0lQdjYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dCgpOyB9LAogICAgICAgICAgIjo6IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIjo6IiwgZGVzY3JpcHRpb246ICJcIjo6XCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ob3N0X3R5cGUgPSAnSVB2Nic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGV4dCgpOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5ob3N0X3R5cGUgPSAnSVB2NCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0KCk7IH0sCiAgICAgICAgICAiMjUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiMjUiLCBkZXNjcmlwdGlvbjogIlwiMjVcIiIgfSwKICAgICAgICAgIC9eWzAtNV0vLAogICAgICAgICAgeyB0eXBlOiAiY2xhc3MiLCB2YWx1ZTogIlswLTVdIiwgZGVzY3JpcHRpb246ICJbMC01XSIgfSwKICAgICAgICAgICIyIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIjIiLCBkZXNjcmlwdGlvbjogIlwiMlwiIiB9LAogICAgICAgICAgL15bMC00XS8sCiAgICAgICAgICB7IHR5cGU6ICJjbGFzcyIsIHZhbHVlOiAiWzAtNF0iLCBkZXNjcmlwdGlvbjogIlswLTRdIiB9LAogICAgICAgICAgIjEiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiMSIsIGRlc2NyaXB0aW9uOiAiXCIxXCIiIH0sCiAgICAgICAgICAvXlsxLTldLywKICAgICAgICAgIHsgdHlwZTogImNsYXNzIiwgdmFsdWU6ICJbMS05XSIsIGRlc2NyaXB0aW9uOiAiWzEtOV0iIH0sCiAgICAgICAgICBmdW5jdGlvbihwb3J0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcnQgPSBwYXJzZUludChwb3J0LmpvaW4oJycpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnBvcnQgPSBwb3J0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9ydDsgfSwKICAgICAgICAgICJ0cmFuc3BvcnQ9IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRyYW5zcG9ydD0iLCBkZXNjcmlwdGlvbjogIlwidHJhbnNwb3J0PVwiIiB9LAogICAgICAgICAgInVkcCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ1ZHAiLCBkZXNjcmlwdGlvbjogIlwidWRwXCIiIH0sCiAgICAgICAgICAidGNwIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRjcCIsIGRlc2NyaXB0aW9uOiAiXCJ0Y3BcIiIgfSwKICAgICAgICAgICJzY3RwIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInNjdHAiLCBkZXNjcmlwdGlvbjogIlwic2N0cFwiIiB9LAogICAgICAgICAgInRscyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0bHMiLCBkZXNjcmlwdGlvbjogIlwidGxzXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih0cmFuc3BvcnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMpIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zPXt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfcGFyYW1zWyd0cmFuc3BvcnQnXSA9IHRyYW5zcG9ydC50b0xvd2VyQ2FzZSgpOyB9LAogICAgICAgICAgInVzZXI9IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInVzZXI9IiwgZGVzY3JpcHRpb246ICJcInVzZXI9XCIiIH0sCiAgICAgICAgICAicGhvbmUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAicGhvbmUiLCBkZXNjcmlwdGlvbjogIlwicGhvbmVcIiIgfSwKICAgICAgICAgICJpcCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJpcCIsIGRlc2NyaXB0aW9uOiAiXCJpcFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24odXNlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEudXJpX3BhcmFtcykgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXM9e307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXNbJ3VzZXInXSA9IHVzZXIudG9Mb3dlckNhc2UoKTsgfSwKICAgICAgICAgICJtZXRob2Q9IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIm1ldGhvZD0iLCBkZXNjcmlwdGlvbjogIlwibWV0aG9kPVwiIiB9LAogICAgICAgICAgZnVuY3Rpb24obWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9wdGlvbnMuZGF0YS51cmlfcGFyYW1zKSBvcHRpb25zLmRhdGEudXJpX3BhcmFtcz17fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX3BhcmFtc1snbWV0aG9kJ10gPSBtZXRob2Q7IH0sCiAgICAgICAgICAidHRsPSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ0dGw9IiwgZGVzY3JpcHRpb246ICJcInR0bD1cIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHR0bCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEucGFyYW1zKSBvcHRpb25zLmRhdGEucGFyYW1zPXt9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXJhbXNbJ3R0bCddID0gdHRsOyB9LAogICAgICAgICAgIm1hZGRyPSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJtYWRkcj0iLCBkZXNjcmlwdGlvbjogIlwibWFkZHI9XCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihtYWRkcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEudXJpX3BhcmFtcykgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXM9e307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXNbJ21hZGRyJ10gPSBtYWRkcjsgfSwKICAgICAgICAgICJsciIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJsciIsIGRlc2NyaXB0aW9uOiAiXCJsclwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9wdGlvbnMuZGF0YS51cmlfcGFyYW1zKSBvcHRpb25zLmRhdGEudXJpX3BhcmFtcz17fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpX3BhcmFtc1snbHInXSA9IHVuZGVmaW5lZDsgfSwKICAgICAgICAgIGZ1bmN0aW9uKHBhcmFtLCB2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEudXJpX3BhcmFtcykgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXNbcGFyYW0udG9Mb3dlckNhc2UoKV0gPSB2YWx1ZSAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpO30sCiAgICAgICAgICBmdW5jdGlvbihobmFtZSwgaHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG5hbWUgPSBobmFtZS5qb2luKCcnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh2YWx1ZSA9IGh2YWx1ZS5qb2luKCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighb3B0aW9ucy5kYXRhLnVyaV9oZWFkZXJzKSBvcHRpb25zLmRhdGEudXJpX2hlYWRlcnMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMuZGF0YS51cmlfaGVhZGVyc1tobmFtZV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS51cmlfaGVhZGVyc1tobmFtZV0gPSBbaHZhbHVlXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnVyaV9oZWFkZXJzW2huYW1lXS5wdXNoKGh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb3RzIG9mIHRlc3RzIGZhaWwgaWYgdGhpcyBpc24ndCBndWFyZGVkLi4uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnUmVmZXJfVG8nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudXJpID0gbmV3IG9wdGlvbnMuU0lQLlVSSShvcHRpb25zLmRhdGEuc2NoZW1lLCBvcHRpb25zLmRhdGEudXNlciwgb3B0aW9ucy5kYXRhLmhvc3QsIG9wdGlvbnMuZGF0YS5wb3J0LCBvcHRpb25zLmRhdGEudXJpX3BhcmFtcywgb3B0aW9ucy5kYXRhLnVyaV9oZWFkZXJzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuc2NoZW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS51c2VyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5ob3N0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5ob3N0X3R5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnBvcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnVyaV9wYXJhbXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgIi8vIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIi8vIiwgZGVzY3JpcHRpb246ICJcIi8vXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnNjaGVtZT0gdGV4dCgpOyB9LAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiU0lQIiwgZGVzY3JpcHRpb246ICJcIlNJUFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5zaXBfdmVyc2lvbiA9IHRleHQoKTsgfSwKICAgICAgICAgICJJTlZJVEUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiSU5WSVRFIiwgZGVzY3JpcHRpb246ICJcIklOVklURVwiIiB9LAogICAgICAgICAgIkFDSyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJBQ0siLCBkZXNjcmlwdGlvbjogIlwiQUNLXCIiIH0sCiAgICAgICAgICAiVlhBQ0giLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiVlhBQ0giLCBkZXNjcmlwdGlvbjogIlwiVlhBQ0hcIiIgfSwKICAgICAgICAgICJPUFRJT05TIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIk9QVElPTlMiLCBkZXNjcmlwdGlvbjogIlwiT1BUSU9OU1wiIiB9LAogICAgICAgICAgIkJZRSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJCWUUiLCBkZXNjcmlwdGlvbjogIlwiQllFXCIiIH0sCiAgICAgICAgICAiQ0FOQ0VMIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIkNBTkNFTCIsIGRlc2NyaXB0aW9uOiAiXCJDQU5DRUxcIiIgfSwKICAgICAgICAgICJSRUdJU1RFUiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJSRUdJU1RFUiIsIGRlc2NyaXB0aW9uOiAiXCJSRUdJU1RFUlwiIiB9LAogICAgICAgICAgIlNVQlNDUklCRSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJTVUJTQ1JJQkUiLCBkZXNjcmlwdGlvbjogIlwiU1VCU0NSSUJFXCIiIH0sCiAgICAgICAgICAiTk9USUZZIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIk5PVElGWSIsIGRlc2NyaXB0aW9uOiAiXCJOT1RJRllcIiIgfSwKICAgICAgICAgICJSRUZFUiIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJSRUZFUiIsIGRlc2NyaXB0aW9uOiAiXCJSRUZFUlwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEubWV0aG9kID0gdGV4dCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5kYXRhLm1ldGhvZDsgfSwKICAgICAgICAgIGZ1bmN0aW9uKHN0YXR1c19jb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuc3RhdHVzX2NvZGUgPSBwYXJzZUludChzdGF0dXNfY29kZS5qb2luKCcnKSk7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5yZWFzb25fcGhyYXNlID0gdGV4dCgpOyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHRleHQoKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCwgbGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gb3B0aW9ucy5kYXRhLm11bHRpX2hlYWRlci5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXJbaWR4XS5wYXJzZWQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kYXRhICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXIpIG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXIgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciA9IG5ldyBvcHRpb25zLlNJUC5OYW1lQWRkckhlYWRlcihvcHRpb25zLmRhdGEudXJpLCBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUsIG9wdGlvbnMuZGF0YS5wYXJhbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5kYXRhLnVyaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS5wYXJhbXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXIucHVzaCggeyAncG9zaXRpb24nOiBwZWckY3VyclBvcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29mZnNldCc6IG9mZnNldCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGFyc2VkJzogaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTt9LAogICAgICAgICAgZnVuY3Rpb24oZGlzcGxheU5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lID0gdGV4dCgpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXNwbGF5TmFtZVswXSA9PT0gJ1wiJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lLnN1YnN0cmluZygxLCBkaXNwbGF5TmFtZS5sZW5ndGgtMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTsgfSwKICAgICAgICAgICJxIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInEiLCBkZXNjcmlwdGlvbjogIlwicVwiIiB9LAogICAgICAgICAgZnVuY3Rpb24ocSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW9wdGlvbnMuZGF0YS5wYXJhbXMpIG9wdGlvbnMuZGF0YS5wYXJhbXMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wYXJhbXNbJ3EnXSA9IHE7IH0sCiAgICAgICAgICAiZXhwaXJlcyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJleHBpcmVzIiwgZGVzY3JpcHRpb246ICJcImV4cGlyZXNcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKGV4cGlyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEucGFyYW1zKSBvcHRpb25zLmRhdGEucGFyYW1zID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucGFyYW1zWydleHBpcmVzJ10gPSBleHBpcmVzOyB9LAogICAgICAgICAgZnVuY3Rpb24oZGVsdGFfc2Vjb25kcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGRlbHRhX3NlY29uZHMuam9pbignJykpOyB9LAogICAgICAgICAgIjAiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiMCIsIGRlc2NyaXB0aW9uOiAiXCIwXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRleHQoKSk7IH0sCiAgICAgICAgICBmdW5jdGlvbihwYXJhbSwgdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEucGFyYW1zKSBvcHRpb25zLmRhdGEucGFyYW1zID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnBhcmFtc1twYXJhbS50b0xvd2VyQ2FzZSgpXSA9IHZhbHVlO30sCiAgICAgICAgICAicmVuZGVyIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInJlbmRlciIsIGRlc2NyaXB0aW9uOiAiXCJyZW5kZXJcIiIgfSwKICAgICAgICAgICJzZXNzaW9uIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInNlc3Npb24iLCBkZXNjcmlwdGlvbjogIlwic2Vzc2lvblwiIiB9LAogICAgICAgICAgImljb24iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiaWNvbiIsIGRlc2NyaXB0aW9uOiAiXCJpY29uXCIiIH0sCiAgICAgICAgICAiYWxlcnQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiYWxlcnQiLCBkZXNjcmlwdGlvbjogIlwiYWxlcnRcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ0NvbnRlbnRfRGlzcG9zaXRpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudHlwZSA9IHRleHQoKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICJoYW5kbGluZyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJoYW5kbGluZyIsIGRlc2NyaXB0aW9uOiAiXCJoYW5kbGluZ1wiIiB9LAogICAgICAgICAgIm9wdGlvbmFsIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIm9wdGlvbmFsIiwgZGVzY3JpcHRpb246ICJcIm9wdGlvbmFsXCIiIH0sCiAgICAgICAgICAicmVxdWlyZWQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAicmVxdWlyZWQiLCBkZXNjcmlwdGlvbjogIlwicmVxdWlyZWRcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKGxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gcGFyc2VJbnQobGVuZ3RoLmpvaW4oJycpKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gdGV4dCgpOyB9LAogICAgICAgICAgInRleHQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidGV4dCIsIGRlc2NyaXB0aW9uOiAiXCJ0ZXh0XCIiIH0sCiAgICAgICAgICAiaW1hZ2UiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiaW1hZ2UiLCBkZXNjcmlwdGlvbjogIlwiaW1hZ2VcIiIgfSwKICAgICAgICAgICJhdWRpbyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJhdWRpbyIsIGRlc2NyaXB0aW9uOiAiXCJhdWRpb1wiIiB9LAogICAgICAgICAgInZpZGVvIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInZpZGVvIiwgZGVzY3JpcHRpb246ICJcInZpZGVvXCIiIH0sCiAgICAgICAgICAiYXBwbGljYXRpb24iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiYXBwbGljYXRpb24iLCBkZXNjcmlwdGlvbjogIlwiYXBwbGljYXRpb25cIiIgfSwKICAgICAgICAgICJtZXNzYWdlIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIm1lc3NhZ2UiLCBkZXNjcmlwdGlvbjogIlwibWVzc2FnZVwiIiB9LAogICAgICAgICAgIm11bHRpcGFydCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJtdWx0aXBhcnQiLCBkZXNjcmlwdGlvbjogIlwibXVsdGlwYXJ0XCIiIH0sCiAgICAgICAgICAieC0iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAieC0iLCBkZXNjcmlwdGlvbjogIlwieC1cIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKGNzZXFfdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS52YWx1ZT1wYXJzZUludChjc2VxX3ZhbHVlLmpvaW4oJycpKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKGV4cGlyZXMpIHtvcHRpb25zLmRhdGEgPSBleHBpcmVzOyB9LAogICAgICAgICAgZnVuY3Rpb24oZXZlbnRfdHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuZXZlbnQgPSBldmVudF90eXBlLnRvTG93ZXJDYXNlKCk7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gb3B0aW9ucy5kYXRhLnRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IG5ldyBvcHRpb25zLlNJUC5OYW1lQWRkckhlYWRlcihvcHRpb25zLmRhdGEudXJpLCBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWUsIG9wdGlvbnMuZGF0YS5wYXJhbXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhZykge29wdGlvbnMuZGF0YS5zZXRQYXJhbSgndGFnJyx0YWcpfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAidGFnIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRhZyIsIGRlc2NyaXB0aW9uOiAiXCJ0YWdcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHRhZykge29wdGlvbnMuZGF0YS50YWcgPSB0YWc7IH0sCiAgICAgICAgICBmdW5jdGlvbihmb3J3YXJkcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gcGFyc2VJbnQoZm9yd2FyZHMuam9pbignJykpOyB9LAogICAgICAgICAgZnVuY3Rpb24obWluX2V4cGlyZXMpIHtvcHRpb25zLmRhdGEgPSBtaW5fZXhwaXJlczsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbmV3IG9wdGlvbnMuU0lQLk5hbWVBZGRySGVhZGVyKG9wdGlvbnMuZGF0YS51cmksIG9wdGlvbnMuZGF0YS5kaXNwbGF5TmFtZSwgb3B0aW9ucy5kYXRhLnBhcmFtcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICJkaWdlc3QiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiRGlnZXN0IiwgZGVzY3JpcHRpb246ICJcIkRpZ2VzdFwiIiB9LAogICAgICAgICAgInJlYWxtIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInJlYWxtIiwgZGVzY3JpcHRpb246ICJcInJlYWxtXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihyZWFsbSkgeyBvcHRpb25zLmRhdGEucmVhbG0gPSByZWFsbTsgfSwKICAgICAgICAgICJkb21haW4iLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiZG9tYWluIiwgZGVzY3JpcHRpb246ICJcImRvbWFpblwiIiB9LAogICAgICAgICAgIm5vbmNlIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIm5vbmNlIiwgZGVzY3JpcHRpb246ICJcIm5vbmNlXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihub25jZSkgeyBvcHRpb25zLmRhdGEubm9uY2U9bm9uY2U7IH0sCiAgICAgICAgICAib3BhcXVlIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIm9wYXF1ZSIsIGRlc2NyaXB0aW9uOiAiXCJvcGFxdWVcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKG9wYXF1ZSkgeyBvcHRpb25zLmRhdGEub3BhcXVlPW9wYXF1ZTsgfSwKICAgICAgICAgICJzdGFsZSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJzdGFsZSIsIGRlc2NyaXB0aW9uOiAiXCJzdGFsZVwiIiB9LAogICAgICAgICAgInRydWUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidHJ1ZSIsIGRlc2NyaXB0aW9uOiAiXCJ0cnVlXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsgb3B0aW9ucy5kYXRhLnN0YWxlPXRydWU7IH0sCiAgICAgICAgICAiZmFsc2UiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiZmFsc2UiLCBkZXNjcmlwdGlvbjogIlwiZmFsc2VcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgeyBvcHRpb25zLmRhdGEuc3RhbGU9ZmFsc2U7IH0sCiAgICAgICAgICAiYWxnb3JpdGhtIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImFsZ29yaXRobSIsIGRlc2NyaXB0aW9uOiAiXCJhbGdvcml0aG1cIiIgfSwKICAgICAgICAgICJtZDUiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiTUQ1IiwgZGVzY3JpcHRpb246ICJcIk1ENVwiIiB9LAogICAgICAgICAgIm1kNS1zZXNzIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIk1ENS1zZXNzIiwgZGVzY3JpcHRpb246ICJcIk1ENS1zZXNzXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihhbGdvcml0aG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuYWxnb3JpdGhtPWFsZ29yaXRobS50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgInFvcCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJxb3AiLCBkZXNjcmlwdGlvbjogIlwicW9wXCIiIH0sCiAgICAgICAgICAiYXV0aC1pbnQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiYXV0aC1pbnQiLCBkZXNjcmlwdGlvbjogIlwiYXV0aC1pbnRcIiIgfSwKICAgICAgICAgICJhdXRoIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImF1dGgiLCBkZXNjcmlwdGlvbjogIlwiYXV0aFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24ocW9wX3ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucW9wIHx8IChvcHRpb25zLmRhdGEucW9wPVtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5xb3AucHVzaChxb3BfdmFsdWUudG9Mb3dlckNhc2UoKSk7IH0sCiAgICAgICAgICBmdW5jdGlvbihyYWNrX3ZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudmFsdWU9cGFyc2VJbnQocmFja192YWx1ZS5qb2luKCcnKSk7IH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHgsIGxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IG9wdGlvbnMuZGF0YS5tdWx0aV9oZWFkZXIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyW2lkeF0ucGFyc2VkID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyKSBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIgPSBuZXcgb3B0aW9ucy5TSVAuTmFtZUFkZHJIZWFkZXIob3B0aW9ucy5kYXRhLnVyaSwgb3B0aW9ucy5kYXRhLmRpc3BsYXlOYW1lLCBvcHRpb25zLmRhdGEucGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZGF0YS51cmk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEuZGlzcGxheU5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmRhdGEucGFyYW1zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEubXVsdGlfaGVhZGVyLnB1c2goIHsgJ3Bvc2l0aW9uJzogcGVnJGN1cnJQb3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvZmZzZXQnOiBvZmZzZXQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BhcnNlZCc6IGhlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7fSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBuZXcgb3B0aW9ucy5TSVAuTmFtZUFkZHJIZWFkZXIob3B0aW9ucy5kYXRhLnVyaSwgb3B0aW9ucy5kYXRhLmRpc3BsYXlOYW1lLCBvcHRpb25zLmRhdGEucGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShvcHRpb25zLmRhdGEucmVwbGFjZXNfZnJvbV90YWcgJiYgb3B0aW9ucy5kYXRhLnJlcGxhY2VzX3RvX3RhZykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxfaWQ6IG9wdGlvbnMuZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAiZnJvbS10YWciLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAiZnJvbS10YWciLCBkZXNjcmlwdGlvbjogIlwiZnJvbS10YWdcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKGZyb21fdGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnJlcGxhY2VzX2Zyb21fdGFnID0gZnJvbV90YWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAidG8tdGFnIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRvLXRhZyIsIGRlc2NyaXB0aW9uOiAiXCJ0by10YWdcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHRvX3RhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5yZXBsYWNlc190b190YWcgPSB0b190YWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAiZWFybHktb25seSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJlYXJseS1vbmx5IiwgZGVzY3JpcHRpb246ICJcImVhcmx5LW9ubHlcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5lYXJseV9vbmx5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgIGZ1bmN0aW9uKHIpIHtyZXR1cm4gcjt9LAogICAgICAgICAgZnVuY3Rpb24oZmlyc3QsIHJlc3QpIHsgcmV0dXJuIGxpc3QoZmlyc3QsIHJlc3QpOyB9LAogICAgICAgICAgZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgPT09ICdSZXF1aXJlJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gdmFsdWUgfHwgW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24ocnNlcV92YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnZhbHVlPXBhcnNlSW50KHJzZXFfdmFsdWUuam9pbignJykpOyB9LAogICAgICAgICAgImFjdGl2ZSIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJhY3RpdmUiLCBkZXNjcmlwdGlvbjogIlwiYWN0aXZlXCIiIH0sCiAgICAgICAgICAicGVuZGluZyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJwZW5kaW5nIiwgZGVzY3JpcHRpb246ICJcInBlbmRpbmdcIiIgfSwKICAgICAgICAgICJ0ZXJtaW5hdGVkIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInRlcm1pbmF0ZWQiLCBkZXNjcmlwdGlvbjogIlwidGVybWluYXRlZFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuc3RhdGUgPSB0ZXh0KCk7IH0sCiAgICAgICAgICAicmVhc29uIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInJlYXNvbiIsIGRlc2NyaXB0aW9uOiAiXCJyZWFzb25cIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWFzb24gIT09ICd1bmRlZmluZWQnKSBvcHRpb25zLmRhdGEucmVhc29uID0gcmVhc29uOyB9LAogICAgICAgICAgZnVuY3Rpb24oZXhwaXJlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleHBpcmVzICE9PSAndW5kZWZpbmVkJykgb3B0aW9ucy5kYXRhLmV4cGlyZXMgPSBleHBpcmVzOyB9LAogICAgICAgICAgInJldHJ5X2FmdGVyIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInJldHJ5X2FmdGVyIiwgZGVzY3JpcHRpb246ICJcInJldHJ5X2FmdGVyXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihyZXRyeV9hZnRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXRyeV9hZnRlciAhPT0gJ3VuZGVmaW5lZCcpIG9wdGlvbnMuZGF0YS5yZXRyeV9hZnRlciA9IHJldHJ5X2FmdGVyOyB9LAogICAgICAgICAgImRlYWN0aXZhdGVkIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImRlYWN0aXZhdGVkIiwgZGVzY3JpcHRpb246ICJcImRlYWN0aXZhdGVkXCIiIH0sCiAgICAgICAgICAicHJvYmF0aW9uIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInByb2JhdGlvbiIsIGRlc2NyaXB0aW9uOiAiXCJwcm9iYXRpb25cIiIgfSwKICAgICAgICAgICJyZWplY3RlZCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJyZWplY3RlZCIsIGRlc2NyaXB0aW9uOiAiXCJyZWplY3RlZFwiIiB9LAogICAgICAgICAgInRpbWVvdXQiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidGltZW91dCIsIGRlc2NyaXB0aW9uOiAiXCJ0aW1lb3V0XCIiIH0sCiAgICAgICAgICAiZ2l2ZXVwIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImdpdmV1cCIsIGRlc2NyaXB0aW9uOiAiXCJnaXZldXBcIiIgfSwKICAgICAgICAgICJub3Jlc291cmNlIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIm5vcmVzb3VyY2UiLCBkZXNjcmlwdGlvbjogIlwibm9yZXNvdXJjZVwiIiB9LAogICAgICAgICAgImludmFyaWFudCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJpbnZhcmlhbnQiLCBkZXNjcmlwdGlvbjogIlwiaW52YXJpYW50XCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ1N1cHBvcnRlZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YSA9IHZhbHVlIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gb3B0aW9ucy5kYXRhLnRhZzsKICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBuZXcgb3B0aW9ucy5TSVAuTmFtZUFkZHJIZWFkZXIob3B0aW9ucy5kYXRhLnVyaSwgb3B0aW9ucy5kYXRhLmRpc3BsYXlOYW1lLCBvcHRpb25zLmRhdGEucGFyYW1zKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnKSB7b3B0aW9ucy5kYXRhLnNldFBhcmFtKCd0YWcnLHRhZyl9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAidHRsIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInR0bCIsIGRlc2NyaXB0aW9uOiAiXCJ0dGxcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHZpYV90dGxfdmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEudHRsID0gdmlhX3R0bF92YWx1ZTsgfSwKICAgICAgICAgICJtYWRkciIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJtYWRkciIsIGRlc2NyaXB0aW9uOiAiXCJtYWRkclwiIiB9LAogICAgICAgICAgZnVuY3Rpb24odmlhX21hZGRyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLm1hZGRyID0gdmlhX21hZGRyOyB9LAogICAgICAgICAgInJlY2VpdmVkIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInJlY2VpdmVkIiwgZGVzY3JpcHRpb246ICJcInJlY2VpdmVkXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbih2aWFfcmVjZWl2ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEucmVjZWl2ZWQgPSB2aWFfcmVjZWl2ZWQ7IH0sCiAgICAgICAgICAiYnJhbmNoIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogImJyYW5jaCIsIGRlc2NyaXB0aW9uOiAiXCJicmFuY2hcIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHZpYV9icmFuY2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEuYnJhbmNoID0gdmlhX2JyYW5jaDsgfSwKICAgICAgICAgICJycG9ydCIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJycG9ydCIsIGRlc2NyaXB0aW9uOiAiXCJycG9ydFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIHJlc3BvbnNlX3BvcnQgIT09ICd1bmRlZmluZWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnJwb3J0ID0gcmVzcG9uc2VfcG9ydC5qb2luKCcnKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKHZpYV9wcm90b2NvbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5wcm90b2NvbCA9IHZpYV9wcm90b2NvbDsgfSwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlVEUCIsIGRlc2NyaXB0aW9uOiAiXCJVRFBcIiIgfSwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlRDUCIsIGRlc2NyaXB0aW9uOiAiXCJUQ1BcIiIgfSwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlRMUyIsIGRlc2NyaXB0aW9uOiAiXCJUTFNcIiIgfSwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIlNDVFAiLCBkZXNjcmlwdGlvbjogIlwiU0NUUFwiIiB9LAogICAgICAgICAgZnVuY3Rpb24odmlhX3RyYW5zcG9ydCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS50cmFuc3BvcnQgPSB2aWFfdHJhbnNwb3J0OyB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3QgPSB0ZXh0KCk7IH0sCiAgICAgICAgICBmdW5jdGlvbih2aWFfc2VudF9ieV9wb3J0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnBvcnQgPSBwYXJzZUludCh2aWFfc2VudF9ieV9wb3J0LmpvaW4oJycpKTsgfSwKICAgICAgICAgIGZ1bmN0aW9uKHR0bCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh0dGwuam9pbignJykpOyB9LAogICAgICAgICAgZnVuY3Rpb24oZGVsdGFTZWNvbmRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RhcnRSdWxlID09PSAnU2Vzc2lvbl9FeHBpcmVzJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmRlbHRhU2Vjb25kcyA9IGRlbHRhU2Vjb25kczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAicmVmcmVzaGVyIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInJlZnJlc2hlciIsIGRlc2NyaXB0aW9uOiAiXCJyZWZyZXNoZXJcIiIgfSwKICAgICAgICAgICJ1YXMiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidWFzIiwgZGVzY3JpcHRpb246ICJcInVhc1wiIiB9LAogICAgICAgICAgInVhYyIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJ1YWMiLCBkZXNjcmlwdGlvbjogIlwidWFjXCIiIH0sCiAgICAgICAgICBmdW5jdGlvbihlbmRwb2ludCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXJ0UnVsZSA9PT0gJ1Nlc3Npb25fRXhwaXJlcycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5yZWZyZXNoZXIgPSBlbmRwb2ludDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbihkZWx0YVNlY29uZHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdGFydFJ1bGUgPT09ICdNaW5fU0UnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGEgPSBkZWx0YVNlY29uZHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgInN0dW5zIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInN0dW5zIiwgZGVzY3JpcHRpb246ICJcInN0dW5zXCIiIH0sCiAgICAgICAgICAic3R1biIsCiAgICAgICAgICB7IHR5cGU6ICJsaXRlcmFsIiwgdmFsdWU6ICJzdHVuIiwgZGVzY3JpcHRpb246ICJcInN0dW5cIiIgfSwKICAgICAgICAgIGZ1bmN0aW9uKHNjaGVtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZGF0YS5zY2hlbWUgPSBzY2hlbWU7IH0sCiAgICAgICAgICBmdW5jdGlvbihob3N0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLmhvc3QgPSBob3N0OyB9LAogICAgICAgICAgIj90cmFuc3BvcnQ9IiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogIj90cmFuc3BvcnQ9IiwgZGVzY3JpcHRpb246ICJcIj90cmFuc3BvcnQ9XCIiIH0sCiAgICAgICAgICAidHVybnMiLAogICAgICAgICAgeyB0eXBlOiAibGl0ZXJhbCIsIHZhbHVlOiAidHVybnMiLCBkZXNjcmlwdGlvbjogIlwidHVybnNcIiIgfSwKICAgICAgICAgICJ0dXJuIiwKICAgICAgICAgIHsgdHlwZTogImxpdGVyYWwiLCB2YWx1ZTogInR1cm4iLCBkZXNjcmlwdGlvbjogIlwidHVyblwiIiB9LAogICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDsgfSwKICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0gdGV4dCgpOyB9CiAgICAgICAgXSwKCiAgICAgICAgcGVnJGJ5dGVjb2RlID0gWwogICAgICAgICAgcGVnJGRlY29kZSgiLiBcIlwiMiAzISIpLAogICAgICAgICAgcGVnJGRlY29kZSgiMFwiXCJcIjEhMyMiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjAkXCJcIjEhMyUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjAmXCJcIjEhMyciKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjcnKiMgXCI3KCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiMChcIlwiMSEzKSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiMCpcIlwiMSEzKyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLixcIlwiMiwzLSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLi5cIlwiMi4zLyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiMDBcIlwiMSEzMSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLjJcIlwiMjIzMypceDg5IFwiLjRcIlwiMjQzNSp9IFwiLjZcIlwiMjYzNypxIFwiLjhcIlwiMjgzOSplIFwiLjpcIlwiMjozOypZIFwiLjxcIlwiMjwzPSpNIFwiLj5cIlwiMj4zPypBIFwiLkBcIlwiMkAzQSo1IFwiLkJcIlwiMkIzQyopIFwiLkRcIlwiMkQzRSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNykqIyBcIjcsIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuRlwiXCIyRjNHKn0gXCIuSFwiXCIySDNJKnEgXCIuSlwiXCIySjNLKmUgXCIuTFwiXCIyTDNNKlkgXCIuTlwiXCIyTjNPKk0gXCIuUFwiXCIyUDNRKkEgXCIuUlwiXCIyUjNTKjUgXCIuVFwiXCIyVDNVKikgXCIuVlwiXCIyVjNXIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIS5ZXCJcIjJZM1orNyQ3IystJTcjKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCshICglIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhISBcXDckLCMmNyRcIistJDcgKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytAJCBcXDckKyYkLCMmNyRcIlwiXCIgWCsnJTRcIjZdXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3LiojIFwiIFsiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3JyojIFwiNygsKSY3JyojIFwiNyhcIitBJC44XCJcIjI4MzkrMSU3LysnJTQjNl4jICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhISBcXDcyKyYkLCMmNzJcIlwiXCIgWCtvJCBcXCEgXFw3LiwjJjcuXCIrLSQ3MisjJSdcIiUkXCIjIFhcIiMgWCxAJiEgXFw3LiwjJjcuXCIrLSQ3MisjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYKyEgKCUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjBfXCJcIjEhM2AqIyBcIjczIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIwYVwiXCIxITNiIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIwY1wiXCIxITNkIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3ISopIFwiMGVcIlwiMSEzZiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDcpKlx4OTUgXCIuRlwiXCIyRjNHKlx4ODkgXCIuSlwiXCIySjNLKn0gXCIuTFwiXCIyTDNNKnEgXCIuWVwiXCIyWTNaKmUgXCIuUFwiXCIyUDNRKlkgXCIuSFwiXCIySDNJKk0gXCIuQFwiXCIyQDNBKkEgXCIuZ1wiXCIyZzNoKjUgXCIuUlwiXCIyUjNTKikgXCIuTlwiXCIyTjNPK1x4OUUkLFx4OUImNykqXHg5NSBcIi5GXCJcIjJGM0cqXHg4OSBcIi5KXCJcIjJKM0sqfSBcIi5MXCJcIjJMM00qcSBcIi5ZXCJcIjJZM1oqZSBcIi5QXCJcIjJQM1EqWSBcIi5IXCJcIjJIM0kqTSBcIi5AXCJcIjJAM0EqQSBcIi5nXCJcIjJnM2gqNSBcIi5SXCJcIjJSM1MqKSBcIi5OXCJcIjJOM09cIlwiXCIgWCshICglIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNykqXHg4OSBcIi5GXCJcIjJGM0cqfSBcIi5MXCJcIjJMM00qcSBcIi5ZXCJcIjJZM1oqZSBcIi5QXCJcIjJQM1EqWSBcIi5IXCJcIjJIM0kqTSBcIi5AXCJcIjJAM0EqQSBcIi5nXCJcIjJnM2gqNSBcIi5SXCJcIjJSM1MqKSBcIi5OXCJcIjJOM08rXHg5MiQsXHg4RiY3KSpceDg5IFwiLkZcIlwiMkYzRyp9IFwiLkxcIlwiMkwzTSpxIFwiLllcIlwiMlkzWiplIFwiLlBcIlwiMlAzUSpZIFwiLkhcIlwiMkgzSSpNIFwiLkBcIlwiMkAzQSpBIFwiLmdcIlwiMmczaCo1IFwiLlJcIlwiMlIzUyopIFwiLk5cIlwiMk4zT1wiXCJcIiBYKyEgKCUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5UXCJcIjJUM1UqXHhFMyBcIi5WXCJcIjJWM1cqXHhENyBcIi5pXCJcIjJpM2oqXHhDQiBcIi5rXCJcIjJrM2wqXHhCRiBcIi46XCJcIjI6MzsqXHhCMyBcIi5EXCJcIjJEM0UqXHhBNyBcIi4yXCJcIjIyMzMqXHg5QiBcIi44XCJcIjI4MzkqXHg4RiBcIi5tXCJcIjJtM24qXHg4MyBcIjcmKn0gXCIuNFwiXCIyNDM1KnEgXCIub1wiXCIybzNwKmUgXCIucVwiXCIycTNyKlkgXCIuNlwiXCIyNjM3Kk0gXCIuPlwiXCIyPjM/KkEgXCIuc1wiXCIyczN0KjUgXCIudVwiXCIydTN2KikgXCI3JyojIFwiNygiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3KSpcdTAxMkIgXCIuRlwiXCIyRjNHKlx1MDExRiBcIi5KXCJcIjJKM0sqXHUwMTEzIFwiLkxcIlwiMkwzTSpcdTAxMDcgXCIuWVwiXCIyWTNaKlx4RkIgXCIuUFwiXCIyUDNRKlx4RUYgXCIuSFwiXCIySDNJKlx4RTMgXCIuQFwiXCIyQDNBKlx4RDcgXCIuZ1wiXCIyZzNoKlx4Q0IgXCIuUlwiXCIyUjNTKlx4QkYgXCIuTlwiXCIyTjNPKlx4QjMgXCIuVFwiXCIyVDNVKlx4QTcgXCIuVlwiXCIyVjNXKlx4OUIgXCIuaVwiXCIyaTNqKlx4OEYgXCIua1wiXCIyazNsKlx4ODMgXCIuOFwiXCIyODM5KncgXCIubVwiXCIybTNuKmsgXCI3JiplIFwiLjRcIlwiMjQzNSpZIFwiLm9cIlwiMm8zcCpNIFwiLnFcIlwiMnEzcipBIFwiLjZcIlwiMjYzNyo1IFwiLnNcIlwiMnMzdCopIFwiLnVcIlwiMnUzditcdTAxMzQkLFx1MDEzMSY3KSpcdTAxMkIgXCIuRlwiXCIyRjNHKlx1MDExRiBcIi5KXCJcIjJKM0sqXHUwMTEzIFwiLkxcIlwiMkwzTSpcdTAxMDcgXCIuWVwiXCIyWTNaKlx4RkIgXCIuUFwiXCIyUDNRKlx4RUYgXCIuSFwiXCIySDNJKlx4RTMgXCIuQFwiXCIyQDNBKlx4RDcgXCIuZ1wiXCIyZzNoKlx4Q0IgXCIuUlwiXCIyUjNTKlx4QkYgXCIuTlwiXCIyTjNPKlx4QjMgXCIuVFwiXCIyVDNVKlx4QTcgXCIuVlwiXCIyVjNXKlx4OUIgXCIuaVwiXCIyaTNqKlx4OEYgXCIua1wiXCIyazNsKlx4ODMgXCIuOFwiXCIyODM5KncgXCIubVwiXCIybTNuKmsgXCI3JiplIFwiLjRcIlwiMjQzNSpZIFwiLm9cIlwiMm8zcCpNIFwiLnFcIlwiMnEzcipBIFwiLjZcIlwiMjYzNyo1IFwiLnNcIlwiMnMzdCopIFwiLnVcIlwiMnUzdlwiXCJcIiBYKyEgKCUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3LytBJC5QXCJcIjJQM1ErMSU3LysnJTQjNncjICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rQSQuNFwiXCIyNDM1KzElNy8rJyU0IzZ4IyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcvK0EkLj5cIlwiMj4zPysxJTcvKyclNCM2eSMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3LytBJC5UXCJcIjJUM1UrMSU3LysnJTQjNnojICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rQSQuVlwiXCIyVjNXKzElNy8rJyU0IzZ7IyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS5rXCJcIjJrM2wrMSQ3LysnJTRcIjZ8XCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rNyQuaVwiXCIyaTNqKyclNFwiNn1cIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3LytBJC5EXCJcIjJEM0UrMSU3LysnJTQjNn4jICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rQSQuMlwiXCIyMjMzKzElNy8rJyU0IzZ/IyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcvK0EkLjhcIlwiMjgzOSsxJTcvKyclNCM2XHg4MCMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3LysxJDcmKyclNFwiNlx4ODFcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3JisxJDcvKyclNFwiNlx4ODFcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3PStXJCBcXDdHKikgXCI3SyojIFwiN0YsLyY3RyopIFwiN0sqIyBcIjdGXCIrLSU3PisjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjBceDgyXCJcIjEhM1x4ODMqQSBcIjBceDg0XCJcIjEhM1x4ODUqNSBcIjBceDg2XCJcIjEhM1x4ODcqKSBcIjczKiMgXCI3LiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3LytVJDcmK0slIFxcN0oqIyBcIjdLLCkmN0oqIyBcIjdLXCIrLSU3JisjJSckJSQkIyBYJCMjIFgkXCIjIFhcIiMgWCshICglIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNy8rYCQ3JitWJSEgXFw3SiojIFwiN0ssKSY3SiojIFwiN0tcIishICglKzIlNyYrKCU0JDZceDg4JCEhJSQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNy4qRyBcIi5MXCJcIjJMM00qOyBcIjBceDg5XCJcIjEhM1x4OEEqLyBcIjBceDg2XCJcIjEhM1x4ODcqIyBcIjczIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhLm1cIlwiMm0zbitLJDBceDhCXCJcIjEhM1x4OEMqNSBcIjBceDhEXCJcIjEhM1x4OEUqKSBcIjBceDhGXCJcIjEhM1x4OTArIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3TitRJC44XCJcIjI4MzkrQSU3TyojIFwiIFsrMSU3UysnJTQkNlx4OTEkICUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3TitrJC44XCJcIjI4MzkrWyU3TyojIFwiIFsrSyU3UytBJTdfKzclN2wqIyBcIiBbKyclNCY2XHg5MiYgJSQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHg5M1wiXCIxJDNceDk0KikgXCIvXHg5NVwiXCIxIzNceDk2KycgNCE2XHg5NyEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3UCtiJCEuOFwiXCIyODM5Ky0kN1IrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKzclLjpcIlwiMjozOysnJTQjNlx4OTgjICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFw3KyopIFwiNy0qIyBcIjdRKzIkLC8mNysqKSBcIjctKiMgXCI3UVwiXCJcIiBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIuPFwiXCIyPDM9KnEgXCIuPlwiXCIyPjM/KmUgXCIuQFwiXCIyQDNBKlkgXCIuQlwiXCIyQjNDKk0gXCIuRFwiXCIyRDNFKkEgXCIuMlwiXCIyMjMzKjUgXCIuNlwiXCIyNjM3KikgXCIuNFwiXCIyNDM1IiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNysqXyBcIjctKlkgXCIuPFwiXCIyPDM9Kk0gXCIuPlwiXCIyPjM/KkEgXCIuQFwiXCIyQDNBKjUgXCIuQlwiXCIyQjNDKikgXCIuRFwiXCIyRDNFLGUmNysqXyBcIjctKlkgXCIuPFwiXCIyPDM9Kk0gXCIuPlwiXCIyPjM/KkEgXCIuQFwiXCIyQDNBKjUgXCIuQlwiXCIyQjNDKikgXCIuRFwiXCIyRDNFXCIrJiA0ITZceDk5ISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1QrTiQhLjhcIlwiMjgzOSstJDdeKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWysjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdVKikgXCI3XFwqIyBcIjdYKyYgNCE2XHg5QSEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXCE3ViszJC5KXCJcIjJKM0srIyUnXCIlJFwiIyBYXCIjIFgsPiYhN1YrMyQuSlwiXCIySjNLKyMlJ1wiJSRcIiMgWFwiIyBYXCIrRyQ3Vys9JS5KXCJcIjJKM0sqIyBcIiBbKyclNCM2XHg5QiMgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiBcXDBceDlDXCJcIjEhM1x4OUQrLCQsKSYwXHg5Q1wiXCIxITNceDlEXCJcIlwiIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEwJFwiXCIxITMlK0EkIFxcMFx4OUVcIlwiMSEzXHg5RiwpJjBceDlFXCJcIjEhM1x4OUZcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS5vXCJcIjJvM3ArQSQ3WSs3JS5xXCJcIjJxM3IrJyU0IzZceEEwIyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3WitceEJGJC44XCJcIjI4MzkrXHhBRiU3WitceEE1JS44XCJcIjI4MzkrXHg5NSU3WitceDhCJS44XCJcIjI4MzkreyU3WitxJS44XCJcIjI4MzkrYSU3WitXJS44XCJcIjI4MzkrRyU3Wis9JS44XCJcIjI4MzkrLSU3WysjJSctJSQtIyBYJCwjIFgkKyMgWCQqIyBYJCkjIFgkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA4MzggXCIhLlx4QTFcIlwiMlx4QTEzXHhBMitceEFGJDdaK1x4QTUlLjhcIlwiMjgzOStceDk1JTdaK1x4OEIlLjhcIlwiMjgzOSt7JTdaK3ElLjhcIlwiMjgzOSthJTdaK1clLjhcIlwiMjgzOStHJTdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJywlJCwjIFgkKyMgWCQqIyBYJCkjIFgkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA3OTUgXCIhLlx4QTFcIlwiMlx4QTEzXHhBMitceDk1JDdaK1x4OEIlLjhcIlwiMjgzOSt7JTdaK3ElLjhcIlwiMjgzOSthJTdaK1clLjhcIlwiMjgzOStHJTdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJyolJCojIFgkKSMgWCQoIyBYJCcjIFgkJiMgWCQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYKlx1MDcwQyBcIiEuXHhBMVwiXCIyXHhBMTNceEEyK3skN1orcSUuOFwiXCIyODM5K2ElN1orVyUuOFwiXCIyODM5K0clN1orPSUuOFwiXCIyODM5Ky0lN1srIyUnKCUkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA2OUQgXCIhLlx4QTFcIlwiMlx4QTEzXHhBMithJDdaK1clLjhcIlwiMjgzOStHJTdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJyYlJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA2NDggXCIhLlx4QTFcIlwiMlx4QTEzXHhBMitHJDdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJyQlJCQjIFgkIyMgWCRcIiMgWFwiIyBYKlx1MDYwRCBcIiEuXHhBMVwiXCIyXHhBMTNceEEyKy0kN1srIyUnXCIlJFwiIyBYXCIjIFgqXHUwNUVDIFwiIS5ceEExXCJcIjJceEExM1x4QTIrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCpcdTA1Q0IgXCIhN1orXHhBNSQuXHhBMVwiXCIyXHhBMTNceEEyK1x4OTUlN1orXHg4QiUuOFwiXCIyODM5K3slN1orcSUuOFwiXCIyODM5K2ElN1orVyUuOFwiXCIyODM5K0clN1orPSUuOFwiXCIyODM5Ky0lN1srIyUnKyUkKyMgWCQqIyBYJCkjIFgkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA1MzggXCIhN1orXHhCNiQhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceDhCJS5ceEExXCJcIjJceEExM1x4QTIreyU3WitxJS44XCJcIjI4MzkrYSU3WitXJS44XCJcIjI4MzkrRyU3Wis9JS44XCJcIjI4MzkrLSU3WysjJScqJSQqIyBYJCkjIFgkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTA0OTQgXCIhN1orXHhDNyQhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceDlDJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK3ElLlx4QTFcIlwiMlx4QTEzXHhBMithJTdaK1clLjhcIlwiMjgzOStHJTdaKz0lLjhcIlwiMjgzOSstJTdbKyMlJyklJCkjIFgkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTAzREYgXCIhN1orXHhEOCQhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceEFEJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1x4ODIlIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrVyUuXHhBMVwiXCIyXHhBMTNceEEyK0clN1orPSUuOFwiXCIyODM5Ky0lN1srIyUnKCUkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTAzMTkgXCIhN1orXHhFOSQhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceEJFJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1x4OTMlIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsraCUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWys9JS5ceEExXCJcIjJceEExM1x4QTIrLSU3WysjJScnJSQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTAyNDIgXCIhN1orXHUwMTE0JCEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1x4RTklIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHhCRSUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceDkzJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK2glIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrPSUuXHhBMVwiXCIyXHhBMTNceEEyKy0lN1orIyUnKCUkKCMgWCQnIyBYJCYjIFgkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCpcdTAxNDAgXCIhN1orXHUwMTM1JCEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1x1MDEwQSUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWytceERGJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbK1x4QjQlIS44XCJcIjI4MzkrLSQ3WisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrXHg4OSUhLjhcIlwiMjgzOSstJDdaKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWyteJSEuOFwiXCIyODM5Ky0kN1orIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKzMlLlx4QTFcIlwiMlx4QTEzXHhBMisjJScoJSQoIyBYJCcjIFgkJiMgWCQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYKyYgNCE2XHhBMyEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITcjK1MkNyMqIyBcIiBbK0MlNyMqIyBcIiBbKzMlNyMqIyBcIiBbKyMlJyQlJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1orPSQuOFwiXCIyODM5Ky0lN1orIyUnIyUkIyMgWCRcIiMgWFwiIyBYKiMgXCI3XFwiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XSt1JC5KXCJcIjJKM0srZSU3XStbJS5KXCJcIjJKM0srSyU3XStBJS5KXCJcIjJKM0srMSU3XSsnJTQnNlx4QTQnICUkJyMgWCQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEuXHhBNVwiXCIyXHhBNTNceEE2KzMkMFx4QTdcIlwiMSEzXHhBOCsjJSdcIiUkXCIjIFhcIiMgWCpceEEwIFwiIS5ceEE5XCJcIjJceEE5M1x4QUErPSQwXHhBQlwiXCIxITNceEFDKy0lNyErIyUnIyUkIyMgWCRcIiMgWFwiIyBYKm8gXCIhLlx4QURcIlwiMlx4QUQzXHhBRSs3JDchKy0lNyErIyUnIyUkIyMgWCRcIiMgWFwiIyBYKkQgXCIhMFx4QUZcIlwiMSEzXHhCMCstJDchKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCI3ISIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3ISojIFwiIFsrYyQ3ISojIFwiIFsrUyU3ISojIFwiIFsrQyU3ISojIFwiIFsrMyU3ISojIFwiIFsrIyUnJSUkJSMgWCQkIyBYJCMjIFgkXCIjIFhcIiMgWCsnIDQhNlx4QjEhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFwhLjJcIlwiMjIzMystJDdgKyMlJ1wiJSRcIiMgWFwiIyBYLD4mIS4yXCJcIjIyMzMrLSQ3YCsjJSdcIiUkXCIjIFhcIiMgWFwiIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3YSpBIFwiN2IqOyBcIjdjKjUgXCI3ZCovIFwiN2UqKSBcIjdmKiMgXCI3ZyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9ceEIyXCJcIjEqM1x4QjMrYiQvXHhCNFwiXCIxIzNceEI1KkcgXCIvXHhCNlwiXCIxIzNceEI3KjsgXCIvXHhCOFwiXCIxJDNceEI5Ki8gXCIvXHhCQVwiXCIxIzNceEJCKiMgXCI3NisoJTRcIjZceEJDXCIhICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9ceEJEXCJcIjElM1x4QkUrSiQvXHhCRlwiXCIxJTNceEMwKi8gXCIvXHhDMVwiXCIxXCIzXHhDMiojIFwiNzYrKCU0XCI2XHhDM1wiISAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhDNFwiXCIxJzNceEM1KzIkN1x4OEYrKCU0XCI2XHhDNlwiISAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhDN1wiXCIxJDNceEM4KzIkN1x4RUYrKCU0XCI2XHhDOVwiISAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhDQVwiXCIxJjNceENCKzIkN1QrKCU0XCI2XHhDQ1wiISAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhDRFwiXCIxXCIzXHhDRStSJCEuPlwiXCIyPjM/Ky0kNzYrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKyclNFwiNlx4Q0ZcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3aCtUJCEuPlwiXCIyPjM/Ky0kN2krIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKyklNFwiNlx4RDBcIlwiISAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3aismJCwjJjdqXCJcIlwiIFgrISAoJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDdqKyYkLCMmN2pcIlwiXCIgWCshICglIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3ayopIFwiNysqIyBcIjctIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIub1wiXCIybzNwKmUgXCIucVwiXCIycTNyKlkgXCIuNFwiXCIyNDM1Kk0gXCIuOFwiXCIyODM5KkEgXCIuPFwiXCIyPDM9KjUgXCIuQFwiXCIyQDNBKikgXCIuQlwiXCIyQjNDIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhLjZcIlwiMjYzNyt1JDdtK2slIFxcIS48XCJcIjI8Mz0rLSQ3bSsjJSdcIiUkXCIjIFhcIiMgWCw+JiEuPFwiXCIyPDM9Ky0kN20rIyUnXCIlJFwiIyBYXCIjIFhcIisjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3bitDJC4+XCJcIjI+Mz8rMyU3byspJTQjNlx4RDEjXCJcIiAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcN3AqKSBcIjcrKiMgXCI3LSsyJCwvJjdwKikgXCI3KyojIFwiNy1cIlwiXCIgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIFxcN3AqKSBcIjcrKiMgXCI3LSwvJjdwKikgXCI3KyojIFwiNy1cIiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLm9cIlwiMm8zcCplIFwiLnFcIlwiMnEzcipZIFwiLjRcIlwiMjQzNSpNIFwiLjZcIlwiMjYzNypBIFwiLjhcIlwiMjgzOSo1IFwiLkBcIlwiMkAzQSopIFwiLkJcIlwiMkIzQyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4OTAqIyBcIjdyIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4OEYrSyQ3JytBJTdzKzclNycrLSU3XHg4NCsjJSclJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3TSojIFwiN3QiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3fytHJC44XCJcIjI4MzkrNyU3dSojIFwiN3grJyU0IzZceEQyIyAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITd2KiMgXCI3dytOJCEuNlwiXCIyNjM3Ky0kN1x4ODMrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIiBbKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhLlx4RDNcIlwiMlx4RDMzXHhENCs9JDdceDgwKzMlN3cqIyBcIiBbKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS40XCJcIjI0MzUrLSQ3eysjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITd6KzUkIFxcN3ksIyY3eVwiKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3KiopIFwiNysqIyBcIjctIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3KypceDhGIFwiNy0qXHg4OSBcIi4yXCJcIjIyMzMqfSBcIi42XCJcIjI2MzcqcSBcIi44XCJcIjI4MzkqZSBcIi46XCJcIjI6MzsqWSBcIi48XCJcIjI8Mz0qTSBcIi4+XCJcIjI+Mz8qQSBcIi5AXCJcIjJAM0EqNSBcIi5CXCJcIjJCM0MqKSBcIi5EXCJcIjJEM0UiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3fCtrJCBcXCEuNFwiXCIyNDM1Ky0kN3wrIyUnXCIlJFwiIyBYXCIjIFgsPiYhLjRcIlwiMjQzNSstJDd8KyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3fiwjJjd+XCIrayQgXFwhLjJcIlwiMjIzMystJDd9KyMlJ1wiJSRcIiMgWFwiIyBYLD4mIS4yXCJcIjIyMzMrLSQ3fSsjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFw3fiwjJjd+XCIiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjcrKncgXCI3LSpxIFwiLjhcIlwiMjgzOSplIFwiLjpcIlwiMjozOypZIFwiLjxcIlwiMjwzPSpNIFwiLj5cIlwiMj4zPypBIFwiLkBcIlwiMkAzQSo1IFwiLkJcIlwiMkIzQyopIFwiLkRcIlwiMkQzRSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdcIitceDhEJCBcXDdcIipHIFwiNyEqQSBcIi5AXCJcIjJAM0EqNSBcIi5GXCJcIjJGM0cqKSBcIi5KXCJcIjJKM0ssTSY3XCIqRyBcIjchKkEgXCIuQFwiXCIyQDNBKjUgXCIuRlwiXCIyRjNHKikgXCIuSlwiXCIySjNLXCIrJyU0XCI2XHhENVwiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4ODEqIyBcIjdceDgyIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhITdPKzMkLjpcIlwiMjozOysjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrLSQ3UysjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiBcXDcrKlx4ODMgXCI3LSp9IFwiLkJcIlwiMkIzQypxIFwiLkRcIlwiMkQzRSplIFwiLjJcIlwiMjIzMypZIFwiLjhcIlwiMjgzOSpNIFwiLjpcIlwiMjozOypBIFwiLjxcIlwiMjwzPSo1IFwiLj5cIlwiMj4zPyopIFwiLkBcIlwiMkAzQStceDhDJCxceDg5JjcrKlx4ODMgXCI3LSp9IFwiLkJcIlwiMkIzQypxIFwiLkRcIlwiMkQzRSplIFwiLjJcIlwiMjIzMypZIFwiLjhcIlwiMjgzOSpNIFwiLjpcIlwiMjozOypBIFwiLjxcIlwiMjwzPSo1IFwiLj5cIlwiMj4zPyopIFwiLkBcIlwiMkAzQVwiXCJcIiBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFw3eSwjJjd5XCIiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHg5NVwiXCIxIzNceEQ2K3kkLjRcIlwiMjQzNStpJSBcXDchKyYkLCMmNyFcIlwiXCIgWCtQJS5KXCJcIjJKM0srQCUgXFw3ISsmJCwjJjchXCJcIlwiIFgrJyU0JTZceEQ3JSAlJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceEQ4XCJcIjJceEQ4M1x4RDkiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceERBXCJcIjJceERBM1x4REIiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceERDXCJcIjJceERDM1x4REQiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceERFXCJcIjJceERFM1x4REYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceEUwXCJcIjJceEUwM1x4RTEiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceEUyXCJcIjJceEUyM1x4RTMiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceEU0XCJcIjJceEU0M1x4RTUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceEU2XCJcIjJceEU2M1x4RTciKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceEU4XCJcIjJceEU4M1x4RTkiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIi5ceEVBXCJcIjJceEVBM1x4RUIiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg4NSpTIFwiN1x4ODYqTSBcIjdceDg4KkcgXCI3XHg4OSpBIFwiN1x4OEEqOyBcIjdceDhCKjUgXCI3XHg4QyovIFwiN1x4OEQqKSBcIjdceDhFKiMgXCI3NismIDQhNlx4RUMhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg4NCtLJDcnK0ElN1x4OTErNyU3JystJTdceDkzKyMlJyUlJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5MisnIDQhNlx4RUQhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNyErNyQ3ISstJTchKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDcqKkEgXCI3Kyo7IFwiNy0qNSBcIjczKi8gXCI3NCopIFwiNycqIyBcIjcoLEcmNyoqQSBcIjcrKjsgXCI3LSo1IFwiNzMqLyBcIjc0KikgXCI3JyojIFwiNyhcIismIDQhNlx4RUUhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhCNStfJCBcXCE3QSstJDdceEI1KyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdBKy0kN1x4QjUrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITc5K1IkIS46XCJcIjI6MzsrLSQ3OSsjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrJyU0XCI2XHhFRlwiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITc6KmogXCIhN1x4OTcrXyQgXFwhN0ErLSQ3XHg5NysjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QSstJDdceDk3KyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgrJiA0ITZceEYwISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN0wqIyBcIjdceDk4K2MkIFxcITdCKy0kN1x4OUErIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHg5QSsjJSdcIiUkXCIjIFhcIiMgWFwiKyclNFwiNlx4RjFcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5OSojIFwiIFsrQSQ3QCs3JTdNKy0lNz8rIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhNzYrXyQgXFwhNy4rLSQ3NisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3ListJDc2KyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgqIyBcIjdIKycgNCE2XHhGMiEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceDlCKikgXCI3XHg5QyojIFwiN1x4OUYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhGM1wiXCIxITNceEY0KzwkNzwrMiU3XHg5RSsoJTQjNlx4RjUjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9ceEY2XCJcIjEnM1x4RjcrPCQ3PCsyJTdceDlEKyglNCM2XHhGOCMhICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNyErJiQsIyY3IVwiXCJcIiBYKycgNCE2XHhGOSEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEuXHhGQVwiXCIyXHhGQTNceEZCK3gkIS5KXCJcIjJKM0srUyQ3ISojIFwiIFsrQyU3ISojIFwiIFsrMyU3ISojIFwiIFsrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgqIyBcIiBbKyclNFwiNlx4RkNcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3NitOJCE3PCstJDdceEEwKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWyspJTRcIjZceEZEXCJcIiEgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3NiopIFwiN1QqIyBcIjdIIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4QTIrXyQgXFwhN0IrLSQ3XHhBMysjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceEEzKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHhGRVwiXCIxJjNceEZGKkcgXCIvXHUwMTAwXCJcIjEnM1x1MDEwMSo7IFwiL1x1MDEwMlwiXCIxJDNcdTAxMDMqLyBcIi9cdTAxMDRcIlwiMSUzXHUwMTA1KiMgXCI3NismIDQhNlx1MDEwNiEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4QTQqIyBcIjdceDlGIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDEwN1wiXCIxKDNcdTAxMDgrTyQ3PCtFJS9cdTAxMDlcIlwiMSgzXHUwMTBBKi8gXCIvXHUwMTBCXCJcIjEoM1x1MDEwQyojIFwiNzYrIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNzYrXyQgXFwhN0ErLSQ3NisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QSstJDc2KyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3ISsmJCwjJjchXCJcIlwiIFgrJyA0ITZcdTAxMEQhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4QTgrJiA0ITZcdTAxMEUhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhBOStzJDc7K2klN1x4QUUrXyUgXFwhN0IrLSQ3XHhBRisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceEFGKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceEFBKiMgXCI3XHhBQiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiL1x1MDEwRlwiXCIxJDNcdTAxMTAqUyBcIi9cdTAxMTFcIlwiMSUzXHUwMTEyKkcgXCIvXHUwMTEzXCJcIjElM1x1MDExNCo7IFwiL1x1MDExNVwiXCIxJTNcdTAxMTYqLyBcIi9cdTAxMTdcIlwiMSszXHUwMTE4KiMgXCI3XHhBQyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiL1x1MDExOVwiXCIxJzNcdTAxMUEqLyBcIi9cdTAxMUJcIlwiMSkzXHUwMTFDKiMgXCI3XHhBQyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiNzYqIyBcIjdceEFEIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDExRFwiXCIxXCIzXHUwMTFFKy0kNzYrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceEFDKiMgXCI3NiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITc2KzckNzwrLSU3XHhCMCsjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjc2KiMgXCI3SCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEIyKzckNy4rLSU3XHg4RisjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEgXFw3ISsmJCwjJjchXCJcIlwiIFgrJyA0ITZcdTAxMUYhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4OUQrJyA0ITZcdTAxMjAhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4QjUrZCQgXFwhN0IrLSQ3XHg5RisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYXCIrKCU0XCI2XHUwMTIxXCIhISUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3NytrJCBcXCEuSlwiXCIySjNLKy0kNzcrIyUnXCIlJFwiIyBYXCIjIFgsPiYhLkpcIlwiMkozSystJDc3KyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgrISAoJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdMKiMgXCI3XHg5OCtjJCBcXCE3QistJDdceEI3KyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4QjcrIyUnXCIlJFwiIyBYXCIjIFhcIisnJTRcIjZcdTAxMjJcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceEI4KiMgXCI3XHg5RiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMjNcIlwiMSMzXHUwMTI0KzwkNzwrMiU3NisoJTQjNlx1MDEyNSMhICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNyErJiQsIyY3IVwiXCJcIiBYKycgNCE2XHUwMTI2ISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceDlEKycgNCE2XHUwMTI3ISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDdceDk5LCMmN1x4OTlcIitceDgxJDdAK3clN00rbSU3PytjJSBcXCE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFhcIisnJTQlNlx1MDEyOCUgJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHhCRCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMjlcIlwiMSYzXHUwMTJBK3MkNy4raSU3XHhDMCtfJSBcXCE3QSstJDdceEMwKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdBKy0kN1x4QzArIyUnXCIlJFwiIyBYXCIjIFhcIisjJSckJSQkIyBYJCMjIFgkXCIjIFhcIiMgWCojIFwiN1x4QkUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3NitzJDcuK2klN1x4QkYrXyUgXFwhN0ErLSQ3XHhCRisjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QSstJDdceEJGKyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3Nis9JDc8KzMlNzYqIyBcIjdIKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4QzEqRyBcIjdceEMzKkEgXCI3XHhDNSo7IFwiN1x4QzcqNSBcIjdceEM4Ki8gXCI3XHhDOSopIFwiN1x4Q0EqIyBcIjdceEJGIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDEyQlwiXCIxJTNcdTAxMkMrNyQ3PCstJTdceEMyKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdJKycgNCE2XHUwMTJEISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMkVcIlwiMSYzXHUwMTJGK1x4QTUkNzwrXHg5QiU3RCtceDkxJTdceEM0K1x4ODclIFxcISBcXDcnKyYkLCMmNydcIlwiXCIgWCstJDdceEM0KyMlJ1wiJSRcIiMgWFwiIyBYLEcmISBcXDcnKyYkLCMmNydcIlwiXCIgWCstJDdceEM0KyMlJ1wiJSRcIiMgWFwiIyBYXCIrLSU3RSsjJScmJSQmIyBYJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjd0KiMgXCI3dyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMzBcIlwiMSUzXHUwMTMxKzckNzwrLSU3XHhDNisjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3SSsnIDQhNlx1MDEzMiEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTMzXCJcIjEmM1x1MDEzNCs8JDc8KzIlN0krKCU0IzZcdTAxMzUjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxMzZcIlwiMSUzXHUwMTM3K18kNzwrVSUhL1x1MDEzOFwiXCIxJDNcdTAxMzkrJiA0ITZcdTAxM0EhICUqNCBcIiEvXHUwMTNCXCJcIjElM1x1MDEzQysmIDQhNlx1MDEzRCEgJSsjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTNFXCJcIjEpM1x1MDEzRitUJDc8K0olL1x1MDE0MFwiXCIxIzNcdTAxNDEqLyBcIi9cdTAxNDJcIlwiMSgzXHUwMTQzKiMgXCI3NisoJTQjNlx1MDE0NCMhICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE0NVwiXCIxIzNcdTAxNDYrXHg5RSQ3PCtceDk0JTdEK1x4OEElITdceENCK2skIFxcIS5EXCJcIjJEM0UrLSQ3XHhDQisjJSdcIiUkXCIjIFhcIiMgWCw+JiEuRFwiXCIyRDNFKy0kN1x4Q0IrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCstJTdFKyMlJyUlJCUjIFgkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTQ3XCJcIjEoM1x1MDE0OCovIFwiL1x1MDE0OVwiXCIxJDNcdTAxNEEqIyBcIjc2KycgNCE2XHUwMTRCISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITc2K18kIFxcITdBKy0kNzYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0ErLSQ3NisjJSdcIiUkXCIjIFhcIiMgWFwiKyMlJ1wiJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4Q0UrSyQ3LitBJTdceENFKzclNy4rLSU3XHg4RisjJSclJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhIFxcNyErJiQsIyY3IVwiXCJcIiBYKycgNCE2XHUwMTRDISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEQwK2MkIFxcITdBKy0kN1x4RDArIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0ErLSQ3XHhEMCsjJSdcIiUkXCIjIFhcIiMgWFwiKyclNFwiNlx1MDE0RFwiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceDk4K2MkIFxcITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHg5RisjJSdcIiUkXCIjIFhcIiMgWFwiKyclNFwiNlx1MDE0RVwiICUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdMKlQgXCI3XHg5OCpOIFwiITdAKiMgXCIgWys9JDd0KzMlNz8qIyBcIiBbKyMlJyMlJCMjIFgkXCIjIFhcIiMgWCtjJCBcXCE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFhcIisnJTRcIjZcdTAxNEZcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhEMytjJCBcXCE3QistJDdceEQ0KyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4RDQrIyUnXCIlJFwiIyBYXCIjIFhcIisnJTRcIjZcdTAxNTBcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5NSsmIDQhNlx1MDE1MSEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxNTJcIlwiMSgzXHUwMTUzKzwkNzwrMiU3NisoJTQjNlx1MDE1NCMhICUkIyMgWCRcIiMgWFwiIyBYKmogXCIhL1x1MDE1NVwiXCIxJjNcdTAxNTYrPCQ3PCsyJTc2KyglNCM2XHUwMTU3IyEgJSQjIyBYJFwiIyBYXCIjIFgqOiBcIiEvXHUwMTU4XCJcIjEqM1x1MDE1OSsmIDQhNlx1MDE1QSEgJSojIFwiN1x4OUYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEhNzYrbyQgXFwhN0ErMiQ3NisoJTRcIjZcdTAxNUJcIiEgJSRcIiMgWFwiIyBYLD0mITdBKzIkNzYrKCU0XCI2XHUwMTVCXCIhICUkXCIjIFhcIiMgWFwiKyklNFwiNlx1MDE1Q1wiXCIhICUkXCIjIFhcIiMgWCojIFwiIFsrJyA0ITZcdTAxNUQhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RDcrXyQgXFwhN0ErLSQ3XHhENysjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QSstJDdceEQ3KyMlJ1wiJSRcIiMgWFwiIyBYXCIrIyUnXCIlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHg5OCtfJCBcXCE3QistJDdceDlGKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDchKyYkLCMmNyFcIlwiXCIgWCsnIDQhNlx1MDE1RSEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhEQStfJCBcXCE3QistJDdceERCKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4REIrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxNUZcIlwiMSYzXHUwMTYwKjsgXCIvXHUwMTYxXCJcIjEnM1x1MDE2MiovIFwiL1x1MDE2M1wiXCIxKjNcdTAxNjQqIyBcIjc2KyYgNCE2XHUwMTY1ISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE2NlwiXCIxJjNcdTAxNjcrPCQ3PCsyJTdceERDKyglNCM2XHUwMTY4IyEgJSQjIyBYJFwiIyBYXCIjIFgqXHg4MyBcIiEvXHhGNlwiXCIxJzNceEY3KzwkNzwrMiU3XHg5RCsoJTQjNlx1MDE2OSMhICUkIyMgWCRcIiMgWFwiIyBYKlMgXCIhL1x1MDE2QVwiXCIxKzNcdTAxNkIrPCQ3PCsyJTdceDlEKyglNCM2XHUwMTZDIyEgJSQjIyBYJFwiIyBYXCIjIFgqIyBcIjdceDlGIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIvXHUwMTZEXCJcIjErM1x1MDE2RSprIFwiL1x1MDE2RlwiXCIxKTNcdTAxNzAqXyBcIi9cdTAxNzFcIlwiMSgzXHUwMTcyKlMgXCIvXHUwMTczXCJcIjEnM1x1MDE3NCpHIFwiL1x1MDE3NVwiXCIxJjNcdTAxNzYqOyBcIi9cdTAxNzdcIlwiMSozXHUwMTc4Ki8gXCIvXHUwMTc5XCJcIjEpM1x1MDE3QSojIFwiNzYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjcxKiMgXCIgWyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3NitvJCBcXCE3QSsyJDc2KyglNFwiNlx1MDE1QlwiISAlJFwiIyBYXCIjIFgsPSYhN0ErMiQ3NisoJTRcIjZcdTAxNUJcIiEgJSRcIiMgWFwiIyBYXCIrKSU0XCI2XHUwMTVDXCJcIiEgJSRcIiMgWFwiIyBYKiMgXCIgWysnIDQhNlx1MDE3QiEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3TCojIFwiN1x4OTgrYyQgXFwhN0IrLSQ3XHhFMCsjJSdcIiUkXCIjIFhcIiMgWCw4JiE3QistJDdceEUwKyMlJ1wiJSRcIiMgWFwiIyBYXCIrJyU0XCI2XHUwMTdDXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHhCOCojIFwiN1x4OUYiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhFMitfJCBcXCE3QSstJDdceEUyKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdBKy0kN1x4RTIrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceEU5K3MkNy4raSU3XHhFQytfJSBcXCE3QistJDdceEUzKyMlJ1wiJSRcIiMgWFwiIyBYLDgmITdCKy0kN1x4RTMrIyUnXCIlJFwiIyBYXCIjIFhcIisjJSckJSQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1x4RTQqOyBcIjdceEU1KjUgXCI3XHhFNiovIFwiN1x4RTcqKSBcIjdceEU4KiMgXCI3XHg5RiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxN0RcIlwiMSMzXHUwMTdFKzwkNzwrMiU3XHhFRisoJTQjNlx1MDE3RiMhICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE4MFwiXCIxJTNcdTAxODErPCQ3PCsyJTdUKyglNCM2XHUwMTgyIyEgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTgzXCJcIjEoM1x1MDE4NCtCJDc8KzglN1xcKiMgXCI3WSsoJTQjNlx1MDE4NSMhICUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x1MDE4NlwiXCIxJjNcdTAxODcrPCQ3PCsyJTc2KyglNCM2XHUwMTg4IyEgJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTg5XCJcIjElM1x1MDE4QStUJCE3PCs1JCBcXDchLCMmNyFcIisjJSdcIiUkXCIjIFhcIiMgWCojIFwiIFsrJyU0XCI2XHUwMThCXCIgJSRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RUErSyQ3OytBJTc2KzclNzsrLSU3XHhFQisjJSclJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4OTVcIlwiMSMzXHhENiojIFwiNzYrJyA0ITZcdTAxOEMhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhL1x4QjRcIlwiMSMzXHUwMThEKkcgXCIvXHhCNlwiXCIxIzNcdTAxOEUqOyBcIi9ceEJBXCJcIjEjM1x1MDE4RiovIFwiL1x4QjhcIlwiMSQzXHUwMTkwKiMgXCI3NisnIDQhNlx1MDE5MSEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhFRCtIJCE3QystJDdceEVFKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWysjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdVKikgXCI3XFwqIyBcIjdYKyYgNCE2XHUwMTkyISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhITchKiMgXCIgWytjJDchKiMgXCIgWytTJTchKiMgXCIgWytDJTchKiMgXCIgWyszJTchKiMgXCIgWysjJSclJSQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYKycgNCE2XHUwMTkzISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISE3IStDJDchKiMgXCIgWyszJTchKiMgXCIgWysjJScjJSQjIyBYJFwiIyBYXCIjIFgrJyA0ITZcdTAxOTQhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCI3XHhCRCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceDlEK2QkIFxcITdCKy0kN1x4RjIrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHhGMisjJSdcIiUkXCIjIFhcIiMgWFwiKyglNFwiNlx1MDE5NVwiISElJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIjdceEYzKiMgXCI3XHg5RiIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS5cdTAxOTZcIlwiMlx1MDE5NjNcdTAxOTcrTiQ3PCtEJS5cdTAxOThcIlwiMlx1MDE5ODNcdTAxOTkqKSBcIi5cdTAxOUFcIlwiMlx1MDE5QTNcdTAxOUIrKCU0IzZcdTAxOUMjISAlJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdceDlEK2QkIFxcITdCKy0kN1x4OUYrIyUnXCIlJFwiIyBYXCIjIFgsOCYhN0IrLSQ3XHg5RisjJSdcIiUkXCIjIFhcIiMgWFwiKyglNFwiNlx1MDE5RFwiISElJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3Nis3JDcwKy0lN1x4RjYrIyUnIyUkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFw3MiopIFwiNzQqIyBcIjcuLC8mNzIqKSBcIjc0KiMgXCI3LlwiIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIgXFw3JSwjJjclXCIiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhGOSs9JC44XCJcIjI4MzkrLSU3XHhGQSsjJScjJSQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiEvXHUwMTlFXCJcIjElM1x1MDE5RiopIFwiL1x1MDFBMFwiXCIxJDNcdTAxQTErJyA0ITZcdTAxQTIhISAlIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhN1x4RkIrTiQhLjhcIlwiMjgzOSstJDdeKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWysjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdcXCopIFwiN1gqIyBcIjdceDgyKycgNCE2XHUwMUEzISEgJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiISBcXDdceEZEKikgXCI3LSojIFwiN1x4RkUsLyY3XHhGRCopIFwiNy0qIyBcIjdceEZFXCIrISAoJSIpLAogICAgICAgICAgcGVnJGRlY29kZSgiN1wiKlMgXCI3ISpNIFwiLkZcIlwiMkYzRypBIFwiLkpcIlwiMkozSyo1IFwiLkhcIlwiMkgzSSopIFwiLk5cIlwiMk4zTyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiLkxcIlwiMkwzTSpceDk1IFwiLkJcIlwiMkIzQypceDg5IFwiLjxcIlwiMjwzPSp9IFwiLlJcIlwiMlIzUypxIFwiLlRcIlwiMlQzVSplIFwiLlZcIlwiMlYzVypZIFwiLlBcIlwiMlAzUSpNIFwiLkBcIlwiMkAzQSpBIFwiLkRcIlwiMkQzRSo1IFwiLjJcIlwiMjIzMyopIFwiLj5cIlwiMj4zPyIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdcdTAxMDAraCQuOFwiXCIyODM5K1glN1x4RkErTiUhLlx1MDFBNFwiXCIyXHUwMUE0M1x1MDFBNSstJDdceEVCKyMlJ1wiJSRcIiMgWFwiIyBYKiMgXCIgWysjJSckJSQkIyBYJCMjIFgkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiIS9cdTAxQTZcIlwiMSUzXHUwMUE3KikgXCIvXHUwMUE4XCJcIjEkM1x1MDFBOSsnIDQhNlx1MDFBMiEhICUiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHhFQitRJC9ceEI0XCJcIjEjM1x4QjUqNyBcIi9ceEI2XCJcIjEjM1x4QjcqKyBcIiBcXDcrLCMmNytcIisnJTRcIjZcdTAxQUFcIiAlJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHUwMTA0K1x4OEYkLkZcIlwiMkYzRyt/JTdcdTAxMDMrdSUuRlwiXCIyRjNHK2UlN1x1MDEwMytbJS5GXCJcIjJGM0crSyU3XHUwMTAzK0ElLkZcIlwiMkYzRysxJTdcdTAxMDUrJyU0KTZcdTAxQUIpICUkKSMgWCQoIyBYJCcjIFgkJiMgWCQlIyBYJCQjIFgkIyMgWCRcIiMgWFwiIyBYIiksCiAgICAgICAgICBwZWckZGVjb2RlKCIhNyMrQSQ3Iys3JTcjKy0lNyMrIyUnJCUkJCMgWCQjIyBYJFwiIyBYXCIjIFgiKSwKICAgICAgICAgIHBlZyRkZWNvZGUoIiE3XHUwMTAzKy0kN1x1MDEwMysjJSdcIiUkXCIjIFhcIiMgWCIpLAogICAgICAgICAgcGVnJGRlY29kZSgiITdcdTAxMDMrNyQ3XHUwMTAzKy0lN1x1MDEwMysjJScjJSQjIyBYJFwiIyBYXCIjIFgiKQogICAgICAgIF0sCgogICAgICAgIHBlZyRjdXJyUG9zICAgICAgICAgID0gMCwKICAgICAgICBwZWckcmVwb3J0ZWRQb3MgICAgICA9IDAsCiAgICAgICAgcGVnJGNhY2hlZFBvcyAgICAgICAgPSAwLAogICAgICAgIHBlZyRjYWNoZWRQb3NEZXRhaWxzID0geyBsaW5lOiAxLCBjb2x1bW46IDEsIHNlZW5DUjogZmFsc2UgfSwKICAgICAgICBwZWckbWF4RmFpbFBvcyAgICAgICA9IDAsCiAgICAgICAgcGVnJG1heEZhaWxFeHBlY3RlZCAgPSBbXSwKICAgICAgICBwZWckc2lsZW50RmFpbHMgICAgICA9IDAsCgogICAgICAgIHBlZyRyZXN1bHQ7CgogICAgaWYgKCJzdGFydFJ1bGUiIGluIG9wdGlvbnMpIHsKICAgICAgaWYgKCEob3B0aW9ucy5zdGFydFJ1bGUgaW4gcGVnJHN0YXJ0UnVsZUluZGljZXMpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBzdGFydCBwYXJzaW5nIGZyb20gcnVsZSBcIiIgKyBvcHRpb25zLnN0YXJ0UnVsZSArICJcIi4iKTsKICAgICAgfQoKICAgICAgcGVnJHN0YXJ0UnVsZUluZGV4ID0gcGVnJHN0YXJ0UnVsZUluZGljZXNbb3B0aW9ucy5zdGFydFJ1bGVdOwogICAgfQoKICAgIGZ1bmN0aW9uIHRleHQoKSB7CiAgICAgIHJldHVybiBpbnB1dC5zdWJzdHJpbmcocGVnJHJlcG9ydGVkUG9zLCBwZWckY3VyclBvcyk7CiAgICB9CgogICAgZnVuY3Rpb24gb2Zmc2V0KCkgewogICAgICByZXR1cm4gcGVnJHJlcG9ydGVkUG9zOwogICAgfQoKICAgIGZ1bmN0aW9uIGxpbmUoKSB7CiAgICAgIHJldHVybiBwZWckY29tcHV0ZVBvc0RldGFpbHMocGVnJHJlcG9ydGVkUG9zKS5saW5lOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbHVtbigpIHsKICAgICAgcmV0dXJuIHBlZyRjb21wdXRlUG9zRGV0YWlscyhwZWckcmVwb3J0ZWRQb3MpLmNvbHVtbjsKICAgIH0KCiAgICBmdW5jdGlvbiBleHBlY3RlZChkZXNjcmlwdGlvbikgewogICAgICB0aHJvdyBwZWckYnVpbGRFeGNlcHRpb24oCiAgICAgICAgbnVsbCwKICAgICAgICBbeyB0eXBlOiAib3RoZXIiLCBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gfV0sCiAgICAgICAgcGVnJHJlcG9ydGVkUG9zCiAgICAgICk7CiAgICB9CgogICAgZnVuY3Rpb24gZXJyb3IobWVzc2FnZSkgewogICAgICB0aHJvdyBwZWckYnVpbGRFeGNlcHRpb24obWVzc2FnZSwgbnVsbCwgcGVnJHJlcG9ydGVkUG9zKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwZWckY29tcHV0ZVBvc0RldGFpbHMocG9zKSB7CiAgICAgIGZ1bmN0aW9uIGFkdmFuY2UoZGV0YWlscywgc3RhcnRQb3MsIGVuZFBvcykgewogICAgICAgIHZhciBwLCBjaDsKCiAgICAgICAgZm9yIChwID0gc3RhcnRQb3M7IHAgPCBlbmRQb3M7IHArKykgewogICAgICAgICAgY2ggPSBpbnB1dC5jaGFyQXQocCk7CiAgICAgICAgICBpZiAoY2ggPT09ICJcbiIpIHsKICAgICAgICAgICAgaWYgKCFkZXRhaWxzLnNlZW5DUikgeyBkZXRhaWxzLmxpbmUrKzsgfQogICAgICAgICAgICBkZXRhaWxzLmNvbHVtbiA9IDE7CiAgICAgICAgICAgIGRldGFpbHMuc2VlbkNSID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAiXHIiIHx8IGNoID09PSAiXHUyMDI4IiB8fCBjaCA9PT0gIlx1MjAyOSIpIHsKICAgICAgICAgICAgZGV0YWlscy5saW5lKys7CiAgICAgICAgICAgIGRldGFpbHMuY29sdW1uID0gMTsKICAgICAgICAgICAgZGV0YWlscy5zZWVuQ1IgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGV0YWlscy5jb2x1bW4rKzsKICAgICAgICAgICAgZGV0YWlscy5zZWVuQ1IgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChwZWckY2FjaGVkUG9zICE9PSBwb3MpIHsKICAgICAgICBpZiAocGVnJGNhY2hlZFBvcyA+IHBvcykgewogICAgICAgICAgcGVnJGNhY2hlZFBvcyA9IDA7CiAgICAgICAgICBwZWckY2FjaGVkUG9zRGV0YWlscyA9IHsgbGluZTogMSwgY29sdW1uOiAxLCBzZWVuQ1I6IGZhbHNlIH07CiAgICAgICAgfQogICAgICAgIGFkdmFuY2UocGVnJGNhY2hlZFBvc0RldGFpbHMsIHBlZyRjYWNoZWRQb3MsIHBvcyk7CiAgICAgICAgcGVnJGNhY2hlZFBvcyA9IHBvczsKICAgICAgfQoKICAgICAgcmV0dXJuIHBlZyRjYWNoZWRQb3NEZXRhaWxzOwogICAgfQoKICAgIGZ1bmN0aW9uIHBlZyRmYWlsKGV4cGVjdGVkKSB7CiAgICAgIGlmIChwZWckY3VyclBvcyA8IHBlZyRtYXhGYWlsUG9zKSB7IHJldHVybjsgfQoKICAgICAgaWYgKHBlZyRjdXJyUG9zID4gcGVnJG1heEZhaWxQb3MpIHsKICAgICAgICBwZWckbWF4RmFpbFBvcyA9IHBlZyRjdXJyUG9zOwogICAgICAgIHBlZyRtYXhGYWlsRXhwZWN0ZWQgPSBbXTsKICAgICAgfQoKICAgICAgcGVnJG1heEZhaWxFeHBlY3RlZC5wdXNoKGV4cGVjdGVkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwZWckYnVpbGRFeGNlcHRpb24obWVzc2FnZSwgZXhwZWN0ZWQsIHBvcykgewogICAgICBmdW5jdGlvbiBjbGVhbnVwRXhwZWN0ZWQoZXhwZWN0ZWQpIHsKICAgICAgICB2YXIgaSA9IDE7CgogICAgICAgIGV4cGVjdGVkLnNvcnQoZnVuY3Rpb24oYSwgYikgewogICAgICAgICAgaWYgKGEuZGVzY3JpcHRpb24gPCBiLmRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgIH0gZWxzZSBpZiAoYS5kZXNjcmlwdGlvbiA+IGIuZGVzY3JpcHRpb24pIHsKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgd2hpbGUgKGkgPCBleHBlY3RlZC5sZW5ndGgpIHsKICAgICAgICAgIGlmIChleHBlY3RlZFtpIC0gMV0gPT09IGV4cGVjdGVkW2ldKSB7CiAgICAgICAgICAgIGV4cGVjdGVkLnNwbGljZShpLCAxKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGJ1aWxkTWVzc2FnZShleHBlY3RlZCwgZm91bmQpIHsKICAgICAgICBmdW5jdGlvbiBzdHJpbmdFc2NhcGUocykgewogICAgICAgICAgZnVuY3Rpb24gaGV4KGNoKSB7IHJldHVybiBjaC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpOyB9CgogICAgICAgICAgcmV0dXJuIHMKICAgICAgICAgICAgLnJlcGxhY2UoL1xcL2csICAgJ1xcXFwnKQogICAgICAgICAgICAucmVwbGFjZSgvIi9nLCAgICAnXFwiJykKICAgICAgICAgICAgLnJlcGxhY2UoL1x4MDgvZywgJ1xcYicpCiAgICAgICAgICAgIC5yZXBsYWNlKC9cdC9nLCAgICdcXHQnKQogICAgICAgICAgICAucmVwbGFjZSgvXG4vZywgICAnXFxuJykKICAgICAgICAgICAgLnJlcGxhY2UoL1xmL2csICAgJ1xcZicpCiAgICAgICAgICAgIC5yZXBsYWNlKC9cci9nLCAgICdcXHInKQogICAgICAgICAgICAucmVwbGFjZSgvW1x4MDAtXHgwN1x4MEJceDBFXHgwRl0vZywgZnVuY3Rpb24oY2gpIHsgcmV0dXJuICdcXHgwJyArIGhleChjaCk7IH0pCiAgICAgICAgICAgIC5yZXBsYWNlKC9bXHgxMC1ceDFGXHg4MC1ceEZGXS9nLCAgICBmdW5jdGlvbihjaCkgeyByZXR1cm4gJ1xceCcgICsgaGV4KGNoKTsgfSkKICAgICAgICAgICAgLnJlcGxhY2UoL1tcdTAxODAtXHUwRkZGXS9nLCAgICAgICAgIGZ1bmN0aW9uKGNoKSB7IHJldHVybiAnXFx1MCcgKyBoZXgoY2gpOyB9KQogICAgICAgICAgICAucmVwbGFjZSgvW1x1MTA4MC1cdUZGRkZdL2csICAgICAgICAgZnVuY3Rpb24oY2gpIHsgcmV0dXJuICdcXHUnICArIGhleChjaCk7IH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIGV4cGVjdGVkRGVzY3MgPSBuZXcgQXJyYXkoZXhwZWN0ZWQubGVuZ3RoKSwKICAgICAgICAgICAgZXhwZWN0ZWREZXNjLCBmb3VuZERlc2MsIGk7CgogICAgICAgIGZvciAoaSA9IDA7IGkgPCBleHBlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgZXhwZWN0ZWREZXNjc1tpXSA9IGV4cGVjdGVkW2ldLmRlc2NyaXB0aW9uOwogICAgICAgIH0KCiAgICAgICAgZXhwZWN0ZWREZXNjID0gZXhwZWN0ZWQubGVuZ3RoID4gMQogICAgICAgICAgPyBleHBlY3RlZERlc2NzLnNsaWNlKDAsIC0xKS5qb2luKCIsICIpCiAgICAgICAgICAgICAgKyAiIG9yICIKICAgICAgICAgICAgICArIGV4cGVjdGVkRGVzY3NbZXhwZWN0ZWQubGVuZ3RoIC0gMV0KICAgICAgICAgIDogZXhwZWN0ZWREZXNjc1swXTsKCiAgICAgICAgZm91bmREZXNjID0gZm91bmQgPyAiXCIiICsgc3RyaW5nRXNjYXBlKGZvdW5kKSArICJcIiIgOiAiZW5kIG9mIGlucHV0IjsKCiAgICAgICAgcmV0dXJuICJFeHBlY3RlZCAiICsgZXhwZWN0ZWREZXNjICsgIiBidXQgIiArIGZvdW5kRGVzYyArICIgZm91bmQuIjsKICAgICAgfQoKICAgICAgdmFyIHBvc0RldGFpbHMgPSBwZWckY29tcHV0ZVBvc0RldGFpbHMocG9zKSwKICAgICAgICAgIGZvdW5kICAgICAgPSBwb3MgPCBpbnB1dC5sZW5ndGggPyBpbnB1dC5jaGFyQXQocG9zKSA6IG51bGw7CgogICAgICBpZiAoZXhwZWN0ZWQgIT09IG51bGwpIHsKICAgICAgICBjbGVhbnVwRXhwZWN0ZWQoZXhwZWN0ZWQpOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IFN5bnRheEVycm9yKAogICAgICAgIG1lc3NhZ2UgIT09IG51bGwgPyBtZXNzYWdlIDogYnVpbGRNZXNzYWdlKGV4cGVjdGVkLCBmb3VuZCksCiAgICAgICAgZXhwZWN0ZWQsCiAgICAgICAgZm91bmQsCiAgICAgICAgcG9zLAogICAgICAgIHBvc0RldGFpbHMubGluZSwKICAgICAgICBwb3NEZXRhaWxzLmNvbHVtbgogICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIHBlZyRkZWNvZGUocykgewogICAgICB2YXIgYmMgPSBuZXcgQXJyYXkocy5sZW5ndGgpLCBpOwoKICAgICAgZm9yIChpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBiY1tpXSA9IHMuY2hhckNvZGVBdChpKSAtIDMyOwogICAgICB9CgogICAgICByZXR1cm4gYmM7CiAgICB9CgogICAgZnVuY3Rpb24gcGVnJHBhcnNlUnVsZShpbmRleCkgewogICAgICB2YXIgYmMgICAgPSBwZWckYnl0ZWNvZGVbaW5kZXhdLAogICAgICAgICAgaXAgICAgPSAwLAogICAgICAgICAgaXBzICAgPSBbXSwKICAgICAgICAgIGVuZCAgID0gYmMubGVuZ3RoLAogICAgICAgICAgZW5kcyAgPSBbXSwKICAgICAgICAgIHN0YWNrID0gW10sCiAgICAgICAgICBwYXJhbXMsIGk7CgogICAgICBmdW5jdGlvbiBwcm90ZWN0KG9iamVjdCkgewogICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KG9iamVjdCkgPT09ICJbb2JqZWN0IEFycmF5XSIgPyBbXSA6IG9iamVjdDsKICAgICAgfQoKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICB3aGlsZSAoaXAgPCBlbmQpIHsKICAgICAgICAgIHN3aXRjaCAoYmNbaXBdKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzdGFjay5wdXNoKHByb3RlY3QocGVnJGNvbnN0c1tiY1tpcCArIDFdXSkpOwogICAgICAgICAgICAgIGlwICs9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgc3RhY2sucHVzaChwZWckY3VyclBvcyk7CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBzdGFjay5wb3AoKTsKICAgICAgICAgICAgICBpcCsrOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHBlZyRjdXJyUG9zID0gc3RhY2sucG9wKCk7CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBzdGFjay5sZW5ndGggLT0gYmNbaXAgKyAxXTsKICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHN0YWNrLnNwbGljZSgtMiwgMSk7CiAgICAgICAgICAgICAgaXArKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBzdGFja1tzdGFjay5sZW5ndGggLSAyXS5wdXNoKHN0YWNrLnBvcCgpKTsKICAgICAgICAgICAgICBpcCsrOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIHN0YWNrLnB1c2goc3RhY2suc3BsaWNlKHN0YWNrLmxlbmd0aCAtIGJjW2lwICsgMV0sIGJjW2lwICsgMV0pKTsKICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHN0YWNrLnBvcCgpOwogICAgICAgICAgICAgIHN0YWNrLnB1c2goaW5wdXQuc3Vic3RyaW5nKHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdLCBwZWckY3VyclBvcykpOwogICAgICAgICAgICAgIGlwKys7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZCk7CiAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl0pOwoKICAgICAgICAgICAgICBpZiAoc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0pIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV07CiAgICAgICAgICAgICAgICBpcCArPSAzOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDMgKyBiY1tpcCArIDFdICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICAgIGlwICs9IDMgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGVuZHMucHVzaChlbmQpOwogICAgICAgICAgICAgIGlwcy5wdXNoKGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdKTsKCiAgICAgICAgICAgICAgaWYgKHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdID09PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDMgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgICAgaXAgKz0gMzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl07CiAgICAgICAgICAgICAgICBpcCArPSAzICsgYmNbaXAgKyAxXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTsKICAgICAgICAgICAgICBpcHMucHVzaChpcCArIDMgKyBiY1tpcCArIDFdICsgYmNbaXAgKyAyXSk7CgogICAgICAgICAgICAgIGlmIChzdGFja1tzdGFjay5sZW5ndGggLSAxXSAhPT0gcGVnJEZBSUxFRCkgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyAzICsgYmNbaXAgKyAxXTsKICAgICAgICAgICAgICAgIGlwICs9IDM7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV0gKyBiY1tpcCArIDJdOwogICAgICAgICAgICAgICAgaXAgKz0gMyArIGJjW2lwICsgMV07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgaWYgKHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdICE9PSBwZWckRkFJTEVEKSB7CiAgICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTsKICAgICAgICAgICAgICAgIGlwcy5wdXNoKGlwKTsKCiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDIgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgICAgaXAgKz0gMjsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaXAgKz0gMiArIGJjW2lwICsgMV07CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgZW5kcy5wdXNoKGVuZCk7CiAgICAgICAgICAgICAgaXBzLnB1c2goaXAgKyAzICsgYmNbaXAgKyAxXSArIGJjW2lwICsgMl0pOwoKICAgICAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gcGVnJGN1cnJQb3MpIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgMyArIGJjW2lwICsgMV07CiAgICAgICAgICAgICAgICBpcCArPSAzOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDMgKyBiY1tpcCArIDFdICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICAgIGlwICs9IDMgKyBiY1tpcCArIDFdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGVuZHMucHVzaChlbmQpOwogICAgICAgICAgICAgIGlwcy5wdXNoKGlwICsgNCArIGJjW2lwICsgMl0gKyBiY1tpcCArIDNdKTsKCiAgICAgICAgICAgICAgaWYgKGlucHV0LnN1YnN0cihwZWckY3VyclBvcywgcGVnJGNvbnN0c1tiY1tpcCArIDFdXS5sZW5ndGgpID09PSBwZWckY29uc3RzW2JjW2lwICsgMV1dKSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDQgKyBiY1tpcCArIDJdOwogICAgICAgICAgICAgICAgaXAgKz0gNDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM107CiAgICAgICAgICAgICAgICBpcCArPSA0ICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTsKICAgICAgICAgICAgICBpcHMucHVzaChpcCArIDQgKyBiY1tpcCArIDJdICsgYmNbaXAgKyAzXSk7CgogICAgICAgICAgICAgIGlmIChpbnB1dC5zdWJzdHIocGVnJGN1cnJQb3MsIHBlZyRjb25zdHNbYmNbaXAgKyAxXV0ubGVuZ3RoKS50b0xvd2VyQ2FzZSgpID09PSBwZWckY29uc3RzW2JjW2lwICsgMV1dKSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDQgKyBiY1tpcCArIDJdOwogICAgICAgICAgICAgICAgaXAgKz0gNDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZW5kID0gaXAgKyA0ICsgYmNbaXAgKyAyXSArIGJjW2lwICsgM107CiAgICAgICAgICAgICAgICBpcCArPSA0ICsgYmNbaXAgKyAyXTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBlbmRzLnB1c2goZW5kKTsKICAgICAgICAgICAgICBpcHMucHVzaChpcCArIDQgKyBiY1tpcCArIDJdICsgYmNbaXAgKyAzXSk7CgogICAgICAgICAgICAgIGlmIChwZWckY29uc3RzW2JjW2lwICsgMV1dLnRlc3QoaW5wdXQuY2hhckF0KHBlZyRjdXJyUG9zKSkpIHsKICAgICAgICAgICAgICAgIGVuZCA9IGlwICsgNCArIGJjW2lwICsgMl07CiAgICAgICAgICAgICAgICBpcCArPSA0OwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlbmQgPSBpcCArIDQgKyBiY1tpcCArIDJdICsgYmNbaXAgKyAzXTsKICAgICAgICAgICAgICAgIGlwICs9IDQgKyBiY1tpcCArIDJdOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIHN0YWNrLnB1c2goaW5wdXQuc3Vic3RyKHBlZyRjdXJyUG9zLCBiY1tpcCArIDFdKSk7CiAgICAgICAgICAgICAgcGVnJGN1cnJQb3MgKz0gYmNbaXAgKyAxXTsKICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBzdGFjay5wdXNoKHBlZyRjb25zdHNbYmNbaXAgKyAxXV0pOwogICAgICAgICAgICAgIHBlZyRjdXJyUG9zICs9IHBlZyRjb25zdHNbYmNbaXAgKyAxXV0ubGVuZ3RoOwogICAgICAgICAgICAgIGlwICs9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgIHN0YWNrLnB1c2gocGVnJEZBSUxFRCk7CiAgICAgICAgICAgICAgaWYgKHBlZyRzaWxlbnRGYWlscyA9PT0gMCkgewogICAgICAgICAgICAgICAgcGVnJGZhaWwocGVnJGNvbnN0c1tiY1tpcCArIDFdXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlwICs9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIHBlZyRyZXBvcnRlZFBvcyA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDEgLSBiY1tpcCArIDFdXTsKICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBwZWckcmVwb3J0ZWRQb3MgPSBwZWckY3VyclBvczsKICAgICAgICAgICAgICBpcCsrOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBwYXJhbXMgPSBiYy5zbGljZShpcCArIDQsIGlwICsgNCArIGJjW2lwICsgM10pOwogICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBiY1tpcCArIDNdOyBpKyspIHsKICAgICAgICAgICAgICAgIHBhcmFtc1tpXSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDEgLSBwYXJhbXNbaV1dOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc3RhY2suc3BsaWNlKAogICAgICAgICAgICAgICAgc3RhY2subGVuZ3RoIC0gYmNbaXAgKyAyXSwKICAgICAgICAgICAgICAgIGJjW2lwICsgMl0sCiAgICAgICAgICAgICAgICBwZWckY29uc3RzW2JjW2lwICsgMV1dLmFwcGx5KG51bGwsIHBhcmFtcykKICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICBpcCArPSA0ICsgYmNbaXAgKyAzXTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgc3RhY2sucHVzaChwZWckcGFyc2VSdWxlKGJjW2lwICsgMV0pKTsKICAgICAgICAgICAgICBpcCArPSAyOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMrKzsKICAgICAgICAgICAgICBpcCsrOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBwZWckc2lsZW50RmFpbHMtLTsKICAgICAgICAgICAgICBpcCsrOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgb3Bjb2RlOiAiICsgYmNbaXBdICsgIi4iKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChlbmRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGVuZCA9IGVuZHMucG9wKCk7CiAgICAgICAgICBpcCA9IGlwcy5wb3AoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gc3RhY2tbMF07CiAgICB9CgoKICAgICAgb3B0aW9ucy5kYXRhID0ge307IC8vIE9iamVjdCB0byB3aGljaCBoZWFkZXIgYXR0cmlidXRlcyB3aWxsIGJlIGFzc2lnbmVkIGR1cmluZyBwYXJzaW5nCgogICAgICBmdW5jdGlvbiBsaXN0IChmaXJzdCwgcmVzdCkgewogICAgICAgIHJldHVybiBbZmlyc3RdLmNvbmNhdChyZXN0KTsKICAgICAgfQoKCiAgICBwZWckcmVzdWx0ID0gcGVnJHBhcnNlUnVsZShwZWckc3RhcnRSdWxlSW5kZXgpOwoKICAgIGlmIChwZWckcmVzdWx0ICE9PSBwZWckRkFJTEVEICYmIHBlZyRjdXJyUG9zID09PSBpbnB1dC5sZW5ndGgpIHsKICAgICAgcmV0dXJuIHBlZyRyZXN1bHQ7CiAgICB9IGVsc2UgewogICAgICBpZiAocGVnJHJlc3VsdCAhPT0gcGVnJEZBSUxFRCAmJiBwZWckY3VyclBvcyA8IGlucHV0Lmxlbmd0aCkgewogICAgICAgIHBlZyRmYWlsKHsgdHlwZTogImVuZCIsIGRlc2NyaXB0aW9uOiAiZW5kIG9mIGlucHV0IiB9KTsKICAgICAgfQoKICAgICAgdGhyb3cgcGVnJGJ1aWxkRXhjZXB0aW9uKG51bGwsIHBlZyRtYXhGYWlsRXhwZWN0ZWQsIHBlZyRtYXhGYWlsUG9zKTsKICAgIH0KICB9CgogIHJldHVybiB7CiAgICBTeW50YXhFcnJvcjogU3ludGF4RXJyb3IsCiAgICBwYXJzZTogICAgICAgcGFyc2UKICB9Owp9KSgpOwoKfSx7fV0sMTg6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAZmlsZW92ZXJ2aWV3IEhhY2tzIC0gVGhpcyBmaWxlIGNvbnRhaW5zIGFsbCBvZiB0aGUgdGhpbmdzIHdlCiAqIHdpc2ggd2UgZGlkbid0IGhhdmUgdG8gZG8sIGp1c3QgZm9yIGludGVyb3AuICBJdCBpcyBzaW1pbGFyIHRvCiAqIFV0aWxzLCB3aGljaCBwcm92aWRlcyBhY3R1YWxseSB1c2VmdWwgYW5kIHJlbGV2YW50IGZ1bmN0aW9ucyBmb3IKICogYSBTSVAgbGlicmFyeS4gTWV0aG9kcyBpbiB0aGlzIGZpbGUgYXJlIGdyb3VwZWQgYnkgdmVuZG9yLCBzbwogKiBhcyB0byBtb3N0IGVhc2lseSB0cmFjayB3aGVuIHBhcnRpY3VsYXIgaGFja3MgbWF5IG5vdCBiZSBuZWNlc3NhcnkgYW55bW9yZS4KICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKCi8va2VlcCB0byBxdWlldCBqc2hpbnQsIGFuZCByZW1haW4gY29uc2lzdGVudCB3aXRoIG90aGVyIGZpbGVzClNJUCA9IFNJUDsKCnZhciBIYWNrcyA9IHsKICBBbGxCcm93c2VyczogewogICAgbWFza0R0bHM6IGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgIGlmIChtZXNzYWdlLmJvZHkpIHsKICAgICAgICBtZXNzYWdlLmJvZHkgPSBtZXNzYWdlLmJvZHkucmVwbGFjZSgvIFVEUFwvVExTXC9SVFBcL1NBVlAvZ21pLCAiIFJUUC9TQVZQIik7CiAgICAgIH0KICAgIH0sCiAgICB1bm1hc2tEdGxzOiBmdW5jdGlvbiAoc2RwKSB7CiAgICAgIC8qKgogICAgICAgKiBDaHJvbWUgZG9lcyBub3QgaGFuZGxlIERUTFMgY29ycmVjdGx5IChDYW5hcmF5IGRvZXMsIGJ1dCBub3QgcHJvZHVjdGlvbikKICAgICAgICoga2VlcGluZyBDaHJvbWUgYXMgU0RFUyB1bnRpbCBEVExTIGlzIGZpeGVkIChjb21tZW50IG91dCAnaXNfb3BlcmEnIGNvbmRpdGlvbikKICAgICAgICoKICAgICAgICogVVBEQVRFOiBNYXkgMjEsIDIwMTQKICAgICAgICogQ2hyb21lIDM1IG5vdyBwcm9wZXJseSBkZWZhdWx0cyB0byBEVExTLiAgT25seSBPcGVyYSByZW1haW5zIHVzaW5nIFNERVMKICAgICAgICoKICAgICAgICogVVBEQVRFOiAyMDE0LTA5LTI0CiAgICAgICAqIE9wZXJhIG5vdyBzdXBwb3J0cyBEVExTIGJ5IGRlZmF1bHQgYXMgd2VsbC4KICAgICAgICoKICAgICAgICoqLwogICAgICByZXR1cm4gc2RwLnJlcGxhY2UoLyBSVFBcL1NBVlAvZ21pLCAiIFVEUC9UTFMvUlRQL1NBVlAiKTsKICAgIH0KICB9LAogIEZpcmVmb3g6IHsKICAgIC8qIENvbmRpdGlvbiB0byBkZXRlY3QgaWYgaGFja3MgYXJlIGFwcGxpY2FibGUgKi8KICAgIGlzRmlyZWZveDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdHlwZW9mIG1velJUQ1BlZXJDb25uZWN0aW9uICE9PSAndW5kZWZpbmVkJzsKICAgIH0sCgogICAgY2Fubm90SGFuZGxlRXh0cmFXaGl0ZXNwYWNlOiBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICBpZiAodGhpcy5pc0ZpcmVmb3goKSAmJiBtZXNzYWdlLmJvZHkpIHsKICAgICAgICBtZXNzYWdlLmJvZHkgPSBtZXNzYWdlLmJvZHkucmVwbGFjZSgvIFxyXG4vZywgIlxyXG4iKTsKICAgICAgfQogICAgfSwKCiAgICBoYXNNaXNzaW5nQ0xpbmVJblNEUDogZnVuY3Rpb24gKHNkcCkgewogICAgICAvKgogICAgICAgKiBUaGlzIGlzIGEgRmlyZWZveCBoYWNrIHRvIGluc2VydCB2YWxpZCBzZHAgd2hlbiBnZXREZXNjcmlwdGlvbiBpcwogICAgICAgKiBjYWxsZWQgd2l0aCB0aGUgY29uc3RyYWludCBvZmZlclRvUmVjZWl2ZVZpZGVvID0gZmFsc2UuCiAgICAgICAqIFdlIHNlYXJjaCBmb3IgZWl0aGVyIGEgYy1saW5lIGF0IHRoZSB0b3Agb2YgdGhlIHNkcCBhYm92ZSBhbGwKICAgICAgICogbS1saW5lcy4gSWYgdGhhdCBkb2VzIG5vdCBleGlzdCB0aGVuIHdlIHNlYXJjaCBmb3IgYSBjLWxpbmUKICAgICAgICogYmVuZWF0aCBlYWNoIG0tbGluZS4gSWYgaXQgaXMgbWlzc2luZyBhIGMtbGluZSwgd2UgaW5zZXJ0CiAgICAgICAqIGEgZmFrZSBjLWxpbmUgd2l0aCB0aGUgaXAgYWRkcmVzcyAwLjAuMC4wLiBUaGlzIGlzIHRoZW4gdmFsaWQKICAgICAgICogc2RwIGFuZCBubyBtZWRpYSB3aWxsIGJlIHNlbnQgZm9yIHRoYXQgbS1saW5lLgogICAgICAgKgogICAgICAgKiBWYWxpZCBTRFAgaXM6CiAgICAgICAqIG09CiAgICAgICAqIGk9CiAgICAgICAqIGM9CiAgICAgICAqLwogICAgICB2YXIgaW5zZXJ0QXQsIG1saW5lczsKICAgICAgaWYgKHNkcC5pbmRleE9mKCdjPScpID4gc2RwLmluZGV4T2YoJ209JykpIHsKCiAgICAgICAgLy8gRmluZCBhbGwgbT0gbGluZXMKICAgICAgICBtbGluZXMgPSBzZHAubWF0Y2goL209LipcclxuLiovZyk7CiAgICAgICAgZm9yICh2YXIgaT0wOyBpPG1saW5lcy5sZW5ndGg7IGkrKykgewoKICAgICAgICAgIC8vIElmIGl0IGhhcyBhbiBpPSBsaW5lLCBjaGVjayBpZiB0aGUgbmV4dCBsaW5lIGlzIHRoZSBjPSBsaW5lCiAgICAgICAgICBpZiAobWxpbmVzW2ldLnRvU3RyaW5nKCkuc2VhcmNoKC9pPS4qLykgPj0gMCkgewogICAgICAgICAgICBpbnNlcnRBdCA9IHNkcC5pbmRleE9mKG1saW5lc1tpXS50b1N0cmluZygpKSttbGluZXNbaV0udG9TdHJpbmcoKS5sZW5ndGg7CiAgICAgICAgICAgIGlmIChzZHAuc3Vic3RyKGluc2VydEF0LDIpIT09J2M9JykgewogICAgICAgICAgICAgIHNkcCA9IHNkcC5zdWJzdHIoMCxpbnNlcnRBdCkgKyAnXHJcbmM9SU4gSVA0IDAuMC4wLjAnICsgc2RwLnN1YnN0cihpbnNlcnRBdCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAvLyBlbHNlIGFkZCB0aGUgQyBsaW5lIGlmIGl0J3MgbWlzc2luZwogICAgICAgICAgfSBlbHNlIGlmIChtbGluZXNbaV0udG9TdHJpbmcoKS5zZWFyY2goL2M9LiovKSA8IDApIHsKICAgICAgICAgICAgaW5zZXJ0QXQgPSBzZHAuaW5kZXhPZihtbGluZXNbaV0udG9TdHJpbmcoKS5tYXRjaCgvLiovKSkrbWxpbmVzW2ldLnRvU3RyaW5nKCkubWF0Y2goLy4qLykudG9TdHJpbmcoKS5sZW5ndGg7CiAgICAgICAgICAgIHNkcCA9IHNkcC5zdWJzdHIoMCxpbnNlcnRBdCkgKyAnXHJcbmM9SU4gSVA0IDAuMC4wLjAnICsgc2RwLnN1YnN0cihpbnNlcnRBdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBzZHA7CiAgICB9LAogIH0sCgogIENocm9tZTogewogICAgbmVlZHNFeHBsaWNpdGx5SW5hY3RpdmVTRFA6IGZ1bmN0aW9uIChzZHApIHsKICAgICAgdmFyIHN1YiwgaW5kZXg7CgogICAgICBpZiAoSGFja3MuRmlyZWZveC5pc0ZpcmVmb3goKSkgeyAvLyBGaXggdGhpcyBpbiBGaXJlZm94IGJlZm9yZSBzZW5kaW5nCiAgICAgICAgaW5kZXggPSBzZHAuaW5kZXhPZignbT12aWRlbyAwJyk7CiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgc3ViID0gc2RwLnN1YnN0cihpbmRleCk7CiAgICAgICAgICBzdWIgPSBzdWIucmVwbGFjZSgvXHJcbmM9SU4gSVA0LipcclxuJC8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXHJcbmM9SU4gSVA0IDAuMC4wLjBcclxuYT1pbmFjdGl2ZVxyXG4nKTsKICAgICAgICAgIHJldHVybiBzZHAuc3Vic3RyKDAsIGluZGV4KSArIHN1YjsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHNkcDsKICAgIH0sCgogICAgZ2V0c0NvbmZ1c2VkQWJvdXRHVU06IGZ1bmN0aW9uIChzZXNzaW9uKSB7CiAgICAgIGlmIChzZXNzaW9uLm1lZGlhSGFuZGxlcikgewogICAgICAgIHNlc3Npb24ubWVkaWFIYW5kbGVyLmNsb3NlKCk7CiAgICAgIH0KICAgIH0KICB9Cn07CnJldHVybiBIYWNrczsKfTsKfSx7fV0sMTk6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CnZhciBsZXZlbHMgPSB7CiAgJ2Vycm9yJzogMCwKICAnd2Fybic6IDEsCiAgJ2xvZyc6IDIsCiAgJ2RlYnVnJzogMwp9OwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29uc29sZSkgewoKdmFyIExvZ2dlckZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGxvZ2dlciwKICAgIGxldmVsID0gMiwKICAgIGJ1aWx0aW5FbmFibGVkID0gdHJ1ZSwKICAgIGNvbm5lY3RvciA9IG51bGw7CgogICAgdGhpcy5sb2dnZXJzID0ge307CgogICAgbG9nZ2VyID0gdGhpcy5nZXRMb2dnZXIoJ3NpcC5sb2dnZXJmYWN0b3J5Jyk7CgoKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7CiAgICBidWlsdGluRW5hYmxlZDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiBidWlsdGluRW5hYmxlZDsgfSwKICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICBidWlsdGluRW5hYmxlZCA9IHZhbHVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ2ludmFsaWQgImJ1aWx0aW5FbmFibGVkIiBwYXJhbWV0ZXIgdmFsdWU6ICcrIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGxldmVsOiB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7cmV0dXJuIGxldmVsOyB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlID49IDAgJiYgdmFsdWUgPD0zKSB7CiAgICAgICAgICBsZXZlbCA9IHZhbHVlOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPiAzKSB7CiAgICAgICAgICBsZXZlbCA9IDM7CiAgICAgICAgfSBlbHNlIGlmIChsZXZlbHMuaGFzT3duUHJvcGVydHkodmFsdWUpKSB7CiAgICAgICAgICBsZXZlbCA9IGxldmVsc1t2YWx1ZV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxvZ2dlci5lcnJvcignaW52YWxpZCAibGV2ZWwiIHBhcmFtZXRlciB2YWx1ZTogJysgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgY29ubmVjdG9yOiB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7cmV0dXJuIGNvbm5lY3RvcjsgfSwKICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSl7CiAgICAgICAgaWYodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICIiIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGNvbm5lY3RvciA9IG51bGw7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgIGNvbm5lY3RvciA9IHZhbHVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ2ludmFsaWQgImNvbm5lY3RvciIgcGFyYW1ldGVyIHZhbHVlOiAnKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0pOwp9OwoKTG9nZ2VyRmFjdG9yeS5wcm90b3R5cGUucHJpbnQgPSBmdW5jdGlvbih0YXJnZXQsIGNhdGVnb3J5LCBsYWJlbCwgY29udGVudCkgewogIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHsKICAgIHZhciBwcmVmaXggPSBbbmV3IERhdGUoKSwgY2F0ZWdvcnldOwogICAgaWYgKGxhYmVsKSB7CiAgICAgIHByZWZpeC5wdXNoKGxhYmVsKTsKICAgIH0KICAgIGNvbnRlbnQgPSBwcmVmaXguY29uY2F0KGNvbnRlbnQpLmpvaW4oJyB8ICcpOwogIH0KICB0YXJnZXQuY2FsbChjb25zb2xlLCBjb250ZW50KTsKfTsKCmZ1bmN0aW9uIExvZ2dlciAobG9nZ2VyLCBjYXRlZ29yeSwgbGFiZWwpIHsKICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjsKICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7CiAgdGhpcy5sYWJlbCA9IGxhYmVsOwp9CgpPYmplY3Qua2V5cyhsZXZlbHMpLmZvckVhY2goZnVuY3Rpb24gKHRhcmdldE5hbWUpIHsKICBMb2dnZXIucHJvdG90eXBlW3RhcmdldE5hbWVdID0gZnVuY3Rpb24gKGNvbnRlbnQpIHsKICAgIHRoaXMubG9nZ2VyW3RhcmdldE5hbWVdKHRoaXMuY2F0ZWdvcnksIHRoaXMubGFiZWwsIGNvbnRlbnQpOwogIH07CgogIExvZ2dlckZhY3RvcnkucHJvdG90eXBlW3RhcmdldE5hbWVdID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBsYWJlbCwgY29udGVudCkgewogICAgaWYgKHRoaXMubGV2ZWwgPj0gbGV2ZWxzW3RhcmdldE5hbWVdKSB7CiAgICAgIGlmICh0aGlzLmJ1aWx0aW5FbmFibGVkKSB7CiAgICAgICAgdGhpcy5wcmludChjb25zb2xlW3RhcmdldE5hbWVdLCBjYXRlZ29yeSwgbGFiZWwsIGNvbnRlbnQpOwogICAgICB9CgogICAgICBpZiAodGhpcy5jb25uZWN0b3IpIHsKICAgICAgICB0aGlzLmNvbm5lY3Rvcih0YXJnZXROYW1lLCBjYXRlZ29yeSwgbGFiZWwsIGNvbnRlbnQpOwogICAgICB9CiAgICB9CiAgfTsKfSk7CgpMb2dnZXJGYWN0b3J5LnByb3RvdHlwZS5nZXRMb2dnZXIgPSBmdW5jdGlvbihjYXRlZ29yeSwgbGFiZWwpIHsKICB2YXIgbG9nZ2VyOwoKICBpZiAobGFiZWwgJiYgdGhpcy5sZXZlbCA9PT0gMykgewogICAgcmV0dXJuIG5ldyBMb2dnZXIodGhpcywgY2F0ZWdvcnksIGxhYmVsKTsKICB9IGVsc2UgaWYgKHRoaXMubG9nZ2Vyc1tjYXRlZ29yeV0pIHsKICAgIHJldHVybiB0aGlzLmxvZ2dlcnNbY2F0ZWdvcnldOwogIH0gZWxzZSB7CiAgICBsb2dnZXIgPSBuZXcgTG9nZ2VyKHRoaXMsIGNhdGVnb3J5KTsKICAgIHRoaXMubG9nZ2Vyc1tjYXRlZ29yeV0gPSBsb2dnZXI7CiAgICByZXR1cm4gbG9nZ2VyOwogIH0KfTsKCnJldHVybiBMb2dnZXJGYWN0b3J5Owp9OwoKfSx7fV0sMjA6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAZmlsZW92ZXJ2aWV3IE1lZGlhSGFuZGxlcgogKi8KCi8qIE1lZGlhSGFuZGxlcgogKiBAY2xhc3MgUGVlckNvbm5lY3Rpb24gaGVscGVyIENsYXNzLgogKiBAcGFyYW0ge1NJUC5TZXNzaW9ufSBzZXNzaW9uCiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10KICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEV2ZW50RW1pdHRlcikgewp2YXIgTWVkaWFIYW5kbGVyID0gZnVuY3Rpb24oc2Vzc2lvbiwgb3B0aW9ucykgewogIC8vIGtlZXAganNoaW50IGhhcHB5CiAgc2Vzc2lvbiA9IHNlc3Npb247CiAgb3B0aW9ucyA9IG9wdGlvbnM7Cn07CgpNZWRpYUhhbmRsZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFdmVudEVtaXR0ZXIucHJvdG90eXBlLCB7CiAgaXNSZWFkeToge3ZhbHVlOiBmdW5jdGlvbiBpc1JlYWR5ICgpIHt9fSwKCiAgY2xvc2U6IHt2YWx1ZTogZnVuY3Rpb24gY2xvc2UgKCkge319LAoKICAvKioKICAgKiBAcGFyYW0ge09iamVjdH0gW21lZGlhSGludF0gQSBjdXN0b20gb2JqZWN0IGRlc2NyaWJpbmcgdGhlIG1lZGlhIHRvIGJlIHVzZWQgZHVyaW5nIHRoaXMgc2Vzc2lvbi4KICAgKi8KICBnZXREZXNjcmlwdGlvbjoge3ZhbHVlOiBmdW5jdGlvbiBnZXREZXNjcmlwdGlvbiAobWVkaWFIaW50KSB7CiAgICAvLyBrZWVwIGpzaGludCBoYXBweQogICAgbWVkaWFIaW50ID0gbWVkaWFIaW50OwogIH19LAoKICAvKioKICAqIE1lc3NhZ2UgcmVjZXB0aW9uLgogICogQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAqIEBwYXJhbSB7U3RyaW5nfSBkZXNjcmlwdGlvbgogICovCiAgc2V0RGVzY3JpcHRpb246IHt2YWx1ZTogZnVuY3Rpb24gc2V0RGVzY3JpcHRpb24gKGRlc2NyaXB0aW9uKSB7CiAgICAvLyBrZWVwIGpzaGludCBoYXBweQogICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjsKICB9fQp9KTsKCnJldHVybiBNZWRpYUhhbmRsZXI7Cn07Cgp9LHt9XSwyMTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgU0lQIE5hbWVBZGRySGVhZGVyCiAqLwoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICogQGNsYXNzIENsYXNzIGNyZWF0aW5nIGEgTmFtZSBBZGRyZXNzIFNJUCBoZWFkZXIuCiAqCiAqIEBwYXJhbSB7U0lQLlVSSX0gdXJpCiAqIEBwYXJhbSB7U3RyaW5nfSBbZGlzcGxheU5hbWVdCiAqIEBwYXJhbSB7T2JqZWN0fSBbcGFyYW1ldGVyc10KICoKICovCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewp2YXIgTmFtZUFkZHJIZWFkZXI7CgpOYW1lQWRkckhlYWRlciA9IGZ1bmN0aW9uKHVyaSwgZGlzcGxheU5hbWUsIHBhcmFtZXRlcnMpIHsKICB2YXIgcGFyYW07CgogIC8vIENoZWNrcwogIGlmKCF1cmkgfHwgISh1cmkgaW5zdGFuY2VvZiBTSVAuVVJJKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyBvciBpbnZhbGlkICJ1cmkiIHBhcmFtZXRlcicpOwogIH0KCiAgLy8gSW5pdGlhbGl6ZSBwYXJhbWV0ZXJzCiAgdGhpcy51cmkgPSB1cmk7CiAgdGhpcy5wYXJhbWV0ZXJzID0ge307CgogIGZvciAocGFyYW0gaW4gcGFyYW1ldGVycykgewogICAgdGhpcy5zZXRQYXJhbShwYXJhbSwgcGFyYW1ldGVyc1twYXJhbV0pOwogIH0KCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgewogICAgZnJpZW5kbHlOYW1lOiB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmRpc3BsYXlOYW1lIHx8IHVyaS5hb3I7IH0KICAgIH0sCgogICAgZGlzcGxheU5hbWU6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGRpc3BsYXlOYW1lOyB9LAogICAgICBzZXQ6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgZGlzcGxheU5hbWUgPSAodmFsdWUgPT09IDApID8gJzAnIDogdmFsdWU7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKTmFtZUFkZHJIZWFkZXIucHJvdG90eXBlID0gewogIHNldFBhcmFtOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkgewogICAgaWYoa2V5KSB7CiAgICAgIHRoaXMucGFyYW1ldGVyc1trZXkudG9Mb3dlckNhc2UoKV0gPSAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyB8fCB2YWx1ZSA9PT0gbnVsbCkgPyBudWxsIDogdmFsdWUudG9TdHJpbmcoKTsKICAgIH0KICB9LAogIGdldFBhcmFtOiBTSVAuVVJJLnByb3RvdHlwZS5nZXRQYXJhbSwKICBoYXNQYXJhbTogU0lQLlVSSS5wcm90b3R5cGUuaGFzUGFyYW0sCiAgZGVsZXRlUGFyYW06IFNJUC5VUkkucHJvdG90eXBlLmRlbGV0ZVBhcmFtLAogIGNsZWFyUGFyYW1zOiBTSVAuVVJJLnByb3RvdHlwZS5jbGVhclBhcmFtcywKCiAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIG5ldyBOYW1lQWRkckhlYWRlcigKICAgICAgdGhpcy51cmkuY2xvbmUoKSwKICAgICAgdGhpcy5kaXNwbGF5TmFtZSwKICAgICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBhcmFtZXRlcnMpKSk7CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgdmFyIGJvZHksIHBhcmFtZXRlcjsKCiAgICBib2R5ICA9ICh0aGlzLmRpc3BsYXlOYW1lIHx8IHRoaXMuZGlzcGxheU5hbWUgPT09IDApID8gJyInICsgdGhpcy5kaXNwbGF5TmFtZSArICciICcgOiAnJzsKICAgIGJvZHkgKz0gJzwnICsgdGhpcy51cmkudG9TdHJpbmcoKSArICc+JzsKCiAgICBmb3IgKHBhcmFtZXRlciBpbiB0aGlzLnBhcmFtZXRlcnMpIHsKICAgICAgYm9keSArPSAnOycgKyBwYXJhbWV0ZXI7CgogICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl0gIT09IG51bGwpIHsKICAgICAgICBib2R5ICs9ICc9JysgdGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYm9keTsKICB9Cn07CgoKLyoqCiAgKiBQYXJzZSB0aGUgZ2l2ZW4gc3RyaW5nIGFuZCByZXR1cm5zIGEgU0lQLk5hbWVBZGRySGVhZGVyIGluc3RhbmNlIG9yIHVuZGVmaW5lZCBpZgogICogaXQgaXMgYW4gaW52YWxpZCBOYW1lQWRkckhlYWRlci4KICAqIEBwdWJsaWMKICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lX2FkZHJfaGVhZGVyCiAgKi8KTmFtZUFkZHJIZWFkZXIucGFyc2UgPSBmdW5jdGlvbihuYW1lX2FkZHJfaGVhZGVyKSB7CiAgbmFtZV9hZGRyX2hlYWRlciA9IFNJUC5HcmFtbWFyLnBhcnNlKG5hbWVfYWRkcl9oZWFkZXIsJ05hbWVfQWRkcl9IZWFkZXInKTsKCiAgaWYgKG5hbWVfYWRkcl9oZWFkZXIgIT09IC0xKSB7CiAgICByZXR1cm4gbmFtZV9hZGRyX2hlYWRlcjsKICB9IGVsc2UgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9Cn07CgpTSVAuTmFtZUFkZHJIZWFkZXIgPSBOYW1lQWRkckhlYWRlcjsKfTsKCn0se31dLDIyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBTSVAgTWVzc2FnZSBQYXJzZXIKICovCgovKioKICogRXh0cmFjdCBhbmQgcGFyc2UgZXZlcnkgaGVhZGVyIG9mIGEgU0lQIG1lc3NhZ2UuCiAqIEBhdWdtZW50cyBTSVAKICogQG5hbWVzcGFjZQogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CnZhciBQYXJzZXI7CgpmdW5jdGlvbiBnZXRIZWFkZXIoZGF0YSwgaGVhZGVyU3RhcnQpIHsKICB2YXIKICAgIC8vICdzdGFydCcgcG9zaXRpb24gb2YgdGhlIGhlYWRlci4KICAgIHN0YXJ0ID0gaGVhZGVyU3RhcnQsCiAgICAvLyAnZW5kJyBwb3NpdGlvbiBvZiB0aGUgaGVhZGVyLgogICAgZW5kID0gMCwKICAgIC8vICdwYXJ0aWFsIGVuZCcgcG9zaXRpb24gb2YgdGhlIGhlYWRlci4KICAgIHBhcnRpYWxFbmQgPSAwOwoKICAvL0VuZCBvZiBtZXNzYWdlLgogIGlmIChkYXRhLnN1YnN0cmluZyhzdGFydCwgc3RhcnQgKyAyKS5tYXRjaCgvKF5cclxuKS8pKSB7CiAgICByZXR1cm4gLTI7CiAgfQoKICB3aGlsZShlbmQgPT09IDApIHsKICAgIC8vIFBhcnRpYWwgRW5kIG9mIEhlYWRlci4KICAgIHBhcnRpYWxFbmQgPSBkYXRhLmluZGV4T2YoJ1xyXG4nLCBzdGFydCk7CgogICAgLy8gJ2luZGV4T2YnIHJldHVybnMgLTEgaWYgdGhlIHZhbHVlIHRvIGJlIGZvdW5kIG5ldmVyIG9jY3Vycy4KICAgIGlmIChwYXJ0aWFsRW5kID09PSAtMSkgewogICAgICByZXR1cm4gcGFydGlhbEVuZDsKICAgIH0KCiAgICBpZighZGF0YS5zdWJzdHJpbmcocGFydGlhbEVuZCArIDIsIHBhcnRpYWxFbmQgKyA0KS5tYXRjaCgvKF5cclxuKS8pICYmIGRhdGEuY2hhckF0KHBhcnRpYWxFbmQgKyAyKS5tYXRjaCgvKF5ccyspLykpIHsKICAgICAgLy8gTm90IHRoZSBlbmQgb2YgdGhlIG1lc3NhZ2UuIENvbnRpbnVlIGZyb20gdGhlIG5leHQgcG9zaXRpb24uCiAgICAgIHN0YXJ0ID0gcGFydGlhbEVuZCArIDI7CiAgICB9IGVsc2UgewogICAgICBlbmQgPSBwYXJ0aWFsRW5kOwogICAgfQogIH0KCiAgcmV0dXJuIGVuZDsKfQoKZnVuY3Rpb24gcGFyc2VIZWFkZXIobWVzc2FnZSwgZGF0YSwgaGVhZGVyU3RhcnQsIGhlYWRlckVuZCkgewogIHZhciBoZWFkZXIsIGlkeCwgbGVuZ3RoLCBwYXJzZWQsCiAgICBoY29sb25JbmRleCA9IGRhdGEuaW5kZXhPZignOicsIGhlYWRlclN0YXJ0KSwKICAgIGhlYWRlck5hbWUgPSBkYXRhLnN1YnN0cmluZyhoZWFkZXJTdGFydCwgaGNvbG9uSW5kZXgpLnRyaW0oKSwKICAgIGhlYWRlclZhbHVlID0gZGF0YS5zdWJzdHJpbmcoaGNvbG9uSW5kZXggKyAxLCBoZWFkZXJFbmQpLnRyaW0oKTsKCiAgLy8gSWYgaGVhZGVyLWZpZWxkIGlzIHdlbGwta25vd24sIHBhcnNlIGl0LgogIHN3aXRjaChoZWFkZXJOYW1lLnRvTG93ZXJDYXNlKCkpIHsKICAgIGNhc2UgJ3ZpYSc6CiAgICBjYXNlICd2JzoKICAgICAgbWVzc2FnZS5hZGRIZWFkZXIoJ3ZpYScsIGhlYWRlclZhbHVlKTsKICAgICAgaWYobWVzc2FnZS5nZXRIZWFkZXJzKCd2aWEnKS5sZW5ndGggPT09IDEpIHsKICAgICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCdWaWEnKTsKICAgICAgICBpZihwYXJzZWQpIHsKICAgICAgICAgIG1lc3NhZ2UudmlhID0gcGFyc2VkOwogICAgICAgICAgbWVzc2FnZS52aWFfYnJhbmNoID0gcGFyc2VkLmJyYW5jaDsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcGFyc2VkID0gMDsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJ2Zyb20nOgogICAgY2FzZSAnZic6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCdmcm9tJywgaGVhZGVyVmFsdWUpOwogICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCdmcm9tJyk7CiAgICAgIGlmKHBhcnNlZCkgewogICAgICAgIG1lc3NhZ2UuZnJvbSA9IHBhcnNlZDsKICAgICAgICBtZXNzYWdlLmZyb21fdGFnID0gcGFyc2VkLmdldFBhcmFtKCd0YWcnKTsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgJ3RvJzoKICAgIGNhc2UgJ3QnOgogICAgICBtZXNzYWdlLnNldEhlYWRlcigndG8nLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ3RvJyk7CiAgICAgIGlmKHBhcnNlZCkgewogICAgICAgIG1lc3NhZ2UudG8gPSBwYXJzZWQ7CiAgICAgICAgbWVzc2FnZS50b190YWcgPSBwYXJzZWQuZ2V0UGFyYW0oJ3RhZycpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSAncmVjb3JkLXJvdXRlJzoKICAgICAgcGFyc2VkID0gU0lQLkdyYW1tYXIucGFyc2UoaGVhZGVyVmFsdWUsICdSZWNvcmRfUm91dGUnKTsKCiAgICAgIGlmIChwYXJzZWQgPT09IC0xKSB7CiAgICAgICAgcGFyc2VkID0gdW5kZWZpbmVkOwogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBsZW5ndGggPSBwYXJzZWQubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBoZWFkZXIgPSBwYXJzZWRbaWR4XTsKICAgICAgICBtZXNzYWdlLmFkZEhlYWRlcigncmVjb3JkLXJvdXRlJywgaGVhZGVyVmFsdWUuc3Vic3RyaW5nKGhlYWRlci5wb3NpdGlvbiwgaGVhZGVyLm9mZnNldCkpOwogICAgICAgIG1lc3NhZ2UuaGVhZGVyc1snUmVjb3JkLVJvdXRlJ11bbWVzc2FnZS5nZXRIZWFkZXJzKCdyZWNvcmQtcm91dGUnKS5sZW5ndGggLSAxXS5wYXJzZWQgPSBoZWFkZXIucGFyc2VkOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSAnY2FsbC1pZCc6CiAgICBjYXNlICdpJzoKICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoJ2NhbGwtaWQnLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ2NhbGwtaWQnKTsKICAgICAgaWYocGFyc2VkKSB7CiAgICAgICAgbWVzc2FnZS5jYWxsX2lkID0gaGVhZGVyVmFsdWU7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlICdjb250YWN0JzoKICAgIGNhc2UgJ20nOgogICAgICBwYXJzZWQgPSBTSVAuR3JhbW1hci5wYXJzZShoZWFkZXJWYWx1ZSwgJ0NvbnRhY3QnKTsKCiAgICAgIGlmIChwYXJzZWQgPT09IC0xKSB7CiAgICAgICAgcGFyc2VkID0gdW5kZWZpbmVkOwogICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBsZW5ndGggPSBwYXJzZWQubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBoZWFkZXIgPSBwYXJzZWRbaWR4XTsKICAgICAgICBtZXNzYWdlLmFkZEhlYWRlcignY29udGFjdCcsIGhlYWRlclZhbHVlLnN1YnN0cmluZyhoZWFkZXIucG9zaXRpb24sIGhlYWRlci5vZmZzZXQpKTsKICAgICAgICBtZXNzYWdlLmhlYWRlcnNbJ0NvbnRhY3QnXVttZXNzYWdlLmdldEhlYWRlcnMoJ2NvbnRhY3QnKS5sZW5ndGggLSAxXS5wYXJzZWQgPSBoZWFkZXIucGFyc2VkOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSAnY29udGVudC1sZW5ndGgnOgogICAgY2FzZSAnbCc6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCdjb250ZW50LWxlbmd0aCcsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcignY29udGVudC1sZW5ndGgnKTsKICAgICAgYnJlYWs7CiAgICBjYXNlICdjb250ZW50LXR5cGUnOgogICAgY2FzZSAnYyc6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCdjb250ZW50LXR5cGUnLCBoZWFkZXJWYWx1ZSk7CiAgICAgIHBhcnNlZCA9IG1lc3NhZ2UucGFyc2VIZWFkZXIoJ2NvbnRlbnQtdHlwZScpOwogICAgICBicmVhazsKICAgIGNhc2UgJ2NzZXEnOgogICAgICBtZXNzYWdlLnNldEhlYWRlcignY3NlcScsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcignY3NlcScpOwogICAgICBpZihwYXJzZWQpIHsKICAgICAgICBtZXNzYWdlLmNzZXEgPSBwYXJzZWQudmFsdWU7CiAgICAgIH0KICAgICAgaWYobWVzc2FnZSBpbnN0YW5jZW9mIFNJUC5JbmNvbWluZ1Jlc3BvbnNlKSB7CiAgICAgICAgbWVzc2FnZS5tZXRob2QgPSBwYXJzZWQubWV0aG9kOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSAnbWF4LWZvcndhcmRzJzoKICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoJ21heC1mb3J3YXJkcycsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcignbWF4LWZvcndhcmRzJyk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnd3d3LWF1dGhlbnRpY2F0ZSc6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCd3d3ctYXV0aGVudGljYXRlJywgaGVhZGVyVmFsdWUpOwogICAgICBwYXJzZWQgPSBtZXNzYWdlLnBhcnNlSGVhZGVyKCd3d3ctYXV0aGVudGljYXRlJyk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAncHJveHktYXV0aGVudGljYXRlJzoKICAgICAgbWVzc2FnZS5zZXRIZWFkZXIoJ3Byb3h5LWF1dGhlbnRpY2F0ZScsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcigncHJveHktYXV0aGVudGljYXRlJyk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAncmVmZXItdG8nOgogICAgY2FzZSAncic6CiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKCdyZWZlci10bycsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gbWVzc2FnZS5wYXJzZUhlYWRlcigncmVmZXItdG8nKTsKICAgICAgaWYgKHBhcnNlZCkgewogICAgICAgIG1lc3NhZ2UucmVmZXJfdG8gPSBwYXJzZWQ7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICAvLyBEbyBub3QgcGFyc2UgdGhpcyBoZWFkZXIuCiAgICAgIG1lc3NhZ2Uuc2V0SGVhZGVyKGhlYWRlck5hbWUsIGhlYWRlclZhbHVlKTsKICAgICAgcGFyc2VkID0gMDsKICB9CgogIGlmIChwYXJzZWQgPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6ICdlcnJvciBwYXJzaW5nIGhlYWRlciAiJysgaGVhZGVyTmFtZSArJyInCiAgICB9OwogIH0gZWxzZSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCi8qKiBQYXJzZSBTSVAgTWVzc2FnZQogKiBAZnVuY3Rpb24KICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgU0lQIG1lc3NhZ2UuCiAqIEBwYXJhbSB7T2JqZWN0fSBsb2dnZXIgb2JqZWN0LgogKiBAcmV0dXJucyB7U0lQLkluY29taW5nUmVxdWVzdHxTSVAuSW5jb21pbmdSZXNwb25zZXx1bmRlZmluZWR9CiAqLwpQYXJzZXIgPSB7fTsKUGFyc2VyLnBhcnNlTWVzc2FnZSA9IGZ1bmN0aW9uKGRhdGEsIHVhKSB7CiAgdmFyIG1lc3NhZ2UsIGZpcnN0TGluZSwgY29udGVudExlbmd0aCwgYm9keVN0YXJ0LCBwYXJzZWQsCiAgICBoZWFkZXJTdGFydCA9IDAsCiAgICBoZWFkZXJFbmQgPSBkYXRhLmluZGV4T2YoJ1xyXG4nKSwKICAgIGxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnBhcnNlcicpOwoKICBpZihoZWFkZXJFbmQgPT09IC0xKSB7CiAgICBsb2dnZXIud2Fybignbm8gQ1JMRiBmb3VuZCwgbm90IGEgU0lQIG1lc3NhZ2UsIGRpc2NhcmRlZCcpOwogICAgcmV0dXJuOwogIH0KCiAgLy8gUGFyc2UgZmlyc3QgbGluZS4gQ2hlY2sgaWYgaXQgaXMgYSBSZXF1ZXN0IG9yIGEgUmVwbHkuCiAgZmlyc3RMaW5lID0gZGF0YS5zdWJzdHJpbmcoMCwgaGVhZGVyRW5kKTsKICBwYXJzZWQgPSBTSVAuR3JhbW1hci5wYXJzZShmaXJzdExpbmUsICdSZXF1ZXN0X1Jlc3BvbnNlJyk7CgogIGlmKHBhcnNlZCA9PT0gLTEpIHsKICAgIGxvZ2dlci53YXJuKCdlcnJvciBwYXJzaW5nIGZpcnN0IGxpbmUgb2YgU0lQIG1lc3NhZ2U6ICInICsgZmlyc3RMaW5lICsgJyInKTsKICAgIHJldHVybjsKICB9IGVsc2UgaWYoIXBhcnNlZC5zdGF0dXNfY29kZSkgewogICAgbWVzc2FnZSA9IG5ldyBTSVAuSW5jb21pbmdSZXF1ZXN0KHVhKTsKICAgIG1lc3NhZ2UubWV0aG9kID0gcGFyc2VkLm1ldGhvZDsKICAgIG1lc3NhZ2UucnVyaSA9IHBhcnNlZC51cmk7CiAgfSBlbHNlIHsKICAgIG1lc3NhZ2UgPSBuZXcgU0lQLkluY29taW5nUmVzcG9uc2UodWEpOwogICAgbWVzc2FnZS5zdGF0dXNfY29kZSA9IHBhcnNlZC5zdGF0dXNfY29kZTsKICAgIG1lc3NhZ2UucmVhc29uX3BocmFzZSA9IHBhcnNlZC5yZWFzb25fcGhyYXNlOwogIH0KCiAgbWVzc2FnZS5kYXRhID0gZGF0YTsKICBoZWFkZXJTdGFydCA9IGhlYWRlckVuZCArIDI7CgogIC8qIExvb3Agb3ZlciBldmVyeSBsaW5lIGluIGRhdGEuIERldGVjdCB0aGUgZW5kIG9mIGVhY2ggaGVhZGVyIGFuZCBwYXJzZQogICogaXQgb3Igc2ltcGx5IGFkZCB0byB0aGUgaGVhZGVycyBjb2xsZWN0aW9uLgogICovCiAgd2hpbGUodHJ1ZSkgewogICAgaGVhZGVyRW5kID0gZ2V0SGVhZGVyKGRhdGEsIGhlYWRlclN0YXJ0KTsKCiAgICAvLyBUaGUgU0lQIG1lc3NhZ2UgaGFzIG5vcm1hbGx5IGZpbmlzaGVkLgogICAgaWYoaGVhZGVyRW5kID09PSAtMikgewogICAgICBib2R5U3RhcnQgPSBoZWFkZXJTdGFydCArIDI7CiAgICAgIGJyZWFrOwogICAgfQogICAgLy8gZGF0YS5pbmRleE9mIHJldHVybmVkIC0xIGR1ZSB0byBhIG1hbGZvcm1lZCBtZXNzYWdlLgogICAgZWxzZSBpZihoZWFkZXJFbmQgPT09IC0xKSB7CiAgICAgIGxvZ2dlci5lcnJvcignbWFsZm9ybWVkIG1lc3NhZ2UnKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHBhcnNlZCA9IHBhcnNlSGVhZGVyKG1lc3NhZ2UsIGRhdGEsIGhlYWRlclN0YXJ0LCBoZWFkZXJFbmQpOwoKICAgIGlmKHBhcnNlZCAhPT0gdHJ1ZSkgewogICAgICBsb2dnZXIuZXJyb3IocGFyc2VkLmVycm9yKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGhlYWRlclN0YXJ0ID0gaGVhZGVyRW5kICsgMjsKICB9CgogIC8qIFJGQzMyNjEgMTguMy4KICAgKiBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBieXRlcyBpbiB0aGUgdHJhbnNwb3J0IHBhY2tldAogICAqIGJleW9uZCB0aGUgZW5kIG9mIHRoZSBib2R5LCB0aGV5IE1VU1QgYmUgZGlzY2FyZGVkLgogICAqLwogIGlmKG1lc3NhZ2UuaGFzSGVhZGVyKCdjb250ZW50LWxlbmd0aCcpKSB7CiAgICBjb250ZW50TGVuZ3RoID0gbWVzc2FnZS5nZXRIZWFkZXIoJ2NvbnRlbnQtbGVuZ3RoJyk7CiAgICBtZXNzYWdlLmJvZHkgPSBkYXRhLnN1YnN0cihib2R5U3RhcnQsIGNvbnRlbnRMZW5ndGgpOwogIH0gZWxzZSB7CiAgICBtZXNzYWdlLmJvZHkgPSBkYXRhLnN1YnN0cmluZyhib2R5U3RhcnQpOwogIH0KCiAgcmV0dXJuIG1lc3NhZ2U7Cn07CgpTSVAuUGFyc2VyID0gUGFyc2VyOwp9OwoKfSx7fV0sMjM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKFNJUCkgewoKdmFyIFJlZ2lzdGVyQ29udGV4dDsKClJlZ2lzdGVyQ29udGV4dCA9IGZ1bmN0aW9uICh1YSkgewogIHZhciBwYXJhbXMgPSB7fSwKICAgICAgcmVnSWQgPSAxOwoKICB0aGlzLnJlZ2lzdHJhciA9IHVhLmNvbmZpZ3VyYXRpb24ucmVnaXN0cmFyU2VydmVyOwogIHRoaXMuZXhwaXJlcyA9IHVhLmNvbmZpZ3VyYXRpb24ucmVnaXN0ZXJFeHBpcmVzOwoKCiAgLy8gQ29udGFjdCBoZWFkZXIKICB0aGlzLmNvbnRhY3QgPSB1YS5jb250YWN0LnRvU3RyaW5nKCk7CgogIGlmKHJlZ0lkKSB7CiAgICB0aGlzLmNvbnRhY3QgKz0gJztyZWctaWQ9JysgcmVnSWQ7CiAgICB0aGlzLmNvbnRhY3QgKz0gJzsrc2lwLmluc3RhbmNlPSI8dXJuOnV1aWQ6JysgdWEuY29uZmlndXJhdGlvbi5pbnN0YW5jZUlkKyc+Iic7CiAgfQoKICAvLyBDYWxsLUlEIGFuZCBDU2VxIHZhbHVlcyBSRkMzMjYxIDEwLjIKICB0aGlzLmNhbGxfaWQgPSBTSVAuVXRpbHMuY3JlYXRlUmFuZG9tVG9rZW4oMjIpOwogIHRoaXMuY3NlcSA9IDgwOwoKICB0aGlzLnRvX3VyaSA9IHVhLmNvbmZpZ3VyYXRpb24udXJpOwoKICBwYXJhbXMudG9fdXJpID0gdGhpcy50b191cmk7CiAgcGFyYW1zLnRvX2Rpc3BsYXlOYW1lID0gdWEuY29uZmlndXJhdGlvbi5kaXNwbGF5TmFtZTsKICBwYXJhbXMuY2FsbF9pZCA9IHRoaXMuY2FsbF9pZDsKICBwYXJhbXMuY3NlcSA9IHRoaXMuY3NlcTsKCiAgLy8gRXh0ZW5kcyBDbGllbnRDb250ZXh0CiAgU0lQLlV0aWxzLmF1Z21lbnQodGhpcywgU0lQLkNsaWVudENvbnRleHQsIFt1YSwgJ1JFR0lTVEVSJywgdGhpcy5yZWdpc3RyYXIsIHtwYXJhbXM6IHBhcmFtc31dKTsKCiAgdGhpcy5yZWdpc3RyYXRpb25UaW1lciA9IG51bGw7CiAgdGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgPSBudWxsOwoKICAvLyBTZXQgc3RhdHVzCiAgdGhpcy5yZWdpc3RlcmVkID0gZmFsc2U7CgogIHRoaXMubG9nZ2VyID0gdWEuZ2V0TG9nZ2VyKCdzaXAucmVnaXN0ZXJjb250ZXh0Jyk7Cn07CgpSZWdpc3RlckNvbnRleHQucHJvdG90eXBlID0gewogIHJlZ2lzdGVyOiBmdW5jdGlvbiAob3B0aW9ucykgewogICAgdmFyIHNlbGYgPSB0aGlzLCBleHRyYUhlYWRlcnM7CgogICAgLy8gSGFuZGxlIE9wdGlvbnMKICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBleHRyYUhlYWRlcnMgPSAodGhpcy5vcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250YWN0OiAnICsgdGhpcy5jb250YWN0ICsgJztleHBpcmVzPScgKyB0aGlzLmV4cGlyZXMpOwogICAgZXh0cmFIZWFkZXJzLnB1c2goJ0FsbG93OiAnICsgU0lQLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpOwoKICAgIC8vIFNhdmUgb3JpZ2luYWwgZXh0cmFIZWFkZXJzIHRvIGJlIHVzZWQgaW4gLmNsb3NlCiAgICB0aGlzLmNsb3NlSGVhZGVycyA9IHRoaXMub3B0aW9ucy5jbG9zZVdpdGhIZWFkZXJzID8KICAgICAgKHRoaXMub3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCkgOiBbXTsKCiAgICB0aGlzLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgIHZhciBjb250YWN0LCBleHBpcmVzLAogICAgICAgIGNvbnRhY3RzID0gcmVzcG9uc2UuZ2V0SGVhZGVycygnY29udGFjdCcpLmxlbmd0aCwKICAgICAgICBjYXVzZTsKCiAgICAgIC8vIERpc2NhcmQgcmVzcG9uc2VzIHRvIG9sZGVyIFJFR0lTVEVSL3VuLVJFR0lTVEVSIHJlcXVlc3RzLgogICAgICBpZihyZXNwb25zZS5jc2VxICE9PSB0aGlzLmNzZXEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIC8vIENsZWFyIHJlZ2lzdHJhdGlvbiB0aW1lcgogICAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25UaW1lciAhPT0gbnVsbCkgewogICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpOwogICAgICAgIHRoaXMucmVnaXN0cmF0aW9uVGltZXIgPSBudWxsOwogICAgICB9CgogICAgICBzd2l0Y2godHJ1ZSkgewogICAgICAgIGNhc2UgL14xWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKToKICAgICAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXNwb25zZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgICB0aGlzLmVtaXQoJ2FjY2VwdGVkJywgcmVzcG9uc2UpOwoKICAgICAgICAgIGlmKHJlc3BvbnNlLmhhc0hlYWRlcignZXhwaXJlcycpKSB7CiAgICAgICAgICAgIGV4cGlyZXMgPSByZXNwb25zZS5nZXRIZWFkZXIoJ2V4cGlyZXMnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgIT09IG51bGwpIHsKICAgICAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIpOwogICAgICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gU2VhcmNoIHRoZSBDb250YWN0IHBvaW50aW5nIHRvIHVzIGFuZCB1cGRhdGUgdGhlIGV4cGlyZXMgdmFsdWUgYWNjb3JkaW5nbHkuCiAgICAgICAgICBpZiAoIWNvbnRhY3RzKSB7CiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ25vIENvbnRhY3QgaGVhZGVyIGluIHJlc3BvbnNlIHRvIFJFR0lTVEVSLCByZXNwb25zZSBpZ25vcmVkJyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHdoaWxlKGNvbnRhY3RzLS0pIHsKICAgICAgICAgICAgY29udGFjdCA9IHJlc3BvbnNlLnBhcnNlSGVhZGVyKCdjb250YWN0JywgY29udGFjdHMpOwogICAgICAgICAgICBpZihjb250YWN0LnVyaS51c2VyID09PSB0aGlzLnVhLmNvbnRhY3QudXJpLnVzZXIpIHsKICAgICAgICAgICAgICBleHBpcmVzID0gY29udGFjdC5nZXRQYXJhbSgnZXhwaXJlcycpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnRhY3QgPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFjb250YWN0KSB7CiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ25vIENvbnRhY3QgaGVhZGVyIHBvaW50aW5nIHRvIHVzLCByZXNwb25zZSBpZ25vcmVkJyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmKCFleHBpcmVzKSB7CiAgICAgICAgICAgIGV4cGlyZXMgPSB0aGlzLmV4cGlyZXM7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gUmUtUmVnaXN0ZXIgYmVmb3JlIHRoZSBleHBpcmF0aW9uIGludGVydmFsIGhhcyBlbGFwc2VkLgogICAgICAgICAgLy8gRm9yIHRoYXQsIGRlY3JlYXNlIHRoZSBleHBpcmVzIHZhbHVlLiBpZTogMyBzZWNvbmRzCiAgICAgICAgICB0aGlzLnJlZ2lzdHJhdGlvblRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzZWxmLnJlZ2lzdHJhdGlvblRpbWVyID0gbnVsbDsKICAgICAgICAgICAgc2VsZi5yZWdpc3RlcihzZWxmLm9wdGlvbnMpOwogICAgICAgICAgfSwgKGV4cGlyZXMgKiAxMDAwKSAtIDMwMDApOwogICAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZWxmLmxvZ2dlci53YXJuKCdyZWdpc3RyYXRpb24gZXhwaXJlZCcpOwogICAgICAgICAgICBpZiAoc2VsZi5yZWdpc3RlcmVkKSB7CiAgICAgICAgICAgICAgc2VsZi51bnJlZ2lzdGVyZWQobnVsbCwgU0lQLkMuY2F1c2VzLkVYUElSRVMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9LCBleHBpcmVzICogMTAwMCk7CgogICAgICAgICAgLy9TYXZlIGdydXUgdmFsdWVzCiAgICAgICAgICBpZiAoY29udGFjdC5oYXNQYXJhbSgndGVtcC1ncnV1JykpIHsKICAgICAgICAgICAgdGhpcy51YS5jb250YWN0LnRlbXBfZ3J1dSA9IFNJUC5VUkkucGFyc2UoY29udGFjdC5nZXRQYXJhbSgndGVtcC1ncnV1JykucmVwbGFjZSgvIi9nLCcnKSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29udGFjdC5oYXNQYXJhbSgncHViLWdydXUnKSkgewogICAgICAgICAgICB0aGlzLnVhLmNvbnRhY3QucHViX2dydXUgPSBTSVAuVVJJLnBhcnNlKGNvbnRhY3QuZ2V0UGFyYW0oJ3B1Yi1ncnV1JykucmVwbGFjZSgvIi9nLCcnKSk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5yZWdpc3RlcmVkID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZW1pdCgncmVnaXN0ZXJlZCcsIHJlc3BvbnNlIHx8IG51bGwpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8gSW50ZXJ2YWwgdG9vIGJyaWVmIFJGQzMyNjEgMTAuMi44CiAgICAgICAgY2FzZSAvXjQyMyQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgICAgaWYocmVzcG9uc2UuaGFzSGVhZGVyKCdtaW4tZXhwaXJlcycpKSB7CiAgICAgICAgICAgIC8vIEluY3JlYXNlIG91ciByZWdpc3RyYXRpb24gaW50ZXJ2YWwgdG8gdGhlIHN1Z2dlc3RlZCBtaW5pbXVtCiAgICAgICAgICAgIHRoaXMuZXhwaXJlcyA9IHJlc3BvbnNlLmdldEhlYWRlcignbWluLWV4cGlyZXMnKTsKICAgICAgICAgICAgLy8gQXR0ZW1wdCB0aGUgcmVnaXN0cmF0aW9uIGFnYWluIGltbWVkaWF0ZWx5CiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIodGhpcy5vcHRpb25zKTsKICAgICAgICAgIH0gZWxzZSB7IC8vVGhpcyByZXNwb25zZSBNVVNUIGNvbnRhaW4gYSBNaW4tRXhwaXJlcyBoZWFkZXIgZmllbGQKICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybignNDIzIHJlc3BvbnNlIHJlY2VpdmVkIGZvciBSRUdJU1RFUiB3aXRob3V0IE1pbi1FeHBpcmVzJyk7CiAgICAgICAgICAgIHRoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShyZXNwb25zZSwgU0lQLkMuY2F1c2VzLlNJUF9GQUlMVVJFX0NPREUpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGNhdXNlID0gU0lQLlV0aWxzLnNpcEVycm9yQ2F1c2UocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOwogICAgICAgICAgdGhpcy5yZWdpc3RyYXRpb25GYWlsdXJlKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5vblJlcXVlc3RUaW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH07CgogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICB9OwoKICAgIHRoaXMuY3NlcSsrOwogICAgdGhpcy5yZXF1ZXN0LmNzZXEgPSB0aGlzLmNzZXE7CiAgICB0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKCdjc2VxJywgdGhpcy5jc2VxICsgJyBSRUdJU1RFUicpOwogICAgdGhpcy5yZXF1ZXN0LmV4dHJhSGVhZGVycyA9IGV4dHJhSGVhZGVyczsKICAgIHRoaXMuc2VuZCgpOwogIH0sCgogIHJlZ2lzdHJhdGlvbkZhaWx1cmU6IGZ1bmN0aW9uIChyZXNwb25zZSwgY2F1c2UpIHsKICAgIHRoaXMuZW1pdCgnZmFpbGVkJywgcmVzcG9uc2UgfHwgbnVsbCwgY2F1c2UgfHwgbnVsbCk7CiAgfSwKCiAgb25UcmFuc3BvcnRDbG9zZWQ6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5yZWdpc3RlcmVkX2JlZm9yZSA9IHRoaXMucmVnaXN0ZXJlZDsKICAgIGlmICh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyICE9PSBudWxsKSB7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpOwogICAgICB0aGlzLnJlZ2lzdHJhdGlvblRpbWVyID0gbnVsbDsKICAgIH0KCiAgICBpZiAodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIgIT09IG51bGwpIHsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25FeHBpcmVkVGltZXIpOwogICAgICB0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciA9IG51bGw7CiAgICB9CgogICAgaWYodGhpcy5yZWdpc3RlcmVkKSB7CiAgICAgIHRoaXMudW5yZWdpc3RlcmVkKG51bGwsIFNJUC5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKTsKICAgIH0KICB9LAoKICBvblRyYW5zcG9ydENvbm5lY3RlZDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnJlZ2lzdGVyKHRoaXMub3B0aW9ucyk7CiAgfSwKCiAgY2xvc2U6IGZ1bmN0aW9uKCkgewogICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgIGFsbDogZmFsc2UsCiAgICAgIGV4dHJhSGVhZGVyczogdGhpcy5jbG9zZUhlYWRlcnMKICAgIH07CgogICAgdGhpcy5yZWdpc3RlcmVkX2JlZm9yZSA9IHRoaXMucmVnaXN0ZXJlZDsKICAgIHRoaXMudW5yZWdpc3RlcihvcHRpb25zKTsKICB9LAoKICB1bnJlZ2lzdGVyOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICB2YXIgZXh0cmFIZWFkZXJzOwoKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIGlmKCF0aGlzLnJlZ2lzdGVyZWQgJiYgIW9wdGlvbnMuYWxsKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2FscmVhZHkgdW5yZWdpc3RlcmVkJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBleHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CgogICAgdGhpcy5yZWdpc3RlcmVkID0gZmFsc2U7CgogICAgLy8gQ2xlYXIgdGhlIHJlZ2lzdHJhdGlvbiB0aW1lci4KICAgIGlmICh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyICE9PSBudWxsKSB7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpOwogICAgICB0aGlzLnJlZ2lzdHJhdGlvblRpbWVyID0gbnVsbDsKICAgIH0KCiAgICBpZihvcHRpb25zLmFsbCkgewogICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGFjdDogKicpOwogICAgICBleHRyYUhlYWRlcnMucHVzaCgnRXhwaXJlczogMCcpOwogICAgfSBlbHNlIHsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCArICc7ZXhwaXJlcz0wJyk7CiAgICB9CgoKICAgIHRoaXMucmVjZWl2ZVJlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgdmFyIGNhdXNlOwoKICAgICAgc3dpdGNoKHRydWUpIHsKICAgICAgICBjYXNlIC9eMVswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAvXjJbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgICAgdGhpcy5lbWl0KCdhY2NlcHRlZCcsIHJlc3BvbnNlKTsKICAgICAgICAgIGlmICh0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lciAhPT0gbnVsbCkgewogICAgICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvbkV4cGlyZWRUaW1lcik7CiAgICAgICAgICAgIHRoaXMucmVnaXN0cmF0aW9uRXhwaXJlZFRpbWVyID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKHJlc3BvbnNlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBjYXVzZSA9IFNJUC5VdGlscy5zaXBFcnJvckNhdXNlKHJlc3BvbnNlLnN0YXR1c19jb2RlKTsKICAgICAgICAgIHRoaXMudW5yZWdpc3RlcmVkKHJlc3BvbnNlLGNhdXNlKTsKICAgICAgfQogICAgfTsKCiAgICB0aGlzLm9uUmVxdWVzdFRpbWVvdXQgPSBmdW5jdGlvbigpIHsKICAgICAgLy8gTm90IGFjdHVhbGx5IHVucmVnaXN0ZXJlZC4uLgogICAgICAvL3RoaXMudW5yZWdpc3RlcmVkKG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgfTsKCiAgICB0aGlzLm9uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgLy8gTm90IGFjdHVhbGx5IHVucmVnaXN0ZXJlZC4uLgogICAgICAvL3RoaXMudW5yZWdpc3RlcmVkKG51bGwsIFNJUC5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKTsKICAgIH07CgogICAgdGhpcy5jc2VxKys7CiAgICB0aGlzLnJlcXVlc3QuY3NlcSA9IHRoaXMuY3NlcTsKICAgIHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoJ2NzZXEnLCB0aGlzLmNzZXEgKyAnIFJFR0lTVEVSJyk7CiAgICB0aGlzLnJlcXVlc3QuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwoKICAgIHRoaXMuc2VuZCgpOwogIH0sCgogIHVucmVnaXN0ZXJlZDogZnVuY3Rpb24ocmVzcG9uc2UsIGNhdXNlKSB7CiAgICB0aGlzLnJlZ2lzdGVyZWQgPSBmYWxzZTsKICAgIHRoaXMuZW1pdCgndW5yZWdpc3RlcmVkJywgcmVzcG9uc2UgfHwgbnVsbCwgY2F1c2UgfHwgbnVsbCk7CiAgfQoKfTsKCgpTSVAuUmVnaXN0ZXJDb250ZXh0ID0gUmVnaXN0ZXJDb250ZXh0Owp9OwoKfSx7fV0sMjQ6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgovKioKICogQGZpbGVvdmVydmlldyBSZXF1ZXN0IFNlbmRlcgogKi8KCi8qKgogKiBAYXVnbWVudHMgU0lQCiAqIEBjbGFzcyBDbGFzcyBjcmVhdGluZyBhIHJlcXVlc3Qgc2VuZGVyLgogKiBAcGFyYW0ge09iamVjdH0gYXBwbGljYW50CiAqIEBwYXJhbSB7U0lQLlVBfSB1YQogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CnZhciBSZXF1ZXN0U2VuZGVyOwoKUmVxdWVzdFNlbmRlciA9IGZ1bmN0aW9uKGFwcGxpY2FudCwgdWEpIHsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnJlcXVlc3RzZW5kZXInKTsKICB0aGlzLnVhID0gdWE7CiAgdGhpcy5hcHBsaWNhbnQgPSBhcHBsaWNhbnQ7CiAgdGhpcy5tZXRob2QgPSBhcHBsaWNhbnQucmVxdWVzdC5tZXRob2Q7CiAgdGhpcy5yZXF1ZXN0ID0gYXBwbGljYW50LnJlcXVlc3Q7CiAgdGhpcy5jcmVkZW50aWFscyA9IG51bGw7CiAgdGhpcy5jaGFsbGVuZ2VkID0gZmFsc2U7CiAgdGhpcy5zdGFsZWQgPSBmYWxzZTsKCiAgLy8gSWYgdWEgaXMgaW4gY2xvc2luZyBwcm9jZXNzIG9yIGV2ZW4gY2xvc2VkIGp1c3QgYWxsb3cgc2VuZGluZyBCeWUgYW5kIEFDSwogIGlmICh1YS5zdGF0dXMgPT09IFNJUC5VQS5DLlNUQVRVU19VU0VSX0NMT1NFRCAmJiAodGhpcy5tZXRob2QgIT09IFNJUC5DLkJZRSB8fCB0aGlzLm1ldGhvZCAhPT0gU0lQLkMuQUNLKSkgewogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKLyoqCiogQ3JlYXRlIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24gYW5kIHNlbmQgdGhlIG1lc3NhZ2UuCiovClJlcXVlc3RTZW5kZXIucHJvdG90eXBlID0gewogIHNlbmQ6IGZ1bmN0aW9uKCkgewogICAgc3dpdGNoKHRoaXMubWV0aG9kKSB7CiAgICAgIGNhc2UgIklOVklURSI6CiAgICAgICAgdGhpcy5jbGllbnRUcmFuc2FjdGlvbiA9IG5ldyBTSVAuVHJhbnNhY3Rpb25zLkludml0ZUNsaWVudFRyYW5zYWN0aW9uKHRoaXMsIHRoaXMucmVxdWVzdCwgdGhpcy51YS50cmFuc3BvcnQpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJBQ0siOgogICAgICAgIHRoaXMuY2xpZW50VHJhbnNhY3Rpb24gPSBuZXcgU0lQLlRyYW5zYWN0aW9ucy5BY2tDbGllbnRUcmFuc2FjdGlvbih0aGlzLCB0aGlzLnJlcXVlc3QsIHRoaXMudWEudHJhbnNwb3J0KTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICB0aGlzLmNsaWVudFRyYW5zYWN0aW9uID0gbmV3IFNJUC5UcmFuc2FjdGlvbnMuTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24odGhpcywgdGhpcy5yZXF1ZXN0LCB0aGlzLnVhLnRyYW5zcG9ydCk7CiAgICB9CiAgICB0aGlzLmNsaWVudFRyYW5zYWN0aW9uLnNlbmQoKTsKCiAgICByZXR1cm4gdGhpcy5jbGllbnRUcmFuc2FjdGlvbjsKICB9LAoKICAvKioKICAqIENhbGxiYWNrIGZpcmVkIHdoZW4gcmVjZWl2aW5nIGEgcmVxdWVzdCB0aW1lb3V0IGVycm9yIGZyb20gdGhlIGNsaWVudCB0cmFuc2FjdGlvbi4KICAqIFRvIGJlIHJlLWRlZmluZWQgYnkgdGhlIGFwcGxpY2FudC4KICAqIEBldmVudAogICovCiAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmFwcGxpY2FudC5vblJlcXVlc3RUaW1lb3V0KCk7CiAgfSwKCiAgLyoqCiAgKiBDYWxsYmFjayBmaXJlZCB3aGVuIHJlY2VpdmluZyBhIHRyYW5zcG9ydCBlcnJvciBmcm9tIHRoZSBjbGllbnQgdHJhbnNhY3Rpb24uCiAgKiBUbyBiZSByZS1kZWZpbmVkIGJ5IHRoZSBhcHBsaWNhbnQuCiAgKiBAZXZlbnQKICAqLwogIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5hcHBsaWNhbnQub25UcmFuc3BvcnRFcnJvcigpOwogIH0sCgogIC8qKgogICogQ2FsbGVkIGZyb20gY2xpZW50IHRyYW5zYWN0aW9uIHdoZW4gcmVjZWl2aW5nIGEgY29ycmVjdCByZXNwb25zZSB0byB0aGUgcmVxdWVzdC4KICAqIEF1dGhlbnRpY2F0ZSByZXF1ZXN0IGlmIG5lZWRlZCBvciBwYXNzIHRoZSByZXNwb25zZSBiYWNrIHRvIHRoZSBhcHBsaWNhbnQuCiAgKiBAcGFyYW0ge1NJUC5JbmNvbWluZ1Jlc3BvbnNlfSByZXNwb25zZQogICovCiAgcmVjZWl2ZVJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdmFyIGNzZXEsIGNoYWxsZW5nZSwgYXV0aG9yaXphdGlvbl9oZWFkZXJfbmFtZSwKICAgICAgc3RhdHVzX2NvZGUgPSByZXNwb25zZS5zdGF0dXNfY29kZTsKCiAgICAvKgogICAgKiBBdXRoZW50aWNhdGlvbgogICAgKiBBdXRoZW50aWNhdGUgb25jZS4gX2NoYWxsZW5nZWRfIGZsYWcgdXNlZCB0byBhdm9pZCBpbmZpbml0ZSBhdXRoZW50aWNhdGlvbnMuCiAgICAqLwogICAgaWYgKHN0YXR1c19jb2RlID09PSA0MDEgfHwgc3RhdHVzX2NvZGUgPT09IDQwNykgewoKICAgICAgLy8gR2V0IGFuZCBwYXJzZSB0aGUgYXBwcm9wcmlhdGUgV1dXLUF1dGhlbnRpY2F0ZSBvciBQcm94eS1BdXRoZW50aWNhdGUgaGVhZGVyLgogICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT09IDQwMSkgewogICAgICAgIGNoYWxsZW5nZSA9IHJlc3BvbnNlLnBhcnNlSGVhZGVyKCd3d3ctYXV0aGVudGljYXRlJyk7CiAgICAgICAgYXV0aG9yaXphdGlvbl9oZWFkZXJfbmFtZSA9ICdhdXRob3JpemF0aW9uJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBjaGFsbGVuZ2UgPSByZXNwb25zZS5wYXJzZUhlYWRlcigncHJveHktYXV0aGVudGljYXRlJyk7CiAgICAgICAgYXV0aG9yaXphdGlvbl9oZWFkZXJfbmFtZSA9ICdwcm94eS1hdXRob3JpemF0aW9uJzsKICAgICAgfQoKICAgICAgLy8gVmVyaWZ5IGl0IHNlZW1zIGEgdmFsaWQgY2hhbGxlbmdlLgogICAgICBpZiAoISBjaGFsbGVuZ2UpIHsKICAgICAgICB0aGlzLmxvZ2dlci53YXJuKHJlc3BvbnNlLnN0YXR1c19jb2RlICsgJyB3aXRoIHdyb25nIG9yIG1pc3NpbmcgY2hhbGxlbmdlLCBjYW5ub3QgYXV0aGVudGljYXRlJyk7CiAgICAgICAgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5jaGFsbGVuZ2VkIHx8ICghdGhpcy5zdGFsZWQgJiYgY2hhbGxlbmdlLnN0YWxlID09PSB0cnVlKSkgewogICAgICAgIGlmICghdGhpcy5jcmVkZW50aWFscykgewogICAgICAgICAgdGhpcy5jcmVkZW50aWFscyA9IHRoaXMudWEuY29uZmlndXJhdGlvbi5hdXRoZW50aWNhdGlvbkZhY3RvcnkodGhpcy51YSk7CiAgICAgICAgfQoKICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGUgY2hhbGxlbmdlIGlzIHJlYWxseSB2YWxpZC4KICAgICAgICBpZiAoIXRoaXMuY3JlZGVudGlhbHMuYXV0aGVudGljYXRlKHRoaXMucmVxdWVzdCwgY2hhbGxlbmdlKSkgewogICAgICAgICAgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgdGhpcy5jaGFsbGVuZ2VkID0gdHJ1ZTsKCiAgICAgICAgaWYgKGNoYWxsZW5nZS5zdGFsZSkgewogICAgICAgICAgdGhpcy5zdGFsZWQgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHJlc3BvbnNlLm1ldGhvZCA9PT0gU0lQLkMuUkVHSVNURVIpIHsKICAgICAgICAgIGNzZXEgPSB0aGlzLmFwcGxpY2FudC5jc2VxICs9IDE7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJlcXVlc3QuZGlhbG9nKXsKICAgICAgICAgIGNzZXEgPSB0aGlzLnJlcXVlc3QuZGlhbG9nLmxvY2FsX3NlcW51bSArPSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjc2VxID0gdGhpcy5yZXF1ZXN0LmNzZXEgKyAxOwogICAgICAgICAgdGhpcy5yZXF1ZXN0LmNzZXEgPSBjc2VxOwogICAgICAgIH0KICAgICAgICB0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKCdjc2VxJywgY3NlcSArJyAnKyB0aGlzLm1ldGhvZCk7CgogICAgICAgIHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoYXV0aG9yaXphdGlvbl9oZWFkZXJfbmFtZSwgdGhpcy5jcmVkZW50aWFscy50b1N0cmluZygpKTsKICAgICAgICB0aGlzLnNlbmQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UocmVzcG9uc2UpOwogICAgfQogIH0KfTsKClNJUC5SZXF1ZXN0U2VuZGVyID0gUmVxdWVzdFNlbmRlcjsKfTsKCn0se31dLDI1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoqCiAqIEBuYW1lIFNJUAogKiBAbmFtZXNwYWNlCiAqLwoidXNlIHN0cmljdCI7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbnZpcm9ubWVudCkgewoKdmFyIHBrZyA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpOwoKdmFyIFNJUCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHt9LCB7CiAgdmVyc2lvbjogewogICAgZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gcGtnLnZlcnNpb247IH0KICB9LAogIG5hbWU6IHsKICAgIGdldDogZnVuY3Rpb24oKXsgcmV0dXJuIHBrZy50aXRsZTsgfQogIH0KfSk7CgpyZXF1aXJlKCcuL1V0aWxzJykoU0lQLCBlbnZpcm9ubWVudCk7ClNJUC5Mb2dnZXJGYWN0b3J5ID0gcmVxdWlyZSgnLi9Mb2dnZXJGYWN0b3J5JykoZW52aXJvbm1lbnQuY29uc29sZSk7ClNJUC5FdmVudEVtaXR0ZXIgPSByZXF1aXJlKCcuL0V2ZW50RW1pdHRlcicpKGVudmlyb25tZW50LmNvbnNvbGUpOwpTSVAuQyA9IHJlcXVpcmUoJy4vQ29uc3RhbnRzJykoU0lQLm5hbWUsIFNJUC52ZXJzaW9uKTsKU0lQLkV4Y2VwdGlvbnMgPSByZXF1aXJlKCcuL0V4Y2VwdGlvbnMnKTsKU0lQLlRpbWVycyA9IHJlcXVpcmUoJy4vVGltZXJzJykoZW52aXJvbm1lbnQudGltZXJzKTsKU0lQLlRyYW5zcG9ydCA9IGVudmlyb25tZW50LlRyYW5zcG9ydChTSVAsIGVudmlyb25tZW50LldlYlNvY2tldCk7CnJlcXVpcmUoJy4vUGFyc2VyJykoU0lQKTsKcmVxdWlyZSgnLi9TSVBNZXNzYWdlJykoU0lQKTsKcmVxdWlyZSgnLi9VUkknKShTSVApOwpyZXF1aXJlKCcuL05hbWVBZGRySGVhZGVyJykoU0lQKTsKcmVxdWlyZSgnLi9UcmFuc2FjdGlvbnMnKShTSVApOwpyZXF1aXJlKCcuL0RpYWxvZ3MnKShTSVApOwpyZXF1aXJlKCcuL1JlcXVlc3RTZW5kZXInKShTSVApOwpyZXF1aXJlKCcuL1JlZ2lzdGVyQ29udGV4dCcpKFNJUCk7ClNJUC5NZWRpYUhhbmRsZXIgPSByZXF1aXJlKCcuL01lZGlhSGFuZGxlcicpKFNJUC5FdmVudEVtaXR0ZXIpOwpyZXF1aXJlKCcuL0NsaWVudENvbnRleHQnKShTSVApOwpyZXF1aXJlKCcuL1NlcnZlckNvbnRleHQnKShTSVApOwpyZXF1aXJlKCcuL1Nlc3Npb24nKShTSVAsIGVudmlyb25tZW50KTsKcmVxdWlyZSgnLi9TdWJzY3JpcHRpb24nKShTSVApOwpTSVAuV2ViUlRDID0gcmVxdWlyZSgnLi9XZWJSVEMnKShTSVAsIGVudmlyb25tZW50KTsKcmVxdWlyZSgnLi9VQScpKFNJUCwgZW52aXJvbm1lbnQpOwpTSVAuSGFja3MgPSByZXF1aXJlKCcuL0hhY2tzJykoU0lQKTsKcmVxdWlyZSgnLi9TYW5pdHlDaGVjaycpKFNJUCk7ClNJUC5EaWdlc3RBdXRoZW50aWNhdGlvbiA9IHJlcXVpcmUoJy4vRGlnZXN0QXV0aGVudGljYXRpb24nKShTSVAuVXRpbHMpOwpTSVAuR3JhbW1hciA9IHJlcXVpcmUoJy4vR3JhbW1hcicpKFNJUCk7CgpyZXR1cm4gU0lQOwp9OwoKfSx7Ii4uL3BhY2thZ2UuanNvbiI6OCwiLi9DbGllbnRDb250ZXh0Ijo5LCIuL0NvbnN0YW50cyI6MTAsIi4vRGlhbG9ncyI6MTIsIi4vRGlnZXN0QXV0aGVudGljYXRpb24iOjEzLCIuL0V2ZW50RW1pdHRlciI6MTQsIi4vRXhjZXB0aW9ucyI6MTUsIi4vR3JhbW1hciI6MTYsIi4vSGFja3MiOjE4LCIuL0xvZ2dlckZhY3RvcnkiOjE5LCIuL01lZGlhSGFuZGxlciI6MjAsIi4vTmFtZUFkZHJIZWFkZXIiOjIxLCIuL1BhcnNlciI6MjIsIi4vUmVnaXN0ZXJDb250ZXh0IjoyMywiLi9SZXF1ZXN0U2VuZGVyIjoyNCwiLi9TSVBNZXNzYWdlIjoyNiwiLi9TYW5pdHlDaGVjayI6MjcsIi4vU2VydmVyQ29udGV4dCI6MjgsIi4vU2Vzc2lvbiI6MjksIi4vU3Vic2NyaXB0aW9uIjozMSwiLi9UaW1lcnMiOjMyLCIuL1RyYW5zYWN0aW9ucyI6MzMsIi4vVUEiOjM1LCIuL1VSSSI6MzYsIi4vVXRpbHMiOjM3LCIuL1dlYlJUQyI6Mzh9XSwyNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgU0lQIE1lc3NhZ2UKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyCiAgT3V0Z29pbmdSZXF1ZXN0LAogIEluY29taW5nTWVzc2FnZSwKICBJbmNvbWluZ1JlcXVlc3QsCiAgSW5jb21pbmdSZXNwb25zZTsKCmZ1bmN0aW9uIGdldFN1cHBvcnRlZEhlYWRlciAocmVxdWVzdCkgewogIHZhciBhbGxvd1VucmVnaXN0ZXJlZCA9IHJlcXVlc3QudWEuY29uZmlndXJhdGlvbi5oYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzOwogIHZhciBvcHRpb25UYWdzID0gW107CiAgdmFyIG9wdGlvblRhZ1NldCA9IHt9OwoKICBpZiAocmVxdWVzdC5tZXRob2QgPT09IFNJUC5DLlJFR0lTVEVSKSB7CiAgICBvcHRpb25UYWdzLnB1c2goJ3BhdGgnLCAnZ3J1dScpOwogIH0gZWxzZSBpZiAocmVxdWVzdC5tZXRob2QgPT09IFNJUC5DLklOVklURSAmJgogICAgICAgICAgICAgKHJlcXVlc3QudWEuY29udGFjdC5wdWJfZ3J1dSB8fCByZXF1ZXN0LnVhLmNvbnRhY3QudGVtcF9ncnV1KSkgewogICAgb3B0aW9uVGFncy5wdXNoKCdncnV1Jyk7CiAgfQoKICBpZiAocmVxdWVzdC51YS5jb25maWd1cmF0aW9uLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlNVUFBPUlRFRCkgewogICAgb3B0aW9uVGFncy5wdXNoKCcxMDByZWwnKTsKICB9CiAgaWYgKHJlcXVlc3QudWEuY29uZmlndXJhdGlvbi5yZXBsYWNlcyA9PT0gU0lQLkMuc3VwcG9ydGVkLlNVUFBPUlRFRCkgewogICAgb3B0aW9uVGFncy5wdXNoKCdyZXBsYWNlcycpOwogIH0KCiAgb3B0aW9uVGFncy5wdXNoKCdvdXRib3VuZCcpOwoKICBvcHRpb25UYWdzID0gb3B0aW9uVGFncy5jb25jYXQocmVxdWVzdC51YS5jb25maWd1cmF0aW9uLmV4dHJhU3VwcG9ydGVkKTsKCiAgb3B0aW9uVGFncyA9IG9wdGlvblRhZ3MuZmlsdGVyKGZ1bmN0aW9uKG9wdGlvblRhZykgewogICAgdmFyIHJlZ2lzdGVyZWQgPSBTSVAuQy5PUFRJT05fVEFHU1tvcHRpb25UYWddOwogICAgdmFyIHVuaXF1ZSA9ICFvcHRpb25UYWdTZXRbb3B0aW9uVGFnXTsKICAgIG9wdGlvblRhZ1NldFtvcHRpb25UYWddID0gdHJ1ZTsKICAgIHJldHVybiAocmVnaXN0ZXJlZCB8fCBhbGxvd1VucmVnaXN0ZXJlZCkgJiYgdW5pcXVlOwogIH0pOwoKICByZXR1cm4gJ1N1cHBvcnRlZDogJyArIG9wdGlvblRhZ3Muam9pbignLCAnKSArICdcclxuJzsKfQoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICogQGNsYXNzIENsYXNzIGZvciBvdXRnb2luZyBTSVAgcmVxdWVzdC4KICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCByZXF1ZXN0IG1ldGhvZAogKiBAcGFyYW0ge1N0cmluZ30gcnVyaSByZXF1ZXN0IHVyaQogKiBAcGFyYW0ge1NJUC5VQX0gdWEKICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyBwYXJhbWV0ZXJzIHRoYXQgd2lsbCBoYXZlIHByaW9yaXR5IG92ZXIgdWEuY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzOgogKiA8YnI+CiAqICAtIGNzZXEsIGNhbGxfaWQsIGZyb21fdGFnLCBmcm9tX3VyaSwgZnJvbV9kaXNwbGF5TmFtZSwgdG9fdXJpLCB0b190YWcsIHJvdXRlX3NldAogKiBAcGFyYW0ge09iamVjdH0gW2hlYWRlcnNdIGV4dHJhIGhlYWRlcnMKICogQHBhcmFtIHtTdHJpbmd9IFtib2R5XQogKi8KT3V0Z29pbmdSZXF1ZXN0ID0gZnVuY3Rpb24obWV0aG9kLCBydXJpLCB1YSwgcGFyYW1zLCBleHRyYUhlYWRlcnMsIGJvZHkpIHsKICB2YXIKICAgIHRvLAogICAgZnJvbSwKICAgIGNhbGxfaWQsCiAgICBjc2VxLAogICAgdG9fdXJpLAogICAgZnJvbV91cmk7CgogIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTsKCiAgLy8gTWFuZGF0b3J5IHBhcmFtZXRlcnMgY2hlY2sKICBpZighbWV0aG9kIHx8ICFydXJpIHx8ICF1YSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNpcG1lc3NhZ2UnKTsKICB0aGlzLnVhID0gdWE7CiAgdGhpcy5oZWFkZXJzID0ge307CiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7CiAgdGhpcy5ydXJpID0gcnVyaTsKICB0aGlzLmJvZHkgPSBib2R5OwogIHRoaXMuZXh0cmFIZWFkZXJzID0gKGV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKICB0aGlzLnN0YXR1c0NvZGUgPSBwYXJhbXMuc3RhdHVzX2NvZGU7CiAgdGhpcy5yZWFzb25QaHJhc2UgPSBwYXJhbXMucmVhc29uX3BocmFzZTsKCiAgLy8gRmlsbCB0aGUgQ29tbW9uIFNJUCBSZXF1ZXN0IEhlYWRlcnMKCiAgLy8gUm91dGUKICBpZiAocGFyYW1zLnJvdXRlX3NldCkgewogICAgdGhpcy5zZXRIZWFkZXIoJ3JvdXRlJywgcGFyYW1zLnJvdXRlX3NldCk7CiAgfSBlbHNlIGlmICh1YS5jb25maWd1cmF0aW9uLnVzZVByZWxvYWRlZFJvdXRlKXsKICAgIHRoaXMuc2V0SGVhZGVyKCdyb3V0ZScsIHVhLnRyYW5zcG9ydC5zZXJ2ZXIuc2lwX3VyaSk7CiAgfQoKICAvLyBWaWEKICAvLyBFbXB0eSBWaWEgaGVhZGVyLiBXaWxsIGJlIGZpbGxlZCBieSB0aGUgY2xpZW50IHRyYW5zYWN0aW9uLgogIHRoaXMuc2V0SGVhZGVyKCd2aWEnLCAnJyk7CgogIC8vIE1heC1Gb3J3YXJkcwogIHRoaXMuc2V0SGVhZGVyKCdtYXgtZm9yd2FyZHMnLCBTSVAuVUEuQy5NQVhfRk9SV0FSRFMpOwoKICAvLyBUbwogIHRvX3VyaSA9IHBhcmFtcy50b191cmkgfHwgcnVyaTsKICB0byA9IChwYXJhbXMudG9fZGlzcGxheU5hbWUgfHwgcGFyYW1zLnRvX2Rpc3BsYXlOYW1lID09PSAwKSA/ICciJyArIHBhcmFtcy50b19kaXNwbGF5TmFtZSArICciICcgOiAnJzsKICB0byArPSAnPCcgKyAodG9fdXJpICYmIHRvX3VyaS50b1JhdyA/IHRvX3VyaS50b1JhdygpIDogdG9fdXJpKSArICc+JzsKICB0byArPSBwYXJhbXMudG9fdGFnID8gJzt0YWc9JyArIHBhcmFtcy50b190YWcgOiAnJzsKICB0aGlzLnRvID0gbmV3IFNJUC5OYW1lQWRkckhlYWRlci5wYXJzZSh0byk7CiAgdGhpcy5zZXRIZWFkZXIoJ3RvJywgdG8pOwoKICAvLyBGcm9tCiAgZnJvbV91cmkgPSBwYXJhbXMuZnJvbV91cmkgfHwgdWEuY29uZmlndXJhdGlvbi51cmk7CiAgaWYgKHBhcmFtcy5mcm9tX2Rpc3BsYXlOYW1lIHx8IHBhcmFtcy5mcm9tX2Rpc3BsYXlOYW1lID09PSAwKSB7CiAgICBmcm9tID0gJyInICsgcGFyYW1zLmZyb21fZGlzcGxheU5hbWUgKyAnIiAnOwogIH0gZWxzZSBpZiAodWEuY29uZmlndXJhdGlvbi5kaXNwbGF5TmFtZSkgewogICAgZnJvbSA9ICciJyArIHVhLmNvbmZpZ3VyYXRpb24uZGlzcGxheU5hbWUgKyAnIiAnOwogIH0gZWxzZSB7CiAgICBmcm9tID0gJyc7CiAgfQogIGZyb20gKz0gJzwnICsgKGZyb21fdXJpICYmIGZyb21fdXJpLnRvUmF3ID8gZnJvbV91cmkudG9SYXcoKSA6IGZyb21fdXJpKSArICc+O3RhZz0nOwogIGZyb20gKz0gcGFyYW1zLmZyb21fdGFnIHx8IFNJUC5VdGlscy5uZXdUYWcoKTsKICB0aGlzLmZyb20gPSBuZXcgU0lQLk5hbWVBZGRySGVhZGVyLnBhcnNlKGZyb20pOwogIHRoaXMuc2V0SGVhZGVyKCdmcm9tJywgZnJvbSk7CgogIC8vIENhbGwtSUQKICBjYWxsX2lkID0gcGFyYW1zLmNhbGxfaWQgfHwgKHVhLmNvbmZpZ3VyYXRpb24uc2lwanNJZCArIFNJUC5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbigxNSkpOwogIHRoaXMuY2FsbF9pZCA9IGNhbGxfaWQ7CiAgdGhpcy5zZXRIZWFkZXIoJ2NhbGwtaWQnLCBjYWxsX2lkKTsKCiAgLy8gQ1NlcQogIGNzZXEgPSBwYXJhbXMuY3NlcSB8fCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCk7CiAgdGhpcy5jc2VxID0gY3NlcTsKICB0aGlzLnNldEhlYWRlcignY3NlcScsIGNzZXEgKyAnICcgKyBtZXRob2QpOwp9OwoKT3V0Z29pbmdSZXF1ZXN0LnByb3RvdHlwZSA9IHsKICAvKioKICAgKiBSZXBsYWNlIHRoZSB0aGUgZ2l2ZW4gaGVhZGVyIGJ5IHRoZSBnaXZlbiB2YWx1ZS4KICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHZhbHVlIGhlYWRlciB2YWx1ZQogICAqLwogIHNldEhlYWRlcjogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgIHRoaXMuaGVhZGVyc1tTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpXSA9ICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSA/IHZhbHVlIDogW3ZhbHVlXTsKICB9LAoKICAvKioKICAgKiBHZXQgdGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBoZWFkZXIgbmFtZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7U3RyaW5nfHVuZGVmaW5lZH0gUmV0dXJucyB0aGUgc3BlY2lmaWVkIGhlYWRlciwgdW5kZWZpbmVkIGlmIGhlYWRlciBkb2Vzbid0IGV4aXN0LgogICAqLwogIGdldEhlYWRlcjogZnVuY3Rpb24obmFtZSkgewogICAgdmFyIHJlZ2V4cCwgaWR4LAogICAgICBsZW5ndGggPSB0aGlzLmV4dHJhSGVhZGVycy5sZW5ndGgsCiAgICAgIGhlYWRlciA9IHRoaXMuaGVhZGVyc1tTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpXTsKCiAgICBpZihoZWFkZXIpIHsKICAgICAgaWYoaGVhZGVyWzBdKSB7CiAgICAgICAgcmV0dXJuIGhlYWRlclswXTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmVnZXhwID0gbmV3IFJlZ0V4cCgnXlxccyonICsgbmFtZSArICdcXHMqOicsJ2knKTsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaGVhZGVyID0gdGhpcy5leHRyYUhlYWRlcnNbaWR4XTsKICAgICAgICBpZiAocmVnZXhwLnRlc3QoaGVhZGVyKSkgewogICAgICAgICAgcmV0dXJuIGhlYWRlci5zdWJzdHJpbmcoaGVhZGVyLmluZGV4T2YoJzonKSsxKS50cmltKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuOwogIH0sCgogIC8qKgogICAqIEdldCB0aGUgaGVhZGVyL3Mgb2YgdGhlIGdpdmVuIG5hbWUuCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IHdpdGggYWxsIHRoZSBoZWFkZXJzIG9mIHRoZSBzcGVjaWZpZWQgbmFtZS4KICAgKi8KICBnZXRIZWFkZXJzOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgaWR4LCBsZW5ndGgsIHJlZ2V4cCwKICAgICAgaGVhZGVyID0gdGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldLAogICAgICByZXN1bHQgPSBbXTsKCiAgICBpZihoZWFkZXIpIHsKICAgICAgbGVuZ3RoID0gaGVhZGVyLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgcmVzdWx0LnB1c2goaGVhZGVyW2lkeF0pOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9IGVsc2UgewogICAgICBsZW5ndGggPSB0aGlzLmV4dHJhSGVhZGVycy5sZW5ndGg7CiAgICAgIHJlZ2V4cCA9IG5ldyBSZWdFeHAoJ15cXHMqJyArIG5hbWUgKyAnXFxzKjonLCdpJyk7CiAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICAgIGhlYWRlciA9IHRoaXMuZXh0cmFIZWFkZXJzW2lkeF07CiAgICAgICAgaWYgKHJlZ2V4cC50ZXN0KGhlYWRlcikpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGhlYWRlci5zdWJzdHJpbmcoaGVhZGVyLmluZGV4T2YoJzonKSsxKS50cmltKCkpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sCgogIC8qKgogICAqIFZlcmlmeSB0aGUgZXhpc3RlbmNlIG9mIHRoZSBnaXZlbiBoZWFkZXIuCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBoZWFkZXIgd2l0aCBnaXZlbiBuYW1lIGV4aXN0cywgZmFsc2Ugb3RoZXJ3aXNlCiAgICovCiAgaGFzSGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgcmVnZXhwLCBpZHgsCiAgICAgIGxlbmd0aCA9IHRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aDsKCiAgICBpZiAodGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgcmVnZXhwID0gbmV3IFJlZ0V4cCgnXlxccyonICsgbmFtZSArICdcXHMqOicsJ2knKTsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaWYgKHJlZ2V4cC50ZXN0KHRoaXMuZXh0cmFIZWFkZXJzW2lkeF0pKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgdmFyIG1zZyA9ICcnLCBoZWFkZXIsIGxlbmd0aCwgaWR4OwoKICAgIG1zZyArPSB0aGlzLm1ldGhvZCArICcgJyArICh0aGlzLnJ1cmkudG9SYXcgPyB0aGlzLnJ1cmkudG9SYXcoKSA6IHRoaXMucnVyaSkgKyAnIFNJUC8yLjBcclxuJzsKCiAgICBmb3IgKGhlYWRlciBpbiB0aGlzLmhlYWRlcnMpIHsKICAgICAgbGVuZ3RoID0gdGhpcy5oZWFkZXJzW2hlYWRlcl0ubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBtc2cgKz0gaGVhZGVyICsgJzogJyArIHRoaXMuaGVhZGVyc1toZWFkZXJdW2lkeF0gKyAnXHJcbic7CiAgICAgIH0KICAgIH0KCiAgICBsZW5ndGggPSB0aGlzLmV4dHJhSGVhZGVycy5sZW5ndGg7CiAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgbXNnICs9IHRoaXMuZXh0cmFIZWFkZXJzW2lkeF0udHJpbSgpICsnXHJcbic7CiAgICB9CgogICAgbXNnICs9IGdldFN1cHBvcnRlZEhlYWRlcih0aGlzKTsKICAgIG1zZyArPSAnVXNlci1BZ2VudDogJyArIHRoaXMudWEuY29uZmlndXJhdGlvbi51c2VyQWdlbnRTdHJpbmcgKydcclxuJzsKCiAgICBpZih0aGlzLmJvZHkpIHsKICAgICAgbGVuZ3RoID0gU0lQLlV0aWxzLnN0cl91dGY4X2xlbmd0aCh0aGlzLmJvZHkpOwogICAgICBtc2cgKz0gJ0NvbnRlbnQtTGVuZ3RoOiAnICsgbGVuZ3RoICsgJ1xyXG5cclxuJzsKICAgICAgbXNnICs9IHRoaXMuYm9keTsKICAgIH0gZWxzZSB7CiAgICAgIG1zZyArPSAnQ29udGVudC1MZW5ndGg6IDBcclxuXHJcbic7CiAgICB9CgogICAgcmV0dXJuIG1zZzsKICB9Cn07CgovKioKICogQGF1Z21lbnRzIFNJUAogKiBAY2xhc3MgQ2xhc3MgZm9yIGluY29taW5nIFNJUCBtZXNzYWdlLgogKi8KSW5jb21pbmdNZXNzYWdlID0gZnVuY3Rpb24oKXsKICB0aGlzLmRhdGEgPSBudWxsOwogIHRoaXMuaGVhZGVycyA9IG51bGw7CiAgdGhpcy5tZXRob2QgPSAgbnVsbDsKICB0aGlzLnZpYSA9IG51bGw7CiAgdGhpcy52aWFfYnJhbmNoID0gbnVsbDsKICB0aGlzLmNhbGxfaWQgPSBudWxsOwogIHRoaXMuY3NlcSA9IG51bGw7CiAgdGhpcy5mcm9tID0gbnVsbDsKICB0aGlzLmZyb21fdGFnID0gbnVsbDsKICB0aGlzLnRvID0gbnVsbDsKICB0aGlzLnRvX3RhZyA9IG51bGw7CiAgdGhpcy5ib2R5ID0gbnVsbDsKfTsKCkluY29taW5nTWVzc2FnZS5wcm90b3R5cGUgPSB7CiAgLyoqCiAgKiBJbnNlcnQgYSBoZWFkZXIgb2YgdGhlIGdpdmVuIG5hbWUgYW5kIHZhbHVlIGludG8gdGhlIGxhc3QgcG9zaXRpb24gb2YgdGhlCiAgKiBoZWFkZXIgYXJyYXkuCiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIGhlYWRlciB2YWx1ZQogICovCiAgYWRkSGVhZGVyOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgdmFyIGhlYWRlciA9IHsgcmF3OiB2YWx1ZSB9OwoKICAgIG5hbWUgPSBTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpOwoKICAgIGlmKHRoaXMuaGVhZGVyc1tuYW1lXSkgewogICAgICB0aGlzLmhlYWRlcnNbbmFtZV0ucHVzaChoZWFkZXIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5oZWFkZXJzW25hbWVdID0gW2hlYWRlcl07CiAgICB9CiAgfSwKCiAgLyoqCiAgICogR2V0IHRoZSB2YWx1ZSBvZiB0aGUgZ2l2ZW4gaGVhZGVyIG5hbWUgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLgogICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIGhlYWRlciBuYW1lCiAgICogQHJldHVybnMge1N0cmluZ3x1bmRlZmluZWR9IFJldHVybnMgdGhlIHNwZWNpZmllZCBoZWFkZXIsIG51bGwgaWYgaGVhZGVyIGRvZXNuJ3QgZXhpc3QuCiAgICovCiAgZ2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgaGVhZGVyID0gdGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldOwoKICAgIGlmKGhlYWRlcikgewogICAgICBpZihoZWFkZXJbMF0pIHsKICAgICAgICByZXR1cm4gaGVhZGVyWzBdLnJhdzsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0sCgogIC8qKgogICAqIEdldCB0aGUgaGVhZGVyL3Mgb2YgdGhlIGdpdmVuIG5hbWUuCiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgaGVhZGVyIG5hbWUKICAgKiBAcmV0dXJucyB7QXJyYXl9IEFycmF5IHdpdGggYWxsIHRoZSBoZWFkZXJzIG9mIHRoZSBzcGVjaWZpZWQgbmFtZS4KICAgKi8KICBnZXRIZWFkZXJzOiBmdW5jdGlvbihuYW1lKSB7CiAgICB2YXIgaWR4LCBsZW5ndGgsCiAgICAgIGhlYWRlciA9IHRoaXMuaGVhZGVyc1tTSVAuVXRpbHMuaGVhZGVyaXplKG5hbWUpXSwKICAgICAgcmVzdWx0ID0gW107CgogICAgaWYoIWhlYWRlcikgewogICAgICByZXR1cm4gW107CiAgICB9CgogICAgbGVuZ3RoID0gaGVhZGVyLmxlbmd0aDsKICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICByZXN1bHQucHVzaChoZWFkZXJbaWR4XS5yYXcpOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfSwKCiAgLyoqCiAgICogVmVyaWZ5IHRoZSBleGlzdGVuY2Ugb2YgdGhlIGdpdmVuIGhlYWRlci4KICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGhlYWRlciB3aXRoIGdpdmVuIG5hbWUgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2UKICAgKi8KICBoYXNIZWFkZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHJldHVybih0aGlzLmhlYWRlcnNbU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKV0pID8gdHJ1ZSA6IGZhbHNlOwogIH0sCgogIC8qKgogICogUGFyc2UgdGhlIGdpdmVuIGhlYWRlciBvbiB0aGUgZ2l2ZW4gaW5kZXguCiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICogQHBhcmFtIHtOdW1iZXJ9IFtpZHg9MF0gaGVhZGVyIGluZGV4CiAgKiBAcmV0dXJucyB7T2JqZWN0fHVuZGVmaW5lZH0gUGFyc2VkIGhlYWRlciBvYmplY3QsIHVuZGVmaW5lZCBpZiB0aGUgaGVhZGVyIGlzIG5vdCBwcmVzZW50IG9yIGluIGNhc2Ugb2YgYSBwYXJzaW5nIGVycm9yLgogICovCiAgcGFyc2VIZWFkZXI6IGZ1bmN0aW9uKG5hbWUsIGlkeCkgewogICAgdmFyIGhlYWRlciwgdmFsdWUsIHBhcnNlZDsKCiAgICBuYW1lID0gU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKTsKCiAgICBpZHggPSBpZHggfHwgMDsKCiAgICBpZighdGhpcy5oZWFkZXJzW25hbWVdKSB7CiAgICAgIHRoaXMubG9nZ2VyLmxvZygnaGVhZGVyICInICsgbmFtZSArICciIG5vdCBwcmVzZW50Jyk7CiAgICAgIHJldHVybjsKICAgIH0gZWxzZSBpZihpZHggPj0gdGhpcy5oZWFkZXJzW25hbWVdLmxlbmd0aCkgewogICAgICB0aGlzLmxvZ2dlci5sb2coJ25vdCBzbyBtYW55ICInICsgbmFtZSArICciIGhlYWRlcnMgcHJlc2VudCcpOwogICAgICByZXR1cm47CiAgICB9CgogICAgaGVhZGVyID0gdGhpcy5oZWFkZXJzW25hbWVdW2lkeF07CiAgICB2YWx1ZSA9IGhlYWRlci5yYXc7CgogICAgaWYoaGVhZGVyLnBhcnNlZCkgewogICAgICByZXR1cm4gaGVhZGVyLnBhcnNlZDsKICAgIH0KCiAgICAvL3N1YnN0aXR1dGUgJy0nIGJ5ICdfJyBmb3IgZ3JhbW1hciBydWxlIG1hdGNoaW5nLgogICAgcGFyc2VkID0gU0lQLkdyYW1tYXIucGFyc2UodmFsdWUsIG5hbWUucmVwbGFjZSgvLS9nLCAnXycpKTsKCiAgICBpZihwYXJzZWQgPT09IC0xKSB7CiAgICAgIHRoaXMuaGVhZGVyc1tuYW1lXS5zcGxpY2UoaWR4LCAxKTsgLy9kZWxldGUgZnJvbSBoZWFkZXJzCiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2Vycm9yIHBhcnNpbmcgIicgKyBuYW1lICsgJyIgaGVhZGVyIGZpZWxkIHdpdGggdmFsdWUgIicgKyB2YWx1ZSArICciJyk7CiAgICAgIHJldHVybjsKICAgIH0gZWxzZSB7CiAgICAgIGhlYWRlci5wYXJzZWQgPSBwYXJzZWQ7CiAgICAgIHJldHVybiBwYXJzZWQ7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogTWVzc2FnZSBIZWFkZXIgYXR0cmlidXRlIHNlbGVjdG9yLiBBbGlhcyBvZiBwYXJzZUhlYWRlci4KICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICAqIEBwYXJhbSB7TnVtYmVyfSBbaWR4PTBdIGhlYWRlciBpbmRleAogICAqIEByZXR1cm5zIHtPYmplY3R8dW5kZWZpbmVkfSBQYXJzZWQgaGVhZGVyIG9iamVjdCwgdW5kZWZpbmVkIGlmIHRoZSBoZWFkZXIgaXMgbm90IHByZXNlbnQgb3IgaW4gY2FzZSBvZiBhIHBhcnNpbmcgZXJyb3IuCiAgICoKICAgKiBAZXhhbXBsZQogICAqIG1lc3NhZ2UucygndmlhJywzKS5wb3J0CiAgICovCiAgczogZnVuY3Rpb24obmFtZSwgaWR4KSB7CiAgICByZXR1cm4gdGhpcy5wYXJzZUhlYWRlcihuYW1lLCBpZHgpOwogIH0sCgogIC8qKgogICogUmVwbGFjZSB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGhlYWRlciBieSB0aGUgdmFsdWUuCiAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBoZWFkZXIgbmFtZQogICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIGhlYWRlciB2YWx1ZQogICovCiAgc2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgdmFyIGhlYWRlciA9IHsgcmF3OiB2YWx1ZSB9OwogICAgdGhpcy5oZWFkZXJzW1NJUC5VdGlscy5oZWFkZXJpemUobmFtZSldID0gW2hlYWRlcl07CiAgfSwKCiAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuZGF0YTsKICB9Cn07CgovKioKICogQGF1Z21lbnRzIEluY29taW5nTWVzc2FnZQogKiBAY2xhc3MgQ2xhc3MgZm9yIGluY29taW5nIFNJUCByZXF1ZXN0LgogKi8KSW5jb21pbmdSZXF1ZXN0ID0gZnVuY3Rpb24odWEpIHsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNpcG1lc3NhZ2UnKTsKICB0aGlzLnVhID0gdWE7CiAgdGhpcy5oZWFkZXJzID0ge307CiAgdGhpcy5ydXJpID0gbnVsbDsKICB0aGlzLnRyYW5zcG9ydCA9IG51bGw7CiAgdGhpcy5zZXJ2ZXJfdHJhbnNhY3Rpb24gPSBudWxsOwp9OwpJbmNvbWluZ1JlcXVlc3QucHJvdG90eXBlID0gbmV3IEluY29taW5nTWVzc2FnZSgpOwoKLyoqCiogU3RhdGVmdWwgcmVwbHkuCiogQHBhcmFtIHtOdW1iZXJ9IGNvZGUgc3RhdHVzIGNvZGUKKiBAcGFyYW0ge1N0cmluZ30gcmVhc29uIHJlYXNvbiBwaHJhc2UKKiBAcGFyYW0ge09iamVjdH0gaGVhZGVycyBleHRyYSBoZWFkZXJzCiogQHBhcmFtIHtTdHJpbmd9IGJvZHkgYm9keQoqIEBwYXJhbSB7RnVuY3Rpb259IFtvblN1Y2Nlc3NdIG9uU3VjY2VzcyBjYWxsYmFjawoqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkZhaWx1cmVdIG9uRmFpbHVyZSBjYWxsYmFjawoqLwpJbmNvbWluZ1JlcXVlc3QucHJvdG90eXBlLnJlcGx5ID0gZnVuY3Rpb24oY29kZSwgcmVhc29uLCBleHRyYUhlYWRlcnMsIGJvZHksIG9uU3VjY2Vzcywgb25GYWlsdXJlKSB7CiAgdmFyIHJyLCB2aWFzLCBsZW5ndGgsIGlkeCwgcmVzcG9uc2UsCiAgICB0byA9IHRoaXMuZ2V0SGVhZGVyKCdUbycpLAogICAgciA9IDAsCiAgICB2ID0gMDsKCiAgcmVzcG9uc2UgPSBTSVAuVXRpbHMuYnVpbGRTdGF0dXNMaW5lKGNvZGUsIHJlYXNvbik7CiAgZXh0cmFIZWFkZXJzID0gKGV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKTsKCiAgaWYodGhpcy5tZXRob2QgPT09IFNJUC5DLklOVklURSAmJiBjb2RlID4gMTAwICYmIGNvZGUgPD0gMjAwKSB7CiAgICByciA9IHRoaXMuZ2V0SGVhZGVycygncmVjb3JkLXJvdXRlJyk7CiAgICBsZW5ndGggPSByci5sZW5ndGg7CgogICAgZm9yKHI7IHIgPCBsZW5ndGg7IHIrKykgewogICAgICByZXNwb25zZSArPSAnUmVjb3JkLVJvdXRlOiAnICsgcnJbcl0gKyAnXHJcbic7CiAgICB9CiAgfQoKICB2aWFzID0gdGhpcy5nZXRIZWFkZXJzKCd2aWEnKTsKICBsZW5ndGggPSB2aWFzLmxlbmd0aDsKCiAgZm9yKHY7IHYgPCBsZW5ndGg7IHYrKykgewogICAgcmVzcG9uc2UgKz0gJ1ZpYTogJyArIHZpYXNbdl0gKyAnXHJcbic7CiAgfQoKICBpZighdGhpcy50b190YWcgJiYgY29kZSA+IDEwMCkgewogICAgdG8gKz0gJzt0YWc9JyArIFNJUC5VdGlscy5uZXdUYWcoKTsKICB9IGVsc2UgaWYodGhpcy50b190YWcgJiYgIXRoaXMucygndG8nKS5oYXNQYXJhbSgndGFnJykpIHsKICAgIHRvICs9ICc7dGFnPScgKyB0aGlzLnRvX3RhZzsKICB9CgogIHJlc3BvbnNlICs9ICdUbzogJyArIHRvICsgJ1xyXG4nOwogIHJlc3BvbnNlICs9ICdGcm9tOiAnICsgdGhpcy5nZXRIZWFkZXIoJ0Zyb20nKSArICdcclxuJzsKICByZXNwb25zZSArPSAnQ2FsbC1JRDogJyArIHRoaXMuY2FsbF9pZCArICdcclxuJzsKICByZXNwb25zZSArPSAnQ1NlcTogJyArIHRoaXMuY3NlcSArICcgJyArIHRoaXMubWV0aG9kICsgJ1xyXG4nOwoKICBsZW5ndGggPSBleHRyYUhlYWRlcnMubGVuZ3RoOwogIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgcmVzcG9uc2UgKz0gZXh0cmFIZWFkZXJzW2lkeF0udHJpbSgpICsnXHJcbic7CiAgfQoKICByZXNwb25zZSArPSBnZXRTdXBwb3J0ZWRIZWFkZXIodGhpcyk7CiAgcmVzcG9uc2UgKz0gJ1VzZXItQWdlbnQ6ICcgKyB0aGlzLnVhLmNvbmZpZ3VyYXRpb24udXNlckFnZW50U3RyaW5nICsnXHJcbic7CgogIGlmKGJvZHkpIHsKICAgIGxlbmd0aCA9IFNJUC5VdGlscy5zdHJfdXRmOF9sZW5ndGgoYm9keSk7CiAgICByZXNwb25zZSArPSAnQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHBcclxuJzsKICAgIHJlc3BvbnNlICs9ICdDb250ZW50LUxlbmd0aDogJyArIGxlbmd0aCArICdcclxuXHJcbic7CiAgICByZXNwb25zZSArPSBib2R5OwogIH0gZWxzZSB7CiAgICByZXNwb25zZSArPSAnQ29udGVudC1MZW5ndGg6ICcgKyAwICsgJ1xyXG5cclxuJzsKICB9CgogIHRoaXMuc2VydmVyX3RyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShjb2RlLCByZXNwb25zZSkudGhlbihvblN1Y2Nlc3MsIG9uRmFpbHVyZSk7CgogIHJldHVybiByZXNwb25zZTsKfTsKCi8qKgoqIFN0YXRlbGVzcyByZXBseS4KKiBAcGFyYW0ge051bWJlcn0gY29kZSBzdGF0dXMgY29kZQoqIEBwYXJhbSB7U3RyaW5nfSByZWFzb24gcmVhc29uIHBocmFzZQoqLwpJbmNvbWluZ1JlcXVlc3QucHJvdG90eXBlLnJlcGx5X3NsID0gZnVuY3Rpb24oY29kZSwgcmVhc29uKSB7CiAgdmFyIHRvLCByZXNwb25zZSwKICAgIHYgPSAwLAogICAgdmlhcyA9IHRoaXMuZ2V0SGVhZGVycygndmlhJyksCiAgICBsZW5ndGggPSB2aWFzLmxlbmd0aDsKCiAgcmVzcG9uc2UgPSBTSVAuVXRpbHMuYnVpbGRTdGF0dXNMaW5lKGNvZGUsIHJlYXNvbik7CgogIGZvcih2OyB2IDwgbGVuZ3RoOyB2KyspIHsKICAgIHJlc3BvbnNlICs9ICdWaWE6ICcgKyB2aWFzW3ZdICsgJ1xyXG4nOwogIH0KCiAgdG8gPSB0aGlzLmdldEhlYWRlcignVG8nKTsKCiAgaWYoIXRoaXMudG9fdGFnICYmIGNvZGUgPiAxMDApIHsKICAgIHRvICs9ICc7dGFnPScgKyBTSVAuVXRpbHMubmV3VGFnKCk7CiAgfSBlbHNlIGlmKHRoaXMudG9fdGFnICYmICF0aGlzLnMoJ3RvJykuaGFzUGFyYW0oJ3RhZycpKSB7CiAgICB0byArPSAnO3RhZz0nICsgdGhpcy50b190YWc7CiAgfQoKICByZXNwb25zZSArPSAnVG86ICcgKyB0byArICdcclxuJzsKICByZXNwb25zZSArPSAnRnJvbTogJyArIHRoaXMuZ2V0SGVhZGVyKCdGcm9tJykgKyAnXHJcbic7CiAgcmVzcG9uc2UgKz0gJ0NhbGwtSUQ6ICcgKyB0aGlzLmNhbGxfaWQgKyAnXHJcbic7CiAgcmVzcG9uc2UgKz0gJ0NTZXE6ICcgKyB0aGlzLmNzZXEgKyAnICcgKyB0aGlzLm1ldGhvZCArICdcclxuJzsKICByZXNwb25zZSArPSAnVXNlci1BZ2VudDogJyArIHRoaXMudWEuY29uZmlndXJhdGlvbi51c2VyQWdlbnRTdHJpbmcgKydcclxuJzsKICByZXNwb25zZSArPSAnQ29udGVudC1MZW5ndGg6ICcgKyAwICsgJ1xyXG5cclxuJzsKCiAgdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSk7Cn07CgoKLyoqCiAqIEBhdWdtZW50cyBJbmNvbWluZ01lc3NhZ2UKICogQGNsYXNzIENsYXNzIGZvciBpbmNvbWluZyBTSVAgcmVzcG9uc2UuCiAqLwpJbmNvbWluZ1Jlc3BvbnNlID0gZnVuY3Rpb24odWEpIHsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNpcG1lc3NhZ2UnKTsKICB0aGlzLmhlYWRlcnMgPSB7fTsKICB0aGlzLnN0YXR1c19jb2RlID0gbnVsbDsKICB0aGlzLnJlYXNvbl9waHJhc2UgPSBudWxsOwp9OwpJbmNvbWluZ1Jlc3BvbnNlLnByb3RvdHlwZSA9IG5ldyBJbmNvbWluZ01lc3NhZ2UoKTsKClNJUC5PdXRnb2luZ1JlcXVlc3QgPSBPdXRnb2luZ1JlcXVlc3Q7ClNJUC5JbmNvbWluZ1JlcXVlc3QgPSBJbmNvbWluZ1JlcXVlc3Q7ClNJUC5JbmNvbWluZ1Jlc3BvbnNlID0gSW5jb21pbmdSZXNwb25zZTsKfTsKCn0se31dLDI3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBJbmNvbWluZyBTSVAgTWVzc2FnZSBTYW5pdHkgQ2hlY2sKICovCgovKioKICogU0lQIG1lc3NhZ2Ugc2FuaXR5IGNoZWNrLgogKiBAYXVnbWVudHMgU0lQCiAqIEBmdW5jdGlvbgogKiBAcGFyYW0ge1NJUC5JbmNvbWluZ01lc3NhZ2V9IG1lc3NhZ2UKICogQHBhcmFtIHtTSVAuVUF9IHVhCiAqIEBwYXJhbSB7U0lQLlRyYW5zcG9ydH0gdHJhbnNwb3J0CiAqIEByZXR1cm5zIHtCb29sZWFufQogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CnZhciBzYW5pdHlDaGVjaywKIGxvZ2dlciwKIG1lc3NhZ2UsIHVhLCB0cmFuc3BvcnQsCiByZXF1ZXN0cyA9IFtdLAogcmVzcG9uc2VzID0gW10sCiBhbGwgPSBbXTsKCi8vIFJlcGx5CmZ1bmN0aW9uIHJlcGx5KHN0YXR1c19jb2RlKSB7CiAgdmFyIHRvLAogICAgcmVzcG9uc2UgPSBTSVAuVXRpbHMuYnVpbGRTdGF0dXNMaW5lKHN0YXR1c19jb2RlKSwKICAgIHZpYXMgPSBtZXNzYWdlLmdldEhlYWRlcnMoJ3ZpYScpLAogICAgbGVuZ3RoID0gdmlhcy5sZW5ndGgsCiAgICBpZHggPSAwOwoKICBmb3IoaWR4OyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICByZXNwb25zZSArPSAiVmlhOiAiICsgdmlhc1tpZHhdICsgIlxyXG4iOwogIH0KCiAgdG8gPSBtZXNzYWdlLmdldEhlYWRlcignVG8nKTsKCiAgaWYoIW1lc3NhZ2UudG9fdGFnKSB7CiAgICB0byArPSAnO3RhZz0nICsgU0lQLlV0aWxzLm5ld1RhZygpOwogIH0KCiAgcmVzcG9uc2UgKz0gIlRvOiAiICsgdG8gKyAiXHJcbiI7CiAgcmVzcG9uc2UgKz0gIkZyb206ICIgKyBtZXNzYWdlLmdldEhlYWRlcignRnJvbScpICsgIlxyXG4iOwogIHJlc3BvbnNlICs9ICJDYWxsLUlEOiAiICsgbWVzc2FnZS5jYWxsX2lkICsgIlxyXG4iOwogIHJlc3BvbnNlICs9ICJDU2VxOiAiICsgbWVzc2FnZS5jc2VxICsgIiAiICsgbWVzc2FnZS5tZXRob2QgKyAiXHJcbiI7CiAgcmVzcG9uc2UgKz0gIlxyXG4iOwoKICB0cmFuc3BvcnQuc2VuZChyZXNwb25zZSk7Cn0KCi8qCiAqIFNhbml0eSBDaGVjayBmb3IgaW5jb21pbmcgTWVzc2FnZXMKICoKICogUmVxdWVzdHM6CiAqICAtIF9yZmMzMjYxXzhfMl8yXzFfIFJlY2VpdmUgYSBSZXF1ZXN0IHdpdGggYSBub24gc3VwcG9ydGVkIFVSSSBzY2hlbWUKICogIC0gX3JmYzMyNjFfMTZfM180XyBSZWNlaXZlIGEgUmVxdWVzdCBhbHJlYWR5IHNlbnQgYnkgdXMKICogICBEb2VzIG5vdCBsb29rIGF0IHZpYSBzZW50LWJ5IGJ1dCBhdCBzaXBqc0lkLCB3aGljaCBpcyBpbnNlcnRlZCBhcwogKiAgIGEgcHJlZml4IGluIGFsbCBpbml0aWFsIHJlcXVlc3RzIGdlbmVyYXRlZCBieSB0aGUgdWEKICogIC0gX3JmYzMyNjFfMThfM19yZXF1ZXN0XyBCb2R5IENvbnRlbnQtTGVuZ3RoCiAqICAtIF9yZmMzMjYxXzhfMl8yXzJfIE1lcmdlZCBSZXF1ZXN0cwogKgogKiBSZXNwb25zZXM6CiAqICAtIF9yZmMzMjYxXzhfMV8zXzNfIE11bHRpcGxlIFZpYSBoZWFkZXJzCiAqICAtIF9yZmMzMjYxXzE4XzFfMl8gc2VudC1ieSBtaXNtYXRjaAogKiAgLSBfcmZjMzI2MV8xOF8zX3Jlc3BvbnNlXyBCb2R5IENvbnRlbnQtTGVuZ3RoCiAqCiAqIEFsbDoKICogIC0gTWluaW11bSBoZWFkZXJzIGluIGEgU0lQIG1lc3NhZ2UKICovCgovLyBTYW5pdHkgQ2hlY2sgZnVuY3Rpb25zIGZvciByZXF1ZXN0cwpmdW5jdGlvbiByZmMzMjYxXzhfMl8yXzEoKSB7CiAgaWYoIW1lc3NhZ2UucnVyaSB8fCBtZXNzYWdlLnJ1cmkuc2NoZW1lICE9PSAnc2lwJykgewogICAgcmVwbHkoNDE2KTsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMTZfM180KCkgewogIGlmKCFtZXNzYWdlLnRvX3RhZykgewogICAgaWYobWVzc2FnZS5jYWxsX2lkLnN1YnN0cigwLCA1KSA9PT0gdWEuY29uZmlndXJhdGlvbi5zaXBqc0lkKSB7CiAgICAgIHJlcGx5KDQ4Mik7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMThfM19yZXF1ZXN0KCkgewogIHZhciBsZW4gPSBTSVAuVXRpbHMuc3RyX3V0ZjhfbGVuZ3RoKG1lc3NhZ2UuYm9keSksCiAgY29udGVudExlbmd0aCA9IG1lc3NhZ2UuZ2V0SGVhZGVyKCdjb250ZW50LWxlbmd0aCcpOwoKICBpZihsZW4gPCBjb250ZW50TGVuZ3RoKSB7CiAgICByZXBseSg0MDApOwogICAgcmV0dXJuIGZhbHNlOwogIH0KfQoKZnVuY3Rpb24gcmZjMzI2MV84XzJfMl8yKCkgewogIHZhciB0ciwgaWR4LAogICAgZnJvbVRhZyA9IG1lc3NhZ2UuZnJvbV90YWcsCiAgICBjYWxsX2lkID0gbWVzc2FnZS5jYWxsX2lkLAogICAgY3NlcSA9IG1lc3NhZ2UuY3NlcTsKCiAgaWYoIW1lc3NhZ2UudG9fdGFnKSB7CiAgICBpZihtZXNzYWdlLm1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFKSB7CiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLmlzdFttZXNzYWdlLnZpYV9icmFuY2hdOwogICAgICBpZih0cikgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb3IoaWR4IGluIHVhLnRyYW5zYWN0aW9ucy5pc3QpIHsKICAgICAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLmlzdFtpZHhdOwogICAgICAgICAgaWYodHIucmVxdWVzdC5mcm9tX3RhZyA9PT0gZnJvbVRhZyAmJiB0ci5yZXF1ZXN0LmNhbGxfaWQgPT09IGNhbGxfaWQgJiYgdHIucmVxdWVzdC5jc2VxID09PSBjc2VxKSB7CiAgICAgICAgICAgIHJlcGx5KDQ4Mik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLm5pc3RbbWVzc2FnZS52aWFfYnJhbmNoXTsKICAgICAgaWYodHIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yKGlkeCBpbiB1YS50cmFuc2FjdGlvbnMubmlzdCkgewogICAgICAgICAgdHIgPSB1YS50cmFuc2FjdGlvbnMubmlzdFtpZHhdOwogICAgICAgICAgaWYodHIucmVxdWVzdC5mcm9tX3RhZyA9PT0gZnJvbVRhZyAmJiB0ci5yZXF1ZXN0LmNhbGxfaWQgPT09IGNhbGxfaWQgJiYgdHIucmVxdWVzdC5jc2VxID09PSBjc2VxKSB7CiAgICAgICAgICAgIHJlcGx5KDQ4Mik7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0KCi8vIFNhbml0eSBDaGVjayBmdW5jdGlvbnMgZm9yIHJlc3BvbnNlcwpmdW5jdGlvbiByZmMzMjYxXzhfMV8zXzMoKSB7CiAgaWYobWVzc2FnZS5nZXRIZWFkZXJzKCd2aWEnKS5sZW5ndGggPiAxKSB7CiAgICBsb2dnZXIud2FybignTW9yZSB0aGFuIG9uZSBWaWEgaGVhZGVyIGZpZWxkIHByZXNlbnQgaW4gdGhlIHJlc3BvbnNlLiBEcm9wcGluZyB0aGUgcmVzcG9uc2UnKTsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMThfMV8yKCkgewogIHZhciB2aWFIb3N0ID0gdWEuY29uZmlndXJhdGlvbi52aWFIb3N0OwogIGlmKG1lc3NhZ2UudmlhLmhvc3QgIT09IHZpYUhvc3QgfHwgbWVzc2FnZS52aWEucG9ydCAhPT0gdW5kZWZpbmVkKSB7CiAgICBsb2dnZXIud2FybignVmlhIHNlbnQtYnkgaW4gdGhlIHJlc3BvbnNlIGRvZXMgbm90IG1hdGNoIFVBIFZpYSBob3N0IHZhbHVlLiBEcm9wcGluZyB0aGUgcmVzcG9uc2UnKTsKICAgIHJldHVybiBmYWxzZTsKICB9Cn0KCmZ1bmN0aW9uIHJmYzMyNjFfMThfM19yZXNwb25zZSgpIHsKICB2YXIKICAgIGxlbiA9IFNJUC5VdGlscy5zdHJfdXRmOF9sZW5ndGgobWVzc2FnZS5ib2R5KSwKICAgIGNvbnRlbnRMZW5ndGggPSBtZXNzYWdlLmdldEhlYWRlcignY29udGVudC1sZW5ndGgnKTsKCiAgICBpZihsZW4gPCBjb250ZW50TGVuZ3RoKSB7CiAgICAgIGxvZ2dlci53YXJuKCdNZXNzYWdlIGJvZHkgbGVuZ3RoIGlzIGxvd2VyIHRoYW4gdGhlIHZhbHVlIGluIENvbnRlbnQtTGVuZ3RoIGhlYWRlciBmaWVsZC4gRHJvcHBpbmcgdGhlIHJlc3BvbnNlJyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQoKLy8gU2FuaXR5IENoZWNrIGZ1bmN0aW9ucyBmb3IgcmVxdWVzdHMgYW5kIHJlc3BvbnNlcwpmdW5jdGlvbiBtaW5pbXVtSGVhZGVycygpIHsKICB2YXIKICAgIG1hbmRhdG9yeUhlYWRlcnMgPSBbJ2Zyb20nLCAndG8nLCAnY2FsbF9pZCcsICdjc2VxJywgJ3ZpYSddLAogICAgaWR4ID0gbWFuZGF0b3J5SGVhZGVycy5sZW5ndGg7CgogIHdoaWxlKGlkeC0tKSB7CiAgICBpZighbWVzc2FnZS5oYXNIZWFkZXIobWFuZGF0b3J5SGVhZGVyc1tpZHhdKSkgewogICAgICBsb2dnZXIud2FybignTWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkIDogJysgbWFuZGF0b3J5SGVhZGVyc1tpZHhdICsnLiBEcm9wcGluZyB0aGUgcmVzcG9uc2UnKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KfQoKcmVxdWVzdHMucHVzaChyZmMzMjYxXzhfMl8yXzEpOwpyZXF1ZXN0cy5wdXNoKHJmYzMyNjFfMTZfM180KTsKcmVxdWVzdHMucHVzaChyZmMzMjYxXzE4XzNfcmVxdWVzdCk7CnJlcXVlc3RzLnB1c2gocmZjMzI2MV84XzJfMl8yKTsKCnJlc3BvbnNlcy5wdXNoKHJmYzMyNjFfOF8xXzNfMyk7CnJlc3BvbnNlcy5wdXNoKHJmYzMyNjFfMThfMV8yKTsKcmVzcG9uc2VzLnB1c2gocmZjMzI2MV8xOF8zX3Jlc3BvbnNlKTsKCmFsbC5wdXNoKG1pbmltdW1IZWFkZXJzKTsKCnNhbml0eUNoZWNrID0gZnVuY3Rpb24obSwgdSwgdCkgewogIHZhciBsZW4sIHBhc3M7CgogIG1lc3NhZ2UgPSBtOwogIHVhID0gdTsKICB0cmFuc3BvcnQgPSB0OwoKICBsb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5zYW5pdHljaGVjaycpOwoKICBsZW4gPSBhbGwubGVuZ3RoOwogIHdoaWxlKGxlbi0tKSB7CiAgICBwYXNzID0gYWxsW2xlbl0obWVzc2FnZSk7CiAgICBpZihwYXNzID09PSBmYWxzZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBpZihtZXNzYWdlIGluc3RhbmNlb2YgU0lQLkluY29taW5nUmVxdWVzdCkgewogICAgbGVuID0gcmVxdWVzdHMubGVuZ3RoOwogICAgd2hpbGUobGVuLS0pIHsKICAgICAgcGFzcyA9IHJlcXVlc3RzW2xlbl0obWVzc2FnZSk7CiAgICAgIGlmKHBhc3MgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfQoKICBlbHNlIGlmKG1lc3NhZ2UgaW5zdGFuY2VvZiBTSVAuSW5jb21pbmdSZXNwb25zZSkgewogICAgbGVuID0gcmVzcG9uc2VzLmxlbmd0aDsKICAgIHdoaWxlKGxlbi0tKSB7CiAgICAgIHBhc3MgPSByZXNwb25zZXNbbGVuXShtZXNzYWdlKTsKICAgICAgaWYocGFzcyA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9CgogIC8vRXZlcnl0aGluZyBpcyBPSwogIHJldHVybiB0cnVlOwp9OwoKU0lQLnNhbml0eUNoZWNrID0gc2FuaXR5Q2hlY2s7Cn07Cgp9LHt9XSwyODpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7CnZhciBTZXJ2ZXJDb250ZXh0OwoKU2VydmVyQ29udGV4dCA9IGZ1bmN0aW9uICh1YSwgcmVxdWVzdCkgewogIHRoaXMudWEgPSB1YTsKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnNlcnZlcmNvbnRleHQnKTsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFKSB7CiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFNJUC5UcmFuc2FjdGlvbnMuSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ocmVxdWVzdCwgdWEpOwogIH0gZWxzZSB7CiAgICB0aGlzLnRyYW5zYWN0aW9uID0gbmV3IFNJUC5UcmFuc2FjdGlvbnMuTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ocmVxdWVzdCwgdWEpOwogIH0KCiAgaWYgKHJlcXVlc3QuYm9keSkgewogICAgdGhpcy5ib2R5ID0gcmVxdWVzdC5ib2R5OwogIH0KICBpZiAocmVxdWVzdC5oYXNIZWFkZXIoJ0NvbnRlbnQtVHlwZScpKSB7CiAgICB0aGlzLmNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpOwogIH0KICB0aGlzLm1ldGhvZCA9IHJlcXVlc3QubWV0aG9kOwoKICB0aGlzLmRhdGEgPSB7fTsKCiAgdGhpcy5sb2NhbElkZW50aXR5ID0gcmVxdWVzdC50bzsKICB0aGlzLnJlbW90ZUlkZW50aXR5ID0gcmVxdWVzdC5mcm9tOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKTsKClNlcnZlckNvbnRleHQucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAob3B0aW9ucy5zdGF0dXNDb2RlID0gMTgwKTsKICBvcHRpb25zLm1pbkNvZGUgPSAxMDA7CiAgb3B0aW9ucy5tYXhDb2RlID0gMTk5OwogIG9wdGlvbnMuZXZlbnRzID0gWydwcm9ncmVzcyddOwogIHJldHVybiB0aGlzLnJlcGx5KG9wdGlvbnMpOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAob3B0aW9ucy5zdGF0dXNDb2RlID0gMjAwKTsKICBvcHRpb25zLm1pbkNvZGUgPSAyMDA7CiAgb3B0aW9ucy5tYXhDb2RlID0gMjk5OwogIG9wdGlvbnMuZXZlbnRzID0gWydhY2NlcHRlZCddOwogIHJldHVybiB0aGlzLnJlcGx5KG9wdGlvbnMpOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUucmVqZWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAob3B0aW9ucy5zdGF0dXNDb2RlID0gNDgwKTsKICBvcHRpb25zLm1pbkNvZGUgPSAzMDA7CiAgb3B0aW9ucy5tYXhDb2RlID0gNjk5OwogIG9wdGlvbnMuZXZlbnRzID0gWydyZWplY3RlZCcsICdmYWlsZWQnXTsKICByZXR1cm4gdGhpcy5yZXBseShvcHRpb25zKTsKfTsKClNlcnZlckNvbnRleHQucHJvdG90eXBlLnJlcGx5ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gVGhpcyBpcyBva2F5LCBzbyBsb25nIGFzIHdlIHRyZWF0IG9wdGlvbnMgYXMgcmVhZC1vbmx5IGluIHRoaXMgbWV0aG9kCiAgdmFyCiAgICBzdGF0dXNDb2RlID0gb3B0aW9ucy5zdGF0dXNDb2RlIHx8IDEwMCwKICAgIG1pbkNvZGUgPSBvcHRpb25zLm1pbkNvZGUgfHwgMTAwLAogICAgbWF4Q29kZSA9IG9wdGlvbnMubWF4Q29kZSB8fCA2OTksCiAgICByZWFzb25QaHJhc2UgPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHN0YXR1c0NvZGUsIG9wdGlvbnMucmVhc29uUGhyYXNlKSwKICAgIGV4dHJhSGVhZGVycyA9IG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdLAogICAgYm9keSA9IG9wdGlvbnMuYm9keSwKICAgIGV2ZW50cyA9IG9wdGlvbnMuZXZlbnRzIHx8IFtdLAogICAgcmVzcG9uc2U7CgogIGlmIChzdGF0dXNDb2RlIDwgbWluQ29kZSB8fCBzdGF0dXNDb2RlID4gbWF4Q29kZSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdGF0dXNDb2RlOiAnICsgc3RhdHVzQ29kZSk7CiAgfQogIHJlc3BvbnNlID0gdGhpcy5yZXF1ZXN0LnJlcGx5KHN0YXR1c0NvZGUsIHJlYXNvblBocmFzZSwgZXh0cmFIZWFkZXJzLCBib2R5KTsKICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHRoaXMuZW1pdChldmVudCwgcmVzcG9uc2UsIHJlYXNvblBocmFzZSk7CiAgfSwgdGhpcyk7CgogIHJldHVybiB0aGlzOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dCA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwp9OwoKU2VydmVyQ29udGV4dC5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvciA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIG51bGwsIFNJUC5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKTsKfTsKClNJUC5TZXJ2ZXJDb250ZXh0ID0gU2VydmVyQ29udGV4dDsKfTsKCn0se31dLDI5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7Cgp2YXIgRFRNRiA9IHJlcXVpcmUoJy4vU2Vzc2lvbi9EVE1GJykoU0lQKTsKCnZhciBTZXNzaW9uLCBJbnZpdGVTZXJ2ZXJDb250ZXh0LCBJbnZpdGVDbGllbnRDb250ZXh0LAogQyA9IHsKICAgIC8vU2Vzc2lvbiBzdGF0ZXMKICAgIFNUQVRVU19OVUxMOiAgICAgICAgICAgICAgICAgICAgICAgIDAsCiAgICBTVEFUVVNfSU5WSVRFX1NFTlQ6ICAgICAgICAgICAgICAgICAxLAogICAgU1RBVFVTXzFYWF9SRUNFSVZFRDogICAgICAgICAgICAgICAgMiwKICAgIFNUQVRVU19JTlZJVEVfUkVDRUlWRUQ6ICAgICAgICAgICAgIDMsCiAgICBTVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSOiAgICAgICAgICA0LAogICAgU1RBVFVTX0FOU1dFUkVEOiAgICAgICAgICAgICAgICAgICAgNSwKICAgIFNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSzogICAgICAgICAgIDYsCiAgICBTVEFUVVNfV0FJVElOR19GT1JfQUNLOiAgICAgICAgICAgICA3LAogICAgU1RBVFVTX0NBTkNFTEVEOiAgICAgICAgICAgICAgICAgICAgOCwKICAgIFNUQVRVU19URVJNSU5BVEVEOiAgICAgICAgICAgICAgICAgIDksCiAgICBTVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0s6IDEwLAogICAgU1RBVFVTX0VBUkxZX01FRElBOiAgICAgICAgICAgICAgICAxMSwKICAgIFNUQVRVU19DT05GSVJNRUQ6ICAgICAgICAgICAgICAgICAgMTIKICB9OwoKLyoKICogQHBhcmFtIHtmdW5jdGlvbiByZXR1cm5pbmcgU0lQLk1lZGlhSGFuZGxlcn0gW21lZGlhSGFuZGxlckZhY3RvcnldCiAqICAgICAgICAoU2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgbWVkaWFIYW5kbGVyRmFjdG9yeSBhcmd1bWVudCBvZiB0aGUgVUEgY29uc3RydWN0b3IuKQogKi8KU2Vzc2lvbiA9IGZ1bmN0aW9uIChtZWRpYUhhbmRsZXJGYWN0b3J5KSB7CiAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19OVUxMOwogIHRoaXMuZGlhbG9nID0gbnVsbDsKICB0aGlzLmVhcmx5RGlhbG9ncyA9IHt9OwogIHRoaXMubWVkaWFIYW5kbGVyRmFjdG9yeSA9IG1lZGlhSGFuZGxlckZhY3RvcnkgfHwgU0lQLldlYlJUQy5NZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3Rvcnk7CiAgLy8gdGhpcy5tZWRpYUhhbmRsZXIgZ2V0cyBzZXQgYnkgSUNDL0lTQyBjb25zdHJ1Y3RvcnMKICB0aGlzLmhhc09mZmVyID0gZmFsc2U7CiAgdGhpcy5oYXNBbnN3ZXIgPSBmYWxzZTsKCiAgLy8gU2Vzc2lvbiBUaW1lcnMKICB0aGlzLnRpbWVycyA9IHsKICAgIGFja1RpbWVyOiBudWxsLAogICAgZXhwaXJlc1RpbWVyOiBudWxsLAogICAgaW52aXRlMnh4VGltZXI6IG51bGwsCiAgICB1c2VyTm9BbnN3ZXJUaW1lcjogbnVsbCwKICAgIHJlbDF4eFRpbWVyOiBudWxsLAogICAgcHJhY2tUaW1lcjogbnVsbAogIH07CgogIC8vIFNlc3Npb24gaW5mbwogIHRoaXMuc3RhcnRUaW1lID0gbnVsbDsKICB0aGlzLmVuZFRpbWUgPSBudWxsOwogIHRoaXMudG9uZXMgPSBudWxsOwoKICAvLyBNdXRlL0hvbGQgc3RhdGUKICB0aGlzLmxvY2FsX2hvbGQgPSBmYWxzZTsKICB0aGlzLnJlbW90ZV9ob2xkID0gZmFsc2U7CgogIHRoaXMucGVuZGluZ19hY3Rpb25zID0gewogICAgYWN0aW9uczogW10sCgogICAgbGVuZ3RoOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucy5sZW5ndGg7CiAgICB9LAoKICAgIGlzUGVuZGluZzogZnVuY3Rpb24obmFtZSl7CiAgICAgIHZhcgogICAgICBpZHggPSAwLAogICAgICBsZW5ndGggPSB0aGlzLmFjdGlvbnMubGVuZ3RoOwoKICAgICAgZm9yIChpZHg7IGlkeDxsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaWYgKHRoaXMuYWN0aW9uc1tpZHhdLm5hbWUgPT09IG5hbWUpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIHNoaWZ0OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucy5zaGlmdCgpOwogICAgfSwKCiAgICBwdXNoOiBmdW5jdGlvbihuYW1lKSB7CiAgICAgIHRoaXMuYWN0aW9ucy5wdXNoKHsKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH0pOwogICAgfSwKCiAgICBwb3A6IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgdmFyCiAgICAgIGlkeCA9IDAsCiAgICAgIGxlbmd0aCA9IHRoaXMuYWN0aW9ucy5sZW5ndGg7CgogICAgICBmb3IgKGlkeDsgaWR4PGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBpZiAodGhpcy5hY3Rpb25zW2lkeF0ubmFtZSA9PT0gbmFtZSkgewogICAgICAgICAgdGhpcy5hY3Rpb25zLnNwbGljZShpZHgsMSk7CiAgICAgICAgICBsZW5ndGggLS07CiAgICAgICAgICBpZHgtLTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgfTsKCiAgdGhpcy5lYXJseV9zZHAgPSBudWxsOwogIHRoaXMucmVsMTAwID0gU0lQLkMuc3VwcG9ydGVkLlVOU1VQUE9SVEVEOwp9OwoKU2Vzc2lvbi5wcm90b3R5cGUgPSB7CiAgZHRtZjogZnVuY3Rpb24odG9uZXMsIG9wdGlvbnMpIHsKICAgIHZhciB0b25lLCBkdG1mcyA9IFtdLAogICAgICAgIHNlbGYgPSB0aGlzOwoKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIGlmICh0b25lcyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggYXJndW1lbnRzJyk7CiAgICB9CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICAvLyBDaGVjayB0b25lcwogICAgaWYgKCh0eXBlb2YgdG9uZXMgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB0b25lcyAhPT0gJ251bWJlcicpIHx8ICF0b25lcy50b1N0cmluZygpLm1hdGNoKC9eWzAtOUEtRCMqLF0rJC9pKSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRvbmVzOiAnKyB0b25lcyk7CiAgICB9CgogICAgdG9uZXMgPSB0b25lcy50b1N0cmluZygpLnNwbGl0KCcnKTsKCiAgICB3aGlsZSAodG9uZXMubGVuZ3RoID4gMCkgeyBkdG1mcy5wdXNoKG5ldyBEVE1GKHRoaXMsIHRvbmVzLnNoaWZ0KCksIG9wdGlvbnMpKTsgfQoKICAgIGlmICh0aGlzLnRvbmVzKSB7CiAgICAgIC8vIFRvbmVzIGFyZSBhbHJlYWR5IHF1ZXVlZCwganVzdCBhZGQgdG8gdGhlIHF1ZXVlCiAgICAgIHRoaXMudG9uZXMgPSAgdGhpcy50b25lcy5jb25jYXQoZHRtZnMpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICB2YXIgc2VuZERUTUYgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBkdG1mLCB0aW1lb3V0OwoKICAgICAgaWYgKHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEIHx8ICFzZWxmLnRvbmVzIHx8IHNlbGYudG9uZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgLy8gU3RvcCBzZW5kaW5nIERUTUYKICAgICAgICBzZWxmLnRvbmVzID0gbnVsbDsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgZHRtZiA9IHNlbGYudG9uZXMuc2hpZnQoKTsKCiAgICAgIGlmICh0b25lID09PSAnLCcpIHsKICAgICAgICB0aW1lb3V0ID0gMjAwMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBkdG1mLm9uKCdmYWlsZWQnLCBmdW5jdGlvbigpe3NlbGYudG9uZXMgPSBudWxsO30pOwogICAgICAgIGR0bWYuc2VuZChvcHRpb25zKTsKICAgICAgICB0aW1lb3V0ID0gZHRtZi5kdXJhdGlvbiArIGR0bWYuaW50ZXJUb25lR2FwOwogICAgICB9CgogICAgICAvLyBTZXQgdGltZW91dCBmb3IgdGhlIG5leHQgdG9uZQogICAgICBTSVAuVGltZXJzLnNldFRpbWVvdXQoc2VuZERUTUYsIHRpbWVvdXQpOwogICAgfTsKCiAgICB0aGlzLnRvbmVzID0gZHRtZnM7CiAgICBzZW5kRFRNRigpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgYnllOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogICAgdmFyIHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGU7CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmxvZ2dlci5lcnJvcignRXJyb3I6IEF0dGVtcHRlZCB0byBzZW5kIEJZRSBpbiBhIHRlcm1pbmF0ZWQgc2Vzc2lvbi4nKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgdGhpcy5sb2dnZXIubG9nKCd0ZXJtaW5hdGluZyBTZXNzaW9uJyk7CgogICAgaWYgKHN0YXR1c0NvZGUgJiYgKHN0YXR1c0NvZGUgPCAyMDAgfHwgc3RhdHVzQ29kZSA+PSA3MDApKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgc3RhdHVzQ29kZTogJysgc3RhdHVzQ29kZSk7CiAgICB9CgogICAgb3B0aW9ucy5yZWNlaXZlUmVzcG9uc2UgPSBmdW5jdGlvbiAoKSB7fTsKCiAgICByZXR1cm4gdGhpcy4KICAgICAgc2VuZFJlcXVlc3QoU0lQLkMuQllFLCBvcHRpb25zKS4KICAgICAgdGVybWluYXRlZCgpOwogIH0sCgogIHJlZmVyOiBmdW5jdGlvbih0YXJnZXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgdmFyIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKSwKICAgICAgICB3aXRoUmVwbGFjZXMgPQogICAgICAgICAgdGFyZ2V0IGluc3RhbmNlb2YgU0lQLkludml0ZVNlcnZlckNvbnRleHQgfHwKICAgICAgICAgIHRhcmdldCBpbnN0YW5jZW9mIFNJUC5JbnZpdGVDbGllbnRDb250ZXh0LAogICAgICAgIG9yaWdpbmFsVGFyZ2V0ID0gdGFyZ2V0OwoKICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgZW5vdWdoIGFyZ3VtZW50cycpOwogICAgfQoKICAgIC8vIENoZWNrIFNlc3Npb24gU3RhdHVzCiAgICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogICAgfQoKICAgIC8vIHRyYW5zZm9ybSBgdGFyZ2V0YCBzbyB0aGF0IGl0IGNhbiBiZSBhIFJlZmVyLVRvIGhlYWRlciB2YWx1ZQogICAgaWYgKHdpdGhSZXBsYWNlcykgewogICAgICAvL0F0dGVuZGVkIFRyYW5zZmVyCiAgICAgIC8vIEIudHJhbnNmZXIoQykKICAgICAgdGFyZ2V0ID0gJyInICsgdGFyZ2V0LnJlbW90ZUlkZW50aXR5LmZyaWVuZGx5TmFtZSArICciICcgKwogICAgICAgICc8JyArIHRhcmdldC5kaWFsb2cucmVtb3RlX3RhcmdldC50b1N0cmluZygpICsKICAgICAgICAnP1JlcGxhY2VzPScgKyB0YXJnZXQuZGlhbG9nLmlkLmNhbGxfaWQgKwogICAgICAgICclM0J0by10YWclM0QnICsgdGFyZ2V0LmRpYWxvZy5pZC5yZW1vdGVfdGFnICsKICAgICAgICAnJTNCZnJvbS10YWclM0QnICsgdGFyZ2V0LmRpYWxvZy5pZC5sb2NhbF90YWcgKyAnPic7CiAgICB9IGVsc2UgewogICAgICAvL0JsaW5kIFRyYW5zZmVyCiAgICAgIC8vIG5vcm1hbGl6ZVRhcmdldCBhbGxvd3MgaW5zdGFuY2VzIG9mIFNJUC5VUkkgdG8gcGFzcyB0aHJvdWdoIHVuYWx0ZXJlZCwKICAgICAgLy8gc28gdHJ5IHRvIG1ha2Ugb25lIGFoZWFkIG9mIHRpbWUKICAgICAgdHJ5IHsKICAgICAgICB0YXJnZXQgPSBTSVAuR3JhbW1hci5wYXJzZSh0YXJnZXQsICdSZWZlcl9UbycpLnVyaSB8fCB0YXJnZXQ7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZygiLnJlZmVyKCkgY2Fubm90IHBhcnNlIFJlZmVyX1RvIGZyb20iLCB0YXJnZXQpOwogICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKCIuLi5mYWxsaW5nIHRocm91Z2ggdG8gbm9ybWFsaXplVGFyZ2V0KCkiKTsKICAgICAgfQoKICAgICAgLy8gQ2hlY2sgdGFyZ2V0IHZhbGlkaXR5CiAgICAgIHRhcmdldCA9IHRoaXMudWEubm9ybWFsaXplVGFyZ2V0KHRhcmdldCk7CiAgICAgIGlmICghdGFyZ2V0KSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0YXJnZXQ6ICcgKyBvcmlnaW5hbFRhcmdldCk7CiAgICAgIH0KICAgIH0KCiAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGFjdDogJysgdGhpcy5jb250YWN0KTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdBbGxvdzogJysgU0lQLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpOwogICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JlZmVyLVRvOiAnKyB0YXJnZXQpOwoKICAgIC8vIFNlbmQgdGhlIHJlcXVlc3QKICAgIHRoaXMuc2VuZFJlcXVlc3QoU0lQLkMuUkVGRVIsIHsKICAgICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICAgIGJvZHk6IG9wdGlvbnMuYm9keSwKICAgICAgcmVjZWl2ZVJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAoICEgL14yWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKSApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gaGFuZyB1cCBvbmx5IGlmIHdlIHRyYW5zZmVycmVkIHRvIGEgU0lQIGFkZHJlc3MKICAgICAgICBpZiAod2l0aFJlcGxhY2VzIHx8ICh0YXJnZXQuc2NoZW1lICYmIHRhcmdldC5zY2hlbWUubWF0Y2goIl5zaXBzPyQiKSkpIHsKICAgICAgICAgIHRoaXMudGVybWluYXRlKCk7CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcykKICAgIH0pOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgZm9sbG93UmVmZXI6IGZ1bmN0aW9uIGZvbGxvd1JlZmVyIChjYWxsYmFjaykgewogICAgcmV0dXJuIGZ1bmN0aW9uIHJlZmVyTGlzdGVuZXIgKGNhbGxiYWNrLCByZXF1ZXN0KSB7CiAgICAgIC8vIG9wZW4gbm9uLVNJUCBVUklzIGlmIHBvc3NpYmxlIGFuZCBrZWVwIHNlc3Npb24gb3BlbgogICAgICB2YXIgcmVmZXJUbyA9IHJlcXVlc3QucGFyc2VIZWFkZXIoJ3JlZmVyLXRvJyk7CiAgICAgIHZhciB0YXJnZXQgPSByZWZlclRvLnVyaTsKICAgICAgaWYgKCF0YXJnZXQuc2NoZW1lLm1hdGNoKCJec2lwcz8kIikpIHsKICAgICAgICB2YXIgdGFyZ2V0U3RyaW5nID0gdGFyZ2V0LnRvU3RyaW5nKCk7CiAgICAgICAgaWYgKHR5cGVvZiBlbnZpcm9ubWVudC5vcGVuID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBlbnZpcm9ubWVudC5vcGVuKHRhcmdldFN0cmluZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oInJlZmVycmVkIHRvIG5vbi1TSVAgVVJJIGJ1dCBgb3BlbmAgaXNuJ3QgaW4gdGhlIGVudmlyb25tZW50OiAiICsgdGFyZ2V0U3RyaW5nKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZXh0cmFIZWFkZXJzID0gW107CgogICAgICAvKiBDb3B5IHRoZSBSZXBsYWNlcyBxdWVyeSBpbnRvIGEgUmVwbGFjZXMgaGVhZGVyICovCiAgICAgIC8qIFRPRE8gLSBtYWtlIHN1cmUgd2UgZG9uJ3QgY29weSBhIHBvb3JseSBmb3JtYXR0ZWQgaGVhZGVyPyAqLwogICAgICB2YXIgcmVwbGFjZXMgPSB0YXJnZXQuZ2V0SGVhZGVyKCdSZXBsYWNlcycpOwogICAgICBpZiAocmVwbGFjZXMgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXBsYWNlczogJyArIGRlY29kZVVSSUNvbXBvbmVudChyZXBsYWNlcykpOwogICAgICB9CgogICAgICAvLyBkb24ndCBlbWJlZCBoZWFkZXJzIGludG8gUmVxdWVzdC1VUkkgb2YgSU5WSVRFCiAgICAgIHRhcmdldC5jbGVhckhlYWRlcnMoKTsKCiAgICAgIC8qCiAgICAgICAgSGFybWxlc3MgcmFjZSBjb25kaXRpb24uICBCb3RoIHNpZGVzIG9mIFJFRkVSCiAgICAgICAgbWF5IHNlbmQgYSBCWUUsIGJ1dCBpbiB0aGUgZW5kIHRoZSBkaWFsb2dzIGFyZSBkZXN0cm95ZWQuCiAgICAgICovCiAgICAgIHZhciBnZXRSZWZlck1lZGlhID0gdGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVmZXJNZWRpYTsKICAgICAgdmFyIG1lZGlhSGludCA9IGdldFJlZmVyTWVkaWEgPyBnZXRSZWZlck1lZGlhLmNhbGwodGhpcy5tZWRpYUhhbmRsZXIpIDogdGhpcy5tZWRpYUhpbnQ7CgogICAgICBTSVAuSGFja3MuQ2hyb21lLmdldHNDb25mdXNlZEFib3V0R1VNKHRoaXMpOwoKICAgICAgdmFyIHJlZmVyU2Vzc2lvbiA9IHRoaXMudWEuaW52aXRlKHRhcmdldCwgewogICAgICAgIG1lZGlhOiBtZWRpYUhpbnQsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICB0b19kaXNwbGF5TmFtZTogcmVmZXJUby5mcmllbmRseU5hbWUKICAgICAgICB9LAogICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzCiAgICAgIH0pOwoKICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCByZXF1ZXN0LCByZWZlclNlc3Npb24pOwoKICAgICAgdGhpcy50ZXJtaW5hdGUoKTsKICAgIH0uYmluZCh0aGlzLCBjYWxsYmFjayk7CiAgfSwKCiAgc2VuZFJlcXVlc3Q6IGZ1bmN0aW9uKG1ldGhvZCxvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICB2YXIgcmVxdWVzdCA9IG5ldyBTSVAuT3V0Z29pbmdSZXF1ZXN0KAogICAgICBtZXRob2QsCiAgICAgIHRoaXMuZGlhbG9nLnJlbW90ZV90YXJnZXQsCiAgICAgIHRoaXMudWEsCiAgICAgIHsKICAgICAgICBjc2VxOiBvcHRpb25zLmNzZXEgfHwgKHRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSArPSAxKSwKICAgICAgICBjYWxsX2lkOiB0aGlzLmRpYWxvZy5pZC5jYWxsX2lkLAogICAgICAgIGZyb21fdXJpOiB0aGlzLmRpYWxvZy5sb2NhbF91cmksCiAgICAgICAgZnJvbV90YWc6IHRoaXMuZGlhbG9nLmlkLmxvY2FsX3RhZywKICAgICAgICB0b191cmk6IHRoaXMuZGlhbG9nLnJlbW90ZV91cmksCiAgICAgICAgdG9fdGFnOiB0aGlzLmRpYWxvZy5pZC5yZW1vdGVfdGFnLAogICAgICAgIHJvdXRlX3NldDogdGhpcy5kaWFsb2cucm91dGVfc2V0LAogICAgICAgIHN0YXR1c0NvZGU6IG9wdGlvbnMuc3RhdHVzQ29kZSwKICAgICAgICByZWFzb25QaHJhc2U6IG9wdGlvbnMucmVhc29uUGhyYXNlCiAgICAgIH0sCiAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdLAogICAgICBvcHRpb25zLmJvZHkKICAgICk7CgogICAgbmV3IFNJUC5SZXF1ZXN0U2VuZGVyKHsKICAgICAgcmVxdWVzdDogcmVxdWVzdCwKICAgICAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICAgICAgc2VsZi5vblJlcXVlc3RUaW1lb3V0KCk7CiAgICAgIH0sCiAgICAgIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgIHNlbGYub25UcmFuc3BvcnRFcnJvcigpOwogICAgICB9LAogICAgICByZWNlaXZlUmVzcG9uc2U6IG9wdGlvbnMucmVjZWl2ZVJlc3BvbnNlIHx8IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgc2VsZi5yZWNlaXZlTm9uSW52aXRlUmVzcG9uc2UocmVzcG9uc2UpOwogICAgICB9CiAgICB9LCB0aGlzLnVhKS5zZW5kKCk7CgogICAgLy8gRW1pdCB0aGUgcmVxdWVzdCBldmVudAogICAgdGhpcy5lbWl0KG1ldGhvZC50b0xvd2VyQ2FzZSgpLCByZXF1ZXN0KTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICBjbG9zZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgaWR4OwoKICAgIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIHRoaXMubG9nZ2VyLmxvZygnY2xvc2luZyBJTlZJVEUgc2Vzc2lvbiAnICsgdGhpcy5pZCk7CgogICAgLy8gMXN0IFN0ZXAuIFRlcm1pbmF0ZSBtZWRpYS4KICAgIGlmICh0aGlzLm1lZGlhSGFuZGxlcil7CiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLmNsb3NlKCk7CiAgICB9CgogICAgLy8gMm5kIFN0ZXAuIFRlcm1pbmF0ZSBzaWduYWxpbmcuCgogICAgLy8gQ2xlYXIgc2Vzc2lvbiB0aW1lcnMKICAgIGZvcihpZHggaW4gdGhpcy50aW1lcnMpIHsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnNbaWR4XSk7CiAgICB9CgogICAgLy8gVGVybWluYXRlIGRpYWxvZ3MKCiAgICAvLyBUZXJtaW5hdGUgY29uZmlybWVkIGRpYWxvZwogICAgaWYodGhpcy5kaWFsb2cpIHsKICAgICAgdGhpcy5kaWFsb2cudGVybWluYXRlKCk7CiAgICAgIGRlbGV0ZSB0aGlzLmRpYWxvZzsKICAgIH0KCiAgICAvLyBUZXJtaW5hdGUgZWFybHkgZGlhbG9ncwogICAgZm9yKGlkeCBpbiB0aGlzLmVhcmx5RGlhbG9ncykgewogICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZHhdLnRlcm1pbmF0ZSgpOwogICAgICBkZWxldGUgdGhpcy5lYXJseURpYWxvZ3NbaWR4XTsKICAgIH0KCiAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX1RFUk1JTkFURUQ7CgogICAgZGVsZXRlIHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF07CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBjcmVhdGVEaWFsb2c6IGZ1bmN0aW9uKG1lc3NhZ2UsIHR5cGUsIGVhcmx5KSB7CiAgICB2YXIgZGlhbG9nLCBlYXJseV9kaWFsb2csCiAgICAgIGxvY2FsX3RhZyA9IG1lc3NhZ2VbKHR5cGUgPT09ICdVQVMnKSA/ICd0b190YWcnIDogJ2Zyb21fdGFnJ10sCiAgICAgIHJlbW90ZV90YWcgPSBtZXNzYWdlWyh0eXBlID09PSAnVUFTJykgPyAnZnJvbV90YWcnIDogJ3RvX3RhZyddLAogICAgICBpZCA9IG1lc3NhZ2UuY2FsbF9pZCArIGxvY2FsX3RhZyArIHJlbW90ZV90YWc7CgogICAgZWFybHlfZGlhbG9nID0gdGhpcy5lYXJseURpYWxvZ3NbaWRdOwoKICAgIC8vIEVhcmx5IERpYWxvZwogICAgaWYgKGVhcmx5KSB7CiAgICAgIGlmIChlYXJseV9kaWFsb2cpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlYXJseV9kaWFsb2cgPSBuZXcgU0lQLkRpYWxvZyh0aGlzLCBtZXNzYWdlLCB0eXBlLCBTSVAuRGlhbG9nLkMuU1RBVFVTX0VBUkxZKTsKCiAgICAgICAgLy8gRGlhbG9nIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBjcmVhdGVkLgogICAgICAgIGlmKGVhcmx5X2RpYWxvZy5lcnJvcikgewogICAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZWFybHlfZGlhbG9nLmVycm9yKTsKICAgICAgICAgIHRoaXMuZmFpbGVkKG1lc3NhZ2UsIFNJUC5DLmNhdXNlcy5JTlRFUk5BTF9FUlJPUik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXSA9IGVhcmx5X2RpYWxvZzsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLy8gQ29uZmlybWVkIERpYWxvZwogICAgZWxzZSB7CiAgICAgIC8vIEluIGNhc2UgdGhlIGRpYWxvZyBpcyBpbiBfZWFybHlfIHN0YXRlLCB1cGRhdGUgaXQKICAgICAgaWYgKGVhcmx5X2RpYWxvZykgewogICAgICAgIGVhcmx5X2RpYWxvZy51cGRhdGUobWVzc2FnZSwgdHlwZSk7CiAgICAgICAgdGhpcy5kaWFsb2cgPSBlYXJseV9kaWFsb2c7CiAgICAgICAgZGVsZXRlIHRoaXMuZWFybHlEaWFsb2dzW2lkXTsKICAgICAgICBmb3IgKHZhciBkaWEgaW4gdGhpcy5lYXJseURpYWxvZ3MpIHsKICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2RpYV0udGVybWluYXRlKCk7CiAgICAgICAgICBkZWxldGUgdGhpcy5lYXJseURpYWxvZ3NbZGlhXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIC8vIE90aGVyd2lzZSwgY3JlYXRlIGEgX2NvbmZpcm1lZF8gZGlhbG9nCiAgICAgIGRpYWxvZyA9IG5ldyBTSVAuRGlhbG9nKHRoaXMsIG1lc3NhZ2UsIHR5cGUpOwoKICAgICAgaWYoZGlhbG9nLmVycm9yKSB7CiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoZGlhbG9nLmVycm9yKTsKICAgICAgICB0aGlzLmZhaWxlZChtZXNzYWdlLCBTSVAuQy5jYXVzZXMuSU5URVJOQUxfRVJST1IpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRvX3RhZyA9IG1lc3NhZ2UudG9fdGFnOwogICAgICAgIHRoaXMuZGlhbG9nID0gZGlhbG9nOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKCiAgLyoqCiAgKiBDaGVjayBpZiBTZXNzaW9uIGlzIHJlYWR5IGZvciBhIHJlLUlOVklURQogICoKICAqIEByZXR1cm5zIHtCb29sZWFufQogICovCiAgaXNSZWFkeVRvUmVpbnZpdGU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMubWVkaWFIYW5kbGVyLmlzUmVhZHkoKSAmJgogICAgICAhdGhpcy5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHkgJiYKICAgICAgIXRoaXMuZGlhbG9nLnVhc19wZW5kaW5nX3JlcGx5OwogIH0sCgogIC8qKgogICAqIE11dGUKICAgKi8KICBtdXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICB2YXIgcmV0ID0gdGhpcy5tZWRpYUhhbmRsZXIubXV0ZShvcHRpb25zKTsKICAgIGlmIChyZXQpIHsKICAgICAgdGhpcy5vbm11dGUocmV0KTsKICAgIH0KICB9LAoKICAvKioKICAgKiBVbm11dGUKICAgKi8KICB1bm11dGU6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIHZhciByZXQgPSB0aGlzLm1lZGlhSGFuZGxlci51bm11dGUob3B0aW9ucyk7CiAgICBpZiAocmV0KSB7CiAgICAgIHRoaXMub251bm11dGUocmV0KTsKICAgIH0KICB9LAoKICAvKioKICAgKiBIb2xkCiAgICovCiAgaG9sZDogZnVuY3Rpb24ob3B0aW9ucykgewoKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICB0aGlzLm1lZGlhSGFuZGxlci5ob2xkKCk7CgogICAgLy8gQ2hlY2sgaWYgUlRDU2Vzc2lvbiBpcyByZWFkeSB0byBzZW5kIGEgcmVJTlZJVEUKICAgIGlmICghdGhpcy5pc1JlYWR5VG9SZWludml0ZSgpKSB7CiAgICAgIC8qIElmIHRoZXJlIGlzIGEgcGVuZGluZyAndW5ob2xkJyBhY3Rpb24sIGNhbmNlbCBpdCBhbmQgZG9uJ3QgcXVldWUgdGhpcyBvbmUKICAgICAgICogRWxzZSwgaWYgdGhlcmUgaXNuJ3QgYW55ICdob2xkJyBhY3Rpb24sIGFkZCB0aGlzIG9uZSB0byB0aGUgcXVldWUKICAgICAgICogRWxzZSwgaWYgdGhlcmUgaXMgYWxyZWFkeSBhICdob2xkJyBhY3Rpb24sIHNraXAKICAgICAgICovCiAgICAgIGlmICh0aGlzLnBlbmRpbmdfYWN0aW9ucy5pc1BlbmRpbmcoJ3VuaG9sZCcpKSB7CiAgICAgICAgdGhpcy5wZW5kaW5nX2FjdGlvbnMucG9wKCd1bmhvbGQnKTsKICAgICAgfSBlbHNlIGlmICghdGhpcy5wZW5kaW5nX2FjdGlvbnMuaXNQZW5kaW5nKCdob2xkJykpIHsKICAgICAgICB0aGlzLnBlbmRpbmdfYWN0aW9ucy5wdXNoKCdob2xkJyk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfSBlbHNlIGlmICh0aGlzLmxvY2FsX2hvbGQgPT09IHRydWUpIHsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5vbmhvbGQoJ2xvY2FsJyk7CgogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBvcHRpb25zLm1hbmdsZSA9IGZ1bmN0aW9uKGJvZHkpewoKICAgICAgLy8gRG9uJ3QgcmVjZWl2ZSBtZWRpYQogICAgICAvLyBUT0RPIC0gVGhpcyB3aWxsIGJyZWFrIGZvciBtZWRpYSBzdHJlYW1zIHdpdGggZGlmZmVyZW50IGRpcmVjdGlvbnMuCiAgICAgIGlmICghKC9hPShzZW5kcmVjdnxzZW5kb25seXxyZWN2b25seXxpbmFjdGl2ZSkvKS50ZXN0KGJvZHkpKSB7CiAgICAgICAgYm9keSA9IGJvZHkucmVwbGFjZSgvKG09W15ccl0qXHJcbikvZywgJyQxYT1zZW5kb25seVxyXG4nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBib2R5ID0gYm9keS5yZXBsYWNlKC9hPXNlbmRyZWN2XHJcbi9nLCAnYT1zZW5kb25seVxyXG4nKTsKICAgICAgICBib2R5ID0gYm9keS5yZXBsYWNlKC9hPXJlY3Zvbmx5XHJcbi9nLCAnYT1pbmFjdGl2ZVxyXG4nKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJvZHk7CiAgICB9OwoKICAgIHRoaXMuc2VuZFJlaW52aXRlKG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAqIFVuaG9sZAogICAqLwogIHVuaG9sZDogZnVuY3Rpb24ob3B0aW9ucykgewoKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICB0aGlzLm1lZGlhSGFuZGxlci51bmhvbGQoKTsKCiAgICBpZiAoIXRoaXMuaXNSZWFkeVRvUmVpbnZpdGUoKSkgewogICAgICAvKiBJZiB0aGVyZSBpcyBhIHBlbmRpbmcgJ2hvbGQnIGFjdGlvbiwgY2FuY2VsIGl0IGFuZCBkb24ndCBxdWV1ZSB0aGlzIG9uZQogICAgICAgKiBFbHNlLCBpZiB0aGVyZSBpc24ndCBhbnkgJ3VuaG9sZCcgYWN0aW9uLCBhZGQgdGhpcyBvbmUgdG8gdGhlIHF1ZXVlCiAgICAgICAqIEVsc2UsIGlmIHRoZXJlIGlzIGFscmVhZHkgYSAndW5ob2xkJyBhY3Rpb24sIHNraXAKICAgICAgICovCiAgICAgIGlmICh0aGlzLnBlbmRpbmdfYWN0aW9ucy5pc1BlbmRpbmcoJ2hvbGQnKSkgewogICAgICAgIHRoaXMucGVuZGluZ19hY3Rpb25zLnBvcCgnaG9sZCcpOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLnBlbmRpbmdfYWN0aW9ucy5pc1BlbmRpbmcoJ3VuaG9sZCcpKSB7CiAgICAgICAgdGhpcy5wZW5kaW5nX2FjdGlvbnMucHVzaCgndW5ob2xkJyk7CiAgICAgIH0KICAgICAgcmV0dXJuOwogICAgfSBlbHNlIGlmICh0aGlzLmxvY2FsX2hvbGQgPT09IGZhbHNlKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLm9udW5ob2xkKCdsb2NhbCcpOwoKICAgIHRoaXMuc2VuZFJlaW52aXRlKG9wdGlvbnMpOwogIH0sCgogIC8qKgogICAqIGlzT25Ib2xkCiAgICovCiAgaXNPbkhvbGQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9jYWw6IHRoaXMubG9jYWxfaG9sZCwKICAgICAgcmVtb3RlOiB0aGlzLnJlbW90ZV9ob2xkCiAgICB9OwogIH0sCgogIC8qKgogICAqIEluIGRpYWxvZyBJTlZJVEUgUmVjZXB0aW9uCiAgICogQHByaXZhdGUKICAgKi8KICByZWNlaXZlUmVpbnZpdGU6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICBpZiAoIXJlcXVlc3QuYm9keSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHJlcXVlc3QuZ2V0SGVhZGVyKCdDb250ZW50LVR5cGUnKSAhPT0gJ2FwcGxpY2F0aW9uL3NkcCcpIHsKICAgICAgdGhpcy5sb2dnZXIud2FybignaW52YWxpZCBDb250ZW50LVR5cGUnKTsKICAgICAgcmVxdWVzdC5yZXBseSg0MTUpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5tZWRpYUhhbmRsZXIuc2V0RGVzY3JpcHRpb24ocmVxdWVzdC5ib2R5KQogICAgLnRoZW4odGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24uYmluZCh0aGlzLm1lZGlhSGFuZGxlciwgdGhpcy5tZWRpYUhpbnQpKQogICAgLnRoZW4oZnVuY3Rpb24oYm9keSkgewogICAgICByZXF1ZXN0LnJlcGx5KDIwMCwgbnVsbCwgWydDb250YWN0OiAnICsgc2VsZi5jb250YWN0XSwgYm9keSwKICAgICAgICBmdW5jdGlvbigpIHsKICAgICAgICAgIHNlbGYuc3RhdHVzID0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLOwogICAgICAgICAgc2VsZi5zZXRJbnZpdGUyeHhUaW1lcihyZXF1ZXN0LCBib2R5KTsKICAgICAgICAgIHNlbGYuc2V0QUNLVGltZXIoKTsKCiAgICAgICAgICAvLyBBcmUgd2UgaG9sZGluZz8KICAgICAgICAgIHZhciBob2xkID0gKC9hPShzZW5kb25seXxpbmFjdGl2ZSkvKS50ZXN0KHJlcXVlc3QuYm9keSk7CgogICAgICAgICAgaWYgKHNlbGYucmVtb3RlX2hvbGQgJiYgIWhvbGQpIHsKICAgICAgICAgICAgc2VsZi5vbnVuaG9sZCgncmVtb3RlJyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCFzZWxmLnJlbW90ZV9ob2xkICYmIGhvbGQpIHsKICAgICAgICAgICAgc2VsZi5vbmhvbGQoJ3JlbW90ZScpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSkKICAgIC5jYXRjaChmdW5jdGlvbiBvbkZhaWx1cmUgKGUpIHsKICAgICAgdmFyIHN0YXR1c0NvZGU7CiAgICAgIGlmIChlIGluc3RhbmNlb2YgU0lQLkV4Y2VwdGlvbnMuR2V0RGVzY3JpcHRpb25FcnJvcikgewogICAgICAgIHN0YXR1c0NvZGUgPSA1MDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoZSk7CiAgICAgICAgc3RhdHVzQ29kZSA9IDQ4ODsKICAgICAgfQogICAgICByZXF1ZXN0LnJlcGx5KHN0YXR1c0NvZGUpOwogICAgfSk7CiAgfSwKCiAgc2VuZFJlaW52aXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICB2YXIKICAgICAgc2VsZiA9IHRoaXMsCiAgICAgIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKSwKICAgICAgZXZlbnRIYW5kbGVycyA9IG9wdGlvbnMuZXZlbnRIYW5kbGVycyB8fCB7fSwKICAgICAgbWFuZ2xlID0gb3B0aW9ucy5tYW5nbGUgfHwgbnVsbCwKICAgICAgc3VjY2VlZGVkOwoKICAgIGlmIChldmVudEhhbmRsZXJzLnN1Y2NlZWRlZCkgewogICAgICBzdWNjZWVkZWQgPSBldmVudEhhbmRsZXJzLnN1Y2NlZWRlZDsKICAgIH0KICAgIHRoaXMucmVpbnZpdGVTdWNjZWVkZWQgPSBmdW5jdGlvbigpewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dChzZWxmLnRpbWVycy5hY2tUaW1lcik7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHNlbGYudGltZXJzLmludml0ZTJ4eFRpbWVyKTsKICAgICAgc2VsZi5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CiAgICAgIHN1Y2NlZWRlZCAmJiBzdWNjZWVkZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgICBpZiAoZXZlbnRIYW5kbGVycy5mYWlsZWQpIHsKICAgICAgdGhpcy5yZWludml0ZUZhaWxlZCA9IGV2ZW50SGFuZGxlcnMuZmFpbGVkOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yZWludml0ZUZhaWxlZCA9IGZ1bmN0aW9uKCl7fTsKICAgIH0KCiAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGFjdDogJyArIHRoaXMuY29udGFjdCk7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcrIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCcpOwoKICAgIHRoaXMucmVjZWl2ZVJlc3BvbnNlID0gdGhpcy5yZWNlaXZlUmVpbnZpdGVSZXNwb25zZTsKICAgIC8vUkVWSVNJVAogICAgdGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24oc2VsZi5tZWRpYUhpbnQpCiAgICAudGhlbihtYW5nbGUpCiAgICAudGhlbigKICAgICAgZnVuY3Rpb24oYm9keSl7CiAgICAgICAgc2VsZi5kaWFsb2cuc2VuZFJlcXVlc3Qoc2VsZiwgU0lQLkMuSU5WSVRFLCB7CiAgICAgICAgICBleHRyYUhlYWRlcnM6IGV4dHJhSGVhZGVycywKICAgICAgICAgIGJvZHk6IGJvZHkKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHNlbGYuaXNSZWFkeVRvUmVpbnZpdGUoKSkgewogICAgICAgICAgc2VsZi5vblJlYWR5VG9SZWludml0ZSgpOwogICAgICAgIH0KICAgICAgICBzZWxmLnJlaW52aXRlRmFpbGVkKCk7CiAgICAgIH0KICAgICk7CiAgfSwKCiAgcmVjZWl2ZVJlcXVlc3Q6IGZ1bmN0aW9uIChyZXF1ZXN0KSB7CiAgICBzd2l0Y2ggKHJlcXVlc3QubWV0aG9kKSB7CiAgICAgIGNhc2UgU0lQLkMuQllFOgogICAgICAgIHJlcXVlc3QucmVwbHkoMjAwKTsKICAgICAgICBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgICAgICB0aGlzLmVtaXQoJ2J5ZScsIHJlcXVlc3QpOwogICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CWUUpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBTSVAuQy5JTlZJVEU6CiAgICAgICAgaWYodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCdyZS1JTlZJVEUgcmVjZWl2ZWQnKTsKICAgICAgICAgIHRoaXMucmVjZWl2ZVJlaW52aXRlKHJlcXVlc3QpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBTSVAuQy5JTkZPOgogICAgICAgIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSykgewogICAgICAgICAgdmFyIGJvZHksIHRvbmUsIGR1cmF0aW9uLAogICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ2NvbnRlbnQtdHlwZScpLAogICAgICAgICAgICAgIHJlZ190b25lID0gL14oU2lnbmFsXHMqPz1ccyo/KShbMC05QS1EIypdezF9KShccyk/LiovLAogICAgICAgICAgICAgIHJlZ19kdXJhdGlvbiA9IC9eKER1cmF0aW9uXHM/PVxzPykoWzAtOV17MSw0fSkoXHMpPy4qLzsKCiAgICAgICAgICBpZiAoY29udGVudFR5cGUpIHsKICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlLm1hdGNoKC9eYXBwbGljYXRpb25cL2R0bWYtcmVsYXkvaSkpIHsKICAgICAgICAgICAgICBpZiAocmVxdWVzdC5ib2R5KSB7CiAgICAgICAgICAgICAgICBib2R5ID0gcmVxdWVzdC5ib2R5LnNwbGl0KCdcclxuJywgMik7CiAgICAgICAgICAgICAgICBpZiAoYm9keS5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlZ190b25lLnRlc3QoYm9keVswXSkpIHsKICAgICAgICAgICAgICAgICAgICB0b25lID0gYm9keVswXS5yZXBsYWNlKHJlZ190b25lLCIkMiIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChyZWdfZHVyYXRpb24udGVzdChib2R5WzFdKSkgewogICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gcGFyc2VJbnQoYm9keVsxXS5yZXBsYWNlKHJlZ19kdXJhdGlvbiwiJDIiKSwgMTApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBuZXcgRFRNRih0aGlzLCB0b25lLCB7ZHVyYXRpb246IGR1cmF0aW9ufSkuaW5pdF9pbmNvbWluZyhyZXF1ZXN0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXF1ZXN0LnJlcGx5KDQxNSwgbnVsbCwgWyJBY2NlcHQ6IGFwcGxpY2F0aW9uL2R0bWYtcmVsYXkiXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU0lQLkMuUkVGRVI6CiAgICAgICAgaWYodGhpcy5zdGF0dXMgPT09ICBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygnUkVGRVIgcmVjZWl2ZWQnKTsKICAgICAgICAgIHZhciBoYXNSZWZlckxpc3RlbmVyID0gdGhpcy5saXN0ZW5lcnMoJ3JlZmVyJykubGVuZ3RoLAogICAgICAgICAgICAgIG5vdGlmeUJvZHk7CgogICAgICAgICAgaWYgKGhhc1JlZmVyTGlzdGVuZXIpIHsKICAgICAgICAgICAgcmVxdWVzdC5yZXBseSgyMDIsICdBY2NlcHRlZCcpOwogICAgICAgICAgICBub3RpZnlCb2R5ID0gJ1NJUC8yLjAgMTAwIFRyeWluZyc7CgogICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLk5PVElGWSwgewogICAgICAgICAgICAgIGV4dHJhSGVhZGVyczpbCiAgICAgICAgICAgICAgICAnRXZlbnQ6IHJlZmVyJywKICAgICAgICAgICAgICAgICdTdWJzY3JpcHRpb24tU3RhdGU6IHRlcm1pbmF0ZWQnLAogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZTogbWVzc2FnZS9zaXBmcmFnJwogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgYm9keTogbm90aWZ5Qm9keSwKICAgICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB0aGlzLmVtaXQoJ3JlZmVyJywgcmVxdWVzdCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBSRkMgMzUxNS4yLjQuMjogJ3RoZSBVQSBNQVkgZGVjbGluZSB0aGUgcmVxdWVzdC4nCiAgICAgICAgICAgIHJlcXVlc3QucmVwbHkoNjAzLCAnRGVjbGluZWQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU0lQLkMuTk9USUZZOgogICAgICAgIHJlcXVlc3QucmVwbHkoMjAwLCAnT0snKTsKICAgICAgICB0aGlzLmVtaXQoJ25vdGlmeScsIHJlcXVlc3QpOwogICAgICAgIGJyZWFrOwogICAgfQogIH0sCgogIC8qKgogICAqIFJlY2VwdGlvbiBvZiBSZXNwb25zZSBmb3IgaW4tZGlhbG9nIElOVklURQogICAqIEBwcml2YXRlCiAgICovCiAgcmVjZWl2ZVJlaW52aXRlUmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgY29udGVudFR5cGUgPSByZXNwb25zZS5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpOwoKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgc3dpdGNoKHRydWUpIHsKICAgICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgIGJyZWFrOwogICAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CgogICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoU0lQLkMuQUNLLHtjc2VxOnJlc3BvbnNlLmNzZXF9KTsKCiAgICAgICAgaWYoIXJlc3BvbnNlLmJvZHkpIHsKICAgICAgICAgIHRoaXMucmVpbnZpdGVGYWlsZWQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0gZWxzZSBpZiAoY29udGVudFR5cGUgIT09ICdhcHBsaWNhdGlvbi9zZHAnKSB7CiAgICAgICAgICB0aGlzLnJlaW52aXRlRmFpbGVkKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIC8vUkVWSVNJVAogICAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnNldERlc2NyaXB0aW9uKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgLnRoZW4oCiAgICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MgKCkgewogICAgICAgICAgICBzZWxmLnJlaW52aXRlU3VjY2VlZGVkKCk7CiAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlICgpIHsKICAgICAgICAgICAgc2VsZi5yZWludml0ZUZhaWxlZCgpOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhpcy5yZWludml0ZUZhaWxlZCgpOwogICAgfQogIH0sCgogIGFjY2VwdEFuZFRlcm1pbmF0ZTogZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1c19jb2RlLCByZWFzb25fcGhyYXNlKSB7CiAgICB2YXIgZXh0cmFIZWFkZXJzID0gW107CgogICAgaWYgKHN0YXR1c19jb2RlKSB7CiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZWFzb246ICcgKyBTSVAuVXRpbHMuZ2V0UmVhc29uSGVhZGVyVmFsdWUoc3RhdHVzX2NvZGUsIHJlYXNvbl9waHJhc2UpKTsKICAgIH0KCiAgICAvLyBBbiBlcnJvciBvbiBkaWFsb2cgY3JlYXRpb24gd2lsbCBmaXJlICdmYWlsZWQnIGV2ZW50CiAgICBpZiAodGhpcy5kaWFsb2cgfHwgdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnKSkgewogICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSyx7Y3NlcTogcmVzcG9uc2UuY3NlcX0pOwogICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkJZRSwgewogICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIC8qKgogICAqIFJGQzMyNjEgMTMuMy4xLjQKICAgKiBSZXNwb25zZSByZXRyYW5zbWlzc2lvbnMgY2Fubm90IGJlIGFjY29tcGxpc2hlZCBieSB0cmFuc2FjdGlvbiBsYXllcgogICAqICBzaW5jZSBpdCBpcyBkZXN0cm95ZWQgd2hlbiByZWNlaXZpbmcgdGhlIGZpcnN0IDJ4eCBhbnN3ZXIKICAgKi8KICBzZXRJbnZpdGUyeHhUaW1lcjogZnVuY3Rpb24ocmVxdWVzdCwgYm9keSkgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICAgIHRpbWVvdXQgPSBTSVAuVGltZXJzLlQxOwoKICAgIHRoaXMudGltZXJzLmludml0ZTJ4eFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uIGludml0ZTJ4eFJldHJhbnNtaXNzaW9uKCkgewogICAgICBpZiAoc2VsZi5zdGF0dXMgIT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc2VsZi5sb2dnZXIubG9nKCdubyBBQ0sgcmVjZWl2ZWQsIGF0dGVtcHRpbmcgdG8gcmV0cmFuc21pdCBPSycpOwoKICAgICAgcmVxdWVzdC5yZXBseSgyMDAsIG51bGwsIFsnQ29udGFjdDogJyArIHNlbGYuY29udGFjdF0sIGJvZHkpOwoKICAgICAgdGltZW91dCA9IE1hdGgubWluKHRpbWVvdXQgKiAyLCBTSVAuVGltZXJzLlQyKTsKCiAgICAgIHNlbGYudGltZXJzLmludml0ZTJ4eFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGludml0ZTJ4eFJldHJhbnNtaXNzaW9uLCB0aW1lb3V0KTsKICAgIH0sIHRpbWVvdXQpOwogIH0sCgogIC8qKgogICAqIFJGQzMyNjEgMTQuMgogICAqIElmIGEgVUFTIGdlbmVyYXRlcyBhIDJ4eCByZXNwb25zZSBhbmQgbmV2ZXIgcmVjZWl2ZXMgYW4gQUNLLAogICAqICBpdCBTSE9VTEQgZ2VuZXJhdGUgYSBCWUUgdG8gdGVybWluYXRlIHRoZSBkaWFsb2cuCiAgICovCiAgc2V0QUNLVGltZXI6IGZ1bmN0aW9uKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIHRoaXMudGltZXJzLmFja1RpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICBpZihzZWxmLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICAgICAgc2VsZi5sb2dnZXIubG9nKCdubyBBQ0sgcmVjZWl2ZWQgZm9yIGFuIGV4dGVuZGVkIHBlcmlvZCBvZiB0aW1lLCB0ZXJtaW5hdGluZyB0aGUgY2FsbCcpOwogICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHNlbGYudGltZXJzLmludml0ZTJ4eFRpbWVyKTsKICAgICAgICBzZWxmLnNlbmRSZXF1ZXN0KFNJUC5DLkJZRSk7CiAgICAgICAgc2VsZi50ZXJtaW5hdGVkKG51bGwsIFNJUC5DLmNhdXNlcy5OT19BQ0spOwogICAgICB9CiAgICB9LCBTSVAuVGltZXJzLlRJTUVSX0gpOwogIH0sCgogIC8qCiAgICogQHByaXZhdGUKICAgKi8KICBvblJlYWR5VG9SZWludml0ZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgYWN0aW9uID0gdGhpcy5wZW5kaW5nX2FjdGlvbnMuc2hpZnQoKTsKCiAgICBpZiAoIWFjdGlvbiB8fCAhdGhpc1thY3Rpb24ubmFtZV0pIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXNbYWN0aW9uLm5hbWVdKCk7CiAgfSwKCiAgb25UcmFuc3BvcnRFcnJvcjogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0NPTkZJUk1FRCAmJiB0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICB9CiAgfSwKCiAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aGlzLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgICB0aGlzLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9CiAgfSwKCiAgb25EaWFsb2dFcnJvcjogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMudGVybWluYXRlZChyZXNwb25zZSwgU0lQLkMuY2F1c2VzLkRJQUxPR19FUlJPUik7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuRElBTE9HX0VSUk9SKTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuRElBTE9HX0VSUk9SKTsKICAgIH0KICB9LAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIG9uaG9sZDogZnVuY3Rpb24ob3JpZ2luYXRvcikgewogICAgdGhpc1tvcmlnaW5hdG9yID09PSAnbG9jYWwnID8gJ2xvY2FsX2hvbGQnIDogJ3JlbW90ZV9ob2xkJ10gPSB0cnVlOwogICAgdGhpcy5lbWl0KCdob2xkJywgeyBvcmlnaW5hdG9yOiBvcmlnaW5hdG9yIH0pOwogIH0sCgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgb251bmhvbGQ6IGZ1bmN0aW9uKG9yaWdpbmF0b3IpIHsKICAgIHRoaXNbb3JpZ2luYXRvciA9PT0gJ2xvY2FsJyA/ICdsb2NhbF9ob2xkJyA6ICdyZW1vdGVfaG9sZCddID0gZmFsc2U7CiAgICB0aGlzLmVtaXQoJ3VuaG9sZCcsIHsgb3JpZ2luYXRvcjogb3JpZ2luYXRvciB9KTsKICB9LAoKICAvKgogICAqIEBwcml2YXRlCiAgICovCiAgb25tdXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICB0aGlzLmVtaXQoJ211dGVkJywgewogICAgICBhdWRpbzogb3B0aW9ucy5hdWRpbywKICAgICAgdmlkZW86IG9wdGlvbnMudmlkZW8KICAgIH0pOwogIH0sCgogIC8qCiAgICogQHByaXZhdGUKICAgKi8KICBvbnVubXV0ZTogZnVuY3Rpb24ob3B0aW9ucykgewogICAgdGhpcy5lbWl0KCd1bm11dGVkJywgewogICAgICBhdWRpbzogb3B0aW9ucy5hdWRpbywKICAgICAgdmlkZW86IG9wdGlvbnMudmlkZW8KICAgIH0pOwogIH0sCgogIGZhaWxlZDogZnVuY3Rpb24ocmVzcG9uc2UsIGNhdXNlKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlIHx8IG51bGwsIGNhdXNlIHx8IG51bGwpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgcmVqZWN0ZWQ6IGZ1bmN0aW9uKHJlc3BvbnNlLCBjYXVzZSkgewogICAgdGhpcy5lbWl0KCdyZWplY3RlZCcsCiAgICAgIHJlc3BvbnNlIHx8IG51bGwsCiAgICAgIGNhdXNlIHx8IG51bGwKICAgICk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBjYW5jZWxlZDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmVtaXQoJ2NhbmNlbCcpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgYWNjZXB0ZWQ6IGZ1bmN0aW9uKHJlc3BvbnNlLCBjYXVzZSkgewogICAgY2F1c2UgPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlLCBjYXVzZSk7CgogICAgdGhpcy5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpOwoKICAgIGlmICh0aGlzLnJlcGxhY2VlKSB7CiAgICAgIHRoaXMucmVwbGFjZWUuZW1pdCgncmVwbGFjZWQnLCB0aGlzKTsKICAgICAgdGhpcy5yZXBsYWNlZS50ZXJtaW5hdGUoKTsKICAgIH0KICAgIHRoaXMuZW1pdCgnYWNjZXB0ZWQnLCByZXNwb25zZSwgY2F1c2UpOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgdGVybWluYXRlZDogZnVuY3Rpb24obWVzc2FnZSwgY2F1c2UpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICB0aGlzLmVuZFRpbWUgPSBuZXcgRGF0ZSgpOwoKICAgIHRoaXMuY2xvc2UoKTsKICAgIHRoaXMuZW1pdCgndGVybWluYXRlZCcsCiAgICAgIG1lc3NhZ2UgfHwgbnVsbCwKICAgICAgY2F1c2UgfHwgbnVsbAogICAgKTsKICAgIHJldHVybiB0aGlzOwogIH0sCgogIGNvbm5lY3Rpbmc6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIHRoaXMuZW1pdCgnY29ubmVjdGluZycsIHsgcmVxdWVzdDogcmVxdWVzdCB9KTsKICAgIHJldHVybiB0aGlzOwogIH0KfTsKClNlc3Npb24uZGVzdWdhciA9IGZ1bmN0aW9uIGRlc3VnYXIob3B0aW9ucykgewogIGlmIChlbnZpcm9ubWVudC5IVE1MTWVkaWFFbGVtZW50ICYmIG9wdGlvbnMgaW5zdGFuY2VvZiBlbnZpcm9ubWVudC5IVE1MTWVkaWFFbGVtZW50KSB7CiAgICBvcHRpb25zID0gewogICAgICBtZWRpYTogewogICAgICAgIGNvbnN0cmFpbnRzOiB7CiAgICAgICAgICBhdWRpbzogdHJ1ZSwKICAgICAgICAgIHZpZGVvOiBvcHRpb25zLnRhZ05hbWUgPT09ICdWSURFTycKICAgICAgICB9LAogICAgICAgIHJlbmRlcjogewogICAgICAgICAgcmVtb3RlOiBvcHRpb25zCiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0KICByZXR1cm4gb3B0aW9ucyB8fCB7fTsKfTsKCgpTZXNzaW9uLkMgPSBDOwpTSVAuU2Vzc2lvbiA9IFNlc3Npb247CgoKSW52aXRlU2VydmVyQ29udGV4dCA9IGZ1bmN0aW9uKHVhLCByZXF1ZXN0KSB7CiAgdmFyIGV4cGlyZXMsCiAgICBzZWxmID0gdGhpcywKICAgIGNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpLAogICAgY29udGVudERpc3AgPSByZXF1ZXN0LnBhcnNlSGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uJyk7CgogIC8vIENoZWNrIGJvZHkgYW5kIGNvbnRlbnQgdHlwZQogIGlmICgoIWNvbnRlbnREaXNwICYmIGNvbnRlbnRUeXBlICE9PSAnYXBwbGljYXRpb24vc2RwJykgfHwgKGNvbnRlbnREaXNwICYmIGNvbnRlbnREaXNwLnR5cGUgPT09ICdyZW5kZXInKSkgewogICAgdGhpcy5yZW5kZXJib2R5ID0gcmVxdWVzdC5ib2R5OwogICAgdGhpcy5yZW5kZXJ0eXBlID0gY29udGVudFR5cGU7CiAgfSBlbHNlIGlmIChjb250ZW50VHlwZSAhPT0gJ2FwcGxpY2F0aW9uL3NkcCcgJiYgKGNvbnRlbnREaXNwICYmIGNvbnRlbnREaXNwLnR5cGUgPT09ICdzZXNzaW9uJykpIHsKICAgIHJlcXVlc3QucmVwbHkoNDE1KTsKICAgIC8vVE9ETzogaW5zdGVhZCBvZiA0MTUsIHBhc3Mgb2ZmIHRvIHRoZSBtZWRpYSBoYW5kbGVyLCB3aG8gY2FuIHRoZW4gZGVjaWRlIGlmIHdlIGNhbiB1c2UgaXQKICAgIHJldHVybjsKICB9CgogIC8vVE9ETzogbW92ZSB0aGlzIGludG8gbWVkaWEgaGFuZGxlcgogIFNJUC5IYWNrcy5GaXJlZm94LmNhbm5vdEhhbmRsZUV4dHJhV2hpdGVzcGFjZShyZXF1ZXN0KTsKICBTSVAuSGFja3MuQWxsQnJvd3NlcnMubWFza0R0bHMocmVxdWVzdCk7CgogIFNJUC5VdGlscy5hdWdtZW50KHRoaXMsIFNJUC5TZXJ2ZXJDb250ZXh0LCBbdWEsIHJlcXVlc3RdKTsKICBTSVAuVXRpbHMuYXVnbWVudCh0aGlzLCBTSVAuU2Vzc2lvbiwgW3VhLmNvbmZpZ3VyYXRpb24ubWVkaWFIYW5kbGVyRmFjdG9yeV0pOwoKICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0lOVklURV9SRUNFSVZFRDsKICB0aGlzLmZyb21fdGFnID0gcmVxdWVzdC5mcm9tX3RhZzsKICB0aGlzLmlkID0gcmVxdWVzdC5jYWxsX2lkICsgdGhpcy5mcm9tX3RhZzsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogIHRoaXMuY29udGFjdCA9IHRoaXMudWEuY29udGFjdC50b1N0cmluZygpOwoKICB0aGlzLnJlY2VpdmVOb25JbnZpdGVSZXNwb25zZSA9IGZ1bmN0aW9uICgpIHt9OyAvLyBpbnRlbnRpb25hbCBuby1vcAoKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLmludml0ZXNlcnZlcmNvbnRleHQnLCB0aGlzLmlkKTsKCiAgLy9TYXZlIHRoZSBzZXNzaW9uIGludG8gdGhlIHVhIHNlc3Npb25zIGNvbGxlY3Rpb24uCiAgdGhpcy51YS5zZXNzaW9uc1t0aGlzLmlkXSA9IHRoaXM7CgogIC8vR2V0IHRoZSBFeHBpcmVzIGhlYWRlciB2YWx1ZSBpZiBleGlzdHMKICBpZihyZXF1ZXN0Lmhhc0hlYWRlcignZXhwaXJlcycpKSB7CiAgICBleHBpcmVzID0gcmVxdWVzdC5nZXRIZWFkZXIoJ2V4cGlyZXMnKSAqIDEwMDA7CiAgfQoKICAvL1NldCAxMDByZWwgaWYgbmVjZXNzYXJ5CiAgZnVuY3Rpb24gc2V0MTAwcmVsKGgsYykgewogICAgaWYgKHJlcXVlc3QuaGFzSGVhZGVyKGgpICYmIHJlcXVlc3QuZ2V0SGVhZGVyKGgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignMTAwcmVsJykgPj0gMCkgewogICAgICBzZWxmLnJlbDEwMCA9IGM7CiAgICB9CiAgfQogIHNldDEwMHJlbCgncmVxdWlyZScsIFNJUC5DLnN1cHBvcnRlZC5SRVFVSVJFRCk7CiAgc2V0MTAwcmVsKCdzdXBwb3J0ZWQnLCBTSVAuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEKTsKCiAgLyogU2V0IHRoZSB0b190YWcgYmVmb3JlCiAgICogcmVwbHlpbmcgYSByZXNwb25zZSBjb2RlIHRoYXQgd2lsbCBjcmVhdGUgYSBkaWFsb2cuCiAgICovCiAgcmVxdWVzdC50b190YWcgPSBTSVAuVXRpbHMubmV3VGFnKCk7CgogIC8vIEFuIGVycm9yIG9uIGRpYWxvZyBjcmVhdGlvbiB3aWxsIGZpcmUgJ2ZhaWxlZCcgZXZlbnQKICBpZighdGhpcy5jcmVhdGVEaWFsb2cocmVxdWVzdCwgJ1VBUycsIHRydWUpKSB7CiAgICByZXF1ZXN0LnJlcGx5KDUwMCwgJ01pc3NpbmcgQ29udGFjdCBoZWFkZXIgZmllbGQnKTsKICAgIHJldHVybjsKICB9CgogIC8vSW5pdGlhbGl6ZSBNZWRpYSBTZXNzaW9uCiAgdGhpcy5tZWRpYUhhbmRsZXIgPSB0aGlzLm1lZGlhSGFuZGxlckZhY3RvcnkodGhpcywgewogICAgUlRDQ29uc3RyYWludHM6IHsib3B0aW9uYWwiOiBbeydEdGxzU3J0cEtleUFncmVlbWVudCc6ICd0cnVlJ31dfQogIH0pOwoKICBpZiAodGhpcy5tZWRpYUhhbmRsZXIgJiYgdGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVtb3RlU3RyZWFtcykgewogICAgdGhpcy5nZXRSZW1vdGVTdHJlYW1zID0gdGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVtb3RlU3RyZWFtcy5iaW5kKHRoaXMubWVkaWFIYW5kbGVyKTsKICAgIHRoaXMuZ2V0TG9jYWxTdHJlYW1zID0gdGhpcy5tZWRpYUhhbmRsZXIuZ2V0TG9jYWxTdHJlYW1zLmJpbmQodGhpcy5tZWRpYUhhbmRsZXIpOwogIH0KCiAgZnVuY3Rpb24gZmlyZU5ld1Nlc3Npb24oKSB7CiAgICB2YXIgb3B0aW9ucyA9IHtleHRyYUhlYWRlcnM6IFsnQ29udGFjdDogJyArIHNlbGYuY29udGFjdF19OwoKICAgIGlmIChzZWxmLnJlbDEwMCAhPT0gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEKSB7CiAgICAgIHNlbGYucHJvZ3Jlc3Mob3B0aW9ucyk7CiAgICB9CiAgICBzZWxmLnN0YXR1cyA9IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUjsKCiAgICAvLyBTZXQgdXNlck5vQW5zd2VyVGltZXIKICAgIHNlbGYudGltZXJzLnVzZXJOb0Fuc3dlclRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICByZXF1ZXN0LnJlcGx5KDQwOCk7CiAgICAgIHNlbGYuZmFpbGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5OT19BTlNXRVIpOwogICAgICBzZWxmLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLk5PX0FOU1dFUik7CiAgICB9LCBzZWxmLnVhLmNvbmZpZ3VyYXRpb24ubm9BbnN3ZXJUaW1lb3V0KTsKCiAgICAvKiBTZXQgZXhwaXJlc1RpbWVyCiAgICAgKiBSRkMzMjYxIDEzLjMuMQogICAgICovCiAgICBpZiAoZXhwaXJlcykgewogICAgICBzZWxmLnRpbWVycy5leHBpcmVzVGltZXIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYoc2VsZi5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUikgewogICAgICAgICAgcmVxdWVzdC5yZXBseSg0ODcpOwogICAgICAgICAgc2VsZi5mYWlsZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkVYUElSRVMpOwogICAgICAgICAgc2VsZi50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5FWFBJUkVTKTsKICAgICAgICB9CiAgICAgIH0sIGV4cGlyZXMpOwogICAgfQoKICAgIHNlbGYuZW1pdCgnaW52aXRlJyxyZXF1ZXN0KTsKICB9CgogIGlmICghcmVxdWVzdC5ib2R5IHx8IHRoaXMucmVuZGVyYm9keSkgewogICAgU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZpcmVOZXdTZXNzaW9uLCAwKTsKICB9IGVsc2UgewogICAgdGhpcy5oYXNPZmZlciA9IHRydWU7CiAgICB0aGlzLm1lZGlhSGFuZGxlci5zZXREZXNjcmlwdGlvbihyZXF1ZXN0LmJvZHkpCiAgICAudGhlbigKICAgICAgZmlyZU5ld1Nlc3Npb24sCiAgICAgIGZ1bmN0aW9uIG9uRmFpbHVyZSAoZSkgewogICAgICAgIHNlbGYubG9nZ2VyLndhcm4oJ2ludmFsaWQgU0RQJyk7CiAgICAgICAgc2VsZi5sb2dnZXIud2FybihlKTsKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4OCk7CiAgICAgIH0KICAgICk7CiAgfQp9OwoKSW52aXRlU2VydmVyQ29udGV4dC5wcm90b3R5cGUgPSB7CiAgcmVqZWN0OiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7CiAgICB9CgogICAgdGhpcy5sb2dnZXIubG9nKCdyZWplY3RpbmcgUlRDU2Vzc2lvbicpOwoKICAgIFNJUC5TZXJ2ZXJDb250ZXh0LnByb3RvdHlwZS5yZWplY3QuY2FsbCh0aGlzLCBvcHRpb25zKTsKICAgIHJldHVybiB0aGlzLnRlcm1pbmF0ZWQoKTsKICB9LAoKICB0ZXJtaW5hdGU6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIHZhcgogICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpLAogICAgYm9keSA9IG9wdGlvbnMuYm9keSwKICAgIGRpYWxvZywKICAgIHNlbGYgPSB0aGlzOwoKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLICYmCiAgICAgICB0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLnN0YXRlICE9PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgZGlhbG9nID0gdGhpcy5kaWFsb2c7CgogICAgICB0aGlzLnJlY2VpdmVSZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdCkgewogICAgICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gU0lQLkMuQUNLKSB7CiAgICAgICAgICB0aGlzLnJlcXVlc3QoU0lQLkMuQllFLCB7CiAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzLAogICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICB9KTsKICAgICAgICAgIGRpYWxvZy50ZXJtaW5hdGUoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLm9uKCdzdGF0ZUNoYW5nZWQnLCBmdW5jdGlvbigpewogICAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTSVAuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgIHRoaXMucmVxdWVzdCA9IG5ldyBTSVAuT3V0Z29pbmdSZXF1ZXN0KAogICAgICAgICAgICBTSVAuQy5CWUUsCiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnJlbW90ZV90YXJnZXQsCiAgICAgICAgICAgIHRoaXMudWEsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAnY3NlcSc6IHRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSs9MSwKICAgICAgICAgICAgICAnY2FsbF9pZCc6IHRoaXMuZGlhbG9nLmlkLmNhbGxfaWQsCiAgICAgICAgICAgICAgJ2Zyb21fdXJpJzogdGhpcy5kaWFsb2cubG9jYWxfdXJpLAogICAgICAgICAgICAgICdmcm9tX3RhZyc6IHRoaXMuZGlhbG9nLmlkLmxvY2FsX3RhZywKICAgICAgICAgICAgICAndG9fdXJpJzogdGhpcy5kaWFsb2cucmVtb3RlX3VyaSwKICAgICAgICAgICAgICAndG9fdGFnJzogdGhpcy5kaWFsb2cuaWQucmVtb3RlX3RhZywKICAgICAgICAgICAgICAncm91dGVfc2V0JzogdGhpcy5kaWFsb2cucm91dGVfc2V0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4dHJhSGVhZGVycywKICAgICAgICAgICAgYm9keQogICAgICAgICAgKTsKCiAgICAgICAgICBuZXcgU0lQLlJlcXVlc3RTZW5kZXIoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICByZXF1ZXN0OiB0aGlzLnJlcXVlc3QsCiAgICAgICAgICAgICAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBzZWxmLm9uUmVxdWVzdFRpbWVvdXQoKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgc2VsZi5vblRyYW5zcG9ydEVycm9yKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGhpcy51YQogICAgICAgICAgKS5zZW5kKCk7CiAgICAgICAgICBkaWFsb2cudGVybWluYXRlKCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRoaXMuZW1pdCgnYnllJywgdGhpcy5yZXF1ZXN0KTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKCk7CgogICAgICAvLyBSZXN0b3JlIHRoZSBkaWFsb2cgaW50byAndGhpcycgaW4gb3JkZXIgdG8gYmUgYWJsZSB0byBzZW5kIHRoZSBpbi1kaWFsb2cgQllFIDotKQogICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZzsKCiAgICAgIC8vIFJlc3RvcmUgdGhlIGRpYWxvZyBpbnRvICd1YScgc28gdGhlIEFDSyBjYW4gcmVhY2ggJ3RoaXMnIHNlc3Npb24KICAgICAgdGhpcy51YS5kaWFsb2dzW2RpYWxvZy5pZC50b1N0cmluZygpXSA9IGRpYWxvZzsKCiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhpcy5ieWUob3B0aW9ucyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnJlamVjdChvcHRpb25zKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5tZWRpYV0gZ2V0cyBwYXNzZWQgdG8gU0lQLk1lZGlhSGFuZGxlci5nZXREZXNjcmlwdGlvbiBhcyBtZWRpYUhpbnQKICAgKi8KICBwcm9ncmVzczogZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgdmFyCiAgICAgIHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGUgfHwgMTgwLAogICAgICByZWFzb25QaHJhc2UgPSBvcHRpb25zLnJlYXNvblBocmFzZSwKICAgICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpLAogICAgICBpY2VTZXJ2ZXJzLAogICAgICBzdHVuU2VydmVycyA9IG9wdGlvbnMuc3R1blNlcnZlcnMgfHwgbnVsbCwKICAgICAgdHVyblNlcnZlcnMgPSBvcHRpb25zLnR1cm5TZXJ2ZXJzIHx8IG51bGwsCiAgICAgIGJvZHkgPSBvcHRpb25zLmJvZHksCiAgICAgIHJlc3BvbnNlOwoKICAgIGlmIChzdGF0dXNDb2RlIDwgMTAwIHx8IHN0YXR1c0NvZGUgPiAxOTkpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdGF0dXNDb2RlOiAnICsgc3RhdHVzQ29kZSk7CiAgICB9CgogICAgaWYgKHRoaXMuaXNDYW5jZWxlZCB8fCB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgICBpZiAoc3R1blNlcnZlcnMgfHwgdHVyblNlcnZlcnMpIHsKICAgICAgaWYgKHN0dW5TZXJ2ZXJzKSB7CiAgICAgICAgaWNlU2VydmVycyA9IFNJUC5VQS5jb25maWd1cmF0aW9uX2NoZWNrLm9wdGlvbmFsWydzdHVuU2VydmVycyddKHN0dW5TZXJ2ZXJzKTsKICAgICAgICBpZiAoIWljZVNlcnZlcnMpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgc3R1blNlcnZlcnM6ICcrIHN0dW5TZXJ2ZXJzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zdHVuU2VydmVycyA9IGljZVNlcnZlcnM7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodHVyblNlcnZlcnMpIHsKICAgICAgICBpY2VTZXJ2ZXJzID0gU0lQLlVBLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWxbJ3R1cm5TZXJ2ZXJzJ10odHVyblNlcnZlcnMpOwogICAgICAgIGlmICghaWNlU2VydmVycykgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0dXJuU2VydmVyczogJysgdHVyblNlcnZlcnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnR1cm5TZXJ2ZXJzID0gaWNlU2VydmVyczsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnVwZGF0ZUljZVNlcnZlcnMoewogICAgICAgIHN0dW5TZXJ2ZXJzOiB0aGlzLnN0dW5TZXJ2ZXJzLAogICAgICAgIHR1cm5TZXJ2ZXJzOiB0aGlzLnR1cm5TZXJ2ZXJzCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGRvMTAwcmVsKCkgewogICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovCiAgICAgIHN0YXR1c0NvZGUgPSBvcHRpb25zLnN0YXR1c0NvZGUgfHwgMTgzOwoKICAgICAgLy8gU2V0IHN0YXR1cyBhbmQgYWRkIGV4dHJhIGhlYWRlcnMKICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSzsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXF1aXJlOiAxMDByZWwnKTsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JTZXE6ICcgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCkpOwoKICAgICAgLy8gU2F2ZSBtZWRpYSBoaW50IGZvciBsYXRlciAocmVmZXJyZWQgc2Vzc2lvbnMpCiAgICAgIHRoaXMubWVkaWFIaW50ID0gb3B0aW9ucy5tZWRpYTsKCiAgICAgIC8vIEdldCB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbiB0byBhZGQgdG8gcHJlYWNjZXB0IHdpdGgKICAgICAgdGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24ob3B0aW9ucy5tZWRpYSkKICAgICAgLnRoZW4oCiAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzIChib2R5KSB7CiAgICAgICAgICBpZiAodGhpcy5pc0NhbmNlbGVkIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmVhcmx5X3NkcCA9IGJvZHk7CiAgICAgICAgICB0aGlzW3RoaXMuaGFzT2ZmZXIgPyAnaGFzQW5zd2VyJyA6ICdoYXNPZmZlciddID0gdHJ1ZTsKCiAgICAgICAgICAvLyBSZXRyYW5zbWl0IHVudGlsIHdlIGdldCBhIHJlc3BvbnNlIG9yIHdlIHRpbWUgb3V0IChzZWUgcHJhY2tUaW1lciBiZWxvdykKICAgICAgICAgIHZhciB0aW1lb3V0ID0gU0lQLlRpbWVycy5UMTsKICAgICAgICAgIHRoaXMudGltZXJzLnJlbDF4eFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uIHJlbDF4eFJldHJhbnNtaXNzaW9uKCkgewogICAgICAgICAgICB0aGlzLnJlcXVlc3QucmVwbHkoc3RhdHVzQ29kZSwgbnVsbCwgZXh0cmFIZWFkZXJzLCBib2R5KTsKICAgICAgICAgICAgdGltZW91dCAqPSAyOwogICAgICAgICAgICB0aGlzLnRpbWVycy5yZWwxeHhUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChyZWwxeHhSZXRyYW5zbWlzc2lvbi5iaW5kKHRoaXMpLCB0aW1lb3V0KTsKICAgICAgICAgIH0uYmluZCh0aGlzKSwgdGltZW91dCk7CgogICAgICAgICAgLy8gVGltZW91dCBhbmQgcmVqZWN0IElOVklURSBpZiBubyByZXNwb25zZQogICAgICAgICAgdGhpcy50aW1lcnMucHJhY2tUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfV0FJVElOR19GT1JfUFJBQ0spIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmxvZygnbm8gUFJBQ0sgcmVjZWl2ZWQsIHJlamVjdGluZyB0aGUgY2FsbCcpOwogICAgICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5yZWwxeHhUaW1lcik7CiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5yZXBseSg1MDQpOwogICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLk5PX1BSQUNLKTsKICAgICAgICAgIH0uYmluZCh0aGlzKSwgU0lQLlRpbWVycy5UMSAqIDY0KTsKCiAgICAgICAgICAvLyBTZW5kIHRoZSBpbml0aWFsIHJlc3BvbnNlCiAgICAgICAgICByZXNwb25zZSA9IHRoaXMucmVxdWVzdC5yZXBseShzdGF0dXNDb2RlLCByZWFzb25QaHJhc2UsIGV4dHJhSGVhZGVycywgYm9keSk7CiAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UsIHJlYXNvblBocmFzZSk7CiAgICAgICAgfS5iaW5kKHRoaXMpLAoKICAgICAgICBmdW5jdGlvbiBvbkZhaWx1cmUgKCkgewogICAgICAgICAgdGhpcy5yZXF1ZXN0LnJlcGx5KDQ4MCk7CiAgICAgICAgICB0aGlzLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICB9LmJpbmQodGhpcykKICAgICAgKTsKICAgIH0gLy8gZW5kIGRvMTAwcmVsCgogICAgZnVuY3Rpb24gbm9ybWFsUmVwbHkoKSB7CiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogICAgICByZXNwb25zZSA9IHRoaXMucmVxdWVzdC5yZXBseShzdGF0dXNDb2RlLCByZWFzb25QaHJhc2UsIGV4dHJhSGVhZGVycywgYm9keSk7CiAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXNwb25zZSwgcmVhc29uUGhyYXNlKTsKICAgIH0KCiAgICBpZiAob3B0aW9ucy5zdGF0dXNDb2RlICE9PSAxMDAgJiYKICAgICAgICAodGhpcy5yZWwxMDAgPT09IFNJUC5DLnN1cHBvcnRlZC5SRVFVSVJFRCB8fAogICAgICAgICAodGhpcy5yZWwxMDAgPT09IFNJUC5DLnN1cHBvcnRlZC5TVVBQT1JURUQgJiYgb3B0aW9ucy5yZWwxMDApIHx8CiAgICAgICAgICh0aGlzLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlNVUFBPUlRFRCAmJiAodGhpcy51YS5jb25maWd1cmF0aW9uLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEKSkpKSB7CiAgICAgIGRvMTAwcmVsLmFwcGx5KHRoaXMpOwogICAgfSBlbHNlIHsKICAgICAgbm9ybWFsUmVwbHkuYXBwbHkodGhpcyk7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9LAoKICAvKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5tZWRpYV0gZ2V0cyBwYXNzZWQgdG8gU0lQLk1lZGlhSGFuZGxlci5nZXREZXNjcmlwdGlvbiBhcyBtZWRpYUhpbnQKICAgKi8KICBhY2NlcHQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNlc3Npb24uZGVzdWdhcihvcHRpb25zKSk7CiAgICBTSVAuVXRpbHMub3B0aW9uc092ZXJyaWRlKG9wdGlvbnMsICdtZWRpYScsICdtZWRpYUNvbnN0cmFpbnRzJywgdHJ1ZSwgdGhpcy5sb2dnZXIsIHRoaXMudWEuY29uZmlndXJhdGlvbi5tZWRpYSk7CiAgICB0aGlzLm1lZGlhSGludCA9IG9wdGlvbnMubWVkaWE7CgogICAgLy8gY29tbWVudGVkIG91dCBub3ctdW51c2VkIGhvbGQtcmVsYXRlZCB2YXJpYWJsZXMgZm9yIGpzaGludC4gU2VlIGJlbG93LiBKTUYgMjAxNC0xLTIxCiAgICB2YXIKICAgICAgLy9pZHgsIGxlbmd0aCwgaGFzQXVkaW8sIGhhc1ZpZGVvLAogICAgICBzZWxmID0gdGhpcywKICAgICAgcmVxdWVzdCA9IHRoaXMucmVxdWVzdCwKICAgICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpLAogICAgLy9tZWRpYVN0cmVhbSA9IG9wdGlvbnMubWVkaWFTdHJlYW0gfHwgbnVsbCwKICAgICAgaWNlU2VydmVycywKICAgICAgc3R1blNlcnZlcnMgPSBvcHRpb25zLnN0dW5TZXJ2ZXJzIHx8IG51bGwsCiAgICAgIHR1cm5TZXJ2ZXJzID0gb3B0aW9ucy50dXJuU2VydmVycyB8fCBudWxsLAogICAgICBzZHBDcmVhdGlvblN1Y2NlZWRlZCA9IGZ1bmN0aW9uKGJvZHkpIHsKICAgICAgICB2YXIKICAgICAgICAgIHJlc3BvbnNlLAogICAgICAgICAgLy8gcnVuIGZvciByZXBseSBzdWNjZXNzIGNhbGxiYWNrCiAgICAgICAgICByZXBseVN1Y2NlZWRlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzZWxmLnN0YXR1cyA9IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSzsKCiAgICAgICAgICAgIHNlbGYuc2V0SW52aXRlMnh4VGltZXIocmVxdWVzdCwgYm9keSk7CiAgICAgICAgICAgIHNlbGYuc2V0QUNLVGltZXIoKTsKICAgICAgICAgIH0sCgogICAgICAgICAgLy8gcnVuIGZvciByZXBseSBmYWlsdXJlIGNhbGxiYWNrCiAgICAgICAgICByZXBseUZhaWxlZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBzZWxmLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICAgICAgICAgIHNlbGYudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICAgICAgICB9OwoKICAgICAgICAvLyBDaHJvbWUgbWlnaHQgY2FsbCBvbmFkZHN0cmVhbSBiZWZvcmUgYWNjZXB0KCkgaXMgY2FsbGVkLCB3aGljaCBtZWFucwogICAgICAgIC8vIG1lZGlhSGFuZGxlci5yZW5kZXIoKSB3YXMgY2FsbGVkIHdpdGhvdXQgYSByZW5kZXJIaW50LCBzbyB3ZSBuZWVkIHRvCiAgICAgICAgLy8gcmUtcmVuZGVyIG5vdyB0aGF0IG1lZGlhSGludC5yZW5kZXIgaGFzIGJlZW4gc2V0LgogICAgICAgIC8vCiAgICAgICAgLy8gQ2hyb21lIHNlZW1zIHRvIGJlIGluIHRoZSByaWdodCByZWdhcmRpbmcgdGhpcywgc2VlCiAgICAgICAgLy8gaHR0cDovL2Rldi53My5vcmcvMjAxMS93ZWJydGMvZWRpdG9yL3dlYnJ0Yy5odG1sI3dpZGwtUlRDUGVlckNvbm5lY3Rpb24tb25hZGRzdHJlYW0KICAgICAgICBzZWxmLm1lZGlhSGFuZGxlci5yZW5kZXIoKTsKCiAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcgKyBzZWxmLmNvbnRhY3QpOwogICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdBbGxvdzogJyArIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKCiAgICAgICAgaWYoIXNlbGYuaGFzT2ZmZXIpIHsKICAgICAgICAgIHNlbGYuaGFzT2ZmZXIgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLmhhc0Fuc3dlciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdC5yZXBseSgyMDAsIG51bGwsIGV4dHJhSGVhZGVycywKICAgICAgICAgICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgICAgICAgICByZXBseVN1Y2NlZWRlZCwKICAgICAgICAgICAgICAgICAgICAgIHJlcGx5RmFpbGVkCiAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgaWYgKHNlbGYuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7IC8vIERpZG4ndCBmYWlsCiAgICAgICAgICBzZWxmLmFjY2VwdGVkKHJlc3BvbnNlLCBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKDIwMCkpOwogICAgICAgIH0KICAgICAgfSwKCiAgICAgIHNkcENyZWF0aW9uRmFpbGVkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIFRPRE8gLSBmYWlsIG91dCBvbiBlcnJvcgogICAgICAgIHNlbGYucmVxdWVzdC5yZXBseSg0ODApOwogICAgICAgIC8vc2VsZi5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5VU0VSX0RFTklFRF9NRURJQV9BQ0NFU1MpOwogICAgICAgIHNlbGYuZmFpbGVkKG51bGwsIFNJUC5DLmNhdXNlcy5XRUJSVENfRVJST1IpOwogICAgICAgIHNlbGYudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgfTsKCiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSykgewogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0FOU1dFUkVEX1dBSVRJTkdfRk9SX1BSQUNLOwogICAgICByZXR1cm4gdGhpczsKICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUikgewogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0FOU1dFUkVEOwogICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfRUFSTFlfTUVESUEpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICBpZiAoKHN0dW5TZXJ2ZXJzIHx8IHR1cm5TZXJ2ZXJzKSAmJgogICAgICAgICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfRUFSTFlfTUVESUEgJiYgdGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0FOU1dFUkVEX1dBSVRJTkdfRk9SX1BSQUNLKSkgewogICAgICBpZiAoc3R1blNlcnZlcnMpIHsKICAgICAgICBpY2VTZXJ2ZXJzID0gU0lQLlVBLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWxbJ3N0dW5TZXJ2ZXJzJ10oc3R1blNlcnZlcnMpOwogICAgICAgIGlmICghaWNlU2VydmVycykgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdHVuU2VydmVyczogJysgc3R1blNlcnZlcnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnN0dW5TZXJ2ZXJzID0gaWNlU2VydmVyczsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0dXJuU2VydmVycykgewogICAgICAgIGljZVNlcnZlcnMgPSBTSVAuVUEuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbFsndHVyblNlcnZlcnMnXSh0dXJuU2VydmVycyk7CiAgICAgICAgaWYgKCFpY2VTZXJ2ZXJzKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHR1cm5TZXJ2ZXJzOiAnKyB0dXJuU2VydmVycyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudHVyblNlcnZlcnMgPSBpY2VTZXJ2ZXJzOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5tZWRpYUhhbmRsZXIudXBkYXRlSWNlU2VydmVycyh7CiAgICAgICAgc3R1blNlcnZlcnM6IHRoaXMuc3R1blNlcnZlcnMsCiAgICAgICAgdHVyblNlcnZlcnM6IHRoaXMudHVyblNlcnZlcnMKICAgICAgfSk7CiAgICB9CgogICAgLy8gQW4gZXJyb3Igb24gZGlhbG9nIGNyZWF0aW9uIHdpbGwgZmlyZSAnZmFpbGVkJyBldmVudAogICAgaWYoIXRoaXMuY3JlYXRlRGlhbG9nKHJlcXVlc3QsICdVQVMnKSkgewogICAgICByZXF1ZXN0LnJlcGx5KDUwMCwgJ01pc3NpbmcgQ29udGFjdCBoZWFkZXIgZmllbGQnKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMudXNlck5vQW5zd2VyVGltZXIpOwoKICAgIC8vIHRoaXMgaG9sZC1yZWxhdGVkIGNvZGUgYnJlYWtzIEZGIGFjY2VwdGluZyBuZXcgY2FsbHMgLSBKTUYgMjAxNC0xLTIxCiAgICAvKgogICAgbGVuZ3RoID0gdGhpcy5nZXRSZW1vdGVTdHJlYW1zKCkubGVuZ3RoOwoKICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICBpZiAodGhpcy5tZWRpYUhhbmRsZXIuZ2V0UmVtb3RlU3RyZWFtcygpW2lkeF0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPiAwKSB7CiAgICAgICAgaGFzVmlkZW8gPSB0cnVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1lZGlhSGFuZGxlci5nZXRSZW1vdGVTdHJlYW1zKClbaWR4XS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICBoYXNBdWRpbyA9IHRydWU7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoIWhhc0F1ZGlvICYmIHRoaXMubWVkaWFDb25zdHJhaW50cy5hdWRpbyA9PT0gdHJ1ZSkgewogICAgICB0aGlzLm1lZGlhQ29uc3RyYWludHMuYXVkaW8gPSBmYWxzZTsKICAgICAgaWYgKG1lZGlhU3RyZWFtKSB7CiAgICAgICAgbGVuZ3RoID0gbWVkaWFTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGg7CiAgICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgICBtZWRpYVN0cmVhbS5yZW1vdmVUcmFjayhtZWRpYVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpW2lkeF0pOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmICghaGFzVmlkZW8gJiYgdGhpcy5tZWRpYUNvbnN0cmFpbnRzLnZpZGVvID09PSB0cnVlKSB7CiAgICAgIHRoaXMubWVkaWFDb25zdHJhaW50cy52aWRlbyA9IGZhbHNlOwogICAgICBpZiAobWVkaWFTdHJlYW0pIHsKICAgICAgICBsZW5ndGggPSBtZWRpYVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aDsKICAgICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICAgIG1lZGlhU3RyZWFtLnJlbW92ZVRyYWNrKG1lZGlhU3RyZWFtLmdldFZpZGVvVHJhY2tzKClbaWR4XSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAqLwoKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfRUFSTFlfTUVESUEpIHsKICAgICAgc2RwQ3JlYXRpb25TdWNjZWVkZWQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uKHNlbGYubWVkaWFIaW50KQogICAgICAudGhlbigKICAgICAgICBzZHBDcmVhdGlvblN1Y2NlZWRlZCwKICAgICAgICBzZHBDcmVhdGlvbkZhaWxlZAogICAgICApOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIHJlY2VpdmVSZXF1ZXN0OiBmdW5jdGlvbihyZXF1ZXN0KSB7CgogICAgLy8gSVNDIFJFQ0VJVkUgUkVRVUVTVAoKICAgIGZ1bmN0aW9uIGNvbmZpcm1TZXNzaW9uKCkgewogICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgdmFyIGNvbnRlbnRUeXBlOwoKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuYWNrVGltZXIpOwogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5pbnZpdGUyeHhUaW1lcik7CiAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICB0aGlzLnVubXV0ZSgpOwoKICAgICAgLy8gVE9ETyAtIHRoaXMgbG9naWMgYXNzdW1lcyBDb250ZW50LURpc3Bvc2l0aW9uIGRlZmF1bHRzCiAgICAgIGNvbnRlbnRUeXBlID0gcmVxdWVzdC5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpOwogICAgICBpZiAoY29udGVudFR5cGUgIT09ICdhcHBsaWNhdGlvbi9zZHAnKSB7CiAgICAgICAgdGhpcy5yZW5kZXJib2R5ID0gcmVxdWVzdC5ib2R5OwogICAgICAgIHRoaXMucmVuZGVydHlwZSA9IGNvbnRlbnRUeXBlOwogICAgICB9CiAgICB9CgogICAgc3dpdGNoKHJlcXVlc3QubWV0aG9kKSB7CiAgICBjYXNlIFNJUC5DLkNBTkNFTDoKICAgICAgLyogUkZDMzI2MSAxNSBTdGF0ZXMgdGhhdCBhIFVBUyBtYXkgaGF2ZSBhY2NlcHRlZCBhbiBpbnZpdGF0aW9uIHdoaWxlIGEgQ0FOQ0VMCiAgICAgICAqIHdhcyBpbiBwcm9ncmVzcyBhbmQgdGhhdCB0aGUgVUFDIE1BWSBjb250aW51ZSB3aXRoIHRoZSBzZXNzaW9uIGVzdGFibGlzaGVkIGJ5CiAgICAgICAqIGFueSAyeHggcmVzcG9uc2UsIG9yIE1BWSB0ZXJtaW5hdGUgd2l0aCBCWUUuIFNJUCBkb2VzIGNvbnRpbnVlIHdpdGggdGhlCiAgICAgICAqIGVzdGFibGlzaGVkIHNlc3Npb24uIFNvIHRoZSBDQU5DRUwgaXMgcHJvY2Vzc2VkIG9ubHkgaWYgdGhlIHNlc3Npb24gaXMgbm90IHlldAogICAgICAgKiBlc3RhYmxpc2hlZC4KICAgICAgICovCgogICAgICAvKgogICAgICAgKiBUZXJtaW5hdGUgdGhlIHdob2xlIHNlc3Npb24gaW4gY2FzZSB0aGUgdXNlciBkaWRuJ3QgYWNjZXB0IChvciB5ZXQgdG8gc2VuZCB0aGUgYW5zd2VyKSBub3IgcmVqZWN0IHRoZQogICAgICAgKnJlcXVlc3Qgb3BlbmluZyB0aGUgc2Vzc2lvbi4KICAgICAgICovCiAgICAgIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIgfHwKICAgICAgICAgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLIHx8CiAgICAgICAgIHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSyB8fAogICAgICAgICB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfRUFSTFlfTUVESUEgfHwKICAgICAgICAgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0FOU1dFUkVEKSB7CgogICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ0FOQ0VMRUQ7CiAgICAgICAgdGhpcy5yZXF1ZXN0LnJlcGx5KDQ4Nyk7CiAgICAgICAgdGhpcy5jYW5jZWxlZChyZXF1ZXN0KTsKICAgICAgICB0aGlzLnJlamVjdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5DQU5DRUxFRCk7CiAgICAgICAgdGhpcy5mYWlsZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkNBTkNFTEVEKTsKICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkNBTkNFTEVEKTsKICAgICAgfQogICAgICBicmVhazsKICAgIGNhc2UgU0lQLkMuQUNLOgogICAgICBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICAgICAgaWYgKCF0aGlzLmhhc0Fuc3dlcikgewogICAgICAgICAgaWYocmVxdWVzdC5ib2R5ICYmIHJlcXVlc3QuZ2V0SGVhZGVyKCdjb250ZW50LXR5cGUnKSA9PT0gJ2FwcGxpY2F0aW9uL3NkcCcpIHsKICAgICAgICAgICAgLy8gQUNLIGNvbnRhaW5zIGFuc3dlciB0byBhbiBJTlZJVEUgdy9vIFNEUCBuZWdvdGlhdGlvbgogICAgICAgICAgICBTSVAuSGFja3MuRmlyZWZveC5jYW5ub3RIYW5kbGVFeHRyYVdoaXRlc3BhY2UocmVxdWVzdCk7CiAgICAgICAgICAgIFNJUC5IYWNrcy5BbGxCcm93c2Vycy5tYXNrRHRscyhyZXF1ZXN0KTsKCiAgICAgICAgICAgIHRoaXMuaGFzQW5zd2VyID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5tZWRpYUhhbmRsZXIuc2V0RGVzY3JpcHRpb24ocmVxdWVzdC5ib2R5KQogICAgICAgICAgICAudGhlbigKICAgICAgICAgICAgICBjb25maXJtU2Vzc2lvbi5iaW5kKHRoaXMpLAogICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRmFpbHVyZSAoZSkgewogICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIHRoaXMudGVybWluYXRlKHsKICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogJzQ4OCcsCiAgICAgICAgICAgICAgICAgIHJlYXNvblBocmFzZTogJ0JhZCBNZWRpYSBEZXNjcmlwdGlvbicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5mYWlsZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWFybHlfc2RwKSB7CiAgICAgICAgICAgIGNvbmZpcm1TZXNzaW9uLmFwcGx5KHRoaXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy9UT0RPOiBQYXNzIHRvIG1lZGlhaGFuZGxlcgogICAgICAgICAgICB0aGlzLmZhaWxlZChyZXF1ZXN0LCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25maXJtU2Vzc2lvbi5hcHBseSh0aGlzKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlIFNJUC5DLlBSQUNLOgogICAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSykgewogICAgICAgIC8vbG9jYWxNZWRpYSA9IHNlc3Npb24ubWVkaWFIYW5kbGVyLmxvY2FsTWVkaWE7CiAgICAgICAgaWYoIXRoaXMuaGFzQW5zd2VyKSB7CiAgICAgICAgICBpZihyZXF1ZXN0LmJvZHkgJiYgcmVxdWVzdC5nZXRIZWFkZXIoJ2NvbnRlbnQtdHlwZScpID09PSAnYXBwbGljYXRpb24vc2RwJykgewogICAgICAgICAgICB0aGlzLmhhc0Fuc3dlciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnNldERlc2NyaXB0aW9uKHJlcXVlc3QuYm9keSkKICAgICAgICAgICAgLnRoZW4oCiAgICAgICAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzICgpIHsKICAgICAgICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnJlbDF4eFRpbWVyKTsKICAgICAgICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnByYWNrVGltZXIpOwogICAgICAgICAgICAgICAgcmVxdWVzdC5yZXBseSgyMDApOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSykgewogICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0VBUkxZX01FRElBOwogICAgICAgICAgICAgICAgICB0aGlzLmFjY2VwdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgICAgIC8vUkVWSVNJVAogICAgICAgICAgICAgICAgdGhpcy5tdXRlKCk7CiAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLAogICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRmFpbHVyZSAoZSkgewogICAgICAgICAgICAgICAgLy9UT0RPOiBTZW5kIHRvIG1lZGlhIGhhbmRsZXIKICAgICAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oZSk7CiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZSh7CiAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6ICc0ODgnLAogICAgICAgICAgICAgICAgICByZWFzb25QaHJhc2U6ICdCYWQgTWVkaWEgRGVzY3JpcHRpb24nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICAgIH0uYmluZCh0aGlzKQogICAgICAgICAgICApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGUoewogICAgICAgICAgICAgIHN0YXR1c0NvZGU6ICc0ODgnLAogICAgICAgICAgICAgIHJlYXNvblBocmFzZTogJ0JhZCBNZWRpYSBEZXNjcmlwdGlvbicKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlcXVlc3QsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgU0lQLkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnJlbDF4eFRpbWVyKTsKICAgICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnByYWNrVGltZXIpOwogICAgICAgICAgcmVxdWVzdC5yZXBseSgyMDApOwoKICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0spIHsKICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgdGhpcy5hY2NlcHQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfRUFSTFlfTUVESUE7CiAgICAgICAgICAvL1JFVklTSVQKICAgICAgICAgIHRoaXMubXV0ZSgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19FQVJMWV9NRURJQSkgewogICAgICAgIHJlcXVlc3QucmVwbHkoMjAwKTsKICAgICAgfQogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIFNlc3Npb24ucHJvdG90eXBlLnJlY2VpdmVSZXF1ZXN0LmFwcGx5KHRoaXMsIFtyZXF1ZXN0XSk7CiAgICAgIGJyZWFrOwogICAgfQogIH0sCgogIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19DT05GSVJNRUQgJiYgdGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgdGhpcy5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogICAgfQogIH0sCgogIG9uUmVxdWVzdFRpbWVvdXQ6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhpcy50ZXJtaW5hdGVkKG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKG51bGwsIFNJUC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgfQogIH0KCn07CgpTSVAuSW52aXRlU2VydmVyQ29udGV4dCA9IEludml0ZVNlcnZlckNvbnRleHQ7CgpJbnZpdGVDbGllbnRDb250ZXh0ID0gZnVuY3Rpb24odWEsIHRhcmdldCwgb3B0aW9ucykgewogIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKFNlc3Npb24uZGVzdWdhcihvcHRpb25zKSk7CiAgb3B0aW9ucy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG9wdGlvbnMucGFyYW1zIHx8IE9iamVjdC5wcm90b3R5cGUpOwoKICB2YXIgaWNlU2VydmVycywKICAgIGV4dHJhSGVhZGVycyA9IChvcHRpb25zLmV4dHJhSGVhZGVycyB8fCBbXSkuc2xpY2UoKSwKICAgIHN0dW5TZXJ2ZXJzID0gb3B0aW9ucy5zdHVuU2VydmVycyB8fCBudWxsLAogICAgdHVyblNlcnZlcnMgPSBvcHRpb25zLnR1cm5TZXJ2ZXJzIHx8IG51bGwsCiAgICBtZWRpYUhhbmRsZXJGYWN0b3J5ID0gb3B0aW9ucy5tZWRpYUhhbmRsZXJGYWN0b3J5IHx8IHVhLmNvbmZpZ3VyYXRpb24ubWVkaWFIYW5kbGVyRmFjdG9yeSwKICAgIGlzTWVkaWFTdXBwb3J0ZWQgPSBtZWRpYUhhbmRsZXJGYWN0b3J5LmlzU3VwcG9ydGVkOwoKICAvLyBDaGVjayBXZWJSVEMgc3VwcG9ydAogIGlmIChpc01lZGlhU3VwcG9ydGVkICYmICFpc01lZGlhU3VwcG9ydGVkKCkpIHsKICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5Ob3RTdXBwb3J0ZWRFcnJvcignTWVkaWEgbm90IHN1cHBvcnRlZCcpOwogIH0KCiAgdGhpcy5SVENDb25zdHJhaW50cyA9IG9wdGlvbnMuUlRDQ29uc3RyYWludHMgfHwge307CiAgdGhpcy5pbnZpdGVXaXRob3V0U2RwID0gb3B0aW9ucy5pbnZpdGVXaXRob3V0U2RwIHx8IGZhbHNlOwoKICAvLyBTZXQgYW5vbnltb3VzIHByb3BlcnR5CiAgdGhpcy5hbm9ueW1vdXMgPSBvcHRpb25zLmFub255bW91cyB8fCBmYWxzZTsKCiAgLy8gQ3VzdG9tIGRhdGEgdG8gYmUgc2VudCBlaXRoZXIgaW4gSU5WSVRFIG9yIGluIEFDSwogIHRoaXMucmVuZGVyYm9keSA9IG9wdGlvbnMucmVuZGVyYm9keSB8fCBudWxsOwogIHRoaXMucmVuZGVydHlwZSA9IG9wdGlvbnMucmVuZGVydHlwZSB8fCAndGV4dC9wbGFpbic7CgogIG9wdGlvbnMucGFyYW1zLmZyb21fdGFnID0gdGhpcy5mcm9tX3RhZzsKCiAgLyogRG8gbm90IGFkZCA7b2IgaW4gaW5pdGlhbCBmb3JtaW5nIGRpYWxvZyByZXF1ZXN0cyBpZiB0aGUgcmVnaXN0cmF0aW9uIG92ZXIKICAgKiAgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBnb3QgYSBHUlVVIFVSSS4KICAgKi8KICB0aGlzLmNvbnRhY3QgPSB1YS5jb250YWN0LnRvU3RyaW5nKHsKICAgIGFub255bW91czogdGhpcy5hbm9ueW1vdXMsCiAgICBvdXRib3VuZDogdGhpcy5hbm9ueW1vdXMgPyAhdWEuY29udGFjdC50ZW1wX2dydXUgOiAhdWEuY29udGFjdC5wdWJfZ3J1dQogIH0pOwoKICBpZiAodGhpcy5hbm9ueW1vdXMpIHsKICAgIG9wdGlvbnMucGFyYW1zLmZyb21fZGlzcGxheU5hbWUgPSAnQW5vbnltb3VzJzsKICAgIG9wdGlvbnMucGFyYW1zLmZyb21fdXJpID0gJ3NpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWQnOwoKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdQLVByZWZlcnJlZC1JZGVudGl0eTogJysgdWEuY29uZmlndXJhdGlvbi51cmkudG9TdHJpbmcoKSk7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnUHJpdmFjeTogaWQnKTsKICB9CiAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgZXh0cmFIZWFkZXJzLnB1c2goJ0FsbG93OiAnKyBTSVAuVUEuQy5BTExPV0VEX01FVEhPRFMudG9TdHJpbmcoKSk7CiAgaWYgKCF0aGlzLmludml0ZVdpdGhvdXRTZHApIHsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCcpOwogIH0gZWxzZSBpZiAodGhpcy5yZW5kZXJib2R5KSB7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgdGhpcy5yZW5kZXJ0eXBlKTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LURpc3Bvc2l0aW9uOiByZW5kZXI7aGFuZGxpbmc9b3B0aW9uYWwnKTsKICB9CgogIGlmICh1YS5jb25maWd1cmF0aW9uLnJlbDEwMCA9PT0gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEKSB7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnUmVxdWlyZTogMTAwcmVsJyk7CiAgfQogIGlmICh1YS5jb25maWd1cmF0aW9uLnJlcGxhY2VzID09PSBTSVAuQy5zdXBwb3J0ZWQuUkVRVUlSRUQpIHsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXF1aXJlOiByZXBsYWNlcycpOwogIH0KCiAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBleHRyYUhlYWRlcnM7CgogIFNJUC5VdGlscy5hdWdtZW50KHRoaXMsIFNJUC5DbGllbnRDb250ZXh0LCBbdWEsIFNJUC5DLklOVklURSwgdGFyZ2V0LCBvcHRpb25zXSk7CiAgU0lQLlV0aWxzLmF1Z21lbnQodGhpcywgU0lQLlNlc3Npb24sIFttZWRpYUhhbmRsZXJGYWN0b3J5XSk7CgogIC8vIENoZWNrIFNlc3Npb24gU3RhdHVzCiAgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19OVUxMKSB7CiAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogIH0KCiAgLy8gU2Vzc2lvbiBwYXJhbWV0ZXIgaW5pdGlhbGl6YXRpb24KICB0aGlzLmZyb21fdGFnID0gU0lQLlV0aWxzLm5ld1RhZygpOwoKICAvLyBPdXRnb2luZ1Nlc3Npb24gc3BlY2lmaWMgcGFyYW1ldGVycwogIHRoaXMuaXNDYW5jZWxlZCA9IGZhbHNlOwogIHRoaXMucmVjZWl2ZWRfMTAwID0gZmFsc2U7CgogIHRoaXMubWV0aG9kID0gU0lQLkMuSU5WSVRFOwoKICB0aGlzLnJlY2VpdmVOb25JbnZpdGVSZXNwb25zZSA9IHRoaXMucmVjZWl2ZVJlc3BvbnNlOwogIHRoaXMucmVjZWl2ZVJlc3BvbnNlID0gdGhpcy5yZWNlaXZlSW52aXRlUmVzcG9uc2U7CgogIHRoaXMubG9nZ2VyID0gdWEuZ2V0TG9nZ2VyKCdzaXAuaW52aXRlY2xpZW50Y29udGV4dCcpOwoKICBpZiAoc3R1blNlcnZlcnMpIHsKICAgIGljZVNlcnZlcnMgPSBTSVAuVUEuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbFsnc3R1blNlcnZlcnMnXShzdHVuU2VydmVycyk7CiAgICBpZiAoIWljZVNlcnZlcnMpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdHVuU2VydmVyczogJysgc3R1blNlcnZlcnMpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5zdHVuU2VydmVycyA9IGljZVNlcnZlcnM7CiAgICB9CiAgfQoKICBpZiAodHVyblNlcnZlcnMpIHsKICAgIGljZVNlcnZlcnMgPSBTSVAuVUEuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbFsndHVyblNlcnZlcnMnXSh0dXJuU2VydmVycyk7CiAgICBpZiAoIWljZVNlcnZlcnMpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0dXJuU2VydmVyczogJysgdHVyblNlcnZlcnMpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50dXJuU2VydmVycyA9IGljZVNlcnZlcnM7CiAgICB9CiAgfQoKICB1YS5hcHBsaWNhbnRzW3RoaXNdID0gdGhpczsKCiAgdGhpcy5pZCA9IHRoaXMucmVxdWVzdC5jYWxsX2lkICsgdGhpcy5mcm9tX3RhZzsKCiAgLy9Jbml0aWFsaXplIE1lZGlhIFNlc3Npb24KICB0aGlzLm1lZGlhSGFuZGxlciA9IHRoaXMubWVkaWFIYW5kbGVyRmFjdG9yeSh0aGlzLCB7CiAgICBSVENDb25zdHJhaW50czogdGhpcy5SVENDb25zdHJhaW50cywKICAgIHN0dW5TZXJ2ZXJzOiB0aGlzLnN0dW5TZXJ2ZXJzLAogICAgdHVyblNlcnZlcnM6IHRoaXMudHVyblNlcnZlcnMKICB9KTsKCiAgaWYgKHRoaXMubWVkaWFIYW5kbGVyICYmIHRoaXMubWVkaWFIYW5kbGVyLmdldFJlbW90ZVN0cmVhbXMpIHsKICAgIHRoaXMuZ2V0UmVtb3RlU3RyZWFtcyA9IHRoaXMubWVkaWFIYW5kbGVyLmdldFJlbW90ZVN0cmVhbXMuYmluZCh0aGlzLm1lZGlhSGFuZGxlcik7CiAgICB0aGlzLmdldExvY2FsU3RyZWFtcyA9IHRoaXMubWVkaWFIYW5kbGVyLmdldExvY2FsU3RyZWFtcy5iaW5kKHRoaXMubWVkaWFIYW5kbGVyKTsKICB9CgogIFNJUC5VdGlscy5vcHRpb25zT3ZlcnJpZGUob3B0aW9ucywgJ21lZGlhJywgJ21lZGlhQ29uc3RyYWludHMnLCB0cnVlLCB0aGlzLmxvZ2dlciwgdGhpcy51YS5jb25maWd1cmF0aW9uLm1lZGlhKTsKICB0aGlzLm1lZGlhSGludCA9IG9wdGlvbnMubWVkaWE7Cn07CgpJbnZpdGVDbGllbnRDb250ZXh0LnByb3RvdHlwZSA9IHsKICBpbnZpdGU6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAvL1NhdmUgdGhlIHNlc3Npb24gaW50byB0aGUgdWEgc2Vzc2lvbnMgY29sbGVjdGlvbi4KICAgIC8vTm90ZTogcGxhY2luZyBpbiBjb25zdHJ1Y3RvciBicmVha3MgY2FsbCB0byByZXF1ZXN0LmNhbmNlbCBvbiBjbG9zZS4uLiBVc2VyIGRvZXMgbm90IG5lZWQgdGhpcyBhbnl3YXkKICAgIHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF0gPSB0aGlzOwoKICAgIC8vTm90ZTogZHVlIHRvIHRoZSB3YXkgRmlyZWZveCBoYW5kbGVzIGdVTSBjYWxscywgaXQgaXMgcmVjb21tZW5kZWQgdG8gbWFrZSB0aGUgZ1VNIGNhbGwgYXQgdGhlIGFwcCBsZXZlbAogICAgLy8gYW5kIGhhbmQgc2lwLmpzIGEgc3RyZWFtIGFzIHRoZSBtZWRpYUhpbnQKICAgIGlmICh0aGlzLmludml0ZVdpdGhvdXRTZHApIHsKICAgICAgLy9qdXN0IHNlbmQgYW4gaW52aXRlIHdpdGggbm8gc2RwLi4uCiAgICAgIHRoaXMucmVxdWVzdC5ib2R5ID0gc2VsZi5yZW5kZXJib2R5OwogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0lOVklURV9TRU5UOwogICAgICB0aGlzLnNlbmQoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uKHNlbGYubWVkaWFIaW50KQogICAgICAudGhlbigKICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3Mob2ZmZXIpIHsKICAgICAgICAgIGlmIChzZWxmLmlzQ2FuY2VsZWQgfHwgc2VsZi5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgc2VsZi5oYXNPZmZlciA9IHRydWU7CiAgICAgICAgICBzZWxmLnJlcXVlc3QuYm9keSA9IG9mZmVyOwogICAgICAgICAgc2VsZi5zdGF0dXMgPSBDLlNUQVRVU19JTlZJVEVfU0VOVDsKICAgICAgICAgIHNlbGYuc2VuZCgpOwogICAgICAgIH0sCiAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlKCkgewogICAgICAgICAgaWYgKHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIFRPRE8uLi5mYWlsIG91dAogICAgICAgICAgLy9zZWxmLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTKTsKICAgICAgICAgIC8vc2VsZi5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICBzZWxmLmZhaWxlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICAgIHNlbGYudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgcmVjZWl2ZUludml0ZVJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdmFyIGNhdXNlLCAvL2xvY2FsTWVkaWEsCiAgICAgIHNlc3Npb24gPSB0aGlzLAogICAgICBpZCA9IHJlc3BvbnNlLmNhbGxfaWQgKyByZXNwb25zZS5mcm9tX3RhZyArIHJlc3BvbnNlLnRvX3RhZywKICAgICAgZXh0cmFIZWFkZXJzID0gW10sCiAgICAgIG9wdGlvbnMgPSB7fTsKCiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQgfHwgcmVzcG9uc2UubWV0aG9kICE9PSBTSVAuQy5JTlZJVEUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh0aGlzLmRpYWxvZyAmJiAocmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDw9IDI5OSkpIHsKICAgICAgaWYgKGlkICE9PSB0aGlzLmRpYWxvZy5pZC50b1N0cmluZygpICkgewogICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnLCB0cnVlKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZF0uc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuQUNLLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogU0lQLlV0aWxzLmdlbmVyYXRlRmFrZVNEUChyZXNwb25zZS5ib2R5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZF0uc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuQllFKTsKCiAgICAgICAgLyogTk9URTogVGhpcyBmYWlscyBiZWNhdXNlIHRoZSBmb3JraW5nIHByb3h5IGRvZXMgbm90IHJlY29nbml6ZSB0aGF0IGFuIHVuYW5zd2VyYWJsZQogICAgICAgICAqIGxlZyAoZHVlIHRvIHBlZXJDb25uZWN0aW9uIGxpbWl0YXRpb25zKSBoYXMgYmVlbiBhbnN3ZXJlZCBmaXJzdC4gSWYgeW91ciBmb3JraW5nCiAgICAgICAgICogcHJveHkgZG9lcyBub3QgaGFuZyB1cCBhbGwgdW5hbnN3ZXJlZCBicmFuY2hlcyBvbiB0aGUgZmlyc3QgYnJhbmNoIGFuc3dlcmVkLCByZW1vdmUgdGhpcy4KICAgICAgICAgKi8KICAgICAgICBpZih0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgICAgICB0aGlzLmZhaWxlZChyZXNwb25zZSwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5XRUJSVENfRVJST1IpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoU0lQLkMuQUNLLHtjc2VxOiByZXNwb25zZS5jc2VxfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc0Fuc3dlcikgewogICAgICAgIC8vIGludml0ZSB3L28gc2RwIGlzIHdhaXRpbmcgZm9yIGNhbGxiYWNrCiAgICAgICAgLy9hbiBpbnZpdGUgd2l0aCBzZHAgbXVzdCBnbyBvbiwgYW5kIGhhc0Fuc3dlciBpcyB0cnVlCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9CgogICAgaWYgKHRoaXMuZGlhbG9nICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDwgMjAwKSB7CiAgICAgIC8qCiAgICAgICAgRWFybHkgbWVkaWEgaGFzIGJlZW4gc2V0IHVwIHdpdGggYXQgbGVhc3Qgb25lIG90aGVyIGRpZmZlcmVudCBicmFuY2gsCiAgICAgICAgYnV0IGEgZmluYWwgMnh4IHJlc3BvbnNlIGhhc24ndCBiZWVuIHJlY2VpdmVkCiAgICAgICovCiAgICAgIGlmICh0aGlzLmRpYWxvZy5wcmFja2VkLmluZGV4T2YocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpICE9PSAtMSB8fAogICAgICAgICAgKHRoaXMuZGlhbG9nLnByYWNrZWRbdGhpcy5kaWFsb2cucHJhY2tlZC5sZW5ndGgtMV0gPj0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgJiYgdGhpcy5kaWFsb2cucHJhY2tlZC5sZW5ndGggPiAwKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmVhcmx5RGlhbG9nc1tpZF0gJiYgIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJywgdHJ1ZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5pbmRleE9mKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKSAhPT0gLTEgfHwKICAgICAgICAgICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZFt0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5sZW5ndGgtMV0gPj0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgJiYgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQubGVuZ3RoID4gMCkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSQWNrOiAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgKyAnICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ2NzZXEnKSk7CiAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLnB1c2gocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpOwoKICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnNlbmRSZXF1ZXN0KHRoaXMsIFNJUC5DLlBSQUNLLCB7CiAgICAgICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICAgICAgYm9keTogU0lQLlV0aWxzLmdlbmVyYXRlRmFrZVNEUChyZXNwb25zZS5ib2R5KQogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFByb2NlZWQgdG8gY2FuY2VsbGF0aW9uIGlmIHRoZSB1c2VyIHJlcXVlc3RlZC4KICAgIGlmKHRoaXMuaXNDYW5jZWxlZCkgewogICAgICBpZihyZXNwb25zZS5zdGF0dXNfY29kZSA+PSAxMDAgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPCAyMDApIHsKICAgICAgICB0aGlzLnJlcXVlc3QuY2FuY2VsKHRoaXMuY2FuY2VsUmVhc29uKTsKICAgICAgICB0aGlzLmNhbmNlbGVkKG51bGwpOwogICAgICB9IGVsc2UgaWYocmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDwgMjk5KSB7CiAgICAgICAgdGhpcy5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UpOwogICAgICAgIHRoaXMuZW1pdCgnYnllJywgdGhpcy5yZXF1ZXN0KTsKICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXNfY29kZSA+PSAzMDApIHsKICAgICAgICBjYXVzZSA9IFNJUC5DLlJFQVNPTl9QSFJBU0VbcmVzcG9uc2Uuc3RhdHVzX2NvZGVdIHx8IFNJUC5DLmNhdXNlcy5DQU5DRUxFRDsKICAgICAgICB0aGlzLnJlamVjdGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIGNhdXNlKTsKICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVzcG9uc2UsIGNhdXNlKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9CgogICAgc3dpdGNoKHRydWUpIHsKICAgICAgY2FzZSAvXjEwMCQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgIHRoaXMucmVjZWl2ZWRfMTAwID0gdHJ1ZTsKICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICgvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpKToKICAgICAgICAvLyBEbyBub3RoaW5nIHdpdGggMXh4IHJlc3BvbnNlcyB3aXRob3V0IFRvIHRhZy4KICAgICAgICBpZighcmVzcG9uc2UudG9fdGFnKSB7CiAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCcxeHggcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCB0byB0YWcnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgLy8gQ3JlYXRlIEVhcmx5IERpYWxvZyBpZiAxWFggY29tZXMgd2l0aCBjb250YWN0CiAgICAgICAgaWYocmVzcG9uc2UuaGFzSGVhZGVyKCdjb250YWN0JykpIHsKICAgICAgICAgIC8vIEFuIGVycm9yIG9uIGRpYWxvZyBjcmVhdGlvbiB3aWxsIGZpcmUgJ2ZhaWxlZCcgZXZlbnQKICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnLCB0cnVlKSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfMVhYX1JFQ0VJVkVEOwoKICAgICAgICBpZihyZXNwb25zZS5oYXNIZWFkZXIoJ3JlcXVpcmUnKSAmJgogICAgICAgICAgIHJlc3BvbnNlLmdldEhlYWRlcigncmVxdWlyZScpLmluZGV4T2YoJzEwMHJlbCcpICE9PSAtMSkgewoKICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhpcy5kaWFsb2cgaXMgYWxyZWFkeSBjb25maXJtZWQKICAgICAgICAgIGlmICh0aGlzLmRpYWxvZyB8fCAhdGhpcy5lYXJseURpYWxvZ3NbaWRdKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5pbmRleE9mKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKSAhPT0gLTEgfHwKICAgICAgICAgICAgICAodGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWRbdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQubGVuZ3RoLTFdID49IHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpICYmIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBTSVAuSGFja3MuRmlyZWZveC5jYW5ub3RIYW5kbGVFeHRyYVdoaXRlc3BhY2UocmVzcG9uc2UpOwogICAgICAgICAgU0lQLkhhY2tzLkFsbEJyb3dzZXJzLm1hc2tEdGxzKHJlc3BvbnNlKTsKCiAgICAgICAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JBY2s6ICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSArICcgJyArIHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKTsKICAgICAgICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CiAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5zZW5kUmVxdWVzdCh0aGlzLCBTSVAuQy5QUkFDSywgewogICAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwoKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNPZmZlcikgewogICAgICAgICAgICBpZiAoIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJykpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmhhc0Fuc3dlciA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CgogICAgICAgICAgICB0aGlzLm1lZGlhSGFuZGxlci5zZXREZXNjcmlwdGlvbihyZXNwb25zZS5ib2R5KQogICAgICAgICAgICAudGhlbigKICAgICAgICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MgKCkgewogICAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JBY2s6ICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSArICcgJyArIHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKTsKCiAgICAgICAgICAgICAgICBzZXNzaW9uLnNlbmRSZXF1ZXN0KFNJUC5DLlBSQUNLLCB7CiAgICAgICAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzLAogICAgICAgICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgICAgIHNlc3Npb24ubXV0ZSgpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdGF0dXMgPT09IEMuU1RBVFVTX0VBUkxZX01FRElBKSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEgPSBzZXNzaW9uLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhOwogICAgICAgICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0qLwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlIChlKSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uLmxvZ2dlci53YXJuKGUpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UsIDQ4OCwgJ05vdCBBY2NlcHRhYmxlIEhlcmUnKTsKICAgICAgICAgICAgICAgIHNlc3Npb24uZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgZWFybHlEaWFsb2cgPSB0aGlzLmVhcmx5RGlhbG9nc1tpZF07CiAgICAgICAgICAgIHZhciBlYXJseU1lZGlhID0gZWFybHlEaWFsb2cubWVkaWFIYW5kbGVyOwoKICAgICAgICAgICAgZWFybHlEaWFsb2cucHJhY2tlZC5wdXNoKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKTsKCiAgICAgICAgICAgIGVhcmx5TWVkaWEuc2V0RGVzY3JpcHRpb24ocmVzcG9uc2UuYm9keSkKICAgICAgICAgICAgLnRoZW4oZWFybHlNZWRpYS5nZXREZXNjcmlwdGlvbi5iaW5kKGVhcmx5TWVkaWEsIHNlc3Npb24ubWVkaWFIaW50KSkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gb25TdWNjZXNzKHNkcCkgewogICAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCcpOwogICAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSQWNrOiAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgKyAnICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ2NzZXEnKSk7CiAgICAgICAgICAgICAgZWFybHlEaWFsb2cuc2VuZFJlcXVlc3Qoc2Vzc2lvbiwgU0lQLkMuUFJBQ0ssIHsKICAgICAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzLAogICAgICAgICAgICAgICAgYm9keTogc2RwCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2Vzc2lvbi5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgICBzZXNzaW9uLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gb25GYWlsdXJlKGUpIHsKICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFNJUC5FeGNlcHRpb25zLkdldERlc2NyaXB0aW9uRXJyb3IpIHsKICAgICAgICAgICAgICAgIGVhcmx5RGlhbG9nLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CiAgICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gVE9ETyAtIGZhaWwgb3V0IG9uIGVycm9yCiAgICAgICAgICAgICAgICAvLyBzZXNzaW9uLmZhaWxlZChndW0gZXJyb3IpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICAgICAgICBzZXNzaW9uLnRlcm1pbmF0ZWQobnVsbCwgU0lQLkMuY2F1c2VzLldFQlJUQ19FUlJPUik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVhcmx5RGlhbG9nLnByYWNrZWQuc3BsaWNlKGVhcmx5RGlhbG9nLnByYWNrZWQuaW5kZXhPZihyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSksIDEpOwogICAgICAgICAgICAgICAgLy8gQ291bGQgbm90IHNldCByZW1vdGUgZGVzY3JpcHRpb24KICAgICAgICAgICAgICAgIHNlc3Npb24ubG9nZ2VyLndhcm4oJ2ludmFsaWQgU0RQJyk7CiAgICAgICAgICAgICAgICBzZXNzaW9uLmxvZ2dlci53YXJuKGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXNwb25zZSk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgdmFyIGNzZXEgPSB0aGlzLnJlcXVlc3QuY3NlcSArICcgJyArIHRoaXMucmVxdWVzdC5tZXRob2Q7CiAgICAgICAgaWYgKGNzZXEgIT09IHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfRUFSTFlfTUVESUEgJiYgdGhpcy5kaWFsb2cpIHsKICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgdGhpcy51bm11dGUoKTsKICAgICAgICAgIC8qbG9jYWxNZWRpYSA9IHRoaXMubWVkaWFIYW5kbGVyLmxvY2FsTWVkaWE7CiAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgbG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgIH0qLwogICAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICAgICAgaWYgKHRoaXMucmVuZGVyYm9keSkgewogICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgdGhpcy5yZW5kZXJ0eXBlKTsKICAgICAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBleHRyYUhlYWRlcnM7CiAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IHRoaXMucmVuZGVyYm9keTsKICAgICAgICAgIH0KICAgICAgICAgIG9wdGlvbnMuY3NlcSA9IHJlc3BvbnNlLmNzZXE7CiAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSywgb3B0aW9ucyk7CiAgICAgICAgICB0aGlzLmFjY2VwdGVkKHJlc3BvbnNlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoaXMuZGlhbG9nIGlzIGFscmVhZHkgY29uZmlybWVkCiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIFNJUC5IYWNrcy5GaXJlZm94LmNhbm5vdEhhbmRsZUV4dHJhV2hpdGVzcGFjZShyZXNwb25zZSk7CiAgICAgICAgU0lQLkhhY2tzLkFsbEJyb3dzZXJzLm1hc2tEdGxzKHJlc3BvbnNlKTsKCiAgICAgICAgLy8gVGhpcyBpcyBhbiBpbnZpdGUgd2l0aG91dCBzZHAKICAgICAgICBpZiAoIXRoaXMuaGFzT2ZmZXIpIHsKICAgICAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0gJiYgdGhpcy5lYXJseURpYWxvZ3NbaWRdLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhKSB7CiAgICAgICAgICAgIC8vUkVWSVNJVAogICAgICAgICAgICB0aGlzLmhhc09mZmVyID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5oYXNBbnN3ZXIgPSB0cnVlOwogICAgICAgICAgICB0aGlzLm1lZGlhSGFuZGxlciA9IHRoaXMuZWFybHlEaWFsb2dzW2lkXS5tZWRpYUhhbmRsZXI7CiAgICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnKSkgewogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSywge2NzZXE6cmVzcG9uc2UuY3NlcX0pOwoKICAgICAgICAgICAgdGhpcy51bm11dGUoKTsKICAgICAgICAgICAgLyoKICAgICAgICAgICAgbG9jYWxNZWRpYSA9IHNlc3Npb24ubWVkaWFIYW5kbGVyLmxvY2FsTWVkaWE7CiAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBsb2NhbE1lZGlhLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRydWU7CiAgICAgICAgICAgIH0qLwogICAgICAgICAgICB0aGlzLmFjY2VwdGVkKHJlc3BvbnNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmKCFyZXNwb25zZS5ib2R5KSB7CiAgICAgICAgICAgICAgdGhpcy5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UsIDQwMCwgJ01pc3Npbmcgc2Vzc2lvbiBkZXNjcmlwdGlvbicpOwogICAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJykpIHsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmhhc09mZmVyID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5tZWRpYUhhbmRsZXIuc2V0RGVzY3JpcHRpb24ocmVzcG9uc2UuYm9keSkKICAgICAgICAgICAgLnRoZW4odGhpcy5tZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24uYmluZCh0aGlzLm1lZGlhSGFuZGxlciwgdGhpcy5tZWRpYUhpbnQpKQogICAgICAgICAgICAudGhlbihmdW5jdGlvbiBvblN1Y2Nlc3Moc2RwKSB7CiAgICAgICAgICAgICAgLy92YXIgbG9jYWxNZWRpYTsKICAgICAgICAgICAgICBpZihzZXNzaW9uLmlzQ2FuY2VsZWQgfHwgc2Vzc2lvbi5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNkcCA9IFNJUC5IYWNrcy5GaXJlZm94Lmhhc01pc3NpbmdDTGluZUluU0RQKHNkcCk7CgogICAgICAgICAgICAgIHNlc3Npb24uc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgICAgIHNlc3Npb24uaGFzQW5zd2VyID0gdHJ1ZTsKCiAgICAgICAgICAgICAgc2Vzc2lvbi51bm11dGUoKTsKICAgICAgICAgICAgICAvKmxvY2FsTWVkaWEgPSBzZXNzaW9uLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhOwogICAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9Ki8KICAgICAgICAgICAgICBzZXNzaW9uLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSyx7CiAgICAgICAgICAgICAgICBib2R5OiBzZHAsCiAgICAgICAgICAgICAgICBleHRyYUhlYWRlcnM6WydDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcCddLAogICAgICAgICAgICAgICAgY3NlcTpyZXNwb25zZS5jc2VxCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2Vzc2lvbi5hY2NlcHRlZChyZXNwb25zZSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiBvbkZhaWx1cmUoZSkgewogICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgU0lQLkV4Y2VwdGlvbnMuR2V0RGVzY3JpcHRpb25FcnJvcikgewogICAgICAgICAgICAgICAgLy8gVE9ETyBkbyBzb21ldGhpbmcgaGVyZQogICAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dnZXIud2FybigidGhlcmUgd2FzIGEgcHJvYmxlbSIpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZXNzaW9uLmxvZ2dlci53YXJuKCdpbnZhbGlkIFNEUCcpOwogICAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlcGx5KDQ4OCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzQW5zd2VyKXsKICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmJvZHkpIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRlbnQtVHlwZTogJyArIHNlc3Npb24ucmVuZGVydHlwZSk7CiAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwogICAgICAgICAgICBvcHRpb25zLmJvZHkgPSB0aGlzLnJlbmRlcmJvZHk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnNlbmRSZXF1ZXN0KFNJUC5DLkFDSywgb3B0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmKCFyZXNwb25zZS5ib2R5KSB7CiAgICAgICAgICAgIHRoaXMuYWNjZXB0QW5kVGVybWluYXRlKHJlc3BvbnNlLCA0MDAsICdNaXNzaW5nIHNlc3Npb24gZGVzY3JpcHRpb24nKTsKICAgICAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnKSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaGFzQW5zd2VyID0gdHJ1ZTsKICAgICAgICAgIHRoaXMubWVkaWFIYW5kbGVyLnNldERlc2NyaXB0aW9uKHJlc3BvbnNlLmJvZHkpCiAgICAgICAgICAudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24gb25TdWNjZXNzICgpIHsKICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHt9Oy8vLGxvY2FsTWVkaWE7CiAgICAgICAgICAgICAgc2Vzc2lvbi5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CiAgICAgICAgICAgICAgc2Vzc2lvbi51bm11dGUoKTsKICAgICAgICAgICAgICAvKmxvY2FsTWVkaWEgPSBzZXNzaW9uLm1lZGlhSGFuZGxlci5sb2NhbE1lZGlhOwogICAgICAgICAgICAgIGlmIChsb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbG9jYWxNZWRpYS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobG9jYWxNZWRpYS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxvY2FsTWVkaWEuZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9Ki8KICAgICAgICAgICAgICBpZiAoc2Vzc2lvbi5yZW5kZXJib2R5KSB7CiAgICAgICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgc2Vzc2lvbi5yZW5kZXJ0eXBlKTsKICAgICAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwogICAgICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gc2Vzc2lvbi5yZW5kZXJib2R5OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBvcHRpb25zLmNzZXEgPSByZXNwb25zZS5jc2VxOwogICAgICAgICAgICAgIHNlc3Npb24uc2VuZFJlcXVlc3QoU0lQLkMuQUNLLCBvcHRpb25zKTsKICAgICAgICAgICAgICBzZXNzaW9uLmFjY2VwdGVkKHJlc3BvbnNlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnVuY3Rpb24gb25GYWlsdXJlIChlKSB7CiAgICAgICAgICAgICAgc2Vzc2lvbi5sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICBzZXNzaW9uLmFjY2VwdEFuZFRlcm1pbmF0ZShyZXNwb25zZSwgNDg4LCAnTm90IEFjY2VwdGFibGUgSGVyZScpOwogICAgICAgICAgICAgIHNlc3Npb24uZmFpbGVkKHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgfQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgY2F1c2UgPSBTSVAuVXRpbHMuc2lwRXJyb3JDYXVzZShyZXNwb25zZS5zdGF0dXNfY29kZSk7CiAgICAgICAgdGhpcy5yZWplY3RlZChyZXNwb25zZSwgY2F1c2UpOwogICAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICB9CiAgfSwKCiAgY2FuY2VsOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICAgIH0KCiAgICB0aGlzLmxvZ2dlci5sb2coJ2NhbmNlbGluZyBSVENTZXNzaW9uJyk7CgogICAgdmFyIGNhbmNlbF9yZWFzb24gPSBTSVAuVXRpbHMuZ2V0Q2FuY2VsUmVhc29uKG9wdGlvbnMuc3RhdHVzX2NvZGUsIG9wdGlvbnMucmVhc29uX3BocmFzZSk7CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfTlVMTCB8fAogICAgICAgICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfSU5WSVRFX1NFTlQgJiYgIXRoaXMucmVjZWl2ZWRfMTAwKSkgewogICAgICB0aGlzLmlzQ2FuY2VsZWQgPSB0cnVlOwogICAgICB0aGlzLmNhbmNlbFJlYXNvbiA9IGNhbmNlbF9yZWFzb247CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19JTlZJVEVfU0VOVCB8fAogICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfMVhYX1JFQ0VJVkVEIHx8CiAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19FQVJMWV9NRURJQSkgewogICAgICB0aGlzLnJlcXVlc3QuY2FuY2VsKGNhbmNlbF9yZWFzb24pOwogICAgfQoKICAgIHJldHVybiB0aGlzLmNhbmNlbGVkKCk7CiAgfSwKCiAgdGVybWluYXRlOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0sgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aGlzLmJ5ZShvcHRpb25zKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2FuY2VsKG9wdGlvbnMpOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sCgogIHJlY2VpdmVSZXF1ZXN0OiBmdW5jdGlvbihyZXF1ZXN0KSB7CiAgICAvLyBJQ0MgUkVDRUlWRSBSRVFVRVNUCgogICAgLy8gUmVqZWN0IENBTkNFTHMKICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gU0lQLkMuQ0FOQ0VMKSB7CiAgICAgIC8vIFRPRE87IG1ha2UgdGhpcyBhIHN3aXRjaCB3aGVuIGl0IGdldHMgYWRkZWQKICAgIH0KCiAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IFNJUC5DLkFDSyAmJiB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmFja1RpbWVyKTsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuaW52aXRlMnh4VGltZXIpOwogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0NPTkZJUk1FRDsKICAgICAgdGhpcy51bm11dGUoKTsKCiAgICAgIHRoaXMuYWNjZXB0ZWQoKTsKICAgIH0KCiAgICByZXR1cm4gU2Vzc2lvbi5wcm90b3R5cGUucmVjZWl2ZVJlcXVlc3QuYXBwbHkodGhpcywgW3JlcXVlc3RdKTsKICB9LAoKICBvblRyYW5zcG9ydEVycm9yOiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIFNJUC5DLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKTsKICAgIH0KICB9LAoKICBvblJlcXVlc3RUaW1lb3V0OiBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgdGhpcy5mYWlsZWQobnVsbCwgU0lQLkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH0KICB9Cgp9OwoKU0lQLkludml0ZUNsaWVudENvbnRleHQgPSBJbnZpdGVDbGllbnRDb250ZXh0OwoKfTsKCn0seyIuL1Nlc3Npb24vRFRNRiI6MzB9XSwzMDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgRFRNRgogKi8KCi8qKgogKiBAY2xhc3MgRFRNRgogKiBAcGFyYW0ge1NJUC5TZXNzaW9ufSBzZXNzaW9uCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKCnZhciBEVE1GLAogIEMgPSB7CiAgICBNSU5fRFVSQVRJT046ICAgICAgICAgICAgNzAsCiAgICBNQVhfRFVSQVRJT046ICAgICAgICAgICAgNjAwMCwKICAgIERFRkFVTFRfRFVSQVRJT046ICAgICAgICAxMDAsCiAgICBNSU5fSU5URVJfVE9ORV9HQVA6ICAgICAgNTAsCiAgICBERUZBVUxUX0lOVEVSX1RPTkVfR0FQOiAgNTAwCiAgfTsKCkRUTUYgPSBmdW5jdGlvbihzZXNzaW9uLCB0b25lLCBvcHRpb25zKSB7CiAgdmFyIGR1cmF0aW9uLCBpbnRlclRvbmVHYXA7CgogIGlmICh0b25lID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggYXJndW1lbnRzJyk7CiAgfQoKICB0aGlzLmxvZ2dlciA9IHNlc3Npb24udWEuZ2V0TG9nZ2VyKCdzaXAuaW52aXRlY29udGV4dC5kdG1mJywgc2Vzc2lvbi5pZCk7CiAgdGhpcy5vd25lciA9IHNlc3Npb247CiAgdGhpcy5kaXJlY3Rpb24gPSBudWxsOwoKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICBkdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb24gfHwgbnVsbDsKICBpbnRlclRvbmVHYXAgPSBvcHRpb25zLmludGVyVG9uZUdhcCB8fCBudWxsOwoKICAvLyBDaGVjayB0b25lIHR5cGUKICBpZiAodHlwZW9mIHRvbmUgPT09ICdzdHJpbmcnICkgewogICAgdG9uZSA9IHRvbmUudG9VcHBlckNhc2UoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiB0b25lID09PSAnbnVtYmVyJykgewogICAgdG9uZSA9IHRvbmUudG9TdHJpbmcoKTsKICB9IGVsc2UgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCB0b25lOiAnKyB0b25lKTsKICB9CgogIC8vIENoZWNrIHRvbmUgdmFsdWUKICBpZiAoIXRvbmUubWF0Y2goL15bMC05QS1EIypdJC8pKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRvbmU6ICcrIHRvbmUpOwogIH0gZWxzZSB7CiAgICB0aGlzLnRvbmUgPSB0b25lOwogIH0KCiAgLy8gQ2hlY2sgZHVyYXRpb24KICBpZiAoZHVyYXRpb24gJiYgIVNJUC5VdGlscy5pc0RlY2ltYWwoZHVyYXRpb24pKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHRvbmUgZHVyYXRpb246ICcrIGR1cmF0aW9uKTsKICB9IGVsc2UgaWYgKCFkdXJhdGlvbikgewogICAgZHVyYXRpb24gPSBEVE1GLkMuREVGQVVMVF9EVVJBVElPTjsKICB9IGVsc2UgaWYgKGR1cmF0aW9uIDwgRFRNRi5DLk1JTl9EVVJBVElPTikgewogICAgdGhpcy5sb2dnZXIud2FybignImR1cmF0aW9uIiB2YWx1ZSBpcyBsb3dlciB0aGFuIHRoZSBtaW5pbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJysgRFRNRi5DLk1JTl9EVVJBVElPTisgJyBtaWxsaXNlY29uZHMnKTsKICAgIGR1cmF0aW9uID0gRFRNRi5DLk1JTl9EVVJBVElPTjsKICB9IGVsc2UgaWYgKGR1cmF0aW9uID4gRFRNRi5DLk1BWF9EVVJBVElPTikgewogICAgdGhpcy5sb2dnZXIud2FybignImR1cmF0aW9uIiB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gdGhlIG1heGltdW0gYWxsb3dlZCwgc2V0dGluZyBpdCB0byAnKyBEVE1GLkMuTUFYX0RVUkFUSU9OICsnIG1pbGxpc2Vjb25kcycpOwogICAgZHVyYXRpb24gPSBEVE1GLkMuTUFYX0RVUkFUSU9OOwogIH0gZWxzZSB7CiAgICBkdXJhdGlvbiA9IE1hdGguYWJzKGR1cmF0aW9uKTsKICB9CiAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uOwoKICAvLyBDaGVjayBpbnRlclRvbmVHYXAKICBpZiAoaW50ZXJUb25lR2FwICYmICFTSVAuVXRpbHMuaXNEZWNpbWFsKGludGVyVG9uZUdhcCkpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaW50ZXJUb25lR2FwOiAnKyBpbnRlclRvbmVHYXApOwogIH0gZWxzZSBpZiAoIWludGVyVG9uZUdhcCkgewogICAgaW50ZXJUb25lR2FwID0gRFRNRi5DLkRFRkFVTFRfSU5URVJfVE9ORV9HQVA7CiAgfSBlbHNlIGlmIChpbnRlclRvbmVHYXAgPCBEVE1GLkMuTUlOX0lOVEVSX1RPTkVfR0FQKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCciaW50ZXJUb25lR2FwIiB2YWx1ZSBpcyBsb3dlciB0aGFuIHRoZSBtaW5pbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJysgRFRNRi5DLk1JTl9JTlRFUl9UT05FX0dBUCArJyBtaWxsaXNlY29uZHMnKTsKICAgIGludGVyVG9uZUdhcCA9IERUTUYuQy5NSU5fSU5URVJfVE9ORV9HQVA7CiAgfSBlbHNlIHsKICAgIGludGVyVG9uZUdhcCA9IE1hdGguYWJzKGludGVyVG9uZUdhcCk7CiAgfQogIHRoaXMuaW50ZXJUb25lR2FwID0gaW50ZXJUb25lR2FwOwp9OwpEVE1GLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU0lQLkV2ZW50RW1pdHRlci5wcm90b3R5cGUpOwoKCkRUTUYucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdmFyIGV4dHJhSGVhZGVycywgYm9keTsKCiAgdGhpcy5kaXJlY3Rpb24gPSAnb3V0Z29pbmcnOwoKICAvLyBDaGVjayBSVENTZXNzaW9uIFN0YXR1cwogIGlmICh0aGlzLm93bmVyLnN0YXR1cyAhPT0gU0lQLlNlc3Npb24uQy5TVEFUVVNfQ09ORklSTUVEICYmCiAgICB0aGlzLm93bmVyLnN0YXR1cyAhPT0gU0lQLlNlc3Npb24uQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5vd25lci5zdGF0dXMpOwogIH0KCiAgLy8gR2V0IERUTUYgb3B0aW9ucwogIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogIGV4dHJhSGVhZGVycyA9IG9wdGlvbnMuZXh0cmFIZWFkZXJzID8gb3B0aW9ucy5leHRyYUhlYWRlcnMuc2xpY2UoKSA6IFtdOwoKICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9kdG1mLXJlbGF5Jyk7CgogIGJvZHkgPSAiU2lnbmFsPSAiICsgdGhpcy50b25lICsgIlxyXG4iOwogIGJvZHkgKz0gIkR1cmF0aW9uPSAiICsgdGhpcy5kdXJhdGlvbjsKCiAgdGhpcy5yZXF1ZXN0ID0gdGhpcy5vd25lci5kaWFsb2cuc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuSU5GTywgewogICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICBib2R5OiBib2R5CiAgfSk7CgogIHRoaXMub3duZXIuZW1pdCgnZHRtZicsIHRoaXMucmVxdWVzdCwgdGhpcyk7Cn07CgovKioKICogQHByaXZhdGUKICovCkRUTUYucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgdmFyIGNhdXNlOwoKICBzd2l0Y2godHJ1ZSkgewogICAgY2FzZSAvXjFbMC05XXsyfSQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAvLyBJZ25vcmUgcHJvdmlzaW9uYWwgcmVzcG9uc2VzLgogICAgICBicmVhazsKCiAgICBjYXNlIC9eMlswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgIHRoaXMuZW1pdCgnc3VjY2VlZGVkJywgewogICAgICAgIG9yaWdpbmF0b3I6ICdyZW1vdGUnLAogICAgICAgIHJlc3BvbnNlOiByZXNwb25zZQogICAgICB9KTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgY2F1c2UgPSBTSVAuVXRpbHMuc2lwRXJyb3JDYXVzZShyZXNwb25zZS5zdGF0dXNfY29kZSk7CiAgICAgIHRoaXMuZW1pdCgnZmFpbGVkJywgcmVzcG9uc2UsIGNhdXNlKTsKICAgICAgYnJlYWs7CiAgfQp9OwoKLyoqCiAqIEBwcml2YXRlCiAqLwpEVE1GLnByb3RvdHlwZS5vblJlcXVlc3RUaW1lb3V0ID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5lbWl0KCdmYWlsZWQnLCBudWxsLCBTSVAuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICB0aGlzLm93bmVyLm9uUmVxdWVzdFRpbWVvdXQoKTsKfTsKCi8qKgogKiBAcHJpdmF0ZQogKi8KRFRNRi5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvciA9IGZ1bmN0aW9uKCkgewogIHRoaXMuZW1pdCgnZmFpbGVkJywgbnVsbCwgU0lQLkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogIHRoaXMub3duZXIub25UcmFuc3BvcnRFcnJvcigpOwp9OwoKLyoqCiAqIEBwcml2YXRlCiAqLwpEVE1GLnByb3RvdHlwZS5vbkRpYWxvZ0Vycm9yID0gZnVuY3Rpb24ocmVzcG9uc2UpIHsKICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlLCBTSVAuQy5jYXVzZXMuRElBTE9HX0VSUk9SKTsKICB0aGlzLm93bmVyLm9uRGlhbG9nRXJyb3IocmVzcG9uc2UpOwp9OwoKLyoqCiAqIEBwcml2YXRlCiAqLwpEVE1GLnByb3RvdHlwZS5pbml0X2luY29taW5nID0gZnVuY3Rpb24ocmVxdWVzdCkgewogIHRoaXMuZGlyZWN0aW9uID0gJ2luY29taW5nJzsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwoKICByZXF1ZXN0LnJlcGx5KDIwMCk7CgogIGlmICghdGhpcy50b25lIHx8ICF0aGlzLmR1cmF0aW9uKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCdpbnZhbGlkIElORk8gRFRNRiByZWNlaXZlZCwgZGlzY2FyZGVkJyk7CiAgfSBlbHNlIHsKICAgIHRoaXMub3duZXIuZW1pdCgnZHRtZicsIHJlcXVlc3QsIHRoaXMpOwogIH0KfTsKCkRUTUYuQyA9IEM7CnJldHVybiBEVE1GOwp9OwoKfSx7fV0sMzE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewoidXNlIHN0cmljdCI7CgovKioKICogQGZpbGVvdmVydmlldyBTSVAgU3Vic2NyaWJlciAoU0lQLVNwZWNpZmljIEV2ZW50IE5vdGlmaWNhdGlvbnMgUkZDNjY2NSkKICovCgovKioKICogQGF1Z21lbnRzIFNJUAogKiBAY2xhc3MgQ2xhc3MgY3JlYXRpbmcgYSBTSVAgU3Vic2NyaXB0aW9uLgogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQKSB7ClNJUC5TdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAodWEsIHRhcmdldCwgZXZlbnQsIG9wdGlvbnMpIHsKICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShvcHRpb25zIHx8IE9iamVjdC5wcm90b3R5cGUpOwogIHRoaXMuZXh0cmFIZWFkZXJzID0gb3B0aW9ucy5leHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CgogIHRoaXMuaWQgPSBudWxsOwogIHRoaXMuc3RhdGUgPSAnaW5pdCc7CgogIGlmICghZXZlbnQpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V2ZW50IG5lY2Vzc2FyeSB0byBjcmVhdGUgYSBzdWJzY3JpcHRpb24uJyk7CiAgfSBlbHNlIHsKICAgIC8vVE9ETzogY2hlY2sgZm9yIHZhbGlkIGV2ZW50cyBoZXJlIHByb2JhYmx5IG1ha2UgYSBsaXN0IGluIFNJUC5DOyBvciBsZWF2ZSBpdCB1cCB0byBhcHAgdG8gY2hlY2s/CiAgICAvL1RoZSBjaGVjayBtYXkgbmVlZCB0by9zaG91bGQgcHJvYmFibHkgb2NjdXIgb24gdGhlIG90aGVyIHNpZGUsCiAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7CiAgfQoKICBpZih0eXBlb2Ygb3B0aW9ucy5leHBpcmVzICE9PSAnbnVtYmVyJyl7CiAgICB1YS5sb2dnZXIud2FybignZXhwaXJlcyBtdXN0IGJlIGEgbnVtYmVyLiBVc2luZyBkZWZhdWx0IG9mIDM2MDAuJyk7CiAgICB0aGlzLmV4cGlyZXMgPSAzNjAwOwogIH0gZWxzZSB7CiAgICB0aGlzLmV4cGlyZXMgPSBvcHRpb25zLmV4cGlyZXM7CiAgfQoKICBvcHRpb25zLmV4dHJhSGVhZGVycy5wdXNoKCdFdmVudDogJyArIHRoaXMuZXZlbnQpOwogIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goJ0V4cGlyZXM6ICcgKyB0aGlzLmV4cGlyZXMpOwoKICBpZiAob3B0aW9ucy5ib2R5KSB7CiAgICB0aGlzLmJvZHkgPSBvcHRpb25zLmJvZHk7CiAgfQoKICB0aGlzLmNvbnRhY3QgPSB1YS5jb250YWN0LnRvU3RyaW5nKCk7CgogIG9wdGlvbnMuZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgb3B0aW9ucy5leHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcrIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKCiAgU0lQLlV0aWxzLmF1Z21lbnQodGhpcywgU0lQLkNsaWVudENvbnRleHQsIFt1YSwgU0lQLkMuU1VCU0NSSUJFLCB0YXJnZXQsIG9wdGlvbnNdKTsKCiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5zdWJzY3JpcHRpb24nKTsKCiAgdGhpcy5kaWFsb2cgPSBudWxsOwogIHRoaXMudGltZXJzID0ge046IG51bGwsIHN1Yl9kdXJhdGlvbjogbnVsbH07CiAgdGhpcy5lcnJvckNvZGVzICA9IFs0MDQsNDA1LDQxMCw0MTYsNDgwLDQ4MSw0ODIsNDgzLDQ4NCw0ODUsNDg5LDUwMSw2MDRdOwp9OwoKU0lQLlN1YnNjcmlwdGlvbi5wcm90b3R5cGUgPSB7CiAgc3Vic2NyaWJlOiBmdW5jdGlvbigpIHsKICAgIHZhciBzdWIgPSB0aGlzOwoKICAgICAvL3RoZXNlIHN0YXRlcyBwb2ludCB0byBhbiBleGlzdGluZyBzdWJzY3JpcHRpb24sIG5vIHN1YnNjcmliZSBpcyBuZWNlc3NhcnkKICAgIGlmICh0aGlzLnN0YXRlID09PSAnYWN0aXZlJykgewogICAgICB0aGlzLnJlZnJlc2goKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09ICdub3RpZnlfd2FpdCcpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuc3ViX2R1cmF0aW9uKTsKICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLk4pOwogICAgdGhpcy50aW1lcnMuTiA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChzdWIudGltZXJfZmlyZS5iaW5kKHN1YiksIFNJUC5UaW1lcnMuVElNRVJfTik7CgogICAgdGhpcy5zZW5kKCk7CgogICAgdGhpcy5zdGF0ZSA9ICdub3RpZnlfd2FpdCc7CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgcmVmcmVzaDogZnVuY3Rpb24gKCkgewogICAgaWYgKHRoaXMuc3RhdGUgPT09ICd0ZXJtaW5hdGVkJyB8fCB0aGlzLnN0YXRlID09PSAncGVuZGluZycgfHwgdGhpcy5zdGF0ZSA9PT0gJ25vdGlmeV93YWl0JykgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5kaWFsb2cuc2VuZFJlcXVlc3QodGhpcywgU0lQLkMuU1VCU0NSSUJFLCB7CiAgICAgIGV4dHJhSGVhZGVyczogdGhpcy5leHRyYUhlYWRlcnMsCiAgICAgIGJvZHk6IHRoaXMuYm9keQogICAgfSk7CiAgfSwKCiAgcmVjZWl2ZVJlc3BvbnNlOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdmFyIGV4cGlyZXMsIHN1YiA9IHRoaXMsCiAgICAgICAgY2F1c2UgPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKHJlc3BvbnNlLnN0YXR1c19jb2RlKTsKCiAgICBpZiAoKHRoaXMuc3RhdGUgPT09ICdub3RpZnlfd2FpdCcgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMzAwKSB8fAogICAgICAgICh0aGlzLnN0YXRlICE9PSAnbm90aWZ5X3dhaXQnICYmIHRoaXMuZXJyb3JDb2Rlcy5pbmRleE9mKHJlc3BvbnNlLnN0YXR1c19jb2RlKSAhPT0gLTEpKSB7CiAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBudWxsKTsKICAgIH0gZWxzZSBpZiAoL14yWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKSl7CiAgICAgIGV4cGlyZXMgPSByZXNwb25zZS5nZXRIZWFkZXIoJ0V4cGlyZXMnKTsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuTik7CgogICAgICBpZiAodGhpcy5jcmVhdGVDb25maXJtZWREaWFsb2cocmVzcG9uc2UsJ1VBQycpKSB7CiAgICAgICAgdGhpcy5pZCA9IHRoaXMuZGlhbG9nLmlkLnRvU3RyaW5nKCk7CiAgICAgICAgdGhpcy51YS5zdWJzY3JpcHRpb25zW3RoaXMuaWRdID0gdGhpczsKICAgICAgICB0aGlzLmVtaXQoJ2FjY2VwdGVkJywgcmVzcG9uc2UsIGNhdXNlKTsKICAgICAgICAvLyBVUERBVEUgUk9VVEUgU0VUIFRPIEJFIEJBQ0tXQVJEUyBDT01QQVRJQkxFPwogICAgICB9CgogICAgICBpZiAoZXhwaXJlcyAmJiBleHBpcmVzIDw9IHRoaXMuZXhwaXJlcykgewogICAgICAgIC8vIFByZXNlcnZlIG5ldyBleHBpcmVzIHZhbHVlIGZvciBzdWJzZXF1ZW50IHJlcXVlc3RzCiAgICAgICAgdGhpcy5leHBpcmVzID0gZXhwaXJlczsKICAgICAgICB0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24gPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoc3ViLnJlZnJlc2guYmluZChzdWIpLCBleHBpcmVzICogOTAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIWV4cGlyZXMpIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ0V4cGlyZXMgaGVhZGVyIG1pc3NpbmcgaW4gYSAyMDAtY2xhc3MgcmVzcG9uc2UgdG8gU1VCU0NSSUJFJyk7CiAgICAgICAgICB0aGlzLmZhaWxlZChyZXNwb25zZSwgU0lQLkMuRVhQSVJFU19IRUFERVJfTUlTU0lORyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ0V4cGlyZXMgaGVhZGVyIGluIGEgMjAwLWNsYXNzIHJlc3BvbnNlIHRvIFNVQlNDUklCRSB3aXRoIGEgaGlnaGVyIHZhbHVlIHRoYW4gdGhlIG9uZSBpbiB0aGUgcmVxdWVzdCcpOwogICAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLklOVkFMSURfRVhQSVJFU19IRUFERVIpOwogICAgICAgIH0KICAgICAgfQogICAgfSAvL1VzZWQgdG8ganVzdCBpZ25vcmUgcHJvdmlzaW9uYWwgcmVzcG9uc2VzOyBub3cgaWdub3JlcyBldmVyeXRoaW5nIGV4Y2VwdCBlcnJvckNvZGVzIGFuZCAyeHgKICB9LAoKICB1bnN1YnNjcmliZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgZXh0cmFIZWFkZXJzID0gW10sIHN1YiA9IHRoaXM7CgogICAgdGhpcy5zdGF0ZSA9ICd0ZXJtaW5hdGVkJzsKCiAgICBleHRyYUhlYWRlcnMucHVzaCgnRXZlbnQ6ICcgKyB0aGlzLmV2ZW50KTsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdFeHBpcmVzOiAwJyk7CgogICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcrIHRoaXMuY29udGFjdCk7CiAgICBleHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcrIFNJUC5VQS5DLkFMTE9XRURfTUVUSE9EUy50b1N0cmluZygpKTsKCiAgICAvL21ha2VzIHN1cmUgZXhwaXJlcyBpc24ndCBzZXQsIGFuZCBvdGhlciB0eXBpY2FsIHJlc3Vic2NyaWJlIGJlaGF2aW9yCiAgICB0aGlzLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKCl7fTsKCiAgICB0aGlzLmRpYWxvZy5zZW5kUmVxdWVzdCh0aGlzLCB0aGlzLm1ldGhvZCwgewogICAgICBleHRyYUhlYWRlcnM6IGV4dHJhSGVhZGVycywKICAgICAgYm9keTogdGhpcy5ib2R5CiAgICB9KTsKCiAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pOwogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuTik7CiAgICB0aGlzLnRpbWVycy5OID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KHN1Yi50aW1lcl9maXJlLmJpbmQoc3ViKSwgU0lQLlRpbWVycy5USU1FUl9OKTsKICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICB0aW1lcl9maXJlOiBmdW5jdGlvbigpewogICAgaWYgKHRoaXMuc3RhdGUgPT09ICd0ZXJtaW5hdGVkJykgewogICAgICB0aGlzLnRlcm1pbmF0ZURpYWxvZygpOwogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5OKTsKICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuc3ViX2R1cmF0aW9uKTsKCiAgICAgIGRlbGV0ZSB0aGlzLnVhLnN1YnNjcmlwdGlvbnNbdGhpcy5pZF07CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09ICdwZW5kaW5nJyB8fCB0aGlzLnN0YXRlID09PSAnbm90aWZ5X3dhaXQnKSB7CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgfQogIH0sCgogIC8qKgogICogQHByaXZhdGUKICAqLwogIGNsb3NlOiBmdW5jdGlvbigpIHsKICAgIGlmKHRoaXMuc3RhdGUgIT09ICdub3RpZnlfd2FpdCcgJiYgdGhpcy5zdGF0ZSAhPT0gJ3Rlcm1pbmF0ZWQnKSB7CiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgIH0KICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICBjcmVhdGVDb25maXJtZWREaWFsb2c6IGZ1bmN0aW9uKG1lc3NhZ2UsIHR5cGUpIHsKICAgIHZhciBkaWFsb2c7CgogICAgdGhpcy50ZXJtaW5hdGVEaWFsb2coKTsKICAgIGRpYWxvZyA9IG5ldyBTSVAuRGlhbG9nKHRoaXMsIG1lc3NhZ2UsIHR5cGUpOwoKICAgIGlmKCFkaWFsb2cuZXJyb3IpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBkaWFsb2c7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLy8gRGlhbG9nIG5vdCBjcmVhdGVkIGR1ZSB0byBhbiBlcnJvcgogICAgZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICB0ZXJtaW5hdGVEaWFsb2c6IGZ1bmN0aW9uKCkgewogICAgaWYodGhpcy5kaWFsb2cpIHsKICAgICAgZGVsZXRlIHRoaXMudWEuc3Vic2NyaXB0aW9uc1t0aGlzLmlkXTsKICAgICAgdGhpcy5kaWFsb2cudGVybWluYXRlKCk7CiAgICAgIGRlbGV0ZSB0aGlzLmRpYWxvZzsKICAgIH0KICB9LAoKICAvKioKICAqIEBwcml2YXRlCiAgKi8KICByZWNlaXZlUmVxdWVzdDogZnVuY3Rpb24ocmVxdWVzdCkgewogICAgdmFyIHN1Yl9zdGF0ZSwgc3ViID0gdGhpczsKCiAgICBmdW5jdGlvbiBzZXRFeHBpcmVzVGltZW91dCgpIHsKICAgICAgaWYgKHN1Yl9zdGF0ZS5leHBpcmVzKSB7CiAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQoc3ViLnRpbWVycy5zdWJfZHVyYXRpb24pOwogICAgICAgIHN1Yl9zdGF0ZS5leHBpcmVzID0gTWF0aC5taW4oc3ViLmV4cGlyZXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChzdWJfc3RhdGUuZXhwaXJlcywgMCkpOwogICAgICAgIHN1Yi50aW1lcnMuc3ViX2R1cmF0aW9uID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KHN1Yi5yZWZyZXNoLmJpbmQoc3ViKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yl9zdGF0ZS5leHBpcmVzICogOTAwKTsKICAgICAgfQogICAgfQoKICAgIGlmICghdGhpcy5tYXRjaEV2ZW50KHJlcXVlc3QpKSB7IC8vY2hlY2tzIGV2ZW50IGFuZCBzdWJzY3JpcHRpb25fc3RhdGUgaGVhZGVycwogICAgICByZXF1ZXN0LnJlcGx5KDQ4OSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBzdWJfc3RhdGUgPSByZXF1ZXN0LnBhcnNlSGVhZGVyKCdTdWJzY3JpcHRpb24tU3RhdGUnKTsKCiAgICByZXF1ZXN0LnJlcGx5KDIwMCwgU0lQLkMuUkVBU09OXzIwMCk7CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuTik7CgogICAgdGhpcy5lbWl0KCdub3RpZnknLCB7cmVxdWVzdDogcmVxdWVzdH0pOwoKICAgIC8vIGlmIHdlJ3ZlIHNldCBzdGF0ZSB0byB0ZXJtaW5hdGVkLCBubyBmdXJ0aGVyIHByb2Nlc3Npbmcgc2hvdWxkIHRha2UgcGxhY2UKICAgIC8vIGFuZCB3ZSBhcmUgb25seSBpbnRlcmVzdGVkIGluIGNsZWFuaW5nIHVwIGFmdGVyIHRoZSBhcHByb3ByaWF0ZSBOT1RJRlkKICAgIGlmICh0aGlzLnN0YXRlID09PSAndGVybWluYXRlZCcpIHsKICAgICAgaWYgKHN1Yl9zdGF0ZS5zdGF0ZSA9PT0gJ3Rlcm1pbmF0ZWQnKSB7CiAgICAgICAgdGhpcy50ZXJtaW5hdGVEaWFsb2coKTsKICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5OKTsKICAgICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5zdWJfZHVyYXRpb24pOwoKICAgICAgICBkZWxldGUgdGhpcy51YS5zdWJzY3JpcHRpb25zW3RoaXMuaWRdOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBzd2l0Y2ggKHN1Yl9zdGF0ZS5zdGF0ZSkgewogICAgICBjYXNlICdhY3RpdmUnOgogICAgICAgIHRoaXMuc3RhdGUgPSAnYWN0aXZlJzsKICAgICAgICBzZXRFeHBpcmVzVGltZW91dCgpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdwZW5kaW5nJzoKICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ25vdGlmeV93YWl0JykgewogICAgICAgICAgc2V0RXhwaXJlc1RpbWVvdXQoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zdGF0ZSA9ICdwZW5kaW5nJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAndGVybWluYXRlZCc6CiAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuc3ViX2R1cmF0aW9uKTsKICAgICAgICBpZiAoc3ViX3N0YXRlLnJlYXNvbikgewogICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCd0ZXJtaW5hdGluZyBzdWJzY3JpcHRpb24gd2l0aCByZWFzb24gJysgc3ViX3N0YXRlLnJlYXNvbik7CiAgICAgICAgICBzd2l0Y2ggKHN1Yl9zdGF0ZS5yZWFzb24pIHsKICAgICAgICAgICAgY2FzZSAnZGVhY3RpdmF0ZWQnOgogICAgICAgICAgICBjYXNlICd0aW1lb3V0JzoKICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZSgpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY2FzZSAncHJvYmF0aW9uJzoKICAgICAgICAgICAgY2FzZSAnZ2l2ZXVwJzoKICAgICAgICAgICAgICBpZihzdWJfc3RhdGUucGFyYW1zICYmIHN1Yl9zdGF0ZS5wYXJhbXNbJ3JldHJ5LWFmdGVyJ10pIHsKICAgICAgICAgICAgICAgIHRoaXMudGltZXJzLnN1Yl9kdXJhdGlvbiA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChzdWIuc3Vic2NyaWJlLmJpbmQoc3ViKSwgc3ViX3N0YXRlLnBhcmFtc1sncmV0cnktYWZ0ZXInXSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY2FzZSAncmVqZWN0ZWQnOgogICAgICAgICAgICBjYXNlICdub3Jlc291cmNlJzoKICAgICAgICAgICAgY2FzZSAnaW52YXJpYW50JzoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgIGJyZWFrOwogICAgfQogIH0sCgogIGZhaWxlZDogZnVuY3Rpb24ocmVzcG9uc2UsIGNhdXNlKSB7CiAgICB0aGlzLmNsb3NlKCk7CiAgICB0aGlzLmVtaXQoJ2ZhaWxlZCcsIHJlc3BvbnNlLCBjYXVzZSk7CiAgICByZXR1cm4gdGhpczsKICB9LAoKICBvbkRpYWxvZ0Vycm9yOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIFNJUC5DLmNhdXNlcy5ESUFMT0dfRVJST1IpOwogIH0sCgogIC8qKgogICogQHByaXZhdGUKICAqLwogIG1hdGNoRXZlbnQ6IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICAgIHZhciBldmVudDsKCiAgICAvLyBDaGVjayBtYW5kYXRvcnkgaGVhZGVyIEV2ZW50CiAgICBpZiAoIXJlcXVlc3QuaGFzSGVhZGVyKCdFdmVudCcpKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ21pc3NpbmcgRXZlbnQgaGVhZGVyJyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8vIENoZWNrIG1hbmRhdG9yeSBoZWFkZXIgU3Vic2NyaXB0aW9uLVN0YXRlCiAgICBpZiAoIXJlcXVlc3QuaGFzSGVhZGVyKCdTdWJzY3JpcHRpb24tU3RhdGUnKSkgewogICAgICB0aGlzLmxvZ2dlci53YXJuKCdtaXNzaW5nIFN1YnNjcmlwdGlvbi1TdGF0ZSBoZWFkZXInKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlIGV2ZW50IGluIE5PVElGWSBtYXRjaGVzIHRoZSBldmVudCBpbiBTVUJTQ1JJQkUKICAgIGV2ZW50ID0gcmVxdWVzdC5wYXJzZUhlYWRlcignZXZlbnQnKS5ldmVudDsKCiAgICBpZiAodGhpcy5ldmVudCAhPT0gZXZlbnQpIHsKICAgICAgdGhpcy5sb2dnZXIud2FybignZXZlbnQgbWF0Y2ggZmFpbGVkJyk7CiAgICAgIHJlcXVlc3QucmVwbHkoNDgxLCAnRXZlbnQgTWF0Y2ggRmFpbGVkJyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KfTsKfTsKCn0se31dLDMyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBTSVAgVElNRVJTCiAqLwoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICovCnZhcgogIFQxID0gNTAwLAogIFQyID0gNDAwMCwKICBUNCA9IDUwMDA7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRpbWVycykgewogIHZhciBUaW1lcnMgPSB7CiAgICBUMTogVDEsCiAgICBUMjogVDIsCiAgICBUNDogVDQsCiAgICBUSU1FUl9COiA2NCAqIFQxLAogICAgVElNRVJfRDogMCAgKiBUMSwKICAgIFRJTUVSX0Y6IDY0ICogVDEsCiAgICBUSU1FUl9IOiA2NCAqIFQxLAogICAgVElNRVJfSTogMCAgKiBUMSwKICAgIFRJTUVSX0o6IDAgICogVDEsCiAgICBUSU1FUl9LOiAwICAqIFQ0LAogICAgVElNRVJfTDogNjQgKiBUMSwKICAgIFRJTUVSX006IDY0ICogVDEsCiAgICBUSU1FUl9OOiA2NCAqIFQxLAogICAgUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUw6IDYwMDAwICAvLyBTZWUgUkZDIDMyNjEgU2VjdGlvbiAxMy4zLjEuMQogIH07CgogIFsnc2V0VGltZW91dCcsICdjbGVhclRpbWVvdXQnLCAnc2V0SW50ZXJ2YWwnLCAnY2xlYXJJbnRlcnZhbCddCiAgLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgIC8vIGNhbid0IGp1c3QgdXNlIHRpbWVyc1tuYW1lXS5iaW5kKHRpbWVycykgc2luY2UgaXQgYnlwYXNzZXMgamFzbWluZSdzCiAgICAvLyBjbG9jay1tb2NraW5nCiAgICBUaW1lcnNbbmFtZV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aW1lcnNbbmFtZV0uYXBwbHkodGltZXJzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KTsKCiAgcmV0dXJuIFRpbWVyczsKfTsKCn0se31dLDMzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBTSVAgVHJhbnNhY3Rpb25zCiAqLwoKLyoqCiAqIFNJUCBUcmFuc2FjdGlvbnMgbW9kdWxlLgogKiBAYXVnbWVudHMgU0lQCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyCiAgQyA9IHsKICAgIC8vIFRyYW5zYWN0aW9uIHN0YXRlcwogICAgU1RBVFVTX1RSWUlORzogICAgIDEsCiAgICBTVEFUVVNfUFJPQ0VFRElORzogMiwKICAgIFNUQVRVU19DQUxMSU5HOiAgICAzLAogICAgU1RBVFVTX0FDQ0VQVEVEOiAgIDQsCiAgICBTVEFUVVNfQ09NUExFVEVEOiAgNSwKICAgIFNUQVRVU19URVJNSU5BVEVEOiA2LAogICAgU1RBVFVTX0NPTkZJUk1FRDogIDcsCgogICAgLy8gVHJhbnNhY3Rpb24gdHlwZXMKICAgIE5PTl9JTlZJVEVfQ0xJRU5UOiAnbmljdCcsCiAgICBOT05fSU5WSVRFX1NFUlZFUjogJ25pc3QnLAogICAgSU5WSVRFX0NMSUVOVDogJ2ljdCcsCiAgICBJTlZJVEVfU0VSVkVSOiAnaXN0JwogIH07CgpmdW5jdGlvbiBidWlsZFZpYUhlYWRlciAocmVxdWVzdF9zZW5kZXIsIHRyYW5zcG9ydCwgaWQpIHsKICB2YXIgdmlhOwogIHZpYSA9ICdTSVAvMi4wLycgKyAocmVxdWVzdF9zZW5kZXIudWEuY29uZmlndXJhdGlvbi5oYWNrVmlhVGNwID8gJ1RDUCcgOiB0cmFuc3BvcnQuc2VydmVyLnNjaGVtZSk7CiAgdmlhICs9ICcgJyArIHJlcXVlc3Rfc2VuZGVyLnVhLmNvbmZpZ3VyYXRpb24udmlhSG9zdCArICc7YnJhbmNoPScgKyBpZDsKICBpZiAocmVxdWVzdF9zZW5kZXIudWEuY29uZmlndXJhdGlvbi5mb3JjZVJwb3J0KSB7CiAgICB2aWEgKz0gJztycG9ydCc7CiAgfQogIHJldHVybiB2aWE7Cn0KCi8qKgoqIEBhdWdtZW50cyBTSVAuVHJhbnNhY3Rpb25zCiogQGNsYXNzIE5vbiBJbnZpdGUgQ2xpZW50IFRyYW5zYWN0aW9uCiogQHBhcmFtIHtTSVAuUmVxdWVzdFNlbmRlcn0gcmVxdWVzdF9zZW5kZXIKKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydAoqLwp2YXIgTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gPSBmdW5jdGlvbihyZXF1ZXN0X3NlbmRlciwgcmVxdWVzdCwgdHJhbnNwb3J0KSB7CiAgdmFyIHZpYTsKCiAgdGhpcy50eXBlID0gQy5OT05fSU5WSVRFX0NMSUVOVDsKICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDsKICB0aGlzLmlkID0gJ3o5aEc0YksnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDApOwogIHRoaXMucmVxdWVzdF9zZW5kZXIgPSByZXF1ZXN0X3NlbmRlcjsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwoKICB0aGlzLmxvZ2dlciA9IHJlcXVlc3Rfc2VuZGVyLnVhLmdldExvZ2dlcignc2lwLnRyYW5zYWN0aW9uLm5pY3QnLCB0aGlzLmlkKTsKCiAgdmlhID0gYnVpbGRWaWFIZWFkZXIocmVxdWVzdF9zZW5kZXIsIHRyYW5zcG9ydCwgdGhpcy5pZCk7CiAgdGhpcy5yZXF1ZXN0LnNldEhlYWRlcigndmlhJywgdmlhKTsKCiAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5uZXdUcmFuc2FjdGlvbih0aGlzKTsKfTsKTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgpOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkID0gZnVuY3Rpb24oc3RhdGUpIHsKICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgdGhpcy5lbWl0KCdzdGF0ZUNoYW5nZWQnKTsKfTsKCk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7CiAgdmFyIHRyID0gdGhpczsKCiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVFJZSU5HKTsKICB0aGlzLkYgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfRi5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9GKTsKCiAgaWYoIXRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KSkgewogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ3RyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgbm9uLUlOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwogIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuRik7CiAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5LKTsKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKTsKfTsKCk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9GID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCdUaW1lciBGIGV4cGlyZWQgZm9yIG5vbi1JTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uICcgKyB0aGlzLmlkKTsKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKTsKfTsKCk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9LID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7Cn07CgpOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2UpIHsKICB2YXIKICAgIHRyID0gdGhpcywKICAgIHN0YXR1c19jb2RlID0gcmVzcG9uc2Uuc3RhdHVzX2NvZGU7CgogIGlmKHN0YXR1c19jb2RlIDwgMjAwKSB7CiAgICBzd2l0Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlIEMuU1RBVFVTX1RSWUlORzoKICAgICAgY2FzZSBDLlNUQVRVU19QUk9DRUVESU5HOgogICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1BST0NFRURJTkcpOwogICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICBicmVhazsKICAgIH0KICB9IGVsc2UgewogICAgc3dpdGNoKHRoaXMuc3RhdGUpIHsKICAgICAgY2FzZSBDLlNUQVRVU19UUllJTkc6CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19DT01QTEVURUQpOwogICAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuRik7CgogICAgICAgIGlmKHN0YXR1c19jb2RlID09PSA0MDgpIHsKICAgICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIub25SZXF1ZXN0VGltZW91dCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLksgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfSy5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9LKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDLlNUQVRVU19DT01QTEVURUQ6CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQp9OwoKCgovKioKKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwoqIEBjbGFzcyBJbnZpdGUgQ2xpZW50IFRyYW5zYWN0aW9uCiogQHBhcmFtIHtTSVAuUmVxdWVzdFNlbmRlcn0gcmVxdWVzdF9zZW5kZXIKKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydAoqLwp2YXIgSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24gPSBmdW5jdGlvbihyZXF1ZXN0X3NlbmRlciwgcmVxdWVzdCwgdHJhbnNwb3J0KSB7CiAgdmFyIHZpYSwKICAgIHRyID0gdGhpczsKCiAgdGhpcy50eXBlID0gQy5JTlZJVEVfQ0xJRU5UOwogIHRoaXMudHJhbnNwb3J0ID0gdHJhbnNwb3J0OwogIHRoaXMuaWQgPSAnejloRzRiSycgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMCk7CiAgdGhpcy5yZXF1ZXN0X3NlbmRlciA9IHJlcXVlc3Rfc2VuZGVyOwogIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7CgogIHRoaXMubG9nZ2VyID0gcmVxdWVzdF9zZW5kZXIudWEuZ2V0TG9nZ2VyKCdzaXAudHJhbnNhY3Rpb24uaWN0JywgdGhpcy5pZCk7CgogIHZpYSA9IGJ1aWxkVmlhSGVhZGVyKHJlcXVlc3Rfc2VuZGVyLCB0cmFuc3BvcnQsIHRoaXMuaWQpOwogIHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoJ3ZpYScsIHZpYSk7CgogIHRoaXMucmVxdWVzdF9zZW5kZXIudWEubmV3VHJhbnNhY3Rpb24odGhpcyk7CgogIC8vIEFkZCB0aGUgY2FuY2VsIHByb3BlcnR5IHRvIHRoZSByZXF1ZXN0LgogIC8vV2lsbCBiZSBjYWxsZWQgZnJvbSB0aGUgcmVxdWVzdCBpbnN0YW5jZSwgbm90IHRoZSB0cmFuc2FjdGlvbiBpdHNlbGYuCiAgdGhpcy5yZXF1ZXN0LmNhbmNlbCA9IGZ1bmN0aW9uKHJlYXNvbikgewogICAgdHIuY2FuY2VsX3JlcXVlc3QodHIsIHJlYXNvbik7CiAgfTsKfTsKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgpJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkID0gZnVuY3Rpb24oc3RhdGUpIHsKICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgdGhpcy5lbWl0KCdzdGF0ZUNoYW5nZWQnKTsKfTsKCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oKSB7CiAgdmFyIHRyID0gdGhpczsKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19DQUxMSU5HKTsKICB0aGlzLkIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfQi5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9CKTsKCiAgaWYoIXRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KSkgewogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ3RyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgSU5WSVRFIGNsaWVudCB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CiAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5CKTsKICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkQpOwogIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuTSk7CiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CgogIGlmICh0aGlzLnN0YXRlICE9PSBDLlNUQVRVU19BQ0NFUFRFRCkgewogICAgdGhpcy5yZXF1ZXN0X3NlbmRlci5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKLy8gUkZDIDYwMjYgNy4yCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9NID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCdUaW1lciBNIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwoKICBpZih0aGlzLnN0YXRlID09PSBDLlNUQVRVU19BQ0NFUFRFRCkgewogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5CKTsKICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogICAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CiAgfQp9OwoKLy8gUkZDIDMyNjEgMTcuMS4xCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9CID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCdUaW1lciBCIGV4cGlyZWQgZm9yIElOVklURSBjbGllbnQgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwogIGlmKHRoaXMuc3RhdGUgPT09IEMuU1RBVFVTX0NBTExJTkcpIHsKICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogICAgdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CiAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKTsKICB9Cn07CgpJbnZpdGVDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUudGltZXJfRCA9IGZ1bmN0aW9uKCkgewogIHRoaXMubG9nZ2VyLmxvZygnVGltZXIgRCBleHBpcmVkIGZvciBJTlZJVEUgY2xpZW50IHRyYW5zYWN0aW9uICcgKyB0aGlzLmlkKTsKICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkIpOwogIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogIHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpOwp9OwoKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLnNlbmRBQ0sgPSBmdW5jdGlvbihyZXNwb25zZSkgewogIHZhciB0ciA9IHRoaXM7CgogIHRoaXMuYWNrID0gJ0FDSyAnICsgdGhpcy5yZXF1ZXN0LnJ1cmkgKyAnIFNJUC8yLjBcclxuJzsKICB0aGlzLmFjayArPSAnVmlhOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ1ZpYSddLnRvU3RyaW5nKCkgKyAnXHJcbic7CgogIGlmKHRoaXMucmVxdWVzdC5oZWFkZXJzWydSb3V0ZSddKSB7CiAgICB0aGlzLmFjayArPSAnUm91dGU6ICcgKyB0aGlzLnJlcXVlc3QuaGVhZGVyc1snUm91dGUnXS50b1N0cmluZygpICsgJ1xyXG4nOwogIH0KCiAgdGhpcy5hY2sgKz0gJ1RvOiAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCd0bycpICsgJ1xyXG4nOwogIHRoaXMuYWNrICs9ICdGcm9tOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ0Zyb20nXS50b1N0cmluZygpICsgJ1xyXG4nOwogIHRoaXMuYWNrICs9ICdDYWxsLUlEOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ0NhbGwtSUQnXS50b1N0cmluZygpICsgJ1xyXG4nOwogIHRoaXMuYWNrICs9ICdDb250ZW50LUxlbmd0aDogMFxyXG4nOwogIHRoaXMuYWNrICs9ICdDU2VxOiAnICsgdGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ0NTZXEnXS50b1N0cmluZygpLnNwbGl0KCcgJylbMF07CiAgdGhpcy5hY2sgKz0gJyBBQ0tcclxuXHJcbic7CgogIHRoaXMuRCA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9ELmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX0QpOwoKICB0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMuYWNrKTsKfTsKCkludml0ZUNsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5jYW5jZWxfcmVxdWVzdCA9IGZ1bmN0aW9uKHRyLCByZWFzb24pIHsKICB2YXIgcmVxdWVzdCA9IHRyLnJlcXVlc3Q7CgogIHRoaXMuY2FuY2VsID0gU0lQLkMuQ0FOQ0VMICsgJyAnICsgcmVxdWVzdC5ydXJpICsgJyBTSVAvMi4wXHJcbic7CiAgdGhpcy5jYW5jZWwgKz0gJ1ZpYTogJyArIHJlcXVlc3QuaGVhZGVyc1snVmlhJ10udG9TdHJpbmcoKSArICdcclxuJzsKCiAgaWYodGhpcy5yZXF1ZXN0LmhlYWRlcnNbJ1JvdXRlJ10pIHsKICAgIHRoaXMuY2FuY2VsICs9ICdSb3V0ZTogJyArIHJlcXVlc3QuaGVhZGVyc1snUm91dGUnXS50b1N0cmluZygpICsgJ1xyXG4nOwogIH0KCiAgdGhpcy5jYW5jZWwgKz0gJ1RvOiAnICsgcmVxdWVzdC5oZWFkZXJzWydUbyddLnRvU3RyaW5nKCkgKyAnXHJcbic7CiAgdGhpcy5jYW5jZWwgKz0gJ0Zyb206ICcgKyByZXF1ZXN0LmhlYWRlcnNbJ0Zyb20nXS50b1N0cmluZygpICsgJ1xyXG4nOwogIHRoaXMuY2FuY2VsICs9ICdDYWxsLUlEOiAnICsgcmVxdWVzdC5oZWFkZXJzWydDYWxsLUlEJ10udG9TdHJpbmcoKSArICdcclxuJzsKICB0aGlzLmNhbmNlbCArPSAnQ1NlcTogJyArIHJlcXVlc3QuaGVhZGVyc1snQ1NlcSddLnRvU3RyaW5nKCkuc3BsaXQoJyAnKVswXSArCiAgJyBDQU5DRUxcclxuJzsKCiAgaWYocmVhc29uKSB7CiAgICB0aGlzLmNhbmNlbCArPSAnUmVhc29uOiAnICsgcmVhc29uICsgJ1xyXG4nOwogIH0KCiAgdGhpcy5jYW5jZWwgKz0gJ0NvbnRlbnQtTGVuZ3RoOiAwXHJcblxyXG4nOwoKICAvLyBTZW5kIG9ubHkgaWYgYSBwcm92aXNpb25hbCByZXNwb25zZSAoPjEwMCkgaGFzIGJlZW4gcmVjZWl2ZWQuCiAgaWYodGhpcy5zdGF0ZSA9PT0gQy5TVEFUVVNfUFJPQ0VFRElORykgewogICAgdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmNhbmNlbCk7CiAgfQp9OwoKSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgdmFyCiAgdHIgPSB0aGlzLAogIHN0YXR1c19jb2RlID0gcmVzcG9uc2Uuc3RhdHVzX2NvZGU7CgogIGlmKHN0YXR1c19jb2RlID49IDEwMCAmJiBzdGF0dXNfY29kZSA8PSAxOTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ0FMTElORzoKICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19QUk9DRUVESU5HKTsKICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgaWYodGhpcy5jYW5jZWwpIHsKICAgICAgICAgIHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5jYW5jZWwpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBDLlNUQVRVU19QUk9DRUVESU5HOgogICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICBicmVhazsKICAgIH0KICB9IGVsc2UgaWYoc3RhdHVzX2NvZGUgPj0gMjAwICYmIHN0YXR1c19jb2RlIDw9IDI5OSkgewogICAgc3dpdGNoKHRoaXMuc3RhdGUpIHsKICAgICAgY2FzZSBDLlNUQVRVU19DQUxMSU5HOgogICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfQUNDRVBURUQpOwogICAgICAgIHRoaXMuTSA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9NLmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX00pOwogICAgICAgIHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBDLlNUQVRVU19BQ0NFUFRFRDoKICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSBlbHNlIGlmKHN0YXR1c19jb2RlID49IDMwMCAmJiBzdGF0dXNfY29kZSA8PSA2OTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ0FMTElORzoKICAgICAgY2FzZSBDLlNUQVRVU19QUk9DRUVESU5HOgogICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX0NPTVBMRVRFRCk7CiAgICAgICAgdGhpcy5zZW5kQUNLKHJlc3BvbnNlKTsKICAgICAgICB0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShyZXNwb25zZSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ09NUExFVEVEOgogICAgICAgIHRoaXMuc2VuZEFDSyhyZXNwb25zZSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQp9OwoKCi8qKgogKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwogKiBAY2xhc3MgQUNLIENsaWVudCBUcmFuc2FjdGlvbgogKiBAcGFyYW0ge1NJUC5SZXF1ZXN0U2VuZGVyfSByZXF1ZXN0X3NlbmRlcgogKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R9IHJlcXVlc3QKICogQHBhcmFtIHtTSVAuVHJhbnNwb3J0fSB0cmFuc3BvcnQKICovCnZhciBBY2tDbGllbnRUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKHJlcXVlc3Rfc2VuZGVyLCByZXF1ZXN0LCB0cmFuc3BvcnQpIHsKICB2YXIgdmlhOwoKICB0aGlzLnRyYW5zcG9ydCA9IHRyYW5zcG9ydDsKICB0aGlzLmlkID0gJ3o5aEc0YksnICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMDApOwogIHRoaXMucmVxdWVzdF9zZW5kZXIgPSByZXF1ZXN0X3NlbmRlcjsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwoKICB0aGlzLmxvZ2dlciA9IHJlcXVlc3Rfc2VuZGVyLnVhLmdldExvZ2dlcignc2lwLnRyYW5zYWN0aW9uLm5pY3QnLCB0aGlzLmlkKTsKCiAgdmlhID0gYnVpbGRWaWFIZWFkZXIocmVxdWVzdF9zZW5kZXIsIHRyYW5zcG9ydCwgdGhpcy5pZCk7CiAgdGhpcy5yZXF1ZXN0LnNldEhlYWRlcigndmlhJywgdmlhKTsKfTsKQWNrQ2xpZW50VHJhbnNhY3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgpBY2tDbGllbnRUcmFuc2FjdGlvbi5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKCkgewogIGlmKCF0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMucmVxdWVzdCkpIHsKICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogIH0KfTsKCkFja0NsaWVudFRyYW5zYWN0aW9uLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5sb2dnZXIubG9nKCd0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGZvciBhbiBBQ0sgY2xpZW50IHRyYW5zYWN0aW9uICcgKyB0aGlzLmlkKTsKICB0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKTsKfTsKCgovKioKKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwoqIEBjbGFzcyBOb24gSW52aXRlIFNlcnZlciBUcmFuc2FjdGlvbgoqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdAoqIEBwYXJhbSB7U0lQLlVBfSB1YQoqLwp2YXIgTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24gPSBmdW5jdGlvbihyZXF1ZXN0LCB1YSkgewogIHRoaXMudHlwZSA9IEMuTk9OX0lOVklURV9TRVJWRVI7CiAgdGhpcy5pZCA9IHJlcXVlc3QudmlhX2JyYW5jaDsKICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0OwogIHRoaXMudHJhbnNwb3J0ID0gcmVxdWVzdC50cmFuc3BvcnQ7CiAgdGhpcy51YSA9IHVhOwogIHRoaXMubGFzdF9yZXNwb25zZSA9ICcnOwogIHJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uID0gdGhpczsKCiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC50cmFuc2FjdGlvbi5uaXN0JywgdGhpcy5pZCk7CgogIHRoaXMuc3RhdGUgPSBDLlNUQVRVU19UUllJTkc7CgogIHVhLm5ld1RyYW5zYWN0aW9uKHRoaXMpOwp9OwpOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKTsKCk5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQgPSBmdW5jdGlvbihzdGF0ZSkgewogIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICB0aGlzLmVtaXQoJ3N0YXRlQ2hhbmdlZCcpOwp9OwoKTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRpbWVyX0ogPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ1RpbWVyIEogZXhwaXJlZCBmb3Igbm9uLUlOVklURSBzZXJ2ZXIgdHJhbnNhY3Rpb24gJyArIHRoaXMuaWQpOwogIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogIHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpOwp9OwoKTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICBpZiAoIXRoaXMudHJhbnNwb3J0RXJyb3IpIHsKICAgIHRoaXMudHJhbnNwb3J0RXJyb3IgPSB0cnVlOwoKICAgIHRoaXMubG9nZ2VyLmxvZygndHJhbnNwb3J0IGVycm9yIG9jY3VycmVkLCBkZWxldGluZyBub24tSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5KKTsKICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX1RFUk1JTkFURUQpOwogICAgdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7CiAgfQp9OwoKTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHN0YXR1c19jb2RlLCByZXNwb25zZSkgewogIHZhciB0ciA9IHRoaXM7CiAgdmFyIGRlZmVycmVkID0gU0lQLlV0aWxzLmRlZmVyKCk7CgogIGlmKHN0YXR1c19jb2RlID09PSAxMDApIHsKICAgIC8qIFJGQyA0MzIwIDQuMQogICAgICogJ0EgU0lQIGVsZW1lbnQgTVVTVCBOT1QKICAgICAqIHNlbmQgYW55IHByb3Zpc2lvbmFsIHJlc3BvbnNlIHdpdGggYQogICAgICogU3RhdHVzLUNvZGUgb3RoZXIgdGhhbiAxMDAgdG8gYSBub24tSU5WSVRFIHJlcXVlc3QuJwogICAgICovCiAgICBzd2l0Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlIEMuU1RBVFVTX1RSWUlORzoKICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19QUk9DRUVESU5HKTsKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpICB7CiAgICAgICAgICB0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICB0aGlzLmxhc3RfcmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSBlbHNlIGlmKHN0YXR1c19jb2RlID49IDIwMCAmJiBzdGF0dXNfY29kZSA8PSA2OTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfVFJZSU5HOgogICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfQ09NUExFVEVEKTsKICAgICAgICB0aGlzLmxhc3RfcmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICB0aGlzLkogPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfSi5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9KKTsKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQy5TVEFUVVNfQ09NUExFVEVEOgogICAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7Cn07CgovKioKKiBAYXVnbWVudHMgU0lQLlRyYW5zYWN0aW9ucwoqIEBjbGFzcyBJbnZpdGUgU2VydmVyIFRyYW5zYWN0aW9uCiogQHBhcmFtIHtTSVAuSW5jb21pbmdSZXF1ZXN0fSByZXF1ZXN0CiogQHBhcmFtIHtTSVAuVUF9IHVhCiovCnZhciBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKHJlcXVlc3QsIHVhKSB7CiAgdGhpcy50eXBlID0gQy5JTlZJVEVfU0VSVkVSOwogIHRoaXMuaWQgPSByZXF1ZXN0LnZpYV9icmFuY2g7CiAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDsKICB0aGlzLnRyYW5zcG9ydCA9IHJlcXVlc3QudHJhbnNwb3J0OwogIHRoaXMudWEgPSB1YTsKICB0aGlzLmxhc3RfcmVzcG9uc2UgPSAnJzsKICByZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbiA9IHRoaXM7CgogIHRoaXMubG9nZ2VyID0gdWEuZ2V0TG9nZ2VyKCdzaXAudHJhbnNhY3Rpb24uaXN0JywgdGhpcy5pZCk7CgogIHRoaXMuc3RhdGUgPSBDLlNUQVRVU19QUk9DRUVESU5HOwoKICB1YS5uZXdUcmFuc2FjdGlvbih0aGlzKTsKCiAgdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyID0gbnVsbDsKCiAgcmVxdWVzdC5yZXBseSgxMDApOwp9OwpJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5FdmVudEVtaXR0ZXIucHJvdG90eXBlKTsKCkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQgPSBmdW5jdGlvbihzdGF0ZSkgewogIHRoaXMuc3RhdGUgPSBzdGF0ZTsKICB0aGlzLmVtaXQoJ3N0YXRlQ2hhbmdlZCcpOwp9OwoKSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRpbWVyX0ggPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ1RpbWVyIEggZXhwaXJlZCBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogIGlmKHRoaXMuc3RhdGUgPT09IEMuU1RBVFVTX0NPTVBMRVRFRCkgewogICAgdGhpcy5sb2dnZXIud2FybigndHJhbnNhY3Rpb25zJywgJ0FDSyBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiB3YXMgbmV2ZXIgcmVjZWl2ZWQsIGNhbGwgd2lsbCBiZSB0ZXJtaW5hdGVkJyk7CiAgfQoKICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICB0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKfTsKCkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS50aW1lcl9JID0gZnVuY3Rpb24oKSB7CiAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyk7Cn07CgovLyBSRkMgNjAyNiA3LjEKSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnRpbWVyX0wgPSBmdW5jdGlvbigpIHsKICB0aGlzLmxvZ2dlci5sb2coJ1RpbWVyIEwgZXhwaXJlZCBmb3IgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogIGlmKHRoaXMuc3RhdGUgPT09IEMuU1RBVFVTX0FDQ0VQVEVEKSB7CiAgICB0aGlzLnN0YXRlQ2hhbmdlZChDLlNUQVRVU19URVJNSU5BVEVEKTsKICAgIHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpOwogIH0KfTsKCkludml0ZVNlcnZlclRyYW5zYWN0aW9uLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24oKSB7CiAgaWYgKCF0aGlzLnRyYW5zcG9ydEVycm9yKSB7CiAgICB0aGlzLnRyYW5zcG9ydEVycm9yID0gdHJ1ZTsKCiAgICB0aGlzLmxvZ2dlci5sb2coJ3RyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgSU5WSVRFIHNlcnZlciB0cmFuc2FjdGlvbiAnICsgdGhpcy5pZCk7CgogICAgaWYgKHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciAhPT0gbnVsbCkgewogICAgICBTSVAuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKTsKICAgICAgdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyID0gbnVsbDsKICAgIH0KCiAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLkwpOwogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5IKTsKICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMuSSk7CgogICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfVEVSTUlOQVRFRCk7CiAgICB0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKTsKICB9Cn07CgpJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbi5wcm90b3R5cGUucmVzZW5kX3Byb3Zpc2lvbmFsID0gZnVuY3Rpb24oKSB7CiAgaWYoIXRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5sYXN0X3Jlc3BvbnNlKSkgewogICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgfQp9OwoKLy8gSU5WSVRFIFNlcnZlciBUcmFuc2FjdGlvbiBSRkMgMzI2MSAxNy4yLjEKSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZSA9IGZ1bmN0aW9uKHN0YXR1c19jb2RlLCByZXNwb25zZSkgewogIHZhciB0ciA9IHRoaXM7CiAgdmFyIGRlZmVycmVkID0gU0lQLlV0aWxzLmRlZmVyKCk7CgogIGlmKHN0YXR1c19jb2RlID49IDEwMCAmJiBzdGF0dXNfY29kZSA8PSAxOTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgIH0KICAgICAgICB0aGlzLmxhc3RfcmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICBicmVhazsKICAgIH0KICB9CgogIGlmKHN0YXR1c19jb2RlID4gMTAwICYmIHN0YXR1c19jb2RlIDw9IDE5OSAmJiB0aGlzLnN0YXRlID09PSBDLlNUQVRVU19QUk9DRUVESU5HKSB7CiAgICAvLyBUcmlnZ2VyIHRoZSByZXNlbmRQcm92aXNpb25hbFRpbWVyIG9ubHkgZm9yIHRoZSBmaXJzdCBub24gMTAwIHByb3Zpc2lvbmFsIHJlc3BvbnNlLgogICAgaWYodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyID09PSBudWxsKSB7CiAgICAgIHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciA9IFNJUC5UaW1lcnMuc2V0SW50ZXJ2YWwodHIucmVzZW5kX3Byb3Zpc2lvbmFsLmJpbmQodHIpLAogICAgICAgIFNJUC5UaW1lcnMuUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUwpOwogICAgfQogIH0gZWxzZSBpZihzdGF0dXNfY29kZSA+PSAyMDAgJiYgc3RhdHVzX2NvZGUgPD0gMjk5KSB7CiAgICBzd2l0Y2godGhpcy5zdGF0ZSkgewogICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZWQoQy5TVEFUVVNfQUNDRVBURUQpOwogICAgICAgIHRoaXMubGFzdF9yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICAgIHRoaXMuTCA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9MLmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX0wpOwoKICAgICAgICBpZiAodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyICE9PSBudWxsKSB7CiAgICAgICAgICBTSVAuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKTsKICAgICAgICAgIHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciA9IG51bGw7CiAgICAgICAgfQogICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi8KICAgICAgICBjYXNlIEMuU1RBVFVTX0FDQ0VQVEVEOgogICAgICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgcG9pbnQgd2lsbCBiZSByZWFjaGVkIGZvciBwcm9jZWVkaW5nIHRyLnN0YXRlIGFsc28uCiAgICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgICAgdGhpcy5vblRyYW5zcG9ydEVycm9yKCk7CiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICB9CiAgfSBlbHNlIGlmKHN0YXR1c19jb2RlID49IDMwMCAmJiBzdGF0dXNfY29kZSA8PSA2OTkpIHsKICAgIHN3aXRjaCh0aGlzLnN0YXRlKSB7CiAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICBpZiAodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyICE9PSBudWxsKSB7CiAgICAgICAgICBTSVAuVGltZXJzLmNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKTsKICAgICAgICAgIHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZighdGhpcy50cmFuc3BvcnQuc2VuZChyZXNwb25zZSkpIHsKICAgICAgICAgIHRoaXMub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc3RhdGVDaGFuZ2VkKEMuU1RBVFVTX0NPTVBMRVRFRCk7CiAgICAgICAgICB0aGlzLkggPSBTSVAuVGltZXJzLnNldFRpbWVvdXQodHIudGltZXJfSC5iaW5kKHRyKSwgU0lQLlRpbWVycy5USU1FUl9IKTsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQoKICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTsKfTsKCi8qKgogKiBAZnVuY3Rpb24KICogQHBhcmFtIHtTSVAuVUF9IHVhCiAqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdAogKgogKiBAcmV0dXJuIHtib29sZWFufQogKiBJTlZJVEU6CiAqICBfdHJ1ZV8gaWYgcmV0cmFuc21pc3Npb24KICogIF9mYWxzZV8gbmV3IHJlcXVlc3QKICoKICogQUNLOgogKiAgX3RydWVfICBBQ0sgdG8gbm9uMnh4IHJlc3BvbnNlCiAqICBfZmFsc2VfIEFDSyBtdXN0IGJlIHBhc3NlZCB0byBUVSAoYWNjZXB0ZWQgc3RhdGUpCiAqICAgICAgICAgIEFDSyB0byAyeHggcmVzcG9uc2UKICoKICogQ0FOQ0VMOgogKiAgX3RydWVfICBubyBtYXRjaGluZyBpbnZpdGUgdHJhbnNhY3Rpb24KICogIF9mYWxzZV8gbWF0Y2hpbmcgaW52aXRlIHRyYW5zYWN0aW9uIGFuZCBubyBmaW5hbCByZXNwb25zZSBzZW50CiAqCiAqIE9USEVSOgogKiAgX3RydWVfICByZXRyYW5zbWlzc2lvbgogKiAgX2ZhbHNlXyBuZXcgcmVxdWVzdAogKi8KdmFyIGNoZWNrVHJhbnNhY3Rpb24gPSBmdW5jdGlvbih1YSwgcmVxdWVzdCkgewogIHZhciB0cjsKCiAgc3dpdGNoKHJlcXVlc3QubWV0aG9kKSB7CiAgICBjYXNlIFNJUC5DLklOVklURToKICAgICAgdHIgPSB1YS50cmFuc2FjdGlvbnMuaXN0W3JlcXVlc3QudmlhX2JyYW5jaF07CiAgICAgIGlmKHRyKSB7CiAgICAgICAgc3dpdGNoKHRyLnN0YXRlKSB7CiAgICAgICAgICBjYXNlIEMuU1RBVFVTX1BST0NFRURJTkc6CiAgICAgICAgICAgIHRyLnRyYW5zcG9ydC5zZW5kKHRyLmxhc3RfcmVzcG9uc2UpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIC8vIFJGQyA2MDI2IDcuMSBJbnZpdGUgcmV0cmFuc21pc3Npb24KICAgICAgICAgICAgLy9yZWNlaXZlZCB3aGlsZSBpbiBDLlNUQVRVU19BQ0NFUFRFRCBzdGF0ZS4gQWJzb3JiIGl0LgogICAgICAgICAgY2FzZSBDLlNUQVRVU19BQ0NFUFRFRDoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSBTSVAuQy5BQ0s6CiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLmlzdFtyZXF1ZXN0LnZpYV9icmFuY2hdOwoKICAgICAgLy8gUkZDIDYwMjYgNy4xCiAgICAgIGlmKHRyKSB7CiAgICAgICAgaWYodHIuc3RhdGUgPT09IEMuU1RBVFVTX0FDQ0VQVEVEKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIGlmKHRyLnN0YXRlID09PSBDLlNUQVRVU19DT01QTEVURUQpIHsKICAgICAgICAgIHRyLnN0YXRlID0gQy5TVEFUVVNfQ09ORklSTUVEOwogICAgICAgICAgdHIuSSA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCh0ci50aW1lcl9JLmJpbmQodHIpLCBTSVAuVGltZXJzLlRJTUVSX0kpOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBBQ0sgdG8gMlhYIFJlc3BvbnNlLgogICAgICBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlIFNJUC5DLkNBTkNFTDoKICAgICAgdHIgPSB1YS50cmFuc2FjdGlvbnMuaXN0W3JlcXVlc3QudmlhX2JyYW5jaF07CiAgICAgIGlmKHRyKSB7CiAgICAgICAgcmVxdWVzdC5yZXBseV9zbCgyMDApOwogICAgICAgIGlmKHRyLnN0YXRlID09PSBDLlNUQVRVU19QUk9DRUVESU5HKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXF1ZXN0LnJlcGx5X3NsKDQ4MSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgoKICAgICAgLy8gTm9uLUlOVklURSBTZXJ2ZXIgVHJhbnNhY3Rpb24gUkZDIDMyNjEgMTcuMi4yCiAgICAgIHRyID0gdWEudHJhbnNhY3Rpb25zLm5pc3RbcmVxdWVzdC52aWFfYnJhbmNoXTsKICAgICAgaWYodHIpIHsKICAgICAgICBzd2l0Y2godHIuc3RhdGUpIHsKICAgICAgICAgIGNhc2UgQy5TVEFUVVNfVFJZSU5HOgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgQy5TVEFUVVNfUFJPQ0VFRElORzoKICAgICAgICAgIGNhc2UgQy5TVEFUVVNfQ09NUExFVEVEOgogICAgICAgICAgICB0ci50cmFuc3BvcnQuc2VuZCh0ci5sYXN0X3Jlc3BvbnNlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGJyZWFrOwogIH0KfTsKClNJUC5UcmFuc2FjdGlvbnMgPSB7CiAgQzogQywKICBjaGVja1RyYW5zYWN0aW9uOiBjaGVja1RyYW5zYWN0aW9uLAogIE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uOiBOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbiwKICBJbnZpdGVDbGllbnRUcmFuc2FjdGlvbjogSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24sCiAgQWNrQ2xpZW50VHJhbnNhY3Rpb246IEFja0NsaWVudFRyYW5zYWN0aW9uLAogIE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uOiBOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbiwKICBJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbjogSW52aXRlU2VydmVyVHJhbnNhY3Rpb24KfTsKCn07Cgp9LHt9XSwzNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgVHJhbnNwb3J0CiAqLwoKLyoqCiAqIEBhdWdtZW50cyBTSVAKICogQGNsYXNzIFRyYW5zcG9ydAogKiBAcGFyYW0ge1NJUC5VQX0gdWEKICogQHBhcmFtIHtPYmplY3R9IHNlcnZlciB3c19zZXJ2ZXIgT2JqZWN0CiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIFdlYlNvY2tldCkgewp2YXIgVHJhbnNwb3J0LAogIEMgPSB7CiAgICAvLyBUcmFuc3BvcnQgc3RhdHVzIGNvZGVzCiAgICBTVEFUVVNfUkVBRFk6ICAgICAgICAwLAogICAgU1RBVFVTX0RJU0NPTk5FQ1RFRDogMSwKICAgIFNUQVRVU19FUlJPUjogICAgICAgIDIKICB9OwoKLyoqCiAqIENvbXB1dGUgYW4gYW1vdW50IG9mIHRpbWUgaW4gc2Vjb25kcyB0byB3YWl0IGJlZm9yZSBzZW5kaW5nIGFub3RoZXIKICoga2VlcC1hbGl2ZS4KICogQHJldHVybnMge051bWJlcn0KICovCmZ1bmN0aW9uIGNvbXB1dGVLZWVwQWxpdmVUaW1lb3V0KHVwcGVyQm91bmQpIHsKICB2YXIgbG93ZXJCb3VuZCA9IHVwcGVyQm91bmQgKiAwLjg7CiAgcmV0dXJuIDEwMDAgKiAoTWF0aC5yYW5kb20oKSAqICh1cHBlckJvdW5kIC0gbG93ZXJCb3VuZCkgKyBsb3dlckJvdW5kKTsKfQoKVHJhbnNwb3J0ID0gZnVuY3Rpb24odWEsIHNlcnZlcikgewoKICB0aGlzLmxvZ2dlciA9IHVhLmdldExvZ2dlcignc2lwLnRyYW5zcG9ydCcpOwogIHRoaXMudWEgPSB1YTsKICB0aGlzLndzID0gbnVsbDsKICB0aGlzLnNlcnZlciA9IHNlcnZlcjsKICB0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA9IDA7CiAgdGhpcy5jbG9zZWQgPSBmYWxzZTsKICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogIHRoaXMucmVjb25uZWN0VGltZXIgPSBudWxsOwogIHRoaXMubGFzdFRyYW5zcG9ydEVycm9yID0ge307CgogIHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwgPSB1YS5jb25maWd1cmF0aW9uLmtlZXBBbGl2ZUludGVydmFsOwogIHRoaXMua2VlcEFsaXZlVGltZW91dCA9IG51bGw7CiAgdGhpcy5rZWVwQWxpdmVUaW1lciA9IG51bGw7CgogIHRoaXMudWEudHJhbnNwb3J0ID0gdGhpczsKCiAgLy8gQ29ubmVjdAogIHRoaXMuY29ubmVjdCgpOwp9OwoKVHJhbnNwb3J0LnByb3RvdHlwZSA9IHsKICAvKioKICAgKiBTZW5kIGEgbWVzc2FnZS4KICAgKiBAcGFyYW0ge1NJUC5PdXRnb2luZ1JlcXVlc3R8U3RyaW5nfSBtc2cKICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0KICAgKi8KICBzZW5kOiBmdW5jdGlvbihtc2cpIHsKICAgIHZhciBtZXNzYWdlID0gbXNnLnRvU3RyaW5nKCk7CgogICAgaWYodGhpcy53cyAmJiB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7CiAgICAgIGlmICh0aGlzLnVhLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ3NlbmRpbmcgV2ViU29ja2V0IG1lc3NhZ2U6XG5cbicgKyBtZXNzYWdlICsgJ1xuJyk7CiAgICAgIH0KICAgICAgdGhpcy53cy5zZW5kKG1lc3NhZ2UpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3VuYWJsZSB0byBzZW5kIG1lc3NhZ2UsIFdlYlNvY2tldCBpcyBub3Qgb3BlbicpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogU2VuZCBhIGtlZXAtYWxpdmUgKGEgZG91YmxlLUNSTEYgc2VxdWVuY2UpLgogICAqIEBwcml2YXRlCiAgICogQHJldHVybnMge0Jvb2xlYW59CiAgICovCiAgc2VuZEtlZXBBbGl2ZTogZnVuY3Rpb24oKSB7CiAgICBpZih0aGlzLmtlZXBBbGl2ZVRpbWVvdXQpIHsgcmV0dXJuOyB9CgogICAgdGhpcy5rZWVwQWxpdmVUaW1lb3V0ID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnVhLmVtaXQoJ2tlZXBBbGl2ZVRpbWVvdXQnKTsKICAgIH0uYmluZCh0aGlzKSwgMTAwMDApOwoKICAgIHJldHVybiB0aGlzLnNlbmQoJ1xyXG5cclxuJyk7CiAgfSwKCiAgLyoqCiAgICogU3RhcnQgc2VuZGluZyBrZWVwLWFsaXZlcy4KICAgKiBAcHJpdmF0ZQogICAqLwogIHN0YXJ0U2VuZGluZ0tlZXBBbGl2ZXM6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwgJiYgIXRoaXMua2VlcEFsaXZlVGltZXIpIHsKICAgICAgdGhpcy5rZWVwQWxpdmVUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLnNlbmRLZWVwQWxpdmUoKTsKICAgICAgICB0aGlzLmtlZXBBbGl2ZVRpbWVyID0gbnVsbDsKICAgICAgICB0aGlzLnN0YXJ0U2VuZGluZ0tlZXBBbGl2ZXMoKTsKICAgICAgfS5iaW5kKHRoaXMpLCBjb21wdXRlS2VlcEFsaXZlVGltZW91dCh0aGlzLmtlZXBBbGl2ZUludGVydmFsKSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgICogU3RvcCBzZW5kaW5nIGtlZXAtYWxpdmVzLgogICAqIEBwcml2YXRlCiAgICovCiAgc3RvcFNlbmRpbmdLZWVwQWxpdmVzOiBmdW5jdGlvbigpIHsKICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMua2VlcEFsaXZlVGltZXIpOwogICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy5rZWVwQWxpdmVUaW1lb3V0KTsKICAgIHRoaXMua2VlcEFsaXZlVGltZXIgPSBudWxsOwogICAgdGhpcy5rZWVwQWxpdmVUaW1lb3V0ID0gbnVsbDsKICB9LAoKICAvKioKICAqIERpc2Nvbm5lY3Qgc29ja2V0LgogICovCiAgZGlzY29ubmVjdDogZnVuY3Rpb24oKSB7CiAgICBpZih0aGlzLndzKSB7CiAgICAgIC8vIENsZWFyIHJlY29ubmVjdFRpbWVyCiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZXIpOwoKICAgICAgdGhpcy5zdG9wU2VuZGluZ0tlZXBBbGl2ZXMoKTsKCiAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTsKICAgICAgdGhpcy5sb2dnZXIubG9nKCdjbG9zaW5nIFdlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpKTsKICAgICAgdGhpcy53cy5jbG9zZSgpOwogICAgfQoKICAgIGlmICh0aGlzLnJlY29ubmVjdFRpbWVyICE9PSBudWxsKSB7CiAgICAgIFNJUC5UaW1lcnMuY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZXIpOwogICAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbnVsbDsKICAgICAgdGhpcy51YS5lbWl0KCdkaXNjb25uZWN0ZWQnLCB7CiAgICAgICAgdHJhbnNwb3J0OiB0aGlzLAogICAgICAgIGNvZGU6IHRoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGUsCiAgICAgICAgcmVhc29uOiB0aGlzLmxhc3RUcmFuc3BvcnRFcnJvci5yZWFzb24KICAgICAgfSk7CiAgICB9CiAgfSwKCiAgLyoqCiAgKiBDb25uZWN0IHNvY2tldC4KICAqLwogIGNvbm5lY3Q6IGZ1bmN0aW9uKCkgewogICAgdmFyIHRyYW5zcG9ydCA9IHRoaXM7CgogICAgaWYodGhpcy53cyAmJiAodGhpcy53cy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTiB8fCB0aGlzLndzLnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSkgewogICAgICB0aGlzLmxvZ2dlci5sb2coJ1dlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpICsgJyBpcyBhbHJlYWR5IGNvbm5lY3RlZCcpOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYodGhpcy53cykgewogICAgICB0aGlzLndzLmNsb3NlKCk7CiAgICB9CgogICAgdGhpcy5sb2dnZXIubG9nKCdjb25uZWN0aW5nIHRvIFdlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpKTsKICAgIHRoaXMudWEub25UcmFuc3BvcnRDb25uZWN0aW5nKHRoaXMsCiAgICAgICh0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA9PT0gMCk/MTp0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyk7CgogICAgdHJ5IHsKICAgICAgdGhpcy53cyA9IG5ldyBXZWJTb2NrZXQodGhpcy5zZXJ2ZXIud3NfdXJpLCAnc2lwJyk7CiAgICB9IGNhdGNoKGUpIHsKICAgICAgdGhpcy5sb2dnZXIud2FybignZXJyb3IgY29ubmVjdGluZyB0byBXZWJTb2NrZXQgJyArIHRoaXMuc2VydmVyLndzX3VyaSArICc6ICcgKyBlKTsKICAgIH0KCiAgICB0aGlzLndzLmJpbmFyeVR5cGUgPSAnYXJyYXlidWZmZXInOwoKICAgIHRoaXMud3Mub25vcGVuID0gZnVuY3Rpb24oKSB7CiAgICAgIHRyYW5zcG9ydC5vbk9wZW4oKTsKICAgIH07CgogICAgdGhpcy53cy5vbmNsb3NlID0gZnVuY3Rpb24oZSkgewogICAgICB0cmFuc3BvcnQub25DbG9zZShlKTsKICAgIH07CgogICAgdGhpcy53cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7CiAgICAgIHRyYW5zcG9ydC5vbk1lc3NhZ2UoZSk7CiAgICB9OwoKICAgIHRoaXMud3Mub25lcnJvciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgdHJhbnNwb3J0Lm9uRXJyb3IoZSk7CiAgICB9OwogIH0sCgogIC8vIFRyYW5zcG9ydCBFdmVudCBIYW5kbGVycwoKICAvKioKICAqIEBldmVudAogICogQHBhcmFtIHtldmVudH0gZQogICovCiAgb25PcGVuOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuY29ubmVjdGVkID0gdHJ1ZTsKCiAgICB0aGlzLmxvZ2dlci5sb2coJ1dlYlNvY2tldCAnICsgdGhpcy5zZXJ2ZXIud3NfdXJpICsgJyBjb25uZWN0ZWQnKTsKICAgIC8vIENsZWFyIHJlY29ubmVjdFRpbWVyIHNpbmNlIHdlIGFyZSBub3QgZGlzY29ubmVjdGVkCiAgICBpZiAodGhpcy5yZWNvbm5lY3RUaW1lciAhPT0gbnVsbCkgewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnJlY29ubmVjdFRpbWVyKTsKICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lciA9IG51bGw7CiAgICB9CiAgICAvLyBSZXNldCByZWNvbm5lY3Rpb25fYXR0ZW1wdHMKICAgIHRoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzID0gMDsKICAgIC8vIERpc2FibGUgY2xvc2VkCiAgICB0aGlzLmNsb3NlZCA9IGZhbHNlOwogICAgLy8gVHJpZ2dlciBvblRyYW5zcG9ydENvbm5lY3RlZCBjYWxsYmFjawogICAgdGhpcy51YS5vblRyYW5zcG9ydENvbm5lY3RlZCh0aGlzKTsKICAgIC8vIFN0YXJ0IHNlbmRpbmcga2VlcC1hbGl2ZXMKICAgIHRoaXMuc3RhcnRTZW5kaW5nS2VlcEFsaXZlcygpOwogIH0sCgogIC8qKgogICogQGV2ZW50CiAgKiBAcGFyYW0ge2V2ZW50fSBlCiAgKi8KICBvbkNsb3NlOiBmdW5jdGlvbihlKSB7CiAgICB2YXIgY29ubmVjdGVkX2JlZm9yZSA9IHRoaXMuY29ubmVjdGVkOwoKICAgIHRoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGUgPSBlLmNvZGU7CiAgICB0aGlzLmxhc3RUcmFuc3BvcnRFcnJvci5yZWFzb24gPSBlLnJlYXNvbjsKCiAgICB0aGlzLnN0b3BTZW5kaW5nS2VlcEFsaXZlcygpOwoKICAgIGlmICh0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA+IDApIHsKICAgICAgdGhpcy5sb2dnZXIubG9nKCdSZWNvbm5lY3Rpb24gYXR0ZW1wdCAnICsgdGhpcy5yZWNvbm5lY3Rpb25fYXR0ZW1wdHMgKyAnIGZhaWxlZCAoY29kZTogJyArIGUuY29kZSArIChlLnJlYXNvbj8gJ3wgcmVhc29uOiAnICsgZS5yZWFzb24gOiAnJykgKycpJyk7CiAgICAgIHRoaXMucmVjb25uZWN0KCk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogICAgICB0aGlzLmxvZ2dlci5sb2coJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQgKGNvZGU6ICcgKyBlLmNvZGUgKyAoZS5yZWFzb24/ICd8IHJlYXNvbjogJyArIGUucmVhc29uIDogJycpICsnKScpOwoKICAgICAgaWYoZS53YXNDbGVhbiA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdXZWJTb2NrZXQgYWJydXB0IGRpc2Nvbm5lY3Rpb24nKTsKICAgICAgfQogICAgICAvLyBUcmFuc3BvcnQgd2FzIGNvbm5lY3RlZAogICAgICBpZihjb25uZWN0ZWRfYmVmb3JlID09PSB0cnVlKSB7CiAgICAgICAgdGhpcy51YS5vblRyYW5zcG9ydENsb3NlZCh0aGlzKTsKICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSB1c2VyIHJlcXVlc3RlZCB0byBjbG9zZS4KICAgICAgICBpZighdGhpcy5jbG9zZWQpIHsKICAgICAgICAgIHRoaXMucmVjb25uZWN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudWEuZW1pdCgnZGlzY29ubmVjdGVkJywgewogICAgICAgICAgICB0cmFuc3BvcnQ6IHRoaXMsCiAgICAgICAgICAgIGNvZGU6IHRoaXMubGFzdFRyYW5zcG9ydEVycm9yLmNvZGUsCiAgICAgICAgICAgIHJlYXNvbjogdGhpcy5sYXN0VHJhbnNwb3J0RXJyb3IucmVhc29uCiAgICAgICAgICB9KTsKCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IGNvbm5lY3Rpb24gYXR0ZW1wdAogICAgICAgIC8vTmV0d29yayBlcnJvcgogICAgICAgIHRoaXMudWEub25UcmFuc3BvcnRFcnJvcih0aGlzKTsKICAgICAgfQogICAgfQogIH0sCgogIC8qKgogICogQGV2ZW50CiAgKiBAcGFyYW0ge2V2ZW50fSBlCiAgKi8KICBvbk1lc3NhZ2U6IGZ1bmN0aW9uKGUpIHsKICAgIHZhciBtZXNzYWdlLCB0cmFuc2FjdGlvbiwKICAgICAgZGF0YSA9IGUuZGF0YTsKCiAgICAvLyBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2UgZnJvbSBzZXJ2ZXIuIElnbm9yZSBpdC4KICAgIGlmKGRhdGEgPT09ICdcclxuJykgewogICAgICBTSVAuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLmtlZXBBbGl2ZVRpbWVvdXQpOwogICAgICB0aGlzLmtlZXBBbGl2ZVRpbWVvdXQgPSBudWxsOwoKICAgICAgaWYgKHRoaXMudWEuY29uZmlndXJhdGlvbi50cmFjZVNpcCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMubG9nZ2VyLmxvZygncmVjZWl2ZWQgV2ViU29ja2V0IG1lc3NhZ2Ugd2l0aCBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2UnKTsKICAgICAgfQoKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIFdlYlNvY2tldCBiaW5hcnkgbWVzc2FnZS4KICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRhICE9PSAnc3RyaW5nJykgewogICAgICB0cnkgewogICAgICAgIGRhdGEgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KGRhdGEpKTsKICAgICAgfSBjYXRjaChldnQpIHsKICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdyZWNlaXZlZCBXZWJTb2NrZXQgYmluYXJ5IG1lc3NhZ2UgZmFpbGVkIHRvIGJlIGNvbnZlcnRlZCBpbnRvIHN0cmluZywgbWVzc2FnZSBkaXNjYXJkZWQnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnVhLmNvbmZpZ3VyYXRpb24udHJhY2VTaXAgPT09IHRydWUpIHsKICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ3JlY2VpdmVkIFdlYlNvY2tldCBiaW5hcnkgbWVzc2FnZTpcblxuJyArIGRhdGEgKyAnXG4nKTsKICAgICAgfQogICAgfQoKICAgIC8vIFdlYlNvY2tldCB0ZXh0IG1lc3NhZ2UuCiAgICBlbHNlIHsKICAgICAgaWYgKHRoaXMudWEuY29uZmlndXJhdGlvbi50cmFjZVNpcCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMubG9nZ2VyLmxvZygncmVjZWl2ZWQgV2ViU29ja2V0IHRleHQgbWVzc2FnZTpcblxuJyArIGRhdGEgKyAnXG4nKTsKICAgICAgfQogICAgfQoKICAgIG1lc3NhZ2UgPSBTSVAuUGFyc2VyLnBhcnNlTWVzc2FnZShkYXRhLCB0aGlzLnVhKTsKCiAgICBpZiAoIW1lc3NhZ2UpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmKHRoaXMudWEuc3RhdHVzID09PSBTSVAuVUEuQy5TVEFUVVNfVVNFUl9DTE9TRUQgJiYgbWVzc2FnZSBpbnN0YW5jZW9mIFNJUC5JbmNvbWluZ1JlcXVlc3QpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIERvIHNvbWUgc2FuaXR5IGNoZWNrCiAgICBpZihTSVAuc2FuaXR5Q2hlY2sobWVzc2FnZSwgdGhpcy51YSwgdGhpcykpIHsKICAgICAgaWYobWVzc2FnZSBpbnN0YW5jZW9mIFNJUC5JbmNvbWluZ1JlcXVlc3QpIHsKICAgICAgICBtZXNzYWdlLnRyYW5zcG9ydCA9IHRoaXM7CiAgICAgICAgdGhpcy51YS5yZWNlaXZlUmVxdWVzdChtZXNzYWdlKTsKICAgICAgfSBlbHNlIGlmKG1lc3NhZ2UgaW5zdGFuY2VvZiBTSVAuSW5jb21pbmdSZXNwb25zZSkgewogICAgICAgIC8qIFVuaWtlIHN0YXRlZCBpbiAxOC4xLjIsIGlmIGEgcmVzcG9uc2UgZG9lcyBub3QgbWF0Y2gKICAgICAgICAqIGFueSB0cmFuc2FjdGlvbiwgaXQgaXMgZGlzY2FyZGVkIGhlcmUgYW5kIG5vIHBhc3NlZCB0byB0aGUgY29yZQogICAgICAgICogaW4gb3JkZXIgdG8gYmUgZGlzY2FyZGVkIHRoZXJlLgogICAgICAgICovCiAgICAgICAgc3dpdGNoKG1lc3NhZ2UubWV0aG9kKSB7CiAgICAgICAgICBjYXNlIFNJUC5DLklOVklURToKICAgICAgICAgICAgdHJhbnNhY3Rpb24gPSB0aGlzLnVhLnRyYW5zYWN0aW9ucy5pY3RbbWVzc2FnZS52aWFfYnJhbmNoXTsKICAgICAgICAgICAgaWYodHJhbnNhY3Rpb24pIHsKICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5yZWNlaXZlUmVzcG9uc2UobWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIFNJUC5DLkFDSzoKICAgICAgICAgICAgLy8gSnVzdCBpbiBjYXNlIDstKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gdGhpcy51YS50cmFuc2FjdGlvbnMubmljdFttZXNzYWdlLnZpYV9icmFuY2hdOwogICAgICAgICAgICBpZih0cmFuc2FjdGlvbikgewogICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShtZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAqIEBldmVudAogICogQHBhcmFtIHtldmVudH0gZQogICovCiAgb25FcnJvcjogZnVuY3Rpb24oZSkgewogICAgdGhpcy5sb2dnZXIud2FybignV2ViU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShlKSk7CiAgfSwKCiAgLyoqCiAgKiBSZWNvbm5lY3Rpb24gYXR0ZW1wdCBsb2dpYy4KICAqIEBwcml2YXRlCiAgKi8KICByZWNvbm5lY3Q6IGZ1bmN0aW9uKCkgewogICAgdmFyIHRyYW5zcG9ydCA9IHRoaXM7CgogICAgdGhpcy5yZWNvbm5lY3Rpb25fYXR0ZW1wdHMgKz0gMTsKCiAgICBpZih0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyA+IHRoaXMudWEuY29uZmlndXJhdGlvbi53c1NlcnZlck1heFJlY29ubmVjdGlvbikgewogICAgICB0aGlzLmxvZ2dlci53YXJuKCdtYXhpbXVtIHJlY29ubmVjdGlvbiBhdHRlbXB0cyBmb3IgV2ViU29ja2V0ICcgKyB0aGlzLnNlcnZlci53c191cmkpOwogICAgICB0aGlzLnVhLm9uVHJhbnNwb3J0RXJyb3IodGhpcyk7CiAgICB9IGVsc2UgaWYgKHRoaXMucmVjb25uZWN0aW9uX2F0dGVtcHRzID09PSAxKSB7CiAgICAgIHRoaXMubG9nZ2VyLmxvZygnQ29ubmVjdGlvbiB0byBXZWJTb2NrZXQgJyArIHRoaXMuc2VydmVyLndzX3VyaSArICcgc2V2ZXJlZCwgYXR0ZW1wdGluZyBmaXJzdCByZWNvbm5lY3QnKTsKICAgICAgdHJhbnNwb3J0LmNvbm5lY3QoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9nZ2VyLmxvZygndHJ5aW5nIHRvIHJlY29ubmVjdCB0byBXZWJTb2NrZXQgJyArIHRoaXMuc2VydmVyLndzX3VyaSArICcgKHJlY29ubmVjdGlvbiBhdHRlbXB0ICcgKyB0aGlzLnJlY29ubmVjdGlvbl9hdHRlbXB0cyArICcpJyk7CgogICAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gU0lQLlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHRyYW5zcG9ydC5jb25uZWN0KCk7CiAgICAgICAgdHJhbnNwb3J0LnJlY29ubmVjdFRpbWVyID0gbnVsbDsKICAgICAgfSwgdGhpcy51YS5jb25maWd1cmF0aW9uLndzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dCAqIDEwMDApOwogICAgfQogIH0KfTsKClRyYW5zcG9ydC5DID0gQzsKcmV0dXJuIFRyYW5zcG9ydDsKfTsKCn0se31dLDM1OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewoidXNlIHN0cmljdCI7Ci8qKgogKiBAYXVnbWVudHMgU0lQCiAqIEBjbGFzcyBDbGFzcyBjcmVhdGluZyBhIFNJUCBVc2VyIEFnZW50LgogKiBAcGFyYW0ge2Z1bmN0aW9uIHJldHVybmluZyBTSVAuTWVkaWFIYW5kbGVyfSBbY29uZmlndXJhdGlvbi5tZWRpYUhhbmRsZXJGYWN0b3J5XQogKiAgICAgICAgQSBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgYnkgZWFjaCBvZiB0aGUgVUEncyBTZXNzaW9ucyB0byBidWlsZCB0aGUgTWVkaWFIYW5kbGVyIGZvciB0aGF0IFNlc3Npb24uCiAqICAgICAgICBJZiBubyAob3IgYSBmYWxzeSkgdmFsdWUgaXMgcHJvdmlkZWQsIGVhY2ggU2Vzc2lvbiB3aWxsIHVzZSBhIGRlZmF1bHQgKFdlYlJUQykgTWVkaWFIYW5kbGVyLgogKgogKiBAcGFyYW0ge09iamVjdH0gW2NvbmZpZ3VyYXRpb24ubWVkaWFdIGdldHMgcGFzc2VkIHRvIFNJUC5NZWRpYUhhbmRsZXIuZ2V0RGVzY3JpcHRpb24gYXMgbWVkaWFIaW50CiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7CnZhciBVQSwKICBDID0gewogICAgLy8gVUEgc3RhdHVzIGNvZGVzCiAgICBTVEFUVVNfSU5JVDogICAgICAgICAgICAgICAgMCwKICAgIFNUQVRVU19TVEFSVElORzogICAgICAgICAgICAxLAogICAgU1RBVFVTX1JFQURZOiAgICAgICAgICAgICAgIDIsCiAgICBTVEFUVVNfVVNFUl9DTE9TRUQ6ICAgICAgICAgMywKICAgIFNUQVRVU19OT1RfUkVBRFk6ICAgICAgICAgICA0LAoKICAgIC8vIFVBIGVycm9yIGNvZGVzCiAgICBDT05GSUdVUkFUSU9OX0VSUk9SOiAgMSwKICAgIE5FVFdPUktfRVJST1I6ICAgICAgICAyLAoKICAgIEFMTE9XRURfTUVUSE9EUzogWwogICAgICAnQUNLJywKICAgICAgJ0NBTkNFTCcsCiAgICAgICdJTlZJVEUnLAogICAgICAnTUVTU0FHRScsCiAgICAgICdCWUUnLAogICAgICAnT1BUSU9OUycsCiAgICAgICdJTkZPJywKICAgICAgJ05PVElGWScsCiAgICAgICdSRUZFUicKICAgIF0sCgogICAgQUNDRVBURURfQk9EWV9UWVBFUzogWwogICAgICAnYXBwbGljYXRpb24vc2RwJywKICAgICAgJ2FwcGxpY2F0aW9uL2R0bWYtcmVsYXknCiAgICBdLAoKICAgIE1BWF9GT1JXQVJEUzogNzAsCiAgICBUQUdfTEVOR1RIOiAxMAogIH07CgpVQSA9IGZ1bmN0aW9uKGNvbmZpZ3VyYXRpb24pIHsKICB2YXIgc2VsZiA9IHRoaXM7CgogIC8vIEhlbHBlciBmdW5jdGlvbiBmb3IgZm9yd2FyZGluZyBldmVudHMKICBmdW5jdGlvbiBzZWxmRW1pdCh0eXBlKSB7CiAgICAvL3JlZ2lzdHJhdGlvbkZhaWxlZCBoYW5kbGVyIGlzIGludm9rZWQgd2l0aCB0d28gYXJndW1lbnRzLiBBbGxvdyBldmVudCBoYW5kbGVycyB0byBiZSBpbnZva2VkIHdpdGggYSB2YXJpYWJsZSBuby4gb2YgYXJndW1lbnRzCiAgICByZXR1cm4gc2VsZi5lbWl0LmJpbmQoc2VsZiwgdHlwZSk7CiAgfQoKICAvLyBTZXQgQWNjZXB0ZWQgQm9keSBUeXBlcwogIEMuQUNDRVBURURfQk9EWV9UWVBFUyA9IEMuQUNDRVBURURfQk9EWV9UWVBFUy50b1N0cmluZygpOwoKICB0aGlzLmxvZyA9IG5ldyBTSVAuTG9nZ2VyRmFjdG9yeSgpOwogIHRoaXMubG9nZ2VyID0gdGhpcy5nZXRMb2dnZXIoJ3NpcC51YScpOwoKICB0aGlzLmNhY2hlID0gewogICAgY3JlZGVudGlhbHM6IHt9CiAgfTsKCiAgdGhpcy5jb25maWd1cmF0aW9uID0ge307CiAgdGhpcy5kaWFsb2dzID0ge307CgogIC8vVXNlciBhY3Rpb25zIG91dHNpZGUgYW55IHNlc3Npb24vZGlhbG9nIChNRVNTQUdFKQogIHRoaXMuYXBwbGljYW50cyA9IHt9OwoKICB0aGlzLmRhdGEgPSB7fTsKICB0aGlzLnNlc3Npb25zID0ge307CiAgdGhpcy5zdWJzY3JpcHRpb25zID0ge307CiAgdGhpcy50cmFuc3BvcnQgPSBudWxsOwogIHRoaXMuY29udGFjdCA9IG51bGw7CiAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19JTklUOwogIHRoaXMuZXJyb3IgPSBudWxsOwogIHRoaXMudHJhbnNhY3Rpb25zID0gewogICAgbmlzdDoge30sCiAgICBuaWN0OiB7fSwKICAgIGlzdDoge30sCiAgICBpY3Q6IHt9CiAgfTsKCiAgdGhpcy50cmFuc3BvcnRSZWNvdmVyQXR0ZW1wdHMgPSAwOwogIHRoaXMudHJhbnNwb3J0UmVjb3ZlcnlUaW1lciA9IG51bGw7CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsKICAgIHRyYW5zYWN0aW9uc0NvdW50OiB7CiAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIHR5cGUsCiAgICAgICAgICB0cmFuc2FjdGlvbnMgPSBbJ25pc3QnLCduaWN0JywnaXN0JywnaWN0J10sCiAgICAgICAgICBjb3VudCA9IDA7CgogICAgICAgIGZvciAodHlwZSBpbiB0cmFuc2FjdGlvbnMpIHsKICAgICAgICAgIGNvdW50ICs9IE9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uc1t0eXBlXV0pLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBjb3VudDsKICAgICAgfQogICAgfSwKCiAgICBuaWN0VHJhbnNhY3Rpb25zQ291bnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnNbJ25pY3QnXSkubGVuZ3RoOwogICAgICB9CiAgICB9LAoKICAgIG5pc3RUcmFuc2FjdGlvbnNDb3VudDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9uc1snbmlzdCddKS5sZW5ndGg7CiAgICAgIH0KICAgIH0sCgogICAgaWN0VHJhbnNhY3Rpb25zQ291bnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnNbJ2ljdCddKS5sZW5ndGg7CiAgICAgIH0KICAgIH0sCgogICAgaXN0VHJhbnNhY3Rpb25zQ291bnQ6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnNbJ2lzdCddKS5sZW5ndGg7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgLyoqCiAgICogTG9hZCBjb25maWd1cmF0aW9uCiAgICoKICAgKiBAdGhyb3dzIHtTSVAuRXhjZXB0aW9ucy5Db25maWd1cmF0aW9uRXJyb3J9CiAgICogQHRocm93cyB7VHlwZUVycm9yfQogICAqLwoKICBpZihjb25maWd1cmF0aW9uID09PSB1bmRlZmluZWQpIHsKICAgIGNvbmZpZ3VyYXRpb24gPSB7fTsKICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWd1cmF0aW9uID09PSAnc3RyaW5nJyB8fCBjb25maWd1cmF0aW9uIGluc3RhbmNlb2YgU3RyaW5nKSB7CiAgICBjb25maWd1cmF0aW9uID0gewogICAgICB1cmk6IGNvbmZpZ3VyYXRpb24KICAgIH07CiAgfQoKICAvLyBBcHBseSBsb2cgY29uZmlndXJhdGlvbiBpZiBwcmVzZW50CiAgaWYgKGNvbmZpZ3VyYXRpb24ubG9nKSB7CiAgICBpZiAoY29uZmlndXJhdGlvbi5sb2cuaGFzT3duUHJvcGVydHkoJ2J1aWx0aW5FbmFibGVkJykpIHsKICAgICAgdGhpcy5sb2cuYnVpbHRpbkVuYWJsZWQgPSBjb25maWd1cmF0aW9uLmxvZy5idWlsdGluRW5hYmxlZDsKICAgIH0KCiAgICBpZiAoY29uZmlndXJhdGlvbi5sb2cuaGFzT3duUHJvcGVydHkoJ2xldmVsJykpIHsKICAgICAgdGhpcy5sb2cubGV2ZWwgPSBjb25maWd1cmF0aW9uLmxvZy5sZXZlbDsKICAgIH0KCiAgICBpZiAoY29uZmlndXJhdGlvbi5sb2cuaGFzT3duUHJvcGVydHkoJ2Nvbm5lY3RvcicpKSB7CiAgICAgIHRoaXMubG9nLmNvbm5lY3RvciA9IGNvbmZpZ3VyYXRpb24ubG9nLmNvbm5lY3RvcjsKICAgIH0KICB9CgogIHRyeSB7CiAgICB0aGlzLmxvYWRDb25maWcoY29uZmlndXJhdGlvbik7CiAgfSBjYXRjaChlKSB7CiAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX05PVF9SRUFEWTsKICAgIHRoaXMuZXJyb3IgPSBDLkNPTkZJR1VSQVRJT05fRVJST1I7CiAgICB0aHJvdyBlOwogIH0KCiAgLy8gSW5pdGlhbGl6ZSByZWdpc3RlckNvbnRleHQKICB0aGlzLnJlZ2lzdGVyQ29udGV4dCA9IG5ldyBTSVAuUmVnaXN0ZXJDb250ZXh0KHRoaXMpOwogIHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uKCdmYWlsZWQnLCBzZWxmRW1pdCgncmVnaXN0cmF0aW9uRmFpbGVkJykpOwogIHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uKCdyZWdpc3RlcmVkJywgc2VsZkVtaXQoJ3JlZ2lzdGVyZWQnKSk7CiAgdGhpcy5yZWdpc3RlckNvbnRleHQub24oJ3VucmVnaXN0ZXJlZCcsIHNlbGZFbWl0KCd1bnJlZ2lzdGVyZWQnKSk7CgogIGlmKHRoaXMuY29uZmlndXJhdGlvbi5hdXRvc3RhcnQpIHsKICAgIHRoaXMuc3RhcnQoKTsKICB9CgogIGlmICh0eXBlb2YgZW52aXJvbm1lbnQuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgewogICAgLy8gR29vZ2xlIENocm9tZSBQYWNrYWdlZCBBcHBzIGRvbid0IGFsbG93ICd1bmxvYWQnIGxpc3RlbmVyczoKICAgIC8vIHVubG9hZCBpcyBub3QgYXZhaWxhYmxlIGluIHBhY2thZ2VkIGFwcHMKICAgIGlmICghKGdsb2JhbC5jaHJvbWUgJiYgZ2xvYmFsLmNocm9tZS5hcHAgJiYgZ2xvYmFsLmNocm9tZS5hcHAucnVudGltZSkpIHsKICAgICAgZW52aXJvbm1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgdGhpcy5zdG9wLmJpbmQodGhpcykpOwogICAgfQogIH0KfTsKVUEucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTSVAuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSk7CgovLz09PT09PT09PT09PT09PT09Ci8vICBIaWdoIExldmVsIEFQSQovLz09PT09PT09PT09PT09PT09CgpVQS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdGhpcy5jb25maWd1cmF0aW9uLnJlZ2lzdGVyID0gdHJ1ZTsKICB0aGlzLnJlZ2lzdGVyQ29udGV4dC5yZWdpc3RlcihvcHRpb25zKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovKioKICogVW5yZWdpc3Rlci4KICoKICogQHBhcmFtIHtCb29sZWFufSBbYWxsXSB1bnJlZ2lzdGVyIGFsbCB1c2VyIGJpbmRpbmdzLgogKgogKi8KVUEucHJvdG90eXBlLnVucmVnaXN0ZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7CiAgdGhpcy5jb25maWd1cmF0aW9uLnJlZ2lzdGVyID0gZmFsc2U7CgogIHZhciBjb250ZXh0ID0gdGhpcy5yZWdpc3RlckNvbnRleHQ7CiAgdGhpcy5hZnRlckNvbm5lY3RlZChjb250ZXh0LnVucmVnaXN0ZXIuYmluZChjb250ZXh0LCBvcHRpb25zKSk7CgogIHJldHVybiB0aGlzOwp9OwoKVUEucHJvdG90eXBlLmlzUmVnaXN0ZXJlZCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzLnJlZ2lzdGVyQ29udGV4dC5yZWdpc3RlcmVkOwp9OwoKLyoqCiAqIENvbm5lY3Rpb24gc3RhdGUuCiAqIEBwYXJhbSB7Qm9vbGVhbn0KICovClVBLnByb3RvdHlwZS5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkgewogIHJldHVybiB0aGlzLnRyYW5zcG9ydCA/IHRoaXMudHJhbnNwb3J0LmNvbm5lY3RlZCA6IGZhbHNlOwp9OwoKVUEucHJvdG90eXBlLmFmdGVyQ29ubmVjdGVkID0gZnVuY3Rpb24gYWZ0ZXJDb25uZWN0ZWQgKGNhbGxiYWNrKSB7CiAgaWYgKHRoaXMuaXNDb25uZWN0ZWQoKSkgewogICAgY2FsbGJhY2soKTsKICB9IGVsc2UgewogICAgdGhpcy5vbmNlKCdjb25uZWN0ZWQnLCBjYWxsYmFjayk7CiAgfQp9OwoKLyoqCiAqIE1ha2UgYW4gb3V0Z29pbmcgY2FsbC4KICoKICogQHBhcmFtIHtTdHJpbmd9IHRhcmdldAogKiBAcGFyYW0ge09iamVjdH0gdmlld3MKICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLm1lZGlhXSBnZXRzIHBhc3NlZCB0byBTSVAuTWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uIGFzIG1lZGlhSGludAogKgogKiBAdGhyb3dzIHtUeXBlRXJyb3J9CiAqCiAqLwpVQS5wcm90b3R5cGUuaW52aXRlID0gZnVuY3Rpb24odGFyZ2V0LCBvcHRpb25zKSB7CiAgdmFyIGNvbnRleHQgPSBuZXcgU0lQLkludml0ZUNsaWVudENvbnRleHQodGhpcywgdGFyZ2V0LCBvcHRpb25zKTsKCiAgdGhpcy5hZnRlckNvbm5lY3RlZChjb250ZXh0Lmludml0ZS5iaW5kKGNvbnRleHQpKTsKICByZXR1cm4gY29udGV4dDsKfTsKClVBLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbih0YXJnZXQsIGV2ZW50LCBvcHRpb25zKSB7CiAgdmFyIHN1YiA9IG5ldyBTSVAuU3Vic2NyaXB0aW9uKHRoaXMsIHRhcmdldCwgZXZlbnQsIG9wdGlvbnMpOwoKICB0aGlzLmFmdGVyQ29ubmVjdGVkKHN1Yi5zdWJzY3JpYmUuYmluZChzdWIpKTsKICByZXR1cm4gc3ViOwp9OwoKLyoqCiAqIFNlbmQgYSBtZXNzYWdlLgogKgogKiBAcGFyYW0ge1N0cmluZ30gdGFyZ2V0CiAqIEBwYXJhbSB7U3RyaW5nfSBib2R5CiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10KICoKICogQHRocm93cyB7VHlwZUVycm9yfQogKgogKi8KVUEucHJvdG90eXBlLm1lc3NhZ2UgPSBmdW5jdGlvbih0YXJnZXQsIGJvZHksIG9wdGlvbnMpIHsKICBpZiAoYm9keSA9PT0gdW5kZWZpbmVkKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdOb3QgZW5vdWdoIGFyZ3VtZW50cycpOwogIH0KCiAgLy8gVGhlcmUgaXMgbm8gTWVzc2FnZSBtb2R1bGUsIHNvIGl0IGlzIG9rYXkgdGhhdCB0aGUgVUEgaGFuZGxlcyBkZWZhdWx0cyBoZXJlLgogIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG9wdGlvbnMgfHwgT2JqZWN0LnByb3RvdHlwZSk7CiAgb3B0aW9ucy5jb250ZW50VHlwZSB8fCAob3B0aW9ucy5jb250ZW50VHlwZSA9ICd0ZXh0L3BsYWluJyk7CiAgb3B0aW9ucy5ib2R5ID0gYm9keTsKCiAgcmV0dXJuIHRoaXMucmVxdWVzdChTSVAuQy5NRVNTQUdFLCB0YXJnZXQsIG9wdGlvbnMpOwp9OwoKVUEucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAobWV0aG9kLCB0YXJnZXQsIG9wdGlvbnMpIHsKICB2YXIgcmVxID0gbmV3IFNJUC5DbGllbnRDb250ZXh0KHRoaXMsIG1ldGhvZCwgdGFyZ2V0LCBvcHRpb25zKTsKCiAgdGhpcy5hZnRlckNvbm5lY3RlZChyZXEuc2VuZC5iaW5kKHJlcSkpOwogIHJldHVybiByZXE7Cn07CgovKioKICogR3JhY2VmdWxseSBjbG9zZS4KICoKICovClVBLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7CiAgdmFyIHNlc3Npb24sIHN1YnNjcmlwdGlvbiwgYXBwbGljYW50LAogICAgdWEgPSB0aGlzOwoKICBmdW5jdGlvbiB0cmFuc2FjdGlvbnNMaXN0ZW5lcigpIHsKICAgIGlmICh1YS5uaXN0VHJhbnNhY3Rpb25zQ291bnQgPT09IDAgJiYgdWEubmljdFRyYW5zYWN0aW9uc0NvdW50ID09PSAwKSB7CiAgICAgICAgdWEucmVtb3ZlTGlzdGVuZXIoJ3RyYW5zYWN0aW9uRGVzdHJveWVkJywgdHJhbnNhY3Rpb25zTGlzdGVuZXIpOwogICAgICAgIHVhLnRyYW5zcG9ydC5kaXNjb25uZWN0KCk7CiAgICB9CiAgfQoKICB0aGlzLmxvZ2dlci5sb2coJ3VzZXIgcmVxdWVzdGVkIGNsb3N1cmUuLi4nKTsKCiAgaWYodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1VTRVJfQ0xPU0VEKSB7CiAgICB0aGlzLmxvZ2dlci53YXJuKCdVQSBhbHJlYWR5IGNsb3NlZCcpOwogICAgcmV0dXJuIHRoaXM7CiAgfQoKICAvLyBDbGVhciB0cmFuc3BvcnRSZWNvdmVyeVRpbWVyCiAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50cmFuc3BvcnRSZWNvdmVyeVRpbWVyKTsKCiAgLy8gQ2xvc2UgcmVnaXN0ZXJDb250ZXh0CiAgdGhpcy5sb2dnZXIubG9nKCdjbG9zaW5nIHJlZ2lzdGVyQ29udGV4dCcpOwogIHRoaXMucmVnaXN0ZXJDb250ZXh0LmNsb3NlKCk7CgogIC8vIFJ1biAgX3Rlcm1pbmF0ZV8gb24gZXZlcnkgU2Vzc2lvbgogIGZvcihzZXNzaW9uIGluIHRoaXMuc2Vzc2lvbnMpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygnY2xvc2luZyBzZXNzaW9uICcgKyBzZXNzaW9uKTsKICAgIHRoaXMuc2Vzc2lvbnNbc2Vzc2lvbl0udGVybWluYXRlKCk7CiAgfQoKICAvL1J1biBfY2xvc2VfIG9uIGV2ZXJ5IFN1YnNjcmlwdGlvbgogIGZvcihzdWJzY3JpcHRpb24gaW4gdGhpcy5zdWJzY3JpcHRpb25zKSB7CiAgICB0aGlzLmxvZ2dlci5sb2coJ3Vuc3Vic2NyaWJpbmcgZnJvbSBzdWJzY3JpcHRpb24gJyArIHN1YnNjcmlwdGlvbik7CiAgICB0aGlzLnN1YnNjcmlwdGlvbnNbc3Vic2NyaXB0aW9uXS5jbG9zZSgpOwogIH0KCiAgLy8gUnVuICBfY2xvc2VfIG9uIGV2ZXJ5IGFwcGxpY2FudAogIGZvcihhcHBsaWNhbnQgaW4gdGhpcy5hcHBsaWNhbnRzKSB7CiAgICB0aGlzLmFwcGxpY2FudHNbYXBwbGljYW50XS5jbG9zZSgpOwogIH0KCiAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19VU0VSX0NMT1NFRDsKCiAgLyoKICAgKiBJZiB0aGUgcmVtYWluaW5nIHRyYW5zYWN0aW9ucyBhcmUgYWxsIElOVklURSB0cmFuc2FjdGlvbnMsIHRoZXJlIGlzIG5vIG5lZWQgdG8KICAgKiB3YWl0IGFueW1vcmUgYmVjYXVzZSBldmVyeSBzZXNzaW9uIGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkIGJ5IHRoaXMgbWV0aG9kLgogICAqIC0gbG9jYWxseSBvcmlnaW5hdGVkIHNlc3Npb25zIHdoZXJlIHRlcm1pbmF0ZWQgKENBTkNFTCBvciBCWUUpCiAgICogLSByZW1vdGVseSBvcmlnaW5hdGVkIHNlc3Npb25zIHdoZXJlIHJlamVjdGVkICg0WFgpIG9yIHRlcm1pbmF0ZWQgKEJZRSkKICAgKiBSZW1haW5pbmcgSU5WSVRFIHRyYW5zYWN0aW9ucyBiZWxvbmcgdGhvIHNlc3Npb25zIHRoYXQgd2hlcmUgYW5zd2VyZWQuIFRoaXMgYXJlIGluCiAgICogJ2FjY2VwdGVkJyBzdGF0ZSBkdWUgdG8gdGltZXJzICdMJyBhbmQgJ00nIGRlZmluZWQgaW4gW1JGQyA2MDI2XQogICAqLwogIGlmICh0aGlzLm5pc3RUcmFuc2FjdGlvbnNDb3VudCA9PT0gMCAmJiB0aGlzLm5pY3RUcmFuc2FjdGlvbnNDb3VudCA9PT0gMCkgewogICAgdGhpcy50cmFuc3BvcnQuZGlzY29ubmVjdCgpOwogIH0gZWxzZSB7CiAgICB0aGlzLm9uKCd0cmFuc2FjdGlvbkRlc3Ryb3llZCcsIHRyYW5zYWN0aW9uc0xpc3RlbmVyKTsKICB9CgogIHJldHVybiB0aGlzOwp9OwoKLyoqCiAqIENvbm5lY3QgdG8gdGhlIFdTIHNlcnZlciBpZiBzdGF0dXMgPSBTVEFUVVNfSU5JVC4KICogUmVzdW1lIFVBIGFmdGVyIGJlaW5nIGNsb3NlZC4KICoKICovClVBLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCkgewogIHZhciBzZXJ2ZXI7CgogIHRoaXMubG9nZ2VyLmxvZygndXNlciByZXF1ZXN0ZWQgc3RhcnR1cC4uLicpOwogIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfSU5JVCkgewogICAgc2VydmVyID0gdGhpcy5nZXROZXh0V3NTZXJ2ZXIoKTsKICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfU1RBUlRJTkc7CiAgICBuZXcgU0lQLlRyYW5zcG9ydCh0aGlzLCBzZXJ2ZXIpOwogIH0gZWxzZSBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVVNFUl9DTE9TRUQpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygncmVzdW1pbmcnKTsKICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfUkVBRFk7CiAgICB0aGlzLnRyYW5zcG9ydC5jb25uZWN0KCk7CiAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfU1RBUlRJTkcpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygnVUEgaXMgaW4gU1RBUlRJTkcgc3RhdHVzLCBub3Qgb3BlbmluZyBuZXcgY29ubmVjdGlvbicpOwogIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1JFQURZKSB7CiAgICB0aGlzLmxvZ2dlci5sb2coJ1VBIGlzIGluIFJFQURZIHN0YXR1cywgbm90IHJlc3VtaW5nJyk7CiAgfSBlbHNlIHsKICAgIHRoaXMubG9nZ2VyLmVycm9yKCdDb25uZWN0aW9uIGlzIGRvd24uIEF1dG8tUmVjb3Zlcnkgc3lzdGVtIGlzIHRyeWluZyB0byBjb25uZWN0Jyk7CiAgfQoKICByZXR1cm4gdGhpczsKfTsKCi8qKgogKiBOb3JtYWxpemUgYSBzdHJpbmcgaW50byBhIHZhbGlkIFNJUCByZXF1ZXN0IFVSSQogKgogKiBAcGFyYW0ge1N0cmluZ30gdGFyZ2V0CiAqCiAqIEByZXR1cm5zIHtTSVAuVVJJfHVuZGVmaW5lZH0KICovClVBLnByb3RvdHlwZS5ub3JtYWxpemVUYXJnZXQgPSBmdW5jdGlvbih0YXJnZXQpIHsKICByZXR1cm4gU0lQLlV0aWxzLm5vcm1hbGl6ZVRhcmdldCh0YXJnZXQsIHRoaXMuY29uZmlndXJhdGlvbi5ob3N0cG9ydFBhcmFtcyk7Cn07CgoKLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vICBQcml2YXRlIChGb3IgaW50ZXJuYWwgdXNlKQovLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KClVBLnByb3RvdHlwZS5zYXZlQ3JlZGVudGlhbHMgPSBmdW5jdGlvbihjcmVkZW50aWFscykgewogIHRoaXMuY2FjaGUuY3JlZGVudGlhbHNbY3JlZGVudGlhbHMucmVhbG1dID0gdGhpcy5jYWNoZS5jcmVkZW50aWFsc1tjcmVkZW50aWFscy5yZWFsbV0gfHwge307CiAgdGhpcy5jYWNoZS5jcmVkZW50aWFsc1tjcmVkZW50aWFscy5yZWFsbV1bY3JlZGVudGlhbHMudXJpXSA9IGNyZWRlbnRpYWxzOwoKICByZXR1cm4gdGhpczsKfTsKClVBLnByb3RvdHlwZS5nZXRDcmVkZW50aWFscyA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICB2YXIgcmVhbG0sIGNyZWRlbnRpYWxzOwoKICByZWFsbSA9IHJlcXVlc3QucnVyaS5ob3N0OwoKICBpZiAodGhpcy5jYWNoZS5jcmVkZW50aWFsc1tyZWFsbV0gJiYgdGhpcy5jYWNoZS5jcmVkZW50aWFsc1tyZWFsbV1bcmVxdWVzdC5ydXJpXSkgewogICAgY3JlZGVudGlhbHMgPSB0aGlzLmNhY2hlLmNyZWRlbnRpYWxzW3JlYWxtXVtyZXF1ZXN0LnJ1cmldOwogICAgY3JlZGVudGlhbHMubWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7CiAgfQoKICByZXR1cm4gY3JlZGVudGlhbHM7Cn07CgpVQS5wcm90b3R5cGUuZ2V0TG9nZ2VyID0gZnVuY3Rpb24oY2F0ZWdvcnksIGxhYmVsKSB7CiAgcmV0dXJuIHRoaXMubG9nLmdldExvZ2dlcihjYXRlZ29yeSwgbGFiZWwpOwp9OwoKCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIEV2ZW50IEhhbmRsZXJzCi8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgovKioKICogVHJhbnNwb3J0IENsb3NlIGV2ZW50CiAqIEBwcml2YXRlCiAqIEBldmVudAogKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydC4KICovClVBLnByb3RvdHlwZS5vblRyYW5zcG9ydENsb3NlZCA9IGZ1bmN0aW9uKHRyYW5zcG9ydCkgewogIC8vIFJ1biBfb25UcmFuc3BvcnRFcnJvcl8gY2FsbGJhY2sgb24gZXZlcnkgY2xpZW50IHRyYW5zYWN0aW9uIHVzaW5nIF90cmFuc3BvcnRfCiAgdmFyIHR5cGUsIGlkeCwgbGVuZ3RoLAogICAgY2xpZW50X3RyYW5zYWN0aW9ucyA9IFsnbmljdCcsICdpY3QnLCAnbmlzdCcsICdpc3QnXTsKCiAgdHJhbnNwb3J0LnNlcnZlci5zdGF0dXMgPSBTSVAuVHJhbnNwb3J0LkMuU1RBVFVTX0RJU0NPTk5FQ1RFRDsKICB0aGlzLmxvZ2dlci5sb2coJ2Nvbm5lY3Rpb24gc3RhdGUgc2V0IHRvICcrIFNJUC5UcmFuc3BvcnQuQy5TVEFUVVNfRElTQ09OTkVDVEVEKTsKCiAgbGVuZ3RoID0gY2xpZW50X3RyYW5zYWN0aW9ucy5sZW5ndGg7CiAgZm9yICh0eXBlID0gMDsgdHlwZSA8IGxlbmd0aDsgdHlwZSsrKSB7CiAgICBmb3IoaWR4IGluIHRoaXMudHJhbnNhY3Rpb25zW2NsaWVudF90cmFuc2FjdGlvbnNbdHlwZV1dKSB7CiAgICAgIHRoaXMudHJhbnNhY3Rpb25zW2NsaWVudF90cmFuc2FjdGlvbnNbdHlwZV1dW2lkeF0ub25UcmFuc3BvcnRFcnJvcigpOwogICAgfQogIH0KCiAgLy8gQ2xvc2Ugc2Vzc2lvbnMgaWYgR1JVVSBpcyBub3QgYmVpbmcgdXNlZAogIGlmICghdGhpcy5jb250YWN0LnB1Yl9ncnV1KSB7CiAgICB0aGlzLmNsb3NlU2Vzc2lvbnNPblRyYW5zcG9ydEVycm9yKCk7CiAgfQoKfTsKCi8qKgogKiBVbnJlY292ZXJhYmxlIHRyYW5zcG9ydCBldmVudC4KICogQ29ubmVjdGlvbiByZWF0dGVtcHQgbG9naWMgaGFzIGJlZW4gZG9uZSBhbmQgZGlkbid0IHN1Y2Nlc3MuCiAqIEBwcml2YXRlCiAqIEBldmVudAogKiBAcGFyYW0ge1NJUC5UcmFuc3BvcnR9IHRyYW5zcG9ydC4KICovClVBLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yID0gZnVuY3Rpb24odHJhbnNwb3J0KSB7CiAgdmFyIHNlcnZlcjsKCiAgdGhpcy5sb2dnZXIubG9nKCd0cmFuc3BvcnQgJyArIHRyYW5zcG9ydC5zZXJ2ZXIud3NfdXJpICsgJyBmYWlsZWQgfCBjb25uZWN0aW9uIHN0YXRlIHNldCB0byAnKyBTSVAuVHJhbnNwb3J0LkMuU1RBVFVTX0VSUk9SKTsKCiAgLy8gQ2xvc2Ugc2Vzc2lvbnMuCiAgLy9NYXJrIHRoaXMgdHJhbnNwb3J0IGFzICdkb3duJwogIHRyYW5zcG9ydC5zZXJ2ZXIuc3RhdHVzID0gU0lQLlRyYW5zcG9ydC5DLlNUQVRVU19FUlJPUjsKCiAgdGhpcy5lbWl0KCdkaXNjb25uZWN0ZWQnLCB7CiAgICB0cmFuc3BvcnQ6IHRyYW5zcG9ydAogIH0pOwoKICAvLyB0cnkgdGhlIG5leHQgdHJhbnNwb3J0IGlmIHRoZSBVQSBpc24ndCBjbG9zZWQKICBpZih0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVVNFUl9DTE9TRUQpIHsKICAgIHJldHVybjsKICB9CgogIHNlcnZlciA9IHRoaXMuZ2V0TmV4dFdzU2VydmVyKCk7CgogIGlmKHNlcnZlcikgewogICAgbmV3IFNJUC5UcmFuc3BvcnQodGhpcywgc2VydmVyKTsKICB9ZWxzZSB7CiAgICB0aGlzLmNsb3NlU2Vzc2lvbnNPblRyYW5zcG9ydEVycm9yKCk7CiAgICBpZiAoIXRoaXMuZXJyb3IgfHwgdGhpcy5lcnJvciAhPT0gQy5ORVRXT1JLX0VSUk9SKSB7CiAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfTk9UX1JFQURZOwogICAgICB0aGlzLmVycm9yID0gQy5ORVRXT1JLX0VSUk9SOwogICAgfQogICAgLy8gVHJhbnNwb3J0IFJlY292ZXJ5IHByb2Nlc3MKICAgIHRoaXMucmVjb3ZlclRyYW5zcG9ydCgpOwogIH0KfTsKCi8qKgogKiBUcmFuc3BvcnQgY29ubmVjdGlvbiBldmVudC4KICogQHByaXZhdGUKICogQGV2ZW50CiAqIEBwYXJhbSB7U0lQLlRyYW5zcG9ydH0gdHJhbnNwb3J0LgogKi8KVUEucHJvdG90eXBlLm9uVHJhbnNwb3J0Q29ubmVjdGVkID0gZnVuY3Rpb24odHJhbnNwb3J0KSB7CiAgdGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7CgogIC8vIFJlc2V0IHRyYW5zcG9ydCByZWNvdmVyeSBjb3VudGVyCiAgdGhpcy50cmFuc3BvcnRSZWNvdmVyQXR0ZW1wdHMgPSAwOwoKICB0cmFuc3BvcnQuc2VydmVyLnN0YXR1cyA9IFNJUC5UcmFuc3BvcnQuQy5TVEFUVVNfUkVBRFk7CiAgdGhpcy5sb2dnZXIubG9nKCdjb25uZWN0aW9uIHN0YXRlIHNldCB0byAnKyBTSVAuVHJhbnNwb3J0LkMuU1RBVFVTX1JFQURZKTsKCiAgaWYodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1VTRVJfQ0xPU0VEKSB7CiAgICByZXR1cm47CiAgfQoKICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX1JFQURZOwogIHRoaXMuZXJyb3IgPSBudWxsOwoKICBpZih0aGlzLmNvbmZpZ3VyYXRpb24ucmVnaXN0ZXIpIHsKICAgIHRoaXMuY29uZmlndXJhdGlvbi5hdXRoZW50aWNhdGlvbkZhY3RvcnkuaW5pdGlhbGl6ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnJlZ2lzdGVyQ29udGV4dC5vblRyYW5zcG9ydENvbm5lY3RlZCgpOwogICAgfS5iaW5kKHRoaXMpKTsKICB9CgogIHRoaXMuZW1pdCgnY29ubmVjdGVkJywgewogICAgdHJhbnNwb3J0OiB0cmFuc3BvcnQKICB9KTsKfTsKCgovKioKICogVHJhbnNwb3J0IGNvbm5lY3RpbmcgZXZlbnQKICogQHByaXZhdGUKICogQHBhcmFtIHtTSVAuVHJhbnNwb3J0fSB0cmFuc3BvcnQuCiAqICNwYXJhbSB7SW50ZWdlcn0gYXR0ZW1wdHMuCiAqLwogIFVBLnByb3RvdHlwZS5vblRyYW5zcG9ydENvbm5lY3RpbmcgPSBmdW5jdGlvbih0cmFuc3BvcnQsIGF0dGVtcHRzKSB7CiAgICB0aGlzLmVtaXQoJ2Nvbm5lY3RpbmcnLCB7CiAgICAgIHRyYW5zcG9ydDogdHJhbnNwb3J0LAogICAgICBhdHRlbXB0czogYXR0ZW1wdHMKICAgIH0pOwogIH07CgoKLyoqCiAqIG5ldyBUcmFuc2FjdGlvbgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge1NJUC5UcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb24uCiAqLwpVQS5wcm90b3R5cGUubmV3VHJhbnNhY3Rpb24gPSBmdW5jdGlvbih0cmFuc2FjdGlvbikgewogIHRoaXMudHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uLnR5cGVdW3RyYW5zYWN0aW9uLmlkXSA9IHRyYW5zYWN0aW9uOwogIHRoaXMuZW1pdCgnbmV3VHJhbnNhY3Rpb24nLCB7dHJhbnNhY3Rpb246IHRyYW5zYWN0aW9ufSk7Cn07CgoKLyoqCiAqIGRlc3Ryb3kgVHJhbnNhY3Rpb24KICogQHByaXZhdGUKICogQHBhcmFtIHtTSVAuVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uLgogKi8KVUEucHJvdG90eXBlLmRlc3Ryb3lUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKHRyYW5zYWN0aW9uKSB7CiAgZGVsZXRlIHRoaXMudHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uLnR5cGVdW3RyYW5zYWN0aW9uLmlkXTsKICB0aGlzLmVtaXQoJ3RyYW5zYWN0aW9uRGVzdHJveWVkJywgewogICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uCiAgfSk7Cn07CgoKLy89PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIHJlY2VpdmVSZXF1ZXN0Ci8vPT09PT09PT09PT09PT09PT09PT09PT09PQoKLyoqCiAqIFJlcXVlc3QgcmVjZXB0aW9uCiAqIEBwcml2YXRlCiAqIEBwYXJhbSB7U0lQLkluY29taW5nUmVxdWVzdH0gcmVxdWVzdC4KICovClVBLnByb3RvdHlwZS5yZWNlaXZlUmVxdWVzdCA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICB2YXIgZGlhbG9nLCBzZXNzaW9uLCBtZXNzYWdlLAogICAgbWV0aG9kID0gcmVxdWVzdC5tZXRob2QsCiAgICB0cmFuc2FjdGlvbiwKICAgIHJlcGxhY2VzLAogICAgcmVwbGFjZWREaWFsb2csCiAgICBzZWxmID0gdGhpczsKCiAgZnVuY3Rpb24gcnVyaU1hdGNoZXMgKHVyaSkgewogICAgcmV0dXJuIHVyaSAmJiB1cmkudXNlciA9PT0gcmVxdWVzdC5ydXJpLnVzZXI7CiAgfQoKICAvLyBDaGVjayB0aGF0IHJlcXVlc3QgVVJJIHBvaW50cyB0byB1cwogIGlmKCEocnVyaU1hdGNoZXModGhpcy5jb25maWd1cmF0aW9uLnVyaSkgfHwKICAgICAgIHJ1cmlNYXRjaGVzKHRoaXMuY29udGFjdC51cmkpIHx8CiAgICAgICBydXJpTWF0Y2hlcyh0aGlzLmNvbnRhY3QucHViX2dydXUpIHx8CiAgICAgICBydXJpTWF0Y2hlcyh0aGlzLmNvbnRhY3QudGVtcF9ncnV1KSkpIHsKICAgIHRoaXMubG9nZ2VyLndhcm4oJ1JlcXVlc3QtVVJJIGRvZXMgbm90IHBvaW50IHRvIHVzJyk7CiAgICBpZiAocmVxdWVzdC5tZXRob2QgIT09IFNJUC5DLkFDSykgewogICAgICByZXF1ZXN0LnJlcGx5X3NsKDQwNCk7CiAgICB9CiAgICByZXR1cm47CiAgfQoKICAvLyBDaGVjayByZXF1ZXN0IFVSSSBzY2hlbWUKICBpZihyZXF1ZXN0LnJ1cmkuc2NoZW1lID09PSBTSVAuQy5TSVBTKSB7CiAgICByZXF1ZXN0LnJlcGx5X3NsKDQxNik7CiAgICByZXR1cm47CiAgfQoKICAvLyBDaGVjayB0cmFuc2FjdGlvbgogIGlmKFNJUC5UcmFuc2FjdGlvbnMuY2hlY2tUcmFuc2FjdGlvbih0aGlzLCByZXF1ZXN0KSkgewogICAgcmV0dXJuOwogIH0KCiAgLyogUkZDMzI2MSAxMi4yLjIKICAgKiBSZXF1ZXN0cyB0aGF0IGRvIG5vdCBjaGFuZ2UgaW4gYW55IHdheSB0aGUgc3RhdGUgb2YgYSBkaWFsb2cgbWF5IGJlCiAgICogcmVjZWl2ZWQgd2l0aGluIGEgZGlhbG9nIChmb3IgZXhhbXBsZSwgYW4gT1BUSU9OUyByZXF1ZXN0KS4KICAgKiBUaGV5IGFyZSBwcm9jZXNzZWQgYXMgaWYgdGhleSBoYWQgYmVlbiByZWNlaXZlZCBvdXRzaWRlIHRoZSBkaWFsb2cuCiAgICovCiAgaWYobWV0aG9kID09PSBTSVAuQy5PUFRJT05TKSB7CiAgICBuZXcgU0lQLlRyYW5zYWN0aW9ucy5Ob25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbihyZXF1ZXN0LCB0aGlzKTsKICAgIHJlcXVlc3QucmVwbHkoMjAwLCBudWxsLCBbCiAgICAgICdBbGxvdzogJysgU0lQLlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCksCiAgICAgICdBY2NlcHQ6ICcrIEMuQUNDRVBURURfQk9EWV9UWVBFUwogICAgXSk7CiAgfSBlbHNlIGlmIChtZXRob2QgPT09IFNJUC5DLk1FU1NBR0UpIHsKICAgIG1lc3NhZ2UgPSBuZXcgU0lQLlNlcnZlckNvbnRleHQodGhpcywgcmVxdWVzdCk7CiAgICBtZXNzYWdlLmJvZHkgPSByZXF1ZXN0LmJvZHk7CiAgICBtZXNzYWdlLmNvbnRlbnRfdHlwZSA9IHJlcXVlc3QuZ2V0SGVhZGVyKCdDb250ZW50LVR5cGUnKSB8fCAndGV4dC9wbGFpbic7CgogICAgcmVxdWVzdC5yZXBseSgyMDAsIG51bGwpOwogICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7CiAgfSBlbHNlIGlmIChtZXRob2QgIT09IFNJUC5DLklOVklURSAmJgogICAgICAgICAgICAgbWV0aG9kICE9PSBTSVAuQy5BQ0spIHsKICAgIC8vIExldCB0aG9zZSBtZXRob2RzIHBhc3MgdGhyb3VnaCB0byBub3JtYWwgcHJvY2Vzc2luZyBmb3Igbm93LgogICAgdHJhbnNhY3Rpb24gPSBuZXcgU0lQLlNlcnZlckNvbnRleHQodGhpcywgcmVxdWVzdCk7CiAgfQoKICAvLyBJbml0aWFsIFJlcXVlc3QKICBpZighcmVxdWVzdC50b190YWcpIHsKICAgIHN3aXRjaChtZXRob2QpIHsKICAgICAgY2FzZSBTSVAuQy5JTlZJVEU6CiAgICAgICAgcmVwbGFjZXMgPQogICAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uLnJlcGxhY2VzICE9PSBTSVAuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUQgJiYKICAgICAgICAgIHJlcXVlc3QucGFyc2VIZWFkZXIoJ3JlcGxhY2VzJyk7CgogICAgICAgIGlmIChyZXBsYWNlcykgewogICAgICAgICAgcmVwbGFjZWREaWFsb2cgPSB0aGlzLmRpYWxvZ3NbcmVwbGFjZXMuY2FsbF9pZCArIHJlcGxhY2VzLnJlcGxhY2VzX3RvX3RhZyArIHJlcGxhY2VzLnJlcGxhY2VzX2Zyb21fdGFnXTsKCiAgICAgICAgICBpZiAoIXJlcGxhY2VkRGlhbG9nKSB7CiAgICAgICAgICAgIC8vUmVwbGFjZWQgaGVhZGVyIHdpdGhvdXQgYSBtYXRjaGluZyBkaWFsb2csIHJlamVjdAogICAgICAgICAgICByZXF1ZXN0LnJlcGx5X3NsKDQ4MSwgbnVsbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSBpZiAocmVwbGFjZWREaWFsb2cub3duZXIuc3RhdHVzID09PSBTSVAuU2Vzc2lvbi5DLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgICAgIHJlcXVlc3QucmVwbHlfc2woNjAzLCBudWxsKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSBlbHNlIGlmIChyZXBsYWNlZERpYWxvZy5zdGF0ZSA9PT0gU0lQLkRpYWxvZy5DLlNUQVRVU19DT05GSVJNRUQgJiYgcmVwbGFjZXMuZWFybHlfb25seSkgewogICAgICAgICAgICByZXF1ZXN0LnJlcGx5X3NsKDQ4NiwgbnVsbCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBpc01lZGlhU3VwcG9ydGVkID0gdGhpcy5jb25maWd1cmF0aW9uLm1lZGlhSGFuZGxlckZhY3RvcnkuaXNTdXBwb3J0ZWQ7CiAgICAgICAgaWYoIWlzTWVkaWFTdXBwb3J0ZWQgfHwgaXNNZWRpYVN1cHBvcnRlZCgpKSB7CiAgICAgICAgICBzZXNzaW9uID0gbmV3IFNJUC5JbnZpdGVTZXJ2ZXJDb250ZXh0KHRoaXMsIHJlcXVlc3QpOwogICAgICAgICAgc2Vzc2lvbi5yZXBsYWNlZSA9IHJlcGxhY2VkRGlhbG9nICYmIHJlcGxhY2VkRGlhbG9nLm93bmVyOwogICAgICAgICAgc2Vzc2lvbi5vbignaW52aXRlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHNlbGYuZW1pdCgnaW52aXRlJywgdGhpcyk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5sb2dnZXIud2FybignSU5WSVRFIHJlY2VpdmVkIGJ1dCBXZWJSVEMgaXMgbm90IHN1cHBvcnRlZCcpOwogICAgICAgICAgcmVxdWVzdC5yZXBseSg0ODgpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBTSVAuQy5CWUU6CiAgICAgICAgLy8gT3V0IG9mIGRpYWxvZyBCWUUgcmVjZWl2ZWQKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4MSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgU0lQLkMuQ0FOQ0VMOgogICAgICAgIHNlc3Npb24gPSB0aGlzLmZpbmRTZXNzaW9uKHJlcXVlc3QpOwogICAgICAgIGlmKHNlc3Npb24pIHsKICAgICAgICAgIHNlc3Npb24ucmVjZWl2ZVJlcXVlc3QocmVxdWVzdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3JlY2VpdmVkIENBTkNFTCByZXF1ZXN0IGZvciBhIG5vbiBleGlzdGVudCBzZXNzaW9uJyk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlIFNJUC5DLkFDSzoKICAgICAgICAvKiBBYnNvcmIgaXQuCiAgICAgICAgICogQUNLIHJlcXVlc3Qgd2l0aG91dCBhIGNvcnJlc3BvbmRpbmcgSW52aXRlIFRyYW5zYWN0aW9uCiAgICAgICAgICogYW5kIHdpdGhvdXQgVG8gdGFnLgogICAgICAgICAqLwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIHJlcXVlc3QucmVwbHkoNDA1KTsKICAgICAgICBicmVhazsKICAgIH0KICB9CiAgLy8gSW4tZGlhbG9nIHJlcXVlc3QKICBlbHNlIHsKICAgIGRpYWxvZyA9IHRoaXMuZmluZERpYWxvZyhyZXF1ZXN0KTsKCiAgICBpZihkaWFsb2cpIHsKICAgICAgaWYgKG1ldGhvZCA9PT0gU0lQLkMuSU5WSVRFKSB7CiAgICAgICAgbmV3IFNJUC5UcmFuc2FjdGlvbnMuSW52aXRlU2VydmVyVHJhbnNhY3Rpb24ocmVxdWVzdCwgdGhpcyk7CiAgICAgIH0KICAgICAgZGlhbG9nLnJlY2VpdmVSZXF1ZXN0KHJlcXVlc3QpOwogICAgfSBlbHNlIGlmIChtZXRob2QgPT09IFNJUC5DLk5PVElGWSkgewogICAgICBzZXNzaW9uID0gdGhpcy5maW5kU2Vzc2lvbihyZXF1ZXN0KTsKICAgICAgaWYoc2Vzc2lvbikgewogICAgICAgIHNlc3Npb24ucmVjZWl2ZVJlcXVlc3QocmVxdWVzdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2dnZXIud2FybigncmVjZWl2ZWQgTk9USUZZIHJlcXVlc3QgZm9yIGEgbm9uIGV4aXN0ZW50IHNlc3Npb24nKTsKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4MSwgJ1N1YnNjcmlwdGlvbiBkb2VzIG5vdCBleGlzdCcpOwogICAgICB9CiAgICB9CiAgICAvKiBSRkMzMjYxIDEyLjIuMgogICAgICogUmVxdWVzdCB3aXRoIHRvIHRhZywgYnV0IG5vIG1hdGNoaW5nIGRpYWxvZyBmb3VuZC4KICAgICAqIEV4Y2VwdGlvbjogQUNLIGZvciBhbiBJbnZpdGUgcmVxdWVzdCBmb3Igd2hpY2ggYSBkaWFsb2cgaGFzIG5vdAogICAgICogYmVlbiBjcmVhdGVkLgogICAgICovCiAgICBlbHNlIHsKICAgICAgaWYobWV0aG9kICE9PSBTSVAuQy5BQ0spIHsKICAgICAgICByZXF1ZXN0LnJlcGx5KDQ4MSk7CiAgICAgIH0KICAgIH0KICB9Cn07CgovLz09PT09PT09PT09PT09PT09Ci8vIFV0aWxzCi8vPT09PT09PT09PT09PT09PT0KCi8qKgogKiBHZXQgdGhlIHNlc3Npb24gdG8gd2hpY2ggdGhlIHJlcXVlc3QgYmVsb25ncyB0bywgaWYgYW55LgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge1NJUC5JbmNvbWluZ1JlcXVlc3R9IHJlcXVlc3QuCiAqIEByZXR1cm5zIHtTSVAuT3V0Z29pbmdTZXNzaW9ufFNJUC5JbmNvbWluZ1Nlc3Npb258bnVsbH0KICovClVBLnByb3RvdHlwZS5maW5kU2Vzc2lvbiA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICByZXR1cm4gdGhpcy5zZXNzaW9uc1tyZXF1ZXN0LmNhbGxfaWQgKyByZXF1ZXN0LmZyb21fdGFnXSB8fAogICAgICAgICAgdGhpcy5zZXNzaW9uc1tyZXF1ZXN0LmNhbGxfaWQgKyByZXF1ZXN0LnRvX3RhZ10gfHwKICAgICAgICAgIG51bGw7Cn07CgovKioKICogR2V0IHRoZSBkaWFsb2cgdG8gd2hpY2ggdGhlIHJlcXVlc3QgYmVsb25ncyB0bywgaWYgYW55LgogKiBAcHJpdmF0ZQogKiBAcGFyYW0ge1NJUC5JbmNvbWluZ1JlcXVlc3R9CiAqIEByZXR1cm5zIHtTSVAuRGlhbG9nfG51bGx9CiAqLwpVQS5wcm90b3R5cGUuZmluZERpYWxvZyA9IGZ1bmN0aW9uKHJlcXVlc3QpIHsKICByZXR1cm4gdGhpcy5kaWFsb2dzW3JlcXVlc3QuY2FsbF9pZCArIHJlcXVlc3QuZnJvbV90YWcgKyByZXF1ZXN0LnRvX3RhZ10gfHwKICAgICAgICAgIHRoaXMuZGlhbG9nc1tyZXF1ZXN0LmNhbGxfaWQgKyByZXF1ZXN0LnRvX3RhZyArIHJlcXVlc3QuZnJvbV90YWddIHx8CiAgICAgICAgICBudWxsOwp9OwoKLyoqCiAqIFJldHJpZXZlIHRoZSBuZXh0IHNlcnZlciB0byB3aGljaCBjb25uZWN0LgogKiBAcHJpdmF0ZQogKiBAcmV0dXJucyB7T2JqZWN0fSB3c19zZXJ2ZXIKICovClVBLnByb3RvdHlwZS5nZXROZXh0V3NTZXJ2ZXIgPSBmdW5jdGlvbigpIHsKICAvLyBPcmRlciBzZXJ2ZXJzIGJ5IHdlaWdodAogIHZhciBpZHgsIGxlbmd0aCwgd3Nfc2VydmVyLAogICAgY2FuZGlkYXRlcyA9IFtdOwoKICBsZW5ndGggPSB0aGlzLmNvbmZpZ3VyYXRpb24ud3NTZXJ2ZXJzLmxlbmd0aDsKICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgIHdzX3NlcnZlciA9IHRoaXMuY29uZmlndXJhdGlvbi53c1NlcnZlcnNbaWR4XTsKCiAgICBpZiAod3Nfc2VydmVyLnN0YXR1cyA9PT0gU0lQLlRyYW5zcG9ydC5DLlNUQVRVU19FUlJPUikgewogICAgICBjb250aW51ZTsKICAgIH0gZWxzZSBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHsKICAgICAgY2FuZGlkYXRlcy5wdXNoKHdzX3NlcnZlcik7CiAgICB9IGVsc2UgaWYgKHdzX3NlcnZlci53ZWlnaHQgPiBjYW5kaWRhdGVzWzBdLndlaWdodCkgewogICAgICBjYW5kaWRhdGVzID0gW3dzX3NlcnZlcl07CiAgICB9IGVsc2UgaWYgKHdzX3NlcnZlci53ZWlnaHQgPT09IGNhbmRpZGF0ZXNbMF0ud2VpZ2h0KSB7CiAgICAgIGNhbmRpZGF0ZXMucHVzaCh3c19zZXJ2ZXIpOwogICAgfQogIH0KCiAgaWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FuZGlkYXRlcy5sZW5ndGgpOwoKICByZXR1cm4gY2FuZGlkYXRlc1tpZHhdOwp9OwoKLyoqCiAqIENsb3NlIGFsbCBzZXNzaW9ucyBvbiB0cmFuc3BvcnQgZXJyb3IuCiAqIEBwcml2YXRlCiAqLwpVQS5wcm90b3R5cGUuY2xvc2VTZXNzaW9uc09uVHJhbnNwb3J0RXJyb3IgPSBmdW5jdGlvbigpIHsKICB2YXIgaWR4OwoKICAvLyBSdW4gX3RyYW5zcG9ydEVycm9yXyBmb3IgZXZlcnkgU2Vzc2lvbgogIGZvcihpZHggaW4gdGhpcy5zZXNzaW9ucykgewogICAgdGhpcy5zZXNzaW9uc1tpZHhdLm9uVHJhbnNwb3J0RXJyb3IoKTsKICB9CiAgLy8gQ2FsbCByZWdpc3RlckNvbnRleHQgX29uVHJhbnNwb3J0Q2xvc2VkXwogIHRoaXMucmVnaXN0ZXJDb250ZXh0Lm9uVHJhbnNwb3J0Q2xvc2VkKCk7Cn07CgpVQS5wcm90b3R5cGUucmVjb3ZlclRyYW5zcG9ydCA9IGZ1bmN0aW9uKHVhKSB7CiAgdmFyIGlkeCwgbGVuZ3RoLCBrLCBuZXh0UmV0cnksIGNvdW50LCBzZXJ2ZXI7CgogIHVhID0gdWEgfHwgdGhpczsKICBjb3VudCA9IHVhLnRyYW5zcG9ydFJlY292ZXJBdHRlbXB0czsKCiAgbGVuZ3RoID0gdWEuY29uZmlndXJhdGlvbi53c1NlcnZlcnMubGVuZ3RoOwogIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgdWEuY29uZmlndXJhdGlvbi53c1NlcnZlcnNbaWR4XS5zdGF0dXMgPSAwOwogIH0KCiAgc2VydmVyID0gdWEuZ2V0TmV4dFdzU2VydmVyKCk7CgogIGsgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogTWF0aC5wb3coMixjb3VudCkpICsxKTsKICBuZXh0UmV0cnkgPSBrICogdWEuY29uZmlndXJhdGlvbi5jb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbDsKCiAgaWYgKG5leHRSZXRyeSA+IHVhLmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWwpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygndGltZSBmb3IgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQgZXhjZWVkcyBjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCwgcmVzZXR0aW5nIGNvdW50ZXInKTsKICAgIG5leHRSZXRyeSA9IHVhLmNvbmZpZ3VyYXRpb24uY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWw7CiAgICBjb3VudCA9IDA7CiAgfQoKICB0aGlzLmxvZ2dlci5sb2coJ25leHQgY29ubmVjdGlvbiBhdHRlbXB0IGluICcrIG5leHRSZXRyeSArJyBzZWNvbmRzJyk7CgogIHRoaXMudHJhbnNwb3J0UmVjb3ZlcnlUaW1lciA9IFNJUC5UaW1lcnMuc2V0VGltZW91dCgKICAgIGZ1bmN0aW9uKCl7CiAgICAgIHVhLnRyYW5zcG9ydFJlY292ZXJBdHRlbXB0cyA9IGNvdW50ICsgMTsKICAgICAgbmV3IFNJUC5UcmFuc3BvcnQodWEsIHNlcnZlcik7CiAgICB9LCBuZXh0UmV0cnkgKiAxMDAwKTsKfTsKCmZ1bmN0aW9uIGNoZWNrQXV0aGVudGljYXRpb25GYWN0b3J5IChhdXRoZW50aWNhdGlvbkZhY3RvcnkpIHsKICBpZiAoIShhdXRoZW50aWNhdGlvbkZhY3RvcnkgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHsKICAgIHJldHVybjsKICB9CiAgaWYgKCFhdXRoZW50aWNhdGlvbkZhY3RvcnkuaW5pdGlhbGl6ZSkgewogICAgYXV0aGVudGljYXRpb25GYWN0b3J5LmluaXRpYWxpemUgPSBmdW5jdGlvbiBpbml0aWFsaXplICgpIHsKICAgICAgcmV0dXJuIFNJUC5VdGlscy5Qcm9taXNlLnJlc29sdmUoKTsKICAgIH07CiAgfQogIHJldHVybiBhdXRoZW50aWNhdGlvbkZhY3Rvcnk7Cn0KCi8qKgogKiBDb25maWd1cmF0aW9uIGxvYWQuCiAqIEBwcml2YXRlCiAqIHJldHVybnMge0Jvb2xlYW59CiAqLwpVQS5wcm90b3R5cGUubG9hZENvbmZpZyA9IGZ1bmN0aW9uKGNvbmZpZ3VyYXRpb24pIHsKICAvLyBTZXR0aW5ncyBhbmQgZGVmYXVsdCB2YWx1ZXMKICB2YXIgcGFyYW1ldGVyLCB2YWx1ZSwgY2hlY2tlZF92YWx1ZSwgaG9zdHBvcnRQYXJhbXMsIHJlZ2lzdHJhclNlcnZlciwKICAgIHNldHRpbmdzID0gewogICAgICAvKiBIb3N0IGFkZHJlc3MKICAgICAgKiBWYWx1ZSB0byBiZSBzZXQgaW4gVmlhIHNlbnRfYnkgYW5kIGhvc3QgcGFydCBvZiBDb250YWN0IEZRRE4KICAgICAgKi8KICAgICAgdmlhSG9zdDogU0lQLlV0aWxzLmNyZWF0ZVJhbmRvbVRva2VuKDEyKSArICcuaW52YWxpZCcsCgogICAgICB1cmk6IG5ldyBTSVAuVVJJKCdzaXAnLCAnYW5vbnltb3VzLicgKyBTSVAuVXRpbHMuY3JlYXRlUmFuZG9tVG9rZW4oNiksICdhbm9ueW1vdXMuaW52YWxpZCcsIG51bGwsIG51bGwpLAogICAgICB3c1NlcnZlcnM6IFt7CiAgICAgICAgc2NoZW1lOiAnV1NTJywKICAgICAgICBzaXBfdXJpOiAnPHNpcDplZGdlLnNpcC5vbnNpcC5jb207dHJhbnNwb3J0PXdzO2xyPicsCiAgICAgICAgc3RhdHVzOiAwLAogICAgICAgIHdlaWdodDogMCwKICAgICAgICB3c191cmk6ICd3c3M6Ly9lZGdlLnNpcC5vbnNpcC5jb20nCiAgICAgIH1dLAoKICAgICAgLy8gUGFzc3dvcmQKICAgICAgcGFzc3dvcmQ6IG51bGwsCgogICAgICAvLyBSZWdpc3RyYXRpb24gcGFyYW1ldGVycwogICAgICByZWdpc3RlckV4cGlyZXM6IDYwMCwKICAgICAgcmVnaXN0ZXI6IHRydWUsCiAgICAgIHJlZ2lzdHJhclNlcnZlcjogbnVsbCwKCiAgICAgIC8vIFRyYW5zcG9ydCByZWxhdGVkIHBhcmFtZXRlcnMKICAgICAgd3NTZXJ2ZXJNYXhSZWNvbm5lY3Rpb246IDMsCiAgICAgIHdzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dDogNCwKCiAgICAgIGNvbm5lY3Rpb25SZWNvdmVyeU1pbkludGVydmFsOiAyLAogICAgICBjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbDogMzAsCgogICAgICBrZWVwQWxpdmVJbnRlcnZhbDogMCwKCiAgICAgIGV4dHJhU3VwcG9ydGVkOiBbXSwKCiAgICAgIHVzZVByZWxvYWRlZFJvdXRlOiBmYWxzZSwKCiAgICAgIC8vc3RyaW5nIHRvIGJlIGluc2VydGVkIGludG8gVXNlci1BZ2VudCByZXF1ZXN0IGhlYWRlcgogICAgICB1c2VyQWdlbnRTdHJpbmc6IFNJUC5DLlVTRVJfQUdFTlQsCgogICAgICAvLyBTZXNzaW9uIHBhcmFtZXRlcnMKICAgICAgaWNlQ2hlY2tpbmdUaW1lb3V0OiA1MDAwLAogICAgICBub0Fuc3dlclRpbWVvdXQ6IDYwLAogICAgICBzdHVuU2VydmVyczogWydzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyJ10sCiAgICAgIHR1cm5TZXJ2ZXJzOiBbXSwKCiAgICAgIC8vIExvZ2dpbmcgcGFyYW1ldGVycwogICAgICB0cmFjZVNpcDogZmFsc2UsCgogICAgICAvLyBIYWNrcwogICAgICBoYWNrVmlhVGNwOiBmYWxzZSwKICAgICAgaGFja0lwSW5Db250YWN0OiBmYWxzZSwKICAgICAgaGFja1dzc0luVHJhbnNwb3J0OiBmYWxzZSwKICAgICAgaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFnczogZmFsc2UsCgogICAgICBjb250YWN0VHJhbnNwb3J0OiAnd3MnLAogICAgICBmb3JjZVJwb3J0OiBmYWxzZSwKCiAgICAgIC8vYXV0b3N0YXJ0aW5nCiAgICAgIGF1dG9zdGFydDogdHJ1ZSwKCiAgICAgIC8vUmVsaWFibGUgUHJvdmlzaW9uYWwgUmVzcG9uc2VzCiAgICAgIHJlbDEwMDogU0lQLkMuc3VwcG9ydGVkLlVOU1VQUE9SVEVELAoKICAgICAgLy8gUmVwbGFjZXMgaGVhZGVyIChSRkMgMzg5MSkKICAgICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzg5MQogICAgICByZXBsYWNlczogU0lQLkMuc3VwcG9ydGVkLlVOU1VQUE9SVEVELAoKICAgICAgbWVkaWFIYW5kbGVyRmFjdG9yeTogU0lQLldlYlJUQy5NZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3RvcnksCgogICAgICBhdXRoZW50aWNhdGlvbkZhY3Rvcnk6IGNoZWNrQXV0aGVudGljYXRpb25GYWN0b3J5KGZ1bmN0aW9uIGF1dGhlbnRpY2F0aW9uRmFjdG9yeSAodWEpIHsKICAgICAgICByZXR1cm4gbmV3IFNJUC5EaWdlc3RBdXRoZW50aWNhdGlvbih1YSk7CiAgICAgIH0pCiAgICB9OwoKICAvLyBQcmUtQ29uZmlndXJhdGlvbgogIGZ1bmN0aW9uIGFsaWFzVW5kZXJzY29yZWQgKHBhcmFtZXRlciwgbG9nZ2VyKSB7CiAgICB2YXIgdW5kZXJzY29yZWQgPSBwYXJhbWV0ZXIucmVwbGFjZSgvKFthLXpdW0EtWl0pL2csIGZ1bmN0aW9uIChtKSB7CiAgICAgIHJldHVybiBtWzBdICsgJ18nICsgbVsxXS50b0xvd2VyQ2FzZSgpOwogICAgfSk7CgogICAgaWYgKHBhcmFtZXRlciA9PT0gdW5kZXJzY29yZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBoYXNQYXJhbWV0ZXIgPSBjb25maWd1cmF0aW9uLmhhc093blByb3BlcnR5KHBhcmFtZXRlcik7CiAgICBpZiAoY29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eSh1bmRlcnNjb3JlZCkpIHsKICAgICAgbG9nZ2VyLndhcm4odW5kZXJzY29yZWQgKyAnIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgJyArIHBhcmFtZXRlcik7CiAgICAgIGlmIChoYXNQYXJhbWV0ZXIpIHsKICAgICAgICBsb2dnZXIud2FybihwYXJhbWV0ZXIgKyAnIG92ZXJyaWRpbmcgJyArIHVuZGVyc2NvcmVkKTsKICAgICAgfQogICAgfQoKICAgIGNvbmZpZ3VyYXRpb25bcGFyYW1ldGVyXSA9IGhhc1BhcmFtZXRlciA/IGNvbmZpZ3VyYXRpb25bcGFyYW1ldGVyXSA6IGNvbmZpZ3VyYXRpb25bdW5kZXJzY29yZWRdOwogIH0KCiAgLy8gQ2hlY2sgTWFuZGF0b3J5IHBhcmFtZXRlcnMKICBmb3IocGFyYW1ldGVyIGluIFVBLmNvbmZpZ3VyYXRpb25fY2hlY2subWFuZGF0b3J5KSB7CiAgICBhbGlhc1VuZGVyc2NvcmVkKHBhcmFtZXRlciwgdGhpcy5sb2dnZXIpOwogICAgaWYoIWNvbmZpZ3VyYXRpb24uaGFzT3duUHJvcGVydHkocGFyYW1ldGVyKSkgewogICAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuQ29uZmlndXJhdGlvbkVycm9yKHBhcmFtZXRlcik7CiAgICB9IGVsc2UgewogICAgICB2YWx1ZSA9IGNvbmZpZ3VyYXRpb25bcGFyYW1ldGVyXTsKICAgICAgY2hlY2tlZF92YWx1ZSA9IFVBLmNvbmZpZ3VyYXRpb25fY2hlY2subWFuZGF0b3J5W3BhcmFtZXRlcl0odmFsdWUpOwogICAgICBpZiAoY2hlY2tlZF92YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc2V0dGluZ3NbcGFyYW1ldGVyXSA9IGNoZWNrZWRfdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkNvbmZpZ3VyYXRpb25FcnJvcihwYXJhbWV0ZXIsIHZhbHVlKTsKICAgICAgfQogICAgfQogIH0KCiAgU0lQLlV0aWxzLm9wdGlvbnNPdmVycmlkZShjb25maWd1cmF0aW9uLCAncmVsMTAwJywgJ3JlbGlhYmxlJywgdHJ1ZSwgdGhpcy5sb2dnZXIsIFNJUC5DLnN1cHBvcnRlZC5VTlNVUFBPUlRFRCk7CgogIHZhciBlbXB0eUFycmF5c0FsbG93ZWQgPSBbJ3N0dW5TZXJ2ZXJzJywgJ3R1cm5TZXJ2ZXJzJ107CgogIC8vIENoZWNrIE9wdGlvbmFsIHBhcmFtZXRlcnMKICBmb3IocGFyYW1ldGVyIGluIFVBLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWwpIHsKICAgIGFsaWFzVW5kZXJzY29yZWQocGFyYW1ldGVyLCB0aGlzLmxvZ2dlcik7CiAgICBpZihjb25maWd1cmF0aW9uLmhhc093blByb3BlcnR5KHBhcmFtZXRlcikpIHsKICAgICAgdmFsdWUgPSBjb25maWd1cmF0aW9uW3BhcmFtZXRlcl07CgogICAgICAvLyBJZiB0aGUgcGFyYW1ldGVyIHZhbHVlIGlzIGFuIGVtcHR5IGFycmF5LCBidXQgc2hvdWxkbid0IGJlLCBhcHBseSBpdHMgZGVmYXVsdCB2YWx1ZS4KICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgJiYgdmFsdWUubGVuZ3RoID09PSAwICYmIGVtcHR5QXJyYXlzQWxsb3dlZC5pbmRleE9mKHBhcmFtZXRlcikgPCAwKSB7IGNvbnRpbnVlOyB9CgogICAgICAvLyBJZiB0aGUgcGFyYW1ldGVyIHZhbHVlIGlzIG51bGwsIGVtcHR5IHN0cmluZywgb3IgdW5kZWZpbmVkIHRoZW4gYXBwbHkgaXRzIGRlZmF1bHQgdmFsdWUuCiAgICAgIGlmKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSAiIiB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7IGNvbnRpbnVlOyB9CiAgICAgIC8vIElmIGl0J3MgYSBudW1iZXIgd2l0aCBOYU4gdmFsdWUgdGhlbiBhbHNvIGFwcGx5IGl0cyBkZWZhdWx0IHZhbHVlLgogICAgICAvLyBOT1RFOiBKUyBkb2VzIG5vdCBhbGxvdyAidmFsdWUgPT09IE5hTiIsIHRoZSBmb2xsb3dpbmcgZG9lcyB0aGUgd29yazoKICAgICAgZWxzZSBpZih0eXBlb2YodmFsdWUpID09PSAnbnVtYmVyJyAmJiBpc05hTih2YWx1ZSkpIHsgY29udGludWU7IH0KCiAgICAgIGNoZWNrZWRfdmFsdWUgPSBVQS5jb25maWd1cmF0aW9uX2NoZWNrLm9wdGlvbmFsW3BhcmFtZXRlcl0odmFsdWUpOwogICAgICBpZiAoY2hlY2tlZF92YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgc2V0dGluZ3NbcGFyYW1ldGVyXSA9IGNoZWNrZWRfdmFsdWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IFNJUC5FeGNlcHRpb25zLkNvbmZpZ3VyYXRpb25FcnJvcihwYXJhbWV0ZXIsIHZhbHVlKTsKICAgICAgfQogICAgfQogIH0KCiAgLy8gU2FuaXR5IENoZWNrcwoKICAvLyBDb25uZWN0aW9uIHJlY292ZXJ5IGludGVydmFscwogIGlmKHNldHRpbmdzLmNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsIDwgc2V0dGluZ3MuY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwpIHsKICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5Db25maWd1cmF0aW9uRXJyb3IoJ2Nvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsJywgc2V0dGluZ3MuY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWwpOwogIH0KCiAgLy8gUG9zdCBDb25maWd1cmF0aW9uIFByb2Nlc3MKCiAgLy8gQWxsb3cgcGFzc2luZyAwIG51bWJlciBhcyBkaXNwbGF5TmFtZS4KICBpZiAoc2V0dGluZ3MuZGlzcGxheU5hbWUgPT09IDApIHsKICAgIHNldHRpbmdzLmRpc3BsYXlOYW1lID0gJzAnOwogIH0KCiAgLy8gSW5zdGFuY2UtaWQgZm9yIEdSVVUKICBpZiAoIXNldHRpbmdzLmluc3RhbmNlSWQpIHsKICAgIHNldHRpbmdzLmluc3RhbmNlSWQgPSBTSVAuVXRpbHMubmV3VVVJRCgpOwogIH0KCiAgLy8gc2lwanNJZCBpbnN0YW5jZSBwYXJhbWV0ZXIuIFN0YXRpYyByYW5kb20gdGFnIG9mIGxlbmd0aCA1CiAgc2V0dGluZ3Muc2lwanNJZCA9IFNJUC5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbig1KTsKCiAgLy8gU3RyaW5nIGNvbnRhaW5pbmcgc2V0dGluZ3MudXJpIHdpdGhvdXQgc2NoZW1lIGFuZCB1c2VyLgogIGhvc3Rwb3J0UGFyYW1zID0gc2V0dGluZ3MudXJpLmNsb25lKCk7CiAgaG9zdHBvcnRQYXJhbXMudXNlciA9IG51bGw7CiAgc2V0dGluZ3MuaG9zdHBvcnRQYXJhbXMgPSBob3N0cG9ydFBhcmFtcy50b1JhdygpLnJlcGxhY2UoL15zaXA6L2ksICcnKTsKCiAgLyogQ2hlY2sgd2hldGhlciBhdXRob3JpemF0aW9uVXNlciBpcyBleHBsaWNpdGx5IGRlZmluZWQuCiAgICogVGFrZSAnc2V0dGluZ3MudXJpLnVzZXInIHZhbHVlIGlmIG5vdC4KICAgKi8KICBpZiAoIXNldHRpbmdzLmF1dGhvcml6YXRpb25Vc2VyKSB7CiAgICBzZXR0aW5ncy5hdXRob3JpemF0aW9uVXNlciA9IHNldHRpbmdzLnVyaS51c2VyOwogIH0KCiAgLyogSWYgbm8gJ3JlZ2lzdHJhclNlcnZlcicgaXMgc2V0IHVzZSB0aGUgJ3VyaScgdmFsdWUgd2l0aG91dCB1c2VyIHBvcnRpb24uICovCiAgaWYgKCFzZXR0aW5ncy5yZWdpc3RyYXJTZXJ2ZXIpIHsKICAgIHJlZ2lzdHJhclNlcnZlciA9IHNldHRpbmdzLnVyaS5jbG9uZSgpOwogICAgcmVnaXN0cmFyU2VydmVyLnVzZXIgPSBudWxsOwogICAgc2V0dGluZ3MucmVnaXN0cmFyU2VydmVyID0gcmVnaXN0cmFyU2VydmVyOwogIH0KCiAgLy8gVXNlciBub0Fuc3dlclRpbWVvdXQKICBzZXR0aW5ncy5ub0Fuc3dlclRpbWVvdXQgPSBzZXR0aW5ncy5ub0Fuc3dlclRpbWVvdXQgKiAxMDAwOwoKICAvLyBWaWEgSG9zdAogIGlmIChzZXR0aW5ncy5oYWNrSXBJbkNvbnRhY3QpIHsKICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MuaGFja0lwSW5Db250YWN0ID09PSAnYm9vbGVhbicpIHsKICAgICAgc2V0dGluZ3MudmlhSG9zdCA9IFNJUC5VdGlscy5nZXRSYW5kb21UZXN0TmV0SVAoKTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGVvZiBzZXR0aW5ncy5oYWNrSXBJbkNvbnRhY3QgPT09ICdzdHJpbmcnKSB7CiAgICAgIHNldHRpbmdzLnZpYUhvc3QgPSBzZXR0aW5ncy5oYWNrSXBJbkNvbnRhY3Q7CiAgICB9CiAgfQoKICAvLyBDb250YWN0IHRyYW5zcG9ydCBwYXJhbWV0ZXIKICBpZiAoc2V0dGluZ3MuaGFja1dzc0luVHJhbnNwb3J0KSB7CiAgICBzZXR0aW5ncy5jb250YWN0VHJhbnNwb3J0ID0gJ3dzcyc7CiAgfQoKICB0aGlzLmNvbnRhY3QgPSB7CiAgICBwdWJfZ3J1dTogbnVsbCwKICAgIHRlbXBfZ3J1dTogbnVsbCwKICAgIHVyaTogbmV3IFNJUC5VUkkoJ3NpcCcsIFNJUC5VdGlscy5jcmVhdGVSYW5kb21Ub2tlbig4KSwgc2V0dGluZ3MudmlhSG9zdCwgbnVsbCwge3RyYW5zcG9ydDogc2V0dGluZ3MuY29udGFjdFRyYW5zcG9ydH0pLAogICAgdG9TdHJpbmc6IGZ1bmN0aW9uKG9wdGlvbnMpewogICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKCiAgICAgIHZhcgogICAgICAgIGFub255bW91cyA9IG9wdGlvbnMuYW5vbnltb3VzIHx8IG51bGwsCiAgICAgICAgb3V0Ym91bmQgPSBvcHRpb25zLm91dGJvdW5kIHx8IG51bGwsCiAgICAgICAgY29udGFjdCA9ICc8JzsKCiAgICAgIGlmIChhbm9ueW1vdXMpIHsKICAgICAgICBjb250YWN0ICs9ICh0aGlzLnRlbXBfZ3J1dSB8fCAoJ3NpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWQ7dHJhbnNwb3J0PScrc2V0dGluZ3MuY29udGFjdFRyYW5zcG9ydCkpLnRvU3RyaW5nKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29udGFjdCArPSAodGhpcy5wdWJfZ3J1dSB8fCB0aGlzLnVyaSkudG9TdHJpbmcoKTsKICAgICAgfQoKICAgICAgaWYgKG91dGJvdW5kKSB7CiAgICAgICAgY29udGFjdCArPSAnO29iJzsKICAgICAgfQoKICAgICAgY29udGFjdCArPSAnPic7CgogICAgICByZXR1cm4gY29udGFjdDsKICAgIH0KICB9OwoKICAvLyBtZWRpYSBvdmVycmlkZXMgbWVkaWFDb25zdHJhaW50cwogIFNJUC5VdGlscy5vcHRpb25zT3ZlcnJpZGUoc2V0dGluZ3MsICdtZWRpYScsICdtZWRpYUNvbnN0cmFpbnRzJywgdHJ1ZSwgdGhpcy5sb2dnZXIpOwoKICAvLyBGaWxsIHRoZSB2YWx1ZSBvZiB0aGUgY29uZmlndXJhdGlvbl9za2VsZXRvbgogIGZvcihwYXJhbWV0ZXIgaW4gc2V0dGluZ3MpIHsKICAgIFVBLmNvbmZpZ3VyYXRpb25fc2tlbGV0b25bcGFyYW1ldGVyXS52YWx1ZSA9IHNldHRpbmdzW3BhcmFtZXRlcl07CiAgfQoKICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLmNvbmZpZ3VyYXRpb24sIFVBLmNvbmZpZ3VyYXRpb25fc2tlbGV0b24pOwoKICAvLyBDbGVhbiBVQS5jb25maWd1cmF0aW9uX3NrZWxldG9uCiAgZm9yKHBhcmFtZXRlciBpbiBzZXR0aW5ncykgewogICAgVUEuY29uZmlndXJhdGlvbl9za2VsZXRvbltwYXJhbWV0ZXJdLnZhbHVlID0gJyc7CiAgfQoKICB0aGlzLmxvZ2dlci5sb2coJ2NvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBhZnRlciB2YWxpZGF0aW9uOicpOwogIGZvcihwYXJhbWV0ZXIgaW4gc2V0dGluZ3MpIHsKICAgIHN3aXRjaChwYXJhbWV0ZXIpIHsKICAgICAgY2FzZSAndXJpJzoKICAgICAgY2FzZSAncmVnaXN0cmFyU2VydmVyJzoKICAgICAgY2FzZSAnbWVkaWFIYW5kbGVyRmFjdG9yeSc6CiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCfCtyAnICsgcGFyYW1ldGVyICsgJzogJyArIHNldHRpbmdzW3BhcmFtZXRlcl0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdwYXNzd29yZCc6CiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCfCtyAnICsgcGFyYW1ldGVyICsgJzogJyArICdOT1QgU0hPV04nKTsKICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ8K3ICcgKyBwYXJhbWV0ZXIgKyAnOiAnICsgSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3NbcGFyYW1ldGVyXSkpOwogICAgfQogIH0KCiAgcmV0dXJuOwp9OwoKLyoqCiAqIENvbmZpZ3VyYXRpb24gT2JqZWN0IHNrZWxldG9uLgogKiBAcHJpdmF0ZQogKi8KVUEuY29uZmlndXJhdGlvbl9za2VsZXRvbiA9IChmdW5jdGlvbigpIHsKICB2YXIgaWR4LCAgcGFyYW1ldGVyLAogICAgc2tlbGV0b24gPSB7fSwKICAgIHBhcmFtZXRlcnMgPSBbCiAgICAgIC8vIEludGVybmFsIHBhcmFtZXRlcnMKICAgICAgInNpcGpzSWQiLAogICAgICAiaG9zdHBvcnRQYXJhbXMiLAoKICAgICAgLy8gT3B0aW9uYWwgdXNlciBjb25maWd1cmFibGUgcGFyYW1ldGVycwogICAgICAidXJpIiwKICAgICAgIndzU2VydmVycyIsCiAgICAgICJhdXRob3JpemF0aW9uVXNlciIsCiAgICAgICJjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCIsCiAgICAgICJjb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbCIsCiAgICAgICJrZWVwQWxpdmVJbnRlcnZhbCIsCiAgICAgICJleHRyYVN1cHBvcnRlZCIsCiAgICAgICJkaXNwbGF5TmFtZSIsCiAgICAgICJoYWNrVmlhVGNwIiwgLy8gZmFsc2UuCiAgICAgICJoYWNrSXBJbkNvbnRhY3QiLCAvL2ZhbHNlCiAgICAgICJoYWNrV3NzSW5UcmFuc3BvcnQiLCAvL2ZhbHNlCiAgICAgICJoYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzIiwgLy9mYWxzZQogICAgICAiY29udGFjdFRyYW5zcG9ydCIsIC8vICd3cycKICAgICAgImZvcmNlUnBvcnQiLCAvLyBmYWxzZQogICAgICAiaWNlQ2hlY2tpbmdUaW1lb3V0IiwKICAgICAgImluc3RhbmNlSWQiLAogICAgICAibm9BbnN3ZXJUaW1lb3V0IiwgLy8gMzAgc2Vjb25kcy4KICAgICAgInBhc3N3b3JkIiwKICAgICAgInJlZ2lzdGVyRXhwaXJlcyIsIC8vIDYwMCBzZWNvbmRzLgogICAgICAicmVnaXN0cmFyU2VydmVyIiwKICAgICAgInJlbGlhYmxlIiwKICAgICAgInJlbDEwMCIsCiAgICAgICJyZXBsYWNlcyIsCiAgICAgICJ1c2VyQWdlbnRTdHJpbmciLCAvL1NJUC5DLlVTRVJfQUdFTlQKICAgICAgImF1dG9zdGFydCIsCiAgICAgICJzdHVuU2VydmVycyIsCiAgICAgICJ0cmFjZVNpcCIsCiAgICAgICJ0dXJuU2VydmVycyIsCiAgICAgICJ1c2VQcmVsb2FkZWRSb3V0ZSIsCiAgICAgICJ3c1NlcnZlck1heFJlY29ubmVjdGlvbiIsCiAgICAgICJ3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQiLAogICAgICAibWVkaWFIYW5kbGVyRmFjdG9yeSIsCiAgICAgICJtZWRpYSIsCiAgICAgICJtZWRpYUNvbnN0cmFpbnRzIiwKICAgICAgImF1dGhlbnRpY2F0aW9uRmFjdG9yeSIsCgogICAgICAvLyBQb3N0LWNvbmZpZ3VyYXRpb24gZ2VuZXJhdGVkIHBhcmFtZXRlcnMKICAgICAgInZpYV9jb3JlX3ZhbHVlIiwKICAgICAgInZpYUhvc3QiCiAgICBdOwoKICBmb3IoaWR4IGluIHBhcmFtZXRlcnMpIHsKICAgIHBhcmFtZXRlciA9IHBhcmFtZXRlcnNbaWR4XTsKICAgIHNrZWxldG9uW3BhcmFtZXRlcl0gPSB7CiAgICAgIHZhbHVlOiAnJywKICAgICAgd3JpdGFibGU6IGZhbHNlLAogICAgICBjb25maWd1cmFibGU6IGZhbHNlCiAgICB9OwogIH0KCiAgc2tlbGV0b25bJ3JlZ2lzdGVyJ10gPSB7CiAgICB2YWx1ZTogJycsCiAgICB3cml0YWJsZTogdHJ1ZSwKICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UKICB9OwoKICByZXR1cm4gc2tlbGV0b247Cn0oKSk7CgovKioKICogQ29uZmlndXJhdGlvbiBjaGVja2VyLgogKiBAcHJpdmF0ZQogKiBAcmV0dXJuIHtCb29sZWFufQogKi8KVUEuY29uZmlndXJhdGlvbl9jaGVjayA9IHsKICBtYW5kYXRvcnk6IHsKICB9LAoKICBvcHRpb25hbDogewoKICAgIHVyaTogZnVuY3Rpb24odXJpKSB7CiAgICAgIHZhciBwYXJzZWQ7CgogICAgICBpZiAoISgvXnNpcDovaSkudGVzdCh1cmkpKSB7CiAgICAgICAgdXJpID0gU0lQLkMuU0lQICsgJzonICsgdXJpOwogICAgICB9CiAgICAgIHBhcnNlZCA9IFNJUC5VUkkucGFyc2UodXJpKTsKCiAgICAgIGlmKCFwYXJzZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZighcGFyc2VkLnVzZXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhcnNlZDsKICAgICAgfQogICAgfSwKCiAgICAvL05vdGU6IHRoaXMgZnVuY3Rpb24gdXNlZCB0byBjYWxsICd0aGlzLmxvZ2dlci5lcnJvcicgYnV0IGNhbGxpbmcgJ3RoaXMnIHdpdGggYW55dGhpbmcgaGVyZSBpcyBpbnZhbGlkCiAgICB3c1NlcnZlcnM6IGZ1bmN0aW9uKHdzU2VydmVycykgewogICAgICB2YXIgaWR4LCBsZW5ndGgsIHVybDsKCiAgICAgIC8qIEFsbG93IGRlZmluaW5nIHdzU2VydmVycyBwYXJhbWV0ZXIgYXM6CiAgICAgICAqICBTdHJpbmc6ICJob3N0IgogICAgICAgKiAgQXJyYXkgb2YgU3RyaW5nczogWyJob3N0MSIsICJob3N0MiJdCiAgICAgICAqICBBcnJheSBvZiBPYmplY3RzOiBbe3dzX3VyaToiaG9zdDEiLCB3ZWlnaHQ6MX0sIHt3c191cmk6Imhvc3QyIiwgd2VpZ2h0OjB9XQogICAgICAgKiAgQXJyYXkgb2YgT2JqZWN0cyBhbmQgU3RyaW5nczogW3t3c191cmk6Imhvc3QxIn0sICJob3N0MiJdCiAgICAgICAqLwogICAgICBpZiAodHlwZW9mIHdzU2VydmVycyA9PT0gJ3N0cmluZycpIHsKICAgICAgICB3c1NlcnZlcnMgPSBbe3dzX3VyaTogd3NTZXJ2ZXJzfV07CiAgICAgIH0gZWxzZSBpZiAod3NTZXJ2ZXJzIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICBsZW5ndGggPSB3c1NlcnZlcnMubGVuZ3RoOwogICAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewogICAgICAgICAgaWYgKHR5cGVvZiB3c1NlcnZlcnNbaWR4XSA9PT0gJ3N0cmluZycpewogICAgICAgICAgICB3c1NlcnZlcnNbaWR4XSA9IHt3c191cmk6IHdzU2VydmVyc1tpZHhdfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAod3NTZXJ2ZXJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgbGVuZ3RoID0gd3NTZXJ2ZXJzLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaWYgKCF3c1NlcnZlcnNbaWR4XS53c191cmkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHdzU2VydmVyc1tpZHhdLndlaWdodCAmJiAhTnVtYmVyKHdzU2VydmVyc1tpZHhdLndlaWdodCkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHVybCA9IFNJUC5HcmFtbWFyLnBhcnNlKHdzU2VydmVyc1tpZHhdLndzX3VyaSwgJ2Fic29sdXRlVVJJJyk7CgogICAgICAgIGlmKHVybCA9PT0gLTEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYoWyd3c3MnLCAnd3MnLCAndWRwJ10uaW5kZXhPZih1cmwuc2NoZW1lKSA8IDApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd3NTZXJ2ZXJzW2lkeF0uc2lwX3VyaSA9ICc8c2lwOicgKyB1cmwuaG9zdCArICh1cmwucG9ydCA/ICc6JyArIHVybC5wb3J0IDogJycpICsgJzt0cmFuc3BvcnQ9JyArIHVybC5zY2hlbWUucmVwbGFjZSgvXndzcyQvaSwgJ3dzJykgKyAnO2xyPic7CgogICAgICAgICAgaWYgKCF3c1NlcnZlcnNbaWR4XS53ZWlnaHQpIHsKICAgICAgICAgICAgd3NTZXJ2ZXJzW2lkeF0ud2VpZ2h0ID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICB3c1NlcnZlcnNbaWR4XS5zdGF0dXMgPSAwOwogICAgICAgICAgd3NTZXJ2ZXJzW2lkeF0uc2NoZW1lID0gdXJsLnNjaGVtZS50b1VwcGVyQ2FzZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gd3NTZXJ2ZXJzOwogICAgfSwKCiAgICBhdXRob3JpemF0aW9uVXNlcjogZnVuY3Rpb24oYXV0aG9yaXphdGlvblVzZXIpIHsKICAgICAgaWYoU0lQLkdyYW1tYXIucGFyc2UoJyInKyBhdXRob3JpemF0aW9uVXNlciArJyInLCAncXVvdGVkX3N0cmluZycpID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYXV0aG9yaXphdGlvblVzZXI7CiAgICAgIH0KICAgIH0sCgogICAgY29ubmVjdGlvblJlY292ZXJ5TWF4SW50ZXJ2YWw6IGZ1bmN0aW9uKGNvbm5lY3Rpb25SZWNvdmVyeU1heEludGVydmFsKSB7CiAgICAgIHZhciB2YWx1ZTsKICAgICAgaWYoU0lQLlV0aWxzLmlzRGVjaW1hbChjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCkpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcihjb25uZWN0aW9uUmVjb3ZlcnlNYXhJbnRlcnZhbCk7CiAgICAgICAgaWYodmFsdWUgPiAwKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGNvbm5lY3Rpb25SZWNvdmVyeU1pbkludGVydmFsOiBmdW5jdGlvbihjb25uZWN0aW9uUmVjb3ZlcnlNaW5JbnRlcnZhbCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmKFNJUC5VdGlscy5pc0RlY2ltYWwoY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwpKSB7CiAgICAgICAgdmFsdWUgPSBOdW1iZXIoY29ubmVjdGlvblJlY292ZXJ5TWluSW50ZXJ2YWwpOwogICAgICAgIGlmKHZhbHVlID4gMCkgewogICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBkaXNwbGF5TmFtZTogZnVuY3Rpb24oZGlzcGxheU5hbWUpIHsKICAgICAgaWYoU0lQLkdyYW1tYXIucGFyc2UoJyInICsgZGlzcGxheU5hbWUgKyAnIicsICdkaXNwbGF5TmFtZScpID09PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZGlzcGxheU5hbWU7CiAgICAgIH0KICAgIH0sCgogICAgaGFja1ZpYVRjcDogZnVuY3Rpb24oaGFja1ZpYVRjcCkgewogICAgICBpZiAodHlwZW9mIGhhY2tWaWFUY3AgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBoYWNrVmlhVGNwOwogICAgICB9CiAgICB9LAoKICAgIGhhY2tJcEluQ29udGFjdDogZnVuY3Rpb24oaGFja0lwSW5Db250YWN0KSB7CiAgICAgIGlmICh0eXBlb2YgaGFja0lwSW5Db250YWN0ID09PSAnYm9vbGVhbicpIHsKICAgICAgICByZXR1cm4gaGFja0lwSW5Db250YWN0OwogICAgICB9CiAgICAgIGVsc2UgaWYgKHR5cGVvZiBoYWNrSXBJbkNvbnRhY3QgPT09ICdzdHJpbmcnICYmIFNJUC5HcmFtbWFyLnBhcnNlKGhhY2tJcEluQ29udGFjdCwgJ2hvc3QnKSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gaGFja0lwSW5Db250YWN0OwogICAgICB9CiAgICB9LAoKICAgIGljZUNoZWNraW5nVGltZW91dDogZnVuY3Rpb24oaWNlQ2hlY2tpbmdUaW1lb3V0KSB7CiAgICAgIGlmKFNJUC5VdGlscy5pc0RlY2ltYWwoaWNlQ2hlY2tpbmdUaW1lb3V0KSkgewogICAgICAgIHJldHVybiBNYXRoLm1heCg1MDAsIGljZUNoZWNraW5nVGltZW91dCk7CiAgICAgIH0KICAgIH0sCgogICAgaGFja1dzc0luVHJhbnNwb3J0OiBmdW5jdGlvbihoYWNrV3NzSW5UcmFuc3BvcnQpIHsKICAgICAgaWYgKHR5cGVvZiBoYWNrV3NzSW5UcmFuc3BvcnQgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBoYWNrV3NzSW5UcmFuc3BvcnQ7CiAgICAgIH0KICAgIH0sCgogICAgaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFnczogZnVuY3Rpb24oaGFja0FsbG93VW5yZWdpc3RlcmVkT3B0aW9uVGFncykgewogICAgICBpZiAodHlwZW9mIGhhY2tBbGxvd1VucmVnaXN0ZXJlZE9wdGlvblRhZ3MgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBoYWNrQWxsb3dVbnJlZ2lzdGVyZWRPcHRpb25UYWdzOwogICAgICB9CiAgICB9LAoKICAgIGNvbnRhY3RUcmFuc3BvcnQ6IGZ1bmN0aW9uKGNvbnRhY3RUcmFuc3BvcnQpIHsKICAgICAgaWYgKHR5cGVvZiBjb250YWN0VHJhbnNwb3J0ID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBjb250YWN0VHJhbnNwb3J0OwogICAgICB9CiAgICB9LAoKICAgIGZvcmNlUnBvcnQ6IGZ1bmN0aW9uKGZvcmNlUnBvcnQpIHsKICAgICAgaWYgKHR5cGVvZiBmb3JjZVJwb3J0ID09PSAnYm9vbGVhbicpIHsKICAgICAgICByZXR1cm4gZm9yY2VScG9ydDsKICAgICAgfQogICAgfSwKCiAgICBpbnN0YW5jZUlkOiBmdW5jdGlvbihpbnN0YW5jZUlkKSB7CiAgICAgIGlmKHR5cGVvZiBpbnN0YW5jZUlkICE9PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCgvXnV1aWQ6L2kudGVzdChpbnN0YW5jZUlkKSkpIHsKICAgICAgICBpbnN0YW5jZUlkID0gaW5zdGFuY2VJZC5zdWJzdHIoNSk7CiAgICAgIH0KCiAgICAgIGlmKFNJUC5HcmFtbWFyLnBhcnNlKGluc3RhbmNlSWQsICd1dWlkJykgPT09IC0xKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBpbnN0YW5jZUlkOwogICAgICB9CiAgICB9LAoKICAgIGtlZXBBbGl2ZUludGVydmFsOiBmdW5jdGlvbihrZWVwQWxpdmVJbnRlcnZhbCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKGtlZXBBbGl2ZUludGVydmFsKSkgewogICAgICAgIHZhbHVlID0gTnVtYmVyKGtlZXBBbGl2ZUludGVydmFsKTsKICAgICAgICBpZiAodmFsdWUgPiAwKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGV4dHJhU3VwcG9ydGVkOiBmdW5jdGlvbihvcHRpb25UYWdzKSB7CiAgICAgIHZhciBpZHgsIGxlbmd0aDsKCiAgICAgIGlmICghKG9wdGlvblRhZ3MgaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxlbmd0aCA9IG9wdGlvblRhZ3MubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICBpZiAodHlwZW9mIG9wdGlvblRhZ3NbaWR4XSAhPT0gJ3N0cmluZycpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRpb25UYWdzOwogICAgfSwKCiAgICBub0Fuc3dlclRpbWVvdXQ6IGZ1bmN0aW9uKG5vQW5zd2VyVGltZW91dCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKG5vQW5zd2VyVGltZW91dCkpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcihub0Fuc3dlclRpbWVvdXQpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgcGFzc3dvcmQ6IGZ1bmN0aW9uKHBhc3N3b3JkKSB7CiAgICAgIHJldHVybiBTdHJpbmcocGFzc3dvcmQpOwogICAgfSwKCiAgICByZWwxMDA6IGZ1bmN0aW9uKHJlbDEwMCkgewogICAgICBpZihyZWwxMDAgPT09IFNJUC5DLnN1cHBvcnRlZC5SRVFVSVJFRCkgewogICAgICAgIHJldHVybiBTSVAuQy5zdXBwb3J0ZWQuUkVRVUlSRUQ7CiAgICAgIH0gZWxzZSBpZiAocmVsMTAwID09PSBTSVAuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEKSB7CiAgICAgICAgcmV0dXJuIFNJUC5DLnN1cHBvcnRlZC5TVVBQT1JURUQ7CiAgICAgIH0gZWxzZSAgewogICAgICAgIHJldHVybiBTSVAuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUQ7CiAgICAgIH0KICAgIH0sCgogICAgcmVwbGFjZXM6IGZ1bmN0aW9uKHJlcGxhY2VzKSB7CiAgICAgIGlmKHJlcGxhY2VzID09PSBTSVAuQy5zdXBwb3J0ZWQuUkVRVUlSRUQpIHsKICAgICAgICByZXR1cm4gU0lQLkMuc3VwcG9ydGVkLlJFUVVJUkVEOwogICAgICB9IGVsc2UgaWYgKHJlcGxhY2VzID09PSBTSVAuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEKSB7CiAgICAgICAgcmV0dXJuIFNJUC5DLnN1cHBvcnRlZC5TVVBQT1JURUQ7CiAgICAgIH0gZWxzZSAgewogICAgICAgIHJldHVybiBTSVAuQy5zdXBwb3J0ZWQuVU5TVVBQT1JURUQ7CiAgICAgIH0KICAgIH0sCgogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKHJlZ2lzdGVyKSB7CiAgICAgIGlmICh0eXBlb2YgcmVnaXN0ZXIgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiByZWdpc3RlcjsKICAgICAgfQogICAgfSwKCiAgICByZWdpc3RlckV4cGlyZXM6IGZ1bmN0aW9uKHJlZ2lzdGVyRXhwaXJlcykgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKHJlZ2lzdGVyRXhwaXJlcykpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcihyZWdpc3RlckV4cGlyZXMpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgcmVnaXN0cmFyU2VydmVyOiBmdW5jdGlvbihyZWdpc3RyYXJTZXJ2ZXIpIHsKICAgICAgdmFyIHBhcnNlZDsKCiAgICAgIGlmKHR5cGVvZiByZWdpc3RyYXJTZXJ2ZXIgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIS9ec2lwOi9pLnRlc3QocmVnaXN0cmFyU2VydmVyKSkgewogICAgICAgIHJlZ2lzdHJhclNlcnZlciA9IFNJUC5DLlNJUCArICc6JyArIHJlZ2lzdHJhclNlcnZlcjsKICAgICAgfQogICAgICBwYXJzZWQgPSBTSVAuVVJJLnBhcnNlKHJlZ2lzdHJhclNlcnZlcik7CgogICAgICBpZighcGFyc2VkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYocGFyc2VkLnVzZXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhcnNlZDsKICAgICAgfQogICAgfSwKCiAgICBzdHVuU2VydmVyczogZnVuY3Rpb24oc3R1blNlcnZlcnMpIHsKICAgICAgdmFyIGlkeCwgbGVuZ3RoLCBzdHVuX3NlcnZlcjsKCiAgICAgIGlmICh0eXBlb2Ygc3R1blNlcnZlcnMgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgc3R1blNlcnZlcnMgPSBbc3R1blNlcnZlcnNdOwogICAgICB9IGVsc2UgaWYgKCEoc3R1blNlcnZlcnMgaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxlbmd0aCA9IHN0dW5TZXJ2ZXJzLmxlbmd0aDsKICAgICAgZm9yIChpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgc3R1bl9zZXJ2ZXIgPSBzdHVuU2VydmVyc1tpZHhdOwogICAgICAgIGlmICghKC9ec3R1bnM/Oi8udGVzdChzdHVuX3NlcnZlcikpKSB7CiAgICAgICAgICBzdHVuX3NlcnZlciA9ICdzdHVuOicgKyBzdHVuX3NlcnZlcjsKICAgICAgICB9CgogICAgICAgIGlmKFNJUC5HcmFtbWFyLnBhcnNlKHN0dW5fc2VydmVyLCAnc3R1bl9VUkknKSA9PT0gLTEpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3R1blNlcnZlcnNbaWR4XSA9IHN0dW5fc2VydmVyOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3R1blNlcnZlcnM7CiAgICB9LAoKICAgIHRyYWNlU2lwOiBmdW5jdGlvbih0cmFjZVNpcCkgewogICAgICBpZiAodHlwZW9mIHRyYWNlU2lwID09PSAnYm9vbGVhbicpIHsKICAgICAgICByZXR1cm4gdHJhY2VTaXA7CiAgICAgIH0KICAgIH0sCgogICAgdHVyblNlcnZlcnM6IGZ1bmN0aW9uKHR1cm5TZXJ2ZXJzKSB7CiAgICAgIHZhciBpZHgsIGpkeCwgbGVuZ3RoLCB0dXJuX3NlcnZlciwgbnVtX3R1cm5fc2VydmVyX3VybHMsIHVybDsKCiAgICAgIGlmICh0dXJuU2VydmVycyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgLy8gRG8gbm90aGluZwogICAgICB9IGVsc2UgewogICAgICAgIHR1cm5TZXJ2ZXJzID0gW3R1cm5TZXJ2ZXJzXTsKICAgICAgfQoKICAgICAgbGVuZ3RoID0gdHVyblNlcnZlcnMubGVuZ3RoOwogICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKICAgICAgICB0dXJuX3NlcnZlciA9IHR1cm5TZXJ2ZXJzW2lkeF07CiAgICAgICAgLy9CYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogQWxsb3cgZGVmaW5pbmcgdGhlIHR1cm5fc2VydmVyIHVybCB3aXRoIHRoZSAnc2VydmVyJyBwcm9wZXJ0eS4KICAgICAgICBpZiAodHVybl9zZXJ2ZXIuc2VydmVyKSB7CiAgICAgICAgICB0dXJuX3NlcnZlci51cmxzID0gW3R1cm5fc2VydmVyLnNlcnZlcl07CiAgICAgICAgfQoKICAgICAgICBpZiAoIXR1cm5fc2VydmVyLnVybHMgfHwgIXR1cm5fc2VydmVyLnVzZXJuYW1lIHx8ICF0dXJuX3NlcnZlci5wYXNzd29yZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR1cm5fc2VydmVyLnVybHMgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgICAgbnVtX3R1cm5fc2VydmVyX3VybHMgPSB0dXJuX3NlcnZlci51cmxzLmxlbmd0aDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdHVybl9zZXJ2ZXIudXJscyA9IFt0dXJuX3NlcnZlci51cmxzXTsKICAgICAgICAgIG51bV90dXJuX3NlcnZlcl91cmxzID0gMTsKICAgICAgICB9CgogICAgICAgIGZvciAoamR4ID0gMDsgamR4IDwgbnVtX3R1cm5fc2VydmVyX3VybHM7IGpkeCsrKSB7CiAgICAgICAgICB1cmwgPSB0dXJuX3NlcnZlci51cmxzW2pkeF07CgogICAgICAgICAgaWYgKCEoL150dXJucz86Ly50ZXN0KHVybCkpKSB7CiAgICAgICAgICAgIHVybCA9ICd0dXJuOicgKyB1cmw7CiAgICAgICAgICB9CgogICAgICAgICAgaWYoU0lQLkdyYW1tYXIucGFyc2UodXJsLCAndHVybl9VUkknKSA9PT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHVyblNlcnZlcnM7CiAgICB9LAoKICAgIHVzZXJBZ2VudFN0cmluZzogZnVuY3Rpb24odXNlckFnZW50U3RyaW5nKSB7CiAgICAgIGlmICh0eXBlb2YgdXNlckFnZW50U3RyaW5nID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiB1c2VyQWdlbnRTdHJpbmc7CiAgICAgIH0KICAgIH0sCgogICAgdXNlUHJlbG9hZGVkUm91dGU6IGZ1bmN0aW9uKHVzZVByZWxvYWRlZFJvdXRlKSB7CiAgICAgIGlmICh0eXBlb2YgdXNlUHJlbG9hZGVkUm91dGUgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiB1c2VQcmVsb2FkZWRSb3V0ZTsKICAgICAgfQogICAgfSwKCiAgICB3c1NlcnZlck1heFJlY29ubmVjdGlvbjogZnVuY3Rpb24od3NTZXJ2ZXJNYXhSZWNvbm5lY3Rpb24pIHsKICAgICAgdmFyIHZhbHVlOwogICAgICBpZiAoU0lQLlV0aWxzLmlzRGVjaW1hbCh3c1NlcnZlck1heFJlY29ubmVjdGlvbikpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcih3c1NlcnZlck1heFJlY29ubmVjdGlvbik7CiAgICAgICAgaWYgKHZhbHVlID4gMCkgewogICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICB3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQ6IGZ1bmN0aW9uKHdzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dCkgewogICAgICB2YXIgdmFsdWU7CiAgICAgIGlmIChTSVAuVXRpbHMuaXNEZWNpbWFsKHdzU2VydmVyUmVjb25uZWN0aW9uVGltZW91dCkpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcih3c1NlcnZlclJlY29ubmVjdGlvblRpbWVvdXQpOwogICAgICAgIGlmICh2YWx1ZSA+IDApIHsKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgYXV0b3N0YXJ0OiBmdW5jdGlvbihhdXRvc3RhcnQpIHsKICAgICAgaWYgKHR5cGVvZiBhdXRvc3RhcnQgPT09ICdib29sZWFuJykgewogICAgICAgIHJldHVybiBhdXRvc3RhcnQ7CiAgICAgIH0KICAgIH0sCgogICAgbWVkaWFIYW5kbGVyRmFjdG9yeTogZnVuY3Rpb24obWVkaWFIYW5kbGVyRmFjdG9yeSkgewogICAgICBpZiAobWVkaWFIYW5kbGVyRmFjdG9yeSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgdmFyIHByb21pc2lmaWVkRmFjdG9yeSA9IGZ1bmN0aW9uIHByb21pc2lmaWVkRmFjdG9yeSAoKSB7CiAgICAgICAgICB2YXIgbWVkaWFIYW5kbGVyID0gbWVkaWFIYW5kbGVyRmFjdG9yeS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAgICAgICAgIGZ1bmN0aW9uIHBhdGNoTWV0aG9kIChtZXRob2ROYW1lKSB7CiAgICAgICAgICAgIHZhciBtZXRob2QgPSBtZWRpYUhhbmRsZXJbbWV0aG9kTmFtZV07CiAgICAgICAgICAgIGlmIChtZXRob2QubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIHZhciBjYWxsYmFja3NGaXJzdCA9IG1ldGhvZE5hbWUgPT09ICdnZXREZXNjcmlwdGlvbic7CiAgICAgICAgICAgICAgbWVkaWFIYW5kbGVyW21ldGhvZE5hbWVdID0gU0lQLlV0aWxzLnByb21pc2lmeShtZWRpYUhhbmRsZXIsIG1ldGhvZE5hbWUsIGNhbGxiYWNrc0ZpcnN0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHBhdGNoTWV0aG9kKCdnZXREZXNjcmlwdGlvbicpOwogICAgICAgICAgcGF0Y2hNZXRob2QoJ3NldERlc2NyaXB0aW9uJyk7CgogICAgICAgICAgcmV0dXJuIG1lZGlhSGFuZGxlcjsKICAgICAgICB9OwoKICAgICAgICBwcm9taXNpZmllZEZhY3RvcnkuaXNTdXBwb3J0ZWQgPSBtZWRpYUhhbmRsZXJGYWN0b3J5LmlzU3VwcG9ydGVkOwogICAgICAgIHJldHVybiBwcm9taXNpZmllZEZhY3Rvcnk7CiAgICAgIH0KICAgIH0sCgogICAgYXV0aGVudGljYXRpb25GYWN0b3J5OiBjaGVja0F1dGhlbnRpY2F0aW9uRmFjdG9yeQogIH0KfTsKClVBLkMgPSBDOwpTSVAuVUEgPSBVQTsKfTsKCn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIiA/IHdpbmRvdyA6IHt9KQp9LHt9XSwzNjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgU0lQIFVSSQogKi8KCi8qKgogKiBAYXVnbWVudHMgU0lQCiAqIEBjbGFzcyBDbGFzcyBjcmVhdGluZyBhIFNJUCBVUkkuCiAqCiAqIEBwYXJhbSB7U3RyaW5nfSBbc2NoZW1lXQogKiBAcGFyYW0ge1N0cmluZ30gW3VzZXJdCiAqIEBwYXJhbSB7U3RyaW5nfSBob3N0CiAqIEBwYXJhbSB7U3RyaW5nfSBbcG9ydF0KICogQHBhcmFtIHtPYmplY3R9IFtwYXJhbWV0ZXJzXQogKiBAcGFyYW0ge09iamVjdH0gW2hlYWRlcnNdCiAqCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKdmFyIFVSSTsKClVSSSA9IGZ1bmN0aW9uKHNjaGVtZSwgdXNlciwgaG9zdCwgcG9ydCwgcGFyYW1ldGVycywgaGVhZGVycykgewogIHZhciBwYXJhbSwgaGVhZGVyLCByYXcsIG5vcm1hbDsKCiAgLy8gQ2hlY2tzCiAgaWYoIWhvc3QpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21pc3Npbmcgb3IgaW52YWxpZCAiaG9zdCIgcGFyYW1ldGVyJyk7CiAgfQoKICAvLyBJbml0aWFsaXplIHBhcmFtZXRlcnMKICBzY2hlbWUgPSBzY2hlbWUgfHwgU0lQLkMuU0lQOwogIHRoaXMucGFyYW1ldGVycyA9IHt9OwogIHRoaXMuaGVhZGVycyA9IHt9OwoKICBmb3IgKHBhcmFtIGluIHBhcmFtZXRlcnMpIHsKICAgIHRoaXMuc2V0UGFyYW0ocGFyYW0sIHBhcmFtZXRlcnNbcGFyYW1dKTsKICB9CgogIGZvciAoaGVhZGVyIGluIGhlYWRlcnMpIHsKICAgIHRoaXMuc2V0SGVhZGVyKGhlYWRlciwgaGVhZGVyc1toZWFkZXJdKTsKICB9CgogIC8vIFJhdyBVUkkKICByYXcgPSB7CiAgICBzY2hlbWU6IHNjaGVtZSwKICAgIHVzZXI6IHVzZXIsCiAgICBob3N0OiBob3N0LAogICAgcG9ydDogcG9ydAogIH07CgogIC8vIE5vcm1hbGl6ZWQgVVJJCiAgbm9ybWFsID0gewogICAgc2NoZW1lOiBzY2hlbWUudG9Mb3dlckNhc2UoKSwKICAgIHVzZXI6IHVzZXIsCiAgICBob3N0OiBob3N0LnRvTG93ZXJDYXNlKCksCiAgICBwb3J0OiBwb3J0CiAgfTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgewogICAgX25vcm1hbDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsOyB9CiAgICB9LAoKICAgIF9yYXc6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHJhdzsgfQogICAgfSwKCiAgICBzY2hlbWU6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG5vcm1hbC5zY2hlbWU7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICByYXcuc2NoZW1lID0gdmFsdWU7CiAgICAgICAgbm9ybWFsLnNjaGVtZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7CiAgICAgIH0KICAgIH0sCgogICAgdXNlcjogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsLnVzZXI7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBub3JtYWwudXNlciA9IHJhdy51c2VyID0gdmFsdWU7CiAgICAgIH0KICAgIH0sCgogICAgaG9zdDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsLmhvc3Q7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICByYXcuaG9zdCA9IHZhbHVlOwogICAgICAgIG5vcm1hbC5ob3N0ID0gdmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgfQogICAgfSwKCiAgICBhb3I6IHsKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG5vcm1hbC51c2VyICsgJ0AnICsgbm9ybWFsLmhvc3Q7IH0KICAgIH0sCgogICAgcG9ydDogewogICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbm9ybWFsLnBvcnQ7IH0sCiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBub3JtYWwucG9ydCA9IHJhdy5wb3J0ID0gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IChwYXJzZUludCh2YWx1ZSwxMCkgfHwgbnVsbCk7CiAgICAgIH0KICAgIH0KICB9KTsKfTsKClVSSS5wcm90b3R5cGUgPSB7CiAgc2V0UGFyYW06IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKICAgIGlmKGtleSkgewogICAgICB0aGlzLnBhcmFtZXRlcnNba2V5LnRvTG93ZXJDYXNlKCldID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUgPT09IG51bGwpID8gbnVsbCA6IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKTsKICAgIH0KICB9LAoKICBnZXRQYXJhbTogZnVuY3Rpb24oa2V5KSB7CiAgICBpZihrZXkpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVyc1trZXkudG9Mb3dlckNhc2UoKV07CiAgICB9CiAgfSwKCiAgaGFzUGFyYW06IGZ1bmN0aW9uKGtleSkgewogICAgaWYoa2V5KSB7CiAgICAgIHJldHVybiAodGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGtleS50b0xvd2VyQ2FzZSgpKSAmJiB0cnVlKSB8fCBmYWxzZTsKICAgIH0KICB9LAoKICBkZWxldGVQYXJhbTogZnVuY3Rpb24ocGFyYW1ldGVyKSB7CiAgICB2YXIgdmFsdWU7CiAgICBwYXJhbWV0ZXIgPSBwYXJhbWV0ZXIudG9Mb3dlckNhc2UoKTsKICAgIGlmICh0aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkocGFyYW1ldGVyKSkgewogICAgICB2YWx1ZSA9IHRoaXMucGFyYW1ldGVyc1twYXJhbWV0ZXJdOwogICAgICBkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl07CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICB9LAoKICBjbGVhclBhcmFtczogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnBhcmFtZXRlcnMgPSB7fTsKICB9LAoKICBzZXRIZWFkZXI6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICB0aGlzLmhlYWRlcnNbU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKV0gPSAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkgPyB2YWx1ZSA6IFt2YWx1ZV07CiAgfSwKCiAgZ2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICBpZihuYW1lKSB7CiAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNbU0lQLlV0aWxzLmhlYWRlcml6ZShuYW1lKV07CiAgICB9CiAgfSwKCiAgaGFzSGVhZGVyOiBmdW5jdGlvbihuYW1lKSB7CiAgICBpZihuYW1lKSB7CiAgICAgIHJldHVybiAodGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KFNJUC5VdGlscy5oZWFkZXJpemUobmFtZSkpICYmIHRydWUpIHx8IGZhbHNlOwogICAgfQogIH0sCgogIGRlbGV0ZUhlYWRlcjogZnVuY3Rpb24oaGVhZGVyKSB7CiAgICB2YXIgdmFsdWU7CiAgICBoZWFkZXIgPSBTSVAuVXRpbHMuaGVhZGVyaXplKGhlYWRlcik7CiAgICBpZih0aGlzLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoaGVhZGVyKSkgewogICAgICB2YWx1ZSA9IHRoaXMuaGVhZGVyc1toZWFkZXJdOwogICAgICBkZWxldGUgdGhpcy5oZWFkZXJzW2hlYWRlcl07CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICB9LAoKICBjbGVhckhlYWRlcnM6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5oZWFkZXJzID0ge307CiAgfSwKCiAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIG5ldyBVUkkoCiAgICAgIHRoaXMuX3Jhdy5zY2hlbWUsCiAgICAgIHRoaXMuX3Jhdy51c2VyLAogICAgICB0aGlzLl9yYXcuaG9zdCwKICAgICAgdGhpcy5fcmF3LnBvcnQsCiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbWV0ZXJzKSksCiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5oZWFkZXJzKSkpOwogIH0sCgogIHRvUmF3OiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLl90b1N0cmluZyh0aGlzLl9yYXcpOwogIH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB0aGlzLl90b1N0cmluZyh0aGlzLl9ub3JtYWwpOwogIH0sCgogIF90b1N0cmluZzogZnVuY3Rpb24odXJpKSB7CiAgICB2YXIgaGVhZGVyLCBwYXJhbWV0ZXIsIGlkeCwgdXJpU3RyaW5nLCBoZWFkZXJzID0gW107CgogICAgdXJpU3RyaW5nICA9IHVyaS5zY2hlbWUgKyAnOic7CiAgICAvLyBhZGQgc2xhc2hlcyBpZiBpdCdzIG5vdCBhIHNpcChzKSBVUkkKICAgIGlmICghdXJpLnNjaGVtZS50b0xvd2VyQ2FzZSgpLm1hdGNoKCJec2lwcz8kIikpIHsKICAgICAgdXJpU3RyaW5nICs9ICIvLyI7CiAgICB9CiAgICBpZiAodXJpLnVzZXIpIHsKICAgICAgdXJpU3RyaW5nICs9IFNJUC5VdGlscy5lc2NhcGVVc2VyKHVyaS51c2VyKSArICdAJzsKICAgIH0KICAgIHVyaVN0cmluZyArPSB1cmkuaG9zdDsKICAgIGlmICh1cmkucG9ydCB8fCB1cmkucG9ydCA9PT0gMCkgewogICAgICB1cmlTdHJpbmcgKz0gJzonICsgdXJpLnBvcnQ7CiAgICB9CgogICAgZm9yIChwYXJhbWV0ZXIgaW4gdGhpcy5wYXJhbWV0ZXJzKSB7CiAgICAgIHVyaVN0cmluZyArPSAnOycgKyBwYXJhbWV0ZXI7CgogICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzW3BhcmFtZXRlcl0gIT09IG51bGwpIHsKICAgICAgICB1cmlTdHJpbmcgKz0gJz0nKyB0aGlzLnBhcmFtZXRlcnNbcGFyYW1ldGVyXTsKICAgICAgfQogICAgfQoKICAgIGZvcihoZWFkZXIgaW4gdGhpcy5oZWFkZXJzKSB7CiAgICAgIGZvcihpZHggaW4gdGhpcy5oZWFkZXJzW2hlYWRlcl0pIHsKICAgICAgICBoZWFkZXJzLnB1c2goaGVhZGVyICsgJz0nICsgdGhpcy5oZWFkZXJzW2hlYWRlcl1baWR4XSk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaGVhZGVycy5sZW5ndGggPiAwKSB7CiAgICAgIHVyaVN0cmluZyArPSAnPycgKyBoZWFkZXJzLmpvaW4oJyYnKTsKICAgIH0KCiAgICByZXR1cm4gdXJpU3RyaW5nOwogIH0KfTsKCgovKioKICAqIFBhcnNlIHRoZSBnaXZlbiBzdHJpbmcgYW5kIHJldHVybnMgYSBTSVAuVVJJIGluc3RhbmNlIG9yIHVuZGVmaW5lZCBpZgogICogaXQgaXMgYW4gaW52YWxpZCBVUkkuCiAgKiBAcHVibGljCiAgKiBAcGFyYW0ge1N0cmluZ30gdXJpCiAgKi8KVVJJLnBhcnNlID0gZnVuY3Rpb24odXJpKSB7CiAgdXJpID0gU0lQLkdyYW1tYXIucGFyc2UodXJpLCdTSVBfVVJJJyk7CgogIGlmICh1cmkgIT09IC0xKSB7CiAgICByZXR1cm4gdXJpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH0KfTsKClNJUC5VUkkgPSBVUkk7Cn07Cgp9LHt9XSwzNzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7CiJ1c2Ugc3RyaWN0IjsKLyoqCiAqIEBmaWxlb3ZlcnZpZXcgVXRpbHMKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7CnZhciBVdGlsczsKClV0aWxzPSB7CgogIFByb21pc2U6IGVudmlyb25tZW50LlByb21pc2UsCgogIGRlZmVyOiBmdW5jdGlvbiBkZWZlciAoKSB7CiAgICB2YXIgZGVmZXJyZWQgPSB7fTsKICAgIGRlZmVycmVkLnByb21pc2UgPSBuZXcgVXRpbHMuUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGRlZmVycmVkLnJlc29sdmUgPSByZXNvbHZlOwogICAgICBkZWZlcnJlZC5yZWplY3QgPSByZWplY3Q7CiAgICB9KTsKICAgIHJldHVybiBkZWZlcnJlZDsKICB9LAoKICBwcm9taXNpZnk6IGZ1bmN0aW9uIHByb21pc2lmeSAob2JqZWN0LCBtZXRob2ROYW1lLCBjYWxsYmFja3NGaXJzdCkgewogICAgdmFyIG9sZE1ldGhvZCA9IG9iamVjdFttZXRob2ROYW1lXTsKICAgIHJldHVybiBmdW5jdGlvbiBwcm9taXNpZmllZE1ldGhvZCAoYXJnLCBvblN1Y2Nlc3MsIG9uRmFpbHVyZSkgewogICAgICByZXR1cm4gbmV3IFV0aWxzLlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBvbGRBcmdzID0gW2FyZywgcmVzb2x2ZSwgcmVqZWN0XTsKICAgICAgICBpZiAoY2FsbGJhY2tzRmlyc3QpIHsKICAgICAgICAgIG9sZEFyZ3MgPSBbcmVzb2x2ZSwgcmVqZWN0LCBhcmddOwogICAgICAgIH0KICAgICAgICBvbGRNZXRob2QuYXBwbHkob2JqZWN0LCBvbGRBcmdzKTsKICAgICAgfSkudGhlbihvblN1Y2Nlc3MsIG9uRmFpbHVyZSk7CiAgICB9OwogIH0sCgogIGF1Z21lbnQ6IGZ1bmN0aW9uIChvYmplY3QsIGNvbnN0cnVjdG9yLCBhcmdzLCBvdmVycmlkZSkgewogICAgdmFyIGlkeCwgcHJvdG87CgogICAgLy8gQWRkIHB1YmxpYyBwcm9wZXJ0aWVzIGZyb20gY29uc3RydWN0b3IncyBwcm90b3R5cGUgb250byBvYmplY3QKICAgIHByb3RvID0gY29uc3RydWN0b3IucHJvdG90eXBlOwogICAgZm9yIChpZHggaW4gcHJvdG8pIHsKICAgICAgaWYgKG92ZXJyaWRlIHx8IG9iamVjdFtpZHhdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBvYmplY3RbaWR4XSA9IHByb3RvW2lkeF07CiAgICAgIH0KICAgIH0KCiAgICAvLyBDb25zdHJ1Y3QgdGhlIG9iamVjdCBhcyB0aG91Z2ggaXQgd2VyZSBqdXN0IGNyZWF0ZWQgYnkgY29uc3RydWN0b3IKICAgIGNvbnN0cnVjdG9yLmFwcGx5KG9iamVjdCwgYXJncyk7CiAgfSwKCiAgb3B0aW9uc092ZXJyaWRlOiBmdW5jdGlvbiAob3B0aW9ucywgd2lubmVyLCBsb3NlciwgaXNEZXByZWNhdGVkLCBsb2dnZXIsIGRlZmF1bHRWYWx1ZSkgewogICAgaWYgKGlzRGVwcmVjYXRlZCAmJiBvcHRpb25zW2xvc2VyXSkgewogICAgICBsb2dnZXIud2Fybihsb3NlciArICcgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSAnICsgd2lubmVyICsgJyBpbnN0ZWFkJyk7CiAgICB9CgogICAgaWYgKG9wdGlvbnNbd2lubmVyXSAmJiBvcHRpb25zW2xvc2VyXSkgewogICAgICBsb2dnZXIud2Fybih3aW5uZXIgKyAnIG92ZXJyaWRpbmcgJyArIGxvc2VyKTsKICAgIH0KCiAgICBvcHRpb25zW3dpbm5lcl0gPSBvcHRpb25zW3dpbm5lcl0gfHwgb3B0aW9uc1tsb3Nlcl0gfHwgZGVmYXVsdFZhbHVlOwogIH0sCgogIHN0cl91dGY4X2xlbmd0aDogZnVuY3Rpb24oc3RyaW5nKSB7CiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZykucmVwbGFjZSgvJVtBLUZcZF17Mn0vZywgJ1UnKS5sZW5ndGg7CiAgfSwKCiAgZ2VuZXJhdGVGYWtlU0RQOiBmdW5jdGlvbihib2R5KSB7CiAgICBpZiAoIWJvZHkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzdGFydCA9IGJvZHkuaW5kZXhPZignbz0nKTsKICAgIHZhciBlbmQgPSBib2R5LmluZGV4T2YoJ1xyXG4nLCBzdGFydCk7CgogICAgcmV0dXJuICd2PTBcclxuJyArIGJvZHkuc2xpY2Uoc3RhcnQsIGVuZCkgKyAnXHJcbnM9LVxyXG50PTAgMFxyXG5jPUlOIElQNCAwLjAuMC4wJzsKICB9LAoKICBpc0Z1bmN0aW9uOiBmdW5jdGlvbihmbikgewogICAgaWYgKGZuICE9PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmbikgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgaXNEZWNpbWFsOiBmdW5jdGlvbiAobnVtKSB7CiAgICByZXR1cm4gIWlzTmFOKG51bSkgJiYgKHBhcnNlRmxvYXQobnVtKSA9PT0gcGFyc2VJbnQobnVtLDEwKSk7CiAgfSwKCiAgY3JlYXRlUmFuZG9tVG9rZW46IGZ1bmN0aW9uKHNpemUsIGJhc2UpIHsKICAgIHZhciBpLCByLAogICAgICB0b2tlbiA9ICcnOwoKICAgIGJhc2UgPSBiYXNlIHx8IDMyOwoKICAgIGZvciggaT0wOyBpIDwgc2l6ZTsgaSsrICkgewogICAgICByID0gTWF0aC5yYW5kb20oKSAqIGJhc2V8MDsKICAgICAgdG9rZW4gKz0gci50b1N0cmluZyhiYXNlKTsKICAgIH0KCiAgICByZXR1cm4gdG9rZW47CiAgfSwKCiAgbmV3VGFnOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBTSVAuVXRpbHMuY3JlYXRlUmFuZG9tVG9rZW4oU0lQLlVBLkMuVEFHX0xFTkdUSCk7CiAgfSwKCiAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3VzZXJzLzEwOTUzOC9icm9vZmEKICBuZXdVVUlEOiBmdW5jdGlvbigpIHsKICAgIHZhciBVVUlEID0gICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykgewogICAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkqMTZ8MCwgdiA9IGMgPT09ICd4JyA/IHIgOiAociYweDN8MHg4KTsKICAgICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpOwogICAgfSk7CgogICAgcmV0dXJuIFVVSUQ7CiAgfSwKCiAgaG9zdFR5cGU6IGZ1bmN0aW9uKGhvc3QpIHsKICAgIGlmICghaG9zdCkgewogICAgICByZXR1cm47CiAgICB9IGVsc2UgewogICAgICBob3N0ID0gU0lQLkdyYW1tYXIucGFyc2UoaG9zdCwnaG9zdCcpOwogICAgICBpZiAoaG9zdCAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gaG9zdC5ob3N0X3R5cGU7CiAgICAgIH0KICAgIH0KICB9LAoKICAvKioKICAqIE5vcm1hbGl6ZSBTSVAgVVJJLgogICogTk9URTogSXQgZG9lcyBub3QgYWxsb3cgYSBTSVAgVVJJIHdpdGhvdXQgdXNlcm5hbWUuCiAgKiBBY2NlcHRzICdzaXAnLCAnc2lwcycgYW5kICd0ZWwnIFVSSXMgYW5kIGNvbnZlcnQgdGhlbSBpbnRvICdzaXAnLgogICogRGV0ZWN0cyB0aGUgZG9tYWluIHBhcnQgKGlmIGdpdmVuKSBhbmQgcHJvcGVybHkgaGV4LWVzY2FwZXMgdGhlIHVzZXIgcG9ydGlvbi4KICAqIElmIHRoZSB1c2VyIHBvcnRpb24gaGFzIG9ubHkgJ3RlbCcgbnVtYmVyIHN5bWJvbHMgdGhlIHVzZXIgcG9ydGlvbiBpcyBjbGVhbiBvZiAndGVsJyB2aXN1YWwgc2VwYXJhdG9ycy4KICAqIEBwcml2YXRlCiAgKiBAcGFyYW0ge1N0cmluZ30gdGFyZ2V0CiAgKiBAcGFyYW0ge1N0cmluZ30gW2RvbWFpbl0KICAqLwogIG5vcm1hbGl6ZVRhcmdldDogZnVuY3Rpb24odGFyZ2V0LCBkb21haW4pIHsKICAgIHZhciB1cmksIHRhcmdldF9hcnJheSwgdGFyZ2V0X3VzZXIsIHRhcmdldF9kb21haW47CgogICAgLy8gSWYgbm8gdGFyZ2V0IGlzIGdpdmVuIHRoZW4gcmFpc2UgYW4gZXJyb3IuCiAgICBpZiAoIXRhcmdldCkgewogICAgICByZXR1cm47CiAgICAvLyBJZiBhIFNJUC5VUkkgaW5zdGFuY2UgaXMgZ2l2ZW4gdGhlbiByZXR1cm4gaXQuCiAgICB9IGVsc2UgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFNJUC5VUkkpIHsKICAgICAgcmV0dXJuIHRhcmdldDsKCiAgICAvLyBJZiBhIHN0cmluZyBpcyBnaXZlbiBzcGxpdCBpdCBieSAnQCc6CiAgICAvLyAtIExhc3QgZnJhZ21lbnQgaXMgdGhlIGRlc2lyZWQgZG9tYWluLgogICAgLy8gLSBPdGhlcndpc2UgYXBwZW5kIHRoZSBnaXZlbiBkb21haW4gYXJndW1lbnQuCiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7CiAgICAgIHRhcmdldF9hcnJheSA9IHRhcmdldC5zcGxpdCgnQCcpOwoKICAgICAgc3dpdGNoKHRhcmdldF9hcnJheS5sZW5ndGgpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICBpZiAoIWRvbWFpbikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0YXJnZXRfdXNlciA9IHRhcmdldDsKICAgICAgICAgIHRhcmdldF9kb21haW4gPSBkb21haW47CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICB0YXJnZXRfdXNlciA9IHRhcmdldF9hcnJheVswXTsKICAgICAgICAgIHRhcmdldF9kb21haW4gPSB0YXJnZXRfYXJyYXlbMV07CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGFyZ2V0X3VzZXIgPSB0YXJnZXRfYXJyYXkuc2xpY2UoMCwgdGFyZ2V0X2FycmF5Lmxlbmd0aC0xKS5qb2luKCdAJyk7CiAgICAgICAgICB0YXJnZXRfZG9tYWluID0gdGFyZ2V0X2FycmF5W3RhcmdldF9hcnJheS5sZW5ndGgtMV07CiAgICAgIH0KCiAgICAgIC8vIFJlbW92ZSB0aGUgVVJJIHNjaGVtZSAoaWYgcHJlc2VudCkuCiAgICAgIHRhcmdldF91c2VyID0gdGFyZ2V0X3VzZXIucmVwbGFjZSgvXihzaXBzP3x0ZWwpOi9pLCAnJyk7CgogICAgICAvLyBSZW1vdmUgJ3RlbCcgdmlzdWFsIHNlcGFyYXRvcnMgaWYgdGhlIHVzZXIgcG9ydGlvbiBqdXN0IGNvbnRhaW5zICd0ZWwnIG51bWJlciBzeW1ib2xzLgogICAgICBpZiAoL15bXC1cLlwoXCldKlwrP1swLTlcLVwuXChcKV0rJC8udGVzdCh0YXJnZXRfdXNlcikpIHsKICAgICAgICB0YXJnZXRfdXNlciA9IHRhcmdldF91c2VyLnJlcGxhY2UoL1tcLVwuXChcKV0vZywgJycpOwogICAgICB9CgogICAgICAvLyBCdWlsZCB0aGUgY29tcGxldGUgU0lQIFVSSS4KICAgICAgdGFyZ2V0ID0gU0lQLkMuU0lQICsgJzonICsgU0lQLlV0aWxzLmVzY2FwZVVzZXIodGFyZ2V0X3VzZXIpICsgJ0AnICsgdGFyZ2V0X2RvbWFpbjsKCiAgICAgIC8vIEZpbmFsbHkgcGFyc2UgdGhlIHJlc3VsdGluZyBVUkkuCiAgICAgIGlmICh1cmkgPSBTSVAuVVJJLnBhcnNlKHRhcmdldCkpIHsKICAgICAgICByZXR1cm4gdXJpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0sCgogIC8qKgogICogSGV4LWVzY2FwZSBhIFNJUCBVUkkgdXNlci4KICAqIEBwcml2YXRlCiAgKiBAcGFyYW0ge1N0cmluZ30gdXNlcgogICovCiAgZXNjYXBlVXNlcjogZnVuY3Rpb24odXNlcikgewogICAgLy8gRG9uJ3QgaGV4LWVzY2FwZSAnOicgKCUzQSksICcrJyAoJTJCKSwgJz8nICglM0YiKSwgJy8nICglMkYpLgogICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChkZWNvZGVVUklDb21wb25lbnQodXNlcikpLnJlcGxhY2UoLyUzQS9pZywgJzonKS5yZXBsYWNlKC8lMkIvaWcsICcrJykucmVwbGFjZSgvJTNGL2lnLCAnPycpLnJlcGxhY2UoLyUyRi9pZywgJy8nKTsKICB9LAoKICBoZWFkZXJpemU6IGZ1bmN0aW9uKHN0cmluZykgewogICAgdmFyIGV4Y2VwdGlvbnMgPSB7CiAgICAgICdDYWxsLUlkJzogJ0NhbGwtSUQnLAogICAgICAnQ3NlcSc6ICdDU2VxJywKICAgICAgJ01pbi1TZSc6ICdNaW4tU0UnLAogICAgICAnUmFjayc6ICdSQWNrJywKICAgICAgJ1JzZXEnOiAnUlNlcScsCiAgICAgICdXd3ctQXV0aGVudGljYXRlJzogJ1dXVy1BdXRoZW50aWNhdGUnCiAgICAgIH0sCiAgICAgIG5hbWUgPSBzdHJpbmcudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csJy0nKS5zcGxpdCgnLScpLAogICAgICBobmFtZSA9ICcnLAogICAgICBwYXJ0cyA9IG5hbWUubGVuZ3RoLCBwYXJ0OwoKICAgIGZvciAocGFydCA9IDA7IHBhcnQgPCBwYXJ0czsgcGFydCsrKSB7CiAgICAgIGlmIChwYXJ0ICE9PSAwKSB7CiAgICAgICAgaG5hbWUgKz0nLSc7CiAgICAgIH0KICAgICAgaG5hbWUgKz0gbmFtZVtwYXJ0XS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStuYW1lW3BhcnRdLnN1YnN0cmluZygxKTsKICAgIH0KICAgIGlmIChleGNlcHRpb25zW2huYW1lXSkgewogICAgICBobmFtZSA9IGV4Y2VwdGlvbnNbaG5hbWVdOwogICAgfQogICAgcmV0dXJuIGhuYW1lOwogIH0sCgogIHNpcEVycm9yQ2F1c2U6IGZ1bmN0aW9uKHN0YXR1c19jb2RlKSB7CiAgICB2YXIgY2F1c2U7CgogICAgZm9yIChjYXVzZSBpbiBTSVAuQy5TSVBfRVJST1JfQ0FVU0VTKSB7CiAgICAgIGlmIChTSVAuQy5TSVBfRVJST1JfQ0FVU0VTW2NhdXNlXS5pbmRleE9mKHN0YXR1c19jb2RlKSAhPT0gLTEpIHsKICAgICAgICByZXR1cm4gU0lQLkMuY2F1c2VzW2NhdXNlXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBTSVAuQy5jYXVzZXMuU0lQX0ZBSUxVUkVfQ09ERTsKICB9LAoKICBnZXRSZWFzb25QaHJhc2U6IGZ1bmN0aW9uIGdldFJlYXNvblBocmFzZSAoY29kZSwgc3BlY2lmaWMpIHsKICAgIHJldHVybiBzcGVjaWZpYyB8fCBTSVAuQy5SRUFTT05fUEhSQVNFW2NvZGVdIHx8ICcnOwogIH0sCgogIGdldFJlYXNvbkhlYWRlclZhbHVlOiBmdW5jdGlvbiBnZXRSZWFzb25IZWFkZXJWYWx1ZSAoY29kZSwgcmVhc29uKSB7CiAgICByZWFzb24gPSBTSVAuVXRpbHMuZ2V0UmVhc29uUGhyYXNlKGNvZGUsIHJlYXNvbik7CiAgICByZXR1cm4gJ1NJUCA7Y2F1c2U9JyArIGNvZGUgKyAnIDt0ZXh0PSInICsgcmVhc29uICsgJyInOwogIH0sCgogIGdldENhbmNlbFJlYXNvbjogZnVuY3Rpb24gZ2V0Q2FuY2VsUmVhc29uIChjb2RlLCByZWFzb24pIHsKICAgIGlmIChjb2RlICYmIGNvZGUgPCAyMDAgfHwgY29kZSA+IDY5OSkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHN0YXR1c19jb2RlOiAnICsgY29kZSk7CiAgICB9IGVsc2UgaWYgKGNvZGUpIHsKICAgICAgcmV0dXJuIFNJUC5VdGlscy5nZXRSZWFzb25IZWFkZXJWYWx1ZShjb2RlLCByZWFzb24pOwogICAgfQogIH0sCgogIGJ1aWxkU3RhdHVzTGluZTogZnVuY3Rpb24gYnVpbGRTdGF0dXNMaW5lIChjb2RlLCByZWFzb24pIHsKICAgIGNvZGUgPSBjb2RlIHx8IG51bGw7CiAgICByZWFzb24gPSByZWFzb24gfHwgbnVsbDsKCiAgICAvLyBWYWxpZGF0ZSBjb2RlIGFuZCByZWFzb24gdmFsdWVzCiAgICBpZiAoIWNvZGUgfHwgKGNvZGUgPCAxMDAgfHwgY29kZSA+IDY5OSkpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBzdGF0dXNfY29kZTogJysgY29kZSk7CiAgICB9IGVsc2UgaWYgKHJlYXNvbiAmJiB0eXBlb2YgcmVhc29uICE9PSAnc3RyaW5nJyAmJiAhKHJlYXNvbiBpbnN0YW5jZW9mIFN0cmluZykpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCByZWFzb25fcGhyYXNlOiAnKyByZWFzb24pOwogICAgfQoKICAgIHJlYXNvbiA9IFV0aWxzLmdldFJlYXNvblBocmFzZShjb2RlLCByZWFzb24pOwoKICAgIHJldHVybiAnU0lQLzIuMCAnICsgY29kZSArICcgJyArIHJlYXNvbiArICdcclxuJzsKICB9LAoKICAvKioKICAqIEdlbmVyYXRlIGEgcmFuZG9tIFRlc3QtTmV0IElQIChodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM1NzM1KQogICogQHByaXZhdGUKICAqLwogIGdldFJhbmRvbVRlc3ROZXRJUDogZnVuY3Rpb24oKSB7CiAgICBmdW5jdGlvbiBnZXRPY3RldChmcm9tLHRvKSB7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHRvLWZyb20rMSkrZnJvbSk7CiAgICB9CiAgICByZXR1cm4gJzE5Mi4wLjIuJyArIGdldE9jdGV0KDEsIDI1NCk7CiAgfSwKCiAgLy8gTUQ1IChNZXNzYWdlLURpZ2VzdCBBbGdvcml0aG0pIGh0dHA6Ly93d3cud2VidG9vbGtpdC5pbmZvCiAgY2FsY3VsYXRlTUQ1OiBmdW5jdGlvbihzdHJpbmcpIHsKICAgIGZ1bmN0aW9uIFJvdGF0ZUxlZnQobFZhbHVlLCBpU2hpZnRCaXRzKSB7CiAgICAgIHJldHVybiAobFZhbHVlPDxpU2hpZnRCaXRzKSB8IChsVmFsdWU+Pj4oMzItaVNoaWZ0Qml0cykpOwogICAgfQoKICAgIGZ1bmN0aW9uIEFkZFVuc2lnbmVkKGxYLGxZKSB7CiAgICAgIHZhciBsWDQsbFk0LGxYOCxsWTgsbFJlc3VsdDsKICAgICAgbFg4ID0gKGxYICYgMHg4MDAwMDAwMCk7CiAgICAgIGxZOCA9IChsWSAmIDB4ODAwMDAwMDApOwogICAgICBsWDQgPSAobFggJiAweDQwMDAwMDAwKTsKICAgICAgbFk0ID0gKGxZICYgMHg0MDAwMDAwMCk7CiAgICAgIGxSZXN1bHQgPSAobFggJiAweDNGRkZGRkZGKSsobFkgJiAweDNGRkZGRkZGKTsKICAgICAgaWYgKGxYNCAmIGxZNCkgewogICAgICAgIHJldHVybiAobFJlc3VsdCBeIDB4ODAwMDAwMDAgXiBsWDggXiBsWTgpOwogICAgICB9CiAgICAgIGlmIChsWDQgfCBsWTQpIHsKICAgICAgICBpZiAobFJlc3VsdCAmIDB4NDAwMDAwMDApIHsKICAgICAgICAgIHJldHVybiAobFJlc3VsdCBeIDB4QzAwMDAwMDAgXiBsWDggXiBsWTgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gKGxSZXN1bHQgXiAweDQwMDAwMDAwIF4gbFg4IF4gbFk4KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIChsUmVzdWx0IF4gbFg4IF4gbFk4KTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIEYoeCx5LHopIHsKICAgICAgcmV0dXJuICh4ICYgeSkgfCAoKH54KSAmIHopOwogICAgfQoKICAgIGZ1bmN0aW9uIEcoeCx5LHopIHsKICAgICAgcmV0dXJuICh4ICYgeikgfCAoeSAmICh+eikpOwogICAgfQoKICAgIGZ1bmN0aW9uIEgoeCx5LHopIHsKICAgICAgcmV0dXJuICh4IF4geSBeIHopOwogICAgfQoKICAgIGZ1bmN0aW9uIEkoeCx5LHopIHsKICAgICAgcmV0dXJuICh5IF4gKHggfCAofnopKSk7CiAgICB9CgogICAgZnVuY3Rpb24gRkYoYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEYoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gR0coYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEcoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gSEgoYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEgoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gSUkoYSxiLGMsZCx4LHMsYWMpIHsKICAgICAgYSA9IEFkZFVuc2lnbmVkKGEsIEFkZFVuc2lnbmVkKEFkZFVuc2lnbmVkKEkoYiwgYywgZCksIHgpLCBhYykpOwogICAgICByZXR1cm4gQWRkVW5zaWduZWQoUm90YXRlTGVmdChhLCBzKSwgYik7CiAgICB9CgogICAgZnVuY3Rpb24gQ29udmVydFRvV29yZEFycmF5KHN0cmluZykgewogICAgICB2YXIgbFdvcmRDb3VudDsKICAgICAgdmFyIGxNZXNzYWdlTGVuZ3RoID0gc3RyaW5nLmxlbmd0aDsKICAgICAgdmFyIGxOdW1iZXJPZldvcmRzX3RlbXAxPWxNZXNzYWdlTGVuZ3RoICsgODsKICAgICAgdmFyIGxOdW1iZXJPZldvcmRzX3RlbXAyPShsTnVtYmVyT2ZXb3Jkc190ZW1wMS0obE51bWJlck9mV29yZHNfdGVtcDEgJSA2NCkpLzY0OwogICAgICB2YXIgbE51bWJlck9mV29yZHMgPSAobE51bWJlck9mV29yZHNfdGVtcDIrMSkqMTY7CiAgICAgIHZhciBsV29yZEFycmF5PUFycmF5KGxOdW1iZXJPZldvcmRzLTEpOwogICAgICB2YXIgbEJ5dGVQb3NpdGlvbiA9IDA7CiAgICAgIHZhciBsQnl0ZUNvdW50ID0gMDsKICAgICAgd2hpbGUgKCBsQnl0ZUNvdW50IDwgbE1lc3NhZ2VMZW5ndGggKSB7CiAgICAgICAgbFdvcmRDb3VudCA9IChsQnl0ZUNvdW50LShsQnl0ZUNvdW50ICUgNCkpLzQ7CiAgICAgICAgbEJ5dGVQb3NpdGlvbiA9IChsQnl0ZUNvdW50ICUgNCkqODsKICAgICAgICBsV29yZEFycmF5W2xXb3JkQ291bnRdID0gKGxXb3JkQXJyYXlbbFdvcmRDb3VudF0gfCAoc3RyaW5nLmNoYXJDb2RlQXQobEJ5dGVDb3VudCk8PGxCeXRlUG9zaXRpb24pKTsKICAgICAgICBsQnl0ZUNvdW50Kys7CiAgICAgIH0KICAgICAgbFdvcmRDb3VudCA9IChsQnl0ZUNvdW50LShsQnl0ZUNvdW50ICUgNCkpLzQ7CiAgICAgIGxCeXRlUG9zaXRpb24gPSAobEJ5dGVDb3VudCAlIDQpKjg7CiAgICAgIGxXb3JkQXJyYXlbbFdvcmRDb3VudF0gPSBsV29yZEFycmF5W2xXb3JkQ291bnRdIHwgKDB4ODA8PGxCeXRlUG9zaXRpb24pOwogICAgICBsV29yZEFycmF5W2xOdW1iZXJPZldvcmRzLTJdID0gbE1lc3NhZ2VMZW5ndGg8PDM7CiAgICAgIGxXb3JkQXJyYXlbbE51bWJlck9mV29yZHMtMV0gPSBsTWVzc2FnZUxlbmd0aD4+PjI5OwogICAgICByZXR1cm4gbFdvcmRBcnJheTsKICAgIH0KCiAgICBmdW5jdGlvbiBXb3JkVG9IZXgobFZhbHVlKSB7CiAgICAgIHZhciBXb3JkVG9IZXhWYWx1ZT0iIixXb3JkVG9IZXhWYWx1ZV90ZW1wPSIiLGxCeXRlLGxDb3VudDsKICAgICAgZm9yIChsQ291bnQgPSAwO2xDb3VudDw9MztsQ291bnQrKykgewogICAgICAgIGxCeXRlID0gKGxWYWx1ZT4+PihsQ291bnQqOCkpICYgMjU1OwogICAgICAgIFdvcmRUb0hleFZhbHVlX3RlbXAgPSAiMCIgKyBsQnl0ZS50b1N0cmluZygxNik7CiAgICAgICAgV29yZFRvSGV4VmFsdWUgPSBXb3JkVG9IZXhWYWx1ZSArIFdvcmRUb0hleFZhbHVlX3RlbXAuc3Vic3RyKFdvcmRUb0hleFZhbHVlX3RlbXAubGVuZ3RoLTIsMik7CiAgICAgIH0KICAgICAgcmV0dXJuIFdvcmRUb0hleFZhbHVlOwogICAgfQoKICAgIGZ1bmN0aW9uIFV0ZjhFbmNvZGUoc3RyaW5nKSB7CiAgICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cclxuL2csIlxuIik7CiAgICAgIHZhciB1dGZ0ZXh0ID0gIiI7CgogICAgICBmb3IgKHZhciBuID0gMDsgbiA8IHN0cmluZy5sZW5ndGg7IG4rKykgewogICAgICAgIHZhciBjID0gc3RyaW5nLmNoYXJDb2RlQXQobik7CgogICAgICAgIGlmIChjIDwgMTI4KSB7CiAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYoKGMgPiAxMjcpICYmIChjIDwgMjA0OCkpIHsKICAgICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyA+PiA2KSB8IDE5Mik7CiAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyA+PiAxMikgfCAyMjQpOwogICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyA+PiA2KSAmIDYzKSB8IDEyOCk7CiAgICAgICAgICB1dGZ0ZXh0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGMgJiA2MykgfCAxMjgpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdXRmdGV4dDsKICAgIH0KCiAgICB2YXIgeD1bXTsKICAgIHZhciBrLEFBLEJCLENDLERELGEsYixjLGQ7CiAgICB2YXIgUzExPTcsIFMxMj0xMiwgUzEzPTE3LCBTMTQ9MjI7CiAgICB2YXIgUzIxPTUsIFMyMj05ICwgUzIzPTE0LCBTMjQ9MjA7CiAgICB2YXIgUzMxPTQsIFMzMj0xMSwgUzMzPTE2LCBTMzQ9MjM7CiAgICB2YXIgUzQxPTYsIFM0Mj0xMCwgUzQzPTE1LCBTNDQ9MjE7CgogICAgc3RyaW5nID0gVXRmOEVuY29kZShzdHJpbmcpOwoKICAgIHggPSBDb252ZXJ0VG9Xb3JkQXJyYXkoc3RyaW5nKTsKCiAgICBhID0gMHg2NzQ1MjMwMTsgYiA9IDB4RUZDREFCODk7IGMgPSAweDk4QkFEQ0ZFOyBkID0gMHgxMDMyNTQ3NjsKCiAgICBmb3IgKGs9MDtrPHgubGVuZ3RoO2srPTE2KSB7CiAgICAgIEFBPWE7IEJCPWI7IENDPWM7IEREPWQ7CiAgICAgIGE9RkYoYSxiLGMsZCx4W2srMF0sIFMxMSwweEQ3NkFBNDc4KTsKICAgICAgZD1GRihkLGEsYixjLHhbaysxXSwgUzEyLDB4RThDN0I3NTYpOwogICAgICBjPUZGKGMsZCxhLGIseFtrKzJdLCBTMTMsMHgyNDIwNzBEQik7CiAgICAgIGI9RkYoYixjLGQsYSx4W2srM10sIFMxNCwweEMxQkRDRUVFKTsKICAgICAgYT1GRihhLGIsYyxkLHhbays0XSwgUzExLDB4RjU3QzBGQUYpOwogICAgICBkPUZGKGQsYSxiLGMseFtrKzVdLCBTMTIsMHg0Nzg3QzYyQSk7CiAgICAgIGM9RkYoYyxkLGEsYix4W2srNl0sIFMxMywweEE4MzA0NjEzKTsKICAgICAgYj1GRihiLGMsZCxhLHhbays3XSwgUzE0LDB4RkQ0Njk1MDEpOwogICAgICBhPUZGKGEsYixjLGQseFtrKzhdLCBTMTEsMHg2OTgwOThEOCk7CiAgICAgIGQ9RkYoZCxhLGIsYyx4W2srOV0sIFMxMiwweDhCNDRGN0FGKTsKICAgICAgYz1GRihjLGQsYSxiLHhbaysxMF0sUzEzLDB4RkZGRjVCQjEpOwogICAgICBiPUZGKGIsYyxkLGEseFtrKzExXSxTMTQsMHg4OTVDRDdCRSk7CiAgICAgIGE9RkYoYSxiLGMsZCx4W2srMTJdLFMxMSwweDZCOTAxMTIyKTsKICAgICAgZD1GRihkLGEsYixjLHhbaysxM10sUzEyLDB4RkQ5ODcxOTMpOwogICAgICBjPUZGKGMsZCxhLGIseFtrKzE0XSxTMTMsMHhBNjc5NDM4RSk7CiAgICAgIGI9RkYoYixjLGQsYSx4W2srMTVdLFMxNCwweDQ5QjQwODIxKTsKICAgICAgYT1HRyhhLGIsYyxkLHhbaysxXSwgUzIxLDB4RjYxRTI1NjIpOwogICAgICBkPUdHKGQsYSxiLGMseFtrKzZdLCBTMjIsMHhDMDQwQjM0MCk7CiAgICAgIGM9R0coYyxkLGEsYix4W2srMTFdLFMyMywweDI2NUU1QTUxKTsKICAgICAgYj1HRyhiLGMsZCxhLHhbayswXSwgUzI0LDB4RTlCNkM3QUEpOwogICAgICBhPUdHKGEsYixjLGQseFtrKzVdLCBTMjEsMHhENjJGMTA1RCk7CiAgICAgIGQ9R0coZCxhLGIsYyx4W2srMTBdLFMyMiwweDI0NDE0NTMpOwogICAgICBjPUdHKGMsZCxhLGIseFtrKzE1XSxTMjMsMHhEOEExRTY4MSk7CiAgICAgIGI9R0coYixjLGQsYSx4W2srNF0sIFMyNCwweEU3RDNGQkM4KTsKICAgICAgYT1HRyhhLGIsYyxkLHhbays5XSwgUzIxLDB4MjFFMUNERTYpOwogICAgICBkPUdHKGQsYSxiLGMseFtrKzE0XSxTMjIsMHhDMzM3MDdENik7CiAgICAgIGM9R0coYyxkLGEsYix4W2srM10sIFMyMywweEY0RDUwRDg3KTsKICAgICAgYj1HRyhiLGMsZCxhLHhbays4XSwgUzI0LDB4NDU1QTE0RUQpOwogICAgICBhPUdHKGEsYixjLGQseFtrKzEzXSxTMjEsMHhBOUUzRTkwNSk7CiAgICAgIGQ9R0coZCxhLGIsYyx4W2srMl0sIFMyMiwweEZDRUZBM0Y4KTsKICAgICAgYz1HRyhjLGQsYSxiLHhbays3XSwgUzIzLDB4Njc2RjAyRDkpOwogICAgICBiPUdHKGIsYyxkLGEseFtrKzEyXSxTMjQsMHg4RDJBNEM4QSk7CiAgICAgIGE9SEgoYSxiLGMsZCx4W2srNV0sIFMzMSwweEZGRkEzOTQyKTsKICAgICAgZD1ISChkLGEsYixjLHhbays4XSwgUzMyLDB4ODc3MUY2ODEpOwogICAgICBjPUhIKGMsZCxhLGIseFtrKzExXSxTMzMsMHg2RDlENjEyMik7CiAgICAgIGI9SEgoYixjLGQsYSx4W2srMTRdLFMzNCwweEZERTUzODBDKTsKICAgICAgYT1ISChhLGIsYyxkLHhbaysxXSwgUzMxLDB4QTRCRUVBNDQpOwogICAgICBkPUhIKGQsYSxiLGMseFtrKzRdLCBTMzIsMHg0QkRFQ0ZBOSk7CiAgICAgIGM9SEgoYyxkLGEsYix4W2srN10sIFMzMywweEY2QkI0QjYwKTsKICAgICAgYj1ISChiLGMsZCxhLHhbaysxMF0sUzM0LDB4QkVCRkJDNzApOwogICAgICBhPUhIKGEsYixjLGQseFtrKzEzXSxTMzEsMHgyODlCN0VDNik7CiAgICAgIGQ9SEgoZCxhLGIsYyx4W2srMF0sIFMzMiwweEVBQTEyN0ZBKTsKICAgICAgYz1ISChjLGQsYSxiLHhbayszXSwgUzMzLDB4RDRFRjMwODUpOwogICAgICBiPUhIKGIsYyxkLGEseFtrKzZdLCBTMzQsMHg0ODgxRDA1KTsKICAgICAgYT1ISChhLGIsYyxkLHhbays5XSwgUzMxLDB4RDlENEQwMzkpOwogICAgICBkPUhIKGQsYSxiLGMseFtrKzEyXSxTMzIsMHhFNkRCOTlFNSk7CiAgICAgIGM9SEgoYyxkLGEsYix4W2srMTVdLFMzMywweDFGQTI3Q0Y4KTsKICAgICAgYj1ISChiLGMsZCxhLHhbaysyXSwgUzM0LDB4QzRBQzU2NjUpOwogICAgICBhPUlJKGEsYixjLGQseFtrKzBdLCBTNDEsMHhGNDI5MjI0NCk7CiAgICAgIGQ9SUkoZCxhLGIsYyx4W2srN10sIFM0MiwweDQzMkFGRjk3KTsKICAgICAgYz1JSShjLGQsYSxiLHhbaysxNF0sUzQzLDB4QUI5NDIzQTcpOwogICAgICBiPUlJKGIsYyxkLGEseFtrKzVdLCBTNDQsMHhGQzkzQTAzOSk7CiAgICAgIGE9SUkoYSxiLGMsZCx4W2srMTJdLFM0MSwweDY1NUI1OUMzKTsKICAgICAgZD1JSShkLGEsYixjLHhbayszXSwgUzQyLDB4OEYwQ0NDOTIpOwogICAgICBjPUlJKGMsZCxhLGIseFtrKzEwXSxTNDMsMHhGRkVGRjQ3RCk7CiAgICAgIGI9SUkoYixjLGQsYSx4W2srMV0sIFM0NCwweDg1ODQ1REQxKTsKICAgICAgYT1JSShhLGIsYyxkLHhbays4XSwgUzQxLDB4NkZBODdFNEYpOwogICAgICBkPUlJKGQsYSxiLGMseFtrKzE1XSxTNDIsMHhGRTJDRTZFMCk7CiAgICAgIGM9SUkoYyxkLGEsYix4W2srNl0sIFM0MywweEEzMDE0MzE0KTsKICAgICAgYj1JSShiLGMsZCxhLHhbaysxM10sUzQ0LDB4NEUwODExQTEpOwogICAgICBhPUlJKGEsYixjLGQseFtrKzRdLCBTNDEsMHhGNzUzN0U4Mik7CiAgICAgIGQ9SUkoZCxhLGIsYyx4W2srMTFdLFM0MiwweEJEM0FGMjM1KTsKICAgICAgYz1JSShjLGQsYSxiLHhbaysyXSwgUzQzLDB4MkFEN0QyQkIpOwogICAgICBiPUlJKGIsYyxkLGEseFtrKzldLCBTNDQsMHhFQjg2RDM5MSk7CiAgICAgIGE9QWRkVW5zaWduZWQoYSxBQSk7CiAgICAgIGI9QWRkVW5zaWduZWQoYixCQik7CiAgICAgIGM9QWRkVW5zaWduZWQoYyxDQyk7CiAgICAgIGQ9QWRkVW5zaWduZWQoZCxERCk7CiAgICB9CgogICAgdmFyIHRlbXAgPSBXb3JkVG9IZXgoYSkrV29yZFRvSGV4KGIpK1dvcmRUb0hleChjKStXb3JkVG9IZXgoZCk7CgogICAgcmV0dXJuIHRlbXAudG9Mb3dlckNhc2UoKTsKICB9Cn07CgpTSVAuVXRpbHMgPSBVdGlsczsKfTsKCn0se31dLDM4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBXZWJSVEMKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVAsIGVudmlyb25tZW50KSB7CnZhciBXZWJSVEM7CgpXZWJSVEMgPSB7fTsKCldlYlJUQy5NZWRpYUhhbmRsZXIgPSByZXF1aXJlKCcuL1dlYlJUQy9NZWRpYUhhbmRsZXInKShTSVApOwpXZWJSVEMuTWVkaWFTdHJlYW1NYW5hZ2VyID0gcmVxdWlyZSgnLi9XZWJSVEMvTWVkaWFTdHJlYW1NYW5hZ2VyJykoU0lQLCBlbnZpcm9ubWVudCk7Cgp2YXIgX2lzU3VwcG9ydGVkOwoKV2ViUlRDLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewogIGlmIChfaXNTdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIF9pc1N1cHBvcnRlZDsKICB9CgogIFdlYlJUQy5NZWRpYVN0cmVhbSA9IGVudmlyb25tZW50Lk1lZGlhU3RyZWFtOwogIFdlYlJUQy5nZXRVc2VyTWVkaWEgPSBlbnZpcm9ubWVudC5nZXRVc2VyTWVkaWE7CiAgV2ViUlRDLlJUQ1BlZXJDb25uZWN0aW9uID0gZW52aXJvbm1lbnQuUlRDUGVlckNvbm5lY3Rpb247CiAgV2ViUlRDLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IGVudmlyb25tZW50LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbjsKCiAgaWYgKFdlYlJUQy5SVENQZWVyQ29ubmVjdGlvbiAmJiBXZWJSVEMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSB7CiAgICBpZiAoV2ViUlRDLmdldFVzZXJNZWRpYSkgewogICAgICBXZWJSVEMuZ2V0VXNlck1lZGlhID0gU0lQLlV0aWxzLnByb21pc2lmeShlbnZpcm9ubWVudCwgJ2dldFVzZXJNZWRpYScpOwogICAgfQogICAgX2lzU3VwcG9ydGVkID0gdHJ1ZTsKICB9CiAgZWxzZSB7CiAgICBfaXNTdXBwb3J0ZWQgPSBmYWxzZTsKICB9CiAgcmV0dXJuIF9pc1N1cHBvcnRlZDsKfTsKCnJldHVybiBXZWJSVEM7Cn07Cgp9LHsiLi9XZWJSVEMvTWVkaWFIYW5kbGVyIjozOSwiLi9XZWJSVEMvTWVkaWFTdHJlYW1NYW5hZ2VyIjo0MH1dLDM5OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBNZWRpYUhhbmRsZXIKICovCgovKiBNZWRpYUhhbmRsZXIKICogQGNsYXNzIFBlZXJDb25uZWN0aW9uIGhlbHBlciBDbGFzcy4KICogQHBhcmFtIHtTSVAuU2Vzc2lvbn0gc2Vzc2lvbgogKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdCiAqIEBwYXJhbSB7U0lQLldlYlJUQy5NZWRpYVN0cmVhbU1hbmFnZXJ9IFtvcHRpb25zLm1lZGlhU3RyZWFtTWFuYWdlcl0KICogICAgICAgIFRoZSBNZWRpYVN0cmVhbU1hbmFnZXIgdG8gYWNxdWlyZS9yZWxlYXNlIHN0cmVhbXMgZnJvbS90by4KICogICAgICAgIElmIG5vdCBwcm92aWRlZCwgYSBkZWZhdWx0IE1lZGlhU3RyZWFtTWFuYWdlciB3aWxsIGJlIHVzZWQuCiAqLwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChTSVApIHsKCnZhciBNZWRpYUhhbmRsZXIgPSBmdW5jdGlvbihzZXNzaW9uLCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogIHRoaXMubG9nZ2VyID0gc2Vzc2lvbi51YS5nZXRMb2dnZXIoJ3NpcC5pbnZpdGVjb250ZXh0Lm1lZGlhaGFuZGxlcicsIHNlc3Npb24uaWQpOwogIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247CiAgdGhpcy5sb2NhbE1lZGlhID0gbnVsbDsKICB0aGlzLnJlYWR5ID0gdHJ1ZTsKICB0aGlzLm1lZGlhU3RyZWFtTWFuYWdlciA9IG9wdGlvbnMubWVkaWFTdHJlYW1NYW5hZ2VyIHx8IG5ldyBTSVAuV2ViUlRDLk1lZGlhU3RyZWFtTWFuYWdlcih0aGlzLmxvZ2dlcik7CiAgdGhpcy5hdWRpb011dGVkID0gZmFsc2U7CiAgdGhpcy52aWRlb011dGVkID0gZmFsc2U7CgogIC8vIG9sZCBpbml0KCkgZnJvbSBoZXJlIG9uCiAgdmFyIHNlcnZlcnMgPSB0aGlzLnByZXBhcmVJY2VTZXJ2ZXJzKG9wdGlvbnMuc3R1blNlcnZlcnMsIG9wdGlvbnMudHVyblNlcnZlcnMpOwogIHRoaXMuUlRDQ29uc3RyYWludHMgPSBvcHRpb25zLlJUQ0NvbnN0cmFpbnRzIHx8IHt9OwoKICB0aGlzLmluaXRQZWVyQ29ubmVjdGlvbihzZXJ2ZXJzLCB0aGlzLlJUQ0NvbnN0cmFpbnRzKTsKCiAgZnVuY3Rpb24gc2VsZkVtaXQobWgsIGV2ZW50KSB7CiAgICBpZiAobWgubWVkaWFTdHJlYW1NYW5hZ2VyLm9uKSB7CiAgICAgIG1oLm1lZGlhU3RyZWFtTWFuYWdlci5vbihldmVudCwgZnVuY3Rpb24gKCkgewogICAgICAgIG1oLmVtaXQuYXBwbHkobWgsIFtldmVudF0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICBzZWxmRW1pdCh0aGlzLCAndXNlck1lZGlhUmVxdWVzdCcpOwogIHNlbGZFbWl0KHRoaXMsICd1c2VyTWVkaWEnKTsKICBzZWxmRW1pdCh0aGlzLCAndXNlck1lZGlhRmFpbGVkJyk7Cn07CgpNZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3RvcnkgPSBmdW5jdGlvbiBkZWZhdWx0RmFjdG9yeSAoc2Vzc2lvbiwgb3B0aW9ucykgewogIHJldHVybiBuZXcgTWVkaWFIYW5kbGVyKHNlc3Npb24sIG9wdGlvbnMpOwp9OwpNZWRpYUhhbmRsZXIuZGVmYXVsdEZhY3RvcnkuaXNTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIFNJUC5XZWJSVEMuaXNTdXBwb3J0ZWQoKTsKfTsKCk1lZGlhSGFuZGxlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNJUC5NZWRpYUhhbmRsZXIucHJvdG90eXBlLCB7Ci8vIEZ1bmN0aW9ucyB0aGUgc2Vzc2lvbiBjYW4gdXNlCiAgaXNSZWFkeToge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gaXNSZWFkeSAoKSB7CiAgICByZXR1cm4gdGhpcy5yZWFkeTsKICB9fSwKCiAgY2xvc2U6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlICgpIHsKICAgIHRoaXMubG9nZ2VyLmxvZygnY2xvc2luZyBQZWVyQ29ubmVjdGlvbicpOwogICAgdGhpcy5fcmVtb3RlU3RyZWFtcyA9IFtdOwogICAgLy8gaGF2ZSB0byBjaGVjayBzaWduYWxpbmdTdGF0ZSBzaW5jZSB0aGlzLmNsb3NlKCkgZ2V0cyBjYWxsZWQgbXVsdGlwbGUgdGltZXMKICAgIC8vIFRPRE8gZmlndXJlIG91dCB3aHkgdGhhdCBoYXBwZW5zCiAgICBpZih0aGlzLnBlZXJDb25uZWN0aW9uICYmIHRoaXMucGVlckNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUgIT09ICdjbG9zZWQnKSB7CiAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKTsKCiAgICAgIGlmKHRoaXMubG9jYWxNZWRpYSkgewogICAgICAgIHRoaXMubWVkaWFTdHJlYW1NYW5hZ2VyLnJlbGVhc2UodGhpcy5sb2NhbE1lZGlhKTsKICAgICAgfQogICAgfQogIH19LAoKICAvKioKICAgKiBAcGFyYW0ge1NJUC5XZWJSVEMuTWVkaWFTdHJlYW0gfCAoZ2V0VXNlck1lZGlhIGNvbnN0cmFpbnRzKX0gW21lZGlhSGludF0KICAgKiAgICAgICAgdGhlIE1lZGlhU3RyZWFtIChvciB0aGUgY29uc3RyYWludHMgZGVzY3JpYmluZyBpdCkgdG8gYmUgdXNlZCBmb3IgdGhlIHNlc3Npb24KICAgKi8KICBnZXREZXNjcmlwdGlvbjoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gZ2V0RGVzY3JpcHRpb24gKG1lZGlhSGludCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdmFyIGFjcXVpcmUgPSBzZWxmLm1lZGlhU3RyZWFtTWFuYWdlci5hY3F1aXJlOwogICAgaWYgKGFjcXVpcmUubGVuZ3RoID4gMSkgewogICAgICBhY3F1aXJlID0gU0lQLlV0aWxzLnByb21pc2lmeSh0aGlzLm1lZGlhU3RyZWFtTWFuYWdlciwgJ2FjcXVpcmUnLCB0cnVlKTsKICAgIH0KICAgIG1lZGlhSGludCA9IG1lZGlhSGludCB8fCB7fTsKICAgIGlmIChtZWRpYUhpbnQuZGF0YUNoYW5uZWwgPT09IHRydWUpIHsKICAgICAgbWVkaWFIaW50LmRhdGFDaGFubmVsID0ge307CiAgICB9CiAgICB0aGlzLm1lZGlhSGludCA9IG1lZGlhSGludDsKCiAgICAvKgogICAgICogMS4gYWNxdWlyZSBzdHJlYW1zIChza2lwIGlmIE1lZGlhU3RyZWFtcyBwYXNzZWQgaW4pCiAgICAgKiAyLiBhZGRTdHJlYW1zCiAgICAgKiAzLiBjcmVhdGVPZmZlci9jcmVhdGVBbnN3ZXIKICAgICAqLwoKICAgIHZhciBzdHJlYW1Qcm9taXNlOwogICAgaWYgKHNlbGYubG9jYWxNZWRpYSkgewogICAgICBzZWxmLmxvZ2dlci5sb2coJ2FscmVhZHkgaGF2ZSBsb2NhbCBtZWRpYScpOwogICAgICBzdHJlYW1Qcm9taXNlID0gU0lQLlV0aWxzLlByb21pc2UucmVzb2x2ZShzZWxmLmxvY2FsTWVkaWEpOwogICAgfQogICAgZWxzZSB7CiAgICAgIHNlbGYubG9nZ2VyLmxvZygnYWNxdWlyaW5nIGxvY2FsIG1lZGlhJyk7CiAgICAgIHN0cmVhbVByb21pc2UgPSBhY3F1aXJlLmNhbGwoc2VsZi5tZWRpYVN0cmVhbU1hbmFnZXIsIG1lZGlhSGludCkKICAgICAgICAudGhlbihmdW5jdGlvbiBhY3F1aXJlU3VjY2VlZGVkKHN0cmVhbXMpIHsKICAgICAgICAgIHNlbGYubG9nZ2VyLmxvZygnYWNxdWlyZWQgbG9jYWwgbWVkaWEgc3RyZWFtcycpOwogICAgICAgICAgc2VsZi5sb2NhbE1lZGlhID0gc3RyZWFtczsKICAgICAgICAgIHNlbGYuc2Vzc2lvbi5jb25uZWN0aW5nKCk7CiAgICAgICAgICByZXR1cm4gc3RyZWFtczsKICAgICAgICB9LCBmdW5jdGlvbiBhY3F1aXJlRmFpbGVkKGVycikgewogICAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoJ3VuYWJsZSB0byBhY3F1aXJlIHN0cmVhbXMnKTsKICAgICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKGVycik7CiAgICAgICAgICBzZWxmLnNlc3Npb24uY29ubmVjdGluZygpOwogICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgIH0pCiAgICAgICAgLnRoZW4odGhpcy5hZGRTdHJlYW1zLmJpbmQodGhpcykpCiAgICAgIDsKICAgIH0KCiAgICByZXR1cm4gc3RyZWFtUHJvbWlzZQogICAgICAudGhlbihmdW5jdGlvbiBzdHJlYW1BZGRpdGlvblN1Y2NlZWRlZCgpIHsKICAgICAgICBpZiAoc2VsZi5oYXNPZmZlcigncmVtb3RlJykpIHsKICAgICAgICAgIHNlbGYucGVlckNvbm5lY3Rpb24ub25kYXRhY2hhbm5lbCA9IGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgICAgc2VsZi5kYXRhQ2hhbm5lbCA9IGV2dC5jaGFubmVsOwogICAgICAgICAgICBzZWxmLmVtaXQoJ2RhdGFDaGFubmVsJywgc2VsZi5kYXRhQ2hhbm5lbCk7CiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSBpZiAobWVkaWFIaW50LmRhdGFDaGFubmVsICYmCiAgICAgICAgICAgICAgICAgICBzZWxmLnBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKSB7CiAgICAgICAgICBzZWxmLmRhdGFDaGFubmVsID0gc2VsZi5wZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgKICAgICAgICAgICAgJ3NpcGpzJywKICAgICAgICAgICAgbWVkaWFIaW50LmRhdGFDaGFubmVsCiAgICAgICAgICApOwogICAgICAgICAgc2VsZi5lbWl0KCdkYXRhQ2hhbm5lbCcsIHNlbGYuZGF0YUNoYW5uZWwpOwogICAgICAgIH0KCiAgICAgICAgc2VsZi5yZW5kZXIoKTsKICAgICAgICByZXR1cm4gc2VsZi5jcmVhdGVPZmZlck9yQW5zd2VyKHNlbGYuUlRDQ29uc3RyYWludHMpOwogICAgICB9KQogICAgOwogIH19LAoKICAvKioKICAqIE1lc3NhZ2UgcmVjZXB0aW9uLgogICogQHBhcmFtIHtTdHJpbmd9IHR5cGUKICAqIEBwYXJhbSB7U3RyaW5nfSBzZHAKICAqLwogIHNldERlc2NyaXB0aW9uOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiBzZXREZXNjcmlwdGlvbiAoc2RwKSB7CiAgICB2YXIgcmF3RGVzY3JpcHRpb24gPSB7CiAgICAgIHR5cGU6IHRoaXMuaGFzT2ZmZXIoJ2xvY2FsJykgPyAnYW5zd2VyJyA6ICdvZmZlcicsCiAgICAgIHNkcDogc2RwCiAgICB9OwoKICAgIHRoaXMuZW1pdCgnc2V0RGVzY3JpcHRpb24nLCByYXdEZXNjcmlwdGlvbik7CgogICAgdmFyIGRlc2NyaXB0aW9uID0gbmV3IFNJUC5XZWJSVEMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHJhd0Rlc2NyaXB0aW9uKTsKICAgIHJldHVybiBTSVAuVXRpbHMucHJvbWlzaWZ5KHRoaXMucGVlckNvbm5lY3Rpb24sICdzZXRSZW1vdGVEZXNjcmlwdGlvbicpKGRlc2NyaXB0aW9uKTsKICB9fSwKCiAgLyoqCiAgICogSWYgdGhlIFNlc3Npb24gYXNzb2NpYXRlZCB3aXRoIHRoaXMgTWVkaWFIYW5kbGVyIHdlcmUgdG8gYmUgcmVmZXJyZWQsCiAgICogd2hhdCBtZWRpYUhpbnQgc2hvdWxkIGJlIHByb3ZpZGVkIHRvIHRoZSBVQSdzIGludml0ZSBtZXRob2Q/CiAgICovCiAgZ2V0UmVmZXJNZWRpYToge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVmZXJNZWRpYSAoKSB7CiAgICBmdW5jdGlvbiBoYXNUcmFja3MgKHRyYWNrR2V0dGVyLCBzdHJlYW0pIHsKICAgICAgcmV0dXJuIHN0cmVhbVt0cmFja0dldHRlcl0oKS5sZW5ndGggPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGJvdGhIYXZlVHJhY2tzICh0cmFja0dldHRlcikgewogICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi8KICAgICAgcmV0dXJuIHRoaXMuZ2V0TG9jYWxTdHJlYW1zKCkuc29tZShoYXNUcmFja3MuYmluZChudWxsLCB0cmFja0dldHRlcikpICYmCiAgICAgICAgICAgICB0aGlzLmdldFJlbW90ZVN0cmVhbXMoKS5zb21lKGhhc1RyYWNrcy5iaW5kKG51bGwsIHRyYWNrR2V0dGVyKSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgY29uc3RyYWludHM6IHsKICAgICAgICBhdWRpbzogYm90aEhhdmVUcmFja3MuY2FsbCh0aGlzLCAnZ2V0QXVkaW9UcmFja3MnKSwKICAgICAgICB2aWRlbzogYm90aEhhdmVUcmFja3MuY2FsbCh0aGlzLCAnZ2V0VmlkZW9UcmFja3MnKQogICAgICB9CiAgICB9OwogIH19LAoKICB1cGRhdGVJY2VTZXJ2ZXJzOiB7d3JpdGVhYmxlOnRydWUsIHZhbHVlOiBmdW5jdGlvbiAob3B0aW9ucykgewogICAgdmFyIHNlcnZlcnMgPSB0aGlzLnByZXBhcmVJY2VTZXJ2ZXJzKG9wdGlvbnMuc3R1blNlcnZlcnMsIG9wdGlvbnMudHVyblNlcnZlcnMpOwogICAgdGhpcy5SVENDb25zdHJhaW50cyA9IG9wdGlvbnMuUlRDQ29uc3RyYWludHMgfHwgdGhpcy5SVENDb25zdHJhaW50czsKCiAgICB0aGlzLmluaXRQZWVyQ29ubmVjdGlvbihzZXJ2ZXJzLCB0aGlzLlJUQ0NvbnN0cmFpbnRzKTsKCiAgICAvKiBvbmNlIHVwZGF0ZUljZSBpcyBpbXBsZW1lbnRlZCBjb3JyZWN0bHksIHRoaXMgaXMgYmV0dGVyIHRoYW4gYWJvdmUKICAgIC8vbm8gb3AgaWYgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoaXMKICAgIGlmICghdGhpcy5wZWVyQ29ubmVjdGlvbi51cGRhdGVJY2UpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHRoaXMucGVlckNvbm5lY3Rpb24udXBkYXRlSWNlKHsnaWNlU2VydmVycyc6IHNlcnZlcnN9LCB0aGlzLlJUQ0NvbnN0cmFpbnRzKTsKICAgICovCiAgfX0sCgovLyBGdW5jdGlvbnMgdGhlIHNlc3Npb24gY2FuIHVzZSwgYnV0IG9ubHkgYmVjYXVzZSBpdCdzIGNvbnZlbmllbnQgZm9yIHRoZSBhcHBsaWNhdGlvbgogIGlzTXV0ZWQ6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGlzTXV0ZWQgKCkgewogICAgcmV0dXJuIHsKICAgICAgYXVkaW86IHRoaXMuYXVkaW9NdXRlZCwKICAgICAgdmlkZW86IHRoaXMudmlkZW9NdXRlZAogICAgfTsKICB9fSwKCiAgbXV0ZToge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gbXV0ZSAob3B0aW9ucykgewogICAgaWYgKHRoaXMuZ2V0TG9jYWxTdHJlYW1zKCkubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7CiAgICAgIGF1ZGlvOiB0aGlzLmdldExvY2FsU3RyZWFtcygpWzBdLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID4gMCwKICAgICAgdmlkZW86IHRoaXMuZ2V0TG9jYWxTdHJlYW1zKClbMF0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPiAwCiAgICB9OwoKICAgIHZhciBhdWRpb011dGVkID0gZmFsc2UsCiAgICAgICAgdmlkZW9NdXRlZCA9IGZhbHNlOwoKICAgIGlmIChvcHRpb25zLmF1ZGlvICYmICF0aGlzLmF1ZGlvTXV0ZWQpIHsKICAgICAgYXVkaW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMuYXVkaW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudG9nZ2xlTXV0ZUF1ZGlvKHRydWUpOwogICAgfQoKICAgIGlmIChvcHRpb25zLnZpZGVvICYmICF0aGlzLnZpZGVvTXV0ZWQpIHsKICAgICAgdmlkZW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudmlkZW9NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudG9nZ2xlTXV0ZVZpZGVvKHRydWUpOwogICAgfQoKICAgIC8vUkVWSVNJVAogICAgaWYgKGF1ZGlvTXV0ZWQgfHwgdmlkZW9NdXRlZCkgewogICAgICByZXR1cm4gewogICAgICAgIGF1ZGlvOiBhdWRpb011dGVkLAogICAgICAgIHZpZGVvOiB2aWRlb011dGVkCiAgICAgIH07CiAgICAgIC8qdGhpcy5zZXNzaW9uLm9ubXV0ZSh7CiAgICAgICAgYXVkaW86IGF1ZGlvTXV0ZWQsCiAgICAgICAgdmlkZW86IHZpZGVvTXV0ZWQKICAgICAgfSk7Ki8KICAgIH0KICB9fSwKCiAgdW5tdXRlOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiB1bm11dGUgKG9wdGlvbnMpIHsKICAgIGlmICh0aGlzLmdldExvY2FsU3RyZWFtcygpLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgewogICAgICBhdWRpbzogdGhpcy5nZXRMb2NhbFN0cmVhbXMoKVswXS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA+IDAsCiAgICAgIHZpZGVvOiB0aGlzLmdldExvY2FsU3RyZWFtcygpWzBdLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoID4gMAogICAgfTsKCiAgICB2YXIgYXVkaW9Vbk11dGVkID0gZmFsc2UsCiAgICAgICAgdmlkZW9Vbk11dGVkID0gZmFsc2U7CgogICAgaWYgKG9wdGlvbnMuYXVkaW8gJiYgdGhpcy5hdWRpb011dGVkKSB7CiAgICAgIGF1ZGlvVW5NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMuYXVkaW9NdXRlZCA9IGZhbHNlOwogICAgICB0aGlzLnRvZ2dsZU11dGVBdWRpbyhmYWxzZSk7CiAgICB9CgogICAgaWYgKG9wdGlvbnMudmlkZW8gJiYgdGhpcy52aWRlb011dGVkKSB7CiAgICAgIHZpZGVvVW5NdXRlZCA9IHRydWU7CiAgICAgIHRoaXMudmlkZW9NdXRlZCA9IGZhbHNlOwogICAgICB0aGlzLnRvZ2dsZU11dGVWaWRlbyhmYWxzZSk7CiAgICB9CgogICAgLy9SRVZJU0lUCiAgICBpZiAoYXVkaW9Vbk11dGVkIHx8IHZpZGVvVW5NdXRlZCkgewogICAgICByZXR1cm4gewogICAgICAgIGF1ZGlvOiBhdWRpb1VuTXV0ZWQsCiAgICAgICAgdmlkZW86IHZpZGVvVW5NdXRlZAogICAgICB9OwogICAgICAvKnRoaXMuc2Vzc2lvbi5vbnVubXV0ZSh7CiAgICAgICAgYXVkaW86IGF1ZGlvVW5NdXRlZCwKICAgICAgICB2aWRlbzogdmlkZW9Vbk11dGVkCiAgICAgIH0pOyovCiAgICB9CiAgfX0sCgogIGhvbGQ6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGhvbGQgKCkgewogICAgdGhpcy50b2dnbGVNdXRlQXVkaW8odHJ1ZSk7CiAgICB0aGlzLnRvZ2dsZU11dGVWaWRlbyh0cnVlKTsKICB9fSwKCiAgdW5ob2xkOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiB1bmhvbGQgKCkgewogICAgaWYgKCF0aGlzLmF1ZGlvTXV0ZWQpIHsKICAgICAgdGhpcy50b2dnbGVNdXRlQXVkaW8oZmFsc2UpOwogICAgfQoKICAgIGlmICghdGhpcy52aWRlb011dGVkKSB7CiAgICAgIHRoaXMudG9nZ2xlTXV0ZVZpZGVvKGZhbHNlKTsKICAgIH0KICB9fSwKCi8vIEZ1bmN0aW9ucyB0aGUgYXBwbGljYXRpb24gY2FuIHVzZSwgYnV0IG5vdCB0aGUgc2Vzc2lvbgogIGdldExvY2FsU3RyZWFtczoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW1zICgpIHsKICAgIHZhciBwYyA9IHRoaXMucGVlckNvbm5lY3Rpb247CiAgICBpZiAocGMgJiYgcGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3BlZXJDb25uZWN0aW9uIGlzIGNsb3NlZCwgZ2V0TG9jYWxTdHJlYW1zIHJldHVybmluZyBbXScpOwogICAgICByZXR1cm4gW107CiAgICB9CiAgICByZXR1cm4gKHBjLmdldExvY2FsU3RyZWFtcyAmJiBwYy5nZXRMb2NhbFN0cmVhbXMoKSkgfHwKICAgICAgcGMubG9jYWxTdHJlYW1zIHx8IFtdOwogIH19LAoKICBnZXRSZW1vdGVTdHJlYW1zOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiBnZXRSZW1vdGVTdHJlYW1zICgpIHsKICAgIHZhciBwYyA9IHRoaXMucGVlckNvbm5lY3Rpb247CiAgICBpZiAocGMgJiYgcGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7CiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ3BlZXJDb25uZWN0aW9uIGlzIGNsb3NlZCwgZ2V0UmVtb3RlU3RyZWFtcyByZXR1cm5pbmcgdGhpcy5fcmVtb3RlU3RyZWFtcycpOwogICAgICByZXR1cm4gdGhpcy5fcmVtb3RlU3RyZWFtczsKICAgIH0KICAgIHJldHVybihwYy5nZXRSZW1vdGVTdHJlYW1zICYmIHBjLmdldFJlbW90ZVN0cmVhbXMoKSkgfHwKICAgICAgcGMucmVtb3RlU3RyZWFtcyB8fCBbXTsKICB9fSwKCiAgcmVuZGVyOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIgKHJlbmRlckhpbnQpIHsKICAgIHJlbmRlckhpbnQgPSByZW5kZXJIaW50IHx8ICh0aGlzLm1lZGlhSGludCAmJiB0aGlzLm1lZGlhSGludC5yZW5kZXIpOwogICAgaWYgKCFyZW5kZXJIaW50KSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciBzdHJlYW1HZXR0ZXJzID0gewogICAgICBsb2NhbDogJ2dldExvY2FsU3RyZWFtcycsCiAgICAgIHJlbW90ZTogJ2dldFJlbW90ZVN0cmVhbXMnCiAgICB9OwogICAgT2JqZWN0LmtleXMoc3RyZWFtR2V0dGVycykuZm9yRWFjaChmdW5jdGlvbiAobG9jKSB7CiAgICAgIHZhciBzdHJlYW1HZXR0ZXIgPSBzdHJlYW1HZXR0ZXJzW2xvY107CiAgICAgIHZhciBzdHJlYW1zID0gdGhpc1tzdHJlYW1HZXR0ZXJdKCk7CiAgICAgIFNJUC5XZWJSVEMuTWVkaWFTdHJlYW1NYW5hZ2VyLnJlbmRlcihzdHJlYW1zLCByZW5kZXJIaW50W2xvY10pOwogICAgfS5iaW5kKHRoaXMpKTsKICB9fSwKCi8vIEludGVybmFsIGZ1bmN0aW9ucwogIGhhc09mZmVyOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiBoYXNPZmZlciAod2hlcmUpIHsKICAgIHZhciBvZmZlclN0YXRlID0gJ2hhdmUtJyArIHdoZXJlICsgJy1vZmZlcic7CiAgICByZXR1cm4gdGhpcy5wZWVyQ29ubmVjdGlvbi5zaWduYWxpbmdTdGF0ZSA9PT0gb2ZmZXJTdGF0ZTsKICAgIC8vIFRPRE8gY29uc2lkZXIgc2lnbmFsaW5nU3RhdGVzIHdpdGggJ3ByYW5zd2VyJz8KICB9fSwKCiAgcHJlcGFyZUljZVNlcnZlcnM6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIHByZXBhcmVJY2VTZXJ2ZXJzIChzdHVuU2VydmVycywgdHVyblNlcnZlcnMpIHsKICAgIHZhciBzZXJ2ZXJzID0gW10sCiAgICAgIGNvbmZpZyA9IHRoaXMuc2Vzc2lvbi51YS5jb25maWd1cmF0aW9uOwoKICAgIHN0dW5TZXJ2ZXJzID0gc3R1blNlcnZlcnMgfHwgY29uZmlnLnN0dW5TZXJ2ZXJzOwogICAgdHVyblNlcnZlcnMgPSB0dXJuU2VydmVycyB8fCBjb25maWcudHVyblNlcnZlcnM7CgogICAgW10uY29uY2F0KHN0dW5TZXJ2ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2ZXIpIHsKICAgICAgc2VydmVycy5wdXNoKHsndXJscyc6IHNlcnZlcn0pOwogICAgfSk7CgogICAgW10uY29uY2F0KHR1cm5TZXJ2ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2ZXIpIHsKICAgICAgc2VydmVycy5wdXNoKHsKICAgICAgICAndXJscyc6IHNlcnZlci51cmxzLAogICAgICAgICd1c2VybmFtZSc6IHNlcnZlci51c2VybmFtZSwKICAgICAgICAnY3JlZGVudGlhbCc6IHNlcnZlci5wYXNzd29yZAogICAgICB9KTsKICAgIH0pOwoKICAgIHJldHVybiBzZXJ2ZXJzOwogIH19LAoKICBpbml0UGVlckNvbm5lY3Rpb246IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGluaXRQZWVyQ29ubmVjdGlvbihzZXJ2ZXJzLCBSVENDb25zdHJhaW50cykgewogICAgdmFyIHNlbGYgPSB0aGlzLAogICAgICBjb25maWcgPSB0aGlzLnNlc3Npb24udWEuY29uZmlndXJhdGlvbjsKCiAgICB0aGlzLm9uSWNlQ29tcGxldGVkID0gU0lQLlV0aWxzLmRlZmVyKCk7CiAgICB0aGlzLm9uSWNlQ29tcGxldGVkLnByb21pc2UudGhlbihmdW5jdGlvbihwYykgewogICAgICBzZWxmLmVtaXQoJ2ljZUdhdGhlcmluZ0NvbXBsZXRlJywgcGMpOwogICAgICBpZiAoc2VsZi5pY2VDaGVja2luZ1RpbWVyKSB7CiAgICAgICAgU0lQLlRpbWVycy5jbGVhclRpbWVvdXQoc2VsZi5pY2VDaGVja2luZ1RpbWVyKTsKICAgICAgICBzZWxmLmljZUNoZWNraW5nVGltZXIgPSBudWxsOwogICAgICB9CiAgICB9KTsKCiAgICBpZiAodGhpcy5wZWVyQ29ubmVjdGlvbikgewogICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKCk7CiAgICB9CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbiA9IG5ldyBTSVAuV2ViUlRDLlJUQ1BlZXJDb25uZWN0aW9uKHsnaWNlU2VydmVycyc6IHNlcnZlcnN9LCBSVENDb25zdHJhaW50cyk7CgogICAgLy8gRmlyZWZveCAoMzUuMC4xKSBzb21ldGltZXMgdGhyb3dzIG9uIGNhbGxzIHRvIHBlZXJDb25uZWN0aW9uLmdldFJlbW90ZVN0cmVhbXMKICAgIC8vIGV2ZW4gaWYgcGVlckNvbm5lY3Rpb24ub25hZGRzdHJlYW0gd2FzIGp1c3QgY2FsbGVkLiBJbiBvcmRlciB0byBtYWtlCiAgICAvLyBNZWRpYUhhbmRsZXIucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXMgd29yaywga2VlcCB0cmFjayBvZiB0aGVtIG1hbnVhbGx5CiAgICB0aGlzLl9yZW1vdGVTdHJlYW1zID0gW107CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmFkZHN0cmVhbSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgc2VsZi5sb2dnZXIubG9nKCdzdHJlYW0gYWRkZWQ6ICcrIGUuc3RyZWFtLmlkKTsKICAgICAgc2VsZi5fcmVtb3RlU3RyZWFtcy5wdXNoKGUuc3RyZWFtKTsKICAgICAgc2VsZi5yZW5kZXIoKTsKICAgICAgc2VsZi5lbWl0KCdhZGRTdHJlYW0nLCBlKTsKICAgIH07CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbnJlbW92ZXN0cmVhbSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgc2VsZi5sb2dnZXIubG9nKCdzdHJlYW0gcmVtb3ZlZDogJysgZS5zdHJlYW0uaWQpOwogICAgfTsKCiAgICB0aGlzLnN0YXJ0SWNlQ2hlY2tpbmdUaW1lciA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCFzZWxmLmljZUNoZWNraW5nVGltZXIpIHsKICAgICAgICBzZWxmLmljZUNoZWNraW5nVGltZXIgPSBTSVAuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBzZWxmLmxvZ2dlci5sb2coJ1JUQ0ljZUNoZWNraW5nIFRpbWVvdXQgVHJpZ2dlcmVkIGFmdGVyICcrY29uZmlnLmljZUNoZWNraW5nVGltZW91dCsnIG1pbGxpc2Vjb25kcycpOwogICAgICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZC5yZXNvbHZlKHRoaXMpOwogICAgICAgIH0uYmluZCh0aGlzLnBlZXJDb25uZWN0aW9uKSwgY29uZmlnLmljZUNoZWNraW5nVGltZW91dCk7CiAgICAgIH0KICAgIH07CgogICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgc2VsZi5lbWl0KCdpY2VDYW5kaWRhdGUnLCBlKTsKICAgICAgaWYgKGUuY2FuZGlkYXRlKSB7CiAgICAgICAgc2VsZi5sb2dnZXIubG9nKCdJQ0UgY2FuZGlkYXRlIHJlY2VpdmVkOiAnKyAoZS5jYW5kaWRhdGUuY2FuZGlkYXRlID09PSBudWxsID8gbnVsbCA6IGUuY2FuZGlkYXRlLmNhbmRpZGF0ZS50cmltKCkpKTsKICAgICAgICBzZWxmLnN0YXJ0SWNlQ2hlY2tpbmdUaW1lcigpOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbGYub25JY2VDb21wbGV0ZWQucmVzb2x2ZSh0aGlzKTsKICAgICAgfQogICAgfTsKCiAgICB0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHNlbGYubG9nZ2VyLmxvZygnUlRDSWNlR2F0aGVyaW5nU3RhdGUgY2hhbmdlZDogJyArIHRoaXMuaWNlR2F0aGVyaW5nU3RhdGUpOwogICAgICBpZiAodGhpcy5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ2dhdGhlcmluZycpIHsKICAgICAgICBzZWxmLmVtaXQoJ2ljZUdhdGhlcmluZycsIHRoaXMpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmljZUdhdGhlcmluZ1N0YXRlID09PSAnY29tcGxldGUnKSB7CiAgICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZC5yZXNvbHZlKHRoaXMpOwogICAgICB9CiAgICB9OwoKICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsgIC8vbmVlZCBlIGZvciBjb21tZW50ZWQgb3V0IGNhc2UKICAgICAgdmFyIHN0YXRlRXZlbnQ7CgogICAgICBpZiAodGhpcy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdjaGVja2luZycpIHsKICAgICAgICBzZWxmLnN0YXJ0SWNlQ2hlY2tpbmdUaW1lcigpOwogICAgICB9CgogICAgICBzd2l0Y2ggKHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKSB7CiAgICAgIGNhc2UgJ25ldyc6CiAgICAgICAgc3RhdGVFdmVudCA9ICdpY2VDb25uZWN0aW9uJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnY2hlY2tpbmcnOgogICAgICAgIHN0YXRlRXZlbnQgPSAnaWNlQ29ubmVjdGlvbkNoZWNraW5nJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnY29ubmVjdGVkJzoKICAgICAgICBzdGF0ZUV2ZW50ID0gJ2ljZUNvbm5lY3Rpb25Db25uZWN0ZWQnOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdjb21wbGV0ZWQnOgogICAgICAgIHN0YXRlRXZlbnQgPSAnaWNlQ29ubmVjdGlvbkNvbXBsZXRlZCc7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2ZhaWxlZCc6CiAgICAgICAgc3RhdGVFdmVudCA9ICdpY2VDb25uZWN0aW9uRmFpbGVkJzsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZGlzY29ubmVjdGVkJzoKICAgICAgICBzdGF0ZUV2ZW50ID0gJ2ljZUNvbm5lY3Rpb25EaXNjb25uZWN0ZWQnOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdjbG9zZWQnOgogICAgICAgIHN0YXRlRXZlbnQgPSAnaWNlQ29ubmVjdGlvbkNsb3NlZCc7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc2VsZi5sb2dnZXIud2FybignVW5rbm93biBpY2VDb25uZWN0aW9uIHN0YXRlOicsIHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2VsZi5lbWl0KHN0YXRlRXZlbnQsIHRoaXMpOwoKICAgICAgLy9CcmlhIHN0YXRlIGNoYW5nZXMgYXJlIGFsd2F5cyBjb25uZWN0ZWQgLT4gZGlzY29ubmVjdGVkIC0+IGNvbm5lY3RlZCBvbiBhY2NlcHQsIHNvIHNlc3Npb24gZ2V0cyB0ZXJtaW5hdGVkCiAgICAgIC8vbm9ybWFsIGNhbGxzIHN3aXRjaCBmcm9tIGZhaWxlZCB0byBjb25uZWN0ZWQgaW4gc29tZSBjYXNlcywgc28gY2hlY2tpbmcgZm9yIGZhaWxlZCBhbmQgdGVybWluYXRlZAogICAgICAvKmlmICh0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2ZhaWxlZCcpIHsKICAgICAgICBzZWxmLnNlc3Npb24udGVybWluYXRlKHsKICAgICAgICBjYXVzZTogU0lQLkMuY2F1c2VzLlJUUF9USU1FT1VULAogICAgICAgIHN0YXR1c19jb2RlOiAyMDAsCiAgICAgICAgcmVhc29uX3BocmFzZTogU0lQLkMuY2F1c2VzLlJUUF9USU1FT1VUCiAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKGUuY3VycmVudFRhcmdldC5pY2VHYXRoZXJpbmdTdGF0ZSA9PT0gJ2NvbXBsZXRlJyAmJiB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSAhPT0gJ2Nsb3NlZCcpIHsKICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZCh0aGlzKTsKICAgICAgfSovCiAgICB9OwoKICAgIHRoaXMucGVlckNvbm5lY3Rpb24ub25zdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICBzZWxmLmxvZ2dlci5sb2coJ1BlZXJDb25uZWN0aW9uIHN0YXRlIGNoYW5nZWQgdG8gIicrIHRoaXMucmVhZHlTdGF0ZSArJyInKTsKICAgIH07CiAgfX0sCgogIGNyZWF0ZU9mZmVyT3JBbnN3ZXI6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU9mZmVyT3JBbnN3ZXIgKGNvbnN0cmFpbnRzKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgbWV0aG9kTmFtZTsKICAgIHZhciBwYyA9IHNlbGYucGVlckNvbm5lY3Rpb247CgogICAgc2VsZi5yZWFkeSA9IGZhbHNlOwogICAgbWV0aG9kTmFtZSA9IHNlbGYuaGFzT2ZmZXIoJ3JlbW90ZScpID8gJ2NyZWF0ZUFuc3dlcicgOiAnY3JlYXRlT2ZmZXInOwoKICAgIHJldHVybiBTSVAuVXRpbHMucHJvbWlzaWZ5KHBjLCBtZXRob2ROYW1lLCB0cnVlKShjb25zdHJhaW50cykKICAgICAgLnRoZW4oU0lQLlV0aWxzLnByb21pc2lmeShwYywgJ3NldExvY2FsRGVzY3JpcHRpb24nKSkKICAgICAgLnRoZW4oZnVuY3Rpb24gb25TZXRMb2NhbERlc2NyaXB0aW9uU3VjY2VzcygpIHsKICAgICAgICB2YXIgZGVmZXJyZWQgPSBTSVAuVXRpbHMuZGVmZXIoKTsKICAgICAgICBpZiAocGMuaWNlR2F0aGVyaW5nU3RhdGUgPT09ICdjb21wbGV0ZScgJiYgKHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcgfHwgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY29tcGxldGVkJykpIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi5vbkljZUNvbXBsZXRlZC5wcm9taXNlLnRoZW4oZGVmZXJyZWQucmVzb2x2ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlOwogICAgICB9KQogICAgICAudGhlbihmdW5jdGlvbiByZWFkeVN1Y2Nlc3MgKCkgewogICAgICAgIHZhciBzZHAgPSBwYy5sb2NhbERlc2NyaXB0aW9uLnNkcDsKCiAgICAgICAgc2RwID0gU0lQLkhhY2tzLkNocm9tZS5uZWVkc0V4cGxpY2l0bHlJbmFjdGl2ZVNEUChzZHApOwogICAgICAgIHNkcCA9IFNJUC5IYWNrcy5BbGxCcm93c2Vycy51bm1hc2tEdGxzKHNkcCk7CgogICAgICAgIHZhciBzZHBXcmFwcGVyID0gewogICAgICAgICAgdHlwZTogbWV0aG9kTmFtZSA9PT0gJ2NyZWF0ZU9mZmVyJyA/ICdvZmZlcicgOiAnYW5zd2VyJywKICAgICAgICAgIHNkcDogc2RwCiAgICAgICAgfTsKCiAgICAgICAgc2VsZi5lbWl0KCdnZXREZXNjcmlwdGlvbicsIHNkcFdyYXBwZXIpOwoKICAgICAgICBzZWxmLnJlYWR5ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gc2RwV3JhcHBlci5zZHA7CiAgICAgIH0pCiAgICAgIC5jYXRjaChmdW5jdGlvbiBtZXRob2RGYWlsZWQgKGUpIHsKICAgICAgICBzZWxmLmxvZ2dlci5lcnJvcihlKTsKICAgICAgICBzZWxmLnJlYWR5ID0gdHJ1ZTsKICAgICAgICB0aHJvdyBuZXcgU0lQLkV4Y2VwdGlvbnMuR2V0RGVzY3JpcHRpb25FcnJvcihlKTsKICAgICAgfSkKICAgIDsKICB9fSwKCiAgYWRkU3RyZWFtczoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gYWRkU3RyZWFtcyAoc3RyZWFtcykgewogICAgdHJ5IHsKICAgICAgc3RyZWFtcyA9IFtdLmNvbmNhdChzdHJlYW1zKTsKICAgICAgc3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShzdHJlYW0pOwogICAgICB9LCB0aGlzKTsKICAgIH0gY2F0Y2goZSkgewogICAgICB0aGlzLmxvZ2dlci5lcnJvcignZXJyb3IgYWRkaW5nIHN0cmVhbScpOwogICAgICB0aGlzLmxvZ2dlci5lcnJvcihlKTsKICAgICAgcmV0dXJuIFNJUC5VdGlscy5Qcm9taXNlLnJlamVjdChlKTsKICAgIH0KCiAgICByZXR1cm4gU0lQLlV0aWxzLlByb21pc2UucmVzb2x2ZSgpOwogIH19LAoKICB0b2dnbGVNdXRlSGVscGVyOiB7d3JpdGFibGU6IHRydWUsIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGVNdXRlSGVscGVyICh0cmFja0dldHRlciwgbXV0ZSkgewogICAgdGhpcy5nZXRMb2NhbFN0cmVhbXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgc3RyZWFtW3RyYWNrR2V0dGVyXSgpLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgdHJhY2suZW5hYmxlZCA9ICFtdXRlOwogICAgICB9KTsKICAgIH0pOwogIH19LAoKICB0b2dnbGVNdXRlQXVkaW86IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZU11dGVBdWRpbyAobXV0ZSkgewogICAgdGhpcy50b2dnbGVNdXRlSGVscGVyKCdnZXRBdWRpb1RyYWNrcycsIG11dGUpOwogIH19LAoKICB0b2dnbGVNdXRlVmlkZW86IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZU11dGVWaWRlbyAobXV0ZSkgewogICAgdGhpcy50b2dnbGVNdXRlSGVscGVyKCdnZXRWaWRlb1RyYWNrcycsIG11dGUpOwogIH19Cn0pOwoKLy8gUmV0dXJuIHNpbmNlIGl0IHdpbGwgYmUgYXNzaWduZWQgdG8gYSB2YXJpYWJsZS4KcmV0dXJuIE1lZGlhSGFuZGxlcjsKfTsKCn0se31dLDQwOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwovKioKICogQGZpbGVvdmVydmlldyBNZWRpYVN0cmVhbU1hbmFnZXIKICovCgovKiBNZWRpYVN0cmVhbU1hbmFnZXIKICogQGNsYXNzIE1hbmFnZXMgdGhlIGFjcXVpc2l0aW9uIGFuZCByZWxlYXNlIG9mIE1lZGlhU3RyZWFtcy4KICogQHBhcmFtIHttZWRpYUhpbnR9IFtkZWZhdWx0TWVkaWFIaW50XSBUaGUgbWVkaWFIaW50IHRvIHVzZSBpZiBub25lIGlzIHByb3ZpZGVkIHRvIGFjcXVpcmUoKQogKi8KbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoU0lQLCBlbnZpcm9ubWVudCkgewoKLy8gRGVmYXVsdCBNZWRpYVN0cmVhbU1hbmFnZXIgcHJvdmlkZXMgc2luZ2xlLXVzZSBzdHJlYW1zIGNyZWF0ZWQgd2l0aCBnZXRVc2VyTWVkaWEKdmFyIE1lZGlhU3RyZWFtTWFuYWdlciA9IGZ1bmN0aW9uIE1lZGlhU3RyZWFtTWFuYWdlciAobG9nZ2VyLCBkZWZhdWx0TWVkaWFIaW50KSB7CiAgaWYgKCFTSVAuV2ViUlRDLmlzU3VwcG9ydGVkKCkpIHsKICAgIHRocm93IG5ldyBTSVAuRXhjZXB0aW9ucy5Ob3RTdXBwb3J0ZWRFcnJvcignTWVkaWEgbm90IHN1cHBvcnRlZCcpOwogIH0KCiAgdGhpcy5tZWRpYUhpbnQgPSBkZWZhdWx0TWVkaWFIaW50IHx8IHsKICAgIGNvbnN0cmFpbnRzOiB7YXVkaW86IHRydWUsIHZpZGVvOiB0cnVlfQogIH07CgogIC8vIG1hcCBvZiBzdHJlYW1zIHRvIGFjcXVpc2l0aW9uIG1hbm5lcjoKICAvLyB0cnVlIC0+IHBhc3NlZCBpbiBhcyBtZWRpYUhpbnQuc3RyZWFtCiAgLy8gZmFsc2UgLT4gZ2V0VXNlck1lZGlhCiAgdGhpcy5hY3F1aXNpdGlvbnMgPSB7fTsKfTsKTWVkaWFTdHJlYW1NYW5hZ2VyLnN0cmVhbUlkID0gZnVuY3Rpb24gKHN0cmVhbSkgewogIHJldHVybiBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5jb25jYXQoc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkpCiAgICAubWFwKGZ1bmN0aW9uIHRyYWNrSWQgKHRyYWNrKSB7CiAgICAgIHJldHVybiB0cmFjay5pZDsKICAgIH0pCiAgICAuam9pbignJyk7Cn07CgovKioKICogQHBhcmFtIHsoQXJyYXkgb2YpIE1lZGlhU3RyZWFtfSBzdHJlYW1zIC0gVGhlIHN0cmVhbXMgdG8gcmVuZGVyCiAqCiAqIEBwYXJhbSB7KEFycmF5IG9mKSBIVE1MTWVkaWFFbGVtZW50fSBlbGVtZW50cwogKiAgICAgICAgLSBUaGUgPGF1ZGlvPi88dmlkZW8+IGVsZW1lbnQocykgdGhhdCBzaG91bGQgcmVuZGVyIHRoZSBzdHJlYW1zCiAqCiAqIEVhY2ggc3RyZWFtIGluIHN0cmVhbXMgcmVuZGVycyB0byB0aGUgY29ycmVzcG9uZGluZyBlbGVtZW50IGluIGVsZW1lbnRzLAogKiB3cmFwcGluZyBhcm91bmQgZWxlbWVudHMgaWYgbmVlZGVkLgogKi8KTWVkaWFTdHJlYW1NYW5hZ2VyLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlciAoc3RyZWFtcywgZWxlbWVudHMpIHsKICBpZiAoIWVsZW1lbnRzKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnRzKSAmJiAhZWxlbWVudHMubGVuZ3RoKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbGVtZW50cyBtdXN0IG5vdCBiZSBlbXB0eScpOwogIH0KCiAgZnVuY3Rpb24gYXR0YWNoTWVkaWFTdHJlYW0oZWxlbWVudCwgc3RyZWFtKSB7CiAgICBpZiAodHlwZW9mIGVsZW1lbnQuc3JjICE9PSAndW5kZWZpbmVkJykgewogICAgICBlbnZpcm9ubWVudC5yZXZva2VPYmplY3RVUkwoZWxlbWVudC5zcmMpOwogICAgICBlbGVtZW50LnNyYyA9IGVudmlyb25tZW50LmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOwogICAgfSBlbHNlIGlmICh0eXBlb2YgKGVsZW1lbnQuc3JjT2JqZWN0IHx8IGVsZW1lbnQubW96U3JjT2JqZWN0KSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgZWxlbWVudC5zcmNPYmplY3QgPSBlbGVtZW50Lm1velNyY09iamVjdCA9IHN0cmVhbTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGZ1bmN0aW9uIGVuc3VyZU1lZGlhUGxheWluZyAobWVkaWFFbGVtZW50KSB7CiAgICB2YXIgaW50ZXJ2YWwgPSAxMDA7CiAgICBtZWRpYUVsZW1lbnQuZW5zdXJlUGxheWluZ0ludGVydmFsSWQgPSBTSVAuVGltZXJzLnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKG1lZGlhRWxlbWVudC5wYXVzZWQpIHsKICAgICAgICBtZWRpYUVsZW1lbnQucGxheSgpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIFNJUC5UaW1lcnMuY2xlYXJJbnRlcnZhbChtZWRpYUVsZW1lbnQuZW5zdXJlUGxheWluZ0ludGVydmFsSWQpOwogICAgICB9CiAgICB9LCBpbnRlcnZhbCk7CiAgfQoKICBmdW5jdGlvbiBhdHRhY2hBbmRQbGF5IChlbGVtZW50cywgc3RyZWFtLCBpbmRleCkgewogICAgaWYgKHR5cGVvZiBlbGVtZW50cyA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBlbGVtZW50cyA9IGVsZW1lbnRzKCk7CiAgICB9CiAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4ICUgZWxlbWVudHMubGVuZ3RoXTsKICAgIChlbnZpcm9ubWVudC5hdHRhY2hNZWRpYVN0cmVhbSB8fCBhdHRhY2hNZWRpYVN0cmVhbSkoZWxlbWVudCwgc3RyZWFtKTsKICAgIGVuc3VyZU1lZGlhUGxheWluZyhlbGVtZW50KTsKICB9CgogIC8vIFtdLmNvbmNhdCAiY2FzdHMiIGBlbGVtZW50c2AgaW50byBhbiBhcnJheQogIC8vIHNvIGZvckVhY2ggd29ya3MgZXZlbiBpZiBgZWxlbWVudHNgIHdhcyBhIHNpbmdsZSBlbGVtZW50CiAgZWxlbWVudHMgPSBbXS5jb25jYXQoZWxlbWVudHMpOwogIFtdLmNvbmNhdChzdHJlYW1zKS5mb3JFYWNoKGF0dGFjaEFuZFBsYXkuYmluZChudWxsLCBlbGVtZW50cykpOwp9OwoKTWVkaWFTdHJlYW1NYW5hZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU0lQLkV2ZW50RW1pdHRlci5wcm90b3R5cGUsIHsKICAnYWNxdWlyZSc6IHt3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IGZ1bmN0aW9uIGFjcXVpcmUgKG1lZGlhSGludCkgewogICAgbWVkaWFIaW50ID0gT2JqZWN0LmtleXMobWVkaWFIaW50IHx8IHt9KS5sZW5ndGggPyBtZWRpYUhpbnQgOiB0aGlzLm1lZGlhSGludDsKCiAgICB2YXIgc2F2ZVN1Y2Nlc3MgPSBmdW5jdGlvbiAoaXNIaW50U3RyZWFtLCBzdHJlYW1zKSB7CiAgICAgIHN0cmVhbXMgPSBbXS5jb25jYXQoc3RyZWFtcyk7CiAgICAgIHN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgdmFyIHN0cmVhbUlkID0gTWVkaWFTdHJlYW1NYW5hZ2VyLnN0cmVhbUlkKHN0cmVhbSk7CiAgICAgICAgdGhpcy5hY3F1aXNpdGlvbnNbc3RyZWFtSWRdID0gISFpc0hpbnRTdHJlYW07CiAgICAgIH0sIHRoaXMpOwogICAgICByZXR1cm4gU0lQLlV0aWxzLlByb21pc2UucmVzb2x2ZShzdHJlYW1zKTsKICAgIH0uYmluZCh0aGlzKTsKCiAgICBpZiAobWVkaWFIaW50LnN0cmVhbSkgewogICAgICByZXR1cm4gc2F2ZVN1Y2Nlc3ModHJ1ZSwgbWVkaWFIaW50LnN0cmVhbSk7CiAgICB9IGVsc2UgewogICAgICAvLyBGYWxsYmFjayB0byBhdWRpby92aWRlbyBlbmFibGVkIGlmIG5vIG1lZGlhSGludCBjYW4gYmUgZm91bmQuCiAgICAgIHZhciBjb25zdHJhaW50cyA9IG1lZGlhSGludC5jb25zdHJhaW50cyB8fAogICAgICAgICh0aGlzLm1lZGlhSGludCAmJiB0aGlzLm1lZGlhSGludC5jb25zdHJhaW50cykgfHwKICAgICAgICB7YXVkaW86IHRydWUsIHZpZGVvOiB0cnVlfTsKCiAgICAgIHZhciBkZWZlcnJlZCA9IFNJUC5VdGlscy5kZWZlcigpOwoKICAgICAgLyoKICAgICAgICogTWFrZSB0aGUgY2FsbCBhc3luY2hyb25vdXMsIHNvIHRoYXQgSUNDcyBoYXZlIGEgY2hhbmNlCiAgICAgICAqIHRvIGRlZmluZSBjYWxsYmFja3MgdG8gYHVzZXJNZWRpYVJlcXVlc3RgCiAgICAgICAqLwogICAgICBTSVAuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuZW1pdCgndXNlck1lZGlhUmVxdWVzdCcsIGNvbnN0cmFpbnRzKTsKCiAgICAgICAgdmFyIGVtaXRUaGVuQ2FsbCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICB2YXIgY2FsbGJhY2tBcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTsKICAgICAgICAgIC8vIEVtaXQgd2l0aCBhbGwgb2YgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSByZWFsIGNhbGxiYWNrLgogICAgICAgICAgdmFyIG5ld0FyZ3MgPSBbZXZlbnROYW1lXS5jb25jYXQoY2FsbGJhY2tBcmdzKTsKCiAgICAgICAgICB0aGlzLmVtaXQuYXBwbHkodGhpcywgbmV3QXJncyk7CgogICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGNhbGxiYWNrQXJncyk7CiAgICAgICAgfS5iaW5kKHRoaXMpOwoKICAgICAgICBpZiAoY29uc3RyYWludHMuYXVkaW8gfHwgY29uc3RyYWludHMudmlkZW8pIHsKICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoCiAgICAgICAgICAgIFNJUC5XZWJSVEMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKQogICAgICAgICAgICAudGhlbigKICAgICAgICAgICAgICBlbWl0VGhlbkNhbGwuYmluZCh0aGlzLCAndXNlck1lZGlhJywgc2F2ZVN1Y2Nlc3MuYmluZChudWxsLCBmYWxzZSkpLAogICAgICAgICAgICAgIGVtaXRUaGVuQ2FsbC5iaW5kKHRoaXMsICd1c2VyTWVkaWFGYWlsZWQnLCBmdW5jdGlvbihlKXt0aHJvdyBlO30pCiAgICAgICAgICAgICkKICAgICAgICAgICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIExvY2FsIHN0cmVhbXMgd2VyZSBleHBsaWNpdGx5IGV4Y2x1ZGVkLgogICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShbXSk7CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcyksIDApOwoKICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7CiAgICB9CiAgfX0sCgogICdyZWxlYXNlJzoge3dyaXRhYmxlOiB0cnVlLCB2YWx1ZTogZnVuY3Rpb24gcmVsZWFzZSAoc3RyZWFtcykgewogICAgc3RyZWFtcyA9IFtdLmNvbmNhdChzdHJlYW1zKTsKICAgIHN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgIHZhciBzdHJlYW1JZCA9IE1lZGlhU3RyZWFtTWFuYWdlci5zdHJlYW1JZChzdHJlYW0pOwogICAgICBpZiAodGhpcy5hY3F1aXNpdGlvbnNbc3RyZWFtSWRdID09PSBmYWxzZSkgewogICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgdHJhY2suc3RvcCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGRlbGV0ZSB0aGlzLmFjcXVpc2l0aW9uc1tzdHJlYW1JZF07CiAgICB9LCB0aGlzKTsKICB9fSwKfSk7CgovLyBSZXR1cm4gc2luY2UgaXQgd2lsbCBiZSBhc3NpZ25lZCB0byBhIHZhcmlhYmxlLgpyZXR1cm4gTWVkaWFTdHJlYW1NYW5hZ2VyOwp9OwoKfSx7fV0sNDE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewooZnVuY3Rpb24gKGdsb2JhbCl7CiJ1c2Ugc3RyaWN0IjsKCnZhciB0b3BsZXZlbCA9IGdsb2JhbC53aW5kb3cgfHwgZ2xvYmFsOwoKZnVuY3Rpb24gZ2V0UHJlZml4ZWRQcm9wZXJ0eSAob2JqZWN0LCBuYW1lKSB7CiAgaWYgKG9iamVjdCA9PSBudWxsKSB7CiAgICByZXR1cm47CiAgfQogIHZhciBjYXBpdGFsaXplZE5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTsKICB2YXIgcHJlZml4ZWROYW1lcyA9IFtuYW1lLCAnd2Via2l0JyArIGNhcGl0YWxpemVkTmFtZSwgJ21veicgKyBjYXBpdGFsaXplZE5hbWVdOwogIGZvciAodmFyIGkgaW4gcHJlZml4ZWROYW1lcykgewogICAgdmFyIHByb3BlcnR5ID0gb2JqZWN0W3ByZWZpeGVkTmFtZXNbaV1dOwogICAgaWYgKHByb3BlcnR5KSB7CiAgICAgIHJldHVybiBwcm9wZXJ0eS5iaW5kKG9iamVjdCk7CiAgICB9CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBXZWJTb2NrZXQ6IHRvcGxldmVsLldlYlNvY2tldCwKICBUcmFuc3BvcnQ6IHJlcXVpcmUoJy4vVHJhbnNwb3J0JyksCiAgb3BlbjogdG9wbGV2ZWwub3BlbiwKICBQcm9taXNlOiB0b3BsZXZlbC5Qcm9taXNlLAogIHRpbWVyczogdG9wbGV2ZWwsCgogIC8vIENvbnNvbGUgaXMgbm90IGRlZmluZWQgaW4gRUNNQVNjcmlwdCwgc28ganVzdCBpbiBjYXNlLi4uCiAgY29uc29sZTogdG9wbGV2ZWwuY29uc29sZSB8fCB7CiAgICBkZWJ1ZzogZnVuY3Rpb24gKCkge30sCiAgICBsb2c6IGZ1bmN0aW9uICgpIHt9LAogICAgd2FybjogZnVuY3Rpb24gKCkge30sCiAgICBlcnJvcjogZnVuY3Rpb24gKCkge30KICB9LAoKICBNZWRpYVN0cmVhbTogZ2V0UHJlZml4ZWRQcm9wZXJ0eSh0b3BsZXZlbCwgJ01lZGlhU3RyZWFtJyksCiAgZ2V0VXNlck1lZGlhOiBnZXRQcmVmaXhlZFByb3BlcnR5KHRvcGxldmVsLm5hdmlnYXRvciwgJ2dldFVzZXJNZWRpYScpLAogIFJUQ1BlZXJDb25uZWN0aW9uOiBnZXRQcmVmaXhlZFByb3BlcnR5KHRvcGxldmVsLCAnUlRDUGVlckNvbm5lY3Rpb24nKSwKICBSVENTZXNzaW9uRGVzY3JpcHRpb246IGdldFByZWZpeGVkUHJvcGVydHkodG9wbGV2ZWwsICdSVENTZXNzaW9uRGVzY3JpcHRpb24nKSwKCiAgYWRkRXZlbnRMaXN0ZW5lcjogZ2V0UHJlZml4ZWRQcm9wZXJ0eSh0b3BsZXZlbCwgJ2FkZEV2ZW50TGlzdGVuZXInKSwKICBIVE1MTWVkaWFFbGVtZW50OiB0b3BsZXZlbC5IVE1MTWVkaWFFbGVtZW50LAoKICBhdHRhY2hNZWRpYVN0cmVhbTogdG9wbGV2ZWwuYXR0YWNoTWVkaWFTdHJlYW0sCiAgY3JlYXRlT2JqZWN0VVJMOiB0b3BsZXZlbC5VUkwgJiYgdG9wbGV2ZWwuVVJMLmNyZWF0ZU9iamVjdFVSTCwKICByZXZva2VPYmplY3RVUkw6IHRvcGxldmVsLlVSTCAmJiB0b3BsZXZlbC5VUkwucmV2b2tlT2JqZWN0VVJMCn07Cgp9KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB7fSkKfSx7Ii4vVHJhbnNwb3J0IjozNH1dLDQyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKInVzZSBzdHJpY3QiOwptb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vU0lQJykocmVxdWlyZSgnLi9lbnZpcm9ubWVudCcpKTsKCn0seyIuL1NJUCI6MjUsIi4vZW52aXJvbm1lbnQiOjQxfV0sNDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpewondXNlIHN0cmljdCc7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7Cgl2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOyAvKioNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqKi8KCgp2YXIgX3NpcCA9IHJlcXVpcmUoJ3NpcC5qcycpOwoKdmFyIF9zaXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2lwKTsKCnZhciBfSW52aXRlQ2xpZW50Q29udGV4dCA9IHJlcXVpcmUoJy4vSW52aXRlQ2xpZW50Q29udGV4dCcpOwoKdmFyIF9JbnZpdGVDbGllbnRDb250ZXh0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0ludml0ZUNsaWVudENvbnRleHQpOwoKdmFyIF9JbnZpdGVTZXJ2ZXJDb250ZXh0ID0gcmVxdWlyZSgnLi9JbnZpdGVTZXJ2ZXJDb250ZXh0Jyk7Cgp2YXIgX0ludml0ZVNlcnZlckNvbnRleHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfSW52aXRlU2VydmVyQ29udGV4dCk7Cgp2YXIgX1NJUFV0aWxzID0gcmVxdWlyZSgnLi9TSVBVdGlscycpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIENvbm5lY3Rpb25Db250cm9sbGVyID0gZnVuY3Rpb24gKCkgewoJZnVuY3Rpb24gQ29ubmVjdGlvbkNvbnRyb2xsZXIoY29uZmlndXJhdGlvbiwgb25DYWxsLCBvbkRpc2Nvbm5lY3QpIHsKCQlfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29ubmVjdGlvbkNvbnRyb2xsZXIpOwoKCQlpZiAoIWNvbmZpZ3VyYXRpb24pIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZ3VyYXRpb24gaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CgoJCV9zaXAyLmRlZmF1bHQuSW52aXRlU2VydmVyQ29udGV4dCA9IF9JbnZpdGVTZXJ2ZXJDb250ZXh0Mi5kZWZhdWx0OwoJCXRoaXMuY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247CgkJdGhpcy5vbkRpc2Nvbm5lY3QgPSBvbkRpc2Nvbm5lY3Q7CgkJdGhpcy5vbkNhbGwgPSBvbkNhbGw7Cgl9CgoJX2NyZWF0ZUNsYXNzKENvbm5lY3Rpb25Db250cm9sbGVyLCBbewoJCWtleTogJ2Nvbm5lY3QnLAoJCXZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KGFjY2Vzc1Rva2VuKSB7CgkJCXZhciBfdGhpcyA9IHRoaXM7CgoJCQlyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewoJCQkJaWYgKF90aGlzLnVzZXJBZ2VudCkgcmV0dXJuIHJlc29sdmUoKTsKCgkJCQlmZXRjaChfdGhpcy5jb25maWd1cmF0aW9uLmNyZWRlbnRpYWxfc2VydmVyLCB7IG1ldGhvZDogJ0dFVCcsIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyOiAnICsgYWNjZXNzVG9rZW4gfSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKCQkJCQlyZXMuanNvbigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHsKCQkJCQkJX3RoaXMudXNlckFnZW50ID0gbmV3IF9zaXAyLmRlZmF1bHQuVUEoewoJCQkJCQkJdXJpOiB1c2VyLnVzZXJuYW1lLAoJCQkJCQkJd3NTZXJ2ZXJzOiB1c2VyLnVyaXMsCgkJCQkJCQlwYXNzd29yZDogdXNlci5wYXNzd29yZAoJCQkJCQl9KTsKCQkJCQkJX3RoaXMudXNlckFnZW50Lm9uKCdpbnZpdGUnLCBmdW5jdGlvbiAoY29udGV4dCkgewoJCQkJCQkJaWYgKF90aGlzLmNvbnRleHQpIHJldHVybjsKCgkJCQkJCQljb250ZXh0Lm9uKCdieWUnLCBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJZGVsZXRlIF90aGlzLmNvbnRleHQ7CgkJCQkJCQkJX3RoaXMub25EaXNjb25uZWN0KCk7CgkJCQkJCQl9KTsKCQkJCQkJCWNvbnRleHQub24oJ2ZhaWxlZCcsIGNvbnNvbGUubG9nKTsKCQkJCQkJCWNvbnRleHQub24oJ3JlamVjdGVkJywgY29uc29sZS5sb2cpOwoJCQkJCQkJX3RoaXMuY29udGV4dCA9IGNvbnRleHQ7CgkJCQkJCQlfdGhpcy5vbkNhbGwoY29udGV4dC5yZXF1ZXN0LnRvLmZyaWVuZGx5TmFtZSwgY29udGV4dC5ib2R5KTsKCQkJCQkJfSk7CgkJCQkJCXJlc29sdmUoKTsKCQkJCQl9KTsKCQkJCX0pLmNhdGNoKHJlamVjdCk7CgkJCX0pOwoJCX0KCX0sIHsKCQlrZXk6ICdhY2NlcHQnLAoJCXZhbHVlOiBmdW5jdGlvbiBhY2NlcHQoZGF0YU9iamVjdE9ic2VydmVyKSB7CgkJCXRoaXMuY29udGV4dC5hY2NlcHQoewoJCQkJc2RwOiAoMCwgX1NJUFV0aWxzLmFkZENhbmRpZGF0ZXNUb1NEUCkoZGF0YU9iamVjdE9ic2VydmVyLmRhdGEuY29ubmVjdGlvbkRlc2NyaXB0aW9uLnNkcCwgZGF0YU9iamVjdE9ic2VydmVyLmRhdGEuaWNlQ2FuZGlkYXRlcykKCQkJfSk7CgkJfQoJfSwgewoJCWtleTogJ2ludml0ZScsCgkJdmFsdWU6IGZ1bmN0aW9uIGludml0ZSh0bywgZGF0YU9iamVjdE9ic2VydmVyKSB7CgkJCXZhciBfdGhpczIgPSB0aGlzOwoKCQkJdmFyIG9wdGlvbnMgPSB7CgkJCQlzZHA6ICgwLCBfU0lQVXRpbHMuYWRkQ2FuZGlkYXRlc1RvU0RQKShkYXRhT2JqZWN0T2JzZXJ2ZXIuZGF0YS5jb25uZWN0aW9uRGVzY3JpcHRpb24uc2RwLCBkYXRhT2JqZWN0T2JzZXJ2ZXIuZGF0YS5pY2VDYW5kaWRhdGVzKQoJCQl9OwoKCQkJcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCQkJCWlmIChfdGhpczIuY29udGV4dCkgcmVqZWN0KG5ldyBFcnJvcignUHJldmlvdXMgY29udGV4dCcsIF90aGlzMi5jb250ZXh0KSk7CgoJCQkJdmFyIGNvbnRleHQgPSBuZXcgX0ludml0ZUNsaWVudENvbnRleHQyLmRlZmF1bHQoX3RoaXMyLnVzZXJBZ2VudCwgdG8ucmVwbGFjZSgnLy8nLCAnJyksIG9wdGlvbnMpOwoJCQkJX3RoaXMyLnVzZXJBZ2VudC5hZnRlckNvbm5lY3RlZChjb250ZXh0Lmludml0ZS5iaW5kKGNvbnRleHQpKTsKCQkJCWNvbnRleHQub24oJ2J5ZScsIGZ1bmN0aW9uICgpIHsKCQkJCQlkZWxldGUgX3RoaXMyLmNvbnRleHQ7CgkJCQkJX3RoaXMyLm9uRGlzY29ubmVjdCgpOwoJCQkJfSk7CgkJCQljb250ZXh0Lm9uKCdhY2NlcHRlZCcsIHJlc29sdmUpOwoJCQkJY29udGV4dC5vbignZmFpbGVkJywgcmVqZWN0KTsKCQkJCWNvbnRleHQub24oJ3JlamVjdGVkJywgcmVqZWN0KTsKCgkJCQlfdGhpczIuY29udGV4dCA9IGNvbnRleHQ7CgkJCX0pOwoJCX0KCX0sIHsKCQlrZXk6ICdkaXNjb25uZWN0JywKCQl2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdCgpIHsKCQkJY29uc29sZS5sb2coJ2Rpc2Nvbm5lY3RpbmcgZnJvbSBpbXMnKTsKCQkJaWYgKHRoaXMuY29udGV4dCAmJiAhdGhpcy5jb250ZXh0LmVuZFRpbWUpIHsKCQkJCXRoaXMuY29udGV4dC5ieWUoKTsKCQkJCWRlbGV0ZSB0aGlzLmNvbnRleHQ7CgkJCX0KCQl9Cgl9XSk7CgoJcmV0dXJuIENvbm5lY3Rpb25Db250cm9sbGVyOwp9KCk7CgpleHBvcnRzLmRlZmF1bHQgPSBDb25uZWN0aW9uQ29udHJvbGxlcjsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsiLi9JbnZpdGVDbGllbnRDb250ZXh0Ijo0NSwiLi9JbnZpdGVTZXJ2ZXJDb250ZXh0Ijo0NiwiLi9TSVBVdGlscyI6NDcsInNpcC5qcyI6NDJ9XSw0NDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOwoKZXhwb3J0cy5kZWZhdWx0ID0gYWN0aXZhdGU7Cgp2YXIgX1N5bmNoZXIgPSByZXF1aXJlKCdzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXInKTsKCnZhciBfRGlzY292ZXJ5ID0gcmVxdWlyZSgnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9EaXNjb3ZlcnknKTsKCnZhciBfRGlzY292ZXJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0Rpc2NvdmVyeSk7Cgp2YXIgX0Nvbm5lY3Rpb25Db250cm9sbGVyID0gcmVxdWlyZSgnLi9Db25uZWN0aW9uQ29udHJvbGxlcicpOwoKdmFyIF9Db25uZWN0aW9uQ29udHJvbGxlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9Db25uZWN0aW9uQ29udHJvbGxlcik7Cgp2YXIgX0lkZW50aXR5RmFjdG9yeSA9IHJlcXVpcmUoJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSWRlbnRpdHlGYWN0b3J5Jyk7Cgp2YXIgX0lkZW50aXR5RmFjdG9yeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JZGVudGl0eUZhY3RvcnkpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfSAvKioNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0ENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBJTkVTQy1JRA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFFVT0JJUyBORVRXT1JLUyBTTA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgT1JBTkdFIFNBDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgRGV1dHNjaGUgVGVsZWtvbSBBRw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IFRFQ0hOSVNDSEUgVU5JVkVSU0lUQVQgQkVSTElODQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwoKdmFyIENvbm5lY3Rpb24gPSBmdW5jdGlvbiBDb25uZWN0aW9uKGRhdGFPYmplY3RVcmwpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29ubmVjdGlvbik7CgogIHRoaXMubmFtZSA9ICdDb25uZWN0aW9uJzsKICB0aGlzLnN0YXR1cyA9ICcnOwogIHRoaXMub3duZXIgPSBkYXRhT2JqZWN0VXJsOwogIHRoaXMuY29ubmVjdGlvbkRlc2NyaXB0aW9uID0ge307CiAgdGhpcy5pY2VDYW5kaWRhdGVzID0gW107Cn07CgovKioNCiAqIFByb3RvU3R1YiBJbnRlcmZhY2UNCiAqLwoKCnZhciBJTVNJV1Byb3RvU3R1YiA9IGZ1bmN0aW9uICgpIHsKCiAgLyoqDQogICAqIEluaXRpYWxpc2UgdGhlIHByb3RvY29sIHN0dWIgaW5jbHVkaW5nIGFzIGlucHV0IHBhcmFtZXRlcnMgaXRzIGFsbG9jYXRlZA0KICAgKiBjb21wb25lbnQgcnVudGltZSB1cmwsIHRoZSBydW50aW1lIEJVUyBwb3N0TWVzc2FnZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkDQogICAqIG9uIG1lc3NhZ2VzIHJlY2VpdmVkIGJ5IHRoZSBwcm90b2NvbCBzdHViIGFuZCByZXF1aXJlZCBjb25maWd1cmF0aW9uIHJldHJpZXZlZCBmcm9tIHByb3RvY29sU3R1YiBkZXNjcmlwdG9yLg0KICAgKiBAcGFyYW0gIHtVUkwucnVudGltZVByb3RvU3R1YlVSTH0gICAgICAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCBydW50aW1lUHJvdG9TdWJVUkwNCiAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uDQogICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbg0KICAgKi8KICBmdW5jdGlvbiBJTVNJV1Byb3RvU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBtaW5pQnVzLCBjb25maWd1cmF0aW9uKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSU1TSVdQcm90b1N0dWIpOwoKICAgIGlmICghcnVudGltZVByb3RvU3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgcnVudGltZVByb3RvU3R1YlVSTCBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFtaW5pQnVzKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBidXMgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXInKTsKICAgIGlmICghY29uZmlndXJhdGlvbikgdGhyb3cgbmV3IEVycm9yKCdUaGUgY29uZmlndXJhdGlvbiBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWd1cmF0aW9uLmRvbWFpbikgdGhyb3cgbmV3IEVycm9yKCdUaGUgZG9tYWluIGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyJyk7CgogICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICB0aGlzLl9kaXNjb3ZlcnkgPSBuZXcgX0Rpc2NvdmVyeTIuZGVmYXVsdChydW50aW1lUHJvdG9TdHViVVJMLCBtaW5pQnVzKTsKICAgIHRoaXMuc2NoZW1hID0gJ2h5cGVydHktY2F0YWxvZ3VlOi8vY2F0YWxvZ3VlLicgKyBjb25maWd1cmF0aW9uLmRvbWFpbiArICcvLndlbGwta25vd24vZGF0YXNjaGVtYS9Db25uZWN0aW9uJzsKICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBuZXcgX0Nvbm5lY3Rpb25Db250cm9sbGVyMi5kZWZhdWx0KGNvbmZpZ3VyYXRpb24sIGZ1bmN0aW9uICh0bywgb2ZmZXIpIHsKICAgICAgX3RoaXMyLl9yZXR1cm5TRFAob2ZmZXIsIF90aGlzMi5fcnVudGltZVByb3RvU3R1YlVSTCwgX3RoaXMyLnNjaGVtYSwgX3RoaXMyLnNvdXJjZSwgJ29mZmVyJyk7CiAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi5kYXRhT2JqZWN0T2JzZXJ2ZXIuZGVsZXRlKCk7CiAgICAgIF90aGlzMi5kYXRhT2JqZWN0UmVwb3J0ZXIuZGVsZXRlKCk7CiAgICB9KTsKICAgIHRoaXMuX2J1cyA9IG1pbmlCdXM7CiAgICB0aGlzLl9zeW5jaGVyID0gbmV3IF9TeW5jaGVyLlN5bmNoZXIodGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwgbWluaUJ1cywgY29uZmlndXJhdGlvbik7CgogICAgbWluaUJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgY29uc29sZS5sb2coJ05FVyBNU0cgLT4nLCBtc2cpOwogICAgICBzd2l0Y2ggKG1zZy50eXBlKSB7CiAgICAgICAgY2FzZSAnY3JlYXRlJzoKICAgICAgICAgIGlmIChfdGhpczIuX2ZpbHRlcihtc2cpICYmIG1zZy5ib2R5LnNjaGVtYSkgewogICAgICAgICAgICBfdGhpczIuX3N1YnNjcmliZShtc2cpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnaW5pdCc6CiAgICAgICAgICBfdGhpczIuX2lkZW50aXR5ID0gbmV3IF9JZGVudGl0eUZhY3RvcnkyLmRlZmF1bHQoJ2FudG9uJywgJ3NpcDovL3JldGhpbmstcHJvamVjdC5ldS9hbnRvbkByZXRoaW5rLXByb2plY3QuZXUnLCAnJywgJ2FudG9uJywgJycsICdyZXRoaW5rLXByb2plY3QuZXUnKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCdteWlkZW50aXR5JywgX3RoaXMyLl9pZGVudGl0eSk7CiAgICAgICAgICBfdGhpczIuX2Nvbm5lY3Rpb24uY29ubmVjdChtc2cuYm9keS5pZGVudGl0eS5hY2Nlc3NfdG9rZW4pOwogICAgICAgICAgX3RoaXMyLnNvdXJjZSA9IG1zZy5ib2R5LnNvdXJjZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2RlbGV0ZSc6CiAgICAgICAgICBfdGhpczIuX2Nvbm5lY3Rpb24uZGlzY29ubmVjdCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOwogICAgdGhpcy5fc2VuZFN0YXR1cygnY3JlYXRlZCcpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKElNU0lXUHJvdG9TdHViLCBbewogICAga2V5OiAnX3NlbmRTdGF0dXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCdbSU1TSVdQcm90b3N0dWIgc3RhdHVzIGNoYW5nZWRdIHRvICcsIHZhbHVlKTsKCiAgICAgIF90aGlzLl9zdGF0ZSA9IHZhbHVlOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAndXBkYXRlJywKICAgICAgICBmcm9tOiBfdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICB0bzogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgYm9keTogewogICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHJlYXNvbikgewogICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CiAgICAgIH0KCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc3Vic2NyaWJlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc3Vic2NyaWJlKG1zZykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBkYXRhT2JqZWN0VXJsID0gbXNnLmZyb20uc3Vic3RyaW5nKDAsIG1zZy5mcm9tLmxhc3RJbmRleE9mKCcvJykpOwoKICAgICAgdGhpcy5fc3luY2hlci5zdWJzY3JpYmUodGhpcy5zY2hlbWEsIGRhdGFPYmplY3RVcmwpLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RPYnNlcnZlcikgewogICAgICAgIF90aGlzMy5kYXRhT2JqZWN0T2JzZXJ2ZXIgPSBkYXRhT2JqZWN0T2JzZXJ2ZXI7CiAgICAgICAgZGF0YU9iamVjdE9ic2VydmVyLm9uQ2hhbmdlKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLl9vbkNhbGwoZGF0YU9iamVjdE9ic2VydmVyLCBkYXRhT2JqZWN0VXJsLCBfdGhpczMuc2NoZW1hLCBtc2cpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBkYXRhT2JqZWN0T2JzZXJ2ZXI7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGFPYmplY3RPYnNlcnZlcikgewogICAgICAgIHJldHVybiBfdGhpczMuX29uQ2FsbChkYXRhT2JqZWN0T2JzZXJ2ZXIsIGRhdGFPYmplY3RVcmwsIF90aGlzMy5zY2hlbWEsIG1zZyk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vbkNhbGwnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNhbGwoZGF0YU9iamVjdE9ic2VydmVyLCBkYXRhT2JqZWN0VXJsLCBzY2hlbWEsIG1zZykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCdfb25DYWxsJywgZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgaWYgKGRhdGFPYmplY3RPYnNlcnZlci5kYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbikgewogICAgICAgIGlmIChkYXRhT2JqZWN0T2JzZXJ2ZXIuZGF0YS5jb25uZWN0aW9uRGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykgewogICAgICAgICAgY29uc29sZS5sb2coJ19vbkNhbGxVcGRhdGUgb2ZmZXInKTsKICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24uY29ubmVjdChtc2cuYm9keS5pZGVudGl0eS5hY2Nlc3NfdG9rZW4pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnc2FkJywgbXNnKTsKICAgICAgICAgICAgX3RoaXM0Ll9jb25uZWN0aW9uLmludml0ZShtc2cudG8sIGRhdGFPYmplY3RPYnNlcnZlcikudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczQuX3JldHVyblNEUChlLmJvZHksIGRhdGFPYmplY3RVcmwsIHNjaGVtYSwgbXNnLmJvZHkuc291cmNlLCAnYW5zd2VyJyk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZhaWwnLCBlKTtfdGhpczQuZGF0YU9iamVjdE9ic2VydmVyLmRlbGV0ZSgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoZGF0YU9iamVjdE9ic2VydmVyLmRhdGEuY29ubmVjdGlvbkRlc2NyaXB0aW9uLnR5cGUgPT09ICdhbnN3ZXInKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnX29uQ2FsbFVwZGF0ZSBvZmZlcicpOwogICAgICAgICAgdGhpcy5fY29ubmVjdGlvbi5hY2NlcHQoZGF0YU9iamVjdE9ic2VydmVyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfcmV0dXJuU0RQJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmV0dXJuU0RQKG9mZmVyLCBkYXRhT2JqZWN0VXJsLCBzY2hlbWEsIHNvdXJjZSwgdHlwZSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciBkYXRhT2JqZWN0ID0gbmV3IENvbm5lY3Rpb24oZGF0YU9iamVjdFVybCk7CgogICAgICB0aGlzLl9zeW5jaGVyLmNyZWF0ZShzY2hlbWEsIFtzb3VyY2VdLCBkYXRhT2JqZWN0LCBmYWxzZSwgZmFsc2UsIHRoaXMuX2lkZW50aXR5KS50aGVuKGZ1bmN0aW9uIChvYmpSZXBvcnRlcikgewogICAgICAgIF90aGlzNS5kYXRhT2JqZWN0UmVwb3J0ZXIgPSBvYmpSZXBvcnRlcjsKICAgICAgICBvYmpSZXBvcnRlci5vblN1YnNjcmlwdGlvbihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIGNvbnNvbGUuaW5mbygnLS0tLS0tLS0gUmVjZWl2ZXIgcmVjZWl2ZWQgc3Vic2NyaXB0aW9uIHJlcXVlc3QgLS0tLS0tLS0tIFxuJyk7CiAgICAgICAgICBldmVudC5hY2NlcHQoKTsKICAgICAgICB9KTsKICAgICAgICBvYmpSZXBvcnRlci5kYXRhLmNvbm5lY3Rpb25EZXNjcmlwdGlvbiA9IHsgdHlwZTogdHlwZSwgc2RwOiBvZmZlciB9OwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlsdGVyKG1zZykgewogICAgICBpZiAobXNnLmJvZHkgJiYgbXNnLmJvZHkudmlhID09PSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIElNU0lXUHJvdG9TdHViOwp9KCk7CgpmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdJTVNJV1Byb3RvU3R1YicsCiAgICBpbnN0YW5jZTogbmV3IElNU0lXUHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcpCiAgfTsKfQptb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKCn0seyIuL0Nvbm5lY3Rpb25Db250cm9sbGVyIjo0Mywic2VydmljZS1mcmFtZXdvcmsvZGlzdC9EaXNjb3ZlcnkiOjUsInNlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSWRlbnRpdHlGYWN0b3J5Ijo2LCJzZXJ2aWNlLWZyYW1ld29yay9kaXN0L1N5bmNoZXIiOjd9XSw0NTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfc2lwID0gcmVxdWlyZSgnc2lwLmpzJyk7Cgp2YXIgX3NpcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaXApOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCnZhciBTZXNzaW9uID0gX3NpcDIuZGVmYXVsdC5TZXNzaW9uOwp2YXIgQyA9IHsKICBTVEFUVVNfTlVMTDogMCwKICBTVEFUVVNfSU5WSVRFX1NFTlQ6IDEsCiAgU1RBVFVTXzFYWF9SRUNFSVZFRDogMiwKICBTVEFUVVNfSU5WSVRFX1JFQ0VJVkVEOiAzLAogIFNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVI6IDQsCiAgU1RBVFVTX0FOU1dFUkVEOiA1LAogIFNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSzogNiwKICBTVEFUVVNfV0FJVElOR19GT1JfQUNLOiA3LAogIFNUQVRVU19DQU5DRUxFRDogOCwKICBTVEFUVVNfVEVSTUlOQVRFRDogOSwKICBTVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0s6IDEwLAogIFNUQVRVU19FQVJMWV9NRURJQTogMTEsCiAgU1RBVFVTX0NPTkZJUk1FRDogMTIKfTsKCnZhciBJbnZpdGVDbGllbnRDb250ZXh0ID0gZnVuY3Rpb24gSW52aXRlQ2xpZW50Q29udGV4dCh1YSwgdGFyZ2V0LCBvcHRpb25zKSB7CiAgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUoU2Vzc2lvbi5kZXN1Z2FyKG9wdGlvbnMpKTsKICBvcHRpb25zLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUob3B0aW9ucy5wYXJhbXMgfHwgT2JqZWN0LnByb3RvdHlwZSk7CgogIHZhciBleHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CgogIC8vIEN1c3RvbSBkYXRhIHRvIGJlIHNlbnQgZWl0aGVyIGluIElOVklURSBvciBpbiBBQ0sKICB0aGlzLnJlbmRlcmJvZHkgPSBvcHRpb25zLnJlbmRlcmJvZHkgfHwgbnVsbDsKICB0aGlzLnJlbmRlcnR5cGUgPSBvcHRpb25zLnJlbmRlcnR5cGUgfHwgJ3RleHQvcGxhaW4nOwoKICB0aGlzLnNkcCA9IG9wdGlvbnMuc2RwOwogIG9wdGlvbnMucGFyYW1zLmZyb21fdGFnID0gdGhpcy5mcm9tX3RhZzsKCiAgLyogRG8gbm90IGFkZCA7b2IgaW4gaW5pdGlhbCBmb3JtaW5nIGRpYWxvZyByZXF1ZXN0cyBpZiB0aGUgcmVnaXN0cmF0aW9uIG92ZXINCiAgICogIHRoZSBjdXJyZW50IGNvbm5lY3Rpb24gZ290IGEgR1JVVSBVUkkuDQogICAqLwogIHRoaXMuY29udGFjdCA9IHVhLmNvbnRhY3QudG9TdHJpbmcoewogICAgYW5vbnltb3VzOiB0aGlzLmFub255bW91cywKICAgIG91dGJvdW5kOiB0aGlzLmFub255bW91cyA/ICF1YS5jb250YWN0LnRlbXBfZ3J1dSA6ICF1YS5jb250YWN0LnB1Yl9ncnV1CiAgfSk7CgogIGV4dHJhSGVhZGVycy5wdXNoKCdDb250YWN0OiAnICsgdGhpcy5jb250YWN0KTsKICBleHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcgKyBfc2lwMi5kZWZhdWx0LlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpOwoKICBpZiAodWEuY29uZmlndXJhdGlvbi5yZWwxMDAgPT09IF9zaXAyLmRlZmF1bHQuQy5zdXBwb3J0ZWQuUkVRVUlSRUQpIHsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXF1aXJlOiAxMDByZWwnKTsKICB9CiAgaWYgKHVhLmNvbmZpZ3VyYXRpb24ucmVwbGFjZXMgPT09IF9zaXAyLmRlZmF1bHQuQy5zdXBwb3J0ZWQuUkVRVUlSRUQpIHsKICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXF1aXJlOiByZXBsYWNlcycpOwogIH0KICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHAnKTsKICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IGV4dHJhSGVhZGVyczsKCiAgX3NpcDIuZGVmYXVsdC5VdGlscy5hdWdtZW50KHRoaXMsIF9zaXAyLmRlZmF1bHQuQ2xpZW50Q29udGV4dCwgW3VhLCBfc2lwMi5kZWZhdWx0LkMuSU5WSVRFLCB0YXJnZXQsIG9wdGlvbnNdKTsKICBfc2lwMi5kZWZhdWx0LlV0aWxzLmF1Z21lbnQodGhpcywgX3NpcDIuZGVmYXVsdC5TZXNzaW9uLCBbXSk7CgogIC8vIENoZWNrIFNlc3Npb24gU3RhdHVzCiAgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19OVUxMKSB7CiAgICB0aHJvdyBuZXcgX3NpcDIuZGVmYXVsdC5FeGNlcHRpb25zLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTsKICB9CgogIC8vIFNlc3Npb24gcGFyYW1ldGVyIGluaXRpYWxpemF0aW9uCiAgdGhpcy5mcm9tX3RhZyA9IF9zaXAyLmRlZmF1bHQuVXRpbHMubmV3VGFnKCk7CgogIC8vIE91dGdvaW5nU2Vzc2lvbiBzcGVjaWZpYyBwYXJhbWV0ZXJzCiAgdGhpcy5pc0NhbmNlbGVkID0gZmFsc2U7CiAgdGhpcy5yZWNlaXZlZF8xMDAgPSBmYWxzZTsKCiAgdGhpcy5tZXRob2QgPSBfc2lwMi5kZWZhdWx0LkMuSU5WSVRFOwoKICB0aGlzLnJlY2VpdmVOb25JbnZpdGVSZXNwb25zZSA9IHRoaXMucmVjZWl2ZVJlc3BvbnNlOwogIHRoaXMucmVjZWl2ZVJlc3BvbnNlID0gdGhpcy5yZWNlaXZlSW52aXRlUmVzcG9uc2U7CgogIHRoaXMubG9nZ2VyID0gdWEuZ2V0TG9nZ2VyKCdzaXAuaW52aXRlY2xpZW50Y29udGV4dCcpOwoKICB0aGlzLm9uSW5mbyA9IG9wdGlvbnMub25JbmZvOwp9OwoKSW52aXRlQ2xpZW50Q29udGV4dC5wcm90b3R5cGUgPSB7CiAgaW52aXRlOiBmdW5jdGlvbiBpbnZpdGUoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgLy9TYXZlIHRoZSBzZXNzaW9uIGludG8gdGhlIHVhIHNlc3Npb25zIGNvbGxlY3Rpb24uCiAgICAvL05vdGU6IHBsYWNpbmcgaW4gY29uc3RydWN0b3IgYnJlYWtzIGNhbGwgdG8gcmVxdWVzdC5jYW5jZWwgb24gY2xvc2UuLi4gVXNlciBkb2VzIG5vdCBuZWVkIHRoaXMgYW55d2F5CiAgICB0aGlzLnVhLnNlc3Npb25zW3RoaXMuaWRdID0gdGhpczsKCiAgICAvL05vdGU6IGR1ZSB0byB0aGUgd2F5IEZpcmVmb3ggaGFuZGxlcyBnVU0gY2FsbHMsIGl0IGlzIHJlY29tbWVuZGVkIHRvIG1ha2UgdGhlIGdVTSBjYWxsIGF0IHRoZSBhcHAgbGV2ZWwKICAgIC8vIGFuZCBoYW5kIHNpcC5qcyBhIHN0cmVhbSBhcyB0aGUgbWVkaWFIaW50CiAgICBpZiAoc2VsZi5pc0NhbmNlbGVkIHx8IHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHNlbGYuaGFzT2ZmZXIgPSB0cnVlOwogICAgc2VsZi5yZXF1ZXN0LmJvZHkgPSB0aGlzLnNkcDsKICAgIHNlbGYuc3RhdHVzID0gQy5TVEFUVVNfSU5WSVRFX1NFTlQ7CiAgICBzZWxmLnNlbmQoKTsKCiAgICByZXR1cm4gdGhpczsKICB9LAoKICBoYXNEZXNjcmlwdGlvbjogZnVuY3Rpb24gaGFzRGVzY3JpcHRpb24obWVzc2FnZSkgewogICAgcmV0dXJuIG1lc3NhZ2UuZ2V0SGVhZGVyKCdDb250ZW50LVR5cGUnKSA9PT0gJ2FwcGxpY2F0aW9uL3NkcCcgJiYgISFtZXNzYWdlLmJvZHk7CiAgfSwKCiAgcmVjZWl2ZUludml0ZVJlc3BvbnNlOiBmdW5jdGlvbiByZWNlaXZlSW52aXRlUmVzcG9uc2UocmVzcG9uc2UpIHsKICAgIHZhciBjYXVzZSwKICAgICAgICAvL2xvY2FsTWVkaWEsCiAgICBzZXNzaW9uID0gdGhpcywKICAgICAgICBpZCA9IHJlc3BvbnNlLmNhbGxfaWQgKyByZXNwb25zZS5mcm9tX3RhZyArIHJlc3BvbnNlLnRvX3RhZywKICAgICAgICBleHRyYUhlYWRlcnMgPSBbXSwKICAgICAgICBvcHRpb25zID0ge307CgogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEIHx8IHJlc3BvbnNlLm1ldGhvZCAhPT0gX3NpcDIuZGVmYXVsdC5DLklOVklURSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHRoaXMuZGlhbG9nICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXNfY29kZSA8PSAyOTkpIHsKICAgICAgaWYgKGlkICE9PSB0aGlzLmRpYWxvZy5pZC50b1N0cmluZygpKSB7CiAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZURpYWxvZyhyZXNwb25zZSwgJ1VBQycsIHRydWUpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5zZW5kUmVxdWVzdCh0aGlzLCBfc2lwMi5kZWZhdWx0LkMuQUNLLCB7CiAgICAgICAgICBib2R5OiBfc2lwMi5kZWZhdWx0LlV0aWxzLmdlbmVyYXRlRmFrZVNEUChyZXNwb25zZS5ib2R5KQogICAgICAgIH0pOwogICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5zZW5kUmVxdWVzdCh0aGlzLCBfc2lwMi5kZWZhdWx0LkMuQllFKTsKCiAgICAgICAgLyogTk9URTogVGhpcyBmYWlscyBiZWNhdXNlIHRoZSBmb3JraW5nIHByb3h5IGRvZXMgbm90IHJlY29nbml6ZSB0aGF0IGFuIHVuYW5zd2VyYWJsZQ0KICAgICAgICAgKiBsZWcgKGR1ZSB0byBwZWVyQ29ubmVjdGlvbiBsaW1pdGF0aW9ucykgaGFzIGJlZW4gYW5zd2VyZWQgZmlyc3QuIElmIHlvdXIgZm9ya2luZw0KICAgICAgICAgKiBwcm94eSBkb2VzIG5vdCBoYW5nIHVwIGFsbCB1bmFuc3dlcmVkIGJyYW5jaGVzIG9uIHRoZSBmaXJzdCBicmFuY2ggYW5zd2VyZWQsIHJlbW92ZSB0aGlzLg0KICAgICAgICAgKi8KICAgICAgICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICAgICAgdGhpcy5mYWlsZWQocmVzcG9uc2UsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuV0VCUlRDX0VSUk9SKTsKICAgICAgICAgIHRoaXMudGVybWluYXRlZChyZXNwb25zZSwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5XRUJSVENfRVJST1IpOwogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoX3NpcDIuZGVmYXVsdC5DLkFDSywgeyBjc2VxOiByZXNwb25zZS5jc2VxIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmICghdGhpcy5oYXNBbnN3ZXIpIHsKICAgICAgICAvLyBpbnZpdGUgdy9vIHNkcCBpcyB3YWl0aW5nIGZvciBjYWxsYmFjawogICAgICAgIC8vYW4gaW52aXRlIHdpdGggc2RwIG11c3QgZ28gb24sIGFuZCBoYXNBbnN3ZXIgaXMgdHJ1ZQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQoKICAgIGlmICh0aGlzLmRpYWxvZyAmJiByZXNwb25zZS5zdGF0dXNfY29kZSA8IDIwMCkgewogICAgICAvKg0KICAgICAgICBFYXJseSBtZWRpYSBoYXMgYmVlbiBzZXQgdXAgd2l0aCBhdCBsZWFzdCBvbmUgb3RoZXIgZGlmZmVyZW50IGJyYW5jaCwNCiAgICAgICAgYnV0IGEgZmluYWwgMnh4IHJlc3BvbnNlIGhhc24ndCBiZWVuIHJlY2VpdmVkDQogICAgICAqLwogICAgICBpZiAodGhpcy5kaWFsb2cucHJhY2tlZC5pbmRleE9mKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKSAhPT0gLTEgfHwgdGhpcy5kaWFsb2cucHJhY2tlZFt0aGlzLmRpYWxvZy5wcmFja2VkLmxlbmd0aCAtIDFdID49IHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpICYmIHRoaXMuZGlhbG9nLnByYWNrZWQubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmVhcmx5RGlhbG9nc1tpZF0gJiYgIXRoaXMuY3JlYXRlRGlhbG9nKHJlc3BvbnNlLCAnVUFDJywgdHJ1ZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5pbmRleE9mKHJlc3BvbnNlLmdldEhlYWRlcigncnNlcScpKSAhPT0gLTEgfHwgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWRbdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQubGVuZ3RoIC0gMV0gPj0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgJiYgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQubGVuZ3RoID4gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JBY2s6ICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSArICcgJyArIHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKTsKICAgICAgdGhpcy5lYXJseURpYWxvZ3NbaWRdLnByYWNrZWQucHVzaChyZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSk7CgogICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZF0uc2VuZFJlcXVlc3QodGhpcywgX3NpcDIuZGVmYXVsdC5DLlBSQUNLLCB7CiAgICAgICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICAgICAgYm9keTogX3NpcDIuZGVmYXVsdC5VdGlscy5nZW5lcmF0ZUZha2VTRFAocmVzcG9uc2UuYm9keSkKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBQcm9jZWVkIHRvIGNhbmNlbGxhdGlvbiBpZiB0aGUgdXNlciByZXF1ZXN0ZWQuCiAgICBpZiAodGhpcy5pc0NhbmNlbGVkKSB7CiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNfY29kZSA+PSAxMDAgJiYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPCAyMDApIHsKICAgICAgICB0aGlzLnJlcXVlc3QuY2FuY2VsKHRoaXMuY2FuY2VsUmVhc29uLCBleHRyYUhlYWRlcnMpOwogICAgICAgIHRoaXMuY2FuY2VsZWQobnVsbCk7CiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzX2NvZGUgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1c19jb2RlIDwgMjk5KSB7CiAgICAgICAgdGhpcy5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UpOwogICAgICAgIHRoaXMuZW1pdCgnYnllJywgdGhpcy5yZXF1ZXN0KTsKICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXNfY29kZSA+PSAzMDApIHsKICAgICAgICBjYXVzZSA9IF9zaXAyLmRlZmF1bHQuQy5SRUFTT05fUEhSQVNFW3Jlc3BvbnNlLnN0YXR1c19jb2RlXSB8fCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLkNBTkNFTEVEOwogICAgICAgIHRoaXMucmVqZWN0ZWQocmVzcG9uc2UsIGNhdXNlKTsKICAgICAgICB0aGlzLmZhaWxlZChyZXNwb25zZSwgY2F1c2UpOwogICAgICAgIHRoaXMudGVybWluYXRlZChyZXNwb25zZSwgY2F1c2UpOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBzd2l0Y2ggKHRydWUpIHsKICAgICAgY2FzZSAvXjEwMCQvLnRlc3QocmVzcG9uc2Uuc3RhdHVzX2NvZGUpOgogICAgICAgIHRoaXMucmVjZWl2ZWRfMTAwID0gdHJ1ZTsKICAgICAgICB0aGlzLmVtaXQoJ3Byb2dyZXNzJywgcmVzcG9uc2UpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIC9eMVswLTldezJ9JC8udGVzdChyZXNwb25zZS5zdGF0dXNfY29kZSk6CiAgICAgICAgLy8gRG8gbm90aGluZyB3aXRoIDF4eCByZXNwb25zZXMgd2l0aG91dCBUbyB0YWcuCiAgICAgICAgaWYgKCFyZXNwb25zZS50b190YWcpIHsKICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJzF4eCByZXNwb25zZSByZWNlaXZlZCB3aXRob3V0IHRvIHRhZycpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICAvLyBDcmVhdGUgRWFybHkgRGlhbG9nIGlmIDFYWCBjb21lcyB3aXRoIGNvbnRhY3QKICAgICAgICBpZiAocmVzcG9uc2UuaGFzSGVhZGVyKCdjb250YWN0JykpIHsKICAgICAgICAgIC8vIEFuIGVycm9yIG9uIGRpYWxvZyBjcmVhdGlvbiB3aWxsIGZpcmUgJ2ZhaWxlZCcgZXZlbnQKICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnLCB0cnVlKSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfMVhYX1JFQ0VJVkVEOwoKICAgICAgICBpZiAocmVzcG9uc2UuaGFzSGVhZGVyKCdyZXF1aXJlJykgJiYgcmVzcG9uc2UuZ2V0SGVhZGVyKCdyZXF1aXJlJykuaW5kZXhPZignMTAwcmVsJykgIT09IC0xKSB7CgogICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGlzLmRpYWxvZyBpcyBhbHJlYWR5IGNvbmZpcm1lZAogICAgICAgICAgaWYgKHRoaXMuZGlhbG9nIHx8ICF0aGlzLmVhcmx5RGlhbG9nc1tpZF0pIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLmluZGV4T2YocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpICE9PSAtMSB8fCB0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZFt0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5sZW5ndGggLSAxXSA+PSByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSAmJiB0aGlzLmVhcmx5RGlhbG9nc1tpZF0ucHJhY2tlZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIXRoaXMuaGFzRGVzY3JpcHRpb24ocmVzcG9uc2UpKSB7CiAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSQWNrOiAnICsgcmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykgKyAnICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ2NzZXEnKSk7CiAgICAgICAgICAgIHRoaXMuZWFybHlEaWFsb2dzW2lkXS5wcmFja2VkLnB1c2gocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpOwogICAgICAgICAgICB0aGlzLmVhcmx5RGlhbG9nc1tpZF0uc2VuZFJlcXVlc3QodGhpcywgX3NpcDIuZGVmYXVsdC5DLlBSQUNLLCB7CiAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuZW1pdCgncHJvZ3Jlc3MnLCByZXNwb25zZSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzT2ZmZXIpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmNyZWF0ZURpYWxvZyhyZXNwb25zZSwgJ1VBQycpKSB7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5oYXNBbnN3ZXIgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmRpYWxvZy5wcmFja2VkLnB1c2gocmVzcG9uc2UuZ2V0SGVhZGVyKCdyc2VxJykpOwoKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JBY2s6ICcgKyByZXNwb25zZS5nZXRIZWFkZXIoJ3JzZXEnKSArICcgJyArIHJlc3BvbnNlLmdldEhlYWRlcignY3NlcScpKTsKCiAgICAgICAgICAgIHNlc3Npb24uc2VuZFJlcXVlc3QoX3NpcDIuZGVmYXVsdC5DLlBSQUNLLCB7CiAgICAgICAgICAgICAgZXh0cmFIZWFkZXJzOiBleHRyYUhlYWRlcnMsCiAgICAgICAgICAgICAgcmVjZWl2ZVJlc3BvbnNlOiBmdW5jdGlvbiByZWNlaXZlUmVzcG9uc2UoKSB7fQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgc2Vzc2lvbi5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgc2Vzc2lvbi5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlKTsKICAgICAgICB9CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgL14yWzAtOV17Mn0kLy50ZXN0KHJlc3BvbnNlLnN0YXR1c19jb2RlKToKICAgICAgICB2YXIgY3NlcSA9IHRoaXMucmVxdWVzdC5jc2VxICsgJyAnICsgdGhpcy5yZXF1ZXN0Lm1ldGhvZDsKICAgICAgICBpZiAoY3NlcSAhPT0gcmVzcG9uc2UuZ2V0SGVhZGVyKCdjc2VxJykpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19FQVJMWV9NRURJQSAmJiB0aGlzLmRpYWxvZykgewogICAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19DT05GSVJNRUQ7CiAgICAgICAgICBvcHRpb25zID0ge307CiAgICAgICAgICBpZiAodGhpcy5yZW5kZXJib2R5KSB7CiAgICAgICAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdDb250ZW50LVR5cGU6ICcgKyB0aGlzLnJlbmRlcnR5cGUpOwogICAgICAgICAgICBvcHRpb25zLmV4dHJhSGVhZGVycyA9IGV4dHJhSGVhZGVyczsKICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gdGhpcy5yZW5kZXJib2R5OwogICAgICAgICAgfQogICAgICAgICAgb3B0aW9ucy5jc2VxID0gcmVzcG9uc2UuY3NlcTsKICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoX3NpcDIuZGVmYXVsdC5DLkFDSywgb3B0aW9ucyk7CiAgICAgICAgICB0aGlzLmFjY2VwdGVkKHJlc3BvbnNlKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoaXMuZGlhbG9nIGlzIGFscmVhZHkgY29uZmlybWVkCiAgICAgICAgaWYgKHRoaXMuZGlhbG9nKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmhhc0Fuc3dlcikgewogICAgICAgICAgaWYgKHRoaXMucmVuZGVyYm9keSkgewogICAgICAgICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGVudC1UeXBlOiAnICsgc2Vzc2lvbi5yZW5kZXJ0eXBlKTsKICAgICAgICAgICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSBleHRyYUhlYWRlcnM7CiAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IHRoaXMucmVuZGVyYm9keTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoX3NpcDIuZGVmYXVsdC5DLkFDSywgb3B0aW9ucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghdGhpcy5oYXNEZXNjcmlwdGlvbihyZXNwb25zZSkpIHsKICAgICAgICAgICAgdGhpcy5hY2NlcHRBbmRUZXJtaW5hdGUocmVzcG9uc2UsIDQwMCwgJ01pc3Npbmcgc2Vzc2lvbiBkZXNjcmlwdGlvbicpOwogICAgICAgICAgICB0aGlzLmZhaWxlZChyZXNwb25zZSwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVzcG9uc2UsICdVQUMnKSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuaGFzQW5zd2VyID0gdHJ1ZTsKICAgICAgICAgIHZhciBvcHRpb25zID0ge307IC8vLGxvY2FsTWVkaWE7CiAgICAgICAgICBzZXNzaW9uLnN0YXR1cyA9IEMuU1RBVFVTX0NPTkZJUk1FRDsKICAgICAgICAgIGlmIChzZXNzaW9uLnJlbmRlcmJvZHkpIHsKICAgICAgICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRlbnQtVHlwZTogJyArIHNlc3Npb24ucmVuZGVydHlwZSk7CiAgICAgICAgICAgIG9wdGlvbnMuZXh0cmFIZWFkZXJzID0gZXh0cmFIZWFkZXJzOwogICAgICAgICAgICBvcHRpb25zLmJvZHkgPSBzZXNzaW9uLnJlbmRlcmJvZHk7CiAgICAgICAgICB9CiAgICAgICAgICBvcHRpb25zLmNzZXEgPSByZXNwb25zZS5jc2VxOwogICAgICAgICAgc2Vzc2lvbi5zZW5kUmVxdWVzdChfc2lwMi5kZWZhdWx0LkMuQUNLLCBvcHRpb25zKTsKICAgICAgICAgIHNlc3Npb24uYWNjZXB0ZWQocmVzcG9uc2UpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgZGVmYXVsdDoKICAgICAgICBjYXVzZSA9IF9zaXAyLmRlZmF1bHQuVXRpbHMuc2lwRXJyb3JDYXVzZShyZXNwb25zZS5zdGF0dXNfY29kZSk7CiAgICAgICAgdGhpcy5yZWplY3RlZChyZXNwb25zZSwgY2F1c2UpOwogICAgICAgIHRoaXMuZmFpbGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlc3BvbnNlLCBjYXVzZSk7CiAgICB9CiAgfSwKCiAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwob3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgogICAgb3B0aW9ucy5leHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCk7CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfVEVSTUlOQVRFRCB8fCB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRocm93IG5ldyBfc2lwMi5kZWZhdWx0LkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogICAgfQoKICAgIHRoaXMubG9nZ2VyLmxvZygnY2FuY2VsaW5nIFJUQ1Nlc3Npb24nKTsKCiAgICB2YXIgY2FuY2VsX3JlYXNvbiA9IF9zaXAyLmRlZmF1bHQuVXRpbHMuZ2V0Q2FuY2VsUmVhc29uKG9wdGlvbnMuc3RhdHVzX2NvZGUsIG9wdGlvbnMucmVhc29uX3BocmFzZSk7CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfTlVMTCB8fCB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfSU5WSVRFX1NFTlQgJiYgIXRoaXMucmVjZWl2ZWRfMTAwKSB7CiAgICAgIHRoaXMuaXNDYW5jZWxlZCA9IHRydWU7CiAgICAgIHRoaXMuY2FuY2VsUmVhc29uID0gY2FuY2VsX3JlYXNvbjsKICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0lOVklURV9TRU5UIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU18xWFhfUkVDRUlWRUQgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0VBUkxZX01FRElBKSB7CiAgICAgIHRoaXMucmVxdWVzdC5jYW5jZWwoY2FuY2VsX3JlYXNvbiwgb3B0aW9ucy5leHRyYUhlYWRlcnMpOwogICAgfQoKICAgIHJldHVybiB0aGlzLmNhbmNlbGVkKCk7CiAgfSwKCiAgdGVybWluYXRlOiBmdW5jdGlvbiB0ZXJtaW5hdGUob3B0aW9ucykgewogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19DT05GSVJNRUQpIHsKICAgICAgdGhpcy5ieWUob3B0aW9ucyk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmNhbmNlbChvcHRpb25zKTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LAoKICByZWNlaXZlUmVxdWVzdDogZnVuY3Rpb24gcmVjZWl2ZVJlcXVlc3QocmVxdWVzdCkgewogICAgLy8gSUNDIFJFQ0VJVkUgUkVRVUVTVAoKICAgIC8vIFJlamVjdCBDQU5DRUxzCiAgICBpZiAocmVxdWVzdC5tZXRob2QgPT09IF9zaXAyLmRlZmF1bHQuQy5DQU5DRUwpIHsKICAgICAgLy8gVE9ETzsgbWFrZSB0aGlzIGEgc3dpdGNoIHdoZW4gaXQgZ2V0cyBhZGRlZAogICAgfQoKICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gX3NpcDIuZGVmYXVsdC5DLkFDSyAmJiB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKSB7CiAgICAgIF9zaXAyLmRlZmF1bHQuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5hY2tUaW1lcik7CiAgICAgIF9zaXAyLmRlZmF1bHQuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5pbnZpdGUyeHhUaW1lcik7CiAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ09ORklSTUVEOwoKICAgICAgdGhpcy5hY2NlcHRlZCgpOwogICAgfQoKICAgIHJldHVybiBTZXNzaW9uLnByb3RvdHlwZS5yZWNlaXZlUmVxdWVzdC5hcHBseSh0aGlzLCBbcmVxdWVzdF0pOwogIH0sCgogIG9uVHJhbnNwb3J0RXJyb3I6IGZ1bmN0aW9uIG9uVHJhbnNwb3J0RXJyb3IoKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0NPTkZJUk1FRCAmJiB0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmZhaWxlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogICAgfQogIH0sCgogIG9uUmVxdWVzdFRpbWVvdXQ6IGZ1bmN0aW9uIG9uUmVxdWVzdFRpbWVvdXQoKSB7CiAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0NPTkZJUk1FRCkgewogICAgICB0aGlzLnRlcm1pbmF0ZWQobnVsbCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpOwogICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICB0aGlzLmZhaWxlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9CiAgfQoKfTsKCmV4cG9ydHMuZGVmYXVsdCA9IEludml0ZUNsaWVudENvbnRleHQ7Cm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7InNpcC5qcyI6NDJ9XSw0NjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7Cid1c2Ugc3RyaWN0JzsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKCnZhciBfc2lwID0gcmVxdWlyZSgnc2lwLmpzJyk7Cgp2YXIgX3NpcDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zaXApOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCnZhciBTZXNzaW9uID0gX3NpcDIuZGVmYXVsdC5TZXNzaW9uOwp2YXIgQyA9IHsKICBTVEFUVVNfTlVMTDogMCwKICBTVEFUVVNfSU5WSVRFX1NFTlQ6IDEsCiAgU1RBVFVTXzFYWF9SRUNFSVZFRDogMiwKICBTVEFUVVNfSU5WSVRFX1JFQ0VJVkVEOiAzLAogIFNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVI6IDQsCiAgU1RBVFVTX0FOU1dFUkVEOiA1LAogIFNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSzogNiwKICBTVEFUVVNfV0FJVElOR19GT1JfQUNLOiA3LAogIFNUQVRVU19DQU5DRUxFRDogOCwKICBTVEFUVVNfVEVSTUlOQVRFRDogOSwKICBTVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0s6IDEwLAogIFNUQVRVU19FQVJMWV9NRURJQTogMTEsCiAgU1RBVFVTX0NPTkZJUk1FRDogMTIKfTsKCnZhciBoYXNEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uIGhhc0Rlc2NyaXB0aW9uKG1lc3NhZ2UpIHsKICByZXR1cm4gbWVzc2FnZS5nZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScpID09PSAnYXBwbGljYXRpb24vc2RwJyAmJiAhIW1lc3NhZ2UuYm9keTsKfTsKCnZhciBJbnZpdGVTZXJ2ZXJDb250ZXh0ID0gZnVuY3Rpb24gSW52aXRlU2VydmVyQ29udGV4dCh1YSwgcmVxdWVzdCkgewogIHZhciBleHBpcmVzLAogICAgICBzZWxmID0gdGhpcywKICAgICAgY29udGVudFR5cGUgPSByZXF1ZXN0LmdldEhlYWRlcignQ29udGVudC1UeXBlJyksCiAgICAgIGNvbnRlbnREaXNwID0gcmVxdWVzdC5wYXJzZUhlYWRlcignQ29udGVudC1EaXNwb3NpdGlvbicpOwoKICBfc2lwMi5kZWZhdWx0LlV0aWxzLmF1Z21lbnQodGhpcywgX3NpcDIuZGVmYXVsdC5TZXJ2ZXJDb250ZXh0LCBbdWEsIHJlcXVlc3RdKTsKICBfc2lwMi5kZWZhdWx0LlV0aWxzLmF1Z21lbnQodGhpcywgX3NpcDIuZGVmYXVsdC5TZXNzaW9uLCBbdWEuY29uZmlndXJhdGlvbi5tZWRpYUhhbmRsZXJGYWN0b3J5XSk7CgogIC8vSW5pdGlhbGl6ZSBNZWRpYSBTZXNzaW9uCiAgdGhpcy5tZWRpYUhhbmRsZXIgPSB0aGlzLm1lZGlhSGFuZGxlckZhY3RvcnkodGhpcywgewogICAgUlRDQ29uc3RyYWludHM6IHsgIm9wdGlvbmFsIjogW3sgJ0R0bHNTcnRwS2V5QWdyZWVtZW50JzogJ3RydWUnIH1dIH0KICB9KTsKCiAgLy8gQ2hlY2sgYm9keSBhbmQgY29udGVudCB0eXBlCiAgaWYgKCFjb250ZW50RGlzcCAmJiAhaGFzRGVzY3JpcHRpb24ocmVxdWVzdCkgfHwgY29udGVudERpc3AgJiYgY29udGVudERpc3AudHlwZSA9PT0gJ3JlbmRlcicpIHsKICAgIHRoaXMucmVuZGVyYm9keSA9IHJlcXVlc3QuYm9keTsKICAgIHRoaXMucmVuZGVydHlwZSA9IGNvbnRlbnRUeXBlOwogIH0gZWxzZSBpZiAoIWhhc0Rlc2NyaXB0aW9uKHJlcXVlc3QpICYmIGNvbnRlbnREaXNwICYmIGNvbnRlbnREaXNwLnR5cGUgPT09ICdzZXNzaW9uJykgewogICAgcmVxdWVzdC5yZXBseSg0MTUpOwogICAgLy9UT0RPOiBpbnN0ZWFkIG9mIDQxNSwgcGFzcyBvZmYgdG8gdGhlIG1lZGlhIGhhbmRsZXIsIHdobyBjYW4gdGhlbiBkZWNpZGUgaWYgd2UgY2FuIHVzZSBpdAogICAgcmV0dXJuOwogIH0KCiAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19JTlZJVEVfUkVDRUlWRUQ7CiAgdGhpcy5mcm9tX3RhZyA9IHJlcXVlc3QuZnJvbV90YWc7CiAgdGhpcy5pZCA9IHJlcXVlc3QuY2FsbF9pZCArIHRoaXMuZnJvbV90YWc7CiAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdDsKICB0aGlzLmNvbnRhY3QgPSB0aGlzLnVhLmNvbnRhY3QudG9TdHJpbmcoKTsKCiAgdGhpcy5yZWNlaXZlTm9uSW52aXRlUmVzcG9uc2UgPSBmdW5jdGlvbiAoKSB7fTsgLy8gaW50ZW50aW9uYWwgbm8tb3AKCiAgdGhpcy5sb2dnZXIgPSB1YS5nZXRMb2dnZXIoJ3NpcC5pbnZpdGVzZXJ2ZXJjb250ZXh0JywgdGhpcy5pZCk7CgogIC8vU2F2ZSB0aGUgc2Vzc2lvbiBpbnRvIHRoZSB1YSBzZXNzaW9ucyBjb2xsZWN0aW9uLgogIHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF0gPSB0aGlzOwoKICAvL0dldCB0aGUgRXhwaXJlcyBoZWFkZXIgdmFsdWUgaWYgZXhpc3RzCiAgaWYgKHJlcXVlc3QuaGFzSGVhZGVyKCdleHBpcmVzJykpIHsKICAgIGV4cGlyZXMgPSByZXF1ZXN0LmdldEhlYWRlcignZXhwaXJlcycpICogMTAwMDsKICB9CgogIC8vU2V0IDEwMHJlbCBpZiBuZWNlc3NhcnkKICBmdW5jdGlvbiBzZXQxMDByZWwoaCwgYykgewogICAgaWYgKHJlcXVlc3QuaGFzSGVhZGVyKGgpICYmIHJlcXVlc3QuZ2V0SGVhZGVyKGgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignMTAwcmVsJykgPj0gMCkgewogICAgICBzZWxmLnJlbDEwMCA9IGM7CiAgICB9CiAgfQogIHNldDEwMHJlbCgncmVxdWlyZScsIF9zaXAyLmRlZmF1bHQuQy5zdXBwb3J0ZWQuUkVRVUlSRUQpOwogIHNldDEwMHJlbCgnc3VwcG9ydGVkJywgX3NpcDIuZGVmYXVsdC5DLnN1cHBvcnRlZC5TVVBQT1JURUQpOwoKICAvKiBTZXQgdGhlIHRvX3RhZyBiZWZvcmUNCiAgICogcmVwbHlpbmcgYSByZXNwb25zZSBjb2RlIHRoYXQgd2lsbCBjcmVhdGUgYSBkaWFsb2cuDQogICAqLwogIHJlcXVlc3QudG9fdGFnID0gX3NpcDIuZGVmYXVsdC5VdGlscy5uZXdUYWcoKTsKCiAgLy8gQW4gZXJyb3Igb24gZGlhbG9nIGNyZWF0aW9uIHdpbGwgZmlyZSAnZmFpbGVkJyBldmVudAogIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVxdWVzdCwgJ1VBUycsIHRydWUpKSB7CiAgICByZXF1ZXN0LnJlcGx5KDUwMCwgJ01pc3NpbmcgQ29udGFjdCBoZWFkZXIgZmllbGQnKTsKICAgIHJldHVybjsKICB9CgogIGZ1bmN0aW9uIGZpcmVOZXdTZXNzaW9uKCkgewogICAgdmFyIG9wdGlvbnMgPSB7IGV4dHJhSGVhZGVyczogWydDb250YWN0OiAnICsgc2VsZi5jb250YWN0XSB9OwoKICAgIGlmIChzZWxmLnJlbDEwMCAhPT0gX3NpcDIuZGVmYXVsdC5DLnN1cHBvcnRlZC5SRVFVSVJFRCkgewogICAgICBzZWxmLnByb2dyZXNzKG9wdGlvbnMpOwogICAgfQogICAgc2VsZi5zdGF0dXMgPSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVI7CgogICAgLy8gU2V0IHVzZXJOb0Fuc3dlclRpbWVyCiAgICBzZWxmLnRpbWVycy51c2VyTm9BbnN3ZXJUaW1lciA9IF9zaXAyLmRlZmF1bHQuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByZXF1ZXN0LnJlcGx5KDQwOCk7CiAgICAgIHNlbGYuZmFpbGVkKHJlcXVlc3QsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuTk9fQU5TV0VSKTsKICAgICAgc2VsZi50ZXJtaW5hdGVkKHJlcXVlc3QsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuTk9fQU5TV0VSKTsKICAgIH0sIHNlbGYudWEuY29uZmlndXJhdGlvbi5ub0Fuc3dlclRpbWVvdXQpOwoKICAgIC8qIFNldCBleHBpcmVzVGltZXINCiAgICAgKiBSRkMzMjYxIDEzLjMuMQ0KICAgICAqLwogICAgaWYgKGV4cGlyZXMpIHsKICAgICAgc2VsZi50aW1lcnMuZXhwaXJlc1RpbWVyID0gX3NpcDIuZGVmYXVsdC5UaW1lcnMuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHNlbGYuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIpIHsKICAgICAgICAgIHJlcXVlc3QucmVwbHkoNDg3KTsKICAgICAgICAgIHNlbGYuZmFpbGVkKHJlcXVlc3QsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuRVhQSVJFUyk7CiAgICAgICAgICBzZWxmLnRlcm1pbmF0ZWQocmVxdWVzdCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5FWFBJUkVTKTsKICAgICAgICB9CiAgICAgIH0sIGV4cGlyZXMpOwogICAgfQoKICAgIHNlbGYuZW1pdCgnaW52aXRlJywgcmVxdWVzdCk7CiAgfQoKICBpZiAoIWhhc0Rlc2NyaXB0aW9uKHJlcXVlc3QpIHx8IHRoaXMucmVuZGVyYm9keSkgewogICAgX3NpcDIuZGVmYXVsdC5UaW1lcnMuc2V0VGltZW91dChmaXJlTmV3U2Vzc2lvbiwgMCk7CiAgfSBlbHNlIHsKICAgIHRoaXMuaGFzT2ZmZXIgPSB0cnVlOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGZpcmVOZXdTZXNzaW9uKCk7CiAgICB9LCA1MDApOwogIH0KfTsKCkludml0ZVNlcnZlckNvbnRleHQucHJvdG90eXBlID0gewoKICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChvcHRpb25zKSB7CiAgICAvLyBDaGVjayBTZXNzaW9uIFN0YXR1cwogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRocm93IG5ldyBfc2lwMi5kZWZhdWx0LkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogICAgfQoKICAgIHRoaXMubG9nZ2VyLmxvZygncmVqZWN0aW5nIFJUQ1Nlc3Npb24nKTsKCiAgICBfc2lwMi5kZWZhdWx0LlNlcnZlckNvbnRleHQucHJvdG90eXBlLnJlamVjdC5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgcmV0dXJuIHRoaXMudGVybWluYXRlZCgpOwogIH0sCgogIHRlcm1pbmF0ZTogZnVuY3Rpb24gdGVybWluYXRlKG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwoKICAgIHZhciBleHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCksCiAgICAgICAgYm9keSA9IG9wdGlvbnMuYm9keSwKICAgICAgICBkaWFsb2csCiAgICAgICAgc2VsZiA9IHRoaXM7CgogICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0sgJiYgdGhpcy5yZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbi5zdGF0ZSAhPT0gX3NpcDIuZGVmYXVsdC5UcmFuc2FjdGlvbnMuQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICBkaWFsb2cgPSB0aGlzLmRpYWxvZzsKCiAgICAgIHRoaXMucmVjZWl2ZVJlcXVlc3QgPSBmdW5jdGlvbiAocmVxdWVzdCkgewogICAgICAgIGlmIChyZXF1ZXN0Lm1ldGhvZCA9PT0gX3NpcDIuZGVmYXVsdC5DLkFDSykgewogICAgICAgICAgdGhpcy5zZW5kUmVxdWVzdChfc2lwMi5kZWZhdWx0LkMuQllFLCB7CiAgICAgICAgICAgIGV4dHJhSGVhZGVyczogZXh0cmFIZWFkZXJzLAogICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICB9KTsKICAgICAgICAgIGRpYWxvZy50ZXJtaW5hdGUoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLm9uKCdzdGF0ZUNoYW5nZWQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IF9zaXAyLmRlZmF1bHQuVHJhbnNhY3Rpb25zLkMuU1RBVFVTX1RFUk1JTkFURUQgJiYgdGhpcy5kaWFsb2cpIHsKICAgICAgICAgIHRoaXMucmVxdWVzdCA9IG5ldyBfc2lwMi5kZWZhdWx0Lk91dGdvaW5nUmVxdWVzdChfc2lwMi5kZWZhdWx0LkMuQllFLCB0aGlzLmRpYWxvZy5yZW1vdGVfdGFyZ2V0LCB0aGlzLnVhLCB7CiAgICAgICAgICAgICdjc2VxJzogdGhpcy5kaWFsb2cubG9jYWxfc2VxbnVtICs9IDEsCiAgICAgICAgICAgICdjYWxsX2lkJzogdGhpcy5kaWFsb2cuaWQuY2FsbF9pZCwKICAgICAgICAgICAgJ2Zyb21fdXJpJzogdGhpcy5kaWFsb2cubG9jYWxfdXJpLAogICAgICAgICAgICAnZnJvbV90YWcnOiB0aGlzLmRpYWxvZy5pZC5sb2NhbF90YWcsCiAgICAgICAgICAgICd0b191cmknOiB0aGlzLmRpYWxvZy5yZW1vdGVfdXJpLAogICAgICAgICAgICAndG9fdGFnJzogdGhpcy5kaWFsb2cuaWQucmVtb3RlX3RhZywKICAgICAgICAgICAgJ3JvdXRlX3NldCc6IHRoaXMuZGlhbG9nLnJvdXRlX3NldAogICAgICAgICAgfSwgZXh0cmFIZWFkZXJzLCBib2R5KTsKCiAgICAgICAgICBuZXcgX3NpcDIuZGVmYXVsdC5SZXF1ZXN0U2VuZGVyKHsKICAgICAgICAgICAgcmVxdWVzdDogdGhpcy5yZXF1ZXN0LAogICAgICAgICAgICBvblJlcXVlc3RUaW1lb3V0OiBmdW5jdGlvbiBvblJlcXVlc3RUaW1lb3V0KCkgewogICAgICAgICAgICAgIHNlbGYub25SZXF1ZXN0VGltZW91dCgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBvblRyYW5zcG9ydEVycm9yOiBmdW5jdGlvbiBvblRyYW5zcG9ydEVycm9yKCkgewogICAgICAgICAgICAgIHNlbGYub25UcmFuc3BvcnRFcnJvcigpOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZWNlaXZlUmVzcG9uc2U6IGZ1bmN0aW9uIHJlY2VpdmVSZXNwb25zZSgpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHRoaXMudWEpLnNlbmQoKTsKICAgICAgICAgIGRpYWxvZy50ZXJtaW5hdGUoKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdGhpcy5lbWl0KCdieWUnLCB0aGlzLnJlcXVlc3QpOwogICAgICB0aGlzLnRlcm1pbmF0ZWQoKTsKCiAgICAgIC8vIFJlc3RvcmUgdGhlIGRpYWxvZyBpbnRvICd0aGlzJyBpbiBvcmRlciB0byBiZSBhYmxlIHRvIHNlbmQgdGhlIGluLWRpYWxvZyBCWUUgOi0pCiAgICAgIHRoaXMuZGlhbG9nID0gZGlhbG9nOwoKICAgICAgLy8gUmVzdG9yZSB0aGUgZGlhbG9nIGludG8gJ3VhJyBzbyB0aGUgQUNLIGNhbiByZWFjaCAndGhpcycgc2Vzc2lvbgogICAgICB0aGlzLnVhLmRpYWxvZ3NbZGlhbG9nLmlkLnRvU3RyaW5nKCldID0gZGlhbG9nOwogICAgfSBlbHNlIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMuYnllKG9wdGlvbnMpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yZWplY3Qob3B0aW9ucyk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoNCiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLm1lZGlhXSBnZXRzIHBhc3NlZCB0byBTSVAuTWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uIGFzIG1lZGlhSGludA0KICAgKi8KICBwcm9ncmVzczogZnVuY3Rpb24gcHJvZ3Jlc3Mob3B0aW9ucykgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICB2YXIgc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAxODAsCiAgICAgICAgcmVhc29uUGhyYXNlID0gb3B0aW9ucy5yZWFzb25QaHJhc2UsCiAgICAgICAgZXh0cmFIZWFkZXJzID0gKG9wdGlvbnMuZXh0cmFIZWFkZXJzIHx8IFtdKS5zbGljZSgpLAogICAgICAgIGljZVNlcnZlcnMsCiAgICAgICAgc3R1blNlcnZlcnMgPSBvcHRpb25zLnN0dW5TZXJ2ZXJzIHx8IG51bGwsCiAgICAgICAgdHVyblNlcnZlcnMgPSBvcHRpb25zLnR1cm5TZXJ2ZXJzIHx8IG51bGwsCiAgICAgICAgYm9keSA9IG9wdGlvbnMuYm9keSwKICAgICAgICByZXNwb25zZTsKCiAgICBpZiAoc3RhdHVzQ29kZSA8IDEwMCB8fCBzdGF0dXNDb2RlID4gMTk5KSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgc3RhdHVzQ29kZTogJyArIHN0YXR1c0NvZGUpOwogICAgfQoKICAgIGlmICh0aGlzLmlzQ2FuY2VsZWQgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX1RFUk1JTkFURUQpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgZnVuY3Rpb24gZG8xMDByZWwoKSB7CiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi8KICAgICAgc3RhdHVzQ29kZSA9IG9wdGlvbnMuc3RhdHVzQ29kZSB8fCAxODM7CgogICAgICAvLyBTZXQgc3RhdHVzIGFuZCBhZGQgZXh0cmEgaGVhZGVycwogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLOwogICAgICBleHRyYUhlYWRlcnMucHVzaCgnQ29udGFjdDogJyArIHRoaXMuY29udGFjdCk7CiAgICAgIGV4dHJhSGVhZGVycy5wdXNoKCdSZXF1aXJlOiAxMDByZWwnKTsKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ1JTZXE6ICcgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMCkpOwoKICAgICAgLy8gR2V0IHRoZSBzZXNzaW9uIGRlc2NyaXB0aW9uIHRvIGFkZCB0byBwcmVhY2NlcHQgd2l0aAogICAgICBpZiAodGhpcy5pc0NhbmNlbGVkIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzW3RoaXMuaGFzT2ZmZXIgPyAnaGFzQW5zd2VyJyA6ICdoYXNPZmZlciddID0gdHJ1ZTsKCiAgICAgIC8vIFJldHJhbnNtaXQgdW50aWwgd2UgZ2V0IGEgcmVzcG9uc2Ugb3Igd2UgdGltZSBvdXQgKHNlZSBwcmFja1RpbWVyIGJlbG93KQogICAgICB2YXIgdGltZW91dCA9IF9zaXAyLmRlZmF1bHQuVGltZXJzLlQxOwogICAgICB0aGlzLnRpbWVycy5yZWwxeHhUaW1lciA9IF9zaXAyLmRlZmF1bHQuVGltZXJzLnNldFRpbWVvdXQoZnVuY3Rpb24gcmVsMXh4UmV0cmFuc21pc3Npb24oKSB7CiAgICAgICAgdGhpcy5yZXF1ZXN0LnJlcGx5KHN0YXR1c0NvZGUsIG51bGwsIGV4dHJhSGVhZGVycywgZGVzY3JpcHRpb24pOwogICAgICAgIHRpbWVvdXQgKj0gMjsKICAgICAgICB0aGlzLnRpbWVycy5yZWwxeHhUaW1lciA9IF9zaXAyLmRlZmF1bHQuVGltZXJzLnNldFRpbWVvdXQocmVsMXh4UmV0cmFuc21pc3Npb24uYmluZCh0aGlzKSwgdGltZW91dCk7CiAgICAgIH0uYmluZCh0aGlzKSwgdGltZW91dCk7CgogICAgICAvLyBUaW1lb3V0IGFuZCByZWplY3QgSU5WSVRFIGlmIG5vIHJlc3BvbnNlCiAgICAgIHRoaXMudGltZXJzLnByYWNrVGltZXIgPSBfc2lwMi5kZWZhdWx0LlRpbWVycy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX1dBSVRJTkdfRk9SX1BSQUNLKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxvZ2dlci5sb2coJ25vIFBSQUNLIHJlY2VpdmVkLCByZWplY3RpbmcgdGhlIGNhbGwnKTsKICAgICAgICBfc2lwMi5kZWZhdWx0LlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMucmVsMXh4VGltZXIpOwogICAgICAgIHRoaXMucmVxdWVzdC5yZXBseSg1MDQpOwogICAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLk5PX1BSQUNLKTsKICAgICAgfS5iaW5kKHRoaXMpLCBfc2lwMi5kZWZhdWx0LlRpbWVycy5UMSAqIDY0KTsKCiAgICAgIC8vIFNlbmQgdGhlIGluaXRpYWwgcmVzcG9uc2UKICAgICAgcmVzcG9uc2UgPSB0aGlzLnJlcXVlc3QucmVwbHkoc3RhdHVzQ29kZSwgcmVhc29uUGhyYXNlLCBleHRyYUhlYWRlcnMsIGRlc2NyaXB0aW9uKTsKICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlLCByZWFzb25QaHJhc2UpOwogICAgfSAvLyBlbmQgZG8xMDByZWwKCiAgICBmdW5jdGlvbiBub3JtYWxSZXBseSgpIHsKICAgICAgLyoganNoaW50IHZhbGlkdGhpczp0cnVlICovCiAgICAgIHJlc3BvbnNlID0gdGhpcy5yZXF1ZXN0LnJlcGx5KHN0YXR1c0NvZGUsIHJlYXNvblBocmFzZSwgZXh0cmFIZWFkZXJzLCBib2R5KTsKICAgICAgdGhpcy5lbWl0KCdwcm9ncmVzcycsIHJlc3BvbnNlLCByZWFzb25QaHJhc2UpOwogICAgfQoKICAgIGlmIChvcHRpb25zLnN0YXR1c0NvZGUgIT09IDEwMCAmJiAodGhpcy5yZWwxMDAgPT09IF9zaXAyLmRlZmF1bHQuQy5zdXBwb3J0ZWQuUkVRVUlSRUQgfHwgdGhpcy5yZWwxMDAgPT09IF9zaXAyLmRlZmF1bHQuQy5zdXBwb3J0ZWQuU1VQUE9SVEVEICYmIG9wdGlvbnMucmVsMTAwIHx8IHRoaXMucmVsMTAwID09PSBfc2lwMi5kZWZhdWx0LkMuc3VwcG9ydGVkLlNVUFBPUlRFRCAmJiB0aGlzLnVhLmNvbmZpZ3VyYXRpb24ucmVsMTAwID09PSBfc2lwMi5kZWZhdWx0LkMuc3VwcG9ydGVkLlJFUVVJUkVEKSkgewogICAgICBkbzEwMHJlbC5hcHBseSh0aGlzKTsKICAgIH0gZWxzZSB7CiAgICAgIG5vcm1hbFJlcGx5LmFwcGx5KHRoaXMpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgLyoNCiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLm1lZGlhXSBnZXRzIHBhc3NlZCB0byBTSVAuTWVkaWFIYW5kbGVyLmdldERlc2NyaXB0aW9uIGFzIG1lZGlhSGludA0KICAgKi8KICBhY2NlcHQ6IGZ1bmN0aW9uIGFjY2VwdChvcHRpb25zKSB7CiAgICBvcHRpb25zID0gT2JqZWN0LmNyZWF0ZShTZXNzaW9uLmRlc3VnYXIob3B0aW9ucykpOwogICAgdGhpcy5vbkluZm8gPSBvcHRpb25zLm9uSW5mbzsKCiAgICAvLyBjb21tZW50ZWQgb3V0IG5vdy11bnVzZWQgaG9sZC1yZWxhdGVkIHZhcmlhYmxlcyBmb3IganNoaW50LiBTZWUgYmVsb3cuIEpNRiAyMDE0LTEtMjEKICAgIHZhcgogICAgLy9pZHgsIGxlbmd0aCwgaGFzQXVkaW8sIGhhc1ZpZGVvLAogICAgc2VsZiA9IHRoaXMsCiAgICAgICAgcmVxdWVzdCA9IHRoaXMucmVxdWVzdCwKICAgICAgICBleHRyYUhlYWRlcnMgPSAob3B0aW9ucy5leHRyYUhlYWRlcnMgfHwgW10pLnNsaWNlKCksCiAgICAgICAgZGVzY3JpcHRpb25DcmVhdGlvblN1Y2NlZWRlZCA9IGZ1bmN0aW9uIGRlc2NyaXB0aW9uQ3JlYXRpb25TdWNjZWVkZWQoZGVzY3JpcHRpb24pIHsKICAgICAgdmFyIHJlc3BvbnNlLAoKICAgICAgLy8gcnVuIGZvciByZXBseSBzdWNjZXNzIGNhbGxiYWNrCiAgICAgIHJlcGx5U3VjY2VlZGVkID0gZnVuY3Rpb24gcmVwbHlTdWNjZWVkZWQoKSB7CiAgICAgICAgc2VsZi5zdGF0dXMgPSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0s7CgogICAgICAgIHNlbGYuc2V0SW52aXRlMnh4VGltZXIocmVxdWVzdCwgZGVzY3JpcHRpb24pOwogICAgICAgIHNlbGYuc2V0QUNLVGltZXIoKTsKICAgICAgfSwKCgogICAgICAvLyBydW4gZm9yIHJlcGx5IGZhaWx1cmUgY2FsbGJhY2sKICAgICAgcmVwbHlGYWlsZWQgPSBmdW5jdGlvbiByZXBseUZhaWxlZCgpIHsKICAgICAgICBzZWxmLmZhaWxlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogICAgICAgIHNlbGYudGVybWluYXRlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpOwogICAgICB9OwoKICAgICAgZXh0cmFIZWFkZXJzLnB1c2goJ0NvbnRhY3Q6ICcgKyBzZWxmLmNvbnRhY3QpOwogICAgICBleHRyYUhlYWRlcnMucHVzaCgnQWxsb3c6ICcgKyBfc2lwMi5kZWZhdWx0LlVBLkMuQUxMT1dFRF9NRVRIT0RTLnRvU3RyaW5nKCkpOwoKICAgICAgaWYgKCFzZWxmLmhhc09mZmVyKSB7CiAgICAgICAgc2VsZi5oYXNPZmZlciA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZi5oYXNBbnN3ZXIgPSB0cnVlOwogICAgICB9CiAgICAgIHJlc3BvbnNlID0gcmVxdWVzdC5yZXBseSgyMDAsIG51bGwsIGV4dHJhSGVhZGVycywgZGVzY3JpcHRpb24sIHJlcGx5U3VjY2VlZGVkLCByZXBseUZhaWxlZCk7CiAgICAgIGlmIChzZWxmLnN0YXR1cyAhPT0gQy5TVEFUVVNfVEVSTUlOQVRFRCkgewogICAgICAgIC8vIERpZG4ndCBmYWlsCiAgICAgICAgc2VsZi5hY2NlcHRlZChyZXNwb25zZSwgX3NpcDIuZGVmYXVsdC5VdGlscy5nZXRSZWFzb25QaHJhc2UoMjAwKSk7CiAgICAgIH0KICAgIH07CgogICAgLy8gQ2hlY2sgU2Vzc2lvbiBTdGF0dXMKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfUFJBQ0spIHsKICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19BTlNXRVJFRF9XQUlUSU5HX0ZPUl9QUkFDSzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIpIHsKICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19BTlNXRVJFRDsKICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgIT09IEMuU1RBVFVTX0VBUkxZX01FRElBKSB7CiAgICAgIHRocm93IG5ldyBfc2lwMi5kZWZhdWx0LkV4Y2VwdGlvbnMuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpOwogICAgfQoKICAgIC8vIEFuIGVycm9yIG9uIGRpYWxvZyBjcmVhdGlvbiB3aWxsIGZpcmUgJ2ZhaWxlZCcgZXZlbnQKICAgIGlmICghdGhpcy5jcmVhdGVEaWFsb2cocmVxdWVzdCwgJ1VBUycpKSB7CiAgICAgIHJlcXVlc3QucmVwbHkoNTAwLCAnTWlzc2luZyBDb250YWN0IGhlYWRlciBmaWVsZCcpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0JywgcmVxdWVzdCk7CiAgICBfc2lwMi5kZWZhdWx0LlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMudXNlck5vQW5zd2VyVGltZXIpOwoKICAgIGRlc2NyaXB0aW9uQ3JlYXRpb25TdWNjZWVkZWQob3B0aW9ucy5zZHApOwogICAgcmV0dXJuIHRoaXM7CiAgfSwKCiAgcmVjZWl2ZVJlcXVlc3Q6IGZ1bmN0aW9uIHJlY2VpdmVSZXF1ZXN0KHJlcXVlc3QpIHsKCiAgICAvLyBJU0MgUkVDRUlWRSBSRVFVRVNUCgogICAgZnVuY3Rpb24gY29uZmlybVNlc3Npb24oKSB7CiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqLwogICAgICB2YXIgY29udGVudFR5cGU7CgogICAgICBfc2lwMi5kZWZhdWx0LlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuYWNrVGltZXIpOwogICAgICBfc2lwMi5kZWZhdWx0LlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMuaW52aXRlMnh4VGltZXIpOwogICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0NPTkZJUk1FRDsKICAgICAgdGhpcy51bm11dGUoKTsKCiAgICAgIC8vIFRPRE8gLSB0aGlzIGxvZ2ljIGFzc3VtZXMgQ29udGVudC1EaXNwb3NpdGlvbiBkZWZhdWx0cwogICAgICBjb250ZW50VHlwZSA9IHJlcXVlc3QuZ2V0SGVhZGVyKCdDb250ZW50LVR5cGUnKTsKICAgICAgaWYgKCFoYXNEZXNjcmlwdGlvbihyZXF1ZXN0KSkgewogICAgICAgIHRoaXMucmVuZGVyYm9keSA9IHJlcXVlc3QuYm9keTsKICAgICAgICB0aGlzLnJlbmRlcnR5cGUgPSBjb250ZW50VHlwZTsKICAgICAgfQoKICAgICAgdGhpcy5lbWl0KCdjb25maXJtZWQnLCByZXF1ZXN0KTsKICAgIH0KCiAgICBzd2l0Y2ggKHJlcXVlc3QubWV0aG9kKSB7CiAgICAgIGNhc2UgX3NpcDIuZGVmYXVsdC5DLkNBTkNFTDoKICAgICAgICAvKiBSRkMzMjYxIDE1IFN0YXRlcyB0aGF0IGEgVUFTIG1heSBoYXZlIGFjY2VwdGVkIGFuIGludml0YXRpb24gd2hpbGUgYSBDQU5DRUwNCiAgICAgICAgICogd2FzIGluIHByb2dyZXNzIGFuZCB0aGF0IHRoZSBVQUMgTUFZIGNvbnRpbnVlIHdpdGggdGhlIHNlc3Npb24gZXN0YWJsaXNoZWQgYnkNCiAgICAgICAgICogYW55IDJ4eCByZXNwb25zZSwgb3IgTUFZIHRlcm1pbmF0ZSB3aXRoIEJZRS4gU0lQIGRvZXMgY29udGludWUgd2l0aCB0aGUNCiAgICAgICAgICogZXN0YWJsaXNoZWQgc2Vzc2lvbi4gU28gdGhlIENBTkNFTCBpcyBwcm9jZXNzZWQgb25seSBpZiB0aGUgc2Vzc2lvbiBpcyBub3QgeWV0DQogICAgICAgICAqIGVzdGFibGlzaGVkLg0KICAgICAgICAgKi8KCiAgICAgICAgLyoNCiAgICAgICAgICogVGVybWluYXRlIHRoZSB3aG9sZSBzZXNzaW9uIGluIGNhc2UgdGhlIHVzZXIgZGlkbid0IGFjY2VwdCAob3IgeWV0IHRvIHNlbmQgdGhlIGFuc3dlcikgbm9yIHJlamVjdCB0aGUNCiAgICAgICAgICpyZXF1ZXN0IG9wZW5pbmcgdGhlIHNlc3Npb24uDQogICAgICAgICAqLwogICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSyB8fCB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0sgfHwgdGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0VBUkxZX01FRElBIHx8IHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19BTlNXRVJFRCkgewoKICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfQ0FOQ0VMRUQ7CiAgICAgICAgICB0aGlzLnJlcXVlc3QucmVwbHkoNDg3KTsKICAgICAgICAgIHRoaXMuY2FuY2VsZWQocmVxdWVzdCk7CiAgICAgICAgICB0aGlzLnJlamVjdGVkKHJlcXVlc3QsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuQ0FOQ0VMRUQpOwogICAgICAgICAgdGhpcy5mYWlsZWQocmVxdWVzdCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5DQU5DRUxFRCk7CiAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5DQU5DRUxFRCk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlIF9zaXAyLmRlZmF1bHQuQy5BQ0s6CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spIHsKICAgICAgICAgIGlmICghdGhpcy5oYXNBbnN3ZXIpIHsKICAgICAgICAgICAgaWYgKGhhc0Rlc2NyaXB0aW9uKHJlcXVlc3QpKSB7CiAgICAgICAgICAgICAgLy8gQUNLIGNvbnRhaW5zIGFuc3dlciB0byBhbiBJTlZJVEUgdy9vIFNEUCBuZWdvdGlhdGlvbgogICAgICAgICAgICAgIHRoaXMuaGFzQW5zd2VyID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLm1lZGlhSGFuZGxlci5zZXREZXNjcmlwdGlvbihyZXF1ZXN0KS50aGVuKGNvbmZpcm1TZXNzaW9uLmJpbmQodGhpcyksIGZ1bmN0aW9uIG9uRmFpbHVyZShlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGUpOwogICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGUoewogICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiAnNDg4JywKICAgICAgICAgICAgICAgICAgcmVhc29uUGhyYXNlOiAnQmFkIE1lZGlhIERlc2NyaXB0aW9uJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmZhaWxlZChyZXF1ZXN0LCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lYXJseV9zZHApIHsKICAgICAgICAgICAgICBjb25maXJtU2Vzc2lvbi5hcHBseSh0aGlzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvL1RPRE86IFBhc3MgdG8gbWVkaWFoYW5kbGVyCiAgICAgICAgICAgICAgdGhpcy5mYWlsZWQocmVxdWVzdCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICAgIHRoaXMudGVybWluYXRlZChyZXF1ZXN0LCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbmZpcm1TZXNzaW9uLmFwcGx5KHRoaXMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSBfc2lwMi5kZWZhdWx0LkMuUFJBQ0s6CiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBDLlNUQVRVU19XQUlUSU5HX0ZPUl9QUkFDSyB8fCB0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0spIHsKICAgICAgICAgIC8vbG9jYWxNZWRpYSA9IHNlc3Npb24ubWVkaWFIYW5kbGVyLmxvY2FsTWVkaWE7CiAgICAgICAgICBpZiAoIXRoaXMuaGFzQW5zd2VyKSB7CiAgICAgICAgICAgIGlmIChoYXNEZXNjcmlwdGlvbihyZXF1ZXN0KSkgewogICAgICAgICAgICAgIHRoaXMuaGFzQW5zd2VyID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLm1lZGlhSGFuZGxlci5zZXREZXNjcmlwdGlvbihyZXF1ZXN0KS50aGVuKGZ1bmN0aW9uIG9uU3VjY2VzcygpIHsKICAgICAgICAgICAgICAgIF9zaXAyLmRlZmF1bHQuVGltZXJzLmNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5yZWwxeHhUaW1lcik7CiAgICAgICAgICAgICAgICBfc2lwMi5kZWZhdWx0LlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMucHJhY2tUaW1lcik7CiAgICAgICAgICAgICAgICByZXF1ZXN0LnJlcGx5KDIwMCk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0FOU1dFUkVEX1dBSVRJTkdfRk9SX1BSQUNLKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gQy5TVEFUVVNfRUFSTFlfTUVESUE7CiAgICAgICAgICAgICAgICAgIHRoaXMuYWNjZXB0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0VBUkxZX01FRElBOwogICAgICAgICAgICAgICAgLy9SRVZJU0lUCiAgICAgICAgICAgICAgICB0aGlzLm11dGUoKTsKICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIGZ1bmN0aW9uIG9uRmFpbHVyZShlKSB7CiAgICAgICAgICAgICAgICAvL1RPRE86IFNlbmQgdG8gbWVkaWEgaGFuZGxlcgogICAgICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihlKTsKICAgICAgICAgICAgICAgIHRoaXMudGVybWluYXRlKHsKICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZTogJzQ4OCcsCiAgICAgICAgICAgICAgICAgIHJlYXNvblBocmFzZTogJ0JhZCBNZWRpYSBEZXNjcmlwdGlvbicKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5mYWlsZWQocmVxdWVzdCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICAgICAgdGhpcy50ZXJtaW5hdGVkKHJlcXVlc3QsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMudGVybWluYXRlKHsKICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6ICc0ODgnLAogICAgICAgICAgICAgICAgcmVhc29uUGhyYXNlOiAnQmFkIE1lZGlhIERlc2NyaXB0aW9uJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuZmFpbGVkKHJlcXVlc3QsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTsKICAgICAgICAgICAgICB0aGlzLnRlcm1pbmF0ZWQocmVxdWVzdCwgX3NpcDIuZGVmYXVsdC5DLmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfc2lwMi5kZWZhdWx0LlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMucmVsMXh4VGltZXIpOwogICAgICAgICAgICBfc2lwMi5kZWZhdWx0LlRpbWVycy5jbGVhclRpbWVvdXQodGhpcy50aW1lcnMucHJhY2tUaW1lcik7CiAgICAgICAgICAgIHJlcXVlc3QucmVwbHkoMjAwKTsKCiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQU5TV0VSRURfV0FJVElOR19GT1JfUFJBQ0spIHsKICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IEMuU1RBVFVTX0VBUkxZX01FRElBOwogICAgICAgICAgICAgIHRoaXMuYWNjZXB0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBDLlNUQVRVU19FQVJMWV9NRURJQTsKICAgICAgICAgICAgLy9SRVZJU0lUCiAgICAgICAgICAgIHRoaXMubXV0ZSgpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0dXMgPT09IEMuU1RBVFVTX0VBUkxZX01FRElBKSB7CiAgICAgICAgICByZXF1ZXN0LnJlcGx5KDIwMCk7CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIFNlc3Npb24ucHJvdG90eXBlLnJlY2VpdmVSZXF1ZXN0LmFwcGx5KHRoaXMsIFtyZXF1ZXN0XSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfSwKCiAgb25UcmFuc3BvcnRFcnJvcjogZnVuY3Rpb24gb25UcmFuc3BvcnRFcnJvcigpIHsKICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gQy5TVEFUVVNfQ09ORklSTUVEICYmIHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUik7CiAgICB9CiAgfSwKCiAgb25SZXF1ZXN0VGltZW91dDogZnVuY3Rpb24gb25SZXF1ZXN0VGltZW91dCgpIHsKICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gQy5TVEFUVVNfQ09ORklSTUVEKSB7CiAgICAgIHRoaXMudGVybWluYXRlZChudWxsLCBfc2lwMi5kZWZhdWx0LkMuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCk7CiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzICE9PSBDLlNUQVRVU19URVJNSU5BVEVEKSB7CiAgICAgIHRoaXMuZmFpbGVkKG51bGwsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgICAgdGhpcy50ZXJtaW5hdGVkKG51bGwsIF9zaXAyLmRlZmF1bHQuQy5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKTsKICAgIH0KICB9Cgp9OwoKZXhwb3J0cy5kZWZhdWx0ID0gSW52aXRlU2VydmVyQ29udGV4dDsKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cgp9LHsic2lwLmpzIjo0Mn1dLDQ3OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewoJdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuYWRkQ2FuZGlkYXRlc1RvU0RQID0gYWRkQ2FuZGlkYXRlc1RvU0RQOwoKdmFyIF9zZHBUcmFuc2Zvcm0gPSByZXF1aXJlKCdzZHAtdHJhbnNmb3JtJyk7Cgp2YXIgX3NkcFRyYW5zZm9ybTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZHBUcmFuc2Zvcm0pOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIGFkZENhbmRpZGF0ZXNUb1NEUCh0eHRTZHAsIGNhbmRpZGF0ZXMpIHsKCXZhciBzZHAgPSBfc2RwVHJhbnNmb3JtMi5kZWZhdWx0LnBhcnNlKHR4dFNkcCk7CglzZHAubWVkaWFbMF0uY2FuZGlkYXRlcyA9IFtdOwoJaWYgKHNkcC5tZWRpYS5sZW5ndGggPiAxKSBzZHAubWVkaWFbMV0uY2FuZGlkYXRlcyA9IFtdOwoJY2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChjYW5kaWRhdGUpIHsKCQl2YXIgcGFydHMgPSBjYW5kaWRhdGUuY2FuZGlkYXRlLnN1YnN0cmluZygxMCkuc3BsaXQoJyAnKTsKCQl2YXIgYyA9IHsKCQkJZm91bmRhdGlvbjogcGFydHNbMF0sCgkJCWNvbXBvbmVudDogcGFydHNbMV0sCgkJCXRyYW5zcG9ydDogcGFydHNbMl0udG9Mb3dlckNhc2UoKSwKCQkJcHJpb3JpdHk6IHBhcnRzWzNdLAoJCQlpcDogcGFydHNbNF0sCgkJCXBvcnQ6IHBhcnRzWzVdLAoJCQl0eXBlOiBwYXJ0c1s3XSwKCQkJZ2VuZXJhdGlvbjogJzAnCgkJfTsKCQlmb3IgKHZhciBpID0gODsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCWlmIChwYXJ0c1tpXSA9PT0gJ3JhZGRyJykgewoJCQkJYy5yYWRkciA9IHBhcnRzW2kgKyAxXTsKCQkJfSBlbHNlIGlmIChwYXJ0c1tpXSA9PT0gJ3Jwb3J0JykgewoJCQkJYy5ycG9ydCA9IHBhcnRzW2kgKyAxXTsKCQkJfSBlbHNlIGlmIChwYXJ0c1tpXSA9PT0gJ2dlbmVyYXRpb24nKSB7CgkJCQljLmdlbmVyYXRpb24gPSBwYXJ0c1tpICsgMV07CgkJCX0gZWxzZSBpZiAocGFydHNbaV0gPT09ICd0Y3B0eXBlJykgewoJCQkJYy50Y3B0eXBlID0gcGFydHNbaSArIDFdOwoJCQl9IGVsc2UgaWYgKHBhcnRzW2ldID09PSAnbmV0d29yay1pZCcpIHsKCQkJCWNbJ25ldHdvcmstaWQnXSA9IHBhcnRzW2kgKyAxXTsKCQkJfSBlbHNlIGlmIChwYXJ0c1tpXSA9PT0gJ25ldHdvcmstY29zdCcpIHsKCQkJCWNbJ25ldHdvcmstY29zdCddID0gcGFydHNbaSArIDFdOwoJCQl9CgkJfQoJCXNkcC5tZWRpYS5maWx0ZXIoZnVuY3Rpb24gKG0pIHsKCQkJcmV0dXJuIG0udHlwZSA9PT0gY2FuZGlkYXRlLnNkcE1pZDsKCQl9KVswXS5jYW5kaWRhdGVzLnB1c2goYyk7Cgl9KTsKCglyZXR1cm4gX3NkcFRyYW5zZm9ybTIuZGVmYXVsdC53cml0ZShzZHApOwp9Cgp9LHsic2RwLXRyYW5zZm9ybSI6Mn1dLDQ4OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuCi8vCi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhCi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUKLy8gIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZwovLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQKLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlCi8vIGZvbGxvd2luZyBjb25kaXRpb25zOgovLwovLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZAovLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KLy8KLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MKLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgovLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOCi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLAovLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IKLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRQovLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgoKZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkgewogIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTsKICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkOwp9Cm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyOwoKLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54CkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7CkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDsKCi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZQovLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLgpFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwOwoKLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzCi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHsKICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKQogICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTsKICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuOwogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkgewogIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7CgogIGlmICghdGhpcy5fZXZlbnRzKQogICAgdGhpcy5fZXZlbnRzID0ge307CgogIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy4KICBpZiAodHlwZSA9PT0gJ2Vycm9yJykgewogICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHwKICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHsKICAgICAgZXIgPSBhcmd1bWVudHNbMV07CiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlcgogICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCAiZXJyb3IiIGV2ZW50LiAoJyArIGVyICsgJyknKTsKICAgICAgICBlcnIuY29udGV4dCA9IGVyOwogICAgICAgIHRocm93IGVycjsKICAgICAgfQogICAgfQogIH0KCiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKQogICAgcmV0dXJuIGZhbHNlOwoKICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkgewogICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgIC8vIGZhc3QgY2FzZXMKICAgICAgY2FzZSAxOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAyOgogICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDM6CiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTsKICAgICAgICBicmVhazsKICAgICAgLy8gc2xvd2VyCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTsKICAgIH0KICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7CiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTsKICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7CiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspCiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTsKICB9CgogIHJldHVybiB0cnVlOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7CiAgdmFyIG07CgogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHRoaXMuX2V2ZW50cyA9IHt9OwoKICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSAibmV3TGlzdGVuZXIiISBCZWZvcmUKICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCAibmV3TGlzdGVuZXIiLgogIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpCiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwKICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/CiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7CgogIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKQogICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuCiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjsKICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKQogICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLgogICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpOwogIGVsc2UKICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LgogICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdOwoKICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVhawogIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7CiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHsKICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVyczsKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVyczsKICAgIH0KCiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkgewogICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTsKICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArCiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArCiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7CiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTAKICAgICAgICBjb25zb2xlLnRyYWNlKCk7CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikgewogIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpCiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpOwoKICB2YXIgZmlyZWQgPSBmYWxzZTsKCiAgZnVuY3Rpb24gZygpIHsKICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7CgogICAgaWYgKCFmaXJlZCkgewogICAgICBmaXJlZCA9IHRydWU7CiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CiAgfQoKICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7CiAgdGhpcy5vbih0eXBlLCBnKTsKCiAgcmV0dXJuIHRoaXM7Cn07CgovLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZApFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHsKICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTsKCiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSkKICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXR1cm4gdGhpczsKCiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKICBsZW5ndGggPSBsaXN0Lmxlbmd0aDsKICBwb3NpdGlvbiA9IC0xOwoKICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwKICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7CiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdOwogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKCiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkgewogICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykgewogICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHwKICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkgewogICAgICAgIHBvc2l0aW9uID0gaTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3NpdGlvbiA8IDApCiAgICAgIHJldHVybiB0aGlzOwoKICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkgewogICAgICBsaXN0Lmxlbmd0aCA9IDA7CiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07CiAgICB9IGVsc2UgewogICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7CiAgICB9CgogICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikKICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTsKICB9CgogIHJldHVybiB0aGlzOwp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7CiAgdmFyIGtleSwgbGlzdGVuZXJzOwoKICBpZiAoIXRoaXMuX2V2ZW50cykKICAgIHJldHVybiB0aGlzOwoKICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0CiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKQogICAgICB0aGlzLl9ldmVudHMgPSB7fTsKICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSkKICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzCiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsKICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykgewogICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTsKICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTsKICAgIH0KICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpOwogICAgdGhpcy5fZXZlbnRzID0ge307CiAgICByZXR1cm4gdGhpczsKICB9CgogIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkgewogICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpOwogIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7CiAgICAvLyBMSUZPIG9yZGVyCiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aCkKICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTsKICB9CiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTsKCiAgcmV0dXJuIHRoaXM7Cn07CgpFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHsKICB2YXIgcmV0OwogIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pCiAgICByZXQgPSBbXTsKICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpCiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTsKICBlbHNlCiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTsKICByZXR1cm4gcmV0Owp9OwoKRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkgewogIGlmICh0aGlzLl9ldmVudHMpIHsKICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdOwoKICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKQogICAgICByZXR1cm4gMTsKICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpCiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDsKICB9CiAgcmV0dXJuIDA7Cn07CgpFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHsKICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpOwp9OwoKZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJzsKfQoKZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7CiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInOwp9CgpmdW5jdGlvbiBpc09iamVjdChhcmcpIHsKICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsOwp9CgpmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHsKICByZXR1cm4gYXJnID09PSB2b2lkIDA7Cn0KCn0se31dfSx7fSxbNDRdKSg0NCkKfSk7",
      "sourceCodeClassname": "IMSIWProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "sourcePackageURL": "/sourcePackage",
    "cguid": "4-c28037a6-8d59-ddbd-c208-d45c1334b92c5",
    "version": 1.7000000000000004,
    "description": "Description of IMSIWProtoStub",
    "language": "Javascript",
    "type": "ProtoStubs",
    "objectName": "sip.rethink-project.eu",
    "configuration": {
      "credential_server": "https://ims.rethink-project.eu/credential",
      "domain": "localhost"
    },
    "messageSchemas": "",
    "dataObjects": [
      "hyperty-catalogue://catalogue.localhost/.well-known/dataschema/Connection"
    ],
    "signature": "",
    "accessControlPolicy": "somePolicy",
    "constraints": {
      "browser": true
    },
    "interworking": true
  }
}