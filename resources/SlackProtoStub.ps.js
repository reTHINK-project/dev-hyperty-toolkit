(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("activate", [], factory);
	else if(typeof exports === 'object')
		exports["activate"] = factory();
	else
		root["activate"] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(1)\n\n/**\n * reads api.json and generates a matching javascript object\n * the leaf nodes bind the method name to the passed in exec function\n */\nmodule.exports = function _bind(ns, exec) {\n\n  // walks the generated api.json keys dynamically constructing the client\n  Object.keys(api).forEach(key=> {\n\n    // each key is namespaced so we break up into an array to work with \n    // example: api.test --> ['api', 'test']\n    var parts = key.split('.')\n\n    // then we get the root part of the namespace\n    // example: 'api'\n    var root = parts.shift() \n  \n    // initialize the root namespace object if it wasn't already\n    var init = typeof ns[root] === 'undefined'\n    if (init) {\n      ns[root] = {} \n    }\n\n    // walks the remaining namespace parts assigning the _exec function at the end\n    ;(function _iterator(o) {\n      var bit = parts.shift()\n      var last = parts.length === 0\n      if (last) {\n        o[bit] = exec.bind({}, key)\n      }\n      else {\n        var init = typeof o[bit] === 'undefined'\n        if (init) {\n          o[bit] = {}\n        }\n        // keep iterating\n        _iterator(o[bit])\n      }\n    })(ns[root])\n  })\n\n  return ns\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svc3JjL19iaW5kLmpzPzM5MjMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsVUFBVSxtQkFBTyxDQUFDLENBQVk7O0FBRTlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0EiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcGkgPSByZXF1aXJlKCcuL2FwaS5qc29uJylcblxuLyoqXG4gKiByZWFkcyBhcGkuanNvbiBhbmQgZ2VuZXJhdGVzIGEgbWF0Y2hpbmcgamF2YXNjcmlwdCBvYmplY3RcbiAqIHRoZSBsZWFmIG5vZGVzIGJpbmQgdGhlIG1ldGhvZCBuYW1lIHRvIHRoZSBwYXNzZWQgaW4gZXhlYyBmdW5jdGlvblxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIF9iaW5kKG5zLCBleGVjKSB7XG5cbiAgLy8gd2Fsa3MgdGhlIGdlbmVyYXRlZCBhcGkuanNvbiBrZXlzIGR5bmFtaWNhbGx5IGNvbnN0cnVjdGluZyB0aGUgY2xpZW50XG4gIE9iamVjdC5rZXlzKGFwaSkuZm9yRWFjaChrZXk9PiB7XG5cbiAgICAvLyBlYWNoIGtleSBpcyBuYW1lc3BhY2VkIHNvIHdlIGJyZWFrIHVwIGludG8gYW4gYXJyYXkgdG8gd29yayB3aXRoIFxuICAgIC8vIGV4YW1wbGU6IGFwaS50ZXN0IC0tPiBbJ2FwaScsICd0ZXN0J11cbiAgICB2YXIgcGFydHMgPSBrZXkuc3BsaXQoJy4nKVxuXG4gICAgLy8gdGhlbiB3ZSBnZXQgdGhlIHJvb3QgcGFydCBvZiB0aGUgbmFtZXNwYWNlXG4gICAgLy8gZXhhbXBsZTogJ2FwaSdcbiAgICB2YXIgcm9vdCA9IHBhcnRzLnNoaWZ0KCkgXG4gIFxuICAgIC8vIGluaXRpYWxpemUgdGhlIHJvb3QgbmFtZXNwYWNlIG9iamVjdCBpZiBpdCB3YXNuJ3QgYWxyZWFkeVxuICAgIHZhciBpbml0ID0gdHlwZW9mIG5zW3Jvb3RdID09PSAndW5kZWZpbmVkJ1xuICAgIGlmIChpbml0KSB7XG4gICAgICBuc1tyb290XSA9IHt9IFxuICAgIH1cblxuICAgIC8vIHdhbGtzIHRoZSByZW1haW5pbmcgbmFtZXNwYWNlIHBhcnRzIGFzc2lnbmluZyB0aGUgX2V4ZWMgZnVuY3Rpb24gYXQgdGhlIGVuZFxuICAgIDsoZnVuY3Rpb24gX2l0ZXJhdG9yKG8pIHtcbiAgICAgIHZhciBiaXQgPSBwYXJ0cy5zaGlmdCgpXG4gICAgICB2YXIgbGFzdCA9IHBhcnRzLmxlbmd0aCA9PT0gMFxuICAgICAgaWYgKGxhc3QpIHtcbiAgICAgICAgb1tiaXRdID0gZXhlYy5iaW5kKHt9LCBrZXkpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdmFyIGluaXQgPSB0eXBlb2Ygb1tiaXRdID09PSAndW5kZWZpbmVkJ1xuICAgICAgICBpZiAoaW5pdCkge1xuICAgICAgICAgIG9bYml0XSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgLy8ga2VlcCBpdGVyYXRpbmdcbiAgICAgICAgX2l0ZXJhdG9yKG9bYml0XSlcbiAgICAgIH1cbiAgICB9KShuc1tyb290XSlcbiAgfSlcblxuICByZXR1cm4gbnNcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4uL2Rldi1wcm90b3N0dWJzL3NyYy9wcm90b3N0dWIvc2xhY2svbm9kZV9tb2R1bGVzL3NsYWNrL3NyYy9fYmluZC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

eval("module.exports = {\"api.test\":[],\"apps.permissions.info\":[\"token\"],\"apps.permissions.request\":[\"token\",\"scopes\",\"trigger_id\"],\"auth.revoke\":[\"token\"],\"auth.test\":[\"token\"],\"bots.info\":[\"token\"],\"channels.archive\":[\"token\",\"channel\"],\"channels.create\":[\"token\",\"name\"],\"channels.history\":[\"token\",\"channel\"],\"channels.info\":[\"token\",\"channel\"],\"channels.invite\":[\"token\",\"channel\",\"user\"],\"channels.join\":[\"token\",\"name\"],\"channels.kick\":[\"token\",\"channel\",\"user\"],\"channels.leave\":[\"token\",\"channel\"],\"channels.list\":[\"token\"],\"channels.mark\":[\"token\",\"channel\",\"ts\"],\"channels.rename\":[\"token\",\"channel\",\"name\"],\"channels.replies\":[\"token\",\"channel\",\"thread_ts\"],\"channels.setPurpose\":[\"token\",\"channel\",\"purpose\"],\"channels.setTopic\":[\"token\",\"channel\",\"topic\"],\"channels.unarchive\":[\"token\",\"channel\"],\"chat.delete\":[\"token\",\"channel\",\"ts\"],\"chat.meMessage\":[\"token\",\"channel\",\"text\"],\"chat.postEphemeral\":[\"token\",\"channel\",\"text\",\"user\"],\"chat.postMessage\":[\"token\",\"channel\",\"text\"],\"chat.unfurl\":[\"token\",\"channel\",\"ts\",\"unfurls\"],\"chat.update\":[\"token\",\"channel\",\"text\",\"ts\"],\"conversations.archive\":[\"token\",\"channel\"],\"conversations.close\":[\"token\",\"channel\"],\"conversations.create\":[\"token\",\"name\"],\"conversations.history\":[\"token\",\"channel\"],\"conversations.info\":[\"token\",\"channel\"],\"conversations.invite\":[\"token\",\"channel\",\"users\"],\"conversations.join\":[\"token\",\"channel\"],\"conversations.kick\":[\"token\",\"channel\",\"user\"],\"conversations.leave\":[\"token\",\"channel\"],\"conversations.list\":[\"token\"],\"conversations.members\":[\"token\",\"channel\"],\"conversations.open\":[\"token\"],\"conversations.rename\":[\"token\",\"channel\",\"name\"],\"conversations.replies\":[\"token\",\"channel\",\"ts\"],\"conversations.setPurpose\":[\"token\",\"channel\",\"purpose\"],\"conversations.setTopic\":[\"token\",\"channel\",\"topic\"],\"conversations.unarchive\":[\"token\",\"channel\"],\"dnd.endDnd\":[\"token\"],\"dnd.endSnooze\":[\"token\"],\"dnd.info\":[\"token\"],\"dnd.setSnooze\":[\"token\",\"num_minutes\"],\"dnd.teamInfo\":[\"token\"],\"emoji.list\":[\"token\"],\"files.comments.add\":[\"token\",\"comment\",\"file\"],\"files.comments.delete\":[\"token\",\"file\",\"id\"],\"files.comments.edit\":[\"token\",\"comment\",\"file\",\"id\"],\"files.delete\":[\"token\",\"file\"],\"files.info\":[\"token\",\"file\"],\"files.list\":[\"token\"],\"files.revokePublicURL\":[\"token\",\"file\"],\"files.sharedPublicURL\":[\"token\",\"file\"],\"files.upload\":[\"token\"],\"groups.archive\":[\"token\",\"channel\"],\"groups.create\":[\"token\",\"name\"],\"groups.createChild\":[\"token\",\"channel\"],\"groups.history\":[\"token\",\"channel\"],\"groups.info\":[\"token\",\"channel\"],\"groups.invite\":[\"token\",\"channel\",\"user\"],\"groups.kick\":[\"token\",\"channel\",\"user\"],\"groups.leave\":[\"token\",\"channel\"],\"groups.list\":[\"token\"],\"groups.mark\":[\"token\",\"channel\",\"ts\"],\"groups.open\":[\"token\",\"channel\"],\"groups.rename\":[\"token\",\"channel\",\"name\"],\"groups.replies\":[\"token\",\"channel\",\"thread_ts\"],\"groups.setPurpose\":[\"token\",\"channel\",\"purpose\"],\"groups.setTopic\":[\"token\",\"channel\",\"topic\"],\"groups.unarchive\":[\"token\",\"channel\"],\"im.close\":[\"token\",\"channel\"],\"im.history\":[\"token\",\"channel\"],\"im.list\":[\"token\"],\"im.mark\":[\"token\",\"channel\",\"ts\"],\"im.open\":[\"token\",\"user\"],\"im.replies\":[\"token\",\"channel\",\"thread_ts\"],\"mpim.close\":[\"token\",\"channel\"],\"mpim.history\":[\"token\",\"channel\"],\"mpim.list\":[\"token\"],\"mpim.mark\":[\"token\",\"channel\",\"ts\"],\"mpim.open\":[\"token\",\"users\"],\"mpim.replies\":[\"token\",\"channel\",\"thread_ts\"],\"oauth.access\":[\"client_id\",\"client_secret\",\"code\"],\"oauth.token\":[\"client_id\",\"client_secret\",\"code\"],\"pins.add\":[\"token\",\"channel\"],\"pins.list\":[\"token\",\"channel\"],\"pins.remove\":[\"token\",\"channel\"],\"reactions.add\":[\"token\",\"name\"],\"reactions.get\":[\"token\"],\"reactions.list\":[\"token\"],\"reactions.remove\":[\"token\",\"name\"],\"reminders.add\":[\"token\",\"text\",\"time\"],\"reminders.complete\":[\"token\",\"reminder\"],\"reminders.delete\":[\"token\",\"reminder\"],\"reminders.info\":[\"token\",\"reminder\"],\"reminders.list\":[\"token\"],\"rtm.connect\":[\"token\"],\"rtm.start\":[\"token\"],\"search.all\":[\"token\",\"query\"],\"search.files\":[\"token\",\"query\"],\"search.messages\":[\"token\",\"query\"],\"stars.add\":[\"token\"],\"stars.list\":[\"token\"],\"stars.remove\":[\"token\"],\"team.accessLogs\":[\"token\"],\"team.billableInfo\":[\"token\"],\"team.info\":[\"token\"],\"team.integrationLogs\":[\"token\"],\"team.profile.get\":[\"token\"],\"usergroups.create\":[\"token\",\"name\"],\"usergroups.disable\":[\"token\",\"usergroup\"],\"usergroups.enable\":[\"token\",\"usergroup\"],\"usergroups.list\":[\"token\"],\"usergroups.update\":[\"token\",\"usergroup\"],\"usergroups.users.list\":[\"token\",\"usergroup\"],\"usergroups.users.update\":[\"token\",\"usergroup\",\"users\"],\"users.deletePhoto\":[\"token\"],\"users.getPresence\":[\"token\",\"user\"],\"users.identity\":[\"token\"],\"users.info\":[\"token\",\"user\"],\"users.list\":[\"token\"],\"users.setActive\":[\"token\"],\"users.setPhoto\":[\"token\",\"image\"],\"users.setPresence\":[\"token\",\"presence\"],\"users.profile.get\":[\"token\"],\"users.profile.set\":[\"token\"]}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svc3JjL2FwaS5qc29uP2JkY2QiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsa0JBQWtCIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHtcImFwaS50ZXN0XCI6W10sXCJhcHBzLnBlcm1pc3Npb25zLmluZm9cIjpbXCJ0b2tlblwiXSxcImFwcHMucGVybWlzc2lvbnMucmVxdWVzdFwiOltcInRva2VuXCIsXCJzY29wZXNcIixcInRyaWdnZXJfaWRcIl0sXCJhdXRoLnJldm9rZVwiOltcInRva2VuXCJdLFwiYXV0aC50ZXN0XCI6W1widG9rZW5cIl0sXCJib3RzLmluZm9cIjpbXCJ0b2tlblwiXSxcImNoYW5uZWxzLmFyY2hpdmVcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcImNoYW5uZWxzLmNyZWF0ZVwiOltcInRva2VuXCIsXCJuYW1lXCJdLFwiY2hhbm5lbHMuaGlzdG9yeVwiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwiY2hhbm5lbHMuaW5mb1wiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwiY2hhbm5lbHMuaW52aXRlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInVzZXJcIl0sXCJjaGFubmVscy5qb2luXCI6W1widG9rZW5cIixcIm5hbWVcIl0sXCJjaGFubmVscy5raWNrXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInVzZXJcIl0sXCJjaGFubmVscy5sZWF2ZVwiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwiY2hhbm5lbHMubGlzdFwiOltcInRva2VuXCJdLFwiY2hhbm5lbHMubWFya1wiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ0c1wiXSxcImNoYW5uZWxzLnJlbmFtZVwiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJuYW1lXCJdLFwiY2hhbm5lbHMucmVwbGllc1wiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ0aHJlYWRfdHNcIl0sXCJjaGFubmVscy5zZXRQdXJwb3NlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInB1cnBvc2VcIl0sXCJjaGFubmVscy5zZXRUb3BpY1wiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ0b3BpY1wiXSxcImNoYW5uZWxzLnVuYXJjaGl2ZVwiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwiY2hhdC5kZWxldGVcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwidHNcIl0sXCJjaGF0Lm1lTWVzc2FnZVwiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ0ZXh0XCJdLFwiY2hhdC5wb3N0RXBoZW1lcmFsXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInRleHRcIixcInVzZXJcIl0sXCJjaGF0LnBvc3RNZXNzYWdlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInRleHRcIl0sXCJjaGF0LnVuZnVybFwiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ0c1wiLFwidW5mdXJsc1wiXSxcImNoYXQudXBkYXRlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInRleHRcIixcInRzXCJdLFwiY29udmVyc2F0aW9ucy5hcmNoaXZlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJjb252ZXJzYXRpb25zLmNsb3NlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJjb252ZXJzYXRpb25zLmNyZWF0ZVwiOltcInRva2VuXCIsXCJuYW1lXCJdLFwiY29udmVyc2F0aW9ucy5oaXN0b3J5XCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJjb252ZXJzYXRpb25zLmluZm9cIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcImNvbnZlcnNhdGlvbnMuaW52aXRlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInVzZXJzXCJdLFwiY29udmVyc2F0aW9ucy5qb2luXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJjb252ZXJzYXRpb25zLmtpY2tcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwidXNlclwiXSxcImNvbnZlcnNhdGlvbnMubGVhdmVcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcImNvbnZlcnNhdGlvbnMubGlzdFwiOltcInRva2VuXCJdLFwiY29udmVyc2F0aW9ucy5tZW1iZXJzXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJjb252ZXJzYXRpb25zLm9wZW5cIjpbXCJ0b2tlblwiXSxcImNvbnZlcnNhdGlvbnMucmVuYW1lXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcIm5hbWVcIl0sXCJjb252ZXJzYXRpb25zLnJlcGxpZXNcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwidHNcIl0sXCJjb252ZXJzYXRpb25zLnNldFB1cnBvc2VcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwicHVycG9zZVwiXSxcImNvbnZlcnNhdGlvbnMuc2V0VG9waWNcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwidG9waWNcIl0sXCJjb252ZXJzYXRpb25zLnVuYXJjaGl2ZVwiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwiZG5kLmVuZERuZFwiOltcInRva2VuXCJdLFwiZG5kLmVuZFNub296ZVwiOltcInRva2VuXCJdLFwiZG5kLmluZm9cIjpbXCJ0b2tlblwiXSxcImRuZC5zZXRTbm9vemVcIjpbXCJ0b2tlblwiLFwibnVtX21pbnV0ZXNcIl0sXCJkbmQudGVhbUluZm9cIjpbXCJ0b2tlblwiXSxcImVtb2ppLmxpc3RcIjpbXCJ0b2tlblwiXSxcImZpbGVzLmNvbW1lbnRzLmFkZFwiOltcInRva2VuXCIsXCJjb21tZW50XCIsXCJmaWxlXCJdLFwiZmlsZXMuY29tbWVudHMuZGVsZXRlXCI6W1widG9rZW5cIixcImZpbGVcIixcImlkXCJdLFwiZmlsZXMuY29tbWVudHMuZWRpdFwiOltcInRva2VuXCIsXCJjb21tZW50XCIsXCJmaWxlXCIsXCJpZFwiXSxcImZpbGVzLmRlbGV0ZVwiOltcInRva2VuXCIsXCJmaWxlXCJdLFwiZmlsZXMuaW5mb1wiOltcInRva2VuXCIsXCJmaWxlXCJdLFwiZmlsZXMubGlzdFwiOltcInRva2VuXCJdLFwiZmlsZXMucmV2b2tlUHVibGljVVJMXCI6W1widG9rZW5cIixcImZpbGVcIl0sXCJmaWxlcy5zaGFyZWRQdWJsaWNVUkxcIjpbXCJ0b2tlblwiLFwiZmlsZVwiXSxcImZpbGVzLnVwbG9hZFwiOltcInRva2VuXCJdLFwiZ3JvdXBzLmFyY2hpdmVcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcImdyb3Vwcy5jcmVhdGVcIjpbXCJ0b2tlblwiLFwibmFtZVwiXSxcImdyb3Vwcy5jcmVhdGVDaGlsZFwiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwiZ3JvdXBzLmhpc3RvcnlcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcImdyb3Vwcy5pbmZvXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJncm91cHMuaW52aXRlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInVzZXJcIl0sXCJncm91cHMua2lja1wiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ1c2VyXCJdLFwiZ3JvdXBzLmxlYXZlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJncm91cHMubGlzdFwiOltcInRva2VuXCJdLFwiZ3JvdXBzLm1hcmtcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwidHNcIl0sXCJncm91cHMub3BlblwiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwiZ3JvdXBzLnJlbmFtZVwiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJuYW1lXCJdLFwiZ3JvdXBzLnJlcGxpZXNcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwidGhyZWFkX3RzXCJdLFwiZ3JvdXBzLnNldFB1cnBvc2VcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiLFwicHVycG9zZVwiXSxcImdyb3Vwcy5zZXRUb3BpY1wiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ0b3BpY1wiXSxcImdyb3Vwcy51bmFyY2hpdmVcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcImltLmNsb3NlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJpbS5oaXN0b3J5XCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJpbS5saXN0XCI6W1widG9rZW5cIl0sXCJpbS5tYXJrXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInRzXCJdLFwiaW0ub3BlblwiOltcInRva2VuXCIsXCJ1c2VyXCJdLFwiaW0ucmVwbGllc1wiOltcInRva2VuXCIsXCJjaGFubmVsXCIsXCJ0aHJlYWRfdHNcIl0sXCJtcGltLmNsb3NlXCI6W1widG9rZW5cIixcImNoYW5uZWxcIl0sXCJtcGltLmhpc3RvcnlcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcIm1waW0ubGlzdFwiOltcInRva2VuXCJdLFwibXBpbS5tYXJrXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInRzXCJdLFwibXBpbS5vcGVuXCI6W1widG9rZW5cIixcInVzZXJzXCJdLFwibXBpbS5yZXBsaWVzXCI6W1widG9rZW5cIixcImNoYW5uZWxcIixcInRocmVhZF90c1wiXSxcIm9hdXRoLmFjY2Vzc1wiOltcImNsaWVudF9pZFwiLFwiY2xpZW50X3NlY3JldFwiLFwiY29kZVwiXSxcIm9hdXRoLnRva2VuXCI6W1wiY2xpZW50X2lkXCIsXCJjbGllbnRfc2VjcmV0XCIsXCJjb2RlXCJdLFwicGlucy5hZGRcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcInBpbnMubGlzdFwiOltcInRva2VuXCIsXCJjaGFubmVsXCJdLFwicGlucy5yZW1vdmVcIjpbXCJ0b2tlblwiLFwiY2hhbm5lbFwiXSxcInJlYWN0aW9ucy5hZGRcIjpbXCJ0b2tlblwiLFwibmFtZVwiXSxcInJlYWN0aW9ucy5nZXRcIjpbXCJ0b2tlblwiXSxcInJlYWN0aW9ucy5saXN0XCI6W1widG9rZW5cIl0sXCJyZWFjdGlvbnMucmVtb3ZlXCI6W1widG9rZW5cIixcIm5hbWVcIl0sXCJyZW1pbmRlcnMuYWRkXCI6W1widG9rZW5cIixcInRleHRcIixcInRpbWVcIl0sXCJyZW1pbmRlcnMuY29tcGxldGVcIjpbXCJ0b2tlblwiLFwicmVtaW5kZXJcIl0sXCJyZW1pbmRlcnMuZGVsZXRlXCI6W1widG9rZW5cIixcInJlbWluZGVyXCJdLFwicmVtaW5kZXJzLmluZm9cIjpbXCJ0b2tlblwiLFwicmVtaW5kZXJcIl0sXCJyZW1pbmRlcnMubGlzdFwiOltcInRva2VuXCJdLFwicnRtLmNvbm5lY3RcIjpbXCJ0b2tlblwiXSxcInJ0bS5zdGFydFwiOltcInRva2VuXCJdLFwic2VhcmNoLmFsbFwiOltcInRva2VuXCIsXCJxdWVyeVwiXSxcInNlYXJjaC5maWxlc1wiOltcInRva2VuXCIsXCJxdWVyeVwiXSxcInNlYXJjaC5tZXNzYWdlc1wiOltcInRva2VuXCIsXCJxdWVyeVwiXSxcInN0YXJzLmFkZFwiOltcInRva2VuXCJdLFwic3RhcnMubGlzdFwiOltcInRva2VuXCJdLFwic3RhcnMucmVtb3ZlXCI6W1widG9rZW5cIl0sXCJ0ZWFtLmFjY2Vzc0xvZ3NcIjpbXCJ0b2tlblwiXSxcInRlYW0uYmlsbGFibGVJbmZvXCI6W1widG9rZW5cIl0sXCJ0ZWFtLmluZm9cIjpbXCJ0b2tlblwiXSxcInRlYW0uaW50ZWdyYXRpb25Mb2dzXCI6W1widG9rZW5cIl0sXCJ0ZWFtLnByb2ZpbGUuZ2V0XCI6W1widG9rZW5cIl0sXCJ1c2VyZ3JvdXBzLmNyZWF0ZVwiOltcInRva2VuXCIsXCJuYW1lXCJdLFwidXNlcmdyb3Vwcy5kaXNhYmxlXCI6W1widG9rZW5cIixcInVzZXJncm91cFwiXSxcInVzZXJncm91cHMuZW5hYmxlXCI6W1widG9rZW5cIixcInVzZXJncm91cFwiXSxcInVzZXJncm91cHMubGlzdFwiOltcInRva2VuXCJdLFwidXNlcmdyb3Vwcy51cGRhdGVcIjpbXCJ0b2tlblwiLFwidXNlcmdyb3VwXCJdLFwidXNlcmdyb3Vwcy51c2Vycy5saXN0XCI6W1widG9rZW5cIixcInVzZXJncm91cFwiXSxcInVzZXJncm91cHMudXNlcnMudXBkYXRlXCI6W1widG9rZW5cIixcInVzZXJncm91cFwiLFwidXNlcnNcIl0sXCJ1c2Vycy5kZWxldGVQaG90b1wiOltcInRva2VuXCJdLFwidXNlcnMuZ2V0UHJlc2VuY2VcIjpbXCJ0b2tlblwiLFwidXNlclwiXSxcInVzZXJzLmlkZW50aXR5XCI6W1widG9rZW5cIl0sXCJ1c2Vycy5pbmZvXCI6W1widG9rZW5cIixcInVzZXJcIl0sXCJ1c2Vycy5saXN0XCI6W1widG9rZW5cIl0sXCJ1c2Vycy5zZXRBY3RpdmVcIjpbXCJ0b2tlblwiXSxcInVzZXJzLnNldFBob3RvXCI6W1widG9rZW5cIixcImltYWdlXCJdLFwidXNlcnMuc2V0UHJlc2VuY2VcIjpbXCJ0b2tlblwiLFwicHJlc2VuY2VcIl0sXCJ1c2Vycy5wcm9maWxlLmdldFwiOltcInRva2VuXCJdLFwidXNlcnMucHJvZmlsZS5zZXRcIjpbXCJ0b2tlblwiXX1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9kZXYtcHJvdG9zdHVicy9zcmMvcHJvdG9zdHViL3NsYWNrL25vZGVfbW9kdWxlcy9zbGFjay9zcmMvYXBpLmpzb25cbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

eval("let validate = __webpack_require__(5)\nlet encode = encodeURIComponent\nlet serialize = o=> Object.keys(o).map(k=> encode(k) + '=' + encode(o[k])).join('&')\n\n/**\n * returns a promise if callback isn't defined; _exec is the actual impl\n */\nmodule.exports = function exec(url, params, callback) {\n  if (!callback) {\n    return new Promise(function(resolve, reject) {\n      _exec(url, params, function __exec(err, res) {\n        if (err) {\n          reject(err)\n        }\n        else { \n          resolve(res)\n        }\n      })\n    })\n  }\n  else {\n    _exec(url, params, callback)\n  }\n}\n\nasync function _exec(url, params, callback) {\n  try {\n    // validates the params against api.json\n    var err = validate(url, params)\n    if (err) throw err\n\n    // stringify any objects under keys since form \n    // is posted as application/x-www-form-urlencoded\n    Object.keys(params).forEach(function (key) {\n      if (typeof params[key] === 'object') {\n        params[key] = JSON.stringify(params[key])\n      }\n    })\n\n    var opts = {\n      method: 'POST', \n      headers: new Headers({\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }),\n      body: serialize(params)\n    }\n\n    var res = await fetch(`https://slack.com/api/${url}`, opts)\n    var json = await res.json()\n\n    if (json.error) {\n      callback(Error(json.error))\n    }\n    else {\n      callback(null, json)\n    }\n  }\n  catch(e) {\n    callback(e)\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svc3JjL19leGVjLWJyb3dzZXIuanM/ZDQzMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxlQUFlLG1CQUFPLENBQUMsQ0FBYTtBQUNwQztBQUNBOztBQUVBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQSxtREFBbUQsSUFBSTtBQUN2RDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgdmFsaWRhdGUgPSByZXF1aXJlKCcuL192YWxpZGF0ZScpXG5sZXQgZW5jb2RlID0gZW5jb2RlVVJJQ29tcG9uZW50XG5sZXQgc2VyaWFsaXplID0gbz0+IE9iamVjdC5rZXlzKG8pLm1hcChrPT4gZW5jb2RlKGspICsgJz0nICsgZW5jb2RlKG9ba10pKS5qb2luKCcmJylcblxuLyoqXG4gKiByZXR1cm5zIGEgcHJvbWlzZSBpZiBjYWxsYmFjayBpc24ndCBkZWZpbmVkOyBfZXhlYyBpcyB0aGUgYWN0dWFsIGltcGxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBleGVjKHVybCwgcGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgX2V4ZWModXJsLCBwYXJhbXMsIGZ1bmN0aW9uIF9fZXhlYyhlcnIsIHJlcykge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KGVycilcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgXG4gICAgICAgICAgcmVzb2x2ZShyZXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuICBlbHNlIHtcbiAgICBfZXhlYyh1cmwsIHBhcmFtcywgY2FsbGJhY2spXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX2V4ZWModXJsLCBwYXJhbXMsIGNhbGxiYWNrKSB7XG4gIHRyeSB7XG4gICAgLy8gdmFsaWRhdGVzIHRoZSBwYXJhbXMgYWdhaW5zdCBhcGkuanNvblxuICAgIHZhciBlcnIgPSB2YWxpZGF0ZSh1cmwsIHBhcmFtcylcbiAgICBpZiAoZXJyKSB0aHJvdyBlcnJcblxuICAgIC8vIHN0cmluZ2lmeSBhbnkgb2JqZWN0cyB1bmRlciBrZXlzIHNpbmNlIGZvcm0gXG4gICAgLy8gaXMgcG9zdGVkIGFzIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFxuICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAodHlwZW9mIHBhcmFtc1trZXldID09PSAnb2JqZWN0Jykge1xuICAgICAgICBwYXJhbXNba2V5XSA9IEpTT04uc3RyaW5naWZ5KHBhcmFtc1trZXldKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICB2YXIgb3B0cyA9IHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLCBcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG4gICAgICB9KSxcbiAgICAgIGJvZHk6IHNlcmlhbGl6ZShwYXJhbXMpXG4gICAgfVxuXG4gICAgdmFyIHJlcyA9IGF3YWl0IGZldGNoKGBodHRwczovL3NsYWNrLmNvbS9hcGkvJHt1cmx9YCwgb3B0cylcbiAgICB2YXIganNvbiA9IGF3YWl0IHJlcy5qc29uKClcblxuICAgIGlmIChqc29uLmVycm9yKSB7XG4gICAgICBjYWxsYmFjayhFcnJvcihqc29uLmVycm9yKSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjYWxsYmFjayhudWxsLCBqc29uKVxuICAgIH1cbiAgfVxuICBjYXRjaChlKSB7XG4gICAgY2FsbGJhY2soZSlcbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svc3JjL19leGVjLWJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.default = activate;\n\nvar _slack = __webpack_require__(4);\n\nvar _slack2 = _interopRequireDefault(_slack);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//import { Syncher, NotificationHandler } from 'service-framework/dist/Syncher';\n//import IdentityManager from 'service-framework/dist/IdentityManager';\n//import {ChatManager} from 'runtime-core/dist/ChatManager';\n//import MessageBodyIdentity from 'service-framework/dist/IdentityFactory';\n//import {ContextReporter} from 'service-framework/dist/ContextManager';\n\nvar SlackProtoStub = function () {\n  function SlackProtoStub(runtimeProtoStubURL, bus, config, factory) {\n    _classCallCheck(this, SlackProtoStub);\n\n    if (!runtimeProtoStubURL) throw new Error('The runtimeProtoStubURL is a needed parameter');\n    if (!bus) throw new Error('The bus is a needed parameter');\n    if (!config) throw new Error('The config is a needed parameter');\n\n    console.log('[SlackProtostub] Constructor Loaded');\n\n    var _this = this;\n    this._ws = null;\n    this._toSubscribePresence = [];\n    this._addedUsersInfo = [];\n    this._alreadyCreated = false;\n    this._slack = _slack2.default;\n    this._usersUpdated = false;\n    this._subscribedList = [];\n    this._messageHistoryControl = {};\n    this._usersList = [];\n    //this._groupsList = [];\n    this._channelsList = [];\n    //this._imsList = [];\n    //this._observer;\n    this._id = 0;\n    //this._continuousOpen = true;\n    this._token = '';\n    //this._chatController;\n    //this._chatControllersExtra = {};\n    //this._schemaURL;\n    this._dataObjectReporterURL;\n    this._factory = factory;\n    this._contextReportersInfo = {};\n    this._syncher = factory.createSyncher(runtimeProtoStubURL, bus, config);\n    this._chatManager = factory.createChatManager(runtimeProtoStubURL, bus, config, this._syncher);\n    this._contextReporter = factory.createContextReporter(runtimeProtoStubURL, bus, config, this._syncher);\n\n    this._myUrl = runtimeProtoStubURL;\n    this._bus = bus;\n    this._config = config;\n\n    this._runtimeSessionURL = config.runtimeURL;\n    this._reOpen = false;\n    this._chatManager.onInvitation(function (event) {\n      _this._onSlackInvitation(event);\n    });\n\n    this._notificationHandler = factory.createNotificationHandler(bus);\n\n    this._notificationHandler.onNotification('comm', function (event) {\n      _this._chatManager.processNotification(event);\n    });\n\n    bus.addListener('*', function (msg) {\n      //ignore msg sent by himself\n      if (msg.from !== runtimeProtoStubURL) {\n        console.log('[SlackProtostub] new msg ', msg);\n        switch (msg.type) {\n          case 'create':\n            _this._notificationHandler.onCreate(msg);break;\n          case 'delete':\n            _this._notificationHandler.onDelete(msg);break;\n        }\n      }\n    });\n\n    _this._sendStatus('created');\n  }\n\n  _createClass(SlackProtoStub, [{\n    key: '_filter',\n    value: function _filter(msg) {\n      if (msg.via === this._myUrl) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n\n    /*****************************************************************************************************\n    * It Open a new Session using received token connect to a webSocket Url,\n    *  where handle all received messages on this socket\n    * @param {string} token - message with a new user added\n    *******************************************************************************************************/\n\n  }, {\n    key: '_open',\n    value: function _open(token, callback) {\n      var _this = this;\n\n      if (!_this._session) {\n        console.log('[SlackProtostub] creating Session for token:', token);\n        _this._sendStatus('in-progress');\n\n        _this._session = this._slack.rtm.connect({ token: token, batch_presence_aware: 1, presence_sub: true });\n        console.log('[SlackProtostub] session', _this._session);\n        _this._session.createdTime = new Date().getTime() / 1000;\n\n        _this._session.then(function (result) {\n          console.log('[SlackProtostub] Session result', result);\n          if (result.ok) {\n            _this._ws = new WebSocket(result.url);\n            console.log('[SlackProtostub] websocket', _this._ws);\n            console.log('[SlackProtostub] websocket url ', _this._ws.url);\n\n            _this._ws.onmessage = function (event) {\n              var msg = JSON.parse(event.data);\n              console.log('[SlackProtostub] new msg on webSocket', msg);\n\n              if (msg.type == 'message') {\n                _this._handleNewMessage(msg);\n              } else if (msg.type == 'presence_change') {\n                _this._handlePresenceChange(msg);\n              } else if (msg.type == 'member_joined_channel') {\n                _this._handleNewUser(msg);\n              }\n            };\n            _this._ws.onerror = function (error) {\n              console.log('[SlackProtostub] websocker Error', error);\n            };\n          }\n        });\n        _this._sendStatus('live');\n      } else {\n\n        console.log('[SlackProtostub] session already exist');\n      }\n      setTimeout(function () {\n        callback();\n      });\n    }\n\n    /*****************************************************************************************************\n    * It Resumes all reporters including contextreporters\n    * @param {string} reporterURL - message with a new user added\n    * @return {Promise<Object>} Returns a promise with a reporter DataObject\n    *******************************************************************************************************/\n\n  }, {\n    key: '_resumeReporter',\n    value: function _resumeReporter(reporterURL) {\n      var _this = this;\n      return new Promise(function (resolve, reject) {\n        console.log('[SlackProtostub] resuming reporter of ', reporterURL);\n        _this._syncher.resumeReporters({ store: true, reporter: reporterURL }).then(function (reporters) {\n          var dataObjectReporter = void 0;\n          var reportersList = Object.keys(reporters);\n\n          console.log('[SlackProtostub] ', reporters, reportersList);\n          var i = 0;\n          reportersList.forEach(function (key) {\n            if (reporters[key]._name === reporterURL && key.startsWith('context://')) {\n              console.log('[SlackProtostub] reporter to return', reporters[key]);\n              return resolve(reporters[key]);\n            }\n          });\n          return resolve(false);\n        });\n      });\n    }\n\n    /*****************************************************************************************************\n    * It is called when a event ocurred related with a invitation of a slack User\n    * @param {Object} event - Object event\n    *******************************************************************************************************/\n\n  }, {\n    key: '_onSlackInvitation',\n    value: function _onSlackInvitation(event) {\n      var _this = this;\n\n      if (event.identity.hasOwnProperty('accessToken') && event.identity.accessToken) {\n\n        this._token = event.identity.accessToken;\n\n        _this._open(this._token, function () {\n          if (_this._filter(event)) {\n\n            console.log('[SlackProtostub] After Filter', event);\n\n            var schemaUrl = event.schema;\n            if (event.value.name) {\n\n              var schemaSplitted = schemaUrl.split('/');\n\n              if (schemaSplitted[schemaSplitted.length - 1] === 'Communication') {\n\n                _this._getSlackInformation(event.to, event.identity.input.user_id).then(function (infoReturned) {\n\n                  var userInfo = infoReturned.ownInfo;\n                  var toInvInfo = infoReturned.invInfo;\n                  console.log('Slack User information: ', infoReturned, event);\n\n                  // username, userURL, avatar, cn, locale, idp, assertion\n                  var identity = _this._factory.createMessageBodyIdentity(userInfo.name, 'slack://slack.com/' + userInfo.name + '@slack.com', userInfo.profile.image_192, userInfo.name, '', 'slack.com', undefined, userInfo.profile);\n\n                  var identityToInv = _this._factory.createMessageBodyIdentity(toInvInfo.name, 'slack://slack.com/' + toInvInfo.name + '@slack.com', toInvInfo.profile.image_192, toInvInfo.name, '', 'slack.com', undefined, toInvInfo.profile);\n\n                  event.ack(200);\n\n                  console.log('[SlackProtostub] subscribing object', event.url, identity);\n\n                  var neededInfoInvited = { id: toInvInfo.id, name: toInvInfo.name, userURL: identityToInv.userProfile.userURL, identity: identityToInv };\n                  var neededOwnInfo = { id: event.identity.input.user_id, userURL: identity.userProfile.userURL };\n\n                  if (!_this._alreadyCreated) {\n                    console.log('[SlackProtostub] Not Already created', event);\n                    _this._alreadyCreated = true;\n                    //_this._schemaURL = event.schema;\n                    _this._dataObjectReporterURL = event.url;\n\n                    var userToAdd = { user: 'slack://' + userInfo.name + '@slack.com', domain: 'slack.com', id: event.identity.input.user_id, userURL: 'slack://slack.com/' + userInfo.name + '@slack.com', identity: identity };\n                    _this._addedUsersInfo.push(userToAdd);\n\n                    _this._createNewContextReporter(identity.userProfile.userURL).then(function (creation) {\n                      //debugger;\n                      if (creation == true) {\n                        _this._chatManager.join(event.url, false, identity).then(function (chatController) {\n                          _this._prepareChat(chatController);\n                          var msgQuery = { \"type\": \"presence_sub\",\n                            \"ids\": _this._toSubscribePresence };\n                          console.log('[SlackProtostub] websocket sentmessage', _this._ws.readyState, msgQuery);\n                          _this._ws.send(JSON.stringify(msgQuery));\n                          //_this._createNewContextReporter(identity.userProfile.userURL);\n\n                          var subscription = {\n                            urlDataObj: event.url,\n                            schema: event.schema,\n                            subscribed: true,\n                            identity: identity,\n                            chat: chatController\n                          };\n\n                          _this._subscribedList.push(subscription);\n                          console.log('[SlackProtostub] subscribed list', _this._subscribedList);\n                          if (event.identity.input.user_id) {\n                            _this._id = event.identity.input.user_id;\n                          }\n\n                          //_this._channelStatusInfo(event, toInvInfo.id, event.url, toInvInfo.name, identityToInv.userProfile.userURL, event.url, identityToInv, identity.userProfile.userURL, event.identity.input.user_id);\n                          _this._channelStatusInfo(event, neededInfoInvited, neededOwnInfo);\n                        });\n                      }\n                    });\n                  } else {\n                    console.log('[SlackProtostub] Already created', event);\n                    console.log(_this._subscribedList.length);\n                    if (_this._subscribedList.length != 0) {\n                      _this._channelStatusInfo(event, neededInfoInvited, neededOwnInfo);\n                    } else {\n                      var testURL = event.to.split('//')[0] + '//slack.com/' + event.to.split('//')[1];\n                      _this._createNewContextReporter(testURL);\n                    }\n                  }\n                });\n              } else event.error('Invalid Scheme: ' + schemaSplitted[schemaSplitted.length - 1]);\n            } else event.error('Chat Name Missing');\n          }\n        });\n      } else event.error('Access Token Missing');\n    }\n\n    /*****************************************************************************************************\n    * It creates a new contextReporter with userURL\n    * @param {string} userURL - userURL of user to create a new ContextReporter\n    *******************************************************************************************************/\n\n  }, {\n    key: '_createNewContextReporter',\n    value: function _createNewContextReporter(userURL) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        _this._resumeReporter(userURL).then(function (reporterResumed) {\n\n          console.log('[SlackProtostub] TEST creating reporter for', userURL);\n          _this._addedUsersInfo.forEach(function (currentUser) {\n\n            if (currentUser.userURL == userURL) {\n              console.log('[SlackProtostub] TEST get presense for ', currentUser);\n              var toGetPresence = { token: _this._token, user: currentUser.id };\n\n              _this._slack.users.getPresence(toGetPresence, function (err, data) {\n\n                if (err) {\n                  console.error('[SlackProtostub] error', err);\n                  return resolve(false);\n                } else {\n                  console.log('[SlackProtostub] PRESENCE OF USER', currentUser, data);\n                  if (data.ok) {\n                    _this._toSubscribePresence.push(currentUser.id);\n                    console.log('[SlackProtostub] toSubscribeArray', _this._toSubscribePresence, 'intext', JSON.stringify(_this._toSubscribePresence));\n                    console.log('[SlackProtostub] resumed obj', reporterResumed);\n                    if (!reporterResumed) {\n                      var objPresence = _this._createNewObjPresence(data.presence);\n                      console.log('[SlackProtostub] creating a new contextReporter for invitedUSER ', objPresence, currentUser);\n                      //debugger;\n                      _this._contextReporter.create(currentUser.userURL, objPresence, ['availability_context'], currentUser.userURL, currentUser.userURL).then(function (context) {\n                        console.log('[SlackProtostub] CONTEXT RETURNED', context);\n                        context.onSubscription(function (event) {\n                          event.accept();\n                          console.log('[SlackProtostub] new subs', event);\n                        });\n                        _this._contextReportersInfo[currentUser.id] = context;\n                        return resolve(true);\n                      }).catch(function (err) {\n                        console.error('[SlackProtostub] err', err);\n                      });\n                    } else {\n                      console.log('[SlackProtostub] reporter for this userURL:', userURL, ' already exists ', reporterResumed);\n                      _this._contextReportersInfo[currentUser.id] = reporterResumed;\n                      return resolve(true);\n                    }\n\n                    console.log('[SlackProtostub] websocket readyState', _this._ws.readyState);\n                  } else {\n                    return resolve(false);\n                  }\n                }\n              });\n            }\n          });\n        }).catch(function (error) {\n          console.log('[SlackProtostub] error', error);\n          return resolve(false);\n        });\n      });\n    }\n\n    /*****************************************************************************************************\n    * It returns a dataobject with info of a slack User\n    * @param {string} info - status info of a slackUser\n    * @return {object} return a object related with info of a slackUser\n    *******************************************************************************************************/\n\n  }, {\n    key: '_createNewObjPresence',\n    value: function _createNewObjPresence(info) {\n      var _this = this;\n\n      return Object.assign({}, {\n        id: '_' + Math.random().toString(36).substr(2, 9), // do we need this?\n        values: [{\n          value: _this._getPresence(info),\n          name: 'availability',\n          type: 'availability_status',\n          unit: 'pres'\n        }]\n      });\n    }\n  }, {\n    key: '_getPresence',\n\n\n    /*****************************************************************************************************\n    * It returns a string with info related with presence of a user\n    * @param {string} info - status info of a slackUser\n    * @return {string} return info of presence of a slack user\n    *******************************************************************************************************/\n    value: function _getPresence(info) {\n      var status = void 0;\n\n      if (info === \"active\") {\n        return 'available';\n      } else {\n        return 'unavailable';\n      }\n    }\n\n    /*****************************************************************************************************\n    * It get some info about channels, users, and groups of slack using token and returns info\n    * of who invite and who was invited\n    * @param {string} to - status info of a slackUser\n    * @param {string} ownID - status info of a slackUser\n    * @return {object} return object with info of who invite and who was invited\n    *******************************************************************************************************/\n\n  }, {\n    key: '_getSlackInformation',\n    value: function _getSlackInformation(to, ownID) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n\n        var URLUsersList = 'https://slack.com/api/users.list?token=' + _this._token;\n        //let URLGroupsList = 'https://slack.com/api/groups.list?token=' + _this._token;\n        var URLChannelsList = 'https://slack.com/api/channels.list?token=' + _this._token;\n        //let URLImsList = 'https://slack.com/api/im.list?token=' + _this._token;\n\n        var UsersListPromise = _this._sendHTTPRequest('GET', URLUsersList);\n        //let GroupsListPromise = _this._sendHTTPRequest('GET', URLGroupsList);\n        var ChannelsListPromise = _this._sendHTTPRequest('GET', URLChannelsList);\n        //let ImsListPromise = _this._sendHTTPRequest('GET', URLImsList);\n\n        Promise.all([UsersListPromise, ChannelsListPromise]).then(function (result) {\n          //Promise.all([UsersListPromise, GroupsListPromise, ChannelsListPromise, ImsListPromise]).then(function(result) {\n          _this._usersList = result[0].members;\n          //_this._groupsList = result[1].groups;\n          _this._channelsList = result[1].channels;\n          //_this._imsList = result[2].ims;\n\n          //get userID to invite\n          var toSplitted = to.split('://')[1];\n          var user = toSplitted.split('@')[0];\n          var invInfo = _this._usersList.filter(function (value) {\n            return value.name === user;\n          })[0];\n          var ownInfo = _this._usersList.filter(function (value) {\n            return value.id === ownID;\n          })[0];\n          var infotoReturn = { invInfo: invInfo, ownInfo: ownInfo };\n\n          resolve(infotoReturn);\n        }, function (error) {\n          console.error('[SlackProtostub] ', error);\n          reject(error);\n        });\n      });\n    }\n\n    /*****************************************************************************************************\n    * It check if channelexist, if user is on channel and check which users need to be invited\n    * @param {string} msg - message related with event received\n    * @param {Object} neededInfoInvited - info about user to be invited\n    * @param {Object} neededOwnInfo - info about user own info\n    *******************************************************************************************************/\n\n  }, {\n    key: '_channelStatusInfo',\n    value: function _channelStatusInfo(msg, neededInfoInvited, neededOwnInfo) {\n      //_channelStatusInfo(msg, userID, channelObjUrl, userName, userURL, eventURL, identityToInv, ownUserURL, ownUserID) {\n      var _this = this;\n      var channelName = msg.value.name.split(' ').join('-').replace(/\\//gi, '-');\n      var channelExists = _this._channelsList.filter(function (value) {\n        return value.name === channelName;\n      })[0];\n      var channelMembers = null;\n      // if channel exist, invite user, else channel need to be created and then invite user\n      if (channelExists) {\n        console.log('[SlackProtostub] channel exist', channelExists);\n        channelMembers = _this._channelsList.filter(function (value) {\n          return value.name === channelName;\n        })[0].members;\n\n        var alreadyOnChannel = false;\n\n        channelMembers.forEach(function (s) {\n          if (s === neededInfoInvited.id) {\n            alreadyOnChannel = true;\n          }\n        });\n        console.log('[SlackProtostub] channel members', channelMembers, '   ->', alreadyOnChannel);\n\n        var count = 0;\n        var key = 0;\n        _this._subscribedList.forEach(function (obj) {\n          if (obj.urlDataObj === msg.url) {\n            key = count;\n          }\n          count++;\n        });\n        console.log('[SlackProtostub] channels', _this._subscribedList, _this._subscribedList.length, key);\n        _this._subscribedList[key].channelID = channelExists.id;\n        //debugger;\n        // if user isnt on Channel invite, else just set channelID\n        if (!alreadyOnChannel) {\n          _this._invite(neededInfoInvited.id, channelExists.id);\n        }\n      } else {\n        _this._createChannel(channelName, msg.url).then(function (result) {\n          console.log('[SlackProtostub]  after create channel ', result);\n          if (result) {\n            _this._invite(neededInfoInvited.id, '', msg.url);\n          }\n        });\n      }\n      if (!_this._usersUpdated) {\n        _this._addAllUsersToHyperty(channelMembers, neededInfoInvited, neededOwnInfo);\n        //_this._addAllUsersToHyperty(channelMembers,userID, userURL, eventURL, userName, identityToInv, ownUserURL, ownUserID);\n      } else {\n        console.log('[SlackProtostub] users Already Updated');\n      }\n    }\n\n    /*****************************************************************************************************\n    * It add all users to dataobject and  create contextReporters for each one\n    * @param {Object[]} channelMembers - List of channel Members\n    * @param {Object} neededInfoInvited - info about user to be invited\n    * @param {Object} neededOwnInfo - info about user own info\n    *******************************************************************************************************/\n\n  }, {\n    key: '_addAllUsersToHyperty',\n    value: function _addAllUsersToHyperty(channelMembers, neededInfoInvited, neededOwnInfo) {\n      //_addAllUsersToHyperty(channelMembers, userID, userURL, eventURL, userName, identityToInv, ownUserURL, ownUserID) {\n      var _this = this;\n      _this._usersUpdated = true;\n      var usersInfo = {};\n      var toADD = [];\n      var userToAdd = void 0;\n      console.log('[SlackProtostub] lets check if users needs to be added');\n      if (channelMembers) {\n        _this._usersList.forEach(function (currentUser) {\n          channelMembers.forEach(function (s) {\n            //console.log('[SlackProtostub] currentUser', currentUser);\n            if (s === currentUser.id) {\n\n              if (neededInfoInvited.id != currentUser.id && neededOwnInfo.id != currentUser.id) {\n                console.log('[SlackProtostub] to add ', currentUser.id);\n                var identity = _this._factory.createMessageBodyIdentity(currentUser.name, 'slack://slack.com/' + currentUser.name + '@slack.com', currentUser.profile.image_192, currentUser.name, '', 'slack.com', undefined, currentUser.profile);\n\n                userToAdd = { user: 'slack://' + currentUser.name + '@slack.com', domain: 'slack.com', id: currentUser.id, userURL: 'slack://slack.com/' + currentUser.name + '@slack.com', identity: identity };\n                _this._addedUsersInfo.push(userToAdd);\n\n                toADD.push(userToAdd);\n              }\n            }\n          });\n        });\n      }\n\n      userToAdd = { user: 'slack://' + neededInfoInvited.name + '@slack.com', domain: 'slack.com', id: neededInfoInvited.id, userURL: 'slack://slack.com/' + neededInfoInvited.name + '@slack.com', identity: neededInfoInvited.identity };\n      _this._addedUsersInfo.push(userToAdd);\n      toADD.push(userToAdd);\n\n      toADD.forEach(function (user) {\n        console.log('[SlackProtostub] TEST joining with user', user);\n        if (user.userURL !== neededOwnInfo.userURL) {\n          _this._createNewContextReporter(user.userURL).then(function (creation) {\n            //debugger;\n            if (creation == true) {\n              _this._chatManager.join(_this._dataObjectReporterURL, false, user.identity).then(function (result) {\n                console.log('[SlackProtostub] chatmanager JOIN', result, user.userURL, neededOwnInfo.userURL);\n                _this._prepareChat(result);\n                // if (user.userURL !== neededOwnInfo.userURL) {\n                //   _this._createNewContextReporter(user.userURL);\n                // }\n                var msgQuery = { \"type\": \"presence_sub\",\n                  \"ids\": _this._toSubscribePresence };\n                console.log('[SlackProtostub] websocket sentmessage', _this._ws.readyState, msgQuery);\n                _this._ws.send(JSON.stringify(msgQuery));\n              }).catch(function (error) {\n                console.log('[SlackProtostub] chatmanager JOIN error', error);\n              });\n            }\n          });\n        } else {\n          //TODO pode faltar aqui o chatmanager join\n        }\n      });\n    }\n\n    /*****************************************************************************************************\n    * It handle a new user added to a Slack channel, and add him to DataObject.participants\n    * @param {Object} message - message with a new user added\n    *******************************************************************************************************/\n\n  }, {\n    key: '_handleNewUser',\n    value: function _handleNewUser(message) {\n      console.log('[SlackProtostub] Handling a new user', message);\n      var _this = this;\n      var subcribed = void 0;\n      _this._subscribedList.forEach(function (obj) {\n        if (obj.channelID === message.channel) {\n          subcribed = obj;\n        }\n      });\n      if (subcribed) {\n        var invInfo = _this._usersList.filter(function (value) {\n          return value.id === message.user;\n        })[0];\n\n        var identity = _this._factory.createMessageBodyIdentity(invInfo.name, 'slack://slack.com/' + invInfo.name + '@slack.com', invInfo.profile.image_192, invInfo.name, '', 'slack.com', undefined, invInfo.profile);\n\n        var userToAdd = { user: 'slack://' + invInfo.name + '@slack.com', domain: 'slack.com', id: message.user, userURL: 'slack://slack.com/' + invInfo.name + '@slack.com', identity: identity };\n        _this._addedUsersInfo.push(userToAdd);\n        console.log('[SlackProtostub] Joining chat', subcribed.urlDataObj, ' with', identity);\n        _this._createNewContextReporter(identity.userProfile.userURL).then(function (creation) {\n          //debugger;\n          if (creation == true) {\n            _this._chatManager.join(subcribed.urlDataObj, false, identity).then(function (result) {\n              _this._prepareChat(result);\n              var msgQuery = { \"type\": \"presence_sub\",\n                \"ids\": _this._toSubscribePresence };\n              console.log('[SlackProtostub] websocket sentmessage', _this._ws.readyState, msgQuery);\n              _this._ws.send(JSON.stringify(msgQuery));\n              //_this._createNewContextReporter(identity.userProfile.userURL);\n            });\n          }\n        });\n      }\n    }\n\n    /*****************************************************************************************************\n    * It handle a new Presence change of Slack user, and change his status\n    * @param {Object} message - message with info about user and his status\n    *******************************************************************************************************/\n\n  }, {\n    key: '_handlePresenceChange',\n    value: function _handlePresenceChange(message) {\n      var _this = this;\n      console.log('[SlackProtostub] updating presence of user');\n      if (_this._contextReportersInfo[message.user]) {\n        var reporter = _this._contextReportersInfo[message.user];\n        reporter.data.values[0].value = _this._getPresence(message.presence);\n        console.log('[SlackProtostub] presence of user', message.user, ' updated to', reporter.data);\n      }\n    }\n\n    /*****************************************************************************************************\n    * It handle a new message received on channel, and send it to hyperty\n    * @param {Object} message - message with info about channel and text to send\n    *******************************************************************************************************/\n\n  }, {\n    key: '_handleNewMessage',\n    value: function _handleNewMessage(message) {\n      console.log('[SlackProtostub] Handling a new message', message);\n      var _this = this;\n      var channelID = '';\n      var chat = void 0;\n      _this._subscribedList.forEach(function (obj) {\n        if (obj.channelID === message.channel) {\n          channelID = obj.channelID;\n          chat = obj.chat;\n        }\n      });\n      console.log('[SlackProtostub] subscribed list', _this._subscribedList);\n      if (message.channel && message.ts > _this._session.createdTime) {\n        if (message.channel === channelID && message.user !== _this._id || !message.hasOwnProperty('bot_id') && message.user === _this._id && message.channel === channelID) {\n\n          _this._getUserInfo(message.user).then(function (identity) {\n            console.log('[SlackProtostub] msg to addChild', message.text, '     identity:', identity);\n            chat.send(message.text, identity);\n          });\n        }\n      }\n    }\n\n    /*****************************************************************************************************\n    * It retrieves information from a slack user and creates a reTHINK Identity object with it\n    * @param {string} user - slack user id\n    * @return {Promise<Object>} Returns a promise with an Identity object resolved\n    *******************************************************************************************************/\n\n  }, {\n    key: '_getUserInfo',\n    value: function _getUserInfo(user) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this._slack.users.info({ token: _this._token, user: user }, function (err, data) {\n          if (err) {\n            console.error('[SlackProtostub] error', err);\n          } else {\n\n            console.log('[SlackProtostub getUserInfo] ', data);\n            var identity = _this._factory.createMessageBodyIdentity(data.user.name, 'slack://slack.com/' + data.user.name + '@slack.com', data.user.profile.image_192, data.user.name, '', 'slack.com');\n\n            resolve(identity);\n          }\n        });\n      });\n    }\n  }, {\n    key: '_prepareChat',\n    value: function _prepareChat(chat) {\n      var _this = this;\n      console.log('[SlackProtostub] chat', chat);\n      chat.onMessage(function (msg) {\n        console.info('[SlackProtostub] onMessage: ', msg);\n        console.info('[SlackProtostub] Observer - Message History Control ', _this._messageHistoryControl);\n\n        //check if for each msg message has been delivered, and control that for when we have more than one slack user subscribed\n        var currentID = chat.child_cseq;\n        // check if this child already sent messages\n        var channelObjUrl = chat._dataObjectObserver.url;\n        var channelID = void 0;\n\n        _this._subscribedList.forEach(function (obj) {\n          if (obj.urlDataObj === channelObjUrl) {\n            channelID = obj.channelID;\n          }\n        });\n\n        if (_this._messageHistoryControl.hasOwnProperty(channelObjUrl)) {\n\n          // in that case check if the currentID its equal to oldID\n          var oldID = _this._messageHistoryControl[channelObjUrl].id;\n          if (oldID !== currentID) {\n            _this._messageHistoryControl[channelObjUrl].id = currentID;\n            _this._deliver(msg, channelID);\n          }\n        } else {\n          _this._messageHistoryControl[channelObjUrl] = { id: currentID };\n          _this._deliver(msg, channelID);\n        }\n      });\n    }\n\n    /*****************************************************************************************************\n    * It retrieves information from a slack user and creates a reTHINK Identity object with it\n    * @param {string} idUser - slack user ID to be invited\n    * @param {string} idChannel - channelID for user will be invited\n    * @param {string} channelObjUrl - DataObjectURL from where user is invited\n    *******************************************************************************************************/\n\n  }, {\n    key: '_invite',\n    value: function _invite(idUser) {\n      var idChannel = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var channelObjUrl = arguments[2];\n\n      var _this = this;\n\n      if (idChannel == '') {\n        _this._subscribedList.forEach(function (obj) {\n          if (obj.urlDataObj === channelObjUrl) {\n            idChannel = obj.channelID;\n          }\n        });\n      }\n\n      var toInvite = { token: _this._token, channel: idChannel, user: idUser };\n\n      _this._slack.channels.invite(toInvite, function (err, data) {\n        if (err) {\n          console.error('[SlackProtostub] error', err);\n        } else {\n\n          console.log('[SlackProtostub] user invited with sucess', data);\n        }\n      });\n    }\n\n    /*****************************************************************************************************\n    * It deliver a message to a slack channel\n    * @param {Object} msg - Message Object\n    * @param {String} channelID - channelID to deliver message\n    *******************************************************************************************************/\n\n  }, {\n    key: '_deliver',\n    value: function _deliver(msg, channelID) {\n      var _this = this;\n\n      console.log('[SlackProtostub] Msg to Deliver: ', msg, ' on channel:', channelID);\n      if (channelID && msg.value) {\n\n        if (msg.hasOwnProperty('identity') && msg.identity.hasOwnProperty('userProfile') && msg.identity.userProfile.hasOwnProperty('name') && msg.identity.userProfile.name) {\n\n          var text = '' + msg.identity.userProfile.name + ': ' + msg.value.content;\n          var message = { as_user: true, token: _this._token, channel: channelID, text: text };\n          console.log('[SlackProtostub] (PostMessage slack api) token(', _this._token, ')  channel(', channelID, ') text(', msg.value.content, ')');\n\n          // call Slack postMessage method to deliver msg on slack channel\n          _this._slack.chat.postMessage(message, function (err, data) {\n            if (err) {\n              if (err.message == 'not_in_channel') {\n                console.error('[SlackProtostub] Channel exist, but user is not on channel', err);\n                var channelToJoin = _this._channelsList.filter(function (value) {\n                  return value.id === channelID;\n                })[0];\n                var objToJoin = { token: _this._token, name: channelToJoin.name };\n\n                _this._slack.channels.join(objToJoin);\n                _this._deliver(msg, channelID);\n              } else {\n                console.error('[SlackProtostub] error', err);\n              }\n            } else {\n              console.log('[SlackProtostub] PostMessage with Sucess', data);\n            }\n          });\n        }\n      }\n    }\n\n    /*****************************************************************************************************\n    * It create a new slackChannel using channelName\n    * @param {String} channelName - name to be used to create a new channel\n    * @param {String} channelObjUrl - Dataobject URL of a channel to be used to associate this channel to this dataobject\n    *******************************************************************************************************/\n\n  }, {\n    key: '_createChannel',\n    value: function _createChannel(channelName, channelObjUrl) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        var toCreate = { token: _this._token, name: channelName };\n        console.log('[SlackProtostub] Creating a new channel toCreate:', toCreate, '  channelObjUrl:', channelObjUrl);\n        _this._slack.channels.create(toCreate, function (err, data) {\n          if (err) {\n            console.error('[SlackProtostub] ', err);\n          } else {\n            if (data.ok) {\n              console.log('[SlackProtostub] Channel Created with Sucess ', data);\n              console.log('[SlackProtostub] Associate a new channel ID', data.channel.id, 'to urlDataObj', channelObjUrl);\n\n              var count = 0;\n              var key = 0;\n              //Associate a channel to comm dataObject\n              _this._subscribedList.forEach(function (obj) {\n                if (obj.urlDataObj === channelObjUrl) {\n                  key = count;\n                }\n                count++;\n              });\n              _this._subscribedList[key].channelID = data.channel.id;\n              console.log('[SlackProtostub] subscribed list', _this._subscribedList);\n              resolve(true);\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: '_sendHTTPRequest',\n    value: function _sendHTTPRequest(method, url) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        if ('withCredentials' in xhr) {\n          xhr.open(method, url, true);\n        } else if (typeof XDomainRequest !== 'undefined') {\n          // Otherwise, check if XDomainRequest.\n          // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n          xhr = new XDomainRequest();\n          xhr.open(method, url);\n        } else {\n          // Otherwise, CORS is not supported by the browser.\n          xhr = null;\n        }\n        if (xhr) {\n          xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n              if (xhr.status === 200) {\n                var info = JSON.parse(xhr.responseText);\n                resolve(info);\n              } else if (xhr.status === 400) {\n                reject('There was an error processing the token');\n              } else {\n                reject('something else other than 200 was returned');\n              }\n            }\n          };\n          xhr.send();\n        } else {\n          reject('CORS not supported');\n        }\n      });\n    }\n\n    /*****************************************************************************************************\n    * It Updates the state of ProtoStub\n    * @param {String} value - status of protostub to be updated\n    * @param {String} reason - reason of this update, optional\n    *******************************************************************************************************/\n\n  }, {\n    key: '_sendStatus',\n    value: function _sendStatus(value, reason) {\n      var _this = this;\n\n      console.log('[SlackProtostub status changed] to ', value);\n\n      _this._state = value;\n\n      var msg = {\n        type: 'update',\n        from: _this._myUrl,\n        to: _this._myUrl + '/status',\n        body: {\n          value: value\n        }\n      };\n\n      if (reason) {\n        msg.body.desc = reason;\n      }\n      _this._bus.postMessage(msg);\n    }\n  }, {\n    key: 'config',\n    get: function get() {\n      return this._config;\n    }\n  }, {\n    key: 'runtimeSession',\n    get: function get() {\n      return this._runtimeSessionURL;\n    }\n  }]);\n\n  return SlackProtoStub;\n}();\n\nfunction activate(url, bus, config, factory) {\n  return {\n    name: 'SlackProtoStub',\n    instance: new SlackProtoStub(url, bus, config, factory)\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9TbGFja1Byb3RvU3R1Yi5wcy5qcz85NDdiIl0sIm5hbWVzIjpbImFjdGl2YXRlIiwiU2xhY2tQcm90b1N0dWIiLCJydW50aW1lUHJvdG9TdHViVVJMIiwiYnVzIiwiY29uZmlnIiwiZmFjdG9yeSIsIkVycm9yIiwiY29uc29sZSIsImxvZyIsIl90aGlzIiwiX3dzIiwiX3RvU3Vic2NyaWJlUHJlc2VuY2UiLCJfYWRkZWRVc2Vyc0luZm8iLCJfYWxyZWFkeUNyZWF0ZWQiLCJfc2xhY2siLCJzbGFjayIsIl91c2Vyc1VwZGF0ZWQiLCJfc3Vic2NyaWJlZExpc3QiLCJfbWVzc2FnZUhpc3RvcnlDb250cm9sIiwiX3VzZXJzTGlzdCIsIl9jaGFubmVsc0xpc3QiLCJfaWQiLCJfdG9rZW4iLCJfZGF0YU9iamVjdFJlcG9ydGVyVVJMIiwiX2ZhY3RvcnkiLCJfY29udGV4dFJlcG9ydGVyc0luZm8iLCJfc3luY2hlciIsImNyZWF0ZVN5bmNoZXIiLCJfY2hhdE1hbmFnZXIiLCJjcmVhdGVDaGF0TWFuYWdlciIsIl9jb250ZXh0UmVwb3J0ZXIiLCJjcmVhdGVDb250ZXh0UmVwb3J0ZXIiLCJfbXlVcmwiLCJfYnVzIiwiX2NvbmZpZyIsIl9ydW50aW1lU2Vzc2lvblVSTCIsInJ1bnRpbWVVUkwiLCJfcmVPcGVuIiwib25JbnZpdGF0aW9uIiwiZXZlbnQiLCJfb25TbGFja0ludml0YXRpb24iLCJfbm90aWZpY2F0aW9uSGFuZGxlciIsImNyZWF0ZU5vdGlmaWNhdGlvbkhhbmRsZXIiLCJvbk5vdGlmaWNhdGlvbiIsInByb2Nlc3NOb3RpZmljYXRpb24iLCJhZGRMaXN0ZW5lciIsIm1zZyIsImZyb20iLCJ0eXBlIiwib25DcmVhdGUiLCJvbkRlbGV0ZSIsIl9zZW5kU3RhdHVzIiwidmlhIiwidG9rZW4iLCJjYWxsYmFjayIsIl9zZXNzaW9uIiwicnRtIiwiY29ubmVjdCIsImJhdGNoX3ByZXNlbmNlX2F3YXJlIiwicHJlc2VuY2Vfc3ViIiwiY3JlYXRlZFRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInRoZW4iLCJyZXN1bHQiLCJvayIsIldlYlNvY2tldCIsInVybCIsIm9ubWVzc2FnZSIsIkpTT04iLCJwYXJzZSIsImRhdGEiLCJfaGFuZGxlTmV3TWVzc2FnZSIsIl9oYW5kbGVQcmVzZW5jZUNoYW5nZSIsIl9oYW5kbGVOZXdVc2VyIiwib25lcnJvciIsImVycm9yIiwic2V0VGltZW91dCIsInJlcG9ydGVyVVJMIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXN1bWVSZXBvcnRlcnMiLCJzdG9yZSIsInJlcG9ydGVyIiwicmVwb3J0ZXJzIiwiZGF0YU9iamVjdFJlcG9ydGVyIiwicmVwb3J0ZXJzTGlzdCIsIk9iamVjdCIsImtleXMiLCJpIiwiZm9yRWFjaCIsImtleSIsIl9uYW1lIiwic3RhcnRzV2l0aCIsImlkZW50aXR5IiwiaGFzT3duUHJvcGVydHkiLCJhY2Nlc3NUb2tlbiIsIl9vcGVuIiwiX2ZpbHRlciIsInNjaGVtYVVybCIsInNjaGVtYSIsInZhbHVlIiwibmFtZSIsInNjaGVtYVNwbGl0dGVkIiwic3BsaXQiLCJsZW5ndGgiLCJfZ2V0U2xhY2tJbmZvcm1hdGlvbiIsInRvIiwiaW5wdXQiLCJ1c2VyX2lkIiwiaW5mb1JldHVybmVkIiwidXNlckluZm8iLCJvd25JbmZvIiwidG9JbnZJbmZvIiwiaW52SW5mbyIsImNyZWF0ZU1lc3NhZ2VCb2R5SWRlbnRpdHkiLCJwcm9maWxlIiwiaW1hZ2VfMTkyIiwidW5kZWZpbmVkIiwiaWRlbnRpdHlUb0ludiIsImFjayIsIm5lZWRlZEluZm9JbnZpdGVkIiwiaWQiLCJ1c2VyVVJMIiwidXNlclByb2ZpbGUiLCJuZWVkZWRPd25JbmZvIiwidXNlclRvQWRkIiwidXNlciIsImRvbWFpbiIsInB1c2giLCJfY3JlYXRlTmV3Q29udGV4dFJlcG9ydGVyIiwiY3JlYXRpb24iLCJqb2luIiwiY2hhdENvbnRyb2xsZXIiLCJfcHJlcGFyZUNoYXQiLCJtc2dRdWVyeSIsInJlYWR5U3RhdGUiLCJzZW5kIiwic3RyaW5naWZ5Iiwic3Vic2NyaXB0aW9uIiwidXJsRGF0YU9iaiIsInN1YnNjcmliZWQiLCJjaGF0IiwiX2NoYW5uZWxTdGF0dXNJbmZvIiwidGVzdFVSTCIsIl9yZXN1bWVSZXBvcnRlciIsInJlcG9ydGVyUmVzdW1lZCIsImN1cnJlbnRVc2VyIiwidG9HZXRQcmVzZW5jZSIsInVzZXJzIiwiZ2V0UHJlc2VuY2UiLCJlcnIiLCJvYmpQcmVzZW5jZSIsIl9jcmVhdGVOZXdPYmpQcmVzZW5jZSIsInByZXNlbmNlIiwiY3JlYXRlIiwiY29udGV4dCIsIm9uU3Vic2NyaXB0aW9uIiwiYWNjZXB0IiwiY2F0Y2giLCJpbmZvIiwiYXNzaWduIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwidmFsdWVzIiwiX2dldFByZXNlbmNlIiwidW5pdCIsInN0YXR1cyIsIm93bklEIiwiVVJMVXNlcnNMaXN0IiwiVVJMQ2hhbm5lbHNMaXN0IiwiVXNlcnNMaXN0UHJvbWlzZSIsIl9zZW5kSFRUUFJlcXVlc3QiLCJDaGFubmVsc0xpc3RQcm9taXNlIiwiYWxsIiwibWVtYmVycyIsImNoYW5uZWxzIiwidG9TcGxpdHRlZCIsImZpbHRlciIsImluZm90b1JldHVybiIsImNoYW5uZWxOYW1lIiwicmVwbGFjZSIsImNoYW5uZWxFeGlzdHMiLCJjaGFubmVsTWVtYmVycyIsImFscmVhZHlPbkNoYW5uZWwiLCJzIiwiY291bnQiLCJvYmoiLCJjaGFubmVsSUQiLCJfaW52aXRlIiwiX2NyZWF0ZUNoYW5uZWwiLCJfYWRkQWxsVXNlcnNUb0h5cGVydHkiLCJ1c2Vyc0luZm8iLCJ0b0FERCIsIm1lc3NhZ2UiLCJzdWJjcmliZWQiLCJjaGFubmVsIiwidHMiLCJfZ2V0VXNlckluZm8iLCJ0ZXh0Iiwib25NZXNzYWdlIiwiY3VycmVudElEIiwiY2hpbGRfY3NlcSIsImNoYW5uZWxPYmpVcmwiLCJfZGF0YU9iamVjdE9ic2VydmVyIiwib2xkSUQiLCJfZGVsaXZlciIsImlkVXNlciIsImlkQ2hhbm5lbCIsInRvSW52aXRlIiwiaW52aXRlIiwiY29udGVudCIsImFzX3VzZXIiLCJwb3N0TWVzc2FnZSIsImNoYW5uZWxUb0pvaW4iLCJvYmpUb0pvaW4iLCJ0b0NyZWF0ZSIsIm1ldGhvZCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIlhEb21haW5SZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVzcG9uc2VUZXh0IiwicmVhc29uIiwiX3N0YXRlIiwiYm9keSIsImRlc2MiLCJpbnN0YW5jZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7a0JBazNCd0JBLFE7O0FBbDNCeEI7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7SUFFTUMsYztBQUVKLDBCQUFZQyxtQkFBWixFQUFpQ0MsR0FBakMsRUFBc0NDLE1BQXRDLEVBQThDQyxPQUE5QyxFQUF1RDtBQUFBOztBQUVyRCxRQUFJLENBQUNILG1CQUFMLEVBQTBCLE1BQU0sSUFBSUksS0FBSixDQUFVLCtDQUFWLENBQU47QUFDMUIsUUFBSSxDQUFDSCxHQUFMLEVBQVUsTUFBTSxJQUFJRyxLQUFKLENBQVUsK0JBQVYsQ0FBTjtBQUNWLFFBQUksQ0FBQ0YsTUFBTCxFQUFhLE1BQU0sSUFBSUUsS0FBSixDQUFVLGtDQUFWLENBQU47O0FBRWJDLFlBQVFDLEdBQVIsQ0FBWSxxQ0FBWjs7QUFFQSxRQUFJQyxRQUFRLElBQVo7QUFDQSxTQUFLQyxHQUFMLEdBQVcsSUFBWDtBQUNBLFNBQUtDLG9CQUFMLEdBQTRCLEVBQTVCO0FBQ0EsU0FBS0MsZUFBTCxHQUF1QixFQUF2QjtBQUNBLFNBQUtDLGVBQUwsR0FBdUIsS0FBdkI7QUFDQSxTQUFLQyxNQUFMLEdBQWNDLGVBQWQ7QUFDQSxTQUFLQyxhQUFMLEdBQXFCLEtBQXJCO0FBQ0EsU0FBS0MsZUFBTCxHQUF1QixFQUF2QjtBQUNBLFNBQUtDLHNCQUFMLEdBQThCLEVBQTlCO0FBQ0EsU0FBS0MsVUFBTCxHQUFrQixFQUFsQjtBQUNB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Q0FLWXFCLEssRUFBTzZILE0sRUFBUTtBQUN6QixVQUFJMU4sUUFBUSxJQUFaOztBQUVBRixjQUFRQyxHQUFSLENBQVkscUNBQVosRUFBbUQ4RixLQUFuRDs7QUFFQTdGLFlBQU0yTixNQUFOLEdBQWU5SCxLQUFmOztBQUVBLFVBQUl4RCxNQUFNO0FBQ1JFLGNBQU0sUUFERTtBQUVSRCxjQUFNdEMsTUFBTXVCLE1BRko7QUFHUjRFLFlBQUluRyxNQUFNdUIsTUFBTixHQUFlLFNBSFg7QUFJUnFNLGNBQU07QUFDSi9ILGlCQUFPQTtBQURIO0FBSkUsT0FBVjs7QUFTQSxVQUFJNkgsTUFBSixFQUFZO0FBQ1ZyTCxZQUFJdUwsSUFBSixDQUFTQyxJQUFULEdBQWdCSCxNQUFoQjtBQUNEO0FBQ0QxTixZQUFNd0IsSUFBTixDQUFXdUwsV0FBWCxDQUF3QjFLLEdBQXhCO0FBQ0Q7Ozt3QkFueUJZO0FBQUUsYUFBTyxLQUFLWixPQUFaO0FBQXNCOzs7d0JBRWhCO0FBQUUsYUFBTyxLQUFLQyxrQkFBWjtBQUFpQzs7Ozs7O0FBcXlCM0MsU0FBU25DLFFBQVQsQ0FBa0JtRSxHQUFsQixFQUF1QmhFLEdBQXZCLEVBQTRCQyxNQUE1QixFQUFvQ0MsT0FBcEMsRUFBNkM7QUFDMUQsU0FBTztBQUNMa0csVUFBTSxnQkFERDtBQUVMZ0ksY0FBVSxJQUFJdE8sY0FBSixDQUFtQmtFLEdBQW5CLEVBQXdCaEUsR0FBeEIsRUFBNkJDLE1BQTdCLEVBQXFDQyxPQUFyQztBQUZMLEdBQVA7QUFJRCIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNsYWNrIGZyb20gJ3NsYWNrJztcbi8vaW1wb3J0IHsgU3luY2hlciwgTm90aWZpY2F0aW9uSGFuZGxlciB9IGZyb20gJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvU3luY2hlcic7XG4vL2ltcG9ydCBJZGVudGl0eU1hbmFnZXIgZnJvbSAnc2VydmljZS1mcmFtZXdvcmsvZGlzdC9JZGVudGl0eU1hbmFnZXInO1xuLy9pbXBvcnQge0NoYXRNYW5hZ2VyfSBmcm9tICdydW50aW1lLWNvcmUvZGlzdC9DaGF0TWFuYWdlcic7XG4vL2ltcG9ydCBNZXNzYWdlQm9keUlkZW50aXR5IGZyb20gJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvSWRlbnRpdHlGYWN0b3J5Jztcbi8vaW1wb3J0IHtDb250ZXh0UmVwb3J0ZXJ9IGZyb20gJ3NlcnZpY2UtZnJhbWV3b3JrL2Rpc3QvQ29udGV4dE1hbmFnZXInO1xuXG5jbGFzcyBTbGFja1Byb3RvU3R1YiB7XG5cbiAgY29uc3RydWN0b3IocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcsIGZhY3RvcnkpIHtcblxuICAgIGlmICghcnVudGltZVByb3RvU3R1YlVSTCkgdGhyb3cgbmV3IEVycm9yKCdUaGUgcnVudGltZVByb3RvU3R1YlVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTtcbiAgICBpZiAoIWJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgYnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpO1xuICAgIGlmICghY29uZmlnKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWcgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7XG5cbiAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBDb25zdHJ1Y3RvciBMb2FkZWQnKTtcblxuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgdGhpcy5fd3MgPSBudWxsO1xuICAgIHRoaXMuX3RvU3Vic2NyaWJlUHJlc2VuY2UgPSBbXTtcbiAgICB0aGlzLl9hZGRlZFVzZXJzSW5mbyA9IFtdO1xuICAgIHRoaXMuX2FscmVhZHlDcmVhdGVkID0gZmFsc2U7XG4gICAgdGhpcy5fc2xhY2sgPSBzbGFjaztcbiAgICB0aGlzLl91c2Vyc1VwZGF0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9zdWJzY3JpYmVkTGlzdCA9IFtdO1xuICAgIHRoaXMuX21lc3NhZ2VIaXN0b3J5Q29udHJvbCA9IHt9O1xuICAgIHRoaXMuX3VzZXJzTGlzdCA9IFtdO1xuICAgIC8vdGhpcy5fZ3JvdXBzTGlzdCA9IFtdO1xuICAgIHRoaXMuX2NoYW5uZWxzTGlzdCA9IFtdO1xuICAgIC8vdGhpcy5faW1zTGlzdCA9IFtdO1xuICAgIC8vdGhpcy5fb2JzZXJ2ZXI7XG4gICAgdGhpcy5faWQgPSAwO1xuICAgIC8vdGhpcy5fY29udGludW91c09wZW4gPSB0cnVlO1xuICAgIHRoaXMuX3Rva2VuID0gJyc7XG4gICAgLy90aGlzLl9jaGF0Q29udHJvbGxlcjtcbiAgICAvL3RoaXMuX2NoYXRDb250cm9sbGVyc0V4dHJhID0ge307XG4gICAgLy90aGlzLl9zY2hlbWFVUkw7XG4gICAgdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyVVJMO1xuICAgIHRoaXMuX2ZhY3RvcnkgPSBmYWN0b3J5O1xuICAgIHRoaXMuX2NvbnRleHRSZXBvcnRlcnNJbmZvID0ge307XG4gICAgdGhpcy5fc3luY2hlciA9IGZhY3RvcnkuY3JlYXRlU3luY2hlcihydW50aW1lUHJvdG9TdHViVVJMLCBidXMsIGNvbmZpZyk7XG4gICAgdGhpcy5fY2hhdE1hbmFnZXIgPSBmYWN0b3J5LmNyZWF0ZUNoYXRNYW5hZ2VyKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnLCB0aGlzLl9zeW5jaGVyKTtcbiAgICB0aGlzLl9jb250ZXh0UmVwb3J0ZXIgPSBmYWN0b3J5LmNyZWF0ZUNvbnRleHRSZXBvcnRlcihydW50aW1lUHJvdG9TdHViVVJMLCBidXMsIGNvbmZpZywgdGhpcy5fc3luY2hlcik7XG5cbiAgICB0aGlzLl9teVVybCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7XG4gICAgdGhpcy5fYnVzID0gYnVzO1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcblxuICAgIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gY29uZmlnLnJ1bnRpbWVVUkw7XG4gICAgdGhpcy5fcmVPcGVuID0gZmFsc2U7XG4gICAgdGhpcy5fY2hhdE1hbmFnZXIub25JbnZpdGF0aW9uKChldmVudCkgPT4ge1xuICAgICAgX3RoaXMuX29uU2xhY2tJbnZpdGF0aW9uKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX25vdGlmaWNhdGlvbkhhbmRsZXIgPSBmYWN0b3J5LmNyZWF0ZU5vdGlmaWNhdGlvbkhhbmRsZXIoYnVzKTtcblxuICAgIHRoaXMuX25vdGlmaWNhdGlvbkhhbmRsZXIub25Ob3RpZmljYXRpb24oJ2NvbW0nLCAoZXZlbnQpID0+IHtcbiAgICAgIF90aGlzLl9jaGF0TWFuYWdlci5wcm9jZXNzTm90aWZpY2F0aW9uKGV2ZW50KTtcbiAgICB9KTtcblxuICAgIGJ1cy5hZGRMaXN0ZW5lcignKicsIChtc2cpID0+IHtcbiAgICAgIC8vaWdub3JlIG1zZyBzZW50IGJ5IGhpbXNlbGZcbiAgICAgIGlmIChtc2cuZnJvbSAhPT0gcnVudGltZVByb3RvU3R1YlVSTCkge1xuICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBuZXcgbXNnICcsIG1zZyk7XG4gICAgICAgIHN3aXRjaCAobXNnLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjcmVhdGUnOiBfdGhpcy5fbm90aWZpY2F0aW9uSGFuZGxlci5vbkNyZWF0ZShtc2cpOyBicmVhaztcbiAgICAgICAgICBjYXNlICdkZWxldGUnOiBfdGhpcy5fbm90aWZpY2F0aW9uSGFuZGxlci5vbkRlbGV0ZShtc2cpOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2NyZWF0ZWQnKTtcblxuICB9XG5cbiAgZ2V0IGNvbmZpZygpIHsgcmV0dXJuIHRoaXMuX2NvbmZpZzsgfVxuXG4gIGdldCBydW50aW1lU2Vzc2lvbigpIHsgcmV0dXJuIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMOyB9XG5cbiAgX2ZpbHRlcihtc2cpIHtcbiAgICBpZiAobXNnLnZpYSA9PT0gdGhpcy5fbXlVcmwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICogSXQgT3BlbiBhIG5ldyBTZXNzaW9uIHVzaW5nIHJlY2VpdmVkIHRva2VuIGNvbm5lY3QgdG8gYSB3ZWJTb2NrZXQgVXJsLFxuICAqICB3aGVyZSBoYW5kbGUgYWxsIHJlY2VpdmVkIG1lc3NhZ2VzIG9uIHRoaXMgc29ja2V0XG4gICogQHBhcmFtIHtzdHJpbmd9IHRva2VuIC0gbWVzc2FnZSB3aXRoIGEgbmV3IHVzZXIgYWRkZWRcbiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgX29wZW4odG9rZW4sIGNhbGxiYWNrKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGlmICghX3RoaXMuX3Nlc3Npb24pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIGNyZWF0aW5nIFNlc3Npb24gZm9yIHRva2VuOicsIHRva2VuKTtcbiAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdpbi1wcm9ncmVzcycpO1xuXG4gICAgICBfdGhpcy5fc2Vzc2lvbiA9IHRoaXMuX3NsYWNrLnJ0bS5jb25uZWN0KHt0b2tlbjogdG9rZW4sIGJhdGNoX3ByZXNlbmNlX2F3YXJlOiAxLCBwcmVzZW5jZV9zdWI6IHRydWV9KTtcbiAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHNlc3Npb24nLCBfdGhpcy5fc2Vzc2lvbik7XG4gICAgICBfdGhpcy5fc2Vzc2lvbi5jcmVhdGVkVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDtcblxuICAgICAgX3RoaXMuX3Nlc3Npb24udGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gU2Vzc2lvbiByZXN1bHQnLCByZXN1bHQpO1xuICAgICAgICBpZiAocmVzdWx0Lm9rKSB7XG4gICAgICAgICAgX3RoaXMuX3dzID0gbmV3IFdlYlNvY2tldChyZXN1bHQudXJsKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSB3ZWJzb2NrZXQnLCBfdGhpcy5fd3MpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHdlYnNvY2tldCB1cmwgJywgX3RoaXMuX3dzLnVybCk7XG5cblxuICAgICAgICAgIF90aGlzLl93cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGxldCBtc2cgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gbmV3IG1zZyBvbiB3ZWJTb2NrZXQnLCBtc2cpO1xuXG4gICAgICAgICAgICBpZiAobXNnLnR5cGUgPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgIF90aGlzLl9oYW5kbGVOZXdNZXNzYWdlKG1zZyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1zZy50eXBlID09ICdwcmVzZW5jZV9jaGFuZ2UnKSB7XG4gICAgICAgICAgICAgIF90aGlzLl9oYW5kbGVQcmVzZW5jZUNoYW5nZShtc2cpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtc2cudHlwZSA9PSAnbWVtYmVyX2pvaW5lZF9jaGFubmVsJykge1xuICAgICAgICAgICAgICBfdGhpcy5faGFuZGxlTmV3VXNlcihtc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgX3RoaXMuX3dzLm9uZXJyb3IgPSBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSB3ZWJzb2NrZXIgRXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdsaXZlJyk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gc2Vzc2lvbiBhbHJlYWR5IGV4aXN0Jyk7XG4gICAgfVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge2NhbGxiYWNrKCk7fSk7XG4gIH1cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgKiBJdCBSZXN1bWVzIGFsbCByZXBvcnRlcnMgaW5jbHVkaW5nIGNvbnRleHRyZXBvcnRlcnNcbiAgKiBAcGFyYW0ge3N0cmluZ30gcmVwb3J0ZXJVUkwgLSBtZXNzYWdlIHdpdGggYSBuZXcgdXNlciBhZGRlZFxuICAqIEByZXR1cm4ge1Byb21pc2U8T2JqZWN0Pn0gUmV0dXJucyBhIHByb21pc2Ugd2l0aCBhIHJlcG9ydGVyIERhdGFPYmplY3RcbiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgX3Jlc3VtZVJlcG9ydGVyKHJlcG9ydGVyVVJMKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3QpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHJlc3VtaW5nIHJlcG9ydGVyIG9mICcsIHJlcG9ydGVyVVJMKTtcbiAgICAgIF90aGlzLl9zeW5jaGVyLnJlc3VtZVJlcG9ydGVycyh7c3RvcmU6IHRydWUsIHJlcG9ydGVyOiByZXBvcnRlclVSTH0pLnRoZW4oKHJlcG9ydGVycykgPT4ge1xuICAgICAgICBsZXQgZGF0YU9iamVjdFJlcG9ydGVyO1xuICAgICAgICBsZXQgcmVwb3J0ZXJzTGlzdCA9IE9iamVjdC5rZXlzKHJlcG9ydGVycyk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gJywgcmVwb3J0ZXJzLCByZXBvcnRlcnNMaXN0KTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXBvcnRlcnNMaXN0LmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYocmVwb3J0ZXJzW2tleV0uX25hbWUgPT09IHJlcG9ydGVyVVJMICYmIGtleS5zdGFydHNXaXRoKCdjb250ZXh0Oi8vJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHJlcG9ydGVyIHRvIHJldHVybicsIHJlcG9ydGVyc1trZXldKTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlcG9ydGVyc1trZXldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSk7XG4gICAgICB9KTtcbiAgICB9KVxuXG4gIH1cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgKiBJdCBpcyBjYWxsZWQgd2hlbiBhIGV2ZW50IG9jdXJyZWQgcmVsYXRlZCB3aXRoIGEgaW52aXRhdGlvbiBvZiBhIHNsYWNrIFVzZXJcbiAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgLSBPYmplY3QgZXZlbnRcbiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgX29uU2xhY2tJbnZpdGF0aW9uKGV2ZW50KSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGlmIChldmVudC5pZGVudGl0eS5oYXNPd25Qcm9wZXJ0eSgnYWNjZXNzVG9rZW4nKSAmJiBldmVudC5pZGVudGl0eS5hY2Nlc3NUb2tlbikge1xuXG4gICAgICB0aGlzLl90b2tlbiA9IGV2ZW50LmlkZW50aXR5LmFjY2Vzc1Rva2VuO1xuXG4gICAgICBfdGhpcy5fb3Blbih0aGlzLl90b2tlbiwgKCk9PiB7XG4gICAgICAgIGlmIChfdGhpcy5fZmlsdGVyKGV2ZW50KSkge1xuXG4gICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gQWZ0ZXIgRmlsdGVyJywgZXZlbnQpO1xuXG4gICAgICAgICAgbGV0IHNjaGVtYVVybCA9IGV2ZW50LnNjaGVtYTtcbiAgICAgICAgICBpZiAoZXZlbnQudmFsdWUubmFtZSkge1xuXG4gICAgICAgICAgICBsZXQgc2NoZW1hU3BsaXR0ZWQgPSAgc2NoZW1hVXJsLnNwbGl0KCcvJyk7XG5cbiAgICAgICAgICAgIGlmIChzY2hlbWFTcGxpdHRlZFtzY2hlbWFTcGxpdHRlZC5sZW5ndGggLSAxXSA9PT0gJ0NvbW11bmljYXRpb24nKSB7XG5cbiAgICAgICAgICAgICAgX3RoaXMuX2dldFNsYWNrSW5mb3JtYXRpb24oZXZlbnQudG8sIGV2ZW50LmlkZW50aXR5LmlucHV0LnVzZXJfaWQpLnRoZW4oKGluZm9SZXR1cm5lZCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgbGV0IHVzZXJJbmZvID0gaW5mb1JldHVybmVkLm93bkluZm87XG4gICAgICAgICAgICAgICAgbGV0IHRvSW52SW5mbyA9IGluZm9SZXR1cm5lZC5pbnZJbmZvO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTbGFjayBVc2VyIGluZm9ybWF0aW9uOiAnLCBpbmZvUmV0dXJuZWQsIGV2ZW50KTtcblxuICAgICAgICAgICAgICAgIC8vIHVzZXJuYW1lLCB1c2VyVVJMLCBhdmF0YXIsIGNuLCBsb2NhbGUsIGlkcCwgYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgbGV0IGlkZW50aXR5ID0gX3RoaXMuX2ZhY3RvcnkuY3JlYXRlTWVzc2FnZUJvZHlJZGVudGl0eShcbiAgICAgICAgICAgICAgICAgIHVzZXJJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgICAnc2xhY2s6Ly9zbGFjay5jb20vJyArIHVzZXJJbmZvLm5hbWUgKyAnQHNsYWNrLmNvbScsXG4gICAgICAgICAgICAgICAgICB1c2VySW5mby5wcm9maWxlLmltYWdlXzE5MixcbiAgICAgICAgICAgICAgICAgIHVzZXJJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgICAnJywgJ3NsYWNrLmNvbScsIHVuZGVmaW5lZCwgdXNlckluZm8ucHJvZmlsZSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgaWRlbnRpdHlUb0ludiA9IF90aGlzLl9mYWN0b3J5LmNyZWF0ZU1lc3NhZ2VCb2R5SWRlbnRpdHkoXG4gICAgICAgICAgICAgICAgICB0b0ludkluZm8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICdzbGFjazovL3NsYWNrLmNvbS8nICsgdG9JbnZJbmZvLm5hbWUgKyAnQHNsYWNrLmNvbScsXG4gICAgICAgICAgICAgICAgICB0b0ludkluZm8ucHJvZmlsZS5pbWFnZV8xOTIsXG4gICAgICAgICAgICAgICAgICB0b0ludkluZm8ubmFtZSxcbiAgICAgICAgICAgICAgICAgICcnLCAnc2xhY2suY29tJywgdW5kZWZpbmVkLCB0b0ludkluZm8ucHJvZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgIGV2ZW50LmFjaygyMDApO1xuXG5cbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHN1YnNjcmliaW5nIG9iamVjdCcsIGV2ZW50LnVybCwgaWRlbnRpdHkpO1xuXG4gICAgICAgICAgICAgICAgICBsZXQgbmVlZGVkSW5mb0ludml0ZWQgPSB7IGlkOiB0b0ludkluZm8uaWQsIG5hbWU6IHRvSW52SW5mby5uYW1lLCB1c2VyVVJMOiBpZGVudGl0eVRvSW52LnVzZXJQcm9maWxlLnVzZXJVUkwsIGlkZW50aXR5OiBpZGVudGl0eVRvSW52fVxuICAgICAgICAgICAgICAgICAgbGV0IG5lZWRlZE93bkluZm8gPSB7IGlkOiBldmVudC5pZGVudGl0eS5pbnB1dC51c2VyX2lkLCB1c2VyVVJMOiBpZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoISBfdGhpcy5fYWxyZWFkeUNyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gTm90IEFscmVhZHkgY3JlYXRlZCcsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2FscmVhZHlDcmVhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy9fdGhpcy5fc2NoZW1hVVJMID0gZXZlbnQuc2NoZW1hO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyVVJMID0gZXZlbnQudXJsO1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCB1c2VyVG9BZGQgPSB7IHVzZXIgOiAnc2xhY2s6Ly8nK3VzZXJJbmZvLm5hbWUrJ0BzbGFjay5jb20nLCBkb21haW46ICdzbGFjay5jb20nLCBpZDogZXZlbnQuaWRlbnRpdHkuaW5wdXQudXNlcl9pZCwgdXNlclVSTDogJ3NsYWNrOi8vc2xhY2suY29tLycrdXNlckluZm8ubmFtZSsnQHNsYWNrLmNvbScsIGlkZW50aXR5OiBpZGVudGl0eX07XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9hZGRlZFVzZXJzSW5mby5wdXNoKHVzZXJUb0FkZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NyZWF0ZU5ld0NvbnRleHRSZXBvcnRlcihpZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMKS50aGVuKGZ1bmN0aW9uKGNyZWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy9kZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoY3JlYXRpb24gPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYXRNYW5hZ2VyLmpvaW4oZXZlbnQudXJsLCBmYWxzZSwgaWRlbnRpdHkpLnRoZW4oKGNoYXRDb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9wcmVwYXJlQ2hhdChjaGF0Q29udHJvbGxlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtc2dRdWVyeSA9IHsgXCJ0eXBlXCI6IFwicHJlc2VuY2Vfc3ViXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRzXCI6IF90aGlzLl90b1N1YnNjcmliZVByZXNlbmNlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHdlYnNvY2tldCBzZW50bWVzc2FnZScsIF90aGlzLl93cy5yZWFkeVN0YXRlLCBtc2dRdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl93cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZ1F1ZXJ5KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vX3RoaXMuX2NyZWF0ZU5ld0NvbnRleHRSZXBvcnRlcihpZGVudGl0eS51c2VyUHJvZmlsZS51c2VyVVJMKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3Vic2NyaXB0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybERhdGFPYmo6IGV2ZW50LnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlbWE6IGV2ZW50LnNjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkZW50aXR5OiBpZGVudGl0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGF0OiBjaGF0Q29udHJvbGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHN1YnNjcmliZWQgbGlzdCcsIF90aGlzLl9zdWJzY3JpYmVkTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5pZGVudGl0eS5pbnB1dC51c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2lkID0gZXZlbnQuaWRlbnRpdHkuaW5wdXQudXNlcl9pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgLy9fdGhpcy5fY2hhbm5lbFN0YXR1c0luZm8oZXZlbnQsIHRvSW52SW5mby5pZCwgZXZlbnQudXJsLCB0b0ludkluZm8ubmFtZSwgaWRlbnRpdHlUb0ludi51c2VyUHJvZmlsZS51c2VyVVJMLCBldmVudC51cmwsIGlkZW50aXR5VG9JbnYsIGlkZW50aXR5LnVzZXJQcm9maWxlLnVzZXJVUkwsIGV2ZW50LmlkZW50aXR5LmlucHV0LnVzZXJfaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fY2hhbm5lbFN0YXR1c0luZm8oZXZlbnQsIG5lZWRlZEluZm9JbnZpdGVkLCBuZWVkZWRPd25JbmZvKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gQWxyZWFkeSBjcmVhdGVkJywgZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5fc3Vic2NyaWJlZExpc3QubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBfdGhpcy5fc3Vic2NyaWJlZExpc3QubGVuZ3RoICE9IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NoYW5uZWxTdGF0dXNJbmZvKGV2ZW50LCBuZWVkZWRJbmZvSW52aXRlZCwgbmVlZGVkT3duSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgbGV0IHRlc3RVUkwgPSBldmVudC50by5zcGxpdCgnLy8nKVswXSArICcvL3NsYWNrLmNvbS8nICsgZXZlbnQudG8uc3BsaXQoJy8vJylbMV1cbiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fY3JlYXRlTmV3Q29udGV4dFJlcG9ydGVyKHRlc3RVUkwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgZXZlbnQuZXJyb3IoJ0ludmFsaWQgU2NoZW1lOiAnICsgc2NoZW1hU3BsaXR0ZWRbc2NoZW1hU3BsaXR0ZWQubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgIH0gZWxzZSBldmVudC5lcnJvcignQ2hhdCBOYW1lIE1pc3NpbmcnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGV2ZW50LmVycm9yKCdBY2Nlc3MgVG9rZW4gTWlzc2luZycpO1xuICB9XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICogSXQgY3JlYXRlcyBhIG5ldyBjb250ZXh0UmVwb3J0ZXIgd2l0aCB1c2VyVVJMXG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXJVUkwgLSB1c2VyVVJMIG9mIHVzZXIgdG8gY3JlYXRlIGEgbmV3IENvbnRleHRSZXBvcnRlclxuICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBfY3JlYXRlTmV3Q29udGV4dFJlcG9ydGVyKHVzZXJVUkwpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIF90aGlzLl9yZXN1bWVSZXBvcnRlcih1c2VyVVJMKS50aGVuKGZ1bmN0aW9uKHJlcG9ydGVyUmVzdW1lZCkge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIFRFU1QgY3JlYXRpbmcgcmVwb3J0ZXIgZm9yJywgdXNlclVSTCk7XG4gICAgICAgIF90aGlzLl9hZGRlZFVzZXJzSW5mby5mb3JFYWNoKGZ1bmN0aW9uKGN1cnJlbnRVc2VyKSB7XG5cbiAgICAgICAgICBpZihjdXJyZW50VXNlci51c2VyVVJMID09IHVzZXJVUkwgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBURVNUIGdldCBwcmVzZW5zZSBmb3IgJywgY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgbGV0IHRvR2V0UHJlc2VuY2UgPSB7IHRva2VuOiBfdGhpcy5fdG9rZW4sIHVzZXI6IGN1cnJlbnRVc2VyLmlkIH07XG5cbiAgICAgICAgICAgIF90aGlzLl9zbGFjay51c2Vycy5nZXRQcmVzZW5jZSh0b0dldFByZXNlbmNlLCAoZXJyLCBkYXRhKSA9PiB7XG5cbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTbGFja1Byb3Rvc3R1Yl0gZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBQUkVTRU5DRSBPRiBVU0VSJywgY3VycmVudFVzZXIsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLm9rKSB7XG4gICAgICAgICAgICAgICAgICBfdGhpcy5fdG9TdWJzY3JpYmVQcmVzZW5jZS5wdXNoKGN1cnJlbnRVc2VyLmlkKTtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHRvU3Vic2NyaWJlQXJyYXknLCBfdGhpcy5fdG9TdWJzY3JpYmVQcmVzZW5jZSwgJ2ludGV4dCcsIEpTT04uc3RyaW5naWZ5KF90aGlzLl90b1N1YnNjcmliZVByZXNlbmNlKSk7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSByZXN1bWVkIG9iaicsIHJlcG9ydGVyUmVzdW1lZCk7XG4gICAgICAgICAgICAgICAgICBpZiAoIXJlcG9ydGVyUmVzdW1lZCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb2JqUHJlc2VuY2UgPSBfdGhpcy5fY3JlYXRlTmV3T2JqUHJlc2VuY2UoZGF0YS5wcmVzZW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIGNyZWF0aW5nIGEgbmV3IGNvbnRleHRSZXBvcnRlciBmb3IgaW52aXRlZFVTRVIgJywgb2JqUHJlc2VuY2UsIGN1cnJlbnRVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgLy9kZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NvbnRleHRSZXBvcnRlci5jcmVhdGUoY3VycmVudFVzZXIudXNlclVSTCwgb2JqUHJlc2VuY2UsIFsnYXZhaWxhYmlsaXR5X2NvbnRleHQnXSwgY3VycmVudFVzZXIudXNlclVSTCwgY3VycmVudFVzZXIudXNlclVSTCkudGhlbihmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gQ09OVEVYVCBSRVRVUk5FRCcsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQub25TdWJzY3JpcHRpb24oZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmFjY2VwdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gbmV3IHN1YnMnLCBldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NvbnRleHRSZXBvcnRlcnNJbmZvW2N1cnJlbnRVc2VyLmlkXSA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTbGFja1Byb3Rvc3R1Yl0gZXJyJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSByZXBvcnRlciBmb3IgdGhpcyB1c2VyVVJMOicsIHVzZXJVUkwsICcgYWxyZWFkeSBleGlzdHMgJywgcmVwb3J0ZXJSZXN1bWVkKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2NvbnRleHRSZXBvcnRlcnNJbmZvW2N1cnJlbnRVc2VyLmlkXSA9IHJlcG9ydGVyUmVzdW1lZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHdlYnNvY2tldCByZWFkeVN0YXRlJywgX3RoaXMuX3dzLnJlYWR5U3RhdGUpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KS5jYXRjaCggZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICogSXQgcmV0dXJucyBhIGRhdGFvYmplY3Qgd2l0aCBpbmZvIG9mIGEgc2xhY2sgVXNlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBpbmZvIC0gc3RhdHVzIGluZm8gb2YgYSBzbGFja1VzZXJcbiAgKiBAcmV0dXJuIHtvYmplY3R9IHJldHVybiBhIG9iamVjdCByZWxhdGVkIHdpdGggaW5mbyBvZiBhIHNsYWNrVXNlclxuICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBfY3JlYXRlTmV3T2JqUHJlc2VuY2UoaW5mbykge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICBpZDogJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpLC8vIGRvIHdlIG5lZWQgdGhpcz9cbiAgICAgICAgdmFsdWVzOiBbe1xuICAgICAgICAgICAgdmFsdWU6IF90aGlzLl9nZXRQcmVzZW5jZShpbmZvKSxcbiAgICAgICAgICAgIG5hbWU6ICdhdmFpbGFiaWxpdHknLFxuICAgICAgICAgICAgdHlwZTogJ2F2YWlsYWJpbGl0eV9zdGF0dXMnLFxuICAgICAgICAgICAgdW5pdDogJ3ByZXMnXG4gICAgICAgIH1dXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICogSXQgcmV0dXJucyBhIHN0cmluZyB3aXRoIGluZm8gcmVsYXRlZCB3aXRoIHByZXNlbmNlIG9mIGEgdXNlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBpbmZvIC0gc3RhdHVzIGluZm8gb2YgYSBzbGFja1VzZXJcbiAgKiBAcmV0dXJuIHtzdHJpbmd9IHJldHVybiBpbmZvIG9mIHByZXNlbmNlIG9mIGEgc2xhY2sgdXNlclxuICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBfZ2V0UHJlc2VuY2UoaW5mbykge1xuICAgIGxldCBzdGF0dXM7XG5cbiAgICBpZiAoaW5mbyA9PT0gXCJhY3RpdmVcIikge1xuICAgICAgcmV0dXJuICdhdmFpbGFibGUnO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAndW5hdmFpbGFibGUnO1xuICAgIH1cbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIEl0IGdldCBzb21lIGluZm8gYWJvdXQgY2hhbm5lbHMsIHVzZXJzLCBhbmQgZ3JvdXBzIG9mIHNsYWNrIHVzaW5nIHRva2VuIGFuZCByZXR1cm5zIGluZm9cbiAgKiBvZiB3aG8gaW52aXRlIGFuZCB3aG8gd2FzIGludml0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gdG8gLSBzdGF0dXMgaW5mbyBvZiBhIHNsYWNrVXNlclxuICAqIEBwYXJhbSB7c3RyaW5nfSBvd25JRCAtIHN0YXR1cyBpbmZvIG9mIGEgc2xhY2tVc2VyXG4gICogQHJldHVybiB7b2JqZWN0fSByZXR1cm4gb2JqZWN0IHdpdGggaW5mbyBvZiB3aG8gaW52aXRlIGFuZCB3aG8gd2FzIGludml0ZWRcbiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgX2dldFNsYWNrSW5mb3JtYXRpb24odG8sIG93bklEKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cbiAgICAgIGxldCBVUkxVc2Vyc0xpc3QgPSAnaHR0cHM6Ly9zbGFjay5jb20vYXBpL3VzZXJzLmxpc3Q/dG9rZW49JyArIF90aGlzLl90b2tlbjtcbiAgICAgIC8vbGV0IFVSTEdyb3Vwc0xpc3QgPSAnaHR0cHM6Ly9zbGFjay5jb20vYXBpL2dyb3Vwcy5saXN0P3Rva2VuPScgKyBfdGhpcy5fdG9rZW47XG4gICAgICBsZXQgVVJMQ2hhbm5lbHNMaXN0ID0gJ2h0dHBzOi8vc2xhY2suY29tL2FwaS9jaGFubmVscy5saXN0P3Rva2VuPScgKyBfdGhpcy5fdG9rZW47XG4gICAgICAvL2xldCBVUkxJbXNMaXN0ID0gJ2h0dHBzOi8vc2xhY2suY29tL2FwaS9pbS5saXN0P3Rva2VuPScgKyBfdGhpcy5fdG9rZW47XG5cbiAgICAgIGxldCBVc2Vyc0xpc3RQcm9taXNlID0gX3RoaXMuX3NlbmRIVFRQUmVxdWVzdCgnR0VUJywgVVJMVXNlcnNMaXN0KTtcbiAgICAgIC8vbGV0IEdyb3Vwc0xpc3RQcm9taXNlID0gX3RoaXMuX3NlbmRIVFRQUmVxdWVzdCgnR0VUJywgVVJMR3JvdXBzTGlzdCk7XG4gICAgICBsZXQgQ2hhbm5lbHNMaXN0UHJvbWlzZSA9IF90aGlzLl9zZW5kSFRUUFJlcXVlc3QoJ0dFVCcsIFVSTENoYW5uZWxzTGlzdCk7XG4gICAgICAvL2xldCBJbXNMaXN0UHJvbWlzZSA9IF90aGlzLl9zZW5kSFRUUFJlcXVlc3QoJ0dFVCcsIFVSTEltc0xpc3QpO1xuXG4gICAgICBQcm9taXNlLmFsbChbVXNlcnNMaXN0UHJvbWlzZSwgQ2hhbm5lbHNMaXN0UHJvbWlzZV0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAvL1Byb21pc2UuYWxsKFtVc2Vyc0xpc3RQcm9taXNlLCBHcm91cHNMaXN0UHJvbWlzZSwgQ2hhbm5lbHNMaXN0UHJvbWlzZSwgSW1zTGlzdFByb21pc2VdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICBfdGhpcy5fdXNlcnNMaXN0ID0gcmVzdWx0WzBdLm1lbWJlcnM7XG4gICAgICAgIC8vX3RoaXMuX2dyb3Vwc0xpc3QgPSByZXN1bHRbMV0uZ3JvdXBzO1xuICAgICAgICBfdGhpcy5fY2hhbm5lbHNMaXN0ID0gcmVzdWx0WzFdLmNoYW5uZWxzO1xuICAgICAgICAvL190aGlzLl9pbXNMaXN0ID0gcmVzdWx0WzJdLmltcztcblxuICAgICAgICAvL2dldCB1c2VySUQgdG8gaW52aXRlXG4gICAgICAgIGxldCB0b1NwbGl0dGVkID0gdG8uc3BsaXQoJzovLycpWzFdO1xuICAgICAgICBsZXQgdXNlciA9IHRvU3BsaXR0ZWQuc3BsaXQoJ0AnKVswXTtcbiAgICAgICAgbGV0IGludkluZm8gPSBfdGhpcy5fdXNlcnNMaXN0LmZpbHRlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZS5uYW1lID09PSB1c2VyO1xuICAgICAgICB9KVswXTtcbiAgICAgICAgbGV0IG93bkluZm8gPSBfdGhpcy5fdXNlcnNMaXN0LmZpbHRlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZS5pZCA9PT0gb3duSUQ7XG4gICAgICAgIH0pWzBdO1xuICAgICAgICBsZXQgaW5mb3RvUmV0dXJuID0ge2ludkluZm86IGludkluZm8sIG93bkluZm86b3duSW5mb31cblxuICAgICAgICByZXNvbHZlKGluZm90b1JldHVybik7XG5cbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTbGFja1Byb3Rvc3R1Yl0gJywgZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgKiBJdCBjaGVjayBpZiBjaGFubmVsZXhpc3QsIGlmIHVzZXIgaXMgb24gY2hhbm5lbCBhbmQgY2hlY2sgd2hpY2ggdXNlcnMgbmVlZCB0byBiZSBpbnZpdGVkXG4gICogQHBhcmFtIHtzdHJpbmd9IG1zZyAtIG1lc3NhZ2UgcmVsYXRlZCB3aXRoIGV2ZW50IHJlY2VpdmVkXG4gICogQHBhcmFtIHtPYmplY3R9IG5lZWRlZEluZm9JbnZpdGVkIC0gaW5mbyBhYm91dCB1c2VyIHRvIGJlIGludml0ZWRcbiAgKiBAcGFyYW0ge09iamVjdH0gbmVlZGVkT3duSW5mbyAtIGluZm8gYWJvdXQgdXNlciBvd24gaW5mb1xuICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBfY2hhbm5lbFN0YXR1c0luZm8obXNnLCBuZWVkZWRJbmZvSW52aXRlZCwgbmVlZGVkT3duSW5mbykge1xuICAgIC8vX2NoYW5uZWxTdGF0dXNJbmZvKG1zZywgdXNlcklELCBjaGFubmVsT2JqVXJsLCB1c2VyTmFtZSwgdXNlclVSTCwgZXZlbnRVUkwsIGlkZW50aXR5VG9JbnYsIG93blVzZXJVUkwsIG93blVzZXJJRCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgbGV0IGNoYW5uZWxOYW1lID0gbXNnLnZhbHVlLm5hbWUuc3BsaXQoJyAnKS5qb2luKCctJykucmVwbGFjZSgvXFwvL2dpLCAnLScpO1xuICAgIGxldCBjaGFubmVsRXhpc3RzID0gX3RoaXMuX2NoYW5uZWxzTGlzdC5maWx0ZXIoZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlLm5hbWUgPT09IGNoYW5uZWxOYW1lOyB9KVswXTtcbiAgICBsZXQgY2hhbm5lbE1lbWJlcnMgPSBudWxsO1xuICAgIC8vIGlmIGNoYW5uZWwgZXhpc3QsIGludml0ZSB1c2VyLCBlbHNlIGNoYW5uZWwgbmVlZCB0byBiZSBjcmVhdGVkIGFuZCB0aGVuIGludml0ZSB1c2VyXG4gICAgaWYgKGNoYW5uZWxFeGlzdHMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIGNoYW5uZWwgZXhpc3QnLCBjaGFubmVsRXhpc3RzKTtcbiAgICAgIGNoYW5uZWxNZW1iZXJzID0gX3RoaXMuX2NoYW5uZWxzTGlzdC5maWx0ZXIoZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlLm5hbWUgPT09IGNoYW5uZWxOYW1lOyB9KVswXS5tZW1iZXJzO1xuXG4gICAgICBsZXQgYWxyZWFkeU9uQ2hhbm5lbCA9IGZhbHNlO1xuXG4gICAgICBjaGFubmVsTWVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgaWYgKHMgPT09IG5lZWRlZEluZm9JbnZpdGVkLmlkKSB7XG4gICAgICAgICAgYWxyZWFkeU9uQ2hhbm5lbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gY2hhbm5lbCBtZW1iZXJzJywgY2hhbm5lbE1lbWJlcnMsICcgICAtPicsIGFscmVhZHlPbkNoYW5uZWwpO1xuXG5cbiAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICBsZXQga2V5ID0gMDtcbiAgICAgIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICBpZiAob2JqLnVybERhdGFPYmogPT09IG1zZy51cmwgKSB7XG4gICAgICAgICAga2V5ID0gY291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgY291bnQrKztcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gY2hhbm5lbHMnLCBfdGhpcy5fc3Vic2NyaWJlZExpc3QsIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5sZW5ndGgsIGtleSk7XG4gICAgICBfdGhpcy5fc3Vic2NyaWJlZExpc3Rba2V5XS5jaGFubmVsSUQgPSBjaGFubmVsRXhpc3RzLmlkO1xuICAgICAgLy9kZWJ1Z2dlcjtcbiAgICAgIC8vIGlmIHVzZXIgaXNudCBvbiBDaGFubmVsIGludml0ZSwgZWxzZSBqdXN0IHNldCBjaGFubmVsSURcbiAgICAgIGlmICghYWxyZWFkeU9uQ2hhbm5lbCkge1xuICAgICAgICBfdGhpcy5faW52aXRlKG5lZWRlZEluZm9JbnZpdGVkLmlkLCBjaGFubmVsRXhpc3RzLmlkKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICBfdGhpcy5fY3JlYXRlQ2hhbm5lbChjaGFubmVsTmFtZSwgbXNnLnVybCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gIGFmdGVyIGNyZWF0ZSBjaGFubmVsICcsIHJlc3VsdCApO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgX3RoaXMuX2ludml0ZShuZWVkZWRJbmZvSW52aXRlZC5pZCwnJyxtc2cudXJsKTtcbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICB9XG4gICAgICBpZiAoISBfdGhpcy5fdXNlcnNVcGRhdGVkKSB7XG4gICAgICBfdGhpcy5fYWRkQWxsVXNlcnNUb0h5cGVydHkoY2hhbm5lbE1lbWJlcnMsIG5lZWRlZEluZm9JbnZpdGVkLCBuZWVkZWRPd25JbmZvKTtcbiAgICAgIC8vX3RoaXMuX2FkZEFsbFVzZXJzVG9IeXBlcnR5KGNoYW5uZWxNZW1iZXJzLHVzZXJJRCwgdXNlclVSTCwgZXZlbnRVUkwsIHVzZXJOYW1lLCBpZGVudGl0eVRvSW52LCBvd25Vc2VyVVJMLCBvd25Vc2VySUQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSB1c2VycyBBbHJlYWR5IFVwZGF0ZWQnKTtcbiAgICB9XG5cbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIEl0IGFkZCBhbGwgdXNlcnMgdG8gZGF0YW9iamVjdCBhbmQgIGNyZWF0ZSBjb250ZXh0UmVwb3J0ZXJzIGZvciBlYWNoIG9uZVxuICAqIEBwYXJhbSB7T2JqZWN0W119IGNoYW5uZWxNZW1iZXJzIC0gTGlzdCBvZiBjaGFubmVsIE1lbWJlcnNcbiAgKiBAcGFyYW0ge09iamVjdH0gbmVlZGVkSW5mb0ludml0ZWQgLSBpbmZvIGFib3V0IHVzZXIgdG8gYmUgaW52aXRlZFxuICAqIEBwYXJhbSB7T2JqZWN0fSBuZWVkZWRPd25JbmZvIC0gaW5mbyBhYm91dCB1c2VyIG93biBpbmZvXG4gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIF9hZGRBbGxVc2Vyc1RvSHlwZXJ0eShjaGFubmVsTWVtYmVycywgbmVlZGVkSW5mb0ludml0ZWQsIG5lZWRlZE93bkluZm8pIHtcbiAgICAvL19hZGRBbGxVc2Vyc1RvSHlwZXJ0eShjaGFubmVsTWVtYmVycywgdXNlcklELCB1c2VyVVJMLCBldmVudFVSTCwgdXNlck5hbWUsIGlkZW50aXR5VG9JbnYsIG93blVzZXJVUkwsIG93blVzZXJJRCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgX3RoaXMuX3VzZXJzVXBkYXRlZCA9IHRydWU7XG4gICAgbGV0IHVzZXJzSW5mbyA9IHt9O1xuICAgIGxldCB0b0FERCA9IFtdO1xuICAgIGxldCB1c2VyVG9BZGQ7XG4gICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gbGV0cyBjaGVjayBpZiB1c2VycyBuZWVkcyB0byBiZSBhZGRlZCcpO1xuICAgIGlmIChjaGFubmVsTWVtYmVycykge1xuICAgICAgX3RoaXMuX3VzZXJzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGN1cnJlbnRVc2VyKSB7XG4gICAgICAgIGNoYW5uZWxNZW1iZXJzLmZvckVhY2goZnVuY3Rpb24ocykge1xuICAgICAgICAgIC8vY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gY3VycmVudFVzZXInLCBjdXJyZW50VXNlcik7XG4gICAgICAgICAgaWYgKHMgPT09IGN1cnJlbnRVc2VyLmlkKSB7XG5cbiAgICAgICAgICAgIGlmIChuZWVkZWRJbmZvSW52aXRlZC5pZCAhPSBjdXJyZW50VXNlci5pZCAmJiBuZWVkZWRPd25JbmZvLmlkICE9IGN1cnJlbnRVc2VyLmlkKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHRvIGFkZCAnLCBjdXJyZW50VXNlci5pZCk7XG4gICAgICAgICAgICAgIGxldCBpZGVudGl0eSA9IF90aGlzLl9mYWN0b3J5LmNyZWF0ZU1lc3NhZ2VCb2R5SWRlbnRpdHkoXG4gICAgICAgICAgICAgICAgY3VycmVudFVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICAnc2xhY2s6Ly9zbGFjay5jb20vJyArIGN1cnJlbnRVc2VyLm5hbWUgKyAnQHNsYWNrLmNvbScsXG4gICAgICAgICAgICAgICAgY3VycmVudFVzZXIucHJvZmlsZS5pbWFnZV8xOTIsXG4gICAgICAgICAgICAgICAgY3VycmVudFVzZXIubmFtZSxcbiAgICAgICAgICAgICAgICAnJywgJ3NsYWNrLmNvbScsIHVuZGVmaW5lZCwgY3VycmVudFVzZXIucHJvZmlsZSk7XG5cbiAgICAgICAgICAgICAgdXNlclRvQWRkID0geyB1c2VyIDogJ3NsYWNrOi8vJytjdXJyZW50VXNlci5uYW1lKydAc2xhY2suY29tJywgZG9tYWluOiAnc2xhY2suY29tJywgaWQ6IGN1cnJlbnRVc2VyLmlkLCB1c2VyVVJMOiAnc2xhY2s6Ly9zbGFjay5jb20vJytjdXJyZW50VXNlci5uYW1lKydAc2xhY2suY29tJywgaWRlbnRpdHk6IGlkZW50aXR5fTtcbiAgICAgICAgICAgICAgX3RoaXMuX2FkZGVkVXNlcnNJbmZvLnB1c2godXNlclRvQWRkKTtcblxuICAgICAgICAgICAgICB0b0FERC5wdXNoKHVzZXJUb0FkZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHVzZXJUb0FkZCA9IHsgdXNlciA6ICdzbGFjazovLycrbmVlZGVkSW5mb0ludml0ZWQubmFtZSsnQHNsYWNrLmNvbScsIGRvbWFpbjogJ3NsYWNrLmNvbScsIGlkOiBuZWVkZWRJbmZvSW52aXRlZC5pZCwgdXNlclVSTDogJ3NsYWNrOi8vc2xhY2suY29tLycrbmVlZGVkSW5mb0ludml0ZWQubmFtZSsnQHNsYWNrLmNvbScsIGlkZW50aXR5OiBuZWVkZWRJbmZvSW52aXRlZC5pZGVudGl0eX07XG4gICAgX3RoaXMuX2FkZGVkVXNlcnNJbmZvLnB1c2godXNlclRvQWRkKTtcbiAgICB0b0FERC5wdXNoKHVzZXJUb0FkZCk7XG5cblxuICAgIHRvQURELmZvckVhY2goZnVuY3Rpb24odXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gVEVTVCBqb2luaW5nIHdpdGggdXNlcicsIHVzZXIpO1xuICAgICAgaWYgKHVzZXIudXNlclVSTCAhPT0gbmVlZGVkT3duSW5mby51c2VyVVJMKSB7XG4gICAgICAgIF90aGlzLl9jcmVhdGVOZXdDb250ZXh0UmVwb3J0ZXIodXNlci51c2VyVVJMKS50aGVuKGZ1bmN0aW9uKGNyZWF0aW9uKXtcbiAgICAgICAgICAvL2RlYnVnZ2VyO1xuICAgICAgICAgIGlmIChjcmVhdGlvbiA9PSB0cnVlKSB7XG4gICAgICAgICAgICBfdGhpcy5fY2hhdE1hbmFnZXIuam9pbihfdGhpcy5fZGF0YU9iamVjdFJlcG9ydGVyVVJMLCBmYWxzZSwgdXNlci5pZGVudGl0eSkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gY2hhdG1hbmFnZXIgSk9JTicsIHJlc3VsdCwgdXNlci51c2VyVVJMLCBuZWVkZWRPd25JbmZvLnVzZXJVUkwpO1xuICAgICAgICAgICAgICBfdGhpcy5fcHJlcGFyZUNoYXQocmVzdWx0KTtcbiAgICAgICAgICAgICAgLy8gaWYgKHVzZXIudXNlclVSTCAhPT0gbmVlZGVkT3duSW5mby51c2VyVVJMKSB7XG4gICAgICAgICAgICAgIC8vICAgX3RoaXMuX2NyZWF0ZU5ld0NvbnRleHRSZXBvcnRlcih1c2VyLnVzZXJVUkwpO1xuICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgIGxldCBtc2dRdWVyeSA9IHsgXCJ0eXBlXCI6IFwicHJlc2VuY2Vfc3ViXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRzXCI6IF90aGlzLl90b1N1YnNjcmliZVByZXNlbmNlIH07XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIHdlYnNvY2tldCBzZW50bWVzc2FnZScsIF90aGlzLl93cy5yZWFkeVN0YXRlLCBtc2dRdWVyeSk7XG4gICAgICAgICAgICAgIF90aGlzLl93cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZ1F1ZXJ5KSk7XG5cbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIGNoYXRtYW5hZ2VyIEpPSU4gZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL1RPRE8gcG9kZSBmYWx0YXIgYXF1aSBvIGNoYXRtYW5hZ2VyIGpvaW5cbiAgICAgIH1cblxuICAgIH0pXG5cbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIEl0IGhhbmRsZSBhIG5ldyB1c2VyIGFkZGVkIHRvIGEgU2xhY2sgY2hhbm5lbCwgYW5kIGFkZCBoaW0gdG8gRGF0YU9iamVjdC5wYXJ0aWNpcGFudHNcbiAgKiBAcGFyYW0ge09iamVjdH0gbWVzc2FnZSAtIG1lc3NhZ2Ugd2l0aCBhIG5ldyB1c2VyIGFkZGVkXG4gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIF9oYW5kbGVOZXdVc2VyKG1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBIYW5kbGluZyBhIG5ldyB1c2VyJywgbWVzc2FnZSk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICBsZXQgc3ViY3JpYmVkO1xuICAgIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xuICAgICAgaWYgKG9iai5jaGFubmVsSUQgPT09IG1lc3NhZ2UuY2hhbm5lbCkge1xuICAgICAgICBzdWJjcmliZWQgPSBvYmo7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHN1YmNyaWJlZCkge1xuICAgICAgbGV0IGludkluZm8gPSBfdGhpcy5fdXNlcnNMaXN0LmZpbHRlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUuaWQgPT09IG1lc3NhZ2UudXNlcjtcbiAgICAgIH0pWzBdO1xuXG4gICAgICBsZXQgaWRlbnRpdHkgPSBfdGhpcy5fZmFjdG9yeS5jcmVhdGVNZXNzYWdlQm9keUlkZW50aXR5KFxuICAgICAgICBpbnZJbmZvLm5hbWUsXG4gICAgICAgICdzbGFjazovL3NsYWNrLmNvbS8nICsgaW52SW5mby5uYW1lICsgJ0BzbGFjay5jb20nLFxuICAgICAgICBpbnZJbmZvLnByb2ZpbGUuaW1hZ2VfMTkyLFxuICAgICAgICBpbnZJbmZvLm5hbWUsXG4gICAgICAgICcnLCAnc2xhY2suY29tJywgdW5kZWZpbmVkLCBpbnZJbmZvLnByb2ZpbGUpO1xuXG4gICAgICBsZXQgdXNlclRvQWRkID0geyB1c2VyIDogJ3NsYWNrOi8vJytpbnZJbmZvLm5hbWUrJ0BzbGFjay5jb20nLCBkb21haW46ICdzbGFjay5jb20nLCBpZDogbWVzc2FnZS51c2VyLCB1c2VyVVJMOiAnc2xhY2s6Ly9zbGFjay5jb20vJytpbnZJbmZvLm5hbWUrJ0BzbGFjay5jb20nLCBpZGVudGl0eTogaWRlbnRpdHl9O1xuICAgICAgX3RoaXMuX2FkZGVkVXNlcnNJbmZvLnB1c2godXNlclRvQWRkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIEpvaW5pbmcgY2hhdCcsc3ViY3JpYmVkLnVybERhdGFPYmosICcgd2l0aCcsIGlkZW50aXR5KTtcbiAgICAgIF90aGlzLl9jcmVhdGVOZXdDb250ZXh0UmVwb3J0ZXIoaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCkudGhlbihmdW5jdGlvbihjcmVhdGlvbikge1xuICAgICAgICAvL2RlYnVnZ2VyO1xuICAgICAgICBpZiAoY3JlYXRpb24gPT0gdHJ1ZSkge1xuICAgICAgICAgIF90aGlzLl9jaGF0TWFuYWdlci5qb2luKHN1YmNyaWJlZC51cmxEYXRhT2JqLCBmYWxzZSwgaWRlbnRpdHkpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICBfdGhpcy5fcHJlcGFyZUNoYXQocmVzdWx0KTtcbiAgICAgICAgICAgIGxldCBtc2dRdWVyeSA9IHsgXCJ0eXBlXCI6IFwicHJlc2VuY2Vfc3ViXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBcImlkc1wiOiBfdGhpcy5fdG9TdWJzY3JpYmVQcmVzZW5jZSB9O1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gd2Vic29ja2V0IHNlbnRtZXNzYWdlJywgX3RoaXMuX3dzLnJlYWR5U3RhdGUsIG1zZ1F1ZXJ5KTtcbiAgICAgICAgICAgIF90aGlzLl93cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZ1F1ZXJ5KSk7XG4gICAgICAgICAgICAvL190aGlzLl9jcmVhdGVOZXdDb250ZXh0UmVwb3J0ZXIoaWRlbnRpdHkudXNlclByb2ZpbGUudXNlclVSTCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgfVxuXG5cbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIEl0IGhhbmRsZSBhIG5ldyBQcmVzZW5jZSBjaGFuZ2Ugb2YgU2xhY2sgdXNlciwgYW5kIGNoYW5nZSBoaXMgc3RhdHVzXG4gICogQHBhcmFtIHtPYmplY3R9IG1lc3NhZ2UgLSBtZXNzYWdlIHdpdGggaW5mbyBhYm91dCB1c2VyIGFuZCBoaXMgc3RhdHVzXG4gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIF9oYW5kbGVQcmVzZW5jZUNoYW5nZShtZXNzYWdlKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSB1cGRhdGluZyBwcmVzZW5jZSBvZiB1c2VyJyk7XG4gICAgaWYgKF90aGlzLl9jb250ZXh0UmVwb3J0ZXJzSW5mb1ttZXNzYWdlLnVzZXJdKSB7XG4gICAgICBsZXQgcmVwb3J0ZXIgPSBfdGhpcy5fY29udGV4dFJlcG9ydGVyc0luZm9bbWVzc2FnZS51c2VyXTtcbiAgICAgIHJlcG9ydGVyLmRhdGEudmFsdWVzWzBdLnZhbHVlID0gX3RoaXMuX2dldFByZXNlbmNlKG1lc3NhZ2UucHJlc2VuY2UpO1xuICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gcHJlc2VuY2Ugb2YgdXNlcicsIG1lc3NhZ2UudXNlciwgJyB1cGRhdGVkIHRvJywgcmVwb3J0ZXIuZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICogSXQgaGFuZGxlIGEgbmV3IG1lc3NhZ2UgcmVjZWl2ZWQgb24gY2hhbm5lbCwgYW5kIHNlbmQgaXQgdG8gaHlwZXJ0eVxuICAqIEBwYXJhbSB7T2JqZWN0fSBtZXNzYWdlIC0gbWVzc2FnZSB3aXRoIGluZm8gYWJvdXQgY2hhbm5lbCBhbmQgdGV4dCB0byBzZW5kXG4gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIF9oYW5kbGVOZXdNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBIYW5kbGluZyBhIG5ldyBtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgbGV0IF90aGlzID0gdGhpcztcbiAgICBsZXQgY2hhbm5lbElEID0gJyc7XG4gICAgbGV0IGNoYXQ7XG4gICAgX3RoaXMuX3N1YnNjcmliZWRMaXN0LmZvckVhY2goZnVuY3Rpb24ob2JqKSB7XG4gICAgICBpZiAob2JqLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsKSB7XG4gICAgICAgIGNoYW5uZWxJRCA9IG9iai5jaGFubmVsSUQ7XG4gICAgICAgIGNoYXQgPSBvYmouY2hhdDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBzdWJzY3JpYmVkIGxpc3QnLCBfdGhpcy5fc3Vic2NyaWJlZExpc3QpO1xuICAgIGlmIChtZXNzYWdlLmNoYW5uZWwgJiYgbWVzc2FnZS50cyA+IF90aGlzLl9zZXNzaW9uLmNyZWF0ZWRUaW1lICkge1xuICAgICAgaWYgKG1lc3NhZ2UuY2hhbm5lbCA9PT0gY2hhbm5lbElEICYmIG1lc3NhZ2UudXNlciAhPT0gX3RoaXMuX2lkIHx8XG4gICAgICAgICAgKCFtZXNzYWdlLmhhc093blByb3BlcnR5KCdib3RfaWQnKSAmJiBtZXNzYWdlLnVzZXIgPT09IF90aGlzLl9pZCAmJiBtZXNzYWdlLmNoYW5uZWwgPT09IGNoYW5uZWxJRCkpIHtcblxuICAgICAgICBfdGhpcy5fZ2V0VXNlckluZm8obWVzc2FnZS51c2VyKS50aGVuKChpZGVudGl0eSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIG1zZyB0byBhZGRDaGlsZCcsICBtZXNzYWdlLnRleHQsICcgICAgIGlkZW50aXR5OicsIGlkZW50aXR5KTtcbiAgICAgICAgICBjaGF0LnNlbmQoIG1lc3NhZ2UudGV4dCwgaWRlbnRpdHkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgKiBJdCByZXRyaWV2ZXMgaW5mb3JtYXRpb24gZnJvbSBhIHNsYWNrIHVzZXIgYW5kIGNyZWF0ZXMgYSByZVRISU5LIElkZW50aXR5IG9iamVjdCB3aXRoIGl0XG4gICogQHBhcmFtIHtzdHJpbmd9IHVzZXIgLSBzbGFjayB1c2VyIGlkXG4gICogQHJldHVybiB7UHJvbWlzZTxPYmplY3Q+fSBSZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGFuIElkZW50aXR5IG9iamVjdCByZXNvbHZlZFxuICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBfZ2V0VXNlckluZm8odXNlcikge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgX3RoaXMuX3NsYWNrLnVzZXJzLmluZm8oe3Rva2VuOiBfdGhpcy5fdG9rZW4sIHVzZXI6IHVzZXJ9LCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2xhY2tQcm90b3N0dWJdIGVycm9yJywgZXJyKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWIgZ2V0VXNlckluZm9dICcsIGRhdGEpO1xuICAgICAgICAgIGxldCBpZGVudGl0eSA9IF90aGlzLl9mYWN0b3J5LmNyZWF0ZU1lc3NhZ2VCb2R5SWRlbnRpdHkoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudXNlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAnc2xhY2s6Ly9zbGFjay5jb20vJyArIGRhdGEudXNlci5uYW1lICsgJ0BzbGFjay5jb20nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnVzZXIucHJvZmlsZS5pbWFnZV8xOTIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudXNlci5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAnJywgJ3NsYWNrLmNvbScpO1xuXG4gICAgICAgICAgcmVzb2x2ZShpZGVudGl0eSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gIH1cblxuICBfcHJlcGFyZUNoYXQoY2hhdCkge1xuICAgIGxldCBfdGhpcyA9IHRoaXM7XG4gICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gY2hhdCcsIGNoYXQpO1xuICAgIGNoYXQub25NZXNzYWdlKChtc2cpID0+IHtcbiAgICAgIGNvbnNvbGUuaW5mbygnW1NsYWNrUHJvdG9zdHViXSBvbk1lc3NhZ2U6ICcsIG1zZyk7XG4gICAgICBjb25zb2xlLmluZm8oJ1tTbGFja1Byb3Rvc3R1Yl0gT2JzZXJ2ZXIgLSBNZXNzYWdlIEhpc3RvcnkgQ29udHJvbCAnLCBfdGhpcy5fbWVzc2FnZUhpc3RvcnlDb250cm9sKTtcblxuICAgICAgLy9jaGVjayBpZiBmb3IgZWFjaCBtc2cgbWVzc2FnZSBoYXMgYmVlbiBkZWxpdmVyZWQsIGFuZCBjb250cm9sIHRoYXQgZm9yIHdoZW4gd2UgaGF2ZSBtb3JlIHRoYW4gb25lIHNsYWNrIHVzZXIgc3Vic2NyaWJlZFxuICAgICAgbGV0IGN1cnJlbnRJRCA9IGNoYXQuY2hpbGRfY3NlcTtcbiAgICAgIC8vIGNoZWNrIGlmIHRoaXMgY2hpbGQgYWxyZWFkeSBzZW50IG1lc3NhZ2VzXG4gICAgICBsZXQgY2hhbm5lbE9ialVybCA9IGNoYXQuX2RhdGFPYmplY3RPYnNlcnZlci51cmw7XG4gICAgICBsZXQgY2hhbm5lbElEO1xuXG4gICAgICBfdGhpcy5fc3Vic2NyaWJlZExpc3QuZm9yRWFjaChmdW5jdGlvbihvYmopIHtcbiAgICAgICAgaWYgKG9iai51cmxEYXRhT2JqID09PSBjaGFubmVsT2JqVXJsICkge1xuICAgICAgICAgIGNoYW5uZWxJRCA9IG9iai5jaGFubmVsSUQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiggX3RoaXMuX21lc3NhZ2VIaXN0b3J5Q29udHJvbC5oYXNPd25Qcm9wZXJ0eShjaGFubmVsT2JqVXJsKSkge1xuXG4gICAgICAgIC8vIGluIHRoYXQgY2FzZSBjaGVjayBpZiB0aGUgY3VycmVudElEIGl0cyBlcXVhbCB0byBvbGRJRFxuICAgICAgICBsZXQgb2xkSUQgPSBfdGhpcy5fbWVzc2FnZUhpc3RvcnlDb250cm9sW2NoYW5uZWxPYmpVcmxdLmlkO1xuICAgICAgICBpZiAoIG9sZElEICE9PSBjdXJyZW50SUQgKSB7XG4gICAgICAgICAgX3RoaXMuX21lc3NhZ2VIaXN0b3J5Q29udHJvbFtjaGFubmVsT2JqVXJsXS5pZCA9IGN1cnJlbnRJRDtcbiAgICAgICAgICBfdGhpcy5fZGVsaXZlcihtc2csIGNoYW5uZWxJRCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLl9tZXNzYWdlSGlzdG9yeUNvbnRyb2xbY2hhbm5lbE9ialVybF0gPSB7aWQ6IGN1cnJlbnRJRH07XG4gICAgICAgIF90aGlzLl9kZWxpdmVyKG1zZywgY2hhbm5lbElEKTtcbiAgICAgIH1cblxuICAgIH0pO1xuICB9XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICogSXQgcmV0cmlldmVzIGluZm9ybWF0aW9uIGZyb20gYSBzbGFjayB1c2VyIGFuZCBjcmVhdGVzIGEgcmVUSElOSyBJZGVudGl0eSBvYmplY3Qgd2l0aCBpdFxuICAqIEBwYXJhbSB7c3RyaW5nfSBpZFVzZXIgLSBzbGFjayB1c2VyIElEIHRvIGJlIGludml0ZWRcbiAgKiBAcGFyYW0ge3N0cmluZ30gaWRDaGFubmVsIC0gY2hhbm5lbElEIGZvciB1c2VyIHdpbGwgYmUgaW52aXRlZFxuICAqIEBwYXJhbSB7c3RyaW5nfSBjaGFubmVsT2JqVXJsIC0gRGF0YU9iamVjdFVSTCBmcm9tIHdoZXJlIHVzZXIgaXMgaW52aXRlZFxuICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBfaW52aXRlKGlkVXNlciwgaWRDaGFubmVsID0gJycsIGNoYW5uZWxPYmpVcmwpIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKGlkQ2hhbm5lbCA9PSAnJykge1xuICAgICAgX3RoaXMuX3N1YnNjcmliZWRMaXN0LmZvckVhY2goZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIGlmIChvYmoudXJsRGF0YU9iaiA9PT0gY2hhbm5lbE9ialVybCApIHtcbiAgICAgICAgICBpZENoYW5uZWwgPSBvYmouY2hhbm5lbElEO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgdG9JbnZpdGUgPSB7IHRva2VuOiBfdGhpcy5fdG9rZW4sIGNoYW5uZWw6IGlkQ2hhbm5lbCwgdXNlcjogaWRVc2VyIH07XG5cbiAgICBfdGhpcy5fc2xhY2suY2hhbm5lbHMuaW52aXRlKHRvSW52aXRlLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTbGFja1Byb3Rvc3R1Yl0gZXJyb3InLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSB1c2VyIGludml0ZWQgd2l0aCBzdWNlc3MnLCBkYXRhKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIEl0IGRlbGl2ZXIgYSBtZXNzYWdlIHRvIGEgc2xhY2sgY2hhbm5lbFxuICAqIEBwYXJhbSB7T2JqZWN0fSBtc2cgLSBNZXNzYWdlIE9iamVjdFxuICAqIEBwYXJhbSB7U3RyaW5nfSBjaGFubmVsSUQgLSBjaGFubmVsSUQgdG8gZGVsaXZlciBtZXNzYWdlXG4gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIF9kZWxpdmVyKG1zZywgY2hhbm5lbElEKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIGNvbnNvbGUubG9nKCdbU2xhY2tQcm90b3N0dWJdIE1zZyB0byBEZWxpdmVyOiAnLG1zZywgJyBvbiBjaGFubmVsOicsIGNoYW5uZWxJRCk7XG4gICAgaWYgKGNoYW5uZWxJRCAmJiBtc2cudmFsdWUpIHtcblxuICAgICAgaWYgKG1zZy5oYXNPd25Qcm9wZXJ0eSgnaWRlbnRpdHknKSAmJiBtc2cuaWRlbnRpdHkuaGFzT3duUHJvcGVydHkoJ3VzZXJQcm9maWxlJylcbiAgICAgICYmIG1zZy5pZGVudGl0eS51c2VyUHJvZmlsZS5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpICYmIG1zZy5pZGVudGl0eS51c2VyUHJvZmlsZS5uYW1lKSB7XG5cbiAgICAgICAgbGV0IHRleHQgPSAnJyArIG1zZy5pZGVudGl0eS51c2VyUHJvZmlsZS5uYW1lICsgJzogJyArIG1zZy52YWx1ZS5jb250ZW50O1xuICAgICAgICBsZXQgbWVzc2FnZSA9IHsgYXNfdXNlcjogdHJ1ZSwgdG9rZW46IF90aGlzLl90b2tlbiwgY2hhbm5lbDogY2hhbm5lbElELCB0ZXh0OiB0ZXh0fTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gKFBvc3RNZXNzYWdlIHNsYWNrIGFwaSkgdG9rZW4oJywgX3RoaXMuX3Rva2VuLCAnKSAgY2hhbm5lbCgnLCBjaGFubmVsSUQsICcpIHRleHQoJywgIG1zZy52YWx1ZS5jb250ZW50LCAnKScpO1xuXG4gICAgICAgIC8vIGNhbGwgU2xhY2sgcG9zdE1lc3NhZ2UgbWV0aG9kIHRvIGRlbGl2ZXIgbXNnIG9uIHNsYWNrIGNoYW5uZWxcbiAgICAgICAgX3RoaXMuX3NsYWNrLmNoYXQucG9zdE1lc3NhZ2UobWVzc2FnZSwgZnVuY3Rpb24oZXJyLCBkYXRhKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlID09ICdub3RfaW5fY2hhbm5lbCcpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW1NsYWNrUHJvdG9zdHViXSBDaGFubmVsIGV4aXN0LCBidXQgdXNlciBpcyBub3Qgb24gY2hhbm5lbCcsIGVycilcbiAgICAgICAgICAgICAgbGV0IGNoYW5uZWxUb0pvaW4gPSBfdGhpcy5fY2hhbm5lbHNMaXN0LmZpbHRlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5pZCA9PT0gY2hhbm5lbElEO1xuICAgICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgICAgbGV0IG9ialRvSm9pbiA9IHsgdG9rZW46IF90aGlzLl90b2tlbiwgbmFtZTogY2hhbm5lbFRvSm9pbi5uYW1lfTtcblxuICAgICAgICAgICAgICBfdGhpcy5fc2xhY2suY2hhbm5lbHMuam9pbihvYmpUb0pvaW4pO1xuICAgICAgICAgICAgICBfdGhpcy5fZGVsaXZlcihtc2csIGNoYW5uZWxJRCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbU2xhY2tQcm90b3N0dWJdIGVycm9yJywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gUG9zdE1lc3NhZ2Ugd2l0aCBTdWNlc3MnLCBkYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIEl0IGNyZWF0ZSBhIG5ldyBzbGFja0NoYW5uZWwgdXNpbmcgY2hhbm5lbE5hbWVcbiAgKiBAcGFyYW0ge1N0cmluZ30gY2hhbm5lbE5hbWUgLSBuYW1lIHRvIGJlIHVzZWQgdG8gY3JlYXRlIGEgbmV3IGNoYW5uZWxcbiAgKiBAcGFyYW0ge1N0cmluZ30gY2hhbm5lbE9ialVybCAtIERhdGFvYmplY3QgVVJMIG9mIGEgY2hhbm5lbCB0byBiZSB1c2VkIHRvIGFzc29jaWF0ZSB0aGlzIGNoYW5uZWwgdG8gdGhpcyBkYXRhb2JqZWN0XG4gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIF9jcmVhdGVDaGFubmVsKGNoYW5uZWxOYW1lLCBjaGFubmVsT2JqVXJsKSB7XG4gICAgbGV0IF90aGlzID0gdGhpcztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICBsZXQgdG9DcmVhdGUgPSB7IHRva2VuOiBfdGhpcy5fdG9rZW4sIG5hbWU6IGNoYW5uZWxOYW1lIH07XG4gICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBDcmVhdGluZyBhIG5ldyBjaGFubmVsIHRvQ3JlYXRlOicsdG9DcmVhdGUsICcgIGNoYW5uZWxPYmpVcmw6JywgIGNoYW5uZWxPYmpVcmwpO1xuICAgICAgX3RoaXMuX3NsYWNrLmNoYW5uZWxzLmNyZWF0ZSh0b0NyZWF0ZSwgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW1NsYWNrUHJvdG9zdHViXSAnLCBlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChkYXRhLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBDaGFubmVsIENyZWF0ZWQgd2l0aCBTdWNlc3MgJywgZGF0YSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NsYWNrUHJvdG9zdHViXSBBc3NvY2lhdGUgYSBuZXcgY2hhbm5lbCBJRCcsIGRhdGEuY2hhbm5lbC5pZCwgJ3RvIHVybERhdGFPYmonLCAgY2hhbm5lbE9ialVybCk7XG5cbiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICBsZXQga2V5ID0gMDtcbiAgICAgICAgICAgIC8vQXNzb2NpYXRlIGEgY2hhbm5lbCB0byBjb21tIGRhdGFPYmplY3RcbiAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmVkTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICBpZiAob2JqLnVybERhdGFPYmogPT09IGNoYW5uZWxPYmpVcmwgKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gY291bnQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXMuX3N1YnNjcmliZWRMaXN0W2tleV0uY2hhbm5lbElEID0gZGF0YS5jaGFubmVsLmlkO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1Yl0gc3Vic2NyaWJlZCBsaXN0JywgX3RoaXMuX3N1YnNjcmliZWRMaXN0KTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9zZW5kSFRUUFJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICBpZiAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSB7XG4gICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIFhEb21haW5SZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGlmIFhEb21haW5SZXF1ZXN0LlxuICAgICAgICAvLyBYRG9tYWluUmVxdWVzdCBvbmx5IGV4aXN0cyBpbiBJRSwgYW5kIGlzIElFJ3Mgd2F5IG9mIG1ha2luZyBDT1JTIHJlcXVlc3RzLlxuICAgICAgICB4aHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBDT1JTIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuXG4gICAgICAgIHhociA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoeGhyKSB7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgbGV0IGluZm8gPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICByZXNvbHZlKGluZm8pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh4aHIuc3RhdHVzID09PSA0MDApIHtcbiAgICAgICAgICAgICAgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdG9rZW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlamVjdCgnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KCdDT1JTIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIEl0IFVwZGF0ZXMgdGhlIHN0YXRlIG9mIFByb3RvU3R1YlxuICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSAtIHN0YXR1cyBvZiBwcm90b3N0dWIgdG8gYmUgdXBkYXRlZFxuICAqIEBwYXJhbSB7U3RyaW5nfSByZWFzb24gLSByZWFzb24gb2YgdGhpcyB1cGRhdGUsIG9wdGlvbmFsXG4gICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHtcbiAgICBsZXQgX3RoaXMgPSB0aGlzO1xuXG4gICAgY29uc29sZS5sb2coJ1tTbGFja1Byb3Rvc3R1YiBzdGF0dXMgY2hhbmdlZF0gdG8gJywgdmFsdWUpO1xuXG4gICAgX3RoaXMuX3N0YXRlID0gdmFsdWU7XG5cbiAgICBsZXQgbXNnID0ge1xuICAgICAgdHlwZTogJ3VwZGF0ZScsXG4gICAgICBmcm9tOiBfdGhpcy5fbXlVcmwsXG4gICAgICB0bzogX3RoaXMuX215VXJsICsgJy9zdGF0dXMnLFxuICAgICAgYm9keToge1xuICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHJlYXNvbikge1xuICAgICAgbXNnLmJvZHkuZGVzYyA9IHJlYXNvbjtcbiAgICB9XG4gICAgX3RoaXMuX2J1cy5wb3N0TWVzc2FnZSggbXNnICk7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnLCBmYWN0b3J5KSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ1NsYWNrUHJvdG9TdHViJyxcbiAgICBpbnN0YW5jZTogbmV3IFNsYWNrUHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcsIGZhY3RvcnkpXG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9TbGFja1Byb3RvU3R1Yi5wcy5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

eval("let bind = __webpack_require__(0)\nlet exec = __webpack_require__(2)\nlet factory = __webpack_require__(6)\n\n/**\n * bind accepts an object, in this case the factory function, and\n * applies exec to the Slack API methods as defined in api.json\n */\nmodule.exports = bind(factory, exec)\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svaW5kZXguanM/NDMzYyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxXQUFXLG1CQUFPLENBQUMsQ0FBYTtBQUNoQyxXQUFXLG1CQUFPLENBQUMsQ0FBYTtBQUNoQyxjQUFjLG1CQUFPLENBQUMsQ0FBZ0I7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiNC5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBiaW5kID0gcmVxdWlyZSgnLi9zcmMvX2JpbmQnKVxubGV0IGV4ZWMgPSByZXF1aXJlKCcuL3NyYy9fZXhlYycpXG5sZXQgZmFjdG9yeSA9IHJlcXVpcmUoJy4vc3JjL19mYWN0b3J5JylcblxuLyoqXG4gKiBiaW5kIGFjY2VwdHMgYW4gb2JqZWN0LCBpbiB0aGlzIGNhc2UgdGhlIGZhY3RvcnkgZnVuY3Rpb24sIGFuZFxuICogYXBwbGllcyBleGVjIHRvIHRoZSBTbGFjayBBUEkgbWV0aG9kcyBhcyBkZWZpbmVkIGluIGFwaS5qc29uXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gYmluZChmYWN0b3J5LCBleGVjKVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(1)\n\nmodule.exports = function validate(method, params) {\n  // get all the requried params for this method\n  let required = api[method]\n  // collect any missing params\n  let missing = required.filter(param=> typeof params[param] === 'undefined')\n  // optimistic: assume the best but have a plan for the worst\n  return missing.length? Error(`${method} missing params: ${missing.join(', ')}`) : false\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svc3JjL192YWxpZGF0ZS5qcz9mNTc5Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFVBQVUsbUJBQU8sQ0FBQyxDQUFZOztBQUU5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsT0FBTyxtQkFBbUIsbUJBQW1CO0FBQy9FIiwiZmlsZSI6IjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBpID0gcmVxdWlyZSgnLi9hcGkuanNvbicpXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdmFsaWRhdGUobWV0aG9kLCBwYXJhbXMpIHtcbiAgLy8gZ2V0IGFsbCB0aGUgcmVxdXJpZWQgcGFyYW1zIGZvciB0aGlzIG1ldGhvZFxuICBsZXQgcmVxdWlyZWQgPSBhcGlbbWV0aG9kXVxuICAvLyBjb2xsZWN0IGFueSBtaXNzaW5nIHBhcmFtc1xuICBsZXQgbWlzc2luZyA9IHJlcXVpcmVkLmZpbHRlcihwYXJhbT0+IHR5cGVvZiBwYXJhbXNbcGFyYW1dID09PSAndW5kZWZpbmVkJylcbiAgLy8gb3B0aW1pc3RpYzogYXNzdW1lIHRoZSBiZXN0IGJ1dCBoYXZlIGEgcGxhbiBmb3IgdGhlIHdvcnN0XG4gIHJldHVybiBtaXNzaW5nLmxlbmd0aD8gRXJyb3IoYCR7bWV0aG9kfSBtaXNzaW5nIHBhcmFtczogJHttaXNzaW5nLmpvaW4oJywgJyl9YCkgOiBmYWxzZVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svc3JjL192YWxpZGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

eval("var bind = __webpack_require__(0)\nvar exec = __webpack_require__(2)\n\n/** \n * factory returns a new instance of Slack\n * \n * things to understand:\n *\n * - this function is the root object exported \n * - can be a constuctor for creating oo style instances of Slack \n * - requires named params to allow for future flexability in the function sig\n * - all methods have token pre applied\n * - all methods either accept a callback or return a promise\n */\nmodule.exports = function factory(xxx) {\n  \n  if (!xxx) xxx = {}\n\n  // Slack instance applies the token param to all the api methods\n  class Slack {\n    constructor() {\n      function _execWithToken(method, params, callback) {\n        params.token = params.token || xxx.token\n        return exec(method, params, callback)\n      }\n      // bind applies the above method to this obj\n      // bind also returns all methods promisified\n      bind(this, _execWithToken)\n    }\n  }\n\n  return new Slack\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZGV2LXByb3Rvc3R1YnMvc3JjL3Byb3Rvc3R1Yi9zbGFjay9ub2RlX21vZHVsZXMvc2xhY2svc3JjL19mYWN0b3J5LmpzPzAzOWEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxtQkFBTyxDQUFDLENBQVM7QUFDNUIsV0FBVyxtQkFBTyxDQUFDLENBQVM7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJpbmQgPSByZXF1aXJlKCcuL19iaW5kJylcbnZhciBleGVjID0gcmVxdWlyZSgnLi9fZXhlYycpXG5cbi8qKiBcbiAqIGZhY3RvcnkgcmV0dXJucyBhIG5ldyBpbnN0YW5jZSBvZiBTbGFja1xuICogXG4gKiB0aGluZ3MgdG8gdW5kZXJzdGFuZDpcbiAqXG4gKiAtIHRoaXMgZnVuY3Rpb24gaXMgdGhlIHJvb3Qgb2JqZWN0IGV4cG9ydGVkIFxuICogLSBjYW4gYmUgYSBjb25zdHVjdG9yIGZvciBjcmVhdGluZyBvbyBzdHlsZSBpbnN0YW5jZXMgb2YgU2xhY2sgXG4gKiAtIHJlcXVpcmVzIG5hbWVkIHBhcmFtcyB0byBhbGxvdyBmb3IgZnV0dXJlIGZsZXhhYmlsaXR5IGluIHRoZSBmdW5jdGlvbiBzaWdcbiAqIC0gYWxsIG1ldGhvZHMgaGF2ZSB0b2tlbiBwcmUgYXBwbGllZFxuICogLSBhbGwgbWV0aG9kcyBlaXRoZXIgYWNjZXB0IGEgY2FsbGJhY2sgb3IgcmV0dXJuIGEgcHJvbWlzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGZhY3RvcnkoeHh4KSB7XG4gIFxuICBpZiAoIXh4eCkgeHh4ID0ge31cblxuICAvLyBTbGFjayBpbnN0YW5jZSBhcHBsaWVzIHRoZSB0b2tlbiBwYXJhbSB0byBhbGwgdGhlIGFwaSBtZXRob2RzXG4gIGNsYXNzIFNsYWNrIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIGZ1bmN0aW9uIF9leGVjV2l0aFRva2VuKG1ldGhvZCwgcGFyYW1zLCBjYWxsYmFjaykge1xuICAgICAgICBwYXJhbXMudG9rZW4gPSBwYXJhbXMudG9rZW4gfHwgeHh4LnRva2VuXG4gICAgICAgIHJldHVybiBleGVjKG1ldGhvZCwgcGFyYW1zLCBjYWxsYmFjaylcbiAgICAgIH1cbiAgICAgIC8vIGJpbmQgYXBwbGllcyB0aGUgYWJvdmUgbWV0aG9kIHRvIHRoaXMgb2JqXG4gICAgICAvLyBiaW5kIGFsc28gcmV0dXJucyBhbGwgbWV0aG9kcyBwcm9taXNpZmllZFxuICAgICAgYmluZCh0aGlzLCBfZXhlY1dpdGhUb2tlbilcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFNsYWNrXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9kZXYtcHJvdG9zdHVicy9zcmMvcHJvdG9zdHViL3NsYWNrL25vZGVfbW9kdWxlcy9zbGFjay9zcmMvX2ZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n");

/***/ })
/******/ ])["default"];
});